# StackOverflow 问答 15905000-15905999

# javascript - d3.js 折线图轴未正确显示数据

> ID：15905000
> 
> 赞同：1
> 
> 时间：2013-04-09T14:42:41.753
> 
> 标签：javascript, d3.js, linechart

我无法弄清楚为什么数据无法正确显示。我认为这与轴的比例有关，但我找不到任何解决方案。有一条线正在绘制，但它太小了。我使用的例子有几年的时间尺度，而我只做一个星期。

下面是代码。

```
 <!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}

.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}

</style>
</head>
<body>
<script src="http://d3js.org/d3.v3.js" charset="utf-8"></script> 
<script>

var margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var parseDate = d3.time.format("%d-%b-%y").parse;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var line = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.close); });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var data = [{"close":71,"date":"9-Apr-13"},{"close":14,"date":"9-Apr-13"},{"close":10,"date":"9-Apr-13"},{"close":109,"date":"9-Apr-13"},{"close":62,"date":"9-Apr-13"},{"close":61,"date":"9-Apr-13"},{"close":62,"date":"9-Apr-13"},{"close":32,"date":"9-Apr-13"},{"close":19,"date":"9-Apr-13"}];

  data.forEach(function(d) {
    d.date = parseDate(d.date);
    d.close = +d.close;
  });

  x.domain(d3.extent(data, function(d) { return d.date; }));
  y.domain(d3.extent(data, function(d) { return d.close; }));

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Price ($)");

  svg.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:38:29.213

根据您提供的数据，只有一个时间实例：2013 年 4 月 9 日。由于 min 和 max 之间没有区别，因此不会显示 x 轴。

如果您将某个日期更改为 4 月 11 日，它看起来是正确的。请记住，您的CSS说

```
.x.axis path {
  display: none;
} 
```

所以无论如何x轴的实际线都不会显示

# c - 添加编译阶段

> ID：15905004
> 
> 赞同：1
> 
> 时间：2013-04-09T14:42:56.977
> 
> 标签：c, gcc, compiler-construction, icc

我需要调试带有大量宏的 C 代码，其中一堆宏根本不重要，它们包括几行（很多）。这使得调试变得不可能，因为宏在一行中展开，你永远不知道错误来自哪里。另一方面，很容易`sed`获取预处理器输出并在每个分号后添加行。

我不会讨论使用这些宏的好习惯，因为我对此无能为力。但是我想知道是否可以在预处理和编译之间为编译器添加一个阶段（我使用了几个编译器：icc、gcc、xlc），所以我运行了那个`sed`命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:49:03.023

您可以做的是仅运行预处理器（-E）：

```
 $ g++ -E in.c -o in.i 
```

然后运行您的 sed 脚本并使用 g++ 编译它的输出（这次没有 -E）。我敢肯定，您可以在 Makefile 中构建一个规则来执行所有这些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:39:23.923

到目前为止，我将尝试使用我在[这篇文章](https://stackoverflow.com/questions/3545875/custom-gcc-preprocessor)中找到的内容。我还尝试了使用包装器来编译单个文件的选项，目前，它可以解决问题。在包装器中，我预处理（使用-E）文件，然后使用`sed`一些规则处理预处理的文件，然后编译它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:11:03.983

将您自己的“编译器”定义为要运行的脚本`g++ -E`，然后定义您的`sed`-mangler，然后`g++`将其指定为整个编译器。请注意使用 的临时文件`mktemp`，因此并行启动编译 ( `make -j`) 不会把事情搞砸。

（今天的 GCC 不再有单独的预处理步骤，因此无论如何都不能轻松地在那里注入一些东西。）

# plot - 缩放后更改数据源 - 核心图

> ID：15905005
> 
> 赞同：0
> 
> 时间：2013-04-09T14:42:59.003
> 
> 标签：plot, core-plot, core

缩放绘图后我需要更改数据源，我可以在缩放完成后以某种方式截取吗？

我设置了allowUserInteraction=YES，所以我可以平移和缩放，但我找不到处理这个事件的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:20:54.033

您可以使用绘图空间委托观看绘图范围。当范围满足您设置的任何阈值时，更改数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:00:45.123

这些是正确的方法：

```
- (BOOL) plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDraggedEvent:(id)event atPoint:(CGPoint)point
- (BOOL) plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDownEvent:(id)event atPoint:(CGPoint)point 
- (BOOL) plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceUpEvent:(id)event atPoint:(CGPoint)point {
- (BOOL) plotSpace:(CPTPlotSpace *)space shouldScaleBy:(CGFloat)interactionScale aboutPoint:(CGPoint)interactionPoint 
```

# php - 如果没有要显示的帖子，我如何发送消息

> ID：15905013
> 
> 赞同：0
> 
> 时间：2013-04-09T14:43:14.080
> 
> 标签：php, wordpress, if-statement

我正在通过以下代码显示一系列帖子。当没有要显示的帖子时，我想打印一个通知，例如“没有要显示的帖子”。如何才能做到这一点？

```
<?php
    while ( have_posts() ) :
        the_post();
?>
        <h1><?php the_title();?></h1>
        <section class="intro">
        <?php the_content(); ?> 
        </section>
<?php endwhile; // end of the loop. ?>
        <h2>Latest Events</h2>

<?php
    query_posts( array( 'category__and' => array(8) ) );
    if ( have_posts() ) while ( have_posts() ) :
        the_post(); 
?>

        <article class="events clearfix">
            <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
            <?php the_excerpt(); ?>
            <div class="date">
                <span class="month"><?php the_time('M') ?></span>
                <span class="day"><?php the_time('d') ?></span>
            </div>
        </article>

<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:06:05.157

在您的示例中，您必须按如下方式修改代码：

```
// Display latest events
// ...
if ( have_posts() ) {
    // ...
} else {
    echo '<article class="events clearfix">';
    echo '<p>No posts to display.</p>';
    echo '</article>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:50:49.017

`have_posts()``true`当有要显示的帖子和没有帖子时返回`false`（请参阅[文档](http://codex.wordpress.org/Function_Reference/have_posts)）。

您可以轻松评估其价值，并相应地显示您的信息。例如：

```
if(!have_posts())
{
    echo 'No posts to display&hellip;';
}
else
{
    // code to display your posts here.
} 
```

# java - 使用 OWL API 在 OWL Ontology 上编写 OWLObjectPropertyExpression

> ID：15905014
> 
> 赞同：0
> 
> 时间：2013-04-09T14:43:19.330
> 
> 标签：java, semantic-web, owl, owl-api

我正在尝试在 OWL Ontology 对象上编写 OWLObjectPropertyExpression。如果我有一个 OWL 类，我会使用如下内容：

```
 OWLOntologyManager managerWriter = OWLManager.createOWLOntologyManager();
 OWLOntology ontoWrite=managerWriter.createOntology();
 OWLDataFactory factory = manager.getOWLDataFactory();
 managerWriter.addAxiom(ontoWrite,factory.getOWLDeclarationAxiom(factory.getOWLClass((cl.getIRI())))); 
```

但是如果我想写一个 OWLObjectPropertyExpression 我应该写什么呢？提前致谢 ！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:39:22.087

下面的代码片段说明了使用 OWL API（从[那里](https://code.google.com/p/elk-reasoner/wiki/QueryingComplexClasses)获取和改编）使用和创建 OWL 表达式的示例：

```
//OWL Expression we would like to create:
//in OWL Functional syntax: ObjectIntersectionOf(A ObjectSomeValuesFrom(R B))
//in Manchester syntax: A and R some B
PrefixManager pm = new DefaultPrefixManager("http://example.org/");
OWLClass A = factory.getOWLClass(":A", pm);
OWLObjectProperty R = factory.getOWLObjectProperty(":R", pm);
OWLClass B = factory.getOWLClass(":B", pm);

//The expression
OWLClassExpression expression = 
  factory.getOWLObjectIntersectionOf(A, factory.getOWLObjectSomeValuesFrom(R, B));

//Create a class in order to use the expression
OWLClass C = factory.getOWLClass(":C", pm);

// Declare an equivalentClass axiom
//Just there to show how an example on how to use the expression
OWLAxiom definition = factory.getOWLEquivalentClassesAxiom(C, expression);
manager.addAxiom(ontology, definition); 
```

# php - 在 PHP 中使用从 jQuery 接收的数据

> ID：15905015
> 
> 赞同：1
> 
> 时间：2013-04-09T14:43:20.473
> 
> 标签：php, jquery, mysql, mysqli, .post

我有一个评论框，我想在每条评论中添加一个按钮，单击该按钮会从框中删除该评论。以下是每条评论的生成方式（只是部分）：

```
echo '<div>'.$row['Login'].'<button id="jqhide">Hide</button></strong><br/>'; 
```

如您所见，按钮有一个 id，当它被点击时，jquery 监听器开始工作：

```
$("button#jqhide").click(function(){
    var smt = $(this).closest("div").find("p").html();
    $.post("send.php", smt);
}); 
```

在“send.php”中：

```
$con = mysqli_connect(...);
$vrr = $_POST['smt'];
$sql = mysqli_query("DELETE FROM comments WHERE p_id=$vrr");
mysqli_query($con,$sql); 
```

这里卡住了，我的意思是`$_POST['smt']`似乎是空的。我想要的只是通过它的“p_id”从 MySQL 中删除条目。我很确定我犯了很多错误，但这就是我尝试学习的方式。

添加：

我尝试只运行“send.php”，但出现以下错误：

> 警告：mysqli_query() 至少需要 2 个参数，1 个在 Z:\home\localhost\www\php\send.php 第 5 行给出
> 
> 警告：mysqli_query() [function.mysqli-query]：第 6 行 Z:\home\localhost\www\php\send.php 中的空查询

send.php 行：

```
<?php 
$con = mysqli_connect(localhost, "bla", "eco", "frst_db");
$vrr = $_POST['smt'];
echo $vrr;
$sql = mysqli_query("DELETE FROM comments WHERE p_id=$vrr");
mysqli_query($con,$sql);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:57:43.003

首先要小心SQL注入

```
$sql = mysqli_query("DELETE FROM comments WHERE p_id=$vrr"); 
```

现在让我们回到你的问题。

```
var smt = $(this).closest("div").find("p").html(); 
```

p标签在哪里？

添加 ap 标记会起作用，否则 p 标记将始终为空！！！

```
<div>1<button id="jqhide">Hide</button><p>some text to be sent via ajax </p></strong><br/></div>
    <script>
        $("button#jqhide").click(function(){
            alert($(this).closest("div").find("p").html());
    var smt = $(this).closest("div").find("p").html();
    $.post("send.php", smt);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:52:47.897

试试这个：

改变：

```
$.post("send.php", smt); 
```

到：

```
$.post("send.php", { smt: smt } ); 
```

# ms-access - 复杂的JOIN：2个表，3个关键字段，匹配并维护所有需要的记录

> ID：15905016
> 
> 赞同：2
> 
> 时间：2013-04-09T14:43:21.237
> 
> 标签：ms-access, ms-access-2007

我正在努力研究如何加入几个表以在查询中获得特定结果。

我有两张桌子：

1.  一个`[T_Prog]`表，其中包含所有可能的`ID1`&`ID2`记录， `PRGCASH`每条记录的数量与其各自的`MONTHNUMBER`.

2.  一个`[T_ALS]`表，其中包含所有可能的`ID1`&`ID2`记录的一部分，其中`ALSCASH`每个记录都针对其各自的`MONTHNUMBER`.

我想要做的是将`PRGCASH`and`ALSCASH`字段放入单个查询中，并与它们各自的`ID1`,`ID2`和`MONTHNUMBER`字段进行适当匹配。

每个表中记录的唯一性是`ID1`,`ID2`和`MONTHNUMBER`字段的组合。

我遇到的问题是，该`[T_ALS]`表包含的`MONTHNUMBER`每个唯一`ID1`和`ID2`组合条目比表中包含的条目更多`[T_Prog]`。

所以如果我这样做...

```
SELECT [T_Prog].ID1, [T_Prog].ID2, [T_Prog].MONTHNUMBER, [T_Prog].PRGCASH, [T_ALS].ALSCASH
FROM [T_Prog] 
LEFT JOIN [T_ALS] ON ([T_Prog].ID1 = [T_ALS].ID1) AND ([T_Prog].ID2 = [T_ALS].ID2) AND ([T_Prog].MONTHNUMBER = [T_ALS].MONTHNUMBER) 
```

...我得到了所有可能的记录，但是由于表没有等效记录，因此任何其他记录`[T_ALS]`都`MONTHNUMBER`将丢失。`[T_Prog]`

如果我这样做...

```
SELECT [T_ALS].ID1, [T_ALS].ID2, [T_ALS].MONTHNUMBER, [T_Prog].PRGCASH, [T_ALS].ALSCASH
FROM [T_ALS] 
LEFT JOIN [T_Prog] ON ([T_ALS].ID1 = [T_Prog].ID1) AND ([T_ALS].ID2 = [T_Prog].ID2) AND ([T_ALS].MONTHNUMBER = [T_Prog].MONTHNUMBER) 
```

...我不会得到所有可能的记录，因为该`[T_ALS]`表仅包含所有可能记录的一部分。

这是带有示例数据的 2 个表和我试图实现的最终查询表的说明：

`Prog`桌子：

```
|[ID1]|[ID2]|[MONTHNUMBER]|[PRGCASH]|
|  1  |  A  |      1      |   600   |
|  1  |  B  |      1      |   500   | 
```

`ALS`桌子：

```
|[ID1]|[ID2]|[MONTHNUMBER]|[ALSCASH]|
|  1  |  A  |      1      |   100   |
|  1  |  A  |      2      |   100   |
|  1  |  A  |      3      |   100   | 
```

理想结果：

```
|[ID1]|[ID2]|[MONTHNUMBER]|[PRGCASH]|[ALSCASH]|
|  1  |  A  |      1      |   600   |   100   |
|  1  |  A  |      2      |         |   100   |
|  1  |  A  |      3      |         |   100   |
|  1  |  B  |      1      |   500   |         | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:14:19.127

此查询使用 Access 2007 测试，返回您想要的结果集。

```
SELECT
    p1.ID1,
    p1.ID2,
    p1.MONTHNUMBER,
    p1.PRGCASH,
    a1.ALSCASH
FROM
    T_Prog AS p1
    LEFT JOIN T_ALS AS a1
    ON
            p1.MONTHNUMBER = a1.MONTHNUMBER
        AND p1.ID2 = a1.ID2
        AND p1.ID1 = a1.ID1
UNION
SELECT
    a2.ID1,
    a2.ID2,
    a2.MONTHNUMBER,
    p2.PRGCASH,
    a2.ALSCASH
FROM
    T_ALS AS a2
    LEFT JOIN T_Prog AS p2
    ON
            a2.MONTHNUMBER = p2.MONTHNUMBER
        AND a2.ID2 = p2.ID2
        AND a2.ID1 = p2.ID1; 
```

# c# - 在 C# if 语句中检查多个布尔条件的最佳方法

> ID：15905017
> 
> 赞同：9
> 
> 时间：2013-04-09T14:43:21.443
> 
> 标签：c#, if-statement, boolean

我的代码（C#）上有 3 个布尔值和一个`int32`取决于布尔值`true`和`false`. 以另一种方式完成此任务的最佳方法是什么，而不是 if 语句，例如：

```
if(a && b && !c)
   d = 1;
if(a && !b && !c)
   d = 2;
//etc.. ect... 
```

编辑： 3 个布尔值必须具有所有可能的组合才能设置 int32 值。

编辑 2：对于两个不同的布尔比较，“d”的值可以相同。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-09T14:47:11.303

最好捕获操作的意图，而不是显式检查布尔值。

例如：

```
public void Check()
{
   if (HasOrdered())
   {
      // do logic
   }
}

private bool HasOrdered()
{
    return a && !b && !c;
}

private bool HasBooked()
{
    return a && b && !c;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-09T14:49:23.370

您可以使用卡诺图来减少方程式并减少 ifs。

[https://en.wikipedia.org/wiki/Karnaugh_map](https://en.wikipedia.org/wiki/Karnaugh_map)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T14:46:40.593

假设您已经`lookup_table`填充了索引 [0..8) 的值，您可以执行@Adriano 给出的查找表提示：

```
var index = new [] { a,b,c }.Aggregate(0, (a,i) => return 2*a + (i?1:0));

int d = lookup_table[index]; 
```

* * *

**编辑**问题的编辑使这无关紧要：~~d是什么意思？~~

如果它是错误值的计数（可能来自示例代码），请使其

```
int d = new [] { a,b,c }.Count(b => !b); 
```

 ~~* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T14:48:38.743

我认为您现在所做的一切都很好，任何其他解决方案都将取决于偏好。

如果可能的话，我的偏好是分开结帐。

```
 if (!a)
    return;
 if (!b)
    return;
 if (!c)
    return; 
```

如果您需要在发出函数之前检查某些先决条件，这将很有用，例如用户是否已登录，参数是否存在并且在正确的上下文中，以及其他项目。

*就像我说的，这可能不适用，但我只是想表达我的意见*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:48:58.977

我认为您的操作方式没有任何*问题*，但是如果多个条件的输出相同，*则可以*通过创建真值表并简化条件来简化。

例如，如果`d`应该`0` *随时* `a`为假，您可以简化为：

```
if(a) 
   if(b && !c)
       d = 1;
   if(!b && !c)
       d = 2;
   ...
else
    d = 0; 
```

或者，如果有一些数学模式（例如，，，`a`并`b`表示`c`二进制数的三位），那么您可以进行位算术。

但是，如果您有 8个*不同的*结果（每个组合一个`a`、`b`和`c`），那么您的方法就可以了。~~

# eclipse - eclipse项目可移植性的解决方案？

> ID：15905019
> 
> 赞同：0
> 
> 时间：2013-04-09T14:43:24.920
> 
> 标签：eclipse, portability

在我的工作环境中，我在我的 PC 中设置了 eclipse 项目，其中包括一些工作区环境变量、设置项目依赖项和设置用户库（来自公共网络位置）。

现在，我的同事已经检查了相同的源代码，也经历了相同的步骤。有没有办法减少这种混乱？

据我所知，只有源项目位置与我的 PC 和其他 PC 不同。

在另一台 PC 的 eclipse 启动期间，我可以更改我的项目位置吗？因此，我可以轻松地在另一台具有相同工作区的 PC 上保留相同的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:26:54.263

第一步：

*   使用版本控制系统来存储和共享您的项目。
*   检查工作区中包含的所有内容。那不仅是您的源代码，还有隐藏设置文件夹中的设置文件。
*   不要使用 Window -> Preferences 来修改 Java 设置（或其他与构建相关的设置）。而是始终使用 Project -> Properties 来修改构建相关的设置。
*   永远不要引用网络共享或工作空间之外的其他位置。如果您需要一个当前位于网络共享上的 jar 文件，则将其检入您的版本控制系统，然后在您的 Eclipse 工作区中将其检出为本地文件。

第二步：

*   使用Maven进行项目物化、依赖等管理。

# android - 试图在eclipse上运行模拟器

> ID：15905023
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:43:33.857
> 
> 标签：android

每次我尝试调整我的 Eclipse 时都会遇到问题，它会给出一个错误消息“启动 new_configuration 遇到问题”。我已经重新安装了好几次，并尝试搜索解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:50:38.633

打开 Android 虚拟设备管理器（手机显示屏中带有 Droid 的图标）并检查左侧的图标，它们指示您的 AVD 配置是否有效。此外，您可以从这里启动您的模拟器（“开始...”）

# java - 基本的多线程问题

> ID：15905024
> 
> 赞同：1
> 
> 时间：2013-04-09T14:43:34.660
> 
> 标签：java, multithreading

```
package demo5;

class Process extends Thread {

static int counter = 0;

public static  synchronized void increment() { counter++; }

public void run() {
    for (int i = 0; i < 1000000; i++)
    {
        increment();
    }
    System.out.println("Done.");
  }
}

public class App {

public static void main(String[] args) throws InterruptedException {
    Process p1 = new Process();
    Process p2 = new Process();
    p1.start();
    p2.start();

    p1.join();
    p2.join();

    System.out.println("Value of count is :" + p1.counter);

}

} 
```

如果我将增量​​函数声明为非静态函数，则最后计数器的值不会是 200 万。

另一方面，当增量方法定义为静态时，它可以正常工作。

据我所知，所有 Process 对象只有一个增量函数..那么为什么我必须将其声明为静态方法..？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T14:46:11.733

将其声明为静态将导致`synchronized`Process.class 实例上的锁定。所以所有运行的线程都会阻塞在`increment`方法内的对象上。删除静态将导致每个线程仅阻塞 Thread 实例（在您的情况下有两个）。

因此，您的`counter`变量正在并行递增，并且正如多次指出的那样，int 递增不是线程安全的。

`As far as I know there will be only ONE increment function for all the Process objects`

Process 类有一个增量函数，但同步是在 Object 而不是方法上完成的，例如：

```
class Process{
     public synchronized void increment() { counter++; }
} 
```

相当于：

```
class Process{
     public void increment() { 
           synchronized(this){
                  counter++; 
            }
} 
```

**编辑：**回答Rouki的问题。

```
class Process{
     public static synchronized void increment() { counter++; }
} 
```

相当于

```
class Process{
     public void increment() { 
           synchronized(Process.class){
                  counter++; 
            }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:47:28.380

您可能希望用[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)计数器替换您的 int 计数器 - 这样您可以从方法中删除同步关键字，并且该方法是静态方法还是实例方法无关紧要。

# javascript - 用于浮动正负和 6 位小数的正则表达式

> ID：15905025
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:43:36.520
> 
> 标签：javascript, regex, floating-point, decimal

我是新手`regex`，我需要一个正则表达式来表示 -180 到 180 整数之间的数字或浮点数，最多 6 位小数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:46:34.687

请注意，正则表达式无法验证数字是否实际上在您给定的范围之间 - 这应该由您的业务逻辑处理。

```
^-?\d{0,3}(\.\d{0,6})?$ 
```

读取数字、用 JavaScript 解析并以这种方式验证它可能是一个更好的解决方案：

[http://jsfiddle.net/4dqqh/](http://jsfiddle.net/4dqqh/)

```
function isValid(numStr) {
    var float = parseFloat(numStr);
    return Math.abs(float) <= 180 && float.toFixed(6) - float == 0
}

console.log(isValid('-123.23323')); // true
console.log(isValid('-183.23323')); // false
console.log(isValid('-183.233233424')); // false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:07:38.283

您可以检查该值是否可以转换为您需要的范围和精度内的数字，但正则表达式不是用于此目的的工具。

```
function numbercheck180(s){
    var n= !isNaN(n= s*1e6)? Math.round(n)/1e6:-181;
    return (n<180 && n>-180 && n+''=== s)
}

numbercheck180('-179.123456')  true
numbercheck180('179.123456')  true
numbercheck180('179.1234561')  false
numbercheck180('-179.1234561')  false
numbercheck180('-181')  false
numbercheck180('180.00001')  false 
```

# sql-server-2008 - 休眠微软sql server crud

> ID：15905043
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:44:27.163
> 
> 标签：sql-server-2008, hibernate, crud

尝试连接初始 Microsoft SQL Server 休眠会话类，但出现以下错误：

初始 SessionFactory 创建

```
failed.org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver com.microsoft.sqlserver.jdbc.SQLServerDriver class not found
Exception in thread "main" java.lang.ExceptionInInitializerError
    at com.vaneck.rsutedja.dao.hibernate.HibernateUtil.<clinit>(HibernateUtil.java:17)
    at com.vaneck.rsutedja.dao.hibernate.Test.main(Test.java:19)
Caused by: org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver com.microsoft.sqlserver.jdbc.SQLServerDriver class not found
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:107)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.buildJdbcConnectionAccess(JdbcServicesImpl.java:223)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:89)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:77)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2275)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2271)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1740)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1780)
    at com.vaneck.rsutedja.dao.hibernate.HibernateUtil.<clinit>(HibernateUtil.java:13)
    ... 1 more
Caused by: org.hibernate.service.classloading.spi.ClassLoadingException: Unable to load class [com.microsoft.sqlserver.jdbc.SQLServerDriver]
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:146)
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:104)
    ... 15 more
Caused by: java.lang.ClassNotFoundException: Could not load requested class : com.microsoft.sqlserver.jdbc.SQLServerDriver
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl$AggregatedClassLoader.findClass(ClassLoaderServiceImpl.java:293)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:143)
    ... 16 more 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:11:12.840

您应该将 Microsoft JDBC Driver for SQL Server 添加到您的类路径中。看：

[http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx](http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx)

# java - JSTL 消息：不知道如何使用 forEach 迭代提供的“项目”

> ID：15905055
> 
> 赞同：8
> 
> 时间：2013-04-09T14:45:05.753
> 
> 标签：java, jsp, spring-mvc, jstl, el

我将 List 传递给`<c:forEach>`，但我收到错误消息，指出它不知道如何迭代它。

```
@RequestMapping("/viewall")
public String viewAll(Model model) {

    // productService.findAllProducts() returns List<Product> 
    model.addAttribute("everything", productService.findAllProducts());

    // Also tried using iterator, but I get same error
    //model.addAtrribute("everything", productService.findAllProducts().iterator());

    ....
} 
```

jsp页面：

```
<c:forEach items="${everything}" var="prod">
    <p> ${prod.name} </p>
</c:forEach> 
```

错误：

```
javax.servlet.ServletException: javax.servlet.jsp.JspTagException: Don't know how to iterate over supplied "items" in &lt;forEach&gt;
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:912)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:841)
    org.apache.jsp.WEB_002dINF.jsp.allprod_jsp._jspService(allprod_jsp.java:158)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)

root cause

javax.servlet.jsp.JspTagException: Don't know how to iterate over supplied "items" in &lt;forEach&gt;
    org.apache.taglibs.standard.tag.common.core.ForEachSupport.toForEachIterator(ForEachSupport.java:255)
    org.apache.taglibs.standard.tag.common.core.ForEachSupport.supportedTypeForEachIterator(ForEachSupport.java:219)
    org.apache.taglibs.standard.tag.common.core.ForEachSupport.prepare(ForEachSupport.java:137)
    javax.servlet.jsp.jstl.core.LoopTagSupport.doStartTag(LoopTagSupport.java:227)
    org.apache.jsp.WEB_002dINF.jsp.allprod_jsp._jspx_meth_c_005fforEach_005f0(allprod_jsp.java:180)
    org.apache.jsp.WEB_002dINF.jsp.allprod_jsp._jspService(allprod_jsp.java:137)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T15:17:07.727

问题似乎是 Session 或 ServletContext （应用程序）中有另一个同名的属性。从[`JspContext#findAttribute`](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspContext.html#findAttribute%28java.lang.String%29)（这是使用时执行的方法`${something}`）：

> 按顺序搜索页面、请求、会话（如果有效）和应用程序范围中的命名属性，并返回关联的值或 null。

它没有解释有关如何搜索属性的特定顺序，因此它可能是特定于供应商的。

为了避免出现问题，只需更改属性的名称即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:49:19.183

为了循环你的列表，你可以做这样的事情，

```
<c:forEach var="prod" begin="1" end="5">
        <option value="${prod}" >${prod.name}</option>
    </c:forEach> 
```

您可以通过添加可用作 jstl api 的库来获取列表的长度，

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %> 
```

然后在 end 属性中，您可以将 end 值设置为列表的大小，

```
${fn:length(everything)} 
```

最终的代码是这样的，

```
<c:forEach var="prod" begin="1" end="${fn:length(everything)}">
        <option value="${prod.name}" >${l}</option>
    </c:forEach> 
```

此代码会将循环变量设置为以开始值 1 和结束值作为列表大小开始。

# jquery - 使用 JQuery 将返回 DataTable 的方法绑定到 GridView

> ID：15905057
> 
> 赞同：0
> 
> 时间：2013-04-09T14:45:07.373
> 
> 标签：jquery, gridview, datatable

**例子 ：**

```
public DataTable GetCountries()  
{  
//all sql connection  
//fetching data into a datatable

return objDataTable // returns a datatable  
}

public void BindGridView()  
{  
GridView1.DataSource = GetCountries();  
GridView1.DataBind();  
} 
```

我可以在上面的代码中实现的是绑定 GridView，但我想使用 JQuery 和 GetCountries() 方法返回的 DataTable 绑定 GridView1...

请任何人都可以给我一个最简单的例子......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:53:35.917

你也可以使用jtable。它更灵活地集成。请看这个链接：

[使用WithAspNetWebFormsPage 方法](http://jtable.org/Tutorials/UsingWithAspNetWebFormsPageMethods)

或者您也可以从 codeproject 下载源代码：

[Resizable-asp-net-Gridview-columns-using-Jquery](http://www.codeproject.com/Articles/366013/Resizable-asp-net-Gridview-columns-using-Jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:22:05.430

ASPX 页面（默认.aspx）

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title>Asp.net Bind Data to Datatable using JQuery or JSON</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$.ajax({
type: "POST",
contentType: "application/json; charset=utf-8",
url: "Default.aspx/BindDatatable",
data: "{}",
dataType: "json",
success: function(data) {
for (var i = 0; i < data.d.length; i++) {
$("#gvDetails").append("<tr><td>" + data.d[i].UserId + "</td><td>" + data.d[i].UserName + "</td><td>" + data.d[i].Location + "</td></tr>");
}
},
error: function(result) {
alert("Error");
}
});
});
</script>
<style type="text/css">
table,th,td
{
border:1px solid black;
border-collapse:collapse;
}
</style>
</head>
<body>
<form id="form1" runat="server">
<asp:GridView ID="gvDetails" runat="server">
<HeaderStyle BackColor="#DC5807" Font-Bold="true" ForeColor="White" />
</asp:GridView>
</form>
</body>
</html> 
```

.CS 文件（默认.aspx.cs）

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Web.Services;

public partial class _Default : System.Web.UI.Page 
{
protected void Page_Load(object sender, EventArgs e)
{
if (!IsPostBack)
{
BindColumnToGridview();
}
}
/// <summary>
/// This method is used to bind dummy row to gridview to bind data using JQuery
/// </summary>
private void BindColumnToGridview()
{
DataTable dt = new DataTable();
dt.Columns.Add("UserId");
dt.Columns.Add("UserName");
dt.Columns.Add("Location");
dt.Rows.Add();
gvDetails.DataSource = dt;
gvDetails.DataBind();
gvDetails.Rows[0].Visible = false;
}

[WebMethod]
public static UserDetails[] BindDatatable()
{
DataTable dt = new DataTable();
List<UserDetails> details = new List<UserDetails>();

using (SqlConnection con=new SqlConnection("Data Source=.;Initial Catalog=Test;Integrated Security=true"))
{
using (SqlCommand cmd=new SqlCommand("select TOP 10 UserId,UserName,Location from UserInformation",con))
{
con.Open();
SqlDataAdapter da= new SqlDataAdapter(cmd);
da.Fill(dt);
foreach (DataRow dtrow in dt.Rows)
{
UserDetails user=new UserDetails();
user.UserId = dtrow["UserId"].ToString();
user.UserName = dtrow["UserName"].ToString();
user.Location = dtrow["Location"].ToString();
details.Add(user);
}
}
}
return details.ToArray();
}
public class UserDetails
{
public string UserId { get; set; }
public string UserName { get; set; }
public string Location { get; set; }
}
} 
```

# ios - 掌握详细的 uisplitViewController 和 UINavigationController 视图

> ID：15905058
> 
> 赞同：1
> 
> 时间：2013-04-09T14:45:07.840
> 
> 标签：ios, objective-c, uinavigationcontroller, uisplitviewcontroller

我尝试从详细视图推送到其他视图。我在detailView“ConRDPDetailViewController”中有一个tableView，当我单击一行时，我会喜欢它，它会推送新视图“BookmarkEditorController”。这是我在“ConRDPDetailViewController”中尝试这样做的方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
        {
                ComputerBookmark* bookmark = nil;
            if([indexPath section] == SECTION_BOOKMARKS)
            {
                    // first row has either quick connect or add bookmark item
                    if([indexPath row] == 0)
                    {

                   // show add bookmark controller: is there I try to push the new View
                     BookmarkEditorController* bookmarkEditorController = [[[BookmarkEditorController alloc] initWithBookmark:[[ComputerBookmark alloc] initWithBaseDefaultParameters]] autorelease];
                     [bookmarkEditorController setTitle:NSLocalizedString(@"Ajouter Connexion", @"Add Connection title")];
                        UINavigationController *view = [[UINavigationController alloc] initWithRootViewController:bookmarkEditorController];

                     [view.navigationController pushViewController:bookmarkEditorController animated:YES];
                     [bookmarkEditorController setDelegate:self];

                    [bookmarkEditorController setHidesBottomBarWhenPushed:YES];

                     }

            }
    } 
```

但是什么也没发生，这是我在 AppDelegate.m 中的方法 didFinishLaunchingWithOptions

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self redirectConsoleLogToDocumentFolder];

    // Initialize the app window
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    AuthentificationViewController *authentificationViewController =[[AuthentificationViewController alloc] initWithNibName:@"AuthentificationView" bundle:nil];
    //self.window.rootViewController = self.splitViewController;
    self.window.rootViewController = authentificationViewController;
       [self.window makeKeyAndVisible];

    // The new popover look for split views was added in iOS 5.1.
    // This checks if the setting to enable it is available and
    // sets it to YES if so.
    // if ([self.splitViewController respondsToSelector:@selector(setPresentsWithGesture:)])
    // [self.splitViewController setPresentsWithGesture:YES];

    return YES;
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:54:07.510

您需要将表格视图控制器嵌入到导航控制器中。

然后您可以使用以下代码推送详细视图：

```
BookmarkEditorController* bookmarkEditorController = [[[BookmarkEditorController alloc] initWithBookmark:[[ComputerBookmark alloc] initWithBaseDefaultParameters]] autorelease];
[bookmarkEditorController setTitle:NSLocalizedString(@"Ajouter Connexion", @"Add Connection title")];
[self.navigationController pushViewController:bookmarkEditorController animated:YES];
[bookmarkEditorController setDelegate:self];
[bookmarkEditorController setHidesBottomBarWhenPushed:YES]; 
```

# c# - WebClient 下载异常 - 405 和超时。

> ID：15905069
> 
> 赞同：0
> 
> 时间：2013-04-09T14:45:41.677
> 
> 标签：c#, content-disposition, http-status-code-405, webclient

我正在使用一个简单的 webClient 从网上下载一些图像。这个过程适用于大多数情况，但是对于我正在尝试的一些图像，我遇到了一些错误。

```
 WebClient webClient = new WebClient();
 webClient.DownloadFile(orig_file, filePath); 
```

[http://www.robertdyas.co.uk/sites/rdmainv4.57/productimages/500x500f/162234.jpg](http://www.robertdyas.co.uk/sites/rdmainv4.57/productimages/500x500f/162234.jpg) - 远程服务器返回错误：（405）方法不允许。

[http://www.moneysupermarket.com/deals/CampaignImage/Detail/9995?width=615&height=335](http://www.moneysupermarket.com/deals/CampaignImage/Detail/9995?width=615&height=335) - 收到超时异常 - 这包含“内容处置：附件；” 在浏览器中查看图像时自动下载文件的标头。

任何关于我如何解决上述问题的见解将不胜感激。

# php - mysql 如何比较同一张表中的两行？

> ID：15905072
> 
> 赞同：0
> 
> 时间：2013-04-09T14:45:44.090
> 
> 标签：php, mysql, comparison

如果我重复这个问题，我很抱歉，但是，我没有找到任何可以帮助我的东西。

无论如何，这就是问题：

我正在写一个约会应用程序，在这个应用程序中，我在相互感兴趣的部分窃听。

我的意思是，关于一个人，你有 3 种选择（你想和他/她约会吗？是的，也许，不）。

所以，我创建了一个表格，保存您的用户 ID、您想约会的人员 ID 以及您的回复（是、否或可能）。

有没有办法比较你说是或可能，而另一个人说是或可能，会返回类似共同人的东西？

类似的东西（如果您说是或否，并且该人说是或否，则选择所有共同的人）。

如果听起来令人困惑，我很抱歉，但如果有疑问，我可以更好地解释。

不过，我的英语没有帮助....我是巴西人

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T14:48:43.413

像这样的东西，

```
SELECT  LEAST(a.UserID, a.PersonID) AS Person1,
        GREATEST(a.UserID, a.PersonID) AS Person2,
        a.Response
FROM    TableName a
        INNER JOIN TableName b
            ON  a.UserID = b.PersonID AND
                a.PersonID = b.UserID AND
                a.Response = b.Response
GROUP   BY Person1, Person2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ddd6e/2)

假设你有这样的记录，

```
╔════════╦══════════╦══════════╗
║ USERID ║ PERSONID ║ RESPONSE ║
╠════════╬══════════╬══════════╣
║      1 ║        2 ║ yes      ║
║      2 ║        1 ║ yes      ║
║      3 ║        4 ║ no       ║
║      4 ║        3 ║ yes      ║
║      5 ║        6 ║ maybe    ║
║      6 ║        5 ║ maybe    ║
╚════════╩══════════╩══════════╝ 
```

查询的输出是

```
╔═════════╦═════════╦══════════╗
║ PERSON1 ║ PERSON2 ║ RESPONSE ║
╠═════════╬═════════╬══════════╣
║       1 ║       2 ║ yes      ║
║       5 ║       6 ║ maybe    ║
╚═════════╩═════════╩══════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:27:25.973

太感谢了。根据您的回答，我已经达到了这一点：

```
SELECT p2.atirador AS mutual
FROM paqueras AS p1, paqueras AS p2
WHERE p2.alvo = $UserID
AND p1.atirador = $UserID
AND p2.atirador = p1.alvo
AND (
p1.resposta1 =  "sim"
OR p1.resposta1 =  "talvez"
)
AND (
p2.resposta1 =  "sim"
OR p2.resposta1 =  "talvez"
) 
```

我做了什么？我会试着解释一下，我得到了所有与用户 ID 相互关联的人。当用户访问他的共同页面时，这会派上用场，你知道吗？

好吧，到目前为止一切都很好......谢谢你们，我会报告任何错误。但我们希望不要;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:50:59.893

```
SELECT him.id as "him",  
her.id AS "her",  
FROM match him, match her  
WHERE him.id = her.id OR her.id=him.id; 
```

您可以根据需要扩展...以匹配是/否/可能字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:51:52.757

这行得通吗？

```
SELECT * FROM test t1 INNER JOIN test t2 ON t1.id = t2.personid AND t2.id=t1.personid WHERE t1.response=t2.response; 
```

[http://www.sqlfiddle.com/#!2/9170c/1](http://www.sqlfiddle.com/#!2/9170c/1)

如果您想要特定响应的结果（是的，可能是），您可以在`WHERE`条件中添加它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:56:01.277

就像是：

```
Select Userid As p1, Personid p2
From YourTable
Where (Response like "Yes" OR Response like "Maybe") AND p2 IN(
Select Userid
From YourTable
Where Userid = p2 AND Personid = p1 AND (Response like "Yes" OR Response like "Maybe"); 
```

# ruby-on-rails - Gemfile gem 安装和 gemspec 依赖

> ID：15905074
> 
> 赞同：3
> 
> 时间：2013-04-09T14:45:48.333
> 
> 标签：ruby-on-rails, ruby, gem, gemfile

我有一个应用程序，其 Gemfile 需要一个 gem，该 gem 还依赖于当前在 github 上找到的另一个 gem。

所以 **app/Gemfile**读取 `gem "my-gem", :git => "git://github.com/MyCompany/my-gem.git"`

**my-gem/Gemfile**读取 `gem "my-gem-2", :git => "git@github.com:MyCompany/my-gem-2.git"`

**my-gem/my-gem.gemspec**读取 `spec.add_dependency "my-gem-2"`

当我在应用程序内运行 bundle 时，我收到一个错误，它找不到 my-gem 所需的 gem my-gem-2；但是，如果我将以下行 `gem "my-gem-2", :git => "git@github.com:MyCompany/my-gem-2.git"` 放在**app/Gemfile 中**，那么它可以正常工作。

这种做法似乎是多余的，因为我认为我不必将另一个 gem 的 gem 依赖项添加到我的父应用程序中。我在这里做错了什么myapp找不到my-gem-2吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:02:23.200

这就是它的方式 - gems 中的 Gemfile 依赖项仅适用于您开发该 gem 时。当 gem 在其他地方使用时，只有 gemspec 被评估（并且 gemspecs 没有 git 依赖项的概念），因此只有 gemspec 中的依赖项适用。

所以：你需要在你的应用程序的 Gemfile 中有两个 git 引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:02:54.540

正如[gem 规范](http://docs.rubygems.org/read/chapter/20#dependencies)中所述，您提供的gem 列表`add_dependency`将用于确保在安装过程（即gem install）期间这些gem 已经安装在系统中。所以这一行：

```
my-gem/my-gem.gemspec reads spec.add_dependency "my-gem-2" 
```

将触发系统中是否安装 gem 的验证，但不会像 Bundler 那样触发此类 gem 的任何自动安装。

另一行（在您的 gem 内）：

```
gem "my-gem-2", :git => "git@github.com:MyCompany/my-gem-2.git" 
```

> 指定一个 gem 应该来自一个 .gemspec 在其根目录下的 git 存储库。

有关更多详细信息：[来自 git 存储库的 Gems](http://gembundler.com/v1.3/git.html)

# python - 优化python脚本提取和处理大数据文件

> ID：15905075
> 
> 赞同：0
> 
> 时间：2013-04-09T14:45:48.637
> 
> 标签：python, nltk

我是 python 新手，天真地为以下任务编写了一个 python 脚本：

我想创建一个包含多个对象的单词表示。每个对象基本上都是一对，并且要制作概要的词袋表示。所以对象在最终文档中被转换为。

这是脚本：

```
import re
import math
import itertools
from nltk.corpus import stopwords
from nltk import PorterStemmer
from collections import defaultdict
from collections import Counter
from itertools import dropwhile

import sys, getopt

inp = "inp_6000.txt"  #input file name
out = "bowfilter10"   #output file name
with open(inp,'r') as plot_data:
    main_dict = Counter()
    file1, file2 = itertools.tee(plot_data, 2)
    line_one = itertools.islice(file1, 0, None, 4)
    line_two = itertools.islice(file2, 2, None, 4)
    dictionary = defaultdict(Counter)
    doc_count = defaultdict(Counter)
    for movie_name, movie_plot in itertools.izip(line_one, line_two):
        movie_plot = movie_plot.lower()
        words = re.findall(r'\w+', movie_plot, flags = re.UNICODE | re.LOCALE)  #split words
        elemStopW = filter(lambda x: x not in stopwords.words('english'), words)   #remove stop words, python nltk
        for word in elemStopW:
            word = PorterStemmer().stem_word(word)   #use python stemmer class to do stemming
            #increment the word count of the movie in the particular movie synopsis
            dictionary[movie_name][word] += 1
            #increment the count of a partiular word in main dictionary which stores frequency of all documents.       
            main_dict[word] += 1
            #This is done to calculate term frequency inverse document frequency. Takes note of the first occurance of the word in the synopsis and neglect all other.
            if doc_count[word]['this_mov']==0:
                doc_count[word].update(count=1, this_mov=1);
        for word in doc_count:
            doc_count[word].update(this_mov=-1)
    #print "---------main_dict---------"
    #print main_dict
    #Remove all the words with frequency less than 5 in whole set of movies
    for key, count in dropwhile(lambda key_count: key_count[1] >= 5, main_dict.most_common()):
        del main_dict[key]
    #print main_dict
   .#Write to file
    bow_vec = open(out, 'w');
    #calculate the the bog vector and write it
    m = len(dictionary)
    for movie_name in dictionary.keys():
        #print movie_name
        vector = []
        for word in list(main_dict):
            #print word, dictionary[movie_name][word]
            x = dictionary[movie_name][word] * math.log(m/doc_count[word]['count'], 2)
            vector.append(x)
        #write to file
        bow_vec.write("%s" % movie_name)
        for item in vector:
            bow_vec.write("%s," % item)
        bow_vec.write("\n") 
```

数据文件的格式和有关数据的附加信息： 数据文件具有以下格式：

电影名称。空行。电影简介（上可以假设大小为150字左右） 空行。

注意：`<*>`用于表示。

输入文件大小：
文件大小约为 200 MB。

截至目前，此脚本在 3 GHz 英特尔处理器上大约**需要 10-12 小时。**

> 注意：我正在寻找串行代码的改进。我知道并行化会改善它，但我想稍后再研究它。我想借此机会让这个串行代码更有效率。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:08:10.827

首先 - 尝试删除正则表达式，它们很重。我最初的建议很糟糕——它不会奏效。或许这样会更有效率

```
trans_table = string.maketrans(string.string.punctuation, 
                               ' '*len(string.punctuation)).lower()
words = movie_plot.translate(trans_table).split() 
```

（事后思考）我无法测试它，但我认为如果你将这个调用的结果存储在一个变量中

```
stops = stopwords.words('english') 
```

或者可能更好 - 首先将其转换为集合（如果函数不返回一个）

```
stops = set(stopwords.words('english')) 
```

你也会得到一些改善

（在评论中回答您的问题）每个函数调用都会消耗时间；如果您获得的数据块大于您没有永久使用的数据块 - 时间的浪费可能会很大 至于集合与列表 - 比较结果：

```
In [49]: my_list = range(100)

In [50]: %timeit 10 in my_list
1000000 loops, best of 3: 193 ns per loop

In [51]: %timeit 101 in my_list
1000000 loops, best of 3: 1.49 us per loop

In [52]: my_set = set(my_list)

In [53]: %timeit 101 in my_set
10000000 loops, best of 3: 45.2 ns per loop

In [54]: %timeit 10 in my_set
10000000 loops, best of 3: 47.2 ns per loop 
```

虽然我们处于油腻的细节 - 这里是拆分与 RE 的测量值

```
In [30]: %timeit words = 'This is a long; and meaningless - sentence'.split(split_let)
1000000 loops, best of 3: 271 ns per loop

In [31]: %timeit words = re.findall(r'\w+', 'This is a long; and meaningless - sentence', flags = re.UNICODE | re.LOCALE)
100000 loops, best of 3: 3.08 us per loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:02:35.647

另一件事可能会降低性能 - 从字典中删除。重建字典可能更有效：

```
word_dict = {key: count for key, count in 
             takewhile(lambda key_count: itemgetter(1) >= 5, 
             main_dict.most_common()) 
```

总的来说，我有点懒得深入所有细节，但我使用一点参考可能会更有效率。据我所知，您不需要 *doc_count* 变量-它是多余且低效的，并且重新评估它也会降低您的性能。*main_dict.keys()* 做同样的事情 - 给你所有单词的列表一次。

这是我的想法的草图 - 我无法证明它更有效，但它看起来确实更像 python

```
with open(inp,'r') as plot_data:
    word_dict = Counter()
    file1, file2 = itertools.tee(plot_data, 2)
    line_one = itertools.islice(file1, 0, None, 4)
    line_two = itetools.islice(file2, 2, None, 4)
    all_stop_words = stopwords.words('english')
    movie_dict = defaultdict(Counter)
    stemmer_func = PorterStemmer().stem_word 
    for movie_name, movie_plot in itertools.izip(line_one, line_two):
        movie_plot = movie_plot.lower()
        words = <see above - I am updating original post>
        all_words = [stemmer_func(word) for word in words 
                     if not word in all_stop_words]
        current_word_counter = Counter(all_words)
        movie_dict[movie_name].update(current_word_counter)
        word_dict.update(current_word_counter) 
```

最后一个 -*字典*不是一个好的变量名，它不会告诉你它包含什么

# jsf-2 - 在哪里存储一个列表，其检索是一个耗时的过程

> ID：15905080
> 
> 赞同：0
> 
> 时间：2013-04-09T14:46:02.820
> 
> 标签：jsf-2

我正在尝试创建一个为不同组织提供 IT 服务的应用程序。

我有一个用于创建用户的长表单，我必须通过 LDAP 搜索该组织内的所有用户。事实证明，这是一个耗时的过程。我可以搜索所有用户，然后将它们放入一个列表中，然后在不同的情况下使用该列表。但问题是任何管理员都可以同时修改或删除用户。我曾想过将列表放入应用程序范围的 bean 中。但我也有一个不同的组织，它有完全不同的用户集。

在这种情况下，合适的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:51:27.970

如果您正在运行一个 JSF 应用程序的多个实例，并且所有实例都访问一个数据库，那么我会说这不是范围可以处理的事情。

这应该通过锁定数据库中的对象来处理，即当您为用户加载编辑视图时，该用户对象被锁定以便对其他人进行编辑（如名为*locked*的布尔列）。保存或取消编辑，释放锁定（或者如果用户忘记执行任何操作，它就会过期）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:14:18.480

*应用程序范围内的数据对应用程序的所有用户*可见。也就是说，如果您将一些列表放在应用程序范围内，然后在视图中引用它，那么对于每个用户来说，它将是同一个实例。此外，您应该注意这种方法带来的严重并发问题。

最有可能的是，当您将用户列表置于会话范围内时，您的**范围界定问题将结束，它最自然地适合。**当具有适当权限的用户在某些视图中需要它时，您将加载特定组织的用户列表。

从这一点开始，您将面临您担心的实际问题，这些**问题是在同时访问共享资源的多用户环境中出现的问题**（例如在您的示例中管理员修改用户）。您害怕的一件事（可以从您的问题中得出）是“最后提交获胜”策略，根据该策略，在最后一个用户提交编辑之前其他用户及时进行的编辑将丢失，或者被最后一次提交覆盖。

这类问题可以通过在数据库级别引入某种类型的“锁定”来解决。基本上有两种类型的锁定：乐观和悲观。

在另一个答案中提出的是一个*悲观锁定*的例子，在这种情况下，除非释放数据库锁，否则不允许任何人访问数据。seip如下：要更新数据的用户放置一个排他锁，防止其他用户操作数据，直到锁被释放。背后的想法是用户将同步更新数据库资源，无论这些冲突更新实际发生的频率如何，都必须排除这种可能性。

另一种选择 -*乐观锁定*假设许多用户可以同时访问和修改数据，而不会锁定数据库资源。这通常通过在数据库中存储记录版本来实现。当发生冲突时，可以提示用户，防止信息丢失。背后的想法是，尽管可能存在冲突更新，但实际上它们很少见，并且在任何情况下都会通知用户该冲突。

请注意，当最终用户总是选择覆盖数据时，没有锁定的设置或“最后一次提交获胜”策略与乐观锁定基本相同。

如您所见，有一些方法可供选择。所以首先自己了解它们，然后也许你不太喜欢的问题就会消失。如果没有 - 您将能够回来并发布一个关于具体问题的具体主题的新问题，这样我们就不会推测，而是专注于帮助您。

# activepivot - 关系存储和多对一连接

> ID：15905082
> 
> 赞同：1
> 
> 时间：2013-04-09T14:46:05.053
> 
> 标签：activepivot

大卫，我能否要求澄清一下您在[此答案中对加入的看法](https://stackoverflow.com/a/12527250/2224622)

当您说“您不能使用关系存储的连接将一个条目连接到多个条目”时，这是否意味着任何方向？

例如商店 1：

```
| Key1 | Measure1 | 
```

商店 2：

```
| Key 1 | SomeId1 | Measure2 | Measure3 |
| Key 1 | SomeId2 | Measure4 | Measure4 | 
```

那么是不是不能通过将Store 2的join放到Store 1来加入这两个store呢？

如果不是，那么您是说管理此问题的唯一方法是复制 Store 1 中的条目吗？例如：

```
Store 1
| Key 1 | SomeId1 | Measure1 | Measure2 | Measure3 |
| Key 1 | SomeId2 | Measure1 | Measure4 | Measure4 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:29:25.797

一对多的方向很重要：这取决于哪个商店是“父”商店。

关系存储包括“ActivePivot 存储”的概念，它是您的主要存储（您的架构基于该存储）。然后，该商店可以连接到一个或多个商店，给定一组关键字段，为简单起见，我们将其称为“子”商店。这些子商店中的每一个最终都可以与其他商店连接，依此类推（您可以用有向图表示它）。

要尊重的主要规则是，您永远不应该将“父”商店条目解析为多个“子”商店条目（我相信您也不应该有任何循环关系）。

关系存储背后的简化想法（从 RS 1.5.x / AP 4.4.x 开始）是，当一个条目被提交到“ActivePivot Store”时，从 ActivePivot Store 开始，它将递归地按顺序解析连接在每个加入的商店中检索最多一个条目。根据您的架构定义，这些条目将用于填充事实，然后再将其插入多维数据集。

如果在多个条目中解析连接结果，则 AP 将无法选择使用哪个条目来填充事实，并将引发异常。

回到您的示例，只有在 Store 2 是您的 ActivePivot Store 或 Store 1 的“父级”（APStore->...->Store2->Store1）的情况下，您才可以在 Store 1 和 Store 2 之间进行连接，这似乎是你的情况。

如果不是（Store1->Store2），那么您将不得不复制 Store 1 的条目，以确保它在解析连接时始终最多只能找到一个条目。商店 1 将如下所示：

```
| Key 1 | SomeId1 | Measure1 
| Key 1 | SomeId2 | Measure1 
```

然后，您与 Store 2 的连接将在“Key，SomeId”字段上完成，而不仅仅是“Key”，这将确保您在解析 Store1->Store2 时只找到一个条目

# c# - 从 C# 应用程序设置文件返回 Null

> ID：15905086
> 
> 赞同：2
> 
> 时间：2013-04-09T14:46:11.873
> 
> 标签：c#, null, settings, application-settings, configurationmanager

我正在尝试使用此代码：

```
 String MainDB = ConfigurationManager.AppSettings["MainDB"];
 MessageBox.Show(MainDB);
 String MailInfo = ConfigurationManager.AppSettings["MailInfo"];
 MessageBox.Show(MailInfo);
 String HousingIndexLocation = ConfigurationManager.AppSettings["HousingIndex"];
 MessageBox.Show(HousingIndexLocation); 
```

访问此屏幕生成的值：

![在此处输入图像描述](https://i.stack.imgur.com/23K1A.png)

每次值都返回 null。

我在实施这些设置时缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:48:04.663

尝试

```
String MainDB = Properties.Settings.Default.MainDB;
MessageBox.Show(MainDB);
String MailInfo = Properties.Settings.Default.MailInfo;
MessageBox.Show(MailInfo);
String HousingIndexLocation = Properties.Settings.Default.HousingIndex;
MessageBox.Show(HousingIndexLocation); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T14:48:16.803

您收到错误是因为 ConfigurationManager 不是访问存储在这些文件中的属性的正确方法。看一眼：

[在 C# 中使用设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)

长话短说，您可以使用 Properties 命名空间访问 Settings 文件中的设置：

```
Properties.Settings.Default.MainDB;
// And so on... 
```

# c# - 在 mousesup 事件处理程序结束之前不会重绘屏幕

> ID：15905090
> 
> 赞同：1
> 
> 时间：2013-04-09T14:46:25.397
> 
> 标签：c#, event-handling, rendering, screenshot, mouseup

好的，我遇到了一个问题，我什至不确定到底发生了什么。基本上：我有一个用于单击按钮的 mouseup 事件。该事件将删除 1 个按钮并物理移动屏幕上的所有按钮以填补空白。所以如果你有 2 行 2 个按钮

```
Button1 Button2
Button3 Button4 
```

然后单击 Button1，它会移动最后 3 个，所以你现在有了

```
Button2 Button3
Button4 
```

好的，所以，在这个事件处理程序结束时，它会截取屏幕截图并保存（将按钮 1-4 的先前图像替换为按钮 2-4 的新图像）。

事件处理程序如下所示

```
 public void Handle_Button_MouseUp(object sender, MouseEventArgs e)
    {
         //Get rid of the button that was clicked
         ...some unnecessary to the question code here...

        //Rearrange the remaining buttons to fill the gap
        Rearrange_Buttons_In_Tray(element);

        //Save the screenshot
        imageBox.Image = SavePanel1Screenshot();
    } 
```

截图代码是

```
 public Image SavePanel1Screenshot()
    {
        int BorderWidth = (this.Width - this.ClientSize.Width) / 2;
        int TitlebarHeight = this.Height - this.ClientSize.Height - BorderWidth;

        Rectangle rect = new Rectangle(0, 0, panel1.Width, panel1.Height);
        Bitmap bmp = new Bitmap(panel1.Width, panel1.Height, PixelFormat.Format32bppArgb);
        Graphics g = Graphics.FromImage(bmp);
        g.CopyFromScreen(this.Left + panel1.Left + BorderWidth, this.Top + panel1.Top + TitlebarHeight, 0, 0, bmp.Size, CopyPixelOperation.SourceCopy);

        Image screenShot;

        screenShot = (Image)bmp;
        return screenShot;
    } 
```

.

```
 public void Rearrange_Buttons_In_Tray(int element)
    {
        for (int i = element; i < buttonList.Count; i++)
        {
            Place_Button_In_Tray(buttonList[i].buttonSaved, i, true);
            buttonList[i].element = i;
        }
    } 
```

清理了一些不必要的问题部分以避免混乱。很抱歉弄乱了缩进。注意：按钮不在面板中，就在面板顶部。我只是将面板用于测量和美学目的

```
private void Place_Button_In_Tray(Button button, int element, bool isReArrange)
    {
            button.Width = bigButtonWidth;
            button.Height = bigButtonHeight;

            Image buttonImage = button.Image;

        int numButtonsHoriz = panel1.Width / button.Width;
        int numButtonsVerti = panel1.Height / button.Height;
        int extraSpaceHoriz = (panel1.Width % button.Width) / (numButtonsHoriz);
        int extraSpaceVerti = (panel1.Height % button.Height) / numButtonsHoriz;

        int buttonCount;

        if (!isReArrange)
            buttonCount = buttonList.Count - 1;
        else
            buttonCount = element;

        if ((buttonCount) < numButtonsHoriz)
        {
            button.Location = new Point(panel1MinX + (button.Width * (buttonCount)) + extraSpaceHoriz, (panel1MinY + extraSpaceVerti));

        }
        else
        {
            int newLine = (buttonCount) % numButtonsHoriz;
            button.Location = new Point(panel1MinX + (button.Width * (newLine)) + extraSpaceHoriz, ((panel1MinY + extraSpaceVerti) + (button.Height * ((buttonCount) / 2) - ((buttonCount) % 2))));
        } 
```

现在我的问题是：图像是一个空白屏幕。并不是说它没有拍照——它是在屏幕上显示按钮 2-4 之前拍照（当我逐步执行程序时，我可以明显地看到这种情况发生。在截取屏幕截图时，屏幕是完全空白。只有在需要之后按钮才会重新出现在屏幕上）！出于某种原因，它们直到事件处理程序完成后才会呈现。一旦事件处理程序中的最后一段代码完成（屏幕截图保存），按钮都会重新出现在各自的位置，尽管在整个过程中按钮的可见性根本没有修改（因此它们仍然可见整个时间）。

我对到底发生了什么感到有些困惑，更重要的是，在事件处理程序发生后如何获取该屏幕截图。>_> 有没有人对可能发生的事情有任何建议，更重要的是，如何获得该屏幕截图？

编辑：我的描述有点难以理解。我深感抱歉。很难准确地说明我正在尝试做什么以及正在发生什么。这是一个更紧凑且重点突出的版本：

基本上，我只是想隐藏 4 个按钮中的 1 个。屏幕上的其他 3 个按钮被移动到新位置。由于某种原因，当它们被移动时，它们就会从屏幕上消失。尽管我从未修改过它们是否可见，但它们直到 mouseup 功能完成后才会重新出现。我只是改变他们的位置。我希望屏幕截图包含这 3 个按钮，但由于某种原因，它们直到整个 mouseup 功能结束后才会重新出现。>_> 所以我的截图是一个空的屏幕，没有按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:58:59.890

你所描述的有点令人困惑。我点击了一个按钮来隐藏它，运行你的屏幕截图代码，图像没有显示按钮。

无论如何，要在调用事件后“延迟”屏幕截图，您可以尝试使用 BeginInvoke：

```
this.BeginInvoke(new Action(() => { imageBox.Image = SavePanel1Screenshot(); })); 
```

我认为您需要在移动控件后调用 Refresh：

```
if ((buttonCount) < numButtonsHoriz) {
  button.Location = new Point(panel1MinX + (button.Width * (buttonCount)) + extraSpaceHoriz, (panel1MinY + extraSpaceVerti));
} else {
  int newLine = (buttonCount) % numButtonsHoriz;
  button.Location = new Point(panel1MinX + (button.Width * (newLine)) + extraSpaceHoriz, ((panel1MinY + extraSpaceVerti) + (button.Height * ((buttonCount) / 2) - ((buttonCount) % 2))));
}
panel1.Refresh(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:13:40.550

您正在 UI 线程中进行工作。请参阅[如何在 C# 中关闭 MessageBox 后强制按钮、文本框在表单上重新绘制](https://stackoverflow.com/questions/439974/how-to-force-buttons-textboxes-to-repaint-on-form-after-a-messagebox-closes-in)。如果可以，我建议您将屏幕截图移至后台线程。

您可能还需要等到按钮渲染完毕，或者使用直接休眠 100 毫秒左右的权宜之计，或者通过调查[Paint](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.paint.aspx)事件并使用某种标志来指示两个必需的事件都已发生并且可以截取屏幕截图.

或者，您可以强制它重绘：[我如何调用绘画事件？](https://stackoverflow.com/questions/952906/how-do-i-call-paint-event)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:29:56.907

只要您只需要自己形式的像素...

```
private void button1_Click(object sender, EventArgs e)
{
    //Button magic
    button1.Visible = false;
    button2.Location = button1.Location;

    Bitmap bmp = new Bitmap(this.Width, this.Height);

    this.DrawToBitmap(bmp, new Rectangle(0, 0, this.Width, this.Height));

    pictureBox1.Image = bmp;
    //or do whatever you want with the bitmap
} 
```

# r - 使用 reshape2 反转熔化操作

> ID：15905096
> 
> 赞同：5
> 
> 时间：2013-04-09T14:46:39.203
> 
> 标签：r, reshape2

考虑以下代码。

```
library (reshape2)
x = rnorm (20)
y = x + rnorm (rnorm (20, sd = .01))

dfr <- data.frame (x, y)
mlt <- melt (dfr) 
```

当我尝试用 dcast 反转这个操作时，

```
dcast (mlt, value ~ variable) 
```

我得到了一个包含三列的数据框（例如，不适合散点图）。如何使用 dcast 重新制定原始数据帧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:55:52.700

R 怎么知道在熔化之前存在的排序？即第一行`x`与第一行匹配的概念`y`。

如果您添加一个索引列（因为 R 会抱怨重复的 row.names），您可以简单地执行此操作：

```
dfr$idx <- seq_along(dfr$x)   
mlt <- melt(dfr, id.var='idx')
dcast(mlt, idx ~ variable, value.var='value') 
```

# android - 闹钟不会唤醒我的服务

> ID：15905099
> 
> 赞同：2
> 
> 时间：2013-04-09T14:46:48.533
> 
> 标签：android, android-alarms, android-pendingintent

我有以下代码，我希望无论手机状态如何，此警报都会调用我的服务。即使它处于睡眠模式，我也需要它来访问互联网并拨打一些网络电话。

为什么手机处于睡眠模式时无法使用？

**报警管理器**

```
 Calendar cal = Calendar.getInstance();
        cal.add(Calendar.SECOND, 5);
        AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
        Intent notifyintent = new Intent(this, OnAlarmReceiver.class);
        notifyintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        notifyintent.setAction("android.intent.action.NOTIFY");
        PendingIntent notifysender = PendingIntent.getBroadcast(this, 0, notifyintent,
                PendingIntent.FLAG_UPDATE_CURRENT);
        am.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 20 * 1000,
                notifysender); 
```

**报警接收器**

```
public class OnAlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // PullPendingRequests.acquireStaticLock(context)
        context.startService(new Intent(context, PullPendingRequests.class));
    }
} 
```

**PullPendingRequests，PendingIntent**

```
public class PullPendingRequests extends IntentService 

public PullPendingRequests() {
        super("PullPendingRequests");
        me = this ;
    }

@Override
    final protected void onHandleIntent(Intent intent) {

        Location myLocation;
        Log.d("Taxeeta:PullPendingRequets", "Started Location");
        if (God.locationManager == null)
            God.locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        myLocation = God.locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        if (myLocation != null)
            onLocationChanged(myLocation);
        else {
            God.notifications.setSpeedNotification();
        }

        Log.d("Taxeeta:PullPendingRequets", "Ended Location");
    } 
```

**权限和其他设置的清单**

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <!-- <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> -->
 <service
        android:name="com.taxeeta.PullPendingRequests"
        android:enabled="true"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Light.NoTitleBar" />

<receiver
            android:name="com.taxeeta.support.OnAlarmReceiver"
            android:exported="true" >
            <intent-filter>
                <action android:name="android.intent.action.NOTIFY" />
            </intent-filter>
        </receiver> 
```

**编辑**：这应该工作，它不适合我吗？

```
public class PullPendingRequests extends IntentService implements LocationListener {

    private static final String NAME = "com.commonsware.cwac.wakeful.WakefulIntentService";
    private static volatile PowerManager.WakeLock lockStatic = null;
    private static PowerManager.WakeLock lock;

    synchronized private static PowerManager.WakeLock getLock(Context context) {
        if (lockStatic == null) {
            PowerManager mgr = (PowerManager) context.getSystemService(Context.POWER_SERVICE);

            lockStatic = mgr.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, NAME);
            lockStatic.setReferenceCounted(true);
        }

        return (lockStatic);
    }

    @Override
    final protected void onHandleIntent(Intent intent) {
        try {
            lock = getLock(this.getApplicationContext());
            lock.acquire();
            Location myLocation;
            Log.d("Taxeeta:PullPendingRequets", "Started Location");
            if (God.locationManager == null)
                God.locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
            myLocation = God.locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            if (myLocation != null)
                onLocationChanged(myLocation);
            else {
                God.notifications.setSpeedNotification();
            }

            Log.d("Taxeeta:PullPendingRequets", "Ended Location");
        } finally {
            if (lock.isHeld()) {
                lock.release();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T14:50:36.723

> 为什么手机处于睡眠模式时无法使用？

因为`startService()`是异步的，Android 只保证`_WAKEUP`闹钟会保持设备唤醒直到`onReceive()`结束。您将需要`WakeLock`直接或通过[使用 my`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)来使用.

# php - 使用带有 php 脚本的 google drive api 自动刷新令牌

> ID：15905104
> 
> 赞同：8
> 
> 时间：2013-04-09T14:46:57.450
> 
> 标签：php, google-api, google-drive-api, google-api-php-client

我再次按照[本教程](http://www.html.it/articoli/google-drive-e-php-come-integrarli/)使用 php 在 Google Drive 上上传文件，直接从我的远程服务器：所以我从 Google API 控制台创建了新的 API 项目，启用 Drive API 服务，请求 OAuth 客户端 ID 和客户端密码，将它们写在脚本，然后将其与[Google APIs Client Library for PHP](https://code.google.com/p/google-api-php-client/)文件夹一起上传到此[http://www.MYSERVER.com/script1.php](http://www.MYSERVER.com/script1.php)，以检索 Auth 代码：

```
<?php

require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$drive = new Google_Client();

$drive->setClientId('XXX'); // HERE I WRITE MY Client ID

$drive->setClientSecret('XXX'); // HERE I WRITE MY Client Secret

$drive->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');

$drive->setScopes(array('https://www.googleapis.com/auth/drive'));

$gdrive = new Google_DriveService($drive);

$url = $drive->createAuthUrl();
$authorizationCode = trim(fgets(STDIN));

$token = $drive->authenticate($authorizationCode);

?> 
```

当我访问[http://www.MYSERVER.com/script1.php](http://www.MYSERVER.com/script1.php)时 ，我**允许授权**并获得我可以在第二个脚本中编写的 Auth 代码。然后我将它上传到[http://www.MYSERVER.com/script2.php](http://www.MYSERVER.com/script2.php)，它看起来像：

```
<?php

require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$drive = new Google_Client();

$drive->setClientId('X');  // HERE I WRITE MY Client ID
$drive->setClientSecret('X');  // HERE I WRITE MY Client Secret
$drive->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$drive->setScopes(array('https://www.googleapis.com/auth/drive'));

$gdrive = new Google_DriveService($drive);

$_GET['code']= 'X/XXX'; // HERE I WRITE AUTH CODE RETRIEVED AFTER RUNNING REMOTE script.php

file_put_contents('token.json', $drive->authenticate());

$drive->setAccessToken(file_get_contents('token.json'));

$doc = new Google_DriveFile();

$doc->setTitle('Test Drive');
$doc->setDescription('Document');
$doc->setMimeType('text/plain');

$content = file_get_contents('drive.txt');

$output = $gdrive->files->insert($doc, array(
      'data' => $content,
      'mimeType' => 'text/plain',
    ));

print_r($output);

?> 
```

好吧，现在文件 drive.txt 已上传到我的 Google Drive 上，并且 token.json 文件的结构是一种：

```
{"access_token":"XXX","token_type":"Bearer","expires_in":3600,"refresh_token":"YYY","created":1365505148} 
```

现在，您可以想象我可以调用 script2.php 并上传文件直到某个时间。最后，重点是：**不想**token过期，**不想**每次过期都允许授权（回忆script1.php）：白天需要定时调用script2.php，进行上传我的文件自动，**无需用户交互**。那么，在这种情况下永久**自动刷新**令牌的最佳方法是什么？我需要另一个脚本吗？我可以在 script2.php 中添加一些代码吗？还是修改 token.json 文件？我在哪里可以读取令牌到期前的剩余时间？谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-09T15:07:49.867

您不必定期请求访问令牌。如果你有一个 refresh_token，PHP 客户端会自动为你获取一个新的访问令牌。

为了检索 refresh_token，您需要将 access_type 设置为“offline”并请求离线访问权限：

```
$drive->setAccessType('offline'); 
```

一旦你得到一个`code`，

```
$_GET['code']= 'X/XXX';
$drive->authenticate();

// persist refresh token encrypted
$refreshToken = $drive->getAccessToken()["refreshToken"]; 
```

对于未来的请求，请确保始终设置刷新的令牌：

```
$tokens = $drive->getAccessToken();
$tokens["refreshToken"] = $refreshToken;
$drive->setAccessToken(tokens); 
```

如果您想要强制访问令牌刷新，您可以通过调用`refreshToken`：

```
$drive->refreshToken($refreshToken); 
```

请注意，`refresh_token`只会在第一次退回`$drive->authenticate()`，您需要永久保存它。为了获得新的 refresh_token，您需要撤销现有的令牌并再次启动身份验证过程。

离线访问在[Google 的 OAuth 2.0 文档](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)中有详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-06T09:09:57.617

在搞砸了很多之后，我得到了这个工作。我正在使用一个文件/脚本来获取离线令牌，然后使用一个类来使用 api 做一些事情：

```
require_once 'src/Google/autoload.php'; // load library

session_start();

$client = new Google_Client();
// Get your credentials from the console
$client->setApplicationName("Get Token");
$client->setClientId('...');
$client->setClientSecret('...');
$client->setRedirectUri('...'); // self redirect
$client->setScopes(array('https://www.googleapis.com/auth/drive.file'));
$client->setAccessType("offline");
$client->setApprovalPrompt('force'); 

if (isset($_GET['code'])) {
    $client->authenticate($_GET['code']);
    $_SESSION['token'] = $client->getAccessToken();
    $client->getAccessToken(["refreshToken"]);
    $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
    header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
    return;
}

if (isset($_SESSION['token'])) {
    $client->setAccessToken($_SESSION['token']);
}

if (isset($_REQUEST['logout'])) {
    unset($_SESSION['token']);
    $client->revokeToken();
}

?>
<!doctype html>
<html>
    <head><meta charset="utf-8"></head>
    <body>
        <header><h1>Get Token</h1></header>
        <?php
        if ($client->getAccessToken()) {
            $_SESSION['token'] = $client->getAccessToken();
            $token = json_decode($_SESSION['token']);
            echo "Access Token = " . $token->access_token . '<br/>';
            echo "Refresh Token = " . $token->refresh_token . '<br/>';
            echo "Token type = " . $token->token_type . '<br/>';
            echo "Expires in = " . $token->expires_in . '<br/>';
            echo "Created = " . $token->created . '<br/>';
            echo "<a class='logout' href='?logout'>Logout</a>";
            file_put_contents("token.txt",$token->refresh_token); // saving access token to file for future use
        } else {
            $authUrl = $client->createAuthUrl();
            print "<a class='login' href='$authUrl'>Connect Me!</a>";
        }
        ?>
    </body>
</html> 
```

您可以从文件加载刷新令牌并根据需要使用它进行离线访问：

```
class gdrive{

function __construct(){
        require_once 'src/Google/autoload.php';
        $this->client = new Google_Client();
}

function initialize(){
        echo "initializing class\n";
        $client = $this->client;
        // credentials from google console
        $client->setClientId('...');
        $client->setClientSecret('...');
        $client->setRedirectUri('...');

        $refreshToken = file_get_contents(__DIR__ . "/token.txt"); // load previously saved token
        $client->refreshToken($refreshToken);
        $tokens = $client->getAccessToken();
        $client->setAccessToken($tokens);

        $this->doSomething(); // go do something with the api       
    }
} 
```

更多信息：[https ://github.com/yannisg/Google-Drive-Uploader-PHP](https://github.com/yannisg/Google-Drive-Uploader-PHP)

# audio - FFT 可用于查找音频文件中的鼓独奏/中断吗？

> ID：15905105
> 
> 赞同：0
> 
> 时间：2013-04-09T14:46:58.257
> 
> 标签：audio, signal-processing, fft

FFT 是否可以在音频文件中找到鼓独奏或鼓声？这是 FFT 能够做到的吗？是否有任何在线资源可以帮助我学习？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:10:04.927

一般来说，FFT 不是检测打击乐声开始的好选择：

1.  FFT 总是在样本窗口（实际上是一段时间）上计算，并产生 bin 内的信号幅度及其相位偏移。因此，您可以确定在该特定 bin 处有信号，但不能确定其开始时间。可用的最佳时间分辨率是窗口期。当然，您可以以牺牲频率分辨率为代价来缩短周期。
2.  打击乐声音往往看起来像噪音，并在整个频谱中传播。如果您只有打击乐声音，这将是可以的，但在现实生活中的复调内容中并不好。

但是，您也许可以从音轨的鼓独奏和乐器部分的频谱的不同特征中找到一些推论。

找出音乐中敲击声开始时间的问题在学术期刊中被描述为*起始检测*，并且是用于*特征提取*的众多技术之一；更广泛的领域被称为*音乐信息检索*。您的问题听起来像是音频文件中的识别部分之一，这可能被描述为*分区*

[Sonic Visualiser](http://www.sonicvisualiser.org)是一个很好的起点，它是专门为 MIR 应用程序编写的工具。存在用于各种类型特征提取的插件。从这些资料中，您将能够轻松找到该领域的大量学术著作。还有一个额外的好处是现有的插件也是开源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:51:43.327

我会看这里，有一些关于 Gamedev SE 的精彩讨论：[https](https://gamedev.stackexchange.com/questions/9761/beat-detection-and-fft) ://gamedev.stackexchange.com/questions/9761/beat-detection-and-fft :-)

# linux - 在不通过 ssh 连接到 localhost 的情况下启动 Hadoop

> ID：15905107
> 
> 赞同：1
> 
> 时间：2013-04-09T14:47:03.970
> 
> 标签：linux, hadoop

我手头有一个非常棘手的情况。我在几个运行 Ubuntu 12.04 的节点上安装 Hadoop，我们的 IT 人员创建了一个用户“hadoop”供我在所有节点上使用。该用户的问题是由于某些安全限制，它不允许在 localhost 上使用 ssh。所以，我根本无法启动 Hadoop 守护进程。

我可以使用“ssh hadoop@hadoops_address”连接到自身，但不能使用环回地址。我也无法对 /etc/hosts 进行任何更改。有没有办法告诉 Hadoop 使用“ssh hadoop@hadoops_address”而不是“ssh hadoop@localhost”对自己进行 ssh？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:33:01.533

Hadoop 从 conf 目录中的“masters”和“slaves”文件读取主机名，编辑文件并将值从 localhost 更改为 hadoops_address。这应该可以解决您的问题。

# sharepoint-2010 - 如何在 sharePoint 2010 中自定义自定义任务表单？

> ID：15905108
> 
> 赞同：2
> 
> 时间：2013-04-09T14:47:09.283
> 
> 标签：sharepoint-2010, sharepoint-workflow

我在 SharePoint 中有主详细信息列表。我为详细列表中的项目创建了一个工作流，并创建了一个从用户操作中收集数据的自定义表单。
在这种形式中，我有与工作流相关的项目，但我想要一个指向其父项目的链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:06:29.367

您无法通过`Collect data from a user`操作执行此操作，因为 SharePoint 不允许您自定义此操作的任务。相反，您可以使用该`Start custom task process`操作来执行此操作。[在这里](http://lyndzhang.wordpress.com/2012/11/23/customize-start-custom-task-process-in-sharepoint-designer-2010/)，您可以找到如何使用`Start custom task process`而不是`Collect data from a user`自定义 SharePoint 为任务创建的 InfoPath 表单以及如何自定义。

要将工作流或项目值传递到任务表单字段，请通过单击工作流编辑器页面上的任务名称转到任务流程页面，然后在自定义部分中单击“更改单个任务的行为”在“分配任务”步骤之前，您可以将任务表单字段设置为您想要的。

# python - 使用 python 连接到数据库并将其作为 cron 作业运行

> ID：15905113
> 
> 赞同：0
> 
> 时间：2013-04-09T14:47:27.783
> 
> 标签：python

我有几个 python 脚本，我计划将它们放在服务器上并每天重复运行一次。这个 python 脚本进行一些计算，最后将数据上传到中央数据库。当然，要连接到数据库，需要密码和用户名。在我的 python 脚本中输入这个用户名和密码是否安全。如果没有，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:30:52.943

创建一个具有有限访问权限的数据库用户，例如，对它上传数据的唯一表。在您的脚本中对该用户进行硬编码或将其作为命令行参数传递。对于自动化脚本，您几乎无能为力，因为它必须使用一些用户名和密码才能以某种方式连接到数据库。

您可以在脚本中加密凭据并对其进行解密，但是一旦有足够坚定的攻击者访问您的用户帐户和脚本，从纯文本脚本中提取用户名和密码应该不会太难。您可以使用已编译的脚本来隐藏凭据以防窥探，但同样，这取决于对数据库的访问的价值。

# asp.net-mvc - Mvc 路由和数字视图名称

> ID：15905116
> 
> 赞同：1
> 
> 时间：2013-04-09T14:47:32.317
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个带有历史文件夹的区域，其中我有每年的视图。这些视图被称为例如 Year2010、Year2011 等，仅用于显示历史数据。我试图简单地称它们为 2010、2011，但这似乎违反了命名约定。我不想使用 History/Year2010 路线，而是希望能够只使用 History/2010，这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:59:59.350

您可以为历史页面添加自定义路由，以便默认操作并将年份作为参数传入。

```
routes.MapRoute(
    "History",
    "History/{year}",
    new { controller = "History", action = "Display", year = DateTime.Today.Year }
); 
```

然后，在您的控制器中，检查传入的年份并显示正确的视图：

```
public ActionResult Display(int year)
{
    switch (year)
    {
        case 2010:
            return View("Year2010");
        case 2011:
            return View("Year2011");
    }
    return View();
} 
```

# c - C 链接错误：未定义对“主”的引用

> ID：15905119
> 
> 赞同：42
> 
> 时间：2013-04-09T14:47:37.487
> 
> 标签：c, linker

我已经阅读了关于这个主题的其他答案，不幸的是他们没有帮助我。我试图将几个 c 程序链接在一起，但我得到一个错误的响应：

```
$ gcc -o runexp.o scd.o data_proc.o -lm -fopenmp
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status
make: * [runexp] Error 1 
```

我只有一个主要功能，它在 runexp 中。形式是

```
int main(void) {
    ...; 
    return 0;
} 
```

关于为什么我可能会收到此错误的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-09T14:51:58.353

您应该在选项后提供输出文件名`-o`。在您的情况下`runexp.o`，被视为输出文件名，而不是输入目标文件，因此您的`main`函数未定义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-09T14:52:45.323

您不包括`main()`编译时包含的 C 文件，因此链接器看不到它。

您需要添加它：

```
$ gcc -o runexp runexp.c scd.o data_proc.o -lm -fopenmp 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-09T14:57:26.023

您正在`runexp.o`通过运行以下命令覆盖您的目标文件：

```
 gcc -o runexp.o scd.o data_proc.o -lm -fopenmp 
```

实际上，`-o`是用于**输出**文件的。你需要运行：

```
gcc -o runexp.out runexp.o scd.o data_proc.o -lm -fopenmp 
```

**runexp.out**将是你的二进制文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T02:12:51.140

通常，您通过以下方式编译大多数 .c 文件：

gcc foo.c -o foo. 它可能会有所不同，具体取决于您使用的#includes 或您是否有任何外部 .h 文件。一般来说，当你有一个 C 文件时，它看起来有点像下面这样：

```
#include <stdio.h>
    /* any other includes, prototypes, struct delcarations... */
    int main(){
    */ code */
} 
```

当我得到“对 main 的未定义引用”时，通常意味着我有一个文件中没有的 .c`int main()`文件。如果您第一次学习 java，这是一种可以理解的混淆方式，因为在 Java 中，您的代码通常如下所示：

```
//any import statements you have
public class Foo{
    int main(){}
 } 
```

我建议看看你是否`int main()`在顶部。

# mysql - 关于 ALTER TABLE ADD COLUMN 的性能问题

> ID：15905121
> 
> 赞同：0
> 
> 时间：2013-04-09T14:47:42.583
> 
> 标签：mysql, sql, performance

我有一个有 500 万行的大型 MySQL InnoDB 表。我需要在表中添加一个具有默认`int`值的列。

最好的方法是什么？正常的 alter table 命令似乎需要很长时间。有没有更好的方法呢？基本上我想知道是否有更快的方法或有效的方法。

如果表有外键引用，除了alter table之外还有什么方法可以做到这一点？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:51:13.923

我不会说这是更好的方法，但是......您可以为新数据创建一个单独的表并将其设置为与现有表的外键关系。那将是“快”，但是如果数据确实属于主表并且每个（或大多数）现有记录都有一个值，那么您应该只更改表并添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:10:23.723

假设表格如下所示：

```
CREATE TABLE mytable
(
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(25),
    PRIMARY KEY (id),
    KEY name (name)
); 
```

并且您想添加一个年龄列

```
ALTER TABLE mytable ADD COLUMN age INT NOT NULL DEFAULT 0; 
```

`ALTER TABLE`您可以按如下方式执行分阶段：

```
CREATE TABLE mytablenew LIKE mytable;
ALTER TABLE mytablenew ADD COLUMN age INT NOT NULL DEFAULT 0;
INSERT INTO mytablenew SELECT id,name FROM mytable;
ALTER TABLE mytable RENAME mytableold;
ALTER TABLE mytablenew RENAME mytable;
DROP TABLE mytableold; 
```

如果`mytable`使用 MyISAM 存储引擎并且具有非唯一索引，则再添加两行

```
CREATE TABLE mytablenew LIKE mytable;
ALTER TABLE mytablenew ADD COLUMN address VARCHAR(50);
ALTER TABLE mytablenew DISABLE KEYS;
INSERT INTO mytablenew SELECT id,name FROM mytable;
ALTER TABLE mytable RENAME mytableold;
ALTER TABLE mytablenew RENAME mytable;
DROP TABLE mytableold;
ALTER TABLE mytable ENABLE KEYS; 
```

这将让您了解每个阶段需要多少秒。从这里，您可以决定直截了当`ALTER TABLE`是否更好。

如果有外键引用，这种技术会有点血腥。

你的步骤是

*   `SET UNIQUE_CHECKS = 0;`
*   `SET FOREIGN_KEY_CHECKS = 0;`
*   将外键引用放在`mytable`.
*   执行`ALTER TABLE`阶段
*   在 中创建外键引用`mytable`。
*   `SET UNIQUE_CHECKS = 1;`
*   `SET FOREIGN_KEY_CHECKS = 1;`

试试看 ！！！

# javascript - 我应该使用 BreezeJS 在服务器上还是在客户端上进行查询？

> ID：15905122
> 
> 赞同：1
> 
> 时间：2013-04-09T14:47:43.900
> 
> 标签：javascript, breeze, durandal

我正在使用 Durandal 和 BreezeJS 开发一个 SPA Web 应用程序。在我的服务器上，我有一个 BreezeAPI，它返回我的元数据，返回特定表中的所有数据，比如说汽车，它允许我发布我的更改（SaveChanges）。

现在让我们回到我用这个方法得到所有汽车的地方：

```
[HttpGet]
    public IQueryable<tblCar>AllCars()
    {
        return _contextProvider.Context.Car;
    } 
```

我知道我需要如何使用这些，但这是我的问题：是否可以在服务器上查询特定的汽车？或者这是否只能在客户端查询从 AllCars 获取的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:13:01.633

澄清一下，默认情况下，Breeze 中的所有查询都专门在服务器上执行。（您可以查询本地查询缓存，但我认为这不是您要问的。）您可以控制的是要执行的查询表达式是专门在服务器上定义的，还是基于在服务器上定义的查询组成的服务器以及其他客户端限制。

如果你想在服务器上定义一个返回单个记录的查询，你当然可以这样做。它看起来像这样：

```
[HttpGet]
public Car Car17()
{
    return _contextProvider.Context.Cars.First(c => c.CarId == 17);
} 
```

可以通过以下方式从客户端查询：

```
var q = EntityQuery.from("Car17"); 
```

或者，您可以使用查询参数：

```
[HttpGet]
public Car CarById(carId)
{
    return _contextProvider.Context.Cars.First(c => c.CarId == carId);
} 
```

查询将如下所示：

```
var q = EntityQuery.from("CarById").withParameters( { carId: 17} ); 
```

或者你可以这样做：

```
[HttpGet]
public IQueryable<Car> AllCars()
{
    return _contextProvider.Context.Cars;
} 
```

查询将如下所示：

```
var q = EntityQuery.from("AllCars").where("CarId", "==", 17); 
```

需要明确的重要一点是，所有这 3 个都**在服务器上执行完全相同的查询并返回完全相同的结果**。

希望这可以帮助。

# xpath - xpath括号硒

> ID：15905126
> 
> 赞同：0
> 
> 时间：2013-04-09T14:47:49.303
> 
> 标签：xpath, selenium, selenium-ide, parentheses

我想在 selenium IDE 的文档中选择我的路径的第二个匹配项：这是路径。我确信它是有效的，因为 Firebug 可以毫无问题地找到它

```
(//label[text() = "stupid"])[2] 
```

Selenium 不认为这是一种元素。我什至不认为它认为它是一条有效的路径。

```
[error] locator not found: (//label[text() = "stupid"])[2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:17:17.080

如果定位器不是以“//”开头，则需要使用“xpath=”标签。你的以“（”开头，所以：

```
xpath=(//label[text() = "stupid"])[2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:16:47.840

在这种情况下，需要告诉 selenium 定位器是 Xpath。

这可以通过将（没有空格）附加`"xpath="`到定位器的头部来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:46:37.777

试试这个

```
driver.findElement(By.xpath("//label[text() = 'stupid'])[2]")); 
```

记住在 Java 中 " "(括号) ，需要转义或使用 ' ' 或 \" 替换它

# java - JavaDoc 中的重写方法

> ID：15905127
> 
> 赞同：58
> 
> 时间：2013-04-09T14:47:50.783
> 
> 标签：java, javadoc

我正在记录我开发的 Java 程序，并且想知道如果我只记录超类，是否会为继承的方法（被覆盖）生成 JavaDoc？

如果我有一个使用 in 方法调用的类`Vehicle`，以及一个使用重写方法`drive()`调用的子类，如果 Car 类中没有放置 Javadoc，车辆驱动方法的文档是否会包含在 Cars 驱动方法中？`Car``drive()`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-04-09T15:24:44.523

> [我]想知道如果我只是记录超类，是否会为继承的方法（被覆盖）生成 JavaDoc？

是的。如果您没有对子类的 javadoc 注释，则将基于超类 javadoc 生成 javadoc。

如果您在子类中定义 javadocs，它们将替换继承的 javadocs，但您可以使用在子类 javadocs`{@inheritDoc}`中*包含*相应的超类 javadoc 注释。

参考：

*   [https://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#inheritingcomments](https://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#inheritingcomments)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-09T14:57:37.570

如果要使用被覆盖方法的 JavaDoc，请使用`{@inheritDoc}`. F.e. ：

```
/**
  * {@inheritDoc}
  */
@Override
public double getX() { ... } 
```

请注意，几乎每个被覆盖的方法也继承了上层文档:)。[您可以在oracle 文档](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html)中阅读它（感谢@Steve Kuo 的提示）。

> Javadoc 工具在以下两种情况下具有复制或“继承”类和接口中的方法注释的能力。构造函数、字段和嵌套类不继承文档注释... (1) 自动继承注释以填补缺失的文本... (2) 显式继承带有 {@inheritDoc} 标签的注释

如果`@see`您想引用类似/重要/...方法，请使用。类的例子`java.awt.Point`：

```
 /**
 * Returns the location of this point.
 * This method is included for completeness, to parallel the
 * <code>getLocation</code> method of <code>Component</code>.
 * @return      a copy of this point, at the same location
 * @see         java.awt.Component#getLocation
 * @see         java.awt.Point#setLocation(java.awt.Point)
 * @see         java.awt.Point#setLocation(int, int)
 * @since       1.1
 */
public Point getLocation() { ... } 
```

# asp.net-mvc - ASP.net MVC 和 Windows 身份验证

> ID：15905129
> 
> 赞同：1
> 
> 时间：2013-04-09T14:47:53.317
> 
> 标签：asp.net-mvc, authentication

我有一个 ASP.net MVC(3) 应用程序，它是一个 intrAnet 风格的应用程序 - 仅限域用户访问。我没有用 [Authorize] 属性修饰我的任何控制器操作，我只是在 IIS 级别启用了 Windows 身份验证 - 也许不是最好的主意 - 因为现在我想要一个或两个操作（甚至整个控制器）如果可能的话打开。

我想我需要回去装饰我的所有动作，而不是依赖 IIS 设置，并“取消装饰”我希望打开的那些，但我想我会先问是否可能有其他建议。

# hibernate - 休眠创建标准

> ID：15905130
> 
> 赞同：0
> 
> 时间：2013-04-09T14:47:55.820
> 
> 标签：hibernate, search, grails, groovy

所以我试图做一个搜索功能。我正在使用 Hibernates Create Criteria 来尝试完成它。我按 2 个值搜索。如果其中一个值为 null，那么它将引发异常，如果不是，它将继续在表中显示有关该搜索的所有信息。

```
 def search(params) {

def r = User.createCriteria()

if (params.searchUsername != 'Enter a Username' && params.searchMPI != 'Enter a User Number') {
    def number = params.searchNumber
    def username = params.searchUsername

    r = User.createCriteria()

    def userList = r.list(max: params.max, offset: params.usersOffset) {
        and {
            ilike('username', '%' + username + '%')
            ilike('number', '%' + number + '%')
        }
        order(params.usersSort, params.usersOrder)
    }
} 
```

到目前为止，这是我的搜索功能。它搜索用户名和用户编号。几乎必须有一个与用户编号相关联的用户名。如果一个或另一个出现空，那么它需要对我大喊大叫，告诉我一个是空的。我一直在查看这里的 createCriteria 信息[http://grails.org/doc/2.2.x/ref/Domain%20Classes/createCriteria.html](http://grails.org/doc/2.2.x/ref/Domain%20Classes/createCriteria.html)。它作为一个 if NULL 方法。但是，这似乎只是搜索为空的值。有没有办法可以在我的搜索中实现它？

```
if ((ilike('username', '%'+ username) || ilike('number', '%' + number) ) == (isNull('username') || isNull('number')){
        system.out.println("ONE OF THE VALUES IS NULL!") 
```

我想这会像这样工作。^ 但事实并非如此

我对这一切都很陌生。所以建设性的批评是值得赞赏的=D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:12:43.937

你为什么将这些字符串作为参数提交？你是故意的吗？而且，您确定这是一个 AND 条件吗？

> 它作为一个 if NULL 方法。但是，这似乎只是搜索为空的值。有没有办法可以在我的搜索中实现它？

你能改写一下吗？（我不明白你想做什么？）

# jenkins - 在 Jenkins Violations 插件中单击 FxCop 会导致空白页面

> ID：15905131
> 
> 赞同：6
> 
> 时间：2013-04-09T14:47:55.907
> 
> 标签：jenkins, fxcop

我有一份 Jenkins 工作，我在其中指定了类似以下 FxCop 命令的内容：

```
FxCopCmd.exe"/file:"test.dll" /out:"FxCop_Output.xml" /ignoregeneratedcode /project:"C:\Jenkins\extra\Modified_Rules.FxCop" /s /searchgac 
```

当 Jenkins 作业运行时，它会发现许多代码违规，并显示一个图表以及文件名列表以及文件中的违规数量。但是，如果我单击非 C-Sharp 文件，我会转到一个带有红色三角形感叹号的页面，但是没有显示代码，也没有 FxCop 错误列表。

[http://i.stack.imgur.com/VNKF6.jpg](http://i.stack.imgur.com/VNKF6.jpg)

我缺少某种 FxCop 配置吗？如何让 Violations 插件显示这些文件的代码违规？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T16:03:27.370

我最终下载并修改了 Violations 插件代码以显示没有源代码的文件的违规表，然后重新编译 Violations 插件（并将修改后的插件手动加载到 Jenkins 中）。

从我的原始屏幕截图中可以看出，文件名也没有显示出来，“getFileNameAlt”函数只是正确获取了名称，下面的果冻脚本中的“File: ${it.fileNameAlt}”行显示了它（见链接到下面的截图）。

我将以下内容添加到 ~\violations\src\main\java\hudson\plugins\violations\render\FileModelProxy.java，以呈现表格：

```
public String getFileNameAlt() {
    return new File(fileModel.getDisplayName()).getName();
}

public String getSummaryTable() {

    StringBuilder gst = new StringBuilder();
    int count = 0;

    gst.append(" <table class='violations' width='100%'>\n");
    gst.append("   <tr>\n");
    gst.append("     <td class='violations-header'> # </td>\n");
    gst.append("     <td class='violations-header'> Type </td>\n");
    gst.append("     <td class='violations-header'> Class</td>\n");
    gst.append("     <td class='violations-header'> Message</td>\n");
    gst.append("     <td class='violations-header'> Description</td>\n");
    gst.append("   </tr>\n");

    Set<Violation> violations = fileModel.getLineViolationMap().get(0);

    for (Violation v: violations) {
        ++count;
        gst.append("   <tr>\n");
        gst.append("     <td class='violations'>");
        gst.append(count);
        gst.append("</td>\n");
        gst.append("     <td class='violations'>");
        gst.append(v.getType());
        gst.append("</td>\n");
        gst.append("     <td class='violations'>");
        gst.append(v.getSource());
        gst.append("</td>\n");
        gst.append("     <td class='violations'>");
        gst.append(v.getMessage());
        gst.append("</td>\n");
        gst.append("     <td class='violations'>");
        gst.append(v.getPopupMessage());
        gst.append("</td>\n");
        gst.append("   </tr>\n");
    }
    //}
    gst.append(" </table>\n");
    gst.append("<p><br>\n");
    gst.append("<h3>Total Number of violations:  \n");
    gst.append(count);
    gst.append("</h3><p>\n");
    return gst.toString();
} 
```

然后更新了 ~\violations\target\classes\hudson\plugins\violations\render\FileModelProxy\index.jelly 文件，将其添加到将在源代码中显示违规的代码上方（这对我有用），它是下面的“”摘要行：

```
<j:set
  var="iconDir"
  value="${rootURL}/plugin/violations/images/16x16"/>

<j:set var="href" value="${it.showLines}"/>
<h1><img src="${image}"/> File: ${it.fileNameAlt}</h1>

<j:out value="${it.summaryTable}"/>

<j:forEach var="t" items="${model.typeMap.entrySet()}">
  <table class="pane">
    <tbody>
      <tr><td class="pane-header" colspan="5"><j:out value="${it.typeLine(t.key)}"/></td></tr>
      <j:forEach var="v" items="${t.value}">
        <tr>
          <td class="pane">
            <j:if test="${href}">
              <a href="#line${v.line}">${v.line}</a>
            </j:if>
            <j:if test="${!href}">
              ${v.line}
            </j:if>
          </td>
          <!--<td class="pane">${v.source}</td> -->
          <td class="pane"><j:out value="${it.severityColumn(v)}"/></td>
          <td class="pane" width="99%">${v.message}</td>
        </tr>
      </j:forEach>
    </tbody>
  </table>
  <p></p>
</j:forEach> 
```

最后我稍微玩了一下 style.css 文件，添加了一个名为“violations”的表格样式定义（~\violations\target\violations\css\style.css）：

```
.violations  {
  margin-top: 4px;
}
.violations td {
  padding: 4px 4px 3px 4px;
}

table.violations {
  width: 100%;
  border-collapse: collapse;
  border: 1px #bbb solid;
}
table.violations > tbody > tr > td:last-child {
  border-right: 1px #bbb solid;
}

td.violations {
  border: 1px #bbb solid;
  padding: 3px 4px 3px 4px;
  vertical-align: middle;
}

td.violations-header {
  border: 1px #bbb solid;
  border-right: none;
  border-left: none;
  background-color: #f0f0f0;
  font-weight: bold;
}

th.violations {
  border: 1px #bbb solid;
  font-weight: bold;
} 
```

下图显示了没有源代码的文件的结果表。在我的情况下，文件不以“.cs”结尾

[http://i.stack.imgur.com/StChP.jpg](http://i.stack.imgur.com/StChP.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:40:59.397

我想你可能会看到[这个违规插件问题](https://issues.jenkins-ci.org/browse/JENKINS-12955)（在 Jenkins JIRA 中报告）。显示 StyleCop 结果也存在类似问题。你能确认你的 Jenkins 和 Violation 插件版本吗？

# python - python pyinotify 移动文件

> ID：15905132
> 
> 赞同：2
> 
> 时间：2013-04-09T14:48:02.117
> 
> 标签：python, file, operations, pyinotify

我正在使用此代码来检测何时在文件夹中创建文件/目录。在指定文件夹中创建新文件/目录时，它可以正常工作。**但是当它们被移动**到文件夹中时，它不会通知或记录文件/目录。我怎样才能检测到呢？

```
#!/usr/bin/env python

# monitors both files and dirs

import os
import pyinotify
from datetime import datetime

timestamp = datetime.today()
wm = pyinotify.WatchManager()
mask = pyinotify.IN_CREATE

class PTmp(pyinotify.ProcessEvent):
    def process_IN_CREATE(self, event):
        print "Created: %s " % os.path.join(event.path, event.name)
        event_log = open('/home/saad/Code/test/event_log', 'a')
        event_log.write(event.name + ' - ' + timestamp.strftime('%c') + '\n')
        event_log.close()

notifier = pyinotify.Notifier(wm, PTmp())

wdd = wm.add_watch('/home/saad/Code/test/foo', mask, rec=True)

while True:
    try:
        notifier.process_events()
        if notifier.check_events():
            notifier.read_events()
    except KeyboardInterrupt:
        notifier.stop()
        break 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:50:46.550

您可以观看`IN_MOVED_TO`活动：

```
mask = pyinotify.IN_CREATE | pyinotify.IN_MOVED_TO

class PTmp(pyinotify.ProcessEvent):
    ...
    def process_IN_MOVED_TO(self, event):
        print "Moved: %s " % os.path.join(event.path, event.name)
        event_log = open('/home/saad/Code/test/event_log', 'a')
        event_log.write(event.name + ' - ' + timestamp.strftime('%c') + '\n')
        event_log.close() 
```

（未测试，因为我现在没有可用的 Linux 机器）。

[手册页](http://linux.die.net/man/7/inotify)或[pyinotify 文档](https://github.com/seb-m/pyinotify/wiki/Events-types)中提供了 inotify 事件的完整列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-22T15:11:16.090

使用 afick 工具，适用于 Linux，来自 CD 驱动程序，因此无法触摸 afick，它会通过电子邮件提醒您系统上的任何更改...如果它是网络服务器，强烈建议您创建 CD 或 DVD并要求他们将其放入服务器中已安装的 CD DRIVE 中。否则从外部使用它，但我不知道如何实现。

[http://archive09.linux.com/feature/113944](http://archive09.linux.com/feature/113944)

# javascript - javascript - jquery $.get 函数

> ID：15905134
> 
> 赞同：0
> 
> 时间：2013-04-09T14:48:03.277
> 
> 标签：javascript, jquery

> 我需要使用$.get来解析返回的页面内容，页面URL包含请求参数（查询字符串）的问题如下图，所以函数不起作用。所以任何人有任何建议

```
 $.get('test123.aspx?param1=123', function (data) {
            console.log("aaa");
            var my_div = $('#my_div', $(data));} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:49:33.033

您不应自己构建 URL，而应使用[$.get](http://api.jquery.com/jQuery.get/)的内置功能：

```
$.get(
    'test123.aspx',
    {param1:"123"}, // jQuery will do the encoding
    function (data) {
        console.log("aaa");
        var my_div = $('#my_div', $(data));} 
```

# wordpress - 避免在 WordPress 中覆盖 htaccess

> ID：15905136
> 
> 赞同：-2
> 
> 时间：2013-04-09T14:48:04.663
> 
> 标签：wordpress, .htaccess, redirect

我在 htaccess 中有以下代码。

```
# BEGIN Wordpress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]

# Add this line
RewriteCond %{REQUEST_URI}    !/document         [NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]

# Add these lines
RewriteCond %{REQUEST_URI}  !search\.php         [NC]
RewriteCond %{REQUEST_URI}  /document/([^/]+)/?  [NC]
RewriteRule .*  /wordpress/search.php?id=%1      [L,NC]

</IfModule>
# END Wordpress 
```

#Add this/these line(s) 下的行是我的自定义代码，用于将任何 URL 重定向`http://example.com/document/123`到`http://example.com/search.php?id=123`.

现在我想修改此代码以避免在更新/安装 WordPress/插件后我的自定义规则被 WordPress 覆盖。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:25:01.980

只需将您的第二个附加块移动到 WordPress 部分之前。重写规则中的`[L]`标志应防止评估任何剩余的条件和规则。您不需要添加的第一行。

```
# Your additions
<IfModule mod_rewrite.c>
RewriteCond %{REQUEST_URI}  !search\.php         [NC]
RewriteCond %{REQUEST_URI}  /document/([^/]+)/?  [NC]
RewriteRule .*  /wordpress/search.php?id=%1      [L,NC]
</IfModule>

# BEGIN Wordpress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]

</IfModule>
# END Wordpress 
```

# wpf - 为什么我的标签被夹在右侧，我该如何解决这个问题？

> ID：15905138
> 
> 赞同：0
> 
> 时间：2013-04-09T14:48:06.473
> 
> 标签：wpf, xaml, tabs

我有一个显示如下的选项卡控件，每个选项卡的右侧都被剪裁了：

![每个选项卡的右侧被剪裁](https://i.stack.imgur.com/l6OBN.png)

我不知道该怎么做才能做到这一点，所以右侧不会被剪掉。目前我正在使用具有以下内容的样式定义：`<Setter Property="Margin" Value="5,0,0,0" />`. 如果我将其设置为`Value="0,0,0,0"`然后边距正确显示，如下所示：

![正确的圆角](https://i.stack.imgur.com/kAfVA.png)

但这不起作用，因为我需要在它们之间保持 5px 的空间。

作为参考，这是我正在使用的样式：

```
<Style  TargetType="{x:Type TabControl}" x:Key="TabControlStyle">
    <Setter Property="OverridesDefaultStyle" Value="True" />
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabControl}">
                <Grid KeyboardNavigation.TabNavigation="Local">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TabPanel Name="HeaderPanel" Grid.Row="0" Panel.ZIndex="1"  Margin="120,0,4,0" IsItemsHost="True" KeyboardNavigation.TabIndex="1" Background="Transparent" />
                    <Border Name="Border" Grid.Row="1" Background="Transparent" KeyboardNavigation.TabNavigation="Local" KeyboardNavigation.DirectionalNavigation="Contained" KeyboardNavigation.TabIndex="2" >
                        <ContentPresenter Name="PART_SelectedContentHost" Margin="0" ContentSource="SelectedContent" />
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DisabledBorderBrush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type TabItem}" x:Key="TabItemStyle">
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="FontFamily" Value="Verdana" />
    <Setter Property="Margin" Value="0,0,0,0" />
    <Setter Property="FontSize" Value="12" />
    <Setter Property="Height" Value="35" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">
                <Grid>
                    <Border Name="Border" Margin="0,0,0,0" Background="{DynamicResource RedGradient}" CornerRadius="7,7,0,0" >
                        <ContentPresenter x:Name="ContentSite" VerticalAlignment="Center" HorizontalAlignment="Center" ContentSource="Header" Margin="12,2,12,2"
                            RecognizesAccessKey="True"/>
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Panel.ZIndex" Value="100" />
                        <Setter TargetName="Border" Property="Background" Value="#ABABB2" />
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{DynamicResource DarkRedColorBrush}" />
                    </Trigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected" Value="True" />
                            <Condition Property="IsMouseOver" Value="True"/>
                        </MultiTrigger.Conditions>
                        <MultiTrigger.Setters>
                            <Setter TargetName="Border" Property="Background" Value="#ABABB2" />
                        </MultiTrigger.Setters>
                    </MultiTrigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="Border" Property="Background" Value="{StaticResource DisabledBackgroundBrush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DisabledBorderBrush}" />
                        <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是如何实现 1 个选项卡的示例：

```
<TabControl Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" Grid.ColumnSpan="2" Margin="0,35,0,0" VerticalAlignment="Stretch" 
            Style="{DynamicResource TabControlStyle}" SelectionChanged="TabControl_SelectionChanged">            
    <TabItem Style="{DynamicResource TabItemStyle}" Name="tabCustomers" >
        <TabItem.Header>
            <StackPanel Orientation="Horizontal">
                <Image Source="/Resources/Images/TabMenuIcons/Folder.png" Stretch="None" Margin="5,0,5,0"/>
                <TextBlock Foreground="White">CUSTOMERS</TextBlock>
            </StackPanel>
        </TabItem.Header>

    </TabItem> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:26:10.753

您可能希望将您的保证金更改为

```
 <ControlTemplate TargetType="{x:Type TabItem}">
        <Grid>
            <Border Name="Border" Margin="5,0,0,0" Background="Red" CornerRadius="7,7,0,0" >
                <ContentPresenter x:Name="ContentSite" VerticalAlignment="Center" HorizontalAlignment="Center" ContentSource="Header" Margin="12,2,12,2"
                    RecognizesAccessKey="True"/>
            </Border>
        </Grid> 
```

在你的 TabItem ControlTemplate

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:12:18.197

尝试将 Horizo​​ntalAlignment 更改为“Center”而不是“Left”

```
<Style TargetType="{x:Type TabItem}" x:Key="TabItemStyle">
        <Setter Property="HorizontalAlignment" Value="Center" /> 
```

# javascript - 使用 Ajax Success Handler 返回 JSON 对象

> ID：15905139
> 
> 赞同：0
> 
> 时间：2013-04-09T14:48:12.167
> 
> 标签：javascript, jquery, ajax, json

我正在使用 Ajax 命令从本地服务器查询数据，我需要通过成功处理程序返回一个 JSON 对象。

我的 Ajax 命令如下所示：

```
var json = $.ajax({
    url: 'http://localhost:9200/wcs/routes/_search',
    type: 'POST',
    data: JSON.stringify({
        "query": {
            "match_all": {}
        }
    }),
    dataType: 'json',
    async: false
}); 
```

我想在我已经分配的变量中返回 JSON 文档：`json`

我可以在命令中做这样的事情吗？（我知道这不是正确的代码）：

```
success: return(json);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:53:12.050

你很亲近，

```
var json;
$.ajax({
    url: 'http://localhost:9200/wcs/routes/_search',
    type: 'POST',
    data :
        JSON.stringify(
            {
                "query" : { "match_all" : {} }
        }),
    dataType : 'json',
    async: false,
    success: function(data){
        json = data;
    }
})
console.log(json); 
```

但这`async: false`是一个坏主意，所以我建议在回调中使用 json 。

```
$.ajax({
    url: 'http://localhost:9200/wcs/routes/_search',
    type: 'POST',
    data :
        JSON.stringify(
            {
                "query" : { "match_all" : {} }
        }),
    dataType : 'json',
    //async: false,
    success: function(data){
        console.log(data);
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:52:38.453

`Success`请求成功时调用的函数。

你可以这样做 ：

```
var json:
....
....

success: function(data){
       json = data;
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:54:08.190

```
 var arr = new Array();
 success: function (data) {
    $.map(data, function (item) {
          arr.push({
              prop_1: item.prop_1,
              prop_2: item.prop_2,
              prop_3: item.prop_3
             });
           });
      } 
```

您可以重命名 prop_1、prop_2 与您的代码隐藏

# php - Graph api - 发布图片时的个人故事

> ID：15905142
> 
> 赞同：0
> 
> 时间：2013-04-09T14:48:18.507
> 
> 标签：php, facebook-graph-api

我正在使用此代码将图片发布到 FB 墙上。但是当我发布 4 张或更多图片时，故事会一起折叠并显示“（页面名称）已将 4 张照片添加到相册......”......有没有办法为每张图片实现单独的故事？

```
$postdata = http_build_query(
  array(
    'access_token' => $token,
    'message' => $mes,
    'url' => $img
  )
);
$opts = array('http' =>
  array(
    'method'  => 'POST',
    'header'  => 'Content-type: application/x-www-form-urlencoded',
    'content' => $postdata
  )
);
$context  = stream_context_create($opts);
$result = file_get_contents('https://graph.facebook.com/'.$album_id.'/photos', false, $context); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:58:26.520

所以我通过上传没有故事的照片来解决它，然后分享它。您可以根据需要分享任意数量的图片，但它将保持为单个帖子。

```
$postdata = http_build_query(
  array(
    'access_token' => $token,
    'message' => $mes,
    'url' => $img,
    'no_story' => '1'
  )
);
$opts = array('http' =>
  array(
    'method'  => 'POST',
    'header'  => 'Content-type: application/x-www-form-urlencoded',
    'content' => $postdata
  )
);
$context  = stream_context_create($opts);
$result = json_decode(file_get_contents('https://graph.facebook.com/'.$album_id.'/photos', false, $context));

$postdata = http_build_query(
  array(
    'access_token' => $token,
    'is_hidden' => 'true'
  )
);
$opts = array('http' =>
  array(
    'method'  => 'POST',
    'header'  => 'Content-type: application/x-www-form-urlencoded',
    'content' => $postdata
  )
);
$context  = stream_context_create($opts);
$result2 = file_get_contents('https://graph.facebook.com/'.$result->id, false, $context);

$postdata = http_build_query(
  array(
    'access_token' => $token,
    'link' => 'http://www.facebook.com/photo.php?fbid='.$result->id
  )
);
$opts = array('http' =>
  array(
    'method'  => 'POST',
    'header'  => 'Content-type: application/x-www-form-urlencoded',
    'content' => $postdata
  )
);
$context  = stream_context_create($opts);
$result3 = file_get_contents('https://graph.facebook.com/'.$id.'/feed', false, $context); 
```

# ios - 从一个 XCode IOS 项目生成多个应用程序的命令行工具

> ID：15905144
> 
> 赞同：0
> 
> 时间：2013-04-09T14:48:24.077
> 
> 标签：ios, xcode, command, targets

我正在开发一个 IOS 项目，我们需要从同一个源项目生成不同的品牌或定制应用程序。这种定制由不同的图像、字符串、应用程序名称和（可能）不同的开发人员 ID 组成。

根据我在网上找到的信息，最好的方法是向项目中添加目标，这作为手动任务似乎非常简单。但是，我的意图是能够使用一些命令行工具或脚本添加目标，以便可以自动化生成定制或品牌应用程序的过程。

例如，假设我想为某个公司生成一个品牌应用程序，其中必须包含他们的徽标、品牌名称等。执行此操作的所需方法是创建一个配置文件，其中指定了自定义参数 (applogo= 'logo.jpg'; appname='brandApp'; ...)，然后调用一个将此类配置文件作为参数的脚本，并且（在我仍然不知道的一些步骤之后）将编译项目，生成品牌应用程序。这个想法是经常执行这个品牌任务，所以输入应用程序参数将是这个过程中唯一的手动步骤。

有什么办法可以做到这一点吗？据我所知，没有办法从命令行向 XCode 项目添加/编辑目标，但也许我错了。

而且，有没有解决这个问题的经典方法？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:26:46.947

查看项目设置->构建阶段，您可以在构建项目之前/之后运行脚本。您还可以为不同的徽标/应用名称创建各种 XCode 目标。这是目前最“优雅”且唯一的方式。

我还在为具有不同徽标/名称的不同发布者构建相同的应用程序。Apple DID 在较低版本的 XCode 中提供了一些在命令行中构建目标的方法，但它不适用于 XCode 4 以来的较新版本（已经很久了，希望我的记忆是正确的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:15:36.053

基本上，我不会深入细节，你需要创建一个新的**Target**。将您的品牌图像和新的本地化文件添加到**Target Membership**（按 CMD-Alt-1），您将看到目标成员资格。

这样，只有属于目标成员的文件才会为每个目标编译。

# clojure - “require”中的括号和括号有什么区别？

> ID：15905148
> 
> 赞同：16
> 
> 时间：2013-04-09T14:48:26.873
> 
> 标签：clojure

我有点困惑的一件事是clojure require 语句中括号和括号之间的区别。我想知道是否有人可以向我解释这一点。例如，这些做同样的事情：

```
(ns sample.core
  (:gen-class)
  (:require clojure.set clojure.string)) 
```

和

```
 (ns sample.core
  (:gen-class)
  (:require [clojure.set] 
            [clojure.string])) 
```

但是，这适用于 repl

```
(require 'clojure.string 'clojure.test) 
```

但在 clj 文件中失败

```
(ns sample.core
  (:gen-class)
  (:require 'clojure.string 'clojure.test))
...
Exception in thread "main" java.lang.Exception: lib names inside prefix lists must not contain periods
    at clojure.core$load_lib.doInvoke(core.clj:5359)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    .... 
```

而这些似乎做同样的事情：

```
(ns sample.core
  (:gen-class)
  (require clojure.set clojure.string))

(ns sample.core
  (:gen-class)
  (:require clojure.set clojure.string)) 
```

一般来说，我不明白这一点。我了解使用、导入和要求。但我不明白“：”以及 [] 和 '() 等内容之间的区别。谁能以直观的方式阐明这个主题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T16:50:14.353

这里的问题很微妙，如果不先了解一下宏，可能很难理解。

宏操作语法的方式与函数操作值的方式相同。事实上，宏只是带有一个钩子的函数，它可以在编译时对它们进行评估。它们传递您在源代码中看到的数据文字，并自上而下进行评估。让我们创建一个具有相同主体的函数和一个宏，这样您就可以看到区别：

```
(defmacro print-args-m [& args]
  (print "Your args:")
  (prn args))

(defn print-args-f [& args]
  (print "Your args:")
  (prn args))

(print-args-m (+ 1 2) (str "hello" " sir!"))

; Your args: ((+ 1 2) (str "hello" " sir!"))

(print-args-f (+ 1 2) (str "hello" " sir!"))

; Your args: (3 "hello sir!") 
```

宏被它们的返回值替换。您可以检查此过程`macroexpand`

```
(defmacro defmap [sym & args]
  `(def ~sym (hash-map ~@args))) ; I won't explain these crazy symbols here.
                                 ; There are plenty of good tutorials around

(macroexpand
  '(defmap people
     "Steve" {:age 53, :gender :male}
     "Agnes" {:age 7,  :gender :female}))

;  (def people
;    (clojure.core/hash-map
;      "Steve" {:age 53, :gender :male}
;      "Agnes" {:age 7, :gender :female})) 
```

在这一点上，我应该解释一下`'`导致下面的表格是`quote`d。这意味着编译器将读取表单，但不会执行它或尝试解析符号等。ie`'conj`计算为一个符号，而`conj`计算为一个函数。`(eval 'conj)`等于`(eval (quote conj))`等于`conj`。

考虑到这一点，要知道你不能将符号解析为命名空间，除非它以某种方式神奇地导入到你的命名空间中。这就是`require`函数的作用。它接受符号并找到它们对应的命名空间，使它们在当前命名空间中可用。

让我们看看`ns`宏扩展为：

```
(macroexpand
  '(ns sample.core
    (:require clojure.set clojure.string)))

;  (do
;    (clojure.core/in-ns 'sample.core)
;    (clojure.core/with-loading-context
;      (clojure.core/refer 'clojure.core)
;      (clojure.core/require 'clojure.set 'clojure.string))) 
```

看看它是如何引用符号`clojure.set`并`clojure.string`为我们提供的？多么方便！但是，当您使用`require`而不是时，有什么关系`:require`？

```
(macroexpand
 '(ns sample.core
   (require clojure.set clojure.string)))

;  (do
;    (clojure.core/in-ns 'sample.core)
;    (clojure.core/with-loading-context
;      (clojure.core/refer 'clojure.core)
;      (clojure.core/require 'clojure.set 'clojure.string))) 
```

看起来写`ns`宏的人很好，可以让我们两种方式都做，因为这个结果和以前完全一样。尼托！

*编辑： tvachon 仅使用它是正确的，`:require`因为它是唯一官方支持的形式*

但是括号有什么用呢？

```
(macroexpand
  '(ns sample.core
    (:require [clojure.set] 
              [clojure.string])))

; (do
;  (clojure.core/in-ns 'sample.core)
;  (clojure.core/with-loading-context
;   (clojure.core/refer 'clojure.core)
;   (clojure.core/require '[clojure.set] '[clojure.string]))) 
```

结果他们也被引用了，就像我们在编写独立调用时所做的那样`require`。

事实证明，`ns`它并不关心我们是否给它列表（parens）或向量（括号）来使用它。它只是将参数视为事物的序列。例如，这有效：

```
(ns sample.core
  [:gen-class]
  [:require [clojure.set]
            [clojure.string]]) 
```

`require`，正如 amalloy 在评论中指出的那样，向量和列表具有不同的语义，所以不要混淆它们！

最后，为什么以下工作不起作用？

```
(ns sample.core
  (:require 'clojure.string 'clojure.test)) 
```

好吧，既然`ns`我们为我们引用了这些符号，那么这些符号被引用了两次，这在语义上与只被引用一次不同，也是纯粹的疯狂。

```
conj    ; => #<core$conj clojure.core$conj@d62a05c>
'conj   ; => conj 
''conj  ; => (quote conj)
'''conj ; => (quote (quote conj)) 
```

我希望这会有所帮助，我绝对建议学习如何编写宏。他们超级有趣。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T16:03:58.963

TL;博士：

```
(ns sample.core
  (:gen-class)
  (:require clojure.set clojure.string))

```

和

```
(ns sample.core
  (:gen-class)
  (:需要 [clojure.set]
            [clojure.string]))

```

`require`都很好——第二个版本只是最灵活的语法支持的一个特例。这也可以写成：

```
(ns sample.core
  (:gen-class)
  (:require [clojure 设置字符串]))

```

一般来说，最后一种形式是满足这一特殊要求的最佳实践。

* * *

`(require 'clojure.string 'clojure.test)`

也适用于 clj 文件 - 试试这个：

```
(ns sample.core
  (:gen-class))
（需要'clojure.string'clojure.test）

```

这里的困惑是，在您损坏的示例中，您试图在宏的`:require`子句中使用“引用符号”。`ns`这可能不是最直观的解释，但它是如何分解的：

有两种方法可以要求其他模块，`require`以及`ns`.

`require`是一个接受引用形式列表的函数（需要“引用”以避免 clojure 查找您传递给`require`所有其他符号的方式的符号）。

`ns`是一个支持`:require`选项的宏。它获取此选项的值，并在幕后将其转换为对`require`函数的调用。您不需要引用`:require`选项的值，因为`ns`它是一个宏，因此能够引用符号本身。

这可能还不清楚，但我建议转向 Clojure 文档进行澄清——一旦你完全理解了所有这些，你就会对 Clojure 有更好的理解。

在 Clojure 源文件中，您应该始终使用一个`ns`子句来要求库 -`require`应该只在 REPL 中使用。

* * *

在您的最后两个示例中，您是正确的

```
(ns sample.core
  (:gen-class)
  （需要 clojure.set clojure.string））

```

有效，但这是一个意外 - 可能是因为

```
（名称：要求）
=> “要求”

（名称'要求）
=> “要求”

```

记录的语法是

```
(ns sample.core
  (:gen-class)
  (:require clojure.set clojure.string))

```

并且是唯一保证将来不会损坏的。

# javascript - 访问包含来自服务器的文本值的元素内的值 标签

> ID：15905149
> 
> 赞同：0
> 
> 时间：2013-04-09T14:48:27.087
> 
> 标签：javascript, html

检查元素表示：

```
<tr id = "">
<td>
<div> XYZ1 </div>
</td>
<td>
<div> XYZ2 </div>
</td>
<td>
<div> XYZ3 </div>
</td> 
```

我必须在控制台中访问 XYZ 的值才能进一步继续我的任务。

我试过这个：

```
console.log($(td).parent().closest('div').val()); 
```

和

```
console.log( $(td).find('div').val(); 
```

但它返回“未定义”。

还有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:50:02.767

`val()`正在寻找元素值（例如输入字段）。您实际上是在寻找元素内的文本并且应该使用`text()`

尝试：

```
console.log($(td).next('div').text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:51:06.933

`.val()`永远不会在这里返回有效值。使用`.text()`或`.html()`;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:51:34.307

深入了解一下使用 jquery 进行选择，尤其是 .next() 和 .find() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:52:21.567

试试这个，那应该记录你的 div 元素：`console.log($('td>div'));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:53:29.343

你可以得到一个包含所有值的数组，如下所示：

```
var values = $('td > div').map(function() { return $(this).text(); }).get();
console.log(values); // ["XYZ1", "XYZ2", "XYZ3"] 
```

# jquery - jQuery-UI 自动完成的自定义滚动条

> ID：15905153
> 
> 赞同：2
> 
> 时间：2013-04-09T14:48:35.370
> 
> 标签：jquery, jquery-ui

我一直在尝试向 jQuery-ui Autocomplete 小部件添加自定义滚动条。基于[这个问题](https://stackoverflow.com/questions/5327892/autocomplete-jquery-ui-plugin-with-custom-scrollbars)，我尝试使用 jScrollpane（虽然我更喜欢更轻的解决方案，例如 sbscroller 8k 或 tinyscrollbar 3k。）

它对我来说不适用于当前版本的脚本。它似乎有效，但是：

A) 在第一次尝试时，键入 Z，列表不会过滤并且滚动显示所有项目。B) 如果您退格并键入一个新字母，滚动条就会消失。

```
$("#countries").autocomplete({
    source: countryList,
    open: function(event, ui) {
          $('.ui-autocomplete').jScrollPane();
    },
    close: function(event, ui) {
          $('.ui-autocomplete').jScrollPaneRemove();
    }
}); 
```

小提琴： http: [//jsfiddle.net/sJL89/2/](http://jsfiddle.net/sJL89/2/) 我在小提琴中包含了一个滚动测试。

# javascript - 使用javascript的IE10中window.opener中的DOM树限制？

> ID：15905159
> 
> 赞同：3
> 
> 时间：2013-04-09T14:48:45.280
> 
> 标签：javascript, dom, internet-explorer-10, window.opener

好的，所以我下载了 IE10 并立即遇到了一些问题......

想象一下下面的情况。我们有一个包含 HTML 的父窗口：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function doAction()
            {
                var win = window.open('child.htm', '', '');
            }
        </script>
    </head>
    <body>
        <a href="#" onclick="doAction();">Click here to open window</a>
        <div id="obj"><span>A new element should appear: </span></div>
    </body>
</html> 
```

如果单击该链接，它将打开一个包含 HTML 的窗口：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
        window.onload = function()
        {
            var span = document.createElement('span');
            span.innerHTML = 'it works!';
            try
            {
                window.opener.document.getElementById('obj').appendChild(span);
            }
            catch(e)
            {
                alert('Exception was thrown: ' + e);
            }
        };
        </script>
    </head>
    <body>
    </body>
</html> 
```

我已经在很多浏览器（FF、Chrome、IE 等）中对此进行了测试。文本“它有效”出现，就像它应该的那样。除了 IE10，它会发出警报：

```
'Exception was thrown: HierarchyRequestError' 
```

我的问题是，解决这个问题的最佳方法是什么？

我当然可以将孩子传递给 window.opener 中的函数，但这也不起作用。好像我只能将一个孩子添加到创建它的窗口中。正确的？

我也想知道为什么这已经改变了，很难找到关于这个异常的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:36:31.887

### 到底是怎么回事？

Internet Explorer 10 似乎确实采取了额外的安全措施。至于`DOMException.HIERARCHY_REQUEST_ERR`错误，这与试图将对象放置在浏览器认为不属于它的某个地方有关。例如，以下代码也会引发此异常：

```
document.appendChild( document.createElement( "form" ) ); 
```

在这种情况下，我们不能将 a 附加`form`到`document`，因此会出现错误。在您的特定情况下，将一个窗口中生成的对象添加到另一个窗口似乎存在问题。

[DOM 异常错误代码](http://msdn.microsoft.com/en-us/library/ie/gg592979%28v=vs.85%29.aspx)参考将此错误描述为：

> 无法在请求的位置插入节点。从 Internet Explorer 10 开始，`HierarchyRequestError`改为返回错误代码字符串。

### 你如何绕过它？

您实际上已经确定了要进行的适当修改；从父窗口的上下文创建元素。为了避免冗长的代码行，您可以`document`在整个代码中创建对父级的引用：

```
var _doc = window.opener.document;

function addSpan () {
    _doc.body.appendChild( _doc.createElement("span") );
} 
```

这可以防止代码随着`window.opener.document`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:59:27.283

我目前最简单的解决方案是替换：

```
var span = document.createElement('span'); 
```

和：

```
var span = window.opener.document.createElement('span'); 
```

但是，当然，这使我的答案的最后一部分仍未得到答复。

# html - Google Chrome 链接问题（括号中的链接后显示的 href 值）

> ID：15905162
> 
> 赞同：0
> 
> 时间：2013-04-09T14:48:49.673
> 
> 标签：html, google-chrome, hyperlink, href

有没有人遇到过这个问题，在 chrome 中（在线，但不是本地）`<a>`在元素文本之后显示元素的 href 属性？

```
<a href="about.html">About</a> 
```

在 chrome 中变成 About (about.html)。

任何其他浏览器都做得很好。如果我只链接到哈希 - 链接那么没有问题....

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:34:34.237

我有同样的问题：使用从 initializr 生成的样板模板

底部的样式，在打印媒体查询部分，覆盖了其他媒体查询：隐藏背景图像并在链接文本值本身之后添加 href 属性......

希望它会有所帮助

# iphone - IOS：在另一个控制器中调用方法

> ID：15905174
> 
> 赞同：1
> 
> 时间：2013-04-09T14:49:07.133
> 
> 标签：iphone, ios, uiviewcontroller

我有两个独立的类 FirstController 和 SecondController，用故事板创建。问题是我想从 FirstController 调用 SecondController.m 中的方法。例如。：

**第二控制器.m**

```
-(void)myMethod:(CGPoint)pt {...} // It's important that there is a paramterer 
```

**第一控制器.m**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    // Call myMethod
 } 
```

如何以最简单的方式做到这一点？

**更新：** 我想使用来自“aBilal17”链接的通知：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"updateLeftTable"
                                              object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(checkRes:)     name:@"updateLeftTable" object:nil]; 
```

(..)

```
-(void)checkRes:(NSNotification *)notification
{
   if ([[notification name] isEqualToString:@"updateLeftTable"])
   {
      [myMethod ?
    }
} 
```

在其他班级：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"updateLeftTable" object:self]; 
```

但是现在，如何使用这个来传递我的 CGPoint 参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:55:01.983

您可以使用 NSNotification 或自定义委托。

在以下链接上检查我的答案。

[不能使用其他类的 reloadData](https://stackoverflow.com/questions/14979308/cant-use-reloaddata-from-another-class/14979404#14979404)

这两个选项都可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:34:02.393

要使用 NSNotificationCenter 传递 CGPoint，您需要使用 NSValue：

```
NSValue *pointValue = [NSValue valueWithCGPoint:myPoint];
[[NSNotificationCenter defaultCenter] postNotificationName:@"updateLeftTable" object:pointValue]; 
```

在您的`checkRes:`方法中，您可以使用传递的 NSNotification 的 object 属性获取点：

```
NSValue *pointValue = (NSValue *)[notification object];
CGPoint myPoint = [pointValue CGPointValue]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T14:53:21.360

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    // Call myMethod
    SecondController *controller = [[SecondController alloc] init];
    [controller myMethod:pt];
    [self.navigationController pushViewController:controller animated:YES];
    [controller release];
 } 
```

仅当`-release`您不使用 ARC 时才需要调用。

# php - 通过两个相同的 foreach 循环传递变量

> ID：15905175
> 
> 赞同：0
> 
> 时间：2013-04-09T14:49:09.477
> 
> 标签：php, foreach

我的文档开头有一个 foreach 循环，它从数组中提取数据并设置一些变量以供以后使用。假设这个例子`$foo`中有**10 个数组**，其中的键为`ID`和`Name`。

```
foreach($foo as $bar) {
    $id = $bar['id'];
    $name = $bar['name'];
} 
```

然后，我想做的是，在我的文档中，我实际上想为每个显示这些结果`$bar`，我想这样做。

```
foreach($foo as $bar) {
    // display all ids
    echo $id;
    // display all names
    echo $name;
} 
```

但我遇到了一个问题。当尝试在第二个 foreach 循环中显示 ID 和名称时，它返回 10 个 ID 案例，但 ID 都是相同的，并且是`$foo`.

```
10, 10, 10, 10, 10, 10, 10, 10, 10, 10 
```

如果我在第一个 foreach 循环中回显`$id`and ，我会看到所有 10 个不同的名称和 ID。`$name`

```
1,2,3,4,5,6,7,8,9,10 
```

我不能在同一个数组上调用第二个 foreach 循环吗？如果不将所有内容都放入单个 foreach 循环中，我将如何做呢？我想让它保持井井有条，并将变量放在顶部附近，同时在文档中稍后输出所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:51:24.627

尽管为此目的您不需要两个循环，但假设您这样做，那么您的第二个循环应该看起来像

```
foreach($foo as $bar) {
$id = $bar['id'];
$name = $bar['name'];
// display all ids
echo $id;
// display all names
echo $name;
} 
```

目前，每次迭代都会为 id 和 name 变量分配新值，因此在循环结束后，您会看到最后一个值。

如果您分别需要这两个循环，也只是为了争论，您可以在第一个循环中创建一个值数组并在第二个循环中使用它。但这又是浪费资源，复制一切

```
$data=array();
foreach($foo as $bar) {
    $data[]["id"] = $bar['id'];
    $data[]["name"] = $bar['name'];
} 
```

进而

```
foreach($data as $bar) {
$id = $bar['id'];
$name = $bar['name'];

echo $id;
echo $name;
} 
```

但这完全没有必要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:56:00.790

你的意思是你想显示所有的ID，然后是所有的名字？如果是这样，您可以使用以下示例。

第一个循环是。

```
foreach ($foo as $bar) {
    $ids[] = $bar['id'];
    $names[] = $bar['name'];
} 
```

然后你可以使用第二个循环而不是第二个循环。

```
echo explode($ids,",");
echo explode($names,","); 
```

# android - 是否需要在 Android 上的 OpenGL 程序中调用 glViewport？

> ID：15905181
> 
> 赞同：1
> 
> 时间：2013-04-09T14:49:17.933
> 
> 标签：android, opengl-es

在大多数 Android OpenGL 示例中，我看到人们在 onSurfaceChanged 中调用 glViewport。但是，我只是注意到，如果我将其注释掉，我的程序仍然表现相同。所以有必要调用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:12:51.463

当您的 gl 视图尺寸被修改时，有必要调用处理`glViewport`程序。`onSurfaceChanged`通常是在设备旋转并交换视图的宽度和高度时。

如果`width = height`未旋转或视图，则无需调用 to `glViewport`。

默认情况下`Activity`将在旋转后重新创建。为避免这种情况，您需要指定您的活动[本身正在处理旋转](http://developer.android.com/guide/topics/manifest/activity-element.html#config)。您需要将这些配置选项添加到您的`AndroidManifest.xml`：

```
<activity android:name="Activity"
        android:configChanges="screenSize|orientation"> 
```

完成此操作后，您的活动将保留您的 OpenGL 上下文。

# java - 在 Java 中从多个字符串构建标记列表的有效方法

> ID：15905182
> 
> 赞同：0
> 
> 时间：2013-04-09T14:49:20.027
> 
> 标签：java, string, guava, tokenize, apache-commons

我正在寻找一种有效的方法来获取从多个字符串中提取的字符串标记列表（例如，使用空格分隔符）。

例子：

```
String s1 = "My mom cook everyday";
String s2 = "I eat everyday";
String s3 = "Am I fat?";  
LinkedList<String> tokens = new LinkedList<String>();   
//any code to efficiently get the tokens

//final result is tokens  make of a list of the following tokens:
//"My", "mom", "cook", "everyday", "I", "eat", "everyday", "Am", "I", "fat?". 
```

现在

1.  我不确定这`LinkedList`是要使用的最有效的集合类（Apache Commons，Guava，他们可以帮忙吗？）！
2.  我打算`StringUtils`从 Apache Commons 使用，但该`split`方法返回一个数组！因此，我应该使用 for 循环从 split 返回的字符串对象数组中提取字符串。那效率高吗：我不知道，`split`创建一个数组！
3.  `Splitter`我从番石榴那里读到过，但[这篇文章](http://tomjefferys.blogspot.it/2012/02/guava-splitter-vs-stringutils.html)指出这`StringUtils`在实践中更好。
4.  `Scanner`从`Java.util`. _ 它似乎没有分配任何额外的数据结构。不是吗？

请绘制最有效的 Java 解决方案，即使使用其他广泛使用的库，如*Guava*和*Apache Commons*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:24:57.983

```
for (String str : Arrays.asList(s1, s2, s3)) {
  Iterables.addAll(tokens, Splitter.on(' ').split(str));
} 
```

将是我会这样做的方式。也就是说，几乎`ArrayList`适用`LinkedList`于所有用例；如果没有进一步的数据，我们真的无法判断您是否处于`LinkedList`更可取的罕见情况之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T14:51:25.200

如果您有小字符串并且性能不是问题，您可以像这样将[split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String))与[addAll](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#addAll(java.util.Collection))结合起来：

```
String s1 = "My mom cook everyday";
String s2 = "I eat everyday";
String s3 = "Am I fat?";  
List<String> tokens = new ArrayList<String>();  

tokens.addAll(Arrays.asList(s1.split("\\s+")));
tokens.addAll(Arrays.asList(s2.split("\\s+")));
tokens.addAll(Arrays.asList(s3.split("\\s+")));

System.out.println(tokens); 
```

但是，如果性能**是**一个问题，这里有一个替代解决方案：

由于没有定义如何获取这些长文本，我假设它们以`InputStream`. 看看这个方法是否足够满足您的需求：

```
public List<String> readTokens(InputStream is) throws IOException{
    Reader reader = new InputStreamReader(is);
    List<String> tokens = new ArrayList<String>();
    BufferedReader bufferedReader = new BufferedReader(reader);
    String line = null;
    while((line = bufferedReader.readLine()) != null){
        String[] lineTokens = StringUtils.split(line, " "); 
        for(int i = 0 ; i < lineTokens.length ; i++){
            tokens.add(lineTokens[i]);
        }
    }
    return tokens;
} 
```

至于你关于`ArrayList`vs`LinkedList`最后插入的声明，也许你应该阅读[这个](https://stackoverflow.com/a/5346098/1316000)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:58:47.053

要不就`Arrays.asList((s1 + " " + s2 + " " + s3).split("\\s+"))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:59:14.967

首先使用分隔符连接字符串（请参阅[使用分隔符连接字符串](https://stackoverflow.com/questions/581448/join-a-string-using-delimiters)）。然后：

```
 LinkedList<String> tokens = new LinkedList<String>();
 StringTokenizer st = new StringTokenizer(yourstr); // " " as a default delimiter
 while (st.hasMoreTokens()) {
     tokens.add(st.nextToken());
 } 
```

您是否正在寻找高效或高性能的解决方案（即您的约束/参考性能是什么）？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T15:42:43.540

```
 import java.util.ArrayList;
     import java.util.Collections;

    public class stringintotoken {
String s="my name is tarun bharti";
ArrayList <String> words=new ArrayList<String>();
public static void main(String[] args)
{
    stringintotoken st=new stringintotoken();
    st.go();
}
public void go()
{
    wordlist();
    System.out.println(words);
    Collections.sort(words);
    System.out.println(words);

}
public void wordlist()
{
    String[] tokens=s.split(" ");
    for(int i=0;i<tokens.length;i++)
    {
    words.add(tokens[i]);
    }
} 
```

}

# jquery - 应该使用什么策略来最小化页面初始化抖动？

> ID：15905185
> 
> 赞同：2
> 
> 时间：2013-04-09T14:49:26.567
> 
> 标签：jquery, html

当使用诸如 jQuery/UI 之类的框架（例如按钮小部件）时，页面将在页面加载时处理布局时抖动。我想知道减少这种情况的最佳策略是什么？

我已经将`body`标签设置为`display: none`然后`$(function() { ${'body').show(); })`哪个有效，但我不得不想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:12:59.837

最无缝的解决方案是为元素提供 jquery ui 在初始化后将提供的类/结构。

以 jQuery UI 按钮为例，之前是这样的：

```
<input type="submit" value="A submit button" /> 
```

这是之后：

```
<input type="submit" value="A submit button" class="ui-button ui-widget ui-state-default ui-corner-all" role="button" aria-disabled="false"> 
```

如果您在实际 html 中使用 after 而不是 before，则当您使用 jQuery UI 初始化该按钮时，该按钮将不再发生抖动（也称为 FOUC），因为它已经具有类。

# php - MySQL 行插入两次

> ID：15905188
> 
> 赞同：0
> 
> 时间：2013-04-09T14:49:44.433
> 
> 标签：php, mysql, insert, duplicates

我在 MySQL 似乎插入一行两次时遇到了一些困难。- 基本上，我需要保存从远程数据源检索到的一些信息的本地副本。因此，当用户查看来自远程源的信息时，我会检查是否有需要存储的信息的本地副本。如果我没有本地副本，我会添加该信息的记录。- 我遇到的问题是，每插入 20-30 个插入，我就会得到一个重复。我使用 NOW 函数跟踪插入和更新时间，两条记录似乎同时插入。这是我的 PHP 代码，任何帮助将不胜感激，我很难过：

```
// We have the location, see if we have a local record for that location
        $idLocation = locationID_for_factualID($factual_id);
        if(!$idLocation) {
            // We do not have local information about the location, add it
            $mysqli = open_mysql_connection();
            $stmt = $mysqli->prepare("INSERT INTO Location (
                                                    factual_id,
                                                    dateAdded, 
                                                    dateModified, 
                                                    locationName,
                                                    latitude, 
                                                    longitude) 
                                                VALUES (?, NOW(), NOW(), ?, ?, ?)");
            if($stmt) {
                $stmt->bind_param("ssdd",$factual_id, $location["name"], doubleval($location["latitude"]), doubleval($location["longitude"]));
                $stmt->execute();
                // Check if the location was added
                if($stmt->affected_rows == 1){
                    $idLocation = locationID_for_factualID($factual_id);
                }
                $stmt->close();
                $mysqli->close();
            }
            else {
                return FALSE;
            }
        } 
```

这里有两行似乎是背靠背插入的：

```
idLocation | factual_id | dateAdded | dateModified | locationName | latitude | longitude
520 | 5f79360f-330f-4035-ae75-e872ea14cfdd | 2013-04-09 14:36:55 | 2013-04-09 14:36:55 | Quiznos | 40.1802 | -74.0258
521 | 5f79360f-330f-4035-ae75-e872ea14cfdd | 2013-04-09 14:36:55 | 2013-04-09 14:36:55 | Quiznos | 40.1802 | -74.0258 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:08:10.623

虽然我没有看到你的实现`locationID_for_factualID`，但我很确定它正在做类似的事情`SELECT idLocation ... WHERE factual_id = '$factual_id'`（不要忘记使用查询参数！）。

我可以想象你有一个竞争条件，即两个请求几乎同时使用相同的输入数据调用相同的脚本，然后调用函数`locationID_for_factualID`并且都找到了`$idLocation == false`。然后，两个请求都执行`INSERT`，你最终得到一个重复的记录。

此问题的标准解决方案是使用事务。看看[这里](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)是如何做到的。重要的部分是用相同的事务包装AND 的`SELECT`内部，即 between and 。您可能必须更改 的实现以使用与以下相同的数据库连接。`locationID_for_factualID``INSERT``START TRANSACTION``COMMIT``locationID_for_factualID``INSERT`

顺便说一句，您可能希望`UNIQUE INDEX`在 factual_id 列上创建一个。这将防止相同的 factual_id 发生多次，`INSERT`如果它尝试插入重复则让语句失败。

# sql-server - 在 SQL Server 中将字符串校验和哈希转换为十六进制

> ID：15905189
> 
> 赞同：0
> 
> 时间：2013-04-09T14:49:44.953
> 
> 标签：sql-server, string, cryptography, hex

我在 SQL Server 表中有一个字段，其中包含校验和的字符串值。校验和是一个文件，是使用 vb.net 的 SHA1Cryptographic 服务计算的。在计算哈希后，我使用了 Convert.TobBase64String。很久以后，在对 >300,000 个文件执行此操作后，我决定我希望我的哈希是哈希的十六进制值的字符串（原因是因为我现在正在 Unix 机器和我使用的程序上对文件进行哈希处理以十六进制输出）。所以我想将所有这些摘要转换为十六进制。有什么方法可以将字符串直接转换为 SQL Server 中的十六进制表示，而无需遍历并重新散列所有文件？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:52:22.533

您应该使用 CLR 通过 VB.NEt 程序运行这些哈希，并返回基本 HEX 值： [如何：创建和运行 CLR SQL Server 用户定义函数](http://msdn.microsoft.com/en-us/library/w2kae45k%28v=vs.80%29.aspx)

# c# - 寻呼机的页数

> ID：15905193
> 
> 赞同：0
> 
> 时间：2013-04-09T14:49:53.757
> 
> 标签：c#

我有 X 个项目，如果我每页可以放 5 个项目，我想计算需要多少页来分页这些项目。

这就是我所拥有的：

```
int TotalPages = (int)(Math.Ceiling(TheItemCount / 5)); 
```

该行带有红色下划线，错误表示存在

> Math.Ceiling（双精度）和 Math.Ceiling（十进制）之间的模棱两可的调用

我知道这应该很简单，但我没有得到我想要的结果。我需要对代码进行哪些更改才能使其正常工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:51:18.473

问题是编译器无法确定您想要哪个重载，所以只需强制它使用其中一个：

```
int TotalPages = (int)(Math.Ceiling((double)TheItemCount / 5.0)); 
```

另一种方法是：

```
int TotalPages = (int)(Math.Ceiling(Convert.ToDouble(TheItemCount / 5))); 
```

# xaml - 条件文本格式 XAML WP8

> ID：15905195
> 
> 赞同：3
> 
> 时间：2013-04-09T14:49:59.933
> 
> 标签：xaml, windows-phone-8, formatting, conditional

是否可以在 XAML 中设置某种形式的文本块控件的条件格式，以便可以根据文本更改文本的颜色（例如，Text =“good”然后设置为绿色，Text =“bad”然后设置文本变红。）

我尝试了一些示例，但它们似乎不起作用，大概是因为 WP8 的工作方式不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:53:15.217

一种简单的方法是在视图中使用`DataTrigger`s 如下：

**命名空间：**

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions" 
```

**控制：**

```
<TextBlock x:Name="TheText" Text="{Binding Blah}"/>
    <i:Interaction.Triggers>
      <ei:DataTrigger Value="Red"
                      Binding="{Binding Text, ElementName=TheText}">
          <ei:ChangePropertyAction PropertyName="Foreground"
                                   Value="Red" />
      </ei:DataTrigger>
      <ei:DataTrigger Value="Blue"
                      Binding="{Binding Text, ElementName=TheText}">
          <ei:ChangePropertyAction PropertyName="Foreground"
                                   Value="Blue" />
       </ei:DataTrigger>
    </i:Interaction.Triggers>
  </TextBlock> 
```

或者您可以在代码中连接条件。希望这可以帮助。

# c# - 强类型视图中的错误消息 - 什么是“字典”？

> ID：15905197
> 
> 赞同：0
> 
> 时间：2013-04-09T14:50:10.897
> 
> 标签：c#, asp.net-mvc-3, view, model

以下是错误类型传递到强类型视图时的错误消息示例：

```
The model item passed into the dictionary is of type 'foo', but this dictionary requires a model item of type 'bar'. 
```

此错误表示**“此词典”**需要不同的模型。我的问题是，为什么是“字典”？如果错误消息说*“此类需要'bar'类型的模型项”*对我来说更有意义。

错误消息指的是什么字典？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:51:36.237

`Dictionary`是一个框架类。字典用于保存 MVC 中的键/值集合。错误消息说，`Dictionary`初始化的类型与 MVC 尝试放入其中的项目不同。

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

[此 Google 搜索](https://www.google.com/search?q=model+dictionary+mvc+msdn)显示了 ASP.NET MVC 使用的许多字典。

# javascript - 对外部域和 cookie 的 ajax 请求很奇怪

> ID：15905200
> 
> 赞同：1
> 
> 时间：2013-04-09T14:50:19.247
> 
> 标签：javascript, security

假设我登录到 site1.com 并在域上为我创建了一些 cookie。然后我转到site2.com，并在该站点的javascript 中向site1.com 发出JSONP 请求。我注意到的奇怪之处在于，site1.com 的 cookie 是与源自 site2.com 的请求一起发送的（我认为 site2.com 将无法访问 site1.com cookie）。

对于现代浏览器（用 chrome 测试），这是有效的行为吗？

site2.com 是否有可能实际访问似乎随请求自动发送到 site1.com 的 cookie 数据（通过检查请求或其他方式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:52:59.893

是的，这种行为是有效且安全的。但是您将无法访问 site2 页面上的 site1 cookie。

# javafx-2 - 在 JavaFX Scene Builder 中使用自定义组件加载 FXML 文件：重置属性并删除子项

> ID：15905204
> 
> 赞同：5
> 
> 时间：2013-04-09T14:50:30.403
> 
> 标签：javafx-2, javafx, custom-component, fxml, scenebuilder

我编写了一个 FXML 文件，在其中使用自定义组件，扩展 Group。当加载这个自定义组件时，它应该将一些子组件（这里：MyOverlayIcon）添加到它的子列表中，并通过代码设置一些属性（这里：layoutX 和 layoutY）。

## MyIcon.java：

```
public class MyIcon extends Group {

/********************************
 * Graphic
 ********************************/
private ImageView graphic;
public ImageView getGraphic() {
    if(graphic == null) {
        graphic = new ImageView();
        getChildren().add(graphic);
        // Send image to back:
        graphic.toBack();
    }
    return graphic;
}

/********************************
 * DataPath
 ********************************/
private Property<String> dataPath;
public Property<String> dataPathProperty() {
    if (dataPath == null) {
        dataPath = new SimpleStringProperty();
    }
    return dataPath;
}
public String getDataPath() {
    return dataPathProperty().getValue();
}
public void setDataPath(String dataPath) {

    this.dataPathProperty().setValue(dataPath);
    getGraphic().setImage(new Image(dataPath));
}

/********************************
 * Overlays
 ********************************/
private ObservableList<MyOverlayIcon> overlays;
public ObservableList<MyOverlayIcon> getOverlays() {
    if (overlays == null) {
        overlays = FXCollections.observableArrayList();
        overlays.addListener(new ListChangeListener<MyOverlayIcon>() {

            @Override
            public void onChanged(ListChangeListener.Change<? extends MyOverlayIcon> c) {
                double moveX = 0.0;
                double moveY = 0.0;
                double iconWidth = 48.0;
                double iconHeight = 48.0;

                ObservableList<? extends MyOverlayIcon> icons = c.getList();
                MyOverlayIcon icon = icons.get(icons.size() - 1);

                String orientation = icon.getOrientation().toString(); 

                if(orientation.endsWith("EAST")) {
                    moveX = iconWidth / 2; 
                }
                if(orientation.startsWith("SOUTH")) {
                    moveY = iconHeight / 2;
                }

                icon.setLayoutX(moveX);
                icon.setLayoutY(moveY);
                getChildren().add(icon);
            }
        });
    }
    return overlays;
}

/********************************
 * Constructor
 ********************************/
public MyIcon(){}
} 
```

## MyOverlayIcon.java：

```
public class MyOverlayIcon extends MyIcon {

private EnumOrientation orientation;
public EnumOrientation getOrientation() {
    return orientation;
}
public void setOrientation(EnumOrientation orientation) {
    this.orientation = orientation;
    }

public MyOverlayIcon() {}
} 
```

## MyIconView.fxml：

```
<Group xmlns:fx="http://javafx.com/fxml">

    <MyIcon dataPath="@/images/User1_48.png">
        <overlays>
            <MyOverlayIcon dataPath="@/images/Remove_24.png" orientation="SOUTHWEST" />
            <MyOverlayIcon dataPath="@/images/Search1_24.png" orientation="NORTHEAST" />
        </overlays>
    </MyIcon>

</Group> 
```

* * *

当我在我的 IDE 中启动应用程序时，使用 FXMLLoader 加载这个 fxml 文件，它工作正常：所有新子项都已添加并正确显示：

![在此处输入图像描述](https://i.stack.imgur.com/w28sh.png)

现在我想用 Scene Builder 修改这个 fxml 文件。但是当我使用 Scene Builder 加载文件时，我只看到一个空组实例：

![在此处输入图像描述](https://i.stack.imgur.com/h9rQt.png)

我发现只有这两种解决方法：

1.) 显式调用将子代添加到子列表的方法（例如，在属性的 setter 方法中），添加并显示子代，但仅在通过修改某些内容而不是在开始时调用此 setter 时文件已加载。

2.) 在调试模式下运行 Scene Builder，我发现，我想以编程方式修改的任何属性都必须首先在 fxml 中指定。否则，Scene Builder 会将其值设置为默认值。

例如，如果组件未在 fxml 中指定任何子节点，则我通过 java 代码动态添加的子节点会被添加和删除。在 fxml 中将任何空节点（如窗格）添加到我的组件中，子级不会被删除，并且也会显示在 Scene Builder 中。

与其他属性一样：应该由代码设置的值（此处：layoutX 和 layoutY）仅在我将它们设置在 fxml 文件中的任何值时才应用。

## MyIconView_Workaround.fxml：

```
<Group xmlns:fx="http://javafx.com/fxml">

    <MyIcon dataPath="@/images/User1_48.png">
        <Pane />
        <overlays>
            <MyOverlayIcon dataPath="@/images/Remove_24.png" orientation="SOUTHWEST" layoutY="456">
                <Pane />
            </MyOverlayIcon>
            <MyOverlayIcon dataPath="@/images/Search1_24.png" orientation="NORTHEAST"  layoutX="123">
                <Pane />
            </MyOverlayIcon>
        </overlays>
    </MyIcon>

</Group> 
```

![在此处输入图像描述](https://i.stack.imgur.com/KHlJf.png)

//编辑：如果你看不到链接的图像，试试[这个画廊链接](http://www.dropbox.com/sh/fvjavqv0k9xmgff/wA1D1ZLJjV)。

* * *

有没有人知道如何使用包含自定义组件的 Scene Builder 加载 fxml 文件，该自定义组件通过 java 代码动态添加子组件并修改其（或其）属性值而不在 fxml 中指定它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:16:45.963

我在半年前的[oracle论坛上发现了这个帖子。](https://forums.oracle.com/forums/thread.jspa?threadID=2431020)

据说，这是一个错误，我发现在最新版本的场景构建器（[Scene Builder 1.1 Early Access](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)）中它已被修复。

使用此版本，一切正常。:)

谢谢你的帮助！

# sql - 仅选择另一个表中不存在的数据

> ID：15905211
> 
> 赞同：0
> 
> 时间：2013-04-09T14:50:48.347
> 
> 标签：sql, join

我有一个具有 id 列的表，而表 2 具有相同的列

我只想选择 table2 中不存在于表一中的 id。如何选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:52:03.270

使用 连接两个表`LEFT JOIN`。

```
SELECT  a.*
FROM    table2 a
        LEFT JOIN table1 b
            ON a.ID = b.ID
WHERE   b.ID IS NULL 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:54:27.743

看看 sql 连接查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:04:12.327

这是使用子查询和 IN 的一种方法。已经提到的 LEFT JOIN 方法可能更有效，但 IMO 这种方法更具有语义意义，因此更易于阅读。

```
SELECT t2.ID
FROM table2 t2
WHERE t2.ID NOT IN
(
   SELECT t1.ID
   FROM table1 t1
) 
```

# python - Python：带有一些规则的字母数字序列号

> ID：15905215
> 
> 赞同：2
> 
> 时间：2013-04-09T14:50:53.357
> 
> 标签：python

我正在尝试在 Python 中创建一个字母数字序列号，该序列号受以下规则约束：

3 位字母数字系列 允许值 1-9（不包括零）和 AZ（所有大写字母，不包括 I 和 O） 代码在得到输入数字后应该能够给出下一个数字。

例如：如果输入数字 11D，那么输出数字应该是 11E，如果输入数字是 119，那么输出应该是 12A 而不是 120。请让我知道这个描述是否足以解释我的要求。

我目前正在使用下面提到的代码：

```
def next_string(self, s):
    strip_zs = s.rstrip('z')
    if strip_zs:
        return strip_zs[:-1] + chr(ord(strip_zs[-1]) + 1) + 'a' * (len(s) - len(strip_zs))
    else:
        return 'a' * (len(s) + 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:21:25.877

您可以为此任务使用递归：

```
def next_string(s):
    if len(s) == 0:
        return '1'
    head = s[0:-1]
    tail = s[-1]
    if tail == 'Z':
        return next_string(head) + '1'
    if tail == '9':
        return head+'A'
    if tail == 'H':
        return head+'J'
    if tail == 'N':
        return head+'P'
    return head + chr(ord(tail)+1) 
```

这可能不是最 Pythonic 的代码，但这显示了如何思考它。

```
>>> next_string('11A')
'11B'
>>> next_string('11A')
'11B'
>>> next_string('11Z')
'121'
>>> next_string('119')
'11A'
>>> next_string('1')
'2'
>>> next_string('ZZ')
'111'
>>> next_string('ZZ1')
'ZZ2'
>>> next_string('ZZ9')
'ZZA'
>>> next_string('ZZH')
'ZZJ' 
```

# javascript - Javascript回调函数在Firefox中抛出错误“回调不是函数”

> ID：15905221
> 
> 赞同：33
> 
> 时间：2013-04-09T14:51:06.653
> 
> 标签：javascript

```
function CascadeDropDowns(parentClass, childClass, action, callback) {
  var DropDownId = $(parentClass + " option:selected").val();

  $.ajax({
    url: "/site/" + action,
    data: { DropDownId: DropDownId },
    dataType: "json",
    type: "POST",
    error: function () {
      alert("An error occurred.");
    },
    success: function (data) {
      var items = "";
      $.each(data, function (i, item) {
        items += "<option value=\"" + item.Value + "\">" + item.Text + "</option>";
      });
      $(childClass).html(items);
      $(childClass)[0].selectedIndex = 0;
      callback();
    }
  });
}

$(document).ready(function () {
  // Populates all child drop downs on load
  var callback = function () {
    CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
  };

  CascadeDropDowns(".DeviceTypeDDL", ".ConfigGroupDDL", "GetGroups", callback);

  // Populates all child drop downs parent change
  $(".DeviceTypeDDL").change(function () {
    var callback = function () {
      CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
    };
    CascadeDropDowns(".DeviceTypeDDL", ".ConfigGroupDDL", "GetGroups", callback);
  });
  $(".ConfigGroupDDL").change(function () {
    CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
  });
}); 
```

这运行良好并以正确的顺序级联下拉菜单，但 Firefox 调试器显示错误，即引发警报并询问 Id 是否可以调试。

任何建议都会很棒

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-09T14:57:56.907

这是因为您并不总是将回调传递给该方法。

```
success: function (data) {
  var items = "";
  $.each(data, function (i, item) {
    items += "<option value=\"" + item.Value + "\">" + item.Text + "</option>";
  });
  $(childClass).html(items);
  $(childClass)[0].selectedIndex = 0;
  if(callback) callback();  //check before calling it. 
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-09T14:58:29.537

这是因为您并不总是`callback`为该`CascadeDropDowns`功能提供 a 。

例如

`CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");`

您应该修改您的函数以将`callback`参数视为可选参数：

```
if (callback) {
    callback();
} 
```

一个常见的简写是：

```
callback && callback(); 
```

# android - greendao 在多进程环境中工作吗

> ID：15905225
> 
> 赞同：2
> 
> 时间：2013-04-09T14:51:12.147
> 
> 标签：android, greendao

**`greendao`打算在多进程环境中工作？**

查看源代码，由于缓存的处理方式和其他一些原因，它似乎不支持多进程环境。我正在寻找开发人员的确认或更多详细信息。

通过我们当前的测试，我们让它在一个多线程的进程中运行良好。然而，当我们引入一个访问同一个数据库的单独进程时，我们经常会遇到`database is locked`异常。

* * *

我们的测试启动了两个不同的进程，它们都启动了两个线程，这些线程随机生成`daos`到同一个数据库中。我们还有第三个进程，它启动两个线程，这些线程不断地`daos`从同一个数据库中加载所有数据。

* * *

```
Failure 5 (database is locked) on 0x2d3050 when executing 'BEGIN EXCLUSIVE;'

04-09 14:41:27.161: W/dalvikvm(20745): threadid=10: thread exiting with uncaught exception (group=0x40018560)
04-09 14:41:27.161: W/dalvikvm(20745): threadid=9: thread exiting with uncaught exception (group=0x40018560)
04-09 14:41:27.161: I/Process(20745): Sending signal. PID: 20745 SIG: 9
04-09 14:41:27.161: E/AndroidRuntime(20745): FATAL EXCEPTION: Thread-11
04-09 14:41:27.161: E/AndroidRuntime(20745): android.database.sqlite.SQLiteException: database is locked: BEGIN EXCLUSIVE;
04-09 14:41:27.161: E/AndroidRuntime(20745):    at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
04-09 14:41:27.161: E/AndroidRuntime(20745):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1772)
04-09 14:41:27.161: E/AndroidRuntime(20745):    at android.database.sqlite.SQLiteDatabase.beginTransactionWithListener(SQLiteDatabase.java:536)
04-09 14:41:27.161: E/AndroidRuntime(20745):    at android.database.sqlite.SQLiteDatabase.beginTransaction(SQLiteDatabase.java:490)
04-09 14:41:27.161: E/AndroidRuntime(20745):    at de.greenrobot.dao.AbstractDao.executeInsert(AbstractDao.java:344)
04-09 14:41:27.161: E/AndroidRuntime(20745):    at de.greenrobot.dao.AbstractDao.insert(AbstractDao.java:293)
04-09 14:41:27.161: E/AndroidRuntime(20745):    at abc.def.ghi.MyDao.persist(MyDao.java:342)
04-09 14:41:27.161: E/AndroidRuntime(20745):    at abc.def.ghi.persistservice2.PersistThread.run(PersistThread.java:36) 
```

# android - 我应该为 android app 项目设置不同的图标大小吗

> ID：15905229
> 
> 赞同：0
> 
> 时间：2013-04-09T14:51:19.020
> 
> 标签：android, android-layout

我应该为 ldpi、hdpi、mdpi、xdpi 和 xxdpi 维护每个图标的 4 或 5 个尺寸吗？一个 48x48（任何其他尺寸 - 高分辨率）的图标对于所有不同的尺寸都不够用吗？我有很多图标。我觉得我的应用程序大小会增加。

请给我建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:53:39.757

如果你不希望 android 自动缩放你的图像大小（这会看起来很丑，因为你会失去质量），你应该为不同的屏幕尺寸设置不同的图标，例如 mdi - 32x32、hdpi 48x48、xhdpi 64x64 ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:54:01.283

你应该保留不同的版本，是的。事实上，如果你在 Eclipse 上工作，你可以按 Ctrl+N，转到**Android**列表**Android Icon Set**，然后选择 Launcher Icon。它将为您的图标创建不同的分辨率，并为 Google Play 网站创建不同的分辨率。

# html - Kendo Knockout：NumericTextBox 在插入超过最大值时显示验证消息

> ID：15905232
> 
> 赞同：2
> 
> 时间：2013-04-09T14:51:22.613
> 
> 标签：html, knockout.js, kendo-ui, kendonumerictextbox

我正在使用 kendo-knockout 库。我有一个最大值为 20 的数字文本框小部件。如果您输入更大的值，小部件会将其舍入到最大值。因此，如果您使用键盘输入值 50 并从输入中失去焦点或保存表单，则该值将四舍五入为最大值 20。

我希望当您在小部件文本框中输入更大的值时显示错误消息。为此，我将配置更改为：

```
<input type="number"  
data-bind="kendoNumericTextBox: { value: price, min="1", max="20" }" /> 
```

至

```
<input type="number"  min="1" max="20"
data-bind="kendoNumericTextBox: { value: price }" /> 
```

但最终的结果是一样的。该值已四舍五入。如果我删除小部件：

```
<input type="number"  min="1" max="20" /> 
```

我得到了想要的行为。这可以使用数字文本框小部件来完成吗？

这是jsfiddle：

[http://jsfiddle.net/2Qnv7/29/](http://jsfiddle.net/2Qnv7/29/)

为了澄清起见，我添加了没有小部件的所需行为。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T18:23:23.107

您可以在更改时绑定事件，但 Kendo 不会发送无效值，因此您必须进行一些额外的黑客攻击才能存储键入的值（例如通过绑定模糊事件），然后比较存储的值和限制。

这是HTML

```
Kendo numeric text box:
<input type="number"  min="1" max="20"
data-bind="event: { blur: blur } ,kendoNumericTextBox: { value: price, change: change }" />

Regular Input:
<input type="number"  min="1" max="20" />

    <button type="submit">Submit</button>

</form> 
```

KO javascript模型

```
var ViewModel = function() {
   this.price = ko.observable(11);
    this.blur = function(model, event) {
        $(event.target).data({ _prevValue: event.target.value });
    }
    this.change = function() {
        var _prevValue  = $(this.element).data('_prevValue') - 0;
        if (_prevValue > this.options.max || _prevValue < this._value) {
            alert(_prevValue + ' is out of range');
        }
    }
};

ko.applyBindings(new ViewModel()); 
```

您还可以将值存储到 this 的属性中，而不是存储到 jQuery 数据中。

这是 jsfiddle [http://jsfiddle.net/Z8yq5/中的示例](http://jsfiddle.net/Z8yq5/)

# sql - SQL SUM 错误（和与乘）

> ID：15905239
> 
> 赞同：0
> 
> 时间：2013-04-09T14:51:29.903
> 
> 标签：sql, join, count, sum

我有两个类似于这些的表：

```
TABLE1
PC   Date       Num  Name   ID
8901 01/03/2013 5099 AAA    11
8901 01/03/2013 5099 AAA    11
8901 01/03/2013 5099 AAA    11
8901 02/03/2013 5099 AAA    12
8902 03/03/2013 5099 AAA    13
8903 04/03/2013 5099 AAA    14

TABLE2
PC   Date       Num  Name ID Bar2
8901 01/03/2013 5099 AAA  11 3
8901 01/03/2013 5099 AAA  11 2
8901 01/03/2013 5099 AAA  11 9
8901 02/03/2013 5099 AAA  12 3
8902 03/03/2013 5099 AAA  13 4
8903 04/03/2013 5099 AAA  14 5 
```

这个查询：

```
SELECT TABLE1.PC, TABLE1.Date, TABLE1.Num, TABLE1.Name, COUNT(*), SUM(TABLE2.Bar2)          
FROM TABLE1, TABLE2
WHERE TABLE1.ID = TABLE2.ID         
GROUP BY TABLE1.PC, TABLE1.Date, TABLE1.Num, TABLE1.Name        
ORDER BY TABLE1.PC, TABLE1.Date 
```

结果是：

```
PC      Date            Num     Name COUNT  SUM
8901    01/03/2013 0:00 5099    AAA  9      42
8901    02/03/2013 0:00 5099    AAA  1      3
8902    03/03/2013 0:00 5099    AAA  1      4
8903    04/03/2013 0:00 5099    AAA  1      5 
```

因此，它求和，然后乘以条目的 nº ((3+2+9)*3 = 42)。

我究竟做错了什么？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:02:40.007

目前尚不清楚您想要什么作为所需的结果，但您可以使用子查询来获取总和：

```
SELECT t1.PC, 
  t1.Date, 
  t1.Num, 
  t1.Name, 
  COUNT(*), 
  t2.Total
FROM TABLE1 t1
INNER JOIN
(
  SELECT SUM(Bar2) Total, ID
  FROM TABLE2 
  GROUP BY ID
) t2
  ON t1.ID = t2.ID
GROUP BY t1.PC, t1.Date, t1.Num, t1.Name, t2.Total
ORDER BY t1.PC, t1.Date 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/517f4/4)

# c# - Azure 服务总线序列化问题 [C#/JAVA]

> ID：15905247
> 
> 赞同：0
> 
> 时间：2013-04-09T14:51:50.447
> 
> 标签：c#, java, serialization, azure, servicebus

我在 c# 和 java 跨平台中的序列化有一些问题：

我们有 2 个使用 ServiceBus 的应用程序，一个是 C#，一个是 JAVA。假设 C# 负责将数据发布到队列/主题，而 JAVA 正在订阅它。

在 C# 中，我们使用允许泛型类型发布的标准发布方法，因此它会自动序列化使用 TypeA 类发送的数据。

然后在 java 中我们有 TypeA 等效编码，但找不到任何可以将对象反序列化为我们的 .

是否有任何有效的 JAVA 反序列化器，或者我们必须在 C# 中序列化（例如使用 JSON），发布它并使用任何 JSON 反序列化器在 JAVA 中反序列化？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:03:53.363

我相信如果您不对 BrokeredMessage 执行任何操作，将使用其中一个 DataContractSerializer。您没有显示任何代码，但我假设您使用的是 BrokeredMessage 类。如果你想要跨平台，你需要控制序列化。我将序列化为 JSON 并将 JSON 作为字符串传递，或者使用流重载并可能压缩流，将其传递给构造函数（如果它是一个大对象）。Java 客户端需要获取 JSON 反序列化器并执行相反的操作。

正如您所知道的 - DataContractSerializer 在 Java 中不容易逆转。我相信你可以做到，但使用 JSON 或 protobuf 是一种更简单且跨平台的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:02:42.633

对于跨语言二进制序列化，[参考这个问题](https://stackoverflow.com/questions/2001405/strategy-for-cross-language-java-and-c-object-serialization)。但是，在这种情况下我会使用 JSON - 我相信它会简单得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:20:23.127

我想答案与您现有的代码库有关。最正统的方法是在 C# 上使用 XmlSerializer，在 Java 上使用 JAXB。当然，您需要手动检查两种语言的代码以确保完全的互操作性。

我认为这两种语言都支持多种序列化/反序列化方式，您只需要找到一种相互兼容的方式即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-30T15:44:33.967

1.  在 C# 中使用您选择的序列化库而不是默认的合同序列化程序。（我将使用 JSON 和 Newtonsoft.json）

2.  将消息发布为 json 文本流

    ```
     var json = Newtonsoft.Json.Linq.JObject.FromObject(yourSerializableObject).ToString();
        var stream = new MemoryStream();
        var writer = new StreamWriter(stream);
        writer.Write(json);
        writer.Flush();
        stream.Position = 0;
        _topicClient.Send(new BrokeredMessage(stream, true) { ContentType = "application/json" }); 
    ```

3.  以 json 文本流形式接收消息

    ```
     var message = _subscriptionClient.Receive();
        Stream stream = message.GetBody<Stream>();
        StreamReader reader = new StreamReader(stream);
        string s = reader.ReadToEnd(); 
    ```

# c# - 有没有办法从静态方法调用非静态方法？

> ID：15905248
> 
> 赞同：6
> 
> 时间：2013-04-09T14:51:52.557
> 
> 标签：c#, visual-studio-2012, static-methods, non-static

这就是我所拥有的。

```
public static void Person_home_phone_TextChanged(object sender, EventArgs e) { ... } 
```

有没有办法从这个静态方法内部访问同一个或另一个类的非静态方法？

我需要获取 Person_home_phone 文本框中的文本并将其保存到类数据成员中。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-09T14:53:37.797

示例（）-> 示例

您只需要从方法创建`type`then 调用, 的实例。`non-static``static`

```
public class Example(){

    public static void StaticExample()
    {

        Example example = new Example();
        example.NonStatic();
    }

    public void NonStatic()
    {

    }

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-09T14:53:19.803

您需要有一个类的实例才能调用非静态方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-13T09:11:52.147

解决方案#1：每次调用该方法时都实例化一个新的 Car 实例。

```
 public static void DoSomething()
        {
            Car c = new Car();
            c.NonStaticMethod();
        } 
```

解决方案#2：将 Car 传递给方法。

```
 public static void DoSomething(Car c)
        {
            c.NonStaticMethod();
        } 
```

解决方案#3：

使用单例 Car 来支持静态方法。（如果有可能从多个线程调用，您可能还需要锁定。请注意 System.Windows.Forms.Timer 不会引入线程。）

```
 public class Car
    {
        private static Car m_Singleton = new Car();

        public static void DoSomething()
        {
            m_Singleton.NonStaticMethod();
        } 
```

请注意，您尚未解释 Timer 的内存问题。很有可能有解决这个潜在问题的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T14:53:55.687

实例方法（vel. non-static）只能在该类的实例的上下文中调用。所以你可以调用它，但你必须在你的静态方法的某个地方有一个该类的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T14:54:13.177

非静态方法需要类的实例。除非你传入了一个实例，或者在你的方法中创建了一个实例，否则你不能调用非静态方法，因为你不知道该方法应该操作的类的哪个实例。

您需要类的实例来调用非静态方法。

# c++ - 视觉工作室。如何通过附加到进程来构建调试工作的DLL（在命令行中）？

> ID：15905255
> 
> 赞同：0
> 
> 时间：2013-04-09T14:52:12.017
> 
> 标签：c++, debugging, visual-c++, visual-studio-debugging

视觉工作室。如何通过附加到进程来构建调试工作的DLL（在命令行中）？据我所知，这就是我正在做的事情。

为了构建 *.cpp 文件，我把这些标志 cl /Zi /Od

为了制作 DLL，我把这些链接 /DEBUG

我有数十个 cpp 文件，这些文件后来被制作成 DLL。但是附加到进程调试不起作用......

我必须放置更多标志吗？如果 DLL 有足够的调试信息，我如何检查它本身？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:28:24.993

你有 DLL 的 PDB 文件吗？它是否包含所有 obj 的调试信息？除了下面提到的选项之外，您是否也在使用 cl /c 编译文件。您的编译结果是 - 在链接它们之前复制的对象。是否也复制了 pdb？

这些是导致您的问题的各种原因

1.  在链接它们之前，您正在将 objs 复制到某个目录。链接时无法访问 pdb。
2.  在链接之前进行一些清理会导致删除 PDB。

假设您有 3 个文件 a.cpp、b.cpp 和 c.cpp，这就是您可以尝试的

```
cl /c /Zi /Fd c:\mypath\mydll.pdb a.cpp
cl /c /Zi /Fd c:\mypath\mydll.pdb b.cpp
cl /c /Zi /Fd c:\mypath\mydll.pdb c.cpp

link /DEBUG fullpathtoa\a.obj fullpathtob\b.obj fullpathtob\c.obj whatever other options. 
```

然后复制 pdb 和 dll 并尝试调试它。

另一件事是，在大多数调试器中，您都有一个对话框，显示所有已加载的二进制文件和已加载的相应 PDB。

例如。

```
Binary      PDB
a.exe       c:\abc\a.pdb
b.dll       c:\pqr\b.pdb
c.dll       Default symbols loaded. 
```

加载的默认符号意味着它没有找到 PDB。您可以右键单击 etc 并将调试器指向与 c.pdb 对应的 PDB 的路径

在 Visual Studio 中，您将在 Debug Menu Option-->Windows-->Modules 中看到上述内容。“符号状态”列将显示 PDB 的路径或“加载的默认符号”。它为您的 dll 显示了什么？

# r - 在R中的数据表中获取rowSums

> ID：15905257
> 
> 赞同：7
> 
> 时间：2013-04-09T14:52:15.293
> 
> 标签：r, data.table

正在寻找一种简单的方法来将我的数据表**中大约 170 个不同列的总和**作为新列。我可以使用一些通配符表示法吗？

以下是我的数据集中的一小部分摘录（前几列）：

```
> head(t_checkin)
checkin_info_0.0 checkin_info_0.1 checkin_info_0.2 checkin_info_0.3 checkin_info_0.4 checkin_info_0.5
              NA               NA               NA               NA               NA                1
               3               NA               NA               NA               NA                1
              NA               NA                1               NA               NA               NA
              NA               NA               NA               NA               NA               NA
              NA               NA               NA               NA               NA               NA
              NA               NA               NA               NA               NA               NA 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T15:05:45.317

**编辑**

更正，按照@MatthewDowle 所说的去做：

```
dat <- data.frame(x=1:11,y=100:110,z=sample(letters,11))
DT <- as.data.table(dat)
names <- c("x","y")
DT[,lapply(.SD,sum),.SDcols=names]

mysum <- function(x){sum(x, na.rm=TRUE)}
DT[,lapply(.SD,mysum),.SDcols=names] 
```

# ibm-mobilefirst - IP 帮助程序库 GetIfTable 函数失败

> ID：15905266
> 
> 赞同：1
> 
> 时间：2013-04-09T14:52:32.230
> 
> 标签：ibm-mobilefirst

我正在开发 5.0.6 版的 Worklight Mobile 应用程序。当我构建或预览应用程序时，我收到一条错误消息，提示“Worklight 应用程序构建器”遇到问题。“Worklight 应用程序构建器”期间发生内部错误。单击详细信息按钮显示“Worklight 应用程序构建器”期间发生内部错误。IP 帮助程序库 GetIfTable 函数失败。

错误发生大约 2/5 次我构建我的应用程序。

有谁知道如何纠正这个问题？

其他说明：我从 5.0.5 升级到 5.0.6。两个版本都出现了错误。

异常堆栈跟踪：

```
java.lang.Error: IP Helper Library GetIfTable function failed
    at java.net.NetworkInterface.getAll(Native Method)
    at java.net.NetworkInterface.getNetworkInterfaces(Unknown Source)
    at com.worklight.common.util.GeneralUtil.scanAllIPv4Interfaces(GeneralUtil.java:598)
    at com.worklight.common.util.GeneralUtil.scanIPAddresses(GeneralUtil.java:527)
    at com.worklight.common.util.GeneralUtil.getIPscanResults(GeneralUtil.java:621)
    at com.worklight.builder.config.BuildConfiguration$Builder.setWorklightServerHost(BuildConfiguration.java:384)
    at com.worklight.builder.config.BuildConfiguration$Builder.deriveParameters(BuildConfiguration.java:286)
    at com.worklight.builder.config.BuildConfiguration$Builder.<init>(BuildConfiguration.java:276)
    at com.worklight.builder.ApplicationBuilder.init(ApplicationBuilder.java:105)
    at com.worklight.builder.ApplicationBuilder.build(ApplicationBuilder.java:80)
    at com.worklight.studio.plugin.launch.build.apps.WorkspaceApplicationBuilder.buildApplication(WorkspaceApplicationBuilder.java:298)
    at com.worklight.studio.plugin.launch.build.apps.WorkspaceApplicationBuilder.runInWorkspace(WorkspaceApplicationBuilder.java:145)
    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T15:27:59.747

解决了我自己的问题。我安装了两个相互冲突的 Java。所以，我卸载了这两个版本，重新安装了最新版本的 Java。为了安全起见，我继续卸载 Eclipse 并使用 Worklight 插件和 ADT 插件重新安装它。现在一切正常。

# ruby - 你能扩展 self.included 吗？

> ID：15905270
> 
> 赞同：1
> 
> 时间：2013-04-09T14:52:46.140
> 
> 标签：ruby, include, extend

这就是我想要做的，大致：

```
module Foo

  def self.included base
    base.extend ClassMethods
  end

end

module Bar
  extend Foo

  module ClassMethods
    def hi
      return "hello!"
    end
  end
end

class Baz
  include Bar
end

Baz.hi #=> "hello!' 
```

但相反我得到

```
NoMethodError: undefined method `hi' for Baz:Class 
```

如果不清楚，更一般地说，我想做的是创建一个包含`included`回调逻辑的模块，然后扩展其他几个模块，我希望它们使用`included`扩展模块中的回调（但如果，例如，`Bar`extends `Foo`，如果可能的话，我想在闭包中`self`引用）。`Bar``included`

可能这有点令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:56:59.067

你永远不会`include Foo`在任何地方，因此`included`永远不会调用钩子。您需要使用`extended`钩子，因为您`extend Foo`：

```
module Foo
  def self.extended(base)
    base.define_singleton_method(:included) do |base|
      base.extend base::ClassMethods
    end
  end
end

module Bar
  extend Foo

  module ClassMethods; def hi; 'hello!' end end
end

class Baz; include Bar end

Baz.hi #=> 'hello!' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:53:17.163

问题是我需要定义`included`而不是`self.included`让 Bar`included`作为类方法。以下是我想要的：

```
module Foo

  def included base
    base.extend self::ClassMethods
  end

end

module Bar
  extend Foo

  module ClassMethods
    def hi
      return "hello!"
    end
  end
end

class Baz
  include Bar
end

Baz.hi #=> "hello!' 
```

# bash - 在 bash 中更改文本文件中的部分行

> ID：15905275
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:52:53.090
> 
> 标签：bash, variables, sed, text-files, field

我在文本文件中有一行，例如：

> abcde:jhdfj$jhbsfiy/.hghi$jh:12345:dgve::

我想用一个变量替换第三个字段 12345。无需触及其余部分，也无需将任何内容复制到变量中...帮助？是的，本质上这是一个单一的问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:57:15.657

这条线应该满足您的要求：

```
awk -F: '{$3="55555"}1' OFS=":" file 
```

是`55555`新的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:57:57.480

这应该有效：

```
v="new val"
echo "abcde:jhdfj$jhbsfiy/.hghi$jh:12345:dgve::" | awk -F: -v new=${v} 'OFS=FS; $3=new' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:26:02.987

```
sed -i "s/:[0-9]*:/:$VAR:/1" INPUTFILE 
```

其中 $VAR 包含您要替换第三个字段的内容。

或者

```
sed -i "s/:[0-9]*:/:NewText:/1" INPUTFILE 
```

其中 NewText 是您要替换的数量。

如果您只想在标准输入上执行此操作，那么您可以

```
echo "stdin Teststring" | sed -i "s/:[0-9]*:/:$VAR:/1" 
```

# forms - 在片段之间传递数据

> ID：15905277
> 
> 赞同：0
> 
> 时间：2013-04-09T14:52:56.060
> 
> 标签：forms, lift

我有 2 个片段：TakeIn 和 SendOut。
TakeIn 从搜索中获取数据（通过提交按钮提交并从 RequestVar 读取的 1 个文本字段。基于此输入，我正在创建并填充数据结构。我想通过片段 SendOut 在网站上显示此数据结构。

但是，我不确定如何在片段之间发送数据。我尝试直接访问代码片段变量，但它不起作用。例如，在`TakeIn`我正在调用 中`SendOut.nodeList = this.nodeList;`，但这会导致编译时错误。

所以问题是如何从另一个片段中设置一个片段的数据。或者也许还有另一种方法可以做我想要在这里实现的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:14:37.047

最简单的方法是创建一个`SendOut`包含`SessionVar`. 然后，您可以直接从表单中设置该变量，`TakeIn`并且该`SendOut`代码段将在会话期间继续工作。

或者，您可以尝试将两个片段组合成一个[Stateful Snippet](http://simply.liftweb.net/index-4.3.html)，每个片段的功能都可以通过 dispatch 方法调用。例如：

```
 class CombinedSnippet extends StatefulSnippet {
   var nodeList = //something

   def dispatch = {
     case "takeIn" => takeInFunctionality()
     case "sendOut" => sendOutFunctionality()
   }
 } 
```

然后，在您的 HTML 中将其引用为`CombinedSnippet.takeIn`或`CombinedSnippet.sendOut`。`StatefulSnippet`虽然不确定它的寿命是多少。

# python - Python 中的 if len(list)

> ID：15905282
> 
> 赞同：3
> 
> 时间：2013-04-09T14:53:08.190
> 
> 标签：python

我正在将 Python 代码转换为 C，以便利用 HPC 系统上可用的并行性（这是一个痛苦的过程），并且我在 Python 中遇到了原始程序员使用的一个让​​我感到困惑的条件

```
 if rnum <> current_res:
      alim = 0
      if len(f): alim = f[-1] 
```

如果 len(f) 满足怎么办？我在网上的任何地方都找不到以这种方式使用的这种约定。我想这是一种糟糕的编程习惯。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-09T14:54:29.537

在 Python 中，被视为“空”的值（例如数字 0）在布尔上下文中被视为 False，否则为 True。

因此，`len(f)`如果`f`有长度，则为 True，否则为空。如果`f`是标准 Python 序列类型，则代码可以简化为：

```
if f: alim = f[-1] 
```

因为这同样适用于序列；empty 是 False，具有非零长度意味着它是 True。

有关所有重要细节，请参阅Python 文档中的[真值测试](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)。

请注意，`<>`已弃用；你真的应该`!=`改用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-09T14:54:34.043

在大多数情况下，将与...`if len(f):`相同。`if f:`

原因是如果`f`没有长度，它会返回`0`一个假值。[实际上，在某些情况下](http://docs.python.org/2/reference/datamodel.html#object.__nonzero__)`__len__`，真值测试实际上会检查对象 ( )的长度。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T14:57:28.957

这

```
if len(f) 
```

将转化为：

```
if len(f) != 0 
```

或者在这种情况下，因为`len(f)`永远不会是负数，

```
if len(f) > 0 
```

# sql - SQL Server - 插入表

> ID：15905286
> 
> 赞同：0
> 
> 时间：2013-04-09T14:53:16.290
> 
> 标签：sql, sql-server, database, triggers, relational-database

我正在使用以下触发器检查插入/删除表的输出，如何在验证列后将截获的 UPDATE 命令传递给服务器？

```
CREATE TRIGGER Test1_LastUpdate ON Test1
INSTEAD OF UPDATE 
AS
    SELECT * FROM Inserted
    SELECT * FROM Deleted
GO 
```

编辑：我正在寻找在架构更新后不需要更改的解决方案。

```
CREATE TRIGGER Test1_LastUpdate2 ON Test1
INSTEAD OF UPDATE
AS
    --COMMIT UPDATE THAT WAS INTERCEPTED
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:17:56.727

您“在验证列后将拦截的 UPDATE 命令传递给服务器”的唯一方法是`UPDATE`自己执行。

# 选项 1 - 回滚

但是，您现在已经说过，当这些列添加到表中时，您不希望向触发器添加更多列。因此，您可以选择简单地回滚任何无效的更改。这可能看起来像这样：

```
CREATE TRIGGER TR_Sample_U ON dbo.Sample -- No AFTER trigger needed here!
AS
IF EXISTS ( --check for disallowed modifications
   SELECT *
   FROM
      Inserted I
      INNER JOIN Deleted D
         ON I.SampleID = D.SampleID
   WHERE
      I.Something <> D.Something
      AND I.UpdateDate = D.UpdateDate
)
ROLLBACK TRAN; 
```

# 选项 2 - 在触发器中执行 UPDATE

但是，如果您需要对更新实际需要的内容进行更多控制，例如需要在提交之前修改值，则必须自己执行更新。例如：

```
CREATE TRIGGER TR_Sample_U ON dbo.Sample
INSTEAD OF UPDATE
AS
SET NOCOUNT ON;
SET XACT_ABORT ON;

UPDATE S
SET S.Value = I.Value + '+'
FROM
   dbo.Sample S
   INNER JOIN Inserted I
      ON S.SampleID = I.SampleID
; 
```

这是一个不做任何检查的简单示例，但您明白了——当您对`Sample`表执行更新时，您会看到该值获得了一个额外的`+`字符——您的更新被拦截并且`Inserted`值（表示更新后建议的更改）在提交之前进行了修改。

[请参阅此操作的 SQL Fiddle 演示](http://sqlfiddle.com/#!6/bc2c6/1)。

唯一需要注意的是递归：

1.  直接递归

    当您的更新可能导致其他触发器运行修改同一个基表时，您可以在它们之间进行乒乓操作，直到达到最大嵌套级别并回滚整个事务。所以要注意触发器之间可能的乒乓球。

2.  间接递归

    您可能不必担心这一点，因为在 SQL Server 中，[数据库级`RECURSIVE TRIGGERS`选项](http://msdn.microsoft.com/en-us/library/bb522682.aspx)默认处于关闭状态。但是，如果它打开，您可以根据新更新获得相同的触发器触发。

这些可以通过多种方式得到改善：

*   检查`TRIGGER_NESTLEVEL`触发器内部，如果嵌套足够深则退出触发器。

*   为避免仅直接递归，请组合触发器。

*   在某些特定情况下，战略性地分配哪个触发器将首先/最后运行可能会解决问题。不能指定绝对顺序，但可以选择第一个和最后一个。

请注意，乒乓问题适用于任何类型的触发器，`INSTEAD OF`或者`AFTER`，它修改自己的基表，或者通过最终出现的另一个表（具有修改另一个表的触发器......）参与更新链返回修改基表。

# 选项 2B - 预处理 AFTER UPDATE 触发器。

我将此选项称为 2B，因为它确实是选项 2，但具有增强功能。如果您不想每次向表中添加列时都必须手动更新触发器（我完全同意这种观点），您可以自动执行此操作。创建一个存储过程，该过程可以创建一个适当的触发器来观察您需要的所有验证。您可以将此验证的基本代码放入表中，然后在 SP 中将其选择为变量，添加 SQL 脚本通过挖掘`INFORMATION_SCHEMA.COLUMNS`视图中的信息来更新列以进行最终更新，然后最终重写触发器。这还可以附加到 DDL 触发器，从而实现 100% 自动化：您将在基表中添加或删除列，DDL 触发器将触发，并为您重写 DML 触发器。

这听起来像是很多工作，但如果您将其设计为数据驱动的，则可以将其推广到与整个数据库中的任何表一起使用，这可能具有很大的价值，具体取决于您的使用场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:05:13.093

嗯，这是一种选择...

```
/*
        Create  Table ExampleTable (LastRefreshed DateTime)
        Go
        Insert  ExampleTable
        Select  GetDate()
*/

Begin   Tran

If      Object_ID('tempdb..#check') Is Not Null Drop Table #check
Create  Table #check (InsertedVal DateTime, DeletedVal DateTime)

Update  ExampleTable
Set     LastRefreshed = GetDate()
Output  Inserted.LastRefreshed As InsertedVal, Deleted.LastRefreshed As DeletedVal Into #check

Select  *
From    #check

If      Exists (Select  1
                From    #check
                Where   InsertedVal > DeletedVal)
Begin
        Rollback Tran
End
Else
Begin
        Commit Tran
End 
```

这将创建一个带有 DateTime 记录的表。更新尝试将其更新为“现在”，但它在事务中运行并将其插入和删除的记录转储到临时表以供使用。更新后，您可以对表数据进行任何检查，以确定您是要提交还是回滚您的更改。出于示例目的，我写了这个总是回滚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:12:14.580

为了检索 UPDATE 语句，请使用 SQLprofiler。插入的表是正在插入或更新的内容的快照（这里存储了新值）。删除的表是您正在更新/删除的值的快照。您的触发器将仅被执行，而不是针对表 Test1 的更新命令，您可以看到您在插入的内容中更新了什么。

查看[这篇](http://www.mssqltips.com/sqlservertip/1804/using-instead-of-triggers-in-sql-server-for-dml-operations/)关于触发器的文章。

# jsf-2 - ui:repeat 没有实现内部元素（p:spinner），在 BackingBean 中更改后

> ID：15905287
> 
> 赞同：0
> 
> 时间：2013-04-09T14:53:18.200
> 
> 标签：jsf-2, primefaces

我的 xhtml

```
#{seating.cntPLayersInRow} <!--This looks great, is same like in BackingBean-->
<h:form>
   <ui:repeat value="#{seating.cntPLayersInRow}" var="cntInRow" >
        <p:spinner value="#{cntInRow}"  > <!--Here is the Problem the value never  actualize -->    
       </p:spinner>
   </ui:repeat>
   <h:commandButton value="přidat řadu" action="#{seating.addRow()}" />
</h:form> 
```

我在 backingBean 中的 addRow 方法：

```
public String addRow() { //I Think not very import just change all value and add one
        cntRow++;
        cntPLayersInRow.clear(); 
        for (int i = 1; i < cntRow; i++) {
            cntPLayersInRow.add(someNumber/cntRow);            
        }             
        cntPLayersInRow.add(someNumber/cntRow+someNumber%cntRow);       
        return null;
} 
```

cntPlayersInRow 是整数的 ArrayList

问题是当 cntPlayerInRow 在 BackinBean 中实现时 p:spinner 中的值没有实现（范围是 ViewScope）

对不起我的英语不好。

# sql - 哪种方式适合检查表的存在

> ID：15905293
> 
> 赞同：2
> 
> 时间：2013-04-09T14:53:31.850
> 
> 标签：sql, database, performance, oracle, oracle11g

我想检查Oracle中的特定表是否存在，哪种方式更通用和合适，下面列出了2种方式，如果表存在则方式1运行速度快，因为它只运行一个sql

1.  处理异常并了解它。

    ```
    create or replace procedure get_id_only (id out number) as
    begin
    execute immediate 'SELECT id FROM TABLE_NAME where rownum = 1' into id;
    exception    
        when others then
          if (sqlcode = -942) then
            SELECT id into id FROM my_another_table;
          else 
            raise;
          end if;
    end; 
    ```

2.  检查用户表以查看它是否存在。

    ```
    create or replace procedure get_id_only (id out number) as
     count number;
    begin
      SELECT count(*) into count FROM user_tables 
           WHERE table_name = 'TABLE_NAME';
      if (count = 0) then
        SELECT id into id FROM my_another_table;
        return;
      end if;

      execute immediate 'SELECT id FROM TABLE_NAME where rownum = 1' into id;

    end; 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:04:34.317

正如您所说，第一个是最好和最有效的方法。因为捕获“table not found”异常：这避免了检查表是否存在两次的开销；

# jquery - 使用jQuery动态添加按钮

> ID：15905294
> 
> 赞同：0
> 
> 时间：2013-04-09T14:53:32.613
> 
> 标签：jquery, html, css

我正在尝试动态添加一个按钮 - 第一个按钮有效，但其他按钮无效。我以前使用过该`live`功能，但 jQuery 1.9.1 删除了该功能。我应该怎么做才能使新添加的按钮起作用？

**HTML 代码：**

```
<div class="take">
    <p>this is the para</p>
    <button class="test">copy</button>
</div> 
```

**jQuery代码：**

```
$('.test').on('click', function() {
    var a = $(this).parent();
    new.clone().insertAfter(a);
}) 
```

这是[jsfiddle](http://jsfiddle.net/vJZmj/1/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T14:55:49.320

在克隆中传递 true 将解决您的问题 - [jsfiddle](http://jsfiddle.net/vJZmj/3/)

```
$('.test').on('click', function() {
    var o = $(this).parent();
    o.clone(true).insertAfter(o);        
}) 
```

注意：`new`是 JavaScript 中的关键字，因此不要将其用作变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:58:18.917

```
$(document).on('click', '.test', function() {
    var o = $(this).parent();
    o.clone().insertAfter(o);   
}); 
```

而不是`document`使用非动态父 ID 选择器

[http://jsfiddle.net/uk6Bh/1/](http://jsfiddle.net/uk6Bh/1/)

可视化：

```
$('#non-dynamic-parent').on('event', '.dynamic-delegated-element', function() { 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)说：

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:57:06.047

您想使用`.on()`（[演示](http://jsfiddle.net/vJZmj/4/)）：

```
$(document).on('click', '.test', function() {
    var o = $(this).parent();
    o.clone().insertAfter(o);
}) 
```

# drupal-7 - Drupal 7：页脚文本在哪里

> ID：15905302
> 
> 赞同：-2
> 
> 时间：2013-04-09T14:53:44.753
> 
> 标签：drupal-7

drupal 7 的新手，刚开始在客户端应用程序上。每页都有页脚文本。没什么大不了的，对吧，应该是之前开发者设置的区块之一？没有。没有块包含此信息/文本。

此文本必须直接嵌入到 drupal php 页面之一。我应该在哪里查看文件？试图在文件中进行搜索，但我的 IDE 没有运气。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:57:07.513

对于其他想知道的人 - 查看 sites/all/themes/"your theme"/page.tp.php 文件。有些程序员可能会把东西放在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:30:38.533

如果那不在街区，

1.  您可以签入文件夹`tpl`下的所有`your_theme/templates/`文件。

2.  如果页面是`views`页面，请尝试查看`footer`视图本身中的部分。

# c - 如何不忽略 dyld 的最大版本

> ID：15905310
> 
> 赞同：1
> 
> 时间：2013-04-09T14:54:00.423
> 
> 标签：c, macos, versioning, dyld, dynamic-library

我正在尝试在 OS X (10.7.5) 下对共享库进行版本控制，但我无法`dyld`识别最大兼容性版本（最低版本还可以）。考虑下面的测试代码和以下场景：

1.  二进制链接到版本 1.0 的库，兼容性版本 1.0

    *   `binary`按预期工作
        *   `otool -L binary`：`libdyldtest.dylib (compatibility version 1.0.0, current version 1.0.0)`
        *   `otool -L libdyldtest.dylib`：`libdyldtest.dylib (compatibility version 1.0.0, current version 1.0.0)`
2.  库更新并重新编译，移至 2.0 版，兼容 1.0 版

    *   `binary`应该仍然可以工作，并且确实可以，因为库的兼容性已经足够老了
        *   `otool -L binary`：`libdyldtest.dylib (compatibility version 1.0.0, current version 1.0.0)`
        *   `otool -L libdyldtest.dylib`：`libdyldtest.dylib (compatibility version 1.0.0, current version 2.0.0)`
3.  库已更新并重新编译为不兼容的版本。将版本和兼容版本都设置为 3.0。二进制不重新编译。

    *   `binary`应该**停止**工作，因为它想要与 1.0 兼容但`libdyldtest`仅与 3.0 及更高版本兼容的东西。*为什么这行得通？*
        *   `otool -L binary`：`libdyldtest.dylib (compatibility version 1.0.0, current version 1.0.0)`
        *   `otool -L libdyldtest.dylib`：`libdyldtest.dylib (compatibility version 3.0.0, current version 3.0.0)`
        *   设置`DYLD_PRINT_LIBRARIES`显示`libdyldtest.3.0.dylib`正在加载

问题是上面的 3 个有效，我认为它不应该。这是预期的行为吗？如果没有，我该如何纠正？

*注意*：10.7.5 的相关[dyld 源代码](http://opensource.apple.com/source/dyld/dyld-195.6/src/ImageLoader.cpp)似乎没有使用结构的`maxVersion`成员`LibraryInfo`，只有`minVersion`. 因此，将最低兼容版本设置得较低可以按预期工作：

*   库设置为版本 0.9，兼容性 0.0
    *   `binary`正如预期的那样停止工作。
        *   `otool -L binary`：`libdyldtest.dylib (compatibility version 1.0.0, current version 1.0.0)`
        *   `otool -L libdyldtest.dylib`：`libdyldtest.dylib (compatibility version 0.0.0, current version 0.9.0)`
            *   正如预期的那样，运行`binary`结果。`Reason: Incompatible library version: binary requires version 1.0.0 or later, but libdyldtest.0.9.dylib`

谢谢！

* * *

# 示例代码

图书馆.h：

```
#ifndef __LIBRARY_H__
#define __LIBRARY_H__

void functionFromLibrary();

#endif /* __LIBRARY_H__ */ 
```

图书馆.c：

```
#include "library.h"

#include <stdio.h>

void
functionFromLibrary()
{
    printf("functionFromLibrary()\n");
} 
```

二进制.c：

```
#include "library.h"

int
main(
    int argc, 
    char *argv[])
{
    functionFromLibrary();
    return (0);
} 
```

生成文件：

```
.PHONY: all library binary

MAJOR=1
MINOR=0
COMPAT=1.0
LIBNAME=dyldtest
BINNAME=binary

all: library binary

binary: binary.o
    $(CC) $< -L. -l$(LIBNAME) -o $(BINNAME)

library: library.o
    $(CC) -dynamiclib $< -Wl,-current_version,$(MAJOR).$(MINOR) \
        -Wl,-compatibility_version,$(COMPAT) -Wl,-macosx_version_min,10.6 \
        -Wl,-install_name,lib$(LIBNAME).dylib \
        -o lib$(LIBNAME).$(MAJOR).$(MINOR).dylib
    ln -f -s lib$(LIBNAME).$(MAJOR).$(MINOR).dylib \
        lib$(LIBNAME).$(MAJOR).dylib
    ln -f -s lib$(LIBNAME).$(MAJOR).dylib lib$(LIBNAME).dylib

clean:
    $(RM) *.o lib$(LIBNAME)*.dylib $(BINNAME) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:59:57.863

这是预期的行为。

执行的版本号检查`dyld`仅限于确保正在加载的库的*兼容性*版本高于构建时使用的库的兼容版本。库的*当前*版本是可以通过编程访问的，但`dyld`在评估是否应该加载特定库时不使用它。您可以通过查看手册页的`-compatibility_version`和`-current_version`部分了解有关这两个版本号的更多信息。`ld`

您可以通过使用库的安装名称来实现您想要的效果。您可以通过查看如何`libSystem.dylib`使用来了解这一点：

```
mrowe@angara:~$ ls -lha /usr/lib/libSystem.{,B.}dylib
-rwxr-xr-x  1 root  wheel    53K Jul  9  2012 /usr/lib/libSystem.B.dylib
lrwxr-xr-x  1 root  wheel    17B Jul  9  2012 /usr/lib/libSystem.dylib -> libSystem.B.dylib
mrowe@angara:~$ otool -L /usr/lib/libSystem.dylib | head -2
/usr/lib/libSystem.dylib:
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
mrowe@angara:~$ 
```

请注意输出第二行中的安装名称如何`otool`指向名称由版本号限定的 dylib 的版本（在情况 B 中）。如果 Apple 要引入向后不兼容的修订版，`libSystem.dylib`他们可以将其放在`/usr/lib/libSystem.C.dylib`并更新符号链接`libSystem.dylib`以指向它。现有程序仍会查找，`libSystem.B.dylib`因为这是在链接时写入其`LC_LOAD_DYLIB`加载命令的安装名称。任何*新链接*的程序`libSystem.dylib`都会找到`libSystem.C.dylib`并将其安装名称写入其`LC_LOAD_DYLIB`加载命令。这样的程序将无法在缺少`libSystem.C.dylib`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T06:30:15.093

查看[动态库编程主题](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/DynamicLibraries/000-Introduction/Introduction.html)->“管理与依赖库的客户端兼容性”->“指定版本信息”。您可以使用主要版本和命名设置正确的兼容性。

# gwt - GWT UiBinder CellTable 未使用 AsyncDataProvider 呈现

> ID：15905320
> 
> 赞同：0
> 
> 时间：2013-04-09T14:54:16.880
> 
> 标签：gwt, uibinder, celltable

我想在我的页面上使用从服务器接收的数据`UIBinder`创建。`CellTable`我想我不太明白`UiBinder`. 打电话前`initWidget()`我应该做什么，不应该做什么？
当我删除对`configureDataProvider()`表的调用时，会出现，但它是空的，进度条正在运行。当我包含`configureDataProvider()`时，表格根本不会呈现。

**请你能解释一下这里发生了什么吗？**

```
@UiField(provided = true)
VerticalPanel tableSelection;

@UiField(provided = true)
Anchor productTableAnchor;

@UiField(provided = true)
Anchor ordersTableAnchor;

@UiField(provided = true)
Anchor staffTableAnchor;
List<ProductDTO> products;

@UiField(provided = true)
CellTable<ProductDTO> productTable;

@UiField(provided = true)
SimplePager pager;

public TableSelectionWidget() {
SimplePager.Resources pagerResources = GWT
    .create(SimplePager.Resources.class);
tableSelection = new VerticalPanel();
productTableAnchor = new Anchor();
ordersTableAnchor = new Anchor();
staffTableAnchor = new Anchor();
productTable = new CellTable<ProductDTO>();
productTable.setPageSize(10);
configureTable();
pager = new SimplePager(TextLocation.CENTER, pagerResources, false, 0,
    true);
pager.setDisplay(productTable);
initWidget(uiBinder.createAndBindUi(this));
}

private void configureTable() {
Column<ProductDTO, String> nameColumn = new Column<ProductDTO, String>(
    new TextCell()) {
    @Override
    public String getValue(ProductDTO object) {
    return object.getName();
    }
};
Column<ProductDTO, String> priceColumn = new Column<ProductDTO, String>(
    new TextCell()) {
    @Override
    public String getValue(ProductDTO object) {
    return object.getPrice().toString();
    }
};
Column<ProductDTO, String> quantityColumn = new Column<ProductDTO, String>(
    new TextCell()) {
    @Override
    public String getValue(ProductDTO object) {
    return String.valueOf(object.getQuantity());
    }
};
productTable.addColumn(nameColumn, "Name");
productTable.addColumn(priceColumn, "Price");
productTable.addColumn(quantityColumn, "Qty");

configureDataProvider();

}

private void configureDataProvider() {
AsyncDataProvider<ProductDTO> provider = new AsyncDataProvider<ProductDTO>() {
    @Override
    protected void onRangeChanged(HasData<ProductDTO> display) {
    final int start = display.getVisibleRange().getStart();
    int length = display.getVisibleRange().getLength();
    AsyncCallback<List<ProductDTO>> callback = new AsyncCallback<List<ProductDTO>>() {
        public void onFailure(Throwable caught) {
        Window.alert(caught.getMessage());
        }

        public void onSuccess(List<ProductDTO> result) {
        products = result;
        updateRowData(start, result);
        }
    };

    productService.getAllProducts(callback);
    }
};

provider.addDataDisplay(productTable);
provider.updateRowCount(products.size(), true);
} 
```

编辑添加了 ui.xml

```
 <!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:c="urn:import:com.google.gwt.user.cellview.client"
    xmlns:ct="urn:import:com.ooo1sk.client.widgets">
    <ui:style>
    </ui:style>
    <g:HTMLPanel>
        <g:VerticalPanel styleName="" ui:field="tableSelection">
            <g:Anchor ui:field="ordersTableAnchor" text="Orders"></g:Anchor>
            <g:Anchor ui:field="productTableAnchor" text="Product"></g:Anchor>
            <g:Anchor ui:field="staffTableAnchor" text="Staff"></g:Anchor>
        </g:VerticalPanel>
        <g:HTMLPanel>
            <table cellspacing='0' cellpadding='0' style='width:100%;'>
                <tr>
                    <td valign='top'>
                        <c:CellTable addStyleNames='infoTable' pageSize='15'
                            ui:field='productTable' />
                    </td>
                </tr>
                <tr>
                    <td align='center'>
                        <c:SimplePager ui:field='pager' />
                    </td>
                </tr>
            </table>
        </g:HTMLPanel>
    </g:HTMLPanel>
</ui:UiBinder> 
```

UPD：更改后它可以工作，但只显示前 15 行，但是 Pager 显示所有 91 行并在单击后更改编号。

```
 private void configureDataProvider() {

    AsyncDataProvider<ProductDTO> provider = new AsyncDataProvider<ProductDTO>() {
        @Override
        protected void onRangeChanged(HasData<ProductDTO> display) {
        final int start = display.getVisibleRange().getStart();
        final int length = display.getVisibleRange().getLength();

        productService
            .getAllProducts(new AsyncCallback<List<ProductDTO>>() {

                public void onSuccess(List<ProductDTO> result) {
                label.setText("start " + start + " "
                    + "resultsize " + result.size() + " "
                    + "length " + length);
                products = result;
                updateRowCount(result.size(), true);
                updateRowData(start, result);

                }

                public void onFailure(Throwable caught) {
                Window.alert(caught.getMessage());
                }
            });
        }
    };
    provider.addDataDisplay(productTable);
    } 
```

好的，玩数字解决了这个问题。在`updateRowData(start, result);`我改为`start`现在`0`它工作正常。不过，我将非常感谢专家对此的任何评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:03:45.140

这[`initWidget(Widget widget)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Composite.html#initWidget%28com.google.gwt.user.client.ui.Widget%29)是[`Composite`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Composite.html)类的一种方法，用于将自身初始化为可能的小部件内部聚合的包装器。通常，您创建基于给定小部件的小部件组合，然后将其传递给`initiWidget()`方法。这样，根元素不会被暴露（就其方法而言），但仍然表现得好像它从未被包装过。

在您的示例中，您`UiBinder`负责定义 UI，因此您将绑定创建的返回 ( `uiBinder.createAndBindUi(this)`) 传递给此类方法。在此调用之前（实际上，在之前*，*但通常`createAndBindUi()`它与 在您的情况下，您不需要标记所有内容，只需要标记（对于专业化）。`initWidget()`*`@UiField(provided = true)``UiBinder``provided = true``CellTable`*

 *回到您的问题，如果您删除`configureDataProvider()`呼叫，您将永远不会设置，您将`AsyncDataProvider`根本看不到任何数据（旋转的 gif 是因为某处 - 现在不记得在哪里 - 行数已设置为 0） . 如果启用它，调用`addDataDisplay()`将隐式强制范围更新，最终将调用`AsyncDataProvider`来请求您的数据。

问题是您不会在回调中同时更新行数据*和*行数。`onSuccess()`见[这里](http://turbomanage.wordpress.com/2011/03/02/gwt-2-2-asyncdataprovider-celltable-gotcha/)。

另外，你不需要调用`updateRowCount()`after `addDataDisplay()`，否则会发出两个请求来检索相同的初始数据，这是不必要的。*

# visual-foxpro - 如何在 VFP 9 中创建滚动窗口

> ID：15905321
> 
> 赞同：0
> 
> 时间：2013-04-09T14:54:22.003
> 
> 标签：visual-foxpro

在 VFP9 中，我有一个应用程序执行预定义的操作序列，然后结束。在它运行时，我需要向用户报告进度（例如“读取事务文件”、“读取 123 条记录”、“未找到文件 abc.txt”等）。

当我在 VFP 开发环境中运行我的程序时，它工作正常。我想创建一个等效的 VB 控制台窗口，以便将我的程序作为 .EXE 独立使用，我可以在其中显示消息，然后在窗口已满时向上滚动并写入屏幕底部。

我从未在 VFP 中使用过 windows（因为我的程序总是只是批处理），所以不知道该怎么做。

请你能给我一些示例代码或告诉我在哪里可以找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:17:57.373

我通常处理这种需求的方式是创建一个表单，在其上放置一个编辑框，然后调整编辑框的大小以匹配表单。如果用户可以调整表单的大小，那么我将为编辑框设置 Anchor 以使其大小与表单保持一致。

然后，每次我需要添加信息时，我都会将其添加到编辑框的 Value 中。我可以通过确保将编辑框的 SelStart 设置为当前文本的末尾来保持列表的底部。通常，我将使用自定义方法完成所有这些操作，代码如下：

```
* Assuming this is a method of the editbox:
LPARAMETERS cNewMessage

This.Value = This.Value + CHR(13) + CHR(10) + m.cNewMessage
This.SelStart = LEN(This.Value) 
```

添马舰

# asp.net-mvc-3 - MVC3 - 视图未使用 Viewmodel 上的新数据进行更新

> ID：15905322
> 
> 赞同：0
> 
> 时间：2013-04-09T14:54:22.880
> 
> 标签：asp.net-mvc-3

我正在尝试使用新的视图模型数据更新我的视图，但是每次加载视图模型时，它都会在视图模型中显示正确的数据，即使在 jquery 成功调用中的数据中也是如此，但它不会更新视图。

我正在粘贴下面的代码，请检查并告诉我，我做错了什么？

我很生气，因为这两天。

**视图模型**

```
namespace CRMTest.Models.ViewModels
{
public class ContactViewModel
{
    private Xrm.Contact item;

    public string ContactName { get; set; }
    public string Address1 { get; set; }
    public string Address2 { get; set; }
    public string Address3 { get; set; }
    public string Town { get; set; }
    public string County { get; set; }
    public string Postcode { get; set; }
    public string CompReg { get; set; }
    public string OurRef { get; set; }
    public string RefType { get; set; }
    public string Contact { get; set; }
    public string Salutation { get; set; }
    public string Position { get; set; }
    public string Telephone { get; set; }
    public string Fax { get; set; }
    public string Mobile { get; set; }
    public string ClientServices { get; set; }
    public bool ContactByTel { get; set; }
    public bool ContactByEmail { get; set; }
    public bool ContactByLetter { get; set; }
    public bool ContactByFax { get; set; }
    public string Email { get; set; }
    public string Website { get; set; }
    public string Notes { get; set; }
    public DateTime UpdatedDate { get; set; }
    public string UpdatedBy { get; set; }

    public ContactViewModel(Xrm.Contact item)
    {
        ContactName = item.Address1_Name;
        Address1 = item.Address1_Line1;
        Address2 = item.Address1_Line2;
        Address3 = item.Address1_Line3;
        Town = item.Address1_City;
        County = item.Address1_County;
        Postcode = item.Address1_PostalCode;
        OurRef = item.NickName;
        Contact = item.Salutation+" "+item.FullName;
        Salutation = item.Salutation+" "+item.LastName;
        Position = item.JobTitle;
        Telephone = item.Address1_Telephone1;
        Fax = item.Address1_Fax;
        Mobile = item.Address1_Telephone2;
        Email = item.EMailAddress1;
        Website = item.WebSiteUrl;
    }        
} 
```

**控制器**

```
 public ActionResult Index()
    {
        //CRM Start
        Session.Add("ServiceProxy", serviceProxy);

        //CRM End

        var service = Session["ServiceProxy"] as Microsoft.Xrm.Sdk.IOrganizationService;
        service = (IOrganizationService)serviceProxy;

        if (service != null)
        {              
            using (var context2 = new XrmServiceContext(service))
            {
                var contacts = context2.ContactSet.FirstOrDefault(); 
                    ModelState.Clear();
                    var contactsViewModel = new ContactViewModel(contacts);

                return View(contactsViewModel);
            }
        }
        else
        {
            ModelState.AddModelError("", "Service proxy is missing is session state. Did you log in?");
            return RedirectToAction("LogOn", "Account");
        }
    }

    [HttpPost]
    public ActionResult Index(string strSearchParam)
    {
        if (!ModelState.IsValid)
        {
            if (Request.IsAjaxRequest())
                return PartialView("FindCustomer", strSearchParam);

            return View(strSearchParam);
        }

        if (service != null)
        {
            ModelState.Clear();
            using (var context2 = new XrmServiceContext(service))
            {
                var contacts = context2.ContactSet.Where(c => c.NickName.Equals(strSearchParam)).FirstOrDefault();

                if (contacts != null)
                {                       
                    var contactsViewModel = new ContactViewModel(contacts);
                    ModelState.Clear();

                    return View("Index",contactsViewModel);
                }
                else
                    return View();
            }
        }
        return View();
    } 
```

**看法**

```
@model CRMTest.Models.ViewModels.ContactViewModel

@{
ViewBag.Title = "Index";
 }

<script src="@Url.Content("~/Content/Site.css")" type="text/javascript"></script>    
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/base/jquery-ui.css"    type="text/css" media="all" /> 
 <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript">  </script>
  <script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

 @using (Html.BeginForm("frmContactForm"))
 {
  @Html.ValidationSummary(true); 
<div id="mainForm">
    <table border="1">
        <tr>
            <td>@Html.LabelFor(x => x.ContactName)</td><td>@Html.TextBoxFor(model => model.ContactName)</td>
            <td>@Html.Label("Our Ref/Type")</td><td>@Html.DisplayFor(x => x.OurRef)</td><td><input id="Contact" name="Contact" type="text" value="Mrs Lakhbir"></td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.Address1)</td><td>@Html.TextBoxFor(model => Model.Address1)</td>
            <td>@Html.Label("Contact/Salu'n")</td><td>@Html.TextBoxFor(model => model.Contact)</td><td>@Html.TextBoxFor(model => model.Salutation)</td>
        </tr>
        <tr>
            <td>&nbsp;</td><td>@Html.TextBoxFor(model => model.Address2)</td>
            <td>@Html.Label("Position")</td><td>@Html.TextBoxFor(model => model.Position)</td>
        </tr>
        <tr>
            <td>&nbsp;</td><td>@Html.TextBoxFor(model => model.Address3)</td>
            <td>@Html.Label("Tel/Fax")</td><td>@Html.TextBoxFor(model => model.Telephone)</td><td>@Html.TextBoxFor(model => model.Fax)</td>
        </tr>
        <tr>
            <td>@Html.Label("Town/City")</td><td>@Html.TextBoxFor(model => model.Town)</td>
            <td>@Html.Label("Mobile")</td><td>@Html.TextBoxFor(model => model.Mobile)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.County)</td><td>@Html.TextBoxFor(model => model.County)</td>
            <td>@Html.Label("Client Services")</td><td>@Html.TextBoxFor(model => model.ClientServices)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.Postcode)</td><td>@Html.TextBoxFor(model => model.Postcode)</td>
            <td>@Html.Label("Contact by")</td><td colspan="2">@Html.CheckBoxFor(model => model.ContactByTel) Tel&nbsp;@Html.CheckBoxFor(model => model.ContactByEmail) Email&nbsp;@Html.CheckBoxFor(model => model.ContactByLetter) Letter&nbsp;@Html.CheckBoxFor(model => model.ContactByFax) Fax</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.CompReg)</td><td>@Html.TextBoxFor(model => model.CompReg)</td>
            <td>@Html.Label("Email")</td><td>@Html.TextBoxFor(model => model.Email)</td>
        </tr>
        <tr>
            <td>@Html.Label("1 of 5906")</td><td><input type="button" id="btnFind" value="Find" />&nbsp;<input type="submit" name="btnEdit" value="Edit" />&nbsp;<input type="button" name="btnNew" value="New" disabled="disabled" />&nbsp;<input type="button" name="btnAccount" value="Account" disabled="disabled" /></td>
            <td>@Html.Label("Website")</td><td>@Html.TextBoxFor(model => model.Website)</td>
        </tr>
    </table>
</div> 
```

}

```
<div id="findCustomer">
    <div class="popup_content radius" >
        <table border="1">
            <tr>
                <td>@Html.Label("OurRef")</td>
                <td>@Html.TextBox("txtOurRef")<br /></td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => Model.ContactName)</td>
                <td>@Html.TextBoxFor(model => Model.ContactName, new { @class = "form_input radius" })<br /></td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => Model.CompReg)</td>
                <td>@Html.TextBoxFor(model => Model.CompReg, new { @class = "form_input radius" })<br /></td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => Model.Address1)</td>
                <td>@Html.TextBoxFor(model => Model.Address1, new { @class = "form_input radius" })<br /></td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => Model.Address2)</td>
                <td>@Html.TextBoxFor(model => Model.Address2, new { @class = "form_input radius" })<br /></td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => Model.Telephone)</td>
                <td>@Html.TextBoxFor(model => Model.Telephone, new { @class = "form_input radius" })<br /></td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => Model.Postcode)</td>
                <td>@Html.TextBoxFor(model => Model.Postcode, new { @class = "form_input radius" })<br /></td>
            </tr>
            @*  <tr>
                <td><input type="button" id="btnSearch" value="Search" class="submit submit_green fltl"></td>
                <td><input type="button" id="btnClose" value="Cancel" class="submit submit_green fltl"></td>
            </tr>*@
        </table>
    </div>
</div> 

    <script type="text/javascript">

        $.ajaxSetup({ cache: false });

        $(document).ready(function () {

            $("#btnFind")
                .click(function () {
                    $("#findCustomer").dialog("open");
                });

            $("#findCustomer")
                .dialog({
                    autoOpen: false,
                    height: 330,
                    width: 350,
                    modal: true,
                    title: 'Find Customer',
                    resizable: false,
                    buttons: {
                        'Search': function () {
                            var id = $("#txtOurRef").val();
                            $("#mainForm").load(id);
                            var form = $('#frmContactForm');
                            $.ajax({
                                type: 'POST',
                                url: '/Contacts/Index',
                                data: { strSearchParam: id },
                                cache: false,
                                //dataType: 'json',
                                success: function (data) {
                                    alert($("#mainForm"));
                                    alert(data);
                                    //form.replaceWith(data);
                                    $("#mainForm").load(data);
                                    $("#findCustomer").dialog("close");
                                },
                                error: function (jqXHR, textStatus, errorThrown) { debugger;/*see what happened */ }
                            })
                        },
                        'Cancel': function () {
                            $("#findCustomer").dialog("close");
                        }
                    },
                    error: function (error) {
                        alert('Fail');
                    }   
                });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:14:42.597

你用

```
 $("#mainForm").load(data); 
```

但如果数据不是 url，你应该使用

```
 $("#mainForm").html(data); 
```

可能你只是想替换 mainform 的内容，那么它会是这样的：

```
 $("#mainForm").html($(data).find("#mainForm").html()); 
```

# c++ - 通过构造函数初始化 char[40]

> ID：15905323
> 
> 赞同：0
> 
> 时间：2013-04-09T14:54:24.057
> 
> 标签：c++, char

我想初始化对象属性，但它只是一直说类型不匹配。如何纠正它？

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>

using namespace std;
class Student{
public:
    int nr_ID;
    char nazwisko[40];
    char imie[40];
    double punkty;
    Student* next;

    Student(int nr_ID, char nazwisko[40], char imie[], double punkty){
        this->nr_ID = nr_ID;
        this->nazwisko = nazwisko;//HERE
        this->imie = imie;//HERE
        this->punkty = punkty;
        next = NULL;
    }

    ~Student(){}

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:57:44.970

没有数组类型参数这样的东西。您声明`char nazwisko[40]`的参数实际上已转换为指针类型`char* nazwisko`。所以现在您可以看到您正在尝试将指针分配给数组。当然那是行不通的。

事实上，您根本不能简单地将数组相互分配。如果需要，您必须复制元素。您可以使用 C 函数`strcpy`来执行此操作，这将考虑到参数应该是 C 样式的字符串。如果你想复制整个数组，那么你可能想使用`std::copy`.

如果您确实在处理文本字符串，那么最好使用标准`std::string`类型来执行此操作。它们比数组更容易传递和分配`char`：

```
std::string nazwisko;
std::string imie;
// ...

Student(int nr_ID, std::string nazwisko, std::string imie, double punkty){
    this->nazwisko = nazwisko;
    this->imie = imie;
    // ...
} 
```

实际上，您可以省去默认初始化这些成员变量然后使用构造函数成员初始化列表分配给它们的痛苦：

```
Student(int nr_ID, std::string nazwisko, std::string imie, double punkty)
  : nr_ID(nr_ID), nazwisko(nazwisko), imie(imie), punkty(punkty), next(NULL)
{ } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T15:13:11.810

为了完整起见，这里是您可以更接近原始代码的方法（例如，正如有人建议的那样，如果您因为某些淫秽原因而不能使用 std::string）。这在很大程度上是矫枉过正且非常不典型的代码，但是嘿:)

```
template <size_t Lnaz, size_t Limi>
Student(int nr_ID, char const (&nazwisko)[Lnaz], char const (&imie)[Limi], double punkty)
    : nr_ID(nr_ID), punkty(punkty), next(nullptr)
{
    static_assert(Lnaz <= sizeof(this->nazwisko)/sizeof(*this->nazwisko), "too large");
    static_assert(Limi <= sizeof(this->imie)/sizeof(*this->imie), "too large");

    std::copy(nazwisko, nazwisko+Lnaz, this->nazwisko);
    std::copy(imie, imie+Limi, this->imie);
} 
```

笔记

*   这允许字符串包含嵌入的 NUL 字符。
*   诀窍是*通过引用*传递数组，以避免其他人描述的*衰减到指针*
*   此外，模板在那里是因为`"hello"`将是`char const (&)[6]`，并且`"bye"`将是`char const (&)[4]`- 不同的参数类型

**[在http://liveworkspace.org/code/2rxQrg$1](http://liveworkspace.org/code/2rxQrg%241)**上实时查看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:58:24.663

您可以通过替换`char`数组来简化问题`std::string`（或者`std::vector<char>`如果您的`char`数组不包含以空字符结尾的字符串）：

```
class Student{
public:
  int nr_ID;
  std::string nazwisko;
  std::string imie;
  double punkty;
  Student* next;

  Student(int nr_ID, 
          const std::string& nazwisko, 
          const std::string& imie, 
          double punkty)
    : nr_ID(nr_ID), nazwisko(nazwisko), imie(imie), punkty(punkty), next(NULL)
  {}
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:58:37.803

您没有确定`nazwisko`存储字符串或字符序列！

我假设，这是一个字符序列。（不是 C 风格的字符串）

使用[`std::memcpy`](http://en.cppreference.com/w/cpp/string/byte/memcpy)或[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)

```
 Student(int nr_ID, char nazwisko[40], char imie[], double punkty){
        //...
        std::memcpy(this->nazwisko, nazwisko, 40);

        or

        std::copy(nazwisko, nazwisko+40, this->nazwisko);
        //...
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T15:03:05.930

您不能将数组分配给另一个数组（看起来像您想要的那样），并且您不能将指针分配给数组（这是您正在尝试的）。您将需要复制元素。

在函数签名上，当调用该函数时，数组*衰减*为指针，我通常发现让代码看起来像编译器处理的那样有助于代码的可读性。您的构造函数签名是：

```
Student(int nr_ID, char *nazwisko, char *imie, double punkty) 
```

您可能需要考虑添加额外的大小参数来确定传递给第二个和第三个参数中的函数的内存块有多大。如果它们是纯字符串，您可以使用它`strncpy`来初始化数组成员：

```
Student(int nr_ID, 
        char const *nazwisko, // make it 'const' you don't modify the argument
        char const *imie,     // same here
        double punkty)
   : nr_ID(nr_ID), punkty(punkty)       // prefer initializer lists
{
   strncpy(this->nazwisko, nazwisko, 39); this->nazwisko[39] = 0;
   strncpy(this->imie,     imie,     39); this->imie[39] = 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T14:57:12.583

要复制 c 风格的字符数组，需要使用[strcpy](http://www.cplusplus.com/reference/cstring/strcpy/)函数。

在 C++ 中，请使用[std::string](http://www.cplusplus.com/reference/string/string/)类。其他一切都是等待发生的错误。

我刚刚注意到你有一个下一个指针。如果这不是链表的家庭作业，请考虑改用[std::list](http://www.cplusplus.com/reference/list/list/)或[std::vector](http://www.cplusplus.com/reference/vector/vector/)之类的容器。

# jquery - 将 jQuery DataTable 添加到 Asp.NET MVC 4 项目

> ID：15905328
> 
> 赞同：2
> 
> 时间：2013-04-09T14:54:39.863
> 
> 标签：jquery, asp.net-mvc-4

我想将 jQuery DataTable ( [http://www.datatables.net/](http://www.datatables.net/) ) 添加到我的 mvc4 站点。但它不起作用。不显示任何内容，表格看起来像添加脚本之前的样子。

FireBug 显示错误：

> TypeError: $(...).dataTable 不是函数

```
**Admin_panel.cshtml**

@model IEnumerable<Rejestracja_imprez.Models.User>

@{
    Layout = "~/Views/Shared/_PanelAdmin.cshtml";
    ViewBag.Title = "Admin";
}

    <script src="~/Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.dataTables.js" type="text/javascript"></script>
    <link href="~/Content/themes/base/jquery.dataTables.css" rel="stylesheet" type="text/css"/>

    <script type="text/javascript">
            $(document).ready(function () {
                $('#myDataTable').dataTable();
            });
        </script>

<table id="myDataTable">
.... 
```

在 html 页面中，它工作得很好。

```
<html>
    <head>
        <style type="text/css" title="currentStyle">
            @import "../../media/css/jquery.dataTables.css";
        </style>
        <script type="text/javascript" language="javascript" src="../../media/js/jquery.js"></script>
        <script type="text/javascript" language="javascript" src="../../media/js/jquery.dataTables.js"></script>

        <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                $('#example').dataTable();
            } );
        </script>
    </head>

    <body >

<table id="example" >
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T17:04:25.860

问题解决了；D

我将 jQuery 脚本添加到 App_Start 文件夹中的 BundleConfig.cs。

```
 **BundleConfig.cs**

 bundles.Add(new ScriptBundle("~/bundles/table").Include(
                        "~/Scripts/jquery.dataTables.js"));

 bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                        "~/Content/themes/base/jquery.ui.core.css",
                        "~/Content/themes/base/jquery.ui.resizable.css",
                        ............
                        "~/Content/themes/base/jquery.dataTables.css")); 
```

在 Admin_panel.cshtml 我添加：

```
**Admin_panel.cshtml**

@section Scripts {

    @Styles.Render("~/Content/themes/base/css")
    @Scripts.Render("~/bundles/table")

    <script>
        $(document).ready(function () {
            $('#myDataTable').dataTable();
        });
        </script>

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:35:40.740

我的猜测是...

*   文件路径中的错字
*   页面正文中的链接样式表存在问题（尝试通过部分在主布局头部呈现）
*   将资源加载到页面中的顺序
*   附加布局页面中出现错误/缺失

实际上，您正在尝试调用目前不存在的方法。

您可以尝试通过生成的路径（即`@Url.Content("~/Scripts/jquery.dataTables.js")`）引用您的剃刀视图的文件

如果这不起作用，您可以尝试在部分中添加文件并在布局页面中呈现此部分（在标记的适当部分！）。

# visual-studio-2008 - Visual Studio 2008 文档中的脚本错误

> ID：15905333
> 
> 赞同：1
> 
> 时间：2013-04-09T14:55:03.137
> 
> 标签：visual-studio-2008

几周以来，我遇到了以下问题：当我访问 Visual Studio 2008 文档时，每个页面都以德语显示错误：

```
Skriptfehler

In dem Skript auf dieser Seite ist ein Fehler aufgetreten.
Zeile: 1
Zeichen: 1
Fehler: Syntaxfehler
Code: 0
URL: http://msdn.microsoft.com/ScriptResource.axd?d=...

Möchten Sie, dass Skripts auf dieser Seite weiterhin ausgeführt werden?
Ja Nein 
```

这是英文：

```
Script Error

An error occured in the script on this page.
Line: 1
Character: 1
Error: Syntax error
Code: 0
URL: http://msdn.microsoft.com/ScriptResource.axd?d=...

Do you want that scripts will be executed on this page in future?
Yes No 
```

文档的每一页都会发生这种情况，并且显然，无论我单击是还是否，页面都会正确显示。但是每次访问帮助的每一页时，我都必须单击其中一个按钮。

如果这很重要，我的环境：Windows 7 SP1 64 位德语、Visual Studio 2008 英语、IE8 德语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T10:36:13.537

关闭 Visual Studio，包括。帮助（MS Help Viewer），然后转到 %LOCALAPPDATA%\Microsoft\（在我的例子中是“C:\Users\Administrator\AppData\Local\Microsoft\”）并将目录 HelpViewer2.0 重命名为 HelpViewer2.0。旧的（以防万一），然后重新启动 IDE。如果需要，重新配置 Visual Studio 帮助查看器以供本地使用。那为我修好了。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:02:46.740

已从 Microsoft 找到此建议，请尝试：

```
(1) go to Tools>Options>Web Browser,  
(2) change the conetents of Home
Page and point to ....http://msdn.microsoft.com, and  
(3) click the Ok button.   

Those messages are gone when I give it a try  in the Seach tab. 
```

# ruby-on-rails - 损坏的 psql。无法访问 psql 客户端

> ID：15905334
> 
> 赞同：0
> 
> 时间：2013-04-09T14:55:04.873
> 
> 标签：ruby-on-rails, postgresql, unix

我正在尝试使用 rails 3+ 设置 psql。我已经关注了这个[http://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)并且一切正常。我的 database.yml 有这个：

```
# PostgreSQL. Versions 8.2 and up are supported.
#
# Install the pg driver:
#   gem install pg
# On Mac OS X with macports:
#   gem install pg -- --with-pg-config=/opt/local/lib/postgresql84/bin/pg_config
# On Windows:
#   gem install pg
#       Choose the win32 build.
#       Install PostgreSQL and put its /bin directory on your path.
#
# Configure Using Gemfile
# gem 'pg'
#
development:
  adapter: postgresql
  encoding: unicode
  database: app_development
  pool: 5
  username: root
  password:
  host: localhost
  port: 5432

  # Connect on a TCP socket. Omitted by default since the client uses a
  # domain socket that doesn't need configuration. Windows does not have
  # domain sockets, so uncomment these lines.
  #host: localhost
  #port: 5432

  # Schema search path. The server defaults to $user,public
  #schema_search_path: myapp,sharedapp,public

  # Minimum log levels, in increasing order:
  #   debug5, debug4, debug3, debug2, debug1,
  #   log, notice, warning, error, fatal, and panic
  # The server defaults to notice.
  #min_messages: warning

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: unicode
  database: app_test
  pool: 5
  username: root
  password:
  host: localhost
  port: 5432

production:
  adapter: postgresql
  encoding: unicode
  database: app_production
  pool: 5
  username: root
  password:
  host: localhost
  port: 5432 
```

当我运行'psql -U root -h localhost -p 5432 -W'时，无论我给它什么密码，它都无法连接。'rake db：create：all'也失败了

```
Couldn't create database for {"adapter"=>"postgresql", "encoding"=>"unicode", "database"=>"app_production", "pool"=>5, "username"=>"root", "password"=>nil} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:59:24.950

我不确定你是如何安装 PostgreSQL 的——在我的 Mac 上，我发现它通常期望数据库用户名是我的用户名，并且没有密码。你确定你设置了root用户名和密码吗？

# php - 如何使用外部 php 文件以编程方式在 joomla 2.5 中创建类别

> ID：15905338
> 
> 赞同：0
> 
> 时间：2013-04-09T14:55:08.013
> 
> 标签：php, joomla, joomla2.5

我已经使用外部 php 文件加载了 joomla 环境。

```
<?php
require_once('configuration.php');
// Create a JConfig object
$config = new JConfig();
// Use the object in a meaningful way 
```

?>

现在如何在父类别下创建一个新类别..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:10:46.077

您应该使用 joomla 的 API，因为有一个您不想搞砸的资产表 这里已经发布了相同的问题：[如何在 Joomla 2.5 中添加类别](https://stackoverflow.com/questions/15003979/how-to-add-categories-in-joomla-2-5)

一个如何处理的例子检查：[https ://gist.github.com/mbabker/3211464](https://gist.github.com/mbabker/3211464)

使用setLocation，您可以设置父类别

可以在此处找到如何在外部文件中获取 Joomla 框架：[http ://docs.joomla.org/How_to_create_a_stand-alone_application_using_the_Joomla!_Framework](http://docs.joomla.org/How_to_create_a_stand-alone_application_using_the_Joomla!_Framework)

希望这有助于您的需求

# android - 如何在 API 7 的通知中显示长消息文本

> ID：15905350
> 
> 赞同：0
> 
> 时间：2013-04-09T14:55:44.410
> 
> 标签：android, notifications

我正在开发一个 Android 应用程序，我想在通知栏中显示一段长文本。

我的问题是我的应用程序最低 API 级别为 7。它是客户端强制要求的。

如何在通知栏中显示长文本？我看到了文档，但是 jellybean 版本中提供了大文本 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:03:58.233

抱歉，在 Jelly Bean 之前无法更改通知的大小（以容纳更多文本）。在标准模板中（请务必使用 support-v4 库中的[NotificationCompat.Builder](https://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)），您可以使用两行代码：`contentTitle`和`contentText`.

如果这还不够，您可以指定一个自定义视图，您可以尝试以较小的尺寸填充更多文本（因为视图的整体大小在 JB 之前无法更改）。但是，这会影响易读性，所以要小心。

不过，我认为最好的做法是将文本移到其他地方。点击通知可以产生一个包含全文的对话框；希望您的客户能够容忍这样的解决方案。

# c# - 收据打印机不打印第 2 页

> ID：15905351
> 
> 赞同：0
> 
> 时间：2013-04-09T14:55:44.997
> 
> 标签：c#, asp.net, printing, epson, receipt

我在尝试使用 ASP.NET C# 从 Web 应用程序打印到 Epson TM-U220 收据打印机时遇到问题。我的程序正在打印到收据打印机，但在打印了大约 60 行之后……打印机刚刚切断。我试图弄清楚如何调整这台打印机的高度，但似乎无法得到它。

我使用记事本在服务器上运行了一些测试，以确保它是应用程序。我在记事本中制作了一个 100 行的测试文档，并在打印机上打印得很好。从 Web 应用程序打印时，它似乎切断了第 2 页，我假设这是因为高度。

下面是代码示例。任何帮助表示赞赏！

```
PaperSize psize = new PaperSize("Custom", 100, 200);
doc.DefaultPageSettings.PaperSize = psize;
doc.DefaultPageSettings.PaperSize.Height = doc.DefaultPageSettings.PaperSize.Height / 2; 
//doc.DefaultPageSettings.PaperSize.Width = 520;
doc.PrinterSettings.PrinterName = Session["printerName"];// set the printer name by ID
doc.PrintPage += new PrintPageEventHandler(this.PagePrint);
doc.Print(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:41:44.040

Turns out it was an issue with the print driver.

Added the following line:

doc.DefaultPageSettings.PaperSize.Height

# sql - 如何从不包含撇号的搜索字符串中返回包含撇号的查询结果

> ID：15905356
> 
> 赞同：2
> 
> 时间：2013-04-09T14:55:56.470
> 
> 标签：sql, coldfusion, db2, coldfusion-7

我有一个简单的应用程序，它允许用户输入字符串以在数据库中搜索名称。服务器端是 ColdFusion 7。我遇到的问题是诸如“obrien”之类的查询不会返回名称为“o'brien”的条目。

我想我想要的是模糊匹配能力。在做了一些研究之后，我还遇到了全文搜索，这可能是我正在寻找的；但是，我不确定两者之间的区别。ColdFusion 有一个名为verity 的服务，但似乎我必须先查询所有数据库，然后对其进行索引——这听起来非常昂贵。

在 ColdFusion 中是否有内置方法可以在不首先查询整个数据库的情况下进行模糊匹配或全文搜索？如果没有，在进行全文搜索时，我是否必须指定索引？例如，obrien 应该索引到“obrien, o'brien, o'brein”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:43:55.803

尝试使用[SOUNDEX](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_bif_soundex.htm)功能怎么样？我认为这里没有任何简单的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:10:06.270

检查以下查询，

```
select * 
from tablename 
where  Replace(ColumnName,'''','') like 'obrien' 
```

或者

```
select * 
from tablename 
where  Replace(ColumnName,'''','') like '%obrien%' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T11:54:16.837

您正在寻找具有模糊匹配功能的全文搜索，更重要的是您正在寻找这些系统提供的内置标记器。但是，您也可以使用 SQL 函数来进行 Levenshtein 编辑距离匹配。

Verity 或任何其他信息检索系统（例如 Lucene）都是一种解决方案，但如果您需要实时搜索，则必须不断地从原始数据中重新索引您的数据。如果您不需要经常重新填充 Verity，这可能是一个不错的选择（尽管请祝福您处理它）。标记器处理来自数据库和用户的数据的格式化，以便您最终得到相同的字符串。在 ColdFusion 7 中 Verity 也很旧，所以我想它的模糊匹配选项与您在 Lucene 4 中找到的选项相比非常有限。

另一种选择是使用 sql 中的 aa 函数进行 levenshtein 编辑距离算法。这基本上会告诉您从一个字符串到另一个字符串需要进行多少次编辑。这是“模糊”匹配。例如，要将 lcase(O'brien) 转换为 lcase(obrien) 需要进行一次编辑，即删除“'”。一个六长字符串的编辑是一个很好的匹配。要将“休”变成“琼斯”，需要进行五次编辑（更改每个字母，添加一个字母）。长度为 4 的字符串的五次编辑不是很好的匹配。 [T-SQL 中的 Levenshtein 距离](https://stackoverflow.com/questions/560709/levenshtein-distance-in-t-sql)

最后，对于任何具有全文搜索的数据库，这将为您提供带有一些标记化的实时数据，例如真实性。这很好，因为它是如此简单的设置。我不确定 DB2 是否支持模糊匹配。SQL Server 没有。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-09T15:20:00.487

您在这里走错了路-它不是您需要的模糊匹配，而是参数化查询。

您可以将参数的值设置为“O'Brien”，该参数将了解嵌入撇号的功能。

# android - 如何更改标记在 Android Map v2 上的位置

> ID：15905359
> 
> 赞同：32
> 
> 时间：2013-04-09T14:56:03.273
> 
> 标签：android, android-maps-v2

我需要执行以下操作：我在地图上有一个标记，我需要更改它的位置。所以我尝试了以下方法：

```
MarkerOptions a = new MarkerOptions()
            .position(new LatLng(50,6)));
        map.addMarker(a);
        a.position(new LatLng(50,5)); 
```

其中地图是一个`GoogleMap`。我想我必须刷新地图或类似的东西？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-09T15:13:45.167

找到解决方案，需要这样做：

```
MarkerOptions a = new MarkerOptions()
    .position(new LatLng(50,6)));
Marker m = map.addMarker(a);
m.setPosition(new LatLng(50,5)); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-09T15:22:16.840

谷歌地图 v2 演示应用程序中有一个移动标记的示例。在文件中`adt-bundle-linux/sdk/extras/google/google_play_services/samples/maps/src/com/exa‌​mple/mapdemo/MarkerDemoActivity.java`（4.2.2 示例）

这里是移动标记的代码：

```
public void animateMarker(final Marker marker, final LatLng toPosition, final boolean hideMarker) {
    final Handler handler = new Handler();
    final long start = SystemClock.uptimeMillis();
    Projection proj = mGoogleMapObject.getProjection();
    Point startPoint = proj.toScreenLocation(marker.getPosition());
    final LatLng startLatLng = proj.fromScreenLocation(startPoint);
    final long duration = 500;

    final Interpolator interpolator = new LinearInterpolator();

    handler.post(new Runnable() {
        @Override
        public void run() {
            long elapsed = SystemClock.uptimeMillis() - start;
            float t = interpolator.getInterpolation((float) elapsed
                    / duration);
            double lng = t * toPosition.longitude + (1 - t)
                    * startLatLng.longitude;
            double lat = t * toPosition.latitude + (1 - t)
                    * startLatLng.latitude;
            marker.setPosition(new LatLng(lat, lng));

            if (t < 1.0) {
                // Post again 16ms later.
                handler.postDelayed(this, 16);
            } else {
                if (hideMarker) {
                    marker.setVisible(false);
                } else {
                    marker.setVisible(true);
                }
            }
        }
    });
} 
```

此代码将动画标记从一个地理点到另一个。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-12-08T10:50:24.063

StackOverflow 上的大多数答案都建议使用`remove()`删除标记，然后使用`addMarker`. 而不是这样做，只需将标记保存在`Marker`类型变量中一次，然后更新其位置。

```
MarkerOptions a = new MarkerOptions().position(new LatLng(50,6))); 
myMarker = mGoogleMap.addMarker(a); 
```

然后无需删除并重新创建标记，只需使用

```
myMarker.setPosition(newLatLng); 
```

希望这可以帮助 ！！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-05T17:08:32.867

在函数之外定义“标记”。第一次，它将为 null 并执行“if”条件。第二次将执行“else”。

```
 Marker marker = null;    
        protected void onPostExecute(Coordinates coordinates) {
        LatLng latLong = new LatLng("lat", "long");
        if (marker == null) {
            MarkerOptions options = new MarkerOptions().position(latLong)
                    .title("Marker Title");
            marker = mMap.addMarker(options);
        }
        else {
            marker.setPosition(latLong);
        }
     mMap.moveCamera(CameraUpdateFactory.newLatLng(latLong));
     mMap.animateCamera(CameraUpdateFactory.zoomTo(16f));
    } 
```

# indexing - 拖动列后的janus gridex索引

> ID：15905364
> 
> 赞同：0
> 
> 时间：2013-04-09T14:56:23.007
> 
> 标签：indexing, drag, janus, col, gridex

我在 vb6 中遇到了 Janus GridEX 的问题。

我实现了方法 _keydown 以便在数据库上进行搜索，因此当我按下特定键时，我会根据所选列进行更改并进行搜索。

为此，我通过使用 gridex 的方法 .col 获得我所在的列的索引，一切正常，但是如果我在 gridex 中拖动列更改其位置，.col 值会发生变化，但奇怪的是问题是，如果我尝试使用 .value(intColumn) 方法访问列的值，则 col 索引似乎没有改变。

例如，如果我在第 4 列中进行给定搜索，并且将索引高于 4 的列拖动到索引小于 4 的位置，我会得到以下情况，.col 给我值 5，但是如果我调用 .value(5)，我不会得到之前在第 4 列中的值，如果我调用 .value(4)，我会得到它。

因此，我不明白在拖动列时索引如何变化。有人有一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T02:55:24.013

我使用 Janus 库并且我总是使用 Key 属性而不是硬编码的 col 数字。

这是一个例子：

```
Decimal name = String.Empty;

if (grdEx.CurrentColumn.Key == "Name")
    name = Convert.ToString(grdEx.GetValue("Name")); 
```

这将始终防止像您的情况那样的错误。

# android - 使用arrayadapter、文件和文件描述对两个数组进行排序

> ID：15905365
> 
> 赞同：2
> 
> 时间：2013-04-09T14:56:28.187
> 
> 标签：android, arrays, sorting, android-arrayadapter

我有 2 个 String[] 数组：
String[] mFileList;
字符串[] mFileList_description;
这是我的函数，它显示带有文件描述列表的警报对话框：

```
private void Load_file_list(){
Dialog dialog = null;
AlertDialog.Builder alertdg = new AlertDialog.Builder(this); 
alertdg.setTitle("FILES");
alertdg.setTitle("Select file");

final ArrayAdapter<String> adapter;
final EditText filtr = new EditText(this); 
final ListView lista = new ListView(this); 

 adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, mFileList_description);
 lista.setAdapter(adapter);
/////////
 filtr.addTextChangedListener(new TextWatcher() {
    @Override
    public void afterTextChanged(Editable arg0) {
    }
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }
    @Override
    public void onTextChanged(CharSequence cs, int start, int before,
            int count) {
        // sort
        adapter.getFilter().filter(cs);
        adapter.notifyDataSetChanged();
    } 
 });
 lista.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Log.d("TEST","File id:"+arg2+" File name:"+mFileList[arg2]);
    }
   });
 /////////

LinearLayout layout = new LinearLayout(this);
layout.setOrientation(LinearLayout.VERTICAL);
layout.addView(filtr); 
layout.addView(lista); 
alertdg.setView(layout); 
alertdg.show(); 
} 
```

我有问题，当我对描述列表进行排序时，因为 setOnItemClickListener 方法返回用户单击的描述的 id，但它不是数组 mFileList 中的 id（有时这个 id 来自另一个文件）

如何使用 desctiption 对我的文件进行排序？我厌倦了以二维数组完成此操作，但我认为另一种方式会更好......

谢谢，对不起我的英语......;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:18:47.500

首先，对于大多数人来说，**您在这里遵循了一个不好的模式**。

## 优化解决方案：

我建议您保留 1 个`Array`或`ArrayList`用户定义的对象类型，而不是保留 2 个数组。

例如：

```
/**
Here `MyFileClass` is a clsss with attributes whatever you want to store for 
Files and also contains getter/setter methods **/

MyFileClass[] objFiles = new MyFileClass[4];
or
ArrayList<MyFileClass> listFileObjs = new ArrayList<MyFileClass>(); 
```

但我再次建议您使用，`ArrayList`因为与 `Array`.

现在，当您拥有单身`ArrayList<MyFileClass>`时，您可以通过执行任何您想要的操作来轻松管理它。

# javascript - 有没有办法将 OpenTextFile 用于服务器目的？

> ID：15905367
> 
> 赞同：1
> 
> 时间：2013-04-09T14:56:34.783
> 
> 标签：javascript, html, internet-explorer, createfile, filesystemobject

我正在使用以下代码，在本地使用时它工作得很好，但它可以用于服务器目的吗？

```
function WriteToFile(data) {
    var currentdate = new Date(); 
    var datetime = "Time: " + currentdate.getDate() + "/" + (currentdate.getMonth()+1)  + "/" + currentdate.getFullYear() + " @ " + currentdate.getHours() + ":" + currentdate.getMinutes() + ":" + currentdate.getSeconds();
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var a = fso.OpenTextFile("C:\\logs\\log.txt", 8);
    a.WriteLine(datetime);
    a.WriteLine(data + "\n");
    a.Close();
 } 
```

我已经为我的 Z: 驱动器中的 txt 文件的路径尝试了所有方法，但没有任何运气。这甚至可能吗？我还授予对文件夹“所有人”的访问权限，因此它可以读取和写入，但我仍然无法打开 txt 文件进行编辑。作为记录，我使用的是 IE8。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:21:34.067

You cannot access any of the files on the server with the ActiveX **Scripting.FileSystemObject** using the syntax in your example. This is since the ActiveX FileSystemObject control will be executed on the client side because there's no remote server specified and therefore it only has access to the client's file system. You could specify a remote server using your syntax, but it's [not supported](http://msdn.microsoft.com/en-us/library/ie/7sw4ddf8%28v=vs.94%29.aspx) in IE 9 standards mode, or IE 10 and above, so it's not really recommended.

Instead, to access the server's file system you will need to create a FileSystemObject on the server side using a server-side language such as Active Server Pages (ASP). In ASP FileSystemObject it would be instantiated using `Server.CreateObject("Scripting.FileSystemObject")`

Some good examples for using FileSystemObject with ASP can be found here: [http://support.microsoft.com/kb/218606](http://support.microsoft.com/kb/218606) and here:[http://www.codeproject.com/Articles/7296/Reading-Files-in-ASP-and-How-to-Search-for-a-parti](http://www.codeproject.com/Articles/7296/Reading-Files-in-ASP-and-How-to-Search-for-a-parti)

# performance - 找到更好的查询和 LINQ 进行改进

> ID：15905369
> 
> 赞同：2
> 
> 时间：2013-04-09T14:56:38.967
> 
> 标签：performance, linq, sql-server-2008, c#-4.0

我试图从以下 SQL Server 2008 R2 查询中查找：

客户及其在订单明细表中放置了某些产品的订单。

此产品必须从交叉引用表中匹配。

该查询还在查看另一个表（激活），如果在其中找到任何订单 ID，则忽略它们。

这是我的查询：

```
Select O.CustomerId, O.OrderId
from Orders O 
    inner join Customers C
        on O.CustomerId=C.Customerid
where O.orderid not in
(
    Select orderid 
    from activations
)
and OrderId In
(
    Select orderid 
    from  Orderdetails
    WHERE EXISTS
    (
        select * 
        from  OrderActivationCrossRef
        Where Orderdetails.productId=OrderActivationCrossRef.productId
    )
) 
```

可以改进此查询吗？ LINQ 的等价物是什么？
先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:07:27.340

确切的变量名称将取决于您的上下文是如何设置的，但您的整体 LINQ 查询应该是这样的：

```
from o in ctx.Orders 
from c in o.Customers
where !o.Activations.Any() &&
    o.Orderdetails.Any(d => d.OrderActivationCrossRef.Any())
select new {o.CustomerId, o.OrderId} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:57:04.007

这是sql

```
Select O.CustomerId, O.OrderId
from Orders O 
    inner join Customers C on O.CustomerId=C.Customerid -- forces items that exist in customers
    left join activations a on a.orderid = O.orderid
    join orderdetails d on d.orderid = O.orderid  -- forces only items that exist in details
    join OrderActivationCrossRef c on d.productId = c.productId  -- forces only items that exist in crossref
where 
  a.orderid is null -- forces items that don't exist in activations 
```

# plugins - Joomla 3.0 插件更新错误

> ID：15905374
> 
> 赞同：0
> 
> 时间：2013-04-09T14:57:03.667
> 
> 标签：plugins, joomla

我在更新 Joomla 3.0 中的插件时遇到问题我有需要更新的 T3 插件，当我去更新它时出现错误：

发生错误。复制文件失败。

我去检查了我所有的警告，但我没有。我还检查了目录权限，所有文件夹都是可写的。

关于如何解决更新错误的任何想法？

# php - Emogrify HTML 和 CSS 文件（不是电子邮件）

> ID：15905381
> 
> 赞同：1
> 
> 时间：2013-04-09T14:57:21.423
> 
> 标签：php, html, css

我一直在寻找有关如何使用[Emogrifier](http://www.pelagodesign.com/sidecar/emogrifier/)将链接 CSSv3 的 HTML 转换为内联 HTML 格式的信息。到目前为止，我一直在寻找与向不允许 CSS 的网站发送电子邮件有关的事情。

有关我的问题集的更多信息：我有一个 HTML 文档，带有链接的 CSS，格式很好，我需要将其作为 doc(x) 打开。Word 不支持 v1 以上的 CSS。我正在使用 v3。截至目前，由于缺少 CSS，在转换时格式非常糟糕。我有多个 HTML 文档和 CSS 文件要转换为内联格式，并且不想手动进行。

我曾尝试使用[Emogrifier](http://www.pelagodesign.com/sidecar/emogrifier/)，但似乎总是从我的服务器收到错误页面`(using MAMP)`。该页面一直有效，直到它到达这些`Emogrify`部分。我尝试了带和不带 args 的构造函数。如果没有，我提供了带有 set 函数的 HTML 和 CSS。我还尝试使用 和 传递`fopen()`文件`file_get_contents()`。

**元素和版本：**

> *   MAMP 版本 2
> *   阿帕奇 2.0.64
> *   PHP 5.4.10

**问题 1：** Emogrifier 可以处理电子邮件以外的事情吗？

**问题 2：**是否有其他产品/程序可以更好地满足我的需求？

**问题3：**我的代码有问题吗？

```
<?php
  include(emogrifier.php);

  $site = file_get_contents('file.html');
  $link = file_get_contents('file.css');

  $emog = new Emogrifier($site,$link);

  /* alternate call
  $emog = new Emogrifier;
  $emog->setHTML($site);
  $emog->setCSS($link);
  */
  $result = $emog->emogrify();

  print($result);

  ?> 
```

**编辑**

我试图将三种类型的变量传递给构造函数：

> *   文件路径
> *   文件指针 (fopen())
> *   字符串 (file_get_contents())

尝试访问 php 页面时，我在浏览器中收到服务器错误：

> 网站在检索 http://localhost/file.php 时遇到错误。它可能因维护而停机或配置不正确。

我已经注释掉了构造函数和函数调用，它们允许页面使用 echo 语句“工作”以进行测试。然而，即使只是构造函数取消注释也会导致错误。

当“运行” emogrifier.php 文件时，页面加载得很好（白屏，没有打印输出）。

这是我对这个问题的所有信息。

**最终编辑**

我只是想把这个包起来。

我从来没有一个表情包来解决我的问题。我最终使用带有大量 VisualBasic 编辑的 Word 宏来获得我们想要的格式。这是一个复杂的解决方案，因为宏系统没有很好的文档记录。另外，由于我要修改很多表格和单元格，谷歌搜索几乎没有帮助，因为在搜索单元格时，所有内容都出现在 Excel 中。

...然后他们将报告格式移至其他格式，而我的工作无论如何都没有使用！哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:08:24.757

> Emogrifier 可以处理电子邮件以外的事情吗？

好吧，它实际上适用于 HTML，而不是电子邮件。HTML 旨在用于电子邮件，但您可以在任何您喜欢的地方使用它。

> 是否有其他产品/程序可以更好地满足我的需求？

这是个好问题！我倾向于说：是的，可能有。请联系专门与您一起寻找软件组件的顾问。

> 我的代码有问题吗？

从你给出的描述我会说是的。尤其是您谈论错误的部分。但是，由于您描述该错误的不确定性，由于不确定性，我只能说：是的，您的代码可能有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-12T02:05:05.093

我已经成功使用了 Emogrifier。这是有效的代码片段。

```
$emogrifier = new \Pelago\Emogrifier();
$emogrifier->setHtml($Data);
$cssFile = mb_substr($curFile, 0, 6) . 'override.css'; // each issue has a common CSS file
$emogrifier->setCss(fgc_UTF8($cssFile));
//After you have set the HTML and CSS, you can call the emogrify method to merge both:
$Data = $emogrifier->emogrify(); 
```

# ios - iOS ViewController uilabel 仅更新标签栏应用程序中的旋转

> ID：15905384
> 
> 赞同：0
> 
> 时间：2013-04-09T14:57:34.007
> 
> 标签：ios, rotation, uilabel, viewcontroller

我是 iOS 开发的新手，并试图弄清楚这里发生了什么。我有一个带有多个 ViewController 和类的选项卡栏应用程序。我的一个课程被调用并更新了运行良好的 uilabels。然后调用另一个类，它也运行一个后台循环，该循环旨在更新同一 ViewController 上的一些其他 uilabels，它们会使用循环中的第一个条目更新一次，但不会在循环保持在后台运行时更新。我可以看到循环仍在运行，并且在我使用 NSLog 记录输出时细节正在发生变化。

ViewController 还支持旋转，如果我旋转屏幕，则循环中的数字将被绘制到 uilabel 并固定，直到我再次旋转屏幕，即如果我将循环设置为 5 然后重置，具体取决于在循环我旋转屏幕将取决于 1 到 5 之间的哪个数字被绘制到 uilabel。

在单个 ViewController 应用程序上运行良好，循环运行并且 uilabels 按预期实时更新。

从 [super viewDidLoad] 调用更新 uilabels 的类。

谢谢

**这是带有循环的类：-**

```
 + (void)Loop:(FirstViewController *)vc

 {
 NSLog(@"start");

    static NSUInteger counter1 = 0;
    NSLog(@"with count %d", counter1);

    counter1++;
    NSLog(@"count ++ %d", counter1);

    NSString *label01 = [NSString stringWithFormat: @"%d", counter1];

    //update uilabel
    vc.cha01.text = label01;

            if (counter1 >= 5) {

                            counter1 = 0;

                            }

      // run loop with 1 second delay
      [self performSelector:@selector(Loop:) withObject:nil afterDelay:1];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:03:01.207

你循环是错误的，在第一次去你传递 viewController 但是当你调用你时`performSelector:withObject:afterDelay:`你正在传递`nil`.

因此`vc`参数将是`nil`，只需传递`vc`参数：

```
 // run loop with 1 second delay
  [self performSelector:@selector(Loop:) withObject:vc afterDelay:1]; 
```

只是提示，您应该使用自定义对象来保存数据，然后在`- (void)viewDidAppear:(BOOL)animated`读出值并设置标签。A`UIViewController`可以卸载以释放内存，这可能会导致您的代码出现问题。

只需使用 MVC 解决方案，从而在您的案例中保存数据和字符串的模型。然后在 de 中设置标签，MVC 的视图部分，MVC 中`UIViewController`的控制器。

* * *

~~加载视图后，将`-(void)viewDidLoad`不再调用。这适用于您在`UITabBarController`.~~

~~您应该将更新标签的代码移动到`- (void)viewDidAppear:(BOOL)animated`方法中。~~

# gcc - 为 ARM 链接 Xenomai 程序时未定义的引用？

> ID：15905385
> 
> 赞同：1
> 
> 时间：2013-04-09T14:57:34.347
> 
> 标签：gcc, arm, linker-errors, xenomai

我正在尝试为运行 Xenomai（2.5.6 / Linux 2.6.35.9）的嵌入式应用程序交叉编译 C 代码。我从 Xenomai 示例开始，并尝试使用他们的 Makefile 编译它们，但它们无法正常工作（此外，我想为我的 ARM 机器进行交叉编译）。

我遵循[本](http://www.cs.ru.nl/lab/xenomai/exercises/ex01/Exercise-1.html)教程并找到了一种手动编译源代码的方法，恰好是这个：

```
arm-linux-gnueabi-gcc \
    -I/home/carles/.../xenomai-2.5.6/usr/xenomai/include \ 
    -D_GNU_SOURCE -D_REENTRANT -Wall -pipe -D__XENO__ \
    -lnative \
    -L/home/carles/.../xenomai-2.5.6/usr/xenomai/lib \
    -lxenomai -lpthread -lrtdk \
    rtprint.c -o rtprint 
```

`arm-linux-gnueabi-gcc`我用来交叉编译 ARM 的工具链在哪里，`-I/home/...`是头文件所在`-L/home/...`的路径，也是所有库所在的路径。在 Xenomai 安装期间放入该文件夹的那些头文件和库（因此它们是为 ARM 构建的）。

CFLAGS 和 LDFLAGS 是`xeno-config`按照教程中的说明生成的，但是当我执行命令时，出现以下链接器错误：

```
$ arm-linux-gnueabi-gcc -I/home/carles/Develop/xenomai-2.5.6/usr/xenomai/include -D_GNU_SOURCE -D_REENTRANT -Wall -pipe -D__XENO__ -lnative -L/home/carles/Develop/xenomai-2.5.6/usr/xenomai/lib -lxenomai -lpthread -lrtdk rtprint.c -o rtprint
/tmp/ccEpFEIl.o: In function `rt_task_spawn':
rtprint.c:(.text+0x34): undefined reference to `rt_task_create'
rtprint.c:(.text+0x54): undefined reference to `rt_task_start'
/tmp/ccEpFEIl.o: In function `task2_func':
rtprint.c:(.text+0x88): undefined reference to `rt_printf'
rtprint.c:(.text+0x98): undefined reference to `rt_task_set_mode'
rtprint.c:(.text+0xa4): undefined reference to `rt_task_sleep'
rtprint.c:(.text+0xb0): undefined reference to `rt_print_buffer_name'
rtprint.c:(.text+0xd4): undefined reference to `rt_fprintf'
/tmp/ccEpFEIl.o: In function `main':
rtprint.c:(.text+0x11c): undefined reference to `rt_print_auto_init'
rtprint.c:(.text+0x128): undefined reference to `rt_print_init'
rtprint.c:(.text+0x140): undefined reference to `rt_task_shadow'
rtprint.c:(.text+0x180): undefined reference to `rt_task_set_mode'
rtprint.c:(.text+0x18c): undefined reference to `rt_task_sleep'
rtprint.c:(.text+0x190): undefined reference to `rt_print_buffer_name'
rtprint.c:(.text+0x1b0): undefined reference to `rt_printf'
collect2: error: ld returned 1 exit status 
```

所有`rt_...`引用都是库中包含的 Xenomai 的内核函数。

* * *

**编辑：**添加`-lrt`到命令行并正确排序参数（即`-L`在命令行末尾）并不能解决问题。为了确保库确实包含函数，我执行`objdump`并得到以下结果：

```
.../usr/xenomai/lib$ arm-linux-gnueabi-objdump -x librtdk.a | grep rt_print
00000000         *UND*  00000000 __rt_print_init
00000000         *UND*  00000000 __rt_print_exit
00000000 R_ARM_JUMP24      __rt_print_init
00000000 R_ARM_JUMP24      __rt_print_exit
librtdk_la-rt_print.o:     file format elf32-littlearm
rw-rw-r-- 1001/1001   6872 Apr  8 16:06 2013 librtdk_la-rt_print.o
00000000 l    df *ABS*  00000000 rt_print.c
00000350 g     F .text  0000012c rt_print_init
00000744 g     F .text  0000003c rt_printf
000007c8 g     F .text  00000010 rt_print_auto_init
000007d8 g     F .text  00000044 rt_print_cleanup
0000081c g     F .text  00000058 rt_print_buffer_name
00000874 g     F .text  00000190 __rt_print_init
00000a04 g     F .text  00000034 __rt_print_exit
000006b8 R_ARM_CALL        rt_print_init
00000850 R_ARM_CALL        rt_print_init 
```

我做的其他事情可能有助于发现问题：

1.  安装与 xenomai 相关的软件包（[xenomai-runtime](http://packages.ubuntu.com/quantal/devel/xenomai-runtime)、[libxenomai1](http://packages.ubuntu.com/quantal/libxenomai1)、[linux-patch-xenomai](http://packages.ubuntu.com/quantal/linux-patch-xenomai)）
2.  删除了不同的工具链。因为我第一次在我的目标设备中使用 Ångström 发行版，所以我有一个专门的工具链。现在，我搬到了 Debian，我正在使用[binutils-arm-linux-gnueabi 包](http://packages.ubuntu.com/quantal/binutils-arm-linux-gnueabi)`arm-linux-gnueabi`中提供的工具链。
3.  编译了一个新的 Linux 内核和 Xenomai（用于我的目标设备）。内核版本是 2.6.35.9，Xenomai 是 2.5.6。我应该使用早期版本吗？无论如何，Xenomai 安装正确，因为我可以运行预编译的程序（讽刺的是，在 Xenomai 的安装过程中，我自己编译了这些程序......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:01:07.893

看来这里发生了魔法。经过两天的 Makefile、Xenomai CFLAGS 和链接器配置，我已经到了编译和链接都没有问题的地步。

我真的没有做过什么特别的事情。我没有（卸载）任何包（除了我已经拥有的包），也没有修改任何环境变量，也没有在我的命令行中添加任何不同的标志或参数。我刚刚重新启动了我的电脑。我什至不是故意这样做的，我昨天刚离开实验室，命令完全不起作用，今天早上一切正常。奇怪的？是的。

我猜它与终端会话中的导出变量有某种关系。我记得我修改了 LD_LIBRARY_PATH、CFLAGS、LDFLAGS 等等，所以我在尝试解决问题时一定搞砸了。对于那些想知道为运行 Linux 2.6.39.5 的 ARM 机器交叉编译 Xenomai (2.5.6) 应用程序的最终工作命令的人来说，就是这样：

```
arm-linux-gnueabi-gcc file_name.c -o file_name         \
    -I/path/to/target/usr/xenomai/include              \
    -D_GNU_SOURCE -D_REENTRANT -Wall -pipe -D__XENO__  \
    -lnative -lxenomai -lrt -lpthread -lrtdk           \
    -L/path/to/target/usr/xenomai/lib 
```

# android - 全屏活动 - 系统 UI

> ID：15905389
> 
> 赞同：0
> 
> 时间：2013-04-09T14:57:39.550
> 
> 标签：android, android-layout, android-fullscreen

我有一个带有文本视图的全屏活动，文本视图活动是以编程方式创建的。当显示系统 UI 时，此文本视图不会保留在同一位置，而是下降到系统 UI 上部结束的位置。我尝试了不同的布局参数，但到目前为止它们都没有奏效。

# oracle - 读取excel文件并保存到数据库？

> ID：15905390
> 
> 赞同：0
> 
> 时间：2013-04-09T14:57:41.133
> 
> 标签：oracle, excel, servlets, vector, apache-poi

我正在读取一个 Excel 文件并将其保存到数据库中。

我正在迭代每一行和单元格并将其保存到矢量对象，然后使用循环，将其保存到数据库中。当我保存它的数据库时，我正在这样做：

```
id = ((XSSFCell) cellStoreVector.get(0)).toString()==null?"":((XSSFCell) cellStoreVector.get(0)).toString(); 
```

对于每一列。除了我得到 2.01356229E8 作为 id 的这个之外，其他一切都很好。我不知道为什么我的 id 中会出现 2.01356229E8 ..应该是这样的 201356229。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:59:16.140

这不是 Excel 显示问题，因为该值已使用 Apache POI 提取到 Java 中。但是当`XSSFCell#toString()`被调用时，Apache POI 代码使用以下表达式将具有类型的单元格转换为`CELL_TYPE_NUMERIC`in 中的字符串`toString()`：

```
return getNumericCellValue() + ""; 
```

该[`XSSFCell#getNumericCellValue()`](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFCell.html#getNumericCellValue%28%29)方法返回 a `double`，将其转换为字符串时会生成字符串`"2.01356229E8"`。这是预期的从 a`double`到 a的 Java 转换，`String`因为`"2.01356229E8"`它是`201356229`. （在数学中，表示`201356229`和`2.01356229E8`是等价的。）

如果您要保存到的 Oracle 数据库中的列是 a `VARCHAR2`，那么您需要在将字符串值保存到数据库之前对其进行格式化。这将存储`"201356229"`在`id`：

```
DecimalFormat df = new DecimalFormat("#");
id = df.format( ((XSSFCell) cellStoreVector.get(0)).getNumericCellValue() ); 
```

如果列是 a `NUMBER`，则不要先将其转换为 String ，只需使用数字单元格值作为 a`double`传递给数据库。

```
double numericId = ((XSSFCell) cellStoreVector.get(0)).getNumericCellValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:08:09.130

这听起来像是 Excel 显示问题。Excel 不知道您希望它是一个整数。

您可能希望使其更宽（选择整列，右键单击，列宽...并输入 10）。

您也可以选择列，右键单击，格式化单元格...，选择数字，将小数位数更改为 0）。

# c# - 获取 Xml 文本节点 ID

> ID：15905394
> 
> 赞同：1
> 
> 时间：2013-04-09T14:57:53.650
> 
> 标签：c#, xml, xml-parsing, docx, xmlnode

我正在尝试解析 .docx 文件的 document.xml 文件。我想搜索文本，然后返回文本所在的节点，这样我就可以向上移动到父节点并插入新的节点类型。这是我到目前为止所拥有的，我一直在尝试使用 SelectSingle 节点，但我似乎无法找到正确的路径（“路径在 /w:body 之前是正确的）。所以我只想搜索如果可能的话，文本并以这种方式获取节点。

```
NameTable nt = new NameTable();
XmlNamespaceManager nsManager = new XmlNamespaceManager(nt);
nsManager.AddNamespace("w", wordmlNamespace);

// Get the document part from the package.
// Load the XML in the document part into an XmlDocument instance.
XmlDocument xdoc = new XmlDocument(nt);
xdoc.Load(wdDoc.MainDocumentPart.GetStream());
XmlNode ALL = xdoc.SelectSingleNode("/w:document/w:body/w:p/w:r[w:t='[ALL]']", nsManager);
if (ALL != null)
{
    XmlElement vanish = xdoc.CreateElement( "//w:vanish /");
    XmlNode topNode = ALL.ParentNode.ParentNode;
    XmlNode topParentNode = topNode.ParentNode;
    topParentNode.InsertBefore(vanish,topParentNode.FirstChild);

}

// Save the document XML back to its document part.
xdoc.Save(wdDoc.MainDocumentPart.GetStream(FileMode.Create, FileAccess.Write)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:48:46.813

你的 xpath 应该是 `"//w:t='[ALL]']"`.

# tomcat - 我可以在不调用 run-app 的情况下将 Grails 设置为自动编译吗？

> ID：15905401
> 
> 赞同：1
> 
> 时间：2013-04-09T14:58:01.460
> 
> 标签：tomcat, grails

我需要能够在与我运行的其他一些 servlet 相同的 tomcat 容器中运行 Grails。所以我想连接 tomcat 以运行我的 grails web-app 目录或其他东西，并让 grails 自动编译代码更改，就像我正在运行`run-app`. 但由于我想使用 tomcat 进行开发，我不想也一直在运行`run-app`。我怎样才能让 grails 自动编译我的代码`run-app`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:19:36.883

如果您将生成的 war 文件目标配置为指向您的 tomcats webapps 文件夹并告诉 grails 导出已经爆炸的战争，您可能会实现您想要的。然后你需要做的就是调用`grails war`，你的项目将被重新编译。对不起，简短的回答，但我现在正在用手机打字......

# c# - 命名 RESTful 路径

> ID：15905407
> 
> 赞同：5
> 
> 时间：2013-04-09T14:58:15.660
> 
> 标签：c#, java, web-services

我正在创建一个 Web 服务，但我对路径名有一些疑问。如何在 RESTful Web 服务中指定对资源的操作？

例如：测验资源。您有正常的 CRUD 操作，并且您还想对测验做一些事情。比如生成一个新的测验。那是一个动作。您是否使用类似`/quiz/top5`or`/quiz?type=top5`或什么的路径？

我不明白您在创建 RESTful 服务时如何编写对资源执行操作的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:03:34.013

这是你喜欢的。我个人喜欢 last.fm API 的工作方式：

[http://www.last.fm/api/intro](http://www.last.fm/api/intro)

但是，如果您正在寻找一些不错的标准，请查看以下帖子：

[什么是最好的/常见的 RESTful url 动词和动作？](https://stackoverflow.com/questions/256349/what-are-the-best-common-restful-url-verbs-and-actions)

[如何创建没有动词的 REST URL？](https://stackoverflow.com/questions/1619152/how-to-create-rest-urls-without-verbs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:33:35.117

我会推荐来自[apigee](http://apigee.com/about)的这本电子书：[Web API 设计：制作开发人员喜爱的界面](https://blog.apigee.com/detail/announcement_new_ebook_on_web_api_design)。

听从他们的建议：

*   实用 RESTful 设计的第一条原则是：让简单的事情变得简单。
*   保持您的基本 URL 简单直观。

> ```
> +------------+-------------------+--------------+----------------------------------------+------------------+
> | Resource   | POST create       | GET read     | PUT update                             | DELETE delete    |
> | /quizzes   | Create a new quiz | List quizs   | Bulk update quizs                      | Delete all quizs |
> | /quizes/12 | Error             | Show Quiz 12 | If exists update Quiz 12, if not Error | Delete Quiz 12   |
> +------------+-------------------+--------------+-----------------------------------------+------------------+ 
> ```

关于您想要的顶级列表，也许类似于他们在“分页和部分响应”部分中概述的解决方案可能适合您的需求：

`quizzes/top?limit=5`

有了这个，您可以首先制作`quizs/top`具有默认值（5 或 10 个项目）的资源，然后提供分页/更改项目数量的能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:00:34.253

这完全取决于您 - RESTful 模式不规定命名约定。

[什么是最好的/常见的 RESTful url 动词和动作？](https://stackoverflow.com/questions/256349/what-are-the-best-common-restful-url-verbs-and-actions)这可以帮助你吗？

只需让路线合理：例如 quiz/show/{id}、quiz/top/{number} 等...

编辑：添加对路由操作命名评论的答案，取自 Rails Convention。 [http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:04:50.127

我建议阅读此答案[https://stackoverflow.com/a/11170376/300886](https://stackoverflow.com/a/11170376/300886)来回答类似的问题。

一般来说，您应该考虑 API 的哪些部分应该通过 GET 可用，哪些通过 POST 可用。通过 GET 获得的资源通常应该用名词来描述，动作（比如可能发布一个测验的答案）应该通过 POST（或者 DELETE，也许）使用动词来描述，也许在名词之后 - 资源的名称采取行动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T15:08:39.107

[如本文](http://www.ibm.com/developerworks/webservices/library/ws-restful/)所述，最好对 REST URL使用**类似目录的结构**。

像这样的网址`/{type}/{operation}/{param1}/{param2}...`

看起来更直观和可维护（如果参数太多，可以作为经典传递`?=`）

所以在你的情况下它可以是`/quiz/top/5`或者如果明天它应该是**前 100 名**，那么同样可以重复使用`/quiz/top/100`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T15:22:06.047

**URL 标识**您的对象。**HTTP 方法指定**服务器应该对对象执行的操作（或操作）。

例如：

```
/quiz/top5 
```

*   **HTTP GET**：客户端请求查看测验top5，这是否意味着创建一个新的？或者这是否意味着显示现有的？这取决于您（GET 的约定是在不改变服务器状态的情况下请求对象）。
*   **HTTP POST**：客户端请求持久化更改

# c# - 可继承的依赖属性

> ID：15905412
> 
> 赞同：1
> 
> 时间：2013-04-09T14:58:35.573
> 
> 标签：c#, wpf, inheritance, user-controls, dependency-properties

我有各种各样的用户控件，我正在尝试查看是否可以为它们创建一个具有一些依赖属性的基类。

具体来说，我的大多数用户控件都遵循这种格式......

```
<UserControl DataContext="{Binding MyDataContext}" >
    <Expander IsExpanded="{Binding MyExpandedByDefault}">
        <TextBlock>Some text</TextBlock>
    </Expander>
</UserControl> 
```

当然，通常如果这只是一次性的，我会在后面的代码中为上述用户控件编写依赖属性。但是，由于我有多个遵循相同格式的用户控件，所以我想在基类中放置类似以下内容...

```
public bool ExpandedByDefault
{
    get { return (bool)GetValue(ExpandedByDefaultProperty); }
    set { SetValue(ExpandedByDefaultProperty, value); }
}

public static readonly DependencyProperty ExpandedByDefaultProperty =
    DependencyProperty.Register("ExpandedByDefault", typeof(bool), typeof(MyBaseView), new UIPropertyMetadata()); 
```

我希望它在某个地方被继承，所以在我的主窗口中我可以做类似的事情......

```
<Window>
    <StackPanel>
        <my:Alpha ExpandedByDefault="True" />
        <my:Bravo ExpandedByDefault="False" />
    </StackPanel>
</Window> 
```

谢谢

**编辑：**

我做了一个这样的基类......

```
public class ViewBase : UserControl
{
    public static readonly DependencyProperty ExpandedByDefaultProperty =
                 DependencyProperty.Register("ExpandedByDefault",
                                             typeof(bool),
                                             typeof(FiapaDbViewerBase),
                                             new FrameworkPropertyMetadata());

    public bool ExpandedByDefault
    {
        get
        {
            return (bool)this.GetValue(ExpandedByDefaultProperty);
        }
        set
        {
            this.SetValue(ExpandedByDefaultProperty, value);
        }
    }
} 
```

但是当我尝试在我的用户控件背后的代码中继承它时......

```
public partial class MyUserControl : ViewBase
{
    public MyUserControl()
    {
        InitializeComponent();
    }
} 
```

我收到一条错误消息

```
Partial declarations of 'MyUserControl' must not specify different base classes 
```

而且我在我的解决方案中找不到部分类的另一部分？？？我已经尝试在整个解决方案中搜索它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:16:05.990

你可以继承。像这样：

1.  定义一个基类：

    ```
    public class BaseExpanderUC : UserControl
    {
        public bool ExpandedByDefault
        {
            get { return (bool)GetValue(ExpandedByDefaultProperty); }
            set { SetValue(ExpandedByDefaultProperty, value); }
        }

        public static readonly DependencyProperty ExpandedByDefaultProperty =
            DependencyProperty.Register("ExpandedByDefault", typeof(bool), typeof(MyBaseView), new UIPropertyMetadata(false));
    } 
    ```

2.  定义一个继承的类：

    ```
    public class Alpha : BaseExpanderUC{}
    public class Bravo : BaseExpanderUC{} 
    ```

3.  在每个继承类（上面的 Alpha 和 Bravo）的每个 XAML 中，使用这个 makup：

    ```
    <BaseExpanderUC>
        <Expander IsExpanded="{Binding MyExpandedByDefault,
                                       RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:BaseExpanderUC}}}">
            <TextBlock>Some text</TextBlock>
        </Expander>
    </BaseExpanderUC> 
    ```

    其中“local”是 BaseExpanderUC 命名空间的 xmlns。

这将要求您为每个 UC 定义 UI。如果您可以为所有控件提供通用 UI，我强烈建议您使用自定义控件（可能继承 Expander）。然后，您只需定义一次 UI，在`ControlTemplate`.

# ios - 当用户单击地图上的详细信息披露按钮时，如何加载新视图？

> ID：15905414
> 
> 赞同：0
> 
> 时间：2013-04-09T14:58:40.380
> 
> 标签：ios, annotations, mapkit

我正在制作一个使用 iOS MapKit 在地图上显示注释的应用程序。当用户点击注释时，标注窗口会弹出并显示平铺、副标题和详细信息披露按钮。当用户点击详细信息披露按钮时，我需要弹出更多信息。

此附加信息可能是弹出窗口或其他加载的视图。我试图弄清楚如何最好地做到这一点。

现在，我在 annotationView 实现文件中使用以下代码添加了 Detail Disclosure Button。请注意这一行`self.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]`......并且还要注意它正在为三个 annotationTypes 完成：

这是添加的位置：

```
- (id)initWithAnnotation:(id<MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier
{

    iCodeBlogAnnotation *myAnnotation = (iCodeBlogAnnotation*)annotation;

    // setup the if/else statements

    if ([myAnnotation annotationType] == iCodeBlogAnnotationTypeHotels)

    {

        self = [super initWithAnnotation:myAnnotation reuseIdentifier:reuseIdentifier];
        self.frame = CGRectMake(0, 0, kWidth, kHeight);
        self.backgroundColor = [UIColor clearColor];

        self.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

        imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Hotel.png"]];
        imageView.frame = CGRectMake(kBorder, kBorder, kWidth - 2 * kBorder, kWidth - 2 * kBorder);
        [self addSubview:imageView];

    }

    else if([myAnnotation annotationType] == iCodeBlogAnnotationTypeAerialShots)

    {

        self = [super initWithAnnotation:myAnnotation reuseIdentifier:reuseIdentifier];
        self.frame = CGRectMake(0, 0, kWidth, kHeight);
        self.backgroundColor = [UIColor clearColor];

         self.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

        imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"StreetView.jpg"]];
        imageView.frame = CGRectMake(kBorder, kBorder, kWidth - 2 * kBorder, kWidth - 2 * kBorder);
        [self addSubview:imageView];

    }

    else if ([myAnnotation annotationType] == iCodeBlogAnnotationTypeStreets)

    {
        self = [super initWithAnnotation:myAnnotation reuseIdentifier:reuseIdentifier];
        self.frame = CGRectMake(0, 0, kWidth, kHeight);
        self.backgroundColor = [UIColor clearColor];

        self.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

        imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Street.png"]];
        imageView.frame = CGRectMake(kBorder, kBorder, kWidth - 2 * kBorder, kWidth - 2 * kBorder);
        [self addSubview:imageView];

    } 
```

然后，在我的 viewController 实现文件中，我有以下方法来检测用户何时点击了详细信息披露按钮：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control

{
    // add code here for what you want to do

} 
```

我应该在上述方法中添加什么代码才能加载一些新的弹出窗口或包含详细信息的新视图？

我尝试创建一个新的 detailViewController 类，并将以下代码添加到上述 controllTapped 方法中的“在此处添加代码”中：

```
iCodeBlogMapDetailViewController *dvc = [[iCodeBlogMapDetailViewController alloc] init];
[self.navigationController pushViewController:dvc animated:YES]; 
```

但什么也没发生。

我的下一步是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:02:38.623

确保您的控制器实现`MKMapViewDelegate`并将 MKMapView 的委托设置为控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:28:55.127

为此，您必须使用 MKMapView 委托方法，如下所示，以识别您的`iCodeBlogAnnotation`：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    id <MKAnnotation> annotation = [view annotation];
    if ([annotation isKindOfClass:[iCodeBlogAnnotation class]])
    {
        iCodeBlogMapDetailViewController *dvc = [[iCodeBlogMapDetailViewController alloc] init];
        [self.navigationController pushViewController:dvc animated:YES];        
    }
} 
```

让我知道，如果你让它工作

# c - 在多进程程序中捕获/获取带有 IP/TCP 标头的 TCP 数据包

> ID：15905415
> 
> 赞同：1
> 
> 时间：2013-04-09T14:58:43.757
> 
> 标签：c, networking, network-programming, multiprocessing, libpcap

我正在编写一个 TCP 代理服务器程序，它有一些代码片段，例如：

```
// proxy server listen, waiting for incoming tcp requests
listen(listenfd, 1024);

while(1) {
connfd = accept(listenfd, (struct sockaddr *)&sender_addr, &sock_len);

pid=fork();
if(pid=0)  // child process
 {
  // processing this connection
 }   
 blabla.....
} 
```

当 HTTP 客户端发起与代理的 TCP 连接时，该过程是

```
client ------ TCP SYN ---------> proxy
client <------TCP SYN/ACK ------ proxy             
client -------TCP ACK ---------> proxy
client ------HTTP request -----> proxy 
```

我想在proxy和webserver之间做什么和这个问题无关反正客户端会依次发送一个TCP SYN包、TCP ACK包和一个HTTP请求包。

代理可能会接受来自许多客户端的大量传入 TCP 3 次握手和 HTTP 请求。**我想为每个传入的 TCP 连接**获取 TCP ACK 数据包和 HTTP 请求数据包（它也是一个 TCP 数据包），**包括 IP 标头和 TCP 标头**。如果我无法获取`TCP ACK`，至少，我想获取 HTTP 请求数据包（**包括 IP 头和 TCP 头**）。

一种方法是使用 libpcap 捕获为每个传入 TCP 连接设置了 ACK 标志的数据包（filter_exp 类似于 tcp[tcpflags] & (tcp-ack) != 0）

这样，如果我把下面的代码块放在accept()之前，那么所有传入的TCP连接可能共享同一个pcap处理程序但是如果我把下面的代码块放在fork()之后的每个子进程中，处理程序可能会错过一些TCP数据包

```
handle = pcap_open_live(dev, BUFSIZ, 0, 0, errbuf);
pcap_compile(handle, &fp, filter_exp, 0, mask) == -1
pcap_setfilter(handle, &fp);
struct pcap_pkthdr pcap_header;      // The header that pcap gives us
const u_char *pcap_packet;           // The actual packet 
```

有什么好的解决方案可以满足我的要求吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:13:22.130

你的要求对我来说并不完全清楚，但是，如果你启动一个执行**pcap_loop**的线程，你应该为每个数据包获得一个回调。然后，您可以随意处理该数据。您可能不想为每个接受打开一个新的捕获，因为缓冲/调度可能意味着您将丢失数据包。

# r - 我怎样才能缩短这个图表？

> ID：15905418
> 
> 赞同：1
> 
> 时间：2013-04-09T14:58:47.020
> 
> 标签：r, ggplot2

我有这样的图表

![在此处输入图像描述](https://i.stack.imgur.com/PGLYm.jpg)

我的代码是这样的

```
ggplot(data=m_data, aes(x=factor(madde.sayisi), y= guvenirlik, colour=guvenirlik.kestirimi)) + 
  geom_point(aes(shape=factor(guvenirlik.kestirimi)),size=3) + 
  facet_grid(yontem+orneklem.buyuklugu~formul) + 
  ylim(0.850,1) + 
  scale_shape_discrete(name="guvenirlik.kestirimi") + 
  theme(axis.text = element_text(color="black")) 
```

我的图表太长了。我希望它看起来像这样。 ![在此处输入图像描述](https://i.stack.imgur.com/WrfWa.jpg)

请帮帮我，谢谢...

# mysql - MySQL 在 NOT NULL 列中插入具有 NULL 值的记录

> ID：15905420
> 
> 赞同：11
> 
> 时间：2013-04-09T14:58:54.130
> 
> 标签：mysql

为什么 table2 的第一个 INSERT 会通过。请注意 table2.col_1 不是 NULL。它不会为 col_1 插入 NULL，而是将 NULL 值神秘地转换为空字符串。我正在使用 MySQL 版本 5.5.28。谢谢

```
mysql> DROP TABLE IF EXISTS table1, table2;

Query OK, 0 rows affected (0.01 sec)   

mysql> CREATE  TABLE IF NOT EXISTS table1 (
    -> id INT UNSIGNED NOT NULL AUTO_INCREMENT ,
    -> col_1 VARCHAR(45) NOT NULL ,
    -> col_2 VARCHAR(45) NOT NULL ,
    -> PRIMARY KEY (`id`))
    -> ENGINE = InnoDB;

Query OK, 0 rows affected (0.01 sec)

mysql> CREATE TABLE table2 LIKE table1;
Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO table1 (id, col_1, col_2) VALUES (NULL, "xxx","yyy");
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO table2 (id, col_1, col_2) SELECT NULL, NULL, col_2 FROM table1 WHERE id=1;
Query OK, 1 row affected, 1 warning (0.00 sec)
Records: 1  Duplicates: 0  Warnings: 1

mysql> SHOW WARNINGS;
+---------+------+-------------------------------+
| Level   | Code | Message                       |
+---------+------+-------------------------------+
| Warning | 1048 | Column 'col_1' cannot be null |
+---------+------+-------------------------------+
1 row in set (0.00 sec)

mysql> SELECT * FROM table2;
+----+-------+-------+
| id | col_1 | col_2 |
+----+-------+-------+
|  1 |       | yyy   |
+----+-------+-------+
1 row in set (0.00 sec)

mysql> INSERT INTO table2 (id, col_1, col_2) VALUES( NULL, NULL, "zzz");
ERROR 1048 (23000): Column 'col_1' cannot be null

mysql> SELECT * FROM table2;
+----+-------+-------+
| id | col_1 | col_2 |
+----+-------+-------+
|  1 |       | yyy   |
+----+-------+-------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T15:15:55.570

您已关闭 MySQL 的 STRICT 模式。打开它，你会得到一个错误。

否则，您可以通过以下方式使用 PDO 测试这些警告：http: [//php.net/manual/en/pdo.errorinfo.php](http://php.net/manual/en/pdo.errorinfo.php)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-09T15:42:44.757

这种行为在 MySQL 文档中有很好的记录。[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/constraint-invalid-data.html)

如果您没有使用严格模式，那么每当您将“不正确”的值插入到列中，`such as a NULL into a NOT NULL column`或者将过大的数值插入到数值列中时，MySQL 都会将该列设置为“最佳可能值”而不是产生错误： ，但警告计数增加

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-18T17:46:59.377

我尝试将 MySQL 的 STRICT 模式设置为 OFF，但对我不起作用（我什至将其更改为 "my.ini" ）。

对我有用的是`BEFORE INSERT TRIGGER`

基本上你这样做：

```
CREATE TRIGGER triggerName BEFORE INSERT ON customer
FOR EACH ROW
BEGIN
    if new.`customerName` = '' then
    signal sqlstate '45000'
    SET MESSAGE_TEXT = 'Customer Name Cannot be Empty!';
    end if;
END 
```

您可以在其中`MESSAGE_TEXT`添加您希望错误显示的任何文本。

希望能帮助到你！

大部分都在[这里找到](https://stackoverflow.com/a/2514292/2160507)

# c# - 如何使这个时间逻辑

> ID：15905421
> 
> 赞同：1
> 
> 时间：2013-04-09T14:58:56.390
> 
> 标签：c#, asp.net

从商店我得到开放时间和关闭时间，我可以获得今天的开放时间 14（只是整数而不是时间格式）和关闭时间 2（只是整数而不是时间格式）oclock tomorrw

我想形成一个时间列表
，从 14+45mint 然后 15mint 间隔开始，直到明天 2 点我怎么做这个。

我正在尝试这样的事情，但我无法修复第二天的间隔。

```
ePOSEntities db = new ePOSEntities();
int d = Convert.ToInt32(DateTime.Today.DayOfWeek);
StoreTiming st = (from s in db.StoreTimings 
                  where s.Week_Day == d 
                  select s).FirstOrDefault();
var time = DateTime.Now;
DateTime OpenDtim = Convert.ToDateTime(st.OpenTime);
DateTime CloseDtim = Convert.ToDateTime(st.CloseTime).AddDays(1);

for (DateTime x = OpenDtim; x <= CloseDtim; x++) { 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:05:13.553

```
// parse your 'openTime' and 'closeTime'
List<DateTime> list = new List<DateTime>();

DateTime step = openTime.AddMinutes(45);

while (step<closeTime) {
   list.Add(step);
   step = step.AddMinutes(15);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:01:42.617

你想使用[DateTime.AddMinutes](http://msdn.microsoft.com/en-us/library/system.datetime.addminutes.aspx)

```
 List<DateTime> dtList = new List<DateTime>();
 OpenDtim = OpenDtim.AddMinutes(45)
 dtList.Add(OpenDtim);
 while (OpenDtim < CloseDtim)
 {
    OpenDtim = OpenDtim.AddMinutes(15);
    dtList.Add(OpenDtim);

 }
return dtList; 
```

# vhdl - 摆脱保持时间违规（Xilinx HDL）

> ID：15905424
> 
> 赞同：0
> 
> 时间：2013-04-09T14:59:00.640
> 
> 标签：vhdl, xilinx, synthesis

我正在 FPGA 中实现 DSO 控制器，但我遇到了太多违反保持时间的问题（到目前为止，最好的 P&R 结果是 3 个保持时间错误，大约在 -2ns slack 左右）。

我的问题的核心是我有 FIFO 缓冲区，输入来自 ADC 采样抽取器，然后输出到同步 FT245 (60MHz)。输入抽取器可以设置为以 2 的幂次方抽取（例如 1、2、4、8、16...），这也分频 ADC 样本的时钟频率（150MHz）。

我现在的方法是在捕获数据时提供分频（或直接，如果抽取器比率为 0）时钟频率来缓冲，然后当我将样本推送到 PC 时，我从 FT245 切换到提供 60MHz 时钟。在模拟中它工作得很好，但问题在于布局和布线，该路由器会吐出这个错误：

```
Route:466 - Unusually high hold time violation detected among 226 connections. The top 20 such instances are printed below. The
   router will continue and try to fix it 
```

然后它会持续运行 10-15 分钟，直到它给我计时报告，通知我满足所有设置时间限制，并且 150MHz 时钟（60MHz 时钟正常）有 3 次保持时间违规。

我已经读过这个问题可能是使用门控时钟，即 FPGA 无法正确分配时钟，但我尝试使用方法而不是 FIFO 的门控时钟，我将 150MHz 时钟直接连接到 FIFO，并且我正在使用 dataReady 门控 FIFO 中的数据（它实际上最终是与以前门控时钟相同的信号）然后我得到了比现在更多（50-60）的保持时间违规。

多时钟 FIFO 是否有一些已知的好方法？不只是两个（即使在 Xilinx ISE 的示例中也很多）。还是在 FPGA 中抽取 ADC 样本的想法行不通？

目标 FPGA 是 Spartan 6 LX25 速度等级 -2（不幸的是我无法获得 -3 速度等级）。

这是它给我的松弛示例：

```
Slack (hold path):      -2.031ns (requirement - (clock path skew + uncertainty - data path))
  Source:               decimator_clock_divisor/decimationRatio_0 (FF)
  Destination:          trigger_analog1/previousValue_2 (FF) 
```

提到的来源是信号（它给我的所有违规行为都是），它不会经常更改，它实际上是由 GUI 控制的，所以我不知道它怎么可能有保持时间违规。它是从抽取器比率到触发缓冲区（或其他违规情况下的我的 FIFO 缓冲区）的路径。

基本上我的问题是我是否应该关心这些违规行为？

因为在改变抽取器的比率之后，在我真正开始在触发器中使用抽取器的结果之前可能有数千个时钟周期。

我知道路由器不知道我多久更改一次异步信号（它是异步的，因为我是从 60MHz 时钟域设置它）以及使用某些模块的结果需要多长时间。问题是我不知道它是否在完成 PAR 后向我显示这 3 项违规是否是最终的，是否没有其他违规只是被这 3 项违规所掩盖？

是否可以发布 PAR 模拟验证它是否可以在船上工作？我会在船上试一试，但我必须等待 2 周才能完成 BGA 焊接，而我只剩下 4 周的时间来完成论文，所以我想确保我的设计能够奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:26:58.977

FIFO 可以作为异步。两个主时钟域 60Mhz 和 150Mhz 之间的边界桥。严格分离两个时钟域的逻辑。它们上应该只有几个已知的慢速控制信号（足够慢，因此可以应用错误路径时序约束）来进行通信。例如，GUI 将时钟比率写入 60Mhz 端的寄存器。然后它向快方发出信号，那里有一个新值。快速端在接收到通知后的几个周期内捕获此值（例如，上升沿检测需要特别注意元稳定性）。快速端的功能逻辑始终使用同样位于快速端的影子寄存器的输出。

对于快速 ADC 端的时钟分频，您可以使用完整时钟并按照您的描述启用（我也希望如此），或者您可以自行分频时钟。对时钟进行分频时，请确保遵循赛灵思文档中的示例。例如，有时需要一个时钟缓冲器来分配时钟。

如果还有剩余的保持路径违规，请查看源和目标 FF 的时钟和时钟到达时间。有时当目标FF的捕获时钟延迟时，数据就早了。路由器可以通过简单地延迟数据来解决这个问题。当设置要求不允许进一步延迟时（可能是两个时钟之间的不确定性太高的情况），它无法修复。

# ajax - Ajax 发布到 Web 服务器问题

> ID：15905425
> 
> 赞同：1
> 
> 时间：2013-04-09T14:59:02.937
> 
> 标签：ajax, jquery, jquery-mobile, post

大家好，我在将 ajax 发布到 Web 服务器时遇到了一些问题。这是来自我一直在修补的移动应用程序，我不确定为什么该帖子不起作用。

这是代码：

```
 var username = window.localStorage.getItem("username");
    var url = "https://website.com/webservices/service.do?&username=" + username + "&accept=1&isMobile=1";
    console.log(url);
    $(document).ready(function(){ 
                $.ajax({
                    type: "POST",
                    async: false,
                    url: url,
                    success: Success(), 
                    error: Fail(e)
                   });
        }) 
```

我在调试中看到的最后一项是日志中的 url：（[https://website.com/webservices/service.do?&username=test&accept=1&isMobile=1](https://website.com/webservices/service.do?&username=test&accept=1&isMobile=1)）当我复制该 url 并将其粘贴到网络浏览器中时帖子有效，服务更新数据库，就像它假设的那样。有人知道我的帖子会发生什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:00:51.117

```
success: Success, 
error: Fail 
```

您正在调用您的回调函数，而您应该将它们声明为引用。

另外，`error`回调没有传递异常，它传递了以下三个参数。

jqXHR jqXHR，字符串 textStatus，字符串 errorThrown

# python - 在 Python 中使用子进程时如何从主进程获取用户输入

> ID：15905429
> 
> 赞同：0
> 
> 时间：2013-04-09T14:59:23.323
> 
> 标签：python, subprocess

例如program1.py调用program2.py：

程序1.py

```
subprocess.Popen("program2.py", stdin=subprocess.PIPE).communicate() 
```

程序2.py

```
user_input = input("Yes or No?") 
```

但是当我运行 program1 时，在我的情况下，program2 无法从主进程获取用户输入。它说“阅读一行时EOF”。你能给我一些建议以获得用户输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:17:48.800

您没有将任何数据传递给`program2.py`. 我假设您使用的是 Python 3，从使用`input`（而不是`raw_input`在 Python 2 中）。这是我的做法：

```
import subprocess
import sys

cmd = [sys.executable, 'program2.py'] 
proc = subprocess.Popen(cmd, stdin=subprocess.PIPE)
proc.communicate('Y'.encode()) 
```

将“Y”传递给第二个程序。在`encode()`Python 3 中是必需的，但不是 Python 2。这是因为 Python 3 字符串是多字节的，而`stdin`流使用单字节字符串，如 Python 2 字符串。最后不需要更改`program2.py`。

# javascript - 粘页眉滚动功能失常

> ID：15905431
> 
> 赞同：0
> 
> 时间：2013-04-09T14:59:26.777
> 
> 标签：javascript, html

我的 Header 的以下代码在到达窗口顶部时会变得粘滞：

```
$(function () {
    var stickyHeaderTop = $('#outer-header').offset().top;

    $(window).scroll(function () {
        if ($(window).scrollTop() > stickyHeaderTop) {
            $('#outer-header').css({
                position: 'fixed',
                top: '-300px'
            });
        } else {
            $('#outer-header').css({
                position: 'static',
                top: '0px'
            });
        }
    });
}); 
```

它可以工作，但是当它到达顶部并变得粘稠时，内容会滚动正常滚动 + 标题上方 div 的高度。（所以它跳得太大，看起来不流畅）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:16:05.667

感谢 CBroe 的提示！这是一个有效的解决方案：

```
$(function () {
    var stickyHeaderTop = $('#outer-header').offset().top;

    $(window).scroll(function () {
        if ($(window).scrollTop() >= stickyHeaderTop) {
            $('#outer-header').css({
                position: 'fixed',
                top: '-300px'
            });
            $('#main').css({
                position: 'relative',
                top: '332px'
            });
        } else {
            $('#outer-header').css({
                position: 'absolute',
                top: '0px'
            });
            $('#main').css({
                position: 'relative',
                top: '332px'
            });
        }
    });
}); 
```

# node.js - 是否有专门为使用 Node.js 开发实践而构建的客户端框架？

> ID：15905434
> 
> 赞同：4
> 
> 时间：2013-04-09T14:59:34.870
> 
> 标签：node.js, model-view-controller, backbone.js, knockout.js, ember.js

我想知道是否有考虑到 Node 实践构建的客户端框架？我什至“需要”使用这样的框架吗？

我并不是想在不同框架的用户之间引发一场激烈的战争，我只是想知道*将这些框架之一与 Node.js 一起使用是否比其他框架具有优势，*或者*我是否应该只评估它们之间的差异根本没有记住Node*。

我刚刚开始使用 Node.js 开发。以前，我一直在 Rails 中进行开发，并且阅读了大量关于不同客户端 JavaScript“MVC”框架的文章。目前，我认为值得关注的是 Backbone.js、Ember.js、Knockout.js 和 Angular.js（按此特定顺序）。

我读过诸如 Backbone.js 是考虑到 Rails 开发人员编写的，或者至少考虑到 Rails 作为框架。

在不考虑 Node 的情况下，我认为我更喜欢 Ember + Handlebars 用于模板或 Backbone + underscore 用于模板。在服务器端，我计划将 Express 与 MongoDB 一起使用，我在某处看到许多 Node 用户使用 Jade 进行模板，这也让我感到困惑。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:07:35.783

Express 与您的客户端框架无关。它在处理所有常见的模板语言方面做得非常好。因此，没有任何 node.js 特定原因为什么您应该从您提供的列表中选择一个特定框架而不是其他框架。

事实上，node 作为一个平台的一大优势是，由于它运行 javascript，您实际上可以使用服务器上任何客户端框架的代码，例如，如果您想预渲染页面的部分在将其发送到客户端之前，或在骨干应用程序的服务器端和客户端之间共享模型模式。

要回答您关于翡翠受欢迎程度的补充问题，您可能应该调查 Express 和翡翠之间的关系。虽然 express 在支持所有主要的模板语言方面做得非常好；Jade 是故意写的，以便与 express 配合使用。它们也是同一作者写的。它也是节点受众真正使用的唯一一种类似 HAML 的模板语言。由于它与其他流行的模板语言具有非常不同的语义，因此它在那些喜欢特定语义集的人中很受欢迎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:02:39.457

如果不了解更多关于您的 javascript 技能以及您正在寻找什么样的项目，很难推荐一个框架。我想说，花时间学习你提到的任何框架都会很划算。

这里有一些很好的资源：

*   [javascript jabber](http://javascriptjabber.com/) Podcast 有许多优秀的演讲者，包括您正在研究的许多框架的作者。Node JS 也经常被讨论。

*   主要 javascript 框架的截屏视频/教程。

    *   [http://www.backbonerails.com/](http://www.backbonerails.com/)
    *   [http://tekpub.com/](http://tekpub.com/)
    *   [http://peepcode.com](http://peepcode.com)
    *   [http://www.watchmecode.net/](http://www.watchmecode.net/)

使用骨干网和 ember 的开源应用程序。大型专业级应用程序。

*   [discourse](https://github.com/discourse/discourse)社区讨论门户，由一个 restful rails 后端和一个 ember 前端构建。
*   [带有骨干前端的文档云](https://github.com/documentcloud/documentcloud)Rails 后端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:10:04.087

如果您决定使用主干，请考虑使用 Marionette，它是主干之上的一个库。Backbone 非常适合restul 应用程序，但是如果您正在构建客户端应用程序，您应该考虑什么最适合您的客户端应用程序。

请看一下这组示例，它将帮助您确定每个 js MVC 框架之间的差异。 [http://todomvc.com/](http://todomvc.com/)

# java - Spring Batch 作业参数限制为 250 个字符？

> ID：15905435
> 
> 赞同：1
> 
> 时间：2013-04-09T14:59:35.870
> 
> 标签：java, oracle, spring, spring-batch

我正在使用[ItemReader/ItemWriter](http://static.springsource.org/spring-batch/reference/html/readersAndWriters.html)设置 Spring Batch Job，以将数据集从 Oracle DB 导出到 CSV/Excel/PDF。对于阅读器部分，我使用的是[JdbcCursorItemReader](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/database/JdbcCursorItemReader.html)。

默认情况下，需要将 SQL 语句传递给阅读器以提取数据集 - 这是我的阅读器配置：

```
<bean id="readErgebnis" class="org.springframework.batch.item.database.JdbcCursorItemReader" scope="step">
    <property name="dataSource" ref="dataSource" />
    <property name="sql" value="#{jobParameters['stmt']}" />
    <property name="rowMapper">
        <bean class="myFancyRowMapper" />
    </property>
</bean> 
```

所以我将 SQL 语句添加到 JobParametersBuilder...

```
JobParametersBuilder builder = new JobParametersBuilder(); 
builder.addString("stmt", sql); 
```

那应该没问题。但是，执行作业失败并显示`SQLException`.

现在我知道 Spring Batch 正在将所有内容记录到它的记录表中​​，并且存在问题 - 参数字符串（包含 SQL）限制为 250 个字符。查看 BATCH_JOB_PARAMS 表的定义：

```
CREATE TABLE BATCH_JOB_PARAMS  (
    JOB_INSTANCE_ID NUMBER(19,0) NOT NULL ,
    TYPE_CD VARCHAR2(6) NOT NULL ,
    KEY_NAME VARCHAR2(100) NOT NULL , 
    STRING_VAL VARCHAR2(250), 
    DATE_VAL TIMESTAMP DEFAULT NULL ,
    LONG_VAL NUMBER(19,0) ,
    DOUBLE_VAL NUMBER ,
    constraint JOB_INST_PARAMS_FK foreign key (JOB_INSTANCE_ID)
    references BATCH_JOB_INSTANCE(JOB_INSTANCE_ID)
); 
```

Spring Batch 将每个作业参数存储在一个新行中，因此 SQL 语句进入限制为 250 个字符的 STRING_VAL 列。我检查了其他数据库系统（MySQL 和 DB2）的 DDL，似乎到处都限制为 250 个字符。我将该列更改为`CLOB`现在，工作正常并且我的工作运行。

我的问题：我简直不敢相信它打算通过批处理作业存储限制为 250 个字符的作业参数。那么对于我的场景是否有更好的实现，或者它是否旨在更改 BATCH_JOB_PARAMS 表中参数列的默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:11:29.427

不要将 SQL 作为作业的参数传递。而是创建一个扩展实现 InitializingBean 的 JdbcCursorItemReader 的类。

```
package xxx.readers;

public class MyReader  extends  JdbcCursorItemReader<AnObjet> implements InitializingBean{

@Override
public void afterPropertiesSet() throws Exception {
        // set the SQL

    String SELECT_PAYMENT = "SELECT * from table"
    super.setSql(SELECT_PAYMENT);

    }
} 
```

这样，当您的 bean 在启动时由 spring 上下文初始化时，您的 sql 将被设置。

如果您需要添加 where 子句，请使用 PreparedStatementSetter 并将其添加到配置中。

```
 <bean id="myReader" class="xxx.readers.MyReader">
    <property name="dataSource" ref="aDataSource" />
    <property name="rowMapper" ref="aMapper" />     
    <property name="preparedStatementSetter" ref="yourPreparedStatementSetter" />
</bean> 
```

一个preparedStatementSetter 示例：

```
package fcdq.iemt.batch.concilliation.utils;

import java.sql.PreparedStatement;
 import java.sql.SQLException;

 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.jdbc.core.PreparedStatementSetter;
 import org.springframework.stereotype.Component;

 @Component("aPrStatSetter")
 public class RunNoSetter implements PreparedStatementSetter {

public void setValues(PreparedStatement ps) throws SQLException {
    ps.setString(1, "hello");
    ps.setString(2, "Hola");
    ps.setTimestamp(3, aTimestamp);
}
 } 
```

PreparedStatementSetter 将在运行时被调用以替换 ? 在你的 where 子句中。

希望它有所帮助。

# php - 计算总小时数，最佳解决方案？

> ID：15905436
> 
> 赞同：0
> 
> 时间：2013-04-09T14:59:38.567
> 
> 标签：php, datetime

我正在制作一个包含条目的表格，其中包含签入、结帐和描述。checkin 和 checkout 都是日期时间字段。

我想计算在一个项目上工作的总时间。这是我在 1 次结帐和签入之间的计算：

```
{? $checkin = new DateTime($hour->checkin) ?}
{? $checkout = new DateTime($hour->checkout) ?}
@if($hour->checkout == '0000-00-00 00:00:00')
    {? $checkout = new DateTime() ?}
@endif
{? $diff = $checkout->diff($checkin) ?}
{? $hours = $diff->format('%H:%I') ?} 
```

现在，我通过以下方式计算总秒数：

```
$totaltime += strtotime("January 1, 1970 " . $hours . ":00") 
```

然后在显示所有内容后，我通过以下方式计算*HOURS*的数量：

```
public static function format_time($seconds,$separator=':', $format = "%02d%s%02d") // t = seconds, f = separator 
    {
        return sprintf($format, floor($seconds/3600), $separator, ($seconds/60)%60, $separator, $seconds%60);
    } 
```

然而，当我这样做时： -

```
strtotime("January 1, 1970 00:40:00") 
```

我得到一个负整数。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:12:18.903

```
<?php
$checkin[0] = "2013-03-09 10:00:01";
$checkout[0] = "2013-03-12 10:55:15";

$checkin[1] = "2013-03-15 10:00:01";
$checkout[1] = "2013-03-15 10:55:15";

$checkin[2] = "2013-04-09 10:00:01";
$checkout[2] = "2013-04-15 10:55:15";

$diffSeconds = 0;
for($i = 0; $i < count($checkin)-1; $i++){
  $diffSeconds += strtotime($checkout[$i]) - strtotime($checkin[$i]);
}
$hours = floor($diffSeconds/3600);
echo $hours.' hours';
?> 
```

# vb.net - 跳过将重复项从一个列表框添加到另一个

> ID：15905438
> 
> 赞同：1
> 
> 时间：2013-04-09T14:59:45.750
> 
> 标签：vb.net, listbox, listboxitems

我有以下代码：

```
 'get the items from listbox4
       For Each aa As String In ListBox4.Items
        'convert string to uri and grap the hostname for each item in listbox4
        Dim myuri As New Uri(aa)
        Dim baseUri As String = myuri.GetLeftPart(UriPartial.Authority)
        ' check if the hostname exist on items of listbox2 and skip the duplicate
            If ListBox2.Items.Contains(baseUri) Then
                Return
            Else
                ListBox2.Items.Add(aa)
            End If
        Next 
```

如何根据第一个 ListBox 中的数据使第二个 ListBox 包含不同的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:35:20.560

这是一个 Linq 基本方法（视为伪代码，我没有时间在可行的解决方案上对其进行测试）：

```
ListBox2.Items.AddRange( _
    ListBox4.Items.Select( _
        Function(x) new Uri(x).GetLeftPart(UriPartial.Authority)).Distinct() _
) ' End AddRange 
```

基本上，它会添加从 ListBox4 中选择的一系列项目，其中使用每个元素选择一个新的 Uri，然后使用您的方法修改 Uri，然后选择修改后的 uri 的不同字符串表示形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:50:17.307

在开始循环之前清除 listbox2。在循环内，将“返回”更改为“继续”

# arrays - vb.net 中的 int 数组

> ID：15905441
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:59:50.060
> 
> 标签：arrays, vb.net

我有这个 int 数组：

```
0,1
0,2
0,3
0,4
1,5
1,6
1,7
1,8
etc 
```

我需要做的是创建一个函数，给我一个类似这样的数组

```
0,1
0,2
0,3
0,4 
```

它返回索引 0 中具有相同数字的所有结果。下次我调用它时，它应该返回：

```
1,5
1,6
1,7
1,8 
```

等等。或者它也可以返回这个

```
0,1,2,3,4
1,5,6,7,8 
```

等等

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:13:51.940

假设你有类似的东西

```
Dim variable(,) as Integer '(2-dimensional array) 
```

那么你可以使用一个简单的循环：

```
Dim _result as New List(Of String)
For i as Integer = 0 to 1
  For j as Integer = 1 to 4
    _result.Add(variable(i, j+i*4).ToString)
  Next j
  _result.Add(vbCrLf)
Next i
MsgBox(Join(_result.ToArray,",")) 
```

这有点脏，最好将每一行合并起来并与 vbCrLf 进行另一次连接，因为这样你在每一行前面都有另一个逗号，但它应该足以理解它是如何工作的。

**更新** 了好吧，我怀疑您是否需要阵列中的那些地方，但答案不适合它。4 个元素，所以第二个数组只能用 1 到 4 加上 4 * 第一个数组索引来访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:29:46.970

数组很棒，但您可能还想尝试使用更“现代”的对象，如字典和列表

尝试这个：

```
' Load the data
Dim x As New Dictionary(Of Integer, List(Of Integer))
x.Add(1, New List(Of Integer)({1, 2, 3, 4}))
x.Add(2, New List(Of Integer)({5, 6, 7, 8}))

' Access the data
Debug.Print("items under 1")
For Each i As Integer In x.Item(1)
    Debug.Print(i)
Next

Debug.Print("items under 2")
For Each i As Integer In x.Item(2)
    Debug.Print(i)
Next 
```

这给出了如下输出：

```
items under 1
1
2
3
4
items under 2
5
6
7
8 
```

# data-binding - Gridview 上的自定义控件

> ID：15905442
> 
> 赞同：0
> 
> 时间：2013-04-09T14:59:50.033
> 
> 标签：data-binding, gridview, repeater

如何将我的数据源绑定到 GridView 上的自定义控件

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" >
    <Columns>
        <asp:TemplateField >
            <ItemTemplate>
                <uc1:DVDBox ID="DVDBox1" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField >
            <ItemTemplate>
                <uc1:DVDBox ID="DVDBox2" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField >
            <ItemTemplate>
                <uc1:DVDBox ID="DVDBox3" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

我正在尝试将其与通常的绑定

```
 GridView1.DataSource = Results;
        GridView1.DataBind(); 
```

但它不起作用！

我是否必须解决每个自定义控件出现的每个元素的每个元素以获取要呈现的数据，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:07:58.610

OK I had to answer this for myself.

So just for future reference.

```
 <asp:TemplateField>
        <ItemTemplate>
        <uc1:DVDBox ID="DVDBox1" runat="server" 
                    controlNameInCustomControl='<%# Bind("NameOfColumnOnSource") %>'
                    />
        </ItemTemplate>
        </asp:TemplateField> 
```

Now I just need to work out to repeat this for several GridView Columns with the same custom control

# android - 如何使用 Polaris Library 自定义 Android 地图中显示的信息

> ID：15905443
> 
> 赞同：0
> 
> 时间：2013-04-09T14:59:51.843
> 
> 标签：android, maps, balloon

我正在使用 Polaris Library for Android Maps，因为它支持集群： [Polaris with Clustering。](https://github.com/damianflannery/Polaris/tree/clustering) 我不依赖谷歌地图 V2，因为它会遗漏我的目标许多设备。

我需要做的是能够个性化显示在气球中的信息。当用户点击一个标记时，应该会显示一个气球，左边是一张图片，中间是 4 行文本，右边是另一个可绘制对象。

我已经与 Polaris 创建者交换了几封邮件，由于显而易见的原因，他无法为使用他的库的每个开发人员提供全力支持。他暗示我使用 MapCalloutView#setCustomView 但我想不通。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:33:46.817

我终于让它工作了。

首先，我扩展了 Annotation 以添加其他字段：

```
public class CustomAnnotation extends Annotation {
private CustomObject cObject;

public CustomObject getCustomObject() {
    return cObject;
}

public void setCustomObject(CustomObject cObject) {
    this.cObject = cObject;
}

public CustomAnnotation(GeoPoint point, String title, String snippet,CustomObject cObject) {
    super(point, title, snippet);
    this.cObject = cObject;
} 
```

我为 CallOutView 创建了一个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/content"
android:paddingLeft="5dip"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical">
<LinearLayout
      android:id="@+id/balloon_inner_layout"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:layout_gravity="center_vertical">
  <ImageView
      android:id="@+id/image"
      android:layout_width="50dip"
      android:layout_height="50dip"
      android:contentDescription="@string/descr_image"
      android:src="@drawable/stub"
      android:scaleType="centerCrop"
      android:layout_gravity="center_vertical"/>
  <LinearLayout
          android:paddingLeft="5dip"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:orientation="vertical">
      <TextView
        android:id="@+id/price"
    android:textStyle="bold"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
      <TextView
    android:id="@+id/address"
    android:textStyle="bold"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
    <TextView
      android:id="@+id/sup"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"            
      android:visibility="gone"/>
    <TextView
               android:layout_height="wrap_content"
               android:layout_width="wrap_content"
               android:id="@+id/rooms"
               android:visibility="gone"/>      
          </LinearLayout>
   </LinearLayout> 
```

在我的 MapActivity 类中，我实现了 OnAnnotationSelectionChangedListener。不要忘记设置监听器。

在 MapActivity#onAnnotationSelected 中，我将收到的注释转换为我的 CustomAnnotation，以便我可以使用其他字段，将布局膨胀到视图对象中，并将 setText 设置为我的所有 TextView：

```
@Override
public void onAnnotationSelected(PolarisMapView mapView,
        MapCalloutView calloutView, int position, Annotation annotation) {
    CustomAnnotation ca = (CustomAnnotation) annotations.get(position);
    View view = (View)getLayoutInflater().inflate(R.layout.balloon_test, null);
            CustomObject object = ca.getCustomObject();
        TextView txView = (TextView)view.findViewById(R.id.field1);
        txView.setText(object.getField1());
        txView.setVisibility(View.VISIBLE);
    ...
            //set aditional data in your callout
            ...
                    calloutView.setDisclosureEnabled(true);
        calloutView.setClickable(true);
        calloutView.setCustomView(view);
        calloutView.show(mPolarisMapView, annotation.getPoint(), false);
        } 
```

就这样。希望它可以帮助某人。

# java - Servlet 到 Spring Servlet：是否可以使用 Spring 的 HttpRequestHandler 实现 GET 方法？

> ID：15905449
> 
> 赞同：2
> 
> 时间：2013-04-09T15:00:11.480
> 
> 标签：java, spring, jakarta-ee, servlets

我正在将常规 Servlet 更新为 Spring 类 Servlet。为了做到这一点，我按照[这些说明](http://www.codeproject.com/Tips/251636/How-to-inject-Spring-beans-into-Servlets)说我应该实施`HttpRequestHandler`。这很好，适用于我的 Servlet，因为现在我只使用 POST 方法调用它。

但是现在我很好奇如果我也想实现 GET 方法会发生什么。在常规的 Servlet 中，我有：

```
public class MyServlet extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response) 
...
protected void doGet(HttpServletRequest request, HttpServletResponse response)
...
protected void doPost(HttpServletRequest request, HttpServletResponse response)
...

} 
```

但是在实现 HttpRequestHandler 时，我有：

```
public class MyServlet implements HttpRequestHandler {
...
   public void handleRequest(HttpServletRequest request, HttpServletResponse response)
...
} 
```

阅读[官方文档](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/HttpRequestHandler.html)，它说它默认只支持 POST，但找不到实现 GET 的方法。[这里](https://stackoverflow.com/questions/8504258/spring-3-mvc-accessing-httprequest-from-controller)的其他答案让我想到了使用可以接收 GET 请求然后调用的 Controller `HttpRequestHandler`，但这对我来说似乎不是很整洁。

谁能告诉我这是否可能以及我该怎么做？如果可能，请参考一些文档:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T17:58:46.213

这只是一个猜测，但您不能只使用请求参数来确定方法并在 handleRequest 方法中进一步采取相应措施吗？

# php - 如何实现一个在你修改它时更新的网络

> ID：15905451
> 
> 赞同：0
> 
> 时间：2013-04-09T15:00:20.777
> 
> 标签：php, javascript, ajax, html

我正在尝试创建一个 Web 项目，您可以在其中修改 Web，而其他看到相同 Web 的项目将自动更新。我认为最好的方法是使用 AJAX，但我完全不确定是否有简单的方法或工具来实现它。如果您知道任何工具，帖子或方法来开发它，我会很感激它，谢谢。

PD：我知道这是可能的，我只是在寻找可以让工作更轻松的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:07:14.283

我不知道任何工具，但如果您一次允许超过 1 个编辑器，您可能会遇到问题。

大多数应用程序使用某种[锁定](https://en.wikipedia.org/wiki/Locking_%28computer_science%29)机制来禁止多个用户编辑同一资源。

你应该阅读：

*   [https://drive.googleblog.com/2010/09/whats-different-about-new-google-docs_21.html](https://drive.googleblog.com/2010/09/whats-different-about-new-google-docs_21.html)
*   [https://drive.googleblog.com/2010/09/whats-different-about-new-google-docs_22.html](https://drive.googleblog.com/2010/09/whats-different-about-new-google-docs_22.html)
*   [https://drive.googleblog.com/2010/09/whats-different-about-new-google-docs.html](https://drive.googleblog.com/2010/09/whats-different-about-new-google-docs.html)

了解谷歌文档如何实现实时协作，多个用户可以编辑同一个文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:07:04.960

进行 AJAX 的最简单方法是使用一些 JavaScript 框架，如 jQuery、Senscha 等……它们将使您在处理 AJAX 请求时更轻松。另外不要忘记 WebSockets，它们允许通过 TCP 套接字进行异步通信，并且您可以使用 WebSockets 实现相同的效果。

我建议你使用[jQuery](http://jquery.com/)和他们的 AJAX 库。[在这里](http://learn.jquery.com/ajax/)查看教程！

# sql - oracle sql减带截断

> ID：15905452
> 
> 赞同：1
> 
> 时间：2013-04-09T15:00:21.073
> 
> 标签：sql, oracle, oracle-sqldeveloper

我想使用 sqldeveloper（oracle sql）中的减号命令比较两个表。使用过程（过程 A）生成了一个表（表 A），该过程在 X 列中生成具有以下精度的值：

80.3921568627

表 B（程序 B）产生了相同数据的以下版本：

80.39215686

就我的任务而言，我不关心超过两位小数的精度。如何修改查询的语法（见下文）以忽略前两位小数以外的所有内容：

```
select id,a_val
from table_A
minus                               
select id,b_val
from table_B 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:06:19.837

使用`TRUNC`：

```
select id, trunc(a_val, 2) from table_B
minus select id, trunc(b_val, 2) from table_B 
```

`TRUNC`根本没有四舍五入，所以`TRUNC(12.349, 2) = 12.34`. 如果您想`12.349`被视为等于`12.35`而不是`12.34`，只需在上面的示例中使用`ROUND`而不是。`TRUNC`

# java - 如何在两个xml标签之间输出？

> ID：15905453
> 
> 赞同：2
> 
> 时间：2013-04-09T15:00:23.597
> 
> 标签：java, php, xml, tags

我从未见过这样的标签：

```
<verse sID=".1.1" osisID=".1.1" /> data data <verse eID=".1.1"/> 
```

因为我认为它应该是这样的：

```
<verse osisID=".1.1"> data data </verse> 
```

问题是我试图在`<verse/> texts <verse/>.` 我有很多 xml 之间输出文本来显示这些打开和关闭标签之间的文本。如果`<verse> texts </verse>`. 如何用 Java 或 PHP 编写代码以在这些标签之间输出文本。我已经用 PHP 编写了代码。

```
<?php
$xml = simplexml_load_file("go.xml");

foreach ($xml->osisText->div->p->verse as $verse) {
   echo $verse."<br/><br/>";
}
?> 
```

这没用。我还没有尝试过Java。
下面是示例 xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<osis xmlns="http://www.bibletechnologies.net/2003/OSIS/namespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.bibletechnologies.net/2003/OSIS/namespace http://www.bibletechnologies.net/osisCore.2.1.1.xsd">
    <osisText xml:lang="en">
        <chapter sID=".1" osisID=".1"/>
        <div type="section">
            <p>
                <verse sID=".1.1" osisID=".1.1" />
                Hello Verse One
                <verse eID=".1.1" osisID=".1.1" />
                <verse sID=".1.2" osisID=".1.2" />
                Hello Verse Two
                <verse eID=".1.2" osisID=".1.2" />
            </p>
            <p>
                <verse sID=".1.3" osisID=".1.3" />
                Hello Verse One
                <verse eID=".1.3" osisID=".1.3" />
                <verse sID=".1.4" osisID=".1.4" />
                Hello Verse Two
                <verse eID=".1.4" osisID=".1.4" />
            </p>
        </div>
    </osisText>
</osis> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:03:53.583

简单的解决方案是正则表达式

```
 String s = "<verse sID=\".1.1\" osisID=\".1.1\" /> data data <verse eID=\".1.1\"/>"; 
    s = s.replaceAll("<verse .+ />(.+)<verse .+/>", "$1");
    System.out.println(s); 
```

输出

```
 data data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:18:00.893

尝试使用此功能：

```
function extractContents($string, $start, $end)
{
    $pos = stripos($string, $start);
    $str = substr($string, $pos);
    $str_two = substr($str, strlen($start));
    $second_pos = stripos($str_two, $end);
    $str_three = substr($str_two, 0, $second_pos);
    $extractedContents = trim($str_three);
    return $extractedContents;
} 
```

然后这样称呼它：

```
$start = '/>';
$end = '<verse';
$contents = extractContents($string, $start, $end) 
```

# r - R：拆分字符串并根据拆分分配变量

> ID：15905457
> 
> 赞同：0
> 
> 时间：2013-04-09T15:00:28.250
> 
> 标签：r

我有一个语义标签和语义标签类型的字段。每个标签类型/标签用逗号分隔，而每个标签类型和标签用冒号分隔（见下文）。

```
ID | Semantic Tags

1  |   Person:mitch mcconnell, Person:ashley judd, Position:senator

2  |   Person:mitch mcconnell, Position:senator, ProvinceOrState:kentucky, topicname:politics 

3  |   Person:mitch mcconnell, Person:ashley judd, Organization:senate, Organization:republican 

4  |   Person:ashley judd, topicname:politics

5  |   URL:www.huffingtonpost.com, Company:usa today, Person:chuck todd, Company:msnbc 
```

我想将每个标签类型（冒号前的术语）和标签（冒号后的术语）分成两个单独的字段：“标签类型”和“标签”。生成的文件应如下所示：

```
ID | Tag Type  |  Tag

1  |  Person   |  mitch McConnell

1  |  Person   |  ashley judd  

1  |  Position |  senator

2  |  Person   |  mitch McConnell

2  |  Position |  senator

2  |  State    |  kentucky 
```

这是我到目前为止的代码......

```
tag<-strsplit(as.character(emtable$Symantic.Tags),","))
tagtype<-strsplit(as.character(tag),":") 
```

但在那之后，我迷路了！我相信我需要为此使用 lapply 或 sapply ，但不确定它在哪里发挥作用......

如果在网站上以其他形式回答了这个问题，我深表歉意——我是 R 新手，这对我来说仍然有点复杂。

提前感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:29:14.933

这是另一种（略有不同）的方法：

```
## dat <- readLines(n=5)
## Person:mitch mcconnell, Person:ashley judd, Position:senator
## Person:mitch mcconnell, Position:senator, ProvinceOrState:kentucky, topicname:politics
## Person:mitch mcconnell, Person:ashley judd, Organization:senate, Organization:republican
## Person:ashley judd, topicname:politics
## URL:www.huffingtonpost.com, URL:http://www.regular-expressions.info

dat3 <- lapply(strsplit(dat, ","), function(x) gsub("^\\s+|\\s+$", "", x))
#dat3 <- lapply(dat2, function(x) x[grepl("Person|Position", x)]) 
dat3 <- lapply(dat3, strsplit, ":(?!/)", perl=TRUE) #break on : not folled by /
dat3 <- data.frame(ID=rep(seq_along(dat3), sapply(dat3, length)),
    do.call(rbind, lapply(dat3, function(x) do.call(rbind, x)))
)

colnames(dat3)[-1] <- c("Tag Type", "Tag")

##    ID        Tag Type                    Tag
## 1   1          Person        mitch mcconnell
## 2   1          Person            ashley judd
## 3   1        Position                senator
## 4   2          Person        mitch mcconnell
## 5   2        Position                senator
## 6   2 ProvinceOrState               kentucky
## 7   2       topicname               politics
## 8   3          Person        mitch mcconnell
## 9   3          Person            ashley judd
## 10  3    Organization                 senate
## 11  3    Organization             republican
## 12  4          Person            ashley judd
## 13  4       topicname               politics
## 14  5             URL www.huffingtonpost.com
## 15  5         Company              usa today
## 16  5          Person             chuck todd
## 17  5         Company                  msnbc 
```

详尽的解释：

```
## dat <- readLines(n=5)
## Person:mitch mcconnell, Person:ashley judd, Position:senator
## Person:mitch mcconnell, Position:senator, ProvinceOrState:kentucky, topicname:politics
## Person:mitch mcconnell, Person:ashley judd, Organization:senate, Organization:republican
## Person:ashley judd, topicname:politics
## URL:www.huffingtonpost.com, URL:http://www.regular-expressions.info

dat3 <- lapply(strsplit(dat, ","), function(x) gsub("^\\s+|\\s+$", "", x))
#dat3 <- lapply(dat2, function(x) x[grepl("Person|Position", x)]) 
dat3 <- lapply(dat3, strsplit, ":(?!/)", perl=TRUE) #break on : not folled by /

# Let the explanation begin...

# Here I have a short list of the variables from the rows
# of the original dataframe; in this case the row numbers:

seq_along(dat3)      #row variables

# then I use sapply and length to figure out hoe long the
# split variables in each row (now a list) are

sapply(dat3, length) #n times

# this tells me how many times to repeat the short list of 
# variables.  This is because I stretch the dat3 list to a vector
# Here I rep the row variables n times

rep(seq_along(dat3), sapply(dat3, length))

# better assign that for later:

ID <- rep(seq_along(dat3), sapply(dat3, length))

#============================================
# Now to explain the next chunk...
# I take dat3

dat3

# Each element in the list 1-5 is made of a new list of 
# Vectors of length 2 of Tag_Types and Tags.
# For instance here's element 5 a list of two  lists 
# with character vectors of length 2 

## [[5]]
## [[5]][[1]]
## [1] "URL"  "www.huffingtonpost.com"
## 
## [[5]][[2]]
## [1] "URL"  "http://www.regular-expressions.info"

# Use str to look at this structure:

dat3[[5]]
str(dat3[[5]])

## List of 2
##  $ : chr [1:2] "URL" "www.huffingtonpost.com"
##  $ : chr [1:2] "URL" "http://www.regular-expressions.info"

# I use lapply (list apply) to apply an anynomous function:
# function(x) do.call(rbind, x) 
#
# TO each of the 5 elements.  This basically glues the list 
# of vectors together to make a matrix.  Observe just on elenet 5:

do.call(rbind, dat3[[5]])

##      [,1]  [,2]                                 
## [1,] "URL" "www.huffingtonpost.com"             
## [2,] "URL" "http://www.regular-expressions.info"

# We use lapply to do that to all elements:

lapply(dat3, function(x) do.call(rbind, x))

# We then use the do.call(rbind on this list and we have a 
# matrix

do.call(rbind, lapply(dat3, function(x) do.call(rbind, x)))

# Let's assign that for later:

the_mat <- do.call(rbind, lapply(dat3, function(x) do.call(rbind, x)))

#============================================    
# Now we put it all together with data.frame:

data.frame(ID, the_mat) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T15:18:51.413

```
DF
##   ID                                                                                  Semantic.Tags
## 1  1                                   Person:mitch mcconnell, Person:ashley judd, Position:senator
## 2  2        Person:mitch mcconnell, Position:senator, ProvinceOrState:kentucky, topicname:politics 
## 3  3      Person:mitch mcconnell, Person:ashley judd, Organization:senate, Organization:republican 
## 4  4                                                         Person:ashley judd, topicname:politics
## 5  5                URL:www.huffingtonpost.com, Company:usa today, Person:chuck todd, Company:msnbc

ll <- lapply(strsplit(DF$Semantic.Tags, ","), strsplit, split = ":")

f <- function(x) do.call(rbind, x)

f(lapply(ll, f))
##       [,1]               [,2]                    
##  [1,] "     Person"      "mitch mcconnell"       
##  [2,] " Person"          "ashley judd"           
##  [3,] " Position"        "senator"               
##  [4,] "     Person"      "mitch mcconnell"       
##  [5,] " Position"        "senator"               
##  [6,] " ProvinceOrState" "kentucky"              
##  [7,] " topicname"       "politics "             
##  [8,] "     Person"      "mitch mcconnell"       
##  [9,] " Person"          "ashley judd"           
## [10,] " Organization"    "senate"                
## [11,] " Organization"    "republican "           
## [12,] "     Person"      "ashley judd"           
## [13,] " topicname"       "politics"              
## [14,] "     URL"         "www.huffingtonpost.com"
## [15,] " Company"         "usa today"             
## [16,] " Person"          "chuck todd"            
## [17,] " Company"         "msnbc" 
```

# jquery - 使用 jquery 更改类中的链接属性

> ID：15905458
> 
> 赞同：0
> 
> 时间：2013-04-09T15:00:33.730
> 
> 标签：jquery

无需手动为每个 href 分配 ID，目标是将两个 href 的 URL 更改为不同的 URL

```
<div class="example">
        <p><a href="http://www.google.com/example?test1332">Test Site</a></p>
        <p><a href="http://www.google.com/example?test1332">Test Site</a></p>
</div> 
```

这是我的 jquery 尝试，它不起作用

```
$(".example").each(function() {
    this.setAttribute("href", this.getAttribute("href").replace("http://www.test.com"));
}); 
```

这是我的小提琴[http://jsfiddle.net/n322j/](http://jsfiddle.net/n322j/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:01:29.040

你似乎想要

```
$('.example a').attr('href', "http://www.test.com"); 
```

如果您只想替换 URL 的一部分，也就是将所有内容分开`http://www.google.com`，那么您可以这样做

```
$(".example a").attr('href', function(i, href) {
   return href.replace("http://www.google.com", "http://www.test.com");
}); 
```

[示范](http://jsfiddle.net/DjHAp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:25:46.413

另一种方法。

```
<script>
$("document").ready(function (){
$("div p a").attr('href',"http://www.google.com");
});
</script> 
```

它也可以正常工作。

# python - 在 div 而不是页面中处理重定向以进行 3D 安全操作

> ID：15905460
> 
> 赞同：1
> 
> 时间：2013-04-09T15:00:35.020
> 
> 标签：python, web-applications, 3d-secure

我有一个基于 Web 的客户端应用程序，它大量使用 JavaScript 和 JQuery。在客户端使用应用程序时，页面内容会动态变化，刷新页面会导致整个更改的内容丢失。

现在，我必须在我的应用程序中添加*3d Secure*支付方式。问题是，（使用 3d 安全系统的人可能知道）在验证信用卡号码后，我被重定向到相关银行的 3d 安全页面，银行希望我通过输入信用卡的*安全代码*和*密码*进行验证通过 SMS 发送到预定义的电话号码。如果相关信息正确，则银行将我重定向到我的成功 url，如果交易失败，则将我重定向到失败 url。

一切都很好，但正如我所提到的，我无法在我的应用程序页面中处理此重定向。是否可以在 div 中启动该过程？

如果有帮助，我正在使用 python 和 django 作为框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:19:29.430

它可能无济于事，但 IMO 尝试这样做是个坏主意。你也许可以用 来做`iframe`，但即便如此，这也可能是个坏主意。

原因很简单：当输入他们的卡安全码（或其他）时，许多用户会想要检查他们是否真的在他们的银行网站上——URL、favicon、HTTPS 证书等。所以不要隐藏所有通过将此嵌入您的页面中。

我通常讨厌弹出窗口，但对我来说，在这种情况下它们是完全可以接受的。

# c# - 如何在 Visual C# 项目之间同步版本？

> ID：15905462
> 
> 赞同：7
> 
> 时间：2013-04-09T15:00:38.687
> 
> 标签：c#, build, version, project, sync

我的解决方案中有三个项目：一个基础项目，以及一个引用基础的客户端和服务器。

我想做的是能够设置基础项目文件的程序集版本，并让它自动传播到服务器和客户端，这样它们的版本总是匹配的。理想情况下，这将是同步它们的预构建步骤。

有谁知道这是否可能或我将如何去做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T15:14:14.877

我们所做的与 Chris 的回答非常相似：

我们有一个名为 的项目`ProductVersion`，其中“Product”实际上是产品名称。里面是一个名为的静态类`VersionInformation`，其中包含常量字符串，其中包括一个名为的字符串`ProductVersion`，这是我们实际设置版本信息的地方。

然后在每个项目的`AssemblyInfo.cs`文件中，我们的`AssemblyVersion`行如下所示：

```
[assembly: AssemblyVersion(Company.Product.VersionInformation.ProductVersion)] 
```

在您的情况下，由于客户端和服务器都引用了基础项目，您可以在基础项目中包含类似的内容，而不是创建单独的项目。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T15:05:31.150

将版本信息移动到解决方案根目录中的单独文件（例如 AssemblyVersion.cs）中。然后从每个项目的 AssemblyInfo.cs 文件中删除版本信息，并将共享的 AssemblyVersion 文件作为链接添加到每个项目中。

1.  右键单击项目，单击添加现有项
2.  浏览到共享文件，单击添加按钮上的小箭头并选择添加为链接
3.  将生成的文件拖到每个项目中的 Properties 文件夹中。
4.  ？？？
5.  利润！

# c# - iTextSharp 和大表（>100k 行）

> ID：15905464
> 
> 赞同：1
> 
> 时间：2013-04-09T15:00:43.597
> 
> 标签：c#, pdf, itextsharp

我们正在使用 iTextSharp 生成一些 PDF 文件，这些文件呈现具有大量行（超过 100,000 行）的大表格。

这需要很长时间（在我的 Intel i7 2600k 上超过 25 秒）。添加一些计时器后，我意识到大部分时间（17 秒）都花在了将 PDFPTable 添加到 PDFDocument 中。

我已经搜索了很多关于可能的优化（你知道，就像在列表视图上，你调用 SuspendLayout()，添加你的行，然后是 ResumeLayout()）但什么也没找到。在 iText in Action 书中，他们只讨论了分段表以更好地管理内存。我已经尝试过了，但它导致生成的时间相同。

有什么我可以做的吗？25 秒是相当长的时间。

问候，

# android - 从android中的URL读取数据时无法读取特殊字符

> ID：15905468
> 
> 赞同：0
> 
> 时间：2013-04-09T15:00:57.630
> 
> 标签：android, webview

我正在从 URL 读取内容并修改字符串并再次在 Webview 中加载数据。但它无法正确加载。附加屏幕截图。随便猜

```
WebSettings settings = webView.getSettings();
        settings.setDefaultTextEncodingName("utf-8");
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
            String base64 = Base64.encodeToString(benefitsCore.getBytes(), Base64.DEFAULT);
            webView.loadData(base64, "text/html; charset=utf-8", "base64");
        } else {
            String header = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>";
            webView.loadData(header + benefitsCore, "text/html; chartset=UTF-8", null);
        } 
```

![在此处输入图像描述](https://i.stack.imgur.com/ZVhT4.png)

```
private String rzBenefitsCoreText() {
    String rzCoreText = null;
    try {
        URL url = new URL(getActivity().getResources().getString(R.string.bby_rz_sliver_benefits_url));
        BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()));//"ISO-8859-1")
        StringBuilder builder = new StringBuilder();
        String inputLine;
        while ((inputLine = br.readLine()) != null)
        builder.append(inputLine);
        rzCoreText = builder.toString().replace("Silver member", "Core member");
        Log.i("Data:", rzCoreText);
        br.close();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return rzCoreText;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T06:50:11.540

我有同样的问题。它基于您手机上的字体。我的意思是，如果您在调试器中查找字符串，则没有任何问题，但是在我的情况下，字体并未涵盖与我的文本相关的所有 unicode 字符，因此某些字符无法正确显示，就像您的那样。可能使用其他字体可以帮助您解决这种情况。

# grails - 如何为国家/地区实施 grails Url Mapping

> ID：15905470
> 
> 赞同：0
> 
> 时间：2013-04-09T15:01:00.523
> 
> 标签：grails

我的应用程序有一点问题，我想实现这个：domain/countries/controller/... 但我不知道该怎么做。url映射有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:36:36.120

在你的 UrlMappings 中尝试这样的事情：

```
 static mappings = {
  name contryURL: "/$domain/$country/$controller/$action?/$id?"{
        constraints {
            //if you need them
        }
    } 
```

这是假设域和国家是参数。

# spring - JUEL 设置不起作用

> ID：15905471
> 
> 赞同：0
> 
> 时间：2013-04-09T15:01:00.787
> 
> 标签：spring, expression, spring-webflow, myfaces, juel

我尝试了两种方法来实现[这一点](https://github.com/beckchr/juel)。

规格：MyFaces 2.1.7 javax.el 2.1.0 WebFlow 2.3.1 Spring Framework (OSGI)

首先，添加依赖。

```
<dependency>
  <groupId>de.odysseus.juel</groupId>
  <artifactId>juel-api</artifactId>
  <version>2.2.6</version>
</dependency>

<dependency>
  <groupId>de.odysseus.juel</groupId>
  <artifactId>juel-impl</artifactId>
  <version>2.2.6</version>
</dependency>

<dependency>
  <groupId>de.odysseus.juel/groupId>
  <artifactId>juel-spi</artifactId>
  <version>2.2.6</version>
</dependency> 
```

然后我将捆绑包附加到我的应用程序的 manifest.mf 中。

首先，我尝试使用一些人编码的[这种旧方法。](http://www.scottbattaglia.com/2008/12/17/spring-web-flow-2-and-juel-integration/)当我尝试运行它时，我收到以下错误消息：

```
org.springframework.binding.expression.ParserException: Unable to parse expression string '#{extRuntimeAuthorityUserManager.addRuntimeAuthority(conversationScope.accessLayerModel.accessUser, T(com.common.identity.enums.ERuntimeAuthority).AUTHORITY_CHANGE_WORKING_INSTITUTION)}' 
```

其次，我**最近**发现的是[这个](http://tandraschko.blogspot.ca/2012/08/increase-your-jsf-application.html)。我对 javax.el 的冲突版本有一些问题，因为 juel-api 导入是自己的。所以，我在 juel-api manifest 中添加了这一行。

```
Fragment-Host: javax.el 
```

然后，

我将来自 JUEL 的 ExpressionImpl 添加到 web.xml 中的 MyFaces 配置中

```
<context-param>
        <param-name>org.apache.myfaces.EXPRESSION_FACTORY</param-name>
        <param-value>de.odysseus.el.ExpressionFactoryImpl</param-value>
</context-param> 
```

不幸的是，我收到以下日志消息：

```
MyFaces Bean Validation support enabled 
```

这告诉我们 JUEL 没有被加载？我错过了什么或做错了什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:23:08.793

更改了我的应用程序正在使用的 javax.el 的清单。

1) 删除旧的 javax 版本，并将其替换为 jetty.orbit 中[最新版本](http://repo2.maven.org/maven2/org/eclipse/jetty/orbit/javax.el/2.2.0.v201303151357/javax.el-2.2.0.v201303151357.pom)的 javax.el。2）保持我提到的对 Juel 的依赖。3）将这些捆绑包添加到您的项目（webapp）的 Manifest.mf

*   javax.el.2.2.0.v201303151357
*   juel-api
*   juel-impl

4）棘手的部分：打开javax.el.2.2.0.v201303151357并打开这个jar的清单。然后，添加此行以强制使用 juel-api 中的 javax.el。

```
Fragment-Host: de.odysseus.juel-api 
```

# cassandra - 导出/导入 cassandra 表的最后 N 行的简单方法

> ID：15905472
> 
> 赞同：0
> 
> 时间：2013-04-09T15:01:00.837
> 
> 标签：cassandra

这可能吗？只要它的大小合理，我不关心中间格式。我正在尝试从每个表中导出-导入大约 2-3k 行（想想：一个事件日志）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:45:06.767

不确定我是否理解您想要做什么，但此处描述的工具可能会有所帮助。 [http://www.datastax.com/docs/1.0/references/sstable2json](http://www.datastax.com/docs/1.0/references/sstable2json)

如果你想在你的代码中做，你可以使用 KeyRange 遍历行——如果你知道从哪一行开始，你可以做这样的事情......

[使用 Pelops 客户端的示例]

```
KeyRange current_keyrange = Selector.newKeyRange(myStartRowKey, "", 2000); 
```

如果你不知道从哪里开始，你应该迭代——从这样的 KeyRange 开始

```
KeyRange current_keyrange = Selector.newKeyRange("", "", 2000); 
```

希望这会有所帮助，卡洛

# jquery - 使模态窗口在悬停结束时消失......没有抖动

> ID：15905482
> 
> 赞同：0
> 
> 时间：2013-04-09T15:01:55.117
> 
> 标签：jquery, hover, modal-dialog

我希望当我将鼠标悬停在列表条目上时出现一个 Javascript 模态弹出窗口，并在鼠标离开链接（或模态弹出窗口）时消失——这样用户就不必单击 X 来使窗口打开离开。窗口的目的是提供有关链接的更多信息，而无需用户单击或转到新页面。

我正在使用 jQuery 的悬停：

```
// Function called to open the window:
function openModalPopupWindow() 
{
  document.getElementById('modalMask').style.display = 'inline-block';  // Make the modal popup stuff visible
} 

// Function called to close the window:
function closeModalPopupWindow() 
{
  document.getElementById('modalMask').style.display = 'none';      // Make the modal popup stuff invisible:
} 

$("li").hover(
  function (e) {
    $(this).append($("<span> ***</span>"));
    openModalPopupWindow ();
  }, 
  function (e) {
    $(this).find("span:last").remove();
    closeModalPopupWindow ();
  }
); 
```

在这个 HTML 文件中：

```
<html>
<head>
  <script type='text/javascript' src='http://code.jquery.com/jquery-1.5.2.js'></script>
  <link rel="stylesheet" href="modal.css" id="css">
</head>
<body>
 <ul>
     <li>Coke</li>
     <li>Pepsi</li>
     <li>R. C.</li>
 </ul>

 <div id="modalMask">
  <div id="modalContent">
   <p>This is a "modal" popup window.</p>
  </div>
 </div>
 <script src="modal.js"></script>
</body>
</html> 
```

问题是当我将鼠标移到项目上时，模态弹出窗口会出现或消失。我猜这里有类似焦点的东西：弹出窗口在它变得可见时优先，所以当我移动鼠标时，鼠标指针不再悬停在列表元素上，并且模式弹出窗口消失了。但是随后鼠标指针再次在元素上方，所以它又回来了，等等。

什么是让这种抖动消失的好方法？

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:07:10.103

总答案编辑**

这里发生的是您的面罩覆盖了预期的悬停位置。一个简单的解决方法是提供`ul`比掩码更高的 z-index。

只需将其添加到您的 CSS：http: [//jsfiddle.net/e8f7P/3/](http://jsfiddle.net/e8f7P/3/)

```
ul{
    position:relative;
    z-index:1001;  
} 
```

如果这不是您正在寻找的效果，但您仍然需要该功能，则必须制作一个伪悬停点。基本上你必须重新创建你的列表点，但是让它们基本上不可见（没有内容）并给它们一个更高的 z-index。

让我知道你想走哪个方向，如果这两个选项中的后者是你想要的效果，我可以帮助你。

# php - 在 vhost 文件中设置 *.domain.net 时，Apache2 Ruby 和 Python 加载默认网站

> ID：15905487
> 
> 赞同：0
> 
> 时间：2013-04-09T15:02:05.013
> 
> 标签：php, python, ruby, apache2, vhosts

5 个使用命名虚拟主机设置的站点。

*   site1.domain.net (PHP)
*   site2.domain.net (Python)
*   site3.domain.net (Ruby)
*   site4.domain.net (PHP)
*   site5.domain.net (PHP)

在 site1 的虚拟主机中，我还将 ServerAlias 设置为 *.domain.net，因为我希望任何未定义的地址都转到该地址。

当我将 *.domain.net 添加到该虚拟主机时，python 和 ruby​​ 站点将重定向到 site1 而不是它们命名的虚拟主机。所有的 php 网站都工作正常。

我的猜测是，python 和 ruby​​ 站点分别使用 wsgi 和passenger 与它加载不正确的原因有关。

我正在阅读有关 UseCanonicalNames 的内容，但我不明白这会如何影响这一点。

**我不仅对解决方案感兴趣，而且对这两种语言为什么（或如何）处理它们的虚拟主机配置以及为什么这样的改变会产生影响的原因感兴趣。**

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:12:34.373

我认为这与 mod_wsgi 和 Phusion Passenger 的使用没有任何关系。我认为这就是 ServerAlias 的工作方式。

你可以试试这个替代方案：

*   删除 ServerAlias。
*   为“*.domain.net”（或者，如果这不起作用，则为“.domain.net”或“domain.net”）设置一个重定向到 site1.domain.net 的虚拟主机。

这还有一个好处是您的用户不能为非规范子域名添加书签。

顺便问一下，你知道 Phusion Passenger 也支持 WSGI 吗？

# javascript - 第二个单词和着色后的换行符

> ID：15905491
> 
> 赞同：1
> 
> 时间：2013-04-09T15:02:16.727
> 
> 标签：javascript, line, word, break

我有一个产品标题“Pillow BALANCE Purple”，我想在第二个单词之后换行。如下所示。

枕头平衡
紫色

这个标题有一个类让我们说“标题”。我使用以下代码更改第一个单词“Pillow”的颜色，但我也需要更改第二个单词的颜色，当然还要让第三个单词进入第二行。任何帮助将不胜感激。

```
//add span to first word of module title, page heading
window.addEvent ('domready', function () {
    var els = $$('.art-postcontent h2 a, .art-postcontent h2 a:link, .art-postcontent h2 a:hover, .art-postcontent h2 a:visited, .art-blockcontent h2 a, .art-blockcontent h2 a:link, .art-blockcontent h2 a:hover, .art-blockcontent h2 a:visited');
    if (!els.length) return;
    els.each (function(el){
         var html = el.innerHTML;
         var text = el.get("text");
         var pos = text.indexOf(' ');
         if (pos!=-1) {
            text = text.substr(0,pos);
         }
         el.set("html", el.get("text").replace(new RegExp (text), '<span class="first-word">'+text+'</span>'));

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:19:01.953

使用 split() 函数应该可以帮助你。

```
var str = 'pillow BALANCE purple';
var substr = str.split(' ');    //splits the string at each space (&nbsp;)

$('#firstLine').text(substr[0] + substr[1]);  //adds first two words to first line
$('#secondLine').text(substr[2]);  //add third word to second line 
```

HTML：

```
<div id="firstLine"></div>
<br />     <!-- Break will put the next div on a new line -->
<div id="secondLine"></div> 
```

# sql-server - Node.js & sql server & python？

> ID：15905492
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:02:17.387
> 
> 标签：sql-server, node.js

我想运行 SQL 服务器查询。（在 NodeJs 服务器下）

[**我在这里**](https://npmjs.org/package/node-sqlserver)读过 关于先决条件

问题 ：

为什么 Node.js 需要 Python ？

![在此处输入图像描述](https://i.stack.imgur.com/q8Mvh.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:15:21.280

节点不需要 Python。这是您要使用的 SQL 驱动程序的要求。

# xml - XSLT - 在一行中显示子元素

> ID：15905494
> 
> 赞同：0
> 
> 时间：2013-04-09T15:02:27.560
> 
> 标签：xml, xslt, xpath

我有以下 XSLT 代码，它显示来自本地 XML 文件（标题、演员、运行时等）的电影信息和来自外部亚马逊 xml 的 Amazon API 产品信息（产品标题和图片）。

```
<xsl:variable name="moviesXML" select="document('movies.xml')"/>
<xsl:variable name="inputRoot" select="/"/>

<xsl:param name="movieID"/>

<xsl:template match="/">
    <html>
        <head>
            <title>Movie details</title>
        </head>
        <body>
            <xsl:for-each select="$moviesXML/movies/movie[@movieID=$movieID]">
                <xsl:value-of select="title" />
                <xsl:value-of select="actors" />
                ...
                <xsl:apply-templates select="$inputRoot/aws:ItemLookupResponse/aws:Items/aws:Item/aws:ItemAttributes/aws:Title"/>
                <xsl:apply-templates select="$inputRoot/aws:ItemLookupResponse/aws:Items/aws:Item/aws:MediumImage/aws:URL"/>
            </xsl:for-each>
        </body>
    </html>
</xsl:template>

<xsl:template match="aws:Title">
    <xsl:value-of select="." />
    <br/>
</xsl:template>

<xsl:template match="aws:URL">
    <img src="{.}"/>
    <br/>
</xsl:template> 
```

因此，根据从上一页传递的movieID，上面的代码显示了该特定电影的所有相关信息。我使用 Amazon API 为每部电影显示两种产品（DVD 和蓝光产品）。

我遇到的问题是我的 XSLT 一次显示两个亚马逊产品标题，然后同时显示两个图片。但我想要的是显示亚马逊产品标题+图片（DVD），然后是另一个亚马逊产品标题+图片（蓝光）。

这是我得到的输出：

![坏的](https://i.imgur.com/JzC9V5Q.jpg)

这就是我想要实现的目标：

![好的](https://i.imgur.com/Abagcsq.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:13:16.583

你得到你想要的。这些线

```
<xsl:apply-templates select="$inputRoot/aws:ItemLookupResponse/aws:Items/aws:Item/aws:ItemAttributes/aws:Title"/>
<xsl:apply-templates select="$inputRoot/aws:ItemLookupResponse/aws:Items/aws:Item/aws:MediumImage/aws:URL"/> 
```

将首先应用一批模板，然后是另一批。

您需要将标题和图像放在一个模板中，如下所示：

```
<xsl:template match="aws:Item">
    <xsl:value-of select="aws:ItemAttributes/aws:Title" />
    <br/>

    <img src="{aws:MediumImage/aws:URL}"/>
    <br/>
</xsl:template> 
```

然后像这样使用它

```
<xsl:apply-templates select="$inputRoot/aws:ItemLookupResponse/aws:Items/aws:Item"/> 
```

顺便说一句，这是我第一次在这里看到 XSLT 代码中“太多”的模板分解。更多时候你会看到相反的问题。

# c - 进程与管道之间的通信

> ID：15905496
> 
> 赞同：2
> 
> 时间：2013-04-09T15:02:30.490
> 
> 标签：c, operating-system, fork, pipe, inter-process-communicat

我正在尝试实现一个程序，该程序在输入中采用一系列参数，并取决于它创建由管道实现的相同数量的进程，每个进程在管道中写入，然后将其传递给父亲。

这是我的代码，它不能满足我的需要。

谢谢你的帮助 。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>
#include <string.h>

int main(int argc ,char *argv[])
{
 int i,pid;
 int fd[2];//crea i descriptor 
 char phrase[30][30];//crea il buffer
 pipe(fd); /* crea la pipe */

     // Genera i 10 processi
  for(i=0;i<argc-1;i++)
  {
   if((pid=fork())==0)
    {               
      strcpy(phrase[i], argv[i+1]);  
      printf("ho scritoo :'%s'\n",*phrase);
      close(fd[0]);                         /* chiude in lettura */
      write(fd[1],phrase,strlen(*phrase)+1); /* invia anche 0x00 */
      close (fd[1]);                   // chiude in scrittura
                                // pid=0 -> figlio
      usleep(50000*(1+i));      // Ritardo iniziale
      printf("Figlio: %d\n",i+1);   // Stampa messaggio del figlio
      usleep(500000*(1+i));     // Ritardo finale
      return(101+i);            // Termina con codice di ritorno
       } 
   else { 
        printf("Ho generato il figlio %d con pid %d\n",i+1,pid);
        char message[100];    //creare il buffer 
        memset(message,0,100);
        int bytesread;  
        close(fd[1]);                         /* chiude in scrittura */
        bytesread = read(fd[0],message,sizeof(message));
        printf("ho letto dalla pipe %d bytes: '%s' \n",bytesread,message);
        close(fd[0]);
    }
  }

  // Attende che dieci processi terminino
  for(i=0;i<argc-1;i++)
  {
    int status;
    wait(&status);      // Attende termine di un figlio (uno qualunque)
    printf("Terminato processo %d\n",WEXITSTATUS(status));
  }
} 
```

输入：./pipes cmd1 cmd2 cmd3

```
 I created the first child with pid 21552
 I wrote: 'cmd1'
 I read from the pipe 5 bytes: 'cmd1'
 I created the second child with pid 21553
 I read from the pipe -1 bytes:''
 I wrote: ') ML?'
 I created the third child with pid 21554
 I read from the pipe -1 bytes:''
 I write: ') ML?'
 Son: 1
 Son: 2
 Son: 3
 Ended process 101
 Ended process 102
 Ended process 103 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:34:28.967

你有两个问题：

首先，您没有写入`phrase`管道的权利。你一直在写作`phrase`。对于第一个孩子，这是可以的，对于其他孩子，它将是空字符串。

其次，您`fd[0]`在创建第一个孩子后关闭。您永远不会收到来自其他进程的数据。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>
#include <string.h>

int main(int argc ,char *argv[])
{
    int i,pid;
    int fd[2];//crea i descriptor 
    char phrase[30][30];//crea il buffer
    pipe(fd); /* crea la pipe */

    for(i = 0; i < argc - 1 ; i++)
    {
        if((pid=fork())==0)
        {               
            strcpy(phrase[i], argv[i+1]);  
            printf("ho scritoo :'%s'\n",phrase);
            close(fd[0]);                         /* chiude in lettura */
            write(fd[1],phrase[i],strlen(phrase[i])+1); /* invia anche 0x00 */
            close (fd[1]);                   // chiude in scrittura
            // pid=0 -> figlio
            usleep(50000*(1+i));      // Ritardo iniziale
            printf("Figlio: %d\n",i+1);   // Stampa messaggio del figlio
            usleep(500000*(1+i));     // Ritardo finale
            return(101+i);            // Termina con codice di ritorno
        } else { 
            printf("Ho generato il figlio %d con pid %d\n",i+1,pid);
            char message[100];    //creare il buffer 
            memset(message,0,100);
            int bytesread;  

            bytesread = read(fd[0],message,sizeof(message));
            printf("ho letto dalla pipe %d bytes: '%s' \n",bytesread,message);
            // close(fd[0]);
        }
    }
    close(fd[0]);                         /* chiude in scrittura */
    close(fd[1]);                         /* chiude in scrittura */
    // Attende che dieci processi terminino
    for(i=0;i<argc-1;i++)
    {
        int status;
        wait(&status);      // Attende termine di un figlio (uno qualunque)
        printf("Terminato processo %d\n",WEXITSTATUS(status));
    }
    return 0;
} 
```

# python - 如何通过“Duck Typing”区分元组和简单字符串？

> ID：15905498
> 
> 赞同：3
> 
> 时间：2013-04-09T15:02:34.437
> 
> 标签：python, python-2.7

*我对编程比较陌生，所以如果我犯了一个荒谬的错误，请原谅我将以下内容称为 Duck Typing。*

我有一个接收**字符串**或**元组（包含字符串）**作为单个参数的过程。

例子：

```
def proc(arg):
    try:
        arg is a tuple
        handle arg a tuple
    except:
        arg is a simple string
        handle it so 
```

根据**参数是否为元组**，我希望函数表现不同。

我不想输入检查并想使用一个`try..except`过程。

我考虑过尝试`arg[0]`，但 Python 中的字符串也是对象，在这方面它们的行为类似于元组并返回一些东西。

我可以在这里做什么？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:03:12.307

在你的情况下，我建议你不要尝试......除了因为你想根据变量的类型表现不同......

当你没有表现出不同的行为时，你应该使用 try..except。

从我的评论：

> 当您的代码期望事物始终以相同的方式运行而并非如此时，您应该使用异常。在这里，您希望代码根据变量表现不同，因此您不应该尝试..except，而是检查它是什么

您可以使用[`isinstance`](http://docs.python.org/2/library/functions.html#isinstance).

```
isinstance(x, tuple) 
```

请参阅[这篇文章](https://stackoverflow.com/questions/1549801/differences-between-isinstance-and-type-in-python)`isinstance`了解和之间的区别`type`

[关于鸭子打字和宽恕](https://softwareengineering.stackexchange.com/questions/175655/python-forgiveness-vs-permission-and-duck-typing/175663#175663)

* * *

使用您的代码和我的答案来创建解决方案：

```
def proc(arg):
    if isinstance(arg, tuple):
        # handle as tuple
    elif isinstance(arg, str):
        # handle as str
    else:
        # unhandled? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:33:40.267

我认为你的错误（不是很“荒谬”，因为即使是有经验的程序员有时也会犯）在这里：

> 我有一个接收字符串或元组（包含字符串）作为单个参数的过程......根据参数是否为元组，我希望函数的行为有所不同。

不要这样设计你的功能。一个函数应该做*一*件事，如果你需要两件不同的事情，写两个函数：

```
def process_item(some_string):
def process_items(tuple_of_strings): 
```

尽管在 python 中没有明确的类型，变量和参数应该保持类型——也就是说，在你程序的任何时候你都应该能够知道每个变量是什么类型。冒着夸大的风险，我想说`isinstance`代码中的每一个都是设计缺陷的标志。修复您的设计，将不需要变通方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:14:37.097

如果你仍然想要它：

```
>>> s='vd sd'
>>> t=('ds','')
>>> t+='34'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can only concatenate tuple (not "str") to tuple
>>> s+='34'
>>> 
```

# sql - 从两个表查询映射配置

> ID：15905499
> 
> 赞同：0
> 
> 时间：2013-04-09T15:02:34.577
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我的场景是这样的：
表 A 是不同系统的配置值的键（映射）。我正在创建一个配置面板，在对 TableA 的查询中，结果将按 SystemName 过滤。

我的问题是我无法得到空/空/值的结果，如结果所示。这是必需的，因为 UI 正在根据此结果呈现标签和文本框。

TableB 可能有也可能没有配置映射中所有键的值。

我想要这种格式的值（即首先从 TableA 中获取所有值，然后从 TableB 中填充值并返回结果）：

```
TableA
ID Name  SystemName
1  Path1 SystemA
2  Path2 SystemA
3  Path3 SystemA
4  Path1 SystemB
5  Path2 SystemB
6  Path3 SystemB

TableB
ID TableAID Value
1  2        //Volumes/SomeDrive/SomeFolder

Result
ID Name   TableAID SystemName Value
1  Path1  1        SystemA    ''
2  Path2  2        SystemA    //Volumes/SomeDrive/SomeFolder
3  Path3  3        SystemA    '' 
```

有没有一个简单的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:11:33.223

```
SELECT ISNULL(TableB.ID, TableA.ID) AS ID,
    TableA.Name, 
    TableA.ID as TableAID, 
    TableA.SystemName, 
    ISNULL(TableB.Value,'') AS Value
FROM TableA
LEFT OUTER JOIN TableB
  ON TableA.ID = TableB.ID 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T15:10:02.043

是的，您使用外部联接而不是内部联接。

# c - C: 从singly-LinkedList1 中移除一个节点并将其插入到singly-LinkedList2 的头部

> ID：15905502
> 
> 赞同：4
> 
> 时间：2013-04-09T15:02:39.997
> 
> 标签：c, pointers, singly-linked-list

我正在做一个模拟操作系统进程调度程序的计算机科学项目。我有**多个单链表**，需要在它们之间**移动节点**。我正在尝试编写一个通用**函数**来实现这一点，但我认为我**使用指针的弱点**阻碍了我。

如何实现所需的功能？到目前为止，我有以下内容：

```
typedef struct process_list_struct ProcessList;

struct process_list_struct
{
    Process proc;
    ProcessList* next;
};

void change_lists(ProcessList* node, ProcessList* newlist)
{
    ProcessList* temp = NULL;
    debug_printf("change_lists reached\n");
    temp = node;
    if(!node)
    {
        debug_printf("Error: change_lists failed!\n");
        return;
    }
    node = node->next;
    temp->next = newlist;
    newlist = temp;
    return;
} 
```

结果很奇怪......我最终得到的第一个列表**只**包含我想要移动的节点并且**其他所有内容都**丢失了（与我想要的效果几乎相反），并且新*列表*（测试为开始为空）仍然是空的。

我在单个列表中查找了节点交换的实现，并且看到人们使用**双指针**代替，但这真的让我感到困惑。有人可以告诉我如何在这种情况下应用它们吗？我尝试使用它们，但它们与结构的引用指针元素结合起来真的很混乱。

非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:06:24.753

您按照四个步骤将节点从一个列表转移到另一个列表是错误的：

```
temp = node
node = node->next;
temp->next = newlist;
newlist = temp; 
```

见下面我用图表显示：

假设您在链表 1 中有节点**：**

```
 +---+----+----+      +----+----+----+      +---+----+----+
  ->|   zero      |----->|      one     |----->|    two      |--
    +---+----+----+      +----+----+----+      +---+---+-----+
                             ^   ^
                             |   |
                             |  node 
    after temp=node        temp 
```

之后：`node = node->next;`事情变成：

```
 +---+----+----+      +----+----+----+      +---+----+----+
  ->|   zero      |----->|      one     |----->|    two      |--
    +---+----+----+      +----+----+----+      +---+---+-----+
                             ^                        ^
                             |                        |
                             temp                    node 
```

在`temp->next = newlist;`这之后？

```
 +---+----+----+      +----+----+----+      +---+----+----+
  ->|   zero      |----->|      one     |      |    two      |--
    +---+----+----+      +----+----+----+      +---+---+-----+
                             ^       |                ^
                             |       |                |
                             temp    |                node     
                                     |
                                     |
                                     |    "head node"
                                     |   +---+----+----+   +---+----+---+
         "This is your list-2"       |-->|   FIVE      |-->|   SIX      |--
                                         +---+---+-----+   +---+----+---+ 
                                          newlist 
```

你的背阔肌步骤`newlist = temp;`？

```
 newlist                    
                            |
                            ▼ "head node"
    +---+----+----+      +----+----+----+      +---+----+----+
  ->|   zero      |----->|      one     |      |    two      |--
    +---+----+----+      +----+----+----+      +---+---+-----+
                             ^       |                ^
                             |       |                |
                             temp    |                node     
                                     |
                                     |    
                                     |   +---+----+----+   +---+----+---+
         "This is your list-2"       |-->|   FIVE      |-->|    SIX     |--
                                         +---+---+-----+   +---+----+---+ 
```

**这是你做的。但这不是你想要的？**
您将节点从一个列表转移到另一个列表的算法是错误的另外您犯了技术错误，您正在按值传递指针（您需要指向指针的指针以反映调用函数时的更改）

因为你想将节点从一个列表转移到另一个，并传递一个列表中的指针和`node`另一个列表的头，你需要传递指针的指针来反映调用函数的变化，因此你的声明在我看来是错误的：

```
void change_lists(ProcessList* node, ProcessList* newlist) 
```

我认为应该是：

```
void change_lists(ProcessList** node, ProcessList** newlist) 
```

使用此原型编写代码以转移节点。

**编辑**：（建议）

您的代码中的基本问题是，要在列表一中移动一个节点（*例如一个*），您不会更改指向先前节点（*图中的零节点*）的指针，您需要使

```
[zero] ---> [two] 
```

@CodeRat 在他的列表中犯了类似的错误：[**在单链表中交换节点**](https://stackoverflow.com/questions/15315914/swap-nodes-in-a-singly-linked-list?answertab=votes#tab-top)

我给了他一个我认为会帮助你实现代码的答案。

旧答案：

我能找到的一个错误：而不是

```
*temp = *node; 
```

你应该写

```
temp = node; 
```

地址不是值

这样做`*temp = *node;`是未定义的行为，因为您没有为 temp 分配内存，您需要在 temp 中分配地址。（temp 指向 NULL）因为您想将节点从一个列表转移到另一个列表，这就是您需要的原因`temp = node;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:10:18.973

我相信你的原型是错误的，它太简单了。

您不能移动单链表的节点，而不能以某种方式在以后更改哪个节点被视为列表的开头。

否则，如果移动第一个节点会发生什么？周围的代码将保留指针，但节点现在逻辑上是移动目标列表的一部分，并且一切都被破坏了。

此外，这同样适用于目的地列表：如果在移动之前它是空的怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:12:28.690

这段代码中明显错误的一件事是`*temp = *node;`when `temp`= `NULL`。您不能取消引用 NULL 指针。

此外，如果`node`属于单链表，如果您只有一个指向`node`. 要删除它，您需要更改指向的节点，`node`使其不再指向`node`，而是指向`NULL`或指向后面的节点`node`。如果您使用双向链表，您可以找到`node`仅给出指向 的指针的邻居节点`node`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:45:12.360

要从单链表中删除一个节点，它的前一个节点是必需的。前一个节点必须链接到下一个节点。

如果前一个节点对函数可用，那么很好，但如果没有，则必须从头部开始查找。因此，需要头部。

两个列表的标题都是必需的。并且由于删除或添加操作可以更改头指针，因此很自然地将它们作为指针传递。

# jquery - 手动刷新后 JQuery Mobile 的奇怪行为

> ID：15905506
> 
> 赞同：1
> 
> 时间：2013-04-09T15:02:46.703
> 
> 标签：jquery, html, jquery-mobile

在 jQuery 移动应用程序上，我有一些奇怪的错误，这些错误是在此页面中手动刷新后发生的。虽然很难解释..例如这个页面工作正常但是**如果**我刷新页面然后当我转到另一个页面并返回到这个页面时（所有单独的 html 文件）

```
 $("#accountlist").html(myHtml); 
```

没有设置 html，我得到一个空列表，但我知道“myhtml”具有正确的数据，**然后如果我****再次**转到另一个页面并返回，**则**html 设置正确。

有任何想法吗？

```
<body>

<div class="account" id="accountpage" data-role="page">
    <script>

    $(document).off('pageshow', '#accountpage').on('pageshow', '#accountpage', function() {

        $(document).off('click', '#backbuttonaccount').on('click', '#backbuttonaccount', function(){
            $.mobile.changePage("menu.html", {
                reloadPage: false,
                transition: "flip",
                reverse: true
            });
        });

      $("#accountlist").html("myHtml");
    });

</script>

    <div class="container" id="accountcontanier" data-role="content">
              <ul id="accountlist"> 

              </ul>

    </div> 
```

当我在设置后立即使用它进行调试时；

```
 console.log($("#accountlist").text()) 
```

我总能看到正确的价值。

我也尝试过这种东西，但没有一个有帮助

```
 $("#accountlist").listview('refresh'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:19:16.393

好的，经过 2 天的努力，我修复了这个愚蠢的错误，而不是设置 ul id，我添加了一个类 id 并设置它..不知何故它起作用了！

```
 <ul class="account" id="accountlist"> 

          </ul> 
```

然后设置它。

```
$('.account').html(myHtml); 
```

虽然我仍然很感激有人能解释我为什么这有效而不是 ul id。

# php - PHP 显示几个结果

> ID：15905512
> 
> 赞同：0
> 
> 时间：2013-04-09T15:02:55.050
> 
> 标签：php, mysql, forms, phpmyadmin

我的数据库中显示了 2 个结果。这两个结果都代表汽车。我需要在下面创建的表单中显示这些结果。目前它成功显示一个结果，但我需要从这些表中显示几个结果。一旦我开始工作，我会添加更多的汽车。有任何想法吗？

![在此处输入图像描述](https://i.stack.imgur.com/KSFey.jpg)

```
<!DOCTYPE html>
    <?php
    session_start();
    ?>
    <html>
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <meta name="apple-mobile-web-app-status-bar-style" content="black" />
            <title>
            </title>
            <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
            <link rel="stylesheet" href="my.css" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
            </script>
            <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
            </script>
            <script src="my.js">
            </script>
            <!-- User-generated css -->
            <style>
            </style>
            <!-- User-generated js -->
            <script>

                try {

        $(function() {

        });

      } catch (error) {
        console.error("Your javascript has an error: " + error);
      }
            </script>
         </head>
        <body>
            <!-- Home -->
            <div data-role="page" id="page1">
                <div data-theme="a" data-role="header">
                <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                        Back
                    </a>
                    <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                     Home  
                    </a>
                    <h3>
                        Book Car
                    </h3>
               </div>

               <div data-role="content">
                    <h3>
                        Select the car to rent from the availability:
                    </h3>
                    <br />
            <?php

            {
                mysql_connect("localhost" , "" , "") or die (mysql_error());
                mysql_select_db("") or die(mysql_error());

                $pid=intval($_SESSION["User_id"]); 
                $query = "SELECT `car`, `details`, `price` FROM `Car`";

                //executes query on the database
                $result = mysql_query ($query) or die ("didn't query");

                //this selects the results as rows
                $num = mysql_num_rows ($result);    

                while($row=mysql_fetch_assoc($result))
                {

                    $_SESSION['car'] = $row['car'];
                    $_SESSION['details'] = $row['details'];
                    $_SESSION['price'] = $row['price'];
                }
            }
            ?>  
    <html>
    <body>

    <form method="post" action="car.php">
     Car: <input type="text" name="country" value="<?php echo $_SESSION['car']; ?>" readonly><br>
     Details: <input type="text" name="country" value="<?php echo $_SESSION['details']; ?>" readonly><br>
     Price: <input type="text" name="country" value="<?php echo $_SESSION['price']; ?>" readonly><br>
     <img style="width: 130px; height: 100px" img alt="car"src="image/astra.jpg" /&gt;' />
      <input type="submit" value="Submit">

       Car: <input type="text" name="country" value="<?php echo $_SESSION['car']; ?>" readonly><br>
     Details: <input type="text" name="country" value="<?php echo $_SESSION['details']; ?>" readonly><br>
     Price: <input type="text" name="country" value="<?php echo $_SESSION['price']; ?>" readonly><br>
     <img style="width: 130px; height: 100px" img alt="car"src="image/audi.jpg" /&gt;' />
      <input type="submit" value="Submit">

    </form>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:07:10.133

```
 $_SESSION['car'] = $row['car'];
                    $_SESSION['details'] = $row['details'];
                    $_SESSION['price'] = $row['price'];
                } 
```

每一个新行都会覆盖旧行。

您可以在 while 循环中创建 html，如下所示：

```
while($row=mysql_fetch_assoc($result))
{
?>
<form method="post" action="car.php">
     Car: <input type="text" name="country" value="<?php echo $row['car']; ?>" readonly><br>
     Details: <input type="text" name="country" value="<?php echo $row['details']; ?>" readonly><br>
     Price: <input type="text" name="country" value="<?php echo $row['price']; ?>" readonly><br>
     <img style="width: 130px; height: 100px" img alt="car"src="image/astra.jpg" /&gt;' />
      <input type="submit" value="Submit">
</form> // now you makes a form for each car
<?php
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:12:24.813

您需要在循环中输出表单，因为此时您刚刚结束了会话变量，因此您将获得表中的最后一辆车。

```
<form method="post" action="car.php">

<?php while($row=mysql_fetch_assoc($result)) { ?>

  Car: <input type="text" name="country" value="<?php echo $row['car']; ?>" readonly><br>
  Details: <input type="text" name="country" value="<?php echo $row['details']; ?>" readonly><br>
  Price: <input type="text" name="country" value="<?php echo $row['price']; ?>" readonly><br>
  <img style="width: 130px; height: 100px" img alt="car"src="image/<?php echo $row['img']; ?>" /&gt;' />

<?php } ?>

<input type="submit" value="Submit">
</form> 
```

我建议将图像名称存储在数据库中，如上所示。老实说，目前该表单是相当多余的，因为当您提交它时，您只会提交表单中的最后一辆车，您需要找到一种允许用户选择他们想要的汽车的方法。

编辑：选择特定汽车的代码

我只是很快把这些放在一起，如有任何错误，我深表歉意。

```
<form method="post" action="car.php">
  <table>
    <tr>
      <th>Image</th>
      <th>Name</th>
      <th>Details</th>
      <th>Price</th>
      <th></th>
    </tr>
  <?php while($row=mysql_fetch_assoc($result)) { ?>
    <tr>
      <td><img style="width: 130px; height: 100px" alt="<?php echo $row['car']; ?>" src="image/<?php echo $row['img']; ?>" /></td>
      <td><?php echo $row['car']; ?></td>
      <td><?php echo $row['details']; ?></td>
      <td><?php echo $row['price']; ?></td>
      <td><input type="radio" name="selected_car" value="<?php echo $row['car']; ?>" /></td>
    </tr>
  <?php } ?>
  </table>
  <input type="submit" value="Submit">
</form> 
```

然后，当您提交时`car.php`，值`$_POST['selected_car']`将是用户选择的任何汽车。

我强烈建议在该表中添加一个 ID 列，并使用它来代替单选按钮中的汽车名称。

我还强烈建议您查看一些 PHP/MySQL 教程，以便您掌握基础知识。[这](http://www.codecademy.com/tracks/php)对于开始使用 PHP 非常有用。

# android - 单击 + 移动对象

> ID：15905514
> 
> 赞同：0
> 
> 时间：2013-04-09T15:02:55.850
> 
> 标签：android, click, touch, move, motionevent

我目前正在使用 MotionEvent.ACTION_MOVE 函数来检测用户是否移动了对象（在本例中为 ImageView）。

问题是现在我的算法变得更加复杂，我需要区分用户是点击了这个对象还是移动了它。

我尝试使用 MotionEvent.ACTION_DOWN 函数，但问题是，每次单击对象时，也会触发 MotionEvent.ACTION_MOVE。

怎样才能做到这一点？（代码非常受欢迎）

提前致谢。

**== 编辑 ==**

这是我的代码：

```
img_view.setOnTouchListener(new View.OnTouchListener()
{   
    @Override
    public boolean onTouch(View v, MotionEvent event)
    {
        switch(event.getAction())
        {
                case MotionEvent.ACTION_DOWN :
            {
            }                   
            break;

            case MotionEvent.ACTION_MOVE :
            {
            }
                    break;  

            case MotionEvent.ACTION_UP :
            {
            }
            break;
            }

        return true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:06:20.960

为了检测四处移动，您要检查某人的手指是否……正在四处移动:)

在 ACTION_DOWN 中检查位置是否正在改变。如果是，在某种程度上，您知道用户正在屏幕上拖动手指。

您可能想看看[这个教程项目](https://github.com/2dwarfs/MultiTouchControllerTutorial)，它是一个简单的 ImageView 示例，具有多个操作，例如拖动、单击和捏合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:20:20.660

回答 ：

```
 final GestureDetector gesture_getector = new GestureDetector(HomeActivity.this, new GestureListener());
    view_img.setOnTouchListener(new View.OnTouchListener()
    {
        @Override
        public boolean onTouch(final View view, final MotionEvent event)
        {
            if (gesture_getector.onTouchEvent(event))
            {
                return true;
            }

                // End of move object detection
            if (event.getAction() == MotionEvent.ACTION_UP)
            {
                if (cursor_is_scrolling)
                {
                    cursor_is_scrolling  = false;                       
                };
            }

            return false;
        }
    });

private class GestureListener extends SimpleOnGestureListener
{
    @Override
    public boolean onDown(MotionEvent e) { return true; }

    // Single click detection
    @Override
    public boolean onSingleTapUp(MotionEvent e)
    {
        return true;
    }

    // Move object detection
    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY)
    {
        cursor_is_scrolling  = true;

        return true;
    }
} 
```

# c# - 获取所有匹配项的索引

> ID：15905515
> 
> 赞同：5
> 
> 时间：2013-04-09T15:02:55.923
> 
> 标签：c#, linq

我想获取与给定条件匹配的可枚举中所有项目的索引。还有比这更干净的方法吗？

```
var indexes = list.Select((item, index) => new { Item = item, Index = index }).Where(o => Condition(o.Item)).Select(o => o.Index); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T15:06:17.147

使用标准 LINQ to Object 方法 - 不，没有。您只能通过将查询分成几行来提高可读性：

```
var indexes = list.Select((item, index) => new { Item = item, Index = index })
                  .Where(o => Condition(o.Item))
                  .Select(o => o.Index); 
```

但是，您可以为此编写扩展方法：

```
public static IEnumerable<int> IndexesWhere<T>(this IEnumerable<T> source, Func<T, bool> predicate)
{
    int index=0;
    foreach (T element in source)
    {
        if (predicate(element))
        {
            yield return index;
        }
        index++;
    }
} 
```

# django - 仅映射到 /shorten 的虚拟主机 2 个域？

> ID：15905520
> 
> 赞同：1
> 
> 时间：2013-04-09T15:03:13.933
> 
> 标签：django, apache, ubuntu

以下是我当前的虚拟主机。我有两个域指向服务器，可以说...

```
domain1.com and domain2.com 
```

目前这两个域似乎都可以与下面的虚拟主机一起使用（即使我在虚拟主机中没有 domain2.com）。

我的问题是我只希望 domain2.com 在 url 有正斜杠 /shorten/ 即 domain2.com/pages/ 时工作

如何使用下面的当前主机文件完成此操作？

```
<VirtualHost *:80>
ServerName domain1.com
ServerAlias domain1.com *.domain1.com
DocumentRoot /srv/project/foo

 Alias /static "/srv/project/foo/public/common"
    <Location "/static/">
        SetHandler None
    </Location>

<Directory /srv/project/foo/apache>
Order deny,allow
Allow from all
</Directory>

WSGIDaemonProcess domain1.com processes=2 threads=15 display-name=%{GROUP}
WSGIProcessGroup domain1.com

WSGIScriptAlias / /srv/project/foo/apache/django.wsgi
ErrorLog /srv/project/logs/error.log
</VirtualHost> 
```

# jpa - 更新数据库中的行

> ID：15905524
> 
> 赞同：2
> 
> 时间：2013-04-09T15:03:34.867
> 
> 标签：jpa, crud

我正在尝试学习如何进行 CRUD 操作，但我似乎无法弄清楚如何更新我的数据库中的现有行。我已经让创建和删除部分正常工作，但我真的不知道如何解决更新部分。我已经用谷歌搜索了很多关于它的信息，但我找不到我完全理解的解释。

```
import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.EntityTransaction;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

@Stateless
public class Modell {

    @PersistenceContext(unitName = "mess")
    private EntityManager em;
    private EntityTransaction tx;

    public void addMessage(String message) {
        EntityDB me = new EntityDB();
        me.setMessage(message);
        em.persist(me);
    }

    public void delete(EntityDB entityDB) {
        em.remove(em.merge(entityDB));

    }

    public void edited(EntityDB entityDB) {
        EntityDB me = new EntityDB();
        //tx.begin();
        em.persist(me);
      // EntityDB me = new EntityDB();
        me.setMessage("edited");
        em.merge(entityDB);
        //tx.commit();

    }

    public List<EntityDB> findAll() {
        Query namedQuery = em.createNamedQuery("findAllMessageEntities");
        return namedQuery.getResultList();
    }
} 
```

有人可以指出我正确的方向吗？截至目前，编辑方法只添加了另一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:28:14.347

如果必须更新实体，则必须对数据库中的现有实体应用更改，而不是创建新实例。

```
public void edited(EntityDB entityDB) {       

  EntityDB me = em.find(EntityDB.class, pk); //-- Else create query
  me.setMessage("edited");
  em.merge(me);
} 
```

# html - 如何使字体“Lucida Sans Unicode”在 IE9 和 Chrome 中以相同的方式呈现？

> ID：15905530
> 
> 赞同：7
> 
> 时间：2013-04-09T15:03:58.200
> 
> 标签：html, css

我在一个项目中使用字体“Lucida Sans Unicode”，但遇到了问题。在 IE9 中，文本下方有一些空间，我不知道为什么会这样。在 Chrome 中没有那么多空间。这是一个示例，您看到的边框来自 IE9 开发人员工具中的“单击时选择元素”功能：

![IE 9 模式](https://i.stack.imgur.com/kSTAT.png)

这是在浏览器模式：IE9 和文档模式：IE9 标准。

这是浏览器模式：IE8 和文档模式：IE8：

![IE 8 模式](https://i.stack.imgur.com/G9wPp.png)

如您所见，“p”下方的空间较小。Chrome 的显示方式与 IE8 模式相同。

当我想对齐东西时，渲染的差异会造成麻烦；当它在一个浏览器中正常时，在另一个浏览器中就不行了。

有谁知道为什么会发生这种情况，更重要的是，如何解决它？

提前感谢所有回复。

编辑：
小提琴：http: [//jsfiddle.net/94Tq9/](http://jsfiddle.net/94Tq9/)
`.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:09:31.973

我不能告诉你它为什么这样做，但值得注意的是这是一个渲染问题而不是布局问题。换句话说，段落的行高不受影响，只是 IE 认为它应该画一个边框。（我没有检查可点击区域，抱歉。）

如果，如您的图像所示，您可以添加`display:inline-block;`到锚样式，IE8 和 IE9 将呈现相同的方式，只要您有`line-height`设置。

我目前被放逐到只有 IE 的存在（长篇故事），所以我不能说这是否也适用于 Chrome。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:36:44.537

好的，所以我找到了解决这个问题的方法。这肯定不理想，但我们组织中的其他人已经使用了这种方法，所以希望它可以使用它。

解决方案是通过将此元标记添加到标题中来强制 IE9 进入 IE8“文档模式”：
`<meta http-equiv="X-UA-Compatible" content="IE=8">`

现在字体在 Chrome 和 IE 中的显示方式完全相同，我的对齐问题也消失了。

# javascript - 如何防止页面刷新

> ID：15905532
> 
> 赞同：0
> 
> 时间：2013-04-09T15:04:03.780
> 
> 标签：javascript, jquery, ajax, html

我需要在 javascript/jquery 中捕获刷新事件。我的整个页面都是由 ajax 加载的，我的意思是我页面上的所有链接和所有表单都是由 ajax 请求发送的。现在，当用户刷新我的页面时，这个刷新事件打破了我想要通过我的 ajax 请求实现的所有目标，所以我真的需要捕获用户刷新调用并停止它们，然后将此刷新事件作为 ajax 调用转发。

这甚至可能吗？而且我不想抓住 F5 按键 - 这还不够。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:05:59.143

不可能阻止所有形式的刷新。了解[HTML5 pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)，以便您的用户可以轻松地刷新和使用后退/前进按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:06:19.237

[**演示小提琴**](http://jsfiddle.net/dYNf4/1/show/)

```
 <script type="text/javascript">
        window.onbeforeunload = function() {
            return "are you sure to leave this page";
        }
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:18:51.820

不幸的是，HTML5 History API 不一致且有缺陷，此外它在所有 HTML5 浏览器中的实现方式不同 + 与 HTML4 浏览器不兼容。

幸运的是，History.js 是一个很好的工作，它为 HTML5 浏览器提供了交叉兼容性（确保所有 HTML5 浏览器都按预期工作），并且可以选择为 HTML4 浏览器提供哈希回退（包括对数据、标题、pushState 和 replaceState 功能的维护支持）。

# android - Android Ksoap2 空指针异常

> ID：15905539
> 
> 赞同：2
> 
> 时间：2013-04-09T15:04:15.147
> 
> 标签：android, nullpointerexception, android-ksoap2

这是我构建我的 Kosap 请求 XML 的方式：

```
public static SoapSerializationEnvelope constructEnvelope (String METHOD_NAME, List<NameValuePair> properties) {
    SoapObject request = new SoapObject(Constants.NAMESPACE, METHOD_NAME);
    if (null != properties && !properties.isEmpty() && properties.size() > 0)   {
        for (NameValuePair prop : properties) {
            request.addProperty(prop.getName(), prop.getValue());
        }
    }

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    if (null != properties && !properties.isEmpty() && properties.size() > 0)   {
        envelope.addMapping(Constants.NAMESPACE, METHOD_NAME, request.getClass());
    }
    return envelope;
} 
```

**堆栈跟踪 ：**

```
04-08 16:46:42.292: WARN/System.err(19812): java.lang.NullPointerException
04-08 16:46:42.292: WARN/System.err(19812): at org.ksoap2.transport.ServiceConnectionSE.getResponseProperties(ServiceConnectionSE.java:85)
04-08 16:46:42.292: WARN/System.err(19812): at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:189)
04-08 16:46:42.292: WARN/System.err(19812): at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
04-08 16:46:42.292: WARN/System.err(19812): at com.cantorfuturesexchange.CantorBinaryOptions.ui.LogInActivity$PracticeRegistration.doInBackground(LogInActivity.java:665)
04-08 16:46:42.292: WARN/System.err(19812): at com.cantorfuturesexchange.CantorBinaryOptions.ui.LogInActivity$PracticeRegistration.doInBackground(LogInActivity.java:623)
04-08 16:46:42.292: WARN/System.err(19812): at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-08 16:46:42.292: WARN/System.err(19812): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-08 16:46:42.302: WARN/System.err(19812): at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-08 16:46:42.302: WARN/System.err(19812): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-08 16:46:42.302: WARN/System.err(19812): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-08 16:46:42.302: WARN/System.err(19812): at java.lang.Thread.run(Thread.java:856)
04-08 16:46:42.342: ERROR/MP-Decision(1576): UP Ld:55 Nw:1.990000 Tw:140 rq:2.800000 seq:147.000000
04-08 16:46:42.793: ERROR/MP-Decision(1576): DOWN Ld:18 Ns:1.100000 Ts:190 rq:0.000000 seq:197.000000
04-08 16:46:43.574: WARN/PowerManagerService(718): Timer 0x7->0x3|0x0 
```

**研究工作：**

按照以下链接中的说明更改我的信封创建： [HttpTransportSE.call 方法经常返回 NullPointerException](https://stackoverflow.com/questions/14723386/httptransportse-call-method-returns-nullpointerexception-frequently)

```
public static SoapSerializationEnvelope constructEnvelope (String METHOD_NAME, List<NameValuePair> properties) {
    SoapObject request = new SoapObject(Constants.NAMESPACE, METHOD_NAME);
    if (null != properties && !properties.isEmpty() && properties.size() > 0)   {
        for (NameValuePair prop : properties) {
            PropertyInfo property = new PropertyInfo();
            {
                property.name = prop.getName();
                property.setNamespace(Constants.NAMESPACE);
                property.setValue(prop.getValue());
            }
            request.addProperty(property);
        }
    }

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    if (null != properties && !properties.isEmpty() && properties.size() > 0)   {
        envelope.addMapping(Constants.NAMESPACE, METHOD_NAME, request.getClass());
    }
    return envelope;
} 
```

我什至发现很少有其他链接，我已经尝试过使用 Ksoap 3.0.0 版而不是 3.0.0-rc4 版，但没有任何效果。我什至找到了一个链接，其中说明了有关检查基础知识的内容，但我无法理解如何解决该问题。下面是那个链接。

[Android KSOAP2 ServiceConnectionSE NullPointerException](https://stackoverflow.com/questions/12723517/android-ksoap2-serviceconnectionse-nullpointerexception)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T20:06:02.420

我已经搜索了很多关于空指针异常的东西，有些人建议使用 Http keep-Alive，有些人建议对 Ksoap2 使用不同的版本，但都没有帮助。所以我开始弄乱消息来源。我已经通过一个简单的技巧解决了这个问题。这个 hack 帮助了我，因为我只在我进行的第一个 ksoap2 调用中得到空指针异常。第一次调用后，所有 ksoap2 调用均成功。所以我不建议将此作为答案，但如果有人也面临同样的问题，他们可以下载 ksoap2 源并编辑 HttpTransportSE 的调用函数，如下所示。

```
public List call(String soapAction, SoapEnvelope envelope, List headers)
        throws IOException, XmlPullParserException {
    return call(soapAction, envelope, headers, null);
}

public List callWithRetry(String soapAction, SoapEnvelope envelope, List headers, int numRetries)
        throws IOException, XmlPullParserException {
    for (int i=0; i<=numRetries; i++) {
        try {
            return call(soapAction, envelope, headers, null);
        } catch (IOException e) {
            if (i==numRetries) {
                throw e;
            }
        } catch (XmlPullParserException e) {
            if (i==numRetries) {
                throw e;
            }
        }
    }
    return null;
} 
```

我只是添加了 numOfRetries 以防万一我需要多次尝试。我在得到空指针异常的地方调用了 callwithretry 函数。每件事都像一个魅力。注意：如果调用失败，我们会多次向服务器发出请求。如果在任何情况下您都不希望使用旧的调用功能。

# java - 具有固定行数的单元格表

> ID：15905541
> 
> 赞同：1
> 
> 时间：2013-04-09T15:04:17.057
> 
> 标签：java, gwt, celltable

我的页面上有 2 个垂直放置的单元格表（一个在另一个下方）。如何在 celltable 中设置固定的行数（独立于数据行数）？例如，当 celltable 包含 0 行时，它应该包含一些“空白”行以保持固定高度。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:19:20.113

```
fixed number of rows? 
```

[Celltable](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/CellTable.html)构造一个`default`页面大小为 15 的表格。

如果你愿意，你可以`cell table`用`pageSize`CellTable [(int pageSize)](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/CellTable.html#CellTable%28%29)构造一个，你可以。

或者您可以稍后使用[setPageSize(int pageSize)](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/AbstractHasData.html#setPageSize%28int%29)进行设置。

# iphone - 多个navigationControllers，调用当前“topViewController”中的方法

> ID：15905545
> 
> 赞同：0
> 
> 时间：2013-04-09T15:04:33.683
> 
> 标签：iphone, methods, callback, appdelegate

问题在标题中。我写了“topViewController”来表示用户当前正在查看的全屏视图。我正在从 App Delegate 中寻找一种通用的方法来执行此操作，无论应用程序使用 0、1 还是多个导航控制器。

我可以为当前的应用程序解决这个问题，但使用特殊情况的代码。有时您想在 App Delegate 中放置一个通用方法并让它触发回调。我可以使用 respondsToSelector，但它会对单独命名的回调方法进行（对我来说）丑陋的查找。

对我来说，这只是一个有趣的问题（当然，正在运行的应用程序必须知道！）并且在您的军械库中拥有一个通用的解决方案会很不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:25:43.687

您是否在 App Delegate 中引用了导航控制器，其中包含您要在其上调用方法的顶视图控制器？如果是这样，UINavigationController 有一个名为`topViewController`. 您可以将其转换为您的自定义视图控制器类：

```
CustomViewController *customController = (CustomViewController *)[aNavController topViewController];
[customController myCustomMethod]; 
```

正如我所说，如果您在 App Delegate 中引用了导航控制器，则此方法将起作用。

如果没有，另一种方法可能是使用 NSNotificationCenter。在“topViewController”中注册一个自定义通知名称，然后从您的 App Delegate 发布该通知。如果在每个视图控制器可见时注册通知，并在它消失时取消注册，则只有可见视图控制器会收到通知：

注册，在你的情况下，可能在`viewDidAppear:`

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myCustomMethod:) name:@"MyCustomNotification" object:nil]; 
```

发布来自您的 App Delegate 的通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"MyCustomNotification" object:myAccount]; 
```

不要忘记删除观察者`viewDidDisappear:`

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"MyCustomNotification" object:nil]; 
```

# javascript - AngularJS - 防止未经身份验证的用户访问给定的路由

> ID：15905547
> 
> 赞同：6
> 
> 时间：2013-04-09T15:04:33.913
> 
> 标签：javascript, security, angularjs

在我的应用程序中，当用户登录时，我`authService`设置了 internal flag `isAuthenticated`。现在，在每次路由更改时，我都会将侦听器附加到`$routeChangeStart`检查`authService.isAuthenticated()`. 如果没有，它应该重定向到登录路由。

问题是当用户刷新页面（所有`authService`设置都丢失）并再次登录时（同时在服务器上仍然有有效的会话）。这不是我想要的。

我想要做的是“阻止”路由更改，直到我获得信息（如果用户通过身份验证）（如果用户通过身份验证，则可以立即获取信息，或者如果在刷新后`authService`没有可用信息，则从服务器获取信息）。`authService`我有这样的功能`authService`

```
 // returns promise
        currentUser: function() {
            if (authService.isAuthenticated()) {
                return $q.when(authService.loggedUser);
            }
            return $http.get('/session').then(function(response) {
                authService.loggedUser = response.user;
                return $q.when(authService.loggedUser);
            });
        } 
```

并想在事件监听器中使用它。

```
 $rootScope.$on("$routeChangeStart", function (event, next, current) {
        if(isRouteRestricted(next)) {
            authService.currentUser().then(null, function() {
                $location.path('/login');
            });
        }
    }); 
```

问题是它没有按预期工作。我仍然可以在很短的时间内看到目标路线，然后用户被重定向。我相信这是由于承诺的性质，但如何摆脱这种“眨眼”效应？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:44:17.823

我会在*顶级控制器*中执行类似的操作，这将是刷新页面时调用的第一个控制器（为 js 中的拼写错误道歉，我是咖啡师）：

```
var authCheck = function (event, next, current) {
    if(isRouteRestricted(next)) {
        authService.currentUser().then(null, function() {
            $location.path('/login');
        });
    }
}

authCheck(null, populateNextSomehow).then(function () {
    // all of your controller code, probably in a separate function
});

$rootScope.$on("$routeChangeStart", authCheck); 
```

这将确保在 authCheck 完成之前无法调用控制器代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-02T12:27:17.923

要阻止用户访问路由，您必须做几件事：

首先，设置您的路线并添加一个类似“访问”的属性：allowAnonymous：true 或 false

```
// in app.js
var myApp = angular.module('myApp',['ngResource', 'ngCookies', 'ngRoute']);       
myApp.config(function ($httpProvider, $routeProvider) {
   window.routes = {
        '/Login':
           { templateUrl: '/Account/Login',
             controller: 'AccountController',
             access : {allowAnonymous : true}
           },
        '/MembersPage':
           { templateUrl: '/Home/SomePage,
             controller: SomePageController',
             access: {allowAnonymous:false}
           }
         };

        for (var path in window.routes) {
           $routeProvider.when(path, window.routes[path]);
    }
    $routeProvider.otherwise({ redirectTo: '/Login' });
}); 
```

其次，您必须识别经过身份验证的用户：

有几种方法可以做到这一点，但我更喜欢在使用“服务”的过程中使用 AngularJS 的强大功能。因此，我创建了一个“UserService”，我们在其中存储当前用户名和一个值，指示是否已通过身份验证。

```
// in UserService.js
myApp.factory('userService', function () {
var user = {
    isLogged: false,
    username: '',       
};

var reset = function() {
    user.isLogged = false;
    user.username = '';
};

return {
    user: user,
    reset : reset
  };
}); 
```

最后一件事，捕获路由变化事件并相应地对待它们：

服务到位后，是时候使用它并实现路由的检查功能了。有几种方法可以拦截路由更改事件，但我们只对那些在用户被重定向之前发生的方法感兴趣，因此我们可以检查是否经过身份验证：'$routeChangeStart'、'$locationChangeStart'。在这里，我们可以检查用户要去的路由是否允许匿名访问以及用户是否登录。如果失败，我们可以显示错误消息并将用户重定向到登录页面。

```
// in RootController.js
myApp.controller('RootController',
function ($scope, $route, $routeParams, $location, $rootScope, authenticationService,   
userService, toaster) {
 $scope.user = userService.user;
 $scope.$on('$routeChangeStart', function (e, next, current) {               
     if (next.access != undefined && !next.access.allowAnonymous && !$scope.user.isLogged) {
                $location.path("/Login");                   
            }
        });

        $scope.logout = function () {
            authenticationService.logout()
                .success(function (response) {
                    userService.reset();                       
                    toaster.pop("info", 'You are logged out.', '');
                });
        };

 $rootScope.$on("$locationChangeStart", function (event, next, current) {
  for (var i in window.routes) {
    if (next.indexOf(i) != -1) {
     if (!window.routes[i].access.allowAnonymous && !userService.user.isLogged) {
          toaster.pop("error", 'You are not logged in!', '');
             $location.path("/Login");                                                 
                    }
                }
            }
        });
    }); 
```

完整的文章在这里： http: [//net-daylight.blogspot.ro/](http://net-daylight.blogspot.ro/)

希望能帮助到你！

# installation - 猎豹安装错误

> ID：15905551
> 
> 赞同：1
> 
> 时间：2013-04-09T15:04:47.463
> 
> 标签：installation, gnuradio, cheetah, usrp

[根据这个站点](http://code.ettus.com/redmine/ettus/projects/uhd/wiki/GNURadio_Windows)，我正在尝试在我的机器上安装 gnuradio，为此我必须安装另一个程序。一切顺利，但是当我必须安装 cheetah 依赖项时，它给了我这个错误：

> c:\Python27\Scripts>easy_install cheetah
> 
> 加工猎豹
> 
> 错误：不是可识别的存档类型：猎豹”

如何正确安装 cheetah 依赖项？我正在使用 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T20:29:59.697

我不确定你上次尝试这个是什么时候，但它看起来不像 Cheetah 使用 easy_install - 至少不再是：

[http://www.cheetahtemplate.org/docs/users_guide_html_multipage/gettingStarted.install.html](http://www.cheetahtemplate.org/docs/users_guide_html_multipage/gettingStarted.install.html)

# azure - Azure 仪表板上的删除实例按钮不见了！无法删除暂存实例

> ID：15905556
> 
> 赞同：4
> 
> 时间：2013-04-09T15:05:11.330
> 
> 标签：azure

昨天我在暂存实例上上传了一个新部署，VIP 交换，一切都很好，然后当我想像往常一样删除暂存实例时......我在仪表板的 CLOUD SERVCIES > INSTANCES > STAGING 页面上看不到任何删除按钮. 今天仍然没有按钮。

如果不支付高级支持，就无法联系 MS，我只会使用一次。嗯，这对 MS 来说很聪明……我的意思是……我正在为暂存实例付费，即使它没有任何用途。

尝试使用 REST API，但我无法获得授权访问。

无论如何，我确实需要这个删除按钮回到登台实例上！任何人 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T15:18:40.870

单击“仪表板”，然后您应该会在底部应用程序栏中看到“删除”按钮。将鼠标悬停在“DELETE”上应该会弹出一个菜单来删除生产或暂存部署（或云服务本身）。

![在此处输入图像描述](https://i.stack.imgur.com/JRulz.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-23T10:24:10.560

正如您所提到的，Azure Cmdlets 似乎是目前唯一的选择（删除按钮不再显示在管理门户中）。

```
Remove-AzureDeployment [-ServiceName] <String> [-Slot] <String>
Remove-AzureDeployment -ServiceName <String> -Slot Staging 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-07T05:18:38.813

您也可以从 UI 执行此操作，方法是单击云服务刀片“概述”根目录上的“删除”按钮，这将为您提供删除整个云服务或特定部署的选项

![删除新 Azure 门户中的部署插图](https://i.stack.imgur.com/CiHQJ.png)

# android - 什么是启动模式“多个”？

> ID：15905558
> 
> 赞同：6
> 
> 时间：2013-04-09T15:05:17.093
> 
> 标签：android

在[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)他们列出了 launchMode 的可能值

```
 android:launchMode=["multiple" | "singleTop" |
                      "singleTask" | "singleInstance"] 
```

什么是“多重”以及“标准”发生了什么？除非我忽略了它，或者它没有出现在我的 Firefox 浏览器中，否则我看不到有关文档日期的任何信息，但文档中其他地方引用了高达 16 的 API 级别。同样在其他地方他们讨论启动模式的文档，他们提到了“标准”。那么“多个”只是一个错字吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:16:46.670

> 什么是“多”

它是一个名词（或者，一个形容词，取决于用法）。:-)

> “标准”发生了什么？

在文档中的那个地方，它被“多个”这个词所取代。

> 那么“多个”只是一个错字吗？

[我假设是这样](https://code.google.com/p/android/issues/detail?id=54125)。有可能他们重命名了它，并且`standard`意味着`multiple`同样的事情，尽管这也是一个文档错误，这就是我提交问题的原因（参见本段开头的链接）。

不错的收获！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T15:25:24.170

可能这只是一个错字。例如。[ActivityInfo](http://developer.android.com/reference/android/content/pm/ActivityInfo.html#LAUNCH_MULTIPLE)类中的常量名为**LAUNCH_MULTIPLE**但评论说：

> > 与 launchMode 属性中的标准相对应的常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-24T19:09:46.407

```
 // Summary:
    //     Constant corresponding to standard in the Android.Resource.Attribute.LaunchMode
    //     attribute.
    Multiple = 0,
    //
    // Summary:
    //     Constant corresponding to singleTop in the Android.Resource.Attribute.LaunchMode
    //     attribute.
    SingleTop = 1,
    //
    // Summary:
    //     Constant corresponding to singleTask in the Android.Resource.Attribute.LaunchMode
    //     attribute.
    SingleTask = 2,
    //
    // Summary:
    //     Constant corresponding to singleInstance in the Android.Resource.Attribute.LaunchMode
    //     attribute.
    SingleInstance = 3 
```

我发现这是在项目元数据中定义的，所以我认为“多个”一词与“标准”同义。

# libgdx - 在 libgdx 中移动网格的位置

> ID：15905565
> 
> 赞同：2
> 
> 时间：2013-04-09T15:05:45.520
> 
> 标签：libgdx

我有一个带有一些多边形（shapeRenderer）的世界，并且希望有一个箭头，当用户改变他的 GPS 位置时它会移动。我以为我可以用网格来做到这一点，但我没有找到将网格移动到另一个位置的任何选项。

```
Mesh mesh = new Mesh(true, 6, 0, 
        new VertexAttribute(Usage.Position, 2, "a_position")
);
mesh.setVertices(new float[] { -0.3f, -0.3f,
            0   , 0,
            0f  , 0.7f,
            0   , 0,
            0.3f, -0.3f,
            0f  , 0.7f  });
mesh.render(GL10.GL_TRIANGLE_STRIP, 0, 6); 
```

是否可以选择更改整个网格的位置？或者我可以让所有顶点创建一个具有新位置的新网格吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:05:30.170

（至少）有几种方法可以“移动”网格。Libgdx 对此没有特定的支持，它与任何 OpenGL 应用程序具有的选项相同：

1.  更改顶点
2.  使用平移矩阵
3.  将网格渲染到纹理并移动纹理

要**更改顶点**，您必须在要“移动”网格时跟踪`float[]`并对其进行变异（或重新创建）。`setVertices`您可以使用新数据再次 调用。

对于**平移矩阵**方法，请参阅[如何在 OPENGL 中旋转或平移单个对象实例？](https://stackoverflow.com/questions/2875376/how-do-i-rotate-or-translate-individual-object-instances-in-opengl) 但是，请注意，这在最近的 OpenGL API 中大部分已被弃用。（不过，我并不完全清楚他们用什么替换它：我认为你应该自己做矩阵数学，这基本上是选项#1。）

对于**渲染到纹理**选项，使用[Libgdx`FrameBuffer`对象](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/FrameBuffer.html)，渲染到该对象，然后使用[Libgdx`Sprite`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Sprite.html)移动/渲染该纹理。请注意，该`Sprite`实现只是建立在一个简单的四边形顶点之上，并且有效地[执行选项 #1](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/Sprite.java#L201)以在屏幕上移动精灵，因此只有当您的网格非常复杂并且具有大量顶点时，此选项才有意义。

嗯......现在我已经写出来了，看起来所有三个都归结为选项 1：您应该自己跟踪网格顶点中的实际位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-02T18:36:42.993

我知道这很旧，但我所做的是

```
mesh.transform(matrix);
mesh.render();
mesh.transform(matrix.inv()); 
```

# html - 如何在流体宽度表中使用椭圆而不使每列的大小相同？

> ID：15905572
> 
> 赞同：8
> 
> 时间：2013-04-09T15:06:09.020
> 
> 标签：html, css, html-table, tablelayout, ellipsis

假设我在表格中的列是`id`、`name`、`description`和`phone`。该`description`列是 1-255 个字符，但 id 最多只有 3 个字符。

我希望列的大小适当，而不是每列的大小相同。`description`当窗口太小而无法完全容纳内容时，我希望该列溢出到省略号。

`table-layout:fixed;`是进行`text-overflow: ellipsis;`工作的标准方法，但它将所有列的大小调整为相同的大小。我宁愿保持宽度`auto`而不是固定的。

你能帮我吗？

这是我的[jsFiddle](http://jsfiddle.net/RQhkk/1/)：http: [//jsfiddle.net/RQhkk/1/](http://jsfiddle.net/RQhkk/1/)

这是我正在处理的屏幕截图：

![表格列](https://i.stack.imgur.com/q2mTA.png)

请注意如何`Table 1`使所有列的大小相同？那是糟糕的。

请注意如何`Table 2`根据内容调整列的大小？那挺好的。除非内容太长：`Table 3`. 然后就不合适了。在那种情况下，我希望它溢出到省略号。

这是我的 html 表格和 css 代码：

```
<div id="t1">
<table>
    <thead>
        <tr>
            <th>id</th>
            <th>name</th>
            <th class="ellipsis">description</th>
            <th>phone</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>alpha</td>
            <td class="ellipsis">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
            <td>555-555-5555</td>
        </tr>
        <tr>
            <td>2</td>
            <td>beta</td>
            <td class="ellipsis">Sed et nulla neque.</td>
            <td>555-555-5555</td>
        </tr>
        <tr>
            <td>3</td>
            <td>gamma</td>
            <td class="ellipsis">Morbi imperdiet neque ut lorem rhoncus fermentum.</td>
            <td>555-555-5555</td>
        </tr>
    </tbody>
</table>
</div>

<style>
#t1 table {
    table-layout:fixed;
    width:100%;
}
#t1 td {
    white-space: nowrap;
}
#t1 td.ellipsis {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    word-break: break-all;
    word-wrap: break-word;
}
</style> 
```

如果我删除`table-layout: fixed;`列宽是您所期望的 - 根据内容调整大小。不幸的是，如果没有固定的布局，我就无法让省略号工作。我哪里错了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-05T22:37:11.043

我找到的解决方案是将您的单元格设置为如下样式：

```
td{
    white-space: nowrap;
}

td.description{
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 1px;    
    width: 100%;
} 
```

第一部分将强制每一列尽可能地收缩，并椭圆化任何单元格中的任何剪切文本。但是，它们不会收缩到 1px，因为您可以使用表头来提供最小宽度。它还可以防止表格内的换行。

第二部分确保所有空闲空间都被描述列占用，而不是在所有列之间均匀分布。

最后，如果您想在描述列上施加真正的最小宽度，请将最小宽度放在列标题而不是列单元格上，因为除了最大宽度之外，单元格不能收缩到比标题。

有关实现，请参见[http://jsfiddle.net/BCZTB/](http://jsfiddle.net/BCZTB/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T15:28:26.477

如果您指定一个`max-width`for ，它应该可以工作`td.ellipsis`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-06T20:17:02.467

我的解决方案是使用 jquery 获取列中文本的最大宽度并将它们分配给内容宽度，省略号列除外，它将是最大大小。

我的 jsfiddle 示例可以在这里找到[http://jsfiddle.net/qt7eQ/1/](http://jsfiddle.net/qt7eQ/1/)

```
<script type="text/javascript">
$(function() {
    //add a innerParagraph block element to all columns except for the one that has the class ellipsis
    $( "#t3 tr td:not(.ellipsis)" ).wrapInner(function() {
          return "<p class='innerParagraph'></p>";
    });

    //get the first column and assign it the width of the elements in the first column
    $( "#t3 tr th:nth-child(1)" ).width( getMaxWidthOf( "#t3 tr>td:nth-child(1) p" ) );
    $( "#t3 tr td:nth-child(1)" ).width( getMaxWidthOf( "#t3 tr>td:nth-child(1) p" ) );

    //get the second column and assign it the width of the elements in the second column
    $( "#t3 tr th:nth-child(2)" ).width( getMaxWidthOf( "#t3 tr>td:nth-child(2) p" ) );
    $( "#t3 tr td:nth-child(2)" ).width( getMaxWidthOf( "#t3 tr>td:nth-child(2) p" ) );

    //get the fourth column and assign it the width of the elements in the forth column
    $( "#t3 tr th:nth-child(4)" ).width( getMaxWidthOf( "#t3 tr>td:nth-child(4) p" ) );
    $( "#t3 tr td:nth-child(4)" ).width( getMaxWidthOf( "#t3 tr>td:nth-child(4) p" ) );
});

function getMaxWidthOf(selector){
    var maxWidth = 0;
    //go through each paragraph in the right column and find the widest value.
    $(selector).each(function() {
        if(maxWidth < $(this).width()){
            maxWidth = $(this).width();
        }
    });
    // assign max width to column
    return maxWidth;
}
</script>

<!-- add this style -->
<style type="text/css">
#t3 table {
    table-layout:fixed;
{
.innerParagraph {
    margin:0;
    display:inline-block;
}
</style> 
```

# linux - openssl 输出文件权限

> ID：15905573
> 
> 赞同：1
> 
> 时间：2013-04-09T15:06:09.923
> 
> 标签：linux, openssl, file-permissions

我目前有一个运行 openssl 的脚本，如下所示：

```
VerbosePrint `openssl req -config "$certificate_authority_openssl_file" -newkey rsa -x509 -out "$certificate_authority_certificate"` 
```

`$certificate_authority_openssl_file`配置文件 在哪里 是`$certificate_authority_certificate`自签名输出。

问题是我不希望输出的文件具有`0644`文件权限，但我似乎无法在不公开创建的情况下生成它们。我已经制作了这个文件所在的文件夹，`0700`.

我的问题是证书和私钥文件在`0700`目录中具有 0644 权限是否可以接受。如果不是，我如何强制 openssl 默认生成具有正确权限的文件，因为它似乎忽略了父目录权限。

如果您需要配置文件的模板，请询问。

谢谢保罗·内维斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:46:29.567

您可以使用 umask 命令过滤权限。通常默认的 umask 是 0022，因此您的文件是使用 0644 创建的。

尝试在 openssl 命令之前在脚本中使用 umask 0077。这应该够了吧。

有关更多详细信息，请查看 man for umask。

# c - 读取文件的第一行不起作用

> ID：15905579
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:06:20.313
> 
> 标签：c

我正在读取文件（包含由换行符分隔的数字）并计算金额。问题是在读取文件并将数量存储在数组中时，它会跳过第一个数量的第一个字母，例如：- 如果第一行有 324，那么它将读取 24，如果该行有 3，那么它将变成垃圾淡水河谷，但其余部分都很好。

**代码是**

```
#include<graphics.h>
#include<conio.h>
#include<stdio.h>
#include<stdlib.h>
static int den[9]={1000,500,100,50,20,10,5,2,1};
void main()
{
 clrscr();
 unsigned long long amt[9];
 unsigned long long temp=0,total=0;
 int c=0,i=0,j=0,gd=DETECT,gm,x=66,y=22,font=8;
 fflush(stdin);
 FILE *fp;
 fp=fopen("OPENCASH.TXT","r");
 while((c=getc(fp))!=EOF)
 {
  fscanf(fp,"%llu",&amt[i]);
  i++;
 }
 initgraph(&gd,&gm,"C:\\TC\\BGI");
 settextstyle(font,HORIZ_DIR,1);
 printf(" \t     ");
 for (i=0;j<50;j++)
 {
  printf("_");
 }
 outtextxy(x, y, "   The Closing Cash Denomination");
 printf("\n\n\n\t   ");
 for (i=0;i<50;i++)
 {
  printf("_");
 }
 font=5;
 settextstyle(font,HORIZ_DIR,1);
 x=30;
 y=87;
 outtextxy(x,y,"1000");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,7);
 printf("%llu",amt[0]);
 outtextxy(205,--y,"=");
 temp=den[0]*amt[0];
 total=total+temp;
 gotoxy(35,7);
 printf("%llu",temp);
 ++y;
 font=5;
 x=42;
 y=y+34;
 outtextxy(x,y,"500");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,9);
 printf("%llu",amt[1]);
 outtextxy(205,--y,"=");
 temp=den[1]*amt[1];
 total=total+temp;
 gotoxy(35,9);
 printf("%llu",temp);
 ++y;
 font=5;
 y=y+32;
 outtextxy(x,y,"100");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,11);
 printf("%llu",amt[2]);
 outtextxy(205,--y,"=");
 temp=den[2]*amt[2];
 total=total+temp;
 gotoxy(35,11);
 printf("%llu",temp);
 ++y;
 font=5;
 x=54;
 y=y+31;
 outtextxy(x,y,"50");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,13);
 printf("%llu",amt[3]);
 outtextxy(205,--y,"=");
 temp=den[3]*amt[3];
 total=total+temp;
 gotoxy(35,13);
 printf("%llu",temp);
 ++y;
 font=5;
 y=y+31;
 outtextxy(x,y,"20");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,15);
 printf("%llu",amt[4]);
 outtextxy(205,--y,"=");
 temp=den[4]*amt[4];
 total=total+temp;
 gotoxy(35,15);
 printf("%llu",temp);
 ++y;
 font=5;
 y=y+34;
 outtextxy(x,y,"10");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,17);
 printf("%llu",amt[5]);
 outtextxy(205,--y,"=");
 temp=den[5]*amt[5];
 total=total+temp;
 gotoxy(35,17);
 printf("%llu",temp);
 ++y;
 font=5;
 x=64;
 y=y+32;
 outtextxy(x,y,"5");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,19);
 printf("%llu",amt[6]);
 outtextxy(205,--y,"=");
 temp=den[6]*amt[6];
 total=total+temp;
 gotoxy(35,19);
 printf("%llu",temp);
 ++y;
 font=5;
 y=y+31;
 outtextxy(x,y,"2");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,21);
 printf("%llu",amt[7]);
 outtextxy(205,--y,"=");
 temp=den[7]*amt[7];
 total=total+temp;
 gotoxy(35,21);
 printf("%llu",temp);
 ++y;
 font=5;
 y=y+31;
 outtextxy(x,y,"1");
 font=6;
 settextstyle(font,HORIZ_DIR,1);
 outtextxy(104,y,"X");
 gotoxy(20,23);
 printf("%llu",amt[8]);
 outtextxy(205,--y,"=");
 temp=den[8]*amt[8];
 total=total+temp;
 gotoxy(35,23);
 printf("%llu",temp);
 y=y+9;
 outtextxy(264,y,"___________");
 y=y+27;
 outtextxy(150,y,"Total Cash");
 gotoxy(35,25);
 printf("%llu",total);
 getch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:11:50.607

while 循环是错误的，

```
while((c=getc(fp))!=EOF)
 {
  fscanf(fp,"%llu",&amt[i]);
  i++;
 } 
```

`getc()`消耗一个字符，

测试如下，

```
 while(fscanf(fp,"%llu",&amt[i]) > 0)
 {
    i++;
 } 
```

您也可以使用该功能`ungetc()`取消 的效果`getc()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:39:14.557

这段代码有很多严重的问题。

**明显的错误：**

*   正如其他人已经指出的那样，while 循环。用检查结果替换它`fscanf`。不要`feof`用于此。
*   fflush 不能用于标准输入或任何其他输入流。这会调用未定义的行为，您的程序可能会崩溃或以意想不到的方式运行。
*   您的程序只能在安装了编译器的系统上运行。您需要将 BGI 库对象文件添加到您的项目中。
*   您不检查文件是否已成功打开。
*   您不调用`fclose`，因此您的程序会造成资源泄漏并不必要地保持文件打开。

**非标准乱码：**

*   `unsigned long long`在 C99 标准之前，C 语言不支持，你的垃圾编译器不支持。无论`long long`您的编译器意味着什么，它都可能是不可移植的。同样，`%ll`格式说明符也没有为您的编译器明确定义。
*   由于这是用于托管系统 (DOS)，因此您必须将 main 声明为，`int main (void)`否则您的代码将无法在符合标准的 C 编译器上编译。
*   由于 main 始终返回 0，因此您不能`return 0`在托管系统上省略该语句。这个规则在 C99 中被放宽了，但是由于你的编译器不符合 C99 标准（或者实际上任何 C 标准），你必须总是`return 0`在最后。

**其他问题：**

*   不要到处使用“幻数”，使用常量。要么`const int`或#defines。
*   你的缩进是晦涩难懂的。2 或 4 个空格是惯例。
*   您必须使用函数和模块化编程。这只是一个难以理解的大混乱。
*   你永远不会调用 closegraph()。这是否会造成资源泄漏，我不确定。
*   在同一个屏幕上混合 printf 和 outtextxy 看起来像废话。但是话又说回来，这是针对 DOS 的，所以可能需要废话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:11:35.137

函数使用第一个字符`getc`。

您可以按如下方式更改阅读循环：

```
while(!feof(fp)) {
    fscanf(fp,"%llu",&amt[i]);
    i++;
} 
```

# knockout.js - 在模板完全渲染后做一些事情

> ID：15905583
> 
> 赞同：0
> 
> 时间：2013-04-09T15:06:24.570
> 
> 标签：knockout.js, knockout-2.0

我有一个外部模板，它调用 JSON 对象来填写 div 的详细信息。[在将所有项目添加到 DOM 之后（希望使用Isotope](http://isotope.metafizzy.co)），我正在努力让一些 jQuery 触发。

**理想情况下，我想获得一些关于如何让 Isotope 工作的支持 - 显示项目和单击链接以进行排序和过滤，以及一些一般的 Knockout 帮助。我是 KO 的新手，我什至不确定我在做什么是最佳实践。**

***这是相关的代码（我不确定让 JSFiddle 与外部模板一起运行 - 如果您有任何提示，我准备提供一个示例！）：***

如果我将“afterAdd”更改为“afterRender”，Isotope 及其过滤机制将起作用——但它只渲染一个项目——而不是整个对象。

**HTML**

```
<div data-bind="template: { name: 'itemList', foreach: sampleItems, afterAdd: renderIsotope }"></div> 
```

**外部模板**

```
<div data-bind='attr: { "class": "item " + type }'>
<div class="item-details">
    <span class="type" data-bind="text: type"></span>
    <span class="size" data-bind="text: size"></span>
    <span class="name" data-bind="text: name"></span>
    <!-- ko if: type === 'folder' -->
    <a href="#" class="changeFolderColor">Change Folder Color</a>
    <span class="folderColor" style="display: none" data-bind="text: backgroundColor"></span>
    <!-- /ko -->
</div>

<!-- ko if: type !== 'folder' -->
<img data-bind="attr: { src: preview }" />
<!-- /ko --> 
```

**模型**

```
var sampleItems = [    
{
    type: "image",
    size: "2482",
    name: "Robert",
    preview: "/images/placeholders/178x178-1.jpg",
    backgroundColor: "",
    id: "1"
}, .... 
```

**视图模型**

```
var itemsModel = function (items) {
    var self = this;
    self.items = ko.observableArray(ko.utils.arrayMap(items, function (item) {
        return { type: item.type, size: item.size, name: item.name, preview: item.preview, backgroundColor: item.backgroundColor, id: item.id };
    }));
} 
```

**尝试了“afterAdd”功能**

```
var renderIsotope = function (elements) { 
// initialize isotope
$(".content .right").isotope({
    itemSelector: ".item",
    getSortData: {
        type: function ($elem) {
            return $elem.find(".type").text();
        },
        size: function ($elem) {
            return parseFloat($elem.find(".size").text());
        },
        name: function ($elem) {
            return $elem.find(".name").text();
        }
    }
});

// filter items when filter link is clicked
$('.item-filter a').click(function () {
    var selector = $(this).attr('data-filter');
    $(".content .right").isotope({ filter: selector });
    return false;
});

// sort items when sort link is clicked
$('.item-sort a').click(function () {
    // get href attribute, minus the '#'
    var sortName = $(this).attr('href').slice(1);
    $(".content .right").isotope({ sortBy: sortName });
    return false;
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:10:50.500

Kncokout 为此目的公开了 afterrender 绑定：

```
<div data-bind='template: { name: "personTemplate",
                        data: myData,
                        afterRender: myPostProcessingLogic }'> </div> 
```

[更多在这里](http://knockoutjs.com/documentation/template-binding.html#note_4_using_afterrender_afteradd_and_beforeremove)

抱歉没有用同位素来帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:18:10.657

这是我正在使用的自定义绑定。这需要你的 viewModel 有一个 afterInit 函数。这在调用 applyBindings 或 Knockout 绑定模板时触发。视图模型需要一个名为 afterInit 的函数：使用显示模块模式：

```
myViewModel = function(){
  var afterInitDone = false,
      afterInit = function(){
          // this fires from the custom afterInit binding below
          // set afterInitDone, so if it fires again, we ignore it in the custom binding
          afterInitDone = true;
      };

  return {
    AfterInit: afterInit
  };
};
ko.bindingHandlers.afterInit = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext)      
    {
        //Possible place for the draggables when creating the Editor tool
        //$(element).draggable({ containment: "#content", scroll: false });
        'use strict';
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        'use strict';
        // don't run again if it has already been called
        if (viewModel.afterInitDone !== undefined) {
           if (!viewModel.afterInitDone) {
               viewModel.AfterInit();
           }
        } else {
            viewModel.AfterInit();
        }
    }
}; 
```

然后我只是在 html 中绑定到它： `<div data-bind="afterInit: true">`

见注 4： http: [//knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

# jsp - 如何在 Struts2 中取消转义 HTML

> ID：15905585
> 
> 赞同：0
> 
> 时间：2013-04-09T15:06:25.087
> 
> 标签：jsp, struts2, jstl, html-escape

我在数据库中保存了一些基本的 HTML。此 HTML 是通过`ValueStack`在`Action`类中重新显示为`<s:property value="htmlcodeString"/>`JSP 文件。

但是，HTML 代码不会被解释，而是转义并按原样显示（例如，显示的是 <b>BOLD</b> 而不是**BOLD**）。

我正在使用 Struts2。我在互联网上找到了很多使用建议`<c:out value="${text}" escapeXml="false" />`。但我不知道它是什么。如何在 Struts2 中使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:16:07.797

[该`<s:property>`标签](http://struts.apache.org/docs/property.html)有一个默认`escapeHtml`属性`true`。

^(（希望有明显的原因。）)

`<c:out>`是 JSTL 的一部分，您可以像在任何其他 Web 应用程序中一样在 S2 中使用它，但需要注意的是，由于 S2 请求包装器，您可以使用 JSP EL 访问值堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T14:12:05.387

我通过谷歌遇到了这个问题，发现添加`escapeHtml="false"`属性导致 JSP 停止显示。取而代之的是简单`escape="false`的。

# facebook-like - Facebook 评论不经常出现

> ID：15905591
> 
> 赞同：0
> 
> 时间：2013-04-09T15:06:38.143
> 
> 标签：facebook-like, blogger, facebook-comments

我在我的博客上同时使用了点赞按钮和评论框；[词汇扩展.blogspot.com](http://vocabularioextenso.blogspot.com)

但是点赞按钮有时会显示正确的点赞数，而有时则显示为零。此外，我在帖子中收到的评论不会定期出现，有时会在黄色框中显示一条警告，说明该帖子的 url 无法访问。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:17:51.043

这是由博主应用的国家/地区指定重定向引起的问题。

这是一篇解释此问题的永久解决方案的文章。

[http://aslamise.blogspot.in/2013/04/facebook-comments-and-like-count-problem-in-blog-issue-solved.html](http://aslamise.blogspot.in/2013/04/facebook-comments-and-like-count-problem-in-blog-issue-solved.html)

# windows - jdeveloper 创建集成 weblogic 域挂起

> ID：15905593
> 
> 赞同：1
> 
> 时间：2013-04-09T15:06:43.190
> 
> 标签：windows, weblogic, jdeveloper

我在我的 Windows 机器上安装 jdeveloper 并选择默认设置。我启动 weblogic 服务器以获取设置密码窗口。我设置了密码并将域留空，因为这在不同的 Windows 机器上工作。我在控制台中看到的最后一件事是以下消息，除此之外没有任何反应：

```
[Waiting for the domain to finish building...]
[08:18:10 AM] Creating Integrated Weblogic domain... 
```

扩展日志中有一个扩展错误`Error:failed to create stream factory class oracle.ide.net.IdeWrapperURLStreamHandlerFactory`，但我已经在另一台机器上遇到了这个错误。

我在`C:\Users\Administrator\AppData\Roaming\JDeveloper\system11.1.1.6.38.62.29`文件夹中查找了任何命名的文件`*.log`，但什么也没有。有谁知道可能导致此问题的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:40:33.113

从您的 system11.1.1.6.xxx 文件夹中删除 DefaultDomain 文件夹以获取内部 wls 的未完成安装。然后尝试再次创建内部 wls，这次设置域。看看这是否创建了 wls。有趣的是，您没有看到任何日志文件。如果我没记错的话是写的。路径在您看到另一条消息的日志消息窗口中打印出来。

确保防火墙已关闭或适当设置，因为 Windows 防火墙有时会在没有预期弹出通知的情况下阻塞。

# security - 同域 JSONP 安全性

> ID：15905594
> 
> 赞同：0
> 
> 时间：2013-04-09T15:06:46.540
> 
> 标签：security, https, jsonp, man-in-the-middle

**以下场景在同一个域内**（不是跨域）对中间人攻击的脆弱性如何？

不安全页面上的表单将包含敏感数据（在查询字符串中）的 JSONP 请求提交到安全页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:37:07.727

假设“不安全”是指通过纯 HTTP 提供的页面，没有 HTTPS 中涉及的加密和服务器验证：

来自 HTTP 页面的通过 HTTPS 的实际请求不易受到中间人的攻击。但是，HTTP 页面本身*很*容易受到攻击：MitM 攻击可能会更改原始页面中的内容，从而泄露通过 HTTPS 发送的数据，或者以其他许多方式干扰页面的操作，使其不可信。

如果用户可以确定第一个 HTTP 页面已完全完整地传输，则可以保证数据安全。但是，现实世界的用户无法通过审核该 HTTP 页面上的所有内容来确定这一点。

因此，您应该认为从 HTTP 到 HTTPS 的提交并不比从 HTTP 到 HTTP 的提交更安全。

位于相同或不同域上的 URL 无关紧要。

# c# - C# 字典 ContainsKey/TryGetValue 不起作用

> ID：15905595
> 
> 赞同：3
> 
> 时间：2013-04-09T15:06:49.357
> 
> 标签：c#, dictionary, long-integer, containskey, trygetvalue

我已经环顾了一段时间，看到很多关于修改`GetHashCode()`和玩的参考资料`ContainsKey()`和`TryGetValue()`- 但所有这些问题和示例都与一些模糊的用户特定键有关。

我有一个基本的`Dictionary<long, object>`. 当尝试使用`ContainsKey()`or`TryGetValue()`时，它并不总是会受到打击（当它应该受到打击时）并继续尝试填充丢失的条目（如果是这种情况，它在技术上应该如此）。

你猜对了：它会抱怨现有的密钥，因为它确实存在。

那么为什么它在匹配基本`long`密钥时遇到问题，你如何让它表现？

编辑：代码。我已经尝试了几件事。以最基本的形式：

```
public void Add(long id)
    {
        if (AreaDataDict.ContainsKey(id)) return;

        AreaData ad = new AreaData(id);
        ad.Load();
        AreaDataDict.Add(id, ad);
    } 
```

还：

```
public void Add(long id)
{
    AreaData areaData;
    if (AreaDataDict.TryGetValue(id, out areaData)) return;

    AreaData ad = new AreaData(id);
    ad.Load();
    AreaDataDict.Add(id, ad);
} 
```

编辑2：没有发生关键变化。除了在未找到值时添加之外，仅从中读取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T15:32:16.707

使用 a`ConcurrentDictionary`是答案，幸好受到 user454076 的启发。

# spring-batch - 使用 ftp:outbound 通道通过 spring 集成重试发送文件

> ID：15905596
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:06:51.520
> 
> 标签：spring-batch, spring-integration, spring-retry

我有一个包含两个步骤的工作春季批处理作业，我想在 ftp 发送步骤中添加一个重试逻辑。

*   第一步从数据库中读取并输出 xml 文件
*   第二步使用spring集成将此文件发送到ftp主机

第二步配置如下

```
<step id="sendFileByFtp" next="moveResource">
     <tasklet ref="ftpJobTasklet" />
</step>
<bean id="ftpJobTasklet" class="com...FtpOutboundTasklet" scope="step">
    <property name="resource" ref="ypportal-siparis-outputFile"></property>
    <property name="ftpChannel" ref="ftpOutputChannel"></property>      
</bean> 
```

并且 ftpOutputChannel 使用 DefaultFtpSessionFactory 配置了 ftpClientFactory

```
<int:channel id="ftpOutputChannel"></int:channel>

<int-ftp:outbound-channel-adapter session-factory="ftpClientFactory" id="ftpOutbound" channel="ftpOutputChannel" remote-directory="inbox" auto-create-directory="true" temporary-remote-directory="tmp" >
</int-ftp:outbound-channel-adapter> 
```

我想在第二步中添加重试逻辑，这将在与远程 ftp 主机的连接失败时重试/恢复。

使用 spring 集成 2.2.2 和 spring batch 2.1.19

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:46:24.863

您可以使用`RequestHandlerRetryAdvice`，如此处所述... [http://static.springsource.org/spring-integration/reference/html/messaging-endpoints-chapter.html#message-handler-advice-chain](http://static.springsource.org/spring-integration/reference/html/messaging-endpoints-chapter.html#message-handler-advice-chain)

这里有一个示例... [https://github.com/SpringSource/spring-integration-samples/tree/master/intermediate/retry-and-more](https://github.com/SpringSource/spring-integration-samples/tree/master/intermediate/retry-and-more)

它显示了重试的各种配置（指数退避等）。

# c# - 这段代码是否像我想要的那样同步？

> ID：15905606
> 
> 赞同：1
> 
> 时间：2013-04-09T15:07:20.083
> 
> 标签：c#, task-parallel-library, .net-4.5, async-await, c#-5.0

我有这个代码

```
public async Task<IEnumerable<WebResult>> SearchAsynch(string query)
{
  if (query == null)
  {
     throw new ArgumentNullException("query cannot be null");
  }

  DataServiceQuery<WebResult> webQuery =
 _bingContainer.Web(query, null, null, null, null, null, null, null);

  return await Task.Factory.FromAsync
                 (webQuery.BeginExecute(null, null)
                 , asyncResult => webQuery.EndExecute(asyncResult)
                 );
} 
```

我这样称呼它

```
public static void Main()
{
   Search().Wait();
}

private static async Task Search()
{
  IWebSearcher webSearcher = new WebSearcher();
  for (var i = 0; i < 100; i++)
  {
      IEnumerable<WebResult> task = await webSearcher.SearchAsynch(i.ToString());

      var enumerator = task.GetEnumerator();
      enumerator.MoveNext();
      Console.WriteLine(enumerator.Current.Title);
   }
} 
```

我遇到的问题是这个。我希望这 100 个调用中`SearchAsynch`的每一个都完全相互独立，以便第 10 个调用可以在第 9 个调用之前返回并打印其结果。目前似乎没有发生这种情况。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:28:36.677

在任务完成时进行处理的最简单方法是定义一个单独的方法来进行处理，如下所示：

```
public static async Task SearchAndPrintAsync(IWebSearcher webSearcher, string query)
{
  var result = await webSearcher.SearchAsync(query);
  using (var enumerator = result.GetEnumerator())
  {
    if (enumerator.MoveNext())
      Console.WriteLine(enumerator.Current.Title);
    else
      Console.WriteLine("<none>");
  }
} 
```

然后你可以`async`像这样进行并发操作：

```
private static async Task MainAsync()
{
    IWebSearcher webSearcher = new WebSearcher();

    // Start all SearchAndPrint operations concurrently.
    Task[] tasks = Enumerable.Range(0, 100)
        .Select(i => SearchAndPrintAsync(webSearcher, i))
        .ToArray();

    // Wait for them all to complete.
    await Task.WhenAll(tasks);

    Console.WriteLine("Done");
}

public static void Main()
{
    MainAsync().Wait();
} 
```

# python - xlsx 文件中的图形被 openpyxl 覆盖

> ID：15905610
> 
> 赞同：1
> 
> 时间：2013-04-09T15:07:27.320
> 
> 标签：python, openpyxl

我们需要使用 python 脚本更新 xlsx 表，该脚本会进行一些计算并更新一个工作表。我选择 openpyxl 因为它支持写入/更新 xlsx 文件。在 Excel 工作表中也包含一些图表，但是当我更新 excel 工作表时，图表不能分别用于 excel 和数据更新。我认为我们在使用 openpyxl 更新图形时遇到了一些问题。谁能给我一些输入来解决这个问题

或者换句话说，在 Excel 表中我有 10 个工作表。在工作表 1 中，它包含图表。我已经更新了 5 号工作表。工作表已成功更新。但是我已经松开了工作表 1 的图表。

```
#!/usr/bin/env python
from openpyxl import load_workbook
import openpyxl 
print "pylx"
ddr_sam45_flop =  "Flip_Flop.xlsx"
flop_workbook     = load_workbook(ddr_sam45_flop)
raw_flop_workbook = flop_workbook.get_sheet_by_name(name ='RAW')
raw_flop_workbook.cell(row = 1 , column = 1).value = 889999
flop_workbook.save(ddr_sam45_flop)
print "End" 
```

（请认为我是 openpyxl 的新手）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:16:02.067

Openpyxl 目前不支持图形或图表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-03T05:26:35.200

打开之前存在于文档中的任何图形将在保存后被删除。解决这个问题的唯一方法（我知道）是在代码中创建图表。

[这](http://packages.python.org/openpyxl/charts.html)是有关如何在 openpyxl 中创建图表的文档

该示例有点损坏，请与此进行比较。

```
 values = Reference(ws, (1, 1), (1, 95))
    series = Series(values, title="Sample" )
    chart = LineChart()
    chart.append(series)
    ws.add_chart(chart) 
```

# javascript - 将数据发布到 JS

> ID：15905612
> 
> 赞同：0
> 
> 时间：2013-04-09T15:07:31.043
> 
> 标签：javascript, html, forms

我不知道如何问我的问题...

我的表格有问题。当我选择“Qebele”时，它会调用`getline()`Line.js。我需要将任何值发布到 line.js 并在 line.js 中获取此数据以使用它。我怎样才能做到这一点？

```
<form action="">
      <li><select id="rayon" onchange="getline();">
          <option value="">Select Rayon</option>
          <option value="rayon">Qebele</option>
      </select></li>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:13:10.030

您可以使用以下代码轻松获取`#rayon`inside的值：`Line.js`

```
function getline()
{
    var theLine = document.getElementById('rayon').value;
    alert(theLine);
} 
```

这是一个[jsFiddle](http://jsfiddle.net/vbjxe/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:16:38.120

您可以尝试将所选选项值的引用传递给函数 getline，然后从那里继续。

例如，要将所选选项值的引用传递给 getline...

```
<form action="">
            <li><select id="rayon" onchange="getline(this.options[selectedIndex].value)">
                <option value="">Select Rayon</option>
                <option value="rayon">Qebele</option>
            </select></li>
</form> 
```

然后，在 Line.js 中，getline() 会根据所选内容执行某些操作。

```
function getline(selectedValue){
    if (selectedValue == "something"){
             ... do something
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:31:58.087

我不确定你在问什么。查看您的代码，您不应使用内联函数处理程序，因为`'this'`关键字将引用窗口对象。如果你使用

```
document.getElementById('rayon').addeventlistener('change',getline); 
```

在 line.js 中，`'this'`关键字将引用 id 为 'rayon' 的 select 元素。

所以

函数getLine(){

警报（this.value）}

当您将选择更改为 Qebel 时，将为您提供 rayon 的值。

显然，您将实现自己的逻辑以满足您的需求。不要使用内联函数调用非常重要，因为`'this'`关键字具有不同的含义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:52:52.557

您可以在 onchange 事件中传递 this.value。

`<form action=""> <li><select id="rayon" onchange="getline(this.value);"> <option value="">Select Rayon</option> <option value="rayon">Qebele</option> </select></li> </form>`

```
function getline(selectedValue){
  if(selectedValue == 'rayon'){
    //add your logic here
  }
} 
```

# excel - 修改 Excel“查找”公式以查找多个可能的最终值

> ID：15905615
> 
> 赞同：0
> 
> 时间：2013-04-09T15:07:37.870
> 
> 标签：excel, excel-formula, trim

我有一个对我很有效的公式。它正在获取电子邮件的正文并分割成字段。这是“成本应该是”单元格的公式。=MID(TRIM(CLEAN(B463)),FIND("成本应该是:",TRIM(CLEAN(B463)))+15,FIND("零售:",TRIM(CLEAN(B463)))-FIND("成本应为：",TRIM(CLEAN(B463)))-15)

我遇到的一个问题是，有时人们会跳过一个他们没有价值的领域。在这种情况下，找不到“零售”。下一个字段将开始“销售”。

有没有办法可以编辑此公式以使最终值显示“或”语句？意思不是说 find (retail..)，而是说 find (retail, or sales, or etc..)。所以它只会找到下一个？

我对其中有空格的结果也有疑问。有什么办法可以摆脱空间，而不必事后操纵数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:21:04.233

试试这个版本的“零售：”或“销售：”...用额外的 TRIM 去掉任何前导或尾随空格

`=TRIM(REPLACE(LEFT(TRIM(CLEAN(B3)),FIND(IF(COUNTIF(B3,"*Retail:*"),"Retail:","Sales:"),TRIM(CLEAN(B3)))-1),1,FIND("Cost Should Be:",TRIM(CLEAN(B3)))+14,""))`

# c# - xml 自动弄乱我的富文本数据

> ID：15905619
> 
> 赞同：0
> 
> 时间：2013-04-09T15:07:54.777
> 
> 标签：c#, asp.net, sql-server, sql-server-2008

我有一个富文本编辑器，可以将我的标记保存到数据库中。我有一个使用 XML Auto 带回该数据的存储过程。问题，您可能已经猜到了，XML Auto 对我的标记进行编码，因此富文本不会显示在我的网页显示上。仅显示标记文字。

我可以在 XML Auto 中做些什么来防止某些字段被编码？欢迎其他想法。

**XML**

```
 <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

**XSL**

```
<?xml version="1.0" encoding="utf-8"?>
<catalog>
  <cd>
    <album>Thriller</album>
    <artist>Michael Jackson</artist>
    <notes>&lt;strong&gt;test&lt;/strong&gt;</notes>
  </cd>
  <cd>
    <album>Album2</album>
    <artist>Artist2</artist>
    <notes>Can be plain text as well.</notes>
  </cd>
</catalog> 
```

**c# XSLT**

```
 string xmlFile = @"XMLFile.xml"; //<view>html column</view>
        string xslFile = @"XSLTFile.xslt"; //views.xsl file
        string xmlFilePath = Request.PhysicalApplicationPath + xmlFile;
        string xsltPath = Request.PhysicalApplicationPath + xslFile;

        XPathDocument xPathDoc = new XPathDocument(xmlFilePath);
        XslCompiledTransform transform = new XslCompiledTransform();
        transform.Load(xsltPath);
        transform.Transform(xPathDoc, null, Response.Output); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:27:43.167

*带有未压缩* [保留字符](http://msdn.microsoft.com/en-us/library/ms145315%28v=sql.90%29.aspx)的“XML”是非法的。所以不可能有这样的 XML，`<root>a&b</root>`因为`&`char 是保留的。解决方案是在使用前对字符串进行解码：

```
DECLARE @x XML;
SET @x = (SELECT 'a&b' AS Col FOR XML RAW)

SELECT @x AS StringEncoded
SELECT @x.value('(/row/@Col)[1]', 'NVARCHAR(50)') AS StringDecoded 
```

结果：

```
StringEncoded
---------------------
<row Col="a&amp;b" />

StringDecoded
---------------------
a&b 
```

第二个例子：

```
DECLARE @x2 XML;
SET @x2 = (SELECT '<strong>test</strong>' AS Col FOR XML RAW)

SELECT @x2 AS StringEncoded2
SELECT @x2.value('(/row/@Col)[1]', 'NVARCHAR(50)') AS StringDecoded2 
```

结果：

```
StringEncoded2
-----------------------------------------------
<row Col="&lt;strong&gt;test&lt;/strong&gt;" />

(1 row(s) affected)

StringDecoded2
-----------------------------------------------
<strong>test</strong> 
```

# ruby-on-rails - 为什么 spec_helper 有这个 ENV["RAILS_ENV"] ||= "test"？

> ID：15905621
> 
> 赞同：5
> 
> 时间：2013-04-09T15:08:04.743
> 
> 标签：ruby-on-rails, ruby, testing

是否有人想在测试以外的其他环境中使用 spec_helper，或者为什么要这样配置？允许自定义测试环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:21:47.093

环境可以有任何可能的名称。您可以使用多个测试环境，甚至可以为您的测试环境命名，而不仅仅是`test`. 因为命名测试环境的约定`test`并不意味着您不能选择不同的名称。

# javascript - 使用正则表达式操作字符串

> ID：15905631
> 
> 赞同：3
> 
> 时间：2013-04-09T15:08:13.230
> 
> 标签：javascript, regex, string

我有一个字符串，可以 `C1 AND C2 OR C3 (~!@#$%) AND C4 OR C5` 说我的输入是`C3` 然后我想使用正则表达式删除`C3`和下一个运算符之间的垃圾/数据`AND|OR`。

所以对于上面的字符串，我想输出为`C1 AND C2 OR C3 AND C4 OR C5`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:20:02.780

```
function purgeJunk(variable, expression) {
    return expression.replace(purgeJunk.regexp, function(match, digits, operator) {
        if (digits != variable) return match;
        return "C" + digits + " " + operator;
    });
};

function purgeAllJunk(expression) {
    return expression.replace(purgeJunk.regexp, function(match, digits, operator) {
        return "C" + digits + " " + operator;
    });
};

purgeJunk.regexp = /C(\d+) .*?(AND|OR)/g;

// delete junk after C2
purgeJunk(2, "C1 AND C2 OR C3 (~!@#$%) AND C4 OR C5") 
    == "C1 AND C2 OR C3 (~!@#$%) AND C4 OR C5"

// delete junk after C3
purgeJunk(3, "C1 AND C2 OR C3 (~!@#$%) AND C4 OR C5") 
    == "C1 AND C2 OR C3 AND C4 OR C5"

// delete all junk
purgeAllJunk("C1 # AND C2 OR C3 ~!@#$% ()()()() ### AND C4 more garbage OR C5")
    == "C1 AND C2 OR C3 AND C4 OR C5" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:19:14.217

尝试这个：

```
var str = 'C1 AND C2 OR C3 (~!@#$%) AND C4 OR C5'
var input = 'C3'
console.log(str.replace(new RegExp("(" + input + " ).*?(AND|OR)"), "$1$2")) 
```

# json - 在咖啡脚本中传递类似 JSON 的参数

> ID：15905632
> 
> 赞同：1
> 
> 时间：2013-04-09T15:08:16.557
> 
> 标签：json, coffeescript

我正在尝试使用通过咖啡脚本编写的 github API 做一些事情。我对它很陌生，我在这个块上遇到了麻烦。

```
getRepos: (user)->
    this.github.repos.getFromUser(
        user: user,
        type: "all",
        sort: "updated",
        direction: "desc"
        (err,res)-> console.log(JSON.stringify(res))
    ) 
```

目前，它正在编译为

```
 getRepos: function(user) {
  return this.github.repos.getFromUser({
   user: user
   }, {
   type: "all",
   sort: "updated",
   direction: "desc"
    }, function(err, res) {
   return console.log(JSON.stringify(res));
 }); 
```

而我不想要用户：用户之后的额外括号，那就是它应该看起来像这样：

```
getRepos: function(user) {
  return this.github.repos.getFromUser({
    user: user,
    type: "all",
    sort: "updated",
    direction: "desc"
  }, function(err, res) {
  return console.log(JSON.stringify(res));
}); 
```

我对咖啡脚本缺少什么？

编辑：这是完整的代码

```
GitHubApi = require("node-github");

gitLoader = 
github: new GitHubApi({
    version: "3.0.0",
    timeout: 5000
}); 
authenticate: ->
    this.github.authenticate({
        type: "basic",
        username: username,
        password: password
    })
getRepos: (user)->
    this.github.repos.getFromUser(
        user: user,
        type: "all",
        sort: "updated",
        direction: "desc"
        (err,res)-> console.log(JSON.stringify(res))
    )
getFollowers: ->
    this.github.user.getFollowingFromUser(
        user: "example",
        (err, res)->console.log(JSON.stringify(res));
    ) 
```

编辑2：认为它一定是某种间距问题。当我复制粘贴从编辑器复制的副本时，它编译正确。= /

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:54:29.973

我确信在“用户：”之前有一个额外的空格（可能是一个选项卡）

如果您确保只有空格，它将按预期编译。

```
getRepos: (user) ->
    this.github.repos.getFromUser(
        user: user,
        type: "all",
        sort: "updated",
        direction: "desc"
        (err,res) -> console.log(JSON.stringify(res))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:19:04.213

这看起来像一个空白问题。

你也可以省略一些其他的东西，所以你的代码看起来像：

```
getRepos: (user) ->
    @github.repos.getFromUser
        user: user
        type: "all"
        sort: "updated"
        direction: "desc"
        (err, res) -> console.log JSON.stringify res 
```

# facebook - 应用程序块突然增加和阻止 facebook 共享应用程序

> ID：15905634
> 
> 赞同：1
> 
> 时间：2013-04-09T15:08:19.513
> 
> 标签：facebook, facebook-graph-api

我们无法在我们的游戏应用程序中发布任何内容（应用程序 ID：205934316099103，显示名称：Cafeland，链接：[http](http://apps.facebook.com/cafeland) ://apps.facebook.com/cafeland ）。在我们检查之后，我们得到这个错误 "top.location.href="/help/contact.php?show_form=post_problem";" 来自图形 api。我们查看了见解，发现应用程序屏蔽率在 4 月 1 日突然上升得太高，然后在 4 月 8 日至 9 日期间我们的所有共享都被屏蔽了。我们没有进行任何可以执行恶意操作或增加共享的更改，因此我们不了解问题所在。任何想法？

# extjs - 如何将 extjs 对象添加到 html？

> ID：15905640
> 
> 赞同：0
> 
> 时间：2013-04-09T15:08:39.703
> 
> 标签：extjs

我有一个简单的例子：

```
 function RenderTime(v) {
    var test = new Ext.Img({
        src: "lib/Image/Paddle.png",
        listeners: {
            el: {
                click: function() {
                    Ext.Msg.alert("Message");
                }
            }
        }
    })
     return '<table width="100%"><tr><td width="90%">' + test + '</td></tr></table>'

 } 
```

和列：

```
 {
                dataIndex: 'title',
                width: 500,
                sortable : false,
                renderer: RenderTitle
        }, 
```

如何更正将 extjs 对象添加到 html ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:25:31.167

您将希望为您的组件使用“renderTo”属性，而不是尝试手动将其连接到您的 html 中。

参见：[ExtJS Ext.Img.renderTo](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Img-cfg-renderTo)

# php - Wordpress 插件 template_redirect 抛出 404

> ID：15905643
> 
> 赞同：3
> 
> 时间：2013-04-09T15:08:55.500
> 
> 标签：php, wordpress, plugins, http-status-code-404

我正在尝试使用 template_redirect 通过 Wordpress 中的 URL 加载插件的特定文件。该文件正确显示，但是发送的标头是 404，而不是 200。

插件中的代码是：

```
add_filter('query_vars','plugin_add_jb');
function plugin_add_jb($vars) {
    $vars[] = 'jb_ajax';
    return $vars;
}

add_action('template_redirect', 'plugin_jb_check');
function plugin_jb_check() {
    if(intval(get_query_var('jb_ajax')) == '1') {
        $jb_action = $_GET['action'];
        if($jb_action == 'refer') {
            include('./wp-content/plugins/JobBounties/ajax_refer.php');
        }
        elseif ($jb_action == 'refer_post') {
            include('./wp-content/plugins/JobBounties/ajax_refer_post.php');
        }
        exit;
    }
} 
```

有人知道为什么会抛出 404 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T15:58:11.077

Wordpress 可能无法识别此插件或数据并抛出 404 状态。

要对抗 404 状态，只需对其进行测试，删除标志，然后使用包含发送标头 200 状态。

```
function wp15905643_include($template) {
    global $wp_query;
    if ($wp_query->is_404) {
        $wp_query->is_404 = false;
    }
    header("HTTP/1.1 200 OK");
    include($template);

} 
```

然后`plugin_jb_check`像这样在你的函数中使用它，如果有帮助的话。

`wp15905643_include('./wp-content/plugins/JobBounties/ajax_refer.php');`

来源[**在这里**](http://www.mihaivalentin.com/wordpress-tutorial-load-the-template-you-want-with-template_redirect/)。

# javascript - 如何使用正则表达式和 str.replace 格式化

> ID：15905648
> 
> 赞同：0
> 
> 时间：2013-04-09T15:09:22.300
> 
> 标签：javascript, html, regex

我正在使用这个正则表达式

```
var str = "The requirements of this chapter apply to the following: (1)New buildings or portions thereof used as health care occupancies (see 1.4.1) (2)Additions made to, or used as, a health care occupancy (see 4.6.6 and 18.1.1.4) Exception: The requirement of 18.1.1.1.1 shall not apply to additions classified as occupancies other than health care that are separated from the health care occupancy in accordance with 18.1.2.1(2) and conform to the requirements for the specific occupancy in accordance with Chapters 12 through 17 and Chapters 20 through 42, as appropriate. (3)Alterations, modernizations, or renovations of existing health care occupancies (see 4.6.7 and 18.1.1.4) (4)Existing buildings or portions thereof upon change of occupancy to a health care occupancy (see 4.6.11) Exception*: Facilities where the authority having jurisdiction has determined equivalent safety has been provided in accordance with Section 1.5.";
str = str.replace(/(\(\d+\)|exception\s*\:*)/gi, "<br /><br />$1&nbsp"); 
```

我在哪里得到这样的输出

> 18.1.1.1.1 本章要求适用于：
> 
> (1) 用作医疗保健场所的新建筑物或其部分（见 1.4.1）
> 
> (2) 增加或用作医疗保健用房（见 4.6.6 和 18.1.1.4）
> 
> 例外：18.1.1.1.1 的要求不适用于按照 18.1.2.1 与医疗保健占用分开的医疗保健以外的占用
> 
> (2) 并酌情符合第 12 章至第 17 章和第 20 章至第 42 章的特定占用要求。
> 
> (3) 现有医疗保健场所的改建、现代化或翻新（见 4.6.7 和 18.1.1.4）
> 
> (4) 现有建筑物或其中的部分更改为医疗保健占用（见 4.6.11）

但我想要的输出是

> 18.1.1.1.1 本章要求适用于：
> 
> (1) 用作医疗保健场所的新建筑物或其部分（见 1.4.1）
> 
> (2) 增加或用作医疗保健场所（见 4.6.6 和 18.1.1.4）(2) 并符合第 12 章至第 17 章和第 20 章至第 42 章对特定场所的要求，作为适当的。
> 
> 例外：18.1.1.1.1 的要求不适用于按照 18.1.2.1 与医疗保健占用分开的医疗保健以外的占用
> 
> (3) 现有医疗保健场所的改建、现代化或翻新（见 4.6.7 和 18.1.1.4）
> 
> (4) 现有建筑物或其中的部分更改为医疗保健占用（见 4.6.11）

在这里，它再次打破了`(2)`这个值的行“（见 4.6.6 和 18.1.1.4）***（2）*** ”。我怎样才能得到这种格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:18:12.810

在您的正则表达式中，尝试只拆分`\(\d)\`前面有空格的 s ：

```
str = str.replace(/(\s\(\d+\)|exception\s*\:*)/gi, "<br /><br />$1&nbsp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:19:19.937

在括号中的数字之前寻找不是结束括号的东西。您必须在异常部分伪造它。我决定在“例外”一词之前找到一个非字母顺序。这确保了它是一个完整的词，至少在前面。（不过，公平地说，我想不出一个以“表达”结尾的英文单词。）

请注意 JavaScript 如何通过正则表达式中括号的顺序而不是括号的顺序对匹配的字符串进行编号，因为匹配器会查找匹配的内容。所以不匹配的部分（因为或）仍然计入 $1、$2、$3 和 $4。

```
str = str.replace(/([^)])(\(\d+\))|([^a-zA-Z])(exception\s*\:*)/gi, "$1$3<br /><br />$2$4&nbsp"); 
```

您可以在这里测试 Javascript 正则表达式：[http ://www.regexplanet.com/advanced/javascript/index.html](http://www.regexplanet.com/advanced/javascript/index.html)

（这就是我为使该表达式起作用所做的工作。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:19:49.483

你可以合并`(?:\(\d+\))*`到你的正则表达式中，除非我错过了你所追求的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:22:08.863

使用

```
str = str.replace(/(\(\d+\)|exception\s*\:*)(\S)/gi, "<br /><br />$1&nbsp;$2"); 
```

它似乎工作：见[http://jsbin.com/otuteh/1/edit](http://jsbin.com/otuteh/1/edit)

# backbone.js - 在没有明显视图的情况下检测主干模型上的更改

> ID：15905649
> 
> 赞同：0
> 
> 时间：2013-04-09T15:09:25.267
> 
> 标签：backbone.js, requirejs, local-storage, marionette, backbone-model

我有一个在多个视图中使用的模型。我想检测该模型上的更改事件（将其保存到 localStorage 以保持持久性），但我希望更改独立于每个视图。

有没有办法在模型本身或控制器中绑定模型更改事件（我也在使用 Marionette 和 Require）？这是我的模型：

```
define([
'backbone',
'common'
],
function(Backbone, Common) {

//Define the App Namespace before anything else
var APP = Common.app_namespace || {};

APP.Models.UserModel = Backbone.Model.extend({

  //Set up default values 
  defaults: {
    "value" : "default"
    }

});

}); 
```

是否有捷径可寻？我正在考虑使用[backbone.localStorage](https://github.com/jeromegn/Backbone.localStorage)但是（如果我错了，请纠正我）我认为有问题的模型需要在一个集合中，但由于我不需要一个集合，我希望这样做这个手动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:23:31.707

Backbone.Model 扩展了 Backbone.Events，所以是的，它可以监听和触发事件：

```
APP.Models.UserModel = Backbone.Model.extend({
  //Set up default values 
  defaults: {
    "value" : "default"
  },
  initialize: function() {
    this.listenTo(this, 'change', this.myCallback);
  }
}); 
```

[等等...](http://backbonejs.org/#Events)

# pydev - 编辑器找不到 PyQt？/ 导入问题

> ID：15905650
> 
> 赞同：2
> 
> 时间：2013-04-09T15:09:26.707
> 
> 标签：pydev

我在 Kubuntu 系统上使用 Eclipse 3.7.2 和 Python 2.3.0。我之前使用的是 Python 2.x，现在正尝试在 Python 3.2 中启动一个新项目。我在 Python 2.x 中没有遇到任何问题，并且在安装 PyQt 的 python3 包时也没有遇到任何问题。

当我在 Python 3.x 中编写 PyQt 应用程序时，代码完成不起作用，并且编辑器中显示错误消息。当使用“from PyQt4.QtCore import *”导入时，错误消息出现在我使用 PyQt 名称的地方（例如“app = QApplication(sys.argv)”，但是导入语句本身没有错误消息。通过导入时“import PyQt4.QtCore”在导入语句中会出现错误消息，但在使用导入的名称时不会出现（例如 app = PyQt.QtCore.QApplication(sys.argv)”。代码完成仍然无法正常工作。

代码执行没有错误，显示了小部件。“PYQT_VERSION_STR”、“platform.system()”等导致 Python 版本 3.2.3、Qt 版本 4.8.1、PyQt 版本 4.9.1、系统 Linux。PyDev 的包资源管理器显示一个“python3”树节点（= PYTHONPATH？）及其子节点，例如 System Libs -> python3/dist-packages -> PyQt 4 -> QtCore.cpython-32mu.so

我在 PyDev 的配置中多次删除并添加了解释器和/或以各种组合单击“应用”，但没有成功。之后我开始了一个新的测试项目，问题仍然存在。我无法通过文件系统搜索找到“interpreterInfo.py”。示例代码： http: [//pastebin.com/niDLRy9i](http://pastebin.com/niDLRy9i)

任何帮助表示赞赏:-)

# javascript - IE10 setInterval 内存泄漏的解决方法

> ID：15905652
> 
> 赞同：11
> 
> 时间：2013-04-09T15:09:29.830
> 
> 标签：javascript, internet-explorer, memory-leaks

在测试我们的 Javascript 库期间，我认为我们在`setInterval`.

一个简单的测试用例表明，如果一个变量在作为参数传递的函数的闭包中被捕获，以供以后执行，它似乎永远不会有资格进行垃圾收集，即浏览器似乎仍然持有对该函数的引用或至少是闭包变量。

我们的测试用例`setInterval`只执行一次函数，然后清除间隔计时器，即一段时间后不再运行代码，也不再可访问变量（据我所知，此代码中没有引入全局变量，除了运行方法in `onload`)，但是该过程占用了半 GB 的内存（取决于迭代次数）。

有趣的是，如果我们改用该方法，则不会发生这种情况`setTimeout`（而且在 IE9 和当前版本的 Chrome、FF 中似乎不存在该问题）*。*

[这个 fiddle](http://jsfiddle.net/jbpwp/)可以看出问题。

在 Windows 8 上的全新 IE10 实例中运行它并打开任务管理器以查看内存使用情况。它将快速增长到 350 兆字节，并且在脚本执行后将保持在那里。

这是有问题的代码片段的重要部分：

```
// the function that when called multiple times will cause the leak in IE10
var eatMemory = function() {
    var a = null; // the captured closure variable
    var intervalId = setInterval(function() {
       a = createBigArray(); // call a method that allocates a lot of memory
       clearInterval(intervalId); // stop the interval timer
    }, 100);
} 
```

*（我知道修复这段特定*的代码很容易。但这不是重点——这只是我们想出的重现问题的最小的一段代码。真正的代码实际上是`this`在闭包中捕获的，那个对象是从不收集垃圾。）

我们的代码中是否存在错误，或者是否有一种方法可以使用`setInterval`闭包变量保存对大对象的引用而不会触发内存泄漏并且不会恢复到“递归”`setTimeout`调用？

（我也在[MSDN 上发布了这个问题](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/c44421e8-26ff-4d8e-900e-dcae639f6999)）

**更新：** Windows 7 上的 IE10 中也存在此问题，但如果您切换到 IE9 标准模式，则不存在此问题。我将此提交给 MS Connect，并将报告进度。

**更新：** Microsoft[接受了该问题](https://connect.microsoft.com/IE/feedback/details/783448/major-memory-leak-in-ie10s-javascript-setinterval-implementation)并报告它已在 IE11（预览版）中修复 - 我自己还没有确认这一点，但（有人吗？）

**更新：** IE 11 已正式发布，我无法再用我的系统（Win 8.1 Pro 64bit）在该版本上重现该问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T07:22:42.480

为了完整起见，我在这里添加了一个可能的解决方法：

正如我已经写过的（和评论者建议的），这可以通过回退到`setTimeout`. 这不是微不足道的，因为需要进行一些 id 簿记。这是我建议的修复方法，您可以[从这个小提琴中测试和分叉](http://jsfiddle.net/yGuy/mDCB6/)：

```
var registerSetIntervalFix = function(){
    var _setTimeout = window.setTimeout;
    var _clearTimeout = window.clearTimeout;
    window.setInterval = function(fn, interval){
        var recurse = function(){
            var newId = _setTimeout(recurse, interval);
            window.setInterval.mapping[returnValue] = newId;
            fn();
        }
        var id = _setTimeout(recurse, interval);
        var returnValue = id;
        while (window.setInterval.mapping[returnValue]){
            returnValue++;
        }
        window.setInterval.mapping[returnValue] = id;
        return returnValue;
    }
    window.setInterval.mapping = {};
    window.clearInterval = function(id){
        var realId = window.setInterval.mapping[id];
        _clearTimeout(realId);
        delete window.setInterval.mapping[id];
    }
} 
```

这个想法是递归调用`setTimeout`来模拟重复`setInterval`调用。这个实现有一点开销，因为它必须为不断变化`id`的 s 执行簿记，所以除非需要，否则我不建议应用此修复程序。

不幸的是，我无法提出“特征”检测算法（更像是“错误”检测算法），所以我想你必须恢复到良好的旧浏览器检测。此外，我的实现无法将字符串作为第一个参数处理，并且不会将其他参数传递给内部函数。最后，两次调用此方法是不安全的，因此使用它需要您自担风险（并随时改进它）！

（注意：对于我们的库，我们将从现在开始停止使用`setInterval`，而是重写代码中依赖它`setTimeout`直接使用的少数部分。）

# erlang - 将所有部门的 ChicagoBoss 设置为 ERL_LIBS

> ID：15905653
> 
> 赞同：0
> 
> 时间：2013-04-09T15:09:34.037
> 
> 标签：erlang, environment-variables, chicagoboss

我尝试设置 ChicagoBoss 及其对`ERL_LIBS`环境变量的所有依赖项。我得到了 ChicagoBoss，用 编译它`./rebar get-deps && ./rebar compile`，现在我在目录中有 ChicagoBoss，它在`/home/user/ChicagoBoss`目录中有依赖项`/home/user/ChicagoBoss/deps`。我想将它添加到`ERL_LIBS`. 我将以下行放入我的`.bashrc`文件中：

`export ERL_LIBS=/home/user/ChicagoBoss/:/home/user/*/deps/*/`

但是当我从 ChicagoBoss 依赖项中尝试一些东西时，`ranch`应用程序例如：

`application:start(ranch).`

我收到错误：

```
{error,{"no such file or directory","ranch.app"}} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:19:52.620

`ERL_LIBS`环境变量没有通配符的概念。当您以 之`erl`类的参数开头时`-pa deps/*/ebin`，您的*shell*正在扩展通配符。您需要手动将每个库路径（*应用程序*的路径，而不是其`ebin`目录！）添加到`ERL_LIBS`.

为了简化这个过程，我们可以使用 Python：

```
import glob
print ':'.join(glob.glob('/home/user/*/deps/*/')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T16:08:44.967

我在一个简单的应用程序中遇到了相同的错误。事实证明，主应用程序目录中缺少一个“dep”目录：牧场安装在那里。我不知道为什么在我的情况下它丢失了，但我通过从另一个工作的牧场应用程序复制该目录来解决它。

编辑：有趣的是，我收到一条消息编译说：“依赖不可用：牧场-。*（{git，”git：//github.com/extend/ranch.git“，”master“}）”必须有是关于缺少“dep”顶级目录的警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T11:27:58.893

**ERL_LIBS**可以简单地指向所有依赖项项目所在的父目录。如果您的项目遵循 Erlang 项目目录约定（ yourproject/src、yourproject/ebin、yourproject/include ），那么 Erlang 将动态关联 ebin 并包含从这些项目到您的上下文。

例子

```
/place/Project1

/place/Project1/ebin/...
/place/Project1/include/...
/place/Project1/deps/...
/place/Project1/deps/DependencyProject2...
/place/Project1/deps/DependencyProject3... 
```

如上所示，**/place/Project1/deps**是其他子项目（依赖项）的容器。在这种情况下，如果您可以将应用程序运行为

erl env ERL_LIBS "/place:/place/Project1/deps"。这将包括运行时上下文中的所有相关项目（Project1、DependencyProject2 和 DependencyProject3）。

# node.js - 如何在node.js中的compoundjs应用程序中模拟会话对象

> ID：15905658
> 
> 赞同：1
> 
> 时间：2013-04-09T15:09:51.520
> 
> 标签：node.js, mocha.js, nodeunit, compoundjs, supertest

我在 node.js 中有一个复合 js 应用程序。对于某些操作，我有一个过滤器检查“session.user”值的存在，该值仅在成功验证后才会填充。但是，每当为此类操作编写单元测试用例时， session.user 的值就会变得未定义。我使用 supertest、sinon 模块对操作进行获取、发布请求，但由于“session.user”值的未定义值，它不会进行身份验证并被重定向到正确的操作。请帮助我，因为我遇到了同样的问题。

请指导我究竟需要模拟什么，以便我可以验证 session.user 值。提前致谢，

等待肯定的答案，

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T22:28:27.157

我在复合配置事件上使用了模拟 passport.initialize、测试助手和侦听器的组合。

这提供了两件事：

1.  `beforeEach`DRY -跨控制器测试重用代码。
2.  不显眼的测试 - 模拟 passport.initialize，所以我不必根据测试修改配置。

在 test/init.js 我添加了模拟 passport.initialize** 的方法：

** 在以下位置找到它：

[http://hackerpreneurialism.com/post/48344246498/node-js-testing-mocking-authenticated-passport-js](http://hackerpreneurialism.com/post/48344246498/node-js-testing-mocking-authenticated-passport-js)

```
// Fake user login with passport.
app.mockPassportInitialize = function () {
    var passport = require('passport');
    passport.initialize = function () {
        return function (req, res, next) {
            passport = this;
            passport._key = 'passport';
            passport._userProperty = 'user';
            passport.serializeUser = function(user, done) {
                return done(null, user.id);
            };
            passport.deserializeUser = function(user, done) {
                return done(null, user);
            };
            req._passport = {
                instance: passport
            };
            req._passport.session = {
                user: new app.models.User({ id: 1, name: 'Joe Rogan' })
            };

            return next();
        };
    };
}; 
```

然后我添加了一个在每个控制器中调用的 helpers.js 文件：

```
module.exports = {
    prepApp: function (done) {
        var app = getApp();
        compound = app.compound;
        compound.on('configure', function () { app.mockPassportInitialize(); });
        compound.on('ready', function () { done(); });
        return app;
    }
}; 
```

这将在`beforeEach`每个控制器中调用：

```
describe('UserController', function () {
    beforeEach(function (done) {
        app = require('../helpers.js').prepApp(done);
    });
    [...]
}); 
```

# svg - IE10 裁剪 SVG 而不是调整大小

> ID：15905660
> 
> 赞同：12
> 
> 时间：2013-04-09T15:09:54.520
> 
> 标签：svg, internet-explorer-10, inkscape

我解决了 IE10 仅在使用 css 样式时才会调整图像大小的问题，现在 IE10 正在裁剪 SVG 而不是调整其大小。没有其他浏览器有这个问题。

我已经尝试了所有不同的组合，只声明高度或宽度，同时将另一个维度设置为自动而不设置它或同时设置两者。我也试过`preserveAspectRatio="none"`img 标签。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-09T15:13:46.743

事实证明，IE 是唯一需要`viewBox`设置才能缩放 svg 的浏览器。我使用了一个名为 inkscape 的免费程序来创建我的 svg，它没有设置视图框。使用文本编辑器打开 svg 并将其添加到`<svg...`声明中：

```
viewBox="0 0 64 64" 
```

而不是 64，输入右下角的 x 和 y 应该是原始 svg 的大小。不确定天气应该归咎于 IE10 还是inkscape ......

**更新：**您可以更新到 inkscape 0.91，并且会自动添加 viewbox 属性。

# seo - 让 Google 站点地图生成器工作：“[错误] 尝试访问您生成的站点地图时……我们未能读取它。”

> ID：15905665
> 
> 赞同：1
> 
> 时间：2013-04-09T15:10:07.673
> 
> 标签：seo, xml-sitemap

我正在尝试让[Google Sitemap Generator](http://sitemap-generators.googlecode.com/svn/trunk/docs/en/sitemap-generator.html)正常工作。

这是我的（Zend Framework 2）**项目结构**：

```
/
/...
/public/...
/public/sitemap.xml
/public/urllist.txt
/...
/temp/googlesitemapgen/
/temp/googlesitemapgen/config.xml
/temp/googlesitemapgen/sitemap_gen.py
/... 
```

**配置文件**

```
<?xml version="1.0" encoding="UTF-8" ?>
<site
    base_url="http://foo.bar.loc"
    store_into="/var/www/bar/foo/public/sitemap.xml"
    verbose="3"
    suppress_search_engine_notify="0"
>
    <urllist path="/var/www/bar/foo/public/urllist.txt" encoding="UTF-8" />
</site> 
```

**urllist.txt**

```
http://foo.bar.loc 
```

当我调用生成脚本时

```
user@machine:/var/www/bar/foo/temp/googlesitemapgen# python sitemap_gen.py --config=config.xmlthon sitemap_gen.py --config=config.xml 
```

发生错误：

```
user@machine:/var/www/bar/foo/temp/googlesitemapgen# python sitemap_gen.py --config=config.xml 
sitemap_gen.py:65: DeprecationWarning: the md5 module is deprecated; use hashlib instead
  import md5
Reading configuration file: config.xml
BaseURL is set to: http://foo.bar.loc/
Input: From URLLIST "/var/www/bar/foo/public/urllist.txt"
Opened URLLIST file: /var/www/bar/foo/public/urllist.txt
[WARNING] Discarded URL for not starting with the base_url: http://foo.bar.loc
[WARNING] No URLs were recorded, writing an empty sitemap.
Sorting and normalizing collected URLs.
Writing Sitemap file "/var/www/bar/foo/public/sitemap.xml" with 0 URLs
Notifying search engines.
[ERROR] When attempting to access our generated Sitemap at the following URL:
    http://foo.bar.loc/sitemap.xml
  we failed to read it.  Please verify the store_into path you specified in
  your configuration file is web-accessable.  Consult the FAQ for more
  information.
[WARNING] Proceeding to notify with an unverifyable URL.
Notifying: www.google.com
Notification URL: http://www.google.com/webmasters/sitemaps/ping?sitemap=http%3A%2F%2Ffoo.bar.loc%2Fsitemap.xml
Number of errors: 1
Number of warnings: 3 
```

此错误在文档的“[故障排除](http://sitemap-generators.googlecode.com/svn/trunk/docs/en/sitemap-generator.html#troubleshoot)”部分中进行了描述。但我已经检查了`base_url`and `store_into`-- 两者都设置正确。

为什么现在出现这个错误？我做错了什么吗？什么？如何让工具工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:03:05.633

您需要一个包含实际网址的 urllist.txt。站点生成器不会为您抓取/抓取您的站点。它可以检查 apache 日志或引用其他生成的站点地图，但它本身不会爬网。

请参阅我的答案：

[https://webmasters.stackexchange.com/questions/47085/is-there-an-xml-sitemap-generator-with-command-line-interface-for-nginx-on-linux/47105#47105](https://webmasters.stackexchange.com/questions/47085/is-there-an-xml-sitemap-generator-with-command-line-interface-for-nginx-on-linux/47105#47105)

我有一个命令字符串，可以通过抓取给定站点生成 url 列表。

# ruby - 在 Ruby 中，如何反向 dns 查找 zeroconf/bonjour 计算机的主机名？

> ID：15905667
> 
> 赞同：5
> 
> 时间：2013-04-09T15:10:13.083
> 
> 标签：ruby, mdns

两者都不

```
Resolv.getname( "fred.local" ) 
Resolv.getaddress( "10.0.1.18" ) 
```

也不

```
Socket.gethostbyaddr([10,0,1,18].pack("CCCC")) 
```

似乎可以识别本地子网上使用 zeroconf/bonjour 的主机。我需要在给定 IP 地址的本地子网上找到 zeroconf 计算机的主机名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:43:35.270

这些函数使用常规 TCP 和 DNS，我假设您需要使用 bonjour API，例如[http://dnssd.rubyforge.org/](http://dnssd.rubyforge.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T00:43:28.210

看起来 DGM 帖子中的链接停止工作，我没有代表发表评论:)

[https://github.com/tenderlove/dnssd](https://github.com/tenderlove/dnssd)

# ruby-on-rails-3.2 - 如何使用集合从另一个控制器渲染部分？

> ID：15905671
> 
> 赞同：0
> 
> 时间：2013-04-09T15:10:22.633
> 
> 标签：ruby-on-rails-3.2

我有一个具有在线用户操作的仪表板控制器。在视图中，在仪表板下，我有一个部分 _online_user.html.haml。在其中，我试图显示在线登录用户。这里的代码：

```
 app/controllers/dashboard_controller 
  class DashboardController < ApplicationController
      def online_user
        @online_users = Profile.all(...)
     end
    end

app/views/dashboard/_online_user.html.haml

%li
  = link_to profile_path(online_user) do
    = online_user.name
    %i.icon-picture
    %i.icon-th-large
    %i.icon-camera
    %i.icon-facetime-video
    %span.help-block
      = online_user.try(:age) 
      - 
      = online_user.state.try(:name)
      ,
      = online_user.country.try(:name) 
```

有了这一切，最后一件事就是在另一个视图中渲染它。正确的？像这样：

```
= render partial: "dashboard/online_user", collection: @online_users 
```

但是，当我这样做时，我得到一个空白页。什么都没有被渲染。任何人的想法都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:07:52.893

您是否检查过 @online_users 是否包含任何内容，并且不为空？此外，这可能会有所帮助：

```
= render partial: "dashboard/online_user", collection: @online_users, as: :online_user 
```

# sql - 使用 Partition By 从 Join SQL 返回 MAX 记录

> ID：15905673
> 
> 赞同：1
> 
> 时间：2013-04-09T15:10:30.970
> 
> 标签：sql, sql-server-2005, max, partitioning

我正在尝试使用和学习 Partition By 来返回一对多关系的最大步数。基本上，我有一个 companyID，它在公司表中是唯一的。公司有特定的步骤，在 StepCompany 表中可以有很多。companID 存在于 stepCompany 表中该公司可能存在的每个步骤。这些步骤有 StepOrder，我需要使用它来始终返回这些步骤中的 MAX。但是我需要一个查询来返回公司和 stepCompany 的信息，这取决于哪一步基本上是该公司队列中的最后一步。我发现我不理解的来源，因为我是 Partition By 的新手，或者他们给 Partition By 一个别名，并且在外部选择的末尾，他们确实喜欢 alias = 1 例如。
这是没有分区或任何内容的查询返回。

```
CompanyIDticketID|||| companyCompanyID||| stepCompanyCompanyID|||| stepCompanyStepOrder
----------------- ---------------- -------------------- --------------------
136211     ||||       10B7E005     |||    10B7E005      |||       1

136211     ||||       10B7E005     |||    10B7E005      |||       2

136211     ||||       10B7E005     |||    10B7E005      |||       3

155585     ||||       3A2078C5     |||    3A2078C5      |||       1

155585     ||||      3A2078C5      |||   3A2078C5       |||       2

193256     ||||       95AC74FB     |||    95AC74FB      |||       1

193256     ||||       95AC74FB     |||    95AC74FB      |||       2

210425     ||||       0BAD0261     |||    0BAD0261      |||       1

210425     ||||       0BAD0261     |||    0BAD0261      |||       2 
```

抱歉格式错误，不知道如何在这里整齐地创建表格。

所以这些是 2 个正在连接的表。companyCompanyID = stepCompanyCompanyID 用于加入他们。所以对于 companyID 136211 我需要 stepCompanyStepOrder 3 返回，显然 stepCompany 表中的数据。对于 companyIDticketID 155585 我需要 stepCompanyStepOrder 2 等。我宁愿不提供我的 SQL，因为它不漂亮:)

我感谢大家的帮助！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:15:01.740

这是部分查询，

```
WITH records
AS
(
    SELECT  ....,
            ROW_NUMBER() OVER (PARTITION BY CompanyIDticketID
                               ORDER BY stepCompanyStepOrder DESC) rn
    FROM    ....
)
SELECT  *
FROM    records
WHERE   rn = 1 
```

您只需在`WITH`子句中插入连接查询并添加额外的列来分区记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:15:48.997

没有加入，因为你没有提供它，但这应该没关系：

```
WITH cte 
     AS (SELECT rn = Row_number() 
                     OVER( 
                       partition BY companycompanyid 
                       ORDER BY stepcompanysteporder DESC), 
                companyidticketid, 
                companycompanyid, 
                stepcompanycompanyid, 
                stepcompanysteporder 
         FROM   dbo.tablename) 
SELECT companyidticketid, 
       companycompanyid, 
       stepcompanycompanyid], 
       stepcompanysteporder 
FROM   cte 
WHERE  rn = 1; 
```

[**演示**](http://www.sqlfiddle.com/#!3/8f248/1/0)

结果：

```
COMPANYIDTICKETID   COMPANYCOMPANYID    STEPCOMPANYCOMPANYID    STEPCOMPANYSTEPORDER
210425          0BAD0261            0BAD0261                    2
136211          10B7E005            10B7E005                    3
155585          3A2078C5            3A2078C5                    2
193256          95AC74FB            95AC74FB                    2 
```

# delphi - 使用快速报告从一个数据库行跳转到另一行

> ID：15905674
> 
> 赞同：0
> 
> 时间：2013-04-09T15:10:33.833
> 
> 标签：delphi, fastreport

我正在使用 Delphi 16 和 Fast Reports 4.1。Embarcadero Edidion。

粗略地说，我的问题是：有没有办法强制 frxReport（连接到数据库）在报告生成期间跳过一些表条目？

我的意思可以解释如下：

假设我们有一个来自数据库的大表，其中包含 1000 个条目，并假设我们要生成一个填充了该表中数据的报告，每个条目一页。自然，1000 页的报告处理起来有点多，所以我们需要一种方法来告诉 Fast Report 在准备报告时要使用表格的哪些条目。

要仅选择表中所有条目的子集，我使用 DBGrid，在其中设置 DBGrid.Options.dgMultiselect := True 并通过鼠标单击选择所需的行。然后我将选定的行复制到一个单独的 TClientDataSet(named TempDataSet) 组件中，之后我将当前报告的数据集设置为新创建的 TempDataSet ('frxDataSet1.DataSet := TempDataSet') 并启动准备报告。

这似乎没问题，但在我正在编程的应用程序的上下文中，是不可接受的。所以回到最初的问题：有没有办法控制在“frxReport1.PrepareReport();”时必须访问“frxDBDataset1.DataSet”中的哪些条目？叫做 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:35:56.720

我的回答有点离题，参考你的最后评论，可以使用 Adodatasets 作为 Memorytables

```
var
 I:Integer;
begin
  for I := 0 to AdoDataset1.FieldCount - 1 do
    begin
      Adodataset2.FieldDefs.Add(AdoDataset1.Fields[i].FieldName
                               ,AdoDataset1.Fields[i].Datatype
                               ,AdoDataset1.Fields[i].Size);
    end;
      Adodataset2.CreateDataSet;
                                // just as example     
  While not AdoDataset1.Eof do  // here would be you code for inserting selected Rows
    begin
     AdoDataset2.Append;
    for I := 0 to AdoDataset1.FieldCount - 1 do
      begin
        Adodataset2.Fields[i].Assign(Adodataset1.Fields[i]);
      end;
    AdoDataset2.Post;
    AdoDataset1.Next;
    end;

end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:34:56.370

您可以使用以下任何一种方法：

## 筛选

您的原始数据集（如果数据集能够过滤）。您通常编写一个*la SQL*过滤器，如下所示：

```
MyDataSet.Filter := 'MYCOLUMN in (''a'', ''b'', ''c'')';
MyDataSet.Filtered := True; 
```

或者编写一个`OnFilterRecord`事件来排除/包含您要在报告中显示的记录。

```
procedure TMyForm.MyDataSetFilterRecord(DataSet: TDataSet; var Accept: Boolean);
begin
  Accept := (DataSet.FieldByName('MYFIELD').AsInteger mod 7 = 0) or 
            (DataSet.FieldByName('MYOTHERFIELD').AsInteger in MySetOfValues);
end; 
```

## TFrxDBDataSet 事件

您还可以`TfrxDBDataSet`借助通常用于将报表绑定到数据的组件的事件。编写一个`OnOpen`, `OnFirst`, `OnNext`,`OnCheckEOF`事件处理程序，以防止报告包含所有记录，方法是仅在您感兴趣的记录上“停止”。

例如，如果你想打印每一行，你可以这样写：

```
procedure TMyForm.fdsEstPagosNext(Sender: TObject);
begin
  MyDataSet.Next; 
  MyDataSet.Next; //advance not one, but two records.
end; 
```

# ios - 获取我用 UIImagePickerController 拍摄的照片

> ID：15905675
> 
> 赞同：0
> 
> 时间：2013-04-09T15:10:36.867
> 
> 标签：ios, uiimagepickercontroller, image

我正在尝试制作我的第一个 iOS 应用程序，但在获取刚刚拍摄的照片时遇到了一些问题。

这是我的方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //add imagePicker
    _imgPicker = [[UIImagePickerController alloc] init];
    _imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    _imgPicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
    _imgPicker.cameraDevice = UIImagePickerControllerCameraDeviceFront;
    _imgPicker.showsCameraControls = NO;
    _imgPicker.navigationBarHidden = YES;
    _imgPicker.toolbarHidden = YES;
    _imgPicker.wantsFullScreenLayout = NO;

    //add overlay on imagePicker
    _imageSilhouette.image = [UIImage imageNamed:_pose.image];
    _imgPicker.cameraOverlayView = _imageSilhouette;
    [_vImagePreview addSubview:_imgPicker.view];
} 
```

当我点击一个按钮时，我有一个计时器，10秒后，我拍照：

```
- (void)decreaseTimerCount
{
    _lblTimer.text = [NSString stringWithFormat:@"%d", --_timerCount];
    if(_timerCount==0)
    {
        [self takePicture];
    }
}
-(void) takePicture{
    [_timer invalidate];
    [_imgPicker takePicture];
} 
```

正如我在 Apple 文档中看到的，我添加了委托：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage * img = [info objectForKey:UIImagePickerControllerOriginalImage];
    _imageSilhouette.image = img;
    _imgPicker.cameraOverlayView = _imageSilhouette;
    //[picker dismissModalViewControllerAnimated:YES];
} 
```

但我真的不明白我是否必须在某处声明 imagePickerController ..

我也不明白 img 是否包含我刚拍的照片？

我能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:21:49.550

## 您没有设置选择器的代表

在您设置图像选择器的代码中，您需要添加以下内容：

```
_imgPicker.delegate = self; 
```

此外，在`.h`您制作选择器的文件的文件中，您需要在`<>`'s之间添加代码

```
@interface SomeClass:NSObject <UIImagePickerControllerDelegate> 
```

除了在 .h 文件中添加协议之外，您还可以选择在 .m 文件中添加（更好的）选项。这样做可以避免告诉世界您的班级使用了图像选择器：

```
@interface SomeClass () <UIImagePickerControllerDelegate>
@end 
```

`@implementation`在相应行之前添加它。

# wcf - WCF 客户端端点的动态、应用程序范围的替换

> ID：15905679
> 
> 赞同：0
> 
> 时间：2013-04-09T15:10:46.743
> 
> 标签：wcf, silverlight

我们正在开发一个 Silverlight 应用程序，我们在其中使用调用 WCF Web 服务的第三方组件。不幸的是，这个组件不允许我们指定端点配置名称；相反，它使用硬编码的端点名称，例如`TheEndpoint`. 这是有问题的，因为我们需要能够根据 C# 代码检测到的某些条件在不同的端点配置之间进行选择。我假设 WCF 维护在 App.config 中定义的那些端点的某种存储库，因为它们可以在您创建新的客户端通道时使用 - 是否可以将新端点插入此存储库？我希望能够做这样的事情：

```
bool useSSL = ...;
var mode = useSSL ? BasicHttpSecurityMode.Transport : BasicHttpSecurityMode.None;
var binding = new BasicHttpBinding(mode) {Name = "TheEndpoint"};
var address = (useSSL ? "https" : "http") + "://example.com/service.svc";
MagicalWcfEndpointRepository.AddClientEndpoint(
    typeof(ITheInterface), binding, address); 
```

每当我为此进行谷歌搜索时，我都会找到很多关于如何动态创建端点的提示，但它们都假设您自己创建了客户端通道。这不是这里的情况；该组件有自己的客户端代理，它直接实例化，我们无法注入另一个通道或通道工厂。另外，我知道可以使用配置转换来更改 App.config 的内容，但这会导致应用程序的每个单独安装都绑定到一个特定的端点。我们希望每个应用程序能够在启动时在不同的端点之间进行选择。这可能吗？

# xml - 为我的 xml 获取正确的 xpath

> ID：15905682
> 
> 赞同：0
> 
> 时间：2013-04-09T15:10:51.777
> 
> 标签：xml, xpath, webdriver

我在获取正确的 xpath 时遇到问题，我有这个 xml：

```
<span
 id="X6_5"
 class="FormatTableElementReadonly"
 onblur=" applyToSameControl(this); "
 onclick="handleOnClick(this, event);" 
 onchange="handleOnChange(this, event);" 
 onfocus="handleOnFocus(this, event);" 
 style="" 
 scripttype="text" 
 readonly="readonly" 
 tabindex="" 
 sctype="Text" 
 datatype="string" 
 buttonid="Column4" 
 dvdvar="" 
 ref="var/L.user.array/L.user.array[5]" 
 name="var/L.user.array/L.user.array[5]"
>
 problem
</span> 
```

我的第一个猜测是`.//*[@id='X6_5']` 这并没有真正按照我想要的方式工作，因为我可以看到，在 xml 中唯一没有随机创建的是“问题”，所以它给了我这个地方的内容`X6_5`:-P ...那`.//*[@name='problem']`本来是我的猜测，但这给了我：

> 由于以下错误，无法使用 xpath 表达式 .//*[@name, 'problem'] 定位元素：
> 
> 错误：INVALID_EXPRESSION_ERR：DOM XPath 异常 51（警告：服务器未提供任何堆栈跟踪信息）

很抱歉不是很清楚，第一次使用这个，但感谢大家的尝试。

我要做的是将站点上的值与我在硒中的数组进行比较。例如，我的数组包含“问题、exp、链接器”，在我的网站上有一个应该包含所有这些的列表，但有时会出现问题并且其中一个值丢失。我想检查是否是这种情况。

这`.//*[@id='X6_5']`只是列表中的位置，可以是任何不感兴趣的值。所以我需要看看我是否可以在列表中找到“问题”。我试过像“span [contains'problem']”这样的东西；aso 但没有成功。所有这些都在 iframe 中，但我可以按下`.//*[@id='X6_5']`但看不到“span”的名称或按下“span[contains'problem']”；。不知道我还能为您提供什么帮助，所以如果缺少某些内容，请直接说出来，我会尽我所能回答。

你们中的任何人都猜想这可以帮助我使用 xpath，也许可以解释这种感觉，我是新人 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:18:36.533

你的问题不是很清楚。*当你说“唯一不是在 xml 中随机创建的东西是‘问题’”*时，我不确定你的意思。

**也就是说，正如您已经推断出的，选择此特定元素的一个可能的 XPath 是：**

```
//span[@id = 'X6_5'] 
```

**如果你真的想匹配“问题”（这是这个元素的值），你也可以这样做：**

```
//span[. = 'problem'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T10:58:40.883

要通过其中的文本匹配元素，您不要使用类似的属性`@name`，而是使用 text() 函数：

```
//span[text() = 'Problem'] 
```

如果 span 文本中有任何空格导致该操作失败，您可以使用如下`normalise-space`函数将其剥离：

```
//span[normalize-space(.) = 'Problem'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:17:52.440

该错误实际上是由于查询本身根本不是有效的 XPath。

```
.//*[@name, 'problem'] 
```

你打算在这里做什么？这是`equals`, `starts with`,`ends with`还是`contains`搜索？

您可能正在寻找，让该查询工作（工作被定义为*不抛出异常*，不一定匹配*任何*元素）是：

```
//*[@name='problem'] 
```

您将需要更多地解释这个问题，因为它根本不清楚。您提供的 HTML 和您的*第一个*XPath 查询将获得该元素。如果不是，请告诉我们为什么，如何以及它正在做什么。向我解释为什么它不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:30:18.950

请避免使用前缀**。**在 Xpath 之前。这导致了问题。删除**.** 然后再试一次。这是 Html 而不是 Xml。

# .htaccess - 多重重写网址：domain.tld/posts.php?blog=&id= to domain.tld/posts/blog/id

> ID：15905685
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:11:01.287
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我如何从这个 **domain.tld/posts.php?blog=&id=重写我的网址**

对此：

**domain.tld/posts/blog/id**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:35:09.123

在脚本中构建您的 url 以形成：`/posts/blog/id`并用`mod_rewrite`.

文件内容`.htaccess`：

```
<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f

    RewriteRule ^([0-9a-zA-Z\-]+?)/([0-9a-zA-Z\-]+?)?/([0-9a-zA-Z\-]+?)?$ $1.php?blog=$2&id=$3
</IfModule> 
```

例如：for`http://so.localhost/posts/YourBlog/YourID`和`posts.php`with 代码：

```
<?php
    var_dump($_GET); 
```

结果：

```
array (size=2)
  'blog' => string 'YourBlog' (length=8)
  'id' => string 'YourID' (length=6) 
```

我希望我有所帮助。

# android - 需要在哪里创建文件以在 android 中读取它

> ID：15905687
> 
> 赞同：0
> 
> 时间：2013-04-09T15:11:06.747
> 
> 标签：android, file

我无法创建文件。

```
private static final String FILE_NAME = "info.txt";
File f = new File(FILE_NAME);
if(f.exists()){
    Log.d("My Error", "exists");
}else{
    try {
        f.createNewFile();
    } catch (IOException e) {
        Log.d("My Error", "can't create");
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

在日志中它打印了我的日志“我的错误”和“无法创建”

我还必须做什么？以及将在哪里创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:21:40.703

如果您只想创建一个应用程序可以写入然后读取的文件，请`openFileOutput()`像这样使用：

```
FileOutputStream fos = openFileOutput(FILE_NAME, 0); 
```

这将在应用程序的私有数据目录中创建一个文件。只有您的应用程序可以读取/写入此目录。

# forms - CakePHP 在表单中输入一个 $ 变量

> ID：15905688
> 
> 赞同：0
> 
> 时间：2013-04-09T15:11:07.820
> 
> 标签：forms, cakephp, variables, do-while, cakephp-2.3

我正在使用 CakePHP 2.3.1。

我需要知道是否有可能在表单字段中填写 $variable。如果（存在）我应该怎么做？

正如您在我的 event_repeat() 函数中看到的那样。

```
 function repeat($id = null) {
            if (!$id) {
                    $this->Session->setFlash(__('Prenotazione non trovata'));
                    $this->redirect(array('action' => 'view', $this->data['Event']['id']));
            }

            //this is the variable I need
            $repeat = $this->data['Event']['repeat'];
            $i = 1;
            do {
                 //code

            } while ($repeat > $i);
        } 
```

$repeat 变量是用户想要的重复次数，我希望它由输入表单设置为正整数值。

如何使输入字段引用控制器内的变量，而不是数据库字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:37:15.770

在您看来：

```
print $this->Form->input('repeat', array('label' => 'How many times you wish to repeat?', 'name' => 'data[repeats]')); 
```

在你的控制器中：

```
$repeats = $this->data['repeats']; 
```

# machine-learning - 根据图像参数进行图像排列的神经网络

> ID：15905689
> 
> 赞同：0
> 
> 时间：2013-04-09T15:11:10.283
> 
> 标签：machine-learning, neural-network

我有一组图像，由不同的人以不同的方式排列。我为每个图像计算了四个参数。上述排列中任何图像的位置取决于这四个参数。所以现在我想找出图像参数与其排列位置之间的这种关系。我还将使用此关系来查找任何传入新图像的位置，具体取决于其派生的四个参数。我打算使用神经网络。那么在我的情况下哪个网更可取....

# java - VisualVM 和 GlassFish

> ID：15905691
> 
> 赞同：3
> 
> 时间：2013-04-09T15:11:12.727
> 
> 标签：java, glassfish, visualvm, proxy-classes

目前，我正在尝试清除我的 JSF/PrimeFaces Web 应用程序中的瓶颈。为此，我安装了 VisualVM 及其 GlassFish 插件。

我无法通过 JMX 显式“分析”，但可以生成“采样”输出。但是，此输出显示了名为 的操作中的几乎全部负载`$Proxy245.invoke()`。

![VisualVM 采样输出](https://i.stack.imgur.com/Ei2fB.png)

我自己的操作 (ch.diction.*) 和 SQL 交互逻辑 (com.mysql.jdbc.*)，我一开始怀疑是瓶颈，但似乎对这种性能不足没有太大贡献。

显示的页面是一个 PrimeFaces 数据表，其中包含数百条分页记录。记录的数量确实会显着影响性能，如果不是唯一的话。

所以我的问题是：我怎样才能找出背后`$Proxy245.invoke()`的原因，以便确定这种情况下的真正瓶颈？

提前感谢您的建议和问候

帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:13:15.987

$Proxy245 是某些[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)框架生成的代理类，在您的情况下，不清楚是哪一个。它用于拦截方法调用。由于它是生成的，因此您将找不到实际的来源，因为没有任何来源。我建议您使用 VisualVM（线程选项卡）生成一个线程转储并检查堆栈跟踪我很确定您会找到这种方法（可能不是第一次尝试，而是进行几次转储）。有了这个，你可以找到最后调用这个（代理）方法的方法链。

还要尝试对应用程序进行分析，而不仅仅是 Sample（Profiler 选项卡）。使用分析器，您可以查明这些是对同一方法的多次调用，还是只是一个不想结束的长时间调用。

# iphone - iPhone 模拟器 - Calendar.sqlitedb

> ID：15905695
> 
> 赞同：0
> 
> 时间：2013-04-09T15:11:17.660
> 
> 标签：iphone, ios

我正在运行 Apple 示例程序 SimpleEKDemo，它应该将事件详细信息发布到 iphone 日历。运行并发布一些事件后，我可以在笔记本电脑的模拟器库中找到 Calendar.sqlitedb，但是当我使用 SQLite 数据库浏览器查看它时，它是空的，里面什么都没有。我在 Simulator 6.1 上运行，这是我在其中查看 Calendar.sqlitedb 的文件夹。

关于为什么 Calendar.sqlitedb 为空的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:36:35.353

Calendar.sqlite 数据库是否存在于捆绑包中？有时应用程序开发人员会在 bundle 中放置一个空的 sqlite 数据库，然后在第一次启动时将其复制到应用程序的文件目录中，因为 bundle 中的内容是只读的。你可能看错了。

# cordova - Phonegap Build 是否将整个资源文件夹打包到每个平台包中？

> ID：15905696
> 
> 赞同：3
> 
> 时间：2013-04-09T15:11:18.550
> 
> 标签：cordova, phonegap-build

我最近创建了一个使用 PhoneGap 为 iOS 和 Android 构建的移动应用程序。我目前正在尝试迁移到使用 PhoneGap Build 并且取得了半成功。我遇到的问题是我的资源文件夹是这样构造的：

/res
/res/icons/android
/res/icons/ios
/res/screens/android
/res/screens/ios

然后我在我的 config.xml 中有这样的条目：

```
<!-- Define app icon for each platform. -->
<icon src="res/icon/android/icon-96-xhdpi.png" />
<icon src="res/icon/android/icon-36-ldpi.png"   gap:platform="android"    gap:density="ldpi" />
<icon src="res/icon/android/icon-48-mdpi.png"   gap:platform="android"    gap:density="mdpi" />
<icon src="res/icon/android/icon-72-hdpi.png"   gap:platform="android"    gap:density="hdpi" />
<icon src="res/icon/android/icon-96-xhdpi.png"  gap:platform="android"    gap:density="xhdpi" />
<icon src="res/icon/ios/icon-57.png"            gap:platform="ios"        width="57" height="57" />
<icon src="res/icon/ios/icon-72.png"            gap:platform="ios"        width="72" height="72" />
<icon src="res/icon/ios/icon-57-2x.png"         gap:platform="ios"        width="114" height="114" />
<icon src="res/icon/ios/icon-72-2x.png"         gap:platform="ios"        width="144" height="144" />

<!-- Define app splash screen for each platform. -->
<gap:splash src="res/screen/android/screen-ldpi-portrait.png"  gap:platform="android" gap:density="ldpi" />
<gap:splash src="res/screen/android/screen-mdpi-portrait.png"  gap:platform="android" gap:density="mdpi" />
<gap:splash src="res/screen/android/screen-hdpi-portrait.png"  gap:platform="android" gap:density="hdpi" />
<gap:splash src="res/screen/android/screen-xhdpi-portrait.png" gap:platform="android" gap:density="xhdpi" />
<gap:splash src="res/screen/ios/screen-iphone-portrait.png"    gap:platform="ios"     width="320" height="480" />
<gap:splash src="res/screen/ios/screen-iphone-portrait-2x.png" gap:platform="ios"     width="640" height="960" />
<gap:splash src="res/screen/ios/screen-ipad-portrait.png"      gap:platform="ios"     width="768" height="1024" />
<gap:splash src="res/screen/ios/screen-ipad-landscape.png"     gap:platform="ios"     width="1024" height="768" /> 
```

当 PhoneGap Build 创建我的包时，它们看起来很大 - 我注意到，在我的 android apk 中，它已正确地将正确的文件复制到 res/drawable 文件夹中，因此应用程序可以正常工作，但问题是它已经离开了整个res 文件夹，其中包含我的 www 文件夹中的所有 iOS 和 Android 资源 - 当然已打包在 apk 中！

这是预期的行为还是我错过了什么？

在这里的任何帮助将不胜感激。
非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:02:33.630

我看到这个人手动删除它们，虽然我不喜欢这样！

[http://www.slideshare.net/KimPropertyPattaya/decrease-apk-files-size-after-phonegap-build](http://www.slideshare.net/KimPropertyPattaya/decrease-apk-files-size-after-phonegap-build)

基本上，这个家伙解压缩了 apk，删除了不需要的文件，然后再次将其压缩回去。

# html - 了解 HTML5 视频标签和流式传输块

> ID：15905702
> 
> 赞同：2
> 
> 时间：2013-04-09T15:11:34.903
> 
> 标签：html, video-streaming, html5-video

我试图了解 HTML5 视频标签以及它如何播放/缓冲来自 WEBM 文件的流数据块。

如果我将 WEBM 文件分成 10 个块并将它们全部输入视频标签，则视频播放正常。但是，如果我只将最后 5 个块输入视频标签，它就不会播放。我得到...

INVALID_STATE_ERR：DOM 异常 11

文件开头是否有一些需要的字节？

视频标签是否需要知道它在视频中的具体位置才能播放？即内容范围

我怎样才能只播放视频的特定块？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:49:41.830

我在一个用于 Webm 的 google 组中发现了我需要知道的几乎所有信息。这是一个链接...

[https://groups.google.com/a/webmproject.org/forum/?fromgroups=#!topic/webm-discuss/6ySds58ZhEQ](https://groups.google.com/a/webmproject.org/forum/?fromgroups=#!topic/webm-discuss/6ySds58ZhEQ)

# tomcat7 - Tomcat 在不运行 servlet 的情况下返回 400

> ID：15905706
> 
> 赞同：0
> 
> 时间：2013-04-09T15:11:43.993
> 
> 标签：tomcat7, java-7, servlet-3.0, http-1.0

我的设备有 UBlox（硬件组件）来发送 POST HTTP/1.0 请求。

我在 Tomcat 中收到的标头如下：

```
POST sc2-http-connector-3.0.0/report HTTP/1.0
Content-Type: application/octet-stream
Host: xx.xx.xx.xx:8080
Connection: TE, close
TE: trailers
Content-Length: 152 
```

请求正文实际上是二进制数据。Tomcat 只是向客户端返回 400，甚至没有运行只打印标题、正文等的 servlet。

```
public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    System.out.println("getMethod :: " + request.getMethod());
    System.out.println("getContentLength :: " + request.getContentLength());
    System.out.println("getContentType :: " + request.getContentType());
    System.out.println("getProtocol :: " + request.getProtocol());
    System.out.println("getRemoteAddr :: " + request.getRemoteAddr());
    System.out.println("getRemoteHost :: " + request.getRemoteHost());
    System.out.println("getRemotePort :: " + request.getRemotePort());
    System.out.println("getRemoteUser :: " + request.getRemoteUser());

    printHeaders(request);

    printByteStream(request.getInputStream());

    System.out.println("------------- parts, if any -------------");
    for (Part part : request.getParts()) {
        System.out.println("size :: " + part.getSize());
        System.out.println("contentType :: " + part.getContentType());
        System.out.println("name :: " + part.getName());
        printHeaders(part);
        printByteStream(part.getInputStream());
    }

    response.setStatus(HttpServletResponse.SC_OK);
} 
```

标题似乎没有问题。我觉得应该是数据有问题。但是，为什么 Tomcat 返回 400 并且不将控制权传递给我的 servlet？我该如何调试呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:41:04.233

POST 命令中的路径只是缺少前导斜杠。

# android - HTML5 在 Android 上有带有上边距的海报图片

> ID：15905707
> 
> 赞同：1
> 
> 时间：2013-04-09T15:11:48.263
> 
> 标签：android, css, html, video, webview

我在视频上有一张海报图片，该图片向下移动了大约 40 像素，在上面留下了空白。当视频播放时，它会向上移动并在正确的位置播放。此外，控制栏在视频上垂直居中，而不是在视频底部对齐。

此视频正在 Android WebView 中呈现。在所有其他浏览器上都可以正常工作，没有幻想边距或奇怪的控件放置。

我想知道我的任何 css 是否可能会被丢弃（当我检查 Safari Web Inspector 中的计算值时，填充和边距都是 0）

![视频应与发际线分隔线齐平](https://i.stack.imgur.com/OZpfI.png)

在视频海报图像上方可以看到带有幻想边缘的图像。海报图像应与发际线分隔线齐平。

![您可以看到视频控件垂直居中不正确](https://i.stack.imgur.com/tkGJp.png)

我相信上述问题是相关的，当视频控件应该位于底部时，它们在视频上垂直居中。您可以看到视频在该边距中向上移动。

![控件最终消失，视频播放正常](https://i.stack.imgur.com/Ugzce.png)

最终，控件消失，视频按应有的方式播放。

有没有办法将 css 直接应用于视频海报？我猜海报的显示很尴尬，因为它与视频的尺寸不同。我想知道我需要什么 CSS 来处理这个问题。

我的 CSS foo 不是那么好。我更像是本地开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T20:23:24.430

这是我的 CSS 的问题。最终我不得不将所有内容包装在一个 div 中，并将高度和宽度设置为 100%

# joomla - 将 Joomla 的“登录阅读更多”网址从登录页面更改为注册页面？

> ID：15905708
> 
> 赞同：1
> 
> 时间：2013-04-09T15:11:49.543
> 
> 标签：joomla

我在 Joomla 上有一个博客页面，在每篇文章介绍文本之后显示“注册阅读更多”链接。

单击此按钮将用户带到登录页面，没有“注册”选项。

我将如何更改此设置以将用户带到注册页面，并最好在登录后将用户恢复到文章？我在注册页面上有一个登录框，因此它允许用户选择登录或注册。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:02:54.700

如果您使用的是 Joomla 2.5，但看不到“没有帐户？”之类的链接。然后您关闭了用户注册。

转到`Users`菜单并选择`User Manager`，然后单击工具栏中的`Options`图标。在`Component`选项卡下将第一个选项设置`Allow User Registration`为`Yes`。

保存更改，然后单击“注册以阅读更多...”链接之一，您现在应该会看到额外的“没有帐户？”

如果您想要的不仅仅是基本的 Joomla！站点访问选项，那么您可能需要查看[Joomla! 扩展目录](http://extensions.joomla.org/)(JED) 和[站点访问部分](http://extensions.joomla.org/extensions/access-a-security/site-access)

# selectedindexchanged - Listview 中下拉列表的 SelectedIndexChanged 事件未发生。在用户控件中

> ID：15905711
> 
> 赞同：2
> 
> 时间：2013-04-09T15:11:51.177
> 
> 标签：selectedindexchanged

我有一个 ListView 和 DropDownList(primary) 以及更多和一个文本框，在该 ListView 的每一行内。全部在一个用户控件上，并在另一个用户控件上使用这个用户控件（这里是要执行的操作。）（我们正在使用 DNN）。现在我想为下拉列表添加事件处理程序，它将对 SelectedIndexChanged 做出反应。我想根据所选 DropDrownList(primary) 的特定值显示和隐藏其他下拉列表和文本框。我无处可做……尽管尝试了几次。

**筛选结果： ** 评论：使用的子集： **焦油状态： **

后面的代码是这样的

Public Sub ddlFindingsScreeningOutcome_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Dim ddl As DropDownList = CType(sender, DropDownList)

```
 Dim item As ListViewItem = CType(ddl.NamingContainer, ListViewItem)

        Dim txtFindingsComments As TextBox = CType(item.FindControl("txtFindingsComments"), TextBox)
        Dim ddlFindingsTarStatus As DropDownList = CType(item.FindControl("ddlFindingsTarStatus"), DropDownList)

        If Not ddl Is Nothing Then
            If Not ddl.SelectedItem.Text = "Not Screened" Then
                txtFindingsComments.Visible = True
                ddlFindingsTarStatus.Visible = True

            End If
        Else
            txtFindingsComments.Visible = False
            ddlFindingsTarStatus.Visible = False
        End If

    End Sub 
```

# python - Python Unittest NoneType NameError

> ID：15905712
> 
> 赞同：0
> 
> 时间：2013-04-09T15:11:53.177
> 
> 标签：python, unit-testing, nonetype

我在这里搜索了单元测试中的大量 NameError 问题，但似乎找不到与我的问题相关的任何内容。

这是一个家庭作业，所以如果你能告诉我哪里错了，而不是如何纠正它，那就太好了。我正在尝试为一个函数编写一个单元测试，该函数将列表中的最后一个数字与列表中的第一个数字交换。

这是我为该函数编写的代码：

```
def swap_k(L, k):

    """ (list, int) -> NoneType

    Precondtion: 0 <= k <= len(L) // 2

    Swap the first k items of L with the last k items of L.

    >>> nums = [1, 2, 3, 4, 5, 6]
    >>> swap_k(nums, 2)
    >>> nums
    [5, 6, 3, 4, 1, 2]
    >>> nums = [1, 2, 3, 4, 5, 6]
    >>> swap_k(nums, 3)
    >>> nums
    [4, 5, 6, 1, 2, 3]
    """

    L[:k], L[-k:] = L[-k:], L[:k] 
```

这段代码使用 doctest 可以正常工作，完全没有错误，所以我很确定它没有任何问题。但是，我为单元测试编写的代码不断给我一个 NameError。这是单元测试的代码：

```
import a1
import unittest

class TestSwapK(unittest.TestCase):
    """ Test class for function a1.swap_k. """

    def test_swapk_1(self):
        """Swap the first k items of L with the last k items of L. Where L =
        [1, 2, 3, 4, 5, 6] and k = 2."""

        L = [1, 2, 3, 4, 5, 6]
        expected = [5, 6, 3, 4, 1, 2]
        a1.swap_k(L, k)
        self.assertEqual(L, expected)

if __name__ == '__main__':

    unittest.main(exit=False) 
```

这是错误消息：

```
E
======================================================================
ERROR: test_swapk_1 (__main__.TestSwapK)
Swap the first k items of L with the last k items of L. Where L =
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\xxxxx\xxxxxxxxxx\xxxxxxxxxxxx\test_swap_k.py", line 13, in test_swapk_1
    a1.swap_k(L, k)
NameError: global name 'k' is not defined

----------------------------------------------------------------------
Ran 1 test in 0.016s

FAILED (errors=1)` 
```

有人可以告诉我哪里出错了，这让我发疯。如果有可能在不告诉我答案的情况下告诉我哪里出错了，请这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:14:27.160

错误很明显：`k`未定义。在您的 doctest 示例中，`k`是`3`：

```
a1.swap_k(L, k=3) 
```

我只是`k=3`用来冗长。`a1.swap_k(L, 3)`如果你愿意，你可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:15:59.437

您尚未在函数中定义变量 k 。

代替：

```
a1.swap_k(L, k) 
```

您可能打算输入：

```
a1.swap_k(L, 2) 
```

或者

```
k = 2
a1.swap_k(L, k) 
```

或类似的东西。

# java - RXTX 中的同步方法

> ID：15905715
> 
> 赞同：0
> 
> 时间：2013-04-09T15:12:03.943
> 
> 标签：java, rxtx

**情况：** 我正在尝试使来自 SerialPort 的传入数据对我的目的有用。在一个类Processor.java中，我实现了几种方法——其中一种（serialEvent）实现了gnu.io.SerialPortEventListener。它将从 inputStream 读取的信息存储在一个字节数组的缓冲区中。还有一种方法，将数据写入 outputStream。

**问题：** 我想实现一个方法（在同一个类中），该方法将根据从 inputStream 读取的消息向 outputStream 写入内容。

**伪代码：**

```
@Override
public void serialEvent(SerialPortEvent event) {
// get data
}

public void writeData(String dataToWrite) {
// write data
}

public void respond() {
// write data
// wait for appropriate response (read data)
// write data
// ...
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:43:28.110

唯一想到的是一个后台线程，它等待输入缓冲区满条件来处理接收到的消息并做出响应。

如果您正在以固定长度的数据包或开始-停止标记的数据包进行通信，您应该创建一个线程来监控串行端口，缓冲接收到的数据，一旦满足“数据包/消息完成”条件，就会向注册的侦听器触发事件（如果可能，在另一个线程中）。然后该侦听器将处理消息并响应（在其自己的线程中）。

# c# - 使用 JSON.net 附加到 JSON 对象

> ID：15905717
> 
> 赞同：0
> 
> 时间：2013-04-09T15:12:06.120
> 
> 标签：c#, json.net

我需要序列化一个如下所示的 JSON 对象：

```
{
   "Documents": [
      {
         "Title": "",
         "DatePublished": "",
         "DocumentURL": "",
         "ThumbnailURL": "",
         "Abstract": "",
         "Sector": "",
         "Country": [
            "", "", ""
         ],
         "Document Type": ""
      }
   ]
} 
```

我正在做的是从 SQL 服务器获取数据并将结果存储到这样的对象中：

```
public List<Dictionary<string, string>> GetResults()
{
    int index = 0;
    while (this.myReader.Read())
    {

        this.dataFrmDb = new Dictionary<string, string>();
        for (int i = 0; i < myReader.FieldCount; i++)
        {
            if (myReader.GetName(i) == "Country")
            {
                string[] delimiter = { " _qfvcq_ " };
                string text = myReader[myReader.GetName(i)].ToString();
                string[] results = text.Split(delimiter, StringSplitOptions.None);

                //This list stores the values for "Country". 
                List<string> countries = new List<string>();
                for (int j = 0; j < results.Count(); j++)
                {
                    countries.Add(results[j].ToString()); 
                }
            }
            else
            {                           
                this.dataFrmDb.Add(myReader.GetName(i), 
                          myReader[myReader.GetName(i)].ToString());
            }
        }

        this.dictList.Add(this.dataFrmDb);
    }
    return this.dictList;
} 
```

然后我获取这些数据并像这样序列化：

```
Database connect = new Database(
    System.Configuration.ConfigurationManager.AppSettings["DatabaseConnectionString"],
    System.Configuration.ConfigurationManager.AppSettings["StoredProcedure"]);

List<Dictionary<string, string>> dataResults = connect.GetResults();           

Dictionary<string, List<Dictionary<string, string>>> myList = 
            new Dictionary<string, List<Dictionary<string, string>>>();

myList.Add("Documents", dataResults);

string ans = JsonConvert.SerializeObject(myList, Formatting.Indented);
System.Console.WriteLine(ans); 
```

我得到了正确的输出，但是如果您查看原始 JSON 格式，“国家/地区”需要有多个值。我不知道如何在这个 JSON 对象中实现它。如何使用 JSON.net 向 JSON 对象添加带有“国家/地区”值的列表？还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:04:51.343

如果您更改`dataFrmDb`为 be`Dictionary<string, object>`而不是 a `Dictionary<string, string>`，那么您可以像其他值一样将 Country 列表存储到其中。然后 Json.Net 将按照您的意愿对其进行序列化。

这是一个示例程序，它演示：

```
class Program
{
    static void Main(string[] args)
    {
        List<Dictionary<string, object>> dataResults = GetResults();           
        Dictionary<string, List<Dictionary<string, object>>> myList = 
                      new Dictionary<string, List<Dictionary<string, object>>>();
        myList.Add("Documents", dataResults);
        string ans = JsonConvert.SerializeObject(myList, Formatting.Indented);
        System.Console.WriteLine(ans); 
    }

    public static List<Dictionary<string, object>> GetResults()
    {
        List<Dictionary<string, object>> dictList = new List<Dictionary<string, object>>();

        Dictionary<string, object> dataFrmDb = new Dictionary<string, object>();
        dataFrmDb.Add("Title", "An Example Document");
        dataFrmDb.Add("DatePublished", DateTime.Now.ToString());
        dataFrmDb.Add("DocumentURL", "http://www.example.org/documents/1234");
        dataFrmDb.Add("ThumbnailURL", "http://www.example.org/thumbs/1234");
        dataFrmDb.Add("Abstract", "This is an example document.");
        dataFrmDb.Add("Sector", "001");
        dataFrmDb.Add("Country", new List<string> { "USA", "Bulgaria", "France" });
        dataFrmDb.Add("Document Type", "example");

        dictList.Add(dataFrmDb);
        return dictList;
    }
} 
```

输出：

```
{
  "Documents": [
    {
      "Title": "An Example Document",
      "DatePublished": "4/9/2013 7:25:05 PM",
      "DocumentURL": "http://www.example.org/documents/1234",
      "ThumbnailURL": "http://www.example.org/thumbs/1234",
      "Abstract": "This is an example document.",
      "Sector": "001",
      "Country": [
        "USA",
        "Bulgaria",
        "France"
      ],
      "Document Type": "example"
    }
  ]
} 
```

一种更直接的方法是创建单独的类来保存数据，正如 Joey Gennari 所建议的那样。Json.NET 也可以序列化这些。数据类看起来像这样：

```
class Result
{
    public List<Document> Documents { get; set; }

    public Result()
    {
        Documents = new List<Document>();
    }
}

class Document
{
    public string Title { get; set; }
    public string DatePublished { get; set; }
    public string DocumentURL { get; set; }
    public string ThumbnailURL { get; set; }
    public string Abstract { get; set; }
    public string Sector { get; set; }
    public List<string> Country { get; set; }
    [JsonProperty(PropertyName="Document Type")]
    public string DocumentType { get; set; }

    public Document()
    {
        Country = new List<string();
    }
} 
```

这是用法：

```
class Program
{
    static void Main(string[] args)
    {
        Document doc = new Document();
        doc.Title = "An Example Document";
        doc.DatePublished = DateTime.Now.ToString();
        doc.DocumentURL = "http://www.example.org/documents/1234";
        doc.ThumbnailURL = "http://www.example.org/thumbs/1234";
        doc.Abstract = "This is an example document.";
        doc.Sector = "001";
        doc.Country.Add("USA");
        doc.Country.Add("Bulgaria");
        doc.Country.Add("France");
        doc.DocumentType = "example";

        Result result = new Result();
        result.Documents.Add(doc);

        string json = JsonConvert.SerializeObject(result, Formatting.Indented);
        System.Console.WriteLine(json);
    }
} 
```

此示例的输出与第一个完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:40:57.870

这是解决它的另一种方法`DataContractJsonSerializer`。首先创建一个类来表示对象：

```
 [DataContract]
    public class DocumentHolder
    {
        [DataMember(Name = "Documents")]
        public Documents Document { get; set; }
    }

    [DataContract]
    public class Documents
    {
        [DataMember(Name = "Title", Order = 1)]
        public string Title { get; set; }
        [DataMember(Name = "DatePublished", Order = 2)]
        public DateTime? DatePublished { get; set; }
        [DataMember(Name = "DocumentURL", Order = 3)]
        public string DocumentURL { get; set; }
        [DataMember(Name = "ThumbnailURL", Order = 4)]
        public string ThumbnailURL { get; set; }
        [DataMember(Name = "Abstract", Order = 5)]
        public string Abstract { get; set; }
        [DataMember(Name = "Sector", Order = 6)]
        public string Sector { get; set; }
        [DataMember(Name = "Country", Order = 7)]
        public List<string> Country { get; set; }
        [DataMember(Name = "Document Type", Order = 8)]
        public string DocumentType { get; set; }

        public Documents()
        {
            this.Country = new List<string>();
        }
    } 
```

以下是填充对象并对其进行序列化的方法：

```
 static void Main(string[] args)
    {
        var documentholder = new DocumentHolder { Document = new Documents { Title = "Title 1", DatePublished = DateTime.Now, Sector = "A17", Country = new List<string> { "EN-US", "EN-GB" } } };
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(DocumentHolder));
        var ms = new MemoryStream();
        serializer.WriteObject(ms, documentholder);
        var text = Encoding.UTF8.GetString(ms.ToArray());
    } 
```

# database - CakePHP 数据库文件规范

> ID：15905720
> 
> 赞同：1
> 
> 时间：2013-04-09T15:12:19.887
> 
> 标签：database, cakephp, configuration

我正在尝试查找有关 CakePHP 配置的信息，但我没有任何运气谷歌搜索和环顾四周。我想让 CakePHP 应用程序使用“database.local.php”而不是“database.php”，但我在 app/Config 文件中找不到数据库文件定义为“database.php”的行。有谁知道它是在哪里定义的，所以我可以改变它？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:20:57.647

如果我做对了，你想要一个本地数据库......用于开发目的？

如果你想因为你的服务器名而切换数据库，你可以尝试使用： [http ://www.edwardawebb.com/web-development/cakephp/automatically-choose-database-connections-cakephp](http://www.edwardawebb.com/web-development/cakephp/automatically-choose-database-connections-cakephp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:19:09.100

对你来说不是一个完整的答案，但我不会改变它。

如果您为不同的环境（开发、登台、生产等）使用不同的文件，您可以使用您的命名约定，但让您的部署过程将相关文件重命名为 CakePHP 所期望的任何文件。也就是说，有：

```
database.local.php
database.uat.php
database.live.php 
```

或其他什么，只需在将代码部署到其中一个环境时重命名为 database.php 即可。

# c# - ASP.NET PostBack 没有击中正确的方法

> ID：15905724
> 
> 赞同：1
> 
> 时间：2013-04-09T15:12:38.113
> 
> 标签：c#, asp.net, postback

考虑以下 ASP.NET 代码：

```
<asp:UpdatePanel runat="server" ChildrenAsTriggers="true">
            <ContentTemplate>
                <asp:MultiView runat="server" ID="MultiView" ActiveViewIndex="0">
                    <asp:View runat="server">
                    </asp:View>
                    <asp:View runat="server">
                        <p><img alt="Loading..." src="/global/images/ajax-mini-loader.gif" style="vertical-align: middle;" />&nbsp;Loading...</p>
                    </asp:View>
                    <asp:View runat="server">
                        <asp:GridView runat="server" ID="WarrantyView" OnDataBound="WarrantyView_DataBound" AutoGenerateColumns="false" ItemType="WarrantySystem.Data.ServiceCompany">
                            <Columns>
                                <asp:BoundField HeaderText="Name" DataField="Name" />
                                <asp:BoundField HeaderText="Telephone" DataField="Telephone" />
                                <asp:BoundField HeaderText="Email" DataField="Email" />
                                <asp:BoundField HeaderText="Telephone 24/7" DataField="Telephone247" />
                                <asp:BoundField HeaderText="Email 24/7" DataField="Email247" />
                                <asp:TemplateField HeaderText="Actions">
                                    <ItemTemplate>
                                        <asp:Button runat="server" ID="btnEdit" CommandName="Edit" CommandArgument="<%# Item.ID %>" Text="Edit" />
                                        <asp:Button runat="server" ID="btnDelete" CommandName="Delete" CommandArgument="<%# Item.ID %>" Text="Delete" OnCommand="btnDelete_Command"/>
                                    </ItemTemplate>
                                </asp:TemplateField>
                            </Columns>
                        </asp:GridView>
                    </asp:View>
                    <asp:View runat="server">
                        <p>Your data could no be loaded at this time.</p>
                    </asp:View>
                </asp:MultiView>
                <asp:Timer runat="server" ID="tmrLoadData" Enabled="true" Interval="1" OnTick="tmrLoadData_Tick" />
            </ContentTemplate>
        </asp:UpdatePanel> 
```

单击 btnDelete 时，Page_Load 会发生一个回发事件，并且不会像它应该的那样命中 btnDelete_Command。我不知道为什么！

**编辑：**编辑按钮也会出现同样的问题......好吧，在这个例子中，没有 OnClick 或 OnCommand 事件，但我刚刚测试过这个......它做同样的事情。

**这个怎么运作：**

*   页面加载并显示一个空视图。
*   计时器计时并开始加载数据，并显示数据加载视图。
*   加载数据后，将显示数据视图。
*   单击编辑时，页面应重定向到编辑页面。
*   单击删除时，页面应该只删除条目。

编辑：根据用户评论（服务器端代码命令代码）：

```
protected void btnDelete_Command(object sender, CommandEventArgs e)
    {
        bool result = this.mgr.DeleteServiceCompany(Int32.Parse(e.CommandArgument.ToString()));
    }

    protected void btnEdit_Command(object sender, CommandEventArgs e)
    {
        Response.Redirect("ServiceCompany.aspx?id=" + e.CommandArgument.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:35:08.503

使用 GridView 的 RowCommand 事件来触发您的`Edit`和`Delete`命令。

将此添加到您的 GridView 标记中。

```
OnRowCommand="WarrantyView_RowCommand" 
```

还要更改`CommandName`文字

```
CommandName="Modify"  // change the name here
CommandName="Remove"  // change the name here 
```

在活动内部

```
protected void WarrantyView_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Modify")
    {
       // your edit logic
    }
    if (e.CommandName == "Remove")
    {
       // your delete logic 
    }
} 
```

> 我确实建议您更改`CommandName`属性的名称。
> 更改`Edit`为可能`Modify`
> 更改`Delete`为可能`Remove`
> 原因是它们是内置`gridview`命令

**注意：**确保您的 ViewState 在所有相关位置也已启用。这不适用于禁用 ViewState。

# java - Android - 如何使用 ActionBar 在 Fragment 之间导航

> ID：15905736
> 
> 赞同：1
> 
> 时间：2013-04-09T15:13:16.020
> 
> 标签：java, android, android-fragments, android-activity, android-actionbar

ActionBar 和 Fragments 的新手，但总体上熟悉 Android。

我一直在关注一些教程。到目前为止，我有以下内容：

*   3`Fragments`我想在之间导航（每个都有一个覆盖的 onCreateView() 并加载一个简单的视图）
*   ActionBar的自定义`TabListener`（我相信问题就在那里，代码见帖子底部）
*   `Activity`执行所有这些操作的主机

活动代码：

```
public class Activity_Home extends Activity
{
ActionBar actionBar;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);

    actionBar = getActionBar();  // Get reference to ActionBar

    // Add some navigation tabs...

    // 1\. Enable ActionBar navigation tabs
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowTitleEnabled(false);

    // 2\. Add the tabs
    Tab programTab = actionBar.newTab();
    Tab settingsTab = actionBar.newTab();
    Tab historyTab = actionBar.newTab();

    programTab.setText("Program")
              .setTabListener(new TabListener<Fragment_Program>(
                      this, R.id.fragmentParent, Fragment_Program.class));

    settingsTab.setText("Settings")
               .setTabListener(new TabListener<Fragment_Settings>(
                      this, R.id.fragmentParent, Fragment_Settings.class));

    historyTab.setText("History")
      .setTabListener(new TabListener<Fragment_History>(
              this, R.id.fragmentParent, Fragment_History.class));

    actionBar.addTab(programTab);
    actionBar.addTab(settingsTab);
    actionBar.addTab(historyTab);
}
} 
```

我的片段：

```
public class Fragment_Program extends Fragment
{
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    return inflater.inflate(R.layout.fragment_program, null);
}
} 
```

..

```
public class Fragment_History extends Fragment
{
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    return inflater.inflate(R.layout.fragment_history, null);
}
} 
```

..

```
public class Fragment_Settings extends Fragment
{   
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    return inflater.inflate(R.layout.fragment_settings, null);
}   
} 
```

最后，我的 TabListener 几乎基于 Google 官方示例。fragmentContainer (int) 是活动布局中 LinearLayout 的 XML 资源 ID，它是所有这些 Fragment 的直接父级。

```
public class TabListener <T extends Fragment> implements ActionBar.TabListener
{
private Fragment fragment;
private int fragmentContainer;
private final Activity activity;
private final Class<T> fragmentClass;

/** Constructor used each time a new tab is created.
 * @param activity  The host Activity, used to instantiate the fragment
 * @param tag  The identifier tag for the fragment
 * @param fragmentClass  The fragment's Class, used to instantiate the fragment
 */
public TabListener(Activity activity, int fragmentContainer, Class<T> fragmentClass)
{
    this.activity = activity;
    this.fragmentContainer = fragmentContainer;
    this.fragmentClass = fragmentClass;
}

@Override
public void onTabReselected(Tab arg0, FragmentTransaction arg1)
{
    // User selected the already selected tab. Usually do nothing.      
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft)
{
    // Check if the fragment is already intialized
    if (fragment == null)
    {
        // If not, instatiate and add it to the Activity
        fragment = Fragment.instantiate(activity, fragmentClass.getName());

        ft.add(fragmentContainer, fragment);
    }       
    else
    {
        ft.attach(fragment);
    }
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft)
{
    if (fragment != null)
    {
        // Detach the fragment, because another one is being attached
        ft.detach(fragment);
    }
} 
```

}

所以应用程序加载，选项卡在那里，我可以选择它们，但它们似乎没有相互链接，我不确定如何继续。

任何建议都会很棒！

干杯

奖励问题：ActionBar 也在现有的 ActionBar 下方。目标是替换它，而不是在下面再做一个。再次任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:58:38.783

我想你希望标签以一种可以在标签之间滑动的方式连接，为了实现这一点，你应该考虑一个`ViewPager`.

顺便说一下，这是 XML：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:orientation="vertical">

<android.support.v4.view.ViewPager 
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"/>

</LinearLayout> 
```

以下是您可以使用的一些示例代码：

```
public class MyTabActivity extends FragmentActivity implements ActionBar.TabListener, ViewPager.OnPageChangeListener  {

  //What item on the pager is being displayed
    private int mCurPagerItem = 0;
  //This will be set to the pageer to handle navigation
    private SectionsPagerAdapter mSectionsPagerAdapter;
    private ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        final ActionBar mActionBar = getActionBar();
        mActionBar.setDisplayShowHomeEnabled(false);
        mActionBar.setDisplayShowTitleEnabled(false);
        mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        //add the tabs
        mActionBar.addTab(mActionBar.newTab().setIcon(R.drawable.your_icon).setTabListener(this));
        mActionBar.addTab(mActionBar.newTab().setIcon(R.drawable.your_icon2).setTabListener(this));
        mActionBar.addTab(mActionBar.newTab().setIcon(R.drawable.your_icon3).setTabListener(this));

        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);
        mViewPager.setOnPageChangeListener(this);           

    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            switch (position) {
            case 0:
                Fragment one = new Fragment_Program();
                return one ;
            case 1:
                Fragment two = new Fragment_Settings();
                return two ;
            case 2:
                Fragment three = new Fragment_History();
                return three ;
            default:
                break;
            }
            return null;
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
            case 0:
                return getString(R.string.title_one);
            case 1:
                return getString(R.string.title_two);
            case 2:
                return getString(R.string.title_three);
            }
            return null;
        }
    }

    @Override
    public void onPageScrollStateChanged(int arg0) {}

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {}

    @Override
    public void onPageSelected(int arg0) {
        //When a Page is selected, make that the current navigation item
        getActionBar().setSelectedNavigationItem(arg0);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        //Back to top maybe?
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        //get the position
        final int pos = tab.getPosition();
        //Tell the viewpager to scroll to that page
        mViewPager.setCurrentItem(pos);
        mCurPagerItem = pos;
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    } 
```

要回答您的奖励问题，请尝试在您的清单上添加以下带有指定活动标签的行：

```
android:uiOptions="splitActionBarWhenNarrow" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:04:01.260

解决它！

[我改变了我的方法，从使用带有字符串标签的Fragment](http://www.lucazanini.eu/2012/android/tab-layout-in-android-with-actionbar-and-fragment/?lang=en) Container ID（这对我来说确实并且仍然更有意义..）。

# powershell - 编写我的第一个 powershell 脚本：脚本中无法识别命令

> ID：15905738
> 
> 赞同：1
> 
> 时间：2013-04-09T15:13:16.657
> 
> 标签：powershell

> 重命名项目 AB

在 shell 中键入时，如果本地目录中有文件 A，则重命名有效。

当我写一个单行脚本，把它放在一个文件夹中，导出这个文件夹的路径，去另一个文件夹，包含一个文件A，然后调用脚本，会发生这样的事情：

> 'rename-item' 不是内部或外部命令、
> 可运行程序或批处理文件。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:19:22.870

当您运行批处理文件时，您正在调用其中包含 PowerShell 命令的批处理文件。命令提示符通过 Powershell 引导其输出，这是上述错误。Command.exe 无法运行 powershell cmdlet，所以当它到达 Rename-Item 时，它不是一个好的内部或外部命令、可运行的程序或批处理文件。

当您 Ping www.google.com 时会调用 Ping.exe，例如什么是好的命令或可执行文件。

Powershell 可以从 command.exe 运行命令，反之则不然。

如果您打开 cmd 提示符并尝试运行 powershell 命令或 cmdlet，您可以看到相同的结果。：

```
H:\>rename-item 'rename-item' is not recognized as an internal or external command, 
operable program or batch file. 
```

# html - 仅使用 CSS 输入文本时更改输入样式

> ID：15905739
> 
> 赞同：5
> 
> 时间：2013-04-09T15:13:21.627
> 
> 标签：html, css

我正在设计一个页面，我只能访问 CSS 文件。

如果输入元素的值不为空，我希望更改其样式。

这是我到目前为止所拥有的...

```
<input id="myInput" type="text" name="myInput" autocomplete="off" placeholder="Enter your Card Number"> 
```

和

```
input {
    font-style:italic;  
}

input:not([value='']) {
    font-style:normal;  
} 
```

这不起作用，因为文本从不斜体。

考虑到我只能编辑 CSS 文件，是否有可能实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:28:36.010

看起来您正在使用**HTML5** ...如果是这样，只需编辑您的**PLACEHOLDER**标记

```
::-webkit-input-placeholder {font-style: italic} /*Chrome */
:-moz-placeholder {font-style: italic} /*ff*/
:-ms-input-placeholder {font-style: italic} /*ie latest */ 
```

JSFIDDLE：

[http://jsfiddle.net/Riskbreaker/wCff9/](http://jsfiddle.net/Riskbreaker/wCff9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:30:17.533

也许你想要这个：

```
input::-webkit-input-placeholder {
    font-style: italic;
}
input[type=text] {   
    font-style:normal;  
} 
```

[http://jsfiddle.net/Le6XM/1/](http://jsfiddle.net/Le6XM/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:45:45.503

我认为您要做的是设置占位符的样式。试试这个！

```
 input {
            font-style:italic;  
        }

        ::-webkit-input-placeholder {
            font-style:normal;  
        }

        :-moz-placeholder { /* Firefox 18- */
           font-style:normal;   
        }

        ::-moz-placeholder {  /* Firefox 19+ */
           font-style:normal;  
        }

        :-ms-input-placeholder {  
           font-style:normal;   
        } 
```

# r - 如何在 ggplot geom_smooth() 上使用操作 ()

> ID：15905744
> 
> 赞同：3
> 
> 时间：2013-04-09T15:13:40.820
> 
> 标签：r, ggplot2

有谁知道如何在**ggplot上使用****操作（）**，以便轻松选择平滑（跨度）级别？我尝试了以下方法但没有成功：

 **```
# fake data
    xvals <- 1:10
    yvals <- xvals^2*exp(rnorm(2,5,0.6))
    data <- data.frame(xvals,yvals)

# plot with manipulate
    manipulate(
    ggplot(data,aes(xvals,yvals)) +
      geom_smooth(span=slider(0.5,5)) +
      geom_point()
    ) 
```

我希望能够轻松地循环通过“平滑级别”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:51:18.507

更改您的数据以获得更多数据点。

```
xvals <- 1:100
yvals <- rnorm(100)
data <- data.frame(xvals,yvals) 
```

您必须为 in 中使用的值指定名称`span=`（`geom_smooth()`例如`span.val`），然后`span.val=slider(0.1,1)`在函数外部定义`ggplot()`- 在本例中作为 的第二个参数`manipulate()`。

```
library(manipulate)
library(ggplot2)
manipulate({
  #define plotting function 
  ggplot(data,aes(xvals,yvals)) +
    geom_smooth(method="loess",span=span.val) +
    geom_point()},
  #define variable that will be changed in plot
    span.val=slider(0.1,1)
) 
```**

# c++ - 如果其中一个有引用，如何定义两个具有相同名称和参数的函数？

> ID：15905749
> 
> 赞同：0
> 
> 时间：2013-04-09T15:13:50.993
> 
> 标签：c++, reference

我有代码：

```
int SomeClass::sum(int x)
{
    return x+=x;
}

int SomeClass::sum(int & x)
{
    return x+=x;
} 
```

……

```
int num = 0;
int result = sum(num); 
```

那行不通。我如何使用这两个函数并在调用它们时指出我想使用其中的哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:17:59.823

您可以提供两种不同的重载`int&`和`const int&`，这可能会以某种方式满足您的需求...

但是整个代码有点奇怪......在按值获取参数的函数中，您正在*修改*它（ ），而只*读取*它`+=`可能是有意义的。在接受引用的重载中，您既要*修改*参数*又要返回*新值。这有点奇怪。*`return x+x;`*

 ***除此之外，`sum`对于乘以 2 的函数来说，这是一个可怕的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:16:10.447

你不能在`C++`. 它们必须以不同的方式命名，例如`sumByCopy`和`sumByRef`。您希望编译器如何确定您在每一点指的是哪一个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:19:15.097

你可以用这种方式重载，如果你不直接调用它们中的任何一个，它会编译好的。但是，调用时会引起歧义`sum(num)`。因此，提供这些函数的重载是没有意义的，因为我们不能直接调用它们。这种重载是无用的，并且违反了良好的做法。***

# php - php/mysql：将 2 个或更多外键附加到一个“查询”？

> ID：15905751
> 
> 赞同：2
> 
> 时间：2013-04-09T15:13:57.360
> 
> 标签：php, mysql

* * *

## 我对此的解决方案在底部

我的问题是：我正在尝试显示外键数据，但由于有多个外键，我得到每个外键的“重复”查询。

[http://i.imgur.com/Gfqx497.png](https://i.imgur.com/Gfqx497.png)

如您所见，我可以查询正确的数据，但我不知道如何将其他外键数据附加到相同的“单行输出”。

我已经潜伏了一段时间的 stackoverflow 来找到我的问题的答案，但我束手无策。我发现了很多线程，例如下面的两个链接，我相信人们在问同样的事情，但是我似乎无法全神贯注地让解决方案在我的情况下工作。据我了解，我需要为表使用别名，但是我尝试了多种不同的解决方案解释，但无法重新创建解决方案。

[如何根据外键合并两行或多行](https://stackoverflow.com/questions/1754674/how-do-i-merge-two-or-more-rows-based-on-their-foreign-key)

[mysql查询2个外键](https://stackoverflow.com/questions/5504166/mysql-query-2-foreign-keys)

--

我有两张表（“奴才和能力”），其中一张有四个外键链接到另一张。

[http://i.imgur.com/ctpFHur.png](https://i.imgur.com/ctpFHur.png)

这是我用于查询的 php 代码，主要取自 PHP 和 MySQL Web Development 第 4 版（Welling，Thomson），我购买它是为了让我开始使用 php 和 mysql。

```
$query = "SELECT minions.name, minions.summon, minions.attack,
          minions.health, minions.race, minions.rarity, 
          minions.ability1, minions.ability2, minions.ability3, 
          minions.ability4, minions.imagebig, 
          ability.ability 
          AS ability FROM minions 
          INNER JOIN ability on 
          minions.ability1 = ability.abilityid 
          OR minions.ability2=ability.abilityid"; 

            //Only trying for 2 foreign keys to try get it to work

            $result = $db->query($query);
            $num_results = $result->num_rows;
            echo "<p>Number of items found: ".$num_results."</p>";

            for ($i=0; $i <$num_results; $i++){
                $row = $result->fetch_assoc();
                //echo "<p><strong>".($i+1).". Name: ";
                echo "<p><strong>";
                echo htmlspecialchars(stripslashes($row['name']));
                echo "</strong><br />Summoning cost: ";
                echo stripslashes($row['summon']);
                echo "<br />Attack: ";
                echo stripslashes($row['attack']);
                echo "<br />Health: ";
                echo stripslashes($row['health']);
                echo "<br />Race: ";
                echo stripslashes($row['race']);
                echo "<br />Rarity: ";
                echo stripslashes($row['rarity']);                  
                //if (stripslashes($row['ability'] != NULL)){
                    echo "<br />Abilty: ";
                    echo stripslashes($row['ability']); 
                //}
                echo "<br />";
                $imageMinion = stripslashes($row['imagebig']);  

                // $iwidth = 25;
                // $iheight = 100;
                // echo '<img src="img/'.$imageMinion.'.png" style="width:'.$iwidth.'px;height:'.$iheight.'px;">';

                //echo "<br />";
                echo '<img src="img/'.$imageMinion.'.png">';
                echo "</p>"; 
```

有人可以指导我让它正确显示吗？我试图遵循其他解决方案，但似乎无法正确命名别名，如果我认为这是解决方案是正确的。

========编辑关于verbumSapienti的答案===========

我很尴尬地无法让您的答案正常工作。这就是代码的外观。

```
 $query = "SELECT minions.name, minions.summon, minions.attack, minions.health, 
                      minions.race, minions.rarity, minions.ability1, minions.ability2, 
                      minions.ability3, minions.ability4, minions.imagebig, 
                      ability.ability 
                      AS ability 
                      FROM minions 
                      INNER JOIN ability 
                      ON minions.ability1 = ability.abilityid 
                      OR minions.ability2 = ability.abilityid 
                      OR minions.ability3 = ability.abilityid 
                      OR minions.ability4 = ability.abilityid"; 

            $result = $db->query($query);
            $num_results = $result->num_rows;
            echo "<p>Number of items found: ".$num_results."</p>";

            for ($i=0; $i <$num_results; $i++){
                $row = $result->fetch_assoc();

                $abilities = array('ability1', 'ability2', 'ability3', 'ability4');
                foreach($abilities as $ability)
                {
                    $q = "SELECT $ability FROM minions WHERE name={$row['name']}";
                    $result = $db->query($q);
                    $row2 = $result->fetch_assoc();
                    $abilitiesArr[] = $row2[$ability];
                }

                echo "<p><strong>";
                echo htmlspecialchars(stripslashes($row['name']));
                echo "</strong><br />Summoning cost: ";
                echo stripslashes($row['summon']);
                echo "<br />Attack: ";
                echo stripslashes($row['attack']);
                echo "<br />Health: ";
                echo stripslashes($row['health']);
                echo "<br />Race: ";
                echo stripslashes($row['race']);
                echo "<br />Rarity: ";
                echo stripslashes($row['rarity']);      

                foreach($abilitiesArr as $ability)
                    {
                        $q = "SELECT $ability FROM ability";
                        $result = $db->query($q);
                        $row = $result->fetch_assoc();
                        echo "<br />Ability: $row";
                    }  

                /*if (stripslashes($row['ability'] != NULL)){
                    echo "<br />Abilty: ";
                    echo stripslashes($row['ability']); 
                }*/

                echo "<br />";
                $imageMinion = stripslashes($row['imagebig']);          
                echo '<img src="img/'.$imageMinion.'.png">';                    
                echo "</p>";
            } 
```

我尝试过改变一些事情，但没有取得任何成功。照原样，我收到以下错误： `Fatal error: Call to a member function fetch_assoc() on a non-object in D:\Xampp\htdocs\ocduels\results.php on line 87`

这是： `$row2 = $result->fetch_assoc();`

在：

```
 $abilities = array('ability1', 'ability2', 'ability3', 'ability4');
                foreach($abilities as $ability)
                {
                    $q = "SELECT $ability FROM minions WHERE name={$row['name']}";
                    $result = $db->query($q);
                    $row2 = $result->fetch_assoc();
                    $abilitiesArr[] = $row2[$ability];
                } 
```

* * *

**::我对此的解决方案::** 这似乎有效。我认为它效率不高，但足以让我继续学习。谢谢大家的回复。这允许我找到一个“Minion”，并且当有超过 1 个带数据的外键时，只有一个“Minion”实例。

```
 $query =   "SELECT 
                        m.name as m_name, 
                        m.summon as m_summon, 
                        m.attack as m_attack,
                        m.health as m_health,
                        m.race as m_race,
                        m.rarity as m_rarity,
                        m.ability1 as m_ability1, 
                        m.ability2 as m_ability2, 
                        aa.ability as a_ability, 
                        ab.ability as b_ability,
                        m.imagebig as m_imagebig
                        FROM minions m
                        LEFT JOIN ability aa 
                        ON m.ability1 = aa.abilityid
                        LEFT JOIN ability ab
                        ON m.ability2 = ab.abilityid";                        

            $result = $db->query($query);
            $num_results = $result->num_rows;
            echo "<p>Number of items found: ".$num_results."</p>";

            for ($i=0; $i <$num_results; $i++){
                $row = $result->fetch_assoc();

                echo "<p><strong>";
                echo htmlspecialchars(stripslashes($row['m_name']));
                echo "</strong><br />Summoning cost: ";
                echo stripslashes($row['m_summon']);
                echo "<br />Attack: ";
                echo stripslashes($row['m_attack']);
                echo "<br />Health: ";
                echo stripslashes($row['m_health']);
                echo "<br />Race: ";
                echo stripslashes($row['m_race']);
                echo "<br />Rarity: ";
                echo stripslashes($row['m_rarity']);        

                if (stripslashes($row['a_ability'] != NULL)){
                    echo "<br />Ability 1: ";
                    echo stripslashes($row['a_ability']);
                }

                if (stripslashes($row['b_ability'] != NULL)){
                    echo "<br />Ability 2: ";
                    echo stripslashes($row['b_ability']);                                   
                }

                echo "<br />";
                $imageMinion = stripslashes($row['m_imagebig']);        
                echo '<img src="img/'.$imageMinion.'.png">';                    
                echo "</p>";
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:58:21.703

尝试 DISTINCT 关键字来限制重复值。

```
SELECT DISTINCT minions.name, minions.summon, minions.attack,
          minions.health, minions.race, minions.rarity, 
          minions.ability1, minions.ability2, minions.ability3, 
          minions.ability4, minions.imagebig, 
          ability.ability 
          AS ability FROM minions 
          INNER JOIN ability on 
          minions.ability1 = ability.abilityid 
          OR minions.ability2=ability.abilityid"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:04:37.997

您可以尝试一个子查询，该子查询仅打印每个仆从属性中包含的每个能力 ID 的能力文本，可能类似于以下内容：

```
$abilities = array('ability1', 'ability2', 'ability3', 'ability4');
foreach($abilities as $ability)
{
    $q = "SELECT $ability FROM minions WHERE name={$row['name']}";
    $result = $db->query($q);
    $row2 = $result->fetch_assoc()
    $abilitiesArr[] = $row2[$ability];
} 
```

然后替换

```
echo "<br />Abilty: ";
echo stripslashes($row['ability']); 
```

和

```
foreach($abilitiesArr as $ability)
{
    $q = "SELECT $ability FROM ability";
    $result = $db->query($q);
    $row = $result->fetch_assoc()
    echo "<br />Ability: $row";
} 
```

# angularjs - AngularJS 和谷歌云端点：遍历需要

> ID：15905755
> 
> 赞同：4
> 
> 时间：2013-04-09T15:14:10.107
> 
> 标签：angularjs, google-cloud-endpoints

我是 AngularJS 的新手，但我真的很喜欢 AngularJS 的工作方式，所以我想将它部署为我的 Google 云端点后端的客户端。然后我立即遇到两个问题：

1，将**myCallback**放在哪里，以便它能够在 ANGularJs 控制器中工作？

```
<script src="https://apis.google.com/js/client.js?onload=myCallback"></script> 
```

2，我怎么能做oauth2？控制器如何知道用户是否授权？

```
gapi.auth.authorize({client_id: myCLIENT_ID,
      scope: mySCOPES,..... 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T05:47:07.437

为了用 AngularJs 加载 Google Javascript 库，传递给 Google Javascript 库的 onLoad 的回调函数是引导 AngularJS 的函数，如下所示：

这进入了 html 文件的最后：

```
<script src="https://apis.google.com/js/client.js?onload=startApp"> 
```

然后，在`<head>`部分中你像这样引导角度：

```
<script type='text/javascript'>

function startApp() {

    var ROOT = 'http://<yourapi>.appspot.com/_ah/api';
    gapi.client.load('myapifromgoogleendpoint', 'version1', function() {
        angular.bootstrap(document, ["myModule"]);
    }, ROOT);
}

</script> 
```

**正如 Kenji 所述，您还需要从 html 中删除 ng-app 指令。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:28:24.113

关于回调 - 为了访问 Angular 控制器，您需要使用注入器（[http://docs.angularjs.org/api/AUTO](http://docs.angularjs.org/api/AUTO) .$injector）

只需创建一个全局回调函数，然后像这样从中获取对控制器的引用：

```
window.callbackFunction() {
  injector = angular.element(document.getElementById('YourController')).injector()
  injector.invoke(function ($rootScope, $compile, $document) {
    $rootScope.variable = "stuff you want to inject";
  })
} 
```

在此示例中，我将数据注入到 rootScope，但这也适用于特定的控制器范围（只需注入 $scope）

对第二个问题无能为力，因为我不熟悉 gapi，尽管从 angularjs 进行 auth2 调用非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T01:42:50.337

在这里，您可以详细了解如何将 angularjs 与 google 端点一起使用：

[https://cloud.google.com/developers/articles/angularjs-cloud-endpoints-recipe-for-building-modern-web-applications?hl=es](https://cloud.google.com/developers/articles/angularjs-cloud-endpoints-recipe-for-building-modern-web-applications?hl=es)

# asp.net-mvc - 为什么在 IIS7.5 上本地运行时缺少 _Layout.cshtml 的内容？

> ID：15905759
> 
> 赞同：0
> 
> 时间：2013-04-09T15:14:21.103
> 
> 标签：asp.net-mvc, iis-7.5, localhost

我正在本地测试一个 mvc4 站点并设置了我的主机文件/IIS，以便我可以从测试域名运行它。我正在按照这里的说明进行操作：http: [//ben.onfabrik.com/posts/oauth-providers](http://ben.onfabrik.com/posts/oauth-providers)

当我通过在 IIS 中设置的绑定域访问它时，它确实“工作”......但 _Layout.cshtml 的全部内容都丢失了。显示的只是来自被调用视图的 html。

当我使用调试器运行站点时，或者在实时托管时，它会按预期出现。所以我认为路径或使用 ViewStart 没有任何问题。

只有在通过域（绑定到 IIS 上的 localhost）访问它时，_Layout.cshtml 内容才会丢失。

关于为什么会发生这种情况以及如何解决它的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:23:37.360

这并不能回答问题，但在有人可以提供更好的回应之前，它可能会帮助处于类似位置的其他人。

我必须使用“调试”按钮从 VWD 运行该站点——该按钮在标准 .Net 开发服务器上运行该应用程序，它为您提供了一个端口号。

将该端口号添加到我的域名末尾使我的 _Layout.cshtml 显示。

例如[http://testdomain.com:54829/](http://testdomain.com:54829/)

# php - 计算 MySQL 中的特定行

> ID：15905760
> 
> 赞同：0
> 
> 时间：2013-04-09T15:14:22.073
> 
> 标签：php, mysql

如果我想`unread`在我的数据库中计算一个特定的行（），我应该如何继续这个 MySQL 查询？截至目前，它计算了整张桌子。

```
$result_notifications = mysql_query("select count(1) FROM bhost_notifications where taker_id='$user_info[u_id]'");
$row_notifications = mysql_fetch_array($result_notifications);
$total_notifications = $row_notifications[0]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:15:37.293

您需要别名列。

```
SELECT COUNT(1) AS count ... 
```

然后你会打电话给`$row_followers[count]`. 请注意，`mysql_`函数已被弃用。了解传递变量时[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:20:02.860

我怀疑你有一个未规范化的数据库。虽然这在某些情况下是可取的，但我怀疑它们在你的情况下。如所写，您不能确定查询是否会返回您想要的行。SQL 不保证行的顺序，除非您使用 order by 子句。

似乎这个问题表明了一些语法问题的更多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:48:12.130

随着时间的推移，我用 PHP 编写了一个不错的函数，它允许我轻松地查找记录，但仍然足够动态，可以在我执行的每种类型的查询中使用。

用法：

```
if (get("select * from table", $query_array) > 0)
{
 // There is at least one row returned
 $result_array = mysql_fetch_array($query_array);
 .
 .
 .
} else {
 // No rows in the set
} 
```

功能：

```
function get($sql, &$array)
{
 $array = "";
 $q = mysql_query($sql);
 if (mysql_error())
 {
  $ret = -1;
  print "<div><font style='font-family: arial; font-size: 12px;'><font style='color: red;'>Error:</font> " . mysql_error() . "<br>SQL: #sql</font></div>";
  exit(1);
 } else {
  $ret = mysql_num_rows($q);
  if ($ret > 0)
  {
   $array = $q;
  }
 }
 return $ret;
} 
```

如果查询有问题，这也会给出格式化的错误消息。我一直使用它，因为它将 mysql_query 和 mysql_num_rows 一起压缩成一个命令。

# authentication - Tomcat 7：对多个 webapps 使用多个 UserDatabaseRealms 进行身份验证

> ID：15905762
> 
> 赞同：1
> 
> 时间：2013-04-09T15:14:36.067
> 
> 标签：authentication, tomcat

在同一台服务器上，我需要部署同一个 webapp 的两个版本（一个用于生产，另一个用于验证）。

这两个 webapp 使用不同数据库的身份验证。我正在为这两个应用程序实现两个不同的上下文而苦苦挣扎。

我在*server.xml*中实现了以下代码，但身份验证不再起作用：

```
 <Context path="http://localhost:8080/myapp1" docBase="/path/webapps/myapp1.war" debug="0" privileged="true">

          <!--For clustering, please take a look at documentation at:
              /docs/cluster-howto.html  (simple how to)
              /docs/config/cluster.html (reference documentation) -->
          <!--
          <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
          -->

        <Realm className="org.apache.catalina.realm.LockOutRealm">
            <!-- This Realm uses the UserDatabase configured in the global JNDI
            resources under the key "UserDatabase".  Any edits
            that are performed against this UserDatabase are immediately
            available for use by the Realm.  -->
            <Realm className="org.apache.catalina.realm.JDBCRealm"
                driverName="org.postgresql.Driver" digest="MD5"
                connectionURL="jdbc:postgresql://localhost/postgres_prod?user=postgres&amp;password=postgres"
                userTable="utilisateurs" userNameCol="login" userCredCol="password"
                userRoleTable="user_roles" roleNameCol="role_name" resourceName="UserDatabase"/>

            <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
        </Realm>
    </Context>

    <Context path="http://localhost:8080/myapp2" docBase="/path/webapps/myapp2.war" debug="0" privileged="true">

          <!--For clustering, please take a look at documentation at:
              /docs/cluster-howto.html  (simple how to)
              /docs/config/cluster.html (reference documentation) -->
          <!--
          <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
          -->

        <Realm className="org.apache.catalina.realm.LockOutRealm">
            <!-- This Realm uses the UserDatabase configured in the global JNDI
            resources under the key "UserDatabase".  Any edits
            that are performed against this UserDatabase are immediately
            available for use by the Realm.  -->
            <Realm className="org.apache.catalina.realm.JDBCRealm"
                driverName="org.postgresql.Driver" digest="MD5"
                connectionURL="jdbc:postgresql://localhost/postgres_val?user=postgres&amp;password=postgres"
                userTable="utilisateurs" userNameCol="login" userCredCol="password"
                userRoleTable="user_roles" roleNameCol="role_name" resourceName="UserDatabase"/>

            <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
        </Realm>
    </Context> 
```

我不明白是否需要更改*web.xml*或*tomcat-users.xml*中的其他内容。当我只使用一个应用程序测试它时（当我不需要*上下文*标签时），身份验证工作。

预先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:52:07.377

我在两个应用程序的*context.xml*文件中移动了两个*Context*标签的内容。*另一个已解决的问题：使用server.xml*中的这部分代码，我无法以 tomcat 管理器的身份登录。

# java - 如何从 Java SE 应用程序中使用嵌入式 openejb？

> ID：15905765
> 
> 赞同：1
> 
> 时间：2013-04-09T15:14:53.387
> 
> 标签：java, java-ee-6, openejb

我正在编写一个小型 Java 库，旨在用于 Web 应用程序以及 Java 控制台应用程序。

为了从 CDI 和其他 javaEE 6 功能中获益，并且不必维护库的两个版本（java EE 和 java SE），我想为控制台应用程序使用 openejb（嵌入式）。所以我在eclipse中建立了一个maven项目并添加了openejb工件。

不知何故，我只是不知道如何使控制台程序使用 openejb-container，即解决我的注入和其他 javaEE 功能。

假设我有两个非常简单的类：

```
@Stateless
Class A {

    @Inject
    public B member;

    public A() {};

} 
```

和

```
@Stateless
Class B {

    public B() {};

    public String getString () {
        return "Hello";

    }

} 
```

那么，我将如何获得一个带有 main() 方法的普通 Java 类，使用嵌入式 openejb 实例化 A 的成员？- 以某种方式：

```
public class TestOpenEJB {

    public static void main(String[] args) {

        Class A a = new A(); /*wrong of couse*/

        System.out.println( a.member.getString() );

    }
} 
```

这个简单示例的工作解决方案会很有帮助。

最后，我的目标是为在内部使用嵌入式 javaEE 容器的库提供 java SE api。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:48:03.570

除了我的评论，我认为您的问题可以通过以下方式回答：

继续使用 EJB 对库的行为进行建模（如代码示例所示）。这是一个很好的方法，因为容器关心池、并行访问、事务等。

然后您的 Web 应用程序（假设它在同一个容器中）可以直接使用这些 EJB。

对于通过控制台应用程序访问它，您可以在应用程序客户端容器中运行它（这比尝试在应用程序中嵌入容器更可取），或者（我建议）以其他方式公开您的业务逻辑（例如通过 REST）并在独立的客户端应用程序中使用它。

PS：要使用 DI 机制集成测试您的业务逻辑，请使用[Arquillian](http://arquillian.org/)。

# ios - 解释 UINavigationController 的 navigationItem 属性

> ID：15905768
> 
> 赞同：0
> 
> 时间：2013-04-09T15:15:10.600
> 
> 标签：ios, uinavigationcontroller

当我阅读 UINavigationController 的 api 文档时，属性 navigationItem 有一个提示：

*避免将导航项中条形按钮项的创建与视图控制器视图的创建联系起来*

我不明白这是什么意思，谁能详细解释一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:38:00.980

这可能是最近才添加到文档中的，因为我今天第一次偶然发现了这个。此外，在我看到的几乎所有示例代码中，条形按钮的初始化都发生在 viewDidLoad 方法中——根据引用的语句，这显然不是执行此操作的最佳位置。

Apple 告诉我们的是，当 viewDidLoad 方法尚未执行或根本没有执行时，可能会请求 navigationItem 的内容。当您一次推送多个视图控制器时会发生这种情况。例如，通过使用*setViewControllers:animated:*接口或执行以下操作：

```
ViewController1 *firstViewController = [[ViewController1 alloc] init];
ViewController2 *secondViewController = [[ViewController2 alloc] init];
[navigationController pushViewController:firstViewController animated:YES];
[navigationController pushViewController:secondViewController animated:YES]; 
```

在这种情况下，直到用户导航回*firstViewController的 viewDidLoad 方法才会被调用。*如果您在*firstViewController中设置了**title*属性，您会希望后退按钮带有您在*firstViewController*中设置的标题标签。然而，返回按钮将被称为“返回”，因为当 UINavigationController 请求它时*firstViewController的 title 属性为零。*

 ***结论是：将条形按钮项的创建与视图的创建联系起来适用于大多数情况。不过请记住，您可能会遇到在创建视图之前或不创建视图之前需要导航项信息的情况。在这种情况下，请考虑在 viewcontrollers 的*init*方法中初始化*navigationItem属性。****

# c++ - malloc 和 snprintf 总线核心转储

> ID：15905776
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:15:27.233
> 
> 标签：c++, c, unix, malloc, solaris

以前工作的功能，突然拒绝合作。更准确地说，这个片段：

```
 //If not, add to UIDS
    printf("line 78\n");
    free(s2);
    printf("line 82\n");
    char * ss = malloc(snprintf(NULL, 0, "%s:%d", myUIDs, userId) + 1);
    printf("line 84\n");
    sprintf(ss, "%s:%d", myUIDs, userId);
    free(myUIDs);
    myUIDs=ss;
    free(buffer); 
```

程序在“第 82 行”（不再是第 82 行，但它只是一个调试停止）之后的一行失败，带有`Segmentation Fault (core dumped)`. 如果我改变

`char * ss = malloc(snprintf(NULL, 0, "%s:%d", myUIDs, userId) + 1);`至

`char * ss = malloc(snprintf(NULL, 0, "%s:%d", "", 1) + 1);`

我得到`Bus Error: Code dumped`了。我在这个程序上工作了很长时间，我有一种很明显的感觉，我经常因为疲惫而忽略，但目前没有程序员朋友寻求帮助。

上下文的整个函数：

```
char* myUIDs; //string containing all UID-s, separated by colon

void printProcessInformation(char pid[],int isSetP, int isSetN, int isSetU){
//find full path name to your "stat" file
//DIR *dir;
//struct dirent *ent;
//Creating string with /proc/PID
char * s = malloc(snprintf(NULL, 0, "%s%s", "/proc/", pid) + 1);
sprintf(s, "%s%s", "/proc/", pid);
//Creating string with /proc/PID/psinfo (full path)
char * fullPath = malloc(snprintf(NULL, 0, "%s%s", s, "/psinfo") + 1);
sprintf(fullPath, "%s%s", s, "/psinfo");
free(s);
//printf("%s\n",fullPath);

//Reading data from file
FILE* file = fopen(fullPath, "r");
printf("line 37\n");
char* buffer;
buffer = (char*) malloc(sizeof(psinfo_t));
printf("line 40\n");
if(file == NULL)
{
    //perror("Error: Couldn't open file");
    return;
}
fread((void *)buffer, sizeof(psinfo_t), 1, file);
psinfo_t* pData = (psinfo_t*) buffer;
time_t sTime=pData->pr_start.tv_sec; 
int pr_pid=pData->pr_pid;
char* fname=pData->pr_fname;
free(buffer);
buffer = (char*) malloc(sizeof(stat));
stat(fullPath,buffer);
struct stat* fileStat=(struct stat*) buffer;
fclose(file);
int userId=fileStat->st_uid;
struct passwd* pw=getpwuid(userId);
char* uid=pw->pw_name;
printf("line 58\n");
if(isSetU<0){
    //Print results
    printf("%8s", uid);
    if(isSetP>0)
    printf(" %5d",pr_pid);
    printf(" %16s %.24s\n", fname, ctime(&sTime));
    free(buffer);
}else{
    //Or else, add UID to UIDS if it didn't appear before
    //check if UID is in UIDS
    printf("line 70\n");
    char * s2 = malloc(snprintf(NULL, 0, "%s:%d", "", userId) + 1);
    printf("line 72\n");
    snprintf(s2, "%s:%d", "", userId);
    if(strstr(myUIDs,s2)!=NULL){
        free(s2);
        free(buffer);
        return;
    }
    //If not, add to UIDS
    printf("line 78\n");
    free(s2);
    printf("line 82\n");
    char * ss = malloc(snprintf(NULL, 0, "%s:%d", "", 1) + 1);
    printf("line 84\n");
    sprintf(ss, "%s:%d", myUIDs, userId);
    free(myUIDs);
    myUIDs=ss;
    free(buffer);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:18:17.293

我在进一步审查时看到了几个问题......

简而言之，您遇到的错误似乎不是您正在执行的行的结果，而是先前内存损坏的副作用。

1.  你在哪里初始化`myUIDs`？如果尚未根据提供的代码定义它，您似乎可以访问它

2.  您正在分配`fname`from `pData`which 是指向动态分配的`buffer`...的指针，您随后在下一行执行时将其释放，这意味着它`fname`现在指向已释放的内存。然而，您稍后会尝试在代码中读取它......这很可能会引导您随机浏览内存。

3.  代码中有多个实例，您在其中动态分配内存，然后尝试使用它而不验证您是否确实获得了您请求的分配。

4.  您是`malloc()`根据返回值调用的，`snprintf()`而无需验证`snprintf()`返回非负值。虽然，我怀疑这是一个问题，但这是不明智的。

可以肯定的是，您所描述的症状是堆损坏的结果。问题是在哪里。我强烈推荐使用 valgrind。

此外，如果可用，请查看`asprintf()`而不是`malloc( snprintf() )`您正在做的工作。

# mongodb - 按两个交换字段分组的查询

> ID：15905777
> 
> 赞同：0
> 
> 时间：2013-04-09T15:15:27.350
> 
> 标签：mongodb, mongoid

我收集`messages`了以下文件

```
{
  "_id" : ObjectId("5164218f359f109fd4000012"),
  "receiver_id" : ObjectId("5164211e359f109fd4000004"),
  "sender_id" : ObjectId("5162de8a359f10cbf700000c"),
  "body" : "Hello Billy!!!",
  "readed" : false,
  "updated_at" : ISODate("2013-04-09T14:11:27.17Z"),
  "created_at" : ISODate("2013-04-09T14:11:27.17Z")
} 
```

我需要查询给定用户（按reciever_id+sender_id 字段分组）并按created_at 排序的接收最后一条消息（不管是接收还是发送）。

为了更好地解释这个问题，我在 SQL 中是如何做到的一个例子：

```
SELECT DISTINCT ON (sender_id+receiver_id) * FROM messages 
    ORDER by (sender_id+receiver_id), created_at DESC
    WHERE sender_id = given_user or receiver_id = given_user 
```

我不明白如何用mondodb解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:41:53.233

MongoDB 2.2+ 中的[聚合框架](http://docs.mongodb.org/manual/core/aggregation/)为您的查询提供了最明显的翻译。MongoDB 手册包含一个[SQL 到聚合框架映射图表](http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/)作为一般指南，尽管这两种方法存在明显差异。

这是一个注释示例，您可以在`mongo`shell 中尝试：

```
var given_user = ObjectId("5162de8a359f10cbf700000c");
db.messages.aggregate(
    // match: WHERE sender_id = given_user or receiver_id = given_user
    // NB: do the match first, because it can take advantage of an available index
    { $match: {
        $or:[
            { sender_id: given_user },
            { receiver_id: given_user },
        ]
    }},

    { $group: {
        //  DISTINCT ON (sender_id+receiver_id)
        _id: { sender_id: "$sender_id", receiver_id: "$receiver_id" }
    }},

    // ORDER by (sender_id+receiver_id), created_at DESC
    { $sort: {
        sender_id: 1,
        receiver_id: 1,
        created_at: -1
    }}
) 
```

样本结果：

```
{
    "result" : [
        {
            "_id" : {
                "sender_id" : ObjectId("5162de8a359f10cbf700000c"),
                "receiver_id" : ObjectId("5164211e359f109fd4000004")
            }
        }
    ],
    "ok" : 1
} 
```

您可能希望在分组上添加其他字段，例如收到的消息计数。

如果你真的想将 sender_id+receiver_id 组合成一个字段，你可以使用[`$concat`](http://docs.mongodb.org/manual/reference/aggregation/#exp._S_concat)MongoDB 2.4+ 中的操作符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:28:20.603

没有明确的方法可以这样做。让我们回顾一下解决方法：

方式1：在代码级别（在find之后）执行distinct，然后只需使用`find`：

```
db.message.find({$or:[{sender_id:?}, {receiver_id:?}]}) 
```

方式2：使用聚合框架：

```
db.message.aggregate( [
   {$match: {$or:[{sender_id:?}, {receiver_id:?}]},
    $group: { _id: {sender:"$sender_id", receiver:"$receiver_id"},
               other: { ... } } },
   $sort: {sender_id,receiver_id,...}
   ] ) 
```

这种方式问题出现在排序级别，因为`sender_id, receiver_id` 与`sender_id+receiver_id`

方式 3：引入代理字段 sender_id+receiver_id 然后使用`find`或什`distinct`至根据 Stennie 提示。

# jquery - Jquery ajax方法调用Web服务接收403禁止

> ID：15905778
> 
> 赞同：0
> 
> 时间：2013-04-09T15:15:36.053
> 
> 标签：jquery, xml, ajax, json, web-services

我有一个带有以下 ajax 方法的 html 页面：

```
$(document).ready(function() {
            $.ajax({
                type: "POST",
            url: "http://www.webservice.com/blahblah.asmx/blahb123",
            data: "tnWsGuid=TEST1",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
                success: function(msg)
                {
                    alert("sucess")
                },
                error: function(e)
                {
                    alert(JSON.stringify(e));                       
                }
                });
        }); 
```

这是返回给我的 403 禁止。一位同事构建了 Web 服务，我无法访问代码，也无法在他休假时更改它。我需要显示这些数据——此时我尝试的一切都失败了，并给了我一个 403 禁止错误。为了显示代码，我已将 url 名称和成功函数更改为警报对话框。

另一件事是 json 似乎被包装在 XML 中，来自一个看起来像这样的 ASP.NET 网络服务：

```
<string xmlns="http://Walkthrough/XmlWebServices/">
{"approverName":"","emailAddress":"","companyName":"ABC","address":{"streetAddress1":"12 BlahBlah","streetAddress2":"","state":"ON","zipCode":"","country":"SO","phoneNumber":""},"tabledata:"[{"vendorPart":"AAAAA","partDescription":"N/A","price":"0.00","quantity":"28"},{"vendorPart":"BBBBBBB","partDescription":"N/A","price":"0.00","quantity":"3"},{"vendorPart":"CCCCCC","partDescription":"N/A","price":"0.00","quantity":"25"}]}
</string> 
```

这不是最初的意图，因为我期望接收 json 但是我现在对此无能为力，必须用 XML 处理它，然后尝试将内部格式化的 json 转换为 json 对象。

我也尝试过以下方法：

```
$(document).ready(function() {
                $.ajax({
                    type: "GET",
                url: "http://www.webservice.com/blahblah.asmx/blahb123",
                data: "tnWsGuid=TEST1",
                dataType: "xml",
                contentType: "text/xml",
                    success: function(msg)
                    {
                        alert("sucess")
                    },
                    error: function(e)
                    {
                        alert(JSON.stringify(e));                       
                    }
                    });
            }); 
```

最后，我将在此处为我尝试过的两个示例输出 FireFox 的 Firebug 响应（json/xml）

json：http: [//i.imgur.com/zJy4BvD.jpg](http://i.imgur.com/zJy4BvD.jpg)

XML：http: [//i.imgur.com/6qiGVwQ.jpg](http://i.imgur.com/6qiGVwQ.jpg)

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:24:04.287

如果调用是跨域的，如果您不使用 dataType jsonp，您可能会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:13:35.933

那么删除 contentType 标头似乎可以删除 403 禁止。

# asp.net-mvc - 如何更改脚手架输出文件夹？

> ID：15905781
> 
> 赞同：1
> 
> 时间：2013-04-09T15:15:43.197
> 
> 标签：asp.net-mvc, asp.net-mvc-scaffolding

我似乎无法确定**-Folder**选项是否已从 ASP.NET MVC 的 MvcScaffolding 包中删除。这两个链接表明它用于更改脚手架创建的项目的输出文件夹：

[http://blog.stevensanderson.com/2011/01/13/mvcscaffolding-standard-usage/](http://blog.stevensanderson.com/2011/01/13/mvcscaffolding-standard-usage/)

[如何更改 MvcScaffolding 生成控制器、视图和存储库的项目和文件夹](https://stackoverflow.com/questions/14318159/how-to-change-project-and-folder-where-mvcscaffolding-generates-controllers-vie)

我将 VS2010 中的包管理器控制台用于 MVC3 项目。当我在搭建存储库时尝试更改输出文件夹时，当我输入“-”并按 Tab 时出现的选项列表中没有 -Folder 选项。听起来最接近我需要的选项是：

*   模板文件夹
*   覆盖模板文件夹
*   管道输出

但是我也找不到关于这些真正做什么的好文档（我尝试过它们，但实际上无法说出它们做了什么）。我错过了一些明显的东西吗？谢谢！

# .net - 如何安装/部署 .NET DLL 使其出现在 Visual Studio 添加引用

> ID：15905782
> 
> 赞同：0
> 
> 时间：2013-04-09T15:15:47.507
> 
> 标签：.net, visual-studio-2010, visual-studio-2012, installation

我正在尝试打包一组已编译的 .NET DLL。这些包括 x86。x64 和 AnyCPU 构建相同的库（相同的 DLL 名称、不同的版本号和目标平台）。

但是，我正在使用[Advanced Installer](http://www.advancedinstaller.com/) - 假设安装程序不可知的环境，在最终用户安装我的 MSI 后，如何确保我的 DLL 显示在 Visual Studio Add-References 对话框中？

针对 VS2010 和 VS2012。感激地收到任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:24:48.273

我发现要使程序集对 VS2012 中的参考管理器可见，我需要添加此注册表项

```
Key: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.0.30319\AssemblyFoldersEx\MyAsm
Value: <Directory on target PC of .NET4.0 assembly> 
```

对于.NET4.5，我需要这个密钥

```
Key: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.5.50709\AssemblyFoldersEx\MyAsm
Value: <Directory on target PC of .NET4.5 assembly> 
```

然而，这会导致在使用 .NET4.5 时出现两个 DLL 的另一个问题（[在此处描述](https://stackoverflow.com/questions/15921846/how-to-install-net4-0-net4-5-x86-anycpu-dlls-side-by-side-in-visual-studio)）

# paypal - 将贝宝沙盒账户转换为真实账户

> ID：15905783
> 
> 赞同：1
> 
> 时间：2013-04-09T15:15:47.573
> 
> 标签：paypal, paypal-sandbox

我目前正在使用 PayPal Sandbox 凭据来测试我的项目。

现在我想将沙盒环境更改为实时环境，并且我在 c# .Net 中使用 NVP

```
NVPCallerServices caller = new NVPCallerServices();

IAPIProfile profile = ProfileFactory.createSignatureAPIProfile();

 profile.APIUsername = APIUserName;
 profile.APIPassword = APIPAssword;
 profile.APISignature = APISignature;
 **profile.Environment = "live";**
 caller.APIProfile = profile; 
```

任何其他需要更改或只是将“沙箱”更改为“实时”的东西都可以使用

问候，

达尔梅什·索兰基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:02:50.597

您需要更改环境，并且需要更新您的 API 凭证以反映您的真实账户。

# mysql - 糟糕的 MYSQL 设计以及如何改进它

> ID：15905788
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:15:55.287
> 
> 标签：mysql

我在整理数据库时遇到以下问题，当我开始混合 Mysql、手写信封笔记、Excel 电子表格和完全丢失的记录（不要问）时，我现在已将问题减少到下列的。

我有 4 个非常简化的表格，它们是：-

```
customers
---------
id int not null primary key,
name varchar(50) 

users
---------
id2 int not null primary key,
name varchar(50)

address
-------
id int, 
id2 int, 
country varchar(50)

product
-------
id int, 
id2 int, 
item varchar(50) 
```

样本数据：

示例从客户中选择 *；

```
+----+------+ 
| id | name | 
+----+------+ 
|  1 | Fred | 
+----+------+ 
```

从用户中选择 *；

```
+----+---------+ 
|id2 | name    | 
+----+---------+ 
|  1 | Wilma   | 
|  2 | Pebbles | 
+----+---------+ 
```

从地址中选择 *；

```
+----+-----+---------+ 
| id | id2 | country | 
+----+-----+---------+ 
|  1 |  1  | Bedrock | 
|  1 |  2  | Bedrock | 
+----+-----+---------+ 
```

从产品中选择 *；

```
+----+-----+---------+ 
| id | id2 | item    | 
+----+-----+---------+ 
|  1 |  1  | Item1   | 
|  1 |  2  | Item2   | 
+----+-----+---------+ 
```

customers.id 是一个主键和 address.id 和 product.id 的链接

users.id2 是主键并链接到 address.id2 和 product.id2

这种安排在多个用户与客户共享地址的情况下失败，目前解决此问题的唯一方法是复制地址中的记录并更改 id2 号码。目前这只影响数据库中的一个案例。

在用户不与客户共享地址的情况下，我无法制定一个选择语句，该语句将找到客户姓名、客户地址、用户姓名和用户地址。这种情况适用于大约 30% 的记录。

任何关于如何解决这种混乱的建议都将受到欢迎。

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:45:51.683

总结一下我认为您所描述的内容：一个地址可以由多个用户共享，但一个用户/客户只能有一个地址。

听起来你的多对一关系倒退了。

这意味着，您在地址表中有一个指向客户/用户的外键，而您真正想要的是指向地址的客户/用户表中的外键。但这有点难看......所以你可以用几种方法来清理它：

客户也是用户吗？如果是这样，在 Address 中有一个指向 User 的外键，并且从 User 到 Customer 的外键将是相当干净的。

如果没有，您可能会考虑使用一个连接用户/客户和地址的表。像这样的东西：

```
User_Cust_ID,    Type,       Address_ID
1                Customer    5
2                Customer    1
1                User        1 
```

这将允许您解析共享相同地址的用户和客户。

HTH...

# angularjs - 如何使用来自 ng-grid 的更改数据更新我的服务器？

> ID：15905794
> 
> 赞同：0
> 
> 时间：2013-04-09T15:16:03.573
> 
> 标签：angularjs

我已经编写了从示例中复制的以下代码：

```
 var cellEditableTemplate = "<input style=\"width: 90%\" step=\"any\" type=\"text\" data-ng-class=\"'colt' + col.index\" data-ng-input=\"COL_FIELD\" data-ng-blur=\"updateEntity(col, row)\"/>";

    // Configure ng-grid
    $scope.gridOptions = {
        data: 'myData',
        enableCellEdit: true,
        multiSelect: false,
        columnDefs: [
            { field: 'Id', displayName: 'Id' },
            { field: 'Name', displayName: 'Name', enableCellEdit: true, editableCellTemplate: cellEditableTemplate },
            { field: 'Description', displayName: 'Description', enableCellEdit: true, editableCellTemplate: cellEditableTemplate }
        ]
    };

    // Update Entity on the server side
    $scope.updateEntity = function (column, row) {
        console.log(row.entity);
        console.log(column.field);
        // code for saving data to the server...
        // row.entity.$update() ... <- the simple case
    } 
```

一切正常，正确的数据被记录到控制台。

现在我需要了解如何更新服务器上的数据。该示例的创建者建议

```
row.entity.$update() 
```

有人可以帮我吗。这是一个属于 ng-grid 的函数吗？如果不是，那么我如何实现 $update 以通过 http 更改服务器上的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:53:14.947

现在您知道了列、行和新值，您可以使用 $http 或 $resource 甚至 jQuery.ajax 来更新您的模型。

# sql-server - 如何在 PowerShell 中获取 SQL Server Management Studio 选项卡消息？

> ID：15905799
> 
> 赞同：0
> 
> 时间：2013-04-09T15:16:19.937
> 
> 标签：sql-server, powershell

使用 Powershell，我执行一个 SQL 脚本，该脚本在 SQL Server Management Studio 的“消息”选项卡中返回一个生成的脚本。但我无法在 PowerShell 中获得它。

当我这样做时：

```
$ps = [PowerShell]::Create()
[ref]$e = New-Object System.Management.Automation.Runspaces.PSSnapInException
$ps.Runspace.RunspaceConfiguration.AddPSSnapIn( "SqlServerCmdletSnapin100", $e ) | Out-Null
$ps.AddCommand( "Invoke-Sqlcmd" ).AddParameter( "ServerInstance", "localhost").AddParameter( "Database", "MyDatabase").AddParameter("InputFile", "D:\MyScript.sql").AddParameter("Verbose")
$ps.Invoke()
$ps.Streams
$ps.Streams.Verbose | % { $_.Message | Out-File -Append D:\SqlLog.txt } 
```

我收到此错误：

```
PS D:\NEMO\Scripts\Database> $ps.Invoke()
Exception calling "Invoke" with "0" argument(s): "Object reference not set to an instance of an object."
At line:1 char:11
+ $ps.Invoke <<<< ()
    + CategoryInfo          : NotSpecified: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : DotNetMethodException 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:28:04.960

所以让Powershell输出消息并不是那么简单，我认为它只能在命令行中工作。尝试这个

```
write-host $line
    Start-Transcript $outputfilepath
    $ScriptParams = "DatabaseName=$line" "
    Invoke-Sqlcmd -ServerInstance $SQLInstance -Username $SQLAdminUser -Password $SQLAdminPwd -InputFile "D:\File.sql" -verbose -Variable $ScriptParams 
    Stop-Transcript 
```

# c# - c# 列表 加法

> ID：15905802
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:16:26.067
> 
> 标签：c#, list, class

我有以下课程；

```
 abstract class People
    {
    string name;
    bool disabled;
    string hometown;

    Hometown referenceToHometown;

    // default constructor
    public People()
    {
        name = "";
        disabled = false;
        hometown = "";
    } 
```

我想向其中添加数据，以便稍后在表单上显示 - 经过研究，我有了这个，但出现了一些错误“无效令牌'='”

```
namespace peoplePlaces
{
public partial class frm_people : Form
{
        List<People> people = new List<People>();

        People data = new ();
        data.name = "James";
        data.disabled = false;
        data.hometown = "Cardiff"

        people.Add(data);
} 
```

}

这是向类添加数据的更简洁的方法吗？这样做是否可以制作一个表格来循环记录？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:18:34.157

您可以使用静态方法执行这种初始化：

```
public partial class frm_people : Form
{
    List<People> people = CreatePeople();

    private static List<People> CreatePeople()
    {
        var list = new List<People>();

        People data = new People();
        data.name = "James";
        data.disabled = false;
        data.hometown = "Cardiff";

        list.Add(data);

        return list;
    }
} 
```

当然，你的`People`类型必须是非抽象的，或者你必须创建一个非抽象派生类型的实例；现在您不能创建`People`using的实例`new People()`，因为该类被标记为抽象。

如果您使用的是足够现代的 C#，则可以仅使用初始化构造来执行此操作：

```
public partial class frm_people : Form
{
    List<People> people = new List<People>() {
        new People() {
            name = "James",
            disabled = false,
            hometown = "Cardiff"
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:23:06.253

修改了您要执行的操作的代码：

```
public class People
{
    public string Name { get; set; }
    public bool Disabled { get; set; }
    public string Hometown { get; set; }

    Hometown referenceToHometown;

// default constructor
public People()
{
    name = "";
    disabled = false;
    hometown = "";
}

public People(string name, bool disabled, string hometown)
{
    this.Name = name;
    this.Disabled = disabled;
    this.Hometown = hometown
} 
```

还有你的页面代码：

```
namespace peoplePlaces
{
   public partial class frm_people : Form
   {
        // This has to happen in the load event of the form, sticking in constructor for now, but this is bad practice.

        public frm_people()
        {
        List<People> people = new List<People>();

        People data = new Person("James", false, "Cardiff");

        // or

        People data1 = new Person { 
          Name = "James", 
          Disabled = false, 
          Hometown = "Cardiff"
        };

        people.Add(data);
        }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:24:02.613

您的 People 类看起来可能是您在 C# 中的第一个类。您应该从小处着手，仅在需要时添加功能：

```
class People
{
  string Name { get; set; }
  bool Disabled { get; set; }
  string Hometown { get; set; }
  Hometown ReferenceToHometown { get; set; }
} 
```

然后你可以这样称呼它：

```
People data = new People() { Name = "James", Disabled = false, Hometown = "Cardiff" }; 
```

如果您需要抽象类和构造函数，则应在需要时添加它们。

# wordpress - 在 WooCommerce 上添加任何类别时产品消失

> ID：15905804
> 
> 赞同：0
> 
> 时间：2013-04-09T15:16:27.117
> 
> 标签：wordpress, woocommerce

有谁之前经历过这个吗？这是我第一次与 WooCommerce 合作。

如果我不将产品添加到类别中，它们将显示在主商店页面中并且只有一个产品页面，只要我添加一个类别，它们就不会显示在主商店页面、类别页面上，或单个产品页面。

我没有在页面上以任何方式操作 wp_query。

我将它集成到我的自定义主题中，这真的是准系统，我唯一改变的是我的 functions.php 文件中的以下内容：

```
remove_action( 'woocommerce_before_main_content', 'woocommerce_output_content_wrapper', 10);
remove_action( 'woocommerce_after_main_content', 'woocommerce_output_content_wrapper_end', 10);
add_action('woocommerce_before_main_content', 'urbantac_wrapper_start', 10);
add_action('woocommerce_after_main_content', 'urbantac_wrapper_end', 10);
function urbantac_wrapper_start() { echo '<div id="products-content" class="products wrap clearfix aligncenter content-container">'; }
function urbantac_wrapper_end() { echo '</div>'; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:19:54.873

我正在使用另一个 WooCommerce 插件： [http](http://www.woothemes.com/products/catalog-visibility-options/) ://www.woothemes.com/products/catalog-visibility-options/关闭 WooCommerce 的“商店”功能并将其用作“目录”

这会在产品类别页面上添加两个设置，并将默认设置为不向任何人显示内容（不知道为什么会这样）。设置为角色可见性规则和位置可见性规则。它在插件文档中的任何地方都没有提到这一点！

因此，如果您使用此插件，您将无法再直接从产品页面创建类别，您必须先创建类别，设置可见性规则，然后再创建产品。

# r - 将字符串列拆分为几个虚拟变量

> ID：15905806
> 
> 赞同：11
> 
> 时间：2013-04-09T15:16:33.757
> 
> 标签：r, string, split, data.table, dummy-variable

作为 R 中 data.table 包的相对缺乏经验的用户，我一直在尝试将一个文本列处理成大量指示符列（虚拟变量），每列中的 1 表示特定的子字符串是在字符串列中找到。例如，我想处理这个：

```
ID     String  
1       a$b  
2       b$c  
3       c 
```

进入这个：

```
ID     String     a     b     c  
1       a$b       1     1     0  
2       b$c       0     1     1  
3        c        0     0     1 
```

我已经弄清楚如何进行处理，但是运行时间比我想要的要长，而且我怀疑我的代码效率低下。下面是我的带有虚拟数据的代码的可复制版本。请注意，在实际数据中，要搜索的子字符串超过 2000 个，每个子字符串大约 30 个字符长，可能多达几百万行。如果需要，我可以并行化并在问题上投入大量资源，但我想尽可能优化代码。我曾尝试运行 Rprof，但没有发现（对我而言）明显的改进。

```
set.seed(10)  
elements_list <- c(outer(letters, letters, FUN = paste, sep = ""))  
random_string <- function(min_length, max_length, separator) {  
    selection <- paste(sample(elements_list, ceiling(runif(1, min_length, max_length))), collapse = separator)  
    return(selection)  
}  
dt <- data.table(id = c(1:1000), messy_string = "")  
dt[ , messy_string := random_string(2, 5, "$"), by = id]  
create_indicators <- function(search_list, searched_string) {  
    y <- rep(0, length(search_list))  
    for(j in 1:length(search_list)) {  
        x <- regexpr(search_list[j], searched_string)  
        x <- x[1]  
        y[j] <- ifelse(x > 0, 1, 0)  
    }  
    return(y)  
}  
timer <- proc.time()  
indicators <- matrix(0, nrow = nrow(dt), ncol = length(elements_list))  
for(n in 1:nrow(dt)) {  
    indicators[n, ] <- dt[n, create_indicators(elements_list, messy_string)]  
}  
indicators <- data.table(indicators)  
setnames(indicators, elements_list)  
dt <- cbind(dt, indicators)  
proc.time() - timer  

user  system elapsed 
13.17    0.08   13.29 
```

**编辑**

感谢您的出色回应——所有这些都比我的方法要好得多。下面是一些速度测试的结果，对每个函数稍作修改，在我自己的代码中使用 0L 和 1L，将结果按方法存储在单独的表中，并标准化排序。这些是单次速度测试的经过时间（而不是许多测试的中位数），但较大的运行每次都需要很长时间。

```
Number of rows in dt     2K      10K      50K     250K      1M   
OP                       28.6    149.2    717.0   
eddi                     5.1     24.6     144.8   1950.3  
RS                       1.8     6.7      29.7    171.9     702.5  
Original GT              1.4     7.4      57.5    809.4   
Modified GT              0.7     3.9      18.1    115.2     473.9  
GT4                      0.1     0.4      2.26    16.9      86.9 
```

很明显，GeekTrader 方法的修改版本是最好的。我对每个步骤的作用仍然有些模糊，但我可以在闲暇时复习。尽管有点超出了最初的问题，但如果有人想解释 GeekTrader 和 Ricardo Saporta 的方法在哪些方面做得更有效，我以及将来访问此页面的任何人都将不胜感激。我特别有兴趣了解为什么某些方法比其他方法扩展得更好。

*****编辑#2*****

我试图用这个评论编辑 GeekTrader 的答案，但这似乎不起作用。我对 GT3 函数做了两个非常小的修改，a) 对列进行排序，这会增加少量时间，b) 将 0 和 1 替换为 0L 和 1L，这会加快速度。调用生成的函数 GT4。上表已编辑以添加不同表大小的 GT4 时间。显然是一英里的赢家，它具有直观的额外优势。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T17:25:15.393

**更新：版本 3**

找到了更快的方法。此功能还具有很高的内存效率。`lapply`由于循环内部发生的复制/分配以及结果，以前的功能很慢的主要原因`rbinding`。

在下面的版本中，我们预先分配了适当大小的矩阵，然后在适当的坐标处更改值，这使得它与其他循环版本相比非常快。

```
funcGT3 <- function() {
    #Get list of column names in result
    resCol <- unique(dt[, unlist(strsplit(messy_string, split="\\$"))])

    #Get dimension of result
    nresCol <- length(resCol)
    nresRow <- nrow(dt)

    #Create empty matrix with dimensions same as desired result
    mat <- matrix(rep(0, nresRow * nresCol), nrow = nresRow, dimnames = list(as.character(1:nresRow), resCol))

    #split each messy_string by $
    ll <- strsplit(dt[,messy_string], split="\\$")

    #Get coordinates of mat which we need to set to 1
    coords <- do.call(rbind, lapply(1:length(ll), function(i) cbind(rep(i, length(ll[[i]])), ll[[i]] )))

    #Set mat to 1 at appropriate coordinates
    mat[coords] <- 1    

    #Bind the mat to original data.table
    return(cbind(dt, mat))

}

result <- funcGT3()  #result for 1000 rows in dt
result
        ID   messy_string zn tc sv db yx st ze qs wq oe cv ut is kh kk im le qg rq po wd kc un ft ye if zl zt wy et rg iu
   1:    1 zn$tc$sv$db$yx  1  1  1  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
   2:    2    st$ze$qs$wq  0  0  0  0  0  1  1  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
   3:    3    oe$cv$ut$is  0  0  0  0  0  0  0  0  0  1  1  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
   4:    4 kh$kk$im$le$qg  0  0  0  0  0  0  0  0  0  0  0  0  0  1  1  1  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0
   5:    5    rq$po$wd$kc  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  1  1  1  0  0  0  0  0  0  0  0  0  0
  ---                                                                                                                    
 996:  996    rp$cr$tb$sa  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
 997:  997    cz$wy$rj$he  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0
 998:  998       cl$rr$bm  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
 999:  999    sx$hq$zy$zd  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
1000: 1000    bw$cw$pw$rq  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0 
```

Ricardo 建议的第 2 版基准测试（这是针对 250K 行的数据）：

```
Unit: seconds
 expr       min        lq    median        uq       max neval
  GT2 104.68672 104.68672 104.68672 104.68672 104.68672     1
  GT3  15.15321  15.15321  15.15321  15.15321  15.15321     1 
```

* * *

**版本 1** 以下是建议答案的版本 1

```
set.seed(10)  
elements_list <- c(outer(letters, letters, FUN = paste, sep = ""))  
random_string <- function(min_length, max_length, separator) {  
  selection <- paste(sample(elements_list, ceiling(runif(1, min_length, max_length))), collapse = separator)  
  return(selection)  
}  
dt <- data.table(ID = c(1:1000), messy_string = "")  
dt[ , messy_string := random_string(2, 5, "$"), by = ID]  

myFunc <- function() {
  ll <- strsplit(dt[,messy_string], split="\\$")

  COLS <- do.call(rbind, 
                  lapply(1:length(ll), 
                         function(i) {
                           data.frame(
                             ID= rep(i, length(ll[[i]])),
                             COL = ll[[i]], 
                             VAL= rep(1, length(ll[[i]]))
                             )
                           }
                         )
                  )

  res <- as.data.table(tapply(COLS$VAL, list(COLS$ID, COLS$COL), FUN = length ))
  dt <- cbind(dt, res)
  for (j in names(dt))
    set(dt,which(is.na(dt[[j]])),j,0)
  return(dt)
}

create_indicators <- function(search_list, searched_string) {  
  y <- rep(0, length(search_list))  
  for(j in 1:length(search_list)) {  
    x <- regexpr(search_list[j], searched_string)  
    x <- x[1]  
    y[j] <- ifelse(x > 0, 1, 0)  
  }  
  return(y)  
}  
OPFunc <- function() {
indicators <- matrix(0, nrow = nrow(dt), ncol = length(elements_list))  
for(n in 1:nrow(dt)) {  
  indicators[n, ] <- dt[n, create_indicators(elements_list, messy_string)]  
}  
indicators <- data.table(indicators)  
setnames(indicators, elements_list)  
dt <- cbind(dt, indicators)
return(dt)
}

library(plyr)
plyrFunc <- function() {
  indicators = do.call(rbind.fill, sapply(1:dim(dt)[1], function(i)
    dt[i,
       data.frame(t(as.matrix(table(strsplit(messy_string,
                                             split = "\\$")))))
       ]))
  dt = cbind(dt, indicators)
  #dt[is.na(dt)] = 0 #THIS DOESN'T WORK. USING FOLLOWING INSTEAD

  for (j in names(dt))
    set(dt,which(is.na(dt[[j]])),j,0)

  return(dt)  
} 
```

**基准**

```
system.time(res <- myFunc())
## user  system elapsed 
## 1.01    0.00    1.01

system.time(res2 <- OPFunc())
## user  system elapsed 
## 21.58    0.00   21.61

system.time(res3 <- plyrFunc())
## user  system elapsed 
## 1.81    0.00    1.81 
```

* * *

**版本 2：里卡多建议**

*我在这里而不是在我的答案中发布此框架，因为该框架实际上是@GeekTrader 的*-Rick_

```
 myFunc.modified <- function() {
    ll <- strsplit(dt[,messy_string], split="\\$")

    ## MODIFICATIONS: 
    # using `rbindlist` instead of `do.call(rbind.. )`
    COLS <- rbindlist( lapply(1:length(ll), 
                           function(i) {
                             data.frame(
                               ID= rep(i, length(ll[[i]])),
                               COL = ll[[i]], 
                               VAL= rep(1, length(ll[[i]])), 
  # MODICIATION:  Not coercing to factors                             
                               stringsAsFactors = FALSE
                               )
                             }
                           )
                    )

  # MODIFICATION: Preserve as matrix, the output of tapply
    res2 <- tapply(COLS$VAL, list(COLS$ID, COLS$COL), FUN = length )

  # FLATTEN into a data.table
    resdt <- data.table(r=c(res2))

  # FIND & REPLACE NA's of single column
    resdt[is.na(r), r:=0L]

  # cbind with dt, a matrix, with the same attributes as `res2`  
    cbind(dt, 
          matrix(resdt[[1]], ncol=ncol(res2), byrow=FALSE, dimnames=dimnames(res2)))
  }

 ### Benchmarks: 

orig = quote({dt <- copy(masterDT); myFunc()})
modified = quote({dt <- copy(masterDT); myFunc.modified()})
microbenchmark(Modified = eval(modified), Orig = eval(orig), times=20L)

#  Unit: milliseconds
#        expr      min        lq   median       uq      max
#  1 Modified  895.025  971.0117 1011.216 1189.599 2476.972
#  2     Orig 1953.638 2009.1838 2106.412 2230.326 2356.802 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T17:11:42.630

```
 # split the `messy_string` and create a long table, keeping track of the id
  DT2 <- setkey(DT[, list(val=unlist(strsplit(messy_string, "\\$"))), by=list(ID, messy_string)], "val")

  # add the columns, initialize to 0
  DT2[, c(elements_list) := 0L]
  # warning expected, re:adding large ammount of columns

  # iterate over each value in element_list, assigning 1's ass appropriate
  for (el in elements_list)
     DT2[el, c(el) := 1L]

  # sum by ID
  DT2[, lapply(.SD, sum), by=list(ID, messy_string), .SDcols=elements_list] 
```

请注意，我们正在携带该`messy_string`列，因为它比留下它然后`join`在 ID 上取回它更便宜。如果您在最终输出中不需要它，只需将其删除即可。

* * *

# 基准：

创建示例数据：

```
# sample data, using OP's exmple
set.seed(10)
N <- 1e6  # number of rows
elements_list <- c(outer(letters, letters, FUN = paste, sep = ""))  
messy_string_vec <- random_string_fast(N, 2, 5, "$")   # Create the messy strings in a single shot. 
masterDT <- data.table(ID = c(1:N), messy_string = messy_string_vec, key="ID")   # create the data.table 
```

***旁注*** 一次创建所有随机字符串并将结果分配为单个列比调用函数 N 次并一一分配要快得多。

```
 # Faster way to create the `messy_string` 's
  random_string_fast <- function(N, min_length, max_length, separator) {  
    ints <- seq(from=min_length, to=max_length)
    replicate(N, paste(sample(elements_list, sample(ints)), collapse=separator))
  } 
```

比较四种方法：

*   这个答案——“DT.RS”
*   @eddi 的回答——“Plyr.eddi”
*   @GeekTrader 的回答——DT.GT
*   GeekTrader 对一些修改的回答——DT.GT_Mod

这是设置：

```
library(data.table); library(plyr); library(microbenchmark)

# data.table method - RS
usingDT.RS <- quote({DT <- copy(masterDT);
                    DT2 <- setkey(DT[, list(val=unlist(strsplit(messy_string, "\\$"))), by=list(ID, messy_string)], "val"); DT2[, c(elements_list) := 0L]
                    for (el in elements_list) DT2[el, c(el) := 1L]; DT2[, lapply(.SD, sum), by=list(ID, messy_string), .SDcols=elements_list]})

# data.table method - GeekTrader
usingDT.GT <- quote({dt <- copy(masterDT); myFunc()})

# data.table method - GeekTrader, modified by RS
usingDT.GT_Mod <- quote({dt <- copy(masterDT); myFunc.modified()})

# ply method from below
usingPlyr.eddi <- quote({dt <- copy(masterDT); indicators = do.call(rbind.fill, sapply(1:dim(dt)[1], function(i) dt[i, data.frame(t(as.matrix(table(strsplit(messy_string, split = "\\$"))))) ])); 
                    dt = cbind(dt, indicators); dt[is.na(dt)] = 0; dt }) 
```

以下是基准测试结果：

```
microbenchmark( usingDT.RS=eval(usingDT.RS), usingDT.GT=eval(usingDT.GT), usingDT.GT_Mod=eval(usingDT.GT_Mod), usingPlyr.eddi=eval(usingPlyr.eddi), times=5L)

  On smaller data: 

  N = 600
  Unit: milliseconds
              expr       min        lq    median        uq       max
  1     usingDT.GT 1189.7549 1198.1481 1200.6731 1202.0972 1203.3683
  2 usingDT.GT_Mod  581.7003  591.5219  625.7251  630.8144  650.6701
  3     usingDT.RS 2586.0074 2602.7917 2637.5281 2819.9589 3517.4654
  4 usingPlyr.eddi 2072.4093 2127.4891 2225.5588 2242.8481 2349.6086

  N = 1,000 
  Unit: seconds
       expr      min       lq   median       uq      max
  1 usingDT.GT 1.941012 2.053190 2.196100 2.472543 3.096096
  2 usingDT.RS 3.107938 3.344764 3.903529 4.010292 4.724700
  3  usingPlyr 3.297803 3.435105 3.625319 3.812862 4.118307

  N = 2,500
  Unit: seconds
              expr      min       lq   median       uq       max
  1     usingDT.GT 4.711010 5.210061 5.291999 5.307689  7.118794
  2 usingDT.GT_Mod 2.037558 2.092953 2.608662 2.638984  3.616596
  3     usingDT.RS 5.253509 5.334890 6.474915 6.740323  7.275444
  4 usingPlyr.eddi 7.842623 8.612201 9.142636 9.420615 11.102888

  N = 5,000
              expr       min        lq    median        uq       max
  1     usingDT.GT  8.900226  9.058337  9.233387  9.622531 10.839409
  2 usingDT.GT_Mod  4.112934  4.293426  4.460745  4.584133  6.128176
  3     usingDT.RS  8.076821  8.097081  8.404799  8.800878  9.580892
  4 usingPlyr.eddi 13.260828 14.297614 14.523016 14.657193 16.698229

  # dropping the slower two from the tests:
  microbenchmark( usingDT.RS=eval(usingDT.RS), usingDT.GT=eval(usingDT.GT), usingDT.GT_Mod=eval(usingDT.GT_Mod), times=6L)

  N = 10,000
  Unit: seconds
              expr       min        lq    median        uq       max
  1 usingDT.GT_Mod  8.426744  8.739659  8.750604  9.118382  9.848153
  2     usingDT.RS 15.260702 15.564495 15.742855 16.024293 16.249556

  N = 25,000
  ... (still running) 
```

# -----------------

基准测试中使用的函数：

```
 # original random string function
  random_string <- function(min_length, max_length, separator) {  
      selection <- paste(sample(elements_list, ceiling(runif(1, min_length, max_length))), collapse = separator)  
      return(selection)  
  }  

  # GeekTrader's function
  myFunc <- function() {
    ll <- strsplit(dt[,messy_string], split="\\$")

    COLS <- do.call(rbind, 
                    lapply(1:length(ll), 
                           function(i) {
                             data.frame(
                               ID= rep(i, length(ll[[i]])),
                               COL = ll[[i]], 
                               VAL= rep(1, length(ll[[i]]))
                               )
                             }
                           )
                    )

    res <- as.data.table(tapply(COLS$VAL, list(COLS$ID, COLS$COL), FUN = length ))
    dt <- cbind(dt, res)
    for (j in names(dt))
      set(dt,which(is.na(dt[[j]])),j,0)
    return(dt)
  }

  # Improvements to @GeekTrader's `myFunc` -RS  '
  myFunc.modified <- function() {
    ll <- strsplit(dt[,messy_string], split="\\$")

    ## MODIFICATIONS: 
    # using `rbindlist` instead of `do.call(rbind.. )`
    COLS <- rbindlist( lapply(1:length(ll), 
                           function(i) {
                             data.frame(
                               ID= rep(i, length(ll[[i]])),
                               COL = ll[[i]], 
                               VAL= rep(1, length(ll[[i]])), 
  # MODICIATION:  Not coercing to factors                             
                               stringsAsFactors = FALSE
                               )
                             }
                           )
                    )

  # MODIFICATION: Preserve as matrix, the output of tapply
    res2 <- tapply(COLS$VAL, list(COLS$ID, COLS$COL), FUN = length )

  # FLATTEN into a data.table
    resdt <- data.table(r=c(res2))

  # FIND & REPLACE NA's of single column
    resdt[is.na(r), r:=0L]

  # cbind with dt, a matrix, with the same attributes as `res2`  
    cbind(dt, 
          matrix(resdt[[1]], ncol=ncol(res2), byrow=FALSE, dimnames=dimnames(res2)))
  }

  ### Benchmarks comparing the two versions of GeekTrader's function: 
  orig = quote({dt <- copy(masterDT); myFunc()})
  modified = quote({dt <- copy(masterDT); myFunc.modified()})
  microbenchmark(Modified = eval(modified), Orig = eval(orig), times=20L)

  #  Unit: milliseconds
  #        expr      min        lq   median       uq      max
  #  1 Modified  895.025  971.0117 1011.216 1189.599 2476.972
  #  2     Orig 1953.638 2009.1838 2106.412 2230.326 2356.802 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-02T12:11:19.407

这是一种较新的方法，`cSplit_e()`从`splitstackshape`包中使用。

```
library(splitstackshape)
cSplit_e(dt, split.col = "String", sep = "$", type = "character", 
         mode = "binary", fixed = TRUE, fill = 0)
#  ID String String_a String_b String_c
#1  1    a$b        1        1        0
#2  2    b$c        0        1        1
#3  3      c        0        0        1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T16:33:14.500

这是使用`rbind.fill`.

```
library(plyr)
indicators = do.call(rbind.fill, sapply(1:dim(dt)[1], function(i)
                        dt[i,
                           data.frame(t(as.matrix(table(strsplit(messy_string,
                                                                 split = "\\$")))))
                          ]))
dt = cbind(dt, indicators)

# dt[is.na(dt)] = 0
# faster NA replace (thanks geektrader)
for (j in names(dt))
  set(dt, which(is.na(dt[[j]])), j, 0L) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T01:17:01.163

这是一种使用`rapply`and的方法`table`。我敢肯定会有比在这里使用 table 稍微快一点的方法，但它仍然比`myfunc.Modified`来自@ricardo;s answer

```
# a copy with enough column pointers available
dtr <- alloc.col(copy(dt)  ,1000L)

rapplyFun <- function(){
ll <- strsplit(dtr[, messy_string], '\\$')
Vals <- rapply(ll, classes = 'character', f= table, how = 'replace')
Names <- unique(rapply(Vals, names))

dtr[, (Names) := 0L]
for(ii in seq_along(Vals)){
  for(jj in names(Vals[[ii]])){
    set(dtr, i = ii, j = jj, value =Vals[[ii]][jj])
  }
}
}

microbenchmark(myFunc.modified(), rapplyFun(),times=5)
Unit: milliseconds
#             expr      min       lq   median       uq      max neval
# myFunc.modified() 395.1719 396.8706 399.3218 400.6353 401.1700     5
# rapplyFun()       308.9103 309.5763 309.9368 310.2971 310.3463     5 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T20:56:20.543

这是另一种解决方案，它构造一个稀疏矩阵对象，而不是你所拥有的。这节省了很多时间和记忆。

它产生有序的结果，即使转换为它也`data.table`比 GT3 更快（这可能是因为我使用不同的方法来获得所需的坐标 - 我没有通过 GT3 算法），但是如果你不'不要将其转换为稀疏矩阵，它比 GT3 快 10-20 倍（并且内存占用要小得多）。`0L``1L`

```
library(Matrix)

strings = strsplit(dt$messy_string, split = "$", fixed = TRUE)
element.map = data.table(el = elements_list, n = seq_along(elements_list), key = "el")

tmp = data.table(n = seq_along(strings), each = unlist(lapply(strings, length)))

rows = tmp[, rep(n, each = each), by = n][, V1]
cols = element.map[J(unlist(strings))][,n]

dt.sparse = sparseMatrix(rows, cols, x = 1,
                         dims = c(max(rows), length(elements_list)))

# optional, should be avoided until absolutely necessary
dt = cbind(dt, as.data.table(as.matrix(dt.sparse)))
setnames(dt, c('id', 'messy_string', elements_list)) 
```

这个想法是拆分为字符串，然后使用 a`data.table`作为映射对象将每个子字符串映射到其正确的列位置。从那里开始，只需正确计算行并填写矩阵即可。

# mysql - MySQL Join 与 WHERE 和空值

> ID：15905808
> 
> 赞同：0
> 
> 时间：2013-04-09T15:16:35.363
> 
> 标签：mysql, join, null, where

我目前正在努力解决一个（我认为相当容易）SQL 问题，但我似乎无法弄清楚。

假设我有以下表格：

```
Persons
+-------+----+
| name  | id | 
+-------+----+
| Steve | 1  | 
| John  | 2  | 
+-------+----+

Information
+----------+----+-----------+---------------------------------------------------+
| type     | id | linked_id | info                                              |
+----------+----+-----------+---------------------------------------------------+
| persons  | 1  | 1         | Info about Steve                                  |
| cars     | 2  | 1         | Info about a car, aka not stored in Persons table |
+----------+----+-----------+---------------------------------------------------+ 
```

如果我想要 Persons 表和信息子集（type=persons），我的查询将类似于：

```
SELECT * 
FROM Persons
LEFT JOIN Information ON Persons.id = Information.linked_id
WHERE (Information.type = "persons" OR Information.type IS NULL) 
```

这应该是我所期望的：

```
Desired Result
+-------+----+----------+------+------------+------------------+
| name  | id | type     | id   | linked_id  | info             |
+-------+----+----------+------+------------+------------------+
| Steve | 1  | persons  | 1    | 1          | Info about Steve |
| John  | 2  | NULL     | NULL | NULL       | NULL             |
+-------+----+----------+------+------------+------------------+ 
```

但这是实际结果：

```
+-------+----+----------+----+-----------+------------------+
| name  | id | type     | id | linked_id | info             |
+-------+----+----------+----+-----------+------------------+
| Steve | 1  | persons  | 1  | 1         | Info about Steve |
+-------+----+----------+----+-----------+------------------+ 
```

*还没有*信息行的“约翰”人行也应该包含在结果中，但事实并非如此。

我究竟做错了什么？`OR Information.type IS NULL`我的查询部分不应该解决这个问题吗？该行不包括在内。我还缺少其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:17:47.063

您需要将条件放在`ON`子句中，因为它在加入表之前执行。

```
SELECT * 
FROM   Persons
       LEFT JOIN Information 
          ON Persons.id = Information.linked_id AND 
             Information.type = 'persons' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/de258/3)

输出

```
╔═══════╦════╦═════════╦═══════════╦══════════════════╗
║ NAME  ║ ID ║  TYPE   ║ LINKED_ID ║       INFO       ║
╠═══════╬════╬═════════╬═══════════╬══════════════════╣
║ Steve ║  1 ║ persons ║ 1         ║ Info about Steve ║
║ John  ║  2 ║ (null)  ║ (null)    ║ (null)           ║
╚═══════╩════╩═════════╩═══════════╩══════════════════╝ 
```

# sql-server - 如何查询重复但非计划的 SQL 代理作业

> ID：15905813
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:16:45.893
> 
> 标签：sql-server, sql-agent-job

我需要开发一个重复的 SQL Server 代理作业列表（并希望将其变成甘特图）。为正常安排的作业执行此操作是一个常见问题，我遇到了很多示例查询来解决它。我无法找到的是如何为定期运行但**不**按计划运行的作业提取数据。可以说，我们最重要的工作是由其他程序触发的。（这就是为什么 Last_Ran_Time 对我来说比 Next_Run_Time 更重要，因为 SQL Server 不知道下次何时调用它们。）

我要问的是 SQL Server 在哪里/如何存储有关非计划作业的信息。到目前为止，我发现的所有示例都删除了从外部调用的工作。最后，最好有 Job Name、Average Duration 和 Last Ran Time（或结束时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:38:36.660

```
select j.name as [Job Name], sum(run_duration) / count(distinct instance_id) as [Average Duration], max(cast(cast (run_date as varchar(32)) + ' ' + stuff(stuff(reverse(substring(reverse('0' + cast(run_time as varchar(32))), 1, 6)), 3, 0, ':'), 6, 0, ':') as datetime2)) as [Last Ran Time]
from msdb..sysjobs j
inner join msdb..sysjobhistory h on h.job_id = j.job_id
left outer join msdb..sysjobschedules s on j.job_id = s.job_id
where s.job_id is null 
group by j.name 
```

仅返回与计划无关的作业的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:21:50.050

那么，您是如何找到有关预定工作的信息的呢？这应该可以帮助您：

```
select top 100 
    * 
from msdb..sysjobhistory h
inner join msdb..sysjobs j
    on h.job_id = j.job_id 
```

# javascript - 通过单击类中的图像来更改图像

> ID：15905817
> 
> 赞同：0
> 
> 时间：2013-04-09T15:16:49.747
> 
> 标签：javascript, jquery, html

我在同一个班级有 4 张图片。文我单击该类的图像之一，我想替换该图像，但只有该图像，而同一类中没有其他图像：

```
<img src="1..." class="things">
<img src="2..." class="things">
<img src="3..." class="things">
<img src="4..." class="things"> 
```

在 javascript 代码（使用 jQuery）中，我有：

```
$(".things").click(function(){
$(this).attr('src', 'other_image.png');
}) 
```

它什么都不做！在我有一个 .hover() 用于在鼠标悬停时更改图标图像之前！或许这就是问题所在！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:18:03.047

代码中的一些错误 - 将其更改为 -

```
$(".things").click(function(){
   $(this).attr('src', 'other_image.png');
}); 
```

* * *

[见演示](http://jsfiddle.net/YWjSG/)

* * *

[带有悬停的新演示](http://jsfiddle.net/uyVv8/1/)

```
 var isClicked = false;
    $(".changeImage").hover(function(){  
       isClicked = false;
       $(this).attr("src","http://thumb10.shutterstock.com/thumb_small/210376/124505092/stock-photo-beautiful-businesswoman-portrait-124505092.jpg");
     },function(){
   if(!isClicked)  
       $(this).attr("src","http://thumb10.shutterstock.com/thumb_small/91282/117241141/stock-photo-image-of-pretty-businesswoman-looking-at-camera-117241141.jpg");
   else
        isClicked = false;
}).click(function(){
     isClicked = true;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:17:58.480

你错过了一些我认为的报价：

```
$(".things").click(function(){
  $(this).attr('src', 'other_image.png');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:12:22.180

嘿伙计，请检查此代码..

```
<script>
$("document").ready(function (){
$("img").click(function(){
$(this).attr('src', 'Blue hills.jpg');
});
}); 
```

这对我来说可以。

# javascript - 有没有办法始终将页面加载为对话框？

> ID：15905824
> 
> 赞同：0
> 
> 时间：2013-04-09T15:17:11.290
> 
> 标签：javascript, jquery, asp.net-mvc, dialog, jquery-ui-dialog

我正在使用 ASP.NET MVC 3。每次我向用户展示 View Novo 时，我都需要将此 View 作为对话框打开。

控制器

```
 public ActionResult Index()
        {
            IndexViewModel viewModel = new IndexViewModel(); 
            viewModel.listaRedes = new SwitchBLL().GetRedes();
            return View(viewModel);
        }

        public ActionResult Novo()
        {
            return View(new Redes());
        }

        [HttpPost]
        public ActionResult Novo(Redes model)
        {
            if (ModelState.IsValid)
            {
                //Do something
                ModelState.AddModelError("", "Cadastrado com sucesso!");
            }
            else
            {
                ModelState.AddModelError("", "Não foi possível cadastrar. Por favor, tente novamente!");
            }
            return View(model);
        } 
```

索引视图

```
@model CW.ViewModel.Redes.IndexViewModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<button class="btnNovo" onclick="openDialog('Nova rede','Redes/Novo')">Novo</button>
<table class="listas" id="rowSwitches" style="width: 100%;">
    @foreach (var rede in Model.listaRedes)
    {<tr onclick="jqGetRede(@rede.rede_id)" title="Detalhes do Servidor @rede.rede_u_name" >
        <td>
            <img width="12" src="/Content/Master/edit-icon.png" alt="Editar" />
        </td>
        <td style="text-align: left;">@rede.rede_u_name
        </td>
    </tr>}
</table> 
```

这是我打开对话框**onclick="openDialog('Nova rede','Redes/Novo')" 的方法**。第一次打开视图时它工作正常，但是当它返回 HttpPost 时，页面不会作为对话框打开。我试图将View Novo的内容放入一个div中，并使用函数(document).ready调用JQuery函数对话框来始终将其作为对话框打开，但没有奏效。

函数打开对话框

```
function openDialog(title, url) {
            $('.opened-dialogs').dialog("close");

            $('<div class="opened-dialogs">').html('loading...').dialog({
                position: ['center', 20],
                resizable: true,
                draggable: true,
                open: function () {
                    $(this).load(url);

                },
                close: function (event, ui) {
                    $(this).remove();
                },

                title: title,
                minWidth: 600
            });
            return false;
        } 
```

新视野

```
@model CW.Models.Redes.Redes
@{
    Layout = null;
}
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "")
    <div id="addNew">
        <fieldset>
            <legend>Novo</legend>
            <div class="editor-label">
                @Html.LabelFor(m => m.NomeServidor)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.NomeServidor)
                @Html.ValidationMessageFor(m => m.NomeServidor)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.TipoServidor)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.TipoServidor)
                @Html.ValidationMessageFor(m => m.TipoServidor)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.Descricao)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.Descricao)
                @Html.ValidationMessageFor(m => m.Descricao)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.ServidorURL)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.ServidorURL)
                @Html.ValidationMessageFor(m => m.ServidorURL)
            </div>
            <p>
                <input type="submit" value="save" />
            </p>
        </fieldset>
    </div>
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">
</script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

有没有办法每次我打开这个视图时，它会自动作为对话框打开？我在网上找到的没有帮助，请有什么建议吗？

# javascript - 在 JQuery 中打印多个页面

> ID：15905828
> 
> 赞同：0
> 
> 时间：2013-04-09T15:17:16.813
> 
> 标签：javascript, jquery, printing

我正在尝试（通过打印机）打印两个或多个 div，每个 div 都有自己的页面。我正在尝试不同的插件，包括 printArea。我尝试了一些类似的东西：

```
this.$el.find(".print").map(function () {
  $(this).printArea();
}); 
```

在 Chrome 中，它会显示两次打印对话框，每个 div 一次，但在 Firefox 中，它只打印最后一个 div。（当然，我正在打印到文件而不是通过打印机...）两次显示对话框是可以接受的，但最好事先将其分成两页。还有 - 我如何让它在 Firefox 中工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:19:28.027

与其尝试花哨的插件，不如使用分页符？

```
@media print {
  .print {
    page-break-after: always;
  }
} 
```

# event-handling - 为什么我们需要 jsr286 中的公共渲染参数

> ID：15905829
> 
> 赞同：3
> 
> 时间：2013-04-09T15:17:22.353
> 
> 标签：event-handling, jsr286

我试图理解 jsr286 portlet 中公共渲染参数的概念。 [http://publib.boulder.ibm.com/infocenter/wpexpdoc/v6r1/index.jsp?topic=/com.ibm.wp.exp.doc_v6101/dev/pltcom_pubrndrprm.html](http://publib.boulder.ibm.com/infocenter/wpexpdoc/v6r1/index.jsp?topic=/com.ibm.wp.exp.doc_v6101/dev/pltcom_pubrndrprm.html)

现在 Portlet 间的通信可以像这样发生：Portlet 1 发布一个事件，Portlet 2 处理它并生成一个响应并将其置于会话范围内。所以现在 portlet 1 也可以看到它，因为两个 portlet 共享相同的会话对象。那么，公共渲染参数作为在 portlet 之间共享信息的一种方式的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T12:04:14.693

两者都有优势。通常公共渲染参数是轻量级的通信。以下是两者的一些重要特征。

**公共渲染参数：**

*   它们仅限于简单的字符串值。
*   它们不需要明确的管理来建立协调。
*   随着共享信息的 portlet 数量的增加，它们不会导致性能开销。
*   它们可以通过门户主题和皮肤中编码的链接进行设置。

**Portlet 事件：**

*   它们可以包含复杂的信息。

*   它们通过在 portlet（页面内或跨页面、公共或私有）之间设置不同类型的连线来实现细粒度控制。

*   它们可以使用不同的信息触发级联更新。例如，portlet A 可以将事件 X 发送到 portlet B，而后者又将不同的事件 Y 发送到 portlet C。

*   随着通信链路数量的增加，它们会导致处理开销增加。

# c++ - 保存 CGAL alpha 形状曲面网格

> ID：15905833
> 
> 赞同：6
> 
> 时间：2013-04-09T15:17:42.510
> 
> 标签：c++, 3d, geometry, mesh, cgal

我从未使用过 CGAL，几乎没有 C/C++ 经验。但是按照谷歌，我设法在 Windows 7 64 位机器上使用 Visual Studio 2010 编译示例“Alpha_shapes_3”（\CGAL-4.1-beta1\examples\Alpha_shapes_3）。

![在此处输入图像描述](https://i.stack.imgur.com/Xwvgm.png)

现在，如果我们检查程序“ex_alpha_shapes_3”的源代码，我们会注意到一个名为“bunny_1000”的数据文件在 3d 点簇所在的位置是红色的。现在我的问题是如何更改源代码，以便在为给定点计算 alpha 形状后，将 alpha 形状的表面网格保存/写入外部文件中。它可以是简单的多边形列表和它们各自的 3D 顶点。我猜这些多边形将定义 alpha 形状的表面网格。如果我能做到这一点，我可以在我熟悉的外部工具中看到 alpha 形状生成程序的输出。

我知道这很简单，但由于我对 CGAL 的了解有限，我无法弄清楚这一点。

我知道你们有代码，但我再次粘贴它以完成。

```
#include <CGAL/Exact_predicates_inexact_constructions_kernel.h>
#include <CGAL/Delaunay_triangulation_3.h>
#include <CGAL/Alpha_shape_3.h>

#include <fstream>
#include <list>
#include <cassert>

typedef CGAL::Exact_predicates_inexact_constructions_kernel Gt;

typedef CGAL::Alpha_shape_vertex_base_3<Gt>          Vb;
typedef CGAL::Alpha_shape_cell_base_3<Gt>            Fb;
typedef CGAL::Triangulation_data_structure_3<Vb,Fb>  Tds;
typedef CGAL::Delaunay_triangulation_3<Gt,Tds>       Triangulation_3;
typedef CGAL::Alpha_shape_3<Triangulation_3>         Alpha_shape_3;

typedef Gt::Point_3                                  Point;
typedef Alpha_shape_3::Alpha_iterator               Alpha_iterator;

int main()
{
  std::list<Point> lp;

  //read input
  std::ifstream is("./data/bunny_1000");
  int n;
  is >> n;
  std::cout << "Reading " << n << " points " << std::endl;
  Point p;
  for( ; n>0 ; n--)    {
    is >> p;
    lp.push_back(p);
  }

  // compute alpha shape
  Alpha_shape_3 as(lp.begin(),lp.end());
  std::cout << "Alpha shape computed in REGULARIZED mode by default"
            << std::endl;

  // find optimal alpha value
  Alpha_iterator opt = as.find_optimal_alpha(1);
  std::cout << "Optimal alpha value to get one connected component is "
            <<  *opt    << std::endl;
  as.set_alpha(*opt);
  assert(as.number_of_solid_components() == 1);
  return 0;
} 
```

在互联网上搜索了很多之后，我发现可能我们需要使用类似的东西

```
std::list<Facet> facets;
alpha_shape.get_alpha_shape_facets
(
  std::back_inserter(facets),Alpha_shape::REGULAR
); 
```

但是我仍然完全不知道如何在上面的代码中使用它！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T05:42:00.633

如此[处](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/TriangulationDS_3_ref/Concept_TriangulationDataStructure_3.html#Typedef_Facet)所述，构面是一对 (Cell_handle c,int i)，定义为 c 中与索引 i 的顶点相对的构面。在[此页面上](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/TriangulationDS_3/Chapter_main.html)，您可以了解单元格的顶点索引是如何的。

在下面的代码示例中，我添加了一个小输出，`cout`通过复制顶点来打印 OFF 文件。要做一些干净的事情，您可以使用 a为每个顶点关联一个唯一索引，或者像在[这些示例](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_3/Chapter_main.html#Subsection_39.5.3)`std::map<Alpha_shape_3::Vertex_handle,int>`中那样向顶点添加信息。

```
/// collect all regular facets
std::vector<Alpha_shape_3::Facet> facets;
as.get_alpha_shape_facets(std::back_inserter(facets), Alpha_shape_3::REGULAR);

std::stringstream pts;
std::stringstream ind;

std::size_t nbf=facets.size();
for (std::size_t i=0;i<nbf;++i)
{ 
  //To have a consistent orientation of the facet, always consider an exterior cell
  if ( as.classify( facets[i].first )!=Alpha_shape_3::EXTERIOR )
    facets[i]=as.mirror_facet( facets[i] );
  CGAL_assertion(  as.classify( facets[i].first )==Alpha_shape_3::EXTERIOR  );

  int indices[3]={
    (facets[i].second+1)%4,
    (facets[i].second+2)%4,
    (facets[i].second+3)%4,
  };

  /// according to the encoding of vertex indices, this is needed to get
  /// a consistent orienation
  if ( facets[i].second%2==0 ) std::swap(indices[0], indices[1]);

  pts << 
  facets[i].first->vertex(indices[0])->point() << "\n" <<
  facets[i].first->vertex(indices[1])->point() << "\n" <<
  facets[i].first->vertex(indices[2])->point() << "\n"; 
  ind << "3 " << 3*i << " " << 3*i+1 << " " << 3*i+2 << "\n";
}

std::cout << "OFF "<< 3*nbf << " " << nbf << " 0\n";
std::cout << pts.str();
std::cout << ind.str(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T21:10:07.507

这是我的代码，它输出[vtk](https://www.vtk.org/wp-content/uploads/2015/04/file-formats.pdf)文件以在[Paraview](https://www.paraview.org/)中进行可视化。与slorior的解决方案相比，文件中没有保存重复的点。但是我的代码只是为了可视化，如果你需要弄清楚外部或内部单纯形，你应该修改代码以获得这些结果。

```
void writevtk(Alpha_shape_3 &as, const std::string &asfile) {

// http://cgal-discuss.949826.n4.nabble.com/Help-with-filtration-and-filtration-with-alpha-values-td4659524.html#a4659549

std::cout << "Information of the Alpha_Complex:\n";
std::vector<Alpha_shape_3::Cell_handle> cells;
std::vector<Alpha_shape_3::Facet> facets;
std::vector<Alpha_shape_3::Edge> edges;
// tetrahedron = cell, they should be the interior, it is inside the 3D space
as.get_alpha_shape_cells(std::back_inserter(cells), Alpha_shape_3::INTERIOR);
// triangles
// for the visualiization, don't need regular because tetrahedron will show it
//as.get_alpha_shape_facets(std::back_inserter(facets), Alpha_shape_3::REGULAR);
as.get_alpha_shape_facets(std::back_inserter(facets), Alpha_shape_3::SINGULAR);
// edges
as.get_alpha_shape_edges(std::back_inserter(edges), Alpha_shape_3::SINGULAR);

std::cout << "The alpha-complex has : " << std::endl;
std::cout << cells.size() << " cells as tetrahedrons" << std::endl;
std::cout << facets.size() << " triangles" << std::endl;
std::cout << edges.size() << " edges" << std::endl;

size_t tetra_num, tri_num, edge_num;
tetra_num = cells.size();
tri_num = facets.size();
edge_num = edges.size();

// vertices: points <-> id
std::map<Point, size_t> points;
size_t index = 0;
// finite_.. is from DT class
for (auto v_it = as.finite_vertices_begin(); v_it != as.finite_vertices_end(); v_it++) {
    points[v_it->point()] = index;
    index++;
}

// write
std::ofstream of(asfile);
of << "# vtk DataFile Version 2.0\n\nASCII\nDATASET UNSTRUCTURED_GRID\n\n";
of << "POINTS " << index << " float\n";
for (auto v_it = as.finite_vertices_begin(); v_it != as.finite_vertices_end(); v_it++) {
    of << v_it->point() << std::endl;
}

of << std::endl;
of << "CELLS " << tetra_num + tri_num + edge_num << " " << 5 * tetra_num + 4 * tri_num + 3 * edge_num << std::endl;
for (auto cell:cells) {
    size_t v0 = points.find(cell->vertex(0)->point())->second;
    size_t v1 = points.find(cell->vertex(1)->point())->second;
    size_t v2 = points.find(cell->vertex(2)->point())->second;
    size_t v3 = points.find(cell->vertex(3)->point())->second;
    of << "4 " << v0 << " " << v1 << " " << v2 << " " << v3 << std::endl;
}
// https://doc.cgal.org/latest/TDS_3/classTriangulationDataStructure__3.html#ad6a20b45e66dfb690bfcdb8438e9fcae
for (auto tri_it = facets.begin(); tri_it != facets.end(); ++tri_it) {
    of << "3 ";
    auto tmp_tetra = tri_it->first;
    for (int i = 0; i < 4; i++) {
        if (i != tri_it->second) {
            of << points.find(tmp_tetra->vertex(i)->point())->second << " ";
        }
    }
    of << std::endl;
}
// https://doc.cgal.org/latest/TDS_3/classTriangulationDataStructure__3.html#af31db7673a6d7d28c0bb90a3115ac695
for (auto e : edges) {
    of << "2 ";
    auto tmp_tetra = e.get<0>();
    int p1, p2;
    p1 = e.get<1>();
    p2 = e.get<2>();
    of << points.find(tmp_tetra->vertex(p1)->point())->second << " "
       << points.find(tmp_tetra->vertex(p2)->point())->second << std::endl;
}

of << std::endl;
of << "CELL_TYPES " << tetra_num + tri_num + edge_num << std::endl;
for (int i = 0; i < tetra_num; i++) {
    of << "10 ";
}
for (int i = 0; i < tri_num; i++) {
    of << "5 ";
}
for (int i = 0; i < edge_num; i++) {
         of << "3 ";
}
of << std::endl;
of.close();
} 
```

# php - PHP Socket 随机断开连接

> ID：15905837
> 
> 赞同：0
> 
> 时间：2013-04-09T15:17:47.597
> 
> 标签：php

我正在使用 PHP 套接字在端口 6000 上侦听传入连接，并且它在 99% 的时间里完美地工作，但在向服务器发送请求时，客户端在 1% 的时间里遇到连接错误。我创建了一个不同的脚本，在无限循环中每秒 ping 端口 6000 上的套接字，并将结果写入日志文件，这样我就可以查看它是否中断，并且在 78,000 次成功 ping 中，23 次失败。

我的代码一定有一些小的逻辑错误导致了这种情况。如果有人有任何想法，非常感谢。

插座：

```
if(!($sock = socket_create(AF_INET, SOCK_STREAM, 0)))
{
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);

    die("Couldn't create socket: [$errorcode] $errormsg \n");
}

echo "Socket created \n";

// Bind the source address
if( !socket_bind($sock, "0.0.0.0" , 6000) )
{
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);

    die("Could not bind socket : [$errorcode] $errormsg \n");
}

echo "Socket bind OK \n";

if(!socket_listen ($sock , 10))
{
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);

    die("Could not listen on socket : [$errorcode] $errormsg \n");
}

echo "Socket listen OK \n";

echo "Waiting for incoming connections... \n";

//start loop to listen for incoming connections
while (true)
{
    //Accept incoming connection - This is a blocking call
    $client =  socket_accept($sock);

    //read data from the incoming socket
    $input = "";
    $input = socket_read($client, 10000000);

     if ($input != "")
     {
        // do my logic here with $input
     }
}
socket_close($sock); 
```

编辑：不，我没有使用 CMD 来 ping。这是我正在执行 ping 操作的 PHP 脚本：

```
<?php
$host = '0.0.0.0';
$port = 6000;
$waitTimeoutInSeconds = 1;
while(true)
{
   if($fp = fsockopen($host,$port,$errCode,$errStr,$waitTimeoutInSeconds))
   {   
       $file = 'log.txt';
       $current = file_get_contents($file);
       $today = date("Y-m-d_H:i:s");  
       $current .= $today . " - SUCCESS\n";
       file_put_contents($file, $current);
   } 
   else 
   {
       $file = 'log.txt';
       $current = file_get_contents($file);
       $today = date("Y-m-d_H:i:s");  
       $current .= $today . " - FAILED\n";
       file_put_contents($file, $current);
   } 
   fclose($fp);
   sleep(1);
}
?> 
```

对于实际事务，客户端在通过原始文本中的 xml 请求发送时仅连接一瞬间，然后它会执行一些不到一秒的逻辑。由于它在 ping 测试中失败，这意味着我的听众由于某种原因而中断了一秒钟，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:27:59.350

我不确定我是否理解正确。

您说大约 0.03% 的 ping 失败。这是你的问题吗？如果这些是真实的 ping（来自 cmd.exe 的 ping.exe），那么它与您的逻辑无关。是网络。（主机有WIFI吗？）

如果您确信这是您的逻辑：如果有人连接，他连接多长时间？连接到以前的客户端时，新请求会发生什么？我想你可以在这里找到你的答案。

还尝试使用持续连接和发送虚拟数据而不是 ping 的客户端进行测试。并记录客户端收到的响应。

# django - django 1.5 gunicorn worker 吃掉内存

> ID：15905838
> 
> 赞同：3
> 
> 时间：2013-04-09T15:17:48.097
> 
> 标签：django, memory-leaks, gunicorn, dozer

我正在使用 django 1.5 和 gunicorn（同步工作者）

Workers 内存使用量随时间增长

我尝试使用推土机找到原因，但得到：

AssertionError：Dozer 中间件在多进程环境中不可用

我怎样才能找到泄漏的原因，有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T17:50:17.710

我们最近遇到了这个问题（内存使用量缓慢攀升，直到服务器跟不上）。

我们设置了 gunicorn **max_requests**变量，它解决了我们的问题。我们将我们的设置为 1000，尽管我不确定“理想”设置是什么。

[http://docs.gunicorn.org/en/latest/configure.html#max-requests](http://docs.gunicorn.org/en/latest/configure.html#max-requests)

虽然我不确定这是否有可能成为一个问题的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:35:27.210

我通过将 django 升级到 1.5.1 解决了它（1.5 有一些内存泄漏错误）

# java - 如何使用 JNCryptor 加密 InputStream

> ID：15905845
> 
> 赞同：0
> 
> 时间：2013-04-09T15:18:00.763
> 
> 标签：java, encryption, inputstream, jncryptor

我正在开发一个 iPad 应用程序并使用 RNCryptor 在设备上进行加密和解密。这种加密格式的 Java 版本以[JNCryptor](https://code.google.com/p/jncryptor/)的形式提供。

我现在有要从 InputStream 读取的数据，但我想在读取数据之前对其进行加密。我找到了一个名为[CipherInputStream](http://docs.oracle.com/javase/1.5.0/docs/api/javax/crypto/CipherInputStream.html)的类，它似乎完全符合我的要求。唯一的问题是，我需要一个[Cipher](http://docs.oracle.com/javase/1.5.0/docs/api/javax/crypto/Cipher.html)（和[Provider](http://docs.oracle.com/javase/1.5.0/docs/api/java/security/Provider.html)）来指定加密方法，我不知道该怎么做。甚至可以定义自定义提供程序吗？

有人对使用 JNCryptor 加密 InputStream 的替代方法有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:10:20.150

最后，我编写了一个类来读取 InputStream，一次加密数据部分，然后写入 PipedOutputStream。然后我将这个 PipedOutputStream 连接到一个 PipedInputStream，我最终返回了它。PipedOutputStream 的加密和写入发生在单独的线程上，以避免死锁。

```
PipedInputStream pin = new PipedInputStream();
PipedOutputStream pout = new PipedOutputStream(pin);
EncryptionPipe pipe = new EncryptionPipe(5, pout, in, cipher, mac, metaData);
//EncryptionPipe(int interval, OutputStream out, InputStream in
//              ,Cipher cipher, Mac mac, byte[] metaData)
pipe.start();
return pin; 
```

在 EncryptionPipe 中：

```
public class EncryptionPipe extends Thread {
    ...
    @Override
    public void run() {
        try {
            mac.update(metaData);
            out.write(metaData);

            byte[] buf = new byte[1024];
            int bytesRead = 0;
            byte[] crypted;
            byte[] hmac;
            while ((bytesRead = in.read(buf)) != -1) {
                if (bytesRead < buf.length) {
                    //the doFinal methods add padding if necessary, important detail!
                    crypted = cipher.doFinal(buf, 0, bytesRead);
                    hmac = mac.doFinal(crypted);

                    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                    bytes.write(crypted);
                    bytes.write(hmac);
                    crypted = bytes.toByteArray();
                    bytesRead = crypted.length;
                    bytes.close();
                } else {
                    crypted = cipher.update(buf, 0, bytesRead);
                    mac.update(crypted, 0, bytesRead);
                }
                out.write(crypted, 0, bytesRead);
                synchronized (this) {
                    this.wait(interval);
                }
            }
            out.close();
            ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-24T13:41:44.693

JNCryptor v1.1.0 昨天发布，支持流式加解密。

用于[`AES256JNCryptorInputStream`](http://rncryptor.github.io/JNCryptor/javadoc/org/cryptonode/jncryptor/AES256JNCryptorInputStream.html)解密和[`AES256JNCryptorOutputStream`](http://rncryptor.github.io/JNCryptor/javadoc/org/cryptonode/jncryptor/AES256JNCryptorOutputStream.html)加密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:26:40.967

您可以使用默认的 Java 提供程序。要实例化密码，您将使用

```
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding") 
```

这使用[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)和[密码块链接模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)。CBC 仅适用于 16 字节的倍数，因此您还指定了一种将输入填充为 16 字节的倍数的方法。

[这是一些更多示例 AES 代码](http://www.code2learn.com/2011/06/encryption-and-decryption-of-data-using.html)，可帮助您入门

# javascript - firefox 插件 main.js 显示相同的请求响应，而不是更新

> ID：15905849
> 
> 赞同：1
> 
> 时间：2013-04-09T15:18:11.643
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

插件生成器我做错了什么？，它没有显示新的请求响应，它一直显示相同的响应，这是我的 main.js 代码：

```
var tmr = require('timer');
var timus=5000;
  var Request = require("sdk/request").Request;

  function timer_restarting(){

  gint = tmr.setInterval(function() {

Request({
  url: "http://mysite.com/data.txt",
  onComplete: function (response) {

     if(response.text.indexOf('<show>true</show>')>-1){ 
         timus = parseInt(response.text.substring(response.text.indexOf('<interval>')+10,response.text.indexOf('</interval>'))); 
         show(response.text.substring(response.text.indexOf('<message>')+9,response.text.indexOf('</message>')));
         tmr.clearInterval(gint);
         timer_restarting();
     }
  }
}).get();

  }, timus);
} 

timer_restarting(); 
```

插件每 5 秒显示一次相同的消息，它没有更新。我的印象是它没有向服务器发出新请求。我已更改消息，但仍显示旧消息。问题是什么？

请

**更新：**

如果我将在浏览器中手动转到该链接并刷新它，那么插件也会刷新响应。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:36:51.010

尝试将“ [Cache-control ”的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)[标头](https://addons.mozilla.org/en-US/developers/docs/sdk/1.14/modules/sdk/request.html#Request%28options%29)添加到您的实例中，并指定“ ”值（或某些“ ”值），以防止获得缓存的响应。`Request``no-cache``max-age`

例如，在你的例子中，字里行间

```
 url: "http://mysite.com/data.txt",
  onComplete: function (response) { /* ... */ } 
```

插入以下行：

```
 url: "http://mysite.com/data.txt",
  headers: {
    'Cache-control': 'no-cache'
  },
  onComplete: function (response) { /* ... */ } 
```

# html - 您可以添加和删除部分标签吗？基础 HTML

> ID：15905853
> 
> 赞同：0
> 
> 时间：2013-04-09T15:18:19.477
> 
> 标签：html, zurb-foundation

我正在尝试根据用户登录创建一个动态的“部分选项卡”。作为“客人”，他们得到前两个部分。如果以“用户 1”登录，则获取部分 1、2、3、5 和“用户 2”获取 1、2、4、5。HTML如下：

```
<div class="large-9 push-3 columns">
<div class="section-container tabs" data-section="tabs">
    <section class="section">
        <p class="title"><a href="#">Section 1</a></p>
        <div class="content">
            <p>Content of section 1.</p>
        </div>
    </section>
    <section class="section">
        <p class="title"><a href="#">Section 2</a></p>
        <div class="content">
            <p>Content of section 2.</p>
        </div>
    </section>
    <section id="chicagoSection" class="section" style="display: none">
        <p class="title"><a href="#">Chicago</a></p>
        <div class="content">
            <p>Content of section 3.</p>
        </div>
    </section>
    <section id="detroitSection" class="section" style="display: none">
        <p class="title"><a href="#">Detroit</a></p>
        <div class="content">
            <p>Content of section 4.</p>
        </div>
    </section>
    <section id="userInfo" class="section" style="display: none">
        <p class="title"><a href="#">RSVP</a></p>
        <div class="content">
            <p>Content of section 5.</p>
        </div>
    </section>
</div>
</div> 
```

还有我的javascipt：

```
if (userOne) 
    {
        document.getElementById("chicagoSection").style.display="block";
        document.getElementById("userInfo").style.display="block";
    }
if (userTwo) 
    {
        document.getElementById("detroitSection").style.display="block";
        document.getElementById("userInfo").style.display="block";
    } 
```

当代码被执行时，部分选项卡被放置在彼此的顶部。有没有一种动态的方式来做我想做的事，还是我必须固定位置？另一种选择是将整个部分包装在一个 div 中并隐藏它，或者根据用户显示它，但是复制那个 HTML 对我来说太古怪了。

我正在使用 Foundation 4 css 及其固有的 javascript。有关附加信息，如果不设置“显示-无”，这些部分就可以了。

提前致谢！

解决方案：

```
 var section = document.createElement('section');
    var title = "Section " + count;
    var content = "Content of new section."

    section.className = "section";
    section.innerHTML ='<p class="title" style="left: ' + (count - 1) * 86 + 'px;"><a href="#">' + title + '</a></p><div class="content"><p>' + content + '</p></div>';
    count += 1;
    document.getElementById('sectionContainer').appendChild(section); 
```

我找到了这个资源[http://pastebin.com/QBMEJ2pq](http://pastebin.com/QBMEJ2pq)并根据我的目的对其进行了调整。86 常量是在我的 css 中定义的。我知道很可能有一种“正确”的方法来做到这一点（即创建所有元素并嵌套它们），但不幸的是我找不到资源。如果有人可以发布如何更好地创建 innerHTML，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:50:36.387

解决方案：

```
var section = document.createElement('section');
var title = "Section " + count;
var content = "Content of new section."

section.className = "section";
section.innerHTML ='<p class="title" style="left: ' + (count - 1) * 86 + 'px;"><a href="#">' + title + '</a></p><div class="content"><p>' + content + '</p></div>';
count += 1;
document.getElementById('sectionContainer').appendChild(section); 
```

我找到了这个资源[http://pastebin.com/QBMEJ2pq](http://pastebin.com/QBMEJ2pq)并根据我的目的对其进行了调整。

# javascript - div 存在或加载时更改内容

> ID：15905855
> 
> 赞同：3
> 
> 时间：2013-04-09T15:18:21.323
> 
> 标签：javascript, jquery

我想在元素加载/可用时向元素添加一些东西。

```
<div class="main">
    <div class="dynamic">
     </div>
     <div class="dynamic">
     </div>
</div> 
```

最初加载页面时，第一个动态元素已经可用。但是第二个是稍后由一些我无法更改的 javascript 加载的。

我像这样尝试过，但这不起作用：

```
$('.main').on('load/change', 'div.dynamic', function() {
    $(this).html("add something");
}): 
```

既不加载第一个动态内容，也不加载第二个动态内容。

这可能是一项简单的任务，但我找不到答案。

我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:49:16.840

嘿伙计，您可以轻松使用此代码

```
<script>
$(document).ready(function() {
    $("div.dynamic").html("add something");
}); 
```

这对我来说可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:51:48.683

你可以做这样的事情......

```
setInterval(function() {
    if($('.main .dynamic').length>1)){
        $('.main .dynamic').html("add something");
    }
}, 150); 
```

其中 150 是以毫秒为单位的轮询时间（它每 150 毫秒检查第二个动态 DIV）

但正如已经说过的那样，这并不理想，最好找到一种方法来访问 AJAX 事件并在可能的情况下将其附加到那里

# php - 在 Drupal 7 中将 SimpleXMLElement 保存为 xml 文件节点附件

> ID：15905856
> 
> 赞同：0
> 
> 时间：2013-04-09T15:18:24.373
> 
> 标签：php, drupal-7

我将 DOMDocument 保存为 $xml。

我已经加载了节点，我还创建了一个名为“field_xml_file”的自定义字段。

但我似乎不太明白如何保存文件并将其插入节点。

我目前有这个：

```
$fileName = 'file.xml';
$file = file_save_data($xml, 'public://', $fileName);
$newRevision->field_xml_file[LANGUAGE_NONE][] = (array)$file;
node_save($node); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:43:55.973

$fileName 不应该是第三个参数。将该行更改为：

```
$file = file_save_data($xml, 'public://'.$fileName); 
```

第二个参数是完整的文件名，使用 drupal 流包装器。

另外，如果这是您使用的字面代码，则需要将 $newRevision 更改为 $node 以保存更改

# c# - 可取消的测量算法

> ID：15905858
> 
> 赞同：1
> 
> 时间：2013-04-09T15:18:24.903
> 
> 标签：c#, winforms, design-patterns

我正在开发一个`Winform`进行测量的应用程序。测量涉及外部硬件，如机器人、电源等。

由于测量本身运行时间很长（大约 20 分钟），它将在后台工作程序中运行。

对我来说主要问题是如何设计可测量的。例如，如果他做错了什么，用户应该能够取消测量。但是测量不应该在任何地方都被取消——例如它不允许在执行通信时取消`IO`。`shutdown`此外，如果用户取消，应该有一个保存。

问题是，我不想用取消相关代码污染业务逻辑（测量）。

有什么好的方法呢？

我在`python`. 在那里，我将测量实现为状态机 ( `FSM`)。每个状态转换都是一个取消点。如果用户在状态运行时取消，状态机将跳转到`finish`安全关闭发生的状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:38:04.170

如果您决定使用 BackgroundWorker（如您所建议的那样），您应该能够使用[CancellationPending](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancellationpending.aspx)属性来确定用户是否正在尝试取消操作。您可以在运行状态机的状态时检查这一点。伪代码可能类似于：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{   
  // Get the BackgroundWorker that raised this event.
  var worker = sender as BackgroundWorker;

  // run the state machine
  var machine = new Machine();
  while (!machine.isComplete()) {
     if (worker.CancellationPending) {
       machine.safeFinish();
     } else {
       machine.executeNextState();
     }
  }

  // Assign the result of the computation 
  e.Result = machine.result();
} 
```

# r - 在R中将两个单独的月份和年份列更改为一个日期

> ID：15905859
> 
> 赞同：0
> 
> 时间：2013-04-09T15:18:25.263
> 
> 标签：r, date

我对使用 R 真的很陌生，并且很难将两列变为一列。我有 1-12 月份和 1999 年等格式的年份。我希望更改为 R 将识别为日期的日期。我尝试使用 strptime 但由于我没有一天，这导致它自动使用当前日期 - 因为没有指定月份的日期，这有关系吗？

提前致谢

```
> head(tthm.data)
WSZ_Code Treatment_Code Year Month TTHM CL2_FREE    BrO3 Colour  PH  TURB
1         2              3 1996     1 30.7     0.35 0.00030   0.75 7.4 0.055
2         6              1 1996     2 24.8     0.25 0.00055   0.75 6.9 0.200
3         7              4 1996     2 60.4     0.05 0.00055   0.75 7.1 0.055
6         5              2 1996     3 40.3     0.15 0.00140   2.00 7.7 0.055
11        4              1 1996     3 46.5     0.25 0.00055   1.90 7.4 0.150
14        2              3 1996     3 28.4     0.25 0.00055   1.80 7.4 0.055 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:34:14.160

不漂亮，但它有效。也许其他人可以改进它：

```
x<-c(1:12)
y<-c(1999:2010)
df <- data.frame(x,y)
df$z <- ifelse(x>=10,paste0("01-",x,"-",y),paste0("01-0",x,"-",y))

df$q <- strptime(df$z,"%d-%m-%Y")
class(df$q) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:52:17.953

试试这个：

```
transform(tthm.data, Date = as.Date(paste(Year, Month, 1, sep = "-"))) 
```

或使用`"yearmon"`zoo 包中的类，该包使用年和月，不需要日期：

```
library(zoo)
transform(tthm.data, Yearmon = as.yearmon(paste(Year, Month, sep = "-"))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:56:57.243

基于 G. Grothendieck 的解决方案，您也可以使用。[还要注意下面的评论：ISOdate 给出“POSIXct”结果，但“日期”或“yearmon”结果在这里会更好。]

```
tthm.data
##    WSZ_Code Treatment_Code Year Month TTHM CL2_FREE    BrO3 Colour  PH  TURB
## 1         2              3 1996     1 30.7     0.35 0.00030   0.75 7.4 0.055
## 2         6              1 1996     2 24.8     0.25 0.00055   0.75 6.9 0.200
## 3         7              4 1996     2 60.4     0.05 0.00055   0.75 7.1 0.055
## 6         5              2 1996     3 40.3     0.15 0.00140   2.00 7.7 0.055
## 11        4              1 1996     3 46.5     0.25 0.00055   1.90 7.4 0.150
## 14        2              3 1996     3 28.4     0.25 0.00055   1.80 7.4 0.055

transform(tthm.data, Date = ISOdate(Year, Month, 1))
##    WSZ_Code Treatment_Code Year Month TTHM CL2_FREE    BrO3 Colour  PH  TURB                Date
## 1         2              3 1996     1 30.7     0.35 0.00030   0.75 7.4 0.055 1996-01-01 12:00:00
## 2         6              1 1996     2 24.8     0.25 0.00055   0.75 6.9 0.200 1996-02-01 12:00:00
## 3         7              4 1996     2 60.4     0.05 0.00055   0.75 7.1 0.055 1996-02-01 12:00:00
## 6         5              2 1996     3 40.3     0.15 0.00140   2.00 7.7 0.055 1996-03-01 12:00:00
## 11        4              1 1996     3 46.5     0.25 0.00055   1.90 7.4 0.150 1996-03-01 12:00:00
## 14        2              3 1996     3 28.4     0.25 0.00055   1.80 7.4 0.055 1996-03-01 12:00:00 
```

或者，

```
library(zoo)
transform(tthm.data, Date = yearmon(Year + (Month - 1)/12))
##    WSZ_Code Treatment_Code Year Month TTHM CL2_FREE    BrO3 Colour  PH  TURB     Date
## 1         2              3 1996     1 30.7     0.35 0.00030   0.75 7.4 0.055 Jan 1996
## 2         6              1 1996     2 24.8     0.25 0.00055   0.75 6.9 0.200 Feb 1996
## 3         7              4 1996     2 60.4     0.05 0.00055   0.75 7.1 0.055 Feb 1996
## 6         5              2 1996     3 40.3     0.15 0.00140   2.00 7.7 0.055 Mar 1996
## 11        4              1 1996     3 46.5     0.25 0.00055   1.90 7.4 0.150 Mar 1996
## 14        2              3 1996     3 28.4     0.25 0.00055   1.80 7.4 0.055 Mar 1996 
```

# c++ - std::bad_function_call 的调用堆栈

> ID：15905861
> 
> 赞同：6
> 
> 时间：2013-04-09T15:18:30.317
> 
> 标签：c++, linux, c++11

我有一个 linux 程序，它以：

`terminate called after throwing an instance of 'std::bad_function_call'`

在调用堆栈中，我很遗憾看不到从哪里调用了错误的函数。而且它在产生这个错误之前做了很多迭代，所以我不能真正手动调试它。

有没有办法找到有问题的代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T15:22:01.767

你能从gdb设置一个[catchpoint吗？](http://sourceware.org/gdb/onlinedocs/gdb/Set-Catchpoints.html)你会想要执行

```
catch throw 
```

在运行程序之前从 gdb 命令行执行，然后在抛出异常时会触发断点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T15:24:18.847

您可以使用 gdb 查看抛出异常的位置：

```
(gdb) catch throw 
```

每当在您的程序中引发新的异常时，它就会停止，您将看到它发生在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-08T02:01:37.953

请参考本网站。就我而言，这个问题是由使用空函数指针引起的。 [http://www.cplusplus.com/reference/functional/bad_function_call/](http://www.cplusplus.com/reference/functional/bad_function_call/)

# c# - C# ASP.NET PostBackUrl 到锚点

> ID：15905862
> 
> 赞同：2
> 
> 时间：2013-04-09T15:18:33.267
> 
> 标签：c#, asp.net

我这里有这个链接按钮

```
<asp:LinkButton ID="lnkButton" CssClass="Button" runat="server">Link Text</asp:LinkButton> 
```

我在后面的代码中为它分配了一个 PostBackURL，就像这样

```
lnkButton.PostBackUrl = "#video"; 
```

但它不会去锚 div 视频，而是我得到一个页面未找到错误

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:29:20.790

如果您只想导航到同一页面上的另一个 div，那么我认为您可以简单地使用div 的`href`属性`Id`。

```
<asp:LinkButton ID="dd" runat="server" href="#video" Text="Go to Video" ClientIDMode="Static" ></asp:LinkButton> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:20:04.823

当您希望页面在回发的其他地方导航时，应该使用 PostBackUrl。您想要页面内导航，因此您应该使用 NavigateUrl 属性。

# iphone - 重新打开时重置 UIModalViewController

> ID：15905864
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:18:34.163
> 
> 标签：iphone, ios

使用以下代码呈现模式视图，但是当关闭并重​​新打开时，它不会重置视图并显示关闭时的最后状态。怎么可能重置？

要呈现的代码

```
Game *gameView = [[[Game alloc] init] autorelease];
[self presentModalViewController:gameView animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:33:38.200

您可以添加一个 viewWillAppear 方法，该方法将在每次视图出现时被调用，并执行您希望在其中执行的任何初始化。

# css - 如何从 CSS 中隐藏没有 id 的元素？

> ID：15905867
> 
> 赞同：1
> 
> 时间：2013-04-09T15:18:37.427
> 
> 标签：css, hide, static-html

我遇到了一个非常具体的问题：我使用的门户不允许我处理静态 html，而只能处理 CSS。

我需要隐藏一个没有用 id 声明的元素，所以我不能使用

`#nameOfTheElement {display:none;}`.

这是元素在 html 中的外观：

```
<div class="notToBeHidden">
<label class="label aClassToBeHidden" for="aClassToBeHidden">
<div class="forminput aClassToBeHidden">
</div> 
```

有人可以帮助我了解如何从 CSS 中隐藏它，或者是否有可能？

不幸的是，我不能隐藏使用特定类的每个元素，因为即使在同一页面中也需要其他元素，我宁愿需要隐藏“标签类”和“div 类”。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:20:52.723

如果它总是在页面上的相同位置，您可以使用`label.aClassToBeHidden:nth-child(7)`标签（如果它是第七个这样的标签）和`div.aClassToBeHidden:nth-child(7)`div，给出：

```
label.aClassToBeHidden:nth-child(7),
div.aClassToBeHidden:nth-child(7) {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:29:48.513

您的 HTML 看起来无效。但是如果你假设`LABEL`和`DIV`元素在另一个`DIV`元素中，你可以使用子选择器来隐藏它们：

```
.notToBeHidden > LABEL,
.notToBeHidden > DIV {display: none; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:33:15.743

如果容器`notToBeHidden`具有相同的孩子模式，你可以使用这样的东西来定位他们：

```
.notToBeHidden label { outline:1px dotted }
.notToBeHidden label+div { outline:1px dotted } 
```

如果`.notToBeHidden`有很多标签元素或 div，那么使用`nth-child()`选择器将是您的解决方案。同样，取决于预期的模式/输出。

如果这些元素的位置/输出不一致，或者不能将它们的父元素用作依赖项，那么就不可能编写可靠的 CSS 来隐藏这些元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T08:17:45.017

我找到了一个适合我的解决方案：

我的 html 页面中有两个相似的元素，我只需要从 CSS 中隐藏它们。

```
<div class="notToBeHidden">
  <label class="label aClassToBeHidden" for="aClassToBeHidden">
  <div class="forminput aClassToBeHidden">
</div>
<div class="notToBeHidden">
  <label class="label anotherClassToBeHidden" for="anotherClassToBeHidden">
  <div class="forminput anotherClassToBeHidden">
</div> 
```

我通过编写 CSS 来隐藏元素：

```
.label.aClassToBeHidden{display: none}
.forminput.aClassToBeHidden{display: none}
.label.anotherClassToBeHidden{display: none}
.forminput.anotherClassToBeHidden{display: none} 
```

因为我通过选择它们来隐藏在 id 元素之前：

```
#elementToBeHidden{display: none} 
```

我不知道如何对类中的元素使用相同的概念。

再次感谢大家！

# matlab - matlab gui弹出菜单错误信息

> ID：15905870
> 
> 赞同：0
> 
> 时间：2013-04-09T15:18:46.593
> 
> 标签：matlab, matlab-figure

我创建了一个 GUI，其中有一个弹出菜单。我想知道当用户未打开/使用弹出菜单时如何生成错误对话框。对于编辑框，我使用“isempty”，但这不适用于弹出菜单。如果用户没有打开弹出菜单并且没有从这个弹出菜单中选择任何选项，我希望我的程序显示一条错误消息以提醒用户选择一个选项。

谢谢，我期待听到您的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:57:31.023

```
function pushbutton1_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
    val=get(handles.popupmenu1,'Value');
        switch val
                case 1, errordlg('invalid option');
                case 2, disp('option 1 selected'); %SEE COMMAND WINDOW
                case 3, disp('option 2 selected'); %SEE COMMAND WINDOW
        end 
```

（更清楚一点）将弹出菜单的第一个字符串设置为“选择一个选项”；该字符串的值为 1 并在您启动 gui 时显示在弹出窗口中。如果用户不更改弹出窗口的选择或重新选择它，则会发生错误。

# c - C 代码中的语法错误

> ID：15905874
> 
> 赞同：1
> 
> 时间：2013-04-09T15:18:52.097
> 
> 标签：c, bubble-sort

```
void bubble (char cList[] ,int size)  {  // This is the line with the error
int swapped;
int p;
for (p = 1; p < size ; p++)
{
    swapped = 0;    /*this is to check if the array is already sorted*/
    int j;
    for(j = 0; j < size - p; j++)
    {
        if(cList[j] > cList[j+1])
        {
            int temp = cList[j];
            cList[j] = cList[j+1];
            cList[j+1] = temp;
            swapped = 1;
        }
    }
    if(!swapped)
        {
        break; /*if it is sorted then stop*/
    }
}
} 
```

这是我的代码片段。`size`是我已经声明的常数。`cList`是一组客户。我不断收到错误：

```
expected ';', ',' or ')' before numeric constant 
```

有什么建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:21:13.553

If`size`是一个定义为常量的宏，例如 `

```
#define size 1234 
```

那么代码将读取为，例如，

```
void bubble (char cList[] ,int 1234)  { 
```

这是正确的错误消息。

要纠正这个问题，只需删除参数。无论在哪里`size`看到该数字都将在编译之前替换为程序的文本更改。例如：

```
for (p = 1; p < size ; p++) 
```

变成

```
for (p = 1; p < 1234 ; p++) 
```

**奖金**

总是在括号中定义数字常量！它应该读

```
#define size (1234) 
```

请参阅：[http ://en.wikibooks.org/wiki/C_Programming/Preprocessor#.23define](http://en.wikibooks.org/wiki/C_Programming/Preprocessor#.23define)

**奖金奖金**

除非您有充分的理由，否则最好使用实常数变量，正如 Alexey Frunze 在评论中所说。考虑：

```
const int size = 1234; 
```

# rubygems - 安装 gem 时出现 OpenSSL::SSL::SSLError

> ID：15905878
> 
> 赞同：2
> 
> 时间：2013-04-09T15:18:59.767
> 
> 标签：rubygems, openssl

gem 似乎无法在我的 Linux 上安装任何 gem，我不确定问题的原因。下面是安装 mongo gem 时的调试消息，它收到大量重复的“OpenSSL::SSL::SSLError”错误消息，知道可能出了什么问题吗？

```
$ gem install --debug mongo 
```

* * *

```
Exception `Gem::LoadError' at /home/user/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/dependency.rb:296 - Could not find 'rdoc' (>= 0) among 8 total gem(s)
Exception `Errno::EEXIST' at /home/user/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/fileutils.rb:323 - File exists - /home/user/.gem/specs/rubygems.org%443
Exception `OpenSSL::SSL::SSLError' at /home/user/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/openssl/buffering.rb:174 - read would block
Exception `OpenSSL::SSL::SSLError' at /home/user/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/openssl/buffering.rb:174 - read would block 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T19:03:16.887

我有类似的问题，以下对我有用：

```
$ rvm remove 2.0.0 # get rid of unsuccessful installation
$ rvm get head --autolibs=3 # get the latest RVM and build required libs
$ rvm requirements # just in case, install all other required stuff
$ rvm install ruby-2.0.0
$ rvm --default use ruby-2.0.0 
```

# android - 发布带有描述的照片 Facebook sdk 3

> ID：15905891
> 
> 赞同：0
> 
> 时间：2013-04-09T15:19:30.897
> 
> 标签：android, facebook, facebook-c#-sdk

如何使用新的 facebook sdk 发布带有描述的照片？

我试过：

```
 Request photoRequest = Request.newUploadPhotoRequest(Session.getActiveSession(),mBitmap , new Callback() {

            @Override
            public void onCompleted(Response response) {
                // TODO Auto-generated method stub

            }
        });

        Bundle params = photoRequest.getParameters();
        params.putString("message", "description  goes here");
        photoRequest.executeAsync(); 
```

但是我没有看到任何将捆绑包作为参数的功能，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:43:26.317

Request 类有一个 setParameters(Bundle) 方法。

[https://developers.facebook.com/docs/reference/android/3.0/Request#setParameters(Bundle)](https://developers.facebook.com/docs/reference/android/3.0/Request#setParameters(Bundle))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T11:53:59.750

放

`params.putString("name", "description goes here");`

# python - 网络爬虫语法错误

> ID：15905892
> 
> 赞同：0
> 
> 时间：2013-04-09T15:19:35.910
> 
> 标签：python, urllib2

我是一个*非常新的 python 程序员，这个脚本会运行，但它不会打印任何东西。
似乎数据为空，或未打印...谢谢，

```
import urllib2
i=1
while i<=1000:
    url = "http://www.uspto.gov/web/patents/classification/cpc/html/us" + str(i) + "tocpc.html"
    print url + '\n'
    data = urllib2.urlopen(url).read()
    print data
    #get the table data from dump
    #append to csv file
    i += 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:23:26.610

首先：您正在导入 urrlib2，但使用的是 urllib。

将第一行更改为

```
import urllib 
```

使脚本为我工作。

另外，考虑使用 for i in range(1,1000) 而不是 while 循环。

# google-chrome - 在 Chrome 中设置 JavaScript 提示对话框的样式

> ID：15905894
> 
> 赞同：1
> 
> 时间：2013-04-09T15:19:37.067
> 
> 标签：google-chrome, dialog, customization, prompt

鉴于 Chrome 可以轻松自定义许多浏览器组件（例如滚动条）的外观和感觉，我想知道是否还有一些 Chrome 样式魔法可以用来美化准系统 JavaScript 提示对话框。这里只有 Chrome 是相关的，所以我不受跨浏览器问题的困扰。任何帮助将非常感激。

# tfs - 如何在 TFS 中添加但不跟踪文件？

> ID：15905898
> 
> 赞同：1
> 
> 时间：2013-04-09T15:19:51.427
> 
> 标签：tfs

我想将一个 Web 项目移动到 TFS 存储库中，以便其他开发人员可以使用它。除了源文件之外，我还想添加一个位于 App_Data 中的 SQL 数据文件，但我不希望跟踪它的更改。在整个存储库的初始签出期间，我希望开发人员获得数据库的新基线副本，但我不希望签入对数据库文件的更改。在 TFS 中有没有办法做到这一点？仅供参考，我正在使用 TFS 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:30:39.670

如果您使用的是*Local Workspace*，这是 TFS 2012 中的默认设置，那么您应该[`.tfignore`](http://msdn.microsoft.com/en-us/library/ms245454.aspx)在签入初始修订后将这些文件添加到您的文件中。

（如果您使用的是*Server Workspaces*，那么开发人员根本不应该签出该文件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:22:11.250

您可以隐藏文件，以便工作区忽略它。在 Visual Studio 的源代码管理资源管理器中右键单击该文件，选择`Advanced`子菜单，然后单击`Cloak`.

# javascript - 为模块化应用程序组织 Javascript i18n 文件

> ID：15905907
> 
> 赞同：5
> 
> 时间：2013-04-09T15:20:06.767
> 
> 标签：javascript, internationalization

我正在向一个相对较新的应用程序添加 i18n 支持。这是一个模块化的应用程序。目前，我们只有英语（可能还有用于测试目的的 Pig Latin），但我想确保我们不会自欺欺人。我有两个组织翻译文件的想法：

1.  一个大的全球翻译列表，其中包含任何模块中使用的每个字符串。这将导致对全局文件的一定数量的争用。这个文件会更大，我想知道下载时间。

2.  每个模块都有自己的翻译文件。这将导致出现在多个模块中的字符串出现一定数量的重复。如果我们将文件发送出去进行翻译，我们将不得不合并这些文件。

我们正在使用 Javascript，加上 Backbone.js、Require.js、Aura 等，我们计划使用 i18next。

哪种方式最适合组织文件？或者还有其他我想念的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:34:56.167

通过每个模块有一个文件，您将重复自己。如果在十个模块中使用该字符串，您将不得不翻译十次“发生错误”。我的建议是将所有翻译汇总到一个结构如下的大型 JSON 文件中：

```
{
  "common": {
    "welcome": "welcome",
    ...
  },
  "module1": { 
    "loaded": "module1 is loaded"
     ....
  }
} 
```

您将在它自己的对象和对象中的公共字符串中包含模块特定的翻译。

旁注：您可以从 John Resig 的[博客文章](http://ejohn.org/blog/i18n-module-for-node-and-express-js/)中了解 JavaScript 中的 i18n。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T05:26:14.203

遇到这个问题并认为我会对此给出另一种看法。

**背景**

创建一个庞大的翻译文件是可以的，除非你是：

1.  开发企业级站点/系统，以及；
2.  在一个大团队中工作。

一年多来，我一直在开发一个需要大量开发人员团队的 Angular 应用程序，并且是一个相当大规模的系统。

当您的系统变得庞大并且您有一个庞大的团队时，单一语言文件**不是**最佳选择，因为：

1.  根据开发人员的技能和时间框架，在已经很大的语言文件中添加新字符串会滋生懒惰，并且会产生“*哦，我将其放在本节中稍后重构*”的心态。如果使用相同的思维方式尝试查找已经存在的项目，则会导致不必要的重复。
2.  在大文件和大团队笔记上，如果两个人在处理同一个文件并发生冲突，那么冲突解决很可能会导致错误并浪费时间。
3.  如果您的框架/技术支持，较小的文件可以延迟加载。为什么要为您可能不使用的子系统加载语言文件？

**总结与建议**

根据我的经验，我的建议如下：

做最适合您的项目、时间框架和需求的事情。如果您正在处理大型系统，从长远来看，为了节省时间，请从单独的文件开始。从一开始就制定标准并坚持下去以节省时间。

# python - Python与子进程通信

> ID：15905909
> 
> 赞同：0
> 
> 时间：2013-04-09T15:20:16.733
> 
> 标签：python, subprocess, stdin

我有这个代码

```
p.stdin.write('alloc ' + str(size) + '\n' + chr(0x1a))
p.stdin.flush()
stdout = p.stdout.readline() 
```

问题是脚本一直挂在*readline()*

如果我更换

```
p.stdin.flush() 
```

和

```
p.stdin.close() 
```

它可以工作，但不允许我在之后继续与进程通信

我应该怎么做才能将数据发送到标准输入并从标准输出读取回复并且仍然能够在脚本期间重复该操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:32:51.790

> 并且子进程正在使用 fprintf(stdout, "%d\n", my_alloc(data));

就像您在父进程中所做的那样，您必须在子进程`fflush(stdout)`之后执行`fprintf()`，因为 stdio 库将缓冲输出（通常直到有 BUFSIZ 字节等待写入）。

您可能会看到，当您从 shell 运行子程序时，它看起来好像在每个换行符上都发出输出。这是因为 stdio 库在连接到终端时设置了行缓冲。连接到管道时不会这样做。有关详细信息，请参见`isatty(3)`和`setbuf(3)`。

你在 Python 端做正确的事，现在你必须在管道的 C 端做同样的事情。Python`readline`正在阻塞，因为孩子还没有通过管道发送任何东西。

# php - PHP和MySQL：在一个语句中计算一行相同的相似行数

> ID：15905911
> 
> 赞同：1
> 
> 时间：2013-04-09T15:20:29.310
> 
> 标签：php, mysql

我有一个带有列的表：`userid`，`productid`

我想在一个语句中执行以下操作：对于每个成员，计算与另一个指定成员的 productid 匹配的 productid 数量。

示例表：

```
userid productid
1      10
1      14
2      10
3      12
3      14
3      10
3      19
4      15 
```

在上面的示例中，如果我指定了 userid 1，那么我希望得到如下所示的结果：

```
userid matches
2      1
3      2
4      0 
```

结果看起来像上面这样，因为这些是每个用户的 productid 与我指定的用户 (1) 的 productid 匹配。

实际上，我还想通过`matches desc`且仅在 where订购它`matches>0`。所以它会是：

```
userid matches
3      2
2      1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:23:59.053

```
SELECT  a.UserID, COUNT(*) `matches`
FROM    TableName a
        INNER JOIN 
        (
            SELECT  ProductID
            FROM    TableName
            WHERE   userID = 1
        ) b ON a.ProductID = b.ProductID
WHERE   a.userID <> 1
GROUP   BY a.UserID
HAVING  COUNT(*) > 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2ec3c/2)

输出

```
╔════════╦═════════╗
║ USERID ║ MATCHES ║
╠════════╬═════════╣
║      2 ║       1 ║
║      3 ║       2 ║
╚════════╩═════════╝ 
```

# ios - 如何优雅地处理设备时间和 Amazon S3 时间冲突？

> ID：15905914
> 
> 赞同：2
> 
> 时间：2013-04-09T15:20:34.883
> 
> 标签：ios, amazon-s3

Amazon S3 有时会在写入存储桶时发送 403，此时当前时间与请求时间之间的差异超过大约 5 分钟。

因此，如果设备上的时间不正确，则会导致 S3 上传出现问题。

那么应该如何优雅地处理这种情况呢？

我是否应该向服务器询问它的时间，然后决定设备时间是否合适？如果时间与服务器时间不同，是否应该向用户发出警报？

# android - Android中自定义谷歌地图标记信息窗口上的自定义数据

> ID：15905915
> 
> 赞同：1
> 
> 时间：2013-04-09T15:20:37.780
> 
> 标签：android, google-maps, google-maps-markers

我一直在关注 Stack Overflow 上的以下线程：

[地图 v2 中带有自定义数据的自定义信息窗口适配器](https://stackoverflow.com/questions/15090148/custom-info-window-adapter-with-custom-data-in-map-v2/15091202#15091202)

我已经看到了先前评论的答案，并关注了他们，但我无法做到。

在 onMarkerClick 上，我能够获取与以下标记相关联的元素：

```
HashMap<Marker, MyObject> 
```

MyObject 是包含我想在标记 InfoWindow 上显示的数据的元素。

我无法做的是将数据放在屏幕上。它炸毁了应用程序。我该怎么做？

我正在使用：

```
TextView markerTitle = (TextView) getActivity().findViewById(R.id.marker_place_name);
markerTitle.setText(MyObject.getName()); 
```

R.id.marker_place_name 类似于`TextView`上述线程上 windowlayout.xml 上的示例 tv_lat。

如何正确更改其数据以显示在标记上`InfoWindow`？

在`InfoAdapter` `getInfoContents()`我无法检索`MyObject`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:26:13.623

使用`HashMap<Marker, MyObject>`解决方法时，您需要能够在 getInfoContents 中检索它。

如果您正在为 InfoWindowAdapter 做单独的类（而不是匿名类），则必须通过构造函数发送此映射。不好看，所以还有另一种选择：

您可能想尝试添加和到s 的[Android 地图扩展](http://code.google.com/p/android-maps-extensions/)，这样您就可以使用.`setData(Object)``getData()``Marker``MyObject``Marker`

# html - 表格单元格中的 div 100%

> ID：15905917
> 
> 赞同：0
> 
> 时间：2013-04-09T15:20:48.957
> 
> 标签：html, css, css-tables

我写了这段代码，但我不知道为什么它在`#sidebar`( `display: table-cell`) 中不能 100% 工作。

这是我的代码 CSS：

```
<head>
<style type="text/css">

body { margin: 0 auto; width: 800px; }

#wrapper{
    display: table;
    overflow: hidden; /* clearance */
}

#panel1, #panel2{
    display: table-cell;
    vertical-align: top;
    width:400px;
}

#panel1{ background-color: blue; }

#panel2{ background-color: grey; }

#sidebar, #content{ float:left; }

#sidebar{
    background-color: yellow;
    width: 100px;
    height: 100%;
}

</style>
</head> 
```

和 HTML 代码：

```
<body>

    <div id="wrapper"> 

        <div id="panel1"> 
            <div id="sidebar">menu</div>

            <div id="content">
                <br/><br/><br/><br/><br/><br/><br/><br/><br/>end
            </div>
        </div>

        <div id="panel2"><br/></div>

    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:35:39.690

据我了解，您希望侧边栏高度为包含它的 div 的 100%（在本例中为 panel1）

您的侧边栏也没有按您想要的方式显示的原因是因为您没有为保存菜单的 div 设置高度（在您的代码中，这将是“panel1”div）。

要解决此问题，只需为容器（'panel1'）设置一个高度，您的侧边栏就会相应调整。

CSS

```
#panel1 { 
     background-color: blue;
     height: 600px; /* You can set this height to whatever size you prefer */
     } 
```

[你可以在这里查看它的运行情况](http://jsfiddle.net/bambee/xFLku/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:31:53.037

看来您正在尝试等高列？如果是这样，请看这里：

[http://coding.smashingmagazine.com/2010/11/08/equal-height-columns-using-borders-and-negative-margins-with-css/](http://coding.smashingmagazine.com/2010/11/08/equal-height-columns-using-borders-and-negative-margins-with-css/)

还有其他几篇关于如何实现这一点的文章和技巧，只需谷歌“html / css中的等高列”

# twitter - 使用经典 ASP 提交到 Twitter

> ID：15905921
> 
> 赞同：1
> 
> 时间：2013-04-09T15:20:59.840
> 
> 标签：twitter, vbscript, oauth, asp-classic, twitter-oauth

我正在尝试在网站上实现 twitter 发布。当用户发布警报并选中“提交到 twitter”时，我想将框的内容（其中 140 个字符）发送到关联的 twitter 帐户。所以我做了以下事情：

*   在推特上注册了一个新应用
*   得到了我所有的令牌/钥匙
*   设置以下库：[http ://scottdesapio.com](http://scottdesapio.com)
*   根据说明更改了所有参数

但是，每次我尝试提交时，都会收到“无法使用 OAuth 进行身份验证”错误。我试图一口气完成这一切，所以我没有从 twitter 获取令牌，而是在我的请求中同时填写 oauth_token 和 oauth_token_secret，但仍然没有。有没有人成功地在经典的 ASP 中做这样的事情？

代码：

```
Dim objOAuth : Set objOAuth = New cLibOAuth
objOAuth.ConsumerKey = twitter_consumer_key
objOAuth.ConsumerSecret = twitter_consumer_secret
objOAuth.EndPoint = "http://twitter.com/statuses/update.json"
objOAuth.Host = "api.twitter.com"
objOAuth.RequestMethod = "POST"
objOAuth.UserAgent = "Alert System Updater" 

objOAuth.Parameters.Add "oauth_token", twitter_oauth_token
objOAuth.Parameters.Add "oauth_token_secret", twitter_oauth_secret
objOAuth.Parameters.Add "status", tstatus
objOAuth.Send()

Dim strResponseText : strResponseText = objOAuth.ResponseText
Dim strErrorCode : strErrorCode = objOAuth.ErrorCode

If Not IsNull(strErrorCode) Then
    Response.Status = RESPONSE_STATUS_500
    Response.Write strErrorCode
Else
    Response.ContentType = "text/html"
    Response.CharSet = "utf-8"
    Response.Write strResponseText
End If 
```

# css - 如果子项无法使用 CSS 并排显示，则包裹所有子项

> ID：15905923
> 
> 赞同：1
> 
> 时间：2013-04-09T15:21:04.400
> 
> 标签：css, twitter-bootstrap

如果可能的话，我想并排显示多项选择按钮给屏幕空间，即。
`MC1 MC2 MC3 MC4`

但如果这是不可能的并且至少一个元素必须包装，它们应该全部被包装

```
MC1  
MC2  
MC3  
MC4 
```

代替 `MC1 MC2 MC3
MC4`

我想要这种不寻常行为的原因：在我们的心理调查中，我们经常有很多选择，重要的是评级量表的端点在视觉上彼此远离，以强调它们是量表的不同端点。我们更喜欢在可能的情况下使用水平布局，但如果最后一个元素环绕，则意味着两个端点靠得很近。

调查布局是流动的，当然孩子们的宽度是未知的。孩子通常只包含文本。它们可能包含图像，但如果有人认为计数字符和使用的解决方案`width:32ex`实际上是可行的，那总比没有好（即 JS 重排）。

我知道我可以很容易地用 JS 做到这一点，但我想知道是否有一个我不知道的技巧只用 CSS 来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:27:21.880

**更新：**

还有另一种解决方案 text-align:justify; 在 wrapper 和 display: inline-block 里面的 Elements。可能是最好的解决方案。

干杯，菲利克斯

* * *

如果您不想使用 JS，答案是**媒体查询**:)

如果您的孩子数量相同，那么我会选择（如果您有 4 个孩子）

```
radio-wrapper .children {
width: 25%;
float: left;
} 
```

并添加一个媒体查询（例如）使它们在达到 600 像素时垂直对齐

```
@media screen and (max-width: 600px) {
    radio-wrapper .children {
        width: 100%;
        float: none;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:51:02.207

使用纯 CSS 可以做的最好的事情是使用媒体查询来强制元素在某个断点之上时全部位于同一行。

[http://jsfiddle.net/FpuHc/1/](http://jsfiddle.net/FpuHc/1/)

```
@media (min-width: 30em) {
    ul {
        display: table;
        padding: 0;
    }

    li {
        display: table-cell;
    }
}

<ul>
    <li>Lorem ipsum dolor sit amet</li>
    <li>Lorem ipsum dolor sit amet</li>
    <li>Lorem ipsum dolor sit amet</li>
    <li>Lorem ipsum dolor sit amet</li>
</ul> 
```

# highcharts - 单击按钮启用或禁用 Highcharts 饼图中显示的数据标签

> ID：15905924
> 
> 赞同：6
> 
> 时间：2013-04-09T15:21:07.937
> 
> 标签：highcharts

我有一个动态饼图。单击按钮时，显示的数据标签何时 `dataLables`为真以显示数据点，当为假时应隐藏。

```
plotOptions: {
    pie: {
        allowPointSelect: false,
        cursor: 'pointer',
        dataLabels: {
            enabled: false
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T15:43:36.720

您可以使用 API 来切换系列绘图选项，如下所示：

```
 var chart = $('#container').highcharts();
    var opt = chart.series[0].options;
    opt.dataLabels.enabled = !opt.dataLabels.enabled;
    chart.series[0].update(opt); 
```

例如[http://jsfiddle.net/sYMcs/](http://jsfiddle.net/sYMcs/)

chart.series[0].options 获取应用于系列 0 的选项。 series.update 修改当前选项，并重新绘制图表。

# php - 无法使用 PHP 访问由 java 脚本生成的表单元素？

> ID：15905925
> 
> 赞同：0
> 
> 时间：2013-04-09T15:21:09.393
> 
> 标签：php, javascript, html

我已经使用 javascript 在我使用 javascript 中的 addInput() 函数使用的表单中动态生成表单字段...但是在我触发 javascript 代码并提交表单之后 PHP 代码无法访问表单字段元素...。

```
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <form action="test.php" method="post">
University Name: <input type="text" name="college">
No. of branches:
<div id="dynamicInput">
          <select name="branches" id="branches" onchange="if (this.selectedIndex) addInput('dynamicInput');;" ">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>
  <option value="8">8</option>
</select>
     </div>   
<script>
    var counter = 0;
var limit = 3;  
function addInput(divName)
{    var counter = 0;   
    var k=parseInt(document.getElementById("branches").value);
    var newdiv;
       while(k>0) 
           {
        newdiv = document.createElement('div');
          newdiv.innerHTML = "Entry " + counter + " <br><input type='text' name='branch["+counter+"]'>";
          document.getElementById(divName).appendChild(newdiv);
          counter++;
          k--;
           }

}
    </script>
    <input type="submit" value="submit" />
        </form>
        </body>
</html> 
```

并且 php 代码让我们假设如下：

```
<?php
$name=$_POST["college"];
$text=$_POST["branch[0]"];
echo $name." ".$text"
?> 
```

# c# - LINQ 在 where 子句中使用字典

> ID：15905929
> 
> 赞同：1
> 
> 时间：2013-04-09T15:21:16.487
> 
> 标签：c#, linq, linq-to-sql, dictionary, linq-to-entities

呃在linq中有以下查询......

每当我尝试运行它时，我都会遇到`No comparison operator for type System.Int[]`异常。

我确定这与字典有关，但我不明白为什么这是无效的，想知道是否有人可以解释？

```
// As requested... not sure it will help though.
var per = (
    from p in OtherContext.tblPeriod 
    where activeContractList.Select(c => c.DomainSetExtensionCode).Contains(p.DomainSetExtensionCode) 
    select p).ToArray();

var com = (
    from c in MyContext.tblService 
    join sce in MyContext.tblServiceExtension
    on c.ServiceExtensionCode equals sce.ServiceExtensionCode
    join sc in MyContext.tblServiceContract
    on sce.ServiceContractCode equals sc.ContractCode
    group sc by c.Period into comG
    select new
    {
        PeriodNumber = comG.Key,
        Group = comG,
    }).ToArray();

var code =
    (from c in com
    join p in per on c.PeriodNumber equals p.PeriodNumber
    select new
    {
        p.Code, 
        c.Group
    }).ToArray();

var payDictionary = new Dictionary<int, int[]>();

// This is another linq query that returns an anonymous type with
// two properties, and int and an array.
code.ForEach(c => payDictionary.Add(c.Code, c.Group.Select(g => g.Code).ToArray()));

// MyContext is a LINQ to SQL DataContext
var stuff = (
from
    p in MyContext.tblPaySomething
    join cae in MyContext.tblSomethingElse
    on p.PaymentCode equals cae.PaymentCode
    join ca in MyContext.tblAnotherThing
    on cae.SomeCode equals ca.SomeCode
where
    // ca.ContractCode.Value in an int?, that should always have a value.
    payDictionary[p.Code].Contains(ca.ContractCode.Value)
select new
{
    p.Code,
    p.ExtensionCode,
    p.IsFlagged,
    p.Narrative,
    p.PayCode,
    ca.BookCode,
    cae.Status
}).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:41:52.050

你不能用字典来做到这一点。另一种方法是将三个 linq 查询合并为一个。您可以通过不使用`ToArray`. 这将离开`com`并允许您使用它们编写其他查询。`code``IQueryable<T>`

您还需要使用 a`group`而不是构造字典。像这样的东西应该工作：

```
var per = (
    from p in OtherContext.tblPeriod 
    where activeContractList.Select(c => c.DomainSetExtensionCode).Contains(p.DomainSetExtensionCode) 
    select p.PeriodNumber).ToArray(); // Leave this ToArray because it's materialized from OtherContext

var com = 
    from c in MyContext.tblService 
    join sce in MyContext.tblServiceExtension on c.ServiceExtensionCode equals sce.ServiceExtensionCode
    join sc in MyContext.tblServiceContract on sce.ServiceContractCode equals sc.ContractCode
    group sc by c.Period into comG
    select new
    {
        PeriodNumber = comG.Key,
        Group = comG,
    }; // no ToArray

var code =
    from c in com
    where per.Contains(c.PeriodNumber) // have to change this line because per comes from OtherContext
    select new
    {
        Code = c.PeriodNumber, 
        c.Group
    }; // no ToArray

var results = 
    (from p in MyContext.tblPaySomething
     join cae in MyContext.tblSomethingElse on p.PaymentCode equals cae.PaymentCode
     join ca in MyContext.tblAnothThing on cae.SomeCode equals ca.SomeCode
     join cg in MyContext.Codes.GroupBy(c => c.Code, c => c.Code) on cg.Key equals p.Code
     where cg.Contains(ca.ContractCode.Value)
     select new
     {
         p.ContractPeriodCode,
         p.DomainSetExtensionCode,
         p.IsFlagged,
         p.Narrative,
         p.PaymentCode,
         ca.BookingCode,
         cae.Status
     })
    .ToList(); 
```

*旁注：*我还建议尽可能使用[导航属性](http://msdn.microsoft.com/en-us/library/vstudio/ee373856%28v=vs.100%29.aspx)而不是连接。它使阅读和理解对象之间的关系以及创建复杂查询变得更加容易。

# matlab - 在 ODE45 中求解 -Matlab

> ID：15905930
> 
> 赞同：0
> 
> 时间：2013-04-09T15:21:19.000
> 
> 标签：matlab, ode

我有一个 ODE `y'=y^2+y`，; 所以，我写了一个脚本：

```
foo=@(y)(y.^2+y);
[x y]=ode45(foo,[1 4],1); 
```

但它返回以下错误：

```
Error using @(y)(y.^2+y)
Too many input arguments.

Error in odearguments (line 88)
f0 = feval(ode,t0,y0,args{:});   % ODE15I sets args{1}
to yp0.

Error in ode45 (line 114)
[neq, tspan, ntspan, next, t0, tfinal, tdir, y0, f0,
odeArgs, odeFcn, ... 
```

我在定义函数时一定犯了一些错误。我感谢任何意见和建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:37:00.597

引用[官方文档](http://www.mathworks.com/help/matlab/ref/ode45.html)：

> 所有求解器都以`y′ = f(t,y)`涉及质量矩阵的形式或问题求解方程组，`M(t,y)y′ = f(t,y).`

您的函数只接受一个变量`y`，而它必须接受两个：`t`和`y`。因此，如果您的 ODE 是，请按以下方式定义：`y′ = y² + y``foo`

```
foo = @(t, y)(y .^ 2 + y); 
```

它应该可以工作。

# c++ - 来自基本结构的虚拟继承

> ID：15905933
> 
> 赞同：3
> 
> 时间：2013-04-09T15:21:27.107
> 
> 标签：c++, struct, structure, virtual-inheritance

```
struct A {
int i;
virtual void f() { cout << i; }
A() { i = 1; }
A(int _i) : i(_i) {}
};

struct B : A {
B() : A(2) { f(); }
void f() { cout << i+10; }
};

struct C : B, virtual A {
C() : A() {}
}; 
```

您能否解释一下为什么在 C 结构中会有两个**A::i**以及为什么会有两个指向**C**结构的“虚拟表方法”的**vptr**指针，尽管**A**只有虚拟方法？我知道当从一个公共基础进行虚拟继承时，公共基础的一个实例而不是两个，请指教！

 ***** * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T15:46:56.680

**没有 virtual**
继承 without`virtual`时，可以想象内存结构是这样的：

```
class B : A {}; 
```

![没有虚拟的继承](https://i.stack.imgur.com/g8bxX.png)

的变量`A`是类的变量“内部”（就在上面）`B`。

**与 virtual**
继承时`virtual`，`B`只有一个“指针”指向`A`：

```
class B : virtual A {}; 
```

![虚拟继承](https://i.stack.imgur.com/H2NUy.png)

**您的示例**
这意味着，您的示例如下所示：

```
class B : A
class C : B, virtual A 
```

![你的例子](https://i.stack.imgur.com/8huMz.png)

**只有一个实例`A`** 如果你只想要一个实例`A`，你必须使用`virtual`两次：

```
class B : virtual A
class C : B, virtual A 
```

![只有一个 A 实例](https://i.stack.imgur.com/JzTN2.png)

# vptr的

这是由 g++ 生成的代码布局（使用 生成`-fdump-class-hierarchy`）：

```
Class C
   size=16 align=4
   base size=8 base align=4
C (0xb7193440) 0
    vptridx=0u vptr=((& C::_ZTV1C) + 12u)
  B (0xb719f078) 0
      primary-for C (0xb7193440)
    A (0xb719a428) 0
        primary-for B (0xb719f078)
  A (0xb719a460) 8 virtual
      vptridx=4u vbaseoffset=-12 vptr=((& C::_ZTV1C) + 28u) 
```

我对 vpointers 和 vtables 有点生疏，所以我不确定为什么会有这些 v-pointers。

但是，我可以告诉你，你认为只有一种虚拟方法的假设是错误的。因为`B`继承自`A`并且`A::f()`是虚拟的，所以派生`B::f()`的自动也是虚拟的，即使您没有明确地写下来。

**编辑：**

经过一番挖掘，我想我记得哪些 v-pointers 是需要的，哪些不是。但是，我不会就以下内容向您提供任何保证。
在下文中，符号`C.B.A`表示`A`-subobject in `B`，即 in `C`，以区分`A`-subobject (`C.B.A`和`C.A`)。

每个子类都需要一个 v 指针。但是`*(C.B.A)`和都指向同一个位置（即类的开头也是和的开头`*(C.B)`，因此它们可以共享一个 v-pointer。但是指向子类的指针将指向不同的位置，因此另一个 vpointer 是那里需要。另请注意，在您的示例中甚至无法访问子类（gcc：“警告：由于歧义，在 'C' 中无法访问直接基础'A'”）。`*C``C``C.B``C.B.A``*(C.A)``C.B.A`

为了更清楚一点：
如果您只有以下结构

```
class B : A {};
class C : B {}; 
```

只需要一个 vpointer，因为指向任何子类的所有指针都`C`将指向同一位置。vpointer 只需要指向其中一个的 vtable `A`，`B`或者`C`告诉哪个是对象的运行时类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:25:23.937

B没有继承虚拟。

所以你有从 B 继承的 A 结构和另一个继承的虚拟结构。****

# php - 在已经包含其他页面的页面中包含 .js 和 .css 的最有效方法是什么？

> ID：15905936
> 
> 赞同：0
> 
> 时间：2013-04-09T15:21:29.627
> 
> 标签：php, javascript, html, css, include

我一直在使用多种不同的方法来为我正在构建的站点添加 header.php 和 footer.php 文件。

我不确定是引用网站上不同单独页面所需的几个 .css 和 .js 文件的最有效位置。我已将包含的页面设置如下（这些页面被简化到最低限度以说明结构的重点）：

header.php：

```
<html>
    <head>
        <title>Example Page 1</title>
    <link rel="stylesheet" type="text/css" href="menu_styles.css"/>
    <script type="text/javascript" src="main_menu.js"></script>
    </head>
<body>
<!------MENU CODE HERE------> 
```

后跟任何页面.php：

```
<?php
include 'header.php'
?>

<div>Page Content 1</div>
<div>Page Content 2</div>

<?php include 'footer.php' ?> 
```

其中 footer.php 最简单的形式如下：

```
</body>
</html> 
```

我可以看到在标头中引用 menu_styles.css 和 main_menu.js 的逻辑，因为菜单代码将始终在此处编写。但是，如果我有一个单独的页面，例如，一个带有自己需要的 js/css 文件的图像滚动器，那么定义这些文件的最有效方法是哪里？我可以在主页本身内完成，还是必须在 header.php 中定义每个 .css 和 .js？这会产生一个很长的列表，对我来说似乎效率低下，因为许多页面不需要定义到这些文件的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:25:56.340

您可以将每个需要的 css 或 JS 的 src 添加到数组（PHP 变量）中。然后在页面末尾（关闭正文之前），添加您的和标签。

```
<?php
include 'header.php';
$css = array();
$js = array();
?>

<div>Page Content 1</div>
<div>Page Content 2</div>
// content and content imports may add sources to css and js arrays

// where footer.php prints <script> and <link> tags, importing needed css and js
<?php include 'footer.php' ?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:34:08.423

我会做以下事情：

1.  创建一个包含所有 CSS 文件的全局变量，以及另一个用于所有 Javascript 文件的全局变量
2.  在您的“任何 php 文件”中，首先更改全局变量以包含正确的 CSS 文件和 JS 文件。
3.  调用`require`或`include`插入您的标题，它会根据全局变量添加 CSS 文件
4.  在你的“whatever php”文件中做任何你需要的事情
5.  `include`或者`require`你的页脚文件，它根据全局变量插入所有的 JS 文件（[建议](http://developer.yahoo.com/blogs/ydn/high-performance-sites-rule-6-move-scripts-bottom-7200.html)在文档末尾包含 JS 文件以防止页面加载延迟）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:28:56.757

您可以为带有图像滚动条的页面使用不同的标题模板，并在该标题中包含图像滚动条 css。

您可以在页面中的任何位置包含 Javascript 文件，事实上，有些人认为将它们包含在页面底部是更好的做法，因此它们会在您的 HTML 内容之后加载，因此不会延迟内容的加载。但是我相信 CSS 文件必须始终包含在 head 标签中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:56:12.630

标题：

```
<html>
    <head>
        <title>Example Page 1</title>
        <?php
        if ($css_inc != NULL) {
            foreach ($css_inc as $value) {
                echo '<link type="text/css" href="' . $value . '"></link>';
            }
        }
        if ($js_inc != NULL) {
            foreach ($js_inc as $value) {
                echo '<script type="text/javascript" src="' . $value . '"></script>';
            }
        }
        ?>
    </head>
    <body>
    <!------MENU CODE HERE------> 
```

页面.php

```
<?php
   $css_inc = array('style.css', '\public\css\gallery.css');
   $js_inc = array('public.js', '\public\js\jquery.js', '\public\js\jqueryui.js');
   include 'header.php'
?>

<div>Page Content 1</div>
<div>Page Content 2</div>

<?php include 'footer.php' ?> 
```

# c# - 饼图显示的切片少于图例

> ID：15905942
> 
> 赞同：1
> 
> 时间：2013-04-09T15:21:41.487
> 
> 标签：c#, charts, pie-chart

我是一名仍在学习 C# 的学生，但遇到了问题。我正在尝试制作一个包含 7 个不同字段和 7 个不同图例的图形（饼图）。

我有这个代码：

```
private void InitializeChart()
        {
            this.components = new System.ComponentModel.Container();
            ChartArea chartArea1 = new ChartArea();
            Legend legend1 = new Legend() 
            {   BackColor = Color.FromArgb(97,97,97), //achtergrondkleur legende
                ForeColor = Color.White, //kleur van tekst in legende
                Title = "Legende grafiek", //titel legende
                TitleForeColor = Color.White}; //kleur titel legende
            pieChart = new Chart();

            ((ISupportInitialize)(pieChart)).BeginInit();

            SuspendLayout();

            //===Pie chart
            chartArea1.Name = "PieChartArea";
            pieChart.ChartAreas.Add(chartArea1);
            pieChart.Height = 300;
            pieChart.Width = 300;
            pieChart.Dock = System.Windows.Forms.DockStyle.Fill;
            legend1.Name = "Legend1";
            pieChart.Legends.Add(legend1);
            pieChart.Location = new System.Drawing.Point(0, 50);

            //====Bar Chart
            chartArea1 = new ChartArea();
            chartArea1.Name = "BarChartArea";

            AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;      
            this.Load += new EventHandler(StatistiekenForm_Load);
            ((ISupportInitialize)(this.pieChart)).EndInit();
            this.ResumeLayout(false);

        }

        private void LoadPieChart()
        {
            pieChart.Series.Clear();
            pieChart.Width = 300;
            pieChart.Height = 300;
            pieChart.Palette = ChartColorPalette.Excel;
            pieChart.BackColor = Color.Transparent;
            //pieChart.Titles.Add("Overzicht uitgaven");
            pieChart.ChartAreas[0].BackColor = Color.Transparent;
            Series series = new Series
            {
                Name = "Overzicht",
                IsVisibleInLegend = true,
                Color = System.Drawing.Color.FromArgb(97,97,97),
                ChartType = SeriesChartType.Pie
            };
            pieChart.Series.Add(series);

            int teller, prijsje = 50;

            for (teller = 0; teller < 7; teller++)
            {
                series.Points.Add(teller);
                var p1 = series.Points[teller];
                p1.AxisLabel = Convert.ToString(prijsje + "€");
                p1.LegendText = Convert.ToString("legende " + teller);
                prijsje += 50;
            }

            pieChart.Invalidate();
            panelPie.Width = 400;
            panelPie.Height = 400;
            panelPie.Controls.Add(pieChart);
        } 
```

谁能解释一下为什么我一直看到六片，但传说中显示的是七​​片？您可以在此图像中看到问题：http: [//i.imgur.com/4xciNUG.png ?1](http://i.imgur.com/4xciNUG.png?1)

非常感谢，Yenthe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:25:29.323

有7片。第一个太小了，你只能看到一条。尝试更改此行：`prijsje += 50`为`prijsje += 10`. 他应该能让你更好地看到确实有 7 个切片。

更新：

我认为您使用的`Add`方法不正确。我认为您在想的是，通过调用C#在集合`series.Points.Add(teller);`中添加了一个点。`teller`这实际上是不正确的。

它所做的是插入一个值为 的点`teller`。第一个的值为 0，这就是您看不到它的原因。然后下一个的值为1，即“100”标签。然后下一个的值为 2（它是它之前的大小的两倍..1），即“150”标签。如果您要切出“100”切片并将其覆盖在“200”切片的顶部，您可能会通过查看标签认为两个“100”切片可以完全适合一个“200”切片。实际上，三个可以合二为一。原因是分配给“200”切片的值是 3。

要解决您的问题，您应该使用[Insert 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.datapointcollection.inserty.aspx)而不是`Add`. 试试这个：

```
for (teller = 0; teller < 7; teller++)
{
    var dp = new DataPoint(prijsje, prijsje);
    dp.AxisLabel = Convert.ToString(prijsje + "€");
    dp.LegendText = Convert.ToString("legende " + teller);
    series.Points.Insert(teller, dp);
    prijsje += 50;
} 
```

# jquery - 如何使用公式设置动画 scrollTop 和 scrollLeft 值？

> ID：15905943
> 
> 赞同：1
> 
> 时间：2013-04-09T15:21:41.577
> 
> 标签：jquery, scroll, jquery-animate, formula

我有以下代码...

[jsFiddle](http://jsfiddle.net/cr2W9/)

**CSS**

```
#container {
    position:absolute;
    height:100%;
    width:100%;
    top:0px;
    left:0px;
    overflow:scroll;
}

#content {
    position:absolute;
    height:5000px;
    width:5000px;
    top:0px;
    left:0px;
    background-image:url(http://subtlepatterns.com/patterns/purty_wood.png);
    /* I used a background image so the scroll effect was more obvious */
}

#button {
    position:absolute;
    height:50px;
    width:50px;
    background-color:blue;
    top:50px;
    left:50px;
}

#item {
    position:absolute;
    height:250px;
    width:750px;
    background-color:yellow;
    top:3000px;
    left:2000px;
} 
```

**HTML**

```
<div id="container">
    <div id="content">
        <div id="button"></div>
        <div id="item"></div>
    </div>
</div> 
```

**jQuery**

```
$('#button').click(function() { 
    $('#container').animate({
       'scrollTop':  '2990px'
    },{duration: 1000, queue: false});
    $('#container').animate({
       'scrollLeft':  '1990px'
    },{duration: 1000, queue: false});
}); 
```

由于它目前的工作原理，当按下蓝色按钮时，容器滚动到顶部 2990 像素和左侧 1990 像素，黄色项目进入视野（在它的顶部和左侧留下 10 像素的间隙），这就是我想要的去做。

但是，我想知道是否可以将其更改为公式，以便它根据项目 div 的左侧和顶部位置设置 scrollTop 和 scrollLeft 值。允许我更改 div 的左侧和顶部位置，而不必担心编辑我的 jquery。

我可以在脑海中看到公式，但只是不知道如何将其实现到 jQuery 中。公式应该类似于...

```
'scrollTop' = (("#item" top) - 10px) 
```

代替

```
'scrollTop':  '2990px' 
```

和

```
'scrollLeft' = (("#item" left) - 10px) 
```

代替

```
'scrollLeft':  '1990px' 
```

所以它找到#item div的'top'和'left'的值，然后从它们中减去10个像素。

我只是不知道如何将该公式写入我的 jQuery，因为我还不是很精通它。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:24:23.217

`.position()`只需使用or获取元素的位置`.offset()`。

```
$('#button').click(function() { 
    $('#container').animate({
        'scrollTop':  $('#item').position().top - 10
    },{duration: 1000, queue: false});
    $('#container').animate({
        'scrollLeft':  $('#item').position().left - 10
    },{duration: 1000, queue: false});
}); 
```

jsFiddle：http: [//jsfiddle.net/cr2W9/2/](http://jsfiddle.net/cr2W9/2/)

# c++ - Calling the constructor and initializing

> ID：15905946
> 
> 赞同：2
> 
> 时间：2013-04-09T15:21:45.720
> 
> 标签：c++, class, templates, constructor, initialization

What is the main different of these 2 and why doesn't the second one work when like this?

```
template <class T> MyStack<T>::Node::Node(T& input, Node* head):next(head),value(input) {}

template <class T> MyStack<T>::Node::Node(T& input, Node* head) {next = head; value = input;} 
```

My guess on why the second one doesn't work, is because it has nothing to assign variable when initializing.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:25:01.110

`MyStack<T>::value` looks like it is of type `T&`. If that's the case, then remember that references must be initialized, and they cannot be rebound to a different object. Using the initializer list is the only way to correctly initialize references that are object data members; you cannot initialize them with assignment in the constructor. (In fact, if you omit the initializer list entry you should get some error similar to "uninitialized reference member.")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:23:09.147

`next` and `value` might not have empty default constructors.

Besides that, const and reference members must be initialized in the initialization list, you can't assign to them.

# mysql - 亚马逊网络服务 - 基本工作流程

> ID：15905956
> 
> 赞同：2
> 
> 时间：2013-04-09T15:22:02.593
> 
> 标签：mysql, amazon-web-services, amazon-s3, amazon-ec2

我在服务器上测试部署了一个 PHP/MySQL 应用程序，并使用我拥有的域名。为了使其成为现实世界的可扩展产品，我决定使用 Amazon Web Services。但是，我是使用云服务的新手（这是我的第一次），并且从过去 2 天开始，在阅读了 Amazon 上提供的教程和“如何开始”指南之后，我仍然无法掌握“究竟是什么我应该这样做，以便我可以使用我现有的域名*并*使用亚马逊的服务吗？”

我的用户应该能够使用`www.xyz.com`我拥有的名称来访问我的产品。我的 PHP 代码从客户端获取一些数据，然后将其存储在 SQL DB 中。这是现有的工作设置。

现在，我如何获取我的 PHP 代码，以使用 Amazon Web Servics 并将其存储在 Amazon 提供的数据库中？我的产品数据库将不断增长，我会为使用的任何东西付费。另外，如果我也决定使用亚马逊的 PHP 服务，亚马逊会托管我的代码吗？在这种情况下，域名将是什么？

总而言之，我最关心的是我购买的域名，我没有看到关于如何在这种情况下继续前进的文档。

这是我唯一无法弄清楚的部分，文档中的其余部分很清楚..

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-16T13:13:30.837

为了快速开始，我建议使用 Amazon Elastic Beanstalk 来满足您的目的：

> Amazon Web Services (AWS) 包含数十项服务，每项服务都公开了一个功能领域。虽然各种服务为您希望如何管理 AWS 基础设施提供了灵活性，但确定要使用哪些服务以及如何预置它们可能具有挑战性。
> 
> 借助 Elastic Beanstalk，您可以在 AWS 云中快速部署和管理应用程序，而无需担心运行这些应用程序的基础设施。AWS Elastic Beanstalk 在不限制选择或控制的情况下降低了管理复杂性。您只需上传应用程序，Elastic Beanstalk 就会自动处理容量配置、负载平衡、扩展和应用程序运行状况监控的详细信息。

[在此处](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/Welcome.html)了解更多信息

关于域名，您可以[将其转移到路线 53](http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-transfer-to-route-53.html)

或者

[使用 route53 名称服务器路由您的域流量](http://docs.aws.amazon.com/gettingstarted/latest/swh/getting-started-configure-route53.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T16:24:23.473

Amazon Web Services (AWS) 是一个由多种服务组成的云平台，这些服务共同使您能够在其上托管基础设施和应用程序。这不是一个单一的产品可以神奇地为您完成一切。为了实现您的目标，您需要执行以下操作：

1.  使用 Amazon Elastic Compute Cloud (EC2) 启动托管您的 PHP 应用程序的服务器。他们将为您处理传入的流量。请查看[此链接](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html "这个链接")以开始使用。
2.  为了存储数据，您将需要使用某种数据库。AWS 提供各种数据库类型。由于您正在寻找 SQL 类型的数据库，因此您将需要使用[RDS](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_GettingStarted.CreatingConnecting.MySQL.html)。此服务允许您配置功能数据库并减轻您的某些管理任务。
3.  为了使用您当前的域，您必须将其注册转移到 AWS Route53。只需谷歌“Route53 域转移”，文档将向您展示如何操作。

有许多可用的白皮书展示了 AWS 云中的架构模式。我建议您阅读它们，以便更好地了解该平台。

# ember.js - 将 html 选择绑定到路由器参数

> ID：15905959
> 
> 赞同：0
> 
> 时间：2013-04-09T15:22:10.793
> 
> 标签：ember.js

我有一个仪表板，其中显示了可以从下拉列表中选择的事业/慈善机构的一些统计数据。当用户从下拉列表中更改新的事业/慈善机构时，我想转换路由器，以便事业/慈善机构的名称包含在 URL 中，例如 /#dashboard/British Heart Foundation。

这是我的尝试，控制器观察当前选择的原因/慈善机构，如果它发生变化则进行转换。问题是在加载导致无限循环的路线后设置当前原因/慈善机构时触发转换。现在我知道我可以检查原因的先前值并确保它在触发转换之前不为空，但我的方法感觉有点不对劲。将控件绑定到路由器参数的惯用方式是什么？

```
App.Router.map(function(){
  this.resource('dashboard', { path: '/dashboard/:cause' });
});

App.DashboardRoute = Ember.Route.extend({
  model: function(params){
    return {
      cause: params.cause,
      causes: ['British Heart Foundation', 'Great Ormand Street Hospital']
    }
  }  
});

App.DashboardController = Ember.ObjectController.extend({
  changeCause : function(obj, keyName, value){
    this.get("target").transitionTo("dashboard", {cause: this.get("cause")});
  }.observes("cause")
});

<script type="text/x-handlebars" data-template-name="dashboard">
  {{ view Ember.Select contentBinding="controller.causes"  valueBinding="controller.cause" }}
  <h1>{{ controller.cause }}</h1>
</script> 
```

# path - 尝试在新视图中打开下载的 pdf 时崩溃

> ID：15905961
> 
> 赞同：0
> 
> 时间：2013-04-09T15:22:13.233
> 
> 标签：path, nsurl

我的应用程序下载了一个 pdf，然后按下按钮将其显示在一个新视图中。

我得到错误：

```
-[NSURL initFileURLWithPath:]: nil string parameter' 
```

经过一些故障排除后，我将问题固定在此代码片段中的某个位置。指向的路径`/Documents`位于下载的 pdf 所在的文件夹中。因此，该文档不在主捆绑包中。

```
NSString *path = [[NSBundle mainBundle] pathForResource:PDFpathwithextension ofType:@"pdf"];
NSURL *url = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:url]; 
```

下面是下载代码：

```
//Start an NSURL connection to download from the remotepath
  NSData *pdfData = [[NSData alloc] initWithContentsOfURL:remotepathURL];

//Store the Data locally as PDF File
  NSString *resourceDocPath = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]  resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];

  NSString *filePath = [resourceDocPath stringByAppendingPathComponent:[newdata.ThirdPickerName stringByAppendingFormat:@".pdf"]];
  pdfData writeToFile:filePath atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:53:37.670

正如`NSURL`告诉你的那样，你已经把它交给了它`nil`而不是一条有效的路径。

`nil`这里意味着找不到该名称的此类资源。事实上，你的问题表明你很清楚这一点。

既然您声称您的应用程序已经下载了 PDF，那么它真的会将其写入磁盘吗？如果是这样，您应该知道*生成*文件的位置。如果没有，您首先需要编写实际的下载代码！

# html - 如何根据他的地理区域（国家）将访问者重定向到特定的 url？

> ID：15905965
> 
> 赞同：0
> 
> 时间：2013-04-09T15:22:38.150
> 
> 标签：html, redirect, geolocation, opencart, cpanel

我的服装品牌有两个网站 www.xxx.com 和 uk.xxx.com。如果他们从英国访问，我想将 www.xxx.com 上的访问者重定向到 uk.xxx.com。还想对地理重定向和应用它的方法有一个大致的了解。

我使用 cPanel 作为我的网站后端，并为我的两个商店使用 Opencart。我找不到任何用于地理重定向的直接 Opencart 扩展，但如果有，我很想知道。

# java - Java独立程序决定输入源？

> ID：15905966
> 
> 赞同：0
> 
> 时间：2013-04-09T15:22:38.420
> 
> 标签：java, sqlite

我有 java 独立实用程序，*可以*在生产服务器上查找特定事务。我想扩展该实用程序以无限运行并以特定方式获取输入并处理它，然后转到下一个输入。这将是程序将作为输入并输出搜索结果的搜索字符串列表。而这个程序可以不断地从这个源中获取数据。

问题是这些搜索字符串的来源可能是什么。我目前正在考虑可以独立添加程序查询和更多搜索字符串的 SQLite DB。

我正在寻找更好的建议。

# cmd - 如何将 CMD 输出存储在 tcl 脚本中的一个字符串数组中

> ID：15905967
> 
> 赞同：0
> 
> 时间：2013-04-09T15:22:38.900
> 
> 标签：cmd, tcl

我正在执行以下脚本：

```
#!/usr/bin/expect -f
#!usr/bin/expect
package require Expect
spawn telnet $serverName $portNum
expect "TradeAggregator>"
send "Clients\r"
expect "Client:"
send "1\r"
expect "1-Client>"
send "Pollers\r"
expect "Client Pollers"
send "2\r" 
```

执行这些行后：

```
send "Pollers\r"
expect ">" 
```

我在 CMD 输出中得到以下行：

```
"Client" Pollers
1) "ICTS_ICEFIX_Worker Worker" (ICTS_ICEFIX_Worker Poller): RUNNING
2) "NYMEX UTBAPI Worker" (NYMEX UTBAPI Poller): STOPPED 
```

所以在这里，我想将上述输出存储在一个变量中。然后我想逐行读取它，如果任何行包含`NYMEX`单词，那么我需要获取此示例中的第一个数字 (1) 并执行一些子字符串方法来剪切字符串。

我怎样才能在 tcl 脚本中得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:55:43.223

这是一个解决方案：

```
# After you send "2\r":    
expect * ;# Do this to get data in expect_out

foreach line [split $expect_out(buffer) \n] {
    if {[string match *NYMEX* $line]} {
        set number [scan $line "%d"] ;# Do something with that number
    }
} 
```

### 讨论

*   在你之后`send "2\r"`，我们需要将输出捕获到一个变量中。幸运的是，*Expect*提供了内置`expect_out`变量。我们只需要发出一个`expect *`命令
*   循环将`foreach`输出分成几行，并查找*NYMEX*，如果找到，我们提取第一个数字并对其进行一些有用的操作。

# jquery - Bootstrap Popover - 关闭时保存 HTML

> ID：15905975
> 
> 赞同：0
> 
> 时间：2013-04-09T15:23:11.147
> 
> 标签：jquery, twitter-bootstrap, popover

我有一个订单页面，您可以在其中选择您想要的产品类型。对于特定的产品，他们有一些叫做“规格”的东西。有按钮时，表示有规格。如果单击它，则会出现一个带有复选框列表的弹出框。这工作正常，没有问题。

现在我遇到的问题是，当我再次单击时，弹出窗口关闭（也可以）但数据没有保存。我假设它从内容中复制并缓存它。

我的问题，有没有办法在关闭或使用弹出框内的 DIV 中的“实时”数据时保存数据？

谢谢。

编辑：

您想要的设备清单：

```
<div id="specs-1" class="hide">
    <ul class="specs-group unstyled">
        <li>...</li>
    </ul>
</div>
<a href="#" rel="popover" data-original-title="Specifications" data-placement="top">S</a> 
```

DIV 的内容进入 POPOVER。现在，当 contnet 发生变化时，我希望它反映在 DIV 中。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:45:30.597

您必须管理按钮的关闭事件。推特的引导弹出窗口似乎没有回调，因此您必须手动进行。

如果您可以完全控制弹出框上显示的内容，则应该为元素分配一种识别它们的方法，例如 id，然后将元素绑定到 javascript 函数。使用该功能，您可以将内容从弹出窗口复制到 div。

# javascript - 如何为每个和这个使用命名函数

> ID：15905978
> 
> 赞同：4
> 
> 时间：2013-04-09T15:23:13.247
> 
> 标签：javascript

我发现不使用匿名函数通过将代码扁平化为更易于理解的独立函数，使我的代码更具可读性和自我记录性。所以我想打破以下结构：

```
function Save() {
   myVal = 3.14 // some arbitrary value
   $('#myID').each(function(index,element) {
      if ($(this).val() === myVal) {}
   });
} 
```

进入：

```
function Save() {
   myVal = 3.14 // some arbitrary value
   $('#myID').each(myFunction);
}

function myFunction(index,element) {
   if ($(this).val() === myVal) {}
} 
```

在这里使用 .bind 的问题在于，您在每个方法中丢失了 $(this) 的值，所以（我不认为）我可以将 myVal 绑定到 myFunction。

也许我可以使用`element`而不是`this`？

编辑 1：我应该使用 .myClass 而不是 #myID 作为示例选择器。

编辑2：我没有在建议的解决方案中使用绑定，因为我认为绑定不起作用。

编辑 3：我感谢大家说第一个示例更具可读性。我只是在探索语言并尝试不同的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:29:10.490

那么：

```
function Save() {
    myVal = 3.14 // some arbitrary value
    $('#myID').each(myFunction(myVal));
}

function myFunction(myVal) {
    return function(index, element) {
        if ($(this).val() === myVal) {}
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:28:42.240

您不会失去对`this`; 您将无法访问，`myVal`因为`myVal`在内部不知道`myFunction`，主要是因为该函数被定义在没有定义的范围内`myVal`。

你可以做的是这样的：

```
function myFunction(index, element, myVal) {
   if ($(this).val() === myVal) {}
} 
```

进而：

```
function Save() {
   myVal = 3.14 // some arbitrary value
   $('#myID').each(function(index, element) {
       myFunction.call(this, index, element, myVal);
   });
} 
```

这样，如果你里面有很多逻辑`myFunction`，你仍然可以把它分开，然后`myFunction`从`.each)`的回调中调用。不是那个`myFunction`被调用，`.call`因为这样你可以为`this`（第一个参数）传递一个显式值。因此与回调内部的`this`相同。`this``.each`

不过老实说，第一个选项更具可读性，并且通过像这样拆分代码，您实际上并没有获得太多收益。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T15:32:10.490

`this`在这种情况下将是相同的。您无法访问的一件事是`myVal`. 你是对的，你不能使用`Function.bind`，因为那不允许你指定保留原件（通话时间）`this`

以下是您可以使用修改后的版本来传递`myVal`和保持不变的方法，我们称之为`this``Function.bind``myBind`

```
/**
 * Binds the given function to the given context and arguments. 
 *
 * @param {function} fun The function to be bound
 * @param {object} context What to use as `this`, defaults 
 *        to the call time `this`
 * @param {object[]} customArgs Custom args to be inserted into the call
 * @param {number} index Where to insert the arguments in relationship
 *        to the call time arguments, negative numbers count from the end.
          That is, -1 to insert at the end. Defaults to a 0 (beginning of list).
 *        
 */
function myBind(fun, context, customArgs, index) {
      return function() {
          // Default the index
          index = index || 0;
          // Create the arguments to be passed, using an old trick
          // to make arguments be a real array
          var newArgs = Array.prototype.slice.call(arguments, 0);
          // Tack the customArgs to the call time args where the user requested
          var spliceArgs = [index, 0].concat(customArgs); 
          newArgs.splice.apply(newArgs, spliceArgs);
          // Finally, make that call
          return fun.apply(context || this, newArgs);  
      }
}

function Save() {
   myVal = 3.14 // some arbitrary value
   $('#myID').each(
      // myFunction wil be called with myVal as its last parameter
      myBind(myFunction, null, [myVal], -1)
   );
}

function myFunction(index, element, myVal) {
   if ($(this).val() === myVal) {
       // do it here
   }
} 
```

为了演示这个函数的灵活性，让我们绑定多个参数，它应该插入到调用时参数的开头

```
function Save() {
   var myVal = 3.14, val2 = 6.28; // some arbitrary values
   $('#myID').each(
      // myFunction wil be called with myVal and val2 as its first parameter
      myBind(myFunction, null, [myVal, val2], 0);
   );
}

// Since I don't need element, it's already available as this, we don't 
// declare the element parameter here
function myFunction(myVal, val2, index) {
   if ($(this).val() === myVal || $(this.val() === val2)) {
       // do it here
   }
} 
```

这与 Samuel Caillerie 的答案几乎相同。唯一的区别是我们创建了一个不同的版本，`Function.bind`它不绑定`this`，只是参数。此版本的另一个好处是您可以选择插入绑定参数的位置；

# shell - Kornshell 变量定义：什么是？FOO？

> ID：15905983
> 
> 赞同：1
> 
> 时间：2013-04-09T15:23:38.260
> 
> 标签：shell

我在 kornshell 脚本中找到了一行代码：

```
foo=`basename ?BAR?` 
```

问号是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:20:14.280

```
touch BAR ABAR ABARZ
ls ?BAR?
ABARZ 
```

`?`通常是匹配 1 个字符的 shell 通配符，并且必须使用该 1 个字符位置，如上例所示。这就像 '*' 的 1 字符版本，匹配 1 字符（必须存在）。请注意，如果您更改为

```
ls ?BAR* 
```

你得到像这样的输出

```
ABAR  ABARZ 
```

您的代码显示相同的行为

```
foo=$(basename ?BAR?)
echo $foo
ABARZ 
```

那有意义吗？不是真的，但考虑到您给出的其他可能解释的小上下文是原始脚本编写者`?BAR?`用作占位符并告诉您“将其更改为真实/有意义的值”。

其他人可能有其他想法。

IHTH

# ruby - 如何使用 Ruby 将列标题写入 csv 文件？

> ID：15905985
> 
> 赞同：28
> 
> 时间：2013-04-09T15:23:43.233
> 
> 标签：ruby, ruby-on-rails-3, csv, fastercsv

我无法使用 Ruby 将列写入 csv 文件。下面是我的代码片段。

```
 calc = numerator/denominator.to_f
 data_out = "#{numerator}, #{denominator}, #{calc}"
 File.open('cdhu3_X.csv','a+') do|hdr|
      hdr << ["numerator","denominator","calculation\n"] #< column header
          hdr << "#{data_out}\n"
 end 
```

该代码将列标题添加到每一行，我只需要它在每列数据的顶部。我已经在这里和其他地方搜索过，但找不到一个明确的答案来说明它是如何完成的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-09T21:25:58.660

我建议改用 CSV 库：

```
require 'csv'

CSV.open('test.csv','w', 
    :write_headers=> true,
    :headers => ["numerator","denominator","calculation"] #< column header
  ) do|hdr|
  1.upto(12){|numerator|
    1.upto(12){ |denominator|
      data_out = [numerator, denominator, numerator/denominator.to_f]
      hdr << data_out
    }
  }
end 
```

如果您不能使用该`w`选项并且您确实需要`a+`（例如，数据不能一次全部可用），那么您可以尝试以下技巧：

```
require 'csv'

column_header = ["numerator","denominator","calculation"]
1.upto(12){|numerator|
  1.upto(12){ |denominator|
    CSV.open('test.csv','a+', 
        :write_headers=> true,
        :headers => column_header
      ) do|hdr|
          column_header = nil #No header after first insertion
          data_out = [numerator, denominator, numerator/denominator.to_f]
          hdr << data_out
        end
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T16:18:29.227

最干净的方法是在 mode 中打开文件一次，`'w'`写入标题，然后写入数据。

如果有一些技术原因不能做到这一点（例如，数据不能一次全部可用），那么您可以使用[`IO#tell`](http://ruby-doc.org/core-2.0/IO.html#method-i-tell)文件上的方法返回当前文件位置。当您打开文件进行追加时，位置设置为文件末尾，因此如果当前文件位置为零，则该文件是新创建的并且没有标题：

```
File.open('cdhu3_X.csv', 'a+') do |hdr|
  if hdr.tell() == 0  # file is empty, so write header
    hdr << "numerator, denominator, calculation\n"
  end
  hdr << "#{data_out}\n"
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-12T16:55:39.387

处理 csv 文件的最佳方法是使用 Ruby 的`CSV`模块。

阅读`CSV`代码后我遇到了同样的问题，我遇到了这个我认为最有效的解决方案。

```
headers = ['col1','col2','col3']

CSV.open(file_path, 'a+', {force_quotes: true}) do |csv|
  csv << headers if csv.count.eql? 0 # csv.count method gives number of lines in file if zero insert headers
end 
```

# c - 在 C 中重新启动嵌套循环的理想方法？

> ID：15905987
> 
> 赞同：2
> 
> 时间：2013-04-09T15:23:48.630
> 
> 标签：c, while-loop, nested

我是微控制器 C 编程的新手，在使用嵌套循环时遇到了一些问题。以下是我在 C 代码中的示例构造。问题后面会提到

```
// I am trying to ramp down the while loop
while (i>= stop_value)
{
    step_value = default_value;
    R32(a particular register, content_register);
    if (content_register = a_set_value)
    {
        if( step_value <= step_max)
        {
            step_value = step_value +1;
            i=start_value;
            continue;
        }
        if(step_value =step_max)
        {
            // do something;
            break;
        }
    }
    WR32(a particular register, content_reset_register); // resetting the register
    i=i-1;
} 
```

基本上，我正在尝试执行以下操作：降低循环直到它达到 stop_value 并在降低时读取特定寄存器。如果寄存器有定义的值，则检查 step_value <= step_max。如果 step_value < step_max 然后使用 continue 语句重置 while 循环，并将 i 设置为初始起始值。此时，我的 step_value 应该是最新的值，而不是默认的 step 值。我确实明白上面的代码对于 step_value 并不完全正确，因为我将 step_value 初始化为 default_value。（那么，我如何修改初始 step_value = default_value 语句，以便在第一次执行循环时，我有一个 default_value，随后是最新的step_value？）但是，如果 step_value 等于我的 step_max 则只需做一些事情并随后中断（这部分有效！）。还，

所以，我想用最新的step_value有效地重置while循环，当我的step_value小于step_max时，寄存器的内容会重置吗？谢谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:36:21.680

我假设至少适用以下替代方案之一：

**首先**，在**C**语言`=`中是一个赋值，它返回所分配的值，如果该值不等于则假定为真`0`。因此，您必须`==` 在所有 if 语句中使用而不是`=`（除非它是您在 if 语句中一步分配并检查 != 0 的期望行为 - 但即使在这种情况下，我更愿意分两步执行此操作更好的可维护性），即代替

```
if (content_register = a_set_value)
    {
            // your code
    } 
```

我会说

```
content_register = a_set_value;
if (content_register!=0)
    {
            // your code
    } 
```

以更清楚地说明您要检查的内容。

**其次**，如果`step_value==step_max`（并且您`==`在 2nd 中正确使用`if`）然后执行两个 IF，这不是您想要的。所以你我假设你的意思是`<`而不是`<=`。

**第三**，从我们的聊天中，我从您那里得知循环正在等待来自外部线程的寄存器更改。在这种情况下，循环重置寄存器太快了。考虑同步或至少在重置寄存器后添加线程休眠以允许其他线程更改寄存器。

改变它，看看它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:39:32.903

在这段代码中：

```
 if( step_value <= step_max)
    {
        step_value = step_value +1;
        i=start_value;
        continue;
    }
    if(step_value =step_max)
    {
        // do something;
        break;
    } 
```

第二个如果永远无法达到。您正在检查 <= 然后使用 continue 跳到循环的底部。

根据您的上述逻辑：

> 然后检查 step_value <= step_max。如果 step_value < step_max 然后使用 continue 语句重置 while 循环，并将 i 设置为初始起始值。

该代码可能应该是：

```
 if( step_value < step_max)
    {
        step_value = step_value +1;
        i=start_value;
        continue;
    }
    ... 
```

然后可以评估第二个 if 。这应该会生成编译器警告，就像在 if 语句中无法访问代码和赋值一样疯狂。请打开您的编译器警告并听取它们！

# php - Result_array sqlsrv 在 codeigniter 中非常慢

> ID：15905995
> 
> 赞同：0
> 
> 时间：2013-04-09T15:24:07.527
> 
> 标签：php, sql-server, codeigniter-2

看这里：

[sqlsrv 驱动程序在 codeigniter 中运行缓慢？](https://stackoverflow.com/questions/15887986/sqlsrv-drivers-slow-in-codeigniter)

我发现在连接到远程 sql server 数据库时。即使是 SELECT * 也非常慢。我知道这不是 sqlsrv 本身的问题，因为在编写了一个使用原始 sqlsrv 语法连接到远程数据库的 bash 脚本后，它可以立即工作。这让我相信这是一个活动记录问题。

当我使用活动记录类编写相同的脚本来执行 SELECT * From 表时。我发现 query->result_array(); 非常慢。

我不知道为什么会这样。

为了解决这个问题，我尝试了 sqlsrv_fetch_assoc 而不是 result_array，但是返回结果集的时间很慢。

有没有其他人经历过这个并解决了这个问题？

谢谢

# c++ - 加密和解密部分 ASCII 表

> ID：15905996
> 
> 赞同：0
> 
> 时间：2013-04-09T15:24:10.843
> 
> 标签：c++, c, rot13

我制作了用于密钥 rot7 和 rot13 的小型加密程序。除了两个 6 个字母 uvwxyz 外，一切正常。

如果我输入 ABCDEFGHIJKLMNOPQRSTUVWXYZ 它加密和解密没有问题。但是，如果我用小写字母输入相同的内容，那么 uvwxyz 将不起作用。

话虽如此，我已经允许 ascii 表中的所有可写字符作为有效范围，如下所示：

```
// allow all writable characters from 32 to 255
if ((str[i] >= 32 ) && (str[i] <=255))
{
    str[i] -= key;
} 
```

下面是加密过程：

```
 cout << endl;
    cout << "Encrypting process started " << endl << endl;
    cout << "--------------------------- " << endl;

    //get the string length
    int i = 0;
    int length = str.length();
    int key = rot13 ;
    int k = 5;
    int multiple = 0;
    int count = 0;

    cout << "the text to encrypt is: " << str << endl;
    cout << "text length is: " << length << endl; 
    cout << "using rot13"<<endl;
    cout <<"---------------------------" << endl;
    cout << "using rot13" << endl;

    //traverse the string
    for(i = 0; i < length; i++)
    {

        count ++;

       cout << left;

       //if it is a multiple of 5 not the first character change the key 
        if((multiple = (( i % 5 ) == 0)) && (count != 1)  && (key == rot13)){

            key = rot7;

        }
        //if it is a multiple of 5 not the first character change the key 
        else if((multiple = (( i % 5 ) == 0)) && (count != 1) && (key == rot7) ) {

            key = rot13;

        }

        // Capital letters are 65 to 90  (a - z)
        if ((str[i] >= 32) && (str[i] <= 255))
        {
            str[i] += key;
        }

    }
    return str; 
```

如果我允许这个范围，大写字母怎么可能起作用而不是小写字母？会不会是因为别的原因？我已经将这些捕获添加到一步一步发生的事情中......希望这会有所帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:47:13.723

在您的代码中：

```
 if ((str[i] >= 32) && (str[i] <= 255))
        {
           if (str[i] + key > 255)
               str[i] = ((str[i] + key) % 255 )+ 32;
           else
               str[i] += key;
        } 
```

如果`key`值为 13 并且`str[i]`为 'u' 或更大，`str[i]`则其值高于 255。

在这种情况下，您应该使用模`%`运算符，这是旋转，而不仅仅是移位

# java - 战争文件应该有多大？

> ID：15905997
> 
> 赞同：20
> 
> 时间：2013-04-09T15:24:12.723
> 
> 标签：java, tomcat, tomcat7, war, grails-2.2

Tomcat 7 管理器将 war 文件大小限制为 50 Mo。

*   为什么限制为 50 Mo ？
*   战争文件的最大大小应该是多少？（在实践中）

我正在使用 Grails 2.2，它生成的最小 WAR 为 28 Mo。因此，很容易达到 50 Min 的限制。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-09T15:28:06.830

这只是您通过 Tomcat 7 管理器上传和部署的限制。您可以部署到 tomcat 服务器的 war 文件的大小确实没有限制。

[这](http://maxrohde.com/2011/04/27/large-war-file-cannot-be-deployed-in-tomcat-7/)是一个可以帮助您增加此上传大小的链接。

引用自链接——

> 转到管理器应用程序的 web.xml（例如，它可能在 /tomcat7/webapps/manager/WEB-INF/web.xml 下。增加 max-file-size 和 max-request-size：

```
<!– 50MB max –&gt;

 <max-file-size>52428800</max-file-size>

 <max-request-size>52428800</max-request-size>

 <file-size-threshold>0</file-size-threshold>

 </multipart-config> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-21T05:15:14.203

如果您使用的是 Tomcat 8，`max-file-size`则`web.xml`不再存在。相反，打开`conf/server.xml`并找到 HTTP 连接器的标记条目。然后添加

```
maxPostSize="0" 
```

此标签的属性和值。完成`conf/server.xml`文件编辑后，保存并重新启动 Apache Tomcat。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-09T15:29:57.447

50 MB 默认文件大小限制不是硬编码的，您可以在`web.xml`webapp 文件夹的 Manager 应用程序文件中更改它。您必须增加`max-file-size`and `max-request-size`：

```
<!– 50MB max –&gt;
<max-file-size>52428800</max-file-size>
<max-request-size>52428800</max-request-size>
<file-size-threshold>0</file-size-threshold> 
```

用适合您需要的值替换当前值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:30:05.573

转到管理器应用程序的 web.xml（例如，它可能位于`/tomcat7/webapps/manager/WEB-INF/web.xml`.

将 max-file-size 和 max-request-size 增加到例如 100Mb

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-07T01:21:57.837

在 tomcat7 中，更新`tomcat7/server.xml`. 我在ubuntu中安装了tomcat7，所以目录如下

```
ll /etc/tomcat7/
total 220
drwxr-xr-x   4 root root      4096 Oct  6 18:14 ./
drwxr-xr-x 136 root root     12288 Oct  6 16:12 ../
drwxrwxr-x   3 root tomcat7   4096 Sep 23 15:44 Catalina/
-rw-r--r--   1 root tomcat7   6506 Jun 27 12:48 catalina.properties
-rw-r--r--   1 root tomcat7   1394 Jan 25  2014 context.xml
-rw-r--r--   1 root tomcat7   2370 Feb 18  2016 logging.properties
drwxr-xr-x   2 root tomcat7   4096 Sep 23 16:06 policy.d/
-rw-r--r--   1 root tomcat7   6716 Oct  6 18:14 server.xml
-rw-r-----   1 root tomcat7   1607 Sep 23 15:50 tomcat-users.xml
-rw-r--r--   1 root tomcat7 168099 Nov 25  2015 web.xml 
```

您会在 conf 文件中看到连接器部分`etc/tomcat7/server.xml`，

```
<!-- A "Connector" represents an endpoint by which requests are received
     and responses are returned. Documentation at :
     Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
     Java AJP  Connector: /docs/config/ajp.html
     APR (HTTP/AJP) Connector: /docs/apr.html
     Define a non-SSL HTTP/1.1 Connector on port 8080
-->
<Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="20000"
           URIEncoding="UTF-8"
           redirectPort="8443"/> 
```

停止tomcat并`maxPostSize`在最后添加，

```
sudo service tomcat7 stop 
```

**更新 server.xml 中的连接器，**

```
<!-- A "Connector" represents an endpoint by which requests are received
     and responses are returned. Documentation at :
     Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
     Java AJP  Connector: /docs/config/ajp.html
     APR (HTTP/AJP) Connector: /docs/apr.html
     Define a non-SSL HTTP/1.1 Connector on port 8080
-->
<Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="20000"
           URIEncoding="UTF-8"
           redirectPort="8443" 
           maxPostSize="57000000"/> 
```

然后重启tomcat。

```
sudo service tomcat7 start 
```