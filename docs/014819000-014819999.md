# StackOverflow 问答 14819000-14819999

# jquery - 最简单的 jQuery .ajax 找不到 json 文件

> ID：14819001
> 
> 赞同：1
> 
> 时间：2013-02-11T19:00:44.853
> 
> 标签：jquery, json, iis

我在 IIS 目录中托管了以下 jQuery：

```
$(function () {
    $.ajax({
        "url": "sample.json",
        "type": "get",
        "dataType": "json",
        "success": function(data) {
            console.log(data);
        },
        "error": function(jqXHR, status, error) {
            console.log("status:",status, "error", error);
        }
   }) ;
}); 
```

当我浏览 html 文件时，我在 JS 控制台中得到了这个：

```
GET http://localhost/Ajax/sample.json 404 (Not Found) jquery-1.9.0.min.js:3
status: error error Not Found app.js:18 
```

它就在目录中。当我使用 /sample.json 时，我得到：

```
GET http://localhost/sample.json 404 (Not Found) jquery-1.9.0.min.js:3
status: error error Not Found 
```

如何让它找到本地文件并执行 ajax 调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T19:10:20.750

由于这是 IIS，您可能会收到 404 错误的子类型，即 404.3 错误 — 来自丢失的 MIME 映射。JSON 文件未注册为 IIS 默认提供的服务。进入 INETMGR 并将扩展添加到您的 MIME 映射中。

（网站——MIME 类型——添加——json：application/json）

![在此处输入图像描述](../Images/2f8e942331b4c18098cb210f95a94699.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T14:05:10.190

还要记住，如果你的文件有扩展名 ".json" ，那么它必须包含**正确的 json 对象**，否则你的请求将失败......

# javascript - 下拉菜单在 HTTPS 中不起作用，但在 HTTP 中可以正常工作

> ID：14819004
> 
> 赞同：1
> 
> 时间：2013-02-11T19:00:50.613
> 
> 标签：javascript, wordpress, dropdownbox

在客户网站上，当我通过 HTTPS 查看页面时，我为 3 种产品设置的下拉菜单不起作用。

它正在使用 HTTP：[http ://bit.ly/WeY3NP](http://bit.ly/WeY3NP)

在这里它不适用于 HTTPS：[http ://bit.ly/X0iHTo](http://bit.ly/X0iHTo)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:17:56.123

JQuery 未正确包含在 https 中。

使用 https:// 时，您可以在 chrome 开发者控制台中看到 $ 未定义。我现在无法测试，但我怀疑如果你以不同的方式包含 JQuery，它会起作用。

改变 ：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

到：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

# ios - “使用未声明的标识符” - Objective C

> ID：14819006
> 
> 赞同：-3
> 
> 时间：2013-02-11T19:01:08.030
> 
> 标签：ios, objective-c, undeclared-identifier

首先，我是 Objective C 的新手。我想开发我的第一个应用程序，我想使用 2 个不同的故事板。一款适用于 iPhone 4/4S，一款适用于 iPhone 5 屏幕尺寸。[我在如何切换到 iPhone 5 的不同故事板中](https://stackoverflow.com/questions/12696242/how-to-switch-to-different-storyboard-for-iphone-5)找到了来自 lionserdar 的非常好的代码？

我的问题是当我将代码添加到我的 AppDelegate.m 时，我遇到了这个问题；

**“使用未声明的标识符“InitializeStoryBoardBasedOnScreenSize”**

而且我不知道如何解决它。已经谢谢了。

```
-(void)initializeStoryBoardBasedOnScreenSize {
    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone) { // The iOS device = iPhone or iPod Touch

        CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

        if (iOSDeviceScreenSize.height == 480)
        {   // iPhone 3GS, 4, and 4S and iPod Touch 3rd and 4th generation: 3.5 inch screen (diagonally measured)

            // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone35
            UIStoryboard *iPhone35Storyboard = [UIStoryboard storyboardWithName:@"Storyboard_iPhone35" bundle:nil];

            // Instantiate the initial view controller object from the storyboard
            UIViewController *initialViewController = [iPhone35Storyboard instantiateInitialViewController];

            // Instantiate a UIWindow object and initialize it with the screen size of the iOS device
            self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

            // Set the initial view controller to be the root view controller of the window object
            self.window.rootViewController  = initialViewController;

            // Set the window object to be the key window and show it
            [self.window makeKeyAndVisible];
       }

       if (iOSDeviceScreenSize.height == 568)
       {   // iPhone 5 and iPod Touch 5th generation: 4 inch screen (diagonally measured)

           // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone4
           UIStoryboard *iPhone4Storyboard = [UIStoryboard storyboardWithName:@"Storyboard_iPhone4" bundle:nil];

           // Instantiate the initial view controller object from the storyboard
           UIViewController *initialViewController = [iPhone4Storyboard instantiateInitialViewController];

           // Instantiate a UIWindow object and initialize it with the screen size of the iOS device
           self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

           // Set the initial view controller to be the root view controller of the window object
           self.window.rootViewController  = initialViewController;

           // Set the window object to be the key window and show it
           [self.window makeKeyAndVisible];
       }

   } else if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)

   {   // The iOS device = iPad

       UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
       UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
       splitViewController.delegate = (id)navigationController.topViewController;

   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:04:53.840

大写“I”不同于 InitializeStoryBoardBasedOnScreenSize 和 InitializeStoryBoardBasedOnScreenSize？

# silverlight-4.0 - Safari 下载旧版 Silverlight（获取 SL 4 而不是 SL 5）

> ID：14819008
> 
> 赞同：9
> 
> 时间：2013-02-11T19:01:23.073
> 
> 标签：silverlight-4.0, safari, silverlight-5.0

我有一个使用**Silverlight 5**的网站，当来自 Mac 的用户想要使用 Safari 访问该网站时（因为 FF 和 Chrome 无法正常工作），Safari 会显示一条消息：“您需要安装 Silverlight，请单击此处”，当用户点击它，Safari 开始下载**Silverlight 4**。这意味着用户必须卸载该版本并手动访问[http://www.microsoft.com/silverlight/](http://www.microsoft.com/silverlight/)并下载正确的版本 (Silverlight 5)。我该如何解决这个问题？，因为它发生在所有 mac 用户身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:00:45.673

这是我以前问的问题。它的关闭和否决投票。:) [https://stackoverflow.com/q/14746701/413032](https://stackoverflow.com/q/14746701/413032)

无论如何，谢谢@ jv42 与 Firefox 合作解决了我的问题。

我不确定我的问题是否更适合 SuperUser 或 StackOverFlow。没关系，解决了。希望这对其他人有帮助。

它非常奇怪的firefox也下载相同的文件。但是当你安装 firefox 下载的文件问题就消失了！诡异的 ！

# c - 从 C++/CLI 到 C 的字节数组

> ID：14819009
> 
> 赞同：0
> 
> 时间：2013-02-11T19:01:23.500
> 
> 标签：c, c++-cli, visual-c++-2012

我在 Visual c++ 中有一个函数，如下所示：

```
 DoSomething(IVector<unsigned char>^ inputBytes) 
```

用于传递字节数组。在这个方法中，我需要访问一个接受字节数组参数（inputBytes）的 C 类方法。我在 C 类中放置了这样的方法

```
 void TestFunction(unsigned char* testdata[]) 
```

但它会抛出一个错误。c中字节数组的语法是什么？如何将此字节数组从 c++ 传递给 c。谁能帮我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:15:37.620

您在 C 函数中声明了指向 char 的指针数组。我不知道 C++/CLI，所以完全不确定，但正确的是其中之一，我认为：

```
void TestFunction(unsigned char* testdata) 
```

或出于许多目的完全相等（仅细微差别）：

```
void TestFunction(unsigned char testdata[]) 
```

首先是指向字符的指针，或者一些字符，例如 C 风格的字符串。其次是一些字符的数组，在 C 中它几乎与指向 char 的指针相同。

很可能您需要添加一个 int 参数，告诉字节数，因为 C 数组不知道自己的大小（它们基本上是美化的指针，正如我上面所说），除非您可以通过其他方式知道大小（如 C 字符串在第一个 0 字节处结束）。

# c - 使用动态内存管理函数导致崩溃

> ID：14819011
> 
> 赞同：0
> 
> 时间：2013-02-11T19:01:28.783
> 
> 标签：c, arguments, malloc

我最近开始重写我开始创建的参数处理代码，并且我添加了对动态内存管理函数（malloc、realloc、free）的利用，但是在添加了这些函数之后，当我尝试执行一个示例时，我遇到了奇怪的崩溃。

以下是我的程序的输出：

> charles@draton-generico:~/Documents/C/C89/SDL_Work/2D-game-base$ ./game-base-02-alt-2 --l
> 
> 成功退出参数捕获循环。
> 
> ==>继续执行。
> 
> *** 检测到 glibc****./game-base-02-alt-2: realloc(): 下一个尺寸无效：0x000000000157c010 ** **

 *输出这么多后它只是挂起。

以下是我的代码：

```
/* 
 * CREATED BY:  Charles Edwin Swain 3rd
 * DATE OF PROJECT BEGINNING:  28/1/2013
 */

#include <stdio.h>
#include <stdlib.h>

int main(int argc, char** argv)
{
int* bse = malloc(3 + 5 + 5 + argc);
if (bse == NULL)
{
    if (fprintf(stderr, "Call to malloc failed, bse = NULL.\n==>Will now exit.\n") <= 0) exit(-2);
    exit(-1);
}
*(bse + 0) = 0;
while (*(bse + 0) < (3 + 5 + 5 + argc))
{
    *(bse + *(bse + 0)) = 0;
    *(bse + 0) = *(bse + 0) + 1;
}
*(bse + 0) = 0;
*(bse + 1) = -1;
/*THIS DETERMINES THE SIZE OF THE LARGEST ARGV CHARACTER STRING.*/
while (*(bse + 3) < argc)
{
    while (*(bse + 4) != -1)
    {
        if (argv[*(bse + 3)][*(bse + 4)] == '\0')
        {
            if ((*(bse + 4) + 1) > *(bse + 5)) *(bse + 5) = *(bse + 4) + 1;
            *(bse + 4) = -1;
        }
        else if (*(bse + 4) == 32766)
        {
            *(bse + 3 + 5 + 5 + *(bse + 3)) = 1;
            *(bse + 4) = -1;
        }
        else *(bse + 4) = *(bse + 4) + 1;
    }
    *(bse + 3) = *(bse + 3) + 1;
    *(bse + 4) = 0;
}
*(bse + 3) = 0;
/*ENSURING THAT SPACE FOR RETREIVED ARGV CHARACTER STRINGS IS AT LEAST THE SIZE OF THE LARGEST CHECKED FOR SPECIFIC STRING ON LINE BELOW.*/
if (*(bse + 5) < 10) *(bse + 5) = 10;
/*THIS IS (IN SOME CASES WAS) THE BIG ARGV CATCHING LOOP.*/
/*ERASED CONTENTS OF, AM REWRITING CODE.*/
while (*(bse + 3) < argc)
{
    *(bse + 3) = argc;
}
if (fprintf(stdout, "Successfully exited argument catching loop.\n==>Continuing execution.\n") <= 0)
{
    while ((*(bse + 1) <= 0)&&(*(bse + 2) < 50))
    {
        *(bse + 1) = fprintf(stderr, "A function (fprintf) failed when outputting a notification informing of having 'properly' left the argument catching loop.\n==>Will now exit.\n");
        *(bse + 2) = *(bse + 2) + 1;
    }
    free(bse);
    exit(-1);
}

/*SET DEFAULTS HERE*/

bse = realloc(bse, 3);
if (bse == NULL)
{
    if (fprintf(stderr, "Call to realloc failed, bse = NULL.\n==>Will now exit.\n") <= 0) exit(-2);
    exit(-1);
}

/*END OF CODE.*/
free(bse);
exit(0);
} 
```

我很想把它变成一种学习体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:05:09.490

`malloc()`并且`realloc()`不知道您将在返回的指针指向的内存中存储哪种数据类型。所以他们只是分配了一些**字节**——他们并没有神奇地将他们的参数乘以`sizeof(int)`. 所以你想要的是：

```
int *bse = malloc((3 + 5 + 5 + argc) * sizeof(*bse)); 
```

和类似的`realloc()`。*

# c# - 有时我想要任何“T”时应该使用泛型吗？

> ID：14819020
> 
> 赞同：0
> 
> 时间：2013-02-11T19:02:16.103
> 
> 标签：c#, generics

我正在制作一个关于工厂的游戏。工厂里装满了东西的板条箱被搬来搬去。有时会有包含装有物品的板条箱的仓库，并且工作人员需要在可用的板条箱中查找某些类型的物品（例如，工作人员可能会调用一个函数，询问“任何仓库中是否有任何装有食物的板条箱？ ”，如果是这样，他会去捡起它并把它移到某个地方。

用泛型定义“Crate”和“Furniture”类（从 Depot 继承）来指定它们包含的对象类型似乎非常有用。下面是我的 Crate 类和 Furniture 类的片段，然后是我正在努力解决的 Depot 类：

```
public class Crate<I> : Item 
    where I : Item
{
}

public abstract class Furniture<I>
    where I : Item
{
}

public class Depot : Furniture<Crate<???>>
{
    //...
} 
```

泛型在这里很有用，因为我可以编写如下搜索方法：

```
public I FindItem<I,F>
 where I:Item
 where F:Furniture<I>
{
    //pseudocode

    //foreach (furniture f in the factory);
    //if (f is F) foreach (I i in f)
    //if (i.IsAvailable) return i;

    //return null;
} 
```

现在，我的问题是，与大多数其他家具不同，仓库可以携带装有任何东西的板条箱（例如，食物板条箱和原材料板条箱）。但我不能只指定 Crate(Item)，因为它会弄乱我的搜索算法 - 寻找 Crates of Food 将返回 null，因为它只包含 Crates of Items。

我是否应该为 Crate 保留泛型但为 StorageFurniture 废弃它们，并使我的搜索算法稍长一些（即搜索所有家具，而不仅仅是那些包含正确类型项目的家具），还是有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:14:38.647

考虑为 Crate-able 对象创建一个根类或接口：

```
public class Crate<I> : Item 
    where I : Item
{
    private int capacity;
    private List<I> contents;
    //... and so on
}

public interface ICrateable{
// define common features such as name, ID, description etc here
}

public class Shirt: ICrateable{
// implement interface
}

public class DepotSlot : StorageFurniture<Crate<ICrateable>>
{
    // now you can add any Crate<XYZ> here
} 
```

如果您正在处理 Crate-s，那么只有对它们进行常用操作才有意义——打开它们、关闭它们、在它们上面贴标签、丢弃它们、将它们装载到卡车上、卸载它们等等。所有这些常见的可以在根（抽象？）类或接口中抽象特征。

如果您没有对板条箱进行任何预定义操作，您不妨制作它们`oject`并放弃泛型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:25:46.877

如果您的游戏将在您的商店中“自成一体”，这样更改基本类型和重新编译所有内容都不会造成过多负担，我建议在基本“GameObject”类型中拥有许多虚拟方法可能是有利的，并且有一个字段可以指示（通过“标志”枚举）哪些方法将对给定对象执行某些操作。如果一个人有一个游戏对象列表，并且想要对该列表中与该操作相关的所有对象执行某些操作（例如，炸弹爆炸并且想要“损坏”爆炸范围内的所有可损坏物品），那么无条件更快调用一个虚方法对所有对象来说都是通用的——即使是那些它什么都不做的对象——而不是测试每个对象是否实现了一个接口，如果是，就在该对象上调用该接口。

在某些情况下，具有指示哪些类型的调用与对象相关的字段可以通过允许系统避免在虚拟方法调用之前执行一些工作来提高性能。例如，如果测试一个字段会显示一个对象不会对`TakeBombDamage`调用做任何事情，那么就不必浪费时间来计算该对象将受到的伤害量。

如果采取向基类添加虚拟方法以支持将出现在某些但不是所有对象中的能力的方法，则可以最大限度地减少执行运行时类型转换的需要。这反过来将减少对泛型的需求。“kitchen-sink 基类”方法在更改基类很麻烦的情况下并不好，但在性能很重要的情况下可能会有所帮助，特别是对于存在合理默认值的行为（例如，如果“FlashingStrobe”游戏对象调用`NoticeFlashingStrobe`附近的对象，不关心闪烁频闪的对象可能在这种方法中明智地什么都不做）。

# php - 如何格式化/清理我的 wordpress 博客中的帖子名称

> ID：14819022
> 
> 赞同：0
> 
> 时间：2013-02-11T19:02:18.673
> 
> 标签：php, wordpress

我有一个包含 2000 个帖子的 wordpress 博客。每个帖子的名称是一个人的名字。但是名字和姓氏用'-'分隔，我想自动化从帖子名称中删除这些'-'的过程。

例子 -

```
 Present name of a post:  Isaac-Newton
      Desired name          :  Isaac Newton 
```

是否有任何脚本或代码来执行此操作，因为这将是一项繁琐的工作，如果我必须手动编辑所有帖子的名称。任何帮助，建议什么可能有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:12:03.883

您可以在 PhpMyadmin 中打开 WP 数据库并运行如下内容：

```
update wp_posts set post_title = replace(post_title, "-", " ") WHERE post_title LIKE '%-%'; 
```

显然首先备份数据库，以确保您不会完全搞砸它。

# php - 如果用户输入无效则停止

> ID：14819029
> 
> 赞同：0
> 
> 时间：2013-02-11T19:02:26.733
> 
> 标签：php

我想检查/过滤用户输入。例如，如果用户选择的值与我们在数据库上的值不匹配，我希望脚本/查询停止——显然是出于安全原因。

哪个是对的？

```
if (!floatval($esc_size || $esc_sizeid) )
    {
    echo "Invalid Size </br>";

    $thread_id = mysqli_thread_id($con);

/* Kill connection */
mysqli_kill($link, $thread_id);
    mysqli_close($link);
    } 
```

或者只是简单地

```
exit; 
```

还是有更好、更安全的方法？

谢谢，珍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:12:58.053

`exit()`将完全停止脚本。PHP 在服务器端运行，您可以完全控制执行的代码。因此，安全性在这里不是问题。

从用户界面的角度来看，最好将数据库等的任何更新放在 if 语句中，该语句仅在用户输入有效时运行，如果不是，则向用户显示有关他/她的内容的友好消息做错了。

# python - 有没有办法捕捉列表理解中的缺失？

> ID：14819032
> 
> 赞同：3
> 
> 时间：2013-02-11T19:02:31.507
> 
> 标签：python

基于一个简单的列表理解：

```
yay = [ i for i in a if a[i] ]
nay = [ i for i in a if not a[i] ] 
```

我想知道是否有一种方法可以同时分配`yay`和`nay`值（即条件的命中和未命中）？

看起来像这样的东西

```
( yay , nay ) = ... 
```

我对可读性和速度感到好奇（我有点惊讶地看到两个列表推导比附加到任一列表的单个 for 循环快 5% 左右）

* * *

更新：

最初的示例是在字典中获取“真”和“假”值键的列表......

```
a = {i: i >= 50 for i in range(100)}

yay = [k for k, v in a.items() if v]
nay = [k for k, v in a.items() if not v] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T19:10:07.053

这里通常的解决方案是不要全神贯注于使用列表理解的想法。只需使用一个`for`循环：

```
yay, nay = [], []
for i in a:
    if somecondition(i):
        yay.append(i)
    else:
        nay.append(i) 
```

如果您发现自己经常这样做，那么只需将代码移出到一个函数中：

```
def yesno(seq, cond):
    yay, nay = [], []
    for i in seq:
        if cond(i):
            yay.append(i)
        else:
            nay.append(i)
    return yay, nay

yay, nay = yesno(a, lambda x: a[x]) 
```

评论表明这比列表理解要慢。将条件作为 lambda 传递不可避免地会产生很大的影响，我认为您对此无能为力，但一些性能影响可能来自查找`append`方法，并且可以改进：

```
def yesno(seq, cond):
    yay, nay = [], []
    yes, no = yay.append, nay.append
    for i in seq:
        if cond(i):
            yes(i)
        else:
            no(i)
    return yay, nay 
```

我不知道这是否有很大的不同，但计时可能会很有趣。

在评论中@martineau 建议使用生成器并将其与`any()`. 我将在此处包含它，但我将替换`any`为 itertools 配方以使用迭代器：

```
def consume(iterator, n):
    "Advance the iterator n-steps ahead. If n is none, consume entirely."
    # Use functions that consume iterators at C speed.
    if n is None:
        # feed the entire iterator into a zero-length deque
        collections.deque(iterator, maxlen=0)
    else:
        # advance to the empty slice starting at position n
        next(islice(iterator, n, n), None) 
```

然后你可以写：

```
yay, nay = [], []
consume((yay if a[i] else nay).append(i) for i in a) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T19:17:15.950

我仍然会说，您的做法更具可读性，应该是建议的方法，但无论如何，如果您正在寻找替代方案，您可以期待 itertools 的解决方案

```
>>> from itertools import compress, imap
>>> from operator import not_
>>> yay, nay = compress(a,a.values()), compress(a, imap(not_,a.values())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:05:58.457

这可以通过以下方式完成：

```
yay, nay = zip(*[(k, None) if v else (None, k) for k, v in a.items()])
yay, nay = filter(None, yay), filter(None, nay) 
```

至于它是否会更快......也许对于大量列表。否则，这可能无关紧要。

自然，如果`None`是您列表中的一个值，您将需要将其换成另一个哨兵并使用 进行身份检查`filter()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T19:06:09.557

您也许可以使用字典推导，但我有理由确定您不能*使用列表推导来完成您的要求。假设数据是或可以排序**我可能会使用[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby).

```
results = itertools.groupby(sorted_a, bool) 
```

*资格：好的，Lattyware 的回答表明您*可以*`None`，但它也会为可迭代的每个成员生成一个具有值的元组。IMO 那是很多浪费。虽然我承认我什至没有考虑到这一点，但我并不为我没有感到羞耻。

**已排序：它需要按与分组依据相同的键进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T18:57:44.997

编辑

哦，好吧，我写了一个与 Duncan 的一个非常相似的解决方案。所以我删除了我写的东西，我让我认为是最好的解决方案，将一个 Duncan 的解决方案和 martineau 的建议混合在一起（在我看来，使用**any()比使用****list()**或列表更可取）像我写的那样理解； **any()**是个好主意，这比导入**consume()** IMO 的复杂性要好）

```
def disting(L):
        dust,right = [],[]
        dustapp = dust.append
        rightapp = right.append
        any(rightapp(x) if x else dustapp(x) for x in L)
        return right,dust

for seq in ((10,None,'a',0,None,45,'qada',False,True,0,456),
            [False,0,None,104,True,str,'',88,'AA',__name__]):
    yay,nay = disting(seq)     
    print 'seq == %r\nyay == %r\nnay == %r' % (seq,yay,nay)
    print '---------------------------------------' 
```

结果

```
seq == (10, None, 'a', 0, None, 45, 'qada', False, True, 0, 456)
yay == [10, 'a', 45, 'qada', True, 456]
nay == [None, 0, None, False, 0]
---------------------------------------
seq == [False, 0, None, 104, True, <type 'str'>, '', 88, 'AA', '__main__']
yay == [104, True, <type 'str'>, 88, 'AA', '__main__']
nay == [False, 0, None, '']
--------------------------------------- 
```

顺便说一句，使用**any()**是有效的，因为`rightapp(x)`并`dustapp(x)`返回 None。如果返回 True 或等价于 True，则**any()**内的迭代将停止！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T22:23:17.273

它不漂亮，但你可以在这几行中做一些事情：

```
nay = []
yay = [foo for foo in foos if condition or nay.append(foo)] 
```

这利用了`or`操作员的短路。

# java - jmagick 出错

> ID：14819033
> 
> 赞同：0
> 
> 时间：2013-02-11T19:02:40.167
> 
> 标签：java, jmagick

我正在努力在依赖于 Jmagick（和 ImageMagick）的 OSX 10.7（Lion）上安装现有的 Java 应用程序，并且我尝试安装 jmagick。当我使用命令时

```
./configure --with-java-home=/System/Library/Frameworks/JavaVM.framework/Versions/Current --with-magick-home=/usr/local/Cellar/imagemagick/6.8.0-10 --with-magick-inc-dir=/usr/local/Cellar/imagemagick/6.8.0-10/include/ImageMagick/ 
```

我得到输出

```
checking build system type... i686-apple-darwin11.4.2
checking host system type... i686-apple-darwin11.4.2
checking target system type... i686-apple-darwin11.4.2
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for a BSD-compatible install... /usr/bin/install -c
checking for getconf... /usr/bin/getconf
checking whether large file support needs explicit enabling... no
checking for X... no
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking jni.h usability... yes
checking jni.h presence... yes
checking for jni.h... yes
checking for java... /usr/bin/java
checking for javac... /usr/bin/javac
checking for javah... /usr/bin/javah
checking for jar... /usr/bin/jar
checking for javadoc... /usr/bin/javadoc
checking for MagickCore-config... /usr/local/Cellar/imagemagick/6.8.0-10/bin/MagickCore-config
/usr/local/Cellar/imagemagick/6.8.0-10/bin/MagickCore-config: line 50: pkg-config: command not found
/usr/local/Cellar/imagemagick/6.8.0-10/bin/MagickCore-config: line 53: pkg-config: command not found
/usr/local/Cellar/imagemagick/6.8.0-10/bin/MagickCore-config: line 47: pkg-config: command not found
checking magick/api.h usability... yes
checking magick/api.h presence... yes
checking for magick/api.h... yes
checking for ConstituteImage in -lMagick... no
checking for a sed that does not truncate output... /usr/bin/sed
checking for ld used by gcc... /usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld
checking if the linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) is GNU ld... no
checking for /usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/nm
checking whether ln -s works... yes
checking how to recognise dependent libraries... pass_all
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking how to run the C++ preprocessor... g++ -E
checking for g77... no
checking for xlf... no
checking for f77... no
checking for frt... no
checking for pgf77... no
checking for cf77... no
checking for fort77... no
checking for fl32... no
checking for af77... no
checking for xlf90... no
checking for f90... no
checking for pgf90... no
checking for pghpf... no
checking for epcf90... no
checking for gfortran... no
checking for g95... no
checking for xlf95... no
checking for f95... no
checking for fort... no
checking for ifort... no
checking for ifc... no
checking for efc... no
checking for pgf95... no
checking for lf95... no
checking for ftn... no
checking whether we are using the GNU Fortran 77 compiler... no
checking whether  accepts -g... no
checking the maximum length of command line arguments... 196608
checking command to parse /usr/bin/nm output from gcc object... ok
checking for objdir... .libs
checking for ar... ar
checking for ranlib... ranlib
checking for strip... strip
checking if gcc static flag  works... yes
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fno-common
checking if gcc PIC flag -fno-common works... yes
checking if gcc supports -c -o file.o... yes
checking whether the gcc linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) supports shared libraries... yes
checking dynamic linker characteristics... darwin11.4.2 dyld
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
configure: creating libtool
appending configuration tag "CXX" to libtool
rm: conftest.dSYM: is a directory
checking for ld used by g++... /usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld
checking if the linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) is GNU ld... no
checking whether the g++ linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) supports shared libraries... yes
checking for g++ option to produce PIC... -fno-common
checking if g++ PIC flag -fno-common works... rm: conftest.dSYM: is a directory
yes
checking if g++ supports -c -o file.o... rm: conftest.dSYM: is a directory
yes
checking whether the g++ linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) supports shared libraries... yes
checking dynamic linker characteristics... darwin11.4.2 dyld
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
appending configuration tag "F77" to libtool
configure: creating ./config.status
config.status: creating Make.def 
```

那我试试

```
sudo make all 
```

并得到错误

```
make[1]: Entering directory `/Users/olegsuzaev/jmagick-6.4.0/src'make[2]: Entering directory `/Users/olegsuzaev/jmagick-6.4.0/src/magick'../../Make.rules:175: *** missing separator.  Stop.
make[2]: Leaving directory `/Users/olegsuzaev/jmagick-6.4.0/src/magick'
make[1]: *** [dir_target] Error 2
make[1]: Leaving directory `/Users/olegsuzaev/jmagick-6.4.0/src'
make: *** [dir_target] Error 2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T13:16:13.533

在 Make.rules 文件的第 175 行和第 176 行，行首有 4 个空格而不是制表符 - 用制表符替换空格，make 会成功。

# asp.net - asp.net bundler 不适用于 .axd 文件

> ID：14819035
> 
> 赞同：1
> 
> 时间：2013-02-11T19:02:44.163
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, httphandler, bundling-and-minification

我目前正在使用 web 优化捆绑器，它是 .net 框架的一部分，它将我的 javascript 和 css 捆绑到一个文件中。这很好用。

我遇到了一个问题。请参阅以下代码：

```
 BundleTable.Bundles.Add(new ScriptBundle("mybundle").Include( 
                "~/Scripts/globalize.js", 
                "~/Scripts/jquery.validate.js", 
                string.Format("~/resources.axd"))); 
```

这捆绑了文件中的所有 javascript，但我也想捆绑我的 .axd http 处理程序的输出。这将返回 javascript。但是，javascript 永远不会包含在包中。如果我在浏览器中运行处理程序，没问题，会返回 javascript。

我想知道捆绑程序可能无法识别 .axd 扩展名，因此不会尝试请求文件。如果是这种情况和解决方法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:43:51.210

正确，您只能将文件包含到包中，它不会为您向 axd 发出请求。您可以做的是手动点击 axd，然后将文件保存到磁盘并将其包含到您的包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T18:40:41.107

我刚刚为 resx 编写了一个脚本包 - 你可以在这里找到源代码

[https://github.com/MrAntix/sandbox-resx-script-bundling](https://github.com/MrAntix/sandbox-resx-script-bundling)

在 BundleConfig 中，添加您的捆绑包...

```
bundles.Add(
  new ResxScriptBundle("~/bundles/local")
      .Include<JsResources>("app")
  ); 
```

它为这样的每个资源创建一个模型......

```
window.resources=window.resources||{};
window.resources.app = {
  "HelloWorld": "Hello World, from JSResources.resx"
}; 
```

你可以像这样在你的JS中使用它......

```
$("h1").append(window.resources.app.HelloWorld); 
```

... 例如

# jquery - jQuery 用户界面；知道孩子#当拖动可排序项目时

> ID：14819039
> 
> 赞同：1
> 
> 时间：2013-02-11T19:03:11.693
> 
> 标签：jquery, jquery-ui, parent-child

我有可排序的列表，该列表基于通过添加按钮的自定义用户输入而增长。列表中的顶部和底部项目是最大值。和分钟。值，我需要知道它们何时被拖动以及到哪里。为了弄清楚这一点，我查看了 Safari Inspector 中的“event”和“ui”对象，以了解这些对象是否包含抓取的 HTML-Object 的子索引（编号）。

这是我的代码：

```
// Define the sorting settings/rules of the dsList (items list)
$('#dsList').sortable({
    handle: '.handle',
    cursor: 'move',
    axis: 'y',
    opacity: 0.7,
    scroll: true,
    start: function(event, ui) {

    },
    update: function(event, ui) {
        // Find out if the first or last item was dragged
        var firstDragged = false;
        var lastDragged = false;

        if ($(ui.item[0]).find('.firstItem').val() != undefined) {
            firstDragged = true;
        }

        if ($(ui.item[0]).find('.lastItem').val() != undefined) {
            lastDragged = true;
        }

        // Calculate the list values
        var itemsCount = $('#dsList').children().length;
        //console.log(itemsCount);

        // Check if the first item dragged below the last
        console.log(ui);

        // Update list settings
        updateListSettings();

        // Refresh the list
        updateList();
    }
}); 
```

这里的问题是“this”代表父级（#dsList），我找不到我正在拖动的对象的子级编号。我可以计算元素移动了多少像素，然后计算它的高度，但我不喜欢这个想法在未来的可伸缩性方面。

知道如何根据其父元素（#dsList）获取拖动元素的childCount吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:09:05.683

如果我对您的理解正确，您想知道拖动的对象是其兄弟姐妹列表中的第一个还是最后一个。如果这个假设是正确的，那么我建议使用：

```
if (ui.item.prevAll().length == 0) {
    firstDragged = true;
}

if (ui.item.nextAll().length == 0) {
    lastDragged = true;
} 
```

2 月 12 日更新：在放弃之前，我在[这个 jsfiddle](http://jsfiddle.net/martyk/LqZPU/4/)中尝试了一种不同的方法，它对我有用：

```
$( "#dslist" ).sortable({
    opacity: 0.7
    ,revert:600
    ,delay:100
    ,scroll: true
    ,start: function( event, ui ) {
        var $items = $(this).children(
            ":not(.ui-sortable-helper,.ui-sortable-placeholder)"
        );
        $(this).data("firstDragged", ui.item.is( $items.first() ));
        $(this).data("lastDragged", ui.item.is( $items.last() ));
    }
    ,update: function( event, ui ) {
        console.log("firstDragged: " + $(this).data("firstDragged"));
        console.log("lastDragged: " + $(this).data("lastDragged"));
    }
}); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:19:55.587

找到了一个不太漂亮的修复程序，但它至少有效：

```
 update: function(event, ui) {
        // Calculate the list values
        var itemsCount = $('#dsList').children().length;

        // Refresh the list to be able to search for the change
        $(this).sortable('refreshPositions');

        // Check if the first item dragged below the last
        if ($('#dsList .dsListItem:nth-last-child(1) .firstItem').attr('autocomplete') == 'off') {
            console.log('first item is moved beyond last');
        }

        // Check if the last item dragged above the first
        if ($('#dsList .dsListItem:nth-child(1) .lastItem').attr('autocomplete') == 'off') {
            console.log('last item is moved above first');
        }

        // Update list settings
        updateListSettings();

        // Refresh the list
        updateList();
    } 
```

不知何故，返回的对象不是完全空的，所以我必须看看里面是否有一个对象。这样它可以检查 .firstItem 是否在堆的末尾结束，反之亦然。

```
$(this).sortable('refreshPositions'); 
```

.. 是必须的！或者对象将被混搭，即使使用更新调用。

# three.js - three.js - 使用 WebGLDeferredRenderer 时无法渲染 THREE.Line

> ID：14819040
> 
> 赞同：4
> 
> 时间：2013-02-11T19:03:17.963
> 
> 标签：three.js, webgl

我最近将我的场景转换为使用 a `WebGLDeferredRenderer`，因为它更容易实现 SSAO。但是，由于转换为延迟渲染器，我无法渲染`THREE.Line`对象。相反，我收到以下错误：

```
THREE.Material: 'shading' parameter is undefined. 
```

这是当我不使用延迟渲染器时可以正常工作的线条（网格）的代码：

```
var geometry = new THREE.Geometry();
geometry.vertices.push( new THREE.Vector3( -2500, 0, 0 ) );
geometry.vertices.push( new THREE.Vector3( 2500, 0, 0 ) );

linesMaterial = new THREE.LineBasicMaterial( {color: 0xb9b9b9, linewidth: 0.1} );

for ( var i = 0; i <= 50; i ++ ) {

    var line = new THREE.Line( geometry, linesMaterial );
    line.position.z = ( i * 100 ) - 2500;
    scene.add( line );

    var line = new THREE.Line( geometry, linesMaterial );
    line.position.x = ( i * 100 ) - 2500;
    line.rotation.y = 90 * Math.PI / 180;
    scene.add( line );

} 
```

我尝试将`shading`属性添加到`THREE.LineBasicMaterial`具有诸如之类的值，`THREE.FlatShading`但我仍然得到相同的错误。

该错误是从`THREE.Material`主 three.js 脚本的部分报告的。如果有帮助，我将使用 three.js 的稍微定制的版本 - <a href="http://alteredqualia.com/three/examples/js/three.max.deferredday.js" rel="nofollow"> http://alteredqualia.com/three/examples/js/three.max.deferredday.js

任何和所有的帮助表示赞赏！

**更新**

[这是一个快速破解](http://mrdoob.com/projects/htmleditor/#B/tVZtU9s4EP6c/gqVfnGvRg50mIKT9Iamob2ZdsqUXnv3UbY2sQ5L8kkygTL577eS7ZCA5zqdBmCwvFrts2961uOnbz9Nv/x9PiOFk+XrJ+PmMRgXwDg+B2MJjpG8YMaCm+zVbr5/vBc2rLspwa8GmeY35NavBhnLLxdG14rv57rUJiXPhuFnFLYlMwuhUtK+6isw81IvU1IIzkEF6cobTzrr46T1ZOxRGuDciMoRa/LJXuFclSaJNFzrjC6EK+qM5lomrjAA9B+bZLUoefsqhULR3ms0H2x4cz9vEa6ZrEqwCa4NKA4GjE2+Qfbuw1uYgzHAP7fiHaNdFAzNdiA7Nm6DcZtMdXXTAD0A2IH1s79OTx/P+lSrK13WTmjVC/JrKJW2rjI6B2uFWiSz+RxyN9US5bsN5x5Q003nzNpHBGny9cggH5m9fGSIN6XWshfjDiY0wiBJyFKbSxboisy1QZozWgLJ6gUyUuNErjnQhdaLEoILVRKURC0TYW2NLnAkSFH+Lvjk5dHJ8fBZfnDorYs5ichSKK6XVCgF5pvgriCTyYQMyXNy27dHKoaE4jZkoy219yAWhbun1whHZBUodRDiHFwxjIZJMCwmNgcFMemoahSCF0q46HkgXKaEZA78m3+d1yr3F4g0KkjswXB3HNEVLMmX959nM9pLepGPDX1PH4YYkyJ4m/aE5R1lJaTkICZMOcFKwWxKnKnReacVSFZVWOG0xf5T+ankgH+qMEynTUwy4w0p7ISUHNIjsmoCXPtOcYZdiO/QU5i4L9Htca7zWvp8+xFE0Qs0Ny1wrETrpFKu5awEr9WdCv+aGmzl7ByJqkLiEFcwDbsReXUU97RD0pskzM4BztMOpQGgeAmELxr9jlhHftyG3VD6LfQLL+lKHdpkAdjzztxsqb1rhW2LDDolihPbCbxrtKptEW2c+IohafMyIvuHiB8T/4d9/vPn7x8P50uBVf2IXWqwL7Y8/YA7b5gVebcbkdv202N4nZ3435j4421PDilm0M+LjVY6K5m7aESr4HHA9IwQEZ8igYjDET7GPrl+8eIFWd+MkEWP8MCvaJ3cxoW7CNq0hLi2ixeh9d98iRFgPySjVQ21pIxj1wWwLjW7g7/+P/igarRjQdV3y8kQNdFkQc//wGY9OP6Rp6v1vVhtM82age7I5l+kVnca5KhxZrDNo05v64b56J2QgZiQCLBokqkcqNLLaFNvfVObRdTRYntDN1SDcxuDY5w0n574Keo/jv8D)公开版本的 Three.js 展示此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:40:59.190

这是因为`LineBasicMaterial`WebGLDeferredRenderer （尚）不支持行和。

作为一种解决方法，您可以这样做：

```
var geometry = new THREE.PlaneGeometry( 5000, 5000, 50, 50 );
var material = new THREE.MeshBasicMaterial( { color: 0xb9b9b9, wireframe: true } );
scene.add( new THREE.Mesh( geometry, material ) ); 
```

不幸`material.wireframeLinewidth`的是也不支持。

三.js r.55

# mysql - MySQL 从同一个表中的另一个引用行返回值

> ID：14819047
> 
> 赞同：1
> 
> 时间：2013-02-11T19:03:45.223
> 
> 标签：mysql

假设我有一张看起来像这样的表格：

```
+----+--------------+-------+----------------+------------+
| id | product_name | price | bulk_reference | bulk_count |
+----+--------------+-------+----------------+------------+
| 1  | xxxx         | 11.99 | 0              | 0          |
+----+--------------+-------+----------------+------------+
| 2  | zzzz         | 22.99 | 0              | 0          |
+----+--------------+-------+----------------+------------+
| 3  |              |       | 2              | 10         |
+----+--------------+-------+----------------+------------+ 
```

我可以选择所有产品等，没问题。但是 - 我需要做的是返回所有产品，但行 WHERE bulk_reference > 0 需要返回行中未设置的引用行值......在同一个结果集中。

我需要为某些领域做这件事。所以假设我想选择`product_name`ID 3 的字段。它应该`zzzz`在`bulk_reference`字段设置为 2 时返回，所以它应该从行 ID=2 中获取值。

我怎样才能只用 MySQL 做到这一点？

=======================================

# 更新：

到目前为止发布了所有答案，我收到错误消息 #1054`Unknown column 'p.bulk_reference' in 'field list'.`我不知道为什么会发生这种情况......

这是对发布的答案之一的改编：

```
SELECT p.id , 
   IF(p.bulk_reference>0,r.sales_price,p.sales_price) AS sales_price 
   , p.bulk_reference 
   , p.bulk_count 
FROM products_attribs_cz p 
LEFT JOIN products_attribs_cz r ON r.id = p.bulk_reference 
AND p.bulk_reference > 0 
WHERE p.id=166; 
```

但是，无论我尝试过什么解决方案，我总是会收到错误...

ID 在此表中是唯一的。正在选择的字段会更改并动态生成。总是只有一个结果。不是几个。我总是选择一个独特的行，但是，它是一个大包装的产品。例如，我们在行 ID=1 和 product_name=BlackBerry 上有一部 BlackBerry 手机。但在另一行 (ID=2)，我们有同一部手机的批量包装，因此 ID=2 & product_name=blank & bulk_reference=1。我们需要从 bulk_referenced 行返回产品的名称，因为它是相同的产品，只是在散装包装中。

（这个想法是批发商在批量订单上获得折扣。因此，如果订购 1 部手机，他们将获得正常价格，如果他们订购大量 10 部手机，他们将获得 20% 的折扣）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:44:58.227

可以使用 LEFT JOIN 获得结果，（假设我们保证该`id`列在 products 表上是唯一的）：

```
SELECT p.id
     , IF(p.bulk_reference>0,r.product_name,p.product_name) AS product_name
     , p.price
     , p.bulk_reference
     , p.bulk_count
  FROM products p
  LEFT
  JOIN products r
    ON r.id = p.bulk_reference AND p.bulk_reference > 0 
```

表示返回左侧表中的`LEFT JOIN`所有行，以及右侧表中的任何“匹配”行。在这种情况下，如果 bulk_reference 列的值大于零，我们只需要一个“匹配”行，因此我们可以将该条件包含在`ON`子句的谓词中。

“技巧”是在 SELECT 列表中使用条件测试。如果 bulk_reference 列大于零，我们从父行返回名称，否则，我们从当前行返回值。

（如果我们没有`id`唯一的保证，则需要修改该查询以保证返回的结果集与规范匹配。）

获得等效结果的另一种方法是在 SELECT 列表中使用相关子查询。（这不是最有效的方法，但它适用于返回的少量行。）

```
SELECT p.id
     , IF(p.bulk_reference > 0,
           ( SELECT r.product_name
               FROM products r
              WHERE r.id = p.bulk_reference
              ORDER BY r.id
              LIMIT 1
           ), p.product_name
       ) AS product_name
     , p.price
     , p.bulk_reference
     , p.bulk_count
  FROM products p 
```

这将要做的是：如果`bulk_reference`列值大于零，MySQL 将执行子查询以`product_name`从引用的行返回一个值。否则（即如果`bulk_reference`为空或不大于零，`product_name`则将返回存储在该行上的列中的值。

* * *

注意：上面的查询只`product_name`从引用的行中获取值；他们不对引用的行进行测试，并考虑到该引用行上的 product_name 实际上将从另一个父行中检索。

例如，考虑这组行：

```
 id  product_name  price  bulk_reference
  --  ------------  -----  --------------
   1  fee           11.99  0             
   2  fi            22.99  0             
   3  fo            25.99  2
   4  fum           28.99  3 
```

要从行 id=4 中获取 product_name，返回为“fi”，而不是“fo”...

```
SELECT p.id
     , IF(p.bulk_reference>0,
         IF(q.bulk_reference>0,
           IF(r.bulk_reference>0,s.product_name,r.product_name),
           q.product_name),
         p.product_name
       ) AS product_name
     , p.price
     , p.bulk_reference
     , p.bulk_count
  FROM products p
  LEFT
  JOIN products q
    ON q.id = p.bulk_reference AND q.bulk_reference > 0
  LEFT
  JOIN products r
    ON r.id = q.bulk_reference AND r.bulk_reference > 0
  LEFT
  JOIN products s
    ON s.id = r.bulk_reference AND s.bulk_reference > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:06:22.873

为您的具体示例尝试这样的操作：

```
SELECT P2.Product_Name
FROM Products P
  INNER JOIN Products P2 ON P.Bulk_Reference = P2.Id
WHERE P.Id = 3 
```

并返回所有产品名称：

```
SELECT CASE 
    WHEN P.Bulk_Reference = 0 THEN P.Product_Name 
    ELSE COALESCE(P2.Product_Name,'Unknown') END Product
FROM Products P
  LEFT JOIN Products P2 ON P.Bulk_Reference = P2.Id 
```

如果 Bulk_Reference > 0 AND Product_Name 为 NULL，我添加了 Unknown。这假定 Product_Name 为 NULL 且不为空。如果为空，则添加

```
COALESCE(NULLIF(P2.Product_Name,''),'Unknown') 
```

- 编辑

我没有看到您想从值为空白的参考字段中返回所有行值。上面的查询将以相同的方式工作 - 只需添加您的字段。

```
SELECT P.Id, 
    CASE WHEN P.Bulk_Reference = 0 THEN P.Product_Name 
    ELSE COALESCE(P2.Product_Name,'Unknown') END Product_Name, 
    CASE WHEN P.Bulk_Reference = 0 THEN P.Price 
    ELSE COALESCE(P2.Price,'Unknown') END Price,
    P.Bulk_Reference,
    CASE WHEN P.Bulk_Reference = 0 THEN P.Bulk_Count
    ELSE COALESCE(P2.Bulk_Count,0) END Bulk_Count
FROM Products P
  LEFT JOIN Products P2 ON P.Bulk_Reference = P2.Id 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:08:22.893

你可以这样做

```
select
  m.id,
  IF(m.product_name is null,l.product_name,m.product_name) as ProductName,
  m.bulk_reference
from mytable as m
  LEFT JOIN mytable as l ON l.id = m.bulk_reference 
```

如果 product_name 为 null，它将从连接表中获取。

# c# - 如何使用 C# 在 Twilio 中查找调用的父调用

> ID：14819049
> 
> 赞同：0
> 
> 时间：2013-02-11T19:03:50.867
> 
> 标签：c#, twilio, ivr

很抱歉这个措辞糟糕的问题。我正在使用 Twilio 并尝试为用户创建一些报告。我有几个不同的号码被呼叫，然后根据呼叫者在通话期间的操作，它们可能会被转移到我们的呼叫中心。

我需要知道每个号码转接的电话数量。

当他们调用时，会创建一个 CallSid。一旦调用者被转移，第二个 CallSid 就会创建一个名为 ParentCallSid 的新属性。第二次调用的 ParentCallSid 与第一次调用的 CallSid 匹配。

我需要获取 ParentCallSid 并找到原始的 CallSid，这样我才能看到他们拨打的号码。我将为列表中的每个呼叫执行此操作。所以它需要是某种循环。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:17:35.447

我不认为这个太难，这只是一个把碎片拼凑在一起的问题。如果您查看此示例： http: [//www.twilio.com/docs/api/rest/call#instance-get-example-1](http://www.twilio.com/docs/api/rest/call#instance-get-example-1)（选择 C#），您应该返回一个“调用”对象。

该对象的属性之一将是 ParentCallSid ，因此您可以从此更改上面的示例：

```
Console.WriteLine(call.StartTime); 
```

对此：

```
Console.WriteLine(call.ParentCallSid); 
```

然后，您可以获取有关该呼叫的信息，包括 ParentCallSid 并重复，直到您收到第一个呼叫。

# ruby - 将数组中除选定单词之外的每个单词大写

> ID：14819050
> 
> 赞同：4
> 
> 时间：2013-02-11T19:03:55.547
> 
> 标签：ruby, arrays, nlp

现在我有

```
value = "United states of america"
words_to_ignore = ["the","of"]
new_string = value.split(' ').map {|w| w.capitalize }.join(' ') 
```

我在这里要做的是除了单词之外`of`，我希望其余的都大写。所以输出将是`United States of America`. 现在我不确定，究竟该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T19:10:34.827

试试这个：

```
 new_string = value.split(' ')
    .each{|i| i.capitalize! if ! words_to_ignore.include? i }
    .join(' ') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:08:56.803

也许尝试类似：

```
value = "United state of america"
words_to_ignore = ["the","of"]
new_string = value.split(' ').map do |w| 
  unless words_to_ignore.include? w
    w.capitalize
  else
    w
  end
end
new_string[0].capitalize!
new_string = new_string.join(' ') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:14:04.213

我建议使用散列将大写过程和异常存储在一个包中：

```
value       = 'united states of america'
title_cases = Hash.new {|_,k| k.capitalize }.merge({'of' => 'of', 'off' => 'off'})
new_string  = value.split(" ").map {|w| title_cases[w] }.join(' ') #=> "United States of America" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T03:40:10.277

```
value = "United state of america"
words_to_ignore = Hash[%w[the of].map{|w| [w, w]}]
new_string = value.gsub(/\w+/){|w| words_to_ignore[w] || w.capitalize} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-06T14:04:41.723

您可以使用这种方式来强制始终获得相同的结果：

```
downcase_words = ["of", "the"]
your_string.split(' ').each{ |word| (downcase_words.include? word.downcase) ? 
                                     word.downcase! : word.capitalize! }.join(' ') 
```

your_string 可能是：

“美利坚合众国”
“美利坚合众国” “美利坚合众国
”

结果将永远是：**“美利坚合众国”**

# comparison - 逐行比较2个文件

> ID：14819051
> 
> 赞同：0
> 
> 时间：2013-02-11T19:04:05.307
> 
> 标签：comparison, diff, text-files

假设我有 2 个文件，如下所示：

文件 1：

```
Verrucomicrobiaceae

Porphyromonadaceae
Clostridium
Verrucomicrobiaceae
Clostridium
Bacteroidaceae
Clostridium
Verrucomicrobiaceae
Verrucomicrobiaceae
Verrucomicrobiaceae
Verrucomicrobiaceae
Clostridium 
```

文件 2：

```
Verrucomicrobiaceae

Porphyromonadaceae

Verrucomicrobiaceae

Porphyromonadaceae

Verrucomicrobiaceae
Verrucomicrobiaceae
Verrucomicrobiaceae
Verrucomicrobiaceae 
```

我想计算以下发生的次数：

1.  文件 1 和 2 中的行相同的发生次数
2.  文件 1 和 2 中的行不同的发生次数
3.  文件 1 中的一行有字符串，而文件 2 中的同一行什么都没有（空白）的发生次数
4.  文件 2 中的一行有字符串，而文件 1 中的同一行没有任何内容（空白）的发生次数

我尝试使用`comm`,`cmp`和`diff`，但他们无法完成该任务。有没有可以做到这一点的linux命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:29:18.570

这已经足够专业了，标准工具可能不容易做到。我会编写一个程序进行比较，就像在 Perl 中一样：

```
#!/usr/bin/perl

open(IN1, "< file1");
open(IN2, "< file2");

$count1 = $count2 = $count3 = $count4 = 0;
while(<IN1>) {
   $line1 = $_;
   $line2 = <IN2>;
   $count1++ if($line1 eq $line2);
   $count2++ if($line1 ne $line2);
   $count3++ if($line1 ne "" && $line2 eq "");
   $count4++ if($line1 eq "" && $line2 ne "");
}
print "$count1 $count2 $count3 $count4\n"; 
```

根本没有错误检查，假设两个文件的长度相同，...

# java - java.sql.SQLException：指定的 Oracle URL 无效

> ID：14819052
> 
> 赞同：2
> 
> 时间：2013-02-11T19:04:09.167
> 
> 标签：java, oracle, driver

从 Eclipse 运行我的 java 应用程序时，我收到 java.sql.SQLException: Invalid Oracle URL specified 错误。我使用的是 Oracle 版本 10。classes12.jar 用于 oracle 驱动程序 oracle.jdbc.OracleDriver 请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:18:08.050

您似乎缺少一个冒号；根据 JDBC [API 参考](http://docs.oracle.com/cd/E14072_01/appdev.112/e13995/oracle/jdbc/OracleDriver.html)和[开发人员指南](http://docs.oracle.com/cd/E11882_01/java.112/e10589/urls.htm#BEIJFHHB)，语法为：

> ```
> jdbc:oracle:driver_type:[username/password]@database_specifier 
> ```

所以你的应该是：

```
jdbc:oracle:oci8:@cssm 
```

# javascript - 在javascript中“自然地”混合两种颜色

> ID：14819058
> 
> 赞同：40
> 
> 时间：2013-02-11T19:04:30.500
> 
> 标签：javascript, math, colors, color-scheme

**问题：**我想在 javascript 中混合两种颜色，并得到结果颜色。SO上有很多类似的问题，但是我没有找到任何实际正常工作的东西。我知道混合两种不同颜色的颜料（颜料）和灯光会产生非常不同的结果（[http://en.wikipedia.org/wiki/Color_mixing](http://en.wikipedia.org/wiki/Color_mixing)）。

以下是我已经看到并尝试实施的问题和建议的解决方案：

**1：** [混合两个 RGB 颜色向量得到结果](https://stackoverflow.com/q/1892020/240324)
所以，混合 RGB 中的颜色。我实现了它，在某些情况下它在某些情况下不起作用。

**工作示例：**`red`与`yellow`->混合`orange`。伟大的！
[http://jsbin.com/afomim/1/edit](http://jsbin.com/afomim/1/edit)

**不工作的例子：**`blue`与`yellow`->混合`gray`。不太好！:) [http://jsbin.com/afomim/5/edit](http://jsbin.com/afomim/5/edit)
我知道在 RGB 混合`blue`中`yellow`永远不会产生`green`，我明白为什么。

我们不会在这里找到答案，让我们继续前进。

**2：** [像油漆一样添加颜色（颜色）（蓝色+黄色=绿色等）](https://stackoverflow.com/q/10139833/240324)

让我们尝试使用本讨论中建议的 CMYK 值。`cyan`与`yellow`给出混合：http `green`:
[//jsbin.com/igaveg/1/edit](http://jsbin.com/igaveg/1/edit)
但`blue`与`yellow`结果混合`black`。
[http://jsbin.com/igaveg/2/edit](http://jsbin.com/igaveg/2/edit) -> 不工作！

**3：** [如何用C#“自然地”混合颜色？](https://stackoverflow.com/q/398224/240324)
一个非常相似的问题。最受欢迎的答案建议将颜色转换为 LAB，这个解决方案似乎很有希望。
所以我将我的颜色转换为 LAB。转换算法是正确的，我测试过！

[http://jsbin.com/oxefox/1/edit](http://jsbin.com/oxefox/1/edit)

现在我在 LAB 中有两种颜色，但是如何混合它们呢？

**注意**我知道我可能不会找到一个混合并给出完美的算法`blue`，`yellow`但`green`我希望我能生成类似于绿色的东西:)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-06T10:36:10.187

我花了 3-4 天来回答这个问题。这是一个非常复杂的问题。

如果您想“自然地”混合两种颜色，可以执行以下操作：

1.  CMYK 混合：这不是完美的解决方案，但如果您现在需要一个解决方案，并且您不想花费数月时间来学习主题、实验和编码，您可以查看：[https ://github.com/ AndreasSoiron/Color_mixer](https://github.com/AndreasSoiron/Color_mixer)

2.  实施 Kubelka-Munk 理论。我花了很多时间阅读它，并试图理解它。如果您想要专业的解决方案，这应该是可行的方法，但是对于您要混合的每种颜色，它需要 6 个参数（如反射率、吸收率等）。拥有 R、G、B 是不够的。实施该理论并不难，但获取每种颜色所需的参数似乎是缺失的部分。如果你知道怎么做，请告诉我:)

3.  实验性：您可以做 ipad 应用程序的开发者：[Paper](http://www.fiftythree.com/paper)所做的事情。他们手动选择了 100 对流行颜色，并用眼球测试了它们应该如何混合。[在此处](http://www.fastcolabs.com/3002676/open-company/magical-tech-behind-paper-ipads-color-mixing-perfection)了解更多信息。

我个人将暂时实施 CMYK 混合，也许以后，如果我有时间，我会尝试制作类似于 Fiftythree 的人的东西。等着瞧 ：）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-23T20:15:50.100

在尝试将 2 种 RGB 颜色混合在一起时，我实际上遇到了同样的问题。这两个功能对我有用：

```
//colorChannelA and colorChannelB are ints ranging from 0 to 255
function colorChannelMixer(colorChannelA, colorChannelB, amountToMix){
    var channelA = colorChannelA*amountToMix;
    var channelB = colorChannelB*(1-amountToMix);
    return parseInt(channelA+channelB);
}
//rgbA and rgbB are arrays, amountToMix ranges from 0.0 to 1.0
//example (red): rgbA = [255,0,0]
function colorMixer(rgbA, rgbB, amountToMix){
    var r = colorChannelMixer(rgbA[0],rgbB[0],amountToMix);
    var g = colorChannelMixer(rgbA[1],rgbB[1],amountToMix);
    var b = colorChannelMixer(rgbA[2],rgbB[2],amountToMix);
    return "rgb("+r+","+g+","+b+")";
} 
```

要将红色（ [255,0,0] ）与蓝色（ [0,0,255] ）混合均匀，您可以调用

```
colorMixer([255,0,0], [0,0,255], 0.5);//returns "rgb(127,0,127)" (purple) 
```

这可能会有所帮助，尽管您必须先将每个颜色值转换为数组。如果您使用 Fabric.js 来处理画布元素，这将变得非常容易。打电话

```
var rgbA = new fabric.Color(yourColor);
var rgbB = new fabric.Color(yourSecondColor); 
```

然后打电话

```
colorMixer(rgbA.getSource(),rgbB.getSource(),0.5); 
```

希望这些功能有所帮助。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-12T20:07:39.583

RYB**颜色模型**可能是颜色混合计算的合适选择。根据[维基百科](http://en.wikipedia.org/wiki/RYB_color_model)，它主要用于艺术和设计教育，尤其是绘画。

要混合两种颜色，需要将两种颜色从 RGB 转换为 RYB，通过添加每个颜色分量来混合颜色，然后将生成的颜色从 RYB 转换回 RGB。

我已经使用[Online Color Mixing Tool](http://knowpapa.com/cmt/)进行了尝试，结果是

*   # 0000FF（**蓝色**）与#FFFF00（**黄色**）混合得到#008000（**深绿色**），

*   # FF0000（**红色**）与#FFFF00（**黄色**）混合得到#FFA000（**橙色**）。

因此，此方法会产生您所期望的结果。

不幸的是，我无法找到“即用型”公式的参考来将 RGB 转换为 RYB 并返回 RGB。

论文 [Paint Inspired Color Mixing and Compositing for Visualization - Gossett and Chen](http://vis.computer.org/vis2004/DVD/infovis/papers/gossett.pdf) 在“2 ACHIEVING INTUITIVE COLOR MIXING”一节中描述了 RYB 颜色模型的一般思想。

根据那篇论文，从 RYB 到 RGB 的转换是通过 [三线性插值](http://en.wikipedia.org/wiki/Trilinear_interpolation)完成的。

困难的部分是从 RGB 到 RYB 的转换，因为它需要反转三线性插值。 有关详细信息，请参阅[RGB 和 RYB 颜色空间之间的转换。](https://stackoverflow.com/questions/4945457/conversion-between-rgb-and-ryb-color-spaces)

即使这个答案没有提供完整的计算公式，我也希望它能给出一些如何进行的想法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-11T19:20:54.980

对于 CIELAB 颜色，您在 LAB 颜色空间中的两种颜色中的每一种都有三个坐标。（顺便说一句，在这方面做得很好）。对您来说最有效且最容易实现的方法是找到连接 LAB 空间中两点的假想线段的 3D 中点。您可以通过对两种颜色的每个分量进行平均来轻松做到这一点：average `L`、 average`a`和 average `b`。然后通过反转变换将此颜色转换回 RGB 空间（确保两种方式的照明空间保持相同）。

您的新颜色可能在 RGB 颜色空间之外。在这种情况下，您可以决定剪辑到最接近的可见颜色。（蓝调尤其容易受到这种影响）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-11T19:20:10.587

现在您已经有了 LAB（或 L*a*b*）格式的两种颜色，您可以将它们平均在一起。

```
L(result) = L(first color) + L(second color) / 2
A(result) = A(first color) + A(second color) / 2
B(result) = B(first color) + B(second color) / 2 
```

你已经知道了，对吧？因为这是您使用原始 RGB 颜色对它们进行平均的操作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-14T06:55:09.500

当前接受的答案链接[到此存储库](https://github.com/AndreasSoiron/Color_mixer)，该存储库具有过期的演示页面并使用冗长的过时代码。

所以我基于相同的代码写了一个普通的 JavaScript 混色器：

*   [Github 存储库](https://github.com/GirkovArpa/hex-color-mixer)

```
console.log(mix_hexes('#3890b9', '#f6ff00')); // #8cc46f

function hex2dec(hex) {
  return hex.replace('#', '').match(/.{2}/g).map(n => parseInt(n, 16));
}

function rgb2hex(r, g, b) {
  r = Math.round(r);
  g = Math.round(g);
  b = Math.round(b);
  r = Math.min(r, 255);
  g = Math.min(g, 255);
  b = Math.min(b, 255);
  return '#' + [r, g, b].map(c => c.toString(16).padStart(2, '0')).join('');
}

function rgb2cmyk(r, g, b) {
  let c = 1 - (r / 255);
  let m = 1 - (g / 255);
  let y = 1 - (b / 255);
  let k = Math.min(c, m, y);
  c = (c - k) / (1 - k);
  m = (m - k) / (1 - k);
  y = (y - k) / (1 - k);
  return [c, m, y, k];
}

function cmyk2rgb(c, m, y, k) {
  let r = c * (1 - k) + k;
  let g = m * (1 - k) + k;
  let b = y * (1 - k) + k;
  r = (1 - r) * 255 + .5;
  g = (1 - g) * 255 + .5;
  b = (1 - b) * 255 + .5;
  return [r, g, b];
}

function mix_cmyks(...cmyks) {
  let c = cmyks.map(cmyk => cmyk[0]).reduce((a, b) => a + b, 0) / cmyks.length;
  let m = cmyks.map(cmyk => cmyk[1]).reduce((a, b) => a + b, 0) / cmyks.length;
  let y = cmyks.map(cmyk => cmyk[2]).reduce((a, b) => a + b, 0) / cmyks.length;
  let k = cmyks.map(cmyk => cmyk[3]).reduce((a, b) => a + b, 0) / cmyks.length;
  return [c, m, y, k];
}

function mix_hexes(...hexes) {
  let rgbs = hexes.map(hex => hex2dec(hex)); 
  let cmyks = rgbs.map(rgb => rgb2cmyk(...rgb));
  let mixture_cmyk = mix_cmyks(...cmyks);
  let mixture_rgb = cmyk2rgb(...mixture_cmyk);
  let mixture_hex = rgb2hex(...mixture_rgb);
  return mixture_hex;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-05-09T15:13:27.410

这个项目真的帮助了我： [https ://github.com/ProfJski/ArtColors](https://github.com/ProfJski/ArtColors)

我将其代码转换为 Objective-C 并验证了它的工作原理。

参见下面引用的[“原则 5”部分：](https://github.com/ProfJski/ArtColors/blob/master/README.md#principle-5)

> ArtColors 应该提供一个简单的函数调用，用最少的代码以真实的方式减法混合两种颜色，只需要两个 RGB 输入和一个混合比，如下所示：
> 
> ```
> Return Color=SubtractiveMix(Color a, Color b, percentage) 
> ```
> 
> ArtColors 使用的算法（我认为）使用其他方法的一小部分代码即可提供相当不错的结果，并且无需计算或存储反射率数据或计算复杂的公式。目标是仅用 20% 的代码实现 80% 的真实性。
> 
> 基本方法的灵感来自于考虑颜料的实际混合方式。检查这个油漆混合的特写镜头：
> 
> ![油漆混合](../Images/fae9be3bf77a01630c8b5514c9890be2.png)
> 
> 如果你仔细观察，你会发现在某些区域，两种颜料完全混合，结果是相减的：黄色和蓝色正在形成更深的绿色。红色和蓝色正在形成*非常*深的紫色。然而，在混合不那么彻底的其他区域，黄色和蓝色的细线并排存在。这些涂料反射黄色和蓝色*光。* 在远处，当不同的漩涡太小而无法看到时，这些颜色会被眼睛*叠加混合。*
> 
> 进一步考虑混合涂料是化学意义上的*混合物*：不会发生*化学*变化。红色和蓝色分子仍然存在于彻底混合中，完全按照它们分开时所做的事情：反射红色和蓝色光。当光线在介质中反弹时，会产生很多次表面物理效应。入射光被一个分子吸收和反射，然后被另一个分子吸收和反射，最终结果反射到眼睛。
> 
> 这如何帮助解决我们的问题？
> 
> 严格减法方法从白色开始，然后从白色中减去颜色 A 和颜色 B 的 RGB 值，并返回剩下的内容。 *这种方法往往过于黑暗。* 为什么？每种颜料中的一些仍然在很小的范围内反映其独特的颜色。如果我们采用一种*部分加法，部分减法*的方法，我们会得到更真实的结果！
> 
> 此外，如果颜色 A = 颜色 B，我们的函数应该返回相同的颜色。同一种颜色混用同一种颜色应该等于同一种颜色！使用严格减法算法，结果是原始色调的较暗版本（因为输入颜色值从 White 中减去*两次*）。两种输入颜色越接近，在混合中看到的变化*就越少。*
> 
> 减法混合的 ArtColor 代码是：
> 
> ```
> Color ColorMixSub(Color a, Color b, float blend) {
>     Color out;
>     Color c,d,f;
> 
>     c=ColorInv(a);
>     d=ColorInv(b);
> 
>     f.r=max(0,255-c.r-d.r);
>     f.g=max(0,255-c.g-d.g);
>     f.b=max(0,255-c.b-d.b);
> 
>     float cd=ColorDistance(a,b);
>     cd=4.0*blend*(1.0-blend)*cd;
>     out=ColorMixLin(ColorMixLin(a,b,blend),f,cd);
> 
>     out.a=255;
> return out;
> } 
> ```
> 
> 代码说明： `Color a`和`Color b`是输入颜色。 `blend`指定每种颜色混合多少，从 0 到 1.0，如线性插值 (LERP)。0.0 = 所有颜色 A，1.0 = 所有颜色 B。0.5 = A 和 B 的 50%-50% 混合。
> 
> 首先，我们找到颜色 a 和 b 的 RGB 倒数，并将它们分配给新颜色 c 和 d。
> 
> ```
>  c=ColorInv(a);
>     d=ColorInv(b); 
> ```
> 
> 然后我们从纯 RGB 白色中减去 c 和 d，将结果钳制为零，并将结果分配给颜色 f。
> 
> ```
>  f.r=max(0,255-c.r-d.r);
>     f.g=max(0,255-c.g-d.g);
>     f.b=max(0,255-c.b-d.b); 
> ```
> 
> 到目前为止，f 是纯减法的结果，存在上述问题。
> 
> 接下来，我们计算颜色 a 和颜色 b 之间的“颜色距离”，它只是它们在 RGB 空间中的向量距离，在 0.0（相同颜色）和 1.0（完全相反，如白色和黑色）之间进行归一化。
> 
> ```
> float cd=ColorDistance(a,b); 
> ```
> 
> 该值将有助于解决混合两种相似色调不应该对结果产生太大影响的问题。然后，颜色距离因子`cd`由二次传递函数转换，该函数调节我们进行多少减法和加法混合：
> 
> ```
> cd=4.0*blend*(1.0-blend)*cd; 
> ```
> 
> ![艺术色彩混合](../Images/1d7ba2d78c2f6bcca78b35108e33d6dd.png)
> 
> 端点确保接近 0% 或 100% 的混合百分比看起来非常接近原始输入颜色。二次曲线为接下来的混合提供了良好的色域。曲线的峰值由颜色距离决定。这个函数的输出决定了我们结果中加法与减法混合的量。更远的颜色将与更减法的动态混合（在 y=1.0 时完全减法）。相似的颜色与更具附加性的动态（更平坦的曲线）混合，但仍然具有减色因子。二次传递函数的最大值是归一化颜色距离，因此颜色空间中截然相反的颜色将完全减法混合。
> 
> 最后一行完成所有工作：
> 
> ```
> out=ColorMixLin(ColorMixLin(a,b,blend),f,cd);` 
> ```
> 
> 首先，我们以指定的比例将颜色 A 和颜色 B*相加混合*`blend`，这是通过 完成的`ColorMixLin(a,b,blend)`。这代表了上图中那些精细的颜色漩涡和地下相互作用的叠加混合效果。如果没有这个因素，严格的减法方法可能会产生奇怪的结果。然后，根据上面提到的传递函数，这个*加法*结果与我们的纯减法结果混合`color f`，该传递函数基于 和 之间的颜色`Color a`距离`Color b`。
> 
> 瞧！对于广泛的输入颜色，会产生非常好的结果。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-28T22:43:44.207

这是我写的一篇关于 CIE-LCh 颜色空间中颜色混合的好文章，它产生的混合以与您的眼睛感知一致的方式保持色调、饱和度和亮度。

[改进的颜色混合](http://www.stuartdenman.com/improved-color-blending/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-30T09:30:41.460

[使用它](http://www.rapidtables.com/convert/color/rgb-to-cmyk.htm)然后将 RGB 转换为 CMYK 怎么样：

```
// CMYK colors
colorA = [2, 90, 94, 0];
colorB = [4, 0, 80, 0]; 

colorMixC = (colorA[0] + colorB[0]) / 2;
colorMixM = (colorA[1] + colorB[1]) / 2;
colorMixY = (colorA[2] + colorB[2]) / 2;
colorMixK = (colorA[3] + colorB[3]) / 2; 
```

[最后使用这个](http://www.rapidtables.com/convert/color/cmyk-to-rgb.htm)将 CMYK 转换为 RGB

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-10T08:55:02.413

您需要使用**CMY**或**RGB**颜色模型。

为什么`Blue`+`Yellow`不能是`Gray`？

`Blue`+ `Yellow`= ( `Cyan`+ `Magenta`) + `Yellow`=> `Gray`。为什么不？

[看这个。](http://i.piccy.info/i8/12dfd091fb80fb8be9308d9196435244/1381394775/392843/625280/Untitled_3.png)

因此，您可以使用 RGB (CMY) 来混合颜色。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-15T10:18:54.703

创建要绘制的元素：

```
<DIV ID="SWATCH" STYLE="HEIGHT:50PX;WIDTH:50PX;"></DIV> 
```

将要组合的 rgb 颜色放入一个数组中（任意数量）：

```
var colourArray=['#012345','#6789AB','#CDEFED','#CBA987','#654321']; 
```

接下来将任何字母转换为数字并按顺序捕获它们：

```
var tempString=[],convertedColourArray=[];
for(i=0;i<colourArray.length;i++){
    for(x=1;x<=6;x++){
        var oldPigment=colourArray[i].charAt(x);
        if(oldPigment<=9)tempString.push(oldPigment);
        if(oldPigment=='A')tempString.push(10);
        if(oldPigment=='B')tempString.push(11);
        if(oldPigment=='C')tempString.push(12);
        if(oldPigment=='D')tempString.push(13);
        if(oldPigment=='E')tempString.push(14);
        if(oldPigment=='F')tempString.push(15);}
    convertedColourArray.push(tempString);
    tempString=[];} 
```

然后将每个索引位置编号相加：

```
var colourTotal=0,newColour='#';
for(i=0;i<=5;i++){
    for(x=0;x<convertedColourArray.length;x++)colourTotal+=parseFloat(convertedColourArray[x][i]); 
```

最后取新数字，将其转换为匹配字符并将其添加到 newColour 变量中：

```
 var newPigment=(Math.floor(colourTotal/colourArray.length));
    if(newPigment<=9)newColour+=newPigment;
    if(newPigment==10)newColour+='A';
    if(newPigment==11)newColour+='B';
    if(newPigment==12)newColour+='C';
    if(newPigment==13)newColour+='D';
    if(newPigment==14)newColour+='E';
    if(newPigment==15)newColour+='F';
    colourTotal=0;} 
```

现在你可以用新颜色画出你想要的任何东西：

```
 document.getElementById('SWATCH').style.backgroundColor=newColour; 
```

我希望这会有所帮助，并随时向它扔鸡蛋:)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-02-07T14:34:35.630

```
const getHexChannel = (hex, index) => {
  if (hex.length <= 5) {
    const channel = hex.substr(1 + index, 1);
    return `${channel}${channel}`;
  }
  return hex.substr(1 + index * 2, 2);
};

function hexToRGB(hex) {
  if (typeof hex === 'string' && hex[0] === '#') {
    return [0, 1, 2].map(i => parseInt(getHexChannel(hex, i), 16));
  }
  return hex;
}

function channelMixer(channelA, channelB, amount) {
  const a = channelA * (1 - amount);
  const b = channelB * amount;
  return parseInt(a + b, 10);
}

export function blendColors(colorA, colorB, amount = 0.5) {
  const rgbA = hexToRGB(colorA);
  const rgbB = hexToRGB(colorB);
  return [0, 1, 2].map(i => channelMixer(rgbA[i], rgbB[i], amount));
}

export const lighten = (color, amount) => blendColors(color, '#fff', amount);
export const darken = (color, amount) => blendColors(color, '#000', amount); 
```

# c#-4.0 - 强制我的财产只接受某些类型的数据类型

> ID：14819063
> 
> 赞同：0
> 
> 时间：2013-02-11T19:04:59.560
> 
> 标签：c#-4.0

```
 public object Value
    {
        get
        {
            return _value;
        }
        set
        {

            _value = value;
        }
    }

   public enum someEnum
      {
         sString = 1,
         sBoolean = 2,
         sInt     = 3,
         sDate    = 4
         sData    = 5  //Custom data type eg; a class
      } 
```

我希望我的属性值只接受并返回 someEnum 枚举器中指定的数据类型。我正在使用 vs2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:07:09.397

你有没有试过这个：

```
public someEnum Value
{
 get; set;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:37:44.057

我尝试使用枚举，它可以工作，但我必须硬编码枚举值，如“System.String”，并在 set 修饰符中使用 Enum.TryParse。

```
MyEnum type;
bool res = Enum.TryParse<MyEnum>(Convert.ToString(value.GetType()), out type); 
```

恕我直言，使用扩展方法看起来更好

```
private object _value;
public object Value
{
    get
    {
        return _value;
    }
    set
    {
        if (value.IsValidType())
            _value = value;
        else
            throw new Exception("Not a valid type");
    }
}

public static class ObjectExtenstions
{
    public static bool IsValidType(this object obj)
    {
        if (obj.GetType() == typeof(System.String) || obj.GetType() == typeof(System.Int32))
            return true;
        return false;
    }
} 
```

# android - 提高批量文件下载的方法？

> ID：14819068
> 
> 赞同：0
> 
> 时间：2013-02-11T19:05:29.123
> 
> 标签：android, performance

我正在尝试下载大量将在我的应用程序中使用的小 png 图像。它现在有效，但需要很长时间。我想知道是否有任何关于如何加快此过程的建议，或者我的代码中是否存在明显的低效率。现在的过程是下载一个 JSON 文件。此 JSON 文件中包含指向包含图像的 zip 文件的链接。然后我解压缩文件并将图像存储在手机的内部存储器中。这是我到目前为止所得到的：

```
 @Override
    protected Object doInBackground(Object... params) {

        IS_UPDATING = true;
        final String input = Utils
                .downloadString("http://assets.json");

        if (input == null) {
            return null;
        }

        try {
            JSONObject data = new JSONObject(input);
            Iterator<String> topIterator = data.keys();
            while (topIterator.hasNext())
            {
                String topName = topIterator.next();
                String prefix = "png_";
                String preferences = null;
                JSONObject part_data = data.getJSONObject(topName);
                int map_version = part_data.getInt("VersionNumber");
                JSONObject url_json = new JSONObject(input).getJSONObject("Tiles").getJSONObject("TileURLs");
                Iterator<String> iterator = url_json.keys();
                while (iterator.hasNext())
                {
                    String temp = iterator.next();
                    //Downloads the zip file with map tiles
                    URL url = new URL(url_json.getString(temp));
                    InputStream is = url.openStream();
                    DataInputStream dis = new DataInputStream(is);
                    byte[] buffer = new byte[1024];
                    int length;

                    //Stores the zip file in app output
                    FileOutputStream fos = mContext
                            .openFileOutput("tiles_" + temp + ".zip",
                                    Context.MODE_PRIVATE);
                    while ((length = dis.read(buffer)) > 0)
                        fos.write(buffer, 0, length);
                    fos.close();
                    dis.close();
                    is.close();

                    //Extracts the images from the zip file
                    FileInputStream fis = mContext
                            .openFileInput("tiles_" + temp + ".zip");
                    ZipInputStream zis = new ZipInputStream(fis);
                    BufferedInputStream in = new BufferedInputStream(zis);
                    ZipEntry ze = null;

                    while ((ze = zis.getNextEntry()) != null)
                    {
                        String name = ze.getName();
                        if (!ze.isDirectory() && !name.contains("MACOSX"))
                        {
                            name = prefix + ze.getName();
                            name = name.replace('/', '_');
                            fos = mContext.openFileOutput(name, Context.MODE_PRIVATE);

                            for (int y = in.read(); y != -1; y = in.read()) {
                                fos.write(y);
                            }

                            zis.closeEntry();
                            fos.close();
                        }
                    }
                    in.close();
                    zis.close();
                    fis.close();
                    mContext.deleteFile("tiles_" + temp + ".zip");
                }

                sEditor.putInt(preferences, map_version);
                sEditor.commit();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        finished = true;
        return null;
    } 
```

这是在异步任务中完成的。有什么方法可以提高这个速度吗？感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:24:21.633

是的，首先将所有文件下载到[临时目录](https://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)，然后再解析它们。

您可以做的另一件事是不使用[org.json](https://developer.android.com/reference/org/json/package-summary.html)包中的内容。[Gson](http://code.google.com/p/google-gson/)是一个很好的选择。

# c# - 我可以从服务堆栈中的自定义用户会话中访问 Web 服务吗？

> ID：14819069
> 
> 赞同：3
> 
> 时间：2013-02-11T19:05:41.193
> 
> 标签：c#, authentication, servicestack

我有标准的 Hello World Web 服务，带有我的自定义用户身份验证会话，因为我需要一些额外的参数。身份验证部分按预期工作。下面是我的自定义用户会话：

```
public class CustomUserSession : AuthUserSession
{
    public int? PortalId { get; set; }

    public override void OnAuthenticated(ServiceInterface.IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
    {
        base.OnAuthenticated(authService, session, tokens, authInfo);
        var refId = session.UserAuthId;

        var userRep = new InMemoryAuthRepository();
        var userAuth = userRep.GetUserAuth(refId.ToString());
        PortalId = userAuth.RefId;
    }
} 
```

我的 refId 保存了我的其他表之一的自定义参数，并且在我调试时它得到了正确的值。我的问题是，我现在可以从这个方法中调用 web 服务的方法吗？因此，例如，如果我有一个接受 int 的执行方法，我可以从重写的 OnAuthenticated 方法中调用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T01:57:20.533

您可以使用在 ServiceStack 中执行服务`ResolveService<T>`。

从自定义用户会话内部：

```
using (var service = authService.ResolveService<MyService>())
{
    var response = service.Get(new MyRequest { ... });
} 
```

从 ServiceStack 服务内部：

```
using (var service = base.ResolveService<MyService>())
{
    var response = service.Get(new MyRequest { ... });
} 
```

从 ServiceStack 外部：

```
using (var service = HostContext.ResolveService<MyService>())
{
    var response = service.Get(new MyRequest { ... });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T19:18:20.083

尝试解决`ServiceInterface.IServiceBase`正确的类/接口。这是一个示例`IDbConnectionFactory`：

```
//Resolve the DbFactory from the IOC and persist the info
authService.TryResolve<IDbConnectionFactory>().Exec(dbCmd => dbCmd.Save(PortalId)); 
```

# php - 使用查询字符串 php 回显锚标记并在日历中输出 $date

> ID：14819071
> 
> 赞同：2
> 
> 时间：2013-02-11T19:05:49.343
> 
> 标签：php, string, anchor

这是我第一次提出问题，所以如果我做错了，请考虑到这一点。请仔细查看并解释我哪里出错了。
我可以在日历行的当前月份的第一周显示上个月的结束日期。但我需要在锚标记中包含一个查询字符串，该字符串与当前的 $print_date 相呼应。这些是我已经尝试过但没有成功的不同方法。日期格式为“YYYY-MD”

```
while ( $start_point > 0 ) 
{   
    // Returns what day of the week 'w' (numeric 0-6), using the date function.
    $day_of_week = date('w', mktime(0, 0, 0, $month, 1, $year));    
    // To get the last Sunday of the previous month use:
    $sun_prev_month = date('d', mktime(0, 0, 0, $month, (1 - $day_of_week), $year));
    // Fills the dates, starting on Sunday for the end of previous month
    $print_date = $sun_prev_month;      
    for ($i = 0; $i < $day_of_week; ++$i)
    {                       
        //echo '<td class="shade"><a href="/~seeleyja/CSCI-2910/calendar4.php?date=' . $year . '-' . ($month-1) . '-' . $print_date  . '">'. $print_date . '</a></td>';
                ?>
        <td><a href="/~seeleyja/CSCI-2910/calendar4.php?<?=htmlspecialchars($prev_month);?>"> $print_date </a></td>;
        <?php
        //echo '<td class="shade"><a href="/~seeleyja/CSCI-2910/calendar4.php?date=$prev_month">'. $print_date . '</a></td>';
        //echo '<td class="shade"><a href="/~seeleyja/CSCI-2910/calendar4.php?date=' . $year . '-' . ($month-1) . '-' . $print_date . '">'. $print_date . '</a></td>';
        --$start_point;
        $print_date++;                      
        $day_of_week_counter++;                             
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:22:52.420

您当前正在使用未定义的变量 $prev_month，并且忘记了 URL 中的“日期”参数。您是否可能打算使用 $sun_prev_month 或 $print_date？

# c# - 从 C# ToList 打印数据

> ID：14819075
> 
> 赞同：1
> 
> 时间：2013-02-11T19:06:06.030
> 
> 标签：c#, linq-to-sql

我制作列表的代码是这样的：

```
[OperationContract]
List<it_position> GetAllPositions(){
   PositionDataClassesDataContext context = new PositionDataClassesDataContext();
   var result = from positions in context.it_positions select positions;
  return result.ToList();
} 
```

我从一个方法中获取数据

```
PositionServiceReference.PositionServiceClient service = new   
     PositionServiceReference.PositionServiceClient();
service.GetAllPositionsCompleted += new   
EventHandler<PositionServiceReference.GetAllPositionsCompletedEventArgs>
          (service_GetAllPositionsCompleted);
service.GetAllPositionsAsync(); 
```

但是我怎样才能让结果成为我可以使用的数组呢？它们现在只是数据列表中的 ItemSoruces ......

```
void service_GetAllPositionsCompleted(object sender, 
            PositionServiceReference.GetAllPositionsCompletedEventArgs e)
{
    dgEmployee.ItemsSource = e.Result;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:18:07.580

如果在这一行设置断点：

`dgEmployee.ItemsSource = e.Result;`

并将鼠标悬停在 上`e.Result`，您将看到它实际上是 a`IEnumrable<it_position>` 如果您需要在设置之前/之后使用它，`e.Result`只需将其转换 - 如下所示：

```
void service_GetAllPositionsCompleted(object sender, 
            PositionServiceReference.GetAllPositionsCompletedEventArgs e)
{
    //var lst = e.Result as IEnumerable<it_positions>; <-- This gave error
    var lst = e.Result; // <-- This worked fine
    var ary = lst.ToArray();
    //go do fun stuff with the array
    dgEmployee.ItemsSource = e.Result;

} 
```

# hadoop - 在 Hive 中进行查询并行运行

> ID：14819077
> 
> 赞同：1
> 
> 时间：2013-02-11T19:06:12.290
> 
> 标签：hadoop, hive

我使用蜂巢有一段时间了，但是，从来没有想过这个。我正在尝试使 hive -f sql-file 中的查询并行运行？有人知道该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-18T20:54:47.907

@user1653240 为了同时运行独立查询，我正在做的是：

*   将查询放入不同的文件，例如`select count(1) from t1`-> file1.sql, `select count(1) from t2`-> file2.sql
*   使用**nohup**和**&**命令。以 file1.sql 和 file2.sql 为例，运行：`nohup hive -f file1.sql & nohup hive -f file2.sql`，这两个查询会并行运行。
*   如果你想在后台运行，只需在最后添加一个**&**即可。例如：`(nohup hive -f file1.sql & nohup hive -f file2.sql) &`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:22:55.057

Hive 会将 HiveQL 查询转换为 MapReduce 作业，并且 MapReduce 作业可以根据集群的大小和配置的调度程序类型并行运行。因此，Hive 查询将自动在 Hadoop 集群上并行运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:35:45.700

Hive 上的任何查询都被编译为 Map-Reduce 并在 Hadoop 上运行。Map-reduce 是一个并行处理框架，因此您的每个 Hive 查询都将并行运行和处理数据。

我问了同样的问题，但方式不同。有关更多详细信息，您可以参考[此处](https://stackoverflow.com/questions/10550898/is-it-possible-to-execute-hive-queries-parallelly-by-writing-seperate-mapreduce)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-27T12:17:21.330

> 毫无疑问，并行执行 hive 查询的绝佳方法，但我们如何确保 query_file.sql 中的所有查询执行时没有任何错误。

在我用来确保的序列模式中

```
hive -f queries_file.sql
if [ "$?" -ne 0 ] 
        then 
        echo "Failed!!"
        GOTO ERROR:
fi 
```

如果您想在之后执行某些操作，成功执行非常重要。

例如： -- Merge_Calculated_KPI.SQL（包含一个依赖于上述内容的单个查询。）

```
hive -e "Drop table SANDBOX.status;  Create table SANDBOX.status as Select 10 as Query1 ,FROM_UNIXTIME(UNIX_TIMESTAMP()) AS UPDATE_TS FROM Metadata.DUMMY;"

sh exec_parralel.sh

hive -e "USE SANDBOX; INSERT INTO table SANDBOX.status Select 50 as Query1 ,FROM_UNIXTIME(UNIX_TIMESTAMP()) AS UPDATE_TS FROM Metadata.DUMMY;" 
```

**输出**

query1 update_ts - 0 10 2020-04-27 14:44:33 - 1 20 2020-04-27 14:45:04 - 4 30 2020-04-27 14:48:06 - 2 40 2020-04-27 14 :46:06 - 3 50 2020-04-27 14:47:06

**请注意，最后一条语句 50 很早就执行了。应该是 10, 20,30,40 50**

**参考** exec_parralel.sh

```
queries=`cat /Hadoop_SAN/TU_Prod/TMP/queries_file.sql`
count=0
while true; do
    ((count++))
    query=`echo ${queries} | cut -d';' -f${count}`
    if [ -z "${query}" ]; then
        echo "Completed executing." $count
        exit
    fi
   echo "${query}"
hive --database "Default" -e "${query};"  &
done
exit 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-28T13:24:26.530

这是我选择做的，因为我找不到从蜂巢本身做的方法。只需用您的情况替换文件名/数据库即可。

```
# This file should have all the queries separated with semicolon ';'
queries=`cat queries_file.sql`
count=0
while true; do
    ((count++))
    query=`echo ${queries} | cut -d';' -f${count}`
    if [ -z "${query}" ]; then
        echo "Completed executing ${count} - 1 queries."
        exit
    fi  
    echo "${query}"
    hive --database "your_db" -e "${query};" &

    # This is optional. If you want to give some gap, say after every 5
    # concurrent queries, use this. Or remove next 4 lines.
    mod=`expr ${count} % 5`
    if [ ${mod} -eq 0 ]; then
        sleep 30
    fi  
done 
```

**编辑：**

相当老的线程，但仍然想为其他人更新更好的解决方案。`xargs`可以用来代替我粘贴的自定义代码来实现这一点。假设文件中的所有查询都以分号结尾，可以使用以下 xargs 命令：

`cat queries.hql | sed 's/;$//g' | xargs -d';' -n1 -I{} -P20 -r bash -c "hive --database ${your_db} -e '{}'"`

where`-P20`声明要并行运行 20 个查询。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-19T15:44:01.003

Hive 查询计划器应该能够在特定情况下并行处理。您需要设置配置选项：

```
hive.exec.parallel

Default Value: false
Added In: Hive 0.5.0

Whether to execute jobs in parallel.  Applies to MapReduce jobs that can run in parallel, for example jobs processing different source tables before a join.  As of Hive 0.14, also applies to move tasks that can run in parallel, for example moving files to insert targets during multi-insert. 
```

取自[https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties](https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties)

如果您想并行运行完全独立的查询，最好的选择是按照其他建议将其作为来自单独文件的单独作业运行。

# git - 无法打开用户的 ssh/authorized_keys

> ID：14819084
> 
> 赞同：8
> 
> 时间：2013-02-11T19:07:01.080
> 
> 标签：git, ssh, authorized-keys

我知道这对你们中的一些人来说可能是微不足道的。

我不是 linux 专家，我正在尝试使用 git。为此，我想尝试将我的公共 SSH 密钥添加到`~/.ssh/authorized_keys`我的用户 git 中。

但问题是，当我使用 git 用户使用 putty 登录到我的服务器时，我无法访问任何名为`~/.ssh/authorized_keys`.

所以我试着用root来做，也许这是解决方案，但我认为`authorized_keys`每个用户都有一个。

我可以看到授权密钥，但我不想把所有事情都搞砸，所以我想清楚这一点。有没有办法使用我的 git 用户帐户并修改`ssh/authorized_keys`？

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T20:42:37.460

听起来你快到了！我不确定你有什么和没有做过什么，所以我会解释整个过程。

首先，我猜（因为您使用的是 puTTY）您的计算机运行 Windows？如果是这样，首先您需要安装适用于 Windows 的 Git，您可以从[Git 官方网站](http://git-scm.com/downloads)下载它。下载并安装它，接受安装程序中的默认选项。

这将在您的开始菜单中留下一个名为**Git Bash**的项目。您将使用它来执行接下来的操作。（您实际上并不需要安装 Git 本身，但适用于 Windows 的 Git 安装程序添加了一些`ssh-keygen`您需要的额外工具。）

如果您的计算机实际上运行的是 Linux 或 Mac OS X 而不是 Windows，那么您已经拥有所需的工具。您可以按照相同的说明进行操作，但不要使用 Git Bash 输入命令，而是使用终端窗口。

从现在开始，我将只提及“在终端中”键入内容。如果您使用的是 Windows，请在 Git Bash 窗口中键入这些内容。

### 第 1 步：在您自己的计算机上，检查 SSH 密钥对

在终端中，键入：

```
ls ~/.ssh/id_rsa* 
```

这应该列出两个文件：id_rsa 和 id_rsa.pub。如果存在，请继续执行步骤 2。如果不存在，请键入：

```
ssh-keygen 
```

然后按照提示创建它们。然后再次运行该`ls`命令以确认它们现在在那里。

### 第 2 步：将您的公共 SSH 密钥上传到服务器

公钥是名为 id_rsa.pub 的那个。`scp`您可以使用以下命令将其上传到服务器：

```
scp ~/.ssh/id_rsa.pub git@my-server.com 
```

出现提示时输入 git 用户的密码。

### 第 3 步：将您的密钥添加到 git 用户的 authorized_keys 文件中

首先以 git 用户身份 SSH 到服务器：

```
ssh git@my-server.com 
```

再次输入 git 用户的密码。以 git 用户身份登录后，键入以下内容：

```
mkdir -p ~/.ssh/ 
```

如果 .ssh 目录尚不存在，这将创建它。如果它确实存在，它不会做任何事情。

现在将您的密钥添加到 authorized_keys 文件中：

```
cat ~/id_rsa.pub >> ~/.ssh/authorized_keys 
```

这将获取您刚刚上传的文件 id_rsa.pub 的内容，并将它们添加到 authorized_keys 文件的末尾。如果 authorized_keys 不存在，此命令将首先创建它。

`>>`（注意：在该命令行中键入两个右尖括号 ( ) 时要非常小心。两个右尖括号表示将 id_rsa.pub 的内容**附加**到 authorized_keys 文件中。如果只使用一个，则表示将authorized_keys 的内容**替换**为id_rsa.pub 的内容，你不想这样做。）

`cat`您可以通过在每个文件上运行并确保您可以在 authorized_keys 末尾看到 id_rsa.pub 的内容来检查这是否有效：

```
cat ~/id_rsa.pub
cat ~/.ssh/authorized_keys 
```

确认后，删除 id_rsa.pub；你不会再需要它了。

```
rm ~/.ssh/id_rsa.pub 
```

最后，设置 .ssh 目录和 .ssh/authorized_keys 的权限，以便只有这些文件的所有者（git 用户）可以访问它们。否则，SSH 服务器将拒绝使用它们。所以：

```
chmod 700 ~/.ssh
chmod 400 ~/.ssh/authorized_keys 
```

这使得该目录只能由 git 用户使用，并且其中的文件只能由 git 用户访问。

您应该会发现您现在可以开始了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:10:00.427

.ssh 目录和文件 authorized_keys 默认不存在，您必须创建它们。确保该目录的权限为0700，其中的文件的权限为0600，否则ssh将无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T21:48:41.350

我遇到了同样的问题，这就是为我解决的问题：

```
chown -R NEW_USER /home/NEW_USER
chown -R NEW_USER /opt/git 
```

原来我有错误的文件所有者，我在创建用户时可能搞砸了。当然，我的新用户是“git”。

这弄乱了 SSH 连接的方式是用户 'git' 无法访问 '~/.ssh/authorized_keys'。

希望能帮助别人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-21T16:05:59.507

[这个要点帮助了我](https://gist.github.com/jexchan/2351996)

诀窍是 $ ssh-add ~/.ssh/id_custom

我的问题是一台本地机器上有多个 git hub 帐户。

# css - 使用内容正文居中导航和标题

> ID：14819085
> 
> 赞同：0
> 
> 时间：2013-02-11T19:07:03.573
> 
> 标签：css, twitter-bootstrap, centering

我有一个凝灰岩时间将我的网站导航与内容正文居中。我希望导航以它而不是浏览器为中心，因为它看起来有点像内容主体的左侧并且看起来不太正确。

那可能吗。[http://www.bryananthonylewis.com/](http://www.bryananthonylewis.com/)只是一个带有 Twitter Bootstrap 的简单博客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:17:21.947

你的标题没有问题。实际上你下面的内容没有居中，这是因为不需要的 div 和类“span8 offset2 middle”就在下面`div.container`。通过完全删除该 div 并覆盖`.container`您的 css 文件来解决此问题

```
.container {
  width:777px;
} 
```

chrome web 检查器中相同编辑的示例

![在此处输入图像描述](../Images/e39d5778f1b8ba6ab6da09326d5ebec9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:19:20.137

我认为你在这里走错了路..

使用 chromeinspect 进行的快速扫描显示您使用 span8 offset 2 作为主要内容（容器元素中的第一个元素就在#modal-contact 下方），我认为您的主要内容有点靠右而不是标题向左转。

我的快速修复：

删除偏移量，并使用以下内容获取该内容的 css 样式：

```
float: none;
margin: 0 auto; /*replace 0 for top margin*/ 
```

正如Pankaj建议的那样为容器设置宽度也可能有效，尽管您可能会以这种方式松散引导程序提供的动态宽度变化......没有检查所以我可能在那部分错了

**更新**

**另一个更新澄清**

删除以前的修复。在#modal-contact 正下方的容器元素中添加一个包装div，而不是像我认为的那样在页面顶部...

```
<div class="container">
    <div class='row'>
        <div class="span8 offset2">
             blogcontent here
        </div>
    </div>
<div> 
```

**woops 代码标签在这里丢失**

我觉得这应该做同样的事情。而且我也相信标题需要相同的修复。但我不是 100% 确定，所以请尝试评论它是否有效。此更新基于官方文档

[引导文档](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

**如果事情不起作用，请忘记我的建议并坚持有效的方法**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:38:27.497

如果您参考以下屏幕截图：

![截屏](../Images/5203361ff614ce02b39521b5523038b8.png)

您会看到一切都排得满满当当，除了图标没有在居中计算的宽度。您显然希望图标具有宽度。

那么我们该怎么做呢？

也许像这样在 i 标签中添加一些东西：

```
i {

  display: inline-block;
  width: 14px;
  height: 14px;
  line-height: 14px;
  vertical-align: text-top; 

} 
```

更新：

![截屏](../Images/bb00218ef7025221684ab293456b1cd8.png)

上面的截图指出了问题所在。媒体查询后，网站进入平板模式，导航关闭。现在，回去工作！

# c# - TcpClient 和 UdpClient 抛出错误

> ID：14819089
> 
> 赞同：1
> 
> 时间：2013-02-11T19:07:11.393
> 
> 标签：c#, sockets, tcp, udp, windows-7-x64

在运行 Windows 7 x64 和 VS2012 U1 并使用 .Net 4 的两个系统上，如果我调用 UdpClient 或 TcpClient，则会收到错误“提供了无效参数”。

我已经尝试了许多端口，并且我已经验证了这些端口尚未绑定，但我每次都会遇到相同的错误。

我也尝试以提升的权限运行代码无济于事。

测试代码：

```
try
        {
            using (UdpClient client = new UdpClient(new IPEndPoint(IPAddress.Any, 123)))
            {
                Console.WriteLine("Port is open");
            }
        }
        catch (SocketException error)
        {
            Console.WriteLine("Error:\n{0}", error.Message);
        } 
```

错误输出：

```
System.Net.Sockets.SocketException was unhandled
  HResult=-2147467259
  Message=An invalid argument was supplied
  Source=System
  ErrorCode=10022
  NativeErrorCode=10022
  StackTrace:
       at System.Net.Sockets.Socket..ctor(AddressFamily addressFamily, SocketType socketType, ProtocolType protocolType)
       at System.Net.Sockets.UdpClient..ctor(IPEndPoint localEP)
       at GetNTPTime.Program.Main(String[] args) in z:\My Documents\Dropbox\Dev\C#\_Example\GetNTPTime\GetNTPTime\Program.cs:line 15
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

作为一个注释，如果我简单地调用**UdpClient client = new UdpClient();我会得到同样的错误。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:03:44.933

问题是我的代码是从 Dropbox 文件夹中执行的，并且由于某种原因导致了问题，即使 Dropbox 当时没有在系统上运行。如果我将代码库移动到桌面并运行它，一切正常。

# 更新

我做了更多研究，发现不是 Dropbox 导致了问题，而是 Cloudfogger，如果我关闭 Cloudfogger 一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:13:20.513

我在您的示例中看到您使用端口 123 ，这可能是一个糟糕的选择，因为它属于保留范围，特别是 123 被[Network Time Protocol](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)使用。尝试使用 1024 以上的未保留端口。

如果您仍然遇到错误

```
UdpClient client = new UdpClient(); 
```

我的猜测是你的系统有问题。如果可以，请尝试在不同的机器上运行相同的可执行文件。

# java - 在 Elasticsearch 中加载自定义同义词文件时出错

> ID：14819091
> 
> 赞同：4
> 
> 时间：2013-02-11T19:07:16.520
> 
> 标签：java, ruby-on-rails, elasticsearch, tire

我在 EC2 单服务器设置上使用 Rails、Tire 和 Elasticsearch，没有分片或复制（这是 Jenkins CI 服务器）。使用这样的自定义初始化程序：

```
analysis:
  filter:        
    name_synonyms:
      type: synonym
      synonyms_path: <%= Rails.root.join("config", "synonyms", "name_synonyms.txt") %> 
```

该文件通过 Erubis 运行，同义词路径转换为如下内容：

```
/root/workspace/project-project-0f317744a1870b4baf61bbaeb390ebe1/config/synonyms/term_synonyms.txt 
```

当我列出服务器中的文件时，我看到以下内容：

```
root@ip-XX-XXX-XX-XXX:~/workspace/project-project-0f317744a1870b4baf61bbaeb390ebe1/config/synonyms# ls -la
total 20
drwxr-xr-x 2 root root 4096 Feb 11 18:25 .
drwxr-xr-x 7 root root 4096 Feb 11 18:25 ..
-rw-r--r-- 1 root root 3117 Feb 11 18:25 location_synonyms.txt
-rw-r--r-- 1 root root 3999 Feb 11 18:25 name_synonyms.txt
-rw-r--r-- 1 root root 2144 Feb 11 18:25 term_synonyms.txt 
```

这正是我所期待的，但是我在运行时看到以下错误`rake spec`

```
500 : {"error":"IndexCreationException[[test_facilities] failed to create index]; nested: FailedToResolveConfigException[Failed to resolve config path [/root/workspace/project-project-0f317744a1870b4baf61bbaeb390ebe1/config/synonyms/term_synonyms.txt], tried file path [/root/workspace/project-project-0f317744a1870b4baf61bbaeb390ebe1/config/synonyms/term_synonyms.txt], path file [/etc/elasticsearch/root/workspace/project-project-0f317744a1870b4baf61bbaeb390ebe1/config/synonyms/term_synonyms.txt], and classpath]; ","status":500} 
```

在我看来，虽然路径正确，但 Elasticsearch 无法加载文件，可能是加载顺序问题，我真的不太确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-26T09:38:10.740

您应该查看 elasticsearch 日志文件。就我而言`/var/log/elasticsearch/elasticsearch.log`

就我而言，我有这个：

```
 [2016-02-26 10:28:26,321][WARN ][cluster.action.shard     ] [Batragon] [myindex-1][2] received shard failed for [myindex-1][2], node[mynode], [P], v[1223], s[INITIALIZING], a[id=myid], unassigned_info[[reason=ALLOCATION_FAILED], at[2016-02-26T09:28:26.168Z], details[failed to create index, failure IndexCreationException[failed to create index]; nested: AccessControlException[access denied ("java.io.FilePermission" "/home/myuser/elasticsearch/my_synonyms.txt" "read")]; ]], indexUUID [haZBzLsuSmmxteIq-1K0vw], message [failed to create index], failure [IndexCreationException[failed to create index]; nested: AccessControlException[access denied ("java.io.FilePermission" "/home/myuser/elasticsearch/my_synonyms.txt" "read")]; ]
[myindex-1] IndexCreationException[failed to create index]; nested: AccessControlException[access denied ("java.io.FilePermission" "/home/myuser/elasticsearch/my_synonyms.txt" "read")];
  at org.elasticsearch.indices.IndicesService.createIndex(IndicesService.java:360)
  at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyNewIndices(IndicesClusterStateService.java:307)
  at org.elasticsearch.indices.cluster.IndicesClusterStateService.clusterChanged(IndicesClusterStateService.java:176)
  at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:494)
  at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:231)
  at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:194)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
  at java.lang.Thread.run(Thread.java:745)
  Caused by: java.security.AccessControlException: access denied ("java.io.FilePermission" "/home/myuser/elasticsearch/my_synonyms.txt" "read")
  ... 
```

我通过授予 java.policy 文件的读取权限（在我的例子中`/usr/lib/jvm/java-7-oracle/jre/lib/security/java.policy`）解决了这个问题：

```
grant {
    permission java.io.FilePermission "/home/myuser/elasticsearch/my_synonyms.txt", "read";
}; 
```

并重新启动 elasticsearch 服务。

您可以以更通用的方式在目录级别授予目录中的任何文件的权限，例如：

```
 grant {
    permission java.io.FilePermission "/home/myuser/current/config/elasticsearch/-", "read";
    permission java.io.FilePermission "/home/myuser/current/config/elasticsearch/", "read";
}; 
```

对文件的整个路径的执行权限也是必要的。就我而言：`current`和`current/config`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T04:11:17.020

文件的路径包含在 ES 索引映射中。在创建索引时，文件本身应该存在于 ES 服务器上，但是您已经定义了该文件相对于 Rails 应用程序的路径。

# alignment - 将段落与 RestructuredText 对齐的最佳方法？

> ID：14819093
> 
> 赞同：8
> 
> 时间：2013-02-11T19:07:34.463
> 
> 标签：alignment, restructuredtext

使用 restructuredText for pdf (rst2pdf) 使段落在页面中心对齐的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T02:29:17.517

您可以使用以下内容：

```
.. class:: center

This paragraph will be centered. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-14T17:42:02.627

如果您想在 rst2html.py (Docutils 0.12) 上使用中心标签（如上所述），您应该通过添加以下行来创建一个 css 文件，即 mystyle.css：

```
.center {text-align: center;} 
```

要将您的 rst 文件，即 myrst.rst 转换为 html 文件，请使用以下命令

```
rst2html myrst.rst myrst.html --stylesheet=mystyle.css,html4css1.css 
```

通过使用这种方法，下面的代码运行良好。

```
.. class:: center

This paragraph will be centered. 
```

# android - 无法两次更改 CheckBox 视图的背景颜色 - Android

> ID：14819096
> 
> 赞同：0
> 
> 时间：2013-02-11T19:07:42.097
> 
> 标签：android, user-interface, view, background

**在用户将其状态更改为Checked**后，我尝试更改**CheckBox**背景。下面的代码不能很好地工作。如果我单击未选中的复选框，它将状态和颜色更改为蓝色，当我再次单击它并取消选中时，颜色保持蓝色而不是变为红色。我确实引入了**invalidate()**的调用，但没有成功。我确认该方法收到点击并正确查看检查状态，但**如果**我所做的声明似乎只工作一次。

 ********XML**

```
<CheckBox
    android:id="@+id/chkLargeIcons"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="20"
    android:onClick="handleCheckBoxClick" /> 
```

**代码**

```
public void handleCheckBoxClick(View view) {
    CheckBox tmpChkBox = (CheckBox) findViewById(view.getId());
    if(tmpChkBox.isChecked())
    {
        tmpChkBox.setBackgroundColor(color.blue);
    }
    else
    {
        tmpChkBox.setBackgroundColor(color.red);
    }

    System.out.println(view.getId() + " " + tmpChkBox.isChecked());

    switch (view.getId()) {
    case R.id.chkLargeIcons:
        ...     
    break;
        ...
    }
    ...
} 
```

我应该对我的代码进行哪些更改以使其按我的意愿工作？

提前感谢您的任何帮助和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:18:07.143

要在检查时更改它，您需要附加一个 OnCheckChangedListener。然后将上面的代码放在里面。

```
CheckBox tmpChkBox = (CheckBox) findViewById(view.getId());
tmpChkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked) {
            buttonView.setBackgroundColor(Color.BLUE);
        } else { 
            buttonView.setBackgroundColor(Color.RED);
        }
    }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:16:21.287

首先对一个不清楚的方面进行一些解释

问题是如果有人假设我使用 android **Color**类，我的代码中提到的示例颜色可能会产生误导。当我使用存储在**color.xml中的****红色**和**蓝色**版本时，这就是为什么我在代码中将它们声明为***color.red***而不是***Color.RED***。

 ****因此，我的代码与其他答案中的侦听器代码相同，如果您假设颜色取自 android 类，则两者都是有效的。

我的问题的根源是一些奇怪的故障，或者我不知道导致以下代码工作错误的android行为。

```
public void handleCheckBoxClick(View view) {
    CheckBox tmpChkBox = (CheckBox) findViewById(view.getId());
    if(tmpChkBox.isChecked())
    {
        tmpChkBox.setBackgroundColor(color.blue);
    }
    else
    {
        tmpChkBox.setBackgroundColor(color.red);
    }
} 
```

**正是这样的线条**

```
 tmpChkBox.setBackgroundColor([ColorFromResources]); 
```

虽然代码的执行只让我发生了一次颜色变化，但它就这样保持不变，完全没有响应。这一变化在很大程度上具有误导性，让我在这个问题上停留了很长时间，甚至让我把它留待以后修复。经过更多研究后，我发现**以下代码更改可以解决我的问题：**

```
 tmpChkBox.setBackgroundColor(getResources().getColor([ColorFromResources])); 
```

现在一切都像一个魅力。但我仍然很困惑为什么没有**getResources().getColor(...)**资源调用颜色。希望这个答案能帮助像我这样奇怪的人。**********

# python - 当元素之一是 Python 字典时，在 MySQL 表中插入一行

> ID：14819098
> 
> 赞同：1
> 
> 时间：2013-02-11T19:07:47.530
> 
> 标签：python, mysql, database, dictionary, insert

我在将元素插入 MySQL 数据库时遇到问题。

这是我的代码：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

myData = [ { u'my_text' : {u'id': u'1', u'description' : u'described' }, u'my_id' : u'1' } ]

import MySQLdb as mdb
con = None
con = mdb.connect('localhost', 'abc', 'def', 'ghi');
cur = con.cursor()
con.set_character_set('utf8')
cur.execute('SET NAMES utf8;')
cur.execute('SET CHARACTER SET utf8;')
cur.execute('SET character_set_connection=utf8;')

sql = "INSERT IGNORE INTO MyTable ( 'my_id', 'my_text' ) VALUES ( %(my_id)s, %(my_text)s );"
cur.executemany(sql, myData)
con.commit()

if con: con.close() 
```

我的数据库是用这个创建的：

```
CREATE TABLE MyTable(
    'my_id' INT(10) unsigned NOT NULL,
    'my_text' TEXT
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

正如您从 python 脚本中看到的那样，我的列表中的一个元素是字典，它似乎正在停止插入 MySQL 数据库，但由于我最近几天才开始使用 MySQL，所以我可能错了。

如果我`my_text`在`myData`一个简单的文本短语中进行如下操作，则一切正常，并且插入到数据库表中也可以正常工作：

```
myData = [ { u'my_text' : u'something simple', u'my_id' : u'1' } ] 
```

我希望能够使用这个：

```
myData = [ { u'my_text' : {u'id': u'1', u'description' : u'described' }, u'my_id' : u'1' } ] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:18:03.727

你至少有两个选择。

1.  更改您的表架构：

    ```
    CREATE TABLE MyTable(
        'my_id' INT(10) unsigned NOT NULL,
        'id' INT(10),
        'description' TEXT
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8

    sql = "INSERT IGNORE INTO MyTable ( 'my_id', 'id', 'description' ) VALUES ( %s, %s, %s )"
    myArg = [(dct['my_id'], dct['my_text']['id'], dct['my_text']['description'])
             for dct in myData]
    cur.executemany(sql, myArg) 
    ```

2.  或更改传递给的参数`cur.executemany`：

    ```
    myData = [ { u'my_text' : {u'id': u'1', u'description' : u'described' }, u'my_id' : u'1' } ]
    myArg = [ {'my_txt' : str(dct['my_text']), 
               'my_id' : dct['my_id']} for dct in myData ]
    cur.executemany(sql, myArg) 
    ```

更改表架构的好处是现在可以选择基于`id`，因此数据更丰富。

但是，如果您不需要将 id 与描述分开，那么第二种方法将起作用，而无需更改表模式。

# android - 无网络时的应用内计费 v3

> ID：14819101
> 
> 赞同：4
> 
> 时间：2013-02-11T19:08:05.220
> 
> 标签：android, google-play, in-app-billing

In-App-Billing v3 是在我的 Android 应用程序中实现的，它的助手。

当没有网络时，我在开始购买后卡在一个难看的灰色屏幕上。

有没有办法在我们的应用程序中处理这个问题？

目前，当我没有从商店收到 SKU 详细信息时，我会在启动时禁用购买。但是，启动后连接可能会发生变化。我还没有找到知道 Google Play 服务是否可用的方法。

谢谢你的帮助！

![在此处输入图像描述](../Images/222513c13daa8c178174b9c43a659e9d.png)

类似问题：[应用内计费 V3 超时返回哪个响应代码？](https://stackoverflow.com/questions/14704920/android-which-response-code-does-in-app-billing-v3-return-upon-timeout/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T19:12:00.347

新的 Google Play 应用程序 v4.0.25 现在可以正确处理此问题：

![GPlay IAP：无连接](../Images/4565a0bc1bc152a246913df9bb162242.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T08:26:14.500

就像 NIkolay 建议的那样，一种解决方法可能是在发起请求之前检查连接性。

如果您想尝试一下，这里有一段代码可以帮助您；

1.  首先，您需要为您的 AndroidManifest.xml 文件添加一些权限；特别是**android.permission.ACCESS_NETWORK_STATE**或**android.permission.ACCESS_WIFI_STATE**。

    **访问**ConnectivityManager**（一般用于网络连接）需要 ACCESS_NETWORK_STATE，而**ACCESS_WIFI_STATE****允许**访问**WifiManager**（用于管理 Wi-Fi 连接）。**

     **> ```
    > <!-- Needed for Reachability testing / wifi vs 3g uploading -->
    > <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    > ```** 
***   二、查看此方法判断网络状态

    ```
    public static boolean isNetworkAvailable(Context context) {
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (null == netInfo || !netInfo.isConnected()) {
            return false;
        }
        return true;
    } 
    ```** 

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:26:32.317

不幸的是，到目前为止，所有提议的解决方案都需要在启动支付请求之前检查网络连接，这会在用户连接时提供明显的不必要延迟，并且在用户未连接时提供更长的延迟（等待超时） ，或者，需要并非所有应用程序都需要的权限。另外，如前所述，存在错误识别网络连接缺失（或存在）的危险。

此外，某些版本的 Google Play（至少对于某些版本的 Android）已经正确处理了网络连接不足的问题（例如，Nexus7 显示了一个标题为“错误”的对话框，其中包含文本“无连接”，正如人们所期望的那样） . 而且，由于更新 Google Play 应用程序的过程是自动化的，因此有些希望 Google 最终会针对当前展示它的应用程序版本解决这个问题，并且当它这样做时，具有激进解决方案的应用程序将希望拥有这些解决方案被删除，并且在他们这样做之前将有不必要的开销。

鉴于上述情况，最好的解决方案可能是在对话框或视图中添加一些突出显示的文本，该对话框或视图包含用户用于启动购买的按钮，说

“请确保您的设备已连接到互联网。如果遇到任何问题，请点击返回按钮。”

在灰屏上点击后退按钮似乎会导致屏幕消失，并导致 onActivityResult() 被 RESULT_CANCELED 调用，就像用户从支付对话框中取消一样。这样就可以让用户摆脱灰屏。

尽管这种方法技术含量很低，但对我来说，它似乎是众多糟糕选择中的最佳选择。**

# ruby - 如何让 Ruby 部分解析源代码？

> ID：14819105
> 
> 赞同：1
> 
> 时间：2013-02-11T19:08:25.773
> 
> 标签：ruby

我正在尝试用 Ruby 编写一个脚本，该脚本以交互方式为程序生成一些输入数据。这个想法是在 QtRuby 存在时使用它，否则使用控制台。我尝试的是

```
begin
  require "Qt4"
rescue LoadError => load_err
  puts "Qt not found, using console"
end

class ConsoleDefine
  # console code
end

class QtDefine < Qt::Widget
  # GUI code
end 
```

但是当 Qt4 不存在时，解释器拒绝了我的代码。有没有办法像 C++ 一样处理它，比如：

```
#ifdef QT4
class qt4gui 
{
    // some code
};
#else
class qt4gui
{
    // dummy
};
#endif // Qt4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:15:16.087

使用 require 对您有利：

```
begin
  require "Qt4"
  require "my_lib/qt4"
rescue LoadError => load_err
  puts "Qt not found, using console"
  require "my_lib/console"
end 
```

创建两个文件：

```
# my_lib/console.rb
class ConsoleDefine
  # console code
end

# my_lib/qt4.rb
class QtDefine < Qt::Widget
  # GUI code
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:15:51.237

正如@pst 所说，Ruby 中不需要预处理器，因为它是动态的。所以：

```
begin
  require "Qt4"
   class QtDefine < Qt::Widget
     # GUI code
   end
rescue LoadError => load_err
  puts "Qt not found, using console"
   class ConsoleDefine
     # console code
   end
end 
```

# javascript - 如果 AngularJS 在页面上运行，一种在浏览器控制台上进行测试的快速方法？

> ID：14819111
> 
> 赞同：0
> 
> 时间：2013-02-11T19:08:48.430
> 
> 标签：javascript, angularjs

您只需在浏览器控制台中键入以下内容即可测试 jquery 是否在页面上运行：

`$`

然后返回

`function()`

你可以用 AngularJS 做类似的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:11:25.427

怎么做：

```
angular 
```

如果您想了解有关版本的信息，然后可以查看`angular.version`

# domain-driven-design - 创建聚合的工厂应该放在哪里？

> ID：14819115
> 
> 赞同：0
> 
> 时间：2013-02-11T19:08:58.433
> 
> 标签：domain-driven-design

我们可以将工厂放置在*Aggregate root*上，放置在与生成另一个对象密切相关的对象上，或者我们可以将其实现为*Service*（通常创建*整个 Aggregate*）。

a) 在大多数情况下，用于创建*Aggregate 根的工厂应该放在哪里（假设只创建**根*而不是*整个 Aggregate*是有意义的）？在*根本*身？

b) 同样，在大多数情况下，用于创建*完整聚合的**工厂*应该放置在哪里？

 *谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T18:59:33.717

> a) 在大多数情况下，用于创建 Aggregate 根的工厂应该放在哪里（假设只创建根而不是整个 Aggregate 是有意义的）？在根本身？

如果只创建 Aggregate 根对象本身有意义，请提供工厂方法。在我看来，大多数时候这只是分配内存和调用初始化例程（`[Foo fooWithBar:...]`而不是`[[Foo alloc] initWithBar:...]`在 Objective-C 中）或使用带参数的构造函数（`new Foo(...)`例如在 Ruby 中）的静态便捷方法。

> b) 同样，在大多数情况下，用于创建完整聚合的工厂应该放置在哪里？

测试有问题吗？

我发现验证静态（工厂）方法的行为很难测试。本质上，您必须像对待遗留代码一样对待您的代码并进行重构，直到它可以测试为止。但是，如果测试规定了代码，您就不会遇到这样的问题。代替使用*工厂方法模式*，您将使用*抽象工厂*并依赖其实例方法。

所以，如果你把工厂放在一个指定的工厂对象里面：为了创建复杂的聚合对象，我倾向于使用多个工厂对象。那里有一个*聚合根工厂*，其他人都会与之交谈。它利用工厂制造聚合体的组件。这样一来，您就不会将复杂的对象创建集中到一个工厂中，该工厂随着代码库的发展而经常发生变化。相反，*Aggregate Root Factory*依赖于其他工厂来进行部件的初始化。

正如您的问题的评论者已经指出的那样，工厂应该放置在域层中。

**编辑：**特别是当您从存储库重构聚合时，使用多个工厂将很有用。例如，如果放入深度嵌套的 JSON，则只能测试工厂返回的对象。但是，如果您将创建子对象委托给其他工厂，那么您将能够 (1) 在测试中模拟它们，以及 (2) 验证*聚合根工厂*(i) 是否使用 (ii) 数据调用了它的协作者已经分手了。*

# c - 为什么 nan 可以通过重复计算来防止？

> ID：14819118
> 
> 赞同：8
> 
> 时间：2013-02-11T19:09:08.583
> 
> 标签：c, crash, nan

有时我得到一个 nan 作为乘法 no-nan b 和 c 的结果：

```
double a = b * c; //b = 0, c = 1024, a = nan 
```

或作为 floor() 的结果：

```
double a = floor(b); //b = 2024, a = nan 
```

sleep() 的重复计算和使用防止了这个问题：

```
a = b * c;  //a = nan
a = b * c;  //a = 0

a = floor(b);  //a = nan
a = floor(b);  //a = 2024

sleep(1);
a = b * c;  //a = 0

sleep(1);
a = floor(b);  //a = 2024 
```

**CPU**是 AMD Athlon(tm) 64 X2 双核处理器 3400+

**CPU温度**：

```
k8temp-pci-00c3
Adapter: PCI adapter
Core0 Temp: -1В°C
Core0 Temp: -2В°C
Core1 Temp: +3В°C
Core1 Temp: +7В°C

Adapter: SMBus PIIX4 adapter at 0b00
M/B Temp:    +30В°C  (low  =    +0В°C, high =   +85В°C)   
CPU Temp:  +28.5В°C  (low  =  +0.0В°C, high = +85.0В°C)   
M/B Crit:    +85В°C  (hyst =   +75В°C)                  
CPU Crit:   +124В°C  (hyst =  +114В°C) 
```

这个问题可能是 CPU 计时功能的结果吗？还是有其他问题的原因？

**更新**

我发现以下程序在该机器上产生 nan：

```
double a, b, c;
while(1) {
   a = 0;
   b = 1024;
   c = a * b; //c will be nan within 10-20 sec.
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T19:12:33.193

您是否有可能在程序的其他地方发生堆栈或内存覆盖 - 线程处理错误或互斥锁处理错误？添加睡眠来“修复”问题让我认为这可能是一个并发问题。如果可能，调试这些值并查看它们是否从其他位置动态更改，并写入内存断点或者可能只是一些 printfs（这可能会改变问题的时间并隐藏它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:03:05.163

实际上，这是特定于硬件的问题。当前平台上的以下程序工作 10-20 秒：

```
#include <math.h>
int main() {
   double a, b, c;
   while (1) {
      a = 0;
      b = 1024;
      c = a * b;
      if (isnan(c)) break;
   }
   return 0;
} 
```

# jquery - jQuery添加和删除类在一系列中不起作用

> ID：14819121
> 
> 赞同：-1
> 
> 时间：2013-02-11T19:09:29.983
> 
> 标签：jquery, css

我有一个输入字段，当用户单击输入时，我希望它有一个脉冲突出显示。我想我可以通过添加和删除一个类来做到这一点，但它似乎只是添加它。

CSS

```
input.update-value {
    -webkit-box-shadow: 0px 1px 5px rgba(12, 141, 45, 0.75);
    -moz-box-shadow:    0px 1px 5px rgba(12, 141, 45, 0.75);
    box-shadow:         0px 1px 5px rgba(12, 141, 45, 0.75);
} 
```

JS

```
$(function()
    {
       var  testTextBox = $('.edit-device');
       var code =null;
        testTextBox.keypress(function(e)
         {
             code= (e.keyCode ? e.keyCode : e.which);
            if (code == 13) 
            $(".edit-device").blur().addClass('update-value').delay(350);
            $(".edit-device").removeClass('update-value').removeClass();
            $(".edit-device").addClass('update-value').addClass();
            $(".delete-input").hide();
             e.preventDefault();
        });

     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:11:15.640

`delay()`仅适用于动画，不适用于添加/删除类。您需要使用 setTimeout，或者如果多次执行该函数，请使用 setInterval，如下所示：

```
$(function () {
    $('.edit-device').on('keyup', function (e) {
        e.preventDefault();
        var self = this, i=0;
        if (e.which == 13) {
            $(self).blur().addClass('update-value');
        }
        var timer = setInterval(function() {
            $(self).removeClass('update-value');
            setTimeout(function() {
                $(self).addClass('update-value');
            },1000);
            i++;
            if (i>3) clearInterval(timer);
        },2000);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/Muh2P/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:50:35.200

您可以使用以下 jQuery 插件，`$.fn.blink`.

```
$.fn.blink = function(cls, times, delay) {
    var $self = this.removeClass(cls);
    clearTimeout($.fn.blink.handler);
    !function animate(times) {
        if(times) {
            $self.toggleClass(cls);
            $.fn.blink.handler = setTimeout(function () {
                animate(times - 1);
            }, delay);
        }
    }(times * 2);
    return this;
}; 
```

用法：

```
$(".edit-device").blink("update-value", 3, 350); 
```

Blink以毫秒的延迟对类名计时**`3`**。**`update-value`****`350`**

[看这里。](http://jsfiddle.net/gfQBz/)

# objective-c - 正则表达式块否定

> ID：14819125
> 
> 赞同：1
> 
> 时间：2013-02-11T19:09:36.077
> 
> 标签：objective-c, regex, regex-negation, nsregularexpression

我想找出其中没有出现特定标签的字符串，例如：

```
<xyz>[\w]+<[^(unwanted)]></xyz> 
```

where`unwanted`将被解释为`a`, `d`, `e`, `n`,`t`和`u`. 但我想要的是一个块字符串。如何用正则表达式表达？我尝试过负前瞻，但它不起作用：

```
<xyz>.+(?!unwanted).+</xyz> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:16:17.527

```
<xyz>(?:(?!unwanted).)+</xyz> 
```

匹配 中的所有字符`<xyz>...</xyz>`，但前提是表达式`unwanted`不从其中任何一个字符开始。

# java - Java从麦克风获取分贝

> ID：14819127
> 
> 赞同：0
> 
> 时间：2013-02-11T19:09:39.447
> 
> 标签：java, audio, microphone

我知道已经有一些问题是这样的，但始终只是答案的一部分。

我只想获取麦克风“记录”的当前分贝。我已经打开了一个 TargetDataLine 但读取方法只返回令人困惑的字节：/

你能告诉我怎么读分贝吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:42:44.580

例如，如果您对测量[dB SPL](http://en.wikipedia.org/wiki/Sound_pressure)感兴趣，这是不可能的，至少在您可能的意思上是不可能的。以下是有关使用计算机麦克风测量绝对声音强度的几个答案之一：[如何计算音频 dB 级别？](https://stackoverflow.com/questions/2445756/how-can-i-calculate-audio-db-level)

如果您对字节的含义感到困惑并且感兴趣，例如，随着时间的推移测量音量/声音强度/类似的变化，这是可行的，但这是一个不同的问题。关于如何在 SO 上解释来自 javasound 和其他音频 api 的原始数据有很多问题，但更好的来源是教程。一个很好的起点是从[java 声音资源](http://www.jsresources.org/)中的一些示例和教程开始。您可能还对我[关于计算机音频基础知识的演讲的幻灯片](http://blog.bjornroche.com/2011/11/slides-from-fundamentals-of-audio.html)感兴趣。

# android - IllegalStateException 光标错误

> ID：14819128
> 
> 赞同：0
> 
> 时间：2013-02-11T19:09:44.020
> 
> 标签：android, sql, exception, cursor

很抱歉重复了这个问题。但是我尝试让很多方法都不起作用在applecation中，在第一轮中，它可以通过Activity。但在当时，这是一个错误。

```
SQLiteDatabase mDb;  
Database3 mHelper;  
SQLiteDatabase mDb2;  
Database mHelper2; 

private Cursor mCursor; 
private String name;
private String image;
private String location;
private String info;
private String shop;
private String mcontact;

mHelper2 = new Database(this,shop);  
    mDb2 = mHelper2.getWritableDatabase();  
    mHelper2.onUpgrade(mDb2, 1, 1); 

    if (info.equalsIgnoreCase("null")){
        AlertDialog.Builder builder = new AlertDialog.Builder(Activity_Mall_Floor.this);
        builder.setTitle("Floor Description");
        builder.setMessage("No Floor information of "+name);
        builder.setNeutralButton("OK", null);
        builder.show();

    }
    else {
        ListView listView1 = (ListView)findViewById(R.id.listView2);  
            mHelper = new Database3(this,info);  
            mDb = mHelper.getWritableDatabase();  
            mHelper.onUpgrade(mDb, 1, 1);  

            mCursor = mDb.rawQuery("SELECT " + Database3.COL_FLOOR + ", "   
                    + Database3.COL_IMAGE+ " FROM " + Database3.TABLE_NAME, null);  

            ArrayList<String> dirArray = new ArrayList<String>();  
            mCursor.moveToFirst();  

            while ( !mCursor.isAfterLast() ){  
                dirArray.add(mCursor.getString
                        (mCursor.getColumnIndex(Database3.COL_FLOOR)));   
                mCursor.moveToNext();      
            }  

            ArrayAdapter<String> adapterDir = 
                    new ArrayAdapter<String>(getApplicationContext()   
                    , android.R.layout.simple_list_item_1, dirArray);  
            listView1.setAdapter(adapterDir);
            listView1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                mCursor.moveToPosition(arg2);

                String floorName = mCursor.getString(mCursor.getColumnIndex(Database3.COL_FLOOR));
                String mapFloor = mCursor.getString(mCursor.getColumnIndex(Database3.COL_IMAGE));

                String floor = "";
                if(floorName.equalsIgnoreCase("1st Floor"))
                    floor = "1";
                else if (floorName.equalsIgnoreCase("2nd Floor"))
                    floor = "2";
                else if (floorName.equalsIgnoreCase("3rd Floor"))
                    floor = "3";
                else
                    floor = "4";

                mCursor = mDb2.rawQuery("SELECT DISTINCT " + Database.COL_NAME 
                        +" FROM " + Database.TABLE_NAME 
                        +" WHERE " + Database.COL_FLOOR + " = '" + floor +"' ", null);

                ArrayList<String> dirArray = new ArrayList<String>();  
                mCursor.moveToFirst();
                while ( !mCursor.isAfterLast() ){  
                    dirArray.add(mCursor.getString
                            (mCursor.getColumnIndex(Database.COL_NAME)));   
                    mCursor.moveToNext();      
                }

                Intent intent = new Intent(getApplicationContext(), Activity_Mall_FMap.class);
                    Bundle bundle = new Bundle();
                    bundle.putString("Floorname", floorName);
                    bundle.putString("Mapfloor", mapFloor);
                    bundle.putString("Shop", shop);
                    intent.putExtra("FloorList",dirArray);
                    intent.putExtras(bundle);
                    startActivity(intent);
                }
            });
    } 
```

错误形式 logcat

```
02-12 01:31:46.917: E/AndroidRuntime(11370): FATAL EXCEPTION: main
02-12 01:31:46.917: E/AndroidRuntime(11370): java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
02-12 01:31:46.917: E/AndroidRuntime(11370):    at android.database.CursorWindow.nativeGetString(Native Method)
02-12 01:31:46.917: E/AndroidRuntime(11370):    at android.database.CursorWindow.getString(CursorWindow.java:442)
02-12 01:31:46.917: E/AndroidRuntime(11370):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:51)
02-12 01:31:46.917: E/AndroidRuntime(11370):    at com.test.mall.Activity_Mall_Floor$1.onItemClick(Activity_Mall_Floor.java:85)
02-12 01:31:46.917: E/AndroidRuntime(11370):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
02-12 01:31:46.917: E/AndroidRuntime(11370):    at android.widget.AbsListView.performItemClick(AbsListView.java:1068)
02-12 01:31:46.917: E/AndroidRuntime(11370):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2525) 
```

这是错误行 85

```
String floorName = mCursor.getString(mCursor.getColumnIndex(Database3.COL_FLOOR));
String mapFloor = mCursor.getString(mCursor.getColumnIndex(Database3.COL_IMAGE)); 
```

谢谢指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:14:22.647

检查返回值

```
if (!mCursor.moveToFirst()) {
   Log.e(TAG, "Couldn't move to first");
   // do something here if move failed 
} 
```

您现在忽略它并告诉您移动是否成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T23:41:04.327

***使固定：***

1.  在从中读取数据之前尝试通过 moveToFirst 定位光标。

2.  在 if ( c.moveToFirst()) {} 之后关闭光标

3.  检查 null.e,g; if (c != null && c.moveToFirst()) {}

4.  检查 count.e,g; (c != null && c.getCount() >0 && c.moveToFirst()){}

# jquery-ui - 如何将 jQuery UI 选项绑定到 Knockout observable

> ID：14819132
> 
> 赞同：1
> 
> 时间：2013-02-11T19:09:56.673
> 
> 标签：jquery-ui, knockout.js

这个[小提琴](http://jsfiddle.net/jearles/Dt7Ka/)展示了如何将 jQuery 滑块 'slide' 事件绑定到 Knockout observable。这需要如何更改才能将滑块的“最大”选项绑定到可观察对象？您是否必须创建一个全新的 ko.bindingsHandler 条目？还是可以使用现有的？

这是小提琴中的代码供参考。

**HTML**

```
<h2>Slider Demo</h2>

Savings: <input data-bind="value: savings, valueUpdate: 'afterkeydown'" />
<div style="margin: 10px" data-bind="slider: savings, sliderOptions: {min: 0, max: 100, range: 'min', step: 1}"></div>

Spent: <input data-bind="value: spent, valueUpdate: 'afterkeydown'" />
<div style="margin: 10px" data-bind="slider: spent, sliderOptions: {min: 0, max: 100, range: 'min', step: 1}"></div>

Net: <span data-bind="text: net"></span> 
```

**JS**

```
ko.bindingHandlers.slider = {
  init: function (element, valueAccessor, allBindingsAccessor) {
    var options = allBindingsAccessor().sliderOptions || {};
    $(element).slider(options);
    ko.utils.registerEventHandler(element, "slidechange", function (event, ui) {
        var observable = valueAccessor();
        observable(ui.value);
    });
    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).slider("destroy");
    });
    ko.utils.registerEventHandler(element, "slide", function (event, ui) {
        var observable = valueAccessor();
        observable(ui.value);
    });
  },
  update: function (element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    if (isNaN(value)) value = 0;
    $(element).slider("value", value);

  }
};

var ViewModel = function() {
    var self = this;

    self.savings = ko.observable(10);
    self.spent = ko.observable(5);
    self.net = ko.computed(function() {
        return self.savings() - self.spent();
    });
}

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:19:58.293

看看这个[小提琴](http://jsfiddle.net/H6gYw/1/)。我添加了检查 max 是否可观察并订阅它：

```
if (ko.isObservable(options.max)) {
    options.max.subscribe(function(newValue) {
        $(element).slider('option', 'max', newValue);
    });
    options.max = ko.utils.unwrapObservable(options.max);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:32:14.770

我有一组用于 KO 的 jQUery Ui 绑定。我还没有完成滑块，因为我在项目中不需要该控件。但是检查我的按钮绑定

[https://github.com/AndersMalmgren/Knockout.Bindings](https://github.com/AndersMalmgren/Knockout.Bindings)

```
ko.bindingHandlers.button = {
    initIcon: function (options) {
        if (options.icon) {
            options.icons = { primary: options.icon };
        }
    },
    init: function (element, valueAccessor) {
        var options = ko.utils.unwrapObservable(ko.toJS(valueAccessor())) || {};
        ko.bindingHandlers.button.initIcon(options);

        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            $(element).button("destroy");
        });

        $(element).button(options);
    },
    update: function (element, valueAccessor) {
        var options = ko.toJS(valueAccessor());
        ko.bindingHandlers.button.initIcon(options);

        if (options) {
            $(element).button(options);
        }
    }
}; 
```

神奇的是在更新函数中完成的，KO 将默认订阅对象字面量中的所有可观察对象，因此如果您绑定到`{ max: aObservable }`更新函数将在任何子更新时触发。

然后我`ko.toJS(valueAccessor());`取消观察对象并使用它来更新 jQuery 控件。此方法也可用于滑块，它是通用的，您不需要为每个设置添加额外的代码

# r - 使用 `with` 分配给 data.frame

> ID：14819135
> 
> 赞同：3
> 
> 时间：2013-02-11T19:10:08.370
> 
> 标签：r

这是一个以两种不同方式分配的示例，一种有效，一种无效：

```
library(datasets)
dat <- as.data.frame(ChickWeight)
dat$test1 <- with(dat, Time + weight)
with(dat, test2 <- Time + weight)
> colnames(dat)
[1] "weight" "Time"   "Chick"  "Diet"   "test1" 
```

我已经习惯了这种行为。也许更令人惊讶的是`test2`它就消失了（而不是像我预期的那样在基础环境中结束）：

```
> ls(pattern="test")
character(0) 
```

注意 with 是一个相当简单的^H^H^H^H^H^H 短函数：

```
function (data, expr, ...) 
eval(substitute(expr), data, enclos = parent.frame()) 
```

首先让我们复制 with 的功能：

```
eval( substitute(Time+weight), envir=dat, enclos=parent.frame() ) 
```

现在用不同的外壳进行测试：

```
testEnv <- new.env()
eval( substitute(test3 <- Time+weight), envir=dat, enclos=testEnv )
ls( envir=testEnv ) 
```

仍然没有分配任何地方。这反驳了我的预感，即它与被丢弃的封闭环境有关，而是指出了一些更基本的`,enclos`论点，而不是像我认为的那样做。

我很好奇为什么会这样的**机制**以及是否有允许分配的**替代方案。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:13:31.877

更改`with`为`within`。`with`仅用于使变量可用，而不是更改它们。

编辑：详细说明，我相信两者都`with`创建`within`一个新环境并用给定的类似列表的对象（例如数据框）填充它，然后在该环境中评估给定的表达式。不同之处在于`with`返回表达式的结果并丢弃环境，而`within`返回环境（转换回原来的任何类，例如 data.frame）。无论哪种方式，在表达式中进行的任何赋值都可能在创建的环境中执行，该环境被`with`. 这就解释了为什么`test2`做了之后就无处可寻`with(dat, test2 <- Time + weight)`。

请注意，由于`within`返回修改后的环境而不是就地编辑它（即按值调用语义），因此您需要执行`dat <- within(dat, test2 <- Time + weight)`.

如果您想要一个函数对当前环境（或任何指定的环境）进行分配，请查看`assign`.

编辑 2：现代答案是拥抱 tidyverse 并使用 magrittr & dplyr：

```
library(datasets)
library(dplyr)
library(magrittr)
dat <- as.data.frame(ChickWeight)
dat %<>% mutate(test1 = Time + weight) 
```

最后一行相当于

```
dat <- dat %>% mutate(test1 = Time + weight) 
```

这又相当于

```
dat <- mutate(dat, test1 = Time + weight) 
```

使用最后 3 行中对您最有意义的那一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:43:54.530

受到以下事实的启发：命令行中的以下内容...

```
eval(substitute(test <- Time + weight, dat)) 
```

...我将以下内容放在一起，这似乎可行。

```
myWith <- function(DAT, expr) {
    X <- call("eval", 
              call("substitute", substitute(expr), DAT))
    eval(X, parent.frame())
}

## Trying it out
dat <- as.data.frame(ChickWeight)
myWith(dat, test <- Time + weight)
head(test)
# [1]  42  53  63  70  84 103 
```

（这个问题的复杂方面是我们需要在*一个*环境（当前帧）`substitute()`中搜索符号，而“外部”分配到*不同*的环境（父帧）。）*`eval()`*

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:07:19.887

我觉得这太复杂了。两者`with`和`within`返回通过对数据帧的命名列的操作计算的值。如果您不将它们分配给任何东西，则该值将被垃圾收集。存储 tehn 的常用方法是使用运算符分配给命名对象或对象的组件`<-`。`within`返回整个数据框，而`with`仅返回根据对列名执行的任何操作计算得出的向量。当然，您可以使用`assign`而不是`<-`，但我认为过度使用该函数可能会混淆而不是澄清代码。使用的区别只是分配给一个完整的数据框或只是一个列：

```
 dat <- within(dat, newcol <- oldcol1*oldcol2)
 dat$newcol <- with(dat,  oldcol1*oldcol2) 
```**

# facebook - 喜欢按钮发布：名称用户喜欢的索引/应用名称

> ID：14819138
> 
> 赞同：1
> 
> 时间：2013-02-11T19:10:13.527
> 
> 标签：facebook, facebook-like, metatag

我有一个喜欢按钮的问题：如果点击，它会在时间轴上显示这篇文章：

{name user} 喜欢 {app name} 上的索引，并带有正确的描述和缩略图

我把这些元标记

```
<meta name="description" content="Ho appena creato la mia storia con ''Lettere d'amore'' di Goldenpoint. Fallo anche tu e avrai subito un buono sconto del 10% da utilizzare in tutti i negozi goldenpoint e sullo shop on line" />
<meta property="og:image" content="<?php echo $urlThumb; ?>" />
<meta property="og:title" content="Goldenpoint Lettere d&#039;amore" />
<meta property="og:type" content="game" />
<meta property="og:url" content="<?php echo "https://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";?>" />
<meta property="og:site_name" content="Goldenpoint Lettere d&#039;amore" />
<meta property="fb:admins" content="xxxxxxxxxxxxxx" /> 
```

和喜欢的按钮是：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/it_IT/all.js#xfbml=1&appId=404791622949241";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="http://apps.facebook.com/lettereamore/" data-    send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

使用调试器我看到一个奇怪的事情：如果我输入网站 url，一切都很完美，但如果我使用 facebook 应用程序的 url 进行测试，它返回索引

我该如何解决这个问题？谢谢你

# php - 使用 PHP 从 css 文件中提取颜色

> ID：14819155
> 
> 赞同：1
> 
> 时间：2013-02-11T19:11:47.977
> 
> 标签：php, javascript, search, preg-match, extract

我正在尝试使用 php 从 css 文件中提取颜色。这些颜色可能是：

1.  正常颜色（颜色：#xxxxxx;）
2.  背景颜色（背景：#xxxxxx；/背景：...#xxxxxx ...;）
3.  背景渐变（背景图像：线性渐变（顶部，#xxxxxx，#xxxxxx）；
4.  有时颜色可能是 3 个字符（例如：#fff）

我尝试使用 preg match 返回以 # 开头的单词

```
preg_match_all('/(?!\b)(#\w+\b)/', $css_text, $matches) 
```

...但它也返回 DIV Id（#header 等）

展望未来，我还希望我们的代码返回一个多维数组，其中不仅包含颜色代码，还包含找到它的行号。

请帮忙！:)

---------- 编辑：问题已解决 ----------

谢谢大家的回答，我把大家的答案结合起来了。因为我想将正则表达式保持在最低限度，**所以这就是我用作最终工作代码的代码**：

```
$css = file_get_contents("style.css");

$token = strtok($css, "{}");
$css_parts = array();
while ($token !== false) {
    $css_parts[] = trim($token);
    $token = strtok("{}");
}

$flag = false; $properties = "";
    foreach($css_parts as $part) {
    if($flag) { $properties .= " ".trim($part); }
    $flag = !$flag;
}
$properties = strtoupper(str_replace(array(":",",",";","(",")")," ",$properties));

$colors = array();
preg_match_all('/(?!\b)(#\w+\b)/',$properties,$colors);
$colors = array_unique($colors[0]);

print_r($colors); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:44:04.143

实际上，只要您假设选择器中没有大括号（通常是一个很好的假设），您就可以很容易地使用三管齐下的方法来做到这一点。

第 1 步：抓取 {} 内的内容

```
preg_match( '/\{([^\}]*)\}/gi' , $css_text , $lines ); 
```

第2步：抓取颜色

```
$colors = array();
$i = sizeof($lines);

while( $i-- ) {
    preg_match( '/(#[0-9a-f]{6}|#[0-9a-f]{3})/' , $line[$i] , $matches );
    $colors += $matches; //combine the arrays
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:34:29.960

由于您只接受 3 或 6 个十六进制字符，我认为这个正则表达式可能更准确：

```
/(?!\b)((#[0-9abcdef]{3}|#[0-9abcdef]{6})\b)/ 
```

但是，具有这些字符的 ID 也会被匹配。因此，我不建议使用正则表达式来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:58:21.887

这是一些不使用正则表达式的代码（它在行和字符上循环），但可以完成工作。它生成一个关联数组，其中键是十六进制颜色代码，值是找到颜色键的行号数组。（也可以修改为包括 rgba 颜色键）。

```
$lst_lines = array(
   35 => "color: #000;text-decoration: none;",
   36 => "font-size: 2.5em;",
   37 => "margin-top: 5px;line-height: 60px;height: 60px;float: right;border-radius: 5px;box-  shadow: inset 0px 0px 0px 1px #872424, inset 0px 2px 0px 0px #F79494, inset 0px 0px 0px 2px #E78484;background: #A74444;background-image: linear-gradient(top, #A74444, #C76464);background-image: -moz-linear-gradient(top, #A74444, #C76464);background-image: -webkit-linear-gradient(top, #A74444, #C76464);background-image: -o-linear-gradient(top, #A74444, #C76464);background-image: -ms-linear-gradient(top, #A74444, #C76464);text-shadow: -1px -1px 0px rgba(0,0,0,0.5);",
   38 => "color: #1D1D1D;text-transform: uppercase;font-size: 1.1em;letter-spacing: -1px;text-decoration: none;color: #fff;opacity: 0.6;filter:alpha(opacity='50');",
);

// returns color in $str_line at position $int_pos
function findColor($int_pos, $str_line) {
    $str_temp = substr($str_line, $int_pos, 6);
    $lst_temp = str_split($str_temp);
    $lst_end = array(',', ';', ')', '}', ' ');
    $hex_color = '#';
    foreach ($lst_temp as $i => $c) {
        if (!in_array($c, $lst_end) && ($i < 6)) $hex_color .= $c;
        else break;
    }
    return $hex_color;
}

$arr_colors = array();    // This is the output array
foreach ($lst_lines as $int_no => $str_line) {
    $lst_chars = str_split($str_line);
    foreach ($lst_chars as $i => $c) {
        if ($c == '#') {
            $hex_col = findColor($i+1, $str_line);
            $arr_colors[$hex_col][] = $int_no;
        }
    }
} 
```

# facebook-winjs-sdk - 如何使用 facebook-winjs-sdk 从 windows8 应用程序中注销？

> ID：14819159
> 
> 赞同：-1
> 
> 时间：2013-02-11T19:12:01.800
> 
> 标签：facebook-winjs-sdk

我尝试使用 facebook-winjs-sdk ，但 FB.logout() 功能不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:37:41.603

你检查样品了吗？

您可以在[https://github.com/Thuzi/facebook-winjs-sdk-sample找到它](https://github.com/Thuzi/facebook-winjs-sdk-sample)

# php - 密钥中的 AES-128 UTF-8 字符（iOS ↔ PHP）

> ID：14819163
> 
> 赞同：0
> 
> 时间：2013-02-11T19:12:20.220
> 
> 标签：php, ios, cocoa-touch, aes, mcrypt

经过很长时间的研究，我终于在 iOS 和 PHP 上进行了编码/解码。我写了一个小算法，在 iOS 和 PHP 上都使用随机创建的 16 字节密钥池。该算法使两个系统保持同步，因此我不会多次使用密钥。

但是我的密钥包含一些 UTF8 字符（我认为）。我正在使用标准`[a-z][A-Z][0-9]`字符，包括这些特殊字符：

```
!\"§$%&/()=?+-*#.,£[]|{} 
```

不幸的是，当使用其中一个密钥时，PHP 上的解密失败。在 iOS 上，我在`stringByAddingPercentEscapes:`转义更多字符的方法上使用了扩展。然后我将转义的数据作为`POST`变量发送到服务器。

我玩了一下，结果证明 using only`[a-z][A-Z][0-9]`效果很好。

关于解决我的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:51:06.577

您描述的字符中，`£`并且`§`不是 ASCII 字符。根据您传输它们的方式，这两个可能已损坏。

话虽如此 - 加密密钥是数据，而不是字符串。如果您将加密密钥表示为 NSData 而不是 NSString，那么字符集将不再是问题，并且您应该能够使用任何随机生成的密钥，而不仅仅是由这 85 个字符组成的密钥。

# python - 如何在 Python 的列表推导中使用正则表达式？

> ID：14819164
> 
> 赞同：11
> 
> 时间：2013-02-11T19:12:20.857
> 
> 标签：python, regex

我正在尝试在单词列表中定位字符串的所有索引位置，并且我希望将值作为列表返回。如果它是单独的，或者它是否在标点符号之前或之后，我想找到该字符串，但如果它是一个较大单词的子字符串，则不是。

以下代码仅捕获“cow”，并错过了“test;cow”和“cow”。

```
myList = ['test;cow', 'one', 'two', 'three', 'cow.', 'cow', 'acow']
myString = 'cow'
indices = [i for i, x in enumerate(myList) if x == myString]
print indices
>> 5 
```

我尝试更改代码以使用正则表达式：

```
import re
myList = ['test;cow', 'one', 'two', 'three', 'cow.', 'cow', 'acow']
myString = 'cow'
indices = [i for i, x in enumerate(myList) if x == re.match('\W*myString\W*', myList)]
print indices 
```

但这给出了一个错误：预期的字符串或缓冲区

如果有人知道我做错了什么，我会很高兴听到。我有一种感觉，这与我在期望字符串时尝试在其中使用正则表达式的事实有关。有解决办法吗？

我正在寻找的输出应该是：

```
>> [0, 4, 5] 
```

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T19:13:55.877

您不需要将`match`返回的结果分配给`x`. 你的比赛应该是 on`x`而不是`list`.

此外，您需要使用`re.search`而不是`re.match`，因为您的正则表达式模式`'\W*myString\W*'`将不匹配第一个元素。那是因为`test;`与 不匹配`\W*`。实际上，您只需要测试紧随其后的字符和前面的字符，而不是完整的字符串。

因此，您可以`word boundaries`在字符串周围使用：

```
pattern = r'\b' + re.escape(myString) + r'\b'
indices = [i for i, x in enumerate(myList) if re.search(pattern, x)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T19:15:52.993

您的代码存在一些问题。首先，您需要将 expr 与列表元素 ( `x`) 进行匹配，而不是与整个列表 ( `myList`) 进行匹配。其次，为了在表达式中插入变量，您必须使用`+`（字符串连接）。最后，使用原始文字 ( `r'\W`) 正确解释 expr 中的斜杠：

```
import re
myList = ['test;cow', 'one', 'two', 'three', 'cow.', 'cow', 'acow']
myString = 'cow'
indices = [i for i, x in enumerate(myList) if re.match(r'\W*' + myString + r'\W*', x)]
print indices 
```

如果 myString 有可能包含特殊的正则表达式字符（如斜线或点），您还需要对其应用`re.escape`：

```
regex = r'\W*' + re.escape(myString) + r'\W*'
indices = [i for i, x in enumerate(myList) if re.match(regex, x)] 
```

正如评论中所指出的，以下可能是更好的选择：

```
regex = r'\b' + re.escape(myString) + r'\b'
indices = [i for i, x in enumerate(myList) if re.search(regex, x)] 
```

# c# - 将 Web 引用添加到安全的 http Web 服务

> ID：14819170
> 
> 赞同：0
> 
> 时间：2013-02-11T19:12:46.223
> 
> 标签：c#, wcf, web-services

我有一个 WCF 客户端，我应该从该客户端与第三方 Web 服务进行通信，其 url 和 wsdl 已公开。第三方 WebService(.asmx) 使用 https。我所做的只是尝试从我的开发环境中添加服务引用，但无法成功。所以我继续使用 SOAPUI 来测试我能够触发请求并得到响应的服务。

在 VS2010 中是否不可能添加服务引用以访问 HTTPS Web 服务的元数据？由于这是我第一次使用 HTTPS，如果有人能指导我正确的方法，我会很高兴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:28:15.193

> @Aron :I tried to get the same by using a web browser and i selected proceed anyway option then it takes me to the WSDL page.

I will assume that you are running your development server on your local dev machine. You should check the actual address that the IIS server is setup for. Open up the page in your web browser. You will have a page that asks you if you want to proceed anyway, DONT. View server certificate.

![Google mail Certificate](../Images/f55445f3bb593be1b5a509951a7a446d.png)

Here is the GMail certificate. Notice the "issued to:". This means that the certificate is only for [https://mail.google.com](https://mail.google.com). If another server tried to use it for another address you would have the same error.

So you want to use whatever is in there as your https://{my issued to}/Webservice.asmx

# c# - WPF中的线条效果

> ID：14819177
> 
> 赞同：3
> 
> 时间：2013-02-11T19:13:08.763
> 
> 标签：c#, wpf, xaml, effects

我正在使用 WPF。有没有办法得到这样的效果：

![在此处输入图像描述](../Images/5075a4c567f9a937d03d75b85d7f3ddd.png)

[线效果](https://i.stack.imgur.com/qHLUh.png)

所以基本上是一个渐变，上面有多条线。数线应根据元素的宽度/高度增加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:49:39.500

我会使用两层，第一个矩形是背景，第二个是重叠的

```
<!-- Background gradient -->
<Rectangle Width="200" Height="100">
    <Rectangle.Fill>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FF5B5B5B" Offset="0.008"/>
            <GradientStop Color="#FFA6A6A6" Offset="1"/>
        </LinearGradientBrush>
    </Rectangle.Fill>    
</Rectangle>

<!-- Lines layer -->
<Rectangle Width="200" Height="100">
    <Rectangle.Fill>
        <VisualBrush
                TileMode="Tile"
                Viewport="0,0,7,7"
                ViewportUnits="Absolute"
                Viewbox="0,0,7,7"
                ViewboxUnits="Absolute" >
            <VisualBrush.Visual>
                <Line X1="7" X2="0" Y1="0" Y2="7" Stroke="Gray" />
            </VisualBrush.Visual>
        </VisualBrush>
    </Rectangle.Fill>
</Rectangle> 
```

**回应@Shlomo**

您最终可以将画笔更改为包含两条线而不是一条线，以在放大时消除间距。解决方案看起来像这样：

```
<VisualBrush.Visual>
    <Grid>
        <Line X1="10" X2="0" Y1="0" Y2="10" Stroke="Gray" />
        <Line X1="4" X2="-1" Y1="-1" Y2="4" Stroke="Gray" />
    </Grid>
</VisualBrush.Visual> 
```

这样我们就不需要那些难看的近似数字了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:46:16.167

解决 Aleksander 的解决方案。如果放大它们，它会修复线条看起来像一条香肠的缺陷。

```
<!-- Background gradient -->
<Rectangle Width="200" Height="100">
    <Rectangle.Fill>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FF5B5B5B" Offset="0.008"/>
            <GradientStop Color="#FFA6A6A6" Offset="1"/>
        </LinearGradientBrush>
    </Rectangle.Fill>    
</Rectangle>

<!-- Lines layer -->
<Rectangle Width="200" Height="100">
    <Rectangle.Fill>
        <VisualBrush
                TileMode="Tile"
                Viewport="0,0,10,10"
                ViewportUnits="Absolute"
                Viewbox="0,0,10,10"
                ViewboxUnits="Absolute" >
            <VisualBrush.Visual>
                <Grid>
                    <Line Fill="#777" X1="0" X2="10" Y1="10" Y2="0" Stroke="Gray" StrokeThickness="1" />
                    <Line Fill="#777" X1="0" X2="0.35355339059327376220042218105242" Y1="0" Y2="0.35355339059327376220042218105242" Stroke="Gray" />
                    <Line Fill="#777" X1="9.6464466094067262377995778189476" X2="10" Y1="9.6464466094067262377995778189476" Y2="10" Stroke="Gray" />
                </Grid>
            </VisualBrush.Visual>
        </VisualBrush>
    </Rectangle.Fill>
</Rectangle> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:18:04.400

这是一个适合您的示例。

```
 <Rectangle Width="200" Height="100">
        <Rectangle.Fill>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="Yellow" Offset="0.0" />
                <GradientStop Color="Red" Offset="0.25" />
                <GradientStop Color="Blue" Offset="0.75" />
                <GradientStop Color="LimeGreen" Offset="1.0" />
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle> 
```

# rest - 在 Grails 和 Spring Security 中保护 REST API

> ID：14819178
> 
> 赞同：3
> 
> 时间：2013-02-11T19:13:10.970
> 
> 标签：rest, grails

我已将我的 Grails 应用程序拆分为两个应用程序 - 一个面向客户的 Web 应用程序和一个托管 REST api 的单独应用程序。我这样做是因为我正在构建一个 iOS 应用程序来配合我的网络应用程序。我的应用程序使用 Spring Security，我想保护 REST api。我惊讶地发现关于正确方法的信息很少。我应该使用 Spring Security 实现 oauth，从而使我的 API 应用程序成为 oauth 提供者吗？

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-16T16:29:14.123

在过去的几周里，我一直在开发一个插件，该插件完全涵盖了您想要做的事情：

[http://grails.org/plugin/spring-security-rest](http://grails.org/plugin/spring-security-rest)

看看它，如果你有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-10T19:10:53.500

是的，我只是为另一个应用程序这样做。当访问 REST URL 时，您必须告诉 spring security 以不同的方式表现。

将此添加到您的`config.groovy`

现在，您将拥有应用程序的两个部分，它们通过以下方式进行身份验证

a) URL 中带有 /api 的任何内容（假设您就是这样设置 REST 的），获取基本身份验证

b）其他一切，都通过登录页面。

```
// making the application more secured by intercepting all URLs 
grails.plugins.springsecurity.useBasicAuth = true
grails.plugins.springsecurity.basic.realmName = " REST API realm"
grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap

//Exclude normal controllers from basic auth filter. Just the JSON API is included
grails.plugins.springsecurity.filterChain.chainMap = [
'/api/**': 'JOINED_FILTERS,-exceptionTranslationFilter',
'/**': 'JOINED_FILTERS,-basicAuthenticationFilter,-basicExceptionTranslationFilter'
] 
```

# android - 用 TabsAdapter 动态替换 ViewPager 中的片段

> ID：14819179
> 
> 赞同：3
> 
> 时间：2013-02-11T19:13:12.207
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager, android-tabs

我将 ViewPager 与 ActionBar 选项卡结合使用，[如此处所示](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。我使用 ActionBarSherlock 是为了向后兼容，因此父活动扩展了 SherlockFragmentActivity，子片段扩展了 SherlockFragment。

该解决方案适用于带有滑动的选项卡，但现在我想动态更改与其中一个选项卡关联的片段。

我已经阅读了关于这个主题的大量 SO 答案（例如[这里](https://stackoverflow.com/questions/7723964/replace-fragment-inside-a-viewpager)和[这里](https://stackoverflow.com/questions/14389796/actionbarsherlock-viewpager-tabsadapter-nested-tab-fragments)），但是我没有找到关于如何在使用上面的 ViewPager + TabsAdapter 时动态更改片段的清晰解释。

这就是我现在所拥有的。当用户点击现有片段上的按钮时，我尝试替换父活动中的片段，如下所示：

```
AnotherFragment fragment = new AnotherFragment();           
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();

int viewId = R.id.pager;                 // resource id of the ViewPager
int position = Constants.TAB_2;          // tab pos of the fragment to be changed

String tag = "android:switcher:" + viewId + ":" + position;

ft.replace(viewId, fragment, tag);
ft.commit();

mTabsAdapter.notifyDataSetChanged(); 
```

这不起作用，所以我错过了一些东西。我还尝试使用 getChildFragmentManager() 对嵌套片段执行此操作，但遇到了一个问题，因为没有 API 17、Android 4.2 就无法使用此函数。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T10:09:02.703

我做了一个小例子，显示了类似的行为。我希望你可以重复使用它。

我认为关键是使用片段作为容器并使用它替换您的“真实”片段。

例如，查看如何导航到另一个片段：

```
 btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            FragmentTransaction trans = getFragmentManager()
                    .beginTransaction();
            /*
             * IMPORTANT: We use the "root frame" defined in
             * "root_fragment.xml" as the reference to replace fragment
             */
            trans.replace(R.id.root_frame, new SecondFragment());

            /*
             * IMPORTANT: The following lines allow us to add the fragment
             * to the stack and return to it later, by pressing back
             */
            trans.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
            trans.addToBackStack(null);

            trans.commit();
        }
    }); 
```

您可以在此处查看整个示例：

[https://github.com/danilao/fragments-viewpager-example](https://github.com/danilao/fragments-viewpager-example)

# c++ - 为什么我不能在 gdb 调试器中使用“打印”访问向量中的值？

> ID：14819183
> 
> 赞同：4
> 
> 时间：2013-02-11T19:13:30.703
> 
> 标签：c++, vector, gdb

我正在学习使用 gdb 调试器，但是当该向量包含从另一个向量复制的值时，无法访问该向量的值。最终，下面的程序做了我想做的事情（将“nums”的值复制到一个新的向量“copyOfNums”中），但是当我在“copyNums”中执行第一个 for 循环后尝试检查 copyOfNums[0] 的值时"，无法访问内存中的值（请参阅下面的 gdb 会话）。

下面copy nums已经执行了for语句的1个循环，所以copyNums[0]应该包含nums[0]指向的值的地址还是应该包含对新int的引用（与l- nums[0]) 指向的值？无论如何，我希望能够访问该值，但正如您从以下 gdb 输出中看到的那样，它是不可访问的。

```
Breakpoint 1, copyNums (nums=@0x7fff5fbffad0) at main.cpp:10

(gdb) print nums[0]
$1 = (int &) @0x100103910: 2
(gdb) print copyOfNums[0]
$2 = (int &) @0x0: Cannot access memory at address 0x0
(gdb) 

#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <vector>

using namespace std;

vector<int> copyNums(vector<int> nums){
  int sizeNums = nums.size();
  vector<int> copyOfNums;

=>for (int i = 0; i < sizeNums; i++){
    copyOfNums.push_back(nums[i]);
  }

  return copyOfNums;
}

vector<int> getSmallNums(){

  vector<int> nums;
  nums.push_back(2);
  nums.push_back(1);
  nums.push_back(8);

  return nums;
}

int main (int argc, char *argv[]){
    vector<int> nums = getSmallNums();
    vector<int> copyOfNums = copyNums(nums);

    return 0;
} 
```

这是 sort 返回后的 gbd 输出。看起来副本包含对内存中新位置的引用，其左值为 2（如预期的那样）。为什么我无法在函数 copyNums 中访问 c​​opyOfNums[0]？

```
(gdb) print nums[0]
$3 = (int &) @0x1001000e0: 2
(gdb) print copyOfNums[0]
$4 = (int &) @0x100103920: 2 
```

编辑：这是调试会话的更完整图片

```
(gdb) info locals
i = 1
sizeNums = 3
copyOfNums = {
  <std::_Vector_base<int,std::allocator<int> >> = {
    _M_impl = {
      <std::allocator<int>> = {
        <__gnu_cxx::new_allocator<int>> = {<No data fields>}, <No data fields>},
      members of std::_Vector_base<int,std::allocator<int> >::_Vector_impl:
      _M_start = 0x0,
      _M_finish = 0x0,
      _M_end_of_storage = 0x0
    }
  }, <No data fields>}
(gdb) print copyOfNums[0]
$1 = (const int &) @0x0: Cannot access memory at address 0x0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:16:28.767

我不确定编译器能优化多少，但实际上，这段代码：

```
vector<int> copyNums(vector<int> nums){
  int sizeNums = nums.size();
  vector<int> copyOfNums;

  for (int i = 0; i < sizeNums; i++){
    copyOfNums.push_back(nums[i]);
  }

  return copyOfNums;
} 
```

与此代码具有相同的结果：

```
vector<int> copyNums(vector<int> nums){
  return nums;
} 
```

如果编译器正在做这样的优化，或者其他一些可能的优化，`copyofNums`可以完全优化掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:30:32.393

让我回答你的部分问题。

> copyNums[0] 包含 nums[0] 指向的值的地址，还是应该包含对新 int 的引用（与 nums[0] 指向的左值相同）？

您使用的术语（新的，参考）让我感到困惑。

`copyNums[0]`包含处的值的**副本**`num[0]`。`&nums[0]`不同于`&copyNums[0]`. 并`nums[0]`包含一个值`int`类型。因此，`copyNums[0]`既不包含位置 nums[0] 的地址，也不包含对新 int 的引用。

# bash - stderror 和 stdout 是否都打印在屏幕上？

> ID：14819185
> 
> 赞同：-1
> 
> 时间：2013-02-11T19:13:34.083
> 
> 标签：bash

如果我运行 I bash 命令，我在哪里可以找到 STDERR。如果我不将结果记录在文件中，STDOUT 和 STDERR 是否会同时显示在屏幕上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:18:50.863

除非您指定重定向，否则它们都将连接到您的终端。

尝试类似的东西

```
ls -l /proc/self/fd 
```

你会看到你的 shell 的相关文件描述符

```
total 0
lrwx------ 1 user group 64 Feb 11 14:16 0 -> /dev/pts/8
lrwx------ 1 user group 64 Feb 11 14:16 1 -> /dev/pts/8
lrwx------ 1 user group 64 Feb 11 14:16 2 -> /dev/pts/8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:17:53.267

您无法“找到”`stdout`或`stderr`. 默认情况下，它们被重定向到屏幕。

您可以将它们重定向到一个文件，例如：

*   重定向`stdout`到`ls-l.txt`：

    ```
    ls -l > ls-l.txt 
    ```

*   重定向`stderr`到`grep-errors.txt`

    ```
    grep da * 2> grep-errors.txt 
    ```

*   重定向`stdout`到`stderr`：

    ```
    grep da * 1>&2 
    ```

所有这些都在这里得到很好的解释：http: [//tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:16:42.473

这很容易测试：

```
$ echo 'stdout'
stdout
$ echo 'stderr' >/dev/stderr
stderr 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T08:34:32.070

不，不一定。至少在理论上，stdout（文件描述符 1）和 stderr（文件描述符 2）是不同的。stdout 是*缓冲*的，stderr 不是。这个想法是缓冲区对于标准输出更有效，但错误不应该被缓冲区延迟。有可能使这两个不同步，但是不太可能。

实际上，终端系统使用行缓冲，附加“\n”（换行符）将刷新标准输出缓冲区，因此问题很少发生（尽管“很少”与“从不”不同）。

从 C 可以*写入*文件描述符 (fd) 0 (stdin) 并从 fds 1 和 2*读取，因为终端驱动程序只知道输入/输出（把人搞糊涂了）。*

# java - java游戏中物体的破坏

> ID：14819188
> 
> 赞同：-5
> 
> 时间：2013-02-11T19:13:55.477
> 
> 标签：java, object, memory, destruction

我的 java 游戏中有对象奖励。当物件英雄接触到物件加成时，物件加成必须被销毁，从屏幕上消失，不占用内存。怎么做？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:19:13.187

只需将它们从可用奖励对象的集合中删除。

java VM 稍后将检测到没有更多对奖励对象的引用，并将释放内存。

如果您有数十万个这样的对象，将它们显式设置为 将有助于`null`更快地释放内存。

# node.js - 如何将 .NET 运行时加载为 node.js 模块？

> ID：14819193
> 
> 赞同：1
> 
> 时间：2013-02-11T19:14:09.360
> 
> 标签：node.js, .net

我正在使用最新`node.js`的 Windows x86。我尝试使用来自 github的[node-sharp包。](https://github.com/anodejs/node-sharp)它确实可以编译，但是当我将它加载到 node.js 进程中（通过`require('./Sharp')`）时，出现了相当奇怪的错误：`Error: no error`，无法加载模块`C:\path\to\module\Sharp.node`。有没有人也尝试过使用这个库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T06:10:39.907

实际上，一个更好的选择是[Edge.js](https://github.com/tjanczuk/edge)，它更稳定并且现在可以在 Linux 和 Windows 上运行

# android - 右侧而不是顶部的RelativeLayout

> ID：14819194
> 
> 赞同：0
> 
> 时间：2013-02-11T19:14:10.250
> 
> 标签：android, android-relativelayout

我怎样才能让 imageViews 彼此并排而不是在彼此之上？

```
 public void deckButtonOnClick(View v) {
    ImageView imageView = new ImageView(getApplicationContext());
    imageView.setImageResource(DECK.takeCard());
    imageView.setAdjustViewBounds(true);
    imageView.setLayoutParams(PARAMS);
    imageView.setTag("0");
    imageView.setOnClickListener(new MyOnClickListener());

    ((RelativeLayout) findViewById(R.id.innerRelativeLayout)).addView(imageView);

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:27:45.283

在 xml 中，使用 android:layout_toRightOf=id。

在代码中，将 imageView.setLayoutParams() 与 RelativeLayout.LayoutParams 一起使用并使用 params.addRule(RelativeLayout.RIGHT_OF, id);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:28:59.600

**选项 1：**使用orientation="horizo​​ntal"，将卡片的容器重新设计为LinearLayout 而不是RelativeLayout。

**选项2：**使用RelativeLayout，您需要为您创建的每个imageView 提供一个ID（可能在每次创建一个计数器时增加一个计数器并将其附加到ID）。然后，当您创建 PARAMS 变量时，您可以[添加一条规则](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#addRule%28int,%20int%29)以与前一个 ImageView 的右侧对齐。

```
PARAMS = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
PARAMS.addRule(RelativeLayout.RIGHT_OF, R.id.imageView1);
imageView.setLayoutParams(PARAMS); 
```

# javascript - 两个选择框的值

> ID：14819195
> 
> 赞同：1
> 
> 时间：2013-02-11T19:14:10.550
> 
> 标签：javascript, jquery

简要解释我的程序：

我有 3 个选择框

如果用户在第一个框中选择的值是 2 并且用户在第二个框中选择的值是 3（选项值），那么第三个选择框应该显示一个数组。

此代码不起作用，但显示了一个想法：

```
if ($('#firstbox').click(function() { ($(this).val() == '2'); } &&    
    $('#secondbox').click(function() { ($(this).val() == '3'); }) {
    // Array Display here (not included the coding here, because there is no issue with this coding.. seems working fine)
} 
```

我需要有关 if 语句和 && 操作中包含的代码的帮助，以检查表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:19:35.377

```
var select1 = $('#firstbox');
var select2 = $('#secondbox');

$([select1, select2]).change(function () {
    if ( select1.val() == 2 && select2.val() == 3 ) {
        // run your code here...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:19:37.367

您需要将点击事件绑定到第三个选择框或绑定到前两个框的更改事件并回调一个更新第三个框的通用函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:25:25.717

```
$("#firstbox, #secondbox").change(UpdateThird);

function UpdateThird() {
    var a = $("#firstbox").val();
    var b = $("#secondbox").val();
    if (a == 2 && b == 3) {
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T19:29:10.553

假设

```
<select id="firstbox">
  <option value="1">1</option>  
  <option value="2">2</option>
  <option value="3">3</option>
</select>
<select id="secondbox">
  <option value="1">1</option>  
  <option value="2">2</option>
  <option value="3">3</option>
</select> 
```

脚本：

```
$('#secondbox, #firstbox').on('change',function(){
  if($('#firstbox').val() == 2 && $('#secondbox').val() == 3)
    alert('array display code here...');
}) 
```

# coded-ui-tests - 如何使用 codeduitests 跟踪内存泄漏？

> ID：14819201
> 
> 赞同：0
> 
> 时间：2013-02-11T19:14:31.897
> 
> 标签：coded-ui-tests

我已经为独立应用程序编写了 ui 测试。我认为我们有内存泄漏。

有没有人知道如何使用编码的ui来捕捉这个？我知道我们没有任何内置功能可以做到这一点，但也许之前有人遇到过同样的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:33:20.973

编码的 ui 测试不是查找内存泄漏的正确工具。
您需要运行分析工具来识别内存泄漏。您可以使用 Visual Studio 分析器或其他工具，如 ANTs 或 .Net 内存分析器 ( [http://memprofiler.com/](http://memprofiler.com/) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:51:31.890

令人怀疑的是，您无需手动编码即可有效地找到所有内容。非常简化的场景 - 打开和关闭一个表单一千次（假设我们谈论 winforms）并希望得到`outofmemory`，已经需要循环调用一些自动化脚本一千次。更不用说更复杂的场景 - 每次关闭后强制进行垃圾收集。

# php - 如何使用对服务器的 php 调用填充内联编辑的 JQgrid

> ID：14819203
> 
> 赞同：0
> 
> 时间：2013-02-11T19:14:39.870
> 
> 标签：php, jqgrid

我能够通过对服务器的 php 调用来填充网格以及执行更新。我似乎无法构建一个兼具两者的网格。在下面的代码中，我有 url 和 editurl。两者都指向同一个php页面，但我认为这是必要的。在 php 页面上，我通过 POST 收集单元格的内容并将它们打印到文件中。我知道这段代码是准确的，因为当我将它与只保存数据并且不尝试使用 php 服务器调用填充的网格一起使用时它可以工作。作为 JQGrid 的新手，我不确定如何保存和发送数据。另请注意，我必须使用 datatype: 'local' 来保存数据，但我必须使用 datatype: 'xml' 来填充网格。也许这就是问题所在？

```
$("#list").jqGrid({
url:'functions.php',
datatype:'xml',
mtype:'POST',
colNames:['Label','Account_Num','Amount', 'Type Code', 'Record Code', 'Sequence','Actions'],
colModel :[
{name:'label', index:'label', width:150, align:'center', sortable:false, editable:true},
{name:'cntrct_id', index:'cntrct_id', width:150, align:'center', sortable:true},
{name:'amount', index:'amount', width:150, align:'center', sortable:false, editable:true},
{name:'type_cd', index:'type_cd', width:150, align:'center', sortable:false, editable:true},
{name:'rec_cd', index:'rec_cd', width:150, align:'center', sortable:false},
{name:'db_seq', index:'db_seq', width:150, align:'center', sortable:false},
{   name:'actions',
classes:'jg_actions',
formatter:"actions",
editable:false,
sortable:false,
resizable:false,
fixed:true,
width:120,
formatoptions:{
    keys:true,
    delbutton:true,
    onSuccess: function(response){

    },
},
},
],
editurl: 'functions.php',
postData: { 
action:'popGrid', 
sqlCount:sqlCount, 
sqlSelect:sqlSelect, 
sqlSelect2:sqlSelect2, 
label1:label1, 
label2:label2,},
onSelectRow: function(id){
    if(id && id!==lastSel){
        jQuery('#list').restoreRow(lastSel);
    jQuery('#list').editRow(id,true);
    lastSel=id;
    }
},

pager: '#pager',
rowNum:100,
rowList:[100,200,300,400,500,600,700,800,900,1000],
sortname: 'cntrct_id',
sortorder: 'desc',
viewrecords: true,
caption: 'Adjustments'
}); 

<?php

$label = $_POST['label'];
$cntrct_id = $_POST['cntrct_id'];
$amount = $_POST['amount'];
$type_cd = $_POST['type_cd'];
$rec_cd = $_POST['rec_cd'];
$db_seq = $_POST['db_seq'];
$myfile = "text.txt";
$fh = fopen($myfile,'a');
fwrite($fh,$label.' '.$cntrct_id.' '.$amount.' '.$type_cd.' '.$rec_cd.' '.$db_seq);
fclose($fh);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:19:09.033

我认为您对 XML 与本地数据类型感到困惑。数据类型指定的内容是提供给网格的数据的来源。本地意味着您正在提供一个变量，其中包含来自客户端其他部分的数据，其中 XML 意味着您将从 URL 提供 XML 格式的数据。（服务器端进程）

您应该能够使用 Firebug/Chrome 来查看更新后网格发送的数据、格式以及去向。编辑后，您`functions.php`的网格中的帖子应重新加载，该重新加载反映了您的编辑对数据集的更改。

# php - PHP 游戏公式

> ID：14819204
> 
> 赞同：-4
> 
> 时间：2013-02-11T19:15:06.277
> 
> 标签：php, math, formula

基本上我正在尝试用 PHP 编写一个简单的足球游戏。我正在努力思考一个公式如何让球队赢得比赛。

让我们举个例子，一支球队在球场上有 11 名球员，每个球员的最高排名为 100，因此一支球队最多有 1100xp 才能拥有一支满员的足球队。

我怎么能做一个 PHP 公式来确定哪支球队会赢或平局？我正在考虑为一支球队赢取百分比，但我不确定如何将平局添加到公式中。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:22:38.503

您的问题没有意义，因为您将其开发为应用程序**“基本上我正在尝试用 PHP 编写一个简单的足球游戏”**。如果您尝试使用 php 进行数学运算，例如拥有最多 exp 的团队将获胜，那么没问题。如果您了解 PHP 的基础知识：

```
$winner = ($team_1_exp > $team_2_exp ? team1:team2);
return $winner; 
```

如果需要概率：

```
$t1 = "team 1 exp points";
$t2 = "team 2 exp points";

$total = $t1 + t2;

$t1 = $t1 / $total * 100; // % amount of chances of winning of team1.
$t2 = $t2 / $total * 100; // % amount of chances of winning of team2.

$winner = ($t1 > $t2 ? team1 : team2);
echo $winner."has more chances of winning this game"; // The probability which team can win! 
```

# powershell - 使用 Powershell 我想强制复制文件夹/文件而不删除现有目标文件夹中的额外文件：

> ID：14819205
> 
> 赞同：7
> 
> 时间：2013-02-11T19:15:14.433
> 
> 标签：powershell

我正在使用 Powershell 并试图强制复制文件夹/文件而不删除现有目标文件夹中的任何额外文件。我被困在试图获得一个有效的命令。

下面是我的代码，关于如何解决这个问题的任何建议？

```
Copy-Item -Force -Recurse  –Verbose $releaseDirectory -Destination $sitePath 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T19:29:11.287

你需要确保

```
$realeseDirectory 
```

是这样的

```
c:\releasedirectory\* 
```

`Copy-item`永远不要删除目标中的额外文件或文件夹，但`-force`如果文件已经存在，它将覆盖

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:47:49.317

你的问题不是很清楚。因此，您可能需要稍微调整一下下面的功能。顺便说一句，如果您尝试部署网站，复制目录并不是最好的方法。

```
function Copy-Directory
{
    param (
        [parameter(Mandatory = $true)] [string] $source,
        [parameter(Mandatory = $true)] [string] $destination        
    )

    try
    {
        Get-ChildItem -Path $source -Recurse -Force |
            Where-Object { $_.psIsContainer } |
            ForEach-Object { $_.FullName -replace [regex]::Escape($source), $destination } |
            ForEach-Object { $null = New-Item -ItemType Container -Path $_ }

        Get-ChildItem -Path $source -Recurse -Force |
            Where-Object { -not $_.psIsContainer } |
            Copy-Item -Force -Destination { $_.FullName -replace [regex]::Escape($source), $destination }
    }

    catch
    {
        Write-Error "$($MyInvocation.InvocationName): $_"
    }
}

$releaseDirectory = $BuildFilePath + $ProjectName + "\" + $ProjectName + "\bin\" + $compileMode + "_PublishedWebsites\" + $ProjectName
$sitePath = "\\$strSvr\c$\Shared\WebSites" 

Copy-Directory $releaseDirectory $sitePath 
```

# asp.net-mvc - 在 Views 实体中使用外键关系

> ID：14819208
> 
> 赞同：0
> 
> 时间：2013-02-11T19:15:19.800
> 
> 标签：asp.net-mvc, entity-framework

是否可以通过模型的外键单步访问视图中的另一个模型？我想将一种模型返回到我的视图中，但从另一个模型中获取数据。例如，在我看来：

```
@[ModelObject].[Field (ForeignKey)].[ForeignKey Field] 
```

**编辑：**

到目前为止，您的反馈很有帮助，听起来视图模型可能是要走的路，但请允许我提供更多信息，以便您更好地提出建议。

我有一个`x.Id`，并且我想找到`Y`与之关联的所有对象`x.Id`——这个映射保存在一个表`XYMap`中，其中几个`Y.Id`s 映射到一个`X.Id`。这两个模型都在同一个实体中：

```
public class X
{
    [Key]
    public int xId {get; set;}
}

public class XYMap
{
    [Key, ForeignKey("Y")]
    public int yId { get; set; }

    [ForeignKey("X")]
    public int xId { get; set; }
}

public class Y
{
    [Key]
    public int yId { get; set; }
} 
```

我试图做的是，给定一个`x.Id`被调用的`someXid`：

```
var yIdList = db.XYMap.Where(item => item.xId == someXid).ToList() 
```

我想获取所有 Y 对象，以便可以在视图中显示它们的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:21:03.623

这是可能的，但不推荐。也许导航属性是通过延迟加载设置的，并且从视图调用 @Model.NavigationalField 会导致调用数据库。视图不应对此类调用负责。

我建议创建一个 ViewModel，它结合了两个实体所需的属性。

# ruby-on-rails - before_filter 似乎没有“开始”

> ID：14819212
> 
> 赞同：1
> 
> 时间：2013-02-11T19:15:31.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, confirm, before-filter

我试图让 before_filter 处理需要用户登录的操作，但是一定有问题，因为它不是。

我使用一个名为“session_helper.rb”的帮助文件进行登录/注销以及检查用户是否已登录（已签名？）。如果在动作或视图中使用它可以正常工作，但是在将它与 before_filer 一起使用时它不起作用。如果我注销用户并尝试访问“/projects/new”，则可以这样做，但不应该这样做。

我究竟做错了什么？

**项目负责人：**

```
class ProjectsController < ApplicationController
  before_filter :signed_in?, :except => [:index]  // <-- doesn't prevent e.g. the action "new" to be executed

  def new
    @project = Project.new
    @users = (current_user.blank? ? User.all : User.find(:all, :conditions => ["id != ?", current_user.id]))
  end

  def index
    @projects = Project.all

    if signed_in?  // <-- works as it should
      @users_projects = Project.where(:user_id => current_user.id)
    end
  end

  ... other actions ...

end 
```

**session_helper.rb**

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T19:33:36.820

所以， before_filter 是一个有点误导的名字。它不是真正的过滤器。并不是说它会过滤掉其他动作并在您返回虚假值时阻止它们发生，并在您返回真实值时允许它们发生。这实际上是一种先调用方法的方法。可以将其视为“在调用路由触发的操作之前，调用以下方法”。

事实上，在 Rails 4 中，他们将 before_filter 重命名为 before_action，这应该会减轻前进的困惑。

你只是从 signed_in 中返回 T/F？所以它正在检查并继续前进，因为你没有告诉它根据检查的结果做任何特别的事情。

所以与其调用signed_in？像这样的东西会起作用：

```
before_filter :authorize, :except => [:index]

def authorize
  redirect_to login_url, alert: "Not authorized" if !signed_in?
end 
```

跳，有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:21:51.617

当没有当前登录时，我总是看到 before_filter 引发异常或重定向到另一个页面。我不确定返回 false 会阻止页面呈现。

# deployment - 自定义语言资源文件未部署到服务器

> ID：14819219
> 
> 赞同：2
> 
> 时间：2013-02-11T19:15:54.557
> 
> 标签：deployment, asp.net-mvc-4, embedded-resource, resx

我们有一个包含 4 个资源文件的 MVC 4 应用程序。默认一种 (Resource.resx)，一种用于中文和德语 (Resource.zn-CH.resx 和 Resource.de-DE.resx)，然后一种用于自定义语言 (Resource.en-PI.resx (English-Pirate) )) 用于测试目的。

所有资源文件的每个设置都完全相同：

*   构建操作：嵌入式资源
*   复制到输出目录：始终复制
*   自定义工具：PublicResXFileCodeGenerator
*   自定义工具命名空间：资源

每当应用程序在本地构建时，在 bin 文件夹中，我们会得到文件夹 de-DE、en-PI 和 zh-CN，它们都包含一个名为 (ProjectName).resources.dll 的 dll。

问题是，每当将此应用程序部署到我们的 DEV 服务器时，en-PI 的文件夹都会被忽略且不会被复制，我们必须手动复制该文件夹才能使 en-PI 语言正常工作。

我们有一个构建定义，它将构建必要的项目到某个文件夹并做其他事情，然后将它们复制到我们的 DEV 服务器。对于其他 2 种语言（de-DE 和 zh-CN），一切正常，但 en-PI 文件夹未显示在 bin 文件夹中。是否有某些设置导致该资源文件因为它是一种自定义语言而无法部署？

添加所有这些资源文件的方式遵循此示例[http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:24:28.890

弄清楚了。[Microsoft在](http://msdn.microsoft.com/en-us/library/sb6a8618.aspx)Resource Naming Conventions 部分对此进行了解释。因为该语言是一种自定义语言并且具有自定义代码，所以它没有公共语言运行时期望的名称，这就是它没有正确部署的原因。

# php - 搭建PHP开发和生产环境需要什么？

> ID：14819222
> 
> 赞同：-1
> 
> 时间：2013-02-11T19:15:59.710
> 
> 标签：php, html, web-applications, development-environment, php-5.2

我继承了一个小型数据库驱动的 PHP 站点。

我是一名 C# 程序员，对 PHP 的经验几乎为零，尽管我在数据库和一些 html / web 设计方面有丰富的经验。

我的老板让我为这个 php 站点创建一个登台和生产环境。

**环境：** Win 7、64位。Sql Server 2012。PHP 5.2。有几百个用户。我们只需要网站与资源管理器一起工作。Dreamweaver 最新版本。一次不会有超过 1 个用户参与该项目。

1.  我们应该使用哪个代码存储库？
2.  现在我们还没有使用代码存储库。除了为暂存和生产提供单独的文件夹外，我们还需要任何其他文件夹结构吗？
3.  我也非常感谢您帮助我提出正确的问题，以确保我拥有“专业”开发人员进行设置所需的一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:15:03.987

也许.. 您正在寻找[http://www.xampp.org](http://www.xampp.org)，它是一个多合一的解决方案 :) 但是您可以在安装后自定义环境。

甚至 PRO 也使用它 :) 因为它使一切变得非常简单和快速 :)

# facebook - Facebook 提要页面帖子 ID 已加密。如何解密？

> ID：14819223
> 
> 赞同：0
> 
> 时间：2013-02-11T19:16:10.047
> 
> 标签：facebook, facebook-graph-api, feed

我正在调用 feeds.php 来获取页面提要。

[https://www.facebook.com/feeds/page.php?format=json&id=102555409843504](https://www.facebook.com/feeds/page.php?format=json&id=102555409843504)

但是，将“id”字段加密-

```
 "title": "This is a test feed.",
 "id": "47cbba059e97f5c688870473dc30ec5a",
 "alternate": "http:\/\/www.facebook.com\/permalink.php?story_fbid=373792589386450&id=102555409843504", 
```

虽然，“备用”键的后 ID 以干净的方式编写。那为什么id要加密呢？想用每个 post-Id 调用 Graph API。有没有简单的解密方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:29:44.880

为什么您没有使用 Graph API 获取提要？

```
https://graph.facebook.com/102555409843504/feed 
```

# java - 确保在 Java zip 文件系统中提交更改？

> ID：14819228
> 
> 赞同：2
> 
> 时间：2013-02-11T19:16:40.710
> 
> 标签：java, multithreading, file, filesystems

简介：我正在开发一个系统，该系统必须授予对项目所有文件的访问权限，它必须是打开、上传和修改这些文件的接口，我决定将所有这些文件（文件）存储在档案中（ zip），为了提高响应时间，我决定不解压缩然后重新压缩其所有内容，此外我决定使用java的[Zip FileSystem Provider](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)按原样修改 zip，但由于缺乏信息；当用户需要特定文件时，我只解压缩该文件以便用户可以处理它，我监视文件中的更改，然后如果我检测到任何更改，我将文件（替换）上传到 zip 中。

**问题是：**

由于我在将文件保存到存档时使用线程（以防止 GUI 冻结），因此即使保存另一个文件，用户也可以打开其他文件并修改它们，我希望尽可能将更改更新到存档以防止在停电的情况下丢失信息，但没有像 FileSystem.commit() 或 FileSystem.flush() 这样的方法，所以当我关闭文件系统但打开另一个文件时，更改就会发生在存档中系统花费的时间太长，在另一个文件系统初始化期间增加了我的系统丢失信息的漏洞......关于如何提交更改或始终能够保存的任何想法？

打开两个文件系统（一次作为备份以在另一个正在实例化时执行操作）也不起作用，因为它们会在短时间内更改文件的名称，但在此期间可能会尝试创建另一个实例并失败因为它找不到文件的名称...

问候...

# android - FeatureDetector.detect() 函数错误

> ID：14819230
> 
> 赞同：0
> 
> 时间：2013-02-11T19:16:45.010
> 
> 标签：android, opencv

我正在尝试使用 FAST FeatureDetector 来检测我的手机摄像头拍摄的视频的关键点。当我尝试运行 matcher.match(descriptor1,descriptor2,matches) 时，出现错误。

这是我的代码：

```
private Mat bgMat; //contains the first frame taken by the camera
private Mat fgMat; //contains the second frame
private MatOfKeyPoint keypoints1;
private MatOfKeyPoint keypoints2;
private Mat descriptor1;
private Mat descriptor2;

FeatureDetector FAST = FeatureDetector.create(FeatureDetector.FAST);

keypoints1 = new MatOfKeyPoint();
keypoints2 = new MatOfKeyPoint();
descriptor1 =new Mat();
descriptor2 =new Mat();
matches= new MatOfDMatch();

FAST.detect(bgMat, keypoints1);
FAST.detect(fgMat, keypoints2);
DescriptorExtractor Extractor = DescriptorExtractor.create(DescriptorExtractor.ORB);
Extractor.compute(bgMat, keypoints1, descriptor1);
Extractor.compute(fgMat, keypoints2,descriptor2);

DescriptorMatcher matcher =DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE);             
matcher.match(descriptor1,descriptor2, matches);
Features2d.drawMatches(bgMat, keypoints1, fgMat, keypoints2, matches, inputFrame); 
```

这是我的 logcat 输出：

```
02-11 13:00:25.926: E/cv::error()(16153): OpenCV Error: Assertion failed (type == src2.type() && src1.cols == src2.cols && (type == CV_32F || type == CV_8U)) in void cv::batchDistance(cv::InputArray, cv::InputArray, cv::OutputArray, int, cv::OutputArray, int, int, cv::InputArray, int, bool), file /home/oleg/sources/opencv/modules/core/src/stat.cpp, line 1803
02-11 13:00:25.926: W/dalvikvm(16153): threadid=11: thread exiting with uncaught exception (group=0x415eb2a0)
02-11 13:00:25.926: E/AndroidRuntime(16153): FATAL EXCEPTION: Thread-3281
02-11 13:00:25.926: E/AndroidRuntime(16153): CvException [org.opencv.core.CvException: /home/oleg/sources/opencv/modules/core/src/stat.cpp:1803: error: (-215) type == src2.type() && src1.cols == src2.cols && (type == CV_32F || type == CV_8U) in function void cv::batchDistance(cv::InputArray, cv::InputArray, cv::OutputArray, int, cv::OutputArray, int, int, cv::InputArray, int, bool)
02-11 13:00:25.926: E/AndroidRuntime(16153): ]
02-11 13:00:25.926: E/AndroidRuntime(16153):    at org.opencv.features2d.DescriptorMatcher.match_1(Native Method)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at org.opencv.features2d.DescriptorMatcher.match(DescriptorMatcher.java:437)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at com.example.cvcamt.MainActivity.onCameraFrame(MainActivity.java:152)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at org.opencv.android.CameraBridgeViewBase.deliverAndDrawFrame(CameraBridgeViewBase.java:283)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at org.opencv.android.NativeCameraView$CameraWorker.run(NativeCameraView.java:144)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at java.lang.Thread.run(Thread.java:856) 
```

我试过改变 Mat 类型（目前是 CV_8UC4）。我只是不明白为什么当我尝试进行比赛时会发生这种情况。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:43:07.017

您需要创建您的 keypoints1 和 keypoints2 对象。喜欢

```
keypoints1 = new MatOfKeyPoint(); 
```

因为现在它们是空的；

# javascript - 表单验证 javascript 隐藏元素

> ID：14819232
> 
> 赞同：0
> 
> 时间：2013-02-11T19:16:54.620
> 
> 标签：javascript, forms, validation, hide

我正在构建一个表单并提醒用户在输入成功之前他们无法进入下一步

```
var location=document.getElementById("zip").value;
if(location==null || location==""){
    alert("Please insert a valid location!");
    return false;

} 
```

如果用户继续下一步，则激活提交按钮。如果用户返回到这一步，如果相同的输入为空，我只想在这一步隐藏提交按钮。我怎样才能只使用javascript来做到这一点？提交按钮的类是“btFinish”。

谢谢！

编辑

我正在使用 jQuery。我试过了

```
 $(btPrevious).click(function(e) {
                      $(btFinish).hide();
                    });

                  $(btNext).click(function(e) {
                      $(btFinish).show();
                    }); 
```

这会在进度中隐藏完成按钮，但如果输入框中有错误，并且用户单击“btNext”，即使用户必须在第一步修复输入，也会显示“btFinish”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:20:42.940

好的，根据我的理解，您有两个步骤：

1) 邮编必须填写，然后用户点击进入下一步。2) 用户可以提交完成或返回邮政编码步骤。

我会做这样的事情：

```
 $(btPrevious).click(function(e) {
      $(btFinish).hide();
  });

  $(btNext).click(function(e) {
      $(btFinish).show();
  });

  $('#zip').keyup(function(){
       if ($(this).val() === null || $(this).val() === ""){
            $(btFinish).hide();
       }
       else{
            $(btFinish).show();
       }
  }); 
```

这将阻止他们点击 btFinish，除非他们在 zip 中写了一些东西。我在想，既然他们必须按下删除按钮，它应该触发事件处理程序。如果他们可以以其他方式清除邮政编码，您还可以检查模糊或他们可以清除盒子的任何其他事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:43:48.227

我建议你尝试这样的事情：

```
var location = document.formname.inputname.value;

if(location == ""){

    alert("No Valid Location")
} 
```

# c# - 等效的 WebBrowser.Document.GetElementById("next").GetAttribute("value")); c# in METRO APP

> ID：14819235
> 
> 赞同：0
> 
> 时间：2013-02-11T19:17:07.947
> 
> 标签：c#, .net, webview, microsoft-metro

我需要制作一个程序，从 webview 中加载的页面获取 div 的集合，我有代码做什么，但在 C# .net 中，我需要在 Metro 应用程序中使用 c# 执行此操作。

可以帮助我吗？

那是我在 c# .net 中的代码：

加载完成时

```
private void explorador_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        if (this.vbuscar & (this.explorador.ReadyState == WebBrowserReadyState.Complete))
        {
            try
            {
                int num = Convert.ToInt32(this.explorador.Document.GetElementById("next").GetAttribute("value"));
                int num2 = Convert.ToInt32(this.explorador.Document.GetElementById("show").GetAttribute("value"));
                while ((num - num2) >= 0)
                {
                    num = Convert.ToInt32(this.explorador.Document.GetElementById("next").GetAttribute("value"));
                    num2 = Convert.ToInt32(this.explorador.Document.GetElementById("show").GetAttribute("value"));
                    this.explorador.Document.InvokeScript("toggle");
                }
                this.hilo_mp3s = new Thread(new ThreadStart(this.iMostrar_Mp3));
                this.hilo_mp3s.IsBackground = true;
                this.hilo_mp3s.Start();
            }
            catch (Exception)
            {
                MessageBox.Show("A ocurrido un error al intentar navegar en internet...\nLa interaccion de la aplicacion con internet no se ha terminado por compleo", "Error al buscar en internet", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
                this.vbuscar = false;
                this.cargando.Detener(100);
            }
        }
    } 
```

La Funcion 莫斯特拉 MP3

```
 private void iMostrar_Mp3()
    {
        this.linternet.Invoke(new MethodInvoker (delegate {
            HtmlElementCollection elementsByTagName = this.explorador.Document.GetElementsByTagName("div");
            this.linternet.EliminarTodos();
            foreach (HtmlElement element in elementsByTagName)
            {
                if (element.Id == "song_html")
                {
                    HtmlElementCollection elements2 = element.GetElementsByTagName("div");
                    string innerText = "";
                    foreach (HtmlElement element2 in elements2)
                    {
                        if (element2.GetAttribute("className") == "left")
                        {
                            innerText = element2.InnerText;
                        }
                        if (element2.Id == "right_song")
                        {
                            HtmlElement element3 = element2.GetElementsByTagName("div")[0];
                            string nombre = element3.InnerText;
                            try
                            {
                                HtmlElement element4 = element2.GetElementsByTagName("div")[2].GetElementsByTagName("div")[1].GetElementsByTagName("a")[0];
                                string album = innerText.Replace('\r', ' ').Replace('\n', '-');
                                Uri uri = new Uri(element4.GetAttribute("href"));
                                FileInfo info = new FileInfo(uri.LocalPath);
                                this.linternet.AgregarItem(-777.0, nombre, element4.GetAttribute("href"), info.Directory.Name, album, "--++", 1, "", Resources.iinternetItem, 300);
                                itemlista itemlista = (itemlista) this.lista.Elementos[this.lista.Elementos.Count];
                                itemlista.Imagen = Resources.iinternetItem;
                                itemlista.Imagenplay = Resources.ilista1;
                            }
                            catch
                            {
                            }
                        }
                    }
                }
            }
            this.vbuscar = false;
            this.cargando.Detener(100);
        }));
    } 
```

**我只想知道我是如何在 C# Metro 应用程序中做到这一点的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T16:29:34.387

```
string[] args = { "document.GetElementsByTagName('div')" }

MywebView.InvokeScript("myinvoke", args); 
```

检查这个....

# java - 扫描仪问题：NoSuchElementException

> ID：14819253
> 
> 赞同：2
> 
> 时间：2013-02-11T19:18:04.060
> 
> 标签：java

我正在创建一个类来从文件中读取对象，该对象之前已保存到文件（.txt 格式），但在尝试加载文件时收到以下错误：

> java.util.NoSuchElementException

该方法是以这种方式制作的，因此用户应该能够输入文件的名称。即使它已尝试调试 abit 并且也只是使用已经给出的名称引用文件本身（不接受输入）。这是该方法的外观：

```
public void load( String filename ) throws FileNotFoundException 
{
    final String FIELD_STOP = ":";
    String loadFile;
    loadFile = filename +".txt";

    FileReader ansfil = new FileReader( loadFile );
    Scanner fileIn = new Scanner( ansfil );
    fileIn.useLocale( new Locale( "en" ) );

    System.out.println(loadFile);
    fileIn.useDelimiter( FIELD_STOP );
    int size;

    try
    {
        while( fileIn.hasNext() )
        {
            size = fileIn.nextInt();
            archive = new CDarkivImplemented( size );
            CD readIn = new CDImplemented();

            for( int i = 0; i <  size ; i++ )
            {
                readIn = new CDImplemented();
                readIn.title = fileIn.next();
                readIn.artist = fileIn.next();
                readIn.genre = CD.interpretGenre( fileIn.next() );
                readIn.publisher = fileIn.next();
                readIn.year = fileIn.nextInt();
                readIn.ID = fileIn.nextInt();
                archive.addCD(readIn);
            }

        }

    }

    catch(Exception e)
    {
        System.out.println( "Wrong! : " + e );
        System.exit(1);
    }
    fileIn.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:21:02.220

我*怀疑*这是问题所在：

```
for( int i = 0; i <=  size ; i++ ) 
```

该循环将执行`size + 1`时间，这可能不是您的意思。尝试：

```
for (int i = 0; i < size; i++) 
```

看看是否有帮助...

*（顺便说一句，我会在循环内*声明`readIn`变量- 不需要将它放在外面。我还会使用块来关闭文件。）*`finally`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:34:49.447

```
public void load( String filename ) throws FileNotFoundException {
   final String FIELD_STOP = ":";
   final String loadFile = filename +".txt";
   try( FileReader ansfil = new FileReader( loadFile )) {
      Scanner fileIn = new Scanner( ansfil );
      fileIn.useLocale( new Locale( "en" ) );
      System.out.println(loadFile);
      fileIn.useDelimiter( FIELD_STOP );
      int size;
      while( fileIn.hasNext()) {
         size = fileIn.nextInt();
         archive = new CDarkivImplemented( size );
         for( int i = 0; fileIn.hasNext() && i < size; i++ ) {
            String title = fileIn.next();
            if( ! fileIn.hasNext()) break;
            String artist = fileIn.next();
            if( ! fileIn.hasNext()) break;
            String genre = fileIn.next();
            if( ! fileIn.hasNext()) break;
            String publisher = fileIn.next();
            if( ! fileIn.hasNext()) break;
            int year = fileIn.nextInt();
            if( ! fileIn.hasNext()) break;
            int ID = fileIn.nextInt();
            archive.addCD(
               new CDImplemented(
                  title, artist, genre, publisher, year, ID ));
         }
      }
   }
   catch(Exception e)
   {
       System.out.println( "Wrong! : " + e );
       System.exit(1);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:06:49.813

那个while循环是干什么用的？正如我从您对文件格式的评论中推断的那样，您可能不需要这个，并且它可能会导致错误，因为它在读取最后一个元素后再次循环一次。*

# java - 如何在使用休眠多对多注释时防止在数据库中插入重复记录

> ID：14819255
> 
> 赞同：0
> 
> 时间：2013-02-11T19:18:06.307
> 
> 标签：java, hibernate

添加用户工作正常。面临的问题是正在添加任务 n 相应的用户也正在添加，但“每次添加新用户”，即使他存在于用户表中。这导致 Bridge 表中的 taskid n 用户 ID 不匹配..任何人都可以帮助我解决这个问题...它真的很重要....在我的 POJOS 用户 n 任务之下。调用由 JSP 文件完成...等待任何帮助！！！！

```
@Entity
@Table(name ="Tasks")
public class Tasks implements Serializable
{
@Id @GeneratedValue(strategy = GenerationType.IDENTITY)
@Column (name = "t_Id")
private int Id;
@Column (name = "t_Name")
private String TaskName;
@Column (name = "t_Details")
private String TaskDetails;
@Column (name = "t_Status")
private int TaskStatus;
@ManyToMany(targetEntity = org.Users.class, fetch = FetchType.LAZY, cascade =       {CascadeType.ALL, CascadeType.PERSIST})
//@Cascade({ CascadeType.ALL})
@JoinTable(name = "user_Tasks", joinColumns = {@JoinColumn(name = "t_Id")},  inverseJoinColumns = {@JoinColumn(name = "u_Id")})
private Set <Users> users = new HashSet<Users>(0);

public Tasks(){}
public Tasks(String TaskName) {
    this.TaskName = TaskName;
}

public Tasks( String TaskName, String TaskDetails, int TaskStatus) {
    this.TaskName = TaskName;
    this.TaskDetails = TaskDetails;
    this.TaskStatus = TaskStatus;
}

public Tasks(String TaskName, String TaskDetails, int TaskStatus, Set<Users> users)
{
    this.TaskName = TaskName;
    this.TaskDetails = TaskDetails;
    this.TaskStatus = TaskStatus;
    this.users = users;
}
public int getId() {
    return Id;
}
 public void setId(int Id) {
    this.Id = Id;
}
public String getTaskName() {
    return TaskName;
}
 public void setTaskName(String TaskName) {
    this.TaskName = TaskName;
}
public String getTaskDetails() {
    return TaskDetails;
}
public void setTaskDetails(String TaskDetails) {
    this.TaskDetails = TaskDetails;
}
 public int getTaskStatus() {
    return TaskStatus;
}
public void setTaskStatus(int TaskStatus) {
    this.TaskStatus = TaskStatus;
}
public Set<Users> getUsers() {
    return users;
}
public void setUsers(Set<Users> users) {
    this.users = users;
}

}
@Entity
@Table(name = "USERS")
public class Users implements Serializable {
@Id 
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "u_Id")
private int Id;
@Column (name ="u_Name")        
private String Name;
@Column (name ="u_Username")
private String Username;
@Column (name="u_Password")
private String password;
@ManyToMany(targetEntity =org.Tasks.class, fetch = FetchType.LAZY, mappedBy="users", cascade ={CascadeType.ALL, CascadeType.PERSIST})
// @Cascade({CascadeType.ALL})
@JoinTable(name = "user_Tasks", joinColumns = {@JoinColumn(name = "u_Id")}, inverseJoinColumns = {@JoinColumn(name = "t_Id")})
private Set<Tasks> task = new HashSet<Tasks>();
public Users(){}
public Users(String Name) {
    this.Name = Name;
}

public int getId() {
    return Id;
}
public void setId(int Id) {
    this.Id = Id;
}
public String getName() {
    return Name;
}
 public void setName(String Name) {
    this.Name = Name;
}
public String getUsername() {
    return Username;
}
public void setUsername(String Username) {
    this.Username = Username;
}
public String getPassword() {
    return password;
}  
public void setPassword(String password) {
    this.password = password;
}

public Set<Tasks> getTask() {
    return task;
}

public void setTask(Set<Tasks> task) {
    this.task = task;
}
@Override
public int hashCode() {
    int hash = 7;
    hash = 19 * hash + (this.Name != null ? this.Name.hashCode() : 0);
    hash = 19 * hash + (this.Username != null ? this.Username.hashCode() : 0);
    hash = 19 * hash + (this.password != null ? this.password.hashCode() : 0);
    return hash;
 }
 @Override
 public boolean equals(Object obj) {
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    final Users other = (Users) obj;
    if ((this.Name == null) ? (other.Name != null) : !this.Name.equals(other.Name)) {
        return false;
    }
    if ((this.Username == null) ? (other.Username != null) : !this.Username.equals(other.Username)) {
        return false;
    }
    if ((this.password == null) ? (other.password != null) : !this.password.equals(other.password)) {
        return false;
    }
    return true;
 }

}

public class ManageTasks

  public static void main(String arg[])
  {
  try
  {
  SessionFactory factory = new AnnotationConfiguration().configure().addPackage("org").addAnnotatedClass(Tasks.class).addAnnotatedClass(Users.class).buildSessionFactory();        
  }catch(Exception e)
  {
  System.out.println(e);
  }

  }
  public Integer addTasks(String TaskName, String TaskDetails, int  TaskStatus, Set use)
   {
  SessionFactory factory = new AnnotationConfiguration().configure().addPackage("org").addAnnotatedClass(Tasks.class).addAnnotatedClass(Users.class).buildSessionFactory();
  Session session = factory.openSession();
  Transaction tx = null;
  Integer taskID = null;
  try
  {  
      tx = session.beginTransaction();  
      Tasks task = new Tasks(TaskName, TaskDetails, TaskStatus);
      task.setUsers(use);

      session.save(task);
      tx.commit();      
  }catch(HibernateException e)
  {
  if(tx!=null) tx.rollback();
  e.printStackTrace();
  }
  finally
          {
              session.close();
          }    
  return taskID;
  }      
  public void addUser(String name, String username, String password)
{
   SessionFactory factory = new AnnotationConfiguration().configure().addPackage("org").addAnnotatedClass(Users.class).
                   buildSessionFactory();
    Session session = null;
    session = factory.openSession();
    Transaction tx = null;
    Integer userID = null;  
  try
  {
     tx = session.beginTransaction();
     Users user = new Users();
     user.setName(name);
     user.setUsername(username);
     user.setPassword(password);
     userID = (Integer) session.save(user); 
     tx.commit();
  }catch (HibernateException e)
  {
     if (tx!=null) tx.rollback();
     e.printStackTrace(); 
  }
  finally
  {
     session.close(); 
  }

 } 
```

这是 AddTask 调用代码

```
String taskname = request.getParameter("taskname");
String taskdetails = request.getParameter("taskdetails");
tring user1 = request.getParameter("user1");
String user2 = request.getParameter("user2");
String user3 = request.getParameter("user3");
Set <Users> user = new HashSet <Users>();
user.add(new Users(user1));
user.add(new Users(user2));
user.add(new Users(user3));
nt TaskStatus;
if(taskname == null && taskdetails == null)
TaskStatus = 0;
else
TaskStatus = 1;

ManageTasks mt = new ManageTasks();
mt.addTasks(taskname, taskdetails, TaskStatus, user);
out.println("Sucessfully added!!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:19:23.623

当您创建任务时，您需要添加从数据库中检索到的已经有 id 的用户。这样 Hibernate 不会插入新用户，而只会在任务实体被持久化时插入连接表中的条目。

在创建新任务的代码中，您必须找到现有用户而不是创建新用户。因此，您应该编写一个方法`findUserByName(String name)`来从数据库中检索用户并将：替换
`user.add(new Users(user1));`
为：
`user.add(findUserByName(user1));`

# java - How to read a server file and output that as a downloadable file in users web browser in XPages

> ID：14819257
> 
> 赞同：2
> 
> 时间：2013-02-11T19:18:10.003
> 
> 标签：java, download, xpages, output

I need to read a file (that is not available on web) on the server and output it to the user as a downloadable file.

The scenario is

1.  The user click a link from an XPage
2.  The request is sent to the server which reads a predefined file in the server file system
3.  The file is brought back to the user as a downloadable file in the webbrowser.

The file on the server can be in any format, e.g .pdf, .exe, .doc etc

It does not matter if this is done on SSJS or in java.

I would really appreicate some code

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:39:33.427

Here is a similar question:

[How to stream file from xPages?](https://stackoverflow.com/questions/9468352/how-to-stream-file-from-xpages)

And here is part of the Java code taken from there and completed by me (+a fix from you!). I have now tested it also and it works:

```
FacesContext facesContext = FacesContext.getCurrentInstance();
XspHttpServletResponse  response = (XspHttpServletResponse) facesContext.getExternalContext().getResponse();

String strFileName = "myfile.txt";
String strFilePath= "c:" + File.separator + strFileName;
response.setContentType(URLConnection.guessContentTypeFromName(strFileName));
response.setHeader("Content-Disposition","attachment;filename=" + strFileName);

//File file = new File(strFilePath);
FileInputStream fileIn = new FileInputStream(strFilePath);
ServletOutputStream out = response.getOutputStream();

int iLen = 0;
byte[] btBuffer = new byte[10240];  // Not sure about optimal buffer size
while ((iLen = fileIn.read(btBuffer)) != -1) {
  out.write(btBuffer, 0, iLen);
}

facesContext.responseComplete();
out.close(); 
```

You could do all this in SSJS also.

If `guessContentTypeFromName` does not guess it then you need to modify the definition file on server. Or if you have a limited set of file types you can place the MIME-type table in your code/application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:23:04.450

Here is the code I came up with to do this, def not production code.

```
 public static byte[] grabFile(String readFile) throws IOException {

        File file = new File(readFile);
        ByteArrayOutputStream ous = new ByteArrayOutputStream();
        InputStream ios = new FileInputStream(file);

        try {
            byte []buffer = new byte[4096];

            int read = 0;
            while ( (read = ios.read(buffer)) != -1 ) {
                ous.write(buffer, 0, read);
            }
        } finally { 
            try {
                 if ( ous != null ) 
                     ous.close();
            } catch ( IOException e) {
            }

            try {
                 if ( ios != null ) 
                      ios.close();
            } catch ( IOException e) {
            }
        }
        return ous.toByteArray();
    }

 public static void download() throws IOException {
        byte[] data = grabFile("\\\\server\\path\\to\\file.pdf");
        HttpServletResponse response = (HttpServletResponse)FacesContext.getCurrentInstance().getExternalContext().getResponse();
        response.reset(); 
        response.setContentType("application/pdf"); 
        response.setHeader("Content-disposition", "attachment; filename=\"filename.pdf\"");
        OutputStream output = response.getOutputStream();
        output.write(data);
        output.close();
        FacesContext.getCurrentInstance().responseComplete(); 
    } 
```

Then just call the download method from the beforeRenderResponse of your Xpage

# iphone - RNBlurModalView 用于显示 UIView

> ID：14819258
> 
> 赞同：1
> 
> 时间：2013-02-11T19:18:12.793
> 
> 标签：iphone, ios, objective-c

我最近发现了这个很棒的模态视图弹出框（[来源](https://github.com/rnystrom/RNBlurModalView)）。

“使用”部分讲述了如何`RNBlurModalView`使用以下代码在其中显示 UIView：

```
 RNBlurModalView *modal = [[RNBlurModalView alloc] initWithViewController:self view:view];
    [modal show]; 
```

当我使用`RNBlurModalView`以下代码显示自定义 UIView 时，一切正常：

```
 UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 280, 200)];
    view.backgroundColor = [UIColor redColor];
    view.layer.cornerRadius = 5.f;
    view.layer.borderColor = [UIColor blackColor].CGColor;
    view.layer.borderWidth = 5.f;

    RNBlurModalView *modal = [[RNBlurModalView alloc] initWithViewController:self view:view];
    [modal show]; 
```

，但是当我尝试从中显示时遇到问题`UIView`，`UIViewController`它只`RNBlurModalView`显示空模式视图，这是我正在使用的代码：

```
 ExampleViewContoller *exampleVC = [[ExampleViewContoller alloc]init];
    RNBlurModalView *modal = [[RNBlurModalView alloc] initWithViewController:self view:exampleVC.view];
    [modal show]; 
```

如果需要，这里是来自故事板的 ExampleViewController 的图像 -![图片](../Images/dde4a6dd107f4a767dc820060ca909ec.png)

* * *

**问题**：任何想法我做错了什么，为什么模态视图是空的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:38:28.020

那么问题是你正在调用 viewcontrollers view 。试试这个

```
UIStoryboard *storyBoard=[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
ExampleViewContoller *exampleVC = [storyBoard instantiateViewControllerWithIdentifier:@"ExampleViewContoller"];;
RNBlurModalView *modal = [[RNBlurModalView alloc] initWithViewController:self view:exampleVC.view];
[modal show]; 
```

注意不要忘记在情节提要中将 ExampleViewContoller 的 storyboardId 设置为“ExampleViewContoller”。

# ruby-on-rails - Mongoid update_attributes 创建新的引用文档

> ID：14819259
> 
> 赞同：1
> 
> 时间：2013-02-11T19:18:15.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid, database-relations

我在使用`update_attributes`参考文档时遇到问题。我已将我的问题简化为 AFAICT 应该可以工作的简单示例，但不能：

```
class Account
  include Mongoid::Document
  has_many :submissions, :autosave => true
end

class Submission
  include Mongoid::Document
  belongs_to :account
end

a = Account.new
a.save!

s = Submission.new
s.update_attributes({"account" => {"id" => a.id}})
s.save!

a.id == s.account.id  # false 
```

调用`update_attributes`是创建一个新的空白`Account`对象，而不是引用我告诉它使用的现有对象。这是怎么回事？

**更新**

需要明确的是，我正在尝试在`update`将一个添加`Account`到`Submission`. 我知道还有其他方法可以通过编写特定代码来链接这些文档。但是正常的 rails 方式应该允许我使用 HTML 表单以这种方式更新文档，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:33:16.913

这不是添加`s`到`a`. 你想要做的是：

```
a = Account.new
a.submissions << Submission.new
a.save! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:40:19.490

更改您的 HTML 表单以使“account_id”而不是“account[id]”然后它开始工作：

```
s.update_attributes({"account_id" => a.id})
s.save!

a.id == s.account.id  # true
a == s.account # true 
```

它在做什么很奇怪。也许是蒙古虫？

# session - JBoss 会话由不同的上下文应用程序读取

> ID：14819264
> 
> 赞同：1
> 
> 时间：2013-02-11T19:18:27.943
> 
> 标签：session, jboss

我们的应用服务器最近遇到了一个非常奇怪的问题。我们为不同的客户端部署相同版本的构建到不同的应用程序上下文中，例如 /clientA、/clientB

今天clientA门户的一位用户反映他突然看到clientB的门户信息。我们检查了客户端A的门户日志，日志显示例如16:01:10用户点击了一个链接，然后在同一时间点，客户端B的门户日志显示会话没有所需的'会员的价值。（对于每个链接，我们的应用程序检查用户当前会话是否包含必需的“成员”值，如果没有，我们将用户引导到我们的首页），然后在门户 A 日志中它显示我们的系统试图将用户引导到首页，但是，而不是显示首页内容 JBoss 发回 ClientB 门户信息（从我们的客户端发送给我们的屏幕截图中可以看出）。

我们使用的是 Apache 2.2.22、Mod_jk 1.2.20、JBoss 4.23，目前没有使用集群。mod_jk 文件配置为：

```
worker.list=admin
worker.admin.type=ajp13
worker.admin.host=localhost
worker.admin.port=8009
worker.admin.connection_pool_size=240
worker.admin.connection_pool_timeout=120
worker.admin.socket_keepalive=1
worker.admin.socket_timeout=120
#worker.admin.recycle_timeout=300 
```

有人可以解释为什么会这样吗？？？

# elasticsearch - 当一条河流在弹性搜索中更新数据时，丢失的数据是否被删除？

> ID：14819270
> 
> 赞同：2
> 
> 时间：2013-02-11T19:18:47.453
> 
> 标签：elasticsearch, elasticsearch-jdbc-river

我正在使用 JDBC 河在 Sql Server 的弹性搜索中填充文档。我正在使用简单的 Sql 查询获取数据，并将轮询设置为 20 分钟。现在假设这条河在第一次轮询 sql server 时获取了 100 个文档。20 分钟后，当它再次获取数据时，它会得到 120 个文档，其中有 40 条新记录和 20 条在 sql server 中删除的记录不存在。

从 Sql server 中删除的记录是否也会从 ElasticSearch 的索引中删除？（这似乎没有发生）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:02:24.040

在观察了一夜之间的行为后，我发现索引具有正确的记录，并且已删除的记录不再存在。奇怪的是，当我重新启动弹性搜索服务时，这并没有发生。无论如何，确实回答了我的问题。

# ruby-on-rails - 使用不同的布局文件进行设计登录

> ID：14819272
> 
> 赞同：1
> 
> 时间：2013-02-11T19:18:55.613
> 
> 标签：ruby-on-rails, ruby, devise

我想使用不同的布局文件来登录设计。

我尝试了一个静态页面，但我得到了错误`undefined local variable or method 'resource'`。

目前，在我的应用程序控制器中，我有：

```
layout :layout_by_resource

protected

def layout_by_resource
  if devise_controller?
    "signin"
  else
    "application"
  end
end 
```

这样做的问题是每个设计视图都使用布局文件“登录”，这不好，因为我目前使用设计的编辑注册表单作为帐户页面。

有人知道使用不同布局文件登录设计的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:24:07.557

您可能需要做两件事才能完成这项工作。

1）使用您声明的布局调用创建从设计控制器继承的单独控制器。[指示](http://devise.plataformatec.com.br/#getting-started/configuring-controllers)

2）进一步自定义视图本身，甚至复制视图。[说明](http://devise.plataformatec.com.br/#getting-started/configuring-views)可能不是必需的。

关于 1) 控制器：如果您只想自定义登录，则需要以会话控制器为目标。

```
# app/controllers/sessions_controller.rb
class SessionsController < Devise::SessionsController
  layout :layout_for_action

protected

  def layout_for_action
    if params[:action] == '...' # See what the action is called internally beforehand
      "signin"
    else
      "application"
    end
  end

end 
```

然后，您需要指示 Devise 在以下位置使用您的控制器`config/routes.rb`：

```
devise_for :admins, :controllers => { :sessions => "sessions" } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-25T16:22:59.480

你可以运行这个命令

```
rails generate devise:views 
```

这将生成设计视图文件，供您自定义布局。

# ruby - 捕获特定错误并重试

> ID：14819273
> 
> 赞同：0
> 
> 时间：2013-02-11T19:19:04.833
> 
> 标签：ruby, ruby-on-rails-3, twitter

我有一个 ruby​​ on rails 应用程序，它`rake tweet`每小时执行一次，从数据库中发送一条推文。在查看了我发现的日志后，我注意到有几次推文没有发送：

```
2013-02-11T19:00:39+00:00 app[scheduler.8796]: Connecting to database specified by  DATABASE_URL
2013-02-11T19:00:39+00:00 app[scheduler.8796]: (__-){ Twitter is over capacity.
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/response/raise_error.rb:21:in `on_complete'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/response.rb:9:in `block in call'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: rake aborted!
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/response.rb:8:in `call'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/response.rb:8:in `call'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/response.rb:63:in `on_complete'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/request/multipart.rb:13:in `call'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/response.rb:8:in `call'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/connection.rb:110:in `post'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/request/multipart_with_file.rb:14:in `call'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/connection.rb:245:in `run_request'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.5/lib/faraday/request/url_encoded.rb:14:in `call'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/lib/tasks/scheduler.rake:11:in `block in <top (required)>'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/api/tweets.rb:129:in `update'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter.rb:52:in `method_missing'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/api/utils.rb:82:in `object_from_response'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/client.rb:81:in `request'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/client.rb:70:in `post'
2013-02-11T19:00:39+00:00 app[scheduler.8796]: (See full trace by running task with --trace)
2013-02-11T19:00:39+00:00 app[scheduler.8796]: Tasks: TOP => tweet
2013-02-11T19:00:41+00:00 heroku[scheduler.8796]: Process exited with status 1 
```

我怎样才能捕捉到这个特定的错误并重试推文直到它被发送？

在我的 rake 文件中：

```
task :tweet => :environment do
 if ApprovedTweet.all.size > 0
    t = ApprovedTweet.first
    Twitter.update(t.text)
    t.destroy
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:58:09.850

[从Twitter gem 的文档](http://rdoc.info/gems/twitter#Errors)中可以看出，这`Twitter::Error::TooManyRequests`似乎是您要捕获的错误。

如果我是你，我不会在发送之前重试发送推文（特别是在 rake 任务中 - 你很容易以僵尸进程结束），而是允许在失败之前进行多次重试：

```
begin     
  Twitter.update(t.text)
rescue Twitter::Error::TooManyRequests => e
  retries ||= 0
  retries +=  1
  if retries < ARBITRARY_MAX_RETRY_LIMIT
    # optionally sleep or delay for a while
    # ... or just log failure 
    retry
  else
    raise e # or another custom error of yours
  end
end 
```

# ruby - Rails Link Helpers 没有在 .text.erb 文件中本地化？

> ID：14819279
> 
> 赞同：0
> 
> 时间：2013-02-11T19:19:27.070
> 
> 标签：ruby, ruby-on-rails-3, localization, ruby-on-rails-3.1, ruby-on-rails-3.2

我在 Ruby on Rails 3.2 的邮件模板中有这个动作：

```
# password_reset.text.erb

<%= edit_password_reset_path(@user.password_reset_token) %> 
```

不幸的是，当我点击该链接时，我收到了一个奇怪的路由错误：

```
No route matches {:action=>"edit", :controller=>"password_resets", :locale=>"Ze92D45dUPpfwsgbFmpYeg"} 
```

奇怪的是，`locale`似乎包含`password_reset_token`这里而不是语言环境（例如`en`或`de`）。

所以我猜这`edit_password_reset_path`没有自动本地化，导致错误？

这怎么可能解决？

这里有更多信息：

```
class PasswordResetsController < ApplicationController  
  def edit
    @user = User.find_by_password_reset_token!(params[:id])
  end
end

# routes.rb
scope '(:locale)' do
  resources :password_resets
  ....
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:31:06.417

您需要将令牌作为查询参数发送：

```
edit_password_reset_path(@user, password_reset_token: @user.password_reset_token)
# Passing in the @user fulfills the :id section of the url. 
```

通过这样做`edit_password_reset_path(@user.password_reset_token)`，您正在向该部分提供重置令牌`:locale`。

还要提供语言环境：

```
edit_password_reset_path(@user, locale: "de", password_reset_token: @user.password_reset_token) 
```

# php - 安装 Xdebug 后，Apache 坚持工作。Ioncube 加载程序错误

> ID：14819285
> 
> 赞同：4
> 
> 时间：2013-02-11T19:19:41.280
> 
> 标签：php, apache, zend-framework, xdebug, ioncube

我通过 VirtualBox 在本地安装了 Ubuntu Server 12.10，用于我的 PHP 编程目的。

最近我以这种方式安装了Xdebug：

```
sudo apt-get install php5-xdebug 
```

然后将'xdebug'路径添加到我的/etc/php5/apache2/php.ini：

```
zend_extension=/usr/lib/php5/20100525+lfs/xdebug.so 
```

然后我重新启动了apache。而且，卡住了。我的本地网站没有加载。'php -v'（以及 'php -m'）说：

> PHP 致命错误：[ionCube Loader] Loader 必须作为第 0 行 Unknown 的 php.ini 文件中的第一个条目出现

问题是我没有安装 Ioncube。我试图用谷歌搜索这个错误消息，但到处都说似乎安装了错误的 Ioncube，或者与 xdebug 和 ioncube 不兼容的东西。但我根本没有安装 inocube！

怎么了？我怎样才能让我的 apache 重新活着？项目正在燃烧:(

更新：

我找到了一个原因。'php5-xdebug' 包似乎有一个针对 ioncube-xdebug 不兼容的内置修复程序。当我安装它时，我得到了文件 /etc/php5/conf.d/ioncube.ini ，其中 ioncube 作为 zend 扩展名包含在内。我用 php5-xdebug 包得到了这个文件。所以我删除了那个文件，apache 就开始了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-16T16:45:06.660

Ioncube 必须在任何其他扩展之前加载，因此要解决此问题，请执行以下操作：

1.  转到 /etc/php5/conf.d
2.  输入 mv ioncube.ini 01-ioncube.ini
3.  重启 apache 服务 apache2 重启
4.  享受 ioncube 和 xdebug :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-12T11:45:56.967

在 apache 安装的包含文件夹中注释 ioncube loader 并将其移动到 php.ini 中的扩展块，因此它看起来像这样：

```
 zend_extension = /usr/lib/php5/20090626+lfs/ioncube_loader_lin_5.3.so
    zend_extension = /usr/lib/php5/20090626+lfs/xdebug.so 
```

基本上你必须先加载ioncube，然后才加载xdebug。

# java - Eclipse 仅在输入两个字符后调用 Content Assist Auto Activation

> ID：14819288
> 
> 赞同：1
> 
> 时间：2013-02-11T19:20:00.843
> 
> 标签：java, eclipse, ide, content-assist

目前我只有在输入一个字符后自动显示的设置，但我想知道是否有办法将其限制为仅在输入 2 个字符时才显示。

因为它将减少在键入一些单个字母并且 Eclipse 加载可能性列表时发生的停顿。

所以目前我在**Preferences -> Java -> Editor -> Content Assist -> Auto Activation** Auto Activation triggers for Java: .(abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.

请注意，我不想**更改激活延迟**来尝试模仿这一点。

# forms - Symfony2 Form 自定义复合类型

> ID：14819290
> 
> 赞同：1
> 
> 时间：2013-02-11T19:20:05.357
> 
> 标签：forms, symfony, custom-type

我正在尝试制作一个可为空的整数，即一个整数，它的值也可以设置为空。

为此，我希望有一个带有复选框的整数输入，以表示它为空（然后可以连接 JavaScript 以禁用/启用整数输入）。

我看到了三种方法：

1.  有一个自定义类型，它有两个字段。
2.  有一个处理这两者的自定义表单小部件。
3.  一和二的某种组合。

我对此没有任何问题，这很简单。

我似乎找不到任何有关如何将这两个字段汇集到单个变量的文档。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:39:14.850

我能看到的最好方法是将[表单转换](http://symfony.com/doc/2.0/cookbook/form/data_transformers.html)器应用于您的表单。

如果选中该复选框，则将 null 设置为您的属性，如果不是，则分配整数小部件的值。

您可以在[这里查看](https://stackoverflow.com/questions/11634377/use-a-conditional-statement-when-creating-a-form)并将其应用于您的特定情况。

*旁注：我不会在控制器中这样做，这不是他的工作。*

# wordpress - Magento 上的 Wordpress 自定义帖子

> ID：14819291
> 
> 赞同：0
> 
> 时间：2013-02-11T19:20:04.973
> 
> 标签：wordpress, magento, fishpig

我正在尝试使用 Fishpig 扩展（完全集成）在 Magento 上显示一些 Wordpress 自定义帖子。

扩展网站上没有文档。我似乎无法弄清楚如何做到这一点。

有什么帮助吗？

[编辑]

好的，我正在寻找的是：

我在名为“幻灯片”的 wordpress 后端创建了自定义帖子。我想在 magento 主页上使用它们来创建一个滑块。一方面，当我查看 fishpig 模板时，我看到了一个独特的 $post->getPost()，例如，我想在其中包含我想使用哪种类型的帖子的详细信息。我知道不能那样做，当然我应该使用预定义的 fishpig 方法（我找不到），或者创建一个新方法。另一方面，这次在 fishpig 布局中，可能会有如下操作：

`<action method="setTitle"><title>Latest Posts</title></action>`

我认为我可以通过这种方式配置我想要显示的帖子类型..

抱歉，但我没有在线 URL 向您展示该项目，我仍处于项目的早期阶段..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T14:27:55.443

我认为您在这里寻找的是：

```
<action method="setPostType"><type>yourposttypeslug</type></action> 
```

这应该遵循您在最近的帖子块中已经拥有的片段，如下所示：

```
<block type="wordpress/sidebar_widget_posts" name="wordpress.widget.recent_posts" as="recent_posts" template="wordpress/sidebar/widget/posts.phtml">
    <action method="setTitle"><title>Latest Posts</title></action>
    <action method="setPostType"><type>yourposttypeslug</type></action>
    <action method="setPostCount"><post_count>3</post_count></action>
</block> 
```

# java - Swing GridBagLayout - 自动调整字段大小

> ID：14819293
> 
> 赞同：2
> 
> 时间：2013-02-11T19:20:14.197
> 
> 标签：java, swing

这是一段由 netbeans Swing gui 设计器生成的代码。我正在尝试执行以下操作：`jLabel1`并且`jLabel2`将仅包含尺寸为 52x46 px 的图像图标，不包含文本，它们应固定在行的左侧和右侧，`jTextField2`预计将填补 jlabels 和 autoresize 之间的空白以全屏/视图宽度。

问题是，`jTextField2`无论窗口/视图的大小如何，它都保持相同的宽度......初始宽度取决于字段内硬编码文本的长度......

你有什么想法，如何做到这一点？

```
private void initComponents() {
    javax.swing.JLabel jLabel1;
    javax.swing.JLabel jLabel2;
    javax.swing.JTextField jTextField2;

    java.awt.GridBagConstraints gridBagConstraints;

    jLabel1 = new javax.swing.JLabel();
    jTextField2 = new javax.swing.JTextField();
    jLabel2 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    getContentPane().setLayout(new java.awt.GridBagLayout());

    jLabel1.setText("ABC");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.anchor = java.awt.GridBagConstraints.LINE_START;
    getContentPane().add(jLabel1, gridBagConstraints);

    jTextField2.setText("some text field content");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridwidth = java.awt.GridBagConstraints.RELATIVE;
    gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
    getContentPane().add(jTextField2, gridBagConstraints);

    jLabel2.setText("ABC");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.LINE_END;
    getContentPane().add(jLabel2, gridBagConstraints);

    pack();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T19:23:07.287

[请参阅 GridBagLayout 的文档](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagLayout.html)

[GridBagConstraints.weightx](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagConstraints.html#weightx) , [GridBagConstraints.weighty](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagConstraints.html#weighty)

> 用于确定如何分配空间，这对于指定调整大小行为很重要。除非您为行 (weightx) 和列 (weighty) 中的至少一个组件指定权重，否则所有组件都会在其容器的中心聚集在一起。这是因为当权重为零（默认值）时，GridBagLayout 对象会在其单元格网格和容器边缘之间放置任何额外的空间。

```
jTextField2.setText("some text field content");
gridBagConstraints = new java.awt.GridBagConstraints();
gridBagConstraints.gridwidth = java.awt.GridBagConstraints.RELATIVE;
gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;

gridBagConstraints.weightx = 1.0; //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

getContentPane().add(jTextField2, gridBagConstraints); 
```

# continuous-integration - 构建系统和 CI 之间有什么区别？

> ID：14819295
> 
> 赞同：-3
> 
> 时间：2013-02-11T19:20:31.890
> 
> 标签：continuous-integration, build-automation

像蚂蚁和竹子，有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:23:52.143

没有区别。持续集成需要一个构建系统来确保代码库的更新正确构建。CI 基本上是一种将其他技术结合在一起的系统和方法，其中之一是构建，以便 CI 可以发生。

所以问题不是蚂蚁和竹子，而是更像是：苹果和水果沙拉有什么区别？再次，没有。一个是另一个的一部分。（假设你的水果沙拉里总是有苹果；-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:24:11.913

一个非常简短的概述：

构建*系统*按需构建代码（ant）。

像詹金斯这样的*持续集成系统*，例如在每次源代码签入/提交时构建系统，运行所有单元测试用例，并报告构建或单元测试失败，例如通过电子邮件向开发人员报告。这样的系统使用构建系统（ant），但也使用其他系统，（代码覆盖工具等）

# asp.net-mvc-4 - 使用基本 HTTP 身份验证的 MVC4 应用程序 + WebApi 中的 SimpleMembership

> ID：14819300
> 
> 赞同：7
> 
> 时间：2013-02-11T19:20:59.053
> 
> 标签：asp.net-mvc-4, asp.net-web-api, simplemembership

我正在尝试实现具有以下要求的 MVC4 Web 应用程序：

(a) 它仅向经过身份验证的用户提供服务。至于身份验证，我想使用简单的成员资格，因为它是 MVC 的最新身份验证技术，给我定义自己的数据库表的优势，提供开箱即用的 OAuth 支持，并且很容易与 MVC 和WebAPI。

(b) 它通过 WebApi 为移动/JS 客户端公开了一些核心功能，这些功能应通过基本 HTTP 身份验证 (+SSL) 进行身份验证。通常，我会让 JS 客户端使用 jQuery AJAX 调用 WebApi 控制器，并为不同的用户角色装饰 Authorize 属性。

(c) 理想情况下，在混合环境中，我希望避免双重身份验证：即，如果用户已经通过浏览器进行身份验证，并且正在访问暗示 JS 调用 WebApi 控制器操作的页面，则 (a) 机制应该是足够的。

因此，虽然 (a) 包含在默认 MVC 模板中，但 (b) 需要基本的 HTTP 身份验证，而无需浏览器的中介。为此，我应该创建一个 DelegatingHandler，就像我在这篇文章中找到的那样：[http](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers) ://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers 。问题是它的实现需要某种方式从接收到的用户名和密码中检索 IPrincipal，而 WebSecurity 类没有为此提供任何方法（除了登录，但我会避免仅仅为了授权而更改登录的用户，也是因为潜在的“混合”环境，如 (c))。所以看来我唯一的选择就是放弃简单的会员资格。有没有人有更好的建议？以下是引用帖子中的相关（稍作修改）代码：

```
public interface IPrincipalProvider
{
    IPrincipal GetPrincipal(string username, string password);
}

public sealed class Credentials
{
    public string Username { get; set; }
    public string Password { get; set; }
}

public class BasicAuthMessageHandler : DelegatingHandler
{
    private const string BasicAuthResponseHeader = "WWW-Authenticate";
    private const string BasicAuthResponseHeaderValue = "Basic";

    public IPrincipalProvider PrincipalProvider { get; private set; }

    public BasicAuthMessageHandler(IPrincipalProvider provider)
    {
        if (provider == null) throw new ArgumentNullException("provider");
        PrincipalProvider = provider;
    }

    private static Credentials ParseAuthorizationHeader(string sHeader)
    {
        string[] credentials = Encoding.ASCII.GetString(
            Convert.FromBase64String(sHeader)).Split(new[] { ':' });

        if (credentials.Length != 2 || string.IsNullOrEmpty(credentials[0]) ||
            String.IsNullOrEmpty(credentials[1])) return null;

        return new Credentials
        {
            Username = credentials[0],
            Password = credentials[1],
        };
    }

    protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(
        HttpRequestMessage request,
        CancellationToken cancellationToken)
    {
        AuthenticationHeaderValue authValue = request.Headers.Authorization;
        if (authValue != null && !String.IsNullOrWhiteSpace(authValue.Parameter))
        {
            Credentials parsedCredentials = ParseAuthorizationHeader(authValue.Parameter);
            if (parsedCredentials != null)
            {
                Thread.CurrentPrincipal = PrincipalProvider
                    .GetPrincipal(parsedCredentials.Username, parsedCredentials.Password);
            } 
        } 

        return base.SendAsync(request, cancellationToken)
            .ContinueWith(task =>
            {
                var response = task.Result;
                if (response.StatusCode == HttpStatusCode.Unauthorized
                    && !response.Headers.Contains(BasicAuthResponseHeader))
                {
                    response.Headers.Add(BasicAuthResponseHeader,
                        BasicAuthResponseHeaderValue);
                } 
                return response;
            });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:53:59.443

[这是另一种满足您所有要求的解决方案](http://kevin-junghans.blogspot.com/2013/02/mixing-forms-authentication-basic.html)。它在 MVC 4 应用程序中将 SimpleMemberhsip 与表单身份验证和基本身份验证混合使用。它还可以支持授权，但将 Role 属性保留为 null 不需要它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T23:31:01.577

谢谢，这似乎是目前最好的解决方案！我设法从头开始创建了一个虚拟解决方案（在这里找到它：http: [//sdrv.ms/YpkRcf](http://sdrv.ms/YpkRcf)），它似乎在以下情况下工作：

1) 当我尝试访问 MVC 控制器受限操作时，我会按预期重定向到登录页面以进行身份​​验证。

2) 当我触发对 WebApi 控制器受限操作的 jQuery ajax 调用时，调用成功（当然不使用 SSL 时除外）。

但是，在登录网站后，API调用仍然需要身份验证时，它不起作用。谁能解释这里发生了什么？在接下来的内容中，我详细介绍了我的程序，因为我认为它可能对像我这样的初学者有用。

谢谢（对不起，以下内容的格式，但我无法让这个编辑器适当地标记代码......）

* * *

## 程序

1.  创建一个新的 mvc4 应用程序（基本的 mvc4 应用程序：这已经带有通用提供程序。所有通用提供程序类名都以 Default... 开头）；

2.  为您的非本地数据库自定义 web.config，例如：

    ```
     <connectionStrings>
    <add name="DefaultConnection"
     providerName="System.Data.SqlClient"
     connectionString="data source=(local)\SQLExpress;Initial Catalog=Test;Integrated Security=True;MultipleActiveResultSets=True" /> 
    ```

此外，设置用于散列密码的 machineKey 通常很有用，这样您就可以在服务器之间自由移动该站点，而不会弄乱您的密码。使用机器密钥生成器网站来定义这样的条目：

```
 <system.web>
        <machineKey
   validationKey="...thekey..."
   decryptionKey="...thekey..."
   validation="SHA1"
   decryption="AES" /> 
```

1.  如果需要，创建一个与 web.config 的连接字符串相对应的新的空数据库。然后启动我们的好老朋友 WSAT（从 VS 项目菜单中）并通过根据需要添加用户和角色来配置安全性。

2.  如果您愿意，请添加一个带有 Index 操作的 HomeController，因为此模板中不存在任何控制器，因此您无法在没有它的情况下测试启动您的 Web 应用程序。

3.  从 NuGet 添加 Thinktecture.IdentityModel.45 并添加/更新所有您喜欢的 NuGet 包。请注意，在撰写本文时，来自 MS 的不显眼的 jquery 验证不再与 jQuery 1.9 或更高版本兼容。我宁愿使用[http://plugins.jquery.com/winf.unobtrusive-ajax/](http://plugins.jquery.com/winf.unobtrusive-ajax/)。所以，删除 jquery.unobtrusive* 并在你的包 (App_Start/BundleConfig.cs) 中添加这个库（由 winf.unobtrusive-ajax 和附加方法组成）。

4.  通过在 DefaultApi 路由配置之后添加代码来修改 App_Start 中的 WebApiConfig.cs：

    公共静态类 WebApiConfig { public static void Register(HttpConfiguration config) { config.Routes.MapHttpRoute( name: "DefaultApi", routeTemplate: "api/{controller}/{id}", 默认值: new { id = RouteParameter.Optional } );

    ```
     // added for Thinktecture
        var authConfig = new AuthenticationConfiguration
        {
            InheritHostClientIdentity = true,
            ClaimsAuthenticationManager = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager
        };

        // setup authentication against membership
        authConfig.AddBasicAuthentication((userName, password) => Membership.ValidateUser(userName, password));

        config.MessageHandlers.Add(new AuthenticationHandler(authConfig));
    } 
    ```

    }

为了更简洁，api 控制器将放在 Controllers/Api/ 下，因此创建此文件夹。

1.  将 LoginModel.cs 添加到模型中：

    公共类 LoginModel { [必需] [Display(Name = "UserName", ResourceType = typeof(StringResources))] public string UserName { get; 放; }

    ```
    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password", ResourceType = typeof(StringResources))]
    public string Password { get; set; }

    [Display(Name = "RememberMe", ResourceType = typeof(StringResources))]
    public bool RememberMe { get; set; } 
    ```

    }

这个模型需要一个 StringResources.resx 资源（带有代码生成），我通常放在 Assets 文件夹下，属性中引用了 3 个字符串。

1.  将 ClaimsTransformer.cs 添加到您的解决方案根目录，如下所示：

    公共类 ClaimsTransformer : ClaimsAuthenticationManager { public override ClaimsPrincipal Authenticate(string resourceName, ClaimsPrincipal incomingPrincipal) { if (!incomingPrincipal.Identity.IsAuthenticated) { return base.Authenticate(resourceName, incomingPrincipal); }

    ```
     var name = incomingPrincipal.Identity.Name;

        return Principal.Create(
            "Custom", 
            new Claim(ClaimTypes.Name, name + " (transformed)"));
    } 
    ```

    }

2.  将 Application_PostAuthenticateRequest 添加到 Global.asax.cs：

    公共类 MvcApplication : HttpApplication { ... protected void Application_PostAuthenticateRequest() { if (ClaimsPrincipal.Current.Identity.IsAuthenticated) { var transformer = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager; var newPrincipal = transformer.Authenticate(string.Empty, ClaimsPrincipal.Current);

    ```
     Thread.CurrentPrincipal = newPrincipal;
            HttpContext.Current.User = newPrincipal;
        }
    } 
    ```

    }

3.  web.config（将 YourAppNamespace 替换为您的应用根命名空间）：

    <configSections> <section name="system.identityModel" type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" /> ...

4.  为帐户控制器添加其他模型及其视图（您可以从 MVC3 应用程序模板中派生它们，即使我更喜欢使用需要字符串资源名称而不是文字的属性将它们更改为更易于本地化的变体）。

5.  要测试基于浏览器的身份验证，请将一些 [Authorized] 操作添加到控制器（例如 HomeController），然后尝试访问它。

6.  要测试基本的 HTTP 身份验证，请在某些视图（例如 Home/Index）中插入这样的代码（在令牌变量中设置您的用户名和密码）：

    ...

    <p>测试调用

    $(function() { $("#test").click(function () { var token = "USERNAME:PASSWORD"; var hash = $.base64.encode(token); var header = "Basic " + hash;控制台日志（标题）；

    ```
     $.ajax({
                url: "/api/dummy",
                dataType: "json",
                beforeSend: function(xhr) {
                    xhr.setRequestHeader("Authorization", header);
                },
                success: function(data) {
                    alert(data);
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
        });
    }); 
    ```

这需要用于编码/解码 Base64 的 jQuery 插件：jquery.base64.js 及其缩小版。

要允许 SSL，请按照此处的说明进行操作：[http](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx) ://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx （基本上，在 Web 项目属性中启用 SSL 并连接到属性值中指定的端口）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:54:46.817

也许这有帮助 - 听起来这就像你的场景：

[http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/](http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/) [http://leastprivilege.com/2012/10/24/extensions-to- the-web-apimvc-formsbasic-auth-sample-claims-transformation-and-ajax/](http://leastprivilege.com/2012/10/24/extensions-to-the-web-apimvc-formsbasic-auth-sample-claims-transformation-and-ajax/)

# ios - Box2d中的碰撞检测失败

> ID：14819303
> 
> 赞同：0
> 
> 时间：2013-02-11T19:21:04.493
> 
> 标签：ios, listener, box2d, collision-detection, contact

我想检测身体之间的碰撞，一个身体有圆形，30+有凸体。也许问题是因为检测到圆和凸之间的碰撞？请帮忙，两天找不到答案...我有 3 个课程：**Player**、**ConctactListener**和**level1**（我在其中创建多边形）。

在**Player**我设置类型***kGameObjectPlayer***：

```
 - (id) init {
        if ((self = [super init])) {
            type = kGameObjectPlayer;
        }
        return self;
    }
-(void) createBox2dObject:(b2World*)world {

    b2BodyDef playerBodyDef;
    playerBodyDef.type = b2_dynamicBody;

    playerBodyDef.position.Set(self.position.x/PTM_RATIO, self.position.y/PTM_RATIO);
    playerBodyDef.userData = self;
    playerBodyDef.fixedRotation = true;

    body = world->CreateBody(&playerBodyDef);

    b2CircleShape circleShape;
    circleShape.m_radius = 0.7;
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &circleShape;
    fixtureDef.density = 1.0f;
    fixtureDef.friction = 1.0f;
    fixtureDef.restitution =  0.0f;
    body->CreateFixture(&fixtureDef);
} 
```

在**ContactListener 中**：

```
 void ContactListener::BeginContact(b2Contact *contact) {
    GameObject *o1 = (GameObject*)contact->GetFixtureA()->GetBody()->GetUserData();
    GameObject *o2 = (GameObject*)contact->GetFixtureB()->GetBody()->GetUserData();

    if (IS_PLATFORM(o1, o2) && IS_PLAYER(o1, o2)) {
        CCLOG(@"-----> Player made contact with platform!");
    }
}

void ContactListener::EndContact(b2Contact *contact) {
    GameObject *o1 = (GameObject*)contact->GetFixtureA()->GetBody()->GetUserData();
    GameObject *o2 = (GameObject*)contact->GetFixtureB()->GetBody()->GetUserData();

    if (IS_PLATFORM(o1, o2) && IS_PLAYER(o1, o2)) {
        CCLOG(@"-----> Player lost contact with platform!");
    }
} 
```

在**level1**中，我创建了静态多边形，这些多边形应该是玩家应该接触的地面。

```
 - (void) drawStaticPolygons
    {
        GameObject *ground = [[GameObject alloc] init];
        [ground setType:kGameObjectGround];

        //1st polygon
        b2Vec2 vertices1[4];
        vertices1[0].Set(0, 1);
        vertices1[1].Set(0, 0);
        vertices1[2].Set(16, 0);
        vertices1[3].Set(16, 1);

        b2BodyDef myBodyDef1;
        myBodyDef1.type = b2_staticBody;
        myBodyDef1.userData = ground;

        b2PolygonShape polygonShape1;
        polygonShape1.Set(vertices1, 4); 

        b2FixtureDef myFixtureDef1;
        myFixtureDef1.shape = &polygonShape1; //change the shape of the fixture
        myBodyDef1.position.Set(0,0); 
        b2Body *staticBody1 = world->CreateBody(&myBodyDef1);
        staticBody1->CreateFixture(&myFixtureDef1); //add a fixture to the body

        //2nd polygon
        ....
        //n polygon
    } 
```

问题是如何让 ContactListener 知道我的多边形是***kGameObjectGround***？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T02:52:21.583

我看到的问题是，*因为我没有检查其他事情*，所以*多边形形状*必须是**逆时针方向**，并且*顶点*看起来不像遵循该规则。以*逆时针顺序*制作**顶点**并且应该可以工作。

# ruby - 使用 Ruby OpenSSL 验证非散列数据的签名

> ID：14819304
> 
> 赞同：3
> 
> 时间：2013-02-11T19:21:20.240
> 
> 标签：ruby, encryption, openssl, rsa, digital-signature

我有一个 RSA 公钥、一些数据和该数据的签名。我需要验证签名。但是，签名不是数据的摘要，而是整个数据的签名。（数据本身只有 16 个字节，因此签名者在签名之前不会费心对数据进行哈希处理。）我可以通过在初始化上下文时指定 NULL 引擎来验证 C 中的签名：

```
EVP_PKEY_CTX *ctx = EVP_PKEY_CTX_new(verify_key, NULL); 
```

但是，我一直无法在 Ruby 的 OpenSSL::PKey::PKey 验证方法中找到等效项。该方法需要一个 Digest 对象，并且我找不到实际上不会散列但只是按原样返回数据的 Digest。我尝试创建自己的 Digest 子类，但我不相信它可以工作，因为底层 OpenSSL 库不知道自定义摘要类型的存在。

我被卡住了，还是有办法解决这个问题，因为我无法修改签名者运行的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T06:29:47.187

总结评论中的答案，以便从“未回答”过滤器中删除此问题...

[猫头鹰](https://stackoverflow.com/users/589259/owlstead)：

> 您是否尝试过找到类似的功能`public_decrypt`？它可能会起作用，因为通常您不应该使用私钥加密并使用公钥解密。运气好的话，它将接受 PKCS#1 填充的签名版本（请注意，用于加密和签名的填充在 PKCS#1 中是不同的）。

[温默](https://stackoverflow.com/users/1916473/wammer)：

> 当然 - 使用公钥解密签名并验证它是否与数据匹配工作正常。到目前为止，这与标准 PKCS#1 填充一起工作得很好，但我会做更多的研究，看看不同的加密和签名填充是否在实践中是一个问题。谢谢。

[猫头鹰](https://stackoverflow.com/users/589259/owlstead)：

> 在对填充进行解密和验证之后，剩下的就是（如果可能的话，安全的）比较。所以这将很好地取代验证功能。大多数安全性在于模算术和填充。

# c# - 如果使用特定的枚举值，如何生成警告

> ID：14819306
> 
> 赞同：3
> 
> 时间：2013-02-11T19:21:40.530
> 
> 标签：c#, visual-studio, resharper, code-analysis, fxcop

我正在使用由第 3 方大会公开的枚举，例如，

```
public enum APIEnum
{
  Val1,
  Val2
} 
```

. 但是，其中一些值会导致我的应用程序出现错误行为。如果在代码中使用这些“坏”枚举值之一，我想生成编译器警告，例如，

```
APIEnum usedVal = APIEnum.Val2;

Compiler Warning: APIEnum.Val2 causes incorrect behavior. 
```

我的最终目标是生成一个警告，如果使用了错误的值（占总案例的 2%），则必须有意识地#pragma'd。否则，会出现警告，并且由于我们将警告作为错误，这会中断编译，直到修复或#pragma'd。

我已经在[此处](https://stackoverflow.com/questions/1425806/how-to-throw-compilation-error-from-an-attribute)和[此处查看了](https://stackoverflow.com/questions/28150/create-an-attribute-to-break-the-build)有关使用 Obsolete 属性解决此问题的线程，但我担心 Obsolete 会引起混淆，因为该值并没有真正过时。

我已经考虑过使用 Resharper 代码分析插件来解决问题的可能性，这绝对是一种选择。我不是 Resharper 或如何通过 Resharper 最好地解决问题的专家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:48:37.437

您可以为此创建自定义代码分析 (FxCop) 规则，或者确实推出您自己的 Resharper 规则。自定义代码分析规则应该相对简单，[查看我的规则，它检查正则表达式是否编译](http://fxcopcontrib.codeplex.com/SourceControl/changeset/view/23366#37977)`RegexOptions`，它找到了枚举的所有用途。您应该能够从那里构建自己的自定义规则。

自定义代码分析规则的一般优秀网站：

*   [内省者](http://www.binarycoder.net/fxcop/html/introspector.html)
*   [教程](http://www.binarycoder.net/fxcop/html/)

如果您在编写自己的规则时遇到困难，请不要犹豫，分享到目前为止的代码以寻求更具体的帮助。

使用 VisitAssignment 语句，然后使用`assignment.Target.Type.FullName`获取基础枚举类型。一定要检查 Target.Type 是否为空，委托可以有一个空类型。

![显示枚举类型的内省](../Images/17d929d17a46ae6b4011f8d1ba0a5791.png)

Methodcall 还将看到 Enum：

![显示分配和方法调用的内省](../Images/19ad59bb13465402fd58b257191a93f5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:58:52.233

您可以在 ReSharper 中使用结构搜索。转到`ReSharper -> Options | Code Inspection -> Custom patterns`，单击`Add Pattern`，输入`APIEnum.Val2`字段`Search pattern`并将您的错误描述输入`Description`。将模式严重性设置为`Show as error`。单击`Add`。就这样。唯一的缺点是如果您的项目中有另一个`APIEnum`具有相同`Val2`值的项目，即使在不同的命名空间中，它也会被标记为错误。

您还应该打开`ReSharper -> Options | Code Inspection -> Settings | Analyse errors in whole solution`以显示每个文件中的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T06:39:13.330

我已经使用 FxCop 方法对解决方案进行了原型设计，但我认为 FxCop 无法真正解决它。我在规则中尝试了以下代码：

```
public class DoNotUseSpecificEnum : RuleBase
{
  private string[] _enumValsToCheck =
  {
    "APIEnum.Val2"
  };

  public DoNotUseSpecificEnum ()
    : base("DoNotUseSpecificEnum ") { }

  public override void VisitBinaryExpression(BinaryExpression binaryExpression)
  {
    if ( _enumValsToCheck.Contains(
      binaryExpression.Operand1.ToString()) 
      || _enumValsToCheck.Contains( binaryExpression.Operand2.ToString() ) )
    {
      this.Problems.Add(new Problem(base.GetResolution(),
        binaryExpression.SourceContext));
    }

    base.VisitBinaryExpression(binaryExpression);
  }
} 
```

当我追踪到 VisitBinaryExpression 时，我发现 Operand1 的值是“1”而不是“APIEnum.Val2”。事后看来，这是有道理的（FxCop 在 MSIL 上工作，它用数字文字替换了枚举名称/值）；我只是希望我在深入了解自定义 FxCop 规则的痛苦/荣耀之前就已经意识到了这一点。:)

我发现的另一种方法是使用[StyleCop](http://stylecop.codeplex.com/)进行语法分析，但这看起来比自定义 FxCop 规则更难弄清楚并且不太受欢迎。

我将建议使用 Resharper 团队特定的自定义模式作为管理方式。我仍然担心这种方法（特别是因为我们将在多个解决方案和团队中拥有相同的规则），但构建机器的关注比我想象的要小得多。TeamCity 允许开箱即[用地对 Resharper 规则进行构建时检查](http://blogs.jetbrains.com/dotnet/2012/10/resharper-on-the-server-detecting-code-issues-in-the-build/)，因此我们至少可以配置我们的 CI 服务器以查找和报告未使用 Resharper 语法抑制的枚举的使用情况。

# asp.net-mvc - 集合过滤（通过列表 查看并返回控制器）

> ID：14819307
> 
> 赞同：0
> 
> 时间：2013-02-11T19:21:41.670
> 
> 标签：asp.net-mvc, json, razor, variable-assignment

我正在为我拥有的一个集合编写一个增强的搜索功能，但我遇到了一个问题。我正在尝试将列表存储在表单的隐藏字段中，以便每次用户发布表单时都可以添加到其中。

这是我的控制器代码：

```
public ActionResult Index(Int32 page = 0, List<String> filters = null, String filter = "", Int32 pageSize = 10, Boolean sortAscending = true, String sortBy = "Title") {
    UserContext uc = SecurityHelpers.GetUserData();
    LinkedList<SongViewModel> svm = new LinkedList<SongViewModel>();

    var songs = _songRepository.FindAll()
                               .Where(a => a.Title.Contains(filter) ||
                                           a.Lyrics.Contains(filter) ||
                                           a.Description.Contains(filter));

    ViewBag.ResultsCount = songs.Count();
    ViewBag.Page = page;
    ViewBag.PageSize = pageSize;
    ViewBag.SortAscending = sortAscending;

    if (filters == null) {
        filters = new List<String>();
    }
    filters.Add(filter);
    ViewBag.Filters = new JavaScriptSerializer().Serialize(filters);

    songs = songs.Sort(sortBy, sortAscending)
                 .Skip(page * pageSize)
                 .Take(pageSize);

    foreach (Song s in songs) {
        ((LinkedList<SongViewModel>)svm).AddLast(new SongViewModel(uc.SongWriterId) {
            Song = s
        });
    }
    return View("songs", svm);
} 
```

这是我的视图代码：

```
<li>
    <input type="text" class="textbox" name="filter" />
    <input type="hidden" value="@ViewBag.Filters" name="filters" />
</li> 
```

当我提交表单时，似乎一切正常，但是，ViewBag.Filters 现在包含列表列表？

*   索引操作的第一次运行显示隐藏字段中过滤器的值 [""]。
*   如果我为过滤器提交 'asdf' 值，我会得到 ["[\"\"]","asdf"]。
*   如果我再次提交过滤器的值为 'foo'，我会得到 ["[\"[\\"\\"]\",\"asdf\"]","foo"]。

有人对我做错了什么有任何想法吗？似乎 Json 解析器将过滤器的值解释为列表中的单个元素，我只是不知道如何解决这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:33:10.553

我找到了解决方案！

如果我将列表转换为 CSV 字符串，模型绑定器会正确解释它。

```
ViewBag.Filters = filters.Aggregate("", (s, x) => string.IsNullOrEmpty(s) ? x : s + ", " + x); 
```

# windows - 我可以在 Visual Studio 2012 中运行 ASP.NET 4.0 应用程序吗？

> ID：14819310
> 
> 赞同：-3
> 
> 时间：2013-02-11T19:21:42.820
> 
> 标签：windows, visual-studio-2010, visual-studio, .net-4.0, visual-studio-2012

我一直在使用 Windows 7 和 Visual Studio 2010 .. 最近我已经将我的操作系统更新到 Windows 8 现在我计划安装 Visual Studio 2012 .. 我有很多 ASP.NET Classic Form 项目是在 .Net 4.0 中构建的 .. . 我想知道我是否可以使用 .Net Framework 4.0 在 VS 2012 上使用/开发这些项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:25:45.190

是的，Visual Studio 2012 可用于开发面向 .NET 2.0 -> .NET 4.5 的应用程序。

请注意，对于 .NET 4.0 应用程序，您实际上将在 .NET 4.5 上运行（Win8 内置，或在 Win7 上与 VS2012 一起安装）。但是，差异应该是难以察觉的。

# php - setHydrator 的学说 2 错误

> ID：14819311
> 
> 赞同：0
> 
> 时间：2013-02-11T19:21:44.727
> 
> 标签：php, doctrine-orm, zend-framework2

使用带有标准应用程序结构的zend 2。我有实体：

```
module\University\src\University\Entity\Student.php
<?php
namespace University\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\Common\Collections\Collection;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="students")
 */
class Student
{   //more stuff
} 
```

和一个表格

```
University\src\University\Form\StudentForm.php
<?php
namespace University\Form;

use DoctrineModule\Stdlib\Hydrator\DoctrineObject as DoctrineHydrator;
use Zend\Form\Form;
use Zend\ServiceManager\ServiceManager;

class StudentForm extends Form
{
    parent::__construct('student-form');
    $entityManager = $serviceManager->get('Doctrine\ORM\EntityManager');

    $this->setHydrator(new DoctrineHydrator($entityManager, 'University\Entity\Student')); // this row cause the error

    // more stuff
} 
```

在控制器中：

```
<?php
namespace University\Controller;

use Zend\Mvc\Controller\AbstractActionController,
    Zend\View\Model\ViewModel,
    University\Entity\Student,
    University\Form\StudentForm;

class StudentController extends AbstractActionController
{
    public function indexAction()
    {

        $form = new StudentForm($this->serviceLocator);
        // more stuffs
    }
} 
```

教义给我带来了错误：

```
File:
\vendor\doctrine\common\lib\Doctrine\Common\Persistence\Mapping\MappingException.php:38
Message:
The class 'University\Entity\Student' was not found in the chain configured namespaces \Entity 
```

我正在关注[本](https://github.com/doctrine/DoctrineModule/blob/69dacc5d90724a9b579de34327e5a60fe41d6452/docs/hydrator.md#a-complete-example-using-zendform)教程。

任何想法为什么我得到这个错误以及如何解决它？

**编辑** 我找到了如何解决这个问题以及它为什么引起的。答案被移动到主题答案中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T09:54:13.030

我找到了解决方案。问题出在我的 module.config.php 中，我使用了以下教义设置：

```
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            )
        )
    )
) 
```

不太确定如何编辑上面的代码以使其工作，但这就是我使它工作的方式：

```
// Doctrine config
'doctrine' => array(
    'driver' => array(
        // defines an annotation driver with two paths, and names it `my_annotation_driver`
        'my_annotation_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(
                __DIR__ . '/../src/University/Entity',
                'another/path'
            ),
        ),

        // default metadata driver, aggregates all other drivers into a single one.
        // Override `orm_default` only if you know what you're doing
        'orm_default' => array(
            'drivers' => array(
                // register `my_annotation_driver` for any entity under namespace `My\Namespace`
                'University\Entity' => 'my_annotation_driver'
            )
        )
    )
) 
```

10x你们的帮助！

**编辑：** 我发现为什么第一个配置（使用**NAMESPACES**）不起作用，因为没有在 module.config.php 文件顶部设置任何命名空间，所以如果你想使用**NAMESPACE**注释进行配置，只需添加 'namespace你的模块名称；'

# android - 检查用户是否使用特定的语言环境

> ID：14819314
> 
> 赞同：0
> 
> 时间：2013-02-11T19:21:52.970
> 
> 标签：android

我需要检查用户设备的语言环境是否为日语。我正在执行以下操作：

```
public boolean isJapaneseLocale() {
    String locale = Locale.getDefault().toString();
    locale = locale.toLowerCase();
    return locale.startsWith("ja");
} 
```

这应该足够吗？我收到以下警告：

```
locale.toLowerCase() 
```

并为此使用默认语言环境。这对这个操作不安全吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:29:01.147

这是一种较老的做事方式。但是由于语言环境不使用非 ascii 字符，所以这应该不是问题。忽略警告，或者如果使用 Eclipse 则禁止它。

# python - 在 python 中使用 x 和 y 值在 matplot 中将直方图绘制为折线图

> ID：14819315
> 
> 赞同：3
> 
> 时间：2013-02-11T19:21:55.213
> 
> 标签：python, matplotlib, histogram, linegraph

我有两个 X 轴和 Y 轴的输入值。我想将直方图绘制为折线图。附图中提供了一个示例。我无法使用这些值绘制直方图。

```
ys = [0.21428571428571427, 0.14285714285714285, 0.047619047619047616, 0.11904761904761904, 0.09523809523809523, 0.09523809523809523, 0.023809523809523808, 0.09523809523809523, 0.11904761904761904, 0.047619047619047616]

xs = [0,1,2,3,4,5,6,7,8,9] 
```

我试过

```
plt.hist(xs,ys)
plt.show() 
```

但它失败了。

我对如下图感兴趣，最好在直方图上有和没有线。

![在此处输入图像描述](../Images/12fdd5c522546cd47c28efa75eb18f4f.png).

X 和 Y 轴分配有 xs 和 ys 的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T19:34:13.113

您需要的功能是[`bar`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.bar). 这是一个最小的例子：

```
>>> bar(xs, ys, width=1, align='center', color='brown')
>>> plot(xs, ys, color='purple', lw=2, marker='s') 
```

![](../Images/f5300f45f767c95074302519db665e4b.png)

# layout - 谷歌图表仪表板和引导行结构

> ID：14819325
> 
> 赞同：2
> 
> 时间：2013-02-11T19:22:38.473
> 
> 标签：layout, html, twitter-bootstrap, google-visualization

我将一些谷歌图表放在引导主题中。我正在使用使用如下结构的[图表仪表板](https://code.google.com/apis/ajax/playground/?type=visualization#simple_dashboard)：

```
<div id="dashboard">
        <div id="control1"></div>
        <div id="chart1"></div>
</div> 
```

bootstrap 使用这样的结构，将两个项目并排放置：

```
<div class="row-fluid">
        <div class="span3"></div>
        <div class="span9"></div>
</div> 
```

我怎样才能将这两者混合在一起，所以我最终得到了 span3 中图表的控制和 span9 中的图表？到目前为止，我最好的结果是：

```
<div class="row-fluid">
<div id="dashboard" >
        <div id="control1" class="span3" style="width: 25%; height: 400px;"></div>
        <div id="chart1" class="span9" style="width: 73%; height: 400px;"></div>
</div>
</div> 
```

但我想去掉 % 宽度并有一个更简单的结构。我已经对此进行了测试：

```
<div id="dashboard" class="row-fluid >
        <div id="control1" class="span3"></div>
        <div id="chart1" class="span9"></div>
</div> 
```

但它搞砸了，引导脚手架坏了。我怎样才能让他们一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:03:17.667

我能够使用以下标记使其正常工作。

```
<div class="row-fluid">
    <div id="dashboard">
        <div class="span4" style="font-size: 0.9em;">
            <div id="control1"></div>
        </div>
        <div class="span8">
            <div id="chart1"></div>
        </div>
    </div>
</div> 
```

小提琴：http: [//jsfiddle.net/Jeff_Meadows/V8psC/](http://jsfiddle.net/Jeff_Meadows/V8psC/)

# html - 输入内的阴影根 div

> ID：14819327
> 
> 赞同：13
> 
> 时间：2013-02-11T19:22:39.577
> 
> 标签：html, google-chrome, google-chrome-devtools

我今天看到了一些奇怪的东西。查看与帖子相关的图片（下）。我做了一个输入[type="text"]。它是屏幕图片上的“1”。它的 css 看起来像这样；

```
table tbody input {
    width: 40px;
    border: none;
    height: 16px;
} 
```

只是一个普通的输入，除此之外没有任何边框。

然后，我查看了开发工具，我看到了一些我以前从未见过的东西。“#shadow-root”和输入中的 div。

我知道，开发工具自己添加了一些东西来在原始网页上显示提示。但是，我真的很好奇为什么它会在输入中添加一个 div，以及实际上如何在 webkit 引擎上呈现类似的东西。

上次 Chrome 开发工具有点奇怪，我遇到了一些问题。例如，它加倍了 style.css 文件并忘记加载另一个是 jquery 日历看起来很糟糕的原因（仅在我的浏览器上加载时）。

它可能不是一个错误，而是一个功能，但我很想了解更多关于它的信息

![输入在浏览器中可见（它不是直接的临时屏幕）](../Images/95f6fb0b6415ec59837fa9c9d0c09379.png)

![从开发工具端可以看到这个输入](../Images/60b944e86a2040af53a221ff192613ed.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T19:29:02.993

那就是*Shadow DOM*。

只需单击选项并禁用“ ***Show Shadow DOM*** ”选项..

w3c 草案可在[https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/shadow/index.html找到](https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/shadow/index.html)

关于 Chrome，请参阅[http://chemicaloliver.net/programming/inspecting-the-shadow-dom-in-google-chrome-inspector/](http://chemicaloliver.net/programming/inspecting-the-shadow-dom-in-google-chrome-inspector/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-20T17:06:14.150

正如 Gaby Petrioli 所指出的，这就是 Shadow DOM。它由浏览器创建，用于为第三方库等提供 HTML 封装接口。

封装是一个 OOP 概念，其中对象可以限制对自己数据的访问，以便第三方代码不能任意清除它。

HTML 缺乏任何封装能力，这对于第三方库（jQuery、twitter 按钮等）来说尤其是个问题。Shadow DOM 的发明是***为了为 DOM 的各种子树提供功能封装。这是通过将功能子树与文档树（以及彼此）分开来实现的。影子 DOM 子树的这种分离称为影子边界。CSS 规则和 DOM 查询不跨越阴影边界，因此提供了封装。(1)***

正如 Dominic Cooney 所说：***这是一个使由 HTML 和 JavaScript 构建的小部件难以使用的基本问题：小部件内的 DOM 树没有从页面的其余部分封装。这种缺乏封装意味着您的文档样式表可能会意外地应用于小部件内部的部分；您的 JavaScript 可能会意外修改小部件内的部分；您的 ID 可能与小部件内的 ID 重叠；等等。(2)***

延伸阅读：

[Shadow DOM 的基本介绍](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)

[***(1) 更完整的技术说明***——本文第二部分讲解如何自己使用Shadow DOM](http://www.sitepoint.com/the-basics-of-the-shadow-dom/)

[(2) Dominic Cooney 的文章：Shadow DOM 101](http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/)

[Shadow DOM - W3C 工作草案 2014 年 6 月 17 日](http://www.w3.org/TR/shadow-dom/)

# .net - .net 中长时间运行的数据库操作

> ID：14819328
> 
> 赞同：2
> 
> 时间：2013-02-11T19:22:43.757
> 
> 标签：.net, sql-server, ado.net

我有一个分隔文件，用于通过 .net 应用程序在 sql server 表中插入/更新记录。该文件有大约 80000 条记录，每天都会处理。我的问题：在我旋转 80000 行中的每一行时保持与数据库的连接是否安全甚至明智，或者我应该关闭连接并在每次循环迭代时重新打开？这本身听起来很麻烦。但是，我担心长时间保持打开的连接、持有锁和不必要地占用内存。什么是更可扩展、更安全和更明智的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:28:48.840

First, no you should not open/close the connection every row. For 80,000 rows, that will take forever and will just add to the overhead. You could consider batching the rows (reset the connection say every 10-500 rows). Fortunately, there is a better option:

Secondly, the proper way to insert/update that many rows into a database from a .Net application, is to use the [SQLBulkCopy methods](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.batchsize.aspx), and not the INSERT or UPDATE commands. You should use SQLBulkCopy to load the data rows into a holding/staging table, and then use a SQL Stored Procedure to do the Insert/Update to the actual table(s), en-mass.

If you are concerned about the sustained load of the SQLBulkCopy, it has batching options built-in.

Using this technique, the initial upload of data should be *at least* 5x faster, and the actual table Insert/Updates should only be a matter of seconds.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:40:22.473

我曾经需要导入数据。但我必须在上面运行一些迷你业务规则。我的要求也是尽可能多地导入行，但如果有任何失败，请记录它（但不要让整个导入失败）。

我写了下面的示例。

[http://granadacoder.wordpress.com/2009/01/27/bulk-insert-example-using-an-idatareader-to-strong-dataset-to-sql-server-xml/](http://granadacoder.wordpress.com/2009/01/27/bulk-insert-example-using-an-idatareader-to-strong-dataset-to-sql-server-xml/)

我将 N 条记录（例如 N = 1000）作为 ~xml 传递给存储过程。

N 应该是可配置的，以找到“最佳位置”。但是一次一个太慢了，一次80,000个似乎很多。1,000（行）x 80“运行”....是一个很好的起点，恕我直言。

因此，如果您的导入是“哑”的，那么之前建议的“SQLBulkCopy”可能是最好的方法。但是，如果您有任何检查或验证，那么我的示例可能是一个很好的建议。

…………

另外的选择：

[http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx) bcp.exe

但这并不是真正的“点网代码”。

# ios - 当用户关闭当前应用程序时如何打开另一个应用程序？

> ID：14819329
> 
> 赞同：0
> 
> 时间：2013-02-11T19:22:48.900
> 
> 标签：ios, objective-c, cocoa-touch, uiapplicationdelegate

在我的应用程序中，我希望用户在关闭当前应用程序时看到另一个应用程序。有没有可能？我尝试通过以下方法编写代码并通过自定义 url 架构打开应用程序：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    NSString * string = @"InnovationLab://";
    NSURL * url = [NSURL URLWithString:string];
    [[UIApplication sharedApplication] openURL:url];
} 
```

但它没有用。我在这里放了一个断点，一旦我关闭应用程序，它就会停在这里，但什么也没有发生。这不会转到 AppStore。仅用于演示和内部使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:17:52.377

你应该这样做吗？不
，你能做到吗？（可能不是

我编写了一个小测试应用程序来尝试打开一个我知道可以工作的 URL（一个将打开地图应用程序的 Apple Maps URL）。我输入了一些日志代码以查看发生了什么。

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    NSURL *url = [NSURL URLWithString:@"http://maps.apple.com/?daddr=San+Francisco,+CA&saddr=cupertino"];
    if ([[UIApplication sharedApplication] canOpenURL:url]) {
        NSLog(@"Can Open URL");
    } else {
        NSLog(@"Cannot Open URL");
    }
    BOOL success =  [[UIApplication sharedApplication] openURL:url];
    NSLog(@"Success is %@", [NSNumber numberWithBool:success]);

    NSLog(@"Shared app: %@", [UIApplication sharedApplication]);
    NSLog(@"applicationWillResignActive");
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSURL *url = [NSURL URLWithString:@"http://maps.apple.com/?daddr=San+Francisco,+CA&saddr=cupertino"];
    [[UIApplication sharedApplication] openURL:url];
    NSLog(@"Shared app: %@", [UIApplication sharedApplication]);
    NSLog(@"Entered Background");
} 
```

都`NSLogs`记录了一些东西。应用程序返回`YES`for `canOpenURL:`，但`NO`在您尝试时作为返回值返回`-openURL:`。

这是日志：

```
Flipper[18946:907] Can Open URL
Flipper[18946:907] Success is 0
Flipper[18946:907] Shared app: <UIApplication: 0x1f0413f0>
Flipper[18946:907] applicationWillResignActive
Flipper[18946:907] Shared app: <UIApplication: 0x1f0413f0>
Flipper[18946:907] Entered Background 
```

如果您想允许您的用户打开另一个应用程序，您应该为他们提供一个按钮（或操作表或警报）。重新使用 Home 按钮听起来可能会让您的应用程序被拒绝。

请注意，如果您将相同的代码放入`application:didFinishLaunchingWithOptions:`，它会起作用 find 并立即将您带到地图应用程序。该行为可能在`applicationWillResignActive:`. 如果您真的打算这样做（并且您有一个只有一个视图的应用程序），您可以使用`viewWillDisappear`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T19:57:15.097

您可以使用他们的 URL 方案和您提供的代码自由打开任何其他应用程序 - 只需确保它不违反 HIG（[人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/Introduction/Introduction.html)）。不过，它不适用于您的情况。

[这个问题](https://stackoverflow.com/a/10211200/267892)和答案提供了更详细的信息，但如果你在越狱手机上运行应用程序，你可以使用这个小片段来代替：

```
[[UIApplication sharedApplication] launchApplicationWithIdentifier:@"com.apple.Preferences" suspended:NO]; 
```

[或者这个答案](https://stackoverflow.com/a/12665258/267892)的这个片段：

```
system("/usr/bin/open com.mycompany.MyAppName"); 
```

~~也就是说，坏主意。Apple 会以 99% 的把握拒绝你的应用。-`applicationWillResignActive`方法用于保存您的工作并准备关闭，您不应该也不能以该方法打开另一个应用程序。~~（不适用，因为应用程序不会上传到 App Store。

# opengl - 检测何时在 GLUT 中按下“逗号”

> ID：14819330
> 
> 赞同：1
> 
> 时间：2013-02-11T19:22:49.827
> 
> 标签：opengl, glut

我有“glutKeyboardFunc（键盘）；” 在我的主要功能中，我如何检测用户何时按下“逗号”或句号。按下逗号时，我想在 XZ 平面上向左移动（扫射）一段距离。并在按下句号时在 XZ 平面中向右移动。当前代码没有响应。

```
 if(key==GLUT_KEY_UP)
{
  eyez = eyez + RUN_SPEED;
}
else if(key==GLUT_KEY_DOWN)
{
  eyez = eyez - RUN_SPEED;
}
else if(key==',')
{
  eyex = eyex - RUN_SPEED;
}
else if(key=='.')
{
  eyex = eyex - RUN_SPEED;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:45:32.880

[`glutKeyboardFunc()`](http://www.opengl.org/resources/libraries/glut/spec3/node49.html)回调仅适用于 ASCII 类型的键。我很惊讶您会从中获得箭头键事件。

[`glutSpecialFunc()`](http://www.opengl.org/resources/libraries/glut/spec3/node54.html)为非 ASCII 键创建回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-16T19:36:25.593

亲爱的在 COMP27112 注册的 UoM 同学，您在这里需要的是逗号和点的 ASCII 代码。

分别是 44 和 46。

```
case 44:
  // Comma
  break;
case 46:
  // Dot
  break; 
```

# java - JFreechart 中的漂亮饼图

> ID：14819336
> 
> 赞同：0
> 
> 时间：2013-02-11T19:23:12.610
> 
> 标签：java, jfreechart

是否可以在 JFreechart 中为饼图获得复杂、漂亮的颜色？我的意思是如何实现[链接](http://upload.wikimedia.org/wikipedia/commons/b/bf/Ml_wiki_photo_event_analysis_Pie_Chart_All_users.png)中显示的图像的颜色？

是否可以使用 RGB 格式，还是需要使用其他格式？我们该怎么做。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:46:39.813

[您可以使用PiePlot.setSectionPaint](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/PiePlot.html#setSectionPaint%28java.lang.Comparable,%20java.awt.Paint%29)为饼图的每个切片使用 RGB 值指定颜色。

这是一个例子：

```
 DefaultPieDataset result = new DefaultPieDataset();
  result.setValue("1", 40.);
  result.setValue("2", 30.);
  result.setValue("3", 20.);
  result.setValue("4", 10.);
  JFreeChart chart = ChartFactory.createPieChart3D("", result, true, true, false);
  PiePlot3D plot = (PiePlot3D) chart.getPlot();
  plot.setBackgroundPaint(new Color(255, 255, 255, 0));
  plot.setSectionPaint("1", new Color(31, 73, 125));
  plot.setSectionPaint("2", new Color(192, 80, 77));
  plot.setSectionPaint("3", new Color(155, 187, 89));
  plot.setSectionPaint("4", new Color(128, 100, 162)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:22:17.763

您可以使用`setDrawingSupplier()`来提供自定义调色板，如此处所示[，](http://www.jfree.org/forum/viewtopic.php?f=3&t=115314)或覆盖`lookupSectionPaint()`以返回任何所需的，如此[处](https://stackoverflow.com/a/9875534/230513)`Paint`所示。`getItemPaint()`

您必须尝试使用​​轮廓笔触来近似高光。

# ascii - 在 Visual FoxPro 9.0 数据库中将字符转换为 ascii

> ID：14819338
> 
> 赞同：1
> 
> 时间：2013-02-11T19:23:30.617
> 
> 标签：ascii, foxpro, visual-foxpro

我的表中有一个值“ABC”，我想将其转换为 ASCII 值。

如何才能做到这一点？

我的输出应该是：656667

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T20:11:07.833

使用 ASC() 函数。但是，我相信它一次只对 1 个字符执行。所以你必须遍历你的字符串。

```
lcString = "ABC"
lcOutput = ""
FOR I = 1 TO LEN(lcString)
    lcOutput = lcOutput + ASC( SUBSTR(lcString, I, 1) )  &&Out puts the ascii value.
ENDFOR 
```

# ruby-on-rails - Typhoeus timeout = 连接还是下载？

> ID：14819339
> 
> 赞同：1
> 
> 时间：2013-02-11T19:23:31.137
> 
> 标签：ruby-on-rails, typhoeus

当我在发出 Typhoeus 请求时指定超时时，该超时是连接超时还是下载超时？如果是连接超时，还有什么方法可以指定下载超时？

例子：

```
Typhoeus::Request.new(url, **:timeout  => 3000**, :followlocation => true) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-20T20:44:35.340

看起来 Typhoeus README 自原始帖子/答案以来已更新。

[https://github.com/typhoeus/typhoeus#timeouts](https://github.com/typhoeus/typhoeus#timeouts)

> `timeout`和`connecttimeout`。`timeout`是整个请求的时间限制，***以秒***为单位。`connecttimeout`是连接阶段的时间限制，同样***以秒为单位***。

还有两个更细粒度的选项`timeout_ms`和，但只有在使用异步解析器`connecttimeout_ms`编译时才支持 ms 超时。`curl`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:01:07.807

这可能取决于您使用的版本。从 Typhoeus 0.5 开始就是这样：[libcurl timeout](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTTIMEOUT)。其中应包括转移。与[libcurl 连接超时](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCONNECTTIMEOUT)比较。

# javascript - CMS 中的引导程序 - 脚本生成导航错误

> ID：14819341
> 
> 赞同：0
> 
> 时间：2013-02-11T19:23:38.013
> 
> 标签：javascript, jquery, drupal, twitter-bootstrap

我正在创建一个在 Twitter Bootstrap 框架中运行的网站。我正在努力的最终结果是一个在页面之间具有移动滑动功能的网站。为了实现这一点，我在 Bootstrap 轮播中创建了“页面”，并且还使用 jquery mobile 来启用滑动。我正在使用本示例中的 javascript - [http://jsfiddle.net/64qK2/](http://jsfiddle.net/64qK2/) - 在我的导航中创建链接。

我遇到的问题出在脚本中。当我将此代码放在我的 CMS Drupal 中时，我的导航不会生成链接。当我保存生成的页面源并从另一台主机（在任何 CMS 之外）运行文件时，或者当我从本地系统运行文件时，一切都会生成并完美运行。我对 CMS 的访问权限有限，这意味着我无法将文档类型从严格更改或向头部添加任何数据。

所以，我的问题是：为什么会这样？生成的页面源代码如下（减去来自 Omniture 的页面分析代码）。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <title>Test</title>
            </head>
            <body>

            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />

            <!-- Styles -->
            <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" />
            <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet" />

            <style>

            /* GLOBAL STYLES
            -------------------------------------------------- */
            /* Padding below the footer and lighter body text */

            body {
             padding-bottom: 40px;
             color: #5a5a5a;
             color: #fff;
             background-color:#96232d;
             background:#96232d;
             font-family: "PT Sans";
            }
            h1, h2, h3{font-style: italic}
            .red_gradient {
             background: #ce4d4a; /* Old browsers */
             background: -moz-linear-gradient(top,  #ce4d4a 0%, #96232d 100%); /* FF3.6+ */
             background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ce4d4a), color-stop(100%,#96232d)); /* Chrome,Safari4+ */
             background: -webkit-linear-gradient(top,  #ce4d4a 0%,#96232d 100%); /* Chrome10+,Safari5.1+ */
             background: -o-linear-gradient(top,  #ce4d4a 0%,#96232d 100%); /* Opera 11.10+ */
             background: -ms-linear-gradient(top,  #ce4d4a 0%,#96232d 100%); /* IE10+ */
             background: linear-gradient(to bottom,  #ce4d4a 0%,#96232d 100%); /* W3C */
             filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ce4d4a', endColorstr='#96232d',GradientType=0 ); /* IE6-9 */
             position: relative;
            }

            .btn-renew {
             color: #ffffff;
             text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.3);
             background-color: #006dcc;
             *background-color: #ce4d4a;
             background-image: -moz-linear-gradient(top, #ce4d4a, #96232d);
             background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ce4d4a), to(#96232d));
             background-image: -webkit-linear-gradient(top, #ce4d4a, #96232d);
             background-image: -o-linear-gradient(top, #ce4d4a, #96232d);
             background-image: linear-gradient(to bottom, #ce4d4a, #96232d);
             background-repeat: repeat-x;
             border-color: #96232d;
             padding-left: 50px;
             padding-right: 50px;
            }

            .btn-renew:hover,
            .btn-renew:active,
            .btn-renew.active,
            .btn-renew.disabled,
            .btn-renew[disabled] {
             color: #ffffff;
             background-color: #96232d;
             *background-color: #ce4d4a;
            }

            .btn-renew:active,
            .btn-renew.active {
             background-color: #ce4d4a;
            }

            .text_center{text-align: center; background}

            .green_stripe {height: 10px; background-color: #004e26; border-top: 2px solid #fff; border-bottom: 2px solid #fff; margin-bottom: 30px; width: 100%;}

            /* CUSTOMIZE THE NAVBAR
            -------------------------------------------------- */

            /* Special class on .container surrounding .navbar, used for positioning it into place. */
            .navbar-wrapper {
             position: absolute;
             top: 0;
             left: 0;
             right: 0;
             z-index: 10;
             margin-top: 20px;
             margin-bottom: -90px; /* Negative margin to pull up carousel. 90px is roughly margins and height of navbar. */
            }
            .navbar-wrapper .navbar {

            }

            /* Remove border and change up box shadow for more contrast */
            .navbar .navbar-inner {
             border: 0;
             -webkit-box-shadow: 0 2px 10px rgba(0,0,0,.25);
                -moz-box-shadow: 0 2px 10px rgba(0,0,0,.25);
                     box-shadow: 0 2px 10px rgba(0,0,0,.25);
                     background: rgba(255,255,255,.4);
            }

            /* Downsize the brand/project name a bit */
            .navbar .brand {
             padding: 14px 20px 16px; /* Increase vertical padding to match navbar links */
             font-size: 16px;
             font-weight: bold;
             text-shadow: 0 -1px 0 rgba(0,0,0,.5);
            }

            /* Navbar links: increase padding for taller navbar */
            .navbar .nav > li > a {
             padding: 15px 20px;
             font-size: 18px;
             font-family: 'Oswald';
             letter-spacing: 1px;
             font-weight: 300;
            }

            /* Offset the responsive button for proper vertical alignment */
            .navbar .btn-navbar {
             margin-top: 10px;
             margin-bottom: 10px;
            }

            /* CUSTOMIZE THE NAVBAR
            -------------------------------------------------- */

            /* Carousel base class */
            .carousel {
             margin-bottom: 0px;
            }

            .carousel .container {
             position: relative;
             z-index: 9;
            }

            .carousel-control {
             height: 80px;
             margin-top: 0;
             font-size: 120px;
             text-shadow: 0 1px 1px rgba(0,0,0,.4);
             background-color: transparent;
             border: 0;
            }

            .carousel .item .container.header{
             height: 600px;
            }
            .carousel img.header_image {
             position: absolute;
             top: 0;
             left: 0;
             min-width: 100%;
             min-height: 600px;
             opacity: 1;
            }

            .carousel-caption {
             background-color: transparent;
             position: static;
             max-width: 550px;
             padding: 0 20px;
             margin-top: 200px;
            }
            .carousel-caption h1,
            .carousel-caption .lead {
             margin: 0;
             line-height: 1.25;
             color: #fff;
             text-shadow: 0 1px 1px rgba(0,0,0,.4);
            }
            .carousel-caption .btn {
             margin-top: 10px;
            }

            /* RESPONSIVE CSS
            -------------------------------------------------- */

            @media (max-width: 979px) {

             .container.navbar-wrapper {
               margin-bottom: 0;
               width: auto;
             }
             .navbar-inner {
               border-radius: 0;
               margin: -20px 0;
             }

             .carousel .item .container.header{
               height: 600px;
             }
             .carousel img.header_image {
               height: auto;
             }

             .featurette {
               height: auto;
               padding: 0;
             }
             .featurette-image.pull-left,
             .featurette-image.pull-right {
               display: block;
               float: none;
               max-width: 40%;
               margin: 0 auto 20px;
             }
            }

            @media (max-width: 767px) {

             .navbar-inner {
               margin: -20px auto;
               padding: auto 0;
             }

             .carousel {
               margin-left: -20px;
               margin-right: -20px;
             }
             .carousel .container {

             }
             .carousel .item .container.header{
              height: auto;
              min-height: 400px; 
             }
             .carousel img.header_image {
               height: auto;
               max-height: auto;
               min-height: auto;
               min-width: 600px
             }
             .carousel-caption {
               width: 65%;
               padding: 0 70px;
               margin-top: 100px;
             }
             .carousel-caption h1 {
               font-size: 30px;
             }
             .carousel-caption .lead,
             .carousel-caption .btn {
               font-size: 18px;
             }

             .marketing .span4 + .span4 {
               margin-top: 40px;
             }

             .featurette-heading {
               font-size: 30px;
             }
             .featurette .lead {
               font-size: 18px;
               line-height: 1.5;
             }
             .btn-renew {
             padding-left: 20px;
             padding-right: 20px;
             }

            }
            </style>

            <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
            <!--[if lt IE 9]>
             <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
            <![endif]-->

            <link href='http://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css' />
            <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic' rel='stylesheet' type='text/css' />
            <!-- Fav and touch icons -->
            <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-144-precomposed.png" />
            <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-114-precomposed.png" />
            <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-72-precomposed.png" />
            <link rel="apple-touch-icon-precomposed" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-57-precomposed.png" />

            <!-- NAVBAR
            ================================================== -->
            <div class="navbar-wrapper">
             <!-- Wrap the .navbar in .container to center it within the absolutely positioned parent. -->
             <div class="container">

               <div class="navbar navbar-inverse">
                 <div class="navbar-inner">
                   <!-- Responsive Navbar Part 1: Button for triggering responsive navbar (not covered in tutorial). Include responsive CSS to utilize. -->
                   <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                   </a>
                 </div><!-- /.navbar-inner -->
               </div><!-- /.navbar -->

             </div> <!-- /.container -->
            </div><!-- /.navbar-wrapper -->

            <!-- Carousel
            ================================================== -->
            <div id="headerCarousel" class="carousel slide">
             <div class="carousel-inner">
               <div class="item active" data-title="Home">
               <img class="header_image" src="http://wallpaperspoint.net/wp-content/walls/9_landscape_wallpaper_03/autumn-forest-landscape-wallpaper.jpg" alt="" />
                   <div class="container header">
                   <div class="carousel-caption">
                     <h1>&nbsp&nbspText Text, <br />&nbspText Text<br />Text Text...</h1>
                     <!--<p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>-->
                   </div>
                   </div>

               <div class="red_gradient"> 
               <div class="row-fluid green_stripe"></div>
               <div class="container">
                   <div class="row-fluid">
                   <div class="span6">
                       <h1>Home</h1>
                       <p>Lorem ipsum dolor sit amet, maiores ornare ac fermentum, imperdiet ut vivamus a, nam lectus at nunc. Quam euismod sem, semper ut potenti pellentesque quisque. In eget sapien sed, sit duis vestibulum ultricies, placerat morbi amet vel, nullam in in lorem vel. In molestie elit dui dictum, praesent nascetur pulvinar sed, in dolor pede in aliquam, risus nec error quis pharetra. Eros metus quam augue suspendisse, metus rutrum risus erat in.  In ultrices quo ut lectus, etiam vestibulum urna a est, pretium luctus euismod nisl, pellentesque turpis hac ridiculus massa. Venenatis a taciti dolor platea, curabitur lorem platea urna odio, convallis sit pellentesque lacus  proin. Et ipsum velit diam nulla, fringilla vel tincidunt vitae, elit turpis tellus vivamus, dictum adipiscing convallis magna id. Viverra eu amet sit, dignissim tincidunt volutpat nulla tincidunt, feugiat est erat dui tempor, fusce tortor auctor vestibulum. Venenatis praesent risus orci, ante nam volutpat erat. Cursus non mollis interdum maecenas, consequat imperdiet penatibus enim, tristique luctus tellus eos accumsan, ridiculus erat laoreet nunc.</p>
                   </div>
                   </div>
               </div>
               </div>

               </div>
               <div class="item" data-title="Page 2">
                 <img class="header_image" src="http://wallpaperspoint.net/wp-content/walls/9_landscape_wallpaper_03/autumn-forest-landscape-wallpaper.jpg" alt="" />
                   <div class="container header">
                   <div class="carousel-caption">
                     <h1>&nbsp&nbspText Text, <br />&nbspText Text<br />Text Text...</h1>
                     <!--<p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>-->
                   </div>
                   </div>

               <div class="red_gradient"> 
               <div class="row-fluid green_stripe"></div>
               <div class="container">
                   <div class="row-fluid">
                   <div class="span6">
                       <h1>Page 2</h1>
                       <p>Lorem ipsum dolor sit amet, maiores ornare ac fermentum, imperdiet ut vivamus a, nam lectus at nunc. Quam euismod sem, semper ut potenti pellentesque quisque. In eget sapien sed, sit duis vestibulum ultricies, placerat morbi amet vel, nullam in in lorem vel. In molestie elit dui dictum, praesent nascetur pulvinar sed, in dolor pede in aliquam, risus nec error quis pharetra. Eros metus quam augue suspendisse, metus rutrum risus erat in.  In ultrices quo ut lectus, etiam vestibulum urna a est, pretium luctus euismod nisl, pellentesque turpis hac ridiculus massa. Venenatis a taciti dolor platea, curabitur lorem platea urna odio, convallis sit pellentesque lacus  proin. Et ipsum velit diam nulla, fringilla vel tincidunt vitae, elit turpis tellus vivamus, dictum adipiscing convallis magna id. Viverra eu amet sit, dignissim tincidunt volutpat nulla tincidunt, feugiat est erat dui tempor, fusce tortor auctor vestibulum. Venenatis praesent risus orci, ante nam volutpat erat. Cursus non mollis interdum maecenas, consequat imperdiet penatibus enim, tristique luctus tellus eos accumsan, ridiculus erat laoreet nunc.</p>
                   </div>
                   </div>
               </div>
               </div>

               </div>
               <div class="item" data-title="Page 3">
                 <img class="header_image" src="http://wallpaperspoint.net/wp-content/walls/9_landscape_wallpaper_03/autumn-forest-landscape-wallpaper.jpg" alt="" />
                   <div class="container header">
                   <div class="carousel-caption">
                     <h1>&nbsp&nbspText Text, <br />&nbspText Text<br />Text Text...</h1>
                     <!--<p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>-->
                   </div>
                   </div>

               <div class="red_gradient"> 
               <div class="row-fluid green_stripe"></div>
               <div class="container">
                   <div class="row-fluid">
                   <div class="span6">
                       <h1>Page 3</h1>
                       <p>Lorem ipsum dolor sit amet, maiores ornare ac fermentum, imperdiet ut vivamus a, nam lectus at nunc. Quam euismod sem, semper ut potenti pellentesque quisque. In eget sapien sed, sit duis vestibulum ultricies, placerat morbi amet vel, nullam in in lorem vel. In molestie elit dui dictum, praesent nascetur pulvinar sed, in dolor pede in aliquam, risus nec error quis pharetra. Eros metus quam augue suspendisse, metus rutrum risus erat in.  In ultrices quo ut lectus, etiam vestibulum urna a est, pretium luctus euismod nisl, pellentesque turpis hac ridiculus massa. Venenatis a taciti dolor platea, curabitur lorem platea urna odio, convallis sit pellentesque lacus  proin. Et ipsum velit diam nulla, fringilla vel tincidunt vitae, elit turpis tellus vivamus, dictum adipiscing convallis magna id. Viverra eu amet sit, dignissim tincidunt volutpat nulla tincidunt, feugiat est erat dui tempor, fusce tortor auctor vestibulum. Venenatis praesent risus orci, ante nam volutpat erat. Cursus non mollis interdum maecenas, consequat imperdiet penatibus enim, tristique luctus tellus eos accumsan, ridiculus erat laoreet nunc.</p>
                   </div>
                   </div>
               </div>
               </div>

               </div>
             </div>
             <a class="left carousel-control" href="#headerCarousel" data-slide="prev">&lsaquo;</a>
             <a class="right carousel-control" href="#headerCarousel" data-slide="next">&rsaquo;</a>
            </div><!-- /.carousel -->
            </div>

            <!-- /.container -->

            <!-- Javascript
            ================================================== -->
            <!-- Placed at the end of the document so the pages load faster -->
            <script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-alert.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-modal.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-scrollspy.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tooltip.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-popover.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-button.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-carousel.js"></script>
            <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-typeahead.js"></script>   
            <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

            <script type="text/javascript" charset="utf-8">
             !function ($) {
               $(function(){
                 // carousel demo
                 $('#headerCarousel').carousel({
                           interval: false
                       })
               })
             }(window.jQuery)
            </script> 

            <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {  
              $("#headerCarousel").swiperight(function() {  
                 $("#headerCarousel").carousel('prev');  
               });  
              $("#headerCarousel").swipeleft(function() {  
                 $("#headerCarousel").carousel('next');  
              });
            });
            </script> 
            <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {  
               $('.carousel[id]').each(function() {
                   var html = '<div class="nav-collapse collapse" data-target="' + $(this).attr('id') + '"><ul class="nav">';
                       for(var i = 0; i < $(this).find('.item').size(); i ++) {
                           html += '<li';
                               if(i == 0) {
                                   html += ' class="active"';
                               }
                               var item = $(this).find('.item').get(i);
                                   html += '><a href="#">'  + $(item).attr('data-title') + '</a></li>';
                               }                                    
                               html += '</ul></li>';
                               $('.btn-navbar').after(html);
                               $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').hide();

                   }).bind('slid', function(e) {
                       var nav = $('.nav-collapse[data-target="' + $(this).attr('id') + '"] ul');
                       var index = $(this).find('.item.active').index();
                       var item = nav.find('li').get(index);

                       nav.find('li.active').removeClass('active');
                       $(item).find('li').addClass('active');

                       var nav = $('.carousel-nav[data-target="' + $(this).attr('id') + '"] ul');
                       var index = $(this).find('.item.active').index();
                       var item = nav.find('li').get(index);
                       nav.find('li a.active').removeClass('active');
                       $(item).find('a').addClass('active');

                       if(index == 0) {
                           $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').fadeOut();
                       } else {
                           $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').fadeIn();
                       }

                       if(index == nav.find('li').size() - 1) {
                           $('.carousel-control.right[href="#' + $(this).attr('id') + '"]').fadeOut();
                       } else {
                           $('.carousel-control.right[href="#' + $(this).attr('id') + '"]').fadeIn();
                       }

                   });

                   $('.nav a').bind('click', function(e) {
                       var index = $(this).parent().index();
                       var carousel = $('#' + $(this).closest('.nav-collapse').attr('data-target'));

                       carousel.carousel(index);
                       e.preventDefault();
                   });
            });

            </script>

            </body>
            </html> 
```

更新---我发现生成的页面源表单 Drupal 将脚本修改为：

```
 <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {  
               $('.carousel[id]').each(function() {
                   //For each carousel on the page, create this HTML
                   var html = '<div class="nav-collapse collapse" data-target="' + $(this).attr('id') + '"><ul class="nav">';
                       for(var i = 0; i &lt; $(this).find('.item').size(); i ++) {
                           html += '<li';
                               if(i == 0) {
                                   html += ' class="active"';
                               }
                               var item = $(this).find('.item').get(i);
                                   html += '><a href="#">'  + $(item).attr('data-title') + '</a>';              ////Error should be html += '><a href="#">'  + $(item).attr('data-title') + '</a></li>';
                               }                                    
                               html += '</li';></ul>';                                                          ////Error should be html += '</ul></li>';
                               $('.btn-navbar').after(html);
                               $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').hide();

                   }).bind('slid', function(e) {
                       var nav = $('.nav-collapse[data-target="' + $(this).attr('id') + '"] ul');
                       var index = $(this).find('.item.active').index();
                       var item = nav.find('li').get(index);

                       nav.find('li.active').removeClass('active');
                       $(item).find('li').addClass('active');

                       var nav = $('.carousel-nav[data-target="' + $(this).attr('id') + '"] ul');
                       var index = $(this).find('.item.active').index();
                       var item = nav.find('li').get(index);
                       nav.find('li a.active').removeClass('active');
                       $(item).find('a').addClass('active');

                       if(index == 0) {
                           $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').fadeOut();
                       } else {
                           $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').fadeIn();
                       }

                       if(index == nav.find('li').size() - 1) {
                           $('.carousel-control.right[href="#' + $(this).attr('id') + '"]').fadeOut();
                       } else {
                           $('.carousel-control.right[href="#' + $(this).attr('id') + '"]').fadeIn();
                       }

                   });

                   $('.nav a').bind('click', function(e) {
                       var index = $(this).parent().index();
                       var carousel = $('#' + $(this).closest('.nav-collapse').attr('data-target'));

                       carousel.carousel(index);
                       e.preventDefault();
                   });
            });

            </div></script>                                                                                     ////Error added </div> 
```

有谁知道为什么它会删除列表元素并添加 div 标签？或者如果有更好的方法来编码这部分，这样它就不会被修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:09:01.560

我的错误出现在 for 循环中：

`for(var i = 0; i > $(this).find('.item').size(); i ++) {`

`i > $(this)`应该 是 `i!=$(this)`

# jquery-mobile - 重新加载后不再出现返回按钮

> ID：14819342
> 
> 赞同：0
> 
> 时间：2013-02-11T19:23:47.697
> 
> 标签：jquery-mobile

使用 1.3.0 RC1，在“#subpage”页面重新加载后，后退按钮永远不会显示在任何页面上。

我了解当您重新加载“#page2”页面时，后退按钮不应该出现在第一页上。但是，如果您单击另一个链接以导航到另一个页面，您应该会得到返回按钮，但事实并非如此。

复制步骤： - 将网站加载到第 1 页 - 进入第 2 页并注意后退按钮 - 重新加载页面（位于“#page2”处） - 第 2 页加载时没有后退按钮（正确） - 转到第 3 页并注意后退按钮未显示

在这一点上，我希望看到一个后退按钮。即使我再往下看第 4、5、6 页......它也永远不会显示后退按钮。

我已将该属性添加`data-add-back-btn="true"`到伪页面容器中。我还在对象上添加`$.mobile.page.prototype.options.addBackBtn = true;`了`mobileinit`事件`document`。没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:43:36.573

这必须有效，我已经在 jQm 1.2 和 1.3 RC1 上对其进行了测试，这是一个示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://jquerymobile.com/demos/1.3.0-rc.1/css/themes/default/jquery.mobile-1.3.0-rc.1.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>      
    <script src="http://jquerymobile.com/demos/1.3.0-rc.1/js/jquery.mobile-1.3.0-rc.1.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div> 
    <div data-role="page" id="second" data-add-back-btn="true">
        <div data-theme="a" data-role="header"> 
            <h3>
                Second Page
            </h3>
            <a href="#third" class="ui-btn-right">Back</a>          
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div> 
    <div data-role="page" id="third" data-add-back-btn="true">
        <div data-theme="a" data-role="header"> 
            <h3>
                Third Page
            </h3>
            <a href="#fourth" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>  
    <div data-role="page" id="fourth" data-add-back-btn="true">
        <div data-theme="a" data-role="header">
            <h3>
                Fourth Page
            </h3>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>      
</body>
</html> 
```

如果你愿意，把你的例子发给我，我会看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T11:33:42.813

```
Can be done for web sites like this:

your starting page id = "pageIndex"

if you are using jquerymobile1.2.0.js, then modify the framework code like this:

    if ( o.addBackBtn &&
                role === "header" &&
                ***$page.jqmData( "url" ) !== "pageIndex"***) {

                // framework code modified for back button id: sheetal 08/02/2013

                if (backBtnId !== undefined) {
                    backBtn = $( "<a href='javascript:void(0);' class='ui-btn-left' data-"+ $.mobile.ns +"rel='back' data-"+ $.mobile.ns +"icon='arrow-l' id='" + backBtnId + "'>"+ o.backBtnText +"</a>" )
                        // If theme is provided, override default inheritance
                        .attr( "data-"+ $.mobile.ns +"theme", o.backBtnTheme || thisTheme )
                        .prependTo( $this );                    

                }else {

                    backBtn = $( "<a href='javascript:void(0);' class='ui-btn-left' data-"+ $.mobile.ns +"rel='back' data-"+ $.mobile.ns +"icon='arrow-l'>"+ o.backBtnText +"</a>" )
                    // If theme is provided, override default inheritance
                    .attr( "data-"+ $.mobile.ns +"theme", o.backBtnTheme || thisTheme )
                    .prependTo( $this );

                }
            } 
```

# gridview - 如何在编辑按钮旁边访问gridview删除按钮

> ID：14819343
> 
> 赞同：0
> 
> 时间：2013-02-11T19:23:49.230
> 
> 标签：gridview, linkbutton

如果有人在网格视图中选择“删除”链接，我会遇到“删除确认”弹出的问题。

更具体地说，单击“删除”链接时弹出窗口确实有效，但如果我单击同一单元格中旁边的“编辑”链接，然后单击“取消”按钮，弹出窗口也会出现提供“更新”和“取消”选项时的更新操作。

我相信这是因为我正在按索引访问删除控件，当我单击编辑按钮时，“编辑”链接的取消按钮会采用默认情况下“删除”按钮所在位置的索引。显然，不希望弹出“取消”操作。我正在为 gridview 使用内置的“允许编辑”和“允许删除”选项。下面是我正在使用的代码。

```
protected void actionPlanGirdView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow) 
    {
        // reference the Delete LinkButton
        LinkButton db = (LinkButton)e.Row.Cells[0].Controls[2];

        db.OnClientClick = "return confirm('Are you certain you want to delete the record?');";

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:43:11.073

**更新，我找到了解决方案。**在您为 .NET gridview 使用自动生成的插入和删除按钮的情况下，并且您想以编程方式访问删除按钮，我使用下面的方法来访问`Text`LinkBut​​ton 的属性。内部`if`语句检查 LinkBut​​ton 是否是 Delete 链接，就好像您还使用自动生成的 Insert 链接一样，当您在 Gridview 中单击 Insert 时，该索引位置可以是 Update/Cancel 组合的 Cancel 按钮的位置.

```
protected void actionPlanGirdView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // reference the Delete LinkButton
        LinkButton db = (LinkButton)e.Row.Cells[0].Controls[2];

            if (db.Text == "Delete")
            {
                db.OnClientClick = "return confirm('Are you certain you want to delete the record?');";
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:27:43.683

尝试使用`FindControl`：

```
LinkButton deleteButton = (LinkButton)e.Row.FindControl("deleteButton"); 
```

祝你好运。

# android - 通过意图错误的消息

> ID：14819347
> 
> 赞同：0
> 
> 时间：2013-02-11T19:23:59.773
> 
> 标签：android

我正在学习如何使用意图打开一个新活动并传递一条消息，但是当新活动开始时，它需要关闭！我做错了什么？帮助是preciated！谢谢！

```
package test.intent;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

Button btn1;
String message;
public final static String EXTRA_MESSAGE = "test.intent.MESSAGE";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn1 = (Button) findViewById(R.id.btn1);

    btn1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            message = "Message via an intent";      

            Intent intent = new Intent(MainActivity.this, Activity1.class);
            intent.putExtra(EXTRA_MESSAGE, message);
            startActivity(intent);
        }
    });
}

} 
```

接收消息的活动：

```
package test.intent;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class Activity1 extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    TextView display = (TextView) findViewById(R.id.txtv1);

     setContentView(R.layout.activity1);

     Intent intent = getIntent();
     String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    display.setText(message);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:25:22.147

**编辑：** 你有空指针异常，因为你在获取 TextView 之前没有设置 contentView 所以它返回 null

```
setContentView(R.layout.activity1)
TextView display = (TextView) findViewById(R.id.txtv1); 
```

## 像这样做

而不是这个`intent.getStringExtra(MainActivity.EXTRA_MESSAGE);`

采用

```
intent.getExtras().getString(MainActivity.EXTRA_MESSAGE); 
```

# css - CSS 使用现有代码制作活动状态导航元素

> ID：14819349
> 
> 赞同：2
> 
> 时间：2013-02-11T19:24:01.890
> 
> 标签：css, menu

伙计们，我正在使用另一个人的代码，并且想知道如何让有问题的导航显示“活动状态”。换句话说，我如何使该页面上的导航项处于活动状态并显示不同的背景颜色/文本颜色？这是 CSS 和 HTML，它很简单，我知道......但我不知道如何让这个活动状态工作。

**CSS：**

```
.menu {width:100%; margin:0; padding:0;}
.menu a.menuitem {
    font-size: 10px;
    font-weight: bold;
    color: #a7a7a7;
    display: block;
    position: relative; /*To help in the anchoring of the ".statusicon" icon image*/
    width: auto;
    border-bottom: 1px solid #ffffff;
    margin: 0;
    padding: 4px 10px 4px 10px;
    text-decoration: none;
}
.menu a.menuitem:visited, .menu .menuitem:active {color:#9ca1a6; text-decoration: none;}

.menu a.menuitem .statusicon { /*CSS for icon image that gets dynamically added to headers*/position:absolute; top:5px; right:5px; border: none;}
.menu a.menuitem:hover {
    background: #6dd0f7;
    color: #fff;
    text-decoration: none;
}

.menu div.submenu { /*DIV that contains each sub menu*/ width:auto; margin:0; padding:0;}

.menu div.submenu ul { /*UL of each sub menu*/ list-style-type:none; font-size:12px; margin:0; padding:0;}

.menu div.submenu ul li{border-bottom:1px solid #AFAFAF; line-height:12px; margin:0; padding:0;}

.menu div.submenu ul li a{display:block; font-size:12px; color:#383838; text-decoration: none; margin:0; padding:5px 10px 5px 20px;}

.menu div.submenu ul li a:link {color:#383838; text-decoration:none;}

.menu div.submenu ul li a:visited {color:#383838; text-decoration:none;}

.menu div.submenu ul li a:active {background:#D7EEFF; color:#0164B5; text-decoration:none;}

.menu div.submenu ul li a:hover {background:#D7EEFF; color:#0164B5; text-decoration:none;}

HTML:

         <div class="menu">
            <a class="menuitem submenuheader" href="seller-account-store-profile.html">My Store Profile</a>
            <a class="menuitem submenuheader" href="">Messages (241)</a>
            <a class="menuitem submenuheader" href="">Account Settings</a>
            <a class="menuitem submenuheader" href="">Fees & Activities</a>
            <a class="menuitem submenuheader" href="">Notifications</a>
            <a class="menuitem submenuheader" href="">Contact Support</a>
          </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:39:03.067

css 选择器`:active`仅在您单击它时选择链接（鼠标按下）。见**[这里](http://www.w3schools.com/cssref/sel_active.asp)**。

要以另一种方式显示当前页面的导航项，您需要向该链接添加一个额外的类，并将您的样式定义添加到该类。例如：

`<a class="menuitem submenuheader active" href="">Messages (241)</a>`

并使用以下样式对其进行样式设置：

`.menu a.active { /* your definitions */ }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:40:35.463

创建一个“当前”类并将其设置为当前显示的元素。

**示例 CSS**

```
div.menu a.current {
    color: #fff !important;
    text-decoration: none;
    background: #6dd0f7;
} 
```

**HTML**

```
<div class="menu">
            <a class="menuitem submenuheader" href="seller-account-store-profile.html">My Store Profile</a>
            <a class="menuitem submenuheader current" href="">Messages (241)</a>
            <a class="menuitem submenuheader" href="" class="current">Account Settings</a>
            <a class="menuitem submenuheader" href="">Fees & Activities</a>
            <a class="menuitem submenuheader" href="">Notifications</a>
            <a class="menuitem submenuheader" href="">Contact Support</a>
</div> 
```

jsfiddle：http: [//jsfiddle.net/XcmaD/](http://jsfiddle.net/XcmaD/)

# django - 使用 Coltrane 博客模板的通用视图问题

> ID：14819350
> 
> 赞同：0
> 
> 时间：2013-02-11T19:24:03.690
> 
> 标签：django, django-views

我正在关注 James Bennett 的 Practical Django Projects 中 coltrane（一个 django 博客）的示例，试图为我自己的自定义博客提供一个起点。我能够完成第一章中的大部分工作来整理我的博客，但是当他切换到通用视图时，它似乎中断了。

当我使用以下views.py时，我的博客有效：

```
def entry_list(request):
    return render_to_response('blog/entry_listing.html',
                              { 'entry_list': Entry.objects.all() },
                              context_instance=RequestContext(request))

def entry_detail(request, year, month, day, slug):
    date_stamp = time.strptime(year+month+day, "%Y%b%d")
    publish_date = datetime.date(*date_stamp[:3])
    entry = get_object_or_404(Entry, publish_date__year=publish_date.year,
                              publish_date__month=publish_date.month,
                              publish_date__day=publish_date.day,
                              slug=slug)
    return render_to_response('blog/entry_detail.html',
                              { 'entry': entry },
                              context_instance=RequestContext(request)) 
```

网址.py：

```
entry_info_dict = {
    'queryset': Entry.objects.all(),
    'date_field': 'publish_date',
    }

urlpatterns = patterns('',
('^blog/$','blog.views.entry_list'),
('^blog/(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$','django.views.generic.date_based.object_detail',entry_info_dict),) 
```

使用这些我可以创建一个博客条目列表（使用第一个 urlpattern），然后输入一个“详细视图”以查看完整条目（使用第二个 url 模式）。

然后建议我交换我的 urls.py 以使用通用视图来显示主博客列表，所以我的 url.py 变为：

```
entry_info_dict = {
    'queryset': Entry.objects.all(),
    'date_field': 'publish_date',
    }

urlpatterns = patterns('',
('^blog/$', 'django.views.generic.date_based.archive_index', entry_info_dict),
('^blog/(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$','django.views.generic.date_based.object_detail',entry_info_dict),) 
```

我在我的模板中进行了相应的更改（创建一个 entry_archive.html，因为这个通用视图默认为一个 _archive.html 模板，并确保它使用通用的“对象”而不是“条目”作为参考），但没有出现。

模板是：

entry_archive.html

```
{% extends "base.html" %}

{% block content %}

<p>These are public blog entries.</p>

<ul>
  {% for object in object_list %}
  {% if object.status == object.LIVE_STATUS %}

  {% include "blog/entry_summary.html" %}

  {% endif %}
  {% endfor %}
</ul>

{% endblock %} 
```

entry_summary.html

```
<div class="blog_entry">
  <h2 class="blog_title">{{ object.title }}</h2>
  <div class="blog_date">Published on {{ object.publish_date }}</div>
  <div class="blog_summary">{{ object.summary }}</div>
  <div class="blog_image"></div>
  <div class="blog_url"><a href="{{ object.get_absolute_url }}">Read full entry</a></div>
</div> 
```

有什么想法不太对劲吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T02:29:28.007

找到了答案——问题是archive_index通用视图返回了一个包含所有条目的名为“latest”的对象，而不是一个名为“object_list”的对象！

# c# - BackgroundWorker 的 RunWorkerCompleted 关闭表单

> ID：14819359
> 
> 赞同：3
> 
> 时间：2013-02-11T19:24:27.713
> 
> 标签：c#, winforms, backgroundworker

我正在尝试在 a`BackgroundWorker`完成 ( `RunWorkerCompleted`) 其任务后关闭一个对话框（用于上传文件）。

现在我的`RunWorkerCompleted`事件处理程序看起来像这样：

```
private void uploadWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // Hide the loading popup.
    loadingScreenDialog.Hide();

    // Close the dialog.
    this.Close();
} 
```

它不会关闭表单，但会隐藏加载弹出窗口，因此`DoWork`处理程序已成功执行。

为什么我的表格没有关闭？

**编辑**

我最终通过从我的`DoWork`处理程序中删除一些操作来解决这个问题并且它起作用了。肮脏的解决方法，谢谢你帮助我。

# php - PHP按钮更改提交上的href链接

> ID：14819360
> 
> 赞同：-3
> 
> 时间：2013-02-11T19:24:33.223
> 
> 标签：php, variables, submit, href

我对 PHP 非常陌生，有人要求我编辑他们的网页，我接受了这份工作，对 HTML 半精通。（我是你看到的艺术家）喘气......

我的问题？客户希望他们的管理面板上有一个 ON/OFF 开关，它将在前端显示两个页面中的任何一个。我的猜测是一个脚本，它将父页面上的 href 更改为特定的内容。我不知道该怎么做。请帮忙。

我在代码能力方面的不足我用我出色的艺术技巧来弥补，所以我欠你一两个 UI ;)

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:29:54.270

如果我是你，我会创建 jpeg 的一个红色和另一个白色.. 或其他任何东西，然后根据每个提交创建会话，或者你可以说。

```
<?php 

if(isset($_SESSION['on']) && !empty($_SESSION['on'])) {
echo "<img src='red.jpg' /> ";
}else {
echo "<img src='yellow.jpg' />";
} ?> 
```

上面的代码向您保证，如果会话“开启”设置，它将变为红色，否则，它将始终为黄色。

现在，使用按钮，如何打开和关闭东西

我想激活会话，你可以在下面做这样的事情。

```
<?php 

if(isset($_POST['on'])) {
$_SESSION['on'] = true;
}else {
$_SESSION['on'] = false;

}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:34:21.340

您将需要数据库中的一个变量来表示 ON/OFF 开关的值。这些值可以是 1 或 0 或任何您想要的值。我将有一个单独的 php 页面，调用它`page_redirect.php`只是有一个条件来测试数据库中的标志。它应该看起来像这样：

```
<?php
$flag = //value from database
if ($flag == 0)
{
  header("Location: url of first page");
}
else
{
  header("Location: url of second page");
}
exit;
?> 
```

这样，如果客户想要添加或更改页面，您就不必在数百万个不同的地方更改代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:37:53.817

这实际上不是最简单的任务，您最终可能不得不向您的朋友/客户承认您无法做到。我不能只为您编写代码，因为它会根据现有源以不同的方式实现 - 但如果您愿意花一些时间阅读 PHP 手册并希望学习，我可以为您指明正确的方向。

管理页面上的按钮需要在 Web 服务器上保存一个值，告诉最终用户内容要显示哪些内容（在您的情况下为第 1 页或第 2 页）。最自然的方法是使用 php 在数据库（通常是 MySQL）中存储一个值。这将需要您花一些时间学习 MySQL 的基本用法，但是您的客户端网络服务器将需要 MySQL 支持和一个您可以连接的活动数据库。

另一种方法是将信息存储在服务器上的文件中。在 PHP 中，您将使用文件命令来写入数据。php网站上有例子，从这里开始：

[http://www.php.net/manual/en/ref.filesystem.php](http://www.php.net/manual/en/ref.filesystem.php)

查看 fopen、fwrite、fread 和 fclose。如果您选择该方法，它们就是您需要的命令。

但是，当您写入数据后，最终用户看到的页面必须加载它（使用数据库查询或 fopen、fread 和 fclose），然后可以对您存储在文件中的值进行操作。更改显示哪个页面的一种简单方法是将两个单独的页面存储为 php 文件，拥有客户端实际看到的第三个 php 页面，并使用 php 中的“include”函数根据值加载正确的文件您加载的数据。即类似的东西：

```
if ($page_type == 0)
{
    include "page_1.php";
}
else
{
    include "page_2.php";
} 
```

至少这是我能想到的最简单的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T20:18:18.227

有很多方法，从动态 JQuery 到静态 PHP：

**查询：**

首先获取您的按钮：

```
<button id="i1">Show Page 1</button>
<button id="i2">Show Page 2</button>
<div id="loadhere"></div> 
```

现在，使用 JQuery 在特定 div 中加载页面。

```
$("#i1").click(function(){
 $("#loadhere").load("page1 link here");
});
$("#i2").click(function(){
 $("#loadhere").load("page2 link here");
}); 
```

**PHP：**

```
$page = ($selected_page == 0 ? page1:page2)
include("$page.php"); OR header("Location:$page.php"); 
```

# r - 带有 mapply 的 "%m %" 运算符

> ID：14819362
> 
> 赞同：4
> 
> 时间：2013-02-11T19:24:35.097
> 
> 标签：r, lubridate

我正在尝试使用 mapply 将月份添加到我的数据框的 a 和 b 列中的当前日期。以下是创建示例数据框的代码：

```
library(lubridate)
a <- as.Date(c("2012-01-11","2012-06-30","2012-04-18"))
b <- as.Date(c("2013-04-21","2012-03-22","2012-05-01"))
df <- data.frame(a,b) 
```

我可以使用`mapply("+",df, c(30,30))`将 30 天添加到两列日期。但是，当我尝试使用该命令时，`mapply("%m+%",df, months(1:2))`我收到错误消息：

> .setupMethodsTables 中的错误（fdef，initialize = TRUE）：类“derivedDefaultMethod”的这个对象没有名称“组”的槽

是否可以将 mapply 与 %m+% 运算符一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:37:25.530

在我 S4 无知的眼中，这似乎是 lubridate 包和 `%m+%`方法构建方式的问题。

看[源码](https://github.com/hadley/lubridate/blob/master/R/ops-%25m%2B%25.r)，

看来未导出的功能`.quick_month_add`会做你想做的事

```
 mapply(lubridate:::.quick_month_add,df,months(1:2), SIMPLIFY = FALSE)
$a
[1] "2012-01-11" "2012-06-30" "2012-04-18"

$b
[1] "2013-04-21" "2012-03-22" "2012-05-01" 
```

请注意，`SIMPLIFY`必须设置为，`FALSE`否则您将获得数字矩阵，因为在简化为矩阵时会剥离 Date 类。

或者，`Map(lubridate:::.quick_month_add,df,months(1:2))`

# twitter - 从推荐中确定 Twitter 用户 ID

> ID：14819363
> 
> 赞同：1
> 
> 时间：2013-02-11T19:24:35.757
> 
> 标签：twitter

有没有人知道一个解决方案（解析引荐来源网址数据、链接重定向等任何东西）来确定 Twitter 用户的 ID 当通过点击推文中的链接被引用到我的网站时？

# objective-c - 使用 dequeueReusableCellWithIdentifier 和自定义单元格的正确方法？

> ID：14819368
> 
> 赞同：1
> 
> 时间：2013-02-11T19:25:02.287
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序。在这个应用程序中，我得到了一个包含许多行的表格视图。每行都有标签。主要内容标签的高度各不相同。因此，行的高度不同（按设计）。

问题是 dequeueReusableCellWithIdentifier。当我为所有行设置相同的值时，我会遇到重叠行和重复的问题。当我为每一行设置一个唯一值时，它工作正常，但滚动性能不是很好。

处理自定义行（不同高度）的正确方法是什么？

感谢所有输入！

**更新**

这是我的 heightForRowAtIndexPath:indexPath

```
def tableView(tableView, heightForRowAtIndexPath:indexPath)

    object = @messages.objectAtIndex(indexPath.row)

    labelSize = object.message.sizeWithFont("Arial".uifont(14), constrainedToSize:[250.0, Float::MAX], lineBreakMode:UILineBreakModeWordWrap)

    labelSize.height + 88

  end 
```

**更新 2**

```
def tableView(tableView, cellForRowAtIndexPath:indexPath)

    # Get row data and create row

    data = @messages[indexPath.row]

    # Create the label and add to view

    main_label = UILabel.new
    main_label.frame = [[10, 0],[250, 40]]
    main_label.text = data.sender
    main_label.font = "Arial".uifont(14)
    main_label.textColor = UIColor.blackColor
    main_label.backgroundColor = UIColor.clearColor
    main_label.tag = 1

    # Create the label and add to view

    sub_label = UILabel.new
    sub_label.frame = [[10, 35],[250, 40]]
    sub_label.text = data.message
    sub_label.font = "Arial".uifont(14)
    sub_label.textColor = UIColor.grayColor
    sub_label.backgroundColor = UIColor.clearColor
    sub_label.numberOfLines = 0
    sub_label.sizeToFit
    sub_label.tag = 2

    # Create the label and add to view

    time_label = UILabel.new
    time_label.frame = [[10, 2],[250, 21]]
    time_label.text = data.created_at_human
    time_label.font = "Arial".uifont(13)
    time_label.textColor = BubbleWrap.rgb_color(123, 137, 165)
    time_label.backgroundColor = UIColor.clearColor
    time_label.tag = 3

    # Create the main view

    main_view = UIView.alloc.initWithFrame([[10, 10],[300, sub_label.size.height + 50]])
    main_view.backgroundColor = UIColor.whiteColor
    main_view.addSubview(main_label)
    main_view.addSubview(sub_label)

    # Create the details view

    details_view = UIView.alloc.initWithFrame([[10, main_view.frame.size.height + 10],[300, 25]])
    details_view.backgroundColor = BubbleWrap.rgb_color(236, 239, 245)
    details_view.addSubview(time_label)                 

    # Create the cell

    cell = UITableViewCell.alloc.initWithStyle(UITableViewCellStyleDefault, reuseIdentifier:nil)
    cell.selectionStyle = UITableViewCellSelectionStyleNone

    # Set the data and return cell

    cell.addSubview(main_view)
    cell.addSubview(details_view)

  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:30:07.583

你需要实施

```
- (Float) tableView(tableView, heightForRowAtIndexPath:indexPath) 
```

并为每个单元格返回适当的高度

```
def tableView tableView, heightForRowAtIndexPath: indexPath
  # calculate the required height
end 
```

# 更新

好的，所以我知道出了什么问题。

对于`UITableViewCell`这样的情况，我可能会创建一个子类，然后就使用它。这看起来像

```
def tableView(tableView, cellForRowAtIndexPath:indexPath)
    cell = tableView.dequeueReusableCellWithIdentifier 'MyCell'
    unless cell
      cell = MyCell.alloc.initWithStyle(UITableViewCellStyleDefault, reuseIdentifier: 'MyCell')
    end

    data = @messages[indexPath.row]

    cell.main_label.text = data.sender
    cell.sub_label.text  = data.message
    # ...
end 
```

或者，如果您不想子类化，那么您需要确保只添加一次视图。您可以在`unless`块中执行此操作，因为对于创建的每个单元格只会调用一次，但是您需要有一些方法来找到每个子视图。查找子视图的一种常用方法是使用`tag`，但这太可怕了，所以我会子类化

# xml - 如何将类 XML 格式与二进制数据结合起来？

> ID：14819369
> 
> 赞同：0
> 
> 时间：2013-02-11T19:25:02.617
> 
> 标签：xml, encoding, storage, binary-data

基于[我的问题](https://stackoverflow.com/questions/14816940/real-binary-block-in-xml-c)，将人类可读的类似 XML 的文件格式与二进制数据块结合起来的最佳方法是什么？最好是创建两个文件（一个符合 XML 的链接到具有纯二进制数据的第二个文件）还是创建一个不符合 XML 的 XML 和二进制数据的混合？是否有任何可用的“混合物”（以避免创建完全专有的东西）？我想要的是有效地将一些人类可读的数据与不需要人类可读但需要尽可能有效地存储的大量数据（因为它可能是千兆字节的数据）结合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T05:35:07.030

没有标准的方法可以做到这一点，但这是一个简单的习语，我已经看过好几次了。

使用不符合标准的组合，但目的是使将整个 XML 块读入字符串然后从该字符串解析变得容易。

这保持了允许您在大多数 XML 解析器之间进行选择的灵活性。

因此，我建议启用快速加载 XML 块的文件格式是：

1.  XML 部分长度的前缀
2.  XML 部分
3.  二进制部分

# google-chrome-extension - onBeforeNavigate 返回不存在的 tabId

> ID：14819371
> 
> 赞同：0
> 
> 时间：2013-02-11T19:25:16.013
> 
> 标签：google-chrome-extension

我正在尝试使这些行工作：

```
chrome.webNavigation.onBeforeNavigate.addListener(function(details) {
chrome.tabs.update(details.tabId, {url: "http://www.google.com"}, function() {});
}, {url: [{hostEquals: 'yahoo.com'}]}); 
```

有时，我们会收到错误：tabs.update 期间出错：没有 ID 为 294 的选项卡。

奇怪，你有理由吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T11:06:24.047

似乎 onBeforeNavigate 也适用于带有预取的自动完成 url 可能......

使用 onBeforeNavigate 而不是 onBeforeNavigate 可以消除错误！

# asp.net - 我们可以在同一个空间/不动产上拥有两个控件（网格控件和图表控件）吗

> ID：14819379
> 
> 赞同：1
> 
> 时间：2013-02-11T19:25:44.467
> 
> 标签：asp.net, .net

我有一个简单的 .aspx 页面（附在帖子中）。

我想在 Chart 控件或 Gridview 控件中显示数据。当用户选择在图表控件或网格视图控件中查看数据的选项时，该特定控件必须显示，而其他控件必须变为不可见。

到目前为止，我能够在图表控件中成功填充数据。如果用户选择“网格视图”选项，我如何在同一位置显示网格视图控件中的数据。我不希望 gridview 控件显示在弹出窗口或任何其他窗口中。

请有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:33:01.710

您是否尝试过使用多视图控件？

我还没有看到您的任何代码，但假设您有一个图表按钮和一个网格视图按钮，您只需在 button.click 事件中更改多视图中显示的视图。

# javascript - 奇怪的重定向错误

> ID：14819382
> 
> 赞同：1
> 
> 时间：2013-02-11T19:25:48.573
> 
> 标签：javascript, jquery, jquery-ui

我有一个 jQuery 日期选择器。我编写了一个函数，当用户单击日期时会添加一个 URL 参数（日期）。如果设置了日期，我想使用`setDate`datepicker 的方法将日期设置为 URL 参数。如果未设置，将使用今天的日期。我已经完成了从 URL 获取日期，但没有设置日期选择器的日期。奇怪的是，如果我只是手动添加`?date=xxxxx`到 url，它就可以完美运行。因此，当我尝试使用`onSelect`

页面可以在[这里](https://wwwdev.cco.purdue.edu/asp/Calendar/matt_test.asp)查看。

[可以查看这个页面](https://wwwdev.cco.purdue.edu/asp/Calendar/matt_test2.asp)，可以看到手动添加参数是有效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:37:43.710

它与重定向无关。它与您页面上的事件顺序有关。在不起作用的页面上，您在`.datepicker`内部进行了初始化`$(function () {})`，这意味着它将在 DOM 准备好时运行（在您的 Javascript 的其余部分之后）。那只是绑定一个事件。然后，在绑定事件后立即尝试调用`.datepicker("setDate",qs_date)`. 但是你不能这样做，因为你的日期选择器还没有被初始化，因为函数 in`$(function() {})`还没有被执行。您应该使用以下代码：

```
$(function() {
    $("#datepicker").datepicker({
        onSelect: function(date, picker){ 
            var url = "http://wwwdev.cco.purdue.edu/asp/Calendar/matt_test.asp?date=" + date;
            window.location = url;
        }
    });

    var qs_date = location.href.match(/[?&]date=([^&#]+)/); 

    if (qs_date){
        qs_date = qs_date[1];
        alert(qs_date);
        $("#datepicker").datepicker("setDate",qs_date);
    }
}); 
```

在工作示例中，您不使用`$(function () {})`，因此 datepicker 立即初始化，然后您根据查询字符串设置日期。上面的代码实际上做了同样的事情，除了技术上它可以放在页面上的任何地方。操作 DOM 的内联 Javascript 需要在渲染后运行。这就是工作示例有效的原因，这也是`$(function () {})`保证的原因。

我确信有更好的方法可以通过它的初始化选项在日期选择器上初始设置日期，但是我提供的应该做同样的事情，只是有点不必要。

**更新：**

我*认为*该`defaultDate`选项允许您在初始化中设置初始日期 - [http://api.jqueryui.com/datepicker/#option-defaultDate](http://api.jqueryui.com/datepicker/#option-defaultDate)

所以你可以使用：

```
$(function() {
    var qs_date = location.href.match(/[?&]date=([^&#]+)/);
    if (qs_date) {
        qs_date = qs_date[1];
        //alert(qs_date);
    }

    $("#datepicker").datepicker({
        defaultDate: qs_date,
        onSelect: function(date, picker){ 
            var url = "http://wwwdev.cco.purdue.edu/asp/Calendar/matt_test.asp?date=" + date;
            window.location = url;
        }
    });
}); 
```

它应该可以完美运行，因为如果`qs_date`是`null`（查询字符串中没有匹配项），则将`defaultDate`值设置为`null`与省略它（其默认值）相同并将日期设置为今天。因此，只有在查询字符串中有匹配项时，默认日期才会从今天开始更改。

# matlab - 如何读取不是当前文件夹的文件夹中的文件？

> ID：14819383
> 
> 赞同：1
> 
> 时间：2013-02-11T19:25:53.167
> 
> 标签：matlab

我正在制作一个程序，它需要一个包含文件的参考文件夹`.txt`。这些文件是自动读取的。在下一步中，要求用户选择一个文件，程序将读取指定的文件。

问题是，我希望引用位于不同的文件夹中（保持不变）。如果我当前的文件夹是包含用户数据的文件夹，我如何阅读我的参考文件？

这是自动文件打开部分的代码行，就像现在一样：

```
fichierref = 'H:\MATLAB\Archive_08112012';
files = dir(fullfile(fichierref, '*.txt'));
numberOfFiles = numel(files);
for d = 1:numberOfFiles
   filenames(d) = cellstr(files(d).name);
end 
```

它确实会自动打开文件，但前提是我当前的文件夹是 Archive_08112012。

编辑：

我会添加这个。这就是我打开文件的方式。

```
headerlinesIn = 11;
delimiterIn=' ';
if numberOfFiles > 1
for i=1:numberOfFiles
     data = importdata(filenames{i},delimiterIn,headerlinesIn); 
```

如果 numberOfFiles = 1，它具有完全相同的行，但没有 for 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:23:03.933

调试你的代码，你会很快发现出了什么问题：

```
files = dir(fullfile(fichierref, '*.txt'));
..
filenames(d) = cellstr(files(d).name); 
```

您正在构建文件名的单元格数组（注意：*名称*，而不是完整路径）。如果你检查了这个数组的内容，你会看到文件加载出了什么问题：

```
 data = importdata(filenames{i},delimiterIn,headerlinesIn); 
```

您发出`impordata`文件名；当您不指定完整路径时，matlab 会在当前目录（或添加到 matlab 路径的其他目录，这里不重要）中查找文件。

现在必须清楚，您需要切换到将 importdata 与您所追求的文件的完整路径一起使用。使用完整文件执行此操作：

```
other_directory = 'c:\whatever\it\might\be'
data = importdata(fullfile(other_directory,filename{i}),delimiterIn,headerlinesIn); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:18:36.510

要引用当前工作目录之外的文件，您需要该文件的完整路径（或相对路径）。您可以使用 构建路径[`fullfile`](http://www.mathworks.com/help/matlab/ref/fullfile.html)，就像您在示例代码中所做的那样。`importdata`调用函数时使用完整（或相对）路径，而不仅仅是文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:53:57.250

你应该继续使用`fullfile`. 我只是发布了一个取自[http://www.mathworks.com/help/matlab/ref/fullfile.html的示例](http://www.mathworks.com/help/matlab/ref/fullfile.html)

```
f = fullfile('myfolder','mysubfolder','myfile.m')

f =
myfolder\mysubfolder\myfile.m 
```

# php - / 未找到

> ID：14819386
> 
> 赞同：0
> 
> 时间：2013-02-11T19:26:19.880
> 
> 标签：php, zend-framework

我是 Zend Franmework 的新手。我已经完成了 Zend 的完整设置。在应用程序文件夹中，我使用命令创建了一个控制器

```
 zf create controller Test 
```

它创建了控制器文件。除此之外，它还创建了名为 index.phtml 的视图文件（即在应用程序/视图/脚本中）

我的项目名称是 myproj。当我在浏览器中编写“/myproj”时，它会打开项目主页。但是当我使用新生成的控制器（即“myproj/test”）打开页面时，它给出了页面未找到错误。我错过了什么？

我看过这个教程.. [http://www.youtube.com/user/spamitovic85](http://www.youtube.com/user/spamitovic85)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:45:40.653

要触发此命令，您必须在项目**myproj**中复制粘贴 bin 文件夹，之后这将起作用

# .net - 我可以在程序集之间移动 COM 类吗？

> ID：14819389
> 
> 赞同：0
> 
> 时间：2013-02-11T19:26:36.193
> 
> 标签：.net, com-interop

我有一个通过 ComVisible 向 COM 公开接口和类的程序集。此类由 VB6 应用程序使用。

现在，由于一些重组，我希望这个类由不同的程序集提供。只要我保留 Guid 和 ProgID，我可以将代码移动到这个新程序集，注册它，并让 VB6 应用程序找到类而无需重新编译它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:43:39.653

> 只要我保留 Guid 和 ProgID

小心，有*Guids*，复数。至少有一个用于接口类型，IID，一个用于实现接口的类，CLSID。如果您支持事件或在程序集中有多个接口或类，则附加一些。如果您还注册了类型库（Regasm.exe /tlb 选项），那么您还有一个用于类型库 TLBID 的程序集本身的 guid。

弄错其中任何一个，或依赖 .NET 自动生成它们，替换将不起作用。

确保替换相同的最佳方法是反编译类型库并比较它们的身份。如果您还没有 Tlbexp.exe，请从 Visual Studio 命令提示符中首先生成类型库。然后运行Oleview.exe，File + View Typelib得到类型库的内容，反编译成IDL。将右窗格内容复制/粘贴到文本文件中。重复替换 DLL 并进行比较。不要担心评论的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:44:27.997

是的，我不明白为什么不...只要确保旧程序集正确注销即可。

# c# - 任何用于处理共享配置文件的组件？

> ID：14819394
> 
> 赞同：0
> 
> 时间：2013-02-11T19:27:13.707
> 
> 标签：c#, app-config

我有一个场景，其中 1 个 Winform 应用程序安装在多个 Citrix 服务器上。该应用程序应该在每台服务器上具有完全相同的配置（我们有多个服务器进行扩展）。

我希望能够只共享 app.config 文件的 1 个副本，这样我就可以在 1 个地方进行更改，并让它影响应用程序的每次安装。

据我所知，.net 的唯一内置支持是使用 configSource 属性，但这仅适用于单个配置部分。我想分享整个配置文件（或至少配置组）。

我是否遗漏了.net 内置的任何可以帮助我的东西？

如果没有，是否有任何好的第三方或开源解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:08:52.757

您可以将您的 app.config 放在共享上的某个位置并修改您的 winform 应用程序启动代码，使用 SO 此处描述的技巧：[Change default app.config at runtime](https://stackoverflow.com/questions/6150644/change-default-app-config-at-runtime)，如下所示：

```
namespace WindowsFormsApplication1
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            using (AppConfig.Change(@"\\myserver\mypath\app.config"))
            {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new Form1());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:23:30.860

以下链接讨论了可用于同步文件和文件夹的 3rd 方工具

[http://raywoodcockslatest.blogspot.com/2011/01/windows-7-raid-or-mirror-across.html](http://raywoodcockslatest.blogspot.com/2011/01/windows-7-raid-or-mirror-across.html)

另外，您是否尝试过编写自己的复制器服务。根据您的时间和预算，您可以决定建造或购买。我也许会建造它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:17:12.117

SO中描述的另一个好的解决方案是使用配置包含。 [在 app.config 中使用 XML 包含或配置引用来包含其他配置文件的设置](https://stackoverflow.com/questions/480538/use-xml-includes-or-config-references-in-app-config-to-include-other-config-file)

```
<!-- SomeProgram.exe.config -->
<configuration>
  <connectionStrings configSource="externalConfig/connectionStrings.config"/>
</configuration>

<!-- externalConfig/connectionStrings.config -->
<connectionStrings>
  <add name="conn" connectionString="blahblah" />
</connectionStrings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:55:04.640

这可以使用使用 SkyDrive、Dropbox 甚至 DFS 等创建的“共享”文件夹。

在每台服务器上，您将拥有相同的配置文件副本。作为一个好处，您甚至可以对二进制文件使用这种方法（当然，您应该处理文件锁）。

我正在使用这种方法

1.  要将 Web 应用程序（带有配置）部署到场，这是使用 DFS 完成的。
2.  使用 Dropbox 部署桌面应用程序。我为此创建了特殊帐户。但是，我不确定这是否是合法使用 Dropbox :)

# java - 如何在 JOGL 中旋转圆柱体

> ID：14819398
> 
> 赞同：0
> 
> 时间：2013-02-11T19:27:31.067
> 
> 标签：java, opengl, jogl

我在 JOGL 中画了一个金属丝圆柱体，我想让它从屏幕出来时立起来？

为了进行旋转，我一直在弄乱以下代码，但它没有旋转：

```
gl.glRotatef(cylinder_a, 0, 0, 90); 
```

在 JOGL 中旋转圆柱体的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:06:40.210

根据[JOGL 文档，`gl.glRotatef`](http://worldwind.arc.nasa.gov/java/jogl/docs/javax/media/opengl/GL.html#glRotatef%28float,%20float,%20float,%20float%29)它的参数是`angle`, `x`, `y`, `z`. 使用 x, y, z 的参数`0`, `0`,`90`定义沿 +z 的向量，指向屏幕外。这意味着您正在围绕其轴旋转圆柱体，因此变化并不明显。要使其“直立”，您需要围绕 x 轴旋转它。

（您可以在 OpenGL 中更改 x、y 和 z 指向的方式，但通常 +x 指向右侧，+y 指向上方，并且 +z 从屏幕“出来”。您可以使用[右手](http://en.wikipedia.org/wiki/Right-hand_rule)定则来记住这一点。 )

# jquery - AJAX 调用的相对 URL - 如何通过包含使其适用于站点中的所有文件？

> ID：14819400
> 
> 赞同：1
> 
> 时间：2013-02-11T19:27:33.643
> 
> 标签：jquery

我正在使用包含将相同的 jQuery 代码插入到我网站的所有页面中。问题是在进行 AJAX 调用时，为 URL 设置相对链接仅适用于某些页面，而不是所有页面。

我无法从站点根目录设置 AJAX URL，因为 URL 会根据产品/发布版本而变化。

我不想在每次发布时都更新包含文件以确保它具有正确的绝对 URL。

URL 语法为：`<domain>/<product>/<version>/<content>`

该`<content>`目录包含 html 页面以及具有更多页面的子目录。

一个 URL 可能是`<domain>/<product>/<version>/topics/green/goingGreen.html`，另一个可能是`<domain>/<product>/<version>/lists.html`. 显然，AJAX 调用的相对 URL 不适用于两个页面。

如何在不使用绝对链接的情况下通过包含使 AJAX 调用适用于站点中的所有文件？

```
ajax: {
    url: '<absolute link> #' + $(this).text().toLowerCase(),
    loading: false,
    success: function (elems) {
        if (elems.length) {
            this.set('content.text', elems);
            var $elems = $(elems);
        } else {
            this.destroy();
        }

    }
} 
```

如果你很好奇，当用户将鼠标悬停在特定术语上时，我正在使用 qTip 从特定文件中提取内容以弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:34:39.260

您可以将当前 URL 剪辑为所需的斜杠数量：

例如，

```
var relpath = window.location.pathname.match(/^(\/[^\/]*){3}/)[0]; 
```

将返回您的 URL 的前三个部分（/domain/product/version）。将 替换为`{3}`您希望在当前路径中获得不同数量的级别的任何其他数字。使用它来将您的 AJAX URL 形成为绝对路径（这仍然对您当前的相对位置敏感）。

# python - python 的 alsaaudio.mixer 不刷新混音器设置

> ID：14819406
> 
> 赞同：3
> 
> 时间：2013-02-11T19:27:47.747
> 
> 标签：python, linux, alsa

我想从 python 控制我的 ALSA 声卡的混音器。同时，我希望能够从其他可能同时修改声卡的应用程序中获得更改。

我想最简单的方法是使用声卡的混音器接口来设置和*查询*混音器。使用这个`alsaaudio`包应该很容易：

```
import alsaaudio
mixer=alsaaudio.Mixer()
print mixer.getvolume() # prints e.g. '[100L]'
mixer.setvolume(50)
print mixer.getvolume() # prints '[50L]' 
```

不幸的是，`Mixer`如果控件“在幕后”发生变化，则不会更新实例。考虑上面的应用程序正在运行，但现在将混音器更改`alsamixergui`为 80。

```
print mixer.getvolume()  # prints '[50L]'
mixer2=alsaaudio.Mixer()
print mixer2.getvolume() # prints '[80L]'
print mixer.getvolume()  # prints '[50L]' 
```

实例化一个新的 Mixer() 是轮询新的混音器设置的唯一方法，还是有更简单的方法来刷新现有实例的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:24:01.273

[搅拌机](http://pyalsaaudio.sourceforge.net/libalsaaudio.html#alsaaudio.Mixer.polldescriptors)**。[**polldescriptors**](http://pyalsaaudio.sourceforge.net/libalsaaudio.html#alsaaudio.Mixer.polldescriptors) [() 文档](http://pyalsaaudio.sourceforge.net/libalsaaudio.html#alsaaudio.Mixer.polldescriptors)说：**

 **> 返回（文件描述符，事件掩码）的元组，可用于等待带有 select.poll 的混音器上的*更改*。**

# asp.net - 如何在不预编译的情况下使用命令行msbuild部署VS2012网站项目？

> ID：14819407
> 
> 赞同：38
> 
> 时间：2013-02-11T19:27:54.657
> 
> 标签：asp.net, visual-studio-2012, msbuild, msdeploy, web-site-project

我继承了一个非常大的 VS2012 网站项目（不是 Web 应用程序），并且正在尝试自动化它的部署。项目中有大量循环引用，因此要使用 aspnet_compiler.exe 对其进行预编译，我必须打开固定名称。问题在于它会导致在我的四核、16gb 内存、ssd 开发人员机器上构建大约需要 20 分钟。以前的开发人员不必处理这个问题，因为他只需将整个源代码复制到生产 Web 服务器。

因此，在我解决循环引用问题之前，我想至少使用 msdeploy 自动部署项目。我可以在 Visual Studio 中使用发布配置文件，它完全符合我的要求：

1.  构建引用的 DLL 并将它们添加到项目中。
2.  web.config 是否转换。
3.  甚至不尝试构建网站，而只是为我打包成一个 zip 文件。

我一生无法弄清楚的是如何让 MSBuild.exe 做同样的事情！

```
MSBuild.exe WebProject.vs2012.sln /m /T:Build 
    /p:Configuration=Release`;DeployOnBuild=true`;PublishProfile=TestDeploy 
```

上面的命令仍然尝试执行 aspnet_compiler 这不是我想要的。发布配置文件说它不应该被预编译......但在日志中我看到它正在执行它。

那么：如何在不预编译的情况下使用 msbuild 部署网站项目？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-11T21:12:02.377

对于网站项目，发布过程不涉及构建过程。对于网站项目，由于没有正式的构建过程，我们没有什么可以真正扩展的。

*注意：以下内容需要 VS 2012（或 VS2010）和[Azure SDK](http://www.windowsazure.com/en-us/develop/net/)。这些功能不包含在 VS2012 的 RTM 中。*

在 VS 中创建发布配置文件后，将创建以下内容：

1.  App_Data/PublishProfiles 下的发布配置文件（.pubxml 文件）
2.  A`website.publishproj`在网站的根目录中

的目的`website.publishproj`是方便命令行发布。`.csproj/.vbproj`它是您在使用 Web 应用程序项目时通常会得到的填充物。

如果您想自动发布，可以使用如下命令。

```
msbuild.exe website.publishproj /p:DeployOnBuild=true 
   /p:PublishProfile=<profile-name-no-extension> /p:VisualStudioVersion=11.0 
```

您不必指定调用的目标。

关于 VS 中显示该站点正在预编译的消息，这是一个错误。它通过预编译运行，但发布使用配置文件中的设置。该错误应该已在[Visual Studio Update 1](http://www.microsoft.com/visualstudio/eng/visual-studio-update)中修复。安装后，您应该看不到不必要的预编译步骤。如果您仍然看到，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-09T14:31:35.827

虽然 Sayed Ibrahim Hashimi 的回答确实对我有所帮助，但这是我发现 VS2012 所必需的：

安装 Azure SDK 后，我创建了一个文件发布配置文件，该配置文件在我的项目文件`PublishProfiles`夹中创建了一个文件夹。`Properties`在这个新文件夹中，有两个名为`my_sample_PublishProfile_Foo.pubxml`和`my_sample_PublishProfile_Foo.pubxml.user`创建位置的 xml 文件。

使用 .pubxml，我可以`msbuild`像这样发布：

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe "C:\...\UI.csproj" /p:DeployOnBuild=true /p:PublishProfile="C:\...\PublishProfiles\my_sample_PublishProfile_Foo.pubxml"  /p:VisualStudioVersion=11.0 
```

请记住以管理员权限运行包含此脚本的批处理文件。

# vbulletin - Vbulletin 帖子模板 - ad_thread_first_post_content

> ID：14819408
> 
> 赞同：1
> 
> 时间：2013-02-11T19:28:03.590
> 
> 标签：vbulletin

我正在尝试使用此代码在 postbit 和 postbit 遗留模板中包含 ad_thread_first_post_content 模板

```
 <vb:if condition="$post['isfirstshown']">

                                  {vb:raw ad_location.thread_first_post_content}
                                {vb:raw ad_location.ad_thread_first_post_content}

</vb:if> 
```

如果我在此条件之上添加一些测试内容，则该内容会出现在帖子页面上，但名为 ad_thread_first_post_content 的模板的内容不会出现在帖子页面中。我已经添加了以上内容之后

```
 <div class="postbody">
<div class="postrow">
    <vb:if condition="$post['title'] OR $show['messageicon']">
    <h2 class="posttitle icon">
        <vb:if condition="$show['messageicon']"><img src="{vb:raw post.iconpath}" alt="{vb:raw post.icontitle}" /> </vb:if>{vb:raw post.title}
    </h2>
    </vb:if> 
```

# asp.net - 如何从 ASP.Net 页面方法打印返回类型？

> ID：14819413
> 
> 赞同：0
> 
> 时间：2013-02-11T19:28:42.780
> 
> 标签：asp.net, ajax

***请阅读底部的更新。***

我创建了一个页面方法，它发送一封包含联系表单信息的电子邮件。该表单在颜色框窗口中启动，并且该表单是它自己的 .aspx 页面。

我可以调用 page 方法，但它出错了，即使我将它作为字符串返回，我似乎也无法打印实际的异常。

页面方法的总结是

```
 [WebMethod]
    public static string SendEmail(string name, string email, string message)
    {
        try
        {
            // send the email

            return "success"; 
        }
        catch(Exception ex)
        { 
            return ex.ToString(); 
        }
     }

CLIENT CODE:

<script type="text/javascript">

    // add event handler for submit button
    $addHandler($get('SendEmailPageMethod'), 'click', EmailPageMethod);

    function EmailPageMethod() {
        var name = $get('name').value;
        var email = $get('email').value;
        var message = $get('message').value;

        // call pagemethod sending form data
        PageMethods.SendEmail(name, email, message, SendEmailCallback, ErrorCallback);
    }

    function SendEmailCallback(resultString) {
        alert(resultString);
    }

    function ErrorCallback(error) {
        alert(error.get_message());
    }

</script> 
```

似乎每次都会调用 errorcallback 函数，但 error.get_message 只是告诉我 pagemethod 失败。

我试过了

```
function SendEmailCallback(resultString) {
        alert(resultString);
    } 
```

但它只是说[对象对象]。

我也试过

```
function SendEmailCallback(resultString) {
        alert(String(resultString));
    } 
```

但它仍然显示 [object Object]。

有没有办法可以打印整个异常以查看发生了什么？我对页面方法很陌生，所以我在这里碰壁了。

谢谢。

更新 - 当我按下提交时出现此错误。

我收到了这个错误：

```
POST 
http://localhost:1427/PortfolioWebsite/ContactForm.aspx/SendEmail 404 (Not Found) (program):5
Sys.Net.XMLHttpExecutor.executeRequest (program):5
Sys.Net._WebRequestManager.executeRequest (program):5
Sys.Net.WebRequest.invoke (program):5
Sys.Net.WebServiceProxy.invoke (program):5
Sys.Net.WebServiceProxy._invoke (program):5
PageMethods.SendEmail (program):16
PageMethods.SendEmail (program):34
EmailPageMethod (program):11
b 
```

是不是找不到实际的页面方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:52:39.327

我通过将联系表单移动到根目录来修复它，但我仍然不明白我应该在哪里指定路径。感觉它是自动的，它只是想在根目录中查找。

# jersey - 在 Java 中配置 Swagger 时缺少依赖项

> ID：14819414
> 
> 赞同：2
> 
> 时间：2013-02-11T19:28:46.043
> 
> 标签：jersey, jax-rs, swagger

我正在尝试使用 Swagger 启动我们的 API 服务器。我们根本不使用 web.xml，而是用 Java 配置所有内容。我正在尝试按照[Swagger JAX-RS 教程](https://github.com/wordnik/swagger-core/wiki/java-jax-rs)中的说明进行操作，但仍然遇到问题。我正在使用 Git 的最新代码（本地安装的 1.2.1-SNAPSHOT）

```
final Server jetty = injector.getInstance(Server.class);

ServletContextHandler sch = injector.getInstance(ServletContextHandler.class);
sch.setInitParameter("swagger.api.basepath", "http://localhost:8090");
sch.setInitParameter("api.version", "0.1");

JuiceContainer unprotected = new JuiceContainer(injector, ApiListingResource.class);
sch.addFilter(new FilterHolder(unprotected), "/*", null);
sch.addServlet(DefaultServlet.class, "/"); 
```

ApiListingResource 正是教程中建议的方式：

```
@Path("/resources.json")
@Api("/resources")
@Produces(MediaType.APPLICATION_JSON)
public class ApiListingResource extends JavaApiListing { } 
```

不幸的是，在启动服务器时出现此错误：

```
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Missing dependency for method public javax.ws.rs.core.Response com.wordnik.swagger.jaxrs.JavaApiListing.getAllApis(javax.servlet.ServletConfig,javax.ws.rs.core.Application,javax.ws.rs.core.HttpHeaders,javax.ws.rs.core.UriInfo) at parameter at index 0
  SEVERE: Method, public javax.ws.rs.core.Response com.wordnik.swagger.jaxrs.JavaApiListing.getAllApis(javax.servlet.ServletConfig,javax.ws.rs.core.Application,javax.ws.rs.core.HttpHeaders,javax.ws.rs.core.UriInfo), annotated with GET of resource, class com.wordnik.swagger.jaxrs.JavaApiListing, is not recognized as valid resource method. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:33:26.573

我自己在 Swagger 中解决了这个问题；现在有一个[拉取请求](https://github.com/wordnik/swagger-core/pull/151)打开。

# dynamics-crm-2011 - CRM中的错误？服务预约表单的 javascript 导致表单保存错误

> ID：14819416
> 
> 赞同：2
> 
> 时间：2013-02-11T19:28:56.327
> 
> 标签：dynamics-crm-2011

我缩小了这个范围......它看起来像服务预约表格上的一个错误，但想在这里问一下，以防它对其他人有意义......在香草CRM中重新创建，添加了一个javascript文件，并将javascript函数附加到服务的onchange。

要重新创建自己，请将此 javascript 添加到 web 资源，然后将该 web 资源附加到 serviceappointment 表单和服务的 onchange。如果您还没有 2 个服务，请向您的组织添加 2 个服务。创建一个新的服务预约。选择服务 A。然后选择服务 B。保存表单。你会看到错误。

支持所有的javascript，支持自定义表单......一定是CRM的错误，对吧？

哦，关键是，这段代码在更新汇总 11 中有效。在汇总 12 中无效。（我通常坚信“[选择没有被破坏](http://www.codinghorror.com/blog/2008/03/the-first-rule-of-programming-its-always-your-fault.html)”，正如他们所说，但这看起来确实像一个错误。）

```
function OnChange_Service() {
var serviceId;
serviceId = Xrm.Page.getAttribute("serviceid").getValue();

var targetFieldName = 'customers';
var targetFieldEntityType = 'Account';
var targetFieldEntityId = '610BEA47-7B74-E211-B3EB-78E3B511A6C0'; // use a known accountId

Xrm.Page.getAttribute(targetFieldName).setValue(null);

if (serviceId != null) {
    var arrValue;
    arrValue = new Array();
    var targetField = Xrm.Page.getAttribute(targetFieldName);
    if (targetField != null) {
        arrValue[0] = new Object();
        arrValue[0].entityType = targetFieldEntityType;
        arrValue[0].id = targetFieldEntityId;
        arrValue[0].name = "not its real name, but who cares";
        targetField.setValue(arrValue);
    }
} 
} 
```

编辑：异常/错误详细信息：

例外是（来自跟踪）：

> System.FormatException：Microsoft Dynamics CRM 遇到错误。管理员或支持的参考号：#1471AD8A：System.FormatException：Guid 应包含 32 位数字和 4 个破折号 (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)。在 System.Guid.GuidResult.SetFailure（ParseFailureKind 失败，字符串 failureMessageID，对象 failureMessageFormatArgument，字符串 failureArgumentName，异常 innerException）在 System.Guid.TryParseGuidWithNoStyle（字符串 guidString，GuidResult& 结果）在 System.Guid.TryParseGuid（字符串 g，GuidStyles 标志， GuidResult& 结果）在 Microsoft.Crm.Application.Platform.AttributeCollection 的 System.Guid..ctor(String g) 在 Microsoft.Crm.Application.Platform.AttributeCollection.CreateEnityReferenceFromLookupPropertyValue(String name, Object value, IOrganizationContext context) 在 Microsoft.Crm.Application.Platform.AttributeCollection。

根据屏幕截图，向用户显示的错误嵌入在表单本身中......我以前从未见过这样的： ![嵌入表单的错误](../Images/f9cdb26446368848a2ae054959c66205.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:44:10.383

这是一个公认的错误。没有正式的解决时间表。微软正在优先考虑它。他们用 UR12 打破了 UR11 中的现有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:18:06.340

尝试将 guid 包装在 {} 中。

例如：`var targetFieldEntityId = '{610BEA47-7B74-E211-B3EB-78E3B511A6C0}';`

这有点猜测，我的依​​据是，如果您检索查找的 id，则 guid 用 {} 包装。

```
Xrm.Page.getAttribute("new_person").getValue()[0] 
{
    id : "{EB661CDD-8E59-E211-8BC6-4C3A83DBD74D}",
    type : "2",
    name : "James Wood",
    onclick : "openlui(new Sys.UI.DomEvent(event))",
    displayClass : "ms-crm-Lookup-Item",
    data : null,
    typename : "contact",
    category : 0,
    ambiguousRecordsXml : null,
    selected : null
    ...
} 
```

# css - 引导程序。div 100% 其父元素的高度

> ID：14819425
> 
> 赞同：24
> 
> 时间：2013-02-11T19:29:19.320
> 
> 标签：css, twitter-bootstrap

使用引导程序，我很难创建 div 100%`height`的父元素。

我有`.row-fluid`div 和两个`.span`div。第一个`.span9`有更多的内容，然后第二个`.span3`有导航和下面的空白。我想用颜色填充那个空白空间。我希望一直延伸到内容`.span9`到达的地方。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-11T20:05:20.517

这是一个 CSS 解决方案，基于为每列添加一个大填充和一个同样大的负边距，然后将整行包装在一个隐藏溢出的类中。它也适用于跨浏览器

**CSS**

```
.col{
    margin-bottom: -99999px;
    padding-bottom: 99999px;
    background-color:#ffc;
}

.col-wrap{  
    overflow: hidden;   
} 
```

**HTML**

```
<div class="container">
    <div class="row-fluid col-wrap">
        <div class="span9 col">

            ... span content ...

        </div><!-- end span 9-->

        <div class="span3 col">

            ... span content ...

        </div><!-- end span 3-->
    </div><!-- end row-fluid -->
</div> 
```

[您可以在http://jsfiddle.net/panchroma/y3BhT/](http://jsfiddle.net/panchroma/y3BhT/)上看到它的工作原理

# c# - 如何在 MessageBox.show 中创建超链接？

> ID：14819426
> 
> 赞同：23
> 
> 时间：2013-02-11T19:29:23.797
> 
> 标签：c#, winforms, hyperlink, messagebox

我曾尝试以这种方式在 MessageBox 中创建超链接：

```
MessageBox.Show(
    "test message",
    "caption",
    MessageBoxButtons.YesNo,
    MessageBoxIcon.Information,
    MessageBoxDefaultButton.Button1,
    0,
    **"http://google.com"**,
    "Keyword"
); 
```

[注意：上面的代码实际上是在另一个问题https://stackoverflow.com/a/1833877/2046417](https://stackoverflow.com/a/1833877/2046417)中“选择作为答案” ，但我不知道为什么它对我不起作用。我在**关键字处收到错误** *`(`*`Error 3 The * or -> operator must be applied to a pointer C:\Users\kiriti\Documents\Visual Studio 2010\Projects\TailorApplication_3\TailorApplication_3\Form1.cs 359 140 TailorApplication_3`*`)`*

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-11T20:13:18.587

我尝试使用代码并找到解决我自己问题的方法。

```
if (MessageBox.Show(
        "test", "Visit", MessageBoxButtons.YesNo, MessageBoxIcon.Asterisk
    ) == DialogResult.Yes)
{
    System.Diagnostics.Process.Start("http://www.google.com");
} 
```

效果很好！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:44:52.293

给出的示例适用于 VB，如果您从 URL 中删除 **，它将显示消息框并在单击帮助按钮时将您带到该 URL。

有关此调用的参数的更多信息，请参阅：

[http://msdn.microsoft.com/en-us/library/ww6cfk80.aspx](http://msdn.microsoft.com/en-us/library/ww6cfk80.aspx)

# sql - 与人加入时需要选择部门最新注册

> ID：14819427
> 
> 赞同：0
> 
> 时间：2013-02-11T19:29:24.527
> 
> 标签：sql, sql-server

**人：**

```
Id  Name
1   Anton
2   Ib
3   Knud
4   Hans 
```

**登记：**

```
Id  PersonId    Status  DateTime        Department
5   1           1       11-1-2013 10:00 1
6   1           0       10-1-2013 09:00 1
7   1           2       10-1-2013 14:05 1
8   1           2       09-1-2013 09:00 1
9   2           2       09-1-2013 09:00 2
10  3           2       09-1-2013 09:00 3
11  4           2       10-1-2013 17:00 1 
```

我需要为部门 1 选择当天 (10-1-2013) 的最新注册（按人）

**预期输出：**

```
Name    R.Id    P.Id    Status  DateTime        Department

Anton   7       1       2       10-1-2013 14:05 1
Hans    11      4       2       10-1-2013 17:00 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:31:23.913

我想你只是想要这个：

```
select top 1 p.name, r.id, p.id, r.status, r.datetime, r.department
from registration r join
     person p
     on r.personid = p.personid
where department = 1 and cast(daTetime as date) = '10-1-2013'
order by datetime desc 
```

最新的按部门注册，而不是按人。这只是使用一个`where`子句按天和部门过滤，按`datetime`列排序并选择第一个。

要获得所有这些：

```
select p.name, r.id, p.id, r.status, r.datetime, r.department
from (select r.*, row_number() over (partition by person order by datetime desc) as seqnum
      from registration r
      where department = 1 and cast(daTetime as date) = '10-1-2013'
     ) r join
     person p
     on r.personid = p.personid
where seqnum = 1
order by datetime desc 
```

# c# - 如何在 LINQ 中的复杂 group by 和 join 查询中使用 having 子句

> ID：14819428
> 
> 赞同：1
> 
> 时间：2013-02-11T19:29:30.397
> 
> 标签：c#, sql, linq, group-by, having

我在这里查看了很多问题和答案，但似乎找不到我需要的东西。我有以下 sql，我在进入 LINQ 语句时遇到了真正的麻烦。具体问题是，对于其中一个字段，我在 select 中都使用了 CASE 语句，并且具有 HAVING 子句的一部分。我需要这样做的各种原因，但我似乎无法在 LINQ 中重现它。

这是sql：

```
select Count (DetailID) as MonthCount , StoreID, DetailID, SUM(Amount ) as AnnualAmount, PAYear, MIN(CASE when ExportFlag = 'SUCCESS' then 1 when ExportFlag is NULL or  ExportFlag = '' then 0 else - 1 end) as ExpFlag
from Input_Financials
inner join DestinationDetail cdd on cdd .ID = Financials.DetailID
group by StoreID, DetailID, PAYear
Having MIN (CASE when ExportFlag = 'SUCCESS' then 1 when ExportFlag is NULL then 0 else -1 end ) = 0
and Count (*) >= 1
order by PAYear 
```

这是我最好的尝试 linq 语句，但您会注意到我没有与具有聚合 ExportFlag 值的等效子句（这非常重要）

```
 var query =
               from inf in inputActs
               join cgrdets in cgrDetails on inf.DestinationDetailID equals cgrdets.ID
               let export = (inf.ExportFlag == "SUCCESS" ? 2:
                             inf.ExportFlag == "ERROR" ? 1:
                             inf.ExportFlag == null ? 0: 99)
               group inf by new {export, inf.StoreID, inf.DestinationDetailID,inf.PAYr } into g
               where g.Key.export == 0 
               select new { MonthCount = g.Count(), g.Key.StoreID, g.Key.PAYr, Amount = g.Sum(inf=>inf.Amount) }; 
```

顺便说一句 - 请忽略您在这两者之间的字段命名时可能会发现的一些细微差异 - 这可能是因为我为了这个问题而快速重命名了一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:36:49.763

看起来这就是你想要的：

```
where g.All(item => item.ExportFlag == "SUCCESS" || item.ExportFlag == null) 
```

# macos - 在没有 Mac 开发人员程序的情况下签署 Mac 应用程序

> ID：14819429
> 
> 赞同：5
> 
> 时间：2013-02-11T19:29:33.887
> 
> 标签：macos, ssl, certificate, signing

是否可以使用 Comodo 或 Thawte 的代码签名证书签署应用程序并通过 Gatekeeper，或者我需要为此目的拥有 Mac 开发者订阅？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:04:56.253

您必须是 Mac 开发人员计划的成员并使用 Apple 的证书才能通过 GateKeeper。[这是他们开发人员库](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/DistributingApplicationsOutside/DistributingApplicationsOutside.html#//apple_ref/doc/uid/TP40011201-CH12-SW2)中的相关部分：

> 只有 Mac 开发者计划成员才有资格申请开发者 ID 证书并使用它们签署应用程序或安装程序包。
> 
> 当您注册 Mac 开发者计划时，您将成为 Apple 的主要联系人并被要求签署法律协议。无论您是以个人身份还是公司身份注册，您都是团队代理并负责创建 Developer ID 证书。如果您注册为公司，您可以将个人添加到您的团队，但只有团队代理有权创建 Developer ID 证书。开发者 ID 证书归团队而非个人所有。
> 
> 要注册 Mac 开发者计划，请访问 Apple 开发者计划注册，网络助理会指导您完成注册的整个过程。如果您尚未注册为 Apple 开发者，您可以在注册 Mac 开发者计划时进行注册。当系统提示您选择程序时，请选择 Mac Developer Program。

# php - 等价于 ereg() 调用

> ID：14819431
> 
> 赞同：1
> 
> 时间：2013-02-11T19:29:43.027
> 
> 标签：php, preg-match, ereg

我的服务器现在在 php 5.3 上运行，我需要将此调用替换为 ereg：

```
if (ereg("/$", $pref) === FALSE) 
{
  $pref .= '/';
} 
```

我试过这个，除其他外没有任何成功：

```
if (preg_match('~/$~', $pref) === FALSE) 
```

这导致[http://example.com/index.phpwww/browse](http://example.com/index.phpwww/browse) 如果有什么不同，这是我继承的 CodeIgniter 1.6.1 应用程序。

我试过这个：

```
if (ereg("/$", $pref) === 0) 
```

正如@PeterM 建议的那样，现在去[http://example.com](http://example.com)将我带到[http://example.com/index.php/www/browse](http://example.com/index.php/www/browse)，但这给了我“您提交的 URI 包含不允许的字符。 " 这是一个有效的 CodeIgniter URL 吗？也许我在代码的其他地方搞砸了？

我将 codeigniter/application/config/config.php 的第 126 行更改为：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

我仍然收到消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:31:35.947

对比一下`0`，不是`false`。`preg_match`返回匹配数。它`false`仅在错误时返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:33:54.223

```
if(substr($pref, -1) !== '/'){

} 
```

或者：

```
if($pref[strlen($pref)-1] !== '/' ){
 //not found
} 
```

# mysql - 存储与字段相关的脚注

> ID：14819432
> 
> 赞同：0
> 
> 时间：2013-02-11T19:29:46.543
> 
> 标签：mysql, normalization

采取以下（简单的）股票交易交易表：

```
Trade date | Shares | Price | Commission | Total amt

2/11/2013  | 100    | $10   | $10        | $1000 
```

等等

假设我想在所有这些字段上存储类似脚注的注释。这种存储有什么最佳实践吗？

我在想两个选择：

1) 在 transactions 表中添加额外的字段——每个主值一个——它将以纯文本形式存储评论 id，可能用竖线 (|) 分隔，然后在运行时解析它们。此解决方案不允许连接，但会以更正常的方式保留事务列表。

2) 将表从事务更改为更像名称-值存储的东西，然后我可以将脚注放入相关表中，并在它们之间使用通常的查找表。此解决方案允许连接，但生成结果可能很慢，而且人类可读性不强。顺便说一句，名称-值表看起来更像这样：

```
Item | Value | FootnoteId

Date|2/11/2013|22

Shares|100|0

Price|$10|24 
```

等等

感谢您的任何提示。

# ruby - 更新 Ruby 出现问题

> ID：14819434
> 
> 赞同：-2
> 
> 时间：2013-02-11T19:29:51.753
> 
> 标签：ruby, rvm

我遇到了一个问题，当我在 Mac OS X 中打开终端并输入`ruby -v`时，我得到：

```
➜  ~  ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0] 
```

我使用 RVM 安装了更新版本的 Ruby，当我要求它列出已安装的 Ruby 版本时，我得到：

```
➜  ~  rvm list

rvm rubies

=* ruby-1.9.3-p286 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

因此，我只需键入以下内容即可使用 ruby​​-1.9.3-p286：

```
➜  ~  rvm use ruby-1.9.3-p286
Using /Users/patrickestabrook/.rvm/gems/ruby-1.9.3-p286
➜  ~  ruby -v
ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-darwin12.2.0] 
```

问题是每当我注销并再次打开终端时，它会将我的 Ruby 版本设置回 ruby​​ 1.8.7。我怎样才能让它留在 ruby​​-1.9.3-p286 上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:32:21.657

您所拥有的是`system`默认版本，因此遵循它将设置默认值：

```
rvm --default use ruby-1.9.3-p286 
```

`--default`将设置您的默认版本。当你做`rvm list`红宝石时，`*`表明你的`default`。

如果你不明白。尝试`rvm default`

# javascript - scrollTo() 方法有问题

> ID：14819438
> 
> 赞同：0
> 
> 时间：2013-02-11T19:29:59.877
> 
> 标签：javascript, html

我想在 div 中用鼠标滚动图像，但无法找到正确的 X 和 Y 坐标值来移动图像。下面是我的示例代码..我可以在***没有***DIV 的情况下滚动图像。如果我在这里做错了什么，有人可以帮忙。

```
<html>
<head>
<script type="text/javascript">

document.onmousedown = function(){

var e=arguments[0]||event;
var x=getWindowSize()[2],y=getWindowSize()[3],mx=e.clientX,my=e.clientY;
document.onmousemove=function(){
var e=arguments[0]||event;
window.scrollTo(x+(mx-e.clientX), y+(my-e.clientY));

return false;
}
document.onmouseup=function(){
document.onmousemove=null;
}
return false;
}

function getWindowSize(){
if (window.innerHeight) return [window.innerWidth-10,window.innerHeight-10,window.pageXOffset,window.pageYOffset];
else if (document.documentElement.clientHeight) return [document.documentElement.clientWidth-10,document.documentElement.clientHeight-10,document.documentElement.scrollLeft,document.documentElement.scrollTop];
return [document.body.clientWidth,document.body.clientHeight,document.body.scrollLeft,document.body.scrollTop];
}

</script> 

</head>
<body style="overflow:hidden">

<div id="mydiv" style="overflow:auto;position:absolute; height:300px;">
 <img src="img1.png" />

 </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:30:02.787

使用带有掩码的 img 来估计滑动的正确百分比。

html:

```
<div id="div">
  <img id="img" src="http://www.fastcodesign.com/multisite_files/codesign/imagecache/960/article_feature/1280-army-of-luck-013.jpg" />
  <div id="msk"></div>
</div> 
```

css

```
#div {
  position:absolute;
  overflow:hidden;
  height:300px;
  width:500px;
  border:1px solid blue;
  cursor:move;
  position:relative;
}
#img {
  position:absolute;
}
#msk {
  position:absolute;
  width:100%;
  height:100%;
  background-color:rgba(255,255,0,.5);
  z-index:2;
} 
```

JS：

```
var img = document.getElementById('img');
var msk = document.getElementById('msk');
document.onmousedown = function(e){
  document.onmousemove = function(e){
  if(e.target != msk) return;
  var x = e.clientX;
  var y = e.clientY;
  var mw = msk.offsetWidth;
  var mh = msk.offsetHeight;
  var iw = img.offsetWidth;
  var ih = img.offsetHeight;
  // your formula goes here
  img.style.left = Math.max(-(x/mw)*(iw),-mw) + "px";
  img.style.top = Math.max(-(y/mh)*(ih),-mh) + "px";
}
}
document.onmouseup = function(e){
      if(e.target != msk) return;
  document.onmousemove = $.noop;
} 
```

[http://codepen.io/anon/pen/vlKJq](http://codepen.io/anon/pen/vlKJq)

# knockout.js - 如何在淘汰赛js中对dependentObservable PagedList数据进行排序

> ID：14819439
> 
> 赞同：1
> 
> 时间：2013-02-11T19:30:06.357
> 
> 标签：knockout.js

我创建了一个带有分页选项的页面。代码看起来像：[http ://blog.ryanvanderpol.com/index.php/2012/07/using-knockoutjs-to-create-an-edit-in-place-data-grid/](http://blog.ryanvanderpol.com/index.php/2012/07/using-knockoutjs-to-create-an-edit-in-place-data-grid/)

现在无法在淘汰赛 js 中向dependentObservable PagedList 数据添加排序

因为 PagedList 没有 Sort() 属性 ..

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:15:53.397

您可以更改他的视图模型以使用计算的而不是可观察的数组吗？

这是一个例子

```
self.list = ko.observableArray(initialData);

self.sortProperty = ko.observable('propertyNameInRowObject');

self.sortedList = ko.computed( function() {
    var sorted = self.list.sort( self.sortFn );    
    return sorted;
};

self.sortFn = function(a, b) {
    if ( a[self.sortProperty()] > b[self.sortProperty()] ) {
        return 1
    }
    else if ( a[self.sortProperty()] < b[self.sortProperty()] ) {
        return -1
    }
    else { 
        return 0
    }
}

self.onColumnClicked = function(e) {
    var colName = e.target.Name; // probably something like this...
    if ( colName === 'xyz' ) {
        self.sortProperty('xyzProperty');
    }
} 
```

抱歉，我的 javascript 有点生疏了，我大部分时间都在使用 coffeescript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:14:03.677

您可以替换如下内容：

```
self.someArray = ko.dependentObservable(function() {
    return [someDependency()];
}); 
```

有了这个：

```
self.someArray = ko.observableArray();
ko.dependentObservable(function() {
    self.someArray([someDependency()]);
});

// now you can call sort on someArray
var sortedArray = self.someArray.sort(); 
```

您可以使用dependentObserable/computed 来计算其他 observable 的新值而不返回任何值。

# sql - where 子句中的条件“和”取决于现有值？

> ID：14819443
> 
> 赞同：2
> 
> 时间：2013-02-11T19:30:14.997
> 
> 标签：sql, sql-server, sql-server-2008-r2, where-clause

谁能知道我是否可以根据现有值在where子句中使用“条件'和'”？？我有一个这样的查询：

```
@declare idProduct int = 1,
@declare idProducType int = null

select 
    tbl.idProduct, tbl.idProductType, tbl.ProductName, tbl.ProductPrice 
from MyTable tbl 
where tbl.idProduct = 1 
    <IF idProductType is not null>
        and tbl.idProductType = SOMEVALUE
    <ELSE>
        do nothing
    <ENDIF> 
```

我需要始终从此查询中获取数据，而不是在条件为假时获取空值。我怎么能在 SQL Server 2008 中这样做？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:33:23.217

我认为这就是你想要的：

```
select 
tbl.idProduct, tbl.idProductType, tbl.ProductName, tbl.ProductPrice 
from MyTable tbl 
where tbl.idProduct = 1 and (tbl.idProductType = @idProducType or @idProducType is null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:35:05.467

```
....
where tbl.idProduct = 1 
  and (CASE WHEN idProductType is not null and tbl.idProductType = SOMEVALUE Then <something> END) = <something>
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:33:09.650

这应该适合你：

```
@declare idProduct int = 1,
@declare idProducType int = null

SELECT
    tbl.idProduct, tbl.idProductType, tbl.ProductName, tbl.ProductPrice 
FROM MyTable tbl 
WHERE tbl.idProduct = 1 
    AND (CASE WHEN idProductType is not null THEN tbl.idProductType = SOMEVALUE
    END) 
```

# php - 如何将谷歌群组嵌入网页

> ID：14819444
> 
> 赞同：-1
> 
> 时间：2013-02-11T19:30:18.587
> 
> 标签：php, javascript, google-groups

我创建了一个名为“bessah”的 google 组，我想将它嵌入到我的网页中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:36:39.287

使用 HTML IFRAME 提供了一种通过讨论论坛和嵌入 Google 群组来自定义您自己的站点的简便方法。
向您的站点添加论坛的最简单方法是创建一个指向 Google Group 的 IFRAME。

[https://sites.google.com/site/embeddingdiscussions/using-iframes](https://sites.google.com/site/embeddingdiscussions/using-iframes)

# playframework - 允许跨域共享

> ID：14819445
> 
> 赞同：3
> 
> 时间：2013-02-11T19:30:28.657
> 
> 标签：playframework, playframework-2.1

我想检查如何在 Playframework 2.1 (Java) 中启用跨域域共享。我没有看到任何有关如何执行此操作的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-16T22:43:48.460

使用 Scala 语言，一个漂亮而简单的 PlayFramework 解决方案可以使用以下 ActionBuilder

```
import play.api.mvc._
import scala.concurrent.Future
import scala.concurrent.ExecutionContext.Implicits.global

// An Actionbuilder for CORS - Cross Origin Resource Sharing  
object CorsAction extends ActionBuilder[Request] {

  def invokeBlock[A](request: Request[A], block: (Request[A]) ⇒ Future[SimpleResult]): Future[SimpleResult] = {
    block(request).map { result =>
      request.headers.get("Origin") match {
        case Some(o) => result.withHeaders("Access-Control-Allow-Origin" -> o)
        case None => result
      }
    }
  }
} 
```

ActionBuilder 覆盖 invokeBlock 方法，目的是将应用程序控制器操作（由 Play >= 2.1 中的 Future 对象包装）创建的结果映射到具有附加“Access-Control-Allow-Origin”标头字段的相同结果，如果该请求带有“Origin”标头字段。

上面的动作生成器可以简单地使用如下：

```
object MyController extends Controller {

  def myAction = CorsAction {
     Ok("whatever HTML or JSON you want")
     // it will be certainly processed by your browser
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:01:38.213

不知道这如何转化为 2.x，但在 1.2.5 中我所做的就是这个。如果您有非标准标头，则 Access-Control-Allow-Headers 是可选的。您可以更改 Allow-Origin 的 * 以仅匹配您要允许的域。

```
@Before
static void CORS() {
    if(request.headers.containsKey("origin")){
        response.headers.put("Access-Control-Allow-Origin", new Header("Access-Control-Allow-Origin", "*"));
        response.headers.put("Access-Control-Allow-Headers", new Header("Access-Control-Allow-Headers", "my-custom-header, my-second-custom-header"));
    }
} 
```

如果您有非标准方法（GET/POST）或使用自定义标头，大多数用户代理都会进行预检 OPTIONS 调用，所以我要做的就是将其添加到我的路由文件中：

```
#This catches the preflight CORS calls
OPTIONS /{path}                                 Application.options 
```

这在我的控制器中：

```
/**
 * Cross Origin Request Sharing calls are going to have a pre-flight option call because we use the "non simple headers"
 * This method catches those, (headers handling is done in the CORS() method)
 */
public static void options() {} 
```

# java - 使用 Swing 从本地目录获取图像？

> ID：14819454
> 
> 赞同：2
> 
> 时间：2013-02-11T19:31:08.867
> 
> 标签：java, swing, embedded-resource

我试图将本地目录中的图像加载到 ImageIcon(URL) 中。此图像文件从 .jar 文件访问。jar 文件名为 swingex.jar。项目结构如

```
F:/>SwingExample
         |
         |___src
         |
         |___build.xml
         |
         |___lib
               |
               |___swingsex.jar(generated through build.xml file)
         |
         |__resource
                   |
                   |_____images
                            |
                            |___logo1.png 
```

如何读取 logo1.png 文件？

我想喜欢这个

1.  `file:///f://resources//images//processedimages//`返回空

2.  `ClassLoader.getSystemResource("resources/images/processedimages/");`返回空

**更新：-** 我仍然有问题。因为我在 SwingExample 上创建了 jar 文件并排除了资源/图像目录。运行 jar 文件时，它无法识别资源/图像文件夹。但是我通过 eclipse 运行了 SwingExample 项目，它工作正常。代码是

> ```
> File directory = new File (".");
> Image img = null;
> String path="";
> URL url=null;
> try {
>   path=directory.getCanonicalPath()+"/resources/images/logo1.png";
>                img = ImageIO.read(new File(getDefaultImageUploadPath());
> 
> } catch (IOException e) {
>   // TODO Auto-generated catch block
>   e.printStackTrace();
> }
>         return new ImageIcon(img); 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:38:54.857

```
URL imgURL =
   new File( "F:/SwingExample/resource/images/logo1.png" ).toURI().toURL(); 
```

但我建议将资源放入 src。

如果资源在 src 中，您可以通过类加载器轻松访问它们。

```
getClassLoader().getResourceAsStream( "resource/images/logo1.png" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:49:58.520

根据应用程序的执行上下文，您可以使用相对路径

```
URL imgURL = new File( "resource/images/logo1.png" ).toURI().toURL(); 
```

或者

```
URL imgURL = new File( "../resource/images/logo1.png" ).toURI().toURL(); 
```

可能有效，但 Aubin 是正确的，将图像嵌入到应用程序中并通过类加载器上下文访问会更容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T16:06:45.630

对于 java 项目，默认目录总是从 src 开始。只有当您以下列方式组织资源时，您的代码才能正常工作...... :)

```
SwingExample
         |
         |___src
         |    |
         |    |_____resource
         |          |
         |          |_____images
         |                   |
         |                   |___logo1.png
         |___build.xml
         |
         |___lib
               |
               |___swingsex.jar(generated through build.xml file) 
```

这次`getClassLoader().getResourceAsStream( "/resource/images/logo1.png" );`不会返回null。

# javascript - 不工作

> ID：14819455
> 
> 赞同：10
> 
> 时间：2013-02-11T19:31:09.637
> 
> 标签：javascript, facebook, registration, facebook-social-plugins, xfbml

我正在尝试在网站上实现 Facebook 注册。如果没有 onvalidate 参数，一切都会按预期工作，但是当包含它时，一切似乎都崩溃了（没有抛出错误，表单什么也不做）。

这是我的代码：

```
<center>
    <fb:registration redirect-uri="http://im.localhost/register"
    fields='[{"name":"name"},{"name":"username","description":"Website Username","type":"text"},{"name":"email"},{"name":"password","view":"not_prefilled"},{"name":"captcha","view":"not_prefilled"},{"name":"tos","type":"checkbox","description":"I accept the Terms of Service"}]' onvalidate='validate'>
    </fb:registration>
</center>
<script> 
function validate(form) {
    console.log('Validation');
    errors = {};
    errors.tos = "You must accept the terms of service";
    return errors;
}
</script>
<!-- at end of page: -->
<script>
    // ...
    FB.init({
        appId: '<?php echo IM_Facebook::getAppIDStatically(); ?>',
        channelUrl: '<?php echo $this->serverUrl().$this->baseUrl('/xsrd.html'); ?>',
        status: true,
        cookie: true,
        xfbml: true
    });
    // ...
</script> 
```

console.log 函数永远不会在点击表单的提交按钮时被调用。（但是，否则它的行为几乎正常 - 当我单击确认时，弹出“您已使用 abc 注册”出现并消失 - 但没有其他任何反应。

如果我在没有此参数的情况下将自定义字段（用户名）留空，Facebook 会要求我填写它。如果我将此参数留空，则不会调用验证函数并且不会显示任何错误。无论哪种方式，应该始终根据此表单显示的 TOS 错误永远不会出现。

类似问题的问题涉及网站 URL 与应用程序的 URL 不匹配。在这种情况下，情况并非如此。

为了澄清域，我使用的是无法通过 Internet 访问的域“im.localhost”。我不认为这是一个问题，因为没有 onvalidate 注册表工作，并且我已经实施的登录系统工作。但是，使用 onvalidate 后，注册表将完全失效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T03:06:52.117

```
 onvalidate="validate()" 
```

onvalidate="validate" 你只是在调用一个字符串......

你需要括号来调用一个函数

# c++ - 带有默认 sax 处理程序和自定义错误处理程序的 libxml2

> ID：14819458
> 
> 赞同：2
> 
> 时间：2013-02-11T19:31:27.387
> 
> 标签：c++, libxml2, custom-error-handling

我想通过以下方式在 C++ 程序中使用简单的 libxml2 解析器：

1.  默认 sax 处理程序很好（实际上我想避免自己编写。我知道我可以使用自定义 sax 处理程序做我想做的事）
2.  解析器应该嵌入可以任意实例化（可能是多线程）的 C++ 类中，libxml2 解析器上下文作为成员 var
3.  还有其他组件也在使用 libxml2，但我无法控制（我无法准确说出它们的作用以及它们如何使用 libxml2）
4.  在 C++ 类中，我想使用一个自定义错误处理程序，它不仅打印到 stderr，而且我想收集错误并抛出异常

例子：

```
class XmlParser
{
  public:
    XmlDoc * parseText(const char * txt, ...);

  private:
    xmlParserCtxtPtr ctx;

    static void xmlErrorHandler(void * userData, xmlErrorPtr err);
} 
```

这是不起作用的（根据我的测试和理解）：

*   使用 xmlSetStructuredErrorFunc() 或 xmlSetGenericErrorFunc() 并将当前 C++ 实例设置为用户数据，因为这些函数只是设置了一个全局变量（不是线程安全的）
*   使用 xmlNewParserCtxt() 并将 ctx->sax->serror 设置为常规 C++ 方法 - 错误处理程序必须是静态的
*   与以前相同，但使用静态类方法-实际上确实有效，但同时我想设置 ctx->user_data （设置为当前 C++ 实例的“this”）-这会使解析器崩溃，看起来好像在里面libxml2 ctx->user_data 的函数通过应该只有 ctx 的函数传递......但是这种情况始终如一地发生，即看起来更像是一个特性而不是一个错误:-)

现在，有人知道如何让它工作吗？

很多谢谢！

# php - 从 shell 或代码设置 ACL 权限？CAKEPHP

> ID：14819461
> 
> 赞同：0
> 
> 时间：2013-02-11T19:31:59.720
> 
> 标签：php, cakephp, acl, cakephp-2.3

我是 cake 新手，目前正在尝试从 CakePHP实现[Simple Acl Controlled Application Tutorial 。](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html)

我已经达到了[设置权限部分](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html#setting-up-permissions)，但我不确定我是如何实现权限的，我有三个组（管理员、响应者和志愿者）。

我在[视频](https://www.youtube.com/watch?v=BgcYZXwvO-k)和其他教程中注意到人们正在使用控制器来实现访问控制列表，但我认为这仅适用于蛋糕 1.3。

如果您能帮助我了解我应该如何实现 ACL（shell 或控制器）并向我展示一些示例，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:58:58.047

[*ACL shell*](http://book.cakephp.org/2.0/en/console-and-shells/acl-shell.html)将允许您处理与 ACL 相关的所有内容，尽管在您掌握它之前通常需要熟悉 ACL。就个人而言，我更喜欢使用 ACL 插件将我的 ACL 管理嵌入到我的应用程序中。这样一来，Administrators ARO 中的人员（或更多，如果您愿意）都可以在应用程序本身内基于 Web 处理所有内容。

我一直在我的一些项目中使用[*Alaxos ACL 插件*](http://www.alaxos.ch/blaxos/pages/view/plugin_acl_2.0)，它就像一个魅力。有关如何设置它的所有文档也都在网站上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T05:59:04.273

采用

```
bin/cake acl_extras aco_sync 
```

然后使用

```
bin/cake acl grant Groups.3 controllers/Posts/index 
```

这里 3 是组 id

# .net - 在 ADO.NET 中使用连接层时插入和删除操作不起作用

> ID：14819468
> 
> 赞同：0
> 
> 时间：2013-02-11T19:32:25.203
> 
> 标签：.net, ado.net

我编写了一个简单的类，可以从 mssql 紧凑型数据库中选择、插入和删除。我在 ADO.NET 中使用了连接层。但不幸的是，代码的选择块有效，但插入和删除代码块并没有像我预期的那样工作。当我运行插入或删除操作时，我看不到数据库中有任何变化。但是代码运行成功。这几天我一直在想办法。这是下面的代码。

```
class Logic
    {
        SqlCeConnection con = null;

        //code the constructor of the class
        public Logic() { 
            //now we are going to collect the database configuration string
            string connectionString = ConfigurationManager.ConnectionStrings["ConnectedCrud.Properties.Settings.DatabaseConnectionString"].ConnectionString;

            con = new SqlCeConnection(connectionString);

            Console.WriteLine(con.Database);
        }

        //This method is going to delete from the database
        public void deleteValue(int r){
            int k = 0;
            string sql = string.Format("delete from Details where id = {0}",r);
            using (SqlCeCommand command = new SqlCeCommand(sql, this.con)){
                try
                {
                    //open the connection 
                    this.con.Open();
                    k = command.ExecuteNonQuery();
                }
                catch (Exception e)
                {
                    Console.WriteLine(e.Message);
                }
                finally{
                    this.con.Close();
                }
            }

            if (k > 0)
            {
                Console.WriteLine("The rows as been deleted");
            }
            else
                Console.WriteLine("The row was not deleted");

        }
} 
```

# java - Android：Java：TextView 不会改变颜色

> ID：14819469
> 
> 赞同：1
> 
> 时间：2013-02-11T19:32:27.150
> 
> 标签：java, android, view, colors, simplecursoradapter

我似乎无法弄清楚为什么我的列表行项目不会改变颜色：

```
/** Populate the Views in act_alliances.xml with data from the database */
private void loadAllianceData() {
    TblAlliances mTAlliances = new TblAlliances(this);
    mTAlliances.openRead();
    Cursor mCursor = mTAlliances.selectSectorData(mSector);
 // load Sector Name into act_alliance_detail.xml
    TextView mTxtSctName = (TextView) findViewById(R.id.allc_sname);
    mTxtSctName.setText("Sector: "+mSector);
    // load the "Number of Alliances" field with the count from the cursor
    TextView mTxtNumAllcs = (TextView) findViewById(R.id.allc_textView2);
    mTxtNumAllcs.setText(String.valueOf(mCursor.getCount()));
    String[] cols = new String[] {
            mTAlliances.C_FID,
            mTAlliances.C_FANAME,
            mTAlliances.C_FPLTC,
            mTAlliances.C_FSPWER
          };
    int[] to = new int[] {
            R.id.allc_lstRow_textView1,
            R.id.allc_lstRow_textView2,
            R.id.allc_lstRow_invisible,
            R.id.allc_lstRow_textView3
          }; 
 // connect to the ListView and clear it just in case this isnt the first time
    ListView mListView = (ListView) findViewById(R.id.allc_listView);
    mListView.destroyDrawingCache();
    mListView.setVisibility(ListView.INVISIBLE);
    mListView.setVisibility(ListView.VISIBLE);
 // create the adapter using the cursor pointing to the desired data
    //as well as the layout information
    SimpleCursorAdapter dataAdapter = new SimpleCursorAdapter(
      this, 
      R.layout.act_alliances_list_row,
      mCursor,
      cols,
      to,
      0);
    dataAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Cursor cursor, int column) {
            if( column == 1 ){ 
                TextView tv = (TextView) view;
                String mPltc = cursor.getString(cursor.getColumnIndex("FPLTC"));
                if (BuildConfig.DEBUG) {
                    Log.i(Constants.TAG_ACTALLIANCES, "loadAllianceData(): Political Relation: "+mPltc);
                }
                // Set color of item based on Political Relation
                if(mPltc == "Ally"){tv.setTextColor(Color.parseColor("#6699ff"));}
                if(mPltc == "Vassal"){tv.setTextColor(Color.parseColor("#00ff00"));}
                if(mPltc == "Enemy"){tv.setTextColor(Color.parseColor("#ff0000"));}
                return true;
            }
            return false;
        }
    });
    // Assign adapter to ListView
    mListView.setAdapter(dataAdapter);
    mListView.setOnItemClickListener( new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // selected item
            mAllianceForDetail = ((TextView) arg1.findViewById(R.id.allc_lstRow_textView2)).getText().toString();

            startAct("AllianceDetail");
        }
    });
    mTAlliances.close();
} 
```

SimpleCursorAdapter.ViewBinder 中的所有内容似乎都井井有条，但颜色不会改变......我怀疑它可能是我放置 ViewBinder 而不是 ViewBinder 本身。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:35:38.163

尝试使用

```
if(mPltc.equals("Ally"))... 
```

代替

```
if(mPltc == "Ally") 
```

（与“附庸”、“敌人”等相同）

您不应该`==`在`String`对象上使用，因为它不会按您期望的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:36:02.707

你不能用字符串来均衡对象。您需要使用`equals`或`equalsIgnoreCase`功能

```
if (mPltc.equalsIgnoreCase("Ally")){tv.setTextColor(Color.parseColor("#6699ff"));}
if (mPltc.equalsIgnoreCase("Vassal")){tv.setTextColor(Color.parseColor("#00ff00"));}
if (mPltc.equalsIgnoreCase("Enemy")){tv.setTextColor(Color.parseColor("#ff0000"));}
  return true; 
```

# python-2.7 - 从 defaultdict 对象访问值

> ID：14819472
> 
> 赞同：0
> 
> 时间：2013-02-11T19:32:35.283
> 
> 标签：python-2.7, defaultdict

我有一个默认字典，每个键有多个值。我想计算每个键的平均值。我不知道如何访问与每个键关联的值。任何人都可以帮忙吗？

```
[('T.Max', [1.62, 1.65, 1.62], ('T.Spon', [0.30, 0.34, 0.34])] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:35:08.510

`.items()`, `.viewitems()`, 并`.iteritems()`像字典一样工作（实际上，您似乎打印了 的值`.items()`）。它们为您提供键值对的列表/视图/迭代器。例如，使用字典推导来获取每个键的平均值：

```
>>> {k: sum(vals) / len(vals) for k, vals in the_defaultdict.viewitems()} 
```

# c - 检查字符时使用哈希表或数组作为位图

> ID：14819473
> 
> 赞同：1
> 
> 时间：2013-02-11T19:32:40.930
> 
> 标签：c, arrays, hashtable, lookup

假设我想要某种位图来了解特定字符在字符串中出现的次数。

因此，例如，如果我读到字符串“abracadabra”，我会得到一个看起来像这样的数据结构：

```
a -> 5
b -> 2
r -> 2
c -> 1
d -> 1 
```

我读过一本书（[Programming INInterviews Exposed](https://rads.stackoverflow.com/amzn/click/com/047012167X)），上面写着：

哈希表比数组具有更高的查找开销。
一个数组需要一个元素来代表每个可能的字符。
哈希表只需要存储实际出现在字符串中的字符。所以：

对于具有有限可能字符集的长字符串，数组是更好的选择，而哈希表对于较短的字符串或有许多可能的字符值时更有效。

我不明白为什么：

-> Hashtables 比数组有更高的查找开销？这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:49:37.847

数组是一种极其简单的数据结构。在内存中，它是一个简单的连续块。假设数组中的每个项目都是四个字节，并且数组有 100 个元素的空间。那么数组只是内存中的 400 个连续字节，分配给数组的变量是指向第一个元素的指针。假设这是内存中的位置 10000。

当您访问数组的元素 #3 时，如下所示：

```
myarray[3] = 17; 
```

...发生的事情非常简单：将 3 乘以元素大小（4 字节）添加到基指针。在此示例中，它是 10000 + 3 * 4 = 10012。然后您只需写入位于地址 10012 的 4 个字节。非常简单的数学运算。

哈希表不是基本数据结构。它可以以多种方式实现，但简单的一种可能是 256 个列表的数组。然后当你访问哈希表时，首先你要计算你的键的哈希值，然后在数组中查找正确的列表，最后沿着列表查找正确的元素。这是一个复杂得多的过程*。*

一个简单的数组总是比哈希表快。您引用的文字是，如果数据非常*稀疏*......您可能需要一个非常大的数组来进行这个简单的计算。在这种情况下，您可以使用更少的内存空间来保存哈希表。

考虑一下你的字符是否是 Unicode——每个字符两个字节。那是 65536 个可能的字符。并假设您只谈论具有 256 个或更少字符的字符串。要使用数组计算这些字符，您需要创建一个包含 64K 元素的数组，每个元素一个字节......占用 64K 内存。另一方面，像我上面提到的那样实现的哈希表可能只占用 4*64 字节的列表指针数组，然后每个列表元素占用 5-8 个字节。因此，如果您正在处理一个包含 64 个唯一 Unicode 字符的 256 个字符的字符串，那么它总共最多占用 768 个字节。在这些条件下，哈希表将使用更少的内存。但它总是会变慢。

最后，在你展示的简单案例中，你可能只是在谈论拉丁字母，所以如果你强制使用小写字母，你可以有一个只有 26 个元素的数组，并让它们尽可能大，这样你就可以计算出尽可能多的元素您需要的字符。即使是 40 亿，您也只需要 26 * 4 = 104 个字符数组。所以这绝对是去这里的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:42:41.383

> 哈希表比数组有更高的查找开销？这是为什么？

当访问一个字符计数数组时，它是直接访问：counter[c]++;

虽然 hastable 是一种（复杂的）数据结构，但首先必须计算一个散列函数，然后是第二个函数以将 hascode 减少到散列表的位置。如果表位置已被使用，则必须执行附加操作。

我个人认为，只要您的角色在 Asci 范围（0-255）内，数组方法总是更快，更适合。如果涉及到 uni 码字符（在 java 中是 Strings 中的默认值，那么 hashtable 更合适。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:35:52.593

> 哈希表比数组有更高的查找开销？这是为什么？

因为他们必须~~搜索 key~~来计算 key 的 hash。

相反，数组有`O(1)`查找时间。对于访问数组中的值，通常计算偏移量并返回该偏移量处的元素就足够了，这在恒定时间内起作用。

# sql - 具有相同的临时表名称和 2 个不同的 IF 语句

> ID：14819474
> 
> 赞同：0
> 
> 时间：2013-02-11T19:32:42.753
> 
> 标签：sql, sql-server

**我已经解决了这个问题，因为我忽略了一些已经是我的代码的一部分并且不需要这种情况。**

在 SQL Server 2008 中，我有两个 IF 语句

```
If value = ''
begin 
select * into #temptable from table 1
end
Else If value <> ''
begin 
select * into #temptable from table 2
end 
```

但是当我尝试执行它时，它给了我因为第二个

# 诱人的：

```
There is already an object named '#temptable' in the database. 
```

我不想使用另一个临时表名称，因为我必须大量更改后代码。有没有办法绕过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:53:08.773

我建议进行一些更改，以便您的代码更易于维护。您在此处设置它的方式的一个问题是`SELECT *`您使用的语法。如果您稍后决定更改 table1 或 table2 的架构，您可能会产生不明显的后果。在生产代码中，最好将这些内容拼写出来，以便清楚地知道您正在使用哪些列以及在哪里使用。

另外，您是否真的在下面的代码中使用了表 1 和表 2 中的所有列？加载比您需要的更多数据时，您可能会受到性能影响。我将浏览使用#temptable 的代码并找出它实际使用的列。然后从创建临时表开始：

```
CREATE TABLE #temptable(col1 int, col2 int, col3 int, col4 int) 
```

包括所有可能使用的列，即使其中一些列在某些情况下可能为空。大概，后面的代码已经明白了。然后你可以设置你的 IF 语句：

```
IF value = ''
BEGIN 
    INSERT INTO #temptable(col1, col2, col3)
    SELECT x,y,z
    FROM table1
END

ELSE
    INSERT INTO #temptable(col1, col4)
    SELECT alpha,beta
    FROM table2
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:36:20.857

正如所写的那样，您的 SELECT 语句正在创建临时表并在一个语句中将其全部插入。使用 CREATE TABLE 语句分别创建临时表，然后在两个 IF 语句中插入 INSERT INTO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:30:56.983

`SELECT INTO`如您所知，使用动态创建表。即使您的查询只引用了`#temptable`一次，如果您要多次运行它（第一次运行后不删除表），您也会得到相同的错误（尽管如果它在存储过程中，它可能只存在于存储过程的范围）。

但是，您甚至无法编译此查询。例如，在以下查询中使用 Parse 命令 ( `Ctrl+F5`) 会失败，即使将同一个表用作源表也是如此。

```
select * into #temptable from SourceTable
select * into #temptable from SourceTable 
```

如果表 1 和表 2 的结构相同，则可以执行以下操作。

```
select * into #temptable from
    (select * from Table1 where @value = ''
    union
    select * from Table2 where @value <> '') as T 
```

[但是，如果这些表具有不同的结构，那么除了agt](https://stackoverflow.com/users/1416727/agt)和[D. Lambert](https://stackoverflow.com/users/65131/d-lambert)推荐的内容之外，我不确定您能做什么。

# .htaccess - 用 htaccess 阻止一些页面

> ID：14819475
> 
> 赞同：1
> 
> 时间：2013-02-11T19:32:48.633
> 
> 标签：.htaccess

我曾经有一个文件名中有一些关键字的php网站，像这样

domain.com/?keyword-one,23
domain.com/?another-keyword,43
domain.com/?one-more-keyword,23
等等

问题是我现在有一个 index.html 文件，因此上面的页面仍然有效吗？在第一个 / 之后，因为服务器将这些文件附加为 domain.com/index.html?keyword-one,23

有什么方法可以显示错误 410 使用 htaccess 消失了吗？

我使用了 RewriteRule ^index.html$ - [R=404,L,NC] 但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:04:19.887

没关系，我让它工作了。

重写规则 ^/?$ - [R=410,L,NC]

# ruby-on-rails - 使用 RoR ActionMailer，无需使用视图文件即可发送纯文本消息

> ID：14819476
> 
> 赞同：0
> 
> 时间：2013-02-11T19:32:51.893
> 
> 标签：ruby-on-rails, actionmailer

为了在 Rails 3 中使用 ActionMailer 呈现文本（不是 html）消息，我看到许多线程指示程序员创建`.text.erb`文件并运行以下代码：

```
mail do |format|
  format.html
  format.text
end 
```

...但我希望呈现一条非常短的消息，根本不使用邮件视图。我以 html 格式成功执行此操作，但没有以纯文本格式执行此操作。

我使用以下代码：

```
mail do |format|
  format.html{ render( text: 'my text' ) }
  format.text{ render( text: 'my text' ) }
end 
```

...但它每次都会发送一封 html 电子邮件。我可以做些什么来发送纯文本电子邮件并在没有邮件程序视图文件的情况下指定其内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:36:22.837

来自[文档](http://guides.rubyonrails.org/action_mailer_basics.html)：

> 如果您对同一操作有不同的模板，Action Mailer 将自动发送多部分电子邮件。因此，对于我们的 UserMailer 示例，如果您在 app/views/user_mailer 中有 welcome_email.text.erb 和 welcome_email.html.erb，Action Mailer 将自动发送多部分电子邮件，其中 HTML 和文本版本设置为不同部分。

做就是了：

```
mail do |format|
  format.text{ render( text: 'my text' ) }
end 
```

如果您只想要文本电子邮件。

# jquery - 使用ajax获取值不能为空

> ID：14819478
> 
> 赞同：0
> 
> 时间：2013-02-11T19:32:53.547
> 
> 标签：jquery

我试图将一个参数从我的视图传递到我的控制器，我遇到： 当我尝试执行我的操作 GetCompanyDataWithId 时，**值不能为空。**

成功运行会将参数传递给控制器​​，该控制器将返回用于填充我的 jqGrid 的 JSON 数据。

* * *

似乎价值没有被正确传递有什么想法吗？

```
$("#dropdwnlist").change(function () {
               var value = $(this).val();

               $.ajax({
                   url: '<%= Url.Action("GetCompanyDataWithId", "Billing") %>', 
                   type: "POST",                            
                   data: { companyid: "25" },
                   success: function (data) {
                       alert(data);
                       $('#Bgrid').setGridParam({ url: '<%= Url.Action("GetCompanyDataWithId", "Billing") %>'});
                       $('#Bgrid').trigger('reloadGrid');                                                    
                   },
                   error: function(xhr, ajaxOptions, thrownError) {
                        alert(xhr.responseText);
                   }

               }).done(function (msg) {
                   alert("Data Saved: " + msg);
               });
           }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:39:17.013

假设您的控制器方法如下所示：

```
public ActionResult GetCompanyDataWithId(string companyid) {} 
```

您可以使用以下`$.ajax`选项：

```
data: JSON.stringify({ companyid: "25" }),
type: 'post',
dataType: 'json',
contentType: 'application/json; charset=utf-8', 
```

或更简单：

```
Url.Action("GetCompanyDataWithId", "Billing", new { companyid = "25" }) 
```

# java - Android Web 服务连接被拒绝

> ID：14819481
> 
> 赞同：0
> 
> 时间：2013-02-11T19:33:07.250
> 
> 标签：java, php, android, web-services, httpwebrequest

我知道我的代码是正确的，因为它工作过一次。我的 PHP 没有问题，因为当它运行时，它会返回我想要的。这里的问题在于请求。我正在尝试获取正确的地址，但到目前为止，我已经尝试了所有可能的地址，但没有成功。我的代码是：

```
package com.example.testwiththread;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {
    JSONParser jsonParser = new JSONParser();
    String pid;
    String name = "";
    String test = "";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.service_details);
        new Thread(new TestThread()).start();
        Toast.makeText(this, "Hi", Toast.LENGTH_SHORT).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void clickSend (View view) {

        EditText txtName = (EditText) findViewById(R.id.txtName);
        EditText txtPrice = (EditText) findViewById(R.id.txtTest);

        // display product data in EditText
        txtName.setText(name);
        txtPrice.setText(test);
        Log.e("Checking", name);
        Log.e("Checking", test);
    }

    public class TestThread extends Thread {
        public void run() {
            int success;
            try {
                // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("pid", pid));

                // getting product details by making HTTP request
                // Note that product details url will use GET request
                JSONObject json = jsonParser.makeHttpRequest(
                        "http://10.0.2.2:8080/webservice.php", "GET", params);

                // check your log for json response
                Log.d("Single Record Details", json.toString());

                // json success tag
                success = json.getInt("success");
                if (success == 1) {
                    // successfully received product details
                    JSONArray productObj = json.getJSONArray("record"); // JSON Array

                    // get first product object from JSON Array
                    JSONObject product = productObj.getJSONObject(1);

                    name = product.getString("name");
                    test = product.getString("test");
                }
            } catch (JSONException e) {
                Log.e("error", e.toString());
            }
        }
    }
} 
```

我的 JSON 解析器：

```
package com.example.secondtestsqlserver;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            Log.e("Unsupported Encoding", Log.getStackTraceString(e));
        } catch (ClientProtocolException e) {
            Log.e("Client Protocol", Log.getStackTraceString(e));
        } catch (IOException e) {
            Log.e("IO Exception", Log.getStackTraceString(e));
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
            System.out.println(e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
            Log.e("JSON Parser", json);
        }

        // return JSON String
        return jObj;

    }
} 
```

如您所见，我使用 10.0.2.2:8080 作为 localhost 地址。我已经尝试了 127.0.0.1、localhost 和许多其他包含在 localhost 的 Android 页面中的选项。他们中的大多数返回此错误

```
02-11 15:18:31.329: E/IO Exception(27504): org.apache.http.conn.HttpHostConnectException: Connection to http://10.0.2.2:8080 refused
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:183)
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
02-11 15:18:31.329: E/IO Exception(27504):  at com.example.testwiththread.JSONParser.makeHttpRequest(JSONParser.java:62)
02-11 15:18:31.329: E/IO Exception(27504):  at com.example.testwiththread.MainActivity$TestThread.run(MainActivity.java:63)
02-11 15:18:31.329: E/IO Exception(27504):  at java.lang.Thread.run(Thread.java:856)
02-11 15:18:31.329: E/IO Exception(27504): Caused by: java.net.ConnectException: failed to connect to /10.0.2.2 (port 8080): connect failed: ETIMEDOUT (Connection timed out)
02-11 15:18:31.329: E/IO Exception(27504):  at libcore.io.IoBridge.connect(IoBridge.java:114)
02-11 15:18:31.329: E/IO Exception(27504):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
02-11 15:18:31.329: E/IO Exception(27504):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
02-11 15:18:31.329: E/IO Exception(27504):  at java.net.Socket.connect(Socket.java:842)
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
02-11 15:18:31.329: E/IO Exception(27504):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
02-11 15:18:31.329: E/IO Exception(27504):  ... 9 more
02-11 15:18:31.329: E/IO Exception(27504): Caused by: libcore.io.ErrnoException: connect failed: ETIMEDOUT (Connection timed out)
02-11 15:18:31.329: E/IO Exception(27504):  at libcore.io.Posix.connect(Native Method)
02-11 15:18:31.329: E/IO Exception(27504):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
02-11 15:18:31.329: E/IO Exception(27504):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
02-11 15:18:31.329: E/IO Exception(27504):  at libcore.io.IoBridge.connect(IoBridge.java:112)
02-11 15:18:31.329: E/IO Exception(27504):  ... 14 more
02-11 15:18:31.329: E/Buffer Error(27504): Error converting result java.lang.NullPointerException: lock == null
02-11 15:18:31.329: E/JSON Parser(27504): Error parsing data org.json.JSONException: End of input at character 0 of 
02-11 15:18:31.329: W/dalvikvm(27504): threadid=11: thread exiting with uncaught exception (group=0x40e46930)
02-11 15:18:31.329: E/AndroidRuntime(27504): FATAL EXCEPTION: Thread-9043
02-11 15:18:31.329: E/AndroidRuntime(27504): java.lang.NullPointerException
02-11 15:18:31.329: E/AndroidRuntime(27504):    at com.example.testwiththread.MainActivity$TestThread.run(MainActivity.java:67)
02-11 15:18:31.329: E/AndroidRuntime(27504):    at java.lang.Thread.run(Thread.java:856) 
```

但是，唯一不返回此错误的是我使用路由器的 IP 地址时。问题是，即使连接没有被拒绝，它说访问被禁止。任何帮助将不胜感激。

编辑：以防万一，我在清单中提供了互联网访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:13:20.667

如果您`http://10.0.2.2:8080/webservice.php`的 WAMP 服务器不在`10.0.2.2`. 此地址*在与您的网络服务器在同一主机上运行的模拟器中使用*，这意味着如果您在平板电脑而不是 Android 模拟器程序上进行测试，它将无法为您工作。要解决此问题，请将您的地址更新为：

**(A)**路由器的公共 IP 已完成适当的端口转发，以将端口 8080 路由到 WAMP 主机。
**(B)** wifi 网络的本地 IP 地址。在典型设置下，这是 192.168.1.x，但我们不能保证。请注意，这将允许您的连接*仅*在您使用家庭 wifi 时才能正常工作。

您可以通过谷歌搜索“我的 IP 是什么”找到您的公共 IP。`Start->Run->cmd`您可以通过打开并键入来找到您的本地 IP `ipconfig`。“IPv4 地址”旁边列出的地址应为您提供详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:52:39.430

我设法解决了更改 Apache httpd.conf 中的设置的问题。

```
#   onlineoffline tag - don't remove
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1 
```

我把它改成

```
#   onlineoffline tag - don't remove
    Order Deny,Allow
    Allow from all
    Allow from 127.0.0.1 
```

现在我的平板电脑可以访问网络服务了。我不知道是否有更好的方法来做到这一点。当然，我应该提一下，我使用的不是 10.0.2.2 IP，而是路由器的 IP 地址。我还将 httpd.conf 中的 Listen 更改为 8080。到目前为止它正在工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T09:26:02.813

我将 PHP 用于 web 服务和 Android 4.x。用于连接到 Web 服务的设备。我有类似的问题，使用 10.0.2.2 在模拟器上运行良好，但无法从设备连接。对我有用的解决方案是：查找您计算机的 IP ... 说 192.168.0.103 找到您的 apache 的端口 ... 说 8080 现在打开 httpd.conf 并找到以下行 Listen 127.0.0.1:8080 在此行之后添加听 192.168.0.103:8080 就是这样。现在，如果你在你的 android 代码中使用 192.168.0.103:8080，它就会连接！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T21:28:48.107

听起来不是代码，而是配置，或者缺少正确的地址。`127.x.x.x`总是指您正在使用的计算机。 `10.0.2.2`是不可路由的地址，因此它必须在您使用的网络上。

您提到您的计算机是您正在使用并连接到路由器的计算机。平板电脑通过 wifi 连接。平板电脑是否连接到同一个路由器？从您正在使用的计算机上，您可以`http://10.0.2.2:8080/...`访问并访问该页面吗？

在另一个回复中（尽管我无法评论回复），您说您尝试过使用路由器的地址。我认为这是出于端口转发的原因。许多路由器不允许从内部进行端口转发，它们是 WAN 到 LAN 端口转发，而不是 LAN 到 LAN，因此如果您是内部的并且托管页面的计算机也是内部的，这并不奇怪。

话虽如此，您能否从您所在的计算机访问该页面。您能否检查您所在计算机的 IP（开始->cmd->ipconfig 并查找`10.0.x.x`or `192.168.x.x`）。希望使用该地址对您有用。

# sql - 检测未按计划运行的作业

> ID：14819486
> 
> 赞同：6
> 
> 时间：2013-02-11T19:33:26.350
> 
> 标签：sql, sql-server, sql-server-2008-r2, sql-job

我正在尝试编写一个 SQL 查询，它告诉我 SQL 作业是否已根据其计划运行。例如，如果一项作业计划在下午 12:00 运行，而我们现在是下午 12:05，但它仍然没有运行，我想知道这一点。检测它的最佳方法是什么？

过去我们有 SQL 作业要定期运行，而 SQL Server 没有运行它们。为防止这种情况发生，我们希望对 SQL Server 2008 R2 运行查询并检查作业是否运行，如果未运行则触发警报。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:43:59.497

您可以尝试未记录的程序

```
sys.xp_sqlagent_enum_jobs 
```

此过程返回作业上次运行的日期和时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:47:51.717

此查询将告诉您作业运行的详细信息。

```
Select hist.run_date,hist.run_status,hist.run_time
from msdb..sysjobs jb 
inner join msdb..sysjobhistory hist
on jb.job_id = hist.job_id
where jb.name = 'MyJob' 
```

根据 Sql Books Online [http://msdn.microsoft.com/en-us/library/ms174997.aspx](http://msdn.microsoft.com/en-us/library/ms174997.aspx)

运行状态

作业执行状态：

0 = 失败

1 = 成功

2 = 重试

3 = 取消

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-22T15:44:17.737

更好地了解哪些工作没有历史。尝试运行此查询。

```
 select name  from msdb.dbo.sysjobs  where job_id not in (select job_id from sdb.dbo.sysjobhistory)  and enabled = 1 
```

默认情况下，每个作业在执行时都应该有历史记录。

# android - Android 在服务中使用 AsyncTaskLoader

> ID：14819498
> 
> 赞同：2
> 
> 时间：2013-02-11T19:34:28.720
> 
> 标签：android, service, asynctaskloader

我需要做出设计决定。
根据我在 android 开发者网站上读到的内容，我想我想实现一个服务，它启动一个 AsyncTaskLoader 以在后台从操作系统进程加载数据。
在 android 开发者网站文档中，它说 AsyncTaskLoader 可以在活动和片段中使用，但没有提到服务。

在服务中使用 AsyncTaskLoader 是一种不好的做法吗？
如果是这样，我如何在后台从正在运行的操作系统进程中收集数据？（注意：即使应用程序关闭/销毁，我也需要继续收集）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:39:58.200

Loaders一般用于创建和销毁比较频繁的UI元素，需要访问之前查询的对象，而不需要每次都重新查询。Service 不会像 Activity 或 Fragment 那样在负载中被破坏，因此产生一个新线程被认为是在 Service 的后台加载数据的最佳实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:08:20.677

加载器确实[适用于活动和片段](http://developer.android.com/guide/components/loaders.html#app)[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)，如果您只是想要一种在后台线程中做一些工作的好方法，考虑一下可能是有意义的。有什么特定的东西看起来有用`AsyncTaskLoader`吗？

无论哪种方式，如果您的应用程序被破坏，您将无法继续收集。如果您的应用程序被销毁，它就无法进行任何工作。A`Service`绝对是你想要用来在后台工作的东西。

# mongodb - 在完整的 firehose 流上使用 Mongo/Redis

> ID：14819507
> 
> 赞同：1
> 
> 时间：2013-02-11T19:35:06.717
> 
> 标签：mongodb, redis

我一直在阅读 DataSift 如何使用不同的技术来使用 twitter firehose，并且由于我需要遵循相同的概念，因此想了解 mongo/redis 之间的差异及其在实时数据存储中的使用。我的理解是：流量太大，无法简单地消费和放置数据（推文等），例如rabbitmq队列。我担心的是数据丢失的问题。我当前的架构涉及连接到一个开放流并使用数据并将每个帖子或消息推送到 rabbitmq 中的几个队列中。队列保存每条消息的副本，一个是处理队列，一个是存储队列。

如果我的音量增加 100 倍，我被告知当前的设置将无法处理音量，使用 mongo/redis 方法会更好。所以不确定这将如何实现：然后我会将流消耗到 mongo 中，然后从那里进入队列，为什么这是一个更好的方法。

# spring - 如何显示 外部 在春天？

> ID：14819509
> 
> 赞同：2
> 
> 时间：2013-02-11T19:35:08.883
> 
> 标签：spring, forms, jsp, spring-mvc, error-handling

我是 Spring 新手，在尝试显示表单错误时遇到了一些麻烦。

我有以下表格：

```
<form:form action="loginform.html" commandName="loginForm" onsubmit="goWait();">
<table><tr>
           <td>User Name: </td>
           <td><form:input path="userName" /></td>
        </tr>
        <tr> 
           <td>Password: </td>
           <td><form:password path="password"/> </td>
        <tr>
            <td colspan="2">
             <input type="submit" value="Login" style="butt-login">
            </td>
        </tr>
</table>                                                        
</form:form> 
```

可以看出，表单由`LoginForm`验证它的 Bean 支持。

我想在此表单之外显示验证中的所有错误。像这样的东西：

```
<div>
   <ul>
      <li><form:errors path="userName"/></li>
      <li><form:errors path="password"/></li>
   </ul>
</div> 
```

这个 div 应该在 之外，所以我不能使用标签。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-16T13:50:04.997

您可以捕获由 form:errors 生成的 html 并将其显示在表单之后的某个位置：

```
<form:form ...>
    <c:set var="err">
        <form:errors path="*" element="div" id="err" cssClass="hidden" />
    </c:set>
</form:form>

....

<c:out value="${err}" /> 
```

如果你想在表单*之前*显示错误，你可以用一点 jQuery 来做到这一点

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-23T10:12:20.830

是的，您可以在 form:form 标签之外使用 form:errors 标签

```
<form:errors path="yourBindedObject.*" />
<form:form action="loginform.html" commandName="loginForm" onsubmit="goWait();">
<table><tr>
           <td>User Name: </td>
           <td><form:input path="userName" /></td>
        </tr>
        <tr> 
           <td>Password: </td>
           <td><form:password path="password"/> </td>
        <tr>
            <td colspan="2">
             <input type="submit" value="Login" style="butt-login">
            </td>
        </tr>
</table>                                                        
</form:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:39:27.897

如果您想显示与任何字段相关的所有错误，只需将星号传递给`path`属性。

```
<form:errors path="*" /> 
```

但是如果你想显示全局错误消息，只需传递一个空字符串：

```
<form:errors path="" /> 
```

更多相关信息：[http ://www.mkyong.com/spring-mvc/spring-mvc-form-errors-tag-example/](http://www.mkyong.com/spring-mvc/spring-mvc-form-errors-tag-example/)

# heroku - heroku 域委托的辅助 DNS 名称

> ID：14819510
> 
> 赞同：0
> 
> 时间：2013-02-11T19:35:09.163
> 
> 标签：heroku, dns

我想将我的域委派给 heroku，但不能这样做，因为我的提供商需要**主**DNS 服务器和**辅助**DNS 服务器。
但是heroku只提供一个例如`myapp.herokuapp.com`

有什么办法可以解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:15:45.767

我找到了解决方案：

1.  添加 DNS 插件，例如**Zerigo DNS**

2.  从 Zerigo Docs [https://devcenter.heroku.com/articles/zerigo_dns](https://devcenter.heroku.com/articles/zerigo_dns)复制 DNS 服务器并将它们设置在域注册中：

> ```
> a.ns.zerigo.net
> b.ns.zerigo.net
> c.ns.zerigo.net
> d.ns.zerigo.net 
> ```

无论如何感谢您的回答！

# perforce - Perforce 最近提交的更改列表未显示

> ID：14819512
> 
> 赞同：0
> 
> 时间：2013-02-11T19:35:16.853
> 
> 标签：perforce

出于某种原因，我最近提交的 Perforce 更改列表没有显示在 P4Win 或 P4V 中，但是当我直接检查软件仓库时，我可以看到我添加的文件，并且在检查我更改的源文件时，它包含将包含在未显示的已提交更改列表中的更改。

我不确定如何强制/刷新数据库以显示更改列表或如何恢复这些更改列表。

现在，关于这是如何发生的更多细节：我的 p4 depot 在外部驱动器上，p4 服务器在桌面上运行，但在周末，我在旅行时将驱动器带到另一个桌面，并在上面使用 p4 服务器机器在 ext 驱动器上设置软件仓库。

现在，奇怪的是，提交的更改列表包含我在旅行中一天制作的 2 个更改列表，但旅行第二天的更改列表没有显示。但是，如上所述，实际文件已更改，并且我添加的任何新文件都存在于软件仓库中。

如何恢复这些最近的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:10:55.593

目前还不清楚通过将硬盘从一台机器移动到另一台机器来实现什么，但此时您可以做的最好的事情就是联系 Perforce 技术支持。

# python - 寻找合适的 RE

> ID：14819514
> 
> 赞同：1
> 
> 时间：2013-02-11T19:35:36.987
> 
> 标签：python, regex

刚从正则表达式开始......我正在寻找一个
像 \b\d\d\b 这样的正则表达式，但数字可能不一样。（例如 23 应该匹配
但 22 不应该）我已经尝试了很多（涉及反向引用），但他们都失败了。
我已经使用下面的代码（python 2.7.3）尝试了 RE，但到目前为止没有任何匹配项

```
import re
# accept a raw string(e) as input
# and return a function with an argument
# 'string' which returns a re.Match object
# on succes. Else it returns None
def myMatch(e):
    RegexObj= re.compile(e)
    return RegexObj.match

menu= raw_input
expr= "expression\n:>"
Quit= 'q'
NewExpression= 'r'
str2match= "string to match\n:>"
validate= myMatch(menu(expr))
# exits when the user # hits 'q'
while True:                     
    # set the string to match or hit 'q' or 'r'
    option = menu(str2match)
    if option== Quit: break 
    #invokes when the user hits 'r'
    #setting the new expression
    elif option== NewExpression:
        validate= myMatch(menu(expr))
        continue
    reMatchObject= validate(option) 
    # we have a match ! 
    if reMatchObject:           
        print "Pattern: ",reMatchObject.re.pattern
        print "group(0): ",reMatchObject.group()
        print "groups: ",reMatchObject.groups()
    else:
        print "No match found " 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T19:37:02.227

您可以使用反向引用和负前瞻。

```
\b(\d)(?!\1)\d\b 
```

反向引用被替换为第一组中匹配的任何内容：`(\d)`

如果以下字符与表达式匹配，则负前瞻会阻止匹配成功。

所以这基本上说匹配一个数字（我们称之为“N”）。如果下一个字符是 N，则匹配失败。如果没有，再匹配一个数字。

# jenkins - 构建其他项目构建后操作缺少触发单选按钮

> ID：14819519
> 
> 赞同：0
> 
> 时间：2013-02-11T19:35:51.880
> 
> 标签：jenkins, cloudbees

我正在运行 Jenkins 版本 1.466.12.1 (Jenkins Enterprise 12.11)。有了一份新工作，我正在尝试添加构建后操作来构建其他项目，但触发器选项的预期单选按钮不存在。

我已经创建了具有以下选项的工作：

*   仅在构建成功时触发
*   即使构建不稳定也触发
*   即使构建失败也触发

如果我创建一个新工作，这些选项将不存在。如果我复制一份工作，那么这些选项就存在。我不记得以前的 Jenkins Enterprise 的版本号，但它当时正在工作。

我还在我的台式计算机上运行了非企业版的 Jenkins，而这些触发器选项在 1.483 版上不存在。

这个构建后操作有什么变化吗？也许我忘记了一个花哨/有用的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:50:15.617

[JENKINS-16444](https://issues.jenkins-ci.org/browse/JENKINS-16444)已在 Jenkins 1.500 中修复。解决方法应该是添加构建触发器，保存配置，然后再次返回配置页面，这些选项应该是可见的——该问题仅在首次添加触发器时适用。

# android - RelativeLayout wrap_content 宽度，循环依赖

> ID：14819521
> 
> 赞同：0
> 
> 时间：2013-02-11T19:36:04.430
> 
> 标签：android, width, android-relativelayout

想要为新的 Android 版 Google Maps v2 API 设计一个自定义标记气球。我已经覆盖了 getInfoContents 但我现在的布局采用 ym 自定义设计占据了屏幕的整个宽度。我希望它以最大宽度环绕文本。

在线阅读后我发现了我的问题，可能是我在 RelativeLayout 中存在循环依赖，这是不允许的。但是，我将如何将文本字段“位置”移动到布局的右侧，与标题一致但在右侧？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:maxLines="1"
        android:paddingBottom="2sp"
        android:paddingLeft="5sp"
        android:paddingTop="1sp"
        android:textColor="@color/list_item_title_color"
        android:textSize="15sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"sa
        android:layout_below="@id/title"
        android:ellipsize="end"
        android:maxLines="3"
        android:paddingBottom="3sp"
        android:paddingLeft="5sp"
        android:paddingRight="5sp"
        android:textColor="@color/list_item_text_color"
        android:textSize="13sp" />

    <TextView
        android:id="@+id/place"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:gravity="right"
        android:paddingRight="5sp"
        android:paddingTop="1sp"
        android:textColor="@color/list_item_date_color"
        android:textSize="13sp" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/icons"
        android:layout_width="fill_parent"
        android:layout_height="32dp"
        android:layout_below="@id/place"
        android:gravity="right"
        android:orientation="vertical"
        android:paddingBottom="2sp"
        android:paddingLeft="5sp"
        android:paddingRight="5sp" >
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:27:44.693

除非我误解，否则您应该能够将“标题、地点和文本”包装在`linearlayout`

```
<LinearLayout
android:id="@+id/textLL
android:orientation="horizontal"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
//textViews
</LinearLayout> 
```

现在使用

```
android:layout_toRightOf="@+id/textLL" 
```

在您的“图标”布局中。或者这不是你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:40:51.760

你不能只添加：

```
android:layout_toRightOf="@id/title" 
```

到你的地方textview？

编辑：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<RelativeLayout
android:id="@+id/leftLayout"
android:layout_alignParentLeft="true"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="end"
    android:maxLines="1"
    android:paddingBottom="2sp"
    android:paddingLeft="5sp"
    android:paddingTop="1sp"
    android:textColor="@color/list_item_title_color"
    android:textSize="15sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"sa
    android:layout_below="@id/title"
    android:ellipsize="end"
    android:maxLines="3"
    android:paddingBottom="3sp"
    android:paddingLeft="5sp"
    android:paddingRight="5sp"
    android:textColor="@color/list_item_text_color"
    android:textSize="13sp" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/icons"
    android:layout_width="fill_parent"
    android:layout_height="32dp"
    android:layout_below="@id/place"
    android:gravity="right"
    android:orientation="vertical"
    android:paddingBottom="2sp"
    android:paddingLeft="5sp"
    android:paddingRight="5sp" >
</LinearLayout>

</RelativeLayout>

    <TextView
        android:id="@+id/place"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@id/leftLayout"
        android:gravity="right"
        android:paddingRight="5sp"
        android:paddingTop="1sp"
        android:textColor="@color/list_item_date_color"
        android:textSize="13sp" />
</RelativeLayout> 
```

在这里，试试这个，但它没有经过测试。

# javascript - jQuery多页html

> ID：14819529
> 
> 赞同：3
> 
> 时间：2013-02-11T19:36:33.260
> 
> 标签：javascript, jquery, ios, jquery-mobile

我遇到了尝试将多个多页 html 文件与 jquery mobile 链接的问题，并发现在使用 ajax 时，jquery mobile 不会显示完整文档，而是显示第一页。

我查找了问题并找到了 todd thomsons 子页面小部件，但无法使插件正常工作。所以现在我试图找出，不使用 ajax，是否可以加载外部多页 html 文件，但不能离开 ios Web 应用程序窗口并启动 safari？

我在搜索中看到了这段 javascript，但我不确定它会如何工作。

```
<a href="file2.html" data-icon="back" data-ajax="false" class="file2">Log Out</a></li>

$(document).bind('pageinit', function() {
  $('.file2').click(function (event) {
    event.preventDefault();
    window.location.assign("file.html");
  });
}); 
```

所以我想我的问题是，使用 javascript，是否可以在不离开网络应用程序视图的情况下加载外部 html 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:10:39.020

如果我正确理解了您的问题（您需要将页面更改`file.html`为多页 jQM 文档），您可以尝试

```
<li><a href="file1.html" rel="external" data-icon="back">Log Out</a></li> 
```

或者如果您需要以编程方式更改页面

```
<li><a id="logout" href="#" data-icon="back">Log Out</a></li> 
```

和

```
$(document).on('pageinit', '#logout', function() {
  $('#logout').click(function (event) {
    event.preventDefault();
    $.mobile.ajaxEnabled = false;
    $.mobile.changePage("file1.html");
  });
}); 
```

# javascript - 从servlet发送数据到jsp，显示在html表中。

> ID：14819537
> 
> 赞同：1
> 
> 时间：2013-02-11T19:37:07.683
> 
> 标签：javascript, jsp, servlets

由于我在 Web 应用程序方面没有太多经验，所以我整天都在为此苦苦挣扎。

我有一个向创建一个非常大的表（5 列，500.000+ 行）`index.jsp`的请求发送请求的页面。由于表格已排序，我想获取前 100 行并将它们显示在表格中。因此，会将请求对象重定向到应该显示数据的位置。`Servlet``csv``html``Servlet``table.jsp`

我想我需要一些关于这方面的一般方法的建议。我想到了几种方法和问题：

1.  创建`csv`文件时，将前 100 行存储在数组数组中，并通过请求对象将它们发送到`jsp`页面，它们可以在`html table`.

2.  只发送`csv`文件的路径，直接在`jsp`页面中读取前 100 行。

3.  选择`json`传输格式有用吗？

4.  包含 500 个字符串的对象是否过多而无法在请求对象中传输？

5.  请求对象是向`jsp`页面传输数据的好习惯吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:00:57.220

JSP页面是由容器编译成servlet的，所以归根结底就是servlet，你可以在里面使用Java Code。`JSON`因此，当您想使用 Javascript 解释数据时，无需使用as 传输格式。JSP 在服务器端进行评估。

所以，我会这样做：

*   在您的 servlet 中，检索数据
*   将请求转发到 JSP（这发生在服务器端；客户端（浏览器）无法像重定向一样识别此步骤）
*   在 JSP 中构建表（并呈现响应）

小服务程序代码：

```
public void doGet(HttpServletRequest request, HttpServletResponse response)             
                  throws ServletException, IOException {
    List<MyObject> listData = ...; // however you get the data
    // set the attribute in the request to access it on the JSP
    request.setAttribute("listData", listData);
    RequestDispatcher rd = getServletContext()
                               .getRequestDispatcher("/path/to/page.jsp");
    rd.forward(request, response);
} 
```

JSP（使用 JSTL 标签库）：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!-- html, head and starting body tag ... -->
<table>
    <c:forEach var="element" items="${listData}">
        <tr>
            <td>${element.abc}</td> 
            <td>${element.def}</td> 
            <td>${element.ghi}</td>
        </tr> 
    </c:forEach>
</table> 
```

Where`MyObject`是一个包含实例变量的对象`abc`，`def`并`ghi`为它们提供了 getter 方法。

Note that you need the JSTL jar (which can be downloaded [here](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar)) in your WEB-INF/lib folder if you do not have it already.

# javascript - 在 DIV 中平滑 JavaScript 水平滚动

> ID：14819538
> 
> 赞同：1
> 
> 时间：2013-02-11T19:37:16.283
> 
> 标签：javascript, html, scroll, horizontal-scrolling

我在水平 div 中有超出页面区域的内容，因此要查看所有内容，您必须水平滚动。使用触控板很好，但对于那些没有触控板的人，我想通过使用滚动条或鼠标悬停文本/图像来明确这一点。

经过数小时的实验，我终于找到了这段代码 -[使用控件水平滚动图像 div](https://stackoverflow.com/questions/5414304/scrolling-a-div-of-images-horizontally-with-controlls) - 这是完美的（只是将其更改为鼠标悬停）。

唯一的问题是我想顺利完成，而不必重复鼠标悬停或单击。

我也想避免使用 Jquery 和所有那些滑块的东西。我是 JS 的新手，想保持简单。此外，我无法使用任何 CSS 解决方案强制滚动条。

谢谢

# yii - 一个特殊的应用程序状态问题

> ID：14819541
> 
> 赞同：0
> 
> 时间：2013-02-11T19:37:46.983
> 
> 标签：yii

我正在使用 Yii 框架开发一个类似于 facebook 的社交网站。作为登录用户可以看到他们在搜索或通过其他方式获得的任何用户的个人资料。在 facebook 中发生的事情就像

```
facebook.com/marthajoseph/photos 
```

在这里，用户正在查看“marthajoseph”的个人资料。我想在 yii 中实现同样的目标。目前我做了这样的事情

```
myapplication.com/index.php?r=u/default/index?uid=110 
```

这里的“u”是用户的模型。在这里，我正在查看用户 ID 为“110”的用户的个人资料。问题是每次我切换用户的照片、个人资料、帖子等时，我都必须在这个 uid 查询字符串中附加导致不稳定的 url。

我怎样才能实现类似facebook的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:54:24.213

我建议使用上面 ernie 提到的[Yii URL Management完全重写 URL](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

首先，使用 URL 的路径格式。这是通过首先取消注释*protected/config/main.php*`urlManager`中的行来完成的（默认情况下在第 34 行左右）。例如，它的作用是让您使用“漂亮的 URL”，而不是看起来像这样的 URL：

 *```
www.example.com/index.php?r=user/profile?uid=110 
```

你可以有这样的东西：

```
www.example.com/user/110 
```

因此，例如，如果我们想将任何具有结构的 URL 路由`profile/<a users id>`到我们的用户控制器视图操作 (actionView)，我们可以执行以下操作：

```
'urlManager'=>array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    'rules' => array(
        'user/profile/<id:.+>' => 'user/view',
        ... 
```

所以在数组的左边我们有“URL 的样子”，在右边我们有“它指向的地方”。然后，您可以使用 访问`id`视图或控制器中的值`$_GET`，例如：

```
echo "You are viewing user id ".$_GET['id']; 
```

您可以使用此值来查询照片或个人资料内容或与该用户关联的任何内容。就在 URL 中包含用户名（facebook 是如何做到的，例如：）而言`facebook.com/myusername`，您很可能会让用户在某处输入他们的[虚 URL](http://en.wikipedia.org/wiki/Vanity_URL)并将其存储在数据库中。然后，您可以将规则更改为：

```
'user/profile/<user_vanity_url:.+>' => 'user/view', 
```

然后使用 . 访问与上面相同的值`$_GET`。如果你走这条路，一条建议是记住你应该阻止用户查看他们不允许查看的内容，例如查看不是他们朋友的人的照片。我会假设您有某种存储这些关系的表？

关于必须附加 id 或您通过 URL 传递的任何值，您可以简单地将其附加到视图中或创建 HTML 的任何位置，例如，如果您想显示来自用户照片的链接个人资料页面，您可以执行以下操作：

```
<a href="<?php echo Yii::app()->request->baseUrl; ?>/photos/<?php echo $_GET['id']; ?>"></a> 
```

关于 urlManager 中的 URL 规则的另一件事，规则是从上到下解释的，并且将使用第一个匹配的规则。

希望这可以帮助您走上正确的道路。如果您仍然卡住，请查看以下帖子：

*   [http://yiitutorials.net/easy/easy-url-rewriting-with-yii](http://yiitutorials.net/easy/easy-url-rewriting-with-yii)
*   [Yii 基本 url 重写](https://stackoverflow.com/questions/9878319/yii-basic-url-rewrite)*

# php - 如何将php值传递给javascript然后传递给ajax？

> ID：14819543
> 
> 赞同：0
> 
> 时间：2013-02-11T19:37:50.650
> 
> 标签：php, javascript, jquery, mysql

我正在用我的数据库中的值将数据回显到一个表中。它看起来像这样：

```
<?php
  //mysqli_num_rows function
  while($row=mysqli_fetch_array //I know this may be wrong, but that's not the point
  echo "<tr><td>".$somedata."</td></tr>";
?> 
```

所以这个表行的值将根据数据库中有多少数据来显示。我想异步更新页面，例如用户想从数据库中删除它。如何通过函数将此值传递`javascript`给`onClick`？还是有其他方法？如果我在表中有要删除的链接，例如：

```
<td><a onClick="delete(ThisValueOfThisTableRow)">Delete</a></td> 
```

在`javascript`或者`jQuery`我想找到这个值并将其设置为一个变量，然后将其传递为：

```
var some_value = //get this value
.ajax{
  url: "somephpfile.php"
  data:{some_value:value}
} 
```

如果他们是响应式会员页面，我认为这对任何人都有帮助。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:46:40.410

也许是这样的：

```
<?php
  //mysqli_num_rows function
  while($row=mysqli_fetch_array) {
?>
<tr>
<td><?=$somedata;?></td>
<td><a href='#' class='delete-btn' id='row-<?=$someID;?>'>Delete</a></td>
</tr>
<?
}//end while
?> 
```

然后对于 js 事件

```
$('.delete-btn').click(function() {
  var id = $(this).attr("id");
  id = id.split("-");
  data = { "id" : id[1] }
  //your ajax here, pass in your data obj
}); 
```

祝你好运-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:51:37.280

**PHP**

```
while ( $row = mysql_fetch_array( $result ) ) {
    echo '<tr><td><a onclick="delete_row(' . $row['id'] . ')">delete row</a></td></tr>';
} 
```

**Javascript**

```
function delete_row( id ) {
    alert( id ); //To show you are getting the id remove this for production

    //ajax goes here
} 
```

# c++ - istream::peek() 不应该总是返回你刚刚 putback() 的内容吗？

> ID：14819547
> 
> 赞同：11
> 
> 时间：2013-02-11T19:38:09.083
> 
> 标签：c++, istream, libc++

直观地说，从 C++ 规范来看，在我看来，它似乎`istream::putback( c )`应该总是安排输入缓冲区，以便下一次调用`istream::peek()`应该读取字符`c`。这不正确吗？我问是因为 Xcode 4.6 附带的最新版本的 libc++ 似乎并未在所有情况下都强制执行此行为——尤其是当最后一个字符位于 EOF 时。如果您使用`unget()`而不是`putback( c )`.

libc++ 的行为是正确的，还是我对如何`putback()/unget()`工作的直觉正确？

考虑这个示例代码，它适用于 libstdc++ 但不适用于 libc++（断言失败）。

```
#include <sstream>
#include <cassert>

int main(int argc, const char * argv[])
{
    std::istringstream in( "[Test]" );

    while( in )
    {
        int c = in.get();
        if( c == ']' )
        {
            in.putback( c );
            assert( in.peek() == c );   // Fails with libc++. Succeeds with libstdc++.
            break;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T21:03:24.727

实际上`putback`，C++11 中的函数发生了变化：

§27.7.2.3/34

> `basic_istream<charT,traits>& putback(char_type c);`
> 
> 效果：表现为一个未格式化的输入函数（如 27.7.2.3，第 1 段所述），除了函数首先清除`eofbit`. ...

C ++ 03中不存在句子的后半部分。

因此，这可能取决于编译器是否已完全实现此更改，或者您是否使用了所需的选项（`-std=C++11`？）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T19:41:34.247

Bo Persson 关于标准是正确的。您可能使用的是旧版本的 libc++（您的问题出在 LLVM 错误跟踪器中，见下文）。

修订版 162108 中引入了该更改：

```
--- istream     (revision 162607)
+++ istream     (revision 162608)
@@ -1263,6 +1263,7 @@
     try
     {
 #endif  // _LIBCPP_NO_EXCEPTIONS
+        this->clear(this->rdstate() & ~ios_base::eofbit);
         sentry __sen(*this, true);
         if (__sen)
         { 
```

有关更改的日志：

> $ svn log -r 162608
> 
> -------------------------------------------------- ---------------------- r162608 | 希南特 | 2012-08-25 00:03:03 +0200（2012 年 8 月 25 日星期六）| 1 行
> 
> 有 basic_istream seekg、putback 和 unget 首先清除 eofbit。修复 [http://llvm.org/bugs/show_bug.cgi?id=13089](http://llvm.org/bugs/show_bug.cgi?id=13089)。

# php - 默认参数值覆盖提供的参数？

> ID：14819548
> 
> 赞同：-2
> 
> 时间：2013-02-11T19:38:17.373
> 
> 标签：php, function, default-arguments

我在 PHP 中有一个函数，它的一些参数默认为`null`，因此我可以轻松地用少于全部数量的参数来调用它。问题是，当我直接使用空默认参数时，我得到了给定的参数，但是当我尝试将该值复制到另一个变量时，该变量仅获得`null`. 它看起来像这样：

```
// inside my MySQLI wrapper class...
public function bind(&$stmt, $types = "", &$arg1, &$arg2 = null, &$arg3 = null /* this goes up to 20; it's auto-generated by another script */)
{
    echo "dumping...";
    var_dump($arg1); // var_dump shows value from function call (string(0))
    var_dump($arg2); // ditto
    echo "...dumped";
    if ($arg2 != null) $foo = $arg2; var_dump($foo); echo "foo"; // var_dump shows that $foo is NULL
    /* ... */
} 
```

我从另一个脚本中调用这样的函数：（这是一个处理卡车和汽车的虚拟脚本。）

```
$make = "";
$model = "";
$year = 0;
$license = "";
list($error, $message) = $mysql->bind($stmt, "", $make, $model, $year, $license); 
```

我的`bind()`函数是 MySQLI`bind_param()`和`bind_result()`函数的包装器。我只包括了前几行，因为它在那个时候已经失败了，甚至在它到达实际逻辑之前。

现在，它看起来只是 PHP 中的一个错误，因为这不符合我所知道的关于变量、参数、默认参数和引用如何工作的知识。此外，这个问题似乎只出现在我的真实代码中，并没有出现在我编写的用于测试它的简单 php 文件中。

**更多信息：**

`$foo`被赋值`NULL`，when`$arg2`是一个空字符串，`""`当它是一个非空字符串时被正确赋值。空字符串仍然是有效字符串，那么 PHP 为什么要这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:35:02.347

问题是`!=`比较。发生的情况是 PHP至少对您的一个变量进行了[类型](http://www.php.net/manual/en/language.types.type-juggling.php)`"" != null`处理，因此计算结果为 false。[本页](http://www.php.net/manual/en/types.comparisons.php)下方的表格显示了不同类型之间的比较会发生什么。需要类型严格的形式`!==`：

```
if ($arg2 !== null)
    $foo = $arg2; 
```

# c# - C#程序退出时Win7下重启

> ID：14819555
> 
> 赞同：0
> 
> 时间：2013-02-11T19:38:35.350
> 
> 标签：c#, mysql, windows-7, directx, reboot

我真的需要这方面的帮助。我有一个使用 .NET 4.0 的 C# 程序、一个 MySQL 数据库和一些 DX 代码。有时当程序退出时，计算机会重新启动。我在事件日志中没有任何条目，不知道是什么导致了重新启动。它发生在大多数 Win7（32 位）机器上，从来没有在 XP 下，从来没有在我的 Win7（64 位）开发机器上。

任何指示我如何开始解决这个问题？没有事件日志我有点迷失......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:24:03.193

好的，所以我通过 dumpchk.exe 运行 memory.dmp 并得到答案：“可能是由于 Epsce.sys。”

这是有道理的，我使用 Epson 的虚拟端口驱动程序与 POS 打印机通信。将更新该驱动程序（它已过时，版本 5），并且仅在问题仍然存在时才重新打开问题。

感谢您的回复！

# php - PHP Misplace DocType 警告

> ID：14819558
> 
> 赞同：1
> 
> 时间：2013-02-11T19:39:01.267
> 
> 标签：php, domdocument

我在运行时遇到 php 错误`domdocument`说

```
error: "DOMDocument::loadHTML() [<a href='domdocument.loadhtml'>domdocument.loadhtml</a>]: Misplaced DOCTYPE declaration in Entity, DOMDocument::loadHTML() 
line: 1 DOMDocument::loadHTML() [<a href='domdocument.loadhtml'>domdocument.loadhtml</a>]: htmlParseStartTag: misplaced &lt;html&gt; tag in Entity, line2: 
```

我的代码

```
$doc = new DOMDocument();

@$doc->loadHTML($htmlString); 
```

我的 html 字符串可能会有所不同。

我不知道如何解决这个问题。任何人都可以提出解决方案吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:44:49.590

那么，您应该尽一切努力确保正确的标记。但是，您可以通过以下方式抑制这些错误：

```
libxml_use_internal_errors(false); 
```

这不会因为 HTML 格式错误而触发错误（但`libxml_get_errors`如果您想查看解析过程中遇到的问题，您仍然可以使用它们来访问它们。

# backbone.js - 骨干样板：“this.model 未定义”

> ID：14819560
> 
> 赞同：2
> 
> 时间：2013-02-11T19:39:04.457
> 
> 标签：backbone.js, requirejs

我是一个骨干新手，所以我在设置应用程序时有点摸索。我使用主干样板（[https://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)）和 github-viewer （[https://github.com/tbranyen/github-viewer](https://github.com/tbranyen/github-viewer)）作为参考，虽然在运行时我似乎得到了“this.model is undefined”。

这是我当前的 router.js：

```
define([
    // Application.
    "app",

    //Modules
    "modules/homepage"
],
    function (app, Homepage) {
        "use strict";

        // Defining the application router, you can attach sub routers here.
        var Router = Backbone.Router.extend({
            initialize: function(){
                var collections = {
                    homepage: new Homepage.Collection()
                };

                _.extend(this, collections);

                app.useLayout("main-frame").setViews({
                    ".homepage": new Homepage.Views.Index(collections)
                }).render();
            },

            routes:{
                "":"index"
            },

            index: function () {
                this.reset();
                this.homepage.fetch();
            },

            // Shortcut for building a url.
            go: function() {
                return this.navigate(_.toArray(arguments).join("/"), true);
            },

            reset: function() {
                // Reset collections to initial state.
                if (this.homepage.length) {
                    this.homepage.reset();
                }

                // Reset active model.
                app.active = false;
            }

        });

        return Router;
    }
); 
```

还有我的 homepage.js 模块：

```
define([
    "app"
],
function(app){
    "use strict";

    var Homepage = app.module();

    Homepage.Model = Backbone.Model.extend({
        defaults: function(){
            return {
                homepage: {}
            };
        }
    });

    Homepage.Collection = Backbone.Collection.extend({
        model: Homepage.Model,

        cache: true,

        url: '/app/json/test.json',

        initialize: function(models, options){
            if (options) {
                this.homepage = options.homepage;
            }
        }
    });

    Homepage.Views.Index = Backbone.View.extend({
        template: "homepage",
        el: '#mainContent',

        render: function(){
            var tmpl = _.template(this.template);

            $(this.el).html(tmpl(this.model.toJSON()));

            return this;
        },

        initialize: function(){
            this.listenTo(this.options.homepage, {
                "reset": function(){
                    this.render();
                },

                "fetch": function() {
                    $(this.el).html("Loading...");
                }
            });
        }
    });

    return Homepage;
}); 
```

在此先感谢您的帮助！

**更新：**经过大量谷歌搜索（你应该看到我打开了多少标签），我*想*我取得了一点进展，但仍然没有运气。我更新了我的路由器以具有以下内容：

```
app.useLayout("main-frame").setViews({
    ".homepage": new Homepage.Views.Index()
}).render(); 
```

我对 homepage.js 模块进行了一些修改，现在看起来像这样：

```
define([
    "app",
    ["localStorage"]
],
function(app){
    "use strict";

    var Homepage = app.module();

    Homepage.Model = Backbone.Model.extend({

        defaults: function(){
            return {
                homepage: {}
            };
        }
    });

    Homepage.Collection = Backbone.Collection.extend({
        //localStorage: new Backbone.LocalStorage("Homepage.Collection"),

        refreshFromServer: function() {
            return Backbone.ajaxSync('read', this).done( function(data){
                console.log(data);
                //save the data somehow?
            });
        },

        model: Homepage.Model,

        cache: true,

        url: '/app/json/test.json',

        initialize: function(options){
            if (options) {
                this.homepage = options.homepage;
            }else{
                //this.refreshFromServer();
            }
        }
    });

    Homepage.Views.Index = Backbone.View.extend({
        template: "homepage",
        el: '#mainContent',

        initialize: function(){
            var self = this;
            this.collection = new Homepage.Collection();
            this.collection.fetch().done( function(){
                self.render();
            });
        },

        render: function(){
            var data = this.collection;

            if (typeof(data) === "undefined") {
                $(this.el).html("Loading...");
            } else {
                $(this.el).html(_.template(this.template, data.toJSON()));
            }
            return this;
        }
    });

    return Homepage;
}); 
```

如您所见，我有 localStorage 代码，但现在注释掉了，因为我只想让一切都先正常工作。最终目标是进行初始调用，从 JSON 文件加载数据，然后使用 localStorage 继续。在用户与我的应用进行多次交互后，该应用稍后会提交数据。

我正在加载主视图，尽管主页模块没有填充主视图中的#mainContent 容器。

我做了所有我能做的谷歌搜索，但沮丧的是它并没有让我陷入困境。再次感谢您查看此内容，感谢您提供任何反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:13:19.853

我认为您的班级层次结构在这里有点不稳定。例如，您的实例`Homepage.Collection`实际上是`homepage`从选项中分配一个属性。`Homepage.Collection`然后你传递一个into`Homepage.Views.Index`作为选项的实例`homepage`......这有点难以理解。

也就是说，在我看来，您的问题只是`model`在构建时没有提供选项`Homepage.Views.Index`：

```
new Homepage.Views.Index(collections) 
```

`collections`没有`model`属性，因此我看不到`this.model.toJSON()`视图中稍后如何可以访问模型。基本上，您似乎想要`Homepage.Views.Index`处理一*组*模型，而不仅仅是一个。所以你可能需要一个循环在你的`render`函数中结束`this.collection`（并且你应该改变你的视图构造以有一个`collection`选项而不是`homepage`选项）。

如果我在这里遗漏了什么或者我不清楚，那是因为我之前提到的这个数据模型的古怪。随意澄清你是如何推理出来的，我们可以再试一次:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:30:13.773

你的这个示例代码让我有点困惑，但我认为问题在于以下两行代码：

```
".homepage": new Homepage.Views.Index(collections)
$(this.el).html(tmpl(this.model.toJSON())); 
```

看起来您将集合传递给视图，但在视图中您使用 this.model，因此错误“this.model is undefined”，因为它确实是未定义的。

如果您不着急，我建议您重新开始。看来您尝试得太快了。我看到您有骨干网、requirejs（或其他一些模块加载器）和样板文件，对于刚接触骨干网的人来说，这需要很多东西。相信我，我知道，因为我也相对较新。也许从一些你好世界的东西开始，然后慢慢地向上走。否则，通过各种项目的代码来破解您的方式可能会令人困惑。

# c# - 如果满足条件，则从类中删除代码块

> ID：14819564
> 
> 赞同：0
> 
> 时间：2013-02-11T19:39:20.300
> 
> 标签：c#

我正在做的是逐行读取文件，然后将读取的每一行与预先指定的字符串进行比较。如果匹配，我想从我正在检查的类中删除代码，从与预先指定的字符串匹配的行开始，直到到达我确定的指定位置。我正在努力解决的是如何实施删除。我已经编写了加、减、调整等方法，但从不完全删除一大块代码，所以我不知道如何进行。我敢打赌有一些简单的方法可以做到这一点，但它现在正在逃避我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:41:57.687

听起来您在问“如何从文件中间删除某些内容？” - 它恰好是源代码。

最简单的方法是创建一个临时文件（或在内存流中），将所有要保留的内容写入其中，然后在处理完旧文件后，用您选择保留的内容覆盖它。

# javascript - JS 拖放图片 URL

> ID：14819573
> 
> 赞同：4
> 
> 时间：2013-02-11T19:40:20.977
> 
> 标签：javascript, html, url, drag-and-drop

嗨，我正在构建一个图像上传器，因此我可以将图像插入到我的博客文章中，我有一个表单可以完成所有图像上传，然后我通过保存到数据库的 URL 在创建文章页面中显示图像。我正在尝试做的是构建一个拖放功能以从页面中选择图像并在该图像上获取 url，以便我可以将其保存到数据库并将 url 保存到我的文章表中。所以我需要的是图像的 URL，当它被放到下拉框中时，我无法将 URL 保存在数据库中，以便在我的文章表中。这是我的代码，提前感谢您的帮助！

PHP/HTML

```
$sql = "SELECT * FROM images";
    $i = 0;

    if($data = query($sql)) {

        while($image = mysqli_fetch_array($data)) {
        ?>
        <div class="layout-column four">
            <img id="drag<?php echo $i++ ?>" src="<?php echo $image['file_name']?>" alt="<?php echo $image['description'] ?>" ondragstart="drag(event)">
        </div>
        <?php

    }

<div id="drop" class="layout-column twelve" ondrop="drop(event)" ondragover="allowDrop(event)"></div> 
```

JAVASCRIPT

```
function allowDrop(ev)
{
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));

var drop = document.getElementById('drop');
document.write(drop);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-09T10:51:47.713

尝试这个：

```
function drop(evt) {
    evt.stopPropagation();
    evt.preventDefault(); 
    var imageUrl = evt.dataTransfer.getData('text/html');

    var rex = /src="?([^"\s]+)"?\s*/;
    var url, res;

    url = rex.exec(imageUrl);
    alert(url[1]);
} 
```

[演示](http://jsfiddle.net/tLLKq/1/)

# html - 在绝对定位的容器内保留正常的自动换行

> ID：14819574
> 
> 赞同：25
> 
> 时间：2013-02-11T19:40:23.030
> 
> 标签：html, css, css-position, word-wrap

我在相对定位的容器中有一个绝对定位的文本块。绝对定位的元素超出了其容器的右边界。

问题是：文本没有正常换行；它过早地中断而不是扩展到其定义的`max-width`：

**观察到的行为：**

![在此处输入图像描述](../Images/0ef7241964109fe29ff17c77049a643d.png)

**期望的行为**

![在此处输入图像描述](../Images/e277593d1a53468538ef77af856ad9bf.png)

**HTML/CSS**（[**JSFIDDLE**：http://jsfiddle.net/WmcjM/](http://jsfiddle.net/WmcjM/)）：

```
<style>
.container {
    position: relative;
    width: 300px;
    background: #ccc;
    height: 100px;
}

.text {
    position: absolute;
    max-width: 150px;
    left: 290px;
    top: 10px;
    background: lightblue;
}
</style>

<div class="container">
    <div class="text">Lorem ipsum dolor sit amet</div>
</div> 
```

注意：一些似乎可以实现所需行为的更改，但并不是我想要的，包括：

*   定义`min-width: 150px`on `.text`（文本可能只是一个词，我不希望容器过大）
*   定位`.text`。相对于文档，而不是相对于`.container`（它需要出现在容器旁边，即使在调整浏览器大小时）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T19:48:51.797

尝试`position: relative;`在 .text 上使用

编辑：也将它放在带有自定义最大宽度的绝对定位包装器中

**CSS**

```
.container {
    position: relative;
    width: 300px;
    background: #ccc;
    height: 300px;
}

.wrap_text {
    position: absolute;
    max-width: 200px;
    top: 10px;
}

.text {
    position: relative;
    left: 290px;
    background: lightblue;
} 
```

和**HTML**：

```
<div class="container">
    <div class="wrap_text">
        <div class="text">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T19:49:05.837

将绝对位置更改为相对位置，并将 .text 包装在绝对定位的元素中。

[http://jsfiddle.net/WmcjM/4/](http://jsfiddle.net/WmcjM/4/)

```
.container {
    position: relative;
    width: 300px;
    background: #ccc;
    height: 300px;
}

.text {
    position: relative;
    /*min-width: 200px;*/
    left: 290px;
    background: lightblue;
}

.wrap {
    position: absolute;
    max-width: 200px;
    top: 10px;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-22T10:04:35.957

尝试使用以下方法之一：

**方法一：** `transform: translate(x, y);`代替`position: absolute; left: x; top: y;`

**方法 2：** `width: max-content;`有关详细信息，请阅读[此答案](https://stackoverflow.com/questions/51285308/how-do-min-content-and-max-content-work/51285309#51285309)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-19T03:42:16.810

这是我上次测试时可以在 Chrome、FF、Safari 和 IE11 中使用的策略。

基本上，这个想法是欺骗浏览器认为你有宽度。前面的答案可以正常工作，但是如果您缩小父容器的宽度，您会注意到您的内容在达到该父容器的宽度时开始换行。因此，解决这个问题的想法是使用另一个容器，该容器位于您要将内容锚定到的位置，然后相对于该事物定位您的内容。

这里的区别是我们将使用第一个定位的容器来设置我们想要的最大宽度。由于该容器的高度为 0，因此您甚至都看不到它。

JSFiddle：http: [//jsfiddle.net/WmcjM/252/](http://jsfiddle.net/WmcjM/252/)

**HTML**

```
<div class="container">
  <div class="sizing-container">
      <div class="your-text">You can put whatever you want here and you can see that the content wraps when you hit your max-width, but that max-width is actually defined as the width of the sizing container</div>
  </div>
</div> 
```

**CSS**

```
.container {
    position: relative;
    background: #ccc;
    width: 70px;
    height: 70px;
    margin-bottom: 100px;
}

.your-text {
    position: absolute;
    left: 0;
    top: 100%;
    background: lightblue;
    word-break: break-word;
}

.sizing-container {
    position: absolute;
    display: block;
    height: 0px;
    background: red;
    width: 200px; // This is your max-width!
    top: 16px;
    left: 100%;
} 
```

```
.container {
    position: relative;
    background: #ccc;
    width: 70px;
    height: 70px;
    margin-bottom: 100px;
}

.monkaS {
    position: absolute;
    left: 0;
    top: 100%;
    background: lightblue;
    word-break: break-word;
}

.poggers {
    position: absolute;
    display: block;
/*     height: 1px; comment this in to see whats happening*/ 
    height: 0px;
    background: red;
    width: 200px;
    top: 16px;
    left: 100%;
}
```

```
<div class="container">
  <div class="poggers">
      <div class="monkaS">Standard shit pogchamp chatlethal</div>
  </div>
</div>

<div class="container">
  <div class="poggers">
      <div class="monkaS">P O G G E R S P O G G E R S P O G G E R S P O G G E R S P O G G E R S P O G G E R S P O G G E R S P O G G E R S P O G G E R S P O G G E R S P O G G E R S</div>
  </div>
</div>

<div class="container">
  <div class="poggers">
      <div class="monkaS">Short</div>
  </div>
</div>

<div class="container">
  <div class="poggers">
      <div class="monkaS">ReallyLongReallyLongReallyLongReallyLongReallyLongReallyLongReallyLongReallyLongReallyLongReallyLongReallyLong</div>
  </div>
</div>
```

# c - C freopen 描述符 - 手动关闭/保持打开状态

> ID：14819575
> 
> 赞同：2
> 
> 时间：2013-02-11T19:40:28.583
> 
> 标签：c, file-descriptor, stdio

我之前一直在使用 freopen（来自 stdio.h）函数，而没有问自己这个问题。但现在我不确定。

例如，我重新打开了标准输出：

```
 #define  OUTPUT_FILE "out.txt"
    if ( freopen(OUTPUT_FILE,"w+",stdout) == NULL)
      printf("logout can't be opened\n"); 
```

通常每个进程都有并自动处理标准输出、标准错误、标准输入，我们不需要关心它们的关闭。
但是怎么会在这里？我已经重新打开了标准输出。
我应该调用 fclose 来关闭重新打开的标准输出吗？

PS 我更乐意查看执行此处理的部分代码，而不是听到我可以确信这里一切都很好。

在此先感谢您的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:50:02.973

`fclose(stdout);`用于关闭重定向。

关闭文件句柄通常更干净。如果一个文件指针在程序退出时打开，它将为您关闭。

但是，如果您只是关闭指针，stdout 将不会再次重定向到终端。

```
freopen("re.txt", "w", stdout);
printf("this is redirected stdout");
fclose(stdout); 

printf("this not"); 
```

您可以使用以下命令再次将标准输出恢复到终端（并从命令行中断重定向）：

```
freopen("/dev/tty", "a", stdout); 
```

[如果要撤消 freopen ( http://c-faq.com/stdio/undofreopen.html](http://c-faq.com/stdio/undofreopen.html) )，可以使用`dup`( [example](http://c-faq.com/stdio/rd.kirby.c) ) 恢复以前的指针或根本不使用 freopen 。

# javascript - 在 JQuery 中使用一个按钮打开/关闭的问题

> ID：14819578
> 
> 赞同：0
> 
> 时间：2013-02-11T19:40:42.607
> 
> 标签：javascript, jquery

嘿伙计们，我正在尝试制作一个按钮，该按钮将根据第一次是否被单击来打开和关闭-如果第二次单击它会打开-它会关闭并重置。

这是我到目前为止的代码-它只会打开而不会关闭：

```
var val;
$(".confirmed").click(function(){
    if (val == 1){
        hide(); 
    }
    val = 1;
    $(".confirmedtable").show();
    $(".searchconfirmed").show();
});

function hide(){

            $(".confirmedtable").hide();
            $(".searchconfirmed").hide();
            val = 0;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:42:23.140

您可以使用 jquery 中的 toggle() 函数来执行此操作。见：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

```
$('#button').click(function() {
    $('#div_to_show_hide').toggle('slow', function() {
        // Animation complete.
    });
}); 
```

如果当前隐藏元素，则切换将显示元素，如果当前显示元素，则隐藏元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:42:46.990

```
$(".confirmed").click(function(){
    $(".confirmedtable, .searchconfirmed").toggle();
}); 
```

[**小提琴**](http://jsfiddle.net/5VYg5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:45:49.177

作为`toggle()`基于答案的替代方案：

```
$('.confirmed').click(function(){
    $('.confirmedtable, .searchconfirmed')[$('.confirmedtable').is(':visible') ? 'hide' : 'show']();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/neu4k/)。

不过，它充其量只是一种选择。该`toggle()`方法更简洁。

# macos - servicestack hello 加载 http 处理程序失败

> ID：14819581
> 
> 赞同：1
> 
> 时间：2013-02-11T19:40:59.290
> 
> 标签：macos, mono, servicestack, xsp

我正在关注 ServiceStack.net 上的 Hello Web Service 教程。尝试访问服务时收到以下消息：

无法加载 httpHandler 类型“ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory，ServiceStack”

我正在使用 xsp，它是在我的项目工作目录中启动的，具有默认值（即：端口 8080）。我按照教程中的说明编辑了此目录中的 web.config。

服务如何找到 http 处理程序？在端口 8080 上使用 xsp 可以打开元数据页面吗？

与应用程序位于同一目录中的 web.config 包含：

```
<configuration>

    <!-- Required for MONO -->
  <system.web>
    <httpHandlers>
      <add path="servicestack*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
    </httpHandlers>
  </system.web>
  <!-- Required for IIS7 -->
  <system.webServer>
    <!-- ServiceStack: Required -->
    <validation validateIntegratedModeConfiguration="false"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:02:06.457

如前所述，我正在使用 Mono 和 xsp。我现在意识到，在我的工作目录中，MonoDevelop 不仅创建了 web.config，而且还创建了一个 bin 目录，其中包含我在项目中创建和引用的所有 dll。

将 xsp 根目录设置为包含 web.config 和 ./bin 的路径可以找到 http 处理程序并允许我最终访问我的 Web 服务和
`http://localhost:8080/ServiceStack/metadata`

在这种情况下，我不需要我的 dll 在 /bin 中，而是在项目的 bin 中

我也忽略了对 HelloAppHost().Init() 的调用

有点学习曲线......但我期待使用 ServiceStack。

谢谢@mythz 和@Mr.Young

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:52:40.543

我认为您的配置可能不正确。您可能将配置与将 ServiceStack 与现有 Web 框架一起使用的配置混淆了。将 ServiceStack 托管在根 (/) 路径而不使用任何其他 Web 框架的基本配置是

```
<system.web> 
   <httpHandlers> 
      <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/> 
      </httpHandlers> 
</system.web> 
```

`servicestack*`从`path`和 IIS 特定的东西中删除。您可能会在虚拟路径的 Mono ASP.NET 实现中遇到非常不酷的错误，详细信息如下：[https ://groups.google.com/d/msg/servicestack/kzfS88RldIU/LsJ2jV9M2LIJ](https://groups.google.com/d/msg/servicestack/kzfS88RldIU/LsJ2jV9M2LIJ)

# html - 两张背景图片。一个在 HTML 中，一个在 BODY 中。在 Firefox 中，身体图像未呈现

> ID：14819582
> 
> 赞同：0
> 
> 时间：2013-02-11T19:41:10.343
> 
> 标签：html, css

奇怪的事情正在发生。

我有一个基本的 html 代码。html，头部，身体。（因为我收到了一些反对票，这里是完整的代码）

```
<html>
<head>
</head>
<body>
</body>
</html> 
```

这是我的CSS：

```
html {
    background-image: url(background.png);
    background-repeat: repeat;
    margin-top:-8px;
}
body {
    background-image: url(telefonillo.png);
    background-repeat:no-repeat;
} 
```

这是 chrome 和 firefox 显示的内容： ![在此处输入图像描述](../Images/08e0e8739e9a473dc83526e9b33019ae.png)

我怎样才能解决这个问题？

我尝试使用 Firefox 进行“检查”，并尝试从 HTML 中删除“background.png”，然后出现“telefonillo.png”。

在 body 上尝试了“z-index:1”，但没有工作，因为它根本不满足。

编辑：我还尝试删除所有 div 和其他 css，以防任何规则之间存在某种问题，但它仍在发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:08:07.917

以前怎么不用这样

```
body:before {
    content:"";
    background:url(background.png) no-repeat top left;
    width:100%;
    height:100%;
}
body {
    background:url(telefonillo.png) no-repeat top left;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:05:03.607

也许您需要在 html 文档的头部添加以下标签：

```
<meta charset="utf-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

无论如何，这在过去帮助我解决了这样的奇怪问题。我希望它可以帮助那里的人！

# java - 线程和网络与android

> ID：14819583
> 
> 赞同：0
> 
> 时间：2013-02-11T19:41:19.530
> 
> 标签：java, android, networking

再会，

我正忙着为一个将要使用手机上的无线 tcp 连接的 android 应用程序编写一个网络类。

下面的这个类是我迄今为止编写的。但是在编码时我忘记了它的多线程方面。

网络类：

```
// Network Class That controls all the connecting, sending of data and recieving of data over the tcp protocol
public class Network {

    // GLOBAL VARIABLE DELERATIONS
    public Socket TCPSocket;
    public OutputStream out;
    public BufferedReader in;
    public InetAddress serverAddr;
    // Servers IP address
    public String SERVERIP;
    // Servers Port no.
    public int SERVERPORT;

    BufferedReader stdIn;

    // Constructor
    public Network() {

        // Set The IP of the server
        SERVERIP = "41.134.61.227";
        // Define the port for the socket
        SERVERPORT = 8020;
        // Resolve the ip adress
        try {
            serverAddr = InetAddress.getByName(SERVERIP);
            Log.i("IP Adress: ", "Has been resolved");
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    /**
     * Connect to the server socket
     * 
     * @return a boolean indicating if the connection was successful
     */
    public boolean connect() {

        // Create the Socket Connections
        try {
            Log.i("TCP is attempting to establish a connection", null);
            TCPSocket = new Socket(serverAddr, SERVERPORT);
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.e("TCP Connection error :", e.toString());
            return false; // Returns if the connection was unsuccessful
        }
        Log.i("TCP Connection :", "Connected");
        return true; // Returns if the connection was successful
    }

    /**
     * Disconnect from the server socket: Method to Call once you are done with
     * the network connection, Disconnects the socket from the server
     */
    public void disconnect() {

        try {
            out.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } // Close the out Stream

        try {
            in.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // stdIn.close();
        try {
            TCPSocket.close(); // Close the TCP Socket
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.i("TCP Connection :", "Disconnected");
    }

    /**
     * Send: Function that will transmit data aver the tcp socket (network)
     * 
     * @param data
     *            the packet in raw data form, recieves a byte array
     * @return Returns a boolean if the transaction was successful.
     */
    // Function that will transmit the data over the tcp socket.
    public boolean send(byte[] data) {
        try {
            out.write(data); // Write the data to the outStream
            out.flush();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false; // Return false if the TCP Transmit failed or
                            // encounted an error
        }
        return false;
    }

    // Function that will return the data that has been recieved on the tcp
    // connection from the server

    /**
     * Recieve: Function that recives data from the socket.
     * 
     * @return
     */
    public byte[] recieve() {

        return null;
    } 
```

我需要做什么才能将我的类转换为使用线程？

它的哪些部分需要在自己的线程上运行？

我认为只有接收需要它自己的线程？因为发送仅在您调用它时运行？

抱歉这个菜鸟问题，但这是我第一次尝试编写网络应用程序，而不仅仅是从网络上处理一些示例代码。我最初遵循本教程：[NETWORKING TUTORIAL](http://myandroidsolutions.blogspot.com/2012/07/android-tcp-connection-tutorial.html)，但我不太了解他们运行方法的 tcp 类。

所以总结一下我的问题，当网络需要但在不同的线程上运行时，哪些特定部分？谢谢

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:46:59.270

我只是在不同的线程上运行所有课程。那么......你如何将一个类转换为使用线程？我认为这是您实际上不确定的部分。不过这很容易......它可以像在这样的 Thread 中使用类一样简单：

```
new Thread(new Runnable(){
  public void run() {
    new Network().connect();
  }
}).start(); 
```

这将在单独的线程上运行您的代码，您甚至不必修改该类。所以......也就是说......让我们谈谈Android（上面的代码片段是纯Java，但这只是冰山一角）。

在 Android 上，使用线程以避免阻塞 UI 很重要；这可以通过上面的代码片段来完成，但是这种方法可能会导致一些问题。所以你必须学习这条规则：**我不会从外部 Thread 中更改我的 UI**。所以这里的问题是：“*我到底应该如何更新我的 UI 以反映我的工作线程上的变化？* ”。

有很多方法......最受欢迎的是`AsyncTask`类。它基本上允许您运行后台线程并提供以安全方式更新 UI 的方法。`Activity`如果您知道在运行时不会完成，它们会很有用`AsyncTask`。

如果您正在运行更多长期任务，则最好使用`Service`. [在服务上运行后台线程](http://github.com/casidiablo/groundy)有很多奇特的方法；但你也可以自己做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:44:53.387

任何可能阻塞的东西都应该在不同的线程上运行。这将是发送数据、接收数据或连接的任何尝试。在服务器上它将包括接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:47:40.347

您希望在后台线程（例如在[AsynTask](http://developer.android.com/reference/android/os/AsyncTask.html)中）上运行的所有网络（接收和发送），因为它会阻塞您的 UI 线程。让您的`Network`课程`extends AsyncTask`并实现文档中显示的所需方法。

完成所有后台任务，`doInBackground()`然后操纵结果`onPostExecute()`

# java - Ant测试编译找不到主类

> ID：14819586
> 
> 赞同：1
> 
> 时间：2013-02-11T19:41:38.940
> 
> 标签：java, ant, classpath, javac

我有一个 Ant 构建可以正确编译我的主类，但是在编译我的测试类时失败，因为它找不到我的任何主类的符号：

项目目录结构：

```
MyProj/
    src/
        main/
            java/
            resources/
        test/
            java/
            resources/
    build/
        build.properties
        build.xml
    gen/
        lib/
            main/
            test/
        bin/
            main/
            test/ 
```

（虽然它具有 Maven 项目的结构，但它不是。它是基于 Ant 的构建。我只是喜欢 Maven 组织项目的方式。）

`build.properties`

```
src.main.java.dir=src/main/java
src.test.java.dir=src/test/java
gen.dir=gen
gen.bin.dir=${gen.dir}/bin
gen.bin.main.dir=${gen.bin.dir}/main
gen.bin.test.dir=${gen.bin.dir}/test
gen.lib.dir=${gen.dir}/lib
gen.lib.main.dir=${gen.lib.dir}/main
gen.lib.test.dir=${gen.lib.dir}/test 
```

`build.xml`

```
<project name="MyProj" default="deploy" basedir="..">
    <property environment="env" />
    <property file="build/build.properties" />

    <!-- Sourcepath for main Java source. -->
    <path id="src.main.path">
        <fileset dir="${src.main.java.dir}">
            <include name="**.*java"/>
        </fileset>
    </path>

    <!-- Sourcepath for test Java source. -->
    <path id="src.test.path">
        <fileset dir="${src.test.java.dir}">
            <include name="**.*java"/>
        </fileset>
    </path>

    <!-- Path for main Java dependencies. -->
    <path id="lib.main.path">
        <fileset dir="${gen.lib.main.dir}">
            <include name="**.*jar"/>
        </fileset>
    </path>

    <!-- Path for test Java dependencies. -->
    <path id="lib.test.path">
        <fileset dir="${gen.lib.test.dir}">
            <include name="**.*jar"/>
        </fileset>
    </path>

    <!-- Main compile path. -->
    <path id="main.compile.path">
        <path refid="src.main.path"/>
        <path refid="lib.main.path"/>
    </path>

    <!-- Test compile path. -->
    <path id="test.compile.path">
        <path refid="src.test.path"/>
        <path refid="src.main.path"/>
        <path refid="lib.test.path"/>
        <path refid="lib.main.path"/>
    </path>

    <!-- Compile main Java sources. -->
    <target name="compile-main">
        <echo message="Compiling main sources." />
        <javac includeantruntime="false" srcdir="${src.main.java.dir}" destdir="${gen.bin.main.dir}">
            <classpath refid="main.compile.path"/>
        </javac>
    </target>

    <!-- Compile test Java sources. -->
    <target name="compile-test" depends="compile-main">
        <echo message="Compiling test sources." />
        <javac includeantruntime="false" srcdir="${src.test.java.dir}" destdir="${gen.bin.test.dir}">
            <classpath refid="test.compile.path"/>
        </javac>
    </target>
</project> 
```

当我运行时，`compile-main`我收到一条`BUILD SUCCESSFUL`消息（它构建得很好）。但是当我运行时`compile-test`，我遇到了 100 多个错误，如下所示：

```
[javac] /home/myUser/sandbox/workbench/eclipse/workspace/MyProj/src/test/java/com/myproj/server/SomeTest.java:79: cannot find symbol
[javac] symbol  : variable Widget
[javac] location: class com.myproj.server.SomeTest
[javac]                 Widget.Always,
[javac]                 ^
[javac] 100 errors

BUILD FAILED
/home/myUser/sandbox/workbench/eclipse/workspace/MyProj/build/build-local.xml:163: Compile failed; see the compiler error output for details. 
```

`Widget`是一个主类（枚举）并且有一个`Always`值。

我已经检查并重新检查了我的路径。对于我的生活，我无法弄清楚为什么我`test.compile.path`找不到我的主要代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:26:47.477

问题是`test.compile.path`指的是主类的源目录，而不是生成的类所在的目标目录。

如果您更改`javac`测试编译的任务以包含生成的类，它应该可以工作，如下所示：

```
 <javac includeantruntime="false" srcdir="${src.test.java.dir}" destdir="${gen.bin.test.dir}">
        <classpath refid="test.compile.path"/>
        <classpath location="${gen.bin.main.dir}" />
    </javac> 
```

# jquery - jQuery Validation 插件无法触发 onblur 并且也无法一致地验证提交

> ID：14819591
> 
> 赞同：0
> 
> 时间：2013-02-11T19:42:00.413
> 
> 标签：jquery, jquery-validate, validation

从字面上看，我已经使用了这个插件数百次，从来没有遇到过这样的问题.. 现在，当提交表单（字段为空）时，错误标签会正确显示.. 然而，当您填写一个字段或两个正确，这些字段的错误不会消失..如果您重新提交表单，它会提交..即使字段保持为空..并且未经验证。

我正在运行 jQuery v1.8.2 和 jQuery Validate v1.11.0 该站点在 Twitter 引导程序上运行，因此插件代码末尾的突出显示、成功和错误放置功能。

我可以提供开发人员的链接。环境，如果你给我发消息并有可能的修复，但想查看实时代码（这个应用程序尚未启动，我刚刚被雇用来清理一些东西，..因此处理这样的问题:[ )

非常感谢任何输入，谢谢！

这是JS：

```
$.validator.setDefaults({
submitHandler: function() {
    form.submit();
}
});

$('#register').validate({ 
rules: {
    name: {
        minlength: 2,
        required: true
    },
    lname: {
        minlength: 2,
        required: true
    },
    username: {
        minlength: 2,
        required: true,
        remote: {
            url: '/setup/verify_username/',
            cache: false
        }
    },
    email: {
        required: true,
        email: true,
        remote: {
            url: '/setup/verify_email/',
            cache: false
        }
    },
    password: {
        required: true,
        alphaNumeric: true,
        minlength: 5,
        maxlength: 250
    },
    password2: {
        required: true,
        alphaNumeric: true,
        minlength: 5,
        maxlength: 250,
        equalTo: '#password'
    },
    postal_code: {
        required: true,
        minlength: 5
    },
    timezones: {
        required: true
    },
    mp: {
        minlength: 10,
        required: true
    },
    gender: {
        required: true
    },
    dob: {
        required: true,
        date: true
    }
},
messages: {
    name: "Please enter your first name",
    lname: "Please enter your last name",
    username: {
        required: "Please enter a username",
        minlength: "Your username must consist of at least 2 characters"
    }, 
    email: "Please enter a valid email address",
    password: {
        required: "Please provide a password",
        minlength: "Your password must be at least 5 characters long"
    },
    password2: {
        required: "Please provide a password",
        minlength: "Your password must be at least 5 characters long",
        equalTo: "Please enter the same passwords"
    },
    postal_code: "Please enter a valid email address",
    timezones: "Please select a time zone",
    mp: "Please enter a valid mobile number. Only numbers please.",
    gender: "Please select a gender",
    dob: "Please enter a valid Date of Birth in mm/dd/yyyy format."
},
highlight: function(element) {
    $(element).closest('.control-group').removeClass('success').addClass('error');
},
success: function(element) {
    $(element).closest('.control-group').removeClass('error').addClass('success');
    $(element).closest('form').find('.valid').removeClass("invalid");
},
errorPlacement: function(error, element){
    error.text( element.closest('.control-group').find('.help-line') );
},
onfocusout: function(element) { 
    $(element).valid();  
}
}); 
```

我不愿意创建一个 jsfiddle 示例，只是因为所有因素都与现场环境不同，但根据@Sparky 的建议，这里是它（感谢 Sparky） [http://jsfiddle.net/DLcLJ/7/](http://jsfiddle.net/DLcLJ/7/)

您可以看到，如果您在字段中进行选项卡，它会正确通知您该字段无效.. 但是如果您填写数据，它将保持无效.. 如果您提交表单，则您刚刚输入的字段有效数据进入，将保持无效..嗯...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:56:22.063

我将指出我对您发布的代码的观察。

我看到了几个潜在问题，包括大量冗余和默认功能的重复......

* * *

**1）**您忘记将`form`变量传递给`submitHandler`回调函数...

```
submitHandler: function() {
    form.submit();
} 
```

应该...

```
submitHandler: function(form) {
    form.submit();
} 
```

它也是在通过验证时提交表单的默认行为，因此整个表单`submitHandler`都可以排除在您的选项之外，并且在这种情况下不会产生任何影响。只需让插件按照其默认值处理提交......这只是为了`submit`在表单验证时允许该事件。如果您不做任何其他事情，则无需编写自定义处理程序函数。

* * *

**2）** 默认情况下，插件将“聚焦”验证每个字段。那么，为什么要覆盖默认的 onfocusout 回调函数`$(element).valid();`呢？根据您的标题，它是“未能触发 onblur”。因此，只需删除以下内容，并让插件按照默认设置执行此操作...

```
onfocusout: function(element) { // <-- remove
    $(element).valid();         // <-- remove
}                               // <-- remove 
```

* * *

**3）** 你的代码......

```
highlight: function(element) {
    $(element).closest('.control-group').removeClass('success').addClass('error');
},
success: function(element) {
    $(element).closest('.control-group').removeClass('error').addClass('success');
    $(element).closest('form').find('.valid').removeClass("invalid");
}, 
```

`success`被触发“以显示有效元素”。 `unhighlight`被触发“以恢复选项所做的更改`highlight`”。

但是，`highlight`并且`unhighlight`是免费功能，所以也许你想要这个......

```
highlight: function(element, errorClass, validClass) {
    $(element).closest('.control-group').removeClass('success').addClass('error');
},
unhighlight: function(element, errorClass, validClass) {
    $(element).closest('.control-group').removeClass('error').addClass('success');
},
success: function(label) {
    $(label).closest('form').find('.valid').removeClass("invalid");
}, 
```

* * *

**4)** 您的代码包含无效规则。看评论...

```
password: {
    required: true,
    alphaNumeric: true,  // <-- not valid spelling and plugin missing
    minlength: 5,
    maxlength: 250
},
password2: {
    required: true,      // <-- redundant
    alphaNumeric: true,  // <-- redundant
    minlength: 5,        // <-- redundant
    maxlength: 250,      // <-- redundant
    equalTo: '#password'
}, 
```

应该拼写`alphanumeric`，它还需要缺少的[`additional-methods.js`插件。](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)

```
password: {
    required: true,
    alphanumeric: true,
    minlength: 5,
    maxlength: 250
},
password2: {
    equalTo: '#password'
}, 
```

* * *

**这是 OP 的 jsFiddle 的修改版本：http: [//jsfiddle.net/RQnWx/](http://jsfiddle.net/RQnWx/)**

[有关每个回调函数和选项的详细说明，请参阅此页面](http://docs.jquery.com/Plugins/Validation/validate#toptions)。

# magento - 外部网站的 Magento 购物车信息

> ID：14819601
> 
> 赞同：2
> 
> 时间：2013-02-11T19:42:48.147
> 
> 标签：magento, cart

环境：Magento Enterprise 1.12，Redhat Linux

我正在尝试用最少的代码在 Magento（企业 1.12）中开发一个独立的 php 页面来显示购物车信息。这将由显示来自 Magento 商店的基本购物车信息的外部网站使用。如果可能，我会尽量避免使用成熟的自定义 MVC 模型，因为我只是想获得最少的只读信息。

我想显示：

*   购物车中的商品数量（无论是否登录）
*   购物车中的产品名称（如果它不为空）
*   用户是否登录
*   客户名称（如果他们已登录）

我在网上看到了很多关于此的帖子，并且尝试了所有示例但没有成功。

这是我正在尝试的：

```
require_once 'app/Mage.php';
umask(0);
Mage::app();

// The following three variables are successfully set
// but they don't help with what I'm trying to do

$session = Mage::getModel('core/cookie')->get('frontend');
$cartid = Mage::getModel('core/cookie')->get('CART');
$sid = Mage::getModel("core/session")->getEncryptedSessionId();
echo "session=$session <br />\n";
echo "cartid=$cartid <br />\n";
echo "sid=$sid  <br />\n"; 

// None of the following seem to work, whether or not I''m logged in
$cart = Mage::getSingleton('checkout/cart')->getItemsCount();
echo "cart items count: $cart <br />\n";
$cart = Mage::helper('checkout/cart')->getItemsCount();
echo "cart items count: $cart <br />\n";
$cart = Mage::helper('checkout/cart')->getCart()->getItemsCount();
echo "cart items count: $cart <br />\n";
$cart = Mage::helper('checkout/cart')->getCart()->getQuote()->getItemsCount();
echo "cart items count: $cart <br />\n";
$count = Mage::helper('checkout/cart')->getSummaryCount();
echo "cart items count: $cart <br />\n";

// None of the following seem to work. I'm logged in, but the following code says I'm not.
$session = Mage::getSingleton("customer/session");
if($session->isLoggedIn()) { echo "logged in <br />\n"; } else { echo "not logged in <br />\n"; }
$session = Mage::getSingleton('customer/session', array('name'=>'frontend'));
if($session->isLoggedIn()) { echo "logged in <br />\n"; } else { echo "not logged in <br />\n"; } 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:57:11.913

**更新**

我通过 System-> Configuration->Web->Session Cookie Management 下的管理部分设置了 cookie 路径。

然后我创建了一个 test.php 并将您的代码复制到文件中，并在 Mage::app() 之后添加了一行：

```
Mage::getSingleton('core/session', array('name'=>'frontend')); 
```

# javascript - 在 js 中使用 getelementbyid 显示图像数组

> ID：14819606
> 
> 赞同：0
> 
> 时间：2013-02-11T19:43:23.257
> 
> 标签：javascript

```
for (i=0;i<tar.length;i++) {
document.write("<img src=" + tar[i] + " width='100' height='100'>"+"  ");
} 
```

tar 数组有图像源，我想使用 getElementById 而不是 document.write 来显示它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:53:11.070

使用[`document.createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)and [`appendChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)，您可能会这样做：

```
var myContainer = document.getElementById("someContainerId");

for (i=0;i<tar.length;i++) {
    var myimg = document.createElement("img");
    myimg.src= tar[i];
    myimg.width="100";
    myimg.height="100";

    myContainer.appendChild(myimg);
} 
```

当然，请确保确实有一个容器元素，其 id 为`someContainerId`，或者您想给它的任何 id 。如果容器元素是一个`<div>`.

# javascript - 使用 Jquery 对 Asp.net Web 方法的 Ajax 调用

> ID：14819607
> 
> 赞同：1
> 
> 时间：2013-02-11T19:43:24.957
> 
> 标签：javascript, jquery, asp.net, ajax, webmethod

我正在使用 jquery 方法，将信息（即仅成员标识#）从客户端发送到服务器端。

服务器端实现了传统的Web Method，以捕获发送的数据并基于它执行SQL查询。

[使用 jQuery 的 Web 服务方法](http://www.aspsnippets.com/Articles/Make-AJAX-Call-to-ASP.Net-Server-Side-Web-service-method-using-jQuery.aspx)

但是，直到现在，在 SQL 查询之后，我一直在从服务器端将单个字符串返回到客户端。

想知道返回一系列复杂字符串的最佳方式是什么...成员识别号、开始日期、结束日期、成员类型...根据成员的类型，可以有多个开始日期和结束日期.

我应该研究 XML 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:30:21.103

甚至返回数据表怎么样

```
 $.ajax({
type: "POST",
url: "YourPage.aspx/doSomething",
data: "{'id':'1'}",
dataType: "json",
contentType: "application/json; charset=utf-8",
success: function (data) {
    var returnedstring = data.d;
    var jsondata = $.parseJSON(data.d);//if you want your data in json
  }
}); 
```

aspx：

```
[WebMethod]
public static string doSomething(int id)
{
   ....
   DataTable dt = new DataTable();
   dt = anothermethodReturningdt(id)

   return JsonConvert.SerializeObject(dt);
} 
```

您可以使用[json.net](http://james.newtonking.com/projects/json-net.aspx)序列化 .Net 对象

**编辑**

你也可以这样做

```
[WebMethod]
public static string doSomething(int id)
{
   Product product = new Product();
   product.Name = "Apple";
   product.Expiry = new DateTime(2008, 12, 28);
   product.Price = 3.99M;
   product.Sizes = new string[] { "Small", "Medium", "Large" };

   return JsonConvert.SerializeObject(product);
} 
```

关键是您可以序列化任何类型的对象、数组、集合等，然后将其传递回调用脚本。

# jquery - 在javascript文本输出中输出换行符？

> ID：14819611
> 
> 赞同：0
> 
> 时间：2013-02-11T19:43:32.373
> 
> 标签：jquery, html, line-breaks

我正在尝试输出一系列由换行符分隔的滚动文本消息。

我的代码如下所示：

```
<script type="text/javascript" src="xbMarquee.js"></script>

<script type="text/javascript">
<!--
//set the marquee parameters
function init() { down_marquee.start(); }
var down_marquee_Text = '<em>"This is a test comment. - Love from Admin /n"This is a far longer test comment which is of greater and more powerful value to the research portions of both physical, mental and citrus flavoured sciences all around the world for years to come."-Love PICKLES"</em>';
var down_marquee_Direction = 'down';
var down_marquee_Contents='<span style="white-space:nowrap;">' + down_marquee_Text + '</span>';
up_marquee = new xbMarquee('down_marquee', '100%', '90%', 6, 100, down_marquee_Direction, 'scroll', down_marquee_Contents);
window.setTimeout( init, 200);
-->
</script></div> 
```

任何人都可以帮我修复它以便显示换行符吗？我已经尝试了所有我能想到的东西，包括标签等等。

谢谢！

奈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:46:23.867

使用`<pre>`保留空格的 HTML 元素。否则替换`\n`为`<br>`.

# ios - AVPlayer“无法完成动作”

> ID：14819612
> 
> 赞同：9
> 
> 时间：2013-02-11T19:43:41.217
> 
> 标签：ios, ios5, avfoundation, avplayer

播放多个视频后出现此错误：

```
Error Domain=AVFoundationErrorDomain Code=-11819 "Cannot Complete Action" UserInfo=0x1d83a7f0 {NSLocalizedRecoverySuggestion=Try again later., NSLocalizedDescription=Cannot Complete Action} 
```

我的播放功能如下所示：

```
- (void)playItem:(AVPlayerItem*)item
  playerView:(PlayerView*)playerView
     doReset:(BOOL)reset
{
// if it's different item or we want to reset then replace item and rewind player to zero
if([player currentItem] != item || reset)
{
    [player pause];
    [player replaceCurrentItemWithPlayerItem:item];
    [player seekToTime:kCMTimeZero];
}

// set the view's player
[playerView setPlayer:player];

[player play]; 
```

播放器仅在数百次尝试后才停止工作。我有 5 个 PlayerView，它们是 5 个在触摸时会播放的视频。为了达到我得到这个错误的地步（仅通过查看 AVPlayer 实例错误属性），我必须多次触摸这些按钮（就像之前提到的那样，它从几百到几千次）。我已经尝试了各种方法来解决这个问题，但没有成功。我知道如果我添加这一行**[playerView setVideoFillMode:AVLayerVideoGravityResizeAspectFill]**会使这个错误提前出现（bebore 200 次）。我还没有尝试过使用单个 PlayerView 将重复用于每个按钮，但将来我将不得不同时播放多个视频，我认为它会在一段时间后引发这个问题。谷歌搜索这个错误或枯萎搜索 StackOverflow 到目前为止并没有给我带来任何解决方案。

有没有人遇到过这种问题？它发生在带有 ARC 的 iOS5 或 iOS6（不针对以下 5）中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T04:00:15.527

我没有准备好尝试您的代码，但是您是否尝试过`replaceCurrentItemWithPlayerItem:`强制`@autoreleasepool`ARC 进行一些清理？

或者，您是否通过仪器检查了分配？

根据您的描述，这听起来很像泄漏。您*可能*已经发现了一个错误`AVPlayer`（我怀疑它是否得到了您正在给它的那种练习！），如果是这样，您绝对应该[向 Apple 提交一个错误](http://bugreport.apple.com)，但是您可以做一些事情来解决。

您是否有理由继续重复使用同一播放器？您是否尝试过抛弃旧播放器并创建一个新播放器，而不是`replaceCurrentItemWithPlayerItem:`?

让我们知道 Instruments-Allocations 显示了什么。我敢打赌，这是追根究底的关键。

# php - Drupal 7 覆盖核心函数 taxonomy_field_validate

> ID：14819613
> 
> 赞同：1
> 
> 时间：2013-02-11T19:43:43.000
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-taxonomy

由于 hierarchy_select 模块中的一些自定义修改，我需要能够覆盖核心分类模块中的 taxonomy_field_validate 函数。

我尝试在名为 MYMODULE_taxonomy_field_validate 的自定义模块中创建一个函数，它没有使用它，我尝试更改字段设置，但这会改变数据在数据库中的存储方式，并且需要将其保留为分类术语.

还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:54:10.473

您需要在表单验证时取消设置此功能。

在你的模块中，编写一个`hook_form_alter`实现并将这段代码写在里面

```
unset($form['#validate']['taxonomy_field_validate']); 
```

希望这有效。

# java - Drools：时间限制规则

> ID：14819615
> 
> 赞同：5
> 
> 时间：2013-02-11T19:43:51.400
> 
> 标签：java, drools

Drools[文档](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html/ch04.html#d0e5150)提到规则可以使用属性，如`date-effective`和`date-expires`来指定绝对规则有效期。

例如

```
rule "Date-restricted rule"
    date-effective "20.2.2013 8:00"      # 8 AM
    date-expires   "20.2.2013 16:00"     # 4 PM
    when
    then
end 
```

Drools 还支持使用间隔 as`timer(int:)`和 cron as定期重复`timer(cron:)`的规则，但这意味着在这些点触发规则。

# 问题：

如果有任何选项如何指定具有时间限制的定期可用（未触发）规则，我很感兴趣。例如，让我们想象一些公司的营业时间 - 只能在正式工作期间进行操作，但不能在下班后进行。

我想要这样的东西，但这不是 Drools 的有效规则

```
rule "Time-restricted rule"
    time-effective "8:00"      # 8 AM
    time-expires   "16:00"     # 4 PM
    when
    then
end 
```

是否可以将此类规则扩展为仅在周一至周五上午 8 点至下午 4 点有效？

* * *

# 解决方案（由 Esteban Aliverti 提供）：

Drools 不直接支持基于时间的关键字，但它们使用[Quartz](http://quartz-scheduler.org/)库提供了更强大的日历机制。`StatefulSession`或`WorkingMemory`由`StatelessSession`具有定义这些日历的方法创建，这些日历可以限制可以触发规则的日期和时间。

**示例：** 规则定义

```
rule "Business hours only"
    calendars "business-hours"
    when
        SomeAttachedClass()
    then
        System.out.println("Rule is fired");
end 
```

日历定义

```
import org.quartz.impl.calendar.DailyCalendar;

// stateless session and working memory or directly stateful session
StatefulKnowledgeSession memory = session.newWorkingMemory(); 
// interested time range is 8-16, also there is many Calendar implementation, not just Daily
DailyCalendar businessHours = new DailyCalendar( 8, 0, 0, 0, 16, 0, 0, 0 );
// by default, defined time is EXCLUDED, the inversion makes it INCLUDED and excludes the rest
businessHours.setInvertTimeRange( true );
//convert the calendar into a org.drools.time.Calendar
org.drools.time.Calendar businessHoursCalendar = QuartzHelper.quartzCalendarAdapter( businessHours );
//Register the calendar in the session with a name. You must use this name in your rules.
memory.getCalendars().set( "business-hours", businessHoursCalendar ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T11:16:51.250

更好的方法是使用`calendar`而不是`timer(cron:)`. 我设法按照以下步骤完成了与您正在寻找的类似的事情：

创建会话时，您必须创建和配置 Quartz 日历：

```
//in this case I'm using a DailyCalendar but you can use whatever implementation of Calendar you want
org.quartz.impl.calendar.DailyCalendar businessHours = new org.quartz.impl.calendar.DailyCalendar("business-hours", 8, 0, 0, 0, 16, 0, 0, 0);
businessHours.setInvertTimeRange(true);

//convert the calendar into a org.drools.time.Calendar
org.drools.time.Calendar businessHoursCalendar = QuartzHelper.quartzCalendarAdapter(businessHours);

//Register the calendar in the session with a name. You must use this name in your rules.
ksession.getCalendars().set( "business-hours", businessHoursCalendar ); 
```

然后在您的规则中，您必须编写如下内容：

```
rule "Rule X"
    calendars "business-hours"
when
    ...
then
    ...
end 
```

希望能帮助到你，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:53:20.013

这是另一个解决方案。也许有点破解，但它的工作原理：

您可以创建一个简单的 Java 类来封装当前时间，并将该类的一个实例添加到工作内存中。这个类，叫做它`TimeFact`，有方法`update(long time): void`，`getDay(): String`和`getTime(): String`。然后可以在`when`规则的一部分中使用此事实，如下所示：

```
rule "Foo"
when
    TimeFact(day in ("Monday", "Thursday"), time > "16:00:00" && < "17:00:00")
    [more conditions]
then
    [do stuff]
end 
```

在触发规则之前，您需要更新`TimeFact`（并通知规则引擎此更新）。尽管如此，它的优点是可以在规则本身中描述规则激活时间，而不必定义可能的大量`calendars`，从而使这种方法更加灵活。

当然，如果你只有几个这样的定时条件，比如“办公时间”，那么使用的解决方案`calendars`是更可取的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:29:20.473

根据文档，您可以使用 cron 表达式作为计时器。所以，你可能会使用这样的东西：

```
timer(cron: * 8-16 * * 1-5 *) 
```

**免责声明：我没有测试这个！**

希望能帮助到你，

# c++ - 将结构读取写入二进制文件

> ID：14819618
> 
> 赞同：0
> 
> 时间：2013-02-11T19:44:01.227
> 
> 标签：c++

写/读没有给出正确的结果。

你能告诉我为什么第二和第三条记录没有正确显示吗？

另外如何知道二进制文件包含多少条记录？

请看下面的代码

```
 #include <iostream.h>
  #include <fstream.h>
  #include <string.h>

  enum Ticket_type { ADULT, CHILD, STUDENT, SENIOR, FREE, SPECIAL };

  typedef struct transaction_stru
  {
    char  ID[10];
    int   tariff;
    Ticket_type  tickettype;
    int   qty;
    float total;
  }transaction_t;

 int main () {    
   // Attempt to open it for reading.
   fstream fs("trans.dat", ios::in);
   if (!fs)
      fs.open("trans.dat", ios::out | ios::binary | ios::app);     
   else{
     fs.close(); // File exists; close and reopen for write.
     transaction_t dailytrans[3];    
     dailytrans[0] = {"00001", 20, STUDENT, 1, 20.00 };
     dailytrans[1] = {"00002", 30, ADULT, 2, 60.00 };
     dailytrans[2] = {"00003", 30, SPECIAL, 3, 30.00 };    
     fs.open("trans.dat", ios::out | ios::binary | ios::app);
     fs.write((char*)&dailytrans,sizeof(dailytrans));
     fs.close();
    }

    // Let us read the file now
    fs.open("trans.dat", ios::in | ios::binary);
    if(!fs){
      cout << "Error Opening trans.dat";
      //throw SomeFileException;
    }

     transaction_t results[3]; 
     fs.read((char*)&results,sizeof(transaction_stru));
     for (size_t i=0; i < 3; i++)
      {
         cout << results[i].ID << endl;
         cout << results[i].tariff << endl;
         cout << results[i].tickettype << endl;
         cout << results[i].qty  << endl;
         cout << results[i].total << endl;
     }
     return 0;
   } 
```

**输出得到如下： -**

```
 00001
   20
   2
   1
   20
   ╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠00001
   -858993460
   -858993460
   -858993460
   -1.07374e+008
   ╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠00001
   -858993460
   -858993460
   -858993460
   -1.07374e+008
   Press any key to continue 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T19:51:41.053

您似乎只编写和读取一个结构，但打印 3。因此，最后两个是堆栈中的垃圾。

此外，谨慎的做法是至少清零`ID`，最好是整个结构，以避免磁盘文件中的未定义字节（`ID`在这种情况下为未初始化的字节），例如对于您有问题的特定代码：

```
memset (dailytrans, 0, sizeof(dailytrans)); // this depends on dailytrans size being known at compile time 
```

# android - 如何使用 GPS 和地图标记在 Android 中制作 From/To Address 文本字段？

> ID：14819621
> 
> 赞同：0
> 
> 时间：2013-02-11T19:44:24.067
> 
> 标签：android, google-maps, gps, location, street-address

您好强大的开发人员，

我正在编写一个 android 应用程序以向出租车发送请求。

我已经安装了 Android Maps API v2，并且地图片段工作正常。

我需要为“发件人”地址编写一个文本字段，为“收件人”地址编写另一个文本字段

我需要能够通过文本或邮政编码输入地址，然后应用程序会给我从选项中选择最准确地址的选项，我还希望能够将手机的当前位置检索到文本中通过 GPS 和网络提供商进行字段。最后，我需要能够使用地图片段上的标记来微调选择的位置。

在android地球上我怎么能做到这一点？

我在 Android API 8 Froyo btw 上开发，因为我需要该应用程序与大多数 Android 手机兼容。

Cheerio，你们这些很酷的程序员

迷失的开发者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:18:17.023

你已经尝试了什么？

“最难”的部分可能是验证他们输入的地址……但有一些 API 可以让这变得非常简单。我在 SmartyStreets 工作，[LiveAddress API](http://smartystreets.com/products/liveaddress-api)就是您可以使用的此类服务之一。一个简单的 HTTPS 请求可以为您提供建议/候选地址的列表。例如：

`https://api.smartystreets.com/street-address?street=1600+amphitheatre+parkway&city=mtn+view&state=ca&zipcode=&auth-id=<your auth ID>&auth-token=<your API key>`

结果将是：

```
[
    {
        "input_index":0,
        "candidate_index":0,
        "delivery_line_1":"1600 Amphitheatre Pkwy",
        "last_line":"Mountain View CA 94043-1351",
        "delivery_point_barcode":"940431351000",
        "components":
        {
            "primary_number":"1600",
            "street_name":"Amphitheatre",
            "street_suffix":"Pkwy",
            "city_name":"Mountain View",
            "state_abbreviation":"CA",
            "zipcode":"94043",
            "plus4_code":"1351",
            "delivery_point":"00",
            "delivery_point_check_digit":"0"
        },
        "metadata":
        {
            "record_type":"S",
            "county_fips":"06085",
            "county_name":"Santa Clara",
            "carrier_route":"C058",
            "congressional_district":"14",
            "rdi": "Commercial",
            "latitude": 37.41907,
            "longitude": -122.07764,
            "precision": "Zip7"
        },
        "analysis":
        {
            "dpv_match_code":"Y",
            "dpv_footnotes":"AABB",
            "dpv_cmra":"N",
            "dpv_vacant":"N",
            "ews_match":false,
            "footnotes":"B#N#"
        }
    }
] 
```

如果地址不明确，将返回一些选项，您可以将这些选项显示给用户，以便他/她选择其中之一。

你提到了邮政编码：还有一个 SmartyStreets 端点来验证邮政编码和城市/州。

为了在地图上显示标记，Google Maps API 提供了可用的功能。

# postgresql - 是否可以将 Heroku Postgres DB 复制到我笔记本电脑上的从属数据库？

> ID：14819624
> 
> 赞同：7
> 
> 时间：2013-02-11T19:44:31.577
> 
> 标签：postgresql, heroku, replication

我想让托管在 Heroku 上的主 Postgres 数据库复制到我笔记本电脑上的从属数据库。这可能吗？

Heroku 的文档讨论了 Heroku 中托管的 master 和 slave： [https ://devcenter.heroku.com/articles/heroku-postgres-follower-databases](https://devcenter.heroku.com/articles/heroku-postgres-follower-databases)

其他人问是否有可能在 Heroku 外部拥有主人，在 Heroku 内部拥有奴隶（不是）： [Follow external database from Heroku](https://stackoverflow.com/questions/12182899/follow-external-database-from-heroku)

我还没有看到相反的答案——主人在 Heroku，奴隶在外面。

我为什么要这个？加快发展。由于我的应用程序在本地运行并且数据库在云中，因此往返时间很长，因此数据访问速度很慢。大多数数据访问是只读的。如果我可以有一个本地奴隶，它会大大加快速度。

相关：如果我的笔记本电脑断开了一段时间怎么办？这会给主人带来麻烦吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T20:04:12.437

您不能在 Heroku 网络之外创建追随者（从属）——追随者需要超级用户访问权限才能创建，而 Heroku Postgres 不提供，因此您只能在 Heroku 上运行追随者。

如果你想在本地下载一个副本以供使用/检查，你可以使用 pgbackups 来做到这一点：[https ://devcenter.heroku.com/articles/heroku-postgres-import-export](https://devcenter.heroku.com/articles/heroku-postgres-import-export)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-14T18:18:20.023

为此，我强烈推荐[Parity](https://github.com/thoughtbot/parity)程序。

它使用漂亮的命令行界面将最后一个 Heroku 备份复制到您的本地计算机：

`development restore production`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:57:26.413

我宁愿时不时地从 Heroku 中提取生产数据库的内容。

```
$ heroku db:pull 
```

您可以通过 rake 任务加快速度。

```
# lib/tasks/deployment.rake
namespace :production do
  desc 'Pull the production DB to the local env'
  task :pull_db do
    puts   'Pulling PRODUCTION db to local...'
    system 'heroku db:pull --remote MY_REMOTE_NAME --confirm MY_APP_NAME'
    puts   'Pulled production db to local'
  end
end 
```

您可以调用`rake production:pull_db`以覆盖您的本地开发数据库。

# java - 如何使用opencsv读取包含'\'的字符串？

> ID：14819626
> 
> 赞同：12
> 
> 时间：2013-02-11T19:44:35.360
> 
> 标签：java, opencsv

当我使用 opencsv 读取 csv 文件时，在字符串末尾遇到“\”时它无法正常工作。它使 " 成为字符串的一部分，而不是我想要的 '\'。我想必须有一些方法可以添加另一个 '\' 让它转义 '\'-字符？*无需*手动编辑csv 文件。我已经搜索但没有找到任何东西。

为了澄清我的问题，它看起来像这样：

**csv 文件**

```
"A",       "B",        "C",       "D"
"value 1", "value 2",  "value 3", "value 4"
"value 5", "value 6\", "value 7", "value 8" 
```

我的代码看起来像这样（不是真的，但它显示了我的问题）：

```
String inFile = "in.csv";
CSVReader reader = new CSVReader(new FileReader(inFile));
String[] line;

while ((line = reader.readNext()) != null) {
    for (int i = 0; i &lt; line.length(); i++) {
        System.out.println(i + " " + line[i]);
    }
} 
```

我希望将其解析为每行包含 4 个元素的 String[]，但最后一行仅解析为两个元素，如下面的输出所示。

```
1 A
2 B
3 C
4 D
1 value 1
2 value 2
3 value 3
4 value 4
1 value 5
2 value 6",value 7,value 8 
```

我试图将读者更改为：

```
CSVReader reader = new CSVReader(new InputStreamReader(new FileInputStream(inFile), "UTF-8")); 
```

但没有任何运气。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T19:50:46.330

也许在阅读器的构造函数中更改转义字符？

```
CSVReader(new InputStreamReader(new FileInputStream(inFile)), ',', '"', '|') 
```

这是假设`|`未在您的 CSV 文件中使用

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-09-16T18:45:57.363

更清洁和推荐的解决方案是使用`RFC4180Parser`而不是 default `CSVParser`：

```
String csv = "come,csv,string";
RFC4180Parser rfc4180Parser = new RFC4180ParserBuilder().build();
CSVReader csvReader = new CSVReaderBuilder(new StringReader(csv)).withCSVParser(rfc4180Parser).build(); 
```

参考：[https ://sourceforge.net/p/opencsv/support-requests/50/](https://sourceforge.net/p/opencsv/support-requests/50/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T19:47:15.553

反斜杠用于转义，`"`因为某些值可能包含`"`字符，如果没有反斜杠，您将无法包含该字符。

因此，如果您想使用`\`它，您也需要将其转义`\`，就像您将它放在常规 Java 字符串中一样。

```
"A",       "B",         "C",       "D"
"value 1", "value 2",   "value 3", "value 4"
"value 5", "value 6\\", "value 7", "value 8" 
```

您可以修改 CSV 文件，或者使用[CSVReader](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVReader.html#CSVReader%28java.io.Reader,%20char,%20char%29)中的另一个构造函数，您可以从中选择转义字符

# c++ - 使用 FMOD 和 MinGW 编译项目时出现很多错误

> ID：14819627
> 
> 赞同：1
> 
> 时间：2013-02-11T19:44:41.220
> 
> 标签：c++, mingw, fmod

我决定在我的项目中使用 FMOD 进行声音播放，但是我遇到了很多编译器错误，我不确定如何修复。

使用 FMOD 的类的头文件看起来或多或少是这样的：

```
#ifndef PROJECTNAME_SOUNDMANAGER_H_
#define PROJECTNAME_SOUNDMANAGER_H_

#include <iostream>

#include <fmod.h>
#include <fmod.hpp>
#include <fmod_errors.h>

class SoundManager {
    public:
        static SoundManager &instance();
        void play(char *data, size_t size, bool loop=false);
        void stopAll();
    private:
        void ERRCHECK(FMOD_RESULT result);
        SoundManager() : mSystem(nullptr) {
            initFMOD();
        }
        SoundManager(const SoundManager &other);
        SoundManager &operator=(const SoundManager &other);
        void initFMOD();
        FMOD::System *mSystem;
        FMOD::Sound *mSound;
        FMOD::Channel *mSoundChannel;
};

#endif // PROJECTNAME_SOUNDMANAGER_H_ 
```

以下是一些编译错误：

```
...../api/inc/fmod.h:1054:33: error: expected ')' before '*' token
...../api/inc/fmod.h:1056:33: error: expected ')' before '*' token
...../api/inc/fmod.h:1058:33: error: expected ')' before '*' token
...../api/inc/fmod.h:1059:33: error: expected ')' before '*' token
.....
...../api/inc/fmod.h:1465:5: error: 'FMOD_SOUND_PCMREADCALLBACK' does not name a type
...../api/inc/fmod.h:1466:5: error: 'FMOD_SOUND_PCMSETPOSCALLBACK' does not name a type
...../api/inc/fmod.h:1467:5: error: 'FMOD_SOUND_NONBLOCKCALLBACK' does not name a type
...../api/inc/fmod.h:1473:5: error: 'FMOD_FILE_OPENCALLBACK' does not name a type
.....
...../api/inc/fmod.h:1828:19: error: expected initializer before 'FMOD_Memory_GetStats'
...../api/inc/fmod.h:1829:19: error: expected initializer before 'FMOD_Debug_SetLevel'
...../api/inc/fmod.h:1830:19: error: expected initializer before 'FMOD_Debug_GetLevel'
...../api/inc/fmod.h:1831:19: error: expected initializer before 'FMOD_File_SetDiskBusy'
.....
...../api/inc/fmod.hpp:59:21: error: expected ';' at end of member declaration
...../api/inc/fmod.hpp:59:51: error: ISO C++ forbids declaration of 'release' with no type [-fpermissive]
...../api/inc/fmod.hpp:62:21: error: expected ';' at end of member declaration
...../api/inc/fmod.hpp:62:21: error: declaration of 'FMOD_RESULT FMOD::System::_stdcall'
...../api/inc/fmod.hpp:59:21: error: conflicts with previous declaration 'FMOD_RESULT FMOD::System::_stdcall'
...../api/inc/fmod.hpp:62:73: error: ISO C++ forbids declaration of 'setOutput' with no type [-fpermissive]
...../api/inc/fmod.hpp:63:21: error: expected ';' at end of member declaration
...../api/inc/fmod.hpp:63:21: error: declaration of 'FMOD_RESULT FMOD::System::_stdcall'
...../api/inc/fmod.hpp:59:21: error: conflicts with previous declaration 'FMOD_RESULT FMOD::System::_stdcall'
..... 
```

如果它有任何区别，我正在编译`-std=c++0x`.

我尝试过搜索，但找不到任何可以帮助我解决这些错误的东西。

请注意，我使用的是 FMOD Ex 4.44.06。

**编辑：**我似乎发现了问题。当我制作一个最小的示例并在没有 的情况下编译它时`-std=c++0x`，一切都编译得很好。但是，如果我添加那个标志，我会得到与这个项目相同的错误。有没有办法让 FMOD 与 C++11 配合得很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:55:51.373

我的猜测是有些东西被定义为宏或未定义为宏的东西。现在，您的任务是提供一个最小示例。这可能意味着手动删除大段代码或从头文件中复制代码。这样做，直到您可以在几行中提供有问题的代码。我想这样做，您会自己发现问题。

通过您提供的小代码，我注意到了一些事情：

*   fmod() 实际上是一个函数，我可以想象一些编译器将它作为一个宏提供，这反过来又与#include 冲突，但这似乎不是你的问题。
*   您同时包含 fmod.h 和 fmod.hpp，这看起来很可疑。
*   `void ERRCHECK(FMOD_RESULT result);`看起来像是函数和宏的混合体。
*   `play()`应该可能需要一个`const char* data`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T16:19:36.987

在 MSYS2 和 GCC v5.4.0 下，我遇到了同样的问题。解决方案是添加编译标志`-D__CYGWIN32__`。

这是由于 fmod.h 中的以下内容：

```
#if defined(__CYGWIN32__)
    #define F_CDECL __cdecl
    #define F_STDCALL __stdcall
    #define F_DECLSPEC __declspec
    #define F_DLLEXPORT ( dllexport )
#elif defined(WIN32) || defined(_WIN32) || defined(__WIN32__) || defined(_WIN64)
    #define F_CDECL _cdecl
    #define F_STDCALL _stdcall
    #define F_DECLSPEC __declspec
    #define F_DLLEXPORT ( dllexport )
... 
```

# mule - 如何最好地处理 mule 流中抛出的不同类型的异常

> ID：14819629
> 
> 赞同：1
> 
> 时间：2013-02-11T19:44:45.817
> 
> 标签：mule

我的流程`http`中公开了一项服务。`Mule 3.3.0`现在，我想在不同的异常情况下返回不同的响应，例如想要区分错误是由于格式错误的 xml 与不正确的输入值，还是错误在服务器端，如 jms 已关闭。我怎样才能最好地处理这个问题。

我尝试创建`private flow`捕获异常并将转换器应用于所需的响应。当控制权返回到调用主流程时，私有流程返回的异常被视为有效负载消息，并继续进行其余处理。从私有流返回的异常不会作为响应返回`http service`（因为我的流正在公开 http 服务）

如果私人流程中发生异常，是否有办法停止其余流程？

我将 xml 验证放在私人流程中，因为我想根据用户的服务器或客户端错误来区分向用户抛出的错误消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:56:35.070

由于异常是在私有流中处理的，所以需要使用标准的消息路由，根据私有流的结果来改变父流的处理路径。

例如，您可以`choice`在调用后使用路由器，`flow-ref`并根据某些属性的存在（或任何对您的情况有意义的），要么继续处理，要么立即返回响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T08:14:52.560

捕获异常策略在我看来是最好的，bcz 可以参考，也可以在选择异常中调用。

# ember.js - 如果 Ember 自动初始化 ApplicationController，如何将控制器中的属性绑定到应用程序控制器？

> ID：14819631
> 
> 赞同：0
> 
> 时间：2013-02-11T19:44:49.337
> 
> 标签：ember.js

我的 Ember 控制器中有一个属性，我想将它绑定到应用程序控制器中的一个属性，但由于我没有创建 ApplicationController 的实例，因此我无法提供参考。就像是，

```
MyApp.ApplicationController = Em.Controller.extend({
    userName: 'hohenhiem'
});

MyApp.SampleController = Em.Controller.extend({
    nameBinding: 'application.userName'
}); 
```

我有一个[jsFiddle在](http://jsfiddle.net/anshulguleria/yCr4F/)[这里](http://jsfiddle.net/anshulguleria/yCr4F/)展示我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:08:07.883

您正在寻找需求属性。在控制器中，您可以指定依赖项，然后按如下方式使用它们：

```
MyApp.SampleController = Em.Controller.extend({
    needs: ['application'],
    nameBinding: 'controllers.application.userName' }); 
```

[http://jsfiddle.net/yCr4F/1/](http://jsfiddle.net/yCr4F/1/)

# jquery - 响应式jQuery

> ID：14819636
> 
> 赞同：2
> 
> 时间：2013-02-11T19:45:07.223
> 
> 标签：jquery, responsive-design, appendto

需要一些帮助和建议。长话短说，我有一个 3 栏的网站。

```
<div id="left-col">Some content</div>
<div id="mid-col">Some content</div>
<div id="right-col">Some content</div> 
```

当浏览器窗口低于 1000 像素时，我执行以下操作。

```
$(window).on('resize', function () {

if ($(window).width() < 1000) {         
    $("#right-col").appendTo('#left-col');
    $("#mid-col").css("max-width","785px");
}
}); 
```

现在使用 appendTo 不是最好的解决方案，因为它需要整个 <div id="right-col"> 并将其放置在 div 中。我最初的想法是在 right-col 中移动 html 并将其附加到 left-col 的末尾。

无论如何......当浏览器大于1000px时，我怎样才能让它从left-col中恢复并回到原来的位置；

这是它的一个jsfiddle。[http://jsfiddle.net/C7k5b/](http://jsfiddle.net/C7k5b/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:49:37.350

你不能再把它追加回来吗？

```
$(document).ready(function() {
    $(window).on('resize', function () {
        if ($(window).width() < 500) {      
            $("#right-col").appendTo('#left-col');
        }else{
            $("#right-col").appendTo($('#left-col').parent());
        }
    });
}); 
```

[**小提琴**](http://jsfiddle.net/C7k5b/1/)

# spring - Spring MVC 应用程序的验证框架

> ID：14819640
> 
> 赞同：0
> 
> 时间：2013-02-11T19:45:36.870
> 
> 标签：spring, validation, jakarta-ee, spring-mvc

我想获得一些为 Spring Web App 实现验证框架的最佳方法。我的目标是减少脚本验证，同时实现实时验证。由于数据模型定义约束，我不能使用 JSR303 或 Spring MVC 验证。规则引擎如何与 Web App 配合使用？是否还有其他适合 Spring App 的验证框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:52:15.547

您可以通过实现[Spring 的 Validator来使用](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/validation/Validator.html)[一般的 Spring 验证](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#validator)。

阅读其他 Stack Overflow 帖子以获取更多信息：[Spring MVC：如何执行验证？](https://stackoverflow.com/questions/12146298/spring-mvc-how-to-perform-validation/12149331#12149331)

# jquery - Fancybox 卡在 IE 中加载 iframe

> ID：14819642
> 
> 赞同：10
> 
> 时间：2013-02-11T19:45:43.820
> 
> 标签：jquery, internet-explorer, iframe, fancybox, fancybox-2

我在使用fancybox 在IE 的iframe 中加载PDF 时遇到问题。当我点击链接时，我得到了 gif 加载器，它只是永远旋转。控制台或页面上或类似的东西上没有错误。所有版本的 IE 都会出现问题。所有其他浏览器都可以正常工作。此外，PDF 是内部文件。

这是一些代码：

**HTML**

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">

        <link rel="stylesheet" type="text/css" href=<?php echo base_url("templates/style1/css/jquery.fancybox.css") ?> />

        <script src=<?php echo base_url("js/jquery-1.7.2.min.js") ?> type="text/javascript"></script>
        <script type="text/javascript" src="../js/jquery.fancybox.js"></script>

    </head>
    <body>
        <a class="fancybox-media italic" href="../contract_docs/dummy.pdf" >Test Doc</a>
    </body>
</html> 
```

**JS**

```
 $(document).ready(function(){
        /* fancybox handler */
        $('.fancybox-media').fancybox({
            openEffect  : 'none',
            closeEffect : 'none',
            autoSize: true,
            type : 'iframe'
        });
    }); 
```

**编辑：** 我也尝试升级 jQuery，但无济于事。

**编辑：**这是一个[jsFiddle](http://jsfiddle.net/7HgaZ/4/)，非常简单，对我来说在 IE 中不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T08:46:10.173

似乎禁用预加载解决了 iframe 和 IE 的问题，所以试试这个：

```
 $(document).ready(function () {
      /* fancybox handler */
      $('.fancybox-media').fancybox({
          openEffect: 'none',
          closeEffect: 'none',
          autoSize: true,
          type: 'iframe',
          iframe: {
              preload: false // fixes issue with iframe and IE
          }
      });
  }); 
```

用fancybox v2.1.4 和IE7 测试。

检查**[JSFIDDLE](http://jsfiddle.net/6zkpz/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T20:38:51.057

我只是测试你的代码片段，它在 ie 8 和 chrome 中对我有用

我使用以下资源文件：

jquery：[http ://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.min.js](http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.min.js)

js： http: [//fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.js](http://fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.js)

css： http: [//fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.css](http://fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.css)

我使用的代码：

```
<!DOCTYPE html>
<html lang="en" >    
    <head>
        <meta charset="utf-8">

        <link rel="stylesheet" type="text/css" href="http://fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.css" />

        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.js"></script>
        <script>
            $(document).ready(function(){
                /* fancybox handler */
                $('.fancybox-media').fancybox({
                    openEffect  : 'none',
                    closeEffect : 'none',
                    autoSize: true,
                    type : 'iframe'
                });
            });
        </script>

    </head>
    <body>
        <a class="fancybox-media italic" href="pdf.pdf" >Test Doc</a>
    </body>
</html>

maybe clear browser cach fix it 
```

# mysql - MySQL 连接和列名

> ID：14819644
> 
> 赞同：1
> 
> 时间：2013-02-11T19:45:46.350
> 
> 标签：mysql, sql, database, join

假设我的 MySQL 数据库中有以下表：

```
TABLE Products
| id | some_column1 | some_column2 |

TABLE ProductProperties
| id | product_id | name | 
```

过于简单，但足够了。现在我想获得所有具有属性的产品。我愿意：

```
SELECT * FROM `Products` JOIN `ProductProperties` ON Products.id = ProductProperties.product_id 
```

我能得到什么？

```
| id | some_column1 | some_column2 | id | product_id | name | 
```

这并不酷，我想通过以下两种方式之一让它变得酷：

1) 获取像 Product 表中的对象数组，但又扩展了一个成员，这将是匹配 JOIN 的属性数组。我已经想通了，这是不可能的？

2）要获得这样的数组（我仍然必须在 PHP 中对其进行迭代，以将一个产品中的所有属性连接到一个对象中）：

```
| product_id | some_column1 | some_column2 | property_id | product_id | name | 
```

所以我想将列 ProductProperties.id 重命名为 ProductProperties.property_id。如果我也可以从输出中删除 ProductProperties.product_id ，那将是理想的，但现在，我只想重命名输出中的一列。或者用表名作为前缀。或类似的东西。

可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:49:30.453

您应该明确命名列而不是使用`*`. 然后，不要返回多余的列：

```
SELECT p.id as productid, p.some_column1, p.some_column2,
       pp.id  as ProductPropertiesId, pp.name
FROM `Products` p JOIN `ProductProperties` pp
    ON p.id = pp.product_id 
```

此外，表别名使这样的查询更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:52:27.017

```
SELECT Products.id product_id,
       Products.some_column1,
       Products.some_column2,
       ProductProperties.id property_id,
       ProductProperties.name
FROM `Products` 
JOIN `ProductProperties` 
ON Products.id = ProductProperties.product_id 
```

# android - 从 Google Place Android API 读取错误

> ID：14819647
> 
> 赞同：0
> 
> 时间：2013-02-11T19:45:54.833
> 
> 标签：android

我开发了一个应用程序，它与 google places api 交互以搜索用户附近的咖啡馆。出于我的应用程序的目的，我希望将半径设置为一个非常小的值.. 可能是 20 到 50 米。目前我的应用程序正在运行，但它没有按应有的方式运行。在我的应用程序中，我将半径设置为 350 米。所以实际上它应该给我返回半径为 350m 的咖啡馆列表。但是，即使星巴克距离为 650m（道路距离）和 500m（直线距离），我的应用程序仍会在此结果集中显示星巴克。我想知道应该怎么做才能得到正确的结果。目前我正在为此使用 GPS。gps 和网络服务的结合会为我提供更好的阅读体验吗？

```
public PlacesList search(double latitude, double longitude, double radius, String types)
throws Exception {

    this._latitude = latitude;
    this._longitude = longitude;
    this._radius = radius; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:23:06.570

这个问题与 Android 无关，但与 Google Places API 有关。

您使用的是地点搜索还是文本搜索？他们都对位置偏差发表了评论

**文字搜索：**

“您可以通过传递位置和半径参数将结果偏向指定的圆。这将指示 Place 服务更喜欢在该圆内显示结果；仍可能显示定义区域之外的结果。”

**地方搜索：**

“距离。此选项按距离指定位置的距离升序排列结果。按距离排列结果将设置固定搜索半径50km。关键字、名称或类型中的一个或多个为必填项。”

# google-maps-api-3 - 有没有办法为 Retina 显示创建高分辨率的 Google Maps KML 图层？

> ID：14819648
> 
> 赞同：5
> 
> 时间：2013-02-11T19:46:03.887
> 
> 标签：google-maps-api-3, kml, google-maps-mobile

因此，我尝试为我的 Google Maps V3 移动网络应用程序（使用 jQuery Mobile）使用带有自定义图标的 KML 层。地图的基础层以清晰的分辨率正确显示，缩放控件由 API 自动以紧凑模式设置样式，所以我猜 API 已经检测到移动设备正常。

然而，KmlLayer 上的自定义图标似乎很模糊，这是在高密度移动显示器（视网膜等）上显示低分辨率标记图像的常见症状，尽管我已经使用了双倍尺寸的图像。我试图调整`<scale>`kml 文件中的标签无济于事，因为它似乎只在被谷歌服务器下采样到 32*32*后影响图标。*

所以问题是：**有没有办法请求 Google KmlLayer 服务器提供高分辨率平铺图像？**我在文档中没有看到任何这样的选项。也许在 KML 生成方面有一些技巧？

先感谢您。

更新：正如乍得下面所述，目前不支持此功能。因此，当我打开我的 Photoshop 并设计新的标记图像以便它在模糊时不会那么难看时，这里是[Google 页面上功能请求](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4925)的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T09:20:45.220

我很抱歉，但我认为它不可用。您所能做的就是在您编写的 KML 中

```
 <IconStyle id="mystyle">
  <Icon>
    <href>http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png</href>
    <scale>1.0</scale>
  </Icon>
</IconStyle> 
```

确保使用高分辨率图标。我希望它有所帮助。

# javascript - 正则表达式英国邮政编码 Javascript 空间问题

> ID：14819650
> 
> 赞同：1
> 
> 时间：2013-02-11T19:46:05.507
> 
> 标签：javascript, regex, firefox-addon

目前我有一个使用正则表达式来检测英国邮政编码的 JavaScript 程序。目前它只是在警报中显示它们。我目前正在努力检测带有空格的邮政编码。例如 SW12 5BV, BR3 8DD 还需要接受 DE148NV, JN24HH 等不带空格的 Postcodes。当前正则表达式代码：

```
var postcodePattern = /[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}/i;
                var resultPost = postcodePattern.test(words[i]);
                if(resultPost)  {   
                alert("Postcode detected: " + words[i]); 
```

我还尝试了其他各种英国邮政编码正则表达式，但均无济于事。例子

```
//var postcodePattern = /^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {0,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR ?0AA)$/ 
```

我还有一个功能，它在影响以前的正则表达式的正则表达式发生后删除所有 HTML 标签。

```
removeHTMLTags: function(aString){

        var strInputCode = aString;

        var strTagStrippedText = strInputCode.replace(/<\/?[^>]+(>|$)/g, " ");
        strTagStrippedText = strTagStrippedText.replace(/&nbsp/g," ");

        //Remove some escape characters
        strTagStrippedText = strTagStrippedText.replace(/\(|\)|\{|\}|\[|\]|\?|\*|\+|\||\//ig," ");

        //Replace multilple white spaces with single white space
        strTagStrippedText = strTagStrippedText.replace(/\s+/g," ");

        return strTagStrippedText; }, 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:12:14.700

就像把你的空间放在一个角色类中一样简单？我假设您只允许基于第二个代码块中的重新格式化代码的单个空格。

```
var postcodePattern = /[A-Z]{1,2}[0-9]{1,2}[ ]{0,1}[0-9][A-Z]{2}/i;
            var resultPost = postcodePattern.test(words[i]);
            if(resultPost)  {   
            alert("Postcode detected: " + words[i]); 
```

根据评论，您也在此处将输入拆分为空格：

```
bodyContentsStrippedTags.split(/\s+|\,|\&|\||\/|\?|\!|\:|;|"/); 
```

使用拆分正则表达式中的 \s+ 。这意味着带有空格的邮政编码作为两个单独的数组项而不是单个字符串传递给您的正则表达式。

# asp.net - 解密连接字符串抛出 没有足够的存储空间来处理命令

> ID：14819667
> 
> 赞同：3
> 
> 时间：2013-02-11T19:47:28.113
> 
> 标签：asp.net, iis-7.5

我成功地将 RSAkeyProvider 从生产导入到本地机器。然后我尝试解密连接字符串，但出现以下错误..

C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -pdf "connectionStrings" D:\ 解密配置部分...无法使用提供程序“RsaProtectedConfigurationProvider”解密。来自提供程序的错误消息：没有足够的存储空间来处理此命令。（D:\web.config 第 9 行）

没有足够的存储空间来处理此命令。

失败的！

请帮忙，我整天都在谷歌上搜索，但没有找到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T02:44:59.373

根据[这个](http://msdn.microsoft.com/en-us/library/zhhddkxy%28v=vs.100%29.aspx)链接，你的代码应该是这样的

```
aspnet_regiis -pd "connectionStrings" -app "/SampleApplication" 
```

我注意到您使用了 -pdf 而不是 -pd

# java - 选择包含的字符串

> ID：14819668
> 
> 赞同：1
> 
> 时间：2013-02-11T19:47:32.750
> 
> 标签：java, mysql, regex

这是我正在研究的一个非常简化的版本，但希望它能传达我的观点。

我有一个 mysql 表，它看起来像这样：

```
CREATE TABLE Table1(
  ID INT AUTO_INCREMENT,
  Val VARCHAR(50),
     PRIMARY KEY (id)
  );
INSERT INTO Table1 (Val) SELECT "Reference.Int('ABCD')";
INSERT INTO Table1 (Val) SELECT "Reference.Str('EFG','ABC')";
INSERT INTO Table1 (Val) SELECT "Reference.Int('HIJ','EFG','ABC')"; 
```

我正在处理的方法接收括号中的值之一作为参数，例如：“EFG”。我是否可以抓取表中包含该值的所有行。我知道，如果我做类似的事情：

```
SELECT * from Table1 where Val LIKE "%EFG%" 
```

我可以获得正确的值，我的问题是我需要更具体，因为例如其中一个值可能看起来像：

```
 Reference.Int('ABCD') + EFGX/200 
```

或者

```
EFG + anything else 
```

这意味着我还需要以某种方式包括以下部分：“Reference.Str()”。我并不真正关心括号中的其他任何内容，我唯一关心的是获取包含我收到的参数值的那些。

我想知道这是否可以通过使用 REGEXP 来解决，但我对此的了解充其量是薄弱的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:50:44.600

我认为这不适合 SQL 查询。您最好创建第二个表来存储在字符串中找到的标记，以及对父记录的引用。

所以你可以做类似的事情

```
select record_id from tokens where token_val = 'EFG'; 
```

进而

```
select * from records where record_id in (*results from pervious query) 
```

基本上，这个想法是预先完成艰苦的工作，每条记录一次，而不是尝试在每次查询时动态解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:55:54.273

试试这个：

```
SELECT * FROM Table1 WHERE Val LIKE "Reference.Str(%'EFG'%" 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/437b9/1)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:57:49.340

您可以使用正则表达式，但没有必要。只需在搜索词中包含围绕您的值的引号：

```
select ...
where val like '%\'EFG\'%' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T20:19:11.707

我认为您可以使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)仅获取括号之间的字符串部分：

```
SUBSTRING_INDEX(SUBSTRING_INDEX(Val, "(", -1), ")", 1) 
```

然后你可以使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_find-in-set)：

```
SELECT *
FROM Table1
WHERE
  FIND_IN_SET(
    '\'EFG\'',
    SUBSTRING_INDEX(SUBSTRING_INDEX(Val, "(", -1), ")", 1)
  ) 
```

[在这里](http://sqlfiddle.com/#!2/01618/8)看到它。

# android - 根据 android 版本加载不同的视图

> ID：14819669
> 
> 赞同：2
> 
> 时间：2013-02-11T19:47:37.457
> 
> 标签：android

好吧，我想知道我是否可以为不同的 android 版本从同一个应用程序加载不同的视图。我认为我可以创建一个活动，该活动可以通过意图调用为不同版本的 android 定义的两个单独活动之一。我的意思是假设在一项活动中我使用了只能从冰淇淋三明治中获得的操作栏，而其他活动可能会使用早期 android 版本中的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:54:00.450

1) 对于支持多个屏幕的布局，您可以参考[这里](http://developer.android.com/guide/practices/screens_support.html)

2）如果您想根据不同的android版本加载不同的布局，那么您可以创建不同的布局xml文件，然后在活动中，例如下面的代码

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.GINGERBREAD) {
     // only for android older than gingerbread
     //call setContentView with your layout
} 
```

3）您可以在 res 文件夹内的 layout-v(version-number) 文件夹中进行布局。例如，对于 SDK 11，文件夹名称将为 layout-v11

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:51:19.917

是的。在您的 res 中创建一个 layout-vX 文件夹，其中 X 是版本号（例如 Honeycomb 为 11）。如果使用版本 X 或更高版本，其中的任何文件都将覆盖布局目录中文件的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:56:21.203

如果您只需要操作栏，我强烈建议您使用[actionbarsherlock 库](http://actionbarsherlock.com/)。

您还可以使用代码检查版本（[在此处](http://developer.android.com/reference/android/os/Build.VERSION.html)阅读）：

```
 if(VERSION.SDK_... <VERSION_CODES.... ) 
```

[并通过设置版本的限定符，如此处](http://developer.android.com/guide/topics/resources/providing-resources.html)所写，例如，对于需要在 API 11 及更高版本上使用的资源，放置限定符 v11 。

# python - 异常后标准输出不会刷新

> ID：14819675
> 
> 赞同：3
> 
> 时间：2013-02-11T19:48:01.037
> 
> 标签：python, stdout

我有以下 Python 代码：

```
import sys
import traceback
fifo_in = sys.argv[1] 
while 1: 
  try:
    exec open(fifo_in)
  except:
    traceback.print_exc()
  sys.stdout.flush() 
```

第一个参数是由创建的命名管道`mkfifo`。所以下面打印'1'：

```
mkfifo input
python script.py input

... in a separate terminal ...

echo "print 1" > input 
```

太好了，到目前为止一切都很好。但是当我做类似`echo "foobar" > input`的事情时，脚本只打印*部分*回溯。然后它会暂停，直到我向它发送另一个命令，并且输出都混淆了：

```
echo "asdf" > input # pause here and check output
echo "print 1" > input

... in output terminal ...

Traceback (most recent call last):
  File "test.py", line 8, in <module>
    exec open(fifo_in)
  File "in", line 1, in <module>
 ...PAUSES HERE...
    print 1
NameError: name 'asdf' is not defined 
```

这是怎么回事？我怎样才能让标准输出完全刷新，为什么它出现故障？我尝试过使用`traceback.format_exc`，然后手动打印，但我得到了相同的结果。打电话`sys.stderr.flush`也不能解决任何问题。我也尝试过在循环中休眠以查看是否有帮助，但没有任何帮助。

**更新**

我看到的一个有趣的行为：如果我`ctrl+c`这样做，通常程序会继续运行 - try/except 只是捕获`KeyboardInterrupt`并继续循环。但是，如果我`ctr+c`在发送错误后它会退出，我会得到以下信息。这几乎就像它在内部暂停`print_exc`：

```
^CTraceback (most recent call last):
  File "test.py", line 10, in <module>
    traceback.print_exc()
  File "/usr/lib/python2.7/traceback.py", line 232, in print_exc
    print_exception(etype, value, tb, limit, file)
  File "/usr/lib/python2.7/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.7/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/usr/lib/python2.7/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/usr/lib/python2.7/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
  File "/usr/lib/python2.7/linecache.py", line 132, in updatecache
    with open(fullname, 'rU') as fp:
KeyboardInterrupt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:30:10.523

我想你想看看[stdlib 代码模块](http://docs.python.org/2/library/code.html)

此行为来自使用 exec。Exec 用于评估 python 代码，因此“print 1”执行 python 代码`print 1`，其中“asdf”将引发 NameError，因为它在上下文中不存在。`exec open(fifo_in)`很奇怪，因为它不应该工作。while 也会消耗 100% cpu。

更新：修复睡眠持续时间这是您要尝试的代码的修改版本。

```
import sys
import time
import traceback
fifo_in = sys.argv[1]
try:
    fp = open(fifo_in) # will block until pipe is opened for write
except IOError:
    traceback.print_exc()
except OSError:
    traceback.print_exc()

data = None
while True:
    try:
        data = fp.read()
        try:
            exec data
        except:
            traceback.print_exc()
        finally:
            time.sleep(0.1)
    except KeyboardInterrupt:
        break 
```

# html - 列表的水平对齐

> ID：14819679
> 
> 赞同：0
> 
> 时间：2013-02-11T19:48:31.763
> 
> 标签：html, css, css-float

如何使列表内联显示........现在它是垂直对齐的，我可以让它变成水平对齐....在下面提供我的小提琴链接....

[http://jsfiddle.net/JNyQU/1/](http://jsfiddle.net/JNyQU/1/)

```
<ul class="homePageLists" style="">
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                                Menu
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                              Search
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                              Create PN
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                              Product List
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                              Create PN
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                              Create PN
                            </li>
                        </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:53:48.300

使用`float:left;`：

```
ul { clear: left; } // clear logo img
li { float: left; } 
```

例如[http://jsfiddle.net/JNyQU/4/](http://jsfiddle.net/JNyQU/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:55:35.117

我为您提供了一个 jFiddle。

[http://jsfiddle.net/persianturtle/JNyQU/6/](http://jsfiddle.net/persianturtle/JNyQU/6/)

解决方案是在无序菜单列表的容器中添加一个类，我称之为“内联”。

CSS是：

```
.inline ul {
  float:left;
  display:inline;
}

.inline ul li {
  float:left;
  display:inline;
} 
```

我更改的唯一 HTML 是：

```
<div class="inline"> 
```

希望这对你有帮助！如果是这样，请不要忘记复选标记！

另外，我在左边添加了一些边距，这样看起来更好！你可以随心所欲地改变它。

# python - 在 Python 中使用 SFTP 上传文件，但如果路径不存在则创建目录

> ID：14819681
> 
> 赞同：33
> 
> 时间：2013-02-11T19:48:39.867
> 
> 标签：python, ssh, sftp, paramiko

我想用 Python 在远程服务器上上传文件。我想事先检查远程路径是否真的存在，如果不存在，则创建它。在伪代码中：

```
if(remote_path not exist):
    create_path(remote_path)
upload_file(local_file, remote_path) 
```

我正在考虑在 Paramiko 中执行命令来创建路径（例如`mkdir -p remote_path`）。我想出了这个：

```
# I didn't test this code

import paramiko, sys

ssh = paramiko.SSHClient()
ssh.connect(myhost, 22, myusername, mypassword)
ssh.exec_command('mkdir -p ' + remote_path)
ssh.close

transport = paramiko.Transport((myhost, 22))
transport.connect(username = myusername, password = mypassword)

sftp = paramiko.SFTPClient.from_transport(transport)
sftp.put(local_path, remote_path)
sftp.close()

transport.close() 
```

但是这个解决方案对我来说听起来并不好，因为我关闭了连接然后再次重新打开它。有更好的方法吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-11T19:57:29.460

SFTP 支持常用的 FTP 命令（chdir、mkdir 等），因此请使用以下命令：

```
sftp = paramiko.SFTPClient.from_transport(transport)
try:
    sftp.chdir(remote_path)  # Test if remote_path exists
except IOError:
    sftp.mkdir(remote_path)  # Create remote_path
    sftp.chdir(remote_path)
sftp.put(local_path, '.')    # At this point, you are in remote_path in either case
sftp.close() 
```

* * *

要完全模拟`mkdir -p`，您可以递归地使用 remote_path：

```
import os.path

def mkdir_p(sftp, remote_directory):
    """Change to this directory, recursively making new folders if needed.
    Returns True if any folders were created."""
    if remote_directory == '/':
        # absolute path so change directory to root
        sftp.chdir('/')
        return
    if remote_directory == '':
        # top-level relative directory must exist
        return
    try:
        sftp.chdir(remote_directory) # sub-directory exists
    except IOError:
        dirname, basename = os.path.split(remote_directory.rstrip('/'))
        mkdir_p(sftp, dirname) # make parent directories
        sftp.mkdir(basename) # sub-directory missing, so created it
        sftp.chdir(basename)
        return True

sftp = paramiko.SFTPClient.from_transport(transport)
mkdir_p(sftp, remote_path) 
sftp.put(local_path, '.')    # At this point, you are in remote_path
sftp.close() 
```

Of course, if remote_path also contains a remote file name, then it needs to be split off, the directory being passed to mkdir_p and the filename used instead of '.' in sftp.put.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-06T11:25:49.647

Something simpler and slightly more readable too

```
def mkdir_p(sftp, remote, is_dir=False):
    """
    emulates mkdir_p if required. 
    sftp - is a valid sftp object
    remote - remote path to create. 
    """
    dirs_ = []
    if is_dir:
        dir_ = remote
    else:
        dir_, basename = os.path.split(remote)
    while len(dir_) > 1:
        dirs_.append(dir_)
        dir_, _  = os.path.split(dir_)

    if len(dir_) == 1 and not dir_.startswith("/"): 
        dirs_.append(dir_) # For a remote path like y/x.txt 

    while len(dirs_):
        dir_ = dirs_.pop()
        try:
            sftp.stat(dir_)
        except:
            print "making ... dir",  dir_
            sftp.mkdir(dir_) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-28T18:47:32.283

Had to do this today. Here is how I did it.

```
def mkdir_p(sftp, remote_directory):
    dir_path = str()
    for dir_folder in remote_directory.split("/"):
        if dir_folder == "":
            continue
        dir_path += r"/{0}".format(dir_folder)
        try:
            sftp.listdir(dir_path)
        except IOError:
            sftp.mkdir(dir_path) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-24T10:31:00.240

you can use pysftp package:

```
import pysftp as sftp

#used to pypass key login
cnopts = sftp.CnOpts()
cnopts.hostkeys = None

srv = sftp.Connection(host="10.2.2.2",username="ritesh",password="ritesh",cnopts=cnopts)
srv.makedirs("a3/a2/a1", mode=777)  # will happily make all non-existing directories 
```

you can check this link for more details: [https://pysftp.readthedocs.io/en/release_0.2.9/cookbook.html#pysftp-connection-mkdir](https://pysftp.readthedocs.io/en/release_0.2.9/cookbook.html#pysftp-connection-mkdir)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-14T08:31:00.473

My version:

```
def is_sftp_dir_exists(sftp, path):
    try:
        sftp.stat(path)
        return True
    except Exception:
        return False

def create_sftp_dir(sftp, path):
    try:
        sftp.mkdir(path)
    except IOError as exc:
        if not is_sftp_dir_exists(sftp, path):
            raise exc

def create_sftp_dir_recursive(sftp, path):
    parts = deque(Path(path).parts)

    to_create = Path()
    while parts:
        to_create /= parts.popleft()
        create_sftp_dir(sftp, str(to_create)) 
```

We try `mkdir` without trying `listdir`/`stat` first due to [EAFP principle](https://stackoverflow.com/q/11360858/1113207) (it's also more performant to make one network request than several).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T19:55:44.073

Paramiko 包含一个 mkdir 函数：

[http://paramiko-docs.readthedocs.org/en/latest/api/sftp.html#paramiko.sftp_si.SFTPServerInterface.mkdir](http://paramiko-docs.readthedocs.org/en/latest/api/sftp.html#paramiko.sftp_si.SFTPServerInterface.mkdir)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-20T23:59:57.240

Assuming sftp operations are expensive, I would go with:

```
def sftp_mkdir_p(sftp, remote_directory):
    dirs_exist = remote_directory.split('/')
    dirs_make = []
    # find level where dir doesn't exist
    while len(dirs_exist) > 0:
        try:
            sftp.listdir('/'.join(dirs_exist))
            break
        except IOError:
            value = dirs_exist.pop()
            if value == '':
                continue
            dirs_make.append(value)
        else:
            return False
    # ...and create dirs starting from that level
    for mdir in dirs_make[::-1]:
        dirs_exist.append(mdir)
        sftp.mkdir('/'.join(dirs_exist))``` 
```

# java - LoadRunner Java over HTTP 协议与 WEB (http/html) 协议

> ID：14819684
> 
> 赞同：1
> 
> 时间：2013-02-11T19:48:41.483
> 
> 标签：java, loadrunner

使用 JAVA over http 协议对常规 web(http/html) 协议有什么缺点吗？与从控制器运行时的更多资源使用情况一样，例如 TruClient 的情况？我知道在 http 上使用 JAVA 涉及将 .jar 文件导入脚本位置，因此至少要求这些 .jar 文件在负载测试期间位于控制器上？如果开发/增强脚本的人是 JAVA 开发人员而不是标准 http/html vuser 脚本的情况下的 C 开发人员，我想您可能会说 JAVA over http 提供了对 AUT 更好/更多的控制？在 HTTP/HTML 上使用 JAVA 的任何其他优点或缺点？我很好奇，因为我希望一些（JAVA）开发人员为我增强脚本，而 http/html 脚本并不受欢迎，因为它需要 C 编程技能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:18:35.197

用于 Web 虚拟用户的 Java 与 HTTP？

1.  HTTP 虚拟使用权重更轻
2.  包含 Java 为设置增加了很多复杂性
3.  LoadRunner 的版本支持特定版本的 Java。一旦你得到一个不匹配的设置，就会出现很多黑魔法小精灵，并且你在执行测试时遇到很多问题

基于 HTTP 的 JAVA

见[http://www.youtube.com/watch?v=cr4RUlIOVOw](http://www.youtube.com/watch?v=cr4RUlIOVOw)

# php - Codeigniter Halogy cms 安装设置

> ID：14819687
> 
> 赞同：2
> 
> 时间：2013-02-11T19:48:54.667
> 
> 标签：php, codeigniter, content-management-system, halogy

我已经下载了一个 halogy 并在提取后将提取文件夹放入我的本地主机中的 htdocs 文件夹中..我成功设置了数据库但是在从浏览器访问 url 后出现错误这是错误

```
 Slight problem...

   This domain has not been configured properly. 
```

解压后我的**文件夹名称**

```
jesseorndorff-Halogy-35c4050 
```

**网址**

```
 localhost/jesseorndorff-Halogy-35c4050 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:35:09.527

这是一步一步的解决方案

首先用其他东西重命名您的文件夹名称，仅用于测试。
我变了`jesseorndorff-Halogy-35c4050 to halogy_test`。

接下来从 halogy 中剪切系统文件夹并将其粘贴到上层。现在的结构将是这样的。

```
localhost/
    halogy_test/
         halogy/
         system/
         index.php 
```

接下来转到 database.php 并进行设置。
接下来去`halogy/application/config/config.php`改变
`$config['index_page'] = '';`

至

`$config['index_page'] = 'index.php';`在第 29 行。

现在去`application/config/site_config.php`改变

```
$config['staticPath']       =   '/static' 
```

至

```
$config['staticPath']       =   '/halogy_test/static'; 
```

最后一步去`halogy_test/static/js/jquery.flot.init.js`改变

```
'/admin/stats/' to stats/ on line no 2! 
```

如果成功，请投票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-16T00:54:34.410

如果您在遵循@raheel-shan 的回答后仍然遇到此问题，那么您需要查看您用于安装 Halogy 的数据库。

有一个表“ha_sites”将您的站点路径存储在“siteDomain”列中。因此，即使您在代码中的任何位置都更正了站点的路径，如果“ha_sites.siteDomain”中的路径不正确，您仍然会遇到问题。

**要解决此问题，请执行以下操作之一：**

*   **（最简单）**删除所有表，然后重新导入 sql 转储。

或者

*   截断表“ha_sites”。

或者

*   修复“ha_sites.siteDomain”中的路径。

# hibernate - 为什么 Hibernate 只检索 ID 列的值？

> ID：14819688
> 
> 赞同：2
> 
> 时间：2013-02-11T19:48:58.773
> 
> 标签：hibernate, hql

我没有详细说明它，因为我几乎可以肯定它是关于配置的东西，而不是与休眠版本相关的东西，但你只需要问你是否需要更多东西 =)

问题是：如果我执行这样的 HQL，可能会出现什么问题：

```
 Query query = em.createQuery("select foo from Foo foo");
    List<Foo> foos = query.getResultList(); 
```

Hibernate 检索具有 id 的 Foo 对象，但是当我在数据库中看到它们被通知时，所有其他列都为空？

想象一下 Foo 是：

```
 @Entity
    @Table(name="FOO")
    public class Foo implements Serializable {

        @Id
        @column(name="F_ID")
        private long id;

        @column(name="F_COD")
        private String cod;

        //setters and getters
        ...
    } 
```

问题是，如果我稍后使用其中一个 foo 的知情 id 执行此操作，它也不会获得整个对象！：

```
 Foo f = entityManager.find(Foo.class, foo.getId()); 
```

为什么它的行为类似于 entityManager.getReference() 而不是 entityManager.find()？！

**但**如果我这样做：

```
 Query query = em.createQuery("select foo.id, foo.cod from Foo foo");
    List<Foo> foos = query.getResultList(); 
```

它们是丢失的列值！但结果列表有 Objects 而不是 Foos。

我要疯了，我认为它必须与配置有关。懒惰的取或类似的东西。

一些经验丰富的开发人员有一些想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T14:27:06.007

你可以将你的类映射为“fetch=FetchType.EAGER”，但是，我不推荐这种做法，因为你的系统会变慢。

因此，我建议您在查询中使用 join fetch。

有关更多信息，请参阅：[http ://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)

# java - 有没有一种通用的方法来处理java中的基元数组和非基元数组？

> ID：14819693
> 
> 赞同：2
> 
> 时间：2013-02-11T19:49:23.570
> 
> 标签：java, arrays, type-conversion

我知道对于 java 中的每个原始类型，都有一个可以表示相同值的引用类型，加上 null。例如，int 和 java.lang.Integer。

我也明白，虽然所有数组（甚至 java.lang.Object[]）都派生自 java.lang.Object，但只有非原始类型的数组可以转换为 java.lang.Object[]。

换句话说，我们可以这样做：

```
Class type = Integer.class;
Object[] o = (Object[])java.lang.reflect.Array.newInstance(type, 4); 
```

但以下导致异常：

```
Class type = int.class;
Object[] o = (Object[])java.lang.reflect.Array.newInstance(type, 4); 
```

所以在那种特殊情况下，我们可以这样做：

```
 Class type = int.class;
 Object o = java.lang.reflect.Array.newInstance(type, 4); 
```

...这似乎很好，直到有人想知道如何将元素添加到表示无法转换为 Object[] 的数组的 Object 中。

解决这个问题的唯一方法是检查数组元素的类型并适当地转换 Object 吗？

IE：

```
 if (type == int.class)
  ((int[])o)[0] = getFirstElement();

  else if (type == short.class)
  ((short[])o[0] = getFirstElement(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:01:45.880

好吧，在第一种情况下，您可以分配给 Object，然后使用它`isInstanceOf Object[]`来查看您是否有一个 Object 数组。

但最终你必须有某种条件操作来进行元素访问/分配。值得庆幸的是，只有 (IIRC) 7 种不同的标量数据类型。

（语言规范本可以定义 Integer/Float/et al 以包括数组成员访问方法——例如，Integer 将为`int[]`. final) 为定义这些方法的子类编号​​。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:37:27.910

除了创建数组，`java.lang.reflect.Array`还提供了获取和设置数组元素的方法：

```
Class<?> type = int.class;
Object array = java.lang.reflect.Array.newInstance(type, 4);

int index = 0;
Object value = getFirstElement();
java.lang.reflect.Array.set(array, index, value); 
```

另请注意[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Array.html#set%28java.lang.Object,%20int,%20java.lang.Object%29)中的值`is first automatically unwrapped if the array has a primitive component type.` So 这应该适用于任何数组，包括那些不继承自`Object[]`.

也有相应的`Object get(Object array, int index)`方法。

# c++ - 不区分大小写的部分匹配两个字符串的麻烦？

> ID：14819696
> 
> 赞同：0
> 
> 时间：2013-02-11T19:49:37.923
> 
> 标签：c++, string

我试图在不区分大小写的情况下部分匹配两个字符串。我不想使用 boost 库，因为大多数人的编译器中没有它们。我尝试了标准 c++ 库中的 .find() ，但它只检查用户输入的字符串是否在已经存在的字符串的第一个单词中。比如，如果我有一个名为 Harry_Potter_Goblet 的 DVD，如果我搜索“goblet”或“Goblet”，程序不会显示 Harry_Potter_Goblet 作为结果，只有当我对“Harry”进行区分大小写的搜索时，结果才会显示匹配。我在这里做错了什么？这是我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:53:05.040

定义一个不区分大小写的字符比较函数：

```
#include <cctype>
bool case_insensitive_comp(char lhs, char rhs)
{
  return std::toupper(lhs) == std::toupper(rhs);
} 
```

然后，使用[std::search](http://en.cppreference.com/w/cpp/algorithm/search)在较大字符串中查找子字符串。

```
#include <algorithm>
....
std::string s1="Harry_Potter_Goblet";
std::string s2 = "goblet";
bool found = std::search(s1.begin(), s1.end(), s2.begin(), s2.end(), case_insensitive_comp) != s1.end(); 
```

# c# - C# 多线程环境中的 OutOfMemoryException

> ID：14819699
> 
> 赞同：-1
> 
> 时间：2013-02-11T19:49:45.003
> 
> 标签：c#, multithreading

这更多地与面试问题有关——我多次被问到`OutOfMemoryException`在 C# 多线程环境中最简单的方法是什么。具体我们如何在以下每一种多线程机制中实现它：

1.  异步委托
2.  产生一个新线程
3.  使用线程池
4.  定时器
5.  后台工作者

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T19:55:47.130

```
throw new OutOfMemoryException(); 
```

# sharepoint - 为 ADO.NET 数据服务提供者设置基地址

> ID：14819700
> 
> 赞同：0
> 
> 时间：2013-02-11T19:49:54.880
> 
> 标签：sharepoint, ado.net, wcf-data-services, odata

我们正在使用[ADO.NET 数据服务提供程序工具包](http://www.odata.org/ecosystem)来实现在 SharePoint 2010 中运行的自定义 OData 服务端点（使用 .NET 3.5）。

当在站点集的根目录中访问服务时，返回的基地址是正确的，例如，

```
 http://localhost/_vti_bin/service.svc/ returns a base address (in the returned atom document) as <feed xml:base="http://localhost/_vti_bin/service.svc /> 
```

但是当在子站点中访问服务端点时，会忽略附加的路径段，例如

```
http://localhost/subsite/_vti_bin/service.svc/ returns a base address (in the returned atom document) as <feed xml:base="http://localhost/_vti_bin/service.svc /> 
```

不幸的是，这种不正确的行为让 PowerPivot 感到困惑（它似乎使用返回的基地址来访问后续查询）。

有没有办法从提供程序代码中显式地显示 xml:base 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:47:22.173

这可以通过使用相同的[IDispatchMessageInspector 技巧](http://archive.msdn.microsoft.com/DataServicesJSONP)（Pablo Castro 使用它来支持 JSON 格式）并添加以下代码来纠正：

```
 HttpRequestMessageProperty httpmsg = (HttpRequestMessageProperty)request.Properties[HttpRequestMessageProperty.Name];
        UriTemplateMatch match = (UriTemplateMatch)request.Properties["UriTemplateMatchResults"];

        match.RequestUri = new Uri(SPContext.Current.Web.Url + match.RequestUri.PathAndQuery, UriKind.Absolute);
        match.BaseUri = new Uri(SPContext.Current.Web.Url + match.BaseUri.AbsolutePath, UriKind.Absolute); 
```

这基本上改变了 Base 和 Request Uris 以包含子站点路径。

# php - 使用基本的 http 身份验证在 fat free 框架上进行身份验证，如何？

> ID：14819702
> 
> 赞同：2
> 
> 时间：2013-02-11T19:50:02.653
> 
> 标签：php, rest, restful-authentication, fat-free-framework

我有~~两个~~关于 Fat Free Framework 的问题。

~~首先，我如何在 GET 请求中使用多个参数（无脂肪框架中的令牌）？或者，每个 REST GET 请求是否可能只有 1 个令牌，并且应该将其他参数作为常规 GET 请求处理，例如：~~

 ~~```
domain/rest/somedata/5231?param1=value1&param2=value2 
```~~ 

~~?param1=value1¶m2=value2 应该“手动”解析，而不是由框架解析？~~

~~是否有可能使用 Fat Free Framework 构建一个 RESTful API，并且还有一些区域或路由需要身份验证？如果是这样，如何？~~

我刚刚偶然发现了这个相关问题：[REST API 最佳实践：在哪里放置参数？](https://stackoverflow.com/questions/4024271/rest-api-best-practices-where-to-put-parameters/4026505#4026505)

**[编辑]：**我发现确实可以使用多种方法对无脂肪框架进行身份验证。但是，它们似乎没有很好的文档记录（至少在他们的 github wiki 上没有）。

**[edit2]**因为它只是非常基本的身份验证，所以现在我正在使用这个：

```
function beforeRoute($f3,$params) {
    $url = $params[0];
    $parsed_key = parse_str(parse_url($url, PHP_URL_QUERY));

    if (isset($apikey)){
        // check if apikey is in database
        $authenticated = false;
        foreach(R::find('apikey') as $key_bean) {
            if($key_bean->key == $apikey) {
                $authenticated = true;
                break;
            }
        }
        if($authenticated == false) $f3->error(403);
    } else {
        $f3->error(403);
    }
} 
```

我正在寻找有关基本 http 身份验证方法的文档！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:30:59.310

该类`auth`始终根据映射器对您进行身份验证。随意使用 F3 的 Jig、Mongo 或 SQL。

```
$db = new DB\SQL('mysql:host=localhost;dbname=mydb', 'dbuser', '1234');
$mapper = new DB\SQL\Mapper($db, 'users');    
$auth = new Auth($mapper, array('id'=>'username','pw'=>'password'));

if($auth->basic())
    return true; 
```

`password`并且`username`是数据库中的字段名称。`id`并且`pw`是 auth 类内部使用的。我建议在 Github 上的 dev 分支中检查 auth 类代码和单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T18:04:20.877

一个简单的例子是......

* * *

*用户名：admin，密码：123*

```
// Create users table using Jig.
$db = new \DB\Jig('data/');
$users = array(
    0 => array('username' => 'admin', 'password' => '202cb962ac59075b964b07152d234b70'),
);
$db->write('users', $users);

$db_mapper = new \DB\Jig\Mapper($db, 'users');
$auth = new \Auth($db_mapper, array('id' => 'username', 'pw' => 'password'));

// Callback function because of md5 stored password.
function chkauth($pw) {    
    return md5($pw);
}

$auth->basic('chkauth'); 
```

# json - 将枚举标志从 WCF 传递给 json 客户端

> ID：14819707
> 
> 赞同：0
> 
> 时间：2013-02-11T19:50:20.687
> 
> 标签：json, wcf

我在具有以下属性的 C# dll 中定义了一个枚举`[Flags]`：

```
 [Flags]
    [DataContract(Namespace = "MyApp")]
    public enum MobileNotifications
    {
        /// <summary>
        /// 
        /// </summary>
        [EnumMember]
        None,

        /// <summary>
        /// 
        /// </summary>
        [EnumMember]
        Msg1,

        /// <summary>
        /// 
        /// </summary>
        [EnumMember]
        Msg2,

        /// <summary>
        /// 
        /// </summary>
        [EnumMember]
        Msg3,

        /// <summary>
        /// 
        /// </summary>
        [EnumMember]
        Msg4
    } 
```

当我调用方法“GetFlags”时，它会将值作为单个`Int`值返回。

```
MobileNotifications GetNotifications()
{
   return Msg1 | Msg4;
} 
```

上面的方法返回`5`一个值。WCF 有没有办法传递可以解析为 json 的枚举标志？

这是一个 .NET 4.0 WCF 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:05:53.467

就我个人而言，我会再看看这个设计。5 是什么意思？它可以由几个不同的组合组成，不是吗 - Msg 1 | 消息 4，消息 2| 消息 3 等。其余部分也是如此。消费者可以区分这些组合吗？如果不是，我建议将其更明确或实际更改枚举值，以便组合是唯一的，例如

无 =0，Msg1 = 1，Msg2 = 2，Msg3 = 4，Msg4 = 8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:01:56.437

首先，您需要以 2 的幂定义显式枚举常量，以避免不同值组合的任何重叠（请参阅[http://msdn.microsoft.com/en-gb/library/vstudio/system.flagsattribute.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/system.flagsattribute.aspx)）。为了以有意义的方式将其返回给 Json 客户端，我建议`ToString()`它实际上创建一个以逗号分隔的实际成员名称列表（然后您可以在客户端对其进行解析）。例子：

```
[Flags]
public enum MobileNotifications
{
    None = 0,
    Msg1 = 1,
    Msg2 = 2,
    Msg3 = 4
}

var value = MobileNotifications.Msg1 | MobileNotifications.Msg3;
var asString = string.Format("{0}", value);  // will create: "Msg1, Msg3" 
```

# r - R 代码：在绘制层次聚类时调用 x、y 轴的 rnorm

> ID：14819709
> 
> 赞同：0
> 
> 时间：2013-02-11T19:50:22.527
> 
> 标签：r

这是在此处生成的随机数据集，用于理解和绘制 R 中的层次聚类。我需要知道为什么对绘图的 x 和 y 轴调用 rnorm 的差异背后的逻辑。为什么 y<-rnorm(12, mean=rep(c(1,2,1)) 而我本来期望 mean=rep(c(1,2,3)。也许只是直译会帮助我。

```
set.seed(1234); par(mar=c(0,0,0,0)) ## par sets parameter mar (sets margin)  
x<-rnorm(12, mean=rep(1:3,each=4),sd=0.2) ## repeat the vector 3 times
y<-rnorm(12, mean=rep(c(1,2,1),each=4),sd=0.2) ## ?????
plot(x,y,col="blue",pch=19,cex=2)
text(x+0.05,y+0.05,label=as.character(1:12)) 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:13:38.420

如果你运行你的代码，你会得到如下所示的图形输出：

![集群](../Images/035775ad53f3aaa2c4085e8fc5a1ed2e.png)

`x`您可以看到在三个不同的平均值（1、2 和 3）处存在三个集群，但只有两个不同的`y`值（1 和 2，然后又是 1）。那是因为`y`值的代码具有`mean=rep(c(1,2,1),each=4)`. 即该`rnorm`函数正在生成十二个随机`y`值，其中前四个的平均值为 1，第二个四个的平均值为 2，第三个四个的平均值为 1。

# c# - 使用 Microsoft Word 在 C# 中打开 *.docx

> ID：14819711
> 
> 赞同：1
> 
> 时间：2013-02-11T19:50:26.193
> 
> 标签：c#, ms-word

经过一番研究，似乎您可以使用 Word Interlop 来操作 Word 文档（打开、修改、更改等）。像这样：

```
class Program
{
    static void Main(string[] args)
    {
        Application ap = new Application();

        Document doc = ap.Documents.Open(@"C:\temp\TestDoc.docx");
        doc.Activate();
    }
} 
```

但是这样做，带有 GUI 的 MS Word 应用程序本身没有显示。我怀疑它根本没有开始。我只能`WINWORD.EXE`在 Windows 任务管理器的“进程”选项卡中看到，而不能在“应用程序”选项卡中看到。

我想做的是：

1.  启动 MS Word 应用程序
2.  打开文档
3.  将其展示给最终用户，以便他们可以修改/保存它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T19:52:17.360

除非您需要控制 Word 应用程序，否则简单的[Process.Start](http://msdn.microsoft.com/en-us/library/53ezey2s(v=vs.100).aspx)可能就足够了：

```
 Process.Start(@"C:\temp\TestDoc.docx") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T20:35:55.987

如果您想坚持使用 Office Interop，那么我认为您可以通过在打开文档后将实例的`Visible`属性设置为 true 来获得所需的内容。`Application`

```
ap.Visible = true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:53:01.727

请改用[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)。

这就是您在这里所需要的，并且会产生您所追求的行为。

# c# - 如何修改请求正文，以便可以在内部将新对象发送到控制器？

> ID：14819713
> 
> 赞同：1
> 
> 时间：2013-02-11T19:50:32.960
> 
> 标签：c#, .net, asp.net-mvc-4, error-handling

好吧，我为这个话题道歉。我真的不知道该怎么问。

我们的 Web Api 中有一个自定义调度程序，它允许我们根据嵌入在标头中的版本号选择不同的控制器。我们面临的问题是，在这个类中抛出的异常正在由框架静默处理。相反，我们可以捕获异常并尝试处理它，但由于在此级别没有明显的方法来修改默认响应，因此我们所有的处理都会被忽略。

我们目前正在寻求的解决方法基本上是利用这样一个事实，即在抛出此异常时我们正在选择控制器，因此我们希望捕获该异常并将其发送给控制器以进行重新抛出，以便它可以被我们的错误过滤器捕获。听起来很笨拙，但这就是我们正在使用的。我现在正在处理的问题是，我已经让它选择我创建的 ExceptionController 重新抛出，但是我不确定如何将异常对象发送到这个控制器。这是 catch 块的示例：

```
catch(Exception ex)
{
    var routeValues = request.GetRouteData().Values;
    routeValues["controller"] = "Exception";
    routeValues["action"] = "Exception";
    controllerDescriptor = new HttpControllerDescriptor(_config, "exceptionController", typeof(ExceptionController));

}
return controllerDescriptor; 
```

控制器方法具有以下签名：

```
[HttpPost]
public void Exception(Exception ex) 
```

我的第一直觉是修改请求正文，它属于 HttpRequestMessage 类型，但我不知道该怎么做。我应该能够在调用 ExceptionController 之前修改该请求。

所以我想问题是，我如何修改请求对象以赋予它异常对象，或者还有其他方法可以解决这个问题吗？

TIA

# jquery - 无法获取属性“匹配”的值：对象为空或未定义

> ID：14819714
> 
> 赞同：2
> 
> 时间：2013-02-11T19:50:32.767
> 
> 标签：jquery, regex, validation

当下面的函数工作时，我得到“无法获取属性'match'的值：对象为空或未定义”。有趣的部分是它在另一个页面上完美运行。有任何想法吗？

```
function valPoBox(sender, args) {
    var hasPObox = /^[P|p]*(OST|ost)*\.*\s*[O|o|0]*(ffice|FFICE)*\.*\s*[B|b][O|o|0][X|x]\s*(\d.)*/gi;
    var StreetAddress = $('.streetaddress').val();

    if (StreetAddress.match(hasPObox)) {
        args.IsValid = false;

        sender.ErrorMessage = "Address must not contain P.O. Box";
        $('.valPoBox').attr("ErrorMessage", sender.ErrorMessage);
    }
    else {
        args.IsValid = true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:04:23.443

所有字符串都有一个`match`方法，因此您正在处理的内容不能是字符串。该`.val()`方法只返回两种不同的东西：找到元素时的字符串，以及`undefined`未找到元素时的字符串。考虑到这一点，`$('.streetaddress')`必须返回 0 个元素。修改选择器，使其针对正确的元素来解决问题。

# netty - Mimo ICAP 编解码器，不适用于 HTTP 403

> ID：14819718
> 
> 赞同：0
> 
> 时间：2013-02-11T19:50:44.000
> 
> 标签：netty

我们正在使用[http://icap.mimo.ch/netty](http://icap.mimo.ch/) ICAP 客户端。当服务器以 HTTP 403 响应时，客户端似乎无法读取 HTTP 标头。任何帮助表示赞赏。

**来自 mimo 编解码器的日志**

> IcapClient HostIP absoluteFilePath
> 
> SKIP_CONTROL_CHARS-----
> 
> READ_ICAP_INITIAL_STATE--------
> 
> READ_ICAP_HEADER_STATE------
> 
> READ_HTTP_REQUEST_INITIAL_AND_HEADERS-------
> 
> ```
>  8 Feb, 2013 4:15:53 PM org.jboss.netty.channel.SimpleChannelUpstreamHandler
> WARNING: EXCEPTION, please implement com.chunk.IcapClientHandler.exceptionCaught() for proper handling.
>     java.lang.IllegalArgumentException: invalid version format: FORBIDDEN
>     at org.jboss.netty.handler.codec.http.HttpVersion.<init>(HttpVersion.java:102)
>     at org.jboss.netty.handler.codec.http.HttpVersion.valueOf(HttpVersion.java:62)
>     at ch.mimo.netty.handler.codec.icap.ReadHttpRequestInitialAndHeadersState.execute(ReadHttpRequestInitialAndHeadersState.java:52)
>     at ch.mimo.netty.handler.codec.icap.IcapMessageDecoder.decode(IcapMessageDecoder.java:98)
>     at ch.mimo.netty.handler.codec.icap.IcapMessageDecoder.decode(IcapMessageDecoder.java:1)
>     at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:500)
>     at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:435)
>     at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
>     at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
>     at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88) 
> ```

**响应的数据包捕获：**

> ICAP/1.0 200 正常
> 
> 封装：req-hdr=0, res-hdr=0, res-body=176
> 
> 日期：格林威治标准时间 2013 年 2 月 8 日星期五 09:35:39
> 
> 服务：Somethin Systems Somethin Systems DLP SDK ICAP Server 1.0
> 
> HTTP/1.1 403 禁止
> 
> 内容类型：文本/xml
> 
> 内容长度：1118
> 
> 服务器：Somethin Systems Somethin Systems DLP SDK ICAP Server 1.0
> 
> 日期：格林威治标准时间 2013 年 2 月 8 日星期五 09:35:39
> 
> 45e

```
<?xml version="1.0" encoding="UTF-8"?>
<Results>
    <Action>3</Action>
</Results> 
```

上面的 xml 被截断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:11:32.570

我发现 ICAP 响应中不允许使用“req-hdr=0”。换句话说，问题更多在于 ICAP 服务器发送不符合要求的响应。

# sql - 在 oracle 中的二进制文件

> ID：14819724
> 
> 赞同：-1
> 
> 时间：2013-02-11T19:51:10.357
> 
> 标签：sql, oracle, oracle11g

oracle 中是否有针对 MySQL 的 Binary 的等效语句？

例子：

```
Select * from table1 where BINARY column1 = BINARY column2; 
```

它强制进行精确的区分大小写的匹配。除了将两列都转换为 UPPER 或 LOWER 之外，还有什么不同的语句吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:06:27.117

```
SELECT *
FROM table1
WHERE NLSSORT(column1, 'NLS_SORT = Latin_CS') = NLSSORT(column2, 'NLS_SORT = Latin_CS') 
```

在某处找到了答案。

# opengl - 如何在opengl中使用鼠标在XZ平面中移动窗口

> ID：14819725
> 
> 赞同：0
> 
> 时间：2013-02-11T19:51:14.507
> 
> 标签：opengl

当我移动鼠标时，我想在 XZ 平面中移动视图。`mlon`和`mlat`是鼠标坐标 x 和 y 的线性函数。我有`glutPassiveMotionFunc(mouse_motion);`我的主要功能。为了在 XZ 平面中移动窗口视图，我需要做什么？有什么解释吗？

```
void mouse_motion(int x, int y) {

 /* To be completed */
 x=lon+mlon;
 y=lat+mlat;

} // mouse_motion() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:42:33.163

我将从在鼠标运动处理程序中调用 glutPostRedisplay 开始，以便重新绘制场景。使用更新的位置重绘。

# java - ORMLite - 如何创建对象并填充外部集合？

> ID：14819727
> 
> 赞同：7
> 
> 时间：2013-02-11T19:51:17.903
> 
> 标签：java, foreign-keys, ormlite

我正在尝试在单个操作中创建一个对象并填充该对象持有的外部集合的成员。我已经尝试了所有我能想到的操作顺序，但似乎无法让它发挥作用。

我的课程是（跳过不相关的字段和注释）：

```
@DatabaseTable
public class ScheduledJob
{
    @DatabaseField(id=true)
    private String id = UUID.randomUUID ().toString ();

    @ForeignCollectionField(eager=true)
    private Collection<ScheduledJobTask> tasks;

    /* other stuff here ... */
}

@DatabaseTable
public class ScheduledJobTask
{
    @DatabaseField(id=true)
    private String id = UUID.randomUUID ().toString ();
    @DatabaseField(foreign=true)
    private ScheduledJob job;
    /* more other stuff ... */

    public ScheduledJobTask(Task t) { 
       /* initialise scheduled task from template task by copying relevant fields...*/ 
    }

} 
```

我这样创建我的对象：

```
ScheduledJob job = new ScheduledJob ();
// fill in other fields of job here
job.tasks = new ArrayList<ScheduledJobTask> ();
for (Task t : template.getTasks())
    job.tasks.add(new ScheduledJobTask(t));

sched.getSchedule().add (job);  // 'sched' is an object loaded from another table, this
                                // adds 'job' to a foreign collection in that table
Storage.store.scheduledJobs.createIfNotExists (job);
for (ScheduledJobTask t : job.getTasks ())
    Storage.store.scheduledJobTasks.createIfNotExists (t);
Storage.store.daySchedules.update (sched); 
```

我已经尝试了最后三个语句的所有排序，但似乎没有任何效果：在每种情况下，最终在 schedulejobtask 数据库表中的条目的“job_id”字段都为空。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:20:41.037

您缺少的是您没有设置该`Task.job`字段。该`ScheduledJobTask.job`字段是设置外部集合的内容。当您检索 a`Job`时，它会在任务表中查找具有该作业的所有任务——而不是相反。

您将需要执行以下操作：

```
for (Task t : template.getTasks()) {
    t.setJob(job);
    job.tasks.add(new ScheduledJobTask(t));
} 
```

然后，当你这样做时：

```
Storage.store.scheduledJobs.createIfNotExists (job); 
```

所有`job`字段都将`Job`具有一个`id`字段集。因此，当您保留任务时，他们的工作字段将具有该工作 ID。

# java - 保存创建的选项卡及其数据

> ID：14819729
> 
> 赞同：0
> 
> 时间：2013-02-11T19:51:27.263
> 
> 标签：java, file, tabs, save, serializable

我正在做的程序有点像“待办事项”，用户在其中创建他将来必须做的“任务”。根据这些任务的相关内容，这些任务被组织在不同的选项卡中。

例如，我创建名称为“工作”的类别（选项卡），并在该选项卡下存储与工作相关的所有任务，依此类推。

现在的问题是我想将用户创建的所有选项卡以及存储在每个类别（选项卡）中的数据保存在一个文件中。因此，当用户重新打开程序时，他可以加载该数据并对其进行修改，或者只是检查他编写的任务。
我根本不知道这是否可以做到，如果可以做到，如何做到。在编程课程中，我看到了一些可序列化的接口和 I/O，但我真的不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:14:49.293

我认为您正在寻找本地存储。
看这里：[http](http://diveintohtml5.info/storage.html)
://diveintohtml5.info/storage.html 或者您可以在会话期间将其保存在内存中，如下所示：

```
var tabs = new Array();
tabs['category'] = new Array();
tabs['category']['Work'] = new Array();
tabs['category']['Work'][0] = task1;
tabs['category']['Work'][1] = task2;
...... 
```

数据将保留到页面重新加载。

# forms - ColdFusion 表单：如何引用绑定中的选择？

> ID：14819732
> 
> 赞同：1
> 
> 时间：2013-02-11T19:51:46.740
> 
> 标签：forms, binding, coldfusion

我不确定我是否正确地考虑了这一点。我还是 ColdFusion 的新手。我正在创建一个表单，它使用绑定让用户选择一个类别，然后选择一个特定的服务。绑定的代码效果很好。问题是现在我需要从服务中提取一些附加信息来引用另一个字段。例如，如果所选服务在需要的附加信息下具有“Y”。一个字段将显示需要额外的信息（此字段不可更改）

最初我认为我可以做一些事情，比如重新生成我所做的相同查询以提取服务列表并仅引用所选的服务类型。然而，我不断收到该字段未定义的错误。这是我试图使其工作的代码。

更新：我让它工作我改变了下面的代码唯一的问题是我无法让“Y”显示我得到[object Object]。关于如何使用 cfinput 显示文本的任何建议？

氟氯化碳：

```
 <!--- Get array of Catagory Description types --->
 <cffunction name="cat_description" access="remote" returnType="array">

 <!--- Define variables --->
 <cfset var data="">
 <cfset var result=ArrayNew(2)>
 <cfset var i=0>

 <!--- Get data --->
 <cfquery name="getServiceCat" datasource="Some Database">
    select distinct 2 AS SortBy, CATG_NAME
    from some table
    UNION
    select 1 AS SortBy, '' AS CATG_NAME
    from Some table
    order by SortBy
 </cfquery>

 <!--- Convert results to array---> 
 <cfloop index="i" from="1" to="#getServiceCat.recordcount#">
    <cfset result[i][1]=getServiceCat.CATG_NAME[i]>
    <cfset result[i][2]=getServiceCat.CATG_NAME[i]>
 </cfloop>

 <!--- And return it --->
 <cfreturn result>
 </cffunction>

  <!--- Get Service Type by Cat description type --->
  <cffunction name="getServiceType2" access="remote" returnType="array">
  <cfargument name="CATG_NAME" type="string" required="true">

  <cfset var data="">
  <cfset var result=ArrayNew(2)>
  <cfset var i=0>

  <cfquery name="getServiceType2" datasource="Some Database">
    select 1 AS SortBy,  '' AS SRTY_BNR, '' AS SRTY_NAME
    from Some table
    UNION
    select distinct 2 AS SortBy, SRTY_NBR, SRTY_NAME
    from Some Table
    where CATG_NAME = <cfqueryparam value="#ARGUMENTS.CATG_NAME#"   
    cfsqltype="cf_sql_varchar"> 
    order by SortBy
   </cfquery>

   <cfloop index="i" from="1" to="#getServiceType2.recordcount#">
      <cfset result[i][1]=getServiceType2.SRTY_NAME[i]>
      <cfset result[i][2]=getServiceType2.SRTY_NAME[i]>
   </cfloop>

   <cfreturn result>
   </cffunction>

   <!---Updated below table into CFC to pull information depending on what is pulled   
   from category and service type--->
   <cffunction name="getLR" access="remote" returnType="query">
   <cfargument name="SRTY_NAME" type="string" required="true">

   <cfset var data="">

    <!---Query to get "Y"--->
    <cfquery name="lr_required" datasource="Some Datebase">
  select distinct LAB_REL_NTFN_FLAG 
  from some table
  where SRTY_NAME = <cfqueryparam value="#ARGUMENTS.SRTY_NAME#"  
       cfsqltype="cf_sql_varchar"> 
</cfquery>

     <cfreturn lr_required>
     </cffunction> 
```

这是表单中的代码：

```
<TR id="serv_ty" style="display: inline;">
    <td align="left" nowrap><label>Service Type:</label></td>
    <td>Select Category:
    <cfselect name="catdesc"
    bind="cfc:servicetype2.cat_description()"
    bindonload="true"/><br />
    </td>
</TR>
<tr id="serv_ty2" style="display: inline;">
    <td></td>
    <td>Select Service:
    <cfselect name="service_type"
    bind="cfc:servicetype2.getServiceType2({catdesc})"
    bindonload="false"/>
    </td>
</tr> 
```

这是使用绑定的表单代码，它有效但不会显示数据：

```
 <tr id="lr_verify" style="display: inline;">
 <td></td>
 <td>Additional Info Reuired:
 <cfinput 
 name="lr_needed"
 bind="cfc:servicetype2.getLR({service_type})"
 bindonload="no"
 disabled="disabled"
 display="LAB_REL_NTFN_FLAG"/></td>
 </tr> 
```

关于如何让它显示的任何建议，或者我是否应该使用不同的 CF 语句与绑定来获得正确的显示。提前感谢您对此的帮助。

# javascript - Three.js - 形状在另一面消失

> ID：14819733
> 
> 赞同：1
> 
> 时间：2013-02-11T19:51:47.707
> 
> 标签：javascript, three.js, webgl, shape

我做了一个圆圈如下：

```
material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
arcShape = new THREE.Shape();
arcShape.absarc( 0, 0, 20, 0, -Math.PI*2, true );
geometry = arcShape.makeGeometry();
circle = new THREE.Mesh(geometry, material);
scene.add(circle); 
```

像这样，它是可见的。但是旋转它，它就会消失。

```
shadow.rotation.x = Math.PI / 2; 
```

我看过其他几篇没有解决这个问题的帖子。（因此，除非有人有解决方案，否则我将改用扁平圆柱体。这只是一个琐碎的问题）。

我设置了`mesh.doubleSided`= true 和`mesh.flipSided = false`. 我还尝试了切换渲染器的 depthTest 和材质的 depthWrite 属性的所有 4 种组合。

还有什么我可以尝试的吗？如果不是，我猜代码对我的一些调用的顺序很敏感，在这种情况下，我已经度过了漫长的一天，所以我会坚持使用圆柱体！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T19:57:13.000

```
material.side = THREE.DoubleSide; 
```

# javascript - 如果选中复选框，则为 Coldfusion/Javascript

> ID：14819734
> 
> 赞同：-2
> 
> 时间：2013-02-11T19:51:52.603
> 
> 标签：javascript, jquery, coldfusion

我真的可以在这方面使用一些帮助。我正在修改别人的代码。基本上该脚本所做的是它通过冷融合循环数据。假设用户将数据插入到这些循环项中的每一个中。然后一旦完成，就会弹出 javascript 框并确认用户输入的数据是正确的。这很好用......我遇到的问题是我需要在每个循环表单旁边有一个复选框，他们单击以选择他们要提交的循环表单。我已经让 Coldfusion 部分轻松工作。但是，我需要验证框来仅验证已检查的表格。

确认框变量示例

```
<cfset VARIABLES["PromptMessage" & CurrentRow] = VARIABLES["PromptMessage" & CurrentRow] & "<br /><br /><strong>LEASE:</strong>&nbsp;">
                    <cfset VARIABLES["PromptMessage" & CurrentRow] = VARIABLES["PromptMessage" & CurrentRow] & "L. HRS: <strong style=""color:black"">' + $('##LE_LEFH#CurrentRow#').val() + '</strong>">
                    <cfset VARIABLES["PromptMessage" & CurrentRow] = VARIABLES["PromptMessage" & CurrentRow] & "&nbsp;|&nbsp;L. CYCLES: <strong style=""color:black"">' + $('##LE_LCYCLES#CurrentRow#').val() + '</strong>">
                    <cfset VARIABLES["PromptMessage" & CurrentRow] = VARIABLES["PromptMessage" & CurrentRow] & "&nbsp;|&nbsp;R. HRS: <strong style=""color:black"">' + $('##LE_REFH#CurrentRow#').val() + '</strong>">
                    <cfset VARIABLES["PromptMessage" & CurrentRow] = VARIABLES["PromptMessage" & CurrentRow] & "&nbsp;|&nbsp;L. CYCLES: <strong style=""color:black"">' + $('##LE_RCYCLES#CurrentRow#').val() + '</strong>">
                    <cfset VARIABLES["PromptMessage" & CurrentRow] = VARIABLES["PromptMessage" & CurrentRow] & "<br /><br />"> 
```

复选框示例

```
<div style="color:##ff0000;background-color:;background-color:##dadada;border-left:1px solid ##999;border-right:1px solid ##999;border-bottom:1px solid ##999;"><input type="Checkbox" name="Confirm#CurrentRow#" value="1"> <strong>Select to report engine usage for this aircraft.</strong></div></div> 
```

确认框操作代码。

```
 <script type="text/javascript">
    $(document).ready(function(){
      // catch submit 
      $("##btn_submit").click(function(e){
        jConfirm('<strong>Confirm your engine usage information. Click Confirm to proceed or Edit to edit your values.</strong><cfloop from="1" to="10" index="x">#VARIABLES["PromptMessage" & x]#</cfloop><br />', 'Report Confirmation Dialog', function(r) {
          // If they confirmed, manually trigger a form submission
          if (r) $("##btn_submit").parents("FORM").submit();
        });
        // Always return false here since we don't know what jConfirm is going to do
        return false;
      });
    });

$(document).ready(function() {
var $dialog = $('<div></div>')
    .html('This dialog will show every time!')
    .dialog({
        autoOpen: false,
        title: 'Basic Dialog',
        modal: true,
        height: 400,
        buttons: {
            "Delete all items": function() {
                $( this ).dialog( "close" );
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });

$('##popup').click(function() {
    $dialog.dialog('open');
    // prevent the default action, e.g., following a link
    return false;
});
});

 </script> 
```

请记住，它是通过查询循环的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:46:16.097

我建议你重新设计你的表格。与其将所有内容与查询的行号结合，不如将它们与记录的 id 字段结合。他们会更容易以这种方式工作。

如果复选框都具有相同的名称但不同的值，则它们将更容易使用。像这样的东西：

```
<cfoutput query="somequery">
<input type="checkbox" name="processme" value="#id#">
</cfoutput> 
```

然后，当您处理表单时，您可以执行一个简单的循环。

```
<cfif StructKeyExists(form, "processme")>
<cfloop list = "#form.processme#" index="ThisID">
code
closing tags 
```

# java - 订单生命周期 - 对象或单独类中的模型

> ID：14819735
> 
> 赞同：0
> 
> 时间：2013-02-11T19:51:54.777
> 
> 标签：java, model, lifecycle

```
@Entity
public class Order{

     @ManyToOne
     private LocalStore store;
     private OrderStatus status;

     public void acceptOrder(LocalStore store){
        //business logic
     }
} 
```

在域对象中有生命周期方法更好吗？把这个放在不同的班级会更好吗？（例如..上面可能会强制 LocalStore 级联持久性。）

# android - Android Emulator UDP 无法接收；在手机上工作正常

> ID：14819737
> 
> 赞同：3
> 
> 时间：2013-02-11T19:52:15.863
> 
> 标签：android, udp

您好，我正在尝试连接到网络上的盒子。它上面有一个工作的 UDP 服务器。使用下面的代码，我可以与盒子通信并从我的手机发送/接收 UDP 数据包。但是，我无法弄清楚如何使用 android 模拟器进行设置。我在 StackOverflow 以及其他不走运的论坛上阅读了很多内容。我在 Windows 8

安卓代码：

```
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

import android.os.Handler;
import android.util.Log;

public class udp implements Runnable {
    // Private variable
    private String IPServer = "10.0.2.2";           // For Emulator
    //private String IPServer = "255.255.255.255";  // For Phone
    private int portServer = 6286;
    private int portDestin = 4381;

    private InetAddress serverAddr;
    private InetAddress localAddr;
    private DatagramSocket socketSend;
    private DatagramSocket socketList;
    private DatagramPacket packetSend;
    private DatagramPacket packetList;
    private Handler uiHandler;

public udp(){
};

public void send() {

    // Retrieve the server name
    try {
        Log.d("UDP", "Creating InetAddress");
        serverAddr = InetAddress.getByName(IPServer);
    } catch (Exception e) {
        Log.e("UDP", "InetAddress Error:", e);
    }

    // Create UDP sockets
    try {
        Log.d("UDP", "Creating Sockets");
        socketSend = new DatagramSocket(portServer);
        socketList = new DatagramSocket(portDestin);
    }
    catch(Exception e) {
        Log.e("UDP", "DatagramSocket Error:", e);
    }

    // Sets socket to broadcast
    try {
        Log.d("UDP", "SetBroadcast");
        socketSend.setBroadcast(true);
    }
    catch(Exception e) {
        Log.e("UDP", "SetBroadcast Error:", e);
    }

    // Create UDP packets
    try {
        Log.d("UDP", "Creating packets");
        byte[] dataSend = new byte[32];
        byte[] dataRead = new byte[32];
        String msg = "Packet Broadcast";
        dataSend = msg.getBytes();
        packetSend = new DatagramPacket(dataSend, dataSend.length, serverAddr, portDestin);
        packetList = new DatagramPacket(dataRead, dataRead.length, serverAddr, portDestin);
    }
    catch(Exception e) {
        Log.e("UDP", "DatagramPacket Error:", e);
    }

    // Send packet
    try {
        Log.d("UDP", "Sending packet");
        socketSend.send(packetSend);
    }
    catch(Exception e) {
        Log.e("UDP", "Send Error:", e);
    }

    // Receive packet
    Log.d("UDP", "Receiving packet");
    for(int i=0; i<2; i++)
    {
        try {
            socketList.receive(packetList);
        }
        catch(Exception e) {
            Log.e("UDP", "Receive Error:", e);
        }
        String packetRec = new String(packetList.getData());
        Log.d("UDP", "Received: "+packetRec);
    }       

    socketSend.close();
    socketList.close();
}

@Override
public void run() {
    // TODO Auto-generated method stub
}   
} 
```

我需要向全网广播；这就是为什么我使用 255.255.255.255 但对于 android 我读到它不起作用，我在模拟器中打开设置并找到我的 IP 到上面的那个。

我也移植redir

```
telnet localhost 5554
redir add udp:4381:4381 
```

从手机登录：

```
02-11 12:01:09.743: D/UDP(17253): Creating InetAddress
02-11 12:01:09.743: D/UDP(17253): Creating Sockets
02-11 12:01:09.753: D/UDP(17253): SetBroadcast
02-11 12:01:09.753: D/UDP(17253): Creating packets
02-11 12:01:09.753: D/UDP(17253): Sending packet
02-11 12:01:09.753: D/UDP(17253): Receiving packet
02-11 12:01:09.753: D/UDP(17253): Received: Packet Broadcast????????????
02-11 12:01:09.763: D/UDP(17253): Received: ??????PACKETSTUFF???????????fP* 
```

从安卓模拟器登录：

```
02-11 20:00:22.742: D/UDP(1201): Creating InetAddress
02-11 20:00:22.742: D/UDP(1201): Creating Sockets
02-11 20:00:22.752: D/UDP(1201): SetBroadcast
02-11 20:00:22.772: D/UDP(1201): Creating packets
02-11 20:00:22.772: D/UDP(1201): Sending packet
02-11 20:00:22.772: D/UDP(1201): Receiving packet
02-11 20:00:22.772: D/UDP(1201): Received: Packet Broadcast???????????????????? 
```

提前致谢

更新：

我目前得到了它，以便我的模拟器可以使用 UDP 转发器 NetworkActiv AUTAPF 在主机外部发送数据包。它发出我的 UDP，但它不转发响应。有谁知道我应该将目的地响应发送到哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:27:30.337

**您无法将您的 android 模拟器直接连接到网络上的任何物理设备。**

Android Emulator 创建自己的**LAN**，每个模拟器实例创建一个具有相同 IP 的新 LAN 实例（这没关系，因为它们不能互相访问）

如果您坚持使用 Emulator 与 Box 通信，您应该在您的 PC 上创建一个 UDP 代理套接字（使用 JAVA 、 C# 、 C++ 、 VB ... 或任何您想要的桌面编程语言）

它们使您的桌面应用程序工作

*   让您的 LAN 子网稍后确定数据包源。
*   为您的服务器使用的端口启动一个 UDP 侦听器。
*   如果发件人是模拟器，则查找发件人的 IP 地址（有相应的 API），使用盒子 IP 将该数据包重新发送到盒子

在 Android 的开发者网站上有一个很好的演示。

请看[这里](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-18T20:15:47.280

我遇到了同样的问题，我发现问题是由于 android 模拟器重定向和错误造成的。

首先，如果您使用 API 25+ 级别的 android 模拟器设备，您将需要在没有“AndroidWifi”功能的情况下启动设备，否则您将无法与您的设备通信，因为错误[https:// issuetracker.google.com/issues/37095198](https://issuetracker.google.com/issues/37095198)

为此：

```
cd "C:\Program Files (x86)\Android\android-sdk\emulator"
emulator.exe -avd <name+of+your+device> -feature -Wifi 
```

之后，您需要将 localhost 的所需端口重新分配到您的模拟器设备

```
telnet localhost 5554
auth <your+code+here>
redir add udp:<origin+port>:<destination+port> 
```

最后，您需要将 UDP 数据包从您的本地 IP 地址 (192.168.1.X) 重新发送到您的 localhost (127.0.0.1)，否则模拟设备将不会收到数据包。为此，您可以创建一个简单的 UDP rediriger 或使用我创建的程序来做同样的事情[https://github.com/danidis91/Port-forward-UDP](https://github.com/danidis91/Port-forward-UDP)

# sql-server-2008 - sys.dm_fts_parser 点问题

> ID：14819739
> 
> 赞同：1
> 
> 时间：2013-02-11T19:52:25.600
> 
> 标签：sql-server-2008, tsql, full-text-search

你能帮我吗，请弄清楚为什么 t-sql 表达式如下：

```
 DECLARE @SearchWord varchar(max)
SET @SearchWord = '"I went to primary school in London "'
SELECT * FROM sys.dm_fts_parser('FormsOf(INFLECTIONAL, '+ @SearchWord + ')', 1033, 0, 0) 
where display_term in 
( SELECT display_term FROM sys.dm_fts_parser('FORMSOF(INFLECTIONAL, "go to school")', 1033, null, 0) ) 
```

返回

![在此处输入图像描述](../Images/2922a3a1a4f53a8d71211d0e978ccb5b.png)

尽管

```
DECLARE @SearchWord varchar(max)
SET @SearchWord = '"I went. to primary school in London "'
SELECT * FROM sys.dm_fts_parser('FormsOf(INFLECTIONAL, '+ @SearchWord + ')', 1033, 0, 0) 
where display_term in 
( SELECT display_term FROM sys.dm_fts_parser('FORMSOF(INFLECTIONAL, "go to school")', 1033, null, 0) ) 
```

返回

![在此处输入图像描述](../Images/ece44769638a6cc458092c9d4d4686f3.png)

即，当在搜索字符串的某处添加一个点时，相应的事件会移动 8 个位置？dot 或者我的 t-sql 表达式有什么问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:19:53.330

首先，[文档](http://msdn.microsoft.com/en-us/library/cc280463.aspx)说这`occurrence`表明*order*，而不是*position*。这意味着这些值可以是相对的，而不是绝对的，但仍能正确显示顺序。

接下来，通过观察，数字的第一位表示从零开始的句子编号（第一个句子除外，其中没有前导零）。“点”实际上是一个[句号](http://en.wikipedia.org/wiki/Full_stop)，它以英语结束一个句子，所以它有一些重要意义也就不足为奇了。查看此查询的输出，您将看到“句末”特殊术语：

```
DECLARE @SearchWord varchar(max) = N'"I went. to primary school in London. it was a nice school. to go there was fun"'
SELECT * 
FROM sys.dm_fts_parser('FormsOf(INFLECTIONAL, '+ @SearchWord + ')', 1033, 0, 0) 
```

然后，如果您用较长的句子查看查询...

```
DECLARE @SearchWord varchar(max) = N'"I went. to primary school in London. it was a nice school. to go there was fun"'
SELECT * 
FROM sys.dm_fts_parser('FormsOf(INFLECTIONAL, '+ @SearchWord + ')', 1033, 0, 0)
where display_term in 
(SELECT display_term FROM sys.dm_fts_parser('FORMSOF(INFLECTIONAL, "go to school")', 1033, null, 0)) 
```

...您可以看到，对于句子 1 和 2，the`occurrence`确实也是单词位置，但对于句子 3 和 4，则不是。我不知道为什么会发生这种情况，并且文档中没有任何内容可以解释它，但是由于文档没有说这`occurrence`与职位相同，因此并不完全令人惊讶。

这些问题也可能很有趣：

*   [如何在 FORMSOF INFLECTIONAL 全文搜索中获得匹配的位置？](https://stackoverflow.com/questions/3662419/how-do-i-get-the-position-of-the-match-in-a-formsof-inflectional-full-text-searc)
*   [如何在全文搜索中找到搜索关键字的位置？](https://stackoverflow.com/questions/14089796/how-to-find-position-of-search-keyword-in-full-text-search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:21:58.833

正如@Pondlife 建议使用 PATINDEX() 来查找位置（不是出现），我能够用`dm_fts_parser`. 下面的 t-sql 返回特定文本中所有匹配形式（INFLECTIONAL）的确切位置和长度，无论是否`@SearchWord`包含点：

```
DECLARE @SearchWord nvarchar(max)

SET @SearchWord = N'"I went. to primary school in London "'

SELECT distinct y.pos,y.lgth from 
(
SELECT w.*,
PATINDEX(N'%[^a-z]' + w.Display_Term + N'[^a-z]%',@SearchWord) as pos, LEN(w.display_term) as lgth
 FROM sys.dm_fts_parser(N'FormsOf(INFLECTIONAL, '+ @SearchWord + ')', 1033, 0, 0) w 
where display_term in 
( SELECT display_term FROM sys.dm_fts_parser('FORMSOF(INFLECTIONAL, "go to school")', 1033, 0, 0) ) and 
PATINDEX(N'%[^a-z]' + w.Display_Term + N'[^a-z]%',
@SearchWord)<>0
) y 
```

它返回下面的结果集：

![在此处输入图像描述](../Images/178f4c2df23b66ced7b1bc1dc26ae5a2.png)

# c# - 如何获取包含至少一种产品的分层类别

> ID：14819746
> 
> 赞同：-3
> 
> 时间：2013-02-11T19:53:06.103
> 
> 标签：c#

假设以下分层父/子类别模型：

```
 public class Category
    {
        public int CategoryId { get; set; }
        public Category ParentCategory { get; set; }
        public IList<Category> ChildCategories { get; set; }
        public IList<Product> Products { get; set; }
    } 
```

我想以包含至少一种产品的分层方式获取所有类别。

根类别

1。子类别 1 (0 产品)

a2。子类别 2（1 个产品）

b1。子类别 1 (0 产品)

b2。子类别 2（1 个产品）

b3。子类别 3 (0 产品)

预期结果是：

根类别

1。子类别 1

a2。子类别 2

b1。子类别 1

b2。子类别 2

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:01:13.933

未测试：

```
Category? GetNotEmpty(Category category)
{
   Category returnCategory = new Category();
   foreach(Category subCategory in category.ChildCategories)
          if(GetNotEmpty(subCategory) != null) returnCategory.ChildCategories.Add(GetNotEmpty(subCategory));

   if(returnCategory.ChildCategories.Count > 0 || returnCategory.Products.Count > 0) return returnCategory;
   else return null;
} 
```

并呼吁所有顶级类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:59:31.943

如果您使用的是 Linq，那么这很简单。类似于以下内容：

```
var categoriesWithProducts = category.Where(x=> x.Products.Count() > 0) 
```

# export - Rapidminer Graph 查看疑似导出错误？

> ID：14819750
> 
> 赞同：0
> 
> 时间：2013-02-11T19:53:19.533
> 
> 标签：export, rapidminer

由于我的问题在 Rapidminer 论坛中仍未通过此地址得到解答：

[我原来的问题](http://rapid-i.com/rapidforum/index.php/topic,6256.msg21862.html#msg21862)

我想在这里再次提出它，如果你有机会知道答案，请告诉我。

我注意到无论我们使用什么类型的扩展来获取导出（即 .pdf、.ps .jpg 等），导出引擎都喜欢当前视图的屏幕截图而不是整个输出空间，这导致了很多出口我研究的巨大决策树对我来说是个问题。

请有人就这个问题给我建议。

最好的，

阿米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:18:11.923

在流程结束时使用**日志运算符**，并根据您需要的信息对其进行配置。日志运算符将所有结果保存在一个**文本文件**中。基于此文件，您可以随时使用**rapidminer 或 gnuplot**生成所有图表......我发现这种方式最能节省您的时间和内存空间，并且在我看来也很容易分享。

# mysql - MySQL在相同的时间间隔内对彼此进行计数

> ID：14819753
> 
> 赞同：1
> 
> 时间：2013-02-11T19:53:35.490
> 
> 标签：mysql, count, intervals

我有一个表格，其中一列是日期：

```
+----------+---------------------+
|       id |                date |  
+----------+---------------------+
|        5 | 2012-12-10 10:12:37 |        
+----------+---------------------+
|        4 | 2012-12-10 09:09:55 |        
+----------+---------------------+
|        3 | 2012-12-09 21:12:35 |        
+----------+---------------------+
|        2 | 2012-12-09 20:15:07 |        
+----------+---------------------+
|        1 | 2012-12-09 20:01:42 |        
+----------+---------------------+ 
```

我需要的是计算彼此相隔 3 小时的行数。在此示例中，我想将上排与第 2 行连接起来，将第 3 行与第 4 行和第 5 行连接起来。所以我的输出应该是这样的：

```
+----------+---------------------+---------+
|       id |                date |   count | 
+----------+---------------------+---------+
|        5 | 2012-12-10 10:12:37 |       2 |
+----------+---------------------+---------+
|        3 | 2012-12-09 21:12:35 |       3 |
+----------+---------------------+---------+ 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:12:07.170

我不确定如何使用 My SQL 执行此操作，但我能够在 SQL Server 2005 中构建一组查询，这些查询将提供预期的结果。这是工作示例，它非常复杂并且可能过于复杂，但这就是我能够获得所需结果的方式：

```
WITH BaseData AS
(
    SELECT 5 AS ID, '2012-12-10 10:12:37' AS Date
    UNION ALL  
    SELECT 4 AS ID, '2012-12-10 09:09:55' AS Date
    UNION ALL  
    SELECT 3 AS ID, '2012-12-09 21:12:35' AS Date
    UNION ALL  
    SELECT 2 AS ID, '2012-12-09 20:15:07' AS Date
    UNION ALL  
    SELECT 1 AS ID, '2012-12-09 20:01:42' AS Date
),
BaseDataWithRowNum AS
(
    SELECT ID,DATE, ROW_NUMBER() OVER (ORDER BY Date DESC) AS RowNum
      FROM BaseData
),
InterRelatedDates AS
(
    SELECT B1.RowNum AS RowNum1,B2.RowNum AS RowNum2 
      FROM BaseDataWithRowNum B1
     INNER JOIN BaseDataWithRowNum B2
        ON B1.Date BETWEEN B2.Date AND DATEADD(hh,3,B2.Date)
       AND B1.RowNum < B2.RowNum 
       AND B1.ID != B2.ID
),
InterRelatedDatesWithinMultipleGroups AS
(
    SELECT G1.RowNum1,G2.RowNum2
      FROM InterRelatedDates G1
      LEFT JOIN InterRelatedDates G2
        ON G1.RowNum2 = G2.RowNum2
       AND G1.RowNum1 != G2.RowNum1
 )

SELECT BN.ID,
       BN.Date, 
       CountExcludingOriginalGrouppingRecord +1 AS C
  FROM
      (
        SELECT RowNum1 AS RowNum,COUNT(1) AS CountExcludingOriginalGrouppingRecord
          FROM
              (
                -- If a row was used in only one group then it is ok. use as it is
                SELECT D1.RowNum1
                  FROM InterRelatedDatesWithinMultipleGroups AS D1
                 WHERE D1.RowNum2 IS NULL

                UNION ALL

                -- In case a row was selected in two groups, choose the one with higher date
                SELECT Min(D1.RowNum1)
                  FROM InterRelatedDatesWithinMultipleGroups AS D1
                 WHERE D1.RowNum2 IS NOT NULL
                 GROUP BY D1.RowNum2
              ) T
        GROUP BY RowNum1
      ) T2
INNER JOIN BaseDataWithRowNum BN
   ON BN.RowNum = T2.RowNum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:58:25.523

我认为你需要一个自我加入：

```
select t.id, t.date, COUNT(t2.id)
from t left outer join
     t t2
     on t.date between t2.date - interval 3 hour and t2.date + interval 3 hour
group by t.id, t.date 
```

（这是未经测试的代码，因此可能存在语法错误。）

如果您尝试将所有内容分成 3 小时间隔，您可以执行以下操作：

```
select max(t.date), t.id, count(*)
from (select t.*,
             (date(date)*100 + floor(hour(date)/3)*3) as interval
      from t
     ) t
group by interval 
```

# .net - NHibernate + Npqsql + LINQ 给出“查询中找不到参数 p1”

> ID：14819754
> 
> 赞同：0
> 
> 时间：2013-02-11T19:53:38.063
> 
> 标签：.net, linq, postgresql, nhibernate, npgsql

我正在从 MySQL 转换为 Postgres，一些 linq 查询会导致异常。具体来说，我在添加按位运算符比较的查询中遇到问题。我注意到 SQL 字符串中的参数似乎是位置 (?) 而不是命名 (:p1, :p2, :p3)。

知道为什么吗？这是异常的一部分：

选择grant0_.\"Id\" 作为column1_39_，grant0_.\"Version\" 作为column2_39_, .... and (grant0_.\"IsPublic\"=TRUE or (grant0_.\"UserId\" is not null) and grant0_.\"UserId\"=?) 和 grant0_.\"PermissionFlags\"&?=?

名称：p1 - 值：9011 名称：p2 - 值：4 名称：p3 - 值：4

编辑：

我在 NpqsqlCommand.ReplaceParameterValue() 函数中看到了这一点——它可能需要包含更多运算符。我正在试验那个。

```
String pattern = "[- |\n\r\t,)(;=+/<>][:|@]" + parameterMarker + parameterName + "([- |\n\r\t,)(;=+/<>]|$)"; 
```

回答：我希望回答我自己的问题的形式还不错，但问题是 Npgsql 驱动程序 2.0.12 没有正确替换参数后跟 '&' 符号。当您使用整数作为位字段时会发生这种情况。下面是Linq：

```
Where(g => (g.flag & flag) == flag) 
```

我将向 Npgsql 团队提交补丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:26:54.030

我希望回答我自己的问题不是不好的形式，但问题是 Npgsql 驱动程序 2.0.12 在参数跟随“&”符号时没有正确替换参数。当您使用整数作为位字段时会发生这种情况。下面是Linq：

```
Where(g => (g.flag & flag) == flag) 
```

我将向 Npgsql 团队提交补丁。

# embedded - 尝试通过示例了解时钟周期是什么

> ID：14819757
> 
> 赞同：4
> 
> 时间：2013-02-11T19:53:57.550
> 
> 标签：embedded, microcontroller, clock, microprocessors

我试图完全理解时钟周期是什么，所以我想出了一个测试示例，我希望有人确认或消除并提供更好的理解。如果我有这行简单的代码，一个while循环，在设备上运行

```
while(true)
{
  int x = 5;
} 
```

命令：int x = 5 每个时钟周期执行一次吗？换句话说，时钟速度是设备在单位时间内读取和执行命令的速度吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T09:27:54.547

时钟周期只是驱动处理器逻辑的振荡器的单个周期，处理器在该周期中可能实现的目标取决于处理器架构和其他因素，例如内存速度。

您示例中的代码是高级语言，如果直接翻译，几乎可以肯定会翻译成多个机器级指令。以伪机器代码为例：

```
loop:
   MOV addrx,#5
   JMP loop 
```

这将是每个循环至少两个机器周期。高级代码和生成的机器指令之间几乎没有或没有确定性关系；虽然在这个简单的例子中，它可能看起来如此。

处理器如何实现指令集使问题更加复杂。典型的 RISC 处理器在单个周期内执行一条指令，而在 CISC 处理器上，不同的单独指令根据其复杂性分别占用不同数量的周期。

另一个考虑因素是内存总线延迟。通常，处理器执行指令的速度比它访问内存的速度要快，闪存通常尤其如此。访问较慢内存的指令可能会引入*等待状态*，在这种状态下，处理器会停止直到数据到达。

一些处理器具有并行执行指令的能力，允许在一个周期内执行多条指令。其他人采用 SIMD（单指令多数据）指令，可以同时对不同的数据执行相同的操作。

影响指令吞吐量的另一种技术是流水线，其中一条指令可能需要多个周期，但可以在每个周期启动一条新指令，因此假设 5 个四周期指令一个接一个地启动，则产生一次结果每个周期。

一些处理器采用哈佛架构，该架构使用单独的总线来允许同时获取数据和指令。

其他技术用于维持指令吞吐量，例如分支预测。高级语言编译器通常会生成代码，最大限度地发挥上述所有技术的潜力。

为特定架构给出的性能度量通常是 MIPS/MHz - 指示通常每个时钟周期执行的指令数量（在多个时钟周期内摊销）。例如，ARM Cortex-M3 管理 1.25 MIPS/MHz，而 Renesas SH-4 达到 1.8 MIPS/MHz。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T20:01:40.763

我从哪里开始...

任何处理器都有一个“时钟”，可确保电子器件有时间在下一件事发生之前从一种状态转换到另一种状态。在现代设备的速度下，没有什么是“瞬时的”——一个“台阶”变成了一个“斜率”，即使是很短的轨迹也会导致电信号传输的延迟。

根据 CPU 的架构，它可以“在一个时钟周期内”执行某些操作，而其他操作则需要“多个周期”。想想长除法——你做了一系列的减法——移位操作，直到你完成了前一部分的操作，你才知道接下来需要做什么。此外，更容易了解如何在一个周期内完成完整的操作。

当特定的“高级”指令被翻译成机器代码时，生成的代码可能需要一个或多个周期——而一条简单的指令可能需要一个或多个步骤。根据编译器、目标和选择的优化，上述代码中可能会发生以下任何情况：

*   编译器意识到“while”条件始终为真，并且循环内没有任何变化。它进一步意识到你从不使用 x 的值，它选择根本不执行指令

*   编译器决定为`int`变量使用内置寄存器`x`，并在编译时对其进行初始化。循环执行期间不花费时间

*   编译器将“5”加载到寄存器中，在表中查找 x 的偏移量，计算指针，并将寄存器复制到偏移地址中。可以是任意数量的周期。

不确定这是否真的对您有所帮助-但问题相当复杂...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T20:14:35.013

不幸的是，它并不像你建议的那么简单。

您可能想看看相关的维基百科文章[http://en.wikipedia.org/wiki/Sequential_logic](http://en.wikipedia.org/wiki/Sequential_logic)

试图简单地说，时钟周期是同步操作电路从一个定义的状态切换到下一个定义的状态所需的时间。

事实上，它通常与 CPU 执行指令所需的时间有关。您可能想查看 CPU 的手册，执行时间通常以执行所需指令所需的时钟周期数给出。

不幸的是，实际上它并不是那么简单，因为有些聪明的 CPU 如果满足特殊要求，就能够更快地执行指令。例如，通过指令流水线推送指令，cpu 可能已经开始对下一条指令进行操作，而占用超过一个时钟周期的部分 previos 指令仍在处理中。

如果指令的重新排序没有改变程序流程或指令被提前推测性地计算，那么指令甚至可能被重新排序。

另一方面，一条指令在时钟周期方面可能需要更长的时间，如果必须从内存中获取指令，这将花费更多时间。

# c++ - 覆盖删除运算符

> ID：14819760
> 
> 赞同：6
> 
> 时间：2013-02-11T19:54:06.317
> 
> 标签：c++, oop, new-operator

我想覆盖我班级中的删除运算符。这是我正在尝试做的，但没有成功。

```
class Complex{              
    void *operator new(size_t s);
    void operator delete(void *ptr);
};

void Complex::operator delete(void *ptr){
    delete ptr;
} 
```

我得到错误：

> 删除 void* 未定义

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T20:06:09.617

如错误消息所示，您不能`delete`使用`void*`. 试试这个：

```
// See http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=40

#include <new> // for size_t

class Complex
{
public:
 Complex() {}
 ~Complex() {}
 static void* operator new (size_t size) {
  return new char[size];
 }
 static void operator delete (void *p) {
  return delete[] static_cast<char*>(p);
 }
};

int main () {
  Complex *p = new Complex;
  delete p;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T20:12:11.833

你的声明是正确的。问题出在实现您的代码中`operator delete`：它使用关键字`delete`而不是调用全局`operator delete`. 像这样写：

```
void Complex::operator delete(void *ptr) {
    ::operator delete(ptr);
} 
```

这是假设您`operator new`使用了全局`operator new`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:07:31.677

通过delete删除比较奇怪，但是删除a`void*`就是UB。

此外，`size_t`它不是内置类型：它是在`<cstddef>`.

这可以很好：

```
#include <cstddef>

class Complex
{              
    void *operator new(size_t s);
    void operator delete(void *ptr);
};

void* Complex::operator new(size_t s)
{ return new char[s]; } //allocate a buffer of s bytes

void Complex::operator delete(void *ptr)
{ delete[] static_cast<char*>(ptr); } //deallocate the buffer 
```

实际上，我们在 new / delete 中连贯地分配/取消分配适当大小的缓冲区。

在`new`中，我们要求系统给我们我们需要的字节。我使用的`char[s]`since`char`是内存`size_t`度量单位：`sizeof(char) == 1`根据定义。

在`delete`我们必须将由 标识的字节返回给系统`ptr`。由于我们将它们分配为`char[]`，我们必须将它们删除为`char[]`，因此使用 of`delete[]`和强制转换为`char*`。

# php - 文件列表的简单数组到多维数组

> ID：14819762
> 
> 赞同：1
> 
> 时间：2013-02-11T19:54:19.040
> 
> 标签：php, arrays, multidimensional-array

我对编程很陌生，我一直在尝试做一些事情，这似乎很简单，完成了，但这花了我太长时间，而且我不觉得我已经接近了......

我正在尝试格式化一个如下所示的数组：

```
Array (
    [1] = "index.php"
    [2] = "page.php"
    [3] = "sub/subpage.php"
    [4] = "sub/subpage2.php"
    [5] = "sub/subsub/subsubpage.php"
    [6] = "sub/subsub/subsubpage2.php"
    [7] = "sub2/sub2page.php"
) 
```

进入一个看起来像这样的数组：

```
Array (
    [/] => Array (
              [0] => "index.php"
              [1] => "page.php"
          )
    [/sub] => Array (
              [0] => "subpage.php"
              [1] => "subpage2.php"
              [/subsub] => Array (
                  [0] => "subsubpage.php"
                  [1] => "subsubpage2.php"
              )
          )
    [/sub2] => Array (
              [0] => "sub2page.php"
          )
) 
```

我希望这个例子展示了我正在尝试做的事情......这基本上是将我的原始（简单）数组重新格式化为一个数组，我可以使用它在 HTML 中创建某种导航（使用嵌套的 ul）

提前致谢！

编辑：

我试过这个来创建多维数组......

```
 $parts = explode('/', trim($page["parent"], "/"));
 while ( !empty($parts) ) {
     $pageList[array_pop($parts)] = $page["filename"];
 }

 // $page = array("filename" => "example.php", "parent" => "sub/sub/") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:11:42.347

你的意思是这样的 - 那只是一个简单的解析器

```
$test = array(
    "index.php",
    "page.php",
    "sub/subpage.php",
    "sub/subpage2.php",
    "sub/subsub/subsubpage.php",
    "sub/subsub/subsubpage2.php",
    "sub2/sub2page.php"
);

function buildPathArray($array)
{
    $t = array();

    foreach ($array as $file) {
        $path = "/";
        $name = $file;

        if (preg_match('~^(.*)/([^/]+)$~', $file, $m)) {
            $path = $m[1];
            $name = $m[2];
        }

        $p = &arrayPath($t, $path);

        $p[] = $name;
    }

    return $t;
}

function &arrayPath(&$array, $path = false)
{
    if ($path == false) {
        return $array;
    }
    else
    {
        if (strpos($path, '/') === false) {
            if (!isset($array[$path])) {
                $array[$path] = array();
            }

            return $array[$path];
        }
        else
        {
            preg_match('~([^/]*)/(.*)~', $path, $m);
            if (!isset($array[$m[1]])) {
                $array[$m[1]] = array();
            }

            return arrayPath($array[$m[1]], $m[2]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:12:13.763

我已经准备了一个如何实现这一目标的示例。数组`$from`

```
$from = array (
    "index.php",
    "page.php",
    "sub/subpage2.php",
    "sub/subsub/subpage2.php",
    "sub2/sub2page.php",
); 
```

将转换为`$to`：

```
$to = array();
foreach($from as $element) {
    $path = explode('/', $element);
    if(count($path) === 1) {
        array_unshift($path, '/');
    }
    $_to = &$to;
    for($i=0; $i<count($path) -1; $i++) {
        if(!array_key_exists($path[$i], $_to)) {
            $_to[$path[$i]]= array();
        }
        $_to = &$_to[$path[$i]];
    }
    $_to []= $path[count($path) -1];
}
var_dump($to); 
```

..什么给了你以下数组：

```
array(3) {
  '/' =>
  array(2) {
    [0] =>
    string(9) "index.php"
    [1] =>
    string(8) "page.php"
  }
  'sub' =>
  array(2) {
    [0] =>
    string(11) "subpage.php"
    'subsub' =>
    array(1) {
      [0] =>
      string(12) "subpage2.php"
    }
  }
  'sub2' =>
  array(1) {
    [0] =>
    string(12) "sub2page.php"
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:01:34.933

如果你想使用这样的数组，你的键值也需要用引号引起来。考虑：

```
$array = array(
    '/' => array('index.php', 'page.php'),
    '/sub' => array('blah', 'blah', 'blah'),
    '/sub2' => array('foo', 'bar', 'foobar')
); 
```

`array`如何使用关键字正确设置键值是**没有**括号表示法的。这是**不正确的**

```
$array = array(
    [key] => 'value'
); 
```

但是，如果你想向数组中添加一些东西......

```
$array = array();
$array['foo'] = 'bar'; // named key value
$array[] = 'blah'; // automatic numeric key value
$array[] = array('foo', 'bar'); // md array (array inside an array) 
```

希望这可以帮助你一些！

# php - 从 PHP 中的 sql 查询中过滤不需要的结果

> ID：14819763
> 
> 赞同：0
> 
> 时间：2013-02-11T19:54:20.640
> 
> 标签：php, sql

我有一个返回产品列表的查询。该表不能更改为包含另一列（如 binary `include_in_dropdown`）。假设确实有一些产品我不想包含在我用这些数据填充的下拉列表中（例如，因为它不经常订购，或者对于网页上订购单的用户来说太深奥和不直观）不将其包含在我正在填充的下拉列表中的最佳实践方法是什么？

```
while ($row = mssql_fetch_assoc($result)){
    //a switch with a bunch of cases statically 
    //listing the products I don't want to list
    //switch($row[$col_val]){
          //case: "Outsource"
          //break 1;
          //case: "Shipping"
          //break 1;
     //}

     //some other way that is more maintainable(??)

    echo "<tr>";
    foreach ($column_names as $col_key => $col_val){
        echo "<td>";
        echo $row[$col_val];
        echo "</td>";
    }
    echo "</tr>";
    $count ++;
} 
```

我有点理解这是一个非常不理想的情况，这可能是唯一的方法，但也许有比一英里长的 switch 语句更好的方法。对任何想法感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:07:24.370

您可以将查询修改为具有这样的内容吗？

```
where product not in ('Outsource', 'Shipping', . . .) 
```

在查询中进行过滤是一个很大的优势。. . 它应该更快并减少数据库和应用程序之间的通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:11:37.647

1.  如果您可以在数据库中进行复杂的查询，那是您最好的选择（比如只选择定期订购的项目）。
2.  在此期间，添加一个`if(!someExclusionFunction($row)) {`类型语句，然后将您的显示逻辑（回显语句）放在那里。然后添加`someExclusionFunction`以检查行。这样做的好处是它将您的排除代码移出您的显示逻辑。

给定选项 2，您可以构建`someExclusionFunction`一个仅包含要排除的产品列表的平面文件，或使用其他任意列表或公式。

总而言之，如果您可以在 db 查询中做到这一点，请认真考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:15:46.073

除非列的值有一些共同点可以让您决定是否排除/包含，否则您将需要一个 switch 语句或等效的东西。使用[in_array](http://www.php.net/manual/en/function.in-array.php) 有时会更优雅一些。

```
$exclude = array(
    "Outsource",
    "Shipping",
    // more options ...
);

while ($row = mssql_fetch_assoc($result)) {
    if (in_array($row['column_name'], $exclude)) {
        continue;
    }

    // add to dropdown ...
} 
```

# jsf - 使用 primefaces commandButton 的自定义渲染器时，子组件被渲染两次

> ID：14819769
> 
> 赞同：1
> 
> 时间：2013-02-11T19:54:36.467
> 
> 标签：jsf, jsf-2, primefaces

默认情况下，prime faces 命令按钮不会渲染子组件。我已经实现了一个自定义渲染器来实现这一点。它可以工作，但是，我发现子组件被渲染了两次；一次在渲染按钮内部，一次在按钮外部，紧接在它之前。我已经确认我的自定义渲染器只编写一次子组件。

这是自定义渲染器：

```
public class ApsCommandButtonRenderer extends CommandButtonRenderer {

    @Override
    protected void encodeMarkup(FacesContext context, CommandButton button) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        String clientId = button.getClientId(context);
        String type = button.getType();
        String value = (String) button.getValue();
        String icon = button.resolveIcon();

        StringBuilder onclick = new StringBuilder();
        if(button.getOnclick() != null) {
            onclick.append(button.getOnclick()).append(";");
        }

        writer.startElement("button", button);
        writer.writeAttribute("id", clientId, "id");
        writer.writeAttribute("name", clientId, "name");

        String style = button.getStyleClass();

        if (!StringUtils.isBlank(style)) {
            writer.writeAttribute("class", style, "styleClass");
        }

        if(!type.equals("reset") && !type.equals("button")) {
            String request;

            if(button.isAjax()) {
                request = buildAjaxRequest(context, button, null);
            }
            else {
                UIComponent form = ComponentUtils.findParentForm(context, button);
                if(form == null) {
                    throw new FacesException("CommandButton : \"" + clientId + "\" must be inside a form element");
                }

                request = buildNonAjaxRequest(context, button, form, null, false);
            }

            onclick.append(request);
        }

        String onclickBehaviors = getOnclickBehaviors(context, button);
        if(onclickBehaviors != null) {
            onclick.append(onclickBehaviors).append(";");
        }

        if(onclick.length() > 0) {
            writer.writeAttribute("onclick", onclick.toString(), "onclick");
        }

        renderPassThruAttributes(context, button, HTML.BUTTON_ATTRS, HTML.CLICK_EVENT);

        if(button.isDisabled()) writer.writeAttribute("disabled", "disabled", "disabled");
        if(button.isReadonly()) writer.writeAttribute("readonly", "readonly", "readonly");

        //icon
        if(icon != null) {
            String defaultIconClass = button.getIconPos().equals("left") ? HTML.BUTTON_LEFT_ICON_CLASS : HTML.BUTTON_RIGHT_ICON_CLASS;
            String iconClass = defaultIconClass + " " + icon;

            writer.startElement("span", null);
            writer.writeAttribute("class", iconClass, null);
            writer.endElement("span");
        }

        //text
        //writer.startElement("span", null);
        //writer.writeAttribute("class", HTML.BUTTON_TEXT_CLASS, null);

        if(value != null) {
            if(button.isEscape())
                writer.writeText(value, "value");
            else
                writer.write(value);
        }

        renderChildren(context, button);

        //writer.endElement("span");

        writer.endElement("button");
    } 
```

这是 xhtml 页面上的标记：

```
 <h:form styleClass="form-signin" id="login-form" method="POST">

                <h:graphicImage library="images" name="watchopolis/logo-cs.png"/>

                <h2 class="form-signin-heading">#{msgs['login.prompt']} <span>#{msgs['login.register.prompt']} <a
                        href="register.htm">#{msgs['click.here']}</a></span></h2>

                <h:panelGrid rendered="#{param.logout != null}" style="width: 100%">
                    <div class="alert alert-success">
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                        #{msgs['logout.success']}
                    </div>
                </h:panelGrid>

                <fieldset>
                    <h:inputText id="username" value="#{loginBean.username}" styleClass="input-block-level" required="true" requiredMessage="#{msgs['login.username.missing']}" />
                    <p:watermark value="#{msgs['email.address']}" for="username" />

                    <h:inputSecret id="password" value="#{loginBean.password}" styleClass="input-block-level" required="true" requiredMessage="#{msgs['login.password.missing']}" />
                    <p:watermark value="#{msgs['password']}" for="password" />

                    <p:commandButton action="authenticate" id="login-button" styleClass="btn btn-medium btn-primary" type="submit" value="&lt;i class=&quot;icon-spinner ast-alt icon-spin&quot;&gt;&lt;/i&gt; #{msgs['login']}" escape="false" />
                </fieldset>
            </h:form> 
```

最后，这是生成的 HTML（在网页上查看源代码）：

```
<i class="icon-spinner ast-alt icon-spin"></i> Login

    <button id="login-form:login-button" name="login-form:login-button" class="btn btn-medium btn-primary" onclick="PrimeFaces.ab({source:'login-form:login-button'});return false;" type="submit">
        <i class="icon-spinner ast-alt icon-spin"></i> Login
    </button> 
```

![在此处输入图像描述](../Images/31a0fa34679b2faafd1ca2e470774f0d.png)

如您所见，p:commandButton 的子组件被打印了两次，尽管我的渲染器只打印了一次。我怀疑这与 commandButton 通常不打印子组件有关。

有谁知道我需要做什么来解决这个错误？

谢谢。

# php - 在php中删除href中的多余空格

> ID：14819770
> 
> 赞同：0
> 
> 时间：2013-02-11T19:54:40.780
> 
> 标签：php, jquery, codeigniter

任何删除href中空格的建议，比如

```
href="http://www.tra nslationservices24.c om/russian/russian-t ranslation-services"> 
```

和之间有一个空格`"tra"`，在 href 的数据库中没有空格。`"nslationservice24.c"``"om/..."`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:55:43.447

您可以使用正则表达式删除字符串中的空格，如果它是元素 href 属性，则需要使用选择器和一些 javascript 来获取和设置属性，例如：

```
element.href = element.href.replace(/\s/g, ''); 
```

在服务器端修复它可能是一个更好的主意，但是没有更多代码就很难编写示例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:59:43.710

您可以在 PHP 中执行此操作：

```
$href = str_replace(" ","","href-string here"); 
```

# ruby-on-rails - routes.rb 出现未知错误

> ID：14819773
> 
> 赞同：3
> 
> 时间：2013-02-11T19:55:16.880
> 
> 标签：ruby-on-rails

嘿，我是 Rails 新手，每次访问 localhost:3000/ 时都会出现此错误

路由错误

没有路线匹配 [GET] "/" 尝试运行 rake 路线以获取有关可用路线的更多信息。

这就是我的 routes.rb 文件的样子。

```
SampleApp::Application.routes.draw do
  get "static_pages/about"
  get "static_pages/contact"
  get "static_pages/help"
  get "static_pages/home"

end 
```

我的意见文件夹看起来像这样

```
views/static_pages/about.html.erb
views/static_pages/contact.html.erb
views/static_pages/help.html.erb
views/static_pages/home.html.erb 
```

我运行了 rake routes 命令并得到以下信息：

```
Davids-MacBook-Air:sample_app DavidStevenson$ rake routes
   static_pages_home GET /static_pages/home(.:format)    static_pages#home
   static_pages_help GET /static_pages/help(.:format)    static_pages#help
  static_pages_about GET /static_pages/about(.:format)   static_pages#about
static_pages_contact GET /static_pages/contact(.:format) static_pages#contact 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T20:00:01.490

您只是忘记定义您的根路由。将其放在`routes`文件的末尾：

```
root to: 'static_pages#home' 
```

当您访问时，您现在将看到 static_pages_home 页面`localhost:3000/`。

查看[本指南](http://guides.rubyonrails.org/routing.html)以获取您需要的有关路线的所有信息。

编辑

这是您的`routes`文件的外观：

```
SampleApp::Application.routes.draw do
  get "static_pages/about"
  get "static_pages/contact"
  get "static_pages/help"
  get "static_pages/home"

  root to: 'static_pages#home'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:00:18.690

您没有设置根路由，并且`"/"`正在尝试与之匹配。把它放在最后。

```
# config/routes.rb
root to: "static_page#home" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T20:00:23.823

添加根路由

```
root :to => 'static_pages#home' 
```

把它放在路线块的末尾

# angularjs - 如何在我的角度指令中使用已注册的控制器？

> ID：14819776
> 
> 赞同：13
> 
> 时间：2013-02-11T19:55:35.717
> 
> 标签：angularjs, angularjs-directive

我有一个这样注册的控制器：

```
myModule.controller('MyController', function ($scope, ...some dependencies...)
{
    .... 
```

在 HTML 中使用`ng-controller="MyController"`一切正常，但现在我想将此控制器用作我的指令的控制器。像这样的一些事情：

```
otherModule.directive('myDirective', function() {
    return {
        restrict: 'A',
        replace: true,
        controller: ??????????,
        scope: {
            foo: '=',
            blah: '=',
        },
        template: '....'
    }
}); 
```

我厌倦了只是放，`MyController`但它错误地说“MyController is not defined”。我确定如果我只是放入`MyController`全局命名空间，它会正常工作，但我不想要全局命名空间中的任何内容。如果它有所作为，`myModule`则定义为`otherModule`. 我怎样才能获得对这个控制器的引用以供我的指令使用？

按照建议，我试过`$controller('MyController')`了，但现在我收到以下错误：

```
Error: Unknown provider: $scopeProvider <- $scope <- myDirectiveDirective
at Error (<anonymous>)
at http://localhost/resources/angular.js?_=1360613988651:2627:15
at Object.getService [as get] (http://localhost/resources/angular.js?_=1360613988651:2755:39)
at http://localhost/resources/angular.js?_=1360613988651:2632:45
at getService (http://localhost/resources/angular.js?_=1360613988651:2755:39)
at invoke (http://localhost/resources/angular.js?_=1360613988651:2773:13)
at Object.instantiate (http://localhost/resources/angular.js?_=1360613988651:2805:23)
at http://localhost/resources/angular.js?_=1360613988651:4621:24
at otherModule.directive.restrict (http://localhost/resources/app.js?_=1360613988824:862:15)
at Object.invoke (http://localhost/resources/angular.js?_=1360613988651:2786:25) 
```

我不知道该怎么做这个错误。是否还需要做这项工作？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-11T20:39:22.057

看来您可以使用：

```
controller: 'MyController' 
```

如果控制器与指令位于同一模块中，或者位于由包含指令的模块组成的更高级别的模块中。

当我尝试将两个不同的模块组合成一个应用程序模块（一个用于控制器，一个用于指令）时，它不起作用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-11T20:46:22.563

您已经接受的答案有效，并且在*几乎所有情况下都应该选择*......

**为了完整起见：以下是如何使用来自另一个模块的控制器**

（PS：不要这样做。大声笑：P）

```
var app = angular.module('myApp', ['myDirectives']);

app.controller('AppCtrl1', function($scope) {
    $scope.foo = 'bar';
});

var directives = angular.module('myDirectives', []);

directives.directive('test', function($controller) {
   return {
       template: '<h1>{{foo}}</h1>',
       link: function(scope, elem, attrs) {
          var controller = $controller('AppCtrl1', { $scope: scope });

          console.log($scope.foo); //bar
       }
   };
}); 
```

# html - 我的@font-face 有什么问题？

> ID：14819783
> 
> 赞同：0
> 
> 时间：2013-02-11T19:55:48.117
> 
> 标签：html, css, apache, web, lamp

抱歉，如果发布多个问题是不正确的做法，但是：

我设置了一个有效的@font-face，但是当我在@font-face 中设置字体粗细时，Firefox 会显示我的默认字体，而不是我在@font-face 中定义的字体。Chromium 似乎一开始就无法与@font-face 一起使用......而且，我认为由于我无法设置字体粗细，字体（Lato Black）太粗了。

这是我的 HTML：

```
<!DOCTYPE HTML>
<html>

  <head>
    <meta charset = "utf-8">
    <title>Marco Scannadinari</title>
    <link href = "layout.css" type = "text/css" rel = "stylesheet">
  </head>

  <body>
    <div class = "centre">
      <div class = "lato-black">
        <h1>Marco Scannadinari</h1>
      </div>
      <div class = "cantarell">
        <p>Lorem ipsum dolor sit amet.</p>
      </div>
    </div>
  </body>

</html> 
```

...和我的CSS：

```
body {
  background: #cdcdcd;
  margin-top: 32px;
  margin-left: 512px;
  margin-right: 512px;
}

div.centre {
  text-align: center;
}

@font-face {
  font-family: "lato-black";
  src: url("fonts/Lato-Bla.ttf")
  format("truetype")
}

@font-face {
  font-family: "cantarell";
  src: local("fonts/Cantarell-Regular.otf")
  format("opentype")
}

div.cantarell {
  font-family: "cantarell";
}

div.lato-black {
  font-family: "lato-black";
  text-shadow: 0px 1px #ffffff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:20:33.767

您必须为不同的浏览器使用不同格式的字体。最后你应该有这样的东西：

```
@font-face {
    font-family: 'MyFontFamily';
    src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
         url('myfont-webfont.woff') format('woff'), 
         url('myfont-webfont.ttf')  format('truetype'),
         url('myfont-webfont.svg#svgFontName') format('svg');
    } 
```

# c# - 为什么我的实例没有出现在 SQL Server Management Studio 2012 中

> ID：14819786
> 
> 赞同：0
> 
> 时间：2013-02-11T19:56:01.020
> 
> 标签：c#, asp.net, sql-server

[http://www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

我从该站点下载了 Management Studio 并正在使用 VS12，但该工作室没有在其对象资源管理器窗格中显示我在 MVC 应用程序中创建的数据库。这是不兼容的问题还是只是引擎连接到的服务器参考中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:10:43.467

Visual Studio 不会在数据库资源管理器窗格中显示 SQL Express 的实例。

# integration - 升级后 Openfire 自定义数据库集成失败

> ID：14819794
> 
> 赞同：0
> 
> 时间：2013-02-11T19:56:51.920
> 
> 标签：integration, upgrade, openfire

我在 Openfire 3.7.1 上使用自定义身份验证、用户和组集成。升级到 3.8.0 后，自定义集成不起作用。因为自定义数据库中的用户之一是管理员，所以我也无法登录管理控制台。数据库中的 ofProperty 表和升级前一样，其中 3 个提供程序设置为

1.  org.jivesoftware.openfire.auth.JDBCAuthProvider
2.  org.jivesoftware.openfire.user.JDBCUserProvider
3.  org.jivesoftware.openfire.group.JDBCGroupProvider

集成 SQL 也完好无损。

升级后这里有人遇到类似问题吗？请帮忙。

问候斯里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:42:37.423

固定的。运行 ofProperty 表的 sql 转储，重新启动 openfire。似乎新安装更改了某些属性。

问候斯里

# web-applications - 我正在使用 Tornado 开始 Web 开发。需要一些初学者帮助

> ID：14819795
> 
> 赞同：3
> 
> 时间：2013-02-11T19:56:59.880
> 
> 标签：web-applications, tornado

很抱歉这个问题很长，但我很困惑，不知道我到底需要什么。因此，请在发布任何内容之前通读整个问题，以便您获得更好的想法。

所以，我是一个工作学期的软件工程合作学生，我的老板希望我使用 Tornado 开发一个 Web 应用程序。我在高中时做过一些 html 和 css，但这真的不符合我的要求。

Tornado 几乎没有任何关于如何开始的教程。当然，有一个 hello world 示例，但随后他们抛出了一些聊天应用程序，在我的情况下，它也可以用二进制编写。

我知道如何使用 tornado 来呈现页面并将数据作为参数发送。然后我可以使用这些数据在网页本身内执行一些逻辑（即数据库请求、循环......）我现在知道足够的 Javascript 来调用函数来编写文本或发出警报。

现在问题出现在我想转到另一个 html 页面的地方。当然，我可以使用 Javascript 或 html 访问外部站点（即 Google），但如果我尝试访问同一目录中的相关文档，我只会得到 404。我的主管希望我使用 POST 和GET 请求调用我的 Tornado 服务器 RequestHandler（所以我可以再次调用 render），但我只是不知道如何发出/接收该请求。

最后，有三个主要问题：

*   要正确使用 Tornado，我应该知道哪些其他语言？
    *   我知道 html、xslt、css、一些 JS、SQL、json
    *   我不想成为网络大师；我只想要基础知识
*   如何在我的龙卷风处理程序上发出 GET/POST 请求？
*   如何重定向到相对 html 页面？

这是我正在使用的处理程序：

```
class MainHandler(RequestHandler):

    def get(self):
        print 'get...',
        self.render('test.html', data = Data())
        print 'done'

    def post(self):
        print 'post...',
        pass
        print 'done' 
```

编辑：我现在对 RequestHandlers 有了更多了解，但我不知道正确的做法是什么。我有这个 RequestHandler 处理两个页面的请求，但我希望能够为每个页面使用一个处理程序，我不知道我是否以最好的方式解释参数。我也不知道如何让参数转到 *args 参数。

```
def get(self, *args, ** kwargs):
    print 'get:', args, kwargs, 'Handling:',

    if len(self.get_arguments('user')) > 0:
        print 'user'
        self.render('page2.html', user = self.get_arguments('user')[0])
    elif len(self.get_arguments('page')):
        print 'specific page:', self.get_argument('page')
        self.render(self.get_argument('page'), data = Data())
    else:
        print 'default'
        self.render('test.html', data = Data()) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T08:48:07.530

定义应用程序时，您可以指定模板目录和静态文件目录：

```
import Settings

class Application(tornado.web.Application):
    def __init__(self):
        handlers = [
            (r"/", MainHandler),
        ]
        settings = {
            "template_path":Settings.TEMPLATE_PATH,
            "static_path":Settings.STATIC_PATH,
            "debug":Settings.DEBUG
        }
        tornado.web.Application.__init__(self, handlers, **settings) 
```

你可以定义一个 Settings.py

```
import os
DEBUG = True
DIRNAME = os.path.dirname(__file__)
STATIC_PATH = os.path.join(DIRNAME, 'static')
TEMPLATE_PATH = os.path.join(DIRNAME, 'template') 
```

![在此处输入图像描述](../Images/99a9ea996a0898a342dd2e0b23e14a66.png)

当您尝试访问您的龙卷风起始网址时：

```
http://localhost:port/ 
```

Tornado 在 MainHandler 中执行 get 方法。然后 Tornado 渲染 test.html 页面。但是您必须指定 TEMPLATE_PATH 以指示 Tornado 从哪里可以获取此模板。

```
class MainHandler(RequestHandler):

    def get(self):
        print 'get...',
        self.render('test.html', data = Data())
        print 'done' 
```

要在您的处理程序中的 get 或 post 方法中进行重定向，您可以添加以下内容：

```
self.redirect("/my_new_page.html") 
```

要正确使用 Tornado，您可能会了解 Web 应用程序的工作原理。客户端/服务器通信，理解 HTML 动词和更重要的尝试和尝试

# java - Mockito 1.9.5 导致 NullPointerException

> ID：14819796
> 
> 赞同：1
> 
> 时间：2013-02-11T19:57:02.173
> 
> 标签：java, unit-testing, nullpointerexception, mockito

我有一个`StandardUncaughtExceptionHandler`捕获任何以前没有被其他异常捕获的异常。在后台，我使用 Guava`EventBus`进行错误处理。对于我的应用程序中抛出的每种类型的检查异常，我都会向总线注册一个事件处理程序来处理该特定异常类型。如果总线发布了一个它没有注册处理程序的异常，它会将该异常包装在一个`DeadEvent`对象中，并将死事件重新发送回总线。这`StandardUncaughtExceptionHandler`已注册为侦听`DeadEvent`s，向我保证我将始终有办法检查未捕获的异常。

这是主要来源：

```
public class StandardUncaughtExceptionHandler implements UncaughtExceptionHandler {
    private LoggingService loggingService;

    // Getter and setter for logginService.

    @Override @Subscribe
    public void handleUncaughtException(DeadEvent deadEvent) {
        // Log it.
        StringBuilder logBuilder = new StringBuilder();

        if(deadEvent.getEvent() instanceof Throwable) {
            Throwable throwable = (Throwable)deadEvent.getEvent();

            logBuilder.append("An uncaught exception occurred: ");
            logBuilder.append(throwable.getMessage());
            logBuilder.append(" - Stack trace: ");
            logBuilder.append(throwable.getStackTrace());
        }
        else
            logBuilder.append("Something weird happened.");

        loggingService.error(logBuilder.toString());
    }
} 
```

我对它的测试，检查以确保当我们给它一个`Throwable`它构造正确的日志消息时。

```
@Test
public void handleUncaughtExceptionLogsThrowableIfPresent() {
    // GIVEN
    StandardUncaughtExceptionHandler fixture =
        new StandardUncaughtExceptionHandler();
    LoggingService mockLoggingService = Mockito.mock(LoggingService.class);
    DeadEvent mockDeadEvent = Mockito.mock(DeadEvent.class);

    Mockito.doThrow(new RuntimeException("Logging-Throwable"))
        .when(mockLoggingService)
        .error(Mockito.contains("An uncaught exception occurred:"));
    Mockito.doThrow(new RuntimeException("Logging-Something-Else"))
        .when(mockLoggingService)
        .error(Mockito.contains("Something weird happened."));
    Mockito.doReturn(new Throwable()).when(mockDeadEvent).getEvent();

    try {
        // WHEN
        fixture.handleUncaughtException(mockDeadEvent);

        Assert.fail();
    } catch(RuntimeException rte) {
        // THEN
        Assert.assertTrue(rte.getMessage().contains("Logging-Throwable"));
    }
} 
```

运行此测试时，我的 JUnit 控制台中出现以下错误：

```
java.lang.NullPointerException
    at com.myapp.StandardUncaughtExceptionHandlerTest.handleUncaughtExceptionLogsThrowableIfPresent(StandardUncaughtExceptionHandlerTest.java:63)
    ... rest of stack trace omitted for brevity, it's huge 
```

关于 Mockito 为什么会导致 NPE 的任何想法？我已经检查并重新检查，我*相信*我已经正确设置了我的模拟。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:29:44.703

Mockito 不是这里的问题。

我相信 NPE 在您的测试的以下行中报告：

`Assert.assertTrue(rte.getMessage().contains("Logging-Throwable"));`

因为`rte.getMessage()`返回`null`。不幸的是，由于`try-catch`单元测试中的块，这个错误的真正来源对你来说是隐藏的。取消注释揭示了真正的问题：`try-catch`在`handleUncaughtExceptionLogsThrowableIfPresent()`以下行中抛出了 NPE：

`loggingService.error(logBuilder.toString());`

因为`loggingService`从未在`StandardUncaughtExceptionHandler`类中初始化。此字段应在您的测试方法中使用模拟或任何其他有效方式进行初始化。

# mule - 如何在 Java 类中访问 Spring 配置属性

> ID：14819802
> 
> 赞同：2
> 
> 时间：2013-02-11T19:57:27.593
> 
> 标签：mule

如果我有自己的转换器并且在 Java 类中工作，如何访问 Spring 配置属性？

在流 XML 中，我会键入类似 ${activemq_server} 的内容，但在 Java 中，我不确定如何获取该值。

我正在研究 MuleMessage 和它附带的所有对象（上下文、配置等），但我还没有找到它们。

过去我将它们注入到消息属性中，但这感觉太草率了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:02:23.193

Spring bean 中的 IMO 注入属性可能是最干净的。

或者，您可以使用`util:properties`在 bean 中加载属性文件，然后`context:property-placeholder`使用此 bean 进行占位符解析。这使您可以注入或使用 MEL 来查找此 bean（如`#[app.registry.myProperties.propertyName]`.

# asp.net-mvc - 在 ASP.Net MVC 中构建动态参数对象

> ID：14819805
> 
> 赞同：1
> 
> 时间：2013-02-11T19:57:41.997
> 
> 标签：asp.net-mvc, asp.net-mvc-3, parameters

嗨，我正在尝试创建一个常见的 ActionResult，它可以返回带有动态 ActionName、ControllerName 和对象参数（如果有）的 redirectToAction

```
public ActionResult partner()
        {
//Building my params
obj.parameters = string.Format("cId = {0}, aId= {1}", CustomerID, Session["LocationId"]);
 return RedirectToAction(obj.actionName, obj.controllerName, string.IsNullOrEmpty(obj.parameters) ? null : new { obj.parameters });
} 
```

我不确定这在 MVC 中是否可行。有人有这样的要求吗？是否有任何解决方法可以实现这样的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:58:32.020

这里有几个想法可以帮助你：

**选项 1**：使用包含路由值的匿名类型对象。

> ```
> obj.parameters = new { cId = CustomerID, aId = Session["LocationId"] };
> return RedirectToAction(obj.actionName, obj.controllerName, obj.parameters); 
> ```

**选项 2**：使用[此答案](https://stackoverflow.com/a/10258879/316621)`RouteValueDictionary`中描述的类似问题的 a 。

> ```
> obj.parameters = new RouteValueDictionary();
> obj.parameters['cId'] = CustomerID;
> obj.parameters['aId'] = Session["LocationId"];
> return RedirectToAction(obj.actionName, obj.controllerName, obj.parameters); 
> ```

# django - 从一个不名为tests.py的文件中进行Django测试？

> ID：14819810
> 
> 赞同：0
> 
> 时间：2013-02-11T19:57:58.303
> 
> 标签：django, unit-testing

有没有办法制作

```
python manage.py test 
```

从 mysite/tests.py 以外的文件进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:09:30.847

一些愚蠢的行为可能是可能的，但由于 Django 强制执行的约定，我不推荐它，它非常好且非常可靠。

这背后的原因是 Django 项目可以包含许多应用程序。每个应用程序都有自己的测试文件。这使得测试和应用程序之间有很好的分离，如果你愿意的话，你的项目会“整洁”，而且你不必通过大量的测试文件来添加或删除测试。

然后在应用程序的基础上运行这些：

**从文档**

```
./manage.py test animals 
```

或者

```
./manage.py test polls 
```

但似乎您已经知道这一点:)

我建议用 Tomasz 的大写 V 好的 SO 帖子阅读这篇文章

[将测试分布在多个文件上](https://stackoverflow.com/questions/6248510/how-to-spread-django-unit-tests-over-multiple-files)

这并不能回答您的问题，但我认为这是“很好的衡量标准”，也许可以说服您您可能在这里吠叫错误的树:)

# java - 我如何在 Div 中获取子项的计数甚至文本列表

> ID：14819815
> 
> 赞同：0
> 
> 时间：2013-02-11T19:58:38.177
> 
> 标签：java, testing, selenium, webdriver

我正在使用 Java 和 Webdriver 和 TestNG。我有一个文本框，用户在其中输入药物名称，然后单击“开始”按钮。然后程序运行对 RxNorm 的查询并返回药物名称的强度和形式。该网页有一个 id 的 div `whatDosage`，其中 div 是一个按钮列表，具有该药物的适当强度/形式。

我的问题是，如何获取该 div 中的元素数量或显示给用户的强度/形式列表？最终，我将使用相同的药物名称调用 RxNorm 并比较结果。

我尝试了以下方法：

```
(1) String resultsWebPage = driver.findElements(By.id("whatDosage")).toString();
System.out.println(resultsWebPage);

(2) int resultsWebPage = driver.findElements(By.id("whatDosage")).size();
System.out.println(resultsWebPage); 
```

第一个示例简单返回 id。第二个只给了我 1 的输出。我输入的药物名称将 11 个结果返回到`whatDosage`div

div 看起来像这样：

```
<div id="whatDosage" class="btn-group btn-group-vertical buttons-radio span12"    role="radiogroup">
    <input id="dosage1" class="hide" type="radio" value="20 MG Enteric Coated Capsule" name="dosage">
    <button class="btn btn-large" rel="dosage1" role="radio" type="button">20 MG Enteric Coated Capsule</button>
    <input id="dosage2" class="hide" type="radio" value="30 MG Enteric Coated Capsule" name="dosage">
    <button class="btn btn-large" rel="dosage2" role="radio" type="button">30 MG Enteric Coated Capsule</button>
    <input id="dosage3" class="hide" type="radio" value="60 MG Enteric Coated Capsule" name="dosage">
    <button class="btn btn-large" rel="dosage3" role="radio" type="button">60 MG Enteric Coated Capsule</button>
</div> 
```

`input`元素被隐藏，`button`元素是屏幕上显示的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:51:15.207

这可以通过更改元素定位策略来解决。

我假设您的网页的骨架如下所示。虽然这可能不准确，但它会让您了解使用方法。

```
<div id="whatDosage">
    <div class="strength>Data 1</div>
    <div class="strength>Data 2</div>
    <div class="strength>Data 3</div>
</div> 
```

当您运行代码 (2) 时：

```
int resultsWebPage = driver.findElements(By.id("whatDosage")).size(); 
```

它的作用是选择“whatDosage” div，而不是您需要的子元素。现在因为有一个“whatDosage” div，这就解释了做 .size() 会返回 1。

您应该按照以下方式做一些事情：

```
List<WebElements> results = driver.findElements(By.className("strength"));
System.out.println(results.size());

for (WebElement result : results){
    System.out.println(result.getText());
} 
```

这将为您提供以下输出：

```
3
Data 1
Data 2
Data 3 
```

You will want to change the strategy to locate the strength/form elements as per your code. Some apporoached are By.id, By.className, By.xpath, etc. and can refer to the selenium docs for [Locating UI elements](http://seleniumhq.org/docs/03_webdriver.jsp#locating-ui-elements-webelements).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:02:39.020

Assuming @nrbafna is correct about what your HTML looks like, it's simple. To get the list of "strength"s, just:

```
List<WebElement> results = driver.findElements(By.xpath("id('whatDosage')/div")); 
```

Then of course the count of them is merely:

```
int resultsCount = results.size(); 
```

And of course printing them all is:

```
for (WebElement result : results) {
    System.out.println(result.getText());
} 
```

# android - Android使部分活动透明

> ID：14819817
> 
> 赞同：0
> 
> 时间：2013-02-11T19:58:57.847
> 
> 标签：android, android-activity, transparency

我有以下布局：

```
<RelativeLayout>
   <TextView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="@string/hello_world" />

    <LinearLayout
      android:layout_width="fill_parent"
      android:layout_height="200dip"
      android:layout_alignParentBottom="true" >
    </LinearLayout>
</RelativeLayout> 
```

我想让线性布局完全透明，这意味着活动堆栈上前一个活动的内容应该在线性布局区域中可见。

我尝试使用 setAlpha(0) 和线性布局；它确实使它透明，但它在线性布局区域中显示活动背景颜色。

我还尝试将活动的 android:theme 设置为 @android:style/Theme.Translucent.NoTitleBar，但这会使整个活动显示上一个活动的内容。

任何人都可以提出一种方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:07:19.007

需要明确的是，活动不是可见的对象。视图是您在屏幕上看到的——特别是您看到附加到您的活动的视图。在这种情况下，该视图是 RelativeLayout 及其内容。

当您使 LinearLayout 透明时，它会显示 RelativeLayout 的背景颜色。如果您想查看相对布局背后的内容，请使其背景颜色也透明。

```
<RelativeLayout android:backgrond="#00000000"> 
       ... 
      <LinearLayout android::background="#00000000"> 
           ... 
      </LinearLayout>
 </RelativeLayout> 
```

当然，您可能想要使用命名颜色资源而不是“#00000000”

# google-apps-script - 谷歌应用脚 本跨域

> ID：14819819
> 
> 赞同：2
> 
> 时间：2013-02-11T19:59:13.347
> 
> 标签：google-apps-script, cross-domain

以下跨域发布到 Google Apps 脚本适用于 FireFox (18)，但不适用于 Internet Explorer 9。

根据我的阅读，它根本不应该工作。

为什么它可以在 Firefox 上运行？

```
var url = "https://script.google.com/macros/s/AK..etc../exec";
var params = "someParams";
var http = new XMLHttpRequest();
http.open("POST", url, true);
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");
http.send(params); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:03:59.917

这是 IE9 的一个已知问题。它对 CORS 请求的支持有限，不支持设置自定义请求标头。IE10 支持 CORS，因此请在 IE10 中测试（仅当您运行 Windows 7+ 时）以验证这一点。

MSDN 推荐了一长串替代方法来减轻执行 X 域请求的痛苦。 [http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

# gruntjs - 传递 grunt 插件依赖项？

> ID：14819820
> 
> 赞同：4
> 
> 时间：2013-02-11T19:59:26.290
> 
> 标签：gruntjs

我有一个名为 grunt 的插件`snorky`，它取决于`grunt-compass`任务。当有人键入`npm install git://path/to/snorky`时，我希望`grunt-compass`自动安装该任务。

**包.json**：

```
{
  "name": "snorky",
  // ...
  "dependencies": {
    "bower": "~0.7.0",
    "grunt-compass": "~0.3.8"
  }
} 
```

**任务.snorky.js**：

```
module.exports = function(grunt) {

  grunt.loadNpmTasks('grunt-compass');

  // ...

} 
```

但是，当我从另一个项目 npm install snorky 然后尝试运行`grunt snorky`时，出现错误：

```
user.name:~/other/proj [git: my-branch] $ grunt snorky
>> Local Npm module "grunt-compass" not found. Is it installed? 
```

这样做的正确方法是什么？我怀疑是否有必要`npm install grunt-compass`从使用 snorky 的项目中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:35:29.057

[https://npmjs.org/package/grunt-compass](https://npmjs.org/package/grunt-compass)

该软件包表示它已被 grunt 0.4 弃用，并且其 travisci 构建失败。

根据安装说明，它还说

1.  **在项目的 grunt.js gruntfile 旁边安装这个 grunt 插件：`npm install grunt-compass`.**

所以也许只需要运行 npm install。

## 您应该尝试使用[grunt-contrib-compass](https://github.com/gruntjs/grunt-contrib-compass)

它的构建是成功的，它意味着与 0.4 一起使用

# css - 基于类定位非嵌套 div

> ID：14819827
> 
> 赞同：0
> 
> 时间：2013-02-11T20:00:03.913
> 
> 标签：css, html

我有一个页面，其代码如下所示：

```
<div class="shop-main">
  <!-- CONTENT -->
</div>
<div class="social-tabs">
  <!-- CONTENT -->
</div> 
```

在移动设备上，我需要`social-tabs`在`display:none;`每个包含`shop-main`. 但是，如您所见，它们没有嵌套，因此我无法编写：

```
.shop-main .social-tabs{ 
   display:none;
} 
```

我将如何仅更改包含该类的页面的 css `shop-main`？

注意：我省略了上面的媒体查询，但我的目标是这个范围内的设备：

```
@media (min-width:641px) and (max-width:980px){ /* CSS */  } 
```

此外，我不能嵌套 div 或在页面上使用其他 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:02:45.197

您需要在媒体查询中使用兄弟选择器：

```
.shop-main + .social-tabs { 
   display:none;
} 
```

# javascript - 从用户那里获取一个方程并将其用作绘制数据值的偏移量 - 使用 highcharts 绘制图表

> ID：14819830
> 
> 赞同：0
> 
> 时间：2013-02-11T20:00:07.343
> 
> 标签：javascript, parsing, highcharts

我正在为我的项目添加一个功能。

目前，我从数据库中获取数据并使用 highcharts 绘制图表。

现在我希望用户输入一个等式，让我们说：y = x^2 --> 所以用户在文本框字段中输入 x^2。

现在应该通过对从数据库中获取的每个值进行平方来绘制图形。

我主要关心的是如何解析文本并获得方程式。Javascript解决方案更可取。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:03:38.390

您可以通过以下方式从输入中获取价值：

```
$('#idinput').val(); 
```

然后通过parseFloat()函数解析[http://www.w3schools.com/jsref/jsref_parsefloat.asp](http://www.w3schools.com/jsref/jsref_parsefloat.asp)然后运行ajax并从数据库中获取数据。

# r - 如何“更新”在 R 中使用“glm”构建的模型

> ID：14819831
> 
> 赞同：3
> 
> 时间：2013-02-11T20:00:14.667
> 
> 标签：r, glm

在下面的可重现代码（最后一行）中，如果我将 'Income' 替换为 'fieldToRemove'，'update' 功能将不起作用。我怎样才能使这个功能工作？我需要循环运行该行。

```
state.x77                          
tmpData = as.data.frame(state.x77) 
colnames(tmpData)[4] = "Life.Exp"  
colnames(tmpData)[6] = "HS.Grad"
cnames = colnames(tmpData)
cnames
lenCnames = length(cnames)

rhsOfFormula = paste(cnames[1:(length(cnames)-1)],collapse= "+")
lhsOfFormula = cnames[length(cnames)]
(fmla <- as.formula(paste(lhsOfFormula , " ~ ", rhsOfFormula )) )
modelTmp <- glm(formula = fmla, data=tmpData)

fieldToRemove = 'Income'
newModel <- update(modelTmp, .~.-Income ) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T20:04:45.970

`update`需要一个公式作为第二个参数，因此您必须使用之前使用的相同技巧`as.formula`：

```
newModel <- update(modelTmp, as.formula(paste(".~.-", fieldToRemove)) ) 
```

# javascript - 查询字符串解析：同时处理 & 和 ;

> ID：14819832
> 
> 赞同：2
> 
> 时间：2013-02-11T20:00:15.860
> 
> 标签：javascript, url, query-string

我在 StackOverflow 上找到了很多文章，其中提到了在 Javascript 中解析查询字符串的快速方法，但我还没有找到如何处理这两者`&`以及`;`作为分隔符的方法。

现在，我假设只有其中一个被设置为查询字符串的分隔符。例如，以下查询字符串：

```
index.php?Param1=value&Param2=value;Param3=value 
```

哪个是分隔符？

*   是`&`，还是`;`？
*   它是第一个识别的分隔符，还是`&`优先于`;`？
*   都被视为分隔符，并且示例中的所有三个参数都已解析？

在 Javascript 中，我一直在使用以下函数：

```
/**
 * Gets the value of a parameter from a URI.
 * @param href The full URI to search. Must at least start with a ? query string delimiter.
 * @param key  The key of the param for which to retrieve the value.
 * @param def  A default value to return in the case that the key cannot be found in the query string.
 * @return The value of the param if the key is found, otherwise returns def.
 */
function getURIParam(href, key, def) {
    if (arguments.length == 2) def = null;

    var qs = href.substring(href.indexOf('?') + 1);
    var s = qs.split('&');
    for (var k in s) {
        var s2 = s[k].split('=');
        if (s2[0] == key)
            return decodeURIComponent(s2[1]);
    }

    return def;
} 
```

这只是根据 . 拆分每个键/值对`&`。只要分隔符始终为 ，它就可以很好地工作`&`。然而，正如我们所知，情况并非总是如此，也不应该强制执行，因为 RFC 也允许这样做`;`。

所以，为了同时处理`&`和`;`作为分隔符，我应该先搜索一个`indexOf("&")`，如果没有找到，将分隔符设置为`;`?

根据分隔符可以是`&`or的规则解析 URL 的正确方法是`;`什么？

这是[关于](http://www.w3.org/TR/1999/REC-html401-19991224/appendix/notes.html#h-B.2.2)能够同时处理`&`和`;`.

> 我们建议 HTTP 服务器实现者，特别是 CGI 实现者支持使用“;” 代替“&”来省去作者以这种方式转义“&”字符的麻烦。

这是定义 URI的[RFC 1738 。](http://www.ietf.org/rfc/rfc1738.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:09:51.007

您可以使用 reg ex 在两个分隔符上进行拆分。

```
var s = qs.split(/[&;]/) 
```

这将处理带有 & 和 ; 的字符串

编辑：

[鉴于角色的第一次出现，这里](https://stackoverflow.com/a/7527415/2033671)是一个可以拆分的帖子。希望 URL 首先包含分号，但检查是否出现 ; 可能更安全。如果存在，只需将其用作分隔符。

根据[RFC3986](https://www.rfc-editor.org/rfc/rfc3986)，由方案实现者决定如何使用 URI 保留字符。此外，根据[RFC 1738](http://ietf.org/rfc/rfc1738.txt)，分号是 URI 搜索部分中的保留字符，因此，如果存在，则被视为分隔符，除非已编码[。W3C 建议](http://www.w3.org/TR/1999/REC-html401-19991224/appendix/notes.html#h-B.2.2)服务器实现者允许两者都允许开发人员不必须逃脱＆符号，因此应该使用其中一个或另一个。

我会勇敢你的例子

```
index.php?Param1=value&Param2=value;Param3=value 
```

作为

```
["Param1=value&Param2=value","Param3=value"] 
```

# c# - 在 WPF 中关闭窗口时释放内存

> ID：14819835
> 
> 赞同：1
> 
> 时间：2013-02-11T20:00:29.057
> 
> 标签：c#, wpf, memory, window, bitmapimage

关闭子窗口时，如何释放某些外部资源（BitmapImage 类中的图像）使用的内存。

在任务管理器中，我的应用程序（在 C# 中使用 .NET 3.5 的 WPF 中）在打开子窗口并加载所有图像时使用了 ~800,000 KB，但是当我关闭它时，内存使用量是相同的，我认为应用程序不会释放这些资源，例如带有 Dispose() 的 WinForms 应用程序；方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:04:16.057

`FormClosed`您可以在事件处理程序中处置资源。

另一种选择是转到设计器文件，添加您在方法`partial void AdditionalDisposal();`中调用的部分方法 ( )，`Dispose`然后您可以在您处理所有您持有的一次性资源。

# java - 使用 JMeter 将 JSON 字符串插入数据库

> ID：14819836
> 
> 赞同：1
> 
> 时间：2013-02-11T20:00:30.870
> 
> 标签：java, database, json, jmeter

我正在处理需要连接到数据库并在该数据库中插入大量行的项目。我目前在该数据库中有两列-

```
ID         String PrimaryKey
ACCOUNT    String 
```

所以我需要在 JMeter 的帮助下在这两列中插入很多行。我可以使用这个为 ID 列生成随机唯一 ID -

`${__BeanShell(UUID.randomUUID().toString())}`

我正在尝试`JSON String`使用`JMeter`. 下面是我要插入的 JSON 字符串。

`{"lv":[{"v":{"regId":null,"user":null,"Id":996},"cn":1}],"lmd":1360185}`

在 JMeter 的参数值部分，我传递了类似这样的内容-

```
${__BeanShell(UUID.randomUUID().toString())} ,{"lv":[{"v":{"regId":null,"user":null,"Id":996},"cn":1}],"lmd":1360185} 
```

这是我的 SQL-

`INSERT INTO TEST2 (id, account) values (?, ?)`

但是在尝试插入之后，我得到了这个异常 -

```
Response message: java.io.IOException: Cannot have quote-char in plain field:[{"] 
```

我该如何解决这个问题？我只需要在`ACCOUNT column`

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:45:55.837

我认为你应该用反斜杠转义所有双引号。像这样的东西：

```
{\"lv\":[{\"v\":{\"regId\":null}}]} 
```

# asp.net-mvc - 如何在 ASP.Net MVC 中设置路由以使对 html 文件的请求绕过 StaticFileHandler 并由路由引擎处理？

> ID：14819837
> 
> 赞同：2
> 
> 时间：2013-02-11T20:00:31.837
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, url-routing, asp.net-routing

我可以（不使用 runAllManagedModulesForAllRequests = true）将带有 *.html 的 URL 路由到默认控制器/操作模式吗？

我需要所有对 www.myhost.com/any/any/abcd.html 的请求都使用“link”RouteData key =“any/any/abcd.html”路由到 www.myhost.com/home/oldlink

我尝试了使用 {*link} 和约束链接 =“.html$”的 MapRoute，但所有请求都带有点 - 捕获 StaticFileHandler ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:06:58.800

您可以使用这样的路线：

```
routes.MapRoute("", "{*link}",  
                new { action = "oldlink", controller = "home" }); 
```

这会将所有请求定向到以下控制器和操作方法：

```
public class HomeController : Controller
{
    public ActionResult OldLink(string link)
    {
        //implement method...
        return View((object)link);
    }
} 
```

星号表示该段是所谓的“catchall”段。这允许您将任意长度的 URL 匹配到单个路由。在此路由中，URL 中主机名之后的所有段都分配给“链接”字符串变量。

例如，如果您输入 URL：

```
http://localhost/foo/bar/file.html 
```

它将路由到 OldLink 方法，并且“link”字符串变量将具有值

```
"foo/bar/file.html" 
```

这条路线有几点需要注意：

1.  此路由的 URL 模式将匹配**所有**传入的 URL。因此，应用程序中的任何 URL 都将路由到“home”控制器上的“oldlink”操作。使用此路由，您将无法获取任何 URL 以转到任何其他路由。

2.  默认情况下，ASP.Net 路由引擎将首先检查磁盘上是否存在与 URL 匹配的物理文件。这样，你就不用担心路由系统对静态文件的路由请求了，比如css或者javascript文件。这意味着如果将 URL 发送到与磁盘上的文件匹配的应用程序，它将不会被路由到“home”控制器上的“oldlink”操作。如果要更改此默认行为并让路由引擎路由**所有内容**，包括对静态文件的请求，则需要将以下行添加到 global.asax 文件的“RegisterRoutes”方法中：

    路线.RouteExistingFiles = true;

有关 URL 段中包罗万象的路由段的更多信息，请参阅[这篇关于路由的优秀 MSDN 文章](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx#handling_a_variable_number_of_segments_in_a_url_pattern)中标题为“在 URL 模式中处理可变数量的段”的部分。有关 RouteExistingFiles 属性的更多信息，[请参见此处](http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection.routeexistingfiles.aspx)。

# ruby-on-rails - 部署 Resque 使 Rake 和 Ruby 占用了服务器 100% 的 CPU

> ID：14819841
> 
> 赞同：1
> 
> 时间：2013-02-11T20:00:50.540
> 
> 标签：ruby-on-rails, rake, capistrano, resque

使用 Resque 部署后，Rake 和 Ruby 的 CPU 消耗增加了 100%，甚至无需执行任何操作，无需请求，无需后台作业或任何操作。

对于部署，我只是`require 'capistrano-resque'`在运行之后使用`after 'deploy:restart', 'resque:restart'`

**宝石文件**

```
gem 'resque', :require => 'resque/server'
gem 'resque_mailer' 
```

**lib/tasks/resque.rake**

```
require 'resque/tasks'

task "resque:setup" => :environment do
  ENV['QUEUE'] ||= '*'
end 
```

**配置/初始化程序/resque.rb**

```
rails_root = Rails.root || File.dirname(__FILE__) + '/../..'
rails_env = Rails.env || 'development'

resque_config = YAML.load_file(rails_root.to_s + '/config/resque.yml')
Resque.redis = resque_config[rails_env] 
```

**配置/resque.yml**

```
development: localhost:6379
production: MY_DOMAIN:6379 
```

我的服务器是具有 1 个 CPU 和 1 GB RAM 的 ubuntu，这是问题所在，还是我的配置有问题？

# c++ - 汉明码 (7,4) - C++ 实现失败

> ID：14819843
> 
> 赞同：0
> 
> 时间：2013-02-11T20:01:01.250
> 
> 标签：c++, hamming-code

```
#include <iostream>
#include <string>

using namespace std;

int get_bin_representation(char x){

  if(x == '1'){
    return 1;
  }
  else if(x == '0'){
    return 0;
  }
}
int gen_hamming_code(string token){

  int bits[4];
  int temp(0);

  for(int k=0; k<4; k++){
    bits[k] = get_bin_representation(token.at(k));
  }

  int ham_code[7];

  ham_code[0] = bits[0] + bits[1] + bits[3];
  ham_code[1] = bits[0] + bits[2] + bits[3];
  ham_code[2] = bits[0];
  ham_code[3] = bits[1] + bits[2] + bits[3];
  ham_code[4] = bits[1];
  ham_code[5] = bits[2];
  ham_code[6] = bits[3];

  for(int h=0; h<7; h++){
    temp = ham_code[h];
    ham_code[h] = temp%2;
    temp = 0;
  }

  for(int e=0; e<7; e++){
    cout << ham_code[e];
  }
  cout << endl;

  return 0;
}
int main(){

  string usr_input;
  string msg;
  int index(0);

  cout << "Hamming Code Program" << endl;

  while(true){

    cout << endl << ": ";
    getline(cin, usr_input);

    if(usr_input.find("gen") != std::string::npos){
        for(int i=0; i<usr_input.length(); i++){
            if(usr_input.at(i) == ' '){
                index = i;
            }
        }

        for(int j=index; j<usr_input.length(); j++){
            msg+=usr_input.at(j);
        }

        cout << "Hamming code (7,4): ";
        gen_hamming_code(msg);
    }
  }
} 
```

我使用了维基百科提供的线性代数定义（'Hamming Code (7,4)'）。在程序的几个点上，我打印了变量内容，但修复一个问题会导致另一个问题。为了验证输出是否正确，我将其与 Wikipedia 上的示例以及[在线计算器](http://www.ecs.umass.edu/ece/koren/FaultTolerantSystems/simulator/Hamming/HammingCodes.html)产生的结果进行了比较。

更新：问题已解决。我使用了[此处](http://msdn.microsoft.com/en-us/library/hh873134.aspx)提供的算法的改编版（没有 AMP）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:37:56.037

好吧，这是错误的：

```
ham_code[0] = bits[0] + bits[1] + bits[3]; 
```

汉明码是使用 GF(2) 算术定义的。GF(2) 中的加法是 C++ xor 运算符 ( `^`)。使用正确的运算符，您可以取消后面的`%2`循环。

您还将奇偶校验位与明文混合在一起，这是我了解它时从未做过的事情。同样，在线模拟器使用简单的顺序（明文，奇偶校验），没有交错。

# unix - 在 unix 中拆分数据

> ID：14819845
> 
> 赞同：1
> 
> 时间：2013-02-11T20:01:14.960
> 
> 标签：unix, awk, cut

我有一个包含 300 多个字段的 DDL 命令，我需要将字段和数据类型分开并将它们存储到 Excel 电子表格中。一些数据类型之间有空格。这是我的示例数据，如下所示。

**我试过的**

```
cut -f2 sample.txt | grep -e "^$" -v > sample1.txt
cut -f1 -d" " sample1.txt > fields.txt 
```

我可以从输入文件中获取 column1，但是如何分别获取数据类型字段和 NOT NULL 约束。此外，如果没有 NOT NULL 约束，则输出文件应该具有 NULL 值。

**输入**

```
SUPPLIER_PROC_ID BIGINT NOT NULL
BTCH_NBR INTEGER NOT NULL
RX_BTCH_SUPPLIER_SEQ_NBR INTEGER NOT NULL
CORRN_ID INTEGER NOT NULL
RX_CNT BYTEINT NOT NULL
DATA_TYP_CD BYTEINT NOT NULL
DATA_PD_CD BYTEINT NOT NULL
CYC_DT DATE NOT NULL
BASE_DT DATE NOT NULL
DATA_LOAD_DT DATE NOT NULL
DATA_DT DATE NOT NULL
SUPPLIER_DATA_SRC_CD BYTEINT NOT NULL
RX_CHNL_CD BYTEINT NOT NULL
MP_IMS_ID INTEGER NOT NULL
MP_LOC_ID NUMERIC(30)
MP_IMS_ID_ACTN_CD BYTEINT NOT NULL
NPI_ID BIGINT
NPI_ID_ACTN_CD BYTEINT NOT NULL
MP_DEA_NBR NATIONAL CHARACTER VARYING(9)
MP_DEA_NBR_ACTN_CD BYTEINT NOT NULL 
```

**输出**

*字段*

```
SUPPLIER_PROC_ID
BTCH_NBR
RX_BTCH_SUPPLIER_SEQ_NBR
CORRN_ID
RX_CNT
DATA_TYP_CD
DATA_PD_CD
CYC_DT
BASE_DT
DATA_LOAD_DT
DATA_DT
SUPPLIER_DATA_SRC_CD
RX_CHNL_CD
MP_IMS_ID
MP_LOC_ID
MP_IMS_ID_ACTN_CD
NPI_ID
NPI_ID_ACTN_CD
MP_DEA_NBR
MP_DEA_NBR_ACTN_CD 
```

*数据类型*

```
BIGINT
INTEGER
INTEGER
INTEGER
BYTEINT
BYTEINT
BYTEINT
DATE
DATE
DATE
DATE
BYTEINT
BYTEINT
INTEGER
NUMERIC(30)
BYTEINT
BIGINT
BYTEINT
NATIONAL CHARACTER VARYING(9)
BYTEINT 
```

*非空值*

```
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL
NOT NULL

NOT NULL

NOT NULL

NOT NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:43:20.547

这有点难以解决。您可以通过在每行末尾查找“NULL”并相应地处理输入来做到这一点：

*解析.awk*

```
$NF == "NULL" { null_flag = 1 }
{
  # first column goes to "fields"
  print $1 > "fields"

  # second column through NF or NF-2 goes to "data-types"
  for(i=2; i <= NF-(null_flag ? 2: 0); i++)
    printf "%s ", $i > "data-types"
  printf "\n" > "data-types"

  # "NOT NULL" or "" goes to "not-nulls" based on the null_flag
  print (null_flag ? "NOT NULL": "") > "not-nulls"
}
{ null_flag = 0 } 
```

像这样运行它：

```
awk -f parse.awk infile 
```

输出：

```
fields                    data-types                      not-nulls
~~~~~~                    ~~~~~~~~~~                      ~~~~~~~~~
SUPPLIER_PROC_ID          BIGINT                          NOT NULL
BTCH_NBR                  INTEGER                         NOT NULL
RX_BTCH_SUPPLIER_SEQ_NBR  INTEGER                         NOT NULL
CORRN_ID                  INTEGER                         NOT NULL
RX_CNT                    BYTEINT                         NOT NULL
DATA_TYP_CD               BYTEINT                         NOT NULL
DATA_PD_CD                BYTEINT                         NOT NULL
CYC_DT                    DATE                            NOT NULL
BASE_DT                   DATE                            NOT NULL
DATA_LOAD_DT              DATE                            NOT NULL
DATA_DT                   DATE                            NOT NULL
SUPPLIER_DATA_SRC_CD      BYTEINT                         NOT NULL
RX_CHNL_CD                BYTEINT                         NOT NULL
MP_IMS_ID                 INTEGER                         NOT NULL
MP_LOC_ID                 NUMERIC(30)                     
MP_IMS_ID_ACTN_CD         BYTEINT                         NOT NULL
NPI_ID                    BIGINT                          
NPI_ID_ACTN_CD            BYTEINT                         NOT NULL
MP_DEA_NBR                NATIONAL CHARACTER VARYING(9)   
MP_DEA_NBR_ACTN_CD        BYTEINT                         NOT NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:22:52.900

这是使用`awk`. 像这样运行：

```
awk -f script.awk sample.txt 
```

内容`script.awk`：

```
{
    for (i=2;i<=NF;i++) {

        if ($i FS $(i+1) == x=("NOT NULL")) {
            break
        }

        r = (r ? r FS : "") $i
    }

    print $1 > "fields"
    print r > "data-types"
    print ($0 ~ x ? x : "") > "not-nulls"

    r = ""
} 
```

或者，这是单线：

```
awk '{ for (i=2;i<=NF;i++) { if ($i FS $(i+1) == x=("NOT NULL")) break; r = (r ? r FS : "") $i } print $1 > "fields"; print r > "data-types"; print ($0 ~ x ? x : "") > "not-nulls"; r = "" }' sample.txt 
```

在我的测试中，这会生成三个文件，每个文件都有所需的输出。HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:47:25.387

这不是很清楚，但看起来你只是想要：

```
awk '{ print $1 > "fields"; print $2 > "data-types" }' 
```

# google-apps-script - 异常：配额错误：超出用户速率限制

> ID：14819847
> 
> 赞同：9
> 
> 时间：2013-02-11T20:01:23.507
> 
> 标签：google-apps-script, google-analytics-api, google-api-console

我有一个应用程序脚本，我在其中循环通过我的 Google Analytics 帐户，直到我到达某个个人资料。
`if (profileItems[i].getName() == "Dev Test" )`
比在另一个函数中（见下文）我调用 Google Analytics API 并总是抛出异常：异常：*配额错误：超出用户速率限制*

```
function getReportDataForProfile(profileId) {
var tableId = 'ga:' + profileId;
var startDate = getLastNdays(14);   // 2 weeks (a fortnight) ago.
var endDate = getLastNdays(0);      // Today.

var optArgs = {
  'dimensions': 'ga:keyword',              // Comma separated list of dimensions.
  'sort': '-ga:visits,ga:keyword',         // Sort by visits descending, then keyword.
  'segment': 'dynamic::ga:isMobile==Yes',  // Process only mobile traffic.
  'filters': 'ga:source==google',          // Display only google traffic.
  'start-index': '1',
  'max-results': '250'                     // Display the first 250 results.
};

//
//Exponential Backoff
//
for (var n=0; n<6; n++) {
try {
     var results = Analytics.Data.Ga.get(
     tableId,                  // Table id (format ga:xxxxxx).
     startDate,                // Start-date (format yyyy-MM-dd).
     endDate,                  // End-date (format yyyy-MM-dd).
     'ga:visits,ga:pageviews', // Comma seperated list of metrics.
     optArgs);
 } catch(e) {
   if (n == 5) {
     //var results = e;
     //throw new Error('Quota ERROR');
     throw (e) 
   } 
   Utilities.sleep((Math.pow(2,n)*1000) + (Math.round(Math.random() * 1000)));
  }    
}   
 return results;
} 
```

*   我将 API 控制台中的每个用户限制的数量增加到 10.0

*   使用率 6%

*   我应用了指数退避

*   我还相信，仅通过询问访问次数和页面浏览量，我并没有夸大我的来电次数。

[完整代码](https://sites.google.com/a/lagaroo.com.br/dev-test/about/stats)

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T14:18:48.183

这确实是因为您不允许每秒查询超过 10 个请求。我在这里发布了一个解决方案（即使这是一个老问题），因为它可能会帮助其他人：

```
/**
 * CallLimiter
 * @param {Number} numberOfCalls how many calls per duration are we allowed to do
 * @param {Number} duration      duration in ms
 */
function CallLimiter(numberOfCalls, duration){
  var lastCall = 0;
  var tokens   = 0;

  return function limiter(f){
    var now = +new Date();

    if (now - lastCall > duration) {
      tokens = numberOfCalls;
    }

    if (tokens <= 0) {
      tokens = numberOfCalls;
      // wait for `duration` before calling limiter(f) again
      return setTimeout(limiter.bind(this, f), duration);
    }

    tokens--;
    lastCall = now;
    f();
  };
} 
```

以下是如何使用它：

```
// Stub...
var Analytics = {Data: {Ga:{get:function(cb){
        cb();
}}}};

function app(){
  // Wrap the api call inside a limiter
  limiter(function(){

    Analytics.Data.Ga.get(function(err, data){
      // do something with the data...

      // ... then, loop if necessary
      app();
    });

  });
}

// Start
app(); 
```

这是一个阻塞的 Scala 版本：

```
class CallLimiter(rate: Throttler.Rate) {
  var lastCall       = 0
  var duration       = rate.duration.toMillis
  var current_tokens = 0

  def apply[A](f: () => A): A = {
    val d = new Date().getTime

    if (d - lastCall > duration) {
      current_tokens = rate.numberOfCalls
    }
    if (current_tokens <= 0) {
      // wait for `duration` before calling f()
      Thread.sleep(duration)
      current_tokens = rate.numberOfCalls
    }
    current_tokens = current_tokens - 1
    lastCall = d
    f()
  }
} 
```

用法：

```
import akka.contrib.throttle.Throttler

val limiter = new CallLimiter(new Rate(10, Duration(1, TimeUnit.SECONDS)))
val accounts = limiter(() => analytics.management().accounts().list().execute().getItems) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T16:08:46.123

也许您超过了每秒每个配置文件的最大请求。看起来它设置为 10 ( [https://developers.google.com/analytics/devguides/reporting/core/v3/limits-quotas](https://developers.google.com/analytics/devguides/reporting/core/v3/limits-quotas) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-24T00:14:23.687

您可以在开发者控制台的配额部分自行更新“每用户速率限制”。

此限制旨在保护您免受意外使用。

您可以在此处了解更多信息： [https ://developers.google.com/console/help/new/#cappingusage](https://developers.google.com/console/help/new/#cappingusage)

# windows - SSH 进入 Windows 进行多个用户会话

> ID：14819848
> 
> 赞同：0
> 
> 时间：2013-02-11T20:01:26.600
> 
> 标签：windows, ssh, remote-desktop

在尝试在远程 ec2 windows 框上运行一些脚本时，我遇到了一些困难。我几乎没有运行一些涉及自动打开浏览器的 selenium 测试的 python 脚本。然而，当我通过 ssh 运行这个脚本时，这些浏览器的 GUI 永远不会出现，尽管当我 rdp 进入它时，我可以在进程列表中清楚地看到它们。在远程桌面服务管理器中，我看到用户是相同的，这是正确的，但是会话不同。我的 RDP 会话中的进程标记为 RDP-Tcp#0，通过 SSH 运行的进程标记为服务。无论如何要折叠用户会话，在我正在查看的任何会话之间切换，或者选择将命令发送到哪个会话？

目前，我使用的 ssh 命令很简单： ssh -i key user@host "python run_python_script.py"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:48:44.680

所以我不太确定如何直接解决该问题，而是从该用户帐户运行 ssh 守护程序。由于它是 explorer.exe 的子项，因此所有打开的窗口都正确显示在那里。

# python - 在 python 的 for 循环中创建唯一名称列表

> ID：14819849
> 
> 赞同：9
> 
> 时间：2013-02-11T20:01:28.820
> 
> 标签：python, list, for-loop, unique

我想在 for 循环中创建一系列具有唯一名称的列表，并使用索引来创建列表名称。这是我想做的

```
x = [100,2,300,4,75]

for i in x:

  list_i=[] 
```

我想创建空列表，例如

```
lst_100 = [], lst_2 =[] lst_300 = [].. 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T20:03:28.820

不要动态命名变量。这使得与他们一起编程变得很困难。相反，使用字典：

```
x = [100,2,300,4,75]
dct = {}
for i in x:
    dct['lst_%s' % i] = []

print(dct)
# {'lst_300': [], 'lst_75': [], 'lst_100': [], 'lst_2': [], 'lst_4': []} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T20:03:30.567

使用字典来保存您的列表：

```
In [8]: x = [100,2,300,4,75]

In [9]: {i:[] for i in x}
Out[9]: {2: [], 4: [], 75: [], 100: [], 300: []} 
```

要访问每个列表：

```
In [10]: d = {i:[] for i in x}

In [11]: d[75]
Out[11]: [] 
```

如果你真的想`lst_`在每个标签中都有：

```
In [13]: {'lst_{}'.format(i):[] for i in x}
Out[13]: {'lst_100': [], 'lst_2': [], 'lst_300': [], 'lst_4': [], 'lst_75': []} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:53:27.253

与其他人的 dict-solutions 稍有不同的是使用 defaultdict。它允许您通过调用所选类型的默认值来跳过初始化步骤。

在这种情况下，选择的类型是一个列表，它将在字典中为您提供空列表：

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> d[100]
[] 
```

# android - 安卓P2P文件传输

> ID：14819857
> 
> 赞同：0
> 
> 时间：2013-02-11T20:01:50.170
> 
> 标签：android, p2p

Android：嘿，我正在尝试开发一个点对点的 Android 应用程序，它使用户能够在没有中央服务器的情况下通过 WiFi 交换文件（照片、视频或任何其他文件），即一个 android 设备将充当客户端和服务器。我是Android的新手，所以我想问从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:05:02.967

这真的很不平凡。你必须：

1.  了解如何建立 TCP 服务器/客户端流。

2.  可能学习如何使用 UDP 广播来自动发现目标。

这个[例子](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)可能会有所帮助。

# c# - 您如何在 Fetch 方法中通过 Alias 预加载数据？

> ID：14819858
> 
> 赞同：0
> 
> 时间：2013-02-11T20:01:52.827
> 
> 标签：c#, nhibernate, collections, fluent-nhibernate, eager-loading

好的，所以我有以下关系：

Bulletin < BulletinEmailLog < BulletinEmailLogRecipient - 联系人 - 实体

其中“<”代表一对多，“-”代表一对一。

这是代码：

```
BulletinEmailLog BulletinEmailLogs = null;
        BulletinEmailRecipient EmailRecipients = null;
        Contact Contact = null;
        Entity Entity = null;
        var pastBulletin = NHibernateSession.Current.QueryOver<Bulletin>()
                        .Where(x => x.Id == bulletinID)
                        .Fetch(x => x.BulletinEmailLogs).Eager
                        .JoinAlias(x => x.BulletinEmailLogs, () => BulletinEmailLogs, NHibernate.SqlCommand.JoinType.LeftOuterJoin)
                        .JoinAlias(() => BulletinEmailLogs.Recipients, () => EmailRecipients, NHibernate.SqlCommand.JoinType.LeftOuterJoin)
                        .JoinAlias(() => EmailRecipients.Contact, () => Contact, NHibernate.SqlCommand.JoinType.LeftOuterJoin)
                        .JoinAlias(() => Contact.Entity, () => Entity, NHibernate.SqlCommand.JoinType.LeftOuterJoin)
                        .Future<Bulletin>(); 
```

在这里，我尝试使用一个数据库查询来获取所有必要的信息。问题是，后来我尝试遍历 BulletinEmailLogs 但我看到了对数据库的调用。我希望能够在前面的代码中添加急切加载语句，以便以后使用内存进行搜索。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:09:02.273

谢谢您的建议。我删除了急切的加载语句，发现只调用了一次数据库。现在我有一个不同的关注/问题。查询中引用了其他我不熟悉的表。我是代码新手，所以可能只是我没有正确查找关系。但无论如何，谢谢。

# jquery - 查询或php问题？我的 jquery showme 切换代码不起作用（上一篇文章中提到的代码）

> ID：14819862
> 
> 赞同：1
> 
> 时间：2013-02-11T20:02:07.957
> 
> 标签：jquery, toggle

我很高兴阅读有关使用切换来单击并显示以及单击和隐藏文本的帖子（[如何使用 javascript 在显示隐藏上更改切换文本](https://stackoverflow.com/questions/4672984/how-to-change-toggle-text-on-show-hide-using-javascript/4673081#4673081)），但后来我无法使代码正常工作。当我单击带下划线的超链接时，没有显示任何文本。

```
In function.php:
add_action('wp_enqueue_scripts', 'my_scripts_method');
function my_scripts_method() {
wp_enqueue_script('SHOWME',get_template_directory_uri() . '/admin/wp-     
includes/js/jquery/SHOWME.js');
}

In ftp drive:
jQuery(document).ready(function($)
{
$(function showme(id)) {
    var divid = $(document.getElementById(id));
    $(if (divid.style.display == 'block') divid.style.display = 'none');
    $(else divid.style.display = 'block');
   }
    array('jquery')
);
   }
  });

  HTML in page:

  <a onclick="SHOWME('list');" href="#"><h3>Air Barrier Association of America (ABAA)     
  Certification Training</h3>
  </a>
  <div class="showMe" style="display: none;">This is a widget</div>
  <div class="showMe" style="display: none;">This is a widget</div>
  <div class="showMe" style="display: none;">Self Adhered &amp; Fluid Applied Installer         
  Training</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:31:52.553

该脚本不起作用，因为其中有语法错误。

您误解了如何使用 jQuery。它是您从常规 Javascript 代码中使用的库，您不会通过`$(...)`在 Javascript 代码中的每一行放置来使用它。

让我们一步一步来。剥离错误的代码会给你：

```
function showme(id) {
  var divid = document.getElementById(id);
  if (divid.style.display == 'block') {
    divid.style.display = 'none';
  } else {
    divid.style.display = 'block';
  }
} 
```

在代码中使用 jQuery 来完成相同的操作如下所示：

```
function showme(id) {
  var divid = $('#' + id);
  if (divid.is(':visible')) {
    divid.hide();
  } else {
    divid.show();
  }
} 
```

您也可以使用该`toggle`方法执行相同的操作：

```
function showme(id) {
  $('#' + id).toggle();
} 
```

当然，您必须调用`showme`HTML 代码，而不是`SHOWME`，因为 Javascript 是区分大小写的，并且您必须将 id 添加`list`到要切换的元素中。

* * *

如果您打算使用 class 切换元素`showMe`，那将是：

```
function showme(className) {
  $('.' + className).toggle();
} 
```

`showme('showMe')`你用而不是调用它`showme('list')`。

* * *

您还可以在 Javascript 代码中绑定事件，而不是使用 inline`onclick`属性。您`ready`为此使用事件，以便在页面准备好后绑定事件，以便链接存在：

```
$(document).ready(function(){
  $('a').click(function(){
    showme('list');
  });
}); 
```

# c++ - 自动为 C++ 函数添加函数前缀

> ID：14819864
> 
> 赞同：1
> 
> 时间：2013-02-11T20:02:14.557
> 
> 标签：c++, cuda, metaprogramming

我正在通过 CUDA 移植一个小型 C++ 代码库以在显卡上调用。CUDA 要求所有函数都预先添加`__host__ __device__`，以便在 CPU 和 GPU 内核代码中都可以调用。例如，

```
void foo() {} // callable on CPU, not on GPU
__host__ __device__ foo() {} // callable on CPU and on GPU 
```

`__host__ __device__`添加到我的代码库中的*每个*函数是一项乏味但直接的任务，但我想知道：有没有一种有效的方法来为 C/C++ 函数添加限定符？

我会对检测到所有函数声明的文本编辑器技术或编译器功能感到满意。但是，我不知道涉及任何一个的解决方案。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:09:51.390

我不知道任何此类编译器功能。不过，无论如何我都会对广泛应用这些指令保持警惕，因为调用约定和堆栈管理在不需要时可能与正常的主机约定有很大不同（例如更慢？）。我可能会将我自己的宏放在一起，例如`#define HDFN __host__ __device__`这样可以很容易地添加/更改。

除此之外，您也许可以挖掘一个用于检测方法的正则表达式并编写一个简单的宏......

# javascript - Select2 Ajax 方法未选择

> ID：14819865
> 
> 赞同：71
> 
> 时间：2013-02-11T20:02:16.250
> 
> 标签：javascript, jquery, ajax, jquery-select2, jquery-select2-3

好的，我确定这里有一些简单的设置错误，但我不是 100% 是什么。

因此，我尝试使用[Select2](http://ivaynberg.github.com/select2/) AJAX 方法作为用户搜索数据库并选择结果的一种方式。呼叫本身会返回结果，但是它不允许我从列表中选择答案。它似乎也不允许您在悬停或向上/向下箭头时“选择”它。所以事不宜迟，这是我的代码：

### 索引.html

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="select2/select2.css" media="screen" />
        <script src="select2/select2.js"></script>
        <script src="select.js"></script>
    </head>
    <body>
        <input type="text" style="width: 500px" class="select2">
    </body>
</html> 
```

### 选择.js

```
jQuery(function() {

  var formatSelection = function(bond) {
    console.log(bond)
    return bond.name
  }

  var formatResult = function(bond) {
    return '<div class="select2-user-result">' + bond.name + '</div>'
  }

  var initSelection = function(elem, cb) {
    console.log(elem)
    return elem
  }

    $('.select2').select2({
      placeholder: "Policy Name",
      minimumInputLength: 3,
      multiple: false,
      quietMillis: 100,
      ajax: {
        url: "http://localhost:3000/search",
        dataType: 'json',
        type: 'POST',
        data: function(term, page) {
          return {
            search: term,
            page: page || 1
          }
        },
        results: function(bond, page) {
          return {results: bond.results, more: (bond.results && bond.results.length == 10 ? true: false)}
        }
      },
      formatResult: formatResult,
      formatSelection: formatSelection,
      initSelection: initSelection
    })
}) 
```

### JSON 响应

```
{
  error: null,
  results: [
    {
      name: 'Some Name',
      _id: 'Some Id'
    },
    {
      name: 'Some Name',
      _id: 'Some Id'
    }
  ]
} 
```

一切似乎都正确，但是我无法实际选择答案并将其输入框中。我的代码中某处有问题吗？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-02-11T20:37:05.083

在查看[另一个答案](https://stackoverflow.com/questions/14193463/an-event-is-interfering-with-select2-plugins-ajax-retrieved-results)之后，似乎我还需要在每次调用时传递 id 字段，否则它将禁用输入。

修复它的示例代码：

```
$('.select2').select2({
  placeholder: "Policy Name",
  minimumInputLength: 3,
  multiple: false,
  quietMillis: 100,
  id: function(bond){ return bond._id; },
  ajax: {
    url: "http://localhost:3000/search",
    dataType: 'json',
    type: 'POST',
    data: function(term, page) {
      return {
        search: term,
        page: page || 1
      }
    },
    results: function(bond, page) {
      return {results: bond.results, more: (bond.results && bond.results.length == 10 ? true: false)}
    }
  },
  formatResult: formatResult,
  formatSelection: formatSelection,
  initSelection: initSelection
}) 
```

# 编辑

由于这不断得到赞成，我会详细说明一下。.select2() 方法`id`要求所有结果都有一个唯一字段。值得庆幸的是，有一个解决方法。该`id`选项接受如下函数：

```
function( <INDIVIDUAL_RESULT> ) {
  // Expects you to return a unique identifier.
  // Ideally this should be from the results of the $.ajax() call. 
} 
```

由于我的唯一标识符`<RESULT>._id`是`return <RESULT>._id;`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-07-23T19:05:26.337

问题是 JSON 数据需要一个名为“id”的属性。没必要

**id: function(bond){ return bond._id; }**

如果数据本身没有 id，您可以使用 **processResults**上的函数添加它，如下所示。

```
 $(YOUR FIELD).select2({
            placeholder: "Start typing...",
            ajax: {
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "YOUR API ENDPOINT",
                dataType: 'json',
                data: 
                    function (params) {
                        return JSON.stringify({ username: params.term });
                },
                processResults: function (data, page) {

                    var results = [];

                    $.each(JSON.parse(data.d), function (i, v) {
                        var o = {};
                        o.id = v.key;
                        o.name = v.displayName;
                        o.value = v.key;
                        results.push(o);
                    })

                    return {
                        results: results
                    };
                },
                cache: true
            },
            escapeMarkup: function (markup) { return markup;},
            minimumInputLength: 1,
            templateResult: function (people) {
                if (people.loading)
                    return people.text;

                var markup = '<option value="' + people.value + '">' + people.name + '</option>';

                return markup;
            },
            templateSelection: function (people) { return people.value || people.text }

        }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-10T15:37:06.570

还要小心这个案子。我正在使用`Id`但 select2 期望`id`。可以节省某人的时间。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-31T10:00:29.787

就像[Dropped.on.Caprica](https://stackoverflow.com/a/14820413/1766225)所说：每个结果项都需要一个唯一的 id。

因此，只需为每个结果分配`id`一个唯一编号：

```
$('#searchDriver').select2({
    ajax: {
       dataType: 'json',
       delay: 250,
       cache: true,
       url: '/users/search',
       processResults: function (data, params) {
           //data is an array of results
           data.forEach(function (d, i) {
               //Just assign a unique number or your own unique id
               d.id = i; // or e.id = e.userId;
           })

           return {
               results: data
           };
       },
    },
    escapeMarkup: function (markup) { return markup; },
    minimumInputLength: 1,
    templateResult: formatRepo,
    templateSelection: formatRepoSelection
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-01T12:10:38.637

我对以下错误有很多问题 **Select2 不允许使用 Option 'ajax'**

在我的情况下，当您使用 select2 3.5 版时出现选择，因此您应该升级到 4.0 版并且您不需要隐藏输入附加到您的选择

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-14T21:08:46.880

[![在此处输入图像描述](../Images/a4b500db4d958c3f09cfbb8a3e95ad5d.png)](https://i.stack.imgur.com/gZFT8.jpg)

`select2`您可以通过以编程方式打开元素然后触发`return`按键来触发选择选项（在本例中为第一个选项） 。

```
var e = jQuery.Event('keydown');
e.which = 13;

$('.offer_checkout_page_link select').select2('open');
$('.offer_checkout_page_link .select2-selection').trigger(e); 
```

这将“设置”选项，就像您单击它一样。`down`您可以修改它以通过在触发之前触发适当数量的按键来选择特定选项`return`。

`enter`当您单击（或在本例中为 hit ）选择一个选项时，似乎在幕后，一个选项元素被添加到选择元素中。您会注意到，当页面首次加载时，`select2`选择元素没有任何子`option`元素。这就是为什么其他解决方案建议使用 jQuery 添加选项元素然后选择它的原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-06T10:28:19.400

我绑定`select2`到一个`div`，不知何故无法使用，`ajax as dataSource` 因此可能会对某人有所帮助。

```
<div id="testSelect2"> </div> 
```

将其更改为

```
<select id="testSelect2"> </select> 
```

它开始保留所选项目。

# menu - 在 Awesome WM 中，是否可以根据您所在的标签有不同的菜单？

> ID：14819866
> 
> 赞同：4
> 
> 时间：2013-02-11T20:02:16.720
> 
> 标签：menu, awesome-wm

在 Awesome Window Manager 中，您有一个主菜单，可以通过单击左上角的启动器、右键单击桌面或使用键绑定 Mod+w 来调用它。我想做的是能够根据我所在的标签有不同的菜单。

例如，目前在我的 Awesome 配置中，我有 4 个标签：主要、开发、视频和办公室。所以我想要每个不同标签的菜单，如下所示：

主要：终端，暂停，重启，关闭开发：终端，gvim，firefox，视频：vlc，brasero office：writer calc draw impress

这真的可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:45:29.143

我终于创建了一个函数来为每个标签创建不同的菜单：

更改鼠标和键盘键绑定的行以调用 getTagMenu：

```
-- {{{ Mouse bindings: I USE PRIMARY BUTTON
root.buttons(awful.util.table.join(
awful.button({ }, 1, function () 
    menutag = getTagMenu() 
    menutag:show({keygrabber=true}) 
end),
awful.button({ }, 4, awful.tag.viewnext),
awful.button({ }, 5, awful.tag.viewprev) 
```

))

```
-- {{{ Key bindings: I use MENU KEY
globalkeys = awful.util.table.join(
awful.key({            }, "Menu", function () 
    menutag = getTagMenu() 
    menutag:show({keygrabber=true})
end)) 
```

现在的功能：

```
function getTagMenu ()
tagID=awful.tag.getidx(awful.tag.selected(1))
screen[1]:add_signal("tag::history::update", function()
tagName = awful.tag.selected(1).name end)

if tagName == "main" then 
    menutag = awful.menu({ items = { 
    { "&gvim", "gvim" }, 
    { "&firefox", "firefox" }, 
    { "&software", "software-center" },
    { "&config", "zsh -c -i 'awe'" },
    { "sleep", "zsh -c -i 'gksu pm-suspend'" },
    { "logout", awesome.quit },
    { "restart", "zsh -c -i 'sudo shutdown -r now'" },
    { "shut", "zsh -c -i 'sudo shutdown -h now'"}}})
end

if tagName == "develop" then
    menutag = awful.menu({ items = { 
    { "&gvim", "gvim" }, 
    { "&sqlitestudio", "sqlitestudio" }, 
    { "&tkcon", "tkcon" } } } )
end

if tagName == "media" then
    menutag = awful.menu({ items = { 
    { "vlc", "vlc" } } } )
end

if tagName == "office" then
    menutag = awful.menu({ items = { 
    { "&write", "libreoffice --writer" },
    { "&calc", "libreoffice --calc" } } } ) 
end
return menutag
end 
```

# java - GCM Java Server：发送带有重音字符的消息

> ID：14819870
> 
> 赞同：0
> 
> 时间：2013-02-11T20:02:31.937
> 
> 标签：java, android, push, google-cloud-messaging

我尝试发送带有重音字符的消息，为了测试我使用一个简单的字符串：

```
 String message ="éèàôaaaa"; 
```

我的 GCM Java 服务器源代码：

```
 // use this line to send message with payload data
        Message message = new Message.Builder()
            .collapseKey("1")
            .timeToLive(3)
            .delayWhileIdle(true)
            .addData("Alerte : ",   message)
            .build(); 
```

在带有 eclipse 的 OSX 上：一旦消息被推送，在我的设备（xperia s 和 nexus 7）上，我在状态栏中有“????aaaa”

在带有 eclipse 的 Windows7 上：一旦消息被推送，在我的设备（xperia s 和 nexus 7）上，我在状态栏中有“aaaa”

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:19:52.433

这是因为您的 unicode 字符对于 URL 是不安全的，请参阅我的其他[答案](https://stackoverflow.com/questions/14677821/received-gcm-message-shows-with-garbled-text)。这同样适用于您的问题。

# c# - 插入后创建触发器

> ID：14819871
> 
> 赞同：0
> 
> 时间：2013-02-11T20:02:31.983
> 
> 标签：c#, sql-server-2008, triggers

在我的表中，除了其他字段之外，我还有以下字段

```
Email 
UpperEmail 
```

我应该创建触发器，它将用转换为大写字母`UpperEmail`的值填充字段。`Email`这个怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T20:05:50.117

我建议您创建一个计算列来执行此操作，而不是为 UpperEmail 单独列。使用计算列，您不需要使用触发器。

前任：

```
Alter Table YourTableName Add UpperEmail As Upper(Email) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:15:06.773

作为替代解决方案，您是否考虑过将电子邮件地址存储在不区分大小写的排序规则的列中？我问是因为当我看到有人关心`UPPER(value)`or`LOWER(value)`时，他们可以以不区分大小写的方式进行比较。

# c# - 使用 c# 在 VisualBrush 中设置图像运行时

> ID：14819872
> 
> 赞同：2
> 
> 时间：2013-02-11T20:02:37.367
> 
> 标签：c#, wpf, image, xaml, visualbrush

实际上，我将在设计时从资源中获取的图像设置为**xaml**文件，如下所示：

```
<Button Click="btnLogin_Click" Name="btnLogin">
    <StackPanel Orientation="Horizontal">
        <Rectangle Width="20" Height="20" Name="recLogin">
            <Rectangle.Resources>
                <SolidColorBrush x:Key="BlackBrush" Color="White" />
            </Rectangle.Resources>
            <Rectangle.Fill>
                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_user}" x:Name="brushLogin" />
            </Rectangle.Fill>
        </Rectangle>
        <TextBlock Text=" login" Name="txbLogin" />
    </StackPanel>
</Button> 
```

并且工作正常。但是*（是一个登录按钮）*我希望当用户登录时，按钮上的图像*（在一个矩形内）*会改变..

我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:24:27.327

当模型中的属性更新时，您可以使用 a`DataTrigger`更改图像。

在这个例子中，布尔值`IsLoggedIn`发生了变化，这反过来又改变了图像。

例子：

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="125.078" Width="236.441" Name="UI" >
    <Window.Resources>

        <VisualBrush x:Key="Loggedin">
            <VisualBrush.Visual>
                <Image Source="http://icons.iconarchive.com/icons/deleket/sleek-xp-basic/32/Ok-icon.png" Stretch="Uniform" />
            </VisualBrush.Visual>
        </VisualBrush>

        <VisualBrush x:Key="NotLoggedin">
            <VisualBrush.Visual>
                <Image Source="http://icons.iconarchive.com/icons/deleket/sleek-xp-basic/32/Close-2-icon.png" Stretch="Uniform" />
            </VisualBrush.Visual>
        </VisualBrush>

    </Window.Resources>

    <Grid DataContext="{Binding ElementName=UI}">
        <Button Click="btnLogin_Click" Name="btnLogin" HorizontalAlignment="Left" Width="94" Height="40" VerticalAlignment="Top" Margin="63,26,0,0">
            <StackPanel Orientation="Horizontal">
                <Rectangle Width="20" Height="20" Name="recLogin">
                    <Rectangle.Resources>
                        <SolidColorBrush x:Key="BlackBrush" Color="White" />
                    </Rectangle.Resources>
                    <Rectangle.Style>
                        <Style TargetType="{x:Type Rectangle}">
                            <Setter Property="Fill" Value="{StaticResource NotLoggedin}" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsLoggedIn}" Value="True">
                                    <Setter Property="Fill" Value="{StaticResource Loggedin}" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Rectangle.Style>
                </Rectangle>
                <TextBlock Text=" login" Name="txbLogin" />
            </StackPanel>
        </Button>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private bool _isLoggedIn;

    public MainWindow()
    {
        InitializeComponent();  
    }

    public bool IsLoggedIn
    {
        get { return _isLoggedIn; }
        set { _isLoggedIn = value; NotifyPropertyChanged("IsLoggedIn"); }
    }

    private void btnLogin_Click(object sender, RoutedEventArgs e)
    {
        IsLoggedIn = !IsLoggedIn;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
 } 
```

**注意：**我只是使用在线图像，因为我没有您的资源，您可以根据自己的需要进行更改

结果：

IsLoggedIn = 假； ![在此处输入图像描述](../Images/3ad799a194941a31e20fe90287db515c.png) IsLoggedIn = true; ![在此处输入图像描述](../Images/f77d327d03c23a4a0ac521f962c50708.png)

# twitter-bootstrap - Twitter Bootstrap 复杂表单布局

> ID：14819874
> 
> 赞同：12
> 
> 时间：2013-02-11T20:02:41.190
> 
> 标签：twitter-bootstrap

我需要构建一个包含七个字段集的表单——其中一个有二十四个输入字段（文本框、复选框等），一个有一个动态添加行的表格。我想使用 Twitter Bootstrap 来开发表单。使用网格是一种好习惯吗？谁能指点我一个包含复杂表单布局示例的教程？我看到的示例中的字段很少，如果我尝试扩展这些示例以包含更多字段，那么我的表单中的字段对齐就会混乱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T16:49:18.430

您确实应该能够使用 Bootstrap 的脚手架网格。看看[**Bootply**](http://www.bootply.com)。它将使您能够尝试不同的 Bootstrap 元素和表单布局。

这里有复杂的表单示例：http: [//bootply.com/60430](http://bootply.com/60430)

# java - 保持 Java 蓝牙连接处于活动状态

> ID：14819875
> 
> 赞同：8
> 
> 时间：2013-02-11T20:02:42.803
> 
> 标签：java, bluetooth, inputstream, bluecove, jsr82

我正在使用 Bluecove API 为我的计算机构建一个简单的 Java 蓝牙服务器。我也在构建一个 Android 客户端应用程序，但问题似乎源于服务器端应用程序。

我确定有人已经在某个地方发布了任何答案，并且过去几天我已经严格尝试了不同的解决方案，并查看了每个可能的论坛，但我似乎无法保持套接字线程上的连接。

在建立从 android 到计算机的连接后，我可以交换消息，反之亦然，从计算机到 android，但在交换字节后，Bluecove 堆栈会立即关闭并关闭套接字连接，即使我没有明确告诉它连接.close()。

我尝试使用一段时间（某些陈述为真）循环来保持连接处于活动状态，并且在收到第一条消息后它不再关闭套接字，但它无法接收我从智能手机发送到计算机的任何后续消息任何一个。虽然它基本上还活着，但当我尝试从智能手机发送新消息时，它无法接收到任何新消息。不知道为什么。

对不起，这是我第一次发帖，我不确定为什么代码的第一部分不能正确显示在页面上。

代码制作连接：

```
public BluetoothServer() {
    try {
        service = (StreamConnectionNotifier) 
            Connector.open("btspp://localhost:" + new UUID(0x1101).toString() + 
                                ";name=SampleServer");

        System.out.println("open connection");

        while (runState == true) {

            connection = (StreamConnection) service.acceptAndOpen();

            //send a greeting across to android
            outputStream = connection.openOutputStream();
            String greeting = "JSR-82 RFCOMM server says hello";
            outputStream.write(greeting.getBytes());

            //run thread that listens for incoming bytes through socket connection
            Thread t = new Thread(new ConnectedThread(connection));
            t.start();                
        }

    } catch(IOException e) {}
} 
```

用于监听传入数据的线程代码

```
public void run() {
    try {    
        //open input stream to listen to data
        inputStream = connection.openInputStream();              

        byte buffer[] = new byte[1024];
        int bytes_read = inputStream.read(buffer);

        String received = new String(buffer, 0, bytes_read);
        System.out.println("received: " + received);

    } catch(IOException e) {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-17T21:23:04.023

不幸的是，我无法在我的机器上实际尝试您的代码，但我想我看到了您的错误：在您从输入流中读取的 run()-Method 中，将其打印到控制台，然后就结束了。在你的最后一行之后

```
 System.out.println("received: " + received); 
```

你的 run() 方法结束了，线程被运行时丢弃。您需要将接收置于 while(true) 或 while(running) 循环中。

我修改了你的代码，就在这里，但是请记住我之前所说的：我无法测试运行它，所以它完全未经测试！

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import javax.bluetooth.UUID;
import javax.microedition.io.Connector;
import javax.microedition.io.StreamConnection;
import javax.microedition.io.StreamConnectionNotifier;

public class BluetoothServer {

    private boolean runState = true;

    public BluetoothServer(){

        try {
            StreamConnectionNotifier service = (StreamConnectionNotifier) Connector.open("btspp://localhost:" + new UUID(0x1101).toString() + ";name=SampleServer");
            System.out.println("open connection");

            while(runState == true){
                StreamConnection connection = (StreamConnection) service.acceptAndOpen();
                new Listener(connection).start();
            }

        } catch(IOException e) {
            e.printStackTrace();
        }
    }

    private class Listener extends Thread{

        private OutputStream os;
        private InputStream is;

        public Listener(StreamConnection connection){
            try {
                this.os = connection.openOutputStream();
                os.flush();
                this.is = connection.openInputStream();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        public void run(){
            StringBuilder builder;
            try{
                String greeting = "JSR-82 RFCOMM server says hello";
                os.write(greeting.getBytes());

                while(true){
                    builder = new StringBuilder();
                    int tmp = 0;
                    while((tmp = is.read()) != -1){
                        builder.append((char) tmp);
                    }
                    System.out.println("received: " + builder.toString());
                }
            } 
            catch(IOException e){
                e.printStackTrace();
            }
        }
    }
} 
```

这里有一些关于我的和你的代码的一般观点和想法：

*   如您所见，在主线程中我只接受一个新连接。一旦客户端连接，我将连接对象提供给线程。然后它开始与客户端通信
*   在 Java 中，我们通常将左括号放在请求它的语句的同一行，但这只是一个细节，而不是必须的。
*   总是对异常做一些事情或不捕获它们。因此，最低限度是 printStacktrace() 或使用“抛出 xException”声明您的方法，但不要捕获并忽略它们。

下次您在这里发布内容时，我建议您包含所有导入语句等，它可以帮助那些试图帮助您的人。（有时，导入可能是所有麻烦的原因，例如当有人导入 java.awt.List 而不是 java.util.List 时）

我希望我对你有所帮助！

# php - 在嵌套的 php 数组中搜索 $code

> ID：14819881
> 
> 赞同：1
> 
> 时间：2013-02-11T20:03:28.063
> 
> 标签：php, arrays, multidimensional-array

堆栈溢出者，

在尝试深入 PHP 之后，我似乎陷入了困境；我有一个预先生成的数组，其中 var_dump($codes) 如下：

```
array(2) {
  [0]=>
  array(3) {
    ["code"]=>
    string(5) "01332"
    ["description"]=>
    string(19) "Derby Discount Code"
    ["discount_amount"]=>
    string(2) "15"
  }
  [1]=>
  array(3) {
    ["code"]=>
    string(5) "01283"
    ["description"]=>
    string(25) "South Derby Discount Code"
    ["discount_amount"]=>
    string(2) "20"
  }
} 
```

我有一个表格，它 _POST 一个 $code 的变量，并想在上面的数组中搜索，看看上面的嵌套数组之一中是否有 $code 的匹配项。如果是这样，我希望能够将折扣金额和描述作为单个变量。

到目前为止，我有以下内容：

```
if(in_array($code, $codes)) { 
    //apply discount code using $discount_amount
} 
```

其中 $codes 输出发布在此问题顶部的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:07:47.720

您可以使用的快速小功能：

```
function get_discount($arr, $code) {
    foreach($arr as $item) {
        if($item["code"] == $code) {
            return $item["discount_amount"];
        }
    }

    return NULL;
} 
```

其中 $arr 是您的数组（您已转储）， $code 是您要检查的代码。应该返回折扣，或者 NULL。

还没有机会对其进行测试（在此处输入），但它*应该*可以按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:06:48.210

像这样的东西：

```
foreach ($pregeneratedCodes as $pregeneratedCode) {
    if (in_array($pregeneratedCode['code'], $_POST['codes'])) {
        $discount = floatval($pregeneratedCode['discount_amount']);
        // now you can use $discount
    }
} 
```

这里没有验证，它假设你有一个数组作为`$_POST['codes']`. 它还假设您希望允许多个代码匹配。

# html - 在什么情况下表单方法应该是 GET 什么情况下应该是 POST

> ID：14819885
> 
> 赞同：1
> 
> 时间：2013-02-11T20:03:31.907
> 
> 标签：html, forms, post, get

创建 HTML 表单时，表单在什么情况下应该使用 GET 方法，什么情况下应该使用 POST 方法。这是一个简单的问题，用于解释使用这两种方法的选项，具体取决于如何处理表单和信息，以及如何帮助使用其中一种。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:48:37.400

好吧，我是菜鸟，但我可以说，`$_GET['']`当发送到服务器的信息没有任何安全风险时，总是使用全局。例如：您不能通过 URL 发送密码，另一方面，您应该始终使用 POST 提交敏感数据

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-11T20:43:48.070

我自己最近有这个问题。我发现的差异的最佳描述在这里：

[http://www.w3schools.com/tags/ref_httpmethods.asp](http://www.w3schools.com/tags/ref_httpmethods.asp)

# jquery - jquery悬停和切换

> ID：14819888
> 
> 赞同：0
> 
> 时间：2013-02-11T20:03:37.040
> 
> 标签：jquery, hover, toggle

我有一些隐藏的文本，我想在单击按钮时显示它们。

该按钮有四种不同的显示状态。当文本不显示时，它应该朝下，当文本显示时，它应该朝上。此外，还有向下和向上的悬停状态。

当用户滚动 h1 标签时，我还希望按钮更改为悬停状态。它还应该根据是否显示文本显示正确的悬停状态。

我有一个[小提琴链接来演示](http://fiddle.jshell.net/MGDTech/6jaCt/)。

如果您删除下面的功能，它适用于单击但不适用于悬停状态：

```
 $('body.home .entry-content h1').hover(function() {
    $('#hide-text').css('background-position','-26px 0px');

}, function() {
    $('#hide-text').css('background-position','0px 0px');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:20:28.700

我稍微修改了您的代码以`collapse`用作类而不是仅`hover`. 您需要这两个类，因为您希望有两种不同的状态（折叠和未折叠），每个状态都有自己的悬停。您的第一次尝试失败了，因为`background-position`无论您想要什么状态，您都在悬停时将其重置为折叠位置。

[演示](http://fiddle.jshell.net/6jaCt/7/)

jQuery

```
jQuery(document).ready(function ($) {
    $('body.home .entry-content h1').append("<div id='hide-text'></div>");

    $('body.home .entry-content h1').hover(function () {
        $('#hide-text').addClass("hover");

    }, function () {
        $('#hide-text').removeClass("hover");
    });

    $('#hide-text').toggle(function () {
        $(this).addClass('collapse');
        $('body.home .entry-content h2').fadeIn(500);

    }, function () {

        $(this).removeClass('collapse');
        $('body.home .entry-content h2').fadeOut(500);

    });

}); 
```

CSS

```
body.home .entry-content h2 {
    display: none;
}
#hide-text {
    display: inline-block;
    position: relative;
    top: 2px;
    height: 22px;
    width: 26px;
    margin-left: 15px;
    background: url('http://www.mgrear.com/clients/gls/wp-content/themes/gravity-lab-studios/images/home-button.png') 0px 0px no-repeat;
}
#hide-text:hover, #hide-text.hover {
    background: url('http://www.mgrear.com/clients/gls/wp-content/themes/gravity-lab-studios/images/home-button.png') -26px 0px no-repeat;
    cursor: pointer;
}
#hide-text.collapse {
    background: url("http://www.mgrear.com/clients/gls/wp-content/themes/gravity-lab-studios/images/home-button.png") -52px 0px no-repeat;
}
#hide-text.collapse:hover, #hide-text.collapse.hover {
    background: url("http://www.mgrear.com/clients/gls/wp-content/themes/gravity-lab-studios/images/home-button.png") -78px 0px no-repeat;
} 
```

# css - css 属性值包含变量

> ID：14819889
> 
> 赞同：0
> 
> 时间：2013-02-11T20:03:39.003
> 
> 标签：css, less

如何在使用较少的 css 设置属性值时包含变量。例如：

我想根据变量将背景图像设置在右侧或左侧`@direction`。

我试过了：

```
@direction:left;
background: url(../../images/downarrow_blue.png) no-repeat @direction white; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:08:18.763

你有2个问题：

1.  要传递字符串值变量，您应该将它们括在单引号中。在您的情况下，它应该是`@direction: 'left';`.
2.  background-position 属性接受对应于每个轴的两个值。您需要传递类似：`@direction: 'left top';`或`@direction: 'right bottom';`.

检查与变量相关的文档：http: [//lesscss.org/#-variables](http://lesscss.org/#-variables)

# javascript - 来自多个 API 的一个查询

> ID：14819892
> 
> 赞同：1
> 
> 时间：2013-02-11T20:03:47.517
> 
> 标签：javascript, api, web-applications

是否可以从不同来源的 API 进行一次查询？IE，

在传统的 Web 开发中如果我有以下模块：

*   客户：clientID、clientName
*   订单：ordersID、clientID

我将在 ONE 数据库中创建 2 个表，并使用连接创建外键并进行查询。

我想做的是创建 2 个数据库，而不是 ONE 数据库，每个模块一个（这样我可以更容易地扩展每个模块，因为它是自己的实体）并通过 API 将 2 个数据库“绑定”。

因此，我仍然会使用“外键”（即 Orders 表中的 clientID）来“绑定”客户和订单，但我无法“加入”它们，因为它们不在同一个数据库中。

所以，在我的界面中，我会有一个：

*   客户端 API，例如 http:mysite.com/showallClientsAPI
*   OrdersAPI 像 http:mysite.com/showallOrdersAPI

我将如何通过模块之间的 API 进行查询（或者可能）以获得此响应：

*   销售A
    *   客户名称 1
    *   客户名称 2
    *   ETC
*   销售B
    *   客户名称 1
    *   客户名称 3

我可以显示所有具有 clientID=1 的订单（[http://mysite.com/showSalesAPI](http://mysite.com/showSalesAPI)），但这会给我一个带有**clientID**而不是**clientName**的 json 响应。

那有意义吗？

（您可能会问我为什么要这样做。这是多模块应用程序的一部分，为了将来的开发或与其他应用程序的交互，将模块分开而不是作为庞大数据库的一部分是有意义的）

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:16:32.680

我喜欢拆分数据库并将它们放在服务后面的想法，但我认为应该谨慎行事。如果您要不断地在客户和订单之间进行连接，为什么要让它们通过服务进行通信？

一些想法：

*   也许将数据从服务器复制到服务器，以便客户端/订单查询可以快速发生。这样每个服务器仍然是权威的。

*   当然，您绝对可以在代码中加入实体。您可以编写位于每个 API 之上的包装器，然后执行以下操作（C#）：

```
 List clientNames = new List();
var orders = OrderService.GetOrders();

foreach (var order in orders)
{
   var client = ClientService.GetClient(order.ClientId);
   clientNames.Add(client.FirstName + " " + client.LastName);
} 

```

（注意：这是低效的，您可能需要传递客户端 ID 列表）

像上面这样的东西会以一种简单的方式调用两个服务，然后将它们“加入”到您的应用程序中。如果这感觉工作量太大，那么考虑复制！=)

*   使用 Mule ( [http://www.mulesoft.org/](http://www.mulesoft.org/) ) 之类的东西来处理服务的集成。使用 Mule，您可以创建 REST 服务（或任何 HTTP Web 服务）的端点，然后将它们组合成一个“消息”。

*   无论你做什么，如果你在服务器之间拆分数据，你都会为查询付出更高的代价。如果实体位于同一服务器/数据库上，我无法想象性能会接近它的性能。

# javascript - 更新内容ckeditor

> ID：14819894
> 
> 赞同：0
> 
> 时间：2013-02-11T20:03:50.363
> 
> 标签：javascript, textarea, ckeditor

我正在尝试更新我的 ckeditor 的内容，但它不起作用

```
<textarea id="monday" class="ckeditor" name="monday" >1</textarea>
<script type="text/javascript" >
    setTimeout(function(){
        $('#monday').val('test');
        CKEDITOR.instances.monday.updateElement();
        alert( $('#monday').val());
    },1000)
</script> 
```

但我的 ckeditor 中总是有 1 并且警报返回

1

（1 带 p 但没有出现）

这是CKEditor 4.0

我曾经读过关于这个的帖子，但它是一个最旧的版本

谢谢

编辑：第二次测试

```
<script type="text/javascript" >
setTimeout(function(){
    $('#monday').val('test');
    for ( instance in CKEDITOR.instances )
    {
        CKEDITOR.instances[instance].updateElement();
    }
    alert( $('#monday').val());
},5000)
</script> 
```

但它没有用

编辑第三次测试

```
<script type="text/javascript" >
setTimeout(function(){
    $('#monday').val('test');
    $('textarea.ckeditor').each(function () {
    var $textarea = $(this);
    $textarea.val(CKEDITOR.instances[$textarea.attr('name')].getData());
    console.log(CKEDITOR.instances[$textarea.attr('name')].getData());
    console.log($('#monday').val())
    });
},5000)
</script> 
```

我有所有的时间

1

在我的控制台中

和

```
<script type="text/javascript" >
setTimeout(function(){
    $('#monday').val('test');
    $('textarea.ckeditor').each(function () {
    var $textarea = $(this);
    console.log($('#monday').val())
    });
},5000)
</script> 
```

返回测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:07:46.387

如果删除此行会发生什么

CKEDITOR.instances.monday.updateElement(); ?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:28:00.177

这是另一个选择

```
$('textarea.ckeditor').each(function () {
   var $textarea = $(this);
   $textarea.val(CKEDITOR.instances[$textarea.attr('name')].getData());
}); 
```

# visual-studio-2012 - 如何在 Visual Studio 中编写上标/上索引？

> ID：14819895
> 
> 赞同：26
> 
> 时间：2013-02-11T20:03:57.620
> 
> 标签：visual-studio-2012

这是可能的，但我不知道它是如何完成的。

![在此处输入图像描述](../Images/245a93bf3ff8828990b34904937bcb1e.png)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-11T20:27:55.267

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-26T22:06:44.933

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-10T18:08:02.913

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-04T14:53:18.473

WPF 用户的另一种方法，

```
 <TextBlock >
    <Run>x</Run>
    <Run FontSize="8" BaselineAlignment="TextTop" >2</Run>
  </TextBlock> 
```

如果要用作下标，请将 BaselineAlignment 更改为 TextBottom。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-26T20:55:21.007

看起来有一些简单的标签可用于制作任何文本上标/下标。上标标签是`<sup>`，下标标签是`<sub>`。

[https://www.w3schools.com/tags/tag_sup.asp](https://www.w3schools.com/tags/tag_sup.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-19T12:57:31.550

使用 ( `Ctrl`++ `Shift`)`P`命令在 Visual Studio 中应用上标和下标。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-02-12T21:43:33.950

有几种解决方案。就个人而言，我只是在 Word 中格式化标签文本，使用屏幕截图并将其保存为我与标签一起使用的图像。

# windows - 是否可以在安装时使用 cpack 环境变量？

> ID：14819897
> 
> 赞同：2
> 
> 时间：2013-02-11T20:04:10.050
> 
> 标签：windows, cmake, nsis, cpack

我正在尝试将工作中的一些东西移植到 cmake，而我们使用 Windows 安装程序（目前使用 Inno Setup）所做的事情似乎在 cmake/cpack 中没有必然结果。我们有在安装时根据环境变量安装的开发库。因此，包含文件转到类似`"%DEV_INCLUDE_DIR%/include"`的位置，库文件本身转到类似`"%DEV_LIB_DIR%/lib"`的位置，并且环境变量`DEV_INCLUDE_DIR`和`DEV_LIB_DIR`在安装程序运行时位于框上的环境中。因此，它们在生成安装程序的盒子上的内容无关紧要。

但是，cmake 似乎希望在编译时配置所有这些。它使用`install`目标生成`package`cpack 的目标，然后您使用`install`命令添加要与安装程序一起安装的内容。如果我尝试将环境变量放在路径中，它就无法正常工作。如果我尝试

```
install(DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/Include/" DESTINATION "%DEV_INCLUDE_DIR%/include") 
```

然后我最终在使用 NSIS 安装程序安装包时得到一个`%DEV_INCLUDE_DIR%`文件夹`CMAKE_INSTALL_PREFIX`，这绝对不是我想要的。我希望它`%DEV_INCLUDE_DIR%`在安装时替换为该环境变量的值。我找不到任何方法来做到这一点。有谁知道如何做到这一点，或者甚至可能吗？

说实话，在这种情况下，我什至没有什么安装前缀（所有东西都是根据环境变量安装的），但是 cmake 似乎是围绕有一个的想法构建的，我希望安装前缀会如果命令`DESTINATION`中`install`的每个都是绝对目录，则只需忽略（或最坏的情况，创建一个空目录） ，但它不会将环境变量视为环境变量或绝对目录。我能想到的告诉 cmake 将其视为环境变量（例如`$ENV{DEV_INCLUDE_DIR}"`）的所有方法都涉及在构建它的盒子上使用环境变量，而不是在安装它的盒子上使用环境变量。有什么方法可以让 cmake/cpack 的安装/打包内容在安装时实际使用环境变量？

# r - 图表在 ggplot2 中未正确显示

> ID：14819900
> 
> 赞同：1
> 
> 时间：2013-02-11T20:04:15.187
> 
> 标签：r, ggplot2

我正在尝试解决我的数据遇到的问题，希望在 ggplot2 中生成线图。这是我的数据（使用 dput() 输出）。假设是十行两列，一列是日期（d，m，y，h，m），另一列是计数。为代码的状态道歉，当我尝试更简单地重现代码时，它可以工作，当我尝试生成图表时，我看不出问题出在哪里。

```
day2 <- structure(list(date = structure(c(1355210880, 1355211000, 1355211120, 
                                      1355211240, 1355211360, 1355211480, 1355211600, 1355211720, 1355211840, 
                                      1355211960), class = c("POSIXct", "POSIXt"), tzone = ""), Counts = c("12", 
                                                                                                           "45", "12", "4", "2", "3", "2", "2", "2", "0")), .Names = c("date", 
                                                                                                                                                                       "Counts"), row.names = 4405:4414, class = "data.frame") 
```

我要绘制的图表是：

```
library(ggplot2)
g = ggplot(day2, aes(x=date, y=Counts))
g +  geom_line() 
```

但结果图只是水平线，计数列以非连续数字上升。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:07:50.647

你必须告诉 ggplot 如何对你的点进行分组来画一条线：

```
g +  geom_line(aes(group = 1)) 
```

# xml - XSL - 根据条件添加节点的值

> ID：14819906
> 
> 赞同：1
> 
> 时间：2013-02-11T20:04:43.500
> 
> 标签：xml, xslt, xslt-1.0

所以基本上我需要一个循环遍历 XML 节点的函数，如果条件为真，它将该值添加到变量中。我正在汇总社交帖子，需要计算每个社交帖子中有多少在提要中。这是我的 XML：

```
 <feed>
   <channel>
     <sources>
       <source>
           <name>Facebook</name>
           <count>3</count>
       </source>
       <source>
           <name>Twitter</name>
           <count>2</count>
       </source>
       <source>
           <name>Twitter</name>
           <count>8</count>
        </source>
     </sources>
   </channel>
  </feed> 
```

问题是同一个来源可以出现多次，我需要将它们加在一起。因此，对于上述 XML，我需要 10 个 twitter 计数。这是我目前所处的位置：

```
<xsl:variable name="num_tw">
<xsl:for-each select="feed/channel/sources/source">
  <xsl:choose>
    <xsl:when test="name, 'twitter')">
      <xsl:value-of select="count"/>
    </xsl:when>
    <xsl:otherwise></xsl:otherwise>
  </xsl:choose>
</xsl:for-each>
</xsl:variable>

<xsl:variable name="num_fb">
<xsl:for-each select="feed/channel/sources/source">
  <xsl:choose>
    <xsl:when test="name, 'facebook')">
      <xsl:value-of select="count"/>
    </xsl:when>
    <xsl:otherwise></xsl:otherwise>
  </xsl:choose>
</xsl:for-each>
</xsl:variable> 
```

这不起作用，因为如果有两个 twitter 提要，它会将数字并排放置并输出“28”而不是“10”。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:17:13.510

您不需要在此处使用**xsl:for-each**遍历节点。相反，您可以使用**sum**运算符。例如，您的**num_tw**变量可以像这样重写

```
<xsl:variable name="num_tw" select="sum(feed/channel/sources/source[name='Twitter']/count)"/> 
```

但是，您真的想在这里硬编码您的提要名称吗？这实际上是一个“分组”问题，在 XSLT 1.0 中，您使用一种称为 Muencian Grouping 的技术来解决它。在您的情况下，您希望按**名称元素对****源**元素进行分组，因此您定义了一个键，如下所示：

 **```
<xsl:key name="source" match="source" use="name" /> 
```

然后，查看所有**源**元素，并选择组中第一个作为其给定**名称**元素的元素：

```
<xsl:apply-templates 
   select="feed/channel/sources/source[generate-id() = generate-id(key('source', name)[1])]" /> 
```

然后，在与此匹配的模板中，您可以像这样总结计数：

```
<xsl:value-of select="sum(key('source', name)/count)" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:key name="source" match="source" use="name" />

    <xsl:template match="/">
    <xsl:apply-templates select="feed/channel/sources/source[generate-id() = generate-id(key('source', name)[1])]" />

    </xsl:template>

    <xsl:template match="source">
        <source>
            <xsl:copy-of select="name" />
            <count><xsl:value-of select="sum(key('source', name)/count)" /></count>
        </source>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容：

```
<source>
   <name>Facebook</name>
   <count>3</count>
</source>
<source>
   <name>Twitter</name>
   <count>10</count>
</source> 
```

请注意，如果您确实想了解特定提要的计数，例如“Facebook”，则最好在此处使用密钥。例如：

```
<xsl:variable name="num_fb" select="sum(key('source', 'Facebook')/count)"/> 
```**

# opengl - 无法打印 (char*) OpenGL 字符串

> ID：14819908
> 
> 赞同：1
> 
> 时间：2013-02-11T20:04:48.133
> 
> 标签：opengl, printing, char, version

我想打印我的 GPU 中可用的扩展和版本信息。

我使用了一个自定义函数来检查从 NEHE 甚至从官方网站上获取的扩展，也不起作用。

我无法让它工作。这里发生了什么？

```
#include <windows.h>
#include <GL/freeglut.h>
#include <iostream>    

int main(int argc, char **argv)
{
    glutInit(&argc, argv);

    cout << "test" << GL_VERSION; // WORKS . SHOWS A NUMBER
    cout << glGetString(GL_VERSION); // DOESN´T WORK. Shows nothing, but continues

    if (glutExtensionSupported("GL_NV_bindless_texture"))
        cout << "YES";  // NEVER GETS PRINTED, DOESN´T MATTER WHICH EXTENSION I CHOOSE

    char* extensiones = (char*)glGetString(GL_EXTENSIONS);
    cout << extensiones;  // DOESN´T WORK NEITHER
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:12:29.020

```
glutInit(&argc, argv); 
```

这不会创建像`glGetString()`正确操作所需的 OpenGL 上下文。

您需要一路创建一个窗口：

```
glutInit( &argc, argv );
glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
glutCreateWindow( "Window" );
// you can use GL functions below here
glutExtensionSupported( ... );
glGetString( ... ); 
```

# javascript - $f 在 jquery 脚本中是什么意思？

> ID：14819910
> 
> 赞同：14
> 
> 时间：2013-02-11T20:04:59.077
> 
> 标签：javascript, jquery

我看到函数 $f 在许多与 jquery 相关的脚本中使用，但我在任何地方都找不到这意味着什么的描述。

例子

```
var iframe = document.getElementById(iframe_id);
this.player = global.$f(iframe); 
```

谁能指出我的文档？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T10:18:11.713

显然，`f$`与[froogaloop](/questions/tagged/froogaloop "显示标记为“froogaloop”的问题")相关联，即...

> (...) 一个小型 Javascript 实用程序框架，可帮助解决通过 window.postMessage 使用 Javascript API 来控制 Vimeo 的 Moogaloop 视频播放器所涉及的复杂性。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-11T21:13:24.683

`$F`最初是来自[prototype.js](http://prototypejs.org/)的函数，返回[请求的表单元素的值](https://github.com/sstephenson/prototype/blob/master/src/prototype/dom/form.js#L733)：

```
var $F = Form.Element.Methods.getValue; 
```

从[相关的维基百科文章](https://en.wikipedia.org/wiki/Prototype_JavaScript_Framework)：

> **$F() 函数**- 基于 $() 函数：$F() 函数返回请求的表单元素的值。对于“文本”输入，该函数将返回元素中包含的数据。对于“选择”输入元素，该函数将返回当前选择的值。

插件脚本编写者似乎也为 jQuery 编写了一个版本。[请在此处查看此链接。](http://www.yonkenterprises.com/jQuery/plugins/F.html)

Flash 视频播放器 Flowplayer[还有一个功能`$f`](http://flash.flowplayer.org/documentation/api/flowplayer.html)，它是`flowplayer()`.

# php - 页面刷新后PHP会话变量为空

> ID：14819915
> 
> 赞同：1
> 
> 时间：2013-02-11T20:05:07.140
> 
> 标签：php, mysql

我早些时候写了一篇关于这个的帖子，并得到了很好的回复，纠正了我的一个错误，我认为这解决了问题。不幸的是它没有，而且我的旧帖子很混乱，我将重新发布这个问题，但是有了额外的视角，我已经在这个问题上挣扎了好一阵子。

代码（简化）：

```
<?php
session_start();

if (!$_SESSION["companyid"]) {

header("location: http://www.somepage.com");

}

mysql_connect("localhost", "name", "password") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());

$companyid = $_SESSION["companyid"];

$_SESSION["youtubeurl"] = mysql_real_escape_string($_POST["youtubeurl"]);
$_SESSION["logourl"] = mysql_real_escape_string($_POST["logourl"]);

$_SESSION["plan1head"] = mysql_real_escape_string($_POST["plan1head"]);
$_SESSION["plan1description"] = mysql_real_escape_string($_POST["plan1description"]);
$_SESSION["plan1headline1"] = mysql_real_escape_string($_POST["plan1headline1"]);
$_SESSION["plan1price1"] = mysql_real_escape_string($_POST["plan1price1"]);
$_SESSION["plan1headline2"] = mysql_real_escape_string($_POST["plan1headline2"]);
$_SESSION["plan1price2"] = mysql_real_escape_string($_POST["plan1price2"]);
$_SESSION["plan1price1type"] = mysql_real_escape_string($_POST["plan1price1type"]);
$_SESSION["plan1price2type"] = mysql_real_escape_string($_POST["plan1price2type"]);

if(isset($_POST["submitpreview"])) {

$companyid = $_SESSION["companyid"];

$youtubeurl = $_SESSION["youtubeurl"];
$logourl = $_SESSION["logourl"];
$plan1head = $_SESSION["plan1head"];
$plan1description = $_SESSION["plan1description"];
$plan1headline1 = $_SESSION["plan1headline1"];
$plan1price1 = $_SESSION["plan1price1"];
$plan1headline2 = $_SESSION["plan1headline2"];
$plan1price2 = $_SESSION["plan1price2"];
$plan1price1type = $_SESSION["plan1price1type"];
$plan1price2type = $_SESSION["plan1price2type"];

}

?> 
```

现在，涉及到三个页面/实例：

1.  带有将变量传递到预览页面的表单的页面
2.  预览页面
3.  提交的预览页面（意思是页面被刷新）

一个人有自己的页面，其中包含各种文本字段和下拉菜单（第 1 页）。他们可以更新此页面，当他们填写表单并提交时，这些变量将传递到预览页面。如果他们喜欢预览页面，则确认（提交执行“submitpreview”的表单）。

这是我的问题：表单填写的所有会话变量（除了公司 ID 之外的所有变量，当他们第一次登录时存储在会话中）会立即转储到会话变量中。我已经在预览页面的底部回显了这些会话变量（只是为了确认它们此时不是空的），当我到达预览页面时，它们的内容会被适当地回显。但是，当用户确认更改并设置了提交预览时，突然这些会话变量为空。也就是说，表单变量填充的所有会话变量都是空的。除了 companyid 变量之外，在页面刷新之前很好地回显的会话变量都消失了。由于 companyid 会话变量仍然很好，所以我知道（1）我的服务器上的会话必须正常工作，（2）问题在于将表单变量转储到会话中或检索这些变量的代码。关于为什么会发生这种情况的任何理论？

这让我很沮丧。感谢您在这个问题上对我的耐心，并感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:31:53.597

想通了，以为我会分享。

在这种情况下，当您的会话变量等于刷新页面上的发布变量时，您要小心。当我的预览页面刷新时，帖子变量（因为它们不再存在）变为空，这覆盖了我之前保存的会话变量的信息，进而使这些会话变量也为空。我不得不相应地调整我的代码来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T09:30:50.397

如 Pete_1s 回答中所述，该问题是由 register_globals 引起的。这会导致具有相同名称的不同变量混合在一起。这个：

```
foreach ($_SESSION AS $name -> $value) {
  unset ($_GLOBALS[$name]);
}
foreach ($_POST AS $name -> $value) {
  unset ($_GLOBALS[$name]);
}
foreach ($_GET AS $name -> $value) {
  unset ($_GLOBALS[$name]);
} 
```

如果您无法停用 register_globals，将解决问题。

# linux - 主机上的 gdb 显示堆栈已损坏

> ID：14819916
> 
> 赞同：0
> 
> 时间：2013-02-11T20:05:15.630
> 
> 标签：linux, gdb

我有一个在 x86 目标机器上生成的应用程序核心文件。所有库和二进制文件都被剥离，因此在目标上运行时的回溯非常少，甚至没有。我仍然看到符号名称和回溯。

但是，如果我将核心文件移动到主机并在主机上运行 x86 的 gdb，为它提供 sysroot ，它会抱怨以下内容。

无法在地址 0x104 加载内存

任何想法/建议为什么主机抱怨而目标可以解码回溯？顺便说一句，我所有的代码都是用 -fPIC 编译的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:25:33.537

> 我执行以下操作： gdb-7.2 path_to_biniary ，然后设置 sysroot

试试这个：

```
gdb /path/to/binary
(gdb) set sysroot /path/to/buildroot
(gdb) core /path/to/core_file 
```

在内核已经加载之后设置 sysroot （我相信在您的调用中发生）为时已晚。

# c# - 对象初始化器执行顺序

> ID：14819919
> 
> 赞同：0
> 
> 时间：2013-02-11T20:05:36.373
> 
> 标签：c#, .net, mono

C# 3 引入了对象初始化器。

```
var person = new Person () {
    FirstName = "John",
    LastName = "Doe",
}; 
```

当我设置多个属性时，它们按列出的顺序分配，包括 .NET 和 Mono。只是运气，还是这是标准的，我可以依靠这种行为吗？

# php - 解析错误：语法错误。什么地方出了错？

> ID：14819921
> 
> 赞同：-2
> 
> 时间：2013-02-11T20:05:46.187
> 
> 标签：php, arrays, parsing, loops, syntax

我正在尝试从 email.php 中的数据库循环数组，但出现此错误：

```
Parse error: syntax error, unexpected ';', expecting ')' in /home/xxx/public_html
/email.php on line 62 
```

这是 email.php 中的代码：

```
$allowed_senders = Array(

  $query = "SELECT email FROM members";  // Line 62
  $result = mysql_query($query); 
  while ($row = mysql_fetch_assoc($result)) 
  { 
    $loop_email = $row['email'];
    echo "'".$loop_email."',";   
  }    

); 
```

我不明白出了什么问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:07:55.630

你的语法很*离谱*：

```
 $allowed_senders = array();

  $query = "SELECT email FROM members";  // Line 62
  $result = mysql_query($query); 
  while ($row = mysql_fetch_assoc($result)) 
  { 
    $allowed_senders[] =  $row['email'];
  } 
```

[请不要`mysql_*`在新代码中使用函数](https://stackoverflow.com/questions/12859942)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# python - 如何在 python 中解码谷歌的 JWT 响应？

> ID：14819922
> 
> 赞同：1
> 
> 时间：2013-02-11T20:05:47.010
> 
> 标签：python, google-api, google-api-python-client

我可以通过谷歌使用这个工具对其进行解码：[https ://developers.google.com/commerce/wallet/digital/docs/jwtdecoder](https://developers.google.com/commerce/wallet/digital/docs/jwtdecoder)

这告诉我编码算法是`RS256`，我发现的唯一 python jwt 库不支持该算法：[https ://github.com/progrium/pyjwt](https://github.com/progrium/pyjwt)

任何人都有一个如何解码的例子？

`google-python-api-client`有这样做的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T02:00:12.700

你想要[oauth2client.client.verify_id_token()](http://google-api-python-client.googlecode.com/hg/docs/epy/oauth2client.client-module.html#verify_id_token)。

# java - 在 Spring JMS 监听器中获取用户名

> ID：14819923
> 
> 赞同：0
> 
> 时间：2013-02-11T20:05:48.340
> 
> 标签：java, spring, jms, activemq

两天前我已经发布了一个关于这个主题的问题，但这是一个更复杂的问题。现在，更简单地说：

有没有办法在spring JMS监听器中获取用于连接代理的用户名？我只找到了 MessageListener 和 SessionAwareMessageListener，但我无法从 Session 和 Message 实例中获取此信息（或连接实例）。

我错过了一些明显的东西吗？

我正在使用 ActiveMQ 嵌入式代理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:01:14.553

好的，显而易见的答案是，连接侦听器打开的连接与客户端打开的连接不同......因此，没有获取连接句柄的要点......

愚蠢的我...

PS：我把它留在这里是为了警告后代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T17:43:08.113

怎么样？

```
@JmsListener(destination = "mytopic")
public void processMessage(BytesMessage message) {
    ActiveMQBytesMessage msg = (ActiveMQBytesMessage) message;
    ActiveMQConnection conn = msg.getConnection();
    ConnectionInfo info = conn.getConnectionInfo();
    String username = info.getUserName();
} 
```

# eclipse - 日食自动完成

> ID：14819925
> 
> 赞同：2
> 
> 时间：2013-02-11T20:05:53.810
> 
> 标签：eclipse

我注意到 qtCreator 处理自动完成比 eclipse 好得多。

例如，如果我有一行说`object.firstItem()`并将光标放在`.`and之间`f`，然后删除`first`单词（因此成为`object.|item()`），然后按`ctrl`+`space`并选择`secondItem()`， qtCreator 猜测`object.secondItem();`，而 eclipse 选择`object.firstItem()Item()`。

qtCreator 中很可能还有其他功能，但在 Eclipse 中没有，尽管它是我真正注意到的唯一一个。但是，既然它们都是开源的，为什么不分享所有好的想法呢？我会对 qtCreator 和 eclipse 的所有优秀特性感兴趣。

有没有办法在eclipse中也有这样的行为，通过配置或通过插件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T20:35:06.120

Eclipse 也支持此功能。（或者更具体地说，Eclipse Java 开发工具。）

从建议完成列表中选择项目时，只需按住该`ctrl`键即可在*插入*和*覆盖*完成模式之间切换。

要更改默认行为，请转到*Preferences -> Java -> Editor -> Content Assist*并将最顶部的单选按钮从“Completion inserts”更改为“Completion overwrites”。

# jquery - 从ajax请求返回值到jQuery

> ID：14819926
> 
> 赞同：2
> 
> 时间：2013-02-11T20:05:57.180
> 
> 标签：jquery, ajax

我想知道在使用 jQuery 发出 ajax 请求时应该如何在服务器端处理错误和返回值。

我正在从 ajax 请求进行数据库插入，并且我想将数据库插入主键 ID 返回给 jQuery。但是，如果没有插入任何内容，或者某些验证失败，我想返回一个错误。我通常是这样做的：

这是我的ajax请求：

```
$.ajax({
    type: 'POST',
    url: "test.php",
    data: {stuff: stuff, stuff2: stuff2},
    success: function(response){
        switch( parseInt(response) ) {
            // Display different messages depending on return value
        }
    },
    error: function() {

    }
}); 
```

服务器端：

```
if (some validation) { echo 1; exit; }
if (other validation) { echo 2; exit; }
if (everything went okay) { echo database id; exit; } 
```

您无需成为天才即可理解这是糟糕的编码。在这种情况下，最佳做法是什么？我应该返回一个 JSON 字符串吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:11:14.340

JSON 运行良好。拥有一个带有“结果”键或“错误”键的 JSON 对象。

```
{result: [value]} or {error: [message]} 
```

在您的 jQuery 回调中检查响应对象中的键

```
if("result" in response} {
    // success
} else {
    // error
    alert( (response.error || "ERROR") );
} 
```

**编辑**您当然可以根据需要变得复杂。“Type”、“Value”、“Message”是一些常见的 JSON 键。

```
{
    type: [SUCCESS|WARNING|ERROR]
    value: [expected return value|array of warnings|array of errors]
    message: [some custom message to display to the user]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:24:04.610

处理回调中的错误`success`非常令人惊讶，以至于其他人可能很难维护您的代码。如果您遵循 REST 原则，那么您将希望在来自服务器的响应中返回 4xx 状态代码。例如，返回`400 Bad Request`一般错误，`409 Conflict`如果存在某种资源冲突则返回等。然后，在`error`传递给的函数回调选项中处理错误响应`ajax.`

如果您只需要[HTTP 状态代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1)的更多详细信息，您还*可以*返回一个 JSON 对象（甚至只是一个纯文本字符串），以更详细地解释问题。在我的 REST API 中，我通常只在响应正文中返回错误的纯文本描述，然后将响应 Content-Type 设置为`"text/plain"`.

# javascript - 在 D3.js 中子转换结束后删除父级

> ID：14819928
> 
> 赞同：0
> 
> 时间：2013-02-11T20:06:03.530
> 
> 标签：javascript, animation, d3.js, transition

使用 D3.js，我想对子元素执行转换（动画），并在转换结束时删除父元素。

1.  如何确保孩子过渡结束？
2.  如何删除父元素？在 jQuery 语法中，它将是 $(this).parent().remove();

    li.enter() .append('li') .append('i') .text(function (d) { return d; });

    li.exit() .selectAll('i') .transition() .style('opacity', 0) .remove(); // 这里删除父级...

演示：http: [//jsbin.com/elaxom/1/edit](http://jsbin.com/elaxom/1/edit)

![](../Images/bb8c71e2e617611d85abd1ed79d3fff3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:06:03.530

> 1.  如何确保孩子过渡结束？

我在这里学习：[在转换结束时调用回调](https://stackoverflow.com/questions/10692100/invoke-a-callback-at-the-end-of-a-transition) ，我可以像这样使用 transition.each([type],listener) ： d3.selectAll('i').transition().each('end', function () { ... }); 在每个元素转换“结束”事件上触发回调。

> 2.  如何删除父元素？在 jQuery 中它将是 $(this).parent().remove();

这种语法对我有用：

d3.select(this.parentNode).transition().style('opacity', 0).remove();

这是最后的演示：http: [//jsbin.com/elaxom/4/edit](http://jsbin.com/elaxom/4/edit)

# sas - 尝试在 SAS 中创建具有 If-Then 条件的宏

> ID：14819932
> 
> 赞同：0
> 
> 时间：2013-02-11T20:06:15.377
> 
> 标签：sas, sas-macro

这是我用来创建格式的代码.....

```
 libname myfmt "&FBRMrootPath./Formats";
%macro Create_Macro(DSN,Label,Start,fmtname,type);
options mprint mlogic symbolgen;
%If &type='n' %then %do;
  proc sort data=&DSN out=Out; by &Label;run;
  Data ctrl;
     set Out(rename=(&Label=label &Start=start )) end=last;
     retain fmtname &fmtname type &type;

  %If last %then %do;
      hlo='O';
      label='*ERROR';
      output;
  %End;
%End;

%Else  %do;
     proc sort data=&DSN out=Out; by &Start;run;
    Data ctrl;
     set Out(rename=(&Start=label &Label=start )) end=last;
     retain fmtname &fmtname type &type;
     output;
    %If last %then %do;
      hlo='O';
      label='*ERROR';
      output;
      %End;
%End;

proc format library=myfmt cntlin=ctrl;

%Mend Create_Macro;

%Create_Macro(SSIN.prd,prd_nm,prd_id,'prd_test','n');
/*%Create_Macro(SSIN.prd,prd_id,prd_nm,'prd_testc','c');*/ 
```

我收到以下错误...代码看起来不错，但我不知道为什么会出现错误...任何帮助？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:28:54.867

不完全确定您在做什么，但错误消息可能是因为您将`macro`代码与`data step`代码混合在一起。尝试改变这个：

```
if last then do;
   hlo='O';
   label='*ERROR';
   output;
end; 
```

换句话说，去掉与号（表示宏变量引用）。并且还要确保`run;`在每个数据步骤的末尾和`PROC FORMAT`调用之后添加一个语句。

# python - 为什么在尝试从 Documents 文件夹打开 Django 文件时，python 终端中的语法无效。

> ID：14819933
> 
> 赞同：-2
> 
> 时间：2013-02-11T20:06:15.703
> 
> 标签：python, django, terminal

我正在运行 Python 2.7.3，我刚刚安装了 django 1.4.3。我正在尝试打开文件 cd ~/Documents/Projects 但我收到一个错误，总共读取... cd ~/Documents/Projects File "", line 1 cd ~/Documents/Projects ^ SyntaxError: invalid syntax

这与 PATH 目录被搞砸有关吗？我不知道我是新手。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:18:41.537

cd 是一个 shell 命令，要在 python 中更改目录，您需要

```
import os
...
os.chdir('path/to/directory')
... 
```

`...`你的代码在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:08:09.750

您正在尝试*在*Python 中运行 shell 命令。Python 不知道是什么`cd`。您需要从一个简单的命令提示符中执行此操作，其中您有一个类似于`C:\whatever\> _`.

# javascript - HTML5 视频背景和过渡

> ID：14819938
> 
> 赞同：0
> 
> 时间：2013-02-11T20:06:38.543
> 
> 标签：javascript, jquery, html, video

我正在为我的一个朋友制作一个网站，他想要一个非常复杂的网站。菜单点之间有视频，内容显示在最后一帧。所以我想我可以使用视频（大约 2 秒长）作为背景，并在两秒后淡入内容。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:21:40.197

我要做的是将内容作为隐藏的 div。当您播放视频时，将一个 onended 事件附加到它并使用它来隐藏视频元素并显示内容 - 这样它们总是保持同步 - 例如看到类似这样的内容[添加一个 div 以在视频播放后替换视频](https://stackoverflow.com/questions/14382551/add-a-div-to-replace-video-after-video-plays-through/14387179#14387179)

# java - 试图将 ivy 工件转换为 maven - pom 缺少工件异常，即使它在那里

> ID：14819942
> 
> 赞同：0
> 
> 时间：2013-02-11T20:06:46.047
> 
> 标签：java, maven, ant, ivy, pom.xml

不确定我是否以正确的方式进行此操作，但我有一些工件正在尝试使用 ivy ant 任务转换为 maven 并推送到我的 maven 存储库中。

有问题的组件是 mystuff.services.common。

首先我做pom...

```
 <ivy:makepom ivyfile="${ivy.lib.dir}/ivy/cache/myorg/mystuff.services.common/ivy-mystuff.services.common.xml" pomfile="${ivy.lib.dir}/ivy/cache/myorg/mystuff.services.common/poms/mystuff.services.common.pom">
        <mapping conf="default" scope="compile"/>
        <mapping conf="runtime" scope="runtime"/>
    </ivy:makepom> 
```

然后有点骇人听闻 - 我使用 xml 任务在 ivy 文件中插入了一个工件元素。这工作正常...

```
 <xmltask source="${ivy.lib.dir}/ivy/cache/myorg/mystuff.services.common/ivy-${resolved.revision}.xml" dest="${ivy.lib.dir}/ivy/cache/myorg/mystuff.services.common/ivy-${resolved.revision}.xml">
        <insert path="/ivy-module/publications" >
            <![CDATA[
               <artifact name="mystuff.services.common" type="pom"/>
            ]]>
        </insert>
    </xmltask> 
```

然后我根据我看到的有关如何执行此操作的各种文档解决/交付/发布。

```
 <ivy:resolve file="${ivy.lib.dir}/ivy/cache/myorg/mystuff.services.common/ivy-${resolved.revision}.xml"/>
    <!--<echoproperties/>-->
    <ivy:deliver conf="*" delivertarget="recursive-deliver"/>
    <ivy:publish resolver="myrepo-publish" publishivy="false" overwrite="true">
        <artifacts pattern="lib/myorg/[module]/[type]s/[artifact].[ext]"/>
    </ivy:publish> 
```

我得到的错误是：

```
build.xml:235: impossible to publish artifacts for
  myorg#mystuff.services.common;1.0.1: java.io.IOException: missing artifact
  myorg#mystuff.services.common;1.0.1!mystuff.services.common.pom 
```

如果我从 ivy 文件中的工件中省略了 pom，其他工件就可以正常发布。

我究竟做错了什么？

这是插入工件的 pom 条目**后**ivy 文件的样子

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../ivy-doc.xsl"?>
<ivy-module version="1.0">

  <info organisation="myorg" module="mystuff.services.common" revision="1.0.1" status="integration" publication="20130206204156"/>

  <configurations>
    <conf name="default"/>
    <conf name="compile" extends="default"/>
  </configurations>

  <publications>
    <artifact name="services.common" type="jar" conf="compile"/>
    <artifact name="services.common~test" type="jar" conf="compile"/>

    <artifact name="services.common" type="javadoc-zip" ext="zip" conf="compile"/>
    <artifact name="services.common~test" type="javadoc-zip" ext="zip" conf="compile"/>

    <artifact name="services.common" type="src-zip" ext="zip" conf="compile"/>
    <artifact name="services.common~test" type="src-zip" ext="zip" conf="compile"/>

    <artifact name="com.myorg.mystuffservices.common" type="osgi-module" ext="jar" conf="compile"/>
    <artifact name="services.common" type="pom"/>
  </publications>

  <dependencies>
    <dependency org="org.testng" name="testng" rev="5.11" conf="compile->compile-15"/>
  </dependencies>

</ivy-module> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:12:12.433

您的发布没有找到由“makepom”任务生成的 pom 的工件模式。

更改位置或将额外的工件标签添加到您的发布任务：

```
<ivy:publish resolver="myrepo-publish" publishivy="false" overwrite="true">
    <artifacts pattern="lib/myorg/[module]/[type]s/[artifact].[ext]"/>
    <artifacts pattern="${ivy.lib.dir}/ivy/cache/myorg/mystuff.services.common/poms/mystuff.services.common.pom"/>
</ivy:publish> 
```

我也不明白你为什么要在常春藤文件中插入 POM 条目。你为什么不在你的出版物部分列出呢？

有关详细示例，请参见：

*   [如何使用 ivy 和 nexus 发布 3rdparty 工件](https://stackoverflow.com/questions/5111831/how-to-publish-3rdparty-artifacts-with-ivy-and-nexus/5115447#5115447)

# c# - 如何使用 C# Forms 更改中心旋转？

> ID：14819947
> 
> 赞同：0
> 
> 时间：2013-02-11T20:07:04.940
> 
> 标签：c#, winforms, rotation

如何在 Winforms 中创建旋转中心？

我的意思是，当我查看网络时，我发现一些具有旋转半径的指南，因此它创建了一些圆形运动，但是我只想在某个点上旋转图像而没有任何半径旋转。我怎么能做这样的事情？

# javascript - 每当定义 var 时运行函数

> ID：14819949
> 
> 赞同：1
> 
> 时间：2013-02-11T20:07:11.580
> 
> 标签：javascript, eval, user-input, user-defined-functions

我正在开发一个包含大量用户生成代码的项目（受此视频[http://vimeo.com/36579366](http://vimeo.com/36579366)启发）。我想要做的是 eval() 一块用户输入代码，并在每次定义 var 时运行一个函数，或者乘以 2 个变量，或者发生其他一些操作。

有没有办法在 JS 中做到这一点？

显然，我可以在该字段中搜索“var ...”，然后阅读接下来会发生什么，然后对这些信息做任何我需要做的事情，但是，出于多种原因，我宁愿“合法地”在哪里做我实际上对正在执行的事情做出反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:16:36.807

您可以在某些版本的 Javascript（也称为代理）中使用[Intercession API 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Proxy)由此，您可以通过编写自己的代码来重新定义对象发生变异时会发生什么。

如果这不可能，但您事先知道变量的名称，您可以使用[setter、getter](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Working_with_Objects#Defining_getters_and_setters)或[Object.watch](https://gist.github.com/eligrey/384583)的 polyfill来实现相同的效果。

如果您不知道变量名称是什么，我建议您通过像[Esprima](http://esprima.org/)这样的解析器运行用户定义的 Javascript以获得 AST。当您看到正在定义（或提升）的变量时，您可以将任意语法直接注入 AST，然后编译回工作代码。您将寻找带有`"type": "VariableDeclaration"`.

# ios - Xcode 文件签入后 Xcode 代码签名身份更改，然后从 SVN 签出

> ID：14819954
> 
> 赞同：0
> 
> 时间：2013-02-11T20:07:33.360
> 
> 标签：ios, xcode

在 Xcode 中，如果我将代码签名身份设置为某个配置文件，我们将其称为 A，然后将项目文件签入源代码控制 (SVN)。然后，如果我将项目签出到另一台机器上，那么我发现在 XCode 中设置的配置文件已从 A 更改为 B。所以似乎 Xcode 本身正在选择正在使用的配置文件，而不是我在源代码已签入。我必须手动将其更改为应有的内容。

如果我在机器 X 上设置配置文件然后在机器 Y 上检查它，就会发生这种情况，反之亦然。

XCode 是否存储了某些本地文件中使用的配置文件，该文件不会自动共享，而不是全局文件（如方案，您必须在其中显式共享它们）。

为什么 XCode 不使用在项目签入源代码管理时设置的配置文件？

我之前没有遇到过这个问题，我也更新到了最新的Xcode，我不知道这是相关的还是偶然的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:40:10.140

Xcode 在您的钥匙串中查找选定的代码签名身份。确保您使用的每个帐户中的钥匙串具有相同的证书/密钥对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:42:59.613

您是否在项目设置中选择了“自动配置文件选择器”。如果是，那么 XCode 将自动选择配置文件。有时它可能不是您想要的正确配置文件或配置文件。验证这一点。

# knockout.js - Knockout.js：多个绑定（相关或不相关）数据绑定语法

> ID：14819961
> 
> 赞同：0
> 
> 时间：2013-02-11T20:07:52.330
> 
> 标签：knockout.js

我是 Knockout.js 的初学者，我正在尝试使用自定义绑定，但我不清楚。假设我实现了 2 个名为“color”和“innerText”的自定义绑定。第一个（“颜色”）将边框颜色应用于元素，第二个设置元素的内部文本（让我们暂时忘记内置“文本”绑定......我知道它存在）。在我的自定义绑定 innerText 中，我可以接受**用于设置文本颜色**的“颜色”选项。现在如果我写：

```
<div data-bind="innerText: 'Hi everybody', color: 'Red'"></div> 
```

Knockout 如何知道如何处理“颜色”？我在我的自定义绑定“innerText”中使用颜色作为选项，我使用 allBindingsAccessor 获取值，但是淘汰赛如何知道它是相关绑定而不是另一个绑定，以便按顺序应用边框颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:23:54.137

在您的情况下，如果有另一个名为 的绑定`color`，那么它将使用您传递给它的值执行，即使您在`innerText`绑定中使用它也是通过`allBindingsAccessor`.

因此，Knockout 没有做任何特殊的事情，除了如果您指定一个不存在的 bindingHandler 不会引发错误，因为您可能只是将它用作另一个绑定的选项。

您可以使用的另一种模式是将选项对象传递给您的自定义绑定，例如：

`data-bind="innerText: { data: 'Hi everybody', color: Red }"`

# javascript - 如何在引导程序上触发下拉按钮模糊/关闭事件？

> ID：14819965
> 
> 赞同：0
> 
> 时间：2013-02-11T20:08:01.280
> 
> 标签：javascript, jquery, twitter-bootstrap

我试图在按钮组关闭后触发一个事件（以捕获该按钮组内的多个更改）。

```
<div class="btn-group">

<span id="experiment-filter-group" class="btn-group pull-right open">
<button type="button" style="width:auto" class="dropdown-toggle btn btn-small" data-toggle="dropdown">Click Here <b class="caret"></b></button>
<ul class="dropdown-menu" style="max-height: 400px; overflow-y: auto; overflow-x: hidden;">
      <li class="active"><a href="javascript:void(0);" style="padding:0;"><label style="margin:0;padding:3px 20px 3px 20px;width:100%;height:100%;cursor:pointer;"><input style="margin-bottom:5px;" type="checkbox" value="0"> X Option</label></a></li>
      <li><a href="javascript:void(0);" style="padding:0;"><label style="margin:0;padding:3px 20px 3px 20px;width:100%;height:100%;cursor:pointer;"><input style="margin-bottom:5px;" type="checkbox" value="1"> Y Option </label></a></li>
</ul>
</span>

</div>

<script>
    $('.btn-group').on("closed", function(e){
            console.log("closed");
        });
</script> 
```

这不工作..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:27:31.007

关闭事件没有 twitter 引导下拉菜单，但您可以执行以下操作：

```
$(document).ready(function () {

    $('#btn-group').data('open', false);

    $('#dropdown-button').click(function () {
        if ($('#btn-group').data('open')) {
            $('#btn-group').data('open', false);
            onCloseEvent();
        } else $('#btn-group').data('open', true);
    });

    $(document).click(function () {
        if ($('#btn-group').data('open')) {
            $('#btn-group').data('open', false);
            onCloseEvent();
        }
    });

    function onCloseEvent() {
        alert("close");
    }
}); 
```

[http://jsfiddle.net/Barbarah/QYvJh/3/](http://jsfiddle.net/Barbarah/QYvJh/3/)

# javascript - Javascript 翻转使正文文本出现奇怪的闪烁 - 如何修复它？

> ID：14819972
> 
> 赞同：0
> 
> 时间：2013-02-11T20:08:32.260
> 
> 标签：javascript, flicker, rollover, rollover-effect

我目前正在为一个网站工作，他们希望我在主页上添加一个翻转效果 (vps.futureaccess.ca/~kraun)。所以...我找到了一个不错的 Javascript 代码并将其插入 PHP，但是当我在这 3 个按钮中的一个上移动鼠标时，我注意到正文文本上有一个奇怪的“闪烁”。我想知道你是否知道如何解决这个问题？我不是 javascript 专家。

这是javascript代码：

```
<script type="text/javascript">         
$(document).ready(function(){

    //Set opacity on each span to 0%
    $(".rollover").css({'opacity':'0'});

    $('.img_list a').hover(
        function() {
            $(this).find('.rollover').stop().fadeTo(700, 1);
        },
        function() {
            $(this).find('.rollover').stop().fadeTo(500, 0);
        }
    )

});     
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:47:45.717

不要淡化到零（这使它消失），淡化到`0.1`

# javascript - 以全尺寸打开 prettyPhoto onload

> ID：14819973
> 
> 赞同：0
> 
> 时间：2013-02-11T20:08:36.730
> 
> 标签：javascript, jquery, onload, prettyphoto

我有这段代码可以全尺寸打开 prettyPhoto。

```
 <script type="text/javascript" charset="utf-8">
            $(document).ready(function(){
$.prettyPhoto.open('url','Title','Description');
    });
    </script> 
```

如果我想更改 prettyPhoto 弹出窗口的默认宽度和高度，我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:21:32.687

```
$.prettyPhoto({
  default_width: 500,
  default_height: 344
}); 
```

# c# - 在运行时获取未知类型的默认值

> ID：14819974
> 
> 赞同：0
> 
> 时间：2013-02-11T20:08:37.497
> 
> 标签：c#, reflection, types, type-conversion, type-coercion

我正在使用反射来获取对象的所有属性。然后，我需要查看这些属性中的任何一个值是否是它们碰巧是任何类型的默认值。以下是我当前的代码。它抱怨找不到命名空间或类型。这让我相信它与 c# 如何进行隐式类型强制有关。由于我在运行时获取类型，因此它不知道如何比较它或者对此并不十分清楚。

我希望避免对传入类型的名称进行 switch case 比较，但现在这看起来是我唯一的选择，除非 StackOverflow 上的杰出人士可以引导我朝着正确的方向前进。

```
 private bool testPropertyAttribute(PropertyInfo prop)
    {
        dynamic value = prop.GetValue(DataObject, null);
        Type type = prop.PropertyType;

        /* Test to see if the value is the defult of its type */
        return (value == default(prop.PropertyType) 

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:17:26.853

`==`for`object`总是意味着：引用相等。作为参考，默认是 always `null`，所以如果`!prop.PropertyType.IsValueType`, 那么你只需要`null`检查一下。对于值类型，***您将使用 boxing***。所以引用相等总是会报告**false**，除非它们都是`Nullable<T>`for some `T`，并且都是空的。但是，要获得“默认”值类型 ( `prop.PropertyType.IsValueType`)，您可以使用`Activator.CreateInstance(prop.PropertyType)`. 请记住，这`==`不会**在**这里做你想做的事。`Equals(x,y)` *可能会*更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:16:37.747

您可以做到这一点，但不能依赖 == 运算符来完成工作。您需要使用 .Equals 或 object.ReferenceEquals 进行比较。

# tomcat - 如何将非安全 cookie 转换为安全 cookie

> ID：14819975
> 
> 赞同：1
> 
> 时间：2013-02-11T20:08:38.907
> 
> 标签：tomcat, https, spring-security, jsessionid

我有以下情况：如果我使用 HTTPs 访问我的 Web 应用程序，tomcat 会创建一个安全的 JSESSIONID cookie - 这是正常的，所以到目前为止没有任何问题。

如果我访问 http 然后 tomcat 会创建一个不安全的 JSESSIONID cookie，这也是正常的。

我的问题是，当我使用 HTTP 访问我的 Web 应用程序时，会创建 cookie，然后 Spring Security (security:intercept-url pattern="/login.action" requires-channel="https"/>) 将我发送到HTTPS 连接。问题是 cookie 仍然是不安全的。

你知道有什么办法可以解决吗？有没有办法使用 Spring Security 重新创建 cookie？

任何帮助将不胜感激！

问候，用户1532449

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:15:16.900

使用 httpOnly 和 secure=true 保护 Tomcat 中的会话 cookie

[https://geekflare.com/secure-cookie-flag-in-tomcat/](https://geekflare.com/secure-cookie-flag-in-tomcat/)

# c#-4.0 - 在后面的代码中将 ItemTemplate 应用于 LongListSelector

> ID：14819976
> 
> 赞同：0
> 
> 时间：2013-02-11T20:08:41.910
> 
> 标签：c#-4.0, windows-phone-8, winrt-xaml

我已经为页面资源中的 LongListSelector 中的项目定义了一个 DataTemplate，现在我想将此 DataTemplate 应用于代码隐藏文件中的 LongListSelector。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:14:00.647

这很简单：

```
'NameOfList'.ItemTemplate = this.Resources["'NameOfDataTemplate'"] as DataTemplate; 
```

# guard - 如何将输入从一名警卫“管道”到另一名警卫？

> ID：14819977
> 
> 赞同：0
> 
> 时间：2013-02-11T20:08:52.673
> 
> 标签：guard

我正在尝试警卫，我想使用 haml 编写车把模板。有没有办法将guard-haml的输出“管道”到guard-handlebars（即有2个警卫在同一个文件上操作）？或者，是否有可以同时执行这两个步骤的保护插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:04:08.807

[使用guard-shell](https://github.com/guard/guard-shell)拼凑出一个解决方案。根本问题是guard-handlebars 期望它的输入文件以“.handlebars”结尾，并且没有配置选项可以改变它。我没有修补guard-handlebars，而是在guard-haml处理完文件后简单地使用guard-shell重命名文件。这是我的 Guardfile 中的结果代码：

```
guard 'haml', :input => 'src/templates', :output => 'public/js/templates/html' do
    watch %r{^.+(\.hbs\.haml)$}
end

guard :shell do
  watch %r{^public/js/templates/html/.+(\.hbs\.html)$} do |m|
    path = m[0]
    new_path = path.gsub(/\.hbs\.html$/, '.handlebars')
    `mv #{path} #{new_path}`
  end
end

guard 'handlebars', :input => 'public/js/templates/html', :output => 'public/js/templates' do
  watch %r{^.+(\.handlebars)$}
end 
```

# xpages - 从 xpage 按钮调用代理时出错

> ID：14819983
> 
> 赞同：1
> 
> 时间：2013-02-11T20:09:23.527
> 
> 标签：xpages

尝试从 xpages 按钮单击调用代理时收到错误消息：错误如下

执行 JavaScript 动作表达式时出错脚本解释器错误，line=2，col=7：[TypeError] 调用方法 NotesAgent.runWithDocumentContext(lotus.domino.local.Document) null 发生异常

JavaScript 代码

```
var agent=database.getAgent("xpCreateNewCopy");
agent.runWithDocumentContext(currentDocument.getDocument()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:52:53.957

我错过了一个重要的设置，以网络用户身份运行。问题解决了。

# python - Python multiprocessing builtins.IOError：[Errno 22] 无效参数

> ID：14819987
> 
> 赞同：2
> 
> 时间：2013-02-11T20:09:33.327
> 
> 标签：python, multiprocessing, ioerror

不知道为什么会出现这个错误。我四处寻找无济于事。我决定尝试使用多处理模块让我的脚本运行多线程，如果我删除该代码，脚本运行良好。

所以我运行了调试器，它也没有遇到多线程代码的任何错误，这似乎有点奇怪。但是当我尝试正常运行脚本时，它会在 3.2.3 下打印：

```
Python 3.2.3 (default, Apr 11 2012, 07:12:16) [MSC v.1500 64 bit (AMD64)]
Type "help", "copyright", "credits" or "license" for more information.
[evaluate scratch.py]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "C:\Python32\Lib\multiprocessing\forking.py", line 369, in main
    self = load(from_parent)
AttributeError: 'module' object has no attribute 'search_letters_in_words'
Traceback (most recent call last):
  File "C:\Program Files (x86)\Wing IDE 4.1\src\debug\tserver\_sandbox.py", line 122, in <module>
  File "C:\Python32\Lib\multiprocessing\process.py", line 132, in start
    self._popen = Popen(self)
  File "C:\Python32\Lib\multiprocessing\forking.py", line 269, in __init__
    to_child.close()
builtins.IOError: [Errno 22] Invalid argument 
```

编辑：我切换到 3.3 看看会发生什么，它不一致地始终抛出这两个回溯之一：

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AMD64)]
Type "help", "copyright", "credits" or "license" for more information.
[evaluate scratch.py]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "C:\Python33\Lib\multiprocessing\forking.py", line 344, in main
    self = load(from_parent)
AttributeError: 'module' object has no attribute 'search_letters_in_words'
Traceback (most recent call last):
  File "C:\Program Files (x86)\Wing IDE 4.1\src\debug\tserver\_sandbox.py", line 122, in <module>
  File "C:\Python33\Lib\multiprocessing\process.py", line 111, in start
    self._popen = Popen(self)
  File "C:\Python33\Lib\multiprocessing\forking.py", line 243, in __init__
    dump(process_obj, to_child, HIGHEST_PROTOCOL)
  File "C:\Python33\Lib\multiprocessing\forking.py", line 160, in dump
    ForkingPickler(file, protocol).dump(obj)
builtins.BrokenPipeError: [Errno 32] Broken pipe

Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AMD64)]
Type "help", "copyright", "credits" or "license" for more information.
[evaluate scratch.py]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "C:\Python33\Lib\multiprocessing\forking.py", line 344, in main
    self = load(from_parent)
AttributeError: 'module' object has no attribute 'search_letters_in_words' 
```

编辑 #2 从命令行调用时添加了回溯：

```
D:\Python\PythonRepo>scratch.py > d:\download\error.txt
Traceback (most recent call last):
  File "D:\Python\PythonRepo\scratch.py", line 122, in <module>
    thread.start()
  File "C:\Python32\Lib\multiprocessing\process.py", line 131, in start
    from .forking import Popen
  File "C:\Python32\Lib\multiprocessing\forking.py", line 180, in <module>
    import _subprocess
ImportError: No module named '_subprocess' 
```

这是我到目前为止编写的多处理代码。它可能是（哈哈，我在开玩笑，可能是！）有问题，但我不确定有什么问题，因为它看起来是正确的（不是总是这样吗？）。

```
wordList = pickle.load( open( r'd:\download\allwords.pickle', 'rb')) #a list
combos = make_letter_combinations(3) # a list
split = split_list_multi(combos) #2 item tuple with a dict and a number
if __name__ == '__main__':
    multiprocessing.freeze_support()
    jobs = []
    for num in range(split[1]):
        listLetters = split[0][str(num)] #a list
        thread = multiprocessing.Process(target=search_letters_in_words, args=(listLetters,wordList))
        jobs.append(thread)
        thread.start()
    for j in jobs:
        j.join() 
```

编辑：这是 search_letters_in_words_ 功能：

```
def search_letters_in_words(listOfLetters,wordlist):
    results = {}
    for letters in listOfLetters:
        results[letters] = [i for i in wordlist if letters in i]
    return results 
```

如果有人能指出我做错了什么，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:15:13.113

尝试从命令行运行脚本，而不是通过 Wing IDE：

```
python scripy.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T12:54:47.770

我收到错误代码的原因不同（使用 Py 3 和 Win 7）。从带有引号的 .ini 文件中读取文件名会破坏为 csv.DictWriter 函数打开的文件。删除“”修复它：

```
...
[CSVFILE]
#CfgCsvNamePattern="C:\\temp\\PenSim-%%s.csv"
CfgCsvNamePattern=C:/temp/PenSim%%s.csv
... 
```

# linq - 可枚举：“物化”是官方术语吗？

> ID：14819990
> 
> 赞同：1
> 
> 时间：2013-02-11T20:09:51.327
> 
> 标签：linq, extension-methods, enumerable, deferred-execution

对于这样的代码，“物化”是一个好名字，还是有更好的（和官方的）名字？

```
enumerable as ICollection<T> ?? enumerable .ToArray() 
```

编辑：我澄清了代码（及其目的）

```
// or "MaterializeIfNecessary"
public static IEnumerable<T> Materialize<T>(this IEnumerable<T> source)
{
    // if you use code analysis tools like resharper, you may have to return a 
    // different type to turn off warnings - even a placeholder interface like 
    // IMaterializedEnumerable<T> : IEnumerable<T> { } 

    if (source == null) return null;

    return source as ICollection<T> ?? source.ToArray();
} 
```

问题：

```
static void Save(IEnumerable<string> strings)
{
    // The following code is Resharper suggested solution to 
    // "Possible multiple enumeration of IEnumerable" warning
    // ( http://confluence.jetbrains.com/display/ReSharper/Possible+multiple+enumeration+of+IEnumerable ):
    strings = strings as string[] ?? strings.ToArray(); // you're not calling 
                                                        // ToArray because you 
                                                        // need an array, here

    if (strings.Any(s => s.Length >= 255)) throw new ArgumentException();

    File.AppendAllLines("my.path.txt", strings);
} 
```

使用扩展方法，第一行应该更具声明性：

```
strings = strings.MaterializeIfNecessary(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:23:13.800

我会调用它`ToReadOnlyCollection`。它提供了有关该函数实际在做什么的更多信息。
至于物化源，它似乎只有在`ToArray()`被调用时才会这样做。（仅包装源不会实现它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:29:01.527

正如@Magnus 已经建议的那样，`ToReadOnlyCollection`这是您方法的一个很好的描述性名称。我也觉得`AsReadOnlyCollection`这个名字不太好。通常`AsXXX`方法不会隐藏或包装源。此类方法只是将 source 作为已由 source 实现的接口之一返回。您可以使用这种方法而不是强制转换。

并且`Materialize`完全没有说明方法的意图。这是什么意思？我将能够用手触摸我的序列吗？会印在纸上吗？保存到文件？

是的，我也不明白为什么你需要将`IEnumerable`已经只读的文件转换为`ReadOnlyCollection`.

# jquery - 与容器 bg-image 成比例的 div 层中的文本缩放

> ID：14819993
> 
> 赞同：0
> 
> 时间：2013-02-11T20:10:03.253
> 
> 标签：jquery, html, css

以下问题：我有一个包含很多 div 的滚动页面。每个 div 都有一个 bg-image 和另一个带有文本的 div。

```
 <div id="intro">
            <h1>blabla</h1>
            <p id="text1_1"> another bla bla </p>
            <p id="text1_2"> and again bla </p>
 </div> 
```

我使用 css3 处理 bg-image 缩放`background-size: cover;`，当我缩放浏览器窗口时，文本不会停留在同一位置，并且不会与 bg-image 成比例地调整大小。最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:15:22.890

不幸的是，没有 CSS only 方法可以解决您的问题。有一个名为[FitText](http://fittextjs.com/)的 jQuery 插件可以为您解决问题。

问题是要让它工作，font-size 属性应该是灵活的，而现在不是。仅使用 CSS 解决此问题的唯一方法（如果您正在寻找这样的解决方案）是进行媒体查询并减小较小视口中的字体大小，但这只会使文本自适应。

# sql - 获取基本的 SQL Server 表结构信息

> ID：14819994
> 
> 赞同：27
> 
> 时间：2013-02-11T20:10:06.167
> 
> 标签：sql, sql-server

我可以通过以下方式获取 SQL Server 数据库中的列数：

```
SELECT COUNT(*)
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_name = 'Address' 
```

但是有什么方法（对于未知数量的列）我可以获得每列的名称、数据类型和长度吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-11T20:13:54.507

而不是使用`count(*)`您可以`SELECT *`，您将返回您想要的所有详细信息，包括`data_type`：

```
SELECT *
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_name = 'Address' 
```

MSDN 文档[`INFORMATION_SCHEMA.COLUMNS`](http://msdn.microsoft.com/en-us/library/ms188348.aspx)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-11T20:14:16.173

[sp_help](http://msdn.microsoft.com/en-us/library/ms187335%28v=sql.90%29.aspx)将为您提供有关表的一大堆信息，包括列、键和约束。例如，运行

```
exec sp_help 'Address' 
```

将为您提供有关地址的信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T20:20:15.953

[名称和数据类型：](https://github.com/tmmtsmith/SQLServer/blob/master/FindColumnTypes.sql)

```
USE OurDatabaseName
GO

SELECT 
    sc.name AS [Columne Name], 
    st1.name AS [User Type],
    st2.name AS [Base Type]
FROM dbo.syscolumns sc
    INNER JOIN dbo.systypes st1 ON st1.xusertype = sc.xusertype
    INNER JOIN dbo.systypes st2 ON st2.xusertype = sc.xtype
-- STEP TWO: Change OurTableName to the table name
WHERE sc.id = OBJECT_ID('OurTableName')
ORDER BY sc.colid 
```

或者：

```
SELECT COLUMN_NAME AS ColumnName, DATA_TYPE AS DataType, CHARACTER_MAXIMUM_LENGTH AS CharacterLength
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'OurTableName' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-22T06:00:09.007

在查询编辑器中写入表名选择名称并按Alt+F1，它将带来该表的所有信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-18T10:18:08.397

对于总列信息，请使用以下语法：使用 "DBName" go Exec SP_Columns "TableName"

对于总表信息，请使用以下语法：使用 "DBName" go Exec SP_help "Table Name"

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-07-06T09:30:05.877

您可以使用以下功能：

```
sp_help TableName
sp_helptext ProcedureName 
```

# java - 在 JFrame 打开时禁用其他操作

> ID：14819997
> 
> 赞同：0
> 
> 时间：2013-02-11T20:10:36.083
> 
> 标签：java, swing, jframe, modal-dialog, jdialog

我想知道在 Java 中打开 JFrame 时是否可以禁用所有其他操作。

像这样？

![在此处输入图像描述](../Images/582dd4499f4b83909e6050151279cb8b.png)

有没有简单的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:11:37.873

这已经被问过很多次了，答案总是一样的：使用模态 JDialog 或 JOptionPane（它是模态 JDialog 的一个版本），而不是另一个 JFrame。

例如，请[在此处](https://stackoverflow.com/questions/9627078/disable-jframe-when-a-new-jframe-is-opened?rq=1)查看 mKorbel 的答案。

# clojure - 如何将双参数函数应用于序列？

> ID：14819998
> 
> 赞同：5
> 
> 时间：2013-02-11T20:10:38.343
> 
> 标签：clojure

我有一个序列：

```
[a b c ...] 
```

和一个功能`(f x y)`。我想得到这个：

```
(f c (f b (f a 1))) 
```

等等..如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T21:08:00.153

减少，稍作调整：

```
(reduce #(f %2 %1) 1 [a b c]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:07:47.213

```
(reduce (fn [acc x] (f x acc)) 1 [a b c d]) 
```

# sql-server-2008 - 如何优化 SSIS 包中的 Upsert（更新和插入）操作？

> ID：14819999
> 
> 赞同：8
> 
> 时间：2013-02-11T20:10:40.597
> 
> 标签：sql-server-2008, ssis

我不是 DBA，但我确实在一家小公司担任 IT 人员。我必须将数据库从登台复制到生产。我已经创建了一个 SSIS 包来执行此操作，但它需要几个小时才能运行。这也不是一个大型数据仓库类型的项目，它是一个非常简单的`Upsert`. 我假设我是我设计它的薄弱环节。

这是我的程序：

1.  截断临时表 ( `EXECUTE SQL TASK`)
2.  将开发表中的数据拉入暂存 ( `Data Flow Task`)
3.  运行数据流任务
    1.  *`OLE DB Source`*
    2.  *`Conditional Split Transformation`*（使用条件`[!]ISNULL(is_new_flag)`：）
    3.  如果新插入，如果现有更新

数据流任务被模仿了几次以更改表/值，但流程是相同的。我已经阅读了几篇关于 OLE DB 组件缓慢更新缓慢的内容，并尝试了一些事情但没有让它运行得非常快。

我不确定要提供哪些其他细节，但我可以提供任何要求的信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T21:47:25.390

### 使用批量操作插入或更新的 SSIS 2008 R2 示例包：

这是一个示例包*`SSIS 2008 R2`*，说明了如何使用批处理操作在两个数据库之间执行插入、更新。

*   使用*`OLE DB Command`*会减慢包的更新操作，因为它不*执行*批处理操作。每行都单独更新。

该示例使用两个数据库，即*`Source`*和*`Destination`*。在我的示例中，两个数据库都驻留在服务器上，但逻辑仍然可以应用于驻留在不同服务器和位置的数据库。

*`dbo.SourceTable`*我在我的源数据库中创建了一个名为的表*`Source`*。

```
CREATE TABLE [dbo].[SourceTable](
    [RowNumber] [bigint] NOT NULL,
    [CreatedOn] [datetime] NOT NULL,
    [ModifiedOn] [datetime] NOT NULL,
    [IsActive] [bit] NULL
) 
```

此外，在我的目标数据库中创建了两个名为*`dbo.DestinationTable`*和的表。*`dbo.StagingTable`**`Destination`*

```
CREATE TABLE [dbo].[DestinationTable](
    [RowNumber] [bigint] NOT NULL,
    [CreatedOn] [datetime] NOT NULL,
    [ModifiedOn] [datetime] NOT NULL
) 
GO

CREATE TABLE [dbo].[StagingTable](
    [RowNumber] [bigint] NOT NULL,
    [CreatedOn] [datetime] NOT NULL,
    [ModifiedOn] [datetime] NOT NULL
) 
GO 
```

*`dbo.SourceTable`*将表中具有唯一值的大约 140 万行插入到`RowNumber`列中。桌子*`dbo.DestinationTable`*一*`dbo.StagingTable`*开始都是空的。表中的所有行都*`dbo.SourceTable`*将标志**`IsActive`**设置为 false。

![行数 - 1](../Images/e3532969ae7852cc91716ba878fc9afe.png)

创建了一个带有两个 OLE DB 连接管理器的 SSIS 包，每个连接管理器都连接到`Source`数据库`Destination`。设计控制流程如下图：

*   首先对目标数据库`Execute SQL Task`执行语句**`TRUNCATE TABLE dbo.StagingTable`**以截断登台表。

*   下一节将解释如何`Data Flow Task`配置。

*   Second`Execute SQL Task`执行下面给定的 SQL 语句，该语句*`dbo.DestinationTable`*使用 中可用的数据更新数据*`dbo.StagingTable`*，假设这两个表之间存在匹配的唯一键。在这种情况下，唯一键是 column *`RowNumber`*。

### 更新脚本：

```
UPDATE      D 
SET         D.CreatedOn = S.CreatedOn
        ,   D.ModifiedOn = S.ModifiedOn 
FROM        dbo.DestinationTable D 
INNER JOIN  dbo.StagingTable S 
ON          D.RowNumber = S.RowNumber 
```

![控制流](../Images/e23c65499c9ff6c9665c2d9b96f855c3.png)

我设计了如下所示的数据流任务。

*   *`OLE DB Source`**`dbo.SourceTable`*使用 SQL 命令读取数据**`SELECT RowNumber,CreatedOn, ModifiedOn FROM Source.dbo.SourceTable WHERE IsActive = 1`**

*   *`Lookup transformation`*用于检查表中是否已经存在 RowNumber 值*`dbo.DestinationTable`*

*   如果记录**不**存在，它将被重定向到*`OLE DB Destination`*命名为 as **`Insert into destination table`**，它将行插入到*`dbo.DestinationTable`*

*   如果记录**存在**，它将被重定向到*`OLE DB Destination`*命名为**`Insert into staging table`**，它将行插入到*`dbo.StagingTable`*. 暂存表中的这些数据将用于第二个`Execute SQL Task 执行批量更新。

![数据流选项卡](../Images/7f7dd92012f3e4b0b456c927e6b33167.png)

为了激活 OLE DB Source 的更多行，我运行了以下查询来激活一些记录

```
UPDATE  dbo.SourceTable 
SET     IsActive = 1 
WHERE   (RowNumber % 9 = 1) 
OR      (RowNumber % 9 = 2) 
```

![更新行 - 1](../Images/0cf80f6b204c31ee0cff545c35ef0773.png)

包的第一次执行如下所示。所有行都被定向到目标表，因为它是空的。在我的机器上执行包大约需要`3 seconds`.

![执行 1](../Images/3e4eca8c2b680033535db31bf778ee88.png)

![执行时间1](../Images/6a673b96c49bb4a9a3ba7a669cf0c2a6.png)

再次运行行计数查询以查找所有三个表中的行计数。

![行数 - 2](../Images/5326cf8ce9b1223c7558026bf1efa7fe.png)

为了激活 OLE DB Source 的更多行，我运行了以下查询来激活一些记录

```
UPDATE  dbo.SourceTable 
SET     IsActive = 1 
WHERE   (RowNumber % 9 = 3) 
OR      (RowNumber % 9 = 5) 
OR      (RowNumber % 9 = 6) 
OR      (RowNumber % 9 = 7) 
```

![行数 - 3](../Images/46ab6c9d64762bf855eeaa39621431df.png)

包的第二次执行如下所示。`314,268 rows`之前在第一次执行期间插入的内容被重定向到临时表。`628,766 new rows`直接插入到目标表中。在我的机器上执行包大约需要`12 seconds`. `314,268 rows`在第二个执行 SQL 任务中使用临时表更新了目标表中的数据。

![执行 - 2](../Images/9b6ef34035e6d859acda91eb6542910b.png)

![执行时间 - 2](../Images/b8f2bec960474c249685376bd6a76c01.png)

再次运行行计数查询以查找所有三个表中的行计数。

![行数 - 3](../Images/ecd23bd709a2f3f9b0fb6ee80242c137.png)

我希望这能给你一个想法来实施你的解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T20:24:49.673

我要看的两件事是您的插入（确保您使用“表或视图 - 快速加载”或“表名称或视图名称变量 - 快速加载”）和您的更新。

正如您已经正确确定的那样，更新逻辑通常是性能下降的地方，这是由于 OLE DB 组件为流经它的每一行触发单例更新。人们用来克服这个问题的常用方法是将所有更新写入临时表，就像您的插入逻辑一样。然后跟进您`Data Flow Task`的`Execute SQL Task`执行批量更新。

如果您打算购买 3rd 方工具，PragmaticWorks 提供了[Upsert 目的地](http://pragmaticworks.com/Products/Task-Factory/Features/UpsertDestination%28BatchUpdateOrInsert%29.aspx)