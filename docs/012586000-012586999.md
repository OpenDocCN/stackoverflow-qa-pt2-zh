# StackOverflow 问答 12586000-12586999

# objective-c - 如何使当前视图成为滚动视图？iOS / 目标 C

> ID：12586000
> 
> 赞同：0
> 
> 时间：2012-09-25T15:17:19.797
> 
> 标签：objective-c, ios, uiscrollview, scrollview

我有一个要制作滚动视图的视图（实际上是 UINavigationControllers 视图的一部分）。

我怎么做？

我可以做这样的事情：

```
UIScrollView * content = [[UIScrollView alloc] initWithFrame:self.view.bounds];
self.view = content 
```

（显然这不起作用，但有没有办法做到这一点）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:21:09.593

是的，您必须实现委托，并设置 contentSize。我发现的关于滚动视图的最佳教程是：

[http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)

你在一个很好的方式！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:23:38.323

您可以像您一样以编程方式创建滚动视图，然后将现有视图添加为这个新滚动视图的子视图，检查`addSubview:`（它也适用于所有`UIView`s 和子类`UIScrollView`）。我不会说这是解决方案，甚至是干净的解决方案，但是如果您阅读有关内容`addSubview:`，至少可以弄清楚如何在滚动视图中显示视图...

# asp.net-mvc - 创建控制器不起作用

> ID：12586001
> 
> 赞同：1
> 
> 时间：2012-09-25T15:17:24.550
> 
> 标签：asp.net-mvc, asp.net-mvc-3, scaffolding

我正在从 w3schools 学习 asp.net mvc3 并遵循该教程。[http://w3schools.com/aspnet/mvc_models.asp](http://w3schools.com/aspnet/mvc_models.asp)在“ASP.NET MVC 模型”部分，我创建了这样的模型。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;

namespace MvcDemo.Models
{
    public class MovieDB
    {
        public int ID { get; set; }
        public string Title { get; set; }
        public string Director { get; set; }
        public DateTime Date { get; set; }
    }

    public class MovieDBContext : DbContext
    {
        public DbSet<MovieDB> Movies { get; set; } 
    }
} 
```

然后我要根据说明添加一个控制器。

*   在解决方案资源管理器中，右键单击 Controllers 文件夹，然后选择 Add and Controller 将控制器名称设置为 MoviesController
*   选择模板：具有读/写操作和视图的控制器，使用实体框架
*   选择模型类：MovieDB (McvDemo.Models)
*   选择数据上下文类：MovieDBContext (McvDemo.Models) ***
*   选择视图 Razor (CSHTML)
*   点击添加

但我遇到的问题是下拉列表没有显示要选择的模型类和数据上下文类中的 MovieDB (McvDemo.Models)。谁能帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:42:22.180

你应该能够重新编译（Shift-Ctrl-B）然后再试一次——它会在那里。否则，您总是可以在空白视图的顶部自己声明它，但这不会提供生成器所做的脚手架：

```
@model MvcDemo.Models.MovieDB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:47:11.310

我重新编译了，但这并没有为我解决问题，是的，我正在做同样的事情并遇到了同样的问题。对我来说，这个问题是由视觉 Web 开发人员无法连接到我的电影数据库引起的。我必须在 web.config 中更改我的 connectionString 的定义，如下所示：

```
<add name="MovieDBContext"connectionString="Data Source=c:\sites\w3schools_demo\MvcDemo2\MvcDemo2\App_Data\Movies.sdf" providerName="System.Data.SqlServerCe.4.0"/> 
```

如果您遇到此问题，您需要更改“数据源”路径以指向您的 Movies.sdf 数据库文件。

# entity-framework - 实体框架更新属性而不加载相关实体

> ID：12586008
> 
> 赞同：1
> 
> 时间：2012-09-25T15:17:46.713
> 
> 标签：entity-framework, orm

我有一个直截了当的场景

```
class Person
{
    [Required]
    public int Age {get;set;}

    [Required]
    public virtual Pet Pet {get;set;}
}

class Pet
{
      ...
} 
```

`Person`&都`Pet`映射在上下文中。延迟加载已启用。如果我尝试更新此人的年龄，我会收到一个验证错误，说明`Pet`是必需的。

```
var person = context.People.Find(id)
person.Age = 30;
context.SaveChanges(); //causes validation error. 
```

我认为我不需要为上下文加载相关实体来生成正确的 sql 语句。我错过了什么，还是这不可能？

**鉴于 EF 为此提供的有限选项的**解决方案，我通过**`ActionFitler`**

 **```
public class DoNotValidateEntityFrameworkAttribute
    : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        actionContext
            .ControllerContext
            .Configuration
            .DependencyResolver
            .GetService<DbContext>()
            .Configuration
            .ValidateOnSaveEnabled = false;

        base.OnActionExecuting(actionContext);
    }
}

class MyController : ApiController
{
    [DoNotValidateEntityFramework]
    public void Put(int id, Model model)
    {
          ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:23:26.910

一种选择是改用它：

```
class Person
{
    [Required]
    public int Age {get;set;}

    [Required]
    public int PetId { get; set; }

    public virtual Pet Pet {get;set;}
} 
```

这将只需要 FK 而不是实体。其他选项是关闭验证，因为它不支持不完整的对象图：

```
context.Configuration.ValidateOnSaveEnabled = false; 
```**

# asp.net - umbraco 部署程序

> ID：12586012
> 
> 赞同：1
> 
> 时间：2012-09-25T15:18:00.660
> 
> 标签：asp.net, visual-studio-2010, deployment, umbraco

我正在尝试部署 umbraco 网站。该网站在本地运行正常，现在当我发布网站并通过 ftp 客户端上传时，当我尝试访问该网站时出现内部错误。我的问题是，由于我在本地使用 SQL CE 数据库，我仍然可以在线使用该数据库还是必须使用 sql server 数据库？此外，是否有任何特殊的方法来部署 umbraco 应用程序？感谢阅读，拉齐尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:57:00.580

如果您有一个 Windows azure 帐户，请将其加载到 azure 中，它可以完美地通过 FTP 传输您的文件。从 azure 安装 umbraco 作为 azure 提供的应用程序可以完美运行。我也在 azure 上使用 umbraco

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:27:11.397

你可以在线使用SQLCE，我个人不推荐，除非它是一个非常小的数据库，并且网站访问量很少；SQL Express 也是免费的，而且功能更强大 - 但对于您的问题，是的，SQLCE 应该可以工作。

也许让我们看看你的连接字符串和你得到的错误的细节。

# java - hibernate如何处理冲突？

> ID：12586016
> 
> 赞同：1
> 
> 时间：2012-09-25T15:18:16.190
> 
> 标签：java, hibernate

我希望有人可以为我澄清以下场景。

据我了解，当您从休眠状态请求“行”时，例如：

```
User user = UserDao.get(1); 
```

我知道内存中有 id=1 的用户。

在 Web 应用程序中，如果 2 个网页同时请求和加载用户，然后都更新用户对象的属性，会发生什么情况？例如：

```
user.pageViews += 1; // the value is current 10 before the increment
UserDao.update(user); 
```

**这将使用内存中的值（两个请求的值都是 10），还是使用数据库中的值？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:28:27.870

您必须为这两个用户使用两个休眠会话。这意味着内存中有两个对象实例。如果您只使用一个休眠会话（以及内存中的一个对象实例），那么结果是不可预测的。

在并发更新的情况下，第二次更新获胜。第一次更新的值被第二次更新覆盖。为避免第一次更新丢失，您通常使用版本列（请参阅休眠文档），然后第二次更新会收到一个错误，您可以捕获并对其做出反应（例如，错误消息“您的记录已在同时。请重新加载。”这允许第二个用户对修改的记录重新进行修改，以确保他的修改不会丢失。

在页面浏览计数器的情况下，就像在您的示例中一样，作为一种不同的解决方案，您可以编写一个同步的方法来按顺序计算页面浏览量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:47:58.127

默认情况下，该`in memory`值用于更新。

在下文中，我假设您要实现自动页面查看计数器，而不是`User`在 Web 用户界面中修改。如果你想看看**Hibernate 乐观锁定**。

因此，假设您在计算页面浏览量时需要 100% 的准确度，您可以`User`在修改实体`pageView`值以获得对表行的排他性时锁定您的实体：

```
Session session = ...
Transaction tx = ...

session.lock(user, LockMode.UPGRADE);
user.increasePageViews();

tx.commit();
session.close(); 
```

这`LockMode.UPGRADE`将`SELECT ... FOR UPDATE`在您的数据库中转换，因此请注意尽可能少地维护锁定，以免影响应用程序的可伸缩性。

# java - 把 Char 变成 KeyEvent

> ID：12586017
> 
> 赞同：0
> 
> 时间：2012-09-25T15:18:19.373
> 
> 标签：java, awtrobot

出于教育原因，我正在制作一个小程序（真的没有实际用途：P）。

我想要完成的是向机器人提供文本，然后让它打开记事本并使用 KeyPress 和 KeyRelease 输入文本。我知道一般来说对 JVM 可能不好；P

我的问题是，我很难找到将我从文档中读取的字符转换为适当的 KeyEvent 的通用解决方案。我环顾网络并没有真正找到解决方案。或者至少没有一个看起来过于复杂或看起来像繁重的工作。

所以我的问题是，这是否可以通过使用 Java 库来完成，还是我必须自己编写逻辑？我希望这个问题适合 Stackoverflow。

# php - WordPress 查询

> ID：12586018
> 
> 赞同：0
> 
> 时间：2012-09-25T15:18:22.343
> 
> 标签：php, mysql, wordpress

某些事情正在导致我们的数据库发疯。连续进行这三个查询是否可能存在问题？

```
 <ul>
    <?php   
        query_posts(array('category__in'=>38082, 'order-by'=>'post_date','order'=>'DESC','posts_per_page'=>'5')); 
        while (have_posts()) : the_post();
    ?>              

    <li><a href="<?php the_permalink(); ?>"><?php echo the_title()?></a></li>

    <?php endwhile; ?>
    <?php wp_reset_query();?>
 </ul>

 <ul>
    <?php   
        query_posts(array('category__in'=>1, 'order-by'=>'post_date','order'=>'DESC','posts_per_page'=>'5')); 
        while (have_posts()) : the_post();
    ?>              

    <li><a href="<?php the_permalink(); ?>"><?php echo the_title()?></a></li>

    <?php endwhile; ?>
    <?php wp_reset_query();?>
 </ul>      

 <ul>
    <?php   
        query_posts(array('category__in'=>15, 'order-by'=>'post_date','order'=>'DESC','posts_per_page'=>'5')); 
        while (have_posts()) : the_post();
    ?>              

    <li><a href="<?php the_permalink(); ?>"><?php echo the_title()?></a></li>

    <?php endwhile; ?>
    <?php wp_reset_query();?>
 </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:06:44.690

query_posts() 不是最有效的方法。

首先，尝试注释掉该代码以确保重负载不在其他地方。

确认问题仍然存在后，尝试从 query_posts() 切换到 get_posts()。我还注意到您将每页的帖子数作为字符串而不是数字。

之后，单个列将如下所示：

```
<ul>
    <?php   
    $posts=get_posts( array('cat'=>38082, 'numberposts'=>5)); 
    foreach($posts as $post){ ?>              

        <li><a href="<?php echo get_permalink($post->ID); ?>"><?php echo $post->post_title;?></a></li>

    <?php } ?>
 </ul> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:06:50.820

第一个类别 ID 是真实的吗？此外，如果您运行太多查询，我在那里看到三个，并且在每个类别中都有大量帖子，这可能会导致疯狂的行为。

# android - 我可以以编程方式删除帐户并在 Android 手机中同步吗？

> ID：12586019
> 
> 赞同：7
> 
> 时间：2012-09-25T15:18:27.987
> 
> 标签：android

我正在开发一个需要远程删除帐户和同步的项目，例如 Facebook、Twitter、Dropbox 等……这可以通过编程来完成吗？需要各位大佬的意见...

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T15:40:40.033

是的，它可以使用[`AccountManager`](http://developer.android.com/reference/android/accounts/AccountManager.html)and[`removeAccount`](http://developer.android.com/reference/android/accounts/AccountManager.html#removeAccount%28android.accounts.Account,%20android.accounts.AccountManagerCallback%3Cjava.lang.Boolean%3E,%20android.os.Handler%29)方法来完成。

首先获取一个实例`AccountManager`：

```
AccountManager am = AccountManager.get(this); 
```

然后获取设备上所有帐户的列表：

```
Account[] accounts = am.getAccounts(); 
```

一旦您选择了要删除的帐户（在此示例中，我们将只使用第一个帐户），请调用`removeAccount`它们：

```
if (accounts.length > 0) {
    Account accountToRemove = accounts[0];
    am.removeAccount(accountToRemove, null, null);
} 
```

您可以使用该`removeAccount`方法的第二个参数来提供一个回调，以便在删除帐户后调用（删除帐户是一个异步操作）。

# javascript - 在 d3 中格式化插值字符串或数字

> ID：12586023
> 
> 赞同：4
> 
> 时间：2012-09-25T15:18:39.280
> 
> 标签：javascript, d3.js

我正在使用 d3 为文本设置动画，以显示用户完成任务的进度。例如，如果他们完成了 32.51% 的任务，文本将在 2 秒左右的时间内从 0% 变为 32.51%。

为此，我在 svg 文本元素上使用 d3 的 attrTween 方法以及 d3.interpolate。插值效果很好，但我在格式化文本时遇到了一些麻烦。我希望文本始终显示 4 位数字，因此 0% = 00.00%、4.31% = 04.31% 等。能够做到这一点而不必对插值器返回的内容进行后期处理会很好。换句话说，无需获取返回的百分比并检查是否有 4 位数字并在将其放入 DOM 之前在任一侧添加零填充。

作为测试，我尝试通过将 a 和 b 值设置为插值器来指定我想要的格式`d3.interpolate("00.00", "30.00")`，但最终文本是“30”，尾随零被切断。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:49:31.433

您可以添加自定义插值器以`d3.interpolators`查看[文档](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_interpolators)。文档中给出的示例非常接近您的示例 - 唯一真正的变化是指定输出格式，在您的情况下应该是：

```
d3.format('05.2f'); // 0-padding, string width 5, 2 decimal places 
```

将其插入文档示例（请注意，我还适当地更改了正则表达式并添加了百分号）：

```
d3.interpolators.push(function(a, b) {
  var re = /^(\d\d\.\d\d)%$/, ma, mb, f = d3.format('05.2f');
  if ((ma = re.exec(a)) && (mb = re.exec(b))) {
    a = parseFloat(ma[1]);
    b = parseFloat(mb[1]) - a;
    return function(t) {
      return f(a + b * t) + '%';
    };
  }
});

d3.interpolate("00.00%", "30.00%")(1/5); // "06.00%"
d3.interpolate("00.00%", "30.00%")(1/3); // "10.00%" 
```

# php - PHP 中的显式 SQL

> ID：12586024
> 
> 赞同：0
> 
> 时间：2012-09-25T15:18:42.260
> 
> 标签：php, sql, literals

我想知道是否有办法在 PHP 中运行显式 SQL 字符串。我知道 PHP 有很多处理方法（sql_connect(...) 就是一个例子；但是我记得在 C# 中使用 LINQ 并且能够将特定的连接字符串作为文字 SQL 运行。

有没有人碰巧知道使用 PHP 的方法？

我要运行的查询示例：

```
SELECT p.id, p.name, numberOfPosts, posts.subject
FROM Persons p
INNER JOIN Posts posts ON posts.personID = p.ID
WHERE id = @currentUser; 
```

其中“@currentUser”将是一个变量，该变量将设置为基于 PHP 的站点上当前登录的用户。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:23:54.887

查看您的示例，最好的方法是使用[PDO Prepared-Statements](http://docs.php.net/pdo.prepared-statements)

# asp.net-mvc - 在asp.net mvc 4的视图中设置页面标题，元信息

> ID：12586030
> 
> 赞同：21
> 
> 时间：2012-09-25T15:18:58.700
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我对 MVC 很陌生，我正在将 Web 表单应用程序更新为 mvc。我有一个共享布局（网络表单中的母版页），我想为每个视图设置元和标题信息，但我看不到任何选项。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-25T15:31:45.980

通常，在您的布局中，您将拥有如下内容：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>@ViewBag.Title</title>
     <!-- the rest omitted for brevity --> 
```

重要的部分是`@ViewBag.Title`。这一点剃刀语法编码并写入`ViewBag.Title`. 是所有 razor 视图上的属性，它是使用字典作为其后备存储`ViewBag`的动态类型 。只是一个字典，您可以在其中存储要在视图中使用的随机内容。`ViewData``ViewData`

在您的控制器、布局或视图中，您可以获取或设置`ViewBag.Title`. 这是一个如何在使用您的布局的视图中设置它的示例（`_Layout.cshtml`在此示例中调用）：

```
@{
   ViewBag.Title = "My View's Title";
   Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

您可以从 访问模型元数据`ViewData.ModelMetadata`。在此示例中，我枚举了模型的属性并显示名称：

```
<ul>
@foreach (var property in ViewData.ModelMetadata.Properties)
{
  <li>@property.PropertyName</li>
}
</ul> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T21:10:20.807

在您的控制器方法中。

`ViewData["Title"] = "this is page one title";`

在你看来，有这个。 `@ViewData["Title"])`

如果标题是 html，它应该是`@html.raw(ViewData["TopMessage"])`

Razor 引擎更适合 mvc，因此我建议您在创建新项目时尝试使用 razor。希望它对你有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-17T23:26:32.507

我喜欢使用动作和控制器名称动态设置页面标题。您可以使用[Humanizer](https://github.com/MehdiK/Humanizer)之类的库将“SomeActionName”转换为“Some action name”：

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString GetPageTitle(this HtmlHelper helper)
    {
        var actionName = helper.GetRouteDataValue("action");
        var controllerName = helper.GetRouteDataValue("controller");

        return new MvcHtmlString(controllerName.Humanize() + " - " + actionName.Humanize());
    }

    private static string GetRouteDataValue(this HtmlHelper helper, string value)
    {
        return helper.ViewContext.RouteData.Values[value].ToString();
    }
} 
```

然后在你的_Layout中：

```
<title>@Html.GetPageTitle()</title> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:33:21.080

您需要设置`Viewbag.Title` 这些文章看起来相关，并会给您一些指示：

*   [ViewBag.Title 由底层视图设置后，如何访问它？](https://stackoverflow.com/questions/6216600/how-do-i-access-a-viewbag-title-after-it-has-been-set-by-the-underlying-view)
*   [在 Razor 视图中，如何插入不带 < 的页面标题？](https://stackoverflow.com/questions/5613880/in-a-razor-view-how-can-i-insert-the-page-title-without-a)

# mysql - 从 Mysql 列中删除数据，保留部分字符串

> ID：12586031
> 
> 赞同：0
> 
> 时间：2012-09-25T15:19:00.550
> 
> 标签：mysql, sql

我在 mysql db 表中有一个列，其中包含电子邮件地址和常规用户名。

我需要运行一个查询，该查询可以从每一行中删除“@domain.com”，但如果是电子邮件，则保留其余部分。

不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:23:21.377

如何使用子字符串？

```
 SELECT SUBSTRING_INDEX('www.mysql.com', '.', 2);
    returns: 'www.mysql' 
```

# json - 未调用 MessageConverter

> ID：12586033
> 
> 赞同：0
> 
> 时间：2012-09-25T15:19:12.297
> 
> 标签：json, spring, spring-mvc, jackson

我在 spring 中注册了一个自定义 MessageConverter，配置如下：

```
<bean id="jsonHttpMessageConverter" class="com.eventwiz.web.util.ServiceResponseHttpMessageConverter">
    <property name="supportedMediaTypes" value="application/json"/>
</bean>

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
      <util:list id="beanList">
        <ref bean="jsonHttpMessageConverter"/>
      </util:list>
    </property>
</bean> 
```

但是，它没有被调用，因为我在代码中使用断点确认了这一点。ServiceResponseHttpMessageConverter 子类 MappingJacksonHttpMessageConverter 并覆盖 writeInternal() 方法。我什至尝试覆盖 MessageConverter.supports() 只是为了查看是否正在调用它，而事实并非如此。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:30:18.187

根据作者的回答发现的问题是 `<mvc:annotation-driven/>`注册自己的handlerAdapter的标签，所以如果另一个handlerAdapter被添加到Spring MVC配置文件中并且转换器被添加到这个适配器中，自定义适配器将不会生效。修复方法是通过`<mvc:message-converters...`标签下的 httpMessageConverters 注册，`<mvc:annotation-driven`或者删除`<mvc:annotation-driven`自定义 handleradapter 并在其下注册 httpmessageconverter。

# dynamics-crm - 加入 ActivityParty 字段

> ID：12586034
> 
> 赞同：2
> 
> 时间：2012-09-25T15:19:20.270
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在尝试在 CRM 2011 中查询数据，我需要加入 ActivityParty。我似乎找不到任何好的文档。以前有没有人这样做过。到目前为止，这是我的查询：

```
var linqQuery = (from r in gServiceContext.CreateQuery("campaignresponse")
                 join c in gServiceContext.CreateQuery("contact") on ((EntityReference)r["customer"]).Id equals c["contactid"] into opp
                 join a in gServiceContext,CreateQuery("lead") on ((EntityReference)r["customer"]).Id equals c["leadid"] into opp
                 from o in opp.DefaultIfEmpty()
                 where  ((EntityReference)r["new_distributorid"]).Id.Equals(lProfileProperty.PropertyValue) && ((OptionSetValue)r["new_distributorstatus"]).Equals("100000002")
                 select new
                  { } 
```

因此，如果您查看查询，我要做的是通过客户字段将联系人实体和领导实体加入到 CamapaignResponse 中，而客户字段是 ActivityParty 字段。关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:32:04.513

我很难弄清楚你的查询应该如何工作，但我可以告诉你，如果你使用 SDK 生成 Linq 实体，你会更轻松。然后，而不是

```
from r in gServiceContext.CreateQuery("campaignresponse") where ... 
```

你可以写

```
gServiceContext.CampaignResponseSet
 .Where(cr => cr.property == value)
 .Select(cr => new {cr, cr.childObject}); 
```

等等。您还将获得强大的打字和智能感知。

# javascript - 打开书签后如何在弹出窗口中居中页面？

> ID：12586037
> 
> 赞同：0
> 
> 时间：2012-09-25T15:19:28.787
> 
> 标签：javascript, css, ruby-on-rails, popup, bookmarklet

```
javascript:q=location.href;p=document.title;void(open('http://example.page/links/bookmarklet_new?
link%5Burl%5D='+encodeURIComponent(q)+'&link%5Btitle%5D='+encodeURIComponent(p),'Page','toolbar=no,width=700,height=350')); 
```

我使用上面的 Bookmarklet 脚本。但是如果用户没有登录，他会被重定向到 root_path。但是后来我想滚动或居中页面以登录表单。我尝试了覆盖样式。但是如何检查页面何时在弹出窗口中打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:17:20.897

让您的书签添加一个查询字符串参数，例如`&view=popup`，然后您打开的页面可以检查查询参数并根据需要更改 HTML 或 CSS。如果您的页面重定向，请确保它检查`view`参数并将其传递到下一页。

在窗口中显示页面正确部分的另一个选项是在 url 中使用哈希和片段标识符。例如`#loginform`.

# bash - 用 sed 删除除括号外的所有内容，然后缩进

> ID：12586039
> 
> 赞同：2
> 
> 时间：2012-09-25T15:19:36.493
> 
> 标签：bash, sed, awk, tr

我有一个巨大的文件，一个非常大的文件（大约 600+MB 的文本）。事实上他们是`jsons`。每个`json`都在一条新线上，只有几种口味。

他们看起来像：

```
{"text":{"some nested words":"Some more","something else":"Yeah more stuff","some list":["itemA","ItemB","itemEtc"]},"One last object":{"a thing":"and it's value"}} 
```

而我想要的是它通过 sed，吸出文本，并为每一对下一个缩进，所以我们得到：

```
{
 -{
--[]
 -}
--{}
 -}
} 
```

（我不是 100% 确定我在输出中得到了正确的嵌套，我认为它是正确的）

这可能吗？我看到了[this](https://stackoverflow.com/questions/10558826/remove-everything-between-pairs-of-braces-with-sed)，这是我能想象到的最接近的，但它去掉了括号两个。

我注意到那里的答案使用了分支，所以我认为我需要它，并且我需要执行某种`s/pattern/newline+tab/space/g`类型命令，但我不知道如何或做什么...

有人可以帮忙吗？它不必是纯粹`sed`的，但这是首选。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T03:21:55.707

这不会很漂亮... =) 这是我作为 sed 脚本的解决方案。请注意，它要求第一行通知 shell 如何调用 sed 来执行我们的脚本。如您所见，使用了“-n”标志，因此我们强制 sed 仅打印我们通过“p”或“P”命令明确命令它的内容。“-f”选项告诉 sed 从文件中读取命令，该文件的名称跟在选项后面。由于脚本的文件名由 shell 连接到最终命令中，它将正确地从脚本中读取命令（即，如果您运行“./myscript.sed”，shell 将执行“/bin/sed -nf myscript .sed”）。

```
#!/bin/sed -nf

s/[^][{}]//g

t loop
: loop

t dummy
: dummy

s/^\s*[[{]/&/
t open

s/^\s*[]}]/&\
/
t close
d

: open
s/^\(\s*\)[[]\s*[]]/\1[]\
/
s/^\(\s*\)[{]\s*[}]/\1{}\
/

t will_loop
b only_open

: will_loop
P
s/.*\n//
b loop

: only_open

s/^\s*[[{]/&\
/
P
s/.*\n//
s/[][{}]/ &/g
b loop

: close
s/ \([][{}]\)/\1/g
P
s/.*\n//
b loop 
```

在开始之前，我们必须首先将所有内容都剥离成方括号和方括号。这是第一个“s”命令的职责。它告诉 sed 用任何内容替换不是括号或方括号的每个字符，即。去掉它。请注意，匹配中的方括号表示要匹配的一组字符，但是当其中的第一个字符是“^”时，它实际上将匹配除“^”之后指定的字符之外的任何字符。因为我们想要匹配右方括号，并且我们需要用方括号关闭要忽略的字符组，所以我们通过将右方括号设置为“^”之后的第一个字符来告诉组中应该包含右方括号。然后我们可以指定其余的字符：左方括号，打开方括号和右方括号（忽略字符组：“][{}”），然后用右方括号关闭组。我试图在这里详细说明，因为这可能会造成混淆。

现在来看看实际的逻辑。该算法非常简单：

```
while line isn't empty
    if line starts with optional spaces followed by [ or {
        if after the [ or { there are optional spaces followed by a respective ] or }
            print the respective pair, with only the indentation spaces, followed by a newline
        else
            print the opening square or normal bracket, followed by a newline
            remove what was printed from the pattern space (a.k.a. the buffer)
            add a space before every open or close bracket (normal or square)
        end-if
    else
        remove a space before every open or close bracket (normal or square)
        print the closing square or normal bracket, followed by a newline
        remove what was printed from the pattern space
    end-if
end-while 
```

但是有几个怪癖。首先，sed 不直接支持“while”循环或“if”语句。我们能得到的最接近的是“b”和“t”命令。“b”命令分支（跳转）到一个预定义的标签，类似于 C 的 goto 语句。“t”也分支到预定义的标签，但前提是自当前行上运行的脚本开始或自上一个“t”命令以来发生了替换。标签是用“：”命令编写的。

因为很可能第一个命令实际上至少执行了一次替换，所以它后面的第一个“t”命令将导致分支。因为我们需要测试一些其他替换，我们需要确保下一个“t”命令不会因为第一个命令而自动成功。这就是为什么我们从它上面一行的“t”命令开始（即，无论它是否分支，它仍然会在同一点继续），所以我们可以“重置”“t”使用的内部标志命令。

因为“循环”标签会从至少一个“b”命令分支到，所以在执行“b”时可能会设置相同的标志，因为只有“t”命令可以清除它。因此，我们需要执行相同的解决方法来重置标志，这次使用“虚拟”标签。

我们现在通过检查是否存在开方括号或开闭括号来开始算法。因为我们只想测试它们是否存在，所以我们必须将匹配替换为它自己，也就是“&”代表的意思，如果匹配成功，sed 会自动为“t”命令设置内部标志。如果匹配成功，我们使用“t”命令分支到“open”标签。

如果不成功，我们需要看看我们是否匹配一个封闭的正方形或正常的括号。该命令几乎相同，但现在我们在右括号后添加一个换行符。我们通过在放置匹配项的位置（即“&”之后）添加一个转义的换行符（即反斜杠后跟一个实际的换行符）来做到这一点。与上面类似，如果匹配成功，我们使用“t”命令跳转到“close”标签。如果不成功，我们将认为该行无效，并立即清空模式空间（缓冲区）并在下一行重新启动脚本，所有这些都使用单个“d”命令。

输入“open”标签，我们将首先处理一对匹配的开闭括号的情况。如果我们匹配它们，我们将在它们之前打印缩进空格，它们之间没有任何空格，并以换行符结尾。每种类型的括号对（方形或普通）都有一个特定的命令，但它们是类似的。因为我们必须跟踪有多少缩进空间，所以我们必须将它们存储在一个特殊的“变量”中。我们通过使用组捕获来做到这一点，它将存储从“（”之后开始并在“）”之前结束的匹配部分。因此，我们使用它来捕获行首之后和左括号之前的空格。然后我们继续匹配左括号，后跟空格和相应的右括号。当我们编写替换时，我们确保使用特殊变量“\1”重新插入空格，该变量包含匹配中第一个组捕获存储的数据。然后我们编写相应的一对开括号和右括号以及转义的换行符。

如果我们设法进行了任何替换，我们必须打印我们刚刚编写的内容，将其从模式空间中删除并使用该行的剩余字符重新开始循环。因此，我们首先使用“t”命令分支到“will_loop”标签。否则，我们分支到“only_open”标签，它将处理只有一个开括号的情况，没有连续的相应闭括号。

在“will_loop”标签内，我们只需使用“P”命令打印模式空间中的所有内容，直到第一个换行符（我们手动添加）。然后，我们手动删除第一个换行符之前的所有内容，以便我们继续处理该行的其余部分。这类似于“D”命令的作用，但不需要重新启动脚本的执行。最后，我们再次分支到循环的开头。

在“only_open”标签内，我们以与之前类似的方式匹配一个左括号，但现在我们重写它并附加一个换行符。然后我们打印该行并将其从模式空间中删除。现在我们将所有括号（打开或关闭，方括号或普通括号）替换为前面的单个空格字符。这样我们就可以增加缩进。最后，我们再次分支到循环的开头。

最后的标签“close”将处理一个右括号。我们首先删除括号前的每个空格，有效地减少缩进。为此，我们需要使用捕获，因为虽然我们想匹配空格和后面的括号，但我们只想写回括号。最后，将所有内容打印到我们在输入“关闭”标签之前手动添加的换行符，从模式空间中删除我们打印的内容并重新启动循环。

一些观察：

1.  这不会检查代码的语法正确性（即 {{[}] 将被接受）
2.  它会在遇到括号时添加和删除缩进，无论它们的类型如何。这意味着当它添加缩进时，即使遇到的右括号不是同一类型，它也会删除它。

希望这会有所帮助，很抱歉这篇长文=）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:18:45.617

这可能对您有用（GNU sed）：

```
sed 's/[^][{}]//g;s/./&\n/g;s/.$//' file |
sed -r '/[[{]/{G;s/(.)\n(.*)/\2\1/;x;s/^/\t/;x;b};x;s/.//;x;G;s/(.)\n(.*)/\2\1/' |
sed -r '$!N;s/((\{).*(\}))|((\[).*(\]))/\2\5\3\6/;P;D' 
```

解释：

1.  第一个 sed 命令在自己的行上生成一个大括号/方括号流
2.  第二个 sed 命令缩进每个括号
3.  第三个 sed 命令将这些成对的括号减少为一行

如果您对正确缩进的括号感到满意，则可以省略第三个命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T03:46:51.487

我认为您的预期输出应如下所示：

```
{
-{
--[]
-}
-{
-}
} 
```

这是一种使用方法`GNU awk`：

```
awk -f script.awk file.txt 
```

内容`script.awk`：

```
BEGIN {
    FS=""
    flag = 0
}

{
    for (i=1; i<=NF; i++) {
        if ($i == "{" || $i == "[") {
            flag = flag + 1
            build_tree(flag, $i)
            printf (flag <=2) ? "\n" : ""
        }
        if ($i == "}" || $i == "]") {
            flag = flag - 1
            printf (flag >= 2) ? $i : \
                build_tree(flag + 1, $i); \
                printf "\n"
        }
    }
}

function build_tree (num, brace) {
    for (j=1; j<=num - 1; j++) {
        printf "-"
    }
    printf brace
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-18T22:55:20.257

我知道这是一个古老的线程，反正没人在看，但现在有一个更简单的方法。

> 猫文件.txt | jq'。| sed 's/ //-/g' | tr -dc '[[]{}()]\n-' | sed '/^-*$/d'

第一个 sed 中有 2 个空格。

# c# - 如何使用 TechTalk.SpecFlow 和 C# 以编程方式忽略一些验收测试？

> ID：12586040
> 
> 赞同：15
> 
> 时间：2012-09-25T15:19:50.903
> 
> 标签：c#, specflow, acceptance-testing

我有几个带有某些场景的功能文件。我需要忽略几个场景或功能，`@tag`根据某些条件标有一些。我已经阅读[了 specflow 文档](https://github.com/techtalk/SpecFlow/wiki/Documentation)，但没有找到对我的解决方案有用的东西。我想使用类似的东西

```
[BeforeScenario("sometag")]
public static void BeforeScenario()
{
    if(IgnoreTests)
    {
       // This is the hot spot
       Scenario.DoSomethingToIgnoreScenarioIfConditionButRunScenarioIfConditionFalse();
    }        
} 
```

我也尝试动态添加或删除标签

```
[BeforeScenario("sometag")]
public static void BeforeScenario()
{
    if(IgnoreTests)
    {
       ScenarioContext.Current.ScenarioInfo.Tags.ToList().Add("ignore");
    }        
} 
```

但它没有用。也许还有其他方法可以动态添加或删除标签？或者`ScenarioContext`类中的某些方法会忽略当前场景？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-25T19:08:28.900

您至少有 3 个选项：

1.  [配置](https://github.com/techtalk/SpecFlow/wiki/Configuration)Specflow 以将待处理的步骤视为忽略，`missingOrPendingStepsOutcome="Ignore"`然后您可以编写：

    ```
    if(IgnoreTests)
    {
        ScenarioContext.Current.Pending();
    } 
    ```

    根据您对待处理步骤的要求，这可能不是您想要的。

2.  使用内置的单元测试框架方法在运行时忽略测试。因此，如果您使用例如 NUnit，则使用[Assert.Ignore()](http://www.nunit.org/index.php?p=utilityAsserts&r=2.2.9)：

    ```
    if(IgnoreTests)
    {
        Assert.Ignore();
    } 
    ```

    我认为这是最干净/最简单的解决方案。

3.  或者，如果您想以一种与测试框架无关的方式进行测试，并且您不怕弄乱 Specflow 内部结构，那么您可以使用该`IUnitTestRuntimeProvider`接口：

    ```
    if (IgnoreTests)
    {
        var unitTestRuntimeProvider = (IUnitTestRuntimeProvider) 
        ScenarioContext.Current
           .GetBindingInstance((typeof (IUnitTestRuntimeProvider))); 
        unitTestRuntimeProvider.TestIgnore("ignored");
    } 
    ```

    即使您更改了单元测试提供程序，这也将起作用，但不能保证此 API 将来不会中断。

# asp.net-mvc - ASP.NET MVC3/4 部署和虚拟主机

> ID：12586042
> 
> 赞同：0
> 
> 时间：2012-09-25T15:20:02.157
> 
> 标签：asp.net-mvc

我是.net 世界的新手。我想在 Windows Server 2003 标准版中部署一个 ASP.NET MVC 应用程序。我应该怎么做任何人都可以给我一步一步的例子，例如：1.安装IIS。2.安装MS visual studio 2010 express edition（我用的是express edition）。

ETC

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:56:17.117

> 1.  安装 IIS。

[http://technet.microsoft.com/en-us/library/aa998483(v=exchg.65).aspx](http://technet.microsoft.com/en-us/library/aa998483(v=exchg.65).aspx)

> 1.  安装 MS Visual Studio 2010 Express Edition

像往常一样从 Microsoft 的网站下载它。

确保您安装了 .NET，如果尚未安装，您应该可以开始使用了。也许这篇文章可以帮助你：[http ://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

# php - 在 Fedora linux 上使用 mysqli

> ID：12586047
> 
> 赞同：2
> 
> 时间：2012-09-25T15:20:07.990
> 
> 标签：php, mysql, mysqli, fedora

我正在尝试在我全新的 Fedora 17 安装中使用 mysqli。我安装了 php、mysql-server 和 php-mysql。不过，下面的代码还是报错：

```
 <?php

 if (!function_exists('mysqli_init') && !extension_loaded('mysqli')) {

     echo 'We don\'t have mysqli!!!'; 

 } else {

     echo 'Phew we have it!'; 

 }

 ?> 
```

php_info 告诉 -with-mysqli=shared

那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:39:55.977

也许您必须在 [extensions] 部分下的 php.ini 中启用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:51:12.553

你的代码会像这样更有效率：

```
if (!function_exists('mysqli_init') || !extension_loaded('mysqli')) {
    echo 'We don\'t have mysqli!!!'; 
} else {
    echo 'Phew we have it!'; 
} 
```

在这种情况下，将检查 PHP 是否有 mysqli 以及是否在 php.ini 中加载了 MySQL 扩展，如果没有则打开 php.ini 并添加 mysqli 扩展。查看 php.ini 使用

```
php -i 
```

在命令行中。MySQL 4.1+ 后支持 mysqli

# php - 在 PHP 中索引 excel 文件

> ID：12586049
> 
> 赞同：2
> 
> 时间：2012-09-25T15:20:14.263
> 
> 标签：php, database, excel

对于一个客户，我正在做一个小项目来索引一堆（大约 30 个）Excel 电子表格。该项目的主要目标是快速搜索上传的 excel 文件。我已经用谷歌搜索了一个解决方案，但我还没有找到一个简单的解决方案。

我正在考虑的一些选项：

- 使用 PHPExcel 和 MySQL 手动执行某些操作，并使用元表存储列信息。使用表格的全文选项返回搜索结果。

- 使用文档存储（如 MongoDB）来存储文件并将其与 ElasticSearch / Solr 结合以获得快速结果。

- 两者结合，在关系数据库上使用 Solr。

我认为第二种选择有点矫枉过正，我不想在这个问题上花费太多时间。我想听听对此的一些意见，欢迎提出其他建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:07:05.127

我同意其他人。我过去做过几个将电子表格吸入数据库的系统。这是无需任何编程即可获得熟悉的用户界面的绝佳方式。然后，我倾向于使用电子邮件将电子表格作为一个中心位置，以便通过 MS Access 读取，并且在最近几年，通过 PHP 将其读取到 MySQL 数据库中。

PHP 特别好，因为您可以轻松地将其连接到邮件服务器以自动读取和处理电子表格。

# ruby - 在 Mixins 中初始化实例变量

> ID：12586051
> 
> 赞同：11
> 
> 时间：2012-09-25T15:20:24.683
> 
> 标签：ruby, mixins

是否有任何干净的方法来初始化要用作 Mixin 的模块中的实例变量？例如，我有以下内容：

```
module Example

  def on(...)   
    @handlers ||= {} 
    # do something with @handlers
  end

  def all(...)
    @all_handlers ||= []
    # do something with @all_handlers
  end

  def unhandled(...)
    @unhandled ||= []
    # do something with unhandled
  end

  def do_something(..)
    @handlers     ||= {}
    @unhandled    ||= []
    @all_handlers ||= []

    # potentially do something with any of the 3 above
  end

end 
```

请注意，我必须一次又一次地检查`@member`每个函数中的每个函数是否都已正确初始化——这有点烦人。我宁愿写：

```
module Example

  def initialize
    @handlers     = {}
    @unhandled    = []
    @all_handlers = []
  end

  # or
  @handlers  = {}
  @unhandled = []
  # ...
end 
```

并且不必反复确保正确初始化事物。但是，据我所知，这是不可能的。除了向扩展类添加`initialize_me`方法`Example`和调用之外，还有什么办法可以解决这个问题？`initialize_me`我确实看到[了这个例子](http://www.java2s.com/Code/Ruby/Language-Basics/AutomaticallyInitializingMixedInModules.htm)，但是我不可能`Class`为了完成这个而将猴子修补到里面。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T15:24:34.393

```
module Example
  def self.included(base)
    base.instance_variable_set :@example_ivar, :foo
  end
end 
```

**编辑**：请注意，这是设置类实例变量。当模块混合到类中时，无法创建实例上的实例变量，因为这些实例尚未创建。但是，您可以在 mixin 中创建一个初始化方法，例如：

```
module Example
  def self.included(base)
    base.class_exec do
      def initialize
        @example_ivar = :foo
      end
    end
  end
end 
```

在调用包含类的初始化方法（有人吗？）时，可能有一种方法可以做到这一点。没有把握。但这里有一个替代方案：

```
class Foo
  include Example

  def initialize
    @foo = :bar
    after_initialize
  end
end

module Example
  def after_initialize
    @example_ivar = :foo
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T04:41:37.497

也许这有点 hacky，但您可以使用它`prepend`来获得所需的行为：

```
module Foo
  def initialize(*args)
    @instance_var = []
    super
  end
end

class A
  prepend Foo
end 
```

这是控制台的输出：

```
2.1.1 :011 > A.new
 => #<A:0x00000101131788 @instance_var=[]> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:26:01.770

`modules`提供挂钩，如`Module#included`. 我建议您查看有关该主题的 ruby​​ 文档，或使用`ActiveSupport::Concern`，它提供了一些有关模块的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T10:31:11.490

我认为可能有一个更简单的答案。该模块应该有一个初始化程序，可以像往常一样初始化变量。在包含模块的类的初始化程序中，调用 super() 以调用包含模块中的初始化程序。这只是遵循 Ruby 中的方法调度规则。

仔细想想，如果包含模块的类也有一个需要初始化的超类，这将不会很好地工作。模块中的初始化程序需要接受可变参数列表并将其传递给超类。不过，这似乎是一个很好的探索途径。

# c++ - C++ 返回多个项目

> ID：12586055
> 
> 赞同：0
> 
> 时间：2012-09-25T15:20:58.800
> 
> 标签：c++, iterator, return-value

我正在用 C++ 设计一个从 HTML 页面中提取 URL 的类。我正在使用 Boost 的 Regex 库为我完成繁重的工作。我开始设计一个类，并意识到我不想束缚 URL 的存储方式。`std::vector<Url>`一种选择是通过引用接受 a并在其上调用 push_back 。我想避免强迫我班的消费者使用`std::vector`. 因此，我创建了一个带有目标迭代器的成员模板。它看起来像这样：

```
template <typename TForwardIterator, typename TOutputIterator>
TOutputIterator UrlExtractor::get_urls(
    TForwardIterator begin,
    TForwardIterator end, 
    TOutputIterator dest); 
```

我觉得我把事情复杂化了。我喜欢用 C++ 编写相当通用的代码，但我很难锁定我的接口。但后来我陷入了我试图将*所有内容*模板化的困境。此时，阅读代码的人并没有意识到这`TForwardIterator`是在迭代`std::string`.

在我的特殊情况下，我想知道这种通用是否是一件好事。你什么时候开始让代码更明确？是否有一种标准方法可以从函数中获取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:39:48.880

是的，它不仅很好，而且是一个非常好的设计。以这种方式进行模板化是大多数标准库算法的工作方式，例如`std::fill`or `std::copy`；它们与迭代器一起使用，以便您可以填充其中已经包含元素的容器，*或者*您可以取一个空容器并使用`std::back_inserter`.

这是一个非常好的设计 IMO，并利用了模板和迭代器概念的强大功能。

你可以像这样使用它（但你已经知道了）：

```
std::list<Url> l;
std::vector<Url> v;

x.get_urls(begin(dat1), end(dat1), std::back_inserter(l));
y.get_urls(begin(dat2), end(dat2), std::back_inserter(v)); 
```

我感觉你害怕使用模板，它们不是“正常的”C++，或者它们应该被避免并且臃肿等等。我向你保证，它们是非常正常且强大的语言功能，没有其他语言（我所知道的）具有，所以只要适合使用它们，就使用它们。而在这里，非常合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:54:56.417

在我看来，您的界面错误。

已经有从迭代器复制到容器的算法。在我看来，您的课程提供了一个 url 流（不依赖于修改其源）。因此，您真正需要的只是一种通过迭代器（前向迭代器）公开内部数据的方法，因此您只需要提供 begin() 和 end()。

```
UrlExtractor             page(/* Some way of constructing page */);
std::vector<std::string> data;

std::copy(page.begin(), page.end(), std::back_inserter(data)); 
```

我只想提供以下界面：

```
class UrlExtractor
{
    ...... STUFF
    iterator begin(); 
    iterator end();
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:51:50.430

不知道实际用例场景很难说，但总的来说，最好避免使用模板（或任何其他不必要的复杂性），除非它真的给你买了东西。这里最明显的签名是：

```
std::vector<Url> UrlExtractor::get_urls( std::string const& source ); 
```

是否真的有任何可能的情况，您必须解析除 a 之外的任何内容`std::string`？（如果您还支持输入迭代器，可能会有。但实际上，如果您正在解析，源将是 a`std::string`或 an `std::istream&`。除非您真的想支持后者，否则只需使用`std::string`。）当然，客户端代码可以对返回的向量执行任何操作，包括将其附加到另一种类型的集合中。

如果返回 a 的成本`std::vector`确实成为问题，那么您可以将 a`std::vector<Url>&`作为参数。我看不到任何合理的情况，任何额外的灵活性都会给你带来很多好处，而且类似的功能`get_urls`可能相当复杂，而不是你想要放在标题中的那种东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:28:07.993

是的，你太笼统了。模板的意义在于您可以生成行为不同的函数的多个副本。您可能不希望这样，因为您应该选择一种表示 URL 的方式并在整个程序中使用它。

你怎么做：

```
typedef std::string url; 
```

这使您可以更改将来用于 url 的类。

也许在其中`std::vector`实现了一些接口，`push_back()`并且您的方法可以引用该接口（`back_inserter`？）。

# java - 将电子邮件模式限制为特定域

> ID：12586060
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:21:05.897
> 
> 标签：java, regex

我正在使用以下电子邮件模式：

```
[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z] 
```

我想限制它以允许特定域，例如：.com、.org、.net、.edu

如何做到这一点，请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:41:46.177

`[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.(com|org|net|edu)`

您可能希望使用不区分大小写的标志来编译它，或者添加您想要的电子邮件地址结尾的大写版本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T15:25:22.080

对于 .com

```
[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]\.com 
```

对于 .com、.org、.net、.edu 中的任何一个

```
[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]\.(com|org|net|edu) 
```

# css - 全角子div的背景颜色

> ID：12586061
> 
> 赞同：1
> 
> 时间：2012-09-25T15:21:08.380
> 
> 标签：css, margins, margin

我正在尝试在 div 上设置背景颜色，该 div 被拉伸（使用负边距）到其最外层父 div 的全宽。

这是一个简化的例子：http: [//jsfiddle.net/U5dnd/](http://jsfiddle.net/U5dnd/)

白色 div`.featured-wrapper`覆盖了黑色 div 的整个宽度`.site`，但它的背景颜色没有。我想边距是透明的。

有没有办法让整个`.featured-wrapper`div 变白，包括它的（负）边距？（或者还有其他方法可以做到这一点吗？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:26:54.350

```
.featured-wrapper {
    background-color: white;
    height:50px;
    margin: 20px 0px 0 0px;
    position:absolute;
    width:100%;
    z-index:100;
    left:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:39:34.073

检查这个

[**JS小提琴**](http://jsfiddle.net/U5dnd/3/)

**CSS：**

```
.site {
    background-color:black;       
    padding: 0 40px;
    height:300px;
    width:320px;
}
.site-content {
    width:100%;
    overflow:hidden;
}
.wrapper {
    overflow:hidden; 
    background-color:red; 
    height:100%;
}
.featured-wrapper {
    background-color: white;
    height:50px;
    margin: 20px 0 0 -40px;
    position: absolute;
    width: 399px;
} 
```

**HTML：**

```
<div id="page" class="site">

    <div id="main" class="wrapper">

        <div id="primary" class="site-content">
            <div class="featured-wrapper">
                <p>This is the featured wrapper</p>
            </div>
    </div>
   </div>

</div> 
```

# java - WebappClassLoader.loadClass 中的非法访问

> ID：12586064
> 
> 赞同：0
> 
> 时间：2012-09-25T15:21:19.613
> 
> 标签：java, multithreading, classloader

我在我的应用程序中实现了一个任务调度程序。基本上，我所做的是安排一些任务在一天内执行 4 次（如 6 小时内执行 6 次），因此系统将其安排为：00:00、06:00、12:00、18:00。

好的，我有一个类（FlowJobController），它扩展了 Thread 类，在 run() 实现中，我让线程在 60 到 60 秒内保持休眠状态，因此再次执行它以检查是否有任何任务要执行。如果属实，我运行我的工作。

基本上它的主要部分：

```
rSet = pStmt.executeQuery();
while (rSet.next()) {
  long jobId = rSet.getLong("trf_codigo");
  String ruleName = rSet.getString("reg_nome");
  String ruleParameters = rSet.getString("trf_regra_parametros");

  Job job = new Job();
  job.setId(jobId);
  job.setRuleName(ruleName);
  job.setParameters(Functions.stringToList(ruleParameters, "\n"));

  FlowJob flowJob = new FlowJob(this, job);
  flowJob.start();
}
} catch (Exception ex) {
 logger.error(WFRSystem.DEFAULT_USER, system.getCode(), ex);
} finally {
  try {
    DBConnection.close(pStmt);
    DBConnection.close(rSet);

    // executede 60 in 60 sec
      Thread.sleep(60 * 1000);
  } catch (InterruptedException ex) {
      logger.error(WFRSystem.DEFAULT_USER, system.getCode(), ex);
  }
} 
```

问题是：当 pStmt.executeQUery() 返回要执行的记录时，它进入 while 并且错误出现在该行中：`Job job = new Job();`

错误是：

```
Exception in thread "FlowJobController" java.lang.NoClassDefFoundError: wfr/com/Job
at wfr.com.FlowJobController.run(FlowJobController.java:112) 
```

在此错误之前，我收到此错误：

```
25/09/2012 12:00:09 org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load wfr.com.Job. 
```

最终的后续堆栈跟踪是由出于调试目的引发的错误以及试图终止导致非法访问的线程引起的，并且没有功能影响。

```
java.lang.IllegalStateException
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1566)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
at wfr.com.FlowJobController.run(FlowJobController.java:112) 
```

FlowJobController.java:112 是`Job job = new Job();`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:36:52.467

> 最终的堆栈跟踪是由出于调试目的引发的错误以及尝试终止导致非法访问的线程引起的，并且没有功能影响。

如果您说您的代码故意抛出`IllegalStateException`异常，那么这可能是导致后续问题的原因。如果在静态初始化中抛出未检查异常，并且该异常传播，则类初始化失败，并且该类（以及依赖它的所有类）不可用。在这种情况下，它看起来也导致 webapp 停止。

如果这是问题所在，解决方案是“不要那样做”。修复任何导致异常被抛出的问题。

* * *

另一种可能性是，这只是一个缺失类问题：

> 好吧，这听起来不可能（不参加战争），因为我正在运行 eclipse 环境并且它位于类文件夹目录中，并且没有显示关于找不到这些类的错误......

类加载器不会在 Eclipse 类文件夹中查找。它将在您的 Web 容器（Tomcat、Jetty 等）上的 webapp 目录中查找。

# stored-procedures - 错误 -104 创建 Firebird 存储过程的命令意外结束

> ID：12586075
> 
> 赞同：2
> 
> 时间：2012-09-25T15:21:46.783
> 
> 标签：stored-procedures, firebird, firebird2.5

我想在 Firebird 中创建一个存储过程：

```
 CREATE PROCEDURE CalcPvIncome
 ( BeginDate date,
   EndDate   date,
   KwPrice   decimal (2,2) ) 

RETURNS ( Total_PV_Production decimal (9,2),
          Total_Income decimal (9,2) )
AS
BEGIN

   FOR SELECT SUM(ENERGY/1000), SUM((ENERGY/1000) * :KwPrice) 
       FROM PVPROD 
       WHERE proddate >= :BeginDate AND proddate <= :Enddate 
       INTO :Total_PV_Production , :Total_Income
       DO

       BEGIN
        SUSPEND ;
       END
END 
```

我收到此错误：

> 引擎代码：335544569
> 
> 引擎消息：动态 SQL 错误 SQL 错误代码 = -104 命令行意外结束 - 第 18 行，第 9 列

SQL 语句：

```
SELECT 
   SUM(ENERGY/1000) AS Total_PV_Production, 
   sum((ENERGY/1000)*0.55) as Total_Income
FROM 
   PVPROD 
where  
   proddate >= '12.06.2012' and  proddate <= '12.07.2012' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T05:47:20.670

您必须`SET TERM`在存储过程之前和之后添加语句。它用于更改“终止符”。这是一个例子：

```
SET TERM ^ ;

CREATE PROCEDURE CalcPvIncome
( BeginDate date,
  EndDate   date,
  KwPrice   decimal (2,2) ) 

RETURNS ( Total_PV_Production decimal (9,2),
          Total_Income decimal (9,2) )
AS
BEGIN
  ...
END

SET TERM ; ^ 
```

请注意，默认终止符是`^`并且还请注意，您在`;`之前设置为新终止符并将其重置回`^`存储过程声明之后。

# c# - SqlConnection 构造函数中无法识别的转义序列

> ID：12586083
> 
> 赞同：6
> 
> 时间：2012-09-25T15:22:05.443
> 
> 标签：c#, sqlconnection

每当我建立连接时，它都会出错

> 无法识别的转义序列。

```
NEPOLEON\ADMN HERE ON THIS SLASH. NEPOLEON\ADMN IS MY SQL SERVER NAME.

SqlConnection con = new SqlConnection("Server=NEPOLEON\ADMN;Database=MASTER;Trusted_Connection=True"); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T15:23:46.607

转义 \ 字符，如：

```
SqlConnection con = new SqlConnection("Server=NEPOLEON\\ADMN;Database=MASTER;Trusted_Connection=True"); 
```

或者

```
SqlConnection con = new SqlConnection(@"Server=NEPOLEON\ADMN;Database=MASTER;Trusted_Connection=True"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T15:24:24.413

尝试将其更改为：

```
SqlConnection con = new SqlConnection("Server=NEPOLEON\\ADMN;Database=MASTER;Trusted_Connection=True"); 
```

或这个

```
SqlConnection con = new SqlConnection(@"Server=NEPOLEON\ADMN;Database=MASTER;Trusted_Connection=True"); 
```

在 .NET 中，您可以通过在字符串前面放置一个`@`或使用特殊值来表示要转义的字符来转义特殊字符。在这种情况下，您可以使用`\\`来表示`\`

# c - 从C中的2个线程获取返回值

> ID：12586085
> 
> 赞同：0
> 
> 时间：2012-09-25T15:22:13.570
> 
> 标签：c, pthreads

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <stdint.h>
#include <inttypes.h>

typedef struct tmp_num{
    int tmp_1;
    int tmp_2;
}t_num;

t_num t_nums;

void *num_mezzo_1(void *num_orig);
void *num_mezzo_2(void *num_orig);

int main(int argc, char *argv[]){

    pthread_t thread1, thread2;
    int tmp=0,rc1,rc2,num;

    num=atoi(argv[1]);
    if(num <= 3){
        printf("Questo è un numero primo: %d\n", num);
        exit(0);
    }

    if( (rc1=pthread_create( &thread1, NULL, &num_mezzo_1, (void *)&num)) ){
        printf("Creazione del thread fallita: %d\n", rc1);
        exit(1);
    }
    if( (rc2=pthread_create( &thread2, NULL, &num_mezzo_2, (void *)&num)) ){
            printf("Creazione del thread fallita: %d\n", rc2);
            exit(1);
    }

    t_nums.tmp_1 = 0;
    t_nums.tmp_2 = 0;
    pthread_join(thread1, (void **)(&t_nums.tmp_1));
    pthread_join(thread2, (void **)(&t_nums.tmp_2));
    tmp=t_nums.tmp_1+t_nums.tmp_2;
    printf("%d %d %d\n", tmp, t_nums.tmp_1, t_nums.tmp_2);
    if(tmp>2){
        printf("Questo NON è un numero primo: %d\n", num);
    }
    else{
        printf("Questo è un numero primo: %d\n", num);
    }
    exit(0);
}

void *num_mezzo_1(void *num_orig){
    int cont_1;
    int *n_orig=(int *)num_orig;
    t_nums.tmp_1 = 0;
    for(cont_1=1; cont_1<=(*n_orig/2); cont_1++){
        if((*n_orig % cont_1) == 0){
            (t_nums.tmp_1)++;
        }
    }
    pthread_exit((void *)(&t_nums.tmp_1));
    return NULL;
}

void *num_mezzo_2(void *num_orig){
    int cont_2;
    int *n_orig=(int *)num_orig;
    t_nums.tmp_2 = 0;
    for(cont_2=((*n_orig/2)+1); cont_2<=*n_orig; cont_2++){
        if((*n_orig % cont_2) == 0){
            (t_nums.tmp_2)++;
        }
    }
    pthread_exit((void *)(&t_nums.tmp_2));
    return NULL;
} 
```

这个程序是如何工作的：我必须输入一个数字，这个程序将计算它是否是素数（我知道这是一个糟糕的算法，但我只需要学习*pthread*）。
问题是返回的值太大了。
例如，如果我将“12”的值`tmp tmp_1 tmp_2`写入 main are `12590412 6295204 6295208`。
为什么我得到这些数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:36:05.683

问题在于您的退货声明：

第一的：

```
pthread_exit((void *)(&t_nums.tmp_1));
return NULL; 
} 
```

如果您只是要返回并死去，则无需调用 pthread_exit()

其次，您要返回一个地址 (&)，这就是您要打印的内容。试试这个：

```
return ((void *)(t_nums.tmp_1)); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:32:44.073

一些考虑：

1.  请记住， from 的返回值`pthread_exit`仅适用于 JOINABLE 线程。在某些其他情况下，您可能会使用不同的 pthread 类型（分离的）。

2.  在您的示例中，您返回的是这样的内容： void pthread_exit( **void **retval** );

3.  没有 args 时有 sigsegv。

# ruby - 是否有 watir-webdriver click_no_wait

> ID：12586088
> 
> 赞同：0
> 
> 时间：2012-09-25T15:22:19.287
> 
> 标签：ruby, watir-webdriver

我以前曾问过这个问题，但没有得到回答。抱歉重复我自己有没有人没有如何让 ruby​​ watir-webdriver 做一个 click_no_wait ？？？

谢谢

毫米

# performance - 如何向我的用户提供一个非常大的应用程序的迷你版

> ID：12586089
> 
> 赞同：0
> 
> 时间：2012-09-25T15:22:26.213
> 
> 标签：performance, lotus-notes, lotus-domino, database-replication

我的用户对我们拥有的大型 Lotus Notes 应用程序（不是 Web）的糟糕性能感到非常沮丧。它目前是 10Gb，大约有 500.000 个文档，它包含 reader 字段。

我想做的是创建应用程序应用程序的迷你版，因为大多数用户只对过去几年的文档感兴趣。

目前无法存档或移动大型应用程序，因此我正在考虑提供一个新的迷你副本并进行选择性复制以仅包含今年的文档。

我遇到的问题是应用程序的完整版需要在所有服务器上，这意味着我将在具有相同副本 ID 的同一台服务器上获得完整版和迷你版，这看起来有点吓人。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:07:59.940

我见过很多不同的方法来解决这个问题，从简单到过度设计。可悲的是，我认为我已经设计了几种过度设计的方法。幸运的是，我学到了一些教训。以下是我认为技术含量最低的方法：

您首先要做的是制作数据库的仅设计副本。我将其命名为 productiondocs.ntf。我将原始文件称为 alldocs.nsf。

将两个代理添加到 productiondocs.ntf，并确保它们受到保护以防止设计刷新/替换。调用第一个代理“synch”，并将其设置为在新的或修改过的文档上运行，并编写代码以简单地将新/修改过的文档复制到 alldocs.nsf 中。确保选中 isValid 以防止在此代理的主循环中处理已删除的文档。调用第二个代理“清除”。编写代码来检查日期（创建、修改或文档中的数据字段，具体取决于您要强制执行的规则）并删除超过一年的文档。

现在，您可以使用选择性复制——但只能使用一次。制作 alldocs.nsf 的选择性副本，仅包含一年的文档，并将其命名为 yeardocs.nsf。然后制作 yeardocs.nsf 的非副本并将其命名为 production.nsf。最后，使用 production.ntf 替换 production.nsf 的设计。仔细检查代理是否存在以及它们是否受到保护以防止设计刷新/替换操作。（某些版本的设计器把这搞砸了！）安排同步运行尽可能频繁，并安排每天或每周运行清除。将 production.nsf 复制到所有服务器，并将您的用户转移到 production.nsf。

（注意：你可以反过来做，在清除现有数据库后将用户保留在现有数据库中；但老实说，我认为从一个全新的 NSF 开始，你会获得额外的性能提升，所以这就是我按照我的方式编写它的原因做过。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:32:15.683

我真的很喜欢 Richard 的解决方案，但我最近实现了我目前喜欢的那个的派生。基本上，将每个文档中的任何元数据放入作为您的“索引”的单独数据库中，当他们打开索引文档时，它会在 alldocs.nsf 中打开文档（并关闭索引文档）。

为此，请在 alldocs.nsf 中编写一个代理，以便在修改或保存文档时创建索引文档。它应该只复制您要用于索引的字段（元数据）。**从我的Copy Incident 到 Main**代理执行此操作的示例代码（没有它调用的子例程或函数） ：

```
Sub Initialize
Dim session As New NotesSession
Dim maindb As NotesDatabase ' Main SIR
Dim mainincidents As NotesView ' view in Main SIR
Dim maindoc As NotesDocument ' document in Main SIR
Dim projectdoc, nextprojectdoc As NotesDocument ' document in this database
Dim ndc As NotesDocumentCollection ' unprocessed documents in this database
Dim fieldItem As NotesItem
Dim reportnumber, value, formtype As Variant
Dim fieldsToCopy (10) As String 
Dim reason As String

On Error GoTo errorhandler 

Call StartAgentLogging ( session )

Set thisdb = session.Currentdatabase

' find all unstamped documents
Set ndc = thisdb.Unprocesseddocuments

If ndc.Count = 0 Then
    Call agentLog.LogAction ( "No incidents to process" )
    Exit Sub
End If

maindbfilepath = DetermineKeyword("MAINSIR")
Set maindb = session.Getdatabase("","")
Call maindb.Open("", maindbfilepath)

If Not maindb.Isopen Then
    reason = "Main Security database could not be found at " & maindbfilepath
    Call agentLog.LogAction ( reason )
    MessageBox reason, 16, "Error"
    Exit Sub
End If

Set mainincidents = maindb.Getview("(Incidents for Upload)")
Set projectdoc = ndc.Getfirstdocument()
fieldsToCopy (0) = "ReportType"
fieldsToCopy (1) = "ReportNumber"
fieldsToCopy (2) = "ReportDate"
fieldsToCopy (3) = "IncidentDate"
fieldsToCopy (4) = "ProjectName"
fieldsToCopy (5) = "ProjectCountry"
fieldsToCopy (6) = "ProjectLocation"
fieldsToCopy (7) = "ReporterName"
fieldsToCopy (8) = "ReporterPhone"
fieldsToCopy (9) = "ReporterEmail"
fieldsToCopy (10) = "Appointment"

While Not projectdoc Is Nothing
    formtype = projectdoc.GetItemValue ("Form")
    If formtype(0) = "Incident" Then
        ' check to see if that exists in the main SIR
        reportnumber = projectdoc.GetItemValue("ReportNumber")
        Call agentLog.LogAction ( "Checking " & reportnumber(0) )
        Set maindoc = mainincidents.GetDocumentByKey(reportnumber(0), True)
        Call agentLog.LogAction ( "Accessing " & reportnumber(0) )

        If maindoc Is Nothing Then
            Call agentLog.LogAction ( "Main does not contain " & reportnumber(0) & " creating new document." )
            ' if not, create new document
            Set maindoc = maindb.Createdocument()
            maindoc.Form = "Incident"

            ForAll fieldname In fieldsToCopy
                Call agentLog.LogAction ( "Field name: " & fieldname ) 
                Set fieldItem = projectdoc.Getfirstitem(fieldname)
                Call maindoc.Copyitem(fieldItem, fieldname)
            End ForAll

            Call maindoc.Save(True, False)
            Call CreateNotice ( maindoc )
        Else
            Call agentLog.LogAction ( "Main contains " & reportnumber(0) & " updating document." )
            ' if it does, update data
            ForAll fieldname In fieldsToCopy
                Call agentLog.LogAction ( "Field name: " & fieldname ) 
                value = projectdoc.GetItemValue(fieldname)
                Call maindoc.ReplaceItemValue(fieldname, value(0))
            End ForAll
        End If

        'Path and filename
        Call maindoc.Replaceitemvalue("Path", thisdb.Filepath)
        Call maindoc.Save(True, False)
        Call agentLog.LogAction ( "Saved " & reportnumber(0) )
    Else
        Call agentLog.LogAction ( "Project form is " & projectdoc.Form(0) )
    End If

    ' stamp document as processed
    Set nextprojectdoc = ndc.GetNextDocument(projectdoc)
    Call session.Updateprocesseddoc(projectdoc)
    Set projectdoc = nextprojectdoc
Wend 

exiting:
    Exit Sub
errorhandler:' report all errors in a messagebox
    reason = "Error #" & CStr (Err) & " (" & Error & ") when creating incident in Main database, on line " & CStr (Erl)
    Call agentLog.LogAction ( reason )
    MessageBox reason, 16, "Error" 
    Resume exiting
End Sub 
```

然后，您需要在索引数据库中的索引表单的onLoad事件中添加代码。我把我的放在一个由 ToolsRunMacro 调用的代理中，但你可以直接把它放进去。这是我的**Open Project Copy**代理。

```
Sub Initialize
' this button opens the incident report in the project database
Dim ws As New NotesUIWorkspace
Dim session As New NotesSession
Dim reportdb As NotesDatabase
Dim view As NotesView
Dim uidoc As NotesUIDocument
Dim thisdoc, reportdoc As NotesDocument
Dim filepath, reportnumber As Variant
Dim baseurl, opener, unid As String

Call StartAgentLogging ( session )
Set thisdb = session.Currentdatabase

Set uidoc = ws.CurrentDocument
Set thisdoc = uidoc.Document
filepath = thisdoc.GetItemValue ( "Path" )
reportnumber = thisdoc.GetItemValue ( "ReportNumber" )

Set reportdb = session.GetDatabase (thisdb.Server, filepath (0), False )
If reportdb Is Nothing Then
    MessageBox ( "Could not find Project Security Incident Report database" & Chr$(10) & thisdb.Server & "\" & filepath(0) )
    Call agentLog.LogAction ( "Could not find Project Security Incident Report database" & Chr$(10) & thisdb.Server & "\" & filepath(0) )
    Exit Sub
End If
If Not reportdb.Isopen Then
    Call reportdb.Open(thisdb.Server, filepath (0)) 
End If
Set view = reportdb.GetView ( "Incidents" )
Set reportdoc = view.GetDocumentByKey ( reportnumber(0) )
If reportdoc Is Nothing Then
    MessageBox ( "Could not find Report #" & reportnumber(0) )
    Call agentLog.LogAction ( "Could not find Report #" & reportnumber(0) )
    Exit Sub
End If

Call uidoc.Close
unid = reportdoc.UniversalID
baseurl = reportdb.NotesURL
opener = Left$ ( baseurl, InStr ( baseurl, "?" ) -1 ) & "/Incidents/" & unid & "?OpenDocument"
Call ws.URLOpen ( opener )
Call agentLog.LogAction ( "Opened Report #" & reportnumber(0) )
End Sub 
```

现在，您可以将索引数据库限制为仅包含最近一年的文档，或者查看当所有文档都在其中时它是如何工作的。很大程度上取决于您需要在视图中提供多少数据。

在我的情况下，索引数据库包含来自许多数据库的文档的索引文档，并充当“完整数据”数据库的中央访问点。它仍在测试中，所以我不确定它对我的效果如何，但我想我会为你提供它作为一种可能性。

# asp.net - 调试时的 cookie asp.net

> ID：12586092
> 
> 赞同：1
> 
> 时间：2012-09-25T15:22:29.277
> 
> 标签：asp.net, asp.net-mvc

我有一个 ASP.NET 应用程序，在我自己的机器上发布站点后它运行良好，但如果我尝试调试应用程序，所有 cookie 都显示为空对象。

一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:30:54.577

这可能是因为您没有正确设置域，在 web.config 上为 cookie 设置，所以没有保存 cookie。因此，如果您已正确设置此行，请检查您的 web.config：

```
<httpCookies domain="debugname.com"  /> 
```

# css - 将 clearfix 应用于 nth-child 而无需额外的标记

> ID：12586093
> 
> 赞同：4
> 
> 时间：2012-09-25T15:22:39.010
> 
> 标签：css, responsive-design, percentage, css-selectors, clearfix

首先，为了非常清楚，这里有一个 JS fiddle 展示了我想要实现的目标：

[http://jsfiddle.net/bb_matt/VsH7X/](http://jsfiddle.net/bb_matt/VsH7X/)

这是解释-我的理由：

我正在使用 1140 网格框架创建一个响应式站点。这是一个相当复杂的布局。

我创建了一个可重复使用的简单画廊类，它可以放入任何定义的列大小并使用媒体查询，我将相关的百分比宽度应用于 li 元素。每个 li 元素的右边距为 5%。我在媒体查询中使用 nth-child(xn+x) 来删除每行末尾的右边距。

一切正常 - 图像随着布局调整大小而调整，连续画廊项目的数量正如我根据百分比定义的那样工作。

唯一需要解决的问题是在行之间清除。我无法添加额外的 html 标记，并且我想避开过于复杂的 jquery 修复。

我知道解决这个问题的两种方法，但我并不热衷于其中任何一种。

第一个修复，简单地在 li 元素上使用 display: inline-block ，顶部垂直对齐，一切都会正确流动......*但是*，所有百分比都会被拍摄，并且画廊项目不再整齐地适合分配的空间。

第二个修复，给列表项一个高度。如果有必要，我会沿着这条路线走——它需要不同的高度，具体取决于分辨率——没什么大不了的，但不是那么整齐。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T19:16:00.973

我在这里更新了你的小提琴：http: [//jsfiddle.net/VsH7X/5/](http://jsfiddle.net/VsH7X/5/)

我`clear: left`在每个新行的第一个项目中添加了一个。

```
ul.gallery li:nth-child(5n+6) {
  clear: left;
} 
```

请记住，`:nth-child`伪类在 IE6-8 或 FF3 及以下版本中不起作用。​</p>

# jquery-ui - JQuery UI 'Droppable' 的问题

> ID：12586094
> 
> 赞同：0
> 
> 时间：2012-09-25T15:22:48.000
> 
> 标签：jquery-ui, drag-and-drop

这就是我遇到的问题：我创建了几个可拖动元素，但是当我将一个放在可放置元素上时，它不会留在那里。以下是更多细节。

我的 JavaScript 函数从 PHP 接收 JSON 数组，然后使用循环创建可拖动元素：

```
<script type="text/javascript">
    function init() {
        var items = <?php echo $result_j;?>; //items is an one dimensional array

        for ( var i=0; i<<?php echo $total_rows_j;?>; i++ ) {      
            $('<div>' + items[i] + '</div>').data( 'item_name', items[i] ).attr( 'class', 'snk_button' ).appendTo( '#drag' );
         } 
```

使用“items”数组，我创建了几个 div 元素（代码上方），然后我将它们变成可拖动元素（代码如下）。

```
 $(".snk_button").draggable( {
            containment: '#drag_section',//Div #drag_section contains the Div #drag 
            stack: '#drag div',
            cursor: 'move',
            revert: true
         } ) 
```

所以，到目前为止，一切似乎都如预期的那样，我能够拖动我的元素（从“项目”数组创建）。

接下来，我创建了可放置元素，如下所示：

```
 $( "#dropp" ).droppable({
         drop: function() {
         alert('ok');
             }
         });
    }// End function init()
</script> 
```

但是当我在这个可放置元素上拖动我的一个可拖动元素时，我什至会收到警报，但可拖动元素不会留在可放置元素上。

谁能帮我确定为什么我的可拖动元素没有停留在可放置元素上？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:31:04.587

你用过`revert :true`.. 这意味着

**Revert** 表示如果设置为 true，则元素将在拖动停止时返回到其起始位置。可能的字符串值：“有效”、“无效”。如果设置为无效，则仅当可拖动对象未放置在可放置对象上时才会发生还原。对于有效，它是相反的方式。

`invalid`如果您的`draggable`元素没有放在正确的元素上，您可能需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:39:36.510

非常感谢您为我指明了正确的方向。我已经通过以下方式解决了这个特殊问题：

我已经编辑了我的可放置代码，如下所示：

```
$( "#filtered" ).droppable(
   drop: handleDrop
});

function handleDrop( event, ui ) {
    ui.draggable.draggable( 'option', 'revert', false );
} // End function handleDrop 
```

这解决了可拖动对象不停留在可放置对象上的问题（之前已描述）。

# android - 强制键盘在警报对话框中可见

> ID：12586095
> 
> 赞同：0
> 
> 时间：2012-09-25T15:22:49.057
> 
> 标签：android, keyboard, android-alertdialog

我想使用一个警报对话框，其中有几个编辑文本，以便用户可以键入然后单击保存按钮。

我已经使用我的布局 xml（名为 custom_dialog_add 的 xml）成功地扩展了我的 alertdialog，代码如下：

```
 public OnClickListener saveButtonListener = new OnClickListener()
   // create a new Button and add it to the ScrollView   
   {
      @Override
      public void onClick(View v) 
      {   

          AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
            builder.setView(getLayoutInflater().inflate(R.layout.custom_dialog_add, null));
            builder.create();

            View view = getLayoutInflater().inflate(R.layout.custom_dialog_add, null); 

            builder.setPositiveButton(R.string.OK, null);             
            AlertDialog Custom_dialog_add = builder.create();
            Custom_dialog_add.show(); 
```

警报对话框中的 EditText 和 Button 名称为 A_EditText、B_EditText 和 Button_Save。

> > 在警报对话框中，无论EditTexts是否聚焦，我如何强制键盘始终打开/可见？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:38:53.310

在显示对话框之后，您应该能够`requestFocus()`在其中一个`EditText`s 上打开键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:16:19.383

试试这个：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(YOUREDITTEXTHERE, InputMethodManager.SHOW_IMPLICIT); 
```

用您的 EditText 视图替换 YOUREDITTEXTHERE

# javascript - Backbone.js base 64 编码？

> ID：12586098
> 
> 赞同：0
> 
> 时间：2012-09-25T15:22:59.437
> 
> 标签：javascript, backbone.js, base64

这是一个非常特殊的案例，但我不想为整个功能重写 Javascript。有没有办法让 Backbone.js 中的每个 HTTP 请求都以 64 为基数编码？它阻止了在 Firefox 中保存对象，不幸的是，这是我们必须使用的测试环境。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:01:22.833

您可以覆盖`Backbone.sync`并让它在保存时做任何您想做的事情。特别是 0.92 的行`1331`和`1332`源代码处理您发送到服务器的编码以及如何获取其中的模型数据。

您可以将`Backbone.sync`主干中的批发复制到您的项目中并在那里进行修改。

显然，您将需要一个库来执行 base64 编码，但您可以执行以下操作：

```
 params.contentType = 'base64';
  params.data = base64.encode(JSON.stringify(model.toJSON())); 
```

（显然`base64`是您的代码提供的对象）

# salesforce - Salesforce SOQL 描述表

> ID：12586111
> 
> 赞同：15
> 
> 时间：2012-09-25T15:23:51.063
> 
> 标签：salesforce, soql

有没有办法在 Salesforce 的表中获取所有字段的列表？`DESCRIBE myTable`不工作，`SELECT * FROM myTable`也不工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T17:22:59.787

在 Apex 中，您可以通过运行以下 Apex 代码片段来获取此信息。如果您的表/对象被命名`MyObject__c`，那么这将为您提供一组您有权访问的对象上所有字段的 API 名称（这很重要 --- 即使作为系统管理员，如果您的表上的某些字段/对象通过现场级别安全对您不可见，它们不会显示在此处）：

```
// Get a map of all fields available to you on the MyObject__c table/object
// keyed by the API name of each field
Map<String,Schema.SObjectField> myObjectFields 
   = MyObject__c.SObjectType.getDescribe().fields.getMap();

// Get a Set of the field names
Set<String> myObjectFieldAPINames = myObjectFields.keyset();

// Print out the names to the debug log
 String allFields = 'ALL ACCESSIBLE FIELDS on MyObject__c:\n\n';
for (String s : myObjectFieldAPINames) {
    allFields += s + '\n';
}
System.debug(allFields); 
```

要完成此操作并实现`SELECT * FROM MYTABLE`功能，您需要使用以下字段构建动态 SOQL 查询：

```
List<String> fieldsList = new List<String>(myObjectFieldAPINames);
String query = 'SELECT ';
// Add in all but the last field, comma-separated
for (Integer i = 0; i < fieldsList.size()-1; i++) {
   query += fieldsList + ',';
}
// Add in the final field
query += fieldsList[fieldsList.size()-1];
// Complete the query
query += ' FROM MyCustomObject__c';
// Perform the query (perform the SELECT *)
List<SObject> results = Database.query(query); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:37:10.140

describeSObject API 调用返回有关给定对象/表的所有元数据，包括其字段。它在 SOAP、REST 和 Apex API 中可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:37:30.060

尝试使用**Schema.FieldSet**

```
Schema.DescribeSObjectResult d =   Account.sObjectType.getDescribe();
Map<String, Schema.FieldSet> FsMap = d.fieldSets.getMap(); 
```

[完整的文档](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_fieldsets_describe.htm)

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2014-08-23T15:04:50.613

你试过**`DESC myTable`**吗？

对我来说它工作正常，它也在斜体的基本提示中。看：

![在此处输入图像描述](../Images/1a0c62788041314733b516348b971d8f.png)

# java - 如何使用 XStream 制作预配置模板

> ID：12586114
> 
> 赞同：0
> 
> 时间：2012-09-25T15:23:57.493
> 
> 标签：java, xml, xstream

我目前正在开发一个使用 XStream 从 XML 创建对象的系统。一个示例对象是

```
@XStreamAlias("TestClass")
public class TestClass{

@XStreamAlias("format")
private String format;

public String getFormat(){
    return format;
}

public void setFormat(String format){
    this.format = format;
}
} 
```

这个类有一个字段，一个格式字段，构造它的 XML 如下所示：

```
<TestClass>
    <format>foo</format>
</TestClass> 
```

现在我想用特定的格式实例化这个类的不同实例。例如，我想要一个格式为 foo 的 TestClass 对象和一个格式为 bar 的对象。但不是生产

```
<TestClass>
    <format>foo</format>
</TestClass>

<TestClass>
    <format>bar</format>
</TestClass> 
```

我想使用某种别名系统，这样就不需要上面的 XML，而是可以使用

```
<TestClassFoo />
<TestClassBar /> 
```

当然，名称不需要包含指定的格式。

我看到必须有一个自定义转换器，但我再次不想对每个别名进行硬编码，而是也从 XML 加载它们（是的，它变得复杂）。这样做的结果是为不同的 XML 对象创建快捷模板，这些模板可以动态配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:09:31.117

如果您的目标是更紧凑的 XML，为什么不使用`@XStreamAsAttribute`这样您会得到类似的输出`<TestClass format="foo"/>`？否则，是的，您将不得不编写一个自定义转换器来完成您想要的操作。

# c++ - 项目之间应该如何依赖？

> ID：12586115
> 
> 赞同：1
> 
> 时间：2012-09-25T15:23:59.160
> 
> 标签：c++, visual-studio, dependencies, project-management, projects-and-solutions

项目应该在多大程度上相互独立？

我有一个非常大的 Visual Studio 解决方案，其中所有项目都相互依赖。我无法从解决方案中获取单个项目并将其添加到另一台计算机上的另一个解决方案中，因为它们都相互关联。

我做的事情正确吗？

* * *

例如;

考虑一下我的这三个项目（磁盘文件、数据转换器和数学 - .h 和 .cpp 文件对是 C++ 类；我将通过它们各自的名称提及它们）：

```
The Solution
|
|---- Disk File
|     |
|     |---- BinaryFile.h, BinaryFile.cpp
|     |---- TextFile.h, TextFile.cpp
|
|---- Data Converter
|     |
|     |---- Utf8.h, Utf8.cpp
|     |---- XmlParser.h, XmlParser.cpp
|     |---- StringFormatter.h, StringFormatter.cpp
|
|---- Math
      |
      |---- Plotter2D.h, Plotter2D.cpp
      |---- Matrix.h, Matrix.cpp 
```

*   `TextFile`用于`Utf8`字符编码。这使得`Disk File`依赖于`Data Converter`.
*   `XmlParser`使用`TextFile`. 这使得`Data Converter`依赖于`Disk File`.
*   `Plotter2D`用于`TextFile`转储一些数据以与外部软件一起使用，并在其方法`Matrix`中使用一些字符串格式化工具。`::ToString()`这使得`Math`依赖于`Disk File`和`Data Converter`。

这只是几个类之间的依赖关系的一个例子。事实上，我的解决方案中有更多文件。这是一团乱麻的代码依赖。

我将和我的一个朋友开始一个项目。他在他的解决方案中需要我的`Math`项目。但是要让他适应他自己的解决方案并不容易，因为它会给这些依赖项带来很多编译器错误。

这种依赖量正常吗？我做得对吗？我在每个需要它们的项目中保留所有公共文件的副本怎么样（这可能很愚蠢，我只是在问它）？

我需要你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:38:36.967

总会有这样的依赖关系，但你可以使用一些方法来避免它们：

1.  通过不包括跨模块头文件来保持 .h 文件的独立性，而是在此处使用前向声明并使用 .cpp 文件中的实际头文件。

2.  对于要在函数中传递的其他头文件中定义的枚举，可以使用 void 指针来传递和验证 .cpp 文件中的值。

3.  您也可以使用“extern C”函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:40:13.683

管理依赖项通常是一个复杂的问题。您似乎已经关注的要点是依赖项应该创建一个无环图。

除此之外，您应该尽可能地打破依赖关系。例如，`XmlParser`真的需要`TextFile`吗？或者想要解析文本文件的应用程序是否可以实例化后者，将内容读入字符串并将其传递给`XmlParser`？如果您设法到第二个，那么`XmlParser`不再依赖`TextFile`.

要考虑的另一件事是您正在创建的依赖项的*类型。*使用相同的示例，`TextFile`在公共接口中使用`XmlParser`? 需要在那里使用吗？如果`XmlParser`取决于`TextFile`你需要链接库，如果它是接口的一部分，那么用户`XmlParser`将必须包含`TextFile`创建更高耦合的标题。在这种情况下，您可以例如将文件名传递给`XmlParser`而不是 a`TextFile`以从接口中删除依赖项。

归根结底，这有点艺术。专注于尽可能少的依赖关系，对于那些需要的依赖关系，尽量使耦合最小化。

另一件事是数学库。我会打破对`TextFile`. 额外的功能可以在处理数学组件序列化的单独库中提供。这将允许`Math`不需要文件备份的用户不依赖该`TextFile`组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:40:45.953

更好的方法是避免项目之间的依赖循环，在您的情况下，“磁盘文件”和“数据转换器”等实用程序类可能存在于同一个项目中，并且您可以使用命名空间来强制模块化。

为了更好地了解您的依赖关系，建议使用[doxygen](http://www.doxygen.nl/)或[CppDepend](http://www.CppDepend.com)等工具来检测项目之间的所有依赖关系，并在搜索您想要提供给朋友的特定功能所需的所有依赖关系时可能会节省时间。

# php - PHP将X个字符后的字符串拆分为单独的单词

> ID：12586116
> 
> 赞同：1
> 
> 时间：2012-09-25T15:24:01.160
> 
> 标签：php

> **可能重复：**
> [PHP：str_split 没有自动换行](https://stackoverflow.com/questions/9648019/php-str-split-without-word-wrap)

假设我有这个字符串：

```
$string = "Lorem ipsum dolor sit amet"; 
```

我的数据库有字符限制：15 个字符。通过使用 str_split($string,15)，我得到了这个结果：

```
Array
(
[0] => Lorem ipsum dol
[1] => or sit amet
) 
```

这对我来说看起来很难看...如何使用 PHP 将字符串剪切到最接近的单词，但结果是这样的：

```
Array
(
[0] => Lorem ipsum
[1] => dolor sit amet
) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T15:28:14.120

您可以使用[`wordwrap`](http://php.net/manual/en/function.wordwrap.php)和[`explode`](http://php.net/manual/en/function.explode.php)

```
$string = "Lorem ipsum dolor sit amet";
$string = wordwrap($string, 15, ";;", true);
var_dump(explode(";;", $string)); 
```

输出

```
array
  0 => string 'Lorem ipsum' (length=11)
  1 => string 'dolor sit amet' (length=14) 
```

# fonts - python matplotlib mathtext AMSeuler 字体

> ID：12586120
> 
> 赞同：2
> 
> 时间：2012-09-25T15:24:13.867
> 
> 标签：fonts, matplotlib

有没有办法在 matplotlib 图形中使用 AMSeuler 字体？我已经尝试过使用 rc('mathtext', fontset='eulermath')，但由于 matplotlibrc 中没有该字体，所以它当然不起作用。这很烦人，因为在 ClassicThesis 风格中使用的 Palatino 字体上，Computer Modern 字体并不好看。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:20:40.360

自己找到了解决方案，但不完全是我想要的，请参阅 [https://github.com/nschloe/matplotlib2tikz](https://github.com/nschloe/matplotlib2tikz)

欢迎任何其他建议

# jquery-ui - jQuery UI Datepicker 中当前最先进的可访问性是什么？

> ID：12586123
> 
> 赞同：4
> 
> 时间：2012-09-25T15:24:27.110
> 
> 标签：jquery-ui, accessibility, jquery-ui-datepicker

**序言**
我们正在为 Web 门户的某些部分添加可访问性。其中之一包括 jQuery UI Datepicker，作为内联小部件，而不是弹出窗口。

我们已经在网上搜索并阅读了 jQuery UI 论坛：诸如[New to JQuery-UI & working on datepicker 508 Compliance 之](http://forum.jquery.com/topic/new-to-jquery-ui-working-on-datepicker-508-compliance)类的帖子，[Inline datepicker cannot change month using keyboard](http://forum.jquery.com/topic/inline-datepicker-cannot-change-month-using-keyboard-tab-will-skip-left-and-right-month-change-buttons)，[JQuery Datepicker - Key events - goal?](http://forum.jquery.com/topic/jquery-datepicker-key-events-goals) 人们在哪里询问可访问性，或提出要为此工作。

我们已经看到 kbwood 有一个（被遗弃的？）支持可访问性的 fork/rewrite：[论坛帖子](https://forum.jquery.com/topic/jquery-ui-datepicker-refactor)和[源代码](https://github.com/kbwood/jquery-ui)。那一个使用*手工*模板机制。

然后是一个使用 jQuery tmpl 插件作为模板机制的 datepicker[重写示例。](http://view.jqueryui.com/datepicker/datepicker-rewrite/index.html)这个也有 WAI ARIA 属性，但是基于 jQuery tmpl 插件，而这个插件又被放弃了（我们喜欢这是官方版本，它对我们来说几乎是完美的）。

此外，jQuery UI 1.9 RC 已经发布，在这方面似乎没有任何大的变化。所以这是我的问题：

**问题**
如果我们想添加可访问性，您知道从哪里开始的最新点是什么吗？有没有什么东西已经半生不熟，我们可以拿起并继续努力？

我们最好不要从一个废弃的分支开始，所以不要在下一次 jQuery UI 更新时把所有东西都扔掉。

谢谢大家的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T12:50:09.693

我知道这或多或少已经过时了，但我建议您通过正确的渠道询问。这显然不是stackoverflow，而是：

*   维基页面：[http ://wiki.jqueryui.com/w/page/12137778/Datepicker](http://wiki.jqueryui.com/w/page/12137778/Datepicker)
*   在 IRC 聊天中：irc://irc.freenode.net/#jqueryui-dev
*   开票：[http ://bugs.jqueryui.com/report/10?P=datepicker](http://bugs.jqueryui.com/report/10?P=datepicker)

仅供参考：日期选择器小部件的重写正在计划中，请参阅 Wiki 页面。

# php - CodeIgniter HMVC 扩展 MX_Controller，无法正确使用 get_instance

> ID：12586125
> 
> 赞同：7
> 
> 时间：2012-09-25T15:24:41.920
> 
> 标签：php, codeigniter, hmvc

我在 /application/core 中有一个控制器

**/application/core/CMS_Controller.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

require APPPATH."third_party/MX/Controller.php";

class CMS_Controller extends MX_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function show_something() {
        echo "something shown";
    }
} 
```

我在从 CMS_Controller 扩展的模块（/modules/my_module/controllers/controller.php）中有另一个控制器

**/modules/my_module/controllers/controller.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Controller extends CMS_Controller {

    public function index() {
        $this->load->view('view');
    }
} 
```

而且，在 view.php (/modules/my_module/views/view.php) 我这样做： **/modules/my_module/views/view.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
 $ci =& get_instance();
 echo $ci->show_something();
?> 
```

我得到这个错误：

> 致命错误：在第 3 行的 /home/gofrendi/public_html/No-CMS/modules/my_module/views/view.php 中调用未定义的方法 CI::show_something()

如果我不使用 MX_Controller 而是使用 CI_Controller 它将起作用： **/application/core/CMS_Controller.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

//require APPPATH."third_party/MX/Controller.php";

class CMS_Controller extends CI_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function show_something() {
        echo "something shown";
    }
} 
```

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-22T17:07:32.383

在构造函数末尾的 application/third_party/MX/Controller.php 中（第 54 行之后）我添加了

```
/* allow CI_Controller to reference MX_Controller */
CI::$APP->controller = $this; 
```

如果您查看代码 $this 指的是当前类，即 MX_Controller 和 CI::$APP 指的是 CI_controller（查看 MX/Base.php 文件）

所以现在很简单......获取对 CI_Controller 的引用，我们将做（按照正常情况）

```
 $this->CI =& get_instance(); 
```

并获得对 MX_Controller 我们将做的参考

```
 $this->CI =& get_instance()->controller; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T23:37:53.780

我遇到了同样的问题，找到了那个帖子，它使我的网站正常工作，试试看吧？

“除非您计划在另一个控制器中运行一个控制器，否则您不需要扩展 MX_Controller。在很多情况下，代码被放入库中。否则，您的控制器应该只扩展 MY_Controller。”

在这里找到：http: [//ellislab.com/forums/viewthread/179478/](http://ellislab.com/forums/viewthread/179478/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T20:48:40.023

对我来说，你不需要获取实例，所以我的尝试是这样的：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

 echo $this->show_something();
?> 
```

代替

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
 $ci =& get_instance();
 echo $ci->show_something();
?> 
```

无论如何，设置自己的库并执行以下操作是一种好习惯：

```
$this->load->library('foo_lib');
$this->foo_lib->show_somenthing(); 
```

# asp.net - 如何使用 ASP.Net (Mvc) 正确提供 pdf 文件？

> ID：12586128
> 
> 赞同：2
> 
> 时间：2012-09-25T15:24:56.140
> 
> 标签：asp.net, pdf, encoding, compression, httphandler

我在从我的 ASP.Net MVC 应用程序中提供 PDF 文件时遇到了一些问题。

我看到的行为是在我的项目中链接到 PDF 文件后，出现以下错误：

在 Firefox 中 - 内容编码错误 - 您尝试查看的页面无法显示，因为它使用了无效或不受支持的压缩形式。

在 Chrome 中 - 错误 330 (net::ERR_CONTENT_DECODING_FAILED)：未知错误。

据我所知，我并没有对 PDF 内容/编码做任何花哨的事情，它只是一个标准的链接内容文件（类似于网站上的 jpg 或 png 可以正常工作）。

谁能提供有关如何解决此问题的见解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T15:24:56.140

这最终证明与我提供内容的默认[压缩有关。](http://msmvps.com/blogs/omar/archive/2008/06/30/deploy-asp-net-mvc-on-iis-6-solve-404-compression-and-performance-problems.aspx)

一旦我将“.pdf”添加到*不*被压缩的文件列表中，我的错误就消失了，我可以很高兴地按预期提供 PDF 内容。

如果有人通过上述错误的谷歌结果找到了解决这个问题的方法，我会看看您的内容是如何被加密的，以及这是否会导致在类似于我的情况下提供 PDF 文件时出现问题。

# java - 花括号之间的Java正则表达式匹配

> ID：12586132
> 
> 赞同：19
> 
> 时间：2012-09-25T15:25:02.030
> 
> 标签：java, regex

我需要解析一个日志文件并获取时间和相关的函数调用字符串 这存储在日志文件中，如下所示： {"time" : "2012-09-24T03:08:50", "message" : "Call( ) 开始"}

在其他字符串字符之间会有多个记录时间函数调用，因此我希望使用正则表达式来遍历文件并获取所有这些

我想获取包括大括号在内的全部记录信息

我试过以下

```
Pattern logEntry = Pattern.compile("{(.*?)}");
Matcher matchPattern = logEntry.matcher(file); 
```

和

```
Pattern.compile("{[^{}]*}");
Matcher matchPattern = logEntry.matcher(file); 
```

我不断收到非法重复错误，请帮助！谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-25T15:28:15.160

你需要用 '\' 转义 '{' & '}'

所以：`"{(.*?)}"`变成：`"\\{(.*?)\\}"`

你必须先用另一个'\'转义'\'

有关需要转义的字符的完整列表，请参见：[http ://www.regular-expressions.info/reference.html...](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T15:27:18.370

`Braces`是用于重复组的特殊正则表达式字符，因此您必须对它们进行转义。

```
Pattern logEntry = Pattern.compile("\\{(.*?)\\}"); 
```

简单测试仪：

```
 public static void main(String[] args) throws Exception {
        String x =  "{\"time\" : \"2012-09-24T03:08:50\", \"message\" : \"Call() started\"}";
        Pattern logEntry = Pattern.compile("\\{(.*?)\\}");
        Matcher matchPattern = logEntry.matcher(x);

        while(matchPattern.find()) {
            System.out.println(matchPattern.group(1));
        }

    } 
```

给我：

```
"time" : "2012-09-24T03:08:50", "message" : "Call() started" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-14T09:02:22.663

您应该使用积极的前瞻和后瞻：

```
(?<=\{)([^\}]+)(?=\}) 
```

*   (?<={) 匹配后跟 { 的所有内容
*   ([^}]+) 匹配任何不包含 } 的字符串
*   (?={) 匹配 { 之前的所有内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:29:41.317

正则表达式中的 {} 具有特殊含义，因此需要对其进行转义。

通常转义是通过在要转义的字符前面加上反斜杠来实现的。在用方括号定义的字符类中，您不需要这样做

所以像

```
Pattern.compile("\{[^{}]*\}"); 
```

可能更接近你想做的事

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-02T05:51:21.683

这对于非嵌套括号非常有效，但对于像这样的表达式

`(sum(x) * 100) / (sum(y) + sum(z))`

`[a-z]*[\{]+([a-zA-Z0-9]+)[\}]+`作品。

# php - 如果 $_SESSION 变量已更改，如何刷新站点

> ID：12586136
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:25:14.943
> 
> 标签：php, mysql, session, refresh

当我单击一个链接时，我正在从数据库中写入我的 $_SESSION 变量。

```
public function getProjectById($id){
  $query="SELECT * FROM projects WHERE id=\"$id\"";
  $result=mysql_query($query);
  $num=mysql_numrows($result);

  while ($row = mysql_fetch_object($result)) {
    $_SESSION['projectid'] = $row->id;
    $_SESSION['projecttitle'] = $row->title;
    $_SESSION['projectinfo'] = $row->info;
    $_SESSION['projecttext'] = $row->text;
    $_SESSION['projectcategory'] = $row->category;
  }
} 
```

现在我的变量被覆盖了，我想在我的 index.php 中显示这些变量，如下所示：

```
<div id="textContent">
   <?php
    if(isset($_SESSION['projecttext']) && !empty($_SESSION['projecttext'])) {
        echo $_SESSION['projecttext'];
    }else {
        echo 'No text';
    }
?></div> 
```

但是当然，我的页面不会自动刷新。我怎样才能做到这一点？

编辑：调用代码：

```
$(document).on("click", ".sublink", function(){
    var subsite = $(this).data('subsite');
    var category = $(this).data('category');
    var title = $(this).data('title');
    var info = category + "/" + title;
    var lower = info.toLowerCase();
    var nospaces = lower.split(' ').join('');
    $('#imageContent').load('php/getImages.php?info='+nospaces);
    $('#textContent').load('php/getProjectById.php?id='+subsite);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:30:32.843

有几种方法可以实现这一点（javascript替换用户已经可见的html代码，或用于刷新整个页面），但我猜你的函数调用是由onclick触发的（调用特定的php页面）你会可能最好使用[元刷新](http://en.wikipedia.org/wiki/Meta_refresh)

重新加载整个页面。请注意，现在这被认为是不受欢迎的;-)

编辑：像这样：

```
public function getProjectById($id){
  $query="SELECT * FROM projects WHERE id=\"$id\"";
  $result=mysql_query($query);
  $num=mysql_numrows($result);

  while ($row = mysql_fetch_object($result)) {
    $_SESSION['projectid'] = $row->id;
    $_SESSION['projecttitle'] = $row->title;
    $_SESSION['projectinfo'] = $row->info;
    $_SESSION['projecttext'] = $row->text;
    $_SESSION['projectcategory'] = $row->category;
  }
// everything done here, do a meta refresh here
?> <meta http-equiv="refresh" content="0;URL='http://example.com/'"> <?php
// worse alternative using .. echo("<meta....
} 
```

# clearcase - ClearCase：基线中的版本扩展路径名

> ID：12586141
> 
> 赞同：1
> 
> 时间：2012-09-25T15:25:33.500
> 
> 标签：clearcase, clearcase-ucm, cleartool

是否可以获得属于基线的元素的版本扩展路径名？

例如，如果我在 UCM 项目中有一个文件名`/vobs/myproj/mydir/myfile.txt`和一个基线，是否有一个子命令可以重新调整其所属的版本扩展路径名？`bl_rc11``cleartool``/vobs/myproj/mydir/myfile.txt``bl_rc11`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:46:07.877

`myfile.txt`这应该打印任何具有正确基线的扩展路径名

```
cleartool find . -name 'myfile.txt' -version 'lbtype_sub(bl_rc11)' –print 
```

但这假设：

*   `bl_rc11`是一个完整的基线（请参阅“ [Clearcase UCM 中的完整基线和增量基线有什么区别？](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca/9696988#9696988) ”）
*   `bl_rc11`是基线的 ID，而不仅仅是它的名称（它的 ID 实际上可能是`bl_rc11.xxxx`）

另一种方法是使用[`cleartool diffbl`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_diffbl.htm)：

```
cleartool diffbl -pred -ver bl_rc11@\aPVob 
```

但这只会列出`bl_rc11`与其先前基线之间的增量，因此即使是增量基线仍会在版本上生成标签，这意味着 cleartool find 仍然有效。

# grails - 如何在 Grails 中使用导出插件？

> ID：12586145
> 
> 赞同：0
> 
> 时间：2012-09-25T15:25:44.867
> 
> 标签：grails

我对 Grails 很陌生，所以在使用导出插件实现导出到 Excel 时需要一些建议。

我已经安装了导出插件，并在 gsp 中使用了以下代码来显示下载选项。

第一次加载页面时，正在设置参数并使用这些参数从数据库中获取数据，然后将数据转换为 JSON 并在 jqGrid 中列出。

当单击下载时，再次调用控制器并且这次参数不同，所以我怎样才能获得以前的参数值，以便我可以再次调用 DB 来获取数据并导出到 excel。

有什么方法可以在调用下载方法时传递以前的参数值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:43:03.013

导出标签具有名为 params 的属性。它接受 Map 值。您可以在那里添加参数。例如，params = "[startDate : startDate]" 或 params = "${params}"

在您的 downloadIncidentListExcel 操作中，您需要再次构建列表以获取下载。

# rest - 为什么在许多 Web API 中同时使用密钥和秘密？

> ID：12586147
> 
> 赞同：4
> 
> 时间：2012-09-25T15:25:47.097
> 
> 标签：rest

许多 Web REST API 为您提供密钥和秘密。当您向 API 发出请求时，您必须同时返回**它们**。这个有什么用？其中一个还不够吗？

*   这不是公钥/私钥交换：你给他们两个，对吧？

*   您也不会像在许多散列算法中那样使用秘密对您的内容进行散列并计算其他值：您总是返回相同的密钥和秘密。

我唯一能找到的是[如何使用密钥和秘密进行验证的答案？](https://stackoverflow.com/questions/1992053/how-to-use-a-key-and-secret-for-verification)这表示服务器可以使用密钥廉价地散列您的域（或者可能是用户名或其他内容）并检查它是否与密钥匹配。真的有这么用吗？

（奖励将是这种机制的名称。它似乎与我在 stackoverflow/wikipedia 上找到的关于加密机制的内容不匹配。）

* * *

**更新**：答案和一些评论告诉我，在请求中同时传递密钥和相应的密钥*是一个坏主意。*它*确实*在实践中发生，但它仍然是一个坏主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:16:20.310

你会说你提到`HMAC Authentication`
的`key`是你的帐户名，它不会直接用于任何身份验证。将`secret`严格离线共享，并且永远不会发回。在 HMAC 身份验证中，您发送回一个签名，该签名源自服务器和客户端之间商定的一组参数，当然这`secret`是其中的一部分。

# android - 如何在 TabWidget 中制作自定义字体样式？

> ID：12586152
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:25:59.143
> 
> 标签：android, eclipse, tabwidget

![在此处输入图像描述](../Images/baabe612b86f966f83ebd1bf22d9028b.png)

我想更改我在我的 android 应用程序中创建的选项卡中的字体。

这是我的 xml 文件：

```
<com.markupartist.android.widget.ActionBar
    android:id="@+id/actionbar"
    style="@style/ActionBar" />

<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="fill_vertical"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/darker_gray"
            android:orientation="horizontal"
            android:paddingTop="0dp"
            android:tabStripEnabled="true" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </LinearLayout>
</TabHost> 
```

这是我的活动：

> 公共类 Home_Activity 扩展 TabActivity {

```
private static final int DIALOG_REALLY_EXIT_ID = 0;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    final ActionBar actionBar = (ActionBar) findViewById(R.id.actionbar);
    actionBar.setTitle(getString(R.string.app_name));

    Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType("text/plain");
    intent.putExtra(Intent.EXTRA_SUBJECT, "I've Been Using");
    intent.putExtra(Intent.EXTRA_TEXT, "BikeDSS Application by: Chocholuis");

    final Action shareAction = new IntentAction(this, Intent.createChooser(
            intent, "Share BikeDSS"), R.drawable.icon_share);
    actionBar.addAction(shareAction);

    Action searchAction = new IntentAction(this, new Intent(this,
            search_activity.class), R.drawable.icon_search);
    actionBar.addAction(searchAction);

    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost(); // The activity TabHost
    TabHost.TabSpec spec; // Reusable TabSpec for each tab
    // Intent intent; // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, Tab_Bike_Activity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("bike")
            .setIndicator("Bike", res.getDrawable(R.drawable.sepeda))
            .setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, Tab_Brand_ListView_Activity.class);
    spec = tabHost.newTabSpec("information")
            .setIndicator("Information", res.getDrawable(R.drawable.info))
            .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this,
            Tab_Shop_Repair_ListView_Activity.class);
    spec = tabHost
            .newTabSpec("repair")
            .setIndicator("Shop and Bicycle Repair",
                    res.getDrawable(R.drawable.bengkel)).setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);

} 
```

我可以改变字体吗？我真的需要帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:53:01.010

您必须创建自己的标签布局。请参阅此链接以获取有关 tabhost 自定义的教程：http: [//ondrejcermak.info/en/programovani/custom-tabs-in-android-tutorial/](http://ondrejcermak.info/en/programovani/custom-tabs-in-android-tutorial/)。

# visual-studio-2010 - 点击执行

> ID：12586154
> 
> 赞同：10
> 
> 时间：2012-09-25T15:26:01.653
> 
> 标签：visual-studio-2010, resharper

使用 Resharper 和 Visual Studio，我使用 Ctrl+Click 转到方法，但对于接口实现，我使用 Go To Implementation 的上下文选项。

有没有办法通过 Ctrl+Click 行为来实现这一点 - 也许实现它的变体，例如 Shift+Ctrl+Click？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-09T11:43:20.093

如果您安装了 ReSharper 8.1，请使用[Ctrl+Alt+Click](http://youtrack.jetbrains.com/issue/RSRP-336222)进行“Go To Implementation”操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T10:01:42.907

基于[此堆栈溢出问题](https://stackoverflow.com/questions/10686901/how-do-i-edit-visual-studios-mouse-shortcuts)，我已通过键盘快捷键 Ctrl+Shift+Alt+B（与 Alt+End 等效的 IntelliJ 键盘映射）将鼠标中键单击映射到 Go-To-Implementation。

为此，我使用了“Microsoft 鼠标和键盘中心”应用程序。我为 Visual Studio 创建了一个“特定于应用程序的设置”，选择了“Middle-tap”并选择了“Key Combination”。

要使用它，我需要先左键单击源代码中的符号，然后单击中键。我的下一个挑战是记住使用这个鼠标快捷键！请注意，我已经有效地替换了 Visual Studio 中的正常中键单击功能，尽管我只记得使用它来关闭选项卡，无论如何我都可以通过“x”按钮来完成。

# javascript - 具有不同扩展名的文件的 Http Cache 控制标头

> ID：12586155
> 
> 赞同：0
> 
> 时间：2012-09-25T15:26:02.643
> 
> 标签：javascript, http-headers, browser-cache

我对具有不同扩展名的文件的缓存控制标头有问题。我有一个文件`abc.do`，它是一个动态生成的 javascript 文件。我正在尝试为此文件实现缓存控制标头但没有运气所以我的问题是此标头是否仅适用于具有 .js 或 .css 扩展名的文件（仅限静态文件）？或者是否有任何技术可以应用于动态生成的内容？

# python - Defcon 20 CTF 虚拟机映像

> ID：12586156
> 
> 赞同：1
> 
> 时间：2012-09-25T15:26:04.867
> 
> 标签：python, sockets, virtual-machine, ipv6

我似乎无法访问这些服务。使用 VMWare Fusion启动下载的[VM 映像](https://s3.amazonaws.com/dc20-pcap/dc20-freebsd-i386.tbz)（在 Mac OS X 10.8.2 上）

`ifconfig`返回以下内容：

```
em1: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500
    options=9b<RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM>
    ether 00:50:56:25:fd:9a
    inet6 dc20:c7f:2012:12::7 prefixlen 64 
    inet6 fe80::250:56ff:fe25:fd9a%em1 prefixlen 64 scopeid 0x3 
    nd6 options=29<PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL>
    media: Ethernet autoselect (1000baseT <full-duplex>)
    status: active 
```

`[root@dc20 ~]# sockstat -6`：

```
USER     COMMAND    PID   FD PROTO  LOCAL ADDRESS         FOREIGN ADDRESS      
root     cashew     1447  3  tcp6   dc20:c7f:2012:12::7:7979 *:*
root     cherry     1443  3  tcp6   dc20:c7f:2012:12::7:24359 *:*
root     coney      1439  3  tcp6   dc20:c7f:2012:12::7:65214 *:*
root     dealer     1435  4  tcp6   dc20:c7f:2012:12::7:8888 *:*
root     desheepd   1431  3  udp6   dc20:c7f:2012:12::7:547 *:*
root     dog        1427  3  tcp6   *:3146                *:*
root     gallows    1415  3  tcp6   dc20:c7f:2012:12::7:6666 *:*
root     jerkin     1395  3  tcp6   dc20:c7f:2012:12::7:63715 *:*
root     mixology   1387  3  tcp6   dc20:c7f:2012:12::7:35575 *:*
root     nancy      1379  3  tcp6   dc20:c7f:2012:12::7:57554 *:*
root     nom        1370  3  tcp6   dc20:c7f:2012:12::7:7368 *:*
nssds    nssds      1366  3  tcp6   dc20:c7f:2012:12::7:54339 *:*
root     ocrd       1362  4  tcp6   dc20:c7f:2012:12::7:31967 *:*
root     parrot     1357  3  tcp6   *:5160                *:*
root     ralph      1353  3  tcp6   dc20:c7f:2012:12::7:57553 *:*
scool    scool      1349  3  tcp6   *:4637                *:*
root     semem      1332  3  tcp6   dc20:c7f:2012:12::7:6941 *:*
root     sshd       1316  3  tcp6   *:22                  *:*
tictactoe tictactoe 1223  3  tcp6   dc20:c7f:2012:12::7:25375 *:*
_ngircd  ngircd     1210  10 tcp6   ::1:6667              *:*
_ngircd  ngircd     1210  11 tcp6   ::1:6668              *:*
_ngircd  ngircd     1210  12 tcp6   ::1:6669              *:*
_ngircd  ngircd     1210  13 tcp6   dc20:c7f:2012:12::7:6667 *:*
_ngircd  ngircd     1210  14 tcp6   dc20:c7f:2012:12::7:6668 *:*
_ngircd  ngircd     1210  15 tcp6   dc20:c7f:2012:12::7:6669 *:*
root     zul        1083  3  tcp6   dc20:c7f:2012:12::7:25201 *:*
root     syslogd    1057  6  udp6   *:514                 *:* 
```

但我似乎无法连接到 dc20:c7f:2012:12::7: 形式的任何服务，例如，能够向/从`semem`dc20:c7f:2012 上运行的服务发送/接收:12::7，端口 6941

我已经尝试过基本的东西，比如`ping6`and`telnet -6`和`netcat`/ `nmap`，还有 python 套接字，但它们似乎无法连接（超时）。

其他 *: 服务运行良好。

* * *

我从谷歌搜索结果中读到这`dc20:c7f:2012:12::7:6941`意味着该服务绑定到与 ipv6 地址 'dc20:c7f:2012:12::7' 关联的接口，即。（虚拟）网络接口`em1`，也称为替代地址，因此为了能够与服务通信，我首先必须创建一个套接字，将套接字绑定到与该接口关联的地址，然后然后从这个接口发送到服务，但在代码中尝试似乎对我仍然不起作用。

请指导一下？希望在 Python 中进行一些套接字编程。

反映在[reddit评论中](http://www.reddit.com/r/netsec/comments/xiowh/defcon_20_ctf_unmodified_freebsd_game_vm_from/c6cpniz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T23:53:06.937

在`/etc/rd.conf`中，替换这一行：`ifconfig_em1="inet6 dc20:c7f:2012:12::7 prefixlen 64"`用这个`ifconfig_em1_ipv6="inet6 dc20:c7f:2012:12::7 prefixlen 64"`

然后重新启动。

```
[root@dc20 ~]# ping6 -c 3 dc20:c7f:2012:12::7
PING6(56=40+8+8 bytes) dc20:c7f:2012:12::7 --> dc20:c7f:2012:12::7
16 bytes from dc20:c7f:2012:12::7, icmp_seq=0 hlim=64 time=0.290 ms
16 bytes from dc20:c7f:2012:12::7, icmp_seq=1 hlim=64 time=0.065 ms
16 bytes from dc20:c7f:2012:12::7, icmp_seq=2 hlim=64 time=0.070 ms

--- dc20:c7f:2012:12::7 ping6 statistics ---
3 packets transmitted, 3 packets received, 0.0% packet loss
round-trip min/avg/max/std-dev = 0.065/0.142/0.290/0.105 ms
[root@dc20 ~]# 
```

完全有效。

# ios - 用于简化远程内容加载的 iOS/XCode 框架

> ID：12586159
> 
> 赞同：0
> 
> 时间：2012-09-25T15:26:07.280
> 
> 标签：ios, ruby-on-rails, content-management-system, afnetworking

所以，这是一个更广泛的问题，因为我意识到我们很多人一遍又一遍地做同样的事情。

*   将数据/内容显示为 TableViews 或 Detailviews
*   从一些服务器（很多 Rails-Servers，也许是 Django）动态下载这些数据

我的设想：抽象这些对象的整个 GET/POST/缓存，甚至是任意数据对象的动态视图创建

所以应用程序唯一要做的事情是：

1.  在一些 plist/dictionary 中提供可能的 Web 服务/Api-Calls 列表，由“EntityName”标识
2.  在运行时，通过名称请求或上传实体，框架处理整个 Fetching/BackgroundAction/Posting/Url-parsing
3.  该应用程序甚至可以根据 Data-Propertys 使用带有插座/标签的自定义生成视图

所以，我正在考虑自己创建这个，使用[AFNetworking 来做](https://github.com/AFNetworking/AFNetworking)底层的东西。在此之前，我只是想确定，没有任何东西已经在这样做了。

（类似于 iPhone 的镜像 RubyOnRails-Framework，它将 DRY 和 ConventionOverConfiguration 牢记在心，以加快 CMS 管理的 iOS 应用程序的开发）

编辑：简而言之：就像远程数据库的 CRUD 控制器一样，可以对其进行皮肤/限制以适应客户/应用程序的需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:29:57.293

你知道[解析](https://parse.com)吗？

也许不完全符合您的要求，但绝对值得一试。它们完全消除了很多服务器端的麻烦。

# ssh - 我可以在计算机启动期间运行 SSH 客户端吗？

> ID：12586160
> 
> 赞同：2
> 
> 时间：2012-09-25T15:26:07.237
> 
> 标签：ssh, startup, boot

我的电脑启动太慢。（特别是因为我的电脑上安装了一个 windows 7 系统。而且我正在使用 Linux 的虚拟机工作，在我的 4 核 intel7 上启动所有东西大约需要 10 分钟）

目标：我想尽快启动与远程服务器的 SSH 会话并开始使用它（键盘+屏幕，无图形服务器）。并在后台加载完整的操作系统。

该项目存在于[linux](http://dev.kakaopor.hu/early-ssh/)上：（“在启动期间具有 SSH 访问权限”[链接](http://random.kakaopor.hu/?s=early%20ssh)）由于我的主机系统是 Windows，因此它不适用。有什么选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:33:11.540

如果我理解正确，您想连接到您的 Linux VM（远程服务器）。在这种情况下，您可以在 sshd 守护程序准备好后立即连接，因此，尽管您的主机是 Windows VM，但“早期 ssh”在这里很有意义。

# ruby-on-rails - 自动完成列表隐藏在其他控件后面

> ID：12586161
> 
> 赞同：0
> 
> 时间：2012-09-25T15:26:13.750
> 
> 标签：ruby-on-rails, autocomplete

在我的 rails 应用程序中，用户可以添加多个模式并将多个位置分配给特定模式。该位置是一个自动完成字段。

**_pattern_form.html.erb**

```
<% f.fields_for:patterns do |builder| %>
  <%= render 'pattern_fields', :f => builder %>
<% end %>

<p class="add_fields"><%= link_to_add_patterns "Add Book", f, :patterns %></p> 
```

**_pattern_fields.html.erb**

```
<div class="fields" style="z-index: 1;">

    Pattern Pub: <%= f.select(:PAT_PUB, [['A', 'A'],
                     ['B', 'B'],
                     ['C', 'C']]) %>

    <div>    
      <% f.fields_for :location do |builder| %>
      <%= render 'location_fields', :f => builder %>
      <% end %>
    </div>

</div> 
```

**_location_fields.html.erb**

```
<%= f.text_field_with_auto_complete  :LCN_ADJACENT_TO , { :size => 55, :style=>" z-index:100;"}, { :url => formatted_locations_path(:js), :method => :get,  :skip_style => true, :param_name => 'search' } %> 
```

唯一的问题是，当用户在位置自动完成字段中键入时，自动完成列表隐藏在其他模式字段后面。

我创建了以下 css 并为“auto_complete”类提供了 100 的 z-index，但徒劳无功。

```
.auto_complete {
    z-index: 100;
}

.auto_complete ul{
    padding: 0px;
    margin: 0px;
    list-style-type:none;
    background: #F0F8FF;
    z-index: 100;
}

.auto_complete li{
    padding-left: 0px;
    margin-left: 0px;
    text-align: left;
    z-index: 100;

} 
```

有关如何使建议列表显示在页面内容顶部的任何建议。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:32:33.607

`z-index`仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。其他元素（您的“模式字段”）也应该定位。

# android - 关于 GCM 注销的建议

> ID：12586164
> 
> 赞同：4
> 
> 时间：2012-09-25T15:26:24.290
> 
> 标签：android, google-cloud-messaging

我有一个使用 android 帐户的登录/注销应用程序。我也在使用 GCM，所以当用户登录时我注册设备，如果用户注销我取消注册。我面临取消注册呼叫的问题。

要从我的服务器注销我的设备，我需要该帐户的令牌。由于我无法将它从 GCMIntentService 传递给 onUnregistered 方法（或者至少我不知道如何），我尝试使用 AccountManager 获取它，但此时我的帐户已被删除。我想解决它，我想到了两个选择：

1-首先调用 GCMRegistrar.unregister 并在 GCMIntentService->onUnregistered 函数中删除账户。这个解决方案的问题是用户必须等待注销完成，也许它没有。我不能让用户在不删除帐户的情况下继续。

2- 将令牌保存在某处（可能是应用程序类），以便能够从 GCMIntentService->onUnregistered 获取它。

我认为2号更好，但我不知道它是否是最佳选择。有没有更好的方法来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:11:26.877

在 IntentService 中获得令牌后，您可以使用 SharedPreferences 保存它：

```
public void savePrefrences(String key, String value)
    {
        SharedPreferences prefs = SynergyApplication._context.getSharedPreferences(SynergyApplication._context.getApplicationContext().getPackageName(), 0);
        prefs.edit().putString(key, value).commit();
    } 
```

然后在您的应用程序的任何地方读取它：

```
public String getPrefrences(String key)
    {
        SharedPreferences prefs = SynergyApplication._context.getSharedPreferences(SynergyApplication._context.getApplicationContext().getPackageName(), 0);
        return prefs.getString(key, "");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:48:01.340

您可能应该在主要活动中使用 onDestroy。这样，当用户关闭应用程序时，您一定会调用此方法。我不知道您如何从服务器中删除设备（使用 url？）。

onDestroy 方法保证您的代码将在用户关闭应用程序时执行。

# mongodb - 如何在 MongoDB 中对不同的日期格式进行排序？

> ID：12586166
> 
> 赞同：1
> 
> 时间：2012-09-25T15:26:28.437
> 
> 标签：mongodb, sorting

如何对 MongoDB 中的不同日期格式进行排序？我需要对格式为“2012 年 3 月 22 日”的日期进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:31:12.387

MongoDB 原生日期类型允许自然排序。如果您使用的是 is，您应该没有问题，否则我建议您迁移当前数据以使用此格式。有关该主题的更多信息，请参见[http://www.mongodb.org/display/DOCS/Dates](http://www.mongodb.org/display/DOCS/Dates)。

# excel - 如果 Form1 获得焦点，则会取消保存文件

> ID：12586168
> 
> 赞同：1
> 
> 时间：2012-09-25T15:26:33.737
> 
> 标签：excel, vba

```
Private Sub Workbook_BeforeSave...  
MsgBox "Why" 
```

如果 Form1 获得焦点 - MsgBox 不会出现。保存过程被取消。
请不要告诉我最终用户必须在表单外单击才能保存文件。
Form1 不是模态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:05:16.620

> 请在表单上放置一个文本框，将光标放在其中，或者只需单击表单标题。然后按Ctrl+S，看看MsgBox有没有出现。– Alegro 49 分钟前

在这种情况下，只需将此代码粘贴到您的用户表单中。此代码根据我的其他[答案](http://www.vbforums.com/showthread.php?554724-RESOLVED-Capture-Tab-Press-Textbox)稍作修改。

**代码（经过试验和测试）**：

```
Private Declare Function GetKeyboardState _
Lib "user32" (pbKeyState As Byte) As Long

Private Myarray(255) As Byte

Dim Cntrl_Key As Boolean, Sletter_Key As Boolean

Private Sub TextBox1_KeyDown(ByVal KeyCode As MSForms.ReturnInteger, _
ByVal Shift As Integer)
    If KeyCode = 17 Then Cntrl_Key = True
    If KeyCode = 83 Then Sletter_Key = True
    Call ShowKey
End Sub

Private Sub RefreshKeyState(RefreshState As Boolean)
   If RefreshState Then
      Call GetKeyboardState(Myarray(0))
   End If
End Sub

Private Sub ShowKey()
    '~~> Check for Ctrl + S
    If Cntrl_Key = True And Sletter_Key = True Then
        '~~> Save Workbook
        ActiveWorkbook.Save
        Cntrl_Key = False
        Sletter_Key = False
    End If
End Sub 
```

**屏幕截图**：

![在此处输入图像描述](../Images/c0b761c26c241865185f1e661ec15df6.png)

**注意**：这不是一个万无一失的方法，因为用户可以按下`CTRL`然后输入其他内容，然后按下“S”键，然后代码仍然会触发。我们可以包含一个小检查，以查看按下后`CTRL`按下的下一个键是否是`S`。如果不是，则再次将其设置为 false ... 例如

```
Private Declare Function GetKeyboardState _
Lib "user32" (pbKeyState As Byte) As Long

Private Myarray(255) As Byte

Dim Cntrl_Key As Boolean, Vletter_Key As Boolean
Dim OtherLetter As Boolean

Private Sub TextBox1_KeyDown(ByVal KeyCode As MSForms.ReturnInteger, _
ByVal Shift As Integer)
    If KeyCode = 17 Then Cntrl_Key = True
    If KeyCode = 83 Then Vletter_Key = True
    If KeyCode <> 83 And KeyCode <> 17 Then
        OtherLetter = True
    End If
    Call ShowKey
End Sub

Private Sub RefreshKeyState(RefreshState As Boolean)
   If RefreshState Then
      Call GetKeyboardState(Myarray(0))
   End If
End Sub

Private Sub ShowKey()
    '~~> Check for Ctrl + S
    If Cntrl_Key = True And OtherLetter = True Then
        Cntrl_Key = False
    ElseIf Cntrl_Key = True And Vletter_Key = True Then
        '~~> Save Workbook
        ActiveWorkbook.Save
        Cntrl_Key = False
        Vletter_Key = False
    End If
End Sub 
```

# xslt - 包含 XML 的 XSLT 变量

> ID：12586169
> 
> 赞同：0
> 
> 时间：2012-09-25T15:26:36.413
> 
> 标签：xslt

我发现这个网站说我可以选择这段代码的特定节点

```
<xsl:variable name="in-xml" as="item()*"> <in-xml>
     <a>1</a>
     <c>2</c>
     <a>3</a>
     <a>4</a>
     <a>5</a>    </in-xml> </xsl:variable> 
```

它说如果你写这个：

```
$in-xml/*[position() > 2] 
```

你会得到这个：

```
<a>3</a>
<a>4</a>
<a>5</a> 
```

但它似乎不适合我。这是网站：[http ://www.xsltfunctions.com/xsl/fn_position.html](http://www.xsltfunctions.com/xsl/fn_position.html)

任何人都可以提供代码来获得它吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:40:45.673

在 XSLT 1.0 中，只能对输入数据执行 XPath 表达式，而不能对在评估样式表过程中创建的数据执行。因此，使您的示例工作的一种方法是将`in-xml`数据移动到外部文档并使用该`document()`函数加载它。还有一些棘手/聪明的技术涉及将`in-xml`元素编写为子元素`xsl:stylesheet`并`document('')/xsl:stylesheet/in-xml`用于声明变量；这些技术适用于良好的 XSLT 1.0 实现，但在某些浏览器实现中失败。

在 XSLT 2.0 中，对使用 XPath 的限制被放宽了，您所绘制的线条应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:06:49.930

EXSLT 定义了可以在这里使用[的 node-set() 。](https://stackoverflow.com/questions/92076/how-to-use-node-set-function-in-a-platform-independent-way)这是一个 MsXsl 实现：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:msxsl="urn:schemas-microsoft-com:xslt">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <xsl:variable name="in-xml" > <!--as="item()*-->
            <in-xml>
                <a>1</a>
                <c>2</c>
                <a>3</a>
                <a>4</a>
                <a>5</a>
            </in-xml>
        </xsl:variable>

        <xsl:value-of select="msxsl:node-set($in-xml)/in-xml/a[position() > 2][1]"/>
    </xsl:template>
</xsl:stylesheet> 
```

# php - 需要 PHP 向导，重新排序/排序帖子

> ID：12586172
> 
> 赞同：1
> 
> 时间：2012-09-25T15:26:40.240
> 
> 标签：php, jquery, wordpress, sorting

我已经在各种论坛上发布了这个，但到目前为止没有运气（希望也可以在这里发布它？）......我已经尝试了几个星期......没有成功。

我的博客上有两个页面（评分最高和查看次数最多），它们返回一列帖子（带有标题/拇指），但在这些列的顶部，我想将这些帖子“过滤”成周/月/所有时间. （因为我遵循了一个教程，所以我想保持它不变，所以我稍后会更改日期等的排序选项）。

以下代码表示刷新页面并加载新的 url，如 example.com/top-rated/?o=title-asc。但到目前为止，它显示了热门​​帖子和带有选项的下拉菜单......当我点击时，实际上没有任何反应。

我已经在朋友域上搭载了我的网站，如果有人可以看看让我知道你的想法......它将不胜感激。

在此先感谢各位:)

这是我的代码：

```
<?php
/*
 * Template Name: Top Rated
*/
get_header();  ?>

<?php
if( isset($_GET['o']) && $_GET['o'] != '')
          {
              $order = $_GET['o'];
              switch($order)
              {
                case 'date-asc': $orderby = 'order=ASC';
                            $msg = 'Date Ascending';
                              break;

                case 'date-desc': $orderby = 'order=DESC';
                            $msg = 'Date Descending(default)';
                              break;

                case 'date-mod': $orderby = 'orderby=modified';
                                $msg = 'Date Modified';
                               break;

                case 'title-asc': $orderby = 'orderby=title&order=ASC';
                                $msg = 'Title A-Z';
                                break;

                case 'title-desc': $orderby = 'orderby=title&order=DESC';
                                $msg = 'Title Z-A';
                                break;

                case 'comment': $orderby = 'orderby=comment_count';
                                $msg = 'Comment Count';
                                break;
              }
          }
          else
          {
              $orderby = 'order=DESC';
              $msg = 'Date Descending (default)';
          }
?>
<div id="content">
    <div id="sorter-container">
        <script type="text/javascript">
                var orderby = jQuery('#order-by');
                var str;
                orderby.change(function(){
                    str = jQuery(this).val();
                     window.location.href = "<?php echo home_url(); ?>/top-rated/?o="+str;
                });
            </script>
<h2 id="sort-heading">Posts ordered by:<?php echo $msg; ?></h2>
        <select id="order-by">
            <option value="date-desc" <?php echo (!isset($order) || $order == '' || $order == 'date-desc')? 'selected="selected"':''; ?>>Date Desc. (default)</option>
            <option value="date-asc" <?php echo ($order == 'date-asc')? 'selected="selected"':''; ?>>Date Asc</option>
            <option value="date-mod" <?php echo ($order == 'date-mod')? 'selected="selected"':''; ?>>Date Modified</option>
            <option value="title-desc" <?php echo ($order == 'title-desc')? 'selected="selected"':''; ?>>Title Desc.</option>
            <option value="title-asc" <?php echo ($order == 'title-asc')? 'selected="selected"':''; ?>>Title Asc.</option>
            <option value="comment" <?php echo ($order == 'comment')? 'selected="selected"':''; ?>>Comments Count</option>
        </select>
    </div>
<?php query_posts('meta_key=votes_count&orderby=meta_value_num&order=DESC&posts_per_page=10'); ?>
    <?php if ( have_posts() ){ ?>
    <?php  while ( have_posts() ) : the_post() ?>
    <div <?php echo post_class(); ?>>
        <h3> <a href="<?php the_permalink(); ?>"class="img_hover_trans"><?php the_post_thumbnail('featured-small'); ?></a>
        <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a> | <small><?php the_time('F jS, Y'); ?></small></h3>
         <?php the_excerpt('Read more...'); ?>
    </div>
    <?php endwhile; ?>
<?php } ?>
</div>
<?php
get_sidebar();
get_footer(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:36:51.570

如果您遵循的教程使用`select`下拉列表来更改帖子的顺序，它还应该为您提供代码，该代码用于处理下拉列表中所选选项中的更改。无论如何，您需要一个附加到下拉列表的事件处理程序，当下拉列表更改时将触发该事件处理程序。由于您是 jQuery 1.6.2，这应该足够了：

```
$('#order-by').bind('change', function(){
    window.location.href = 'http://beetniksound.com/feedme/top-rated/?o=' + $(this).val();
}); 
```

**注意：**您可能不希望在 Javascript 中硬编码该 URL。我不了解 Wordpress，但如果它具有返回当前页面 url 的函数（在本例中为[http://beetniksound.com/feedme/top-rated/](http://beetniksound.com/feedme/top-rated/)），您可能想要使用它.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:19:54.597

原来我在错误的地方放了一些代码（对不起，我是新手）......所以在 Kemal 发布了一些代码尝试之后终于发现了它。所以感谢您的帮助/支持，我将使用新的工作代码更新 OP，它应该通过复制并粘贴到您的项目中来工作。如果是这样，请密切注意此部分，`window.location.href = "<?php echo home_url(); ?>/top-rated/?o="+str;`将 top-rated 替换为您的 page-slug。如果有人知道如何按周/月/所有时间排序，请在此处发布（因为它会有所帮助）`

# java - 在 Java 中使用 google 电子表格 api 创建一个 google 电子表格

> ID：12586175
> 
> 赞同：0
> 
> 时间：2012-09-25T15:26:47.683
> 
> 标签：java, google-spreadsheet-api

是否有规定在**Java**中使用谷歌电子表格 API创建**谷歌电子表格。**

 **我只能找到 . **NET**代码在**谷歌开发者网站**。

**PS**：虽然在 JAVA 中有检索电子表格 API，但我找不到创建 API。

如果有人对此进行澄清，将会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:31:49.743

由于 C# 是使用 Java 语法编写的，

您是否尝试过将您在 API 文档中找到的 C# 代码转换为 Java？我确定包含的库是可转让的。

编辑：
[https ://developers.google.com/google-apps/spreadsheets/#adding_a_worksheet](https://developers.google.com/google-apps/spreadsheets/#adding_a_worksheet)

您可以使用选项卡切换到“Java”代码。**

# python - 将字典列表转换为嵌套字典

> ID：12586179
> 
> 赞同：6
> 
> 时间：2012-09-25T15:26:54.330
> 
> 标签：python

关于这个主题有很多问题，但我还没有能够调整解决方案来适应我的情况。假设我有一个从平面文件中获得的字典列表：

```
[{'Name': 'Jim', 'Attribute': 'Height', 'Value': '6.3'},
 {'Name': 'Jim', 'Attribute': 'Weight', 'Value': '170'},
 {'Name': 'Mary', 'Attribute': 'Height', 'Value': '5.5'},
 {'Name': 'Mary', 'Attribute': 'Weight', 'Value': '140'}] 
```

我想将其转换为嵌套字典，以便属性/值对与每个名称相关联：

```
{ 
    'Jim': {'Height': '6.3', 'Weight': '170'},
    'Mary': {'Height': '5.5', 'Weight': '140'}
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T15:31:36.903

使用 a[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)便于处理这些条目：

```
output = defaultdict(dict)

for person in people:
    output[person['Name']][person['Attribute']] = person['Value'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-05T13:55:47.803

这将产生提问者想要的数据结构，也便于他维护它：

```
"""
Module for managing nested dictionary collections.
"""

# nestdict.py by Adam Szieberth (2013)
# Python 3.3+

class NestedDict(dict):
    """
    Class for managing nested dictionary structures. Normally, it works
    like a builtin dictionary. However, if it gets a list as an argument,
    it will iterate through that list assuming all elements of that list
    as a key for the subdirectory chain.

    NestedDict implements module level functions and makes managing nested
    dictionary structure easier.

    Instead of having a complicated way to manage extending or
    overwriting, NestedDict has a lock property (not decorated!) which
    allows or prohibits all alterations on the particular NestedDict
    instance. Warning! If you do not pass a list (even if it has only one
    element) to __setitem__, the superclass' method will be used which
    sets the item regardless of lock state! 

    If you want more sophisticated behavior than full access/prohibition,
    you can still use module level functions.
    """
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.lock = False

    def __getitem__(self, *args):
        if isinstance(args[0], list):
            return getitem(self, args[0])
        return super().__getitem__(*args)

    def __setitem__(self, *args):
        if isinstance(args[0], list):
            lock = self.get_lock(args[0])
            if not lock:
                return setitem(self, args[0], args[1],
                               overwrite=not lock, restruct=not lock,
                               dict_type=type(self))
            else:
                return False
        else:
            super().__setitem__(*args)
            return True

    def get_lock(self, path):
        """
        Returns the state of lock on the given path. In fact it walks on
        the path as long as possible, and returns the state of the last
        lock it can get. 
        """
        lock = self.lock
        level = 1
        while level <= len(path):
            try:
                lock = getitem(self, path[:level]).lock
            except (KeyError, AttributeError):
                break
            level += 1
        return lock

    def func_if_unlocked(self, *args):
        """
        The default func_if_unlocked function for self.merge() method
        which checks for lock on a path and returns True if path is
        unlocked.
        """ 
        path = args[0]
        return not self.get_lock(path)

    def lock_close(self, recursively=True):
        """
        Locks locks.
        """
        self.lock = True
        if recursively:
            for p in self.paths(of_values=False):
                self.__getitem__(p).lock = True

    def lock_open(self, recursively=True):
        """
        Unlocks locks.
        """
        self.lock = False
        if recursively:
            for p in self.paths(of_values=False):
                self.__getitem__(p).lock = False

    def merge(self, *dictobjs, restruct=True):
        """
        Same as module level function merge. It needs less arguments
        though since it uses self.func_if_unlocked() method to manage
        extend and overwrite permissions.
        """ 
        merge(self, *dictobjs,
              func_if_extend=self.func_if_unlocked,
              func_if_overwrite=self.func_if_unlocked,
              restruct=restruct,
              dict_type=type(self))

    def paths(self, of_values=True):
        """
        Same as module level function paths.
        """
        return paths(self, of_values=of_values)

def getitem(dictobj, path):
    """
    Returns the element of a nested dictionary structure which is on the
    given path. 
    """
    _validate_path(path)
    if len(path) == 1:
        return dictobj[path[0]]
    else:
        return getitem(dictobj[path[0]], path[1:])

def setitem(dictobj, path, value, overwrite=True, restruct=True,
        dict_type=dict):
    """
    Sets a dictionary item on a given path to a given value.
      - Returns True if value on path has been set.
      - Returns False if there was a value on the given path which was not
        overwritten by the function.
      - Returns None if there was a value on the given path which was
        identical to value.

    If restruct=True then when a value blocks the path, that value get
    cleared by an empty dictionary to make way forward.
    """
    _validate_path(path)

    try:
        one_step = dictobj[path[0]]
    except KeyError:
        if len(path) == 1:
            dictobj[path[0]] = value
            return True
        else:
            dictobj[path[0]] = dict_type()
            one_step = dictobj[path[0]]
    else:
        if len(path) == 1 and one_step == value:
            return None
        elif len(path) == 1 and overwrite is False:
            return False
        elif len(path) == 1 and overwrite is True:
            dictobj[path[0]] = value
            return True
        else:
            if not isinstance(one_step, dict):
                if overwrite is True and restruct is True: ##TEST
                    dictobj[path[0]] = dict_type()
                    one_step = dictobj[path[0]]
                else:
                    return False
    return setitem(one_step, path[1:], value, overwrite=overwrite,
                restruct=restruct, dict_type=dict_type)

def paths(dictobj, of_values=True, past_keys=[]):
    """
    Generator to iterate through branches. Used by merge function, but
    can be useful for other object management stuffs.

    By default it returns paths of values. However, if of_values=False
    then it returns the paths of all subdirectories.
    """
    for key in dictobj.keys():
        path = past_keys + [key]
        if not isinstance(dictobj[key], dict):
            if of_values is True:
                yield path
        else:
            if of_values is False:
                yield path
            yield from paths(dictobj[key], of_values=of_values,
                             past_keys=path)

def merge(*dictobjs,
          func_if_extend=True,
          func_if_overwrite=True,
          restruct=True,
          dict_type=dict,
          return_new=False):
    """
    Merges one dictionary with one or more another.

    By default it mutates the first dictobj. However, if return_new=True
    then it returns a new dictionary object typed recursively to
    dict_type. If you want no retypeing, use copy.deepcopy(), and pass the
    copied dictionary as first argument.

    To make mergeing more flexible, you are able to control how extension
    overwriting should be done (both are allowed by default). By setting
    func_if_overwrite to False, overwriting becomes disabled. By setting
    func_if_extend to False, extension becomes disabled and you can only
    update existing values if overwriting is enabled. If both are
    disabled, no alteration will be made, so this scenario makes no sense,
    but allowed.

    Moreover you can pass functions to the two mentioned arguments which
    will be called with the path (list of keys), dictobj1, dictobj2
    arguments and expected to return True or False.
    """
    if return_new is True:
        d = retype(dictobjs[0], dict_type)
    elif return_new is False:
        d = dictobjs[0]

    for dictobj in dictobjs[1:]:
        for p in paths(dictobj):
            try:
                getitem(d, p)
            except KeyError:
                    if hasattr(func_if_extend, '__call__'):
                        ex = func_if_extend(p, d, dictobj)
                    else:
                        ex = func_if_extend
                    if ex:
                        setitem(d, p, getitem(dictobj, p),
                                dict_type=dict_type)
            else:
                if getitem(d, p) != getitem(dictobj, p):
                    if hasattr(func_if_overwrite, '__call__'):
                        ow = func_if_overwrite(p, d, dictobj)
                    else:
                        ow = func_if_overwrite
                    restruct_ = restruct and ow 
                    setitem(d, p, getitem(dictobj, p),
                            overwrite=ow,
                            restruct=restruct_,
                            dict_type=dict_type)
    return d

def retype(dictobj, dict_type):
    """
    Recursively modifies the type of a dictionary object and returns a new
    dictionary of type dict_type. You can also use this function instead
    of copy.deepcopy() for dictionaries.
    """
    def walker(dictobj):
        for k in dictobj.keys():
            if isinstance(dictobj[k], dict):
                yield (k, dict_type(walker(dictobj[k])))
            else:
                yield (k, dictobj[k])
    d = dict_type(walker(dictobj))
    return d

def _validate_path(path):
    if not isinstance(path, list):
        raise TypeError('path argument have to be a list')
    if not path:
        raise Exception('path argument have to be a nonempty list')

def main():
    import pprint
    print('nestdict.py by Adam Szieberth')
    print(__doc__)
    print('Example for Stack Overflow question #635483:\n')
    inp_data =[(['new jersey', 'mercer county', 'plumbers'], 3),
               (['new jersey', 'mercer county', 'programmers'], 81),
               (['new jersey', 'middlesex county', 'programmers'], 81),
               (['new jersey', 'middlesex county', 'salesmen'], 62),
               (['new york', 'queens county', 'plumbers'], 9),
               (['new york', 'queens county', 'salesmen'], 36)]
    print('Input data:\n')
    pprint.PrettyPrinter(indent=1).pprint(inp_data)
    print('\n>>> data = NestedDict()')
    data = NestedDict()
    print('>>> for d in inp_data:')
    print('>>>     data[d[0]] = d[1]\n')
    for d in inp_data:
        data[d[0]] = d[1]
    print('Result:\n')
    pprint.PrettyPrinter(indent=0).pprint(data)
    return data

if __name__ == '__main__':
    data = main() 
```

路径（）的一个例子：[https ://stackoverflow.com/a/16298347/2334951](https://stackoverflow.com/a/16298347/2334951)

我打算在未来为其添加更多功能。您可以在这里找到最新版本：[https ://github.com/gneposis/gntools/blob/master/src/gntools/core/collections/nestdict.py](https://github.com/gneposis/gntools/blob/master/src/gntools/core/collections/nestdict.py)

还涵盖了这些问题：

*   [嵌套字典python](https://stackoverflow.com/questions/8073071)
*   [合并嵌套字典（默认值）](https://stackoverflow.com/questions/9730648)
*   [将字典列表转换为嵌套字典](https://stackoverflow.com/questions/12586179)

编辑：更新到新的和经过测试的版本。

用法：

```
>>> d = [{'name': 'Jim', 'attribute': 'Height', 'value': 6.3},
...      {'name': 'Jim', 'attribute': 'Weight', 'value': 170},
...      {'name': 'Mary', 'attribute': 'Height', 'value': 5.5},
...      {'name': 'Mary', 'attribute': 'Weight', 'value': 140}, ]
>>> result = NestedDict()
>>> for i in d:
...     path = [i['name'], i['attribute']] # list of keys in order of nesting
...     result[path] = i['value']
>>> print(result)
{'Mary': {'Height': 5.5, 'Weight': 140}, 'Jim': {'Height': 6.3, 'Weight': 170}} 
```

# c - 最有效地裁剪 IplImage

> ID：12586180
> 
> 赞同：6
> 
> 时间：2012-09-25T15:27:01.760
> 
> 标签：c, image-processing, opencv

我想知道在 opencv 中裁剪 IplImage 的最有效方法是什么。我目前正在执行以下操作，但它似乎太复杂了，我确信有更好的做事方式。

```
 // set ROI on original image, create 'tmp' image and copy data over.
    cvSetImageROI(orig_image, cvRect(55, 170, 530, 230));

    IplImage *tmp = cvCreateImage(cvGetSize(orig_image),
                               orig_image->depth,
                               orig_image->nChannels);

    cvCopy(m_depth_run_avg, tmp, NULL);
    cvResetImageROI(orig_image);

    // copy temporary image back to original image.
    IplImage *orig_image= cvCreateImage(cvGetSize(tmp),
                           tmp->depth,
                           tmp->nChannels);
    cvCopy(tmp, orig_image, NULL); 
```

有没有更好的方法来裁剪图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:27:26.467

**是**的，有。您似乎在最后重新创建原始图像。这不是必需的，如以下代码所示：

```
IplImage* orig = cvLoadImage("test.jpg");
if (!orig)
{
    return -1;
}
printf("Orig dimensions: %dx%d\n", orig->width, orig->height);

cvSetImageROI(orig, cvRect(0, 250, 350, 350));

IplImage *tmp = cvCreateImage(cvGetSize(orig),
                               orig->depth,
                               orig->nChannels);

cvCopy(orig, tmp, NULL);
cvResetImageROI(orig);

orig = cvCloneImage(tmp);
printf("Orig dimensions after crop: %dx%d\n", orig->width, orig->height);

cvNamedWindow( "result", CV_WINDOW_AUTOSIZE );
cvShowImage( "result", orig);
cvWaitKey( 0 );
cvDestroyWindow( "result" ); 
```

不幸的是，您必须创建一个临时图像来存储`cvCopy()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-06T09:22:01.417

您可以使用 C++ 轻松裁剪图像。确保此代码成功。尝试一下

```
 IplImage *source_image = cvLoadImage("paper.jpg", 1);

                     cout << "Width:" << source_image->width << " pixels" << endl;
                     cout << "Height:" << source_image->height << " pixels" << endl;
                     int width = source_image->width;
                     int lenght = source_image->height;

                     cv::Rect roi;
                     roi.x = 1200; //1200     // 950
                     roi.y = 355; //350      //150 
                     roi.width = 2340; //2360          //2750
                     roi.height = 1425;  //1235 /2500         //2810   //2465 fully braille sheet

                     IplImage *cropped_Image1 = cvCreateImage(cvSize(roi.width, roi.height), source_image->depth, source_image->nChannels);
                     cvSetImageROI(source_image, roi);
                     cvCopy(source_image, cropped_Image1);
                     cvResetImageROI(source_image);
                     cvShowImage("Cropped Image", cropped_Image1); 
```

# java - 继承 - onCreateOptionsMenu（带有超级调用）

> ID：12586181
> 
> 赞同：1
> 
> 时间：2012-09-25T15:27:03.243
> 
> 标签：java, android, inheritance

我有一个扩展 Activity 的 BaseActivity 类，在其中我有

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // draw menu stuff
    } 
```

然后我有其他扩展BaseActivity的类，例如

> HelpActivity 扩展 Activity

我以为按照继承的规则，它会自动继承BaseActivty的onCreateOptionMenu调用。它没有，所以我不确定为什么。

但无论如何，在 HelpActivity 我添加了这个：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
return super.onCreateOptionsMenu(menu);
} 
```

这也不起作用（即 Galaxy Nexus 上没有显示菜单）。所以我从字面上复制并粘贴了 BaseActivity 的 onCreateOptionsMenu 调用到 HelpActivity 中，并且成功了。为什么会这样？

编辑：两个注意事项：当我说它不起作用时，我的意思是：我有一个 Galaxy Nexus，并且菜单甚至没有显示在 ActionBar (ActionBarSherlock) 上。当它起作用时，我会得到菜单，包括菜单省略号。

第二：

根据 Android 文档：

> 提示：如果您的应用程序包含多个活动并且其中一些提供相同的选项菜单，请考虑创建一个除了 onCreateOptionsMenu() 和 onOptionsItemSelected() 方法之外什么都不实现的活动。然后为应该共享相同选项菜单的每个活动扩展此类。这样，您只需管理一组代码来处理菜单操作，并且每个后代类都继承菜单行为。

得到这个：[重用选项菜单代码](https://stackoverflow.com/questions/8116588/re-using-options-menu-code?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:56:08.287

根据您粘贴的内容，您`HelpActivity`没有扩展`BaseActivity`。
`HelpActivity extends Activity`

# image - 图像分割上的 Kmean 聚类

> ID：12586185
> 
> 赞同：0
> 
> 时间：2012-09-25T15:27:19.257
> 
> 标签：image, k-means

以下kmeans聚类有什么区别吗？

a) 将图像转换为灰度并对一维特征向量执行 kmeans

b) 保留 3 个通道 RGB，并对 3D 特征向量执行 kmeans

c) 获取图像直方图并对分布进行kmeans

第一个解决方案肯定更快，但是会有区别吗？也许某些像素具有不同的 RGB，但具有相同的强度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T08:56:14.120

1) 从 RGB 到灰度的转换通常不是通过简单地平均这些值来完成的（参见[灰度](https://en.wikipedia.org/wiki/Grayscale)）。如果使用这种不寻常的方式完成，即使如此，K-means 中使用的欧几里德距离也会为您的情况 (a) 和 (b) 提供不同的距离 - 导致不同的聚类 - 正如您提到的 [编辑]。但是，由于灰度值是加权和（权重不同于 1/3），因此在 RGB 之间取欧几里得距离不同于在灰度值上取差 - 所以它们是不同的。

2）我对你的（c）并不完全清楚，但对分布执行 k-means 很奇怪。可能您的意思是使用 K-means 作为模型来拟合分布，以便识别直方图中的峰和谷？如果是这种情况，它是案例（a）本身的轻微变化。它们可能非常相似（不确定它们是否相同，可能是！）如果您将案例（c）视为案例（a）的重写，通过将平方和误差中的所有相同项分组并重写它作为乘数乘以差。[如：x1 + x2 + x1 + x3 写成 2x1 + x2 + x3]

# java - java序列化错误

> ID：12586186
> 
> 赞同：2
> 
> 时间：2012-09-25T15:27:31.800
> 
> 标签：java, serialization

我想使用`ByteArrayOutputStream`java序列化一个类：

```
public void serializ(UniqueTag m) throws IOException {
        ByteArrayOutputStream byteOutput = new ByteArrayOutputStream();
        ObjectOutputStream stream = new ObjectOutputStream(byteOutput);
            stream.writeObject(m);

        stream.flush();
        stream.close();
        byteOutput.flush();
        byteOutput.close();    
    } 
```

**一个类想要序列化：**

```
import java.io.Serializable;

public class UniqueTag implements Comparable<UniqueTag>, Serializable {
    public final static UniqueTag MIN = new UniqueTag(Integer.MIN_VALUE,
            Integer.MIN_VALUE);
    public final static UniqueTag MAX = new UniqueTag(Integer.MAX_VALUE,
            Integer.MAX_VALUE);

    private final int replicaId;
    private final int counter;

    public static UniqueTagGenerator createGenerator() {
        return new UniqueTagGenerator() {
            int currentStamp;

            @Override
            public UniqueTag nextTag(final int replicaId) {
                return new UniqueTag(replicaId, currentStamp++);
            }
        };
    }

    public UniqueTag(final int replicaId, final int counter) {
        this.replicaId = replicaId;
        this.counter = counter;
    }

    public int getReplicaId() {
        return replicaId;
    }

    public int getCounter() {
        return counter;
    }

    @Override
    public int compareTo(UniqueTag o) {
        if (replicaId != o.replicaId) {
            return replicaId - o.replicaId;
        }
        return counter - o.counter;
    }

    public UniqueTag clone() {
        return new UniqueTag(replicaId, counter);
    }

    @Override
    public boolean equals(Object obj) {
        if (!(obj instanceof UniqueTag))
            return false;
        final UniqueTag other = (UniqueTag) obj;
        return counter == other.counter && replicaId == other.replicaId;
    }

    @Override
    public String toString() {
        return "(" + replicaId + "," + counter + ")";
    }
} 
```

**我有这个错误：**

```
Exception in thread "main" java.io.NotSerializableException: jbenchmarker.treedoc.UniqueTag$1
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330) 
```

请问哪里有问题？我序列化一个类，但它向我显示一个错误！:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:44:16.357

它抱怨是一个匿名内部类导致了这个问题，而你只有一个匿名内部类，所以我相信你可以通过`UniqueTagGenerator`实现来解决问题`Serializable`。

我不完全确定*为什么*会抛出此异常，因为`UniqueTag`不应包含对创建它的生成器的任何引用。我怀疑正在进行一些不必要的类引用追逐（或者您没有显示确切的代码）。

另一种修复它的方法——更好的是，IMO——是将标签生成器实现与`UniqueTag`. 要么创建一个单独的类，要么将工厂方法添加到`UniqueTagGenerator`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:41:23.360

你的类应该有一个可访问的无参数构造函数。您的最终字段也不会被初始化。查看可序列化的文档，这可能会有所帮助。

[http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)

# java - 处理 XML 数据的特殊字符以在 Java 中解析

> ID：12586189
> 
> 赞同：2
> 
> 时间：2012-09-25T15:27:38.703
> 
> 标签：java, android, xml

[我只是按照本教程](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)学习了如何使用 ListView 并在 Java 中解析 XML 数据。但是，由于 XML 数据包含一些特殊字符，因此出现错误。有人可以就这个问题给我建议吗？

这是我的 XML 数据的样子。

```
<menu>

<item>      
    <id>1</id>
    <question>What's my phone number?</question>
    <answer>my phone number is "000-000-0000".</answer>        
</item>  

<item>      
    <id>2</id>
    <question>What's my fax number?</question>
    <answer>my fax number is "000-000-0000"</answer>        
</item>  

<item>      
    <id>3</id>
    <question>What's my mailing address?</question>
    <answer>my address here</answer>        
</item> 

<item>      
    <id>4</id>
    <question>What's my web address?</question>
    <answer>https://mywebsite.com/Login/Login.aspx?cID=53044&lng=en-US</answer>        
</item> 

</menu> 
```

这是Java类。

```
public class FaqsQuestionsActivity extends ListActivity {

    static final String URL = "http://myweb.com/faq_list.xml";
    // XML node keys
    static final String KEY_ITEM = "item"; // parent node   
    static final String KEY_ID = "id";
    static final String KEY_QUESTION = "question";
    static final String KEY_ANSWER = "answer";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.faqs_questions);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        for (int i = 0; i < nl.getLength(); i++) {

            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_QUESTION, parser.getValue(e, KEY_QUESTION ));
            map.put(KEY_ANSWER, parser.getValue(e, KEY_ANSWER));

            menuItems.add(map);
        }

        ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.faqs_question_list,
        new String[] { KEY_QUESTION, KEY_ANSWER  }, new int[] {R.id.question, R.id.answer});

        setListAdapter(adapter);

        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                String question = ((TextView) view.findViewById(R.id.question)).getText().toString();
                String answer = ((TextView) view.findViewById(R.id.answer)).getText().toString();

                Intent in = new Intent(getApplicationContext(), FaqsAnswersActivity.class);

                in.putExtra(KEY_QUESTION, question);
                in.putExtra(KEY_ANSWER, answer);
                startActivity(in);

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:43:37.270

您可以在尝试解析 XML 之前尝试对其进行编码：

```
String encodedXML = URLEncoder.encode(xml); 
```

然后解析。

# cakephp - CakePHP -- 有效计算相关模型中的唯一属性

> ID：12586192
> 
> 赞同：2
> 
> 时间：2012-09-25T15:27:52.753
> 
> 标签：cakephp, cakephp-1.3

我有一个 Post 模型，它有一个关联的 Comment 模型。每个评论都有一个与用户模型相关联的 user_id ......都是非常标准的东西。

本质上，当我对我感兴趣的所有帖子进行查找查询时，我正在寻找一种方法来有效地获取对每个帖子发表评论的唯一 user_id 的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:58:18.053

你用过`counterCache`吗？这可能会让你到达你需要的地方。您还需要将它与`counterScope`. 这将允许您在保存/更新记录时保存评论者的数量，而不是即时保存；从而获得更快的页面和更好的用户体验。

现在，仅此一项可能无法让您找到最终解决方案。考虑使用 counterCache/counterScope 和 virtualFields 的组合来提取数据并以这种方式更新。

[阅读本书中的 counterCache](http://book.cakephp.org/1.3/view/1033/counterCache-Cache-your-count)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:40:12.360

我假设 Post hasMany Comment 关系，所以查找结果如下所示：

```
$posts = array(
0 => array
(
    'Post' => array
    (
        'id' => 1
        , 'Comment' => array
        (
            0 => array
            (
                'id' => 1          
            )
            , 1 => array
            (
                'id' => 2
            )
        )
    )       
)
, 1 => array
(
    'Post' => array
    (
        'id' => 2         
        , 'Comment' => array
        (
            0 => array
            (
                'id' => 3
            )
        )
    )
)
, 2 => array
(
    'Post' => array
    (
        'id' => 3
        , 'Comment' => array
        (
            0 => array
            (
                'id' => 4
            )
            , 1 => array
            (
                'id' => 5
            )
            , 2 => array
            (
                'id' => 6
            )
        )
    )
)); 
```

然后，您可以使用[Set 类](http://debuggable.com/posts/cake-12s-set-class-eats-arrays-for-breakfast:480f4dd6-d084-4fb7-bacc-49fdcbdd56cb)仅提取 id，如下所示：

```
$userIds = Set::extract($posts, '{n}.Post.Comment.{n}.id'); 
```

如果有重复，你可以调用array_unique：

```
$userIds = array_unique($userIds); 
```

应该这样做！

# sql - 需要根据单词列表在 Teradata SQL 中搜索文本字段并返回该单词

> ID：12586193
> 
> 赞同：3
> 
> 时间：2012-09-25T15:27:53.477
> 
> 标签：sql, search, text, full-text-search, teradata

我正在一个大型数据库中搜索长度在 5-7 个字符之间的单词列表。到目前为止，我有：

```
Select *
  from sometable
 Where upper("Description") like any ("%ABC_123%", "%ABC_124%", "%DE_25%") 
```

我还想返回在查询中找到的单词，但我坚持如何在不复制 subtr 函数中的单词列表的情况下执行此操作。

可能有更好的方法可以做到这一点，我会很感激一些方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-04T12:29:31.657

正如 Rob Paller 已经提到的，TD14 中有正则表达式：

```
Select sometable.*,
       REGEXP_SUBSTR(Description,'((ABC_)(123|124)|(DE_(25)))') AS match
  from sometable
 Where match <> ''; 
```

这应该比数百个 LIKE 更有效。

此外，这可能会被简化，例如，如果您需要 ABC_ 或 DE_ 后跟任意两位或三位数字：

```
 REGEXP_SUBSTR(Description,'(ABC_|DE_)([0-9]{2,3})') AS match 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:33:49.290

你试过`POSITION`函数和多个`OR`条件吗？

```
SELECT *
FROM TABLE
WHERE POSITION('ABC_123' IN UPPER("Description") > 0
   OR POSITION('ABC_124' IN UPPER("Description") > 0
   OR POSITION('DE_25' IN UPPER("Description") > 0; 
```

我认为无论哪种方式，这将是 Teradata 上昂贵的 CPU/IO 进程。我不知道 Teradata 13.x 或更早版本中的本机功能会促进这一点。Teradata 14.x（我认为 14.10）应该在本机引入正则表达式支持，这可能会使这成为一个更简单的解决方案。

你在说多少个列表词？

如果您使用带有`LIKE`谓词的子查询怎么办？

```
SELECT *
FROM myTable
WHERE UPPER("Description") 
 LIKE (SELECT ListWord
       FROM myListWords); 
```

您可能必须使列表词在子查询中显示为模式：

```
SELECT *
FROM myTable
WHERE UPPER("Description") 
 LIKE (SELECT '%' || ListWord || '%' AS ListWordPattern
       FROM myListWords); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-02T11:09:00.223

4 年后，但无论如何......与 LIKE 加入很好地配合（在多场比赛的情况下合格）

例如

```
SELECT a.orig_pattern
,b.my_keyword
FROM table_with_data a
JOIN table_with_keywords b
ON a.orig_pattern LIKE '%'||b.my_keyword||'%'
QUALIFY row_number() OVER (partition by orig_pattern ORDER by orig_pattern) = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T00:09:16.820

要查找行，您还可以使用 REGEXP：

```
Select *
from sometable
Where Description REGEXP 'ABC_123|ABC_124|DE_25' 
```

我无法弄清楚您的 B 部分，返回找到的单词，除非该单词是“描述”字段中的唯一单词。如果它是唯一的词，您可以简单地返回描述字段的内容。

# axis2 - 未找到 AAR 文件中的骨架接口类

> ID：12586194
> 
> 赞同：0
> 
> 时间：2012-09-25T15:27:56.543
> 
> 标签：axis2, axis

早上好。从 WSDL 生成 AAR 文件并进行部署后，当客户端调用进入时，我在骨架接口上收到 NoClassDefFoundError。

奇怪的是，我的消息接收器位于 AAR 文件的同一位置，在堆栈跟踪中被引用，因为我在 services.xml 中定义了它。目前尚不清楚为什么它能够加载一个类，但不能以完全相同的路径加载另一个类。

我的服务类实现 CoreSkeletonInteface 并在 services.xml 中定义，但是它存在于 AAR 文件之外，位于 webapp 的 WEB-INF/classes 文件夹中。我假设这不会引起任何问题。

这是堆栈跟踪。任何帮助，将不胜感激。

```
java.lang.NoClassDefFoundError: org/caqh/www/soap/wsdl/CoreSkeletonInterface
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:334)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at org.apache.axis2.util.Loader.loadClass(Loader.java:261)
at org.apache.axis2.util.Loader.loadClass(Loader.java:229)
at org.apache.axis2.receivers.AbstractMessageReceiver.makeNewServiceObject(AbstractMessageReceiver.java:250)
at org.apache.axis2.receivers.AbstractMessageReceiver.getTheImplementationObject(AbstractMessageReceiver.java:297)
at org.caqh.www.soap.wsdl.CoreMessageReceiverInOut.invokeBusinessLogic(CoreMessageReceiverInOut.java:23)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:26:02.087

尽管对上述内容有所了解会很棒，但我确实实施了一种解决方法。

具体来说，我将生成的类文件从 AAR 文件中完全拉出来（留下 META-INF 和 services.xml），并将它们放在自己的 JAR 文件中，位于 WEB-INF/lib 中。

因此，只有服务定义在 AAR 文件中，所有相关的类都存在于 WEB-INF/classes 和 WEB-INF/lib 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:38:13.517

您说您生成的类文件在 AAR 内，但您的服务类存储在它之外？在这种情况下，由于类加载器的工作方式，服务类将无法访问生成的类文件。

这里基本上有三个类加载器：

1.  Axis2 类加载器可以读取 AAR 内部并访问存储在那里的类。它的父类加载器是 catalina 类加载器。

2.  catalina 类加载器由 Web 应用程序环境提供。它可以读取环境附带的文件。它的父级是 Java 类加载器。

3.  Java 类加载器是标准的类加载器，它使用 CLASSPATH、随 JRE 一起安装的 jar 等。

每个类加载器都可以遵循其父级。因此，例如，如果 Axis2 类加载器必须解析对 java.lang.String 的引用，它将推迟到 catalina 加载器，后者将推迟到 java 加载器，后者从 JRE 环境加载类。

但是，反过来是行不通的，这导致了你的错误。Axis2 引用了您的服务类，导致调用 Axis2 加载器来加载该类。Axis2 加载器延迟到 Catalina 加载器，后者找到并尝试加载该类。您的服务类引用了骨架接口类，因此 catalina 类加载器必须解析该引用。但是，catalina 加载器无法访问 Axis2 加载器，因此它无法“看到”AAR 中的任何类。

# authentication - AngularJS Service InterDependency 将身份验证令牌传递给 Http Header

> ID：12586195
> 
> 赞同：2
> 
> 时间：2012-09-25T15:28:02.617
> 
> 标签：authentication, angularjs

我创建了三个服务，OpenApi、SecureApi 和 TokenHandler。我想使用 SecureApi 服务中的 TokenHandler 服务。当身份验证发生时，控制器代码将在 TokenHandler.Set() 方法中设置令牌。我希望 SecureApi 如下 cal tokenHandler.get() 。可能吗。现在我遇到以下错误：-

编辑： - 修复了以下错误（也更新了下面的代码，但我的令牌仍然没有通过作为标题的一部分:()

未知提供者：tokenHandlerProvider <- tokenHandler <- SecureApi

代码：-

```
/* Services */
angular.module('MyApp.services', ['ngResource'])
    .factory('OpenApi', function ($resource) {

        var openApi = $resource(
            '/api/:controller/:id',
            [],
            {
                postLogOn: { method: 'POST', params: { controller: 'Account' } },
                postCustomer: { method: 'POST', params: { controller: 'Employee' } }
            }
        );
        return openApi;
    })

.factory('TokenHandler', function () {
    var tokenHandler = {};
    var token = "none";

    tokenHandler.set = function (newToken) {
        token = newToken;
    };

    tokenHandler.get = function () {
        return token;
    };
    return tokenHandler;
})

   .factory('SecureApi', ['$resource', 'TokenHandler', function(res, tokHandler) { 
       var secureApi = $resource(
        '/api/:controller/:id',
        [],
        {
    getInsightCustomer: { method: 'GET', params: { controller: 'MyCustomer' }, headers: {Authorization_Token: tokenHandler.get()} }
        }
    );
       return secureApi;
   }]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:16:14.643

我在 AngularJS googlegroups 中得到了这个答案：-

[https://groups.google.com/forum/?hl=en&fromgroups=#!topic/angular/jfttVnvga9M](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/angular/jfttVnvga9M)

这是上面代码中的语法错误。

您的 TokenHandler 服务有一个大写的 T，但您的 SecureApi 服务正在“请求”带有小写 t 的 tokenHandler。一般来说，如果你要最小化你的 js 以使用数组注入格式，那么它会更好 - 也是必不可少的，这也允许你使用任何你喜欢的东西作为该服务的参数名称。例如：

.factory('SecureApi', ['$resource', 'TokenHandler', function(res, tokHandler) { ... }]);

# android - 如何通过 UDP 客户端接收文本字符串

> ID：12586204
> 
> 赞同：0
> 
> 时间：2012-09-25T15:28:18.587
> 
> 标签：android, udp

我正在制作一个非常简单的应用程序，在其中我从我的 PC 上的 java 程序发送一个文本字符串，我试图从我的模拟器中的 android 应用程序接收相同的字符串。

这是我的活动（服​​务器）：

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_appstart);
    tv = (TextView) findViewById(R.id.textView1);
    try {
        DatagramSocket clientsocket = new DatagramSocket(9876);
        byte[] receivedata = new byte[1024];
        DatagramPacket recv_packet = new                   DatagramPacket(receivedata, receivedata.length);
        Log.d("UDP", "S: Receiving 1 sec...");
        clientsocket.receive(recv_packet);
        String rec_str = new String(recv_packet.getData());
        tv.setText(rec_str);
        Log.d(" Received String ", rec_str);
        InetAddress ipaddress = recv_packet.getAddress();
        int port = recv_packet.getPort();
        Log.d("IPAddress : ", ipaddress.toString());
        Log.d(" Port : ", Integer.toString(port));                                   clientsocket.close();
    } catch (Exception e) {
        Log.e("UDP", "S: Error", e);
    }
} 
```

这是我的PC客户端java代码：

```
 public static void main(String args[]) throws Exception
    {
            while(true)
    {           
    BufferedReader inFromUser = new BufferedReader(new       InputStreamReader(System.in));
            DatagramSocket clientSocket = new DatagramSocket();
            InetAddress IPAddress = InetAddress.getByName("127.0.0.1");
    System.out.println(IPAddress.getHostName());
            byte[] sendData = new byte[1024];
            byte[] receiveData = new byte[1024];
            String sentence = inFromUser.readLine();
            sendData = sentence.getBytes();
            DatagramPacket sendPacket = new    DatagramPacket(sendData,sendData.length,IPAddress,9876);
            clientSocket.send(sendPacket);
    System.out.println(sendPacket.getPort());
            clientSocket.close();
    }       
   } 
```

`onReceive()`然而，该应用程序没有收到任何东西，但在 android 应用程序中的函数上抛出异常......

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:19:42.667

Try this POC. it sends and listens for the packets. split the listener into another thread

```
package a.first;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;

public class Serv {

/**
 * @param args
 * @throws IOException 
 */
public static void main(String[] args) throws IOException {

        Listner listner = new Listner();
        Thread thread = new Thread(listner);
        thread.start();

        String messageStr = "Hello msg1";
        int server_port = 2425;
        DatagramSocket s = new DatagramSocket();
        InetAddress local = InetAddress.getByName("172.20.88.223");
        int msg_length = messageStr.length();
        byte[] message = messageStr.getBytes();
        DatagramPacket p = new DatagramPacket(message, msg_length, local,
                server_port);
        System.out.println("about to send msg1");
        s.send(p);
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            e.printStackTrace();
        }
        messageStr = "Hello msg2";
        msg_length = messageStr.length();
        message = messageStr.getBytes();
        p = new DatagramPacket(message, msg_length, local,
                server_port);
        System.out.println("about to send msg2");
        s.send(p);
}

}
   class Listner implements Runnable
    { 
            @Override
            public void run() {
        String text = null;
        while(true){
            text = null;    
        int server_port = 2425;
        byte[] message = new byte[1500];
        DatagramPacket p = new DatagramPacket(message, message.length);
        DatagramSocket s = null;
        try{
           s = new DatagramSocket(server_port);
        }catch (SocketException e) {
            e.printStackTrace();
            System.out.println("Socket excep");
        }
        try {
        s.receive(p);
       }catch (IOException e) {
            e.printStackTrace();
                System.out.println("IO EXcept");
            }
        text = new String(message, 0, p.getLength());
        System.out.println("message = "+text);
        s.close();

    }
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:14:14.233

你得到 android.os.NetworkOnMainThreadException 因为你在你的主线程上运行网络方法，这将使你的应用程序没有响应。尝试将其放入单独的线程中，或者......在这种情况下，可能是您的 Activity 可以绑定到的 Service。（有关示例，请参阅[如何修复 android.os.NetworkOnMainThreadException？ ）](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

如果（不推荐）您只需要测试您的 UDP 服务，您可以将您的 API 要求设置为 7 或以下或禁用主线程策略上的网络，您将不会收到异常。但是，您的应用程序将非常无响应。

# gwt-rpc - GWT 2.3客户端rpc请求修改

> ID：12586205
> 
> 赞同：1
> 
> 时间：2012-09-25T15:28:21.383
> 
> 标签：gwt-rpc

我们正在从 gwt1.2 升级到 gwt2.3。在早期版本中，我们修改了处理 POST 请求的客户端代码，以便它可以与门户集成，即 HTTPRequestImpl.java 中的 asyncPostImpl() 方法。

但在 gwt2.3 上，该实现不再存在。我尝试在 RequestBuilder 的 doSend() 方法中进行修改，但似乎它仍然没有修改。

谁能帮我指出gwt 2.3中请求和响应通过的等效类HTTPRequestImpl，以便我可以尝试修改代码以使其正常工作？

谢谢 DK

# excel - VBA Excel - 尝试通过匹配 6 列来匹配 2 个 excel 文件

> ID：12586216
> 
> 赞同：0
> 
> 时间：2012-09-25T15:28:46.590
> 
> 标签：excel, file, vba, match

我有两个excel文件。我正在循环通过文件 1 并尝试使用 6 个不同的列在文件 2 中找到相应的行。我认为 VLOOKUP 不适用于这个多重标准。我不知道该怎么做。为了以不同的方式陈述问题，我正在遍历文件 1。使用 cols F、G、H、I、J、K 中的值 - 我试图使用 cols K、AK、A​​F、E 在文件 2 中找到匹配的行， N，G。当我找到匹配项时，我将数据从文件 2 移动到文件 1 中的相应行。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:14:03.380

附加的代码将与列匹配，您可以对其进行更新以进行传输

```
Sub MatchMultipleColumns()
Dim wbk1 As Workbook, wbk2 As Workbook
Dim sht1 As Worksheet, sht2 As Worksheet
Dim lLastRow As Long, lLoop As Long, rgFound As range, rgLastFound As range

Set wbk1 = Workbooks("file 1.xls")
Set wbk2 = Workbooks("file 2.xls")

Set sht1 = wbk1.Sheets(1)
Set sht2 = wbk2.Sheets(2)

lLastRow = sht1.Cells(Rows.Count, "F").End(xlUp)

For lLoop = 1 To lLastRow
    Set rgLastFound = sht2.Cells(1, "K")

tryAgain:
    Set rgFound = sht2.Columns("K").Find(What:=sht1.Cells(lLoop, "F"), After:=rgLastFound, LookIn:=xlFormulas, _
        LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
        MatchCase:=False, SearchFormat:=False)

    If rgFound Is Nothing Then GoTo nxtRow

    If sht2.Cells(rgFound.Row, "AK") = sht1.Cells(lLoop, "G") _
        And sht2.Cells(rgFound.Row, "AF") = sht1.Cells(lLoop, "H") _
        And sht2.Cells(rgFound.Row, "E") = sht1.Cells(lLoop, "I") _
        And sht2.Cells(rgFound.Row, "N") = sht1.Cells(lLoop, "J") _
        And sht2.Cells(rgFound.Row, "G") = sht1.Cells(lLoop, "K") Then

        'INSERT YOUR TRANSFER CODE HERE
        Debug.Print "Found match for row " & lLoop & " at row " & rgFound.Row
    Else
        set rgLastFound=rgFound
        GoTo tryAgain
    End If

nxtRow:
Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:47:09.807

如果我理解正确，您可能想要使用索引和匹配——vlookup 的强大表亲。我对这种情况有点困惑，所以另一个例子可能会有所帮助，但是..

假设您想在列表 A1 到 A100 中找到 F1。=MATCH(F1,A1:A100,0) 将返回在列表 A1:100 中找到文本 F1 的位置

然后使用 index 返回该值。=索引（a1：a100，匹配（F1，A1：A100,0））

如果 F1 是“关键字”并且它是列表中的第七个单词 A1:100 匹配函数返回 7 索引函数返回关键字

# php - 当所选字段的数量未知时，Codeigniter 获取数据库记录

> ID：12586218
> 
> 赞同：0
> 
> 时间：2012-09-25T15:28:53.923
> 
> 标签：php, mysql, codeigniter

我有一个表单域，有大约 40 个复选框。当用户勾选复选框时，根据选中的复选框，选择数据库中的字段。因此，他们可以检查所有或任何一个以显示报告中的哪些字段。我已经成功进行了 sql 查询，并且执行得很好。我遇到的所有问题都是遍历记录集并填充 html 表，因为我不知道他们选择显示哪些列。我正在尝试解决这个问题，但现在什么都没有出现在我的脑海中。任何帮助将不胜感激。我只需要一个想法！我正在使用codeigniter的查询方法-

```
$query=$this->db->query($sql); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:38:12.827

如果复选框值按名称匹配，那么您应该能够使用 PHP 的`implode()`函数将所有字段放入逗号分隔列表中：

```
implode(',', $checkboxes); // returns string like 'field1,field2,field3,field4' 
```

您可以将其分配给一个变量并将其放入您的`SELECT`语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:12:58.030

如果我理解这个问题，**你知道用户想要什么的唯一地方**是在“ `checkboxes`”页面中，你可以根据实际按下的复选框来理解请求。
所以你必须**保存这些信息**（*在会话变量、数据库、CI 控制器或其他几个选项中*）

保存信息后，您可以使用它来构建“结果页面”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T00:29:46.873

如果您像他们在[此处](http://codeigniter.com/user_guide//database/results.html)的文档中所做的那样遍历数据集，为什么不直接获取 result_array() 然后在遍历每一行时检索[array_keys呢？](http://php.net/manual/en/function.array-keys.php)

# c - 使用 if 语句与 #if 语句之间的区别

> ID：12586219
> 
> 赞同：0
> 
> 时间：2012-09-25T15:29:01.247
> 
> 标签：c, syntax, if-statement

我想知道使用`if`语句与`#if`和`#ifdef`语句是否是一种风格问题，或者在功能上是否存在差异，以及为什么你会使用一个而不是其他的。

这是你使用`#ifdef`语句的正确方式吗？

```
#define variable 1

#ifdef variable      //if variable is defined as 1?
//code
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:33:18.210

`#if`由预处理器使用，用于有条件地包含要编译的代码段。一个典型的用途是必须为不同的操作系统（或不同的编译器）编译源文件：

```
#ifdef _WIN32
/* Something specific to windows. */
#else
/* Something not available on windows. */
#endif 
```

`if`语句用于在运行时控制程序的流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:34:02.940

这两条语句由编译器的两个不同阶段执行：

```
#ifdef ... 
```

由预处理器执行。它删除或保留其受保护的代码部分。这是在编译时完成的，因此条件必须是编译时常量。如果部分代码被 排除`#ifdef`，则相应的代码不会进入编译的可执行文件。

```
if (...) 
```

由编译器处理，并转换为可执行代码。它的表达式可以在运行时计算。表达式的两边都保留在编译的可执行文件^*中。

* * *

^*除非优化器检测到可以移除一个部分；这并不常见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:48:19.823

这种区别有一个重要原因：

代码 1 -

```
#if SOMETHING
    do_some_c_stuff();
#endif 
```

1.  如果“SOMETHING”为真，我们将调用 do_stuff 函数
2.  如果“SOMETHING”为假，则不会编译此代码。
3.  如果您的代码库中未定义“SOMETHING”，则不进行编译。

代码 2 -

```
#ifdef SOMETHING
    do_some_c_stuff();
#endif 
```

1.  如果定义了“SOMETHING”（真或假），我们将调用 do_some 函数
2.  如果您的代码库中未定义“SOMETHING”，则不会编译此代码

这就是为什么你会经常看到：

```
#ifdef SOMETHING
#if SOMETHING
    do_some_c_stuff();
#endif
#endif 
```

或它们的某种组合

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T15:32:58.240

所有以 为前缀的指令都由在编译*之前*`#`运行的编译器的一部分处理，称为[预处理器](http://en.wikipedia.org/wiki/C_preprocessor)。也就是说，对于您示例中的代码，如果未定义，则编译器甚至不会看到之间的代码。*`variable``#ifdef``#endif`*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T15:33:55.703

`#ifdef`由编译器预处理，这意味着表达式不会在运行时计算。它通常用于检查编译标志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T15:34:12.713

[http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.100).aspx)

Cliffs：它`#if`在编译时评估，并根据结果，它在`#if`...内的代码块中执行代码`#endif`。常见用途：

```
#if DEBUG
    // Do some additional logging here we don't want to to in release.
#endif 
```

如前所述，您无权访问局部变量，预处理器指令访问您定义的内容。默认情况下，在 Visual Studio 中，`DEBUG`当您将模式设置为`Debug`. 如果您将上面的#if DEBUG 代码添加到项目中，您会注意到当您切换到发布模式（假设所有默认设置）时，其中的代码会“变灰”一点。这是 Visual Studio 说，当您编译时，灰色的代码不会在当前配置中运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T15:35:11.307

我们的所有行`#`都由编译器（gcc）处理。并且不在二进制文件中处理（运行时）

> 这是您使用#ifdef 语句的正确方法吗？--> 是的

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-25T15:37:02.933

`#if`并`#ifdef`在编译时进行评估，它们是预处理器指令。您在代码中命名为“变量”的项目不是变量，而是一个数字常量，它将在代码编译之前将代码中所有出现的“变量”替换为 1。所有这些预处理器指令只是向编译器指示它应该如何将您的代码转换为二进制文件。

普通的 if 语句完全不同，它是实际程序本身的一部分，执行运行时检查，从而控制程序的“流程”。*

# android - “选择应用程序”对话框的自定义

> ID：12586221
> 
> 赞同：0
> 
> 时间：2012-09-25T15:29:18.300
> 
> 标签：android, dialog

当用户尝试在我的 android 应用程序中打开某个 url 时，会出现“选择应用程序”对话框。可以自定义此对话框吗？至少我需要更改其标题文本，但如果还可以从对话框中删除一些条目，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:32:11.580

您可以使用[Intent.createChooser](http://developer.android.com/reference/android/content/Intent.html#createChooser%28android.content.Intent,%20java.lang.CharSequence%29)显式打开选择器。你可以给它一个标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:13:02.920

“从对话框中删除一些条目”的正确方法是通过在它们上放置更严格的过滤器（包/类别/操作等）来限制您的 Intent。

如果您不能将 Intent 限制在较小的范围内，则需要一种过滤它们的方法，我认为这是不可能的。

# php - 如果第一个参数（数组）有 20-25 个键，则函数停止

> ID：12586222
> 
> 赞同：1
> 
> 时间：2012-09-25T15:29:20.333
> 
> 标签：php, mysql, ajax, arrays

`<EDIT>`

**该问题与通过 GET 传递数组并在某些 AJAX 代码中达到 URL 长度限制有关。我通过切换到 POST 方法解决了这个问题。**

`</EDIT>`

我在工作中使用了一门课程来批量重新分配 SugarCRM 数据库中的潜在客户。

除了这个功能外，其他一切都在课堂上完美运行：

```
function reassign($leads = null, $newAssigned = null, $oldAssigned = null)
{
    // How many professionals to assign to?
    $roundrobin = count($newAssigned) - 1;
    $recurse = 0;

    if (!isset($leads)) {
        die("You must select the accounts to reassign!");
    }
    if (!isset($newAssigned)) {
        die("You must select a Professional!");
    }
    if (!isset($oldAssigned)) {
        die("Something broke in the Assigning process. Check javascript.");
    }

    try {
    foreach ($leads as $key => $value) {
        $sql_update = "UPDATE accounts SET assigned_user_id = '".$newAssigned[$recurse]."' WHERE id = '".$value."'";
        $assignment = $this->db_handle->prepare($sql_update);
        $assignment->execute();
        unset($assignment);

        $sql_statement = "INSERT INTO accounts_audit 
                            (id,
                            parent_id,
                            date_created,
                            created_by,
                            field_name,
                            data_type,
                            before_value_string,
                            after_value_string)
                        VALUES (uuid(),
                                '".$value."',
                                now(),
                                '".$_SESSION['session_user_id']."',
                                'assigned_user_id',
                                'relate',
                                '".$oldAssigned[$key]."',
                                '".$newAssigned[$recurse]."')";

        $audit_statement = $this->db_handle->prepare($sql_statement);
        $audit_statement->execute();
        unset($audit_statement);

        if ($recurse < $roundrobin) {
            $recurse++;
        } else {
            $recurse = 0;
        }
    }
    catch (Exception $e) {
        echo 'Caught exception: ',  $e->getMessage(), "\n";
    }
    echo "Successful!\n";
} 
```

此功能允许用户从生成的列表中检查任意数量的潜在客户，并将这些潜在客户平等地重新分配给列表中的任意数量的代表，并将这些更改记录在表格中以用于审计目的。

我遇到的问题是，如果用户从 20-25 条左右的线索中选择任何地方，这个功能就会卡住并挂起。任何小于 20 并且它永远不会挂起。这是一个问题，因为用户必须能够重新分配数百或可能数千个潜在客户。

关于它为什么会这样锁定的任何想法（它锁定的潜在客户数量各不相同，通常是 20-25）？当潜在客户数低于 20 时，变化会立即发生。

编辑：

更新了代码以显示语句关闭。行为仍然没有变化。When the number of leads are selected that causes it to break, no changes are made. 它不会执行第一个 19-20 并在其余部分停止，不会进行任何更改，也不会将任何内容添加到审计表中。小于断点并且所有更改都已完成并记录在审计表中。

我正在使用 PDO 连接到数据库：

```
try {
    $this->db_handle = new PDO("mysql:host=$this->dbHost;dbname=$this->dbDatabase", $this->dbUsername, $this->dbPassword);
    $this->db_handle->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

我在那里没有错误。对于任何代码，我也没有在日志中收到任何错误。我感到很困惑。

编辑＃2：

根据建议，这与绑定参数相同......

```
function reassign($leads = null, $newAssigned = null, $oldAssigned = null)
{
    // How many professionals to assign to?
    $roundrobin = count($newAssigned) - 1;
    $recurse = 0;

    $sql_assign = "UPDATE accounts SET assigned_user_id = :new_user_id WHERE id = :account_id";
    $sql_audit  = "INSERT INTO accounts_audit
                            (id,
                            parent_id,
                            date_created,
                            created_by,
                            field_name,
                            data_type,
                            before_value_string,
                            after_value_string)
                        VALUES (uuid(),
                                :parent_id,
                                now(),
                                :created_by,
                                'assigned_user_id',
                                'relate',
                                :old_assigned_user,
                                :new_assigned_user)";

    $assignment = $this->db_handle->prepare($sql_assign);
    $audit      = $this->db_handle->prepare($sql_audit);

    if (!isset($leads)) {
        die("You must select the accounts to reassign!");
    }
    if (!isset($newAssigned)) {
        die("You must select a Professional!");
    }
    if (!isset($oldAssigned)) {
        die("Something broke in the Assigning process. Check javascript.");
    }

    try {
    foreach ($leads as $key => $value) {
        $assign_params = array(':new_user_id' => $newAssigned[$recurse], ':account_id' => $value);
        $assignment->execute($assign_params);

        $audit_params = array(':parent_id' => $value, ':created_by' => $_SESSION['session_user_id'], ':old_assigned_user' => $oldAssigned[$key], ':new_assigned_user' => $newAssigned[$recurse]);
        $audit->execute($audit_params);

        if ($recurse < $roundrobin) {
            $recurse++;
        } else {
            $recurse = 0;
        }
    }
    catch (Exception $e) {
        echo 'Caught exception: ',  $e->getMessage(), "\n";
    }
    echo "Successful!\n";
} 
```

没有区别，除了在它起作用时速度更快。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:37:56.580

我的猜测是您正在泄漏准备好的陈述。您的错误日志可能有线索。

当您使用准备好的语句时，为什么不在循环外准备它们，并在循环内使用参数执行它们呢？我假设你在这里使用[mysqli](http://php.net/manual/en/book.mysqli.php)，在这种情况下你需要使用[bind_param](http://php.net/manual/en/mysqli-stmt.bind-param.php)。

然后，您将只创建 2 个准备好的语句！

```
//example prepare
$assignUser= $this->db_handle->prepare(
    "UPDATE accounts ".
    "SET assigned_user_id=? ".
    "WHERE id=?");

while (...)
{
    //example bind + execute
    $assignUser->bind_param("ii", $newAssigned[$recurse], $value);
    $assignUser->execute();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:10:47.123

正如 Paul Dixon 所建议的那样，我遇到的问题的根本原因并不是因为泄露了准备好的陈述，尽管他确实提供了很好的建议来防止这种情况发生。

该脚本是通过 AJAX 使用 GET 方法调用的。脚本在 param1 和 param2 中的数组达到一定长度后中断。这是因为 URL 超过了最大长度限制，而不是因为 PHP 脚本本身。

一旦我从 AJAX 中的 GET 方法切换到 PST 方法，我遇到的问题立即消失了。

# actionscript-3 - 从用户绘制的光栅曲线制作矢量曲线

> ID：12586228
> 
> 赞同：0
> 
> 时间：2012-09-25T15:29:38.060
> 
> 标签：actionscript-3, flash, graphics, drawing

我正在尝试在我的基于 Web（闪存）的应用程序中开发一个简单的实时图形编辑器。我有两个问题：

1.  活动结束后`MouseEvent.MOUSE_DOWN`，我将在 上绘制曲线`MouseEvent.MOUSE_MOVE`。调度事件后`MouseEvent.MOUSE_UP`，曲线的绘制停止，我需要通知其他活动客户端究竟绘制了什么。因此，我需要对绘制的曲线进行矢量化。之后，我将用矢量化替换绘制的曲线。所以，我有一个点数组，需要画一条穿过它们的自然曲线。怎么可能呢？
2.  我需要有擦除绘制的能力。请注意，我不能使用白色绘图作为擦除，因为我可以在背景上有图像。最简单的擦除方法是什么？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:40:31.810

1.  要绘制矢量曲线，您可以使用[Graphics.drawPath](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#drawPath%28%29)方法并将点矢量传递给它。
2.  如果你使用Bitmap(BitmapData)来绘制你的图像，你可以使用[copyChannel](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyChannel%28%29)方法，来绘制你的alpha画笔的戳记。

# assembly - 为什么 x86 汇编中的被除数是 64 位？

> ID：12586232
> 
> 赞同：7
> 
> 时间：2012-09-25T15:29:50.577
> 
> 标签：assembly, x86

为什么`idiv`x86 汇编指令将`EDX:EAX`（64 位）除以给定的寄存器，而其他数学运算（包括乘法）仅对单个输入和输出寄存器进行操作？

乘法：

```
mov eax, 3
imul eax, 5 
```

分配：

```
mov edx, 0
mov eax, 15
mov ebx, 5
idiv ebx 
```

我知道它`EDX`用于存储剩余部分，但为什么没有针对此行为的单独说明？这对我来说似乎不一致。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T15:52:39.023

指令集提供了有效实现任意宽度整数运算所需的指令。对于加法和减法，除了固定宽度结果之外，您只需要知道操作是否导致进位（用于加法）或借位（用于减法）。这就是为什么有一个进位标志。对于乘法，您需要能够将两个字相乘并得到一个双字结果。这就是为什么`imul`在`edx:eax`. 对于除法，您需要能够除以一个双角数并得到商和余数。

要了解为什么需要这些特定操作，请参阅 Knuth 的*《计算机编程艺术》第 2 卷*，其中详细介绍了实现任意宽度算术的算法。

至于为什么x86指令集中没有更多不同形式的乘除指令，不是2的幂的乘除比其他指令少得多，所以英特尔可能不想使用up 可用于将更频繁使用的指令的操作码。通用程序中的大多数乘法和除法都是 2 的幂；对于这些，您可以使用位移位或`lea`指令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T15:40:31.343

还有一个“双宽度”乘法（单操作数`mul`或`imul`）。

如果您问“为什么没有`idiv`仅给出商的二操作数”，那么我真的不知道（我有一个理论，但我不为英特尔工作）并且我希望它也存在..

当你想用不是 2 的幂的模进行模乘时，它的效果很好，你可以做 a`mul`并直接用 a 跟进它`div`，一切都已经在正确的位置。这是一个结果，而不是一个原因，我们不得不问英特尔的原因......但这是一个理论。回到 8086 时代，只有双倍宽度乘法（它是一种缓慢的迭代乘法，具有与您在软件中所做的相同的提前退出）。后来添加了一些更灵活的乘法，但除法从未发生过。也许它没有那么紧迫 - 毕竟，除法相对较少，而您经常需要乘以小常数，例如索引结构数组。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T19:45:57.620

对于加法和减法，您的溢出是由进位标志处理的单个位。如果您要取两个任意 N 位操作数并将它们相乘，则需要 2*N 位来存储结果，非常简单，自己尝试 0xFF * 0xFF = 0xFE01。如果您只使用 N 位大小的寄存器，则乘法指令将非常有限。除法与乘除 2*N 位相反，您得到 N 位。如果您打扰 N 位 * N 位 = 2*N 位数，那么您还应该实现 2*N 位数 / N 位数 = N 位数。这就是它存在的原因，不幸的是，尽管硬件比语言做得更多，但语言应该知道并做到这一点，如果我将两个字节相乘，如果我的结果变量小于 16 位，编译器应该会抱怨精度。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-18T04:52:13.083

这里有两个问题。首先，存在双宽度输入或输出的问题，您忽略了进行完全扩展乘法的单操作数[MUL](http://www.felixcloutier.com/x86/MUL.html) / [IMUL](http://www.felixcloutier.com/x86/IMUL.html)形式，包括结果的高半部分：N * N => 2N 位，执行 `EDX:EAX = EAX * src`. 请参阅其他答案，了解为什么这很有用。

BMI2 甚至引入了更灵活的全乘指令[MULX](http://www.felixcloutier.com/x86/MULX.html)，它具有三个显式操作数（两个输出和一个输入）和一个隐式操作数（第二个源 = EDX）。

* * *

**其次，您举了一个使用`imul`立即操作数的示例，这是 DIV/IDIV 不可用的另一件事。**

有一条晦涩的指令实际上是一个立即数，执行 8 位 / imm8 => 8 位商/余数，而不是 16 / 8 => 8。它称为[AAM](http://www.felixcloutier.com/x86/AAM.html)，在 64 位模式下不可用。汇编器默认除以 10（对于 BCD 的预期用例），但它与任何 imm8 的操作码相同。 [以下是如何使用 DIV 或 AAM 将 0-99 整数转换为两个 ASCII 数字](https://stackoverflow.com/questions/37129794/displaying-time-in-assembly/37131263#37131263)，同时指出 AAM 和`DIV r/m8`.

英特尔本可以随时添加 IDIV 的即时版本，但从未这样做过。我的猜测是 DIV / IDIV 足够慢（并且足够罕见）以至于额外的开销`mov reg, imm32`可以忽略不计，并且在这样的指令上花费操作码空间（和解码器晶体管）从未被认为值得。

* * *

更重要**的是，编译时常量的实际硬件划分通常只对代码大小有用，而不是性能。自 90 年代以来，模乘法逆运算一直是众所周知的（编译器编写者）**。由于编译器甚至不使用常量除法，英特尔极不可能在这种技术为人所知后设计的 CPU 中为其添加指令。例如 clang 编译`unsigned int div10(unsigned int a) { return a/10; }`为

```
 mov     ecx, edi         # just to zero-extend to 64-bit
    mov     eax, 3435973837  # a sign-extended imm32 can't represent this constant, I guess.  clang uses imul r,r,imm for other cases.
    imul    rax, rcx         # 64-bit multiply instead of 32x32 => 64 in two separate regs
    shr     rax, 35          # extract part of the high-half result.
    ret 
```

有符号除法需要更多指令，有时需要一些加/减操作来处理不太简单的除数的结果。请参阅[有关 Godbolt 的一些示例](http://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,options:(compileOnChange:%270%27),source:%27unsigned+int+udiv10(unsigned+int+a)+%7B+return+a/10%3B+%7D%0A%0Aint+idiv10(int+a)+%7B+return+a/10%3B+%7D%0A%0Aunsigned+int+udiv777(unsigned+int+a)+%7B+return+a/777%3B+%7D%27),l:%275%27,n:%271%27,o:%27C%2B%2B+source+%231%27,t:%270%27)),k:33.333333333333336,l:%274%27,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((h:compiler,i:(compiler:clang390,filters:(b:%270%27,commentOnly:%270%27,directives:%270%27,intel:%270%27),options:%27-xc+-O3+-march%3Dhaswell+-Wall+-Wextra+-fverbose-asm%27),l:%275%27,n:%270%27,o:%27%231+with+x86-64+clang+3.9.0%27,t:%270%27)),k:33.333333333333336,l:%274%27,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((h:compiler,i:(compiler:g62,filters:(b:%270%27,commentOnly:%270%27,directives:%270%27,intel:%270%27),options:%27-xc+-O3+-march%3Dhaswell+-Wall+-Wextra+-fverbose-asm%27),l:%275%27,n:%270%27,o:%27%231+with+x86-64+gcc+6.2%27,t:%270%27)),k:33.33333333333333,l:%274%27,n:%270%27,o:%27%27,s:0,t:%270%27)),l:%272%27,n:%270%27,o:%27%27,t:%270%27)),version:4)。即便如此，这还是比硬件除法指令快，[后者非常慢，例如`DIV r64`在 Haswell 上的延迟为 22-29 个周期，吞吐量很差](https://stackoverflow.com/questions/40354978/why-is-this-c-code-faster-than-my-hand-written-assembly-for-testing-the-collat/40355466#40355466)

* * *

如果他们打算在更多指令上花费操作码（和解码器晶体管/电源），**那么具有单宽度除数的两寄存器形式的 IDIV 可能对编译器有用**。

我不太了解硬件除法器是如何在内部实现的，所以 IDK 如果只做 N / N => N 位除法而不是通常的 2N / N => N 可以节省的话。在编译器输出中，几乎所有除法都在 CDQ 或`xor edx,edx`. 除法在许多 x86 微架构上是可变延迟的，所以如果在除数实际上只有 N 位时有任何加速，大概硬件已经在寻找它了。但是，[Skylake DIV/IDIV r32 是恒定的 26c 延迟](http://agner.org/optimize/)（但 64 位除数要慢得多，并且延迟仍然非常可变）。

大概一条`DIV r32, r32`指令仍会产生 2 个输出（商和余数），我猜在两个输入寄存器中？所以你经常需要额外的 MOV 指令来保存你的输入。或者可能需要立即选择商或余数进入一个目的地，或者对商/余数使用两个单独的操作码？

此时，他们可以添加一个有点像[MULX](http://www.felixcloutier.com/x86/MULX.html)的 VEX 编码版本，具有三个显式操作数。但是，MULX 的预期用例是允许扩展精度乘法与扩展精度加法与进位交错，因此`DIVX r64(quotient), r64(remainder), r/m64(divisor)`（在 RDX 中有隐式除数？）将有很大不同（对扩展精度不太有用）。他们可能仍会将隐性红利设为 RDX:RAX。否则他们甚至不会称它为 DIVX，因为这已经是[视频编解码器/公司的商标](http://www.divx.com/)

# jquery - 带有回调函数的视频背景脚本

> ID：12586236
> 
> 赞同：0
> 
> 时间：2012-09-25T15:29:59.873
> 
> 标签：jquery, html, video, callback

我正在寻找一个插件（可能是与 html5 结合的 jquery），它在后台播放视频并包含视频结束时的事件等选项。您知道对此有任何负责任的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:44:10.190

好吧，我找到了解决这个问题的方法。嗯，有剧本

[http://dfcb.github.com/BigVideo.js/](http://dfcb.github.com/BigVideo.js/)

它允许在后台播放视频，它“建立在[Video.js 之上](http://videojs.com/)”。这就是您可以使用 API (http://videojs.com/docs/api/) 的原因。此 API 包括事件类型的完整列表并包含“结束”事件。

# python - Python：试图获取交叉点的索引

> ID：12586238
> 
> 赞同：0
> 
> 时间：2012-09-25T15:30:12.850
> 
> 标签：python, indexing, set-intersection

> **可能重复：**
> [Python：为两个列表的交集查找相应的索引](https://stackoverflow.com/questions/12570417/python-finding-corresponding-indices-for-an-intersection-of-two-lists)

我有以下代码行：

```
for i in [i for i,x in enumerate(catdate) if x == set(NNSRCfile['datetimenew']).intersection(catdate)]:
    print i 
```

我试图找到上面两个组件的交集索引。两者都是有几个共同点的冗长列表。相交部分完美运行；但是，for 循环似乎什么也没输出。（即：没有打印任何内容）。

Python 没有输出错误，当我在 IPython 中运行代码时，我注意到 i 等同于列表“catdate”中的最后一个元素，而不是列出等同于交集值的“catdate”索引。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:35:33.840

如果你想测试是否`x`在你的路口，你应该使用：

```
indices = [i for (i, x) in enumerate(catdate) if x in set(NNSRCfile['datetimenew']).intersection(catdate)]
for i in indices:
    print i 
```

否则，您将单个元素与一个集合进行比较，这不太可能起作用（因此，测试总是失败，您的`indices`列表为空，没有打印任何内容......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:42:47.863

set() 将不匹配单个值，请尝试：

```
if set(x) == set( ... 
```

就个人而言，我会避免在这样的嵌套上下文中使用相同的“i”，顺便说一句，尽管 python alloqws 它。至少读起来很费解。。

# c# - 为 Web 服务手动创建代理

> ID：12586239
> 
> 赞同：0
> 
> 时间：2012-09-25T15:30:13.773
> 
> 标签：c#, wcf, web-services, wsdl

我必须与运行在 Axis 1.2 上的 Web 服务进行通信（使用 .NET）。使用两个 .NET 工具和 WSDL 我创建了 C# 代理，但是我遇到了以下问题：

1) WSDL.exe 创建了一个缺少方法输入参数的代理。例如，如果应该有这样的方法：

```
AReturnType AMethod(AnInputType); 
```

创建的代理有这样的方法：

```
void AMethod(); 
```

2) 我读过建议使用 SVCUTIL.exe 而不是 WSDL.exe。所以我用 SVCUTIL 创建了代理，但是遇到了[臭名昭著](https://stackoverflow.com/questions/8017700/invoking-a-java-axis-web-service-from-net-the-return-null-issue)的 NULL 返回对象的问题。不幸的是，我找不到任何合适的解决方案。

所以我愿意手动进行设置。这是我所拥有的：

*   SoapUI 很好地解析了 WSDL，可以检查 SOAP/XML 请求/响应。
*   Axis WSDL2JAVA 生成正确的 Java 代码，并且运行良好
*   使用 HttpWebRequest 发送 XML/SOAP 请求会生成正确的 XML/SOAP 响应。
*   我尝试使用 XSD.EXE 工具生成 XSD 和 C# 对象并将 XML 响应（通过上一步获得）序列化到这些对象中。

所以你有什么建议？有没有办法以某种方式手动创建代理？或者生成的 Java 代码能以某种方式帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:57:27.537

以下是我正在处理的项目如何创建和使用手动代理。

**这是客户端代理：**

```
 [ServiceContract(Name = "YourServiceContract", Namespace = "http://....")]
 public interface YourServiceContract, 
  {
    [OperationContract]
    object GetObject(object searchCriteria);
   }

public class YourClient : ClientBase<YourServiceContract>, YourServiceContract
{
    public YourClient (){ }

    public YourClient (string endpointConfigurationName)
    : base(endpointConfigurationName){ }

    public object GetObject(object searchCriteria)
    {
    return base.Channel.GetObject(searchCriteria);
    }
} 
```

**这就是它的名称：**

```
public void GetYourObject(object searchCriteria)
    {
        YourClient proxy = new YourClient();
        proxy.GetObject(searchCriteria);
        proxy.SafeClose();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:38:01.890

看看这个答案。将允许您直接发出 HttpRequest：-

*   [在没有代理的情况下调用 WCF 服务方法](https://stackoverflow.com/questions/6606317/invoking-wcf-service-methods-without-having-a-proxy/6609105#6609105)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:43:47.617

有一组[预定义的互操作绑定](http://wcf.codeplex.com)将 WCF 客户端与 Java 世界中的服务连接起来。

# windows - 如何定位系统硬盘上虚拟机上运行的操作系统中存在的数据？

> ID：12586242
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:30:16.570
> 
> 标签：windows, windows-7, vmware

我在 vmware 上运行回溯，同时运行 Windows 7 作为基本操作系统。我可以通过我的 Windows 7 操作系统找到回溯操作系统中存在的数据的位置。如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:54:16.447

Microsoft 的 Virtual PC（或至少`XPMODE`是 VPC 的版本）可以选择在 Integration Features 下使主机的部分文件系统对 VPC 可用。 [（来源：][[mediafire.com](http://www.mediafire.com/conv/e51fd5fe873d312d319ae406c4cfb8997e98aac65f570a6e5ad8b7e7af0498ee6g.jpg)][）][![集成功能](../Images/ebb5c0411bed5106e8567533f2fcdf5e.png)](https://i.stack.imgur.com/ntObO.png)

我想这也可以通过 vmware 实现，尽管我所做的一点点搜索只发现了一种使用整个物理磁盘和/或主机磁盘分区的方法。

我在这里找到了：http: [//pubs.vmware.com/server1/vm/disks_add_raw_gsx.html#1039236](http://pubs.vmware.com/server1/vm/disks_add_raw_gsx.html#1039236)

如果一切都失败了，您应该能够通过网络共享文件和文件夹，如下所示：

```
\\.host\Shared Folders\Test files 
```

有更多关于这里的信息：http: [//www.vmware.com/support/ws45/doc/running_sharefold_ws.html](http://www.vmware.com/support/ws45/doc/running_sharefold_ws.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:33:31.863

来自虚拟机的整个虚拟硬盘通常存储在主机操作系统文件系统上的单个文件中。这通常是专有格式，需要第三方软件从主机操作系统挂载 - 这必须在 VM 未运行时完成。此外，只有当 VM 上的目标分区是主机操作系统支持的文件系统时，这才有可能。Backtrack 是 Linux，这不太可能。

简短的回答，可能没有。

# php - 如何检测变量中的地址或邮政编码

> ID：12586246
> 
> 赞同：0
> 
> 时间：2012-09-25T15:30:24.810
> 
> 标签：php

我的问题听起来可能不同，但我真的在寻找解决方案。

我在 PHP 中有一个变量，比如说`$check`，包含一个字符串。它可以是地址或邮政编码。我们可以在这里应用任何规则来检查变量是否具有邮政编码或地址？

编辑：此网站适用于英国

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T15:51:29.013

很详细的链接：[这里](http://stuff.nekhbet.ro/2006/09/14/how-to-validate-an-uk-united-kingdom-post-code.html)

```
function IsPostcode($postcode)
    {
    $postcode = strtoupper(str_replace(' ','',$postcode));
    if(preg_match("/^[A-Z]{1,2}[0-9]{2,3}[A-Z]{2}$/",$postcode) || preg_match("/^[A-Z]{1,2}[0-9]{1}[A-Z]{1}[0-9]{1}[A-Z]{2}$/",$postcode) || preg_match("/^GIR0[A-Z]{2}$/",$postcode))
    return true;
    else
    return false;
    } 
```

利用：

```
$e = "AB235RB";
if (IsPostcode($e))
print "Valid Post Code";
else
print "Invalid Post Code"; 
```

我已经基于此编写了一个英国邮政编码验证器，所以我知道它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:39:52.287

### 新答案

正如 Marc B 指出的那样，由于英国邮政编码的字母数字质量，我的最初答案将不起作用。在这种情况下，我建议[`preg_match`](http://php.net/manual/en/function.preg-match.php)使用正则表达式匹配邮政编码，或者如果您可以确定没有地址会达到那个长度，您可以[`strlen`](http://php.net/manual/en/function.strlen.php)打开并查找邮政编码的长度。`$check`

我建议阅读[这个问题](https://stackoverflow.com/questions/164979/uk-postcode-regex-comprehensive)，以便对所需的正则表达式进行很好的讨论。

### 旧答案

如果它是一个简单的邮政编码（即不像 12345-1234），您可以使用[`is_numeric`](http://php.net/manual/en/function.is-numeric.php). 这有点小技巧，但它可能适合您的目的。即使它是一个复杂的 zip，您也可以始终使用[`str_replace`](http://php.net/manual/en/function.str-replace.php)删除`-`和检查`is_numeric`. 这当然是假设地址有一些字符/字符串内容并且不是完全数字的。

# java - String.valueOf(char) 和 + 的区别

> ID：12586248
> 
> 赞同：1
> 
> 时间：2012-09-25T15:30:28.413
> 
> 标签：java, string, char, default-value

为了显示 char 的默认值，我编写了如下代码：

```
public class TestChar {
  static char a;
  public static void main(String[] args) {
    System.out.println("."+String.valueOf(a)+".");
    System.out.println("the default char is "+a);
  }   
} 
```

但是控制台输出很混乱。第一个是“..” ，但是第二个是“默认字符是[]（像这样，我不知道如何描述它。）”为什么？谢谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:43:43.150

正如 user1681360 提到的，它是`'\0'`您正在打印的字符。您尚未初始化您的字段，因此 Java 为您将其初始化为默认值 unprintable character `'\0'`。根据环境，不可打印的字符将显示为空框、问号等。

在第一行中，您首先创建一个`String`，然后附加它。在第二行中，运算符`String + char`被编译为`java.lang.StringBuilder#append(char)`，因此您直接将一个字符附加到缓冲区，而不是创建一个临时`String`.

事实上，这两种方法总是等价的，即使所讨论的字符是`'\0'`。Java 语言规范中对字符`'\0'`进行了特殊处理，但这不会影响此特定行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:33:06.707

字符不是字符串。在您的第一个打印语句中，您将 char 转换为字符串，然后打印该值。在第二行中，您只是直接打印 char 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:34:53.820

你还没有初始化a的值，所以相当于char a = 0; 一个不可打印的字符。

将值初始化为静态字符 a = 'a'; 那应该告诉你一些东西。

更新：由于第二个字符是不可打印的，它显示为一个正方形，但它实际上是一个 '\0' 字符。

更新2：默认值为0，如数字0，而不是字符'0'。

# objective-c - 为什么 UIToolBar 在 NavigationController 中消失了？

> ID：12586251
> 
> 赞同：1
> 
> 时间：2012-09-25T15:30:35.547
> 
> 标签：objective-c

我正在尝试将 ViewController（下一步，调用 ViewCon）推送到 NavigationController。（接下来，调用 NavCon）

但是当 ViewCon 被推送到 NavCon 时，ViewCon 的工具栏就消失了。

当 ViewCon 未在 NavCon 中推送时，ViewCon 的工具栏可以正常工作。

谁知道原因？

![在此处输入图像描述](../Images/a0464f2f6ce69e01fcb18fee8d906464.png) ![在此处输入图像描述](../Images/5e77aa279d35071e6b23db3085219469.png)

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        ViewController *viewController1 = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
        self.viewController = [[[UINavigationController alloc] initWithRootViewController:viewController1] autorelease];
    } else {
        ViewController *viewController1 = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
        self.viewController = [[[UINavigationController alloc] initWithRootViewController:viewController1] autorelease];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

视图控制器.m

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIToolbar *toolbar = [[UIToolbar alloc] init];
    [toolbar setBarStyle:UIBarStyleBlackTranslucent];
    [toolbar sizeToFit];

    CGFloat toolbarHeight = [toolbar frame].size.height;
    CGRect viewBounds = self.view.bounds;
    CGFloat viewHeight = CGRectGetHeight(viewBounds);
    CGFloat viewWidth = CGRectGetWidth(viewBounds);
    CGRect rectArea = CGRectMake(0, viewHeight - toolbarHeight, viewWidth, toolbarHeight);

    [toolbar setFrame:rectArea];

    NSMutableArray *buttons = [[[NSMutableArray alloc] init] autorelease];

    UIBarButtonItem *prevButton = [[UIBarButtonItem alloc] initWithTitle:@"preView" style:UIBarButtonItemStyleBordered target:self action:@selector(prevClicked:)];
    [buttons addObject:prevButton];
    [prevButton release];
    [toolbar setItems:buttons animated:YES];

    [self.view addSubview:toolbar];
    [toolbar release];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:41:19.557

视图控制器的视图框架在 viewDidLoad 方法中不是最终的，并且可能不考虑导航栏的大小 - 因此，当显示导航栏时，您的工具栏很可能会超出屏幕的下边界。

要解决这个问题，您可以在`viewWillAppear:`方法中设置工具栏的框架（然后控制器的视图将具有正确的框架）。或者尝试将工具栏的 autoresizingMask 属性设置为，`UIViewAutoresizingFlexibleTopMargin`以便工具栏将“粘”到视图的底部。

# javascript - 在锚点中需要 JavaScript var

> ID：12586252
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:30:38.613
> 
> 标签：javascript, html

我确信这很简单，但我需要一些帮助。

我正在尝试将变量插入以下代码段中的锚点

```
var tablerows = ''
  $.each( data, function(index,row){
    id = row.shift()
    tablerows += '<tr><td><a href="getuserimage.php?id=" target="_blank">' + row.shift() + '</a></td>'
    tablerows += '<td>' + row.join('</td><td>') + '</td></tr>'
  })
  $("#users-table > tbody").html(tablerows) 
```

我只是不确定如何在其中获取 id

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:35:01.193

这不是 PHP，这是 JavaScript (jQuery) 代码。无论哪种方式，在 JS 中，将变量字符串化为字符串常量很容易完成：

```
tablerows += '<tr><td><a href="getuserimage.php?id=' + yourVar + '" target="_blank">'; 
```

对于 PHP 来说同样容易：

```
<?php
    $string = '<tr><td><a href="getuserimage.php?id='.$var.'" target="_blank">';
    //or simply:
    echo '<tr><td><a href="getuserimage.php?id='.$var.'" target="_blank">';
?> 
```

等等

# javascript - 检查所有相同类元素的数据

> ID：12586259
> 
> 赞同：1
> 
> 时间：2012-09-25T15:30:57.103
> 
> 标签：javascript, jquery

我需要代码来检查 .account-select 的所有实例的数据名称值。现在它只检查第一个 .account-select 元素，而不是任何后续元素。

现在的功能是单击 John Smith 等元素，它检查 .account-select lis 的数据名称。如果数据名称相同，则不会使用 John Smith 数据创建新的 li。如果没有数据名称等于 John Smith，那么它会在 John Smith 中添加一个 li。

这是我为它制作的 JS-Fiddle，因此您可以看到我所指的内容：http: [//jsfiddle.net/rsxavior/vDCNy/22/](http://jsfiddle.net/rsxavior/vDCNy/22/) 任何帮助将不胜感激。

这是我现在使用的 Jquery 代码。

```
$('.account').click(function () {
   var acc = $(this).data("name");
    var sel = $('.account-select').data("name");           
    if (acc === sel) {
    }
    else {
         $('.account-hidden-li').append('<li class="account-select" data-name="'+ $(this).data("name") +'">' + $(this).data("name") + '<a class="close bcn-close" data-dismiss="alert" href="#">&times;</a></li>');
    }
}); 
```

和 HTML：

```
<ul>
    <li><a class="account" data-name="All" href="#">All</a></li>
    <li><a class="account" data-name="John Smith" href="#">John Smith</a></li>
</ul>

<ul class="account-hidden-li">
    <ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:38:29.197

您可以使用 an[`.each()`](http://api.jquery.com/each/)来遍历它们：

```
var acc = $(this).data('name');
$('.account-select').each(function(){
  var sel = $(this).data('name');
  if (acc == sel){
  }else{
    // $(...).append(...)
  }
}); 
```

或者您可以使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)：

```
$('.account-select[data-name="'+acc+'"]') // assuming no `"` in acc otherwise
                                          // you're going to need to escape it 
```

这意味着您还可以使用[`:not()`](http://api.jquery.com/not-selector/)选择器来实现您所追求的：

```
var acc = $(this).data('name');
$('.account-select:not([data-name="'+acc+'"])')
  .append(...) 
```

[原始示例](http://jsfiddle.net/mqk6c/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:36:13.287

正如您所意识到的，`$('.account-select').data("name")`仅从第一个元素获取数据。您需要遍历每个`.account-select`并获取其数据。

```
$('.account-select').each(function(i, v){
    var sel = $(v).data('name');
    if (acc === sel) {
        // Do something if they match
    }
    else{
        // Do something else if they don't
    }
}); 
```

# javascript - 使用带有 textarea 和验证的 jQuery 提交 html 表单

> ID：12586262
> 
> 赞同：1
> 
> 时间：2012-09-25T15:31:07.843
> 
> 标签：javascript, jquery

我有以下html

```
<form  action="" class="form-horizontal" id="submitForm">
  <input class="required input-xxlarge" type="text" placeholder="Please enter a suitable title" name="title">
  <br><br>
  <div id='container' class="well">
    <br>
    <textarea class="span8 required" id='mytextarea' wrap='on'>
      Please enter some value
    </textarea>
    <br>
    <input class="btn btn-info" type="submit" id="submit-button" value="Submit">
  </div>

</form> 
```

当用户单击提交时，我想将 textarea 数据以及文本数据发送到 url。我也在使用[验证插件](http://docs.jquery.com/Plugins/Validation)，只是为了确保客户端验证。

以下是我的 jQuery：

```
 $(function() {
    $("#submitForm").submit(function(){
        if ($("#submitForm").validate()){
            $.post("/create/post/",
                   {'data':$('#mytextarea').val()},
                   function(data){
                       console.log(data);
                       alert(data);
                   });
        }
    });
    }); 
```

截至目前，它似乎不起作用，有什么问题吗？如何覆盖提交按钮，执行验证，然后将数据发布到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:11:40.340

[`validate()`](http://docs.jquery.com/Plugins/Validation/validate)只是插件的初始化方法，而不是用来检查表单是否有效的方法。您提供的代码始终“验证”为真，因为`validate()`返回验证对象。实际检查表单是否有效是[`valid()`](http://docs.jquery.com/Plugins/Validation/valid)目的。

此外，正如[德猫所写](https://stackoverflow.com/a/12586351/342156)，您需要停止事件传播，以便使用 ajax 提交表单。一种方法是在回调结束时返回 false。

所以你的代码应该是这样的：

```
$(function() {
    $("#submitForm").validate();

    $("#submitForm").submit(function(){                       
        if ($("#submitForm").valid()){
            $.post("/create/post/",
                   {'data':$('#mytextarea').val()},
                   function(data){
                       console.log(data);
                       alert(data);
                   });
        }
        return false;
    });
 });​ 
```

这是一个演示：http: [//jsfiddle.net/hzcF7/](http://jsfiddle.net/hzcF7/)

另一种方法是让插件自己进行验证，并在`submitHandler`初始化验证对象时使用该选项告诉它如果表单有效该怎么做。像这样：

```
$(function() {
    $("#submitForm").validate({
        submitHandler: function() {
            $.post("/create/post/",
               {'data':$('#mytextarea').val()},
               function(data){
                   console.log(data);
                   alert(data);
               });
        }
    });
 });​​​ 
```

[演示](http://jsfiddle.net/hzcF7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:35:24.457

您只需要返回 false 或执行事件停止传播。现在，该函数在启动 AJAX 后继续提交表单的正常过程。你只需要告诉它停止

```
$(function() {
    $("#submitForm").submit(function(){
        if ($("#submitForm").validate()){
            $.post("/create/post/",
                   {'data':$('#mytextarea').val()},
                   function(data){
                       console.log(data);
                       alert(data);
                   });
        }
        return false;
    });
    }); 
```

# javascript - jQuery图片库没有预加载？

> ID：12586265
> 
> 赞同：0
> 
> 时间：2012-09-25T15:31:16.237
> 
> 标签：javascript, jquery, image-gallery, preloader

我有一个基本的图片库，它应该在加载时显示 GIF 和白色背景。由于某种原因，这没有显示...

任何想法为什么？这是链接[http://v3.edharrisondesign.com/about/](http://v3.edharrisondesign.com/about/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:43:19.423

在你的`nivo-slider.css`你必须添加这一行。那应该工作

```
.nivoSlider {
   background:url("/stylesheets/default/loading.gif") no-repeat scroll 50% 50%;
} 
```

并从`default.css`

```
.theme-default .nivoSlider {
   background: url("loading.gif") no-repeat scroll 50% 50% #FFFFFF; // this line
   margin-bottom: 10px;
   position: relative;
} 
```

# magento - Magento 1.7 验证码模块

> ID：12586267
> 
> 赞同：3
> 
> 时间：2012-09-25T15:31:21.630
> 
> 标签：magento, captcha, magento-1.7

在新的 Magento 版本中，“系统->配置->客户配置->验证码”中的验证码选项我创建了一个名为“Signmeup”的新表单......但它似乎不起作用。我无法让它显示：

```
<?php echo Mage::getSingleton('core/layout')
->createBlock('captcha/captcha_zend')
->setFormId('signmeup')
->setImgWidth(230)
->setImgHeight(50)
->setTemplate('captcha/zend.phtml')
->toHtml();?> 
```

现在该块没有显示在页面上。（不是动态页面......具有核心 Mage Bootup 的静态页面）这是我正在谈论的屏幕截图：

![](../Images/6c1e8ced9be1d770e0bf399a7d48135f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T15:10:21.293

在网上找到 captcha.xml 代码（由于某种原因不在我的企业中）后，我创建了`captcha.xml`该代码并将其粘贴到布局文件夹中。

接下来，我确保在`admin > Config > Customer config..`

我确实必须添加我希望验证码显示的 phtml 文件：

```
echo $this->getChildHtml('form.additional.info');  (in php brackets.) 
```

一旦我这样做了，一切都会显示出来并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T04:26:52.347

我可以通过创建一个小模块来做到这一点，该模块将本机验证码模块添加到产品评论表单中。该模块仅包含几个文件：

```
app/code/local/MyCompany/MyCaptcha/etc/config.xml
app/code/local/MyCompany/MyCaptcha/Model/Observer.php
app/etc/modules/MyCompany_MyCaptcha.xml
app/design/frontend/default/default/layout/mycaptcha.xml 
```

将以下代码添加到包含您希望将验证码添加到的表单的模板 (.phtml) 文件中：

```
<?php echo $this->getLayout()->createBlock('captcha/captcha')
->setFormId('your_form_id')
->setImgWidht(230)
->setImgHeight(50)
->toHtml();
?> 
```

将“your_form_id”更改为您想要的任何内容。
在**config.xml**中：

```
<config>
    <modules>
        <MyCompany_MyCaptcha>
            <version>1.0.0</version>
        </MyCompany_MyCaptcha>
    </modules>
    <frontend>
        <layout>
            <updates>
                <mycaptcha> <!-- should be some unique name -->
                    <file>mycaptcha.xml</file>
                </mycaptcha>
            </updates>
        </layout>
    </frontend>
    <!--  Now we need to add our observer. I attached mine to the 
controller_action_predispatch_review_product_post event because 
I needed to intercept product review post event. The event you 
attach your observer to will be different depending on what you're 
trying to do. -->
    <global>
        <events>
            <controller_action_predispatch_review_product_post>
                <observers>
                    <mycaptcha> <!-- these need to match -->
                        <class>MyCompany_MyCaptcha_Model_Observer</class>
                        <method>myMethod</method>
                    </mycaptcha>
                </observers>
            </controller_action_predispatch_review_product_post>
        </events>
    </global>
    <!-- Now we add our form label that will show in configuration and allow
us to turn the captcha on or off. -->
    <default>
        <captcha>
            <frontend>
                <areas>
                    <mycaptcha> <!-- these need to match -->
                        <label>My Captcha</label>
                    </mycaptcha>
                </areas>
            </frontend>
        </captcha>
    </default>
</config> 
```

**config.xml**就是这样。
现在让我们添加我们的观察者。以下代码来自[http://mustakarhu.com/blog/magento-captcha-extension-ajax/](http://mustakarhu.com/blog/magento-captcha-extension-ajax/)并且只进行了轻微更改，因此请大声喊出他们。

```
<?php
/**
* Break the execution in case of incorrect CAPTCHA  
*
* @param Varien_Event_Observer $observer
* @return Cbad_Captcha_Model_Observer
*/

class MyModule_MyCaptcha_Model_Observer extends Mage_Captcha_Model_Observer
{

 public function myMethod($observer) { // called in config.xml
    $formId = 'your_form_id'; // you will change this value
    $captchaModel = Mage::helper('captcha')->getCaptcha($formId);
    $controller = $observer->getControllerAction();
    $request = $controller->getRequest();
    if ($captchaModel->isRequired()) {

        $request->getPost(Mage_Captcha_Helper_Data::INPUT_NAME_FIELD_VALUE);
        if (!$captchaModel->isCorrect($this->_getCaptchaString($request, $formId))) {

            if((isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')) {
                // Is ajax
                $action = $request->getActionName();
                Mage::app()->getFrontController()->getAction()->setFlag(
                        $action, Mage_Core_Controller_Varien_Action::FLAG_NO_DISPATCH, true);

                $controller->getResponse()->setHttpResponseCode(200);
                $controller->getResponse()->setHeader('Content-type', 'application/json');

                $controller->getResponse()->setBody(json_encode(
                        array(
                            "msg" => Mage::helper('captcha')->__('Incorrect CAPTCHA.')
                        )
                    ));

            } else {
               // Is form submit
                Mage::getSingleton('customer/session')
                    ->addError(Mage::helper('captcha')->__('Incorrect CAPTCHA.'));
                $controller->setFlag('', Mage_Core_Controller_Varien_Action::FLAG_NO_DISPATCH, true);
                Mage::getSingleton('customer/session')
                    ->setCustomerFormData($controller->getRequest()->getPost());
                $controller->getResponse()->setRedirect(Mage::getUrl('*/*'));
            }
        }
    }

    return $this;
  }
}
?> 
```

大部分工作都已经结束了。我将把**MyCompany_MyCaptcha.xml**留给您自己解决（这非常简单）。
在 mycaptcha.xml**上**：

```
<?xml version="1.0"?>
<layout version="0.1.0">
<catalog_product_view>
        <reference name="head">
            <action method="addJs"><file>mage/captcha.js</file></action>
        </reference>
</catalog_product_view>
</layout> 
```

此布局 xml 将必要的 javascript 添加到产品页面的 head 部分。您需要将布局句柄 (catalog_product_view) 更改为表单所在的任何页面。
我希望我对所有内容都进行了足够详细的介绍，并且有人能够根据自己的需要进行调整。

关于这个主题的一些其他资源：

*   [http://www.magentocommerce.com/boards/viewthread/298363/](http://www.magentocommerce.com/boards/viewthread/298363/)
*   [http://razbakov.com/en/magento-native-captcha-for-contact-form/](http://razbakov.com/en/magento-native-captcha-for-contact-form/)
*   [https://www.atwix.com/magento/captcha-in-magento/](https://www.atwix.com/magento/captcha-in-magento/)

# php - 2 个表中的自动增量

> ID：12586268
> 
> 赞同：0
> 
> 时间：2012-09-25T15:31:22.880
> 
> 标签：php, mysql, forms, auto-increment

> **可能重复：**
> [PHP：如何获取最后插入的表 ID？](https://stackoverflow.com/questions/1685860/php-how-to-get-last-inserted-id-of-a-table)

我做了一个表格，想在两个表中写入数据。

```
$sql = "INSERT INTO ma_forum (notcat_id, usr_id, not_titulo, not_status, not_tags, not_data, not_comentarios, not_resumo, not_texto) 

        VALUES('$categoria', '".$_SESSION[usr_name]."', '$titulo', '$status', '$tags', '".time()."', '$comentarios', '$resumo', '$texto')";

$res = mysql_query($sql) or die(mysql_error());

$sql_or = "INSERT INTO ma_forum_comentarios (comnot_habbo, comnot_data, comnot_status) VALUES('$_SESSION[usr_name]', '".time()."', '$status_comnot')";

$res = mysql_query($sql_or) or die(mysql_error()); 
```

但在第一个表中，它会自动写入 ID auto_increment。但我想输入第一个表和另一列的 ID。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:33:09.087

使用 php 函数 mysql_insert_id() 检索最后插入的 id：http: [//php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

所以应该是：

```
$sql = "INSERT INTO ma_forum (notcat_id, usr_id, not_titulo, not_status, not_tags, not_data, not_comentarios, not_resumo, not_texto) VALUES ('$categoria', '".$_SESSION[usr_name]."', '$titulo', '$status', '$tags', '".time()."', '$comentarios', '$resumo', '$texto')";

$res = mysql_query($sql) or die(mysql_error());

$sql_or = "INSERT INTO ma_forum_comentarios (id, comnot_habbo, comnot_data, comnot_status) VALUES(" . mysql_insert_id() . ",'$_SESSION[usr_name]', '".time()."', '$status_comnot')";

$res = mysql_query($sql_or) or die(mysql_error()); 
```

确保将我指定的“id”列替换为您的实际 id 列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:33:58.817

```
mysql_query("INSERT INTO mytable (product) values ('kossu')");
printf("Last inserted record has id %d\n", mysql_insert_id()); 
```

# javascript - 如何将动态生成的 JSON 对象集成到其他对象中？

> ID：12586269
> 
> 赞同：1
> 
> 时间：2012-09-25T15:31:30.683
> 
> 标签：javascript, jquery

如何将此 JSON 对象放入下面的函数或对象中？

```
// this function generates an JSON Object dynamically       
$(".n_ListTitle").each(function(i, v) {
    var node = $(this);
    var nodeParent = node.parent();
    var nodeText = node.text();
    var nodePrice = node.siblings('.n_ListPrice');

    var prodPrice = $(nodePrice).text();
    var prodId = nodeParent.attr('id').replace('ric', '');
    var prodTitle = nodeText;

    var json = {
        id : prodId,
        price : prodPrice,
        currency : "CHF",
        mame : prodTitle
    };
    return json;
});

TDConf.Config = {
    products : [
        // here should be inserted the JSON Object
        {id: "[product-id1]", price:"[price1]", currency:"[currency1]", name:"[product-name1]"},
        {id: "[product-id2]", price:"[price2]", currency:"[currency2]", name:"[product-name2]"},
        ...

    })],
    containerTagId :"..."
}; 
```

如果无法理解，请询问:) 提前感谢您帮助我弄清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:35:13.097

你可以这样做：

```
 TDConf.Config = {
        products : []
     };

     $(".n_ListTitle").each(function(i, v) {
        var node = $(this);
        var nodeParent = node.parent();
        var nodeText = node.text();
        var nodePrice = node.siblings('.n_ListPrice');

        var prodPrice = $(nodePrice).text();
        var prodId = nodeParent.attr('id').replace('ric', '');
        var prodTitle = nodeText;

        var json = {
            id : prodId,
            price : prodPrice,
            currency : "CHF",
            name : prodTitle
        };
        TDConf.Config.products.push( json );
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:36:13.973

如果你想添加它，`TDConf.Config.products`那么你会这样做：

```
TDConf.Config.products.push(theDynamicJsonObj); 
```

如果您想添加/覆盖现有`TDConf.Config.products`元素的属性，那么您可以：

```
TDConf.Config.products[theNumericIndex] = $.extend(TDConf.Config.products[theNumericIndex], theDynamicJsonObj); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:36:23.257

你的函数没有做你认为它做的事情（`return`里面的语句`.each`只能打破一个循环）。试试这个：

```
TDConf.Config = {
    products : [],
    // some other stuff
}
$(".n_ListTitle").each(function(i, v) {
    // some other code
    var json = {
        id : prodId,
        price : prodPrice,
        currency : "CHF",
        name : prodTitle
    };
    TDConf.Config.products.push( json );
}); 
```

您应该了解更多关于 JavaScript、范围和 JSON 的知识，因为您似乎不明白您正在处理的实际上不是 JSON，它是一个 JavaScript 对象（略有不同但仍然不同）。

# c# - 在 windows azure 上部署时自定义 app.config

> ID：12586272
> 
> 赞同：2
> 
> 时间：2012-09-25T15:31:42.587
> 
> 标签：c#, azure, app-config, azure-deployment

当我尝试在 Windows azure 中部署我的应用程序时遇到一些问题。

我在 Windows Azure 中有几项服务。其中之一被称为自动机。它需要连接到 SQL Azure 数据库。因此，我在 app.config 中保存了 ConnectionString（我正在使用实体框架），并根据构建配置添加了一些转换。

我找到了一个插件，它有助于将转换添加到任何名为`slow cheetah`( [http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx) )的 XML 文件中

当我尝试在不同的构建配置下编译代码时，我可以看到配置文件转换得很好（我已经检查了我项目的 bin 文件夹）。但是，当我在 windows azure 中部署项目时，我可以看到由于数据库连接问题，我的角色正在循环。所以，我认为 app.config 在为部署目的而编译解决方案时不会被转换。

你有什么信息可以帮助我解决我的问题吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:37:37.860

您需要修改 azure 项目以告诉它在每次打包时更新 app.config，如以下教程步骤 10 所示 -

[http://wely-lau.net/2012/03/14/applying-config-transformation-app-config-in-windows-azure-worker-role/](http://wely-lau.net/2012/03/14/applying-config-transformation-app-config-in-windows-azure-worker-role/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:38:31.690

您是否考虑过使用服务配置？

您可以在 worker 角色启动期间读取连接字符串，可以为 Cloud 和 Local 定义单独的配置，还可以通过管理门户更改配置值。

请参阅MSDN 上的[RoleEnvironment 类](http://msdn.microsoft.com/en-us/library/ee773173.aspx)。

# php - 在媒体上传窗口中默认选择大尺寸 - Wordpress

> ID：12586278
> 
> 赞同：1
> 
> 时间：2012-09-25T15:31:53.893
> 
> 标签：php, image, wordpress, upload, media

在帖子编辑页面的添加媒体窗口中，上传图像时，有 4 种尺寸可用：`Thumbnail`、`Medium`和。默认情况下选择该选项。`Large``Full Size``Full Size`

我怎样才能使`Large`选项默认被选中而不是`Full Size`？

我认为这可以通过在函数文件中添加 PHP 代码来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T15:06:32.607

我刚刚从这篇文章中找到了答案： [https ://wordpress.stackexchange.com/questions/66057/adding-a-custom-image-upload-size-and-making-it-selected-by-default](https://wordpress.stackexchange.com/questions/66057/adding-a-custom-image-upload-size-and-making-it-selected-by-default)

```
function my_default_image_size () {
    return 'large'; 
}

add_filter( 'pre_option_image_default_size', 'my_default_image_size' ); 
```

*我在 3.7.1 上对此进行了测试，并且可以正常工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:52:46.753

Apparently, there's a row in the `options` table in the database in which the value of the `option_name` field is `image_default_size`. If you set the `option_value` field of this row to `large`, then the default option will be the large size instead of the full size (if large is available for the image).

```
UPDATE `database_name`.`prefix_options` SET `option_value` = 'large' WHERE  `prefix_options`.`option_name` = 'image_default_size'; 
```

# javascript - 突出显示从先前单击到当前单击的列 tds

> ID：12586281
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:32:06.307
> 
> 标签：javascript, jquery, html

目前我正在使用 jquery 来获取我希望能够突出显示我单击两次的 tds 的表。例如，当我单击任何 td 时，它会在表格中突出显示该 td。当我单击列中进一步向下的另一个 td 时，它也会突出显示所有中间。如果我单击另一列中的另一个 td，它应该删除前一列并重新开始。目前，我已经在 jquery 中使用 .find 进行了探索，但无济于事。我能想到的唯一选择是将 id 硬编码到 td 中并单独着色。我认为这不是有效的编码。将不胜感激任何帮助。谢谢

```
<table>
<tr>
<td><td><td>
<td><td><td>
<td><td><td>
<td><td><td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:37:07.937

不，不需要硬编码。只需检查（在您的 td-click 处理程序中）该元素的某些*同级*元素是否已突出显示。例如，如果您分配一个类“.highlight”，查询将如下所示：

```
$(this).siblings('.highlight'); 
```

...这将*只从同一行*返回突出显示的元素。

更新：误读了您的问题，并认为您实际上需要突出显示水平列。如果您需要使用它是垂直的，请在您的查询中添加一些`index`和：`nth-child`

```
$('td').click(function() {
  var $this = $(this),
      index = $this.index();
  var $columnCells = $this.parents('table')
                          .find('tr td:nth-child(' + (index + 1) + ')');
  $columnCells.toggleClass('highlight');
}); 
```

[演示](http://jsfiddle.net/JPa5v/)。

更新#2：这是（诚然，有点粗略）完整 col-highlighting 代码的示例：

```
$('td').click(function() {
  var $this = $(this),
      index = $this.index(),
      $table = $this.parents('table'),
      $rows  = $table.find('tr'),
      $columnCells = $rows.find('td:nth-child(' + (index + 1) + ')');
  var $hiCells = $columnCells.filter('.highlight');
  if ($hiCells.length) {
       var thisRowIndex = $this.parent().index(),
           $firstHiRow = $( $hiCells[0] ).parent(),
           firstHiIndex = $firstHiRow.index(),
           $lastHiRow  = $( $hiCells[$hiCells.length - 1] ).parent(),
           lastHiIndex = $lastHiRow.index();
      if (thisRowIndex > lastHiIndex) {
          $rows.slice(lastHiIndex, thisRowIndex + 1)
               .find('td:nth-child(' + (index + 1) + ')').addClass('highlight');
      } else if (thisRowIndex < firstHiIndex) {
          $rows.slice(thisRowIndex, firstHiIndex)
               .find('td:nth-child(' + (index + 1) + ')')
               .addClass('highlight');
      }
  } else {
      $table.find('td').removeClass('highlight');
      $this.addClass('highlight');
  }
}); 
```

[演示](http://jsfiddle.net/JPa5v/1/)。

如您所见，每次单击一个单元格时，我们都会获取该列中的所有单元格，然后检查它们的突出显示状态。如果其中一些被突出显示，我们得到第一个和最后一个突出显示的行，然后基本上对它们执行相同的操作：1）获取单击行和最后一个突出显示的行之间的所有行；2）获取同一列中的所有单元格，3）标记它们！如果此列中没有突出显示单元格，我们只需删除突出显示集，然后突出显示单击的单元格。

但是，如果所有列号都被缓存（例如，使用 'data-column' 属性），这可以大大简化。但我想，总的来说，方法还是一样的。

# wordpress - Mod Rewrite 以消除由 Disqus 引起的断开链接

> ID：12586283
> 
> 赞同：0
> 
> 时间：2012-09-25T15:32:07.207
> 
> 标签：wordpress, mod-rewrite, disqus, google-search-console

如其他地方所述，当 Google 抓取启用了 Disqus 的 Wordpress 网站时，Google 会尝试将一些由 Disqus 动态生成的链接编入索引（这些链接不会出现在页面源中，因此我认为这些是基于 Javascript 的链接）。

例如，Google Webmaster Tools 尝试抓取下面的 URL (A) 并引发 Page Not Found 错误，因为正确的 URL (B) 已被 Disqus 修改：

(A) www.example.com/blog/2012/09/blog-post-title/2147423647/1346789815000

(B) www.example.com/blog/2012/09/blog-post-title/

Disqus 创建的动态 URL 始终包含“2147423647”组件；这些数字不会改变。“1346789815000”部分可能存在也可能不存在，并且数字逐页变化。

我想使用 mod-rewrite 以便尝试访问表单 (A) 的 URL 获得 301 重定向到 (B) 以便我停止获取爬网错误。

请指教。请注意，我是一个 mod-rewrite 菜鸟，所以任何和所有的帮助都非常感谢！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:39:01.340

使用 mod_rewrite，尝试：

```
RewriteEngine n
RewriteRule ^([0-9]{4})/([0-9]{2})/([^/]+)/[0-9]+ /$1/$2/$3/ [L,R=301] 
```

确保这些高于您处理 SEO 友好 URL 的任何规则。

# asp.net-mvc-4 - MVC4 UserProfiles 登录后没有结果

> ID：12586289
> 
> 赞同：1
> 
> 时间：2012-09-25T15:32:17.887
> 
> 标签：asp.net-mvc-4, simplemembership

在新的 MVC4 上，它使用 SimpleMembership，在登录时包含以下行：

```
if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe)) 
```

在此之后，我执行了以下操作以获取应用于 UserProfile 的扩展属性：

```
var context = new UsersContext();
var user = context.UserProfiles.First(n => n.UserName == model.UserName); 
```

但是 UserProfiles 没有结果，并且从上下文中计数为 0？？？当我以用户身份登录时，里面一定有什么东西吗？

# tfs - TFPT Unshelve 迁移不起作用

> ID：12586290
> 
> 赞同：16
> 
> 时间：2012-09-25T15:32:19.273
> 
> 标签：tfs, tfs-power-tools, unshelve

我知道以前有人问过这个问题，但由于没有答案，我又问了一次。

我正在尝试将搁置集从一个分支迁移到另一个分支。我正在工作区 DIR 中运行以下命令：

```
tfpt unshelve changes;myusername /migrate /source:$/main /target:$/new-branch 
```

当我运行该命令时，我会打开“搁置集详细信息”窗口，其中包含更改和文件夹（指向 $/Main）

单击 unshelve 会出现冲突对话框，其中的文件夹再次指向 $/main。如果我点击解决，我会得到以下选项：

*   保留我的本地更改撤消我的本地更改，并采取搁置
*   撤消我的本地更改，并采取搁置的更改。
*   保留我的本地更改，并合并本地和搁置的内容

无论我选择哪个选项，我都不会在“新分支”中得到任何待处理的更改。我唯一未决的更改是针对主分支的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T11:07:01.327

您需要从映射到**目标**分支的目录（`$/new-branch`在您的示例中为 ）运行此命令。

例如，如果您当前的分支是 => Main，它在您的工作区中映射为`C:\Workspace\TeamProject\Main\...`

并且您想将更改移动到映射到的 Dev`D:\Workspace\TeamProject\Dev`

然后您需要从以下目录运行以下命令：

```
C:\Workspace\TeamProject\Main> tfpt unshelve "changes;muusername" /migrate /source:$/TeamProject/Main /target:$/TeamProject/Dev 
```

有关更多详细信息，请参阅 Tarun 的博客文章：http: [//geekswithblogs.net/TarunArora/archive/2011/06/06/unshelve-shelveset-created-from-one-branch-to-another.aspx](http://geekswithblogs.net/TarunArora/archive/2011/06/06/unshelve-shelveset-created-from-one-branch-to-another.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-23T11:16:07.620

我也有这个问题，发布的解决方案似乎都没有工作。

事实证明这是用户错误，我在`/target`参数中使用了反斜杠而不是正斜杠。

这是因为我最初复制了项目的本地路径而不是 TFS 路径，然后当我注意到我的错误时用 $ 替换了根路径 - 但我错过了斜线方向的更改 - 显然这很重要，并且意味着你的搁置集将在源分支上搁置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-09T18:07:37.503

我与使用 TFPT - Team Foundation Power Tools 2013 的提问者有相同的经验。我会运行命令并收到消息“自动合并成功”，认为它正在工作，但看不到目标分支中的文件发生任何变化。
我的命令是这样的：

> C:\Users\dev\TFS_TEST\rel1.1>"C:\Program Files (x86)\Microsoft Team Foundation Server 2013 Power Tools\tfpt.exe" unshelve cbbss02;xyz@gmail.com /migrate /source:$/ E Pluribus Unum/SourceCode/rel1.2 /target:$/E Pluribus Unum/SourceCode/rel1.1

正如其他人所提到的，我在源路径和目标路径周围加上引号：

> "C:\Program Files (x86)\Microsoft Team Foundation Server 2013 Power Tools\tfpt.exe" unshelve cbbss02;xyz@gmail.com /migrate /source:"$/E Pluribus Unum/SourceCode/rel1.2" /target :"$/E Pluribus Unum/SourceCode/rel1.1"

让它实际传播对目标分支的更改。（我还确保 Visual Stuido 已关闭）

# javascript - 如何使用jquery将结果放在最后

> ID：12586292
> 
> 赞同：0
> 
> 时间：2012-09-25T15:32:26.573
> 
> 标签：javascript, jquery

我的代码是： html with the js in section please ch3eck out 我需要生成五个问题形式的结果并将其显示在页面的最后一部分我哪里出错了我正在使用 innerhtml js 的东西来生成结果在最后一节

```
<div id="section1">
    <script type="text/javascript">
        function changeText2() {
            alert("working");
            var count1 = 0;
            var a = document.forms["myForm"]["drop1"].value;

            var b = document.forms["myForm"]["drop2"].value;
            alert(document.forms["myForm"]["drop2"].value);

            var c = document.forms["myForm"]["drop3"].value;
            var d = document.forms["myForm"]["drop4"].value;
            var e = document.forms["myForm"]["drop5"].value;
            var f = document.forms["myForm"]["drop6"].value;

            if (a === 2) {
                count1++;
                alert(count1);
            } else {
                alert("lit");
            }

            if (b === 2) {
                count1++;
            } else {
                alert("lit");
            }

            if (c === 2) {
                count1++;
            } else {
                alert("lit");
            }

            if (d === 2) {
                count1++;
            } else {
                alert("lit");
            }

            if (e === 2) {
                count1++;
            } else 
                alert("lit");
        }
        alert(count1);

        document.getElementById('boldStuff2').innerHTML = count1;
    </script>

    <form name="myForm">
        <p>1)&#x00A0;&#x00A0;Who won the 1993 &#x201C;King of the Ring&#x201D;?</p>
        <div>
            <select id="f1" name="drop1">
                <option value="0" selected="selected">-- Select --</option>
                <option value="1">Owen Hart</option>
                <option value="2">Bret Hart</option>
                <option value="3">Edge</option>
                <option value="4">Mabel</option>
            </select>
        </div>
        <!--que1-->
        <p>2)&#x00A0;&#x00A0;What NHL goaltender has the most career wins?</p>
        <div>
            <select id="f2" name="drop2">
                <option value="0" selected="selected">-- Select --</option>
                <option value="1">Grant Fuhr</option>
                <option value="2">Patrick Roy</option>
                <option value="3">Chris Osgood</option>
                <option value="4">Mike Vernon</option>
            </select>
        </div>
        <!--que2-->
        <p>3)&#x00A0;&#x00A0;What Major League Baseball player holds the record for
            all-time career high batting average?</p>
        <div>
            <select id="f3" name="drop3">
                <option value="0" selected="selected">-- Select --</option>
                <option value="1">Ty Cobb</option>
                <option value="2">Larry Walker</option>
                <option value="3">Jeff Bagwell</option>
                <option value="4">Frank Thomas</option>
            </select>
        </div>
        <!--que3-->
        <p>4)&#x00A0;&#x00A0;Who among the following is NOT associated with billiards
            in India?</p>
        <div>
            <select id="f4" name="drop4">
                <option value="0" selected="selected">-- Select --</option>
                <option value="1">Subash Agrawal</option>
                <option value="2">Ashok Shandilya</option>
                <option value="3">Manoj Kothari</option>
                <option value="4">Mihir Sen</option>
            </select>
        </div>
        <!--que4-->
        <p>5)&#x00A0;&#x00A0;Which cricketer died on the field in Bangladesh while
            playing for Abahani Club?</p>
        <div>
            <select id="f5" name="drop5">
                <option value="0" selected="selected">-- Select --</option>
                <option value="1">Subhash Gupte</option>
                <option value="2">M.L.Jaisimha</option>
                <option value="3">Lala Amarnath</option>
                <option value="4">Raman Lamba</option>
            </select>
        </div>
        <!--que5--> <a href="#services" class="page_nav_btn next"><input type='button' onclick='changeText2()' value='NEXT'/></a>

    </form>
</div>
<div id="section2"></div>...
<div id="results">
    <b id='boldStuff2'>fff ggg</b> 
</div> 
```

需要在最后一个 div 中显示每个部分的结果，如脚本中所示...
第一部分的 js 不起作用请帮助我我哪里出错了....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:51:47.653

您的问题似乎是大括号放在错误的位置。

您过早地结束了您的功能，“innerHTML”的东西在您的功能之外。我建议您使用正确的代码缩进，以便您更早地看到这些错误。

将您的代码更改为：

```
<script type="text/javascript">
    function changeText2() {
        alert("working");
        var count1 = 0;
        var a = document.forms["myForm"]["drop1"].value;

        var b = document.forms["myForm"]["drop2"].value;
        alert(document.forms["myForm"]["drop2"].value);

        var c = document.forms["myForm"]["drop3"].value;
        var d = document.forms["myForm"]["drop4"].value;
        var e = document.forms["myForm"]["drop5"].value;
        var f = document.forms["myForm"]["drop6"].value;

        if (a == 2) {
            count1++;
            alert(count1);
        } else {
            alert("lit");
        }

        if (b == 2) {
            count1++;
        } else {
            alert("lit");
        }

        if (c == 2) {
            count1++;
        } else {
            alert("lit");
        }

        if (d == 2) {
            count1++;
        } else {
            alert("lit");
        }

        if (e == 2) {
            count1++;
        } else 
            alert("lit");

        alert(count1);

        document.getElementById('boldStuff2').innerHTML = count1;
    }
</script> 
```

编辑：您还需要使用`==`而不是`===`. `===`还比较操作数的类型，`option`值是“字符串”，文字是 int。您也可以使用`===`，但您需要将选项值与字符串文字而不是数字进行比较。`e === "2"`而不是`e === 2`.

编辑了上面的代码。似乎现在可以工作了。 [http://jsfiddle.net/xzP8B/](http://jsfiddle.net/xzP8B/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:54:57.337

> 更新[了底部的提示和用于调试的新代码]

看来你还没有完全掌握 jQuery，我不确定你的 JavaScript 最终应该做什么，因为它显然还没有完成，但我冒昧地用完整的 jQuery 语法重写了你的 js，并附上了一些评论。我希望这可以帮助你一些。

```
<script type="text/javascript">
    function changeText2() {
        alert("working");

        var count1 = 0, //  just fyi, you could get all the following much easier if you used IDs instead, for instance:
            a = $('form[name="myForm"]').find('select[name=drop1]').val(),  //  $("#myForm") would retrieve <form id="myForm" ...
            b = $('form[name="myForm"]').find('select[name=drop2]').val(),
            c = $('form[name="myForm"]').find('select[name=drop3]').val(),
            d = $('form[name="myForm"]').find('select[name=drop4]').val(),
            e = $('form[name="myForm"]').find('select[name=drop5]').val(),
            f = $('form[name="myForm"]').find('select[name=drop6]').val();

        //  First error test here
        console.log(a, b, c, d, e, f);  //  also, you dont have to use alert to test things, try opening your browsers console

        //  really not sure what you had going with all the if statements, but they all produce the same result, well, here ...
        (a == 2 || b == 2 || c == 2 || d == 2 || e == 2 || f == 2) ? count1++ : alert("lit");

        //  Final Test in console what just happened
        console.log("A-F Equaled 2: ", (a == 2 || b == 2 || c == 2 || d == 2 || e == 2 || f == 2));
        console.log("count1: ", count1);

        alert(count1);

        $("#boldStuff2").text(count1);
    };

    //  The previous is just a function and not applied to anything
    //  which i noticed in your code may be a large part of your problem
    //  The following is the "document.ready function (if you're using a newer jQuery version you can shorten it, but thats another lesson)
    //  This tells the html, when the page loads, attempt this
    $(document).ready(function() {
        //  the following grabs the element named "myForms" and tells it, onSubmit, do what's inside
        $('form[name="myForm"]').submit(function(e) {
            e.preventDefault(); //  this command stops the form from submitting under normal browser rules
            changeText2();  //   this calls our predefined function
        });
    })
</script> 
```

> 附加信息

此外，您可以使用我提供的 jQuery/JavaScript 更改按钮的 html。由于我的 jQuery 代码具有处理表单提交的功能，因此输入按钮可以是普通的表单提交按钮

改变：

```
<input type='button' onclick='changeText2()' value='NEXT'/> 
```

到：

```
<input type="submit" value="NEXT"> 
```

并不是说这两种方法都不正确，如果需要，您仍然可以使用按钮 onclick，但是您不需要我的 .submit 代码。只是要记住的事情。

> 提示

使用 CONSOLE 而不是 ALERT 进行调试要容易得多。在不同的浏览器中查看控制台是每个不同的过程。下面我将告诉您如何在前 3 大主流浏览器中访问控制台。

> **IE7+**
> - 只需按一次“F12”键
> - 然后单击带有文本“控制台”的“选项卡”（左起第 3 个）
> 
> **FireFox**
> - 最简单的方法是安装[FireBug](https://getfirebug.com/)
> - 安装后，只需单击浏览器右上角的小“错误”
> - 然后通过单击确保“控制台”选项卡处于活动状态
> 
> **Google Chrome**
> - 只需按“Ctrl+Shift+J”
> - 提示，确保您的 Chrome 浏览器在执行此快捷键时具有窗口焦点
> - 此外，单击“控制台”选项卡，您可以在那里看到所有控制台结果

使用浏览器的控制台不仅是调试 JavaScript 的好方法，而且它还会告诉您文件加载中的错误，标记跨域问题等潜在警告等等！

# android - 在膨胀的可扩展列表视图中使用复选框保存子行的状态

> ID：12586296
> 
> 赞同：0
> 
> 时间：2012-09-25T15:32:45.130
> 
> 标签：android, android-activity, expandablelistview, android-sqlite

我的 Android 项目中有一个可用的可扩展列表视图，其中每个子视图包含一个 ImageView、一个 TextView、一个 EditText 和一个复选框：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="50dp"
android:background="#CCCCCC"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imgname"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="True"
    android:contentDescription="@+id/imgdesc"
    android:paddingLeft="1dp"
    android:scaleType="fitCenter"
    android:src="@drawable/logo_grey" />

<TableLayout
    android:id="@+id/container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_toLeftOf="@+id/check1"
    android:layout_toRightOf="@+id/imgname"
    android:stretchColumns="0" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/desc"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:textSize="13dp"
            android:background="#CCCCCC"
            android:textColor="#777777"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="fill_horizontal" >

        <EditText
            android:id="@+id/content"
            style="textViewStyle"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:fadingEdge="none"
            android:focusable="true"
            android:hint="@+id/contenthint"
            android:isScrollContainer="true"
            android:minWidth="150dp"
            android:singleLine="false"
            android:textSize="10dp"
            android:textStyle="italic" >
        </EditText>
    </TableRow>
</TableLayout>

<CheckBox
    android:id="@+id/check1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:focusable="false"
    android:gravity="right" />
 </RelativeLayout> 
```

为了写入我的 SQLite 数据库，我想创建一个列表，对于复选框值为 true 的每个子项，该列表包含来自 TextView desc 的文本和来自 EditText 内容的文本，可能作为值对数组. 该操作将由用户通过 ExpandableListActivity 上的按钮触发。但我不确定如何在放大视图后识别小部件的值。我会很感激一点点，我一直无法在网上找到一个好的答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:51:24.717

我自己并不完全是专业人士，但我会尽力而为。首先，如果您有一些东西可以跟踪您的可扩展列表视图中的复选框状态，这将有所帮助。如果你还没有。这是我使用的，我改编[自带有复选框的 Android ExpandableListView，控制选中状态](https://stackoverflow.com/questions/5068668/android-expandablelistview-with-checkbox-controlling-checked-state)：

```
//  set checkbox states
ArrayList<ArrayList<Integer>> check_states = new ArrayList<ArrayList<Integer>>(children.length);
public void setChildrenAndValues() { 
    for(int i = 0; i < children.length; i++) {
        ArrayList<Integer> tmp = new ArrayList<Integer>(children[i].length);
        for(int j = 0; j < children[i].length; j++) {
            tmp.add(1);
        }
        check_states.add(tmp);
    }
} 
```

然后在获取子视图中：

```
 childcb.setOnClickListener(new OnClickListener() {  
        public void onClick(View v) {
            if (childcb.isChecked()) {
                check_states.get(groupPosition).set(childPosition, 1);
            }else{ check_states.get(groupPosition).set(childPosition, 0);
            }
        }
    }); 
```

因此，按照同样的思路，为了将内容保存到数据库中，您可以在某些按钮的 void onclick 方法上尝试此操作：

```
 if (check_states.get(groupPosition).get(childPosition) == 1) {
        desc_content4db.put(desc_tv.getText().toString(), content_et.getText().toString());
    }else{
        // placeholder code, w.e. you want
    } 
```

还有这个：

```
HashMap<String,String> desc_content4db = new HashMap<String, String>(); 
```

我不知道 desc_tv/content_et.getText().toString() 是否会像你想要的那样工作。可能而且看起来更笨拙的是，您可能已经需要准备好所有内容的 Hashmaps 的 ArrayList - 然后复制您想要放入数据库中的所有内容，具体取决于它是否对应于复选框位置检查。这听起来不漂亮，但它可能会奏效。

更理想的是，我猜你是否可以逐步检查 check_states 列表并根据它是 1 或 0，在该 id 或位置复制 edit_text 和 text_view 。可悲的是，这超出了我现在的水平。如果你能做到这一点，那么你就有更多的权力。

# mysql - Mysql 复杂语句，1 行中 2 列的最小值和最大值

> ID：12586299
> 
> 赞同：0
> 
> 时间：2012-09-25T15:32:57.347
> 
> 标签：mysql, row, max, min

再一次，任何 Mysql 专家可以帮助我使用 Mysql 语句吗？我所拥有的：2 个与外键 userid 和 balanceID 连接的表![在此处输入图像描述](../Images/54c13ae733a2fbb195709b2a0249ab47.png)

我需要什么：我需要找到可以说债务的 MAX 值和可以说贷款的 MIN 值的行，我期望从这个语句中找到最高价值的债务和最低的贷款（1 行），例如：在这个如果是行 name2 | 200 | 40\. 这可能吗？已完成研究并找不到解决方案，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:38:10.480

只是基于您的最小数据集的猜测，但可能类似于：

```
select top 1 balanceID, balance, debt, loan
from Balance
order by debt - loan desc 
```

如果您想按 分组`UserID`，例如：

```
select b.balanceID, b.balance, b.debt, b.loan
from Balance b
inner join (
    select UserID, max(debt - loan) as MaxDebt
    from Balance
    group by UserID
) bm on b.UserID = bm.UserID and (b.debt - b.loan) = MaxDebt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:37:43.920

您`JOIN`只能从第二个表中获得具有最小贷款和最大余额的两个表，如下所示：

```
SELECT u.name, t.balance, t.loan
FROM users u 
INNER JOIN
(
    SELECT *
    FROM table2 
    WHERE balance = (SELECT MAX(balance) FROM table2)
      AND debt    = (SELECT MIN(loan) FROM table2) 
 ) t ON -- JOIN condition 
```

# mysql - 如何创建一个表来检查其他表上是否存在某个值，如果该值不是那里的主键？

> ID：12586309
> 
> 赞同：1
> 
> 时间：2012-09-25T15:33:15.227
> 
> 标签：mysql, database, foreign-key-relationship

我有一种情况，我想创建一个表，以便当有人尝试在其中插入一行时，它将验证其他表中是否存在其中一些属性的组合。

例如，假设 a,b,c,d,e 构成了我试图创建的表 F 中的属性。我想验证表 G 中是否存在 a,b,c,d。表 G 具有属性 a,b,c,d ；但是由于其他原因，'b' 不能是主键，并且只有 NOT NULL 约束。因此，我不能简单地让表 F 中的“a、b、c、d”的组合成为该表的 FK，这将解决问题，因为 b 不是 PK。

是否有任何检查可以与在表 F 中引用表 G 的 a、b、c、d 上设置 FK 相同，但不需要 b 作为主键？

如果我说得不够清楚，请告诉我，我会编辑它。我已经检查了手册，但似乎找不到合适的条款。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:46:12.353

您可能会非常接近使用“插入前”触发器的解决方案。

[http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

如果您查看评论部分，则有一些建议的方法可以根据某些外部因素中止“建议的”插入。这不是“设计使然”，但似乎确实可行。

# c# - .NET 中不存在用于 Windows 应用商店应用的 UriFormatException

> ID：12586319
> 
> 赞同：0
> 
> 时间：2012-09-25T15:33:48.073
> 
> 标签：c#, .net, windows-store-apps

知道 Uri.EscapeDataString() 如何抛出 System.UriFormatException 但似乎无法显式捕获它吗？

如果我试图明确地捕捉它，我只会得到“类型或命名空间名称‘UriFormatException’在命名空间‘系统’中不存在”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:45:38.747

根据MSDN中的[Uri 构造函数帮助：](http://msdn.microsoft.com/en-us/library/windows/apps/z6c2z492.aspx)

> 在 .NET for Windows Store 应用程序或可移植类库中，改为捕获基类异常 FormatException。

# android - 如何获取 ImageView 的 4 个坐标？

> ID：12586326
> 
> 赞同：0
> 
> 时间：2012-09-25T15:34:02.987
> 
> 标签：android, android-layout

我想实现这个方法：

```
//#OnTouchEvent()
public boolean onTouchEvent(MotionEvent event) {
//Coordinates of the touch
int x = (int) event.getX();
int y = (int) event.getY();

switch(event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    // Check if the touch is within the coordinates of an image
            if x isBetweenCoordinatesXofTheImage
                 if y isBetweenCoordinatesYofTheImage
                     //DoSomething
            else
                 //DoNothing
    break;
    case MotionEvent.ACTION_MOVE:
            //nothing
    break;
    case MotionEvent.ACTION_UP:
    //check if the touch is within the coordinates of an image;
            if x is betweenCoordinatesX of the image
                 y is betweenCoordinatesYofTheImage
                     //DoSomething
            else
                 //DoNothing
    break;
    }
    return true;
 } 
```

ImageView 有 4 个角，我需要知道 4 个坐标 (x,y) 才能进行检查。左上角与左下角具有相同的 X 坐标，右上角与右下角具有相同的 X 坐标。对于 Y 坐标是相似的。我的问题是：如何获得 ImageView 的 4 个坐标？

谢谢大家！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:54:43.543

只是一个小问题：为什么不将 ImageView 本身设置为触摸侦听器？如果这不是一个选项，请尝试：

```
int pos[] = new int[2];
yourImageView.getLocationOnScreen(pos); 
```

调用此方法后，数组将包含视图的左上角坐标。要获取其他坐标，只需使用视图的高度和宽度：

```
yourImageView.getWidth();
yourImageView.getHeight(); 
```

确保仅在视图在屏幕上绘制之后才调用这三个方法 - （在 onCreate 中调用它们将返回 0 到所有值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:39:07.350

尝试

```
getLocationOnScreen() 
```

和/或

```
getLocationInWindow() 
```

在你的 imageView 上。

# hadoop - 为什么不推荐使用 TableOutputForma？

> ID：12586329
> 
> 赞同：0
> 
> 时间：2012-09-25T15:34:18.990
> 
> 标签：hadoop, mapreduce, hbase

我正在使用 hbase 0.94.1 我希望执行 MapReduce 作业 org.apache.hadoop.hbase.mapred.TableOutputFormat 已弃用，但没有任何解释。

有人知道为什么吗？我应该改用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:40:19.297

不是——它从包 org.apache.hadoop.hbase.mapred 移到了 org.apache.hadoop.hbase.mapreduce。

这里有一些讨论：[使用 mapred 或 mapreduce 包创建 Hadoop Job 更好吗？](https://stackoverflow.com/questions/7598422/is-it-better-to-use-the-mapred-or-the-mapreduce-package-to-create-a-hadoop-job)

# javascript - 如何在 Javascript 中实现类似数组的索引器 ([ ])？

> ID：12586338
> 
> 赞同：3
> 
> 时间：2012-09-25T15:34:49.483
> 
> 标签：javascript, arrays

我正在尝试在 Javascript 中实现一个集合 - 有没有为我的集合中的元素实现一个类似数组的索引器？

到目前为止，我有以下代码：

```
var Collection = function() {

    var collection = [];

    var addAccessor = function(api, name) {
      if (toString.call(collection[name]) == '[object Function]') {
        api[name] = (function(){
          return function () {
            return collection[name](arguments);
          };
        }());
      }
      else {
        Object.defineProperty(api, name, {
          get: function() { return collection.length; },
          enumerable: true,
          configurable: true
        });
      }
    };

    var publicApi = {};

    var methods = Object.getOwnPropertyNames(Array.prototype);
    for(var i = 0, len = methods.length; i < len; ++i) {
      var method = methods[i];
      addAccessor(publicApi, method);
    }

    return publicApi;
  };
}; 
```

所有`Array.prototype`方法和属性都按预期工作。

```
var c = Collection();
c.push(4);
console.log(c.length);  // 1 
```

但我无法弄清楚的一件事是如何让以下工作：

```
console.log(c[0]);     // should print 4, currently undefined 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:52:08.340

如果你想“扩展”数组，经典的方法是这样的：

```
function Collection(){};
Collection.prototype = new Array();
Collection.constructor = Collection; 
```

现在添加您自己的方法：

```
Collection.prototype.color = function() {
    this.push('color');
}; 
```

并将其用于`new`：

```
var myArray = new Collection();
myArray.push(1);
myArray.color(); 
```

如果要添加`push`访问数组推送的新方法，请尝试：

```
Collection.prototype.push = function() {
    console.log('pushed!');
    Array.prototype.push.apply(this, [].slice.call(arguments));
}; 
```

# java - 正则表达式在 Java 中查找特殊字符

> ID：12586340
> 
> 赞同：6
> 
> 时间：2012-09-25T15:34:54.553
> 
> 标签：java, regex

我可以用

```
var regex = /[$&+,:;=?@#|]/;

if(elem.match(regex)) { // do something 
} 
```

在Javascript中查找字符串中是否有任何特殊字符。

如何在 Java 中使用类似的正则表达式？

我试过了：

```
str.match("\\="); // return false 
```

例如：

```
String str = "123=456"; 
```

我试图检测 str 中的“=”。

那没有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-25T15:42:18.403

试试这个。

```
Pattern regex = Pattern.compile("[$&+,:;=?@#|]");
Matcher matcher = regex.matcher("123=456");
if (matcher.find()){
    // Do something
} 
```

编辑：`matches()`检查所有字符串并在字符串`find()`的任何部分找到它。

一条链接：[`http://docs.oracle.com/javase/tutorial/essential/regex/index.html`](http://docs.oracle.com/javase/tutorial/essential/regex/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:40:43.957

使用[String.matches()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)。阅读 Javadocs 以了解支持的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:40:46.060

采用

```
String.matches(String regex); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-25T15:41:18.067

这是一些示例代码：

```
import java.lang.Scanner;
/*setup everything here, you just need that import*/
Scanner input = new Scanner(System.in);
//ask for input
String str = input.next();
if(str.contains(/*char1*/) || str.contains(/*char2*/) || /*continue the pattern, 1 for every character*/)
{
    //event if it contains one
}
else
{
    //event if it does not contain any
} 
```

另一种选择：

```
import java.lang.Scanner;
/*put the program parts here*/
Scanner input = new Scanner(System.in);
String str = input.next();
List<char> chars = Arrays.asList(/*put chars here, seperated with commas*/);
for(int x = 0; x < chars.size();x++)
{
    if(str.contains(chars[x]))
    {
        //event if it contains one
    }
    else
    {
        //event if it does not contain one
    }
}
//resume program 
```

假设所有内容都正确导入，这些代码片段将起作用。

# sharepoint - 无法显示此 Web 部件 - SharePoint 2010 BDC

> ID：12586342
> 
> 赞同：0
> 
> 时间：2012-09-25T15:34:56.860
> 
> 标签：sharepoint, c#-4.0, bcs, sharepoint2010-bcs

第一次使用 BDC 在 SharePoint 2010 中开发外部列表。

当我调试并单步执行代码时，我可以看到我正在获取数据。我什至将 Linq to SQL 查询的结果限制为 20 个项目。我可以看到查询返回了 20 个项目。

问题是当我在调试时尝试查看外部列表时，会引发“无法显示 Web 部件”错误。我在 SharePoint 日志中搜索了关联的 GUID，发现的错误提到默认筛选器可能会导致性能问题。

我认为这个错误一定是假的——我只返回 20 个项目，所以 SharePoint**应该**显示我的列表。

有关调试此问题的任何建议？我一直在谷歌搜索这个问题，但这个错误非常普遍，它可能意味着任何事情。

**更新**

我已按照[此 Microsoft 教程](http://msdn.microsoft.com/en-us/library/ee231515.aspx)中列出的步骤进行操作。我已经删除了我的代码并重新创建了几次，我知道我没有错过教程中的任何步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:38:47.197

在调试 BDC SharePoint 项目时，我通常遵循以下步骤。

1.  构建和部署 BDC 项目
2.  如果 BDC 解决方案尚未完成，请手动创建外部列表实例
3.  确保“所有经过身份验证的用户”具有所有访问权限（这在 Central Admin 中完成）
4.  在同一个解决方案中创建一个空 SharePoint 项目（比如说 SPDebug）。
5.  构建和调试 SPDebug 项目。
6.  在 BDC 项目代码上放置断点（即在 ReadItem() 内部）
7.  转到列表并选择列表实例

使用单独的项目进行调试的好处是您不会丢失您已经对 SharePoint 站点进行的任何配置。

# servicestack - 剃刀视图中的 Servicestack.net Mini Profiler

> ID：12586343
> 
> 赞同：4
> 
> 时间：2012-09-25T15:34:57.103
> 
> 标签：servicestack, mvc-mini-profiler

是否可以在带有剃刀视图的服务堆栈中使用迷你分析器？看起来文档仅在使用 json html 报告视图时显示分析器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T09:43:26.053

是的，您可以使用相同的 MVC 包含它，但包含它，`.AsRaw()`这样它就不会被 HTML 编码，例如：

```
@ServiceStack.MiniProfiler.Profiler.RenderIncludes().AsRaw() 
```

取自此[RazorRockstars 模板](https://github.com/ServiceStack/RazorRockstars/blob/master/src/RazorRockstars.WebHost/Views/Shared/HtmlReport.cshtml)的示例。

# css - 绝对定位不适用于浏览器调整大小

> ID：12586344
> 
> 赞同：1
> 
> 时间：2012-09-25T15:34:57.167
> 
> 标签：css

我正在创建一个带有随机定位的动画图像的网页。我的问题是，在浏览器调整大小后，图像不会在容器内重新定位。

我有具有绝对位置的图像和具有相对位置的容器 div。我一直看到相对于窗口而不是父 div 的图像位置。

这是我看到的问题的 jsFiddle 示例。它有彩色 div 而不是图像，但问题仍然存在。 [http://jsfiddle.net/HMSAM/15/](http://jsfiddle.net/HMSAM/15/)

感谢在这件事上的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:57:12.067

您通过设置`left: #px`（像素）来定位这些孩子，并在调整大小时保留该属性。

如果要重新计算窗口调整大小的位置，只需使用`left: #%`（百分比）。孩子们将保留调整大小的值，但这将意味着不同的“像素大小”。

编辑：当然，或者您可以通过 Javascript 重新计算它。

# reporting-services - SSRS 一个模型返回数据另一个不返回

> ID：12586347
> 
> 赞同：0
> 
> 时间：2012-09-25T15:35:09.713
> 
> 标签：reporting-services, report, datasourceview

我有一个基于数据源视图的报表模型。我还有一个运行查询的报告，该查询返回一些数据。

我在某个表的数据库中添加了一个字段。我只刷新了 dsv 中的那个表（通过删除它并将其添加回来并恢复它所拥有的关系，因为我不想刷新整个 dsv）。

我已经基于这个新的、稍微修改过的 dsv 创建了一个新模型。我已将此新模型上传到报表服务器。

在报表生成器中，当我将报表指向旧模型时，它会返回一些数据。但是，当我将它指向新模型时，它没有。没有错误，但它返回空白。

报告，过滤器，除了数据源来回切换之外，一切都完全相同。

我不明白。为什么使用新模型时我的数据会消失？

请帮忙，我为此浪费了很多时间！

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:59:04.010

数据源视图中的“探索数据”是否返回数据？

# python - Python ValueError：使用 glob 解包的值太多

> ID：12586350
> 
> 赞同：1
> 
> 时间：2012-09-25T15:35:21.723
> 
> 标签：python, python-2.7

我正在尝试加载两组 CSV 文件并对两者进行一些计算，例如每组的差异，平均绝对误差`set1 - set2`除外。

我正在尝试像这样加载两组：

```
import glob    
for a, b in (glob.glob("*a.csv"), glob.glob("*b.csv")): 
```

我得到了错误：

```
ValueError: too many values to unpack 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T15:44:02.227

# 问题

您之所以得到 ，是`ValueError`因为您尝试为元组分配的项目多于您提供的目标变量的数量。for 循环元组解包语法将遍历您的元组中的每个列表，并尝试将元组中的每个值分配给您的目标（`a`和`b`）。例如，这将起作用：

```
for a,b in (['0a.csv', '1a.csv'], ['0b.csv', '1b.csv']):
    print a,b 
```

它将每个列表的第一个值分配给`a`，将第二个值分配给`b`。上面的代码打印：

```
0a,csv 1a.csv
0b.csv 1b.csv 
```

因此，您得到了，`ValueError`因为您的至少一个`glob.glob`调用的结果是一个比两个元素长的列表。

# 一个办法

根据您要执行的操作，我认为您想使用[`zip`](http://docs.python.org/library/functions.html#zip).

```
import glob

for a,b in zip(glob.glob("*a.csv"), glob.glob("*b.csv")):
    # whatever 
```

这将获取与您提供的模式匹配的文件对并将它们分配给`a`和`b`。例如，如果您有文件`0a.csv`, `1a.csv`, `2a.csv`, `0b.csv`, `1b.csv`, 和`2b.csv`做

```
for a,b in zip(glob.glob("*a.csv"), glob.glob("*b.csv")):
    print a, b 
```

结果是

```
0a.csv 0b.csv
1a.csv 1b.csv
2a.csv 2b.csv 
```

# sql-server - TRIGGER ROLLBACK 上的自定义消息？

> ID：12586352
> 
> 赞同：1
> 
> 时间：2012-09-25T15:35:26.953
> 
> 标签：sql-server, rollback, raiserror

我在 SQL Server 中有一个触发器，当条件发生时，我需要`ROLLBACK`它。问题是我需要设置自定义消息。

```
-- This is inside an UPDATE TRIGGER --
if (condition)
BEGIN
  ROLLBACK 
  RAISERROR 50100 'custom message' 
END 
```

但它引发了2个错误

> Msg 50100, Level 16, State 1, Procedure tU_COM_Proposta, Line 42
> custom message
> Msg 3609, Level 16, State 1, Line 1
> 事务在触发器中结束。该批次已中止。

我怎样才能让它只引发我的自定义错误，同时我需要回滚触发器的事务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:32:42.797

你好就这样写

```
RAISERROR ('custom message', 16, 1 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:41:53.087

我不知道这是否能解决您的问题，但我在触发器中的语句`ROLLBACK TRANSACTION`之后（而不是之前）使用了，这导致插入被中止。当我在触发器语句中将严重级别从 1 更改为 16 时，触发器中创建的自定义消息开始出现在触发器外部。`RAISERROR()``INSERT``ERROR_MESSAGE()``RAISERROR()`

# javascript - Three.js：纹理到数据纹理

> ID：12586353
> 
> 赞同：3
> 
> 时间：2012-09-25T15:35:31.767
> 
> 标签：javascript, html5-canvas, webgl, three.js

我正在尝试在 JavaScript 中实现延迟的网络摄像头查看器，将 Three.js 用于 WebGL 功能。

我需要存储从网络摄像头抓取的帧，以便它们可以在一段时间后显示（几毫秒到几秒）。我可以在没有 Three.js 的情况下使用`canvas`and来做到这一点`getImageData()`。您可以[在 jsfiled 上找到一个示例](http://jsfiddle.net/alessandro_pezzato/fZCJ3/embedded/result/)。

我正在尝试找到一种无需画布但使用 Three.js`Texture`或`DataTexture`对象的方法。[这是我正在尝试的示例](http://jsfiddle.net/alessandro_pezzato/mJEVg/)。问题是我找不到如何将图像从`Texture`（`image`类型`HTMLVideoElement`）复制到另一个。

在`rotateFrames()`功能上，旧帧应该丢失，新帧应该替换，就像在 FIFO 中一样。但是线

```
frames[i].image = frames[i + 1].image; 
```

只是复制参考，而不是纹理数据。我想`DataTexture`应该这样做，但我无法`DataTexture`摆脱 a `Texture`or `HTMLVideoElement`。

任何的想法？

**警告：**您必须有一个摄像头并允许浏览器使用它来获取示例工作。显然，您必须有一个更新的浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:58:11.443

这是你要找的吗？？

[http://fiddle.jshell.net/m4Bh7/10/](http://fiddle.jshell.net/m4Bh7/10/)

编辑：

```
function onFrame(dt) {
    if (video.readyState === video.HAVE_ENOUGH_DATA) { /* new frame available from webcam */
        context.drawImage(video, 0, 0,videoWidth,videoHeight);
        frames[framesNum - 1].image.data = new Uint8Array(context.getImageData(0,0,videoWidth, videoHeight).data.buffer);
        frames[framesNum - 1].needsUpdate = true;
    }
} 
```

这是最重要的部分：它制作帧的副本并将其作为数据保存在 dataTexture 中。

```
function rotateFrames() {
    for (var i = 0; i != framesNum - 1; ++i) {
/*
         * FIXME: this does not work!
         */
        frames[i].image.data = frames[i + 1].image.data;
        frames[i].needsUpdate = true;
    }
} 
```

然后，这会将数据从纹理复制到帧中的纹理。

新版本：http://fiddle.jshell.net/hWL2E/4/

```
function onFrame(dt) {
    if (video.readyState === video.HAVE_ENOUGH_DATA) { /* new frame available from webcam */
        context.drawImage(video, 0, 0,videoWidth,videoHeight);
         var frame = new THREE.DataTexture(new Uint8Array(context.getImageData(0,0,videoWidth, videoHeight).data.buffer) ,videoWidth,videoHeight);
        frames[framesNum - 1] = frame;
        frames[framesNum - 1].needsUpdate = true;
        sprites[framesNum - 1].map = frames[framesNum - 1];
    }
} 
```

它为视频图像的每一帧生成一个新的纹理。

```
function rotateFrames() {
    for (var i = 0; i != framesNum - 1; ++i) {
/*
         * FIXME: this does not work!
         */
        frames[i] = frames[i + 1];
        sprites[i].map = frames[i];

    }
} 
```

这就是让它变得更好的原因。因为它重用了使用过的纹理，这意味着它不需要重新发送到 GPU。

# javascript - 只有在 Javascript 的 for 循环中最后一次运行有效

> ID：12586367
> 
> 赞同：1
> 
> 时间：2012-09-25T15:36:18.570
> 
> 标签：javascript, html, web-sql

这是一个用 Javascript 编写的 for 循环。它正在尝试对 websql 应用查询。

```
for (var i = 0; i < 10; i++){
    db.transaction(function (tx){
    tx.executeSql('INSERT INTO ProjSetsT (ProjID) VALUES (?);', [i]);
    });
} 
```

尝试很明显，我尝试将值“0, 1, 2, ... 9”添加到表 ProjSetsT 的 ProjID 列中。这没用。我只得到了最后一个元素，即插入了“9”，但没有插入前八个数字。

有没有语法错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:38:36.470

我认为`db.transaction`可能会异步运行，因此可能会给您带来麻烦。您是否尝试过将 for 循环移动到事务中？

```
db.transaction(function (tx){
    for (var i = 0; i < 10; i++){
        tx.executeSql('INSERT INTO ProjSetsT (ProjID) VALUES (?);', [i]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:40:32.060

作为参数传递的每个函数都共享对 的相同引用`i`，因此每个新函数对象的`i`值都会递增。给定异步上下文，`i`将在调用您在循环内创建的第一个函数之前达到其最大大小

您可以使用闭包修复它：

```
for (var i = 0; i < 10; i++)
{
    db.transaction((function(privateI)
    {//privateI is unique for every function object
        return function (tx)
        {
            tx.executeSql('INSERT INTO ProjSetsT (ProjID) VALUES (?);', [privateI]);
        };
    })(i));//pass current value here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:38:40.400

您有多个函数引用同一个`i`变量，最终结果为`10`.

每个函数都需要一个新的变量范围。

```
for (var i = 0; i < 10; i++){
    db.transaction(makeHandler(i));
}

function makeHandler(j) {
    return function (tx){
        tx.executeSql('INSERT INTO ProjSetsT (ProjID) VALUES (?);', [j]);
    };
} 
```

现在`i`被传递给`makeHandler`，它接收它作为`j`。

每次`makeHandler`调用时，它都会返回一个引用它自己的本地`j`变量的函数。

# map - 为什么http.Header中切片的长度返回0？

> ID：12586372
> 
> 赞同：2
> 
> 时间：2012-09-25T15:36:44.363
> 
> 标签：map, go

来自 net/http 的源代码。的定义`http.Header`是`map[string][]string`。对？

但是为什么`go run`下面的代码，我得到了结果：

> 0
> 
> 2

```
func main() {
    var header = make(http.Header)
    header.Add("hello", "world")
    header.Add("hello", "anotherworld")
    var t = []string {"a", "b"}
    fmt.Printf("%d\n", len(header["hello"]))
    fmt.Print(len(t))
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:55:34.700

如果你试试

```
fmt.Println(header) 
```

您会注意到密钥已大写。这实际上在 net/http 的文档中有说明。

```
// HTTP defines that header names are case-insensitive.
// The request parser implements this by canonicalizing the
// name, making the first character and any characters
// following a hyphen uppercase and the rest lowercase. 
```

这可以在 Request 类型的 Header 字段的注释中找到。

[http://golang.org/pkg/net/http/#Request](http://golang.org/pkg/net/http/#Request)

评论可能应该被移动了..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:08:28.657

看一下参考[`http.Header`](http://golang.org/pkg/net/http/#Header)和代码[`Get`](http://golang.org/src/pkg/net/http/header.go?s=963:1001#L25)：

> Get 获取与给定键关联的第一个值。如果没有与键关联的值，Get 返回“”。要访问一个键的多个值，请直接使用 CanonicalHeaderKey 访问映射。

所以它有助于使用[`http.CanonicalHeaderKey`](http://golang.org/pkg/net/http/#CanonicalHeaderKey)而不是字符串作为键。

```
package main

import (
    "net/http"
    "fmt"
)

func main() {
    header := make(http.Header)
    var key = http.CanonicalHeaderKey("hello")

    header.Add(key, "world")
    header.Add(key, "anotherworld")

    fmt.Printf("%#v\n", header)
    fmt.Printf("%#v\n", header.Get(key))
    fmt.Printf("%#v\n", header[key])
} 
```

输出：

```
http.Header{"Hello":[]string{"world", "anotherworld"}}
"world"
[]string{"world", "anotherworld"} 
```

# c# - 将 XtraTreeList 复制到另一个树列表

> ID：12586380
> 
> 赞同：0
> 
> 时间：2012-09-25T15:37:29.387
> 
> 标签：c#, devexpress, xtratreelist

我有一个 TreeListNodes 的集合。我这样做是为了将所有节点复制到另一棵树。

```
foreach (TreeListNode tn in nodes)
                trTree.Nodes.Add(tn); 
```

上面的代码有效，但在此之后树中节点的展开折叠将不起作用。

如何将一个 XtraTreelist 复制到另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:46:32.910

它不会以这种方式工作，您在具有相同内存位置的树之间*共享节点。*想想如果你改变树 1 上的数据，它会立即影响到树 2。

建议使用以下方法进行*Deep Copy*：`TreeListNode``DeepClone`

```
public static class CloneHelper
{
    public static T DeepClone<T>(T obj)
    {
        using (var ms = new MemoryStream())
        {
            var formatter = new BinaryFormatter();
            formatter.Serialize(ms, obj);
            ms.Position = 0;

            return (T) formatter.Deserialize(ms);
        }
    }
} 
```

然后你可以使用：

```
var cloneNodes = nodes.Select(node => CloneHelper.DeepClone<TreeListNode>(node))
                      .ToArray();

trTree.Nodes.AddRange(cloneNodes); 
```

**编辑：**

当然你需要确保`TreeListNode`被标记为 [Serializale]

另一种方法，您需要使用第一棵树中使用的数据重新构建第二棵树

# scala - Scala 封装对象并播放！2

> ID：12586384
> 
> 赞同：2
> 
> 时间：2012-09-25T15:37:43.443
> 
> 标签：scala, scope, package, playframework-2.0

我有戏！2 应用程序和一些跨模型重用的功能。我想把它们放在`models`包对象中，如下例所示

```
import java.util.Date

package object models {
  case class RichDate(d: Date) {
    def timestamp: Long = d.getTime / 1000
  }

  implicit def enrich(d: Date): RichDate = new RichDate(d)
} 
```

这样我就可以在模型中到处都有日期字段了`myDate.timestamp`。ù

这可以编译，甚至可以在单元测试中使用。但是，由于某种原因，当我运行实际的应用程序时，我得到了一个执行异常`[NoSuchMethodError: models.package$.enrich(Ljava/util/Date;)Lmodels/package$RichDate;]`

> 是否有理由说明上述内容在 Play 中不起作用！应用程序，同时是有效的 Scala？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T03:38:50.953

我也遇到过这个问题，结果发现奇怪的行为是由于`package object models` [已经在框架中定义的](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/models/package.scala)。这基本上使`package object models`框架的用户不受限制。我的解决方案是将我的库拉皮条放在实用程序对象（例如 utils.DateUtils）中，并在适当的时候导入它们。

# google-chrome - 使用 Chrome 扩展程序时，您可以访问原始的预解析 CSS 吗？

> ID：12586388
> 
> 赞同：0
> 
> 时间：2012-09-25T15:37:57.747
> 
> 标签：google-chrome, google-chrome-extension

在 Google Chrome 扩展中，我使用 DOM api 来获取样式表及其元素。当我看到它们时，Chrome 已经对它们进行了解析 - 有没有办法在 Chrome 通过扩展程序获取它之前查看预解析的 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:22:32.473

我假设您想阅读原始`*.css`文件。如果这是您想要的，您可以简单地通过 Ajax 将文件作为文本文件获取，并将其内容作为字符串读取。（如果文件位于网站上，未打包在扩展程序中，请确保您拥有该域或所有域的主机权限，具体取决于您的需要。）

# ios - 使用自定义容器视图控制器在 iOS 6 中旋转

> ID：12586390
> 
> 赞同：1
> 
> 时间：2012-09-25T15:37:59.160
> 
> 标签：ios, ios6

我的应用程序中有一个自定义容器视图控制器，但无法在 iOS 6 中实现与在 iOS 5 中相同的旋转行为。

容器（称为 containerVC）包含两个视图控制器，一个应该保持纵向（portraitVC），一个可以旋转到横向（rotatingVC）。我使用分段控件在它们之间切换。

如果我打开 containerVC 并最初显示 PortraitVC，然后将手机旋转到横向，portraitVC 不会正确旋转。但是，如果我切换到旋转VC，旋转到横向，然后在手机仍处于横向状态时切换到纵向VC，纵向VC 会错误地绘制横向。

在 iOS 5 中，portraitVC 始终保持纵向。

我在 containerVC 中有这段代码用于切换视图控制器：

```
- (IBAction)segmentChanged:(id)sender {
    UIViewController *toViewController = [self viewControllerForSegmentIndex:self.selectedSegmentIndex];
    [self addChildViewController:toViewController];

    UIViewController *fromViewController = self.selectedViewController;

    [self transitionFromViewController:self.selectedViewController
                      toViewController:toViewController
                              duration:0
                               options:0
                            animations:^{}
                            completion:^(BOOL finished) {
                                self.selectedViewController = toViewController;
                                [toViewController didMoveToParentViewController:self];
                                [fromViewController removeFromParentViewController];
                            }];
} 
```

这在 containerVC 中处理旋转：

```
- (NSUInteger)supportedInterfaceOrientations {
    UIInterfaceOrientationMask mask = UIInterfaceOrientationMaskPortrait;
    if ([self.selectedViewController respondsToSelector:@selector(supportedInterfaceOrientations)] ) {
        mask = [self.selectedViewController supportedInterfaceOrientations];
    }
    return mask;
} 
```

这在 PortraitVC 中：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

这在旋转VC中：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

当我在选择rotatingVC 后选择portraitVC 时，在containerVC 或portraitVC 上都不会调用任何旋转方法或回调。外观方法被调用，并且持有 tableview 的 PortraitVC 在 tableview 回调中获取具有横向几何形状的 UITableViewCells。

如果我们必须让 PortraitVC 支持横向，这不是世界末日，但如果可能的话，为了与应用程序的其他部分保持一致，我们更倾向于不这样做。似乎应该有一种方法可以让它工作，因为当您对它们进行子类化并覆盖supportedInterfaceOrientations时，内置的容器VC可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:21:30.660

我注意到我有同样的问题，只是措辞不同：[iOS 6：如何将某些视图限制为纵向并允许其他视图旋转？](https://stackoverflow.com/q/12630359/1704625)

我只是对我自己的问题给出了部分答案，这可能会有所帮助。我喜欢您让容器视图向其子级询问支持的方向的想法；`shouldAutorotateToInterfaceOrientation:`也许调用iOS < 6 已经存在的孩子是一个更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:07:49.047

我今天遇到了一个非常相似的问题，并通过替换根控制器解决了它 - 我创建了新的视图控制器并将其分配给应用程序窗口的根视图控制器。这个新控制器仅支持横向。原始根控制器支持这两种模式。所以不是 [self addChild... 我旋转设备并替换根视图控制器。

```
UIInterfaceOrientation current = [[UIDevice currentDevice] orientation];
if ( UIInterfaceOrientationIsPortrait(current)) {
    [UIView beginAnimations:@"InterfaceOrientation" context:nil];
    [UIView setAnimationDuration:[application statusBarOrientationAnimationDuration]];
    [[[application delegate] window] setRootViewController:controller];
    [UIView commitAnimations];
    [application setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:YES];
}
else {
    [[[application delegate] window] setRootViewController:controller];
} 
```

在 iOS 6 之前我没有使用控制器中的三种方法，您在问题中没有提到：viewWillLayoutSubviews、willRotateToInterfaceOrientation 和 didRotateFromInterfaceOrientation。例如，在 willRotateToInterfaceOrientation 我保存当前方向，在 viewWillLayoutSubviews 我重新排列所有子视图。

如果您创建一个子视图控制器。它使用关于设备方向的父视图控制器设置——我想是的。

我很乐意更好地了解情况并找到更好的解决方案。

# google-chrome-extension - 在打包的应用程序中使用 dojo 1.8（未捕获的卸载在打包的应用程序中不可用）

> ID：12586394
> 
> 赞同：3
> 
> 时间：2012-09-25T15:38:13.927
> 
> 标签：google-chrome-extension

在最终在打包应用程序中使用 dojo 方面取得了一些进展之后，我遇到了另一个我找不到任何文档的障碍。

```
{
  ...
  "sandbox": {
     "pages": ["test.html"]
  },
  "app": {
    "background": {
      "scripts": [
        "background.js"
      ]
    }
  }
} 
```

test.html 从应用程序以及我的一些模块加载 dojo，但是当 dojo 解析页面的 dom 时，我得到了 platformApp 抛出的错误

```
Uncaught unload is not available in packaged apps. platformApp:14
(anonymous function)                               platformApp:14
Window.addEventListener                            platformApp:127
addListener                                        dojo.js.uncompressed.js:15317
on.parse 
```

是否有任何 CSP 规则我可以​​添加到沙箱中以使其正常运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:02:23.023

我希望chrome默认这样做而不是抛出错误......但这是我在加载dojo之前必须做的：

```
// Prevent registrations for unload/beforeunload and warn, chrome will throw exception.
(function() {
  var windowAddEventListener = Window.prototype.addEventListener;
  Window.prototype.addEventListener = function(type) {
    if (type === 'unload' || type === 'beforeunload') {
          try {
        throw new Error('Do not use Window.addEventListener for ' + type);
      } catch (e) {
        console.error(e.message, e);
      }
    } else
      return windowAddEventListener.apply(window, arguments);
  };
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:36:54.280

如错误消息所述，打包应用程序的加载和前加载方法被禁用，这也适用于沙盒 iframe。[您可以在此处](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/renderer/resources/extensions/platform_app.js)查看还有哪些被禁用。

话虽如此，我只是在沙盒 iframe 中尝试了 dojo 1.8，只要我不设置卸载侦听器，简单的[Hello Dojo 示例](http://dojotoolkit.org/documentation/tutorials/1.8/hello_dojo/)似乎就可以正常工作。

# java - Little LibGdx 加载文件时遇到问题

> ID：12586395
> 
> 赞同：4
> 
> 时间：2012-09-25T15:38:18.700
> 
> 标签：java, file-io, libgdx, filenotfoundexception, particle-system

所以我一直在尝试将一个粒子效果文件加载到 libgdx 并且我得到一个找不到文件的异常。

这是我的代码：

```
 particleEffect = new ParticleEffect();
 particleEffect.load(Gdx.files.internal("bin/emiter.pahh"),Gdx.files.internal("bin/untitled.png")); 
```

这是我的文件夹的外观

![在此处输入图像描述](../Images/130cbb72dc7bebbc5bb52b0633a3797f.png)：

这是错误：

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: com.badlogic.gdx.utils.GdxRuntimeException: Couldn't load file: bin/untitled.png/Untitled.png
at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:107)
Caused by: com.badlogic.gdx.utils.GdxRuntimeException: Couldn't load file: bin/untitled.png/Untitled.png
at com.badlogic.gdx.graphics.Pixmap.<init>(Pixmap.java:140)
at com.badlogic.gdx.graphics.glutils.FileTextureData.prepare(FileTextureData.java:64)
at com.badlogic.gdx.graphics.Texture.load(Texture.java:175)
at com.badlogic.gdx.graphics.Texture.create(Texture.java:159)
at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:133)
at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:126)
at com.badlogic.gdx.graphics.g2d.ParticleEffect.loadTexture(ParticleEffect.java:195)
at com.badlogic.gdx.graphics.g2d.ParticleEffect.loadEmitterImages(ParticleEffect.java:190)
at com.badlogic.gdx.graphics.g2d.ParticleEffect.load(ParticleEffect.java:138)
at com.me.mygdxgame.MyGdxGame.create(MyGdxGame.java:124)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:121)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:104)
Caused by: com.badlogic.gdx.utils.GdxRuntimeException: File not found: bin\untitled.png\Untitled.png (Internal)
at com.badlogic.gdx.files.FileHandle.read(FileHandle.java:127)
at com.badlogic.gdx.files.FileHandle.length(FileHandle.java:566)
at com.badlogic.gdx.files.FileHandle.readBytes(FileHandle.java:215)
at com.badlogic.gdx.graphics.Pixmap.<init>(Pixmap.java:137)
... 11 more 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:46:27.160

您的文件路径为：“assets/emiter.phh”

根据您的图片，它应该是：“assets/emiter.pahh”。

编辑：

我查看了您修改后的错误消息：

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: com.badlogic.gdx.utils.GdxRuntimeException: File not found: assets\emiter.pahh (Internal)
at   com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:107)
Caused by: com.badlogic.gdx.utils.GdxRuntimeException: File not found: assets\emiter.aphh (Internal) 
```

在堆栈跟踪中间名称已更改的事实让我感到困惑......

```
"File not found: assets\emiter.pahh (Internal)"
"File not found: assets\emiter.aphh (Internal)" 
```

您确定您已正确命名它，因为错误源自 libGDX 的文件句柄。此外，文件是否被放入您正在运行的项目的“bin”文件夹中？您应该能够在“my-gdx-game/bin/emitter.pahh”中看到该文件。

另外，必须尝试在 libGDX 测试项目中运行 ParticleEmitterTest 吗？

编辑2：

您需要将这两行更改为：

```
particleEffect = new ParticleEffect();
particleEffect.load(Gdx.files.internal("bin/emiter.pahh"),
    Gdx.files.internal("bin/untitled.png")); 
```

到：

```
particleEffect = new ParticleEffect();
particleEffect.load(Gdx.files.internal("bin/emiter.pahh"),
    Gdx.files.internal("bin")); 
```

我相信图像的路径是在发射器文件中定义的:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:13:39.047

在 IntelliJ 中使用类似“level_bodies\level6\”的路径的 OSX 上可能会发生相同的错误。在 Windows 下它可以工作。

# jquery - 如何让ajax跨域工作

> ID：12586397
> 
> 赞同：0
> 
> 时间：2012-09-25T15:38:29.947
> 
> 标签：jquery

我有从 csv 文件中提取数据的功能：当一切都在同一台服务器上时工作正常。我需要它来跨域工作，但是，即使我在服务器的根目录中使用 crossdomain.xml，它也不起作用。crossdomain.xml 是否仅适用于 Flash/Flex 案例？有人知道如何让它跨域工作吗？

# 提前感谢您的帮助。

```
function LoadCSVtoArray(csvFileName, array, table, columns){
    $.ajax({
      type: "GET",
      url: csvFileName,
      dataType: "text",
      success: function(data) {
        var lines = data.split(/\r\n|\n/);
        for(var i=0; i<lines.length-1; i++){
            var elements = lines[i].split(';');
        array.push([elements[0], "<b>"+elements[1]+"</b><br/>"+elements[2],elements[3]+"<br/>"+elements[4]+"<br/>"+elements[5]+"<br/>"+elements[6],elements[7]]);
        }console.log(array);
        printItems(array, table, columns);
    }
   });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:03:28.227

实际上，您可以尝试使用新的 Image 或 Iframe 请求进行请求。

# javascript - 如何在内容可编辑的 div 中获取/设置相对于 HTML 的插入符号位置

> ID：12586403
> 
> 赞同：3
> 
> 时间：2012-09-25T15:38:41.820
> 
> 标签：javascript, html

假设我有

```
 ​&lt;div contenteditable='true'>
 my <b>bold</b> text
 </div> 
```

我想获取（并设置）相对于 innerHtml 的光标位置。

但这里有一个问题，我在 StackOverflow 上查看了很多答案，其中大多数都在处理选择对象和范围等。我不想处理这一切。太难了 我只想使用简单的 InnerHTML 字符串和光标的索引。

假设您单击“粗体”一词的 b，我只希望它返回索引：6（这意味着它会考虑粗体 html 标记）。

我还想能够说 (setCursor(6)) ，它会将光标设置在“粗体”之前。

# scala - 确保 html 开始和结束标记正确的功能

> ID：12586405
> 
> 赞同：0
> 
> 时间：2012-09-25T15:38:50.573
> 
> 标签：scala

我有一个表单，用户可以在其中输入一些简单的 html 标签，我想解析他们的文本以确保以下内容：

**所有开始标签都有一个匹配的结束标签**

它是针对最终用户的简化标记，不太严格。

所以这些会通过：

```
<text>hello world<text>
<text>hello world</text>
<123> 
```

这将失败：

```
<hello> >< 
```

所以它不是严格的 html，正如您从第一个示例中看到的那样，它基本上只是确保存在相同数量的开括号和右括号，并且它们以正确的顺序出现，即您不能以右括号开头然后有一个结束括号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:38:13.407

您需要一个堆栈数据结构。基本上你读取输入，每次遇到开始标签时，你都会推入堆栈。当您遇到结束标签时，您会从堆栈中弹出最后一项并比较它们。他们应该永远是平等的。最后堆栈应该是空的。

如果要检查大括号是否正确，算法略有不同。当遇到右括号时，弹出堆栈的顶部，它必须是一个左括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:54:50.380

这是一个不同的问题，但与在[Scala 中使用的功能非常相似，可以对一堆 if 进行编程](https://stackoverflow.com/questions/12523788/scala-way-to-program-bunch-of-ifs/12524043)请参阅该问题中的最佳答案，但是，您将传递的“状态”不会是“我们有多少个开放的”，但“内部还是外部”的布尔值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:56:43.643

如果它只是带有单个开始和结束标记的行，则可以使用正则表达式。

```
"<head>abc</head>"  matches """<([^<>]+)>[^<>]*</\1>""" // true
"<head>abc</head>>" matches """<([^<>]+)>[^<>]*</\1>""" // false
"<head>abc</hed>"   matches """<([^<>]+)>[^<>]*</\1>""" // false
"<head>abc<head>"   matches """<([^<>]+)>[^<>]*</\1>""" // false 
```

# css - 背景图像与 html 相同：为什么？

> ID：12586408
> 
> 赞同：0
> 
> 时间：2012-09-25T15:39:02.227
> 
> 标签：css

我一直在尝试剖析 behance.net 网站上的一些 CSS。我已经在 chrome 检查器中非常彻底地查看了它，但有些东西我就是不明白。

在顶部导航栏上，有“发现”、“画廊”、“工作”的文字，它写在 div 中，`class="nav-text"`但它也有`nav-sprite`包含背景图像的类

```
nav-sprite {
background: url("http://assets.behance.net/img/sprites/nav.png?cb=1056284268") no-repeat;
display: block;
text-indent: -9999px;
} 
```

这里的背景 url 指向一个 png，它的文本与用 html 编写的文本相同，但在一个大图像中。这里是黑色背景。首先，它的分辨率非常低。其次，为什么即使这些相同的东西都写在html中，为什么还会出现？ ![背景网址图片截图](../Images/792224e47f037aff55dd9dbae73c09dc.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:44:50.763

由于字体，它很可能使用图像而不是文本。text-indent: -9999px 将文本设置为页面外，并且导航精灵上也有类似 CSS：

```
background-position: -300px 0;
height: 14px;
width: 75px; 
```

这些设置要显示的图像部分。

人们放置文本的原因是出于搜索引擎的目的，并且如果 css 已关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:42:04.463

由于 IE6 仍在使用并且不（正确）支持自定义字体，因此可以正确使用自定义字体进行渲染。

不过，为了正确回答这个问题，我们的想法是 HTML 布局应该在没有任何样式的情况下仍然具有语义意义，无论是出于可访问性还是后备目的。这确保了这一点，并在完全支持的情况下用更丰富的元素替换菜单中的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:45:02.840

HTML 文本仅适用于搜索引擎机器人或基于文本的浏览器，类似于 Lynx（或没有 CSS 支持的浏览器）。`text-indent: -9999px;`由于在您引用的样式声明中，您不会看到它。相反，您将看到 中的精灵`background-image`，由特定导航项的类指定。例如，

```
.nav-sprite-jobs {
    background-position: -269px 0;
    height: 11px;
    width: 30px;
} 
```

# ruby-on-rails - 将 JSON 导入 Rails

> ID：12586410
> 
> 赞同：2
> 
> 时间：2012-09-25T15:39:06.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我有一个 JSON 文件中的数据转储，我试图将其拉入我的应用程序，但我认为它需要一些预处理，只是不确定执行此操作的最佳方法。

该文件的格式使得数据不是一个 JSON 数组，而是每一行都是一个完整的 JSON 数组。好像：

```
{"username": "Bob", "id": 123456}
{"username": "Jane", "id": 456123}
{"username": "Paul", "id": 789456}
{"username": "Mary", "id": 159794} 
```

行尾没有逗号分隔 - 没有括号等。当我尝试将其拉入时，通过我的种子`JSON.parse`说它抛出和错误 - 不喜欢缺乏适当的格式并希望它作为一个完整的 JSON 数据集而不是然后每一行都是它自己的集合。

提取这些数据的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:54:16.637

我不确定您在导入数据后要对数据做什么，我假设您想将其插入数据库。

我会写一个这样的 rake 任务：

```
task :import_users do
  File.open('/path/to/your.file', 'r') do |file|
    file.each do |line|
      user_attrs = JSON.parse line
      User.create! user_attrs
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:43:47.143

您总是可以逐行阅读，并分别解析每一行。不过，这可能不是很优化。一个例子：（`File.readlines('filename').each { |line| ... }`仅在 1.9+ 中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:44:36.187

如果文件不是太大，您可以将其转换为：

```
[
 {...},
 {...},
 {...}
] 
```

或者，如果速度不是太关键，您可以遍历每一行并导入它。

# objective-c - ios标签栏在没有图像时将文本放在中间

> ID：12586411
> 
> 赞同：14
> 
> 时间：2012-09-25T15:39:06.297
> 
> 标签：objective-c, ios5, uitabbar, uitabbaritem

我的标签栏只包含文本，没有图像。
问题是文本总是显示在选项卡的底部，有没有办法将文本定位在中间？

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-27T10:34:07.860

知道了！

`[tab.tabBarItem setTitlePositionAdjustment:UIOffsetMake(0, -10)]`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-01T03:12:26.620

补充一下，如果你在 tabBarController 中设置了 multi viewControllers，你应该使用如下：

```
for (UITabBarItem* item in tabBarController.tabBar.items)
{
    [item setTitlePositionAdjustment:UIOffsetMake(0, -10)];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-20T18:42:17.637

快速更新。

```
func tabBarItem(title: String, imageName: String, selectedImageName: String, tagIndex: Int) -> UITabBarItem {
        let item = UITabBarItem(title: title,
                                image: UIImage(named: imageName),
                                selectedImage: UIImage(named: selectedImageName))
        item.titlePositionAdjustment = UIOffset(horizontal:0, vertical:-10)
        item.tag = tagIndex
        return item
    } 
```

// 例如

```
let window = UIWindow.window()
let vc = UIViewController()
vc.tabBarItem = tabBarItem(title: "More", imageName: "icon_more", selectedImageName: "icon_more", tagIndex: 1)

let mainTBC = UITabBarController()
    mainTBC.viewControllers = [vc]
 window?.rootViewController = mainTBC
 window?.makeKeyAndVisible() 
```

# jsf - 您可以在会话过期的情况下发布到 JSF2 页面吗？

> ID：12586413
> 
> 赞同：3
> 
> 时间：2012-09-25T15:39:13.160
> 
> 标签：jsf, jsf-2, viewexpiredexception

我一直在使用 JSF1.2 登录页面。如果用户在登录页面上停留的时间过长（超时情况），然后尝试输入 id 和密码，则会失败并显示 ViewExpired 错误（即使 id/密码正确）。从 JSF 的角度来看，这一切对我来说都是有意义的。我的解决方案是简单地将 Client 用于 javax.faces.STATE_SAVING_METHOD。但这感觉就像一个黑客。

我的应用程序正在迁移到 JSF2.0。我希望我的应用程序返回到 STATE_SAVING_METHOD 的服务器。但我的要求是，如果提交了正确的 ID 和密码，该应用程序将接受它。

我的另一个解决方案是简单地使用 servlet，而不是使用 JSF 进行登录处理。但似乎对于 JSF2.0 的所有升级版，现在可能有一些可用的东西。

任何想法将不胜感激。 **谢谢你。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:57:43.987

当[恢复的视图在](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html#restoreView%28javax.faces.context.FacesContext,%20java.lang.String%29)[回](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isPostback%28%29)发期间返回时，您可以手动[创建](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html#createView%28javax.faces.context.FacesContext,%20java.lang.String%29)和[构建](http://docs.oracle.com/javaee/6/api/javax/faces/view/ViewDeclarationLanguage.html#buildView%28javax.faces.context.FacesContext,%20javax.faces.component.UIViewRoot%29)视图。您可以在自定义中执行此操作。这是一个启动示例：`null`[`ViewHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html)

```
public class RestorableViewHandler extends ViewHandlerWrapper {

    private ViewHandler wrapped;

    public RestorableViewHandler(ViewHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public UIViewRoot restoreView(FacesContext context, String viewId) {
        UIViewRoot restoredView = wrapped.restoreView(context, viewId);

        if (!(restoredView == null && context.isPostback())) {
            return restoredView;
        }

        UIViewRoot createdView = createView(context, viewId);
        context.setViewRoot(createdView);

        try {
            getViewDeclarationLanguage(context, viewId).buildView(context, createdView);
        } catch (IOException e) {
            throw new FacesException(e);
        }

        return createdView;
    }

    @Override
    public ViewHandler getWrapped() {
        return wrapped;
    }

} 
```

如果代表登录页面，您可能希望通过检查来扩展`if`检查。`viewId`

要让它运行，请在以下位置注册它`faces-config.xml`：

```
<application>
    <view-handler>com.example.RestorableViewHandler</view-handler>
</application> 
```

但是存在技术限制：重新创建的视图与初始请求期间完全相同，因此此后对 JSF 组件树进行的任何修改，无论是通过标记处理程序还是基于某些视图甚至会话范围变量的条件渲染组件, 完全丢失。为了准确地重新创建所需的视图，您需要确保这些修改是基于请求范围的变量（阅读：请求参数）而不是视图或会话范围的变量。

换句话说，视图的状态不应依赖于视图或会话范围的托管 bean，而应完全依赖于请求范围的托管 bean。

* * *

**更新**：[OmniFaces](http://omnifaces.org) JSF 实用程序库在当前的 1.3 快照中有一个可重用的解决方案`<o:enableRestorableView>`，可以嵌入其中`<f:metadata>`。另请参阅[`<o:enableRestorableView>`快照站点上的展示页面以](http://showcase.omnifaces.org/taghandlers/enableRestorableView)获取演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:03:11.943

以下是您可以使用的几个选项：

[允许用户在会话超时后登录 JSF 2.0](https://stackoverflow.com/questions/10376978/allow-user-to-login-after-session-times-out-jsf-2-0)

（如果您愿意使用 PrimeFaces，他们有一个可以使用的组件。）[http://www.primefaces.org/showcase/ui/idlemonitorHome.jsf](http://www.primefaces.org/showcase/ui/idlemonitorHome.jsf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T10:23:24.687

我没有尝试过，但我认为这实际上是 JSF 新特性“无状态视图”的理想应用程序。

只需在 JSF 视图上设置“瞬态”：

```
<f:view transient="true">
    ...content...
</f:view> 
```

一个很好的解释在这里：

[http://balusc.blogspot.de/2013/02/stateless-jsf.html](http://balusc.blogspot.de/2013/02/stateless-jsf.html)

另请参阅此问题：[JSF 中无状态的用处是什么？](https://stackoverflow.com/questions/14890995/what-is-the-usefulness-of-statelessness-in-jsf)

不幸的是，此功能仅在 Mojarra V2.1（和 MyFaces 2.2）中可用，因此您可能需要从 2.0 升级。

# asp.net-mvc - IE 10 重定向 URL 已损坏

> ID：12586415
> 
> 赞同：1
> 
> 时间：2012-09-25T15:39:28.197
> 
> 标签：asp.net-mvc, internet-explorer

我在一个在 Chrome、Firefox、Opera 和 IE < 10 中运行良好的网站上工作。但是在 Win 8 上的 IE 10 中，登录后，我被重定向到：

`https://domain.com/(F(HWiLasqNvX0ANW4jLyE6n7Ey3U_mOFxXksL-oU95Z-wf3xQ-FGD8_szv-cuhNpoDD8cKM3SBX_PCipYO1ivV03YpPzouc8wJTe6Y2JAsUdyv_Nf76LLu0dlzcsRVSGJF0))/path/`

在所有其他浏览器中我得到：

`https://domain.com/path/`

为什么 IE 会在 URL 中插入那个巨大的 frackin 字符串？更多细节：

*   该站点是一个 ASP.NET MVC 4 站点
*   托管在 IIS 7.5 中
*   托管在 Windows Server 2008 上
*   使用表单身份验证
*   登录屏幕后，我重定向到上述位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:26:37.863

应用[修补程序](http://support.microsoft.com/kb/2600088)

> 默认情况下，ASP.NET 对用户代理字符串使用嗅探技术来检测浏览器。浏览器定义文件涵盖了一定范围的浏览器版本。但是，随着版本号的增加，ASP.NET 可能无法通过使用用户代理字符串来识别浏览器的新版本。在这种情况下，ASP.NET 可能会将这些版本作为未知浏览器处理。例如，ASP.NET 无法识别具有以下用户代理字符串的 Windows Internet Explorer 10：

```
Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; Trident/6.0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T10:01:23.957

看起来像是用户代理检测的问题。SCOTT HANSELMAN 很好地描述了这个问题。 [http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# exception-handling - 如何处理导致 Exception 的 WinRT 异常？

> ID：12586416
> 
> 赞同：7
> 
> 时间：2012-09-25T15:39:27.700
> 
> 标签：exception-handling, windows-runtime, hresult

如果 Windows 运行时类型引发 COM 错误，.NET 似乎经常（或总是？）将此错误包装到一个`Exception`实例中。错误消息包括 COM HRESULT 错误代码。例如，当使用带有 AES-CBC 的新 Cryptographic API 时，错误的缓冲区长度会导致出现`Exception`消息“提供的用户缓冲区对于请求的操作无效。( `Exception from HRESULT: 0x800706F8`)”。

那么，我们应该如何处理这些异常呢？我们是否应该从异常中读取`HRESULT`代码以了解这是什么类型的异常？在经典的 .NET 中，我会得到一个`CryptographicException`可以用来区分加密错误和其他错误的错误。

我不明白的另一件事是，Microsoft 代码质量规则规定永远不应该抛出异常，而应该总是派生类型。原因是不应该强迫任何人去捕捉`Exception`同样捕捉更多致命异常的将军`OutOfMemoryException`。另一条规则说，一个人永远不应该`Exceptio`在图书馆里抓到 n。如果我们被迫使用`Exception`Windows 应用商店应用程序或 WinRT 库，我们如何遵守这些政策？

顺便说一句：[Clemens Vasters 在他的博客中展示了我们如何在避免捕获致命异常的同时捕获异常](http://vasters.com/clemensv/2012/09/06/Are+You+Catching+Falling+Knives.aspx)。我认为捕获`Exception`不再是糟糕的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:06:20.440

可以`Exception`通过打开 HRESULT 来捕获、处理特定错误，`Exception`如果错误是“意外的” ，则重新抛出。例如，

```
try
{
    // ...
}
catch (Exception ex)
{
    switch (ex->HResult)
    {
    case E_INVALID_USER_BUFFER: // 0x800706f8
        // handle invalid buffer case...
        break;
    default:
        // Unexpected exception; re-throw:
        throw;
    }
} 
```

（我会注意到提供无效缓冲区听起来更像是逻辑错误而不是运行时错误，所以我想知道是否真的应该捕获这个特定的异常。）

或者，更通用的解决方案是编写一个函数或一组函数来处理`Exception`已知的 HRESULT 并重新引发更具体的异常。例如，

```
static void HandleKnownExceptions(Action f)
{
    try
    {
        f();
    }
    catch (Exception ex)
    {
        // Detect expected HRESULTs and throw the more-specific exception
        // type for each.
    }
} 
```

这两种方法在 C++ 和 C# 中同样适用。

请注意，不一定`Exception`是平台或其他组件直接抛出的情况。在 Windows 运行时 ABI 层，没有例外：所有错误都由 HRESULT 跨 ABI 边界报告。CLR 将一些已知的 HRESULT 转换为更具体的异常类型，但它不能执行一般转换。

# objective-c - 以编程方式创建 UIWebView

> ID：12586421
> 
> 赞同：21
> 
> 时间：2012-09-25T15:39:48.987
> 
> 标签：objective-c, ios, cocoa-touch, uiwebview

我已经尝试了一段时间，但我没有做对。

我在支持文件中编写了以下初始化函数：

```
- (id)initWithFrame:(CGRect)frame
 {
    self = [super initWithFrame:frame];
    if (self) {
    webview=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 1024,768)];
 }
    return self;
} 
```

并遵循 ViewController.m

```
- (void)viewDidLoad
{
   [super viewDidLoad];

   UIWebView *view = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
   NSString *url=@"http://www.google.com";
   NSURL *nsurl=[NSURL URLWithString:url];
   NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
   [view loadRequest:nsrequest]; 
} 
```

我也尝试在 appDelegate 的`didFinishLaunchingWithOptions:`方法中创建 webview，但它也没有用。

正确的方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-26T05:13:56.150

我希望这个解决方案能帮助你。

1.  根据您的问题，**只需将这些行添加到`- (void)viewDidLoad`**

> ```
> UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
> NSString *urlString = @"https://www.google.com";
> NSURL *url = [NSURL URLWithString:urlString];
> NSURLRequest *request = [NSURLRequest requestWithURL:url];
> webView loadRequest:request];
> [self.view addSubview:webView]; 
> ```
> 
> 我使用了webView的静态框架，你可以根据你的要求使用。

2.  但`UIWebView`已弃用：首先在 iOS 12.0 中弃用 - 不再支持；请采纳`WKWebView`，下面是 Objective C 和 Swift 的更新代码

**迅速：**

```
import WebKit

let theConfiguration = WKWebViewConfiguration()
let webView = WKWebView(frame: view.frame, configuration: theConfiguration)
let nsurl = URL(string: "https://www.google.com")
var nsrequest: URLRequest? = nil
if let nsurl = nsurl {
    nsrequest = URLRequest(url: nsurl)
}
if let nsrequest = nsrequest {
    webView.load(nsrequest)
}
view.addSubview(webView) 
```

**目标 C：**

```
#import <WebKit/WKWebView.h>
#import <WebKit/WKWebViewConfiguration.h>

WKWebViewConfiguration *theConfiguration = [[WKWebViewConfiguration alloc] init];
WKWebView *webView = [[WKWebView alloc] initWithFrame:self.view.frame configuration:theConfiguration];
NSURL *nsurl=[NSURL URLWithString:@"https://www.google.com"];
NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
[webView loadRequest:nsrequest];
[self.view addSubview:webView]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T15:43:05.897

看起来您忘记添加`webview`为其父视图的子视图：

```
-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        webview=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 1024,768)];
        [self addSubview:webview];
    }
    return self;
} 
```

也不`viewDidLoad`是创建子视图的正确位置。您应该公开`webview`为视图的属性，然后从 访问它`viewDidLoad`，如下所示：

```
NSString *url=@"http://www.google.com";
NSURL *nsurl=[NSURL URLWithString:url];
NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
[[self.view webview] loadRequest:nsrequest]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T05:26:44.120

```
UIWebView *webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 568)];
webView.delegate = self;   
NSString *url=@"http://www.google.com";
NSURL *nsurl=[NSURL URLWithString:url];
NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
[webview loadRequest:nsrequest]; 
[self.view addSubview:webview]; 
```

在viewcontroller的接口中声明UIWebviewDelegate

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-14T09:00:21.250

这是答案比@Ashvin Ajadiya 的答案略有改进。要根据您的设备动态设置 Web 视图的宽度和高度，请在**viewWillAppear**中使用此代码，否则将无法获得正确的设备宽度和高度

```
-(void)viewWillAppear:(BOOL)animated
{
    UIWebView *webview=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width,self.view.frame.size.height)];
    NSString *url=@"http://www.google.com";
    NSURL *nsurl=[NSURL URLWithString:url];
    NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
    [webview loadRequest:nsrequest];
    [self.view addSubview:webview];
} 
```

# php - MySQL 查询从表中检索数据和第二个查询以提取其他结果，没有重复

> ID：12586423
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:39:52.037
> 
> 标签：php, mysql, database, haversine

我已经在这方面四处寻找了一段时间，但没有什么能真正满足我的需要。

我正在搜索一个包含经度和纬度值条目的表。这将返回一组结果。还有一些条目没有 long/lat 值，我需要根据某些日期值返回它们。

我知道这两者通常不会产生重复的结果，但我仍然有兴趣知道如何进行这种查询。

Q1：

```
"SELECT id, from_date, to_date, event_title, event_longitude, event_latitude, 
(SQRT( POW( 69.1 * ( event_latitude - 51.4999501637 ) , 2 ) + 
POW( 69.1 * ( -0.195226 - event_longitude ) * COS( event_latitude / 57.3 ) , 2 ) ) 
* 1609.344) AS distance, (SQRT( POW( 69.1 * ( event_latitude - 51.4999501637 ) , 2 ) 
+ POW( 69.1 * ( -0.195226 - event_longitude ) * COS( event_latitude / 57.3 ) , 2 ) ) 
* 1609.344) AS true_distance FROM table1 WHERE id!=0 AND no_place='0' 
AND from_date >= '45645646' AND to_date <= '76647446' HAVING distance <= '5000' 
ORDER BY distance ASC LIMIT 50" 
```

这将返回匹配长/纬度范围的条目，并忽略任何标记为 no_place=0 的条目。这使用 Haversine 进行长/纬度计算。

第二个查询需要提取没有 long/lat 但与日期范围匹配的条目：

Q2：

```
"SELECT id, from_date, to_date, event_title, event_longitude, event_latitude FROM
table1 WHERE no_place='1' AND from_date >= '45645646' AND to_date <= '76647446' 
LIMIT 50" 
```

我可以在这里运行两个单独的查询，并附加“WHERE ids !in(ids,from,q1)”

到第二个查询，然后使用PHP合并两个结果，MySQL必须有一些狡猾的方法来做到这一点；所以问题是这样的：

如何仅在一个查询中执行此操作，并忽略 Q1 中已找到的任何 ID。我知道我有 no_place 列，在这种情况下将保证我没有重复的行，但假设我没有此列，我将如何添加

```
"WHERE ids !in(ids,from,q1)" 
```

条款？另外我想我可能需要先用 no_place=1 条目排序这个总结果，然后再按距离值排序 no_place=0 条目。

呸！

* * *

在“希望我有帮助”的精彩回答后更新

所以这似乎可行，但它会丢失结果中的距离值：

```
(SELECT id, from_date, to_date, event_title, event_longitude, event_latitude, 
(SQRT( POW( 69.1 * ( event_latitude - 51.4999501637 ) , 2 ) + POW( 69.1 * 
( -0.195226 - event_longitude ) * COS( event_latitude / 57.3 ) , 2 ) ) * 1609.344) 
AS distance, (SQRT( POW( 69.1 * ( event_latitude - 51.4999501637 ) , 2 ) + POW( 69.1 
* ( -0.195226 - event_longitude ) * COS( event_latitude / 57.3 ) , 2 ) ) * 1609.344) 
AS true_distance FROM table1 WHERE id!=0 AND no_place='0' 
HAVING distance <= '5000' ORDER BY distance ASC LIMIT 50) UNION(SELECT id, from_date, 
to_date, event_title, event_longitude, event_latitude, 0, 0 FROM table1 WHERE 
no_place='1' LIMIT 50) 
```

这有效，但我现在在查询中没有半径限制......

```
(SELECT id, from_date, to_date, event_title, event_longitude, event_latitude, 
(SQRT( POW( 69.1 * ( event_latitude - 51.4999501637 ) , 2 ) + 
POW( 69.1 * ( -0.195226 - event_longitude ) * COS( event_latitude / 57.3 ) , 2 ) ) 
* 1609.344) AS distance, (SQRT( POW( 69.1 * ( event_latitude - 51.4999501637 ) , 2 ) 
+ POW( 69.1 * ( -0.195226 - event_longitude ) * COS( event_latitude / 57.3 ) , 2 ) ) 
* 1609.344) AS true_distance FROM table1 WHERE id!=0 AND no_place='0' ORDER BY
distance ASC LIMIT 50) UNION(SELECT id, from_date, to_date, event_title, 
event_longitude, event_latitude, 0, 0 FROM table1 WHERE no_place='1' LIMIT 50) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:50:42.787

尝试：

```
(SELECT id, from_date, to_date, event_title, event_longitude, event_latitude,
    (SQRT( POW( 69.1 * ( event_latitude - 51.4999501637 ) , 2 ) +
    POW( 69.1 * ( -0.195226 - event_longitude ) *
    COS( event_latitude / 57.3 ) , 2 ) ) * 1609.344) AS distance,
    (SQRT( POW( 69.1 * ( event_latitude - 51.4999501637 ) , 2 ) +
    POW( 69.1 * ( -0.195226 - event_longitude ) *
    COS( event_latitude / 57.3 ) , 2 ) ) * 1609.344) AS true_distance
    FROM table1
    WHERE id!=0 AND no_place='0' AND from_date >= '45645646' AND
    to_date <= '76647446'
    HAVING distance <= '5000'
    ORDER BY distance ASC 
    LIMIT 50)
        UNION
    (SELECT id, from_date, to_date, event_title, event_longitude, event_latitude,
    0, 0
    FROM table1
    WHERE no_place='1' AND from_date >= '45645646' AND to_date <= '76647446'
    LIMIT 50) 
```

通过应用`UNION`，您可以从两组中检索结果，而不会重复。

# objective-c - 符合取决于 iPhone 或 iPad 设备的协议

> ID：12586426
> 
> 赞同：0
> 
> 时间：2012-09-25T15:40:06.927
> 
> 标签：objective-c, ios

我对协议有疑问。我有这样的课：

```
@class SideToolBarDelegate;
@interface AuthentificationViewController : UIViewController <ASIHTTPRequestDelegate, UITextFieldDelegate,SideToolBarDelegate> {
}
... 
```

我希望我的班级“ `AuthentificationViewController`”符合协议“ `SideToolBarDelegate`”只是我在 iPhone 版本中，而不是在 iPad 版本中符合它。我怎么能声明这个？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:48:22.477

您可以在项目属性中设置一些定义并使用 ifdefs。喜欢：

```
@interface AuthentificationViewController : UIViewController <ASIHTTPRequestDelegate, UITextFieldDelegate
#ifdef IPAD
,SideToolBarDelegate>
#else
>
#endif 
```

但这是旧的 C 方式。在符合面向对象应用程序设计的程序中这样做是一个非常糟糕的主意。在这种情况下，您还有另外两种方法：

1.  为 iPhone 和 iPad 创建单独的子类
2.  按原样制作这一类，不要使用 iPhone 中的 SideToolBarDelegate 方法。这使代码更清晰，并且在将来更好地维护。

毕竟我建议为 viewControllers 创建两个类：

```
AuthentificationiPadViewController : UIViewController <ASIHTTPRequestDelegate, UITextFieldDelegate>
AuthentificationiPhoneViewController : UIViewController <ASIHTTPRequestDelegate, UITextFieldDelegate, SideToolBarDelegate> 
```

想想未来对代码的调试吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:58:26.797

真的很需要：

1.  您可以为 iPhone 和 iPad 应用程序创建单独的构建目标
2.  选择 [app]-iPad 目标作为活动目标，选择 Project -> Edit Active Target [app]-iPad。搜索“c flags”并双击。为“-D TARGET_IPAD”添加一个标志。现在符号**TARGET_IPAD**将只为您的 iPad 目标定义（从[这里](https://stackoverflow.com/a/2173953/902217)抓取）。
3.  将您的代码更改为：

@class SideToolBarDelegate;

```
@interface AuthentificationViewController : UIViewController <
    ASIHTTPRequestDelegate,
    UITextFieldDelegate
#ifdef TARGET_IPAD 
    ,SideToolBarDelegate
#endif
>
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:47:46.627

如果您没有**创建**通用应用程序，您可以定义几个预处理器宏来确定它是 iPad 还是 iPhone 在编译时：

```
#define IS_IPAD   (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define IS_IPHONE (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) 
```

然后做类似的事情

```
#if IS_IPHONE

@class SideToolBarDelegate;
@interface AuthentificationViewController : UIViewController <ASIHTTPRequestDelegate, UITextFieldDelegate,SideToolBarDelegate> {
}

#else

@interface AuthentificationViewController : UIViewController <ASIHTTPRequestDelegate, UITextFieldDelegate> {
}

#endif 
```

如果您确实创建了一个通用应用程序（听起来像您的情况），则无法在编译时确定。它必须在**运行时**完成。

如果是这样的话。你最好像@pro_metedor 提到的那样为 iPhone 和 iPad 创建单独的视图。

# actionscript-3 - 在非调试播放器中发布 Air 3.4 后，Adobe Air 徽章文件无法正常工作

> ID：12586429
> 
> 赞同：2
> 
> 时间：2012-09-25T15:40:13.790
> 
> 标签：actionscript-3, air, flash

请阅读主题。互联网上的所有徽章安装程序现在都不能在非调试 FP(11.3) 中工作。包括我的也一样。这意味着什么？简单的例子：

> [http://www.adobe.com/devnet/air/articles/badge_for_air.html](http://www.adobe.com/devnet/air/articles/badge_for_air.html)

文件从 Adob​​e 加载另一个文件：

adobe.com../browserapi/air.swf

并检查 AIR 版本：

```
_air.getStatus(_airVersion) 
```

但不是返回值“已安装”（我安装了 AIR 3.4.0.xxx），而是返回“可用”，我们可能会看到 AIR 安装程序对话框而不是我的应用程序安装。在最后一个调试播放器 (fp 11.4) 中单击 Badger 后，它会立即安装应用程序，而无需安装 AIR 播放器。怎么了？

请参阅下面的纯示例

> [http://smival.com/files/myworks/badge/2/](http://smival.com/files/myworks/badge/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T10:46:40.253

看来您一切正常，我不认为您可以为此发布源代码吗？我在领取我的申请或其他东西时遇到问题；在我点击安装按钮后，它只是坐着，什么也不做。

# ruby - Google api ruby 客户端失败

> ID：12586430
> 
> 赞同：1
> 
> 时间：2012-09-25T15:40:16.327
> 
> 标签：ruby, api, calendar, client

我在 ruby​​ 项目上使用 Google API 客户端时遇到问题。

我正在关注谷歌提供的代码示例。
自述文件在[这里](http://code.google.com/p/google-api-ruby-client/source/browse/calendar/README.md?repo=samples)。您个性化的源代码[在这里](http://code.google.com/p/google-api-ruby-client/source/browse/calendar/calendar.rb?repo=samples)。

它为基本的 sinatra 应用程序奠定了基础，该应用程序将您重定向到 Google，您可以在其中登录并授权该应用程序查看您的日历信息。

之后，它会将您引导回您的应用程序，在该应用程序中遇到以下错误：
`undefined method 'bytesize' for #<Faraday::Response:0x007f98f5beb668>`

跟踪从 sinatra 跳到稀薄到机架，然后返回到 sinatra - 那里没有什么真正有用的。我知道从应用程序调用的最后一个代码是：

`result = @client.execute(:api_method => @calendar.events.list, :parameters => {'calendarId' => 'primary'})`

我看过其他一些类似的 stackoverflow 帖子，但在这些情况下，人们总是自己定义他们的法拉第参数。这是 Google API 的问题，还是有人对我可能做错了什么有任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:49:44.730

对于那些遇到同样问题的人：我还没有找到解决方案。然而，我已经成功地将应用程序连接到 Google API，并且可以访问我想要的所有信息和方法。

决定与`omniauth`. 这真的很简单，这里有一个关于omniauth 如何工作的[railscast 插曲](http://railscasts.com/episodes/241-simple-omniauth)，以及使用omniauth 连接到Google 的精彩[演练](http://gregandrachel.baugues.com/google-calendar-api-oauth2-and-ruby-on-rails)。它具体描述了连接到 Google 日历的行为，但您需要做的就是将 session_controller 中的`client.discovered_api`设置器和`client.execute`调用更改为您想要的。developer.google.com/google-apps/calendar/v3/reference/ 上的体面文档和代码示例

祝你好运。

# asp.net-mvc - .NET MVC - 访问 .xhtml 文件

> ID：12586433
> 
> 赞同：1
> 
> 时间：2012-09-25T15:40:31.353
> 
> 标签：asp.net-mvc

我为 XForms 创建了一个区域，当我尝试返回 view("index.xhtml") 时，框架将视图解析为 index.xhtml.aspx 或 index.xhtml.cshtml。

我试过 routes.IgnoreRoute("{resource}.*xhtml/{*pathinfo}"); 在 global.asax 中。

要么我不确定要使用哪个 URL（我是仍然点击控制器还是直接访问视图文件夹中的 .xhtml 文件？）或者我在 ignoreroute 中犯了一个错误。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:44:07.673

如果你试图让动作只写 的内容`index.xhtml`，你需要这样做`return File("index.html", "application/xhtml+xml")`。`View`/`PartialView`假设您希望使用当前配置的视图引擎解析和执行指定的视图文件。

您不能/不应该将希望远程用户能够直接访问的静态文件放在您的`~/Views`文件夹中。MVC 在此文件夹中放置一个 web.config 文件，以防止提供此位置中的文件。

因此，要么让你的控制器操作返回我上面提到的文件，要么将 xhtml 文件移动到应用程序中不受限制的其他文件夹中。然后您的路线应该可以工作，并且您的文件应该静态提供。

# web-services - 多参数 nusoap

> ID：12586449
> 
> 赞同：1
> 
> 时间：2012-09-25T15:41:13.590
> 
> 标签：web-services, parameters, arguments, nusoap

我有一个正在使用的 Web 服务，当我使用一种方法时，我可以传递一个参数。我试图弄清楚如果可能的话如何通过多个。因此，例如：

我有一张桌子，上面有学校的学生名单。在此表中，列是：

```
STUDENT_NAME     | STUDENT_ID   |    STUDENT_GRADE
--------------------------------------------------------------------------------
John Smith       | 0123456      | 1st Grade
Mike Johnson     | 8564377      | 1st Grade
Tori Mackrill    | 0123456      | 2nd Grade
Beth Gridly      | 8564377      | 3rd Grade 
```

所以我希望能够设置一个参数值来返回所有一年级或三年级的学生。现在，我可以轻松地只返回 1 分，但是当我将参数设置为用逗号分隔的两个参数时，它将不起作用。这是到目前为止我对 one 参数的一个示例。

```
function getStudents($Grade)
   {
       $CI =& get_instance();
       $CI->load->model("gradelevel");

       $where = array('STUDENT_GRADE'=>$grade);
       $result = $CI->gradelevel->getStudents($where); 
       $Student = $result->row_array();

       return  $Student;
    }

$this->nusoap_server->register('getStudents',
        array ('Grade' => "xsd:string"),           // input parameters
        array("return"=>"tns:Grades"),             // output parameters
        'urn:nuserver',                            // namespace
        'urn:nuserver#getStudents',                // SOAPAction
        'rpc',                                     // style
        'encoded',                                 // use
        'Returns a list of students'); 
```

我需要添加或更改什么才能让它接受多个年级选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T22:16:10.277

希望这可以帮助：

```
function getStudents($Grade,$Grade2,$Grade3)
 {
   $CI =& get_instance();
   $CI->load->model("gradelevel");

   $where = array('STUDENT_GRADE'=>$grade);
   $result = $CI->gradelevel->getStudents($where); 
   $Student = $result->row_array();

   return  $Student;
  }

$this->nusoap_server->register('getStudents',
    array ('Grade' => "xsd:string", 'Grade2' => "xsd:string", 'Grade3' => "xsd:string"),           // input parameters
    array("return"=>"tns:Grades"),             // output parameters
    'urn:nuserver',                            // namespace
    'urn:nuserver#getStudents',                // SOAPAction
    'rpc',                                     // style
    'encoded',                                 // use
    'Returns a list of students'); 
```

# php - 在php中比较两个日期

> ID：12586450
> 
> 赞同：1
> 
> 时间：2012-09-25T15:41:14.393
> 
> 标签：php

> **可能重复：**
> [php 日期比较](https://stackoverflow.com/questions/4143741/php-date-compare)
> [PHP 比较日期](https://stackoverflow.com/questions/6405910/php-compare-dates)

我有这段代码，它允许我以这种格式获取今天的日期：

```
 $today = date("d-m-Y"); 
```

然后这个查询：

```
while ($row1 = mysql_fetch_array($queryenddate)) { 
$end_date=$row1['end_date'];
} 
```

结束日期打印如下：12-02-2012

我如何比较这两个日期？我需要做什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T15:46:00.973

你可以使用`DateTime`

```
$today = new DateTime();
$date = DateTime::createFromFormat("d-m-Y", $end_date);

if ($today > $date) {
    // Totaay is more current
}

if ($today->format("m") == $date->format("m")) {
    // they have same month
} 
```

你也可以做这样的事情

```
$diffrence = $today->diff($date); //enddate is "01-01-2010"
var_dump($diffrence); 
```

输出

```
object(DateInterval)[3]
  public 'y' => int 2
  public 'm' => int 8
  public 'd' => int 24
  public 'h' => int 0
  public 'i' => int 0
  public 's' => int 0
  public 'invert' => int 1
  public 'days' => int 998 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T15:47:50.447

您可以通过以下方式进行比较

```
if(strtotime($date1)>strtotime($date2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:57:47.270

您可以使用strtotime() 函数将日期转换为数字，然后可以用于比较或操作。

```
 $today = date("d-m-Y"); 

 $end_date='02-09-2012';

 echo $today;
 echo "<br>".$end_date;

 $diference= (strtotime($end_date)-strtotime($today))/86400;
 $diference= abs($diference); 
 $diference= floor($diference);

  echo "<br>".$diference; 
```

# css - Django i18n：如何翻译 CSS 内容？

> ID：12586453
> 
> 赞同：6
> 
> 时间：2012-09-25T15:41:21.207
> 
> 标签：css, django, internationalization

有以下css部分：

> .introduction:before { content: '谁来优雅地翻译我？'; }

可能没有简单的方法来处理 css 文件的 i18n，两种可能的选择：

1.  收集所有这些带有内容的 css 并将它们一起发送到 Django 模板中。
2.  在模板中生成 i18n 敏感的 css 名称以选择不同的预翻译 css 内容。

任何**新的可能的解决方案**将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:09:22.470

我将提供需要通过 Django 翻译的 css 文件，并按语言缓存它以减轻性能损失。

网址.py

```
url(r'^static/css/translated.css$', TemplateView.as_view(template_name='translated.css')), 
```

翻译的.css

```
{% load cache %}
{% cache 60*60*24 translated_css LANGUAGE_CODE %}
  {# write css here, translate as a normal template #}
  .introduction:before { content: 
    {% trans 'Who is going to translate me in a graceful way?' %}
  ; }
{% endcache %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:46:38.873

我认为这是不可能的。如果 css 是模板（如 html 模板），则只有您可以翻译它。但这是一个糟糕的解决方案....效率

但是如果你在 body 中有一个类语言，你可以有这样的东西：

```
body.language_en .introduction:before { content: 'Who is going to translate me in a graceful way?'; }
body.language_es .introduction:before { content: 'El traductor de google es terrible :-)'; } 
```

在你的 base.html 中是这样的：

```
....
<body class="language_{{ LANGUAGE_CODE }}">
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T11:29:49.993

对于希望避免以不同方式提供 CSS 文件或复制 CSS 行或文件的人来说，另一种可能的解决方案是使用[django javascript 翻译支持](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-javascript-code)。

保留原始 CSS 作为备份。然后通过将翻译后的样式附加到页面头部来使用 javascript 覆盖内容：

```
var trans_str = gettext("some content");
$('<style>.classWithContent:before{content:"' + trans_str + '" !important}' +
  '</style>').appendTo('head'); 
```

这是使用 JQuery 的版本，但您可以轻松地用纯 JavaScript 重写它。添加尽可能多的翻译字符串并覆盖尽可能多的样式。

这样你就可以利用你可能已经拥有的[django 国际化，并用最少的代码翻译 CSS 字符串。](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-template-code)这种解决方案显然不适用于大量使用 CSS 内容。

# c# - 如在 vb.net 中表示的这个 lambda 表达式

> ID：12586456
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:41:27.300
> 
> 标签：c#, vb.net, lambda

我只需要知道如何将 lambda 表达式 C# 转换为 vb.net。

```
if ((object)publicProperties != null && publicProperties.Any())
        {
            return publicProperties.All(p =>
            {
                var left = p.GetValue(this, null);
                var right = p.GetValue(other, null);

                if (typeof(TValueObject).IsAssignableFrom(left.GetType()))
                {
                    //check not self-references...
                    return Object.ReferenceEquals(left, right);
                }
                else
                    return left.Equals(right);

            });
        } 
```

在vb中，表达式如下我，

```
Dim left = Nothing
           Dim Right = Nothing

           If DirectCast(publicProperties, Object) IsNot Nothing AndAlso publicProperties.Any() Then
                Return publicProperties.All(Function(p) (left() = p.GetValue(Me, Nothing))(Right() = p.GetValue(other, Nothing)))

                If GetType(TValueObject).IsAssignableFrom(left.[GetType]()) Then
                     'check not self-references...
                     Return [Object].ReferenceEquals(left, Right)
                Else
                     Return left.Equals(Right)

                End If

           Else
                Return True
           End If 
```

我想知道这个表达是否正确，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:12:59.787

您的 VB 版本看起来一点也不健康。试试这个：

```
 If CObj(publicProperties) IsNot Nothing AndAlso publicProperties.Any() Then
        Return publicProperties.All(Function(p)
                'check not self-references... 
            Dim left = p.GetValue(Me, Nothing)
            Dim right = p.GetValue(other, Nothing)
            If GetType(TValueObject).IsAssignableFrom(left.GetType()) Then
                Return Object.ReferenceEquals(left, right)
            Else
                Return left.Equals(right)
            End If
        End Function)
    End If 
```

# xml - Shopify XML API 未更新跟踪号

> ID：12586458
> 
> 赞同：1
> 
> 时间：2012-09-25T15:41:35.773
> 
> 标签：xml, shopify

我正在尝试使用 Shopify API 为订单创建新的履行。这是我发送的示例 XML 请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<fulfillment>
    <tracking-number>1Z0000000300002879</tracking-number>
    <notify-customer type="boolean">false</notify-customer>
</fulfillment> 
```

POST /admin/orders/12345678/fulfillments.xml 后我得到 200-OK。订单已`fulfilled`正确更新，但跟踪号字段仍为空白。我更新的每个订单都会发生这种情况；状态是`fulfilled`，但从未设置跟踪号。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:36:41.467

{"line_items" => ["order_item_id1", "order_item_id2", "order_item_id3"],

不同于 API 文档，它说 line_items 是 line_item 对象，而不仅仅是订单项目 ID 的字符串。

```
"fulfillments": [
{
  "created_at": "2012-09-28T11:50:06-04:00",
  "id": 255858046,
  "order_id": 450789469,
  "service": "manual",
  "status": "failure",
  "tracking_company": null,
  "tracking_number": "1Z2345",
  "tracking_url": "http://www.google.com/search?q=1Z2345",
  "updated_at": "2012-09-28T11:50:06-04:00",
  "receipt": {
    "testcase": true,
    "authorization": "123456"
  },
  "line_items": [
    {
      "fulfillment_service": "manual",
      "fulfillment_status": null,
      "grams": 200,
      "id": 466157049, 
```

我正在尝试后者，但必须等到另一个订单进来，因为我得到“无法处理的实体”来重复履行。

不发送任何 line_items 会导致跟踪号被忽略，但订单已完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T21:49:17.310

履行需要一个 line_items 列表，应使用该跟踪号标记为履行。您没有发送任何内容，因此无法将任何内容标记为已完成。

这是我手头的一个rails示例，它应该可以让您朝着正确的方向前进。

```
@payload = {"fulfillment" =>
    {"line_items" => ["order_item_id1", "order_item_id2", "order_item_id3"],
    "notify_customer" => true,
    "tracking_number" => order.tracking_number
    }}.to_json 
```

# google-chrome - Selenium 2 - 如何使用 Java 中的一个 WebDriver 实例运行多个 JUnit 测试？

> ID：12586459
> 
> 赞同：2
> 
> 时间：2012-09-25T15:41:36.017
> 
> 标签：google-chrome, testing, junit, selenium-webdriver

每次新的 ChromeDriver 实例都会启动我的 TestCases (TestClasses)，如 TestLogIn、TestLogOut、TestSendEmail、TestDeleteEmail 等。如何使用一个 WebDriver 实例运行多个测试？谁能给我一些例子？

我在java中的结构：

通用类.java：

```
public class GenericClass extends TestCase
//some code 
```

测试登录.java：

```
public class TestLogin extends GenericClass
//code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:58:34.680

我解决这个问题的想法是让 WebDriver 成为静态的。

```
public class ProjectTests { 
static WebDriver driver;
@BeforeClass
public static void setStuff() 
{   
    driver = new FirefoxDriver();
}
@Test
public void testOne(){} 
```

然后，您可以将驱动程序实例传递给每个测试方法。测试将在 WebDriver 的同一实例中执行。也许这不是最优雅的方法，但对我来说它有效。

# css - 内联元素中的块元素

> ID：12586460
> 
> 赞同：0
> 
> 时间：2012-09-25T15:41:43.367
> 
> 标签：css

我一直在尝试剖析 behance.net 网站上的一些 CSS。我已经在 chrome 检查器中非常彻底地查看了它，但有些东西我就是不明白。

在顶部导航栏上，有文字显示“发现”、“画廊”、“工作”。我注意到“发现”是锚标签内的一个 div。我的印象是块级元素不能容纳内联级元素。但这是一个非常专业的网站，他们正在这样做。它不会在某些浏览器中中断吗？

```
<a    class="nav-link" href="/"><div class="nav-text nav-sprite nav-sprite-discover">Discover</div></a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:44:26.310

根据 HTML5 文档，[`<a>`](http://dev.w3.org/html5/spec/the-a-element.html#the-a-element)元素具有[`transparent`内容模型](http://dev.w3.org/html5/spec/content-models.html#transparent)，这意味着它们可以包含块级元素。

[在 HTML4 及以下版本中，`<a>`元素是内联元素，不能包含块内容。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:49:02.693

如果 Behance 使用 HTML5 文档类型，这将是有效的（正如 zzzzBov 所说，在 HTML5 规范的当前草案中，元素具有透明的内容模型，这意味着它们可以包含块级元素）。

但是，由于它们使用的是 XHTML 文档类型，因此它们在此上下文中的使用是无效的。它不会在（大多数）浏览器上中断，但它并不完全正确，我不会效仿它。

# php - Symfony 安装 - 找不到包

> ID：12586465
> 
> 赞同：1
> 
> 时间：2012-09-25T15:41:54.503
> 
> 标签：php, symfony, symfony-2.1

我在 DOS 中启动以下命令：

```
php c:\composer.phar create-project C:\Symfony C:\Users\Jerome\git\XX\XX 
```

我收到了这个错误：

> 无效参数异常，找不到包 C:\Symfony 但所有文件都在那里。

这是屏幕截图！ ![Symfony 1](../Images/a210e429a6ad71b9370e68752aeeb50e.png)

![Symfony 2](../Images/fdaba2a0b329d2a903998c52d868fb14.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T15:46:00.213

您需要的命令是：

```
php composer.phar create-project symfony/framework-standard-edition C:\Users\Jerome\git\XX\XX 2.1.2 
```

`symfony/framework-standard-edition`不是路径，是包名

# asp.net-mvc - 将整个模型从视图传递回控制器

> ID：12586468
> 
> 赞同：2
> 
> 时间：2012-09-25T15:42:05.673
> 
> 标签：asp.net-mvc, view, model, controller, postback

我得到了一份清单：

```
public class Items
{
    public String Nro_Item { get; set; }
    public Sucursal Sucursal { get; set; }
    public Areas Area { get; set; }
    public Sectores Sector { get; set; }
    public bool ID_Estado { get; set; }
} 
```

我将它传递给这个视图：

```
@using ClientDependency.Core.Mvc
@model IEnumerable<TrackingOperaciones.Controllers.Items>

@{
    ViewBag.Title = "Ver Items";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<br/>
@using (Html.BeginForm("CargarRecibidos", "Recepcion", FormMethod.Post))
{    
<table class="table table-striped table-bordered table-condensed">
    <tr>
        <th>
            Numero
        </th>
        <th>
            Sucursal
        </th>
        <th>
            Area
        </th>
        <th>
            Sector
        </th>
    </tr>
  @foreach (var item in Model)
  {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Nro_Item)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Sucursal.descripcion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Area.descripcion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Sector.Descripcion)
        </td>
        <td>
            @Html.CheckBoxFor(modelItem => item.ID_Estado)
        </td>
    </tr>
  }
</table>
<p>
    <input class="btn" name="Guardar" type="submit" value="Guardar"/> |
    @Html.ActionLink("Volver al listado de Recepción", "Index")
</p>
} 
```

直到一切都很好：现在的问题是在控制器中取回带有检查值的整个模型，以便像这样处理它：

```
[HttpPost]
 public ActionResult CargarRecibidos(IEnumerable<Items> items)
        {
            if (ModelState.IsValid)
            {
                //do something here
            }
            return RedirectToAction("Index");
        }
    } 
```

但我很惨，因为“项目”在回发中空了回来

我猜表格有问题

```
@using (Html.BeginForm("CargarRecibidos", "Recepcion"))
{  
    <input class="btn" name="Guardar" type="submit" value="Guardar"/>
} 
```

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:04:54.820

使用 IEnumerable

然后控制器输入参数将是 List

也许还可以考虑使用带有 JSON 对象的 AJAX POST 来代替表单提交（更现代/优雅），但提交也很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:31:30.573

部分问题是它不会发布整个模型，因为只有复选框是表单值。我认为您需要在表单中添加一个额外的隐藏值来跟踪项目编号，然后在控制器中专门处理复选框值。项目编号附加到发布值中的“复选框”以保持它们的区别。

```
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Nro_Item)
        @Html.Hidden("Nro_Item", item.Nro_Item)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Sucursal.descripcion)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Area.descripcion)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Sector.Descripcion)
    </td>
    <td>
        @Html.CheckBox("checkbox" + item.Nro_Item, item.ID_Estado)
    </td>
</tr> 
```

在控制器中仅绑定到数字项，因此可用于处理复选框：

```
 [HttpPost]
    public ActionResult CargarRecibidos(List<string> nro_item)
    {

         foreach (string item in nro_item)
         {
            var checkbox=Request.Form["checkbox" + item];
            if (checkbox != "false") // if not false then true,false is returned
            {
                // Do the action for true...
            }
            else 
            {
                // Do the action for false
            }
         }
        return View();
    } 
```

# java - 正则表达式第 n 个匹配字符串

> ID：12586472
> 
> 赞同：1
> 
> 时间：2012-09-25T15:42:21.537
> 
> 标签：java, regex, regex-group

是否可以仅使用正则表达式（无需额外代码！）来匹配第 n 个匹配项？例如：

“汽车”-“火车”-“船”-“自行车”

现在我只想匹配 BOAT，匹配的正则表达式是“[AZ]+”，但这也匹配第一个、第二个和第四个。

有没有人为此提供纯正则表达式解决方案？我需要这个，因为我无法更改使用正则表达式的代码，但我可以提供一个正则表达式。

最好的问候，罗宾

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T15:47:49.840

我认为这个[lookbehind](http://www.regular-expressions.info/lookaround.html)应该做到这一点：

```
(?<=^("[A-Z]+"[\s-]+){2})"[A-Z]+" 
```

它匹配字符串开头后两个单词的单词

![在此处输入图像描述](../Images/4d5956a235ac4071e317f1dd8177f8a7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:11:33.637

(?!(\"[AZ] *\"\s-\s){2})(\"[AZ]* \") - 其中 {2} 表示您想要的索引。

唯一的问题是它也会返回指定索引之后的每个匹配项。您可以执行匹配并返回第一个结果。

在您的示例中使用正则表达式对其进行了测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:47:03.657

如果我理解正确并且您将多个字符串逐个字符串放入一个正则表达式中，那么**不**，这是**不可能的**。

正则表达式本身没有比匹配时间更长的内存，所以如果你匹配一个东西，然后再匹配另一个东西，就没有第一个的信息。

# asp.net-mvc - 在特定日期自动发送电子邮件

> ID：12586474
> 
> 赞同：0
> 
> 时间：2012-09-25T15:42:21.973
> 
> 标签：asp.net-mvc, email

我正在实施电子邮件提醒，以提醒学生在过期日期之前归还书籍。

我知道 Window Service 可以做到这一点，但是由于机器对安装 Window Service 有限制，所以还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:03:08.283

您不需要 Windows 服务来执行后台任务，只需使用 Windows 计划任务即可。您可以编写一个 exe 或批处理文件，并按您喜欢的频率安排它。

如果服务器不允许您运行计划任务，您始终可以在 MVC 控制器中将任务创建为操作，并在调用您操作的另一台机器上创建计划任务。

# asp.net-mvc - 从控制器调用时出现空“页面”参数错误，在 MVC 4 Web 应用程序中使用 JQGrid

> ID：12586475
> 
> 赞同：0
> 
> 时间：2012-09-25T15:42:28.907
> 
> 标签：asp.net-mvc, jqgrid, jqgrid-asp.net

我正在尝试实现一个从我的控制器获取信息的 JQGrid，遵循本教程中的方法，[http ://haacked.com/archive/2009/04/13/using-jquery-grid-with-asp.net- mvc.aspx](http://haacked.com/archive/2009/04/13/using-jquery-grid-with-asp.net-mvc.aspx)。

我的控制器的代码是：

```
 public ActionResult GridData(string sidx, string sord, int page, int rows)
    {
        var jsonData = new
        {
            total = 1,  
            page = page,
            records = 1, 
            rows = new[]
            {
                new {id = 1, cell = new[] {"", "", "", "", "", "", "f", "", "", "", "",     "", "", ""}},
            }
        };
        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

我的视图的代码是：

```
<link rel="stylesheet" type="text/css" media="screen" href="css/ui-lightness/jquery-ui-    1.8.23.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.multiselect.css" />

<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script type="text/javascript">
jQuery(document).ready(function ()
{
    jQuery("#list").jqGrid(
        {
            url: '/WebFormUserList/GridData',
            datatype: 'json',
            mtype: 'GET',
            colNames:
                [
                    'User_ID', 'Forename', 'Surname', 'Client_Code', 'User_Name',
                    'Password', 'Email', 'Gender', 'Report_Date', 'Email_Date',
                    'Test_Count', 'Test_Completed', 'Job_Function', 'Lookup_Value'
                ],
            colModel:
                [
                    { name: 'User_ID', index: 'User_ID', width: 'auto', align: 'centre' },
                    { name: 'Forename', index: 'Forename', width: 'auto', align: 'centre' },
                    { name: 'Surname', index: 'Surname', width: 'auto', align: 'centre' },
                    { name: 'Client_Code', index: 'Client_Code', width: 'auto', align: 'centre' },
                    { name: 'User_Name', index: 'User_Name', width: 'auto', align: 'centre' },
                    { name: 'Password', index: 'Password', width: 'auto', align: 'centre' },
                    { name: 'Email', index: 'Email', width: 'auto', align: 'centre' },
                    { name: 'Gender', index: 'Gender', width: 'auto', align: 'centre' },
                    { name: 'Report_Date', index: 'Report_Date', width: 'auto', align: 'centre' },
                    { name: 'Email_Date', index: 'Email_Date', width: 'auto', align: 'centre' },
                    { name: 'Test_Count', index: 'Test_Count', width: 'auto', align: 'centre' },
                    { name: 'Test_Completed', index: 'Test_Completed', width: 'auto', align: 'centre' },
                    { name: 'Job_Function', index: 'Job_Function', width: 'auto', align: 'centre' },
                    { name: 'Lookup_Value', index: 'Lookup_Value', width: 'auto', align: 'centre' },
                ],

            pager: jQuery('#pager'),
            height: 'auto',
            width: 1000,
            rowNum: 10,
            rowList: [5, 10, 20, 50],
            sortname: 'Id',
            sortorder: "desc",
            viewrecords: true,
            imgpath: '/css/ui-lightness/images',
            caption: 'My first grid'
        });
}); 
```

当我尝试调用网格页面时，出现以下错误。

参数字典包含“HFI_Assessment_Administration”中方法“System.Web.Mvc.ActionResult GridData(System.String, System.String, Int32, Int32)”的不可为空类型“System.Int32”的参数“页面”的空条目.Controllers.WebFormUserListController'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

我将非常感谢人们可以提供的任何帮助或建议。如果有人还可以解释 sidx、sord、page、rows 是如何传递的，那也将极大地帮助我理解。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:54:08.763

`page`在您的示例中未初始化。尝试这个：

```
 page  = 1,
        records = 1, 
        rows = new[]
        {
            new {id = 1, cell = new[] {"", "", "", "", "", "", "f", "", "", "", "",     "", "", ""}},
        } 
```

# ios - 使用我的 ios 应用程序打开文本文件

> ID：12586477
> 
> 赞同：1
> 
> 时间：2012-09-25T15:42:36.427
> 
> 标签：ios

我正在尝试将我的应用注册为能够打开文本文件。基于一些挖掘，下面是我尝试过的，在编译时，它没有工作。当我进入 Dropbox 并尝试启动一个 txt 文件时，我得到“没有安装的应用程序支持打开此文件”。我需要做什么才能让我的应用显示在任何 txt 文件中？

```
<key>CFBundleDocumentTypes</key>
<array>
<dict>
<key>CFBundleTypeName</key>
<string>Text File</string>
<key>CFBundleTypeRole</key>
<string>Viewer</string>
<key>CFBundleTypeExtensions</key>
<array>
<string>txt</string>
<string>TXT</string>
</array>
<key>LSHandlerRank</key>
<string>Alternate</string>
<key>LSItemContentTypes</key>
<array>
<string>public.txt</string>
</array>
</dict>
</array> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:55:23.780

我的应用程序也导入 TXT 文件。更改您的 Info.plist：

*   将上面列表中的 public.txt 更改为 com.myapp.txt （或任何你想要的）
*   在上面的最后一个`</array>`列表之后添加：

    ```
    <key>UTExportedTypeDeclarations</key>
    <array>
    <dict>
        <key>UTTypeConformsTo</key>
        <array>
            <string>public.text</string>
        </array>
        <key>UTTypeDescription</key>
        <string>Plain Text Document</string>
        <key>UTTypeIdentifier</key>
        <string>com.myapp.txt</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <string>txt</string>
            <key>public.mime-type</key>
            <string>text/plain</string>
        </dict>
    </dict>
    </array> 
    ```

您可以将 com.myapp.txt 替换为您想要的任何标识符。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-22T13:46:21.670

**针对 iOS 11 和 Xcode 9 更新的答案**

如果您要添加的文档类型不是自定义文档类型，则您不必“注册您的应用程序”，因为 iOS 已经知道标准类型（文本文件就是这种情况）。

只需在项目中选择目标，然后在**Document Types**部分输入文本文件类型：

[![在此处输入图像描述](../Images/bd9fbc0b8c49b4b6b51346d7c4f15e11.png)](https://i.stack.imgur.com/m9ki9.png)

有关更多信息，请参阅此 Apple 文档的“添加文档类型”部分：[https ://developer.apple.com/library/content/qa/qa1587/_index.html](https://developer.apple.com/library/content/qa/qa1587/_index.html)

# ruby - 从 ruby 方法保存和调用多个变量

> ID：12586478
> 
> 赞同：0
> 
> 时间：2012-09-25T15:42:39.993
> 
> 标签：ruby, variables, methods

也许我一直盯着我的 Ruby 书看，以至于文字不再具有任何意义，但我想我还是问问吧。

我想要做的是，而不是通过我的函数头传递大量变量，或者不是使用全局变量，我希望将我的变量保存在一个方法中，并在我的整个过程中多次调用它们功能。我实际上遇到的问题是范围。

```
def DateGrab()
 print "\nEnter the date you're looking for (Month/Day): "
 longdate = gets.strip.split(/\/| /)
 if longdate[0].length > 3
   month = longdate[0].slice(0..2)
 else
   month = longdate[0]
 end
  day = longdate[1]
  year = `date | awk '{print $6}'`.strip
  grepdate = "#{day}/#{month}/#{year}"
  date = Date.parse("#{day}-#{month}-#{year}").strftime('%m%d%Y').strip
end 
```

我正在寻找通过多个函数传递“grepdate”和“date”，我觉得使用方法会更容易，但每次我尝试调用变量时，都会出现“未定义的局部变量或方法”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:46:11.400

您想查看实例变量。您可以通过`@grepdate = "something"`这些实例变量来设置它们，这些实例变量可以在整个类和该类的所有方法中访问。

# javascript - 连接到 styleSheet.cssText 时 IE6 抛出“访问被拒绝”

> ID：12586482
> 
> 赞同：0
> 
> 时间：2012-09-25T15:42:53.130
> 
> 标签：javascript, css, cross-browser, internet-explorer-6

有一个动态创建的`<style>`标签，我将附加一段 css 连接到它。这是用于动态加载模块的更大框架的一部分。

最初它创建了新的样式标签，但由于著名的“31 样式表限制”，这不再是一个选项，所以我决定回收现有的样式标签（除非它们包含太多规则或者新字符串包含@import，在这种情况下无论如何都必须创建一个新的）。

不管怎样，我让它在所有主流浏览器（FF2+、Chrome14+、Opera10+、IE7+、Safari 4.0+）上都能运行，现在 IE6 让我头疼。

我对其他场景中的这个错误很熟悉，但我从未在这种情况下看到过。另外，不要打扰任何 IE6-timeywimey，我很清楚这一点。但不幸的是，这是一个仍然需要 IE6 支持的例外情况。

![错误截图和部分源代码](../Images/7dc96143e9ce26c6984b2716d7ba7ff6.png)

请注意，括号计数仅用于估计和调试目的。try/catch 最初不在`cssText +=`，我添加它是因为我发现它在 IE6 中引发异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:47:09.703

我找到了自己问题的答案。事实证明 IE6 有一个模糊的安全措施，它不允许对其他脚本间接创建的元素进行操作（即使它们来自完全相同的来源/域）。

在这种情况下，[简化的方法](http://jsfiddle.net/zJzMy/1)工作正常，但[实际代码](http://jsfiddle.net/uJTQz)失败了。唯一的区别是实际代码使用 jQuery 来存储数据、创建元素和插入元素。最后一个动作（插入元素）是问题所在。

我变了

```
 /**
         * @param {jQuery|HTMLElement} $nextnode
         */
        function addStyleTag( text, $nextnode ) {
            var s = document.createElement( 'style' );
            // IE: Insert into document before setting cssText
            if ( $nextnode ) {
                // If a raw element, create a jQuery object, otherwise use directly
                if ( $nextnode.nodeType ) {
                    $nextnode = $( $nextnode );
                }
                $nextnode.before( s );
                /* ... */ 
```

到：

```
 /**
         * @param {jQuery|HTMLElement} nextnode
         */
        function addStyleTag( text, nextnode ) {
            var s = document.createElement( 'style' );
            // IE: Insert into document before setting cssText
            if ( nextnode ) {
                // If a jQuery object, get raw element, otherwise use directly
                if ( nextnode.jquery ) {
                    nextnode = nextnode.get( 0 );
                }
                nextnode.parentNode.insertBefore( s, nextnode );
                /* ... */ 
```

这解决了问题。

# flex4.5 - 无法在 flex 中以编程方式创建 http 服务

> ID：12586484
> 
> 赞同：0
> 
> 时间：2012-09-25T15:42:55.053
> 
> 标签：flex4.5, httpservice

我正在尝试通过动作脚本创建 HttpService，并且我想将此 mxml 代码转换为我的动作脚本 mxml 代码代码在这里：

```
<s:HTTPService id="weatherService"
                   url="{BASE_URL}"
                   resultFormat="object"
                   result="weatherService_resultHandler(event)"
                   fault="weatherService_faultHandler(event)"
                   showBusyCursor="true">
        <s:request xmlns="">
            <q>{cityName.text.toString()}</q>
            <format>{FORMAT}</format>
            <num_of_days>{NUMBER_OF_DAYS}</num_of_days>
            <key>{API_KEY}</key>
        </s:request>
    </s:HTTPService> 
```

如何在动作脚本中转换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:50:34.753

这可能会对您有所帮助，请在此处注意以下代码未使用绑定

```
 import mx.rpc.http.HTTPService;

        private function callService():void
        {
            var requestObj:Object = {};
            requestObj.q = cityName.text.toString();
            requestObj.format = FORMAT;
            requestObj.num_of_days = cNUMBER_OF_DAYS;
            requestObj.key = API_KEY;

            var weatherService:HTTPService = new HTTPService();
            weatherService.url = BASE_URL;
            weatherService.resultFormat = "object";
            weatherService.showBusyCursor = true;
            weatherService.request = requestObj;
            weatherService.addEventListener(ResultEvent.RESULT , weatherService_resultHandler);
            weatherService.addEventListener(FaultEvent.FAULT, weatherService_faultHandler);
            weatherService.send();
        }

        protected function weatherService_resultHandler(event:ResultEvent):void
        {
            trace("got result");
        }

        protected function weatherService_faultHandler(event:FaultEvent):void
        {
            trace("got fault");
        } 
```

# actionscript-3 - 文本布局框架（TLF）如何插入breakElement？

> ID：12586485
> 
> 赞同：0
> 
> 时间：2012-09-25T15:42:55.287
> 
> 标签：actionscript-3, apache-flex, tlf

我正在使用带有 Flex 3.6 SDK 的 TLF 3.0。众所周知，每次用户点击“Enter”时，都会创建一个新段落。我读到 TLF 支持 breakElement 但我不知道它是如何通过键盘交互插入的。

有任何想法吗？谢谢，

汉地

# pytest - pytest：pytest_sessionstart() 和 pytest_sessionfinish() 是有效的钩子吗？

> ID：12586489
> 
> 赞同：6
> 
> 时间：2012-09-25T15:43:11.040
> 
> 标签：pytest

是`pytest_sessionstart(session)`和`pytest_sessionfinish(session)`有效的钩子？[开发钩子文档](http://pytest.org/dev/plugins.html)或[最新钩子文档](http://pytest.org/latest/plugins.html)中没有描述它们

`pytest_configure(config)`它们和/有什么区别`pytest_unconfigure(config)`？

在文档中说：

> `pytest_configure(config)`在解析命令行选项后调用。并加载了所有插件和初始 conftest 文件。

和

> `pytest_unconfigure(config)`在退出测试过程之前调用。

会话是一样的，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T10:56:54.023

坏消息是 sessionstart/configure 的情况没有很好地指定。特别是 Sessionstart 并没有太多的文档记录，因为无论是否在 xdist/distribution 情况下，语义都会有所不同。人们可以区分这些情况，但这有点太复杂了。

好消息是 pytest-2.3 应该让事情变得更容易。如果您使用 scope="session" 定义一个 @fixture，您可以实现一个夹具，该夹具在执行测试的每个进程中调用一次。
对于分布式测试，这意味着每个测试从站一次。对于单进程测试，这意味着整个测试运行一次。在任何一种情况下，如果您执行“--collectonly”运行，或“-h”或其他不涉及运行测试的选项，则夹具函数根本不会执行。

希望这可以澄清。

# iphone - 使用 sqlite 数据库进行 iOS 本地化

> ID：12586496
> 
> 赞同：2
> 
> 时间：2012-09-25T15:43:33.030
> 
> 标签：iphone, sqlite, multilingual, nslocalizedstring

我做了一些关于 iOS 本地化的阅读，似乎两个主要的事情是本地化 nib 文件，以及使用 NSLocalizedString 从字符串文件中获取本地化字符串。对于我们的应用程序，我们显示的大部分内容都有一个 sqlite 数据库（使用 FMDB 包装器）。在这种情况下，我们将如何本地化我们的应用程序？我们需要中文版的数据库吗？或者我们是否需要一个中文字符串文件，作为我们从数据库中提取的字符串的查找表。就像数据库中有汽车的描述一样，我们是否在字符串文件中查找该描述？我还没有真正看到任何关于使用数据库进行本地化的示例。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:31:39.400

这里实际上有两种数据：1）由您的应用程序操作的数据，以及您的应用程序用来显示的字符串数据。您希望保持 1) 分开，以便如果有人更改其设备上的语言，数据仍然是正确的。对于 2)，您可以按照您的建议使用数据库中的字符串文件查找。您还可以使用特定语言的表来保存这些字符串，并在运行应用程序时打开该语言的表。例如，您当前的数据库存储温度（数字）和城市名称。使用您的字符串名称，您可以从数据库中获取城市名称并将其用作 strings.h 中的查找，或者您可以拥有每种语言的城市名称数据库表，并根据语言设置加入该表，但只将温度存储在一个地方，以便所有语言都可以访问它。

# c# - Silverlight 中的鼠标/点击事件

> ID：12586497
> 
> 赞同：0
> 
> 时间：2012-09-25T15:43:36.423
> 
> 标签：c#, silverlight, mouseevent

我正在使用 C#、Silverlight、WP7。

Tap 事件与 MouseLeftButtonDown 和 MouseLeftButtonUp 事件序列之间有什么区别？另外，为什么 Tap 事件不总是按顺序触发 MouseLeftButtonDown/MouseLeftButtonUp？这些事件在计算机上模拟和在手机上部署有什么不同吗？

我在文档中找不到这个，我自己的测试似乎暗示在屏幕上快速点击不会总是生成 MouseLeftButtonDown/MouseLeftButtonUp 序列。这些是相互排斥的事件吗？如果不是，事件的顺序是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:17:51.067

虽然鼠标事件在 WP7 上可用，但它们不一定可靠。

> Windows Phone 中的用户输入包括操作事件、鼠标事件和触摸事件。
> 
> 操作事件是处理用户输入的推荐方式。除非您有特殊需要，否则出于性能和硬件兼容性原因，您应该避免在 Windows Phone 的 Silverlight 应用程序中使用鼠标事件。相反，您应该使用操作事件。您还可以对从 UIElement 派生的任何元素（例如基本控件）使用 Tap、DoubleTap 和 Hold 事件。

[http://msdn.microsoft.com/en-us/library/ff967560%28v=VS.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff967560%28v=VS.92%29.aspx)

# macos - 具有动态数据范围的数据透视表的 Excel VBA 宏

> ID：12586507
> 
> 赞同：0
> 
> 时间：2012-09-25T15:43:54.503
> 
> 标签：macos, excel, pivot-table, vba

**代码有效！谢谢您的帮助！**

我正在尝试创建一个动态数据透视表，该表将处理行数不同的数据。目前，我有 28,300 行，但这可能每天都在变化。

**数据格式示例如下：**

```
Case Number    Branch      Driver
1342           NYC         Bob
4532           PHL         Jim
7391           CIN         John
8251           SAN         John
7211           SAN         Mary
9121           CLE         John
7424           CIN         John 
```

**成品表示例：**

```
Driver    NYC    PHL   CIN   SAN   CLE
Bob       1      0     0     0     0
Jim       0      1     0     0     0    
John      0      0     2     1     1     
Mary      0      0     0     1     0 
```

**代码如下：**

```
Sub CreateSummaryReportUsingPivot()
' Use a Pivot Table to create a static summary report
' with model going down the rows and regions across
Dim WSD As Worksheet
Dim PTCache As PivotCache
Dim PT As PivotTable
Dim PRange As Range
Dim FinalRow As Long
Dim FinalCol As Long
Set WSD = Worksheets("PivotTable")

'Name active worksheet as "PivotTable"
 ActiveSheet.Name = "PivotTable"

' Delete any prior pivot tables
For Each PT In WSD.PivotTables
    PT.TableRange2.Clear
Next PT

' Define input area and set up a Pivot Cache
FinalRow = WSD.Cells(Application.Rows.Count, 1).End(xlUp).Row
FinalCol = WSD.Cells(1, Application.Columns.Count). _
    End(xlToLeft).Column
Set PRange = WSD.Cells(1, 1).Resize(FinalRow, FinalCol)
Set PTCache = ActiveWorkbook.PivotCaches.Add(SourceType:= _
    xlDatabase, SourceData:=PRange)

' Create the Pivot Table from the Pivot Cache
Set PT = PTCache.CreatePivotTable(TableDestination:=WSD. _
    Cells(2, FinalCol + 2), TableName:="PivotTable1")

' Turn off updating while building the table
PT.ManualUpdate = True

' Set up the row fields
PT.AddFields RowFields:="Driver", ColumnFields:="Branch"

' Set up the data fields
With PT.PivotFields("Case Number")
    .Orientation = xlDataField
    .Function = xlCount
    .Position = 1
End With

With PT
    .ColumnGrand = False
    .RowGrand = False
    .NullString = "0"
End With

' Calc the pivot table
PT.ManualUpdate = False
PT.ManualUpdate = True

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:20:48.987

他们更改了 PivotCache 的对象模型。您在 2007-2010 年需要的方法（使用 VBA 版本 7 而不是版本 6）是

```
 PivotCaches.Create 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:55:38.757

除了更改行数之外，您使用 VBA 的任何原因？

如果您使用的是 Excel 2007 / 2010，请从您的原始数据创建一个常规表/列表 (Ctrl-L)。你也可以给它一个名字。然后创建一个数据透视表并使用表名作为数据源。当您添加行时，您的表将展开，然后您可以刷新数据透视表（F5，或使用 VBA）。

如果您在 Excel 2003 中，您也可以创建动态命名范围。它稍微复杂一些（而且更丑陋），但如果你被困在旧版本上，我可以引导你完成它。

# ios - 放置在 UIToolbar 中时如何更改 UIBarButtonItem 的标题颜色？

> ID：12586510
> 
> 赞同：0
> 
> 时间：2012-09-25T15:44:10.197
> 
> 标签：ios

我试过设置标题文本属性。Button 是通过使用图标设置的，然后设置 title 属性。图标颜色正确。标题仍然“未着色”

附上截图。![在此处输入图像描述](../Images/a12521eef1b7469cff4087b3d4d11007.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:07:54.977

大卫的建议奏效。这是示例代码：

```
 + (UIImage *) image:(NSString *) imageName withTitle:(NSString *)title {

     UIFont *titleFont = [UIFont boldSystemFontOfSize:10];
     CGSize textSize = [title sizeWithFont:titleFont];

     CGFloat width = MAX(35, textSize.width);
     UIGraphicsBeginImageContextWithOptions(CGSizeMake(width, 35), NO, 0);
     CGContextRef context = UIGraphicsGetCurrentContext();

     UIImage *toolbarImage = [UIImage imageNamed:imageName];
     CGContextSaveGState(context);  {
         CGContextTranslateCTM(context, 0, 35);
         CGContextScaleCTM(context, 1.0, -1.0);
         CGContextDrawImage(context, CGRectMake((width - toolbarImage.size.width) / 2, 14, toolbarImage.size.width, toolbarImage.size.height), toolbarImage.CGImage);
     }
     CGContextRestoreGState(context);

     [title drawInRect:CGRectMake((width - textSize.width) / 2, 22, textSize.width, textSize.height) withFont:titleFont];

     UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();

return image; 
```

}

调整一些框架参数以适合您的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:00:59.243

如果 tintColor 不影响文本颜色，我所知道的唯一解决方案是本质上创建图标和文本的合成图像，然后将其用作按钮图像：

```
UIGraphicsBeginImageContextWithOptions(someSize, NO, 0);
CGContextRef context = UIGraphicsGetCurrentContext();

// draw the image
// Use UIKit NSString additions to draw the text

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# ruby - [...] 在 Ruby 中调用哪个方法？

> ID：12586514
> 
> 赞同：4
> 
> 时间：2012-09-25T15:44:45.103
> 
> 标签：ruby

此代码[`Array::[]`](http://ruby-doc.org/core-2.2.3/Array.html#method-c-5B-5D)使用`1`和作为参数`2`调用：`3`

```
Array[1, 2, 3] #=> [1, 2, 3] 
```

但这似乎没有调用`Array::[]`：

```
[1, 2, 3] #=> [1, 2, 3] 
```

那么，`[...]`在 Ruby 中调用哪个方法呢？

动机：我试图在测试中存根该方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:14:43.403

这是数组的文字语法。这不是消息发送。与绝大多数其他语言一样，Ruby 不允许文字重载。

如果你需要文字重载，你应该使用支持它的语言，比如 Ioke。

# mongoid - rails 和 Mongoid，创建资格系统（将资格嵌入到两个模型中）

> ID：12586515
> 
> 赞同：0
> 
> 时间：2012-09-25T15:44:49.823
> 
> 标签：mongoid, ruby-on-rails-3.2, mongoid3

我正在开发一个小应用程序来显示一些图片。每张图片都可以按 1 到 5 的等级“投票”或“合格”。

只能对已登录的用户进行一次资格认证。

我需要知道每个图像的资格，以及用户设置投票的图像（并知道该投票的价值），所以我创建了这个模型：

```
class Voto
    include Mongoid::Document
    embedded_in :picture
    embedded_in :user
    field :value, :type => Integer
end

class Picture
    include Mongoid::Document
    embeds_many :votos
    embeds_many :comments
    belongs_to  :user
    ...
    ...
end

class User
    include Mongoid::Document
    ...
    ...
    has_many :pictures
    embeds_many :votos
end 
```

但我不知道这是否正确。¿ 我可以将相同的模型（在本例中为 Voto）存储在两个不同的文档（图片和用户）中吗？

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:53:25.983

您可以通过使用多态标志来做到这一点（见[http://mongoid.org/en/mongoid/docs/relations.html#common](http://mongoid.org/en/mongoid/docs/relations.html#common) Polymorphism）

```
class Voto
    include Mongoid::Document
    embedded_in :voteable, , polymorphic: true
    field :value, :type => Integer
end

class Picture
    include Mongoid::Document
    embeds_many :votos, as: :voteable
    embeds_many :comments
    belongs_to  :user
    ...
    ...
end

class User
    include Mongoid::Document
    ...
    ...
    has_many :pictures
    embeds_many :votos, as: :voteable
end 
```

# javascript - Javascript 闭包——将对象返回给调用函数

> ID：12586518
> 
> 赞同：0
> 
> 时间：2012-09-25T15:45:04.770
> 
> 标签：javascript, scope, closures, angularjs

我正在将 Cordova 和 Angular 用于一个小型 Web 应用程序。下面是实现过程：

1.  `LogsModel`被建造
2.  `queryLogs()`叫做
3.  `getLogsArray()`被调用——此时，即使在函数定义中，也`console.log(this.logs['0'])`返回`undefined`. 我不明白为什么。

* * *

```
LogsModel.prototype.logs = {};

LogsModel.prototype.getLogsArray = function (){
    console.log(this.logs['0']);
    return this.logs;
};

LogsModel.prototype.queryLogs = function (){

    var self = this;

    function getFromDb (tx){
        tx.executeSql('SELECT * FROM DEMO',[],querySuccess,self.query_fail);
    }

    function querySuccess(tx,results){
        var len = results.rows.length;

        for(var i = 0; i < len; i++){

            var log = {
                verb: results.rows.item(i).verb
            };
            self.logs[i]= {
                verb: results.rows.item(i).verb
            };
        }
    }
    this.db = window.openDatabase("Database","1.0","Cordova Demo",200000);
    this.db.transaction(getFromDb,self.transaction_fail);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:28:17.637

`queryLogs`是一个异步任务。开始事务后直接调用`getLogsArray`，数组还不会被填充。

相反，使用从`querySuccess`函数调用的回调来继续处理（例如记录结果）。

# javascript - 解析具有多个子对象的 JSON 对象

> ID：12586526
> 
> 赞同：0
> 
> 时间：2012-09-25T15:45:48.937
> 
> 标签：javascript, jquery, json

```
<script type="text/javascript" src="http://static.stackmob.com/js/2.5.3-crypto-sha1-hmac.js"></script>
<script type="text/javascript">
$j.ajax({
        dataType : 'json',
        url : "/api/core/v2/groups/", //or any other rest call here
        beforeSend: function(xhr) {
            var bytes = Crypto.charenc.Binary.stringToBytes('username' + ":" + 'password');
                    var base64 = Crypto.util.bytesToBase64(bytes);
            xhr.setRequestHeader("Authentication", "Basic " + base64);
        },
        success: function(data, status, xhr) {
            console.log("success!");
            console.log(data);
                        console.log(data[0]);
        }
    }); 
```

的输出`data`是

```
Object
    data: Array[25]
        0: Object
            contentTypes: Array[4]
            creationDate: "2012-05-31T20:21:20.532+0000"
            creator: Object
            description: "A discussion group for anyone interested in amateur radio."
            displayName: "amd-amateur-radio-forum"
            followerCount: 5
            groupType: "OPEN"
            id: 1133
            memberCount: 3
            modificationDate: "2012-06-04T21:23:07.078+0000"
            name: "AMD Amateur Radio Forum"
            resources: Object
            type: "group"
            viewCount: 62
            __proto__: Object
        1: Object
        2: Object
        3: Object 
```

但是当我尝试输出`data[0]`或`data[1]`它们都以`undefined`. 我不确定如何处理这个 JSON 对象。

的输出`alert(data)`是

```
[Object object] 
```

所以我假设它是一个格式正确的 JSON 对象。

这是输出 JSON.stringify(data)

```
{"data":[{"contentTypes":["discussions","documents","blog","projects"],"memberCount":3,"creator":{"name":"firstname lastname","level":{"name":"Level I","description":"null","points":7,"resources":{"image":{"ref":"http://connect-dev.amd.com/api/core/v2/images/status/statusicon-47.gif","allowed":["GET"]}}},"username":"dkyle","email":"david.kyle@amd.com","firstName":"firstname","lastName":"lastname","resources":{"self":{"ref":"http://connect-dev.amd.com/api/core/v2/users/4183","allowed":["GET"]},"avatar":{"ref":"http://connect-dev.amd.com/api/core/v2/users/4183/avatar","allowed":["GET"]}},"id":4183},"groupType":"OPEN","name":"AMD Amateur Radio Forum","displayName":"amd-amateur-radio-forum","description":"A discussion group for anyone interested in amateur radio.","followerCount":5,"resources":{"projects":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1133/projects","allowed":["GET"]},"invites":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1133/invites","allowed":["POST"]},"documents":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1133/documents","allowed":["GET","POST"]},"html":{"ref":"http://connect-dev.amd.com/groups/amd-amateur-radio-forum","allowed":["GET"]},"self":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1133","allowed":["GET"]},"blog":{"ref":"http://connect-dev.amd.com/api/core/v2/blogs/1368","allowed":["GET"]},"members":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1133/members","allowed":["GET"]},"discussions":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1133/discussions","allowed":["GET","POST"]}},"id":1133,"type":"group","creationDate":"2012-05-31T20:21:20.532+0000","modificationDate":"2012-06-04T21:23:07.078+0000","viewCount":62},{"contentTypes":["discussions","documents","blog","projects"],"memberCount":34,"creator":{"name":"firstname lastname","level":{"name":"Level I","description":"null","points":24,"resources":{"image":{"ref":"http://connect-dev.amd.com/api/core/v2/images/status/statusicon-47.gif","allowed":["GET"]}}},"username":"username","email":"kristi.fontenot@amd.com","firstName":"firstname","lastName":"lastname","resources":{"self":{"ref":"http://connect-dev.amd.com/api/core/v2/users/4291","allowed":["GET"]},"avatar":{"ref":"http://connect-dev.amd.com/api/core/v2/users/4291/avatar","allowed":["GET"]}},"id":4291},"groupType":"OPEN","name":"AMD Community Corps Connect (Matching Gifts, GIVE and Volunteerism)","displayName":"amd-community-corps-connect-matching-gifts-give-and-volunteerism","description":"Through this community, employees are be able to support the causes they care about most in ways thev have never been able to before. Not only that, employees will be able to connect and network with fellow AMD employees in a way that allows everyone connected to each other to volunteer together, while providing the ability to track volunteer hours, make charitable contributions and request a match all in the same tool.  \r\n\r\nhttp://amd.yourcause.com \r\n\r\n","followerCount":55,"resources":{"projects":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1074/projects","allowed":["GET"]},"invites":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1074/invites","allowed":["POST"]},"documents":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1074/documents","allowed":["GET","POST"]},"html":{"ref":"http://connect-dev.amd.com/groups/amd-community-corps-connect-matching-gifts-give-and-volunteerism","allowed":["GET"]},"self":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1074","allowed":["GET"]},"blog":{"ref":"http://connect-dev.amd.com/api/core/v2/blogs/1267","allowed":["GET"]},"members":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1074/members","allowed":["GET"]},"discussions":{"ref":"http://connect-dev.amd.com/api/core/v2/groups/1074/discussions","allowed":["GET","POST"]}},"id":1074,"type":"group","creationDate":"2012-05-07T19:24:31.880+0000","modificationDate":"2012-09-07T02:00:51.821+0000","viewCount":544} 
```

它实际上比那更长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T18:27:24.337

如果您要输出字符串化数据，并且其中有一个名为 data 的数组，那么您需要执行 data.data[0] 而不是 data[0]。

如果您说：

```
success: function(result, status, xhr){
  var data = result.data; 
```

然后 data[0] 就可以了。

# c++ - VS 2010 Build 中的 ATL DCOM 对象创建失败

> ID：12586536
> 
> 赞同：1
> 
> 时间：2012-09-25T15:46:17.860
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, atl, dcom

我们有一个 DCOM 服务器，它在 VS 2008 构建的 Win 7 64 位中运行良好。在 VS 2010 构建的情况下，客户端对象创建失败并显示“服务器创建失败”错误消息。类定义如下。

调试时，我们看到消息 id 为 1024 的消息，在消息循环中已收到，但未`DispatchMessage`路由消息，以创建 `CICEConnect`对象。在 VS 2008 构建中，`DispatchMessage`将调用路由到创建`CICEConnect`对象。我相信这会造成问题

服务器应用程序在客户端尝试创建对象时被声明。DCOM 服务器正在本地机器上运行

如何进一步调试问题？

```
void RunMessageLoop() throw()
      {
            MSG msg;
            while (GetMessage(&msg, 0, 0, 0) > 0)
            {
                  TranslateMessage(&msg);
                  DispatchMessage(&msg);
            }
      } 
```

* * *

```
class ATL_NO_VTABLE CICEConnect :
      public CComObjectRootEx<CComMultiThreadModel>,
      public CComCoClass<CICEConnect, &CLSID_ICEConnect>,
      public IDispatchImpl<IICEConnect, &IID_IICEConnect, &LIBID_ICEConnectServerLib, /*wMajor =*/ 1, /*wMinor =*/ 0>
{
public:
      CICEConnect()
      {
      }
      DECLARE_CLASSFACTORY_SINGLETON(CICEConnect)
DECLARE_REGISTRY_RESOURCEID(IDR_ICECONNECT)

BEGIN_COM_MAP(CICEConnect)
      COM_INTERFACE_ENTRY(IICEConnect)
      COM_INTERFACE_ENTRY(IDispatch)
END_COM_MAP()

}; 
```

* * *

如果我跳过`p->Release();`以下内容`RegisterClassObject`，则 COM 对象创建成功。

```
struct _ATL_OBJMAP_ENTRY30
{
       HRESULT WINAPI RegisterClassObject(
              _In_ DWORD dwClsContext,
              _In_ DWORD dwFlags)
       {
              IUnknown* p = NULL;
              if (pfnGetClassObject == NULL)
                     return S_OK;
              HRESULT hRes = pfnGetClassObject(pfnCreateInstance, __uuidof(IUnknown), (LPVOID*) &p);
              if (SUCCEEDED(hRes))
                     hRes = CoRegisterClassObject(*pclsid, p, dwClsContext, dwFlags, &dwRegister);
              if (p != NULL)
                     p->Release();
              return hRes;
       }
// Added in ATL 3.0
       void (WINAPI *pfnObjectMain)(_In_ bool bStarting);
}; 
```

下面给出了用于创建 COM 对象的代码

```
int _tmain(int argc, _TCHAR* argv[])
{
      CoInitializeEx(NULL,COINIT_MULTITHREADED);

                      COSERVERINFO server;
                      memset(&server,0,sizeof(COSERVERINFO));
                      COAUTHINFO athn;
                      ZeroMemory(&athn, sizeof(COAUTHINFO));
                      athn.dwAuthnLevel = RPC_C_AUTHN_LEVEL_NONE;
                      athn.dwAuthnSvc = RPC_C_AUTHN_WINNT;
                      athn.dwAuthzSvc = RPC_C_AUTHZ_NONE;
                      athn.dwCapabilities = EOAC_NONE;
                      athn.dwImpersonationLevel = RPC_C_IMP_LEVEL_IMPERSONATE;
                      athn.pAuthIdentityData = NULL;
                      athn.pwszServerPrincName = NULL;
                      server.pAuthInfo = &athn;
                      server.pwszName = L"\\\\localhost";
                      server.dwReserved1 = 0;
                      server.dwReserved2 = 0;
                      MULTI_QI mqi = {&IID_IICEConnect, NULL, S_OK};

                      // Access the PMC on the given machine
                        HRESULT hRes = CoCreateInstanceEx(CLSID_ICEConnect,NULL,
                                        CLSCTX_LOCAL_SERVER | CLSCTX_REMOTE_SERVER,&server,1,&mqi);
      return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:25:29.057

你不认为这`DispatchMessage`是一个系统调用，它的实现超出了 VS2008 和 VS2010 的控制吗？也许您没有处理正确的消息来创建控件！例如，SDK 中的更改可能会产生您的错误。ID 为 1024 的消息是`WM_USER`，系统无法正常处理。处理此消息取决于用户代码

# css - 使用 CSS 将 listitem.text 放置在单选按钮列表中的单选按钮上

> ID：12586539
> 
> 赞同：0
> 
> 时间：2012-09-25T15:46:32.807
> 
> 标签：css

我正在使用单选按钮，因为它使绑定项目和控制动态事件变得非常容易。

我的问题是隐藏 ListItem.Text 左侧或右侧的 RadioButtonList ListItem“圆圈”。

我将每个 ListItem.Text 属性设置为 HTML`<img>.`

我希望 RadioButtonList 仅显示 RadioButtonList 列表中的 ListItem.Text 属性，而旁边没有单选按钮圆圈。经过一番研究，我意识到我认为不可能隐藏单选按钮的 ListItem 圆圈，而不隐藏整个单选按钮列表。

所以我的第二个选择是通过 CSS 将 ListItem.Text 放在 RadioButtonList ListItem“圆圈”的顶部。这是我到目前为止所尝试的，但我担心我的 CSS 技能是松懈的 :(

```
noPizzaMod.Text = "<img src=\"image.png \" />";
noPizzaMod.Attributes.CssStyle.Add("float", "left");
noPizzaMod.Attributes.CssStyle.Add("padding","0 1em");
noPizzaMod.Attributes.CssStyle.Add("text-align", "center");
rdo_pizzamods.Items.Add(noPizzaMod); 
```

结果：刚刚在单选按钮 ListItem Circle 的左侧添加了填充。

同样，手头的任务是将 ListItem.Text（图片元素）浮动到 RadioButtonList ListItem“圆圈”的顶部

感谢您的时间！

PS：我尝试过的另一件事是使用 JQuery 来显示：无单选按钮列表项，但当然会隐藏文本以及整个单选按钮列表:(

作为最后的手段，我可​​以切换到复选框的切换按钮扩展器，但这将包括重新设计我们的显示机制。希望有一个简单的解决方案，并且其中一位大师可以指出我！

编辑：

我只是有一个 asp:Panel，我将 RadioButtonList 动态添加到后面的代码中。

```
<asp:Panel ID="pnl_pizzamods" runat="server"></asp:Panel> 
```

像这样

```
ListItem PizzaMod = new ListItem();
noPizzaMod.Text = "<img src=\"image.png \" />";
noPizzaMod.Attributes.CssStyle.Add("float", "left");
noPizzaMod.Attributes.CssStyle.Add("padding","0 1em");
noPizzaMod.Attributes.CssStyle.Add("text-align", "center");
rdo_pizzamods.Items.Add(noPizzaMod);
pnl_pizzamods.Controls.Add(rdo_pizzamods); 
```

我还在后台添加了自定义动态事件处理程序和许多其他 mojo，这使得 RadioButtonList 数据绑定对我来说很容易控制。我敢肯定它不会影响视觉布局！再一次感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:12:05.830

您是否尝试过简单地隐藏单选按钮？

```
input[type='radio'] { visibility: hidden; } 
```

小提琴：http: [//jsfiddle.net/kboucher/8GaV5/](http://jsfiddle.net/kboucher/8GaV5/)

# java - 日期值格式错误

> ID：12586543
> 
> 赞同：2
> 
> 时间：2012-09-25T15:46:45.160
> 
> 标签：java, parsing, simpledateformat

在我的代码中解析平面文件后，我试图将`DateTime`平面文件中存在的字符串值转换为对象。`Date`

我已经编写了代码来做到这一点，但是当我格式化日期时，它总是给我一个超过 1 天的指定值的日期，有时它会增加 5:30。

下面是代码：

```
 DateFormat f = new SimpleDateFormat("EEE MMM dd HH:mm:ss zz yyyy");
    Date date = f.parse("Tue Aug 23 20:00:03 PDT 2011");
    System.out.println("---date----" + date); 
```

上面的输出是

```
 ---date----Wed Aug 24 08:30:03 IST 2011 
```

你能告诉我这里有什么问题吗？我在`SimplaDateFormat`课堂上使用的模式有问题还是代码有问题。很长一段时间以来，我一直在为此挠头。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T15:48:10.510

> 你能告诉我这里有什么问题吗？

当然。您实际上是在调用`date.toString()`，它不知道用于解析原始文本值的*任何*内容。`SimpleDateFormat`A`Date`只是*时间*的一瞬间。它没有每个实例格式的概念。此外，它不知道时区。您在 PDT 中给出了一个值，然后对其进行了解析......当您*打印*它时，它使用的是系统本地时区 (IST)。`Date.toString` *总是*这样。

如果您想以`Date`特定方式格式化 a，在特定时区使用特定格式，请调用`DateFormat.format`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:48:51.117

您的系统时区不同。输出显示 IST - 或印度标准时间，与 PDT 相差 12.5 小时。该代码正确解析了给定的日期，即 PDT (UTC -7) 并打印出 IST (UTC +5h30)。

Java 将日期存储为 UTC 日期。因此，当您解析 PDT 日期时，Java 会将其转换为 UTC 并将其作为 UTC 时间戳在内部存储。当您打印时，如果您不指定时区，它将默认为系统时区，在您的情况下，这似乎是 IST。

要指定准确的时区，请在 SimpleDateFormat 中指定：

```
DateFormat f = new SimpleDateFormat("EEE MMM dd HH:mm:ss zz yyyy");
f.setTimeZone(TimeZone.getTimeZone("PDT"));
Date date = f.parse("Tue Aug 23 20:00:03 PDT 2011");
System.out.println("---date----" + f.format(date)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:16:37.670

因为您没有格式化`date`. 看例子

```
 public static void main(String[] args){
    Locale currentLocale = Locale.US;
    DateFormat f = new SimpleDateFormat("EEE MMM dd HH:mm:ss zz yyyy", currentLocale);
    Date date = null;
    Date today;
    try {
      today = new Date();
      String result = f.format(today);
      System.out.println("Locale: " + currentLocale.toString());
      System.out.println("Result: " + result);
      date = f.parse("Tue Aug 23 20:00:03 PDT 2011");
    } catch (ParseException e) {
      e.printStackTrace();  
    }
    System.out.println("---date----" + f.format(date));
  } 
```

将输出

```
Locale: en_US
Result: Tue Sep 25 19:12:38 EEST 2012
---date----Tue Aug 23 20:00:03 PDT 2011 
```

现在，你有一些修改的代码

```
 public static void main(String[] args){
    Locale currentLocale = Locale.US;
    DateFormat f = new SimpleDateFormat("EEE MMM dd HH:mm:ss zz yyyy", currentLocale);
    DateFormat f2 = new SimpleDateFormat("EEE MMM dd HH:mm:ss zz yyyy", currentLocale);
    Date date = null;
    Date today;
    try {
      today = new Date();
      String result = f.format(today);
      System.out.println("Locale: " + currentLocale.toString());
      System.out.println("Result: " + result);
      date = f.parse("Tue Aug 23 20:00:03 PDT 2011");
      System.out.println("---date----" + f.format(date));
      System.out.println("---date----" + f2.format(date));

    } catch (ParseException e) {
      e.printStackTrace();
    }
  } 
```

输出到

```
Locale: en_US
Result: Tue Sep 25 20:42:10 EEST 2012
---date----Tue Aug 23 20:00:03 PDT 2011
---date----Wed Aug 24 06:00:03 EEST 2011 
```

即使指定了模式，似乎`SimpleDateFormat`也不关心时区。`'z'`它在解析输入时设置时区。这就是我可以描述这种奇怪行为的方式。然后使用`'z'`模式似乎已经过时并导致不可预测的结果。

所以设置`TimeZone`将解决问题

```
f2.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles")); 
```

# python - ValueError: 不支持的格式字符 ']' (0x5d)

> ID：12586544
> 
> 赞同：1
> 
> 时间：2012-09-25T15:46:50.480
> 
> 标签：python, bots, irc

我正在尝试用python制作irc bot。该机器人将解析 XML 并将其内容粘贴到频道上。这是我的代码的一部分

```
f = open("1.xml")
data = f.read()
f.close()
domi = parseString(data)
attackerbartag = domi.getElementsByTagName('bar')[0].toxml()
attackerbar = attackerbartag.replace('<bar>','').replace('</bar>','')
attackerbar = round(float(attackerbar)2)
defenderbar = 100 - attackerbar

attackertag = domi.getElementsByTagName('name')[1].toxml()
attacker = attackertag.replace('<name>','').replace('</name>','')

defendertag = domi.getElementsByTagName('name')[42].toxml()
defender = defendertag.replace('<name>','').replace('</name>','')

attackerpointtag = domi.getElementsByTagName('points')[1].toxml()
attackerpoint = attackerpointtag.replace('<points>','').replace('</points>','')

defenderpointtag = domi.getElementsByTagName('points')[6].toxml()
defenderpoint = defenderpointtag.replace('<points>','').replace('</points>','')

attackerdomtag = domi.getElementsByTagName('domination')[0].toxml()
attackerdom = attackerdomtag.replace('<domination>','').replace('</domination>','')

defenderdomtag = domi.getElementsByTagName('domination')[4].toxml()
defenderdom = defenderdomtag.replace('<domination>','').replace('</domination>','')

result = 'Div.1 :: %s [ %s p ] [ %s% ] [ %s Dom ] <--> [ %s Dom ] [ %s% ] [ %s p ] %s ::' % (attacker, attackerpoint, attackerbar, attackerdom, defenderdom, defenderbar, defenderpoint, defender)
return result 
```

我得到了`ValueError: unsupported format character ']' (0x5d).`

我很确定我已经关闭了所有 [ ]

我尝试用 () 更改 [ ] 并且错误是`ValueError: unsupported format character ')' (0x5d)`

谁能告诉我我在哪里制作了嘘声？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:48:52.307

您已经两次 put `[ %s% ]`，其中包括 . 之后的额外 % `s`。Python 将其解释为`%]`，这是无效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:49:08.670

那里有两个`%`字符不是要格式化的字符。您需要将其加倍以使 Python 忽略它：

```
result = 'Div.1 :: %s [ %s p ] [ %s%% ] [ %s Dom ] <--> [ %s Dom ] [ %s%% ] [ %s p ] %s ::' % (attacker, attackerpoint, attackerbar, attackerdom, defenderdom, defenderbar, defenderpoint, defender) 
```

# android - Android PopupWindow 关闭问题

> ID：12586547
> 
> 赞同：1
> 
> 时间：2012-09-25T15:47:04.350
> 
> 标签：android

我已经阅读了很多关于这个常见问题的论坛，但无法在我的应用程序中解决它。在我的 android 应用程序中，我需要显示一个弹出窗口，其中有一个具有编辑文本和保存按钮的表单。当用户单击保存按钮时，弹出窗口应刷新。我已经尝试过驳回方法，但是:-(

Java代码：

```
 LayoutInflater inflater = (LayoutInflater) ListActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final View popUp_layout = inflater.inflate(R.layout.popup_example,(ViewGroup) findViewById(R.id.popup_form_add_quote));
        final PopupWindow popUp = new PopupWindow(inflater.inflate(R.layout.popup_example, null, false), 430, 300, true);
        popUp.setBackgroundDrawable(new BitmapDrawable());
        popUp.setOutsideTouchable(true);
 //     popUp.showAtLocation(popUp_layout, Gravity.CENTER, 10, 10);
        Button save_Button = (Button) popUp_layout.findViewById(R.id.save_quote_button);
        AlertDialog.Builder builder = new AlertDialog.Builder(this).setView(popUp_layout); 
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
        save_Button = (Button) alertDialog.findViewById(R.id.save_quote_button);
        if (save_Button != null) {
            save_Button.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    System.out.println("Save button clicked.");
                        popUp.dismiss();

                }
            });
        } 
```

**xml/widget_info.xml**

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
android:initialLayout="@layout/widget_layout"
android:minHeight="82dp"
android:minWidth="246dp"
android:updatePeriodMillis="1000" > 
```

**可绘制 mdpi/myshape.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
<stroke android:width="2dp" vandroid:color="#FFFFFFFF" />

<gradient android:angle="225" android:endColor="#DD2ECCFA" android:startColor="#DD000000" />

<corners android:bottomLeftRadius="7dp" android:bottomRightRadius="7dp" android:topLeftRadius="7dp" android:topRightRadius="7dp" /> 
```

**布局/popup_example.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/popup_form_add_quote"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#C0CAE0"
android:orientation="vertical"
android:padding="10dip" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:text="Quote" />

<EditText
    android:id="@+id/quote_text"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:gravity="left"
    android:layout_weight="0.80"
    android:ems="10"
    android:inputType="textMultiLine"
    android:lines="4"
    android:maxLines="4" >

    <requestFocus />
</EditText>

<CheckBox
    android:id="@+id/quote_status_checkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Enable/Disable" />

<Button
    android:id="@+id/save_quote_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Save" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:52:58.307

使用这个代替 AlertDialog.Builder 类而不是股票 Android 类。

```
package alt.android.os;

import android.annotation.SuppressLint;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.view.View;
import android.view.View.OnClickListener;

@SuppressLint("NewApi") public class CustomAlertDialogBuilder extends AlertDialog.Builder {
    /**
     * Click listeners
     */
    private DialogInterface.OnClickListener mPositiveButtonListener = null;
    private DialogInterface.OnClickListener mNegativeButtonListener = null;
    private DialogInterface.OnClickListener mNeutralButtonListener = null;

    /**
     * Buttons text
     */
    private CharSequence mPositiveButtonText = null;
    private CharSequence mNegativeButtonText = null;
    private CharSequence mNeutralButtonText = null;

    private DialogInterface.OnDismissListener mOnDismissListener = null;

    private Boolean mCancelOnTouchOutside = null;

    public CustomAlertDialogBuilder(Context context) {
        super(context);
    }

    public CustomAlertDialogBuilder setOnDismissListener (DialogInterface.OnDismissListener listener) {
        mOnDismissListener = listener;
        return this;
    }

    @Override
    public CustomAlertDialogBuilder setNegativeButton(CharSequence text, DialogInterface.OnClickListener listener) {
        mNegativeButtonListener = listener;
        mNegativeButtonText = text;
        return this;
    }

    @Override
    public CustomAlertDialogBuilder setNeutralButton(CharSequence text, DialogInterface.OnClickListener listener) {
        mNeutralButtonListener = listener;
        mNeutralButtonText = text;
        return this;
    }

    @Override
    public CustomAlertDialogBuilder setPositiveButton(CharSequence text, DialogInterface.OnClickListener listener) {
        mPositiveButtonListener = listener;
        mPositiveButtonText = text;
        return this;
    }

    @Override
    public CustomAlertDialogBuilder setNegativeButton(int textId, DialogInterface.OnClickListener listener) {
        setNegativeButton(getContext().getString(textId), listener);
        return this;
    }

    @Override
    public CustomAlertDialogBuilder setNeutralButton(int textId, DialogInterface.OnClickListener listener) {
        setNeutralButton(getContext().getString(textId), listener);
        return this;
    }

    @Override
    public CustomAlertDialogBuilder setPositiveButton(int textId, DialogInterface.OnClickListener listener) {
        setPositiveButton(getContext().getString(textId), listener);
        return this;
    }

    public CustomAlertDialogBuilder setCanceledOnTouchOutside (boolean cancelOnTouchOutside) {
        mCancelOnTouchOutside = cancelOnTouchOutside;
        return this;
    }

    @Override
    public AlertDialog create() {
        throw new UnsupportedOperationException("CustomAlertDialogBuilder.create(): use show() instead..");
    }

    @Override
    public AlertDialog show() {
        final AlertDialog alertDialog = super.create();

        DialogInterface.OnClickListener emptyOnClickListener = new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) { }
        };

        // Enable buttons (needed for Android 1.6) - otherwise later getButton() returns null
        if (mPositiveButtonText != null) {
            alertDialog.setButton(AlertDialog.BUTTON_POSITIVE, mPositiveButtonText, emptyOnClickListener);
        }

        if (mNegativeButtonText != null) {
            alertDialog.setButton(AlertDialog.BUTTON_NEGATIVE, mNegativeButtonText, emptyOnClickListener);
        }

        if (mNeutralButtonText != null) {
            alertDialog.setButton(AlertDialog.BUTTON_NEUTRAL, mNeutralButtonText, emptyOnClickListener);
        }

        // Set OnDismissListener if available
        if (mOnDismissListener != null) {
            alertDialog.setOnDismissListener(mOnDismissListener);
        }

        if (mCancelOnTouchOutside != null) {
            alertDialog.setCanceledOnTouchOutside(mCancelOnTouchOutside);
        }

        alertDialog.show();

        // Set the OnClickListener directly on the Button object, avoiding the auto-dismiss feature
        // IMPORTANT: this must be after alert.show(), otherwise the button doesn't exist..
        // If the listeners are null don't do anything so that they will still dismiss the dialog when clicked
        if (mPositiveButtonListener != null) {
            alertDialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    mPositiveButtonListener.onClick(alertDialog, AlertDialog.BUTTON_POSITIVE);
                }
            });
        }

        if (mNegativeButtonListener != null) {
            alertDialog.getButton(AlertDialog.BUTTON_NEGATIVE).setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    mNegativeButtonListener.onClick(alertDialog, AlertDialog.BUTTON_NEGATIVE);
                }
            });
        }

        if (mNeutralButtonListener != null) {
            alertDialog.getButton(AlertDialog.BUTTON_NEUTRAL).setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    mNeutralButtonListener.onClick(alertDialog, AlertDialog.BUTTON_NEUTRAL);
                }
            });
        }

        return alertDialog;
    }   
} 
```

# android - 安卓漏洞？在正确项目的项目动画期间数据库更新后，错误的行开始在 ListView 上设置动画

> ID：12586550
> 
> 赞同：1
> 
> 时间：2012-09-25T15:47:17.047
> 
> 标签：android, android-listview, android-contentprovider, android-loadermanager

我有一个从数据库中获取数据的**ListView 。**单击时，每一行都会向右和向后移动，如下所示：

```
@Override
    public void onItemClick(AdapterView<?> av, View v, int pos, long id) {

...
          pos = pos - mList.getFirstVisiblePosition();
          mList.getChildAt(pos).startAnimation(anim );
...} 
```

动画持续约 1 秒，是：向右滑出然后向后滑

**如果动画期间没有与 DB 交互，这部分工作正常**

现在，列表中的每个项目在 DB 中都有一个计数器。每当用户单击列表中的项目时，应在 DB 中增加计数器，并且每个项目的 ListView 上也会直观地呈现。

因此，通过 ContentProvider 可以看到 DB

**这是问题：**

每当我单击一个项目时，动画就会开始，然后通过 ContentResolver 对 DB 执行更新。问题是动画从正确的元素开始，但就在它开始后突然停止并在列表中的其他元素上结束。

所以如果我在列表中有四个元素

```
----------1----------
----------2----------
----------3----------
----------4---------- 
```

然后我单击元素 1，数字 1 开始向右滑动，但在大约 200 毫秒后它停止并且元素 4 继续从 1 在动画的其余部分停止的地方开始动画

如果我按 2 也可以重现，但这次数字 3 完成动画。如果 3 则 2 完成。如果我点击 4 然后 1。

假设只有 4 个项目是可见的，我可以通过整个列表重现它。

它总是相反的元素。我在onItemClick 中调试位置，但它总是正确的。

**重要** 当我注释掉在数据库中进行更新的代码时，一切正常。这表明当 ListView 的 SimpleCursorAdapter 在动画期间通过数据库中的 LoaderManager 使用新的 Cursor 刷新时会出现问题。

**我做了什么尝试** 使用 CommonsWare Loaderex 而不是 ContentProvider。它给出了相同的效果。

**代码片段**

```
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
  return new CursorLoader(this.getActivity(), MyContentProvider.CONTENT_URI,
            new String[]{}, "uid>0 AND distance<80000", null, "distance LIMIT 100");
}

public void onLoadFinished(Loader<Cursor> ld, Cursor c) {
    merchantAdapter.swapCursor(c);
} 
```

OnItemClick 有这个代码：

```
ContentResolver cr = getActivity().getContentResolver();
                ContentValues cv = new ContentValues();
                cv.put("counter", counter);
                Uri mUri = ContentUris.withAppendedId(MyContentProvider.CONTENT_URI, uid);
                cr.update(mUri, cv, null, null); 
```

还有什么让我烦恼的是，我无法让 LoaderManager 自动为我更新列表，所以在上面 cr.update(...

我这样做是为了在每次更新后刷新列表

```
getActivity()).lm.getLoader(0).forceLoad(); 
```

动画问题可能是Android错误吗？或者我错过了什么？

**目前解决这个问题的想法** 我想我的选择是阻止动画持续时间的点击，并在动画持续时间过去后在处理程序中进行 cr.update，这样刷新就不会影响动画。

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:19:12.940

**我现在可以确认：** 该行为仅发生在我的 2.2 设备上。并且可以复制。它在 Android 4.1 设备上工作正常（当 bg 中的行更新时动画正确完成）并且可以重现。

**我目前对此的解决方案是** 因为我想支持 2.2 设备。我创建了这个动画的监听器。完成`anim`后，我对 db 进行更新。我还阻止了动画持续时间的 UI（大约 300 毫秒，所以很好）

注意 - 这看起来像 Android SDK 问题

**至于更新问题和使用 forceLoad** 在我的内容提供程序实现中，我必须在我的查询方法中添加它：

```
cursor.setNotificationUri(getContext().getContentResolver(), uri); 
```

正在将此 uri 注册到 ContentResolver。现在它可以在不使用 forceLoad 的情况下正常工作

# php - 特色图片未在 WordPress 中显示

> ID：12586551
> 
> 赞同：1
> 
> 时间：2012-09-25T15:47:34.203
> 
> 标签：php, wordpress

我正在尝试在 Wordpress 中显示特色图片，我已经上传了图片（将其设为最小的图片）但是当我查看博客列表视图（category.php）时，我只得到了博客文章标题，没有图片。

有人知道如何显示图像吗？检查了来源，根本没有显示图像。

希望有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:39:48.210

除了在 WP admin 中设置特色图像外，您还需要在模板文件中的某处渲染代码。像这样的东西：

```
if ( has_post_thumbnail( get_the_ID() ) ) {
    echo get_the_post_thumbnail( get_the_ID() );
} 
```

我在我的`header.php`主题文件中使用此代码，但您可能更喜欢在内部`page.php`或其他地方使用它（`category.php`在您的情况下似乎合适）。

查看文档以获取更改尺寸、添加类属性`<img/>`等到生成的标签的帮助。

[http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail](http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail)

# visual-studio-2012 - 关闭visual studio 2012智能重命名

> ID：12586552
> 
> 赞同：1
> 
> 时间：2012-09-25T15:47:36.643
> 
> 标签：visual-studio-2012

我想在 2012 年关闭智能重命名功能。[http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097403](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097403)

这可能吗？

# c# - 在 ASP.NET Web API“PUT”控制器操作中引发异常不一致

> ID：12586553
> 
> 赞同：0
> 
> 时间：2012-09-25T15:47:37.313
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

有谁知道为什么在 ASP.NET WebAPI 的控制器中的 PUT 操作方法中引发异常的行为会与任何其他操作和动词类型不同？

基本上我有下面的代码（我通常有一个全局注册的异常过滤器，但我已经禁用它以确保它不是原因）。

```
public class JourneysController : ApiController
{
    private IJourneyRepository repository = null;

    public JourneysController(IJourneyRepository repository)
    {
        this.repository = repository;
    }

    public async Task<Journey> GetById(string id)
    {
        throw new BusinessException("test1");

        var item = await repository.Get(id);
        if (item == null) throw new HttpResponseException(HttpStatusCode.NotFound);
        return item;
    }

    public async Task<HttpResponseMessage> Post(HttpRequestMessage request, [FromBody]Journey value)
    {
        throw new BusinessException("test2");

        value = await repository.Add(value);

        var response = request.CreateResponse<Journey>(HttpStatusCode.Created, value);

        string uri = Url.Link("DefaultApi", new { id = value.Id });
        response.Headers.Location = new Uri(uri);
        return response;
    }

    public async void Put(string id, [FromBody]Journey value)
    {
        throw new BusinessException("test3");

        value.Id = id;
        if (!await repository.Update(value)) throw new HttpResponseException(HttpStatusCode.NotFound);
    }

    public HttpResponseMessage Delete(string id)
    {
        throw new BusinessException("test4");

        repository.Remove(id);
        return new HttpResponseMessage(HttpStatusCode.NoContent);
    }
} 
```

当我执行（使用 Chrome 高级 REST 客户端）GET、POST 和 DELETE 动词时，我会得到如下所示的有效负载（无法从客户端复制/粘贴）：

```
500 Internal Server Error 

Date: Tue, 25 Sep 2012 15:37:56 GMT 
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Content-Length: 813 
Pragma: no-cache 

{
    "Message": "An error has occurred.",
    "ExceptionMessage": "test4",
    "ExceptionType": "KieranBenton.LeaveNow.Services.Model.BusinessException",
    "StackTrace": " <snip>"
} 
```

但是，PUT 操作返回给我一个黄色的死亡有效负载屏幕，例如：

```
<span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>

        <h2> <i>test3</i> </h2></span>

        <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

        <b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

        <b> Exception Details:    </b>KieranBenton.LeaveNow.Services.Model.BusinessException: test3 
```

有没有人知道为什么会发生这种情况，或者我是否真的偶然发现了一个错误？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:32:22.157

一个指导方针`async`是[避免`async void`](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。

`async`同步方法返回的等价物`void`是`async`方法返回`Task`。`async void`仅存在以便事件处理程序可能是`async`.

正如您所注意到的，异常处理是不同的。从 an 引发的任何异常`async void`都直接发送到`SynchronizationContext`方法启动时的当前。这对于事件处理程序来说是很自然的，但在其他情况下会令人困惑。

ASP.NET[建立一个`SynchronizationContext`表示当前 HTTP 请求的](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)，因此方法中的任何异常`async void`都不会传递给运行控制器的 WebAPI 代码；它们通过 WebAPI 框架直接传递到 ASP.NET 请求上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:55:00.437

我找到了答案:)

这是因为我的 PUT 方法是唯一一个标记为 async void 的方法 - 如果我将其更改为 async Task 那么它工作正常（毫无疑问，因为管道的其余部分可以检测到抛出的异常被包装在 Task 中）。

越来越多的 async void 似乎是一个非常糟糕的主意！

# macos - 从 Cocoa 应用程序控制交互式命令行实用程序 - ptys 问题

> ID：12586555
> 
> 赞同：6
> 
> 时间：2012-09-25T15:47:45.967
> 
> 标签：macos, cocoa, grand-central-dispatch, nstask, pty

## 我正在尝试做的事情

我的 Cocoa 应用程序需要运行一堆命令行程序。其中大部分是非交互式的，所以我用一些命令行参数启动它们，它们做他们的事情，输出一些东西并退出。其中一个程序是交互式的，因此它会向标准输出输出一些文本和提示，然后期待标准输入上的输入，并且这种情况一直持续到您向其发送退出命令。

## 什么有效

仅将大量数据转储到标准输出然后终止的非交互式程序相对来说是微不足道的：

*   `NSPipe`为 stdout/stdin/stderr创建s
*   `NSTask`使用这些管道启动

那么，要么

*   让`NSFileHandle`管道的另一端读取所有数据，直到流结束，并在任务结束时一次性处理它

或者

*   从输出管道的另一端获取`-fileDescriptor`s 。`NSFileHandle`
*   将文件描述符设置为使用非阻塞模式
*   使用每个文件描述符创建一个 GCD 调度源`dispatch_source_create(DISPATCH_SOURCE_TYPE_READ, ...`
*   恢复调度源并使用它处理它向您抛出的数据`read()`
*   继续进行，直到任务结束并且管道文件描述符报告 EOF（`read()`报告读取 0 字节）

## 什么不起作用

对于交互式工具，这两种方法都完全失效。显然我不能等到程序退出，因为它位于命令提示符下，除非我告诉它，否则永远不会退出。另一方面，`NSPipe`缓冲数据，因此您以缓冲区大小的块接收它，除非 CLI 程序碰巧显式地刷新管道，而在我的情况下则没有。初始命令提示符比缓冲区大小小得多，所以我什么也没有收到，它就在那里。所以`NSPipe`也是不行的。

经过[一番研究](http://www.cocoabuilder.com/archive/cocoa/186092-nstask-troubles.html)，我确定我需要使用**伪终端**(pty) 来代替 NSPipe。不幸的是，除了让它正常工作之外，我什么都没有。

## 我试过的

我创建了一个像这样的 pty，而不是 stdout 管道：

```
struct termios termp;
bzero(&termp, sizeof(termp));
int res = openpty(&masterFD, &slaveFD, NULL, &termp, NULL); 
```

这给了我两个文件描述符；我把它`slaveFD`交给一个`NSFileHandle`，它被传递给`NSTask`stdout 或 stdout 和 stdin 。然后我尝试从主端进行通常的异步读取。

如果我在终端窗口中运行我正在控制的程序，它首先输出 2 行文本，一行 18 字节长，包括换行符，一个 22 字节长，命令提示符没有换行符。在这 40 个字节之后，它等待输入。

如果我只是将 pty 用于标准输出，我会从受控程序收到 18 个字节的输出（正好是一行，以换行符结尾），仅此而已。在最初的 18 个字节之后，一切都在那里，没有更多的事件 - GCD 事件源的处理程序不会被调用。

如果我还将 pty 用于标准输入，我通常会收到 19 个字节的输出（上述行加上下一行的一个字符），然后受控程序立即终止。如果我在尝试读取数据之前稍等片刻（或调度噪音会导致短暂的停顿），我实际上会在程序再次立即终止之前获得整个 40 个字节。

### 额外的死胡同

`NSFileHandle`有一次我想知道我的异步读取代码是否有缺陷，所以我使用s 及其`-readInBackgroundAndNotify`方法重新做了所有事情。这与使用 GCD 时的行为相同。（我最初选择 GCD 而不是`NSFileHandle`API，因为在 中似乎没有任何异步写入支持`NSFileHandle`）

## 问题

经过一天多的徒劳尝试，我已经到了这一点，我可以得到某种帮助。我正在尝试做的事情是否存在一些基本问题？为什么将标准输入连接到 pty 会终止程序？我没有关闭 pty 的主端，所以它不应该收到 EOF。撇开标准输入不谈，为什么我只能得到一行的输出？我在 pty 的文件描述符上执行 I/O 的方式有问题吗？我是否正确使用了主从端-控制过程中的主端，NSTask中的从端？

### 我没试过的

到目前为止，我只在管道和 pty 上执行了非阻塞（异步）I/O。我唯一能想到的是 pty 根本不支持这一点。（如果是这样，为什么会`fcntl(fd, F_SETFL, O_NONBLOCK);`成功？）我可以尝试在后台线程上阻塞 I/O 并将消息发送到主线程。我希望避免不得不处理多线程，但考虑到所有这些 API 看起来有多糟糕，它不会比尝试另一种异步 I/O 排列更耗时。不过，我很想知道我到底做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:30:30.630

> 问题可能是里面的stdio库正在缓冲输出。当命令行程序刷新它时，输出只会出现在读取管道中，因为它通过 stdio 库或 fflush()s 写入“\n”，或者缓冲区已满，或者退出（这会导致stdio 库自动刷新仍然缓冲的任何输出），或者可能是其他一些条件。如果这些 printf 字符串以“\n”结尾，那么您可能会更快地输出。这是因为有三种输出缓冲样式——无缓冲、行缓冲（\n 导致刷新）和块缓冲（当输出缓冲区满时，它会自动刷新）。
> 
> 如果输出文件描述符是 tty（或 pty），则 stdout 的缓冲默认为行缓冲；否则，块缓冲。stderr 默认是无缓冲的。setvbuf() 函数用于更改缓冲模式。这些都是我在这里描述的标准 BSD UNIX（可能还有通用 UNIX）。
> 
> NSTask 不会为您设置任何 ttys/ptys。在这种情况下无论如何它都无济于事，因为 printfs 没有打印出 \n。
> 
> 现在，问题是 setvbuf() 需要在命令行程序中执行。除非（1）你有命令行程序的源代码并且可以修改它并使用修改后的程序，或者（2）命令行程序有一个特性允许你告诉它不要缓冲它的输出[即，调用 setvbuf() 本身]，据我所知，没有办法改变这一点。父进程根本无法以这种方式影响子进程，要么在某些点强制刷新，要么更改 stdio 缓冲行为，除非命令行实用程序内置了这些功能（这很少见）。

资料来源：[Re：NSTask、NSipe 和交互式 UNIX 命令](http://lists.apple.com/archives/cocoa-dev/2002/Jan/msg00071.html)

# javascript - 所有函数表达式突然不被识别为函数

> ID：12586558
> 
> 赞同：1
> 
> 时间：2012-09-25T15:47:50.320
> 
> 标签：javascript, function, function-declaration, function-expression

我有一个包含许多函数表达式的大量 javascript 文件。突然控制台给了我以下错误：

在 IE 中

```
The value of the property 'myFunc' is null or undefined, not a Function object 
```

在火狐中

```
TypeError: myFunc is not a function 
```

这就是我调用函数的方式：

```
myFunc(); 
```

这是功能：

```
myFunc = function() {
  //do stuff
} 
```

这发生在所有函数表达式上。如果我将一个更改为函数声明，它可以工作，但是在其中的一些其他函数表达式调用上会失败。有没有搞错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:48:26.333

**可能性 1**

如果你在定义之前调用函数表达式，你会得到这个错误。但是，如果将其转换为函数声明，则函数声明将被提升到作用域的顶部，并且可以在实际声明发生之前或之后调用。所以：

```
functionFoo();
var functionFoo = function() {

}; 
```

将给出此错误，因为您试图在定义之前调用该函数。但：

```
functionFoo();
function functionFoo() {

} 
```

会起作用，因为实际的函数声明被提升到范围的顶部，并且可以在任何地方使用。

**可能性 2**

如果您从定义函数表达式的范围之外的不同范围调用函数表达式，您将收到此错误。函数表达式和其他变量一样，只能在它们定义的范围内使用。所以：

```
$( document ).ready( function() {
   var functionFoo = function() {

   };
} );
functionFoo(); 
```

会给你一个错误，因为函数的定义发生在与调用不同的范围内。但：

```
$( document ).ready( function() {
   var functionFoo = function() {

   };
   functionFoo();
} ); 
```

可以正常工作，因为定义和调用都发生在同一个范围内。

# c++ - 检测超出函数范围的未使用变量

> ID：12586560
> 
> 赞同：1
> 
> 时间：2012-09-25T15:47:58.797
> 
> 标签：c++, c, optimization, unused-variables

编译器在函数范围内检测未使用的变量。但是，我发现有很多变量定义在一个结构中，它们永远不会被读取（但可能已经被写入了很多次）。是否有任何工具/分析器甚至编译器标志来检测这些未使用的变量？

示例：例如，在以下结构中：

```
typedef struct jj_t {
    int count;
    int *list;
} jj; 
```

分析器可能会发现`count`从未在代码中的任何地方读取过。

我对代码的分析表明这种情况经常发生！这是我的错，但这可能是多年来不同用户开发的应用程序的常见情况。删除这些变量可能会显着减少内存使用量。我只需要一个工具来检测这些变量，我会手动删除它们。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:54:28.587

任何分析都必须跨越翻译单元。

实际上，与您不同，我从未发现这是一个问题。关于我能想到的唯一解决方案是一个一个删除成员，看看整个应用程序是否仍然编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:12:22.543

我可以给出一个解决方案。

但：

1.  这种努力可能比手动检查要大得多。几乎所有适合程序员的优秀 IDE 都允许您查看对给定变量的所有引用。

2.  这可能不适用于每种情况，您需要专门针对某些类型。

3.  这将由单个程序运行收集。

这个想法是包装你的数据类型。通过这样的封装，您可以计算每个读取操作。看：

```
template <class T, class Parent, int NO=1>
class TReadDetector {
public:
   struct Data {
      bool touched;
      Data () : touched(false) {}  
      ~Data ()  {
        if (!touched) 
          std::cerr << typeid(*this).name() << ": not read!!!\n" << std::endl;
      }  
   };
   static Data  data;
   TReadDetector () {}
   TReadDetector (const T& t) : t(t) {}
   operator T () const {    data.touched = true; return t; }
   TReadDetector& operator = (const T& t) { this->t = t; }
private:
   T t;
};

template <class T, class Parent, int NO>
typename TReadDetector<T,Parent,NO>::Data  
                       TReadDetector<T,Parent,NO>::data; 
```

和用法：

代替：

```
struct A {
  int a;
  int b;
}; 
```

做这个：

```
struct A {
  TReadDetector<int,A, 1> a;
  TReadDetector<int,A, 2> b;
};

int main() {
  A a;
  a.a = 7;
  a.b = 8;
  std::cout << a.a << std::endl;
  std::cout << TReadDetector<int,A, 1>::data.touched << std::endl;
  std::cout << TReadDetector<int,A, 2>::data.touched << std::endl;
  std::cout << "main() ended" << std::endl;
}; 
```

这将导致：

```
7
1
0
main() ended
N13TReadDetectorIi1ALi2EE4DataE: not read!!! 
```

注意在 . 之后打印的最后一行`main()`。您可以将此数据收集到一些外部文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T17:06:49.880

如果我们使用这样的结构，在少数情况下从结构中移除字段可能会很危险，

```
typedef struct jj_t {     int count;     int *list; } jj; 

jj *ptr = malloc (...);

//....

*ptr = 5; // NAIVE (but I have seen usage like this).
          // Actually you are not modifying count, count was already deleted. 
```

因此，很难进行您要求的分析。

# java - IOException e 为空

> ID：12586563
> 
> 赞同：7
> 
> 时间：2012-09-25T15:48:13.110
> 
> 标签：java, android, json

> **可能重复：**
> [异常始终为 NULL](https://stackoverflow.com/questions/3949609/exception-is-null-always)

我对 IOException 对象有一个奇怪的问题，找不到答案。

代码如下所示：

```
try { // This isn't very important part, but maybe it has something to do with a problem
  HttpResponse response = client.execute(httpGet);
  StatusLine statusLine = response.getStatusLine();
  int statusCode = statusLine.getStatusCode();
  if (statusCode == 200) {
    HttpEntity entity = response.getEntity();
    InputStream content = entity.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(content));
    String line;
    while ((line = reader.readLine()) != null) {
      builder.append(line);
    }
  } else {
    Log.e(ParseJSON.class.toString(), "Failed to download file");
  }
} catch (IOException e) {
        System.out.println("I'm here in the IOException catch clause");
        e.printStackTrace(); // e is null (line 126)
} catch (Exception e) {
        e.printStackTrace();
} 
```

程序捕获`IOException`，但其对象 (e) 是`null`。这怎么可能？

编辑：堆栈跟踪：

```
09-25 19:35:59.438: I/System.out(31732): I'm here in the IOException catch clause
09-25 19:36:04.377: W/dalvikvm(31732): threadid=1: thread exiting with uncaught exception (group=0x40020ac0)
09-25 19:36:04.447: E/AndroidRuntime(31732): FATAL EXCEPTION: main
09-25 19:36:04.447: E/AndroidRuntime(31732): java.lang.RuntimeException: Unable to start activity ComponentInfo{uniwersytet.ekiosk/uniwersytet.ekiosk.EkioskActivity}: java.lang.NullPointerException
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.os.Looper.loop(Looper.java:123)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.app.ActivityThread.main(ActivityThread.java:4627)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at java.lang.reflect.Method.invokeNative(Native Method)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at java.lang.reflect.Method.invoke(Method.java:521)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at dalvik.system.NativeStart.main(Native Method)
09-25 19:36:04.447: E/AndroidRuntime(31732): Caused by: java.lang.NullPointerException
09-25 19:36:04.447: E/AndroidRuntime(31732):    at uniwersytet.ekiosk.EkioskActivity.onCreate(EkioskActivity.java:126)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-25 19:36:04.447: E/AndroidRuntime(31732):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-25 19:36:04.447: E/AndroidRuntime(31732):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:32:57.693

**-**请检查`response`您从服务器获取的信息。

**-**还请注意...`UI work should be on UI thread and Non-UI work on the Non-UI thread`从 HoneyComb 版本的 Android 开始，它已成为规则。

**-**对于这种耗时较长的任务，请使用`thread with handler`或。`AsyncTask`

# java - 如何将 JavaFX 节点导出为 SVG 图像？

> ID：12586571
> 
> 赞同：13
> 
> 时间：2012-09-25T15:48:54.287
> 
> 标签：java, svg, javafx, vector-graphics

换句话说，我正在尝试用 JavaFX 做一些事情，就像[Batik 允许你用 Swing 做的那样。](http://xmlgraphics.apache.org/batik/javadoc/org/apache/batik/svggen/SVGGraphics2D.html)

我希望能够在我的 JavaFX UI 中捕获任意节点的外观，就像[Node.snapshot()](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)一样，除了我需要像 SVG 这样的矢量格式的图像，而不是光栅图像。（并且将我的节点的光栅快照插入 SVG 图像还不够好；它需要是适当的、可缩放的矢量图像。）

这是一个长期项目，所以我什至愿意实现我自己的[GraphicsContext](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html)，或者 JavaFX 的保留模式 API 中的任何等效项。

有谁知道是否有办法做到这一点？我希望在 JavaFX 中做的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-09T18:22:40.453

我开始编写一个 JavaFx 节点到 SVG 转换器，它“扩展”了 Gerrit Grunwald 的 ShapeConverter，它只转换形状几何：

[https://github.com/stefanidelloth/JavaFxNodeToSvg](https://github.com/stefaneidelloth/JavaFxNodeToSvg)

...并在一定程度的挫折后停止了它。

**请随时改进它，添加功能并修复错误。**

该转换器适用于简单的节点示例，但不适用于图表等高级示例。我失败的转换器可能会作为您的起点。当前状态如下图所示。左侧显示原始 JavaFx 节点，右侧显示生成的 svg 输出。

**简单节点示例（有效）：** [![在此处输入图像描述](../Images/3584bad475d731d4355bcfce9e0b2d3f.png)](https://i.stack.imgur.com/Lk532.png)

**图表示例（不起作用）：** [![在此处输入图像描述](../Images/11fb6b509a3e6a79d0527ad4ede44bfe.png)](https://i.stack.imgur.com/yRgyh.png)

相应的 svg 文件可在此处获得：

[https://github.com/stefanidelloth/JavaFxNodeToSvg/tree/master/output](https://github.com/stefaneidelloth/JavaFxNodeToSvg/tree/master/output)

**一些进一步的说明**

除了上面图表示例说明的定位问题外，还必须考虑一些进一步的问题：

JavaFx 提供了比 SVG 标准元素更多的 css 功能。例如，（矩形）JavaFx 区域可以为四个边界线中的每一个具有单独的线型。这样的 Region 不能简单地转换为 SVG 矩形。相反，Region 的四个边界线需要单独绘制。此外，这种边界线的每一端都可以有两个单独的边缘半径：垂直半径和水平半径。为了将“四”条边界线转换为相应的 SVG 线……可能需要进一步分割边界线：为四条边界线中的每条线绘制两个圆形部分和一个直线部分。因此，在某些情况下，可能有 12 个 SVG 路径元素来绘制单个 JavaFx 区域的边框。此外，区域的背景填充可以具有与区域边界不同的半径。绘制区域的背景可能需要更多的 SVG 元素。因此，即使是“矩形区域”的转换也会变得相当复杂。

另请注意，JavaFx 节点可能是动画的。例如，一条线的不透明度在开始时为 0，并在几毫秒后淡化为另一个值。

```
FadeTransition ft = new FadeTransition(Duration.millis(250), borderline);
                    ft.setToValue(0);                       
                    ft.play(); 
```

因此，只有在禁用动画或等到节点处于稳定状态时才转换节点才有意义。

如果有一天 JavaFx Charts 的转换可以工作，我会非常高兴，这样我就可以在我的一个项目中使用 JavaFx 绘图和 SVG 导出。

我决定暂时停止转换器的开发，转而使用 JavaScript 库 (d3) 研究绘图和 SVG 导出。如果该策略变得更糟，我可能会回到 JavaFxNodeToSvgConverter。

**编辑** d3.js 的绘图效果很好，我决定不使用 JavaFx 来创建绘图/svg。 [https://github.com/stefanidelloth/javafx-d3](https://github.com/stefaneidelloth/javafx-d3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T10:40:13.793

JFX JIRA 中有一个未解决的错误请求，位于

[https://javafx-jira.kenai.com/browse/RT-38559](https://javafx-jira.kenai.com/browse/RT-38559)

（需要注册；然后您可以为该问题投票）。它目前说

> 考虑将来的版本。

并标记为版本 9。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:52:56.473

有一个简单的[JavaFX 形状到 SVG 字符串转换器](http://harmoniccode.blogspot.ch/2012/11/shapes-shapes-shapes.html)，它只会在没有应用 css 的情况下转换基本形状，而不是任意节点，但这可能就是你所需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T22:07:02.510

这个想法是，如果您能够将 JavaFX 节点树结构转换为一系列 Graphics2D 订单，那么您可以使用具有 Graphics2D 驱动程序的 Batik。

问题是，将 JavaFX 树结构转换为 Graphics2D 订单并不像您想象的那么困难（即使您处理节点的 CSS 属性）。

一些读者建议我应该包含一些代码，而不仅仅是库的链接和它工作的图片。做起来没那么容易，因为就算做起来没那么难，也还是有5000行代码。

如何执行转换：

*   您必须有一个 Graphics2D 才能转换为 SVG（例如 Batik SVGGraphics2D 类）；
*   遍历 JavaFX 结构；
*   对于结构中的每个 Node，首先将该 Node 上的当前 javaFX 转换转换为 AffineTransform，并将转换应用到 Node（您必须在 Stack 中执行此操作，以确保在 Node 末尾恢复为初始 AffineTransform );
*   并且对于每个节点，您必须转换为适当的 Graphics2D 订单。

注意你不需要支持很多Node类型，主要是：

*   区域（控件是一种特殊类型的区域，可以具有关联的图形）
*   团体
*   形状（文本、矩形等...）
*   图像的 ImageView

您可能还需要注意节点剪辑以在 Graphics2D 中应用相关的剪辑。

此外，您还必须注意 Node.js 的 CSS 属性。

尽管如此，我使用的库（它应用了这个算法）在这里：http: [//sourceforge.net/projects/jfxconverter/](http://sourceforge.net/projects/jfxconverter/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-10T15:44:55.860

这个想法是，如果您能够将 JavaFX 节点树结构转换为一系列 Graphics2D 订单，那么您可以使用具有 Graphics2D 驱动程序的 Batik。

问题是，将 JavaFX 树结构转换为 Graphics2D 订单并不像您想象的那么困难（即使您处理节点的 CSS 属性）。

您应该从一个新的空 SVGDocument 创建一个 SVGGraphics2D，例如：

```
Document doc = SVGDOMImplementation.getDOMImplementation().createDocument(SVGDOMImplementation.SVG_NAMESPACE_URI, "svg", null);
SVGGraphics2D g2D = new SVGGraphics2D(doc); 
```

然后得到要转换的Scene的根节点，对于这个节点，得到Node的类型，可以是Shape、Control、Region、ImageView、Group、SubScene、Shape3D

根据每个节点，您可以获得节点的特征。例如，对于一个形状，如果它是一条线，您可以在 SVGGraphics2D 中绘制该线。例如：

```
g2D.drawLine((int) line.getStartX(), (int) line.getStartY(), (int) line.getEndX(), (int) line.getEndY()); 
```

请注意，您还需要注意应用于节点的变换以及节点的填充或绘制。

然后你迭代节点子节点并递归地做同样的事情。

最后，您应该能够将文档保存在 SVG 中，因为 Batik 允许本地执行此操作。

# c# - 将对象添加到此自定义类数组 C#

> ID：12586581
> 
> 赞同：1
> 
> 时间：2012-09-25T15:49:20.323
> 
> 标签：c#, arrays

这是一个菜鸟问题，我很抱歉。我一直在尝试弄清楚如何将对象添加到该数组中。我有一个 Employee 类，一个从 Emp 继承的 Salary 类，以及一个 Hourly 类。我创建了一个这样的数组，

```
 public Employee[] _Employees;
        ...    
        Employee[] _Employees = new Employee[]{ 
        new Hourly("1000", "Harry","Potter", "L.", "Privet Drive", "201-9090", "40.00", "12.00"),
        new Salary("2201", "A.", "A.", "Dumbledore", "Hogewarts", "803-1230", "1200"),
        new Hourly("3330", "R.","Weasley", "R.", "The Burrow", "892-2000", "40", "10.00"),
        new Salary("4040", "R.", "R.", "Hagrid", "Hogwarts", "910-8765", "1000")
                                                    }; 
```

现在我想将对象添加到从文本文件中读取的数组中。我现在正在这样做；

```
 if(rstring == "H")
                {
                    string fullName = data.ReadLine();
                    string empNum = data.ReadLine();
                    string address = data.ReadLine();
                    string phoneNum = data.ReadLine();
                    string hrWorked = data.ReadLine();
                    string hrRate = data.ReadLine();

                    string[] splitName = fullName.Split(new Char[] { ' ' });

                    string fName = splitName[0];
                    string mName = splitName[1];
                    string lName = splitName[2];

                     _MyForm._Employees = new Employee[] {new Hourly ( empNum, fName, mName, lName, address, phoneNum, hrWorked, hrRate ) }; 
```

这并没有给我任何错误，但是当我查看 _Employees 类中存储的内容时，它只有上面的信息，没有其他信息。如果我需要更好地解释自己，请告诉我。只要让我知道我是否需要以另一种方式去做，或者我需要做什么才能将读取信息添加到这个 _Employees 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:52:05.463

您应该考虑使用[`List<Employee>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx). 这将允许您*将*任意数量的元素添加到列表中，而无需自己重新创建：

```
private List<Employee> employees = new List<Employee>();
public IList<Employee> Employees { get { return this.employees; } }

// ...
this.employees.Add(new Hourly("1000", "Harry","Potter", "L.", "Privet Drive", "201-9090", "40.00", "12.00"));
// .. Add all 
```

然后，当你想添加一个新的，你可以使用：

```
_MyForm.Employees.Add(new Hourly ( empNum, fName, mName, lName, address, phoneNum, hrWorked, hrRate)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:52:46.670

`List`在这种情况下，您最好使用 a ：

`IList<Employee> _Employees;`

List 的优点是具有`Add`可用于将新对象添加到数组末尾的方法。

`_MyForm._Employees.Add(new Hourly(...))`

如果您想在集合中的其他点插入对象，还有`Insert`一种方法可以将索引与要添加的对象一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:03:45.987

使用其他人指出的 List 类和 Add 方法。你在这里做了什么：

```
_MyForm._Employees = new Employee[] 
```

在您的示例代码中，您已将MyForm._Employees 的引用*重新分配给Employee[] 类型的新对象，而不是添加到其中。*您以前包含其他有价值员工的参考很可能已被垃圾收集（如果范围内没有其他参考）。

老实说，我会避开数组。有关更多信息，请参阅[此](https://stackoverflow.com/questions/434761/array-versus-listt-when-to-use-which)。

# c# - 仅打印嵌入到 ASP.NET 页面中的图像

> ID：12586582
> 
> 赞同：2
> 
> 时间：2012-09-25T15:49:28.513
> 
> 标签：c#, asp.net, image, printing, tiff

我希望使用 C#、Microsoft Visual Studio、asp.net 进行打印。

目标：我正在尝试打印传真文档中的所有页面。

格式：传真文档作为具有多页的单个 .tiff 文件接收。

需要做什么：- 我需要迭代 .tiff 图像中的每一页并将它们全部打印出来。

```
// This function will iterate all pages, one at a time. //

 protected void PrintAll_Click(object sender, EventArgs e)
 {
    // counts number of pages in the fax document.//
    int number = _FaxPages.Count;

    // for loop to iterate through each page. //
    for (int i = 0; i < number; i++)
    {
        string _FaxId = Page.Request["FaxId"];

        _PageIndex = i;

        imgFax.ImageUrl = "ShowFax.ashx?n=" + _FaxId + "&f=" + _PageIndex + "&mw=750";

        PrintAll.Attributes.Add("onclick", "return printing()");             
    }
} 
```

在我的 Java 脚本中，我有：

```
function printing() { window.print(); } 
```

现在的问题是：

1.  该函数只打印一页（tiff 文件的最后一页）......它打印整个窗口，而不仅仅是整个 Web 浏览器窗口中嵌入的 .tiff 图像。

    关于如何仅打印 .tiff 嵌入图像而不是整个 Web 浏览器窗口的任何想法。

2.  虽然我的 for 循环遍历页面。仅在循环遍历所有页面并在最后一页（例如第 6/6 页）停止后才调用打印函数。然后它只打印最后一页（以及浏览器窗口上的其余内容）。这不是我想要发生的……我不想在浏览器窗口上打印所有多余的材料，例如按钮、链接等……我只想要浏览器窗口中嵌入的 .tiff 图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:59:35.103

在将页面发送到客户端之前，您当前的代码将遍历服务器端的所有页面并更新图像 URL。这意味着`ImageUrl`将永远是您的最后一页。

对于打印所有图像，有多种解决方案：

*   编辑您的`ShowFax.ashx`，添加一个选项以一次呈现所有传真页面并将其放在图像 URL 中。
*   `Image`在运行时将每个页面的新元素添加到父容器。
*   让 javascript 函数`printing()`进行回发，增加页面索引和图像上的 URL 并重复代码。
*   创建整个循环客户端。

对于仅打印图像，使用 CSS 样式表隐藏其他元素并添加`media="print"`如下内容：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

# linux - 通过 -m 查找文件没有找到在日期内修改的文件

> ID：12586584
> 
> 赞同：0
> 
> 时间：2012-09-25T15:49:33.273
> 
> 标签：linux

我正在尝试查找在 8 月份修改的所有文件。

```
[user@server:/path-to-file/pdfs/]$ ll
total 152
-rw-r--r-- 1 wwwrun www 105713 2012-08-28 12:05 file1.pdf
-rw-r--r-- 1 wwwrun www  49059 2012-08-28 12:05 file2.pdf 
```

修改日期为上月28日。此命令找不到这些文件，我不确定为什么。我从来没用过`-mtime`。我`ls`查看这些 PDF 时显示的日期和/或时间戳不是修改时间吗？

```
find "/path-to-file/pdfs/" -mtime -56 -mtime +31 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:57:13.290

您需要再次检查您的计算。今天是 9 月 25 日，您的文件在 8 月 28 日被修改，也就是大约 28 天前。在您的命令中，您正在使用`-mtime +31`（意思是在 31 天前修改过），因此为什么找不到它。

尝试将您的命令更改为：

```
find "/path-to-file/pdfs/" -mtime -56 -mtime +27 
```

# lucene - 使用 lucene 查找查询的匹配总数

> ID：12586585
> 
> 赞同：2
> 
> 时间：2012-09-25T15:49:34.567
> 
> 标签：lucene

我是 lucene 的新手，所以我不知道这是否可能，但我有一个索引，我想获取索引子集中的短语总数（子集由过滤器定义）。我可以将 FilteredQuery 与我的过滤器和 PhraseQuery 一起使用来搜索短语，因此我可以计算出现该短语的文档，但我似乎也找不到一种方法来计算每个文档的匹配数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:12:33.587

您可以这样做，有关详细信息，请参阅[LUCENE-2590](https://issues.apache.org/jira/browse/LUCENE-2590)。

例如代码，您可以查看此功能的[单元测试](https://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_3_2/lucene/src/test/org/apache/lucene/search/TestSubScorerFreqs.java)。

我在下面复制了短语搜索器的相关代码，

这是收藏家，

```
private static class CountingCollector extends Collector {
  private final Collector other;
  private int docBase;

  public final Map<Integer, Map<Query, Float>> docCounts = new HashMap<Integer, Map<Query, Float>>();

  private final Map<Query, Scorer> subScorers = new HashMap<Query, Scorer>();
  private final ScorerVisitor<Query, Query, Scorer> visitor = new MockScorerVisitor();
  private final EnumSet<Occur> collect;

  private class MockScorerVisitor extends ScorerVisitor<Query, Query, Scorer> {

    @Override
    public void visitOptional(Query parent, Query child, Scorer scorer) {
      if (collect.contains(Occur.SHOULD))
        subScorers.put(child, scorer);
    }

    @Override
    public void visitProhibited(Query parent, Query child, Scorer scorer) {
      if (collect.contains(Occur.MUST_NOT))
        subScorers.put(child, scorer);
    }

    @Override
    public void visitRequired(Query parent, Query child, Scorer scorer) {
      if (collect.contains(Occur.MUST))
        subScorers.put(child, scorer);
    }

  }

  public CountingCollector(Collector other) {
    this(other, EnumSet.allOf(Occur.class));
  }

  public CountingCollector(Collector other, EnumSet<Occur> collect) {
    this.other = other;
    this.collect = collect;
  }

  @Override
  public void setScorer(Scorer scorer) throws IOException {
    other.setScorer(scorer);
    scorer.visitScorers(visitor);
  }

  @Override
  public void collect(int doc) throws IOException {
    final Map<Query, Float> freqs = new HashMap<Query, Float>();
    for (Map.Entry<Query, Scorer> ent : subScorers.entrySet()) {
      Scorer value = ent.getValue();
      int matchId = value.docID();
      freqs.put(ent.getKey(), matchId == doc ? value.freq() : 0.0f);
    }
    docCounts.put(doc + docBase, freqs);
    other.collect(doc);
  }

  @Override
  public void setNextReader(IndexReader reader, int docBase)
      throws IOException {
    this.docBase = docBase;
    other.setNextReader(reader, docBase);
  }

  @Override
  public boolean acceptsDocsOutOfOrder() {
    return other.acceptsDocsOutOfOrder();
  }
} 
```

单元测试是，

```
@Test
public void testPhraseQuery() throws Exception {
  PhraseQuery q = new PhraseQuery();
  q.add(new Term("f", "b"));
  q.add(new Term("f", "c"));
  CountingCollector c = new CountingCollector(TopScoreDocCollector.create(10,
      true));
  s.search(q, null, c);
  final int maxDocs = s.maxDoc();
  assertEquals(maxDocs, c.docCounts.size());
  for (int i = 0; i < maxDocs; i++) {
    Map<Query, Float> doc0 = c.docCounts.get(i);
    assertEquals(1, doc0.size());
    assertEquals(2.0F, doc0.get(q), FLOAT_TOLERANCE);

    Map<Query, Float> doc1 = c.docCounts.get(++i);
    assertEquals(1, doc1.size());
    assertEquals(1.0F, doc1.get(q), FLOAT_TOLERANCE);
  }

} 
```

# apache-flex - 为什么 mp4 视频在 ios 6 上的 webkit 中中断

> ID：12586586
> 
> 赞同：0
> 
> 时间：2012-09-25T15:49:37.137
> 
> 标签：apache-flex, mobile, ios6

我正在使用 Flex Mobile 开发一个 IOS 应用程序。为了启动原生 ios 视频播放器，我创建了一个 StageWebView 实例并加载了一个指向 MP4 文件的 URL。

从 ios 5.1.x 开始，这很好用，但我刚刚将设备升级到 IOS 6，这不起作用。视频播放器在 webstageview 中嵌入，但通过播放按钮显示 X，表示它无法播放视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:04:55.680

具有较低场优势的预设应该这样做。渐进式视频播放正常

# algorithm - 用于将人员分配到组的组合算法

> ID：12586587
> 
> 赞同：6
> 
> 时间：2012-09-25T15:49:49.573
> 
> 标签：algorithm, combinatorics

一位同事带着一个有趣的问题来找我，一个与她所在的“城里新人”小组有关的实际问题。

在接下来的 4 天里，每天有 18 位朋友想分组共进晚餐。规则如下：

1.  每天，该小组将分为 4 组，每组 4 人，一组 2 人。
2.  任何一对人在 4 天内最多只能见面一次。
3.  任何给定的人最多只能成为大小 2 组的一部分。

暴力递归搜索一组有效的组分配显然是不切实际的。我已经提出了一些简单的逻辑来尽快修剪树的某些部分，但还不足以使其实用。

实际上，我开始怀疑遵守所有规则可能是不可能的，但我想不出一个组合论据来解释为什么会这样。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:24:26.087

可以使用两个[相互正交的 4 阶拉丁方格](http://en.wikipedia.org/wiki/Graeco-Latin_square)安排 16 个朋友 4x4 共 4 晚。将每个朋友分配到 4x4 网格中的不同位置。第一天晚上，逐行分组。第二，按列分组。第三，按拉丁方#1 中的相似条目分组（4x4 示例中的卡片等级）。第四，按拉丁方#2 中的类似条目分组（4x4 示例中的卡片套）。实际上，仿射平面构造产生了三个相互正交的拉丁方格，因此可以安排第五晚，确保每对朋友恰好见面一次。

也许可以延长 16 日的日程，利用未使用的第五晚的自由。

编辑：这是 5 晚 16 人的时间表。每一行都是一个晚上。每列是一个人。条目是他们被分配到的组。

```
[0, 0, 0, 0,  1, 1, 1, 1,  2, 2, 2, 2,  3, 3, 3, 3]
[0, 1, 2, 3,  0, 1, 2, 3,  0, 1, 2, 3,  0, 1, 2, 3]
[0, 1, 2, 3,  1, 0, 3, 2,  2, 3, 0, 1,  3, 2, 1, 0]
[0, 2, 3, 1,  1, 3, 2, 0,  2, 0, 1, 3,  3, 1, 0, 2]
[0, 3, 1, 2,  1, 2, 0, 3,  2, 1, 3, 0,  3, 0, 2, 1] 
```

# sql - 在 VBscript 中执行 SQL powershell 查询

> ID：12586589
> 
> 赞同：0
> 
> 时间：2012-09-25T15:50:03.053
> 
> 标签：sql, vbscript

我在 vbscript 中执行 sql 查询，查询如下，它提供了有关每个服务器可用驱动器的信息

VBScript 代码（稍作重组）：

```
Strquery = "DECLARE @Totaldbspacegb BIGINT;" & _
  "DECLARE @Totaldriveusedspacegb INT;" & _
  "DECLARE @Totaldrivefreespacegb INT;" & _
  "DECLARE @Svrname VARCHAR(255);" & _
  "DECLARE @Sql VARCHAR(400);" & _
  "DECLARE @Forcast6monthsgb NUMERIC(38, 6);" & _
  "DECLARE @Forcast12monthsgb NUMERIC(38, 6);"
Strquery = Strquery & "; DECLARE @Avggrowthingb NUMERIC(38, 6);" & _
  "CREATE TABLE #Temp1(Yer INT NULL, Mnth INT NULL," & _
    "Sumdbinmb NUMERIC(38, 6)NULL, Id INT IDENTITY(1, 1) NOT NULL);" & _
  "CREATE TABLE #Temp4(Totaldriveusedspacegb INT, Totaldrivefreespacegb INT);" 
Strquery = Strquery & "; SELECT @Totaldbspacegb = SUM(Size) FROM Sys.Master_Files"
Strquery = Strquery & "; SELECT @Totaldbspacegb = @Totaldbspacegb * 8\. / 1024.0 / 1024"
Strquery = Strquery & "; SET @Svrname = '" & Strserver & "';"
Sql = " Powershell.Exe - C ""Get-WmiObject -Class Win32_Volume -Filter ''DriveType = 3''| select name,label,capacity,freespace | foreach{$_.name+''!''+$_.label+''|''+$_.capacity/1048576+''%''+$_.freespace/1048576+''*''}""" 
Strquery = Strquery & "CREATE TABLE #Output(Line VARCHAR(255)); INSERT INTO #Output"
Strquery = Strquery & "; EXEC Xp_Cmdshell '" & sql & "';"
Strquery = Strquery & "; SELECT * FROM #Output;" 
```

生成的（格式化的）SQL 代码：

```
DECLARE @Totaldbspacegb BIGINT;
DECLARE @Totaldriveusedspacegb INT;
DECLARE @Totaldrivefreespacegb INT;
DECLARE @Svrname VARCHAR(255);
DECLARE @Sql VARCHAR(400);
DECLARE @Forcast6monthsgb NUMERIC(38, 6);
DECLARE @Forcast12monthsgb NUMERIC(38, 6);
;
DECLARE @Avggrowthingb NUMERIC(38, 6);
CREATE TABLE #Temp1(Yer INT NULL,
                    Mnth INT NULL,
                    Sumdbinmb NUMERIC(38, 6)NULL,
                    Id INT IDENTITY(1, 1) NOT NULL
                   );
CREATE TABLE #Temp4(Totaldriveusedspacegb INT,
                    Totaldrivefreespacegb INT
                   );
;
SELECT @Totaldbspacegb = SUM(Size)
  FROM Sys.Master_Files;
SELECT @Totaldbspacegb = @Totaldbspacegb * 8\. / 1024.0 / 1024;
SET @Svrname = '...';
CREATE TABLE #Output(Line VARCHAR(255));
INSERT INTO #Output;
EXEC Xp_Cmdshell 'Powershell.Exe - C "Get-WmiObject -Class Win32_Volume -Filter ''DriveType = 3''| select name,label,capacity,freespace | foreach{$_.name+''!''+$_.label+''|''+$_.capacity/1048576+''%''+$_.freespace/1048576+''*''}"';
;
SELECT *
  FROM #Output; 
```

我正在执行这个查询，它在 .vbs 文件中运行时从管理工作室运行时给了我输出，它给我的记录计数为空，如何查找查询是否成功执行。是不是由于powershell命令它没有在vbscript中运行。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:42:47.607

是否要`#Output`使用 PowerShell 命令的结果更新临时表？如果是这样，我认为您的指示不会满足您的要求。

```
INSERT INTO #Output;
EXEC Xp_Cmdshell 'Powershell.Exe -C "..."';
SELECT *
  FROM #Output; 
```

`INSERT INTO #Output;`不是有效的语句，并且您不会对 PowerShell 命令的输出执行任何操作。

# asp.net-mvc - Request.Content.ReadAsMultipartAsync -- 错误

> ID：12586590
> 
> 赞同：2
> 
> 时间：2012-09-25T15:50:07.667
> 
> 标签：asp.net-mvc

使用以下代码，我不断收到错误消息：无法将类型“System.Net.Http.MultipartFormDataStreamProvider”隐式转换为“System.Threading.Tasks.Task>”

```
MultipartFormDataStreamProvider streamProvider = new MultipartFormDataStreamProvider("c:\\tmp\\uploads");

//Error line
Task<IEnumerable<HttpContent>> bodyparts =  await Request.Content.ReadAsMultipartAsync(streamProvider); 
```

我认为这是一个容易的，但我错过了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T17:26:37.137

我最终使用了它，效果很好。我在这里找到了

[http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

```
using System.Diagnostics;
using System.Net;
using System.Net.Http;
using System.Threading.Tasks;
using System.Web;
using System.Web.Http;

public class UploadController : ApiController
{
public async Task<HttpResponseMessage> PostFormData()
{
    // Check if the request contains multipart/form-data.
    if (!Request.Content.IsMimeMultipartContent())
    {
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
    }

    string root = HttpContext.Current.Server.MapPath("~/App_Data");
    var provider = new MultipartFormDataStreamProvider(root);

    try
    {
        // Read the form data.
        await Request.Content.ReadAsMultipartAsync(provider);

        // This illustrates how to get the file names.
        foreach (MultipartFileData file in provider.FileData)
        {
            Trace.WriteLine(file.Headers.ContentDisposition.FileName);
            Trace.WriteLine("Server file path: " + file.LocalFileName);
        }
        return Request.CreateResponse(HttpStatusCode.OK);
    }
    catch (System.Exception e)
    {
        return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
    }
} 
```

}

# javascript - JS / Prototype - 检测 SELECT 元素折叠或实际选择的选项

> ID：12586591
> 
> 赞同：2
> 
> 时间：2012-09-25T15:50:23.050
> 
> 标签：javascript, prototypejs, dom-events

I have functionality setup to execute whenever a select element changes its value. 它不使用正常的 onchange 事件，而是每 300 毫秒执行一次，并且仅在检测到更改的值时才调用处理程序。我正在使用原型`Form.Element.Observer`，如果这对您意味着什么。

现在，在 Firefox 中，当用户将鼠标悬停在 上`option`并触发定时值检查功能时，将调用处理程序，因为浏览器说值已更改。我想做的是能够检测到用户何时实际选择了该选项，而不是简单地将鼠标悬停在上面。我在原型文档中意识到，他们明确指出了这个错误（或功能，取决于你如何看待它），但我希望能够规范化行为。

在某种程度上，这有点类似于我之前在 StackOverflow 上看到的一个问题（[检测 HTML 选择元素是否已展开（无需手动跟踪状态）](https://stackoverflow.com/questions/6156574/detect-if-an-html-select-element-is-expanded-without-manually-tracking-state)）但我希望那里的人能够告诉我该怎么做这仅适用于特定的选择元素，并且当它关闭而不是展开时。

为了更好地理解我的意思，请查看[http://jsfiddle.net/KxQd6/](http://jsfiddle.net/KxQd6/)，弄乱选择元素并查看控制台日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:45:34.107

这是一个示例，显示如何`SELECT`通过您提到的不同阶段控制元素更改：

> （用户、dom-load 和 js 更新）

此代码利用[`event.simulate`](https://github.com/kangax/protolicious/blob/master/event.simulate.js)它提供了一种跨浏览器触发/模拟事件的方式。

* * *

**代码**（[小提琴](http://jsfiddle.net/epoch/4LGee/)）

```
document.observe('dom:loaded', function() {
    var select = $('box_1'),
        button_1 = $('change_via_ajax'), 
        button_2 = $('change_via_script'), 
        results = $('results');

    // create observer on our select
    select.observe('change', function(e) {
        var d = new Date()
            t = d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();
        results.insert(new Element('div')
               .update(t + ' - Change was fired, value is now [' + this.value + ']'));
    });

    button_1.observe('click', function() {
        new Ajax.Request('/echo/json/', {
            onComplete: function(j) {
                select.options[Math.round(Math.random() * 2)].selected = true;
                select.simulate('change');
            }
        });
    });

    button_2.observe('click', function() {
        select.options[0].selected = true;
        select.simulate('change');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:18:13.277

查看[https://github.com/harvesthq/chosen](https://github.com/harvesthq/chosen)（尤其是[https://github.com/harvesthq/chosen/blob/master/coffee/chosen.proto.coffee](https://github.com/harvesthq/chosen/blob/master/coffee/chosen.proto.coffee)第 68-89 行）。无法确定 SELECT 元素的当前状态 - 只能通过一组鼠标、键盘和 UI 事件的事件观察器或多或少可靠地跟踪它。

# javascript - 在html上将图像拉伸到全屏

> ID：12586594
> 
> 赞同：1
> 
> 时间：2012-09-25T15:50:32.517
> 
> 标签：javascript, html

我有这个随机显示背景图像的代码。我调整了图像大小并降低了字节以降低加载速度。但是，我希望图像可以根据屏幕尺寸调整大小。

```
<script type="text/javascript">
    var randnum = Math.random();
    var inum = 3;
    var rand1 = Math.round(randnum * (inum - 1)) + 1;
    images = new Array();
    images[1] = "bgImages/Blue_Venetian_Glass.jpg";
    images[2] = "bgImages/Etched Glass.jpg";
    images[3] = "bgImages/glass.jpg";
    images[4] = "bgImages/Raindrops_on_Glass.jpg";
    var image = images[rand1];
    document.body.style.background = 'url("' + image + '") no-repeat center center fixed';
</script> 
```

我的问题是“我需要什么来拉伸图像”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:54:50.690

您可以使用 CSS3`background-size`属性。检查此链接。

[http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:58:11.493

实现该效果的最佳方法是使用一个 div，其中的图像绝对定位它，您可以设置它的样式。

之前要添加的 HTML `</body>`：

```
<div align="center"><img src="images/BG.jpg" id="bg"></div> 
```

CSS：

```
#bg {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5000;
} 
```

Javascript：

```
var randnum = Math.random();
var inum = 3;
var rand1 = Math.round(randnum * (inum - 1)) + 1;
images = new Array();
images[1] = "bgImages/Blue_Venetian_Glass.jpg";
images[2] = "bgImages/Etched Glass.jpg";
images[3] = "bgImages/glass.jpg";
images[4] = "bgImages/Raindrops_on_Glass.jpg";
var image = images[rand1];
document.getElementById('bg').src = image; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:03:50.973

您是否尝试过给图像一个 css 类并将该类的高度和宽度属性设置为 100%？

# python - 删除 Python 中的最后一个 STDOUT 行

> ID：12586601
> 
> 赞同：31
> 
> 时间：2012-09-25T15:50:50.380
> 
> 标签：python, stdout, command-prompt

我试图弄清楚如何抑制用户输入在标准输出上的显示。

`raw_input()`后跟任何打印语句都会保留用户输入的内容。`getpass()`不显示用户输入的内容，但会保留“密码：”提示。

为了解决这个问题，我只想删除最后一行（这也会从行尾删除换行符）。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-25T15:54:57.513

您可以使用[VT100 控制代码](http://www.termsys.demon.co.uk/vtansi.htm#cursor)做您想做的事情。

可能是这样的：

```
CURSOR_UP_ONE = '\x1b[1A'
ERASE_LINE = '\x1b[2K'
print(CURSOR_UP_ONE + ERASE_LINE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-12T10:13:04.387

试试这个：

```
CURSOR_UP = '\033[F'
ERASE_LINE = '\033[K'
print(CURSOR_UP + ERASE_LINE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:14:33.630

如果您正在做的是读取密码，请使用`getpass`. 安全读取*密码*涉及许多微妙的问题。这不是您想自己编写的代码。

如果您正在做一些安全性不那么重要的事情，可以使用该[`termios`](http://docs.python.org/library/termios.html)模块来禁用终端回显。（我希望示例代码没有不完整、不安全的实现`getpass`，叹息。但它确实向您展示了如何关闭终端回显。）

如果你在 Windows 上，有一个等价物，但我不知道它是什么，它可能不会在 Python 标准库中公开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T16:01:24.847

我不完全确定这是否有效：也许您可以在调用之前`raw_input()`替换`sys.stdout`为您自定义的类似文件的对象，该对象会吞下输出。在那之后，您可以`sys.stdout`恢复到以前的状态。

编辑：看起来这种方法不起作用，因为无论用户输入什么都留在屏幕上。

控制台操作和直接键盘控制的另一个选项是[curses](http://docs.python.org/library/curses.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T17:09:01.330

以下代码基于 Python 文档，使用该`termios`模块并且似乎可以执行您想要的操作（尽管它不像 VT100 控制代码那么紧凑）：

```
def getpass(prompt="Password: "):
    import termios, sys
    fd = sys.stdin.fileno()
    old = termios.tcgetattr(fd)
    new = termios.tcgetattr(fd)
    new[3] = new[3] & ~termios.ECHO
    try:
        termios.tcsetattr(fd, termios.TCSADRAIN, new)
        passwd = raw_input(prompt)
        print '\r          \r',
    finally:
        termios.tcsetattr(fd, termios.TCSADRAIN, old)
    return passwd

p = getpass() 
```

有两条棘手的线：一条禁用回显，另一条删除您的密码提示，保留在该行的第一个位置。

# javascript - 嵌套 CSS 类的 Javascript 正则表达式

> ID：12586602
> 
> 赞同：0
> 
> 时间：2012-09-25T15:50:51.693
> 
> 标签：javascript, css, regex

[在](https://stackoverflow.com/questions/12424357/javascript-and-regular-expression-for-private-use-area-pua-characters)我的问题之后，我一直在尝试用 Javascript 编写类似的代码，以检测嵌套 CSS 类的文本中出现的一系列 Unicode 字符。到目前为止，我能够让它在 DIV 类上工作，例如：

```
$(document).ready(function() {
    $('h2.ClassName').each(function(index, DOMElement){
        if(/[\uE000-\uF8FF]+/.test($(DOMElement).text())) {
            $(this).removeClass('ClassName').addClass('CSS-ClassName');
        }
    }) 
}); 
```

但是，类似的 Javascript 不适用于以下类：

```
<ul>
    <h4 class="ClassName">Text</h4>
    <li class="ClassName">Text</li>
<ul> 
```

任何想法？

确实谢谢

问候，

我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:56:08.220

如果您希望 jQuery 使用相同的方法查找其他元素，`ClassName`那么您需要将它们添加到您的选择器中，如下所示：

```
$(document).ready(function() {
    $('h2.ClassName, h4.ClassName, li.ClassName').each(function(index, DOMElement){
        if(/[\uE000-\uF8FF]+/.test($(DOMElement).text())) {
            $(this).removeClass('ClassName').addClass('CSS-ClassName');
        }
    }) 
}); 
```

如果您想获得真正的通用性，并更改所有元素，`ClassName`那么您可以将选择器更改为：

```
/* ... */
$('.ClassName').each(); /* ... you get the idea ... */
/* ... */ 
```

希望有帮助。

# c# - 错误：传递输出引用时使用未分配的局部变量

> ID：12586604
> 
> 赞同：0
> 
> 时间：2012-09-25T15:51:04.097
> 
> 标签：c#, pass-by-reference

尝试使用函数参数作为返回值时，我刚刚收到此错误。我只能找到相关问题的答案，但找不到这个问题。

例子：

```
void someNumber(int foo)
{
  foo = 3;
}

int bar;
someNumber(bar); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:51:04.097

事实证明，C# 在这方面有点奇怪，但比 C/C++ 更奇怪。:)

如果您仅传递输出值的引用，则必须以这种方式明确表示：

```
void someNumber(out int foo)
{
  foo = 3;
}

int bar;
someNumber(out bar); 
```

因此，尽管您在输入参数列表中仍然有一个输出参数（至少在我的脑海中是这样），但至少它现在是显而易见的。

请注意，现在不要在 someNumber 的主体中分配给 foo 是一个错误。它有点像一个反常量，这显然是一个更酷的关键字。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:02:34.687

```
void someNumber(int foo)
{
  foo = 3;
}

int bar;
someNumber(bar); 
```

foo 是一个输入参数，所以你不能改变它的值..

因为使用返回函数。

```
int someNumber(int foo)
{
    foo=3;
    return foo;
} 
```

# php - 使用 PHP PDO 搜索/插入/更新 MySQL 数据库时确保电子邮件是小写的

> ID：12586607
> 
> 赞同：0
> 
> 时间：2012-09-25T15:51:16.547
> 
> 标签：php, mysql, sql, pdo, lowercase

我正在使用 PHP 的 PDO 与 MySQL 数据库进行交互。我目前正在使用以下代码来确保电子邮件地址始终为小写，以确保在插入/更新时没有重复或在搜索时找到电子邮件。

有人可以告诉我这是否可以，还是使用 SQL 或 PHP 转换为小写的方式更好？

```
$sql = "UPDATE table SET name=:name, LOWER(email)=:email WHERE id = :id";
$st->bindValue(":email", strtolower($this->email), PDO::PARAM_STR); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:52:44.063

您无法写入，`LOWER(email)`也没有必要，因为无论如何您总是通过 PHP 插入小写版本。只需将其更改为`email`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:25:57.937

最好的方法是在将数据输入数据库之前始终准备好数据。所以换句话说，所有的情况都在 php.ini 中改变。

在这种情况下，您可以使用：

`strtolower($str)`

我看到你在使用，这很完美。这很好，你可以在这里停下来。

# mobile - 任何类似于 Bango 的移动网站适用于移动设备的信用卡计费解决方案？

> ID：12586608
> 
> 赞同：0
> 
> 时间：2012-09-25T15:51:17.137
> 
> 标签：mobile, in-app-purchase, payment-gateway, payment, recurring-billing

是否有适用于类似于 Bango的**移动网站**的适用于移动设备的信用卡计费解决方案？

与常规信用卡解决方案相比，我看到的 Bango 的优势使其相当“移动友好”：

1.  1) 它不需要用户输入他们的全名和账单地址来进行付款。用户只需要输入他们的信用卡号、到期日期和 CVC 代码（如果他们在美国，他们还必须输入他们的邮政编码）。这比信用卡支付通常所需的输入要少得多，这是小型移动键盘的一大优势。

2.  用户进行初始信用卡付款后，Bango 会存储他们的详细信息，下次用户需要使用同一张信用卡进行付款时，他们只需单击一个链接，它就会在他们存储的页面上处理付款信用卡。不用说，这对移动用户来说非常方便，因为就用户而言，这类似于直接运营商计费，因为他们不需要输入任何详细信息。

Bango 的缺点是他们的费用比其他人高，所有付款都必须通过他们的网站和品牌处理，您可以向用户收取的最低金额（1.99 美元）和最高金额（30 美元）较低，而且您需要在高额交易成本之上支付月费。

由于上述缺点，我正在寻找一种替代解决方案，它也具有上述优点 1) 和 2)。有这样的吗？我查看了 JunglePay，他们既不做 1) 也不做 2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:33:41.047

我们，[Balanced](https://www.balancedpayments.com)，具有与您正在寻找的功能相似的功能。卡号和有效期是唯一需要的信息。但是，您收集的信息越多，欺诈检测就越容易发生，仅要求最低限度可能会使您面临拒付以及与之相关的成本。

您提到的第二个要求是称为[卡标记化](http://en.wikipedia.org/wiki/Tokenization_%28data_security%29)的功能，大多数卡处理器应该支持此功能。

平衡并非天生就以移动为重点。这是一个 REST API，因此您为客户提供的任何服务都取决于您。作为开发人员，您将创建一个网页，接收卡信息，[对其进行安全标记](https://www.balancedpayments.com/docs/js)，然后将令牌提交到您的服务器，您的应用程序中的逻辑会在您准备好时进行收费。

# python - 如何使用 Python LXML Objectify 3 次创建相同的 XML 元素

> ID：12586611
> 
> 赞同：3
> 
> 时间：2012-09-25T15:51:33.530
> 
> 标签：python, xml, lxml

几周前我问了一个关于添加[多个元素的问题，现在我遇到了类似的问题。](https://stackoverflow.com/questions/12324128/python-how-to-append-the-same-xml-element-multiple-times-with-lxml-objectify)我必须创建一些 XML，其中包含以下内容：

```
<embossed>
   <line>Test Line</line>
   <line>Test Line 2</line>
   <line>Test Line 3</line>
</embossed> 
```

我无法弄清楚如何使用 LXML objectify.Element() 方法连续 N 次使用不同的文本创建相同的元素。我试过这个：

```
embossed = objectify.Element('embossed')
embossed.line = objectify.Element("line")
embossed.line = objectify.Element("line") 
```

但我最终在“浮雕”元素中只有一个“线条”元素。有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:00:03.043

只需将这些行附加到`embossed`，而不是：

```
embossed = objectify.Element('embossed')
embossed.append(objectify.Element('line'))
embossed.line[-1] = 'Test Line'
embossed.append(objectify.Element('line'))
embossed.line[-1] = 'Test Line 2' 
```

每个 lxml 树标记就像一个列表，其中任何子项都是列表中的元素。简单地附加新`objectify.Element`对象使它们成为您附加它们的标记的子级。

然后，您可以使用索引到达该列表的每个元素；索引是`-1`最后一个元素，允许我们设置它的文本。

上面的代码输出：

```
>>> from lxml import objectify, etree
>>> embossed = objectify.Element('embossed')
>>> embossed.append(objectify.Element('line'))
>>> embossed.line[-1] = 'Test Line'
>>> embossed.append(objectify.Element('line'))
>>> embossed.line[-1] = 'Test Line 2'
>>> print etree.tostring(embossed, pretty_print=True)
<embossed xmlns:py="http://codespeak.net/lxml/objectify/pytype" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" py:pytype="TREE">
  <line py:pytype="str">Test Line</line>
  <line py:pytype="str">Test Line 2</line>
</embossed> 
```

# objective-c - iOS ASIFormDataRequest

> ID：12586612
> 
> 赞同：1
> 
> 时间：2012-09-25T15:51:35.127
> 
> 标签：objective-c

最后我得到了 ASI-xx 的东西，所以我没有得到 ARC 编译错误，也没有其他任何东西丢失。

现在我想尝试 ASIFormDataRequest 以便能够直接从应用程序登录网站。

这是我已经得到的，但它似乎无法正常工作：

```
-(void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:YES];

    NSString *str = @"http://mysite.com/ucp.php?module=login";
    NSURL *url = [NSURL URLWithString:[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setPostValue:@"username" forKey:@"username"];
    [request setPostValue:@"password" forKey:@"password"];
    [request setTimeOutSeconds:120];
    [request setDelegate:self];
    [request startAsynchronous];
    NSLog(@"%@",[request responseString]);
    NSLog(@"%d",[request responseStatusCode]);
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 300)];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://mysite.com"]]];
    [self.view addSubview:webView];
} 
```

如果我删除 web 视图，屏幕上什么也不会发生。

以下是 NSLog 的结果：

```
(null)
0 
```

我要将数据发布到的（网站的）文本字段具有以下代码：

```
<input tabindex="1" name="username" id="username" size="25" value="" class="inputbox autowidth" type="text">
<input tabindex="2" name="password" id="password" size="25" value="" class="inputbox autowidth" type="text"> 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:54:50.337

您调用方法 [request startAsynchronous]; 这处理与主线程分开的请求，因此 [request responseString]; 当它在那里时仍然是空的。

你可以做两件事。[request startSynchronous] 但这会导致你的 UI 停止。

最好的选择是：

```
- (void)requestFinished:(ASIHTTPRequest *)request
{
   // Use when fetching text data
   NSString *responseString = [request responseString];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
   NSError *error = [request error];
} 
```

您已经设置了委托，所以这应该可以工作。

旁注：ASIHTTPRequest 是一个旧框架，他们停止为它开发。AFNetworking 是一个很好的替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T06:31:30.973

您的代码看起来不错，但请确保您的网络服务使用[Chrome Advanced Rest Client](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo)可以正常工作。

# php - 当在一个页面上调用多个 SSI 文件时，原始查询字符串仍然存在

> ID：12586613
> 
> 赞同：1
> 
> 时间：2012-09-25T15:51:42.017
> 
> 标签：php, apache, ssi

我们有一个包含多个 SSI 语句的页面。例如：

```
<body>
Some text<br/>
<!--#include virtual="/path/file.php?f=foo&b=bar" -->
More text<br/>
<!--#include virtual="path/newfile.php?t=test&qs=querystring" -->
</body> 
```

PHP 文件根据查询字符串值进行一些处理并输出 HTML。

第一个包含工作正常。使用 $_GET，我可以毫无问题地检索 f 和 b 值。问题来自剩余的包含文件。例如，当调用 newfile.php 并尝试检索 t 和 qs 值时，它们是空的。但是，我可以检索 f 和 b。即使将新的查询字符串传递给其他包含文件，原始查询字符串似乎仍然存在。

我已经在本地使用 WAMP 进行了尝试，没有任何问题。因此，这似乎是服务器上的 Apache 或 PHP 配置问题。我们的系统管理员查看了配置和日志文件，并表示一切正常。

关于正在发生的事情有什么想法吗？为什么新的查询字符串值不会覆盖传递给第一个包含文件的原始查询字符串？我到处寻找答案，却完全空手而归。

提前致谢！

# java - 使用方丈测试小程序

> ID：12586614
> 
> 赞同：0
> 
> 时间：2012-09-25T15:51:46.233
> 
> 标签：java, testing, frameworks, applet, abbot

我正在研究 Abbot 下载中的示例，我不太清楚如何使用 Abbot 启动和测试小程序。常见问题解答说要使用 Appletviewer，但它的“用法”指定了 xml 格式。所以我对如何启动小程序有点困惑。

是否有任何代码片段我可以从方丈 junit 测试中看到这是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:21:10.763

如果您正在使用 Swing 并录制和播放测试，请查看 Marathon 开源测试工具。它还生成可以修改的脚本。

# android - 使用预填充的意图插入联系人

> ID：12586619
> 
> 赞同：2
> 
> 时间：2012-09-25T15:52:02.040
> 
> 标签：android, contact

我正在尝试使用意图插入联系人，并且我尝试了从 Android Sdk 获取的这段代码，请在[此处查看](http://developer.android.com/reference/android/provider/ContactsContract.Intents.Insert.html)：

```
ArrayList<ContentValues> data = new ArrayList<ContentValues>();

ContentValues row1 = new ContentValues();
row1.put(Data.MIMETYPE, Organization.CONTENT_ITEM_TYPE);
row1.put(Organization.COMPANY, "Android");
data.add(row1);

ContentValues row2 = new ContentValues();
row2.put(Data.MIMETYPE, Email.CONTENT_ITEM_TYPE);
row2.put(Email.TYPE, Email.TYPE_CUSTOM);
row2.put(Email.LABEL, "Green Bot");
row2.put(Email.ADDRESS, "android@android.com");
data.add(row2);

Intent intent = new Intent(Intent.ACTION_INSERT, Contacts.CONTENT_URI);
intent.putParcelableArrayListExtra(Insert.DATA, data);

startActivity(intent); 
```

我得到一个空的 InsertContact 意图。它让我发疯，为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:58:25.960

尝试这个：

```
Intent addPersonIntent = new Intent(Intent.ACTION_INSERT);
                                        addPersonIntent.setType(ContactsContract.Contacts.CONTENT_TYPE);

                                        addPersonIntent.putExtra(ContactsContract.Intents.Insert.NAME, "name");
                                        addPersonIntent.putExtra(ContactsContract.Intents.Insert.PHONE, "phone");
                                        addPersonIntent.putExtra(ContactsContract.Intents.Insert.EMAIL, "email");
                                        addPersonIntent.putExtra(ContactsContract.Intents.Insert.POSTAL, "address");

                                        startActivityForResult(addPersonIntent, CREATE_NEW); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T12:46:45.607

也许您的`Data`,`Organization`和`Email`Class 的实现是错误的。

这是相同的代码，**但**具有 Classes 的完整实现：

```
ArrayList<ContentValues> data = new ArrayList<ContentValues>();

ContentValues row1 = new ContentValues();
     row1.put(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE);
     row1.put(ContactsContract.CommonDataKinds.Organization.COMPANY, "Android");
data.add(row1);

ContentValues row2 = new ContentValues();
    row2.put(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE);
    row2.put(ContactsContract.CommonDataKinds.Email.TYPE, ContactsContract.CommonDataKinds.Email.TYPE_CUSTOM);
    row2.put(ContactsContract.CommonDataKinds.Email.LABEL, "Green Bot");
    row2.put(ContactsContract.CommonDataKinds.Email.ADDRESS, "android@android.com");
data.add(row2);

Intent intent = new Intent(Intent.ACTION_INSERT, ContactsContract.Contacts.CONTENT_URI);
    intent.putParcelableArrayListExtra(ContactsContract.Intents.Insert.DATA, data);    
startActivity(intent); 
```

**注意**`ContactsContract.Intents.Insert.DATA`：此代码仅适用于 API Level 11 [Android Doc](http://developer.android.com/reference/android/provider/ContactsContract.Intents.Insert.html#DATA)中的 API Level 11 及以上 AS

# mysql - Composite key for multiple tables: do I need a separate query to check table type?

> ID：12586623
> 
> 赞同：0
> 
> 时间：2012-09-25T15:52:12.867
> 
> 标签：mysql

I have a db model similar to this: [Foreign key for multiple tables](https://stackoverflow.com/questions/6895128/foreign-key-for-multiple-tables).

I have `account` table. An `account` may be of type `venue` or `band`. I decided to make a composite key in account table: `id_account | type` - together they'd make up a PK (type may be venue or band or their numeric equivalents)

I know how I'd e.g. select all venues with data from `account` table as well: `SELECT account.*, venue.* FROM venue INNER JOIN account ON (venue.id=account.id AND type=venue)`.

Now, I have an administration panel in which user has his account (which is one of those type - venue or band). When he logs, the panel is different for venue accounts and for bands accounts. **Do I need one query to check the type of account (let's say it's venue) and then another query to the `venue` table to grab his data?** Otherwise - can I do something similar to:

```
SELECT ... FROM IF(type=venue, venue, band) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:56:09.287

There are several approaches to this. It's probably not too expensive to do the two queries but if you want you could join the 'account' query to both 'band' and 'venue' tables (by some unique ID for either) then take the appropriate column from the result depending on the 'account type' column in the result.

# javascript - jQuery 如何处理具有多个匹配项的属性 getter/setter？

> ID：12586624
> 
> 赞同：0
> 
> 时间：2012-09-25T15:52:18.010
> 
> 标签：javascript, jquery, html, dom

我知道 jQuery 选择器返回匹配 DOM 元素的对象，例如

```
typeof $('p'); // returns "object" 
```

但是当我尝试访问对象中的所有元素时，似乎唯一的效果是第一个，例如

```
$('p').html('test'); // only sets the first <p></p> to test 
```

我知道我能做到

```
$('p').each(function() { $(this).html('test') }); 
```

但这是首选方法吗？还有其他方法可以设置质量属性吗？

* * *

编辑：对不起，伙计们，我试图访问错误的标签 :( 它与任何 jQuery 问题无关。但下面所说的一切都很有用，可能对某人有帮助，所以我不会结束这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:53:51.923

如果你想应用到所有的`p`，那么就没有必要循环了。您可以通过以下方式申请：

```
$("p").html('test'); 
```

[jsFiddle](http://jsfiddle.net/swamimayank/jXHRr/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:55:17.663

这是不正确的，`jQuery.html()`将设置**所有**匹配的元素。请参阅文档：

> 设置匹配元素集中每个元素的 HTML 内容。

[http://api.jquery.com/html/](http://api.jquery.com/html/)

请参阅工作示例：http: [//jsfiddle.net/zqYgQ/](http://jsfiddle.net/zqYgQ/)

* * *

但是，您是对的，某些方法仅适用于第一个匹配元素。在这种情况下，您的方法将是最佳实践：

```
$('p').each(function() { 
   $(this).someMethod();
}); 
```

* * *

相反，如果您希望**仅**适用于适用于所有匹配项的方法的第一个元素，则可以使用以下方法之一仅过滤/选择第一个元素：

```
$("p:first").method();

$("p")[0].method(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:55:06.920

不，它不只设置第一个`p`，它会改变所有这些，例如看[这个小提琴](http://jsfiddle.net/bfJcL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:55:16.103

事实并非如此：http: [//jsfiddle.net/TjxyL/](http://jsfiddle.net/TjxyL/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T15:55:27.507

不过你错了，它确实设置了所有元素，请参阅：[Fiddle](http://jsfiddle.net/J7DRC/)

```
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>

<script>
    ​$('p').html('test');​
</script> 
```

# objective-c - 亮点活动

> ID：12586626
> 
> 赞同：0
> 
> 时间：2012-09-25T15:52:25.440
> 
> 标签：objective-c, xcode, events, uiimageview, highlight

我使用 UIImageView 作为按钮，上面有两个不同的图像，一个是正常的，另一个是在单击图像时（突出显示）。我设法创建了一个点击手势识别器并将其链接到图像，以便当我单击时，突出显示它并更改图像，但是当停止单击时如何将其更改回第一个图像？我应该使用长按手势识别器吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:01:02.053

您可以使用 UIButton，将其样式设置为自定义，并直接从 Interface Builder 或以编程方式将常规 UIImages 设置为正常/突出显示状态。没有必要那样做开销。

# vb.net - VB6 / VB.NET 中的 ADODB 十进制

> ID：12586627
> 
> 赞同：0
> 
> 时间：2012-09-25T15:52:30.807
> 
> 标签：vb.net, vb6, decimal, adodb

我有一个使用 ADODB (MDAC 2.8) 的数据访问组件，它使用 ADODB.recordset 来读取包含定义为十进制 (15,2) 的列的 sql 服务器表。

这个数据访问组件是用 VB6 编写的，多年来一直在我们的软件中使用。

现在我们必须编写一个没有 VB6 的兼容组件（所以我们在 VB.NET 中进行了重写）。

为了更轻松地转移到新组件，我们坚持使用 VB.NET 中的 ADODB。

现在的问题是：如果我从包含“50000”（无小数）数据的列中读取一个值并将其作为字符串返回，vb6 组件提供“50000”，而 VBNET 版本提供“50000,00”。

所以这可能只是一个表面问题，因为内部表示是可以的，但我想知道是否有一个开关来确定如何返回小数。

另外：欢迎在此范围内引用此兼容性问题的任何链接...

问候克劳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:38:48.610

我在这里看到两个大错误：

> 为了更轻松地转移到新组件，我们坚持使用 VB.NET 中的 ADODB。

这没有充分的理由。使用 ADO.Net API 而不是旧的 ADODB，您将很快（而不是稍后）感谢自己。

> 如果我从包含“50000”（无小数）数据的列中读取一个值并将其作为字符串返回

啊。将数值数据保留为数值数据。在整个代码中使用 Decimal 类型，直到您实际向用户显示数据之前的最后一刻。

# ruby-on-rails - Ruby on Rails 3 获取 Dropbox 文件夹内容

> ID：12586634
> 
> 赞同：1
> 
> 时间：2012-09-25T15:52:49.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, directory, dropbox

我正在尝试开发一个应用程序，它将检索特定 Dropbox 文件夹（从用户指定的文件夹）中的文件和文件夹列表。这样做的最好方法是什么？如果可能的话，可能会有一些代码片段，因为我还是 Rails 的新手。

# sql - 需要在单个 Select 语句中重复和计算值

> ID：12586637
> 
> 赞同：1
> 
> 时间：2012-09-25T15:53:07.780
> 
> 标签：sql, select, record, repeat

我希望有人可以帮助我解决我的问题。我需要在单个 SELECT 语句中创建以下内容（我们使用的系统在 Excel 中有一些处理单个 SELECT 的数据透视表）：

我有一个 INL（发票行）表，其中包含很多字段，但重要的是日期。

```
INL_ID    DATE
  19    2004-03-15 00:00:00.000
  20    2004-03-15 00:00:00.000
  21    2004-03-15 00:00:00.000
  22    2004-03-16 00:00:00.000
  23    2004-03-16 00:00:00.000
  24    2004-03-16 00:00:00.000 
```

现在，我还有一个通过 ID 字段与 INL 表相关的 ILD（发票行详细信息）。从第二个表中，我需要使用 scu_qty 字段来“重复”结果表中第一个表中的值。

我们需要的 ILD 表值是：

```
INL_ID    scu_qty
19          1
20          1
21          1
22          4
23          4 
```

现在，对于 scu_qty，我需要重复第一个表的值，并为每条记录添加一天，scu_qty 是我们在 ILD 表中销售的服务的天数。

所以我需要得到类似的东西（我将显示你可以看到的 INL_ID 22 在 SCU_QTY 中的值不同于 1）。选择的结果必须给我类似的东西：

```
INL_ID  DATE
22  2004-03-15  0:00:00
22  2004-03-16  0:00:00
22  2004-03-17  0:00:00
22  2004-03-18  0:00:00 
```

在这个信息中我只写了需要重复和计算的字段，当然我会需要更多的字段，但是会从INL表中重复，所以我不放，以免你混淆。

我希望有人能帮我解决这个问题，这份报告对我们来说非常重要。非常感谢提前

（对不起我的英语，那不是我的第一语言）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:45:32.650

```
select INL.INL_ID, `DATE`
from 
    INL
    inner join
    ILD on INL.INL_ID = ILD.INL_ID
    inner join (
        select 1 as qty union select 2 union select 3 union select 4
    ) s on s.qty <= ILD.scu_qty
order by INL.INL_ID 
```

如果数量有点大，您将需要一个表格，而不是那个子选择。或者告诉您的 RDBMS 是什么，并且可以有更简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:10:33.467

```
SELECT INL_ID, scu_qty, CalculatedDATE ...  
FROM INL  
INNER JOIN ILD ON ...  
INNER JOIN SequenceTable ON SequenceTable.seqNo <= ILD.scu_qty
ORDER BY INL_ID, SequenceTable.seqNo 
```

根据您的 SQL 风格，您将需要查找日期操作函数来执行
`CalculatedDATE = {INL.DATE + SequenceTable.seqNo (days)}`

# android - Post finished layout of inflation

> ID：12586640
> 
> 赞同：0
> 
> 时间：2012-09-25T15:53:32.833
> 
> 标签：android, android-layout

I inflate my custom-classed-layout but I can't access `findViewById` on `this` inside the constructor because the fields don't exist yet.

I can't use `onLayout` because `onLayout` is called whenever children are added/removed so my code runs multiple times when I only want it to run once.

I tried `onLayoutFinished`, but that doesn't always work.

I would like to leverage something like a `onInitialLayoutFinished` which of course isn't a real system function. What should I be using here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:00:07.927

`onLayoutFinished` method doesn't exist. You have to Override `onFinishInflate`:

```
 @Override
    protected void onFinishInflate() {
        super.onFinishInflate();    
        mListView = (ListView) findViewById(R.id.listView);
    } 
```

[DOC](http://developer.android.com/reference/android/view/View.html#onFinishInflate%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:03:02.650

Have you tried:

@Override

```
protected void onFinishInflate()

{
    // TODO Auto-generated method stub
    super.onFinishInflate();
} 
```

# perl - Perl：使用子例程原型的正确方法 [%@$]

> ID：12586641
> 
> 赞同：0
> 
> 时间：2012-09-25T15:53:35.637
> 
> 标签：perl, parameter-passing

```
sub Function(\[$@%]); 
```

这**适用**于 Windows（Windows 7 上的 Perl v5.14.2），并接受所有 3 种参数。哈希、标量和列表。

然而，Linux 上的相同原型（CentOS 版本 4.5 上的 Perl 5.6.1）给了我

```
Malformed prototype for main::Function: \[%@$]. 
```

**在这两个方面，我都在做`use 5.006`.** 否则，脚本完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:56:13.957

该原型在 5.6.1 中并不存在。这是最近添加的，因为它是在 5.14 中添加的。（这意味着它在所有受支持的 Perl 版本中。）

您不能将数组或哈希传递给子，只能传递标量列表。原型导致调用代码获取引用并传递它。这是你可以通过改变明确地做的事情

```
sub Function(\[$@%]) { }
Function($s);
Function(@a);
Function(%h); 
```

到

```
sub Function { }
Function(\$s)
Function(\@a)
Function(\%h) 
```

无论如何，原型通常是要避免的。

# woocommerce - woocommerce 更新价格和税额

> ID：12586644
> 
> 赞同：2
> 
> 时间：2012-09-25T15:53:53.503
> 
> 标签：woocommerce

Woocommerce 显示不含税的价格。有一个选项可以显示加税的价格，但前提是您在后端输入加税的价格。

该项目需要在产品类别和单页上显示含税价格以及税额。选择产品变体时需要更新价格和税额。它还需要动态地从系统中提取税值，以便在后端更新税率时在前端反映变化。

```
<?php
/**
 * Single Product Price, including microdata for SEO
 *
 * @author      WooThemes
 * @package     WooCommerce/Templates
 * @version     1.6.4
 */

global $post, $product;
?>

<div itemprop="offers" itemscope itemtype="http://schema.org/Offer">

<p itemprop="price" class="price"><?php echo $product->get_price_html(); ?></p>

    <?php 
    $price = $product->get_price();
    $vat = number_format( $product->get_price()*0.20, 2, '.', ','); 
    $pricePlusVat = number_format( $price + $vat, 2, '.', ',');
    ?>

    <p class="rrp"><?php echo $rrp; ?></p>

    <p itemprop="price" class="price">
        <span class="price-label">Our Price:</span>
        <span class="full-price">&pound;<?php echo $pricePlusVat; ?></span>
        <br/>
        <span class="vat-label">inc. VAT 20% ( &pound;<?php echo $vat; ?> )</span>
    </p>

    <link itemprop="availability" href="http://schema.org/<?php echo $product->is_in_stock() ? 'InStock' : 'OutOfStock'; ?>" />

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T10:20:25.163

这个问题很久以前就被问过了。现在，这实际上在 Woocommerce 中无需扩展即可实现，认为 raison 提供的扩展在某些情况下可能很有用。

假设您的商店设置为显示不含增值税的价格，您也可以使用以下方式显示含税价格。

您需要将模板文件从 woocommerce 插件目录复制到您的主题目录。

所以对于单个产品页面主题/woocommerce/single-peoduct/price.php

```
<p class="price-incvat"> <?php echo woocommerce_price($product->get_price_including_tax()); ?> Inc VAT</p> 
```

对于循环，例如产品类别主题/woocommerce/loop/price.php

```
 <span class="price-incvat"> <?php echo woocommerce_price($product->get_price_including_tax()); ?> Inc VAT</span> 
```

对于购物车页面主题/woocommerce/cart/cart.php

```
<?php $row_price_incvat = $_product->get_price_including_tax( $cart_item['quantity'] ); ?>
                            <span class="price-incvat"> <?php echo wc_price( $row_price_incvat ); ?> Inc VAT</span> 
```

对于结帐页面主题/woocommerce/checkout/review-order.php

```
<?php $row_price_incvat = $_product->get_price_including_tax( $cart_item['quantity'] ); ?>
                                <span class="price-incvat"> <?php echo wc_price( $row_price_incvat ); ?> Inc VAT</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T09:39:06.523

这个扩展应该可以解决问题：http: [//codecanyon.net/item/woocommerce-tax-toggle/7796887](http://codecanyon.net/item/woocommerce-tax-toggle/7796887)

# php - 有效监控新文件的目录并在 Windows 上运行 PHP 脚本

> ID：12586645
> 
> 赞同：1
> 
> 时间：2012-09-25T15:53:54.720
> 
> 标签：php, windows

将文件添加到特定目录时，是否有任何简单的方法可以运行 PHP 脚本？

在 linux 上有完美的工具，比如 inotify/dnotify，在 Windows 上找不到。

如果我运行一个无限循环的 PHP 脚本 - 这会对 cpu 性能产生重大影响（如果它所做的只是检查文件夹的内容）？

我读到可以使用 Win32::ChangeNotify，但我是 Perl 的菜鸟，所以我不知道如何设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:58:26.243

管理此问题的最简单方法是创建一个每分钟运行一次脚本的 cron 作业（或者您希望检查的频率）。

*编辑*- 再次阅读这篇文章，我发现你正在使用 Windows。我想您可以使用计划任务来执行此操作。

# php - MongoDB Windows服务一次又一次停止工作

> ID：12586647
> 
> 赞同：0
> 
> 时间：2012-09-25T15:54:07.483
> 
> 标签：php, mongodb, windows-7-x64

有人可以请帮助我找出 Windows 7 上的 MongoDb 服务损坏。每当我重新安装服务并且所有使用日志正确的语法等时，它都可以完美运行。

当我在每次重新安装 mongodB 服务后重新启动我的系统时，它就会停止工作。不知道系统重新启动后服务中的问题是什么，它停止工作并在日志文件中出现以下错误

```
Unable to check for journal files due to: boost::filesystem::basic_directory_iterator     constructor: The system cannot find the path specified: "f:\server\mongodb\mongodb-win32-i386-2.2.0\data\db\journal" 
```

我配置的所有路径如下：

```
mongod.exe --install --config f:\server\mongodb\mongodb-win32-i386-2.2.0\conf\mongodb.conf --logpath f:\server\mongodb\mongodb-win32-i386-2.2.0\logs\mongodb.log 
```

服务仅在系统重新启动后才停止工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:12:10.197

您必须确保：
1\. 有一个文件夹 c:\data\db。
2\. 您的计算机没有意外关机。

我通过从 c:\data\db 中删除所有内容解决了这样的问题：)

# ios - xcode仅在单步执行时重复触发相同的断点

> ID：12586649
> 
> 赞同：2
> 
> 时间：2012-09-25T15:54:08.717
> 
> 标签：ios, xcode, breakpoints

我在 Xcode 4.5 上（尽管以前的版本发生过这种情况），我发现当我设置断点时，有时它们会反复命中，而 NSLogging 我的逻辑只遍历一次。我已经排除了通常的怀疑，例如我的逻辑中的一些基本问题，即当程序停止在一个时无意中调用断点。我的结论是调试器存在一个错误，导致断点反复命中，但即使我单步执行几行代码然后继续运行，这似乎也会发生。

有没有人见过这种情况，甚至更好地知道缓解这个问题的方法？

# android - 选项卡未显示 Holo 主题

> ID：12586651
> 
> 赞同：2
> 
> 时间：2012-09-25T15:54:22.277
> 
> 标签：android, themes, tabactivity

我想构建一个选项卡式界面，所以我从 API 演示示例项目中获取了 Tabs3 视图，但是由于某种原因，Holo 主题没有应用于我的应用程序[它应该看起来像这样](http://i.stack.imgur.com/bdbGx.png) [但看起来像这样](http://i.stack.imgur.com/QmorD.png)。

这是我清单中的相关位：

```
<application 
  android:label="@string/app_name" 
  android:icon="@drawable/ic_launcher"
  android:theme="@android:style/Theme.Holo.Light">
       <activity android:name="Tabs"
           android:label="@string/app_name" > 
```

在这一点上，我所做的只是复制 Tabs3 类（重命名为 Tabs）、List1、List8 和 Controls1，以及相关的布局和字符串。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:57:04.230

您使用了错误的标签。这是一个完整的教程如何使用`ActionBar.Tab`。[点我！](http://arvid-g.de/12/android-4-actionbar-with-tabs-example)
提醒一下，`ActionBar.Tab`仅适用于 API Level 11 或更高版本，如果要支持 Android API Level 10 (Android 2.3) 或更低版本，则必须使用[ActionBarSherlock](http://actionbarsherlock.com)。

自 API 级别 15 起，Holo 主题仅在 Android 中可用。如果您想在较低的 API 级别上使用 Holo 主题，您应该查看[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:27:30.057

Holo 主题适用于 API 级别 11 及更高级别。这可能是它不起作用的原因。如果有的话，您可以将 ActionBarSherlock 用于较低的 API 级别。

# c# - 如何从列表中选择

> ID：12586653
> 
> 赞同：1
> 
> 时间：2012-09-25T15:54:24.580
> 
> 标签：c#, linq

我有一个名为 myList 的 List<string[]>：

```
 [0] "ABC" "Item Description Here" "Item Code Here"
   [1] "DEF" "Item Description Here" "Item Code Here"
   [3] etc, etc... 
```

这就是我填充 myList 的方式：

```
...
while (myReader.Read())
{
   string[] row = new string[myInt];

   for (int i = 0; i < myInt; i++)
   {
      row[i] = myReader[i].ToString();
   }

myList.Add(row);    
}
... 
```

现在我需要搜索 myList 并返回一个名为 newList[] 的新 List<string[]>，其中包含 1 个或多个 string[]，其中第一个字符串与关键字（“ABC”、“DEF”等）匹配。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:57:10.097

1) 如果您只搜索一个关键字：

```
var result = myList.Where(s=>s[0].Equals("\"ABC\"")).ToList(); 
```

2) 如果`checklist`包含与以下相同数量的元素`myList`：

```
List<string> checklist = new List<string>() {"ABC","DEF"};
var result = myList.Where((s,i)=>s[0].Equals(checklist[i])).ToList(); 
```

3）如果它可以匹配清单中的任何关键字，则比：

```
var result = myList.Where(s=>checklist.Contains(s[0])).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:58:23.900

定义关键字列表：

```
var keywords = List<string>() {"ABC", "DEF", ...}; 
```

然后你可以使用 LINQ 来过滤：

```
var newList = list.Where(ar => keywords.Contains(ar.First()); 
```

或者：

```
var newList = list.Where(ar => keywords.Any(k => k.Equals(ar.First())); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T15:58:41.313

```
var result = myList.Where(s=> s.Length >= 1 && s[0].Equals("ABC")).ToList(); 
```

# javascript - 使用 jquery 添加不同的类以列出项目父项

> ID：12586655
> 
> 赞同：2
> 
> 时间：2012-09-25T15:54:33.547
> 
> 标签：javascript, jquery, css

我有一个不同深度的列表：

```
<ul>
  <li>Item 1</li>
  <li>Item 2
    <ul class="sub-menu">
      <li>Sub item 1</li>
      <li>Sub item 2</li>
      <li>Sub item 3
        <ul class="sub-menu">
          <li>Subsub item 1</li>
          <li>Subsub item 2</li>
        </ul>
      </li>
      <li>Sub item 4</li>
    </ul>
  </li>
  <li>Item 3</li>
</ul> 
```

我正在使用以下 jquery 脚本向父母添加一个类：

```
$("ul li ul").parent().addClass("menuparent"); 
```

有没有办法将此类仅添加到顶级 parent`li`和所有其他（更深的） parent 的不同类`li`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:57:30.423

您可以进行最近的检查，看看是否有任何父母是 li。

```
if ($element.closest("li").length === 0) {
  $element.addClass("topLvl");
} else {
  $element.addClass("innerLvl");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:22:20.663

根据您希望类的名称是什么，我会使用它：

```
$(function(){
    $('ul li').addClass(function(){
        return 'depth-' + $(this).parents('ul').length;            
    });        
});​ 
```

您可以在这里看到一个工作示例：http: [//jsfiddle.net/russelluresti/3peCS/](http://jsfiddle.net/russelluresti/3peCS/)

如果你想要特殊的类名，而不是数字加法，你必须运行一个 switch 语句。但概念是一样的。使用内部函数`addClass`来确定深度（通过使用`parents()`）并返回适当的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:17:39.737

这是一个递归解决方案：

```
function markNestedLists(par, level){
    par.addClass("level-" + level);

    par.children("li").children("ul").each(function(){
        markNestedLists($(this), level + 1);
    });     
}
markNestedLists($("ul").first(), 1); 
```

[http://jsfiddle.net/h9xvY/1/](http://jsfiddle.net/h9xvY/1/)

如果您知道最顶层 UL 的父级 ID，则可以像这样使用它：

```
markNestedLists($("#myParent > ul"), 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:07:34.500

理想情况下，有一些绝对引用，例如 ID 或其他 top-most 独有的可搜索属性`ul`，但您可以解决这个问题。无论哪种方式，重要的是子选择器：`>`而不是隐式后代选择器。它将指定您只想找到比`ul`该顶级元素低这么多级别的 's。

在您的基本情况下，当您使用：

```
$("ul li ul").parent() 
```

你得到 all`ul`是any 的*任何*后代（孩子、孙子、曾孙...） ，*它们是 any**的* `li`后代。相反，你会使用： *`ul`*

 *```
$("ul#topmost > li > ul").parent() 
```

这只会让你得到一个that`ul`的子*节点*，它是树顶部特定节点的*子节点。*`li`*`ul`*

 *如果树的顶部没有 id 或其他显式选择器，则顶层`ul`本身必须是 a `div`or`body`或其他块级元素的子级。因此，只需添加顶层的父级，您就可以清楚地获得所需的层次结构`ul`：

```
$("body > ul > li > ul").parent() 
```

另外：我忘记了您还希望能够`li`选择上面选择器未捕获的其他 parent 。您可以使用`:not`选择器或 JQuery 的`.not()`方法来执行此操作，如下所示：

```
$("li>ul:not(body > ul > li > ul)").parent() 
```

要将这两行合二为一，您首先将`deeperParent`类添加到所有此类`li`，然后过滤顶级父级，并`menuParent`仅在那里分配：

```
$("li>ul").parent().addClass('deeperParent').filter('body > ul > li').
     removeClass('deeperParent').addClass('menuParent') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T16:06:33.243

这是一种方法。

```
$("ul li ul").parent().addClass("otherclass");
$("ul li >ul").parent().removeClass("otherclass").addClass("menuparent");
​ 
```

[http://jsfiddle.net/MdBa5/](http://jsfiddle.net/MdBa5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T16:10:44.500

尝试：

```
$("ul:first>li").addClass("menuparent")
    .find('li>ul').parent().addClass('otherparent'); 
```

[http://jsfiddle.net/3UcdM/](http://jsfiddle.net/3UcdM/)**

# java - Java，创建扩展 JComponent 的线对象

> ID：12586656
> 
> 赞同：0
> 
> 时间：2012-09-25T15:54:34.473
> 
> 标签：java, draw, extend, jcomponent

我正在编写一个java小程序。

在这个小程序中，我需要在图像上绘制一些标记（作为红色圆圈）和一些线条。

我已经成功地实现了标记，作为 JComponent 的扩展，并且我还为此添加了一些鼠标侦听器。

我对线对象有很大的问题。我创建了另一个扩展 JComponent 的对象，除了坐标系统存在一些问题之外，setDimension 也会带来麻烦。例如，它拦截所有标记的点击。

这不是使对象“尺寸”更接近线条的方法，因为我不能只绘制垂直或水平线......

谢谢大家。

编辑

```
public class Path extends JComponent {
...
    // stroke of the line
    private Stroke spessore =  new BasicStroke(SPESSORE);

    // coordinates
    private double x, y, x_2, y_2;

// ZoomManager is an object. In this project I can zoom in and zoom out the
    // image, so this object convert coordinates get on the superior JPanel in 
    // coordinates on the image real-sized.
    public Path(double x, double y, ZoomManager zoom) {//, double x_2, double y_2, ZoomManager zoom) {
            super();

            // this function return the coordinates on the real-sized image
            Point a = DrawableObjects.getScaledCoordinates(x, y, zoom);
            this.x = a.x;
            this.y = a.y;

            this.x_2 = a.x;
            this.y_2 = a.y;

            updateBoundsAndSize(zoom);

            // this was only for test...
            this.addMouseListener(new MouseListener(){

        @Override
        public void mouseClicked(MouseEvent arg0) {
            System.out.println("CLICK!");
                    }
                    ...
            });
    }

    // this function is called during the mouse dragging for drow the line.
    // it gets the coordinates, convert them, save them and update the bounds and 
    // size of the object
    public void setArrivePoint(Point a, ZoomManager zoom) {
            Point p = DrawableObjects.getScaledCoordinates(a.x, a.y, zoom);
            this.x_2 = p.x;
            this.y_2 = p.y;
            updateBoundsAndSize(zoom);
    }

    // update the bounds of the object, the origin point of the rectangle is the
    // top-left coordinate build with the original coordinates. The width and height of the rectangle are obtained by subtraction. 
    private void updateBoundsAndSize(ZoomManager zoom) {

            Point p = DrawableObjects.getPanelCoordinates(x, y, zoom);
            Point a = DrawableObjects.getPanelCoordinates(x_2, y_2, zoom);

            int min_x = (int)Math.min(p.x, a.x) - SPESSORE;
            int min_y = (int)Math.min(p.y, a.y) - SPESSORE;

            if (min_x < 0)
                    min_x =0;

            if (min_y < 0)
                    min_y = 0;

            int w = (int) (Math.max(a.x, p.x) - min_x) + SPESSORE;
            int h = (int) (Math.max(a.y, p.y) - min_y) + SPESSORE;

            setBounds(new Rectangle(min_x, min_y, w, h));
            repaint();
    }

    // drawing function   
    @Override
    protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            Graphics2D antiAlias = (Graphics2D) g;
            antiAlias.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            // get ZoomManager from the superior object
            ZoomManager zoom = ((JPanelImmagine)this.getParent()).zoom;

            antiAlias.setColor(DEFAULT_COLOR);
            antiAlias.setStroke(spessore);

            Point[] coordinates = updateCoordinates(zoom);

            Line2D line = new Line2D.Double(coordinates[0], coordinates[1]);

            antiAlias.draw(line);

    }

    // translate coordinates from superior jpanel to this object
    private Point[] updateCoordinates(ZoomManager zoom) {

            Point[] output = new Point[2];

            Point p = DrawableObjects.getScaledCoordinates(x, y, zoom);
            Point a = DrawableObjects.getScaledCoordinates(x_2, y_2, zoom);

            double o_x = this.getBounds().getCenterX();
            double o_y = this.getBounds().getCenterY();
            Point origin = new Point ((int)o_x, (int)o_y);

            output[0] = calculateCoordinates(p, origin);
            output[1] = calculateCoordinates(a, origin);

            return output;
    }

    private Point calculateCoordinates(Point p, Point origin) {

            double new_x = p.x - origin.x;
            double new_y = p.y - origin.y;

            return new Point((int)new_x, (int)new_y);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:48:14.920

用[这个方法](https://stackoverflow.com/questions/12592307/java-mouse-hit-detection-with-overlapping-jcomponents/12593079#12593079)解决！

我不得不完全改变解决问题的方法。

# asp.net - 如何存储以及应该使用哪个对象来存储值以供以后使用

> ID：12586657
> 
> 赞同：0
> 
> 时间：2012-09-25T15:54:36.277
> 
> 标签：asp.net

我有一个三个 texbox 和 Next 和 Prevoius BUTTON 。

当我单击下一步时，应该获取与 AUTOGENERATED ID 相关的下一个值，当我单击上一个时，应该获取上一个值。

假设，我将当前记录显示为 2，当我单击下一个 3 时应该显示，但是当我单击前一个 1 时应该显示。

但我的问题是，每当我单击**NEXT**或**PREVOIUS**按钮时，我都必须从数据库中获取数据。我不想这样做，我想将上一条和下一条记录存储在某个对象中。我将如何这样做。我不想使用视图状态或缓存或会话或应用程序对象。是否有任何不同的逻辑。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:02:05.870

如果您不再次加载页面，请使用 an`asp:HiddenField`来存储该值。

或者...使用 cookie

然后检查隐藏字段或特定 cookie 是否分配了任何值

1.  创建一个 cookie，用于存储您从数据库中获得的数据。

2.  检查 cookie 是否不为空，如果为真，则获取它的值，否则转到数据库并使用该值创建 cookie

**如何操作 cookie：**

```
 HttpContext.Current.Request.Cookies
.Add(new HttpCookie("myCookie", "1"){ Expires = DateTime.Now.AddMinutes(5) });

   var myCookie = HttpContext.Current.Request.Cookies["myCookie"];
   if (myCookie != null)
       Response.Write(myCookie.Value); 
```

# c - 从 bmp 文件中获取不正确的值

> ID：12586658
> 
> 赞同：0
> 
> 时间：2012-09-25T15:54:38.553
> 
> 标签：c, image, image-processing

> **可能重复：**
> [如何在 c 中读取二进制文件？（视频、图像或文本）](https://stackoverflow.com/questions/2307057/how-to-read-a-binary-file-in-c-video-images-or-text)

我正在尝试使用 C 程序读取[bmp 文件的内容。](http://en.wikipedia.org/wiki/BMP_file_format)我能够阅读内容，但读取的值与我的预期相矛盾。我的代码是：

* * *

```
FILE *fp=NULL;
fp=fopen("C:\\Users\\Saurabh\\Pictures\\nice.bmp","r");

if(fp!=NULL)
{
    printf("%c\n",fgetc(fp));
    printf("%c\n",fgetc(fp));

    printf("%c\n",fgetc(fp));
    printf("%c\n",fgetc(fp));
    printf("%c\n",fgetc(fp));
    printf("%c\n",fgetc(fp));
}

else
    printf("Error reading the file"); 
```

* * *

我只是在这里逐字节阅读，只是为了理解。读取的前两个字节`BM`是正确的。接下来的四个字节读取`*t`。预期值为 40。请参阅[格式](http://en.wikipedia.org/wiki/BMP_file_format)。`40`有人可以解释一下正在发生的事情，如果我需要执行一些转换，我该如何获得价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:59:48.800

我相信你的问题是你如何打开文件：

```
fp=fopen("C:\\Users\\Saurabh\\Pictures\\nice.bmp","r"); 
```

“r”用于 ASCII 读取，您想以二进制打开它：

```
fp=fopen("C:\\Users\\Saurabh\\Pictures\\nice.bmp","rb"); 
```

**编辑：** `fgetc()`返回一个 int，所以我尝试使用一个 int 来获取返回值，您还想以十六进制查看结果，所以让我们使用十六进制输出格式：

```
FILE *readf;
int i;
unsigned int size = 0;

//Open file
readf = fopen("blackbuck.bmp", "rb");

i = fgetc(readf);
printf("%#x\n",i);   // 0x42
i = fgetc(readf);
printf("%#x\n",i);   // 0x4D
for(i=0; i<3; i++)
    size |= fgetc(readf) << (i*8); // 0xC0036 
```

此更新将前两个值作为 0x42 0x4D，然后连接接下来的 3 个字节，给出位图的大小（0xC0036 = 786486 字节）

我使用这张图片进行测试： http: [//people.sc.fsu.edu/~jburkardt/data/bmp/blackbuck.bmp](http://people.sc.fsu.edu/~jburkardt/data/bmp/blackbuck.bmp)

您可以看到结果具有 bmp 标头的正确字节码`0x42 0x4d` `the header field used to identify the BMP & DIB file is 0x42 0x4D in hexadecimal, same as BM in ASCII`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:19:40.020

虽然我同意 Mike 的观点，即您应该以二进制模式阅读此文件，但它不应该给您带来问题。它最终会，但前 6 个字符不应中断，除非任何大小的字节包含 10 或 13。

为了读取 int，您可以执行类似的操作

```
int result;
fread(fp, sizeof (int), 1, &result); 
```

但请注意，这不是便携式的。（它至少假定 32 位整数和本机字节顺序。BMP，由于它们的起源，是小端的......如果你只是在一个大的地方一次读完它，大小会很古怪 -字节序机。）

另一种方式：

```
unsigned long result = 0;
for (int i = 0; i < 4; ++i) {
     result |= (unsigned long) fgetc(fp) << (i * 8);
} 
```

这至少应该总是读取正确的字节数并考虑字节序。并且`unsigned long`足够长以容纳任何 32 位数字，而`int`（即使是无符号的）也不能保证是。

# c++ - VS2012 迁移“HasTrailingSlash”问题

> ID：12586675
> 
> 赞同：0
> 
> 时间：2012-09-25T15:55:07.673
> 
> 标签：c++, visual-studio-2005, migration, visual-studio-2012

我正在尝试将 VS 2005 项目迁移到 VS 2012。但它报告以下错误。

> "HasTrailingSlash" 函数只接受一个标量值，但它的参数 "$(IntDir)" 计算结果为 "C:\Users\Mahesh\HelloWorld_obj\DebugW7-Win32;\" 这不是一个标量值。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.Cpp.targets

我理解它是一个字符串文字而不是一个标量值。但是如何解决这个问题。任何人都可以分享你的想法。谷歌搜索没有多大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:59:44.370

尝试失败：尽管将属性表中用作宏的分隔符更改为`/`from不起作用。`;``intermediate directory`

成功：我在记事本中打开了属性表，并删除了用户宏“ObjOut”的以下行，该宏用作我的项目的中间目录。

```
InheritsFromParent="true"
Delimiter=";" 
```

`"Macro inherits from parent property sheets"`当未选中宏时，同样可以通过 IDE 实现。

希望这对将来的某人有用。[我也在MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/03056705-ef73-45fe-87ff-12960f4aeb0d/)上发布了相同的内容。

# php - php、imap、gmail 和可怕的无法连接到“{imap.gmail.com:993/imap/ssl}”

> ID：12586684
> 
> 赞同：0
> 
> 时间：2012-09-25T15:55:37.553
> 
> 标签：php, ssl, gmail, imap

在我的本地主机上，没问题，php 脚本有效。在我的主机服务器上，可怕的“无法连接到'{imap.gmail.com:993/imap/ssl}'”

编码：

```
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$inbox = imap_open($hostname,$username, $password) or die('Cannot connect to Gmail: ' 
. imap_last_error()); 
```

他们的 php 配置似乎具有所有必要的功能：PHP 版本 5.2.17

'./configure' '--prefix=/usr/local/php5' '--with-libdir=lib64' '--sysconfdir=/etc' '--disable-rpath' '--enable-cli' '- -disable-cgi' '--with-config-file-path=/usr/local/lib' '--disable-all' '--enable-libxml' '--with-libxml-dir=/usr' ' --with-openssl=/usr''--with-kerberos=/usr''--with-pcre-regex=/usr'''--with-zlib=/usr'''--with-zlib-dir= /usr' '--enable-bcmath' '--enable-magic-quotes' '--with-bz2=/usr' '--enable-calendar' '--enable-ctype' **'--with-curl= /usr' '--with-curlwrappers'**'--enable-dom' '--enable-exif' '--enable-filter' '--with-pcre-dir=/usr' '--enable-ftp' '--with-openssl-dir=/ usr' '--with-gd=/usr' '--enable-gd-native-ttf' '--with-jpeg-dir=/usr' '--with-png-dir=/usr' '-- with-zlib-dir=/usr' '--with-xpm-dir=/usr' '--with-ttf=/usr' '--with-freetype-dir=/usr' '--with-t1lib= /usr' '--with-gettext=/usr' '--with-gmp=/usr' '--enable-hash' '--with-iconv' '--enable-mbregex' '--enable-mbstring ' '--with-mcrypt=/usr' '--with-mhash=/usr' '--with-mime-magic=/usr/share/magic.mime' '--with-mysql=/usr' ' --with-mysqli=/usr/bin/mysql_config' '--with-sqlite' '--enable-pdo' '--with-pdo-sqlite' '--with-pdo-mysql=/usr' '--enable-posix' '--enable-reflection' '--enable-session' '--enable-simplexml' '--enable-sockets' '--enable -spl' '--enable-soap' '--enable-json' '--enable-inline-optimization' '--enable-tokenizer' '--with-regex=system' '--enable-xml' ' --with-libexpat-dir=/usr' '--enable-xmlreader' '--with-xmlrpc' '--enable-xmlwriter' '--with-xsl=/usr' '--enable-zip'--enable-xml' '--with-libexpat-dir=/usr' '--enable-xmlreader' '--with-xmlrpc' '--enable-xmlwriter' '--with-xsl=/usr' ' --启用-zip'--enable-xml' '--with-libexpat-dir=/usr' '--enable-xmlreader' '--with-xmlrpc' '--enable-xmlwriter' '--with-xsl=/usr' ' --启用-zip'**'--with-imap=/usr/lib64/dovecot/imap' '--with-imap-ssl'** '--with-pear=/usr/local/lib/php' '--with-apxs2=/usr /local/apache/bin/apxs'

卷曲

启用 cURL 支持 cURL 信息 libcurl/7.15.5 OpenSSL/0.9.8b zlib/1.2.3 libidn/0.6.5

地图

IMAP c-Client 版本 2004 SSL 支持已启用 Kerberos 支持已启用

openssl

启用 OpenSSL 支持 OpenSSL 版本 OpenSSL 0.9.8e-fips-rhel5 2008 年 7 月 1 日

* * *

那么有人可以提示一下它应该抛出一个无法连接到错误的东西吗？它甚至不做 imap_open。警告：imap_open() [function.imap-open]：无法打开流 blahblah 帮助？

# ruby-on-rails - 在 Rails 中从 AJAX 调用渲染 JSON

> ID：12586685
> 
> 赞同：1
> 
> 时间：2012-09-25T15:55:37.717
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我有一个 ajax 调用来从返回 JSON 数据的 Flickr API 获取信息。我想在我的视图中显示来自 JSON 数据的值。我通过使用 jQuery 编辑一些 innerHTML 来做到这一点。我遇到的问题是数据未定义，所以它看起来像是一个范围界定问题。

照片.js

```
jQuery(function() {
  $('#<%=p[:id]%>').click(function (e) {

    //ajax call to fetch photo info

    var fetch_id = '<%=p[:id]%>';
    var fetch_secret = '<%=p[:secret]%>';  

    $.ajax({
      type: 'GET',
      url: '/photos/fetch_info',
      dataType: 'json',
      data: { 'id' : fetch_id, 'secret' : fetch_secret },
      success: function(data){

        console.log(data)  //returns Object
        console.log(data.title)  //returns appropriate title

        //edit innerHTML of basic_modal
        $('.basic_modal').html(
          "<div id='modal_image'><%= escape_javascript(image_tag p[:url]) %></div><div id='photo_title'><%=data.title %></div>"
         );

        //load modal
          $('.basic_modal').modal({
          overlayClose:true
        });

      } //end success: function(result)
    }); 
```

当我将 data.title 打印到控制台时，我得到了适当的标题。但是，当我尝试编辑 HTML 和 render`<%=data.title %>`时，我得到一个未定义的变量/方法错误。

关于如何在视图的模式中显示数据的任何提示？

这是我的控制器：

```
def fetch_info

  @info = flickr.photos.getInfo(:photo_id => params[:id], :secret=> params[:secret])

  respond_to do |format|
    format.json { render :json => @info }
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:01:22.423

```
 var result = jQuery.parseJSON(data); 
```

你不需要这样做，因为`datatype:JSON`已经解析了数据

```
$('.basic_modal').html(
          "<div id='modal_image'><%= escape_javascript(image_tag p[:url]) %>
</div><div id='photo_title'><%="+data.title+" %></div>"
         ); 
```

这可能会帮助你

# asp.net - gridview 按钮字段

> ID：12586687
> 
> 赞同：1
> 
> 时间：2012-09-25T15:55:40.923
> 
> 标签：asp.net, gridview

我有一个带有按钮字段的网格视图。我想更新我的数据库中的表并更改按钮单击时的按钮图像。我也可以访问行索引的最佳事件是什么？我尝试使用 RowCommand 事件，但无法从该事件访问行索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:06:46.087

您可以尝试使用此代码 - 基于`CommandArgument`

```
void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    if(e.CommandName=="Test")
    {
      int index = Convert.ToInt32(e.CommandArgument);
      GridViewRow row = CustomersGridView.Rows[index];
    }
  } 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.gridview.rowcommand (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.gridview.rowcommand(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:08:36.883

而不是`asp:ButtonField`使用`asp:TemplateField`和`asp:Button`里面那个。设定一个`CommandName`说法，**MyCommand**。现在在`RowCommand`事件中，这样做

```
var clickedRow = (GridViewRow)((Button)sender).NamingContainer;
var clickedIndex = clickedRow.RowIndex; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:03:50.520

我刚刚检查了这里的文档[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

如果您查看“注意”部分（为方便起见，请参见下文），您应该能够从 CommandArguement 属性中获取 RowIndex：

> 注意 若要确定引发事件的行的索引，请使用传递给事件的事件参数的 CommandArgument 属性。ButtonField 类自动使用适当的索引值填充 CommandArgument 属性。对于其他命令按钮，您必须手动设置命令按钮的 CommandArgument 属性。例如，当 GridView 控件未启用分页时，您可以将 CommandArgument 设置为 <%# Container.DataItemIndex %>。

# javascript - Colorbox 在某些页面中不起作用（由 Chrome 扩展程序添加）

> ID：12586693
> 
> 赞同：1
> 
> 时间：2012-09-25T15:55:52.703
> 
> 标签：javascript, jquery, google-chrome-extension, colorbox

我一直在研究一个谷歌浏览器扩展，它在网页上添加了一个按钮，这个按钮会打开一个加载了扩展页面的颜色框。

我有这个代码：

```
jQuery('#Link').click(function() {
    alert("click");
    logClrBox = jQuery('#Link').colorbox({
        iframe:true,
        width:'800', 
        height:'560',

    });
}); 
```

我的问题是，有时会显示警报，但有时不会显示警报，并且链接直接转到“href”属性上的网页。

要添加按钮，我在内容脚本上使用它：

```
$("form").append("a element") 
```

没有onclick功能，只有href。

我的第一个想法是某些页面也加载了 jquery，这可能会导致冲突，但我在控制台上看不到任何错误。也许是问题所在？无论如何，我该如何解决？

如果不是冲突，知道为什么我不能让它工作吗？

谢谢！

# ruby-on-rails - 如何将 has_one/has_many 关联标记为脏？

> ID：12586694
> 
> 赞同：1
> 
> 时间：2012-09-25T15:56:00.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我一直在寻找 AR 中的这种功能，但似乎找不到。AR 的 Dirty 实现表明，一个已经持久化的实例只有在其直接属性之一发生变化时才被认为是脏的。所以，让我们说：

```
class Picture < ActiveRecord::Base
  belongs_to :gallery
  has_one :frame
end 
```

在这种情况下，我可以执行以下操作：

```
p = Picture.new(:gallery => Gallery.new, :frame => Frame.new)
p.save #=> it will save the three instances
p.gallery = Gallery.new
p.save #=> will not save the new gallery
p.gallery_id_will_change!
p.gallery = Gallery.new
p.save #=> this will save the new Gallery 
```

但现在我不能为 has_one 关联做类似的事情，因为 Picture 实现不拥有引用它的属性。因此，似乎这种肮脏的标记是不可能的。或者不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:41:14.287

我能想到的最好的事情是：

```
class Picture < ActiveRecord::Base
  belongs_to :gallery
  has_one :frame

  after_save :force_save_frame

  def force_save_frame
    frame.save! if frame.changed?
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T09:29:54.213

就像[weexpectedTHIS](https://stackoverflow.com/users/792445/weexpectedthis)所说，脏标志是为模型本身的属性设置的，而不是为相关对象设置的。它仅适用于 belongs_to 因为模型上有一个外键。

但你可以做这样的把戏

```
module FrameDirtyStateTracking
  def frame=(frame)
    attribute_will_change!('frame')
    super
  end
end

class Picture < ActiveRecord::Base
  prepend FrameDirtyStateTracking

  belongs_to :gallery
  has_one :frame
end

picture = Picture.new
picture.frame = Frame.new
picture.changed? # => true
picture.changed # => ['frame'] 
```

# opengl-es - OpenGL ES 2 版本之间 openGlShaderSource 的签名差异

> ID：12586695
> 
> 赞同：1
> 
> 时间：2012-09-25T15:56:07.983
> 
> 标签：opengl-es

我注意到 openGLShaderSource 的签名发生了变化：

[如果您查看http://www.khronos.org/registry/gles/](http://www.khronos.org/registry/gles/)中的 gl2.h （对我来说是 rev 16803），签名内容如下：

```
GL_APICALL void         GL_APIENTRY glShaderSource (GLuint shader, GLsizei count, const GLchar* const* string, const GLint* length); 
```

现在，在该文件的旧版本（rev 10602）上，或者在查看该函数的桌面版本时，签名显示：

```
GL_APICALL void         GL_APIENTRY glShaderSource (GLuint shader, GLsizei count, const GLchar** string, const GLint* length); 
```

注意字符串参数缺少的“const”...

有谁知道如何检测到这一点并保持向后兼容性？据我所知，没有定义“修订”宏，可以检查使用一个版本或另一个版本。

背景信息：我正在尝试为带有新 gl2.h 标头的嵌入式平台编译 WebKit。webkit 有这个：

```
typedef void (*glShaderSourceType) (GLuint, GLsizei, const char**, const GLint*); 
```

在[http://opensource.apple.com/source/WebCore/WebCore-1298/platform/graphics/cairo/OpenGLShims.h](http://opensource.apple.com/source/WebCore/WebCore-1298/platform/graphics/cairo/OpenGLShims.h)中，因此当它尝试将 glShaderSource 函数指针分配给新的 glShaderSourceType 变量时无法编译gl2.h 版本...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:59:50.737

感谢尼可波拉斯的提示！这似乎编译：

```
无效 foo(const char* const*) {}
空栏（常量字符**）{}

typedef void (*ftype)(const char**);

int main() {
  ftype f1 = reinterpret_cast(foo);
  ftype f2 = 条形；
  返回0；
}

```

# algorithm - 时间戳到财政周

> ID：12586697
> 
> 赞同：0
> 
> 时间：2012-09-25T15:56:08.740
> 
> 标签：algorithm, timestamp, integer-arithmetic

我正在尝试将格式`"yyyy-mm-dd"`中的时间戳转换为整数财政周。目前，我的算法是 4(k-1) + floor(d/7)+1，其中 k 是整数月份，d 是月份的整数天。星期六开始新的财政周。

这有一些缺陷并且是不正确的。例如，考虑 2012 年 1 月 28 日星期六：

*   我的算法计算出 5（这是正确的）。

接下来考虑，2 月 3 日星期五：

*   我的算法计算出 5（这是正确的）。

现在考虑 2 月 4 日星期六。

*   我的算法计算出 5（这是不正确的）。

看来我的算法总是会在几个月之间失败，从而累积越来越多的错误。

**如何计算正确的会计周？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:45:27.273

计算当月开始之前经过的天数，将其添加到 dd 然后除以 7。最后，将结果数加 1。

所以对于 2 月 4 日，答案是 (31 + 4)/7 + 1 = 6。

# ajax - Drupal 6 到 7 更新错误

> ID：12586700
> 
> 赞同：1
> 
> 时间：2012-09-25T15:56:13.560
> 
> 标签：ajax, drupal-6

我正在从 Drupal 6 升级到 7，但在[此处](http://www.domain.com/update.php?op=info)单击“继续”后：我得到以下信息：

**139 个待定更新**

然后我单击“应用挂起的更新”，它开始更新，然后我收到以下错误：

**发生 AJAX HTTP 错误。HTTP 结果代码：200 调试信息如下。[路径](http://www.domain.com/update.php?op=selection&token=PExs9Sy1n9SDNAurL_SBEnnsUMlKtlRW2AuzP_UkT88&id=11653&op=do)：StatusText：OK ResponseText：致命错误：调用第 578 行 /home/domain/public_html/modules/node/node.install 中的未定义函数 node_type_cache_reset()**

任何想法/想法这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:51:01.507

转到系统表搜索节点模块并将其状态更新为1，这是因为节点模块未启用并且函数 node_type_cache_reset() 写入该模块，因为节点模块未发布它无法调用写入的函数这个模块。

# validation - 延迟淘汰验证

> ID：12586702
> 
> 赞同：2
> 
> 时间：2012-09-25T15:56:17.217
> 
> 标签：validation, knockout.js

我是淘汰 js 的新手。我需要一个验证器来验证用户将在文本框中输入的日期。为此编写了类似的代码

```
ko.validation.rules['date'] = {
    validator: function (value, validate) {
      //Custom logic
    },
    message: 'Please type proper date'
};

self.userDate = ko.observable(new Date()).extend({date: true }); 
```

这在标签上工作正常。但我需要延迟调用此验证（当用户停止输入时）。

任何人都可以告诉我如何在延迟时调用此验证？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T16:01:49.147

要确保在用户输入时更新视图模型，请使用`valueUpdate` [绑定](http://knockoutjs.com/documentation/value-binding.html#parameters)：

`<input data-bind="value: userDate, valueUpdate: 'afterkeydown'" />`

然后你限制 observable：

```
self.userDate = ko.observable(new Date()).extend({
    throttle: 1000, //<- time in ms to wait before validation
    date: true
}); 
```

在这种情况下，Throttle 在最后一次注册的输入事件之后等待 1000 毫秒以执行验证。

# sublimetext2 - Sublime Text 2 如何禁用 *.lib 扩展文件过滤

> ID：12586703
> 
> 赞同：1
> 
> 时间：2012-09-25T15:56:17.840
> 
> 标签：sublimetext2

ST2 似乎会自动过滤掉**Goto Anything...**中扩展名为**.lib**的文件，这可能是过滤二进制文件的默认设置。有没有办法改变这种行为？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T23:56:40.107

您可以编辑它，或者更好的是，在您的`Settings-User`文件中编辑它。

```
// folder_exclude_patterns and file_exclude_patterns control which files
// are listed in folders on the side bar. These can also be set on a per-
// project basis.
"folder_exclude_patterns": [".svn", ".git", ".hg", "CVS"],
"file_exclude_patterns": ["*.pyc", "*.pyo", "*.exe", "*.dll", "*.obj","*.o", "*.a", "*.lib", "*.so", ........ 
```

位于：

```
~/Library/Application Support/Sublime Text 2/Packages/Default/Preferences.sublime-settings 
```**

# android-layout - 带有自定义布局的opencv实现（在SurfaceView上）

> ID：12586705
> 
> 赞同：1
> 
> 时间：2012-09-25T15:56:21.687
> 
> 标签：android-layout, opencv, android-ndk

我有一个正在运行的 openCV 应用程序，但需要在布局中添加按钮等。所以基本上我想在surfaceView上显示opencv相机视图并在下面添加其他东西。

我已经在互联网和论坛上搜索了一段时间，只看到使用 opencv 面部检测应用程序的人还想添加自定义布局......没有解决方案。

我真的非常渴望解决方案，因此非常感谢您的帮助。为此，我使用了 OpenCV 示例 3 应用程序（作为一个简单示例）并尝试在简单的自定义布局上绑定到表面视图。我在一个普通的相机应用程序中管理它，但在 opencv 示例中遇到了很多困难。

所以这是我分别为 Sample3Native.java、Sample3View.java 和 SampleViewBase.java（如示例）文件提供的代码：

```
public class Sample3Native extends Activity {
private Sample3View mView;

private BaseLoaderCallback  mOpenCVCallBack = new BaseLoaderCallback(this) {
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {

                // Load native library after(!) OpenCV initialization
                System.loadLibrary("native_sample");

                // Create and set View
                mView = new Sample3View(mAppContext);
                setContentView(R.layout.main);
                //setContentView(mView);

                // Check native OpenCV camera
                mView.openCamera(); 
            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }
    }
};

//constructor
public Sample3Native() {}

@Override
protected void onPause() {
    super.onPause();
    if (null != mView)
        mView.releaseCamera();
}

@Override
protected void onResume() {
    super.onResume();
    if((null != mView) && !mView.openCamera() ) {
        AlertDialog ad = new AlertDialog.Builder(this).create();  
        ad.setCancelable(false); // This blocks the 'BACK' button  
        ad.setMessage("Fatal error: can't open camera!");  
        ad.setButton("OK", new DialogInterface.OnClickListener() {  
            public void onClick(DialogInterface dialog, int which) {  
            dialog.dismiss();
            finish();
            }  
        });  
        ad.show();
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2, this, mOpenCVCallBack);
} 
```

}

```
class Sample3View extends SampleViewBase {

private int mFrameSize;
private Bitmap mBitmap;
private int[] mRGBA;

public Sample3View(Context context) {
    super(context);
}

@Override
protected void onPreviewStarted(int previewWidtd, int previewHeight) {
    mFrameSize = previewWidtd * previewHeight;
    mRGBA = new int[mFrameSize];
    mBitmap = Bitmap.createBitmap(previewWidtd, previewHeight, Bitmap.Config.ARGB_8888);
}

@Override
protected void onPreviewStopped() {
    if(mBitmap != null) {
        mBitmap.recycle();
        mBitmap = null;
    }
    mRGBA = null;   
}

@Override
protected Bitmap processFrame(byte[] data) {
    int[] rgba = mRGBA;

    FindFeatures(getFrameWidth(), getFrameHeight(), data, rgba);

    Bitmap bmp = mBitmap; 
    bmp.setPixels(rgba, 0, getFrameWidth(), 0, 0, getFrameWidth(), getFrameHeight());
    return bmp;
}

public native void FindFeatures(int width, int height, byte yuv[], int[] rgba); 
```

}

```
public abstract class SampleViewBase extends SurfaceView implements SurfaceHolder.Callback, Runnable {

private Camera              mCamera;
private SurfaceHolder       mHolder;
private SurfaceView         mViewer;
private int                 mFrameWidth;
private int                 mFrameHeight;
private byte[]              mFrame;
private boolean             mThreadRun;
private byte[]              mBuffer;

public SampleViewBase(Context context) {
    super(context);
    mViewer = (SurfaceView)this.findViewById(R.id.camera_view);
    mHolder = mViewer.getHolder();
    mHolder.addCallback(this);
}

public int getFrameWidth() {
    return mFrameWidth;
}

public int getFrameHeight() {
    return mFrameHeight;
}

public boolean openCamera() {
    releaseCamera();
    mCamera = Camera.open();
    if(mCamera == null)
        return false;

    mCamera.setPreviewCallbackWithBuffer(new PreviewCallback() {
        public void onPreviewFrame(byte[] data, Camera camera) {
            synchronized (SampleViewBase.this) {
                System.arraycopy(data, 0, mFrame, 0, data.length);
                SampleViewBase.this.notify(); 
            }
            camera.addCallbackBuffer(mBuffer);
        }
    });
    return true;
}

public void releaseCamera() {
    mThreadRun = false;
    synchronized (this) {
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);
            mCamera.release();
            mCamera = null;
        }
    }
    onPreviewStopped();
}

public void setupCamera(SurfaceHolder holder,int width, int height) {
    synchronized (this) {
        if (mCamera != null) {
            Camera.Parameters params = mCamera.getParameters();
            List<Camera.Size> sizes = params.getSupportedPreviewSizes();
            mFrameWidth = width;
            mFrameHeight = height;

            // selecting optimal camera preview size
            {
                int  minDiff = Integer.MAX_VALUE;
                for (Camera.Size size : sizes) {
                    if (Math.abs(size.height - height) < minDiff) {
                        mFrameWidth = size.width;
                        mFrameHeight = size.height;
                        minDiff = Math.abs(size.height - height);
                    }
                }
            }

            params.setPreviewSize(getFrameWidth(), getFrameHeight());

            List<String> FocusModes = params.getSupportedFocusModes();
            if (FocusModes.contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO))
            {
                params.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO);
            }            

            mCamera.setParameters(params);

            /* Now allocate the buffer */
            params = mCamera.getParameters();
            int size = params.getPreviewSize().width * params.getPreviewSize().height;
            size  = size * ImageFormat.getBitsPerPixel(params.getPreviewFormat()) / 8;
            mBuffer = new byte[size];
            /* The buffer where the current frame will be copied */
            mFrame = new byte [size];
            mCamera.addCallbackBuffer(mBuffer);

            try {
                mCamera.setPreviewDisplay(holder);
                //mCamera.setPreviewDisplay(null);
            } catch (IOException e) {}

            /* Notify that the preview is about to be started and deliver preview size */
            onPreviewStarted(params.getPreviewSize().width, params.getPreviewSize().height);

            /* Now we can start a preview */
            mCamera.startPreview();
        }
    }
}

public void surfaceChanged(SurfaceHolder _holder, int format, int width, int height) {
    setupCamera(_holder,width, height);
}

public void surfaceCreated(SurfaceHolder holder) {
    (new Thread(this)).start();
}

public void surfaceDestroyed(SurfaceHolder holder) {
    releaseCamera();
}

//abstract functions used by child class
protected abstract Bitmap processFrame(byte[] data);
protected abstract void onPreviewStarted(int previewWidtd, int previewHeight);
protected abstract void onPreviewStopped();
//================================

public void run() {
    mThreadRun = true;
    while (mThreadRun) {
        Bitmap bmp = null;

        synchronized (this) {
            try {
                this.wait();
                bmp = processFrame(mFrame);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        if (bmp != null) {
            Canvas canvas = mHolder.lockCanvas();
            if (canvas != null) {
                canvas.drawBitmap(bmp, (canvas.getWidth() - getFrameWidth()) / 2, (canvas.getHeight() - getFrameHeight()) / 2, null);
                mHolder.unlockCanvasAndPost(canvas);
            }
        }
    }
} 
```

}

我知道这必须是一个主要的拖累我的代码，但我真的需要帮助。或者即使我可以获得此类实现的工作示例的链接。另外，请不要向我发送此链接（它对我没有帮助）：[自定义应用程序中的 openCV](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:41:50.377

这是我的 acitivity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:opencv="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <org.opencv.android.JavaCameraView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone"
        android:id="@+id/tutorial1_activity_java_surface_view"
        opencv:show_fps="true"
        opencv:camera_id="any" />

    <org.opencv.android.NativeCameraView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone"
        android:id="@+id/tutorial1_activity_native_surface_view"
        opencv:show_fps="true"
        opencv:camera_id="any" />

    <Button
        android:id="@+id/btnOK"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="105dp"
        android:layout_marginTop="139dp"
        android:onClick="OKClicked"
        android:text="@string/OK" />

    <TextView
        android:id="@+id/txtDisp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/btnOK"
        android:layout_alignBottom="@+id/btnOK"
        android:layout_marginLeft="25dp"
        android:layout_toRightOf="@+id/btnOK"
        android:text="@string/app_name"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

并且这些代码必须编辑到 MainActivity.java 类

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    if (mIsJavaCamera){
        mOpenCvCameraView = (CameraBridgeViewBase)findViewById(R.id.tutorial1_activity_java_surface_view);
    }else{
        mOpenCvCameraView = (CameraBridgeViewBase)findViewById(R.id.tutorial1_activity_native_surface_view);
    }
    mOpenCvCameraView.setVisibility(SurfaceView.VISIBLE);
    mOpenCvCameraView.setCvCameraViewListener(this);

    ArrayList<View> views = new ArrayList<View>();
    views.add(findViewById(R.id.btnOK));
    views.add(findViewById(R.id.txtDisp));
    mOpenCvCameraView.addTouchables(views);
}

public void OKClicked(View view){
    TextView disp = (TextView)findViewById(R.id.txtDisp);
    disp.setText("OK Clicked");
} 
```

这段代码修改为OpenCV Tutorial 1。

您将在表面视图上看到一个按钮和一个 TextView。当您单击 OK 按钮时，TextView 将显示“OK Clicked”。这在三星 Galaxy 上对我有用。

# c# - 侦听套接字 - 连接套接字在 EndAccept 处被连接而没有调试中断

> ID：12586707
> 
> 赞同：1
> 
> 时间：2012-09-25T15:56:23.550
> 
> 标签：c#, sockets, asyncsocket

我在 .NET C# 中遇到问题，多线程套接字应用程序。

随机一段时间后，连接被接受而不执行回调函数并且不会开始接受。

监听器和回调函数的代码如下所示。

```
 public void StartListening()
    {
        // Data buffer for incoming data.
        byte[] bytes = new Byte[1024];

        // Establish the local endpoint for the socket.
        // The DNS name of the computer
        // running the listener is "host.contoso.com".
        IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Any, listenPort);//Listen on all available network interfaces

        // Create a TCP/IP socket.
        Socket listener = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream, ProtocolType.Tcp);

        // Bind the socket to the local endpoint and listen for incoming connections.
        bool signal = true;
        try
        {
            listener.Bind(localEndPoint);       
            listener.Listen(listenPort);

            while (startlisten)
            {
                // Set the event to nonsignaled state.
                allDone.Reset();
                if (signal)
                {
                    // Start an asynchronous socket to listen for connections.
                    string s = string.Format("Server Socket: Waiting for a connection at Port:{0}", listenPort);
                    DisplayMsg(s);
                    listener.BeginAccept(
                        new AsyncCallback(AcceptCallback),
                        listener);
                }
                // Wait until a connection is made before continuing.
                signal = allDone.WaitOne(100);
            }
            listener.Close();
        }
        catch (Exception e)
        {
            if (e is System.Net.Sockets.SocketException)
            {
                SocketException socex = (e as SocketException);

                throw new Exception(socex.Message);
            }
            else
            {
                throw new Exception(e.Message);
            }
        }
    }

    public void AcceptCallback(IAsyncResult ar)
    {
        // Signal the main thread to continue.

        try
        {
            if (startlisten)
            {
                // Get the socket that handles the client request.
                Socket listener = (Socket)ar.AsyncState;

                TCPClient tcp = frm.GetClientObj();
                tcp.socketForServer = listener.EndAccept(ar);

                DisplayErrorMsg("Connection Request From: " + tcp.socketForServer.RemoteEndPoint.ToString());

                tcp.Connected = true;
                tcp.ReceiveData();

                // Create the state object.
                //                StateObject state = new StateObject();
                //                state.workSocket = handler;
                //                handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                //                    new AsyncCallback(ReadCallback), state);
            }
        }
        catch (Exception e)
        {
            if (e is System.Net.Sockets.SocketException)
            {
                SocketException socex = (e as SocketException);

                DisplayErrorMsg(socex.Message);
            }
            else
            {
                DisplayErrorMsg(e.Message);
            }
        }
        allDone.Set();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T13:27:47.420

如果您在 EndAccept 之前关闭侦听套接字，则会发生这种情况

“要取消对 BeginAccept 方法的挂起调用，请关闭 Socket。当在异步操作进行时调用 Close 方法时，将调用提供给 BeginAccept 方法的回调。对 EndAccept 方法的后续调用将抛出 ObjectDisposedException表示操作已被取消。”

[http://msdn.microsoft.com/en-us/library/5bb431f9.aspx](http://msdn.microsoft.com/en-us/library/5bb431f9.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T13:53:52.277

我找到了答案，它与`allDone`事件有关，应该在 if 循环中发出信号。

```
if (signal)
{
    allDone.Reset();
    // Start an asynchronous socket to listen for connections.
    string s = string.Format("Server Socket: Waiting for a connection at Port:{0}", listenPort);
    DisplayMsg(s);
    listener.BeginAccept(new AsyncCallback(AcceptCallback), listener);
}

// Wait until a connection is made before continuing.
signal = allDone.WaitOne(100); 
```

# ruby-on-rails - nil:NilClass 的未定义方法“错误”

> ID：12586709
> 
> 赞同：0
> 
> 时间：2012-09-25T15:56:40.773
> 
> 标签：ruby-on-rails, ruby

这是我编辑的详细信息：

我有我的控制器，

```
class Enr::Rds::SurvRdsapXrefsController < Enr::Controller

  def index
    @enr_rds_surv_rdsap_xrefs = Enr::Rds::SurvRdsapXref.paginate(page: params[:page])
  end

  def show
  end

  def new
     @enr_rds_surv_rdsap_xref = Enr::Rds::SurvRdsapXref.new
  end

  def edit
    @enr_rds_surv_rdsap_xref = Enr::Rds::SurvRdsapXref.find(params[:id])
  end

  def create
    @enr_rds_surv_rdsap_xref = Enr::Rds::SurvRdsapXref.new(params[:enr_rds_surv_rdsap_xref])

    respond_to do |format|
      if @enr_rds_surv_rdsap_xref.save
        format.html { redirect_to :enr_rds_surv_rdsap_xrefs, notice: "Survey link was successfully created." }
        format.js
        format.json { render json: @enr_rds_surv_rdsap_xref, status: :created, location: @enr_rds_surv_rdsap_xref }
      else
        format.html { render action: "new" }
        format.js
        format.json { render json: @enr_rds_surv_rdsap_xref.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
  end

  def destroy
  end
end 
```

* * *

这是我的视图形式

```
<%= form_for(@enr_rds_surv_rdsap_xref, :remote => true) do |f| %>

<% if @enr_rds_surv_rdsap_xref.errors.any? %>
  <div id="error_explanation">
    <div class="validate">
      The form contains <%= pluralize@enr_rds_surv_rdsap_xref.errors.count, "error") %>.
    </div>
    <ul>
    <% @enr_rds_surv_rdsap_xref.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

<div class="control-group">
  <%= f.label :section %><br />
  <%= f.text_field :section %>
</div>

<%= f.submit %>

<% end %> 
```

当我单击索引页面创建新链接时，索引页面显示错误，例如

Enr/rds/surv_rdsap_xrefs#index 中的 NoMethodError

nil:NilClass 的未定义方法“错误”

感谢您的支持，请建议我纠正错误。我是 ROR 的新手。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:13:31.313

您的错误表明`index`模板的呈现导致了错误，这意味着您正在为索引模板中的新调查（上面的代码片段）呈现表单。这很好，但如果你要这样做，你必须在 和 中实例化一个新的`index`调查`new`。

在最简单的情况下，您可以将代码复制`new`到`index`：

```
def index
  @enr_rds_surv_rdsap_xrefs = Enr::Rds::SurvRdsapXref.paginate(page: params[:page])
  @enr_rds_surv_rdsap_xref = Enr::Rds::SurvRdsapXref.new
end

def new
   @enr_rds_surv_rdsap_xref = Enr::Rds::SurvRdsapXref.new
end 
```

为了让您的代码稍微干燥一点，您可能会更改创建新实例的位置。您经常看到的模式类似于：

```
before_filter :build_record, :only => [:new, :index]

protected

def build_record
  @survey = YourSurvey.new
end 
```

这样，如果您没有任何其他逻辑，您甚至不需要编写 new/index 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:12:11.887

您是否还在`@survey`控制器中设置了新操作？该错误意味着当视图被渲染时`@survey`为零，因此设置该实例变量肯定有问题。

当您转到“新”视图或尝试提交表单（创建）时，您是否收到错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-07T02:51:49.250

```
The form contains <%= pluralize@enr_rds_surv_rdsap_xref.errors.count, "error") %> 
```

这行代码就是问题所在。您在复数形式和@enr 之间缺少“（”...

解释： RoR 认为对象是：pluralize@enr... 而不是 @All 单独，他对这种对象没有错误。

# mysql - 需要一个 MySQL 查询来获取未在表中注册的日期

> ID：12586712
> 
> 赞同：3
> 
> 时间：2012-09-25T15:56:59.947
> 
> 标签：mysql

我对特定功能有一点问题。我有一张房间预订表。

表：预订

```
room (BIGINT), date (DATE)
            4,  2012-09-25
            4,  2012-09-27
            4,  2012-09-30 
```

我需要获取日期范围内 id = 4 的房间可用的日期。例如，如果我想要房间在 2012 年 9 月 25 日和 2012 年 10 月 1 日（含）之间可用的日期，我必须获得下一个结果：

```
date (DATE)
 2012-09-26
 2012-09-28
 2012-09-29
 2012-10-01 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:00:09.267

如果您将日期表添加到数据库中，则可以轻松处理此类查询。用大量日期填充它（并在需要时添加），然后对其进行右外连接以查找缺失的日期。

如果您不能或不想添加其他表，则可以使用以下命令将日期转换为整数字段（表示自 1970 年 1 月 1 日以来的天数）：

```
SELECT room, UNIX_TIMESTAMP(`date`)/86400 FROM reservations 
```

从那里，您可以使用[此问题](https://stackoverflow.com/questions/4340793/how-to-find-gaps-in-sequential-numbering-in-mysql)或其他地方的技术来查找该序列中的空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T18:29:28.287

正如@steven-cheng 所说，我不得不使用 mysql 和代码的组合，因为创建临时表太麻烦了。使用代码获取可用日期会更快。

# c++ - 如何从字符串中删除一个字符并在需要时更改数据？

> ID：12586719
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:57:22.367
> 
> 标签：c++, stl

我有可能的输入 1M 2M .. 11M 和 1Y （M 和 Y 代表月份），我想输出“somestring1 somestring2 .... and somestring12”注释 M 和 Y 被删除，最后一个字符串更改为 12

```
 Example: input "11M" "hello" output: hello11
             input "1Y" "hello" output: hello1

char * (const char * date, const char * somestr)
{
    // just need to output final string no need to change the original string
    cout<< finalStr<<endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:13:17.157

第二个字符串作为一个整体获得输出。所以它的输出没有变化。只要遇到`M`或，就会输出第二个字符串。`Y`由于`Stack Overflow`不鼓励提供确切的源代码，所以我可以给你其中的一部分。有一个条件由您决定。（第二个答案也给出了）代码会有点像这样。

```
//Code for first string. Just for output.
for (auto i = 0 ; date[i] != '\0' ; ++i)
{
  // A condition comes here.
   cout << date[i] ;
} 
```

请注意，这是考虑到您只是输出字符串。否则，您可以创建另一个字符串并将两个字符串相加或连接现有字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:12:12.743

这是作业吗？如果没有，这就是我的建议。（我问作业是因为你可能有限制，而不是因为我们不是来帮忙的）

1）在字符串中的“M”上进行查找（使用`find`），如果找到，则在该位置插入一个“\0”（顺便说一句，我假设您的输入格式正确）

2）在'Y'上进行查找。如果找到，则在该位置插入一个 '\0'。然后对您的字符串进行 atoi() 或 stringstream 转换以转换为数字。乘以 12。

3）将第 1 部分或第 2 部分的字符串表示连接到您的 somestr

4) 输出。

如果我不介意的话，这可能会在 < 10 行内完成。a.find('M') 部分及其检查可以是条件运算符，然后最多两行或三行进行转换/连接。

# html - 在 html 中包含 MATLAB

> ID：12586721
> 
> 赞同：0
> 
> 时间：2012-09-25T15:57:29.243
> 
> 标签：html, matlab

我编写了一个 Matlab 程序，它分析图像并在图像上绘制起点和终点之间的路线，同时避开中间的所有障碍物。我现在正在创建一个网站来展示我的一些项目，而这个项目是我想要包括的一个。我的问题是，如何将这个 Matlab 函数包含到我的网站中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:02:40.287

调查`publish`函数。

# sql - 组合多个复杂的 SELECT 语句，使它们出现在一行上

> ID：12586723
> 
> 赞同：3
> 
> 时间：2012-09-25T15:57:31.090
> 
> 标签：sql, sql-server

我对 SQL 很陌生，所以请温柔一点。我有一张表格，记录来自不同位置的各种传感器的温度。如果它更容易，我很乐意重新调整数据库结构。

这些列是： ID *int*、 SensorID *tinyint*、 LocationID *tinyint*、 TempReadDT *datetime*、 Temp（*十进制 4,1*）

传感器每隔几分钟记录一次读数，我希望有一个存储的过程来获取以下信息以显示在摘要页面上：

1.  当前室内温度（传感器 1 的最新读数）
2.  当前室外温度（传感器 2 的最新读数）
3.  过去 24 小时室内平均温度
4.  过去 7 天的平均室内温度
5.  最后更新日期时间（记录的最新日期）

我已经创建了单独的`SELECT`语句（如下），但我不确定如何将它们组合到一个查询中，以便在一行中返回数据。

```
SELECT TOP 1 Temp AS "intTemp"
  FROM Temperature
 WHERE SensorID = 1
 ORDER BY ID DESC

SELECT TOP 1 Temp AS "extTemp"
  FROM Temperature
 WHERE SensorID = 2
 ORDER BY ID DESC

SELECT AVG(Temp) AS "avgTemp24h"
  FROM Temperature
 WHERE SensorID = 1
   AND TempReadDT >= DATEADD(DAY,-1, SYSDATETIME())

SELECT AVG(Temp) AS "avgTemp7d"
  FROM Temperature
 WHERE SensorID = 1
   AND TempReadDT >= DATEADD(DAY,-7, SYSDATETIME())

SELECT MAX(TempReadDT)
  FROM Temperature 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:04:48.107

我讨厌交叉连接，但是...

```
Select * from 
(SELECT TOP 1 Temp AS "intTemp"
  FROM Temperature
 WHERE SensorID = 1
 ORDER BY ID DESC
) A
cross join
(SELECT TOP 1 Temp AS "extTemp"
  FROM Temperature
 WHERE SensorID = 2
 ORDER BY ID DESC
)B
cross join
(
SELECT AVG(Temp) AS "avgTemp24h"
  FROM Temperature
 WHERE SensorID = 1
   AND TempReadDT >= DATEADD(DAY,-1, SYSDATETIME())
)C
cross join
(
SELECT AVG(Temp) AS "avgTemp7d"
  FROM Temperature
 WHERE SensorID = 1
   AND TempReadDT >= DATEADD(DAY,-7, SYSDATETIME())
)D 
cross join
(
SELECT MAX(TempReadDT)
  FROM Temperature) E 
```

应该管用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:06:43.460

```
SELECT 
   Max(case SensorID when 1 then Temp else null end) AS "intTemp",
   Max(case SensorID when 2 then Temp else null end) AS "intTemp",
   AVG(case 
           when SensorID = 1  
            AND TempReadDT >= DATEADD(DAY,-1, SYSDATETIME()) 
           then Temp else null end) AS "avgTemp24h",
   AVG(case 
           when SensorID = 1  
            AND TempReadDT >= DATEADD(DAY,-7, SYSDATETIME()) 
           then Temp else null end) AS "avgTemp7d",
   MAX(TempReadDT) MaxTemp
FROM Temperature 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:07:32.030

例如，您可以使用子查询和结果的别名

```
SELECT t1.col1, t2.col2 from (select * from tbl1) as t1, (select * from tbl2) as t2 
```

# wix - 在 wix 中使用 select 读取数据

> ID：12586724
> 
> 赞同：1
> 
> 时间：2012-09-25T15:57:36.053
> 
> 标签：wix, wix3.5, wix3.6

我们正在创建一个安装程序包，我们的要求是我们应该能够使用 select 从表中读取值。我进行了很多搜索，但没有找到任何可以查询该表的内容。有什么办法吗？有什么例子吗？

# hadoop - 在hadoop中合并两个文件

> ID：12586725
> 
> 赞同：0
> 
> 时间：2012-09-25T15:57:37.257
> 
> 标签：hadoop, apache-pig, hadoop-streaming

我是hadoop框架的新手。因此，如果有人可以指导我完成这件事，那将对我有所帮助。我有两种类型的文件。dirA/ --> file_a , file_b, file_c

dirB/ --> another_file_a, another_file_b...

目录 A 中的文件包含传输信息。

所以像：

```
 id, time_stamp
   1 , some_time_stamp
   2 , some_another_time_stamp
   1  , another_time_stamp 
```

因此，这种信息分散在 dirA 中的所有文件中。现在要做的第一件事是：我给出一个时间范围（比如说上周），我想找到该时间范围之间存在的所有唯一 ID。

所以，保存一个文件。

现在，dirB 文件包含地址信息。就像是：

```
 id, address, zip code
     1, fooadd, 12345
     and so on 
```

所以第一个文件输出的所有唯一ID..我把它们作为输入，然后找到地址和邮政编码。

基本上最后的输出就像 sql 合并。

查找时间范围内的所有唯一 ID，然后合并地址信息。

我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:22:44.923

你把它标记为猪，所以我猜你想用它来完成这个？如果是这样，我认为这是一个很好的选择——这在猪身上真的很容易！

```
times = LOAD 'dirA' USING PigStorage(', ') AS (id:int, time:long);
addresses = LOAD 'dirB' USING PigStorage(', ') AS (id:int, address:chararray, zipcode:chararray);
filtered_times = FILTER times BY (time >= $START_TIME) AND (time <= $END_TIME);
just_ids = FOREACH filtered_times GENERATE id;
distinct_ids = DISTINCT just_ids;
result = JOIN distinct_ids BY id, addresses BY id; 
```

您可以将参数传递给脚本的位置和`$START_TIME`参数。`$END_TIME`

# iphone - Xcode4.5：UITextField 不写

> ID：12586726
> 
> 赞同：0
> 
> 时间：2012-09-25T15:57:39.987
> 
> 标签：iphone, ios, xcode, uitextfield

在我的应用程序中有一个文本字段，当您点击它时，键盘会正常显示，但是当您点击键盘的键时它不会写入，它保持空白。为什么会这样？我不知道该怎么办！谢谢！

代码

视图控制器.h：

```
@interface ViewController : UIViewController {
    IBOutlet UITextField *myText;
} 
```

在 IB 中，它是正确链接的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:44:23.827

我找到了答案！此处：[键盘和光标显示，但我无法在 UITextFields 和 UITextViews 内输入](https://stackoverflow.com/questions/12447875/keyboard-and-cursor-show-but-i-cant-type-inside-uitextfields-and-uitextviews)

在我看来，这是 iOS6 拥有的数百万个错误之一，因为它没有发生在 iOS5 上。

# python - 大文本文件的条形码拆分和另一个文本文件中的相应行（python）

> ID：12586734
> 
> 赞同：2
> 
> 时间：2012-09-25T15:58:14.710
> 
> 标签：python, barcode, bioinformatics

我正在努力让自己在 python 中变得更好。有一些工具可以做这些事情，但我想自己做有两个原因。

1.  学习一些更好的方法
2.  操作灵活

我有两个文本文件，大小完全相同，行数相同。我需要检查第 2 行、第 6 行（每次 +4）文本，查看它的开头文本，检查它是否类似于某些预定义的文本，如果是，则将该行与相应文件中的 4 块一起写入，并写入相同另一个相应文件中的行。（对于那些听起来很熟悉的人，我正在尝试从 Illumina 配对末端序列数据中分离出条形码数据）。

我已经有一个工作代码，但问题是它需要几天才能完成。100,000行我花了大约10分钟，我有2亿。

我在这里发布代码以及我的想法。好的，我有 100 个键，它们是 ATCCGG、ACCTGG 等。但是，如果我有一个不匹配，我想认为它是正确的，例如 DOG 可以有 AOG、BOG、DIG、DAG、DOF、DOH....

```
def makehamming2(text,dist):

    dicthamming=dict()
    rep=["A","T","C","G"]

    if dist==1:
        for i in range(len(text)):

            for j in range(len(rep)):
                chars=list(text)
                if rep[j]<>chars[i]:
                    chars[i]=rep[j]
                    word="".join(chars)
                    dicthamming[word]=text
    return dicthamming 
```

我正在使用 dist=1。

我将此功能用于 100 个条形码，因此，我的字典中有大约 100*18 个项目。

```
count=0
eachline=1
writeflag=0
seqlen=int(seqlen)
cutlen=len(cutsite)
infile=open(inf, "r")
for line in infile:
        count+=1
        if eachline==1:
            writeflag=0
            header=line
            eachline=2
        elif eachline==2:
            eachline=3
            line=line.strip()
            if line[0:6] in searchdict.keys():

            barcode=searchdict[line[0:6]]

            towritefile=outfile+"/"+barcode+".fastq"

            seq=line[6:seqlen+6]
            qualstart=6
            writeflag=1
            seqeach[barcode]=seqeach.get(barcode,0)+1

    elif eachline==3:
        eachline=4
        third=line
    elif eachline==4:

        eachline=1
        line=line.strip()
        if writeflag==1:
            qualline=line[qualstart:qualstart+seqlen]
            addToBuffer=header+seq+"\n"+third+qualline+"\n"
            bufferdict[towritefile]=bufferdict.get(towritefile,"")+addToBuffer

            Fourlinesofpair=getfrompair(inf2,count, seqlen)

            bufferdictpair[towritefile[:-6:]+"_2.fastq"]=\
            bufferdictpair.get(towritefile[:-6:]+"_2.fastq","")+Fourlinesofpair

                if (count/4)%10000==0:
                    print "writing" , str((count/4))
                    for key, val in bufferdict.items():

                        writefile1=open(key,"a")
                        writefile1.write(val)
                        bufferdict=dict()

                    for key, val in bufferdictpair.items():

                        writefile1=open(key,"a")
                        writefile1.write(val)
                        bufferdictpair=dict()

                    end=(time.time()-start)/60.0
                    print "finished writing", str(end) , "minutes"

    print "writing" , str(count/4)                
    for key, val in bufferdict.items():

        writefile1=open(key,"a")
        writefile1.write(val)
        bufferdict=dict()
        writefile1.close()
    for key, val in bufferdictpair.items():

        writefile1=open(key,"a")
        writefile1.write(val)
        bufferdictpair=dict()
        writefile1.close()

    end=(time.time()-start)/60.0
    print "finished writing", str(end) , "minutes" 
```

getfrompair 是一个函数，

```
def getfrompair(inf2, linenum, length):

    info=open(inf2,"r")
    content=""
    for count, line in enumerate(info):
        #print str(count)

    if count == linenum-4:
        content=line
    if count == linenum-3:
        content=content+line.strip()[:length]+"\n"
    if count == linenum-2:
        content=content+line
    if count == linenum-1:
        content=content+line.strip()[:length]+"\n"
        #print str(count), content

        return content 
```

所以，我的主要问题是如何优化它。在大多数情况下，我会假设此代码至少在 8gb 内存和 >4 个核心处理器中运行。我可以使用多处理器吗？我在这里的另一个线程中使用了建议中的缓冲区，因为这比在每行之后写入磁盘要快。

提前谢谢你教我。

**编辑 1** 在 Ignacio 的建议之后，我做了分析和“getfrompair”函数占用了一半以上的运行时间？有没有更好的方法可以从文件中获取某一行，而无需在某个时间逐行查看。

来自分数的配置文件结果（10000 行，而不是原来的 8 亿行）

```
 68719 function calls in 2.902 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
       66    0.000    0.000    0.000    0.000 :0(append)
       32    0.003    0.000    0.003    0.000 :0(close)
     2199    0.007    0.000    0.007    0.000 :0(get)
        8    0.002    0.000    0.002    0.000 :0(items)
        3    0.000    0.000    0.000    0.000 :0(iteritems)
      750    0.001    0.000    0.001    0.000 :0(join)
     7193    0.349    0.000    0.349    0.000 :0(keys)
    39977    0.028    0.000    0.028    0.000 :0(len)
        1    0.000    0.000    0.000    0.000 :0(mkdir)
      767    0.045    0.000    0.045    0.000 :0(open)
      300    0.000    0.000    0.000    0.000 :0(range)
        1    0.005    0.005    0.005    0.005 :0(setprofile)
       96    0.000    0.000    0.000    0.000 :0(split)
        1    0.000    0.000    0.000    0.000 :0(startswith)
        1    0.000    0.000    0.000    0.000 :0(stat)
     6562    0.016    0.000    0.016    0.000 :0(strip)
        4    0.000    0.000    0.000    0.000 :0(time)
       48    0.000    0.000    0.000    0.000 :0(update)
       46    0.004    0.000    0.004    0.000 :0(write)
      733    1.735    0.002    1.776    0.002 RC14100~.PY:273(getfrompair)
        1    0.653    0.653    2.889    2.889 RC14100~.PY:31(split)
        1    0.000    0.000    0.000    0.000 RC14100~.PY:313(makehamming)
        1    0.000    0.000    0.005    0.005 RC14100~.PY:329(processbc2)
       48    0.003    0.000    0.005    0.000 RC14100~.PY:344(makehamming2)
        1    0.006    0.006    2.896    2.896 RC14100~.PY:4(<module>)
     4553    0.015    0.000    0.025    0.000 RC14100~.PY:74(<genexpr>)
     2659    0.014    0.000    0.023    0.000 RC14100~.PY:75(<genexpr>)
     2659    0.013    0.000    0.023    0.000 RC14100~.PY:76(<genexpr>)
        1    0.001    0.001    2.890    2.890 RC14100~.PY:8(main)
        1    0.000    0.000    0.000    0.000 cProfile.py:5(<module>)
        1    0.000    0.000    0.000    0.000 cProfile.py:66(Profile)
        1    0.000    0.000    0.000    0.000 genericpath.py:15(exists)
        1    0.000    0.000    0.000    0.000 ntpath.py:122(splitdrive)
        1    0.000    0.000    0.000    0.000 ntpath.py:164(split)
        1    0.000    0.000    0.000    0.000 os.py:136(makedirs)
        1    0.000    0.000    2.902    2.902 profile:0(<code object <module> at 000000000211A9B0, file "RC14100~.PY", line 4>)
        0    0.000             0.000          profile:0(profiler)

Process "Profile" terminated, ExitCode: 00000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:03:13.927

您的`getfrompair`函数使这成为一个经典的 O(n^2) 问题，因为您每次获得匹配时都会通读第二个文件。相反，您想要做的是同时从两个文件中读取，这样您只需要浏览一次。[`izip`](http://docs.python.org/library/itertools.html?highlight=izip#itertools.izip)是这样做的方法。

```
from itertools import izip

for line,line2 in izip(infile, infile2): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:08:41.463

```
>>> def dist(w1,w2):
...     return len(w1)-sum(map(lambda x:int(x[0]==x[1]),zip(w1,w2)))
...
>>> dist("DOG","FOG")
1
>>> dist("DOG","FOF")
2
>>> words = ["DOG","FOG","DAG","CAT","RAT","AOG","AAG"]
>>> print filter(lambda x:dist(target,x)<2,words)
['DOG', 'FOG', 'DAG', 'AOG'] 
```

然后做你想做的事

```
>>> import itertools
>>> my_alphabet = ["A","T","C","G"]
>>> target = "ATG"
>>> print filter(lambda x:dist(x,target)<2,itertools.permutations(my_alphabet,len(target)))
[('A', 'T', 'C'), ('A', 'T', 'G'), ('A', 'C', 'G'), ('C', 'T', 'G')] 
```

# android - Camera.open() 返回 NULL Android 开发

> ID：12586736
> 
> 赞同：3
> 
> 时间：2012-09-25T15:58:19.207
> 
> 标签：android, camera

我正在关注构建相机应用程序[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)的教程，我对 Camera.open() 的调用返回 null。我已经在清单中声明了权限，并且在模拟器和 xyboard 上都进行了尝试，但仍然为空。有谁知道任何快速提示？

```
Camera c = null;
try
{
    c = Camera.open()
}
catch(Exeption e)
{

}
return c; 
```

请记住，我不是在抛出异常，我只是在返回 NULL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:30:04.937

那是因为[它不应该抛出异常](http://developer.android.com/reference/android/hardware/Camera.html#open%28%29)。`null`当没有找到*后置*摄像头时返回：

> 创建一个新的 Camera 对象以访问设备上的第一个后置摄像头。如果设备没有后置摄像头，则返回 null。

您可能正在尝试访问*前置*摄像头，在这种情况下您可能想要使用`open(int cameraId)`. （有关使用它的示例，请参见其他答案）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:22:41.883

[这是一个非常棒的使用 android 相机的教程](http://www.vogella.com/articles/AndroidCamera/article.html)
你会注意到代码中有 toasts/alerts 可以帮助你了解正在发生的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:37:15.607

为了让它工作，我必须使用 Camera.open(0) 这意味着我必须将清单中的 API 级别从 8 更改为 9。我现在得到一个错误 100 ......

# jquery - document.form.submit() 在 jquery ajax 调用中不起作用

> ID：12586737
> 
> 赞同：0
> 
> 时间：2012-09-25T15:58:19.710
> 
> 标签：jquery, ajax, submit

我有一个表单，当我提交它时，它将通过 jQuery AJAX 调用检查一些验证。

我的代码是这样的：

```
$("#myForm").submit(function(){
    .....
    .....
    .....
    .....
    .....

    $.ajax({
        type:"POST",
        url:"<?php echo base_url();?>bTransJual/formTambahJual/ajaxCekStockJual/",
        data:  { prdIdUkuId: dataArrPrIdUkuId, qty: dataArrQty},
        dataType : "json",            
        success: function(data){
           if(data.sukses){
              //validasi lolos
              document.frmTransJual.submit();                                             
           }else{
              //validasi gagal
              psnErrNya = data.psnErr;
              $("#psnNotifikasiAjax").html(psnErrNya);
              $("#notifikasiAjax").show('normal');
              $("#imgLoadSubmit").hide();                                       
              return false;
           }
        }
     });
}); 
```

我的表单标签：

```
<form name="frmTransJual" id="myForm" method="post" action="some_url.php"> 
```

如果 ajax 成功，它将返回一个值数据，如果这个 data.sukses 为真，我希望表单提交它。我使用 document.frmTransJual.submit(); 提交它，但它不起作用。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:04:33.343

原因是您使用的是无限循环。它会再次调用相同的函数。

你可以这样使用

创建一个 div

```
 `<div id="submit">Submit form</div>`

 $("#submit").click(function(){
$.ajax({
    type:"POST",
    url:"<?php echo base_url();?>bTransJual/formTambahJual/ajaxCekStockJual/",
    data:  { prdIdUkuId: dataArrPrIdUkuId, qty: dataArrQty},
    dataType : "json",            
    success: function(data){
       if(data.sukses){
         $("myform").submit();                                             
       }else{
          //validasi gagal
          psnErrNya = data.psnErr;
          $("#psnNotifikasiAjax").html(psnErrNya);
          $("#notifikasiAjax").show('normal');
          $("#imgLoadSubmit").hide();                                       
          return false;
       }
    }
 }); 
```

})

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:05:15.607

`document.frmTransJual`与 的形式相同`$("#myForm")`。因此，调用`document.frmTransJual.submit();`只会`submit`在无限循环中再次调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:03:17.903

“AJAX”中的“A”代表“异步”。您的`submit`处理函数在您的 AJAX 调用完成之前很久就返回了，`false`从`else`您的 AJAX 回调的分支返回不会影响您的`submit`回调的返回值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:03:57.110

这是因为提交不会等待AJAX​​请求完成..它是异步的..

当调用来自回调函数时，请求早已不复存在。

# ruby-on-rails - Ruby 保存文件并对其进行编码

> ID：12586741
> 
> 赞同：0
> 
> 时间：2012-09-25T15:58:24.453
> 
> 标签：ruby-on-rails, ruby, encoding

在我的 Rails 应用程序中，我进行文件上传，我的一些文件是俄语（和其他......）。如果我只是尝试：

```
 require 'fileutils'
     uploaded_io = params[:aut]
     File.open(Rails.root.join('public', 'uploads_prices', uploaded_io.original_filename), 'w', :encoding => "r:UTF-8") do |file|
       file.write(uploaded_io.read)
     end 
```

我得到错误

如果我写

```
require 'fileutils'
    uploaded_io = params[:aut]
    File.open(Rails.root.join('public', 'uploads_prices', uploaded_io.original_filename), 'wb') do |file|
      file.write(uploaded_io.read)
    end 
```

一切都好，但是，当我解析我的 csv 文件时，我需要使用选项对它们进行解码

> r:ISO-8859-15:UTF-8

情况不妙。那么，如果我将文件发送到方法，它会保存它，但在将此文件转换为 utf8 之前，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:53:54.413

您应该能够使用以下方法重新编码任何数据：

```
uploaded_io.read.encode('UTF-8') 
```

请记住，无论出于何种原因，任何无法重新映射的字符都可能导致异常，因此请务必彻底测试。

# iphone - 垂直和水平视图

> ID：12586745
> 
> 赞同：0
> 
> 时间：2012-09-25T15:58:28.963
> 
> 标签：iphone, ios, view, uibutton, cgcontextref

我需要你的建议来解决我遇到的问题。这是关于我的 iPhone 模拟器的。当我运行程序时，它在垂直视图上很好并且完全没问题。

但是，在水平视图中，按钮会移动到另一个位置。“CGContextDrawPath” 这是我用来绘制图形的函数参考。是否可以使用此功能添加按钮，以便这些按钮不会像图表一样移动。您能否建议另一种解决方案，以使按钮不会移动并保持与垂直视图所示相同的位置。

![垂直视图 - iPhone](../Images/db9fd215788a85d399c95aebb2358274.png) ![水平视图 - iPhone](../Images/e87a1fe460dd650668d9356a7b99bc8a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:16:33.980

我觉得横向更好看？只是在开玩笑....

如果我真的理解正确，您希望它是垂直视图。有一个非常简单和懒惰的解决方案：

第 1 步：使用蓝色图标转到您的项目名称。单击目标。转到摘要页面。选择支持的方向仅是纵向。（第一个，你也可以选择第二个，但你也必须调整下面的代码）

第 2 步：进入您的视图控制器 m 文件。应该有这样的方法。只需取消注释即可。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations.
    return (interfaceOrientation == UIInterfaceOrientationPortrait); 
```

}

此方法确保它始终检查界面方向并仅在界面实际上是纵向时返回 YES。

# google-apps-script - Oauth - oauth_verifier

> ID：12586746
> 
> 赞同：2
> 
> 时间：2012-09-25T15:58:29.390
> 
> 标签：google-apps-script

我没有看到在 Google Apps OAuthService 和 UrlFetchApp 对象中提供 oauth_verifier 字段的机制。

我正在尝试使用基于 Twitter 示例的代码连接到 Yammer。我通过了身份验证过程并从 Yammer 获得了验证码。我不确定如何将其重新放入 Google Apps 脚本并包含在访问令牌请求中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:04:50.843

UrlFetch 中内置的 OAuth 支持期望 OAuth 提供程序将您重定向回带有 URL 中的验证程序的 Apps 脚本。我不确定为什么 Yammer 将其提供给您粘贴，但可以在界面中放置以输入它。

# installation - 安装 SQL Server 2008 R2 标准版时缺少 DLL

> ID：12586750
> 
> 赞同：0
> 
> 时间：2012-09-25T15:58:42.050
> 
> 标签：installation, sql-server-2008-r2, windows-server-2008-r2

我的短期问题：由于缺少名为的 .dll，我无法安装 SQL Server 2008 R2`cig5kjsx.dll`

我的情况/环境：
我从我大学的 MSDN 商店下载了 SQL Server 2008 R2 标准版（德语）。现在我尝试将它安装在 x64 Windows Server 2008 R2 操作系统上的虚拟机中，并安装了所有更新（至少所有更新都可以在 Windows 更新中使用）。

问题：它在安装安装支持文件时停止，给我一个失败弹出窗口，它错过了 %filepathofinstallationfiles%\1031_DEU_LP\x64\setup\sqlsupport_msi\PFiles\SqlServr\100\Setup\fe72iemr\x64\de\cig5kjsx 处的 cig5kjsx.dll。 dll

我在发布之前尝试的是：

*   重新下载和重新安装 - 相同的行为。
*   `/de/`查看文件系统：安装程序目录中似乎没有文件夹。也没有`cig...dll`。
*   找到谷歌解决方案，说：“首先为 SQL Server 2k8 r2 下载/安装 SP1 或 2（尽可能不安装 SQL Server），然后安装 SQL Server 本身” - 结果：现在它停止在实际安装，而不是在安装安装支持文件时。
*   使用另一个具有管理员权限的用户帐户安装它（第一次安装是使用“普通”管理员帐户完成的）。

所以，我现在绝对没有想法，我希望你能帮忙！

最好的问候，多米尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:47:25.310

答案，或更准确的解决方法是：msdnaa 的德语安装包目前已损坏。我使用英文版的 SQL Server 2008 R2 Standard 进行了尝试，并且没有任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:44:41.827

目前的状态是什么？当您说它在安装时停止时-您是否收到任何错误消息？您还可以尝试使用[http://blogs.msdn.com/b/petersad/archive/2011/07/13/how-to-slipstream-sql-server-2008-中记录的过程创建 R2 的滑流 SP2 安装r2-and-a-sql-server-2008-r2-service-pack-1-sp1.aspx](http://blogs.msdn.com/b/petersad/archive/2011/07/13/how-to-slipstream-sql-server-2008-r2-and-a-sql-server-2008-r2-service-pack-1-sp1.aspx)看看是否可以帮助您解决问题。

# google-chrome-extension - 能够使用加载了 watir-webdriver 的扩展启动 chrome

> ID：12586751
> 
> 赞同：4
> 
> 时间：2012-09-25T15:58:45.133
> 
> 标签：google-chrome-extension, watir-webdriver

我正在尝试使用 watir-webdriver 启动 chrome，但加载了特定的扩展。我一直无法弄清楚如何在红宝石中做到这一点。当我运行以下代码时

`@browser = Watir::Browser.new(:chrome, :switches => %w[--load-extension="file path of the extension"])`

我会收到这条消息：![在此处输入图像描述](../Images/544b50c215de03269fc665bc7633ba34.png)

现在我注意到奇怪的是双重路径。我不确定路径的前半部分来自哪里（“...Google\Chrome\Application\21...”）。第二部分是我在代码中指定的。当我单击“确定”时，它会启动浏览器（它会等到我这样做）但没有加载扩展。该错误的奇怪之处在于 manafest.json 文件*位于* 该文件夹位置（不，这不是扩展问题）并且对我来说看起来很好。我可以正常启动浏览器（在自动化之外），它会运行扩展。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:18:25.347

好的，我弄清楚了问题所在。我现在正在使用这行代码：

```
@browser = Watir::Browser.new :chrome, :switches => %w[--load-extension=.../Chrome/User\ Data/Default/Extensions/geelfhphabnejjhdalkjhgipohgpdnoc/0.9.7_0] 
```

看起来它不喜欢路径周围的引号。把它们拿出来，它启动了扩展程序。

# asp.net - VB.NET Web 服务 - 从继承的类返回只读属性

> ID：12586752
> 
> 赞同：3
> 
> 时间：2012-09-25T15:58:46.367
> 
> 标签：asp.net, vb.net

我想我错过了一些非常基本的东西，但这是我的困境。在 VB.net 中，我创建了一个`MembershipUser`从 Web 服务继承并返回对象的类：

```
Public Class ModifiedUser
    Inherits MembershipUser 
```

*用户登录：*

```
Private Sub Login1_Authenticate(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.AuthenticateEventArgs) Handles Login1.Authenticate
    Dim ws As New MembersWS.Members
    Dim Member As New MembersWS.ModifiedUser
    ws.Credentials = System.Net.CredentialCache.DefaultCredentials()
    Member = ws.ValidateUser(Login1.UserName, Login1.Password)
End Sub 
```

在 Web 服务中创建对象时，`ModifiedUser`包含所有属性`MembershipUser`以及新类的属性。

在我的示例中，该`ValidateUser`函数验证用户并添加其他属性：

```
Public Function ValidateUser(ByVal UserName As String, ByVal Password As String) As ModifiedUser
    Dim BaseUser As MembershipUser = Membership.Provider.GetUser(UserName, False)
    Dim Member As New ModifiedUser
    If Membership.Provider.ValidateUser(UserName, Password) = True Then 
        Member = New ModifiedUser(BaseUser.ProviderName, BaseUser.UserName, BaseUser.ProviderUserKey, BaseUser.Email, BaseUser.PasswordQuestion, BaseUser.Comment, BaseUser.IsApproved, BaseUser.IsLockedOut, BaseUser.CreationDate, BaseUser.LastLoginDate, BaseUser.LastActivityDate, BaseUser.LastPasswordChangedDate, BaseUser.LastLockoutDate, 0, "", "", "", "", True)
        ' ... (Set new property values)
    End if
    Return Member
End Function 
```

当`Member`返回到`Login1_Authenticate`时，只读属性将从对象中删除，同时它们包含在从 Web 服务返回的对象中。

在`reference.vb`Web 服务的文件中，自动生成的代码包含一个部分`MembershipUser`类，其中仅包含可更新的属性以及关联的 getter 和 setter：

```
Partial Public Class MembershipUser
    Private emailField As String
    Private commentField As String
    Private isApprovedField As Boolean
    Private lastLoginDateField As Date
    Private lastActivityDateField As Date 
```

**如果有人可以让我知道如何在返回的对象中包含只读属性，我将不胜感激。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:24:49.273

当 Web 服务返回包含只读属性的对象时，只读属性总是被忽略。这是因为在客户端，它无法通过设置只读属性的值来反序列化数据。解决此问题的一种方法是向您的属性添加一个不执行任何操作或引发异常的设置器。例如：

```
Public Property Id() As Integer
    Get
        Return nID
    End Get
    Set(ByVal Value As Integer)
        Throw New Exception("Cannot set read-only property 'Id'")
    End Set
End Property 
```

有关更多想法，请参阅此问题：

[是否可以在 SOAP Web 服务中创建只读元素？](https://stackoverflow.com/questions/915672/is-it-possible-to-create-read-only-elements-in-soap-web-services)

# java - 如何以线程安全的方式将递增的用户 ID 分配给新用户？

> ID：12586758
> 
> 赞同：1
> 
> 时间：2012-09-25T15:59:12.637
> 
> 标签：java, servlets

我刚刚开始学习 Java，但在创建 Java 服务器时遇到了问题。

在 HTML 上，应该有一个表单，而 JavaScript 女巫每秒都会提交该表单（通过 POST 方法）。表单应该有一个隐藏字段，其中包含用户 ID 的值。服务器应在请求中查找用户 ID。它应该给新用户一个新的ID，并且给访问过的用户显示他们的ID。

每次提交表单后，inscription 变为：null, 2, null, 2, null, 2.... 这里是代码：

```
public class ServerConnect extends AbstractHandler{
         private AtomicInteger ids = new AtomicInteger(0);    
         private String userId;

         public void handle(String target,
         Request baseRequest,
         HttpServletRequest request,
         HttpServletResponse response)    throws IOException, ServletException
         {

             response.setContentType("text/html;charset=utf-8");
             response.setStatus(HttpServletResponse.SC_OK);
             baseRequest.setHandled(true);
             response.getWriter().println(PageGenerator.generateForm(userId));
             userId = request.getParameter("userId");

             if (userId == null){
                 ids.getAndIncrement();
                 userId = ids.toString();
             }        
          }

         public static void main(String[] args) throws Exception {

               Server server = new Server(8080);
               server.setHandler(new ServerConnect());
               server.start();
               server.join();
        }
}

public class PageGenerator {

    public static String generateForm(String val){
        String htmlCode = null;

        htmlCode = "...
             <script>
                function reload(){ 
                   document.forms['MainForm'].submit();
                }
                setTimeout("reload()", 1000); 
             </script>    
             .... + val + ...
             <form id='MainForm' method = 'POST'>
                 <input type = "hidden" name = "userId" value = \""+ val + \""> 
             <form>
                             ...       
    return htmlCode;
    }    

} 
```

我不明白为什么用户 ID 等于 2，为什么用户得到他的 id 后，它的值变为 null，然后又变为 2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:23:11.053

您似乎在解析 userId 之前正在呈现您的页面。`PageGenerator.generateForm(userId)`在你检查之前你有`if(userId == null)`

此外，您应该了解这`AtomicLong.getAndIncrement()`是一个复合操作，类似于`i++`（但是单个原子操作）。

所以你需要有如下代码：

```
if (userId == null){
     userId = ids.getAndIncrement();
} 
```

最后，我不确定 Jetty 的生命周期，`AbstractHandler`但可以合理地假设 Jetty 每隔一个请求就会实例化你的类的一个新实例。由于`ids`被限定为“实例”字段，它被新请求丢弃（并因此有效地重置）。

**在此处编辑**有关 Jetty 线程模型的答案：[Jetty Architecture](http://docs.codehaus.org/display/JETTY/Architecture)

要解决此问题，您需要声明`ids`为`static final`（从而有效地使其成为“单例”ID 生成器）以使其在多个请求中存活。一个玩具应用程序的好方法，但不是你必须在生产代码中做的事情。

# asp.net - 使用 jQuery AJAX 将对象传递给 MVC 4 Web API

> ID：12586760
> 
> 赞同：1
> 
> 时间：2012-09-25T15:59:26.943
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我正在尝试创建一个可以接受对象作为参数的 Web api...我从下面发布的简单示例开始，但出现内部服务器错误

我的 AJAX：

```
var order = {
    "id": 1012345,
    "carrier": "works",
    "created_at": "works",
    "description": "works",
    "etd": "works",
    "invoice_id": 12,
    "origin_id": 13,
    "po_number": "101",
    "shipped_on": "works",
    "status": "works",
    "updated_at": "works"
};

$.ajax({
    url: "http://localhost:3495/api/NTOrder/",
    type: "GET",
    data: { inputOrder: order },
    beforeSend: function(xhr){
        xhr.setRequestHeader('username', 'user4');
        xhr.setRequestHeader('password', 'secret');
    },
    success: function(data) { 
        alert('Success!' + JSON.stringify(data)); $('.result').html(data); 
    }
}); 
```

在 Chrome 中，它在尝试访问 url 时给了我 500 Internal Server Error：

```
http://localhost:3495/api/NTOrder/?inputOrder%5Bid%5D=1012345&inputOrder%5Bcarrier%5D=works&inputOrder%5Bcreated_at%5D=works&inputOrder%5Bdescription%5D=works&inputOrder%5Betd%5D=works&inputOrder%5Binvoice_id%5D=12&inputOrder%5Borigin_id%5D=13&inputOrder%5Bpo_number%5D=101&inputOrder%5Bshipped_on%5D=works&inputOrder%5Bstatus%5D=works&inputOrder%5Bupdated_at%5D=works 
```

它是否错误地创建了 url 字符串？

我在 MVC 端的代码非常简单：

```
public IEnumerable<NTOrder> GetOrders(NTOrder inputOrder)
{
    List<NTOrder> NTOrderList = new List<NTOrder>();
    NTOrderList.Add(inputOrder);
    return NTOrderList;
} 
```

NTOrder 类非常简单，只包含原始 AJAX 中使用的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:23:57.010

如果您可以切换到 POST 而不是 GET，您可以这样做。你可能会有更好的运气。

```
$.ajax({
    url: "http://localhost:3495/api/NTOrder/",
    type: "POST",
    data: JSON.stringify({ inputOrder: order }),
    dataType: "json",
    beforeSend: function(xhr){
        xhr.setRequestHeader('username', 'user4');
        xhr.setRequestHeader('password', 'secret');
    },
    success: function(data) { 
        alert('Success!' + JSON.stringify(data)); $('.result').html(data); 
    }
}); 
```

# php - XForms to HTML - 寻找简单的解决方案

> ID：12586764
> 
> 赞同：1
> 
> 时间：2012-09-25T15:59:41.113
> 
> 标签：php, html, xforms

我只是在寻找可以将 XForms 转换为传统 HTML 表单（或 PHP）的东西。假设我正在接收要在 XForms 中生成的表单，然后我的代码 (php) 将其转换为传统表单，最后我们得到了一个带有表单的页面。嗯，我在找那个变形盒子，你能给我推荐点什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:07:25.640

我的 XForms 实现 (XSLTForms) 使用 XSLT 1.0 转换来执行此操作，该转换可以应用于服务器端（例如使用 PHP），甚至可以应用于客户端。

-阿兰

# c# - 使用点表示法和多个连接字段的 LINQ 连接

> ID：12586765
> 
> 赞同：2
> 
> 时间：2012-09-25T15:59:46.953
> 
> 标签：c#, linq, join

我想知道通过多个字段连接两个表时如何在 Linq 中编写内部连接。

例如，假设这是 SQL 等价物：

```
SELECT tableOne.fieldThree

FROM table_One AS tableOne,
     table_Two AS tableTwo,
WHERE
     tableOne.fieldOne == tableTwo.fieldOne AND
     tableOne.fieldTwo == tableTwo.fieldTwo; 
```

我试过这个：

```
tableTwo.Join(tableOne,
              two => new { two.fieldOne, two.fieldTwo },
              one => new { one.fieldOne, one.fieldTwo },
              (two, one) => one.fieldThree)
        .ToList(); 
```

但是编译器显示一个错误，指出无法从使用中推断出该方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:17:51.967

你的方法很好，而且会奏效。您只需要修复编译器错误。您查询中的两个匿名类型可能不是同一类型。如果字段的顺序发生变化，或者它们的类型不完全匹配，这很容易发生。

不过，这是一个 C# 问题。一旦你过去了，你的 ORM 就会支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:21:09.997

我能看到的最简单的方法是使用“联合”方法。只需从两个表中提取多个字段的数据，然后在它们上使用 Union 即可。这将连接两个表而不会重复。

# mobile - 是否可以通过 Mobile Safari 的自定义 URL 方案向 Instagram 发送标题/注释？

> ID：12586775
> 
> 赞同：2
> 
> 时间：2012-09-25T16:01:07.547
> 
> 标签：mobile, mobile-safari, instagram

我想允许我的移动网站用户上传照片，在 Mobile Safari 中输入标签和标题，然后打开 Instagram 并预先填充该图像、标签和标题。

根据[此](http://instagram.com/developer/iphone-hooks/)文档，可以预填充图像和标签，但唯一提到预填充标题是“要在照片中包含预填充的标题，您可以在文档交互请求中设置注释属性到包含键“InstagramCaption”下的 NSString 的 NSDictionary。

我可以使用自定义 URL，例如：`instagram://media?id=999&tag?name=sweet_tag&InstagramCaption?caption='My sweet caption.'`预填充图像、标签和标题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:16:17.617

此功能确实存在，只是尚未添加到文档中。

> 从我们的下一个版本 (2.3.0) 开始，您将能够将标题参数传递给相机 URL 挂钩，如下所示：
> 
> instagram://camera?caption=你好
> 
> 确保它是正确的 URL 编码（# 应该是 %23 等）
> 
> 提交给苹果，所以应该在不久的将来。
> 
> 干杯，-- Mike Krieger Instagram 联合创始人

[https://groups.google.com/forum/?fromgroups=#!topic/instagram-api-developers/0lsJyFcfYPw](https://groups.google.com/forum/?fromgroups=#!topic/instagram-api-developers/0lsJyFcfYPw)

# cuda - 报告 CUDA 加速的正确方法

> ID：12586778
> 
> 赞同：2
> 
> 时间：2012-09-25T16:01:21.903
> 
> 标签：cuda

我想比较在 CPU 上运行的串行程序和在 GPU 上运行的 CUDA 程序的性能。但我不确定如何公平地比较性能。例如，如果我将旧 CPU 与新 GPU 的性能进行比较，那么我将获得巨大的加速。

另一个问题：如何将我的 CUDA 程序与论文中报告的另一个 CUDA 程序进行比较（两者都在不同的 GPU 上运行，我无法访问源代码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:11:39.020

为了公平起见，您应该包括将数据传入和传出 GPU 的数据传输时间。编写一个超快的 CUDA 函数并不难。真正的诀窍在于弄清楚如何保持数据传输，或者如何通过将数据传输与其他必要的工作重叠来隐藏数据传输的成本。除非您的例程 100% 受计算限制，否则包括在您的每单位时间完成的工作单元中的数据传输对于理解您的实现将如何处理（例如，更多的工作单元）至关重要。

对于跨设备比较，报告每个处理器内核每单位时间执行的工作单元可能很有用。每个处理器内核将有助于规范 200 内核和 2000 内核 CUDA 设备之间的巨大差异。

如果您在谈论您的算法（而不仅仅是输出），那么描述您如何将问题分解为并行执行是有用的 - 例如，您的块/线程分布。

确保您不是在调试版本上测量性能，也不是在调试器中运行。调试会增加开销。

确保您的工作样本足够大，使其明显高于“本底噪声”。与以毫秒为单位的测试运行相比，需要几秒钟才能完成的测试运行将测量更多的功能和更少的环境噪声。您总是可以将工作单元除以测试执行时间来得出一个性感的“每纳秒单位”数字，但实际上您并没有这样测量它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:56:17.040

cuda 程序在不同 GPU 上的速度取决于 GPU 的许多因素，例如内存带宽、核心时钟速度、核心、可用线程/寄存器/共享内存的数量。所以很难比较不同GPU的性能

# xml - 使用临时值循环 xsl 中的一组元素

> ID：12586781
> 
> 赞同：1
> 
> 时间：2012-09-25T16:01:42.713
> 
> 标签：xml, xslt, loops

我正在使用 XSLT 1.0

假设我有一个 xml，其中包含某些“num”元素，这些元素可能位于 XML 文档中的任何位置，如下所示：-

```
<elem1>
  <num>24</num>
</elem1>
<elem2>
  <description>
    <num>18</num>
  </description>
</elem2>
<elem3>
  <elem1>
    <num>36</num>
  </elem1>
</elem3> 
```

我想将其转换为：-

```
<elem1>
  <gcd multiple="4">6</gcd>
</elem1>
<elem2>
  <description>
    <gcd multiple="3">6</gcd>
  </description>
</elem2>
<elem3>
  <elem1>
    <gcd multiple="6">6</gcd>
  </elem1>
</elem3> 
```

现在我有一个模板可以计算两个元素的 gcd，如下所示：-

```
<xsl:template name="gcd">
  <xsl:param name="x"/>
  <xsl:param name="y"/>
  <!-- snipping code to compute gcd that goes here -->
</xsl:template> 
```

给定这个 gcd 模板，我猜我将不得不像这样遍历 num 元素：-

```
<xsl:variable name="global_gcd">
  <xsl:for-each select="//ns0:num">
    <!-- something probably goes here --> 
    <!-- say a temporary value x=0 initially -->
    <!-- and then x = gcd (x, value of current node) -->
  </xsl:for-each>
</xsl:variable> 
```

然后，据称我可以在我的模板中使用这个变量作为“num”来生成所需的“gcd”元素以及属性。这也是我可以做到的。

上面的循环应该是什么样的？如果不是 for-each，假设我已经有两个元素的工作 gcd 模板，我将如何实际计算我的 XML 文档中所有“num”元素的 gcd？

我想如果我将所有“num”元素作为兄弟姐妹或其他东西，这会容易得多，但不幸的是我没有。其中任何两个之间的树关系可能是任意的。我唯一知道的是，他们都有相同的名字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:36:10.110

XSLT 是一种函数式语言，因此没有可更新变量的概念 - 变量在创建时设置了其值，并且该值随后无法更改。如果必须在纯 XSLT 中执行此操作，则需要将问题重新表述为递归模板而不是循环

```
<xsl:template name="gcd">
  <xsl:param name="nodes" />
  <xsl:choose>
    <xsl:when test="count($nodes) = 0">0</xsl:when>
    <xsl:otherwise>
      <xsl:variable name="gcdOfRest">
        <xsl:call-template name="gcd">
          <xsl:with-param name="nodes" select="$nodes[position() > 1]" />
        </xsl:call-template>
      </xsl:variable>
      <!-- existing logic goes here, calculating GCD between number($nodes[1])
           and number($gcdOfRest) -->
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

并将此模板`//ns0:num`作为`nodes`参数传递。

但是，如果您可以选择编写扩展函数并将其插入，那可能会更有效。

# iphone - xcode上未声明的标识符

> ID：12586785
> 
> 赞同：0
> 
> 时间：2012-09-25T16:01:56.920
> 
> 标签：iphone, xcode, ios5, ios6, undeclared-identifier

我刚开始在 xcode 上为 ios 6 开发。但是作为一个新手开发者，我遇到了一个问题。按照“开始 ios5 开发：探索 ios sdk”一书第 3 章中的指南，“按钮乐趣”示例。

我已经在 .h 代码中声明的标识符“statusText”有问题。

到目前为止，这是我的代码，任何帮助将不胜感激。先感谢您。

我的 BIDViewController.h 是这样的

```
#import <UIKit/UIKit.h>

@interface BIDViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *
statusText;
- (IBAction)buttonPress:(UIButton *)sender;

@end` 
```

我的 BIDViewController.m 就是这样

```
#import "BIDViewController.h"

 @interface BIDViewController ()

 @end

 @implementation BIDViewController

 - (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
 }

 - (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

 - (IBAction)buttonPress:(UIButton *)sender {
    NSString *title = [sender titleForState:<#(UIControlState)#>];
    statusText.text = [NSString stringWithFormat:@"%@ button pressed.", title];
}
@end 
```

我已经关注了这本书，但似乎无法理解为什么会发生这种情况，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:15:24.487

好吧，对于初学者来说，这应该只有一行

```
@property (weak, nonatomic) IBOutlet UILabel *statusText; 
```

现在，当你声明一个属性时，你不会得到一个这样命名的变量，除非你像这样合成它：

```
@implementation Class

@synthesize propertyName;

@end 
```

这就是 statusText 不存在的原因。

你有三个选择：

1.  像这样合成`statusText`，这样你就可以使用那个 ivar。
2.  而不是直接访问 var，而是像这样访问属性`self.statusText`。
3.  XCode 正在创建它自己的变量，它可能命名为`_statusText`，像这样访问它以直接访问变量。

您也可以使用 2 和 3 的组合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:31:55.813

我正在使用同一本书，也遇到了这个问题。我已经学会在 .m 文件中使用下划线

```
- (IBAction)buttonPressed:(UIButton *)sender {
    NSString *title = [sender titleForState:UIControlStateNormal];
    **_statusText**.text = [NSString stringWithFormat:@"%@ button pressed.", title];

} 
```

# objective-c - 在嵌套的 NSSet 中搜索对象

> ID：12586787
> 
> 赞同：1
> 
> 时间：2012-09-25T16:01:58.660
> 
> 标签：objective-c, ios, search, nsset

我试图从嵌套`NSSet`的复杂结构中获取一些对象，如下所示：

![在此处输入图像描述](../Images/36fa9406d98536e3cb8834eccdb62206.png)

`obj1`等是类型`MyObject`。

我使用了一个谓词，但它没有返回任何东西：

```
NSPredicate *predicate=[NSPredicate predicateWithFormat:@"self isKindOfClass:%@",[MYObject class]]; 
```

我认为`NSPredicate`在 NSSet 中寻找第一层对象。[上面突出显示]。

为了克服这个问题，我遍历所有集合并获取`MyObject`实例。还有比这更好的方法吗？`obj1`获取, `obj2`, `obj3`,的值太耗时了`obj4`。

# c - Makefile - 只需进行安装（复制文件），无需构建目标

> ID：12586790
> 
> 赞同：4
> 
> 时间：2012-09-25T16:02:01.560
> 
> 标签：c, makefile

我有一个简单的 makefile 项目，我只想`make install`将文件复制到目标文件夹，即：

```
all:
   @echo "Nothing to build"

install:
   cp ./*.wav /usr/share/snd

my_custom_target:
   @echo "For testing purposes" 
```

但是，每当我尝试构建任何目标（即：clean、all、install、my_custom_target 等）时，每个目标都会回显“ `Nothing to be done for 'clean'`”、“ `Nothing to be done for 'all'`”等。我的猜测是，makefile 项目至少期望构建一些东西（即：C/C++ 文件等）。

有人对如何进行此操作有任何建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T16:08:33.653

这似乎表明`make`无法找到或无法正确解析您的 Makefile。文件名是什么？

此外，请确保每个规则中的命令（如`cp ./*.wav /usr/share/snd`）都以实际的制表符而不是空格作为前缀。在您粘贴的示例中，它们仅以三个空格作为前缀，但为了`make`正确解析，它们需要以实际的制表符作为前缀。

要检查的另一件事是是否存在名为`all`、`install`或`my_custom_target`. Make 不关心是否构建了某些 C 或 C++ 文件；规则可以做任何你想做的事情。但它会检查是否存在与规则同名的文件，以及它是否比规则的依赖项更新。如果有一个文件，并且它比所有依赖项都新（或者没有依赖项，如本例所示），那么它将决定无事可做。为了避免这种情况，请添加一个`.PHONY`声明以表明这些是虚假目标，并且与要构建的实际文件不对应；then`make`将始终运行这些配方，无论是否存在同名的最新文件。

```
.PHONY: all install my_custom_target 
```

# iphone - ios 5 up ios 6 初始屏幕有黑带

> ID：12586791
> 
> 赞同：0
> 
> 时间：2012-09-25T16:02:01.880
> 
> 标签：iphone, ios, ios5, ios6

在ios 6之前我没有这个问题。我的项目是为 iOs 5 编译的。

但是在带有 iOs5 的设备中，我不知道为什么它们的顶部会出现如图所示的黑色条带。但仅在初始屏幕上。如果我去并返回到这个页面就可以了。iOS6上的设备没问题。

![黑带问题](../Images/a7c55e5470aa2d97056d902f676aadcb.png)

也许我忘记了一些新东西？

# ios - drawrect 颜色总是错误的

> ID：12586794
> 
> 赞同：0
> 
> 时间：2012-09-25T16:02:09.187
> 
> 标签：ios, colors

有人可以向我解释为什么总是只有一种颜色（黄色）吗？我唯一能做的改变是改变蓝色的值。如果我把蓝色设为 0，那么一切都会变成白色。我真的不明白......我以为我会得到红色和（黄色和）绿色之间的各种颜色。

```
int randomNum = arc4random()%255;

int greenLevel;
greenLevel = 255-randomNum;

NSLog(@"%i",greenLevel);

if (posi==NO){
    greenLevel=randomNum;
}

CGContextSetRGBFillColor(contextRef, 244, greenLevel, 30, 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:20:01.767

首先，greenLevel 是干什么用的？

为什么不直接使用...

```
int randomNum = arc4random()%256;

CGContextSetRGBFillColor(contextRef, 244.0 / 255.0, randomNum / 255.0, 30 / 255.0, 1); 
```

整齐多了。

其次，指定颜色的范围是从 0 到 1，因此您需要将 255 种颜色除以 255 才能为 iOS 获取它们。

# .net - 正则表达式匹配所有

> ID：12586795
> 
> 赞同：3
> 
> 时间：2012-09-25T16:02:13.750
> 
> 标签：.net, regex

> **可能重复：**
> [如何在正则表达式中匹配多行中的任何字符？](https://stackoverflow.com/questions/159118/how-do-i-match-any-character-across-multiple-lines-in-a-regular-expression)

我目前正在制作一个软件，像 Notepad++ 一样工作

我正在使用正则表达式来查找单词，并给它们一个颜色。然而; 我坚持为多行注释着色。

样本：`/* This is a multiline comment */`

使用我目前的正则表达式：`/\*.*?\*/`- 在放置换行符之前它工作正常。

所以它匹配：`/*This, for instance!*/` 但不匹配：

```
/* This kind of comments
 - Where multiple lines is placed...
*/ 
```

所以我想知道，而不是使用 [dot] 来查找评论中的单词，然后我可以使用其他**匹配所有**运算符吗？

*   我正在使用 C#s 类“正**则表达式**”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:06:39.840

试试这个可能对你有用。

```
/\**.*?\*/ 
```

**[RegexOptions](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)**必须设置为`MultiLine`

来自 RegexBuddy 的屏幕截图，

![在此处输入图像描述](../Images/e72e8de259e1cb84cc0d7b6b7a94c772.png)

# random - 根据 unsigned int 生成 0 到 1 之间的均匀分布随机数

> ID：12586797
> 
> 赞同：0
> 
> 时间：2012-09-25T16:02:21.133
> 
> 标签：random

我可以使用由统一随机数生成器例程生成的 32 位无符号整数。我想将此数字转换为 [0,1] 范围内的浮点数。显然，这很容易通过将 unsigned int 除以 UINT_MAX 来完成，在除法之前将两者都转换为浮点数。除非我弄错了，否则我认为这样的划分会花费我很多精度，因此并不理想。

由于此操作将在 openCL 中执行，因此我假设没有可以在中间使用的双变量。

有什么想法可以更好地生成浮点数吗？

提前致谢！

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:09:39.183

我不这么认为。

无论如何，您只有 32 位精度可用，因此转换为（大概是 32 位）浮点数并返回应该没问题。

您将遇到 32 位量化“错误”，但这是基于原始 32 位数据类型，而不是浮点数。

# php - MYSQL基于另一个检索字段值

> ID：12586798
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:02:27.343
> 
> 标签：php, mysqli

MYSQL 我想检索 columnX 中字段的值，其中指定了 columnY 的字段值。可能有不止一行发生这种情况，但第一行会发生。如果你能提供 php.ini 那就太好了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:03:53.610

试试这个 SQL：

```
SELECT `columnX` FROM `table` WHERE `columnY` = $value LIMIT 1 
```

在 PHP 中：

```
$query = $mysqli->query("SELECT `columnX` FROM `table` WHERE `columnY` = $value LIMIT 1");
$row = $query->fetch_assoc();
echo $row['columnX']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:07:26.487

如果您想在 sql 中执行此操作，您可以使用 IF 条件，例如：

```
SELECT IF(X=0,Y,1) As cond FROM table 
```

在 PHP 中：

```
$query = $mysqli->query('SELECT IF(X=0,Y,1) As cond FROM table');
$row = $query->fetch_assoc();
echo $row['cond']; 
```

感谢“丹尼尔李”

# c# - 可能有几行的公共列的gridview？

> ID：12586803
> 
> 赞同：1
> 
> 时间：2012-09-25T16:02:49.423
> 
> 标签：c#, asp.net

有没有一种方法可以显示一个网格视图，该列具有几行通用的列。例如，我想在该经理下的所有员工的列中只显示一次经理？这是在 asp.net 中使用 c#..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:16:16.047

我认为没有办法在 ASP.net gridview 中合并单元格。但是您可以使用 Javascript 浏览 gridview 并合并单元格。

# tcp - 意外的 TCP RST 数据包

> ID：12586804
> 
> 赞同：4
> 
> 时间：2012-09-25T16:02:55.880
> 
> 标签：tcp

我们在我们的环境中面临随机 RST 数据包问题，这会导致一些意外行为，下图是 Wireshark 生成的 tcp 数据的快照，它显示了问题：

1.  客户端（117.136.2.181）成功建立与服务器（192.168.40.16）的连接
2.  客户端向服务器发送一些数据，以及 KEEP_ALIVE 信号。
3.  服务器接收数据，处理它并将结果发送回客户端。
4.  服务器关闭套接字。
5.  服务器没有收到来自客户端的 ACK 信号，所以它重新发送结果数据以及 FIN 信号，这是由 TCP 协议自动完成的。但是，服务器仍然没有收到来自客户端的 ACK 信号。
6.  服务器向客户端发送 RST 信号，因此连接关闭。

![TCP数据包](../Images/234135ceda9d342174c1a1f9bda9042e.png)

经过一些分析，我们认为在第3步之后发生了一些网络问题，所以从服务器发送的所有结果数据和FIN信号都没有被客户端确认，但是我们对服务器发送的RST信号感到很困惑。根据我们的理解，如果一个半关闭的套接字接收到一些数据，或者关闭一个套接字时接收队列中有数据，就会发送一个RST信号。但这两者似乎都不是我们案件的根本原因。

有人可以帮助详细说明为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-22T23:39:43.017

`RST`通常在`close`没有 的情况下在套接字上调用时发生`shutdown`，或者在一段`shutdown`时间后对方仍在尝试发送数据（仍然没有用 回复`FIN`）。

一些编程语言有一个`socket.close(timeout)`例如[.NET](https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.close)`shutdown` ，然后`close`在`timeout`通过之后调用。

所以客户端必须`timeout`完成发送和关闭连接`FIN`，如果没有完成，连接将被强行关闭`RST`。

请参阅[https://stackoverflow.com/a/23483487/1438522](https://stackoverflow.com/a/23483487/1438522)`close`以获取有关和之间区别的更详尽解释`shutdown`。

# javascript - HTML5 context.clip() 使用图像

> ID：12586807
> 
> 赞同：2
> 
> 时间：2012-09-25T16:03:07.093
> 
> 标签：javascript, jquery, html

有没有办法使用图像作为剪贴蒙版而不是创建这样的形状：

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
// Clip a rectangular area
ctx.rect(50,20,200,120);
ctx.stroke();
ctx.clip(); 
```

我试图`context.drawImage('myimg.png')`在上下文和剪辑之上，但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:20:41.317

您只能直接`clip`使用路径。

如果您有一个想要剪辑的图像，您可以*通过在**另一个*画布中绘制您的内容来实现这一点，然后使用`globalCompositeOperation`结合`drawImage`（与蒙版）来删除您不想要的位。

然后，您将`.drawImage`再次使用（可能使用不同的`globalCompositeOperation`）将该剪辑的图像与您的原始内容合并。

参见例如[http://www.html5canvastutorials.com/advanced/html5-canvas-global-composite-operations-tutorial/](http://www.html5canvastutorials.com/advanced/html5-canvas-global-composite-operations-tutorial/)

# c# - 棱镜模块在视图中有自己的区域

> ID：12586810
> 
> 赞同：2
> 
> 时间：2012-09-25T16:03:18.237
> 
> 标签：c#, silverlight, prism-4

我正在使用 Silverlight 5 (MefBootstrapper) 在 Prism V4.1 中练习。不幸的是，我找不到这样的情况的实现：

1.  我的 Shell.xaml 中有 2 个区域。
2.  我的模块（modulescatalog.xaml 中描述的 xap 文件）（Module1 和 Module2）被注入到这个区域；
3.  我在模块（例如模块 1）中的一个观点有它自己的区域。

我想使用 prism 框架的强大功能将另一个模块注入到这个 Module1 视图中。事实上，这个模块应该是一个小棱镜应用程序，它有自己的模块，应该有可能将参数传递给 Module2 和其他模块。

有什么方法可以实现吗？

我的意思是：Module1里面的view可以创建自己的Region，所以依赖的模块可以把view注入到这个Region中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:26:01.680

是的，它可以，为什么不呢？加载依赖模块后，只需在该区域注册视图即可。例如，您可以在`IModule.Initialize`依赖模块的方法中执行此操作：

```
public void Initialize()
{
    regionManager.RegisterViewWithRegion("Module1RegionName", () => serviceLocator.GetInstance<DependentModuleView>());
} 
```

然后，您可以导航到此视图或在注册后随时激活它。

```
regionManager.RequestNavigate("Module1RegionName", new Uri("DependentModuleView", UriKind.Relative));

//or resolve the view and activate it
var view = serviceLocator.GetInstance<DependentModuleView>();
var region = regionManager.Regions["Module1RegionName"];
region.Activate(view); 
```

至于模块之间的通信，您有几个选择。阅读[松散耦合组件之间的通信](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.40%29.aspx)了解更多信息。

# z3 - 为 Sat Solver 中的一组变量编写从 1 到 N 的至少一个赋值的约束

> ID：12586811
> 
> 赞同：3
> 
> 时间：2012-09-25T16:03:22.667
> 
> 标签：z3, smt

我在 sat 求解器的背景下问这个问题。假设我有 100 个整数变量`x1, x2, x3 ... x100`，它们在`1 to N`. 我想确保至少一个变量`x1 to x100`应该具有来自`1 to N`.

现在我想在 sat 求解器约束中编码这个问题。由于在编写约束时我不知道值`N`，所以我很难编写如下代码 -

```
(assert (x1 = 0 or x2 = 0 or ... x100 = 0))
(assert (x1 = 1 or x2 = 1 or ... x100 = 1))
(assert (x1 = 2 or x2 = 2 or ... x100 = 2))
...
(assert (x1 = N or x2 = N or ... x100 = N)) 
```

可以说，最后，我断言 N 的值为 2，那么上述约束将不起作用。除此之外，出于性能原因，我不想使用数组或未解释的函数。

**更新 ：**

简而言之，约束如下 -

1.  N < 100
2.  （假设 N = 20），那么有 20 个变量，它们可能是从 x_1 到 x_100 中的任何一个，它们是不同的。因此，此约束将确保为从 1 到 N 的每个值分配至少一个变量。
3.  其余变量 (100-N) 的值可以相互重叠。

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:18:14.970

使用`distinct`谓词。见：[http ://smtlib.cs.uiowa.edu/theories/Core.smt2](http://smtlib.cs.uiowa.edu/theories/Core.smt2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:11:30.823

对于最多 n 个 x_i 变量（随机选择），如何将 Kyle 的答案与不同的答案结合起来？

这将给出一个模型（对于 N = 50 和 100 x_i 变量）：

```
 x = [0 -> 1,
  1 -> 11,
  2 -> 50,
  3 -> 1,
  4 -> 2,
  5 -> 1,
  6 -> 36,
  7 -> 1,
  8 -> 34,
  9 -> 1,
  10 -> 13,
  11 -> 5,
  12 -> 7,
  13 -> 23,
  14 -> 1,
  15 -> 40,
  16 -> 42,
  17 -> 1,
  18 -> 1,
  19 -> 1,
  20 -> 16,
  21 -> 33,
  22 -> 1,
  23 -> 17,
  24 -> 20,
  25 -> 1,
  26 -> 9,
  27 -> 44,
  28 -> 1,
  29 -> 49,
  30 -> 26,
  31 -> 1,
  32 -> 29,
  33 -> 46,
  34 -> 8,
  35 -> 1,
  36 -> 27,
  37 -> 1,
  38 -> 1,
  39 -> 32,
  40 -> 1,
  41 -> 31,
  42 -> 1,
  43 -> 1,
  44 -> 14,
  45 -> 1,
  46 -> 1,
  47 -> 1,
  48 -> 1,
  49 -> 1,
  50 -> 35,
  51 -> 19,
  52 -> 43,
  53 -> 22,
  54 -> 1,
  55 -> 1,
  56 -> 1,
  57 -> 1,
  58 -> 21,
  59 -> 1,
  60 -> 1,
  61 -> 39,
  62 -> 28,
  63 -> 12,
  64 -> 1,
  65 -> 1,
  66 -> 1,
  67 -> 1,
  68 -> 1,
  69 -> 41,
  70 -> 1,
  71 -> 25,
  72 -> 1,
  73 -> 6,
  74 -> 1,
  75 -> 1,
  76 -> 1,
  77 -> 1,
  78 -> 1,
  79 -> 24,
  80 -> 1,
  81 -> 30,
  82 -> 38,
  83 -> 3,
  84 -> 4,
  85 -> 1,
  86 -> 1,
  87 -> 1,
  88 -> 1,
  89 -> 1,
  90 -> 18,
  91 -> 1,
  92 -> 47,
  93 -> 37,
  94 -> 1,
  95 -> 45,
  96 -> 1,
  97 -> 15,
  98 -> 48,
  99 -> 10,
  else -> 1], 
```

这是一个完成此操作的 Z3Py 脚本，假设可以限制前 N 个索引，而不是随机索引（并且使用 x 函数而不是常量，因此编写速度更快）：[http ://rise4fun.com/Z3Py/M3TG](http://rise4fun.com/Z3Py/M3TG)

接下来是为一组随机索引执行此操作的代码，但您不能在 Z3Py@Rise 上运行它，因为它不允许使用导入，因此您必须在本地运行它。

```
from random import *
from z3 import *

x = Function('x', IntSort(), IntSort())

M = 100
N = 50

s = Solver()
idxs = sample(xrange(M),N) # get N random ids from sequence {1,...M}
print idxs

distinctlist = []
for i in range(M):
  s.add(And(x(i) >= 1, x(i) <= N))
  if i in idxs:
    distinctlist.append(x(i))

print distinctlist

s.add(Distinct(distinctlist))

print "checking..."

r = s.check()
print r
if r == sat:
  print s.model() 
```

（请注意，如果您不满足此查询，它可能会超时。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:24:18.100

我会写

```
(assert (or (and (> x1 0) (<= x1 n))
            (and (> x2 0) (<= x2 n))
            ...same for x3 thru x99...
            (and (> x100 0) (<= x100 n)))) 
```

无论`n`稍后断言什么值，只要它大于或等于 0，它都会起作用。

# r - 在无法访问互联网的服务器上安装 R

> ID：12586812
> 
> 赞同：2
> 
> 时间：2012-09-25T16:03:23.280
> 
> 标签：r, window, sysadmin

我需要在不允许我访问外部网络（即互联网）的 Windows 服务器上安装 R。我可以按如下方式安装它吗：我在另一台机器上安装 R 以及所需的包，并将整个文件夹复制到该服务器。这种方法会奏效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:08:41.240

是的，它会的。R 愉快地运行了一个 USB 棒，你可以用它来复制你的安装。

请参阅此处了解更多信息：

*   [在 USB 驱动器上运行 R](http://personal.bgsu.edu/~mrizzo/Rmisc/usbR.htm)

*   [R on Windows 关于在 USB 驱动器上运行 R 的常见问题解答](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#Can-I-run-R-from-a-CD-or-USB-drive_003f)

复制现有机器可能会对注册表项等做出假设。这种方法对我来说似乎更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:17:42.867

简单：购买新的 iPhone5，购买网络共享数据计划，将新的定制 mini-iPhone 转 USB 数据线连接到您的服务器，然后您就可以连接互联网了！

# c# - 无效路由的 URL 转发？

> ID：12586813
> 
> 赞同：2
> 
> 时间：2012-09-25T16:03:25.703
> 
> 标签：c#, asp.net, url-routing

我正在升级旧的 asp.net 网络表单站点。我想让 URL 看起来更好，所以我使用路由系统，如下所示：

```
void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("account settings",
        "settings/account/",
        "~/accountsettings.aspx");
} 
```

这工作正常。像这样的网址`mydomain.com/settings/account/`看起来好多了。但是，仍然可以使用其物理位置访问该页面，如`mydomain.com/accountsettings.aspx`. 我想将这些旧表单网址的请求转发到我的新网址。

最好的方法是什么？有没有我可以使用的简单方法，例如`RegisterRoutes`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:25:02.867

我相信您需要让路由引擎知道使用 IgnoreRoute 忽略物理文件的路由：

```
routes.IgnoreRoute("accountsettings.aspx"); 
```

请仔细检查 IgnoreRoute 的语法，因为我不记得您是否需要包含相对路径或仅包含文件名。

一旦你有这个工作，你可以捕获它将生成的 404，可能在 global.asax 的全局错误处理程序中，如果那是请求的路径，则重定向。此博客文章有一个如何在全局错误处理程序中捕获 404 的示例： [http ://www.andornot.com/blog/post/Handling-404-errors-with-ASPNET.aspx](http://www.andornot.com/blog/post/Handling-404-errors-with-ASPNET.aspx)

如果这是一个公共站点并且您担心 SEO，您可能还需要考虑使用 http 状态代码 301 指定它是永久重定向。这将告诉 Google 和其他搜索引擎旧页面现在存在于新位置，并且您不会失去该页面的价值。

希望有帮助！

# .net - 如何为 (int*int) [] 制作一个 IEqualityComparer 进行结构比较？

> ID：12586814
> 
> 赞同：3
> 
> 时间：2012-09-25T16:03:28.703
> 
> 标签：.net, f#, comparison

我想做一个`hashset`of `(int*int)[]`，如下

```
let mySet = new HashSet<_>() 
```

因为我认为 and 的默认比较器`array`是`tuple`，`HashIdentity.Structural`它会自动满足我的需求。

但是它不起作用。这是我的实验：

```
let mySet = new HashSet<_>()
let a = [|1;2|]
let b = [|1;2|]
let c = compare a b
mySet.Add(a)
mySet.Add(b)

val a : int [] = [|1; 2|]
val b : int [] = [|1; 2|]
val c : int = 0
val it : HashSet<int []> = seq [[|1; 2|]; [|1; 2|]]

let mySet = new HashSet<_>()
let a = [1;2]
let b = [1;2]
let c = compare a b
mySet.Add(a)
mySet.Add(b)

val a : int list = [1; 2]
val b : int list = [1; 2]
val c : int = 0
val it : HashSet<int list> = seq [[1; 2]] 
```

正如我们所见，*array*`IEqualityComparer`的默认值不是，但*list*是。但是，默认值对它们都是结构性的。*`HashIdentity.Structural`*`IComparer`**

 **这有点奇怪，为什么？还如何通过使用和`IEqualityComparer`的默认结构比较为我的哈希集创建一个。`tuple``array`

我知道如何在 C# 中手动完成，但由于我刚开始学习 F#，有人可以帮忙吗？

以下代码是我的努力：

```
let a = [|(1,2);(2,3)|]
let b = [|(1,2);(2,3)|]

type MyEqualityComparer() =
    interface IEqualityComparer<(int*int)[]> with
        member this.Equals (a,b) = (Array.forall2 (=) a b)
        member this.GetHashCode (a) = hash (a |> Array.map hash) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T17:19:31.303

我认为一个原因是 Array 是一种可变且与 .NET 兼容的类型。遵循.NET 框架中默认的*参考比较*是有意义的。

`HashIdentity.Structural`您可以作为参数传递。以下示例对数组和元组使用结构比较：

```
let mySet = HashSet(HashIdentity.Structural)
let a = [|(1, 2)|]
let b = [|(1, 2)|]
mySet.Add(a)
mySet.Add(b)
// val it : HashSet<(int * int) []> = seq [[|(1, 2)|]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:27:03.970

检查[Dictionary](http://msdn.microsoft.com/en-us/library/x525za90.aspx)和[HashSet](http://msdn.microsoft.com/en-us/library/bb495294.aspx)类的文档。

**哈希集**

*初始化 HashSet 类的新实例，该实例为空并使用集合类型的默认相等比较器。*

**字典**

*根据默认的相等比较器，字典中的每个键都必须是唯一的。字典需要一个相等的实现来确定键是否相等。此构造函数使用默认的泛型相等比较器 EqualityComparer.Default。如果类型 TKey 实现 System.IEquatable 泛型接口，则默认相等比较器使用该实现。或者，您可以使用接受比较器参数的构造函数来指定 IEqualityComparer 通用接口的实现。***

# html5-canvas - KineticJS - Kinetic.Path setFill - 需要慢动画

> ID：12586815
> 
> 赞同：0
> 
> 时间：2012-09-25T16:03:33.657
> 
> 标签：html5-canvas, kineticjs

我有一张来自 Kinetic.Path 对象的图像，每个区域都可以通过鼠标单击填充 - setFill(...)。

是否可以用“慢动画”填充区域？就像那里 - [http://goo.gl/0rgry](http://goo.gl/0rgry)。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:32:50.710

首先，你能做一个 jsfiddle 以便你的代码可以玩吗？这样可以得到更准确的结果。

其次，有一个答案，Transitions。

KineticJS 中的大多数东西都可以从一种配置转换到另一种配置。

```
 var path = new Kinetic.Path({fill: 'blue'}); 
```

然后：

```
 path.transitionTo({fill: 'red', duration: 2}; 
```

持续时间是控制速度的因素。我不知道颜色是如何过渡的，所以你应该在 kineticJS 网站上查找“shape tango”。

# jquery - 查找最近的类实例

> ID：12586822
> 
> 赞同：1
> 
> 时间：2012-09-25T16:03:53.233
> 
> 标签：jquery

我有一个带有回复选项的评论列表。单击回复按钮时，评论下方应出现一个表单。

HTML：

```
<div id="" class="comment">
    <div class="comment-message">Message
        <div class="information"> 
            <a id="" class="comment-reply" href="/comments/reply/"> Reply </a>
        </div>
    </div>
</div>
<div class="test">Test</div> 
```

CSS：

```
.test{display:none;} 
```

jQuery：

```
 $('.comment-reply').live("click", function(e) {
    e.preventDefault();
    $this = $(this);
    $this.closest('.test').toggle();
}); 
```

我尝试过使用以下内容：

```
$this.closest('.test').toggle(); 
```

对此的任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:05:18.990

如果您的 html 结构相同，那么您可以在下面尝试，

```
$(this).closest('.comment').next().toggle() 
```

如果该`Reply`部分和`test`then 之间有一些元素，请使用`.nextAll`

```
$(this).closest('.comment').nextAll('.test').toggle() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:07:53.327

**试试这个：**

如果您有其他最接近的元素，而不仅仅是带有 class 的注释`.test`，您需要确保获得正确的元素，执行以下操作：

```
$(this).closest('.comment').next('.test').toggle(); 
```

# bash - LaunchD Plist 不工作

> ID：12586824
> 
> 赞同：2
> 
> 时间：2012-09-25T16:04:17.480
> 
> 标签：bash, active-directory, sh, osx-mountain-lion, launchd

编辑：好像我在控制台 com.apple.launchd: (com.xxxx.adbind[57]) Exited with code: 1 中遇到错误

那有什么意思？

还; 如果我加载使用launchctl命令登录的launchd plist文件，它工作正常！

我正在让自己发疯，试图弄清楚为什么我的 launchd 不起作用。我在 Mountain Lion 10.8.2 中使用它当我使用 launchctl 手动启动它时，它说它已加载，但脚本未运行。手动运行的脚本也可以正常工作。也许它只需要更好的眼睛来看看我在做什么。

首先，我将解释我要完成的工作。我有大约 400 台计算机在场外成像。我需要这些计算机绑定到 AD，这不能在我们的网络之外完成。我想通过在启动时运行launchd脚本来调用脚本，然后让脚本在运行之前检查它是否在网络中，我可以在AD用户登录之前将这些计算机在第一次启动时绑定到我们的网络中。

这是我的launchd，我把它放在/Library/launchDaemons

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.xxxx.adbind</string>
    <key>ProgramArguments</key>
    <array>
        <string>/usr/local/bin/adbind.bash</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
    <key>WorkingDirectory</key>
    <string>/usr/local/bin</string>
</dict>
</plist> 
```

我试过在有和没有 WorkingDirectory 键的情况下使用它。

这是我的脚本，我将我的脚本放在 /usr/local/bin

```
#!/bin/bash

computerid=`/usr/sbin/scutil --get LocalHostName`

# Standard parameters
domain="xxx.xxxx.edu"           # fully qualified DNS name of Active Directory Domain
udn="xxxxxx"            # username of a privileged network user
password="xxxxx"                    # password of a privileged network user
ou="OU=xxx,DC=xxx,DC=xxxx,DC=edu"       # Distinguished name of container for the computer

# Advanced options
alldomains="enable"         # 'enable' or 'disable' automatic multi-domain authentication
localhome="enable"          # 'enable' or 'disable' force home directory to local drive
protocol="smb"              # 'afp' or 'smb' change how home is mounted from server
mobile="enable"         # 'enable' or 'disable' mobile account support for offline logon
mobileconfirm="disable"     # 'enable' or 'disable' warn the user that a mobile acct will be created
useuncpath="enable"         # 'enable' or 'disable' use AD SMBHome attribute to determine the home dir
user_shell="/bin/bash"      # e.g., /bin/bash or "none"
preferred="-preferred xxx.xxxxx.edu"    # Use the specified server for all Directory lookups and authentication
                            # (e.g. "-nopreferred" or "-preferred ad.server.edu")
admingroups="xxx\admins,xxx\teachers,xxx\ADManagement - Computers,xxx\employees"    # These comma-separated AD groups may administer the machine (e.g. "" or "APPLE\mac admins")

# Login hook setting -- specify the path to a login hook that you want to run instead of this script

### End of configuration

## Wait until all network services are up.
ipconfig waitall

# Check to see if we're in the district
if ping -c 1 xxx.xxx.x.x
then

# Activate the AD plugin
defaults write /Library/Preferences/DirectoryService/DirectoryService "Active Directory" "Active"
plutil -convert xml1 /Library/Preferences/DirectoryService/DirectoryService.plist
sleep 5

# Remove computer from OU
dsconfigad -f -r -u xxxxxxx -p xxxxxx
sleep 5

# Bind to AD
dsconfigad -f -a $computerid -domain $domain -u $udn -p "$password" -ou "$ou"

# Configure advanced AD plugin options
if [ "$admingroups" = "" ]; then
    dsconfigad -nogroups
else
    dsconfigad -groups "$admingroups"
fi

dsconfigad -alldomains $alldomains -localhome $localhome -protocol $protocol \
    -mobile $mobile -mobileconfirm $mobileconfirm -useuncpath $useuncpath \
    -shell $user_shell $preferred

# Restart DirectoryService (necessary to reload AD plugin activation settings)
killall DirectoryService

# Add the AD node to the search path
if [ "$alldomains" = "enable" ]; then
    csp="/Active Directory/All Domains"
else
    csp="/Active Directory/$domain"
fi

# This works in a pinch if the above code does not
defaults write /Library/Preferences/DirectoryService/SearchNodeConfig "Search Node Custom Path Array" -array "/Active Directory/All Domains"
defaults write /Library/Preferences/DirectoryService/SearchNodeConfig "Search Policy" -int 4
defaults write /Library/Preferences/DirectoryService/ContactsNodeConfig "Search Node Custom Path Array" -array "/Active Directory/All Domains"
defaults write /Library/Preferences/DirectoryService/ContactsNodeConfig "Search Policy" -int 4

plutil -convert xml1 /Library/Preferences/DirectoryService/SearchNodeConfig.plist

## Remove the script and launchd job. Be sure to delete the script.
launchctl unload -w /Library/LaunchDaemons/com.xxxx.adbind.plist 
rm /Library/LaunchDaemons/com.xxxx.adbind.plist
rm /usr/local/bin/adbind.bash

exit 0
else
echo "District not Available. Quitting"
exit 1
fi 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:13:53.967

好吧，我终于解决了我的问题并找到了解决方案！我将在这里发布答案，希望有一天能帮助别人！似乎 launchd 文件运行的时间不够长，无法运行我的整个脚本。所以我在 plist 中添加了 KeepAlive 键。现在看起来像这样。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.xxxx.adbind</string>
    <key>KeepAlive</key>
    <dict>
        <key>SuccessfulExit</key>
        <false/>
    </dict>
    <key>ProgramArguments</key>
    <array>
        <string>/usr/local/bin/adbind.bash</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
</dict>
</plist> 
```

我也遇到了权限问题，发现我创建并将脚本放入的“bin”文件夹不属于 root。所以我在我的文件和文件夹上运行了 chown 和 chmod。像这样。

```
sudo chown root:wheel bin
sudo chown root:wheel adbind.bash
sudo chmod 755 adbind.bash
sudo chown root:wheel com.xxxx.adbind.plist
sudo chmod 755 com.xxxx.adbind.plist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:25:40.580

退出代码 1 表示脚本以错误条件退出。如果它以 0 退出，则意味着没有错误。

# sql - 从 SQL 中的 select 语句中创建函数

> ID：12586826
> 
> 赞同：0
> 
> 时间：2012-09-25T16:04:29.837
> 
> 标签：sql, function, sql-function

我已经建立了一个选择语句来选择参与者首次记录在数据库中的日期。但是我想从这个 select 语句中创建一个函数来使用它。我对 SQL 相当陌生，以前从未构建过函数。我的选择语句如下所示：

```
Select DATEDIFF(day, (select min(startdatetime)
                        from GamePlay
                     ), enddatetime)
  from GamePlay
 where ParticipantID = '200' 
```

我尝试的功能如下所示：

```
CREATE FUNCTION daysPlayed (@ParticipantID int)
RETURNS DateTime
AS
BEGIN
    Return DATEDIFF(day, (select min(startdatetime)
                            from GamePlay
                         ), enddatetime)
      from GamePlay
     where ParticipantID = @ParticipantID
END
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:23:12.287

DATEDIFF 不返回日期时间。它返回一个整数。

您的函数可能如下所示：

```
CREATE FUNCTION daysPlayed (@ParticipantID int)
RETURNS INT
AS
BEGIN
    DECLARE @result INT
    SELECT @result=DATEDIFF(day, (select min(startdatetime) from GamePlay), enddatetime) from GamePlay where ParticipantID = @ParticipantID
    RETURN @result

END 
```

但我不认为它会做你想做的事。另外，请注意，在选择大量行时使用函数会保证性能下降，并且您可能无法使用在表中设置的某些索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:29:20.597

我不确切知道您想要什么，但查看此示例可能会有所帮助

```
CREATE FUNCTION mDay (@Date nchar(10))
RETURNS nchar(2)
AS
BEGIN
RETURN substring(@Date,9,2)
END

SELECT     dbo.Courses.MID, dbo.Masters.ID, dbo.Masters.Name,COUNT(CASE dbo.mDay(CDate) WHEN '01' THEN 2 END) AS day1

FROM         dbo.Courses INNER JOIN
                  dbo.Masters ON dbo.Courses.MID = dbo.Masters.MCode
WHERE     (dbo.Courses.CLevel = @Kind) AND (dbo.Courses.CDate BETWEEN @Date1 AND @Date2)
GROUP BY dbo.Courses.MID, dbo.Masters.Name, dbo.Masters.Family, dbo.Masters.ID 
```

# php - 我的 CodeIgniter sql 连接查询中的错误

> ID：12586828
> 
> 赞同：1
> 
> 时间：2012-09-25T16:04:39.210
> 
> 标签：php, sql, codeigniter

所以我一直在寻找错误一段时间，但仍然找不到。

这是代码 -

```
 $this->db->select('*');
        $this->db->from('friendRequests');
        $this->db->where(array('friendRequests.status' => 1, 'users.status' => 1)); 
        $this->db->or_where(array('friendRequests.senderId' => $this->session->userdata('userId'), 'friendRequests.receiverId' => $this->session->userdata('userId'))); 
        $this->db->join('users', 'users.id = '.$this->session->userdata('userId'));             
        $query = $this->db->get(); 
```

它给了我这个错误-

```
Unknown column '1' in 'on clause'

SELECT *
  FROM (`friendRequests`) 
  JOIN `users` ON `users`.`id` = `1`
 WHERE `friendRequests`.`status` = 1
   AND `users`.`status` = 1 
    OR `friendRequests`.`senderId` = '1' 
    OR `friendRequests`.`receiverId` = '1' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:10:07.770

如果一个条目被反引号包围，即使没有反引号它也不会是一列，它也算作一列。因此，它认为那`1`是行上的一列`JOIN`。

显然这是`join`CI 方法的产物。您可以通过将该条件移至`WHERE`子句来非常轻松地修复它。没有必要在`JOIN`子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:09:39.790

JOIN 不是那样工作的；语法是：

```
JOIN 'tablename' ON 'tablename.field' = 'othertable.field' 
```

如果我不得不假设您正在尝试获取用户的好友请求：

```
JOIN 'users' ON 'users'.'id' = 'friendRequests'.'receiverId' 
```

# c++ - 如何使用可变参数模板对此进行编程？

> ID：12586829
> 
> 赞同：3
> 
> 时间：2012-09-25T16:04:39.807
> 
> 标签：c++, c++11, variadic-templates

我自己从未使用过可变参数模板，但我想我现在可能需要它们。假设我有一堂课

```
class A {
  int Kern;
  template<int> void func_a(int, double) const;
  template<int> void func_b(double, double, char) const;
  template<int> unsigned func_c(float, std::vector<int> const&) const;
public
  /* ... */
  void FuncA(int, double) const;
  void FuncB(double, double, char) const;
  unsigned FuncC(float, std::vector<int> const&) const;
}; 
```

其中`A::FuncA()`等的定义都是形式

```
void A::FuncA(int i, double x) const
{
   switch(Kern) {
   case 1: return func_a<1>(i,x);
   case 2: return func_a<2>(i,x);
   case 3: return func_a<3>(i,x);
   /* ... */
   }
 } 
```

我目前使用 C 宏实现此开关

```
#define SwitchKernMacro(KERN,FUNC)   \
switch(KERN) {                       \
case 1: FUNC(1);                     \
case 2: FUNC(2);                     \
case 3: FUNC(3);                     \
/* ... */                            \
} 
```

这样

```
void A::FuncA(int i, double x) const
{
#define FuncK(KERN) return func_a<KERN>(i,x);
  SwitchKernMacro(Kern,FuncK);
#undef FuncK
} 
```

我喜欢避免使用这个 C 宏来支持可变参数模板解决方案，这样我的函数的实现就变得简单（或类似）

```
void A::FuncA(int i, double x) const
{ return SwitchKern(Kern,func_a,i,x); }    
void A::FuncB(double a, double b, char c) const
{ return SwitchKern(Kern,func_b,a,b,c); }
unsigned A::FuncC(float f, std::vector<int> const&v) const
{ return SwitchKern(Kern,func_c,f,v); } 
```

模板应该是`SwitchKern`什么样子的？

**编辑**

关于 C++ 模板以及何时可以使用它们似乎有些混乱。假设，我只有以下非常简单的功能

```
class A {
  int Kern;
  template int> void simple() const;
public:
  void Simple() const
  {
    switch(K) {
    case 1: return simple<1>();
    case 2: return simple<2>();
    case 3: return simple<3>();
    default: return simple<0>();
    }
  }
  /* ... */
}; 
```

然后我也可以`A::Simple()`通过

```
class A {
  /* ... */
  template<int> friend struct simple_aux;
};

template<class T, template<int> class SimpleAux>
void Switch(int K, const T* a) {
  switch(K) {
  case 1: return SimpleAux<1>(a)();
  case 2: return SimpleAux<2>(a)();
  case 3: return SimpleAux<3>(a)();
  default: return SimpleAux<0>(a)();
  }
}

template<int k> struct simple_aux
{
  const A*const a;
  explicit simple_aux(const A*a__) : a(a__) {}
  void operator()() { return a->simple<k>(); }
};

void A::Simple() const
{ Switch<A,simple_aux>(K,this); } 
```

但是，此解决方案不允许返回类型不同于`void`函数的任意参数`A::Simple()`（传递给`A::simple<>()`）。我的问题是如何使用可变参数模板添加这些功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:34:36.860

问题是函数模板不能传递给模板，只能传递给类模板。您可以使用辅助类解决此问题：

```
template<template<int i> class Helper, typename... Args>
auto SwitchKern(int Kern, const A &a, Args &&...args)
-> decltype((a.*(Helper<0>::func()))(args...))
{
    switch (Kern) {
    case 1: return (a.*(Helper<1>::func()))(std::forward<Args>(args)...);
    case 2: return (a.*(Helper<2>::func()))(std::forward<Args>(args)...);
    case 3: return (a.*(Helper<3>::func()))(std::forward<Args>(args)...);
    }
}

template<int i>
struct FuncAHelper {
    static decltype(&A::func_a<i>) func() { return &A::func_a<i>; }
};

void A::FuncA(int i, double x) const
{
    return SwitchKern<FuncAHelper, int &, double &>(Kern, *this, i, x);
} 
```

另请参阅[是否有一种通用方法可以将函数模板调整为多态函数对象？](https://stackoverflow.com/questions/7033645/is-there-a-generic-way-to-adapt-a-function-template-to-be-a-polymorphic-function)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T16:16:36.733

我认为模板都是关于编译时解决方案的，它们无助于解决运行时问题，因此如果您使用开关检查运行时值，则无法更改为模板（可变参数或正常）。

# ios6 - 当我尝试访问 uibutton 的 titleLabel 属性时出现奇怪的崩溃（xcode 4.5 和 IOS sdk 6.0）

> ID：12586834
> 
> 赞同：0
> 
> 时间：2012-09-25T16:05:05.187
> 
> 标签：ios6, xcode4.5, unrecognized-selector

我在 xcode 4.5 和 sdk 6.0 中发现了另一个恼人的错误：当我运行以下代码时：

```
UIColor *newcolor = [UIColor colorWithCIColor:[CIColor colorWithString:@"1 1 1 1"]];
[button setTitleColor:newcolor forState:UIControlStateNormal];
UILabel *lbl = selectedbutton.titleLabel; 
```

它总是因错误而失败：

```
-[UICIColor colorSpaceName]: unrecognized selector sent to instance 0xa9864f0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UICIColor colorSpaceName]: unrecognized selector sent to instance 0xa9864f0'
*** First throw call stack: [...] 
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:04:42.210

我找到了一种解决方法：在使用我的 colorWithCIColor 之前，我使用以下方法复制了它：

```
newcolor = [UIColor colorWithCGColor:newcolor.CGColor]; 
```

它解决了崩溃。反正很奇怪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T23:42:31.520

我的情况和你一样，我有一串 RGB UIColor 的组成值

虽然使用 CIColor colorWithString: 更紧凑以消除我手动转换的错误：

```
NSArray * colorParts = [color componentsSeparatedByString: @" "];

CGFloat red = [[colorParts objectAtIndex:0] floatValue];
CGFloat green = [[colorParts objectAtIndex:1] floatValue];
CGFloat blue = [[colorParts objectAtIndex:2] floatValue];
CGFloat alpha = [[colorParts objectAtIndex:3] floatValue];

UIColor * newColor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];

[button setTitleColor:newcolor forState:UIControlStateNormal]; 
```

这当然不是最优雅的方法，但如果在更新后突然成为问题，这是一个很好的解决方法。

# jquery - 如何在具有绝对位置的滚动窗口中居中模式对话框？

> ID：12586840
> 
> 赞同：7
> 
> 时间：2012-09-25T16:05:36.930
> 
> 标签：jquery, css, modal-dialog, draggable, center

我试图在滚动窗口中居中模式对话框。此模式是绝对位置，因为必须在屏幕中可拖动。我将此插件用于可拖动功能：

[http://threedubmedia.com/code/event/drag](http://threedubmedia.com/code/event/drag)

我的问题是，如果我放 top: 50% 它在中心窗口中显示模态但不考虑所有滚动窗口，则此模态具有绝对位置。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T16:10:28.240

你应该使用

```
position:fixed 
```

而是绝对/相对。

> position:fixed 元素相对于浏览器窗口定位。

使用它，您应该不会因为滚动而遇到任何问题。

[http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

你也可以看到这个主题：

[无需滚动的固定定位](https://stackoverflow.com/questions/2109314/fixed-positioning-without-scrolling)

[滚动后如何放置窗口的div中心](https://stackoverflow.com/questions/2583108/how-to-place-a-div-center-of-the-window-after-scrolling)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-25T16:34:02.610

因此，您的对话框的位置设置为绝对，并且它是文档/正文的直接子级，对吧！？

以绝对位置居中提示模态：

```
// Get the document offset :
var offset = $(document).scrollTop(),

// Get the window viewport height
viewportHeight = $(window).height(),

// cache your dialog element
   $myDialog = $('#MY_DIALOG');

// now set your dialog position
$myDialog.css('top',  (offset  + (viewportHeight/2)) - ($myDialog.outerHeight()/2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:16:34.830

一般来说，要找到带有滚动条的视口中心。取窗口高度，除以 2，再加上滚动顶部。结果是应该从文档顶部偏移的像素数。

如果您的定位元素是多个可滚动元素的子元素，那么您将需要考虑这些，但基本数学是相同的。

作为旁注，您尝试使用的标记示例将有助于获得更准确的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T16:08:10.743

**如果它在可滚动的 div 内，**请确保原始 div 是：`<div style="position:relative;">`。

这样，它`div`内部的**绝对值**将保持在它的范围内，并使用其父相对 div 作为参考点`top:50%;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-18T03:25:46.277

尝试删除位置选项

```
$dialog = $('<div><table width="100%" height="100%"><tr><td height="100%" align="center"><img style="vertical-align:middle"  src="css/images/ajax-loader.gif"></td></tr></table></div>')
        .html(msj)
        .dialog({
            title:"Validacion del ingreso.",
            width:350, 
            height:200, 
            modal:true,
            draggable:true,
            buttons: {
                                "Aceptar": function()
                                {
                                        $(this).dialog("close");
                                        $(this).dialog("destroy");

                                }
            }
        }); 
```

# java - Android到ffmpeg预览帧是灰度的

> ID：12586842
> 
> 赞同：2
> 
> 时间：2012-09-25T16:05:42.197
> 
> 标签：java, android, android-ndk, ffmpeg

嗨，我正在使用`android`并`ffmpeg`一起流式传输到 Wowza 服务器。在这`android`部分，我只有这个：

```
public synchronized void onPreviewFrame(byte[] data, Camera camera) {
/* get video data */
naStream(data); // native method
} 
```

在本机端使用`ffmpeg`（frame_video 是来自的字节数组`android`）：

```
 av_init_packet(&pkt);
    avpicture_fill((AVPicture *)picture,frame_video,PIX_FMT_YUV420P,640,480);

        if(ret == 0)
            LOGI(7,"avpicture_fill -> error %d", ret);

        /* encode the image */
        pkt.data = NULL;
        pkt.size = 0;

        ret = avcodec_encode_video2(video_c, &pkt, picture, &got_packet);

        if(ret != 0)
            LOGI(7,"avcodec_encode_video2 -> error %d", ret);

        /* if zero size, it means the image was buffered */
        if (got_packet) {
            if (pkt.pts != AV_NOPTS_VALUE) {
                pkt.pts = av_rescale_q(picture->pts, video_c->time_base, AV_TIME_BASE_Q);
            }
            if (pkt.dts != AV_NOPTS_VALUE) {
                pkt.dts = av_rescale_q(pkt.dts, video_c->time_base, AV_TIME_BASE_Q);
            }

            pkt.duration = av_rescale_q(video_st->duration, video_c->time_base, video_st->time_base);

            if (video_c->coded_frame->key_frame)
                pkt.flags |= AV_PKT_FLAG_KEY;

            /* write the compressed frame in the media file */
            ret = av_interleaved_write_frame(oc, &pkt); 
```

这里的问题是流以灰度形式到达...... **我尝试使用以下方法从 NV21 转换为 YUV420P：**

```
img_convert_ctx = sws_getContext(video_c->width, video_c->height,PIX_FMT_NV21, video_c->width, video_c->height,PIX_FMT_YUV420P,SWS_FAST_BILINEAR | SWS_PRINT_INFO, NULL, NULL, NULL);

sws_scale(img_convert_ctx, (const uint8_t * const*)picture->data, picture->linesize, 0,video_c->height, tmp_picture->data, tmp_picture->linesize);

sws_freeContext(img_convert_ctx); 
```

但后来我不能 write_interleaved 数据包......

我正在做这样的“**图片**”和“ **tmp_picture** ”分配：

```
picture = avcodec_alloc_frame();
tmp_picture = avcodec_alloc_frame();

numBytes=avpicture_get_size(PIX_FMT_YUV420P, video_c->width, video_c->height);
buffer=(uint8_t *)av_malloc(numBytes*sizeof(uint8_t));

avpicture_fill((AVPicture *)tmp_picture, buffer, PIX_FMT_YUV420P,video_c->width, video_c->height); 
```

* * *

在我删除以下行之后：

```
if (pkt.pts != AV_NOPTS_VALUE) {
                pkt.pts = av_rescale_q(picture->pts, video_c->time_base, AV_TIME_BASE_Q);
            }
            if (pkt.dts != AV_NOPTS_VALUE) {
                pkt.dts = av_rescale_q(pkt.dts, video_c->time_base, AV_TIME_BASE_Q);
            } 
```

并补充说：

```
if (video_c->coded_frame->pts != AV_NOPTS_VALUE)
  pkt.pts = av_rescale_q(video_c->coded_frame->pts,video_c->time_base, video_st->time_base); 
```

它开始编写交错的数据包，但在 wowza 我看不到任何东西......有人可以帮我吗？

# .net - OpenCover/NUnit 找不到 PDB 文件

> ID：12586843
> 
> 赞同：7
> 
> 时间：2012-09-25T16:05:43.027
> 
> 标签：.net, nunit, opencover

我正在使用 OpenCover [http://nuget.org/packages/opencover](http://nuget.org/packages/opencover)并编写了以下批处理文件来运行单元测试并生成代码覆盖率统计信息：

```
echo off

echo ***************************
echo *** Running NUnit tests ***
echo ***************************
"..\packages\OpenCover.4.0.804\OpenCover.Console.exe" -register:user -target:"..\NUnit 2.6\bin\nunit-console-x86.exe" -targetargs:"..\Web.UnitTests\bin\Debug\Web.UnitTests.dll"  -output:coverage.xml

echo **************************************
echo *** Generating coverage statistics ***
echo **************************************
"..\packages\ReportGenerator.1.6.0.0\ReportGenerator.exe" "-reports:coverage.xml" "-targetdir:%CD%"

echo ***********************************
echo *** Launching Internet Explorer ***
echo ***********************************
start "C:\Program Files (x86)\Internet Explorer\iexplore.exe" "%CD%\Index.htm"

pause 
```

但是，当我运行批处理文件时，出现错误：

```
Committing...
No results - no assemblies that matched the supplied filter were instrumented
    this could be due to missing PDBs for the assemblies that match the filter
    please review the output file and refer to the Usage guide (Usage.rtf) 
```

很确定我做了一些愚蠢的事情/遗漏了一些明显的事情，但不确定是什么！

PDB 文件位于文件夹中：“..\Web.UnitTests\bin\Debug\”

感谢任何帮助，

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T08:03:56.507

找到了解决方案，我错过了 nunit 的 /noshadow 开关。即目标参数应该是：

```
-targetargs:"..\Web.UnitTests\bin\Debug\Web.UnitTests.dll /noshadow" 
```

现在完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-10T10:16:23.937

注册 opencover DLL（使用 x86 或 x64 DLL）：

```
regsvr32 /n /i:user C:OpenCover.4.5.3723\x86\OpenCover.Profiler.dll 
```

在 openCover 参数中，`-register:user`如果它不起作用，请使用`-register:path32`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T18:06:00.653

我知道您的问题已解决，但我遇到了与您类似的问题。我已经完成了 /noshadow 的事情。

使用 Visual Studio 2015，请确保按照此处的说明更新到最新版本的 OpenCover。- [OpenCover/NUnit 找不到 PDB 文件](https://stackoverflow.com/questions/12586843/opencover-nunit-cant-find-pdb-files/36528461#36528461)

本来可以为我节省一个小时的头痛。

# drupal - Drupal 6 模式未安装所有表

> ID：12586845
> 
> 赞同：0
> 
> 时间：2012-09-25T16:05:50.187
> 
> 标签：drupal, drupal-6

所以这让我疯狂了 2 天，我写了一个模块，它使用 3 个 DB 表，其中 2 个安装完美，这是第三个：

```
$schema['tags_twistal'] = array(
    'description' => t('Taxonomy for videos (tags)'),
    'fields' => array(
        'vid' => array(
            'description' => t('The video ID'),
            'type' => 'varchar',
            'length' => 255,
            'not null' => TRUE,
        ),
        'tag' => array(
            'description' => t('The tag name'),
            'type' => 'varchar',
            'length' => 255,
            'not null' => TRUE,
        ),
    ),
    'primary key' => array('tag','vid'),
); 
```

我能想到的是它与我设置的主键有关，我也尝试过：

```
'unique keys' => array(
    'tag_vid' => array('tag', 'vid'),
),
'primary key' => array('tag_vid'), 
```

有任何想法吗？我要拔头发了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T04:28:50.497

I'm having a similar issue in Drupal 7.

The tables of mine that install correctly are those which have a matching entry in the array returned by hook_node_info().

It looks as though Drupal will not create any tables that are not referenced in hook_node_info(), even if they are explicitly enumerated in hook_scheme(). I can't find this documented anywhere, but it matches my experience, and is a pain in the butt.

# sql-server - 通过 PDO 发出 SQL Server 备份失败

> ID：12586846
> 
> 赞同：0
> 
> 时间：2012-09-25T16:05:53.613
> 
> 标签：sql-server, pdo, database-backups

我正在使用 PHP 的 PDO API 与 SQL Server 2005 交谈：

```
$mssql = new PDO('dblib:host=foohost;dbname=foodb', 'foouser', 'foopassword'); 
```

随后，我想将数据库备份到本地文件，如下面的代码所示 - 然后失败。

```
$query = "
    BACKUP DATABASE foodb
        TO DISK = 'D:\\migration\\test_backup.bak';
    GO
";
$stmt = $mssql->prepare($query);
$stmt->execute(); 
```

我得到的错误是这个（结果来自`$stmt->errorInfo()`）：

```
[0] => HY000
[1] => 102
[2] => General SQL Server error: Check messages from the SQL Server [102] (severity 15) [(null)]
[3] => -1
[4] => 15 
```

我尝试使用 SQL Server Management Studio 做同样的事情，并且完全相同的查询有效。所以 - 关于我如何让它工作的任何提示（注意：我被迫在远程 linux 主机上使用 PHP，所以任何本地 Windows 工具都不起作用）

# vba - 从过滤范围中获取最后一行

> ID：12586848
> 
> 赞同：6
> 
> 时间：2012-09-25T16:06:01.547
> 
> 标签：vba, excel, autofilter

过滤工作表中的数据时，如何找到最后一行数据？我一直在玩`Special Cells`，`Visible Cells`但找不到解决方案。我认为它必须是我下面的某种变化：

```
 ...
    With ws
        LR = .Range("A" & Rows.Count).End(xlUp).Row
        .Range("A1:E" & LR).AutoFilter Field:=2, Criteria1:="=4"
        LRfilt = .Range("A" & Rows.SpecialCells(xlCellTypeVisible).Count).End(xlUp).Row
        Debug.Print LR
        Debug.Print LRfilt
    End With
    ... 
```

文件可以在这里找到：

wikisend.com/download/443370/FindLRFilteredData.xls

**编辑：**

在与 Siddharth 讨论后意识到，我不希望`Last Row`我需要的属性来计算可见行数，这导致了下面 Sid 的解决方案......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:31:32.467

过滤后，对 lastrow 使用相同的公式将返回最后过滤的行：

```
...
With ws
    LR = .Range("A" & Rows.Count).End(xlUp).Row
    .Range("A1:E" & LR).AutoFilter Field:=2, Criteria1:="=4"
    LRfilt =  .Range("A" & Rows.Count).End(xlUp).Row
    Debug.Print LR
    Debug.Print LRfilt
End With
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:17:26.690

编辑：聊天后跟进

```
Option Explicit

Sub FilterTest()
    Dim rRange As Range, fltrdRng As Range, aCell As Range, rngToCopy As Range
    Dim ws As Worksheet
    Dim LR As Long

    '~~> Change this to the relevant sheet
    For Each ws In ThisWorkbook.Worksheets
        If Not ws.Name = "Sheet1" Then
            With ws                    
                '~~> Remove any filters
                .AutoFilterMode = False

                LR = .Range("A" & Rows.Count).End(xlUp).Row

                '~~> Change this to the relevant range
                Set rRange = .Range("A1:E" & LR)

                With rRange
                    '~~> Some Filter. Change as applicable
                    .AutoFilter Field:=2, Criteria1:=">10"

                    '~~> Get the filtered range
                    Set fltrdRng = .SpecialCells(xlCellTypeVisible)
                End With

                For Each aCell In fltrdRng
                    If aCell.Column = 1 Then
                        If rngToCopy Is Nothing Then
                            Set rngToCopy = aCell
                        Else
                            Set rngToCopy = Union(rngToCopy, aCell)
                        End If
                    End If
                Next

                Debug.Print ws.Name
                Debug.Print rngToCopy.Address

                'rngToCopy.Copy

                Set rngToCopy = Nothing

                '~~> Remove any filters
                .AutoFilterMode = False
            End With
        End If
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-14T07:47:19.757

假设您的数据已经被过滤，您可以试试这个：

```
Range("A1").Select

Dim FinalRowFiltered as Long

Dim FR as as String

FinalRowFiltered = Range("A" & Rows.Count).End(xlUp).Row

FR = "A" & CStr(FinalRowFiltered)

Range(FR).Select 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-03T21:36:22.407

经过大量研究，提出了不同的选择，我将其中一些放在一起，这对我来说似乎工作正常（我让它在表格中工作）：

希望你觉得它有用。

```
ActiveSheet.ListObjects("Table").Range.SpecialCells(xlCellTypeVisible).Select

b = Split(Selection.Address, "$")
iRes = UBound(b, 1)
If iRes = -1 Then
    iRes = 0
End If

LastRow = Val(b(iRes)) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-27T09:14:58.610

这似乎有效。当过滤器正常时 .end(xlUp) 给出过滤范围的最后一行，但不给出工作表的最后一行。我建议您使用这种技术来获取最后一行：

```
Sub GetLastRow
    '   Find last row regardless of filter
    If Not (ActiveSheet.AutoFilterMode) Then        ' see if filtering is on if already on don't turn it on    
        Rows(1).Select                            ' Select top row to filter on
        Selection.AutoFilter                      ' Turn on filtering
    End if           
    b = Split(ActiveSheet.AutoFilter.Range.Address, "$") ' Split the Address range into an array based on "$" as a delimiter.  The address would yeild something like $A$1:$H$100
    LastRow= Val(b(4))   '  The last value of the array will be "100" so find the value 
End sub 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-04-15T11:15:42.430

这是最简单的解决方案

```
...
        With ws
            .Range("A1:E1").AutoFilter Field:=2, Criteria1:="=4"
             LRfilt=.Range("A1", .Range("A1").End(xlDown)).End(xlDown).Row
             Debug.Print LRfilt
        End With
        ... 
```

# clojure - 附加到 Enlive 中的属性

> ID：12586849
> 
> 赞同：3
> 
> 时间：2012-09-25T16:06:06.260
> 
> 标签：clojure, enlive

是否可以使用 enlive 将值附加到属性？

例子：我有这个

```
<a href="/item/edit/">edit</a> 
```

并且想要这个

```
<a href="/item/edit/123">edit</a> 
```

我目前正在这样做：

```
(html/defsnippet foo "views/foo.html" [:#main]
  [ctxt]
  [:a] (html/set-attr :href (str "/item/edit/" (ctxt :id)))) 
```

但我不希望将 URL 嵌入到我的代码中，只需将 id 附加到现有 URL

```
(html/defsnippet foo "views/foo.html" [:#main]
  [ctxt]
  [:a@href] (html/append (ctxt :id))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T08:51:25.627

@ddk answer is spot on but you may prefer a more generic way to solve the problem

```
(defn update-attr [attr f & args]
    (fn [node]
      (apply update-in node [:attrs attr] f args)))) 
```

and then

```
(update-attr :href str "123") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T18:03:27.150

你总是可以`append-attr`像`set-attr`. 这是我的尝试

```
(defn append-attr
  [& kvs]
    (fn [node]
      (let [in-map (apply array-map kvs)
            old-attrs (:attrs node {})
            new-attrs (into {} (for [[k v] old-attrs] 
                                    [k (str v (get in-map k))]))]
        (assoc node :attrs new-attrs)))) 
```

当附加`"/bar"`到时`href`，它给出了以下关于 enlive 的表示`<a href="/foo">A link</a>`

```
((append-attr :href "/bar") 
  {:tag :a, :attrs {:href "/foo"}, :content "A link"})
;=> {:tag :a, :attrs {:href "/foo/bar"}, :content "A link"} 
```

# xquery - XQuery 中的“规范路径”函数？

> ID：12586850
> 
> 赞同：2
> 
> 时间：2012-09-25T16:06:16.050
> 
> 标签：xquery

是否有标准的 XQuery 函数将返回节点的“规范”路径？
我的意思是：

> /根/元素/子元素[0]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:35:01.750

从*XQuery 3.0 开始*，就有[`fn:path($node)`](http://www.w3.org/TR/xpath-functions-30/#func-path)了 , 正是这样做的。如果您的查询处理器不支持它，您也可以使用*FunctX*的[`functx:path-to-node-with-pos($node)`](http://www.xqueryfunctions.com/xq/functx_path-to-node-with-pos.html)，不幸的是它不能很好地与命名空间配合使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T16:12:57.670

是的，在使用 XQuery 的路径表达式的谓词中，您可以执行以下操作：

```
doc("books.xml")/bookstore/book[substring(title,1,5)='Harry'] 
```

希望有帮助！

# iphone - 在视图控制器中传输数据

> ID：12586851
> 
> 赞同：0
> 
> 时间：2012-09-25T16:06:20.173
> 
> 标签：iphone, objective-c, xcode, viewcontroller, data-transfer

我想将一些数据（例如整数）从 ViewController1 传输到 ViewController2。我该怎么做？换句话说，我如何能够从 ViewController2 中的 ViewController1 访问信息？请指定所有必需的代码。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:24:15.007

当您推送到第二个视图控制器时，您将使用一些类似这样的代码......

```
MyViewController *vc2 = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];

[self.navigationController pushViewController:vc2]; 
```

为了将信息传递给它，您需要在 MyViewController.h 文件中设置一个属性，如下所示...

```
@property NSString *someNameProperty; 
```

然后当你推动这样做......

```
MyViewController *vc2 = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];

vc2.someNameProperty = @"This is being passed to view controller 2";

[self.navigationController pushViewController:vc2]; 
```

然后在 vc2 中，您可以访问相同的属性`self.someNameProperty`，它将包含您从 vc1 传入的值。

希望这可以帮助。

# java - 静态“DELETE”对象的目的是什么？

> ID：12586855
> 
> 赞同：3
> 
> 时间：2012-09-25T16:06:29.987
> 
> 标签：java, android

在 Android 类[SparseArray](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/util/SparseArray.java/)中，一个静态的 final 变量`DELETED`被定义为一个简单的`Object`. 稍后在类中，它的引用用作添加到容器中的已删除实体的标识符。为什么被删除的实体不只是被清空？区分空槽和已删除槽的目的是什么？

注意：直接询问 SparseArray 类时，问题是一般性的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:14:00.813

这是因为`null`是一个有效值存储在数组中，所以你需要能够区分`null`和`DELETED`。

作为为什么需要区分它们的示例，请考虑`get(key, default)`：

```
 @SuppressWarnings("unchecked")
 public E get(int key, E valueIfKeyNotFound) {
     int i = binarySearch(mKeys, 0, mSize, key);

     if (i < 0 || mValues[i] == DELETED) {
         return valueIfKeyNotFound;
     } else {
         return (E) mValues[i];
     }
 } 
```

现在，如果您执行以下操作：

```
array.put(1, null);
array.get(1, someDefault); 
```

你会（正确地）得到`null`.

如果你用 替换`DELETED`，`null`你会得到`someDefault`。

# c# - ASP.Net C# 网格视图

> ID：12586857
> 
> 赞同：3
> 
> 时间：2012-09-25T16:06:37.557
> 
> 标签：c#, asp.net

我有一个gridview，里面有一个链接按钮`<HeaderTemplate>`。单击此按钮有一个事件处理程序。现在，如果我在每个事件上将数据绑定到 gridview `Page_Load`，那么这个事件就会触发。但是如果我将数据绑定到里面的gridview `if (Page.IsPostBack == false)`，那么这个事件就不会触发。

是不是在页面加载后它意识到gridview中没有数据，因此忽略了从网格生成的事件？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:23:43.517

的`LinkButton` [行为就像一个`Button`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)

> LinkBut​​ton 控件具有与 HyperLink 控件相同的外观，但具有与 Button 控件相同的功能。

这意味着它在单击时会触发回发。因此，触发 click 事件的唯一方法是连接处理程序 if `Page.Postback=true`。（请记住，由于 HTTP 是无状态的，如果您在初始页面加载时连接事件处理程序，它不会在回发时“记住”。）

# ios - 使用“悬空 UIViews”调试 iOS 应用程序的好策略是什么？

> ID：12586864
> 
> 赞同：2
> 
> 时间：2012-09-25T16:06:50.897
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller

我最近继承了一个相对较小的 iOS 应用程序的维护。该应用程序是由外部承包商创建的，几乎没有指导和监督。不用说它需要“一点”清洁——我正在评估是否重做整个事情。

让我难过的一件事是应用程序崩溃，调试器显示“应用程序在应用程序启动结束时应该有一个根视图控制器”。在发生这种情况的模块中，我研究了所有 UIView 以确保它们是使用父级创建的（addSubView 设置根视图控制器，对吗？） - 这看起来很简单和正确。

作为 XCode 的新手，我不熟悉可以帮助我弄清楚这里可能发生什么的设施。例如，如何快速查看/调查模块创建的所有 UIView 的状态？我怎样才能“观察”一个变量，以便在它发生变化时得到提醒？总的来说，有没有一种最佳策略可以用来解决我上面描述的问题？

抱歉有点含糊，但我不认为发布一堆丑陋的代码可以帮助您更好地理解问题:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:08:58.047

`rootViewController`当应用程序的 UIWindow在完成启动时其属性没有值时，就会发生该特定问题。查看您的应用程序委托文件 - 通常，根视图控制器设置在那里的窗口上。

关于您更一般的问题：有多种方法可以在程序运行时检查程序的状态。转储一些信息的一个非常基本的方法是使用`NSLog`语句 - 您可以像 C 一样将消息打印到控制台`printf`。您还可以在应用程序中设置断点并使用调试器检查不同的变量 - 查看 lldb 文档以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:10:10.233

你是否有“悬空”的 UIViews 与有没有根视图控制器没有太大关系。

相反，您应该确保您的应用程序在您的应用程序委托方法的末尾[`UIWindow`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html)有一个。`rootViewController``appDidFinishLaunching`

# iphone - iOS - 如何将 UIImage 和 UILabel 作为页脚放在同一行？

> ID：12586866
> 
> 赞同：0
> 
> 时间：2012-09-25T16:06:55.820
> 
> 标签：iphone, ios, uiview, uiimage, uilabel

我需要在我的视图中有一个页脚，上面写着“由：{image_logo_of_my_company} 提供支持”我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:10:25.643

制作一个类型的包装视图，并在该视图内的适当坐标处`UIView`添加 a`UILabel`和徽标。`UIImageView`

```
UIView *wrapper = [[UIView alloc] initWithFrame:footerFrame]; 
UILabel *label = [[UILabel alloc] initWithFrame:
   CGRectMake(0, 0, footerFrame.size.width*0.6, footerFrame.size.height)];
UIImageView *imageView = [[UIImageView alloc] initWithFrame:
   CGRectMake(footerFrame.size.width*0.6, 0, 
   footerFrame.size.width*(1.0-0.6), footerFrame.size.height)];
[wrapper addSubView:label];
[wrapper addSubView:imageView];
label.text = @"Powered by: ";
imageView.image = [UIImage imageNamed:@"logo"]; // assumes logo.png & logo@2x.png
[viewNeedingFooter addSubView:wrapper]; 
```

假设标签需要页脚宽度的 60%，徽标需要 40%。

# jquery - 如何使用 JQuery、Javascript cookie？

> ID：12586867
> 
> 赞同：1
> 
> 时间：2012-09-25T16:07:00.540
> 
> 标签：jquery

我目前正在创建一个简单的待办事项列表，如果有人可以帮助我处理 cookie，我将不胜感激 :)

我有 2 个函数来设置和获取 cookie：

```
function setCookie(key, value) {
   var expires = new Date();
   expires.setTime(expires.getTime() + 31536000000); 
   document.cookie = key + '=' + value + ';expires=' + expires.toUTCString();
}

function getCookie(key) {
   var keyValue = document.cookie.match('(^|;) ?' + key + '=([^;]*)(;|$)');
   return keyValue ? keyValue[2] : null;
} 
```

有一个按钮（带有 id #add_todo ）可以将任务添加到待办事项列表中（带有类 .todo_list）。我将文本输入 $('#todo_description').val() 的值设置为 cookie。

```
$(document).ready( function() {  
$('#add_todo').click( function() {

    setCookie('test', $('#todo_description').val()); 
    var todoDescription = $('#todo_description').val();

    $('.todo_list').prepend(
        div class="todo"
            +checkbox              //I avoided html brackets here
            + getCookie('test')
            +delete_button
            /div
        );
}); 
```

一切正常，但是当我重新加载网页时，我之前添加的任务没有显示，我知道我做错了。我想存储包含 todoDescription、复选框、删除按钮和样式的整个 div (class="todo")。我试图将任务存储在数组中，但无法一一检索其元素..提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:21:50.947

尝试将整个标记块存储到 cookie 中可能不是一个好主意。Cookie 更适合存储小段数据。

> 我试图将任务存储在数组中，但无法一一检索其元素

是什么阻止您遍历数组？

无论如何，这里可能存在一个基本的设计缺陷，即您不应该尝试将大量数据存储到 cookie 中。Cookie 只能保存几千字节的数据。考虑将实际数据存储在另一个容量更大的存储中。这是做网站的吗？如果有后端，那么它应该存储在后端的数据库中，cookie数据只是用于验证和区分用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:10:05.080

最简单的答案是使用[像 Hartl 先生的 jQuery cookie 这样的插件](https://github.com/carhartl/jquery-cookie)（我经常使用这个）。

```
<script src="jquery.cookies.js"></script>
<script>
   // of course, you no longer need these functions, but just plugging this into your example...

   function setCookie(key, val) {
      var expires = new Date().getTime() + 31536000000;
      $.cookie( key, val, { expires: expires, path: '/' } );
   }

   function getCookie(key) {
      return $.cookie(key);
   }
</script> 
```

如果您需要重新发明千篇一律，您可能想在您的问题中解释这一点。

# c# - C#更改设置文件名

> ID：12586870
> 
> 赞同：3
> 
> 时间：2012-09-25T16:07:10.810
> 
> 标签：c#, properties, settings

在 C# 中，是否可以更改设置文件的“默认”名称而无需创建其他设置文件？例如，而不是使用：

```
Properties.Settings.Default.Setting1 
```

我想使用：

`Properties.Settings.Group1.Setting1`和`Properties.Settings.Group2.Setting2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:14:23.427

请记住，这`Settings`是一个部分类。`partial class Settings`您可以使用自己的属性编写 a 。在我看来，这正是它是部分课程的原因。

我不建议更改*默认* `Default`属性。但是，您可以编写以下内容：

```
public partial class Settings {

   // provide custom Groups, etc.
   public void Group1 {
      // some specific collection or object
      return Group1.Settings
   }

   public void Group2 {
      // some specific collection or object
      return Group2.Settings
   }
} 
```

...在哪里`Group1`并`Group2`表示自定义类。每个`Group`对象都可以有自己的方法来保存数据、设置、配置等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:09:23.810

更新设置时，添加此代码以保留

```
Properties.Settings.OtherName.Setting1 = ...;
Properties.Settings.OtherName.Save(); 
```

# xaml - XAML/WinRT 中是否有 CommandParameter？

> ID：12586872
> 
> 赞同：0
> 
> 时间：2012-09-25T16:07:26.123
> 
> 标签：xaml, windows-8, icommand

可以将 CommandParameter 传递给 WinRT 中的命令吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:58:30.480

是和不是。WinRT 应用程序可以通过[Application.OnLaunched](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.onlaunched.aspx)覆盖接收参数。

覆盖接收包含参数的[LaunchActivatedEventArgs类型的实例。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.activation.launchactivatedeventargs.aspx)

所以*有*可能接收参数，问题更多的是如何传递它们。

无法从命令行启动 Windows 应用商店 (WinRT) 应用程序。如果 WinRT 应用程序与文件类型相关联，则可以通过对文件调用 ShellExecute 来启动它。除此之外，无法直接启动应用程序。

可以使用 IAplicationActivationManager 接口编写启动 WinRT 应用程序的 C++，并且该接口可以将参数传递给启动的应用程序。因此，您可以创建一个可以从命令行调用的 C++ 启动器可执行文件。

有关如何使用此界面启动应用程序的更多信息，请参阅以下论坛帖子：

[http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/a4d2fca1-4034-4cc7-a86a-6242ce1a8b16](http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/a4d2fca1-4034-4cc7-a86a-6242ce1a8b16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:03:27.067

实际上，我可能完全误解了你的问题。如果您正在谈论 UI 命令（实现 ICommand 接口的命令），您可以在调用[Execute](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.icommand.execute.aspx)时传递参数。[您还可以通过调用CanExecute](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.icommand.canexecute.aspx)在执行命令之前测试命令和参数是否有效。

至于将参数作为 Button 绑定的一部分传递，请将[Command](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.buttonbase.command.aspx)属性设置为您希望按钮执行的命令，并将[CommandParameter](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.buttonbase.commandparameter.aspx)属性设置为您要传递的参数。

# ios - WebView 没有出现在 Xcode 4.5 的文件模板库中？

> ID：12586877
> 
> 赞同：1
> 
> 时间：2012-09-25T16:07:44.807
> 
> 标签：ios, iphone, xcode, xcode4.5

我正在使用 Xcode 4.5，并尝试将 UIWebView 添加到主故事板。文件模板库中没有要使用的 WebView 对象。有什么建议么？

# java - FileOpenService 抛出 NoClassDefFoundError

> ID：12586880
> 
> 赞同：1
> 
> 时间：2012-09-25T16:07:59.633
> 
> 标签：java, runtime-error, noclassdeffounderror, jnlp, java-web-start

下面的 Java 代码正在抛出`NoClassDefFoundError`：

```
 FileOpenService fos = (FileOpenService)
        ServiceManager.lookup("javax.jnlp.FileOpenService"); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:17:05.720

JNLP API 类只能在使用 Java Web Start 启动的小程序和应用程序中使用。即使它们被显式添加到非 JWS 应用程序的运行时类路径中，它们也将不可用于加载。

# types - 用于 Longs 的 Clojure 重载方法解析

> ID：12586881
> 
> 赞同：8
> 
> 时间：2012-09-25T16:08:00.273
> 
> 标签：types, clojure

这种行为对我来说毫无意义：

```
user=> (type 1)
java.lang.Long
user=> (type (cast Long 1))
java.lang.Long
user=> (type 1)
java.lang.Long
user=> (type (Long. 1))
java.lang.Long
user=> (type (cast Long 1))
java.lang.Long
user=> (BigDecimal. 1)
1M
user=> (BigDecimal. (Long. 1))
CompilerException java.lang.IllegalArgumentException: More than one matching method found: java.math.BigDecimal, compiling:(NO_SOURCE_PATH:22) 
user=> (BigDecimal. (cast Long 1))
1M 
```

为什么该`(BigDecimal. (Long. 1))`案例无法找到明确的匹配方法签名，而其他两个表达式（具有完全相同的参数类型）却成功了？

* * *

# *更新：*

我发现这种行为*更*奇怪的是，它似乎特定于该`Long`类型：

```
user=> (BigDecimal. (Long. 1))
CompilerException java.lang.IllegalArgumentException: More than one matching method found: java.math.BigDecimal, compiling:(NO_SOURCE_PATH:1) 
user=> (BigDecimal. (Integer. 1))
1M 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T19:00:13.050

从[Clojure 讨论组的这个讨论中，](https://groups.google.com/forum/#!msg/clojure/7-hARL5c1lI/ntnnOweEGfUJ)您似乎遇到了 Rich Hickey 做出的设计决策。具体来说，因为 BigDecimal 没有签名的构造函数`BigDecimal(Long long)` **（编辑：**因此让编译器不得不在`int`和`long`构造函数之间进行选择 - 请参阅下面的评论以讨论为什么 using`Integer`有效），编译器不会尝试“猜测”哪个构造函数你的意思是，并且明确地失败了。

> 底线是 Java 端的特定类型要求需要显式装箱才能获得正确且不易碎的代码。- 丰富的希基

请注意，根据[本文档](http://dev.clojure.org/display/doc/Documentation+for+1.3+Numerics)，文字被解析为原语，而不是“盒装”类型：

> 与以前的 Clojure 版本相比，数字文字被解析为原始的 long 或 double。

要了解其他操作为何起作用，您必须深入研究 Clojure 源代码，特别是`Compiler.java`它的内部类[`NumberExpr`](https://github.com/clojure/clojure/blob/clojure-1.4.0/src/jvm/clojure/lang/Compiler.java#L1728)。这就是你的文字被自动装箱到 a`Long`并且编译器依次调用没有问题的地方`Object.getClass()`（两者都`type`这样`class`做）。

在 中[`Compiler.getMatchingParams()`](https://github.com/clojure/clojure/blob/clojure-1.4.0/src/jvm/clojure/lang/Compiler.java#L2309)，Clojure 编译器尝试解析`BigDecimal`要使用的构造函数。但是，您已明确指定您的参数具有该类型`Long`- BigDecimal 没有采用该类型的构造函数。

也许这不是“常识”，但 Rich Hickey 做出了这样的决定：您需要准确了解参数的类型，并且它们必须与 Java 类的类型相匹配。编译器拒绝猜测您的意图。

请注意以下事项：

```
user=> (new BigDecimal 1M)
Reflection warning, NO_SOURCE_PATH:33 - call to java.math.BigDecimal ctor can't be resolved.
IllegalArgumentException No matching ctor found for class java.math.BigDecimal  clojure.lang.Reflector.invokeConstructor (Reflector.java:183) 
```

另请注意，此 Java 代码有效并解析`int`为 BigDecimal 的构造函数：

```
 byte b = 1;
    new BigDecimal(new Byte(b)); 
```

但是这段代码也失败了（即使它“应该”使用`int`构造函数）：

```
user=> (BigDecimal. (Byte. (byte 1)))
Reflection warning, NO_SOURCE_PATH:37 - call to java.math.BigDecimal ctor can't be resolved.
IllegalArgumentException No matching ctor found for class java.math.BigDecimal  clojure.lang.Reflector.invokeConstructor (Reflector.java:183) 
```

tl;dr：Clojure 支持 Java*互操作*，但这并不意味着它必须遵循 Java 语言规范的推广规则。

**怎么样`cast`？**

下面的评论询问`(cast)`. 在这种情况下，您明确告诉 Clojure 编译器将类型解析委托给 JVM。请注意以下（无意义的）代码编译，但在运行时失败：

```
user=> (set! *warn-on-reflection* true)
true
user=> (defn make-big-dec [obj] (BigDecimal. (cast Math obj)))
Reflection warning, NO_SOURCE_PATH:7 - call to java.math.BigDecimal ctor can't be resolved.
#'user/make-big-dec
user=> (make-big-dec 1)
ClassCastException   java.lang.Class.cast (Class.java:2990) 
```

**结语二**

在 Clojure 社区中，关于这个主题的讨论相当多。请查看这些详细的线程：

[增强的原始支持](https://groups.google.com/forum/?fromgroups=#!topic/clojure/yMhQWVyRzBE)（Rich Hickey）

[Clojure 1.3 处理整数和长整数](https://groups.google.com/forum/#!msg/clojure/7-hARL5c1lI/hJyJRbRV70oJ)(Nathan Marz)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:06:47.527

BigDecimal 没有 Long 的构造函数，

BigDecimal(BigInteger val)

```
core> (BigDecimal. (BigInteger/ONE))
1M 
```

BigDecimal(BigInteger unscaledVal, int scale)

```
core> (BigDecimal. BigInteger/ONE 1)
0.1M 
```

BigDecimal（双值）

```
core> (BigDecimal. (double 1))
1M
core> (BigDecimal. (float 1))
1M
(BigDecimal. Double/MIN_VALUE) 
```

BigDecimal（字符串值）

```
core> (BigDecimal. "1")
1M 
```

目前还不清楚这些`(Long. 1)`匹配中的哪一个。该`clojure.core.bigdec`函数通过将输入传递`BigDec/valueOf`给创建 BigDecimal来处理此输入

```
core>  (bigdec (Long. 1))
1M 
```

使用此调用：

```
(BigDecimal/valueOf (long x)) 
```

# jquery - 预加载 AJAX Fancybox 请求中的所有图像

> ID：12586885
> 
> 赞同：0
> 
> 时间：2012-09-25T16:08:26.237
> 
> 标签：jquery, fancybox

我有一个链接可以触发 AJAX 调用以显示在 Fancybox 中。要显示的页面包含图像。我希望 Fancybox 在加载所有图像而不显示 Fancybox 时等待（微调器）。

有没有办法做到这一点？

发出 AJAX 请求的页面无权访问图像的 URL。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:11:43.020

您基本上需要在fancybox 中加载某种带有微调器图像的div。

然后使用`.load(url, callback() { });`, 并在回调函数中，在内容完成加载后隐藏正在加载的 div。

```
$('#fancyWindow').load('whatever.html', function () {
    $('#loadingSpinner').hide();
}); 
```

# php - php2connect，加密和解决方法

> ID：12586886
> 
> 赞同：0
> 
> 时间：2012-09-25T16:08:27.720
> 
> 标签：php

我已经使用过这个脚本，但它不再适合我了。我必须访问 mysite.com/serv.php 才能调用该脚本。所以，首先是脚本：

```
$ip = "ip";
$user = "user";
$pass = "password";

if (!function_exists("ssh2_connect")) die("function ssh2_connect doesn't exist");

if(!($con = ssh2_connect($ip, 22))){
    echo "<font color='red'>fail: unable to establish connection</font>\n";
} else {   

    if(!ssh2_auth_password($con, $user, $pass)) {
        echo "fail: unable to authenticate";
    } else {
        echo "Sucessful";
        if (!($stream = ssh2_exec($con, "/home/boza/serv.sh" ))) {
            echo "fail: unable to execute command";
        } else {
            stream_set_blocking($stream, true);
            $data = "";
            while ($buf = fread($stream,4096)) {
                $data .= $buf;
            }
            fclose($stream);
        }
    }
} 
```

该脚本运行良好，但我想对其进行一些更改。1\. 我想在其中添加 md5 哈希，以使其更安全 2\. 我希望在访问 serv.php 时不执行脚本，而是通过按按钮进行 ajax 调用。3\. 我希望有用户反馈，比如“成功”或“失败”……就像我现在所做的那样，使用 live ajax 或其他没有刷新站点的东西。

我用谷歌搜索并尝试将 md5('xxxx') 放入脚本中，但我遇到了一个奇怪的错误，我确定我做错了什么。

有人可以帮我处理这个案子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:13:53.753

`MD5`是一种单向哈希，它无法保护您的连接。它也很弱，没有以前那么强。我不会推荐它用于任何级别的安全性

你应该看的是 `authenticating with public key authentication`看这个

[示例源](http://php.net/manual/en/function.ssh2-connect.php#104758)

```
class NiceSSH { 
    // SSH Host 
    private $ssh_host = 'myserver.example.com'; 
    // SSH Port 
    private $ssh_port = 22; 
    // SSH Server Fingerprint 
    private $ssh_server_fp = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'; 
    // SSH Username 
    private $ssh_auth_user = 'username'; 
    // SSH Public Key File 
    private $ssh_auth_pub = '/home/username/.ssh/id_rsa.pub'; 
    // SSH Private Key File 
    private $ssh_auth_priv = '/home/username/.ssh/id_rsa'; 
    // SSH Private Key Passphrase (null == no passphrase) 
    private $ssh_auth_pass; 
    // SSH Connection 
    private $connection; 

    public function connect() { 
        if (!($this->connection = ssh2_connect($this->ssh_host, $this->ssh_port))) { 
            throw new Exception('Cannot connect to server'); 
        } 
        $fingerprint = ssh2_fingerprint($this->connection, SSH2_FINGERPRINT_MD5 | SSH2_FINGERPRINT_HEX); 
        if (strcmp($this->ssh_server_fp, $fingerprint) !== 0) { 
            throw new Exception('Unable to verify server identity!'); 
        } 
        if (!ssh2_auth_pubkey_file($this->connection, $this->ssh_auth_user, $this->ssh_auth_pub, $this->ssh_auth_priv, $this->ssh_auth_pass)) { 
            throw new Exception('Autentication rejected by server'); 
        } 
    } 
    public function exec($cmd) { 
        if (!($stream = ssh2_exec($this->connection, $cmd))) { 
            throw new Exception('SSH command failed'); 
        } 
        stream_set_blocking($stream, true); 
        $data = ""; 
        while ($buf = fread($stream, 4096)) { 
            $data .= $buf; 
        } 
        fclose($stream); 
        return $data; 
    } 
    public function disconnect() { 
        $this->exec('echo "EXITING" && exit;'); 
        $this->connection = null; 
    } 
    public function __destruct() { 
        $this->disconnect(); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:18:51.863

您只能在按下以下按钮时使用表单来启动脚本：

```
$ip = "ip";
$user = "user";
$pass = "password";

if (!function_exists("ssh2_connect")) die("function ssh2_connect doesn't exist");
echo '<form action="#" method="POST">';
echo '<input type="submit" name="launch" value="1" />'
echo '</form>';

if($_POST['launch']==1){
    if(!($con = ssh2_connect($ip, 22))){
        echo "<font color='red'>fail: unable to establish connection</font>\n";
    } else {   

        if(!ssh2_auth_password($con, $user, $pass)) {
            echo "fail: unable to authenticate";
        } else {
            echo "Sucessful";
            if (!($stream = ssh2_exec($con, "/home/boza/serv.sh" ))) {
                echo "fail: unable to execute command";
            } else {
                stream_set_blocking($stream, true);
                $data = "";
                while ($buf = fread($stream,4096)) {
                    $data .= $buf;
                }
                fclose($stream);
            }
        }
    }
} 
```

对于密码，您可以使用“baba”类，或者如果它只是源读取的问题，您可以使用简单的可逆加密功能，如 XOR 加密，请注意，这只是使密码不能直接从源代码中读取，但它不是完美的证券化

例子 ：

```
 function XORin($key='asimpletext', $text='pwd'){
     for($i=0;$i<strlen($text);$i++)
     {
         for($j=0;$j<strlen($key);$j++,$i++)
         {
             $outText .= $text{$i} ^ $key{$j};
         }
     }
     return $outText;
 }

 function XORout($key='asimpletext', $text='pwd'){(){
     for($i=0;$i<strlen($text);$i++)
     {
         for($j=0;$j<strlen($key);$j++,$i++)
         {
             $outText .= $key{$j} ^ $text{$i};
         }
     }
     return $outText;
 } 
```

# iphone - 如何自定义导航栏的颜色？

> ID：12586888
> 
> 赞同：0
> 
> 时间：2012-09-25T16:08:29.680
> 
> 标签：iphone, xcode, xcode4, xcode4.3, ios5.1

我是 iOS 开发的新手，正在使用 Xcode 4.3.2 for iOS5 构建我的第一个应用程序。我也在使用故事板。

我希望我的导航栏的背景颜色为黑色，而不是故事板中所有视图的默认蓝色。我到处研究过，找不到任何有用的东西。代码要么生成错误消息，要么不清楚（对我来说）将它放在哪里。谁能帮忙？！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:13:45.570

你有没有尝试过...

```
UIImage *image = [UIImage imageNamed:@"navBarImg.png"];
[self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

另请查看此[链接](http://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIAppearance)以获取与您的问题相关的更多信息。

# php - 使用“values”语句更新 MySQL 行

> ID：12586891
> 
> 赞同：1
> 
> 时间：2012-09-25T16:08:34.783
> 
> 标签：php, mysql, sql-update

问题是我有一些动态列，我总是使用相同的 php ajax 页面。所以我从另一页得到一些逗号分隔的字符串。一个是列，另一个是表，另一个是数据。在插入中没有问题，因为我这样做：

```
$query =  'INSERT INTO '.$_GET["table"].' ('.$_GET["columns"].') VALUES('.$_GET["data"].')';
mysql_query($query, $link); 
```

这转变为：

```
INSERT sys_users_cfg (usr,pwd,permission_id,image) VALUES ('pepwe2','1234','1','') 
```

我需要以同样的方式进行更新。带有 VALUES 语句。像：

```
UPDATE sys_users_cfg (usr,pwd,permission_id,image) VALUES ('pepwe2','1234','1','') WHERE usr_id = 33 
```

那不起作用。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:10:13.157

如果您使用主键进行更新，请改用 REPLACE INTO 语法，例如

`REPLACE INTO sys_users_cfg (usr_id,usr,pwd,permission_id,image) VALUES (33,'pepwe2','1234','1','')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:10:24.707

MySQL 更新采用不同的格式，请参阅[http://www.tizag.com/mysqlTutorial/mysqlupdate.php](http://www.tizag.com/mysqlTutorial/mysqlupdate.php)

```
UPDATE table SET column = 'value', column2 = 'value2' WHERE id = ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:10:52.623

这是您更新行的方式：

```
UPDATE sys_users_cfg SET usr = 'pepwe2', pwd = '1234', permission_id = 1, image = '' WHERE usr_id = 33 
```

您可以阅读[http://dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:13:14.417

```
 $values = explode(',', $_GET['data']);
 $query = "UPDATE sys_users_cfg SET usr = '$values[0]', pwd = '$values[1]', permission_id = '$values[2]', image = '' WHERE usr_id = '33'"; 
```

# ios - 在 MkMapView 上添加 AwesomeMenu

> ID：12586893
> 
> 赞同：0
> 
> 时间：2012-09-25T16:08:40.433
> 
> 标签：ios, mkmapview, mapkit, subview, addsubview

我目前正在尝试在 MapView 之上添加 AwesomeMenu。mapview 通过 Storyboard 加载，并且 AwesomeMenu 在视图控制器的“viewDidLoad”方法中创建，然后添加为子视图。这样 AwesomeMenu 不会显示在视图上，向 MKMapView 添加子视图是否有特殊问题？有什么线索吗？

```
-(void)viewDidLoad
{
    CLLocation *turin = [[CLLocation alloc] initWithLatitude:45.071274 longitude:7.684910];
    MKCoordinateRegion region =
    MKCoordinateRegionMakeWithDistance (
                                    turin.coordinate, 1000, 1000);
    [mapView setRegion:region animated:NO];
    [switcher addTarget:self action:@selector(populateMap:) forControlEvents:UIControlEventValueChanged];
    menu = [[AwesomeMenu alloc] initWithFrame:self.mapView.frame
                                                 menus:nil];
    [self.mapView addSubview:menu];
} 
```

提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:36:49.343

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIImage *storyMenuItemImage = [UIImage imageNamed:@"bg-menuitem.png"];
    UIImage *storyMenuItemImagePressed = [UIImage imageNamed:@"bg-menuitem-highlighted.png"];
    UIImage *starImage = [UIImage imageNamed:@"icon-star.png"];

    AwesomeMenuItem *starMenuItem1 = [[AwesomeMenuItem alloc] initWithImage:storyMenuItemImage
                                                           highlightedImage:storyMenuItemImagePressed
                                                               ContentImage:starImage
                                                    highlightedContentImage:nil];

    NSArray *menuOptions = [NSArray arrayWithObjects:starMenuItem1 , nil];
    AwesomeMenu *menu = [[AwesomeMenu alloc] initWithFrame:self.view.frame
                                                     menus: menuOptions];

    [self.view addSubview:menu];
} 
```

# java - 如何从thread1等待直到thread2通知

> ID：12586897
> 
> 赞同：5
> 
> 时间：2012-09-25T16:08:56.793
> 
> 标签：java, multithreading, concurrency

我是多线程的新手，当我阅读有关多线程的内容时，想到编写这个花哨的多线程代码来执行以下操作。

我的计数器类如下。

```
class Counter {
  private int c = 0;

  public void increment() {
    System.out.println("increment value: "+c);
      c++;
  }

  public void decrement() {
      c--;
      System.out.println("decrement value: "+c);
  }

  public int value() {
      return c;
  }

} 
```

此 Counter 对象在两个线程之间共享。启动线程后，我需要执行以下操作。我希望 Thread2 等到 Thread1 将 Counter 对象的计数增加 1。完成后，线程 1 通知 thread2，然后 Thread1 开始等待 thread2 将值减 1。然后 thread2 启动并将值减 1 和再次通知thread1，然后thread2开始等待thread1。重复这个过程几次。

我怎样才能做到这一点。提前谢谢了。

我做了以下事情。

```
public class ConcurrencyExample {

  private static Counter counter;
  private static DecrementCount t1;
  private static IncrementCount t2;

  public static void main(String[] args) {
    Counter counter = new Counter();
    Thread t1 = new Thread(new IncrementCount(counter));
    t1.start();

    Thread t2 = new Thread(new DecrementCount(counter));
    t2.start();

  }

}

public class DecrementCount implements Runnable {

  private static Counter counter;

  public DecrementCount(Counter counter) {
    this.counter = counter;
  }

  @Override
  public void run() {
    for (int i = 0; i < 1000; i++) {
      counter.decrement();     
      System.out.println("decreamented");
    }
  }

}

public class IncrementCount implements Runnable {

  private static Counter counter;

  public IncrementCount(Counter counter) {
    this.counter = counter;
  }

  @Override
  public void run() {
    for (int i = 0; i < 1000; i++) {
      counter.increment();
      System.out.println("Incremented");
    }

  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:16:07.107

退房[`Semaphore`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)。您需要两个，每个线程一个：`incSemaphore`和`decSemaphore`. 在`DecrementCount`做：

```
for (int i = 0; i < 1000; i++) {
  decSemaphore.acquire();
  counter.decrement();     
  System.out.println("decreamented");
  incSemaphore.release();
} 
```

`IncrementCount`对称实施。的初始值`incSemaphore`应该是`1`和`0`for `decSemaphore`。

顺便说一句，您`Counter`也需要同步（请参阅`synchronized`关键字 and `AtomicInteger`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:12:44.013

使用带有布尔标志的[条件。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)

```
final Lock lock = new ReentrantLock();
final Condition incremented= lock.newCondition(); 
final Condition decremented= lock.newCondition(); 
```

将您的计数器更改为以下

**解释 ：**

我们使用了两个条件，一个是递增的，一个是递减的。基于布尔标志，我们检查是否必须等待一个条件。

```
 class Counter {
private int c = 0;
boolean increment = false;

final Lock lock = new ReentrantLock();
final Condition incremented = lock.newCondition();
final Condition decremented = lock.newCondition();

public void increment() throws InterruptedException {
    Lock lock = this.lock;
    lock.lock();
    try {
        while(increment)
            decremented.await();
        increment = true;           
        c++;
        System.out.println("increment value: " + c);
        incremented.signal();
    } finally {
        lock.unlock();
    }

}

public void decrement() throws InterruptedException {

    Lock lock = this.lock;
    lock.lock();
    try {
        while (!increment)
            incremented.await();
        c--;
        System.out.println("decrement value: " + c);
        increment = false;
        decremented.signal();
    } finally {
        lock.unlock();
    }
}

public int value() {
    Lock lock = this.lock;
    lock.lock();
    try {
        return c;
    } finally {
        lock.unlock();
    }
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:17:00.350

同步器使线程能够相互等待。请参阅[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)和[Semaphore](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)。

[请参阅 java.util.concurrent 包中的同步器部分](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:24:12.723

**-**首先你必须使用关键字`increment()`来避免竞争条件参见这个**布赖恩的规则**`decrement()``synchronized`

 **`When we write a variable which has just been read by another thread, or reading a variable which is just lately written by another thread, must be using Synchronization. And those atomic statements/Methods accessing the fields' data must be also synchronized.`

**-**它`JVM Thread Scheduler`可以控制哪个线程将进入运行状态，它会在那里停留多长时间，以及它在工作完成后会去哪里。

**-**其中一个`Cannot be sure`线程将首先运行.....

**-**您也可以使用`SingleThreadExecutor`from `java.util.concurrent`，这将完成一项任务，然后再进行第二项任务。**

# javascript - Backbone.js 和 XSS/HTML 转义

> ID：12586899
> 
> 赞同：25
> 
> 时间：2012-09-25T16:09:04.377
> 
> 标签：javascript, backbone.js, escaping, xss

我正在构建一个 Backbone.js 应用程序，并且想知道在使用 Backbone.js 时处理 XSS 和 HTML 转义的最佳方法是什么。

在来自官方 Backbone.js 文档的基本[Todos 示例应用程序](http://backbonejs.org/examples/todos/index.html)中，数据没有转义。由于此数据在模板中用于呈现待办事项条目，**因此可以**通过输入以下文本来执行 Javascript 代码（可以在上面的链接中复制）：

```
"><script>alert('xss');</script> 
```

当使用 REST 服务器作为存储后端时，这个 XSS 对每个用户都是持久的。

你怎么解决这个问题？

我的想法是转义服务器上的数据，因此返回的数据可以安全地在模板中使用。那么我是否必须始终使用`wait: true`, 以确保没有呈现未转义的数据？对于编辑，添加另一个带有未转义数据的属性，然后可以使用它来填充文本字段`.val()`？

或者在渲染模板之前，您是否不执行这些操作并转义客户端上的数据？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-25T16:26:01.800

Todo 示例不是最简洁的示例。它使用[下划线的模板引擎](http://underscorejs.org/#template)，如下：

```
<input class="edit" type="text" value="<%= title %>" /> 
```

要正确转义 HTML，请使用`<%-`代替`<%=`：

```
<input class="edit" type="text" value="<%- title %>" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-02T03:31:09.897

骨干网的标准方法是使用`model.escape(attribute)`.

从骨干文档[backbonejs.org/#Model-escape](http://backbonejs.org/#Model-escape)：

“与 get 类似，但返回模型属性的 HTML 转义版本。如果要将模型中的数据插入 HTML，使用转义检索属性将防止 XSS 攻击。”

```
var hacker = new Backbone.Model({
    name: "<script>alert('xss')</script>"
});

alert(hacker.escape('name')); 
```

# asp.net-mvc - .net mvc 仅在具有值时才在视图中显示字段

> ID：12586909
> 
> 赞同：4
> 
> 时间：2012-09-25T16:09:52.467
> 
> 标签：asp.net-mvc

我有一些客户详细信息，我只想显示具有值的字段。

例如，如果 Telephone 为 null，则不显示它。

我目前在我的视图模型中

```
 public string FormattedTelephone
    {
        get { return string.IsNullOrEmpty(this.Telephone) ? " " : this.Telephone; }
    } 
```

在我看来

```
@Html.DisplayFor(model => model.FormattedTelephone) 
```

这工作正常，但是，如果字段具有值，我想显示字段名称，例如

**电话：** 02890777654

如果我`@Html.DisplayNameFor`在我的视图中使用它，即使该字段为空，它也会显示字段名称。

我还想以粗体设置字段名称的样式，并且不确定我在哪里设置样式 - 视图或视图模型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T19:14:57.543

对于粗体样式，您可以在视图中使用这段代码，但使用外部样式表当然是合适的。

```
<style type="text/css">
.telephone{
font-weight: bold;
}
</style> 
```

您可以在视图中检查 null 并有条件地显示数据：

```
 @if (Model.FomattedTelephone != null)
    {
       <div class="telephone">
          @Html.DisplayFor(model => model.FormattedTelephone)</div>
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:12:16.583

对于样式，您可以在字段名称周围添加一个类。

您可以创建自己的 HtmlHelper，它只会在字符串不为空或不为空时写入。

或者您可以在此处添加类似的 DisplayTemplates： [如何为 DisplayFor() 创建 MVC Razor 模板](https://stackoverflow.com/questions/5710140/how-do-i-create-a-mvc3-razor-template-for-displayfor)

有关 razor 助手的更多背景信息，请阅读以下 [http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor。 aspx](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)

如果它们在您的 App_Code 文件夹中，请阅读 [从 Razor 声明性视图中使用 MVC HtmlHelper 扩展](https://stackoverflow.com/questions/4710853/using-mvc-htmlhelper-extensions-from-razor-declarative-views)的答案 您可能希望使用此方法覆盖默认帮助器页面（并在 App_Code 中的帮助器类中继承）

```
public class WorkaroundHelperPage : HelperPage
    {
        // Workaround - exposes the MVC HtmlHelper instead of the normal helper
        public static new HtmlHelper Html
        {
            get { return ((WebViewPage)WebPageContext.Current.Page).Html; }
        }

        public static UrlHelper Url
        {
            get { return ((WebViewPage) WebPageContext.Current.Page).Url; }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T19:31:53.233

我会为此做一个助手，如下所示：

```
using System.Web.Mvc.Html;
public static class HtmlHelpers
{
    public static MvcHtmlString LabelDisplayFor<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression)
    {
        StringBuilder html = new StringBuilder();
        string disp = helper.DisplayFor(expression).ToString();
        if (!string.IsNullOrWhiteSpace(disp))
        {
            html.AppendLine(helper.DisplayNameFor(expression).ToString());
            html.AppendLine(disp);
        }
        return MvcHtmlString.Create(html.ToString());
    }
} 
```

现在，当您在视图中时，您可以简单地执行此操作（假设您在视图或 web.config 中包含命名空间）：

```
@Html.LabelDisplayFor(model => model.FormattedTelephone) 
```

它所做的只是检查您的显示助手是否不是空字符串，如果是，它将简单地附加您的 LabelFor 和 DisplayFor，如果不是，它将返回一个空字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-18T08:29:34.407

我通常更喜欢使用显示/编辑器模板而不是 HtmlHelper。这是我用来执行完全相同任务的模板，它专为引导数据列表而设计，但任何人都可以轻松调整它。

```
@if (Model == null)
{
    @ViewData.ModelMetadata.NullDisplayText
}
else if (ViewData.TemplateInfo.TemplateDepth > 1)
{
    @ViewData.ModelMetadata.SimpleDisplayText
}
else
{
    <dl class="dl-horizontal">
        @foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm => pm.ShowForDisplay && !ViewData.TemplateInfo.Visited(pm)))
        {
            if(MvcHtmlString.IsNullOrEmpty(Html.Display(prop.PropertyName)))
            {
                continue;
            }    

            if (prop.HideSurroundingHtml)
            {
                @Html.Display(prop.PropertyName)
            }
            else
            {
                <dt>@prop.GetDisplayName()</dt>
                <dd>@Html.Display(prop.PropertyName)</dd>
            }
        }
    </dl>
} 
```

关键线是：

```
if(MvcHtmlString.IsNullOrEmpty(Html.Display(prop.PropertyName))) 
```

它基于对象模板，因此要使用它，您需要在对象或整个模型上使用它

```
@Html.DisplayForModel("TemplateName") 
```

# javascript - 捕获对不存在函数的 ExternalInterface 调用

> ID：12586917
> 
> 赞同：1
> 
> 时间：2012-09-25T16:10:14.627
> 
> 标签：javascript, actionscript-3

我有大约 1000 个 SWF 文件，它们都通过`ExternalInterface`.

我无权访问这些文件的源文件，也无法编辑它们。

我的基本问题是它们都在调用不同的函数，并且 Flash AS3 脚本挂起，直到它得到函数的响应。

我希望做的是检测从 JavaScript 中的 SWF 文件调用的函数，然后动态创建函数，但是，为了做到这一点，我需要先检测被调用的函数。

有没有办法在 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:11:36.663

不，这在 JavaScript 中是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:06:29.417

1.  我不知道有多少变化，但是否可以在几个 swf 上使用反编译器来查看调用了哪些 ExternalInterface 调用？尝试在线反编译器[http://www.showmycode.com/](http://www.showmycode.com/)

2.  [您可以使用http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/UncaughtErrorEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/UncaughtErrorEvent.html)从 Flash 捕获未定义的错误`UncaughtErrorEvent`

3.  我不知道 javascript 是否会抛出错误？[您也可以使用https://developer.mozilla.org/en-US/docs/DOM/window.onerror](https://developer.mozilla.org/en-US/docs/DOM/window.onerror)从 javascript 中捕获错误`window.onerror`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T23:41:37.127

您能否解释一下您对 SWF 文件的控制程度以及您想要实现的具体目标是什么？

这些是 AS2 还是 AS3 吗？是否有加载这些 SWF 文件的主 SWF 文件？

我正在查看文档，似乎`ExternalInterface.marshallExceptions`与 结合使用`UnhandledErrorEvent`，您可能会从 Flash 端检测到不存在的函数调用。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#marshallExceptions](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#marshallExceptions)

# vba - 是否可以插入文本到列而不是替换数据？

> ID：12586918
> 
> 赞同：1
> 
> 时间：2012-09-25T16:10:18.270
> 
> 标签：vba, excel

那将如何运作？我不想使用向导，我想使用 VBA 来完成。

我有一列名字，名字，名字，中间名，姓氏，一些有后缀（Jr，Sr）一些名字有多个中间名（全名或首字母）一些确定的名字有2个部分（Van derlay，de Novo）。

在执行 txt-to-column 时，我需要的只是空间，但由于结果列的数量可以从 5 到 8 不等，我冒着删除与每个名称相关联的下一列中的数据的风​​险。

我已经将我的 Sub 设置为首先添加列，但我认为可能会有更优雅和/或更高效的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:22:53.937

在 VBA 中，最简单的解决方案是计算分隔符的数量（或列数），插入适当的列数，然后运行向导。

如果你计算空格，下面的代码会得到它的最大空格数：

```
Dim shtTemp As Worksheet, lMaxSpaces As Long

Set shtTemp = Sheets.Add
shtTemp.Cells(1, 1).FormulaArray = _
    "=MAX(LEN('Sheet1!R[1]C[1]:R[1000]C[1])-LEN(SUBSTITUTE('Sheet1!R[1]C[1]:R[1000]C[1],"" "","""")))"
lMaxSpaces = shtTemp.Cells(1, 1).Value

Application.DisplayAlerts = False
shtTemp.Delete
Application.DisplayAlerts = True 
```

不插入纸张的另一种选择是：

```
Dim vArr As Variant, lMaxSpaces As Long, lLoop As Long, lSpaces As Long

 vArr = Selection.Value

For lLoop = LBound(vArr, 1) To UBound(vArr, 1)
    lSpaces = Len(vArr(lLoop, 1)) - Len(Replace(vArr(lLoop, 1), " ", ""))
    If lSpaces > lMaxSpaces Then lMaxSpaces = lSpaces
Next

Debug.Print lMaxSpaces 
```

# php - 迁移后 PHP 会话不起作用

> ID：12586927
> 
> 赞同：0
> 
> 时间：2012-09-25T16:11:03.953
> 
> 标签：php, facebook, session, hosting, get-request

我有一个小的动态 facebook 标签，它使用 Facebook PHP SDK。它有一个 fangate 函数，脚本使用会话来存储 getRequest，因此 fangate 也适用于选项卡中的子页面。

它运行良好，但现在我们将脚本移动到其他使用 SSL 的托管服务器，看起来会话不再存储在新服务器上。

有谁知道问题出在哪里？

这是 index.php 脚本：

```
<?php
session_start();
require 'src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId' => '419696674760950',
  'secret' => 'THE SECRET',
));

$user = $facebook->getUser();

if ($user) {
  try {
    $likes = $facebook->api("/me/likes/145577828869070");
    if( !empty($likes['data']) )
        echo "I like!";
    else
        echo "not a fan!";
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(array(
    'scope' => 'user_likes'
  ));
}

$signed_request = $facebook->getSignedRequest();
$signedRequest = $facebook->getSignedRequest();
if(isset($signed_request)) $_SESSION['signedRequest'] = $signed_request;
else $signed_request = $_SESSION['signedRequest'];

$page_id = $signed_request["page"]["id"];
$page_admin = $signed_request["page"]["admin"];
$like_status = $signed_request["page"]["liked"];
$country = $signed_request["user"]["country"];
$locale = $signed_request["user"]["locale"];

include ("header.php");
if(!isset($_GET['page'])) $_GET['page']="";
switch($_GET['page']) {

case "1":
$_SESSION['signedRequest'];
// If a fan is on your page
if ($like_status) {
include('leftside.html'); include('informace.html');
} else {
// If a non-fan is on your page
include ("nonfan2.html");}
break;

case "2": include('reference.html'); break;
case "3": include('clanky.html'); ;break;

case "4":
$_SESSION['signedRequest'];
// If a fan is on your page
if ($like_status) {
include ("formular.html");
} else {
// If a non-fan is on your page
include ("nonfan.html");}
;break;

case "5": include('clanok1.html'); break;
case "6": include('clanok2.html'); break;
case "7": include('clanok3.html'); break;
case "8": include('clanok4.html'); break;

default:
$_SESSION['signedRequest'];
// If a fan is on your page
if ($like_status) {
include('leftside.html'); include('informace.html');
} else {
// If a non-fan is on your page
include ("nonfan2.html");}
}
include ("footer.html");
?> 
```

# ios - 强制固定 Web 应用程序以检索最新代码

> ID：12586928
> 
> 赞同：0
> 
> 时间：2012-09-25T16:11:06.273
> 
> 标签：ios, web-applications, jqmobi

我已经使用 jqmobile 构建了一个 Web 应用程序，它可以在浏览器中完美运行，但是当我固定到主屏幕时，它的行为会有所不同。

就好像它仍在使用旧版本的代码。我尝试关闭应用程序（双击主页并删除图标）然后从主页删除图标并重新添加它，但它表现出完全相同的行为。

有没有办法清除旧版本并强制它检索最新版本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:55:16.210

显然，外部代码库有 5 分钟左右的延迟，外部 css 的延迟时间更长。

# c# - Timer.Change() 会返回 false 吗？

> ID：12586932
> 
> 赞同：18
> 
> 时间：2012-09-25T16:11:37.243
> 
> 标签：c#, .net, multithreading, timer

.NET System.Threading Timer 类有几个重载的 Change() 方法，如果成功更新计时器，则返回“true；否则，返回 false”。

参考：http: [//msdn.microsoft.com/en-us/library/yz1c7148.aspx](http://msdn.microsoft.com/en-us/library/yz1c7148.aspx)

这个方法是否真的返回假？什么会导致它返回false？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T16:46:04.203

Joe Duffy（Microsoft .NET Framework 团队的 Parallel Extensions 开发负责人、架构师和创始人）*在 Windows 上的并发编程*第 373 页中进行了详细说明

> 请注意，虽然`Change`它的类型是返回 a `bool`，但它实际上永远不会返回任何东西，除非是 true。如果更改计时器出现问题——例如目标对象已被删除——将引发异常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T16:46:33.993

如果非托管外部返回 false，这实际上`ChangeTimerNative`可以返回 false。然而，这极不可能。

注意微软的代码：

```
bool status = false;
bool bLockTaken = false; 

// prepare here to prevent threadabort from occuring which could
// destroy m_lock state.  lock(this) can't be used due to critical
// finalizer and thinlock/syncblock escalation. 
RuntimeHelpers.PrepareConstrainedRegions();
try 
{ 
}
finally 
{
    do
    {
        if (Interlocked.CompareExchange(ref m_lock, 1, 0) == 0) 
        {
            bLockTaken = true; 
            try 
            {
                if (timerDeleted != 0) 
                    throw new ObjectDisposedException(null, Environment.GetResourceString("ObjectDisposed_Generic"));
                status = ChangeTimerNative(dueTime,period);
            }
            finally 
            {
                m_lock = 0; 
            } 
        }
        Thread.SpinWait(1);     // yield to processor 
    }
    while (!bLockTaken);
}
return status; 
```

**请注意**调用`ChangeTimerNative`Windows [`ChangeTimerQueueTimer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682004%28v=vs.85%29.aspx)API 函数，以便您可以阅读该文档以了解它可能会如何失败。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T16:58:45.587

在检查托管源时，它返回 false 的唯一情况是，如果由私有类表示的 AppDomain 计时器（如果不存在，则创建它）`AppDomainTimerSafeHandle`已`SafeHandle.IsInvalid`设置为 true。

由于 AppDomainTimerSafeHandle 继承自[SafeHandleZeroOrMinusOneIsInvalid](http://msdn.microsoft.com/en-us/library/microsoft.win32.safehandles.safehandlezeroorminusoneisinvalid.aspx)，因此 IsInvalid 由它实现 - 当尝试由非托管基础设施创建计时器并以从零或减一是无效的定义中读取的安全句柄结束时。

所有案例都表明这是极不可能的。

# r - 关于从 r 中的字符串中删除空格

> ID：12586937
> 
> 赞同：0
> 
> 时间：2012-09-25T16:11:45.273
> 
> 标签：r

> **可能重复：**
> [如何从 R 中的字符串中删除所有空格？](https://stackoverflow.com/questions/5992082/how-to-remove-all-whitespace-from-a-string-in-r)

我有一个字符串

```
c<-"abc def gh" 
```

我需要从这个字符串中删除每个空格并得到 sth 喜欢

```
c<-"abcdefgh" 
```

如何在 r 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:15:38.767

使用`gsub()`：

```
gsub(" ", "", c)
gsub("[[:space:]]", "", c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:16:20.197

```
library(stringr)
str_replace_all(c, " ", "") 
```

# android - Android 2.3 或更低版本的 Notification 中的可点击自定义视图

> ID：12586938
> 
> 赞同：7
> 
> 时间：2012-09-25T16:11:45.043
> 
> 标签：android, layout, notifications

我创建了一个自定义通知布局，它有一个可点击的按钮。到目前为止在 Android 3（API 级别 11）或更高版本上运行良好，但不适用于 Android 2.3，`ContentIntent`来自`Notification`始终覆盖我的布局并且无法覆盖。我无法单击视图，我总是单击通知并启动

显示通知和布局的代码：

```
Builder builder = new NotificationCompat.Builder(getApplicationContext());

        RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.notification_layout);
        contentView.setImageViewResource(R.id.notImage, R.drawable.stat_icon);
        contentView.setTextViewText(R.id.notTitle, "Title");
        contentView.setTextViewText(R.id.notText, "Text");
        contentView.setOnClickPendingIntent(R.id.notButton, secondPendingIntent);
        contentView.setOnClickPendingIntent(R.id.notContentLayout, pendingIntent);

        builder
                .setContentTitle("Title")
                .setContentText("Text")
                .setSmallIcon(R.drawable.stat_icon)
                .setOngoing(true)
                .setWhen(0)
                .setTicker("Ticket")
                .setContent(contentView)
                .setContentIntent(contentIntent); //this intent override my contentView.setOnClickPendintIntent. I can't click the view. 

        not = builder.build();

        not.contentView = contentView; 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp" >

    <RelativeLayout
        android:id="@+id/notContentLayout"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/notButton" >

        <ImageView
            android:id="@+id/notImage"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="8dp"
            android:layout_marginRight="23dp"
            android:contentDescription="@string/image_desc" />

        <TextView
            android:id="@+id/notTitle"
            style="@style/NotificationTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/notImage" />

        <TextView
            android:id="@+id/notText"
            style="@style/NotificationText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/notTitle"
            android:layout_toRightOf="@id/notImage" />
    </RelativeLayout>

    <ImageButton
        android:id="@+id/notButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@color/transparent"
        android:contentDescription="@string/image_desc"
        android:padding="10dp"
        android:src="@android:drawable/ic_media_pause" />

</RelativeLayout> 
```

简单的。但不适用于 Android 2.3 或更低版本，有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T07:48:13.597

我找到了，Android 2.3 或更低版本是不可能的。
可点击`Notification`按钮仅适用于 Android 3 或更高版本。

# android - OnActivityResult 使用设置菜单过早调用

> ID：12586941
> 
> 赞同：2
> 
> 时间：2012-09-25T16:11:51.570
> 
> 标签：android, android-intent, android-activity, application-settings, android-lifecycle

在我的应用程序中，在进入应用程序之前，我必须检查我的 wifi 连接，如果未启用 wifi，则将用户带到 wifi 设置。

我不想使用`WifiManager.setWifiEnabled();`，因为我想给用户设置它的机会。

我已经提到了链接，[onActivityResult() 过早地调用](https://stackoverflow.com/questions/3354955/onactivityresult-called-prematurely)

还有，[onActivityResult 和设置菜单](https://groups.google.com/forum/?hl=is&fromgroups=#!msg/android-developers/f10HRlRWB8w/2_9dZ-SldGgJ)

但这对我不起作用。`OnActivityResult()`和`onResume()`几乎在我进入设置菜单的同时被调用。

这是我的代码，

```
 AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setMessage("You are not currently connected to any network. Please turn on the network connection to continue.")
    alert.setPositiveButton("Settings", new DialogInterface.OnClickListener() 
    {
        @Override
        public void onClick(DialogInterface dialog, int arg1) 
        {
            Intent intent = new Intent(android.provider.Settings.ACTION_WIRELESS_SETTINGS);
            startActivityForResult(intent,SETTINGSCODE);
            dialog.cancel();
        }
    });
    alert.show(); 
```

在 onActivityResult() 中，我再次检查了在更改设置之前调用的网络状态。

我该怎么做 `OnActivityResult()`

只有从`settings menu`?

请帮我解决这个问题..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:42:18.117

这就是我解决这个问题的方法。

参考为类似问题发布的[***答案，我将 startActivityForResult() 更改为 startActivity() 因为动作调用的顺序就像***](https://stackoverflow.com/a/3546419/1237656)

1.  startActivityForResult()
2.  onActivityResult()
3.  onCreate()（新活动）
4.  setResult() 或完成()

控件被带到设置页面，用户可以在其中打开/关闭 Wi-Fi，然后再返回应用程序。**:)**

# python - 用于管理线程的替代 python 库

> ID：12586943
> 
> 赞同：2
> 
> 时间：2012-09-25T16:12:05.390
> 
> 标签：python, multithreading

我对产生子进程有一些烦恼，比如获得正确的输出等等。一个包装库[envoy](https://github.com/kennethreitz/envoy)通过一个易于使用的界面解决了我的所有问题，该界面摆脱了大多数问题。

使用线程时，我有时会遇到无法结束的挂起进程、在我无法再访问的线程中启动的外部程序等问题。

那里有任何“傻瓜线程”python库吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T16:39:42.830

*那里有任何“傻瓜线程”python库吗？*

不，那里没有。[`threading`](http://docs.python.org/library/threading.html)在简单的情况下使用起来非常简单。你想用它在你的程序中引入并发。这意味着当您希望两个或多个动作同时发生时，即同时发生时，您想使用它。

这就是你可以让彼得盖房子的同时让伊戈尔开车去莫斯科的方法：

```
from threading import Thread
import time

def drive_bus():
    time.sleep(1)
    print "Igor: I'm Igor and I'm driving to... Moskow!"
    time.sleep(9)
    print "Igor: Yei, Moskow!"

def build_house():
    print "Peter: Let's start building a large house..."
    time.sleep(10.1)
    print "Peter: Urks, we have no tools :-("

threads = [Thread(target=drive_bus), Thread(target=build_house)]

for t in threads:
    t.start()

for t in threads:
    t.join() 
```

这不是很简单吗？定义要在另一个线程中运行的函数。`threading.Thread`使用该函数创建一个实例作为`target`. 到目前为止没有发生任何事情，直到您调用`start`. 它触发线程并*立即返回*。

在让你的主线程退出之前，你应该等待你产生的所有线程完成。这就是这样`t.join()`做的：它阻塞并等待线程`t`完成。只有这样它才会返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:19:59.523

我建议阅读更多关于实际 Python 库的信息——它很简单。您的线程挂起问题（如果它阻止您的应用程序退出）可以通过使用守护线程来解决。

你想完成什么样的任务？如果您尝试在不实际使用自定义线程的情况下并行运行任务，您可能会发现包[multiprocessing](http://docs.python.org/library/multiprocessing.html)很有用。此外，python wiki 上有一条关于[并行处理](http://wiki.python.org/moin/ParallelProcessing)的有趣信息。

你能详细说明一下这个任务吗？

# java - 如何在java中转换wav文件

> ID：12586949
> 
> 赞同：3
> 
> 时间：2012-09-25T16:12:22.027
> 
> 标签：java, audioformat

如何在java中转换wav文件

```
AudioFormat targetFormat = new AudioFormat(
                                    sourceFormat.getEncoding(),
                                    fTargetFrameRate,
                                    16,
                                    sourceFormat.getChannels(),
                                    sourceFormat.getFrameSize(),
                                    fTargetFrameRate,
                                    false); 
```

结果异常：

```
java.lang.IllegalArgumentException: Unsupported conversion: 
ULAW 8000.0 Hz, **16 bit**, mono, 1 bytes/frame, **from** ULAW 8000.0 Hz, **8 bit**, mono, 1 bytes/frame 
```

在java中有可能吗？

我需要从 8 获取 16 位的 wav 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T18:38:01.287

这是一种使用内置 Java 方法将 8 位 uLaw 编码的二进制文件转换为 16 位 WAV 文件的方法。

```
public static void convertULawFileToWav(String filename) {
    File file = new File(filename);
    if (!file.exists())
        return;
    try {
        long fileSize = file.length();
        int frameSize = 160;
        long numFrames = fileSize / frameSize;
        AudioFormat audioFormat = new AudioFormat(Encoding.ULAW, 8000, 8, 1, frameSize, 50, true);
        AudioInputStream audioInputStream = new AudioInputStream(new FileInputStream(file), audioFormat, numFrames);
        AudioSystem.write(audioInputStream, Type.WAVE, new File("C:\\file.wav"));
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:11:40.380

您始终可以使用 FFMPEG、[http](http://ffmpeg.org/) ://ffmpeg.org/ 进行转换。您的 Java 程序可以调用 FFMPEG 进行转换。
FFMPEG 适用于所有操作系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:01:36.700

看看这个：[音频格式的转换](https://stackoverflow.com/questions/10515174/conversion-of-audio-format-in-java)它类似于您建议查看[http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html的问题](http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html)

# java - Eclipselink mongoDB本机查询find（）不起作用

> ID：12586953
> 
> 赞同：1
> 
> 时间：2012-09-25T16:12:47.447
> 
> 标签：java, mongodb, jpa, eclipselink, nativequery

我最近正在使用 mongoDB 数据库进行 JAVA 项目。所以我决定使用eclipselink 2.4。关于查询，它允许通常的“类似 SQL”的查询，但也（据说）允许本机 mongoDB 查询。我按照[本教程](http://wiki.eclipse.org/EclipseLink/Examples/JPA/NoSQL)进行操作，一切正常。我能够运行 findOne() 本机 mongoDB 查询 (queryOne) 但我无法运行 find() 查询（queryAll 不起作用）...

1.  查询 queryOne = em.createNativeQuery("db.ORDER.findOne()", Order.class);

2.  查询 queryAll = em.createNativeQuery("db.ORDER.find()", Order.class);

执行查询时出现错误：

```
Exception in thread "main" Local Exception Stack: 
Exception [EclipseLink-6044] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.QueryException
Exception Description: The primary key read from the row [EISMappedRecord(
    value => DBQuery: myTest.ORDER -> undefined)] during the execution of the query was detected to be null.  Primary keys must not contain null.
Query: ReadAllQuery(referenceClass=Order )
    at org.eclipse.persistence.exceptions.QueryException.nullPrimaryKeyInBuildingObject(QueryException.java:912)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:586)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:562)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.buildObject(ObjectLevelReadQuery.java:776)
    at org.eclipse.persistence.queries.ReadAllQuery.registerResultInUnitOfWork(ReadAllQuery.java:781)
    at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:433)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1149)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:852)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1108)
    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1196)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2875)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1602)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1584)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1549)
    at org.eclipse.persistence.internal.jpa.QueryImpl.executeReadQuery(QueryImpl.java:231)
    at org.eclipse.persistence.internal.jpa.QueryImpl.getResultList(QueryImpl.java:411)
    at example.Test.testQuery(Test.java:171)
    at example.Test.main(Test.java:54) 
```

使用 MongoDB shell 执行查询：

```
{ "_id" : "5061DC17E4B0881F592675A5", "TOTALCOST" : 3187, "SHIPPINGADDRESS" : [     {   "POSTALCODE" : "L5J1H7",    "COUNTRY" : "Canada",   "PROVINCE" : "ON",  "CITY" : "Ottawa",  "STREET" : "17 Jane St." } ], "ORDERLINES" : [  {   "DESCRIPTION" : "machine",  "COST" : 2999,  "LINENUMBER" : 1 },     {   "DESCRIPTION" : "shipping",     "COST" : 129,   "LINENUMBER" : 2 },     {   "DESCRIPTION" : "installation",     "COST" : 59,    "LINENUMBER" : 3 } ], "VERSION" : NumberLong(1), "DESCRIPTION" : "Pinball machine", "CUSTOMER__id" : "5061DC17E4B0881F592675A4", "BILLINGADDRESS" : [   {   "POSTALCODE" : "L5J1H7",    "COUNTRY" : "Canada",   "PROVINCE" : "ON",  "CITY" : "Ottawa",  "STREET" : "17 Jane St." } ] }
{ "_id" : "5061DC17E4B0881F592675A6", "TOTALCOST" : 565, "SHIPPINGADDRESS" : [  {   "POSTALCODE" : "L5J1H7",    "COUNTRY" : "Canada",   "PROVINCE" : "ON",  "CITY" : "Ottawa",  "STREET" : "17 Jane St." } ], "ORDERLINES" : [  {   "DESCRIPTION" : "machine",  "COST" : 500,   "LINENUMBER" : 1 },     {   "DESCRIPTION" : "balls",    "COST" : 5,     "LINENUMBER" : 2 },     {   "DESCRIPTION" : "shipping",     "COST" : 60,    "LINENUMBER" : 3 } ], "VERSION" : NumberLong(1), "DESCRIPTION" : "Foosball", "CUSTOMER__id" : "5061DC17E4B0881F592675A4", "BILLINGADDRESS" : [  {   "POSTALCODE" : "L5J1H8",    "COUNTRY" : "Canada",   "PROVINCE" : "ON",  "CITY" : "Ottawa",  "STREET" : "7 Bank St." } ] }
{ "_id" : "5061DC17E4B0881F592675A8", "TOTALCOST" : 402, "SHIPPINGADDRESS" : [  {   "POSTALCODE" : "L5J1H7",    "COUNTRY" : "Canada",   "PROVINCE" : "ON",  "CITY" : "Ottawa",  "STREET" : "17 Jane St." } ], "ORDERLINES" : [  {   "DESCRIPTION" : "table",    "COST" : 300,   "LINENUMBER" : 1 },     {   "DESCRIPTION" : "balls",    "COST" : 5,     "LINENUMBER" : 2 },     {   "DESCRIPTION" : "rackets",  "COST" : 15,    "LINENUMBER" : 3 },     {   "DESCRIPTION" : "net",  "COST" : 2,     "LINENUMBER" : 4 },     {   "DESCRIPTION" : "shipping",     "COST" : 80,    "LINENUMBER" : 5 } ], "VERSION" : NumberLong(1), "DESCRIPTION" : "Pingpong table", "CUSTOMER__id" : "5061DC17E4B0881F592675A7", "BILLINGADDRESS" : [    {   "POSTALCODE" : "L5J1H8",    "COUNTRY" : "Canada", "PROVINCE" : "ON",    "CITY" : "Ottawa",  "STREET" : "7 Bank St." } ] } 
```

如果您能告诉我如何解决此问题或一些解决方法，我将不胜感激。

编辑：JPQL 查询可能很有用，我正在使用一些作为解决方法，但是，我目前无法查询参考 ID。例如，如果我有一个带有客户参考的订单（订单只保存客户的 id）和 mongoDB 查询，我会像这样搜索：

```
db.ORDER.find({"CUSTOMER__id": "ID"}) 
```

JPQL 类似的查询我相信会是这样的：

```
query = em.createQuery("Select o from Order o where o.customer.id = \"ID\""); 
```

然而，再一次......不工作！错误：

```
Exception in thread "main" Local Exception Stack: 
Exception [EclipseLink-6168] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.QueryException
Exception Description: Query failed to prepare, unexpected error occurred: [java.lang.ClassCastException: org.eclipse.persistence.eis.mappings.EISOneToOneMapping cannot be cast to org.eclipse.persistence.mappings.OneToOneMapping].
Internal Exception: java.lang.ClassCastException: org.eclipse.persistence.eis.mappings.EISOneToOneMapping cannot be cast to org.eclipse.persistence.mappings.OneToOneMapping
Query: ReadAllQuery(referenceClass=Order jpql="Select o from Order o where o.customer.id = "ID"")
    at org.eclipse.persistence.exceptions.QueryException.prepareFailed(QueryException.java:1572)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:633)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.checkPrepare(ObjectLevelReadQuery.java:882)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:838)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1108)
    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1196)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2875)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1602)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1584)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1549)
    at org.eclipse.persistence.internal.jpa.QueryImpl.executeReadQuery(QueryImpl.java:231)
    at org.eclipse.persistence.internal.jpa.QueryImpl.getResultList(QueryImpl.java:411)
    at example.Test.testQuery(Test.java:175)
    at example.Test.main(Test.java:55)
Caused by: java.lang.ClassCastException: org.eclipse.persistence.eis.mappings.EISOneToOneMapping cannot be cast to org.eclipse.persistence.mappings.OneToOneMapping
    at org.eclipse.persistence.internal.expressions.RelationExpression.checkForeignKeyJoinOptimization(RelationExpression.java:512)
    at org.eclipse.persistence.internal.expressions.RelationExpression.normalize(RelationExpression.java:535)
    at org.eclipse.persistence.internal.expressions.SQLSelectStatement.normalize(SQLSelectStatement.java:1365)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.buildNormalSelectStatement(ExpressionQueryMechanism.java:543)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.prepareSelectAllRows(ExpressionQueryMechanism.java:1675)
    at org.eclipse.persistence.queries.ReadAllQuery.prepareSelectAllRows(ReadAllQuery.java:719)
    at org.eclipse.persistence.queries.ReadAllQuery.prepare(ReadAllQuery.java:656)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:614)
    ... 13 more 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:23:11.353

我不认为 find() 通过本机 MongoDB API 与 findOne() 工作相同。

当您在没有类的情况下执行本机查询时会发生什么？

即查询queryAll = em.createNativeQuery("db.ORDER.find()"); queryAll.getResultList();

你拿什么回来？

我不认为直接支持本机 find() （但您可以将 JPQL 用于大多数查询）。请为此记录一个错误，应该有一些方法可以让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:48:10.333

它似乎试图获取一个主键为空的对象。此外，如果按顺序创建记录，`A5, A6 and A8.`看起来 A7 会混乱吗？

是否可以删除 ORDER 文档并再次运行测试（插入和获取）？

# c# - WCF - 未调用自定义 UserNameSecurityTokenAuthenticator 中的 ValidateUserNamePasswordCore() 方法

> ID：12586954
> 
> 赞同：3
> 
> 时间：2012-09-25T16:12:52.877
> 
> 标签：c#, wcf, authorization, servicehost

我已经定义了一个自己的[ServiceCredentials](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicecredentials.aspx)提供者：

```
class PasswordServiceCredentials : ServiceCredentials
{
} 
```

当我启动[ServiceHost](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx)时，该提供程序会在[CreateSecurityTokenManager()](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicecredentials.createsecuritytokenmanager)方法中生成自定义[SecurityTokenManager](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.securitytokenmanager.aspx)：

```
public override SecurityTokenManager CreateSecurityTokenManager()
{
    if (this.UserNameAuthentication.UserNamePasswordValidationMode == UserNamePasswordValidationMode.Custom)
    {
        return new PasswordSecurityTokenManager(this);
    }

    return base.CreateSecurityTokenManager();
} 
```

*PasswordSecurityTokenManager*类：

```
class PasswordSecurityTokenManager : ServiceCredentialsSecurityTokenManager
{
} 
```

该实例在[CreateSecurityTokenAuthenticator()](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.securitytokenmanager.createsecuritytokenauthenticator)方法中生成自定义[SecurityTokenAuthenticator ：](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.securitytokenauthenticator.aspx)

```
public override SecurityTokenAuthenticator CreateSecurityTokenAuthenticator(SecurityTokenRequirement tokenRequirement, out SecurityTokenResolver outOfBandTokenResolver)
{
    outOfBandTokenResolver = null;

    return new PasswordSecurityTokenAuthenticator(this.ServiceCredentials
                                                      .UserNameAuthentication
                                                      .CustomUserNamePasswordValidator);
} 
```

生成的实例是自定义[CustomUserNameSecurityTokenAuthenticator](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.customusernamesecuritytokenauthenticator.aspx)。

**问题是**在任何时候都不会调用被覆盖的[ValidateUserNamePasswordCore()](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.usernamesecuritytokenauthenticator.validateusernamepasswordcore.aspx)方法：

```
protected override ReadOnlyCollection<IAuthorizationPolicy> ValidateUserNamePasswordCore(String userName, String password)
{
    ReadOnlyCollection<IAuthorizationPolicy> currentPolicies = base.ValidateUserNamePasswordCore(userName, password);

    List<IAuthorizationPolicy> newPolicies = new List<IAuthorizationPolicy>();
    if (currentPolicies != null)
    {
        newPolicies.AddRange(currentPolicies.OfType<IAuthorizationPolicy>());
    }

    newPolicies.Add(new PasswordAuthorizationPolicy(userName, password));

    return newPolicies.AsReadOnly();
} 
```

在我的自定义[IAuthorizationPolicy](http://msdn.microsoft.com/en-us/library/system.identitymodel.policy.iauthorizationpolicy.aspx)提供程序*PasswordAuthorizationPolicy*中，我想在[Evaluate()](http://msdn.microsoft.com/en-us/library/system.identitymodel.policy.iauthorizationpolicy.evaluate.aspx)方法中为[EvaluationContext设置自定义主体。](http://msdn.microsoft.com/en-us/library/system.identitymodel.policy.evaluationcontext.aspx)

但是如果不调用upper方法，就不能定义额外的IAuthorizationPolicy项。

这里有什么问题或遗漏？

我不使用 XML 来配置我的服务，我 100% 用 C# 代码来做这件事！

编辑：代码基于以下博客文章： http: [//www.neovolve.com/post/2008/04/07/wcf-security-getting-the-password-of-the-user.aspx](http://www.neovolve.com/post/2008/04/07/wcf-security-getting-the-password-of-the-user.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:55:28.677

好的，我只是问，因为您在帖子中从未提及有关配置文件的任何内容，但是您是否在 serviceBehaviors 中设置了 serviceCredentials 类型？例子：

```
<behaviors>
   <serviceBehaviors>
     <behavior name="YourCustomBehavior">
       <serviceDebug includeExceptionDetailInFaults="true" />
       <serviceCredentials type="Your.Namespace.PasswordServiceCredentials, Your.Namespace">
         <serviceCertificate findValue="localhost" x509FindType="FindBySubjectName" />
         <userNameAuthentication userNamePasswordValidationMode="Custom" />
       </serviceCredentials>
       <serviceAuthorization principalPermissionMode="Custom" />
     </behavior>
   </serviceBehaviors>
 </behaviors> 
```

如果是，您是否在服务节点上的 behaviorConfiguration 中引用“YourCustomBehavior”？例子：

```
<services>
   <service behaviorConfiguration="YourCustomBehavior"
    name="Your.Service.Namespace.YourService">
     <endpoint address="net.tcp://..."
      binding="netTcpBinding" bindingConfiguration="netTcpBindingConfig"
      contract="Your.Service.Interface.Namespace.IYourService" />
   </service>
 </services> 
```

可能就这么明显。

* * *

[![](../Images/607482060b98adadcf02e4872221e1b7.png)](https://web.archive.org/web/20121003063026/http://www.avivacommunityfund.org:80/ideas/acf13499)
[（来源：[avivacommunityfund.org](http://media.avivacommunityfund.org/ideas/badge/id:13499/size:180x150)）]

# c# - 如何打开一个进程以使其没有焦点？

> ID：12586957
> 
> 赞同：14
> 
> 时间：2012-09-25T16:13:00.153
> 
> 标签：c#, process, automation

我正在尝试编写一些自动化程序来打开一系列关闭的窗口（非隐藏，非恶意），我不希望它们在打开时窃取焦点。问题是，当每个窗口打开时，它会窃取焦点，阻止我在后台运行时工作。这是我在循环中执行以打开各种窗口的代码：

```
using (Process proc = new Process())
{
    proc.StartInfo.FileName = filename;
    proc.StartInfo.Arguments = arguments;
    proc.Start();

    Thread.Sleep(1000);

    if (!proc.HasExited)
    {
        proc.Kill();
    }
} 
```

如何在没有焦点的情况下打开这些内容，以便在此自动化运行时可以做其他事情？

**附录：** 执行上述代码的程序是一个简单的控制台应用程序。我开始的进程是 GUI 应用程序。出于测试/设计目的，我目前正在尝试使用`iexplore.exe`具有不同参数的 Internet Explorer ( ) 的重复实例。

当它在后台运行时，我将运行它并继续其他不相关的工作。我也不希望焦点返回到父应用程序。本质上，`.exe`当我到达我的办公桌时，我会运行它，然后切换到其他窗口来做其他工作，忽略原始程序及其子进程，直到它完成。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-27T11:44:37.277

这是可能的，但只能通过 pinvoke，不幸的是这需要大约 70 行代码：

```
[StructLayout(LayoutKind.Sequential)]
struct STARTUPINFO
{
    public Int32 cb;
    public string lpReserved;
    public string lpDesktop;
    public string lpTitle;
    public Int32 dwX;
    public Int32 dwY;
    public Int32 dwXSize;
    public Int32 dwYSize;
    public Int32 dwXCountChars;
    public Int32 dwYCountChars;
    public Int32 dwFillAttribute;
    public Int32 dwFlags;
    public Int16 wShowWindow;
    public Int16 cbReserved2;
    public IntPtr lpReserved2;
    public IntPtr hStdInput;
    public IntPtr hStdOutput;
    public IntPtr hStdError;
}

[StructLayout(LayoutKind.Sequential)]
internal struct PROCESS_INFORMATION
{
    public IntPtr hProcess;
    public IntPtr hThread;
    public int dwProcessId;
    public int dwThreadId;
}

[DllImport("kernel32.dll")]
static extern bool CreateProcess(
    string lpApplicationName,
    string lpCommandLine,
    IntPtr lpProcessAttributes,
    IntPtr lpThreadAttributes,
    bool bInheritHandles,
    uint dwCreationFlags,
    IntPtr lpEnvironment,
    string lpCurrentDirectory,
    [In] ref STARTUPINFO lpStartupInfo,
    out PROCESS_INFORMATION lpProcessInformation
);

[DllImport("kernel32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool CloseHandle(IntPtr hObject);

const int STARTF_USESHOWWINDOW = 1;
const int SW_SHOWNOACTIVATE = 4; 
const int SW_SHOWMINNOACTIVE = 7; 

public static void StartProcessNoActivate(string cmdLine)
{
    STARTUPINFO si = new STARTUPINFO();
    si.cb = Marshal.SizeOf(si);
    si.dwFlags = STARTF_USESHOWWINDOW;
    si.wShowWindow = SW_SHOWMINNOACTIVE;

    PROCESS_INFORMATION pi = new PROCESS_INFORMATION();

    CreateProcess(null, cmdLine, IntPtr.Zero, IntPtr.Zero, true,
        0, IntPtr.Zero, null, ref si, out pi);

    CloseHandle(pi.hProcess);
    CloseHandle(pi.hThread);
} 
```

设置`si.wShowWindow`为`SW_SHOWNOACTIVATE`正常显示窗口但不窃取焦点，并`SW_SHOWMINNOACTIVE`最小化启动应用程序，再次不窃取焦点。

此处提供了完整的选项列表：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms633548 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:34:18.380

您可以将焦点转移到您的应用程序

```
 [DllImport("User32")]
    private static extern int SetForegroundWindow(IntPtr hwnd);
    [DllImportAttribute("User32.DLL")]
    private static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

 Process.Start("");
        Thread.Sleep(100);
        var myWindowHandler = Process.GetCurrentProcess().MainWindowHandle;
        ShowWindow(myWindowHandler, 5);
        SetForegroundWindow(myWindowHandler); 
```

[设置前景窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)

[展示窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:06:30.430

解决了。

我最终使用的解决方案绕过了任何属性或重新分配焦点。由于该任务是自动化的且独立的，因此我只使用 Windows 任务计划程序来运行该应用程序。无论出于何种原因，只要“父”控制台窗口不在焦点上，“子”GUI 窗口就会正常打开但不在焦点上——允许我在应用程序运行时继续在另一个窗口中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:36:37.707

***`SetForegroundWindow`在控制台应用程序中也可以做到这一点。***

**测试代码：**

创建一个简单的类：

```
public class MyClass
{
    [DllImport("user32.dll")]
    static extern bool SetForegroundWindow(IntPtr hWnd);

    public void doProcess(string filename, string arguments){

        using (Process proc = new Process())
        {
            proc.StartInfo.FileName = filename;
            proc.StartInfo.Arguments = arguments;
            proc.Start();

            SetForegroundWindow(proc.MainWindowHandle);
        }
    }
} 
```

然后在`main`您的控制台应用程序的方法中：

```
class Program
{
    static void Main(string[] args)
    {
       MyClass mc = new MyClass();
       mc.doProcess("iexplore.exe", "http://www.stackoverflow.com");

       Console.ReadKey();
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-25T16:31:43.660

使用`Process.StartInfo.CreateNoWindow = true`和的组合`Process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden`。

它也可能值得使用`Process.StartInfo.UseShellExecute = false`，并重定向 StdIn/StdOut/StdErr。

请参阅[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-25T16:25:47.393

我没有尝试过，但我相信如果你设置[proc.StartInfo.WindowStyle](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.windowstyle.aspx) = WindowStyle.Minimized 应该可以解决问题。

# javascript - 选择非输入元素时，在iOS中强制焦点离开带有jQuery的表单字段

> ID：12586962
> 
> 赞同：3
> 
> 时间：2012-09-25T16:13:17.263
> 
> 标签：javascript, jquery, ios, ipad, user-experience

使用 jQuery 或类似的东西，是否可以检测用户何时从 iOS 的表单字段中点击离开，有效地移除了焦点？我有传统的表格，其中包含名字、姓氏、地址行 1、地址行 2 等。

在 iPad 上，当您选择一个表单域时，离开该表单域的唯一方法是通过单击或点击键盘窗格中的`Previous`或按钮来选择表单中的另一个域。`Next`

当显示键盘窗格时，对页面上其他非输入元素的单击将被忽略，因此焦点仍保留在表单字段上。

如果我通过单击非输入表单元素单击离开表单字段，jQuery/JavaScript（或其他任何东西）是否有办法强制焦点离开表单字段？

这是我的意思的一个例子。在下面的屏幕中，当焦点位于`Line 1`元素上时，我无法通过单击非输入元素来移出它。

![在此处输入图像描述](../Images/1c0554898776d3c88363bf3bb6d34b41.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:25:51.783

试着`blur()`在表格上快速做一下，这可能会奏效。

```
$('body').on('click', function () { 
    $('form').blur(); 

    // And since you said selecting an anchor might help, potentially doing a:
    $('a#whatever').blur(); // might do the trick too
}); 
```

# scala - 使用 Scala 调度库禁用 SSL

> ID：12586971
> 
> 赞同：4
> 
> 时间：2012-09-25T16:14:02.147
> 
> 标签：scala, ssl, https, scala-dispatch

我目前正在将我们所有的 Rest 测试移动到 CI 服务器，并注意到所有测试都由于 SSL 握手而失败，现在我已经使用我们的 Java 测试套件使用 TrustManager 成功禁用了这个，但我不确定如何使用 Scala 调度库来做到这一点，并且还没有找到许多可以适用于这种情况的示例。

```
val JSONstr = "{samplekey:samplevalue}"
val response:String = Http(url("https://www.host.com/path/to/post") 
                    << (checkInJSONstr, "application/json") as_str) 
```

按预期发生以下异常：

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated at     com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)
... 
```

有没有办法用调度库在语法上干净地忽略 SSL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T02:36:56.110

```
import dispatch._
val http = new Http with HttpsLeniency
val response:String = http(url("https://www.host.com/path/to/post") 
                   << (checkInJSONstr, "application/json") as_str) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T22:52:15.447

viktortnk 的答案不再适用于最新版本的 Dispatch (0.13.2)。对于最新版本，您可以使用以下内容创建一个接受任何证书的 http 客户端：

```
val myHttp = Http.withConfiguration(config => config.setAcceptAnyCertificate(true)) 
```

然后你可以将它用于 GET 请求，如下所示：

```
myHttp(url("https://www.host.com/path").GET OK as.String) 
```

我在这里发现了这一点：[为什么 dispatch throw "java.net.ConnectException: General SSLEngine ..." and "unexpected status" exceptions for a specific URL?](https://stackoverflow.com/questions/46301238/why-does-dispatch-throw-java-net-connectexception-general-sslengine-and)

# ios - GCD中ARC下是否需要创建自动释放池？

> ID：12586977
> 
> 赞同：6
> 
> 时间：2012-09-25T16:14:25.007
> 
> 标签：ios, memory-management, concurrency, automatic-ref-counting, grand-central-dispatch

我有一个 CAEAGLLayer 的运行循环方法，它使用 GCD 序列化对共享 ivars 的访问。

我的绘图代码目前是这样构造的：

```
- (void)draw {
    dispatch_sync(serialDrawingQueue, ^{
        @autoreleasepool {
            [self drawingStart];

            [spriteA draw];
            [spriteB draw];

            [self drawingEnd];
        }
    });
} 
```

该`draw`方法由 CADisplayLink 调用。`@autoreleasepool`使用 GCD 块时有必要吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T16:26:44.560

来自[苹果文档](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)：

> 如果您的块创建了多个 Objective-C 对象，您可能希望将块的部分代码包含在 @autorelease 块中，以处理这些对象的内存管理。**尽管 GCD 调度队列有自己的自动释放池**，但它们不能保证这些池何时耗尽。如果您的应用程序受内存限制，创建您自己的自动释放池可以让您更定期地为自动释放对象释放内存。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-29T00:11:56.990

似乎在 iOS10 或更高版本中，调度队列默认不再围绕`@autoreleasepool`. 这由`DISPATCH_QUEUE_SERIAL_WITH_AUTORELEASE_POOL`和`DISPATCH_QUEUE_CONCURRENT_WITH_AUTORELEASE_POOL`中定义的宏表示[`queue.h`](https://github.com/apple/swift-corelibs-libdispatch/blob/master/dispatch/queue.h#L543-L571)

# svn - 同一文件的颠覆和多个副本（文本和二进制）

> ID：12586985
> 
> 赞同：2
> 
> 时间：2012-09-25T16:15:21.673
> 
> 标签：svn, repository, diff, binaryfiles

当一个文件被复制到多个文件夹中时，Subversion 会做什么？它是在内部保留一个唯一的副本还是每个副本都被复制并控制每个副本的差异？

二进制文件会发生什么？如果一个库（二进制）文件被添加并提交到多个文件夹中，Subversion 在这种情况下如何优化其存储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:45:34.167

我正在使用颠覆 1.7。在这个版本中，服务器只存储一个副本——在这两种情况下：

*   在存储库中创建副本（即`svn cp ...`）
*   独立添加内容完全相同的文件。

这适用于两种存储格式，即*fsfs*和*bdb*。

我已经用一个简单的 shell 脚本对其进行了验证，该脚本创建了一个不可压缩的 1 MB 文件，并以两种方式将其添加到存储库中 100 次。最后，在所有情况下所需的存储库都小于 3 MB。所以会有一些开销，但不是每个副本的全部内容。

# sql - xp_cmdshell 本机错误 208，SQL Server 2008 R2 中的 BCP

> ID：12586987
> 
> 赞同：2
> 
> 时间：2012-09-25T16:15:24.703
> 
> 标签：sql, sql-server-2008-r2, bcp, xp-cmdshell

我一直在尝试获取大型和多重连接的 SELECT 语句的结果，并将查询结果作为 CVS 文件通过电子邮件发送。我有正确的查询和电子邮件，但我无法自动将结果导出为 CVS 文件。从我一直在阅读的内容来看，自动导出查询结果的最佳选择是一个名为“BCP”的工具。

我尝试在 Management Studio 中像这样使用 BCP：

```
USE FootPrint;

DECLARE @sql VARCHAR(2048);
DECLARE @dir VARCHAR(50);

SET @dir = 'C:\Users\bailey\Desktop';
SET @sql = 'bcp "SELECT TOP 10 * FROM datex_footprint.Shipments" queryout "' + @dir + '" -c -t, -T';

EXEC master..xp_cmdshell @sql; 
```

FootPrint 是特定数据库的名称，而 datex_footprint 是模式。（这不是真正的查询，只是一个测试）。

当我运行它时，我得到的错误是：“SQLState=S0002, NativeError = 208”“错误 = [Microsoft][SQL Server Native Client 10.0][SQL Server] Invalid object name 'datex_footprint.Shipments'。”

我 100% 肯定 datex_footprint.Shipments 是我要测试的数据的正确模式\表访问。

有没有人看到我在尝试将此结果导出到 CSV 文件时遗漏了什么或做错了什么？不过，具体来说，我正在尝试自动化这个过程。我知道如何将结果导出到 CSV 文件中，但我想在 T-SQL 中完成，这样我就可以按时间自动生成文件。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:45:07.457

[解决了]

我弄清楚我做错了什么。我没有以完整的形式识别视图。我使用的是“schema.Table/View”，而不是“database.schema.table/view”。另外，我添加了一个“-S”+@@SERVERNAME 标志——这告诉 BCP 实用程序使用 SQL Server 当前连接到的服务器进行查询。

在 T-SQL、SQL Server 2008 中生成 SELECT 查询结果的 CSV 文件的正确代码是：

```
DECLARE @sql VARCHAR(8000);

SELECT @sql = 'bcp "SELECT * FROM FootPrint.datex_footprint.Shipments" queryout "C:\Users\bailey\Desktop\FlatTables\YamotoShipping.csv" -c -t, -T -S' + @@SERVERNAME;

exec master..xp_cmdshell @sql; 
```

所以一旦我添加了“足迹”。为了识别数据库，它起作用了。

注意：我正在运行 SQL Server 2008 R2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T14:22:39.503

我遇到了同样的错误，但我以不同的方式解决了它。我已将默认数据库添加到我的 ID，然后 BCP 开始在我的默认数据库中查找表并处理文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-12T16:17:40.943

在搜索和阅读文档后`bcp`，我发现当我们复制数据时，我们应该使用全球临时表，即 ## 而不是 #.. 因为`tempdb`它会发生冲突并且不允许将数据复制到目标文件.

例子：

```
DECLARE @OutputFilePath nvarchar(max); SET @OutputFilePath = 'C:\OutputData'
DECLARE @ExportSQL nvarchar(max); SET @ExportSQL = N'EXEC xp_cmdshell ''bcp 
"SELECT * FROM LW_DFS_DIT.dbo.##Mytemptable " queryout "' + @OutputFilePath + 
'\OutputData.txt" -T -c -t '''

EXEC(@ExportSQL) 
```

希望这会有所帮助

# ajax - 使用 ajax 加载 wordpress 内容对服务器的要求比正常页面加载要低且更快？

> ID：12586988
> 
> 赞同：0
> 
> 时间：2012-09-25T16:15:25.420
> 
> 标签：ajax, performance, wordpress

这是我在阅读了一些关于 WP ajax 进程的文章后产生的技术疑问（虽然找不到它们）。

使用 WP ajax API 加载 WP 内容（任何内容、页面、帖子、小部件等）是否比发出完整的规范页面请求更快、更便宜？

我想到了这一点，因为也许通过 wp-admin/admin-ajax.php 比加载一个完全运行整个 WP 堆栈的新页面要轻。

我对吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:21:13.000

我说这完全取决于您的 wordpress 页面中进行了多少处理。如果您的小部件需要很长时间来处理，因为它们正在进行肥皂/外部 api 调用，那么通过 ajax 加载这些小部件将符合您的最佳利益。通过 ajax 加载它们将使您的页面加载速度更快，这对谷歌来说看起来更好。如果它们都加载得很快，那么 ajax 页面只会给您的数据库和网络服务器带来更多压力，因为交付单个页面需要更多流量。

此外，我只会将 ajax 用于页面上您希望更改而不重新加载页面的区域，例如评论或数据流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:18:15.530

是的，通常是这样。

位我遇到了 Wordpress Ajax api 很慢的情况：

[https://wordpress.stackexchange.com/questions/41808/ajax-takes-10x-as-long-as-it-should-could](https://wordpress.stackexchange.com/questions/41808/ajax-takes-10x-as-long-as-it-should-could)

因此，如果您遇到了 Wordpress ajax api 的错误或问题......它可能会更慢。

但这不是阿贾克斯的错。Ajax 本身要快得多。

Ajax 通常更快，因为它避免了重新加载整个页面以进行微小的更改。这是一个巨大的胜利，尤其是对于像评论一篇大文章这样的事情。您可以想象，如果您必须在每次评论后重新加载文章，哎哟。Ajax 避免了这种情况。

# c# - 为什么补丁程序不起作用？

> ID：12586989
> 
> 赞同：0
> 
> 时间：2012-09-25T16:15:36.867
> 
> 标签：c#

我试图做一个可以自动更新的应用程序。但它不起作用。

主要“已修补”应用程序的代码：

```
private void Patch()
{
        using (WebClient client = new WebClient())
        {
            string name = "asd681648.txt";
            client.DownloadFile("http://mypage/patches/" + "Graph" + ".txt", @"C:\" + name);
            string text = File.ReadAllText(@"C:\" + name);
            File.Delete(@"C:\" + name);
            string[] version = text.Split('.');
            string[] sVersion = set.ver.Split('.');
            for (int i = 0; i < version.Length; i++)
            {
                if (int.Parse(version[i]) > int.Parse(sVersion[i]))
                {
                    MessageBox.Show("New version will be downloaded!");
                    Process.Start(Environment.CurrentDirectory + "\\Patcher.exe", "Graph "+set.ver+" "+Environment.CurrentDirectory+"\\");
                    Application.Exit();
                    break;
                }
            }
        }
} 
```

以及“修补程序”的代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using Microsoft.Deployment.Compression.Cab;

namespace Patcher
{
    class Program
    {
        static void Main(string[] args)
        {
            WebClient client=new WebClient();
            string name = "asd2341648.txt";
            client.DownloadFile("http://mypage/patches/"+args[0]+".txt", @"C:\"+name);
            string text = File.ReadAllText(@"C:\" + name);
            File.Delete(@"C:\"+name);
            string[] version = text.Split('.');
            string[] sVersion = args[1].Split('.');
            for (int i = 0; i < version.Length; i++)
            {
                if(int.Parse(version[i])>int.Parse(sVersion[i]))
                {
                    break;
                }
                if(i==version.Length-1)
                {
                    return;
                }
            }
            Console.WriteLine("New version is avaliable. Downloading...");
            client.DownloadFile("http://mypage/patches/patches/" + args[0]+".cab",       @"C:\"+args[0]+".cab");
            CabInfo cab=new CabInfo(@"C:\"+args[0]+".cab");
            cab.Unpack(args[2]);
            File.Delete( @"C:\"+args[0]+".cab");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:22:48.297

您可以使用（从您的第一个参数中删除 txt 扩展名）进行修改

```
var path = Path.Combine("C:\",name);
client.DownloadFile("http://mypage/patches/"+args[0], @path); 
```

你也可以修改

```
 var path = Path.Combine("C:\",name);
 client.DownloadFile("http://mypage/patches/", @path); 
```

您必须只设置文件的地址

```
public void DownloadFile(
    string address,
    string fileName
) 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/ez801hhe.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/ez801hhe.aspx)

# android - Thenewboston 第 21 课崩溃。完成列表活动

> ID：12586994
> 
> 赞同：1
> 
> 时间：2012-09-25T16:15:45.493
> 
> 标签：android, splash-screen

我正在使用 The New Boston 教程学习 android 应用程序开发。我完成了第 21 课，但是当我运行我的代码时，应用程序在启动屏幕（即徽标）后崩溃。请帮忙。我不想退出本教程。如果除了下面给出的数据之外，您还需要 eclipse 中的其他任何内容，请告诉我。提前致谢。

**我的清单：**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.thenewboston.pok"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Splash"
            android:label="@string/title_activity_the_new_boston" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TheNewBostonActivity"
            android:label="@string/title_activity_the_new_boston" >
            <intent-filter>
                <action android:name="com.thenewboston.pok.THENEWBOSTONACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MENU"
            android:label="@string/title_activity_the_new_boston" >
            <intent-filter>
                <action android:name="com.thenewboston.pok.MENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**我的菜单.java：**

```
package com.thenewboston.pok;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Menu extends ListActivity{

    String classes[]={"TheNewBostonActivity", "example1", "example2", "example3",
            "example4", "example5", "example6"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this, android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String cheese = classes[position];
        try{
            Class ourClass = Class.forName("com.thenewboston.pok." + cheese);
            Intent ourIntent = new Intent(Menu.this, ourClass);
            startActivity(ourIntent);
        } catch (ClassNotFoundException e){
            e.printStackTrace();
        }

    }
} 
```

**我的 Splash.java：**

```
package com.thenewboston.pok;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        Thread timer = new Thread(){
            public void run() {
                try{
                    sleep(5000);                    
                }catch (InterruptedException e){
                    e.printStackTrace();
                }finally{
                    Intent open1= new Intent ("com.thenewboston.pok.MENU");
                    startActivity(open1);
                }
            }
        };
        timer.start();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

} 
```

**我的 TheNewBostonActivity.java：**

```
package com.thenewboston.pok;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class TheNewBostonActivity extends Activity {
    MediaPlayer ourSong;
    int counter;
    Button add, sub;
    TextView display;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ourSong = MediaPlayer.create(TheNewBostonActivity.this, R.raw.undisclosed_desires);
        ourSong.start();
        counter = 0;
        add = (Button) findViewById(R.id.bAdd);
        sub = (Button) findViewById(R.id.bSub);
        display = (TextView) findViewById(R.id.tvDisplay);
        add.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter++;
                display.setText("Your Total Is " + counter);
            }
        });
        sub.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter--;
                display.setText("Your Total Is " + counter);
            }
        });

    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        ourSong.release();
    }

} 
```

**我的日志文件：**

```
09-25 14:56:56.778: D/AndroidRuntime(336): Shutting down VM
09-25 14:56:56.778: W/dalvikvm(336): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-25 14:56:56.797: E/AndroidRuntime(336): FATAL EXCEPTION: main
09-25 14:56:56.797: E/AndroidRuntime(336): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.thenewboston.pok/com.thenewboston.pok.MENU}: java.lang.ClassNotFoundException: com.thenewboston.pok.MENU in loader dalvik.system.PathClassLoader[/data/app/com.thenewboston.pok-1.apk]
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.os.Looper.loop(Looper.java:123)
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-25 14:56:56.797: E/AndroidRuntime(336):  at java.lang.reflect.Method.invokeNative(Native Method)
09-25 14:56:56.797: E/AndroidRuntime(336):  at java.lang.reflect.Method.invoke(Method.java:507)
09-25 14:56:56.797: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-25 14:56:56.797: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-25 14:56:56.797: E/AndroidRuntime(336):  at dalvik.system.NativeStart.main(Native Method)
09-25 14:56:56.797: E/AndroidRuntime(336): Caused by: java.lang.ClassNotFoundException: com.thenewboston.pok.MENU in loader dalvik.system.PathClassLoader[/data/app/com.thenewboston.pok-1.apk]
09-25 14:56:56.797: E/AndroidRuntime(336):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
09-25 14:56:56.797: E/AndroidRuntime(336):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
09-25 14:56:56.797: E/AndroidRuntime(336):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
09-25 14:56:56.797: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
09-25 14:56:56.797: E/AndroidRuntime(336):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:26:12.937

你已经用全部大写字母在清单中声明了你的活动。

```
 android:name=".MENU" 
```

但是您的 Activity 类是 Menu.java

将此更改为

```
 android:name=".Menu" 
```

# dart - 如何停止 Dart 的 .forEach()？

> ID：12586995
> 
> 赞同：74
> 
> 时间：2012-09-25T16:15:46.183
> 
> 标签：dart

```
List data = [1, 2, 3];
data.forEach((value) {
  if (value == 2) {
    // how to stop?
  }
  print(value);
}); 
```

我尝试`return false;`了哪个在 jQuery 中有效，但在 Dart 中无效。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-09-25T16:54:17.100

您还可以使用 for/in，它隐式地使用在另一个答案中恰当演示的迭代器：

```
List data = [1,2,3];

for(final i in data){
  print('$i');
  if (i == 2){
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-11-18T19:49:53.403

也可以使用 forEach() 和 takeWhile() 来实现您的示例。

```
var data = [1, 2, 3];
data.takeWhile((val) => val != 2).forEach(print); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-02-05T14:40:35.713

打破一个`List`

```
List<int> example = [ 1, 2, 3 ];

for (int value in example) {
  if (value == 2) {
    break;
  }
} 
```

打破一个`Map`

如果您正在处理 a `Map`，您不能简单地从给定的映射中获取迭代器，但您仍然可以`for`通过将 a 应用于值或键来使用它。由于您有时可能需要键和值的组合，因此这里有一个示例：

```
Map<String, int> example = { 'A': 1, 'B': 2, 'C': 3 };

for (String key in example.keys) {
  if (example[key] == 2 && key == 'B') {
    break;
  }
} 
```

请注意，如果您需要， Map 不一定具有`[ 'A', 'B', 'C' ]`使用 LinkedHashMap 的键。如果您只想要这些值，只需执行`example.values`而不是`example.keys`.

或者，如果您只搜索一个元素，您可以将所有内容简化为：

```
List<int> example = [ 1, 2, 3 ];
int matched = example.firstMatching((e) => e == 2, orElse: () => null); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-09-25T16:39:51.363

forEach 接受的回调返回 void，因此没有停止迭代的机制。

在这种情况下，您应该使用迭代器：

```
void listIteration() {
  List data = [1,2,3];

  Iterator i = data.iterator;

  while (i.moveNext()) {
    var e = i.current;
    print('$e');
    if (e == 2) {
      break;
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-26T09:35:26.850

Dart 不支持非本地返回，因此从回调返回不会破坏循环。它在 jQuery 中工作的原因是 each() 检查回调返回的值。Dart forEach 回调返回 void。

[http://docs.jquery.com/Core/each](http://docs.jquery.com/Core/each)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-06-12T08:51:44.593

根据 Greg Lowe 的帖子，我在项目中使用了 where 并且它也有效。

```
var data = [1, 2, 3];
data.where((val) => val != 2).forEach(print); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-25T13:58:44.607

**使用多循环**

**打破外循环**

```
OUTER: for (var i = 0; i < m.length; i++) {
  for (var j = 0; j < m[i].length; j++) {
    if (m[i][j] < 0) {
      print("Negative value found at $i,$j: ${m[i][j]}");
      break OUTER;
    }
  }
} 
```

**继续外循环**

```
 outer: for (var v in a) {
    for (var w in b) {
      if (w == v) continue outer;
    }
    print(v);
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-25T06:57:41.227

这是**for-in**循环的完整示例，接近**forEach**样式。

```
void main(){
  var myList = [12, 18, 24, 63, 84,99];

  myList.forEach((element) {
   print(element);
   if (element ==24); //break; // does not work
  });

 for(var element in myList) {
    print(element);
    if (element==24) break;
   } 
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-22T06:14:13.637

您可以使用`for`和`indexOf`

```
 for (var number in id) {
    var index = id.indexOf(number);

    print('Origin forEach loop');

    for (int i = 0; i < 1; i++) {
      print("for loop");
    }

    break;
  } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-08T11:19:44.843

有人建议`where()`，但它不是`forEach()`具有中断能力的一般替代品

（`where`然而，这是问题示例中显示的用例的正确替代品。另一方面，我专注于标题中的问题）

的功能，`foreach()`但与 , 的等价物由以下`break`给出**`any()`**：继续循环返回 false，停止返回 true；any() 的结果可以忽略。我认为它更类似于`each()`在 jquery 中（但在 dart 中阻止你返回 true）。

为了有一个带索引的循环，但也有可能打破循环，我使用以下扩展：

```
extension IterableUtils<E> on Iterable<E> {

  /**
    Similar to Iterable.forEach() but:
    - with an index argument
    - with the optional capacity to break the loop, returning false
      Note: as for the return clause, you can omit it, as with forEach()
   */
  void forEachIndexed(Function(E element, int index) f) {
    int index = 0;
    for (E element in this) {
      if (f(element, index) == false) break;
      index++;
    }
  }
} 
```

### 例子：

```
void main() {

  List list = ["a", "b", "c"];

  list.forEachIndexed((element, index) {
    print("$index: $element");

    //Optional:
    if (element == "b") return false; //break
  });
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-16T18:17:04.400

您可以从 forEach 清空返回以打破循环；

```
List<int> data = [1, 2, 3];
int _valueToBePrinted; 

data.forEach((value) {
  if (value == 2) {
    _valueToBePrinted = value;
    return;
  }
});
// you can return something here to
// return _valueToBePrinted;
print(value); 
```

反正你不应该...

问题是，你不能在整个 forEach 循环中返回任何东西

```
//This don't work
data.forEach((value) {
  if (value == 2) {
    _valueToBePrinted = value;
    return;
  }
  if (value == 1) {
   return value;
  }
}); 
```