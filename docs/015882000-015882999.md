# StackOverflow 问答 15882000-15882999

# c++ - 创建类的实例

> ID：15882002
> 
> 赞同：-1
> 
> 时间：2013-04-08T14:38:16.347
> 
> 标签：c++, class, visual-c++, instance

```
#include "2d/Vector2D.h"
#include <list>
#include "../../AbstTS.h"

class AbstRB;

class fTS: public AbstTS
{

public:

   fTS(AbstRB* owner);

   void       Update();
   void       closestBotStrategy();

};

class fGCBS
{

public:

    fGCBS(AbstRaven_Bot* owner);

    void       pickTarget();
 };

#endif 
```

以上是我的代码，我想从 fTS 类中的 fGCBS 类访问 pickTarget() 。我知道我必须创建这个 fGCBS 的实例，但我不知道该怎么做，感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:40:11.090

To create an instance of a class, you need to call its constructor.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:40:41.063

One way would be to include an instance of fGCBS inside fTS.

```
class fTS: public AbstTS
{

public:

   fTS(AbstRaven_Bot* owner);

   void       Update();
   void       closestBotStrategy();
private:
   fGCBS my_fGCBS; // instance of fGCBS inside fTS
}; 
```

You would have to make a few other changes to your code for this to work. See if you can work them out.

# ios - 将 API 错误代码映射到 iOS 中的本地化字符串

> ID：15882007
> 
> 赞同：0
> 
> 时间：2013-04-08T14:38:23.667
> 
> 标签：ios, localization, mapping, error-code

我正在编写一个 iOS 应用程序，它从我们公司的服务器下载一些统计数据。如果出现错误，API 会提供错误代码和错误描述。我想保留内部日志的错误描述（始终为英文）并将错误代码映射到一些本地化字符串。哪个是解决这个问题的最佳方法？我正在考虑使用 .plist 文件执行映射，但不是 100% 确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:52:39.853

只要内存占用低，使用带有 NSDictionary 的 plist 文件就可以了。我做过类似的事情。

但是，还要注意标准方法是[NSLocalizedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html#//apple_ref/doc/uid/10000051i-CH6)并为每种语言使用 .Strings 文件。

下面是一个如何使用 NSLocalizedString 的示例：

```
// Set the label using the localized string
self.label.text = NSLocalizedString(@"Select choice:", @"Prompt to make a selection."); 
```

第一部分是您在文件中定义的密钥`Localizable.strings`。如果字符串文件中不存在条目，则使用键名，因此我使键等于默认文本。在上面的示例中，如果没有找到默认语言的条目，它将只使用键名，即`@"Select choice:"`.

然后，您创建一个 Localizable.string 文件并按下 Localize 按钮，然后为每种语言创建一个。你的西班牙人可能看起来像这样：

```
/* Contents of Localizable.strings */
"Select choice:" = "Selecciona la opción:"; 
```

当然，你可以有一个英文的，它看起来像这样：

```
/* Contents of Localizable.strings */
"Select choice:" = "Select choice:"; 
```

NSLocalizedString() 的第二个参数是注释，它是可选的，但 Apple 提供了工具来查找代码中的所有 NSLocalizedString() 条目，并为您在字符串资源文件中生成行，并附上注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T22:13:11.517

我将补充一点，如果您的 API 采用语言参数并以该语言返回消息，您可以像这样使用它的可用语言（目标 C）：

```
NSArray *availableLanguages = @[@"en", @"es"]; // API's available languages
NSString *preferredLanguage = [NSBundle preferredLocalizationsFromArray:availableLanguages].firstObject; 
```

然后将preferredLanguage 传递给API。

（API 甚至可能会调用来获取它支持的可用语言。）

请参阅[https://developer.apple.com/library/content/technotes/tn2418/_index.html](https://developer.apple.com/library/content/technotes/tn2418/_index.html)

# html - @viewport 在 Safari Mobile (ipad 2) 中不起作用

> ID：15882008
> 
> 赞同：0
> 
> 时间：2013-04-08T14:38:25.567
> 
> 标签：html, css

@viewport 在 Safari Mobile (ipad 2) 中不起作用

我不能用`<meta name="viewport" ... />`，我只能用css。

用户代理：Mozilla/5.0 (ipad,...AppleWebKit/534.46...Safari/7534.48.3)

```
@-webkit-viewport {
 width: 480px;
 zoom: 2.0;
 user-zoom: zoom;
}
@-moz-viewport {
 width: 480px;
 zoom: 2.0;
 user-zoom: zoom;
}
@-ms-viewport {
 width: 480px;
 zoom: 2.0;
 user-zoom: zoom;
}
@-o-viewport {
 width: 480px;
 zoom: 2.0;
 user-zoom: zoom;
}
@viewport {
  width: 480px;
  zoom: 2.0;
  user-zoom: zoom;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:51:33.707

你必须以某种方式触发你的视口，通过`<meta>`或`<javascript>`

[编辑]

[原始来源](http://www.htmlgoodies.com/beyond/webmaster/toolbox/article.php/3889591/Detect-and-Set-the-iPhone--iPads-Viewport-Orientation-Using-JavaScript-CSS-and-Meta-Tags.htm)

**为 iPhone 和 iPad 使用 JavaScript**

上面显示的元标记工作得很好，但是，您也可以使用 JavaScript 来做同样的事情，因为 iPad 和 iPhone 都支持脚本语言。以下 JavaScript 函数通过使用 window 对象的 innerWidth 属性并定期设置 body 元素的 orient 属性（在本例中每 4 秒）检测并设置设备的视口方向：

```
<script type="text/javascript">
var updateLayout = function() {
  if (window.innerWidth != currentWidth) {
    currentWidth = window.innerWidth;
    var orient = (currentWidth == 320) ? "profile" : "landscape";
    document.body.setAttribute("orient", orient);
    window.scrollTo(0, 1);
  }
};

iPhone.DomLoad(updateLayout);
setInterval(updateLayout, 400);
</script> 
```

您可以将上面的代码片段放在您的 iPhone/iPad-ready 网页的 HEAD 中，它会将显示设置为适当的方向设置。

# java - 在 Mac OS X 上运行 Ant 构建时出现“权限被拒绝”错误

> ID：15882012
> 
> 赞同：2
> 
> 时间：2013-04-08T14:38:33.207
> 
> 标签：java, macos, ant, flexunit

我正在尝试从 Ant 运行 FlexUnit 测试。在 Windows 上一切正常，但在 Mac OS X 上，我收到此错误：

```
BUILD FAILED
/Users/ohassan/Projects/mongo/build.xml:347: java.io.IOException: Cannot run program "/Applications/Adobe Flash Builder 4.5/player/mac/11.5/Flash Player Debugger.app" (in directory "/Users/ohassan/Projects/x"): error=13, Permission denied
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
    at java.lang.Runtime.exec(Runtime.java:615)
    at org.flexunit.ant.launcher.commands.player.CustomPlayerCommand.launch(Unknown Source)
    at org.flexunit.ant.tasks.TestRun.run(Unknown Source)
    at org.flexunit.ant.tasks.FlexUnitTask.execute(Unknown Source)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor38.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.io.IOException: error=13, Permission denied
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:135)
    at java.lang.ProcessImpl.start(ProcessImpl.java:130)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1021)
    ... 20 more 
```

这是 Ant 任务：

```
<flexunit swf="${APP_BIN_DIR}/UnitTestingApp.swf" timeout="5000" toDir="${APP_REPORTS_DIR}" haltonfailure="false" verbose="true" localTrusted="false" command="${FLASH_PLAYER}" /> 
```

我给了 777 权限`${APP_BIN_DIR}`，但这`${APP_REPORTS_DIR}`并`Flash Player Debugger.app`没有改变任何东西。我也尝试运行该命令`sudo ant`，但这也对错误没有影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T14:47:46.033

您似乎正在运行名为`.../Flash Player Debugger.app`. 您要做的是在该文件夹中运行二进制文件。我最好的猜测是它的名字`.../Flash Player Debugger.app/Contents/MacOS/Flash Player Debugger`。

使用 Finder 或其他文件浏览器实用程序显示文件夹的内容，`/Applications/Adobe Flash Builder 4.5/player/mac/11.5/Flash Player Debugger.app/Contents/MacOS`以找出可执行文件的名称。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T14:48:08.113

我认为您没有对该目录的所需权限。你需要找出你可以使用的`namei`

# java - Java - 如何打开 URL 并插入 URL 用户名和密码？

> ID：15882018
> 
> 赞同：1
> 
> 时间：2013-04-08T14:38:51.893
> 
> 标签：java, selenium-webdriver

我想学习如何：

第 1 步：打开 URL - 例如 Gmail

第二步：输入用户名和密码，然后按登录。

如何插入用户名和密码并按下登录按钮？

**我需要/必须使用硒吗？**

此代码仅用于打开浏览器（步骤 1）

```
import java.io.IOException;

public class Website
{

public void openWebsite() //throws IOException
{
    try 
    {
        @SuppressWarnings("unused")
Process p = Runtime.getRuntime().exec("cmd /c start http://accounts.google.com/ServiceLogin ");
    }
    catch (IOException e1)
    {
        System.out.println(e1);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:07:10.463

首先，您需要打开 URL。现在您实际上*并没有*打开 URL。您是在询问 Windows 操作系统“您将如何处理`http://accounts.google.com/ServiceLogin`？”

因为是windows，所以会做个*猜测*，大概遵循这样的逻辑：

```
 it sort of looks like a URL, so I'll fire up explorer and 
 ask explorer to do something with it. 
```

这意味着您的代码现在距离获取数据还有几个程序，并且没有一个中间程序（因为它们不是为此而构建的）将输入需求传输到您的程序中。

您需要做的是避免要求其他程序打开URL，这太有问题了。首先，他们可能会弄错，其次他们永远不知道如何询问您的意见。直接打开 URL：

```
import java.net.URL;

... somewhere in the code ...

  URL url = new URL("http://accounts.google.com/ServiceLogin");
  InputStream in = url.openStream(); 
```

在各种 java.net.URL 教程上进行一些谷歌搜索，您很快就会找到处理特定凭证挑战所需的正确技术组合。 [这是一个资源，但您似乎需要做一些功课才能让他们说的对您有意义](https://stackoverflow.com/questions/496651/connecting-to-remote-url-which-requires-authentication-using-java)。如果你绊倒了，至少你下次会有更好、更具体的问题要问（别忘了发布你的源代码）。

# eclipse - 为什么方面想要返回类型 int？

> ID：15882026
> 
> 赞同：0
> 
> 时间：2013-04-08T14:39:17.323
> 
> 标签：eclipse, aspectj

以下方面给了我一个“此方法必须返回 int 的结果类型”

```
package CH.ifa.draw.framework;

public aspect Trace {

     after() returning (ConnectionFigure figure): call(*.new(..)) {
         System.out.println("test");
     }
} 
```

我期待 void 作为结果类型。

**更新**

我希望每次创建一个实现 de ConnectionFigure 接口的类时都会调用这个切入点

**更新 2**

```
package CH.ifa.draw.framework;

public aspect Trace {

     after(): call(ConnectionFigure+.new(..)) {
         System.out.println("trace creation figure");
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:13:04.887

您的方面建议不正确，或者至少不完整。`returning (ConnectionFigure figure)`应该给你一个错误，因为参数在切入点表达式中是未绑定的。尝试删除该组件并查看它是否适合您。

# spring - 弹簧测试在测试后不回滚

> ID：15882029
> 
> 赞同：0
> 
> 时间：2013-04-08T14:39:21.780
> 
> 标签：spring, unit-testing, transactions, h2, spring-test

我有一系列使用 Spring 测试和 H2 内存数据库的集成测试。我注意到 h2 数据库在每次测试后都不会回滚。

这是我的配置：

```
@RunWith(SpringJUnit4ClassRunner.class)
public class BlaServiceIntegrationTest extends AbstractTest {

@Autowired
private BlaService blaService;

@Test()
public void doBla() {
    // some other test that writes in the database
}

@Test()
public void saveNewBla() {
    assertEquals(0, findAllBlas().size()); // <-- fails, the db is not empty.
             // the previous test did not roll back
} 
```

然后是 AbstractTest：

```
@ContextConfiguration(locations = { "classpath:test-with-db.xml" })
@TransactionConfiguration(defaultRollback = true)
@Transactional()
public class AbstractTest {

private static final Logger LOG = LoggerFactory.getLogger(AbstractTest.class);

@Autowired
protected SessionFactory sessionFactory;

public AbstractTest() {
    super();
}

@SuppressWarnings("unchecked")
protected List<Bla> findAllBlas() {
    return sessionFactory.getCurrentSession().createCriteria(Bla.class).list();
} 
```

弹簧配置：

```
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource "
    p:driverClassName="${jdbc.driverClassName}" p:url="${jdbc.url}"
    p:username="${jdbc.username}" p:password="${jdbc.password}">
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource"></property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl}</prop>
            <!-- <prop key="hibernate.use_sql_comments">false</prop> -->

        </props>
    </property>
    <property name="packagesToScan" value="com.company.bla.back.domain"></property>
</bean>

<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"
    p:sessionFactory-ref="sessionFactory">
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="hibernateConfiguration" factory-bean="&amp;sessionFactory"
    factory-method="getConfiguration" /> 
```

以及特定于测试的 config.properties：

```
################### MySQL JDBC Configuration ##################
jdbc.driverClassName=org.h2.Driver
jdbc.url=jdbc:h2:mem;DB_CLOSE_ON_EXIT=FALSE
jdbc.username=
jdbc.password=

################### Hibernate Configuration ##########################
hibernate.dialect=org.hibernate.dialect.H2Dialect
hibernate.show_sql=false
hibernate.hbm2ddl=create-drop
hibernate.generate_statistics=false 
```

以及正在测试的服务：

```
@Service("blaService")
@Transactional(propagation = Propagation.MANDATORY)
public class BlaServiceImpl implements BlaService { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:00:20.840

没关系，我自己找到了解决方案。这根本不是回滚问题吗？我的 findAllBla() 方法有错误？它需要一个：

```
 .setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY) 
```

# javascript - Image resize to browser without cropping or loosing aspect ratio

> ID：15882031
> 
> 赞同：0
> 
> 时间：2013-04-08T14:39:22.590
> 
> 标签：javascript, jquery, css, image-resizing

I am working on a responsive template. I have pages with images and I want them to look like this : [http://www.chanel.com/fr_FR/](http://www.chanel.com/fr_FR/)

I can't figure out a css way to achieve it so I am trying jquery although I ain't the best jquery coder...

This is what I end up with : html

```
<html>
    <body>
        <div class="text" >
            <p>some text</p>
        <div>
        <div class="image" >
            <img class="adapt" src="my-image.jpeg" alt="my image">
        </div>
    </body>
</html>

 <script type="text/javascript" language="javascript">
        $(document).ready(function() {          
            function imageResize() { 
            var wrapH = $('div.image').height();
            var imgH = $('img.adapt').height();
            var wrapW = $('div.image').width();
            var imgW = $('img.adapt').width();
                $("img.adapt").css("height", (wrapH < imgH) ? wrapH : "auto");
                $("img.adapt").css("width", (wrapW < imgW) ? wrapW : "auto");
            }
            imageResize();
            $(window).bind("resize", function(){
                imageResize();  
            });  
        }); 

  </script> 
```

css

```
div.text {
position : absolute;
width : 40%
left : 0;
top : 0;
}

div.image{
    position: absolute;
    top : 0;
    right : 0;
    left : 40%;
    width : 60%;
    bottom : 150px;
} 
```

This seems to work when I enlarge the browser but when I make it smaler, the image flickers and its ugly...

If some pro jquery coder can explain this problem to me, I would be very graitfull.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:48:40.477

如果您下载谷歌浏览器，再次浏览该页面，并在开发者工具中的资源选项卡下查看，查看作者的 styles.css 文件。在第 800 行及以下，您会看到作者正在使用媒体查询来获得您正在寻找的响应式感觉。作者还利用百分比来设计元素和各种项目的宽度、高度、边距和填充。还不需要 jQuery。只需首先进入媒体查询的世界，感受真正的响应式设计。然后当你感到舒服时，继续通过 jQuery 应用一些创意动画来增加趣味。

# android - 如何布局？使用相对布局还是线性布局？

> ID：15882035
> 
> 赞同：0
> 
> 时间：2013-04-08T14:39:27.800
> 
> 标签：android

我在这里为 Android 布局而苦苦挣扎，这看起来应该很简单，但并不快乐，一个简单的线性布局会导致显示的图像：

![在此处输入图像描述](https://i.stack.imgur.com/Nv2S2.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:minWidth="25px"
    android:minHeight="100dp">
    <TextView
        android:text="Last Game"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/textView1"
        android:gravity="center_horizontal"
        android:background="#003300" />
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#ffffff">
        <ImageView
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="80dp"
            android:id="@+id/imageView1"
            android:layout_gravity="left"
            android:layout_height="80dp" />
        <TextView
            android:textColor="#000000"
            android:text="WR"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:id="@+id/textView2"
            android:gravity="right"
            android:paddingRight="5dp" />
        <View
            android:background="#000000"
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:id="@+id/view1"
            android:layout_gravity="center_horizontal" />
        <TextView
            android:textColor="#000000"
            android:text="LR"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:id="@+id/textView3"
            android:gravity="left"
            android:paddingLeft="5dp" />
        <ImageView
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_gravity="right"
            android:layout_width="80dp"
            android:id="@+id/imageView1"
            android:layout_height="80dp" />
    </LinearLayout>
</LinearLayout> 
```

我想要的是左边的图像在左边距（左对齐）右边的图像在右边距（右对齐）垂直条总是居中而WR右对齐靠近中心和LR左对齐靠近中心。

我应该使用相对布局吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:42:26.023

您需要最适合您要求的 FrameLayout 使用下面的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:background="#ffffff"
          android:minWidth="25px"
          android:minHeight="100dp">
<TextView
        android:text="Last Game"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/textView1"
        android:gravity="center_horizontal"
        android:background="#003300" />
<FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#ffffff">
    <ImageView
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="80dp"
            android:id="@+id/imageView1"
            android:layout_gravity="left"
            android:layout_height="80dp" />
    <TextView
            android:textColor="#000000"
            android:text="WR"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:id="@+id/textView2"
            android:layout_gravity="center_horizontal"
            android:layout_marginLeft="25dp"
            />
    <View
            android:background="#000000"
            android:layout_width="1dp"
            android:layout_height="80dp"
            android:id="@+id/view1"
            android:layout_gravity="center_horizontal" />
    <TextView
            android:textColor="#000000"
            android:text="LR"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:id="@+id/textView3"
            android:layout_gravity="center_horizontal"
            android:layout_marginRight="25dp"
            />
    <ImageView
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_gravity="right"
            android:layout_width="80dp"
            android:id="@+id/imageView1"
            android:layout_height="80dp" />
</FrameLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:46:41.033

我会。您可以使用

```
android:layout_alignParentLeft="true" 
```

和

```
android:layout_alignParentRight="true" 
```

对于图像，分别。然后使用

```
android:layout_centerHorizontal="true" 
```

为您的线路和

```
android:layout_toLeftOf="id"  // enter id of line 
```

和

```
android:layout_toRightOf="id" // enter id of line 
```

将您`TextView`的 s 放在该行的任一侧并`padding`根据需要添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:46:09.483

相对布局。使左侧图像 layout_alignParentLeft=true。使中心线 layout_centerHorizo​​ntal=true。使 WR layout_align_toLeftOf="id of line" 并具有重力="right"。在另一侧以相反的方向重复。

# ssis - 从 SSIS 目录执行的包中获取返回/退出代码

> ID：15882037
> 
> 赞同：4
> 
> 时间：2013-04-08T14:39:30.790
> 
> 标签：ssis, return-code

我是 SSIS/SQL 的新手，因此以下命名参考可能不正确，但我希望传达问题的要点

我使用的调度工具在 SQL 2012 中执行已部署的 SSIS 包，该工具需要指示 SSIS 包何时失败，然后停止运行任何后续调度作业。

该项目使用 SQL 2012 中的 SSIS 项目部署模型。部署的 SSIS 包然后由第 3 方调度工具调用。在 SSIS 目录中，我们使用 Execute 选项生成 SQL 脚本以传递给调度程序。编辑此脚本以添加一个参数以确保作业同步运行（即调用者一直等待直到作业完成）。SQL 脚本是从调度工具运行的，并且只会在完成后移动到下一个作业。

问题是当 SSIS 包失败时调度工具没有收到返回码。如果 SSIS 包失败，它包含一个捕获和发送带有错误通知的电子邮件的步骤，因此我们确实对失败有一个看法。但是，无论作业是否成功完成，调度流程中的任何相关作业也会运行。是否有参数强制将返回代码发送到第三部分调度工具？

用于执行包的脚本示例：

```
*Declare @execution_id bigint
EXEC [SSISDB].[catalog].[create_execution] @package_name=N'Extract_Job.dtsx',  @execution_id=@execution_id OUTPUT, @folder_name=N'ETL', @project_name=N'ETL', @use32bitruntime=False, @reference_id=Null
Select @execution_id
DECLARE @var0 smallint = 1
EXEC [SSISDB].[catalog].[set_execution_parameter_value] @execution_id,  @object_type=50, @parameter_name=N'LOGGING_LEVEL', @parameter_value=@var0
EXEC [SSISDB].[catalog].[set_execution_parameter_value] @execution_id,  @object_type=50, @parameter_name=N'SYNCHRONIZED',  @parameter_value= 1; -- turn on synchronized execution
EXEC [SSISDB].[catalog].[start_execution] @execution_id
GO* 
```

我尝试过的事情

*   使用 DTSEXEC 命令。但是，这不会发送返回码并且也同步运行，它需要同步运行
*   第 3 方调度程序有一个用于 SSIS 目录的插件，但有一个未解决的错误，因此不适用于当前版本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-10T22:45:05.860

在存储过程中使我的同步。使用了以下

```
EXEC [SSISDB].[catalog].[create_execution]
@package_name = N'FixProductType.dtsx', 
@execution_id = @execution_id OUTPUT, 
@folder_name = N'BI', 
@project_name = N'DataCleaning',
@use32bitruntime = False;

EXEC [SSISDB].[catalog].[set_execution_parameter_value] 
@execution_id, 
@object_type = 50, 
@parameter_name = N'LOGGING_LEVEL', 
@parameter_value = 1;

EXEC [SSISDB].[catalog].[start_execution] @execution_id;

DECLARE @status AS BIGINT = 1;
WHILE(@status = 1 OR @status = 2 OR @status = 5 OR @status= 8)
BEGIN
PRINT @status
PRINT 'waiting 5 seconds for Package to finish'
WAITFOR DELAY '00:00:5';

SET @status = (SELECT [Status] FROM SSISDB.[catalog].[executions]
        WHERE execution_id = @execution_id);
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-04T15:54:57.500

虽然使用 T-SQL 执行 SSIS 包似乎确实有效，但似乎 DTExec 仍然更合适和稳定。我发现使用新版本的 DTExec 确实有一个选项（文档很少）来传递参数以允许同步处理。使用此方法还允许返回退出代码，这是我在使用 T-SQL 选项时遇到的问题。

**脚本示例：**

```
DTExec.exe /ISSERVER "\SSISDB\project\package_name.dtsx" /SERVER "server_name" /Par "$ServerOption::SYNCHRONIZED(Boolean)";True 
```

旧版本的 dtexec 将不支持新选项，如果两者都在服务器上可用，请确保您正在执行新版本。要检查哪个版本在搜索路径中（默认），请使用“WHERE DTEXEC”。键入“DTEXEC /？” 并检查新选项是否出现在帮助文本中，如果没有，请在命令执行前加上正确的路径位置。

*新版本位置*

C:\Program Files\Microsoft SQL Server\110\DTS\Binn\DTExec.exe

*旧版本位置*

C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\DTExec.exe

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:25:34.527

你可以使用`[catalog].[executions]`视图和`@execution_id`这篇文章中解释的：

[http://sqlblog.com/blogs/jamie_thomson/archive/2011/07/16/ssis-logging-in-denali.aspx](http://sqlblog.com/blogs/jamie_thomson/archive/2011/07/16/ssis-logging-in-denali.aspx)

得到执行结果？

通常我希望`start_execution`存储过程会返回一个结果，但 doco 并没有指出这一点。不过试一试也无妨。

```
DECLARE @Result INT
EXEC @Result = [SSISDB].[catalog].[start_execution] @execution_id
SELECT @Result 
```

# javascript - Javascript：全局元素焦点监听器

> ID：15882045
> 
> 赞同：13
> 
> 时间：2013-04-08T14:40:00.497
> 
> 标签：javascript

我正在尝试设置一个侦听器来侦听所有焦点事件。特别是我试图在任何时候输入或文本框获得焦点。根据一些研究，实现这一目标的广泛接受的方法是这样的：

```
document.body.onfocus = function(event) {
   //Check the event.target for input/textbox
   //Do something
}; 
```

但是 document.body.onfocus 似乎永远不会触发。我认为这可能是因为该文档实际上并没有获得焦点所以我尝试了：

```
document.body.focus(); 
```

最初“设置”焦点，但这也不起作用。

关于如何在所有输入/文本框上收听焦点事件而不直接在元素本身上实际设置事件的任何想法？请只使用香草 javascript，我没有使用框架。

根据接受的答案，这里有一些工作代码：

```
var focusHandler = function(event) {
    var type = event.target.nodeName.toLowerCase();
    if(type == 'input' || type == 'textarea') {
        //Do something
    }
};
document.body.addEventListener('focus', focusHandler, true); //Non-IE   
document.body.onfocusin = focusHandler; //IE 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T14:51:04.057

由于某些事件（焦点、模糊、变化）不会冒泡，我建议您尝试一下`Event Capturing`。首先`onfocus`不适用于此，因此您必须使用`addEventListener`可以在第三个参数中指定使用的委托模式的位置。查看[MDN](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)以了解`addEventListener`.

并查看[本文](http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html)以获取有关委派焦点事件的更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T14:44:02.907

该[`focus`事件](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-focus)不会从元素冒泡到它们的祖先元素，因此您不能使用事件委托（挂钩它`body`并为 的所有后代看到它`body`）来检测它。

有一个较新的事件[`focusin`](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-focusIn)（微软的一项创新，现在也可以在其他浏览器中使用），它确实会冒泡，因此这可能对您有用，具体取决于您想要支持的浏览器。

# c# - C#基于用户输入的多维数组排序

> ID：15882046
> 
> 赞同：0
> 
> 时间：2013-04-08T14:40:01.437
> 
> 标签：c#, sorting

如何在 C# 中对二维数组进行排序

我已经查看了这个问题的其他答案，但他们并没有完全满足我的需要。

数组是`variable height * 5 across`

该数组包含字符串

我需要根据任一列对数组进行排序，例如按字母顺序对第三列进行排序，但是必须更新所有其他列。

有谁知道快速简便的解决方案？

我的代码一团糟，这是一个缩短的版本：

```
string[,] tmp = new string[2, 3];//this is filled with strings
string y = Console.ReadLine();
int x = Convert.ToInt32(y);

// sort tmp based on x column 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:43:49.313

[如何在 C# 中对二维数组进行排序？](https://stackoverflow.com/questions/232395/how-do-i-sort-a-two-dimensional-array-in-c)通过将数据读入数据表，然后使用对象的方法进行排序，包含对此的可能解决方案：

```
// assumes stringdata[row, col] is your 2D string array
DataTable dt = new DataTable();
// assumes first row contains column names:
for (int col = 0; col < stringdata.GetLength(1); col++)
{
    dt.Columns.Add(stringdata[0, col]);
}
// load data from string array to data table:
for (rowindex = 1; rowindex < stringdata.GetLength(0); rowindex++)
{
    DataRow row = dt.NewRow();
    for (int col = 0; col < stringdata.GetLength(1); col++)
    {
        row[col] = stringdata[rowindex, col];
    }
    dt.Rows.Add(row);
}
// sort by third column:
DataRow[] sortedrows = dt.Select("", "3");
// sort by column name, descending:
sortedrows = dt.Select("", "COLUMN3 DESC"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:10:12.090

因此，首先我们要将多维数组转换为表示行的一维数组序列，以便每一行都可以作为一个单元进行操作：

```
public static IEnumerable<T[]> GetRows<T>(T[,] array)
{
    for (int i = 0; i < array.GetLength(0); i++)
    {
        T[] row = new T[array.GetLength(1)];
        for (int j = 0; j < row.Length; j++)
        {
            row[j] = array[i, j];
        }
        yield return row;
    }
} 
```

然后我们还需要一个方法，在我们完成后执行相反的操作以获取多维数组：

```
public static T[,] ToMultiDimensionalArray<T>(T[][] rows)
{
    T[,] output = new T[rows.Length, rows[0].Length];

    for (int i = 0; i < rows.Length; i++)
        for (int j = 0; j < rows[0].Length; j++)
        {
            output[i, j] = rows[i][j];
        }
    return output;
} 
```

现在我们只需要对一系列数组进行排序，Linq 让这变得非常简单：

```
tmp = ToMultiDimensionalArray(GetRows(tmp)
    .OrderBy(row => row[2]).ToArray()); 
```

# windows - .bat file not working

> ID：15882050
> 
> 赞同：0
> 
> 时间：2013-04-08T14:40:07.543
> 
> 标签：windows, batch-file, scheduled-tasks

I have to call two bat files.

One name `cbpp_job` and other `upload.bat`.

In first .bat files, I have called `cbppservice.exe` and after that I have call `upload.bat`.

**cbpp_job.bat**

```
call d:\csdb_exe\CBPPService.exe
call ftp -n -s:"d:\csdb\Success\upload.bat" xxxx.produrl.com 
```

**upload.bat**

```
user XXXXXX
XXXXXXXXX

PUT ZA1P.FTP.CBPP.INTRFACE.GRP(+1) 'ZA1P.FTP.CBPP.INTRFACE.GRP(+1)'
BYE

EXIT 
```

But when I call `csdb_job` through command prompt it works well. When I scheduled it in task scheduler it only calls `cbppservice.exe` and it is not doing the `ftp`.

The operating System is windows server 2008.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:04:43.610

如果您的事件查看器没有向您显示脚本失败的原因，请尝试修改**cbpp_job.bat**以将 stderr 重定向到日志文件。

```
(
    d:\csdb_exe\CBPPService.exe
    ftp -n -s:"d:\csdb\Success\upload.bat" xxxx.produrl.com
) 2>"c:\csdbtask.log" 
```

也许这会帮助你弄清楚为什么任务调度程序失败了。

# jquery - I'm trying to add multiple RGraphs canvases to website

> ID：15882057
> 
> 赞同：0
> 
> 时间：2013-04-08T14:40:29.107
> 
> 标签：jquery, rgraph

i want to display a pie chart against multiple profiles (a list created from mysql database) on the same page. I am currently using iframes to call in the pie graph from another page but is there a better way to do this? Each chart has different values. Is it possible to create a function on the canvas?

```
<canvas id="cvs" width="100" height="100" >[No canvas support]</canvas>
    <script>
        window.onload = function ()
        {
            var donut = new RGraph.Pie('cvs', [17,40,25,8]);
            donut.Set('chart.variant', 'donut');
            donut.Set('chart.tooltips', ['Standard','Location','Social']);
            donut.Set('chart.strokestyle', 'transparent');
            donut.Set('chart.exploded', 2);

            donut.Set('chart.gutter.left', 5);
            donut.Set('chart.gutter.top', 5);
            donut.Set('chart.gutter.right', 5);
            donut.Set('chart.gutter.bottom', 5);

            donut.Set('chart.colors', ['rgba(222,82,49,0.15)','rgba(222,82,49,0.40)','rgba(222,82,49,0.80)','rgba(222,82,49,0)']);

            donut.Draw();
        }

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T14:04:52.597

是的，您可以在同一画布上显示不同的图表。

在可下载的存档中有一个演示，它显示了这个名为：

```
demos/bar-css3-animations.html 
```

您可以在此处下载 RGraph 存档：

[https://www.rgraph.net/download.html#stable](https://www.rgraph.net/download.html#stable)

您可以拥有创建和显示每个图表的函数：

```
function ShowChart1 ()
{
    RGraph.Reset(canvas);

    // Create and show first chart
}

function ShowChart2 ()
{
    RGraph.Reset(canvas);

    // Create and show second chart
} 
```

# php - 如何在一个数组中连接两个字段？

> ID：15882060
> 
> 赞同：0
> 
> 时间：2013-04-08T14:40:36.597
> 
> 标签：php, arrays

我有以下代码：

```
$result = mysql_query("SELECT first_name, last_name, employeeID FROM ecc_employee WHERE first_name != '' ");

$resources = array();

while ($row=mysql_fetch_array($result)){            
    $name = ($row['first_name']);
    $id =  $row['employeeID'];

    $resources[] = array(
    'name' =>  "$name",
    'id' => "$id"
    ); 
```

我需要 $name 同时具有名字和姓氏。我该怎么做？

我将如何声明 $name =

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:42:24.150

```
$name = $row['first_name'].' '.$row['last_name']; 
```

或者，您可以按照建议使用 mysql CONCAT 函数。更多信息在这里：[http ://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:42:28.677

您可以使用[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)功能：

```
SELECT ...
       CONCAT(first_name, " ", last_name) AS name
       ... 
```

在您的代码中：

```
$result = mysql_query("SELECT CONCAT(first_name, " ", last_name) AS name, employeeID FROM ecc_employee WHERE first_name != '' "); 
```

并调用它：

```
$row['name'] 
```

您还可以命名`employeeID`为`id`跳过在 while 循环中重新分配数组键：

```
$result    = mysql_query("SELECT CONCAT(first_name, " ", last_name) AS name, employeeID AS id FROM ecc_employee WHERE first_name != '' ");
$resources = array();

while ($row = mysql_fetch_array($result)){            
    $resources[] = $row;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:48:00.227

使用[PDO](https://stackoverflow.com/tags/pdo/info)

```
// of course connect goes first
$sql = "SELECT CONCAT(first_name, ' ', last_name) AS name, employeeID AS id 
        FROM ecc_employee WHERE first_name != ''";
$stm = $pdo->prepare($sql);
$stm->execute();
$resources = $stm->fetchAll(); 
```

# java - java.lang.RuntimeException：在注册表中找不到应用程序“org.eclipse.ui.ide.workbench”

> ID：15882062
> 
> 赞同：8
> 
> 时间：2013-04-08T14:40:42.307
> 
> 标签：java, android, eclipse, eclipse-plugin, installation

我正在使用 Eclipse v21.10.1-569685 和 JDK 版本 1.7.0_13-b20 当我下载新更新（帮助-> 安装新软件）之后，Eclipse 要求我重新启动软件，但我遇到了这个错误：

```
!SESSION 2013-04-10 06:49:45.348 -----------------------------------------------
        eclipse.buildId=v21.1.0-569685
        java.version=1.7.0_13
        java.vendor=Oracle Corporation
        BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
        Framework arguments:  -product com.android.ide.eclipse.adt.package.product
        Command-line arguments:  -os win32 -ws win32 -arch x86 -product com.android.ide.eclipse.adt.package.product

        !ENTRY org.eclipse.osgi 2 0 2013-04-10 06:49:47.671
        !MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
        !SUBENTRY 1 org.eclipse.osgi 2 0 2013-04-10 06:49:47.671
        !MESSAGE Bundle reference:file:plugins/org.eclipse.e4.ui.workbench.addons.swt_0.10.1.v20120827-151636.jar was not resolved.
        !SUBENTRY 2 org.eclipse.e4.ui.workbench.addons.swt 2 0 2013-04-10 06:49:47.672
        !MESSAGE Missing required bundle org.eclipse.e4.ui.model.workbench_0.9.1.
        !SUBENTRY 1 org.eclipse.osgi 2 0 2013-04-10 06:49:47.672
        .
        .
        .
        .

        !ENTRY org.eclipse.osgi 4 0 2013-04-10 06:49:47.941
        !MESSAGE Application error
        !STACK 1
        java.lang.RuntimeException: Application "org.eclipse.ui.ide.workbench" could not be found in the registry. The applications available are: org.eclipse.equinox.app.error, org.eclipse.equinox.p2.director, org.eclipse.equinox.p2.garbagecollector.application, org.eclipse.equinox.p2.publisher.InstallPublisher, org.eclipse.equinox.p2.publisher.EclipseGenerator, org.eclipse.equinox.p2.publisher.ProductPublisher, org.eclipse.equinox.p2.publisher.FeaturesAndBundlesPublisher, org.eclipse.equinox.p2.reconciler.application, org.eclipse.equinox.p2.repository.repo2runnable, org.eclipse.equinox.p2.repository.metadataverifier, org.eclipse.equinox.p2.artifact.repository.mirrorApplication, org.eclipse.equinox.p2.metadata.repository.mirrorApplication, org.eclipse.equinox.p2.updatesite.UpdateSitePublisher, org.eclipse.equinox.p2.publisher.UpdateSitePublisher, org.eclipse.equinox.p2.publisher.CategoryPublisher, org.eclipse.update.core.standaloneUpdate, org.eclipse.update.core.siteOptimizer, org.eclipse.ant.core.antRunner, org.eclipse.cdt.codan.core.application, org.eclipse.cdt.core.GeneratePDOM, org.eclipse.help.base.infocenterApplication, org.eclipse.help.base.helpApplication, org.eclipse.help.base.indexTool, org.eclipse.jdt.apt.core.aptBuild, org.eclipse.jdt.core.JavaCodeFormatter, org.eclipse.jdt.core.JavaIndexer.
            at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248)
            at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
            at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
            at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
            at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
            at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
            at java.lang.reflect.Method.invoke(Unknown Source)
            at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
            at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
            at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

我应该怎么做才能运行 Eclipse？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:34:14.397

好的，谢谢大家，我找到了解决方案，如下所示：

1.  控制面板→查看高级系统设置→高级选项卡→环境变量
2.  现在你必须做两件事：

    1.  创建一个新变量（单击 New 按钮）：

        *   变量的名称：`JAVA_HOME`
        *   变量值：`C:\Program Files\Java\[your Java Version]`
    2.  编辑 Path 变量并将其添加到该变量的末尾：

        ```
        ;%JAVA_HOME%\bin 
        ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-20T13:47:18.700

删除（或只是移动到一个临时文件夹）您的 $home/.eclipse 文件夹（即 config 文件夹）。

它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T17:58:43.387

“org.eclipse.ui.ide.workbench”应用程序包含在 org.eclipse.platform 插件中。由于某种原因，此插件未包含在您的实例中。也许，安装 ADT 无效。尝试恢复旧配置（帮助>关于>安装详细信息>安装历史）并再次重新安装 ADT。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:25:13.147

也许 eclipse -clean 会有所帮助？首先从 Help->Install->What is Installed 中删除插件 adt，然后从 Market place 中安装 adt，使用 Eclipse for Java 或 C++ 开发人员（使用 Java 模式）。

# c# - JAVA to C# conversion - PriorityQueue

> ID：15882069
> 
> 赞同：3
> 
> 时间：2013-04-08T14:41:12.923
> 
> 标签：c#, java, list

This question was posted here ([https://stackoverflow.com/questions/15881110/java-to-c-sharp-conversion](https://stackoverflow.com/questions/15881110/java-to-c-sharp-conversion)) by a team member but was closed due to the community not having enough information.

Here's my attempt to revive such a question being, **How would I go about converting this java extract into C#?**

Java Extract:

```
PriorityQueue<PuzzleNode> openList = new PriorityQueue<PuzzleNode>
           (1,
            new Comparator<PuzzleNode>(){
                public int compare(PuzzleNode a, PuzzleNode b){
                    if (a.getPathCost() > b.getPathCost())
                        return 1;
                    else if (a.getPathCost() < b.getPathCost())
                        return -1;
                    else
                        return 0;
                    }
                }
            ); 
```

A sortedList has been thought about but to no avail as I'm unsure how to code it.

I've also tried creating a standard list with a method:

```
List<PuzzleNode> openList = new List<PuzzleNode>();

//Method to sort the list
public int CompareFCost(PuzzleNode a, PuzzleNode b)
        {
            if (a.getPathCost() > b.getPathCost())
            {
                return 1;
            }
            else if (a.getPathCost() > b.getPathCost())
            {
                return -1;
            }
            else
                return 0;
        }//end CompareFCost 
```

and then calling: openList.Sort(CompareFCost); at appropriate locations, however this doesn't work.

**What the code is used for?** It orders the objects 'PuzzleNode' depending on a score (pathCost) I have set else where in the program. A while loop then operates and pulls the first object from the list. The list needs to be ordered otherwise an object with a higher pathCost could be chosen and the while loop will run for longer. The objective is to pull the lower pathCost from the list.

I ask for a conversion because it works in Java & the rest of the code has pretty much originated from Java.

Any takers? If you need further info I'm happy to discuss it further.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:00:30.920

我想你可以像这样滥用 SortedList ：

```
var openList=new SortedList<PuzzleNode,PuzzleNode>(
    //assumes .Net4.5 for Comparer.Create
    Comparer<PuzzleNode>.Create((a,b)=>{
        if (a.getPathCost() > b.getPathCost())
                    return 1;
                else if (a.getPathCost() < b.getPathCost())
                    return -1;
                else
                    return 0;

    }));
openList.Add(new PuzzleNode());
foreach(var x in openList.Keys)
{
    //ordered enumeration
}
var firstItem = openList.Dequeue(); 
```

通过创建一些扩展方法使事情更像队列

```
static class SortedListExtensions
{
    public static void Add<T>(this SortedList<T,T> list,T item)
    {
        list.Add(item,item);
    }
    public static T Dequeue<T>(this SortedList<T,T> list)
    {
        var item=list.Keys.First();
        list.Remove(item);
        return item;
    }
    //and so on...
} 
```

TBH，我可能会在对您原始问题的评论中寻求@valverij 的答案，但如果重复排序的成本过高，这可能就是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:13:14.700

> **代码是用来做什么的？**它根据我在程序中其他位置设置的分数（pathCost）对对象“PuzzleNode”进行排序。然后一个 while 循环运行并从列表中拉出第一个对象。需要对列表进行排序，否则可以选择具有更高 pathCost 的对象，并且 while 循环将运行更长时间。目标是从列表中拉出较低的 pathCost。

*   1：就是[`LinQ`](http://msdn.microsoft.com/es-es/library/bb397897.aspx)为了这个。您通常不会在 C# 中做任何这些事情，因为 LinQ 会为您做这些事情。

    *   它根据分数（pathCost）对对象“PuzzleNode”进行排序

        这是通过 LinQ 的`Enumerable.OrderBy()`扩展实现的：

        ```
        //Assuming PathCost is a property of a primitive type (int, double, string, etc)
        var orderedlist = list.OrderBy(x => x.PathCost); 
        ```

    *   目标是从列表中拉出较低的 pathCost。

        这是使用 LinQ`Enumerable.Min()`或`Enumerable.Max()`扩展来实现的。

        ```
        //Same assumption as above.
        var puzzlewithlowestpath = list.Min(x => x.PathCost); 
        ```

* * *

这是我关于 java 与 C# 相比不完整的咆哮，因为它缺少类似的东西`LinQ`，但我现在不会在 StackOverflow 中做任何咆哮。

* * *

我想提到的另一件事是，如果您使用 C# 进行编码，则最好使用[C# Naming Conventions](http://msdn.microsoft.com/en-us/library/vstudio/ms229045%28v=vs.100%29.aspx)，其中[Properties](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)是 ProperCased：

```
public int PathCost {get;set;}
//or double or whatever 
```

代替：

```
public int getPathCost()
public int setPathCost() 
```

# dll - CUDA Expression Templates and Just in Time Compilation (JIT)

> ID：15882070
> 
> 赞同：2
> 
> 时间：2013-04-08T14:41:16.237
> 
> 标签：dll, cuda, expression, jit, ptx

I have some questions about Just-In-Time (JIT) compilation with CUDA.

I have implemented a library based on Expression Templates according to the paper

J.M. Cohen, "Processing Device Arrays with C++ Metaprogramming", GPU Computing Gems - Jade Edition

It seems to work fairly good. If I compare the computing time of the matrix elementwise operation

D_D=A_D*B_D-sin(C_D)+3.;

with that of a purposely developed CUDA kernel, I have the following results (in parentheses, the matrix size):

time [ms] hand-written kernel: 2.05 (1024x1024) 8.16 (2048x2048) 57.4 (4096*4096)

time [ms] LIBRARY: 2.07 (1024x1024) 8.17 (2048x2048) 57.4 (4096*4096)

The library seems to need approximately the same computing time of the hand-written kernel. I'm also using the C++11 keyword auto to evaluate expressions only when they are actually needed, according to [Expression templates: improving performance in evaluating expressions?](https://stackoverflow.com/questions/15856122/expression-templates-improving-performance-in-evaluating-expressions). My first question is

*1\. Which kind of further benefit (in terms of code optimization) would JIT provide to the library? Would JIT introduce any further burdening due to runtime compilation?*

It is known that a library based on Expression Templates cannot be put inside a .dll library, see for example [http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/00edbe1d-4906-4d91-b710-825b503787e2](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/00edbe1d-4906-4d91-b710-825b503787e2). My second question is:

*2\. Would JIT help in hiding the implementation to a third-party user? If yes, how?*

The CUDA SDK include the ptxjit example in which the ptx code is not loaded at runtime, but defined at compile time. My third question is:

*3\. How should I implement JIT in my case? Are there examples of JIT using PTX loaded at runtime?*

Thank you very much for any help.

**EDIT following Talonmies' comment**

From the [Cuda kernel just-in-time (jit) compilation possible?](https://stackoverflow.com/questions/13567123/cuda-kernel-just-in-time-jit-compilation-possible) post, it reads that

> cuda code can be compiled to an intermediate format ptx code, which will then be jit-compiled to the actual device architecture machine code at runtime

A doubt I have is whether the above can be applied to an Expression Templates library. I know that, due to instantiation problems, a CUDA/C++ template code cannot be compiled to a PTX. But perhaps if I instantiate all the possible combinations of Type/Operators for Unary and Binary Expressions, at least a part of the implementation can be compiled (and then masked to third-party users) to PTX which can be in turn JIT compiled to the architecture at hand.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T00:37:58.327

我认为您应该研究[OpenCL](http://en.wikipedia.org/wiki/OpenCL)。它提供了一个类似 JIT 的编程模型，用于在 GPU 上创建、编译和执行计算内核（全部在运行时）。

我在[Boost.Compute](https://github.com/kylelutz/compute)中采用了一种类似的基于表达式模板的方法，它允许库通过将编译型 C++ 表达式转换为 OpenCL 内核代码（这是 C 的一种方言）来支持 C++ 模板和通用算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T10:05:06.690

[VexCL](https://github.com/ddemidov/vexcl)最初是作为 OpenCL 的表达式模板库，但从 v1.0 开始它也支持 CUDA。它对 CUDA 所做的正是 CUDA 源代码的 JIT 编译。`nvcc`在后台调用编译器，编译后的 PTX 存储在离线缓存中，并在程序的后续启动时加载。有关如何执行此操作的信息，请参阅[CUDA 后端源代码。](https://github.com/ddemidov/vexcl/tree/master/vexcl/backend)[compiler.hpp](https://github.com/ddemidov/vexcl/blob/master/vexcl/backend/cuda/compiler.hpp)应该是您最感兴趣的。

# c# - 如何在winforms中显示数据库中的元素列表？

> ID：15882071
> 
> 赞同：-1
> 
> 时间：2013-04-08T14:41:17.317
> 
> 标签：c#, winforms, entity-framework

所以，我有一个数据库（SqlServer）和一个包含列（**名字、姓氏、图片**）的表，当我按下按钮来获取我的元素列表时我想要（就像**WPF中的****用户控件**），在其他我想用名字和姓氏显示每个图像。因此，如果有人有任何想法，我将不胜感激。

 **我需要一些类似的东西： [在此处输入链接描述](http://www.mediafire.com/view/?u8he3l5huk86nj6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:10:28.577

如果您询问如何从 SQL Server 数据库中获取图片，您应该查看以下链接：

[http://www.akadia.com/services/dotnet_read_write_blob.html](http://www.akadia.com/services/dotnet_read_write_blob.html)

它还展示了如何通过 WinForms 中的 PictureBox 控件显示它。

如果您询问如何在 winforms 中动态创建控件，请尝试以下操作：

[http://support.microsoft.com/kb/319266](http://support.microsoft.com/kb/319266)

希望能帮助到你，**

# python - 为什么“除外”中未定义的名称不会引发 NameError？

> ID：15882073
> 
> 赞同：5
> 
> 时间：2013-04-08T14:41:19.160
> 
> 标签：python

今天我很惊讶地看到以下内容没有例外（至少在 Python 2.7.3 中）：

```
>>> try:
...     pass
... except ThingThatDoesNotExist:
...     print "bad"
...
>>> 
```

我原以为这应该`NameError`在 REPL 中引发 a ，类似于以下内容：

```
>>> x = ThingThatDoesNotExist
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'ThingThatDoesNotExist' is not defined 
```

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:47:21.617

这不会引发异常的相同原因：

```
>>> True or ThingThatDoesNotExist 
```

Python 在需要评估的那一刻准确地查找名称。不需要评估的名称不会被查找，并且查找失败会引发异常。

# ibm-mobilefirst - Failed to deploy missing security Test

> ID：15882074
> 
> 赞同：0
> 
> 时间：2013-04-08T14:41:20.190
> 
> 标签：ibm-mobilefirst

I have successfully gotten the module 41 sample running with eclipse and the local server. Attempting to deploy on my liberty server returns the error.

Failed to deploy application 'PushApplication-all.wlapp'. : application descriptor uses a security test:PushApplication-strong-mobile-securityTest. However, authentication config xml does not contain a security test element with that name.

I am on Worklight 5.0.5 with a successful app running on the server and now trying to add push notifications. I have checked the war file and it does contain the authentication-config.xml with the specified test.

I saw a smilier post a few momths ago but am unable to find whether it got answered

thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:41:56.963

从它的声音来看，您正在尝试将 .wlapp 部署到已经运行 Worklight 实例的服务器，但该实例在 authenticationConfig.xml 中没有所需的 securityTest 设置

这使我相信您没有将已部署在 Liberty-profile 应用程序服务器中的 .war 文件替换为来自 Push Notifications 项目的 .war 文件，该文件包含最新的 authenticationConfig.xml

# android - 隐藏按钮

> ID：15882077
> 
> 赞同：0
> 
> 时间：2013-04-08T14:41:34.307
> 
> 标签：android

在我的程序中，我有两个`AutoCompleteTextView`a`Button`和 a`TableLayout`来显示某个结果。在这个程序中`TableLayout`是隐藏的，只有在结果生成后才会出现。

我还希望`Button`仅在用户填写后才出现，`AutoCompleteTextView`但在我编写的代码中，它没有按照我想要的方式运行。

```
 calculate = (Button)findViewById(R.id.calculate);
    if(location.getText().toString().length()<1 && destination.getText().toString().length()<1)
    {
        calculate.setVisibility(View.INVISIBLE);
    }
    else
    {
        calculate.setVisibility(View.VISIBLE);
        calculate.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

            if(location.getText().toString().length()<1 || destination.getText().toString().length()<1) 
            {
                Toast.makeText(getApplicationContext(), "Give values before placing a query", Toast.LENGTH_LONG).show();
            }
            else{
                @SuppressWarnings("deprecation")
                String url = "http://maps.googleapis.com/maps/api/distancematrix/json?origins="+URLEncoder.encode(location.getText().toString())+"&destinations="+URLEncoder.encode(destination.getText().toString())+"&unit=metric&mode=driving&sensor=false";
                new ReadDistanceJSONFeedTask().execute(url);
                z=+1;
                isNormal=false;
                supportInvalidateOptionsMenu();
                }
            }
        });

    } 
```

在这段代码中`Button`根本没有出现。有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:44:09.813

我觉得你可能会犯错，试着改变

`if(location.getText().toString().length()<1 && destination.getText().toString().length()<1)`

到

`if(location.getText().toString().length()<1 || destination.getText().toString().length()<1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:52:00.647

您只计算一次按钮的可见性，在开始时，文本肯定是空的，所以按钮消失永远不会返回。听起来您应该[聆听](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)文本中的变化并在它们发生时计算您的按钮可见性。

类似于（假设您的 AotoCompleteTextView 名为 bob）：

```
 bob.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO your button calculation goes here               
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {}

        @Override
        public void afterTextChanged(Editable s) {}
    }); 
```

# android - 在手指画的情况下，Path.quadTo 和 Path.lineTo 有什么区别？

> ID：15882078
> 
> 赞同：2
> 
> 时间：2013-04-08T14:41:36.283
> 
> 标签：android, graphics, drawing

Android 的 APIDemos 中有一个 FingerPaint 演示。下面是手指在屏幕上移动时的代码。

```
private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
} 
```

我注意到这个演示使用了我认为应该是 mPath.lineTo 的 mPath.quadTo，我试过了。下面是我的代码：

```
private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.lineTo(x, y);
        mX = x;
        mY = y;
    }
} 
```

然后我又试了一次，好像没什么区别，为什么谷歌要用quadTo？

我听说在游戏程序中，他们使用 quadTo 来绘制手指画，但为什么呢？请帮助...谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T14:49:10.207

使用二次线（基本上是某种椭圆）的四边形曲线。LineTo 是一条直线。QuadTo 将在它们转动的地方平滑锯齿。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T14:54:01.947

根据[http://developer.android.com/reference/android/graphics/Path.html](http://developer.android.com/reference/android/graphics/Path.html)：

> quadTo(float x1, float y1, float x2, float y2) 从最后一点添加二次贝塞尔曲线，接近控制点 (x1,y1)，并在 (x2,y2) 处结束.. lineTo(float x, float y)从最后一个点到指定点 (x,y) 添加一条线。

看起来 quadTo() 绘制了一条曲线，基于一些二次函数，或者换句话说，抛物线。lineTo() 只是画一条直线。

# java - for 循环点击监听器

> ID：15882079
> 
> 赞同：0
> 
> 时间：2013-04-08T14:41:39.880
> 
> 标签：java, android

这是一个 + 和 - 按钮的 for 循环，它在单击后更改 edittext et[] 中的文本，存在需要将变量 x 声明为 final 但一旦将 x 声明为 final，for 循环中的 x++显示另一个错误，需要在没有 final 的情况下对 x 进行 declade，我该怎么做才能在 onClick 中使用变量 x？

```
 for(int x=0; x<itemAmt; x++){
        btn[0][x].setOnClickListener(new Button.OnClickListener(){
            public void onClick(View v) {

                int num=Integer.parseInt(et[x].getText().toString());
                num++;

            }

        });

        btn[1][x].setOnClickListener(new Button.OnClickListener(){
            public void onClick(View v) {

                int num=Integer.parseInt(et[x].getText().toString());
                num--;

            }

        });
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:43:44.870

作为简单的工作，您可以在循环`final`内声明一个变量并赋值`for``x`

```
 for(int x=0; x<itemAmt; x++){
    final int myX = x;
    btn[0][x].setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v) {

            int num=Integer.parseInt(et[myX].getText().toString());
            num++;

        }

    });

    btn[1][x].setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v) {

            int num=Integer.parseInt(et[myX].getText().toString());
            num--;

        }

    });
    } 
```

# spring - Unable to find dependency org.springframework.spring-library on maven central

> ID：15882082
> 
> 赞同：0
> 
> 时间：2013-04-08T14:41:55.800
> 
> 标签：spring, maven

Referring to site : [http://ebr.springsource.com/repository/app/library/version/detail;jsessionid=DAA99420F19DE8A30A9A869C347ADB8E.jvm1?name=org.springframework.spring&version=3.2.2.RELEASE](http://ebr.springsource.com/repository/app/library/version/detail;jsessionid=DAA99420F19DE8A30A9A869C347ADB8E.jvm1?name=org.springframework.spring&version=3.2.2.RELEASE)

the maven dependency :

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>org.springframework.spring-library</artifactId>
    <type>libd</type>
    <version>3.2.2.RELEASE</version>
</dependency> 
```

does not seem to be available :

![enter image description here](https://i.stack.imgur.com/Eyamk.png) Here is the request :

[http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22org.springframework.spring-library%22](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22org.springframework.spring-library%22)

Should'nt this repository be available on Maven ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:49:46.560

您可能需要在 pom.xml 中添加 Spring 特定的存储库

```
<repository>
    <id>com.springsource.repository.bundles.release</id>
    <name>EBR Spring Release Repository</name>
    <url>http:// repository.springsource.com/maven/bundles/release</url>
</repository>
<repository>
    <id>com.springsource.repository.bundles.external</id>
    <name>EBR External Release Repository</name>
    <url>http:// repository.springsource.com/maven/bundles/external</url>
</repository> 
```

正如马尔达维所说，Spring 的 Maven 坐标也看起来不对。

此[链接](http://blog.springsource.com/2009/12/02/obtaining-spring-3-artifacts-with-maven/)可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:52:11.587

我猜

> org.springframework.spring 库

是通用 artifactId 的占位符。据我所知，没有`spring-library`神器，但有几个。如果不是`spring-library`你写`spring-core`，`spring-web`等等，那么它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T14:56:15.150

我已经看到了同样的问题并解决了它。我认为它是特定版本的所有弹簧库的捆绑包。为什么没有找到我不能说。通过用单独的依赖项替换它，我能够让我的代码库工作。

在这里找到的依赖项：http: [//spring.io/blog/2009/12/02/obtaining-spring-3-artifacts-with-maven/](http://spring.io/blog/2009/12/02/obtaining-spring-3-artifacts-with-maven/)

```
<!-- Shared version number properties -->
<properties>
    <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
</properties>

<!--
    Core utilities used by other modules.
    Define this if you use Spring Utility APIs (org.springframework.core.*/org.springframework.util.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-core</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Expression Language (depends on spring-core)
    Define this if you use Spring Expression APIs (org.springframework.expression.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-expression</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!-- 
    Bean Factory and JavaBeans utilities (depends on spring-core)
    Define this if you use Spring Bean APIs (org.springframework.beans.*) 
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-beans</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Aspect Oriented Programming (AOP) Framework (depends on spring-core, spring-beans)
    Define this if you use Spring AOP APIs (org.springframework.aop.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-aop</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Application Context (depends on spring-core, spring-expression, spring-aop, spring-beans) 
    This is the central artifact for Spring's Dependency Injection Container and is generally always defined
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Various Application Context utilities, including EhCache, JavaMail, Quartz, and Freemarker integration
    Define this if you need any of these integrations
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context-support</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Transaction Management Abstraction (depends on spring-core, spring-beans, spring-aop, spring-context)
    Define this if you use Spring Transactions or DAO Exception Hierarchy
    (org.springframework.transaction.*/org.springframework.dao.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-tx</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    JDBC Data Access Library (depends on spring-core, spring-beans, spring-context, spring-tx)
    Define this if you use Spring's JdbcTemplate API (org.springframework.jdbc.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-jdbc</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Object-to-Relation-Mapping (ORM) integration with Hibernate, JPA, and iBatis.
    (depends on spring-core, spring-beans, spring-context, spring-tx)
    Define this if you need ORM (org.springframework.orm.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-orm</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Object-to-XML Mapping (OXM) abstraction and integration with JAXB, JiBX, Castor, XStream, and XML Beans.
    (depends on spring-core, spring-beans, spring-context)
    Define this if you need OXM (org.springframework.oxm.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-oxm</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Web application development utilities applicable to both Servlet and Portlet Environments
    (depends on spring-core, spring-beans, spring-context)
    Define this if you use Spring MVC, or wish to use Struts, JSF, or another web framework with Spring (org.springframework.web.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-web</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Spring MVC for Servlet Environments (depends on spring-core, spring-beans, spring-context, spring-web)
    Define this if you use Spring MVC with a Servlet Container such as Apache Tomcat (org.springframework.web.servlet.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-webmvc</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Spring MVC for Portlet Environments (depends on spring-core, spring-beans, spring-context, spring-web)
    Define this if you use Spring MVC with a Portlet Container (org.springframework.web.portlet.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-webmvc-portlet</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<!--
    Support for testing Spring applications with tools such as JUnit and TestNG
    This artifact is generally always defined with a 'test' scope for the integration testing framework and unit testing stubs
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-test</artifactId>
  <version>${org.springframework.version}</version>
  <scope>test</scope>
</dependency> 
```

# web-services - MS CRM 2011 使用 REST 为具有只读访问权限的用户创建报价

> ID：15882083
> 
> 赞同：0
> 
> 时间：2013-04-08T14:41:56.100
> 
> 标签：web-services, dynamics-crm-2011, dynamics-crm, crm

我正在自己的计算系统中创建报价，并通过带有用户凭据的 REST API 将它们导出到 MS CRM 2011。然后这些报价在 CRM 中显示为他们的（就像他们通过在 CRM 中单击创建的一样）。但是现在我们要编辑权限，所以用户只能阅读这些引用。但这意味着，通过 REST API，我无法使用他们的凭据创建报价。有没有办法以用户身份创建新的报价，该用户通过网络具有只读访问权限？或者是否可以在创建引用后更改作者身份？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:47:09.417

要在 CRM 2011 中设置记录的所有者，有 3 种方法：

*   使用模拟，如本文所述：[TechNet - 模拟另一个用户](http://technet.microsoft.com/en-us/library/gg334744.aspx)
*   `ownerid`创建记录时设置字段（C# 示例）

```
Entity quote = new Entity("quote");
// set the fields
// ...
// set the owner
Guid ownerId = new Guid("BFC777ED-5E79-E111-8489-00166D63156F");
quote["ownerid"] = new EntityReference("systemuser", ownerId);
service.Create(quote); 
```

*   执行`AssignRequest`消息以更新记录的所有者，如本文所述：[MSDN - AssignRequest Class](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.assignrequest.aspx)

在您使用 REST API 创建报价的情况下，您需要使用`ownerid`所选用户的 GUID 设置字段。

无法使用 REST 更改现有记录的所有者。

# vbscript - Drag and drop a shortcut on to HTA

> ID：15882085
> 
> 赞同：-1
> 
> 时间：2013-04-08T14:41:57.847
> 
> 标签：vbscript, hta

I'm trying to build a local HTA (HTML Application) that will send me to a website I designate. I've got most of it working, as in it currently allows me to type in an address and choose whether to open that URL in either Internet Explorer or Firefox (both in normal and in private).

What I'm asking is if there is a vbscript I can add onto my HTA that will allow me to drag and drop a shortcut that is on my desktop and click a button to do the same as typing it out. Essentially, I would love for it to be similar to Google Image search. Like you can either type in or drag and drop an image to search. This is just for me to quickly open webpages that I have a shortcut saved. I know i could use the favorites option, but I often use many different computers and I have a flash drive that has all my stuff on it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:04:46.587

您想拖动文件（在这种情况下为 url 快捷方式）并将其放在打开的 .hta 窗口中吗？如果是这样，那么看起来您正在寻找的内容尚未在 HTML 应用程序中实现。

**编辑**

如果您有最新的 Internet Explorer 版本 (9+)，那么您可以使用 HTML5 原生 [拖放](http://www.w3schools.com/html/html5_draganddrop.asp)功能。由于我使用的是 IE8 是最高版本的 XP，因此我无法应对这一挑战。

如果这很困难或不适用，那么可以考虑计划 B，在哪里可以在启动时创建一个功能来扫描您`Desktop`的`*.URL`文件并将它们填充到[Select](http://www.w3schools.com/tags/tag_select.asp)元素中，因此您将以如下方式结束：

```
<select id="urlList">
  <option value="" selected>---</option>
  <option value="http://...">Shortcut1.url</option>
  <option value="http://...">Shortcut2.url</option>
</select>
<input id="urlAddress" type="text"> 
```

...并且可以`OnChange`通过在您的部分中包含一个处理程序来使用事件来控制它`Head`：

```
Sub urlList_OnChange()
    Document.All.urlAddress.Value = _
        Me.Options(Me.selectedIndex).Value
End Sub 
```

这是一个快速入门的片段。

```
Set WshShell = CreateObject("WScript.Shell")
strDesktop = WshShell.SpecialFolders("Desktop")

Set fso = CreateObject("Scripting.FileSystemObject")
Set fld = fso.GetFolder(strDesktop)

For Each f In fld.Files
    If f.Type = "Internet Shortcut" Then
        MsgBox f.Path & vbNewLine & ReadURL(f.Path)
    End If
Next

Function ReadURL(urlFile)
    With CreateObject("Scripting.FileSystemObject")
        With .OpenTextFile(urlFile, 1)
            .SkipLine
            ReadURL = (Split(.ReadLine, "="))(1)
        End With
    End With
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:33:00.553

是的，您可以，请参阅 Hey, Scripting Guy 的这篇文章（Vbscript 和 Powershell 的最佳资源）。将某些东西拖到快捷方式上几乎与将参数传递给脚本（此处为 HTA）相同。

[http://blogs.technet.com/b/heyscriptingguy/archive/2005/04/20/how-can-i-pass-command-line-variables-to-an-hta-when-it-starts.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2005/04/20/how-can-i-pass-command-line-variables-to-an-hta-when-it-starts.aspx)

# java - 从 javacard 到 java 的 AES 密钥，加密

> ID：15882088
> 
> 赞同：1
> 
> 时间：2013-04-08T14:42:04.210
> 
> 标签：java, key, javacard

我正在尝试在 java 应用程序中使用 javacard 2.2.1 上制作的 AESKey 我如何制作 AESKEY：

```
RandomData randomData = RandomData.getInstance(RandomData.ALG_PSEUDO_RANDOM);
byte[] rnd = JCSystem.makeTransientByteArray((short)16, JCSystem.CLEAR_ON_RESET);
randomData.generateData(rnd, (short)0, (short)rnd.length);
AESKey symKey = (AESKey) KeyBuilder.buildKey (KeyBuilder.TYPE_AES, KeyBuilder.LENGTH_AES_128, false);
symKey.setKey(rnd, (short)0); 
```

我如何加密数据：

```
Cipher symCipher = Cipher.getInstance(Cipher.ALG_AES_BLOCK_128_CBC_NOPAD, false);
symCipher.init(symKey, Cipher.MODE_ENCRYPT);
byte[] encryptedC= new byte[48];
symCipher.doFinal(c, (short)0, (short)c.length, encryptedC, (short)0); 
```

之后，我将 rnd 发送到我的 java 应用程序并尝试用它制作密钥。

```
SecretKeySpec secretKeySpec = new SecretKeySpec(symKeyData, "AES"); 
```

我知道 SymKeyData == rnd。我可以使用此 SecretKey 加密某些内容，但是当我解密时出现错误：“鉴于最终块未正确填充”

```
Cipher cipherAes = Cipher.getInstance("AES");
cipherAes.init(Cipher.DECRYPT_MODE, secretKeySpec);
byte[] decryptedBytes = cipherAes.doFinal(challengeEncrypted); 
```

我检查了，challengeEncrypted 的长度很好。(48) 尝试过：

```
Cipher cipherAes = Cipher.getInstance("AES/CBC/NoPadding"); 
```

但没有成功，例外：“错误的钥匙”

找到解决方案

```
byte[] ivdata = new byte[]{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
 IvParameterSpec spec = new IvParameterSpec(ivdata);
 symetricKeyFromCard = new SecretKeySpec(symKeyData, "AES");

 Cipher cipherAes = Cipher.getInstance("AES/CBC/NoPadding");
 cipherAes.init(Cipher.DECRYPT_MODE, symetricKeyFromCard, spec);
 byte[] decryptedBytes = cipherAes.doFinal(challengeEncrypted); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:09:07.897

我认为这是因为您在没有 pad 的情况下启动了加密：

```
Cipher symCipher = Cipher.getInstance(Cipher.ALG_AES_BLOCK_128_CBC_NOPAD, false); 
```

数据被逐块分割和加密。这些块的大小与密钥相同，因为您需要加密的数据不一定是密钥的倍数，您必须指定填充方法，以便最后一个块“完整”以适合密钥大小。

将填充方法更改为：

```
Cipher symCipher = Cipher.getInstance(Cipher.ALG_AES_CBC_ISO9797_M2 , false); 
```

让我们知道会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:46:47.663

找到解决方案

```
byte[] ivdata = new byte[]{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
 IvParameterSpec spec = new IvParameterSpec(ivdata);
 symetricKeyFromCard = new SecretKeySpec(symKeyData, "AES");

 Cipher cipherAes = Cipher.getInstance("AES/CBC/NoPadding");
 cipherAes.init(Cipher.DECRYPT_MODE, symetricKeyFromCard, spec);
 byte[] decryptedBytes = cipherAes.doFinal(challengeEncrypted); 
```

# jquery - 使用 jquery 滚动网格的内容

> ID：15882094
> 
> 赞同：0
> 
> 时间：2013-04-08T14:42:25.797
> 
> 标签：jquery, scroll

我有一个网格（表格），我想使用拖动移动滚动内容。

到目前为止，我所拥有的是：

```
var gesturesX = 0;
    var gesturesY = 0;

    var startPosition = 0;
    var velocity = 0;
    var isMouseDown = false;

    var timer;

    function GetVelocity() {
        velocity = startPosition - gesturesY;
    }

    $('.k-grid-content').mousemove(function (e) {
        gesturesX = parseInt(e.pageX, 10);
        gesturesY = parseInt(e.pageY, 10);
        $("#mouse").html(gesturesY);
        if (isMouseDown) {
            $('.k-grid-content').scrollTop(startPosition - gesturesY);
            return false;
        }
    });

    $('.k-grid-content').mousedown(function () {
        startPosition = gesturesY;
        isMouseDown = true;
        timer = window.setTimeout(GetVelocity, 50);
    });

    $('.k-grid-content').mouseup(function () {
        isMouseDown = false;
        return false;
    }); 
```

有了这个，我可以滚动拖动。但是我的问题是，例如，如果我滚动到网格的中间，停止，然后返回到从我离开的同一点开始滚动，它重新启动并从表的顶部开始......这可以理解吗？我是说？

我想在同一点上继续……但我不知道该怎么做……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:47:14.863

这是因为 your`startPosition`总是从元素的顶部开始计算的；您需要在开始时考虑滚动状态。

在您的`mousedown`活动中：

```
startPosition = gesturesY + $(this).scrollTop(); 
```

# c# - 在 C# 中仅获取字符串的 3 个单词

> ID：15882106
> 
> 赞同：-3
> 
> 时间：2013-04-08T14:43:23.903
> 
> 标签：c#, string

我正在尝试在 C# 中获取字符串（电子邮件主题）的前 3 个单词，以前有人这样做过吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:46:44.013

`string result = string.Join(" ", str.Split().Take(3));` （已编辑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:45:48.847

```
List<string> myWordsList = myWords.Split(' ').Take(3).ToList(); 
```

# java - Java Graphics2D 颜色问题

> ID：15882108
> 
> 赞同：1
> 
> 时间：2013-04-08T14:43:24.687
> 
> 标签：java

我已经搜索了一段时间，但无法找到我的问题的答案。

首先我将展示两张对比图：

方法一： [方法一 http://img713.imageshack.us/img713/3558/tcg6.jpg](http://img713.imageshack.us/img713/3558/tcg6.jpg)

方法2： [方法2 http://img716.imageshack.us/img716/2755/tcg7.jpg](http://img716.imageshack.us/img716/2755/tcg7.jpg)

方法 1 从来没有给我带来任何麻烦，但我最近发现它需要的时间太长，方法 2 解决了这个问题。

方法1的代码：

```
private void drawDefaultOrientation() {
    for (int x = 0; x < width; x++) {
        for (int y = 0; y < height; y++) {
            int dx = Math.min(x, width - 1 - x);
            int dy = Math.min(y, height - 1 - y);
            if (dx < borderSize || dy < borderSize) {
                inBorder(dx, dy);
            }
            else {
                outBorder(dx, dy);
            }
            bufferedImage.setRGB(xOffset + x, yOffset + y, color.getRGB());
        }
    }
} 
```

方法2的代码：

```
private void drawDefaultOrientation() {
    DataBufferInt buffer = (DataBufferInt)bufferedImage.getRaster().getDataBuffer();
    int[] pixelArray = buffer.getData();
    for (int x = 0; x < width; x++) {
        for (int y = 0; y < height; y++) {
            int dx = Math.min(x, width - 1 - x);
            int dy = Math.min(y, height - 1 - y);
            if (dx < borderSize || dy < borderSize) {
                inBorder(dx, dy);
            }
            else {
                outBorder(dx, dy);
            }
            pixelArray[(xOffset + x) + ((yOffset + y) * bufferedImage.getWidth())] = color.getRGB();
        }
    }
} 
```

另请注意 inBorder(dx, dy); 和outBorder（dx，dy）；将颜色变量设置为具有红色、绿色、蓝色和 Alpha 值的颜色。

被叫代码：

```
 new CustomRectangle(bufferedImage, 220, 90, 15, 245, 5, defaultOrientation) {
        @Override
        public void inBorder(final int dx, final int dy) {
            setColor(new Color(red, green, blue, 255 - Math.min(dx, dy)));
        }

        @Override
        public void outBorder(final int dx, final int dy) {
            setColor(new Color(red, green, blue, 128 - Math.min(dx, dy)));
        }
    }.draw(); 
```

我真的很困惑为什么会有色差。

我真的希望那里的任何人都可以帮助我。首先，我认为它与 Alpha 值有关，但正如所见，方法 2 中仍然存在 alpha 变量。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T13:29:07.010

我建议，对于“简单”的东西（包括框、形状、渐变等），您直接使用 Java2D API。编写起来会更高效、更简单。

例如，用颜色填充图像中的矩形：

```
public void rectangle(Color color, float x1, float y1, float w, float h) {
    Graphics2D g = bufferedImage.createGraphics();
    g.setColor(color);
    g.fill(new Rectangle2D.Float(x1, y1, w, h));
    g.dispose(); // optional but releases the resource earlier
} 
```

你也可以使用“g”来绘制你需要做的尽可能多的东西。

# apache-flex - 弹性日期相关功能

> ID：15882110
> 
> 赞同：0
> 
> 时间：2013-04-08T14:43:34.373
> 
> 标签：apache-flex

当我的结束日期为 31-12-2012 时，我需要使用 Flex Date Functions 将开始日期计算为 01-01-2013。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:02:52.003

我假设您想在现有日期中添加一定天数（在您的示例中为 1）？您可以通过根据另一个日期的时间 ​​+ 差值创建一个新日期来做到这一点：

例子：

```
var numMillisecondsInOneDay:Number = 24*60*60*1000;
var startDate:Date = new Date(endDate.getTime() + numMillisecondsInOneDay); 
```

仅供参考：[AS3Commons-Lang](http://www.as3commons.org/as3-commons-lang/index.html)项目包含一个 DateUtils 类，该类提供一组日期操作方法。

# web-services - 如何保存（不上传）从 Shiny 界面创建的文件？

> ID：15882112
> 
> 赞同：4
> 
> 时间：2013-04-08T14:43:36.433
> 
> 标签：web-services, r, interface, shiny

我在 Shiny Google 群组上问过这个问题，但是一旦发布它就会立即被删除，我不知道为什么。

所以我在这里问这个问题。

我知道如何上传从 Shiny 应用程序创建的文件，但我花了几个小时没有成功地找到如何将文件保存在硬盘上。请问你能告诉我一个方法吗？例如，我想保存使用 sink() 创建的文件或 RData 文件。

以下是我众多尝试之一的（人工）示例。sweaveSave() 函数不起作用。请不要关注情节，它在我的问题中不起作用。

**服务器.R**

```
library(shiny)
##
## function creating a Sweave report 
##
createReport <- function(file){
        sink(file) 
        cat(
"\\documentclass{article}\n
\\begin{document}\n
\\SweaveOpts{concordance=TRUE}
This is the Rnw file.\n
<<fig=TRUE>>=
plot(0,0)
@\n
\\end{document}\n") 
        sink()
}

##
## Shiny server
##
shinyServer(function(input, output) {
    ##
    ## Create plot 
    ##
    createPlot <- reactive({
        # generate an rnorm distribution and plot it
        titl <- paste0("Exponential distribution with rate ", round(input$parameter,2)) 
    curve(dexp(x,rate=input$parameter), from=0, to=5, main=titl, ylab=NA, xlab=NA)
        })
    ##
    ## output : plot
    ##
    output$distPlot <- renderPlot({
        createPlot()
    })
    ##
    ##  output : download Sweave file 
    ##
    output$sweavedownload <-   downloadHandler(
        filename="report00.Rnw",
        content = createReport
    )
    ##
    ## save Sweave file 
    ##
    sweaveSave <-   reactive({
        if(input$save){
                createReport("REPORT00.Rnw")
        }else{NULL}
    })
}) 
```

**用户界面**

```
library(shiny)
shinyUI(pageWithSidebar(

  # Application title
  headerPanel("Hello Shiny!"),

  # Sidebar panel
  sidebarPanel(
    sliderInput("parameter", 
                "Rate parameter:", 
                min = 0.0000000001, 
                max = 10, 
                value = 5),
    checkboxInput("save", "Check to save and download")
  ),

  # Main panel
  mainPanel(
    plotOutput("distPlot"),
    conditionalPanel(
      condition = "input.save",
      downloadLink("sweavedownload", "Download")
    )
  )
)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-20T04:09:21.640

通过使用 shinyFiles 包，它让您的生活变得轻松。

```
install.package('shinyFiles') 
require(shinyFiles)
shinyFilesExample() 
```

# firefox - Selenium IDE 文件菜单项什么都不做

> ID：15882113
> 
> 赞同：0
> 
> 时间：2013-04-08T14:43:37.177
> 
> 标签：firefox, selenium-ide

如何修复 Firefox 20 上 Selenium IDE 中的文件菜单？正如其他地方所[报道](https://code.google.com/p/selenium/issues/detail?id=5461)的那样，从以前的版本升级 Firefox 后，该菜单中的所有命令都没有做任何事情*。到目前为止，我已经尝试重新启动浏览器、重置 Selenium 选项并禁用 Firebug 扩展，一位同事报告说过去曾修复过类似的问题。

* 如果我单击文件 → 新测试用例，然后单击文件 → 最近的测试套件 → 任何测试套件，它会询问“您要保存测试套件吗？” 即使它之前没有显示测试用例，之后也没有显示测试套件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:53:16.803

看起来 Selenium 在更新 Firefox 时没有检查兼容性 - 卸载扩展并[安装最新版本](http://seleniumhq.org/download/)足以解决此问题。

# cassandra - Cassandra 中的索引损坏

> ID：15882116
> 
> 赞同：1
> 
> 时间：2013-04-08T14:43:42.727
> 
> 标签：cassandra, fluentcassandra

Select all 查询在 Cassandra KeySpace-Column Family 中运行良好。但是当针对特定键发出 Select by Key 查询时，FluentCassandra 客户端会引发超时异常。对于同一列族中的某些键会发生这种情况，而其他键会成功。

这可能是由于索引问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T14:23:16.287

好的，

我没有提供有关您的问题的更多信息。但是由于我遇到了同样的问题并偶然发现了这个问题，这就是发生在我身上的事情。

我遵循@Richard 的建议，并在执行查询时查看了 cassandra 日志。我发现正在引用一些不存在的数据文件。

重新启动 Cassasandra 会强制系统检查其日志并重建解决问题的数据文件。

# javascript - 等待 WebBrowser 控件加载并运行所有 JavaScript

> ID：15882118
> 
> 赞同：5
> 
> 时间：2013-04-08T14:43:45.213
> 
> 标签：javascript, .net, webbrowser-control

```
using (var browser = new WebBrowser()) {
    browser.Navigate(location);

    browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_DocumentCompleted);
    while (browser.ReadyState != WebBrowserReadyState.Complete) {
        Application.DoEvents();
    }
    log.Info("READY " + browser.Document.GetElementById("main").InnerText);
}

private void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {
    WebBrowser wb = (WebBrowser)sender;
    log.Info("COMPLETED " + wb.Document.GetElementById("main").InnerText);
} 
```

两个日志都返回未应用 JavaScript 更改的元素。

现在我在 WinForms 中有另一个 WebBrowser，它会在启动时加载页面。这次我也使用`DocumentCompleted`事件，但我仍然没有`javascripted`来源。

```
form.webBrowser1.DocumentCompleted += (sender, e) => {
    log.Info("READY HIAAR" + form.webBrowser1.Document.GetElementById("main").InnerText);
}; 
```

最后，我尝试使用按钮获取源。首先我让 WebBrowser 在 WinForms 中加载一个页面，然后**在 5 秒后**按下按钮：

```
form.dataButton.Click += (sender, e) => {
    log.Info("READY HIAAR" + form.webBrowser1.Document.GetElementById("main").InnerText);
}; 
```

只有最后一个`log.info`返回**我需要的实际内容**。

如何在所有 JavaScript 都已加载并运行时捕获事件？单击会破坏目的。

# azure - 是否可以将 salesforce 作为身份提供者添加到 ACS

> ID：15882127
> 
> 赞同：0
> 
> 时间：2013-04-08T14:44:10.563
> 
> 标签：azure, salesforce, claims-based-identity, acs

由于 ACS 管理门户不提供将 salesforce 配置为身份提供者的内置支持：http: [//msdn.microsoft.com/en-us/library/gg185971.aspx](http://msdn.microsoft.com/en-us/library/gg185971.aspx)

有没有办法手动将 Salesforce 作为身份提供者添加到 ACS？

主题：[Azure ACS 是否支持像 Salesforce 这样的 saml 2.0 IdP？](https://stackoverflow.com/questions/8811626/does-azure-acs-support-saml-2-0-idps-like-salesforce)对此事没有得出任何结论。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:41:15.197

没有。不幸的是，ACS 目前不支持 SAML-P 身份提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:48:06.830

如何添加自定义 STS 作为身份提供者，在这些 STS 中使用 saml2.0 idps？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:37:32.377

不可以，不能在 Azure 访问控制服务中将 SalesForce 添加为 IdP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:39:14.553

联系我（通过[http://blog.maartenballiauw.be](http://blog.maartenballiauw.be)上的联系页面），这是我试图通过 www.socialsts.com 解决的问题。

# c++ - 在这种情况下，最好的数据结构是什么？

> ID：15882128
> 
> 赞同：-3
> 
> 时间：2013-04-08T14:44:11.963
> 
> 标签：c++, data-structures

在这种情况下，最好的数据结构是什么？我正在使用 C++。是的，我是新手。

```
Function getValues
Inputs:
    ID // string
    StatType // enum
Output:
    value // double 
```

有一堆数据可以组织成一个二维数组。该函数应检查 ID 和 stat 类型并返回适当的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:45:57.290

这似乎是对函数的规范，而不是数据结构。函数声明看起来像这样：

```
enum enumtype { ... };

double getValues(std::string ID, enumtype StatType); 
```

# objective-c - 以编程方式更改 TabBar 顺序 Objective C

> ID：15882129
> 
> 赞同：2
> 
> 时间：2013-04-08T14:44:13.240
> 
> 标签：objective-c, xcode, uinavigationcontroller, uitabbarcontroller, uitabbar

我有一个 Storyboard Xcode 项目，我正在努力将选项卡的顺序放置在选项卡栏中。其中有 4 个选项卡。

```
CurrentLocationViewController,  LocationsViewController, MapViewController and AnimalsViewController 
```

我有一个 Sqlite 数据库，它连接我项目中的 3 个选项卡。位置、标签和地图。

然后我有一个选项卡，它与我项目中的其他 3 个选项卡完全分开。

我希望 AnimalsViewController 或 Animals 选项卡成为我应用程序中的第一个选项卡。我可以将它添加为我的第 4 个标签栏项目没问题，但是当我在界面构建器中将顺序更改为第一个时，我的应用程序崩溃了。

我可以轻松更改标签、位置和地图的顺序，但是当我在开始时引入 Animal 选项卡时它会崩溃。

标签、位置和地图选项卡是相互关联的，而动物选项卡是完全独立的选项卡。

我知道我必须在下面的代码中引用位于我的 AppDelegate 中的选项卡并包含 AnimalsViewController.h 但我试图无济于事。

下面是我的代码、图片和错误日志。

```
 2013-04-08 16:38:08.075 ShotPlacementGuide[5077:c07] -[AnimalsViewController  viewControllers]: unrecognized selector sent to instance 0xae8dc90
  2013-04-08 16:38:08.077 ShotPlacementGuide[5077:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[AnimalsViewController viewControllers]: unrecognized selector sent to instance 0xae8dc90'
  *** First throw call stack:
  (0x24a9012 0x1c5ce7e 0x25344bd 0x2498bbc 0x249894e 0x2443 0xb01157 0xb01747 0xb0294b 0xb13cb5 0xb14beb 0xb06698 0x1fc9df9 0x1fc9ad0 0x241ebf5 0x241e962 0x244fbb6 0x244ef44 0x244ee1b 0xb0217a 0xb03ffc 0x222d 0x2155)
  libc++abi.dylib: terminate called throwing an exception
  (lldb) 
```

这是我的代码：

```
 UITabBarController *tabBarController = (UITabBarController *) self.window.rootViewController;

    UINavigationController *navigationController = (UINavigationController *) [[tabBarController viewControllers] objectAtIndex:0];

    CurrentLocationViewController *currentLocationViewController = (CurrentLocationViewController *) [[navigationController viewControllers] objectAtIndex:0];
    currentLocationViewController.managedObjectContext = self.managedObjectContext;

    navigationController = (UINavigationController *) [[tabBarController viewControllers] objectAtIndex:1];

    LocationsViewController *locationsViewController = (LocationsViewController *) [[navigationController viewControllers] objectAtIndex:0];
    locationsViewController.managedObjectContext = self.managedObjectContext;

    MapViewController *mapViewController = (MapViewController *) [[tabBarController viewControllers] objectAtIndex:2];

    mapViewController.managedObjectContext = self.managedObjectContext; 
```

![在此处输入图像描述](https://i.stack.imgur.com/cgnEj.png)

![在此处输入图像描述](https://i.stack.imgur.com/caA30.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:37:23.340

为了在标签栏控制器中交换第一个和第四个视图控制器，请使用以下代码：

```
UITabBarController *tabBarController = (UITabBarController *) self.window.rootViewController;    
NSMutableArray* viewControllers = [[tabBarController viewControllers] mutableCopy];    
[viewControllers exchangeObjectAtIndex:0 withObjectAtIndex:3];    
[tabBarController setViewControllers:viewControllers]; 
```

# database - DBnull 到整数转换错误

> ID：15882133
> 
> 赞同：1
> 
> 时间：2013-04-08T14:44:20.860
> 
> 标签：database, vb.net

我明白了`Conversion from type 'DBNull' to type 'Integer' is not valid." error on the line "Dim avgObject As string = Cstr(avgCom.ExecuteScalar())`

该命令在`where module_ID='" & moduleSelect & "'`删除语句时有效，我不知道如何解决这个问题，有人可以帮忙吗？

```
 Dim moduleSelect As String = moduleRadio.SelectedValue
    Using connection As New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True")
        Using avgCom As New SqlCommand("SELECT AVG(exam) FROM completed_module where module_ID='" & moduleSelect & "' ", _
                                        connection)
            connection.Open()
            Dim avgObject As Integer = CInt(avgCom.ExecuteScalar())
            Dim averageVar As String
            averageVar = avgObject.ToString
            avgLabel.Text = averageVar
        End Using 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:47:19.670

`DBNull`表示数据库中的记录不包含该列的值。所以基本上你正在尝试将“无”转换为数字。

你想让你的程序做什么？跳过行？改用默认值？

如果您从命令中删除一条语句，该命令*真的*“有效”，我建议您简单地删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:48:16.820

我相信您正在寻找这样的东西，首先检查它是否为 dbnull：

```
Dim moduleSelect As String = moduleRadio.SelectedValue

Using connection As New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True")
    Using avgCom As New SqlCommand("SELECT AVG(exam) FROM completed_module where module_ID='" & moduleSelect & "' ", _
                                    connection)
        connection.Open()
        Dim result = avgCom.ExecuteScalar()
        If IsDBNull(result) then return
        Dim avgObject As Integer = CInt(result)
        Dim averageVar As String
        averageVar = avgObject.ToString
        avgLabel.Text = averageVar
    End Using 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:47:11.673

请改用 Convert.ToString。Directcast as string 不适用于 Null/Nothing

**只要您没有收到任何结果，就会出现**更新问题。****

 **我测试过，所以 CStr to Convert.ToString 适用于 DBNUll，但 CInt 和 Convert.ToIntXX 仍然会引发错误。您可以使用

```
Dim scalarResult = avgCom.ExecuteScalar()
If Convert.IsDBNull(scalarResult) then
  avgObject = 0
Else
  avgObject = Convert.toInt32(scalarResult)
End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:09:00.777

**错误 ：**`Conversion from type 'DBNull' to type 'Integer' is not valid.`

发生此错误是因为您的查询返回一个`NULL`值..您可以`NULL`使用以下代码管理该值..

像下面这样尝试它会帮助你...

```
connection.Open()
Dim result As String = avgCom.ExecuteScalar().ToString()
Dim avgObject As Integer = If(result = "", 0, CInt(result)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T15:13:05.900

可能这会失败，因为缺少一个值。（即 NULL）但如果遇到带有 NULL 的行，则默认为 0 可能会起作用：

```
SELECT AVG(ISNULL(exam,0)) FROM completed_module where module_ID= 
```

否则，请确保您的表不包含该列的 NULL 值：

```
UPDATE completed_module SET exam = 0 WHERE exam IS NULL 
```

（也许限制它，所以它也可能没有未来的 NULL 值；））

编辑：这假设您实际上可以为每一行设置一个平均值，即使您访问的列是 NULL，在这种情况下，我会假设 NULL 不会为您的平均值添加任何内容（共享该 ID 的其他行可能）所以我默认为 0**

# mysql - 如何知道是否有一个已经锁定的表 MySQL

> ID：15882137
> 
> 赞同：1
> 
> 时间：2013-04-08T14:44:48.817
> 
> 标签：mysql, locking, myisam

我正在尝试从 SQL 文件列表中恢复 MySQL 转储，例如：

```
for file in *.sql; do mysql ... < $file;done 
```

这个策略非常有效，但对于某个表却没有。实际上它会被阻塞很长时间，直到我终止命令。这是显示为“显示完整进程列表”的状态

```
LOCK TABLES `ms_lims_properties` WRTIE 
```

我无法解释为什么我的负载保持锁定状态，因为表格应该只包含 5 行。

这是相应的 sql 文件的示例：

```
LOCK TABLES `ms_lims_properties` WRITE;
/*!40000 ALTER TABLE ms_lims_properties DISABLE KEYS */;
INSERT INTO ms_lims_properties VALUES (1...
/*!40000 ALTER TABLE `ms_lims_properties` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */; 
```

它使用 MyISAM 作为引擎，所以我不知道如何检查某处是否有锁......我可以从 MySQL 管理员那里看到的状态是：

`Waiting for table`

我试过删除数据库，用相同的结果重新创建它...... :(

有人有任何线索吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:46:54.403

我看到你正在使用 LOCK TABLES `ms_lims_properties`WRITE；

所以如果你在插入之前锁定你的表，那么你不能插入，因为表被锁定了。

# version - Z3 -smt2 -in：获取 Z3 版本

> ID：15882140
> 
> 赞同：2
> 
> 时间：2013-04-08T14:45:04.767
> 
> 标签：version, stdin, z3

用options启动后能拿到Z3的版本`-smt2 -in`吗？就像是

```
(get-z3-version)
; Z3 4.3.2 x64  // Desired reply 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:17:43.217

在 SMT-LIB 2.0 前端，我们可以使用命令

`(get-info :version)`

该命令是标准的一部分，也应该适用于其他求解器。我们可以在[这里](http://rise4fun.com/Z3/Gct)测试命令。

我们也可以使用命令行选项`-version`。例子：

```
 z3 -version
  >> Z3 version 4.3.1 
```

# java - java.lang.UnsatisfiedLinkError: org.apache.log4j.nt.NTEventLogAppender.registerEventSource

> ID：15882141
> 
> 赞同：2
> 
> 时间：2013-04-08T14:45:05.167
> 
> 标签：java, eclipse, tomcat, log4j

我有一个使用 tomcat 部署的 java web 服务。我正在尝试使用 log4j 和 NTEventLog dll 从 java 写入事件查看器。我将“NTEventLogAppender.dll”添加到我的系统路径上的 C:\Program Files\Java\jdk1.7.0_10\bin 中，并使用 regsvr32 命令注册它。

我有以下异常：

```
5263 [http-8080-2] ERROR org.apache.axis2.transport.http.AxisServlet  - org.apache.log4j.nt.NTEventLogAppender.registerEventSource(Ljava/lang/String;Ljava/lang/String;)I
java.lang.UnsatisfiedLinkError: org.apache.log4j.nt.NTEventLogAppender.registerEventSource(Ljava/lang/String;Ljava/lang/String;)I
    at org.apache.log4j.nt.NTEventLogAppender.registerEventSource(Native Method)
    at org.apache.log4j.nt.NTEventLogAppender.<init>(NTEventLogAppender.java:79)
    at org.apache.log4j.nt.NTEventLogAppender.<init>(NTEventLogAppender.java:49)
    at packagecct1.Procurements.<init>(Procurements.java:101)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.apache.axis2.util.Utils$8.run(Utils.java:768)
    at org.apache.axis2.java.security.AccessController.doPrivileged(AccessController.java:132)
    at org.apache.axis2.util.Utils.createServiceObject(Utils.java:765)
    at org.apache.axis2.receivers.AbstractMessageReceiver.makeNewServiceObject(AbstractMessageReceiver.java:245)
    at org.apache.axis2.receivers.AbstractMessageReceiver.getTheImplementationObject(AbstractMessageReceiver.java:282)
    at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:78)
    at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

log4j.properties：

```
#log4j.rootLogger=DEBUG,CA,NTEventLog 
log4j.rootLogger=DEBUG,CA        

#Console Appender 
log4j.appender.CA=org.apache.log4j.ConsoleAppender 
log4j.appender.CA.layout=org.apache.log4j.PatternLayout 
log4j.appender.CA.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 

#File Appender 
log4j.appender.FA=org.apache.log4j.FileAppender 
log4j.appender.FA.File=sample.log 
log4j.appender.FA.layout=org.apache.log4j.PatternLayout 
log4j.appender.FA.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

#Event Log Appender
log4j.appender.NTEventLog=org.apache.log4j.nt.NTEventLogAppender
log4j.appender.NTEventLog.layout=org.apache.log4j.PatternLayout
log4j.appender.NTEventLog.layout.ConversionPattern=%m%n
log4j.appender.NTEventLog.source=ESBWebServices

# Set the logger level of File Appender to WARN 
log4j.appender.FA.Threshold = WARN 
```

爪哇代码：

```
 System.loadLibrary("NTEventLogAppender");

    BasicConfigurator.configure();
    NTEventLogAppender eventLogAppender = new NTEventLogAppender();
    eventLogAppender.setSource("ESBWebServices");

    eventLogAppender.setLayout(new PatternLayout("%m"));
    eventLogAppender.activateOptions();
    logger.addAppender(eventLogAppender);

    logger.info("Hello World!"); 
```

请注意我使用 eclipse 作为 IDE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T19:54:13.673

Apache Log4J v1.2.17 仅包含预构建的 amd64 兼容 DLL（称为 NTEventLogAppender.amd64.dll。`NTEventLogAppender`运行时它会查看系统架构 ( `System.getProperty("os.arch"`)），然后尝试加载 amd64、ia64 或 x86 版本的DLL 必须位于名为 NTEventLogAppender..dll 的文件中。

Apache 不仅仅提供所有可能的 DLL，而是为您提供了 src，以便能够在发行版的 src/ntdll 中为您的目标体系结构构建自己的 DLL。有两种构建方法，一种使用 MinGW，另一种使用 MS Visual Studio 构建工具。我使用后者通过`ant msbuild`在此目录中运行命令来构建我自己的 DLL。

这不是一个轻松的过程，我不得不四处寻找各种库和头文件以及构建它所需的 rc、mc、cl 和链接 exe。最后，我不得不将构建的 DLL 重命名为`NTEventLogAppender.x86.dll`并将其放在我的路径上以获取它。

无论如何，因为我找不到上传这个 DLL 文件的地方，所以我在这里创建了文件的 base64 哈希的要点：[https](https://gist.github.com/alpian/5614954) ://gist.github.com/alpian/5614954 。获取文本并将其通过许多免费的在线 base64 转换器中的任何一个，并将其保存到适当命名的 DLL 文件中，您就完成了。这可能比自己构建更容易，也许不会！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T15:46:18.050

只是为了扩展@alpian 的回复，*实际上*有一个 NTEventLogAppender.dll，在 log4j-1.2.17.zip 中为 x86 编译，如果它在库路径上，log4j 将成功加载它。但是，它似乎编译不正确，并且不包含所需 JNI 方法的 C 函数，这导致了 OP 中提到的特定 UnsatisfiedLinkError。

作为编译的替代方法，您可以回滚到 1.2.16，它似乎有一个工作 DLL。

# c# - 避免 switch 语句的架构

> ID：15882142
> 
> 赞同：3
> 
> 时间：2013-04-08T14:45:08.057
> 
> 标签：c#, architecture, solid-principles

我正在做一个新项目，我正在努力坚持正确的设计方法。我遇到了一个 switch 语句的问题，我知道这是一个问题，但我无法以面向对象的方式重新分解它。

在系统中，一个用户有 0..n 个角色。根据用户当前的角色，系统将向该用户返回一组特定的数据。用户将能够执行某些操作，但不能执行其他操作等。

```
public class User
{
    public bool HasRole(string roleName)
    {
        return this.UserRoles.Any(r => r.Name == roleName);
    }

    public string Username { get; set; }

    public long? CurrentRoleId { get; set; }
    public Role CurrentRole { get; set; }

    public virtual IList<Role> UserRoles { get; set; }
}

public class Role
{
    public Role() { }

    public string Name { get; set; }
}

public class GetEventsQuery : IQuery<List<Event>>
{
    public List<Event> Query()
    {
        switch (this.user.CurrentRole.Name)
        {
            case "Administrator":
                UserIsNotInAdministratorRole();
                return repository.All.ToList();

            case "Supervisor":
                UserIsNotInSupervisorRole();
                return repository.All.Where(evnt => evnt.SupervisorId == this.user.RecordId).ToList();

            case "User":
                UserIsNotInUserRole();
                return repository.All.Where(evnt => evnt.UserId == this.user.RecordId).ToList();

            default:
                throw new Exception("GetEventsQuery Unknow exception.");
        }
    }

    private void UserIsNotInUserRole()
    {
        if (!this.user.HasRole("User"))
        {
            throw new NoUserRoleException("User does not have user role!");
        }
    }

    private void UserIsNotInSupervisorRole()
    {
        if (!this.user.HasRole("Supervisor"))
        {
            throw new NoSupervisorRoleException("User does not have supervisor role!");
        }
    }

    private void UserIsNotInAdministratorRole()
    {
        if (!this.user.HasRole("Administrator"))
        {
            throw new NoAdministratorRoleException("User does not have administrator role!");
        }
    }

    public GetEventsQuery(string username, IUserRepository userRepository, IEventRepository repository)
    {
        this.repository = repository;

        var userQuery = new GetUserQuery(username, userRepository);
        this.user = userQuery.Query();
    }

    private readonly User user;
    private readonly IEventRepository repository;
} 
```

这个 switch 语句将出现在系统的所有部分。如果有办法将它重新分解到一个类中并将它放在一个位置，我不介意保留它，但一遍又一遍地重复它绝对是一种代码味道。我刚刚开始这个项目，所以如果有更好的方法来设计对象层次结构或进行重大更改以消除这个问题，我愿意接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:49:45.103

在替换非面向对象的 switch 语句时，策略模式通常是一个很好的模式[。](http://en.wikipedia.org/wiki/Strategy_pattern)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T14:48:22.807

`Role`应该是每个角色（例如管理员、主管、用户）继承的公共基类（或接口）。每个实现都`Role`应该有关于该特定角色允许或不允许什么的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T14:49:54.647

你可以使用多态性来避免你的切换吗？
您将根据需要使用抽象来包含您的行为。然后创建封装特定逻辑的具体实现 - 然后替换您的 switch 语句。这将是`Role`需要重构的，所以可能是这样的

```
public interface IRole
{
   // whatever you need here
}

public class Administrator : IRole
{
    // your implementation 
} 
```

lostechies.com 上有一篇关于[polymorphism-part-2-refactoring-to-polymorphic-behavior的好帖子](http://lostechies.com/johnteague/2013/03/03/polymorphism-part-2-refactoring-to-polymorphic-behavior/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T14:55:54.257

接口 IRole：

```
GetRole(); //You can use it to self-define the role
IsUserInRole(Role roleType) //Check if user in specific role
GetList(); //Query 
```

定义特定角色：

```
SuperVisor implements IRole
{...}

Administrator implements IRole
{...} 
```

这里的优点是您可以依靠 IRole 来维护您的事务，而不是处理直接的角色对象 (AdministratorObject)，并在您需要调用该类定义中的任何特定方法时将其转换为适当的类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T14:53:01.427

在这种情况下，您需要的是[工厂](http://www.dofactory.com/Patterns/PatternAbstract.aspx)模式和[策略](http://www.codeproject.com/Articles/52807/Design-Patterns-Part-1-The-Strategy-Pattern)模式的组合。

策略模式定义了一系列算法，封装了每一个，并使它们可以互换。策略让算法独立于使用它的客户端而变化。

工厂模式为创建相关或依赖对象系列提供了一个接口，而无需指定它们的具体类。

当上述内容一起使用时，您将能够创建一个完全可扩展的类，该类将提供您想要的所有功能......

我希望这有帮助。

# asp.net-mvc-3 - MVC 视图页面显示错误

> ID：15882144
> 
> 赞同：1
> 
> 时间：2013-04-08T14:45:15.220
> 
> 标签：asp.net-mvc-3

我的 MVC C# 应用程序出现错误。尽管我在开发环境中没有收到以下错误，甚至功能都没有中断，但是在 IIS 服务器上部署它时，我通过电子邮件通过 elmah 收到此错误，并在数据库中有相应的条目

```
The parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult DetailSmallForeignWidget(System.String, Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32], System.String, System.String)' in 'BAR.Web.Controllers.ForeignRestaurantWidgetController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. 
```

在使`id`参数可以为空后，我知道相应的操作方法被调用了两次。查看代码看起来不错，但不知道为什么会这样。

action 方法的路由如下：

```
_routes.MapRoute(null, "widget/DetailWidget/{name}/{id}/{langID}/", 
    new { controller = "Widget", action = "DetailWidget" }, 
    new[] { "BAR.Web.Controllers" }); 
```

函数签名如下：

```
public override ActionResult DetailWidget(
    string name, 
    int id, 
    string refCode, 
    int? partySize,
    DateTime? when, 
    int? sittingTimeId, 
    string time, 
    string langID)

<script type="text/javascript" src="http://localhost/widget/IncludeWidget/Street/205/iframe/ja-JP" ></script> 
```

对应路线

```
_routes.MapRoute(null, "widget/IncludeWidget/{name}/{id}/{mode}/{langID}/",
                 new { controller = "Widget",
                 action = "IncludeWidget" },
                 new[] { "BAR.Web.Controllers" }); 
```

Includewidget 函数内部。代码如下所示：

```
ContentResult content = new ContentResult();
string url = Url.ToAbsoluteUrl(string.Format("widget/DetailWidget/{0}/{1}/{2}", name, id.Value, langID), true);
content.Content = @"document.write('<iframe src=""" + url + @""" width=""300"" height=""430""  style=""border: none;"" frameborder=""0""></iframe>')";
content.ContentType = "text/javascript";
return content 
```

我尝试重命名路由参数并尝试从视图页面编写脚本引用，但它仍然显示基于新参数名称的相同错误。我该如何解决这个问题？

# scheme - 方案定义语法体形式

> ID：15882145
> 
> 赞同：1
> 
> 时间：2013-04-08T14:45:23.043
> 
> 标签：scheme

```
(define-syntax let  
  (syntax-rules ()  
    [(_ ((x e) ...) b1 b2 ...)  
     ((lambda (x ...) b1 b2 ...) e ...)])) 
```

> 我们对 let 的定义中的单一规则应该是不言自明的，但有几点值得一提。首先，let 的语法要求正文至少包含一种形式；因此，我们指定了 b1 b2 ... 而不是 b ...，这可能看起来更自然。

为什么使用 (b1 b2 ...) 来表示形式上的租约？使用 (b ...) 更自然吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:19:37.900

`b ...`允许零个或多个表达式，而 for`b1 b2 ...`必须`b1`是一个表达式，而 while`b2 ...`是零个或多个表达式。由于您不希望人们编写 bodyless `let`，因此该`b1 b2 ...`表单强制执行至少一种身体表达。

你知道正则表达式吗？认为`b ...`是类似的`.*`，而`b1 b2 ...`更像是`..*`。

# xcode - Teamviewer - 从 Windows 向 Mac 发送控制键

> ID：15882149
> 
> 赞同：9
> 
> 时间：2013-04-08T14:45:30.267
> 
> 标签：xcode, xcode4, interface-builder, remote-access, xcode4.6

我正在从远程位置到我的 Mac 上看电视来玩 XCode（在 Windows pc 上）。在界面生成器中，我正在尝试执行控件拖动操作。我尝试按下 ctrl 按钮并拖动视图控制器，但没有任何反应。如果它有任何重要意义，我已经检查了发送组合键。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-22T06:02:12.997

作为一种解决方法，不要控制拖动，而是尝试控制单击要从中拖动的对象。将出现列出对象出口等的黑色弹出框，然后您可以从那里左键单击从圆圈拖动到您想要的任何位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:51:36.470

试试 windows 键，它的功能类似于 OSX Command 键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T18:27:49.463

可以在 Mac 上使用 TeamViewer 10.0.52680 进行确认，右键单击或控制单击故事板上的对象，然后只需左键单击拖动到视图控制器即可创建正确的引用出口。

如果右键单击有问题，请转到要从中删除的计算机上的 TeamViewer 首选项，转到高级 > 常规，然后选择“使用控制和鼠标单击作为鼠标右键单击”。这将使您能够通过右键单击将控制按钮和左键单击组合发送到远程计算机。

# coffeescript - 编译为 `.js` 保持相同的文件夹结构

> ID：15882151
> 
> 赞同：3
> 
> 时间：2013-04-08T14:45:35.327
> 
> 标签：coffeescript, gruntjs

在我的应用程序（Asp.net mvc）中，我有以下文件夹结构：

![饲料结构](https://i.stack.imgur.com/Ekhrk.png)

`Scripts`文件夹包含所有`.js`和`.coffee`文件。在文件`Controllers`夹中，每个控制器都有一个文件夹。

我需要每当`.coffee`文件更改时，都会`.js`在同一个文件夹中创建一个同名的新文件。

```
module.exports = (grunt) -> 
    # Configurações
    grunt.initConfig
        coffee:
            compile:
                options:
                    basePath: 'Scripts'
                    preserve_dirs: true
                files: 'Scripts/*.js': 'Scripts/**/*.coffee'

    # Plugins
    grunt.loadNpmTasks 'grunt-contrib-coffee' 
```

**当我运行 grunt:`grunt coffee`**时出现以下错误：

> 无法写入“Scripts/*.js”文件（错误代码：ENOENT）。使用 --force 继续

![错误的咕噜声](https://i.stack.imgur.com/L6PmC.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T14:58:05.467

以这种方式使用它：

```
coffee:
  compile:
    files: [
      expand: true
      cwd: "./Scripts"
      src: ["**/*.coffee"]
      dest: "./Scripts"
      ext: ".js"       
    ] 
```

在这里阅读更多信息：http: [//gruntjs.com/configuring-tasks#building-the-files-object-dynamically](http://gruntjs.com/configuring-tasks#building-the-files-object-dynamically)

# javascript - Google Maps API - 想要循环并获取 KML 中点的方向

> ID：15882152
> 
> 赞同：0
> 
> 时间：2013-04-08T14:45:35.523
> 
> 标签：javascript, google-maps, directions

我有一个生成 KML 文件的程序，现在想要循环浏览地标以找到最近的地标。但是我在骑自行车时遇到了问题。

基本上，我将 KML 解析为 Google 地球插件。单击 Google 地球插件中的一个地标会得到它的纬度/经度（如 StartLat 和 StartLon）并启动以下代码：

```
function GetDir()
{
  var PlaceMarks=ge.getElementsByType('KmlPlacemark');
  i=0;
  GetNext=1;
  while(i<3)
  {
    if(GetNext==1)
    {
      GetNext=0;
      var PM2 = PlaceMarks.item(i);
      var request=
      {
        origin: StartLat + ", " + StartLon,
        destination: PM2.getGeometry().getLatitude() + ", " + PM2.getGeometry().getLongitude(),
        travelMode: google.maps.DirectionsTravelMode.DRIVING
      };
      directionsService.route(request, function(result, status)
      {
        if (status == google.maps.DirectionsStatus.OK)
        {
          directionDisplay.setDirections(result);
        }
      });
    }
  }
} 
```

我在地图上有一个“空闲”侦听器，所以理论上，在它找到方向并显示它们之后，我会增加 1，所以我们移动到下一个地标，并且 GetNext 设置为 1，所以我们调用再次指示。

此刻它咆哮起来，IE8（我们的 IT 部门允许我们使用的唯一浏览器）说脚本运行缓慢。我有一种感觉，使用这个循环，它无法听到响应。

编辑 - 抱歉，应该提到，在同一页面上还有一张显示结果的地图。它在只处理一个（在这个循环之外）时确实有效，而目前这个循环只处理三个（因此是 while(i<3)）。这样做的目的是处理大量地标，我可以毫无问题地获得 KML 文件中的地标数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:52:10.197

解决了。我没有增加空闲侦听器上的所有内容，而是让空闲侦听器调用移动到下一个点的过程。相关代码：

这会将 KML 文件放入 Google 地球 API，并附加代码以开始循环：

```
function GetKML()
{
  if (currentKmlObject)
    ge.getFeatures().removeChild(currentKmlObject);
  var KmlBox = document.getElementById('kml-box');
  var KmlString = KmlBox.value;
  try
  {
    currentKmlObject=ge.parseKml(KmlString);
    ge.getFeatures().appendChild(currentKmlObject);
    google.earth.addEventListener(currentKmlObject, 'click', function(event)
    {
      var placemark = event.getTarget();
      StartLat = placemark.getGeometry().getLatitude();
      StartLon = placemark.getGeometry().getLongitude();
      alert('Start point set. Latitude: ' + StartLat + ' Longitude: ' + StartLon + '. Finding nearest...');
      AreWeSearching=1;
      i=0;
      GetDir();
    });
    var PlaceMarks=ge.getElementsByType('KmlPlacemark');
    KMLLength=PlaceMarks.getLength();
    alert('KML parsed and added. ' + KMLLength + ' points available. Please click which placemark you would like as your START point on the EARTH screen.');
  }
  catch(ex)
  {
    alert('Parse error');
  }
} 
```

这是询问地标的 GetDir 函数的代码。目前这只最多 10，但我将只使用 PlaceMarks 长度：

```
function GetDir()
{
  if(i==10){AreWeSearching=0;}
  if(AreWeSearching==1)
  {
    var PlaceMarks=ge.getElementsByType('KmlPlacemark');
    var PM2 = PlaceMarks.item(i);
    var request=
    {
      origin: StartLat + ", " + StartLon,
      destination: PM2.getGeometry().getLatitude() + ", " + PM2.getGeometry().getLongitude(),
      travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(result, status)
    {
      if (status == google.maps.DirectionsStatus.OK)
      {
        directionDisplay.setDirections(result);
      }
    });
    i=i+1;
  }
} 
```

在 Maps API 的空闲侦听器上，它再次调用 GetDir 函数，因此本质上它是第一次调用，并且只要它空闲，就会再次调用，直到我们停止处理它。

基本上，我构建它的目的（对于那些还没有解决它的人）是为了让我可以找到离我点击的地标最近的地标。使用一些额外的代码，它可以让我绕过 KML 文件的地标，从选定的地标开始。

因此，对于任何想要从您的硬盘驱动器路由 KML 文件的方法的人，请使用 Google 地球插件和 Google 地图插件创建一个页面。如上所述，将 KML 加载到 Google 地球中，然后使用 Google 地图和空闲侦听器循环浏览。

# php - 如何使用 Zend 2 渲染多个条码？

> ID：15882154
> 
> 赞同：1
> 
> 时间：2013-04-08T14:45:39.510
> 
> 标签：php, zend-framework, zend-framework2, barcode, barcode-printing

我正在尝试使用 Zend\Barcode 命名空间打印几个条形码。

问题是阅读[手册](http://framework.zend.com/manual/2.1/en/modules/zend.barcode.creation.html)我不能打印多个条形码。

我也无法在条形码之前打印回声。

如何同时打印多个条码和文本？

我使用的代码类似于这个：

```
use Zend\Barcode\Barcode;

$barcodeOptions = array('text' => '123456');
$rendererOptions = array();

Barcode::render(
    'code39', 'image', $barcodeOptions, $rendererOptions
);

$barcodeOptions = array('text' => '654321');
Barcode::render(
    'code39', 'image', $barcodeOptions, $rendererOptions
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:02:57.720

`Barcode::render()`生成图像，而不是其中包含图像的 HTML 页面。你需要做这样的事情：

条形码.php：

```
use Zend\Barcode\Barcode;
$barcodeOptions = array('text' => $_GET['code']);
$rendererOptions = array();
Barcode::render(
    'code39', 'image', $barcodeOptions, $rendererOptions
); 
```

然后在您的 HTML 中，您引用该脚本，就好像它是一个图像：

```
<img src="http://domain.com/barcode.php?code=123456" />
<img src="http://domain.com/barcode.php?code=654321" /> 
```

# perl - mojolicious 脚本工作了三遍，然后崩溃

> ID：15882157
> 
> 赞同：0
> 
> 时间：2013-04-08T14:45:50.120
> 
> 标签：perl, mod-perl, mojolicious, openbsd

以下脚本应该演示我在 OpenBSD5.2 上使用 mod_perl 使用 Mojolicious 时遇到的问题。

该脚本工作正常 4 次被称为 mod_perl 下的 CGI。脚本的额外运行导致 Mojolicious 不返回异步帖子。通常在数据到达时调用的 subs 似乎不再被调用。从命令行运行脚本工作正常，因为 perl 完全从头开始，一切都重新初始化，而 mod_perl 下不是这种情况。停止和启动 Apache 会重新初始化 mod_perl，以便脚本可以再运行 4 次。

我只在 OpenBSDs 端口树 (2.76) 中提供的版本中使用 Mojolicious 在 OpenBSD5.2 上对此进行了测试。我认为这有点旧，但这就是 OpenBSD 附带的。

我在这里做错了什么吗？或者 Mojolicious 有可能有一些循环引用或导致这个问题的东西？

我对正在使用的平台（OpenBSD）没有影响。所以请不要建议“使用 Linux 并安装最新的 Mojolicious 版本”。但是，如果您确定运行更高版本的 Mojolicous 会解决问题，我可能会获得安装它的许可（尽管我还不知道如何安装）。

提前致谢！

T。

这是脚本：

```
#!/usr/bin/perl

use diagnostics;
use warnings;
use strict;
use feature qw(switch);
use CGI qw/:param/;
use CGI qw/:url/;
use CGI::Carp qw(fatalsToBrowser warningsToBrowser);
use Mojo::IOLoop;
use Mojo::JSON;
use Mojo::UserAgent;

my ($activeconnections, $md5, $cgi);

my $ua = Mojo::UserAgent->new;
$ua->max_redirects(0)->connect_timeout(3)->request_timeout(6); # Timeout 6 seconds of which 3 may be connecting
my $delay = Mojo::IOLoop->delay();

sub online{
 my $url = "http://www.backgroundtask.eu/Systeemtaken/Search.php";
 $delay->begin;
 $activeconnections++;
 my $response_bt = $ua->post_form($url, { 'ex' => $md5 }, sub {
    my ($ua, $tx) = @_;
    my $content=$tx->res->body;
    $content =~ m/(http:\/\/www\.backgroundtask\.eu\/Systeemtaken\/taakinfo\/.*$md5\/)/;
        if ($1){
                print "getting $1\n";
                my $response_bt2 = $ua->get($1, sub {
                        $delay->end();
                        $activeconnections--;
                        print "got result, ActiveConnections: $activeconnections\n";
                        ($ua, $tx) = @_;
                        my $filename = $tx->res->dom->find('table.view')->[0]->find('tr.even')->[2]->td->[1]->all_text;
                        print "fn = " . $filename . "\n";
                }
            )
        } else {
                print "query did not return a result\n";
                $activeconnections--;
                $delay->end;
        }
 });
}

$cgi = new CGI;
print $cgi->header(-cache_control=>"no-cache, no-store, must-revalidate") . "\n";

$md5 = lc($cgi->param("md5") || ""); # read param
$md5 =~ s/[^a-f0-9]*//g if (length($md5) == 32); # custom input filter for md5 values only

if (length $md5 != 32) {
        $md5=lc($ARGV[0]);
        $md5=~ s/[^a-f0-9]*//g;
        die "invalid MD5 $md5\n" if (length $md5 ne 32);
}

online;

if ($activeconnections) {
        print "waiting..., activeconnections: $activeconnections\n" for $delay->wait;
}

print "all pending requests completed, activeconnections is " . $activeconnections . "\n";
print "script done.\n md5 was $md5\n";
exit 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:32:28.357

好吧，我不想这么说，但这里有很多错误。最明显的是你使用`... for $delay->wait`它没有多大意义。你也在比较数字`ne`而不是`!=`. `my`在更深的回调中没有参数对于异步风格的代码来说似乎是有问题的。

然后有一些代码味道，比如正则表达式的 url 和关闭`$md5`不必要地关闭变量。

最后，既然 Mojolicious 可以在 CGI 下正常运行，为什么还要使用 CGI.pm？当你这样做时，IOLoop 已经在运行，所以有些事情变得更容易了。是的，我知道您使用的是 Mojolicious 提供的系统，但是我觉得我应该提到当前版本是 3.93 :-)

无论如何，这里有一个例子，它去掉了很多东西，但仍然应该做与例子几乎相同的事情。当然，如果没有站点的有效 md5，我将无法对其进行测试（而且如果没有示例数据，我也无法摆脱 url 正则表达式）。

```
#!/usr/bin/perl

use Mojolicious::Lite;
use Mojo::UserAgent;

my $ua = Mojo::UserAgent->new;
$ua->max_redirects(0)->connect_timeout(3)->request_timeout(6); # Timeout 6 seconds of which 3 may be connecting

any '/' => sub {
  my $self = shift;
  $self->res->headers->cache_control("no-cache, no-store, must-revalidate");

  my $md5 = lc($self->param("md5") || ""); # read param
  $md5 =~ s/[^a-f0-9]*//g if (length($md5) == 32); # custom input filter for md5 values only

  if (length $md5 != 32) {
    $md5=lc($ARGV[0]);
    $md5=~ s/[^a-f0-9]*//g;
    die "invalid MD5 $md5\n" if (length $md5 != 32);
  }

  $self->render_later; # wait for ua

  my $url = "http://www.backgroundtask.eu/Systeemtaken/Search.php";
  $ua->post_form($url, { 'ex' => $md5 }, sub {
    my ($ua, $tx) = @_;
    my $content=$tx->res->body;
    $content =~ m{(http://www\.backgroundtask\.eu/Systeemtaken/taakinfo/.*$md5/)};
    return $self->render( text => 'Failed' ) unless $1;
    $ua->get($1, sub {
      my ($ua, $tx) = @_;
      my $filename = $tx->res->dom->find('table.view')->[0]->find('tr.even')->[2]->td->[1]->all_text;
      $self->render( text => "md5 was $md5, filename was $filename" );
    });
  });

};

app->start; 
```

# asp.net-web-api - 如何使用 Fiddler 调试 DnnApiController？

> ID：15882163
> 
> 赞同：0
> 
> 时间：2013-04-08T14:45:58.930
> 
> 标签：asp.net-web-api, dotnetnuke

这是我遵循的 DnnApiController 文档

[http://www.dotnetnuke.com/Resources/Blogs/EntryId/3541/WebAPI-Tips.aspx](http://www.dotnetnuke.com/Resources/Blogs/EntryId/3541/WebAPI-Tips.aspx)

不幸的是，文档没有解释如何将类库集成到 Dnn 中。该文档似乎表明可以浏览在本地 IIS 上配置的 Dnn 解决方案，例如

```
http://dotnetnuke/DesktopModules/MyServices/API/RoleSubScription/GetPublicRoles 
```

其中 RoleSubscription 是 RoleSubscriptionController 而 GetPublicRoles 是 GET 方法。

我已经通过 Fiddler 调试了一个 Web API 控制器方法，但是我使用了 MVC 4 Wep API 项目并且它运行良好，我能够使用 IIS express 和 Fiddler composer 使用 IIS express Url 对其进行调试。

正如我所看到的，有几个选项可以调试我创建的这个 DnnApiController

1.  尝试运行类库项目本身 - 这需要将类库项目转换为某种 Web 应用程序项目。

2.  创建一个 MVC 4 Web API 项目并按照 Dnn web api 提示中的建议添加适当的程序集和配置 = 这看起来是最好的选择，也是我可能首先尝试的选择。

3.  在最新版本的 Dnn 的本地 IIS 安装中，将我创建的类添加到 DestktopModules 下的文件夹结构中 - 这不适用于 IIS express。

4.  如果我想使用 IIS express，我可以将类添加到我的文件系统版本 Dnn 中的桌面模块下的文件夹结构中 - 这可能有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:04:25.323

我得到它的工作，谢谢。上面链接中的方法确实有效。我使用了一个类库并将构建目标指向 DNN 的主 bin 文件夹。我以两种方式对其进行了调试，首先使用示例中建议的 URL 结构，然后我向 DNN 添加了一个模块，并使用 jQuery .ajax 调用访问了 Web API 方法。我使用 Newtonsoft.Json 将 DnnContent 对象转换为 json。

这是 DnnApiController 类

```
using System.Net;
using System.Net.Http;
using System.Web.Http;
using DotNetNuke.Web.Api;
using Newtonsoft.Json;

namespace DnnModule
{
    public class DnnContentController : DnnApiController
    {
        private IDnnContentRepository _dbRepository;
        public DnnContentController()
        {
            _dbRepository = new DnnContentRepository();

        }

        [AllowAnonymous]
        [HttpGet]
        public HttpResponseMessage GetContent(int id)
        {
            if (id != 0)
            {
                var dnnContent = new DnnContent
                {
                    Content = _dbRepository.GetContent(id),
                    Title = _dbRepository.GetTitle(id)
                };
                return Request.CreateResponse(HttpStatusCode.OK, JsonConvert.SerializeObject(dnnContent));
            }
            return Request.CreateResponse(HttpStatusCode.BadRequest, JsonConvert.SerializeObject(string.Empty));
        }
    }
}

public class DnnContent
{
    public string Content { get; set; }
    public string Title { get; set; }
} 
```

这是 Dnn 模块用户控件的 UI 代码

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="DnnContentViewer.ascx.cs" Inherits="DnnModule.DnnContentViewer" %>

<h2>IngenMobile DNN Content Viewer</h2>

<script type="text/javascript">
    $(document).ready(function () {
        $("#getDnn").click(function () {
            var id = $("#id").val();
            GetDnnContent(id);
        });
    });
    function GetDnnContent(moduleId) {
        jQuery.support.cors = true;

        $.ajax({
            url: 'DesktopModules/DnnModule/api/DnnContent/GetContent?id=' + id,
            type: 'GET',

            dataType: 'json',
            success: function (data) {
                var obj = $.parseJSON(data);
                $('#result').html("Title: " + obj.Title + "</br>" + "Content: " + htmlDecode(obj.Content));
            },
            error: function (request, status, error) {
                $('#result').html('Error: ' + request.statusText);
            }
        });
    }
    function htmlDecode(value) {
        if (value) {
            return $('<div />').html(value).text();
        } else {
            return '';
        }
    }
</script>
Enter id: <input type="text" id="id" value="" />
<input id="getDnn" type="button" value="Submit" />
<hr/>
<div id="result"></div> 
```

我确实遇到了未找到响应的问题。问题是我使用了带有“。”的模块名称。在里面。当我拿了'。在模块名称之外，它起作用了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T21:48:00.580

查看这个 HelloWorld 示例，看看它是否对您有任何帮助。

[DotNetNuke WebAPI HelloWorld 示例 - 第一部分](http://talkdotnet.wordpress.com/2014/03/18/dotnetnuke-webapi-helloworld-example-part-one/)

# highcharts - 柱形图/条形图中每个点的特定宽度

> ID：15882169
> 
> 赞同：0
> 
> 时间：2013-04-08T14:46:24.013
> 
> 标签：highcharts

是否有一种本地方法可以让每列具有不同宽度的柱形图？为每个点定义一个“宽度”属性应该很简单，但它显然不存在:(

我只找到了这个解决方案：[http](http://highslide.com/forum/viewtopic.php?f=9&t=6401) ://highslide.com/forum/viewtopic.php?f=9&t= 6401，但它不是很纯粹......有人知道Highcharts团队是否计划工作吗？--应该在很多情况下都非常有用。

# haskell - 使用 Haskell 处理联合按键

> ID：15882170
> 
> 赞同：3
> 
> 时间：2013-04-08T14:46:31.463
> 
> 标签：haskell, keyboard-events

在 Haskell 中编写程序，我正在努力处理 ctrl-s 和 ctrl-l 形式的按键

我正在使用以下代码：

```
main :: IO ()
main = do
  hSetBuffering stdin NoBuffering
  x <- getChar
  putStrLn ("You pressed: " ++ [x]) 
```

如何让它识别被按下的 Ctrl 按钮？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T15:00:52.950

`getChar`使您可以访问字符，而不是按键。您获得的字符取决于用户的操作系统、键盘布局和输入法的选择。按键 Ctrl-S 或 Ctrl-L 不会生成“标准”字符（当然，有些系统会为这些控制字符提供标准的 ASCII 代码，而其他系统不会）。

如果你想要正确的按键处理，你需要一个真正的输入库——例如，SDL 或 WxWidgets 或 GTK；每一个都不仅仅是一个输入库，但它们确实有按键抽象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:12:08.340

我目前在非 unix 系统上（导致`unix`, 的依赖项`vty`无法安装），但以下可能有效。

```
import Control.Exception

import Graphics.Vty.LLInput

import System.Console.Terminfo

main :: IO ()
main = do
  term <- setupTermFromEnv
  bracket (initTermInput 0 term) (\ (_, exit) -> exit) $ \ (readEvent, _) -> do
    let readKeyEvent = do
          ev <- readEvent
          case ev of
            EvKey k ms -> return (k, ms)
            _ -> readKeyEvent
    readKeyEvent >>= print 
```

# c# - Task.ContinueWith 和 TaskContinuationOptions.AttachedToParent

> ID：15882171
> 
> 赞同：7
> 
> 时间：2013-04-08T14:46:33.557
> 
> 标签：c#, .net, task-parallel-library

我正在尝试使用`Task.ContinueWith`with`TaskContinuationOptions.AttachedToParent`来执行延续任务，例如

```
Task outerTask = new Task(() => Console.WriteLine("Outer"));
Task innerTask = outerTask.ContinueWith(t =>
    {
        Thread.Sleep(500);
        Console.WriteLine("Inner");
    }, 
    TaskContinuationOptions.AttachedToParent | TaskContinuationOptions.OnlyOnRanToCompletion);
outerTask.Start();
outerTask.Wait();
Console.WriteLine("Outer done"); 
```

此代码的输出是

```
Outer
Outer done
Inner 
```

但我期望/试图实现的是

```
Outer
Inner
Outer done 
```

是否可以用于`AttachedToParent`阻止外部任务完成，或者`AttachedToParent`仅对嵌套任务有效？

编辑：

我想要实现的是我想在`outerTask`成功完成后运行延续任务。我想`outerTask`将异常传播`innerTask`给调用者，而不必处理`innerTask`. 如果`outerTask`失败，它应该立即抛出异常（`outerTask.Wait()`不调用`innerTask`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T18:18:43.740

您的代码中没有父子任务。
您可能想检查什么是内部或子任务，可以有两种类型：

*   [分离的子任务或嵌套任务](http://www.blackwasp.co.uk/NestedTasks.aspx)，即使用另一个任务的委托创建的并行任务，而不连接到任务创建者
*   [附加的子任务或简单的子任务](http://www.blackwasp.co.uk/ChildTasks.aspx)，在这种情况下，如果子任务抛出一个未处理的异常，它会被父任务捕获并重新抛出

    **更新**

    > “是否可以使用 AttachedToParent 来阻止外部任务完成......”
    > 
    > “我想在outerTask成功完成后运行一个延续任务”

    CiCiting 从最后：

    *   “在其所有子任务完成之前，父任务不会完成执行，无论是正常还是异常。父任务本质上是为其所有子任务执行等待命令
    *   如果一个子任务抛出一个未处理的异常，它会被父任务捕获并重新抛出。许多子任务可能会引发异常。所有这些都将与父级直接在单个 AggregateException 中抛出的任何未处理异常结合在一起。”

对于您没有父子任务的情况，请阅读~~[使用延续处理异常](http://www.blackwasp.co.uk/ContinuationTasks_3.aspx)：~~

> “重要的是要了解，除了控制调度的关系之外，先行项和延续之间没有关系。具体来说，任务引发的异常不会传播到其链接的延续任务。这意味着您应该检查所有的异常您运行的任务。最简单的解决方案是等待所有可能出错的任务完成并用 Try / Catch 块包围 Wait 方法“

在提供的链接文章中也有捕获传播异常的代码示例

**更新：**

> 编辑：
> 
> 我想要实现的是我想在 outerTask 成功完成时运行延续任务。我希望outerTask 将异常从innerTask 传播到调用者，而不必处理innerTask。如果outerTask 失败，它应该立即抛出异常（在outerTask.Wait() 上而不调用innerTask）。

可能您已经看过 MSDN 文章[Task.ContinueWith Method (Func, CancellationToken, TaskContinuationOptions, TaskScheduler)](http://msdn.microsoft.com/en-us/library/dd784422%28v=vs.100%29.aspx)中的代码示例，它说明了如果前件失败/成功（反之亦然，4 种组合）如何防止/遵循继续任务。但这不是父子任务，而是先行延续任务，因此在任一方向上都没有异常传播的遏制或链接。

在子父任务的情况下，不可能在子任务已经启动并且只有在父任务失败（或显然从子任务中取消父任务）之后才能阻止子任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:01:05.277

要达到你想要的，换行

```
outerTask.Wait(); 
```

到

```
innerTask.Wait(); 
```

一旦外部任务完成，执行通过等待并写入“外部完成”，而内部任务在 Thread.Sleep 上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T18:37:20.777

当第一个任务被认为“完成”时，向任务添加延续的行为永远不会改变。在运行所有（甚至一个特定的）延续之前，无法强制父级不被标记为“已完成”。

# servicestack - ServiceStack：未找到请求的处理程序？

> ID：15882178
> 
> 赞同：2
> 
> 时间：2013-04-08T14:46:48.833
> 
> 标签：servicestack

我定义了三个路线。前两个工作正常，但最后一个在主题中返回错误。

```
 Routes.Add<FeeInstructionsList>("/policies/{clientPolicyId}/feeinstructions", "GET");
    Routes.Add<FeeInstructionsEdit>("/policies/{clientPolicyId}/feeinstructions/{feetype}", "GET");
    Routes.Add<List<FeeInstructionEditInfo>>("/policies{clientPolicyId}/feeinstructions", "POST"); 
```

当我有第三条路线只是“/feeinstructions”时，它工作正常，但是当我添加上面的路线时它不起作用。

FeeInstructionEditInfo 没有名为“clientPolicyId”的成员。这可能是一个原因。如果是这样，我如何将它传递给服务而不需要修改我的 dto。它可以是这样的服务操作的附加参数吗？我不认为这是可能的，因为 ss 是每个请求一个 dto，但也许有办法？

```
public List<FeeInstructionEditInfo> Post(int clientPolicyId, List<FeeInstructionEditInfo> request) 
```

目前这个方法被声明为

```
public List<FeeInstructionEditInfo> Post(List<FeeInstructionEditInfo> request) 
```

这是正在发送的请求

```
> POST http://localhost:12543/api/policies/680455600/feeinstructions/
> HTTP/1.1 Content-Type: application/json Accept-Language: en-US
> Referer: http://localhost:12543/ClientBin/SR.SRUnite.ShellUI.xap
> Content-Length: 1408 Accept-Encoding: identity Accept:
> application/json User-Agent: Mozilla/5.0 (compatible; MSIE 9.0;
> Windows NT 6.1; WOW64; Trident/5.0; BOIE9;ENUS) Host: localhost:12543
> Connection: Keep-Alive Pragma: no-cache 
```

这些是我原来的 dto，这些没有改变

```
 [Route("/policies/{clientPolicyId}/feeinstructions/{feetype}","GET")]
 public class FeeInstructionsEdit
 {
     public int ClientPolicyId { get; set; }
     public string FeeType { get; set; }
 }

 public class FeeInstructionsEditResponse
 { 
     public List<KeyValuePair> Instructions { get; set; }
     public List<KeyValuePair> Contacts { get; set; }
     public List<FeeInstructionEditInfo> FeeInstructions { get; set; }       
 }

public partial class FeeInstructionEditInfo
{
    public int FeeInstructionId { get; set; }

    public string FeeTypeCode { get; set; }
    public string FeeTypeDescription { get; set; }
    public string FeeTypeGroupCode { get; set; }

    public string ProductName { get; set; }
    public string InsuredType { get; set; }
    public string Demographic { get; set; }
    public string Instruction { get; set; }
    public string Contact { get; set; }
    public decimal? FeeAmount { get; set; }
} 
```

我会将 FeeInstructionEditInfo 列表发布到 /clientPolicies/342434/feeinstructions 并且它不起作用，但发布到 /feeinstructions 会。

我现在使用这对 dto 发布。

```
 [Route("feeinstructions","POST")]
 public class FeeInstructionsSave
 {
     public int ClientPolicyId { get; set; }
     public List<FeeInstructionEditInfo> FeeInstructions { get; set; }
 }

 public class FeeInstructionsSaveResponse : IHasResponseStatus
 {
      public ResponseStatus ResponseStatus { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:55:10.287

[ServiceStack](http://www.servicestack.net/)中的一个[基本概念](https://github.com/ServiceStack/ServiceStack/wiki/What-is-a-message-based-web-service?)是**每个服务都** 需要使用**Request DTO**来调用。可以使用 PathInfo、QueryString 和请求正文的任意组合填充此请求 DTO。

 ****这意味着如果你想传入一个集合，你需要让你的 Request DTO 继承它，例如：

```
[Route("/policies/{clientPolicyId}/feeinstructions", "POST")]
public class EditFeeInstructions : List<FeeInstructionEditInfo>
{
} 
```

现在一切正常：

```
public List<FeeInstructionEditInfo> Post(EditFeeInstructions request)
{
   ...
} 
```

对于空请求，您的服务将如下所示：

```
public class EmptyRequest {} 

public object Post(EmptyRequest request)
{
   ...
} 
```

即使您想[自己手动处理请求](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization)，您仍然需要提供一个 Request DTO 来表明您的意图，例如：

```
public class Hello : IRequiresRequestStream
{
    //The raw Http Request Input Stream gets injected here
    public Stream RequestStream { get; set; }
} 
```****

# android - Android - 使用 FLAG_ACTIVITY_NEW_TASK

> ID：15882180
> 
> 赞同：9
> 
> 时间：2013-04-08T14:46:51.753
> 
> 标签：android, android-intent, flags

我创建了一个带有按钮的简单应用程序。单击它会触发通知，单击通知会启动同一应用程序的新实例。但是，我希望单击通知应该让我回到触发通知的应用程序实例。为此，我查阅了 Android 文档以获取`FLAG_ACTIVITY_NEW_TASK`标志-

> 使用此标志时，如果您现在正在启动的 Activity 已经在运行任务，则不会启动新的 Activity；相反，当前任务将简单地以其上次所处的状态被带到屏幕的前面。有关禁用此行为的标志，请参见 FLAG_ACTIVITY_MULTIPLE_TASK。

基于此，在创建传递给 PendingIntent 的意图时，我设置了这个标志。但是，单击通知仍会启动应用程序的新实例。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:01:05.517

请记住，当您单击时`Notification`，`Context`意图正在启动。*该*上下文的任务上没有 Activity（事实上，它将是一个空白任务）。

这导致运行相同的两个版本`Activity`（尽管仍然只有一个你的实例`Application`）。每个`Activity`都运行不同的`Task`.

如果您在任何堆栈中都不需要相同类型的重复活动，则可以在此处使用答案：

[https://stackoverflow.com/a/2327027/726954](https://stackoverflow.com/a/2327027/726954)

否则，有很多方法可以“修复”这个问题，包括单例变量和跟踪哪些活动处于运行状态的应用程序上下文方法。

您可能需要针对这些搜索和优化您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:49:53.027

Android 中的任务是一个单独的用户工作流程。如果您有时会看到主屏幕，这通常意味着您开始一个新的。删除标志，它应该可以工作。如果没有，请尝试使用单顶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-09T15:59:38.460

试试下面的代码：

```
Intent resultIntent = new Intent(context, YourActivity.class);

resultIntent.setAction(Intent.ACTION_MAIN)       resultIntent.addCategory(Intent.CATEGORY_LAUNCHER);

PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
                resultIntent, 0);

 .setContentIntent(pendingIntent) 
```

# android - Android OpenCV - 从 Houghlines 检测曲线

> ID：15882181
> 
> 赞同：6
> 
> 时间：2013-04-08T14:46:51.840
> 
> 标签：android, opencv, image-processing

我正在使用适用于 Android 的 OpenCV 2.4.3.2 编写应用程序。
我的应用程序是关于车牌识别的。
有几种方法可以做到，我选择执行以下操作：

1\. 将图像转换为 HSV 颜色空间
2\. 根据车牌 HSV 阈值图像（在我的国家它们是黄色
的......） 3\. 平滑图像使用高斯模糊
4\. 检测边缘
5\. 找到轮廓
6\. 为 houghlines 提供资金
7\. 从 houglines 中检测与矩形匹配的曲线
我被困在 7 处，我无法找到一种方法来成功地从 houghlines 中检测矩形。

我非常感谢 Java 中的代码示例，因为大多数示例都是 C/C++ 中的，并且转换它并不是那么简单。
这是我的代码（现在我只是在画线......）：

```
Imgproc.cvtColor(inputFrame, mRGBMat, Imgproc.COLOR_RGBA2BGR);
// convert HSC color space
Imgproc.cvtColor(mRGBMat, mHSVMat, Imgproc.COLOR_BGR2HSV);
// Filter out colors which are out of range (license plate hue ~ 14)
            Core.inRange(mHSVMat, new Scalar(9, 70, 80, 0), new Scalar(30, 255,
                    255, 0), mGrayMat);
            // some smoothing of the image
            for (int i = 0; i < 10; i++) {
                Imgproc.GaussianBlur(mGrayMat, mGrayMat, new Size(9, 9), 2, 2);
            }
Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_DILATE,
                    new Size(3, 3), new Point(1, 1));
Imgproc.Canny(mGrayMat, mGrayMat0, 48, 120);
Imgproc.dilate(mGrayMat0, mGrayMat0, kernel);
kernel.release();
List<MatOfPoint> contours = new Vector<MatOfPoint>();
            Imgproc.findContours(mGrayMat0, contours, mHirerchy,
                    Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_SIMPLE);
            Mat lines = new Mat(); // finds houghlines in the contours
            Imgproc.HoughLinesP(mGrayMat0, lines, 1, Math.PI / 180, 1);
            for (int x = 0; x < lines.cols(); x++) {
                double[] vec = lines.get(0, x);
                double x1 = vec[0], y1 = vec[1], x2 = vec[2], y2 = vec[3];
                Point start = new Point(x1, y1);
                Point end = new Point(x2, y2);
                Core.line(mRgba, start, end, RECT_COLOR, 1);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:18:00.253

我以前写过这样的算法。您将线条分为两种类型：1）垂直 2）水平 x）要删除的异常值

然后，您将线条进一步分为两个子类型：1a) 垂直，左边框 1b) 垂直，右边框 1x) 删除的异常值 2a)、2b)、2x)。

获得这些线的平均斜率和截点，你就有了你的“矩形”。

# javascript - window.location.href 在 Ipad 上不起作用

> ID：15882185
> 
> 赞同：0
> 
> 时间：2013-04-08T14:47:06.460
> 
> 标签：javascript, ipad, canvas, window.location

嗨，我在本地下载了带有以下代码的画布，但它在 Ipad 上不起作用。有没有办法做到这一点？谢谢。

```
 var img = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
 window.location.href=img; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:55:00.607

iOS 不允许以这种方式强制直接八位字节流下载图像。在这种情况下，您必须去掉 mime 类型并要求用户手动保存（按住 + 保存）。

```
var img = canvas.toDataURL("image/png");
window.location.href=img; 
```

也可以为用户代理添加一点 iOS 正则表达式，因此它可以在其他设备上本地运行。

# c++ - 没有互斥锁的事件通知

> ID：15882187
> 
> 赞同：19
> 
> 时间：2013-04-08T14:47:13.720
> 
> 标签：c++, multithreading, events, c++11, condition-variable

C++11 有 std::condition_variable，它的等待函数是

```
template< class Predicate >
void wait( std::unique_lock<std::mutex>& lock, Predicate pred ); 
```

它需要一个互斥锁。

据我了解 - 它的 notify_one 可以在不同步的情况下调用（我知道惯用的方法是将它与互斥锁一起使用）。

我有一个已经**在内部同步的****对象**- 所以我不需要互斥锁来保护它。一个线程应该等待与该对象关联的某个事件，而其他线程将被通知。

 **如何在 C++11 中没有互斥锁的情况下进行此类通知？也就是说，使用condition_variable 很容易，但它需要一个互斥体。我考虑过使用假互斥类型，但 std::mutex 被钉在等待界面中。

一种选择是轮询 std::atomic_flag + sleep，但我不喜欢睡觉。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T14:59:46.647

使用[`std::condition_variable_any`](http://en.cppreference.com/w/cpp/thread/condition_variable_any)您可以使用任何实现[BasicLockable](http://en.cppreference.com/w/cpp/concept/BasicLockable)概念的类。

对此我有一种不好的感觉，我检查了`std::condition_variable_any`libc++ 的实现。事实证明，它使用 a plain`std::condition_variable`和 a `std::shared_ptr`to a `std::mutex`，因此肯定会涉及一些开销，而无需深入挖掘。（这里有一些关于 SO 的其他帖子涵盖了这一点，尽管我首先必须搜索它）
因此，我可能会建议重新设计您的案例，以便同步实际上只能由保护普通条件变量的互斥锁完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T15:10:48.623

在某些线程模型中（尽管我怀疑现代模型），需要互斥锁来保护*条件变量本身*（而不是您正在同步的对象）免受并发访问。如果条件变量不受互斥锁保护，您可能会遇到条件本身的问题。

请参阅[为什么 pthread 的条件变量函数需要互斥锁？](https://stackoverflow.com/questions/2763714/why-do-pthreads-condition-variable-functions-require-a-mutex)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:17:06.063

> 我有一些对象，它已经在内部同步了——我不需要互斥锁来保护它。一个线程应该等待与该对象关联的某个事件，而其他线程会通知。

如果您不持有互斥锁，则等待线程将错过通知，无论您是使用`condition_variable`还是`condition_variable_any`使用内部互斥锁。

您需要将至少一位额外信息与条件变量相关联，并且该位应受互斥体保护。**

# gcc - CentOS：使用来自 devtoolset 的 GCC 4.7 导致链接 libstdc++ 不正确（未定义的符号）

> ID：15882188
> 
> 赞同：7
> 
> 时间：2013-04-08T14:47:14.750
> 
> 标签：gcc, centos, undefined-symbol, devtoolset

我正在使用 CentOS 6.3 的 devtoolset-1.0 来临时升级 GCC 版本。虽然我现在可以编译我的 C++ 应用程序，但最终的二进制文件缺少一些符号：

```
$ ldd -d -r myapp
$     [..]
$     libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x0000003216e00000)
$     [..]
$ undefined symbol: _ZNSt8__detail15_List_node_base11_M_transferEPS0_S1_    (./myapp)
$ undefined symbol: _ZNSt8__detail15_List_node_base7_M_hookEPS0_      (./myapp)
$ undefined symbol: _ZNSt8__detail15_List_node_base9_M_unhookEv (./myapp) 
```

我发现，这些是一些新功能，在“旧”libstdc++ 中没有，但在较新的 libstdc++ 中。在我的系统上，安装了 libstdc++（默认版本 4.4.7）和 devtoolset-1.0-libstdc++-devel（4.7 通过 devtoolset）。有趣的是，来自 devtoolset 的 libstdc++ 再次链接到旧的：

```
$ cat /opt/centos/devtoolset-1.0/root/usr/lib/gcc/x86_64-redhat-linux/4.7.0/libstdc++.so
$ /* GNU ld script
$    Use the shared library, but some functions are only in
$    the static library, so try that secondarily.  */
$ OUTPUT_FORMAT(elf64-x86-64)
$ INPUT ( /usr/lib64/libstdc++.so.6 -lstdc++_nonshared ) 
```

我真正想要的是替换 libstdc++ 绑定，但我不知道如何实现。我已经尝试设置 LD_LIBRARY_PATH 并指向 devtoolset 目录，但 libstdc++ 仍设置为旧位置。符号链接也没有成功，因为它是 ld 脚本而不是实际的共享库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-10-02T15:12:49.913

> 最终的二进制文件缺少一些符号

这看起来像是 中的一个错误`devtoolset-1-gcc`，我认为该错误已在最新版本的 devtoolset 中得到修复。

> 有趣的是，来自 devtoolset 的 libstdc++ 再次链接到旧的：

是的，这就是 devtoolset gcc 应该如何工作的（有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/52611144/981959)）。

> 我真正想要的是替换 libstdc++ 绑定，但我不知道如何实现。

你不能用 GCC 的 devtoolset 做到这一点，因为它甚至没有一个新的`libstdc++.so`库。如您所见，该文件实际上是一个链接器脚本，它将您的二进制文件链接到`libstdc++_nonshared.a /usr/lib64/libstdc++.so`

由于没有新的`libstdc++.so`，您无法链接到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:54:33.863

The GCC compiler and its libraries (very specially `g++` and corresponding `libstdc++` runtime) need to match. Compiling with a newer compiler **will** (very often, practically guaranteed if a new version of the language is supported) give binaries that don't work with an older library. Older binaries *might* work with a newer library, no guarantees here.

# codeigniter - 使用 CodeIgniter 中的表格对齐表格

> ID：15882190
> 
> 赞同：0
> 
> 时间：2013-04-08T14:47:17.317
> 
> 标签：codeigniter

我想在codeigniter的表格中对齐表格。当我尝试使用下面的代码进行对齐时。它抛出了错误。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Login Page</title>

</head>
<body>

    <div id="container">
        <h1>Login!</h1>

        <?php echo validation_errors(); ?>

        <?php 
        echo form_open('main/login_validation');
        <table>     
        <tr>
        <td>echo "<p> Email : "; </td>
        <td>echo form_input('email',$this->input->post('email')); </td>
        //echo "</p>";
        </tr>

        <tr>
        <td>echo "<p> Password : ";</td>
        <td>echo form_password('password');</td>
        //echo "</p>";
        </tr>

        <tr>
        <td>echo "<p>";</td>
        <td>echo form_submit('login_submit','Login');</td>
        //echo "</p>";
        </tr>

        <table>

        echo form_close();

        ?>

        <a href='<?php echo base_url()."index.php/main/signup";?>'> Sign Up </a>

                    </div>
</body>
</html> 
```

错误 **解析错误：语法错误，第 18 行 C:\wamp\www\jobsite\application\views\login.php 中的意外 '<'**我想知道我所做的另一件事是正确还是错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:55:58.620

您`php`在第 17 行有一个未关闭的标签

```
 echo form_open('main/login_validation'); ?> 
```

事实上，你有几个未关闭的标签，检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:56:47.403

当您切换到 HTML 输出时，您的标签仍然打开，您每次都需要关闭 PHP 标签...尝试类似

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Login Page</title>

</head>
<body>

    <div id="container">
        <h1>Login!</h1>

        <?php echo validation_errors(); ?>

        <?php echo form_open('main/login_validation'); ?>
        <table>     
        <tr>
        <td><p>Email :</p></td>
        <td><?php echo form_input('email',$this->input->post('email')); ?></td>
        </tr>

        <tr>
        <td><p>Password :</p></td>
        <td><?php echo form_password('password'); ?></td>
        </tr>

        <tr>
        <td></td>
        <td><?php echo form_submit('login_submit','Login'); ?></td>
        </tr>

        </table>

        <?php echo form_close(); ?>

        <a href='<?php echo base_url()."index.php/main/signup";?>'> Sign Up </a>
</div>
</body>
</html> 
```

# c# - Site.less' 是物理路径，但应为虚拟路径

> ID：15882193
> 
> 赞同：4
> 
> 时间：2013-04-08T14:47:19.987
> 
> 标签：c#, asp.net, asp.net-mvc-4, less, dotless

我在我的 MVC 4 项目中在网上找到了一个带有 LessTransformer.cs 的 DotLess。

```
using System;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Web.Optimization;
using MyNamespace.Infrastructure.Bundler;
using dotless.Core.configuration;

namespace MyNameSpace.Infrastructure.Transformers.Less
{
    public class LessTransform : IBundleTransform
    {
        private readonly DotlessConfiguration _configuration;

        public LessTransform(DotlessConfiguration configuration)
        {
            _configuration = configuration;
        }

        public LessTransform()
            : this(DotlessConfiguration.GetDefaultWeb())
        { }

        public void Process(BundleContext context, BundleResponse response)
        {
            var builder = new StringBuilder();

            _configuration.MinifyOutput         = false;
            _configuration.ImportAllFilesAsLess = true;
            _configuration.CacheEnabled         = false;
            _configuration.LessSource           = typeof(VirtualFileReader);

            foreach (var file in response.Files)
            {
                if (!File.Exists(file.FullName))
                {
                    continue;
                }

                var content = ResolveImports(file);

                builder.AppendLine((_configuration.Web) ?
                                    dotless.Core.LessWeb.Parse(content, _configuration)
                                    : dotless.Core.Less.Parse(content, _configuration));
            }

            response.ContentType = "text/css";
            response.Content = builder.ToString();
        }

        private static readonly Regex SLessImportRegex =
            new Regex("@import [\"|'](.+)[\"|'];", RegexOptions.Compiled);

        private static string ResolveImports(FileInfo file)
        {
            var content = File.ReadAllText(file.FullName, Encoding.UTF8);

            return SLessImportRegex.Replace(
                content,
                match =>
                {
                    var import = match.Groups[1].Value;

                    // Is absolute path?
                    Uri uri;
                    if (Uri.TryCreate(import, UriKind.Absolute, out uri))
                    {
                        return match.Value;
                    }

                    var path = Path.Combine(file.Directory.FullName, import);

                    if (!File.Exists(path))
                    {
                        throw new ApplicationException(string.Concat("Unable to resolve import ", import));
                    }
                    return match.Value.Replace(import, path);
                });
        }
    }
} 
```

我已经添加到这个

```
_configuration.MinifyOutput         = false;
_configuration.ImportAllFilesAsLess = true;
_configuration.CacheEnabled         = false;
_configuration.LessSource           = typeof(VirtualFileReader);

using System.IO;
using System.Web.Hosting;
using dotless.Core.Input;

namespace MyNamespace.Infrastructure.Bundler
{
    internal sealed class VirtualFileReader : IFileReader
    {
        public byte[] GetBinaryFileContents(string fileName)
        {
            fileName = GetFullPath(fileName);
            return File.ReadAllBytes(fileName);
        }

        public string GetFileContents(string fileName)
        {
            fileName = GetFullPath(fileName);
            return File.ReadAllText(fileName);
        }

        public bool DoesFileExist(string fileName)
        {
            fileName = GetFullPath(fileName);
            return File.Exists(fileName);
        }

        private static string GetFullPath(string path)
        {
            return HostingEnvironment.MapPath("\\Content\\css\\" + path);
        }
    }
} 
```

我有一个 Less 文件

```
@import url('LESS\Site.less');
@import url('LESS\Site.Main.less');

body {
    #featured-posts {
        clear:both;
    }
}

@media all and (max-width:320px) {
   @import url('LESS\Site.Mobile.less');
} 
```

（我已经为导入和 /w 和 /wo 函数符号 url() 尝试了各种路径

这都是在我的 BundleConfig 中提取的

```
 Bundle siteStyles = new      StyleBundle("~/bundles/css").Include("~/Content/css/Main.less");
    siteStyles.Transforms.Add(new LessTransform());
    siteStyles.Transforms.Add(new CssMinify());
    bundles.Add(siteStyles); 
```

在我添加 VirtualFileReader 之前，我收到了错误：-

C:/SourceControl/Git/MyNameSpace/MyNameSpace/Content/css/LESS/Site.less' 是物理路径，但应该是虚拟路径。

因为我添加了它，所以我得到的只是 dotless.Core.LessWeb.Parse(content, _configuration) 上的值为 null

它总是在这条线上爆炸，因为我以前没有使用过这两种东西，所以我一直在实施这种更少的东西和无点的东西，但我似乎找不到任何好的可靠文档/教程。因此，如果您能帮助我解决我的错误，那将是很好的，并为我指明有关该主题的一些好的教程的方向，我将非常感激。

[编辑] 添加有关较少文件和文件结构的详细信息。

```
My File structure is 

Content/css/Main.less
Content/css/LESS/Site.less
Content/css/LESS/Mobile.less 
```

等等... TIA。

ps 不要担心 MyNamespace/MyNamespace 的东西，我只是为了清楚起见将它们全部缩短了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T12:58:34.357

我不明白您为什么要使用自定义变压器。

LESS 规范说，如果您使用以下语法，文件将自动捆绑：

```
@import "LESS/Site"; 
```

它非常适合我，我不需要任何自定义变压器，只需要标准的无点包。要启用缩小，您需要在 web.config 中进行此设置：

```
<dotless minifyCss="true" cache="true" web="true" /> 
```

我有大约 30 个组件和子组件的导入，输出是一个缩小的文件。

我建议您不要使用样式包，而是直接指向您的 less 文件：

```
<link href="~/Content/css/main.less" rel="stylesheet" /> 
```

dotless http 处理程序将启动，将 less 转换为 css 并将其缓存以供后续请求

# ios - 特殊符号在 UIAlertView 中不起作用

> ID：15882200
> 
> 赞同：1
> 
> 时间：2013-04-08T14:47:38.510
> 
> 标签：ios, objective-c, nsstring, uialertview

我在 UIAlertView 中添加新行时遇到了一些问题。Category.rusname 是 NSString，包含 "\n" 符号，类似于 "Phone1\n, Phone2]n"。但不是在“\n”位置添加换行符，而是用“\n”符号显示字符串。并且字符串显示没有必要的新行。有代码。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle: category.rusname message:[NSString stringWithFormat:@"%@", category.message] delegate:nil cancelButtonTitle:@"Ок" otherButtonTitles: nil];
[alert show];
return; 
```

![在此处输入图像描述](https://i.stack.imgur.com/IPs97.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:06:17.210

`UIAlertView`不会将 "\n" 子字符串（输入中的'\' + 'n'）转换为新行。这通常发生的唯一地方是 Localizable.strings 被解析（或在编译时构建为二进制 plist）。

如果`category.message`不是从字符串文件加载的，您将需要自己执行此转换，或者首先使用真正的换行符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T14:57:18.450

假设`category.message`已经是一个字符串，那么没有理由使用`stringWithFormat:@"%@"`. 做吧`message: category.message`。

# c# - System.Windows.Interactivity.EventTrigger 和带有子项的自定义控件

> ID：15882201
> 
> 赞同：1
> 
> 时间：2013-04-08T14:47:41.353
> 
> 标签：c#, .net, wpf, expression-blend

我有一个问题`System.Windows.Interactivity.EventTrigger`。`CustomControl`当 my是某个标准 WPF 面板的孩子时，它可以完美运行，但是每当我将它放在 my`CustomPanelControl`中时，该`Tap`事件就永远不会被订阅。`CustomPanelControl`如果我将from的基类更改为`FrameworkElement`，`Panel`则它可以工作。我假设我需要实现一些东西，但是什么？

自定义控件.cs：

```
public class CustomControl: FrameworkElement
{
    public void RaiseTap()
    {
        OnTap();
    }

    protected virtual void OnTap()
    {
        RaiseEvent(new RoutedEventArgs(TapEvent));
    }

    public static readonly RoutedEvent TapEvent = EventManager.RegisterRoutedEvent("Tap", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(CustomControl));

    public event RoutedEventHandler Tap
    {
        add { AddHandler(TapEvent, value); }
        remove { RemoveHandler(TapEvent, value); }
    }
} 
```

CustomPanelControl.cs：

```
[ContentProperty("Children")]
public class CustomPanelControl: FrameworkElement
{
    public UIElementCollection Children { get; private set; } 

    public CustomPanelControl()
    {
        Children = new UIElementCollection(this, this);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:15:25.157

我找到了解决方案。为了使`Children`属性工作`GetVisualChild`并且`VisualChildrenCount`需要被覆盖。

这篇文章被证明非常有用（*A Brief Look at UIElementCollection* section）： http: [//www.codeproject.com/Articles/24982/Conceptual-Children-A-powerful-new-concept-in-WPF](http://www.codeproject.com/Articles/24982/Conceptual-Children-A-powerful-new-concept-in-WPF)

# algorithm - 覆盖 n 个点的半径为 r 的最小圆数

> ID：15882202
> 
> 赞同：22
> 
> 时间：2013-04-08T14:47:41.613
> 
> 标签：algorithm, computational-geometry

覆盖所有 n 个点所需的半径为 r 的最小圆数是多少？r 和 n 将作为输入给出，然后是 n 对整数，表示 n 个点的 xy 坐标。r 是一个实数，大于 0。n < 20。

如果该点位于圆内，则圆覆盖该点。如果该点与圆心之间的距离小于或等于 r，则该点位于圆内。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-21T10:44:22.347

这可能不是最好的解决方案，但并尝试对其进行优化。

算法基于随机抽样：

1.  在地图上生成 N 个圆圈
2.  删除所有不覆盖任何点的圆圈
3.  按覆盖点数降序排列圆
4.  Foreach circle (sorted) - 将圆圈覆盖的点标记为已覆盖。如果圆圈没有覆盖任何新点，则从列表中删除。

这是您可以实时预览的代码：http: [//jsfiddle.net/rpr8qq4t/](http://jsfiddle.net/rpr8qq4t/)示例结果（每 30 个点 13 个圆圈）： ![每 30 点 13 圈](https://i.stack.imgur.com/CQOKz.png)

参数化：

```
 var POINTS_NUMBER = 30;
  var RADIUS = 50;
  var SAMPLE_COUNT = 400; 
```

可能会添加一些优化（例如某些圆圈可能会过早地从列表中排除）

**编辑**：

1.  步骤 1 中的更改带来更好的结果：为每个点生成 N 个圆圈（至少覆盖一个点的圆圈）新版本：http: [//jsfiddle.net/nwvao72r/3/](http://jsfiddle.net/nwvao72r/3/)

**编辑 2（最终算法）**

最后：

1.  Foreach 点在距点小于 R 的随机距离内生成 N=10 个圆（圆的半径，因此我们确信对于每个圆至少有一个点属于它，并且每个点至少属于一个圆）
2.  重复直到覆盖所有点：
    *   获得覆盖最大未覆盖点数的圆圈。将点标记为已覆盖。

这是给我带来最好结果的版本，你可以**在这里查看** [http://jsfiddle.net/nwvao72r/4/](http://jsfiddle.net/nwvao72r/4/)这里 平均每 30 点 12 圈。

![在此处输入图像描述](https://i.stack.imgur.com/VA7QH.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-08T21:24:24.313

我确定这个问题是 NP 难的，尽管我不打算在这里尝试证明这一点。

如果它是 NP 难的，那么为了找到一个有保证的最优解决方案，我推荐以下方法：

1.  找到所有“好”的潜在圆圈位置，并为每个记录其中包含哪些点。
2.  用这些点集解决集合覆盖问题。（这个问题是 NP 难的。）

## 良好的圈子位置

给定距离小于 2r 的任意 2 个点，正好有两个半径为 r 的圆穿过这些点：

![2 圈通过 2 点](https://i.stack.imgur.com/EfjAl.png)

**[编辑：我最初对“最佳”圈子的描述是错误的，尽管这不会导致问题——感谢评论者乔治描述了思考这个问题的正确方法。]**

如果一个圆覆盖了最大的一组点（意味着该圆不能重新定位以覆盖相同的一组点加上至少 1 个以上），那么该圆可以滑动直到其边界恰好接触它所覆盖的两个点 - - 比如说，将它向左滑动直到它接触到一个已经覆盖的点，然后围绕这个接触点顺时针旋转它直到它接触到另一个已经覆盖的点。这个移动的圆圈将完全覆盖原始圆圈所覆盖的点集。此外，我们永远不需要考虑覆盖非最大点集的圆，因为覆盖这些点和更多点的最大圆至少是有用的并且不会花费更多。这意味着我们只需要考虑接触两点的圆。

所以我们的潜在圈子池每对点最多包含 2 个圈子，总共最多 n*(n-1) 个潜在圈子。（通常会更少，因为一些点对通常相距超过 2r，因此不能被半径为 r 的单个圆所覆盖。）此外，我们需要一个额外的圆来处理距离*任何*点超过 2r 的每个点另一点——这些圆圈也可能以这些远程点为中心。

## 设置封面

我们真正关心的是每个潜在圆圈所涵盖的点集。因此，对于每个潜在的圆圈，找到它所覆盖的点。这可以在 O(n^3) 时间内完成，对每个潜在的圆圈使用 O(n) 次。为了稍微加快速度，如果我们发现两个不同的圆圈覆盖完全相同的一组点，我们只需要保留其中一个圆圈（一组覆盖的点）。我们也可以丢弃任何作为其他覆盖点集子集的覆盖点集——在这种情况下，总是最好选择更大的覆盖点集。

最后，我们有一个覆盖点集的集合，我们想要找到覆盖每个点的这些集合的最小子集。这就是[套套问题](http://en.wikipedia.org/wiki/Set_cover_problem)。我不知道解决这个问题的具体算法，但[分支定界](http://en.wikipedia.org/wiki/Branch_and_bound)是此类问题的标准方法——它通常比简单的穷举回溯搜索快得多。我首先会通过首先找到一个（或多个）启发式解决方案来启动搜索，希望能产生一个好的上限，从而减少分支和边界搜索时间。我认为即使是最好的算法在最坏的情况下也需要指数时间，尽管我认为这对于 n < 20 是可以管理的，因为最多有 19*18 = 342 个不同的点集。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-23T06:44:43.170

来自 Gautam K. Das 等人的论文“关于离散单元磁盘盖问题”。人：

> **最小几何圆盘盖**。在最小几何圆盘覆盖问题中，输入由平面上的一组点组成，问题是找到一组最小基数的单位圆盘，其并集覆盖这些点。与 DUDC 不同，磁盘中心不限于从给定的离散集中选择，而是可以以平面中的任意点为中心。同样，这个问题是 NP-hard [9] 并且有一个 PTAS 解决方案 [11, 12]。

参考：

> 9.  R. Fowler、M. Paterson 和 S. Tanimoto，平面中的最佳包装和覆盖是 NP 完全的，信息处理快报，第 12 卷，第 133-137 页，1981。
> 10.  G. Frederickson，平面图中最短路径的快速算法及其应用，SIAM J. on Computing，第 16 卷，第 1004-1022 页，1987 年。
> 11.  T. Gonzalez，涵盖多维空间中的一组点，信息处理快报，第 40 卷，第 181-188 页，1991 年。
> 12.  D. Hochbaum 和 W. Maass，图像处理和 VLSI 中覆盖和打包问题的近似方案，J. ACM，第 32 卷，第 130-136 页，1985 年。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-09T19:39:35.003

我意识到圆不必以点为中心，因此计算通过两个点的任意组合的所有圆，包括以每个点为中心的圆。然后我找到每个圆圈覆盖的点，并使用贪心算法找到一个最小的圆圈集来覆盖所有点，但同样，它可能不是最小*的*圆圈集，但很容易计算。

```
from collections import namedtuple
from itertools import product
from math import sqrt
from pprint import pprint as pp

Pt = namedtuple('Pt', 'x, y')
Cir = namedtuple('Cir', 'x, y, r')

def circles_from_p1p2r(p1, p2, r):
    'Following explanation at http://mathforum.org/library/drmath/view/53027.html'
    (x1, y1), (x2, y2) = p1, p2
    if p1 == p2:
        #raise ValueError('coincident points gives infinite number of Circles')
        return None, None
    # delta x, delta y between points
    dx, dy = x2 - x1, y2 - y1
    # dist between points
    q = sqrt(dx**2 + dy**2)
    if q > 2.0*r:
        #raise ValueError('separation of points > diameter')
        return None, None
    # halfway point
    x3, y3 = (x1+x2)/2, (y1+y2)/2
    # distance along the mirror line
    d = sqrt(r**2-(q/2)**2)
    # One answer
    c1 = Cir(x = x3 - d*dy/q,
             y = y3 + d*dx/q,
             r = abs(r))
    # The other answer
    c2 = Cir(x = x3 + d*dy/q,
             y = y3 - d*dx/q,
             r = abs(r))
    return c1, c2

def covers(c, pt):
    return (c.x - pt.x)**2 + (c.y - pt.y)**2 <= c.r**2

if __name__ == '__main__':
    for r, points in [(3, [Pt(*i) for i in [(1, 3), (0, 2), (4, 5), (2, 4), (0, 3)]]),
                      (2, [Pt(*i) for i in [(1, 3), (0, 2), (4, 5), (2, 4), (0, 3)]]),
                      (3, [Pt(*i) for i in [(-5, 5), (-4, 4), (3, 2), (1, -1), (-3, 2), (4, -2), (6, -6)]])]:
        n, p = len(points), points  
        # All circles between two points (which can both be the same point)
        circles = set(sum([[c1, c2]
                           for c1, c2 in [circles_from_p1p2r(p1, p2, r) for p1, p2 in product(p, p)]
                           if c1 is not None], []))
        # points covered by each circle 
        coverage = {c: {pt for pt in points if covers(c, pt)}
                    for c in circles}
        # Ignore all but one of circles covering points covered in whole by other circles
        #print('\nwas considering %i circles' % len(coverage))
        items = sorted(coverage.items(), key=lambda keyval:len(keyval[1]))
        for i, (ci, coveri) in enumerate(items):
            for j in range(i+1, len(items)):
                cj, coverj = items[j]
                if not coverj - coveri:
                    coverage[cj] = {}
        coverage = {key: val for key, val in coverage.items() if val}
        #print('Reduced to %i circles for consideration' % len(coverage))

        # Greedy coverage choice
        chosen, covered = [], set()
        while len(covered) < n:
            _, nxt_circle, nxt_cov = max((len(pts - covered), c, pts)
                                         for c, pts in coverage.items())
            delta = nxt_cov - covered
            covered |= nxt_cov
            chosen.append([nxt_circle, delta])

        # Output
        print('\n%i points' % n)
        pp(points)
        print('A minimum of circles of radius %g to cover the points (And the extra points they covered)' % r)
        pp(chosen) 
```

显示三个运行的输出是：

```
5 points
[Pt(x=1, y=3), Pt(x=0, y=2), Pt(x=4, y=5), Pt(x=2, y=4), Pt(x=0, y=3)]
A minimum of circles of radius 3 to cover the points (And the extra points they covered)
[[Cir(x=2.958039891549808, y=2.5, r=3),
  {Pt(x=4, y=5), Pt(x=0, y=3), Pt(x=1, y=3), Pt(x=0, y=2), Pt(x=2, y=4)}]]

5 points
[Pt(x=1, y=3), Pt(x=0, y=2), Pt(x=4, y=5), Pt(x=2, y=4), Pt(x=0, y=3)]
A minimum of circles of radius 2 to cover the points (And the extra points they covered)
[[Cir(x=1.9364916731037085, y=2.5, r=2),
  {Pt(x=0, y=3), Pt(x=1, y=3), Pt(x=0, y=2), Pt(x=2, y=4)}],
 [Cir(x=4, y=5, r=2), {Pt(x=4, y=5)}]]

7 points
[Pt(x=-5, y=5),
 Pt(x=-4, y=4),
 Pt(x=3, y=2),
 Pt(x=1, y=-1),
 Pt(x=-3, y=2),
 Pt(x=4, y=-2),
 Pt(x=6, y=-6)]
A minimum of circles of radius 3 to cover the points (And the extra points they covered)
[[Cir(x=3.9951865152835286, y=-0.8301243435223524, r=3),
  {Pt(x=3, y=2), Pt(x=1, y=-1), Pt(x=4, y=-2)}],
 [Cir(x=-2.0048134847164714, y=4.830124343522352, r=3),
  {Pt(x=-4, y=4), Pt(x=-3, y=2), Pt(x=-5, y=5)}],
 [Cir(x=6.7888543819998315, y=-3.1055728090000843, r=3), {Pt(x=6, y=-6)}]] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-21T16:14:31.133

**平铺然后摇晃**

1.  **TILE：**找到包围所有点的矩形
2.  用间隔为 r * sqrt(2) 的圆圈平铺矩形区域。
3.  对于每个点，计算它们是哪些圆圈以及每个圆圈中有哪些点。
4.  删除任何没有点的圆圈。
5.  删除仅包含多个圆中包含的点的任何圆。
6.  重复5，直到没有更多。
7.  **摇晃：**对于每个圆圈：尝试移动它以查看它是否可以覆盖其原始点以及最大的新点，然后这样做。
8.  再做4和5。
9.  重复 7 直到摇晃不改变哪些圆点在**或**时间耗尽。

第 2 步，如果平铺非常稀疏，则可以通过遍历每个点并仅计算/保留那些包含一个点的圆来优化平铺。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-09T15:01:54.800

我不确定这是否正确，但如果我们不需要解圈的确切位置，在我看来，我们可以通过查看点簇来解决这个问题：在任何解决方案中 -圆，任意两点之间的距离应小于或等于 2*r。

算法：

```
1\. j_random_hacker indicated that any solution-circle could be shifted so that
   two of its covered-points lay on its circumference without changing the 
   original covered-points. Since the solution-circle radius is given, for each 
   point: (a) calculate potential circle-centers using the point, radius, and 
   each other point that is at a distance of 2*r or less, (b) for each circle, 
   list the cluster of points that it could cover. Sort each cluster and, for
   each point, remove duplicate clusters. 

2\. For each cluster group in 1., choose the cluster that has the greatest point-
   count, that is, the cluster that is most shared.

3\. Remove duplicates and clusters that are sub-sequences of other clusters 
   from 2., and present the resulting size of 2\. (perhaps together with the 
   chosen clusters) as the solution. 
```

等边三角形的输出，r=3，[(0,0),(5.196152422706632,3),(5.196152422706632,-3)]

```
*Main> solve
(2,[[(0.0,0.0),(5.196152422706632,3.0)],[(0.0,0.0),(5.196152422706632,-3.0)]]) 
```

Paddy3118 示例的输出，r=3, [(1,3),(0,2),(4,5),(2,4),(0,3)]：

```
*Main> solve
(1,[[(0.0,2.0),(0.0,3.0),(1.0,3.0),(2.0,4.0),(4.0,5.0)]]) 
```

r=3, [(-5,5),(-4,4),(3,2),(1,-1),(-3,2),(4,-2),(6 的输出,-6)]:

```
*Main> solve
(3,[[(-5.0,5.0),(-4.0,4.0),(-3.0,2.0)],[(1.0,-1.0),(3.0,2.0),(4.0,-2.0)],
    [(4.0,-2.0),(6.0,-6.0)]]) 
```

哈斯克尔代码：

```
import Data.List (delete, nub, nubBy, isInfixOf, sort, sortBy, maximumBy)

points = [(0,0),(5.196152422706632,3),(5.196152422706632,-3)]--[(1,3),(0,2),(4,5),(2,4),(0,3)]--[(-5,5),(-4,4),(3,2),(1,-1),(-3,2),(4,-2),(6,-6)]
r = 3
twoR = 2*r

circleCenters (x1,y1) (x2,y2) =
  let q = sqrt $ (x2-x1)^2 + (y2-y1)^2
      (x3, y3) = ((x1+x2)/2,(y1+y2)/2)
      first = (x3 + sqrt(r^2-(q/2)^2)*(y1-y2)/q, y3 + sqrt(r^2-(q/2)^2)*(x2-x1)/q)
      second = (x3 - sqrt(r^2-(q/2)^2)*(y1-y2)/q, y3 - sqrt(r^2-(q/2)^2)*(x2-x1)/q)
  in [first,second]

isInCircle (center_x,center_y) (x,y) = (x-center_x)^2 + (y - center_y)^2 <= r^2

findClusters (px,py) = 
  nub [sort $ [(px,py)] ++ filter (isInCircle a) potentialPoints | a <- potentialCircleCenters]
    where
      potentialPoints = filter (\(x,y) -> (x-px)^2 + (y-py)^2 <= twoR^2) (delete (px,py) points)
      potentialCircleCenters = concatMap (circleCenters (px,py)) potentialPoints

solve = (length bestClusters, bestClusters) where
  clusters = map findClusters points
  uniqueClusters = nub . concat $ clusters
  bestClusterForEachPoint = map (maximumBy (\a b -> compare (length a) (length b))) clusters
  bestClusters = nub . nubBy (\a b -> isInfixOf a b) . sortBy (\a b -> compare (length b) (length a)) 
                 $ bestClusterForEachPoint 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-08T18:31:00.393

这是我的第一个答案，因为另一个答案提到了它，所以我将保留它。**但是请参阅我稍后的答案，该答案考虑了两点之间的圆圈，而不是这个。** 这是一个用 Python 编码的贪心算法，它会找到*一个*最小值，但我不知道它是否是*最小*的解决方案。

```
dbg = False
if not dbg:
    r, n = (int(s) for s in input('r n: ').split())
    points = p = [ tuple(int(s) for s in input('x%i y%i: ' % (i, i)).split())
                   for i in range(n) ]
else:
    r, n, points = 3, 5, [(1, 3), (0, 2), (4, 5), (2, 4), (0, 3)]; p = points

# What a circle at each point can cover
coverage = { i: frozenset(j
                          for j in range(i, n)
                          if (p[i][0] - p[j][0])**2 + (p[i][1] - p[j][1])**2 <= r**2)
             for i in range(n)}

# Greedy coverage choice
chosen, covered = [], set()
while len(covered) < n:
    # Choose the circle at the point that can cover the most ADDITIONAL points.
    _, nxt_point, nxt_cov = max((len(pts - covered), i, pts)
                                for i, pts in coverage.items())
    covered |= nxt_cov
    chosen.append(nxt_point)
print('Cover these points:\n  %s' % '\n  '.join('%s, %s' % p[i] for i in chosen)) 
```

这是一个示例运行：

```
r n: 3 5
x0 y0: 1 3
x1 y1: 0 2
x2 y2: 4 5
x3 y3: 2 4
x4 y4: 0 3
Cover these points:
  1, 3
  4, 5 
```

注意：数据 i/o 是初级的，但算法应该清楚

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-08T21:22:06.283

如果中心圆`C(cx, cy)`覆盖点，`P(px, py)`则距离`|CP| < r`（`r`-半径）。因此，圆心可能是覆盖点的区域`P`是圆心 in`P`和 radius `r`。现在让我们以给定的点和半径绘制所有圆心`r`。如果一些圆相交，那么我们可以在覆盖相应点的交叉点上绘制以中心为中心的新圆。因此，对于每一对输入点，我们检查圆是否相交。

假设输入点是顶点，并且它们之间的交点是边缘。现在我们有一个已知的图问题最小边覆盖[http://en.wikipedia.org/wiki/Edge_cover](http://en.wikipedia.org/wiki/Edge_cover)可以在多项式时间内解决（尽管有限的`n < 20`蛮力可能是可以接受的）

更新。那不是边缘覆盖。我的错。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-08T18:15:06.260

If you place `n` circles (of radius `r`) all centered at each point, the find regions/points of maximum overlap and place new circles (of radius `r`) centered in that region. I'm not sure if this is the best way of solving the solution (if this is a way to solve it, besides the brute force way), I'm sure you can implement it with a quite a decent amount of math, and thus lowering the run-time complexity of your solution. Hope this helps. Please give feedback.

# c# - 非静态字段、方法或属性（数据集）需要对象引用

> ID：15882221
> 
> 赞同：1
> 
> 时间：2013-04-08T14:48:38.013
> 
> 标签：c#, asp.net, dataset

为什么方法不能使用数据集从数据库中向我发送值？

[这是示例](http://msdn.microsoft.com/pl-pl/library/h71xaeh0.aspx)

错误示例

```
public string dane()
        {
            // Get the DataTable of a DataSet.

            DataTable table = DataSet1.Tables["Products"];
            DataRow[] rows = table.Select();

            string s ="";
            // Print the value one column of each DataRow.
            for (int i = 0; i < rows.Length; i++)
            {
                s += rows[i]["ProductID"] + "  ";
            }

            return s;

        } 
```

错误 - 非静态字段、方法或属性需要对象引用

找不到数据。（但错误已修复）

```
public string dane()
{
    // Get the DataTable of a DataSet.
    DataSet1 dataSet = new DataSet1();
    DataTable table = dataSet.Tables["Products"];
    DataRow[] rows = table.Select();

    string s ="";
    // Print the value one column of each DataRow.
    for (int i = 0; i < rows.Length; i++)
    {
        s += rows[i]["ProductID"] + "  ";
    }

    return s;

} 
```

![在此处输入图像描述](https://i.stack.imgur.com/NeUbR.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:52:06.243

那是因为您的`DataSet1`课程*可能*不是静态的，尽管我们不知道，因为您没有向我们展示。`Tables`如果不先创建`DataSet1`对象，就无法引用。我想你在这里得到错误：

```
DataTable table = DataSet1.Tables["Products"]; 
```

在您的第二个代码示例中，您实际上创建了一个`DataSet`解决错误的实例。

您可以保持修复或保持`DataSet1`静态，但在这种情况下，这似乎不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:50:53.697

您没有参考第一个示例中的数据集。您需要将其传入或使其成为全局变量。

# google-maps - 带有 Google Maps API 的 Kml 地标列表

> ID：15882227
> 
> 赞同：0
> 
> 时间：2013-04-08T14:48:42.023
> 
> 标签：google-maps, google-maps-api-3

我想知道是否有一种方法可以使用 Google Maps API 显示在线托管的 kml 的地标。当我搜索在线 KML -> [https://maps.google.com/maps?f=q&hl=en&q=http时，我想做的是有一个面板来导航文件夹，就像谷歌地图提供的文件夹一样://kmlscribe.googlepages.com/SamplesInMaps.kml](https://maps.google.com/maps?f=q&hl=en&q=http://kmlscribe.googlepages.com/SamplesInMaps.kml)

使用 API 仅显示 KML 没有任何问题，这是我拥有的代码：

```
<html>
<head>
    <script type="text/javascript" src= "http://maps.google.com/maps/api/js?sensor=true">
    </script>
    <script>
var map;
var cta_layer;

function initialize() {
    var kmlUrl = 'http://kmlscribe.googlepages.com/SamplesInMaps.kml';
    var myOptions = {
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    cta_layer = new google.maps.KmlLayer(kmlUrl, {suppressInfoWindows: false,preserveViewport:false});
    cta_layer.setMap(map);
}
    </script>
</head>
<body onload="initialize()">
    <div id="map_canvas"  style="height: 800px;width: 800px;">
    </div>
</body> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:20:25.460

查看 KML 的第三方解析器。 [geoxml-v3](http://code.google.com/p/geoxml-v3/)有最好的“侧边栏”支持。您也可以使用[geoxml3](http://code.google.com/p/geoxml3/)，但您必须自己构建侧边栏。

笔记：

1.  这两个第三方解析器都在浏览器中解析 KML 并使用本机 Google Maps API v3 对象呈现它，因此它们对于复杂的 KML 可能存在性能问题。

2.  如果 KML 托管在与网页不同的域中，则它们需要代理才能访问 KML（由于 XmlHttpRequest 的域限制相同）

[例子](http://www.geocodezip.com/geoxml3_test/v3_dyasdesigns_com_geoxml_mtrmtrip3.html)

# apache - 是什么导致了这个 xhtml 错误

> ID：15882229
> 
> 赞同：0
> 
> 时间：2013-04-08T14:48:48.623
> 
> 标签：apache, web, xhtml

我正在尝试对一个简单的网站进行一些更改，为此我继续进行递归 wget 以便将整个网站带到我的机器上（经许可）。原始网站位于[http://www.clubs.psu.edu/up/blockandbridle/index.xhtml](http://www.clubs.psu.edu/up/blockandbridle/index.xhtml)，我制作的副本位于[http://eatmyrice.org/blockandbridle/index.xhtml](http://eatmyrice.org/blockandbridle/index.xhtml) . 大多数一切似乎都运行良好，尽管由于某种原因，当我在自己的服务器上访问 index.xhtml 的副本时出现以下错误

![在此处输入图像描述](https://i.stack.imgur.com/3Q6Zb.jpg)

我已经比较了两个站点之间的代码，据我所知，没有任何差异（尽管我已经通过并修复了指向正确位置的链接）会导致这种情况。任何帮助将不胜感激，因为我不确定是什么导致了这种情况发生，谢谢（如果它会产生任何影响，复制的站点正在 apache 服务器上运行，不确定原始站点正在运行什么）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:51:09.430

两个文档都包含相同的错误，[可以使用验证器轻松检测到](http://validator.w3.org/check?uri=http%3A%2F%2Featmyrice.org%2Fblockandbridle%2Findex.xhtml&charset=%28detect+automatically%29&doctype=Inline&group=0)。一个文档是 HTML，由浏览器的 HTML 解析器解析。另一个文档是 XHTML，由 XML 解析器解析。浏览器仅在 XML 模式下暴露错误。

```
david@raston ~ $ curl -I http://www.clubs.psu.edu/up/blockandbridle/index.xhtml | grep Content-Type
Content-Type: text/html
~ :
david@raston ~ $ curl -I http://eatmyrice.org/blockandbridle/index.xhtml | grep Content-Type
Content-Type: application/xhtml+xml 
```

# java - 如何忽略 Web 服务中的空参数？

> ID：15882231
> 
> 赞同：3
> 
> 时间：2013-04-08T14:48:50.873
> 
> 标签：java, web-services, weblogic, jax-rpc

我有以下问题。我想做网络服务，它有很多输入参数。其中一些是双类型的。问题是一些双打不是必需的，可以作为空标签传递给我的服务，比如

```
<param xsi:type="xsd:double"></param> 
```

因此，WebLogic 在转向我的代码之前尝试解析该双精度，我得到

```
<faultstring>empty String</faultstring> 
```

有例外的回应

```
<bea_fault:stacktrace xmlns:bea_fault="http://www.bea.com/servers/wls70/webservice/fault/1.0.0">java.lang.NumberFormatException: empty String
at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1011)
at java.lang.Double.parseDouble(Double.java:540) 
```

所以我的主要问题是，如何将 null 等空标签放入 Double 变量中？或者如何在 WebLogic 尝试解析它之前指定该空值？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T20:43:47.353

请查看定义消息结构的 XSD。关注两个不同但特殊的属性，可以为 XSD 中的任何元素设置消息格式。它们是：minOccurs 和 nillable。您的问题的答案在于将 nillable 属性设置为“true”（默认情况下为 false。）

让我们看看 nillable 是什么意思，nillable 值 T/F 表示一个元素是否可以有一个空值（空字符串）。

因此，如果 nillable 设置为 true

<element name="anyElement" nillable="true"/> 在您的 XSD 中，那么该元素可以像这些 <anyEement></anyElement> 或 <anyElement/> 在您的 SOAP 请求/响应中。

但是如果 nillable 设置为 false （默认情况下是这样），那么您可以预期您现在遇到的错误。

我希望它有所帮助。谢谢。

# jquery - 通过 API 实现的 jQuery Cycle2 高级寻呼机

> ID：15882232
> 
> 赞同：0
> 
> 时间：2013-04-08T14:48:51.950
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我一直在使用这个 jQuery Cycle2 插件（[http://www.malsup.com/jquery/cycle2/api/advanced.php](http://www.malsup.com/jquery/cycle2/api/advanced.php)），并且我一直在尝试使用每张幻灯片内部的标题来构建自定义寻呼机。

cycle 2 的文档更多地关注 HTML 中的数据属性，但是我需要通过它的 javascript 替代方案来执行 cycle2 插件。

我一直在通过 API 查看这个 buildPagerLink 但无法弄清楚。

```
$('.p-slider').on('cycle-bootstrap', function(e, optionHash, API) {
    API.buildPagerLink = function(opts, slideOpts, slide) {
        //CODE TO GET H2 TITLE
    }
}); 
```

基本上我想要的是这个。每张幻灯片都有一个`<h2>`元素。我希望其中的文本成为寻呼机的链接文本。听起来很简单，但我想不通。

任何帮助，将不胜感激。

谢谢。戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:09:03.830

循环引导存在一个已知错误，因此为了将其与 buildPagerLink 一起使用，您需要将其绑定到文档。以下将提取 h2 文本并使用它构建寻呼机：

```
$(document).on('cycle-bootstrap', function( e, opts, API ) {
    API.buildPagerLink = function(opts, slideOpts, slide) {
       var pagerLink;
    var pagers = opts.API.getComponent( 'pager' );
    pagers.each(function() {
        var pager = $(this);

            var markup = $('<span></span>').text($('h2', slide).text());
            pagerLink = $( markup ).appendTo( pager );
        pagerLink.on( opts.pagerEvent, function(e) {
            e.preventDefault();
            opts.API.page( pager, e.currentTarget);
        });
    });
    }
});

$('.slideshow').cycle(); 
```

工作演示：http: [//jsfiddle.net/lucuma/FetC8/1/](http://jsfiddle.net/lucuma/FetC8/1/)

问题作为参考： [https ://github.com/malsup/cycle2/issues/157](https://github.com/malsup/cycle2/issues/157)

# mysql - 在 inno setup 上执行连续的批处理文件

> ID：15882238
> 
> 赞同：0
> 
> 时间：2013-04-08T14:49:19.087
> 
> 标签：mysql, batch-file, inno-setup

我正在尝试执行连续的批处理文件：第一个是启动Mysql的安装第二个是执行sql脚本的批处理脚本

```
[Run]
Filename: "{app}\install.bat"; Flags: shellexec waituntilterminated
Filename: "{app}\createBase.bat"; Flags: shellexec waituntilterminated
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: postinstall 
```

第二行不执行。

我还重新组合了它也不起作用的 2 个批处理文件：

```
 @echo off

       **(from the first batch)**

 start  /i /wait mysql-5.1.36-win32.msi
      **(the second batch)** 

"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql" --default-character-set=utf8 -u root -proot < dbase.sql; 
```

我认为我必须在最后一行（标志）上改变一些东西

所以有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:15:10.840

我只是找到方法；我将 2 个批处理文件重新组合为一个，这也是 mysql 的静默安装 + sql 脚本的配置和执行（全部在一个批处理文件上）：

```
 start /wait msiexec /i mysql-5.1.36-win32.msi /passive

"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqlinstanceconfig.exe" -i -q ServiceName=MySQL RootPassword=root ServerType=DEVELOPMENT    DatabaseType=MYISAM Port=3306 RootCurrentPassword=root"

"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql" --default-character-set=utf8 -u root -proot < dbase.sql 
```

# javascript - 使用 pdf.js 时仅从服务器加载需要的页面

> ID：15882242
> 
> 赞同：3
> 
> 时间：2013-04-08T14:49:37.737
> 
> 标签：javascript, html, pdf, pdf.js

我正在使用pdf.js查看pdf文档，pdf.js首先从服务器获取整个文档然后开始渲染，这种行为会导致两个问题：

*   如果pdf文档很大，加载需要很长时间。
*   如果有人从移动设备读取，缓存内存泄漏。

我认为通过仅请求用户浏览的所需页面而不是整个文档来使用 http 范围请求将解决这些问题。

这是一个实现范围请求的 PR，但请求仍在运行，直到整个文档加载而不是 fetch-as-you-go 行为。 [https://github.com/mozilla/pdf.js/pull/2719](https://github.com/mozilla/pdf.js/pull/2719)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:53:34.990

如果对 PDF 格式的记忆对我有用，那么实际文档不容易拆分，除非您在调用之前知道每个页面的确切字节范围（即使这样，我也不确定 JS 能否有效地处理二进制操作这样做，或者如果您要修改 JS 库来执行此操作）。您可能想要做的是按页面服务器端（使用 PHP 或其他语言）拆分文档，而不是使用 加载整个文档，而是`pdf.js`一个一个地加载页面。

这有一些好处和一些缺点。缺点：

*   您需要以编程方式拆分 PDF。这实际上并不难，但有点乏味
*   您还需要找到一种将 PDF 的所有 URI 传递给查看器的方法。这也很容易

优势应该是显而易见的：更少的带宽使用，提供逐页查看的能力，保存单个页面的能力。

# python - Matplotlib：将 y 刻度向左对齐

> ID：15882249
> 
> 赞同：13
> 
> 时间：2013-04-08T14:49:55.143
> 
> 标签：python, matplotlib

我有可变长度的刻度标签，我想将它们对齐到左边（即在较短的标签和 y 轴之间有一个空间）。有什么合理的方法可以做到这一点吗？使用水平对齐“左”将它们向左对齐，但它们都从轴开始，所以它们最终在图中。所以另一个问题可能是——我可以改变他们的起点吗？

演示代码：

```
import numpy as np
import matplotlib.pyplot as plt

ticks = ["Lorem ipsum dolor sit amet, consectetur adipisicin", "g elit, sed do",      "eiusmod tempor incididunt ut labo", "re et dolore magna ali", "qua. Ut en", "im ad minim veniam, quis nostr", "ud exercitation ullamco labo", "ris nisi ut aliquip ex ea c", "ommodo co", "nsequat. Duis aute irure dolor in rep"]
data = [5,1,2,4,1,4,5,2,1,5]
ind = np.arange(len(data))
fig = plt.figure()
ax = plt.subplot(111)
ax.barh(ind, data, 0.999)
ax.set_yticks(ind + 0.5)
r = ax.set_yticklabels(ticks)#, ha = 'left')
fig.set_size_inches(12, 8)
fig.savefig(r'C:\try.png', bbox_extra_artists=r, bbox_inches='tight') 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T16:03:31.223

您只需要添加一个`pad`. 查看[matplotlib 相对于轴的刻度位置](https://stackoverflow.com/questions/14711338/matplotlib-ticks-position-relative-to-axis/14712375#14712375)

```
yax = ax.get_yaxis()
yax.set_tick_params(pad=pad) 
```

[（文档）](http://matplotlib.org/api/axis_api.html#matplotlib.axis.Axis.set_tick_params)

要确定焊盘应该是什么：

```
import numpy as np
import matplotlib.pyplot as plt

ticks = ["Lorem ipsum dolor sit amet, consectetur adipisicin", "g elit, sed do",      "eiusmod tempor incididunt ut labo", "re et dolore magna ali", "qua. Ut en", "im ad minim veniam, quis nostr", "ud exercitation ullamco labo", "ris nisi ut aliquip ex ea c", "ommodo co", "nsequat. Duis aute irure dolor in rep"]
data = [5,1,2,4,1,4,5,2,1,5]
ind = np.arange(len(data))
fig = plt.figure(tight_layout=True) # need tight_layout to make everything fit
ax = plt.subplot(111)
ax.barh(ind, data, 0.999)
ax.set_yticks(ind + 0.5)
r = ax.set_yticklabels(ticks, ha = 'left')
fig.set_size_inches(12, 8, forward=True) 
# re-size first, the shift needs to be in display units
plt.draw()  # this is needed because get_window_extent needs a renderer to work
yax = ax.get_yaxis()
# find the maximum width of the label on the major ticks
pad = max(T.label.get_window_extent().width for T in yax.majorTicks)

yax.set_tick_params(pad=pad)
plt.draw() 
```

![代码演示](https://i.stack.imgur.com/rRq3a.png)

# class - 创建类 C4

> ID：15882251
> 
> 赞同：2
> 
> 时间：2013-04-08T14:49:58.857
> 
> 标签：class, c4

我正在尝试在 C4-Libpd 项目中编写一个新类。我想做的就是，只要我想学习如何在 Objective-C 中管理类，从我编写的“顺序”代码中获取功能，以某种更面向对象的方式。我遇到的麻烦之一是如何将“addShape”作为新类的方法添加到画布：

```
- (void) displayCrosshair{

    [self.canvas addShape:xLine];
    [self.canvas addShape:yLine];
    [self.canvas addShape:s];

} 
```

给了我一个错误：

> 在类型的对象上找不到属性画布...

我知道`self.canvas`从类内部只要我没有在类中创建另一个画布，只要我想在主画布上添加 Shape 并且只是以处理对象的方式使用该方法，这是不正确的。那么，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:29:03.557

当方法或动作发生在单独的对象中时，让事情在画布上发生的最简单方法之一是使用通知。使用通知做两件事，它允许其他对象以他们自己的方式对事件作出反应，并且它允许对对象的引用解耦（即非硬编码）。

您可以像这样发布通知：

```
@interface MyClass : C4Shape
-(void)displayCrosshair;
@end

@implementation MyClass
-(void)displayCrosshair {
    [self postNotification:@"displayCrosshairNotification"];
}
@end 
```

然后，要让画布监听通知，您可以这样做：

```
-(void)setup {
    C4Shape *crossHair = ...;
    crossHair.hidden = YES;
    [self.canvas addShape:crossHair];
    [self listenFor:@"displayCrosshairNotification" fromObject:obj andRunMethod:@"displayCrosshair"];
}

-(void)displayCrosshair {
    crossHair.hidden = NO;
} 
```

* * *

或者，您可以在子类中为画布设置属性：

```
@interface MyClass : C4Shape
@property (readwrite, nonatomic) C4View *canvas;
@end 
```

...然后在您构建子类时对您的画布进行硬引用，`C4WorkSpace.m`如下所示：

```
@implementation C4WorkSpace {
    MyClass *obj;
}

-(void)setup {
    obj = [[MyClass alloc] init];
    obj.canvas = self.canvas;
    [self.canvas addSubview:obj];
} 
```

这个技巧应该有效，但我更喜欢通知方法。

* * *

最后的想法......如果你正在谈论的子类对象实际上**是**十字准线，那么我什至不会打扰到画布的通知。

相反，我会将十字准线创建为 C4Shape 的子类，并让它管理自己的可见性：

在画布上：

```
-(void)setup {
    MyShape *crossHair = [[MyShape alloc] initWithFrame:...];
    [self.canvas addShape:crosshair];
} 
```

在您的形状子类中：

```
@interface MyShape : C4Shape
-(void)displayCrosshair;
-(void)hideCrosshair;
@end

@implementation MyShape
-(void)setup {
    [self addShape:xLine];
    [self addShape:yLine];
    [self hideCrosshair];
}

-(void)displayCrosshair {
    self.hidden = NO;
}

-(void)hideCrosshair {
    self.hidden = YES;
}
@end 
```

这可能是最好的方法。

# c# - 如何使用 .gitignore 忽略特定项目

> ID：15882253
> 
> 赞同：0
> 
> 时间：2013-04-08T14:50:08.467
> 
> 标签：c#, git, github, project, gitignore

我有以下解决方案结构

```
SlnFolder/
    Project1/
    Project2ToBeExcluded/
    Project3/
    .gitignore 
```

我复制[了这个](https://github.com/github/gitignore/blob/master/VisualStudio.gitignore).gitignore 作为基础。我试图实现的是添加`Project2ToBeExcluded`到.gitignore。我尝试`Project2ToBeExcluded/`在 .gitignore 的最顶部添加，但仍会跟踪项目及其更改。通过 GitHub 应用程序和我的 VS2012 扩展。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:04:29.737

在添加 .gitignore 文件之前，您是否已经将这些文件添加到存储库？如果是这样，请参阅[.gitignore file not ignoring](https://stackoverflow.com/questions/1139762/gitignore-file-not-ignoring)。您需要清除缓存或更新索引。该链接有两个选项可供尝试。

# c# - 移除焦点并获得对控件的关注

> ID：15882254
> 
> 赞同：0
> 
> 时间：2013-04-08T14:50:20.343
> 
> 标签：c#, wpf, xaml

我想在单击按钮时从 ListBox 中的项目中移除焦点，然后将焦点放在另一个 ListBox 中的项目上。有什么可以消除注意力的吗？我怎样才能再次将焦点放在另一个 ListBox 上，或者更好的是，它的“选定项目”？

我曾尝试使用该`SelectionChanged`属性，但在移动列表中的项目时焦点全部关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:58:21.617

这将是一个非常好的起点。前往页面的焦点部分。 [http://msdn.microsoft.com/en-us/library/ms754010.aspx#focus](http://msdn.microsoft.com/en-us/library/ms754010.aspx#focus)

逻辑焦点可能是你关心的

# django - 使用 Apache2 副开发服务器时 Django 应用程序滞后

> ID：15882255
> 
> 赞同：0
> 
> 时间：2013-04-08T14:50:26.177
> 
> 标签：django, apache, windows-xp, mod-wsgi

设置是：

1.  Windows XP 虚拟机（暂时坚持这个 - 我们在 Intranet 上）
2.  阿帕奇 2,
3.  mod_wsgi
4.  django 1.4
5.  虚拟环境
6.  我们最多只有两个用户同时使用这个应用程序

一切正常，但浏览器的请求和服务器发回的响应之间存在明显的延迟（10-20 秒）。

如果我用 Django 开发服务器（我不想在生产中这样做）替换 Apache2 Web 服务器，则应用程序的响应速度非常快。所以我的假设是问题出在 Apache2 配置或 mod_wsgi 配置上。

我不是 Apache 专家，我花了数小时寻找正确的设置来配置 Apache2 Web 服务器，但没有找到任何可以改善响应的东西。

任何帮助将不胜感激。

以下是我更改或添加到 httpd.conf 的设置：

```
# ThreadsPerChild: constant number of worker threads in the server process
ThreadsPerChild 10
# Changed MaxRequestsPerChild 0 to 1 for Django
MaxRequestsPerChild  1
# For Django KeepAlive should be OFF
KeepAlive Off

WSGIApplicationGroup %{GLOBAL}
#######################################
WSGIScriptAlias / "C:/virtual_env/sitar_env2/cissimp/cissimp/wsgi.py"
WSGIPythonPath C:/virtual_env/sitar_env2/Lib/site-packages;C:/virtual_env/sitar_env2/cissimp
Alias /static "C:/virtual_env/sitar_env2/cissimp/cissimp/static"
<Directory "C:/virtual_env/sitar_env2/cissimp/cissimp">
<Files wsgi.py>
Order allow,deny
Allow from all
</Files>
</Directory>
########################################## 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:49:44.273

不要设置：

```
MaxRequestsPerChild  1 
```

您有效地在每个请求上重新启动 Apache，这意味着必须在每个请求上加载整个 Django 应用程序。你不应该那样做。

# hibernate - hibernate和jpa的映射区别

> ID：15882258
> 
> 赞同：0
> 
> 时间：2013-04-08T14:50:39.990
> 
> 标签：hibernate, jpa

我是 JPA 的新手，正在阅读有关 JPA 的教程

我无法找到hibernate和JPA中关系映射的区别

他们一样吗？？或者与另一个表（例如一对多或一对一）映射有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:55:48.710

Hibernate 是一个 JPA 实现。它遵循 JPA 规范，并具有额外的专有映射功能。

# matlab - 如何从图中提取有用的特征？

> ID：15882259
> 
> 赞同：1
> 
> 时间：2013-04-08T14:50:41.740
> 
> 标签：matlab, computer-vision, signal-processing, fft, data-mining

事情是这样的：

![小号](https://25.media.tumblr.com/887ca35267ee5b3de486e1e0405f9e5d/tumblr_mkxxvqB6Op1rpzyh9o2_500.gif)

![吨](https://25.media.tumblr.com/306aeb937788d8f5801822d63f341f99/tumblr_mkxxvqB6Op1rpzyh9o3_500.gif)

我有一些类似上面图片的图表，我正在尝试将它们分类为不同的类型，以便可以识别字符的形状，这就是我所做的：

我将二维 FFT 应用于图形，因此我可以获得这些图形的频谱分析。以下是一些结果：

![结果](https://24.media.tumblr.com/c5841869d4921620d4d9c7306d6e9a89/tumblr_mkxxvqB6Op1rpzyh9o1_500.jpg)

2-D FFT 后的 S

![结果T](https://25.media.tumblr.com/a507c33081fde172c78eed8c134f88f0/tumblr_mkxxvqB6Op1rpzyh9o4_500.jpg)

2-D FFT 后的 T

我发现同一个字母在 FFT 之后共享相同的幅度图模式，我想使用此功能对这些字母进行聚类。但是有一个问题：我希望感兴趣的特征可以呈现在一个二维平面上，即(x,y)的形式，但是这里的特征实际上是一个图，大约有600*400个元素，并且我知道我唯一感兴趣的是图形的形状（S 是中间的一个点，T 就像一个十字）。那么我能做些什么来减少幅度图的维度呢？

我不确定我是否清楚我的问题，但在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:43:36.990

您可以使用降维方法，例如

*   k-均值聚类
*   支持向量机
*   主成分分析
*   MDS

这些方法中的每一个都可以采用二维数组，并找出最佳坐标系来区分/表示等你的字母。一种开始的方法是使用这些方法中的任何一种将您的 240000 维空间减少到 26 维空间。这将为您提供每个可能字母的“幅度”。

但正如@jucestain 所说，网络分类器非常适合字母识别。

# python - django-simple-rest 中的非拉丁符号

> ID：15882270
> 
> 赞同：1
> 
> 时间：2013-04-08T14:51:23.320
> 
> 标签：python, django, encoding, utf-8, python-2.7

制作简单的 REST 服务（在 django-simple-rest 上），在第一次迭代计划中只有 GET。一切都很好，但作为回应，我收到了西里尔符号：

```
>\u041c\u043e\u043b\u043e\u043a\u043e 
```

在我的实验中，我发现了一条线：

```
recipes_rest = json_serializer.serialize(Post.objects.all())
return HttpResponse(recipes_rest, content_type='application/json; charset=utf8', status=200) 
```

如果我使用：

```
recipes_rest = 'some non latin symbols' 
```

一切皆好。但就我而言，[http://cooktalks.ru/contacts](http://cooktalks.ru/contacts)我找不到解决方案。也许我必须在这一行做些什么（？）：

```
recipes_rest = json_serializer.serialize(Post.objects.all()) 
```

**更新** 如果我使用'xml'，一切都很好： `contacts = serializers.serialize("xml", Post.objects.all())`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:43:43.660

从这个[主题](https://stackoverflow.com/questions/3198765/how-to-write-russian-characters-in-file)，您是否尝试导入[编解码器](http://docs.python.org/2/library/codecs.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:55:01.337

**解决了））**

阅读这个漂亮的文档：

如果您在 JSON 序列化程序中使用 UTF-8（或任何其他非 ASCII 编码）数据，则必须将 ensure_ascii=False 作为参数传递给 serialize() 调用。否则，输出将无法正确编码。

```
json_serializer.serialize(queryset, ensure_ascii=False, stream=response) 
```

# windows - msvcrt 错误

> ID：15882271
> 
> 赞同：-1
> 
> 时间：2013-04-08T14:51:24.630
> 
> 标签：windows, visual-studio, drivers, msvcrt

可能是我错过了一些东西（我当然会）但我什么都不明白：

每个全新版本的 Visual Studio 都附带一个特定的 msvcrtxx（msvcr100.dll、msvrct.dll、...）对。除了它经常导致著名的“dll 地狱”这一事实外，我仍然不明白为什么“Windows 驱动程序工具包”继续生成与旧的 MSVCRT.DLL 链接的二进制文件！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:59:24.757

Windows 总是附带一个旧的准系统版本的 MSVCRT，特别是这样驱动程序就可以拥有一些基本的运行时支持，而不必发布自己的库副本。它适用于驱动程序，但不适用于更高级别的用户模式应用程序。

每个版本的 VS C++ 都附带更新版本的运行时库，因为库标准（以及对标准的支持）正在发展。有时它们以一种不向后兼容的方式发展，因此您不能保证针对旧版本 DLL 编译的旧程序可以与新版本 DLL 一起使用。通过对文件进行显式版本控制，可以避免许多所谓的 DLL Hell 问题。（如果您做出错误的假设并设计了错误的安装程序，DLL Hell 才是真正的问题，尤其是在使用并行版本控制、合并模块等的今天。）

应用程序必须重新分发它们需要的任何版本的副本，因为不能保证它们所依赖的库会存在于计算机上。

# c++ - 如何阅读这些表达式：*&pointer VS &*pointer

> ID：15882272
> 
> 赞同：4
> 
> 时间：2013-04-08T14:51:28.083
> 
> 标签：c++, c, pointers

如果我有：

```
int j = 8;
int *pointer = &j; 
```

那么如果我这样做：

```
&*pointer == *&pointer 
```

返回`1`( `true`)。

但我对第二个表达有疑问：

1.  `&*pointer`返回指针指向的地址（首先评估 * 然后 &）
2.  `*&pointer`返回指针地址，然后返回它指向的内容......但这是变量而不是地址。所以这是我的疑问......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T14:54:10.903

1.  `&*pointer`取消引用指针（下图中的 1.）以提供`int`对象（2.），然后获取该对象的地址，该地址当然与指针（1.）的值相同。

    ```
    ┌─────────┐  ┌───┐
    │ pointer ┿━>│ j │
    └─────────┘  └───┘
        (1.)     (2.) 
    ```

2.  `*&pointer`获取指针 (4.) 的地址以获取指向该指针 (3.) 的指针，然后取消引用该地址以再次获取指针 (4.)。

    ```
    ┌──────────┐  ┌─────────┐  ┌───┐
    │ &pointer ┿━>│ pointer ┿━>│ j │
    └──────────┘  └─────────┘  └───┘
        (3.)         (4.) 
    ```

您缺少的重要部分是address 的`pointer`地址*，address 的地址也是*`int`如此。取消对您的引用，这只会再次为您提供指针。`&pointer`

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T15:17:03.547

`pointer`“指向”内存中的某个地址；它驻留在内存中的某个其他地址。

```
&*pointer // (*pointer) - dereference `pointer`, now you have `j`
          // &(*pointer) - the address of `j`(that's the data that `pointer` has) 
```

然而：

```
*&pointer //(&pointer) - the address of pointer(where pointer resides in memory)
          // *(&pointer) - deference that address and you get `pointer` 
```

* * *

我*总是*发现指针更容易用图片跟踪，所以也许这个插图将有助于理解为什么它们是相同的：

```
//In case of &*pointer, we start with the pointer, the dereference it giving us j
//Then taking the address of that brings us back to pointer:

                                           +--&(*pointer)-----------+
                                           |                        |
memory address            0x7FFF3210       |            0x7FFF0123  |
                        +------------+     |             +-----+    |
data present            | pointer =  | <---+        +->  | j=8 |----+
                        | 0x7FFF0123 | ->(*pointer)-+    +-----+
                        +------------+

//in the *&pointer case, we start with the pointer, take the address of it, then
//dereference that address bring it back to pointer

memory address           +------------>  0x7FFF3210 ----*(&pointer)--+  
                         |                                           |
                         |              +------------+               |   
data present             |              | pointer =  | <----------- -+   
                         +--&pointer ---| 0x7FFF0123 |         
                                        +------------+ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T14:55:02.437

只要`pointer`是指向基本类型的原始指针，这些表达式就等价（这样`operator &`和`operator *`不会重载，否则等价可能不成立）**。**

其实这个表达式：

```
*(&pointer) // Evaluates to the address of j 
```

首先计算地址，`pointer`然后取消引用它。这再次为您提供 的*值*，`pointer`即 的地址`j`（因为这就是您初始化 的方式`pointer`）。另一方面，这个表达式：

```
&(*pointer) // Evaluates to the address of j 
```

首先取消引用`pointer`（提供对 的引用`j`），然后获取其地址（从而评估 的地址`j`）。

如您所见，这两个表达式都计算为 的地址`j`，因此它们是等价的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T14:54:49.580

在 C 语言中，从右到左阅读类型通常会更成功

```
 int *pointer = &j;

 (int *) = the pointer to an integer
 (&) = the address of 
```

所以

```
 (&*) = the pointer to an address of
 (*&) = the address of a pointer 
```

由于指针的地址可以分配给指针（任何东西的地址都可以分配给指针），并且指向任何东西的指针也是指针，因此您将获得分配以按类型工作，（但我没有t认为它会非常实用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T14:54:52.003

它们是相同的，因为没有其他任何意义。`&*pointer`是 - 指向的对象的地址，`pointer`这就是值（存储在其中的地址）`pointer`本身。

`*&pointer``pointer`是（被取消引用的`pointer`变量的地址）的地址所指向的对象- 同样，这就是`pointer`它本身。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-08T14:54:56.520

> `*&pointer`返回指针地址，然后返回它指向的内容......但这是变量而不是地址。所以这是我的疑问......

让我们一步一步来：

*   `&pointer`是类型`int**`并指向`pointer`变量。

*   `*&pointer`取消引用上述内容，实际上等同于 simple `pointer`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-08T14:56:06.237

`&*pointer`is并返回指向 或`&(*pointer)`的值的地址。`pointer``pointer`

`*&pointer`is`*(&pointer)`并返回`&pointer`指向 或的值`pointer`。*

# oracle - 从当前行计数到最后一行

> ID：15882280
> 
> 赞同：0
> 
> 时间：2013-04-08T14:51:43.143
> 
> 标签：oracle

我需要以以下方式提取数据。

```
progress_CMC_status    progress_cmc_status_numbers    cmc_status_numbers
Mature Draft                         2                         5
Review                               0                         3
Final Draft                          0                         3
Final Comment                        0                         3
Final Document                       2                         3
Archived Document                    1                         1 
```

但我得到不同的输出

```
progress_CMC_status    progress_cmc_status_numbers    cmc_status_numbers
Mature Draft                         2                         5
Review                               0                         0
Final Draft                          0                         0
Final Comment                        0                         0
Final Document                       2                         3
Archived Document                    1                         1 
```

尝试了以下代码：

```
 WITH sta AS
  (SELECT 'Mature' "status1"
  FROM DUAL
  UNION
  SELECT 'Review'
    FROM DUAL
  UNION
  SELECT 'Final Draft'
    FROM DUAL
  UNION
  SELECT 'Final Comment'
    FROM DUAL
  UNION
  SELECT 'Final Document'
    FROM DUAL
  UNION
  SELECT 'Archived'
    FROM DUAL)
  SELECT   DECODE ("stat",
             'Mature', 'Mature Draft',
             'Review', 'Review',
             'Final Draft', 'Final Draft',
             'Final Comment', 'Final Comment',
             'Final Document', 'Final Document',
             'Archived', 'Archived Document'
            ) AS "progress_CMC_status",
  NVL
        (TO_CHAR ("progress_cmc_status_numbers"),
         0
        ) AS "progress_cmc_status_numbers",
  NVL (TO_CHAR ("cmc_status_numbers"), 0) AS "cmc_status_numbers"
  FROM (SELECT "status1" AS "stat",
             NVL
                (TO_CHAR (NULL),
                 "progress_cmc_status_numbers"
                ) AS "progress_cmc_status_numbers",
             NVL (TO_CHAR (NULL),
                  "cmc_status_numbers"
                 ) AS "cmc_status_numbers"
   FROM sta
   LEFT JOIN
   (SELECT   VALUE AS "progress_CMC_status",
                       COUNT (*) AS "progress_cmc_status_numbers",
                       SUM (COUNT (*)) OVER (ORDER BY DECODE
                                                        (VALUE,
                                                         'Mature', 0,
                                                         'Review', 1,
                                                         'Final Draft', 2,
                                                         'Final Comment', 3,
                                                         'Final Document', 4,
                                                         'Archived', 5,
                                                         6
                                                        ) DESC ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW)
                                                  AS "cmc_status_numbers"
                  FROM ATTRIBUTES
                 WHERE attribute_type_id IN (
                                            SELECT attribute_type_id
                                              FROM attribute_types
                                             WHERE name_display_code =
                                                                      'RD')
                   AND VALUE IN
                          ('Mature', 'Review', 'Final Draft',
                           'Final Comment', 'Final Document', 'Archived')
                   AND object_id IN (SELECT obj_id
                                       FROM docs)
              GROUP BY VALUE) a1 ON sta."status1" =
                                                  a1."progress_CMC_status"
             )
  ORDER BY DECODE ("progress_CMC_status",
             'Mature Draft', 0,
             'Review', 1,
             'Final Draft', 2,
             'Final Comment', 3,
             'Final Document', 4,
             'Archived Document', 5,
             6
            ) 
```

样本数据

```
 CREATE TABLE ATTRIBUTES
         (
         object_id NUMBER(4),
         attribute_type_id NUMBER(4),
         name_display_code VARCHAR2(5),
         VALUE VARCHAR2(25)
          );

         begin
         insert into attributes values (101,201,'RMD','A100');
         insert into attributes values (102,201,'RMD','A200');
         insert into attributes values (103,201,'RMD','A300');
         insert into attributes values (104,200,'RD','Mature');
         insert into attributes values (105,200,'RD','Mature');
         insert into attributes values (106,200,'RD','Mature');
         insert into attributes values (107,200,'RD','Mature');
         insert into attributes values (108,200,'RD','Mature');
         insert into attributes values (109,200,'RD','Archived');
         insert into attributes values (110,200,'RD','Archived');
         insert into attributes values (111,200,'RD','Archived');
         insert into attributes values (112,200,'RD','Archived');
         insert into attributes values (113,200,'RD','Mature');
         insert into attributes values (114,200,'RD','Mature');
         insert into attributes values (115,200,'RD','Mature');
         insert into attributes values (116,200,'RD','Mature');
         insert into attributes values (117,200,'RD','Final Document');
         insert into attributes values (118,200,'RD','Final Document');
         insert into attributes values (119,201,'RMD','A400');
         insert into attributes values (120,201,'RMD','A500');
         end;
         /

        CREATE TABLE docs
        (
        obj_id NUMBER(4)
        );

        BEGIN
        INSERT INTO docs
        VALUES (100);

        INSERT INTO docs
        VALUES (104);

        INSERT INTO docs
        VALUES (109);

        INSERT INTO docs
        VALUES (117);

        INSERT INTO docs
        VALUES (118);

        INSERT INTO docs
        VALUES (119);

        INSERT INTO docs
        VALUES (120);  
        END;
        /

       CREATE TABLE attribute_types
       (
       attribute_type_id NUMBER(4),
       name_display_code VARCHAR2(5)
       );

       INSERT INTO attribute_types
       VALUES (200, 'RD');

       INSERT INTO attribute_types
       VALUES (201, 'RMD'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:06:34.573

```
WITH sta AS
  (SELECT 'Mature' "status1" FROM DUAL UNION
  SELECT 'Review' FROM DUAL UNION
  SELECT 'Final Draft' FROM DUAL UNION
  SELECT 'Final Comment' FROM DUAL UNION
  SELECT 'Final Document' FROM DUAL UNION
  SELECT 'Archived' FROM DUAL)
SELECT 
  DECODE ("stat",
             'Mature', 'Mature Draft',
             'Review', 'Review',
             'Final Draft', 'Final Draft',
             'Final Comment', 'Final Comment',
             'Final Document', 'Final Document',
             'Archived', 'Archived Document'
  ) AS "progress_CMC_status",
  NVL("progress_cmc_status_numbers", 0) AS "progress_cmc_status_numbers",
  SUM (NVL("progress_cmc_status_numbers", 0)) OVER (ORDER BY 
            -DECODE ("stat",
            'Mature', 0,
            'Review', 1,
            'Final Draft', 2,
            'Final Comment', 3,
            'Final Document', 4,
            'Archived', 5,
            6) 
   ) AS "cmc_status_numbers"
FROM 
  (
    SELECT 
      "status1" AS "stat",
      "progress_cmc_status_numbers"
    FROM 
      sta
      LEFT JOIN (
        SELECT   
          VALUE AS "progress_CMC_status",
          COUNT (*) AS "progress_cmc_status_numbers"
        FROM ATTRIBUTES
        WHERE 
          attribute_type_id IN (
            SELECT attribute_type_id
            FROM attribute_types
            WHERE name_display_code = 'RD'
          )
          AND VALUE IN ('Mature', 'Review', 'Final Draft',
            'Final Comment', 'Final Document', 'Archived')
          AND object_id IN (SELECT obj_id FROM docs)
        GROUP BY VALUE
      ) a1 ON sta."status1" = a1."progress_CMC_status"
  )
  ORDER BY DECODE ("progress_CMC_status",
             'Mature Draft', 0,
             'Review', 1,
             'Final Draft', 2,
             'Final Comment', 3,
             'Final Document', 4,
             'Archived Document', 5,
             6) 
```

[小提琴](http://www.sqlfiddle.com/#!4/a43c3/3)

# android - 在线性布局中添加按钮崩溃

> ID：15882281
> 
> 赞同：0
> 
> 时间：2013-04-08T14:51:44.837
> 
> 标签：android, android-linearlayout

我真的不明白为什么这个简单的代码会在这一行崩溃`layout.addView(button);`

```
super.onCreate(savedInstanceState);
    layout = (LinearLayout)findViewById(R.id.linearLayout);
    LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

    Button button = new Button(this);
    button.setHeight(100);
    button.setWidth(100);
    button.setText("HELLO");
    button.setLayoutParams(p);
    layout.addView(button); 
```

activity_main.xml

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/linearLayout">
</LinearLayout> 
```

编辑：编辑后的代码仍然崩溃。但现在在 setContentView 中崩溃了。

```
super.onCreate(savedInstanceState);

    layout = (LinearLayout)findViewById(R.id.linearLayout);
    setContentView(layout); 
    LayoutParams p = new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);

    int i,j;
    Button button = new Button(this);
    button.setHeight(100);
    button.setWidth(100);
    button.setText("HELLO");
    layout.addView(button,p); 
```

Logcat 报告 ![在此处输入图像描述](https://i.stack.imgur.com/2PzNZ.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:56:07.710

只是因为你没有打电话`setContentView()`。`View`你的根`Activity`是`null`，所以是`layout`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:56:49.153

您在`Views`此处指定宽度高度：

```
button.setHeight(100);
button.setWidth(100); 
```

然后立即覆盖它：

```
button.setLayoutParams(p); 
```

试试这个，删除`setWidth`and`setLayoutParams`并删除`p`：

```
 layout.addView(button, new LayoutParams(100,100)); 
```

# python - 我对此感到非常困惑并且正在尝试，但我认为我没有得到想要的东西

> ID：15882284
> 
> 赞同：0
> 
> 时间：2013-04-08T14:51:51.410
> 
> 标签：python, python-3.x

我真的很困惑，需要你的帮助我试过但不认为我得到了我应该得到的

> 5a。（5 分）编写一个函数，输入参数是一个整数 x，并生成一个包含那么多 0 的列表并返回该列表。
> 5b.( 6 pts) 现在编写一个函数，将相同的整数作为输入参数，并使用第一个函数生成 x 个 0 列表的列表（因此您将在第一个函数中创建的列表附加到你的新清单。
> 
> 5c.（6 分）最后，编写第三个循环 5 次的函数。每次，它生成一个介于 0 和 x 之间的第一个随机数 (a)，然后生成一个介于 0 和 x 之间的第二个随机数 (b)。它使用这两个数字将 [a][b] 处的列表列表更改为 -1。你刚刚把你的战列舰放到了棋盘上（有点——我知道战列舰有不同的长度。我不想让随机长度的战列舰复杂化）。

```
#5a

def lister(x):
    return([0]*x)

print(lister(15))

#5b

def lister2(x):
    return [lister(x)]*x

print(lister2(3))

#5c

def looplist(x):
    n=5
    a=lister2(x)
    while n>0:
        r1=randrange(0,(x))
        r2=randrange(0,(x))
        a[r1]=-1
        a[r2]=-1
        print(a)
        n-=1

looplist(4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:05:22.763

我相信你想要在最后一种方法中做的是：

```
a[r1][r2]=-1 
```

您创建了一个二维数组，因此第一部分`a[r1]`将为您提供一个列表，该列表位于位置 [r1]，然后，在此列表中，您访问 position`r2`并将值修改为`-1`。

另外，我认为一个简单的 for 将比您当前使用 while 循环的解决方案更具可读性：

```
for _ in range(5):
     #generate the two rands, etc 
```

# android - 如何用 Fragment 替换自定义 ArrayAdapter，即 getFragmentmanager() 给出错误消息

> ID：15882285
> 
> 赞同：0
> 
> 时间：2013-04-08T14:51:52.833
> 
> 标签：android, android-fragments

我有一个有点复杂的问题，即我正在 android 中实现一个列表视图。一个列表项中有近 6 个子项。问题是列表 itemClickListener 由于其中的文本视图而表现不佳。我的意思是在 textview 上它不执行 itemClickListing。所以我认为我必须为每个 TextView 单独实现 clickListeners。**现在问题开始了：** ListView 的 itemClickListener（它在 Fragment 类里面）：

```
 JournalAdapter adapter = new JournalAdapter(JournalListFragment.activity, R.layout.journal_list_items, journals);

        ListView listView1 = (ListView)JournalListFragment.activity.findViewById(R.id.listView1);
        listView1.setAdapter(adapter);

        listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View view, int pos, long id) {
                Utilities.selectedJnrlId = view.getId() ;

                FragmentTransaction transaction = getFragmentManager().beginTransaction();
                transaction.replace(android.R.id.content, new JournalAddUpdateFragment());
                transaction.addToBackStack(null);
                transaction.commit();

            }

        }); 
```

我在这里使用了自定义适配器。当我在 listView 上实现 itemClickListener 时；我在一个从片段类扩展的类中。所以我只是替换 listView-itemClickListener 结果中的片段但是当我去另一个类时，即**CustomArrayAdapter**我不能这样做，因为**getFragmentManager()**。它给出了一个错误，因为我的 Custom-ArrayAdapter 类确实从 Fragment 类扩展。那么有没有合理的解决方案呢？问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:16:21.933

据我了解，代码没有找到，因为它在您的片段的子类中。

这只是将编译器指向正确的类的简单问题。

你会这样称呼它：

```
MyFragment.this.getFragmentManager.beginTran...  etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:28:23.073

我实际上在使用

```
android:textIsSelectable="true" 
```

在文本视图中。这给我带来了问题。它使文本视图无法点击。原因，我不知道。所以我把它换成了

```
android:text="" 
```

并且还使用了

```
android:focusableInTouchMode="false" 
android:focusable="false" 
```

在文本视图中。在包含这些 TextViews 的 RelativeLayout 中；我用了

```
android:descendantFocusability="blocksDescendants"> 
```

最后，我的列表视图变成了可点击的，只有一个**itemClickListener**。单独的 TextView 不需要 clickListeners。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T15:03:48.977

您可以手动将侦听器绑定到您的视图，而不是使用 ListView 的点击侦听器`getView()`。唯一的技巧是您需要知道哪个视图触发了点击，但解决方案非常简单 - 使用`setTag()`并作为标签放置即列表视图的行位置。然后`getTag()`在单击侦听器中，获取视图的相应行并继续

# c# - powershell c# 将comobject转换为.net

> ID：15882287
> 
> 赞同：0
> 
> 时间：2013-04-08T14:52:04.270
> 
> 标签：c#, powershell

我正在使用以下代码从 Outlook 中检索特定的通讯录：

```
$outlook = $(New-Object -ComObject Outlook.Application)
$Session = $outlook.Session
$Session.Logon()
$ab = $Session.AddressLists | ? {$_.Name -eq 'test'} 
```

然后尝试使用 C#`$ab`使用以下命令将对象转换为 .net：

```
$source = @"
using Microsoft.Office.Interop.Outlook;
public unsafe static class OAB
{
    public static void List(object Stream) 
    {
       var i = Stream as Microsoft.Office.Interop.Outlook.AddressList; 
       return i;
    }
}
"@
$cp = new-object System.CodeDom.Compiler.CompilerParameters                                                                                                                                                                                                 
$cp.CompilerOptions = "/unsafe"
$cp.ReferencedAssemblies.Add('C:\wkdir\refassem\Microsoft.Office.Interop.Outlook.dll')
Add-Type -TypeDefinition $source -CompilerParameters $cp 
```

我收到的错误是：

```
Since 'OAB.List(object)' returns void, a return keyword must not be followed by an object expression 
```

免责声明，我是 C# 的新手，所以请放轻松！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:58:47.797

您将 List 函数声明为返回类型，`void`但您正在返回一个值。要修复，只需将您的功能更改为：

```
public static Microsoft.Office.Interop.Outlook.AddressList List(object Stream) 
```

`void`函数意味着不会返回任何值。如果您确实计划返回一个值，那么您需要删除 void 并将其替换为您想要返回的类型。

# mysql - MySQL 数据透视表和直方图同时进行

> ID：15882295
> 
> 赞同：0
> 
> 时间：2013-04-08T14:52:18.660
> 
> 标签：mysql, pivot

我目前有以下表格的表格

```
account_id | phone_name
0          | samsung M360
12         | HTC One
58         | LG Optimus
12         | Novatel
.            .
.            .
.            . 
```

我想将其转换为以下形式的表格

```
account_id | samsung M360 | HTC One | LG Optimus | Novatel | ...
0            1              0         0            0
12           0              1         0            1
58           0              0         1            0
.
.
. 
```

即我想制作一个包含每个phone_names 计数的数据透视表`account_id`。主要问题是有 50 多个不同的电话名称，所以我不能以通常的方式通过列出每个`phone_name`. 这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:57:37.190

MySQL 没有 PIVOT 函数，但您可以使用带有`CASE`表达式的聚合函数将行转换为列。

如果您的数量或`phone_name`值有限，则可以对查询进行硬编码：

```
select account_id,
  sum(case when phone_name = 'samsung M360' then 1 else 0 end) SamsungM360,
  sum(case when phone_name = 'HTC One' then 1 else 0 end) HTCOne,
  sum(case when phone_name = 'LG Optimus' then 1 else 0 end) LGOptimus,
  sum(case when phone_name = 'Novatel' then 1 else 0 end) Novatel
from yt
group by account_id; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/5144f/4)。

但是如果这些值是未知的，那么您将需要使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN phone_name = ''',
      phone_name,
      ''' THEN 1 else 0 END) AS `',
      phone_name, '`'
    )
  ) INTO @sql
FROM yt;

SET @sql 
  = CONCAT('SELECT account_id, ', @sql, ' 
            from yt
            group by account_id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/5144f/5)。两个查询都给出了结果：

```
| ACCOUNT_ID | SAMSUNG M360 | HTC ONE | LG OPTIMUS | NOVATEL |
--------------------------------------------------------------
|          0 |            1 |       0 |          0 |       0 |
|         12 |            0 |       1 |          0 |       1 |
|         58 |            0 |       0 |          1 |       0 | 
```

注意：[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)默认值为 1024 作为生成的字符串的长度。因此，[`group_concat_max_length`](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_group_concat_max_len)如果您的字符串太长，您可能需要更改会话设置。

# xcode - 如何为旧版 Mac OS X 调试应用程序？

> ID：15882296
> 
> 赞同：4
> 
> 时间：2013-04-08T14:52:19.150
> 
> 标签：xcode, macos, cocoa, gdb, lldb

我正在 OS X 10.8 机器上使用 Xcode 4.6 开发应用程序。应用部署目标设置为 10.6，这是我们需要支持的。但是当我存档应用程序（编译、链接和嵌入资源+框架）并将其部署（也称为复制）到 10.6 测试机器时，它会因通用分段错误而崩溃。它在 10.7 上运行良好。

我无法在旧 Mac 上的 Xcode 中编译项目，因为该应用程序是使用较新的编译器构建的（它使用 ARC、隐式属性合成、新的 Objective-c 文字语法等）。它也不会进行类型检查，因为基础 SDK 是 10.8，并且它引用了 10.6 机器上的编译器不知道的一些 10.8 令牌。

关于如何调试应用程序的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:16:32.373

我与这家公司/软件没有任何关系，但[Deploymate](http://www.deploymateapp.com/)是一款付费应用程序，它可以扫描您的应用程序的 SDK 使用情况，并在您调用旧操作系统版本上不可用的选择器和 API 时告诉您。这可以帮助您跟踪与 API 使用相关的异常和崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:15:45.163

您很可能使用了一个或多个在 10.6 上崩溃的 10.7+ API。使用 10.8 目标 SDK，您允许对该 SDK 中可用的所有函数调用。但是，应用程序绑定较晚，因此当您实际上不调用这些函数时，它不会崩溃。您需要与此类似的显式检查（此处为全屏功能）：

```
#if MAC_OS_X_VERSION_MAX_ALLOWED > MAC_OS_X_VERSION_10_6
if (runningOnLionOrLater) {
    [mainWindow setCollectionBehavior: NSWindowCollectionBehaviorFullScreenPrimary];
    [toggleFullscreenItem setHidden: NO];
}
#endif 
```

确定当前版本的一种方法是：

```
 int macVersion;
    if (Gestalt(gestaltSystemVersion, &macVersion) == noErr) {
        runningOnLionOrLater = macVersion > MAC_OS_X_VERSION_10_6;
    } 
```

为了调试有问题的调用，只需将基本 SDK 设置为 10.6，XCode 应该标记那些在那里不可用的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-25T09:04:14.943

虽然对此没有真正好的解决方案（我在不同的 macOS 版本上看到了不同的行为），也没有办法简单地模拟旧的 macOS 版本，但如果你有一台机器备用：

可以使用外部 HD，对其进行分区并安装不同的 macOS 版本。它们都可以启动，并且为每个操作系统版本重新启动机器是一个问题（痛苦）。

# c# - 以下映射对象中最快的（字典、元组、键值对）

> ID：15882299
> 
> 赞同：0
> 
> 时间：2013-04-08T14:52:23.760
> 
> 标签：c#, optimization, data-structures, dictionary, hashmap

目前我有这样的映射设置

```
//Identifiers to save (currently)
Dictionary<string, Dictionary<string, string>> toSaveIdentifiers =
    new Dictionary<string, Dictionary<string, string>>(); // 
```

但是，我想为其添加一个额外的维度，因为我错过了要添加的额外属性。

我正在尝试设置某种形式的映射，这种映射在程序中经常被填充，并且在整个程序中也会被查找。我想知道这样做的最佳方法是什么。

```
//Identifiers to save (tuple)
Dictionary<Tuple<string,string>, Dictionary<string, string>> toSaveIdentifiers =
    new Dictionary<Tuple<string, string>, Dictionary<string, string>>(); //

//Identifiers to save (adding another dictionary dimension)
Dictionary<string, Dictionary<string,Dictionary<string, string>>> toSaveIdentifiers =
    new Dictionary<string, Dictionary<string, Dictionary<string, string>>>(); //

//Identifiers to save (adding keyvaluepair)
Dictionary<KeyValuePair<string,string>, Dictionary<string, string>> toSaveIdentifiers =
    new Dictionary<KeyValuePair<string, string>, Dictionary<string, string>>(); // 
```

当我填充它/查找时，我会做类似的事情。

```
 // check identifier map dictionary
    if (dictionary.Keys.Contains(identifier))
    {
        if (dictionary[identifier].Keys.Contains(currency))
        {
            //stuff
        }
        else
        {
            //stuff
        }
    }
    else
    {
            //more stuff
    } 
```

进行此查找的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:59:08.010

由于您的标识符似乎都是字符串类型，您总是可以将它们全部连接成一个大字符串并将其用作键。然后，您只需要做一个，而不是做嵌套的包含。就存储不同级别的标识符而言，它也会更加灵活。

即给定一个2级密钥，它会是

```
string ident = level1Identifier + "." + level2Identifier; 
```

（使用 string.format() 或 StringBuilder 会更有效，但这段代码更适合解释）

还要考虑加入字符应该是您知道不会出现在任何级别标识符中的东西，以避免混淆或意外重复。

# c# - C# 迭代“默认文档”IIS 7 功能

> ID：15882300
> 
> 赞同：0
> 
> 时间：2013-04-08T14:52:26.490
> 
> 标签：c#, iis-7

如何在 C# 中的应用程序的“默认文档”IIS 功能中遍历文件名？

我正在使用 Microsoft.Web.Administration.ServerManager。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:01:10.573

您可以使用它的“松散”类型模型来完成它，基本上用于阅读它的默认网站看起来像：

```
using (ServerManager serverManager = new ServerManager())
{
    Configuration webConfig = serverManager.GetWebConfiguration("Default Web Site");
    ConfigurationSection section = webConfig.GetSection("system.webServer/defaultDocument");
    foreach (ConfigurationElement item in section.GetCollection("files"))
    {
        Console.WriteLine(item["value"]);
    }
} 
```

您还可以为要经常使用的集合和条目生成强类型包装器，这使其更清晰并防止错误，这将使其看起来像：

```
using (ServerManager serverManager = new ServerManager())
{
    Configuration webConfig = serverManager.GetWebConfiguration("Default Web Site");
    DefaultDocumentSection section = (DefaultDocumentSection)webConfig.GetSection("system.webServer/defaultDocument", typeof(DefaultDocumentSection));
    foreach (FileElement item in section.Files)
    {
        Console.WriteLine(item.Value);
    }
} 
```

为此，您需要以下“强类型包装器”：

```
public class DefaultDocumentSection : ConfigurationSection
{
    private FilesCollection _files;
    public FilesCollection Files
    {
        get
        {
            if (_files == null)
            {
                _files = (FilesCollection)base.GetCollection("files", typeof(FilesCollection));
            }

            return _files;
        }
    }

}
public class FilesCollection : ConfigurationElementCollectionBase<FileElement>
{
    protected override FileElement CreateNewElement(string elementTagName)
    {
        return new FileElement();
    }
}

public class FileElement : ConfigurationElement
{
    public string Value { get { return (string)base["value"]; } }
} 
```

# javascript - 如何执行一次功能？

> ID：15882303
> 
> 赞同：8
> 
> 时间：2013-04-08T14:52:35.980
> 
> 标签：javascript, jquery, fadein

```
$("#div1, #div2").fadeIn('500',function(){
    {
        console.log('Test');
    }
}); 
```

在这里小提琴：http: [//jsfiddle.net/y97h9/](http://jsfiddle.net/y97h9/)

上面的代码将在控制台中打印两次“测试”。我怎样才能让它只打印一次。是否可以？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-08T14:54:08.097

当然，您可以使用 jQuery [Promise](http://api.jquery.com/promise/)来解决多个回调问题：

```
$("#div1, #div2").fadeIn('500').promise().done(function()
{
    console.log('Test');
}); 
```

> .promise() 方法返回一个动态生成的 Promise，一旦绑定到集合的特定类型的所有操作（无论是否排队）都结束，该 Promise 就会被解析

**[工作演示](http://jsfiddle.net/y97h9/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T14:54:18.417

回调将为每个匹配的元素运行一次。您始终可以设置一个标志以查看它是否已经运行：

```
var hasRun = false;
$("#div1, #div2").fadeIn('500', function() {
    if (hasRun) return;
    console.log('Test');
    hasRun = true;
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T14:58:45.077

使用布尔标志来防止 console.log('Test'); 从被调用两次。

```
var isCalled = false;
$("#div1, #div2").fadeIn('500',function(){
    if(!isCalled) {
        isCalled = true;
        console.log('Test');
    }
}); 
```

# java - Spring批量读取多条记录并处理多条记录

> ID：15882304
> 
> 赞同：3
> 
> 时间：2013-04-08T14:52:35.883
> 
> 标签：java, spring-batch

我希望我的 Spring 批处理应用程序一次从数据库中读取 50 条记录，然后将这 50 条记录发送到处理器，然后发送到写入器。

有人可以告诉我如何做到这一点。

我尝试使用 JdbcPagingItemReader 并将 pageSize 设置为 50，它读取 50 条记录，但 rowMapper、处理器和写入器一次接收一条记录，而不是获取 50 条记录。

如何使处理器和编写器在 dto 中获得 50 条记录，而不是一次接收一条记录？

xml弹簧配置

```
<job id="indexJob" job-repository="jobRepository">
    <step id="job1">
        <tasklet transaction-manager="transactionManager">
            <chunk reader="reader" processor="processor" writer="writer" commit-interval="1"/>
        </tasklet>
    </step>
</job> 
```

Java 弹簧配置

```
@Bean
@Scope("step")
public JdbcPagingItemReader reader() throws Exception {

    MySqlPagingQueryProvider provider = new MySqlPagingQueryProvider();
    provider.setSelectClause("select id");
    provider.setFromClause("from BATCH_CUSTOMER");
    provider.setSortKey("id");

    JdbcPagingItemReader reader = new JdbcPagingItemReader();
    reader.setDataSource(this.dataSource());
    reader.setQueryProvider(provider);
    reader.setPageSize(50);
    reader.setRowMapper(new MyRowMapper());
    reader.afterPropertiesSet();

    int counter = 0;
    ExecutionContext executionContext = new ExecutionContext();
    reader.open(executionContext);
    Object pageCredit = new Object();
    while (pageCredit != null) {
        pageCredit = reader.read();
        System.out.println("pageCredit:" + pageCredit);
        counter++;
    }
    reader.close();

    return reader;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:36:30.880

在您的 xml 配置中，将提交间隔更改为 50。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:28:34.953

在 Spring 批处理论坛中回答

[http://forum.springsource.org/showthread.php?136209-JdbcPagingItemReader-not-passing-all-page-records-to-the-processor&p=442538#post442538](http://forum.springsource.org/showthread.php?136209-JdbcPagingItemReader-not-passing-all-page-records-to-the-processor&p=442538#post442538)

这完全是您想要处理每条记录的设计。ItemWriter 获得尽可能多的记录，但受提交间隔的约束。你的是 1，这意味着每条记录都是单独提交的，我建议你将它设置为 50。处理器自己处理每条记录，直到达到提交间隔，然后调用 writer。如前所述，您的是1。

# android - Android - PendingIntent.getActivity 中的上下文参数

> ID：15882308
> 
> 赞同：2
> 
> 时间：2013-04-08T14:52:59.300
> 
> 标签：android, android-pendingintent, android-context

使用方法创建待处理意图时`PendingIntent.getActivity()`，第一个参数是（根据 android 文档）

> 此 PendingIntent 应在其中启动活动的上下文。

当我在我的应用程序中启动一个新的活动实例时，我可以通过`getApplicationContext()`. 但是如果我想启动另一个应用程序活动的实例，*上下文*参数应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:59:41.883

需要此上下文`startActivity()`，因此只需传递您到目前为止所做的事情，您要启动的活动在其他包中没有任何区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:57:58.823

只是这个上下文是可以的。这与您在应用程序中通过 getApplicationContext().startActivity(intent) 启动活动类似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:16:18.260

您可以使用任何`Context`您喜欢的方式来触发`Intent`另一个应用程序 - 无论是 a `Service`、 an`Activity`还是 a `Context`from`getApplicationContext()`或在 Receiver 中传递给您。

# html - 段落超出页面的最大宽度

> ID：15882315
> 
> 赞同：0
> 
> 时间：2013-04-08T14:53:06.967
> 
> 标签：html, css

[http://imageshack.us/photo/my-images/690/printef.jpg/](http://imageshack.us/photo/my-images/690/printef.jpg/) 文本超出正文页，我不知道为什么会这样。文本应从蓝线的另一行开始。

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="keywords" content="">

    <link rel="stylesheet" type="text/css" href="css/main.css">

    <script type="text/javascript" href=""></script>
    <title> tech </title>
</head>

<body id="skin" style="background-image:url(img/bck.jpg)">
    <div id="root">
        <div id="Meniu_header">
            <div id="top">
                <header id="top_header" style="background-image: url(top.jpg)">
                    <img src="img/200.jpg">
                    <h1 id="h1"> UNDER CONSTRUCTION </h1>
                </header>

                <nav id="meniu">
                        <ul>
                            <li> Acasa </li>
                            <li> Servicii </li>
                            <li> Contact </li>
                        </ul>
                </nav>
            </div>
        </div>

            <div id="test">
                <h2> sajbvljaslblas </h2>
                <p> afjkvbafjlbljabadflblajjlaerbladfblaerjlblae </p>
                <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
                <br /><br /><br /><br /><br /><br /><br />
            </div>

            <div id="pagina">           
                <div id="stanga">
                    <div id="optiuni">
                        <ul id="st_optiuni">
                            <li> Aluminiu </li>
                            <li> Plastic </li>
                            <li> Fonta </li>
                            <li> Otel </li>
                        </ul>
                        <div id="st_scris">
                            <p> adbnaeasfbabfa </p>
                            <p> adfbadf fsdbhadad </p>
                            <p> adfbad af afsd </p>
                            <p> a dfbad  </p>
                            <p>  adfba fa fd</p>
                            <p> adfb adf  adfb </p>
                            <p> adfb adfb ad </p>
                        </div>
                    </div>
                </div>

            <div id="dreapta">
            <section id="dr_articole">
                <article>
                    <header>
                        <h2> Titlu </h2>
                        <p class="problema"> This is a long text that it's makeing me problems ..........aaaaaaaaaaaaa aaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaa </p>
                    </header>
                </article>
            </section>
            </div>
            </div>

        <footer>
            <p id="footer"> Copyright © 2013    </p>
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/ro/"><img alt="Licenţa Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-nd/3.0/ro/80x15.png" /></a>.
        </footer>

    </div>

</body>

</html> 
```

而CSS是：

```
*{
    margin: 0px;
    padding: 0px;
}
header, nav, section, article, footer{
    display: block;
}
body{
    width: 100%;
    display: -webkit-box;
    -webkit-box-pack: center;
}
footer{
    display: -webkit-box;
    -webkit-box-pack: center;
    font-family: Arial, sans-serif;
    font-size: 10px;
    color: #FFFFFF;
}
#skin{
    background-repeat: no-repeat;
    background-attachment: fixed;
}
#root{
    max-width: 1000px;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-flex: 1;
    border: 2px solid white;
}
#top{
    display: -webkit-box;
    -webkit-box-orient: vertical;
}
#top_header{
    display: -webkit-box;
    -webkit-box-orient: horizoantal;
    padding: 20px;
}
#h1{
    border: 1px solid red;
    font: 50px bold Arial;
    color: #FFFFFF;
    margin-left: 50px;
}
#meniu{
    color: white;
    display: -webkit-box;
    -webkit-box-orient: horizoantal;
    background: green;
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
}
#meniu li{
    display: inline-block;
    text-decoration: none;
    list-style: none;
    padding: 5px;
    font: bold 17px Tahoma;
}
#test{
    border: 2px solid red;
    width: 800px;
    height: 400px;
    margin-top: 20px;
    margin-left: 100px;
}
#pagina{
    display: -webkit-box;
    -webkit-box-orient: horizontal;
    margin-top: 50px;
    border: 4px solid blue;
}
#stanga{
    display: -webkit-box;
    -webkit-box-orient: vertical;
    border: 3px dashed red;
}
#st_optiuni{
    display: -webkit-box;
    -webkit-box-orient: vertical;
    width: 200px;
    list-style: none;
    padding: 5px 5px 5px 10px;
    margin-top: 50px;
    border-radius: 8px;
    color: #FFFFFF;
    border: 2px solid yellow;
}
#st_scris{
    display: -webkit-box;
    -webkit-box-orient: vertical;
    width: 200px;
    list-style: none;
    padding: 5px 5px 5px 10px;
    margin-top: 50px;
    border-radius: 8px;
    color: #FFFFFF;
    border: 2px solid yellow;
}
#dreapta{
    display: -webkit-box;
    -webkit-box-orient: vertical;
}
#dr_articol{
    -webkit-box-flex: 1;
    border: 1px dashed yellow;
}
.problema{
    color: white;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:56:21.887

`word-wrap: break-word;`每当容器中出现“不想离开”的单词时，使用这种方式，css 规则就会在新的一行上打破世界。

*** 这是一个 CSS3 属性。**

更多关于这方面的信息，您可以在 W3C 找到这里的链接。[自动换行规范](http://www.w3.org/TR/css3-text/#word-wrap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:03:14.373

一个健康的开始是强制你的父容器是相对的并且在浏览器宽度的范围内。然后将您的一天工作到您似乎超出范围的特定子元素。Google Chrome 的开发者工具是调试此类问题的绝佳资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:08:29.567

这是我的第一次尝试，请原谅我的任何错误。

您必须指定容器“div”的宽度，这样里面的元素就不会超出父级的宽度。

以下将是您页面的快速修复：

```
#dreapta{
    width: 520px;
    padding: 0 10px;
    display: -webkit-box;
    -webkit-box-orient: vertical;
} 
```

# ruby-on-rails - rails 计数器缓存和外键测试

> ID：15882316
> 
> 赞同：2
> 
> 时间：2013-04-08T14:53:08.763
> 
> 标签：ruby-on-rails, rspec, shoulda

这是我最喜欢的设计师模型

**最喜欢的设计师.rb**

```
class FavoriteDesigner < ActiveRecord::Base
  belongs_to :user, :counter_cache => true
  belongs_to :designer, :class_name => "User", :foreign_key => :designer_id

  validates_presence_of :user_id
  validates_presence_of :designer_id

  validates_numericality_of :user_id, :unless => Proc.new{|f| f.user_id.blank?}
  validates_numericality_of :designer_id, :unless => Proc.new{|f| f.designer_id.blank?}
end 
```

如何`:counter_cache => true and :foreign_key => :designer_id`使用 shoulda 在 rspec 中进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-25T12:16:46.310

您可以使用`counter_cache`和`with_foreign_key`应该匹配器：

```
it { should belong_to(:organization).counter_cache(true) }

it { should have_many(:worries).with_foreign_key('worrier_id') } 
```

有关完整的文档和示例，请查看：

[计数器缓存文档](https://github.com/thoughtbot/shoulda-matchers/blob/369e9d4c36cf4057eccd997bbb006d838b5aac0f/lib/shoulda/matchers/active_record/association_matcher.rb#L183)

[外键文档](https://github.com/thoughtbot/shoulda-matchers/blob/369e9d4c36cf4057eccd997bbb006d838b5aac0f/lib/shoulda/matchers/active_record/association_matcher.rb#L125)

# drupal-6 - hook_comment 不适用于 drupal 中的更新操作

> ID：15882320
> 
> 赞同：0
> 
> 时间：2013-04-08T14:53:26.233
> 
> 标签：drupal-6, comments

我正在尝试在drupal 6中保存或更新之前修改评论正文。我正在尝试使用以下代码：

```
function mymodule_comment(&$a1, $op) {
switch ($op) {
    case 'insert':
    case 'update':
             $a1['comment'] = myfunction($a1['comment']);
        break;

} 
```

}

但它不会在保存后更新评论正文。我还尝试了以下代码并且它有效：

```
function mymodule_comment(&$a1, $op) {
switch ($op) {
    case 'insert':
            $a1['comment'] = myfunction($a1['comment']);
            comment_save($a1);
        break;

} 
```

}

但在更新的情况下，它会显示错误：

```
function mymodule_comment(&$a1, $op) {
switch ($op) {
    case 'update':
             $a1['comment'] = myfunction($a1['comment']);
             comment_save($a1); 
        break;

} 
```

}

非常感谢任何想法或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:51:10.133

好的，我得到了解决。首先创建一个 hook_form_alter 函数：

```
mymodule_form_alter($form,$form_state,$form_id){
       if ($form_id == 'comment_form') {
    $form['#submit'][] = 'mymodule_comment_form_submit';
   }
 } 
```

然后创建 hook_comment_form_submit 函数并进行修改：

```
mymodule_comment_form_submit($form, $form_state){
     $form_state['values']['comment'] = myfunciton($form_state['values']);
 comment_save($form_state['values']); 
} 
```

我不知道这是否是一个好主意，但我发现很少有使用这种方法的帖子。

# r - R：数据点与高斯函数的稳健拟合

> ID：15882323
> 
> 赞同：3
> 
> 时间：2013-04-08T14:53:35.727
> 
> 标签：r, data-fitting

我需要做一些健壮的数据拟合操作。

我有一堆（x，y）数据，我想适合[高斯](http://en.wikipedia.org/wiki/Gaussian_function)（又名正常）函数。关键是，我想删除 ouliers。正如在下面的示例图中可以看到的那样，还有另一种数据分布污染了我右边的数据，我不想考虑它来进行拟合（即找到 \sigma、\mu 和整体尺度参数）。 ![样本数据图](https://i.stack.imgur.com/58yg4.png)

R 似乎是适合这项工作的工具，我发现了一些与健壮拟合相关的软件包（例如，[健壮](http://cran.r-project.org/web/packages/robust/)的、[健壮的基础、](http://cran.r-project.org/web/packages/MASS/)[质量）。](http://cran.r-project.org/web/packages/robustbase/)

但是，他们假设用户已经对 R 有很强的了解，这不是我的情况，并且文档仅作为一种参考手册提供，没有教程或同等内容。我的统计背景相当低，我试图阅读[有关 R 拟合的参考资料](http://cran.r-project.org/doc/contrib/Ricci-distributions-en.pdf)，但它并没有真正帮助（而且我什至不确定那是正确的方法）。但我有一种感觉，这实际上是一个非常简单的操作。

我已经检查了这个[相关的问题](https://stackoverflow.com/questions/14511454/)（以及链接的问题），但是它们将单个值向量作为输入，并且我有一个对向量，所以我看不到如何转置。

任何有关如何做到这一点的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T16:02:06.110

对数据拟合一条高斯曲线，其原理是最小化拟合曲线与数据的平方差之和，因此我们定义`f`我们的目标函数并`optim`在其上运行：

```
fitG =
function(x,y,mu,sig,scale){

  f = function(p){
    d = p[3]*dnorm(x,mean=p[1],sd=p[2])
    sum((d-y)^2)
  }

  optim(c(mu,sig,scale),f)
 } 
```

现在，将其扩展到两个高斯：

```
fit2G <- function(x,y,mu1,sig1,scale1,mu2,sig2,scale2,...){

  f = function(p){
    d = p[3]*dnorm(x,mean=p[1],sd=p[2]) + p[6]*dnorm(x,mean=p[4],sd=p[5])
    sum((d-y)^2)
  }
  optim(c(mu1,sig1,scale1,mu2,sig2,scale2),f,...)
} 
```

拟合第一次拟合的初始参数，以及对第二个峰值的直观猜测。需要增加最大迭代次数：

```
> fit2P = fit2G(data$V3,data$V6,6,.6,.02,8.3,0.10,.002,control=list(maxit=10000))
Warning messages:
1: In dnorm(x, mean = p[1], sd = p[2]) : NaNs produced
2: In dnorm(x, mean = p[4], sd = p[5]) : NaNs produced
3: In dnorm(x, mean = p[4], sd = p[5]) : NaNs produced
> fit2P
$par
[1] 6.035610393 0.653149616 0.023744876 8.317215066 0.107767881 0.002055287 
```

这一切看起来像什么？

```
> plot(data$V3,data$V6)
> p = fit2P$par
> lines(data$V3,p[3]*dnorm(data$V3,p[1],p[2]))
> lines(data$V3,p[6]*dnorm(data$V3,p[4],p[5]),col=2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/FCHuT.png)

但是我会警惕关于你的函数参数的统计推断......

产生的警告消息可能是由于 sd 参数变为负数。您可以通过使用 L-BFGS-B 并设置下限来解决此问题并获得更快的收敛：

```
> fit2P = fit2G(data$V3,data$V6,6,.6,.02,8.3,0.10,.002,control=list(maxit=10000),method="L-BFGS-B",lower=c(0,0,0,0,0,0))
> fit2P
$par
[1] 6.03564202 0.65302676 0.02374196 8.31424025 0.11117534 0.00208724 
```

正如所指出的，对初始值的敏感性始终是这样的曲线拟合问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T15:37:02.090

拟合高斯：

```
# your data
set.seed(0)
data <- c(rnorm(100,0,1), 10, 11) 

# find & remove outliers
outliers <- boxplot(data)$out
data <- setdiff(data, outliers)

# fitting a Gaussian
mu <- mean(data)
sigma <- sd(data)

# testing the fit, check the p-value
reference.data <- rnorm(length(data), mu, sigma)
ks.test(reference.data, data) 
```

# iframe - iFrame 上的 Angular、onLoad 函数

> ID：15882326
> 
> 赞同：54
> 
> 时间：2013-04-08T14:53:44.390
> 
> 标签：iframe, angularjs

我有这个使用基本 JavaScript 的 iframe：

```
<iframe id="upload_iframe" name="upload_iframe" onLoad="uploadDone();"></iframe> 
```

`uploadDone();`当 iframe 的内容已加载时触发该方法。

我如何在 Angular 中做同样的事情？我想在 iframe 加载时调用控制器上的一个函数，但`ng-onload`到目前为止我还没有看到。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2014-05-30T06:09:45.230

评论一年前的问题。对于 iframe 超过 1 个的情况，我需要将“onload”事件绑定到。我做了这个方法。

指示

```
APP.directive('iframeOnload', [function(){
return {
    scope: {
        callBack: '&iframeOnload'
    },
    link: function(scope, element, attrs){
        element.on('load', function(){
            return scope.callBack();
        })
    }
}}]) 
```

控制器

```
APP.controller('MyController', ['$scope', function($scope){

    $scope.iframeLoadedCallBack = function(){
        // do stuff
    }
}]); 
```

DOM

```
<div ng-controller="MyController">
    <iframe iframe-onload="iframeLoadedCallBack()" src="..."></iframe>
</div> 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-08T15:12:36.637

尝试将控制器中的函数定义为：

```
window.uploadDone=function(){
  /* have access to $scope here*/
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2019-09-11T21:16:11.067

对于使用 Angular 2+ 的任何人，这很简单：

```
<iframe (load)="uploadDone()"></iframe> 
```

没有全局功能，适用于多个 iframe。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-30T18:12:23.410

对于任何在这里结束的人来说，[ng-onload](https://github.com/mikaturunen/ng-onload)插件是解决这个问题的完美解决方案。它不会污染全局命名空间，并且当您只想调用一个简单的作用域函数时，也不需要您创建一次性指令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-14T21:35:08.560

对于那些动态注入 iframe 的人，您可以执行以下操作

html...

```
<div #iframeContainer></div> 
```

呸...

```
@Component({
  selector: 'app-iframe-onload',
  templateUrl: './iframe-onload.component.html'
})
export class IframeOnload implements AfterViewInit {

@ViewChild('iframeContainer') iframeContainer: ElementRef;

ngAfterViewInit(): void {
  this.injectIframe();
}

private injectIframe(): void {
  const container = this.iframeContainer.nativeElement;
  const iframe = document.createElement('iframe');
  iframe.setAttribute('width', '100%');
  iframe.setAttribute('src', 'https://example.com/');
  iframe.setAttribute('height', 'auto');
  iframe.setAttribute('frameBorder', '0');
  iframe.addEventListener('load', this.iframeOnLoadtwo);
  container.appendChild(iframe);

}

public iframeOnLoadtwo(): void {
  console.log('iframe loaded...');
}

} 
```

# java - 当索引是变量时，Struts2访问列表的特定索引

> ID：15882328
> 
> 赞同：3
> 
> 时间：2013-04-08T14:53:48.220
> 
> 标签：java, jsp, struts2, ognl

当索引是变量时，我在访问列表的特定元素时遇到了一些问题。

当索引只是一个数字时，我完全没有问题显示我正在寻找的内容。

```
<s:property value="#session.userList[1].email" /> 
```

这完美地工作，并显示在 UserList 的该元素中找到的电子邮件

但是，当我将索引更改为变量时，我很难找到编写 ognl 语句的正确方法。我已经尝试了所有我能想到的 %# 组合，但都没有运气。

```
<s:set var="userIndex" >${param.index}</s:set>
<s:property value="#session.userList[#userIndex].email" /> 
```

我应该如何格式化我的 ognl 语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T16:02:50.847

您应该像本例中那样对其进行格式化：

```
<s:set var="userIndex" value="%{@java.lang.Integer@valueOf(#parameters.index)}" />
<s:property value="%{#session.userList[#userIndex].email}" /> 
```

如果您正在使用 struts 标签，最好使用 OGNL 来评估表达式而不是 EL。强制 OGNL 评估整个表达式而不是部分。

需要将变量的值转换为整数类型。用于名称的字符串类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-22T07:57:46.163

你也可以使用

```
<s:set var="index" value="%{@java.lang.Integer@valueOf(#row.index)}" /> 
```

这是为索引设置一个整数值

然后您可以访问列表的特定值

```
<s:property value="%{yourListObject.get(#index).yourField}" /> 
```

# sql - 如何不从不喜欢的条件中排除 null？

> ID：15882329
> 
> 赞同：5
> 
> 时间：2013-04-08T14:53:53.070
> 
> 标签：sql, oracle, oracle10g

如果我在 where 子句中包含条件，则在查询的 where 子句中，例如

```
where 
      T2.Comments not like '%ABC%' 
  and T2.Comments not like '%xyz%' 
```

它还过滤掉空白/空注释。我不希望它过滤掉空值或空白。

什么是另一种过滤掉的方法，例如。`ABC`并且`xyz`也不排除空值/空白？

其余的原因..（添加底部两个条件后，我没有得到任何空值。

```
Where
    T1.OUT_NO = T2.OUT_NO 
AND T3.OUT_NO = T1.OUT_NO 
AND CAUSE_CAP.CAUSE_NO NOT IN (1,3,5,7,9) 
AND ("T1"."TIME_STAMP">=TO_DATE ('01-04-2013 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND "T1"."TIME_STAMP"<TO_DATE ('06-04-2013 23:59:59', 'DD-MM-YYYY HH24:MI:SS')) 
AND NOT (CAUSE_CAP.CAUSE_NO = 13 AND START_TABLE.TABLE_NO = 83)
AND T2.Comments not like '%ABC%'
AND T2.Comments not like '%XYZ%' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T14:55:58.753

只需添加`NULL`为特定案例。[编辑以显示如何将这种方法推广到 OP 更复杂的查询]

```
Where
    T1.OUT_NO = T2.OUT_NO 
AND T3.OUT_NO = T1.OUT_NO 
AND CAUSE_CAP.CAUSE_NO NOT IN (1,3,5,7,9) 
AND ("T1"."TIME_STAMP">=TO_DATE ('01-04-2013 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND "T1"."TIME_STAMP"<TO_DATE ('06-04-2013 23:59:59', 'DD-MM-YYYY HH24:MI:SS')) 
AND NOT (CAUSE_CAP.CAUSE_NO = 13 AND START_TABLE.TABLE_NO = 83)
AND (T2.Comments IS NULL OR 
        (T2.Comments not like '%ABC%'
         AND T2.Comments not like '%XYZ%')
    ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T14:55:55.800

当您有条件时`(column LIKE 'somecode')`，所有`NULL`值都会从结果中排除。只有不为空的行才能导致条件为真。所以，我想你想要：

```
where  
      (   (   T2.Comments not like '%ABC%' 
          and T2.Comments not like '%xyz%'
          )
      or  T2.Comments IS NULL 
      ) 
```

`AND`具有更高的优先级，`OR`因此不需要内括号，只是为了清楚起见（如@horse_with_no_name 的评论）。如果您只有此条件，则也不需要外部的。

在其他 DBMS 中，您也需要`or T2.Comments = ''`但在 Oracle 中不需要，因为`NULL`空字符串对于 char 列是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-08T16:45:32.257

您也可以尝试使用案例陈述，它易于阅读，并为您提供了很大的灵活性来添加其他条件。

```
AND CASE WHEN t2.Comments IS NULL THEN 1
         WHEN T2.Comments like '%ABC%' THEN 0
         WHEN T2.Comments like '%xyz%' THEN 0
         ELSE 1 
         END = 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-02-28T10:57:00.900

将其放入“并非全部”语句中可以明确意图并缩短代码以获得更好的概述。

```
 and (T2.Comments not like all ('%ABC%','%xyz%') or T2.Comments is null) 
```

# java - Java 中 OutputStreamWriter 中的字符串对象与字符串文字

> ID：15882331
> 
> 赞同：0
> 
> 时间：2013-04-08T14:53:55.123
> 
> 标签：java, json, httpurlconnection

我正在向发送 JSON 字符串的 HTTP 服务器发出请求。我使用 Gson 序列化和反序列化 JSON 对象。今天我观察到这种非常奇怪的行为，我不明白。

我有：

```
String jsonAsString = gson.toJson(jsonAsObject).replace("\"", "\\\"");
System.out.println(jsonAsString); 
```

这正是输出：

```
{\"content\":\"Literal\",\"pos\":{\"left\":20,\"top\":20}} 
```

现在我正在使用`OutputStreamWriter`从获取`HttpURLConnection`到的 HTTP、PUT 请求和 JSON 有效负载。上述请求工作正常：

```
os.write("{\"content\":\"Literal\",\"pos\":{\"left\":20,\"top\":20}}"); 
```

然而，当我说：

```
os.write(jsonAsString); 
```

...请求不起作用（此服务器不返回任何错误，但我可以看到，当将 JSON 编写为字符串对象时，它没有做它应该做的事情）。在字符串对象上使用字符串文字时是否有区别。难道我做错了什么？

这是片段：

```
public static void EditWidget(SurfaceWidget sw, String widgetId) {
        Gson gson = new Gson();
        String jsonWidget = gson.toJson(sw).replace("\"", "\\\"");

        System.out.println(jsonWidget);

        try {
            HttpURLConnection hurl = getConnectionObject("PUT", "http://fltspc.itu.dk/widget/5162b1a0f835c1585e00009e/");
            hurl.connect();
            OutputStreamWriter os = new OutputStreamWriter(hurl.getOutputStream());
            //os.write("{\"content\":\"Literal\",\"pos\":{\"left\":20,\"top\":20}}");
            os.write(jsonWidget);
            os.flush();
            os.close();
            System.out.println(hurl.getResponseCode());
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:59:05.693

删除`.replace("\"", "\\\"")`指令。这是不必要的。

当您发送 JSON 字符串*文字*时，您必须在双引号之前添加斜杠，因为在 Java 字符串*文字*中，必须转义双引号（否则，它们将标记字符串的结尾而不是字符串中的双引号） .

但是字节码中的实际字符串不包含这些反斜杠。它们仅在源代码中使用。

# python - Redis 的“操作不允许”

> ID：15882336
> 
> 赞同：3
> 
> 时间：2013-04-08T14:54:08.703
> 
> 标签：python, macos, redis

我正在一个已经安装了 redis 的 mac 上开发。默认情况下它没有，`redis.conf`所以当我使用默认设置时`$ redis-server`

```
# Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf' 
```

我正在尝试使用`redis-py`并拥有以下内容

```
import redis
r = redis.Redis('localhost')
r.set('foo','bar')
r.get('foo') 
```

但出现以下错误

```
redis.exceptions.ResponseError: operation not permitted 
```

我也在终端中尝试过`$ redis-cli ping`，但随后出现以下错误

```
(error) ERR operation not permitted 
```

我想既然没有`redis.conf`默认设置就没有密码吧？无论如何，我也尝试创建一个`redis.conf`

```
$ echo "requirepass foobared" >> redis.conf
$ redis-server redis.conf 
```

然后在另一个窗口

```
$ redis-cli
$ redis 127.0.0.1:6379> AUTH foobared
(error) ERR invalid password 
```

还将python脚本的第二行修改为

```
r = redis.StrictRedis(host='localhost', port=6379, db=0, password='foobared') 
```

但后来我得到了

```
redis.exceptions.ResponseError: invalid password 
```

我能做错什么？？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T20:04:46.597

没有任何 redis.conf 文件，Redis 使用默认的内置配置。所以默认数据库文件（dump.rdb）和 Append Only File 是在服务器目录中创建的。也许运行 Redis 的用户对此目录没有写权限。

所以要么你给他权限，要么你使用配置文件定义另一个工作目录。

您将在[此处](https://raw.github.com/antirez/redis/2.6/redis.conf)找到 redis 2.6 的默认配置文件 您必须在文件中修改此行：

```
# The working directory.
dir ./ 
```

# javascript - How can I trigger a get from javascript

> ID：15882341
> 
> 赞同：-1
> 
> 时间：2013-04-08T14:54:14.713
> 
> 标签：javascript, jquery

Sorry about the relatively vague title, I can't think of anything better.

Anyway, so I have a page that shows a camera feed and I want to control pan/tilt. I've a python cgi that controls the actual nuts and bolts of that and spits out the html, the image being updated by javascript, and is looking for ?action=(left|right|up|down). I'm trapping key presses for that bit, but I can't figure out how to trigger a GET to the cgi without reloading the whole page. Is there any way I can do this or will I just have to reload the page?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:58:04.570

使用[ajax 获取](http://api.jquery.com/jQuery.get/)..

尝试这个

```
 $.get('path/to/cgi',{data:"test"},function(data){
    alert("done");
 }) 
```

第一个选项是 url..您需要将数据发送到的路径。
第二个参数（可选）是您需要发送到 cgi 的数据对象，
第三个（可选）是成功回调函数，当您从 cgi 成功获得响应时调用该函数

您可以通过 GET 方法获取 cgi 中的数据

# playframework - Updating ManyToMany Checkboxes PlayFramework 2

> ID：15882347
> 
> 赞同：0
> 
> 时间：2013-04-08T14:54:30.810
> 
> 标签：playframework, many-to-many, playframework-2.0, playframework-2.1, deadbolt

I have some troubles to update Many-To-Many Relationship with checkboxes in Play Framework 2.1.0

### Account Model:

```
@ManyToMany(fetch = FetchType.EAGER)
@JoinTable(name = "account_security_role", joinColumns = { @JoinColumn(name = "account_id", referencedColumnName = "id") }, inverseJoinColumns = { @JoinColumn(name = "security_role_id", referencedColumnName = "id") })
public List<SecurityRole> roles; 
```

I want to update account roles in account edit view

### Edit Account View:

```
@for(role <- SecurityRole.find.all()) {
   <div class="control-group">
      <label class="control-label"> @role.description </label>
      <div class="controls">
         <div class="text-toggle-button">
            <input type="checkbox" name="roles[@role.id].id" value="@role.id" class="toggle"
            @if(loggedAccount.hasHole(role.id)) {
               CHECKED
            } />
         </div>
      </div>
   </div>
} 
```

So, when I call Update `POST` method I get this error:

> **InvalidPropertyException**: Invalid property `roles[3]` of bean class [`models.Account`]: Illegal attempt to get property `roles` threw exception; nested exception is `org.springframework.beans.NullValueInNestedPathException`: Invalid property `roles` of bean class [`models.Account`]: Could not instantiate property type [`be.objectify.deadbolt.core.models.Role`] to auto-grow nested property path: `java.lang.InstantiationException`: `be.objectify.deadbolt.core.models.Role`

Is there some example to update a model using checkbox and Many-To-Many relationship?

Thanks a lot. Lew

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:47:01.473

谢谢阿尔班，我发现了错误。

模型中的属性名称有一个约定，因此当我将名称从**角色**更改为**securityRoles**时，它工作正常并找到了正确的模型类进行实例化。

### 账户模式：

```
@ManyToMany(fetch = FetchType.EAGER)
@JoinTable(name = "account_security_role", joinColumns = { @JoinColumn(name = "account_id", referencedColumnName = "id") }, inverseJoinColumns = { @JoinColumn(name = "security_role_id", referencedColumnName = "id") })
public List<SecurityRole> securityRoles; 
```

### 编辑帐户视图：

```
@for(role <- SecurityRole.find.all()) {
   <div class="control-group">
      <label class="control-label"> @role.description </label>
      <div class="controls">
         <div class="text-toggle-button">
            <input type="checkbox" name="securityRoles[@role.id].id" value="@role.id" class="toggle"
            @if(loggedAccount.hasHole(role.id)) {
               CHECKED
            } />
         </div>
      </div>
   </div>
} 
```

# hadoop - s3distcp fails on CDH 4.2

> ID：15882354
> 
> 赞同：4
> 
> 时间：2013-04-08T14:54:54.747
> 
> 标签：hadoop, amazon-s3, hdfs, cloudera, emr

I am trying to run s3distcp as to merge a lot of small (200-600KB) files from S3 to HDFS.

I am running Hadoop on CDH 4.2 over Ubuntu.

To be specific: Hadoop 2.0.0-cdh4.2.0 Subversion file:///var/lib/jenkins/workspace/generic-package-ubuntu64-12-04/CDH4.2.0-Packaging-Hadoop-2013-02-15_10-38-54/hadoop-2.0.0+922-1.cdh4.2.0.p0.12~precise/src/hadoop-common-project/hadoop-common -r 8bce4bd28a464e0a92950c50ba01a9deb1d85686

I have previously solved all dependencies to aws-java-sdk-1.4.1.jar and s3distcp.jar, by copying them into the Hadoop classpath. Libsnappy1 is also installed.

But when I run:

```
hdfs@test-cdh-03-master:/home/ubuntu$ hadoop jar /usr/lib/hadoop/lib/s3distcp.jar --src 's3n://workdir-XXXX-YYYYlogs/production-YYYYYlogs/Log-FFFFFFF-click/'  --dest 'hdfs:///test/'  --groupBy 'Log-FFFFF(.*)' 
```

I get the following error stack:

```
13/04/08 14:36:30 INFO s3distcp.S3DistCp: Using output path 'hdfs:/tmp/ab7c0a09-07ba-4592-b354-bcd0dd3d6a07/output'
13/04/08 14:36:36 INFO s3distcp.S3DistCp: Created 0 files to copy 0 files
13/04/08 14:36:36 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/04/08 14:36:37 INFO mapred.JobClient: Cleaning up the staging area hdfs://test-cdh-03-master.extc.test-cdh-03.adswizz.com/tmp/hadoop-temp/mapred/staging/hdfs/.staging/job_201304041515_0016
13/04/08 14:36:37 ERROR security.UserGroupInformation: PriviledgedActionException as:hdfs (auth:SIMPLE) cause:org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: hdfs:/tmp/ab7c0a09-07ba-4592-b354-bcd0dd3d6a07/files
13/04/08 14:36:37 INFO s3distcp.S3DistCp: Try to recursively delete hdfs:/tmp/ab7c0a09-07ba-4592-b354-bcd0dd3d6a07/tempspace
Exception in thread "main" java.lang.RuntimeException: Error running job
    at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.run(S3DistCp.java:586)
    at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.run(S3DistCp.java:216)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)
    at com.amazon.external.elasticmapreduce.s3distcp.Main.main(Main.java:12)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
Caused by: org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: hdfs:/tmp/ab7c0a09-07ba-4592-b354-bcd0dd3d6a07/files
    at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:194)
    at org.apache.hadoop.mapred.SequenceFileInputFormat.listStatus(SequenceFileInputFormat.java:40)
    at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:205)
    at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:1091)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:1083)
    at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:993)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:946)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at     org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1408)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:946)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:920)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1369)
    at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.run(S3DistCp.java:568)
    ... 9 more 
```

Is there something else I should try? Is there a problem I cannot see with the regex?

# postgresql - 是否可以在两台 Windows 计算机之间建立 SSH 隧道？（没有第三方网络服务器）

> ID：15882359
> 
> 赞同：3
> 
> 时间：2013-04-08T14:55:01.333
> 
> 标签：postgresql, ssh, putty

该问题的目的是在两个[PostgreSQL](http://en.wikipedia.org/wiki/PostgreSQL)数据库之间创建远程连接。我目前使用[Navicat](https://en.wikipedia.org/wiki/Navicat)。我已经阅读了**很多**关于使用[PuTTY](http://en.wikipedia.org/wiki/PuTTY)和[Cygwin](http://en.wikipedia.org/wiki/Cygwin)创建 SSH 服务器的教程，但它只适用于本地测试，当我尝试在另一台计算机上使用公共 IP 地址时它不起作用。

为了防止这成为私人/特殊问题，我将坚持如何在两台 Windows 计算机之间获得没有 Web 服务器的 SSH 隧道。对于 Windows 用户来说，这确实是一个普遍的问题。我在公司的六台不同的计算机和家里的两台计算机上都试过，而且一直都是相同的答案。根据我在论坛和 Stack Overflow 上所做的研究，这是一个常见问题。我附上了两张图片，显示 SSH 服务器在本地运行流畅，但是当您使用[ISP](http://en.wikipedia.org/wiki/Internet_service_provider)分配的 IP 地址时，它会失败。

我开始认为在 Windows 环境中执行此操作是一个坏主意.. ps。1-当您安装 bitvise 时，它​​会自动“打开”端口 22，所以我认为这不是端口问题。2- 我公司的互联网提供商和家庭的不同，所以我认为这也不是 ISP 的问题。我不知道还能有什么...

[http://matheus25.site90.net/itworks.jpg](http://matheus25.site90.net/itworks.jpg)

[http://matheus25.site90.net/itdoesntwork.jpg](http://matheus25.site90.net/itdoesntwork.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:08:53.950

是的，这是可能的，但您需要做什么将取决于您拥有的设置。Web 服务器不应该是必需的或相关的。我不清楚你到底想要什么连接，但总的来说你需要三件事：

1.  每台需要登录远程数据库的机器上的 SSH*客户端*
2.  每台需要接受远程登录的机器上的 SSH*服务器*
3.  通过介于两者之间的任何防火墙等从一个连接到另一个的能力

第 1 项很简单：您可以安装 PuTTY，使用其图形应用程序进行测试，并使用命令行`plink`进行自动连接。Navicat 也可以自己充当 SSH 客户端，通过 SSH 登录并自动配置隧道，但我没有使用该工具的经验。不过，PuTTY 肯定对初始测试很有用。

第 2 项可能有点棘手：您需要安装 SSH 服务器并配置适当的登录名。

第 3 项可能是也可能不是问题：客户端和服务器旁边可能有一个防火墙，它可以限制构成 SSH 连接的流量（通常在端口 22 上），或者它可能已经打开并准备好使用。测试这一点的一种方法是`telnet address.of.remote.machine 22`从另一个位置运行。如果连接失败，则说明该端口上的连接被阻塞；在这种情况下，您可能需要与服务器的主机交谈，询问他们是否可以打开该端口。

一旦您完成所有工作以便您可以使用 PuTTY 手动登录，您需要*在客户端*配置您的 SSH 隧道。这些基本上通过使客户端上的本地网络端口（例如，端口 5433）通过 SSH 连接连接到服务器上的不同端口（对于标准 Postgres 安装，端口 5432）来工作。

所以当你告诉 Navicat 连接到“localhost:5433”时，连接是“隧道”的，实际上是从其他服务器上的端口 5432 向你提供数据。你*不会*告诉 Navicat 它正在连接到远程机器的公共地址，因为它只会通过公共互联网，而不是 SSH 隧道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:12:24.087

如果您尝试重新发明[**数据库复制**](http://www.postgresql.org/docs/current/interactive/different-replication-solutions.html)，请考虑一种生产就绪的解决方案。

* * *

如果您只想在数据库之间复制选定的数据，您可以使用附加模块[**dblink**](http://www.postgresql.org/docs/current/interactive/dblink.html)将数据*直接*从 DB 复制到 DB，可选择**使用 SSL 加密**。服务器可以位于网络中的*任何位置*。

从另一个数据库（网络中的任何地方）获取数据的基本示例如下所示：

```
CREATE TABLE tbl (tbl_id integer, col1 text, col2 text);

SELECT dblink_connect('myserver');
-- FDW postgresql, USER MAPPING FOR postgres; PW from .pgpass

INSERT INTO tbl (tbl_id, col1, col2)  -- same table exists on foreign server
SELECT *
FROM   dblink('SELECT tbl_id, col1, col2 FROM tbl') AS b(
        tbl_id integer
       ,col1 text
       ,col2 text);

SELECT dblink_disconnect(); 
```

您可以轻松地将其封装在一个函数中：

```
CREATE OR REPLACE FUNCTION foo()
  RETURNS text AS
$func$
 -- code from above goes here
$func$  LANGUAGE sql; 
```

称呼：

```
SELECT foo(); 
```

我在[`FOREIGN SERVER`](http://www.postgresql.org/docs/current/interactive/sql-createserver.html)这里使用。要创建的基本示例语句：

[FDW](http://www.postgresql.org/docs/current/interactive/sql-createforeigndatawrapper.html)（仅当您还没有它时）：

```
CREATE FOREIGN DATA WRAPPER postgresql VALIDATOR postgresql_fdw_validator; 
```

[国外服务器](http://www.postgresql.org/docs/current/interactive/sql-createserver.html)：

```
CREATE SERVER myserver
FOREIGN DATA WRAPPER postgresql
OPTIONS (hostaddr '1.2.3.4', port '5432', dbname 'mydb', **sslmode 'require'**);
```

通过添加`sslmode 'require'`到您的连接字符串，您只强制执行 SSL 加密连接。[在此处阅读手册中的更多信息。](http://www.postgresql.org/docs/current/interactive/libpq-connect.html)

[用户映射](http://www.postgresql.org/docs/current/interactive/sql-createusermapping.html)：

```
CREATE USER MAPPING FOR postgres
SERVER myserver OPTIONS (user 'postgres'); 
```

为了简化事情并使其安全，我使用该[**`.pgpass`**文件](http://www.postgresql.org/docs/current/interactive/libpq-pgpass.html)来提供密码。在使用任何这些之前，您可能需要*阅读*一些文档。

# javascript - Ext.getCmp(..) is null o not an object error in ext-all.js

> ID：15882362
> 
> 赞同：0
> 
> 时间：2013-04-08T14:55:02.017
> 
> 标签：javascript, internet-explorer, extjs

I have a problem with my app. I have no errors in my code but sometimes I get an error from the extjs library file (ext-all.js) and if I refresh the page it works. The error is shown in IE:

> Ext.getCmp(..) is null o not an object / extjs-all.js line 21 char 67494

My Ajax request

```
Ext.Ajax.request({
url: 'script/request.php?operazione=isadmin',
success: function(response){
    var role = response.responseText;
    switch(role){
        case 'admin':
            Ext.getCmp('gestioneUtenti').show();
            Ext.getCmp('ricercaTarga').show();
            break;
        case 'targhe&offerte':
            Ext.getCmp('ricercaTarga').show();
            break;
        case 'targhe':
            Ext.getCmp('ricercaTarga').show();
            break;
    }
}
}); 
```

My code:

```
// Definisco viewport
Ext.define('Pollini.view.mainView', {
    extend: 'Ext.container.Viewport',

    layout: {
        pack: 'end',
        type: 'hbox',
        align: 'top'
    },

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'button',
                    text: 'Ricerca targa',
                    id: 'ricercaTarga',
                    width: 155,
                    border: 0,
                    height: 155,
                    margins: 20,
                    handler: function(){
                        window.location = "search.php";
                    },
                    hidden: true,
                    iconCls: 'targaBtn'
                },
                /*{
                    xtype: 'button',
                    text: 'Offerte',
                    id: 'offerte',
                    width: 155,
                    height: 155,
                    margins: 20,
                    handler: function(){
                        window.location = "offerte.php";
                    },
                    hidden: true,
                    iconCls: 'offerteBtn'
                },*/
                {
                    xtype: 'button',
                    text: 'Gestione utenti',
                    id: 'gestioneUtenti',
                    width: 155,
                    height: 155,
                    margins: 20,
                    handler: function(){
                        window.location = "users.php";
                    },
                    hidden: true,
                    iconCls: 'utentiBtn'
                },
                {
                    xtype: 'button',
                    text: 'Logout',
                    width: 155,
                    height: 155,
                    margins: 20,
                    handler: function(){
                        Ext.Ajax.request({
                            url: 'script/request.php?operazione=logout',
                            success: function(){
                                window.location = "index.php";
                            }
                        });
                    },
                    iconCls: 'logoutBtn'
                }
            ]
        });
        this.callParent(arguments);
    }
});

Ext.create('Pollini.view.mainView'); 
```

# html - How to read HttpRequest data sent from client, on server

> ID：15882366
> 
> 赞同：6
> 
> 时间：2013-04-08T14:55:25.563
> 
> 标签：html, dart

How do i read HttpRequest data sent by POST method from client, on the server, in Dart?

I send a message from the client like this:

```
HttpRequest request = new HttpRequest();
var url = "http://127.0.0.1:8081";
request.open("POST", url, async: false);

String data = 'hello from client'; 
request.send(data); 
```

On server i am catching the request like this:

```
HttpServer.bind('127.0.0.1', 8081).then((server) {
server.listen((HttpRequest request) {

//DATA SHOULD BE READ HERE 

});
}); 
```

But i cant figure out how to actually read the data... There is not data property in HttpRequest nor anything else...

EDIT This is how i get the answer now:

```
HttpServer.bind('127.0.0.1', 8081).then((server) {
server.listen((HttpRequest request) {
  //DATA SHOULD BE READ HERE 
  print("got it");
  print(request.method);
  if(request.method == "POST") {
    print("got it 2");
    List<int> dataBody = new List<int>();
    request.listen(dataBody.addAll, onDone: () {
      var postData = new String.fromCharCodes(dataBody);
      print(postData);
      });
    }
 });
}); 
```

But for some reason the request.method is not "POST" but "OPTIONS", and if i change to `if(request.method == "OPTIONS")` , then print(postData) will still return nothing...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:21:45.490

现在，POST 数据的处理有点困难。但本质上 HttpRequest 本身必须被“倾听”。[HttpRequest 本身就是一个流](http://api.dartlang.org/docs/releases/latest/dart_io/HttpRequest.html)。特别是它是一个`Stream<List<int>>`. 所以基本上你的数据可以作为多个传递给你的 HttpRequest `List<int>`。所以我们需要重建数据，然后将其转换为字符串（假设您期望的是字符串，而不是二进制数据等）。这或多或少是我所做的：

```
HttpServer.bind('127.0.0.1', 8081).then((server) {
  server.listen((HttpRequest request) {
  if(request.method == "POST") {
    List<int> dataBody = new List<int>();
    request.listen(dataBody.addAll, onDone: () {
      var postData = new String.fromCharCodes(dataBody);
      // Do something with the data now.
    });
  }
  request.response.close();
}); 
```

请注意，每次数据发送到服务器时，`request.listen(dataBody.AddAll, ...)`基本上都会调用[List.addAll()](http://api.dartlang.org/docs/releases/latest/dart_core/List.html#addAll)（在较大数据或多部分表单的情况下，它可能不会一次全部发送）。这可以确保我们将其全部缓冲，直到流指示它“完成”在这种情况下，我们现在可以对收到的数据做一些事情，比如将其转换为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:53:18.740

您可以使用 StringDecoder 将 HttpRequest 中的“List of Int”转换为“String”。由于无论你发送 json、纯文本还是 png，Dart 总是以“Int 列表”的形式向服务器发送数据。另一种方法是使用 Streams ( [http://www.dartlang.org/articles/ feet-wet-streams/](http://www.dartlang.org/articles/feet-wet-streams/) ) 在 Heroku Steam v0.6.2 Dart Editor 0.4.3_r20602 Dat SDK 0.4.3.5_r26062 上测试

例如，

客户端：

```
 import 'dart:html';
 import 'dart:json' as Json;
 import 'dart:async';
 import 'dart:uri';
 final String data = 'Hello World!';
 void _sendPNG(String pngData) {
 HttpRequest request = new HttpRequest(); // create a new XHR
 // add an event handler that is called when the request finishes
 request.onReadyStateChange.listen((_) 
 {
 if (request.readyState == HttpRequest.DONE &&
 (request.status == 200 || request.status == 0)) {
 // data saved OK.
 print(request.responseText); // output the response from the server
 }
                  }
 );
 // POST the data to the server Async
 print('Sending Photos to the server...');
 var url = "/png";
 request.open("POST", url);
 request.setRequestHeader("Content-Type", "text/plain");
 request.send(data);
 } 
```

服务器：

```
 import 'dart:io';
 import 'dart:async';
 import 'dart:json' as Json;
 import "package:stream/stream.dart";
 import 'package:xml/xml.dart' as xml;
 import 'package:unittest/unittest.dart';
 import 'package:rikulo_commons/mirrors.dart';
 void receivePNG(HttpConnect connect){
 var request = connect.request;
 var response = connect.response;
 if(request.uri.path == '/png' && request.method == 'POST')
  {
   String png='';
   response.write('The server received png request!');
   //read incoming List<int> data from request and use StringDecoder to transform   incoming data to string
   var stream = request.transform(new StringDecoder());
   stream.listen((value){
   print(value);
   //Hello World!
  }
  else
  {
   response.write('error');
   response.statusCode = HttpStatus.NOT_FOUND;
   connect.close();
   }
  } 
```

配置.dart

```
 var _mapping = {
  "/": home,
  "/png": receivePNG,
 }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-14T14:53:38.087

我在客户端/端代码中找到了这个有用的示例

[GitHub json 发送到服务器示例](https://github.com/dart-lang/dart-up-and-running-book/blob/master/code/ch03/ch03_3_html/web/json-send-to-server.dart)

```
// XXX: Dart Editor thinks this is OK, but I haven't run it.

import 'dart:html';

String encodeMap(Map data) {
  return data.keys.map((k) {
    return '${Uri.encodeComponent(k)}=${Uri.encodeComponent(data[k])}';
  }).join('&');
}

loadEnd(HttpRequest request) {
  if (request.status != 200) {
    print('Uh oh, there was an error of ${request.status}');
    return;
  } else {
    print('Data has been posted');
  }
}

main() {
  var dataUrl = '/registrations/create';
  var data = {'dart': 'fun', 'editor': 'productive'};
  var encodedData = encodeMap(data);

  var httpRequest = new HttpRequest();
  httpRequest.open('POST', dataUrl);
  httpRequest.setRequestHeader('Content-type', 
                               'application/x-www-form-urlencoded');
  httpRequest.onLoadEnd.listen((e) => loadEnd(httpRequest));
  httpRequest.send(encodedData);
} 
```

# java - GPS coordinates to pixel

> ID：15882368
> 
> 赞同：1
> 
> 时间：2013-04-08T14:55:30.470
> 
> 标签：java, gps

I need to create image (polygon) from GPS coordinates. I have coordinates like this:

> (49.274633220,17.160206083),(49.276968797,17.162732143),(49.278188519,17.162391767),(49.279761626,17.161087954), ......

And I need to transform them to XY pixel points. Each pair of coordinates are vertex of created polygon.

File with all coordinates:

## [GPS.txt](http://jirka.webarchitects.cz/GPS.txt)

and how the created polygon should look like: ![http://jirka.webarchitects.cz/polygon.png](https://i.stack.imgur.com/CD8Pn.png)

Any idea how can I transform the coordinates? Thanks for all reply.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:18:09.527

在所有情况下，您都需要一个坐标转换形式 lat,lon（球形）到笛卡尔（x,y）坐标。如果多边形不大于 100 公里，您可以使用简单的 Cyclindrical Equidistant Projection。否则，您可以使用墨卡托投影。（谷歌地图也使用它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:47:40.230

你确定任务说要创建一个图形吗？还是只是读取文本文件并提取坐标对？因为您无法在不定义转换的情况下创建图形。我会首先找到最大和最小纬度和经度值（确定哪个是哪个！）。然后只需对经度使用线性比例，以便您的最小经度`px=0`和最大经度达到您希望图像的宽度。然后对纬度做同样的事情——它看起来会变形，但至少你会看到一些开始的东西。

顺便说一句，您粘贴的图形似乎与您提供的坐标不对应。如果它有帮助，你的看起来更像[这个红色区域](http://en.wikipedia.org/wiki/File%3aOlomoucky_kraj.svg)。

# c# - ControllerContext.HttpContext 初始化单元测试

> ID：15882372
> 
> 赞同：1
> 
> 时间：2013-04-08T14:55:50.130
> 
> 标签：c#, asp.net-mvc-3, unit-testing, controller

在为控制器编写单元测试的过程中，我需要设置或初始化 -

```
ControllerContext.HttpContext.Request.QueryString 
```

设置它的最简单方法是什么，以便我实际上可以通过`ControllerContext.HttpContext.Request.QueryString`- 并测试控制器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:58:03.817

您可以使用模拟框架来模拟控制器正在使用的 HttpContext。

例如[`NSubstitute`](http://nsubstitute.github.io/)：

```
// arrange
var contextMock = Substitute.For<HttpContextBase>();
var requestMock = Substitute.For<HttpRequestBase>();
var queryString = new NameValueCollection();
queryString["foo"] = "bar";
requestMock.QueryString.Returns(queryString);
contextMock.Request.Returns(requestMock);
var sut = new SomeController();
sut.ControllerContext = new ControllerContext(contextMock, new RouteData(), sut);

// act
var actual = sut.SomeAction(); 

// assert
... 
```

当然，您可以使用您喜欢的任何其他模拟框架，例如 Moq 或 Rhino Mocks 来模拟 HttpContext。

顺便说一句，如果您使用视图模型（您应该始终在正确设计的 ASP.NET MVC 应用程序中这样做），您甚至不会关心 Request.QueryString 因为您的控制器操作现在将视图模型作为参数：

```
public ActionResult SomeAction(MyViewModel model)
{
    ...
} 
```

并且默认模型绑定器会考虑到请求参数与模型的绑定。您应该避免在控制器操作中编写管道代码，从查询字符串和内容中提取一些数据。

看看您的单元测试现在变得更具可读性：

```
var model = new MyViewModel();
model.Foo = "bar";
var sut = new SomeController();

// act
var actual = sut.SomeAction(model); 

// assert
... 
```

看？您不再需要关心管道代码。

# ajax - Sencha touch2: make Ajax post request for Json data

> ID：15882386
> 
> 赞同：0
> 
> 时间：2013-04-08T14:56:21.607
> 
> 标签：ajax, extjs, extjs4, sencha-touch, sencha-touch-2

hi am new to Sencha touch2, am facing problem while fetching data from a remote url. When i use the url in simple rest client am able get data and with status: 200 ok. Here is input of simple rest client for your reference.

```
---------------
url: http://190.40.2.14:9030/work
Method: post
Headers:Accept: application/json
Data:<workTO><platform>ALL</platform></workTO>
--------------- 
```

how can i use post request, headers and data how can i do this in Sencha touch2.

here is the model with proxy:

```
Ext.define('TestApp.model.myModel', {
    extend: 'Ext.data.Model',
    xtype:'modelList',
    config: {
               fields:['work'],

            proxy:{
             type:'rest',
//                url:'http://localhost:9090/TestApp/app/store/sample.json',// this works
               url:'http://10.30.2.141:9030/work',

              reader:
              {
                 type:'json'
              }
            }
         }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:10:10.743

```
Ext.define('TestApp.model.ModelList', {
    extend: 'Ext.data.Model',
    xtype:'modelList',
    config: {
            fields:['task'],
            proxy:{
                  type: 'ajax',
                  url:'http://localhost:9090/TestApp/app/store/sample.json',
                  callbackKey: 'theCallbackFunction'
            },    
            reader: 'json'
    }
}); 
```

你的 json 应该有相对路径，而不是绝对的 ajax 工作，跨域可以通过 JSONP 实现，但你需要设置带有回调功能的 api，否则它不会工作

# c# - 当有两种同名类型时如何在监视窗口中消除类型的歧义

> ID：15882391
> 
> 赞同：15
> 
> 时间：2013-04-08T14:56:34.417
> 
> 标签：c#, visual-studio-2010

在监视窗口中，我试图查看`TaskScheduler.Current`，但它向我显示以下错误：

```
The type 'System.Threading.Tasks.TaskScheduler' exists in both 
'CommonLanguageRuntimeLibrary' and 'System.Threading.dll' 
```

这对我的程序来说是正确的，因为：

*   这是一个 .NET 4.0 exe，它使用`TaskScheduler`了 mscorlib (CommonLanguageRuntimeLibrary)
*   一个 dll 是通过后期绑定引入的，它引用了一个旧的 Reactive Extensions .NET 3.5 System.Threading.dll，它也具有`TaskScheduler`相同的命名空间。

**问题：**我可以在调试器中使用什么语法来指定`TaskScheduler`我要检查的 dll？

顺便说一句：我认为将这两个同名类型带入同一个可执行文件没有问题（即没有未定义的行为），对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:03:39.127

我不确定这是否可以通过监视窗口工作（但我不明白为什么它不应该，谁知道） - 但是在两个具有相同类型的 dll-s 之间消除歧义的方法是使用`extern alias`.

这与`global::`- 相同，只是在这种情况下您可以使用指定 dll 别名。

> 您可以通过在 dll 引用上自己设置/定义别名来使用它（我认为属性中有别名字段）。

[具有相同命名空间的两个不同的 DLL](https://stackoverflow.com/questions/3672920/two-different-dll-with-same-namespace/3672987#3672987)

我不确定这是否完全适用于您的情况，即您是否能够做到这一点，但您必须在自己的情况下进行尝试。

**编辑：（**基于评论）

鉴于具体情况 - 我在调试器中尝试过。由于另一个是后期绑定 - 编译器不知道它（当然，因为它不起作用）。

因此，在您的源代码中（无论如何您都需要监视的.cs）在顶部添加例如

```
using mysystem = global::System.Threading.Tasks.TaskScheduler; 
```

然后在手表中`mysystem.Current`（我以我的例子为基础）

或者...

```
using mytasks = global::System.Threading.Tasks; 
```

和`mytasks.TaskScheduler`- 真的不重要。

**EDIT2：**
出于历史原因 - 我有点确认代码编辑是不可避免的。

1)`mscorlib`从项目中删除 - 项目、设置、构建、高级。

2）手动卸载和编辑项目配置——添加mscorlib引用（不允许通过VS添加）。WPF 应用程序还需要另一个修复程序（此处超出范围），

3) 为 mscorlib 添加别名 - 您可以添加多个别名，单独使用 w/ `,`，效果很好，

4) 添加`extern alias <your alias>`,

从那时起，您可以在调试器中引用它——但没有办法放弃手册`code editing`。外部别名也是每个“建筑单元”，即文件，所以没有全局。

简而言之，这是我们能做的最好的事情，恕我直言。

* * *

并且来自@JaredPar 对此的确认
[我如何使用程序集名称限定 .NET 类型，以便 Visual Studio 调试器在使用不明确的类型时消除歧义？](https://stackoverflow.com/questions/1571958/how-can-i-qualify-a-net-type-with-assembly-name-for-visual-studio-debugger-to-d/1572988#1572988)

# python - Matplotlib.animation：如何去除白边

> ID：15882395
> 
> 赞同：13
> 
> 时间：2013-04-08T14:56:48.060
> 
> 标签：python, animation, video, matplotlib

我尝试使用 matplotlib 电影编写器生成电影。如果我这样做，我总是会在视频周围出现白边。有谁知道如何删除该边距？

[来自http://matplotlib.org/examples/animation/moviewriter.html](http://matplotlib.org/examples/animation/moviewriter.html)的调整示例

```
# This example uses a MovieWriter directly to grab individual frames and
# write them to a file. This avoids any event loop integration, but has
# the advantage of working with even the Agg backend. This is not recommended
# for use in an interactive setting.
# -*- noplot -*-

import numpy as np
import matplotlib
matplotlib.use("Agg")
import matplotlib.pyplot as plt
import matplotlib.animation as manimation

FFMpegWriter = manimation.writers['ffmpeg']
metadata = dict(title='Movie Test', artist='Matplotlib',
        comment='Movie support!')
writer = FFMpegWriter(fps=15, metadata=metadata, extra_args=['-vcodec', 'libx264'])

fig = plt.figure()
ax = plt.subplot(111)
plt.axis('off')
fig.subplots_adjust(left=None, bottom=None, right=None, wspace=None, hspace=None)
ax.set_frame_on(False)
ax.set_xticks([])
ax.set_yticks([])
plt.axis('off')

with writer.saving(fig, "writer_test.mp4", 100):
    for i in range(100):
        mat = np.random.random((100,100))
        ax.imshow(mat,interpolation='nearest')
        writer.grab_frame() 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T15:52:05.030

`None`作为论据传递给`subplots_adjust`不做你认为它做的事情[(doc)](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.subplots_adjust)。这意味着“使用默认值”。要执行您想要的操作，请改用以下命令：

```
fig.subplots_adjust(left=0, bottom=0, right=1, top=1, wspace=None, hspace=None) 
```

如果您重用您的`ImageAxes`对象，您还可以使您的代码更加高效

```
mat = np.random.random((100,100))
im = ax.imshow(mat,interpolation='nearest')
with writer.saving(fig, "writer_test.mp4", 100):
    for i in range(100):
        mat = np.random.random((100,100))
        im.set_data(mat)
        writer.grab_frame() 
```

默认情况下`imshow`，将纵横比固定为相等，即您的像素是正方形的。您要么需要重新调整图形的大小，使其与图像的纵横比相同：

```
fig.set_size_inches(w, h, forward=True) 
```

或告诉`imshow`使用任意纵横比

```
im = ax.imshow(..., aspect='auto') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-21T22:52:40.317

我整天搜索这个并最终在创建每个图像时使用@matehat 的这个解决方案。

```
import matplotlib.pyplot as plt
import matplotlib.animation as animation 
```

要制作没有框架的图形：

```
fig = plt.figure(frameon=False)
fig.set_size_inches(w,h) 
```

使内容填满整个图形

```
ax = plt.Axes(fig, [0., 0., 1., 1.])
ax.set_axis_off()
fig.add_axes(ax) 
```

绘制第一帧，假设您的电影存储在“imageStack”中：

```
movieImage = ax.imshow(imageStack[0], aspect='auto') 
```

然后我写了一个动画函数：

```
def animate(i):
    movieImage.set_array(imageStack[i])
    return movieImage

anim = animation.FuncAnimation(fig,animate,frames=len(imageStack),interval=100)
anim.save('myMovie.mp4',fps=20,extra_args=['-vcodec','libx264'] 
```

它工作得很好！

这是空白删除解决方案的链接：

[1](https://stackoverflow.com/questions/8218608/scipy-savefig-without-frames-axes-only-content)：[从图像中删除空格](https://stackoverflow.com/questions/8218608/scipy-savefig-without-frames-axes-only-content)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:23:37.953

在最近[的 matplotlib 版本中](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/animation.py)，您似乎可以将参数传递给作者：

```
def grab_frame(self, **savefig_kwargs):
        '''
        Grab the image information from the figure and save as a movie frame.
        All keyword arguments in savefig_kwargs are passed on to the 'savefig'
        command that saves the figure.
        '''
        verbose.report('MovieWriter.grab_frame: Grabbing frame.',
                       level='debug')
        try:
            # Tell the figure to save its data to the sink, using the
            # frame format and dpi.
            self.fig.savefig(self._frame_sink(), format=self.frame_format,
                dpi=self.dpi, **savefig_kwargs)
        except RuntimeError:
            out, err = self._proc.communicate()
            verbose.report('MovieWriter -- Error running proc:\n%s\n%s' % (out,
                err), level='helpful')
            raise 
```

如果是这种情况，您可以将`bbox_inches="tight"`and传递`pad_inches=0`给 grab_frame -> savefig，这应该会删除大部分边框。然而，Ubuntu 上的最新版本仍然有以下代码：

```
def grab_frame(self):
    '''
    Grab the image information from the figure and save as a movie frame.
    '''
    verbose.report('MovieWriter.grab_frame: Grabbing frame.',
                   level='debug')
    try:
        # Tell the figure to save its data to the sink, using the
        # frame format and dpi.
        self.fig.savefig(self._frame_sink(), format=self.frame_format,
            dpi=self.dpi)
    except RuntimeError:
        out, err = self._proc.communicate()
        verbose.report('MovieWriter -- Error running proc:\n%s\n%s' % (out,
            err), level='helpful')
        raise 
```

所以看起来功能正在被添加。抓住这个版本并试一试！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T20:16:12.653

如果您“只是”想保存没有轴注释的矩阵的 matshow/imshow 渲染，那么最新的 scikit-video (skvideo) 开发人员版本也可能是相关的， - 如果您安装了 avconv。分布中的一个示例显示了由 numpy 函数构造的动态图像：[https ://github.com/aizvorski/scikit-video/blob/master/skvideo/examples/test_writer.py](https://github.com/aizvorski/scikit-video/blob/master/skvideo/examples/test_writer.py)

这是我对示例的修改：

```
# Based on https://github.com/aizvorski/scikit-video/blob/master/skvideo/examples/test_writer.py
from __future__ import print_function

from skvideo.io import VideoWriter
import numpy as np

w, h = 640, 480

checkerboard = np.tile(np.kron(np.array([[0, 1], [1, 0]]), np.ones((30, 30))), (30, 30))
checkerboard = checkerboard[:h, :w]

filename = 'checkerboard.mp4'
wr = VideoWriter(filename, frameSize=(w, h), fps=8)

wr.open()
for frame_num in range(300):
    checkerboard = 1 - checkerboard
    image = np.tile(checkerboard[:, :, np.newaxis] * 255, (1, 1, 3))
    wr.write(image)
    print("frame %d" % (frame_num))

wr.release()
print("done") 
```

# database - 我们如何处理 Web 开发中的常量值？

> ID：15882399
> 
> 赞同：1
> 
> 时间：2013-04-08T14:56:54.477
> 
> 标签：database, json, web

当我们开发一个网站时，我们会使用常数值，例如州、市和县，另一个例子是博客的分类。假设所有这些值都是常数，我们不会改变它们。问题是我们如何存储它们？

我曾经将它们存储在数据库表中，现在我想知道是否可以将它们存储在 .json 文件中，这样很容易在首页显示。

谁能给我一个常规的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:05:18.363

Aleks 是对的，通常最好的位置是在数据库中。

如果它们真的永远不会改变，您可以将它们存储为平面文件，但最好将所有内容放在一个地方。

作为说明，我会考虑将数据加载到[单例](http://en.wikipedia.org/wiki/Singleton_pattern)中，这样您就不必总是调用数据库。

常规方式是：

1.  存储在数据库中
2.  每个结构调用一次数据库
3.  在应用程序的内存中保留一次调用的副本
4.  根据需要刷新

# sql - SQL 根据另一个表更新一个 Oracle 表

> ID：15882401
> 
> 赞同：1
> 
> 时间：2013-04-08T14:56:57.640
> 
> 标签：sql, oracle, sql-update

我在 Oracle 数据库中有两个表：`USERS`和`USERLOG`

*   `USERS`包含所有系统用户详细信息（`IDCOL`、、、`EMAIL`等`ISLOCKED`）

*   `USERLOG`是用户何时登录系统的日志（`USERID`, `LOGIN`（日期字段））

关键字段：`USERS.IDCOL`=`USERLOG.USERID`

删除的用户从 USERS 表中删除；因此，将有一些 ID`USERLOG`与表不匹配`USERS`。

我想对用户列表做两件事：

1.  锁定在过去 9 个月内未访问系统的所有用户（即他们的 ID 在过去 9 个月内没有出现`USERLOG`，我猜这将使用类似：

    ```
    months_between( SYSDATE , USERLOG.LOGIN ) <= 9 
    ```

2.  锁定在 中只有一个条目的任何用户，`USERLOG`只要它不在上个月/30 天内（即创建帐户时）

要锁定用户，我需要将`USERS.ISLOCKED`列更新`0`为`1`

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:08:42.870

个月之间（SYSDATE，USERLOG.LOGIN）<= 9

1）在这种情况下， userlog.login 不是来自单行，而是一系列登录中的最大登录时间。有不同的方法可以做到这一点，但我认为下面的查询更清楚地捕获了需求。“过去 9 个月内未登录的所有用户”

```
select *
from   users usr
where  not exists (
    select 1
    from   userlog log
    where  usr.user_id  = log.user_id
      and  log.login    > add_months(sysdate,-9)
) 
```

检查以确保您正在获取您的用户，查找并将此选择转换为删除。

2）这将是满足这两个规则的两个不同条件..

```
select *
from   users
where  not exists (
    select 1
    from   userlog
    where users.userid = userlog.userid
      and userlog.login > add_months(sysdate,-1)
) AND (
     1 = (select count(*)
     from   userlog
     where  users.userid = userlog.userid)
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:36:59.070

无法测试它，但第一个

```
update users a 
set islocked = 1 
where exists (
    select  1
    from    userlog b
    where   a.idcol = b.userid
    group  by b.userid
    having  months_betwen(sysdte , max(userlog)) <= 9) 
```

第二个，如果我没记错的话，你想锁定 30 多天前只有一个入口的用户....如果是这样，那么

```
update users set islocked = 1 
where idcol in (
    select  userid
    from    userlog
    group by userid
    having count(*) = 1
    and count(case when month_between(login , sysdate) < 1 then 1 else null end) = 0) 
```

所以我基本上是在计算上个月和整体的入口。语法可能已关闭，我无法在此处运行示例。

# css - CSS + WinPhone IE: Artifacts when adding background-color to img

> ID：15882402
> 
> 赞同：3
> 
> 时间：2013-04-08T14:56:57.780
> 
> 标签：css, windows-phone-7, internet-explorer-9, background-color

The app I'm developing has many images with transparent areas (so we can make the image 'skinned' by setting the `background-color` CSS property).

This works fine in every browser I've tested, except for windows phone, where we get nasty artifacts around the edge of the image -pixel- thin lines at the top and bottom, and sometimes at the sides, of the image.

I've tried setting `padding`, `margin`, `border` to 0px, but the artifact still remains.

The following question recommends setting `background-repeat: no-repeat`, but that seems only to work for `background-image`, not b`ackground-color`:

[Windows Phone IE mobile bugs with transparent background-image and bottom absolute positionning](https://stackoverflow.com/questions/14232372/windows-phone-ie-mobile-bugs-with-transparent-background-image-and-bottom-absolu)

Does anyone know how to override or disable this border?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T17:21:39.247

这可能是使用 SVG 而不是使用 png 等透明图像的好机会。虽然我倾向于同意 bjb568 的观点，即 Windows Phone 没有被广泛使用，但他们的回答是不具建设性的，对提问者或其他任何查看此问题的人没有帮助。

SVG 可以成为一个非常强大的工具，用于为移动设备和桌面开发具有零伪影或噪声的高分辨率可缩放图形。Chris Coyier 有一篇很棒的文章。在这里查看 > [http://css-tricks.com/using-svg/](http://css-tricks.com/using-svg/)

如果您的图像必须是图像而不是矢量（如照片），您将它们保存为什么文件格式？请记住在 StackOverflow 上提问时尽可能详细，以便人们可以最好地帮助您:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T10:24:48.167

您能否尝试添加您的图片：-webkit-backface-visibility: hidden

# c++ - 将对象的指针作为参数传递给 DialogBoxParam()

> ID：15882403
> 
> 赞同：0
> 
> 时间：2013-04-08T14:57:03.920
> 
> 标签：c++, winapi, win32gui

我想将对象的指针作为[`DialogBoxParam()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645465%28v=vs.85%29.aspx).

```
INT_PTR WINAPI DialogBoxParam(
  _In_opt_  HINSTANCE hInstance,
  _In_      LPCTSTR lpTemplateName,
  _In_opt_  HWND hWndParent,
  _In_opt_  DLGPROC lpDialogFunc,
  _In_      LPARAM dwInitParam
);
```

这是我的电话`DialogBoxParam()`：

```
MyClass *myObject = new MyClass();
DialogBoxParam(
    GetModuleHandle(NULL),
    MAKEINTRESOURCE(IDD_SELECT_ETC),
    hwnd,
    CallbackDlgProc,
    (LPARAM)&myObject
); 
```

这是我的尝试之一`CallbackDlgProc()`（知道 myFile 是 public char* 成员`myObject`）：

```
BOOL CALLBACK CallbackDlgProc(HWND hwndDlg, UINT Message, WPARAM wParam, LPARAM lParam)
{
    switch(Message)
    {
        case WM_INITDIALOG:
        {
            MessageBox(NULL, (CHAR*)((*(MyClass*)lParam).myFile), "Title", MB_OK);
            return TRUE;
        }
        case [...]
    }
} 
```

知道如何访问和编辑`myObject`吗`CallbackDlgProc()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:00:01.953

当你将它传递给 时`DialogBoxParam`，你使用 address-of 操作符`&`来获取一个指针。但是，它已经是一个指针，因此您实际上将指针传递*给指针*（类型`MyClass**`）。

要么调整回调函数中的代码，要么不使用地址运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T16:57:49.473

对于不理解上述答案的人的更详细解释，在 OP 的示例代码中，您必须删除“&”才能使其工作：

```
DialogBoxParam(
    GetModuleHandle(NULL),
    MAKEINTRESOURCE(IDD_SELECT_ETC),
    hwnd,
    CallbackDlgProc,
    (LPARAM)myObject
); 
```

享受。

# checkbox - Refresh/Update a report page with checkboxes

> ID：15882404
> 
> 赞同：0
> 
> 时间：2013-04-08T14:57:06.420
> 
> 标签：checkbox, oracle-apex, submit-button

I am using APex 4.2\. I have a page with a shuttle list, (page 31), where a user can select some job categories (e, a, c, x, etc). The user can then click a button, (Generate Report), and it will take them to a page (Page 27) where a report is displayed. Each row of the report has a checkbox that is defaulted to yes (starts off checked).

The report query is along these lines:

```
select 'Y' as Selector, name, id, etc
from table
where  (instr(':'||:P31_JOB_CATEGORY||':',':'||JOB_CATEGORY||':') > 0) 
```

where `P31_JOB_CATEGORY` represents the shuttle list.
I am passing the value of the shuttle list (`P31_JOB_CATEGORY`) to page 27, therefore having the actual query to the report on page 27\.

I ultimately have a two part question.

1.  Once the user views the report, they will see that each row is checked and will be able to uncheck specific rows if neccessary. Once they done checking/unchecking, the report should be saved/submitted/refreshed with their made changes that will take them to another page to see the report. I am having trouble accomplishing this on button click.
2.  Ultimately their changes will need to be seen on a pdf report, where once they click the refresh button, the report will update with their changes and then possibly redirect to a page that opens up an open/save pdf report. But first I need to tackle refreshing the page with the changes they made to the report by checking/unchecking specific rows.

Any help would be greatly appreciated. Thanks in advance.

# jquery - 在控制器中运行 jquery 的 Grails

> ID：15882406
> 
> 赞同：0
> 
> 时间：2013-04-08T14:57:11.103
> 
> 标签：jquery, grails, controller

很简单的问题，但我在网上找不到任何建议如何做...我希望控制器在运行更新操作之前对屏幕上的简单 html 表运行 jQuery 检查，但我无法理解我是如何做到的做吧，有什么想法吗？

我尝试在 jQuery 中运行检查，然后使用 jquery 帖子将我需要的值传递给更新操作，但这根本不起作用，当我检查参数时，它看起来不像我运行时那样只是定期更新...

问题是我有一个多对多关系集，目前，在添加到我的列表或更新列表中的值时更新得很好，但是当我需要删除一个我遇到困难的那一刻，我想做的是获取 html 表的计数（其中包含我的链接项目列表），然后将其与数据库进行比较，如果现在表中的数量少于数据库中的数量，我将从 sql 运行基本删除以清除现在多余的链接项目...

我唯一无法解决的是如何在控制器运行期间获取此表计数，或调用控制器并传入此表号（我可以调用操作并传递表号和 id 但这似乎失去所有其他参数），我原以为这`def formInstance = Form.get(id)`会让我得到所有的参数，但似乎根本没有这样做:(

或者，如果我手头有身份证，还有其他方法可以重新填写我的参数吗？

非常感谢任何帮助！:)

更新控制器看起来像这样： -

```
def update(Long id) {
        def formInstance = Form.get(id)
        int eventCount = formInstance.events.collect().count{id};

        if (!formInstance) {
            flash.message = message(code: 'default.not.found.message', args: [message(code: 'form.label', default: 'Form'), id])
            redirect(action: "list")
            return
        }

        formInstance.properties = params

        if (!formInstance.save(flush: true)) {
            render(view: "edit", model: [formInstance: formInstance])
            return
        }

        int neweventCount = formInstance.events.collect().count{id};
        println(neweventCount)  

        flash.message = message(code: 'default.updated.message', args: [message(code: 'form.label', default: 'Form'), formInstance.id])
        redirect(action: "show", id: formInstance.id)

    } 
```

通过常规保存按钮提供的参数如下所示： - [id:3, formDesc:form 3, events[1].id:2, events[1]:[id:2], _action_update:Update, events[0 ].id:2, events[0]:[id:2], version:, action:index, controller:form]

但是通过像这样的 jQuery [id:14, myInt:1, action:update, controller:form]

回顾一下，我认为问题出在保存上，但我不知道如何纠正它。例如，如果我从一个带有 3 个“事件”的“表单”开始，然后从表中删除其中一个事件，然后将其保存，则参数如下所示：-

```
[id:1, formDesc:form 112, events[1].id:1, events[1]:[id:1], _action_update:Update, events[0].id:1, events[0]:[id:1], version:, action:index, controller:form] 
```

如您所见，现在只显示了两个事件（0 和 1），并且它们会根据我的需要进行更新，但是第三个事件（不再显示在参数中）并没有像我一样从链接表中删除想。

我能想到的唯一方法是从屏幕上获取表大小，然后将其与现在保存的事件数进行比较，并在保存之前或之后进行手动 SQL 删除，但我不知道该怎么做这...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:38:49.843

我是个白痴，参数已经给了我一个我现在有多少当前事件的列表，由于某种原因它没有点击我可以从该列表中导出新参数的数量然后我可以运行一个简单的一段 sql 删除所有现在不需要的事件！*打额头*

# php - 如何在单击按钮上从服务器下载 XML 文件？

> ID：15882412
> 
> 赞同：2
> 
> 时间：2013-04-08T14:57:31.607
> 
> 标签：php, html, xml, download

我有 XML 文件的链接，该文件位于服务器上。当用户单击按钮时，他必须采取对话框将 XML 文件保存到本地磁盘。我确定“a href”中指向 XML 文件的链接，但浏览器打开了这个文件，而不是保存。如果我“将链接另存为..”一切正常。请帮我解决这个问题。

更新：服务器 - IIS。XML 文件动态创建。onClick 事件我发送到 js 链接到我的 XML 文件，js POST 链接到使用 ajax 的 php。如何修改我的 php 以打开“保存对话框”来保存 XML 文件？js：

```
 function funk(url)
    {
    var ajax = getRequest();
    ajax.onreadystatechange = function()
    {
        if(ajax.readyState == 4)
        {
         ...
        }
    }
    ajax.open("POST", "/do_query.php", true);
    ajax.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    var data = 'info='+url;
    ajax.send(data);
    } 
```

php (do_query.php):

```
<?php
  if (isset($_POST['info'])) 
  {
    $info = $_POST['info'];
  }
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:59:16.533

XML 文件应与 HTTP 标头一起提供`Content-Disposition: attachment`。这告诉浏览器下载文件而不是打开它。当然，`Content-Type`还必须适当地设置标头（`application/xml`是通用的 XML mime 类型）。添加 HTTP 标头的方式取决于您的服务器配置：请编辑您的问题以添加一些详细信息。

在 Apache`.htaccess`中，它是

```
Header set Content-Disposition attachment 
```

在其他服务器中，它会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:01:02.753

最简单的方法是制作一个链接到的 php 文件，并让该 php 文件包含类似

```
<?php
header('Content-Type: application/xml;');
header('Content-Disposition: attachment; filename=blah.xml;');
readfile('blah.xml'); 
```

这应该强制文件被视为下载。

# android - 如何直接从相机应用程序获取捕获的图像并上传到网页

> ID：15882414
> 
> 赞同：0
> 
> 时间：2013-04-08T14:57:33.830
> 
> 标签：android, html, file-upload, camera

我有一个使用 android 相机应用程序保存照片的问题。我使用输入元素制作了 HTML5 文件，例如：

```
<input type="file" accept="image/*;capture=camera" /> 
```

这样我就可以拍摄照片，在相机应用程序后显示拍摄的照片，当我点击照片下方的保存按钮时，照片会直接返回到 html 对象。当我尝试在 web 视图中打开此页面时，我看到我必须做一些技巧。到现在为止还挺好。我可以打开相机并拍摄照片。这是我的问题：如何像 HTML5 一样显示最后一张照片并将其保存到 html 对象中。我找不到显示最后一张照片的方法。HTML5 很容易做到这一点，但我被困在本机版本中。感谢您的帮助...（顺便说一下，我使用 eclipse 和 Galaxy s3 来测试本机应用程序。）

这是我打开相机应用程序的代码。

活动代码：

```
Intent i = new Intent(Intent.ACTION_PICK);
i.addCategory(Intent.CATEGORY_DEFAULT);
i.setType("image/*");       

FileUploadTest.this.startActivityForResult(Intent.createChooser(i,"File Chooser"), 
    FILECHOOSER_RESULTCODE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T13:06:15.997

我看到没有人对这个问题感兴趣。无论如何，我找到了解决方案，并想分享给任何有兴趣的人。

*   不要忘记调用方法的“超级”。

*   不要忘记在每种情况下都调用“onReceiveValue”。如果你不调用它，你的应用就会崩溃

> ```
> @Override
>   protected void onActivityResult(int requestCode, int resultCode,
>           Intent intent) {
>       try {
>           super.onActivityResult(requestCode, resultCode, intent);
> 
>           if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK)
>               mUploadMessage.onReceiveValue(intent == null ? this.fileUri
>                       : intent.getData());
>           else
>               mUploadMessage.onReceiveValue(null);
>       } catch (Exception e) {
>           Log.e("Error9", e.getLocalizedMessage());
>           mUploadMessage.onReceiveValue(null);
>       } finally {
>           mUploadMessage = null;
>       }
>   } 
> ```

# python - 肥皂对 xml 的响应

> ID：15882418
> 
> 赞同：1
> 
> 时间：2013-04-08T14:57:45.203
> 
> 标签：python, web-services, suds

考虑以下肥皂响应：

```
(ArrayOfNotificationData){NotificationData[] = (NotificationData){Id = 1 Title = "notification 1" Message = "bla bla." Published = 2000-01-01 00:00:00}, (NotificationData){Id = 2 Title = "notification 2" Message = "bla bla." Published = 2000-01-01 00:00:00},} 
```

如何将此响应转换为：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
    <GetNotificationsResponse xmlns="http://localhost/WS.asmx">
        <GetNotificationsResult>
            <NotificationData>
                <Id>1</Id>
                <Title>notification 1</Title>
                <Message>bla bla.</Message>
                <Published>2000-01-01T00:00:00</Published>
            </NotificationData>
            <NotificationData>
                <Id>2</Id>
                <Title>notification 1</Title>
                <Message>bla bla.</Message>
                <Published>2001-01-01T00:00:00</Published>
            </NotificationData>
        </GetNotificationsResult>
    </GetNotificationsResponse>
</soap:Body> 
```

我正在使用 suds 调用 Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:20:10.657

您是否知道循环中的正则表达式可能非常强大：

```
import re

s = '''(ArrayOfNotificationData){NotificationData[] = (NotificationData){Id = 1 Title = "notification 1" Message = "bla bla." Published = 2000-01-01 00:00:00}, (NotificationData){Id = 2 Title = "notification 2" Message = "bla bla." Published = 2000-01-01 00:00:00},}'''

def f(d):
    for k, v in d.items():
        if v is None:
            d[k] = ''
    return d

def g(reg, rep):
    c1 = s
    c2 = ''
    while c1 != c2:
        c2 = c1
        c1 = re.sub(reg, lambda m: rep.format(**f(m.groupdict())), c1)
    print c1

g('(?P<m>\w+)\s+=\s+(?:(?P<v>\\d+-\\d+-\\d+ \\d+:\\d+:\\d+|\w+)|"(?P<v3>[^"]*)")|(?:(?:\\w|\\[|\\])+\\s*=\\s*)?\\((?P<m2>\w+)\\){(?P<v2>[^}{]*)}\s*,?', '<{m}{m2}>{v}{v2}{v3}</{m}{m2}>') 
```

结果是：（只是没有格式化）

```
<ArrayOfNotificationData>

    <NotificationData>

        <Id>1</Id> 
        <Title>notification 1</Title> 
        <Message>bla bla.</Message> 
        <Published>2000-01-01 00:00:00</Published>

    </NotificationData> 
    <NotificationData>

        <Id>2</Id> 
        <Title>notification 2</Title> 
        <Message>bla bla.</Message> 
        <Published>2000-01-01 00:00:00</Published>

    </NotificationData>

</ArrayOfNotificationData> 
```

未格式化：

```
<ArrayOfNotificationData><NotificationData><Id>1</Id> <Title>notification 1</Title> <Message>bla bla.</Message> <Published>2000-01-01 00:00:00</Published></NotificationData> <NotificationData><Id>2</Id> <Title>notification 2</Title> <Message>bla bla.</Message> <Published>2000-01-01 00:00:00</Published></NotificationData></ArrayOfNotificationData> 
```

我非常喜欢这个。否则我不会创建这个解决方案。如果你想对上下文无关语法使用正则表达式替换，你必须小心。

顺便说一句：如果代码中有一个`}`or `{`，`""`这将不起作用：`Title = "notification} 1"` 如果您也需要这方面的帮助，请写评论 :)

# hadoop - 我需要通过将目录作为输入来修改 map reduce 中的常规 wordcount 程序

> ID：15882419
> 
> 赞同：0
> 
> 时间：2013-04-08T14:57:51.217
> 
> 标签：hadoop, mapreduce

我不想提供单个文件作为输入，而是想提供一个目录，其中可以不包含任何文件。我希望以某种方式编写输出

输入 ：

文件 1 文件 2 文件 3

输出 ：

文件 1 文件 2 文件 3

而每个文件都应该在相应的文件中有它的字数。要确定地图中使用了哪个文件，我可以使用 context.getInputSplit() 。但是我怎样才能让它以我想要的方式编写输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:13:29.577

您可以使用映射器中的输入拆分来识别它们来自的文件，并将其与[MultipleOutputs](http://hadoop.apache.org/docs/r2.0.3-alpha/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)结合使用以将文件与 reducer 分开。

但是，您需要将它来自的文件传递给减速器，因此您可能需要创建一个复合键对象并编写一个自定义`Partitioner`并将`WritableComparator`文件名和原始键一起传递。请参阅：[Hadoop - 复合键](https://stackoverflow.com/questions/12427090/hadoop-composite-key)

# c# - 清除 Datagridview 中的重复项

> ID：15882420
> 
> 赞同：1
> 
> 时间：2013-04-08T14:57:58.533
> 
> 标签：c#, datagridview, duplicates

我在 Stack Overflow 上搜索了此类问题。但是我发现了几个类似的问题，但显示了不同的解决方案。

我想在我的 datagridview 中显示没有重复的数据。我不知道它是如何复制的。

```
conn.Open();
            query = "SELECT Books.BookID,Books.Title,Books.AuthorID,Authors.AuthorName,Books.ISBN from Books,Authors";
            cmd = new SqlCommand(query, conn);
            dr = cmd.ExecuteReader();

            while (dr.Read())               
            {
                dataGridView1.Rows.Clear();
               dataGridView1.Rows.Add(dr[0].ToString(), dr[1].ToString(), dr[2].ToString(), dr[3].ToString(), dr[4].ToString());
            }
            cmd.Dispose();
            conn.Close(); 
```

我想要发生的事情：

> 书号 | 书名 | ETC..
> 
> 100001 | 社会学 | 等等。
> 100002 | 历史 | ETC..

这是每次都显示的数据网格

> 书号 | 书名 | ETC..
> 
> 100001 | 社会学 | 等等。
> 100002 | 历史 | 等。
> 100001 | 社会学 | 等等。
> 100002 | 历史 | ETC..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:00:08.240

更改您的查询以从数据库中获取`DISTINCT`记录，然后将它们绑定到`datagridview`

```
 query = "SELECT DISTINCT Books.BookID,Books.Title,Books.AuthorID,Authors.AuthorName,
          Books.ISBN from Books,Authors"; 
```

注意：如果有任何列具有不同的值，此查询将使行不同。因此，由您决定要区分哪一列的值并希望在网格上显示。

还有一件事，`JOIN`如果可能的话，使用而不是笛卡尔积

```
query = "SELECT DISTINCT Books.BookID,Books.Title,Books.AuthorID,Authors.AuthorName,
         Books.ISBN from Books 
         LEFT OUTER JOIN Authors on Books.AuthorId=Author.AuthorId"; 
```

编辑：试试这个进行绑定

```
using(SqlReader reader = cmd.ExecuteReader() )
     {
        if (reader.HasRows)
        {  
            DataTable dt = new DataTable();
            dt.Load(reader);
            dataGridView1.DataSource = dt;
        }
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:05:39.927

试试这个

```
conn.Open();
query = "SELECT Books.BookID,Books.Title,Books.AuthorID,Authors.AuthorName,Books.ISBN from Books,Authors";
cmd = new SqlCommand(query, conn);

SqlDataAdapter da = new SqlDataAdapter(cmd);

dataGridView1.Clear();

da.Fill(dataGridView1);

cmd.Dispose();
conn.Close(); 
```

不确定这是否完全正确，但它可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:38:17.480

您需要更改查询以使用 DISTINCT，因为这将删除重复项：

```
SELECT DISTINCT Books.BookID,Books.Title,Books.AuthorID,Authors.AuthorName,Books.ISBN from Books,Authors 
```

# facebook - Facebook 图片发布永久链接

> ID：15882424
> 
> 赞同：1
> 
> 时间：2013-04-08T14:58:04.873
> 
> 标签：facebook, facebook-graph-api

我有一个通过他们的 api 在 facebook 上发布东西的系统。我遇到的问题是，当我试图从我从 facebook 得到的回复中找出帖子的永久链接时。脸书的回复是这样的：

```
{'id': 'some_numerical_id', 'post_id': 'id1_id2'} # id1 and id2 are two numerical ids separated by an underscore 
```

有人知道我怎么能从中找出永久链接吗？我尝试使用

```
/permalink.php?story_fbid=x&id=y 
```

但这不适用于包含图片的帖子（未尝试使用视频）。

# jquery - 使用 jquery 和 ajax 验证登录对话框

> ID：15882430
> 
> 赞同：1
> 
> 时间：2013-04-08T14:58:19.310
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc, jquery-validate

我需要一些关于使用 ajax 进行验证的帮助。我的登录对话框有效，但它不处理成功或存在验证错误时发生的情况。我不确定我如何或在哪里实际创建 ajax 帖子（我对 jquery/Ajax 没有经验）

这是我的观点@model Models.LoginModel

```
 @{
        ViewBag.Title = "Log in";
    }

    <hgroup class="title">
    @*    <h1>@ViewBag.Title.</h1>*@
    </hgroup>

    <section id="loginForm" style="margin-left: 20px; border-width: 0px;">

    @using (Ajax.BeginForm("Login", new { ReturnUrl = ViewBag.ReturnUrl }, new AjaxOptions { HttpMethod = "Post" }, new { Id = "login_form" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>Log in Form</legend>
            <ol>
                <li>
                    @Html.LabelFor(m => m.UserName)
                    @Html.TextBoxFor(m => m.UserName)
                    @Html.ValidationMessageFor(m => m.UserName)
                </li>
                <li>
                    @Html.LabelFor(m => m.Password)
                    @Html.PasswordFor(m => m.Password)
                    @Html.ValidationMessageFor(m => m.Password)
                </li>
                <li>
                    @Html.CheckBoxFor(m => m.RememberMe)
                    @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
                </li>
            </ol>

        </fieldset>
        @*<p>
            @Html.ActionLink("Register", "Register") if you don't have an account.
        </p>*@
    }
    </section>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#dlgLogin").dialog({
            modal: true,
            autoOpen: true,
            draggable: true,
            resizable: true,
            title: "Login",

            buttons: {
                Login: function () {
                    $("#login_form").submit();

                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            }
        });

    });
</script> 
```

这是我的控制器中的 loginpost 方法。

```
[HttpPost]
        [ValidateAntiForgeryToken]
        public ActionResult Login(LoginModel model, string returnUrl)
        {
            if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
            {
                //return RedirectToLocal(returnUrl);
                return Json(new { success = true });   
            }

            // If we got this far, something failed, redisplay form
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
            return PartialView("LoginDialog",model);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:30:55.297

首先，在您的表单声明中，这需要是：

```
new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "loginForm" } 
```

因为它不知道提交时要替换什么。

顺便说一句：恕我直言，我认为你的结果应该是一样的，即如果你要返回视图，返回视图，如果你在处理 JSON，只处理 JSON。如果您只是想在成功时关闭对话框，请创建一个名为 Success 的视图，在成功时返回它并在该视图中植入必要的 JavaScript 来执行此操作。

返回不同类型的视图只意味着客户端需要一大堆额外的流程语句。那有意义吗？

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:34:48.763

吨

我自己解决了我的问题。这是代码。是否可以将 .ajax 函数放在创建对话框的同一脚本中？

```
<div id="dlgLogin">
        @model Models.LoginModel

        @{
            ViewBag.Title = "Log in";
        }

        <hgroup class="title">
        @*    <h1>@ViewBag.Title.</h1>*@
        </hgroup>

        <section id="loginForm" style="margin-left: 20px; border-width: 0px;">

        @using (Ajax.BeginForm("Login", new { ReturnUrl = ViewBag.ReturnUrl }, new AjaxOptions { HttpMethod = "Post" }, new { Id = "login_form" }))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true)

            <fieldset>
                <legend>Log in Form</legend>
                <ol>
                    <li>
                        @Html.LabelFor(m => m.UserName)
                        @Html.TextBoxFor(m => m.UserName)
                        @Html.ValidationMessageFor(m => m.UserName)
                    </li>
                    <li>
                        @Html.LabelFor(m => m.Password)
                        @Html.PasswordFor(m => m.Password)
                        @Html.ValidationMessageFor(m => m.Password)
                    </li>
                    <li>
                        @Html.CheckBoxFor(m => m.RememberMe)
                        @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
                    </li>
                </ol>
                <input id="submit" type="submit" value="Log in" style="display:none"/>

            </fieldset>
            @*<p>
                @Html.ActionLink("Register", "Register") if you don't have an account.
            </p>*@
        }
        </section>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#dlgLogin").dialog({
                modal: true,
                autoOpen: true,
                draggable: true,
                resizable: true,
                title: "Login",

                buttons: {
                    Login: function () {
                        $("#login_form").submit();

                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                }
            });

        });
    </script>
    <script>
        $(function () {    
            $('#login_form').on('submit', function () {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        if (result.success) {
                            // We have a JSON object in case of success              
                            $('#dlgLogin').dialog("close");

                        } else {
                            // We have the partial with errors in case of failure
                            // so all we have to do is update the DOM

                            $('#dlgLogin').html(result);
                        }
                    }
                });
                return false;
            });
        });
    </script> 
```

# php - 如何修复错误转换的文本（案例：á é í ó ú ñ）

> ID：15882437
> 
> 赞同：1
> 
> 时间：2013-04-08T14:58:46.180
> 
> 标签：php, mysql, sql

我来自委内瑞拉，我在一个使用旧数据库的网络应用程序中工作，制作它的人并不关心西班牙语字符的正确呈现（á é í ó ú ñ），所以有名字保存为 ESPAÃ'AO (ESPAÑA)、MARTIÂN (MARTÍN)。

`SQL`所以，我可以替换字符串，`REPLACE( name, 'Ã‘', 'Ñ' )`但是，¿有一种简单的方法可以在所有情况下进行替换吗？

MySQL (historias) 中只有一个表，其中两个字段 (nombre, apellido) 存在相同的问题。

我也在使用php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:30:01.507

请尝试使用控制台从 mysql 中检索数据，以查看数据将如何显示。如果数据显示正确且没有损坏，这可能会告诉您 mysql 工作正常，但问题仍然存在于 PHP 中，因为 PHP 使用较大部分的 utf-8 字符时工作不正常。

如果您在控制台中收到来自 mysql 的损坏字符，请备份您的数据库并尝试将您的数据库和字段（！）转换为 UTF8。这将消耗更多的磁盘空间，但是，确保安全字符。

如果问题出在 PHP 中，您可以尝试一些解决方案：一种是将字符串转换为 utf8

```
iconv('UTF-8', 'ASCII//TRANSLIT', $string_to_convert); 
```

另一种方式，您可以尝试仅在字符串上使用理解 utf-8（多字节）的函数。有关更多信息，请参阅：[PHP：多字节字符串 - 手册](http://php.net/manual/en/book.mbstring.php)

高温高压

真挚地，

虚拟现实

# php - 显示非关联数组

> ID：15882439
> 
> 赞同：0
> 
> 时间：2013-04-08T14:58:49.033
> 
> 标签：php, arrays

大多数关于在 PHP 中显示数组的文章似乎都是针对关联数组的。有没有比以下更好的方法来显示非关联数组？

```
for ( $i = 0; $i < sizeof( $my_array ); $i ++ ) {
    echo $my_array[$i]; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:00:01.083

你循环的方式很好。但是，我更喜欢使用`foreach`in `php`：

```
$array = array("1", "anotherItem", "more data");

foreach($array as $value){
   echo $value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:00:55.717

这取决于显示的目的是什么。如果您只是想查看其内容以进行调试，那么简单`print_r()`或`var_dump()`就足够了。否则就像你一样循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:00:14.287

```
foreach ($my_array as $val)
    echo $val; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:02:03.280

和

```
echo implode("", $my_array); 
```

“”是用作胶水的东西。（例如，尝试“<br/>\n”）

# triggers - 强制构建持续时间 CCNet

> ID：15882440
> 
> 赞同：0
> 
> 时间：2013-04-08T14:58:50.113
> 
> 标签：triggers, scheduled-tasks, scheduling, cruisecontrol.net

几天前，我的盘子上有一个与巡航控制相关的不想要的突然项目。我花了一些时间才明白这个巡航控制系统到底是什么（直到现在我才知道陆地巡洋舰）。

我们有一堆项目将在 Cruise Control 中按顺序构建。我们已经为此配置了一切。现在我的项目的一部分是在所有项目都构建完成后运行一个实用程序。由于项目将按固定顺序构建，因此我选择了最后一个项目（例如`ProjectLast`）进行跟踪。以下是项目构建后运行实用程序的代码示例

```
<forcebuild>
    <project>MyUtility $(ccnet_branchlabel)</project>
    <integrationStatus>Success</integrationStatus>
    <enforcerName>ProjectLast $(ccnet_branchlabel)</enforcerName>
</forcebuild> 
```

现在我只想`MyUtility`在 14.00 到 18.00 之间的固定时间段内运行上述代码。有没有办法做到这一点？请帮助我理解这一点。谢谢。

这就是我想要的：当`ProjectLast`构建成功完成并且时间在 14.00 到 18.00 之间时，MyUtility 应该触发，否则不会触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:33:13.127

我认为这应该大致符合您的要求（未经测试）。`ProjectLast`它应该在处于状态时触发构建`Success`（每 30 秒检查一次），并且时间介于`14:00`和之间`18:00`（每 60 秒检查一次时间）。

```
<multiTrigger operator="And">
  <triggers>

    <projectTrigger serverUri="tcp://server:21234/CruiseManager.rem" project="ProjectLast">
      <triggerStatus>Success</triggerStatus>
      <innerTrigger type="intervalTrigger" seconds="30" buildCondition="ForceBuild" />
    </projectTrigger>

    <filterTrigger startTime="14:00" endTime="18:00">
      <trigger type="intervalTrigger" seconds="60" />
      <weekDays>
        <weekDay>Sunday</weekDay>
      </weekDays>
    </filterTrigger>

  </triggers>
</multiTrigger> 
```

[巡航控制配置](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Configuring_the_server_%28ccnetconfig%29)（特别是[触发器](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Trigger_Blocks)）的文档应该对所有可能性有足够的解释。

## **编辑：**

所以目前，你有一些东西（我想）看起来像这样：

```
<project name="ProjectLast">

    <tasks>

        <!-- some build tasks etc etc -->

        <forcebuild>
            <project>MyUtility $(ccnet_branchlabel)</project>
            <integrationStatus>Success</integrationStatus>
            <enforcerName>ProjectLast $(ccnet_branchlabel)</enforcerName>
        </forcebuild>

    </tasks>

</project>

<project name="MyUtility">

    <tasks>

        <!-- whatever it is "MyUtility" does goes here -->

    </tasks>

</project> 
```

我建议将配置更改为：

```
<project name="ProjectLast">

    <tasks>

        <!-- some build tasks etc etc -->

    </tasks>

</project>

<project name="MyUtility">

    <multiTrigger operator="And">
      <triggers>

        <!-- the url here will obviously need to change to match your server -->
        <projectTrigger serverUri="tcp://server:21234/CruiseManager.rem" project="ProjectLast">
          <triggerStatus>Success</triggerStatus>
          <innerTrigger type="intervalTrigger" seconds="30" buildCondition="ForceBuild" />
        </projectTrigger>

        <filterTrigger startTime="14:00" endTime="18:00">
          <trigger type="intervalTrigger" seconds="30" />
          <weekDays>
            <weekDay>Sunday</weekDay>
          </weekDays>
        </filterTrigger>

      </triggers>
    </multiTrigger>

    <tasks>

        <!-- whatever it is "MyUtility" does goes here -->

    </tasks>

</project> 
```

注意这里我们已经将项目`MyUtility`是否运行的决定移到了`MyUtility`项目中，而不是移到了项目中`ProjectLast`

# javascript - D3中结合堆积面积图和刷牙

> ID：15882442
> 
> 赞同：4
> 
> 时间：2013-04-08T14:58:52.960
> 
> 标签：javascript, d3.js, brush, stacked-area-chart

我正在努力在 D3 中获取堆积面积图并添加[刷牙](http://bl.ocks.org/mbostock/1667367)功能。我已经成功地生成了大（焦点）和小（上下文）轴，并且情节看起来很好开始。我的问题是刷牙功能根本不起作用。我一直在努力解决这个问题，但无济于事，也无法弄清楚问题出在哪里。任何帮助将非常感激！

单击[此处](http://mypage.iu.edu/~jlorince/debug/stackedAreaBrushing.html)查看绘图的当前状态。这是代码：

```
<!-- language: lang-js -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
    font: 10px sans-serif;
}

.axis path,
.axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
}

.tag text {
    text-anchor: end;
}

</style>
<body onLoad="updateData()">
        <div id="option" style="font-size:14px;">
        <form>
        Number of tags:<input value="5" id="nTags_select"></input>
        <input name="updateButton" 
                                 type="button" 
                                value="Update" 
                                onclick="updateData()" />
                        </form>
</div>  
<script src="http://d3js.org/d3.v3.js"></script>
<script>

var margin = {top: 10, right: 10, bottom: 100, left: 40},
    margin2 = {top: 430, right: 10, bottom: 20, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom,
    height2 = 500 - margin2.top - margin2.bottom;

var parseDate = d3.time.format("%Y-%m-%d").parse;

var x = d3.time.scale().range([0, width]),
    x2 = d3.time.scale().range([0, width]),
    y = d3.scale.linear().range([height, 0]),
    y2 = d3.scale.linear().range([height2, 0]);

var color = d3.scale.category20();

var xAxis = d3.svg.axis().scale(x).orient("bottom"),
    xAxis2 = d3.svg.axis().scale(x2).orient("bottom"),
    yAxis = d3.svg.axis().scale(y).orient("left");

var brush = d3.svg.brush()
   .x(x2)
  .on("brush", brushed);

var area = d3.svg.area()
    .interpolate("basis")
    .x(function(d) { return x(d.date); })
        .y0(function(d) { return y(d.y0); })
        .y1(function(d) { return y(d.y0 + d.y); });

var area2 = d3.svg.area()
    .interpolate("basis")
    .x(function(d) { return x2(d.date); })  
        .y0(function(d) { return y2(d.y0); })
        .y1(function(d) { return y2(d.y0 + d.y); });

var stack = d3.layout.stack()
        .values(function(d) { return d.values; });

 var oRequest = new XMLHttpRequest();
 var sURL  = "data100.tsv";
 oRequest.open("GET",sURL,false);
 oRequest.setRequestHeader("User-Agent",navigator.userAgent);
 oRequest.send(null)
 var data = oRequest.responseText;

 var data = d3.tsv.parse(data);

    data.forEach(function(d) {
        d.date = parseDate(d.date);
    });

    color.domain(d3.keys(data[0]).filter(function(key) { return key !== "date"; }));
    var allTags = stack(color.domain().map(function(name) {
        return {
            name: name,
            values: data.map(function(d) {
                return {date: d.date, y: +d[name]};
            })
        };
    }));

    function updateData(){
        var nTags = document.getElementById('nTags_select').value;
        tags=allTags.slice(0,nTags);

    x.domain(d3.extent(data, function(d) { return d.date; }));
    y.domain([0,d3.max(tags, function(d) { return d3.max(d.values, function (d) { return d.y + d.y0; }); })]);
    x2.domain(x.domain());
    y2.domain(y.domain());  

    d3.select("svg").remove();

    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)

    svg.append("defs").append("clipPath")
    .attr("id", "clip")
  .append("rect")
    .attr("width", width)
    .attr("height", height);

var focus = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var context = svg.append("g")
    .attr("transform", "translate(" + margin2.left + "," + margin2.top + ")");

focus.selectAll('path')
            .data(tags)
            .enter()
            .append('path')
            .attr('clip-path','url(#clip)')
            .attr("d", function(d) { return area(d.values); })
            .attr('class','focus')
            .style("fill", function(d) { return color(d.name); });

  focus.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  focus.append("g")
      .attr("class", "y axis")
      .call(yAxis);

context.selectAll('path')
            .data(tags)
            .enter()
            .append('path')
            .attr('class','context')
            .attr("d", function(d) { return area2(d.values); })
            .style("fill", function(d) { return color(d.name); });

  context.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height2 + ")")
      .call(xAxis2);

  context.append("g")
      .attr("class", "x brush")
      .call(brush)
    .selectAll("rect")
      .attr("y", -6)
      .attr("height", height2 + 7);

  focus.append("text")
            .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
            .attr("transform", function(d) { return "translate(" + x(d.value.date) + "," + y(d.value.y0 + d.value.y / 2) + ")"; })
            .attr("x", -6)
            .attr("dy", "-.35em")
            .text(function(d) { return d.name; });

};

function brushed() {
  x.domain(brush.empty() ? x2.domain() : brush.extent());
  focus.selectAll("path.focus").attr("d", area);
  focus.select(".x.axis").call(xAxis);
}

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:40:52.610

在 Mike 的原始代码中，他为他的 svg 元素选择了名称 focus ，这是不幸的 - 它 [已经存在于 dom](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/focus)中，并且可能会造成混淆。

无论如何，这里的问题主要是范围之一。

Mike 定义`focus`了获取数据的范围之外，从而把它放到了全局范围内。因此，它可用于该`brushed()`功能。

我将采取的第一步是将`focus`var 的定义移到 updateData() 函数之外。

但是，还有一些其他问题：

*   您应该使用带有匿名函数的 d3.tsv 来获取数据。它会让事情变得简单得多。
*   在刷过的函数中，需要使用匿名函数并传递区域函数d.values，而不仅仅是d。您在 updateData 函数中执行了此操作，但未在刷过时执行此操作。IE：

    ```
    function brushed() {   
        x.domain(brush.empty() ? x2.domain() : brush.extent());
        focus.selectAll("path.focus").attr("d", function(d){return area(d.values)});
        focus.select(".x.axis").call(xAxis);
    } 
    ```

我有你的图表的粗略版本，这里的刷子工作：http: [//jsfiddle.net/zQ2EF/](http://jsfiddle.net/zQ2EF/)但是，我会仔细研究 Mike 的例子，仔细注意事物的定义位置，以及它们在哪个范围内 - 它会帮助您了解问题所在！

# cocoa - 如何根据 COCOA (OS X) 中 customView 的大小调整窗口大小？

> ID：15882444
> 
> 赞同：0
> 
> 时间：2013-04-08T14:59:01.710
> 
> 标签：cocoa, resize, nsview, nswindow

我对 Apple 应用程序开发非常陌生，我在提出这些问题时犯了任何错误，请原谅我。

实际上我有一个大小为 350 X 470 的窗口，在这些窗口中我有一个 customView。在这些自定义视图中，我想加载三个不同的视图（.xib）。

*   尺寸 250 X 300 的第一视图
*   尺寸 478 X 406 的第二视图
*   尺寸 565 X 600 的第三视图

我在用

```
[[_viewController view] removeFromSuperview];
_viewController = [[NSViewController alloc] initWithNibName:@"MyXibName" bundle:nil];
[_customView addSubview:[_viewController view]]; 
```

从一个视图切换到另一个视图和关闭特定视图之类的每件事都可以正常工作，但是不会根据视图大小调整窗口大小。

我参考了许多网站和几行代码，但我没有从其中任何一个那里得到任何解决方案。

如果有人能帮助我实现这些目标，我会很高兴。如果可能的话，请给我“将值从一个视图传递到另一个视图”的答案。

先感谢您...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:25:12.583

好吧，基本上你必须在你的窗口上调用该方法`setContentSize:`并传递要嵌入到该窗口中的视图的大小。

```
 _viewController = [[NSViewController alloc] initWithNibName:@"MyXibName" bundle:nil];
[yourWindow setContentSize:FVC.view.frame.size];
[_customView addSubview:FVC.view]; 
```

这是为了防止您的 _customView 占用窗口的所有内容空间。

# php - 组合来自 sql 查询的数组

> ID：15882447
> 
> 赞同：0
> 
> 时间：2013-04-08T14:59:10.943
> 
> 标签：php, arrays

我知道这已经被问了很多次了，但我真的不知道该怎么做。我从wordpress sql请求中得到这个

```
$name = $wpdb->get_results("SELECT Chipset FROM gpu", ARRAY_N);

Array
(
    [0] => Array
        (
            [0] => GeForce GTX 670
        )

    [1] => Array
        (
            [0] => fasdasd
        )

    [2] => Array
        (
            [0] => test
        )

    [3] => Array
        (
            [0] => GeForce GTX 670
        )

    [4] => Array
        (
            [0] => GeForce GTX 560 Ti
        )

) 
```

和价格

```
$price = $wpdb->get_results("SELECT Price FROM gpu", ARRAY_N);

Array
(
    [0] => Array
        (
            [0] => 403
        )

    [1] => Array
        (
            [0] => 50
        )

    [2] => Array
        (
            [0] => 288
        )

    [3] => Array
        (
            [0] => 288
        )

    [4] => Array
        (
            [0] => 288
        )

) 
```

我需要创建这种格式的数组

```
Array
(
    [0] => Array
        (
            [text] => GeForce GTX 670
            [value] => 403 
        )

    [1] => Array
        (
            [text] => fasdasd
            [value] => 50
        )

    [2] => Array
        (
            [text] => test
            [value] => 288
        )

) 
```

如果您知道如何从一个查询中的两列获取结果并使用该数组，您就可以。另外我想问你们是否可以向我推荐一些好的学习材料，我在哪里可以学习这种类型的组合数组或如何使用一堆 foreach，因为我无法理解这个

我的问题的好的解决方案是更改 sql 查询，但我想知道如何组合这些数组以备将来使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:03:13.107

您需要做的就是`SELECT Chipset, Price FROM gpu`在单个查询中获取两列。由于您使用的是 Wordpress，因此只需查看[他们的文档](http://codex.wordpress.org/Class_Reference/wpdb)就可以了。掌握 SQL 也会很有帮助。对于初学者，我会推荐[Tizag 的 MySQL 教程。](http://www.tizag.com/mysqlTutorial/)

# c# - List.Sort 方法的二级排序

> ID：15882448
> 
> 赞同：1
> 
> 时间：2013-04-08T14:59:16.383
> 
> 标签：c#, asp.net, sorting

我有一个我正在尝试实现辅助排序类型的通用列表。我可以让它按一种类型很好地排序，但是在进行二级排序时遇到了麻烦。

这是我正在使用的内容：

当我调用排序时：

```
List<Totals> totals = new LoadTotalList();
totals.Sort(Totals.Status); 
```

这是总计类：

```
public class Totals
{
  public string Status { get; set; } 
  public string Total { get; set; } 
  public string Cost { get; set; } 

  public static Comparison<Totals> StatusComp = 
delegate(Totals item1, Totals item2)
{
 return item1.Status.CompareTo(item2.Status);
};

  public static Comparison<Totals> CostComp = 
delegate(Totals item1, Totals item2)
{
 return item1.Cost.CompareTo(item2.Cost);
};

} 
```

我尝试对第一种类型进行排序，然后对第二种类型进行排序，但似乎无法获得次要排序类型。我知道它可以通过 Linq 使用 OrderBy 子句然后 ThenBy 子句来完成。但是我还有其他选择吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T15:01:24.180

`Comparison<T>`创建一个具有主要比较然后是次要比较的对象很容易：

```
public static class Comparisons
{
    public static Comparison<T> Then<T>(this Comparison<T> primary,
                                        Comparison<T> secondary)
    {
        // TODO: Nullity validation
        return (x, y) =>
        {
            int first = primary(x, y);
            return first != 0 ? first : secondary(x, y);
        };
    }
} 
```

然后你可以使用：

```
list.Sort(Totals.StatusComp.Then(Totals.CostComp)); 
```

（您也可以`IComparer<T>`轻松地做同样的事情。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:05:49.797

您可以使用允许使用自定义比较委托的[重载：`List.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)

```
totals.Sort((t1, t2) => {
    if (t1.Status != t2.Status) return t1.Status.CompareTo(t2.Status);
    else return t1.Cost.CompareTo(t2.Cost);
}); 
```

# yaml-cpp - 包括没有 Boost 的 yaml-cpp -

> ID：15882453
> 
> 赞同：5
> 
> 时间：2013-04-08T14:59:23.957
> 
> 标签：yaml-cpp

也许这是一个幼稚的问题 - 但有没有办法构建/安装 yaml-cpp，以便在构建包含 yaml.h 的项目时不需要周围有 Boost 库头文件？

IE：我正在开发一个使用 yaml-cpp 结构和解析的项目。在将部署它的系统上，我没有安装 Boost（没有库或头文件）。在具有 Boost 的系统上构建所述项目是没有问题的 - 但是当在没有 Boost 标头的系统上构建时，它会失败，因为 yaml-cpp 直接包含 Boost 标头。

cmake 输出：

```
/yaml_install_path/include/yaml-cpp/node/ptr.h", line 10: catastrophic error: 
          cannot open source file "boost/shared_ptr.hpp"
  #include <boost/shared_ptr.hpp> 
```

有没有办法绕过在系统某处手动安装该头文件的问题？我希望能够解决这个问题，以便 yaml-cpp 可以在其他项目中链接（并使用）而不依赖于 Boost。如果可能的话，我宁愿完全不依赖 Boost。

在此先感谢-希望对此有一个干净的解决方法，而我只是错过了一些简单的事情。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:35:44.957

不，那是不可能的。但是，yaml-cpp 确实有一个单独的分支，版本 0.3.x，它使用不依赖于 Boost 的旧 API。

# plugins - 如何告诉 Qt5 应用程序使用哪个平台插件？

> ID：15882457
> 
> 赞同：7
> 
> 时间：2013-04-08T14:59:43.920
> 
> 标签：plugins, qt5

我的嵌入式目标正在运行 Linux，并且有两个有效的平台插件：eglfs 和 linuxfb。默认情况下，我所有的 qt 应用程序都尝试加载 eglfs（并且由于某种原因失败）。我怎样才能让他们尝试 linuxfb？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T00:46:53.417

通过将“-platform linuxfb”附加到您用来调用 Qt5 应用程序的命令行。例如“./myqt5app -platform linuxfb”。但是 linuxfb 从 Qt5.0.1 开始就被破坏了，并且会出现段错误。

要调试插件问题 - 您可以执行“导出 QT_DEBUG_PLUGINS=1”并检查打印的日志。

# ios - ShinobiCharts 隐藏轴

> ID：15882463
> 
> 赞同：1
> 
> 时间：2013-04-08T15:00:08.193
> 
> 标签：ios, charts, shinobi

我在 iOS 上使用 Shinobi 图表，当我尝试不显示轴时遇到问题。

`chart.axis.width = @0`-> 不起作用

`chart.axis.width = @0.1`-> 它工作正常，虽然看起来很老套。

还有另一种隐藏轴的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-07T18:57:44.977

`chart.xAxis.width = @0.1;`作品。唯一的问题是每次图表呈现时它都会记录一条令人讨厌的警告消息。

这就是你想要的：

```
self.chart.xAxis.style.lineWidth = @0;
self.chart.xAxis.style.majorTickStyle.showLabels = NO;
self.chart.xAxis.style.majorTickStyle.showTicks  = NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T22:08:15.830

您还可以通过隐藏 minorTicks 来避免使用`chart.xAxis.width = @0.1;`（并消除由此产生的警告消息）：

```
self.chart.xAxis.style.majorTickStyle.showLabels = NO;
self.chart.xAxis.style.majorTickStyle.showTicks  = NO;
self.chart.xAxis.style.minorTickStyle.showLabels = NO;
self.chart.xAxis.style.minorTickStyle.showTicks  = NO; 
```

如果需要，对 yAxis 重复此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:26:59.817

您是说“chart.xAxis”还是“chart.yAxis”？我没有看到“chart.axis”的选项。

无论如何，试试这个：

chart.xAxis.style.majorGridLineStyle.showMajorGridLines = NO;

您可以随心所欲地玩弄其他风格的物品。查看[http://www.shinobicontrols.com/docs/ShinobiControls/ShinobiCharts/2.2.0/Standard/Normal/Classes/SChartAxisStyle.html](http://www.shinobicontrols.com/docs/ShinobiControls/ShinobiCharts/2.2.0/Standard/Normal/Classes/SChartAxisStyle.html)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-01T22:36:25.963

**隐藏记号和标签**

```
chart.yAxis.style.minorTickStyle.showLabels = NO;
chart.yAxis.style.minorTickStyle.showTicks = NO;
chart.yAxis.style.majorTickStyle.showLabels = NO;
chart.yAxis.style.majorTickStyle.showTicks = NO; 
```

**你有多轴图表吗？**

您可以隐藏 shinobi 委托方法*yAxisForSeriesAtIndex* 或*xAxisForSeriesAtIndex*上的刻度和标签（取决于您感兴趣的轴）。

```
-(SChartAxis *)sChart:(ShinobiChart *)chart yAxisForSeriesAtIndex:(NSInteger)index
{
  //secondary axis
 if (index == 0)
 {
    SChartAxis * secondAxis = chart.allYAxes[1];

    //hiding axis in chart
    secondAxis.style.minorTickStyle.showLabels = NO;
    secondAxis.style.minorTickStyle.showTicks = NO;
    secondAxis.style.majorTickStyle.showLabels = NO;
    secondAxis.style.majorTickStyle.showTicks = NO;

     return secondAxis;
  }
  //primary axis
  else
  {
      return chart.yAxis;
   }
}//eom 
```

# php - 链接的正则表达式 URL

> ID：15882464
> 
> 赞同：0
> 
> 时间：2013-04-08T15:00:10.810
> 
> 标签：php, regex

我使用以下正则表达式将 url 转换为 href 链接。它工作得很好，但是我在使用具有背景图像的样式标签时发现了一个错误。

```
 /**
 * Convert urls in a string to a html link
 * @return string
 */
public static function ConvertUrlsToHtml($str)
{
    $str = preg_replace( '@(?<![.*">])\b(?:(?:https?|ftp|file)://|[a-z]\.)[-A-Z0-9+&#/%=~_|$?!:,.]*[A-Z0-9+&#/%=~_|$]@i', '<a href="\0">\0</a>', $str);
    return $str;
} 
```

如果我使用以下...

```
<div class="inner-left" style="background-image: url(http://www.somewebsite/background.jpg);"></div> 
```

它也将背景图像转换为href。

有谁知道我可以如何调整正则表达式以忽略样式标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:36:59.560

您可以从删除 HTML 标签开始，因为您不想替换标签内的 URL。对 是对的`style=`，对`<img src=...`等`<a href=...>`也是对的。

```
function ConvertUrlsToHtml($str)
{
  $strNoTags = strip_tags($str);

  if (preg_match_all( '@(?<![.*">])\b(?:(?:https?|ftp|file)://|[a-z]\.)[-A-Z0-9+&#/%=~_|$?!:,.]*[A-Z0-9+&#/%=~_|$]@i', $strNoTags, $matches)) {

    foreach ($matches[0] as $match) {
      $str = str_replace($match, "<a href=\"$match\">$match</a>", $str);
    }
  }

  return $str;
} 
```

它能做什么：

1.  删除标签
2.  获取无标签字符串中的所有 URL
3.  用原始字符串中的链接替换找到的 URL

正如评论所言，您总是可以先尝试使用 HTML 解析器来提取文本，而不是`strip_tags`.

# jquery - .ajax() 可以处理相隔几秒的多个返回值吗？

> ID：15882468
> 
> 赞同：1
> 
> 时间：2013-04-08T15:00:21.133
> 
> 标签：jquery, ajax

如果 ajax post 的接收者是这样的：

```
// process/te_bulk.php

$jsonList = '[{"AV"},{"QT"}]';
echo $jsonList;

sleep ( 5 )              // or, continue curl request for jsonList variable 1

$jsonArray = '[{"1","15","JOG"},{"2","20","RUN"}]';
echo $jsonArray;

sleep ( 4 )              // or, continue curl request for jsonList variable 2

$jsonArray = '[{"1","25","SWIM"},{"2","30","BIKE"}]';
echo $jsonArray; 
```

第一次尝试 -**将 XHR 加载延迟 5 秒，同时附加两个字符串**，这会导致“无效 JSON”：

```
$.ajax({
  type: "POST",
  url: "process/te_bulk.php",
  contentType: "application/json; charset=utf-8",
  data: { user: "12345" }
}).success(function( msg ) {
  var string = jQuery.parseJSON(msg);
  alert( "Data Returned: "+string );
}); 
```

.post() 或 .ajax() 可以分别响应每个回声吗？在浏览器中加载页面 process/te_bulk.php 会产生 5 秒和 4 秒的延迟。换句话说，如何在页面可用时用数据填充页面，而不是在 te_bulk.php 完成处理时接收所有数据。

一种替代方法似乎是：有 2 个 .ajax() 函数，一个用于接收第一个字符串，根据需要处理和调用第二个函数，用于 $jsonArray 数据。

如果这是不可能的，是否有另一种简单的方法来显示所获得数据的“进度”指示器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:04:22.750

echo 不会向客户端返回任何内容，因此上面的示例代码不会执行您想要的操作。如果要异步加载页面的某些部分，则必须为每个部分使用单独的 ajax 调用。

请参阅下面凯文的评论，因为缓冲区可能会在请求的过程中被刷新到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:21:39.923

Ajax 只会在 readystate 为 4 时进入“完成”状态。如果您要刷新缓冲区（这会将任何已经返回的内容发送到浏览器），内容将被发送到浏览器，但是，*jQuery 不会解析它直到 readystate 变为 4*。

考虑到最后一部分，如果您仍然想继续这样做，请检查 responseText 是否正在使用来自 ajax 请求的内容进行更新，因为它正在被刷新。

您必须更新 php 以在每条记录后刷新缓冲区。

# ios - 查找当前视图控制器处于活动状态

> ID：15882472
> 
> 赞同：0
> 
> 时间：2013-04-08T15:00:32.493
> 
> 标签：ios, uiviewcontroller, uistoryboard, appdelegate

我有一个登录故事板，每当用户登录时都会实例化它。我有一个主故事板，它是实际的应用程序。

当我的应用程序设置为非活动状态（关闭应用程序）然后重新激活（再次打开应用程序）时，AppDelegate 会检查是否发生了 2 分钟超时。如果是这样，我想显示它已超时的警报，这很好用。

我遇到的问题是，如果您在登录屏幕上，我不想显示该消息。由于我的 Storyboard 使用 TabBarController，因此我没有有效的导航控制器。如何确定当前是否从 App Delegate 显示 LoginViewController？如何获得最顶层的 View 控制器的类名？

NavigationController 为空，仅供参考

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:23:12.653

首先，您需要有一个对 UITabBarController 的引用。如果在 IB 中将其设置为您的初始视图控制器，这将非常容易。您可以通过打开情节提要并在 UITabBarController 左侧寻找一个灰色的小箭头来检查这一点。如果是这样，那么只需执行以下操作：

```
UITabBarController *myTabBarController;
if ([_window.rootViewController isKindOfClass:[UITabBarController class]]) {

    NSLog(@"This window's rootViewController is of the UITabBarController class");

    myTabBarController = (UITabBarController *)_window.rootViewController;

} 
```

如果您使用的是 UITabBarController，您可以通过以下方式获取对其子 UIViewControllers 的引用：

```
[myTabBarController objectAtIndex:index]; 
```

您也可以直接查询您的 TabBarController：

```
NSLog(@"Selected view controller class type: %@, selected index: %d", [myTabBarController selectedViewController], [myTabBarController selectedIndex]); 
```

从零开始的索引方案遵循您设置的选项卡的顺序，无论是通过编程还是通过 IB（最左边的选项卡 = 索引 0）。

一旦你有了对你的 UITabBarController 的引用，剩下的就很简单了：

```
LoginViewController* myLoginViewController;

if(![[myTabBarController selectedViewController] isKindOfClass:[LoginViewController class]){
    //If the currently selected ViewController is NOT the login page
    //Show timeout alert
} 
```

# objective-c - 如何在不修改其点击矩形的情况下调整 UIButton 的大小

> ID：15882473
> 
> 赞同：0
> 
> 时间：2013-04-08T15:00:34.843
> 
> 标签：objective-c, cocoa-touch, cocoa, uibutton

我有一个`UIButton`with a`titleLabel`和 a `backgroundImage`。我想在按钮处于突出显示状态时调整其大小。这个调整大小应该会影响`titleLabel`和`backgroundImage`，但我不想修改按钮的点击区域。

目前我正在尝试这样。它几乎可以工作，但它也会影响命中区域：

```
- (void)setHighlighted:(BOOL)highlighted
{
    if ( highlighted && !self.highlighted )
    {
        self.transform = CGAffineTransformMakeScale(scaleFactorOnTouch, scaleFactorOnTouch);
    }
    else if ( !highlighted && self.highlighted )
    {
        self.transform = CGAffineTransformMakeScale(1.0, 1.0);
    }
    [super setHighlighted:highlighted];
} 
```

这导致当您触摸按钮内部并将其拖动到其（扩展 100 像素）点击区域之外时，当您在扩展的点击区域边缘拖动时会出现这种摆动/震颤。摆动是因为 hitArea 在突出显示和非突出显示状态之间不断变化。

我也尝试修改 self.layer.transform 属性，但这也会导致点击区域发生变化。

如果可能的话，我想避免为突出显示的状态设置不同的背景图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:21:13.453

正如您正确观察到的，重写`setHighlighted:`以更改按钮的转换会导致一种恶性循环。所以不要那样做！相反， override `backgroundRectForBounds:`，如下所示：

```
- (CGRect)backgroundRectForBounds:(CGRect)bounds {
    CGRect result = [super backgroundRectForBounds:bounds];
    if (self.highlighted)
        result = CGRectInset(result, -3, -3);
    return result;
} 
```

这会在突出显示期间放大按钮的绘制大小，但放大的绘图仅可见，因为`clipsToBounds`它是 NO。边界保持不变，您只能在边界内触摸，因此触摸处理不受影响。

这解决了问题的背景图像部分。如果您真的坚持要更改标题大小，我想您将不得不继续更改其变换。不过，我认为更改标题的字体（大小）的侵入性会更小——如果这对您的目的有用的话。

# selenium-webdriver - 当我们截图时，它将保存当前日期和时间

> ID：15882474
> 
> 赞同：0
> 
> 时间：2013-04-08T15:00:35.993
> 
> 标签：selenium-webdriver

我正在创建两种方法，如下所示：

```
public static String currentDateTime() {
    DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
    Calendar cal = Calendar.getInstance();
    String cal1 = dateFormat.format(cal.getTime());
    return cal1;
} 
```

```
public static void screenShot(WebDriver driver) throws IOException {
    File scrnsht = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
    String datetime = GenericFunctions.currentDateTime();
    FileUtils.copyFile(scrnsht, new File("D:\\Screenshot1.png"+datetime));
} 
```

但是，当我在我的 WebDriver 脚本中使用截屏方法时，已经创建了一个文件夹，我想用当前日期和时间截屏，请指出我错的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:02:05.820

将“datetime”替换为“cal1”：

```
FileUtils.copyFile(scrnsht, new File("D:\\Screenshot1.png"+datetime)); 
```

或者

尝试这个

```
Calendar calendar = Calendar.getInstance();
SimpleDateFormat formater = new SimpleDateFormat("dd_MM_yyyy_hh_mm_ss");
String destFileName = screenShotPath.getAbsoluteFile()+File.separator+"failure_screenshots_"+formater.format(calendar.getTime())+".png"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:00:26.427

```
public static void screenShot(WebDriver driver) throws IOException {
File scrnsht = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
String datetime = GenericFunctions.currentDateTime();
FileUtils.copyFile(scrnsht, new File("D:\\Screenshot1.png"+datetime)); 
```

}

您的文件只会看起来像 Screenshot1.png，不会在任何地方添加日期时间。取而代之的是，您可以`FileUtils.copyFile(scrnsht, new File("D:\\Screenshot1"+datetime+".png"));`

还建议您可以使用循环而不是使用 1，或者如果情况 1 中的函数已经存在，则添加 2 或类似的东西

# mysql - 使用条件更新 - 重复键更新

> ID：15882475
> 
> 赞同：0
> 
> 时间：2013-04-08T15:00:42.423
> 
> 标签：mysql, sql, insert, sql-update, on-duplicate-key

我有一个名为“RESULT”的下表，我从另一个名为“Temp_main”的表中获取值

“RESULT”中的字段如下所示：

```
StudentName | SujectName | Result
---------------------------------
Adam        | Math       | Fail
Bob         | History    | Pass
Catherine   | Math       | Pass
Dave        | Science    | Fail
Evan        | History    | Pass 
```

这里的主键是`(StudentName,SubjectName)`

我使用以下代码将数据放入表中：

```
insert into result(studentName,subjectName,result)
select StudentName,SubjectName,result
from temp_main 
```

temp_main 表没有相同的主键，所以当我将数据插入结果表时，会有重复的键值。

假设一个学生多次出现在同一科目的考试中。他所有的尝试都在 temp_main 表上，而只有他最好的结果在 Result 表上。

我正在尝试获取一个`ON DUPLICATE KEY UPDATE`代码，当且仅当最新结果为“通过”时更新学生-科目对的结果

我试过

```
 insert into result(studentName,subjectName,result)
    select StudentName,SubjectName,result
    from temp_main
on duplicate key update result = case when temp_main(result) = 'Pass'
Then result(result)='Pass' 
```

我确信这是糟糕的代码。但我找不到更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:10:09.637

您缺少 SQL 的 END

```
INSERT INTO result(studentName,subjectName,result)
SELECT StudentName,SubjectName,result
FROM temp_main
ON DUPLICATE KEY UPDATE result.result = CASE WHEN result.result = 'Pass' THEN 'Pass' ELSE VALUES(result.result) END 
```

# asp.net - 执行具有来自 Sql 服务器作业的 Web 服务任务的 SSIS 包时出错

> ID：15882492
> 
> 赞同：0
> 
> 时间：2013-04-08T15:01:24.173
> 
> 标签：asp.net, web-services, ssis

# 应用程序“默认网站”中的服务器错误

互联网信息服务 7.5

错误摘要

## HTTP 错误 500.24 - 内部服务器错误

### 已检测到不适用于集成托管管道模式的 ASP.NET 设置。

详细的错误信息

# java - 在图形包中获得正确的框架居中

> ID：15882493
> 
> 赞同：0
> 
> 时间：2013-04-08T15:01:24.150
> 
> 标签：java, graphics

所以我无法将框架居中以使我的整个图表都在屏幕上。目前，当我运行我的程序时，坐标系上的 x 值是正确的范围，但我几乎看不到我的图形，因为框架位于图形绘制位置上方数百像素的中心。这是我的代码：

```
public static int startx = 1;
public static int endx = 500;
static Scanner input = new Scanner(System.in);

int WIDTH = 0;  
int HEIGHT = 0;

public GraphSigma(int WIDTH, int HEIGHT) {
    this.WIDTH = WIDTH;
    this.HEIGHT = HEIGHT;
}

// Draw your spiral here!!!
// You'll need to use a FOR loop to calculate the
// points on the spiral

public void paintSigma(Graphics g){

    int prevX=startx;
    int prevY=Sigma.Sigma(startx);
     Graphics2D g2 = (Graphics2D) g;
    g2.translate(0, Sigma.Sigma(endx));
    g2.scale(1,-1);
    if (endx-startx < 50)
        for (int i = startx; i <= endx; i++) {
            int x = i;
            int y = Sigma.Sigma(i);
            g.drawLine(0+prevX, 0+prevY, x, y);
            prevX=x;
            prevY=y;

            };
    if (51 < endx-startx && endx-startx < 300)
        for (int i = startx; i <= endx; i+=2) {
        int x = i;
        int y = Sigma.Sigma(i);
        g.drawLine(0+prevX, 0+prevY, x, y);
        prevX=x;
        prevY=y;

        };
        if (301 < endx-startx  && endx-startx < 1000)
        for (int i = startx; i <= endx; i+=4) {
            int x = i;
            int y = Sigma.Sigma(i);
            g.drawLine(0+prevX, 0+prevY, x, y);
            prevX=x;
            prevY=y;

        };
        if (1000<endx-startx)
            for (int i = startx; i <= endx; i+=10) {
                int x = i;
                int y = Sigma.Sigma(i);
                g.drawLine(0+prevX, 0+prevY, x, y);
                prevX=x;
                prevY=y;

                };

}

// This special method is automatically called when the scene needs to be drawn.
public void paintComponent(Graphics g) {

    paintSigma(g);
}

public static void main(String[] args) {
    // Graphics window size

    int WINDOW_WIDTH = endx-startx+20;
    int WINDOW_HEIGHT = endx;

    JFrame frame = new JFrame();

    frame.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);

    frame.setTitle("Sigma Function");

    GraphSigma d = new GraphSigma(endx-startx+20, Sigma.Sigma(endx));
    frame.add(d);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

}

我调用的 sigma 方法在不同的类中，这里是它的代码： public class Sigma {

```
static Scanner input = new Scanner(System.in);

public static int Sigma(int s){
    int a = 0;
    for(int i=1;i<=s;i++){
        if(s%i==0)
            a = a + i;

    }
    return a;

}
public static void main(String[] args) {
    System.out.println("Please enter the number you want to perform the sigma function on");
    int s = input.nextInt();
    System.out.print(Sigma.Sigma(s) +" is the sum of all the divisors of your input" ); 
    }

} 
```

老实说，我不知道如何正确地将其居中，我是否缺少方法？我一直在弄乱变量，它们似乎并没有改变框架的居中方式。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:34:39.363

首先，让我们清理你的代码，然后我会告诉你哪里出错了。

**西格玛班**

这是我的 Sigma 课程版本。

1）您没有将方法命名为与类名相同的名称。我将您的方法名称更改为 calculateSigma。

2）当您打开扫描仪时，完成后将其关闭。

3）永远不要像你那样在类中定义和打开扫描仪变量。尤其是调用 calculateSigma 方法的次数。

```
import java.util.Scanner;

public class Sigma {

    public static int calculateSigma(int s) {
        int a = 0;
        for (int i = 1; i <= s; i++) {
            if (s % i == 0)
                a = a + i;
        }
        return a;
    }

    public static void main(String[] args) {
        Scanner input   = new Scanner(System.in);
        System.out.println("Please enter the number you want " +
                "to perform the sigma function on");
        int s = input.nextInt();
        System.out.print(Sigma.calculateSigma(s)
                + " is the sum of all the divisors of your input");
        input.close();
    }

} 
```

**GraphSigma 类**

这是我的 GraphSigma 类版本。

**您总是在事件调度线程 (EDT) 上调用 Swing 应用程序。这可以防止出现问题。**

一开始看不到绘图的问题，所以我为drawLine方法添加了一个调试显示方法。这向我表明您正在绘制 (1,1) 和 (497,576) 之间的线。

有了这些信息，我专注于绘图代码中的 translate 和 scale 方法。

translate 方法移动图形的原点。

scale 方法通过将计算的坐标乘以一个因子来将计算的坐标转换为图形坐标，以获得图形坐标。

我为解决这个问题所做的第一件事是更改我用来调用 translate 方法的数字，以将图形的原点移动到 JPanel 的左下角。

我为解决这个问题所做的第二件事是找出比例因子，以便图形适合 JPanel。调试信息让我确信我的比例因子是正确的。

我将调试代码留在了类中，以便您（和其他人）可以看到一种调试 Java 类的方法并自己找出问题所在。

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.util.Scanner;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class GraphSigma extends JPanel {

    public static boolean   DEBUG   = false;

    public static int       startx  = 1;
    public static int       endx    = 500;
    static Scanner          input   = new Scanner(System.in);

    int                     WIDTH   = 0;
    int                     HEIGHT  = 0;

    public GraphSigma(int WIDTH, int HEIGHT) {
        this.WIDTH = WIDTH;
        this.HEIGHT = HEIGHT;
    }

    // Draw your spiral here!!!
    // You'll need to use a FOR loop to calculate the
    // points on the spiral

    public void paintSigma(Graphics g) {

        int prevX = startx;
        int prevY = Sigma.calculateSigma(startx);
        Graphics2D g2 = (Graphics2D) g;
        if (DEBUG) {
            System.out.println("Sigma of endx: " 
                    + Sigma.calculateSigma(endx));
        }
        g2.translate(0, this.getHeight());
        g2.scale(1, -((double) this.getHeight()) / 
                Sigma.calculateSigma(endx));
        if (endx - startx < 50)
            for (int i = startx; i <= endx; i++) {
                int x = i;
                int y = Sigma.calculateSigma(i);
                if (DEBUG) {
                    debugOutput(0 + prevX, 0 + prevY, x, y);
                }
                g.drawLine(0 + prevX, 0 + prevY, x, y);
                prevX = x;
                prevY = y;

            }
        ;
        if (51 < endx - startx && endx - startx < 300)
            for (int i = startx; i <= endx; i += 2) {
                int x = i;
                int y = Sigma.calculateSigma(i);
                if (DEBUG) {
                    debugOutput(0 + prevX, 0 + prevY, x, y);
                }
                g.drawLine(0 + prevX, 0 + prevY, x, y);
                prevX = x;
                prevY = y;

            }
        ;
        if (301 < endx - startx && endx - startx < 1000)
            for (int i = startx; i <= endx; i += 4) {
                int x = i;
                int y = Sigma.calculateSigma(i);
                if (DEBUG) {
                    debugOutput(0 + prevX, 0 + prevY, x, y);
                }
                g.drawLine(0 + prevX, 0 + prevY, x, y);
                prevX = x;
                prevY = y;

            }
        ;
        if (1000 < endx - startx)
            for (int i = startx; i <= endx; i += 10) {
                int x = i;
                int y = Sigma.calculateSigma(i);
                if (DEBUG) {
                    debugOutput(0 + prevX, 0 + prevY, x, y);
                }
                g.drawLine(0 + prevX, 0 + prevY, x, y);
                prevX = x;
                prevY = y;

            }
        ;

    }

    private void debugOutput(int x1, int y1, int x2, int y2) {
        System.out.println("Line drawn from (" + x1 + "," + y1 + ") to (" + x2
                + "," + y2 + ").");
    }

    // This special method is automatically called when the scene needs to be
    // drawn.
    @Override
    public void paintComponent(Graphics g) {
        paintSigma(g);
    }

    public static void main(String[] args) {
        // Graphics window size
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createGUI();
            }
        });
    }

    private static void createGUI() {
        int WINDOW_WIDTH = endx - startx + 20;
        int WINDOW_HEIGHT = endx;

        JFrame frame = new JFrame();

        frame.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);

        frame.setTitle("Sigma Function");

        GraphSigma d = new GraphSigma(endx - startx + 20,
                Sigma.calculateSigma(endx));
        frame.add(d);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

} 
```

# php - 更改 CodeIgniter 加密类中的加密密码和方法，全局更改设置？

> ID：15882496
> 
> 赞同：0
> 
> 时间：2013-04-08T15:01:29.620
> 
> 标签：php, codeigniter, encryption

我在 CodeIgniter 中有以下课程

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
class ZoEncryption {

public $_CI;
public function __construct() {
    $this->_CI = & get_instance();
    $this->_CI->encrypt->set_cipher(MCRYPT_BLOWFISH);
    $this->_CI->encrypt->set_mode(MCRYPT_MODE_CBC);
}
function encode($str, $key) {
    return $this->_CI->encrypt->encode($str, $key);
}
function decode($str, $key) {
    return $this->_CI->encrypt->decode($str, $key);
    }
}

?> 
```

我在我的 ci 应用程序中使用这个库来加密和解密数据库中的用户内容。我正在指定密码和模式，因为我希望在加密/解密中具有特定的逻辑，并且如果此更改的编码将来我不希望出现意外。

此外，我正在使用[password_compat](https://github.com/ircmaxell/password_compat)库以尽早实现 PHP 5.5 的新密码哈希模式。

这个库允许我基于 PHP 的未来构建我的用户密码哈希逻辑。

**如果我没有在构造函数中设置密码和模式并将相关行放在我的基本控制器构造函数中，那么我的密码散列不起作用。**

**具体来说，如果我将以下两行放在 MY_Controller 中，则密码验​​证不起作用。**

以下几行是否会影响全局 CI？

```
$CI->encrypt->set_cipher(MCRYPT_BLOWFISH);

$CI->encrypt->set_mode(MCRYPT_MODE_CBC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:02:44.703

不，它不会更改全局设置。它只会影响直接附加到您定义它的位置的代码。

如果您希望更改是全局的，您将不得不破解核心、[创建库](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)或[覆盖/扩展](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)核心。

# c# - 直接向 BizTalk 或通过 MSMQ 发送消息？

> ID：15882497
> 
> 赞同：4
> 
> 时间：2013-04-08T15:01:35.937
> 
> 标签：c#, wcf, msmq, biztalk, messaging

这是我第一次使用 BizTalk 进行跨机器、异步、可靠的通信。
我想知道有没有办法直接将消息从一台机器发送到 BizTalk 队列，或者我必须使用本地 MSMQ 反过来将消息发送到 BizTalk？

在 C# 中，是否有用于将消息发送到 BizTalk 队列的绑定？
对于 MSMQ，我知道有 NetMsmqBinding。

干杯

**更新：**

由于我引入了一些混乱，我将尝试解释一下，如果我错了，请纠正我。
据我所知，ESB 实现了队列或消息通道的概念，可用于可靠的异步通信（简称消息传递）。现在，我很难将 BizTalk 纳入这个概念。对于 ESB 概念有几十种解释，对于 BizTalk 是否是 ESB（如 Sonic 或 TIBCO）有许多意见。
现在，据我所知，例如在实现 JMS API 的 TIBCO 中，没有队列或排队本地客户端计算机（例如 MSMQ）上的服务，但它们在 TIBCO ESB 上存在并配置，并且从客户端应用程序我使用 JMS API 将消息发送到这些队列。
因此，当我想通过 BizTalk 与不同机器上的应用程序进行通信并且我想使用消息传递时，我将在本地机器上使用 MSMQ，MSMQ 会将这些消息传输到 BizTalk 和下游的其他应用程序？
另外，我应该在哪里配置本地 MSMQ 和 BizTalk 之间的通信？我应该将 BizTalk 配置为侦听给定的 MSMQ 以获取新消息，还是应该在 MSMQ 本身上进行一些配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:15:29.613

BizTalk 通过称为**适配器**的人工制品与外部世界进行通信，它可以通过各种消息传递协议提供对外部世界可见的端点。

有一个 MSMQ 适配器，它似乎能够从本地计算机或远程计算机上的队列中读取和发布。我从来没有使用过它，所以我是从阅读这个适配器上的[文档开始的，并在我进行过程中发现。](http://msdn.microsoft.com/en-us/library/aa561354.aspx)我发现 BizTalk 文档特别难以导航，尤其是现在很多微软链接都没有，特别是 - 找到我提到的这些页面需要一些时间。如果您发现任何不明显的事情，请告诉我，因为我确信有一些有用的资源我从未找到过。

要将 BizTalk 配置为侦听队列：

*   创建单向接收端口
*   创建与该端口关联的单向接收位置
*   将接收位置的传输类型设置为“MSMQ”
*   点击“配置”
*   指定要使用的凭据和队列名称（包括机器名称，这意味着它同样适用于远程队列）
*   根据您的方案适当地设置其他属性

这*应该*就是它的全部了。然后，发布到该队列应该会导致在该端口上接收到一条消息，该端口会立即将其保存到消息框数据库中。您必须使用管道和/或映射进行一些处理才能对消息执行任何有用的操作。

但是，您绝不限于 MSMQ。提供了一个[非常全面的列表](http://msdn.microsoft.com/library/aa578103.aspx)，并且 BizTalk 不会限制您使用任何特定的消息传递协议。您还可以实现具有您需要的任何行为的自定义适配器。为了更有效地回答您的问题，了解您的真正需求是有帮助的 - 例如，客户端应用程序的用例是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:15:17.753

BizTalk 以端口的概念运行 - 接收和发送。这些端口利用许多不同的技术来读取和写入消息，但没有一个是与其他 BizTalk Server 的直接通信。您将需要利用 MSMQ 之类的东西，甚至是基本的 Web 服务 - 这取决于您 - 但您需要在两者之间使用某种通信协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T22:09:40.183

“另外，我应该在哪里配置本地 MSMQ 和 BizTalk 之间的通信？我应该将 BizTalk 配置为侦听给定的 MSMQ 以获取新消息，还是应该在 MSMQ 本身上进行一些配置？”

答：您需要将 BizTalk 配置为以定义的时间间隔轮询相应的队列（可以在 BizTalk 中配置）。在 MSMQ 中，您需要向将在轮询队列时使用的用户帐户授予访问权限。

# javascript - android在主线程（UI线程）上同步执行任务

> ID：15882498
> 
> 赞同：0
> 
> 时间：2013-04-08T15:01:37.153
> 
> 标签：javascript, android, webview

我的问题与这个问题有关： [How to get return value from javascript in webview of android?](https://stackoverflow.com/questions/3298597/how-to-get-return-value-from-javascript-in-webview-of-android)

更准确地说是这个答案： [https ://stackoverflow.com/a/14817248/1816644](https://stackoverflow.com/a/14817248/1816644)

不幸的是，我不允许对该答案发表评论，因此我发布了这个问题。

我想评估一个从 java 调用的 javascript 函数。

常见的解决方案是使用 webView 和 JavaScriptHandler 或 WebChromeClient。

就我而言，我想提供一种方法，可以从任何线程（包括 UI 线程！）调用，它返回 javascript 评估的结果。

这也是作者从这个：[https](https://stackoverflow.com/a/14817248/1816644) ://stackoverflow.com/a/14817248/1816644 试图完成的。

他使用 android.os.Handler 并在其上发布对 javascript 函数的调用。问题是，当从主线程调用此函数时，在调用消息返回后执行对 javascript 函数的发布调用。但是由于我在返回之前等待发布的电话完成，所以这永远不会发生。

# c# - 控制台应用程序等待 keyup

> ID：15882499
> 
> 赞同：3
> 
> 时间：2013-04-08T15:01:40.543
> 
> 标签：c#, console

我目前正在使用 c# 开发 roguelike。世界、玩家等都在控制台内渲染。但是当控制台中的更改太多时，它就会滞后。为了绕过这个，我试图让程序等待播放器取消按下播放器正在按下的键。有人知道如何制作这个吗？糟糕，没有类似的东西`Console.ReadKeyUp()`。

```
while(Console.KeyAvailable){
} 
```

好像不行。。。

这是一段代码：

```
public void move(){
            if(!MainClass.loading){
                switch(Console.ReadKey().Key){
                    case ConsoleKey.NumPad8:
                        //walk up
                        break;
                    case ConsoleKey.NumPad4:
                        //walk left
                        break;
                    case ConsoleKey.NumPad6:
                        //walk right
                        break;
                    case ConsoleKey.NumPad2:
                        //walk down
                        break;
                    case ConsoleKey.NumPad7:
                        //walk left up
                        break;
                    case ConsoleKey.NumPad9:
                        //walk right up
                        break;
                    case ConsoleKey.NumPad1:
                        //walk left down
                        break;
                    case ConsoleKey.NumPad3:
                        //walk right down
                        break;
                    case ConsoleKey.NumPad5:
                        //eat
                        break;
                }

            }

        } 
```

这就是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/nhYOu.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:39:39.547

如果不将此应用程序重构为事件驱动格式（带有消息循环的隐藏窗口等），您最好的选择可能是挖掘 WinAPI 中可用的各种功能。像这样的东西可能会起作用：

```
 [DllImport("user32.dll")]
 [return: MarshalAs(UnmanagedType.Bool)]
 static extern bool GetKeyboardState(byte [] lpKeyState); 
```

您可以使用此函数查询完整的键盘状态 - 它返回一个包含键盘状态的 256 字节数组。有关更多示例， 请参见：[here 。](http://www.pinvoke.net/default.aspx/user32.getkeyboardstate)

例如，您还可以使用`Console.ReadKey()`然后阻塞直到`GetKeyState()`返回相关键的低阶`0`：

```
 [DllImport("user32.dll")]
 static extern short GetKeyState(VirtualKeyStates nVirtKey); 
```

有关更多信息和示例，请参见：[此处。](http://www.pinvoke.net/default.aspx/user32/GetKeyState.html)

MSDN：[GetKeyState](http://msdn.microsoft.com/en-ca/library/windows/desktop/ms646301%28v=vs.85%29.aspx)；[获取键盘状态](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646299%28v=vs.85%29.aspx)

# python - Python 和 Postgres 语言环境货币格式之间的区别

> ID：15882501
> 
> 赞同：1
> 
> 时间：2013-04-08T15:01:52.720
> 
> 标签：python, postgresql, locale, currency

蟒蛇2.6：

```
import locale
locale.setlocale(locale.LC_MONETARY, 'fr_CA.UTF-8')
locale.currency(1.234) # '1,23 $' 
```

Postgres 9.1：

```
set lc_monetary = 'fr_CA.UTF-8';
select 1.234::money; -- '$1,23' 
```

我认为 Python 版本是正确的（虽然不是 100% 肯定），但它们怎么可能不同呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:11:49.690

加拿大有两种货币格式（在这方面它们很可能是独一无二的）。有加拿大英语 (en_CA) 和加拿大法语 (fr_CA)。

以我有限的理解，Python 的格式对于加拿大法语似乎是正确的，而 PostgreSQL 似乎使用的是加拿大英语。

PostgreSQL 中的货币支持完全有可能每个国家只允许一种格式。多年来，它并没有得到太多的关注和关注，大多数人使用数字进行财务计算，然后让客户端代码处理格式。

如果它对您很重要，可能值得发布错误报告（甚至是补丁）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:09:03.607

正如 Tom Lane 在 PG-general 邮件列表中报告的那样，这个问题在 9.2 中得到了修复：

```
Support more locale-specific formatting options for the money
data type (Tom Lane)

Specifically, honor all the POSIX options for ordering of the
value, sign, and currency symbol in monetary output. Also, make
sure that the thousands separator is only inserted to the left
of the decimal point, as required by POSIX. 
```

我在 OSX 上使用 9.2.4 进行了尝试，确实有效。

# ios - 使用 wdsl2objc 调用从 ios 返回 xml 的 Web 服务

> ID：15882502
> 
> 赞同：0
> 
> 时间：2013-04-08T15:01:54.527
> 
> 标签：ios, xml, ios6, wsdl2objc

我正在制作一个应用程序，该应用程序通过使用“登录”并返回 xml“字符串”的 web 服务调用来搜索数据库。

此调用的 wdsl 如下：

```
<s:element name="PerformGlobalSearch">
  <s:complexType>
   <s:sequence>
    <s:element minOccurs="0" maxOccurs="1" name="searchString" type="s:string"/>
    <s:element minOccurs="0" maxOccurs="1" name="username" type="s:string"/>
    <s:element minOccurs="0" maxOccurs="1" name="password" type="s:string"/>
    <s:element minOccurs="1" maxOccurs="1" name="errorCode" type="s:int"/>
    <s:element minOccurs="0" maxOccurs="1" name="errorDescription" type="s:string"/>
   </s:sequence>
  </s:complexType>
</s:element>

<s:element name="PerformGlobalSearchResponse">
  <s:complexType>
    <s:sequence>
     <s:element minOccurs="0" maxOccurs="1" name="PerformGlobalSearchResult">
       <s:complexType mixed="true">
         <s:sequence>
           <s:any/>
         </s:sequence>
       </s:complexType>
     </s:element>
     <s:element minOccurs="1" maxOccurs="1" name="errorCode" type="s:int"/>
     <s:element minOccurs="0" maxOccurs="1" name="errorDescription" type="s:string"/>
   </s:sequence>
 </s:complexType> 
```

我已经使用 wsdl2objc 生成了代码，它似乎工作正常。我只需要知道如何访问返回的 xml。

如果我`NSLog`是“webserviceSvc.m”类中的响应数据，它会打印 xml。但是，它随后返回由 wsdl2objc“PerformeGlobalSearchResponse”生成的对象。我设法在代码中收到了这个，但我似乎无法访问它应该包含的 xml。

```
-(void) processResponse : (WebServiceSoapBindingResponse *)soapResponse {
NSArray *responseBodyParts = soapResponse.bodyParts;

id bodyPart;
@try{
   bodyPart = [responseBodyParts objectAtIndex:0];
}
...

else if([bodyPart isKindOfClass:[xxxWebServiceSvc_PerformeGlobalSearchResponse class]])    {
xxxWebServiceSvc_PerformGlobalSearchResponse* SearchResponse = bodyPart;

NSLog(@"Test: %@", SearchResponse.PerformeGlobalSearchResult);
} 
```

我尝试了很多不同的方法。我需要访问 xml 并且需要解析它。解析我想我在尝试不同的解决方案时已经成功了。

但是我如何访问 xml？如何将 PerformGlobalSearchResult 转换为 xml 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T09:44:08.673

因此，我的问题的解决方案最终是更改生成的 SOAP 代码，使其返回我需要的内容。

原来它是由 WSDL 和 wsdl2objc 设置的，以返回 wearg 变量类型。我改变了它并最终使用 Dictionary 作为返回值，因为这是一个未使用的预定义类型。然后我可以毫不费力地赞美它。

# python - 如何更轻松地将 txt 文件中的值保存到变量中？python line.split

> ID：15882505
> 
> 赞同：0
> 
> 时间：2013-04-08T15:02:09.757
> 
> 标签：python, split

我有一个包含两列的 .txt 文件。如果第一列中的值符合我的条件，那么我想存储第二列的值。这是我迄今为止所拥有的，但将它存储两次似乎很愚蠢。任何更好的方法将不胜感激。

```
file = open(nameoffile.txt, 'r')
for line in file.readlines():
    if (line.startswith("something")):
         value = line.split()
         P_point = value[1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:04:55.583

不太确定“存储两次”，但你的代码最好写成：

```
with open('somefile') as fin:
    points = [line.split()[1] for line in fin if line.startswith('something')] 
```

# c - fmod(x,2) 的有效替代方案

> ID：15882507
> 
> 赞同：0
> 
> 时间：2013-04-08T15:02:18.650
> 
> 标签：c, math

有没有更有效的执行方式：

```
f = fmod(x+1, 2) 
```

确定一个值是否是偶数？

例如

`f = 1`对于所有偶数值`x`

`f = 0`对于所有奇数值`x`

我只需要它来处理一组正整数（我的`x`数据类型是`int`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:03:45.213

你为什么使用`fmod()`整数？

标准测试将是：

```
const int f = (x + 1) % 2; /* Will be 1 if x is even, 0 if it's odd. */ 
```

这使用内置的整数模运算符`%`进行测试。

添加 1 （在我看来）有点令人困惑，我会这样做：

```
const int f = (x % 2) == 0; 
```

“按位思考”的人经常将测试写成：

```
const int f = (x & 1) == 0; 
```

因为必须清除最低有效位才能使整数为偶数。不过，这可以说不太清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T15:04:25.210

假设正整数

```
f = 1 - (x&1); 
```

应该为你工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:04:15.523

我想你可以只转换为 int ......

```
f = (int)x % 2; 
```

# c# - 如何配置 ASP.net 表单身份验证以仅拒绝特定 URL

> ID：15882511
> 
> 赞同：0
> 
> 时间：2013-04-08T15:02:25.010
> 
> 标签：c#, forms-authentication

我有一个网站，其中有一个 admin.aspx 页面。

一旦用户成功登录到 Admin.aspx 页面，他们就会被重定向到 Report.aspx 页面。请注意，必须先成功登录 Admin.aspx 页面，才能访问 Report.aspx 页面。

请记住，还有其他页面，如 index.aspx 等，任何用户无需登录即可查看。我只需要对 Report.aspx 页面进行身份验证。

我有以下代码，但似乎无法正常工作，因为它说虚拟目录有问题。我在做一些根本错误的事情吗？

```
 <location path="Report.aspx">
    <system.web>
        <authentication mode="Forms">
            <forms loginUrl="Login.aspx" >
                <credentials passwordFormat="Clear">
                    <user name="John" password="pass@432"/>
                </credentials>
            </forms>
        </authentication>
        <authorization>
            <deny users="*" />
        </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:06:41.513

要在成功登录后重定向用户，请使用 DestinationPageUrl 属性。

```
<%@ Page Language="C#" autoEventWireup="false" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">
        void PageLoad(Object sender, EventArgs e)
        {
            Login1.DestinationPageUrl = 
                String.Format("terms.aspx?{0}", Request.QueryString.ToString());
        }
</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
    <head runat="server">
    <title>ASP.NET Example</title>
</head>
<body>
        <form id="form1" runat="server">
            <asp:Login id="Login1" runat="server" 
                DestinationPageUrl="terms.aspx">
            </asp:Login>
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:47:11.503

在**web.config**文件中：

```
<location path="Default.aspx">
    <system.web>
        <authorization>
            <allow roles="Administrator, User, AdditionalUser" />
        </authorization>
    </system.web>
</location> 
```

[ASP.NET Forms Auth允许访问子目录中的特定文件，当所有其他文件都应该被拒绝时](https://stackoverflow.com/questions/3938891/asp-net-forms-auth-allowing-access-to-specific-file-in-subdirectory-when-all-oth)

[http://weblogs.asp.net/gurusakar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T22:57:18.070

首先，您似乎不允许您的用户`John`。您可能还想尝试将身份验证部分从配置文件的特定位置部分中提取出来：

```
<configuration>
  <system.web>
    <authentication mode="Forms">
      <forms loginUrl="Login.aspx" defaultUrl="Report.aspx">
        <credentials passwordFormat="Clear">
          <user name="John" password="pass@432"/>
        </credentials>
      </forms>
    </authentication>
  </system.web>

  <location path="Report.aspx">
    <system.web>
      <authorization>
        <allow users="John"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location>
</configuration> 
```

# google-chrome - 如何将已发布的旧版打包应用转换/更新为新版本的打包应用？

> ID：15882513
> 
> 赞同：0
> 
> 时间：2013-04-08T15:02:27.673
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

几年前我发布了一个打包的应用程序。现在，Google 引入了一个新的打包应用程序概念，所有已发布的打包应用程序都被视为旧版应用程序。

我已经使我的应用程序与新概念保持一致，但是当我尝试将应用程序发布到 Chrome 商店时，它总是失败：

```
 An error occurred: Item type may not be changed after initial upload. 
```

有没有办法在新概念上转换/更新现有的打包应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T23:03:07.903

目前没有办法改变类型。请注意，尚未在商店中发现新样式的打包应用程序。当这种变化并且最终用户能够浏览新样式的打包应用程序时，还将有一个用于将旧应用程序类型更新为新类型的工具。敬请关注！

**2013 年 5 月 7 日更新**：现在可以通过应用启动器安装和启动应用的用户（开发频道上的 Windows 和 ChromeOS 用户）可以发现应用。类型切换功能尚不可用，但这实际上是一种理想的情况，因为将流行的应用程序切换到非旧版应用程序类型会立即降低其对较小用户集的可见性。

# eclipse - 为什么 JBOSS 流口水插件在 Helios 中不起作用？

> ID：15882517
> 
> 赞同：0
> 
> 时间：2013-04-08T15:02:51.250
> 
> 标签：eclipse, drools, helios

我在 Helios for linux 机器上安装了 drools 插件。安装后提示显示为，

```
An error has occurred.see error log for more details,
org/eclipse/ui/part/FileEditorInput 
```

我已参考此[链接](https://stackoverflow.com/questions/11273309/how-to-install-drools-plugin-in-eclipse-indigo-ide)进行安装。

Drools 插件在 helios 中不起作用？

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:52:31.937

不知道你做了什么，但我刚刚下载了 Eclipse Helios 3.6 RC4，适用于 Java 开发人员的 Eclipse IDE，然后从更新站点安装：http: [//download.jboss.org/drools/release/5.5.0.Final/ org.drools.updatesite/](http://download.jboss.org/drools/release/5.5.0.Final/org.drools.updatesite/)

在安装结束时重新启动 Eclipse 后，我可以毫无问题地打开 Drools 和 jBPM 透视图。

不过，我也建议使用更新版本的 Eclipse。

克里斯

# c - 链表分段错误a

> ID：15882520
> 
> 赞同：0
> 
> 时间：2013-04-08T15:02:55.100
> 
> 标签：c

在我说大约 500 个条目之后，这个链表代码段错误。

```
while (item_temp->next != 0) { 
```

在循环内部，它所做的只是转到链表中的下一项。

当我在 gdb 中查看它时，这就是我得到的

```
(gdb) print item_temp
$1 = (struct item *) 0xc
(gdb) print item_temp->next
Cannot access memory at address 0xc 
```

编辑：

我这样分配它：

```
struct item* item_temp = malloc(sizeof(struct item)); 
```

然后在循环之前我将它设置为等于链表的头部，就像这样

```
 item_temp = table->buckets[code]->head; 
```

只是为了让它知道，在我尝试引用头部之前，我确保头部存在。我就是这样做的。

```
if (table->buckets[code]->head == 0)
{
    table->buckets[code]->head = item_add;
    table->occupied_buckets++;
} 
```

这是我的代码示例...如果您需要其他内容，请询问。

```
struct HT* add(struct HT* table, struct word *wrd, int(*alg)(struct word *wrd)) 
{
if ((double)table->entries / (double)table->num_buckets > .75)
{
    table = resize(table, alg);
}   
sort(wrd);
int code = alg(wrd);
code = code % table->num_buckets;
struct item* item_temp = malloc(sizeof(struct item));
struct item* item_add = malloc(sizeof(struct item));
item_add->wrd = wrd;
item_add->next = 0; 
if (table->buckets[code]->head == 0)
{
    table->buckets[code]->head = item_add;
    table->occupied_buckets++;
}
else
{
    item_temp = table->buckets[code]->head;
    while (item_temp->next != 0) {
        item_temp = item_temp->next;
    }
    item_temp->next = item_add;
}
table->buckets[code]->num_items++;
table->entries++;
if (table->buckets[code]->num_items > table->largest_bucket)
{
    table->largest_bucket = table->buckets[code]->num_items;
}
return table;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:05:40.097

从您的问题来看，很明显，`item_temp`指向位置`0xc`和取消引用`next`会导致代码访问无效地址，从而导致分段错误。

`item_temp = table->buckets[code]->head;`正在评估为`0xc`。

# ios - 如何在不使用 UIImagePickerController 的情况下使用内置 iOS 相机

> ID：15882521
> 
> 赞同：8
> 
> 时间：2013-04-08T15:02:56.387
> 
> 标签：ios, objective-c, user-interface, camera, uiimagepickercontroller

我想在我的应用程序中创建自己的拍照 UI。这可能吗？我已经看到很多应用程序（其他相机应用程序）使用此功能，它们具有自定义 UI，并且在您拍照后它不会询问您是否要重新拍摄照片。如果它不翻转用前置摄像头拍摄的照片，那就太好了。那么我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T15:10:41.997

你应该使用[AVFoundation](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html)

试试这个代码[GLCamerRipple](https://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011222)

这也是[SquareCam](https://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011190)

基本上，您需要创建一个实现[AVCaptureVideoDataOutputSampleBufferDelegate 协议](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutputSampleBufferDelegate_Protocol/Reference/Reference.html)的类并启动与相机的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T19:28:22.620

这也是一个不错的选择：[https ://github.com/piemonte/PBJVision](https://github.com/piemonte/PBJVision)

或者，如果您想要更多控制权，您可以使用 Janub 提到的 AVFoundation

# javascript - ExtJS4 时间轴上的标签

> ID：15882523
> 
> 赞同：2
> 
> 时间：2013-04-08T15:03:00.733
> 
> 标签：javascript, extjs, extjs4, date-formatting, extjs-chart

我有一个底部时间轴，定义如下：

```
{
  "title":"Date",
  "description":"",
  "position":"bottom",
  "type":"Time",
  "fields":["date"],
  "dateFormat":"d.m.Y"
} 
```

但所有标签都是“NaN.NaN.0NaN”

当我查看商店时，日期字段是具有正确值的普通 Date 对象。但是当我查看 Axis 的 drawLabel 函数时，`me.labels`没有对象，所以什么都没有绘制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:49:04.263

我有一个时间轴的渲染器：

```
getDateRenderer: function(v) {
    return Ext.util.Format.date(v, 'd.m.Y');
} 
```

并在这里设置它：

```
this.chart.axes.items[2].label.renderer = this.getDateRenderer; 
```

# php - 如何使用max函数比较两个字符串

> ID：15882524
> 
> 赞同：-3
> 
> 时间：2013-04-08T15:03:06.617
> 
> 标签：php

伙计们如何使这两个字符串 00 和 00.00 能够使用 max() 进行比较。当我这样做时，他们似乎受到平等对待

```
max($thearraythatcontaintsthem); 
```

我想要实现的是当我做 max(); 将输出 00.00。

怎么做？或任何想法即使不使用 max() 函数如何输出 00.00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:28:18.680

远足，

尝试这样的事情：

```
$m0 = '00.00';
$maxnr = max('00', 0, '00.00');
if($maxnr > $m0) $m0 = $maxnr;
echo $m0;       // 00.00 
```

# jquery - json数据未在python中使用jquery加载

> ID：15882525
> 
> 赞同：2
> 
> 时间：2013-04-08T15:03:10.160
> 
> 标签：jquery, python, django, json, parsing

jquery 正在完美加载，但未加载 json 数据。我也没有收到任何错误。

脚本是

```
$("#loadjson").click(function(){
$.getJSON('filename.json', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val + '</li>');
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
});
}); 
```

json文件是

```
{
  "name": "samsung",
  "product": "led tv",
  "rate": "23,000"
} 
```

模板是

```
<head>
<ul></ul>
<button>loadjson</button>
{% block js-custom %}
{% load static %}
<script src="{{ STATIC_URL }}scripts/jquery-1.9.1.min.js"></script>
<script src="{{ STATIC_URL }}scripts/modernizr-2.0.6.min.js"></script>
<script src="{{ STATIC_URL }}scripts/myscript.js"></script>
{% endblock %}
</head> 
```

这是在屏幕上显示名称、产品和费率。

脚本正在正确加载，我也没有收到错误消息。但我没有收到 o/p。我认为 jon 文件没有加载。请帮助我执行此操作。

如果必须进行任何更改才能使用此代码，请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:38:10.480

你的 HTML 都搞砸了。你把所有东西都塞进了`<head>`，而且你的上面没有 ID，`<button>`所以你的点击处理程序永远不会被设置。也没有文档类型，没有`<html>`元素，也没有`<title>`元素。首先，试试这个：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    {% block js-custom %}
    {% load static %}
    <script src="{{ STATIC_URL }}scripts/jquery-1.9.1.min.js"></script>
    <script src="{{ STATIC_URL }}scripts/modernizr-2.0.6.min.js"></script>
    <script src="{{ STATIC_URL }}scripts/myscript.js"></script>
    {% endblock %}
</head>
<body>
    <button id="loadjson">Load JSON</button>
</body>
</html> 
```

*另一个提示：您可能试图通过同时处理 Python 代码和*HTML/JavaScript来一次性解决太多问题。如果我这样做，我会从使用静态 HTML、JavaScript 和 JSON 文件开始。没有 Python，只有静态文件，您可以直接编辑，查看其中的确切内容，并使用浏览器的开发人员工具进行调试。（我最喜欢的是 Chrome，或者您可以将 Firefox 与 Firebug 或最新版本的 IE 中的内置开发人员工具一起使用。）

此外，在测试时使用 jQuery 和 Modernizr 的非缩小版本。这样，您将看到有意义的代码和堆栈跟踪。

[并使用W3C Validator](http://validator.w3.org/)验证您的 HTML 。

在你让它处理静态文件之后，然后让你的 Python 代码生成相同的内容。这比试图同时找出双方更容易。

再想一想，如果您是 Python 专家，而唯一真正的麻烦是 HTML/JavaScript 方面，那么静态文件的想法可能并不那么重要。但至少您应该使用查看源代码和开发工具查看浏览器中的内容，因为这就是浏览器所看到的全部内容。它根本看不到您的 Python 代码，只有从中生成的代码。

顺便说一句，这是[对 Chrome DevTools 的精彩介绍](https://developers.google.com/chrome-developer-tools/)。还可以阅读[Mozilla Developer Network (MDN)](https://developer.mozilla.org/)上的优秀文档。事实上，当您在 Google 上查找任何与 HTML/CSS/JS 相关的项目时，将“mdn”添加到您的搜索以确保它为您找到 MDN 文档很有用，因为它们通常是最好的——任何主题的高质量文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:09:41.033

使用`append()`或`html()`附加`li`到创建`ul` 试试这个

```
$('<ul/>', {
'class': 'my-new-list'
}).html(items.join('')).appendTo('body'); 
```

# c - 程序退出时是否释放堆？

> ID：15882531
> 
> 赞同：13
> 
> 时间：2013-04-08T15:03:20.430
> 
> 标签：c

假设我将一些内存分配到一些指针中，但在程序退出之前不释放它们。此内存是否会在退出时自动释放，或者内存泄漏是否会继续存在，直到我重新启动计算机？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T15:11:44.640

答案是，大多数时候。

释放堆是操作系统的责任。虽然大多数操作系统（尤其是主流操作系统）在退出时都会释放堆，但对于嵌入式系统操作系统来说并不一定如此。

当您要求在堆上分配内存时，会对操作系统的内核空间进行系统调用以提供此内存。此内存映射到由操作系统维护的进程结构。当您的程序退出时，操作系统会进行清理路由，关闭所有文件描述符，并将此内存标记为空闲以分配给其他进程（除其他外）。

其中一些答案说它依赖于编译器是不正确的。编译器不会说“嘿，在程序退出时释放所有这些内存”。那没有意义，如果操作系统意外终止程序会发生什么？不，编译器负责在显式请求堆的内存分配/释放时生成*系统调用。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T15:05:48.010

内存不会被您的程序或 libc 释放，但会被所有现代操作系统上的操作系统释放。它们将内存分配给特定进程，并在进程终止时清理内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:05:09.583

任何现代桌面操作系统都会在进程退出时回收资源。不会有内存泄漏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T15:05:59.523

这取决于您使用的操作系统。显然，任何现代桌面操作系统都设计为在程序退出时在您之后清除（如有必要）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T15:06:13.117

如果您查看 C 标准，它是特定于实现的，因此您无法确定。

但是大多数操作系统会在进程终止后释放内存，但在某些更小/更简单的平台上可能并非如此。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-08T15:06:14.367

那不是交流问题。堆的实现方式取决于编译器以及程序退出后操作系统的作用。据我所知，当程序退出时，所有现代操作系统都会释放内存资源。在某些嵌入式系统或驱动程序上可能不是这样。

# plone - Plone 4.2 用户管理 - 成员查看其他用户创建的内部草稿

> ID：15882533
> 
> 赞同：0
> 
> 时间：2013-04-08T15:03:25.873
> 
> 标签：plone, plone-4.x

## 概述

我需要能够使用一个角色，就像你使用一个团队一样。我的意思如下：

我们有一个客户有一个网站，人们可以自由地在上面注册。该站点设置为 Intranet/Extranet 工作流。当用户注册时，他们可以看到内部发布的文档，但看不到内部草稿文档。该站点的管理员一旦与所述用户进行了通信，就可以“在他们的名字旁边打勾，以表明他们是‘受信任的’”。

我需要能够访问 mysite.com/plone_control_panel，选择`Users and Groups`，点击“显示全部”并在角色旁边，有另一个我可以勾选的自定义角色，这将使用户能够访问我网站上的特定文件夹.

## 研究

我一直在做很多谷歌搜索，从我所看到的情况来看，这是可能的，有趣的是，我大约一年前在另一个网站上的 Plone 3.2.1 上尝试过这个并且效果很好。问题是我似乎无法在我的新 Plone 4 站点上复制它（我的文档似乎已经丢失）。

## 我做了什么

*   在 mysite.com/plone_control_panel 中的“用户和组”下创建一个名为“受信任的用户”的组。
*   在 mysite.com/manage_main（安全选项卡）下创建自定义角色（称为“TrustedRole”）
*   使用 mysite.com/acl_users/portal_role_manager 将“Trusted Users”组添加到我的“TrustedRole”角色。
*   现在在 mysite.com/acl_users/portal_role_manager 下，我可以勾选复选框，以便将某些特权授予“TrustedRole”角色。

**注意：**我添加了“TrustedRole”角色，因为在查看 plone_control_panel 下的用户和组时，它会显示为其他角色旁边的选项。

这是我在没有旧文档的情况下所能得到的，而且我已经碰壁了。似乎无论我为“TrustedRole”角色赋予何种权限组合，我都无法让他们仅仅**查看**内部草稿文档。我试过勾选每一个框，确实可以，但他们可以添加、删除等。

目前在 portal_role_manager 下，我为我的“TrustedRole”勾选了以下权限：

*   访问内容信息
*   允许发送到
*   看法

我可以通过在“共享”选项卡下分配我的组（“受信任的用户”）来“查看”相关文档，但这并不理想，因为经理希望能够简单地勾选旁边的框plone_control_panel 的“用户和组”部分下的每个用户都可以访问。（他不想进入组并单独分配用户）。目前大约有 200 名用户，他们经常离开并重新加入。因此，我们正在努力减少保持网站运行的开销。

如果有人对我可以勾选哪些权限以让“TrustedRole”查看内部草稿文件有任何想法，我将不胜感激。

**注意**我还尝试为我的“TrustedRole”角色提供与“站点管理员”相同的权限，然后通过消除过程并取消勾选权限以使其降至最低限度，这也让我失败了，我担心我有错过了我丢失的文档将包含的一些重要步骤。

我感觉只有所有者才能查看他们创建的设置为内部草稿的内容。对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:48:36.723

我认为您正确地添加了您的组和角色，尽管当它们具有相同的名称时将它们分开是非常棘手的，因为角色和组*不*一样，而且无论如何对我来说，很容易混淆两者。您可能会考虑将工作流中已经存在的角色分配给您的组，例如“成员”。

如果您尚未自定义工作流，则内部草稿的默认描述应为“对所有 Intranet 用户可见，所有者可编辑”。在 ZMI 中，在 Intranet/Extranet 工作流程中以及在状态 Internal Draft 下，具有权限的默认角色（在 Permissions 选项卡下）是 Editor、Manager 和 Site Admin。根据您的描述，您的角色 TrustedRole 应该在此处列出。您是否同时检查了“查看”和“访问内容信息”？

您说您已经在站点根目录 (yoursite.com/manage_access) 的“安全”选项卡中选中了“查看”。你有“获得”吗？选中“查看”旁边的框？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:35:38.283

幸运的是，我记得（经过一番折腾）如何做到这一点，我列出了以下步骤：

## 这会做什么

我们将创建的角色有权查看特定状态的项目。这意味着，如果您有人管理具有大量用户的站点，并且他们希望为某些用户“批量授予访问权限”以查看具有特定状态的项目。

## 如何

在 plone_control_panel 中创建一个新组，名为*任何你想要*的。

转到**ZMI**中的**portal_workflows**，复制并粘贴工作流，然后在**plone_control_panel**下的“**类型**”标题下，将站点工作流更新为新的。

 ******转到**ZMI**并选择“**安全**”选项卡。

在底部键入您想要的自定义角色的名称，然后点击“**添加角色**”。

根据您的工作流程，您可能需要删除大部分“**成员**”权限（人员的默认组）。- **（这是针对我的用例的，如果需要，请避免此步骤）**

勾选为您的新角色提供所需权限的框，目前我发现以下工作（尽管随着要求的变化，这些会因站点而异）：

*   访问内容信息
*   访问非活动门户内容
*   允许发送到
*   列出门户成员
*   列出可撤消的更改
*   管理属性
*   设置自己的密码
*   看法
*   查看组

**更新这些设置（以及任何其他有关工作流的设置）后，您需要转到 portal_workflow/manage_selectWorkflows 并按底部的“更新安全设置”。**

然后转到**acl_users/portal_role_manager**并选择您创建的角色，然后**分配**您的组（之前在**plone_control_panel**下创建的组）。

转到**portal_workflow/manage_selectWorkflows**，选择“**内容**”选项卡，选择您想要的自定义工作流程并点击“**状态**”。

单击您希望角色能够看到的状态，然后选择“**权限**”选项卡。

为该状态的自定义角色添加必要的权限。

保存这些内容后，请记住如上所述的“**更新安全设置”以应用它们。**

如果您有任何问题或发现任何不正确的地方，请在下面发表评论，我会修改这篇文章。******

# php - PHP日历多年

> ID：15882535
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:03:43.197
> 
> 标签：php

1 你好这个代码只会显示用户打开日历的当前日期的年+1，但是我需要什么代码才能拥有年+2，年+3...日历？请指定是否还需要父文件和子文件的代码

```
<?php
include ("access.php");
include ("header.php");
include("../includes/conf.class.php");
include("../includes/admin.class.php");

date_default_timezone_set($bsiCore->config['conf_hotel_timezone']);    

$monthNames = array(
    "January"   => 1, 
    "February"  => 2, 
    "March"     => 3, 
    "April"     => 4,
    "May"       => 5,     
    "June"      => 6, 
    "July"      => 7, 
    "August"    => 8, 
    "September" => 9, 
    "October"   => 10,
    "November"  => 11, 
    "December"  => 12
);

if (!isset($_REQUEST["year"])) $_REQUEST["year"] = 2012;

$time          = time();
$today         = date("Y/n/j", $time);
$current_month = date("n", $time);
$current_year  = date("Y", $time);
$cMonth        = 1;
$cYear         = $_REQUEST["year"];
$prev_year     = $cYear;
$next_year     = $cYear;
$prev_month    = $cMonth-1;
$next_month    = $cMonth+1;

if ($prev_month == 0 ) {
    $prev_month = 12;
    $prev_year = $cYear - 1;
}
if ($next_month == 13 ) {
    $next_month = 1;
    $next_year = $cYear + 1;
}
?>
   <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
    $('#year').change(function(){
            window.location = 'calendar_view.php?year='+$('#year').val();
        }); 

        $('#roomtype').change(function(){
            if($('#roomtype').val() != 0){
                capacityConmboShow();
            $('#submitButton').show();
            }else{
                $('#submitButton').hide(); 
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:11:38.000

请参阅 PHP 函数`strtotime` [http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)。它可以为您完成所有计算。

```
<?php
echo strtotime("now"), "\n";
echo strtotime("10 September 2000"), "\n";
echo strtotime("+1 day"), "\n";
echo strtotime("+1 week"), "\n";
echo strtotime("+1 week 2 days 4 hours 2 seconds"), "\n";
echo strtotime("next Thursday"), "\n";
echo strtotime("last Monday"), "\n";
?> 
```

# c# - 使用 c# 将 MS Access 表数据添加到 SQL Server 表中

> ID：15882539
> 
> 赞同：0
> 
> 时间：2013-04-08T15:03:45.280
> 
> 标签：c#, sql-server, winforms, ms-access

我有一个带有`Number`表格的 MS Access 文件。我还有一个带有`profile`表的 SQL Server 数据库。

如何将`number`表中的数据导入`profile`表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:16:04.983

它会是这样的：

```
 const string connectionString = "YOUR ACCESS CONNECTION STRING";
    const string connectionStringDest = "YOUR SQL SERVER CONNECTION STRING";
    using (var sourceConnection =
          new OleDbConnection(connectionString))
    {
        sourceConnection.Open();

        var commandSourceData = new OleDbCommand(
            "SELECT COL1, COL2 FROM TABLE_X;", sourceConnection);
        var reader =
            commandSourceData.ExecuteReader();

        using (var destinationConnection =
                   new SqlConnection(connectionStringDest))
        {
            destinationConnection.Open();

            using (var bulkCopy =
                       new SqlBulkCopy(destinationConnection))
            {
                bulkCopy.DestinationTableName =
                    "dbo.TABLE_DEST";

                try
                {
                    bulkCopy.WriteToServer(reader);
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
                finally
                {
                    reader.Close();
                }
            }
        }
    } 
```

# android - 在android中获取信号强度列表

> ID：15882542
> 
> 赞同：0
> 
> 时间：2013-04-08T15:03:48.303
> 
> 标签：android, android-wifi, gsm, 3g, signal-strength

我正在尝试获取 android 设备中的信号强度列表（蜂窝和 wifi）。我是否使用信号强度类来实现这一点？[http://developer.android.com/reference/android/telephony/SignalStrength.html](http://developer.android.com/reference/android/telephony/SignalStrength.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:13:35.803

对于 WiFi，您需要使用[WifiManager 类](http://developer.android.com/reference/android/net/wifi/WifiManager.html)并调用[getScanResults()](http://developer.android.com/reference/android/net/wifi/WifiManager.html#getScanResults%28%29)函数。

对于蜂窝网络，您需要创建一个[PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)并处理[onSignalSengthChanged](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#onSignalStrengthChanged%28int%29)事件。

# html - XSL 中的变量

> ID：15882546
> 
> 赞同：0
> 
> 时间：2013-04-08T15:03:53.677
> 
> 标签：html, xml, xslt

我对 XSL 有点陌生，但遇到了一些问题。根据我的研究，`<xsl:variable>`如果在顶层声明 XSL 变量是全局的，如果在模板中声明是局部的，并且您不能更改值。那么这是否意味着没有办法声明一个全局变量然后在模板中更改它的值？

我有以下情况，我正在遍历一个结果集，我有一些看起来像这样的东西：

```
<xsl:for-each select="NewDataSet/Table1">
 <xsl:if test="position()= 1">
  <xsl:value-of select="SchoolName"/>
 </xsl:if>

 <xsl:if test="position()= 2">
  <xsl:value-of select="gender"/>
 </xsl:if>

 <xsl:if test="position() = last()">
  <div onclick="showTallyBySchool(,'{SchoolName}','{gender}')">
   <xsl:value-of select="node()"/>
  </div>
 </xsl:if>
</xsl:for-each> 
```

如您所见，在迭代期间，我需要第三个“if”中的“gender”和“schoolname”的值。如果我无法存储它们，我将如何访问它们？

编辑：修正了一些错别字，如果有帮助，这里是 XML 的摘录：

```
<NewDataSet>
 <Table1> 
  <SchoolName>Unknown School</SchoolName>  
  <Gender>Male</Gender> 
  <PS>0</PS> 
  <PK>0</PK> 
  <K>0</K> 
 </Table1>
</NewDataSet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:17:05.983

您*相*对于当前节点访问它们。

我认为您已经对 XML 的结构感到困惑。例如，您`SchoolName`从*除第一个之外的所有* `Table1`选项中进行选择。但是代码会像这样。

```
<xsl:for-each select="NewDataSet/Table1[last()]">

  <xsl:variable name="school_name" select="../Table1[1]/SchoolName"/>
  <xsl:variable name="gender" select="../Table1[2]/gender"/>

  <div onclick="showTallyBySchool(,'{$school_name}',{$gender})">
    <xsl:value-of select="node()"/>
  </div>

</xsl:for-each> 
```

请显示您的目标 XML 数据。我确信有更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:19:21.980

首先，您是正确的，XSL 中的“变量”在分配后无法更改。它只是关于转换执行的“变量”（即，对于不同的输入，它可以以不同的值结束），但在转换中它不是“变量”。

其次，从您的示例中看起来您仍在考虑命令式代码。你没有给出足够的细节来准确地说，但听起来你有一个用于 SQL 类型表的 XML 文档，其中

```
SchoolName is in column 1
Gender is in column 2 
```

看起来您在`Table1`元素本身中拥有数据，而不是在其中的`Row`元素中。

一种更惯用的写法是

```
<!-- tells what to do at the top level -->
<xsl:template match="/NewDataSet">
    <!-- This means, process child elements according to the templates I define -->
    <xsl:apply-templates/>
</xsl:template>

<xsl:template match="Table1">
    <!-- You should use the exact element names if they are known, couldn't tell from example -->
    <xsl:variable name="SchoolName" select="*[1]"/>
    <xsl:variable name="Gender"     select="*[2]"/>

    <div onclick="showTallyBySchool(,'{$SchoolName}',{$Gender})">
       <!-- it's not clear what you want here, but it's probably not this -->
       <xsl:value-of select="node()"/>
    </div>

</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:12:05.877

> 如果在顶层声明 XSL 变量是全局的，如果在模板中声明是局部的，

不，XSL 变量的范围非常严格，只限于包含它的 XSLT 元素。如果你在一个内部声明它`<xsl:if>`，它在相应的之后将不可用`</xsl:if>`。

> 并且您无法更改该值。

没错，所有 XSLT 变量都是不可变的。

> 那么这是否意味着没有办法声明一个全局变量然后在模板中更改它的值？

正确，您永远不需要这样做。作为一般规则：如果您发现自己试图更改 XSLT 中的变量值，那么您解决问题的方法是错误的。

* * *

> 如您所见，在迭代期间，我需要第三个“if”中的“gender”和“schoolname”的值。如果我无法存储它们，我将如何访问它们？

使用您的 XML...

```
<NewDataSet>
  <Table1> 
    <SchoolName>Unknown School</SchoolName>  
    <Gender>Male</Gender> 
    <PS>0</PS> 
    <PK>0</PK> 
    <K>0</K> 
  </Table1>
</NewDataSet> 
```

...解决方案非常简单。你根本不需要任何变量。只需访问 XML 节点`<SchoolName>`并`<Gender>`直接：

```
<xsl:template match="NewDataSet">
  <xsl:apply-templates select="Table1" />
</xsl:template>

<xsl:template match="Table1">
  <div>
    <xsl:value-of select="SchoolName" />
  </div>
  <div>
    <xsl:value-of select="Gender" />
  </div>
  <div onclick="showTallyBySchool('{SchoolName}', {Gender})">
    <xsl:text>Show Tally</xsl:text>
  </div>
</xsl:template> 
```

虽然通常我建议不要混合使用 HMTL 和 JavaScript，*尤其是*不要使用 XSLT 生成 JavaScript。这只会变得丑陋。

想象一个`<SchoolName>`包含单引号的 a。通过上述设置，您已经破坏了事件处理程序。

另外，使用像这样的内联事件处理程序`onclick`违反了关注点分离的原则（在这种情况下是标记和页面逻辑），会产生丑陋的 HTML，这意味着在这种情况下，当您真正想要修复错误时，您需要更改 XSLT 文件在你的 JavaScript 中。它可能还有其他含义，例如与现代 JS 框架不兼容（甚至是内存泄漏，尽管现在这种情况不太常见）——简而言之，它通常不受欢迎。最好将所有 JavaScript 保存在一个单独的文件中。

# javascript - 使用 data-template-name 命名 Ember.js 模板

> ID：15882548
> 
> 赞同：9
> 
> 时间：2013-04-08T15:03:57.737
> 
> 标签：javascript, ember.js, handlebars.js

我注意到 Ember.js 文档解释了命名模板的方法是将`<script>`标签的`data-template-name`值设置为模板的名称。但在 Tom Dale 在 Ember.js 文档站点上的最新截屏视频中，他使用 id 命名模板。我认为它们都是在 Ember 中命名模板的有效方法。为什么要`data-template-name`与 ids 相对应地使用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T16:11:08.130

虽然两者都有效，但 using`data-template-name`让您可以自由使用不会与模板名称冲突的元素 ID。

# c - 使用带有套接字的 C 中的 I/O 接收来自服务器的响应

> ID：15882550
> 
> 赞同：2
> 
> 时间：2013-04-08T15:03:59.870
> 
> 标签：c, sockets, get, fgets, recv

我正在尝试使用套接字制作一个简单的 Web 客户端。我向网页发送 GET 请求并希望接收 HTML 文件。我知道我可以使用 接收`recv()`，但我想使用`FILE`. 我`fdopen`用来将套接字包装在`FILE`. 现在我可以用它`fgetc()`来阅读响应。然而，`fgets()`失败了——也许我用错了。有什么方法可以轻松地逐行读取 HTTP 响应？

这有效：

```
FILE *input = fdopen(mySocket, "r");

while(!feof(input))
{
   printf("%c", fgetc(input));
} 
```

我需要这些方面的东西：

```
FILE *input = fdopen(mySocket, "r");
char c[2000];
while(fgets(c, sizeof(c), input) != NULL)
{
   printf("%s\n", c);
} 
```

如果有其他方便的方式阅读回复，请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:47:08.273

我刚刚添加了错误检查，它现在可以工作了。输入确实为 NULL，因为我的请求从未通过。谢谢！

```
FILE *input= fdopen(mySocket, "r");
if(input== NULL)
{
printf("Error");
    exit 1;
}

char c[2000];
while(fgets(c, sizeof(c), input) != NULL)
{
    printf("%s\n", c);
} 
```

# c++ - 用于 C++ 的 SVG 库，用于创建交互式 svg 文件

> ID：15882551
> 
> 赞同：1
> 
> 时间：2013-04-08T15:04:02.007
> 
> 标签：c++, scripting, svg, libraries, interactive

是否有一个简单的库可用于使用 C++ 创建交互式 svg？我找到了这个：[simple-svg](https://code.google.com/p/simple-svg/)，但我无法向元素添加`<script>`标签或标签。`<set>`在 Python 中，我已成功使用[SVGFig](https://code.google.com/p/svgfig/)，但我是 C++ 的初学者，因此将不胜感激。

例如，我需要能够创建这样的东西（使用`xlink:href`对我来说非常重要）：

```
<script type="text/ecmascript">  ... function SetTooltip(Id) ... </script>
<text id="tooltip" font-size="3" visibility="hidden" y="5" x="75" fill="black"> </text>
<defs>
    <g id="groupOne"> ... some elements ... </g>
    <g id="groupTwo"> ... some elements ... </g>
</defs>
<use id="gid" xlink:href="#groupOne" y="10" x="20" onmouseover="SetTooltip("gid")">
    <set attributeName="opacity" from="1" to="0.5"  begin="mouseover" end="mouseout"/>
    <set xlink:href="#tooltip" attributeName="visibility" from="hidden" to="visible" begin="gid.mouseover" end="gid.mouseout" />
</use> 
```

# scala - 将图像添加到 Scalatest HtmlReporter

> ID：15882562
> 
> 赞同：1
> 
> 时间：2013-04-08T15:04:25.687
> 
> 标签：scala, selenium, webdriver, scalatest

我正在用 Scalatest 编写一些硒测试并捕获一些屏幕截图。我希望这些屏幕截图出现在 scalatest html 报告中，但我能做的最好的事情是使用告密者添加转义字符串。这种转义意味着我不能在报告中添加标签。为了我的目的，我是否必须重新编写 HtmlReporter 类，还是有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:31:38.410

我认为你应该使用'markup'而不是'info'，'markup'不会被转义并且可以用于标记。下面展示了一个在 HtmlReporter 中显示捕获图片的示例：-

```
go to ("http://www.artima.com")
setCaptureDir("html")  // set the capture directory
capture to ("MyScreenShot.png")
markup("<img src='MyScreenShot.png' />") 
```

# asp.net-mvc - 值不能为空。参数名称：项目。在 Kendo UI Grid 中查看外键

> ID：15882566
> 
> 赞同：0
> 
> 时间：2013-04-08T15:04:40.500
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid, argumentnullexception

我有一个包含许多外键列的网格。现在只有键显示，但我想要[这个例子](http://demos.kendoui.com/web/grid/foreignkeycolumn.html)中的正确数据。

以下代码是我填充网格的内容：

```
 public partial class RuleEntry
{
    public RuleEntry()
    {
        this.RuleEntriesCases = new HashSet<RuleEntriesCas>();
    }
    [Key]
    public int ID { get; set; }
    public string Country { get; set; }
    public Nullable<int> Family { get; set; }
    public Nullable<int> IP { get; set; }
    public string RuleKey { get; set; }
    public Nullable<int> Status { get; set; }
    public string Title { get; set; }

    [ForeignKey("Country")]
    internal virtual Country Country1 { get; set; }
    [ForeignKey("Family")]
    internal virtual Family Family1 { get; set; }
    [ForeignKey("IP")]
    internal virtual IP IP1 { get; set; }
    [ForeignKey("Status")]
    internal virtual RuleStatus RuleStatus { get; set; }
    [ScriptIgnore]
    internal virtual ICollection<RuleEntriesCas> RuleEntriesCases { get; set; }
} 
```

模型上下文如下所示：

```
public partial class entitiesName: DbContext
{
    public entitiesName()
        : base("name=entitiesName")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<Case> Cases { get; set; }
    public DbSet<Country> Countries { get; set; }
    public DbSet<Family> Families { get; set; }
    public DbSet<IP> IPs { get; set; }
    public DbSet<RuleEntry> RuleEntries { get; set; }
    public DbSet<RuleEntriesCas> RuleEntriesCases { get; set; }
    public DbSet<Rule> Rules { get; set; }
    public DbSet<RuleStatus> RuleStatuses { get; set; }
} 
```

我的 Country 类如下所示：

```
public partial class Country
{
    public Country()
    {
        this.RuleEntries = new HashSet<RuleEntry>();
    }
    [Key]
    public string Code { get; set; }
    public string Name { get; set; }

    public virtual ICollection<RuleEntry> RuleEntries { get; set; }       
} 
```

我的cshtml文件看起来像这样

```
@(Html.Kendo().Grid(Model)    
.Name("Grid")
.Columns(columns =>
{

    columns.ForeignKey(r => r.Country, (System.Collections.IEnumerable)ViewData["Countries"], "Code", "Name")
        .Title("Country").Width(150);
    columns.Bound(p => p.Family);
    columns.Bound(p => p.IP);
    columns.Bound(p => p.RuleKey);
    columns.Bound(p => p.Status);
    columns.Bound(p => p.Title);

})
.Groupable()
.Editable(editable => editable.Mode(GridEditMode.InCell))
.Sortable()
.Scrollable(s => s.Height("auto"))
.Filterable()
.ColumnMenu()
.DataSource(dataSource => dataSource
        .Ajax()
        .Batch(true)
        .ServerOperation(false)
        .Model(model => model.Id(p => p.ID))
    )) 
```

但是 columns.ForeignKey-line 会产生难以调试的错误

> 值不能为空。参数名称：items

我不知道如何解决这个问题，谷歌也不会给我任何相关的答案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:13:35.350

您需要指定外键的**id ，而不是导航属性：**

这应该解决它：

```
columns.ForeignKey(
  r => r.Country.Code,
  ( IEnumerable ) ViewData["Countries"],
  "Code",
  "Name"
); 
```

它使用了这个重载`GridColumnFactory<TModel>.ForeignKey()`

```
public virtual GridBoundColumnBuilder<TModel> ForeignKey<TValue>(
  Expression<Func<TModel, TValue>> expression,
  IEnumerable data,
  string dataFieldValue,
  string dataFieldText
; 
```

# .htaccess - 无法在 htaccess 工作中产生负面条件

> ID：15882568
> 
> 赞同：0
> 
> 时间：2013-04-08T15:04:43.640
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我试图为多语言网站编写规则。例如，www.hostname.com/fr 和 www.hostname.com/de 都可以，但尝试任何其他语言标签应该重定向到 www.hostname.com/en。www.hostname.com/it 重定向到 www.hostname.com/en，www.hostname.com/es 重定向到 www.hostname.com/en 等等...

我成功地以“积极”的方式制定了一些规则，但每次我添加一个！创建一个否定规则，它不起作用。

例如 ：

```
RewriteCond %{HTTP_HOST} ^www.hostname.com$
RewriteCond %{REQUEST_URI} ^/?([a-z]{2})/?$
RewriteCond %{REQUEST_URI} ^/?(fr|de)/?$
RewriteRule (.*) http://www.hostname.com/en [L,R=301] 
```

此代码将所有内容重定向到 hostname.com/en。我只想要与 fr et de 重定向到 en 不同的标签。所以我尝试了：

```
RewriteCond %{HTTP_HOST} ^www.hostname.com$
RewriteCond %{REQUEST_URI} ^/?([a-z]{2})/?$
RewriteCond %{REQUEST_URI} !^/?(fr|de)/?$
RewriteRule (.*) http://www.hostname.com/en [L,R=301] 
```

刚加了一个！。但它不起作用，URL 永远不会被重定向。我可能在编写规则时遗漏了一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:04:26.007

您可以将其拆分为两个规则。第一条规则处理`fr`,`de`和`en`。它不会重写任何东西并将请求原封不动地传递给 Apache。如果这不匹配，则第二条规则处理其他所有内容

```
RewriteCond %{REQUEST_URI} ^/(?:fr|de|en)
RewriteRule ^ - [L]

RewriteRule ^[a-z]{2}/(.*)$ /en/$1 [R,L] 
```

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

# primefaces - Tomcat 7 的 EJB3.1 和 JSF 问题

> ID：15882571
> 
> 赞同：0
> 
> 时间：2013-04-08T15:04:49.537
> 
> 标签：primefaces, tomcat7, glassfish-3, ejb-3.1

可以在 Tomcat7 中执行带有 EJB3.1 POJOS 的 JSF2 Web 应用程序，而无需更改注释 @EJB 实体和 EJB3.1 相关代码。

我正在使用 PrimeFaces 3.4.x、Eclipselink JPA 2.3、EJB3.1

最后我想坚持使用Tomcat7而不使用JavaEE6服务器，因为一些客户由于内部限制无法迁移到新的Java EE服务器。

但我希望本机查询和/或标准查询与 JPA 很好地配合使用，例如连接（左、外和内连接）、插入多个表等。

我使用 GlassFish3.1 的旅程非常好，使用 EJB3.1 和 Eclipselink JPA 的 primefaces CRUD 应用程序。

但是我无法执行我的应用程序，因为 EJB 会话 bean 无法实例化，而无需更改 EJB 代码。

我正在考虑更改设计和源代码，以便我的应用程序在 Tomcat 7 和 Glassfih3.x 中运行。可能会避免使用 EJB3.1 并使用诸如 DAO 之类的东西（即使用 J2EE 模式而不是 Java EE6 模式）。

UsersController.java 的 EJB3.1 代码片段：-

@EJB

(1) 私有 com.myapp.session.UsersFacade ejbFacade；

(2) private UsersFacade getFacade() { return ejbFacade; }

// validateUser() 方法返回一个字符串。(3) 字符串结果 = getFacade().validateUser();

perisistence.xml 文件

http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">jdbc/ABC false

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:56:26.873

默认情况下，Tomcat 不是 EJB 容器。为了不失去 tomcat 的圆滑和简单的性质，而是拥有一个基于 tomcat 的 EJB 容器，只需使用[Apache TomEE](http://tomee.apache.org/apache-tomee.html)，它包含[OpenEJB](http://openejb.codehaus.org/whyopenejb.html)实现，因此可以很好地满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:21:30.407

不可以。或者在迁移到 Tomcat 7 之前重新设计应用程序而不使用 EJB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T11:31:21.147

tomcat 是 web 容器，也许 tomcat 8 会支持 java ee 7，但是你可以免费使用 Apache Tomee ！！！

但是一般你用tomcat的时候就用Spring，如果你更喜欢Jboss或者glassfish就用EJB3

# html5-audio - 将 MP3 转换为 HTML5 的 OGG 在共享主机上播放

> ID：15882572
> 
> 赞同：0
> 
> 时间：2013-04-08T15:04:51.807
> 
> 标签：html5-audio

HTML5 带有 witj 音频标签，但 Firefox 更喜欢 OGG，而 IE 更喜欢 MP3。我的 php 应用程序有一个表单，允许用户上传音频文件。问题是如何将 mp3 文件格式转换为 ogg 以便在大多数浏览器上播放它们。

我在某处读过 ffmpeg 可以完成这项任务。如果我有一个 linux 豪华主机帐户，我可以在 goddady 上做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:30:41.720

我很确定您**不能**在任何不允许您安装自己的二进制文件的廉价托管环境中执行此操作。

获得一个便宜的 Linux VPS 以确保您对安装 ffmpeg 的软件堆栈有 100% 的控制权，并将其用于 MP3 和 OGG 中的转换和双重编码文件。或者，尝试 AAC 和 OGG，因为 AAC 具有更好的移动支持，并且支持 MP3 的浏览器无论如何都支持 AAC。

可以从[http://lowendbox.com/找到 Linux VPS 提供商](http://lowendbox.com/)

您还可以使用[http://encoding.com/](http://encoding.com/)等高级服务为您托管音频。

# wordpress - 如何创建一个 wordpress 插件，将额外的输入字段添加到写入/编辑页面

> ID：15882574
> 
> 赞同：0
> 
> 时间：2013-04-08T15:04:57.317
> 
> 标签：wordpress, plugins, input

我正在编写一个插件，该插件在创建帖子时需要使用其他信息。我需要一个文本框，他们将输入一个可以有小数的数字和一个提供一些选项的下拉框。我还需要将此数据与 wordpress 数据库中的其余帖子数据一起保存。有人可以给我一些帮助吗？

PS我稍后需要在显示时向帖子本身添加一个区域，该区域显示从插件计算的一段数据，但首先要做的是。

编辑：我完成了第一部分，但现在我无法使用新字段来保存帖子中的数据，这是我的代码。

```
<?php
/*
Plugin Name: Column Height Calculator
Plugin URI: #
Description: calculates the height of the column
Version: 0.1
Author: Ben Crawford
Author URI:
*/

add_action('admin_menu', 'my_post_options_box');

function my_post_options_box() {
add_meta_box('post_info', 'Column Height Info', 'custom_post_info', 'post', 'side', 'high');
}

//Adds the actual option box
function custom_post_info() {
global $post;
?>
<fieldset id="mycustom-div">
<div>
<p>
<label for="column_type" >Column Type:</label>
<br />
<select name="column_type" id="column_type">
  <option value="JBC">Justified Body Copy</option>
  <option value="LRC">Left Raggid Copy</option>
</select>
<br />
<br />
<label for="header_size">Header Size:</label>
<br />
<input type="text" name="header_size" id="header_size" value="<?php echo get_post_meta($post->ID, 'header_size', true); ?>">
</p>
</div>
</fieldset>
<?php
}

add_action('save_post', 'custom_add_save');
function custom_add_save($postID){
// called after a post or page is saved
if($parent_id = wp_is_post_revision($postID))
{
$postID = $parent_id;
}

if ($_POST['column_type']) {
update_custom_meta($postID, $_POST['column_type'], 'column_type');
}
if ($_POST['header_size']) {
update_custom_meta($postID, $_POST['header_size'], 'header_size');
}
}

function update_custom_meta($postID, $newvalue, $field_name) {
// To create new meta
if(!get_post_meta($postID, $field_name)){
add_post_meta($postID, $field_name, $newvalue);
}else{
// or to update existing meta
update_post_meta($postID, $field_name, $newvalue);
}
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:33:07.193

[您可以使用add_meta_box()](https://codex.wordpress.org/Function_Reference/add_meta_box) wordpress 函数编写自己的元框。这将为您提供最大的控制权。

但是，如果您只是使用这个元框来保存帖子中的数据，那么您可以将[这个 Github 项目](https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress)合并到您的插件中。这将使添加一些保存帖子元数据的数据字段变得非常容易。[然后，您可以使用get_post_meta($post->ID)](https://codex.wordpress.org/Function_Reference/get_post_meta)在循环中获取此元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:04:49.520

我想通了，数据保存在 postmeta 中，而不是 post。现在一切正常，这很容易，现在我需要添加其他功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-22T09:14:15.143

[github.com/CMB2/CMB2](http://github.com/CMB2/CMB2) - 这是新的插件版本。看看 wiki [wiki](http://github.com/CMB2/CMB2/wiki) Yoa 可以 crate 例如：

```
/**
 * Initialize the metabox class.
 */
function cmb_initialize_cmb_meta_boxes()
{
    if (!class_exists('cmb_Meta_Box')) {
        require_once(plugin_dir_path(__FILE__) . '../CMB2/init.php');
    }
}
add_action('init', 'cmb_initialize_cmb_meta_boxes', 9999);
add_action( 'cmb2_admin_init', 'cmb2_sample_metaboxes' );
/**
 * Define the metabox and field configurations.
 */
function cmb2_sample_metaboxes() {

    // Start with an underscore to hide fields from custom fields list
    $prefix = '_yourprefix_';

    /**
     * Initiate the metabox
     */
    $cmb = new_cmb2_box( array(
        'id'            => 'test_metabox',
        'title'         => __( 'Test Metabox', 'cmb2' ),
        'object_types'  => array( 'page', 'post'), // Post types
        'context'       => 'normal',
        'priority'      => 'high',
        'show_names'    => true, // Show field names on the left
    ) );

    // Regular text field
    $cmb->add_field( array(
        'name'       => __( 'Test Text', 'cmb2' ),
        'desc'       => __( 'field description (optional)', 'cmb2' ),
        'id'         => $prefix . 'text',
        'type'       => 'text',
        'show_on_cb' => 'cmb2_hide_if_no_cats', // function should return a bool value

    ) );
} 
```

# javascript - 简单的 HTML5 放置文件站点网站，用于压缩放置的文件

> ID：15882577
> 
> 赞同：1
> 
> 时间：2013-04-08T15:05:10.010
> 
> 标签：javascript, html, drag-and-drop

我想创建一个 HTML5 网站，用户只需删除文件并按下“提交”按钮，一个 javascript 函数会创建一个已删除文件的 .zip 存档。

我的问题是：这是否可能不上传网站中删除的文件，但只能使用保存文件的路径（即“c:\test\droppedfile1.exe”、“c:\test\droppedfile2.exe”）和在本地文件夹中创建 .zip 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:10:08.530

虽然您不能直接从 fs 读取文件，但 drop 事件确实允许您读取文件源并（理论上）将内容通过管道传输到[Jszip](http://stuk.github.io/jszip/)，然后允许用户“下载”zip 文件

[这](http://html5demos.com/file-api)是一个 html5 拖放演示，展示了在无法访问客户端路径或将文件上传到服务器的情况下读取图像文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:08:59.957

No, it's not in plain HTML/JS. HTML/JS have no access to your hard drive. In fact, when you use a file upload box, the `value` is set to `C:/fakepath/nameoffile.ext` (where `nameoffile.ext` is the file name on the disk).

If you drag-drop or copy-paste files, they become blobs. In this case, the original file path is completely mangled -- it becomes something like `blob://lots-and-lots-of-gibberish`.

So no, HTML/JS do not provide you any way to get the file paths from an upload or upload from a provided file path.

* * *

However, on Chrome, there is the HTML5 [filesystem API](http://developer.chrome.com/apps/fileSystem.html), which will probably help. [Here's a tutorial on it](http://www.html5rocks.com/en/tutorials/file/filesystem/).

Note that this will require extra permissions and won't work on other browsers just yet.

* * *

Using the [File API](http://www.w3.org/TR/FileAPI/), you can read the data in selected files. You *cannot* get their paths, but you *can* read the data in a file selected in an upload box (or a drag dropped file), and use your JS function to zip the files.

# ruby - 将值数组分配给 Hash.values 的最佳方法是什么

> ID：15882583
> 
> 赞同：1
> 
> 时间：2013-04-08T15:05:34.103
> 
> 标签：ruby, hash

您将如何分配`[5, 6, 7]`to的每个元素`row`的值并使其`row`成为`{1=>5, 2=>6, 3=>7}`？

```
row = {1=>0, 2=>1, 3=>0}
#this following line doesn't work of course
row.values = [5, 6, 7]
#NoMethodError: undefined method `values=' for {1=>0, 2=>1, 3=>0}:Hash
row
#I want: {1=>5, 2=>6, 3=>7} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:22:38.693

适用于任何长度的数组的通用解决方案，并使元素的索引成为哈希中的键是：

```
Hash[row.each_with_index.map {|elem, i| [i, elem]}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:09:02.927

```
row.keys.zip([5, 6, 7]){|kv| row.store(*kv)} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:10:35.230

```
array = [5, 6, 7]
Hash[*array.each_with_index.map{ |elem, idx| [idx + 1, elem]}.flatten] 
```

结果

```
{1=>5, 2=>6, 3=>7} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:58:25.307

您可以尝试以下方法：

```
row = {1=>0, 2=>1, 3=>0}
p Hash[*(row.keys.zip([5, 6, 7]).flatten)]

#=> {1=>5, 2=>6, 3=>7} 
```

# java - 未设置引导类路径

> ID：15882586
> 
> 赞同：27
> 
> 时间：2013-04-08T15:05:40.677
> 
> 标签：java, class, netbeans, compiler-warnings

所以我得到-`warning: [options] bootstrap class path not set in conjunction with -source 1.6`

我要问3个关于它的问题。我知道我需要设置引导类路径，但我不确定我是否理解。一个快速的谷歌刚刚将我发送到引用 Oracle 页面的页面，但我阅读了 Oracle 页面，并没有觉得我理解得特别好。

我目前正在 Netbeans 上运行这段代码，所以我所要做的就是点击播放按钮让它编译和运行。是否有一个属性指示它将如何编译，以便我可以添加到引导类路径中？

此外，对于即将到来的可能性，我将只在 Netbeans 上运行它并从命令行运行它，在那里使用引导类路径进行编译的正确方法是什么？他们说`$ javac -source 6 HelloWorld.java`，但只是说`-source 1.6`真的是解决方案吗？

也许更大的问题是，我将来如何避免这种类型的警告？如果我了解一点，我引用的是旧的 java 源代码，因此是旧的方法。我不确定那是如何或何时发生的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-08T15:17:45.747

你正在做交叉编译。您正在使用 JDK 7 编译器为 JDK 6 编译类。这没关系，但为避免出现问题，编译器希望使用 JDK 6 `rt.jar`。这背后的原因是，您实际上可能会生成不适用于 JDK 6 的类，因为您可能使用的是旧的语言规则（在本例中为 1.6），但使用的是全新的引导类。例如，某些方法可能不存在于较旧的 JDK 中。因此，您完成了编译，但是一旦运行程序，它可能会以`MethodNotFoundException`.

几个解决方案，你可以选择一个

*   从 JDK 6 开始指定`rt.jar`。为什么不使用比甚至更旧的编译器？
*   使用 JDK 6 编译器（`rt.jar`包括在内）。如果不需要 7 个功能，为什么还要使用 7。
*   忽略警告并具有良好的测试覆盖率，以确保您不使用 Java 7 功能
    *   我不了解 NetBeans，但在 Eclipse 中，您也可以说您正在针对 JDK 6 进行编译，因此如果您使用 Java 7 功能，它实际上不会编译。
*   更改业务需求并针对 Java 7 进行编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-24T14:26:38.487

> 我知道我需要设置引导类路径，但我不确定我是否理解。

在 Netbeans 8.0.2 中，转到：

```
Run > Set Project Configuration > Customise... 
```

在“类别”窗口中，转到：

```
Build > Compiling 
```

底部字段是“附加编译器选项”，您可以在其中添加：

```
-bootclasspath /your/path/to/lower/java/version/lib/rt.jar 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-07T15:19:24.217

在 macOS 的控制台上编译时有相同的警告。这里要添加的编译器选项是

```
-bootclasspath /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar 
```

请注意，在 macOS 上，对于 Java 版本 <= 1.6（Apple 发布的版本），`rt.jar`称为`classes.jar`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-20T06:12:07.850

在我的情况下，maven 正在使用另一个 java 版本，我通过在 maven 中更改所需的 java 版本来修复它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T18:57:27.263

只需右键单击项目属性，然后转到绑定并选择 JDK 1.7，前提是您在 NetBeans 项目中使用它的功能，这就是您遇到问题的原因。这将有助于解决问题并为我工作。

# r - 在 R 中附加变量

> ID：15882588
> 
> 赞同：0
> 
> 时间：2013-04-08T15:05:42.327
> 
> 标签：r

所以我在 R 中有这个输出，只是像这样的随机数

```
1 2 3 4 5
0.1 0.2 0.3 0.4 0.5
0.01 0.02 0.03 0.04 0.05 
```

我想将“Value”“Median”“Min”附加到这个，所以它会这样

```
Value 1 2 3 4 5
Median 0.1 0.2 0.3 0.4 0.5
Min 0.01 0.02 0.03 0.04 0.05 
```

我不知道该怎么做......如果它的数字我可以做到但不能用文字来做谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:10:12.890

要么`paste()`：

```
> paste("Value",1,2,3,4,5)
[1] "Value 1 2 3 4 5" 
```

或者`cat()`：

```
> cat("Value",1,2,3,4,5)
Value 1 2 3 4 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:10:28.083

您不能在数字向量的开头添加文本变量，因为数字向量不允许某些值是字符。您可以为这三个向量命名，适当的名称，然后将它们加入一个 data.frame 中，以便于显示。

```
value  <-  c(1,2,3)
median <-  c(0.1,0.2,0.3)
Min    <-  c(0.01,0.02,0.03)
x      <-  data.frame(value,median,min) 
```

输出：

```
x
  value median  Min
1     1    0.1 0.01
2     2    0.2 0.02
3     3    0.3 0.03 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:35:36.390

使其尽可能接近您的定义/格式，请尝试以下操作：

```
row1 = c(1, 2, 3, 4, 5)
row2 = c(0.1, 0.2, 0.3, 0.4, 0.5)
row3 = c(0.01, 0.02, 0.03, 0.04, 0.05)   
rows = rbind(row1,row2,row3)
rownames(rows) = c('Value','Median','Mean')
rows

       [,1] [,2] [,3] [,4] [,5]
Value  1.00 2.00 3.00 4.00 5.00
Median 0.10 0.20 0.30 0.40 0.50
Mean   0.01 0.02 0.03 0.04 0.05 
```

# java - 意图在android上一直失败

> ID：15882592
> 
> 赞同：0
> 
> 时间：2013-04-08T15:05:52.433
> 
> 标签：java, android, eclipse, android-intent

任何人都知道为什么这个意图会失败

这是日志猫中的日志

```
04-08 10:52:51.782: E/SpannableStringBuilder(10411): SPAN_EXCLUSIVE_EXCLUSIVE spans  cannot have a zero length
04-08 10:52:51.782: E/SpannableStringBuilder(10411): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
04-08 10:52:52.542: E/SpannableStringBuilder(10411): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-08 10:52:52.542: E/SpannableStringBuilder(10411): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-08 10:52:53.797: E/AndroidRuntime(10411): FATAL EXCEPTION: main
04-08 10:52:53.797: E/AndroidRuntime(10411): java.lang.RuntimeException: Unable to start   activity ComponentInfo   {com.better.work.learning.letters.and.more.awesome/com.better.work.learning.letters.and.more.awesome.spellingLevel1}: android.content.res.Resources$NotFoundException: Resource ID #0x16
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.os.Looper.loop(Looper.java:137)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at java.lang.reflect.Method.invokeNative(Native Method)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at java.lang.reflect.Method.invoke(Method.java:511)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at dalvik.system.NativeStart.main(Native Method)
04-08 10:52:53.797: E/AndroidRuntime(10411): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x16
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.content.res.Resources.getValue(Resources.java:1026)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.content.res.Resources.getDrawable(Resources.java:671)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.view.View.setBackgroundResource(View.java:14494)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at com.better.work.learning.letters.and.more.awesome.spellingLevel1.onCreate(spellingLevel1.java:72)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.app.Activity.performCreate(Activity.java:5206)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
04-08 10:52:53.797: E/AndroidRuntime(10411):    ... 11 more 
```

代码在这里一直失败是清单文件

这不是完整的代码，但基本上没有错误，当我尝试加载扩展活动并导入的 sellLevel1 类时，它只是失败了。它也与其他所有内容一样包含在包装中。当我单击 spellingLevelPicker 类上的按钮 1 时，应用程序也会运行但不会失败

编辑

好的，这里失败了

公共类 spellingLevel1 扩展 Activity {

```
Context mContext = null;
private RelativeLayout mCanvasContainer;
private SCanvasView mSCanvas;
private ImageView mImageView1,mImageView2,mImageView3,mImageView4,mImageView5,mImageView6,mImageView7,mImageView8;
public int currentLetter;
private int rando;
int[] myImageList = {
        R.drawable.lettersa, R.drawable.lettersb,
        R.drawable.lettersc, R.drawable.lettersd,
        R.drawable.letterse, R.drawable.lettersf, R.drawable.lettersg,
        R.drawable.lettersh, R.drawable.lettersi, R.drawable.lettersj,
        R.drawable.lettersk, R.drawable.lettersl, R.drawable.lettersm,
        R.drawable.lettersn, R.drawable.letterso, R.drawable.lettersp,
        R.drawable.lettersq, R.drawable.lettersr, R.drawable.letterss, R.drawable.letterst,
        R.drawable.lettersu, R.drawable.lettersv, R.drawable.lettersw,
        R.drawable.lettersx, R.drawable.lettersy, R.drawable.lettersz};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.spelling);

    mContext = this;
    mCanvasContainer = (RelativeLayout) findViewById(R.id.canvas_container);
    mSCanvas = new SCanvasView(mContext);

ImageView mImageView01 = (ImageView) findViewById(R.id.imageView1);       
ImageView mImageView02 = (ImageView) findViewById(R.id.imageView2);       
ImageView mImageView03 = (ImageView) findViewById(R.id.imageView3);       
ImageView mImageView04 = (ImageView) findViewById(R.id.imageView4);       
ImageView mImageView05 = (ImageView) findViewById(R.id.imageView5);       
ImageView mImageView06 = (ImageView) findViewById(R.id.imageView6);       
ImageView mImageView07 = (ImageView) findViewById(R.id.imageView7);       
ImageView mImageView08 = (ImageView) findViewById(R.id.imageView8);       
Random rando = new Random();

currentLetter = rando.nextInt(myImageList.length);

mImageView01.setBackgroundResource(currentLetter);
mImageView02.setBackgroundResource(currentLetter);
mImageView03.setBackgroundResource(currentLetter);
mImageView04.setBackgroundResource(currentLetter);

} 
```

}

下面的销毁有一个公共无效，但如果我评论 imageview 设置背景资源它不会失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:11:59.730

首先创建一个`private Context context`作为您班级的成员。

然后在 onCreate 添加这个：`this.context = context;`

或者如果你在一个视图类中，你可以将 Context 从活动传递给你的构造函数，所以它会像这样

```
public className(Context context) {
     this.context = context;
} 
```

最后是改变这个

```
mLevel1.setOnClickListener(new OnClickListener() {
        public void onClick (View v) {
            Intent myIntent = new Intent(v.getContext(), spellingLevel1.class); //Coming soon 
            startActivityForResult(myIntent, 0);        

        }
        }); 
```

对此

```
mLevel1.setOnClickListener(new OnClickListener() {
        public void onClick (View v) {
            Intent myIntent = new Intent(context, spellingLevel1.class); //Coming soon 
            startActivityForResult(myIntent, 0);        

        }
        }); 
```

我希望这能回答你的问题:)如果你对我的回答有任何疑问，请随时在评论中提问：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:51:24.390

您的 logcat 中的这些行

```
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.content.res.Resources.getDrawable(Resources.java:671)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at android.view.View.setBackgroundResource(View.java:14494)
04-08 10:52:53.797: E/AndroidRuntime(10411):    at com.better.work.learning.letters.and.more.awesome.spellingLevel1.onCreate(spellingLevel1.java:72) 
```

告诉我您的问题是您尝试在 onCreate 方法中实例化的可绘制对象之一。检查您包含在文件结构中的可绘制对象列表，以验证您拥有列出的所有可绘制对象。（并调试失败时获得的值）

代替

```
currentLetter = rando.nextInt(myImageList.length); 
```

（这会给你一个介于 0 和 myImageList.length -1 之间的值）你需要使用

```
currentLetter = myImageList[rando.nextInt(myImageList.length)]; 
```

（这将为您提供为您的可绘制资源生成的 int）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:40:24.173

我的问题的答案是代码操作系统中没有任何错误我调用的图片太大并且与其他图像视图发生冲突因此导致可绘制资源的错误

# c# - 单选按钮列表

> ID：15882595
> 
> 赞同：0
> 
> 时间：2013-04-08T15:05:59.697
> 
> 标签：c#, javascript, jquery, asp.net, radiobuttonlist

嘿伙计们，我有一个页面，其中包含多个单选按钮列表和每个列表的清除选择按钮，如果按下则清除列表。问题出在我当前的代码上，如果我按下清除选择按钮，它会清除页面上的所有单选按钮列表。如何修改我的代码以清除我想要的单选按钮列表。这是代码片段。

```
<asp:RadioButtonList ID="rdoQuestionChoice" runat="server" Visible="false" CssClass="Aligntext" OnSelectedIndexChanged="ddlChoiceList_SelectedIndexChanged" />

<asp:Button ID="clearRdoQuestionChoice" runat="server" Visible="false" Text="Clear Selection" OnClientClick="clearRdoQuestionChoice_ClearRadioList(); return false;" />

<script language="javascript" type="text/javascript">
   function clearRdoQuestionChoice_ClearRadioList() {
       $("table[id$=rdoQuestionChoice] input:radio").each(function (i, x) {
           if ($(x).is(":checked")) {
               $(x).removeAttr("checked");
           }
       });
   }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:10:57.933

您是否尝试过仅更改单选按钮列表的选择索引？像这样->

C#（已测试）

`rdoQuestionChoice.SelectedIndex = -1`

Javascript（未测试）

```
window.addEvent('domready', function() {
         $("rdoQuestionChoice").checked = false;
}); 
```

或者您可以在这里查看更多信息和其他 javascript 函数：[http ://www.tek-tips.com/viewthread.cfm?qid=1436752](http://www.tek-tips.com/viewthread.cfm?qid=1436752)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:21:48.160

我能够解决这个问题。

在我的底层 .cs 类中，我在 Page_Load(object sender, EventArgs e) 函数中添加了以下代码行

```
clearRdoQuestionChoice.OnClientClick = "clearRdoQuestionChoice_ClearRadioList('" + rdoQuestionChoice.ClientID + "')"; 
```

在我的 javascript 函数中，我做了以下更改

```
function clearRdoQuestionChoice_ClearRadioList(radioButtonListID) {
    var elementRef = document.getElementById(radioButtonListID);
    var inputElementArray = elementRef.getElementsByTagName('input');

    for (var i = 0; i < inputElementArray.length; i++) {
        var inputElement = inputElementArray[i];
        inputElement.checked = false;
    }
    return false;
} 
```

我将 .aspx 类更改为以下内容。我基本上从 asp:button 中删除了 OnClientClick 属性

```
<asp:RadioButtonList ID="rdoQuestionChoice" runat="server" Visible="false" CssClass="Aligntext"                            OnSelectedIndexChanged="ddlChoiceList_SelectedIndexChanged" />
<asp:Button ID="clearRdoQuestionChoice" runat="server" Visible="false" Text="Clear Selection" /> 
```

# android - 为简单的 Android 应用程序创建 Web 客户端的技术

> ID：15882603
> 
> 赞同：1
> 
> 时间：2013-04-08T15:06:31.860
> 
> 标签：android, client

这与一个学校项目有关，我们必须构建一个相对简单的 Android 应用程序来充当课堂调查响应者。一个问题被扔到板上，学生通过手机回答，数据被传递到一个小型数据库并发布结果。很简单。

我的任务是为这个应用程序找到/开发一个网络客户端。有哪些不错的技术可以做到这一点？您可以轻松地从头开始编写这样的东西，还是使用某种预制技术更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:10:58.910

`HttpClient`Android 有一个可以使用的内置API：http: [//developer.android.com/reference/org/apache/http/client/HttpClient.html](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)

您的另一个选择是使用一些 3rd 方包装器或库来简化您与它的交互。我之前使用过`HttpRequest`这个答案中发布的类：[https](https://stackoverflow.com/a/2253280/507810) ://stackoverflow.com/a/2253280/507810 ，发现它比手动使用 HttpClient API 简单一些

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:11:08.210

您可以创建一个网络服务，其中 android 手机充当网络客户端。android api 有一个 HttpURLConnection 实现，您可以使用它来联系 Web 服务：http: [//developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)

您可以使用 java servlet 来创建 Web 服务。

# jquery - raphael draw continuous line

> ID：15882607
> 
> 赞同：1
> 
> 时间：2013-04-08T15:06:40.700
> 
> 标签：jquery, raphael

I am trying to draw continuous lines on raphael canvas. Say, line 1 starts from source A and ends at B, line 2 starts at B and this continues till the user triggers an event(stop drawing).

How do i achieve this.?

Thanks in advance. Priyanka

# objective-c - Xcode crashes when I run my Objective-C project

> ID：15882612
> 
> 赞同：3
> 
> 时间：2013-04-08T15:06:50.933
> 
> 标签：objective-c, xcode, macos

I'm running Xcode 4.6.1, with that latest SDKs, I can build the project just fine, but when I try to run it, it crashes.

Here is the beginning of the crash report.

```
Process:         Xcode [13573]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.6.1 (2067)
Build Info:      IDEApplication-2067000000000000~2
App Item ID:     497799835
App External ID: 14581035
Code Type:       X86-64 (Native)
Parent Process:  launchd [278]
User ID:         501

Date/Time:       2013-04-08 17:57:47.633 +0300
OS Version:      Mac OS X 10.8.3 (12D78)
Report Version:  10

Interval Since Last Report:          39613 sec
Crashes Since Last Report:           3
Per-App Interval Since Last Report:  1751 sec
Per-App Crashes Since Last Report:   2
Anonymous UUID:                      DC5CB8D0-2A9C-75E6-5631-42D5362B172F

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4H512
UNCAUGHT EXCEPTION (NSInvalidArgumentException): -[__NSCFString alloc]: unrecognized selector sent to instance 0x4009ce3e0
UserInfo: (null)
Hints: None
Backtrace:
  0  0x00007fff8ea76aee __exceptionPreprocess (in CoreFoundation)
  1  0x00007fff867863f0 objc_exception_throw (in libobjc.A.dylib)
  2  0x00007fff8eb0d40a -[NSObject(NSObject) doesNotRecognizeSelector:] (in Core Foundation) 
```

Code being built and compiled is from the template for the Command Line Tool in Xcode

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // insert code here...
        NSLog(@"Hello, World!");

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:55:10.163

这似乎是 Xcode 安装损坏和/或系统坏了。

如果您可以打开/构建/运行其他项目，我会感到惊讶。如果是这样，这*可能*是派生数据文件夹是双层的情况。尝试删除`~/Library/Developer/Xcode/DerivedData`（假设您已将其保留在默认位置。

此外，请查看 Console.app 并查看是否有任何令人不安的消息。

# html - How do I get a background image on top of an img?

> ID：15882614
> 
> 赞同：0
> 
> 时间：2013-04-08T15:06:58.753
> 
> 标签：html, css, image

I need to put an icon on top of an image of the product. I have been working on this for quite a while. What am I missing?

.special-corner is a div with the icon as the background image, which needs to display on top of the img.

```
<div class="vertical-vehicle-spotlight-item">
  <div class="vertical-item-photo">
    <a href="#">
      <div class="special-corner">
        <img width="260" height="146" src="kjhasd.png">

.vertical-vehicle-spotlight-item {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #DDDDDD;
    box-shadow: 0 0 3px rgba(0, 0, 0, 0.1);
    cursor: pointer !important;
    height: 253px;
    margin-left: 3px;
    margin-top: 17px;
    overflow: hidden;
    padding: 5px;
    width: 260px;
}

.vertical-item-photo {
    height: 146px;
    overflow: hidden;
    vertical-align: middle;
    width: 260px;
}

.special-corner {
    background-image: url("/img/special-corner.png");
    background-position: 100% -1px;
    background-repeat: no-repeat;
    height: 100px;
}

.vertical-item-photo img {
    height: 146px;
    vertical-align: middle;
    width: 260px;
} 
```

Edit: Here's the fiddle, thanks for the idea from @Mooseman. [http://jsfiddle.net/heetertc/nTMun/](http://jsfiddle.net/heetertc/nTMun/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:09:07.713

Use `z-index: 1` on the image and `z-index: 2` on `.special-corner`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:11:55.007

您需要添加除静态（初始值）以外的位置属性，z-index 才能正常工作。你可以给`.special-corner`position: relative 然后给它一个正的 z-index 让它覆盖图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:10:00.187

Use `z-index` to enforce elements "depth". Like lower on image and higher on your `.special-corner`

# mysql - 语法似乎正确的 SQL 查询语法错误

> ID：15882619
> 
> 赞同：0
> 
> 时间：2013-04-08T15:07:18.287
> 
> 标签：mysql

我不知道这个查询有什么问题。这对我来说似乎很好。

```
select o.id, p.date, u.billingName, u.billingPhone, u.billingCompany,
       u.billingAddress, u.billingCity, u.billingState, u.billingCountry,
       u.billingZip, u.shippingName, u.shippingPhone, u.shippingCompany,
       u.shippingAddress, u.shippingCity, u.shippingState, u.shippingCountry,
       u.shippingZip, o.layer, o.boardSizeWidth,o.boardSizeHeight, o.quantity
from order o, purchase p, useraccount u
where p.id = 1 and o.id = p.OrderId and u.id = p.UserId 
```

> 错误：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“order o, purchase p, useraccount u where p.id = 1 and o.id = p.OrderId and u.id”附近使用正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:10:04.060

该表`order`是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，需要使用反引号进行转义。

此外，在加入表格时，您应该使用标准的 ANSI JOIN 语法。请参阅下文了解如何完成此操作。

```
select ....
from `order` o
inner join purchase p
    on o.id = p.OrderId
inner join useraccount u 
    on u.id = p.UserId
where p.id = 1 
```

作为旁注，您应该避免对表名和列名使用保留字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:08:05.247

`ORDER`是保留关键字。必须使用反引号进行转义。

```
....FROM `Order` o 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您有机会更改标识符，请更改保留关键字列表中不存在的表名。这将避免你未来的头痛。

# php - PHP：将数组值相加

> ID：15882620
> 
> 赞同：2
> 
> 时间：2013-04-08T15:07:20.707
> 
> 标签：php, arrays, json

我相信这比标题听起来要难一些，但我可能完全错了。我有一个这样的数组：

```
[["londrina",15],["cascavel",34],["londrina",23],['tiradentes',34],['tiradentes',21]] 
```

我希望能够采用共同的值，在这种情况下是 londrina 和 tiradentes，并将这些数字相加。我的PHP代码如下：

```
$qry = mysql_query("SELECT * FROM bap WHERE semana = '".$week."'");
    $rows = array();
    while($row = mysql_fetch_array($qry)) {
        $rows[] = $row;
    }

    $resultstr = array();

    foreach($rows as $row) {
        $resultstr[] = '["'.$row['zona'].'",'.$row['numero'].']';

    }
    $result = implode(', ',$resultstr);
    print '['.$result.']'; 
```

我不确定是否需要更多信息。该数组以这种格式输出以用于 jquery json 图形插件。让我知道是否需要更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:10:09.470

试试这个：

```
$arr = [["londrina",15],["cascavel",34],["londrina",23],['tiradentes',34],['tiradentes',21]];
$new_arr = [];

foreach ($arr as $a) {

    list($name, $num) = $a;

    if (!isset($new_arr[$name])) {
        $new_arr[$name] = 0;
    }

    $new_arr[$name] += $num;
}

var_dump($new_arr); 
```

**编辑 OP**

完整使用此代码，应该会得到预期的结果：

```
$qry = mysql_query("SELECT * FROM bap WHERE semana = '".$week."'");

while ($row = mysql_fetch_array($qry)) {

    $rows[] = array($row['zona'], $row['numero']);
}

$new_arr = [];

foreach ($rows as $a) {

    list($name, $num) = $a;

    if (!isset($new_arr[$name])) {
        $new_arr[$name] = 0;
    }

    $new_arr[$name] += $num;
}

var_dump($new_arr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T15:15:37.013

```
SELECT zona,
       SUM(numero) AS sum  
  FROM bap 
 WHERE semana = $week 
 GROUP BY zona 
```

# c++ - 将带有完整路径的可执行文件链接到静态库

> ID：15882624
> 
> 赞同：1
> 
> 时间：2013-04-08T15:07:28.047
> 
> 标签：c++, linker, gnu

我正在通过以下方式链接和构建针对库的可执行文件

```
mpic++ -Wall -o example example.o /path/to/my/lib/libmy.a 
```

`otool -L example`告诉我它与

```
example:
libmy.a (compatibility version 0.0.0, current version 0.0.0)
/opt/openmpi/lib/libmpi_cxx.1.dylib (compatibility version 2.0.0, current version 2.1.0)
/opt/openmpi/lib/libmpi.1.dylib (compatibility version 2.0.0, current version 2.3.0)
    .... 
```

有没有办法保持链接的完整路径？可能是一些标志，但我找不到它。所以这`otool`显示了类似的东西：

```
 /path/to/my/lib/libmy.a (...)
   .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:31:34.407

好的，解决方案似乎是使用：

```
install_name_tool -change "libmy.a" "/path/to/lib/libmy.a" example 
```

# symfony - 教义实体....历史？

> ID：15882626
> 
> 赞同：5
> 
> 时间：2013-04-08T15:07:28.900
> 
> 标签：symfony, doctrine-orm

我有这个实体，我正在从面板中保存我们的数据库，您可以在其中执行通常的操作（编辑、添加等）。不是很大，并且大多数时候大约有 1k 行，并且可能这个数字会一直在这个左右。该实体有一些与其他实体相关的字段（例如：位置、商店、品牌等）。

考虑到这一点，我需要创建的是某种变化的历史，比如它的版本。用户将能够编辑当前的，或查看更改日志（报告）。

我正在考虑实现类似 onpreupdate 或 onprePersist 的东西，甚至为此使用新表。但我觉得我会这样做，它已经在那里了，我还记得很久以前在教义指南上读过一些关于修订等但找不到的东西。

也许有人可以向我指出一些事情，甚至提出更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T16:31:17.787

[https://github.com/Atlantic18/DoctrineExtensions](https://github.com/Atlantic18/DoctrineExtensions)

有一个可记录的扩展，“可记录 - 帮助跟踪对象的更改和历史记录，还支持版本管理。”

# c# - Find out which query caused an exception

> ID：15882627
> 
> 赞同：0
> 
> 时间：2013-04-08T15:07:35.407
> 
> 标签：c#, sql, oledbcommand

I have an OleDbCommand for my inserts that I have tried to implement to avoid SQL injection. Before that I used simple strings for my queries and I didn't like that. Now my piece of code for inserting records looks like this:

```
 try
 {
    OleDbConnection rConn = new OleDbConnection(args[3]);
    rConn.Open();
    using (OleDbCommand insert = new OleDbCommand(String.Format(Globals.QUERY_INSERT_CLICK, args[4]), rConn))
    {
        insert.Parameters.Add("id", OleDbType.BigInt, 20);
        insert.Parameters.Add("email", OleDbType.VarChar, 255);
        insert.Parameters.Add("clickTime", OleDbType.Date, 20);
        insert.Parameters.Add("subscriberId", OleDbType.BigInt, 20);
        insert.Parameters.Add("link", OleDbType.VarChar, 255);
        insert.Parameters.Add("sendQueueId", OleDbType.BigInt, 20);
        insert.Parameters.Add("mailingListName", OleDbType.VarChar, 255);
        insert.Parameters.Add("newsletterId", OleDbType.BigInt, 20);
        insert.Parameters.Add("sendDate", OleDbType.Date, 20);

        insert.Parameters[0].Value = clickitem.Id;
        insert.Parameters[1].Value = clickitem.Email;
        insert.Parameters[2].Value = clickitem.ClickTime;
        insert.Parameters[3].Value = clickitem.SubscriberId;
        insert.Parameters[4].Value = clickitem.Link;
        insert.Parameters[5].Value = clickitem.SendQueueId;
        insert.Parameters[6].Value = mailingListName;
        insert.Parameters[7].Value = newsletterID;
        insert.Parameters[8].Value = sendDate;

        insert.Prepare();
        insert.ExecuteNonQuery();
    }
    rConn.Close();
}
catch (OleDbException oldbex)
{
    logger.WriteToLog("GETCLICKS", "OleDbException: " + Globals.ERROR_INSERT_CLICK + oldbex.Message);
}
catch (Exception ex)
{
    logger.WriteToLog("GETCLICKS", Globals.ERROR_INSERT_CLICK + ex.Message);
} 
```

I have thousands of inserts and I see from my log that some of them are not correctly inserted. The exception tells me e.g. cannot convert from bigint to datetime and stuff like that. Although most of my records are inserted correctly, I want to know which of these insert queries exactly caused the error. How can I figure that out?

N.B. Before using this method I had access to my query string and I found the error instantly. Now I guess my immunity to SQL injection is causing some confusion for myself

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:12:05.400

由于您提到收到不同/多个数据转换错误，我的建议是在捕获 OleDbException 时改进您的日志记录。

您可以在初始“GETCLICKS”日志条目之后将每个参数值写入日志。这将使您更好地了解来自用户的值的格式不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:16:55.283

标准 SQL 错误不会显示导致错误的列或值。

最简单的方法是将 SQL 语句和参数值添加到您的日志记录调用中。

```
string params = string.Join(Environment.NewLine,
                            insert.Parameters
                                  .Select(p => string.Format("{0} : {1}",
                                                             p.Name, 
                                                             p.Value))
                                  .ToArray()
                            );

string message = string.Format("{0}: {1}{2}\n{3}\n{4}",
                               "OleDbException: " ,
                               Globals.ERROR_INSERT_CLICK,
                               oldbex.Message,
                               insert.CommandText,
                               params);

logger.WriteToLog("GETCLICKS", message ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:16:14.107

参数 Value 属性是 Object 泛型类型。所以它接受你分配给它的任何东西。当然，这不是处理数据的好方法。我将尝试将值转换为参数的适当数据类型，并避免将虚假值发送到数据库。这样，您将在参数分配时立即捕获错误，而不是在执行插入时

例如：

```
insert.Parameters[2].Value = Convert.ToDateTime(clickitem.ClickTime); 
```

如果这不是有效的日期时间，它将在 Convert.ToDateTime 失败，您会在日志中注意到

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T15:16:56.170

困难的方式，但好的设计。我建议您通过继承 Base Exception 类来创建自己的自定义异常类。

创建一个以 oledbcomndand 作为输入参数的构造函数，您可以尝试通过循环遍历参数集合来记录 OldedbComamnd.CommandText。如下面的 SQLcommand 示例所示（与 OLedbCommand 或多或少相同）

或 Easy Way - 抛出异常时，将 OLDEBCommand.ComamndText 写入日志。

下面是我为 SQL 命令的 StoredProcExecutionException 创建的示例。您可以为 OleDbCommand 完全复制它。希望这可以帮助

```
 public StoredProcExecutionException(string message, Exception innerException ,SqlCommand sqlCommand)
            : base(Convert.ToString(sqlCommand.CommandType ,CultureInfo.InvariantCulture)+" : "
                + Convert.ToString(sqlCommand.CommandText, CultureInfo.InvariantCulture)
                + "Failed. " + Convert.ToString(message, CultureInfo.InvariantCulture), innerException)
        {
            StringBuilder sb = new StringBuilder();

            foreach (SqlParameter param in sqlCommand.Parameters)
            {
                if (sb.Length > 0) sb.Append(",");
                sb.AppendFormat("{0}='{1}'", param.ParameterName, Convert.ToString(param.Value, CultureInfo.InvariantCulture));               
            }

            StringBuilder sbHeader = new StringBuilder();
            sbHeader.AppendLine(String.Format(CultureInfo.InvariantCulture,"{0} :{1} Failed. {2}", sqlCommand.CommandType, sqlCommand.CommandText, message));
            sbHeader.AppendFormat("Exec {0} ", sqlCommand.CommandText);

            sbHeader.Append(sb.ToString());

        } 
```

# vba - 使用 1800 行更新 xls 的自定义 Excel 脚本

> ID：15882628
> 
> 赞同：1
> 
> 时间：2013-04-08T15:07:41.687
> 
> 标签：vba, excel, spreadsheet, xls

我这里有一些 .xls 电子表格，每个电子表格大约有 1800 行，都充满了来自我的亚马逊商店的产品信息。

我需要更新其类别中每个产品的价格，但所有产品都混杂在一起。我希望我可以创建一个脚本来帮助我。

行格式为：**产品名称 | 说明 | 货号 | 条码 | 价格 | 等等等等**

我希望在开始时指定一个关键字和价格，然后点击 go，脚本将执行以下操作：

```
Search the Name (A1) for a keyword of my choice,
If found, update price (E1) with a price of my choice, then start next row (A2)
or If not found move on to (A2) and repeat until the end. 
```

现在将不胜感激任何帮助，并为我节省数小时的麻木复制面食。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:13:37.263

嗯……你写宏怎么样？我会指定两个单元格，比如 F1 和 G1，作为您要搜索的内容以及您希望将其更改为的价格，然后执行以下操作：

```
dim i as integer
dim SearchFor as string
SearchFor=range("F1").value
NewPrice=range("G1").value
dim NewPrice as string
for i=1 to 1800
  if(range("A" & i).value=SearchFor) then
    range("E" & i).value=NewPrice
  endif
next i 
```

我认为这样的事情应该有效。我假设 A 列是名称，E 是您想要更改的价格。

如果做不到这一点，根据电子表格的设置方式，转到标题所在的位置并打开自动过滤器（在许多 Excel 版本中，它位于数据 - 过滤器 - 自动过滤器中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:30:16.470

这是类似于用户 1560834 的东西，因为它是 VBA。无论大小，它都会遍历您的整个列表-我也对其进行了测试。这是之前和之后的图像： ![变更前](https://i.stack.imgur.com/0J6d1.png) ![在此处输入图像描述](https://i.stack.imgur.com/cH778.png)

这是代码：

```
Sub Price_Update()

    Dim CurrRow As Integer
    Dim CurrCol As Integer
    Dim TargetRow As Integer
    Dim TargetCol As Integer

    Const Text_to_Find = "ABC"
    Const New_Price = 4.45

    CurrRow = 2 ' Start with row 2, not header row
    CurrCol = 1 ' This is column A

    TargetRow = 2 ' Start with row 2, not header row
    TargetCol = 5 ' This is column E

    ' Search through all records until blank found
    While Cells(CurrRow, CurrCol) <> ""

        ' Look for string in column A
        If InStr(1, UCase(Cells(CurrRow, CurrCol)), UCase(Text_to_Find)) > 0 Then
            ' If found, update column E with the new price
            Cells(TargetRow, TargetCol) = New_Price
        End If

        ' Move to the next source and target rows
        CurrRow = CurrRow + 1
        TargetRow = TargetRow + 1

    Wend

End Sub 
```

将其放入 VBA（选择 Developer > Visual Basic），然后更改要查找的文本和价格。按 F5 运行。

在更新真实数据之前，请确保进行备份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:15:42.147

工作表公式可以做到这一点

在 E 列中，将以下公式从第 1 行放到第 1800 行：

```
=IF(A:A=$F$1, $G$1, OLD_Price) 
```

（这是一个 IF 列 A=F1，THEN 使用 G1 中的值，ELSE ...块...）

高温高压

菲利普

# batch-file - 如何编写批处理单独的标签（函数）

> ID：15882632
> 
> 赞同：0
> 
> 时间：2013-04-08T15:07:47.687
> 
> 标签：batch-file, cmd

我正在编写一个批处理文件，其中包含 3 个函数。其他一切正常，但是当第一个函数调用它运行所有 3 个函数时，当第二个函数被调用时，它运行第二个和第三个函数，当第三个函数被调用时，它只运行第三个函数，因为它是最后一个函数。

它出什么问题了？

代码：

```
IF NOT #%1#==## GOTO END
:

IF #%1#==## GOTO HELP
:

IF NOT #%2#==## GOTO TOOMANY
:

:HELP
ECHO ** Input parameter is missing **
ECHO Correct format: %0 filename_tempate
ECHO Example: %0 *.TXT
ECHO.
ECHO Try again

:END
ECHO **End of Display**

:TOOMANY
ECHO **Too much data supplied**
GOTO HELP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:17:17.470

批处理会将执行转移到指定的标签，但与 pascal 和类似语言不同，它不会将标签视为“过程结束” - 它只是通过标签收费。

要退出程序，您需要执行

```
goto :eof 
```

冒号在哪里`required`并且标签`:eof`被理解为“文件结尾”并且不必声明（实际上，不应该是恕我直言）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:19:12.487

Shell 脚本（批处理文件）并没有真正的功能。Goto 标签只是跳转目标。一旦你跳转到一个标签，执行将从该行继续并继续，直到它到达另一个 goto 或到达文件结尾。这意味着当您使用此行时：

```
GOTO HELP 
```

脚本将跳转到该行并运行之后的每一行。

要解决此问题，请使用

```
goto :EOF 
```

在您标记的部分之后。:EOF 表示“文件结束”。

账单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:23:37.017

这是因为`:HELP`and`:END`并不是真正的函数，它们是标签。当您使用 时`GOTO HELP`， cmd 将跳转到`HELP`并从那里继续运行脚本。解决此问题的一种方法是`GOTO`在每个函数之后放置另一个标签。例如：

```
:HELP
ECHO ** Input parameter is missing **
ECHO Correct format: %0 filename_tempate
ECHO Example: %0 *.TXT
ECHO.
ECHO Try again
GOTO START

:END
ECHO **End of Display**
GOTO NEXT

:TOOMANY
ECHO **Too much data supplied**
GOTO HELP

:NEXT 
```

这样，在 cmd 运行函数中的任何内容后，它将转到预期的位置，并且不会继续运行下一个函数。

其他方式：

```
IF NOT #%1#==## CALL :END
:

IF #%1#==## CALL :HELP
:

IF NOT #%2#==## GOTO TOOMANY
:

:HELP
ECHO ** Input parameter is missing **
ECHO Correct format: %0 filename_tempate
ECHO Example: %0 *.TXT
ECHO.
ECHO Try again
GOTO :EOF

:END
ECHO **End of Display**
GOTO :EOF

:TOOMANY
ECHO **Too much data supplied**
CALL :HELP
GOTO :EOF 
```

这样，cmd 只会查看函数并返回到之前的位置。

# c# - DateTime format with Entity Framework

> ID：15882636
> 
> 赞同：3
> 
> 时间：2013-04-08T15:08:03.960
> 
> 标签：c#, entity-framework, datetime

Can someone explain how it works? I need compare a DateTime in SQL Server with an user input.

Here an example of what I'm looking for:

```
DateTime[] dates = { DateTime.Now, DateTime.UtcNow };
Console.WriteLine(dates.Where(x => x < DateTime.Now));    // I need to know if they are the same without converting them to strings. 
Console.Read(); 
```

I'm using Entity Framework and in the entity class `Dates`, the attributes are DateTime and I need to compare that with a user's input, and the only solution I found was the CreateDate function.

As you know, I cannot compare the POST value directly with a Date attribute. Example:

```
db.dates.Where(x => x.StartDate < "2012-02-13 00:00:00.000")    // error, cannot compare DateTime with string 
```

So, I tried converting the value to DateTime:

```
DateTime start_date = Convert.ToDateTime("2012-02-13 00:00:00.000");
db.dates.Where(x => x.StartDate < start_date )    // PROBLEM!! 
```

Why? Well, the output of `start_date` is:

```
2012-02-13 12:00:00 am 
```

But in the database, the end and start date are as follows:

```
2012-02-13 00:00:00.000    // all have zeros at the end 
```

How can I compare the date when the input date is in `2012-02-13 00:00:00.000` format?

I don't care what to use, I just need the same format and the same data type.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:11:09.497

> 我只需要相同的格式

不，你没有。您需要最合适的数据类型，即`DateTime`（或可能`DateTimeOffset`）并且您需要忘记字符串格式。

“2012-02-13 12:00:00 am”只是值的不同文本表示形式，也可以表示为“2012-02-13 00:00:00.000”。两者都代表 2012 年 2 月 13 日的午夜。只要您的数据库字段是合适的`DateTime`类型，它就根本不重要。你*真的*不需要担心格式。

您*可能*需要担心这些值是 UTC 还是本地时间，但这是另一回事。

（我个人会使用`DateTime.Parse`or`DateTime.ParseExact`而不是`Convert.ToDateTime`，但这是一个稍微不同的问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:16:39.467

使用 DateTime 时，首先需要确定在比较时是否要使用日期和时间。如果你想包含时间，那么你需要**Date.Now**来初始化你的变量。如果您不想包含时间，只需比较数据的日期部分，那么您需要使用**Date.Today**。

*   Date.Now将始终包括**调用**函数的当前时间。
*   Date.Today将始终将**时间**设置为 00:00:00，因此在比较日期时不会干扰。

您需要检查代码的第一件事是确保您只使用 Date.Today。

现在，当我查看您的示例时，我没有发现任何问题。

> 所以，我尝试将值转换为 DateTime
> 
> DateTime star_date = Convert.ToDateTime("2012-02-13 00:00:00.000");
> 
> 走吧，让我们再比较一下：
> 
> db.dates.Where(x=>x.StartDate < start_date )//问题！！
> 
> 为什么？那么， start_date 的输出是：
> 
> 2012-02-13 12:00:00 上午

当您比较 x.StartDate < start_date 时，您没有任何数据是正常的，因为“2012-02-13 12:00:00”等于“2012-02-13 00:00:00.000”。由于您的日期相等，因此您的查询不返回任何数据是正常的。

# javascript - 显示 3 个随机选择的语句

> ID：15882641
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:08:23.347
> 
> 标签：javascript, html

我目前正在设计一个网站，并试图让它从几个列表中随机显示 3 条语句。我设法搜索并找到以下代码，但它一次只显示一件事，我如何修改它以显示列表中的 3 个不同项目（在单独的行上）？

```
<html>
<head>
<title>whynot?</title>
<script type="text/javascript">
var textarray = [
 "why not play some fifa?",
 "why not open a beer?",
 "why not call a relative?",
 "why not challenge someone to a duel?"
];

function RndText() {
  var rannum= Math.floor(Math.random()*textarray.length);
  document.getElementById('ShowText').innerHTML=textarray[rannum];
}

onload = function() { RndText(); }

</script>
</body>
    <body bgcolor="#FFFF00">
        <h1 style="text-align: center;">
            &nbsp;</h1>
        <h1 style="text-align: center;">
        &nbsp;</h1>
    <h1 style="text-align: center;">
        <span style="color:#000000;"><span style="font-family: 'lucida sans unicode', 'lucida grande', sans-serif;"><span style="font-size: 36px;"><span style="line-height: 16px;"><span style="background-color:#ffff00;">
<div id="ShowText"></div></span></span></span></span></span></h1>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:22:59.977

试试[这个](http://jsfiddle.net/TkPW6/)，这将为您提供`distinct`来自`array`.

```
function RndText() 
{
  var x=[];
  while(x.length !== 3)
  {
  var rannum= Math.floor(Math.random()*textarray.length);

   if(x.indexOf(rannum) === -1)
    {
  x.push(rannum);
  document.getElementById('ShowText').innerHTML += textarray[rannum] + "<br> <br> <br>";

    }

   }
} 
```

更新：[**新链接**](http://jsfiddle.net/TkPW6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:10:25.277

只需执行 RndText(); 功能3次：

```
onload = function() { RndText();RndText();RndText(); } 
```

和：

```
function RndText() {
  var rannum= Math.floor(Math.random()*textarray.length);
var item=document.getElementById('ShowText');
  item.innerHTML=item.innerHTML+textarray[rannum];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:13:14.557

```
function RndText() {
    for(var i = 0; i <= 3; i++){
        var rannum= Math.floor(Math.random()*textarray.length);
        document.getElementById('ShowText').innerHTML += textarray[rannum];
   }
} 
```

您需要`+=`打开`innerHTML`它才能显示 3 个不同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:48:38.100

这扩展了 Rajaprabhu 的上述答案，并将语句添加到三个单独的跨度中。

查看小提琴[http://jsfiddle.net/talymo/7VNFM/](http://jsfiddle.net/talymo/7VNFM/)

```
var textarray = [
    "why not play some fifa?",
    "why not open a beer?",
    "why not call a relative?",
    "why not challenge someone to a duel?"];

function RndText() {
    var x = [];
    var html = '';   
    while (x.length !== 3) {
        var rannum = Math.floor(Math.random() * textarray.length);
        if (x.indexOf(rannum) === -1) {
            console.log(x.length);
            x.push(rannum);
            $('#Phrase'+ x.length).html(textarray[rannum]);
        }
    }

} 
```

# angularjs - 可以子范围 $apply 本身而不应用父

> ID：15882645
> 
> 赞同：6
> 
> 时间：2013-04-08T15:08:36.253
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

一个孩子`$scope`（无论是否孤立）是否可以在`$scope.$apply`没有应用父范围的情况下这样做？

在父作用域中有一些昂贵的计算（很难缓存），我不需要角度来重新运行计算。

例如：

```
<div ng-controller="ParentController"> 
{{ expensiveFunction() }}
  <div directive>
    <h1 ng-click="applyChildScopeOnly()">Click {{ value }}</h1>
  </div>
  <div directive>
    <h1 ng-click="applyChildScopeOnly()">Click {{ value }}</h1>
  </div>
<button ng-click="applyChildrenScope()"/> <!-- apply to children scope only -->
</div> 
```

指令：

```
module.directive('directive', ['$document','$rootScope', function ($document,$rootScope) {

  return{
    restrict:'AE',
    scope:{},
    link:function($scope, element, attrs){
        $scope.applyChildScopeOnly = function(){
           $scope.$apply(); // don't apply changes to $parent scope
        };

    }
  }
}]); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T15:39:21.890

您可以调用`$scope.$digest()`而不是`$scope.$apply()`重新评估当前范围及其所有子范围内的手表。调用`$scope.$digest()`不会评估任何父作用域上的任何手表。

作为旁注，幕后`$scope.$apply()`调用。`$rootScope.$digest()`

更多信息在这里：[http](http://docs.angularjs.org/api/ng) ://docs.angularjs.org/api/ng .$rootScope.Scope

# nhibernate - How can i create a criteria for This SQL

> ID：15882647
> 
> 赞同：0
> 
> 时间：2013-04-08T15:08:46.220
> 
> 标签：nhibernate, nhibernate-criteria

I Stuck in this query. If any body know the Criteria of NHibernate please help me

```
 select * from ViewFabricStock VFS where VFS.REORDER_METER > VFS.VIRTUAL_STOCK 
```

`VFS.REORDER_METER` ,`VFS.VIRTUAL_STOCK` is a model property

i would like also know about this query select * from ViewFabricStock VFS where fabricName like LocalizeFabricName

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:25:32.450

我相信您会发现比较同一实体的两个属性的问题

尝试使用`Criteria.XProperty`X = `Ge`or `Le`or的接口`Eq`

使用标准：

```
session.CreateCriteria<ViewFabricStock>("VFS")
        .Add(Restrictions.GeProperty("REORDER_METER","VIRTUAL_STOCK") 
```

使用 QueryOver ：

```
ViewFabricStock vfs = null
session.QueryOver<ViewFabricStock>(() => vfs)
        .Where(Restrictions.GeProperty(
                        Projections.Property(() => realm.REORDER_METER), 
                        Projections.Property(() => realm.VIRTUAL_STOCK))); 
```

# mysql - 绊倒加入并从单独的表中选择

> ID：15882648
> 
> 赞同：0
> 
> 时间：2013-04-08T15:08:46.833
> 
> 标签：mysql, sql, join

我有三个单独的表 - `pages`、`tags`和`pages_tagged`- 分别包含**页面内容**、**标签名称**和**ids**以及带有**标签 id的****页面 id**。

 **我正在尝试设置一个 MySQL 查询，该查询采用搜索词并检查现有标签，找到匹配的标签 ID，并返回带有所述标签的所有页面 - 我已经很好地完成了。但是，当我尝试进一步扩展它以在 pages 表的 title 列中查询匹配字符串时，事情变得有点糟糕。

我的SQL如下：

```
SELECT tags.id, pages_tagged.page_id, pages.id, pages.randomId, pages.title, 
       DATE_FORMAT( pages.dateAdded,  '%M %e, %Y' ) AS dateAdded, 
       pages.viewcount, pages.sessionId 
FROM tags JOIN pages_tagged ON tags.id = pages_tagged.tag_id 
JOIN pages ON pages_tagged.page_id = pages.randomId 
WHERE (tags.tag = 'ovechkin' OR pages.title LIKE '%ovechkin%')
ORDER BY dateAdded DESC 
```

我知道这里的操作顺序是非常错误的，但是我无法用正确的方法来修改这个查询以使其正常工作。

谁能指出我明显的错误？

**编辑：**

当查询运行时，为了澄清“肚皮上扬”，它是“成功的”。但是，不会返回任何行。

如下修改 WHERE 子句以隔离 pages.title LIKE '%ovechkin%' 永远不会导致返回的行，无论搜索词是什么。

```
WHERE (pages.title LIKE '%ovechkin%') 
```

**编辑2：**

下面的示例数据。

```
pages
╔════╦════════════════════════╦═════════════════════╦══════════╦═══════════╗
║ id ║         title          ║      dateAdded      ║ randomId ║ viewcount ║
╠════╬════════════════════════╬═════════════════════╬══════════╬═══════════╣
║ 57 ║ Ovechkin looping about ║ 2013-04-07 19:26:06 ║ xp3rvju  ║         5 ║
╚════╩════════════════════════╩═════════════════════╩══════════╩═══════════╝

tags
╔════════╦══════════╗
║ id     ║ tag      ║
╠════════╬══════════╣
║     25 ║ ovechkin ║
╚════════╩══════════╝

pages_tagged
╔══════════════════╗
║ tag_id | page_id ║
╠══════════════════╣
║ 25 | xp3rvju     ║
║ 25 | mpbjbk6     ║
╚══════════════════╝ 
```

**编辑3：**

如建议的那样， a`RIGHT JOIN`开始`pages.title`工作。修改后的查询是：

```
SELECT tags.id, pages_tagged.page_id, pages.id, pages.randomId, pages.title, 
   DATE_FORMAT( pages.dateAdded,  '%M %e, %Y' ) AS dateAdded, 
   pages.viewcount, pages.sessionId 
FROM tags RIGHT JOIN pages_tagged ON tags.id = pages_tagged.tag_id 
RIGHT JOIN pages ON pages_tagged.page_id = pages.randomId 
WHERE (tags.tag = 'ovechkin' OR pages.title LIKE '%ovechkin%')
ORDER BY dateAdded DESC 
```

剩下的一个问题是，如果一个页面在其标题和相关标签中具有相同的搜索词，它将返回两次。我尝试将其修改为包含`DISTINCT`在选择中，如下所示，但这对返回的行没有影响。

```
SELECT DISTINCT tags.id, pages_tagged.page_id, pages.id, pages.randomId, pages.title, 
   DATE_FORMAT( pages.dateAdded,  '%M %e, %Y' ) AS dateAdded, 
```

**编辑4：**

也可以包括防止重复的最终解决方案 - `GROUP BY`.

```
SELECT tags.id, pages_tagged.page_id, pages.id, pages.randomId, pages.title, 
   DATE_FORMAT( pages.dateAdded,  '%M %e, %Y' ) AS dateAdded, 
   pages.viewcount, pages.sessionId 
FROM pages 
LEFT JOIN pages_tagged ON pages.randomId = pages_tagged.page_id 
LEFT JOIN tags ON tags.id = pages_tagged.tag_id 
WHERE (tags.tag = 'ovechkin' OR pages.title LIKE '%ovechkin%')
GROUP BY pages.randomId
ORDER BY dateAdded DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:24:38.690

尝试以下操作：

```
 select * from
   (SELECT tags.id as tid, pages_tagged.page_id, pages.id, pages.randomId, pages.title, 
           DATE_FORMAT( pages.dateAdded,  '%M %e, %Y' ) AS dateAdded, 
           pages.viewcount, pages.sessionId 
    FROM tags JOIN pages_tagged ON tags.id = pages_tagged.tag_id 
    JOIN pages ON pages_tagged.page_id = pages.randomId 
    WHERE tags.tag = 'thang' 
    union
    ( SELECT tags.id as tid, pages_tagged.page_id, pages.id, pages.randomId, pages.title, 
           DATE_FORMAT( pages.dateAdded,  '%M %e, %Y' ) AS dateAdded, 
           pages.viewcount, pages.sessionId 
     FROM pages JOIN pages_tagged on pages_tagged.page_id = pages.randomId
     JOIN tags ON tags.id = pages_tagged.tag_id   
     WHERE           pages.title LIKE '%thang%'
    )
  ) as a
    ORDER BY a.dateAdded DESC 
```

这样，它将在“正确”页面之后选择第一个“正确”标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:36:19.947

了解连接的一般工作原理很重要，这里有一个简单的解释： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

由于您正在寻找`OR`与标题匹配的标签，我猜您想使用 a`RIGHT JOIN`作为关系，因为此查询不会返回任何未标记的页面。

目前，如果您有一个带有标题`ovechkin`但没有标签的页面，您将无法使用此查询找到它。

这就是我尝试过的：[http ://sqlfiddle.com/#!2/c25c5/2](http://sqlfiddle.com/#!2/c25c5/2)

通常，构建查询的方式意味着您将获取所有标记，然后加入任何标记的页面。没有该`WHERE`子句的行为如下：

执行正常`JOIN`只会返回标记页面，如果数据库中没有标记，您将不会得到单行。

`LEFT JOIN`即使没有标记任何页面，使用 a方法您也可以获得每个标记的结果。

使用`RIGHT JOIN`意味着您将获得所有页面的所有结果行，即使没有标签或没有标签页面。

对于所有这些，任何没有数据的字段都将被填充为空。

我建议将查询更改为此（为了便于阅读，删除了某些字段）：

```
SELECT tags.id, pages_tagged.page_id, pages.id, pages.randomId
FROM pages 
LEFT JOIN pages_tagged ON pages.randomId = pages_tagged.page_id 
LEFT JOIN tags ON tags.id = pages_tagged.tag_id

WHERE (tags.tag = 'ovechkin' OR pages.title LIKE '%ovechkin%') 
```

如果同一页面有多个标签，您将获得不止一次。**

# angularjs - 如何在 ngRepeat 中延迟 ngAnimate

> ID：15882649
> 
> 赞同：22
> 
> 时间：2013-04-08T15:08:47.730
> 
> 标签：angularjs, angularjs-ng-repeat, ng-animate

当使用 ngAnimate 淡入 ngRepeat 中的每个项目时，当前所有项目同时淡入。是否有可能在前一个项目褪色到例如 50% 后，每个项目都淡入，从而导致级联效果？

```
<ul>
   <li ng-repeat="phone in phones" ng-animate="{enter: 'phone-fade-enter'}">
     <img src="{{phone.img}}"> {{phone.name}}
   </li>
</ul> 
```

使用 ngAnimate 如果可以延迟每个项目的动画效果会很好，例如：

```
<li ng-repeat="phone in phones" ng-animate="{enter: 'phone-enter', delay: 500}"> 
```

有没有办法解决这个问题？

谢谢！

添加到 GitHub [https://github.com/angular/angular.js/issues/2460](https://github.com/angular/angular.js/issues/2460)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-11-08T03:12:23.687

现在 1.2 原生支持此功能：[https ://docs.angularjs.org/api/ngAnimate#css-staggering-animations](https://docs.angularjs.org/api/ngAnimate#css-staggering-animations)

要使用它，`ng-enter-stagger`请在 CSS 中使用选择器，如下所示：

**CSS：**

```
.animated.ng-enter-stagger {
  transition-delay: 0.3s;
  animation-delay: 0.3s;
} 
```

**萨斯（如果正在使用）：**

```
=stagger($delay)
  &-stagger
    transition-delay: $delay
    animation-delay: $delay

.animated
  &.ng-enter
    +stagger(0.3s) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-24T16:03:18.273

您可以通过在重复元素上设置过渡延迟样式来获得此效果。（需要 v1.1.5）

```
<li ng-repeat="phone in phones" ng-animate="{enter: 'phone-enter'}" style="transition-delay: {{$index * 500}}ms"> 
```

您必须在 CSS 中单独设置过渡属性，否则内联样式将覆盖整个过渡：

```
.phone-enter {
  opacity:0;
  -webkit-transition-property: all;
  -webkit-transition-timing-function: ease-out-cubic;
  -webkit-transition-duration: 400ms;
}
.phone-enter.phone-enter-active {
  opacity: 1;
} 
```

这是heyotwell 创建[的示例的一个分支。](http://plnkr.co/edit/D46PSH?p=preview)

# c - C - 长度由变量定义的静态数组

> ID：15882650
> 
> 赞同：1
> 
> 时间：2013-04-08T15:08:50.363
> 
> 标签：c, arrays, variables, initialization

我实际上正在使用 C 语言进行分配，并且为了实现我的需要，我需要使用静态数组，比方说

```
static int array[LEN]; 
```

诀窍是这个数组长度 ,`LEN`是在`main()`. 例如

```
static int LEN;

void initLen(int len) {
LEN = len;
}

static int array[LEN]; 
```

Where 在`initLen`中被调用`main`，并`len`使用用户给出的参数计算。

这个设计的问题是我得到了错误

```
threadpool.c:84: error: variably modified ‘isdone’ at file scope 
```

错误是由于我们无法使用变量作为长度来初始化静态数组。为了让它工作，我定义了一个`LEN_MAX`并写

```
#define LEN_MAX 2400

static int array[LEN_MAX] 
```

这种设计的问题是我暴露自己的缓冲区溢出和段错误:(

所以我想知道是否有一些优雅的方法来初始化具有确切长度的静态数组`LEN`？

先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T15:10:12.000

```
static int LEN;
static int* array = NULL;

int main( int argc, char** argv )
{
    LEN = someComputedValue;
    array = malloc( sizeof( int ) * LEN );
    memset( array, 0, sizeof( int ) * LEN );
    // You can do the above two lines of code in one shot with calloc()
    // array = calloc(LEN, sizeof(int));
    if (array == NULL)
    {
       printf("Memory error!\n");
       return -1;
    }
    ....
    // When you're done, free() the memory to avoid memory leaks
    free(array);
    array = NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:12:53.170

我建议使用`malloc`：

```
static int *array;

void initArray(int len) {
   if ((array = malloc(sizeof(int)*len)) != NULL) {
      printf("Allocated %d bytes of memory\n", sizeof(int)*len);
   } else {
      printf("Memory error! Could not allocate the %d bytes requested!\n", sizeof(int)*len);
   }
} 
```

现在不要忘记在使用它之前初始化数组。

# java - Java ArrayList String Separation

> ID：15882656
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:09:06.587
> 
> 标签：java, string, arraylist, integer, substring

Here is my code:

```
import java.util.ArrayList;

public class SplitString 
{
    public static void main(String[] args) 
    {
        String s = "80+5+3*(11%(3*2)-(5+1)+6)-(10+10)+(2*2)*5";
        ArrayList<String> equation = new ArrayList<>();
        String ns = "";
        String b;
        int nsi;

        for(int c=0; c<s.length(); c++)
        {
             b = s.substring(c,c+1);
            switch (b) {
                case "0":
                case "1":
                case "2":
                case "3":
                case "4":
                case "5":
                case "6":
                case "7":
                case "8":
                case "9":
                    ns += b;
                    break;
                case "+":
                case "-":
                case "*":
                case "/":
                case "%":
                case "(":
                case ")":
                    nsi = Integer.parseInt(ns);
                    equation.add(Integer.toString(nsi));
                    equation.add(b);
                    ns = "";
                    break;
            }

             for(int i=0; i<equation.size(); i++)
             {
                 System.out.print(equation.get(i));
             }
        }
    }
} 
```

I'm trying to split the String s into separate numbers and operators within an `ArrayList` in such a way that if a number like `00080` is entered, it will assume the number as `80` instead. But I'm having trouble, and when I run this it gives me:

```
Exception in thread "main" java.lang.NumberFormatException: For input string: ""
80+80+80+5+80+5+80+5+3*
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:504)
    at java.lang.Integer.parseInt(Integer.java:527)
    at stringequationfull.StringEquationFull.main(StringEquationFull.java:42)
Java Result: 1

```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:14:12.673

您正在尝试将空字符串解析为 int；因此例外。您处理运算符的逻辑是错误的。您的代码假定运算符之间总是有一个数字，但是如果您查看方程式，显然情况并非如此。（查看括号的出现。）引发异常是因为，如消息所述，`ns`是空字符串。

您将需要开发更通用的解析逻辑。在网上搜索“parse equation java”以获取有关如何执行此操作的大量示例。如果您只是想要评估方程式的能力，请查看[此线程](https://stackoverflow.com/questions/4681959/algebra-equation-parser-for-java)或[此](https://stackoverflow.com/questions/1432245/java-parse-a-mathematical-expression-given-as-a-string-and-return-a-number)线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T15:15:50.730

`nsi = Integer.parseInt(ns);`将[抛出](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)：

> NumberFormatException -**如果字符串不包含可解析的整数。**

调试您的代码，您会发现它`ns` **不**包含可解析的整数。（提示：为空）

*提示*：*[堆栈跟踪](https://stackoverflow.com/questions/12688068/how-to-read-and-understand-the-java-stack-trace)*信息量很大，您可以很容易地知道问题发生在哪里以及*为什么**会*发生。一个简单的调查将引导您解决问题。*在这种情况下，它是从parseInt* (Class Integer)抛出的异常，您可以在那里看到该方法的良好文档。这将极大地帮助您找出问题所在。

# excel - 根据特定标准计算每个国家/地区的公司（在 Excel 中）

> ID：15882660
> 
> 赞同：0
> 
> 时间：2013-04-08T15:09:17.413
> 
> 标签：excel

我在同一个工作簿中有以下 2 个 excel 表：

公司：

```
 A          B            C         D
1 COMPANY   COUNTRY      SECTOR    SUBSECTOR
2 Apple     USA          Hardware  Consumer
3 Microsoft USA          Software  Consumer and Business
4 Samsung   Taiwan       Hardware  Business
5 Philips   Netherlands  Hardware  Consumer and Business
6 Tulip     Netherlands  Hardware  Business 
```

国家：

```
 A             B         C           D
1 COUNTRY      NUM_COMP  NUM_SECTOR  NUM_SUB
2 USA             2         1           0
3 Taiwan          1         1           0
4 Netherlands     2         2           1 
```

在工作表`countries`栏中`B`，我需要每个国家/地区的公司数量。感谢@barry houdini，我使用以下内容：

```
=COUNTIF(companies!B$2:B$4;A2) 
```

但是，我需要额外的计数。在列`C`中：该行业每个国家/地区的公司数量`Hardware`。在列中：每个国家/地区在`D`该`Hardware`部门*和*`Consumer and Business`子部门中的公司数量。我已经在上面手动计算了这些计数，但需要一个公式来自动计算它们。

任何人都可以帮助我吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:16:54.603

对于硬件部门的国家/地区，请尝试像这样的 COUNTIFS

`=COUNTIFS(companies!B$2:B$100;A2;companies!C$2:C$100;"hardware")`

您可以添加更多条件，以便第二次尝试

`=COUNTIFS(companies!B$2:B$100;A2;companies!C$2:C$100;"hardware";companies!D$2:D$100;"Consumer and Business")`

您需要 Excel 2007 或更高版本才能使用`COUNTIFS`

# bit-manipulation - 这种神奇的位计数方法是如何工作的？

> ID：15882664
> 
> 赞同：3
> 
> 时间：2013-04-08T15:09:32.037
> 
> 标签：bit-manipulation, modulo, magic-numbers, hammingweight, bitcount

在处理 XKCD 愚人节的绞链[散列冲突问题](https://stackoverflow.com/questions/15769093/xkcd-externalities)时，我遇到了这种[奇怪的、快速的、乘法](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSet64)计算单词中设置位的方法：

```
c = (v * 0x200040008001ULL & 0x111111111111111ULL) % 0xf; 
```

为什么这样做/发生了什么？我们能否推广这种方法（例如，从问题中处理我们的 128 位值）？

另外，我不禁认为这与这个关于[使用聪明的幻数移动位的](https://stackoverflow.com/q/14547087/823263)问题有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:49:15.760

实际上，这不计算 32 位字中的设置位，因为根据模运算符的性质，输出必须小于`0xf`（又名 15）。

首先，让我们特别注意模运算符。为什么是15？为什么我们要屏蔽每个 nybble 中的最低有效位？

好吧，请注意，每个最低有效 nybble 位都是`16^k`some的值`k`。注意`16 mod 15`是 1，因此`16^k mod 15`对于 的任何非负整数值都是 1 `k`。

这很方便，因为它意味着`16^k1 + 16^k2 + ... + 16^kn = n mod 15`.

换句话说，由于上述数学运算，模运算符有效地计算了设置的最低有效 nybble 位的数量——只要 nybbles 中没有设置其他位。（他们只会碍事。）

但是，我们不想只计算 nybbles 中特殊格式的位。我们想计算任意值中设置的位数。诀窍是通过移动这些位将这些值位放入那些特殊格式化的 nybbles 中。nybbles 的最终顺序并不重要，只要我们可以将值的一位移动到一个 nybble 即可。理论上，由于我们使用 64 位值进行计数，因此我们可以将 16 位值中的每个位映射到其自己的 nybble，从而`4 * 16 = 64`在 64 位允许范围内给出总计位。但是，请注意，因为我们使用的是模 15，所以任何具有 15 或 16 个设置位的值都将分别显示为 0 或 1。

现在让我们重新关注这个奇怪的常数：`0x200040008001ULL`

让我们注意设置了哪些位（其中位`0`是最低有效位）：0、15、30 和 45。您可能已经注意到它们以 15 位为间隔。这很方便，因为对于小`2^15`于此乘法的值只会在 64 位字中创建该值的多个移位副本。但是，当值变得等于或大于时`2^15`，副本开始叠加重叠，这对于特别计算位不再有用。不过没关系，因为通过模运算，我们甚至无法可靠地计算多达 15 位的信息。（但是，如果模运算的结果是 0，我们知道所有或没有设置所有位，再次假设我们只得到小于 2^15 的值。）

因此，我们在 64 位寄存器中移动了 15 位数字的副本。第二步是掩码只提取每个 nybble 的最低有效位。因为每个 nybble 的最低有效位等效于`1 (mod 15)`模运算符有效地计算 nybbles 中设置的最低有效位的数量。

剩下的唯一细节是确保我们的 15 位数字中的每个位恰好落在最低有效 nybble 位槽中一次。

让我们检查：

```
The first bit set, 0, doesn't shift the value at all, giving our value bits 0 through 14.
This places value value bits 0, 4, 8, and 12 in a least significant nybble bit slot.

The second bit set, 15, gives our value bits 15 through 29.
This places our value bits 1, 5, 9, and 13 in bits 16, 20, 24, and 28.

The third bit set, 30, gives our value bits 30 through 44.
This places our value bits 2, 6, 10, and 14 in bits 32, 36, 40, and 44.

Finally, the forth bit set, 45, gives our value bits 45 through 59.
This places our value bits 3, 7, 11, and 15 in bits 48, 52, 56, and 60.

Bits accounted for:
0, 4, 8,  and 12
1, 5, 9,  and 13
2, 6, 10, and 14
3, 7, 11, and 15 
```

很容易直观地验证这映射 16 位。但是，请注意掩码实际上是 15 `1`，而不是 16。因此，放置在最后一个 nybble 中的位（从第 60 位开始，代表我们值的第 15 位，16 位值的最高位）被有效地忽略了。

这样，整个技术就完成了：

1.  使用乘法将每个位映射到最低有效 nybble 位。
2.  使用掩码仅选择所需的 nybble 位。
3.  请注意，最低有效 nybble 位等价于`1 (mod 15)`.
4.  因此，`(mod 15)`只需将这些位相加……最多设置 14 位。

# python - How to read out scroll wheel info from /dev/input/mice?

> ID：15882665
> 
> 赞同：5
> 
> 时间：2013-04-08T15:09:32.663
> 
> 标签：python, linux, input, mouse, mousewheel

For a home robotics project I need to read out the raw mouse movement information. I partially succeeded in this by using the python script from [this SO-answer](https://stackoverflow.com/a/12286738/1650012). It basically reads out /dev/input/mice and converts the hex-input into integers:

```
import struct
file = open( "/dev/input/mice", "rb" )

def getMouseEvent():
  buf = file.read(3)
  button = ord( buf[0] )
  bLeft = button & 0x1
  bMiddle = ( button & 0x4 ) > 0
  bRight = ( button & 0x2 ) > 0
  x,y = struct.unpack( "bb", buf[1:] )
  print ("L:%d, M: %d, R: %d, x: %d, y: %d\n" % (bLeft,bMiddle,bRight, x, y) )

while True:
  getMouseEvent()
file.close() 
```

This works fine, except for the fact that the scroll wheel information is missing. Does anybody know how I can get (preferably with python) the scroll wheel information from /dev/input/mice?

[EDIT] Okay, although I didn't manage to read out the /dev/input/mice, I think I found a solution. I just found the evdev module (sudo pip install evdev) with which you can read out input events. I now have the following code:

```
from evdev import InputDevice
from select import select
dev = InputDevice('/dev/input/event3') # This can be any other event number. On my Raspi it turned out to be event0
while True:
    r,w,x = select([dev], [], [])
    for event in dev.read():
        # The event.code for a scroll wheel event is 8, so I do the following
        if event.code == 8:
            print(event.value) 
```

I'm now going to test this on my raspi and see how that works. Thanks for all the inspiration guys and girls!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:20:30.127

如果 /dev/input/mice 中每个事件只有 3 个字节，这意味着您的鼠标配置为无轮 PS/2 鼠标。如果您将鼠标配置为 IMPS/2 鼠标，则 /dev/input/mice 中应该有每个事件的第四个字节。最后一个字节将包含车轮信息。

# database - 如何将存储过程添加到 Oracle 数据库？

> ID：15882668
> 
> 赞同：0
> 
> 时间：2013-04-08T15:09:36.450
> 
> 标签：database, oracle, stored-procedures

通过 SQL Developer，我向Oracle 数据库添加了一个*新的存储过程。*它不仅列在存储过程列表中（与所有其他 SP 一起），而且我可以在 SQL Developer 上轻松执行它。

问题是我似乎无法从外部应用程序执行它。数据库链接到它，我可以调用所有其他存储过程，但不能调用我刚刚创建的那个。我得到的错误信息是：

**ORA-06550：第 1 行，第 7 列：PLS-00201：必须声明标识符“SETDATE” ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略**

我已经从其他有效的 SP 复制了访问和权限配置，但它并没有真正改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:30:14.703

调试这类事情时的一件好事是：

```
SELECT owner, object_name, object_type
FROM   all_objects
WHERE  object_name IN( 'PROCEDURE_WHICH_WORKS', 'PROCEDURE_WHICH_DOESNT' ) 
```

如果 SQL*Developer 在错误的模式中创建它或者缺少同义词或类似的东西，这应该很明显。如果都一样，那么您需要查看可能缺少的 GRANT EXECUTE 权限。

您确定 SQL*Developer 和您的外部程序以完全相同的用户身份连接吗？只是为了确保你能

```
SELECT user FROM dual 
```

# linux - Bash：日期“%b”和日期“%h”（当然）日期“%B”都给出月份的全名？

> ID：15882670
> 
> 赞同：4
> 
> 时间：2013-04-08T15:09:49.977
> 
> 标签：linux, bash, shell, ubuntu-12.04

我正在 Ubuntu 服务器 12.04 中编写一个 shell 脚本，它应该比较日志文件中的一些数据。在日志文件中，日期以以下格式给出：

```
[Mon Apr 08 15:02:54 2013] 
```

如您所见，它声明**Apr**。

根据[手册页](http://ss64.com/bash/date.html)，为此在 bash 中使用的选项是**b**或**h**。

但是，无论我（在我的比较脚本中，还是直接在 shell 中）使用**b**、**h**或**B**都没有关系。它们都返回月份的全名。

```
date +"%b" #Returns april (should have returned Apr)
date +"%h" #Returns april (should have returned Apr)
date +"%B" #Returns april (correct? Should it not be capital A?) 
```

这当然使得根据日期进行比较变得非常困难......

有没有其他人经历过这个，并找到了解决方案？

（我不确定这是否相关，但我在安装服务器时选择了挪威语作为安装语言。）

感谢@toro2k 在这里的回答，我最终得到了一个可行的解决方案：

```
DATE=`LC_ALL=C date +%b" "%d" "%H` 
```

（这不起作用：

```
LC_ALL=C 
```

日期=`date +%b" "%d" "%H`

)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:33:31.953

我已经测试过了，问题似乎是挪威本地化：

```
$ LC_ALL=C date +%b
Apr

$ LC_ALL=nn_NO.UTF-8 date +%b
april 
```

因此，当您尝试解析日志文件时，您应该将`LC_ALL`环境变量设置为`C`，即

```
LC_ALL=C command 
```

或者

```
export LC_ALL=C
# your script code here
export -n LC_ALL 
```

有关区域设置的更多信息，请参阅Ubuntu wiki上的[区域设置页面。](https://help.ubuntu.com/community/Locale)

# xml - 在 eclipse plugin.xml 中引用静态最终变量

> ID：15882672
> 
> 赞同：0
> 
> 时间：2013-04-08T15:10:02.000
> 
> 标签：xml, eclipse, variables, plugins

是否有一种简单的方法（或任何方法）来引用插件项目的 plugin.xml 文件中的静态变量？

例如，如果我在包 pkg 中有这样的类：

```
public class ClassWithVariable {
    public static final String VAR = "abc";
} 
```

我想说一个带有这个字符串作为标签的菜单项......

```
<menu
    label = pkg.ClassWithVariable.VAR
> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:39:55.450

不，这是不可能的。您必须使用 MANIFEST.MF 中的 Bundle-Localization 声明的插件属性本地化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:15:57.670

请阅读[有关 Eclipse 插件本地化的教程](http://www.vogella.com/articles/EclipseInternationalization/article.html)。您的问题通过将字符串移动到属性文件中得到解决，然后可以从 Java 代码和 plugin.xml 访问该文件。

你想象的方式是不可能的。

# stream - Smalltalk 的 ReadWrite 流“atEND”评估没有效果

> ID：15882682
> 
> 赞同：2
> 
> 时间：2013-04-08T15:10:15.600
> 
> 标签：stream, udp, smalltalk, visualworks

我正在评估以下块：

```
[byteStream atEnd] whileFalse: [stream nextPut: self parsePacket] 
```

问题是我的“字节流”是一个读写流，在它的末尾，（我检查它并且位置=读取限制=写入限制=512）并且我的循环没有停止，例如：“[ byteStream atEnd]" 没有效果。我在 linux 下使用 VisualWorks 7.9.1，我的 byteStream 是通过 UDP 套接字提供的。欢迎任何帮助。

这是服务器代码：

```
listenOnPort: aPort
| server peerAddr |
self initialize.
server := SocketAccessor newUDPserverAtPort: aPort.
peerAddr := IPSocketAddress hostName:'localhost' port: aPort.
process := 
        [
        [| buf sizeOfBuf |
        buf := String new: 2048.
        sizeOfBuf := server bufferSize.
        sizeOfBuf > 0
            ifTrue: 
                [| dataStream |
                server readWait.
                server receiveFrom: peerAddr buffer: buf.
                dataStream := ReadStream on: buf from: 1 to: sizeOfBuf.
                dataStream reset.
                self receive: dataStream]]
                repeat.]
                fork. 
```

这是解析缓冲区中包含的内容的代码：

```
parse
^ Array streamContents: [:stream |
    [byteStream atEnd] whileFalse: [stream nextPut: self parsePacket] 
        ] 
```

解析方法中的循环是问题所在，我在 windows xp 32bit 上尝试了代码，它工作正常，但在 linux 32bit 上却没有，我认为它与操作系统 UDP 网络有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:32:31.050

我发现问题出在哪里。我正在使用一种解析 OSC BUNDLE 大小的方法来调整缓冲区的大小，但是这种方法有问题，它每次都将“0”作为位置发送到缓冲区。所以每次循环在其初始位置找到缓冲区然后继续循环，这是合乎逻辑的。感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:47:20.587

“循环继续”是什么意思？显然它不能继续读取不存在的数据包。是否有可能因为您对缓冲区大小设置了硬编码限制，所以您在缓冲区末尾有一个未完成的数据包，因此它无法尝试读取其余部分？

# c# - 在新线程上调用静态方法

> ID：15882685
> 
> 赞同：0
> 
> 时间：2013-04-08T15:10:20.763
> 
> 标签：c#, asp.net, multithreading

假设我有一个像这样的静态方法：

```
public static string ProcessMessage()
{
     string testString = " this is test ";
     ....
     return testString ;
} 
```

和另一种方法SendMessage：

```
public void SendMessage()
{
     Thread th = new Thread(this.ProcessMessage);
     th.Start();
     th.Join();
} 
```

当 SendMessage 被一个接一个地调用多次时会发生什么。

假设第一个线程调用 ProcessMessage 并且在第 1 行，另一个线程调用 ProcessMessage，那么第一个线程会发生什么？它会完成吗，因为 ProcessMessage 是一个静态方法？ProcessMessage 属性会是什么样子？线程 2 会覆盖线程 1 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:15:29.583

为了回答您的一般问题，多个线程可以调用一个静态方法，每个线程将分别处理该方法调用。如果在静态方法中使用静态变量，那么您可能会遇到跨线程问题，因为这些变量在多个线程之间共享，但方法代码本身只是一组指令，无论线程进入它都会遵循.

关于您的具体示例，[线程构造函数](http://msdn.microsoft.com/en-us/library/b52fsw6w.aspx)只能传递一个[ParameterizedThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)或一个[ThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.threadstart.aspx)对象（可能还有一个 Int32）。两种类型的 ThreadStart 参数都是具有 void 签名的委托（它们不能返回任何内容）。

此外，由于您调用的是 Thread.Start，然后是[Thread.Join](http://msdn.microsoft.com/en-us/library/system.threading.thread.join.aspx)。Thread.Join 阻塞调用线程，直到等待线程完成。既然如此，从同一个线程多次调用 SendMessage() 将永远不会产生多个并发线程。相反，每次调用都会创建一个新线程，然后等待它完成，然后再继续下一次调用 SendMesage()。这并不比在原始线程中简单地调用 ProcessMessage 更好。

# php - php readfile('/home/myhome/video.mp4')

> ID：15882686
> 
> 赞同：1
> 
> 时间：2013-04-08T15:10:23.177
> 
> 标签：php, file, file-upload

你好，我已经在这个脚本上工作了两个星期，但我不知道该怎么做。
我正在使用 PHP，我想下载视频，问题在于“readfile”函数不适用于 /var/www 中的文件，这是一个问题，因为我有很多视频并且 / 中没有足够的空间分割。这是我的脚本谢谢。

```
$fichero = "/home/myhome/Video/$video";

if (file_exists($fichero)) {
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename='.basename($fichero));
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header('Content-Length: ' . filesize($fichero));
        ob_clean();
        flush();
        readfile($fichero);
        exit;
}else{
    die("The File $fichero does not exist");
} 
```

我仔细检查了地址并增加了下载的最大大小，所以如果您有任何解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:17:56.520

您可以使用 mod rewrite 来执行此操作：

[http://httpd.apache.org/docs/2.2/urlmapping.html](http://httpd.apache.org/docs/2.2/urlmapping.html)

使用类似的东西：

```
RewriteEngine On
Alias /videos /home/myhome/Video 
```

它将任何文件映射`/home/myhome/Video/`到`www.site.com/videos/`

或者您可以更具体一点，并进行基于正则表达式的匹配：

```
RewriteEngine On
ScriptAliasMatch ^/videos/([^\.])+.mp4 /home/myhome/Video/$1.mp4 
```

它将映射任何与规则匹配的文件：`/videos/everythingexepctadot.mp4`并将其映射到`/home/myhome/Video/matchedtext.mp4`

将此与一些 RewriteCond 结合起来，您就有了一种从非 Web 根目录提供数据的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:32:09.497

请先检查目录读/写权限。只需尝试以下代码以动态设置权限。

```
chmod("/home/myhome/Video/", 0644);

$fichero = "/home/myhome/Video/$video";

if (file_exists($fichero)) {
 //Your Code   
}else{
//Your Code   
} 
```

干杯，
**简森。**

# javascript - 我在哪里将 jQuery .fade() 函数放在 ajax 成功回调中？

> ID：15882687
> 
> 赞同：0
> 
> 时间：2013-04-08T15:10:23.560
> 
> 标签：javascript, ajax, jquery, fadein

我有一个 ajax 调用，它使用它在成功回调中返回的 html 填充我的页面的一部分：

```
function LoadCurrentCourses(masterKey, status) {
status = 'S';
$.ajax({
    type: "GET",
    url: "/Home/LoadCurrentCourses/?masterKey=" + masterKey + "&status=" + status,
    dataType: "html",
    success: function (evt) {
        $('#currentCourses').fadeIn(1500, function () { $('#currentCourses').html(evt) });
    },
    error: function (req, status, error) {
        $('#currentCourses').html("<p>Error occured retrieving current courses</p>");
    }
}); 
```

}

#currentCourses 标记只有一个标题并在其中加载 .gif。

```
<div class="span4 moduleBox" id="currentCourses">
    <h2>Current Courses</h2>
    <img style="margin-left: 45%; margin-top: 5%; margin-bottom: 5%;" src="~/Images/11.gif" />
</div> 
```

ajax 是从我在 doc.ready() 上的主页调用的：

```
 <script>
    $(document).ready(function () {
        var masterKey = '@Model.MasterKey';

        //load degree overview
        LoadCurrentCourses(masterKey);

    });
</script> 
```

我想要做的是返回数据之一，我希望 html 慢慢淡入主页，替换 gif 和标题。现在它工作正常，一切都加载并被替换，但我似乎无法弄清楚我应该把 jQuery .fadein() 方法放在哪里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:13:49.533

您应该在淡入之前加载文本

```
success: function (evt) {
    $('#currentCourses').html(evt);
    $('#currentCourses').fadeIn(1500);
}, 
```

您可能还需要在淡入之前淡出或隐藏该容器，否则它似乎什么都不做，只是加载新数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:13:19.287

应该是这样的：

```
success: function (evt) {
    $('#currentCourses').html( evt ).fadeIn(1500);
} 
```

**填充元素后**淡入，否则`.html()`在`.fadeIn()`回调中调用将导致：

```
fade--(fade ends)-->--(HTML applied) 
```

# asp.net - 在 asp.net 中单击 Enter 按钮

> ID：15882694
> 
> 赞同：2
> 
> 时间：2013-04-08T15:10:36.613
> 
> 标签：asp.net, telerik, enter

我的页面中有几个面板，每个面板都有一个提交和清除按钮。我正在尝试将输入焦点设置为我的提交按钮。

我的徽标中有一个图像按钮，每次用户点击输入时，它都会在 imageclick 上下载文件。

有人可以建议我如何将输入焦点设置为我的提交按钮。有什么想法吗？

```
 <asp:Panel ID="Panel2" runat="server" Width="100%" ForeColor="Black" DefaultButton="btnSubmit">

     <telerik:RadButton ID="btnSubmit" runat="server"  TabIndex="1" OnClick="OnSubmitClick" CausesValidation="true" />

       <telerik:RadButton ID="btnclearall" runat="server" OnClick="OnClearAllClick"        CausesValidation="false" />

      </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:19:02.680

尝试标签中的`defaultfocus`属性，`<form>`

```
<form id="form1" runat="server" defaultfocus="btnSubmit" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T16:54:58.527

您是否尝试过 UseSubmitBehavior 属性？

```
<telerik:RadButton ID="btnSubmit" runat="server"  TabIndex="1" OnClick="OnSubmitClick" CausesValidation="true" UseSubmitBehavior="true" /> 
```

将其他按钮设置为 false。从技术上讲，您不必将 UseSubmitBehavior 设置为 true，因为它是默认设置，但将所有其他设置为 false 可能会有所帮助。

# c++ - 如何将 MATLAB 的 mex 设置引导到 Microsoft Windows SDK 以进行 C++ 编译？（设置位置错误）

> ID：15882696
> 
> 赞同：1
> 
> 时间：2013-04-08T15:10:47.917
> 
> 标签：c++, windows, matlab, compilation, mex

我在`Windows Vista`，并且想用它`MATLAB`来编译`C++`函数。我只有`lcc compiler`系统上的，运行时可以看到`mex -setup`：

```
mex -setup
Welcome to mex -setup.  This utility will help you set up  
a default compiler.  For a list of supported compilers, see  
http://www.mathworks.com/support/compilers/R2011a/win32.html 
Please choose your compiler for building MEX-files: 
Would you like mex to locate installed compilers [y]/n? y
Select a compiler: 
[1] Lcc-win32 C 2.4.1 in C:\PROGRA~1\MATLAB\R2011a\sys\lcc 
[0] None 
Compiler: 
```

因为 lcc 不适用于 C++，所以我从[这里（windows 站点）安装了](http://www.microsoft.com/en-gb/download/details.aspx?id=8279)**Windows SDK 7.1**。我跑来查看它安装到的目录并查看. 然后我再次运行将编译器设置为，告诉不要找到已安装的编译器，我选择该选项，然后 MATLAB 默认查看的路径是; . 我尝试覆盖它，但在那里它不起作用。以下是采取的具体行动：`Windows SDK 7.1 Command Prompt``C:\Program Files\Microsoft SDKs\Windows\v7.1``mex -setup``Microsoft Visual C++ 2010``mex``Microsoft Visual C++ 2010``Visual Studio``C:\Program Files\Microsoft Visual Studio 10.0`

```
>> mex -setup
Welcome to mex -setup.  This utility will help you set up  
a default compiler.  For a list of supported compilers, see  
http://www.mathworks.com/support/compilers/R2011a/win32.html 
Please choose your compiler for building MEX-files: 
Would you like mex to locate installed compilers [y]/n? n
Select a compiler: 
[1] Intel C++ 11.1 (with Microsoft Visual C++ 2008 SP1 linker) 
[2] Intel Visual Fortran 11.1 (with Microsoft Visual C++ 2008 SP1 linker) 
[3] Intel Visual Fortran 11.1 (with Microsoft Visual C++ 2008 Shell linker) 
[4] Lcc-win32 C 2.4.1 
[5] Microsoft Visual C++ 6.0 
[6] Microsoft Visual C++ 2005 SP1 
[7] Microsoft Visual C++ 2008 SP1 
[8] Microsoft Visual C++ 2010 
[9] Microsoft Visual C++ 2010 Express 
[10] Open WATCOM C++ 
[0] None 
Compiler: 8
Warning: The default location for Microsoft Visual C++ 2010 compiler is: 
     "C:\Program Files\Microsoft Visual Studio 10.0" 
     but either that directory does not exist or the configuration 
     is invalid. 
Use C:\Program Files\Microsoft Visual Studio 10.0 anyway [y]/n? n
Please enter the location of your compiler: [C:\Program Files\Microsoft Visual Studio 10.0] 
C:\Program Files\Microsoft SDKs\Windows\v7.1
Please verify your choices: 
Compiler: Microsoft Visual C++ 2010  
Location: C:\Program Files\Microsoft Visual Studio 10.0 
Are these correct [y]/n?  
***************************************************************************** 
Error: Microsoft Visual C++ 2010 requires the Microsoft Windows Software  
     Development Kit (SDK), but the SDK cannot be found.  Examine your   
     Microsoft Visual C++ 2010 installation. 
*****************************************************************************  
??? Error using ==> mex at 208
Unable to complete successfully. 
```

我不知道该目录是否应该与 不同`C:\Program Files\Microsoft SDKs\Windows\v7.1`，以及是否有办法识别该目录。我也不知道我给目录的方式是否正确。我尝试在目录名称周围使用单引号，唯一的变化是它停止询问我 Visual Studio 的目录是否正确，我回答**n**并且只给出这个。

```
Compiler: Microsoft Visual C++ 2010  
Location: C:\Program Files\Microsoft Visual Studio 10.0 
Are these correct [y]/n? n
mex: No compiler selected. No action taken. 
```

如何将编译器添加到 MATLAB 以便能够在 C++ 函数/文件上运行 mex？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:21:48.023

如果您追求快速简便的方法（并且不使用 64 位 matlab），我建议您下载 Visual Studio 2010 C++ express 的免费副本并使用它。这样 mex -setup 会检测到它。

# recursion - 我不懂递归函数

> ID：15882700
> 
> 赞同：-3
> 
> 时间：2013-04-08T15:10:57.043
> 
> 标签：recursion

编写一个递归函数，计算递归定义的函数 F(n)= -F(n-2), F(0)=1 和 F(1) = -2 的值。我一直盯着这个看几个小时我不明白。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:16:09.117

像任何编程问题一样，您可以首先使用伪代码表达解决方案，然后继续以您选择的语言实现它，例如

```
FUNCTION F(n)
  IF n == 0           -- recursion terminates when n = 0, with result 0
    RETURN 0
  ELSE IF n == 1      -- recursion can also terminate when n = 1, with result -2
    RETURN -2
  ELSE                -- otherwise recursion contiunes with F(n - 2), F(n - 4), ...
    RETURN -F(n - 2)  -- until one of the terminating conditions is reached
END 
```

从这里开始，用 C++ 或您选择的任何语言实现此功能应该非常简单。一定要实现一个“测试工具”，即`F`使用一系列不同输入值调用然后打印结果的函数，以便您可以验证该函数是否正确运行并在必要时对其进行调试。

# java - 如何开始使用 SAX、DOM、JAXP 和 JDOM

> ID：15882706
> 
> 赞同：0
> 
> 时间：2013-04-08T15:11:09.410
> 
> 标签：java, dom, sax, jdom, jaxp

我目前正在开始使用 XML 和 Java。作者说我需要 DOM、SAX、JAXP 和 JDOM 来处理给出的示例。

这本书指出 DOM 和 SAX 与您选择的解析器捆绑在一起，在我的例子中是 Xerses-J。我已经下载了 Xerses-J ( `xerses-1_4_4`) jar 文件。

所以问题 1：*如果我想在 Eclipse 中开始使用 XML 和 Java，我只需要将 jar 文件 xerses.jar 添加到构建路径？*

继续讨论 JAXP，这本书说 JAXP 附带了大多数解析器，而不是全部。所以，*我想知道它是否与 Xerses-J 一起提供。如果没有，我需要做什么？*

现在，终于到了 JDOM。这本书说 JDOM 是作为一个单独的包提供的。我下载了它。我只需要在构建中包含 jdom.jar 文件，对吗？

我知道这些问题很愚蠢，但是，是的，这些是问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:26:50.647

自（1.4？）以来，Xerces 就与 JDK 捆绑在一起。无需下载并将其 JAR 包含在使用当前版本 JDK 的项目中。这涵盖了 SAX、DOM 和 JAXP，尽管您*需要*下载 JDOM JAR 并将它们包含在您的类路径中。

附带说明一下，考虑使用 Maven 来管理您的依赖项，它使任务变得微不足道。

# emacs - 如何在 emacs 中创建内联乳胶块（如 \emph{...}）

> ID：15882708
> 
> 赞同：1
> 
> 时间：2013-04-08T15:11:10.700
> 
> 标签：emacs, latex, latex-environment

[这里](https://stackoverflow.com/a/15881012/1243435)的这个 SO 问题要求创建一个乳胶块的 emacs 快捷方式，一个解决方案（由我提出，但只是来自 emacs 文档）是使用`C-c C-t`.

是否有类似的东西可以在不创建任何新行的情况下创建“内联”块，例如转弯

```
blah blah Hello World blah blah 
```

进入

```
blah blah \emph{Hello World} blah blah 
```

例如？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:31:24.980

这就是我所做的。在“Hello World”之前使用光标输入：`\emph C-M-SPC C-M-SPC {`

右大括号与左大括号一起插入，因为我使用`electric-pair-mode`.

您可能可以使用完成来加快键入速度`\emph`，但它足够短，可能无法解决问题。

# c# - 在异步方法中使用 ReaderWriterLockSlim 是否安全

> ID：15882710
> 
> 赞同：27
> 
> 时间：2013-04-08T15:11:20.627
> 
> 标签：c#, .net, multithreading

由于`ReaderWriterLockSlim`该类使用线程 ID 来查看谁拥有锁，因此在不保证所有方法都将在同一个线程上执行的异步方法中使用它是安全的。

例如。

```
 System.Threading.ReaderWriterLockSlim readerwriterlock = new System.Threading.ReaderWriterLockSlim();
    private async Task Test()
    {
        readerwriterlock.EnterWriteLock();
        await Task.Yield(); //do work that could yield the task
        readerwriterlock.ExitWriteLock(); //potentailly exit the lock on a different thread
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-08T15:15:48.373

> 在异步方法中使用 ReaderWriterLockSlim 是否安全

是和不是。在异步方法中使用它可能是安全的，但在异步方法中使用它可能不安全，在这种方法中你进入和退出跨越`await`.

在这种情况下，不，这不一定是安全的。

[ExitWriteLock](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.exitwritelock.aspx)必须从调用`EnterWriteLock`. 否则，它会抛出一个`SynchronizationLockException`. 根据[文档](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.exitwritelock.aspx)，在以下情况下会引发此异常：

> 当前线程还没有进入写模式的锁。

唯一安全的情况是，如果在异步方法中使用该方法，该方法始终处于存在电流的环境中，该电流`SynchronizationContext`会将事物移回同一线程（即：Windows 窗体、WPF 等），并且没有被嵌套异步调用使用，其中调用链上的“父级”设置了一个任务`ConfigureAwait(false)`（这将阻止`Task`捕获同步上下文）。如果您处于该特定场景中，您会知道线程将被维护，因为`await`调用会将您编组回调用上下文。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-08T15:35:13.860

不，不应像在您的示例中那样使用线程仿射协调原语。

您正确地确定了在`await`. 由于方法提前返回的方式，还有另一个问题`async`：调用者不知道锁已被持有。

`ReaderWriterLockSlim`默认情况下是一个非递归锁，所以如果另一个`async`方法试图获取相同的锁，你会得到一个死锁。即使你让锁递归，你仍然会遇到一个问题：在持有锁的时候永远不应该调用任意的最终用户代码，这就是你在使用`await`.

[`SemaphoreSlim`类型](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx)是感知型的`async`（通过它的`WaitAsync`方法），Stephen Toub在我的[AsyncEx 库中也提供了](https://github.com/StephenCleary/AsyncEx/wiki/AsyncReaderWriterLock)[一系列`async`协调原语](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10267069.aspx)。

# autohotkey - AutoHotKey KeyWait 语句

> ID：15882713
> 
> 赞同：2
> 
> 时间：2013-04-08T15:11:26.323
> 
> 标签：autohotkey

我正在使用 AutoHotKey，我想实现一些特定的目标。

我有一个应该执行某个操作的热键，在这个热键中，我想编写一些代码来检测我是只按“C”键，还是按“C”然后按“L”键。

如果只有“C”键被按下，那么它应该执行一个动作，否则，如果“C”然后“L”键被按下它应该执行另一个动作。

但我不能这样做，因为我不太了解 KeyWait，我的意思是我该怎么做这样的事情：

```
if(KeyWait, C){
   firstAction
else {
if(KeyWait, C){
  if(KeyWait, L){
  anotherAction
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:30:36.223

[使用输入](http://www.autohotkey.com/docs/commands/Input.htm)函数求解。

```
; Get one character and store it in the Character variable
Input, Character, L1
If Character = C
{
    ; Give up to half of one second to type L
    Input, Character, L1 T0.5
    If Character = L
        MsgBox % "We have C and L"
    else
        MsgBox % "Just C here, give an L next time"
} 
```

# console - Autohotkey 错误的击键发送到控制台

> ID：15882714
> 
> 赞同：4
> 
> 时间：2013-04-08T15:11:26.020
> 
> 标签：console, autohotkey, keystroke, sendinput

我正在尝试了解此错误，并且正在寻找解决方法。

使用此脚本：

```
#NoEnv
#SingleInstance force
SendMode Input
;Alt+t to send keystrokes
!t::Send, /[] 
```

它将正确的击键发送`/``[``]`到除 Windows 控制台 (cmd) 之外的所有窗口

附加信息：

*   使用自动热键 v1.1.09.02
*   使用英语美国键盘布局，它发送：`'``9``0`
*   使用法语加拿大多语言键盘布局，它发送：`é``^``ç`

知道什么可以解决它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:51:15.380

试试这个：

```
#NoEnv
#SingleInstance force
;SendMode Input
;Alt+t to send keystrokes
!t::Send, % chr(047) chr(091) chr(093)
Return 
```

让我知道它是否能解决您的问题。

发现这个：
我在我的系统上使用多种语言或键盘布局。为什么 Send 和 Hotstrings 有时会发送错误的字符？只要脚本的语言或键盘布局与活动窗口的不匹配，就会发生这种情况。要修复它，请通过其托盘图标打开脚本的主窗口。当主窗口处于活动状态时，使用语言栏（或语言热键，如 LeftAlt+Shift）来更改脚本的语言/布局以匹配您当前正在输入的窗口。切换脚本的语言可以通过以下示例热键：

```
#l::   ; Win+L hotkey.
ListLines  ; Show the script's main window.
WinWaitActive ahk_class AutoHotkey
Send {LAlt down}{Shift}{LAlt up}  ; Switch to alternate language (keys must be in this format).
WinMinimize  ; Minimize the window found by WinWaitActive above.
return 
```

更多信息：与所有应用程序一样，每个脚本都使用您的默认语言开始。如果默认值与活动窗口（发送击键的位置）的默认值不匹配，则键盘布局的差异可能会导致脚本发送的击键被翻译成意外的东西。

在：[http ://autohotkey.free.fr/docs/FAQ.htm#load](http://autohotkey.free.fr/docs/FAQ.htm#load)

# wpf - 将 XAML 事件绑定到文件根以外的类

> ID：15882715
> 
> 赞同：2
> 
> 时间：2013-04-08T15:11:26.467
> 
> 标签：wpf, silverlight, xaml, windows-phone

Windows Phone 8 项目，XAML。我在页面内属于我自己的类 MyPivotItem（从 vanilla PivotItem 派生）的数据透视项中有一个 ListBox。列表框有一个带有一些控件的 ItemTemplate。我想将其中一个控件中的事件绑定到 MyPivotItem 中的方法。普通语法`Click="OnClick"`不起作用 - 框架字仅在 Page 类中搜索方法。

我可以派生控件本身并使用树导航和事件转发等进行一些技巧，但我想知道 XAML 的内部方法是否可以处理这种情况。

有没有办法以*非编程*方式将方法绑定到层次结构中比 XAML 文件的根对象更深的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:22:15.647

如果不使用行为或附加属性之类的东西，这是不可能的。XAML 文件始终与部分 C# 类相关联，您可以在此类中定义控件和事件。对于每个 Page.xaml，都会生成一个 Page.g.xaml 文件，该文件实际创建控件并绑定事件。但是，这些事件必须在根对象（部分类本身）中定义。

即使您使用附加的属性或行为来创建解决方法，您也只是将该程序代码卸载到其他地方并将其隐藏在 XAML 语法后面。

无论如何，您什么时候想绑定到控件的特定事件处理程序？你可以简单地使用 UserControls 吗？

# c++ - 待定：初始化 concurrent_hash_map

> ID：15882716
> 
> 赞同：0
> 
> 时间：2013-04-08T15:11:27.623
> 
> 标签：c++, tbb

我正在尝试初始化 2D concurrent_hash_map，这是英特尔 TBB 库中可用的容器。编译通过，运行时没有错误。但是，容器中并非所有初始化值都可用，从而导致错误行为。

哈希映射定义为

```
template<typename K>
struct MyHashCompare {
    static size_t hash(const K& key) { return boost::hash_value(key); }
    static bool equal(const K& key1, const K& key2) { return (key1 == key2); }
};

typedef concurrent_hash_map<int, int, MyHashCompare<int> > ColMap; 
typedef concurrent_hash_map<int, ColMap, MyHashCompare<int> > RowMap; 
```

函数对象定义如下。错误行为的原因可能来自这里吗？

```
class ColumnInit {
    RowMap *const pMyEdgeMap;
public:
    void operator()(const blocked_range<size_t>& r) const {
        RowMap* pEdgeMap = pMyEdgeMap;
        RowMap::accessor accessX;
        ColMap::accessor accessY;
        for(size_t n1 = r.begin(); n1 != r.end(); n1++)
        {
            pEdgeMap->insert(accessX, n1);
            for(int n2 = 1; n2 <= 64; n2++)
            {
                int diff = abs((int)n1 - n2);
                if ((diff == 8) || (diff == 1))
                {
                    assert((accessX->second).insert(accessY, n2));
                    accessY->second = -1;
                }
                else
                {
                    assert((accessX->second).insert(accessY, n2));
                    accessY->second = 0;
                }
            }
        }
    }
    ColumnInit(RowMap* pEdgeMap): pMyEdgeMap(pEdgeMap)
    {
    }
}; 
```

函数对象从对 parallel_for 的调用中调用，如下所示：

```
parallel_for(blocked_range<size_t>(1,64,16), ColumnInit((RowMap*)&mEdges), simple_partitioner()); 
```

任何建议或反馈都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:35:45.460

如果您打算创建一个 64x64 表，请使用blocked_range(1, **65** ,16) 作为parallel_for 的第一个参数。原因是blocked_range代表一个半开区间，包括下界但不包括上界。

# css - 对齐CSS中的属性

> ID：15882719
> 
> 赞同：0
> 
> 时间：2013-04-08T15:11:44.327
> 
> 标签：css

我有下面的 html。我想要做的是将 p 标签的内容居中。问题是，如果我在 div 上进行对齐，那么它可以工作，但是当我在 p 标签中这样做时，它不会。不是对 css 很好，想要快速解决，所以向你们寻求帮助。

```
<html>

    <head></head>

    <body>
        <div>
            <p align="center" style="width:500px">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tempor neque augue. Mauris a ante et libero tincidunt lacinia. Donec at lorem eu mi sagittis pretium. Donec sed ligula vel nunc placerat auctor quis vitae est. Nullam varius leo sed elit auctor rutrum. Pellentesque at erat quis nibh eleifend tincidunt sed feugiat est. Fusce dolor ante, imperdiet in congue ut, vulputate vitae nisi. Vivamus hendrerit felis a leo laoreet eget mollis purus tempus. Etiam fringilla est lacus. Praesent quis purus sem. Vestibulum interdum scelerisque consectetur. Nam nulla est, lacinia in eleifend eget, ultricies at est. Phasellus congue sollicitudin tellus, sit amet lobortis odio interdum et. Quisque turpis elit, feugiat in laoreet mollis, tempus et leo. Morbi eget viverra enim. Donec nec lacus dolor. Suspendisse tincidunt mi in enim gravida et fringilla lacus ultrices. Integer ac augue at nulla sollicitudin placerat. Morbi et ligula quis mauris consequat egestas vel et sapien. Ut ut justo a augue ullamcorper egestas ullamcorper vel nisl. Cras quam ligula, pharetra at pulvinar et, scelerisque vel erat. Donec scelerisque metus vitae libero accumsan quis suscipit urna pretium. Curabitur imperdiet, turpis a pulvinar adipiscing, nibh felis fringilla felis, nec consequat felis justo accumsan est.</p>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:14:02.593

`align`是HTML 5 中[不推荐使用的属性](http://fantasai.tripod.com/qref/HTML4/deprecated.html).. 而是给出`<p>`明确的宽度并添加：

`margin: 0 auto;`使整个元素居中（上/下 0，左/右自动）

或者

`text-align: center;`将元素文本居中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:13:56.407

那是因为属性 align[用于 divs](http://www.w3schools.com/tags/att_div_align.asp)。此外，它已被弃用，还有比这更好的方法来设置段落样式。

这是一个**[jsFiddle](http://jsfiddle.net/GBfbk/)**示例。

**CSS：**

```
div {
  width:100%;
}

p {
  text-align:center;
} 
```

**HTML：**

```
<div>
    <p>Hello</p>        
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:16:04.680

文本居中对齐。我已经在最新的 IE、Chrome 和 Firefox 中对其进行了测试。

你可以试试`<p style="width:500px; text-align:center">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:17:01.327

我刚刚检查了您的问题，实际上文本位于您的 p 标记中。我认为您正在尝试将 p 标签移动到 div 的中心，您可以通过以下方式实现

```
p
{
margin:0 auto;
} 
```

这里也是一个[小提琴](http://jsfiddle.net/trajce/3r7J8/)

只是一个建议：一个好的做法是将您的样式与您的 html 分开，因此将您的所有样式移到单独的样式表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T15:17:36.233

尝试

```
<p style="width:500px;margin:auto">...</p> 
```

# jquery - CodeIgniter ajax 动态表单

> ID：15882721
> 
> 赞同：0
> 
> 时间：2013-04-08T15:11:46.950
> 
> 标签：jquery, ajax, codeigniter, url

我实际上是在尝试对我项目中的团队进行动态管理。这意味着例如，用户有 3 个按钮。每个按钮从显示表单的控制器调用一个函数。

但是，当表单出现时，当我按下提交时，url 很奇怪。

```
function ajax_get(){

var uri_segment = "<?=$this->uri->segment(3);?>";

$('#editTeam').click(function (e) {
    e.preventDefault();

    $.ajax({
        type : "GET",
        async : false,
        url : "<?=base_url().'ajax/team/get_editTeam/';?>"+uri_segment,
        dataType : "html",
        success : function(data){
            window.setTimeout(function () {
                $('#divPage').html(data);
            }, 300);

        }
    });
    return false;
}); 
```

这个函数在一个div中显示一个视图，然后我有一个表单

```
function ajax_editTeam()
{
$('form').submit(function(e){
    e.preventDefault();

    $.ajax({
        type : "POST",
        async : false,
        url : "www.google.fr",
        data : $(this).serializeArray(),
        dataType : 'json',
        success : function(data)
        {

        }
    });

    return false;
});
 } 
```

对于这个表单，我有另一个 ajax 调用来保存字段并更新团队信息。如您所见，我将 'www.google.fr' 写为 url，但它没有任何改变

当我提交表单时，我在 firebug 中有一个奇怪的 url。

**这是来自 firebug 的控制台：** GET [http://fresh-league.com/ajax/team/get_editTeam/30](http://fresh-league.com/ajax/team/get_editTeam/30) 200 OK 164ms
POST [http://fresh-league.com/ajax/team/editTeamget_editTeam](http://fresh-league.com/ajax/team/editTeamget_editTeam) 404 Not Found 354ms

你能告诉我为什么我有另一个请求的网址而不是 www.google.fr 吗？

谢谢马特的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:26:41.657

这是因为浏览器上的[同源策略](http://www.w3.org/Security/wiki/Same_Origin_Policy)限制。

同源策略限制浏览器向域发出 ajax 请求，而不是下载源脚本的表单。

有多种方法可以克服这一点

1.  使用[jsonp](http://en.wikipedia.org/wiki/JSONP)
    如果请求的资源支持 jsonp，那么你可以使用它，jquery 已经[内置了](http://api.jquery.com/jQuery.getJSON/#jsonp)对 jsonp 的支持。要使用 jsonp，您需要传递请求参数`callback=?`并将数据类型设置为`jsonp`或使用[getJSON](http://api.jquery.com/jQuery.getJSON/#jsonp)来请求 json 资源。

2.  使用[CORS](http://www.w3.org/TR/cors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:16:48.623

你的问题有答案，

这是对的：`url : "<?=base_url().'ajax/team/get_editTeam/';?>"+uri_segment`

这不是：`url : "www.google.fr"`因为您没有从控制器调用任何函数，请尝试给它一个 url，就像第一个 ajax 调用一样。

# android - 在存储android上找不到图片

> ID：15882723
> 
> 赞同：0
> 
> 时间：2013-04-08T15:11:51.813
> 
> 标签：android, file

我有一个代码可以在手机上查找图片。它适用于三星银河选项卡，但不适用于 htc 野火。

```
public class MyStorage extends Activity{

public static boolean mExternalStorageAvailable;
public static boolean mExternalStorageWriteable;

public static void checkAvailability(){
    //Checking media availability
    String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        // We can read and write the media
        mExternalStorageAvailable = mExternalStorageWriteable = true;
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        // We can only read the media
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
    } else {
        // Something else is wrong. It may be one of many other states, but all we need
        //  to know is we can neither read nor write
        mExternalStorageAvailable = mExternalStorageWriteable = false;
    }
}

public static ArrayList<String> getFiles(){
    checkAvailability();
    ArrayList<String> result = new ArrayList<String>();
    if(mExternalStorageAvailable){
        File folder = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
        String basePath = folder.toString();
        result = listDirectory(folder, basePath);
    }
    return result;
}

private static ArrayList<String> listDirectory(File folder, String basePath){
    String[] list = folder.list();
    ArrayList<String> result = new ArrayList<String>();
    if(list != null){
        for (int i = 0; i < list.length; i++) {
            File test = new File(basePath+"/"+list[i]);
            if(test.isDirectory()){
                result.addAll(listDirectory(test,basePath+"/"+list[i]));
            }else{
                result.add(basePath+"/"+list[i]);
            }
        }
    }
    return result;
}
} 
```

唯一的区别是

在我的平板电脑中，图片在 /Pictures 中，而在我的手机中，它们在 /Images 中

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:24:08.330

那是因为在 HTC Wildfire 上

```
"/Images" != Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) 
```

通常要获取图像，您最好使用 ContentProvider：http: [//developer.android.com/guide/topics/providers/content-provider-basics.html](http://developer.android.com/guide/topics/providers/content-provider-basics.html)

像这样的东西：

```
ContentResolver cr = mContext.getContentResolver();
Cursor cursor = cr.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:25:37.313

您是否添加了读取 sd 卡的权限？

但在您的代码中，检查文件：

if(Folder.equal("/pictures")){ ... } else if{Folder.equal("/Images")){ ... }

# c# - 添加多个对象时保存更改时主键异常

> ID：15882729
> 
> 赞同：0
> 
> 时间：2013-04-08T15:12:06.430
> 
> 标签：c#, linq, entity-framework

我在使用 ms sql server 2008 的某些实体对象类型中有一个对象列表

我写了一个类似这样的代码：

```
foreach (some_entity_obj obj_to_handle in this.some_entity_obj_list)
{
  try
  {
    db.some_entity_obj.AddObject(obj_to_handle);

    if (dbsaveCounter % 10 == 0)
    {
        db.SaveChanges();

        this.monitor.SyncValues(some_monitoring_unit, another_monitoring_unit);
        some_monitoring_unit = 0;
        another_monitoring_unit = 0;

    }
    if (obj_to_handle.some_monitoring_unit != null)
        some_monitoring_unit += (double)obj_to_handle.some_monitoring_unit;
    if (obj_to_handle.another_monitoring_unit != null)
        another_monitoring_unit += (double)obj_to_handle.another_monitoring_unit;

    dbsaveCounter++;
  }
  catch (Exception ex)
  {
    this.monitor.PushToUnsecceeded_rows(obj_to_handle,ex);
    this.monitor.PushToErrors("Error in ** : ", ex, false);
  }
}
db.SaveChanges();
this.monitor.SyncValues(some_monitoring_unit, another_monitoring_unit); 
```

我得到以下异常：无法确定“实体对象”关系的主体端。多个添加的实体可能具有相同的主键。

如果我在每次运行循环时保存更改，它就可以工作

这是我的问题的简短版本：

为什么这有效：

```
foreach (foo _entObj in someList)
{
   db.foo.AddObject(_entObj);
   db.SaveChanges();
} 
```

这不起作用：

```
 int cnt = 0;
    foreach (foo _entObj in someList)
    {
       db.foo.AddObject(_entObj);
       if (cnt%10 == 0)
          db.SaveChanges();
       cnt++;
    }
    db.SaveChanges(); 
```

# c# - C# UDP 跟踪器协议 - 无法接收数据

> ID：15882732
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:12:14.833
> 
> 标签：c#, udp, protocols, tracker

你们能告诉我为什么我无法接收数据吗？
我使用了来自[http://www.bittorrent.org/beps/bep_0015.html的 UDP Tracker 协议](http://www.bittorrent.org/beps/bep_0015.html)

这是我尝试从 udp://tracker.openbittorrent.com:80/announce 获取信息时的代码

```
 Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        client.Connect("tracker.openbittorrent.com", 80);

        byte[] conPacket = new byte[16];
        byte[] temp = BitConverter.GetBytes(0x41727101980);
        byte[] temp2 = BitConverter.GetBytes(0);
        byte[] temp3 = BitConverter.GetBytes(new Random().Next(0, 65535));
        Array.Copy(temp, 0, conPacket, 0, 8);
        Array.Copy(temp2, 0, conPacket, 8, 4);
        Array.Copy(temp3, 0, conPacket, 12, 4);
        client.Send(conPacket);

        byte[] recvPacket = new byte[16];
        client.Receive(recvPacket); <--------------- Waiting for response
        client.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:12:47.900

好的，经过几个小时的研究，我最终决定使用 Wireshark 来查找请求数据包。

我发现我的包裹顺序不对。;(

这是新代码。

```
 Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        client.Connect(tracker, port);

        byte[] conPacket = new byte[16];
        byte[] temp = BitConverter.GetBytes(0x41727101980).Reverse().ToArray();
        byte[] temp2 = BitConverter.GetBytes(0);
        byte[] temp3 = BitConverter.GetBytes(new Random().Next(0, 65535));
        Array.Copy(temp, 0, conPacket, 0, 8);
        Array.Copy(temp2, 0, conPacket, 8, 4);
        Array.Copy(temp3, 0, conPacket, 12, 4);
        //Connect to the protocol
        client.Send(conPacket);

        byte[] response = new byte[16];
        client.Receive(response); 
```

它现在正在工作！

# c# - 选择对象的子子项

> ID：15882734
> 
> 赞同：2
> 
> 时间：2013-04-08T15:12:25.580
> 
> 标签：c#, entity-framework, linq-to-sql, linq-to-entities

作为 linq 和实体框架的新手，这让我很困惑：

我通过实体框架创建了我的数据库的一个模型（一小部分），三个表在两个直接的 1:n 关系中：**文件夹**-> 1:n ->**合同**-> 1:n -> “测量”**点**

我正在寻找一种语法，它允许从我迭代的文件夹对象开始，并将点（如果存在）返回到我在文件中找到的字符串，按名称进行比较。我想完全忽略中层合约，只在所有合约中找到低一级的点。

我可以通过像这样遍历每个合同来做到这一点：

```
foreach (Contract contract in folder.Contract)
{
    Point point = contract.Point.SingleOrDefault(p => p.Pointname == pointname);
    if (point != null)
    { ... other code
    }
} 
```

我想跳过合同的 foreach，但我无法正确使用语法。我试过这些：

```
Point point = folder.contract.SelectMany("???").Point.SingleOrDefault(p => p.Pointname == pointname)
Point point = folder.contract.All(c => c.Point.SingleOrDefault(p => p.Pointname == pointname)) 
```

两者都无法编译，但肯定有一种简单的方法可以做到这一点？

谢谢！

拉尔夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:16:20.763

我相信你需要像下面的代码：

```
Point point = folder.Contract
                    .SelectMany(c => c.Point)
                    .SingleOrDefault(p => p.Pointname == pointname) 
```

但似乎逻辑与您显示的内容有所不同，因为您检查`point != null`了每个合同中是否存在。

# meteor - 如何排除流星测试并仅运行包测试（流星0.6.0+）

> ID：15882738
> 
> 赞同：2
> 
> 时间：2013-04-08T15:12:46.453
> 
> 标签：meteor

随着新的流星版本 0.6.0，也可以使用流星测试框架进行应用程序测试。是否可以只运行应用程序包中的应用程序测试，而不运行所有流星测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:00:11.317

是的，只需运行：`meteor test-packages <package name(s)>`. 如需更多信息，`meteor test-packages --help`.

# sql - SSIS批量插入字段包含逗号？

> ID：15882740
> 
> 赞同：0
> 
> 时间：2013-04-08T15:12:52.210
> 
> 标签：sql, ssis

当字段包含逗号字符时，我在 SSIS 中的批量插入失败。我的平面文件源是制表符分隔的，并且在许多情况下，文本字段将包含逗号。例如，UserComment 可能有逗号。这会导致批量插入失败。

如何告诉 SSIS 忽略逗号？我认为它会自动发生，因为行分隔符是 {CR}{LF} 而列分隔符是“Tab”。为什么它在逗号处吠叫？另请注意，我目前没有使用格式文件。

提前致谢。

**更新：**
这是我在 SSIS 中遇到的错误：
*错误：批量插入任务中的 0xC002F304，批量插入任务：发生错误并显示以下错误消息：“批量加载数据转换错误（指定代码页的类型不匹配或无效字符）第 183 行第 5 列（电子邮件地址）。第 182 行第 5 列（电子邮件地址）的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）。批量加载数据转换错误（指定代码页的类型不匹配或无效字符） ) 第 181 行第 5 列（电子邮件地址）。”。任务失败：批量插入任务*

它似乎在记录 131988 上失败了，这就是为什么我认为这是因为没有空格的“某事，某事”电子邮件。131988 之前的许多记录都很好。

```
131988  01  MEMPHIS, TN     someone@somewhere.com  
131988  02  NORTH LITTLE ROCK, AR       someone@somewhere.com,someone1@somewhere1.com  
131988  03  HOUSTON, TX     someone@somewhere.com,someone1@somewhere1.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:12:44.260

我怀疑逗号或@ 符号被称为“无效字符”。

我看到在包含电子邮件地址的字段之前的输入记录中有两个选项卡，因此电子邮件地址列将是第五列。但是当错误消息提到“第 5 列”时，它可能使用从零开始的索引，因此电子邮件列只有索引 4。是否有选项卡和另一列？也许无效字符在那里。

我怀疑在导致错误的任何列中都嵌入了一个不可见的坏字符。在剪切和粘贴电子邮件地址行时，我经常会捡起坏字符，所以这可能是一个嫌疑犯。

自行运行失败的行以确保它仍然失败。

然后将其复制到记事本中，并执行“另存为”，并将编码设置为 ANSI。（如果有错误的字符，它可能会在此时抱怨。）使用“另存为”文件作为新的导入文件。此时，您应该能够合理地确信“所见即所得”，并且导入文件中没有嵌入不可见字符。

如果这是问题所在，您将需要某种方法来验证未来的导入文件是否干净，或者在导入过程中以某种方式处理它们。

（我想你已经检查了目标列的长度是可以的。那肯定会是一个很好的选择。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:15:27.587

“指定代码页的类型不匹配或无效字符”是误导性错误消息。源表的字段长度超过了目标表的指定长度，因此出现错误。调整长度后，一切正常。

# javascript - 无限滚动分页javascript实现问题

> ID：15882742
> 
> 赞同：0
> 
> 时间：2013-04-08T15:12:53.993
> 
> 标签：javascript, infinite-scroll

我正在尝试在 jsfiddle 中使用 javascript 实现无限滚动分页，但我在让它正常工作时遇到问题。滚动时我没有看到淡入淡出，当我到达内容的末尾时，我应该收到没有更多数据的消息，而是说它正在等待更多数据。

原始示例：[http ://andersonferminiano.com/jqueryscrollpagination/](http://andersonferminiano.com/jqueryscrollpagination/)

我的实现：http: [//jsfiddle.net/jsuHD/](http://jsfiddle.net/jsuHD/)

我向 jsfiddle 添加了一个外部资源：scrollpagination.js

我认为我的问题出在 javascript 上，不知道要传入什么`contentPage`

```
$(function(){
            $('#content').scrollPagination({
                'contentPage': 'http://jsfiddle.net/jsuHD/', // the url you are fetching the results
                'contentData': {}, // these are the variables you can pass to the request, for example: children().size() to know which page you are
                'scrollTarget': $(window), // who gonna scroll? in this example, the full window
                'heightOffset': 10, // it gonna request when scroll is 10 pixels before the page ends
                'beforeLoad': function(){ // before load function, you can display a preloader div
                    $('#loading').fadeIn();
                },
                'afterLoad': function(elementsLoaded){ // after loading content, you can use this function to animate your new elements
                     $('#loading').fadeOut();
                     var i = 0;
                     $(elementsLoaded).fadeInWithDelay();
                     if ($('#content').children().size() > 100){ // if more than 100 results already loaded, then stop pagination (only for testing)
                        $('#nomoreresults').fadeIn();
                        $('#content').stopScrollPagination();
                     }
                }
            });

            // code for fade in element by element
            $.fn.fadeInWithDelay = function(){
                var delay = 0;
                return this.each(function(){
                    $(this).delay(delay).animate({opacity:1}, 200);
                    delay += 100;
                });
            };

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:59:42.260

如果您启动控制台**[谷歌浏览器中的 f12]**，您会看到当您到达页面末尾时，会向 jsFiddle 本身发出**403 禁止请求。**是的，我认为问题在于您传递给 contentPage 的内容。

这是您解决方案的工作小提琴[http://jsfiddle.net/jsuHD/10/](http://jsfiddle.net/jsuHD/10/)。当您从允许您获取所需资源的外部源加载 html 时，它会按预期工作。

```
 //load the html from external resource
'contentPage': 'http://dl.dropbox.com/u/4001846/sample.html' 
```

# r - R中用于数据框的Excel vlook up函数

> ID：15882743
> 
> 赞同：0
> 
> 时间：2013-04-08T15:12:56.337
> 
> 标签：r

我的数据框有问题，希望在这里找到帮助。初始数据帧（我们称其为 df1）包含一个 ID 号，它可能会重复多次并且可能不按顺序排列。

```
>df1
      ID
1   5468
2   5468
3   8896
4   8896 
```

我想使用这个 ID，在另一个数据框（df2）中查找相应的国家，看起来像这样：

```
>df2
    ID     country
1   5468   USA
2   8896   Canada 
```

并在初始数据框中添加国家。请注意，每个 ID 在第二个数据帧中只出现一次，但在第一个数据帧中可以出现多次。基本上，我正在寻找类似于 Excel“vlookup”功能的东西，仅适用于 R。

我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:18:40.553

使用`merge`：

```
df1 <- data.frame(ID=rep(c(5468,8896), each=2))
df2 <- data.frame(ID=c(5468,8896), country=c("USA","Canada"))

merge(df1, df2)
    ID country
1 5468     USA
2 5468     USA
3 8896  Canada
4 8896  Canada 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T15:21:38.563

您可以使用`match()`.

就像第一个是`dataset1$ID[n]`，第二个是`dataset2$ID`

然后`dataset2[match(dataset1$ID[n],dataset2$ID,2]`

但在大多数情况下，詹姆斯给出的答案要好得多，但如果你真的想要，匹配更类似于 vlookup。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:51:38.330

这使用环境查找等更大的数据集，这可能比任何其他解决方案都要快得多：

```
df1 <- data.frame(ID=rep(c(5468,8896), each=2))
df2 <- data.frame(ID=c(5468,8896), country=c("USA","Canada"))

library(qdap)
df1$country <- lookup(df1[, 1], df2)

## binary operator for lookup
##  df1$country <- df1[, 1] %l% df2  

## > df1
##     ID country
## 1 5468     USA
## 2 5468     USA
## 3 8896  Canada
## 4 8896  Canada 
```

# php - 在PHP中匹配键文本的数组子集中循环

> ID：15882763
> 
> 赞同：0
> 
> 时间：2013-04-08T15:13:36.700
> 
> 标签：php, arrays, transformation

我有这个数组（使用 PHP）：

```
Array
(
[dummy_value_01] => 10293
[other_dummy_value_01] => Text
[top_story_check] => 1
[top_story_hp] => 1
[top_story] => 248637
[top_story_id] => 100
[top_story_text] => 2010
[menu_trend_01] => 248714
[menu_trend_01_txt] => Text 01
[menu_trend_02] => 248680
[menu_trend_02_txt] => Text 02
[menu_trend_03] => 248680
[menu_trend_03_txt] => Text 03
[menu_trend_04] => 248680
[menu_trend_04_txt] => Text 04
[menu_trend_05] => 248680
) 
```

我想只循环 menu_trend_* 值并获得这样的列表：

```
<ul>
<li>Text 01: 248714</li>
<li>Text 02: 248680</li>
<li>[...]</li>
</ul> 
```

你能建议最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:41:23.383

您可以使用它，它将尝试匹配 menu_trend_(DIGIT)，如果匹配，将回显所需的文本。

```
echo '<ul>';
foreach ($array as $key => $val) {

    $matches = array();
    if (!preg_match('/^menu_trend_(\d+)$/', $key, $matches)) {

        continue;
    }

    echo sprintf('<li>Text %s: %s</li>', $matches[1], $val);
}
echo '</ul>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:21:57.320

我不确定这是最好的方法，但它会起作用：

```
$output = array();
foreach ($array as $k => $a) {
  if (stristr($k, 'menu_trend_') && !empty($arr[$k . '_txt'])) {
    $output[] = $arr[$k . '_txt'] . ': ' . $a;
  }
}
echo "<ul>\n<li>" . implode("</li>\n<li>", $output) . "</li>\n</ul>"; 
```

### [这是一个工作示例](http://codepad.viper-7.com/5SuS3w)

# regex - 请协助这个正则表达式

> ID：15882765
> 
> 赞同：-5
> 
> 时间：2013-04-08T15:13:43.910
> 
> 标签：regex

我正在尝试仅为括号中的文本编写正则表达式，包括以下句子中的括号：“”这里是一所房子。房子是蓝色的。(12.6)""。所以我想选择 --> (12.6) <--

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:15:18.660

就像是：

```
\(\d+\.\d+\) 
```

这是假设您在该子字符串中只有数字，并且始终采用以下形式：（xy.zd）

由于我不知道您使用的是什么语言、工具、模式、wtv，所以我只是离开了基本的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:15:59.760

在 JavaScript 中，这个正则表达式返回一个用括号括起来的文本项数组：

```
 "Here is a house. The house is blue. (12.6) (3)".match(/\([^\)]*\)/g); 
```

回报：

```
["(12.6)", "(3)"] 
```

干杯。

# c# - 如何为文本框设置数据类型

> ID：15882766
> 
> 赞同：4
> 
> 时间：2013-04-08T15:13:44.327
> 
> 标签：c#, sql

我正在构建一个连接到私有数据库的小型应用程序。在我的应用程序中，我在单击按钮后在数据库中记录数据的文本框中输入数据。我面临的问题是我想让某个文本框只接受整数，以防止输入错误类型的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:21:33.917

像下面这样尝试它会帮助你...

下面的代码只接受`Numbers`和`dots(.)`

**设计师.CS**

```
this.txtNumbers.KeyPress += new System.Windows.Forms.KeyPressEventHandler(this.txtNumbers_KeyPress); 
```

**代码背后：**

```
private void txtNumbers_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!char.IsControl(e.KeyChar)
        && !char.IsDigit(e.KeyChar)
        && e.KeyChar != '.')
    {
        e.Handled = true;
    }

    if (e.KeyChar == '.'
        && (sender as TextBox).Text.IndexOf('.') > -1)
    {
        e.Handled = true;
    }
} 
```

**处理复制和粘贴...**

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    int result;
    if (txtNumbers.Text != "")
    {
        if (!int.TryParse(txtNumbers.Text, out result))
        {
            txtNumbers.Text = "";
            MessageBox.Show("Invalid Integer");                    
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:26:38.190

最简单的。

向文本框添加按键事件处理程序

eventarg 参数具有被按下的键。( `e.KeyChar`)

如果它**不是**`e.Handled`将 eventargs 参数设置为 true 的合法键。

不要忘记允许退格、剪切、复制和粘贴等通过。如果你想要负数，减号是允许的，但只能作为第一个字符。

如果您想要格式化/格式化显示，例如括号中的负数、千位分隔符、小数分隔符、货币符号等，最好打开用户控件并将其全部包含在其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:41:56.090

您可以使用专为数字设计的控件，`NumericUpDown`. 它使您可以更好地控制小数位和最小值/最大值。

# c# - 在一个解决方案中从多个项目创建一个 NuGet 包

> ID：15882770
> 
> 赞同：39
> 
> 时间：2013-04-08T15:13:58.553
> 
> 标签：c#, visual-studio-2010, teamcity, nuget

我有一个正在处理的解决方案，其中包含 4 个类库项目（`A`、、、、`B`）。并且可以被认为是解决方案中的顶级项目。和参考，并且独立。`C``D``A``B``A``B``C``D`

这四个项目代表了我制作的一组处理自动化工作流的服务。它们都是密切相关的，并且只会在一个位置（服务管理器）中使用，所以我不想将它们分成不同的解决方案。

我的问题是我想创建一个包含所有 4 个库的单个 NuGet 包，而不必全部构建它们并手动收集它们的 DLL。我知道我可以通过拥有`A`或`B`参考其余项目在技术上实现这一点，但这不是真正的关系，我认为应该避免这种关系。

我已经对这个问题进行了很多搜索，除了手动收集 DLL 并自己构建包之外，我找不到其他解决方案。有没有办法使用 NuGet 的特性/能力来实现我想要的结果？

**注意**：如果标签不明确，我目前正在将 VS2010 与 TeamCity 构建服务器一起使用。如果它是相关的，我还通过 Stash 服务器使用 Git。

**编辑**：我刚刚意识到这可能很重要。这些项目确实引用了我需要标记为依赖项的其他 NuGet 包。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-09T07:57:53.340

您必须定义自己的 nuspec 清单。您可以在以下部分列出包含程序集`files`：

```
<file src="A\bin\Release\A.dll" target="lib\net40" />
<file src="B\bin\Release\B.dll" target="lib\net40" />
... 
```

有关更多详细信息，请阅读[NuSpec 参考](http://docs.nuget.org/docs/reference/nuspec-reference)。

然后在 NuPack 构建步骤而不是 proj 中引用该 nuspec 文件。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-08-25T15:33:20.043

如果你已经下载[了 NuGet.exe](https://www.nuget.org/downloads) 你可以运行：`nuget pack Myproject.csproj -IncludeReferencedProjects`这应该包括你所有的项目。这是来自 NuGet[文档](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)的注释：

如果项目引用了其他项目，您可以将引用的项目添加为包的一部分，或者使用 -IncludeReferencedProjects 选项添加为依赖项。这是递归完成的。例如，假设您有项目 A.csproj，它引用 B.csproj 和 C.csproj，而 B.csproj 引用 D.csproj 和 E.csproj，C.csproj 引用 F.csproj 和 G.csproj。然后，当您运行时：

```
nuget pack A.csproj -IncludeReferencedProjects 
```

生成的包将包含来自项目 B、C、D、E、F 和 G 的文件，以及来自项目 A 的文件。

如果引用的项目具有相应的同名 nuspec 文件，则将该引用的项目添加为依赖项。使用相同的示例，假设现在在与项目文件 C.csproj 相同的目录中有文件 C.nuspec。当你运行时：

```
nuget pack A.csproj -IncludeReferencedProjects 
```

生成的包将包含来自项目 B、D、E 的文件以及来自项目 A 的文件，并且该包依赖于 C。

另请参阅[命令行参考](http://docs.nuget.org/docs/reference/command-line-reference)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-06-17T18:39:33.740

**2020 更新**

我个人更喜欢尽可能使用`dotnet`命令。

我发现工作正常的解决方案是更改主项目中的默认项目引用，`<ProjectReference></ProjectReference>`如下所示

```
 <ItemGroup>
    <ProjectReference Include="..\{ProjectFolder}\{ProjectName}.csproj">
      <ReferenceOutputAssembly>true</ReferenceOutputAssembly>
      <IncludeAssets>{ProjectName}.dll</IncludeAssets>
    </ProjectReference>
  </ItemGroup> 
```

确认此解决方案在定位`netstandard2.0`及以上时有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-07T10:37:18.580

这可能会解决这个问题：nuget.exe pack proj.csproj -IncludeReferencedProjects

您可以看到： [为具有多个项目的解决方案创建 nuget 包](https://stackoverflow.com/questions/7283753/create-nuget-package-for-a-solution-with-multiple-projects)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-14T19:10:34.537

如果您在 VS 中有多个项目，并且您的 Pack 文件依赖于另一个项目，则两者都需要打包。先打包依赖，再打包你的项目。使用 NuGet 包管理器添加包时，请确保您的源不是 nuget.org，而是您的测试文件夹。除非您已将两者都上传到 Nuget.org。 [如何在本地安装 NuGet 包 .nupkg 文件？](https://stackoverflow.com/questions/10240029/how-do-i-install-a-nuget-package-nupkg-file-locally)

# php - 如何使用 Cron 在特定时间调用特定 URL？

> ID：15882771
> 
> 赞同：0
> 
> 时间：2013-04-08T15:13:59.693
> 
> 标签：php, cron, crontab, cron-task

只需单击一个按钮，我就需要用户触发一个功能。这会将作业设置为在指定时间（例如上午 9 点）执行，并最终会定期重复。那将由PHP处理

因此，我已经考虑将 CronJobs 与 PHP 一起使用。我已经遵循了这个[非常好的教程](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)，但我真的不知道如何创建触发文件（home/path/to/command/the_command.sh）。

有人可以给我建议吗？

编辑：事实上，如果用户在某个管理网站上按下按钮，我想做的是调用一个 url，假设是上午 9 点的 www.google.com。工作的管理部分将由我链接的 tut 页面上设置的系统处理。我想知道当作者说时这个php脚本调用的文件应该是什么：

```
$crontab->append_cronjob('30 8 * * 6 home/path/to/command/the_command.sh >/dev/null 2>&1'); 
```

我应该在 the_command.sh 中添加什么来调用 url ？

我不希望这个 url 在任何类型的浏览器中打开。这个 url 基本上会在服务器端触发一个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:16:37.930

如果您想在上午 9 点运行 PHP 脚本，那么您在 crontab 文件中的命令应该类似于：

```
/usr/bin/php /var/www/mysite/script.php 
```

where`/usr/bin/php`是您的 PHP 可执行文件`/var/www/mysite/script.php`的路径，并且是您要执行的 PHP 脚本的路径。首先在终端中运行此命令以确保其正常工作。

这将适用于任何命令。您应该**替换** `home/path/to/command/the_command.sh`为要执行的命令，**而不是**按字面意思使用该命令。这是一个检索[http://www.google.com/](http://www.google.com/)页面的命令：

```
/usr/bin/curl http://www.google.com/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:19:01.867

有3个可能性

1）每次有任务时在 crontab 中添加一行。这是个坏主意

2）添加到crontab：

```
* * * * *  /usr/bin/php /path_to_your_script/script.php 
```

并检查脚本当前时间/触发这次的所有操作。也很糟糕，但比 1 好

3）创建将执行您的任务的守护程序。例如，将每小时启动一次，并在下一小时等待安排的事件，每分钟检查一次。

如果您只需要从 bash 调用 url，请使用以下命令：

```
/usr/bin/curl http://www.google.com >/dev/null 2>/dev/null 
```

# php - PHP 条件 - Javascript 重定向

> ID：15882774
> 
> 赞同：1
> 
> 时间：2013-04-08T15:14:04.610
> 
> 标签：php, javascript

我有一个 PHP 'if' 条件，如果为真，我想用 javascript 将用户重定向到其他地方。但是它似乎不起作用，因为它总是重定向我，无论条件是否为真。

```
<?php
if (isset($_SESSION['lol'])) {
    ?><script type="text/javascript">
<!--
window.location = "http://www.test.org"
//-->
</script><?php
}
?> 
```

这怎么可能？或者我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:16:18.400

只需在 PHP 中重定向：

```
<?
    if (isset($_SESSION['lol']) {
        header("Location: test.org");
    }
?> 
```

编辑：但是如果你想使用你当前的代码，你需要回显脚本标签：

```
<?
    if (isset($_SESSION['lol'])) {
        echo "<script>window.location.href = 'test.org';</script>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:26:44.600

不管 Javascript 方法看起来多么简单，您都应该在 PHP 中进行重定向：

```
<?php
    header('Location: http://test.org');
    exit;
?> 
```

首先，可能会出现 javascript 无法正常工作的情况（它可能被故意关闭，用户可能使用不兼容的浏览器，用户可能安装了 NoScript 等浏览器插件等）

此外，您应该在重定向后停止代码执行（这就是`exit`我的示例中存在的原因），以便恶意访问者无法忽略重定向而只是阅读页面内容。

# ruby-on-rails - Rails 在 html 中呈现我的原始数据

> ID：15882775
> 
> 赞同：0
> 
> 时间：2013-04-08T15:14:05.563
> 
> 标签：ruby-on-rails

我已经设置了一个 Rails 项目：用户->项目->示例

当我将我的项目视为表格时，一切都很好。我渲染一个表格模板：

```
<%= render 'layouts/projects_table' %> 
```

但是当我为一个项目渲染我的样本时

```
<%= render 'layouts/samples_table' %> 
```

我得到了表格，但在表格之前我得到了我的原始数据：

```
[#<Sample id: 28, name: "abcd", size: 11, quantity: 11.0, created_at: "2013-04-04 09:58:50"> ... ] 
```

项目控制器：

```
def show
  @project = Project.find(params[:id])
  @samples = @project.samples
end 
```

_samples_table：

```
<table id="samples" class="display">
<thead>
    <tr>
        <th>
            Sample Name
        </th>
        <th>
            Size
        </th>
        <th>
            Quantity
        </th>
        <th>

        </th>
    </tr>
</thead>
<tbody>
    <%= @samples.each do |sample| %>
        <tr>
            <td>
                <%= link_to sample.name, project_sample_path(@project, sample) %>
            </td>
            <td>
                <%= sample.size %>
            </td>
            <td>
                <%= sample.quantity %>
            </td>

            <td>
                <% if !sample.libraries.any?%>
                <%= link_to 'Del', project_sample_path(@project, sample), 
                    :confirm => 'Are you sure?', :method => :delete %>
                <% end %>
            </td>
        </tr>
    <% end %>
</tbody> 
```

其他一切正常。任何帮助，将不胜感激！

奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:23:34.953

`=`从循环定义中删除

```
<%= @samples.each do |sample| %> 
```

应该

```
<% @samples.each do |sample| %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:23:41.963

您正在输出`.each`.

```
<%= @samples.each do |sample| %> 
```

应该

```
<% @samples.each do |sample| %> 
```

# c - 在 ubuntu 上运行 C 程序

> ID：15882777
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:14:07.643
> 
> 标签：c, ubuntu-11.04

我是 Ubuntu 的新手。我想在 Ubuntu 上运行 c 程序。我已经安装了 build-essential。现在我尝试了以下命令来运行程序..

```
sudo gedit first.c 
```

然后键入基本的 hello world 程序。然后...

```
cc -c first.c -o first.c 
```

但是在这个命令上它显示错误为

> 没有输入文件。

并告诉我如何运行这个程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:16:28.167

起初，您不必以 root 身份编辑文件。这是个坏主意。

该行`cc -c first.c -o first.c`会覆盖您不想要的 C 文件

```
cc first.c -o first 
```

然后你想运行你可以使用的程序

```
./first 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:17:39.017

该编译命令行应该可以工作。*但是*它会**覆盖**您的源文件。

这些`-o`选项告诉编译器如何命名输出文件，如果您将其命名为与源文件相同的名称，它将被覆盖。

您传递给编译器的第一个标志`-c`，告诉编译器生成一个*目标文件*。链接器稍后可以使用这些目标文件与其他目标文件链接以创建最终的可执行程序。但是，它不会创建您可以运行的程序。

要从单个源文件创建可执行程序，请执行以下操作：

```
$ cc first.c -o first 
```

这将创建一个名为`first`.

然后运行这个程序：

```
$ ./first 
```

最后一条命令告诉 shell`first`在当前目录（名为`.`）中查找并执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:16:42.030

你不想`.c`在输出文件上。IE

```
cc -c first.c -o first 
```

编辑：哎呀。你也不想要`-c`

```
cc -o first first.c 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:18:04.677

正确的用法是：

```
cc -o outputfile myFile.c 
```

然后你可以运行可执行文件：

```
./outputfile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T15:18:32.647

删除`-c`并尝试：

```
cc first.c -o first
   ^^^^^^^ ^^^^^^^^
    input   output 
```

跑步：

```
./first 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T15:18:55.867

Make 配置为默认识别某些文件扩展名，因此您可以简单地执行以下操作：

```
make first 
```

然后 Make 将找到`first.c`并生成`first`二进制可执行文件，并向您显示它使用的编译命令。请注意，要使其以合理的方式工作，您应该只有一个 first.XXX 源文件。此外，一旦你有多个源文件，你需要编写一个`Makefile`，但只有一个源默认值就足够了。

要运行生成的可执行文件，请执行

```
./first 
```

`./`是必需的，因为在 unix 环境中，工作目录通常不在（也不应该）在 PATH 中。

* * *

哦，是的，正如其他人所提到的：不要`sudo`用于这样的东西。如果你已经这样做了，你就不能以普通用户的身份修改/删除这些文件，因为它们归根用户所有。做`ls -l`，它会告诉你文件的所有者。然后您可以`sudo chown yourusername.yoursername file`将所有者更改`file`为由`yourusername`（用户和文件组）拥有。

# c# - 使用实体框架添加引用实体时记录加倍

> ID：15882779
> 
> 赞同：0
> 
> 时间：2013-04-08T15:14:22.677
> 
> 标签：c#, asp.net, sql, asp.net-mvc, entity-framework

我有一个问题，当我添加一个新实体`SessionImages`，然后添加另一个（通过上传）时，它会翻倍。例如 ：

1.  添加图像： ![在此处输入图像描述](https://i.stack.imgur.com/k5FcO.gif)

2.  之后添加另一个： ![在此处输入图像描述](https://i.stack.imgur.com/SIrtZ.gif)

这是我的控制器代码：

```
[HttpPost]
public ActionResult SessionImages(FormCollection collection)
{
    int SessionID = Convert.ToInt32(collection[0]);
    Sessions SessionModel = sessionsRepo.GetSessionById(SessionID);
    bool uploadSucceded = Utility.Utility.UploadImages(this, Request.Files, Server.MapPath(Path.Combine("~/Photos/Sessions", SessionModel.Name)));
    for (int i = 0; i < Request.Files.Count; i++)
    {
        if (Request.Files[i].ContentLength == 0)
        {
            continue;
        }

        SessionImages ImageModel = new SessionImages
        {
            Name = Request.Files[i].FileName,
            Path = Path.Combine("~/Photos/Sessions/", SessionModel.Name, "actual", Request.Files[i].FileName),
            Session = SessionModel,
            SessionID = SessionID
        };
        sessionImagesRepo.Add(SessionModel, ImageModel);
    }            
    return RedirectToAction("SessionImages",SessionModel.ID);
} 
```

这是`sessionImagesRepo.Add`方法：

```
public SessionImages Add(Sessions SessionModel, SessionImages ImageModel)
{
    try
    {
        context.Entry(ImageModel).State = System.Data.EntityState.Added;
        SessionModel.PhotosCount = SessionModel.Images.Count;
        context.Entry(SessionModel).State = System.Data.EntityState.Modified;                
        context.SaveChanges();
    }
    catch
    {
        return null;
    }
    return ImageModel;
} 
```

这是我的实体：

```
namespace FP.Domain.Entities
{
    public class Sessions
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public DateTime Date { get; set; }
        public int PhotosCount { get; set; }
        public string CoverPhoto { get; set; }
        public List<SessionImages> Images { get; set; }
    }
}

namespace FP.Domain.Entities
{
    public class SessionImages
    {
        public int ImageID { get; set; }
        public string Name { get; set; }
        public string Path { get; set; }
        public int SessionID { get; set; }
        public Sessions Session { get; set; }
    }
} 
```

这是配置：

```
namespace FP.Domain.Configurations
{
    public class SessionsConfig : EntityTypeConfiguration<Sessions>
    {
        public SessionsConfig()
        {
            ToTable("Sessions");
            Property(p => p.Name).IsRequired();
            Property(p => p.PhotosCount).IsRequired();
            Property(p => p.CoverPhoto).IsRequired();
            Property(p => p.Date).HasColumnType("date");
        }
    }
}

namespace FP.Domain.Configurations
{
    public class SessionImagesConfig : EntityTypeConfiguration<SessionImages>
    {
        public SessionImagesConfig()
        {
            ToTable("SessionImages");
            HasKey(e => e.ImageID);
            Property(p => p.Path).IsRequired();
            HasRequired(i => i.Session)
                .WithMany(s => s.Images)
                .HasForeignKey(i => i.SessionID);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:55:16.950

尝试像这样更改存储库方法：

```
public SessionImages Add(Sessions SessionModel, SessionImages ImageModel)
{
    try
    {
        SessionModel.Images.Add(ImageModel);
        SessionModel.PhotosCount = SessionModel.Images.Count;
        context.Entry(SessionModel).State = System.Data.EntityState.Modified;                
        context.SaveChanges();
    }
    catch
    {
        return null;
    }
    return ImageModel;
} 
```

并在操作中删除我评论过的行：

```
 SessionImages ImageModel = new SessionImages
    {
        Name = Request.Files[i].FileName,
        Path = Path.Combine("~/Photos/Sessions/", SessionModel.Name, "actual", Request.Files[i].FileName),
        //Session = SessionModel,
        SessionID = SessionID
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:33:59.380

我建议你放弃这些行，如果你能解决它（我可以在 中看到这一点`count`）......

```
context.Entry(ImageModel).State = System.Data.EntityState.Added;
SessionModel.PhotosCount = SessionModel.Images.Count;
context.Entry(SessionModel).State = System.Data.EntityState.Modified; 
```

这可能就是它的问题所在。我不止一次看到过类似的问题——然后我通常会做相反的事情：

```
context.Entry(Parent).State = System.Data.EntityState.Unchanged; 
```

你在那里所做的一切都是为了`Count`工作。

我可以理解优化的原因，但你在集合中确实有这个数量。我知道如果您不想加载等，这会更快。

我不确定该建议什么 - 但我怀疑这是“罪魁祸首”。

> 尝试不使用它，在测试时关闭并忽略计数。走着瞧吧。如果是这样，那么考虑如何重新组织一下。

# uml - Visio 2007 中的 UML 类图主键

> ID：15882784
> 
> 赞同：0
> 
> 时间：2013-04-08T15:14:35.877
> 
> 标签：uml, visio, class-diagram

如何在 Visio 2007 中显示主键和外键？我完全被难住了。到目前为止，我的所有研究都显示了如何在 2003 年做到这一点，但在 2007 年却一无所获。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:33:01.100

主键是 SQL 世界中的一个术语。然而，UML 类图与数据库无关。:)

[这应该可以帮助你。](https://stackoverflow.com/questions/10282383/primary-foreign-keys-in-uml)

# c++ - Qt C++ QDomDocument，递归迭代XML数据，检索没有子数据的文本元素

> ID：15882786
> 
> 赞同：1
> 
> 时间：2013-04-08T15:14:45.093
> 
> 标签：c++, xml, qt, dom, recursion

我有一个这样的 XML 文档

```
<root>
 <stuff>
   <data foo="bar">
     <name>barf</name>
     <value>123</value>
   </data>
   <!-- ... --->
 </stuff>
</root> 
```

并希望通过树递归以从中获取所有信息，例如

```
data bar
 name barf
 value 123 
```

但是，[DomElement::text()](http://qt-project.org/doc/qt-4.8/qdomelement.html#text)也返回子元素的文本内容，即`data`元素的“barf 123”

我发现一些相当紧凑的代码可以通过 DOM 进行递归：

```
void MyClass::TraverseXmlNode(const QDomNode& node)
{
    QDomNode domNode = node.firstChild();
    QDomElement domElement;
    while(!(domNode.isNull())) 
    {
        if(domNode.isElement()) 
        {
            domElement = domNode.toElement();
            if(!(domElement.isNull()))
            {
                qDebug() << __FUNCTION__ << "" << domElement.tagName() << domElement.text();
            }
        }
        TraverseXmlNode(domNode);
        domNode = domNode.nextSibling();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:46:46.033

The solution is very simple: do not output an element's text. You want to look for text nodes instead:

```
void MyClass::TraverseXmlNode(const QDomNode& node)
{
  QDomNode domNode = node.firstChild();
  QDomElement domElement;
  QDomText domText;

  static int level = 0;

  level++;

  while(!(domNode.isNull())) 
  {
    if(domNode.isElement()) 
    {
      domElement = domNode.toElement();
      if(!(domElement.isNull()))
      {
        qDebug() << __FUNCTION__ << "isElement" << level << QString(level, ' ').toLocal8Bit().constData() << domElement.tagName().toLocal8Bit().constData();

        QDomNamedNodeMap nma = domElement.attributes();
        int l = nma.length();
        for(  int i=0; i < l; i++ )
        {
          QDomAttr tempa = nma.item(i).toAttr();
          qDebug() << __FUNCTION__ << "isElement"  << level << QString(level, ' ').toLocal8Bit().constData() << "attribute" << i << tempa.name().toLocal8Bit().constData() << tempa.value().toLocal8Bit().constData();
        }
      }
    }

    if(domNode.isText())
    {
      domText = domNode.toText();
      if(!domText.isNull())
      {
        qDebug() << __FUNCTION__ << "isText   " << level << QString(level, ' ').toLocal8Bit().constData() << domText.data().toLocal8Bit().constData();
      }
    }

    TraverseXmlNode(domNode);
    domNode = domNode.nextSibling();
  }

  level--;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-16T13:46:32.990

对于那些在这里寻找紧凑代码来迭代 a 的人`QDomDocument`：

```
void recurseQDomNode(QDomNode node, int depth, const std::function<void (QDomNode&, int depth)>& perNodeAction)
{
    QDomNodeList paths = node.childNodes();
    perNodeAction(node, depth);
    for (int i = 0; i < paths.count(); ++i) {
        recurseQDomNode(paths.at(i), depth + 1, perNodeAction);
    }
} 
```

还有一个解决问题的例子

```
int main(int argc, char *argv[])
{
    QDomDocument doc;
    doc.setContent(QString(R"(<root>
 <stuff>
   <data foo="bar">
     <name>barf</name>
     <value>123</value>
   </data>
   <!-- ... --->
 </stuff>
</root>
)"));

    recurseQDomNode(doc.documentElement().firstChild(), 0, [](QDomNode& node, int depth)
    {
        if (node.isElement()) {
            QString output(depth, ' ');

            auto element = node.toElement();
            output += element.tagName();

            // Add attribute values to the line
            auto attributeMap = element.attributes();
            for(int i = 0; i < attributeMap.count(); ++i) {
                auto attribute = attributeMap.item(i).toAttr();
                output += " " + attribute.value();
            }

            // Add element string content to the line
            if (element.firstChild().isText()) {
                output += " " + element.firstChild().toText().data();
            }

            qDebug() << output;
        }
    });

    return 0;
} 
```

输出：

```
"stuff"
" data bar"
"  name barf"
"  value 123" 
```

# delphi - 组合框参数在delphi中没有默认值

> ID：15882790
> 
> 赞同：1
> 
> 时间：2013-04-08T15:15:02.933
> 
> 标签：delphi, delphi-xe3

我正在处理的程序使用 if 语句在 SQL 中添加一行以获取另一个组合框的内容

```
procedure TFmNewGarage.ComboBoxCountryEnter(Sender: TObject);
begin
  ADOQueryCountry.SQL.Clear;
  ADOQueryCountry.SQL.Add('SELECT DISTINCT Country');
  ADOQueryCountry.SQL.Add(' FROM TblBaseCar');
  ADOQueryCountry.Open;
  while not ADOQueryCountry.Eof do
  begin
  ComboBoxCountry.Items.Add(ADOQueryCountry['Country']);
  ADOQueryCountry.Next;
  end;
end;

procedure TFmNewGarage.ComboBoxCountryChange(Sender: TObject);
begin
  SelA:=True;
  ComboBoxManufacturer.Show;
  ComboBoxCountry.Hide;
end;

procedure TFmNewGarage.ComboBoxManufacturerEnter(Sender: TObject);
begin
  ADOQueryManufacturer.SQL.Clear;
  ADOQueryManufacturer.SQL.Add('SELECT DISTINCT Manufacturer');
  ADOQueryManufacturer.SQL.Add(' FROM TblBaseCar');
  if SelA=true then
  ADOQueryManufacturer.SQL.Add(' WHERE Country=(ComboBoxCountry.seltext)');
  ADOQueryManufacturer.Open;
  while not ADOQueryManufacturer.Eof do
  begin
  ComboBoxManufacturer.Items.Add(ADOQueryManufacturer['Manufacturer']);
  ADOQueryManufacturer.Next;
  end;
end; 
```

在运行时，这会导致错误 ComboBoxCountry.seltext has no default value，谁能帮我纠正这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:01:18.523

`SelText`不是您应该使用的属性。您需要`Items`选择的组合框值`ItemIndex`：

```
var
 Country: string;
begin
  ...
  if ComboBoxCountry.ItemIndex <> -1 then
  begin
    Country := ComboBoxCountryItems[ComboBoxCountry.ItemIndex];
    ADOQueryManufacturer.SQL.Add('WHERE Country = ' + QuotedStr(Country));
  end;
end; 
```

# objective-c - 双重分配在objective-c中有效吗？

> ID：15882791
> 
> 赞同：-5
> 
> 时间：2013-04-08T15:15:07.743
> 
> 标签：objective-c, c, variable-assignment

Objective-c 中的以下行是否像 C 中一样编译？

```
a=b=1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:16:11.123

是的，它的工作原理与 C 中的相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:17:28.893

Objective-C 是 C 的超集，所以在 C 中工作的所有东西都在 Objective-C 中工作。

# python - 在这样的数组中生成一个包含数千个随机位置的数组，例如 python 中的 (3,75) 和 (56,34)

> ID：15882792
> 
> 赞同：0
> 
> 时间：2013-04-08T15:15:17.880
> 
> 标签：python, arrays, list, random, coordinates

到目前为止，我创建了 2 个分别标记为 x 和 y 的数据点列表。我不知道如何将它们组合成一个数组，以便它们是坐标。

```
import random
import pylab

x = [(random.randint(0,100)) for i in range(3000)]
y = [(random.randint(0,100)) for j in range(3000)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:18:53.650

您可以将它们与`zip()`：

```
zip(x, y) 
```

或者您可以*一起*生成数字：

```
[(random.randint(0,100), random.randint(0,100)) for i in xrange(3000)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:22:34.117

我注意到您正在导入[`pylab`](http://www.scipy.org/PyLab). 如果您乐于使用[NumPy](http://www.numpy.org/)数组作为坐标，您可以简单地编写：

```
import numpy.random
coord = numpy.random.randint(0, 100, (3000, 2)) 
```

不需要显式循环或列表推导。这使得代码比纯 Python 版本快约 120 倍：

```
In [6]: %timeit coord = numpy.random.randint(0, 100, (3000, 2))
10000 loops, best of 3: 82.7 us per loop

In [7]: %timeit coord = [(random.randint(0,100), random.randint(0,100)) for i in xrange(3000)]
100 loops, best of 3: 10.3 ms per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:18:05.013

你可以使用[`zip`](http://docs.python.org/2/library/functions.html#zip)：

```
>>> x = [(random.randint(0,100)) for i in range(3000)]
>>> y = [(random.randint(0,100)) for j in range(3000)]
>>> coords = zip(x,y)
>>> len(coords)
3000
>>> type(coords[0])
<type 'tuple'>
>>> coords[0]
(54, 0)
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:22:17.760

您可以将列表作为元组添加到包含坐标的新列表中：

```
import random
import pylab

XY=[]

x = [(random.randint(0,100)) for i in range(3000)]
y = [(random.randint(0,100)) for j in range(3000)]

for xg, yg in zip(x,y):
    XY.append((xg,yg)) 
```

# c - fgets 为 popen 返回的 FILE 返回错误

> ID：15882799
> 
> 赞同：5
> 
> 时间：2013-04-08T15:15:32.840
> 
> 标签：c, popen, fgets

我正在尝试从我的 C 代码执行命令行，但是当我进入 fgets() 函数时，我得到了一个 NULL 错误。

```
void executeCommand(char* cmd, char* output) {
    FILE *fcommand;
    char command_result[1000];
    fcommand = popen(cmd, "r");
    if (fcommand == NULL) {
        printf("Fail: %s\n", cmd);
    } else {
        if (fgets(command_result, (sizeof(command_result)-1), fcommand) == NULL)
             printf("Error !");
        strcpy(output, command_result);
    }
    pclose(fcommand);
} 
```

我的命令是：

```
java -jar <parameters> 
```

为什么我从 fgets 得到 NULL 结果，尽管当我尝试在终端中执行相同的命令时，它按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:21:23.377

> fgets() 从流中最多读入一个小于 size 的字符，并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符后停止读取。如果读取了换行符，则将其存储到缓冲区中。'\0' 存储在缓冲区中的最后一个字符之后。

简而言之，`popen()`正在执行 a`fork()`并且您尝试在由 引发的程序`cmd`产生输出之前从管道读取，因此管道上没有数据，管道上的第一次读取将返回`EOF`，因此`fgets()`返回而不获取数据。您要么需要睡觉，要么进行轮询，要么进行阻塞读取。

# parameters - 自定义 CrossRider 安装程序

> ID：15882802
> 
> 赞同：0
> 
> 时间：2013-04-08T15:15:38.307
> 
> 标签：parameters, customization, browser-extension, crossrider

让我详细说明我要完成的工作：

我有 1 个应用程序（除了特定的应用程序代码）还包含一个 CrossRider 扩展。根据用户在安装应用程序时选择的选项，他可以启用/禁用各种功能。为此，我的应用程序包含一个指示它将如何工作的标志（例如，如果标志 = 1，那么它将连接到站点 1，如果标志 = 2，那么它将连接到站点 2，等等）。

我需要能够将此标志传递给我的 CrossRider 扩展，但我不确定如何执行此操作。在扩展代码中，我会使用这样的东西：

```
if (flag == 1)
   InsertFrame(URL_FOR_SITE_1);
if (flag == 2)
   InsertFrame(URL_FOR_SITE_2);
etc. 
```

有没有办法将此标志传递给我的 CrossRider 扩展程序？我在 CrossRider 站点上托管扩展程序，但如果需要，将其托管在不同的服务器上不会有问题。

谢谢你，米尼亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:19:46.703

虽然不可能将信息直接传递给扩展，但我们可能有另一种方法将数据嵌入到安装程序的生成机制中。请联系我们的支持 (support@crossrider.com)，我们很乐意进一步讨论您的要求。

# php - 如何在phpunit中运行完整目录？

> ID：15882803
> 
> 赞同：0
> 
> 时间：2013-04-08T15:15:42.570
> 
> 标签：php, tdd, phpunit

我的测试有一些复杂的目录结构。
示例：

```
unitests

unitests/moduleA
unitests/moduleA/t1.php
unitests/moduleA/t2.php
unitests/moduleA/t3.php

unitests/moduleB
unitests/moduleB/t1.php
unitests/moduleB/t2.php
unitests/moduleB/t3.php 
```

我可能有更深的目录结构。

如何在一个命令中运行所有测试？

（我试过`phpunit unitests/*/*`只运行找到的第一个文件`unitests/moduleA/t1.php`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:24:45.110

您应该使用配置文件，它将使将来运行测试变得更容易。

如果您创建包含以下内容的`phpunit.xml`文件：

```
<phpunit>
<testsuites>

<testsuite name="Unit">
<directory>unitests/*</directory>
</testsuite>

</testsuites>
</phpunit> 
```

并运行`phpunit`，所有测试都应该运行。

您还应该为所有类添加`Test`.

此外，为每个子文件夹创建一个测试套件也不是一个坏主意。

# unit-testing - 如何打破 F# 中的函数依赖关系？

> ID：15882806
> 
> 赞同：4
> 
> 时间：2013-04-08T15:15:45.293
> 
> 标签：unit-testing, f#

我想在不调用 fun2 的情况下对 fun1 进行单元测试。

```
let fun2() =
    // Some complex function with lots of dependencies.
    1

let fun1() =
    fun2() * 2 
```

打破两个函数之间依赖关系的最佳方法是什么？

我尝试了几种不同的方法，但它们只会增加混乱。

**将 fun2 传递给 fun1**

```
let fun1(fun2) =
    fun2() * 2 
```

**转换为类并覆盖**

```
type FunClass() =
    abstract member fun2 : unit -> int
    default x.fun2() = 1

    member x.fun1() =
        x.fun2() * 2

type FunClassMock() =
    override member x.fun2() = 1 
```

**使用策略模式**

```
type Fun1Class(fun2Class) =

    member x.fun1() =
       fun2Class.fun2() * 2 
```

**使用变量**

```
let fun2Imp() =
    1

let mutable fun2 = fun2Imp

let fun1() =
    fun2() * 2 
```

有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:29:50.273

这取决于您的使用情况，但您可以执行以下操作：

```
let fun2() =
    // Some complex function with lots of dependencies.
    1

let createFun1 fun2 =
    fun () -> fun2() * 2

let fun1 = createFun1 fun2 
```

这对于单元测试也很有用，因为您可以通过简单地为 fun2 传递一个简单的函数来测试 fun1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:31:07.577

它不是很灵活，但是编译器指令可以工作。

```
let fun2() =
  #if TESTING
  1
  #else
  // Some complex function with lots of dependencies.
  #endif 
```

`fun2`在单独的模块中定义并`open`添加所需的模块是另一种选择。

```
module Impl =
  let fun2() =
    // Some complex function with lots of dependencies.

module Testing =
  let fun2() = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:19:44.820

你这样做的任何方式（至少我知道）都会“增加混乱”。这样的事情怎么样？

```
let fun1() = 
    fun1_impl(fun2)

let fun1_impl(fun2) =
    fun2() * 2 
```

然后，在常规代码中使用`fun1`，在您的测试中使用`fun1_impl`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:24:55.550

总的来说，通过的论点似乎是最干净的。

杂乱效应可能不是从技术上解决，而是从语义上解决：它来自于它似乎有点武断的事实，来自于“function1”缺乏意义。

是否有更高、更连贯的级别在您的代码中可能更有意义？

# delphi - Delphi XE3 Firemonkey 可滚动 TImage

> ID：15882812
> 
> 赞同：0
> 
> 时间：2013-04-08T15:15:52.510
> 
> 标签：delphi, firemonkey, timage

我需要同时显示多个 GIF。除非有人可以将我指向“画廊”类型的控件，否则当前的计划是将 TImages 放在滚动框上。但是，我无法让滚动框垂直滚动（对于多个图像）或水平滚动（图像大于可用窗口）。能够缩放/缩放图像也很好。

谢谢

# sql-server - 需要设计理念：C# 和 SQL Server 的可搜索时间/日期时间

> ID：15882817
> 
> 赞同：0
> 
> 时间：2013-04-08T15:16:05.983
> 
> 标签：sql-server, datetime

我正在尝试在我的一个应用程序上添加一项功能。这是一个示例：

**公司ABC**

```
Business hours:
Sunday closed
Monday 7am - 5pm
Tuesday 7am - 5pm
Wednesday 7am - 5pm
Thursday 7am - 5pm
Friday 7am - 5pm
Saturday closed 
```

**公司 DEF**

```
Sunday 10am - 12pm
Monday 8am - 4pm
Tuesday 8am - 4pm
Wednesday 8am - 4pm
Thursday 8am - 4pm
Friday 8am - 4pm
Saturday closed 
```

现在，我想做的是让我的用户能够搜索/过滤营业时间。例如，仅返回在周一下午 2 点或周六下午 1 点或周一任何时间营业的企业。

我的想法是在 SQL Server 中使用日期时间，但看来我可能需要为每天（周日到周六）创建 7 列，并为开始时间创建不同的列以打开关闭时间。

下一个想法是使这些列可搜索，以便我能够过滤它们。例如，如果用户搜索 Monday 12PM，则搜索将是 Monday (open time) <= (user search, 12pm) <= (close time)。

所以基本上，它将类似于：

```
SELECT * 
FROM Companies 
WHERE [user_search_time] IS "BETWEEN open_time AND close_time WHERE day=[user_search_day] 
```

我很难设计这个，更不用说如何实现它了。

使用的技术是 C#/ASP.Net 和 SQL Server 2008。问题是如何使用上述技术设计/实现此功能。

任何想法/提示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:18:41.283

可能想将此推送给 codereview 或程序员。我认为您走在正确的道路上，但不是添加列，而是添加一个新表。叫`business_hours`

```
BUSINESS_HOURS
business (company fk)
open_time (datetime)
close_time (datetime)
day (M,T,W,TH,F,S,Sun) // you can do this however u want 1-7 would work as well 
```

那么您的查询几乎与您所拥有的相同。

```
SELECT * 
FROM 
    business_hours 
WHERE 
    business = user_company_id
    [user_search_time] IS BETWEEN open_time AND close_time and 
    day=[user_search_day] 
```

表格的好处是它更加非规范化，您可以支持其中有休息的时间。我可以支持 12-2 和 5-8。您只需插入一条新记录，它就会起作用。我不喜欢`all day`在上午 12 点到下午 12 点的范围内进行操作，但它会起作用，并使您的设计保持简单。

# c++ - 在其他 xrc 中部署 xrc

> ID：15882830
> 
> 赞同：0
> 
> 时间：2013-04-08T15:16:27.763
> 
> 标签：c++, wxwidgets

我正在使用外部 XRC 方法通过 wxFormBuilder 实现我的用户界面。

我正在尝试以这种方式实现从 wxStaticBoxSizer 悬挂的一组面板：

```
MainFrame::MainFrame(const wxString& title, const wxPoint& pos, const wxSize& size) {

    wxXmlResource::Get()->LoadFrame((wxFrame*)this,  (wxWindow*)NULL , wxT("MyFrame1"));

    wxStaticBoxSizer* almacenador = (wxStaticBoxSizer*)FindItem(XRCID("Contenedor"));

    if (!almacenador){
        cout << "Error cargando sizer!" << endl << flush;
    }

    wxXmlResource::Get()->LoadPanel( (wxWindow*)almacenador , wxT("MyPanel6"));
    wxXmlResource::Get()->LoadPanel( (wxWindow*)almacenador , wxT("MyPanel6"));
    wxXmlResource::Get()->LoadPanel( (wxWindow*)almacenador , wxT("MyPanel6"));

    SetTitle(title);
    SetIcon(wxICON(appicon));
    SetSize(size);
    SetPosition(pos);

    Show(true);
} 
```

从“主”函数加载资源的位置

```
wxXmlResource::Get()->Load("rc/resource2.xrc"); 
```

线。启动我的程序时它可以工作，因为我在任何地方都看不到这三个面板。

这是我的 XRC 文件：

主框架：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<resource xmlns="http://www.wxwindows.org/wxxrc" version="2.3.0.1">
    <object class="wxFrame" name="MyFrame1">
        <style>wxDEFAULT_FRAME_STYLE|wxTAB_TRAVERSAL</style>
        <size>283,401</size>
        <title></title>
        <centered>1</centered>
        <aui_managed>0</aui_managed>
        <object class="wxPanel" name="m_panel1">
            <style>wxTAB_TRAVERSAL</style>
            <object class="wxBoxSizer">
                <orient>wxVERTICAL</orient>
                <object class="sizeritem">
                    <option>0</option>
                    <flag>wxEXPAND</flag>
                    <border>5</border>
                    <object class="wxBoxSizer">
                        <orient>wxHORIZONTAL</orient>
                        <object class="sizeritem">
                            <option>0</option>
                            <flag>wxALL|wxALIGN_BOTTOM</flag>
                            <border>5</border>
                            <object class="wxStaticText" name="m_label_Nombre1">
                                <label>Nombre</label>
                                <wrap>-1</wrap>
                            </object>
                        </object>
                        <object class="sizeritem">
                            <option>1</option>
                            <flag>wxEXPAND|wxTOP|wxRIGHT|wxLEFT</flag>
                            <border>5</border>
                            <object class="wxTextCtrl" name="m_text_Nombre">
                                <value></value>
                            </object>
                        </object>
                    </object>
                </object>
                <object class="sizeritem">
                    <option>0</option>
                    <flag>wxALIGN_TOP|wxEXPAND</flag>
                    <border>5</border>
                    <object class="wxBoxSizer">
                        <orient>wxHORIZONTAL</orient>
                        <object class="sizeritem">
                            <option>0</option>
                            <flag>wxALL|wxALIGN_BOTTOM</flag>
                            <border>5</border>
                            <object class="wxStaticText" name="m_label_Apellidos">
                                <label>Apellidos</label>
                                <wrap>-1</wrap>
                            </object>
                        </object>
                        <object class="sizeritem">
                            <option>1</option>
                            <flag>wxTOP|wxRIGHT|wxLEFT</flag>
                            <border>5</border>
                            <object class="wxTextCtrl" name="m_text_Apellidos">
                                <value></value>
                            </object>
                        </object>
                    </object>
                </object>
                <object class="sizeritem">
                    <option>0</option>
                    <flag>wxEXPAND</flag>
                    <border>5</border>
                    <object class="wxBoxSizer">
                        <orient>wxHORIZONTAL</orient>
                        <object class="sizeritem">
                            <option>0</option>
                            <flag>wxALL|wxALIGN_BOTTOM</flag>
                            <border>5</border>
                            <object class="wxStaticText" name="m_label_Edad">
                                <label>Edad</label>
                                <wrap>-1</wrap>
                            </object>
                        </object>
                        <object class="sizeritem">
                            <option>0</option>
                            <flag>wxALIGN_BOTTOM|wxALIGN_RIGHT|wxTOP|wxRIGHT|wxLEFT</flag>
                            <border>5</border>
                            <object class="wxSpinCtrl" name="m_spin_Edad">
                                <style>wxSP_ARROW_KEYS</style>
                                <value>0</value>
                                <min>0</min>
                                <max>10</max>
                            </object>
                        </object>
                    </object>
                </object>
                <object class="sizeritem">
                    <option>0</option>
                    <flag>wxEXPAND | wxALL</flag>
                    <border>5</border>
                    <object class="wxStaticLine" name="m_staticline1">
                        <style>wxLI_HORIZONTAL</style>
                    </object>
                </object>
                <object class="sizeritem">
                    <option>1</option>
                    <flag>wxEXPAND</flag>
                    <border>5</border>
                    <object class="wxBoxSizer">
                        <orient>wxHORIZONTAL</orient>
                        <object class="sizeritem">
                            <option>1</option>
                            <flag>wxALL|wxEXPAND</flag>
                            <border>5</border>
                            <object class="wxRadioBox" name="m_radioBox_Sexo">
                                <label>Sexo</label>
                                <selection>0</selection>
                                <content>
                                    <item>Hombre</item>
                                    <item>Mujer</item>
                                </content>
                                <dimension>1</dimension>
                            </object>
                        </object>
                        <object class="sizeritem">
                            <option>1</option>
                            <flag>wxEXPAND|wxALL</flag>
                            <border>5</border>
                            <object class="wxStaticBoxSizer">
                                <orient>wxVERTICAL</orient>
                                <label>Preferencias</label>
                                <object class="sizeritem">
                                    <option>0</option>
                                    <flag>wxALL</flag>
                                    <border>5</border>
                                    <object class="wxCheckBox" name="m_checkBox_Cocacola">
                                        <label>Cocacola</label>
                                        <checked>0</checked>
                                    </object>
                                </object>
                                <object class="sizeritem">
                                    <option>0</option>
                                    <flag>wxALL</flag>
                                    <border>5</border>
                                    <object class="wxCheckBox" name="m_checkBox_FantaNaranja">
                                        <label>Fanta naranja</label>
                                        <checked>0</checked>
                                    </object>
                                </object>
                                <object class="sizeritem">
                                    <option>0</option>
                                    <flag>wxALL</flag>
                                    <border>5</border>
                                    <object class="wxCheckBox" name="m_checkBox_FantaLimon">
                                        <label>Fanta Limon</label>
                                        <checked>0</checked>
                                    </object>
                                </object>
                            </object>
                        </object>
                    </object>
                </object>
                <object class="sizeritem">
                    <option>1</option>
                    <flag>wxEXPAND</flag>
                    <border>5</border>
                    <object class="wxStaticBoxSizer" name="Contenedor">
                        <orient>wxVERTICAL</orient>
                        <label>Contenedor</label>
                        <object class="sizeritem">
                            <option>0</option>
                            <flag>wxALL</flag>
                            <border>5</border>
                            <object class="wxButton" name="m_button4">
                                <label>MyButton</label>
                                <default>0</default>
                            </object>
                        </object>
                    </object>
                </object>
                <object class="sizeritem">
                    <option>0</option>
                    <flag>wxALIGN_BOTTOM</flag>
                    <border>5</border>
                    <object class="wxBoxSizer">
                        <orient>wxHORIZONTAL</orient>
                        <object class="sizeritem">
                            <option>0</option>
                            <flag>wxALL</flag>
                            <border>5</border>
                            <object class="wxButton" name="m_button_Guardar">
                                <label>Guardar</label>
                                <default>0</default>
                            </object>
                        </object>
                        <object class="sizeritem">
                            <option>0</option>
                            <flag>wxALL</flag>
                            <border>5</border>
                            <object class="wxButton" name="m_button_Limpiar">
                                <label>Limpiar</label>
                                <default>0</default>
                            </object>
                        </object>
                        <object class="sizeritem">
                            <option>0</option>
                            <flag>wxALL</flag>
                            <border>5</border>
                            <object class="wxButton" name="m_button_Salir">
                                <label>Salir</label>
                                <default>0</default>
                            </object>
                        </object>
                    </object>
                </object>
            </object>
        </object>
    </object>
</resource> 
```

第二个（要作为数组重复的对象）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<resource xmlns="http://www.wxwindows.org/wxxrc" version="2.3.0.1">
    <object class="wxPanel" name="MyPanel6">
        <style>wxTAB_TRAVERSAL</style>
        <size>500,300</size>
        <object class="wxBoxSizer">
            <orient>wxVERTICAL</orient>
            <object class="sizeritem">
                <option>0</option>
                <flag>wxALL</flag>
                <border>5</border>
                <object class="wxButton" name="m_button5">
                    <label>FRAME2</label>
                    <default>0</default>
                </object>
            </object>
        </object>
    </object>
</resource> 
```

如何在主 XRC 内制作一系列 XRC 面板？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:26:45.950

首先，您的程序应该可怕地死掉，因为您正在从`wxStaticBoxSizer`to 转换`wxWindow`。我真的很想知道是什么让你觉得这样做是个好主意。

其次，在 XRC 中没有重复对象的规定，一般来说，如果你需要这样的东西，在代码中创建 3 个不同的面板，从同一资源加载每个面板会更容易更好。但是如果你真的想的话，你也可以使用[`object_ref`](http://docs.wxwidgets.org/trunk/overview_xrcformat.html#overview_xrcformat_object_ref)XRC 标签来引用来自其他地方的现有对象。

# overflow - IE10 line-height bug with display:inline-block; 和溢出：隐藏；

> ID：15882836
> 
> 赞同：7
> 
> 时间：2013-04-08T15:16:33.530
> 
> 标签：overflow, internet-explorer-10, css

我最近在 IE10 中遇到了一个特殊问题（*叹气*）。看来，如果您使用 display:inline-block; 结合溢出：隐藏；IE10 弄乱了你的行高。我尝试使用 vertical-align:middle; 修复它 但这只是几乎解决了 IE10 中的问题，然后在其他浏览器中引入了基线问题。

触发该错误所需的唯一代码是：

**CSS：**

```
.bug {
  display:inline-block;
  overflow:hidden;
} 
```

**HTML：**

```
<p>This should <span class="bug">be buggy</span> in IE10</p> 
```

我创建了一个 JSFiddle 来说明这个错误 - [http://jsfiddle.net/laustdeleuran/5pWMQ/](http://jsfiddle.net/laustdeleuran/5pWMQ/)。

这里还有一个错误的屏幕截图 - [https://dzwonsemrish7.cloudfront.net/items/3d0t1m3h00462w2n1s0Q/Image%202013-04-08%20at%2011.13.16%20AM.png?v=2688e27a](https://dzwonsemrish7.cloudfront.net/items/3d0t1m3h00462w2n1s0Q/Image%202013-04-08%20at%2011.13.16%20AM.png?v=2688e27a)

**编辑：**

这不是 IE10 错误（而是代表我进行的懒惰测试）。实际上，Chrome（webkit）是做错的——https: [//stackoverflow.com/a/15883508/799327](https://stackoverflow.com/a/15883508/799327)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T15:46:36.917

[CSS 2.1](http://www.w3.org/TR/CSS2/visudet.html)说

> 'inline-block' 的基线是它在正常流中的最后一个行框的基线，除非它没有流入行框，或者如果它的 'overflow' 属性具有除 'visible' 之外的计算值，在在这种情况下，基线是底部边距边缘。

这正是 IE10 正在做的事情。

Firefox 和 Opera 也在做同样的事情。

出问题的不是 IE，而是 Chrome，它没有正确遵循上述规则。

# c - 出于性能原因，将代码推向内核或用户空间？

> ID：15882837
> 
> 赞同：2
> 
> 时间：2013-04-08T15:16:34.623
> 
> 标签：c, linux, performance, operating-system, kernel

最初我认为要使代码更快，最好尝试减少内核和用户空间之间的转换——通过推动更多代码在内核中运行。然而，我在一些类似 SO 的论坛上读到，实际上相反的情况已经完成——更多的代码被推送到用户空间。为什么是这样？这似乎违反直觉？将更多代码放入用户空间仍然需要内核-用户转换，而将代码放入内核并不需要内核-用户转换？

万一有人问-我正在考虑处理数据包数据的应用程序。

编辑

所以更多细节，我正在考虑数据包数据何时到达 - 我想重写网络堆栈并删除不适用于我的数据包处理并且零复制的代码 - 将数据包数据放在用户程序可以的地方尽快访问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:24:08.893

内核是一个时间敏感区域，它是您的 ISR、时间滴答例程和硬件关键部分所在的位置。因此，目标是保持内核代码小而紧凑，进入，完成工作，然后退出。

在您的情况下，您从网络获取数据包，这是一项依赖于硬件的任务（您需要从较低的网络层获取数据），因此获取数据，清除缓冲区，然后通过 DMA 传输将其发送到用户空间；然后在用户空间中进行处理。

根据我的经验：在内核中执行代码所*获得***的**性能不会超过在内核中执行**更多**代码所*损失的整体性能。*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:19:24.487

从用户模式到内核模式的转换需要一些时间和资源，因此仅将代码保持在其中一种模式可能会提高性能。

如前所述：在您的情况下，您最好的选择可能是尽可能快地获取数据并立即使其在用户区可用并在用户区进行处理......将所有处理移至内核级在我看来没有必要......除非你有充分的理由这样做......没有更多信息在我看来你没有理由相信你会在内核模式下比用户模式更快地做到这一点，所有你可以不时进行模式转换，这不应该是相关的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:22:26.300

如果您希望您的代码进入官方内核版本，那么“将其用户模式部分改组到内核中”通常可能是个坏主意。

当然，如果您能证明这样做是获得更好性能的最佳（主观，我知道）方式，并且成本是可以接受的（就内核中的额外代码而言 -> 内核的维护负担更大，更大kernel -> 更多关于内核“太大”等的抱怨），然后一定要遵循这条路线。

但总的来说，最好通过在用户模式下做更多的工作来解决这个问题，并使内核模式任务更小，如果这完全可以替代的话。如果不确切知道您在内核中正在做什么以及您在用户模式下正在做什么，很难确定您应该/不应该做什么。但是，例如，将十几个“项目”分批成一个块，即一个请求内核做某事是比调用内核十几次更好的选择。

作为对描述您正在做什么的编辑的回应：传递用户模式内存区域以接收数据，然后在数据包到达时复制到该区域不是更好吗？假设“所有内存都是平等的”[如果不是，那么无论如何你都会遇到“就地使用”的问题]，这应该同样有效，在内核中花费的时间更少。**

# c# - 为 WCF 颁发单会话证书...危险/问题？

> ID：15882845
> 
> 赞同：1
> 
> 时间：2013-04-08T15:16:51.437
> 
> 标签：c#, wcf, encryption, certificate

我正在尝试设计一种 WCF 访问模式，使我能够保护包含潜在敏感信息的公开服务。

我喜欢使用证书来加密和保护从客户端到服务器的流量的想法，但我不喜欢预先颁发证书，或者让它们由我必须付费的第三方生成......管理撤销列表似乎有点矫枉过正，但我​​不想损害安全性。

我目前的想法是实现某种两部分身份验证方法，该方法将返回一个对一天有效的动态生成证书，并将其用于所有其他 WCF 通信。安装客户端时，客户端将安装服务的公共证书，并使用服务的公共证书加密有效负载，并使用生成的客户端证书对其进行签名（对于除身份验证请求之外的所有消息）。这似乎是正确的做法，但我在任何地方都没有看到任何形式的讨论。

这是因为该方法本质上是不安全的，（如果是，如何），不切实际，速度慢，或者 WCF 框架不支持？还是我的 Google-fu 很弱并且有很多关于此的文章？

# c# - C# 将 UserControl 添加到 datagridview

> ID：15882848
> 
> 赞同：1
> 
> 时间：2013-04-08T15:16:56.073
> 
> 标签：c#, .net, datagridview

我想在 datagridview 中添加一个用户控件，我的用户控件非常简单：

```
public partial class UpDownControl : UserControl
{
    public event EventHandler UpClick;
    public event EventHandler DownClick;

    public UpDownControl(string id)
    {
        InitializeComponent();
        this.Tag = id;
    }

    void BDownClick(object sender, EventArgs e)
    {
        if(DownClick!=null)
            DownClick(this,e);
    }

    void BUpClick(object sender, EventArgs e)
    {
        if(UpClick!=null)
            UpClick(this,e);
    }
} 
```

我想做的就是在datagridview的第一列中添加这个控件，我试图自己找出一个解决方案，但我没有找到一个解决方案。不要告诉我去看这个链接， http: [//msdn.microsoft.com/en-us/library/7tas5c80.aspx](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)，我都读了，但我没有找到用我的用户控件来做的方法。

所以，这是我当前的代码：

```
for(int i=0;i<lposte.Count;++i)
{
    UpDownControl updown = new UpDownControl("test1");
    updown.DownClick += new EventHandler(testvincdown);
    updown.UpClick += new EventHandler(testvincup);

    rang = 1;
    CustomColumn col = new CustomColumn();
    CustomeCell cell = new CustomeCell();

    col.CellTemplate = cell;

    dataGridView1.Columns.Add(col);
    dataGridView1.Rows.add(updown);
}

public class CustomColumn : DataGridViewColumn 
{
    public CustomColumn() : base(new CustomeCell()) { }
    public override DataGridViewCell CellTemplate
    {
        get
        {
            return base.CellTemplate;
        }
        set
        {
            // Ensure that the cell used for the template is a CalendarCell.
            if (value != null &&
                !value.GetType().IsAssignableFrom(typeof(CustomeCell)))
            {
                throw new InvalidCastException("It should be a custom Cell");
            }
            base.CellTemplate = value;
        }
    }
}
public class CustomeCell : DataGridViewCell
{
    public CustomeCell() : base() { }
    public override Type ValueType
    {
        get
        {
            return typeof(UpDownControl);
        }
    }
} 
```

任何帮助将不胜感激。PS：对不起，如果我的英语不完美，我已经尽力了。

谢谢你。

文克

# java - 重用来自 HttpServletRequest 的安全凭证

> ID：15882853
> 
> 赞同：0
> 
> 时间：2013-04-08T15:17:05.747
> 
> 标签：java, jakarta-ee, jboss

我在使用 JBoss 的 Java 中，我有一个正在创建 HttpServlet 的环境，并且我想从该 HttpServlet 中使用 HttpsURLConnection 从另一个 URL 获取信息。为了连接到我的 HttpServlet，用户必须经过身份验证（工作正常）。连接下一个HttpsURLConnection也是这样，认证也是一样的。我想知道是否有一种方法可以将收到的 HttpServletRequest 中的安全凭据（用户名和密码）传递给我创建的 HttpsURLConnection。现在我只使用我创建的管理员帐户并对用户名和密码进行硬编码，但这不是长期的好方法，因为我对此帐户进行审核并且我想知道访问此数据的原始用户，并且不是中级管理员用户。

谢谢

# javascript - 国际象棋时钟倒计时

> ID：15882857
> 
> 赞同：0
> 
> 时间：2013-04-08T15:17:07.500
> 
> 标签：javascript, dom

我正在尝试创建简单的国际象棋代码，我会理解它是如何工作的。我确实找到了一两个样本，但我不明白那个代码。（[链接1](http://bobchess.doubtlesshouse.org.uk/BobChessClock.htm)，[链接2](http://www.online-stopwatch.com/chess-clock/)）你能帮帮我吗？

我尝试将倒数计时器与 checc 时钟结合起来，但没有成功。当我按下“开始”按钮时，时钟将开始为玩家 1（白色）倒计时。当该玩家按下按钮（“白色”）时，该玩家的时间将停止并开始为黑色玩家倒计时，因此当该玩家按下“黑色”按钮时，计时器开始为白色玩家倒计时。我需要 2 个单独的计时器还是足够一个可以“保存”计时器？如何设置“添加时间”？这是当玩家按下按钮时，计时器增加了几秒钟？

这是我到目前为止所尝试的：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Chess clock</title>

    <style type="text/css">
        #MoveWhite{
            margin-left: 50px;
            float:Left;
            width:200px;
            height: 100px;
            background-color: silver;
            text-align: center;
        }

        #MoveBlack{
            float:left;
            width:200px;
            height: 100px;
            background-color: blue;
            text-align: center;
        }

        #Begin{
            margin-left: 50px;
            float:left;
            width: 400px;
            height: 100px;
            background-color: green;
            text-align: center;
        }
        #SetUp{
            margin-left: 50px;
            margin-right: 50px;
            float: left;
            width: 400px;
            height: 100px;
            background-color: green;
        }
        body{
            width: 500px;
            background-color: #06F;
        }

    </style>

    <script type="text/javascript">
    var minutesleft = 0;
    var secondsleft = 60;
    var finishedtext = "Lost"

    ura = new Date();

    ura.setMinutes(ura.getMinutes() + minutesleft);
    ura.setSeconds(ura.getSeconds() + secondsleft);

    function cdWhite(){
        now = new Date();
        diff = ura - now;
        diff = new Date(diff);
        var sec = diff.getSeconds();
        var min = diff.getMinutes();
        if (min < 10){
            min = "0" + min;
        }
        if (sec < 10){
            sec = "0" + sec;
        }

        if(now >= ura){
            clearTimeout(timerID);
            document.getElementById("cdtime").innerHTML = finishedtext;
        }
        else{
        document.getElementById("cdtime").innerHTML = min + ":" + sec;
        }
        timerID = setTimeout("cdWhite()", 10); 
    }

    </script>

</head>

<body>
    <div id = "Begin">
        <p>White player start game when press "Start game" button</p>
        <button onClick="cdWhite()">Start game!</button>

    </div>

    <div id = "num1">
        <div id = "MoveWhite">
            <h1 id = "White"><span id="cdtime">TimerWhite??<!-- Lost (if white player loose) -->
            </span></h1>
            <button onClick="startBlack()">White</button>

        </div>

        <div id = "MoveBlack">
             <h1 id = "Black">TimerBlack??</h1> <!-- Lost (if black player loose) -->
            <button onClick="startWhite()">Black</button>

         </div>

    </div>

    <div id = "SetUp">
        <p>Set different starting time <br/>
            Set starting time: ___min ___sec</p>
        <p>Add time: ____ sec</p>

    </div>

    <ul id = "cas">
    </ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:01:19.757

我可以帮助设计，但你必须制定 JS。您将需要两个单独的计时器来存储每个玩家的当前剩余时间。您当前的实现似乎通过查找开始时间和当前时间之间的差异来跟踪剩余时间。这对于时钟滴答作响的一个实例来说很好，但不适合停止/启动计时器。

我建议尝试以下设计。创建两个计时器变量`whiteTime`和`blackTime`. 将它们初始化为零。您的添加时间按钮可以调用一个函数`addTime()`：

```
function addTime(min, sec)
{
    whiteTime += 60 * min + sec;
    blackTime += 60 * min + sec;
} 
```

您还需要一个变量来跟踪轮到谁了，还需要一个变量来跟踪当前轮的开始时间。当白方开始时，创建一个新的日期来记录当前时间。当玩家点击“白色”按钮时调用此函数。为黑色创建一个类似的函数。

```
var currentPlayer = "white";
var ura = new Date();
function whitesTurn()
{
    if (currentPlayer == "black")
    {
        // Get current time and subtract ura, subtract difference from black's timer
        currentPlayer = "white";
        ura = new Date();
    }
}
function blacksTurn() { } 
```

现在，在您的主计时器功能中，您需要：

*   查找当前时间
*   减去`ura`
*   `currentPlayer`减去' 的计时器所引用的玩家的差值
*   更新该玩家的时钟，检查它是否为零等

# azure - 在 Windows Azure 共享缓存中，无法在美国东部或美国西部地区启动缓存 - 为什么？

> ID：15882858
> 
> 赞同：1
> 
> 时间：2013-04-08T15:17:09.690
> 
> 标签：azure, session-state, azure-caching

尝试开始使用 Windows Azure 共享缓存来存储会话数据。Microsoft 和其他地方的大量帮助文件表明缓存应该与网站位于同一地理区域。（在这一点上，我不使用虚拟机或云服务，只在 Azure 上共享网站）。

问题是，当我按照指示进入旧版门户时，为了创建新缓存，界面将只允许我选择“美国（北部/中部）”和“美国（南部/中部）” “美国（东部）”和“美国（西部）”选项可用，但如果选择，我无法在那里请求缓存。但是我所有的其他 Azure 服务都在美国（东部）。

我想我可以在与我的网站所在的区域不同的区域设置缓存，但这似乎是不明智的。我考虑将我的网站从“美国东部”移动到“美国中北部”，但网站的区域可用性只有“美国东部”和“美国西部”，这两个选项对缓存不可用！

建议？

请注意，我的公司目前还没有准备好使用云服务/虚拟机和基于角色的缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:14:41.573

虽然我不能代表共享缓存团队谈论哪些数据中心将支持共享缓存，但我可以为您指出 2013 年 3 月的[这篇 MSDN 论坛文章](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/faf65b6b-31da-474b-b854-c9c5d1a5ef71)，其中一位版主指出“Azure 共享缓存并非在所有数据中都可用中心。”

只是为了仔细检查，我尝试创建一个共享缓存，并且还看到选择**美国东部**或**美国西部**会导致“不在区域内”消息。

只是好奇您是否尝试过为会话状态缓存提供程序使用 SQL 数据库，因为您确实可以在美国东部和美国西部实例化数据库实例。SQL 数据库的优势： 没有事务配额（共享缓存按小时计算，一旦超过配额，您的缓存将在下一小时结束前不可用）。

# windows - WinDbg：尝试附加到进程时 dbghelp.dll 的版本不匹配

> ID：15882862
> 
> 赞同：2
> 
> 时间：2013-04-08T15:17:25.673
> 
> 标签：windows, debugging, windbg, debugdiag

一年多以前，我已经使用 WinDbg 和 DebugDiag 来查找我们在 Java 中使用的 JNI 本机 DLL 中的内存泄漏。现在我正在寻找线程句柄泄漏。我使用 Process Explorer 创建了一个内存转储，并尝试在 DebugDiag 中对其进行分析，但我得到的只是脚本错误： ![内存转储分析因脚本错误而失败](https://i.stack.imgur.com/u0HgU.png)

我也尝试过 WinDbg，但它不再能够附加到进程。我总是收到错误消息“dbghelp.dll 的版本与调试器不匹配”：（ ![WinDbg 6.12.0002.633 X86 失败](https://i.stack.imgur.com/Qcbi4.png) *“Unbekannter Fehler”的意思是“未知错误”）*

我卸载了 DebugDiag 和 Windows SDK，然后下载了最新版本并安装了 Windows SDK 8 和 DebugDiag 1.2 (x86)。问题保持不变。即使将 Windows SDK 替换为 7.1 版（Windows 7 的最新 SDK），也没有任何变化。

我正在使用一台装有 Windows 7（32 位）的机器。

我假设 DebugDiag 中的问题与 WinDbg 中的问题具有相同的原因。但我不明白版本不匹配是什么意思（谷歌搜索也没有帮助）：

*   WinDbg：6.12.0002.633
*   数据库：6.12.0002.633
*   数据库帮助：6.12.0002.633

我怎样才能让 WinDbg（并希望 DebugDiag）再次工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:59:40.623

这是执行此检查的 dbgeng 部分的伪代码：

```
var (
    g_ApiVersion = API_VERSION{1, 0, 12, 0}
    g_DbghelpVersion API_VERSION
    g_EngOptions = Options{...}
)

func ChkDbghlpVersion() uint32 {
    g_DbghlpVersion = dbghelp.ImagehlpVersionEx(g_ApiVersion)
    if g_DbghelpVersion.Revision < g_ApiVersion.Revision {
        DebugOutput("dbghelp.dll has version mismatch with the debugger")
        if !(g_EngOptions.SomeOpt & 1) {
            return E_UNKNOWN
        }
    }
    return S_OK
} 
```

因此，您应该检查`dbghelp.dll`调试文件夹中返回的`ImagehlpApiVersionEx`内容（可能还有`dbgeng.dll`其中的内容`g_ApiVersion`），以找出调试器失败的原因。

可能的原因：

*   dbghelp.dll 确实有一个备用的构建信息。
*   dbgeng.dll 已损坏 (?) 并在其 api 版本块中包含无效数据

# javascript - jQuery load() 函数内的作用域

> ID：15882864
> 
> 赞同：1
> 
> 时间：2013-04-08T15:17:30.843
> 
> 标签：javascript, jquery, scope

我的范围有问题。对不起这个noobish问题。

我正在尝试使用 jQuery 将图像附加到父 div，但不知道如何将变量“theParent”传递给加载函数。

```
// inside a this.each loop

    var theParent = $(this).parent('div.parent'); 

    var img = $("<img />")
                .attr('src', '/path/img.jpg')
                .error(function(){ console.log('error'); })
                .load(function(){
                    img.addClass('myClass'); // <-- not working plz help
                    theParent.append(img); // <-- not working plz help
                    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:20:12.247

`**[LIVE DEMO](http://jsbin.com/itepap/3/edit)**`

`$(this).addClass('myClass');`会工作，但使用：

```
var img = $("<img />", {
          "src"   : '/images/favicon.png',
          "class" : 'myClass'
      })
      .error(function(){ console.log('error'); })
      .load(function(){
                img.appendTo( theParent ); 
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:20:58.493

试试这个：

```
var theParent = $(this).parent('div.parent'); 

    var img = $("<img />", {
      src: '/path/img.jpg',
      "class": 'myClass' 
    }).appendTo(theParent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:21:11.067

根据[http://api.jquery.com/load-event/，“this](http://api.jquery.com/load-event/) ”是加载事件附加到的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:21:17.783

您是否尝试过以下方法：

```
$('#theDiv').prepend('<img id="theImg" class="myClass" src="theImg.png" />') 
```

# sql-server - SQL Server 2008 / Reporting Services 查询

> ID：15882865
> 
> 赞同：0
> 
> 时间：2013-04-08T15:17:31.517
> 
> 标签：sql-server, tsql, reporting-services

我的递归查询需要一些帮助，以获取我的 SSRS 报告的直接计数（所有成员（儿童）直接）和总计数（所有团队成员）。

这是我当前的查询和结果集。

```
WITH AgentHierarchy([Name], AId, UId, HLevel, ContractDate) 
AS 
(SELECT  
     FirstName + ' ' + LastName  AS Name, AId, UId, 
     0 AS HLevel, ContractDate                       
 FROM    tbl_Asso 
 WHERE  (AId ='A049')

 UNION ALL

 SELECT      
     e.FirstName + ' ' + e.LastName AS Name,
 e.AId, e.UId, 
     eh.HLevel + 1 AS HLevel, e.ContractDate
 FROM        
     tbl_Asso AS e 
 INNER JOIN 
     AgentHierarchy AS eh ON eh.AId = e.UId)
SELECT   
    AId, Name,
(select u.FirstName + ' ' + u.LastName  
     from tbl_Asso u 
     where u.AId = d.UId) as Upline,
    UId, 
    HLevel,  
    ContractDate,
    (Select count(*)  
     from tbl_Asso as dc 
     where dc.UId = d.AId) As DirectCount
FROM    
    AgentHierarchy AS d
ORDER BY 
    HierarchyLevel 
```

当前结果集

```
AId    Name         Upline       UId  HLevel ContractDate  DirectCount
-----------------------------------------------------------------------    
A049  King Bori     Cindy Hoss    A001  0   8/29/2012   5
A052  Kac Marque    King Bori     A049  1   11/6/2012   0
A050  Joseph Moto   King Bori     A049  1   10/9/2012   1
A059  Nancy Ante    King Bori     A049  1   3/27/2013   1
A053  Kathy May     King Bori     A049  1   11/15/2012  2
A057  Robert Murphy King Bori     A049  1   2/12/2013   1
A051  Andy Jane     Joseph Moto   A050  2   2/14/2013   0
A060  Arian Colle   Nancy Ante    A059  2   3/26/2013   0
A058  Phil Hunk     Robert Murphy A057  2   3/21/2013   0
A055  Rea Wane      Kathy May     A053  2   2/20/2013   1
A054  Gabby Orez    Kathy May     A053  2   12/7/2012   0
A056  Steve Wells   Rea Wane      A055  3   3/25/2013   0 
```

我需要更改上述查询以根据合同日期获取直接计数（所有成员（儿童）直接）和 TotalTeam 计数

例如，例如合同日期在 2013 年 3 月 1 日和 2013 年 3 月 31 日之间。我需要得到以下结果集。

我需要合并 contractDate 的参数（以便他们可以获得范围，或者如果它为空，那么他们将获得所有记录和计数。

例如（@Begindate 和@Enddate 之间的ContractDate）或（（@Begindate 为空）和（@enddate 为空））

```
AId    Name         Upline       UId  HLevel ContractDate  DirectCount  TotalTeam
---------------------------------------------------------------------------------  
A049  King Bori     Cindy Hoss    A001  0   8/29/2012   1     4 
A052  Kac Marque    King Bori     A049  1   11/6/2012   0     0
A050  Joseph Moto   King Bori     A049  1   10/9/2012   0     0
A059  Nancy Ante    King Bori     A049  1   3/27/2013   1     1
A053  Kathy May     King Bori     A049  1   11/15/2012  0     0
A057  Robert Murphy King Bori     A049  1   2/12/2013   1     1
A051  Andy Jane     Joseph Moto   A050  2   2/14/2013   0     0
A060  Arian Colle   Nancy Ante    A059  2   3/26/2013   0     0
A058  Phil Hunk     Robert Murphy A057  2   3/21/2013   0     0
A055  Rea Wane      Kathy May     A053  2   2/20/2013   1     1
A054  Gabby Orez    Kathy May     A053  2   12/7/2012   0     0
A056  Steve Wells   Rea Wane      A055  3   3/25/2013   0     0 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:50:54.673

我不确定，但您在递归 CTE 中明确列出了一个人，这会将范围仅限于该人及其父母。除非您对数百万条记录的起始集进行递归，否则它应该能够处理正则表达式底部的谓词，而不是递归 CTE 本身。如果您正在处理正确的最大递归级别。对于您的合同日期，只需将该表放在您链接递归的底部即可。除非你需要先得到他们的水平。在这种情况下，我会在第一个 cte 中获取该数据，然后列出第二个在其上进行递归的数据。

这是我做的一个简单示例，其中包括组合销售，基本上我形成递归并且不是特定于 id 的，我找到最大递归（如果你愿意，你可以离开那部分）来找到最低的叶级别，然后我执行结束谓词需要。我希望这有帮助。很多时候，我看到人们在他们的递归 CTE 中列出谓词，这将限制他们的范围，请记住，递归本质上是在自身之上限制一层 n 次。您可以在该点之前和之后获取您需要的数据，但在那里执行谓词将限制该范围指向的位置。

```
Declare @table table ( PersonId int identity, PersonName varchar(512), Account int, ParentId int, Orders int);

insert into @Table values ('Brett', 1, NULL, 1000),('John', 1, 1, 100),('James', 1, 1, 200),('Beth', 1, 2, 300),('John2', 2, 4, 400);

select 
    PersonID
,   PersonName
,   Account
,   ParentID
from @Table

; with recursion as 
    (
    select 
        t1.PersonID
    ,   t1.PersonName
    ,   t1.Account
    --, t1.ParentID
    ,   cast(isnull(t2.PersonName, '')
            + Case when t2.PersonName is not null then '\' + t1.PersonName else t1.PersonName end
            as varchar(255)) as fullheirarchy
    ,   1 as pos
    ,   cast(t1.orders + 
            isnull(t2.orders,0) -- if the parent has no orders than zero
            as int) as Orders
    from @Table t1
        left join @Table t2 on t1.ParentId = t2.PersonId
    union all
    select 
        t.PersonID
    ,   t.PersonName
    ,   t.Account
    --, t.ParentID
    ,   cast(r.fullheirarchy + '\' + t.PersonName as varchar(255))
    ,   pos + 1  -- increases
    ,   r.orders + t.orders
    from @Table t
        join recursion r on t.ParentId = r.PersonId
    )
, b as 
    (
    select *, max(pos) over(partition by PersonID) as maxrec  -- I find the maximum occurrence of position by person
    from recursion
    )
select *
from b
where pos = maxrec  -- finds the furthest down tree
-- and Account = 2  -- I could find just someone from a different department 
```

# mfc - MFC 工具提示，GetDlgItemText 不返回用于工具提示的文本

> ID：15882871
> 
> 赞同：1
> 
> 时间：2013-04-08T15:17:53.333
> 
> 标签：mfc, tooltip

我最近一直在为我的应用程序中的每个对话框项添加工具提示。在将每个添加到字符串资源之前，我想以硬编码文本进行操作，以便在编写它们时可以轻松更改它。现在是时候从资源文件中提取字符串了，似乎我无法将字符串显示为工具提示。

下面的代码会生成一个空白工具提示。尽管如果我将 tmpStr 替换为 [_T("Tool Tip Text")] 之类的真实字符串，它就可以正常工作。

代码：

```
BOOL CCustomDialog::OnToolTipText( UINT id, NMHDR * pNMHDR, LRESULT * pResult )
{
    TOOLTIPTEXT *pTTT = (TOOLTIPTEXT *)pNMHDR;
    UINT nID = pNMHDR->idFrom;

    if (pTTT->uFlags & TTF_IDISHWND)
    {
        nID = ::GetDlgCtrlID((HWND)nID);
    }
    if(nID)
    {

        CString tmpStr;
        if( nID == IDC_BUTTON1)
        {
            GetDlgItemText(IDS_BUTTON1_TT, tmpStr);
            _tcsncpy_s(pTTT->szText, tmpStr, _TRUNCATE);
        }
        *pResult = 0;
        return TRUE;
    }
    return FALSE;
} 
```

这可能是什么原因？

编辑：如果我将控件的控件 ID 放在我希望在其上显示工具提示的控件上，它会起作用并将控件描述显示为文本。如果我在控件所在的资源文件中添加字符串资源，则字符串资源不会作为工具提示出现。

所以看起来这只是字符串资源的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:23:12.960

在下面的代码部分

```
 if( nID == IDC_BUTTON1)
    {
        GetDlgItemText(IDS_BUTTON1_TT, tmpStr);
        _tcsncpy_s(pTTT->szText, tmpStr, _TRUNCATE);
    } 
```

看起来`IDC_BUTTON1`您的资源文件中有一个 ID 为 的按钮，其 ID 为`IDS_BUTTON1_TT`.

如果这是真的，那么您需要使用`tmpStr.LoadString(IDS_BUTTON1_TT)`来获取文本。除非您想要按钮控件的文本，否则不要使用`GetDlgItemText()`，然后您需要使用它的 ID 来`IDC_BUTTON1`代替。所以，这样做

```
 if( nID == IDC_BUTTON1)
    {
        tmpStr.LoadString(IDS_BUTTON1_TT);
        _tcsncpy_s(pTTT->szText, tmpStr, _TRUNCATE);
    } 
```

# text - Safari 中的文本渲染错误？

> ID：15882873
> 
> 赞同：0
> 
> 时间：2013-04-08T15:17:57.177
> 
> 标签：text, safari, text-rendering

出于某种疯狂的原因，我在 Safari 版本 6.0.3 (8536.28.10) 中工作的网站上的文本中的换行符上显示了这些框（请参阅随附的屏幕截图）

![随机文本框](https://i.stack.imgur.com/NsCP7.png)

我已经在运行相同版本 Safari 的不同 Mac 上对此进行了测试，但我无法复制该问题。所以，我不确定是什么导致了这个问题。两台 Mac 都运行最新版本的 Mountain Lion。到目前为止，它似乎只出现在一台特定的 Mac 上。该网站上的字体使用了一种名为 Source Sans Pro 的 Google 字体。

# sql - 如果是 SQL Server 函数，如何检查 null？

> ID：15882874
> 
> 赞同：1
> 
> 时间：2013-04-08T15:17:59.920
> 
> 标签：sql, sql-server

我有一个标量函数，如果用户存在则返回电子邮件地址，如果用户不存在则返回 null。

我需要从存储过程中调用此函数，如果用户存在，存储过程需要返回电子邮件地址，如果用户不存在，它应该返回“用户不存在”。

我面临的问题是如何在函数的情况下检查 null ？还是我看错了？下面给出了我正在寻找的代码片段。IF EXISTS 在这种情况下不起作用。任何帮助，将不胜感激。谢谢。

```
Alter procedure [dbo].[xalumniGetPrimaryEmailAddress] 
@login varchar(50) 
AS

BEGIN
IF EXISTS (select dbo.ZAlumniGetPrimaryAddress(@login))

    BEGIN
        PRINT @login+' EXISTS'
    END
ELSE
    BEGIN
        PRINT @login+' DOES NOT EXIST'
    END
END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:24:29.870

```
 Alter procedure [dbo].[xalumniGetPrimaryEmailAddress] 
      @login varchar(50) 
      AS

 BEGIN
 IF dbo.ZAlumniGetPrimaryAddress(@login) is not null

     BEGIN
         PRINT @login+' EXISTS'
     END
      ELSE
     BEGIN
         PRINT @login+' DOES NOT EXIST'
     END
 END
 GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:23:38.000

尝试：

```
IsNull(dbo.ZAlumniGetPrimaryAddress(@login), 'User does not exist') 
```

或者：

```
Coalesce(dbo.ZAlumniGetPrimaryAddress(@login), 'User does not exist') 
```

这有帮助吗？

# linux - 在 linux 中安装 go 包

> ID：15882876
> 
> 赞同：2
> 
> 时间：2013-04-08T15:18:00.520
> 
> 标签：linux, installation, go

我是 GO 的新手，刚刚安装了适用于 Linux AMD64 的最新版本，但是虽然我可以运行 go 命令，但我似乎无法获取、构建或安装任何命令。

```
go get bufio
package bufio: unrecognized import path "bufio" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T15:26:54.037

包[“bufio”](http://golang.org/pkg/bufio/)是标准库的一部分。你不能“去拿”它。但是不用担心，任何标准和受支持的安装程序都会安装这个包（就像整个 stdlib 一样），所以没有必要“去获取”它。

只包括

```
import "bufio" 
```

在您想要使用其导出的声明的包中，它应该“正常工作”;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:02:09.740

[您是否按照安装说明](http://golang.org/doc/install#install)中的说明设置**了**GOROOT 和 GOBIN 环境变量？

顺便说一句，您是从源代码还是从发行版 tarball 安装的？

# java - OnClickListener 一旦点击按钮就直接改变页面

> ID：15882878
> 
> 赞同：0
> 
> 时间：2013-04-08T15:18:04.067
> 
> 标签：java, android

这里的任何专家都可以帮助我，我想更改edittext中的数字，单击按钮后直接添加或减去里面的数字。但是一旦我点击按钮就会出现错误，我如何直接更改当前用户界面而不通过点击按钮刷新页面？

```
for(int x=0; x<itemAmt; x++){
    final int f=x;
    btn[0][x].setOnClickListener(new Button.OnClickListener(){

        public void onClick(View v) {

            int num=Integer.parseInt(et[f].getText().toString());

            et[f].setText(num+1);
        }

    });

    btn[1][x].setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v) {

            int num=Integer.parseInt(et[f].getText().toString());

            et[f].setText(num-1);

        }

    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:22:24.313

尝试使用这些方法：

```
 int num=Integer.valueOf(et[f].getText().toString());

    et[f].setText(Integer.toString(num+1)); 
```

和

```
 int num=Integer.valueOf(et[f].getText().toString());

    et[f].setText(Integer.toString(num-1)); 
```

# jquery - 禁用移动设备长按时的默认弹出窗口

> ID：15882881
> 
> 赞同：2
> 
> 时间：2013-04-08T15:18:05.670
> 
> 标签：jquery, html, css

我在网上找到了很多解决方案，没有一个有效。我正在使用 jquery “taphold” 方法来调出覆盖菜单，但我也调出由“打开、保存链接、复制链接 URL、选择文本”组成的默认上下文菜单。如何阻止此菜单出现？

我的代码提出了覆盖。

```
 $(document).ready(function() {   
        $('.recordlongpress').bind('taphold', function(e) 
             $('#popupPanel').popup("open");
        });
    }); 
```

我尝试过的一些选项是在这些行中添加。

```
 $('a').live("contextmenu",function(){
        return false;   
 });

 $.mobile.hashListeningEnabled = false
 e.preventDefault(); 
```

除了我发现和操纵 CSS 的许多更长的选项之外，我还尝试了多种形式的这些选项。

我有一个正在测试的机器人 razr max，我开始怀疑问题是否可能与新的“果冻豆”更新有关。感谢您抽出时间来阅读。我很感激任何帮助。

# java - Jlabel颜色变化

> ID：15882886
> 
> 赞同：34
> 
> 时间：2013-04-08T15:18:23.960
> 
> 标签：java, swing, netbeans, colors, jlabel

我试图在 java netbeans 中更改 jlabel 的颜色

我需要一个代码来更改 jLabel 颜色

像：

```
JLabel.SetColor(Color.RED); 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-08T15:20:40.673

简单的代码是

```
jLabel1.setForeground(Color.red); 
```

# php - PHP Web 表单未发送到 Gmail 电子邮件

> ID：15882887
> 
> 赞同：1
> 
> 时间：2013-04-08T15:18:24.770
> 
> 标签：php, html, email, gmail

我有一个我制作的 php 表单，当有人填写表单时，它可以与所有其他电子邮件帐户（yahoo、hotmail、@mydomain.com 等）一起正常工作，但是在将电子邮件发送给 gmail 用户时，电子邮件永远不会通过，即使在垃圾邮件箱中也是如此。

```
 $from = $email;

            //Testing Below
            //$headers = 'From:noreply@mydomainname.com' . "\r\n"; 
            $headers .= "From: $from \n";
            $headers .= " MIME-Version: 1.0\r\n ";
            $headers .= " Content-Type: text/html; charset=ISO-8859-1\r\n ";

            //Mail The Message
            mail($to, $subject, $message, $headers); 
```

上面的代码不会发送到 gmail，但适用于所有其他电子邮件帐户。这个（如下）适用于 gmail，但当然我在电子邮件中没有 html 选项。

```
 $headers = 'From:noreply@mydomainname.com' . "\r\n"; 
            //$headers .= "From: $from \n";
            //$headers .= " MIME-Version: 1.0\r\n ";
            //$headers .= " Content-Type: text/html; charset=ISO-8859-1\r\n ";

            //Mail The Message
            mail($to, $subject, $message, $headers); 
```

所以基本上当我将 MIME 和内容类型添加到 headers 变量时，它不会发送到 gmail 帐户。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:26:39.470

不久前我回答了一个与此相关的问题。这可能与 gmail 的电子邮件过滤有关，也许您的垃圾邮件分数太高，以至于它甚至没有进入垃圾邮件文件夹，这可能是由于没有正确的 dns 配置/密钥并尝试同时使用 html 造成的.

我留下了另一个答案的链接（它很长，而且不像你想象的那么容易 xD）：

[PHP 和 Gmail 垃圾邮件过滤器](https://stackoverflow.com/questions/15274157/php-and-gmail-spam-filter/15341940#15341940)

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T14:16:35.223

您没有使用正确的连接运算符：将您的 From 行更改为：

```
$headers .= "From: ".$from; 
```

# javascript - 是否可以通过 AJAX 加载跨域网页？

> ID：15882895
> 
> 赞同：4
> 
> 时间：2013-04-08T15:18:47.720
> 
> 标签：javascript, jquery, ajax, jsonp, jquery-mobile

我目前正在使用 jQM 开发移动 Web 应用程序。

尽管我在寻找我的问题的答案，但我找不到任何好的答案。

这是我的目标：

1.  在另一个域中下载网页的特定元素。
2.  通过对话框显示数据。

由于跨域问题，我坚持第一步。

有些人写过使用带有回调函数的 JSONP，但似乎该技术仅在处理 JSON 格式时才有效。

我还读到由于安全问题，JavaScript 不支持在另一个域中下载 html 页面。

他们是对的吗？

有没有办法通过 JavaScript 实现我的目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T15:27:04.007

这个问题有很多解决方法（JSONP、反向代理、'Access-Control-Allow-Origin'等），在一个非常广泛的线程中描述了 SO： [绕过同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy/3076648#3076648)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T15:21:59.830

最好的方法是使用本地代理。换句话说：在脚本 X 中执行请求服务器端，并从您的 javascript 调用此脚本 X。这样，您的“跨域”查询就会从服务器发生，并且对此没有任何限制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T15:22:56.783

这有两种可能。

首先，只有在外部服务器设置了 cors 标头时：[http://enable-cors.org/server_apache.html](http://enable-cors.org/server_apache.html)。然后就可以正常加载了。如果未设置该标头，则无法直接进行。

其次，您可以将服务器端用作代理。这仅在您对静态资源执行 GET 请求时才真正有用。否则服务器上的负载会非常高。如果您没有要使用的服务器，则可以使用 YQL，但这对于生产用途来说是粗略的。[http://davescoolblog.blogspot.com/2012/02/client-side-cross-domain-data-yql-hack.html](http://davescoolblog.blogspot.com/2012/02/client-side-cross-domain-data-yql-hack.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T15:21:59.747

JSONP 允许跨域共享任何 Javascript 对象。字符串是 Javascript 对象，在您的情况下，您可以为元素提供标记以包含为字符串并使用标准 Javascript 技术来处理它。

如果您愿意，您还可以使用[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，它的支持较少，但不会对 JSONP 性能造成[轻微](http://jsperf.com/ajax-jsonp-vs-ajax-json)影响（尽管它具有其他性能缺陷，例如需要对非 GET 进行多次请求）。

# xml - 公共 SOAP WSDL 文件存在安全问题？

> ID：15882896
> 
> 赞同：7
> 
> 时间：2013-04-08T15:18:53.127
> 
> 标签：xml, security, soap, wsdl

我们有一个`SOAP WSDL`公共用户可以查看的文件。最近，我们组织中的一些人质疑这是否会引起安全问题。

有没有人认为`WSDL`公众可以查看文件是一种安全问题？所有可用功能都需要登录用户。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T17:07:49.327

简短的回答是：如果发布您的 WSDL 代表一个安全问题，那么即使您不发布您的 WSDL，您也会遇到安全问题，您需要解决这个问题，而不仅仅是试图隐藏它。

WSDL 只是解释您的协议。你不能假设你的协议是秘密的；攻击者仍然可以在没有您的 WSDL 的情况下对其进行逆向工程。您永远不能假设网络连接另一端的客户端是“您的”客户端。你必须假设它是一个攻击者，并设计你的系统来处理这个事实。

因此，隐藏您的 WSDL 是一种次要的混淆形式，它不会提供严重的安全性。但是...如果隐藏您的 WSDL 非常容易并且不需要您做额外的工作，当然，为什么不呢？隐藏它可能会阻止某些类型的自动化脚本尝试攻击您。它确实给攻击者带来了一个额外的小麻烦。

隐藏您的 WSDL 的一个主要危险是它可能会导致部分开发人员认为 WSDL 是秘密的。如果你有一个团队可能会遇到问题，我会公开它只是为了让他们保持专注。

另一个主要危险是如果它使您的系统更难维护（例如，难以升级）。如果是这样，我绝对不会隐瞒。客户端的额外复杂性几乎肯定会比公共 WSDL 带来更大的安全风险。

# mapping - 净使用，删除特定驱动器

> ID：15882904
> 
> 赞同：1
> 
> 时间：2013-04-08T15:19:05.770
> 
> 标签：mapping, command-prompt, network-drive, net-use

我有一个关于网络使用的问题。有没有办法删除连接到单个主机的多个映射驱动器？例如，我想只使用一个命令一次性删除驱动器 X 和 Y。有没有办法删除 X 和 Y，因为它们共享相同的“主机名”。如果我有任何不清楚的地方，请告诉我。以下是我所描述的一个实例。

状态 本地 远程 网络

* * *

确定 -> X: -> \hostname\dir1 Microsoft Windows 网络

确定 -> Y: -> \hostname\dir2 Microsoft Windows 网络

确定 -> Z: -> \hostname2\dir1 Microsoft Windows 网络

命令成功完成。

我知道 net use /delete * 命令将全部删除，但我想保存驱动器 Z。同样，只使用一个命令。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:00:44.160

假设您要使用诸如

```
unmap x y 
```

那么 unmap.bat 可能是

```
@echo off
setlocal
:loop
set target=%1
if defined target net use %1: /delete &shift&goto loop 
```

应该做的任务。%1 是第一个参数；shift 将参数向下移动，因此 %2 变为 %1，依此类推。

# c++ - 如何使用 QApplication 创建独立的静态库？

> ID：15882906
> 
> 赞同：2
> 
> 时间：2013-04-08T15:19:07.973
> 
> 标签：c++, qt, static-libraries

我想使用该类创建一个带有*Qt的独立静态库。*`QApplication`

为此，我使用*PIMPL*，因为我不想公开任何*Qt*类。

我的私有实现看起来就像这样简单：

```
class Implementation : public QApplication {
public:
    Implementation(int argc, char *argv[]) :
        QApplication(argc, argv)
    {

    }
}; 
```

但是每当我尝试从我的测试应用程序启动库时，我都会收到所有错误：

```
undefined reference to `QApplication::metaObject() const' 
```

是的！这确实有道理。我得到这些是因为测试应用程序没有对*Qt*类的任何引用`QApplication`。

那么如何使用*Qt*，特别是`QApplication`我的库中的类，并且仍然能够在**普通 C++ 项目**中使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:22:28.677

您的类定义缺少`Q_OBJECT`宏和/或您的构建系统没有`moc`在您的文件上运行。

此外，愿意使用**库**`QApplication`中的类并不是典型的设计模式。是什么让你选择了这里？**`QApplication`**

# c# - ASP.net 从文件创建 Torrent

> ID：15882908
> 
> 赞同：3
> 
> 时间：2013-04-08T15:19:16.667
> 
> 标签：c#, asp.net, download, bittorrent

我们当前的软件更新托管在我们的服务器上。

我们希望从我们的服务器提供 Torrent 作为替代下载选项。当新版本发布时，如果人们播种它，它应该为人们提供更好的下载速度。

除了如何自动创建 Torrent 文件（我们宁愿不必每次都手动创建）之外，我已经弄清楚了一切。

有谁知道我们如何从指定的 exe 文件创建一个 torrent 文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:30:17.870

[MonoTorrent](http://www.monotorrent.com/)似乎有帮助。我以前在.net 下编译并运行过它，所以不用担心。

[这](http://www.monotorrent.com/wiki/monotorrent/Creating_Torrents)看起来像相关的 wiki 页面。

像往常一样，最好在与您的产品集成之前检查[许可证](https://github.com/mono/monotorrent/blob/master/src/LICENSE)兼容性，但它看起来相当宽松。

当然，您需要托管 torrent 以确保至少有一个种子！

# struts - java.lang.NoClassDefFoundError: org/apache/struts/taglib/html/FormTag

> ID：15882909
> 
> 赞同：1
> 
> 时间：2013-04-08T15:19:18.167
> 
> 标签：struts, struts-1

我有一个使用 Struts 的 Java EE 应用程序。它大部分工作正常，但突然我遇到了一个例外。

我在 WEB-INF/lib 中有 Struts jar 文件，之前应用程序运行正常。

例外：

```
javax.servlet.ServletException: java.lang.NoClassDefFoundError: org/apache/struts/taglib/html/FormTag
org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:865)
org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:794)
org.apache.jsp.Fichier_jsp._jspService(Fichier_jsp.java:88)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:386)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:05:07.773

You are probably missing this dependency:

```
<dependency>
   <groupId>org.apache.struts</groupId>
   <artifactId>struts-taglib</artifactId>
   <version>1.3.9</version>
</dependency> 
```

If you are not using Maven, you will have to download it.

# asp.net - 设置二 水平相邻

> ID：15882913
> 
> 赞同：0
> 
> 时间：2013-04-08T15:19:26.557
> 
> 标签：asp.net, css, html, css-float, alignment

我正在尝试将两个彼此相邻设置。我尝试了这个问题的代码：[CSS 两个 div 彼此相邻，](https://stackoverflow.com/questions/446060/css-two-divs-next-to-each-other)但没有任何效果。

这是我的代码

**配置文件.css：**

```
#content {

    width: 100%;

}

#profile-image {

    float: left;
    display: inline-block;

}

#profile-details {

    float: right;
    display: inline-block;
    margin-left: 200px;

} 
```

**用户配置文件.aspx：**

```
<%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" AutoEventWireup="false" CodeFile="UserProfile.aspx.vb" Inherits="UserProfile" %>

<asp:Content ID="Content1" runat="server" contentplaceholderid="ContentPlaceHolder1">

    <link rel="stylesheet" href="profile.css" type="text/css"  />

    <div id="content">
        <div id="profile-image">
            <asp:Image ID="Image1" runat="server" Height="191px" Width="128px" />

            <br />
            <br />
            Upload picture:
            <asp:FileUpload ID="profImageUpload" runat="server" />
            <br />
            <br />
            <br />
            <br />
            <br />
        </div>

        <div id="profile-details">

            <asp:Table ID="Table1" runat="server">
            </asp:Table>
            asdafasf

        </div>

    </div>

    <div></div>
</asp:Content> 
```

**样式.css：**

```
body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, fieldset, input, textarea, p, blockquote, th, td {
    margin: 0 297px 0 137px;
    padding: 0;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
fieldset, img {
    border: 0;
}
address, caption, cite, code, dfn, em, strong, th, var {
    font-style: normal;
    font-weight: 700;
    font-size: medium;
}
ol, ul {
    list-style: none;
}
caption, th {
    text-align: left;
}
h1, h2, h3, h4, h5, h6 {
    font-size: 100%;
    font-weight: normal;
}
q:before, q:after {
    content: '';
}
abbr, acronym {
    border: 0;
}
header, nav, section, article, aside, footer {
    display: block;
}
body {
    font: 12px/18px Arial, Tahoma, Verdana, sans-serif;
    width: 100%;
    background-image: url(../images/Images/background-large.png);
    background-repeat: repeat-x repeat-y;
}
a {
    color: blue;
    outline: none;
    text-decoration: underline;
}
a:hover {
    text-decoration: none;
}
/* Begin of styles for the demonstration (you can remove them) */
a.expand {
    width: 150px;
    display: block;
    margin: 10px 0 0;
}
a.expand:hover {
    height: 500px;
}
/* End of of styles for the demonstration */
p {
    margin: 0 0 18px;
    width: 386px;
    height: 55px;
}
img {
    border: none;
}
input {
    vertical-align: middle;
}
#wrapper {
    width: 1000px;
    margin: 0 auto;
}

/* Header
-----------------------------------------------------------------------------*/
#header {
    margin-top: 25px;
    height: 39px;
    background-color: #D1D1D1;
    width: 899px;
}

.navigation-menu, .menu ul, .menu li, .menu a {
    margin: 0;
    padding: 0;
    border: none;
    outline: none;
    margin-top: 2px;
    margin-bottom: 50px;

}

.navigation-menu {
    height: 40px;
    width: 550px;

    background: #4c4e5a;
    background: -webkit-linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);
    background: -moz-linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);
    background: -o-linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);
    background: -ms-linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);
    background: linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);

    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}

.navigation-menu li {
    position: relative;
    list-style: none;
    float: left;
    display: block;
    height: 40px;
    z-index: 1;

}

.navigation-menu li a {
    display: block;
    padding: 0 14px 0 30px;
    margin: 6px 0;
    line-height: 28px;
    text-decoration: none;

    border-left: 1px solid #393942;
    border-right: 1px solid #4f5058;

    font-family: Helvetica, Arial, sans-serif;
    font-weight: bold;
    font-size: 13px;

    color: #f3f3f3;
    text-shadow: 1px 1px 1px rgba(0,0,0,.6);

    -webkit-transition: color .2s ease-in-out;
    -moz-transition: color .2s ease-in-out;
    -o-transition: color .2s ease-in-out;
    -ms-transition: color .2s ease-in-out;
    transition: color .2s ease-in-out;
}

.navigation-menu li:first-child a {
border-left: none;
}
.navigation-menu li:last-child a{
border-right: none;
}

.navigation-menu li:hover > a {
color: #8fde62;
}

.navigation-menu ul {
    position: absolute;
    top: 40px;
    left: 0;

    opacity: 0;
    background: #1f2024;

    -webkit-border-radius: 0 0 5px 5px;
    -moz-border-radius: 0 0 5px 5px;
    border-radius: 0 0 5px 5px;

    -webkit-transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    transition: opacity .25s ease .1s;

}

.navigation-menu li:hover > ul { opacity: 1; }

.navigation-menu ul li {
    height: 36px;
    overflow: hidden;
    padding: 0;

    -webkit-transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    transition: height .25s ease .1s;
}

.navigation-menu li:hover > ul li {
    height: 36px;
    overflow: visible;
    padding: 0;

}

.navigation-menu ul li a {
    width: 100px;
    padding: 4px 0 4px 40px;
    margin: 0;

    border: none;
    border-bottom: 1px solid #353539;
}

.navigation-menu ul li:last-child a {
border: none;
}

.navigation-menu a.documents { background: url(../images/Icons/document.png) no-repeat 6px center; }
.navigation-menu a.messages { background: url(../images/Icons/mail.png) no-repeat 6px center; }
.navigation-menu a.settings { background: url(../images/Icons/settings.png) no-repeat 6px center; }
.navigation-menu a.home { background: url(../images/Icons/home.png) no-repeat 6px center; }
.navigation-menu a.profile { background: url(../images/Icons/profile.png) no-repeat 6px center; }
.navigation-menu a.mainsettings { background: url(../images/Icons/settings.png) no-repeat 6px center; }
.navigation-menu a.docs{ background: url(../images/Icons/document.png) no-repeat 6px center; }
.navigation-menu a.others { background: url(../images/Icons/movie.png) no-repeat 6px center; }
.navigation-menu a.uploads { background: url(../images/Icons/upload.png) no-repeat 6px center; }
.navigation-menu a.profile { background: url(../images/Icons/user.png) no-repeat 6px center; }
.navigation-menu a.projects { background: url(../images/Icons/stamp.png) no-repeat 6px center; }
.navigation-menu a.yprojects { background: url(../images/Icons/stamp.png) no-repeat 6px center; }
.navigation-menu a.otherprojects { background: url(../images/Icons/stamp.png) no-repeat 6px center; }

/* Middle
-----------------------------------------------------------------------------*/
#middle {
    /*border-left: 250px solid #B5E3FF;
    border-right: 250px solid #FFACAA;*/
    height: 1%;
    position: relative;
}
#middle:after {
    content: '';
    clear: both;
    display: table;
}
#container {
    width: 100%;
    float: left;
    overflow: hidden;
    margin-right: -100%;
}
#content {

    padding: 75px 20px;
    background-color: #D1D1D1;
}

/* Footer
-----------------------------------------------------------------------------*/
#footer {

    margin-top: 50px;
    height: 25px;
    background: #D1D1D1;
}

#login {

    margin-top: 10px;
    width: 899px;
    background-color: #909090;
    padding-left: 10px;
    padding-top: 10px;
    padding-bottom: 1px;

}

#login-form {

    background-color: #909090;
    width: 899px;

} 
```

它目前的外观： ![在此处输入图像描述](https://i.stack.imgur.com/13MXE.png)

**编辑：** MasterPage 中的代码已更改，我的页面现在显示如下：

![在此处输入图像描述](https://i.stack.imgur.com/vCLKi.png)

**MasterPage.aspx：**

```
<%@ Master Language="VB" CodeFile="MasterPage.master.vb" Inherits="MasterPage" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<script runat="server">

    Protected Sub Page_Load(sender As Object, e As EventArgs)

        If Session("userid") = Nothing Then
            txtLoginUser.Visible = True
            txtLoginPass.Visible = True

        Else

            Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
            Dim useridComm As String = "SELECT name, surname FROM users WHERE user_id=@userid"
            Dim sqlUserID As New SqlCommand

            conn.Open()

            Dim userid As String = Session("userid")

            sqlUserID = New SqlCommand(useridComm, conn)
            sqlUserID.Parameters.AddWithValue("@userid", userid)
            Dim datareader As SqlDataReader = sqlUserID.ExecuteReader()
            If datareader.HasRows Then

                FormsAuthentication.RedirectFromLoginPage(datareader("user_id"), True)
                lblLoggedIn.Text = datareader("name").ToString() & " " & datareader("surname").ToString()

            End If
            datareader.Close()
            conn.Close()

        End If
    End Sub

   Protected Sub Button1_Click(sender As Object, e As EventArgs)

        Dim loginSQL As New SqlCommand
        Dim loginComm As String

        Dim CommonFunctions As New CommonFunctions()
        Dim dec_pass As String = CommonFunctions.EncryptPassword(txtLoginPass.Text.Trim)

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")

        loginComm = "SELECT user_id FROM users WHERE username=@username and password=@password"

        conn.Open()

        loginSQL = New SqlCommand(loginComm, conn)
        loginSQL.Parameters.AddWithValue("@username", txtLoginUser.Text.ToString)
        loginSQL.Parameters.AddWithValue("@password", dec_pass)
        Dim dr As SqlDataReader = loginSQL.ExecuteReader()
        dr.Read()

        If dr.HasRows Then
            Session("userid") = dr("user_id")
        ElseIf dr.HasRows = False Then

            lblRegister.ForeColor = Drawing.Color.Red
            lblRegister.Text = "Incorrect Username/Password."
        End If
        dr.Close()
        conn.Close()

    End Sub

</script>

<head>
    <meta charset="utf-8" />
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <title></title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />
</head>

<body>

    <form id="form1" runat="server">

<div id="wrapper">

    <header id="header">
        <strong>Header:</strong> Mobile CMS

        </header>

<section id="login">

    <div id="login-form">

         <p>

                    <asp:Label ID="lblUsername" runat="server" Font-Bold="True" Text="U:"></asp:Label>
&nbsp;<asp:TextBox ID="txtLoginUser" runat="server" BorderStyle="None" BorderWidth="0px" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Label ID="lblUsername0" runat="server" Font-Bold="True" Text="P:"></asp:Label>
                    <asp:TextBox ID="txtLoginPass" runat="server" BorderStyle="None" BorderWidth="0px" TextMode="Password" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Button ID="btnLogin" runat="server" BorderStyle="None" OnClick="Button1_Click" Text="Login" />

                </p>

                <p>

                    <asp:Label ID="lblRegister" runat="server" Font-Bold="True" Font-Underline="True" ForeColor="#0000CC" Text="Register"></asp:Label>

                    <asp:Label ID="lblLoggedIn" runat="server"></asp:Label>

                </p>
         <p>

                    &nbsp;</p>

    </div>

</section>

<div class="navigation-bar">
       <ul class="navigation-menu">

            <li><a href="#" class="home">Home</a></li>
            <li><a href="#" class="mainsettings">Settings</a></li>
            <li><a href="#" class="profile">Profile</a>

                <ul>
                    <li><a href="#" class="messages">Messages</a></li>
                    <li><a href="#" class="settings">Profile Settings</a></li>
                </ul>

            </li>
            <li><a href="#" class="uploads">Uploads</a></li>
            <li><a href="#" class="documents">Media</a>

                <ul>
                    <li><a href="#" class="docs">Documents</a></li>
                    <li><a href="#" class="others">Others</a></li>

                </ul>

            </li>

            <li><a href="#" class="projects">Projects</a>

                <ul>
                    <li><a href="#" class="yprojects">Your Projects</a></li>
                    <li><a href="#" class="otherprojects">Other Projects</a></li>
                </ul>

            </li>

        </ul>

    </div>

    <section id="middle">

        <div id="container">

            <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">                       

            </asp:ContentPlaceHolder>

        </div>

    </section>

    <footer id="footer">
        <strong>Footer:</strong> adsfdsgfds
    </footer>

</div>

    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:24:24.720

如果您希望 div 元素彼此相邻，一种常见的方法是确保它们都是 float:left 或两者都是 float:right。完成后不要忘记清除您的花车。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:25:05.143

您在这里缺少一些概念：

```
#content {
    width: 100%;
    overflow:hidden; /* we can use a clearfix or overflow:hidden, I prefer overflow:hidden for most cases*/
}

#profile-image {
    width:200px; /* Give the div a width */
    float: left;
    /* display: inline-block; no - we want to keep the divs block */
}

#profile-details {
    width:200px; /* Give the div a width */
    float: right;
    /* display: inline-block; no - we want to keep the divs block */
    /* margin-left: 200px; You don't need this if you set the widths up properly */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:26:09.570

将“溢出：隐藏”添加到父元素，例如

```
#content {
    overflow: hidden;
} 
```

以上将允许父元素扩展以覆盖子元素的高度。

然后你只需浮动子元素。

将子元素设置为内联块元素就可以了，只要它们实际上都适合父元素的宽度。

否则，我建议给它们每个宽度。

# asp.net - 如何使用 VB 获取返回的 XML 并将特定元素插入 SQL Server 的列中？

> ID：15882914
> 
> 赞同：2
> 
> 时间：2013-04-08T15:19:27.723
> 
> 标签：asp.net, sql, xml, vb.net

我有一个 SQL Server 数据库，我需要使用从 api 调用返回的 xml 填充它。这是返回的 xml 代码（不在文件中）：

```
<petfinder xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"        xsi:noNamespaceSchemaLocation="http://api.petfinder.com/schemas/0.9/petfinder.xsd">
<header>
 <version>0.1</version>
 <timestamp>2013-04-08T14:52:23Z</timestamp>
 <status>
  <code>100</code>
  <message/>
 </status>
</header>
<lastOffset>25</lastOffset>
 <pets>
  <pet>
   <id>18589607</id>
   <shelterId>OK98</shelterId>
   <shelterPetId>11C-0015</shelterPetId>
   <name>Sam</name>
   <animal>Cat</animal>
   <breeds>
    <breed>Domestic Short Hair</breed>
    <breed>Tabby</breed>
   </breeds>
   <mix>yes</mix>
   <age>Adult</age>
   <sex>M</sex>
   <size>XL</size>
   <options>
    <option>altered</option>
    <option>hasShots</option>
    <option>housebroken</option>
   </options>
  <description>
   <![CDATA[
    <div>This guy loves the camera. Look at him pose and show off! Sam is about 5 years old and is a cream Tabby. He is good with other cats and is house trained. He has turquoise eyes and is a sweet sweet cat. Sam loves to be the right hand man and assist you on any task you may have. Sammy is not the type of cat that likes to be held but will sit right next to you for some rubbing and head butting. Our adoption fee is $100 for dogs and $75 for cats. This adoption fee includes the spay or neutering and rabies shot. </div>
   ]]>
  </description>
  <lastUpdate>2012-07-24T14:50:17Z</lastUpdate>
  <status>A</status>
  <media>
   <photos>
    <photo id="1" size="x">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-1-x.jpg
    </photo>
    <photo id="1" size="fpm">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-1-fpm.jpg
    </photo>
    <photo id="1" size="pn">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-1-pn.jpg
    </photo>
    <photo id="1" size="pnt">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-1-pnt.jpg
    </photo>
    <photo id="1" size="t">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-1-t.jpg
    </photo>
    <photo id="2" size="x">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-2-x.jpg
    </photo>
    <photo id="2" size="fpm">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-2-fpm.jpg
    </photo>
    <photo id="2" size="pn">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-2-pn.jpg
    </photo>
    <photo id="2" size="pnt">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-2-pnt.jpg
    </photo>
    <photo id="2" size="t">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-2-t.jpg
    </photo>
    <photo id="3" size="x">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-3-x.jpg
    </photo>
    <photo id="3" size="fpm">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-3-fpm.jpg
    </photo>
    <photo id="3" size="pn">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-3-pn.jpg
    </photo>
    <photo id="3" size="pnt">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-3-pnt.jpg
    </photo>
    <photo id="3" size="t">
    http://photos.petfinder.com/photos/US/OK/OK98/18589607/OK98.18589607-3-t.jpg
    </photo>
   </photos>
  </media>
  <contact>
   <address1>714 Martin Luther King Jr Ave</address1>
   <address2/>
   <city>Duncan</city>
   <state>OK</state>
   <zip>73533</zip>
   <phone/>
   <fax/>
   <email/>
  </contact>
 </pet>
... 
```

更具体地说，我需要获取 ID、名称、动物、描述和其他几个节点，并将它们插入到我数据库中相应的列中。

它必须对所有这些都在其中的每个“宠物”节点重复此操作。

我可以在 VB.net 中执行此操作而不保存文件，就像 xml 字符串一样吗？

请帮忙，我已经坚持了好几天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:28:56.607

假设您的 XML 结构位于 type 的变量（或存储过程参数）中`XML`，您可以执行以下操作：

```
CREATE PROCEDURE dbo.InsertXmlData 
     @XmlData XML
AS BEGIN
   INSERT INTO dbo.YourTable(ID, PetName, Animal, Description)
      SELECT
         ID = Pet.value('(id)[1]', 'int'),
         PetName = Pet.value('(name)[1]', 'varchar(50)'),
         Animal = Pet.value('(animal)[1]', 'varchar(50)'),
         [Description] = Pet.value('(description)[1]', 'varchar(500)')
      FROM 
         @XmlData.nodes('/petfinder/pets/pet') AS xTBL(Pet)
END 
```

这为您提供了这些节点中的信息作为一组行和列，您可以轻松地将其插入到 SQL Server 表中。所以现在你只需要找到一种方法来从你的 VB.NET 代码中调用这个存储过程并将 XML 传递给`@XmlData`参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:45:44.157

下面是一个示例，说明如何使用 XPath 和`XmlDocument`类从 XML 中提取每只宠物的数据：

```
Dim doc As XmlDocument = New XmlDocument()
doc.LoadXml(xmlString)
For Each pet As XmlNode In doc.SelectNodes("/petfinder/pets/pet")
    Dim id As String = pet.SelectSingleNode("id").InnerText
    Dim name As String = pet.SelectSingleNode("name").InnerText
    ' ...
Next 
```

我假设您知道如何将数据从那里保存到您的 SQL 数据库中。

# c# - 使用 OpenTK 在 glControl1_Paint 之外翻译和旋转图像？

> ID：15882915
> 
> 赞同：0
> 
> 时间：2013-04-08T15:19:30.050
> 
> 标签：c#, forms, opentk

我正在使用 C# Windows 窗体应用程序和 OpenTK 在 VS2010 Pro 中制作 CAD 类型的软件。没有什么花哨; 我只是希望能够阅读一些基本形状并绘制它们。我不确定这是否会对答案产生影响，但我正在使用 GL.Ortho(); 绘制二维空间；

为了熟悉图形，我直接从 OpenTK 文档中完成了一些 OpenTK 示例，并对它有一个基本的了解。根据我到目前为止所学到的知识，除非它们是在此事件中创建的，否则我无法移动/旋转我的图元：

```
 private void glControl1_Paint(object sender, PaintEventArgs e)
    {
    } 
```

我的程序启动并等待用户选择要读入的 CAD 文件。在我读取文件并将其分解为基元后，我将其绘制到 glControl1 表单。到目前为止，它按预期工作。但是，我没有在“glControl1_Paint”事件中绘制它。因此，我无法控制使用键盘/鼠标输入来翻译/旋转它。

我已经阅读了对提问者被指示在“glControl1_Paint”事件中绘制的其他问题的答案。我很想这样做，因为它可以解决我的问题，但我不知道该怎么做，因为我在启动应用程序时没有原语，我等待用户提供数据。

我想我有几个问题想知道答案：

1）程序中的“glControl1_Paint”事件何时发生？我认为它是初始化 glControl1 窗口的一部分并在启动时触发。我可以控制这种情况发生的时间，以便我可以在这里绘制我的图元吗？如果是这样，我如何控制这种情况发生的时间以及如何将我的几何体传递给它？

2）有没有办法在“glControl1_Paint”事件之外翻译/旋转我的图元？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:43:19.143

不，您无法知道绘制事件何时会触发。但是您可以通过 Invalidate() 函数手动触发它。

流程应该是这样的。

1.  你应该在你的绘画事件中完成所有的绘图。
2.  如果发生影响绘图的事情，您应该调用 Invalidate() 移动对象的键盘事件或旋转相机等的鼠标事件。所有这些都应该调用 Invalidate()
3.  如果你喜欢最大帧率。如果没有其他要处理的 Windows 消息，您应该覆盖应用程序主循环并使其调用 Invalidate()。

这是我的编程循环

```
static void Main()
{
...

MainForm mainFrom = new MainForm();
mainFrom.FormClosed += QuitLoop;
mainFrom.Show();
do
{
     Application.DoEvents();
     mainFrom.glControl1.Invalidate(true); //actually may program is a lot more complex than this
     if (mainFrom.IsRunning)
          System.Threading.Thread.Sleep(0);
     else
          System.Threading.Thread.Sleep(1);
} while (!mQuit);

... 
```

# java - Java GAE 中的 Google App for business + OpenId + GoogleAPIs

> ID：15882919
> 
> 赞同：0
> 
> 时间：2013-04-08T15:19:35.683
> 
> 标签：java, google-app-engine, openid, google-apps, google-apps-marketplace

我发现很多问题试图开发一个谷歌应用程序投放市场，使用 OpenID 并从 GAE 的后端服务器访问一些谷歌 API，如 G+

我有使用 google apis 运行的应用程序来访问 G+ 数据，3 条腿 oAuth（代码流）没有问题，我理解幕后的“魔法”，但我迷失了 OpenID 和谷歌市场。在用户通过 OpenID 谷歌过滤器后，我是否需要执行 3legged oAuth，并让用户接受 G+ 权限 API 以使用该令牌访问谷歌 API？如果是这种情况，如果用户从他的公司 gmail 帐户访问应用程序，并且当提示接受 g+ 访问时，他更改帐户会发生什么情况？有没有什么好的阅读可以让谷歌应用程序、openID 和从 GAE 访问谷歌 API 变得更容易？

为什么我在将应用程序发送到市场时无法在应用程序配置文件中指定 G+ 的范围？

在这种情况下，获取用户 g+ 个人资料（图片、全名、昵称）的最佳方式是什么？我错过了什么？谷歌文档真的很好，当你找到正确的，但是很多链接都死了，数以百万计不推荐使用 gdata api 的示例充斥着网络......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:24:45.110

好的，经过进一步阅读和测试，我想出了以下几点：

*   Google Marketplace 让您无需额外的“oAuth 舞蹈”即可访问[此API](https://developers.google.com/google-apps/marketplace/manifest?hl=es#supported_scopes)
*   如果您想要访问的 API 比上面列出的更多，您需要 oAuth 交换来获取您想要访问的 API 的特定令牌。
*   就我而言，我想在市场的 openID 之前访问 G+ API，所以在使用 openID 登录用户后，我需要将他重定向到 google api oAuth 接受屏幕（只是第一次）

关于市场的更多事情需要我很长时间才能了解： - 计费 API 和许可证 API 已弃用，这意味着您有责任向用户计费并跟踪他们以了解给定用户是否已支付应用程序或许可证何时支付expired - 你需要映射 /_ah/login_required 因为你的应用程序应该设置（当你创建它时）只接受联合登录，这将导致重定向到 /_ah/login_required 从你需要做 openID 东西的地方。

文档中的许多链接都已损坏，示例太旧:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T01:11:24.340

现在有了新的 Google Apps Marketplace 体验，它实际上变得更简单了。如果您按照[文档](https://developers.google.com/apps-marketplace/preparing)中的步骤操作并确保在 App Engine 代码中要求相同的范围，则永远不应提示用户。

# c# - 在这里帮助我解决这个错误

> ID：15882920
> 
> 赞同：-4
> 
> 时间：2013-04-08T15:19:36.463
> 
> 标签：c#

我要做一个小程序，提示用户测试标记，判断用户是通过还是失败。低于 50 的测试分数为不及格。

这是我的代码。它给了我 2 个错误（其中有星号。）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Prac6Question2
{
    class Program
    {
       static void Main(string[] args)
        {
            double testMark;
            string result;

            testMark = GetTestMark(*testMark*);
            result = DetermineResult(testMark, *result*);
            Display(testMark, result); 

        }

        static double GetTestMark(double testMark)
        {
            Console.WriteLine("Your test result: ");
            testMark = double.Parse(Console.ReadLine());
            return testMark;

        }

        static string DetermineResult(double testMark, string result)
        {
            if (testMark < 50)
                result = "Fail";
            else
                result = "Pass";

            return result;

        }

        static void Display(double testMark, string result)
        {
            Console.WriteLine("Your test result: {0}", result);
            Console.ReadLine();
        }

    }

} 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:21:41.970

您不需要将这些值传递给它们各自的函数。删除参数并在函数中引入新变量。

```
testMark = GetTestMark();
result = DetermineResult(testMark); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:22:20.817

*   使用时尚未分配 testMark 和结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:22:58.257

为了`GetTestMark`更改调用者范围内的值，您需要通过引用传递双精度，即：

```
static void GetTestMark(out double testMark) 
```

“out”指定将在此方法中初始化该值。

然后通过以下方式调用它：

```
GetTestMark(out testMark); 
```

但是，由于您要返回值，因此根本不需要传递它：

```
static double GetTestMark()
{
   double testMark; // Declare a local
   Console.WriteLine("Your test result: ");
   testMark = double.Parse(Console.ReadLine());
   return testMark;
} 
```

并通过以下方式致电：

```
testMark = GetTestMark(); 
```

结果是一样的——因为你要返回值，所以没有理由传递它。与上述相同类型的更改也将使其正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:22:50.007

很简单，你加星标的应该被删除。您传入了一个不使用的变量，编译器很可能会抱怨未初始化的变量

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Prac6Question2
{
    class Program
    {
       static void Main(string[] args)
        {
            double testMark;
            string result;

            testMark = GetTestMark();
            result = DetermineResult(testMark);
            Display(testMark, result); 

        }

        static double GetTestMark()
        {
            double testMark;
            Console.WriteLine("Your test result: ");
            testMark = double.Parse(Console.ReadLine());
            return testMark;

        }

        static string DetermineResult(double testMark)
        {
            string result;
            if (testMark < 50)
                result = "Fail";
            else
                result = "Pass";

            return result;

        }

        static void Display(double testMark, string result)
        {
            Console.WriteLine("Your test result: {0}", result);
            Console.ReadLine();
        }

    }

} 
```

# javascript - getElementsByTagName 有效，但 getElementById 无效？

> ID：15882925
> 
> 赞同：0
> 
> 时间：2013-04-08T15:19:46.177
> 
> 标签：javascript, dom, getelementbyid, getelementsbytagname

我正在做 XML 解析并遇到一个奇怪的问题。来自 DOM 元素的 getElementsByTagName 有效，但 getElementById 无效。Chrome 在我为清单调用 getElementById 的任何地方都会出现此错误：

```
Object #<Element> has no method 'getElementById' 
```

但不知何故 getElementByTagName 工作得很好。

```
var manifest = content.getElementsByTagName("manifest")[0];
var spine = content.getElementsByTagName("spine")[0];
var itemref = spine.getElementsByTagName("itemref")[0].getAttribute("idref");
alert(itemref);//works
var firstpage = manifest.getElementById(itemref).getAttribite("href"); 
```

谁能向我解释为什么 getElementById DOM 不适合我？

```
test = manifest.getElementById("any value");//Problem
test = manifest.getElementsByTagName("any value");//no Problem 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:21:28.333

getElementById 查找元素的唯一 ID，而不是元素的类型。因此，如果您的标签如下所示，则它适用于两种情况：

```
<a id="a"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T15:20:33.983

您不能`getElementById`作为任意元素的方法调用，它仅在`document`元素上可用。这是有道理的，因为 HTML 文档上不应该有任何重复的 ID。

话虽如此，您的电话`getElementById("a")`看起来很奇怪；你真的有一个带有 的元素`id="a"`，或者你是否试图获得对任意锚点的引用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:26:26.263

[getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)是[文档](https://developer.mozilla.org/en-US/docs/DOM/document)对象的函数。[DOMElement](https://developer.mozilla.org/en/docs/DOM/element)没有这个方法。

# java - EMF 比较：DifferenceKind 是 ADD 和 DELETE 而不是 CHANGE。为什么？

> ID：15882929
> 
> 赞同：0
> 
> 时间：2013-04-08T15:19:56.700
> 
> 标签：java, eclipse, eclipse-emf, emf, emf-compare

以下是我的 emf 实例文档的 2 个版本。如您所见，唯一改变的是 'productCode' 值从**KAF**到**Changed**。但是 compare 将其视为*ADD*和*DELETE*的两个更改。不知道为什么？

**版本 1**

```
<billableSystemEvent eventType="1" description="Application Processed">
        <billableProductCode productCode="KAF"/>
</billableSystemEvent> 
```

**版本 2**

```
<billableSystemEvent eventType="1" description="Application Processed">
        <billableProductCode productCode="Changed"/>
</billableSystemEvent>

public Comparison compare()
{
    // Load the two input models
    ResourceSet resourceSet1 = new ResourceSetImpl();
    ResourceSet resourceSet2 = new ResourceSetImpl();
    String xmi1 = "src/test/java/com/equifax/ic/provisioning/service/v1.xmi";
    String xmi2 = "src/test/java/com/equifax/ic/provisioning/service/v2.xmi";
    load(xmi1, resourceSet1);
    load(xmi2, resourceSet2);

    // Configure EMF Compare
    EMFCompare comparator = EMFCompare.builder().build();

    // Compare the two models
    IComparisonScope scope = EMFCompare.createDefaultScope(resourceSet1, resourceSet2);
    return comparator.compare(scope);
}

@Test
public void testCompare()
{
    Comparison comparison = compare();
    List<Diff> differences = comparison.getDifferences();

    for(Diff d: differences)
    {
        System.err.println("d.getKind(): "+d.getKind());
        System.err.println("d.getMatch(): " + d.getMatch());
        System.err.println("State: " + d.getState());
    }

    assertSame(Integer.valueOf(12), Integer.valueOf(differences.size()));
} 
```

**输出**

```
d.getKind(): ADD
d.getMatch(): MatchSpec{left=BillableSystemEvent@1b5340c Application Processed, right=BillableSystemEvent@16c163f Application Processed, origin=<null>, #differences=2, #submatches=2}
State: UNRESOLVED

d.getKind(): DELETE
d.getMatch(): MatchSpec{left=BillableSystemEvent@1b5340c Application Processed, right=BillableSystemEvent@16c163f Application Processed, origin=<null>, #differences=2, #submatches=2}
State: UNRESOLVED 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:56:39.570

我们的 wiki 远未完成，但[元素的](http://wiki.eclipse.org/EMF_Compare/Developer_Guide#Diff)[描述`Diff`](http://wiki.eclipse.org/EMF_Compare/Developer_Guide#Diff)应该足够完整，以描述“添加”、“删除”或“更改”对 EMF 比较的含义。

除此之外，您在此处打印的内容不足以说明实际发生的情况。如果您打印“d.toString()”本身，您的 System.out 会更有用......或者至少打印 d.getValue()（如果是 instanceof ReferenceChange 或 ReferenceChange）。

在这里，我会在不了解您的模型的情况下回答，我希望我不会对它做出错误的假设（特别是什么是“billableProductCode”及其“productCode”）。

我很确定 billableSystemEvent.billableProductCode 是一个多值属性。在这种情况下，彼此不“相等”的元素将被视为不匹配。“KAF”不等于“Changed”，因此我们认为这两个值不匹配，这导致了两个不同之处：“KAF”已被删除，“Changed”已被添加。

请注意，这是一种简化：我们在这里不使用 Object#equals(Object) ，而是使用[IEqualityHelper#matchingValues(Object, Object)](http://git.eclipse.org/c/emfcompare/org.eclipse.emf.compare.git/tree/plugins/org.eclipse.emf.compare/src/org/eclipse/emf/compare/utils/EqualityHelper.java#n113)。

如果“billableProductCode”是单值属性，我们会检测到“KAF”已更改为“已更改”。

# java - 更改字符串颜色 JavaMail

> ID：15882932
> 
> 赞同：3
> 
> 时间：2013-04-08T15:20:14.013
> 
> 标签：java, colors, jakarta-mail

我正在使用 JavaMail 库，我想更改电子邮件的正文、不同颜色的句子？我该怎么做？我的应用程序位于（Swing/JFrame）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T21:36:56.993

以 HTML 格式发送电子邮件的示例：[http ://www.tutorialspoint.com/java/java_sending_email.htm](http://www.tutorialspoint.com/java/java_sending_email.htm)

Baadshah 的建议是使用 html 标签在 Content 字符串中添加所有颜色格式。

```
 message.setContent("<h1>This is actual message</h1>",
                        "text/html" ); 
```

您可以以编程方式构造包含正文消息的字符串。

```
String line1 = "This is the first line in the body.  We want it to be blue."

addColor(line1, Color.BLUE); 
```

然后创建一个处理着色 html 的方法：

```
public static String addColor(String msg, Color color) {
    String hexColor = String.format("#%06X",  (0xFFFFFF & color.getRGB()));
    String colorMsg = "<FONT COLOR=\"#" + hexColor + "\">" + msg + "</FONT>";
    return colorMsg;
} 
```

您可以在此处检查在 HTML 中着色的不同方式：http: [//www.htmlgoodies.com/tutorials/colors/article.php/3479011/How-To-Change-Text-Color-Using-HTML-and-CSS.htm](http://www.htmlgoodies.com/tutorials/colors/article.php/3479011/How-To-Change-Text-Color-Using-HTML-and-CSS.htm) . 这包括使用旧的方式，例如使用 FONT（如我上面的示例）或使用 CSS 的现代方式。

编辑： toHexString 返回一个 8 个字符的十六进制代码（alpha + red + blue + green），而 HTML 只需要没有 alpha 的 RGB。我使用了[这个链接](https://stackoverflow.com/questions/6539879/how-to-convert-a-color-integer-to-a-hex-string-in-android)的解决方案，并设置了一个 SSCCE：

```
import java.awt.Color;
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;

public class EmailTestHTML
{
public static void main(String [] args)
{

   // Recipient's email ID needs to be mentioned.
   String to = "targetemail@somehost.com";

   // Sender's email ID needs to be mentioned
   String from = "youremail@somehost.com";

   // Assuming you are sending email from localhost
   String host = "putYourSMTPHostHere";

   // Get system properties
   Properties properties = System.getProperties();

   // Setup mail server
   properties.setProperty("mail.smtp.host", host);

   // Get the default Session object.
   Session session = Session.getDefaultInstance(properties);

   // String with body Text
   String bodyText = addColor("This line is red.", Color.RED);
   bodyText += "<br>" + addColor("This line is blue.", Color.BLUE);
   bodyText += "<br>" + addColor("This line is black.", Color.BLACK);

   System.out.println(bodyText);

   try{
      // Create a default MimeMessage object.
      MimeMessage message = new MimeMessage(session);

      // Set From: header field of the header.
      message.setFrom(new InternetAddress(from));

      // Set To: header field of the header.
      message.addRecipient(Message.RecipientType.TO,
                               new InternetAddress(to));

      // Set Subject: header field
      message.setSubject("This is the Subject Line!");

      // Send the actual HTML message, as big as you like
      message.setContent(bodyText,
                         "text/html" );

      // Send message
      Transport.send(message);
      System.out.println("Sent message successfully....");
   }catch (MessagingException mex) {
      mex.printStackTrace();
   }
}

public static String addColor(String msg, Color color) {
    String hexColor = String.format("#%06X",  (0xFFFFFF & color.getRGB()));
    String colorMsg = "<FONT COLOR=\"#" + hexColor + "\">" + msg + "</FONT>";
    return colorMsg;
}
} 
```

注意：在我的环境中，我必须在运行配置中设置此参数：

-Djava.net.preferIPv4Stack=true

更多关于[这里。](https://stackoverflow.com/questions/14064111/java-mail-mystery-smtp-blocked)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:24:20.497

它只是CSS。

无关`JAVA`。浏览器会检测到您发送的 HTML 内容`email`。

例如

```
<div style="font-size:14px">Dear user</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:26:28.500

您必须以 HTML 格式发送邮件才能更改文本颜色。

请参阅[JavaMail 常见问题解答](http://www.oracle.com/technetwork/java/faq-135477.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T13:54:24.050

对我来说，这完美无瑕，值得一试：

```
String htmlText2 = "<font color=red>Jon Targaryen</font>\n"; 
```

或者如果你想使用十六进制颜色：

```
String htmlText2 = "<font color=#93cff2>Jon Targaryen</font>\n"; 
```

您可以添加更多属性，例如 Headings 或 Bold ：

```
String htmlText2 = "<H1><font color=red>Jon Targaryen</font></H1>\n";

String htmlText2 = "<b><H1><font color=red>Jon Targaryen</font></H1></b>\n"; 
```

# ubuntu - ubuntu 11.10 上的 nvcc 错误“不知道该怎么办......”

> ID：15882935
> 
> 赞同：0
> 
> 时间：2013-04-08T15:20:26.243
> 
> 标签：ubuntu, cuda, nvcc

我尝试在 ubuntu 11.10 上安装 cuda 工具包 5.0。我认为安装进行得很好我正在尝试通过运行 deviceQuery 示例来测试它。但是当我从命令行运行 nvcc deviceQuery 时，我得到了错误： nvcc fatal : Don't know what to do with 'deviceQuery'

有谁知道我为什么会遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:12:43.447

`nvcc`不用于运行程序。它是一个[编译器驱动程序](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html)。当一个 cuda 程序被编译/链接/构建时，它就变成了一个普通的可执行文件。

我们使用普通方法（基于操作系统）来运行这些可执行文件。

在设置机器以使用 CUDA 时，参考操作系统类型的[设置说明可能会很有用。](http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html)这些文档还解释了如何构建（编译）CUDA 示例。

# kendo-ui - 将 Kendo Gauge 绑定到本地数据

> ID：15882939
> 
> 赞同：0
> 
> 时间：2013-04-08T15:20:39.953
> 
> 标签：kendo-ui

在 Kendo 文档中，有将许多图表绑定到本地数据的示例，但没有径向仪表。

谁能告诉我如何在我的控制器中使用 int 指定指针的值？

```
<div id="gauge-container">
@(Html.Kendo().RadialGauge()
    .Name("gauge")
    .Pointer(pointer =>pointer.Value(intFromController) )
    .Scale(scale => scale
        .MinorUnit(5)
        .StartAngle(-30)
        .EndAngle(210)
        .Max(180)
    )
)
</div> 
```

编辑——对于遇到同样问题的人来说，这里是我如何修复它（为了简单起见，用测试功能编辑的实际代码，也很抱歉缩进，匆忙。）：

**看法：**

```
<script>
$(document).ready(function () {

    $.ajax({
        type: "POST",
        cache: false,
        url: 'test/',
        success: function (data) {
            $("#gauge").data("kendoRadialGauge").value(data);
        }
    })

})</script> 
```

```
@(Html.Kendo().RadialGauge()

    .Name("gauge")
    .Pointer(pointer => pointer.Value(0))
    .Scale(scale => scale
        .MinorUnit(5)
        .StartAngle(-30)
        .EndAngle(210)
        .Max(180)
    )
) 
```

**控制器**

```
public double test()
{
    double value = 10;
    return value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:26:00.957

在控制器的操作中，您可以设置：

```
ViewData["myAngle"] = 123; 
```

在 View 中，您可以这样使用它：

```
<div id="gauge-container">
@(Html.Kendo().RadialGauge()
    .Name("gauge")
    .Pointer(pointer =>pointer.Value(@ViewData["myAngle"]) )
    .Scale(scale => scale
        .MinorUnit(5)
        .StartAngle(-30)
        .EndAngle(210)
        .Max(180)
    )
)
</div> 
```

# linux - 适用于 Node.js 的最轻量 Linux 发行版

> ID：15882941
> 
> 赞同：1
> 
> 时间：2013-04-08T15:20:42.217
> 
> 标签：linux, node.js, azure, virtual-machine

什么是适用于 Node.js 的优秀、超轻 Linux 发行版。

没有 GUI，只是 bash。

计划运行 Azure Extra Small VM 实例。共享CPU核心，768MB内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:22:35.457

[Ubuntu](http://www.ubuntu.com/) [服务器](http://www.ubuntu.com/download/server)甚至足够轻巧。比你有一个非常简单/得到良好支持的发行版。作为额外的好处，您可以使用 LTS 进行分发。

> Ubuntu 12.04.2 LTS 是一个长期支持版本，从 2012 年 4 月起保证提供五年的支持

# c# - EMGU CV MCvBox2D.GetVertices 给出不同的角顺序

> ID：15882944
> 
> 赞同：1
> 
> 时间：2013-04-08T15:20:55.610
> 
> 标签：c#, emgucv, rectangles

我正在为我的项目使用 EMGU CV，但遇到了一个奇怪的问题。
我使用 cannyedges 在照片中找到一些正方形。
这工作正常。之后，我想在每个正方形内取一个像素并用它来绘制边框。

我面临的问题是我需要每个角的顶点才能生成随机像素。为此，我使用以下代码：

```
PointF[] corners = rectangle.GetVertices();
float x = Math.Max(corners[1].X, corners[0].X);
float y = Math.Max(corners[1].Y, corners[2].Y);
float width = Math.Min(corners[2].X, corners[3].X) - x;
float height = Math.Min(corners[0].Y, corners[3].Y) - y; 
```

这段代码的问题是 rectangle.GetVertices(); 每次给出不同的角点顺序。
第一个矩形返回左下角作为角 0，左上角作为角 1 等。
第二个矩形返回右下角作为角 0，左下角作为角 1 等。

我想知道是否还有其他人遇到此问题，是否有人知道如何解决此问题？

如果您需要更多信息来回答这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-15T02:08:21.503

```
PointF[] corners = rectangle.GetVertices();

// Maybe this
corners = corners.OrderBy(s => s.X).ThenBy(s => s.Y).ToArray();

float x = Math.Max(corners[1].X, corners[0].X);
float y = Math.Max(corners[1].Y, corners[2].Y);
float width = Math.Min(corners[2].X, corners[3].X) - x;
float height = Math.Min(corners[0].Y, corners[3].Y) - y; 
```

# powershell - 弥补 Office COM 中 Find.Execute 的不足

> ID：15882950
> 
> 赞同：0
> 
> 时间：2013-04-08T15:21:12.953
> 
> 标签：powershell, office-interop

鉴于`Find.Execute`不允许使用正则表达式，除了将段落流式传输并逐个遍历它们之外，是否有任何 COM 方法可以做到这一点？

我需要在 Word 文档中找到 RegEx 模式，**最好返回 match**。如果做不到这一点，请在 Word 文档中找到一个 RegEx 并至少返回 $True 以便我可以捕获它。

注意：我意识到原因`Find.Execute`是有限的，因为它是对“查找文本”对话框的调用，但我希望有一些类似的有效方法来搜索模式。`Find.Execute`相当快，将文档中的文本作为范围流出来，然后搜索不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:02:52.703

究竟什么时候`Find.Execute`停止允许正则表达式？

```
$wd = New-Object -COM "Word.Application"

...

$fnd = $wd.Selection.Find

$fnd.Text = "..."  # replace with your pattern
$fnd.MatchWildcards = True
...
$fnd.Execute 
```

语法与标准正则表达式[略有不同。](http://word.mvps.org/faqs/general/usingwildcards.htm)

# c# - 如何将许多项目绑定到列表视图并仅显示少数

> ID：15882958
> 
> 赞同：0
> 
> 时间：2013-04-08T15:21:29.533
> 
> 标签：c#, asp.net, listview

如何将 8 个项目绑定到列表视图并仅显示 4。

我的要求包括将 X 项绑定到 asp:listview 控件并仅显示 X/2 项并单击更多显示所有 X 项

我无法再次从数据库中获取记录，也无法使用会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:13:28.067

您可以有两个列表。一个用于显示，一个是您的“缓存数据库”。

只需将所有 8 个项目加载到完整列表中，然后将您感兴趣的项目选择到“过滤器列表”中，然后将列表视图绑定到该列表。

# python - 将一列拆分为两列

> ID：15882960
> 
> 赞同：3
> 
> 时间：2013-04-08T15:21:33.627
> 
> 标签：python, bash, awk

我的数据格式如下：

```
###John###
someData1
someData2
SomeData3
###Mike###
someData1
someData2
###Ford###
someData1
someData2
SomeData3
someData4
someData5
SomeData6 
```

我希望输出为：

```
John  someData1
      someData2
      someData3

Mike  someData1
      someData2

Ford  someData1
      someData2
      someData3
      someData4
      someData5
      someData6 
```

这里的问题是每个名称下的数据*（somedata？）*数量不同并且是未知的。我必须使用的唯一部分是`###`表示新名称开始的主要字符。

`Somedata?`是一个词。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:24:27.413

我会使用类似的东西：

```
def fixup(iterable):
    it = iter(iterable)
    for x in it:
        if x.startswith('###'):
            yield '\n{0}\t{1}'.format(x.strip('#'),next(it))
        else:
            yield '\t{0}'.format(x) 
```

这会在第一行给你一个额外的换行符，但如果你真的想的话，可以很容易地去掉它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:26:22.570

awk 非常适合：

```
$ awk '/^#/{gsub(/#/,"");printf "%s",NR!=1?"\n"$0:$0;next}{print "\t"$0}' file
John    someData1
        someData2
        SomeData3

Mike    someData1
        someData2

Ford    someData1
        someData2
        SomeData3
        someData4
        someData5
        SomeData6 
```

似乎`awk`on`Mac`不支持三元运算符`? :`，因此请改用此`Mac`友好版本：

```
$ awk '/^#/{gsub(/#/,"");printf n"%s",$0;n="\n";next}{print "\t"$0}' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T15:39:16.933

一种迭代工具方法：

```
from itertools import groupby

with open('yourfile') as fin:
    for k, g in groupby(fin, lambda L: L.startswith('###')):
        if k:
            name = next(g).strip('#\n')
        else:
            print '{}\t{}'.format(name, next(g)),
            for line in g:
                print '\t{}'.format(line),
            print 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T17:20:55.820

以下给出了所需的确切输出：

```
from sys import stdout

with open('file') as f:
    for n,line in enumerate(f):        
        if line.startswith('###'):            
            stdout.write(('' if not n else '\n')+line.strip('#\n'))
        else:
            stdout.write('\t'+line) 
```

输出：

```
John    someData1
        someData2
        SomeData3

Mike    someData1
        someData2

Ford    someData1
        someData2
        SomeData3
        someData4
        someData5
        SomeData6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T15:30:48.847

您可以使用 re.split 轻松拆分数据

```
import re
namesInfo = re.split('###(.*?)###', dataString) 
```

然后你会得到一个名称数组，后跟相关数据。然后，您可以解析每个名称的数据。

# gwt - 在 GWT 中，如何在面板内循环 Gui Widget？

> ID：15882965
> 
> 赞同：2
> 
> 时间：2013-04-08T15:21:41.970
> 
> 标签：gwt, loops, user-interface, panel

比方说，我有一个 VerticalPanel，其中添加了一些小部件（标签、按钮……）。我如何循环该 VerticalPanel 并访问其中的小部件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T15:28:26.383

好吧，您可以使用`iterator`，正如我在问题[如何获取特定类型的所有小部件中所解释的那样？](https://stackoverflow.com/questions/15307883/how-get-all-widgets-of-certain-type/15308009#15308009).

```
Iterator<Widget> widgets= vpanel.iterator(); 
```

要记住的一点：

*   此方法仅提供添加到面板的小部件。
*   您还必须遍历子面板（如果它包含）。

或者从同一线程中选择@Manolo 的答案，如果您使用的是 GWT 第三方库 GQuery。

# magento - 用于模拟的 Magento 用户子帐户

> ID：15882966
> 
> 赞同：1
> 
> 时间：2013-04-08T15:21:42.580
> 
> 标签：magento, magento-1.7, impersonation, user-accounts

我有一个 Magento 项目的要求，该项目的帐户是分层的。也就是说，一个帐户可以“拥有”多个其他帐户。如果一个帐户拥有另一个帐户，则允许模拟该帐户：创建订单、查看帐户信息和查看以前的订单。

我不知道从哪里开始。如果您有任何想法，请您指出正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:15:35.303

一种解决方案是设置多选属性并使用允许模拟的用户的用户 ID 填充它。然后，您可以创建一个单独的 php 文件来运行 magento 并根据他们选择的用户登录，或者将其集成到 cms 中。

这是我的自定义“登录”代码，可让我的 Microsoft 数据库中的 sso 用户登录到 magento。

您调用此函数并将其传递给您要登录的“用户”。似乎工作得很好，但是您需要根据需要对其进行修改。不要指望它开箱即用！

仅供参考：如果您没有传递 magento 需要的关于 dispatchevents() 的所有垃圾信息，那么用户将无法正确登录。我不得不对这整个事情进行逆向工程，所以不要指望除了这里和一些 magento 核心之外的其他地方看到它:)

```
$userId = 5;
$user = Mage::getModel('customer/customer')->load($userId)->setWebsiteId(1);
$this->LoginToMagento($user, null);

function LoginToMagento($user, $noAddress) {

        // Must include this file in order to use the object
        include ('/var/www/app/code/core/Mage/Customer/controllers/AccountController.php');

        // Configure Magento to think its using the frontend
        Mage::getSingleton("core/session", array("name" => "frontend"));
        Mage::getConfig()->init();
        Mage::getConfig()->loadEventObservers('frontend');
        Mage::app()->addEventArea('frontend');
        Mage::app()->loadArea(Mage_Core_Model_App_Area::AREA_FRONTEND);

        // Grab the request and modify it with my emulated controller's information
        $request = Mage::app()->getRequest();
        $request->setRouteName('customer');
        $request->setControllerModule('Mage_Customer');
        $request->setRoutingInfo('');
        $request->setModuleName('customer');
        $request->setControllerName('account');
        $request->setModuleKey('module');
        $request->setControllerKey('account');
        $request->setActionName('loginPost');
        $request->setActionKey('action');

        // Grab the response
        $response = Mage::app()->getResponse();

        // Feed the request and response into a new accountcontroller object
        $accountControl = new Mage_Customer_AccountController($request, $response);

        // Dispatch events related to the controller actions for predispatch
        Mage::dispatchEvent('controller_action_predispatch', array('controller_action' => $accountControl));
        Mage::dispatchEvent('controller_action_predispatch_customer', array('controller_action' => $accountControl));
        Mage::dispatchEvent('controller_action_predispatch_customer_account_loginPost', array('controller_action' => $accountControl));

        // Grab an instance of the customer session model
        $session = Mage::getSingleton('customer/session');

        try{
            // Attempt to login the user
            $session->setCustomerAsLoggedIn($user);
            $session->renewSession();

        } catch (Mage_Core_Exception $e) {
            // Lets hope to never get here
            $message = $e->getMessage();
            error_log($message);
            Mage::getSingleton('core/session')->addError($message);
        }

// Perform the postdispatch events for 'after emulation of the controller'
        Mage::dispatchEvent('controller_action_postdispatch_customer_account_loginPost', array('controller_action'=>$accountControl));
        Mage::dispatchEvent('controller_action_postdispatch_customer', array('controller_action'=>$accountControl));
        Mage::dispatchEvent('controller_action_postdispatch', array('controller_action'=>$accountControl));

        $customer = Mage::getModel('customer/customer')
            ->getCollection()
            ->addAttributeToSelect('*')
            ->addAttributeToFilter('entity_id', array('eq' => $user->getId()))
            ->getFirstItem();

        try
        {
            // Prepare a collection of required values that the customer *should* have been set from netforum
            $collection = Mage::getModel('eav/entity_attribute')->getCollection();
            $collection->addFieldToFilter('entity_type_id', Mage::getModel('eav/entity')->setType('customer')->getTypeId());

            // The var representing if validation has failed
            $failedReq = false;

            // Loop through each user defined required attribute and if we find one
            // on the customer that is not set, forward the user to their account config page
            foreach ($collection as $attribute)
            {
                if ($attribute['is_required'] && $attribute['is_user_defined'])
                {
                    $attrCode = $attribute['attribute_code'];
                    if (!isset($customer[$attrCode]))
                    {
                        $failedReq = true;
                    }
                }
            }

            // Try to determine where we logged in from (URL)
            Mage::getSingleton("core/session", array("name" => "frontend"));
            $session = Mage::getSingleton("customer/session");
            $outputMessage = $session->getData('before_auth_url');

            // Proceeed differently based on the existence of addresses
            if ($noAddress == true)
            {
                if ($failedReq)
                {
                    // Customer failed login. To be expected if they are signing in with SSO and never have before
                    $redirect_to = 'https://' . $_SERVER['HTTP_HOST'] . '/customer/account/edit/';
                    Mage::getSingleton('core/session')->addError('<b>Please fill in the required fields marked with * and click "Save"</b>');
                    header("Location: $redirect_to");
                }
                else
                {
                    // Customer checks out ok, but has no addresses. Send them to the address setup screen
                    Mage::getSingleton('core/session')->addError('<b>Please fill in your address and phone number, then click "Save"</b>');
                    $redirect_to = 'https://' . $_SERVER['HTTP_HOST'] . '/customer/address/edit/';
                    header("Location: $redirect_to");
                }

            }
            else
{
                // Customer has addresses being passed from SSO
                $defaultBillingId = $customer->getDefaultBillingAddress()->getId();

                $hasPhoneNumber = false;

                foreach ($customer->getAddresses() as $address)
                {
                    $addrs = Mage::getModel('customer/address')->load($address->getId());
                    $magePhone = $addrs->getTelephone();
                    if ($magePhone)
                    {
                        $hasPhoneNumber = true;
                    }
                }

                if ($failedReq)
                {
                    // Customer failed login. To be expected if they are signing in with SSO and never have before
                    $redirect_to = 'https://' . $_SERVER['HTTP_HOST'] . '/customer/account/edit/';
                    Mage::getSingleton('core/session')->addError('<b>Please fill in the required fields marked with * and click "Save"</b>');
                    header("Location: $redirect_to");

                }
                else
                {
                    // Customer is has default values filled out
                    if (!$hasPhoneNumber)
                    {
                        // Phone number is missing for an address so redirect there and force em to enter it.
                        Mage::getSingleton('core/session')->addError('<b>Please fill in the required fields marked with * and click "Save Address"</b>');
                        $redirect_to = 'https://' . $_SERVER['HTTP_HOST'] . '/customer/address/edit/id/' . $defaultBillingId;
                        header("Location: $redirect_to");

                    }
                    else
                    {
                        // Everything is ok, so just try to send them back to where they came from, or the account screen
                        if ($outputMessage)
                        {
                            $redirect_to = $outputMessage;
                        }
                        else
                        {
                            $redirect_to = 'https://' . $_SERVER['HTTP_HOST'] . '/customer/account/';
                        }
                        header("Location: $redirect_to");
                    }
                }
            }
        }
        catch (Exception $e)
        {
            if ($outputMessage)
            {
                $redirect_to = $outputMessage;
            }
            else
            {
                $redirect_to = 'https://' . $_SERVER['HTTP_HOST'] . '/customer/account/';
            }
            header("Location: $redirect_to");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T09:34:01.193

我知道我迟到了，但是

[http://amasty.com/sales-reps-and-dealers.html](http://amasty.com/sales-reps-and-dealers.html)

此扩展程序有助于实现您正在寻找的东西。它将允许创建分层帐户并将销售代表/子管理员分配给订单并提供访问级别。

希望这可以帮助。

# ldap - OpenLDAP - 将用户密码保存为纯文本

> ID：15882970
> 
> 赞同：0
> 
> 时间：2013-04-08T15:21:51.140
> 
> 标签：ldap, openldap

我正在为我的一个 Java 应用程序设置 openLDAP。用户名和密码存储在 openLDAP 中，用户可以通过应用程序更新他们的密码（使用 javax.naming.directory API'）。我将我们的用户从我们现有的 Sun Directory Server 导入到 openLDAP。导入成功，密码以 SSHA 格式加密。我注意到，当我从应用程序更新密码时，它会以“纯文本”格式存储它。当我通过 Apache Directory Studio 查看密码时，我可以取消隐藏密码。后来进行了很多谷歌搜索，我尝试在 slapd.conf 文件中设置“密码哈希 {SSHA}”，但这也对我没有帮助。我在windows环境下。我以纯文本格式将密码传递给 openLDAP。代码中没有进行加密。我知道我可以在应用程序中对其进行加密，但我更喜欢 openLDAP 为我做这件事。请让我知道我是否可以在 openLDAP 方面做任何事情。

这是我今天用来修改密码的 JAVA 代码。在过去的 7 年中，这在我们现有的环境中运行良好。

```
ModificationItem[] newAttribs = new ModificationItem[1];
Attribute passwordAttrib = new BasicAttribute(DirectoryConstants.USER_PASSWORD, password);
ModificationItem passwordItem = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, passwordAttrib);
newAttribs[0] = passwordItem;

.....
DirContext ctx = this.getContext();
ctx.modifyAttributes( DirectoryConstants.USER_UID + "=" + userId + "," + ou, newAttribs); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T00:12:47.023

所以，openldap 中默认的密码哈希格式是 SSHA，这很好。不幸的是，openldap 中的默认密码策略是“不强制密码散列”。

您需要在存储用户的数据库中添加一个覆盖。在 cn=config 版本中，这看起来大致如下：

```
dn: olcOverlay={X}ppolicy,olcDatabase={Y}bdb,cn=config
对象类：olcPPolicyConfig
olcOverlay: {X}ppolicy
olcPPolicyHashCleartext: TRUE

```

（其中 Y 是您在 cn=config 中的数据库编号，X 是您想要的覆盖编号）

slapd.conf 版本类似，你需要一个：

```
覆盖策略
ppolicy_hash_cleartext

```

条目，在相关数据库定义中（您不需要为 ppolicy_hash_cleartext 提供值，存在表示 TRUE）。

# css - 是否有可以在 indesign 模板和 CSS/Html 之间转换的命令行工具或库？

> ID：15882971
> 
> 赞同：2
> 
> 时间：2013-04-08T15:21:51.457
> 
> 标签：css, html, converter, adobe-indesign

我希望（以编程方式）将 Adob​​e Indesign 模板文件（.indd）的存储库转换为更容易被人类操作的东西（即 CSS/HTML 文件）。

与完全可读的转换相比，我对准确的转换更感兴趣 - 生成的文件将被人类读取，并最终变得更具可读性。

有没有可以用于此目的的工具或库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:54:23.353

实际上，从 InDesign 转换为 html5 的唯一可行解决方案似乎是 Ajar Productions 开发的“In5”插件。我怀疑它是否允许批量转换，但它似乎在准确性方面做得很好。

产品及其功能的详细列表：[http ://www.ajarproductions.com/pages/products/in5/](http://www.ajarproductions.com/pages/products/in5/)

# ios - 消除键盘 FirstResponder 问题

> ID：15882972
> 
> 赞同：2
> 
> 时间：2013-04-08T15:21:56.693
> 
> 标签：ios, objective-c, keyboard, uisearchbar, resignfirstresponder

所以我正在制作一个应用程序，并且在从 UISearchBar 和 UITextFields 中解除键盘时遇到了一些问题。这是我的应用程序的结构：

NavigationController -> ViewC1 -（模态）-> ViewC2 -（模态）-> ViewC3

我在 ViewC1 中有一个搜索框，当按下键盘上的“搜索”按钮时，键盘被关闭，这很好用。但是，如果我在进入 ViewC3 后返回 ViewC1，则按下“搜索”按钮时键盘不再关闭。在搜索栏委托方法中，我放置如下：

```
- (void) searchBarSearchButtonClicked:(UISearchBar *)search
{
if ([search isFirstResponder]) {
    [search resignFirstResponder];
  } else {
    [search becomeFirstResponder];
    [search resignFirstResponder];
  }
} 
```

这并不能解决问题，我不确定为什么键盘没有关闭。供参考，返回原来的ViewC1时，ViewC3被dismiss如下：

```
UIViewController *parent = self.presentingViewController;
[parent.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:25:17.847

好的，我弄清楚了问题所在。他们的第一响应者正在辞职，但由于焦点问题，键盘并没有消失。模态视图有一个默认行为是不关闭键盘（这显然不是一个错误）。因此，从模态视图返回后，它仍然存在这种行为（辞职第一响应者但不关闭键盘）。我解决这个问题的方法是将以下代码放在两个模态视图 .m 文件中：

```
- (BOOL)disablesAutomaticKeyboardDismissal {
return NO;
} 
```

这为我解决了。然后通过使用：

```
[search resignFirstResponder]; 
```

或者

```
[self.view endEditing: YES]; 
```

键盘会很好地关闭！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:32:38.187

您需要使用断点进行一些调试，以找出为什么没有命中该条件语句。您还可以使用 UIView 中的 endEditing 方法在单击搜索时简单地退出响应者：

```
- (void) searchBarSearchButtonClicked:(UISearchBar *)search
        [search endEditing:YES];
} 
```

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:53:24.733

尝试一下....

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
   [mySearchBar resignFirstResponder];
} 
```

请声明 IBOutlet UISearchBar *mySearchBar; 在您的 .h 文件
中 在您的 .xib 文件中设置委托。

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T07:35:35.417

（一年后..）

我的 iPad 应用程序也遇到了同样的问题。

我有一个“请注册” UIView，其中包含一些`UITextFields`我会弹出到屏幕上的内容。当用户点击关闭按钮时，它会消失，我会用`removeFromParentViewController`它来摆脱它。

```
[self.pleaseRegisterDlg removeFromParentViewController]; 
```

现在，当我从 XCode 以调试模式在真实设备上运行这段代码时，故事就到此结束了。一切都很好。但是当我用这段代码构建一个*In-House 应用程序时，它的行为就不同了。*

我会发现，有时，无论我在代码中输入了多少，有时`resignFirstResponders`屏幕`disablesAutomaticKeyboardDismissals`键盘会突然出现，并且拒绝以编程方式消失。

这没有任何意义，因为我的应用程序的其余部分没有任何`UITextFields`......该应用程序没有理由显示键盘。

我的解决方案是在将“请注册”`UIView`从父视图中删除后将其设置为零。

```
[self.pleaseRegisterDlg removeFromParentViewController];
pleaseRegisterDlg = nil; 
```

显然，拥有一个`UIView`实际上并未附加到任何其他`UIViews`但包含`UITextFields`的内容有时足以混淆iOS，并使屏幕键盘出现。

（叹气。这一行代码浪费了我下午的几个小时......吸取了教训！）

# c# - 在 caliburn.micro 中启用管理模式视图

> ID：15882977
> 
> 赞同：1
> 
> 时间：2013-04-08T15:22:04.520
> 
> 标签：c#, wpf, caliburn.micro

我正在重写一个 WPF 应用程序以使用 Caliburn.Micro。该应用程序是一个菜单系统，显示文件夹，然后显示这些文件夹中的文件。问题是我需要允许用户切换到允许其他选项的“管理员”模式。我目前有一个 FolderView 和 FileView 以及每个的 ViewModels。我正在考虑拥有一个单独的 FolderAdminView 和 FileAdminView，这样我就可以更改 UI 并启用其他选项。当用户改变模式时，问题是在两者之间切换。

FolderViewModel 和 FileViewModel 可以同时加载，因此调用`DeactivateItem(ActiveItem, true);`将充当后退按钮并返回到文件夹视图。

我还想将值从 FolderViewModel 转移到 FolderAdminViewModel，因为主要区别在于 UI。

有没有一种简单的方法来换出 WindowManager 中的项目，或者更简单的方法来完全做到这一点？我可以有一个 ViewModel 但有两个 View 吗？有没有办法让两个模板在一个视图中并在那里选择正确的一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:31:53.287

您能否不仅在 ViewModel 上拥有 IsAdmin 属性，并使用 将仅管理员项目的可见性绑定到该属性`BooleanToVisibilityConverter`？

视图模型

```
public bool IsAdmin
{
    get
    {
        //What ever you do to work out if user is admin 
        //omitted any INotifyPropertyChanged gubbins
    }
} 
```

Xaml

```
<StackPanel Visibility="{Binding IsAdmin,Converter={StaticResource BooleanToVisibiltyConverter}}"></StackPanel> 
```

转换器

```
public sealed class BooleanToVisibilityConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            var flag = false;
            if (value is bool)
            {
                flag = (bool)value;
            }
            else if (value is bool?)
            {
                var nullable = (bool?)value;
                flag = nullable.GetValueOrDefault();
            }
            if (parameter != null)
            {
                if (bool.Parse((string)parameter))
                {
                    flag = !flag;
                }
            }
            return flag ? Visibility.Visible : Visibility.Collapsed;
        }
        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            var back = ((value is Visibility) && (((Visibility)value) == Visibility.Visible));
            if (parameter != null)
            {
                if ((bool)parameter)
                {
                    back = !back;
                }
            }
            return back;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:10:37.460

您可以使用“上下文”附加属性来指定加载的任何视图的上下文，例如：

```
<ContentControl x:Name="SomeSubViewModel" cal:View.Context="SomeContext" /> 
```

CM`ToString()`在上下文对象上使用来获得一个值，它将在视图解析期间用于构建类型名。这意味着您可以为同一个视图模型拥有多个视图，因此当用户处于管理员模式时，您可以通过绑定`View.Context`属性来添加其他功能

您还可以为要隐藏在视图模型上的每个项目创建一个绑定，并使用转换器来检查用户是否已登录等 - 显然这取决于您是要在两个视图中复制 XAML 还是使用单个视图隐藏/显示区域的条件逻辑

阅读上下文属性：

[http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions&referringTitle=Documentation)

上面的链接有一些示例（在前几节中）

和这里：

[http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition](http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition)

在**同一 ViewModel 上的多个视图**部分

# html - 是否有可能在 是“不缩进”吗？

> ID：15882978
> 
> 赞同：2
> 
> 时间：2013-04-08T15:22:06.723
> 
> 标签：html, css

`<ol>`我有一个包含`<li>`元素的有序列表。我对列表当前的呈现方式感到满意，但我想让 ' 中的`<img>`元素`<li>`不遵循我为`<li>`元素设置的缩进 CSS 样式规则。`<img>`当涉及到一个元素时，有什么方法可以打破缩进的流动。

所以我有类似的东西：

```
*  List Item 1 description that is two 
   lines long.  Lorem ipsum et dolor.

   |-- IMAGE SPANS WIDTH OF INDENT --| 
```

我想要的是这样的：

```
*  List Item 1 description that is two
   lines long.  Lorem ipsum et dolor.

|-- IMAGES SPANS WIDTH OF <OL> -------| 
```

我知道我可以使用负左边距将图像向左移动，但我想避免使用它，因为它不会影响元素的宽度。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:25:16.503

您可以做的是一些 css 定位技巧：

```
ul {
position:relative;
}

ul img {
position:absolute;
left:0;
} 
```

基本上，它所做的是将图像设置`position`为`absolute`（即，任何地方），但将父级设置`UL`为`relative`，这意味着任何设置为的子级`absolute`都会将`UL`' 的尺寸视为他们的视口。因此在图像上设置`left`为`0`将其设置为图像的最左侧`UL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:30:10.327

将图像包装在 a中，为此`DIV`设置负数而不是图像，然后您将能够设置图像等于列表的 100%。`margin-left``DIV``width`

# ruby-on-rails - 使用不同的日期字段。如何接近更简单的搜索引擎？导轨 3.2

> ID：15882979
> 
> 赞同：0
> 
> 时间：2013-04-08T15:22:10.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, date, search, ruby-on-rails-3.2

我建立了一个小网站，收集该地区发生的一些文化活动的信息。我想扩展`Event`模型，以便它可以处理 3 个不同的事件“案例场景”。

1.  '即单身'。具有开始日期和结束日期的正常事件。
2.  '即巡回演出'。相同的事件，但发生在不同的时间。
3.  '即博物馆'。周一至周日时间表。

我认为 1 和 2 类型的最佳方法是：

事件模型

```
 # holds title, description, price....
has_many :dates
accepts_nested_attributes_for :dates 
```

日期模型

```
 # holds start_time(:datetime) and finish_time(:datetime)
belongs_to :events 
```

我不确定如何处理第三种类型。或者更重要的是，如何以一种使未来交互更容易编码的方式构建它……比如构建一个搜索引擎。

想法：建立另一个模型，称为`Timetable`？这可以举行：

```
boolean types -> Mon - Tue... -Sun
time type -> Mon_start - Tue_start... - Sun_start - Mon_finish - Tue_finsih... - Sun_finish. 
```

`search engine`但是，更新（具有日期字段/参数）以遍历所有这 3 种类型似乎相当复杂。

有什么想法/经验可以阐明要走的路吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:29:14.450

一种行之有效的方法是制作`Date`抽象的，然后再制作三个扩展的模型`Date`。

# php - 多页导航和 AJAX

> ID：15882982
> 
> 赞同：1
> 
> 时间：2013-04-08T15:22:16.947
> 
> 标签：php, jquery, ajax

我正在考虑使用 PHP 和 MySQL 以及 jQuery 创建一个“多页导航系统”。

理想情况下，我想要的是一个项目列表，例如：

```
* Item 1
* Item 2
* Item 3 
```

在 内`Item 1`，还有 3 个其他子类别，在`Item 2`2 个子类别内，在 2 个子类别内还有 3 个子类别

所以我真正想要的是以下内容：

```
1) when i click on 'Item 2` is displays the 2 subcategories
2) when I click on one of these subcategories it displays the 3 others 
```

理想情况下，我想在使用 AJAX 时这样做，因为我希望它出现在 jQuery UI 对话框中。

我有 2 张桌子：

```
category
id | title
----------
 1 | item 1
 2 | item 2
 3 | item 3

subcategory (simplified)
id | cat_id | parent_id | title
-------------------------------
 1 |   1    |  0        | subcat1
 2 |   1    |  0        | subcat2 
 3 |   1    |  1        | subcat1_subcat1
 4 |   1    |  1        | subcat1_subcat2
 5 |   1    |  1        | subcat1_subcat3 
```

我的主要问题是我将如何去做？

我真的不想有一个包含所有数据的大数组，因为它可能有更多的类别和子类别。

有谁知道对此的最佳解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:47:09.137

将它们全部存储在数组中有什么问题？除非您计划在这些菜单项中包含数千个元素（这对用户来说非常不友好），否则对于 PHP 来说这只是在公园里散步。

此外，您可能希望更具体地了解您的要求。是 jQuery、PHP 还是两者兼而有之？你需要代码还是概念？

## 编辑：解决方案

因此，根据您列出的评论，这是一个概念证明。

**PHP**：您需要从数据库中读取并将它们加载到数组中。使用 PDO 很容易做到这一点。只需使用该`fetchAll()`命令并在关联数组中检索整个结果集。棘手的部分是将您的“平面”数据库转换为多维数组。开始：

```
// Retrieve the details from the database in the $rows associative array
...

// Now, we need to expand the 'flat' DB structure into a multi-
// dimensional array.
$multid=findKids($rows);

// Send it back, JSON-encoded
die(json_encode(
    'result'   => 'success',
    'response' => $multid
)); // Send the response back via AJAX

/**
 * Here's the function that converts the flat DB into a multi-
 * dimensional array. It tracks all the parents in a single
 * array and collects the kids for those parents. If it comes
 * across a new parent, if fetches all the kids recursively.
 */
function findKids( $rows, $parentid=NULL, &$parents=NULL ) {
    // Create a temporary array for the kids
    $shelter;

    // Go through all the rows
    foreach($rows as $index => $row) {
        // Find the kids that belong to this parent
        if($row['parentid']==$parentid) {
            // This kid belongs to this parent
            // Move it to the temporary shelter
            $shelter[$parentid][]=$row;
        }
        else {
            // This kid doesn't belong to this parent.
            // Have we already talked to the parent before?
            if(isset($parents[$row['parentid']])) {
                // Yes, the parent has already been visited. Ignore
            }
            else {
                // Parent hasn't been visited; add it
                $shelter[$row['parentid']][]=findKids($rows,$row['parentid'],$parents);
            }
        } // close else{ }      
    } // close foreach{ }

    // Return the shelter, with all the kids
    return $shelter;
} 
```

返回的数组将包含如下所示的响应：

```
$response=[
    'result'=>'success',
    'response'=>[
        0=>[ // Contains the kids for $parentid=0
            ['id'=>1, 'cat_id'=>1, 'parent_id'=>0],
            ['id'=>2, 'cat_id'=>1, 'parent_id'=>0]
           ],
        1=>[ // Contains the kids for $parentid=1
            ['id'=>3, 'cat_id'=>1, 'parent_id'=>1],
            ['id'=>4, 'cat_id'=>1, 'parent_id'=>1],
            ['id'=>5, 'cat_id'=>1, 'parent_id'=>1]
           ],
     ]
]; 
```

**jQuery**：您将解释 JSON 响应并遍历响应以动态创建菜单。

这是一个将数组显示为嵌套无序列表的示例脚本。

```
// Call the printMyFamily method on the element to display
// that you'd like to see the menu appear in
$outputElem.html($.printMyFamily(NULL,response['response']));

$.printMyFamily = function(parentid,haystack){
    // Our output variable
    output="<ul>";

    // Find the kids
    $haystack.each(function(index,elem){
        // Is this kid ours?
        if(elem[parentid] == parentid){
            // Yes. Add to output
            output+="<li id='"+elem['id']+"'>"+elem['catid']+"</li>";

            // Find this items kids (if any)
            output+=$.printMyFamily(elem['id'],haystack);
        }
        else { /* not ours, ignore */ }
    });

    // Is the result an empty string? If so, just clear it
    if(output=="<ul>"){ output=""; }

    // Return the output
    return output;
}; 
```

# html - 修改没有服务器端页面的 HTML5 页面

> ID：15882988
> 
> 赞同：0
> 
> 时间：2013-04-08T15:22:32.287
> 
> 标签：html, save, synchronize

我有一个可编辑的 html5 页面，并将新元素存储在 localStorage 中。我想将我的页面与服务器同步。我想知道我是否可以在没有服务器端脚本的情况下做到这一点，或者是否有一些技巧可以很好地做这样的事情。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:27:45.790

您可以使用 jQuery 轻松地从服务器中提取信息，然后将其放在本地存储中，但是，如果您想将本地信息上传到服务器，则无法绕过，您**必须**使用某种脚本，这并不难困难，有很多语言（PHP、C#、Python...）和工具可供您使用。

请记住，当您将信息上传到服务器时，您必须对其进行*清理*，这是**非常重要的**安全措施。

基本上，要走的路是：

*   将信息发布到服务器（使用 AJAX 或 HTML 表单，任何一种方式都可以）
*   使用一些服务器端脚本来捕获发布的变量。
*   **清理**您的数据（检查格式，丢弃无效字符等）
*   将其存储在数据库中（永远**不要**将您的数据与 SQL 查询连接好吗？这会使您容易受到 SQL 注入攻击），计算某些东西或做一些事情。
*   向客户端返回一些状态（可能是一些确认？）
*   您可能希望接受该确认并向用户显示一条消息（“您的信息已正确保存”或类似的东西）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:23:53.420

javascript 计时器是否不足以满足这种方式？还是 jQuery？

这个问题真的应该是一个问题而不是一个问题。如果您基于服务器的变量进行更新，那么我相信您可以使用 AJAX，但如果它每 X 秒增加一次变量，我将专注于使用 javascript 计时器。

# c++ - C++11 正则表达式中的 UTF-8 字符范围

> ID：15882991
> 
> 赞同：30
> 
> 时间：2013-04-08T15:22:38.957
> 
> 标签：c++, regex, unicode, utf-8, c++11

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-09T07:21:38.687

Encoded in UTF-8, the string `"[一-龠々〆ヵヶ]"` is equal to this one: `"[\xe4\xb8\x80-\xe9\xbe\xa0\xe3\x80\x85\xe3\x80\x86\xe3\x83\xb5\xe3\x83\xb6]"`. And this is not the ~~droid~~ character class you are looking for.

The character class you are looking for is the one that includes:

*   any character in the range U+4E00..U+9FA0; or
*   any of the characters 々, 〆, ヵ, ヶ.

The character class you specified is the one that includes:

*   any of the "characters" \xe4 or \xb8; or
*   any "character" in the range \x80..\xe9; or
*   any of the "characters" \xbe, \xa0, \xe3, \x80, \x85, \xe3 (again), \x80 (again), \x86, \xe3 (again), \x83, \xb5, \xe3 (again), \x83 (again), \xb6.

Messy isn't it? Do you see the problem?

This will not match "latin" characters (which I assume you mean things like a-z) because in UTF-8 those all use a single byte below 0x80, and none of those is in that messy character class.

It will not match `"中"` either because `"中"` has three "characters", and your regex matches only one "character" out of that weird long list. Try `assert(std::regex_match("中", std::regex("...")))` and you will see.

If you add a `+` it works because `"中"` has three of those "characters" in your weird long list, and now your regex matches one or more.

If you instead add `{1}` it does not match because we are back to matching three "characters" against one.

Incidentally `"中"` matches `"中"` because we are matching the three "characters" against the same three "characters" in the same order.

That the regex with `+` will actually match some undesired things because it does not care about order. Any character that can be made from that list of bytes in UTF-8 will match. It will match `"\xe3\x81\x81"` (ぁ U+3041) and it will even match invalid UTF-8 input like `"\xe3\xe3\xe3\xe3"`.

The bigger problem is that you are using a regex library that does not even have level 1 support for Unicode, the bare minimum required. It munges bytes and there isn't much your precious tiny regex can do about it.

And the even bigger problem is that you are using a hardcoded set of characters to specify "any Japanese Kanji or Chinese character". Why not use the Unicode Script property for that?

`R"(\p{Script=Han})"`

Oh right, this won't work with C++11 regexes. For a moment there I almost forgot those are annoyingly worse than useless with Unicode.

So what should you do?

You could decode your input into a `std::u32string` and use `char32_t` all over for the matching. That would not give you this mess, but you would still be hardcoding ranges and exceptions when you mean "a set of characters that share a certain property".

I recommend you forget about C++11 regexes and use some regular expression library that has the bare minimum level 1 Unicode support, like the one in [ICU](http://icu-project.org).

# javascript - JS 表单验证不起作用

> ID：15882994
> 
> 赞同：0
> 
> 时间：2013-04-08T15:22:44.680
> 
> 标签：javascript

我有一个表单，我有 JS 表单验证。但验证过程不起作用。插入过程工作正常。

以下是将数据插入mysql数据库的表格-

```
<?php
session_start();
include("includes/connection.php");
include("header.php");
include("includes/adminmenu.php");
if(isset($_SESSION['username']))
        {
        //echo $_SESSION['username'];
        ?>
        <!--Javasript Validation File Import -->
<script type="text/javascript" src="js/qcheck.js"></script>
<script type="text/javascript" language="JavaScript">

function HidePart(d) { document.getElementById(d).style.display = "none";  }
function ShowPart(d) { document.getElementById(d).style.display = "block"; }
function CheckboxChecked(b,d)
{
   if(b) { ShowPart(d); }
   else  { HidePart(d); }
}
</script>
    <br />
    <div class="userstat">

        <div style="background-color:#666666; text-align:center; font-weight:bold; color:#FFFFFF; font-size:24px;"><span>Insert A new Question</span></div>
        <br />
        <div class="statdata">
            <form action="includes/insertq.php" method="POST" name="qform" onSubmit="return valide()">
                    <div style="text-align:center;">
                <select name="subject" size="0">
                <option selected="0" value="">Select Subject</option>
                <option value="bangla">Bangla</option>
                <option value="english">English</option>
                <option value="physics">Physics</option>
                <option value="chemistry">Chemistry</option>
                <option value="math">Mathematics</option>
                <option value="biology">Biology</option>
                <option value="gk">General knowledge</option>
                </select>
                     </div>
                 <br /><br />
                <label for="question">Write Down the Question below</label>
                <textarea name="question" rows="3" cols="40"></textarea><br /><br />
                <label for="ans">Options</label><br /><br />
                <label for="option1">a.</label>
                <input type="text" name="option1" size="40" /><br />
                <label for="option2">b.</label>
                <input type="text" name="option2" size="40" /><br />
                <label for="option3">c.</label>
                <input type="text" name="option3" size="40" /><br />
                <label for="option4">d.</label>
                <input type="text" name="option4" size="40" /><br /><br />
                <label for="correct">Correct.</label><br />&nbsp;&nbsp;&nbsp;
                <input type="text" name="correct" size="40" /><br /><br /><br />
                <div style="text-align:center;">
                <input type="submit" name="submit" value="Submit Question" />
                </div>
                <br />
                <br />
            </form>
        </div>
        </div>

     </body>
        <?php
        }

    else
        {
        header("location: admin.php");
        }
?>

<?php
include("includes/footer.php");
?> 
```

和 Javascript 文件是

```
function valide()
{
var subject=document.forms["qform"]["subject"].value;
var question=document.forms["qform"]["question"].value;
var option1=document.forms["qform"]["option1"].value;
var option2=document.forms["qform"]["option2"].value;
var option3=document.forms["qform"]["option3"].value;
var option4=document.forms["qform"]["option4"].value;
var correct=document.forms["qform"]["correct"].value;

if(subject == null || Subject == "Select Subject")
    {
        alert("Select subject Type");
        return false;

        }
    else if(question==null || question=="" || question.length<5)
        {
            alert("Insert Valid question");
            return false;
            }   
    else if(option1==null || option1=="")
        {
            alert("Insert Option 1.");
            return false;
            }
    else if(option2==null || option2=="")
        {
            alert("Insert Option 2.");
            return false;
            }
    else if(option3==null || option3=="")
        {
            alert("Insert option 3.");
            return false;
            }   
    else if(option4==null || option4=="")
        {
            alert("Insert option 4.");
            return false;
            }   
    else if(correct==null || correct=="")
        {
            alert("Insert correct option.");
            return false;
            }                                   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:27:17.273

案件很重要

```
if(subject == null || Subject == "Select Subject")
                      ^ 
```

主题！==主题

值也不会为空。您应该检查长度为零。

# mysql - mysql添加一个新列来标记每个id的时间序列数据点

> ID：15882997
> 
> 赞同：0
> 
> 时间：2013-04-08T15:22:56.727
> 
> 标签：mysql, time-series

我将时间序列数据存储在一个表中，如下所示。

```
 id,       timestamp,             value
   d1   2000-01-01 00:00:00          1
   d1   2000-01-01 01:00:00          2
   d1   2000-01-01 02:00:00          3
   d1   2000-01-01 03:00:00          4
   d1   2000-01-01 04:00:00          5
...
   d2   2000-01-01 00:00:00          25
   d2   2000-01-01 01:00:00          26
   d2   2000-01-01 02:00:00          27
   d2   2000-01-01 03:00:00          28
   d2   2000-01-01 04:00:00          29
   d2   2000-01-01 05:00:00          30
...
   d3   2000-01-01 00:00:00          49
   d3   2000-01-01 01:00:00          50
   d3   2000-01-01 02:00:00          51
   d3   2000-01-01 03:00:00          52
   d3   2000-01-01 04:00:00          53 
```

我需要做的是在表中添加另一列，如下所示。目的是标记每个 id 的数据点数以供进一步处理。

```
 id,       timestamp,             value,     counter
   d1   2000-01-01 00:00:00          1           1 
   d1   2000-01-01 01:00:00          2           2
   d1   2000-01-01 02:00:00          3           3 
   d1   2000-01-01 03:00:00          4           4
   d1   2000-01-01 04:00:00          5           5
...
   d2   2000-01-01 00:00:00          25          1
   d2   2000-01-01 00:00:00          26          2
   d2   2000-01-01 01:00:00          27          3
   d2   2000-01-01 02:00:00          28          4 
   d2   2000-01-01 03:00:00          29          5
   d2   2000-01-01 04:00:00          30          6
...
   d3   2000-01-01 00:00:00          49          1
   d3   2000-01-01 01:00:00          50          2
   d3   2000-01-01 02:00:00          51          3
   d3   2000-01-01 03:00:00          52          4
   d3   2000-01-01 04:00:00          53          5 
```

如何使用mysql命令实现？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:43:02.000

```
SELECT
yt.*
, IF(@prev=id, @counter:=@counter + 1, @counter:=1) as counter
, @prev:=id
FROM
yourTable yt
, (SELECT @counter:=0, @prev:=NULL) vars
order by id, `timestamp` 
```

看到它住[在这里](http://www.sqlfiddle.com/#!2/a96ad/3/0)。