# StackOverflow 问答 13901000-13901999

# redis - 跨 redis 分片的排序、联合交集

> ID：13901005
> 
> 赞同：1
> 
> 时间：2012-12-16T11:49:02.450
> 
> 标签：redis, sharding

我是redis的新手。我需要知道排序、交集和其他聚合操作是如何跨分片发生的。是否可以执行此类操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:10:36.300

Redis 不会透明地为您处理这个问题。您基本上需要从每个分片中检索结果，然后重新组合它们（假设您的搜索不是分片键）。一些库使用 Redis 使分片更容易（参见 predis [https://github.com/nrk/predis](https://github.com/nrk/predis)）。不过，基本上，您要做的是针对所有分片运行查询，带回结果，然后合并结果、排序、相交、聚合等。

您可能需要关注 Redis 集群项目[http://redis.io/topics/cluster-spec](http://redis.io/topics/cluster-spec)，因为它可能提供您想要在不分片的情况下实现的目标，尽管它目前仅处于开发阶段。

最后，您还应该知道，当您添加/删除新节点时，分片不会提供任何类型的冗余或重新平衡分片的工具。如果一个分片不见了，您将丢失该分片中的所有数据。如果您使用 Redis 作为缓存而不是作为数据的最终权威存储，这很好。因此，请确保您也考虑每个分片的主从复制。

# c++ - 从批处理文件中设置 VS2010 环境变量？

> ID：13901006
> 
> 赞同：0
> 
> 时间：2012-12-16T11:49:20.180
> 
> 标签：c++, visual-studio-2010, batch-file, environment-variables, pre-build-event

我正在使用批处理文件来定义将在我的程序中使用的一些变量。我希望批处理文件更改环境变量并在我的代码中使用它，但它现在才开始工作 - 宏没有被更改。

更具体和明确：

1.  我有一个程序可以创建一个 DLL 并设置它的版本

2.  在项目的通用设置中-我创建了一个新宏（通用属性->用户宏）：`TEST_VER = 5`

3.  现在我想添加一个批处理文件，它将在预构建命令中运行并更改 TESTER 的值

我在批处理文件中写了这个：

```
set TEST_VER=9 
```

并在预构建中使用了批处理的路径。

但它不认识它。并且仍然使用 5 作为值

我虽然在做：项目的属性->资源->一般并添加：TEST_VER = $（TEST_VER）但仍然没有工作

![在此处输入图像描述](../Images/d2e70cd5dd191df0687a515974dca4e5.png)

![在此处输入图像描述](../Images/1a43eefc2f6a475f374838b6d6cc99e4.png)

有没有办法做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:20:40.687

当 Visual Studio 启动一个程序时，它会在一个新的子进程中运行该程序。在本例中，这是一个新的 CMD.EXE，即命令提示符外壳。在子流程（子流程）中对环境所做的更改对*父流程没有影响*。Visual Studio 有自己的一组环境变量，它在启动时继承了这些变量。您的批处理文件无法更改这些值。你不能按照你的方式做你想做的事。

# ios - Twitter 和反向认证

> ID：13901008
> 
> 赞同：0
> 
> 时间：2012-12-16T11:49:35.723
> 
> 标签：ios, https, twitter-oauth

我想使用 Twitter 登录 iOS 应用程序。一旦用户通过 Twitter 进行身份验证，我想将这些凭据传递给服务器，以便将这些凭据与存储在数据库中的用户配置文件进行匹配。

我可以通过 https 与我的服务器通信，但这仍然不能告诉我我从应用程序传递的凭据是：

1.  来自应用程序 - 因为其他人可以使用我的服务启动安全会话
2.  拥有有效的凭据 - 凭据是实际登录的 Twitter 帐户，而不仅仅是一些虚构的数字（密钥等）

我是否需要实施反向身份验证以提供一种安全地执行此操作的方法？（如果不是我应该使用什么方法来知道所提供的信息是正确的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:25:47.473

我认为方法是，一旦您从 iOS 客户端获得令牌/秘密，就是调用[GET account/verify_credentials](https://dev.twitter.com/docs/api/1.1/get/account/verify_credentials)，然后您获得用户帐户，您可以将 twitter 用户 ID 或名称与存储在您的用户配置文件中的用户进行比较。

# ruby-on-rails - 跟踪医生、客户和约会的变化:)

> ID：13901011
> 
> 赞同：2
> 
> 时间：2012-12-16T11:49:57.067
> 
> 标签：ruby-on-rails, ruby

这不是一个正常的用例，我可以使用诸如 paper_trail 或其他插件之类的东西，这是一种更复杂的方法来跟踪更改……但让我解释一下：

假设您有一份医疗日历，上面有预约、主治医生和客户。

假设您是比尔，您负责规划接下来几周的日程安排。在为下个月安排了所有数百个约会之后，您将时间表发送给您的医生和客户。

显然，如果您提前 4 周计划，您原来的日程安排就会发生变化（您因为生病、客户死亡而更换医生，您更改预约的开始时间等）

因此，您需要发送更新的日程安排。但很明显，您只想向那些受日程变化影响的客户或医生发送电子邮件。

**你需要弄清楚的是：**

*   新任命？
*   更改约会？
*   取消约会？

起初看起来相当简单，您可以只记住上次发送时间表的时间戳，然后使用 after_save、after_destroy 回调跟踪更改。

不幸的是，这也会导致一些棘手的情况，例如，您删除了一位医生，然后再次将同一位医生添加到该预约中。您会得到 2 个更改，这些更改显然不是“真正的”更改。

我喜欢的是单独的表格，我在其中存储这些更改，稍后查看它们并将它们发送给医生和客户。

我真的很好奇是否有人做了类似的事情，或者有一个很好的方法来解决这个问题。:)

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:30:35.900

观察状态变化的最简单方法相当简单：使用日志文件。在你的情况下，它将是一个关于类固醇的日志文件，一个模型，具有如下属性：`user_to_update`, `date_changed`, `notified_ok`.

每次进行更改并从日志模型中检索统计信息时，您都可以触发新的日志插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:54:20.743

您可以尝试使用 PaperTrail gem 来跟踪更改[https://github.com/airblade/paper_trail](https://github.com/airblade/paper_trail)

# c - 如何在工具栏中为 GtkToolItem 创建监听器？

> ID：13901017
> 
> 赞同：0
> 
> 时间：2012-12-16T11:50:25.223
> 
> 标签：c, gtk2

我创建了用`C`.

我添加了工具栏：

![在此处输入图像描述](../Images/dfbee60f89c5a9bc139804ed964cc853.png)

这是相关的代码片段：

```
GtkWidget *toolbar;
GtkToolItem *new;
GtkToolItem *open;
GtkToolItem *save;
GtkToolItem *sep;
GtkToolItem *exit;

...
toolbar = gtk_toolbar_new();    
gtk_toolbar_set_style(GTK_TOOLBAR(toolbar), GTK_TOOLBAR_ICONS);

gtk_container_set_border_width(GTK_CONTAINER(toolbar), 2);

new = gtk_tool_button_new_from_stock(GTK_STOCK_NEW);
gtk_toolbar_insert(GTK_TOOLBAR(toolbar), new, -1);

open = gtk_tool_button_new_from_stock(GTK_STOCK_OPEN);
gtk_toolbar_insert(GTK_TOOLBAR(toolbar), open, -1);

save = gtk_tool_button_new_from_stock(GTK_STOCK_SAVE);
gtk_toolbar_insert(GTK_TOOLBAR(toolbar), save, -1);

sep = gtk_separator_tool_item_new();
gtk_toolbar_insert(GTK_TOOLBAR(toolbar), sep, -1); 

exit = gtk_tool_button_new_from_stock(GTK_STOCK_QUIT);
gtk_toolbar_insert(GTK_TOOLBAR(toolbar), exit, -1); 

....

gtk_widget_show_all (window); 
```

问题是，当我按下退出/打开时，如何将侦听器（回调）添加到工具栏...

对于单个按钮，我有类似的东西：

```
g_signal_connect (G_OBJECT (_button), "clicked", G_CALLBACK (on_button_clicked), NULL);

void on_button_clicked(){...} 
```

我知道如何做到这一点，`gtk_ui_manager`但它太复杂了。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:30:58.880

是在主窗口吗？

```
g_signal_connect(G_OBJECT(exit), "clicked", G_CALLBACK(gtk_main_quit), NULL);
g_signal_connect_swapped(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL); 
```

更多信息：http: [//zetcode.com/tutorials/gtktutorial/menusandtoolbars/](http://zetcode.com/tutorials/gtktutorial/menusandtoolbars/)

# jakarta-ee - 如何找到更新的灰熊罐？

> ID：13901020
> 
> 赞同：1
> 
> 时间：2012-12-16T11:50:52.713
> 
> 标签：jakarta-ee, glassfish, repository, grizzly

我在使用 Glassfish（[链接](http://java.net/jira/browse/GRIZZLY-1375?page=com.atlassian.streams.streams-jira-plugin%3aactivity-stream-issue-tab)）时遇到了这个问题，要修复它，我需要将 Glassfish 的 Grizzly 版本更新到 1.9.55，但我在任何地方都找不到它！有谁现在如何得到这个修复？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:50:44.617

这在[grizzly.java.net](http://grizzly.java.net/) [1.9.55](http://search.maven.org/remotecontent?filepath=com/sun/grizzly/grizzly-utils/1.9.55/grizzly-utils-1.9.55.jar)上被引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:41:50.850

最简单的方法是使用附件`grizzly-utils.jar` *（版本 1.9.46）*。

为了修补 GlassFish，请将[附加的 jar 文件](https://java.net/jira/secure/attachment/51900/grizzly-utils-1.9.46.jar)复制到`glassfishv3/glassfish/modules`文件夹并覆盖现有的`grizzly-utils.jar`.

# c# - 用 unicode 标识符替换字符之间

> ID：13901025
> 
> 赞同：-2
> 
> 时间：2012-12-16T11:51:22.623
> 
> 标签：c#, c#-4.0

如何根据 Unicode 代码点在字符串中的两个字符之间进行替换？请问有什么帮助吗？非常感谢。

例如，

```
 Replace (U0041 with U0066) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T12:01:12.253

使用`\u`转义码写入字符：

```
str = str.Replace('\u0041', '\u0066'); 
```

或者，将数字转换为字符：

```
int char1 = 65;
int char2 = 102;
str = str.Replace((char)char1, (char)char2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:59:31.983

你可以这样做：

```
Console.WriteLine("ABC".Replace("\u0041", "\u0066")); 
```

这会产生输出`fBC`，因为`u0041`(which is `A`) 的 unicode 代码点已被 -an 的代码点`u0066`替换`f`。

# winforms - 引发事件后关闭表单

> ID：13901026
> 
> 赞同：0
> 
> 时间：2012-12-16T11:51:22.710
> 
> 标签：winforms, events, c#-4.0, delegates

我有一个在某些时候打开 StartForm 的主窗体：

```
private void TestChosen(object sender, TestChosenEventArgs e)
{
    var frm = new TestStartForm(e.Test, StartTest);
    frm.ShowDialog();
} 
```

在这个 StartForm 上，我有一个按钮来实际开始测试。

```
public TestStartForm(Test test, StartTestHandler startTestHandler)
{
    InitializeComponent();
    _test = test;
    OnStartTest = startTestHandler;
}

public delegate void StartTestHandler(object sender, StartTestEventArgs e);
public event StartTestHandler OnStartTest;

public void InvokeOnStartTest(StartTestEventArgs e)
{
    StartTestHandler handler = OnStartTest;
    if (handler != null) handler(this, e);
}

private void btnStart_Click(object sender, EventArgs e)
{
    InvokeOnStartTest(new StartTestEventArgs(_test));
    Close();
} 
```

我面临的问题是 StartForm 保持打开状态，直到 StartTestHandler 的工作完全完成。在 StartTestHandler 中，另一个表单打开了实际测试。

有没有办法强制 StartForm 关闭而不等待测试完成？

**编辑**

正如@cowboydan 建议的那样，我已经使用 BeginInvoke 来显示表单。但是，在它正常工作之前，我必须为 StartForm 以及实际的 TestForm 这样做。

```
private void TestChosen(object sender, TestChosenEventArgs e)
{
    BeginInvoke((Action)delegate
    {
        var frm = new TestStartForm(e.Test, StartTest);
        frm.ShowDialog();
    });

}

private void StartTest(object sender, StartTestEventArgs e)
{
    BeginInvoke((Action)delegate
    {
        var frm = new TestForm(e.Test);
        frm.ShowDialog();
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:53:32.943

您可以使用 BeginInvoke，它将在与 ThreadPool 不同的线程中启动 StartForm。这是一种相当普遍的做法。

# javascript - 动态加载的 CSS 在 Windows 8 应用程序中无效

> ID：13901032
> 
> 赞同：4
> 
> 时间：2012-12-16T11:52:09.497
> 
> 标签：javascript, css, windows-8, windows-store-apps

我已经动态加载了一个 CSS 文件，并将其放置`style`在 Windows 8 应用程序的标签中。

这是我加载 CSS 的方式

```
function loadHeaders() {
    var monobookCSSURL = "http://lego.wikia.com/wiki/MediaWiki:Monobook.css?action=raw&ctype=text/css";

    WinJS.xhr({ url: monobookCSSURL }).then(loadCSS, xhrError);
}

function loadCSS(result) {
    var css = result.responseText;

    var style = document.createElement("style");
    style.innerText = css;

    document.getElementsByTagName("head")[0].appendChild(style);
} 
```

当我在 Visual Studio 中使用 DOM 资源管理器查看加载的内容时，我看到的正是我所期望的，最后一个标签`head`是`style`包含我的 CSS 的。

但是，当我查看我的页面时，加载的 CSS 均未生效。

我通过在 HTML 源代码中手动添加另一个`style`标签来测试这一点，这有效果，但动态标签没有。

我怎样才能让这个CSS有效果？

这是生成的样式标签：

```
 #p-cactions ul li {
}
#p-cactions ul li a {
}
 ＃内容 {
}
 身体 {
    背景：RGB（244、248、255）；
}
 div.tleft {
    边框：当前颜色；
}
 div.tright {
    左边距：13px；
}
 .content-bg {
    背景：白色；
}
前{
    溢出：自动；
}
.pBody {
    背景色：rgb(222, 227, 232);
}
身体 {
     背景：#103A5A 网址（http://images2.wikia.nocookie.net/lego/images/f/f0/Studs-tile.png）；
}
#p-个人李一{
     颜色：#DEE3E8；
}
.portlet h5 {
     颜色：#FFFFFF；显示：块；高度：15px；背景颜色：#355C70；文本转换：大写；
}
身体[类*='ns-118'] {
}
身体[类*='ns-119'] {
}
body[class*='ns-118'] #p-personal li a {
     颜色：#DEE8E3；
}
body[class*='ns-119'] #p-personal li a {
     颜色：#DEE8E3；
}
正文[class*='ns-118'].portlet h5 {
     颜色：#FFFFFF；显示：块；高度：15px；背景颜色：#35705C；文本转换：大写；
}
正文 [class*='ns-119'].portlet h5 {
     颜色：#FFFFFF；显示：块；高度：15px；背景颜色：#35705C；文本转换：大写；
}
身体[类*='ns-116'] {
}
身体[类*='ns-117'] {
}
body[class*='ns-116'] #p-personal li a {
     颜色：#E8DEE3；
}
body[class*='ns-117'] #p-personal li a {
     颜色：#E8DEE3；
}
正文 [class*='ns-116'].portlet h5 {
     颜色：#FFFFFF；显示：块；高度：15px；背景颜色：#90152C；文本转换：大写；
}
正文 [class*='ns-117'].portlet h5 {
     颜色：#FFFFFF；显示：块；高度：15px；背景颜色：#90152C；文本转换：大写；
}
正文 [class*='Forum_Brickiforums'] {
}
body[class*='Forum_Brickiforums'] #p-personal li a {
     颜色：#E8DEE3；
}
body[class*='Forum_Brickiforums'].portlet h5 {
     颜色：#FFFFFF；显示：块；高度：15px；背景颜色：#B0B02C；文本转换：大写；
}
#title-rating2 {
     显示：无；
}
#页脚{
     背景：#DEE3E8；边框颜色：#355C70；
}
.wikiaOnly {
     显示：无；
}
div.User-help-badge-1 {
    左：500px；顶部：2px；位置：绝对；
}
div.User-help-badge-2 {
    左：540px；顶部：2px；位置：绝对；
}
div.User-help-badge-3 {
    左：580px；顶部：2px；位置：绝对；
}
div.User-help-badge-4 {
    左：620px；顶部：2px；位置：绝对；
}
div.User-help-badge-5 {
    左：660px；顶部：2px；位置：绝对；
}
.infoboxtoc .toc {
    边距：0px；填充：0px；边框：当前颜色；宽度：100%；
}
.infoboxtoc #toctitle {
    显示：无；
}
.infoboxtoc .NavHead {
    padding-right: 2px; 底部填充：12px；浮动：对；
}
.infoboxtoc .NavFrame {
    边距底部：-23px；
}
.tt按钮{
    边框半径：2px；左：114px；顶部：200px；padding-right: 5px; 左填充：5px；显示：无；位置：固定；变换：旋转（90度）；背景颜色：rgb(173, 173, 173); -moz 变换：旋转（90 度）；-webkit-transform：旋转（90度）；-o-变换：旋转（90度）；
}
.wikia 菜单按钮 {
    显示：无！重要；
}
:first-of-type.portlet > .pBody > ul > li:not([id]) {
    显示：无！重要；
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:06:51.343

无需修改 head 标签，而是通过 DOM api 进行。[这个](http://msdn.microsoft.com/en-us/library/windows/apps/hh996817.aspx)页面应该很有帮助。

# android - 纹理在 android opengl es 2.0 中被拉伸

> ID：13901040
> 
> 赞同：0
> 
> 时间：2012-12-16T11:53:03.440
> 
> 标签：android, opengl-es, textures

我从google's android tutorial on open gl开始，然后使用本[教程](http://www.learnopengles.com/android-lesson-four-introducing-basic-texturing/)：添加纹理。由于类结构有点不同，我不得不做一些代码移动重命名。我最终的结果是：

![在此处输入图像描述](../Images/938dec6ab771a212bd8ceaf75af45c6b.png)

[这](https://dl.dropbox.com/u/16215704/temp/stars_1024.jpg)是我使用的纹理文件。如您所见，纹理以某种方式沿 (1, 1) 拉伸，尽管底层对象是正方形。这是我的四边形代码，感谢您的帮助。

```
public class GLSquare implements IGLObject {

private final String vertexShaderCode =
// This matrix member variable provides a hook to manipulate
// the coordinates of the objects that use this vertex shader
"uniform mat4 uMVPMatrix;" + "attribute vec2 a_TexCoordinate;"
        + "varying vec2 v_TexCoordinate;" + "attribute vec4 vPosition;"
        + "void main() {"
        +
        // the matrix must be included as a modifier of gl_Position
        "  gl_Position = uMVPMatrix * vPosition;"
        + "v_TexCoordinate = a_TexCoordinate;" + "}";

private final String fragmentShaderCode = "precision mediump float;"
        + "uniform sampler2D u_Texture;" + "varying vec2 v_TexCoordinate;"
        + "void main() {"
        + "  gl_FragColor = texture2D(u_Texture, v_TexCoordinate);" + "}";

private final FloatBuffer vertexBuffer;
private final ShortBuffer drawListBuffer;
private final int mProgramHandle;
private int mPositionHandle;
private int mMVPMatrixHandle;
private int mTextureDataHandle;
/** The texture pointer */

// number of coordinates per vertex in this array
static final int COORDS_PER_VERTEX = 3;
static float squareCoords[] = { -10f, 10f, 0.0f, // top left
        -10f, -10f, 0.0f, // bottom left
        10f, -10f, 0.0f, // bottom right
        10f, 10f, 0.0f }; // top right

private FloatBuffer textureBuffer; // buffer holding the texture coordinates
private float texture[] = {
        // Mapping coordinates for the vertices
        0.0f, 1.0f, // top left (V2)
        0.0f, 0.0f, // bottom left (V1)
        1.0f, 1.0f, // top right (V4)
        1.0f, 0.0f // bottom right (V3)
};

static float[] mTranslate = new float[16];
static float[] translatedMVP = new float[16];

private final short drawOrder[] = { 0, 1, 2, 0, 2, 3 }; 

public GLSquare(float x, float y, float z, Context context) {
    // initialize vertex byte buffer for shape coordinates
    ByteBuffer bb = ByteBuffer.allocateDirect(squareCoords.length * 4);
    bb.order(ByteOrder.nativeOrder());
    vertexBuffer = bb.asFloatBuffer();
    vertexBuffer.put(squareCoords);
    vertexBuffer.position(0);

    bb = ByteBuffer.allocateDirect(texture.length * 4);
    bb.order(ByteOrder.nativeOrder());
    textureBuffer = bb.asFloatBuffer();
    textureBuffer.put(texture);
    textureBuffer.position(0);

    // initialize byte buffer for the draw list
    ByteBuffer dlb = ByteBuffer.allocateDirect(
    // (# of coordinate values * 2 bytes per short)
            drawOrder.length * 2);
    dlb.order(ByteOrder.nativeOrder());
    drawListBuffer = dlb.asShortBuffer();
    drawListBuffer.put(drawOrder);
    drawListBuffer.position(0);

    Matrix.setIdentityM(mTranslate, 0);
    Matrix.translateM(mTranslate, 0, x, y, z);
    // prepare shaders and OpenGL program
    final int vertexShaderHandle = GLTools.compileShader(
            GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    final int fragmentShaderHandle = GLTools.compileShader(
            GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

    mProgramHandle = GLTools.createAndLinkProgram(vertexShaderHandle,
            fragmentShaderHandle, new String[] { "a_Position", "a_Color",
                    "a_TexCoordinate" });
    // Load the texture
    mTextureDataHandle = GLTools.loadGLTexture(context, R.raw.stars1024);
}

public void draw(float[] vpMatrix) {
    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgramHandle);

    // Pass in the position information
    vertexBuffer.position(0);
    GLES20.glVertexAttribPointer(mPositionHandle, 3, GLES20.GL_FLOAT,
            false, 0, vertexBuffer);
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    int mTextureCoordinateHandle = GLES20.glGetAttribLocation(
            mProgramHandle, "a_TexCoordinate");
    // Pass in the texture coordinate information
    textureBuffer.position(0);
    GLES20.glVertexAttribPointer(mTextureCoordinateHandle, 2,
            GLES20.GL_FLOAT, false, 0, textureBuffer);
    GLES20.glEnableVertexAttribArray(mTextureCoordinateHandle);

    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgramHandle,
            "uMVPMatrix");
    WideOpenRenderer.checkGlError("glGetUniformLocation");

    // Apply the projection and view transformation
    Matrix.multiplyMM(translatedMVP, 0, vpMatrix, 0, mTranslate, 0);
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, translatedMVP, 0);

    // Draw the cube.
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
            GLES20.GL_UNSIGNED_SHORT, drawListBuffer);

}

} 
```

这是加载纹理的方法：

```
public static int loadGLTexture(Context context, final int resourceId) {
    Log.d("GLTools", "Loading texture...");
      final int[] textureHandle = new int[1];

        GLES20.glGenTextures(1, textureHandle, 0);

        if (textureHandle[0] != 0)
        {
            final BitmapFactory.Options options = new BitmapFactory.Options();
            options.inScaled = false;   // No pre-scaling

            // Read in the resource
            final Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resourceId, options);

            // Bind to the texture in OpenGL
            GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);
            Log.d("GLTools", "Binding texture, setting parameter" + resourceId);
            // Set filtering
            GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
            GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);

            // Load the bitmap into the bound texture.
            GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

            // Recycle the bitmap, since its data has been loaded into OpenGL.
            bitmap.recycle();
        }

        if (textureHandle[0] == 0)
        {
            throw new RuntimeException("Error loading texture.");
        }

        return textureHandle[0];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:20:54.843

好的，我现在可以回答我自己的问题了。纹理只是相对于它的原点 = 左下点 (u, v) = (0, 0) 进行了缩放，这让我很恼火，因为我是 opengl 的新手，我希望它至少会相对于世界进行缩放原点或对象的质心。

# php - 在数组中每 10 个之后添加另一个项目

> ID：13901043
> 
> 赞同：5
> 
> 时间：2012-12-16T11:53:15.910
> 
> 标签：php

我有一个数组

```
$names = array( "Ayush" , "Vaibhav", "Shivam", "Hacker", "Topper",
                "ABCD",  "NameR", "Tammi", "Colgate", "Britney",
                "Bra", "Kisser"); 
```

我还有另一个变量

```
$addthis = "ADDTHIS"; 
```

如何从这两个中创建一个数组，以便在 中的每三个项目之后添加`$names`的值`$addthis`。所以，我想要这个数组作为这两个的结果。

```
$result = array( "Ayush" , "Vaibhav", "Shivam", "ADDTHIS", "Hacker",
                 "Topper", "ABCD", "ADDTHIS",  "NameR", "Tammi",
                 "Colgate", "ADDTHIS", "Britney", "Bra", "Kisser"); 
```

请向我提供正确的代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T12:00:48.787

“Oneliner”，只是为了好玩：

```
$new = array_reduce(
    array_map(
        function($i) use($addthis) { return count($i) == 3 ? array_merge($i, array($addthis)) : $i; },
        array_chunk($names, 3)
    ),
    function($r, $i) { return array_merge($r, $i); },
    array()
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:06:30.660

另一个单线；）

```
$result = call_user_func_array(
    'array_merge', array_map(function($v) use ($addthis) {
        return $v + [4 => $addthis];
    }, array_chunk($names, 3))
); array_pop($result); 
```

[演示](http://eval.in/4708)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-13T22:52:50.573

对于任何好奇的人，我都有答案，我刚刚完成了一个随机化数组的函数。

```
function randomize($array){
    $randomized=array(); //start a new array
    foreach ($array as $key=>$val){ ///loop thru the array we randomize
        if($key % 2 == 0){   ////if the key is even
            array_push($randomized,$val);///push to back
        }else{ ////if the key is odd
            array_unshift($randomized,$val); ///push to front
        }
    }
    return $randomized;
}///randomize 
```

基本上我们正在做的是创建一个新的随机数组，循环遍历我们传递的数组，跟踪一个交互器，并且当我们循环遍历时，如果键是偶数，我们将该数组值发送到后面，如果它是奇数，我们将它发送到前面.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T06:26:31.810

也许更容易理解的解决方案：

```
// the parameters
$names = array( "Ayush" , "Vaibhav", "Shivam", "Hacker", "Topper",
            "ABCD",  "NameR", "Tammi", "Colgate", "Britney",
            "Bra", "Kisser");
$addThis = 'ADDTHIS';
$every = 3;

// how often we need to add this
$count = ceil(count($names) / $every) - 1;
for ($i = 0; $i < $count; $i++) {
    array_splice($names, $i * ($every + 1) + $every, 0, $addThis);
} 
```

[`array_splice`](http://php.net/manual/en/function.array-splice.php)恰好用于修改数组（删除或添加项目），保留现有键并且不对数组执行任何其他操作。

虽然其他答案肯定也有效，但这应该是最快和最干净的解决方案。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-16T11:57:43.327

```
$result = array();
$cnt = 0;
foreach ($names AS $val) {
    $result[] = $val;
    if ($cnt >=3) {
        $result[] = $addthis;
        $cnt = 0;
    }
    $cnt++;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-16T11:58:21.600

循环并使用模数来检查 3\. 元素：之后使用拼接在两个元素之间插入一个元素

```
 foreach($result as $k=>$value){
 if(($k+1)%3==0){
   array_splice($arrayvariable, $k+1, 0, "ADDTHIS");
 }
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-16T12:19:29.110

您**不想做**的一件事是假设数组中的每个键都是数字的，并且它准确地表示每个元素的*偏移量。*这是错误的，因为 PHP 数组不像传统数组。数组键不是元素的偏移量（*即它不决定元素的顺序*），也不一定是数字。

不幸的是，PHP 数组是有序的 hashmap，而不是传统的数组，所以在 map 中间插入新元素的唯一方法是创建一个全新的 map。

您可以使用 PHP 的[array_chunk()](http://php.net/array-chunk)函数来完成此操作，该函数将创建一个新的元素数组，每个元素*最多*包含指定数量的元素，形成您的输入数组。因此，我们创建了一个数组数组或元素*块*。这样，您可以遍历块并将它们附加到新数组中，从而获得所需的效果。

```
$names = array( "Ayush" , "Vaibhav", "Shivam", "Hacker", "Topper",
                "ABCD",  "NameR", "Tammi", "Colgate", "Britney",
                "Bra", "Kisser");

$addthis = "ADDTHIS";

$result = array();

foreach (array_chunk($names, 3) as $chunk) { // iterate over each chunk
    foreach ($chunk as $element) {
        $result[] = $element;
    }
    // Now push your extra element at the end of the 3 elements' set
    $result[] = $addthis;
} 
```

如果您也想保留密钥，则可以这样做....

```
$names = array( "Ayush" , "Vaibhav", "Shivam", "Hacker", "Topper",
                "ABCD",  "NameR", "Tammi", "Colgate", "Britney",
                "Bra", "Kisser");

$addthis = "ADDTHIS";

$result = array();

foreach (array_chunk($names, 3, true) as $chunk) { // iterate over each chunk
    foreach ($chunk as $key => $element) {
        $result[$key] = $element;
    }
    // Now push your extra element at the end of the 3 elements' set
    $result[] = $addthis;
} 
```

这保留**了元素的顺序**以及**每个元素的键**。但是，如果您不关心密钥，则可以简单地使用第一个示例。请注意，按顺序排列的数字键会导致第二种方法出现问题，因为此示例中的附加元素假定下一个可用的数字键（因此在下一次迭代中被覆盖）。

# android - EditText 光标仅在聚焦时闪烁

> ID：13901047
> 
> 赞同：1
> 
> 时间：2012-12-16T11:53:38.463
> 
> 标签：android, android-edittext

我有一个`EditText`.

我希望`EditText`' 的光标仅在用户键入一些文本时闪烁。

我试过`OnFocusChangeListener`了，但这并没有生效。

有什么建议么？

# asp.net-mvc - 如何锁定一个 asp.net mvc 动作？

> ID：13901048
> 
> 赞同：33
> 
> 时间：2012-12-16T11:53:41.363
> 
> 标签：asp.net-mvc

我编写了一个控制器和操作，我将其用作服务。这项服务的成本很高。如果当前已经有一个正在运行的操作，我想限制对此操作的访问。

是否有任何内置方法来锁定 asp.net mvc 操作？

谢谢

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-16T14:52:28.520

你在寻找这样的东西吗？

```
public MyController : Controller
{
    private static object Lock = new object();

    public ActionResult MyAction()
    {
        lock (Lock)
        {
            // do your costly action here
        }    
    }
} 
```

如果线程当前正在处理块内的代码，则上述内容将阻止任何其他线程执行该操作`lock`。

**更新：这是它的工作原理**

方法代码始终由线程执行。在负载很重的服务器上，可能有 2 个或更多不同的线程进入并开始并行执行一个方法。根据问题，这是您要防止的。

注意`private Lock`对象是怎样的`static`。这意味着它在控制器的所有实例之间共享。因此，即使在堆上构造了这个控制器的 2 个实例，它们都共享同一个 Lock 对象。（该对象甚至不必命名为 Lock，您可以将其命名为 Jerry 或 Samantha，它仍然可以起到相同的作用。）

这就是发生的事情。您的处理器一次只能允许 1 个线程输入一段代码。在正常情况下，线程 A 可以开始执行一个代码块，然后线程 B 可以开始执行它。所以理论上你可以让 2 个线程同时执行相同的方法（或任何代码块）。

`lock`可以使用关键字来防止这种情况。当一个线程进入一个包裹在一个`lock`部分中的代码块时，它会“拾取”锁对象（`lock`关键字后面括号中的内容，aka `Lock`, `Jerry`, or `Samantha`，应该标记为一个`static`字段）。在执行锁定部分的持续时间内，它“保持”锁定对象。当线程退出锁定部分时，它“放弃”锁定对象。*从线程获取锁对象的那一刻起，直到它放弃锁对象，所有其他线程都被阻止进入锁定的代码段。实际上，它们被“暂停”，直到当前正在执行的线程放弃锁定对象。*

因此，线程 A 在 MyAction 方法的开头获取锁定对象。在它放弃锁对象之前，线程 B 也尝试执行这个方法。但是，它无法获取锁对象，因为它已经被线程 A 持有。所以它等待线程 A 放弃锁对象。当它完成时，线程 B 然后拿起锁对象并开始执行代码块。当线程 B 完成执行该块时，它为下一个委托处理此方法的线程放弃锁定对象。

**...但我不确定这是否是您正在寻找的...**

使用这种方法不一定会使您的代码运行得更快。它只确保一个代码块一次只能由 1 个线程执行。它通常用于并发原因，而不是性能原因。如果您可以在问题中提供有关您的特定问题的更多信息，那么可能会有比这个更好的答案。

请记住，我上面提供的代码会导致其他线程在执行块之前等待。如果这不是您想要的，并且如果它已经被另一个线程执行，并且您希望整个操作被“跳过”，那么使用更像 Oshry 的答案的东西。您可以将此信息存储在缓存、会话或任何其他数据存储机制中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-10-17T23:07:15.793

我更喜欢使用[SemaphoreSlim](https://docs.microsoft.com/en-us/dotnet/api/system.threading.semaphoreslim)，因为它支持异步操作。

如果您需要控制读/写，则可以使用[ReaderWriterLockSlim](https://docs.microsoft.com/en-us/dotnet/api/system.threading.readerwriterlockslim)。

以下代码片段使用`SemaphoreSlim`：

```
public class DemoController : Controller
{
    private static readonly SemaphoreSlim ProtectedActionSemaphore =
        new SemaphoreSlim(1);

    [HttpGet("paction")] //--or post, put, delete...
    public IActionResult ProtectedAction()
    {
        ProtectedActionSemaphore.Wait();
        try
        {
            //--call your protected action here
        }
        finally
        {
            ProtectedActionSemaphore.Release();
        }

        return Ok(); //--or any other response
    }

    [HttpGet("paction2")] //--or post, put, delete...
    public async Task<IActionResult> ProtectedActionAsync()
    {
        await ProtectedActionSemaphore.WaitAsync();
        try
        {
            //--call your protected action here
        }
        finally
        {
            ProtectedActionSemaphore.Release();
        }

        return Ok(); //--or any other response
    }
} 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-28T16:22:55.987

阅读并同意上述答案后，我想要一个稍微不同的解决方案：如果要检测对操作的第二次调用，请使用 Monitor.TryEnter：

```
if (!Monitor.TryEnter(Lock, new TimeSpan(0)))
{
    throw new ServiceBusyException("Locked!");
}
try
{
...
}
finally {
    Monitor.Exit(Lock);
} 
```

使用@danludwig 详述的相同静态锁定对象

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T11:55:47.403

您可以`[UseLock]`根据您的要求创建自定义属性并将其放在您的操作之前

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-03T15:17:37.310

我对此有一些建议。

1- [https://github.com/madelson/DistributedLock](https://github.com/madelson/DistributedLock) 系统范围的锁解决方案

2- 具有 [DisableConcurrentExecution(1000)] 属性的 Hangfire BackgroundJob.Enqueue。

两个解决方案正在等待处理完成。我不想在同时请求时抛出错误。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-12-16T12:18:09.283

最简单的方法是将一个布尔值保存到缓存中，指示该操作已经在运行所需的 BL：

```
if (System.Web.HttpContext.Current.Cache["IsProcessRunning"])
{
    System.Web.HttpContext.Current.Cache["IsProcessRunning"] = true;
    // run your logic here
    System.Web.HttpContext.Current.Cache["IsProcessRunning"] = false
} 
```

当然，你也可以这样做，或者类似的东西，作为一个属性。

# debugging - 使用 SSH 调试 Playbook

> ID：13901061
> 
> 赞同：0
> 
> 时间：2012-12-16T11:56:04.573
> 
> 标签：debugging, blackberry-playbook

我正在使用其中一个跨平台 sdk（如果您需要更多详细信息，则为果酱）为黑莓剧本开发游戏。SDK 不提供任何机制来调试 playbook 设备上的应用程序，因此我必须使用它`command line`来执行此操作。我已经对此进行了搜索，并且我必须知道我需要通过连接将 playbook 连接到我的 mac，`SSH`并将日志文件存储在`appdata`.

我成功地使用 将我的剧本连接到我的 mac `SSH`，现在没有提到下一步。我以前从未使用过 SSH，也不知道如何使用它来传输文件。所以我的问题是，一旦 SSH 连接完成，我如何使用 SSH 从 playbook 调试或获取日志。

PS：考虑到我有一台Mac，而不是Windows PC，请告诉答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:58:08.783

终于明白了。实际上我认为会有一些命令行实用程序来查找日志文件。我刚刚下载了 FileZilla（任何 sftp 客户端都可以），复制添加的私钥并连接到已经 ssh 连接的 playbook。我现在可以从 appdata 下载日志。

# sql - 如何在oracle表格中自动插入当前时间？

> ID：13901062
> 
> 赞同：1
> 
> 时间：2012-12-16T11:56:27.513
> 
> 标签：sql, plsql, oracle10g, oracleforms

我在 oracle 表单中遇到问题。我的数据库由一个主表组成，表名是 (buy_order_customer)，它有 (b_order_id,customer_id,b_date,b_time)。

我想在 b_time 列中自动插入当前时间，我可以在 b_date 列中插入当前日期，但我不能对 b_time 做同样的事情。

b_date 和 b_time 都是“日期”类型。

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:00:28.027

在 Oracle DB 中，[`DATE`数据类型](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#i54330) **始终**包含日期和时间（即使您不显示它们。

因此，如果您将当前日期插入 b_date，那么您也已经有了当前时间。

尝试这个：

```
SELECT to_char(b_date, 'mm-dd-yyyy hh24:mi:ss')
  FROM buy_order_customer 
```

看看你也有时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:14:29.420

我认为您的意思是在运行时在表单中填充这些字段的初始值。如果我是对的，那么您需要以下系统变量之一：

$$DATE$$ 检索当前操作系统日期（客户端）。

$$DATETIME$$ 检索当前操作系统的日期和时间。

$$DBDATE$$ 检索当前数据库日期。

$$DBDATETIME$$ 从本地数据库中检索当前日期和时间。

我不知道任何系统变量只能检索时间。如果是出于显示目的，您需要在字段上使用日期格式掩码。

# php - Paypal Dodirect 无需花费我的客户

> ID：13901064
> 
> 赞同：-1
> 
> 时间：2012-12-16T11:56:34.657
> 
> 标签：php, paypal

我已经编写了第一次 paypal doDirect 方法，它在沙盒模式下工作正常，但为了让它生效，它给出了以下错误：

`[L_ERRORCODE0] => 10501`

`[L_SHORTMESSAGE0] => Invalid Configuration [L_LONGMESSAGE0] => This transaction cannot be processed due to an invalid merchant configuration. [L_SEVERITYCODE0] => Error`

所以我然后用谷歌搜索，发现我的客户需要有一个协议，支付专业版每月收费 30 美元。

有没有另一种方法可以做到这一点而不会花费我这笔钱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:37:47.013

您可以使用[Payments Advanced](https://www.paypal.com/webapps/mpp/paypal-payments-advanced)只需 5 美元/月而不是 30 美元/月。

如果您的流量很大，我可以让您设置 PayFlow（新的 Payments Pro），无需任何月费。如果您的交易量为 5,000 美元/月或更多，请直接与我联系，我可以让您联系上。

# asp.net-mvc - EntityType 没有定义键。[Key] 出现

> ID：13901065
> 
> 赞同：2
> 
> 时间：2012-12-16T11:56:35.907
> 
> 标签：asp.net-mvc, entity-framework

实体

```
public class Region
{
    [Key]
    public int ID;
    public string Name; 
    public string Description;
} 
```

模型

```
public class RegionModel
{   [Key]
    public int ID { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }
} 
```

错误

> System.Data.Edm.EdmEntityType: : EntityType 'Region' 没有定义键。定义此 EntityType 的键。
> System.Data.Edm.EdmEntitySet：EntityType：EntitySet “Regions”基于没有定义键的“Region”类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T12:02:34.433

您的类字段需要更改为属性，EF 才能正确使用该类；

```
public class Region
{
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:00:31.980

```
public class Region
{
    [Key]
    public int RegionId{get;set;}
    public string Name{get;set;} 
    public string Description{get;set;}
}

public class RegionModel
{   [Key]
    public int RegionModelId { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }
} 
```

如果你有它，它就`ClassNameId`可以工作。你现在甚至可以删除`[Key]`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T06:28:41.097

也许对您的问题有一个奇怪的答案。但请确保您的项目首先编译。当我在不编译项目的情况下添加数据注释时，我得到了同样的错误。

我认为代码是通过某种反射生成的。

# bpel - BPEL 中的 XBRL 支持？

> ID：13901067
> 
> 赞同：1
> 
> 时间：2012-12-16T11:57:09.417
> 
> 标签：bpel, xbrl

BPEL 是否支持 XBRL 标准？谷歌上很少有回应表明 BPEL 中的 Oracle DB 适配器可用于通过调用存储过程与 Oracle XML DB 进行交互（执行 DML 操作）。

但是，我们要求在扩展 XBRL 应用于 DB 之后，BPEL 应该与 Oracle XML DB 交互（执行 DML 操作）。

有没有办法处理它？是否可以配置任何 BPEL 适配器？请让我知道如何配置它。

# javascript - 使用 jquery/javascript 切换 div 的 css 属性

> ID：13901071
> 
> 赞同：0
> 
> 时间：2012-12-16T11:57:22.753
> 
> 标签：javascript, jquery, css

我正在尝试编写一个可以切换 div 的 CSS 属性的代码。基本上我正在尝试创建一个具有正常状态和活动状态的按钮。

它的正常颜色是蓝色，但是一旦单击它，它就会变成绿色。再次单击它，它会变回蓝色。

CSS：

```
 .lblue{
        -moz-border-radius: 3px;
        border-radius: 3px;
        box-shadow: 0 1px 2px #fff, /*bottom external highlight*/
          0 -1px 1px #666, /*top external shadow*/ 
          inset 0 -1px 1px rgba(0,0,0,0.5), /*bottom internal shadow*/ 
          inset 0 1px 1px rgba(255,255,255,0.8); /*top internal highlight*/
        font-size: 16pt;
        padding: 5px;
        margin: 5px;
        color: white;
        background: #4bc2d3; /* Old browsers */
        background: -moz-linear-gradient(top,  #4bc2d3 0%, #70d6e2 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4bc2d3), color-stop(100%,#70d6e2)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #4bc2d3 0%,#70d6e2 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #4bc2d3 0%,#70d6e2 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #4bc2d3 0%,#70d6e2 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #4bc2d3 0%,#70d6e2 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4bc2d3', endColorstr='#70d6e2',GradientType=0 ); /* IE6-9 */
        font-family: OpenSans-Semibold;
        float: left;
        }

        .lgreen{
            -moz-border-radius: 3px;
            border-radius: 3px;
            box-shadow: 0 1px 2px #fff, /*bottom external highlight*/
              0 -1px 1px #666, /*top external shadow*/ 
              inset 0 -1px 1px rgba(0,0,0,0.5), /*bottom internal shadow*/ 
              inset 0 1px 1px rgba(255,255,255,0.8); /*top internal highlight*/
            font-size: 16pt;
            padding: 5px;
            margin: 5px;
            color: white;
            background: #7ebb44; /* Old browsers */
            background: -moz-linear-gradient(top,  #7ebb44 0%, #a5d063 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#7ebb44), color-stop(100%,#a5d063)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  #7ebb44 0%,#a5d063 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  #7ebb44 0%,#a5d063 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  #7ebb44 0%,#a5d063 100%); /* IE10+ */
            background: linear-gradient(to bottom,  #7ebb44 0%,#a5d063 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7ebb44', endColorstr='#a5d063',GradientType=0 ); /* IE6-9 */
            font-family: OpenSans-Semibold;
            float: left;
            } 
```

HTML：

```
 <div class="lblue">Soul</div> 
```

JS：

```
 $('.lblue').click(function() {
          $('.lblue').toggle(function() {
            $('.lblue').addClass('lgreen');

          });
        }); 
```

我的代码的问题是，由于某种原因，当我单击按钮时，按钮就像滑出一样消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:01:07.700

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

Toggle 方法在每次调用时显示/隐藏元素。

```
$('.lblue').click(function() {
    $(this).toggleClass('lgreen');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T12:19:15.427

我不能同意其余的答案。尽管它们是正确的，但它们在语义上似乎并不正确，但元素的类将同时包含`lblue`和`lgreen`类名：

```
<div class="lblue lgreen">Soul</div>
            ^^^^^^^^^^^^-- this is bad 
```

它们将按照您的 CSS 中定义的类名的顺序来依赖。

避免将来出现问题，并对所见和 DOM 中的内容使用语义正确：

```
$(document).on("click", ".lblue, .lgreen", function(){
  $(this).toggleClass("lblue lgreen");
});​ 
```

如果所有元素的初始状态都是蓝色的，那么：

```
$(".lblue").click(function(){
  $(this).toggleClass("lblue lgreen");
});​ 
```

前者适用于动态添加的元素，后者不会。

[看看这个。](http://jsfiddle.net/VZ9Pw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:03:59.897

你用`.toggle()`错了。

```
$('.lblue').click(function() {
    $(this).toggleClass('lgreen');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T12:04:27.247

使用纯 JavaScript，您可以使用 classList 切换 [https://developer.mozilla.org/en-US/docs/DOM/element.classList](https://developer.mozilla.org/en-US/docs/DOM/element.classList)

```
// div is an object reference to a <div> element with class="foo bar"
div.classList.remove("foo");
div.classList.add("anotherclass");
// if visible is set remove it, otherwise add it
div.classList.toggle("visible");
alert(div.classList.contains("foo")); 
```

在您的情况下：（假设只修改一个元素；另请参阅 querySelectorAll 和 getElementsByClassName）

```
document.querySelector('.lblue').classList.toggle('lgreen'); 
```

由于它是相当新的功能，请参阅：[http](http://caniuse.com/classlist) ://caniuse.com/classlist以了解浏览器兼容性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T13:15:18.530

我想您可以检查颜色并执行事件。

例如。）

与您的情况一样：初始颜色=蓝色。变换颜色 = 绿色

```
$('button handler').click(function () {
  if($(this).css('background-color') == 'BLUE') { 
    $(this).css('background-color', 'GREEN'); 
  } else { 
    $(this).css('background-color', 'BLUE'); 
  }
}); 
```

只是我的猜测。我真的不知道你到底在寻找什么。

# regex - 正则表达式中的大写

> ID：13901072
> 
> 赞同：-1
> 
> 时间：2012-12-16T11:57:34.483
> 
> 标签：regex, perl, sublimetext2

我对正则表达式一无所知，但我需要将变量（$name）转换为大写。有人知道怎么做吗？

另外，学习正则表达式的好网站是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:09:47.570

TextPad 将允许您执行此操作。

例子：

```
test 
```

查找内容： ([^ ] *) (.* ) 替换为：\U\1\E \2

结果将是：

```
TEST 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:27:57.373

你可以试试

```
s/(\pL+)/\U$1/g 
```

捕获括号会找到字母，`\U` [转义序列](http://perldoc.perl.org/perlreref.html#ESCAPE-SEQUENCES)会将`uc`函数应用于`$1`. 修饰符将`/g`在整个字符串中重复匹配。

对于更通用的正则表达式，您可以尝试

```
s/(.*)/\U\1/g 
```

...它匹配所有字符，并且`\1`是旧式捕获序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:09:03.687

你真的需要使用正则表达式吗？如果不看一下 perl`tr///`运算符

# java - 每当执行应用程序时，它在 android 模拟器中显示为空白

> ID：13901089
> 
> 赞同：1
> 
> 时间：2012-12-16T12:00:56.443
> 
> 标签：java, android, eclipse, avd, android-logcat

下面我粘贴了应用程序的 java、xml 和 logcat 的副本。

## 这是我的java代码

* * *

```
package my.example.myproject;

import my.example.myproject.util.SystemUiHider;

import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;

/**
 * An example full-screen activity that shows and hides the system UI (i.e.
 * status bar and navigation/system bar) with user interaction.
 * 
 * @see SystemUiHider
 */
public class FullscreenActivity extends Activity {
    /**
     * Whether or not the system UI should be auto-hidden after
     * {@link #AUTO_HIDE_DELAY_MILLIS} milliseconds.
     */
    private static final boolean AUTO_HIDE = true;

    /**
     * If {@link #AUTO_HIDE} is set, the number of milliseconds to wait after
     * user interaction before hiding the system UI.
     */
    private static final int AUTO_HIDE_DELAY_MILLIS = 3000;

    /**
     * If set, will toggle the system UI visibility upon interaction. Otherwise,
     * will show the system UI visibility upon interaction.
     */
    private static final boolean TOGGLE_ON_CLICK = true;

    /**
     * The flags to pass to {@link SystemUiHider#getInstance}.
     */
    private static final int HIDER_FLAGS = SystemUiHider.FLAG_HIDE_NAVIGATION;

    /**
     * The instance of the {@link SystemUiHider} for this activity.
     */
    private SystemUiHider mSystemUiHider;
    Button iol,help,about;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fullscreen);
        final View controlsView = findViewById(R.id.fullscreen_content_controls);
        iol = (Button)findViewById(R.id.iolCalculation);
        help = (Button)findViewById(R.id.sHelp);
        about = (Button)findViewById(R.id.sAbout);
        Thread iolthread=new Thread(){
            public void run(){
                try{
                    iol.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                // TODO Auto-generated method stub
                                setContentView(R.layout.selection);
                            }
                    });
                    Intent iolIntent=new Intent(FullscreenActivity.this,Selection.class);
                    startActivity(iolIntent);
                }
                finally{
                    finish();
                }
            }
        };  
        iolthread.start();
        // Set up an instance of SystemUiHider to control the system UI for
        // this activity.
        mSystemUiHider = SystemUiHider.getInstance(this, controlsView,
                HIDER_FLAGS);
        mSystemUiHider.setup();
        mSystemUiHider
                .setOnVisibilityChangeListener(new SystemUiHider.OnVisibilityChangeListener() {
                    // Cached values.
                    int mControlsHeight;
                    int mShortAnimTime;

                    @Override
                    @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
                    public void onVisibilityChange(boolean visible) {
                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
                            // If the ViewPropertyAnimator API is available
                            // (Honeycomb MR2 and later), use it to animate the
                            // in-layout UI controls at the bottom of the
                            // screen.
                            if (mControlsHeight == 0) {
                                mControlsHeight = controlsView.getHeight();
                            }
                            if (mShortAnimTime == 0) {
                                mShortAnimTime = getResources().getInteger(
                                        android.R.integer.config_shortAnimTime);
                            }
                            controlsView
                                    .animate()
                                    .translationY(visible ? 0 : mControlsHeight)
                                    .setDuration(mShortAnimTime);
                        } else {
                            // If the ViewPropertyAnimator APIs aren't
                            // available, simply show or hide the in-layout UI
                            // controls.
                            controlsView.setVisibility(visible ? View.VISIBLE
                                    : View.GONE);
                        }

                        if (visible && AUTO_HIDE) {
                            // Schedule a hide().
                            delayedHide(AUTO_HIDE_DELAY_MILLIS);
                        }
                    }
                });

        // Set up the user interaction to manually show or hide the system UI.
        controlsView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if (TOGGLE_ON_CLICK) {
                    mSystemUiHider.toggle();
                } else {
                    mSystemUiHider.show();
                }
            }
        });

        // Upon interacting with UI controls, delay any scheduled hide()
        // operations to prevent the jarring behavior of controls going away
        // while interacting with the UI.

    }

    @Override
    protected void onPostCreate(Bundle savedInstanceState) {
        super.onPostCreate(savedInstanceState);

        // Trigger the initial hide() shortly after the activity has been
        // created, to briefly hint to the user that UI controls
        // are available.
        delayedHide(100);
    }

    /**
     * Touch listener to use for in-layout UI controls to delay hiding the
     * system UI. This is to prevent the jarring behavior of controls going away
     * while interacting with activity UI.
     */
    View.OnTouchListener mDelayHideTouchListener = new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if (AUTO_HIDE) {
                delayedHide(AUTO_HIDE_DELAY_MILLIS);
            }
            return false;
        }
    };

    Handler mHideHandler = new Handler();
    Runnable mHideRunnable = new Runnable() {
        @Override
        public void run() {
            mSystemUiHider.hide();
        }
    };

    /**
     * Schedules a call to hide() in [delay] milliseconds, canceling any
     * previously scheduled calls.
     */
    private void delayedHide(int delayMillis) {
        mHideHandler.removeCallbacks(mHideRunnable);
        mHideHandler.postDelayed(mHideRunnable, delayMillis);
    }
} 
```

* * *

## XML

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black"
    tools:context=".FullscreenActivity" 
    android:id="@+id/frame_layout">

        <LinearLayout
            android:id="@+id/fullscreen_content_controls"
            style="?buttonBarStyle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center_horizontal"
            android:background="@color/black_overlay"
            android:orientation="horizontal"
            tools:ignore="UselessParent" >
        </LinearLayout>

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:layout_marginLeft="45dp"
            android:layout_marginTop="75dp"
            android:background="@color/black"
            android:paddingLeft="20dp"
            android:id="@+id/iolCalculation"
            android:text="@string/Button"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" />

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:layout_marginLeft="45dp"
            android:id="@+id/sHelp"
            android:layout_marginTop="139dp"
            android:background="@color/Black"
            android:gravity="center"
            android:paddingLeft="10dp"
            android:text="@string/Button1"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" />

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:id="@+id/sAbout"
            android:layout_marginLeft="45dp"
            android:layout_marginTop="203dp"
            android:background="@color/Black"
            android:paddingLeft="10dp"
            android:text="@string/Button2"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" >

        </Button>
</FrameLayout> 
```

* * *

## 日志猫

```
12-16 10:48:26.975: E/Trace(767): error opening trace file: No such file or directory (2)
12-16 10:51:38.199: E/AndroidRuntime(767): FATAL EXCEPTION: main
12-16 10:51:38.199: E/AndroidRuntime(767): java.lang.NullPointerException
12-16 10:51:38.199: E/AndroidRuntime(767):  at com.android.internal.widget.ActionBarView$3.onClick(ActionBarView.java:168)
12-16 10:51:38.199: E/AndroidRuntime(767):  at android.view.View.performClick(View.java:4202)
12-16 10:51:38.199: E/AndroidRuntime(767):  at android.view.View$PerformClick.run(View.java:17340)
12-16 10:51:38.199: E/AndroidRuntime(767):  at android.os.Handler.handleCallback(Handler.java:725)
12-16 10:51:38.199: E/AndroidRuntime(767):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-16 10:51:38.199: E/AndroidRuntime(767):  at android.os.Looper.loop(Looper.java:137)
12-16 10:51:38.199: E/AndroidRuntime(767):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-16 10:51:38.199: E/AndroidRuntime(767):  at java.lang.reflect.Method.invokeNative(Native Method)
12-16 10:51:38.199: E/AndroidRuntime(767):  at java.lang.reflect.Method.invoke(Method.java:511)
12-16 10:51:38.199: E/AndroidRuntime(767):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-16 10:51:38.199: E/AndroidRuntime(767):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-16 10:51:38.199: E/AndroidRuntime(767):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

**我在stackoverflow中尝试了所有可能的解决方案，但徒劳无功。帮助我。我认为xml到java显示内容主要存在问题。我还需要为xml中的每个布局输入id以及java代码如何检测要显示的布局**

**这是我选择的java代码和xml**

```
 package com.example.iolcalci;

import android.app.Activity;
import android.os.Bundle;

public class Selection extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selective);

    }

} 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/formulae"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:layout_marginRight="50dp"
        android:background="@color/LightSkyBlue"
        android:prompt="@string/prompt"
        android:entries="@array/formulas" />

    <TextView
        android:id="@+id/k2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/k1"
        android:layout_below="@+id/k1"
        android:layout_marginTop="38dp"
        android:text="@string/K2"
        android:textColor="@color/White"
        android:textSize="25sp" />

    <TextView
        android:id="@+id/al_const"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/al"
        android:layout_below="@+id/al"
        android:layout_marginTop="44dp"
        android:text="@string/Rx"
        android:textColor="@color/White"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/al"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/k2"
        android:layout_below="@+id/k2"
        android:layout_marginTop="38dp"
        android:text="@string/AL"
        android:textColor="@color/White"
        android:textSize="25sp" />

    <EditText
        android:id="@+id/k2_editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/al"
        android:layout_alignRight="@+id/al_editText"
        android:layout_alignTop="@+id/k2"
        android:layout_marginLeft="120dp"
        android:background="@color/black"
        android:ems="10"
        android:inputType="numberDecimal"
        android:textColorLink="@color/white" />

    <EditText
        android:id="@+id/al_editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/formulae"
        android:layout_alignTop="@+id/al"
        android:layout_marginLeft="120dp"
        android:ems="10"
        android:inputType="numberDecimal" />

    <EditText
        android:id="@+id/al_const_editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/al_const"
        android:layout_alignRight="@+id/al_editText"
        android:layout_marginLeft="120dp"
        android:ems="10"
        android:inputType="numberDecimal" />

    <Button
        android:id="@+id/result"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:background="@color/LightSkyBlue"
        android:text="@string/Result" />

    <EditText
        android:id="@+id/k1_editText"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:layout_alignLeft="@+id/k2_editText"
        android:layout_alignRight="@+id/formulae"
        android:layout_below="@+id/formulae"
        android:layout_marginTop="30dp"
        android:background="@color/black"
        android:ems="10"
        android:inputType="numberDecimal"
        android:textColorLink="@color/White" />

    <TextView
        android:id="@+id/k1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/k1_editText"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="27dp"
        android:text="@string/K1"
        android:textColor="@color/white"
        android:textSize="25sp" />

</RelativeLayout> 
```

新的 LOGCAT

* * *

```
 12-21 10:44:50.419: W/Trace(766): Unexpected value from nativeGetEnabledTags: 0
12-21 10:44:50.573: W/Trace(766): Unexpected value from nativeGetEnabledTags: 0
12-21 10:44:50.573: W/Trace(766): Unexpected value from nativeGetEnabledTags: 0
12-21 10:44:50.923: D/AndroidRuntime(766): Shutting down VM
12-21 10:44:50.923: W/dalvikvm(766): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-21 10:44:50.933: E/AndroidRuntime(766): FATAL EXCEPTION: main
12-21 10:44:50.933: E/AndroidRuntime(766): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.MainActivity}: java.lang.NullPointerException
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.os.Looper.loop(Looper.java:137)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-21 10:44:50.933: E/AndroidRuntime(766):  at java.lang.reflect.Method.invokeNative(Native Method)
12-21 10:44:50.933: E/AndroidRuntime(766):  at java.lang.reflect.Method.invoke(Method.java:511)
12-21 10:44:50.933: E/AndroidRuntime(766):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-21 10:44:50.933: E/AndroidRuntime(766):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-21 10:44:50.933: E/AndroidRuntime(766):  at dalvik.system.NativeStart.main(Native Method)
12-21 10:44:50.933: E/AndroidRuntime(766): Caused by: java.lang.NullPointerException
12-21 10:44:50.933: E/AndroidRuntime(766):  at com.example.iolcalci.MainActivity.onCreate(MainActivity.java:23)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.app.Activity.performCreate(Activity.java:5104)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-21 10:44:50.933: E/AndroidRuntime(766):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-21 10:44:50.933: E/AndroidRuntime(766):  ... 11 more 
```

* * *

**清单文件**

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.iolcalci"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.iolcalci.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="Selection"
            android:exported="false"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.example.iolcalci.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
          </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:43:54.893

从您的代码来看，我将推测这一行导致错误：

```
setContentView(R.id.selection); 
```

无需更改从中调用“选择”活动的活动的 contentView。你应该阅读意图。我假设单击按钮时，您希望弹出新活动及其内容。为此，请执行以下操作：

```
try{
                iol.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                           Intent iolIntent=new Intent(FullscreenActivity.this,Selection.class);
                startActivity(iolIntent);
                        }
                });
            } 
```

还将按钮的布局宽度和布局高度设置为“wrap_content”。确定的测量不会很好地工作，因为可能有许多分辨率。

```
android:layout_height="wrap_content"
android:layout_width="wrap_content" 
```

如果出现更多错误，请发布新的 logcat。

我在您的 selection.java 中找到了这个：

```
setContentView(R.layout.selective); 
```

这意味着您的 res/layout/ 文件夹中应该有一个selective.xml 文件。

这个selective.xml 文件应该包含一个EditText 的定义。例子，

```
<EditText
    android:id="@+id/k1_editText"
    android:layout_width="wrap_content"
    android:layout_height="37dp"
    android:layout_alignLeft="@+id/k2_editText"
    android:layout_alignRight="@+id/formulae"
    android:layout_below="@+id/formulae"
    android:layout_marginTop="30dp"
    android:background="@color/black"
    android:ems="10"
    android:inputType="numberDecimal"
    android:textColorLink="@color/White" /> 
```

您需要使用以下代码在活动文件中引用它：

```
EditText ed=new EditText findViewById(R.id.k2_editText); 
```

现在将显示 EditText 字段。

如果您想让您的 EditText 对象全局化，请在类中声明它，然后在设置内容视图后对其进行初始化。像这样，

```
public class Selection extends Activity {
EditText ed;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.selective);
    EditText ed=new EditText findViewById(R.id.k2_editText);
} 
```

确保在创建活动和设置内容视图之后始终初始化小部件对象，否则编译器将不得不初始化尚未引用的内容。布局文件只有在设置内容视图后才会被引用。只有在设置布局文件之后，您才能将对象初始化为布局文件中存在的任何内容。

如果您喜欢答案，请投票。

# javascript - 第三方视频集成到 Web 应用程序

> ID：13901096
> 
> 赞同：1
> 
> 时间：2012-12-16T12:01:26.810
> 
> 标签：javascript, web-applications, youtube-api, vimeo, flickr

我需要将**第三方**视频 API 解决方案集成到我正在使用前端的 JavaScript 和后端的 Java 构建的 Web 应用程序中。使用 API，我将需要以下内容：

*   **将视频上传**到第三方服务
*   视频上传后，API 应该**回调**我的应用并传递视频**ID**或**URL**（**重要！**）
*   使用提供的 URL 显示视频

*我已经尝试过 YouTube API，但似乎每个应用都将视频上传到一个播放列表，然后该应用可以查询提交到其播放列表的所有视频。API 不会在上传后立即为我的应用提供视频 URL，因此我无法确定哪个**本地用户**上传了哪个 YouTube 视频。*

**是否有满足上述所有要求的第三方视频服务提供商？**

（*Vimeo、Metacafe、Dailymotion、Break.com、Flickr 视频？*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:25:18.933

YouTube 不提供上传回调，但您可以使用轮询来验证上传视频的状态是否不再是“处理中”

[https://developers.google.com/youtube/2.0/developers_guide_protocol_checking_video_status](https://developers.google.com/youtube/2.0/developers_guide_protocol_checking_video_status)

要识别本地用户，您可以使用“开发人员标签”：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_uploading_videos](https://developers.google.com/youtube/2.0/developers_guide_protocol_uploading_videos)

*当您上传视频时，您可以将该视频与 YouTube 的一个视频类别相关联。您还可以将视频与用于标识视频的其他关键字或开发者标签相关联。通过使用开发者标签，您可以识别通过您的网站甚至通过您网站的特定区域上传的所有视频。YouTube 不会向 YouTube 用户显示开发者标签；但是，您可以检索或更新与特定开发者标签匹配的视频。*

然后，您可以使用按开发者标签搜索来检索视频 id 和视频 url

# c# - 为什么使用 Tasks.Wait() 回滚事件和使用取消令牌不

> ID：13901097
> 
> 赞同：1
> 
> 时间：2012-12-16T12:01:41.273
> 
> 标签：c#, .net, task-parallel-library, cancellation

所以我不明白的是以下应用程序中发生了什么：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("TaskVersion:");
        Task t = new Task(waitCB, "something");
        t.Wait(1000);

        Console.WriteLine("TaskWithCancelationTokenVersion:");
        CancellationTokenSource cts = new CancellationTokenSource();
        Task tct = new Task(waitCB, "something", cts.Token);
        tct.Start();
        Thread.Sleep(1000);
        cts.Cancel();

        Console.WriteLine("ThreadVersion:");
        Thread th = new Thread(waitCB);
        th.Start("something");
        Thread.Sleep(1000);
        th.Abort();
    }

    static void waitCB(object ob)
    {
        Console.WriteLine("Object is " + ob);
        Thread.Sleep(10000);
    }
} 
```

在第一个示例中，我认为程序应该执行该行：`Console.WriteLine("Object is " + ob);`然后当它中止时`t.Wait(1000)`没有任何行。

程序的输出是：

```
TaskVersion:
TaskWithCancelationTokenVersion:
Object is something
ThreadVersion:
Object is something 
```

所以`task.Wait()`这只是一种突然关闭线程并回滚它所做的事情的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:25:14.563

我认为您的问题与取消无关，或者`Wait()`您只是忘记`Start()`了第一个`Task`。

# matplotlib - 使用 matplotlib 底图绘制球体网格

> ID：13901106
> 
> 赞同：2
> 
> 时间：2012-12-16T12:02:59.210
> 
> 标签：matplotlib, map-projections, matplotlib-basemap

我想在正交投影上绘制一个覆盖所有球体的网格。问题是投影外的单元格未正确绘制。[正如这里](https://stackoverflow.com/questions/4451451/plotting-curved-line-in-python-basemap)`drawgreatcircles`所指出的那样，这发生了。

我也尝试过使用[这里](https://stackoverflow.com/questions/12251189/how-to-draw-rectangles-on-a-basemap)描述的多边形，但同样的问题。

最后，我编写了一个基于[Wikipedia](http://en.wikipedia.org/wiki/Orthographic_projection_(cartography)#Mathematics)的自定义检查。这个想法是针对每个段的每个点，我们检查`cos c`（参见维基百科）并且如果余弦为负数则不绘制它。

我的问题是：我们可以用底图自己的功能进行这种检查吗？该策略不适用于其他预测。

另外，为什么 Basemap 中不包含这种检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T20:26:50.163

感谢您的示例，我获取了数据并用 cartopy 绘制了它。创建绘图需要进行以下更改：

```
import cartopy.crs as ccrs
ax =plt.axes(projection=ccrs.Orthographic())
plt.pcolormesh(lons, lats,val, edgecolors='k', 
               linewidths=1, transform=ccrs.PlateCarree())

ax.coastlines()
ax.gridlines()

plt.show() 
```

![使用 cartopy 输出](../Images/28786b20d9cfc63e04eac0de9a494a66.png)

这是使用 pcolormesh 所以很快（虽然你的例子在我的机器上并没有那么慢）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:57:04.363

这是使用 pcolor 的解决方案：

```
import pylab as plt
from mpl_toolkits.basemap import Basemap
import numpy as np

nb_lat2 = 20
nb_lat = 2*nb_lat2
nb_lon = 3*(2*(nb_lat+1) - 1)
lats = np.zeros((2*nb_lat, nb_lon))
lons = np.zeros((2*nb_lat, nb_lon))
val = np.zeros((2*nb_lat, nb_lon))
dlat = 90./nb_lat2
for i in range(nb_lat):

  nb_lon = 2*(i+1)-1
  if ((i+1) > nb_lat2):
    nb_lon = 2*(nb_lat - i)-1

  dlon = 120./nb_lon
  lats[2*i][:] = 90 - i*dlat
  lats[2*i+1][:] = 90 - (i+1)*dlat
  for j in range(nb_lon):
    lons[2*i][j] = j*dlon
    lons[2*i+1][j] = j*dlon

    for k in range(1,3):
      lons[2*i][j + k*nb_lon] = j*dlon + 120.*k
      lons[2*i+1][j + k*nb_lon] = j*dlon + 120.*k

    lons[2*i][3*nb_lon:] = nb_lon*dlon + 240.
    lons[2*i+1][3*nb_lon:] = nb_lon*dlon + 240.

lons = lons - 180
val = lats + lons
# Crash
##m = Basemap(projection='robin',lon_0=0,resolution=None)

#m = Basemap(projection='mill',lon_0=0)
m = Basemap(projection='ortho', lat_0=0,lon_0=0)
x, y = m(lons, lats)
m.pcolor(x,y,val, edgecolors='k', linewidths=1)

m.drawcoastlines()
m.drawparallels(np.arange(-90.,91.,30.))
m.drawmeridians(np.arange(-180.,181.,60.))

plt.show() 
```

这正是我想要的：绘制矩形并用一种颜色填充它们。但它非常慢（太慢了）。许多单元格未使用：在纬度线的末端，我们将未使用单元格的宽度设置为 0。

另一个问题是一些预测崩溃（例如 Robin）。

# git - 是什么导致这个提交仍然被引用？

> ID：13901110
> 
> 赞同：6
> 
> 时间：2012-12-16T12:04:02.273
> 
> 标签：git

我想从我的仓库中删除一个巨大的二进制提交。

```
> git log --all -- '*.tiff'
commit 05f03aba18164c736182e612181f99ce04e38845
... 
```

它不是分支的一部分...

```
> git branch --all --contains 05f03aba
> (nothing) 
```

...，它不是由标签指向的，它不能被 reflog 引用。（我已经用 清除了它`git reflog expire --expire=now --all`）

然而，提交以某种方式被引用，因此没有被修剪：

```
> git fsck --unreachable
> (nothing) 
```

如何找出导致提交被引用的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T12:37:31.383

如果您的提交由 到达`git log`，您可以运行`git log --source`以显示您的提交是从哪里到达的。

它可能被以下文件的备份引用`git filter-branch`——有关更多详细信息，请参阅此问题：[在 filter-branch --tree-filter 之后从 git repo 中删除 refs/original/heads/master？](https://stackoverflow.com/questions/7654822/remove-refs-original-heads-master-from-git-repo-after-filter-branch-tree-filte)

# java - JavaFx 2.2 可编辑组合框左箭头键

> ID：13901113
> 
> 赞同：1
> 
> 时间：2012-12-16T12:04:44.537
> 
> 标签：java, javafx-2, javafx

可编辑的 JavaFx ComboBoxes 运行良好，但左箭头键被解释为 Shift-TAB。

![在此处输入图像描述](../Images/242bf787815e0e0b97ff6ddc3d62d8e0.png)

如您所见，焦点设置在 ComboBox 上，插入点位于其字段的中间。按左箭头键将焦点移动到第一个控件，按右箭头键时图像左侧的 TextField 像在任何 TextField 中一样将插入的字符向右移动一个字符。

**如何捕获事件以在可编辑的 ComboBox 中重现 TextField 的行为？**

我试图通过[ComboBox.setOnKeyPressed()](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setOnKeyPressed%28javafx.event.EventHandler%29)和[event.consume()](http://docs.oracle.com/javafx/2/api/javafx/event/Event.html#consume%28%29)来捕捉关键事件，但没有成功。

这是重现此意外行为的最小程序：

```
@Override
public void start( Stage stage ) {
   stage.setTitle( "Editable ComboBox and left-arrow key" );

   ComboBox<String> cmbBx = new ComboBox<>();
   cmbBx.getItems().addAll( "A", "B", "C", "D", "E" );
   cmbBx.setMinWidth( 150 );
   cmbBx.setEditable( true );
   cmbBx.setOnKeyPressed( new EventHandler<KeyEvent>(){
      @Override public void handle( KeyEvent event ) {
         System.err.println( event );
         event.consume(); }}); // Consuming left arrow key is inoperant

   GridPane grid = new GridPane();
   grid.setVgap( 4 );
   grid.setHgap( 4 );
   grid.setPadding( new Insets( 4, 4, 4, 4 ));

   grid.add( new Label( "TextField:" ), 0, 0 );
   grid.add( new TextField()          , 1, 0 );
   grid.add( new Label( "ComboBox:" ) , 2, 0 );
   grid.add( cmbBx                    , 3, 0 );

   stage.setScene( new Scene( grid ));
   stage.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:51:02.297

答案是围绕键绑定，如此 SO 帖子[“javafx 中的键绑定”中](https://stackoverflow.com/questions/10440099/keybindings-in-javafx-2)所示。

此代码捕获 LEFT 事件：

```
 cmbBx.addEventFilter( KeyEvent.ANY, new EventHandler< KeyEvent >() {
     @Override public void handle(KeyEvent event ) {
        if( event.getCode() == KeyCode.LEFT ) {
           event.consume(); }}}); 
```

这就是全部，但我很惊讶，因为左箭头键按预期移动插入点，只删除了不希望的行为。为什么？

# c++ - 如何抑制来自 ON_BLOCK_EXIT 的警告（ScopeGuard 的一部分）

> ID：13901116
> 
> 赞同：1
> 
> 时间：2012-12-16T12:05:36.690
> 
> 标签：c++, visual-studio-2010, visual-c++

`ON_BLOCK_EXIT`是[ScopeGuard](http://www.drdobbs.com/cpp/generic-change-the-way-you-write-excepti/184403758 "Generic<Programming>：永远改变编写异常安全代码的方式") [实现](http://loki-lib.cvs.sourceforge.net/loki-lib/loki/include/loki/ScopeGuard.h?view=markup "ScopeGuard 实现")提供的实用宏。它定义了一个本地对象，唯一的原因是当它超出范围时执行其用户提供的析构函数。它被定义为：

```
#define CONCATENATE_DIRECT(s1, s2) s1##s2
#define CONCATENATE(s1, s2) CONCATENATE_DIRECT(s1, s2)
#define ANONYMOUS_VARIABLE(str) CONCATENATE(str, __LINE__)

#define ON_BLOCK_EXIT ScopeGuard ANONYMOUS_VARIABLE(scopeGuard) = MakeGuard 
```

并且可以像这样使用：

```
void foo() {
    HANDLE hFile = CreateFile( ... );
    ON_BLOCK_EXIT( CloseHandle, hFile );
    // more...
    // ... code...
    // ... following
} // warning C4189 
```

使用 Visual Studio 2010 编译时，上面的代码会生成以下`warning C4189: 'scopeGuard3' : local variable is initialized but not referenced`.

`#pragma warning( suppress : 4189 )`可用于暂时禁用警告。但是，这有两个问题：1.) 它不能放在导致警告的语句旁边，但必须放在结束范围的行的正上方。2.) 作为对此的推论，它将掩盖当前范围产生的**所有警告 4189。**

使用 Visual Studio 2010 是否有任何方法可以禁用仅由使用创建的那些对象产生的特定警告`ON_BLOCK_EXIT`（最好不必更改调用站点，类似于 GCC 的`__attribute__((unused))`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:31:44.810

我最终寻求的解决方案适用于 Visual Studio 2005 或更高版本：

```
#define ON_BLOCK_EXIT( ... ) ScopeGuard ANONYMOUS_VARIABLE(scopeGuard) = \
                                 MakeGuard( __VA_ARGS__ ); \
                                 (void)ANONYMOUS_VARIABLE(scopeGuard) 
```

原始宏没有扩展为完整的表达式，因此无法附加任何工具来指示编译器不发出警告。使用可变参数宏提供了该选项。

# function - Haskell 对什么不满意？它在抱怨我的类型签名

> ID：13901118
> 
> 赞同：1
> 
> 时间：2012-12-16T12:05:47.933
> 
> 标签：function, haskell, types, constructor

我的 Haskell 有另一个问题。我从一个问题中得到了以下数据构造函数，

```
type Point = (Int, Int)

data Points = Lines Int Int
            | Columns Int Int
            | Union Points Points
            | Intersection Points Points 
```

它是关于从 (0,0) 和 (x,y) 开始的网格上的点，x 作为与原点的水平距离，y 作为与原点的垂直距离。

我试图从中定义一个函数“Lines”，给定 Lines xy 将评估网格上垂直距离为 x ~ y 的所有点。例如

```
> Lines 2 4 
(0,2)(1,2)(2,2)(3,2)....
(0,3)(1,3)(2,3)(3,3)....
(0,4)(1,4)(2,4)(3,4).... 
```

等等。那么我所做的是，

```
Lines :: Int -> Int -> Points
Lines lo hi = [ (_, y) | lo <= y && y <= hi ] 
```

但哈斯克尔抱怨说；

> 无效的类型签名 Lines :: Int -> Int -> Points。
> 应该是以下形式::

这是什么意思？“Points”已经在上面定义了......肯定“Int”“Points”被视为“类型”吗？我没有看到问题，为什么 Haskell 会感到困惑？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T12:15:12.107

1.  函数不能以大写字母开头。所以你需要使用`lines`，而不是`Lines`。这可能是您看到的错误消息的来源。

2.  该语法`[ ... ]`用于创建结果*列表*，但您的类型签名声称该函数返回`Points`，这不是任何类型的列表。如果您打算返回一个`Point`值列表，那就是`[Point]`类型。

3.  我实际上不知道您的实施`Lines`甚至试图做什么。语法对我来说毫无意义。

* * *

好的，所以考虑到您的意见...

*   你可以生成一个介于`lo`和之间`hi`的数字列表`[lo .. hi]`。

*   您说“任意”值可以进入 X，但您需要准确确定这意味着什么。您的示例似乎建议您永远想要从 0 向上的数字。生成该列表的方法是`[0 .. ]`. （不给出上限会使列表无穷无尽。）

*   您的示例建议您需要一个列表列表，内部列表包含所有具有相同 Y 坐标的点与所有可能的 X 坐标配对。

因此，这是一种可能的方法：

```
type Point = (Int, Int)

lines :: Int -> Int -> [[Point]]
lines lo hi = [ [(x,y) | x <- [0..]] | y <- [lo .. hi] ] 
```

这可能有点难以阅读，所有这些开始和结束括号，所以也许我可以让它稍微干净一点：

```
lines lo hi =
  let
    xs = [0..]
    ys = [lo .. hi]
  in [    [(x,y) | x <- xs]    | y <- ys] 
```

如果你运行这个，你会得到

```
> lines 2 4
[[(0,2), (1,2), (2,2), ...],
[(0,3), (1,3), (2,3), ...],
[(0,4), (1,4), (2,4), ...]] 
```

换句话说，外部列表有 3 个元素（Y=2、Y=3 和 Y=4），并且三个内部列表中的每一个都是无限长的（每个可能的正 X 值）。

# opengl - 向量乘法如何在着色器语言中起作用？

> ID：13901119
> 
> 赞同：32
> 
> 时间：2012-12-16T12:05:48.010
> 
> 标签：opengl

例如`gl_FragColor = v1 * v2`，我无法真正了解它是如何相乘的，似乎参考文献给出了向量乘法矩阵的解释。
ps：`v1`和的类型`v2`都是`vec4`。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-16T12:11:55.123

该`*`运算符[对](http://en.wikibooks.org/wiki/GLSL_Programming/Vector_and_Matrix_Operations#Operators)像`vec4`.

```
vec4 a = vec4(1.0, 2.0, 3.0, 4.0);
vec4 b = vec4(0.1, 0.2, 0.3, 0.4);
vec4 c = a * b; // vec4(0.1, 0.4, 0.9, 1.6) 
```

[GLSL 语言规范](http://www.opengl.org/registry/doc/GLSLangSpec.4.30.6.pdf)在第5.10节*向量和矩阵运算*下说：

> 除了少数例外，操作是组件式的。通常，当操作符对向量或矩阵进行操作时，它以分量方式独立地对向量或矩阵的每个分量进行操作。[...] 例外是矩阵乘以向量、向量乘以矩阵和矩阵乘以矩阵。这些不按分量操作，而是执行正确的线性代数乘法。

# java - 为 Android 应用程序构建服务器

> ID：13901126
> 
> 赞同：0
> 
> 时间：2012-12-16T12:06:46.760
> 
> 标签：java, android

我检查了[这个](https://stackoverflow.com/questions/3300089/is-it-possible-to-remotely-call-methods-on-another-computer-through-aidl-androi)线程，它实际上在寻找与我相同的东西——但他没有得到回答。我正在寻找的是一种在服务器（作为 java 应用程序）和客户端（作为 android 应用程序）之间连接的方法 - 客户端将能够调用服务器中的远程方法并获取远程对象从服务器。（不管它是否使用 AIDL..）

我与 RMI 合作过，它很好 - 但它无法在 Android 上使用，所以我必须找到另一种方法。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:16:03.393

两种可能的途径：

1.  在服务器上使用 servlet 并通过 GET/POST 传递数据
2.  JAX - 通过 SOAP 请求传递数据

我敢肯定还有其他人。

# node.js - 猫鼬模式忽略值

> ID：13901127
> 
> 赞同：2
> 
> 时间：2012-12-16T12:06:49.600
> 
> 标签：node.js, mongodb, azure, mongoose

我要放弃了。

我有一个这样定义的架构：

```
var UserSchema = new Schema({
    userNick      : { type: String, required: true, index: { unique: true, sparse: true } }
  , userEmail     : { type: String, required: true, index: { unique: true, sparse: true } }
  , userPass      : { type: String, required: true }
  , userRole      : { type: String, default: 4 }
  , userFirstname : String
  , userLastname  : String
  , userImage       : String
  , userBday        : { type: Date, required: true }
  , userCreated   : { type: Date, default: Date.now }
});
var userModel = mongoose.model('UserModel', UserSchema); 
```

我觉得没什么特别的。但是当我尝试保存新用户时，会忽略 userRole 和 userBday。我使用输入 type=date 作为生日并像这样拆分值：

```
var bdayReformat = data.BDay.split('-');
var bDay = new Date(bdayReformat[0], bdayReformat[1]-1, bdayReformat[2]); 
```

这将返回：1973 年 4 月 5 日星期四 00:00:00 GMT+0100 (CEST)

我声明：

```
account = new userModel({
    userNick      : data.Nickname
  , userEmail     : data.Email
  , userPass      : data.Password
  , userFirstname : data.Firstname
  , userLastname  : data.Lastname
  , userImage     : 'media/noimage.png'
  , userBday      : bDay
}); 
```

然后我正在保存：这是结果：

```
{ userNick: 'XXXXXXX',
  userEmail: 'XXX@XXXXX.de',
  userPass: 'XXXXXXX',
  userImage: 'media/noimage.png',
  _id: 50cdb5d77fbdc88013000001,
  userCreated: Sun Dec 16 2012 12:51:51 GMT+0100 (CET) } 
```

我不知道为什么 userRole 或 bDay 没有保存。我是服务器端编程的初学者，也是 mongodb 和 mongoose 的绝对初学者。

感谢您帮助我使用 Nodejs v0.8.15 mongoose 3.5 存储在 azurecloud 中，并提供免费的 mongolab-db

IDE（如果你有小费）是 Webstorm 5，我在 MAC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:29:16.420

自答。这是双重代码的问题。

# gwt - GWT - 日期验证

> ID：13901128
> 
> 赞同：0
> 
> 时间：2012-12-16T12:06:52.993
> 
> 标签：gwt

谁能告诉我如何在 GWT 中进行日期验证。我将日期作为字符串传递。应将其转换为日期格式，并对其格式进行验证。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T14:52:53.140

```
import com.google.gwt.i18n.client.DateTimeFormat;

...
DateTimeFormat myDateTimeFormat = DateTimeFormat.getFormat(...);
Date date = myDateTimeFormat.parseStrict(dateString); 
```

`parseStrict()`为无效的日期字符串引发 IllegalArgumentException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:57:36.143

您可以对 String 使用[GWT Bean Validation](http://code.google.com/p/google-web-toolkit/wiki/BeanValidation)模式匹配表达式：

```
@Pattern( regexp = "some javascript regular expression" ) 
private String dateStr; 
```

或者当你有约会的时候：

```
@DateTimeFormat(pattern = "dd.MM.yy")
private Date myStartDate; 
```

我不使用它，但您可以在 gwt-2.5.0 示例目录中看到完整的示例。

玩得开心。

# c# - 动态数据显示/获取用户输入的 x 坐标

> ID：13901131
> 
> 赞同：2
> 
> 时间：2012-12-16T12:07:19.677
> 
> 标签：c#, wpf, dynamic-data-display

我的程序基本上是关于分析视频的。主要部分是绘制图表，在 y 轴上显示每帧的 (fe) 亮度，在 x 轴上显示每个帧数。因为该程序是用 C# 编写并使用 WPF，所以 D³ 是用于绘图的方法。

现在用户可能会在图中看到一个峰值信号，并希望查看该单帧以了解为什么它如此明亮（它可能只是自然的，或者是编码伪影）。

我的问题来了：用户单击峰值所在的图表的最直观方式，它将视频预览（其他 GUI 元素）直接跳转到该帧。所以我需要用户点击图表的x坐标（=帧号）。

可以手动分析鼠标输入事件，但这需要做很多工作（因为每个视频的 x 轴不同，并且可以调整整个图表的大小，所以绝对坐标是不行的）。但也许 D³ 已经实现了类似的东西。我搜索了纪录片，但没有发现任何有用的东西。唯一的信息是使用“DraggablePoint”，但这就是路径变冷的地方。你们中有人知道如何在不做太多工作的情况下获得 x 坐标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:36:02.240

这当然是可能的！我过去的做法是将 CursorCoordinateGraph 对象添加到我的绘图仪子级中，它会自动跟踪图表上相对于数据的鼠标位置。您可以关闭 CursorCoordinateGraph 的视觉功能并将其仅用于跟踪。这是它的样子：

```
CursorCoordinateGraph mouseTrack;
plotter.Children.Add(mouseTrack);
mouseTrack.ShowHorizontalLine = false;
mouseTrack.ShowVerticalLine = false; 
```

您的鼠标单击事件如下所示：

```
private void plotter_MouseLeftButtonDown(object sender, MouseButtonEventArgs e) 
{
    Point mousePos = mouseTrack.Position;
    var transform = plotter.Viewport.Transform;
    Point mousePosInData = mousePos.ScreenToData(transform);
    double xValue = mousePosInData.X;
} 
```

然后，您可以使用 xValue 并对其进行操作，但您想达到您想要的效果。

# android - 使用 Asp.net 推送通知 (GCM)（未收到通知）（浏览器密钥）

> ID：13901132
> 
> 赞同：0
> 
> 时间：2012-12-16T12:07:22.610
> 
> 标签：android, asp.net, push-notification, google-cloud-messaging

我在 Google Cloud Messaging (GCM) 中创建了一个应用程序，他们给了我：

1.  **发件人ID**
2.  **API-KEY**

我已经创建了一个 Android 应用程序，客户可以使用它来将他们的设备注册
到云中......（没关系）。

现在，如果任何使用我的 Android 应用程序的用户更改数据中的某些内容 (SQL SERVER DATABASE)，我想向其余设备推送通知。

我发现这个代码...

```
 private string SendGCMNotification(string apiKey, string postData, string postDataContentType = "application/json")
         {
             ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(ValidateServerCertificate);

             //
             //  MESSAGE CONTENT
             byte[] byteArray = Encoding.UTF8.GetBytes(postData);

             //
             //  CREATE REQUEST
             HttpWebRequest Request = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");
             Request.Method = "POST";
             Request.KeepAlive = false;
             Request.ContentType = postDataContentType;
             Request.Headers.Add(string.Format("Authorization: key={0}", apiKey));
             Request.ContentLength = byteArray.Length;

             Stream dataStream = Request.GetRequestStream();
             dataStream.Write(byteArray, 0, byteArray.Length);
             dataStream.Close();

             //
             //  SEND MESSAGE
             try
             {
                 WebResponse Response = Request.GetResponse();
                 HttpStatusCode ResponseCode = ((HttpWebResponse)Response).StatusCode;
                 if (ResponseCode.Equals(HttpStatusCode.Unauthorized) || ResponseCode.Equals(HttpStatusCode.Forbidden))
                 {
                     var text = "Unauthorized - need new token";
                 }
                 else if (!ResponseCode.Equals(HttpStatusCode.OK))
                 {
                     var text = "Response from web service isn't OK";
                 }

                 StreamReader Reader = new StreamReader(Response.GetResponseStream());
                 string responseLine = Reader.ReadToEnd();
                 Reader.Close();

                 return responseLine;
             }
             catch (Exception e)
             {
             }
             return "error";
         }

         public static bool ValidateServerCertificate(
                                                     object sender,
                                                     X509Certificate certificate,
                                                     X509Chain chain,
                                                     SslPolicyErrors sslPolicyErrors)
         {
             return true;
         } 
```

但是当我需要执行方法时（它要求我给它一个参数`Browser-APIKey`）

```
 string deviceId = "APA91bHsQUsnYLHSFkmmJE8AgXEU--_nqPOJ5q2sfZIpCI1ZiJnmi2-IrZCqwummfJB94uVmqgT-ZWkyeIrICU8GpPvAOdmUfiVtYRmmA7bVAaKPuerJUcRUisveOe5Jp36-3fUK7VlDvwcme0SaJiwJU9B1y1EkF6YTQ00g";
    string message = "some test message";
    string tickerText = "example test GCM";
    string contentTitle = "content title GCM";
    string postData =
    "{ \"registration_ids\": [ \"" + deviceId + "\" ], " +
      "\"data\": {\"tickerText\":\"" + tickerText + "\", " +
                 "\"contentTitle\":\"" + contentTitle + "\", " +
                 "\"message\": \"" + message + "\"}}"; 
```

首先 --> 这种方法能帮助我正确发送推送通知吗？还是可以改进得更好？

如果好...

从哪里可以得到`Browser KEY`？？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:38:30.347

您必须从 Google API 控制台获取您的浏览器密钥。[https://code.google.com/apis/console](https://code.google.com/apis/console)

您的 Browserkey 大小为 40 字节。

您可以参考[http://developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)以获得更多帮助。

# php - 禁止不需要的客户端请求使用 PHP 文件

> ID：13901133
> 
> 赞同：2
> 
> 时间：2012-12-16T12:07:23.670
> 
> 标签：php, authorization, file-access

我有一个 PHP 文档，比如说 jsonarray.php。

当给定一些参数时，此文件返回关联数组的 json_encode。我需要禁止不受欢迎的用户出于自己的目的访问和使用此文件。

这可能吗？

此外，我想指定它是一个客户端请求，它是我在 JavaScript 代码中发出的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T12:14:12.657

如果您正在从另一个 PHP 文件中查看它，您可以在此处设置`BASEPATH`常量并在您需要保护的所有文件的顶部添加以下行：

```
defined('BASEPATH') OR exit('No direct script access allowed'); 
```

因此，如果从该特定文件访问该文件，`BASEPATH`则已设置并且一切正常。但是如果某些 url 直接尝试访问，脚本将终止。

如果您从 Javascript 调用它 - 另一个选项是向`nonce`每个 javascript 请求添加令牌，这基本上是一个随机生成的唯一令牌，对单个请求有效。有关更多详细信息，请参阅[跨站点请求伪造 (CSRF) 预防备忘单](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#General_Recommendation:_Synchronizer_Token_Pattern)。

这是取自[此处](https://stackoverflow.com/questions/11084795/single-use-csrf-token-generation-and-validation-for-cross-server-communication-i)的示例：

```
 function create_api_key(){
        return base64_encode(base64_encode($this->encrypt(time().'X'.$_SERVER['REMOTE_ADDR'])));
    }

    function check_api_key($key,$timeout=5){
        if(empty($key)){ exit('Invalid Key'); }

        $keys=explode('X',$this->decrypt(base64_decode(base64_decode($key))));

        if (isset($key) && isset($keys[0]) && $keys[0] >= (time()-$timeout) &&
        isset($keys[1]) && $keys[1] == $_SERVER['REMOTE_ADDR']){
            return true;
        }else{
            return false;
        }
    }

    function encrypt($value){
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        return mcrypt_encrypt(MCRYPT_RIJNDAEL_256, 'SECURE_KEY', $value, MCRYPT_MODE_ECB, $iv);
    }

    function decrypt($value){
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, 'SECURE_KEY', $value, MCRYPT_MODE_ECB, $iv));
    }
}

$csrf = new csrf_check();

if(!empty($_GET['do'])){

    $do = $_GET['do'];
    switch($do){
            //example.com?do=get - a key for the request
        case "get":
            echo $csrf->create_api_key();
            break;

        case "check":
            //key only lasts 30 secs & validate key passed
            //example.com?do=get&key=MEV6NXk4UjVRQXV5Qm1CMjBYa3RZZUhGd2M0YnFBUVF0ZkE5TFpNaElUTT0=
            if(!empty($_GET['key']) && $csrf->check_api_key($_GET['key'],30)){
                exit('Key valid');
            }else{exit('Key invalid');}
            break;

        default:
            exit('Request invalid');
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T12:11:39.973

像需要特定`$_GET`参数这样简单的东西对您来说可能就足够了 -

```
if (isset($_GET['password']) && $_GET['password'] == "your_password"){

}else{
  die('access denied!');
} 
```

现在，您只需将密码添加到 URL 即可访问此 PHP 文件：

> `http://yourcoolsite.com/jsonarray.php?password=your_password`

我建议*不要*使用“密码”作为参数的键。而是将其称为其他东西，稍微混淆一下，这样就不会立即看出它是密码。

> `http://yourcoolsite.com/jsonarray.php?mpwyour_password`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T12:29:31.167

> 这可能吗？

不。

因为当您从 javascript 向该文件发出请求时，浏览器必须可以访问该文件。由于您无法控制浏览器，因此您不能再说浏览器中的 javascript 是否发起了请求或某事或其他人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T12:13:56.447

最简单的方法是`.htaccess`阻止用户直接查看文件 这里有两个链接可以了解如何操作：[教程 1](http://biostall.com/prevent-direct-file-access-using-a-htaccess-file) [教程 2](http://perishablepress.com/stupid-htaccess-tricks/#sec2)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-16T12:09:52.423

为什么不只检查您需要的任何要求，如果不满足，则终止该页面。

```
die('Access Blocked'); 
```

# c++ - 为什么 lock_guard 需要 Lockable 概念

> ID：13901136
> 
> 赞同：2
> 
> 时间：2012-12-16T12:07:49.513
> 
> 标签：c++, multithreading, c++11

看起来BasicLockable概念对于lock_guard来说已经足够了，但是在标准草案（N3242）中，Mutex模板参数需要Lockable。任何原因 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:11:30.283

在 n3290 (§30.4.2.1[thread.lock.guard]/1) 中，它说，

> 类型的对象`lock_guard`控制范围内可锁定对象的所有权。对象在对象的整个生命周期（3.8）中`lock_guard`维护可锁定对象的所有权。如果引用的可锁定对象在对象的整个生命周期内都不存在，则`lock_guard`程序的行为是未定义的。**供货****型号应符合****要求（30.2.5.2）。**`pm``lock_guard`**`Mutex``BasicLockable`**

n3242 中的第 2 段可能是编辑错误。这是库缺陷 2023： [and的](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2023)[要求不正确`lock_guard``unique_lock`](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2023)，并且在 n3290 中删除了该段落，如[n3278：Recent Concurrency Issue Resolutions中所示](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3278.htm#2023.thread.lock.guard)

# java - 需要帮助分析Java Thread dump

> ID：13901147
> 
> 赞同：1
> 
> 时间：2012-12-16T12:09:31.967
> 
> 标签：java, threadpool

我正在使用 samurai 工具来分析线程转储。看起来它有许多阻塞的线程。我不知道从线程转储中派生出任何东西。

我的 Java 应用程序中有一个 SQL 查询，它在 weblogic 上运行，需要大量时间才能完成。通过多次单击我的 Java 应用程序按钮运行此查询后，我的 JVM 挂起。

可以找到线程转储@：[http ://www.megafileupload.com/en/file/379103/biserver2-txt.html](http://www.megafileupload.com/en/file/379103/biserver2-txt.html)

你能帮我理解线程转储说什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T12:38:06.593

您提供的数据量有点庞大，所以让我们提示您如何继续。对于分析，我使用基于 TDA 的开源[线程逻辑应用程序。](http://java.net/projects/threadlogic/downloads)解析 3 MiB 的数据需要几秒钟，但在一个文件中很好地显示了 22 个不同的堆栈跟踪转储：

![转储](../Images/0b52043150ff6c728f949c72b30f34e7.png)

深入研究以揭示真正令人不安的警告和警报列表。

![警报](../Images/191f9ac98a1203d2b717461968a1034b.png)

我没有时间检查所有这些，但这里有一个标记为 FATAL 的列表（请记住，误报也是意料之中的）：

> # 等待 SLSB Bean
> 
> *描述*：等待来自 SLSB 空闲池的无状态会话 Bean (SLSB) 实例
> 
> *Advice* : Beans all in use, free pool size 不足
> 
> # 僵局
> 
> *描述*：检测到循环锁依赖导致死锁
> 
> *建议*：在锁中检测到具有循环依赖的死锁，如果不重新启动服务器，阻塞的线程将无法恢复。在代码级别修复锁定顺序和/或尝试避免锁定或更改锁定顺序，使用 SR 报告服务器/产品代码
> 
> # 终结器线程被阻塞
> 
> *描述*：终结器线程被阻塞
> 
> *建议*：检查终结器线程是否被锁阻塞，这可能导致浪费内存等待从终结器队列中回收
> 
> # WLS 单播集群运行状况不佳
> 
> *说明*：集群成员之间的单播消息不正常
> 
> *建议*：单播组成员无法正常通信，请应用最新的单播相关补丁并启用消息排序或切换到多播
> 
> # WLS Muxer 正在处理服务器请求
> 
> *说明*：WLS Muxer 正在处理子系统请求
> 
> *建议*：WLS 服务器运行状况不佳，因为某些子系统被请求淹没，导致 Muxer 线程直接处理请求。而不是分派到相关的子系统。这里可能有一个错误。
> 
> # 卡住的线程
> 
> *描述*：线程被卡住，请求需要很长时间才能完成
> 
> *建议*：检查为什么线程或调用需要很长时间？？？。是因为资源不可用或坏资源而被阻止或争夺锁吗？如果它在循环中重复工作，则可以忽略。（就像适配器线程在无限循环中轮询事件）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:16:55.690

问题在于 WLDF 将信息记录到日志文件中。一旦禁用，它有助于极大地提高性能。我不喜欢 ThreadLogic 作为线程转储分析工具。当您卡住线程时，无论问题有多大变化，它都会显示循环死锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-03T12:31:31.453

线程转储是给定时刻在应用程序中运行的所有线程的快照。线程转储将有成百上千的应用程序线程。很难在每个线程中滚动浏览堆栈跟踪的每一行。调用堆栈树将所有线程堆栈跟踪合并到一棵树中，并为您提供一个单一视图。它使线程转储导航更加简单和容易。下面是由 fastThread.io 生成的示例调用堆栈树。

[![在此处输入图像描述](../Images/5bc03a5b93ff797d77eaf375220ac40d.png)](https://i.stack.imgur.com/UpBew.png) 图 1：调用堆栈树

您可以继续向下钻取以查看代码执行路径。图 2 显示了调用堆栈树图中特定分支的向下钻取版本。

[![在此处输入图像描述](../Images/d95f734a7ab9356fa44014d69a8b6d9a.png)](https://i.stack.imgur.com/9qIJP.png) 图 2：深入调用堆栈树

[FastThread.io 生成的示例调用堆栈树](https://blog.fastthread.io/2018/04/27/benefits-of-call-stack-tree/)

# r - 将 R 因子转换为二进制矩阵值

> ID：13901153
> 
> 赞同：12
> 
> 时间：2012-12-16T11:47:02.797
> 
> 标签：r, matrix, statistics

我想将我的数据框转换为一个矩阵，该矩阵将单个因子列扩展为多个，并根据因子分配`1`/ `0`。例如

```
C1 C2 C3
A  3  5
B  3  4
A  1  1 
```

应该变成类似的东西

```
C1_A C1_B C2 C3
1      0  3  5
0      1  3  4
1      0  1  1 
```

我怎样才能在 R 中做到这一点？我试过了`data.matrix`，`as.matrix`但没有返回我想要的。他们将“整数”值分配给单个因子列，没有扩展。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T13:39:59.710

假设`dat`是您的数据框：

```
cbind(dat, model.matrix( ~ 0 + C1, dat))

  C1 C2 C3 C1A C1B
1  A  3  5   1   0
2  B  3  4   0   1
3  A  1  1   1   0 
```

此解决方案适用于任意数量的因子水平，无需手动指定列名。

如果要排除该列`C1`，可以使用以下命令：

```
cbind(dat[-1], model.matrix( ~ 0 + C1, dat)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T12:01:15.817

让我们称您为 data.frame `df`：

```
library(reshape2)
dcast(df,C2*C3~C1,fill=0,length)

  C2 C3 A B
1  1  1 1 0
2  3  4 0 1
3  3  5 1 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T12:20:21.993

```
dat <- read.table(text =' C1 C2 C3
A  3  5
B  3  4
A  1  1',header=T) 
```

使用变换

```
transform(dat,C1_A =ifelse(C1=='A',1,0),C1_B =ifelse(C1=='B',1,0))[,-1]
  C2 C3 C1_A C1_B
1  3  5    1    0
2  3  4    0    1
3  1  1    1    0 
```

或者为了获得更多的灵活性，使用`within`

```
within(dat,{ 
             C1_A =ifelse(C1=='A',1,0)
             C1_B =ifelse(C1=='B',1,0)})

  C1 C2 C3  C1_B C1_A
1  A  3  5    0    1
2  B  3  4    1    0
3  A  1  1    0    1 
```

# iphone - 选择器不在 iOS6 中填充，但在 iOS 5.1 中填充

> ID：13901156
> 
> 赞同：0
> 
> 时间：2012-12-16T12:11:03.967
> 
> 标签：iphone, objective-c, core-data, ios6, uipickerview

我正在使用的应用程序发生了一件奇怪的事情。首先，在 iOS 5.1 模拟器上运行时，应用程序中的代码和特定操作很好。当我在 iOS 6.0 模拟器上运行相同的应用程序时，该操作不起作用。在 5.1 sim 上构建代码会产生无错误的构建。在 6.0 上构建只会产生黄色警告。在 SDK 升级后有些东西被弃用后，我有点预料到这一点。

我的黄色警告是弃用的，但只是组表视图背景颜色现在在 6.0 中不可用，所以我认为这不会影响它。

在发布适用于 5.1 的代码之前，我将解释一下。我可以在一个普通的旧文本框中填写、输入和保存一些文本。然后，我使用该保存的文本在另一个选项卡中填充选择器。

正如我所说，在 5.1 中效果很好，没有问题，在 6.0 中似乎不起作用。

有没有人经历过从 5.1 到 6.0 填充他们的选择器的类似事情？

在我深入研究之前，你们知道它们有什么共同点吗？

非常感谢您的阅读，

天然气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:01:47.533

请确保您已将 yourDataBase.sqlite 从 iOS5 模拟器复制到 iOS6 模拟器中的应用程序包。

# azure - 天蓝色的 XSD 验证

> ID：13901158
> 
> 赞同：0
> 
> 时间：2012-12-16T12:11:25.723
> 
> 标签：azure, xsd, schema

我有几个要部署到 azure 的服务。每个服务都有一个 xsd 模式，该模式放置在服务所在的项目中。在验证模块中，我尝试以这种方式加载架构：

```
XmlSchemaSet schemaSet = new XmlSchemaSet();
Uri baseSchema = new Uri(AppDomain.CurrentDomain.BaseDirectory);
string mySchema = new Uri(baseSchema, "LogInService.xsd").ToString();
XmlSchema schemaLogIn = XmlSchema.Read(new XmlTextReader(mySchema), null);
schemaSet.Add(schemaLogIn); 
```

...但显然路径`AppDomain.CurrentDomain.BaseDirectory`不正确，当我尝试部署服务时出现以下错误：

```
Could not find file 'F:\sitesroot\0\LogInService.xsd' 
```

（在开发中，此代码运行良好）

我的问题是，我应该将 xsd 文件放在哪里 - 或者我如何更改上面的代码以便它可以在云上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:17:46.370

我认为您的路径是正确的，可能发生的是您的 xsd 未包含在正在上传的包中。检查文件的属性，特别是构建操作属性以确保它会被复制。

# awk - 使用 AWK 的 gensub() 函数替换多次（但不是全部）出现的模式

> ID：13901159
> 
> 赞同：1
> 
> 时间：2012-12-16T12:11:28.587
> 
> 标签：awk

此示例删除了第五次出现的正则表达式：

```
printf "%s " $(seq 9) | gawk '{ print gensub(/[0-9]/,"","5") }'
1 2 3 4  6 7 8 9 
```

此示例删除了正则表达式的第六个实例：

```
printf "%s " $(seq 9) | gawk '{ print gensub(/[0-9]/,"","6") }'
1 2 3 4 5  7 8 9 
```

是否可以将上述示例保存在一个中？我试过了，但它不起作用：

```
printf "%s " $(seq 9) | gawk '{ print gensub(/[0-9]/,"","5|6") }'
 2 3 4 5 6 7 8 9 
```

我要打印：

```
1 2 3 4    7 8 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:03:13.257

根据[文档](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)，我能想到的方法之一：

```
printf "%s " $(seq 9) | gawk 'END{ print gensub(/[0-9]/,"","5",gensub(/[0-9]/,"","5")) }' 
```

另一种方式（使用您非常具体的输入）：

```
printf "%s " $(seq 9) | gawk 'END { print gensub(/[0-9] [0-9]/,"","3") }' 
```

> 在目标字符串 target 中搜索正则表达式 regexp 的匹配项。如果字符串以'g'或'G'（“global”的缩写）开头，则用replacement替换正则表达式的所有匹配项 *。***否则，how 被视为一个数字，指示要替换哪个匹配的正则表达式。**如果没有提供目标，则使用 $0。它返回修改后的字符串作为函数的结果，原始目标字符串没有改变。

# html - 如何在表中回退？

> ID：13901163
> 
> 赞同：0
> 
> 时间：2012-12-16T12:11:45.663
> 
> 标签：html, fallback

我正在用 HTML 制作一个注册页面。我正在使用`placeholder`输入，但我知道一些主要浏览器（IE <9、Firefox <3.7、Chrome/Safari <4.0）不支持此 HTML5 功能。

我最喜欢的回退方式`placeholder`是这段代码，它不需要任何 Modernizr 或其他 JavaScript：

```
<audio>Username: </audio>
<!-- Fallback; won't be displayed by HTML5 browsers -->
<input type="text" placeholder="Username">
<!-- The placeholder will just be ignored by non-HTML5 browsers--> 
```

问题是这个注册表单在一个表格中，并且后备不起作用 - 它也显示了后备文本：

```
<table>
<tr>
    <audio>
        <td>
            Username:
        </td>
    </audio>
    <td>
        <input type="text" name="Username" placeholder="Username">
    </td>
</tr>
</table> 
```

那么，我该怎么做回退呢？我知道 Modernizr 和其他 JS 库，但由于我的服务器上传速度低并且作为一般准则，我更愿意避免使用它们。`<td><audio>Fallback</audio></td>`此外，由于图形问题（添加水平空白，也可以设置 td 样式可能会出现问题），我没有考虑使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:16:48.247

如果您有任何输入字段的显式标签，则不需要任何后备，建议使用此标签以提高可访问性和可用性。

`audio`当且仅当它支持该`placeholder`属性时，依赖浏览器支持该元素的假设是相当奇怪的。例如，IE 9 支持`audio`但不支持`placeholder`.

一种更合理的方法（在支持时删除标签`placeholder`，恕我直言，这不是问题）是添加一段 JavaScript 来检查是否`placeholder`被识别为属性，如果是则删除标签。这样做的风险是浏览器可能会识别该属性而不实际支持它。最安全的方法似乎是`input`在 JavaScript 中创建一个元素并检查该对象是否具有该`placeholder`属性：

```
<table>
<tr id="row">
        <td id="label">
            <label for="username">Username:</label>
        </td>
    <td>
        <input type="text" name="Username" placeholder="Username" id="username">
    </td>
</tr>
</table>
<script>
if(!('placeholder' in document.createElement('input'))) {
  document.getElementById('row').removeChild(document.getElementById('label'));
}
</script> 
```

# linux - 如何在vim中启用剪贴板功能？

> ID：13901166
> 
> 赞同：0
> 
> 时间：2012-12-16T12:11:54.133
> 
> 标签：linux, vim, gentoo

环境：

1.  琴图
2.  7.3

我在 Google 中搜索并找到了方法：

`vim --version | grep clipboard`

发现我的vim没有打开剪贴板支持

在 vim 中打开剪贴板和 xterm_clipboard 支持。

我在 package.use 中添加了这些使用标志：

`app-editors/vim clipboard xterm_clipboard`

但是我用了`equery -q uses app-editors/vim`，但是什么都没加。</p>

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T12:39:57.780

的输出是`vim --version | grep clipboard`什么？和/或`-`前面的A表示您的 Vim 编译时不支持剪贴板。如果是这种情况，请获得另一个支持剪贴板的版本（或类似的东西，YMMV）。`clipboard``xterm_clipboard``vim-gnome`

# html - 制作链接加载图像而不是一个全新的页面？

> ID：13901169
> 
> 赞同：0
> 
> 时间：2012-12-16T12:12:40.740
> 
> 标签：html

我想在我的网页左侧有一个图像部分，在右侧我想有小图像。当我单击这些小图像时，我希望它在左侧加载不同的图像，而无需重新加载整个网页。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:30:23.623

```
<iframe name="left" src="images/otherImage1.png"></iframe>
<iframe name="right" src="thumbslist.html"></iframe> 
```

在 thumbslist.html

```
<ul>
<li><a href="images/otherImage1.png" target="left"><img src="images/thumbs/otherImage1.png" /></a></li>
<li><a href="images/otherImage2.png" target="left"><img src="images/thumbs/otherImage2.png" /></a></li>
<li><a href="images/otherImage3.png" target="left"><img src="images/thumbs/otherImage3.png" /></a></li>
</ul> 
```

当然，需要一些 css 才能使两个 iframe 设置为彼此相邻。

# cherrypy - 是否可以暂停cherrypy服务器以更新静态文件/数据库而不停止它？

> ID：13901171
> 
> 赞同：2
> 
> 时间：2012-12-16T12:13:11.457
> 
> 标签：cherrypy

我有一个内部的cherrypy 服务器，它提供静态文件并回答 XMLRPC 请求。一切正常，但我需要每天 1-2 次更新这个静态文件和数据库。当然我可以停止服务器，运行更新并启动服务器。但这不是很干净，因为通过 XMLRPC 与服务器通信的所有其他代码都会断开连接，并且用户会在浏览器中看到“无法连接”。这增加了额外的复杂性 - 我需要一些外部启动/停止/更新代码，所有更新都可以在cherrypy服务器本身内完美完成。

是否有可能以某种方式以某种方式“暂停”cherrypy，以便它将服务器静态“忙碌”页面，我可以更新数据而不必担心现在有人正在从服务器下载文件 A，我将更新他想要的文件 B，所以他会得到不同的文件版本。

我试图以编程方式实现这一点，但这里有问题。Cherrypy 是多线程的（这很好），所以即使我引入了全局“忙碌”标志，我也需要一些方法来等待所有线程完成现有任务，然后才能更新数据。找不到这样的方式:(。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:30:31.153

CherryPy 的引擎控制这些东西。当您调用`engine.stop()`时，HTTP 服务器会关闭，但首先它会等待现有请求完成。此模式旨在允许在不服务请求时进行调试。请参阅[此状态机图](http://docs.cherrypy.org/dev/refman/process/wspbus.html#web-site-process-bus)。请注意，它`stop`与`exit`真正停止一切并退出进程的 不同。

您可以调用`stop`，然后使用不同的应用程序再次手动启动 HTTP 服务器以提供“忙碌”页面，然后进行编辑，然后停止临时服务器，然后再次调用`engine.start()`并`engine.block()`继续前进。请注意，当当前请求完成并且新的 HTTP 服务器接管对套接字的侦听时，这将意味着一定量的停机时间，但这将保证在您开始进行更改之前完成所有当前请求。

或者，您可以编写一些 WSGI 中间件，该中间件通常将请求原封不动地传递，但当被触发时返回“忙碌”页面。当前请求仍将被允许完成，因此您可能会在一段时间内不确定您的编辑是否会影响正在进行的请求。如何编写 WSGI 中间件不太适合 SO 回复；搜索类似[这样](http://pythonweb.org/projects/webmodules/doc/0.5.3/html_multipage/lib/example-command-program-flow.html)的资源。当您准备好在 CherryPy 中连接它时，请参阅[http://docs.cherrypy.org/dev/concepts/config.html#wsgi](http://docs.cherrypy.org/dev/concepts/config.html#wsgi)

# c# - VB.NET - 铸造类型

> ID：13901173
> 
> 赞同：-1
> 
> 时间：2012-12-16T12:13:29.507
> 
> 标签：c#

以下代码取自以下网页：http: [//msdn.microsoft.com/en-us/magazine/cc188707.aspx](http://msdn.microsoft.com/en-us/magazine/cc188707.aspx)

```
int[] values = new int[] {1, 2, 3, 4, 5}; 
IEnumerator e = ((IEnumerable)values).GetEnumerator(); 
while(e.MoveNext()) 
{ 
Console.Write(e.Current.ToString() + " "); 
} 
```

为什么将 Array 类转换为 IEnumerable？Array 类实现 GetEnumerator，如以下网页所示：http: [//msdn.microsoft.com/en-us/library/system.array.aspx](http://msdn.microsoft.com/en-us/library/system.array.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:30:08.390

那不是VB，而是C#。

没有理由将数组强制转换为，无论有没有强制转换`IEnumerable`，它都会做同样的事情。

无论如何，使用枚举器循环遍历数组是低效的，因为它会将对象中的每个整数装箱。使用`for`或`foreach`创建在没有装箱的情况下循环值的代码，并且没有不必要的范围检查：

```
for (int i = 0; i < values.Length; i++) {
  Console.Write(values[i]);
  Console.Write(' ');
} 
```

或者：

```
foreach (int value in values) {
  Console.Write(value);
  Console.Write(' ');
} 
```

# c# - 通过对 URL 和信息的更多控制来更好地控制 Web 浏览器？

> ID：13901175
> 
> 赞同：2
> 
> 时间：2012-12-16T12:13:34.567
> 
> 标签：c#, vb.net, httpwebrequest, webbrowser-control, fiddlercore

在过去的几周里，我有一个问题困扰着我。

我要完成的工作：我需要一个能够更改用户代理（在启动时）和引用者的网络浏览器控件。但最重要的是查看 url 响应的能力。我的意思是，例如，如果您导航到一个网站，您会返回图像/Javascripts 文件作为响应，我需要访问这些 url（常规 Webbrowser Control 不会向您显示这些并且您无法以任何方式访问它）。

我可以使用 webbrowser + fiddlercore 来做到这一点，我可以使用这些 url 地址查看并执行任何操作。问题是如果你运行这个程序的几个实例（或者有时如果程序有一些自动化来处理 url 响应）它会卡住或不起作用。我尝试修复它并使其工作，但这是一种无法正常工作的 hacky 解决方案。我需要一种简单的方法来访问这些 url，就像你使用 httpwebrequest 一样，但是作为一个 webbrowser。为什么我需要它作为网络浏览器？我的工作方式我需要执行所有跟踪像素、脚本和图像等。如果你想要谷歌分析，你必须创建一个代码来重新创建它，你不能只是导航和所有脚本将作为网络浏览器执行，或者你可以吗？

你们可以为我提供一些帮助或指导我应该朝哪个方向看吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:58:09.507

我认为这就是你要找的：

[用更好的浏览器（如 Chrome）替换 .NET WebBrowser 控件？](https://stackoverflow.com/questions/790542/replacing-net-webbrowser-control-with-a-better-browser-like-chrome)

但是，还有*许多*其他“浏览器包装器”实现，如果该答案对您来说没有任何好处，请告诉我，我会尝试推荐另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:10:01.453

介意用 geckofx ( mozilla firefox ENGINE) 之类的替换吗？

从这里开始：

[壁虎外汇](http://www.webprogrammingblog.com/introducing-geckofx-control/)

活动现在您可以使用 xulrunner 16（mozilla firefox 16 的主引擎）。

[新 GeckoFX](https://bitbucket.org/geckofx/) 和 [XulRunner](https://developer.mozilla.org/en/docs/XULRunner)

[这里](https://developer.mozilla.org/en-US/docs/Gecko_user_agent_string_reference)关于 xulrunner 中的用户代理的文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:27:59.900

可能不是最好的解决方案，但您可以处理`DocumentCompleted`标准`WebBrowser`控制事件。每次它触发时，您都可以访问图像标签`WebBrowser.Document.Images`并获取它们的网址并使用正则表达式解析`WebBrowser.DocumentText`.js 网址或使用 Html Agility Pack 之类的东西`WebBrowser.Document`来获取所有有趣的元素......

# javascript - Chrome 打包应用程序可以检查自己的包内容

> ID：13901178
> 
> 赞同：2
> 
> 时间：2012-12-16T12:13:37.153
> 
> 标签：javascript, google-chrome-extension

我想为我的 Chrome 打包应用程序构建 UI，具体取决于包中捆绑的文件集。

我想检查子文件夹，找到 UI 文件（子文件夹、png、wav、mp3、字体文件），然后根据它们创建 UI 元素。

File API 在旁边有一个单独的根，所以没有帮助。

我已经看到如何为我的应用程序目录获取 chrome-extension: URL，但我不知道如何检查其内容。

即使是只读访问也足够了。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:38:10.687

没有 API 可以检查您的应用内容。但是，您可以在打包过程中添加一个简单的脚本（假设它是自动的），以将这些 UI 文件的列表写入 JSON 文件，并将此文件与您的应用程序打包。

如果您使用适当的 JavaScript 命令为该文件的内容添加前缀，您甚至不需要 XHR 来加载它，只需通过脚本标签添加它即可。

例如：

用于生成文件列表的 Bash 脚本（在打包时）：

```
#!/bin/bash
echo "getUIContentList = function() {"
echo "  return ["
for f in `find . -name '*.png' -or -name '*.mp3'` ; do
  echo "    \"$f\","
done
  echo "    false"  # this is to avoid special logic for trailling comma
echo "  ];"
echo "}" 
```

ui_content_list.js（由脚本自动生成，嵌入到您的应用程序中）：

```
getUIContentList = function() {
  return [
    "css/main.css",
    "img/logo.png",
    "img/logo2.png"
  ];
} 
```

文件 index.html：

```
<html>
...
<script src="ui_content_list.js"></script>
<script src="index.js"></script>
... 
```

文件 index.js：

```
getUIContentList().forEach(function(filename) {
  if (filename) {  // get all itens except the last "false" value
    var internalUrl = chrome.runtime.getURL(filename);
    doSomething(internalUrl);
  }
}); 
```

# java - Java：需要基本的 Spring Security MSSQL 会员系统

> ID：13901179
> 
> 赞同：0
> 
> 时间：2012-12-16T12:13:47.880
> 
> 标签：java, spring-security

我正在寻找一种使用 MSSQL 实现 Spring 安全性，用于 Java 的授权/身份验证。我在这里和那里看过一些教程，但我担心弄清楚这一切会比我花更多的时间。有什么地方可以下载一些工作源代码吗？我希望我可以复制和粘贴实体、xml 文件等并重命名包。有谁知道我在哪里可以找到这样一个基本的实现下载？

**编辑** 我被告知 Spring Security 是最好的，但它不一定是 Spring .. 只是可行的东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:36:52.117

这一切都在[Spring Security 书中](http://springsecuritybook.com/)，但我不知道你是否在不购买这本书的情况下找到源代码（可用数字版）。无论如何，我强烈推荐那本书。它教会了我 Spring Security。

# git - 使用 Programmer's Notepad 2 作为 git 的编辑器

> ID：13901180
> 
> 赞同：3
> 
> 时间：2012-12-16T12:13:53.263
> 
> 标签：git, programmers-notepad

我看过关于使用 notepad++ 和其他 git 编辑器的帖子，但没有看到关于使用 PN2 的帖子。

我已经尝试了以下变体，但它们似乎都不起作用：

```
git config --global core.editor "'C:\Program Files (x86)\Programmer's Notepad\pn.exe -allowmulti' -w" 
```

我只是收到如下错误（这是在“git commit --amend”之后）：

```
'C:\Program Files (x86)\Programmer's Notepad\pn.exe -allowmulti' -w: -c: line 0:
unexpected EOF while looking for matching `''
'C:\Program Files (x86)\Programmer's Notepad\pn.exe -allowmulti' -w: -c: line 1:
syntax error: unexpected end of file
error: There was a problem with the editor ''C:\Program Files (x86)\Programmer's
Notepad\pn.exe -allowmulti' -w'.
Please supply the message using either -m or -F option. 
```

有可能让它工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T14:24:38.937

编辑器由 git 使用 bash 脚本启动。所以你应该确保你的引用是针对 bash shell 的。您使用了单引号，但目录名称中嵌入了单引号。您可能还应该使用正斜杠并使其具有统一性。有关使用 Notepad++ 的示例，请参阅[此答案。](https://stackoverflow.com/a/4778894/291641)在你的情况下，我认为以下应该没问题：

```
git config --global core.editor "\"C:/Program Files (x86)/Programmer's Notepad/pn.exe\" -allowmulti -w" 
```

# ios - UIcollectionViewCells 的数据排序和更新。这是一个失败的原因吗？

> ID：13901184
> 
> 赞同：0
> 
> 时间：2012-12-16T12:14:47.587
> 
> 标签：ios, core-data, ios6, uicollectionview

我在 collectionView 中显示了核心数据条目，从 1 2 3 ... n 排序。当用户翻阅第一个 n 时，会添加新批次的条目。数据是根据从 Web 服务器获得的 JSON 响应构建的。

因为获取请求的第一个条目通过数据源委托与单元格 0 相关联，所以无法在集合视图的底部添加新批次。如果它是从单元格 0 添加的，则旧的单元格内容会被新的内容替换，或者简而言之，整个页面似乎都被新内容替换了，并且用户正在查看的数据被新条目的数量所抵消。如果批量很大，则简单地掩埋。此外，如果从单元格 0 进行更新，则所有条目都可见，这需要时间和内存。我考虑了几个选项：

1) data-redorder，意思是直接从获取请求。我不确定这可能吗？在呈现给 UICollectionViewDataSource 委托之前，是否有一个 CD 陷阱允许重新排序获取结果？

2）改变“collectionView cellForItemAtIndexPath:”中的Index path/viewCell关联，使用(numberOfItemsInSection - IndexPath.Item)。它创建了几个边缘情况，因为可以在视图中删除/更新条目（因此 numberOfItemsInSection 更改）。所以如果可以的话，我宁愿避免它...

3) 从单元格 0 添加新数据，出于我解释的原因排除。可能有一个解决方案：有没有人通过设置视图偏移达到满意的效果？例如，如果添加了 20 个新条目，则单元格 0 的内容将移动到单元格 20。因此，我们只需要告诉视图控制器从单元格 20 开始显示。我可能期望的任何图像翻转或副作用？

4) 下载一大块数据，简单地使用内置的核心数据故障机制。但这低于最佳值，因为我不确定我应该下载多少 - 取决于用户 - 初始请求（JSON+核心数据）可能需要太长时间。这就是为什么懒惰的获取仍然存在的原因。

遇到同样问题的人有什么建议可以分享吗？

谢谢 ！

# python - 如何知道上次运行 cron 任务的时间？

> ID：13901185
> 
> 赞同：1
> 
> 时间：2012-12-16T12:14:53.393
> 
> 标签：python, google-app-engine, cron

我有以下任务：

```
- description: Task is run every 2 hours
  url: /task
  schedule: every 2 hours synchronized 
```

有什么方法可以知道我的 python 代码上次运行的时间（日期和时间）？我现在的想法是在完成运行后将其存储在内存缓存中。但是还有其他更好的方法吗？

PS。我遇到的另一个问题是内存缓存为空的情况。我如何计算上次运行的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:44:16.577

你不能，不能不将上次运行的信息存储在*某处*。Cron 本身不会为您跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T12:19:37.253

为什么不在运行的文件中添加一些额外的代码来创建日志，比如文本文件？

# java - Bit.ShiftRight - java 中的等价物

> ID：13901186
> 
> 赞同：2
> 
> 时间：2012-12-16T12:15:01.740
> 
> 标签：java, vb.net, bit-manipulation, bit

谁能解释一下下面发生了什么；下面的位移是如何工作的？

```
Dim pBuffer(11) As Int 
                pBuffer(0)=4 
                'Firmware Version'
                pBuffer(1)=Bit.ShiftRight(Bit.And(firmware_version, 0xFF00),8)
                pBuffer(2)=Bit.And(firmware_version, 0xFF) 
```

考虑firmware_version = 0001

等效的Java代码是什么？我可以在 Java 中使用 Bit.ShiftRight 吗？我检查了 Java 类，但不太明白 java 中等效的“Bit.ShiftRight”操作是什么？

编辑：你能解释一下这里到底发生了什么吗？

```
pBuffer(1)=Bit.ShiftRight(Bit.And(firmware_version, 0xFF00),8) 
```

AND 是如何执行和位移的？它是在什么上执行的？是firmware_version AND 0xFF00 还是先移位？你能解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T12:15:36.093

在 java 中，您可以使用运算符`>>`和`>>>`分别进行有符号和零填充的右移。

按位和在 Java 中由`&`.

请参阅[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

VB 声明

```
pBuffer(1)=Bit.ShiftRight(Bit.And(firmware_version, 0xFF00),8) 
```

因此可以通过在Java中实现

```
pBuffer[1]= (firmware_version & 0xFF00) // Bit.And
            >> 8                        // shift right 8 bits 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T12:20:36.473

VB.NET：`Bit.ShiftRight(Bit.And(firmware_version, 0xFF00),8)`

（firmware_version 和 0xFF00 的按位与右移 8 次）

```
Java  : (firmware_version & 0xFF00) >> 8 //or >>> for unsigned right-shift 
```

* * *

VB.NET：`Bit.And(firmware_version, 0xFF)`

固件版本与 0xFF 的按位与

```
Java  : (firmware_version & 0xFF) 
```

* * *

Java 中的`&`运算符执行按位与运算。

（**[参考](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)**）

# algorithm - 查找给定二维数组中满足给定约束的单元格数

> ID：13901188
> 
> 赞同：0
> 
> 时间：2012-12-16T12:15:06.913
> 
> 标签：algorithm, graph, graph-algorithm, counting

给定一个二维数组，从 (0,0) 开始，在正 x 和 y 轴上向无穷大前进。给定一个数字 k>0 ，找到从 (0,0) 可到达的单元格数，使得在每一时刻 -> x 的数字总和 + y <=k 的数字总和。可以向上、向下、向左或向右移动。给定 x,y>=0 。
Dfs 给出了答案，但对于较大的 k 值来说还不够。任何人都可以为此提供更好的算法来帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:28:01.347

我认为他们要求您计算通过 k>=x+y 可到达的单元格数 (x,y)。例如，如果 x=1，则 y 可以取 0 到 k-1 之间的任何数字，并且总和为 <=k。可能性的总数可以由下式计算

```
sum(sum(1,y=0..k-x),x=0..k) = 1/2*k²+3/2*k+1 
```

这应该能够解决大 k 的问题。

我对您问题中的“数字”有些困惑。数字组成索引，如 3 乘以 9 为 999。单元格 (999,888) 的数字总和为 51。如果您允许数字总和为 10^9，那么您可能有 10^8 位一个索引，产生大约 10^(10^8) 个条目，远远超出表格的正常大小。因此，我假设我的第一个解释。如果这不正确，那么您能再解释一下吗？

**编辑**：

好的，所以我的答案不会解决它。恐怕我没有看到一个好的公式或答案。我会将其视为着色/标记问题并标记所有有效单元格，然后使用其他一些技术来确保所有部分都已连接/计算它们。

我试图想出一些东西，但它太乱了。基本上我会尝试根据索引和k一次标记大部分。如果 k=20，您可以一次标记单元格范围 (0,0..299)（因为任何较低的索引将具有较低的索引总和）并继续检查范围的其余部分。我从 299 开始，将最后 2 个数字固定为其最大值，然后寻找第一个数字的最大值。然后对剩余的数百个 (300-999) 继续该过程，仅将最后一位固定为 300..389 和 390..398。但是，您已经可以看到它是一团糟......（尽管我想把它给你，你可能会得到一些更好的主意）

您可以立即看到的另一件事是您的问题在索引上是对称的，因此任何有效的单元格 (x,y) 都会告诉您还有另一个有效的单元格 (y,x)。在标记方案/dfs/bfs 中可以利用这一点。

# python - Django - 为用户上传的图片提供服务

> ID：13901194
> 
> 赞同：7
> 
> 时间：2012-12-16T12:15:38.893
> 
> 标签：python, django, media

我在从我的 Django 应用程序提供用户上传的文件时遇到一些问题：

来自models.py：

```
class Picture (models.Model):

    title = models.CharField(max_length=48)

    date_added = models.DateTimeField(auto_now=True)

    content = models.ImageField(upload_to='pictures') 
```

从 Django 管理员，文件被上传到 user_res/pictures/ 文件夹。

从项目的settings.py：

```
MEDIA_ROOT = 'user_res'

MEDIA_URL = '/user_res/'

STATIC_ROOT = ''

STATIC_URL = '/static/' 
```

每次我尝试引用静态资源（即 css 或 js 文件）时，使用诸如

```
http://localhost:8000/static/<subfolder>/main.css. 
```

但是，我无法访问用户上传的文件（这些文件是由管理界面在 user_res/pictures 文件夹中使用相对 URL 创建的，例如

```
user_res/pictures/test.jpg 
```

URL 是使用 Django 图片模型可调用的这行代码动态创建的：

```
return '<img src="{}"/>'.format(self.content.url) 
```

我在 url.py 文件中没有用于静态或媒体文件的专用 url-s。

有人知道如何让 Django 为媒体文件提供服务吗？我知道对于实时环境，我需要配置一个 http 服务器来为该特定目录提供服务，但现在我想维护一个轻量级开发套件。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-08T08:30:41.153

编辑您的 urls.py 文件，如下所示。

```
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = patterns('',
    # ... the rest of your URLconf goes here ...
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

编辑你的项目 settings.py 看起来像：

```
#Rest of the settings
MEDIA_URL = '/media/'
MEDIA_ROOT = 'media'
STATIC_ROOT = ''
STATIC_URL = '/static/' 
```

请仔细阅读官方 Django 文档关于服务用户上传的文件。链接到文档：[https ://docs.djangoproject.com/en/1.5/howto/static-files/#serving-files-uploaded-by-a-user](https://docs.djangoproject.com/en/1.5/howto/static-files/#serving-files-uploaded-by-a-user)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:48:51.377

我认为 url 属性返回一个相对 URL（[Django 的 FileField 文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField)），所以你应该有：

```
return '<img src="{}"/>'.format(MEDIA_URL + self.content.url) 
```

相对 URL 不起作用，因为访问“http://localhost/books/”的用户将请求“http://localhost/books/user_res/pictures/test.jpg”。

# python - 使用 Scipy imsave 将 Numpy 数组保存到图像时保留未更改的数据

> ID：13901197
> 
> 赞同：4
> 
> 时间：2012-12-16T12:16:16.733
> 
> 标签：python, image, numpy, scipy, python-imaging-library

当使用 Scipy 保存二维 Numpy 数组（单个值）`toimage`或`imsave`像素值与 Numpy 数组中的值不完全匹配时。相反，有一些区域，主要是在边缘，图像算法似乎使用了某种插值。

是否有一个选项可以停止插值并保留确切的数据（例如 7 总是在 PNG 中获取 rgb(7,7,7)？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T13:33:51.443

如果您有一个 2D numpy 数组，那么您将保存为灰度 PNG，因此您永远不会获得 rgb 图像（只有一个通道）。我不确定你所说的单值是什么意思，也许是单精度浮点数？尽管 PIL 支持单精度浮点数，但 PNG 不支持。保存为 PNG，您可以使用每通道 8 位（默认）或每通道 16 位。这意味着您的数组将被缩放到最大 2^8/2^16（8/16 位），并转换为整数。正是在这种转换中，结果可能会略有不同。

`scipy.misc.image`似乎没有保存为 16 位的选项，所以它总是会写一个 8 位的 PNG 。但是你可以`scipy.misc.toimage`用来创建一个 16 位的图像，只是一定要通过`mode='I'`. 还要确保指定数组最小值和最大值以避免缩放。以下是如何使用它来保存 16 位 png：

```
import numpy as np
import scipy.misc

a = np.random.uniform(0, 2**16 - 1, (500, 500)).astype('int32')
img = scipy.misc.toimage(a, high=np.max(a), low=np.min(a), mode='I')
img.save('my16bit.png')

# check that you got the same values
b = scipy.misc.imread('my16bit.png')
b.dtype
# dtype('int32')
np.array_equal(a, b)
# True 
```

请注意，在此示例中，我使用`int32`了数据类型。但是，数据仍必须适合`uint16`. 如果您输入负值或大于 2^16 的值，这些值将在保存到 PNG 时被剪裁。相反，即使`sp.misc.imread`读取为`int32`，数据也永远不会超过`uint16`。

**总之：**如果您想将完全相同的 numpy 数组写入 PNG，您需要确保它是`uint8/uint16`类型，并且您将正确的传递`high/low/mode`给`scipy.misc.toimage`.

# android - Android Xml 数据库

> ID：13901207
> 
> 赞同：0
> 
> 时间：2012-12-16T12:17:48.980
> 
> 标签：android, xml

嗨，我的 android 应用程序的 xml 文件有问题。它吐出这个错误

错误：无效的开始标签 Category 。. . 这是源代码。

```
<?xml version="1.0" encoding="UTF-8" ?>
<Category>
<destination id="1" main_cat="Hotel">
        <timestamp></timestamp>
        <business_name><![CDATA[ Sugarland Hotel ]]></business_name>
        <alias><![CDATA[ Sugarland Hotel ]]></alias>
        <address><![CDATA[ Araneta Avenue ]]></address>
        <city><![CDATA[ Bacolod ]]></city>
        <subcategory><![CDATA[ Hotel ]]></subcategory>
        <cuisine><![CDATA[ Italian,Asian ]]></cuisine>
        <budget> </budget>
        <features> </features>
        <working_days><![CDATA[ Everyday ]]></working_days>
        <opening><![CDATA[ 24/7 ]]></opening>
        <ending>    </ending>
        <contact><![CDATA[ (34)435-2690 , (34)435-2780 ]]></contact>
        <fax><![CDATA[ (34)435-2645 ]]></fax>
        <email><![CDATA[ rooms@sugarlandhotel.com ]]></email>
        <website><![CDATA[ www.sugarlandhotel.com  ]]></website>
        <payment_type><![CDATA[ cash,credit card,master card, visa ]]></payment_type>
        <lat><![CDATA[ 10.6524789N ]]></lat>
        <long><![CDATA[ 122.9372838E ]]></long>
        <desc><![CDATA[ Experience a modern hacienda retreat that nurtures the charm and romance of old world plantation living. Extensively renovated beginning 2010, Sugarland hotel unvails a celebrated balance of nostalgia and contemporary style, Capturing its original southern elegence, luxury, and decadence. Machuca tiles form cool geometric patterns in the hallways. Hacienda hardwoord floors contrast modern furnishings and amenities in the dramatic suits. The sugarland lifestyle offers guests the finest sensory indulgences: signature hacienda service, soothing organic toiletries, heirloom recipes, and unmatched privacy and tranquility. ]]></desc>
        <image>     </image>
</destination>
   </Category> 
```

我也尝试测试**CDATA**我宁愿使用它还是使用 xml 模式。我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:19:04.170

去掉前面的空格`<?xml version="1.0" encoding="UTF-8" ?>`。 *什么*都不能出现在它面前。

IntelliJ 和我的浏览器都说你的 XML 很好。一定有其他问题。

# c - 分段错误 - strcat

> ID：13901209
> 
> 赞同：6
> 
> 时间：2012-12-16T12:18:02.267
> 
> 标签：c, segmentation-fault, valgrind

这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

void main(int arge, char *argv[])
{
    FILE *f1;
    char ch,*fn="~/lyrics/";
    strcat(fn,argv[1]);
    strcat(fn,".txt");
    if( (f1 = fopen(fn,"r"))==NULL )
    {
        printf("\nWrong filename\n%s not found",argv[1]);
        return;
    }
    while((ch=getw(f1))!=EOF)
    {
        printf("%c",ch);
    }
} 
```

我使用它编译它`gcc -g -o file file.c`并且编译器没有给出错误消息。但是当我运行它时，我收到错误消息：

```
Segmentation fault (core dumped)
Bad permissions for mapped region at address 0x8048659 at 0x402C36B: strcat 
(in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so) by 0x80484D6: main (lyrics.c:9) 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T12:19:03.403

您在 fn 中没有足够的空间。通过对它进行strcat'ing，您将覆盖其堆栈分配的末尾并进入堆栈..因此出现分段错误。

您可以尝试以下方法：

```
char fn[255];
strcpy( fn, "~/lyrics/" );
strcat( fn, argv[1] );
strcat( fn, ".txt" ); 
```

您只需确保整个路径和文件名可以容纳 255 个字符。

或者，您可以这样做：

```
char* fn = NULL;
int argvLen = strlen( argv[1] );
fn = malloc( 9 + argvLen + 4 + 1 ); // Add 1 for null terminator.
strcpy( fn, "~/lyrics/" );
strcat( fn, argv[1] );
strcat( fn, ".txt" ); 
```

而且您肯定已经为字符串分配了足够的空间。完成后不要忘记释放它！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T12:19:14.223

```
char *fn = "~/lyrics/"; 
```

因为`fn`可以指向只读内存中的字符串，所以应该声明`fn`为指向`const char`.

```
const char *fn = "~/lyrics/"; 
```

然后你可以看到有一些错误。这是一个更好的解决方案：

```
char fn[MAX_SIZE] = "~/lyrics/"; 
```

这里`MAX_SIZE`应该是 的大小`"~/lyrics/"`、最大长度`argv[1]`和 的长度之和`".txt"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T12:26:15.593

这种方法不可移植。

如果使用`glibc`你也可以调用`asprintf()`which 只是分配你需要的内存。

```
#include <stdio.h>

...

char * pFn = NULL;

if (-1 == asprintf(&pFn, "~/lyrics/%s.txt", argv+1);
{
  perror("asprintf()");
}
else
{
  ... /* use pFn */
}

free(pFn);

... 
```

# arduino - Arduino Uno r3 .. 上传时出现 avrdude 错误

> ID：13901211
> 
> 赞同：0
> 
> 时间：2012-12-16T12:18:24.380
> 
> 标签：arduino

![在此处输入图像描述](../Images/9cb4923aded56e30d095f62d34dda7f9.png)

我最近买了一个真正的 Arduino Uno r3 。

一旦我插入它，它就会向我显示设备名称为“ATmega16u2 DFU”.. 但是经过大量谷歌搜索后，我将一些十六进制文件刻录到它上面，现在该设备在计算机的 COM 端口中被读取为通信端口 3，如果我在设备管理器下为它安装特定的驱动程序（.inf 文件），它会出现 Arduino Uno r3..

问题是当我尝试上传它说的代码时（RX Led 闪烁 3 次但没有任何反应..）

```
Binary sketch size: 444 bytes (of a 32,256 byte maximum)

Estimated used SRAM memory: 9 bytes (of a 2048 byte maximum)
avrdude.exe: stk500_getsync(): not in sync: resp=0x00 
```

我已经检查过我是否从 IDE 中选择了正确的 COM 和 BOARD。用大量不同的驱动程序安装了电路板......（我有win7 x32）。

你认为这是一些驱动相关的问题，有缺陷的电路板还是其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T20:34:25.410

第一步是进入 Arduino IDE 首选项并打开“在上传期间显示详细输出”。这反过来允许更精确的错误分析。

# iphone - 应用程序中的网站和刷新按钮

> ID：13901212
> 
> 赞同：-1
> 
> 时间：2012-12-16T12:18:28.810
> 
> 标签：iphone, ios, web, refresh

如何在应用程序的选项卡上显示网站？

并创建刷新按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:29:21.720

假设您要将 UIWebView 添加到 UIViewController。把它放在你的 viewDidLoad 方法中：

```
UIWebView *wv = [[UIWebView alloc] initWithFrame:self.view.frame];
NSURLRequest *req = [[NSURLRequest alloc] initWithURL:[NSURL urlWithString:@"www.google.com"]];
[wv loadRequest:req];
[self.view addSubview:wv]; 
```

关于刷新按钮：确保在您的 .h 文件中定义了“wv”并使用此方法：

```
- (IBAction)refresh
{
    [wv reload];
} 
```

# vbscript - 在 VBScript 中使用类型库中的枚举

> ID：13901215
> 
> 赞同：0
> 
> 时间：2012-12-16T12:18:39.110
> 
> 标签：vbscript, enums, automation, idl

我正在为用 C++ 编写的现有应用程序实现 COM 接口。COM 接口用于从 VBScript 自动化应用程序。

我想通过 COM 接口调用的方法之一有一个参数，在 C++ 中，它有一个`enum`类型。我`enum`在 IDL 文件中定义了一个相应的类型，并`oleview`显示这些值已注册：

```
// Copied from type library viewer    
typedef enum
{
   MyValueA = 0,
   MyValueB = 1,
   MyValueC = 2
} MyEnum; 
```

但是，当我在 VBScript 中传递这些值之一时，CPP 实现接收到的值始终为 0。我假设我没有使用正确的 VBScript 语法。直接传递一个整数值是有效的，传递一些随机的东西（比如`ghfitgr`）也会导致 0，这可能是 发生的事情`MyValueB`，等等。

我找到了一个`enum.member`应该使用的声明，即`MyEnum.MyValue`，但这会导致语法错误 ( `object required: MyEnum`)。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:31:11.533

后期绑定的 VBScript 不能/不会从 .dll 中提取这些信息，您得到的只是对象（通过 CreateObject()）以及它们提供的内容。**因此，通过使用Const**定义具有体面名称的值，可以省去很多麻烦和黑客攻击。

**澄清：**

我的意思是： VBScript 代码中的**常量**。

# c# - 局域网连接开启或关闭

> ID：13901229
> 
> 赞同：2
> 
> 时间：2012-12-16T12:19:53.947
> 
> 标签：c#, c++, networking, windows-ce

在使用 c++ 或 c# 的 wince 7 中找出 LAN 连接是打开还是关闭的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:21:44.950

您可以在您的 c# 或 c++ 应用程序中使用 ipConfig 命令行工具，它提供所有网络适配器的状态。

这个问题可能有用：[Checking network status in C#](https://stackoverflow.com/questions/314213/checking-network-status-in-c-sharp)

> ```
> bool networkUp
>     = System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable(); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:23:43.300

试试这个：

```
try
{
System.Net.IPHostEntry entry = System.Net.Dns.GetHostByName("hostname");
// found host
}
catch(System.Net.Socket.SocketException)
{
//host not found == LAN not connected!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:34:20.810

您可以[`NetworkChange`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkchange.aspx)在 .NET 中使用类。对于局域网连接，使用[`NetworkInterface.GetIsNetworkAvailable()`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkchange.aspx)方法。

```
Return Value
Type: System.Boolean
true if a network connection is available; otherwise, false. 
```

也看看那些；

```
System.Net.NetworkInformation.NetworkChange.NetworkAvailabilityChanged
System.Net.NetworkInformation.NetworkChange.NetworkAddressChanged 
```

# objective-c - NSCursor 设置不适用于未聚焦的窗口

> ID：13901232
> 
> 赞同：4
> 
> 时间：2012-12-16T12:20:19.180
> 
> 标签：objective-c, macos, cocoa, nscursor

编辑：我在 GitHub 上创建了一个小型 XCode 项目，复制了我所描述的问题：[https ://github.com/mdinacci/testnscursor](https://github.com/mdinacci/testnscursor)

我有一个习惯`NSTableCellView`，我在其中跟踪鼠标进入/退出事件`NSTextField`。当鼠标进入该字段时，我将光标更改为指向手：

```
- (void)mouseEntered:(NSEvent *)theEvent
{
    NSCursor *cursor = [NSCursor pointingHandCursor];
    [cursor set];
}

- (void)mouseExited:(NSEvent *)theEvent
{
    NSCursor *cursor = [NSCursor arrowCursor];
    [cursor set];
} 
```

表格显示在 an`NSPopover`中，当弹出框处于焦点时，上面的代码可以很好地工作，但在弹出框未获得焦点时就不行了。单元格视图**确实**接收进入/退出事件，但光标根本不会更新。

这是一个错误吗？任何想法为什么当弹出框不在焦点时光标不会更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:34:17.900

Apple 确认这是一个错误 (#2277286)，据我所知，没有可用的解决方法。

# c# - 使用 LINQ 合并 2 个列表并汇总多个属性

> ID：13901234
> 
> 赞同：7
> 
> 时间：2012-12-16T12:20:31.307
> 
> 标签：c#, .net, linq

我有一个包含以下属性的类：

```
public class SomeClass()
{
public Int32 ObjectId1 {get;set;}
public Int32 ObjectId2 {get;set;}
public Int32 ActiveThickeness {get;set;}
public Int32 ActiveFilterThickness {get;set;}
} 
```

我也有 2 个列表：

```
List<SomeClass> A
List<SomeClass> B 
```

列表 A 有数据：

```
| ObjectId1 | ObjectId2 | ActiveThickness | ActiveFilterThickness |
-------------------------------------------------------------------
|     1     |     3     |       50        |           0           |
 ------------------------------------------------------------------
|     1     |     2     |       400       |           0           |
-------------------------------------------------------------------
|     4     |    603    |       27        |           0           |
------------------------------------------------------------------- 
```

清单 B 有数据：

```
| ObjectId1 | ObjectId2 | ActiveThickness | ActiveFilterThickness |
-------------------------------------------------------------------
|     1     |     3     |       0         |         13671         |
 ------------------------------------------------------------------
|     1     |     2     |       0         |          572          |
-------------------------------------------------------------------
|    29     |    11     |       0         |         4283          |
------------------------------------------------------------------- 
```

我想将 A 和 B（如果可能，使用 LINQ）合并到 SomeCalss 的列表 C 中，其中包含如下数据：

```
| ObjectId1 | ObjectId2 | ActiveThickness | ActiveFilterThickness |
-------------------------------------------------------------------
|     1     |     3     |       50        |         13671         |
 ------------------------------------------------------------------
|     1     |     2     |       400       |          572          |
-------------------------------------------------------------------
|    29     |    11     |       0         |         4283          |
-------------------------------------------------------------------
|     4     |    603    |       27        |           0           |
------------------------------------------------------------------- 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T12:34:46.270

用于`GroupBy`对常见对象进行分组并`Sum`汇总所需属性

```
 var ab = A.Concat(B).GroupBy(x => new
                                              {
                                                      x.ObjectId1,
                                                      x.ObjectId2
                                              });

        var result = ab.Select(x => new SomeClass
                                        {
                                                ObjectId1 = x.Key.ObjectId1,
                                                ObjectId2 = x.Key.ObjectId2,
                                                ActiveFilterThickness = x.Sum(i => i.ActiveFilterThickness),
                                                ActiveThickeness = x.Sum(i => i.ActiveThickeness)
                                        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:40:46.580

请参阅[LINQ - 完全外部联接](https://stackoverflow.com/questions/5489987/linq-full-outer-join)(SO)。

通过进行左外连接和右外连接，然后将这两者结合起来，您应该会得到您想要的东西。

```
var leftOuterJoin = from someclass1 in A
                    join someclass2 in B
                    on someclass1.ObjectID2 equals someclass2.ObjectID2
                    into temp
                    from item in temp.DefaultIfEmpty(new SomeClass(){ objectID1 = someclass1.objectID1, ... })
                    select new SomeClass()
                    {
                        ...
                    };
var rightOuterJoin = from someclass2 in B
                     join someclass1 in A
                     on someclass1.ObjectID2 equals someclass2.ObjectID2
                    into temp
                    from item in temp.DefaultIfEmpty(new SomeClass(){ objectID1 = someclass1.objectID1, ... })
                    select new SomeClass()
                    {
                        ...
                    };
var fullOuterJoin = leftOuterJoin.Union(rightOuterJoin); 
```

# jqplot - JqPlot 修剪 XAxis 值

> ID：13901243
> 
> 赞同：0
> 
> 时间：2012-12-16T12:21:34.830
> 
> 标签：jqplot

如何修剪图表中的 xaxis 值？

![样本](../Images/a1c3249821e06489f8770636e940ed20.png)

我正在使用[http://www.jqplot.com/](http://www.jqplot.com/)插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:04:41.063

尝试这样的事情：

```
xaxis:{
  autoscale: true,
  formatString: "%.2f"
} 
```

让我知道..

# django - 仅更新 models.Model 中的特定字段

> ID：13901244
> 
> 赞同：114
> 
> 时间：2012-12-16T12:21:37.703
> 
> 标签：django, django-models, django-views, django-database

我有一个模型

```
class Survey(models.Model):
    created_by = models.ForeignKey(User)
    question = models.CharField(max_length=150)
    active = models.NullBooleanField()
    def __unicode__(self):
        return self.question 
```

现在我只想更新该`active`字段。所以我这样做：

```
survey = get_object_or_404(Survey, created_by=request.user, pk=question_id)
survey.active = True
survey.save(["active"]) 
```

现在我得到一个错误`IntegrityError: PRIMARY KEY must be unique`。

我对这种方法进行更新是否正确？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-12-16T12:59:28.707

要更新字段子集，您可以使用[`update_fields`](https://docs.djangoproject.com/en/2.0/ref/models/instances/#specifying-which-fields-to-save)：

```
survey.save(update_fields=["active"]) 
```

该`update_fields`参数是在 Django 1.5 中添加的。在早期版本中，您可以改用该[`update()`](https://docs.djangoproject.com/en/2.0/ref/models/querysets/#update)方法：

```
Survey.objects.filter(pk=survey.pk).update(active=True) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-16T12:36:34.413

通常，在一个或多个模型实例中更新某些字段的正确方法是[`update()`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#update)在相应的查询集上使用该方法。然后你做这样的事情：

```
affected_surveys = Survey.objects.filter(
    # restrict your queryset by whatever fits you
    # ...
    ).update(active=True) 
```

这样，您不再需要调用`save()`您的模型，因为它会自动保存。此外，该`update()`方法返回受您的更新影响的调查实例的数量。

# java - JFrame 行为怪异

> ID：13901245
> 
> 赞同：2
> 
> 时间：2012-12-16T12:21:41.150
> 
> 标签：java, swing, components, jframe, jinternalframe

在我的程序中，我在背景中显示带有歌曲的图像。歌曲完成后，我需要关闭框架和`JInternalFrame`。这是代码：

```
package projectfinal;
import javax.swing.*;
import java.io.File;
import java.io.IOException;

/* MORE IMPORTS */
public class ImagePanel extends javax.swing.JFrame {

    public static class audio extends JApplet {

        private static final int EXTERNAL_BUFFER_SIZE = 128000;

        public void aaudio() {

            String strFilename = "E:/zehreelay.wav";
            File soundFile = new File(strFilename);

            AudioInputStream audioInputStream = null;
            try {
                audioInputStream = AudioSystem.getAudioInputStream(soundFile);
            } catch (Exception e) {

                e.printStackTrace();
                System.exit(1);
            }

            AudioFormat audioFormat = audioInputStream.getFormat();

            SourceDataLine line = null;
            DataLine.Info info = new DataLine.Info(SourceDataLine.class,
                audioFormat);
            try {
                line = (SourceDataLine) AudioSystem.getLine(info);

                line.open(audioFormat);
            } catch (LineUnavailableException e) {
                e.printStackTrace();
                System.exit(1);
            } catch (Exception e) {
                e.printStackTrace();
                System.exit(1);
            }
            line.start();
            int nBytesRead = 0;
            byte[] abData = new byte[EXTERNAL_BUFFER_SIZE];
            while (nBytesRead != -1) {
                try {
                    nBytesRead = audioInputStream.read(abData, 0, abData.length);
                } catch (IOException e) {
                    e.printStackTrace();
                }
                if (nBytesRead >= 0) {
                    int nBytesWritten = line.write(abData, 0, nBytesRead);
                }

            }
            line.drain();

            line.close();

            jInternalFrame1.setVisible(false);
            /**
            * closing internal frame
            */
        }
    }

    /**
    * Creates new form NewJFrame
    */
    public ImagePanel() {

        initComponents();

    }

    @SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jInternalFrame1 = new javax.swing.JInternalFrame();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();

        javax.swing.GroupLayout jInternalFrame1Layout = new javax.swing.GroupLayout(jInternalFrame1.getContentPane());

        //////////more code////////////////////////////////////
        jInternalFrame1.getContentPane().setLayout(jInternalFrame1Layout);
        jInternalFrame1.addComponentListener(new java.awt.event.ComponentAdapter() {

            public void componentHidden(java.awt.event.ComponentEvent evt) {
                hiden(evt);
            }
        });
        /////adding a listner for component///
    }

    public static void main(String args[]) {

        start();

    }

    private void hiden(java.awt.event.ComponentEvent evt) {

        setVisible(false);
    }

    public static void start() {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new ImagePanel().setVisible(true);
            }
        });
        audio obj = new audio();
        obj.aaudio();
    }
    private static javax.swing.JInternalFrame jInternalFrame1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
/////more variables...//////
} 
```

*这段代码很好，但是当我在没有*添加组件监听器的情况下尝试时，`getRootPane().SetVisible(false)`或者它们`jInternalFrame1.getContentPane().setVisible(false)`都`setVisible(false)`没有工作，但只有在添加组件隐藏监听器后才有效。为什么？有什么原因吗？那怎么`JInternalFrame`工作（`JInternalFrame.setVisible(false)`）？这有关系`rootPane()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:25:36.590

[*正如在Initial Threads*](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)中所讨论的，“一个初始线程通过调用`invokeLater`or来调度 GUI 创建任务`invokeAndWait`。” 您正在尝试在同一个初始线程上播放声音和操作 GUI。相反，在初始线程上启动声音并在 EDT 上构建 GUI，如此处所示[，或者启动一个单独的线程来播放声音，如此](https://stackoverflow.com/a/10670509/230513)[处](https://stackoverflow.com/a/12548978/230513)所示。

> 我不想使用 AWT 调度线程。

对，您不想使用 AWT 事件调度线程来播放声音，但您*必须*将它用于 GUI。

> 这个问题有些悬而未决。声音的播放很轻，所以必须由单一的EDT处理。

我只能推测使用不同的组件改变了足够的时间来影响你平台上的结果。在程序正确同步之前，总会有一些环境可以工作，也有一些环境会失败。基本规则是：不要阻塞 EDT。另请参阅此[答案](https://stackoverflow.com/a/7809480/230513)、此[答案](https://stackoverflow.com/a/26318/230513)和[Java Sound](https://stackoverflow.com/tags/javasound/info)标记。

# mysql - 通过 4 个不同列的值获取唯一分组

> ID：13901247
> 
> 赞同：0
> 
> 时间：2012-12-16T12:21:55.877
> 
> 标签：mysql, group-by, distinct

好的，我想做的是尝试从一个跨越 4 个单独列的表中获取唯一值。

例如，我有以下查询，它可以在其中一列上正常工作。

```
SELECT 
    rest.cuisine1, c.name
FROM
    specials
    INNER JOIN restaurant AS rest ON specials.restaurantid=rest.id
    INNER JOIN cuisine AS c ON rest.cuisine1=c.id
WHERE
    dateend >= CURDATE()
AND
    (specials.state='VIC' OR specials.state = 'ALL') 
AND 
    specials.status = 1 
AND 
    rest.status = 1
GROUP BY
    c.id; 
```

现在，`rest.cuisine1`是包含数据的列之一。正如预期的那样，此查询仅从该列返回唯一值。以下是返回的示例：

```
12 Cafe
18 Asian
29 Coffee 
```

该表中还有 3 列，它们是：

```
rest.cuisine2
rest.cuisine3
rest.cuisine4 
```

我可以运行上述查询 4 ​​次（每列一个），然后通过 PHP 运行值以仅从 4 个不同的结果集中获取唯一值，但是我想知道是否可以在一个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:32:43.373

尝试这个

```
 SELECT 
    rest.cuisine1, c.name ,rest.cuisine2 , rest.cuisine3, rest.cuisine4
FROM
    specials
    INNER JOIN restaurant AS rest ON specials.restaurantid=rest.id
    INNER JOIN cuisine AS c ON rest.cuisine1=c.id
            INNER JOIN cuisine AS c2 ON rest.cuisine2=c2.id
            INNER JOIN cuisine AS c3 ON rest.cuisine3=c3.id
            INNER JOIN cuisine AS c4 ON rest.cuisine4=c4.id
WHERE
    dateend >= CURDATE()
AND
    (specials.state='VIC' OR specials.state = 'ALL') 
AND 
    specials.status = 1 
AND 
    rest.status = 1
GROUP BY
    c.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:59:59.600

该答案基于 MahmoudGamal 在评论中发布的答案，他出于某种原因将其删除。

我用下面的..

```
SELECT 
    c.id, c.name
FROM
    specials
    INNER JOIN restaurant AS rest ON specials.restaurantid=rest.id
    INNER JOIN cuisine AS c ON c.id IN (rest.cuisine1, rest.cuisine2, rest.cuisine3, rest.cuisine4)
WHERE
    dateend >= CURDATE()
AND
    (specials.state='VIC' OR specials.state = 'ALL') 
AND 
    specials.status = 1 
AND 
    rest.status = 1
GROUP BY
    c.id; 
```

# asp.net-mvc - jqGrid导航按钮触发发布方法？

> ID：13901248
> 
> 赞同：0
> 
> 时间：2012-12-16T12:22:04.503
> 
> 标签：asp.net-mvc, jqgrid

jqGrid

```
$(document).ready(function () {

    $("#grid").jqGrid({
        url: '@Url.Action("GetAllAuthors", "Admin")',
        datatype: "json",
        mtype: 'get',
        colNames: ['Yazar Adı', 'Öz Geçmiş'],
        colModel: [
                  { name: 'Name', index: 'Name', editable: false },
                  { name: 'Description', index: 'Description', editable: false }
        ],
        jsonReader: {
            repeatitems: false,
            id: "sno",
            root: "rows", //array containing actual data
            page: "page", //current page
            total: "total", //total pages for the query
            records: "records", //total number of records
            repeatitems: false
        },
        rowNum: 10,
        rowList: [10, 20, 30, 40, 50],
        pager: jQuery('#gridpager'),
        sortname: 'Name',
        viewrecords: true,
        sortorder: "asc",
        width: 710,
        height: 300
    })
    .navGrid('#gridpager', { edit: false, add: false, del: false, search: false, refresh: false })
    .navButtonAdd('#gridpager', {
        caption: "Düzenle",
        buttonicon: "ui-icon-pencil",
        onClickButton: function () {
            var grid = $("#grid");
            var rowid = grid.jqGrid('getGridParam', 'selrow');
            //alert(rowid + " - " + grid.jqGrid('getCell', rowid, 'CustomerName') + " - Link: " + $("#customers_grid_table a.customer_details").attr("href"));
            window.location = '@Url.Action("EditAuthor", "Admin")?authorId=' + rowid;
            //LoadAction('@Url.Action("EditAuthor", "Admin")?authorId=' + rowid);
        }
    });  //end jqgrid
}); 
```

我的控制器中有两种方法

获取方法

```
[HttpGet]
public ActionResult EditAuthor(int authorId) 
```

发布方法

```
[HttpPost]
public ActionResult EditAuthor(AuthorViewModel model, HttpPostedFileBase file) 
```

我选择了一行并单击了编辑按钮，我希望触发 get 方法，但触发了 post 方法。我该怎么做才能触发 get 方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:20:04.203

如果您设置新值，`window.location`则将使用 HTTP GET。要生成 HTTP POST，您可以使用`$.ajax`或提交一些表单。例如，您可以动态构建不可见`<form>`并提交它。例如

```
onClickButton: function () {
    var rowid = $(this).jqGrid("getGridParam", "selrow"),
        myForm = document.createElement("form"),
        param1 = document.createElement("input");

    myForm.action = '@Url.Action("EditAuthor", "Admin")';
    myForm.method = "POST";
    myForm.style.display="none";

    param1.name = "authorId";
    param1.type = "text";
    param1.value = rowid;
    myForm.appendChild(param1);

    document.body.appendChild(myForm);
    myForm.submit();
    document.body.removeChild(myForm);
} 
```

我建议您另外包括是否选择了某些行（是否`rowid`不为空）的附加验证。

此外，我推荐你

*   在网格中使用**always** `gridview: true`选项，这只会提高网格的性能。
*   将选项替换`pager: jQuery('#gridpager')`为`pager: '#gridpager'`.
*   `jsonReader`将option的当前值替换为`jsonReader: {repeatitems: false, id: "sno"}`. 您指定的选项将与默认值结合使用（请参阅*文档*[）](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)。此外，您当前的`jsonReader`option 值包含语法错误，因为您`repeatitems: false`两次指定了相同的属性。

# web-services - 如何在任何人（即匿名用户）可访问的drupal 中创建Web 服务？

> ID：13901252
> 
> 赞同：0
> 
> 时间：2012-12-16T12:22:30.670
> 
> 标签：web-services, rest, drupal, web

我使用服务模块创建了一个 web 服务，并在 drupal 7 中创建了一个资源，匿名用户或任何用户都可以公开访问。目前只有登录的用户可以访问它，但我希望任何人都可以使用 REST 网络服务来使用这个网络服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:40:56.337

您必须为匿名用户提供适当的权限才能使用 Web 服务。例如，如果您希望由匿名用户创建节点，则为匿名用户授予用户权限。

关于身份验证，您可以禁用它，因为它对所有人开放。

# c - 无法使纹理透明

> ID：13901254
> 
> 赞同：1
> 
> 时间：2012-12-16T12:23:04.693
> 
> 标签：c, opengl

我画了两个纹理，首先是纹理 A，然后是纹理 B。我总是觉得 A 总是在 b 之上，即使纹理 A 的某些部分是完全透明的，它也只是显示屏幕的背景颜色。这里的背景颜色是指我设置的颜色`glClearColor`。但是，无论我更改代码和图片，纹理的透明部分始终具有与背景颜色相同的颜色。

这是我的着色器语言源代码。

```
precision mediump float;
uniform sampler2D u_sampler; 
varying vec2 v_TexCoord;
void main() {
    gl_FragColor = texture2D(u_sampler, v_TexCoord);
} 
```

而且我已经启用了混合功能。

```
glEnable(GL_DEPTH_TEST);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T12:25:42.943

您是使用 2 个绘制调用渲染它还是使用多纹理。如果您将其作为 2 个绘制调用进行，则关闭深度测试，因为第二个纹理将始终无法通过深度测试（因为它不在与它相同的位置的多边形前面），因此不会被绘制。

如果您使用的是多纹理，那么您的问题可能在于您如何设置 alpha。

我真的怀疑是前者。

# javascript - VS2012 丢失的 JavaScript 调试器

> ID：13901255
> 
> 赞同：11
> 
> 时间：2012-12-16T12:23:10.620
> 
> 标签：javascript, debugging, visual-studio-2012

大约 2 周前，我失去了调试 JavaScript 的能力。我有安装了所有更新的 Windows 8 Pro、IE 10 和 Visual Studio 2012。在那之前，我没有任何问题 - 现在它在每个项目中都可以做到。

我得到的信息是...

“无可用源。当前代码线程当前未运行代码或无法获取调用堆栈”

关于如何恢复我的 JavaScript 调试器的任何建议？我已经尝试过修复和重新安装，但没有成功。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T03:00:50.750

在 Win 7 64 位上安装 IE 10 后，我在使用 VS 2012 时遇到了同样的问题。我尝试了几件事，包括“修复”VS、卸载/重新安装 IE10。我无法让 VS 在 javascript 中为任何东西设置断点。

最终起作用的是在 VS 2012 中，我单击了“播放”工具栏按钮（指向右侧的绿色小箭头），并为 Internet Explorer 列出了两项，一项是默认项。在该按钮下拉菜单的底部，我选择了“浏览方式”，这会弹出一个对话框，让我删除两个 IE 中的一个。我还选择了 Chrome，然后返回 IE，这可能会产生影响。无论如何，在这样做之后，一切都会重新开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:43:21.767

我一直在玩并删除了 KB2781514，对 VS2012 进行了修复并恢复了 JavaScript 调试器 - 现在一切似乎都可以正常工作，但我真的很害怕安装那个更新。

我还关闭了自动更新，并确保在添加大多数未来更新之前设置还原点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:46:19.637

从这篇文章中尝试解决方案 - [VS2010 and IE10 Attaching the Script debugger to process iexplore.exe failed](https://stackoverflow.com/questions/13421797/vs2010-and-ie10-attaching-the-script-debugger-to-process-iexplore-exe-failed/15168080#15168080)

*   关闭 IE
*   在提升的 cmd 提示符下运行以下命令：

    regsvr32.exe "%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll"

    或者

    32 位操作系统上的 %ProgramFiles%

    重新启动 VS 和 IE。我重新启动了机器以确保。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T22:57:04.187

去年 12 月，我在 WIN7 + IE10 CTP 上的 VS2010 和 VS2012 也遇到了同样的问题。我希望这个问题在 IE10 的 RTM 版本中得到解决，今天我发现它不是（可能是因为它不是 IE10 的问题）。

在下面的链接中查看我的答案，也许它也对你有用。

[VS2010 和 IE10 附加脚本调试器处理 iexplore.exe 失败](https://stackoverflow.com/questions/13421797/vs2010-and-ie10-attaching-the-script-debugger-to-process-iexplore-exe-failed/15373837#15373837)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T00:12:05.240

我在使用 Windows8 + IE10 + VS2012 Update 1 时遇到了同样的错误，但是今天我用 Update 2 更新了 vs2012，问题就解决了。

[VS2012 更新 2 在这里](http://www.microsoft.com/visualstudio/esn/downloads#d-visual-studio-2012-update)

# symfony - 如何在 symfony2 的控制器中读取 parameters.yml？

> ID：13901256
> 
> 赞同：153
> 
> 时间：2012-12-16T12:23:29.277
> 
> 标签：symfony, symfony-2.3

我在我的 app/config/parameters.yml 中放置了几个自定义变量。

```
parameters:
    api_pass: apipass
    api_user: apiuser 
```

我需要从我的控制器访问这些，并尝试使用

```
$this->get('api_user'); 
```

从我的控制器文件中。当我尝试这个时，我收到以下错误消息：

```
You have requested a non-existent service "api_user". 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2012-12-16T12:26:29.823

在**Symfony 2.6 和更早的版本**中，要在控制器中获取参数 - 您应该首先获取容器，然后 - 所需的参数。

```
$this->container->getParameter('api_user'); 
```

本[文档章节](http://symfony.com/doc/master/components/dependency_injection/definitions.html#getting-and-setting-container-parameters)对此进行了解释。

虽然`$this->get()`控制器中的方法将加载服务（[doc](http://symfony.com/doc/current/book/controller.html#accessing-other-services)）

在**Symfony 2.7 和更新版本**中，要在控制器中获取参数，您可以使用以下命令：

```
$this->getParameter('api_user'); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-01-21T20:51:34.067

# 清洁方式 - 2018+，Symfony 3.4+

**自 2017 年和 Symfony 3.3 + 3.4 以来，**有更清洁的方式 - 易于设置和使用。

**您可以通过它的构造函数将参数传递给类**，而不是使用容器和服务/参数定位器反模式。别担心，这不是耗时的工作，而是*设置一次后忘记*的方法。

如何分两步设置？

### 1.`app/config/services.yml`

```
# config.yml

# config.yml
parameters:
    api_pass: 'secret_password'
    api_user: 'my_name'

services:
    _defaults:
        autowire: true
        bind:
            $apiPass: '%api_pass%'
            $apiUser: '%api_user%'

    App\:
        resource: .. 
```

## 2.任何`Controller`

```
<?php declare(strict_types=1);

final class ApiController extends SymfonyController
{
    /**
     * @var string 
     */
    private $apiPass;

    /**
     * @var string
     */
    private $apiUser;

    public function __construct(string $apiPass, string $apiUser)
    {
        $this->apiPass = $apiPass;
        $this->apiUser = $apiUser;
    }

    public function registerAction(): void
    {
        var_dump($this->apiPass); // "secret_password"
        var_dump($this->apiUser); // "my_name"
    }
} 
```

## 即时升级准备就绪！

如果您使用较旧的方法，您可以[使用 Rector 将其自动化](https://github.com/rectorphp/rector/pull/333)。

# 阅读更多

这称为服务定位器方法**上的构造函数注入。**

要了解更多信息，请查看我的文章[How to Get Parameter in Symfony Controller the Clean Way](https://www.tomasvotruba.cz/blog/2018/01/22/how-to-get-parameter-in-symfony-controller-the-clean-way)。

（它已经过测试，我会为新的 Symfony 主要版本（5、6...）更新它）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-03-31T08:28:45.923

我给你发了一个 swiftmailer 的例子：

## 参数.yml

```
recipients: [email1, email2, email3] 
```

## 服务：

```
your_service_name:
        class: your_namespace
        arguments: ["%recipients%"] 
```

## 服务等级：

```
protected $recipients;

public function __construct($recipients)
{
    $this->recipients = $recipients;
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-09-05T12:44:02.047

在 Symfony 4 中，您可以使用`ParameterBagInterface`：

```
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;

class MessageGenerator
{
    private $params;

    public function __construct(ParameterBagInterface $params)
    {
        $this->params = $params;
    }

    public function someMethod()
    {
        $parameterValue = $this->params->get('parameter_name');
        // ...
    }
} 
```

并在`app/config/services.yaml`：

```
parameters:
    locale: 'en'
    dir: '%kernel.project_dir%' 
```

它适用于控制器和表单类。[更多细节可以在 Symfony 博客中找到](https://symfony.com/blog/new-in-symfony-4-1-getting-container-parameters-as-a-service)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-09T10:13:33.997

您可以使用：

```
public function indexAction()
{
   dump( $this->getParameter('api_user'));
} 
```

有关更多信息，我建议您阅读文档：

[http://symfony.com/doc/2.8/service_container/parameters.html](http://symfony.com/doc/2.8/service_container/parameters.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-15T14:15:59.953

在 Symfony 5 中，当您的 Controller 扩展时，`AbstractController`您可以使用：

```
$projectDir = $this->getParameter('kernel.project_dir'); 
```

有关更多信息，请参阅[https://symfony.com/doc/current/configuration.html#accessing-configuration-parameters](https://symfony.com/doc/current/configuration.html#accessing-configuration-parameters)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-03T09:34:09.680

在 Symfony 4.3.1 我使用这个：

**服务.yaml**

```
HTTP_USERNAME: 'admin'
HTTP_PASSWORD: 'password123' 
```

**FrontController.php**

```
$username = $this->container->getParameter('HTTP_USERNAME');
$password = $this->container->getParameter('HTTP_PASSWORD'); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-12-08T12:45:45.597

您还可以使用：

```
$container->getParameter('api_user'); 
```

访问[http://symfony.com/doc/current/service_container/parameters.html](http://symfony.com/doc/current/service_container/parameters.html)

# jquery - 滚动到带有动画的 div 顶部

> ID：13901257
> 
> 赞同：0
> 
> 时间：2012-12-16T12:23:38.687
> 
> 标签：jquery, css, jquery-animate

```
$(document).ready(function() {
    $('.up img').on('click', function(){
        $('.content').animate({top: '0'}, 1500, 'swing');
    })
}); 
```

这并没有让我看到内容的顶部，这让我真的有点困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:33:44.180

元素是否设置了 top 属性？您可以使用 scrollTop() 获取元素位置

```
$('html, body').animate({scrollTop:$('#SOMETHING').offset().top - 20},1500, 'swing'); 
```

将 SOMETHING id 替换为要滚动到的元素

# c# - 提高 DotNetZip 内存提取的性能

> ID：13901259
> 
> 赞同：1
> 
> 时间：2012-12-16T12:23:48.550
> 
> 标签：c#, wpf

自从将我的代码转换为从档案中读取资源后，我注意到我的应用程序的性能略有下降。我将如何改进以下代码以帮助将性能提高到使用平面文件系统时或尽可能接近时的性能。

```
class Resource
{
    private static readonly string ResourcePath = AppDomain.CurrentDomain.BaseDirectory + "resources.pak";
    private const string ResourcePassword = "0ORzjHcFxV0QXTuOizu0";

    private static ZipFile Read(string filepath, string password = null)
    {
        var file = ZipFile.Read(filepath);
        file.Password = password;
        return file;
    }

    internal static List<string> GetFiles(string haystack, string needle = "*")
    {
        var resource = Read(ResourcePath, ResourcePassword).SelectEntries(needle, haystack);
        return resource.Select(filepath => filepath.ToString().Replace("ZipEntry::", "")).ToList();
    }

    internal static MemoryStream ReadFile(string filepath)
    {
        var file = Read(ResourcePath, ResourcePassword);
        var stream = new MemoryStream();
        file[filepath].Extract(stream);
        return stream;
    }

    internal static ImageSource StreamImage(string filepath)
    {
        var getFile = Resource.ReadFile(filepath);
        var imageSource = new BitmapImage();
        imageSource.BeginInit();
        imageSource.StreamSource = getFile;
        imageSource.EndInit();
        return imageSource;
    }

    internal static int[] ImageSize(string filepath)
    {
        int[] sizeValues = {0, 0};
        var readImage = Resource.ReadFile(filepath);
        var image = new BitmapImage();
        image.BeginInit();
        image.StreamSource = readImage;
        image.EndInit();
        sizeValues[0] = image.PixelWidth;
        sizeValues[1] = image.PixelHeight;
        return sizeValues;
    }

} 
```

请注意，我已删除错误检查以保持代码简短和重点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:38:02.203

性能下降是什么意思？我想你的意思是响应能力？这可能是因为您在主线程上解压这些资源。将此工作移至后台线程。

这是 .Net 4.5 的示例，使用 async / await。（未经测试）

```
class Resource
{
    private static readonly string ResourcePath = AppDomain.CurrentDomain.BaseDirectory + "resources.pak";
    private const string ResourcePassword = "0ORzjHcFxV0QXTuOizu0";

    private static ZipFile Read(string filepath, string password = null)
    {
        var file = ZipFile.Read(filepath);
        file.Password = password;
        return file;
    }

    internal static List<string> GetFiles(string haystack, string needle = "*")
    {
        var resource = Read(ResourcePath, ResourcePassword).SelectEntries(needle, haystack);
        return resource.Select(filepath => filepath.ToString().Replace("ZipEntry::", "")).ToList();
    }

    internal static Task<MemoryStream> ReadFile(string filepath)
    {
        return Task.Run(() =>
            {
                var file = Read(ResourcePath, ResourcePassword);
                var stream = new MemoryStream();
                file[filepath].Extract(stream);
                return stream;
            });
    }

    internal async static Task<ImageSource> StreamImage(string filepath)
    {
        var imageSource = new BitmapImage();
        imageSource.BeginInit();
        imageSource.StreamSource = await ReadFile(filepath);
        imageSource.EndInit();
        return imageSource;
    }

    internal async static Task<int[]> ImageSize(string filepath)
    {
        int[] sizeValues = { 0, 0 };
        var image = new BitmapImage();
        image.BeginInit();
        image.StreamSource = await ReadFile(filepath);
        image.EndInit();
        sizeValues[0] = image.PixelWidth;
        sizeValues[1] = image.PixelHeight;
        return sizeValues;
    }
} 
```

# c - 从 c 调用汇编函数

> ID：13901261
> 
> 赞同：8
> 
> 时间：2012-12-16T12:24:20.437
> 
> 标签：c, linux, assembly, gcc, x86

我试图从 c 调用一个汇编函数，但我不断收到错误。

```
 .text
    .globl integrate
    .type integrate, @function
integrate:
    push %ebp
    mov %esp, %ebp
    mov $0,%edi
start_loop:                
    cmp %edi,1024           
    je loop_exit
    mov 8(%ebp),%eax          
    mov 12(%ebp),%ecx          
    sub %eax,%ecx              
    add %edi,%ecx
    incl %edi                
    jmp start_loop             
loop_exit:                 
    movl %ebp, %esp
    popl %ebp
    ret 
```

这是我的汇编函数，文件名为integrate.s。

```
#include <stdio.h>

extern int integrate(int from,int to);

void main()
{
    printf("%d",integrate(1,10));
} 
```

这是我的c代码。

```
function.c:5:6: warning: return type of ‘main’ is not ‘int’ [-Wmain]
/tmp/cciR63og.o: In function `main':
function.c:(.text+0x19): undefined reference to `integrate'
collect2: ld returned 1 exit status 
```

每当我尝试使用 gcc -Wall function.c -o 函数编译我的代码时，它都会给出“未定义的集成引用”错误。我还尝试从 c 添加到集成文件的链接，比如

```
#include<(file path)/integrate.s> 
```

但它也没有用。顺便说一句，汇编代码在做什么并不重要，现在我只是想成功地从 c 调用函数。有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T13:36:24.740

我看到代码存在以下问题：

*   调用约定要求您必须保留`edi`
*   `cmp %edi,1024`正在`1024`用作地址，可能会出错。您想`cmp $1024,%edi`与立即数进行比较
*   您正在重新加载`eax`，并且`ecx`每次迭代都从参数中重新加载，因此您执行的计算无效
*   您似乎没有将任何合理的返回值放入`eax`（它将返回`from`传入的值）

即使“汇编代码在做什么并不重要”，前两点也适用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-01T12:01:33.200

不确定您是否解决了这个问题，但这是我如何做到的。

编译时确保添加两个文件：`$gcc main.c print_msg.s -o main`

自行运行汇编程序文件：`$as print_msg.s -o print_msg.o`后跟`$ld print_msg.o -e print -o print_msg`. 请注意，如果您只想从 C 文件运行它，则不需要这样做。

汇编文件： `print_msg.s`

```
# A program to be called from a C program
# Declaring data that doesn't change
.section .data
    string: .ascii  "Hello from assembler\n"
    length: .quad   . - string

# The actual code
.section .text
.global print
.type print, @function              #<-Important

print:
    mov     $0x1,%rax               # Move 1(write) into rax
    mov     $0x1,%rdi               # Move 1(fd stdOut) into rdi.
    mov     $string,%rsi            # Move the _location_ of the string into rsi
    mov     length,%rdx             # Move the _length_ of the string into rdx
    syscall                         # Call the kernel

    mov     %rax,%rdi               # Move the number of bytes written to rdi
    mov     $0x3c,%rax              # Move 60(sys_exit) into rax
    syscall                         # Call the kernel 
```

然后是 C 文件：`main.c`

```
extern void print(void);

int main(void)
{
    print();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-16T12:28:48.650

> 警告：'main' 的返回类型不是 'int'</p>

表示 'main' 的返回类型不是 'int'... 改成`int`, 那么：

```
int main()
{
} 
```

此外，要解决链接器错误，请调用 GCC 作为

```
gcc -o myprog main.c integrate.s 
```

这应该有效。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-01-22T05:14:27.813

## x86-64 Linux 示例

这里已经有一个答案，它显示了如何调用 a `void func(void)`，但这里有一个**x86-64 Linux 示例**，它接受参数并具有返回值，这就是问题中所要求的。（该问题和其他一些答案使用的是 32 位代码，它具有不同的调用约定）。

首先，让我们简化汇编函数：

```
# Need to make it global so it can be accessed in another file with extern
.globl integrate

# Cannot hurt to define it as a function type, sometimes useful for dynamic linking, see comments in: https://stackoverflow.com/questions/65837016/how-to-call-a-function-in-an-external-assembly-file#comment116408928_65837016 
.type integrate, @function

integrate:
    # int integrate(int from /*EDI*/,  int to /*ESI*/)
    # INPUT:
    #   the first parameter `from` is contained in %edi, the int-sized low half of %rdi
    #   the second parameter `to`  is contained in %esi
    # OUTPUT:
    #   return is passed in %eax;  
    #      you can leave garbage in the high half of RAX if convenient

    lea  123(%rdi, %rsi), %ecx         # from + to + 123 just for example
    # (main work of function done)

    mov %ecx, %eax # it seems your return value is in %ecx
                   # but we need it in %eax for the return value to C
     # or just use EAX instead of ECX in the first place to avoid this instruction
    ret 
```

这是使用[System V](https://wiki.osdev.org/System_V_ABI)调用约定，其中将函数返回值传回，`rax`函数接收的参数传入`rdi`, `rsi`, `rdx`, `rcx`, `r8`, `r9`, 然后以相反的顺序传入堆栈。（[在 i386 和 x86-64 上 UNIX 和 Linux 系统调用（和用户空间函数）的调用约定是什么](https://stackoverflow.com/questions/2535989/what-are-the-calling-conventions-for-unix-linux-system-calls-and-user-space-f)）。例如：

```
long add_four_nums(int first, long second, short third, unsigned fourth); 
```

使用此原型声明的函数将接收`first`in `%edi`、`second`in `%rsi`、`third`in`%dx`和`fourth`in `%ecx`。它会返回它的`result`in `%rax`。

现在我们已经编写了程序集（尽管该函数主要是一个存根，用于显示如何接受参数和返回一个值），您可以像现在一样在 C 文件中使用该函数：

```
#include <stdio.h>
extern int integrate(int from,int to);
int main() {
    printf("%d\n", integrate(1,10));
} 
```

可以用gcc编译链接，然后运行，如下：

```
$ gcc -o combined -Wall main.c integrate.s   && ./combined 
```

# javascript - http-equiv="refresh" 上的 Javascript 钩子

> ID：13901262
> 
> 赞同：0
> 
> 时间：2012-12-16T12:24:43.573
> 
> 标签：javascript, html, meta-tags

我正在使用以下元标头来在打开页面时下载文件：

```
<meta http-equiv="refresh" content="3;URL=SomeFileName" /> 
```

有没有办法让一些 javascript 代码在 3 秒过后运行，即在浏览器开始下载 SomeFileName 之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:13:56.950

您可以使用`setTimeout()`它来计时，但如评论中所述，在这种情况下使用 JavaScript 重定向会更好。例子：

```
setTimeout(function(){
    /*
     * code here will be executed before the download
     */
    document.location = "downloadurl";
}, 3000); // 3000ms = 3s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:27:31.107

虽然大多数时候纯 javascript 重定向函数会是更好的解决方案，但有时您可能需要它。

看看这些：
[http://www.w3schools.com/jsref/event_onunload.asp](http://www.w3schools.com/jsref/event_onunload.asp)
[离开网页时的警报](https://stackoverflow.com/questions/1289234/alerts-when-navigating-away-from-a-web-page)
[http://msdn.microsoft.com/en-us/library/ie/ms536907(v =vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536907(v=vs.85).aspx)
[https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

基本上，当用户试图关闭或离开页面时会触发一个事件。您可以连接到该事件以进行自定义。

```
window.onbeforeunload = function () {
  var who = ["lover", "friend"][(Math.floor(Math.random()*2)+1)];
  return "Goodbye my " + who;
}; 
```

这个函数应该返回一个字符串或什么都不返回。如果是字符串，则会出现一个对话框，确认导航离开；如果它什么都不是，*即 undefined*，则不会发生拦截。

另请注意：

> 自 2011 年 5 月 25 日起，HTML5 规范规定在此事件期间可能会忽略对 window.showModalDialog()、window.alert()、window.confirm() 和 window.prompt() 方法的调用。

# javascript - JavaScript 在 html5 输出标签中显示 html 文本输入

> ID：13901266
> 
> 赞同：0
> 
> 时间：2012-12-16T12:25:36.207
> 
> 标签：javascript, html, forms

我正在尝试制作一个小的 JavaScript Web 应用程序，我可以用它来为我要制作的网页制作模板。（以加快设计和东西的速度。）但是当我这样做时，我想让它在我打字的时候实时更新。我知道可以这样做[，](http://inimino.org/~inimino/blog/javascript_live_text_input)但我认为这有点混乱。所以我试图改用html5输出元素，但我不能让它与文本字符串兼容，而不仅仅是数字。以下仅适用于数字：

```
<html>
    <body>
         <form oninput="x.value=parseInt(a.value)+parseInt(b.value)">
             <input type="range" name="a" value="50">
             <input type="number" name="b" value="50">
             <output name="x" for="a b"></output>
         </form>
    </body>
</html> 
```

PS：我是JS新手，只需要兼容FF即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:30:57.353

试试这个 -[**演示**](http://jsfiddle.net/fv9c4/)

```
<form oninput="xx.value=aa.value+bb.value">
    <input type="text" name="aa" value="hello">
    <input type="text" name="bb" value="world">
    <output name="xx" for="aa bb"></output>
</form> 
```

# javascript - 将 CSS 样式应用于新窗口而不使用 document.write

> ID：13901275
> 
> 赞同：0
> 
> 时间：2012-12-16T12:26:57.250
> 
> 标签：javascript, css

我用代码打开了一个新窗口：

```
w = window.open("", "ventana", "status=1,width=350,height=150"); 
```

我在那里创建了一张桌子

```
var tresumen = w.document.createElement("table"); 
```

等等等等...

一切正常，但是在应用 CSS 时，我发现新窗口没有读取我从主 html 引用的单独的 css 文件。在 CSS 中，我有一些`table`这样的行：

```
table {
        some attributes here;
} 
```

我可以考虑让新窗口读取 CSS 的唯一方法是将 a`document.write`放在新窗口的 javascript 中，将 html 代码放在那里以引用（再次）css文件，但因为它已经在 main html，我不明白为什么这是一个正确的方法......

我的错误是什么？

如何创建一个新窗口（没有自己的 html！）读取主窗口正在使用的 CSS？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:05:13.167

您可以将样式复制到新窗口：

```
var stylesheets = document.querySelectorAll('style, link[rel="stylesheet"]');
stylesheets = Array.prototype.slice.call(stylesheets);
for (var i = 0; i < stylesheets.length; i++) {
    copyStyle(window, w, stylesheets[i]);
}

function copyStyle(from, to, node) {
    var doc = to.contentDocument;
    var newStyle = doc.createElement(node.tagName);
    if (node.textContent) {
        newStyle.textContent = node.textContent;
    } else if (node.innerText) {
        newStyle.innerText = node.innerText;
    }
    newStyle.type = node.type;
    newStyle.src = node.src;
    newStyle.rel = node.rel;
    doc.getElementsByTagName('head')[0].appendChild(newStyle);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:01:16.517

如果没有在新窗口中加载或生成实际的 HTML 文档，您将依赖浏览器的标签汤解释来理解您的标记。

也就是说，您必须将样式或链接元素附加到该窗口的 DOM 中，该 DOM 引用您的外部样式表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-01T16:15:15.397

这是一种 ES6 方法，但 IE 会讨厌它：

```
function copyStyles(sourceDoc, targetDoc) {
  Array.from(sourceDoc.styleSheets).forEach(styleSheet => {
    if (styleSheet.cssRules) { // for <style> elements
      const newStyleEl = sourceDoc.createElement('style');

      Array.from(styleSheet.cssRules).forEach(cssRule => {
        // write the text of each rule into the body of the style element
        newStyleEl.appendChild(sourceDoc.createTextNode(cssRule.cssText));
      });

      targetDoc.head.appendChild(newStyleEl);
    } else if (styleSheet.href) { // for <link> elements loading CSS from a URL
      const newLinkEl = sourceDoc.createElement('link');

      newLinkEl.rel = 'stylesheet';
      newLinkEl.href = styleSheet.href;
      targetDoc.head.appendChild(newLinkEl);
    }
  });
} 
```

窃取自：[https ://hackernoon.com/using-a-react-16-portal-to-do-something-cool-2a2d627b0202](https://hackernoon.com/using-a-react-16-portal-to-do-something-cool-2a2d627b0202)

# java - C++ 到 Java 除法运算符

> ID：13901276
> 
> 赞同：0
> 
> 时间：2012-12-16T12:27:11.837
> 
> 标签：java, c++

C++ 代码：`if (!(number % i)) {`

Java代码：`if (!(number % i == 0)) {`

是对的吗？

**正确版本：**

**Java代码：`if ((number % i == 0)) {`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T12:28:26.303

正确，是的。**但他们不做同样的事情**。

在 Java 中，您需要进行比较，因为没有自动转换为布尔值。

等效的 C++ 代码将是

```
if (!(number % i == 0)) 
```

或者干脆

```
if (number % i) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T12:28:54.873

**是的，那是正确的。**

Java，将`boolean`a 视为`separate data type`具有 2 个不同的值：**true**和**false**

C++ 认为整数`0`等价于假，而其他值则为真。

但是，您已经颠倒了语句中的逻辑。

```
if (!(number % i)) { //returns true if number is divisible by i
if (!(number % i == 0)) { //returns true if number is not divisible by i 
```

# openedge - 如何更新/删除进程opengge中的一行？

> ID：13901279
> 
> 赞同：1
> 
> 时间：2012-12-16T12:28:00.790
> 
> 标签：openedge

如何在opengge进度中执行过程编辑器中的代码以删除/更新我从列表中选择的行，并且在我想从删除/更新按钮参加它之后？（使用动态临时表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:06:30.217

```
this it's what I'm working on:
    define temp-table ttcust no-undo
      field custnum   as integer
      field iname as character
      field city as character
      field cState as character
      field adress as character
       index custnum_custnumx is unique custnum.

define variable r as integer no-undo.
    define query custquery for ttcust.
    define browse query custquery display ttcast with 5 down.

form custbrowes with frame cust.

form
      ttcust.custnum:customer.custnum
      ttcust.iname:customer.name
      ttcust.city:customer.city
      ttcust.cstate:customer.state
      ttcust.adress:customer.address
     with custquery
      frame cust
  column 30
  row 1    .

procedure newRecord:
  define input parameter iName as character no-undo.
    define input parameter City as character no-undo.
      define input parameter cState as character no-undo.
        define input parameter Adress as character no-undo.
   create ttcust.
  assign
    r    = r + 1
    custnum  = r.
  assign  customer.name:iName = screen-value:''
          customer.city:City = screen-value:''
          customer.address:adress = screen-value:''
          customer.state:cState = screen-value:''

end.

run newRecord( ' ' ).

on "enter" of customer in frame cust do:
  apply "entry" to tt_cust in frame cust.
  return no-apply.
end.

on "insert-mode", "CTRL-I" anywhere do:
  run newRecord( " " ).
  close query custquery.
  open query custquery for each tt_cust.
  get last custquery.
  apply "entry" to tt_cust in frame cust.
  return no-apply.
end.

on "go" of tt_cust in frame cust do:
  tt_cust.name = self:screen-value.
  tt_cust.city = self:screen-value.
  tt_cust.cstate=self:screen-value.
  tt_cust.adress=self:screen-value.
  close query custquery.   
  open query custquery for each tt_cust.
  apply "entry" to customer in frame cust.
  return no-apply.
end.

on "value-changed" of customer in frame cust do:
  display tt_cust with frame cust.
end.

open query custquery for each tt_cust.

enable tt_cust with frame cust.
enable customer with frame cust.
apply "entry" to customer in frame cust.

wait-for "close" of this-procedure. 
```

# list - 在简单列表 A 和列表 B 之间进行列表比较的最有效方法是什么？

> ID：13901280
> 
> 赞同：0
> 
> 时间：2012-12-16T12:28:04.973
> 
> 标签：list, python-2.7, comparison, itertools

我有清单A：

```
['0.0720', '0.0200', '0.0260', '0.0210', '0.0740', '0.0510', '0.0160'] 
```

并列出 B：

```
[
[0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02], 
[0.02, 0.015], [0.026, 0.02, 0.015], 
[0.021, 0.02, 0.017], 
[0.077, 0.076, 0.074, 0.055, 0.045, 0.021], 
[0.053, 0.052, 0.051, 0.023, 0.022], 
[0.016]
] 
```

将A的第一个元素与B的第一个子列表进行比较，将A的第一个元素与B的第二个子列表进行比较，将A的第三个元素与的第三个子列表进行比较，最有效的方法是什么B，...，**如果**它们匹配并且子列表包含 2 个或更多元素，则从 B 中的子列表中删除相应的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:40:03.513

使用`zip()`您可以将两个列表中的元素配对：

```
for a, b in zip(A, B):
    # a is an element from A, b is a sublist from B. 
```

您的子列表包含浮点值，您的列表 A 包含字符串。您需要确定比较的容差。也许将浮点数转换为具有匹配精度的字符串就足够了？

```
for a, b in zip(A, B):
    # a is an element from A, b is a sublist from B.
    b[:] = [i for i in b if format(i, '.4f') != a] 
```

使用切片赋值 ( `b[:]`)，我们将子列表的*内容*`a`替换为小数点后 4 位不匹配的所有元素。

在您的示例输入上运行它会给我：

```
[
[0.074, 0.073, 0.03, 0.029, 0.024, 0.021, 0.02], 
[0.015], 
[0.02, 0.015], 
[0.02, 0.017], 
[0.077, 0.076, 0.055, 0.045, 0.021], 
[0.053, 0.052, 0.023, 0.022], 
[]
] 
```

如果您只想删除*第一个*匹配项，请使用：

```
try:
    del b[next(i for i, e in enumerate(b) if format(e, '.4f') == a)]
except StopIteration:
    pass 
```

这将找到第*一个*匹配的索引，并将其从`b`. 结果（在这种情况下与之前完全相同）：

```
[[0.074, 0.073, 0.03, 0.029, 0.024, 0.021, 0.02],
 [0.015],
 [0.02, 0.015],
 [0.02, 0.017],
 [0.077, 0.076, 0.055, 0.045, 0.021],
 [0.053, 0.052, 0.023, 0.022],
 []] 
```

# android - Android：setPageMarginDrawable 重复 y

> ID：13901281
> 
> 赞同：0
> 
> 时间：2012-12-16T12:28:14.390
> 
> 标签：android, android-viewpager

我想在两个 viepager 碎片之间有一个类似笔记本螺旋的东西。因此我使用 setPageMarginDrawable(image_of_one_spiral) 和 setPageMargin(int_width_of_the_image); 问题是，它会放大图像。但我需要让它在 y 方向上重复。这有可能吗？谢谢，塔塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T23:50:50.110

我没有得到任何好的答案。所以我用我的原始图像创建了一个新图像，在 y 方向复制了几次，所以它可能比每个显示器都大。但我不太喜欢这种方法。

# regex - notepad++ 正则表达式 - 将数字放入括号中

> ID：13901282
> 
> 赞同：2
> 
> 时间：2012-12-16T12:28:16.147
> 
> 标签：regex, notepad++, replace

我有这个清单：

```
apple pie 14 1 60 100
orange 15 3 120 100
sweet cake 2 1 140 90
banana 1 2 0 0 
```

并希望成为这样：

```
('apple pie', '14', '1', '60', '100');
('orange', '15', '3', '120', '100');
('sweet cake', '2', '1', '140', '90');
('banana', '1', '2', '0', '0'); 
```

正则表达式是我的“阿喀琉斯之踵”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T12:34:03.227

替换`([a-z ]+) (\d+) (\d+) (\d+) (\d+)`为`\('\1', '\2', '\3', '\4', '\5'\);`

# javascript - 如何隐藏/显示 标记基于用户点击的位置？

> ID：13901289
> 
> 赞同：1
> 
> 时间：2012-12-16T12:28:36.407
> 
> 标签：javascript, jquery, html

我有一个 div 容器。如果用户单击此 div 容器，则将其替换为输入框。
如果用户单击输入框以外的页面上的任何其他位置，那么我希望再次显示以前的 div。

[这](http://jsfiddle.net/8yRaA/)就是我到目前为止所做的。这只能正常工作一次。这是javascript代码：

```
$(document).ready(function() {
$(".new-section").click(function(event) {
    $(this).replaceWith('<div class="span8 offset1 create-section"><input type="text" placeholder="Enter the title of the section"></div>');
    event.stopPropagation();
});

$(".create-section").click(function(event) {
    event.stopPropagation();
});

$(document).click(function(event) {
    $(".create-section").replaceWith('<div class="span8 offset1 new-section"><p>Click to add a new section</p></div>');
});
}); 
```

这是 HTML 代码：

```
<div class="span8 offset1 new-section">
    <p>
    Click to add a new section
    </p>
</div> 
```

用div替换输入后，再点击div就不会再带输入框了。似乎点击事件只触发一次。基本上我想要的是：
1\. 用户点击 div
2\. 用输入替换
3\. 用户在输入外点击
4\. 用 div 替换输入
5\. 用户再次点击 div 输入框又回来了。

循环重复。到目前为止，我只成功地让它工作了一次。知道我做错了什么吗？

编辑：如果用户单击 . 仅当用户单击网页中的其他任何位置（除了 ）时，应该再次显示 。换句话说，在 和 元素之间切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:33:43.627

当您动态创建元素时，您应该委托事件：

```
$(document).on('click', '.new-section', function(event) { 
```

然而，切换元素的可见性比替换它们更有效。

```
<div class="new-section">
    <p>
        Click to add a new section
    </p>
</div>
<div class="span8 offset1 create-section">
    <input type="text" placeholder="Enter the title of the section">
</div> 
```

```
$(document).ready(function() {
    var $section = $(".new-section"),
        $div = $('div.span8');

    $section.click(function(event) {
        $section.hide();
        $div.show().find('input').focus()
    });

    $div.find('input').blur(function(event) {
        $section.show();
        $div.hide()
    });
}) 
```

[http://jsfiddle.net/34wHG/](http://jsfiddle.net/34wHG/)

请注意，我使用了焦点和模糊事件，您还可以创建一个生成该部分的按钮，并在单击按钮时隐藏 div 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:38:51.677

由于您正在动态创建 'new-section'，因此您不能直接绑定到它们。

相反，您应该在更高级别绑定文档或容器 div，并使用最新的 JQuery 使用“on”方法来监听委托事件。

检查[http://api.jquery.com/on/上的“直接和委托事件”部分](http://api.jquery.com/on/)

```
$(document).on("click", ".new-section", function(event) {
    $(this).replaceWith('<div class="span8 offset1 create-section"><input type="text" placeholder="Enter the title of the section"></div>');
    event.stopPropagation();
});

$(document).on('click', ".create-section", function(event) {
    event.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:43:55.217

你可能在后台有一个假人，这样任何点击假人都会改变 div 或输入。

html:

```
<div id="page1" >
    <div id=dummy"></div>
    <div id="content></div>
</div>
<div id="page2">
    <div id=dummy"></div>
    <input/>
</div> 
```

然后只需根据虚拟点击更改页面的 z-index 即可。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-16T12:41:03.797

快速而肮脏的内联编辑（减去实际代码......太懒了）：

```
<div id="clickable"></div>
<textarea id="edit_clickable"></textarea>

$('#clickable').click(function(){
//get text of #clickable
//hide clickable
//add the text to textarea
//show textarea
});
$(document).click(function(){
//get textarea text
//hide textarea
//update div text
//show div
}); 
```

# android - 停靠时应用程序无法启动

> ID：13901291
> 
> 赞同：0
> 
> 时间：2012-12-16T12:28:43.643
> 
> 标签：android, android-manifest, docking

浏览网页后，我发现这段代码应该在停靠时启动一个应用程序：

```
 <intent-filter >
           <action android:name="android.intent.action.MAIN" />
           <category   android:name="android.intent.category.LAUNCHER" /> 
           <category android:name="android.intent.category.CAR_DOCK" />
           <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

问题是当手机停靠时这不会启动应用程序。我究竟做错了什么？

编辑：当我将它停靠在桌面扩展坞时，什么也没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:16:05.433

“当我将它停靠在桌面扩展坞时，什么都不会发生。”

请注意，您编写的代码仅适用于汽车底座。因此，您在类别中添加了单词 car dock。

要在任何 Dock 中启动应用程序，需要以下内容

```
<intent-filter >
       <action android:name="android.intent.action.MAIN" />
       <category   android:name="android.intent.category.LAUNCHER" /> 
       <category android:name="android.intent.category.DESK_DOCK" />
       <category android:name="android.intent.category.CAR_DOCK" />
       <category android:name="android.intent.category.DEFAULT" />
    </intent-filter> 
```

注意添加桌面扩展坞

# data-visualization - java时间线创建库

> ID：13901292
> 
> 赞同：12
> 
> 时间：2012-12-16T12:28:47.760
> 
> 标签：data-visualization, java, time-limiting

我需要使用我的 Java (J2SE) 应用程序创建时间线图。
什么库可以用来创建时间线图，如下**所示**：

![在此处输入图像描述](../Images/8da5a2e19889c6413f8e34b3fe2936aa.png)

* * *

![在此处输入图像描述](../Images/2e3f74a0053dee29d7f12c35ddc0054e.png)

* * *

![在此处输入图像描述](../Images/9b9248b99da4180185fba06d4407d217.png)

* * *

* * *

![在此处输入图像描述](../Images/6c419fbf0106c5d9bb4c37bf3bcfa2e7.png)

* * *

![在此处输入图像描述](../Images/9aed18f93c79de02818f252c3841975a.png)

* * *

![在此处输入图像描述](../Images/62dc58d1d80efd661eae6b1a0513cd25.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:39:59.620

[TimeFlow](http://flowingmedia.com/timeflow.html)非常好，请查看他们的[wiki](https://github.com/FlowingMedia/TimeFlow/wiki)。

还有[Jaret timebars 组件](http://jaret.de/timebars/documentation/timebars.html)，但它似乎有点过时了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:00:19.127

我用过[JARET Timebars](http://jaret.de/timebars/index.html)。你可以尝试使用它。

# c# - 子窗体TitleBar与主窗体不同的视觉风格

> ID：13901296
> 
> 赞同：1
> 
> 时间：2012-12-16T12:29:10.847
> 
> 标签：c#, winforms, windows-7, titlebar

我正在向主表单添加几个子表单。在 XP 中，父/子的标题栏似乎是相同的，除了关闭按钮是黑色的，而不是红色的。但在 Windows 7 中，如图所示，子窗体标题栏与主窗体不同。

![在此处输入图像描述](../Images/a7c9fea9c437596616b5fd22d03636e8.png)

如何解决这个问题？最重要的是颜色。但是想在这里了解颜色和样式的全部限制。

主要形式有

> IsMdiContainer = 假

通过添加子表单

```
var f = new ChildForm(); 
clientPanel.Controls.Add(f); 
f.TopLevel = false; 
f.BringToFront(); 
f.Show(); 
```

我不认为使用 IsMdiContainer = true 是一种选择。我不记得为什么，因为它是很久以前的事了，但我认为存在无法隐藏表单边框的问题，这是我需要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:02:55.407

这是完全正常的。当您将 Form.TopLevel 属性设置为 false 时，窗口将停止表现得像顶级窗口。它变成了一个子控件，行为几乎与 UserControl 没有区别。除了您忘记更改 FormBorderStyle 属性外，它仍然打开了“我想要一个标题”和“我想要一个可调整大小的边框”样式标志。

哪个窗口将按要求呈现，但不再使用顶层窗口的视觉样式。后备是经典的外观。

出问题的不仅是它，表单也失去了被激活的能力。由于子控件没有激活状态，因此只有顶层窗口有。所以它不再正确地绘制标题，它总是使用“未激活”颜色绘制，即使您将焦点设置到表单。另一个严重的问题是拖动标题栏功能仍然有效，允许用户将窗口移到父窗口之外，而无法返回。

唯一合理的解决方案是将 FormBorderStyle 设置为 None，这样这些事情就不会出错。

如果您打算创建自己的 MDI 样式窗口模型但没有 MDI 丑陋，那么这不是一个好的解决方案。看对接库，微芬罗的免费DockPanel Suite很受欢迎。

# vb.net - 停止阻止程序关闭的线程？

> ID：13901302
> 
> 赞同：0
> 
> 时间：2012-12-16T12:29:38.137
> 
> 标签：vb.net, multithreading

我有一个非常令人不安的问题；当我单击红十字关闭我的应用程序时，这里有一个例外：

```
 Sub NewThread()
    AddHandler RenderFrameEvent, AddressOf RenderFrame
    Dim lastplay As Boolean = True
    Do
        If lastplay = Not Play Then
            System.Threading.Thread.Sleep(100)
            lastplay = Play
        Else
            If Play = True Then
                KeyState()
                If Me.InvokeRequired Then
                    Me.Invoke(New MethodInvoker(AddressOf NewThread))
                Else
                    RaiseEvent RenderFrameEvent()
                End If
            End If
        End If
        Application.DoEvents()
    Loop
End Sub 
```

我得到一个 System.InvalidOperation 异常

```
Me.Invoke(New MethodInvoker(AddressOf NewThread)) 
```

因为表单是关闭的，这是很正常的，然后，我在 FormClosing 事件中这样做：

```
Trd.Abort '(the thread is named Trd) 
```

我得到一个 Threading.ThreadAbort 异常。

谁能告诉我如何正确停止线程，或如何强制应用程序自杀？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:36:55.173

与其中止线程，不如考虑设置一个可以由您的线程检查并用于退出循环的标志。这样线程自然会“死”。

# sql-server - 为 SQL Server 数据库和/或 ASP.Net MVC 实体事务设置实时备份的正确方法是什么？

> ID：13901304
> 
> 赞同：1
> 
> 时间：2012-12-16T12:29:53.080
> 
> 标签：sql-server, asp.net-mvc, entity-framework, backup, high-availability

我正在开发一个应用程序（一个带有 ASP.Net MVC 4 和 Entity Framework 5 的 Web 应用程序），用于处理金融交易（在相当高负载的模式下），并且一旦提交就不能忘记单个交易，这使普通的计划备份几乎毫无用处。在这种情况下该怎么做？

# rubymotion - RubyMotion - 错误构建供应商项目 - 如何获取详细信息

> ID：13901305
> 
> 赞同：1
> 
> 时间：2012-12-16T12:29:57.013
> 
> 标签：rubymotion

我正在尝试构建从 github (cocosmotion) 克隆的简单项目，并且我不断收到完全相同的错误 - “错误！构建供应商项目 'vendor\cocos2d-iphone' 未能创建至少一个 '.a' 库。” 我认为如果有办法获取一些细节、日志或类似信息，这不是什么大问题，这有助于解决这类问题。但目前我在谷歌的所有尝试和搜索都没有帮助。

所以我的问题是 - 我如何才能获得有关该供应商项目中未能构建的内容的更多详细信息？有没有办法打开更详细的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:59:57.950

好吧，事实证明，我需要做的就是“清理干净”，然后再尝试构建。这将强制进行完全重建，并且我能够看到供应商项目编译过程中的问题（在 cocos2d 源代码中不推荐使用它不是最新版本的调用）。

# magento-1.7 - 在不编辑核心文件的情况下更改 magento 页面的页面布局

> ID：13901309
> 
> 赞同：0
> 
> 时间：2012-12-16T12:30:33.920
> 
> 标签：magento-1.7

我已经阅读[了如何将产品视图页面更改为一列布局](https://stackoverflow.com/questions/12190678/how-to-change-product-view-page-to-one-column-layout)，但除此之外还有其他方法，这样我们就不必编辑核心文件，因为更新时这些文件将被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:04:35.120

试着去：

**CMS->页面->您的页面**

选择设计，然后在此处更改布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:43:19.117

也可以通过以下方式完成。我认为它给了我们更多的控制权，这就是我所需要的。

编辑：

**app/design/frontend/base/default/layout/local.xml**

在此处添加以下内容：

```
<customer_account_login>
        <reference name="root">
            <action method="setTemplate"><template>page/3columns.phtml</template></action>
        </reference>
</customer_account_login> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T11:59:04.917

不确定这是否是一个好方法，但它是我修改 magento 的方式，如果它是错误的，请有人解释正确的方法。

说你想编辑这个文件

> app/code/core/Mage/Catalog/Block/Product/View/Options/Abstract.php

你会把它复制到 . . .

> app/code/local/Mage/Catalog/Block/Product/View/Options/Abstract.php

然后进行更改。

与模板和布局文件相同。

说你想改变

> app/design/frontend/base/default/template/catalog/navigation/top.phtml

你会把它复制到

> app/design/frontend/CompanyName/ThemeName/template/catalog/navigation/top.phtml

并做出改变

只需确保在 magento 管理配置中正确设置了主题。

# wordpress - 带有 $_GET 的 Wordpress 博客页面

> ID：13901311
> 
> 赞同：0
> 
> 时间：2012-12-16T12:30:50.250
> 
> 标签：wordpress, .htaccess

在我的 wordpress (3.4) 博客中，我创建了一个名为“mypage”的页面。使用我的重写设置，它在地址栏中显示为*http://www.domain.com/profile*。

我正在使用自定义页面模板并正在处理一些事情，其中​​包括使用 GET 变量。例如：

```
if (isset($_GET='n')) { echo $_GET['n']; } 
```

因此，*http:* //www.mysite.com/profile?n= username 将显示“用户名”。我遇到的问题是重写 URL，使其看起来像：*http://www.mysite.com/profile/username*，仍然能够访问“用户名”作为 GET 变量。

有谁知道我需要添加到我的 .htaccess 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:40:40.473

您需要先注册您的公共变量（`query_vars`过滤器挂钩），然后`get_query_var()`通过`template_redirect`操作挂钩捕获它

您可能想阅读[Custom_Queries - Wordpress](http://codex.wordpress.org/Custom_Queries)

# linux - 在 Fedora 上安装 Sencha Touch

> ID：13901322
> 
> 赞同：0
> 
> 时间：2012-12-16T12:32:52.980
> 
> 标签：linux, extjs, fedora, sudo

我想在 Fedora 上安装 Sencha Touch。我[在 icodeya 上关注本教程，](http://www.icodeya.com/2012/12/installing-sencha-touch-201-on-ubuntu.html)但他们使用的是 Ubuntu，而不是 Fedora，所以我在这部分有点迷失：

```
sudo chown -R icodeya:www-data sencha-touch-2.0.1-gpl 
```

我有这个错误：

> 第 59 行：stderr.txt：权限被拒绝

有人知道如何解决吗？我的意思是，Fedora 上的命令有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:39:21.743

只是一个猜测：看起来您不是可以运行 sudo 的组的成员。

1.  尝试以 root 身份登录
2.  转到适当的目录
3.  跑`chown -R icodeya:www-data sencha-touch-2.0.1-gpl`

如果我是对的（在 Fedora 中，你已经定义了可以 tun sudo 的用户）它应该可以工作。

祝你好运！

# scala - 根据参数类型列出

> ID：13901323
> 
> 赞同：0
> 
> 时间：2012-12-16T12:32:57.103
> 
> 标签：scala

下面我有：

```
trait Elem {
  def compare: Int
}

case class DiffElem(weight: Int, len: Int) extends Elem {
  def compare = weight - len;
} 
```

现在可以有很多 Elem 的子类，基于`compare`函数。现在我有一个函数，它从文件中读取输入并生成一个列表`DiffElem`：

```
def getInput[T <: Elem](): List[T] = {
  var ans: List[T] = List.empty[T]
  for (line <- Source.fromFile("src/week1/jobs.txt").getLines()) {
    val diff = line.split(" ")
    ans = ans match{
      case i:List[DiffElem] =>  new DiffElem(Integer.parseInt(diff(0)), Integer.parseInt(diff(1))) :: ans;
      case _ => ???
    }

  }
  ans
} 
```

但是编译器不允许这样的操作，显然`::`如下逆变类型和我正在尝试做不变性。如果我将函数签名转换为`T >: Elem`然后它可以工作，但目的没有解决。

有更好的方法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:37:22.463

如果您在 getInput 中构建 DiffElem，那么您希望如何（以及为什么）获取任意 T <: Elem 的列表？要执行此类操作，您应该能够从 DiffElem 转换为任何另一个 T <: Elem，并且可以像这样使用隐式捕获可转换性：

```
 def getInput[T <: Elem](implicit conv: DiffElem => T): List[T] = ... 
```

，但你真的想要吗？如果您对 DiffElem 的列表感到满意，您可以通过以下方式以函数式样式重写您的函数：

```
 def getInput(): List[DiffElem] =
    Source.fromFile("src/week1/jobs.txt").getLines().map { line =>
      val diff = line.split(" ")
      DiffElem(
        Integer.parseInt(diff(0)),
        Integer.parseInt(diff(1))
      )
    } toList 
```

[map](http://en.wikipedia.org/wiki/Map_%28higher-order_function%29)是高阶函数，它将序列的每个元素转换为将其 funarg 应用于该元素的结果。

**更新**：为了创建模块化类型驱动的列表，我建议隐式：

```
 def getInput[E <: Elem](implicit mkE: (Int, Int) => E): List[E] = {
    Source.fromFile("src/week1/jobs.txt").getLines().map { line =>
      val diff = line.split(" ")      
      mkE(diff(0).toInt, diff(1).toInt)      
    } toList
  } 
```

现在，对于您想要获取的任何 E <: Elem，列表，您应该在范围内提供类型 (Int, Int) => E 的隐式值，例如：

```
 implicit val diffElemBuilder = {
    (a, b) => DiffElem(a, b)
  } 
```

在任何范围内，如果隐式可见，您可以像这样使用 getInput：

```
val xs = getInput[DiffElem] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T13:44:58.347

您可以重构代码并使用更高级别的多态函数而不是模式匹配。

# php - in_array 没有任何意义

> ID：13901324
> 
> 赞同：7
> 
> 时间：2012-12-16T12:33:04.840
> 
> 标签：php

```
$arr = array(
    'test' => array(
        'soap' => true,
    ),
);

$input = 'hey';
if (in_array($input, $arr['test'])) {
    echo $input . ' is apparently in the array?'; 
} 
```

结果：嘿显然在数组中？

这对我来说没有任何意义，请解释原因。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T12:35:56.260

那是因为`true == 'hey'`类型[杂耍](http://php.net/manual/en/language.types.type-juggling.php)。您正在寻找的是：

```
if (in_array($input, $arr['test'], true)) { 
```

它强制基于`===`而不是的相等性测试`==`。

```
in_array('hey', array('soap' => true)); // true

in_array('hey', array('soap' => true), true); // false 
```

为了更好地理解类型杂耍，你可以玩这个：

```
var_dump(true == 'hey'); // true (because 'hey' evaluates to true)

var_dump(true === 'hey'); // false (because strings and booleans are different type) 
```

**更新**

如果您想知道是否设置了**数组键**（而不是是否存在值），您应该[`isset()`](http://www.php.net/isset)像这样使用：

```
if (isset($arr['test'][$input])) {
    // array key $input is present in $arr['test']
    // i.e. $arr['test']['hey'] is present
} 
```

**更新 2**

还有[`array_key_exists()`](http://www.php.net/array_key_exists)一个可以测试数组键的存在；但是，只有在对应的数组值可能是`null`.

```
if (array_key_exists($input, $arr['test'])) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T12:35:43.083

您将数组用作字典，但是`in_array`当您像数组一样使用它时要使用该函数。检查[文档](http://php.net/manual/en/function.in-array.php)。

# ruby-on-rails - 更新会话超时轨道上的属性

> ID：13901325
> 
> 赞同：2
> 
> 时间：2012-12-16T12:33:38.890
> 
> 标签：ruby-on-rails, ruby, session, update-attributes

我试图通过在用户登录时将“1”设置为 db 字段并在他注销时将“0”设置为在线用户列表。麻烦的是 - 如果用户刚刚离开网站，“1”仍然留在数据库中，所以我想要做的是在会话到期时更新它。

登录：

```
def create
    user = User.find_by_username(params[:username])
    if user && user.authenticate(params[:password])
        session[:user_id] = user.id
      session[:username] = user.username
      remote_ip = request.remote_ip
      user.update_attributes(:online => 1, :ip => remote_ip) 
        redirect_to root_url
    else
        render "new"
    end
  end 
```

和注销：

```
 def destroy
    @user = User.where(:id => session[:user_id])
    @user.each do |u|
      u.update_attributes(:online => 0)
    end 
    session[:user_id] = nil
    session[:username] = nil
    redirect_to root_url
  end 
```

有人可以建议我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:44:46.217

你不能那样做，因为没有办法保证你的`destroy`动作会被调用。如果用户失去了他的互联网连接怎么办？还是浏览器崩溃？或者用户在周末AFK？

解决方案是在`user`模型上添加时间戳，就像`last_seen_at`用户在您的站点上执行操作时更新它一样，例如使用`before_filter`：

```
class ApplicationController < ActionController::Base
  before_filter :record_last_seen_at # TODO: Implement that method
end 
```

然后，如果您想列出所有在线用户，请列出在最后 5 分钟内活跃的所有用户，即您*认为*在线的用户。

`User.where(['last_seen_at > ?', 5.minutes.ago])`

您还可以使用现有的身份验证框架，例如**[Authlogic](https://github.com/binarylogic/authlogic)**，您将免费获得该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T05:25:45.030

通过使用 db set 1 或 0 登录和注销实际上是不好的方法，同样从上面使用 last_seen_at 的答案（设计用法）我们不会得到活动会话列表。

请参阅此 github 示例应用程序[https://github.com/mohanraj-ramanujam/online-users](https://github.com/mohanraj-ramanujam/online-users)以使用活动记录会话存储列出在线活动会话列表。

# java - JPA 命名查询

> ID：13901328
> 
> 赞同：4
> 
> 时间：2012-12-16T12:33:46.817
> 
> 标签：java, sql, jpa

嘿，我是 JPA 的新手，对 SQL 还很陌生，我需要编写一个选择查询

我需要 ：

“选择金额超过所有美元付款平均值的所有付款”

我有一个 JPA 实体：

```
@Id
@GeneratedValue(strategy = GenerationType.TABLE)
private Long id;
private String account;
private double amount;
private String currency; 
```

我试过：

```
@NamedQuery(name="payByUSD" , query="SELECT x FROM Payment x WHERE x.amount > (SELECT AVG(x.amount)from Payment)") 
```

但我收到以下错误：

```
- The FROM clause must defined at least one identification variable declaration.
- The right expression is missing from the arithmetic expression. 
```

谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:11:03.340

利用

```
SELECT x FROM Payment x 
WHERE x.amount > (SELECT AVG(p.amount) from Payment p) 
```

您的子查询是

```
SELECT AVG(x.amount) from Payment 
```

, 并且`x`没有定义。

# php - 无法确定我的正则表达式有什么问题

> ID：13901338
> 
> 赞同：0
> 
> 时间：2012-12-16T12:35:43.290
> 
> 标签：php, html, regex, parsing, preg-match-all

> **可能重复：**
> [如何使用 php 从 html 中提取 img src、title 和 alt？](https://stackoverflow.com/questions/138313/how-to-extract-img-src-title-and-alt-from-html-using-php)

我正在尝试解析网页并获取完整图像。例如

```
<html>

<body>
<a href='1.jpg'><img src='tn1.jpg /></a>
<a href='2.jpg'><img src='tn2.jpg /></a>
<a href='3.jpg'><img src='tn3.jpg /></a>
<a href='4.jpg'><img src='tn4.jpg /></a>
</body>
</html> 
```

所以我试图捕捉它们以获得完整的缩略图：

```
1.jpg
2.jpg
3.jpg
4.jpg 
```

我的 PHP 正则表达式代码是：

```
$text = file_get_contents($website); //Get webpage

preg_match_all("~$[0-9](.*?)\.jpg~i", $text, $matches); 
```

但是当我运行它时，$matches 数组是空的，但路径在 webiste 中。我的正则表达式可能有什么问题？

信息：所有图像都遵循一种模式，并且都是数字后跟 .jpg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:39:52.027

我不建议使用正则表达式来解析 html，但如果您不想正确执行此操作，这里有一个正则表达式可以解决问题：`/(?<=['"])\d+\.jpg/i`

在这里演示：[http ://regex101.com/r/xC8nP2](http://regex101.com/r/xC8nP2)

您的正则表达式的问题是滥用`$`-anchor。

# java - Java 观察者更新功能

> ID：13901339
> 
> 赞同：4
> 
> 时间：2012-12-16T12:35:46.420
> 
> 标签：java

我有一个实现观察者的类，当然它需要有更新功能：

```
public void update(Observable obs, Object obj); 
```

有人可以解释一下这两个参数代表什么吗？Observable 当然是我的 observable，但是，我怎样才能通过这个 Observable obs 对象访问我的 observable 字段呢？什么是对象 obj？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-12T18:21:29.430

如果其他人在弄清楚如何发送第二个参数时遇到困难，就像尼克指出的那样：在**notifyObservers**方法调用中。

**在可观察对象中：**

```
private void setLicenseValid(boolean licenseValid) {
    this.licenseValid = licenseValid;
    setChanged();  // update will only get called if this method is called
    notifyObservers(licenseValid);  // add parameter for 2nd param, else leave blank
} 
```

**在观察者中：**

```
@Override
public void update(Observable obs, Object arg) {
    if (obs instanceof QlmLicense) {
        setValid((Boolean) arg);
    }
} 
```

**确保正确连接您的 Observable，否则您的更新方法将不会被调用。**

```
public class License implements Observer {  
    private static QlmLicense innerlicense; 
    private boolean valid;
    private Observable observable;

    private static QlmLicense getInnerlicense() {
        if (innerlicense == null) {
            innerlicense = new QlmLicense();
            // This is where we call the method to wire up the Observable.
            setObservable(innerlicense);  
        }
        return innerlicense;
    }

    public boolean isValid() {
        return valid;
    }

    private void setValid(Boolean valid) {
        this.valid = valid;
    }

    // This is where we wire up the Observable.
    private void setObservable(Observable observable) {
        this.observable = observable;
        this.observable.addObserver(this);  
    }

    @Override
    public void update(Observable obs, Object arg) {
        if (obs instanceof InnerIDQlmLicense) {
            setValid((Boolean) arg);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T12:41:11.743

`obs`是扩展`Observable`并具有`notifyObservers`方法的对象。您可以`obs`转换为扩展的对象，`Observable`然后调用您需要的方法。 `obj`是可以传递给的可选参数`notifyObservers`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T12:42:21.180

观察者的 update(Observable obs,Object obj) 方法通过 notifyObservers 接收发生变化的对象（第二个参数）（在 Observable 中）。

# php - PDO PHP 中的分页

> ID：13901342
> 
> 赞同：1
> 
> 时间：2012-12-16T12:35:49.573
> 
> 标签：php, mysql, pdo

我正在尝试使用 PHP/PDO 学习分页。

```
 $limit = 20;
            $sth = $conn->prepare("SELECT * FROM directory WHERE user_active != ''");
            $sth->execute(array(':county' => $county));

            $c = 1;
            while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
                echo 'Resutls will be here';
            $c++;
            } 
```

我不确定下一步该做什么，有没有人可以参考的一个好的起点，或者可以为我解释这个过程？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:02:59.050

未测试

```
$page  = 1;
$limit = 20;
$start = $page * $limit;

$conn->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);
$sth = $conn->prepare("SELECT * FROM directory WHERE user_active LIMIT ?,?");
$sth->execute(array($start,$limit)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T04:44:51.450

请使用以下代码使用 PDO 进行分页：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Simple Pagination Demo using PDO Query</title>
    <!-- CSS File -->
<link href="css/pagination.css" rel="stylesheet">
</head>
<body>
<?php 
// mysql hostname
$hostname = 'localhost';
// mysql username
$username = 'root';
// mysql password
$password = '';
// Database Connection using PDO with try catch method. 
try { $dbh = new PDO("mysql:host=$hostname;dbname=PaginationTestDb", $username, $password); }
// In case of error PDO exception will show error message.
catch(PDOException $e) {    echo $e->getMessage();    }
// No. of adjacent pages shown on each side
$adjacents = 2;
// We will assign variable here for entry By. you can use your variables here.
$EntryBy = "furqan.aziz";
// We Will prepare SQL Query
$STM = $dbh->prepare("SELECT ServerName FROM statstracker WHERE EntryBy = :EntryBy");
// bind paramenters, Named paramenters alaways start with colon(:)
$STM->bindParam(':EntryBy', $EntryBy);
// For Executing prepared statement we will use below function
$STM->execute();
// Count no. of records 
$Records = $STM->rowCount();
// Your File Name will be the same like your php page name which is index.php
$targetpage = "index.php";
// Below is setting for no. of records per page.
$limit = 10; 
$page = $_GET['page'];
if($page) 
//First Item to dipaly on this page
    $start = ($page - 1) * $limit;          
else
//if no page variable is given, set start to 0
    $start = 0;                             
// Get data using PDO prepare Query.
$STM2 = $dbh->prepare("SELECT `SrNo`, `ServerName`, `HiMemUti`, `AvgMemUti`, `HiCpuUti`, `AvgCpuUti`, `HiIOPerSec`, `AvgIOPerSec`, `HiDiskUsage`, `AvgDsikUsage`, `EntryBy` FROM statstracker WHERE EntryBy = :EntryBy ORDER BY SrNo LIMIT $start, $limit");
// bind paramenters, Named paramenters alaways start with colon(:)
$STM2->bindParam(':EntryBy', $EntryBy);
// For Executing prepared statement we will use below function
$STM2->execute();
// We will fetch records like this and use foreach loop to show multiple Results later in bottom of the page.
 $STMrecords = $STM2->fetchAll();
// Setup page variables for display. If no page variable is given, default to 1.
if ($page == 0) $page = 1;
//previous page is page - 1                 
$prev = $page - 1;
//next page is page + 1                     
$next = $page + 1;
//lastpage is = total Records / items per page, rounded up.                         
$lastpage = ceil($Records/$limit);
//last page minus 1 
$lpm1 = $lastpage - 1;                      
//Now we apply our rules and draw the pagination object. We're actually saving the code to a variable in case we want to draw it more than once.
$pagination = "";
if($lastpage > 1)
{   
    $pagination .= "<div class='pagination'>";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href='$targetpage?page=$prev'>Previous</a>";
    else
        $pagination.= "<span class='disabled'>Previous</span>"; 

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class='current'>$counter</span>";
            else
                $pagination.= "<a href='$targetpage?page=$counter'>$counter</a>";                   
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class='current'>$counter</span>";
                else
                    $pagination.= "<a href='$targetpage?page=$counter'>$counter</a>";                   
            }
            $pagination.= "...";
            $pagination.= "<a href='$targetpage?page=$lpm1'>$lpm1</a>";
            $pagination.= "<a href='$targetpage?page=$lastpage'>$lastpage</a>";     
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href='$targetpage?page=1'>1</a>";
            $pagination.= "<a href='$targetpage?page=2'>2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class='current'>$counter</span>";
                else
                    $pagination.= "<a href='$targetpage?page=$counter'>$counter</a>";                   
            }
            $pagination.= "...";
            $pagination.= "<a href='$targetpage?page=$lpm1'>$lpm1</a>";
            $pagination.= "<a href='$targetpage?page=$lastpage'>$lastpage</a>";     
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href='$targetpage?page=1'>1</a>";
            $pagination.= "<a href='$targetpage?page=2'>2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class='current'>$counter</span>";
                else
                    $pagination.= "<a href='$targetpage?page=$counter'>$counter</a>";                   
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href='$targetpage?page=$next'>Next</a>";
    else
        $pagination.= "<span class='disabled'>Next</span>";
    $pagination.= "</div>\n";       
}
//Below is a start of table in which we will show records using foreach loop.
echo "<table class='mytableP'>";
// For Exporting Records to Excel we will send $EntryBy in link and will gate it on ExportToExcel page for stats for this user. 
echo"<tr><th th colspan=11>Simple Pagination Demo using PDO Queries</div></th></tr>";
echo"<a href='ExportToExcel.php?val=$EntryBy' target=_blank><img src='img/e2e.png' alt='Export To Excel' border='' class='e2e' /></a>";
echo"<tr><th>Sr#</th><th>Server</th><th>Hi Memory Utilization</th><th>Avg Memory Utilization</th><th>Hi CPU Utilization</th><th>Avg CPU Utilization</th><th>Hi I/O Utilization</th><th>Avg I/O Utilization</th><th>Hi Disk Usage</th><th>Avg Disk Usage</th><th>By</th></tr>";
// We use foreach loop here to echo records.
foreach($STMrecords as $r)
    {
        echo "<tr>";
        echo "<td>" .$r[0] ."</td>";
        echo "<td>" .$r[1] ."</td>";
        echo "<td>" .$r[2] ."</td>";
        echo "<td>" .$r[3] ."</td>";
        echo "<td>" .$r[4] ."</td>";
        echo "<td>" .$r[5] ."</td>";
        echo "<td>" .$r[6] ."</td>";
        echo "<td>" .$r[7] ."</td>";
        echo "<td>" .$r[8] ."</td>";
        echo "<td>" .$r[9] ."</td>";
        echo "<td>" .$r[10] ."</td>";
        echo "</tr>";  
    }
echo "</table>";
// For showing pagination below the table we will echo $pagination here after </table>. For showing above the table we will echo $pagination before <table>
echo $pagination;
// Closing MySQL database connection   
$dbh = null;
?>
</body>
</html> 
```

有关更多详细信息，请访问以下站点以获取源代码和 CSS 样式

1.  点击[这里](http://crewow.com/Easy-Pagination-with-PDO-in-PHP-plus-Export-to-Excel.php "在 PHP 中使用 PDO 轻松分页以及导出到 Excel 教程")！

2.  点击[这里](http://www.phpro.org/tutorials/Pagination-with-PHP-and-PDO.html "使用 PHP 和 PDO 进行分页")！

# android - android蓝牙“服务发现失败”

> ID：13901344
> 
> 赞同：2
> 
> 时间：2012-12-16T12:36:02.927
> 
> 标签：android, bluetooth

尽管已经写了很多关于这个主题的文章，但我仍然找不到针对我的具体问题的解决方案：

我正在尝试用一个简单的蓝牙设备连接三星 Galaxy SIII。当我使用手机的蓝牙设置（不需要 PIN）将这两者配对时，它可以工作。但是如果设备之前没有手动配对，我会收到以下异常：

```
java.io.IOException: Service discovery failed
at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:462)
at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:240)
at com.concept.proiv.BluetoothConnection$1.run(BluetoothConnection.java:84)
at java.lang.Thread.run(Thread.java:856) 
```

相关代码：

```
mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
if (mBluetoothAdapter == null) ...
if (!mBluetoothAdapter.isEnabled()) ...

BluetoothDevice device = mBluetoothAdapter.getRemoteDevice("00:0A:3A:2F:7C:1A");
try
{
    btSocket = device.createInsecureRfcommSocketToServiceRecord(MY_UUID);
}
catch (IOException e) ... - WORKING
mBluetoothAdapter.cancelDiscovery();
try
{
    btSocket.connect(); <-- FAILED HERE
}
catch (IOException e) 
{
    e.printStackTrace(); //java.io.IOException: Service discovery failed
} 
```

# php - str_replace 用一堆代码 php

> ID：13901349
> 
> 赞同：3
> 
> 时间：2012-12-16T12:36:54.500
> 
> 标签：php, string, forms, replace, str-replace

我有一些来自数据库的内容。我想用一堆代码替换内容的特定单词。

来自数据库的内容例如：

> 感谢您对我们网站的关注。
> {FORMINSERT}
> 您也可以拨打1234567890联系我们

我想`{FORMINSERT}`用一堆 PHP 代码替换字符串。如果它是一个普通的文本字符串，我可以简单地使用`str_replace`.

但是替换的内容不是简单的文本而是表单代码。

想换这个`{FORMINSERT}`

例如：

```
<form method="post" id="form1" action="<?php echo KT_escapeAttribute(KT_getFullUri()); ?>">
    <table cellpadding="5" cellspacing="2" >
        <tr>
            <td width="84" ><a name="contact" id="contact"></a></td>
            <td width="384">&nbsp;</td>
        </tr>
        <tr>
            <td colspan="2" ><h1>Contact Us</h1></td>
        </tr>
        <tr>
            <td ><label for="fullname">Name:</label></td>
            <td>
                <input type="text" name="fullname" id="fullname" value="<?php echo KT_escapeAttribute($row_rsscotts_contact['fullname']); ?>" size="47" />
                <?php echo $tNGs->displayFieldHint("fullname");?> <?php echo $tNGs->displayFieldError("scotts_contact", "fullname"); ?>
            </td>
        </tr>
        <tr>
            <td ><label for="phone">Phone:</label></td>
            <td>
                <input type="text" name="phone" id="phone" value="<?php echo KT_escapeAttribute($row_rsscotts_contact['phone']); ?>" size="47" />
                <?php echo $tNGs->displayFieldHint("phone");?> <?php echo $tNGs->displayFieldError("scotts_contact", "phone"); ?>
            </td>
        </tr>
        <tr>
            <td><label for="email">Email:</label></td>
            <td>
                <input type="text" name="email" id="email" value="<?php echo KT_escapeAttribute($row_rsscotts_contact['email']); ?>" size="47" />
                <?php //echo $tNGs->displayFieldHint("email");?> <?php echo $tNGs->displayFieldError("scotts_contact", "email"); ?>
            </td>
        </tr>
        <tr>
            <td><label for="tellus">Looking for:</label></td>
            <td>
                <textarea name="tellus" id="tellus" cols="37" rows="5"><?php echo KT_escapeAttribute($row_rsscotts_contact['tellus']); ?></textarea>
                <?php echo $tNGs->displayFieldHint("tellus");?> <?php echo $tNGs->displayFieldError("scotts_contact", "tellus"); ?>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <input type="submit" name="KT_Insert1" id="KT_Insert1" value="Submit" class="button-blue" /> 
                <input name="Reset" type="reset" value="Reset" class="button-grey" />
            </td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:54:08.153

[`ob_start()`](http://www.php.net/ob_start)如果您想组合 HTML 和 PHP 代码并将输出保存在一个变量中，则可以使用：

```
ob_start();
?>
    <form action="contact.php" method="post">
    Few fields here
    and submit button
    </form>
<?php

$forminsert = ob_get_clean(); 
```

然后你就可以照常去做了`str_replace()`。

但是，如果`{FORMINSERT}`可能出现也可能不出现，您可以`preg_replace_callback()`在不需要它的情况下减少生成表单数据的成本：

```
$content = preg_replace_callback('/{(.*?)}/', function($match) {
    if ($match[1] == 'FORMINSERT') {
        // code to generate $forminsert
        return $forminsert;
    }
    return $match[0];
}, $content_from_db); 
```

顺便说一句，这个函数也可以更通用地用于替换花括号之间的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:00:54.240

测试1.php：

```
$database_content = 'Thank you for interest on our web site.
{FORMINSERT}
You can also contact us by calling us to 1234567890';

if(stripos($database_content, '{FORMINSERT}') !== FALSE){
    ob_start();
    include 'test2.php';
    $result = ob_get_clean();
}

$database_content = str_replace("{FORMINSERT}", $result, $database_content);

echo $database_content; 
```

test2.php（您尝试插入的代码）：

```
echo 'hello world'; 
```

结果：

> 感谢您对我们网站的关注。hello world 您也可以拨打1234567890联系我们

所以就好像代码“echo 'hello world';” 正坐在 {FORMINSERT} 所在的位置。您可以创建一堆 PHP 文件来包含这样的内容，并制作一些 if 语句来处理替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:54:00.617

让我们假设来自您拥有的数据库的内容存储在`$db_content`您需要替换的变量和 php 代码中，`custom_code.php`所以

```
if(strpos($db_content, "{FORMINSERT}") === true){
    //remove the tag
    str_replace("{FORMINSERT}", '',$db_content)
    //load the php code
   require_once("custom_code.php")
}
//if need, you can add more conditions using else-if & replace more tags. 
```

但最好转向`MVC`可以通过模板轻松完成此类工作的模式。这是我用于简单脚本的[示例](https://github.com/gaurish/PHP-MVC-framework-Boilerplate)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T13:02:40.000

只要这样做，你的工作就解决了

```
 $forminser= " welcome to our website {FORMINSERT}";
       $form= "<form action='contact.php' method='post'>
                 Few fields here
                and submit button
              </form>" ;
       echo str_replace("{FORMINSERT}",$form,$forminser); 
```

编辑>如果你想要你的表单中的 php 代码，那么这里是一个例子

```
 $var = "Few words here" ;
     $forminser= " welcome to our website {FORMINSERT}";
     $form= "<form action='contact.php' method='post'>";
     $form .= $var ;  // this php code here
     $form .= "  and submit button</form>" ;
         echo str_replace("{FORMINSERT}",$form,$forminser); 
```

编辑2

zou 可以完成的整个代码来了。

```
 <?php

 $forminser= " welcome to our website {FORMINSERT}";
 $form = "<form method='post' id='form1' action=' " ;
 $form .=  KT_escapeAttribute(KT_getFullUri()); 
 $form .= " '><table cellpadding='5' cellspacing='2' >
         <tr>
         <td width='84' ><a name='contact' id='contact'></a></td>
         <td width='384'>&nbsp;</td>
         </tr>
         <tr>
         <td colspan='2' ><h1>Contact Us</h1></td>
         </tr>
          <tr>
          <td ><label for='fullname'>Name:</label></td>
          <td><input type='text' name='fullname' id='fullname' value=' " ;

$form .= KT_escapeAttribute($row_rsscotts_contact['fullname']); 
$form .= " ' size='47' /> ";
$form .= $tNGs->displayFieldHint("fullname");
$form .= $tNGs->displayFieldError("scotts_contact", "fullname"); 
$form .= "</td>
         </tr>
         <tr>
         <td ><label for='phone'>Phone:</label></td>
         <td><input type='text' name='phone' id='phone' value= ' " ;
$form .= KT_escapeAttribute($row_rsscotts_contact['phone']);
$form .= " ' size='47' /> ";
$form .= $tNGs->displayFieldHint("phone");
$form .= $tNGs->displayFieldError("scotts_contact", "phone"); 
$form .= '</td>
         </tr>
        <tr>
        <td><label for="email">Email:</label></td>
        <td><input type="text" name="email" id="email" value=" ' ;
$form .= KT_escapeAttribute($row_rsscotts_contact['email']);
$form .= '" size="47" />';
$form .=  $tNGs->displayFieldError("scotts_contact", "email"); 
$form .= '</td>
         </tr>
         <tr>
         <td><label for="tellus">Looking for:</label></td>
          <td><textarea name="tellus" id="tellus" cols="37" rows="5"> ';
$form .=  KT_escapeAttribute($row_rsscotts_contact['tellus']); 
$form .= '</textarea> ';
$form .= $tNGs->displayFieldHint("tellus");
$form .=  $tNGs->displayFieldError("scotts_contact", "tellus"); 
$form .= '</td>
        </tr>
        <tr>
        <td></td>
         <td><input type="submit" name="KT_Insert1" id="KT_Insert1" value="Submit"  class="button-blue" /> <input name="Reset" type="reset" value="Reset" class="button-grey" /></td>
       </tr>
     </table>
    </form>
     ';

   echo str_replace("{FORMINSERT}",$form,$forminser);
 ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T13:09:35.140

好的，这个怎么样。下面的代码允许您在内容中定义自定义 {words}，它们将在解析时替换为其他内容。

```
$contentFromDB = "Etiam porta sem malesuada magna mollis euismod. Donec ullamcorper nulla non metus auctor fringilla. {FORMINSERT}";

echo matchTags($contentFromDB);

function matchTags($content) {
   $pattern = '/{(\w+)}/i';
   $content = preg_replace_callback($pattern,"transformTags",$content);
   return $content;
}

function transformTags($word) {

    if ($word[1] == "FORMINSERT") {

        ob_start();
        ?>
        <form action="contact.php" method="post">
        Few fields here
            and submit button
        </form>
        <?php 
        $content = ob_get_clean();
        return $content;
    }

    if ($word[1] == "somethingelse") {

    }

} 
```

# json - 将颜色从 JSON 文件加载器传递到面

> ID：13901350
> 
> 赞同：2
> 
> 时间：2012-12-16T12:37:13.450
> 
> 标签：json, three.js

我正在以编程方式生成一个 json 文件来加载网格，顶点和面渲染得很好，但我不知道如何将颜色传递给面。

这是我正在试验的 json 文件：

```
{
    "metadata" : {
        "formatVersion" : 3
    },
    "materials" : [],
    "vertices" : [-10,10,0, -10,-10,0, 10,-10,0, 10,10,0, -10,10,10,  -10,-10,10,  10,-10,10,  10,10,10],
    "faces" : [4, 0, 1, 3, 0], //or with 0 as the first number for a plain triangle
    "normals": [],
    "colors": [0.5, 0.4, 0.3],
    "uvs": []
} 
```

像这样加载：

```
loader.load( "js/models/square.js", function(geometry) {
    var material = new THREE.MeshLambertMaterial( {
        faceColors : THREE.FaceColors,
    });
    material.side = THREE.DoubleSide;

    var mesh = new THREE.Mesh(geometry, material);
} 
```

我的核心问题是我对位掩码的工作方式感到困惑，但是这里的 FACE_COLOR 位[https://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.1](https://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.1)表明它应该可以工作，任何帮助将不胜感激...谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T05:33:21.347

首先，您必须正确构建 JSON 文件。这个最简单的例子是这样的，它定义了一个带有面颜色的立方体：

```
{
    "metadata" : {
        "formatVersion" : 3
    },
    "materials" : [],
    "vertices" : [ -5,5,-5,  -5,-5,-5,  5,-5,-5,  5,5,-5,  -5,5,5,  -5,-5,5,  5,-5,5,  5,5,5 ],
    "faces" : [ 65,3,2,1,0,0,  65,4,5,6,7,1,  65,7,6,2,3,2,  65,0,1,5,4,3,  65,0,4,7,3,0,  65,6,5,1,2,1 ],
    "colors": [ 16711680, 65280, 255, 16776960 ],
    "normals": [],
    "uvs": []
} 
```

在此示例中，每个面都分配有四种面颜色中的一种。颜色以十进制格式指定，例如 0xff0000 = 16711680。

每个面的位掩码代码为 64（面颜色）+ 1（四边形）= 65。

然后，由于您没有指定顶点法线，我假设您想要的是`MeshBasicMateral`. 此外，没有“faceColors”属性——它是`vertexColors`. 而且，您必须记住将网格添加到场景中。

```
var loader = new THREE.JSONLoader();

loader.load( "cube.js", function( geometry ) {
    var material = new THREE.MeshBasicMaterial( {
        vertexColors : THREE.FaceColors,
    });

    var mesh = new THREE.Mesh( geometry, material );
    scene.add( mesh );
} 
```

三.js r.53

# r - 比较 R 中超过 2 个列表

> ID：13901353
> 
> 赞同：1
> 
> 时间：2012-12-16T12:37:42.757
> 
> 标签：r

我已经学习 R 编程语言一个月了，在列表和数据框方面遇到了一些困难。我不知道如何找到超过 2 个列表之间的交集。我创建了四个列表，其中包含姓名、性别、年龄、3 部最喜欢的电影、对联合国的支持、直系亲属的出生日期和月份：

```
x<- list("Corinna Neubach", "female", 24, list("Film1","Film2","Film3"), TRUE,list("31.05",  "19.12"))
z<- list("Yasmin Ritschl","female", 21, list("Film6","Film7","Film8"), TRUE, list("20.03", "10.12"))
a<- list("Stefan Braun", "male", 23, list("Film6","Film7","Film8"),TRUE,list("25.06", "15.12"))
y<- list("Melissa Okay", "female", 23, list("Film3","Film4","Film5"), TRUE,list("31.05", "10.12")) 
```

我想检查四个列表中是否有任何共享的生日或姓名。首先我用“Reduce”写了一个代码，但它没有给出我想要的解决方案。然后，我用 intersect 尝试过，但我认为应该有一种更简单的方法来做到这一点

```
intersect(x[[6]],y[[6]])
intersect(x[1],y[1])
intersect(x[[6]],z[[6]])
intersect(x[1],z[1])
intersect(y[[6]],z[[6]])
intersect(y[1],z[1])
intersect(x[[6]],z[[6]])
intersect(x[1],z[1])
intersect(a[[6]],x[[6]])
intersect(a[1],x[1])
intersect(a[[6]],z[[6]])
intersect(a[1],z[1])
intersect(a[[6]],y[[6]])
intersect(a[1],y[1]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:00:12.207

首先，我不认为 single-person`list`是适合您任务的数据结构。它们都具有相同的结构，这是一个`data.frame`合适的指标。

虽然`data.frame`s 可以在其元素中包含列表，但您的数据建议将列表转换为规范化关系数据库的表。您可以将其映射到 R 中的 2 或 3`data.frame`秒：

*   个人资料
*   最喜欢的 3 部电影：如果它们被订购（第 1、第 2、第 3 选择），您可以为此使用`data.frame`person 表的列。如果没有，请将它们拉入一个额外`data.frame`的列人物和电影。
*   对于亲戚的出生日期，我想您的示例数据意外地为每个人提供了其中的 2 个。所以把它拉到另一个data.frame中。

对于狩猎重复，看看`? table`。

* * *

编辑：写。构建 a 的要求`list`：s 在 R`data.frame`中是s：`list`

```
> a <- data.frame (person = "John Doe", gender = "female")
> a
    person gender
1 John Doe female
> is.list (a)
[1] TRUE 
```

# vb.net - DataGridView 行过滤器不工作

> ID：13901355
> 
> 赞同：0
> 
> 时间：2012-12-16T12:37:57.000
> 
> 标签：vb.net, datagridview, dataset

我在我的项目中使用 vs 2010。首先，我使用 sqladapter 将数据检索到数据集中，然后根据要求检索并显示。但是当我要使用以下行检索数据时：

```
ds.Tables(0).DefaultView.RowFilter = "name like '_n%'" 
DataGridView1.DataSource = ds.Tables(0).DefaultView 
```

我不会工作。也就是说，我只想检索名称中第二个字符为 n 的那些行。谁能告诉我导致它不起作用的问题是什么？另外，我想知道如何使用文本框而不是常量值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T12:51:52.920

下划线在 DataView 筛选器表达式中不起作用。实际上只允许使用 % 和 * 通配符：http: [//msdn.microsoft.com/en-us/library/system.data.datacolumn.expression (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression(v=vs.100).aspx)

也许你可以使用类似的东西：

```
ds.Tables(0).DefaultView.RowFilter = "substring(name,2,1) = 'n'" 
```

# iphone - 我不知道如何在 iOS 6 中进行 Portrait 和 Upside down

> ID：13901358
> 
> 赞同：5
> 
> 时间：2012-12-16T12:38:12.740
> 
> 标签：iphone, objective-c, xcode, ios6, uiinterfaceorientation

我在用：

```
- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskPortrait; 

} 
```

我将如何在 iOS6 中将其用于 Portrait 和 Upside down？

这适用于左侧景观`UIInterfaceOrientationMaskLandscapeLeft`

这对于景观权利`UIInterfaceOrientationMaskLandscapeRight`

这适用于两种风景`UIInterfaceOrientationMaskLandscape`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T12:51:16.420

您需要返回您希望支持的方向的有效位掩码：

对于纵向和纵向倒置：

```
- (NSUInteger)supportedInterfaceOrientations {

    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown);

} 
```

您可以看到[支持的方向蒙版列表](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/tdef/UIInterfaceOrientationMask)

还需要注意的是，您还需要在支持的方向上颠倒列出肖像：

![在此处输入图像描述](../Images/e91ebb9c9a82e3782ff06dcf351b9df5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:55:27.323

我在[这里也遇到了同样的问题](https://stackoverflow.com/questions/13704218/ios6-autorotation-portaitupsidedown-to-portait)

你也应该解决你的问题。

*   允许旋转
*   在顶部组件需要再次允许

仔细观察那些方法，看起来相似，但不是

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T12:46:47.427

您需要对每个支持的方向使用按位或运算符。

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait |
        UIInterfaceOrientationMaskPortraitUpsideDown; 
} 
```

为您要支持的每个方向添加另一个按位或。通常，当您看到其中包含“掩码”一词的常量时，它们应该以这种方式组合。

# javascript - YouTube API 'orderby=duration' 不处理整个播放列表，只处理最新视频

> ID：13901360
> 
> 赞同：8
> 
> 时间：2012-12-16T12:38:29.957
> 
> 标签：javascript, youtube-api

我正在尝试构建一个小的 JavaScript 程序来查询给定播放列表的[YouTube API](https://developers.google.com/youtube/2.0/developers_guide_protocol)，按持续时间排序。一切正常，但排序不考虑整个播放列表，只是其中的 25 个最新视频！[这是一个作为 JSFiddle](http://jsfiddle.net/PKcnb/1/)的最小完整工作示例，这是它的 JavaScript 部分：

```
var playlistId = "UUAuUUnT6oDeKwE6v1NGQxug";    
jQuery.getJSON(
    "https://gdata.youtube.com/feeds/api/playlists/"+playlistId+"?v=2&orderby=duration&alt=json", 
    function(data) {
        $.each(data.feed.entry, function(key, val) {
            var title = val.title.$t;
            var url = val.content.src;
            var duration = val.media$group.yt$duration.seconds;
            var minutes = Math.floor(duration / 60);
            var seconds = (duration % 60);

            if( seconds < 10 ) seconds = "0"+seconds;

            var newRow = $("<tr></tr>");
            newRow.append("<td><a href='"+url+"'>"+title+"</a></td>");
            newRow.append("<td class='dur'>"+minutes+":"+seconds+"</td>");
            $("#videos").append(newRow);
        });
    }
); 
```

我在 XML 和 JSON 中都试过这个，除了播放列表搜索之外，我还尝试了其他类型的搜索。让 API 只对结果的最新视频进行排序似乎毫无意义。**我究竟如何检索播放列表中最长或最短的视频**，或者由给定用户上传的视频？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T00:49:35.987

**编辑**

我认为您想要的功能不可用。YouTube 本身甚至不提供按时长排序。我认为您将需要使用`max-results`和`start-index`获取视频块。然后，您可以按持续时间对编译列表进行排序。

这是一个可能的解决方案的工作示例：http: [//jsfiddle.net/PKcnb/8](http://jsfiddle.net/PKcnb/8)

* * *

我发现谷歌在哪里明确表示不可能。

[YouTube API v2.0 – 视频源类型：特定用户上传的视频](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds#User_Uploaded_Videos)

> 本节说明如何检索包含特定用户上传的所有视频的提要。**您不应在检索上传的视频供稿的请求中包含[搜索参数](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#Custom_parameters)**。这些参数将从 YouTube 的搜索索引生成一个提要，有效地将结果集限制为索引的公共视频，而不是返回用户上传视频的完整列表。

它接着说：

> 要请求当前登录用户上传的所有视频的提要，请向以下 URL 发送 GET 请求。此请求需要身份验证令牌，使 YouTube 能够识别用户。

因此，这可能是可能的，但您必须使用身份验证令牌对其进行测试。

* * *

**原帖**

1.  [API 文档`orderby`](https://developers.google.com/youtube/2.0/reference#orderbysp)听起来像是只对响应进行了排序。

    > 视频订阅源和播放列表订阅源支持的 orderby 参数指定将用于对 API 响应中的条目进行排序的方法。

2.  此外，[该`max-results`标签](https://developers.google.com/youtube/2.0/reference#max-resultssp)可让您指定要退回的商品数量。

3.  [这是一个示例，说明如何提取](http://jsonviewer.stack.hu/#http://gdata.youtube.com/feeds/api/playlists/UUAuUUnT6oDeKwE6v1NGQxug?v=2&orderby=duration&alt=json&max-results=50)已排序的更多（本示例中为 50 个）结果。看起来您可能必须尽可能多地请求然后排序。绝对不理想。

4.  [检索用户的播放列表](https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Retrieving_playlists)

# java - 如何创建高斯核并将其用作opencv中的过滤器

> ID：13901361
> 
> 赞同：1
> 
> 时间：2012-12-16T12:38:45.013
> 
> 标签：java, android, opencv

我正在使用 OpenCv 开发道路线检测算法，并找到了一些引用，但我无法理解它的片段。

你能解释一下我将如何在 OpenCv 中实现这样的事情吗？

这是报价：

> 然后图像由二维高斯核过滤。垂直方向为平滑高斯，其σy根据车道段所需高度进行调整（设置为图像中的1m等值）。水平方向是高斯的二阶导数，其σx根据车道的预期宽度进行调整。

我怎样才能准备这样的内核？getDerivKernel 似乎不允许我设置它的 σx 或 σy。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T23:44:23.977

我相信 OpenCV 有一个功能可以做到这一点。

```
 Mat getGaussianKernel(int ksize, double sigma, int ktype=CV_64F) 
```

见[http://docs.opencv.org/modules/imgproc/doc/filtering.html](http://docs.opencv.org/modules/imgproc/doc/filtering.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:00:09.037

只是使用[`GaussianBlur`](http://docs.opencv.org/java/org/opencv/imgproc/Imgproc.html#GaussianBlur%28org.opencv.core.Mat,%20org.opencv.core.Mat,%20org.opencv.core.Size,%20double,%20double%29)方法。从文档：

> sigmaX - X 方向的高斯核标准差。
> 
> sigmaY - Y 方向的高斯核标准差；如果 sigmaY 为零，则设置为等于 sigmaX，如果两个 sigma 均为零，则分别从 ksize.width 和 ksize.height 计算（详见“getGaussianKernel”）；为了完全控制结果，无论将来可能修改所有这些语义，建议指定所有 ksize、sigmaX 和 sigmaY。

# python - Python输入时间限制

> ID：13901365
> 
> 赞同：0
> 
> 时间：2012-12-16T12:39:12.273
> 
> 标签：python, python-3.x

> **可能重复：**
> [Python 时间限制](https://stackoverflow.com/questions/13893287/python-time-limit)

我有作业要做，我真的需要一个解决方案。直到昨天我一直在尝试这样做，但我不知道怎么做。

程序必须生成并打印一个字母或数字，而用户必须尽快键入它并按 ENTER。30秒后游戏结束。

好吧，我不知道如何为游戏设置时间限制。我正在通过stackoverflow搜索，但没有发现任何有用的东西。请帮我。

这是我到目前为止所做的。但我需要改进这段代码。因为当 30 秒结束时，游戏也应该结束，但是当我输入最后一个字符时，这段代码就结束了。我需要在某个时候打破它，但我不知道如何。30 秒后程序仍应提供给用户写最后一个字母/数字，但不能计入结果。

```
max_time =30
start_time = time.time()  # remember when we started
while (time.time() - start_time) < max_time:

    response = "a"              # the variable that will hold the user's response
    c = "b"                     #the variable that will hold the character the user should type
    score = 0
    number = 0

    c = random.choice(string.ascii_lowercase + string.digits)
    print(c)
    number = number + 1

    response = input("Type a letter or a number: ") #get the user's response

    if response == c:       #if the response from the previous loop matches the character
         score = score + 1          #from the previous loop, increase the score. 
```

非常感谢。

# android - getApplication() 在被杀死的服务中返回 null

> ID：13901375
> 
> 赞同：0
> 
> 时间：2012-12-16T12:40:36.563
> 
> 标签：android, android-service

我杀死了我在我的应用程序中创建的服务，并且当它使用 `START_REDELIVER_INTENT`标志`getApplication()`方法重新启动时返回`null`。
我这样称呼它（服务类）

```
@Override
public void onCreate(){
    this.wifiApp = (WifiApplication) getApplication();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:28:15.807

问题在于我在到达的 WifiApplication 实例中调用的方法，该实例不为空

# php - KendoUI 自动完成问题

> ID：13901381
> 
> 赞同：0
> 
> 时间：2012-12-16T12:41:39.347
> 
> 标签：php, javascript, jquery, autocomplete, kendo-ui

我正在尝试使用 KendoUI 自动完成功能，但它给了我错误：

未捕获的类型错误：无法读取未定义的属性“长度”

这是我的javascript：

```
$("#toppersearch").kendoAutoComplete({
minLength: 1,
dataTextField: "name",
dataSource: new kendo.data.DataSource({
       transport: {
           read: "Search/search/"+query,
       },
       schema: {
           data: "data"
       },
       serverFiltering: true,
       serverPaging: true,
       pageSize: 20
   }),
   placeholder: "Find a cake topper...",
   dataBound: function(e) {
    alert(e);
}
}); 
```

我的测试返回数据：

```
require Ms.'SearchModel.php' ;
class Search extends Controller {

public $query ;
private $model ;

function __construct($query)
{
    parent::__construct() ;
    $this->model = new SearchModel ;
    $this->query = $query ;
    $this->search() ;
}

public function search()
{
    echo '{data:[{0:1,name:Horse}]}' ;
}

} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:52:32.537

我不确定这是否真的导致了您的错误，但是您返回的 JSON 字符串缺少“Horse”周围的引号。它应该是：

```
echo '{data:[{0:1,name:"Horse"}]}'; 
```

# c# - 在 List 中的 Item2 中搜索

> ID：13901383
> 
> 赞同：2
> 
> 时间：2012-12-16T12:41:48.830
> 
> 标签：c#, list, tuples, contains

我一直在挣扎。
我该怎么写：

```
/* initialization */ 
List<Tuple<string, string, string>> mytuples = new List<Tuple<string, string, string>>();

// pseudocode:
if(mytuples.Contains("hello") in Item2)
{
    Console.Write("Success");
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-16T12:44:08.767

```
/* initialization */ 

List<Tuple<string, string, string>> mytuples = new List<Tuple<string, string, string>>();

bool containsHello = mytuples.Any(c=>c.Item2.Contains("hello"));

if(containsHello )
{
    Console.Write("Success");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T12:45:54.647

您可以使用 linq 来检查它：

```
List<Tuple<string, string, string>> mytuples = new List<Tuple<string, string, string>>();

if(mytuples.Where(t=>t.Item2.Contains("hello")).Any())
    Console.Write("Success"); 
```

# c# - 如何为 C# 和 Java 设置符号服务器

> ID：13901385
> 
> 赞同：1
> 
> 时间：2012-12-16T12:42:07.510
> 
> 标签：c#, java, debugging, symbols, symbol-server

Microsoft 提供了一种解决方案，允许人们使用符号服务器轻松管理和检索其代码的符号文件。

我们同时使用 c# 和 Java，我想知道是否有一种方法可以设置类似于 Symbol Server for Java 的东西，是否可以让它成为同一个服务器。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:59:00.123

我相信您在谈论存储库管理器和源代码工件。如果是这样 - 有两个常见的选项 - Nexus 和 Artifactory。[您可以在此处](http://weblogs.java.net/blog/johnsmart/archive/2010/01/03/tale-two-repository-managers-nexus-and-artifactory-compared-and-co)阅读它们之间的区别。我从未使用过 Artifactory，但我可以保证通过配置 Nexus 和 Maven，您可以轻松地从中央存储库检索代码或其他工件。

# objective-c - 在 Objective-C 中使用 NSMenu 切换 NSStatusItem

> ID：13901387
> 
> 赞同：1
> 
> 时间：2012-12-16T12:42:24.527
> 
> 标签：objective-c, macos, cocoa

我有一个从首选项窗口切换 NSStatusItem 的应用程序。首选项窗口有一个复选框“启用/禁用”，它调用 NSStatusItem 类中的“启用状态项目”和“禁用状态项目”方法。

这一切都很好，我的问题是向这个 NSStatusItem 添加一个菜单。NSStatusItem 类中的代码如下所示：

```
-(void)enableStatusItem
{
    //get icon
    theIcon = [NSImage imageNamed:@"test.png"];

    //create item
    statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
    [statusItem setImage:theIcon];
    [statusItem setHighlightMode:YES];
    [statusItem setMenu:statusMenu];
}

-(void)disableStatusItem
{
    [[NSStatusBar systemStatusBar] removeStatusItem:statusItem];
} 
```

一切正常，除了 setMenu。起初我在 awakeFromNib 中加载了 StatusItem，然后 setMenu 起作用了。但是当首选项复选框“关闭”时，StatusItem 必须保持关闭，所以我无法再将它加载到 awakeFromNib 中。

我怀疑 setMenu 没有加载，因为它不在 awakeFromNib 中，但是在 awakeFromNib 之后调用了“enableStatusItem”，所以在 awakeFromNib 中还没有要添加菜单的 statusItem。而且我无法“预加载”statusItem，因为它是使用“[[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];”创建的

到目前为止，我已经尝试了很多，甚至制作了一个测试应用程序，我在其中一个接一个地添加了每一段代码，所以我可以分解它。但到目前为止没有任何成功。

我觉得因为就是这么简单的东西，只有一个小NSMenu，那难道没有简单的解决方案吗？

也许你们中的一个人有一个想法？

提前感谢您的时间，问候弗兰斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:51:42.110

**该代码没问题，您的问题是菜单未保留**

```
assert(statusMenu); 
```

# windows-8 - WinJS 示例与 MS ASP.NET SignalR 一起使用？

> ID：13901388
> 
> 赞同：0
> 
> 时间：2012-12-16T12:42:25.880
> 
> 标签：windows-8, winjs, signalr.client

我在 VS2012 中创建了[SignalR 快速入门](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)。它在 localhost:xxxx 上运行良好。我毫无问题地添加了一个 Winforms 项目作为 SignalR 客户端。

然后，我添加了一个 Win8 WinJS 应用程序，但无法通过 SignalR 接收消息。基本上我在网上得到了 undefind

```
var chat = $.connection("http://localhost:39414/").chatHub; 
```

任何人都可以发送成功的示例解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:01:11.050

可能还有更多，但首先，Windows 应用商店应用程序不能使用环回连接。 [您可以按如下方式进行设置](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx)；但是，这仅用于测试，因为具有这种设置的应用程序不会通过认证。

# c - SDL/C IMG_Load 触发 0xc000007b 错误

> ID：13901390
> 
> 赞同：1
> 
> 时间：2012-12-16T12:43:08.247
> 
> 标签：c, image, sdl

我正在使用 C（不是 CPP）遵循 LazyFoo 的 SDL 教程，我被困在从 SDL_LoadBMP() 切换到 IMG_Load() 的部分。功能

```
SDL_Surface *load_image(char *filename) {

    SDL_Surface* loadedImage = NULL;
    SDL_Surface* optimizedImage = NULL;

    loadedImage = SDL_LoadBMP(filename);

    if(loadedImage != NULL) {
        optimizedImage = SDL_DisplayFormat( loadedImage );

        SDL_FreeSurface(loadedImage);
    }

    return optimizedImage;
} 
```

工作得很好

`background = load_image("background.bmp");`

但如果我改变

`loadedImage = SDL_ImageBMP(filename);`

它到

`loadedImage = IMG_Load(filename);`

并构建/运行它会触发 0xc000007b 错误。我很确定我正确安装了 SDL_image.h 库，因为我仔细地遵循了这些步骤。所以我的问题是：怎么了？从谷歌我只来了：带有.dll的东西但是 - 什么？我正在使用 Visual Studio 2010，但它也发生在 Code::Blocks 上（但它不会编译）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-04T23:27:32.687

获取 SDL.dll

从你下载的 sdl

（来自[http://www.libsdl.org/release/SDL-devel-1.2.15-VC.zip](http://www.libsdl.org/release/SDL-devel-1.2.15-VC.zip)）并将其粘贴到可执行文件旁边。

试试 lib/x86 文件夹中的那个

然后删除您在 sdl 安装过程中可能粘贴在 System32/ 或 System/ 或 SysWOW64/ 中的任何 SDL.dll 文件

# php - func_get_args 和 foreach

> ID：13901395
> 
> 赞同：0
> 
> 时间：2012-12-16T12:43:39.917
> 
> 标签：php

这两者有什么不同，为什么当我使用 func_get_args foreach 时只回显最后一个数字“7”

```
function add(){
    $total=func_get_args();
    foreach($total as $result);
    echo $result;
    }

add(1, 5 , 6, 7);

//////////////////////////////////////////////////////////////////

$array=array(1, 5, 6, 7);
foreach($array as $result){
    echo $result;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T12:46:46.693

删除分号

```
foreach($total as $result); 
```

它应该是

```
foreach($total as $result) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T12:49:40.973

首先，您对 foreach 循环什么都不做

```
foreach ($total as $result) /* nothing */ ; 
```

发生的事情是最后一个`$result`被留下并由下一行回显。

您实际上可以像这样重写 add 函数：

```
function add(){
    return array_sum(func_get_args());
}

echo add(1, 5 , 6, 7); 
```

哪个更酷恕我直言；）（但不检查字符串值等）

# android - 在视图android中插入一些东西

> ID：13901396
> 
> 赞同：1
> 
> 时间：2012-12-16T12:43:49.547
> 
> 标签：android, android-layout

我想做的是画一个矩形并在里面放一些动态文本，这可能吗？

我想不是，但有什么办法可以解决这个问题？？

无论如何，我在这里使用此示例绘制矩形..
[rectangle -example](https://stackoverflow.com/questions/10124919/can-i-draw-rectangle-in-xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:49:47.447

您给出的示例相当静态。您还可以采用更动态的方法来覆盖视图的 onDraw 方法：

```
public class MyView extends View {
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Paint p = new Paint();
        p.setColor(Color.BLACK);
        canvas.drawRect(10, 10, 10, 10, p);
        p.setColor(Color.WHITE);
        canvas.drawText("Ohai!", 0, 5, 20, 20, p);
    }
} 
```

然后，您只需将此视图放在您想要的面板上。当然还有更多的方法可以使用，只要看看[Canvas](http://developer.android.com/reference/android/graphics/Canvas.html)类

或者您当然可以只使用某种可以自定义的 TextView（添加一些边框等）。

# php - 创建组和选项的动态输入文本并将其传输到 php

> ID：13901398
> 
> 赞同：4
> 
> 时间：2012-12-16T12:44:01.980
> 
> 标签：php, javascript, html, dynamic, voting

我正在用 PHP 编写简单的远程投票系统，但在以 php 形式控制动态选项和组时遇到问题。

我想要这样的东西，但是....（在我的帖子底部询问）：

[http://imageshack.us/photo/my-images/803/97450434.png/](http://imageshack.us/photo/my-images/803/97450434.png/)

**我有以下代码：**

html:

```
<fieldset style="width:99%; float:left">
         <div id="dynamicInput">
              Group 1<br><input type="text" name="myGroupInputs[]">
                 <div id="dynamicInput" style="margin-left:50px;">
                      Option 1<br><input type="text" name="myOptionsInputs[]">
                 </div>
         </div>
             <input type="button" value="Add another group" onClick="addGroup('dynamicInput');">
             <input type="button" value="Add another option" onClick="addInput('dynamicInput');">         
</fieldset> 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​js：

```
var counter_option = 1;
var limit_option = 10;
var counter_group = 1;
var limit_group = 10;
function addInput(divName){

     if (counter_option == limit_option)  {
           alert('You cannot add more options.');
     }
    else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "<font style='margin-left:50px;'>Option</font> " + (counter_option+ 1) + " <br><input type='text' style='margin-left:50px;' name='myOptionsInputs[]'>";
          document.getElementById(divName).appendChild(newdiv);
          counter_option++;
     }
}
function addGroup(divName){

     if (counter_group == limit_group)  {
           alert('You cannot add more groups.');
     }
    else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Group " + (counter_group + 1) + " <br><input type='text' name='myGroupInputs[]'>";
          document.getElementById(divName).appendChild(newdiv);
          counter_group++;
     }
} 
```

**1.如果我要添加另一个组，如何编辑此代码以使每个选项都依赖于正确的组并将选项计数器重置为0？
组 1、选项 1、选项 2；
组 2，选项 1，选项 2；等等**

**2\. 稍后如何将这些值放入 php 变量、数组或…… - 我想将这些值插入数据库（php 脚本）。脚本必须知道该选项对应于正确的组。**

我的数据库有两个表：组和选项（FK 到组）

链接到 jsfiddle 编辑：http: [//jsfiddle.net/mnyyK/](http://jsfiddle.net/mnyyK/)

请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:12:55.187

您可以使用多维数组。

将组的名称更改为：

```
<div id="dynamicInput">
  Group 1
  <br>
  <input type="text" name="groups[0][name]">
  <div id="dynamicInput" style="margin-left:50px;">
    Option 1
    <br>
    <input type="text" name="groups[0][options][]">
  </div>
</div> 
```

在添加新组时增加`groups`' 索引，例如

```
"<input type='text' name='groups[" + counter_group + "][name]'>" 
```

```
"<input type='text' name='groups[" + counter_group + "][options][]'>" 
```

您应该能够以这种方式在 PHP 中处理组：

```
foreach ($_POST['groups'] as $group) {
  $name = $group['name'];
  $options = $group['options'];
  ...
} 
```

* * *

## 更新

为了消除混淆，这里是实际的代码：

```
var counter_group = 0;
var limit_group = 10;
var counter_option = 0;
var limit_option = 10;

var addInput = function(divName) {
  if (counter_option == limit_option - 1) {
    alert('You cannot add more options.');
  } else {
    counter_option++;
    var newdiv = document.createElement('div');
    newdiv.innerHTML = "<font style='margin-left:50px;'>Option</font> " + (counter_option + 1) + "<input type='text' name='groups[" + counter_group + "][options][]'>";
    document.getElementById(divName).appendChild(newdiv);
  }
}

var addGroup = function(divName) {
  if (counter_group == limit_group - 1) {
    alert('You cannot add more groups.');
  } else {
    counter_group++;
    counter_option = -1;
    var newdiv = document.createElement('div');
    newdiv.innerHTML = "Group " + (counter_group + 1) + "<input type='text' name='groups[" + counter_group + "][name]'>";
    document.getElementById(divName).appendChild(newdiv);
  }
} 
```

# javascript - 滚动动画幻灯片切换图例到 html/body 顶部

> ID：13901401
> 
> 赞同：2
> 
> 时间：2012-12-16T12:44:13.630
> 
> 标签：javascript, slidetoggle, legend, fieldset

我单击`content2`滑动切换以显示内容，但我需要 html/body 滚动到 # 部分，将打开的滑动切换移动到页面顶部。单击后，我需要主窗口向下滚动到该部分。我有这段代码，但不知道在哪里添加它：

```
$("html, body").animate({'scrollTop': $(this).offset().top }, 'slow'); 
```

这是我正在使用的代码：

```
<fieldset>
        <legend>
            <a href="javascript: void(0);"onclick="$(this.parentNode).next().slideToggle('slow');$('#content2').trigger('scroll');">content 02</a>
        </legend>[>the content<]
</fieldset> 
```

# java - JAVA中的对象

> ID：13901409
> 
> 赞同：-1
> 
> 时间：2012-12-16T12:45:54.910
> 
> 标签：java

```
Project sample = new Project(); 
```

这意味着创建一个项目类型的变量样本，创建一个对象并将其分配给变量。

下面的代码是什么意思

```
 Project sample = new Project() {

  private void Test(){

   }

} 
```

Test 是一种方法，这段代码是什么意思，如何调用 Test() ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T12:47:47.060

这：

1.  创建一个匿名子类`Project`；
2.  在该类中，创建一个名为的新方法`Test()`（在其他情况下，这可能是覆盖，但在这里不能）；
3.  创建这个子类的一个实例；
4.  将实例引用分配给`sample`。

`Test()`是`private`，调用它的唯一方法是从匿名子类的另一个方法。由于您没有其他方法，因此无法调用`Test()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:48:02.080

```
Project sample = new Project() {

  private void Test(){

   }

} 
```

只需创建一个扩展 Project 的匿名类，该类返回并`new`返回匿名对象。
该`Test`方法要么是新定义的实例方法，要么是（如果`Project`有方法则被覆盖`Test`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:55:30.153

除了其他答案。当您实现`interface`或扩展`abstract`类时，这种匿名类非常有用。例如：

```
public interface MyInterface {
    public void doStuff();
} 
```

这是你的实现：

```
MyInterface myInterface = new MyInterface() {

    public void doStuff() {
        //here is your implementation
    }

    public void doAnotherStuff() {
        //Note that this method is public, but
        //you're still not able to call it from outside of this class
        //because it's not part of MyInterface's contract
    }
}; 
```

这一行会给你一个错误：

```
myInterface.doAnotherStuff(); //WTF? I don't know about this method of MyInterface 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T12:58:52.460

您提供的代码是[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)的示例。

正如您在其中声明的私有方法一样，您只能从该类内部访问它。

这种类型的构造通常用于类行为的局部变化。通常它用于实现一个简单的接口。所以我们可以在其中委托一些操作。

# javascript - 将全局对象绑定到 Angular 中的控制器

> ID：13901417
> 
> 赞同：0
> 
> 时间：2012-12-16T12:47:14.010
> 
> 标签：javascript, angularjs

这是我的标记

```
 <div id="username" ng-controller="quickUserAdd">
    <h1>User</h1>
    <input placeholder="your full name" ng-model="fullname">
    <div ng-show="fullname">
        <div>
            <span class="big">Username</span>
            <span class="small">{{username()}}</span>
        </div>
        <div class="password-{{passwordStatus()}}">
            <input type="password" ng-model="password" placeholder="Password"/>
            <span class="small">{{passwordStatus()}}</span>
        </div>
    </div>
</div> 
```

我的控制器：

```
 var passwordStrengths = ["weak", "medium", "ok", "great"];
    function quickUserAdd($scope)
    {
        $scope.password = "";
        $scope.fullname = "";
                   ....
    } 
```

如何将 $scope.fullname、$scope.username 和 $scope.password 绑定到**installation.user[0]**（其中安装是一个全局对象），以便在全名、用户名或密码发生任何更改时，它们都会被更新在installation.user[0] （也是一个对象）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:15:10.323

我相信您很清楚全局变量的问题，所以我在这里假设您没有其他选择，并且在您的用例中您需要访问全局定义的 JavaScript 对象。

在您的情况下，最简单的方法可能是在您的控制器中公开`installation.user[0]`范围，如下所示：

```
function quickUserAdd($scope) {
   $scope.user = installation.user[0];
   ....
} 
```

然后`user`像这样绑定到对象的属性：

```
<input placeholder="your full name" ng-model="user.fullname">
<input type="password" ng-model="user.password" placeholder="Password"> 
```

这样，输入框中的任何更改都应立即传播到全局变量。

请注意，如果您想在 AngularJS 世界之外更改全局变量并且仍然更新 UI，则必须将此更改包装到[Scope.$apply()](http://docs.angularjs.org/api/ng.%24rootScope.Scope)方法中。

如果我可以再建议一件事：通常人们倾向于将 AngularJS 控制器命名为以大写开头并添加 Ctrl 后缀，这样您的控制器就可以命名为`QuickUserAddCtrl`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:40:07.370

我真正需要的是共享服务。

这允许我在控制器之间共享数据结构，在这种情况下，在 QuickUserAdd（快速添加一个用户）和 UsersEditor（修改整个用户列表。在应用程序的不同页面中）之间共享用户。

此外，我可以使用 pkozlowski.opensource 的解决方案（在初始化时引用外部对象）将我的所有服务附加到“安装”中的对象。并且永远不需要 Scope.$apply() ，因为安装对象只需要能够一次读取从 UI 收集的所有数据。

# oracle - 如何使项目在 Oracle Forms 中不可见？

> ID：13901418
> 
> 赞同：2
> 
> 时间：2012-12-16T12:47:35.417
> 
> 标签：oracle, oracleforms

我想让一个文本项不可见。在我没有找到这个功能的属性中，我将文本项调整为非常小的尺寸，但它仍然可见。

我无法删除该项目，因为我需要它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T20:51:08.147

一种方法是使用项目的 Visible 属性。

不确定您使用的是哪个版本的 Oracle Forms，但使用的是 10.1.2.0.2，这是基于 EMP 表的表单。请注意，显示了第一个字段 Empno。

![在此处输入图像描述](../Images/45c746f9850b5994d10845c608021722.png)

在 Form Builder 中，选择项目 empno，然后调出 Property Pallet（右键单击并选择“Property Pallet”或使用 F4）。滚动列表并查找 Visible 属性（或开始在 Property Pallet 搜索栏中输入 Visible）

将值更改为否。

![在此处输入图像描述](../Images/3c4443038c42809a988ff0c10be12da5.png)

当窗体再次运行时，Empno 字段不再显示。

![在此处输入图像描述](../Images/9fee710a74dca96e6a246475198d62fb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:13:29.217

除了建议的正确答案之外，如果您隐藏了很多项目，最好也将画布设置为 null 以指示引擎不要重绘它们。只对一个项目没有意义，但如果这个屏幕有很多隐藏项目，并且在慢速网络上大量使用，它可以在性能上产生相当大的差异。

# erlang - 将 proto 文件生成的代码放在 Erlang/OTP 中的什么位置？

> ID：13901421
> 
> 赞同：1
> 
> 时间：2012-12-16T12:48:14.457
> 
> 标签：erlang, protocol-buffers

这与其说是一个问题，不如说是在寻找一种合理的方法。我正在使用[gpb](https://github.com/tomas-abrahamsson/gpb)从文件中生成 Erlang 绑定`*.proto`（Google 协议缓冲区）。我的 OTP 应用程序的结构是默认的：

```
/ebin
/include
/priv
/src 
```

假设给定一个`*.proto`文件，`person.proto`gpb 生成`person.erl`，包括解码和编码消息的方法，并`person.hrl`保存记录定义，因为协议缓冲区在 Erlang 中实现为记录。这些生成的文件放置的位置可以传递给编译，但我不知道放在哪里。是否将生成的源代码置于版本控制之下存在[争议，但我想省略它。](https://stackoverflow.com/questions/893913/should-i-store-generated-code-in-source-control)因此，将 proto 文件存储在其中`src/`是不适用的，因为它们每次都会出现在版本控制中。**那么把它们放在哪里呢？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T15:38:56.593

使用允许源代码控制系统忽略它们的命名规则（如 gpb_ 前缀）将它们放在 src 目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T00:18:14.067

我肯定会把它们放在 src 目录中。然后，您在源代码控制系统中明确*包含*`.proto`文件，同时确保从源代码控制系统中*排除*相应的文件`.erl`。然后，您只需要构建工具（make、rebar、...）中的规则来`.erl`从`.proto`文件中生成文件，然后编译它们。根据源代码控制系统，您可能甚至不必删除它们（这适用于 git）。

# sql - 计算小计中的百分比

> ID：13901423
> 
> 赞同：2
> 
> 时间：2012-12-16T12:48:37.137
> 
> 标签：sql, sas

我正在尝试在一个 sql 语句中计算小计的百分比。这需要使用子查询，但迄今为止无法适应 SAS 的[示例](http://support.sas.com/documentation/cdl/en/sqlproc/63043/HTML/default/viewer.htm#n112pviu616u5rn1uileli1b03zb.htm)。

需要2个步骤：

1.  按 LoadArea 计算 TotalCargo 的小计。
2.  对小计求和，然后将每个 LoadArea 的小计除以总和。

将小计除以所有小计的总和。

```
 ShipmentID   LoadArea    TotalCargo
 1            BRZ         200000
 2            BRZ         250000
 3            AG          200000
 4            AG          250000 

 End result:
 LoadArea  TotalCargo  Vol_share
 AG        450000      .5
 BRZ       450000      .5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:52:03.637

像这样：

```
SELECT 
  LoadArea, 
  SUM(TotalCargo)AS TotalCargo,
  (SUM(TotalCargo)* 1.0) / 
  (SELECT SUM(TotalCargo) FROM Table1) AS Vol_share
FROM Table1 
GROUP BY LoadArea; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/2d0d9/3)

这会给你：

```
| LOADAREA | TOTALCARGO | VOL_SHARE |
-------------------------------------
|       AG |     450000 |       0.5 |
|      BRZ |     450000 |       0.5 | 
```

# jasper-reports - 如何在 Jaspersoft iReport Designer 4.7 中获得 3 页报告

> ID：13901430
> 
> 赞同：0
> 
> 时间：2012-12-16T12:49:23.670
> 
> 标签：jasper-reports, ireport

首先：我已经阅读[了这个问题](https://stackoverflow.com/questions/11830904/how-do-i-add-a-second-page-in-jaspersoft-ireport-designer-4-7)，但它对我不起作用。

我需要什么：我有一个 SQL 查询，它返回一个包含大约 50 行的 3 列集，如下所示：

```
year | month | number
2012 | 1     | 35
2012 | 2     | 24
2012 | 3     | 127 
```

等等。现在我需要这个数据的两种不同的表示。第一个是二维条形图，第二个是显示数字的表格。我设法做到了这两点，但我希望整个报告总共有 3 页。

第一页应该是带有报告标题的简单封面页，据我所知，我可以通过简单地添加标题栏来获得。第二页应该是条形图（填满整个页面），第三页应该是表格（也填满整个页面）。

我尝试了以下方法，但没有得到我需要的结果：

*   创建了 2 个子报表（1 个用于条形图，1 个用于表），将它们都添加到主报表（在详细信息区域）中，中间有一个分页符。结果是 2 页，但图表和表格只占了一半。当我尝试将子报表的大小调整为页面的完整大小时，我收到错误消息，指出它们超出范围......
*   创建了 1 个带有 2 个详细信息带的报告。将图表添加到详细信息带 1 中，将表格添加到详细信息带 2 中。这对于两个元素都可以成为页面的完整大小，但是整个编译的报告现在有 100 页 --> 我的一行中有 2 页sql集

那么我怎样才能完成我所需要的！？它甚至是正确的工具吗？还是我应该简单地创建两个报告，将它们导出为 PDF 并手动合并 PDF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:25:08.830

我的建议 - 在您的 SQL 查询中，添加第四列来连接您的年份和月份（我们称之为年月）。使用以下字段创建详细信息带：年、月、数字。为您的图表创建一个汇总带，将年月作为 x 轴，将数字作为 y 轴。使标题和摘要带与输出论文的大小相同。在 iReport 中，右键单击您的报告名称，然后转到报告的“属性”框。选中“新页面上的摘要”复选框。

# actionscript-3 - 数组上的 ActionScript 3.0 HitTestObject

> ID：13901435
> 
> 赞同：1
> 
> 时间：2012-12-16T12:49:51.150
> 
> 标签：actionscript-3

大家下午好！

我在使用 hitTestObject 的 ActionScript 3.0 中有一个小问题。我想检查我的角色是否击中平台（我正在制作一个简单的平台游戏。）。我有一个用于操作脚本的平台对象，我将子对象添加到数组中。直到此时一切顺利，我可以将它们放在舞台上等。

如果我的字符碰到平台但它不能正常工作，我已经写了一个循环来检查。我的角色从第一个平台跌落，只有在撞到最后一个平台时才停止跌落。（所以对于数组中的最后一个，它运行良好。）

现在这是我的代码中的这一部分，我希望有人可以帮助我。:)

```
import flash.events.Event;
import flash.geom.Rectangle;

stop();
var vy:Number=0;
var gv:Number=1;
var sebesseg:Number=4;
var jumped:Boolean=false;
var stay:Boolean=false;

var level:Array=new Array  ;

var gravity:Number=2;

var velocity:Number=1.1;

var platform0:MovieClip=new platform  ;
level.push(addChild(platform0));
level[0].x=200;
level[0].y=450;
var platform1:MovieClip=new platform  ;
level.push(addChild(platform1));
level[1].x=700;
level[1].y=650;
var platform2:MovieClip=new platform  ;
level.push(addChild(platform2));
level[2].x=1000;
level[2].y=800;

stage.addEventListener(Event.ENTER_FRAME, cameraFollowCharacter);

function cameraFollowCharacter(evt:Event) {
root.scrollRect=new Rectangle(PORK1_mc.x-(stage.stageWidth/2)+320,PORK1_mc.y-(stage.stageHeight/2)-50,stage.stageWidth,stage.stageHeight);
}

stage.addEventListener(KeyboardEvent.KEY_DOWN,gomb);
function gomb(k:KeyboardEvent):void {
    trace(k);
    if (k.keyCode==37) {
        if (sebesseg==2) {
            sebesseg=sebesseg+0;
         } else {
            sebesseg-=1;
         }
    } else if (k.keyCode==39) {
        sebesseg+=1;
    } else if (k.keyCode==Keyboard.ESCAPE) {
        stop();
        root.scrollRect=new Rectangle    (stage.x,stage.y,stage.stageWidth,stage.stageHeight);

        gotoAndStop(2);

    } else if (k.keyCode==Keyboard.F1 && stay==false) {
        stage.frameRate=0;
        stay=true;
    } else if (k.keyCode==Keyboard.F1 && stay==true) {
        stage.frameRate=24;
        stay=false;
    }

   }

stage.addEventListener(Event.ENTER_FRAME, megy);
function megy(e:Event):void {
   PORK1_mc.x+=sebesseg;

   gravity*=velocity;
   PORK1_mc.y+=gravity;
   //trace(velocity);

} 
```

这部分是问题，HTTESOBJECT 仅适用于最后一个平台

PORK1_mc.hitPork_mc 这是我的角色（hitPork_mc 是一个不可见的矩形，用于更好的 HitTestObject。所以当我写我的字符时。从平台跌落直到最后一个，他最后跌倒并停止跌落，所以对于阵列中的最后一个平台它工作得很好。我不想对我的代码进行太多更改，如果可能的话，只在 hitTest 部分进行更改。

```
 this.addEventListener(Event.ENTER_FRAME, handleEnterFrame);

 function handleEnterFrame(e:Event):void {
     for (var i:int = 0; i < level.length; i++) {

        if (level[i].hitTestObject(PORK1_mc.hitPork_mc)) {
            velocity=0;

        } else {

            velocity=1.1;
            gravity=4;
        }

     }
  } 
```

提前感谢您的每一个帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:54:01.390

使用您的原始代码，您对每个平台执行以下操作：

*   如果发生碰撞，请将速度设置为零。
*   如果不是，请将速度设置为 1.1。

由于您按顺序执行此操作，因此当您与平台 1 但不是 2 或 3 碰撞时会发生以下情况：

1.  与 1 的碰撞会将您的速度设置为零。
2.  与 2 的碰撞将您的速度设置为 1.1。
3.  与 3 的碰撞将您的速度设置为 1.1。

由于这些都在同一帧中连续发生，因此最终结果是您的角色永远不会停止，除非与平台 3 发生碰撞。

通过在将速度设置为零后返回，您将跳出循环，防止您的碰撞工作被撤消。你正在做的事情会起作用，但你也可以用另一种不太简洁但可能更有意义的方式来做：

```
function handleEnterFrame(e:Event):void 
{
  var collided:Boolean = false; //This will record if you collided or not.

  for (var i:int = 0; i < level.length; i++) 
  {
    if (level[i].hitTestObject(PORK1_mc.hitPork_mc)) 
    {
      collided = true;
    } 
  }

  if(collided) velocity = 0;
  else
  {
    velocity=1.1;
    gravity=4;
  }
} 
```

请注意，这里我们没有在 for 循环中应用速度和重力，因为我们不希望它发生在我们可能碰撞的每个对象上。相反，我们在确定是否与任何对象发生碰撞后设置一次。

这也有助于表明您在没有碰撞的每一帧都设置了重力，即使您似乎没有将重力设置为零的任何点；我怀疑这是你想要解决的问题。

# c# - 如何使用 .net 获取子网掩码？

> ID：13901436
> 
> 赞同：13
> 
> 时间：2012-12-16T12:50:06.853
> 
> 标签：c#, network-programming, ip, subnet

我想使用 c# 获取客户端子网掩码。

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T12:56:51.497

首先，首先检查[`NetworkInterface`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.aspx)类。里面有很多信息。这些文章将对您有所帮助：

*   [`IP Address Calculations with C# (Subnetmasks, Networks, …)`](https://docs.microsoft.com/en-us/archive/blogs/knom/ip-address-calculations-with-c-subnetmasks-networks)
*   [`Get Subnet Mask`](http://www.java2s.com/Code/CSharp/Network/GetSubnetMask.htm)
*   [`Finding subnet mask from IP4 address using c#`](http://weblogs.asp.net/razan/archive/2009/09/25/finding-subnet-mask-from-ip4-address-using-c.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:54:31.887

不可能知道客户端的网络正在使用什么子网掩码（如果我们谈论的是 D 类和 E 类 IP 地址）。

我的假设是，“客户端”是指连接到服务器的远程计算机。否则请参阅@Soner Gönül 答案。

# c# - c#面板行覆盖

> ID：13901437
> 
> 赞同：0
> 
> 时间：2012-12-16T12:50:17.743
> 
> 标签：c#, winforms, graphics, drawing, panel

在面板的 Paint 事件中，我有一个代码，它应该在 2 点之间画一条蓝线。

```
 private void panel1_Paint(object sender, PaintEventArgs e)
    {
        panel1.AllowDrop = true;
        listBox1.AllowDrop = true;
        if (!s.IsEmpty && !f.IsEmpty)
        {

            e.Graphics.DrawLine(new Pen(Color.Blue, 5f), f, s);
            s = Point.Empty;
            f = Point.Empty;

        }

    } 
```

我在 SetPoint 方法中使面板无效：

```
 void setPoint(Point p)
    {
        if (f.IsEmpty)
            f = p;
        else
        {
            s = p;
            panel1.Invalidate();
        }

    } 
```

这是通过单击按钮触发的。它会画一条线，但**问题是**，当一条线已经存在时。它会覆盖它。我以为问题出在`Invalidate`. 但我不知道如何解决它，因为`Refresh()`或`Update()`不起作用。
我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:28:00.977

您需要将所有点保存在某种结构中。在 Paint 方法中，您将遍历结构并绘制所有线条。

那是因为当 Paint 被激活时，它会再次重绘所有控件，并且它无法“记住”之前的内容，它只是在做你在里面写的东西。

# c++ - 解析 xml 并在文件中转储每个 <> 块

> ID：13901438
> 
> 赞同：0
> 
> 时间：2012-12-16T12:50:35.073
> 
> 标签：c++, xml-parsing

我正在尝试使用一些简单的 C++ 解析 xml，其中包含类似的块

```
 <mgrwt event="1">
    ...
    ...
    ...
    </mgrwt>

<mgrwt event="2">
    ...
    ...
    ...
 </mgrwt> 
```

现在，我有一个作用于这些块中的每一个的 bash 脚本 - 所以，我的问题是，我如何在 xml 中循环（我不需要 RapidXML 或类似的东西），以便轻松地转储到一个小的临时文件中堵塞 ？

我的解析器看起来像

```
 bool begin_tag = false;
    while (getline(in,line))
    {
        std::string tmp; 
        tmp=line;
       if(line.find("<mgrwt event=")<=line.size()){
            cout<<line<<endl;
            begin_tag = true;
            continue;
        }
        else if (tmp == "</mgrwt>")
        {
            begin_tag = false;

        }

     }
} 
```

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:00:01.557

我建议使用 XML 解析器来读取 XML 文件。结帐[expat](http://expat.sourceforge.net/)、[POCO XML](http://pocoproject.org/docs/)或其他库。

如果出于某种原因您不能，并且您正在阅读的内容总是与您的示例中的内容完全相同，没有其他格式变化，您还应该使用`find()`来检测块的结尾：

```
else if(line.find("</mgrwt>")<=line.size())
{
   begin_tag = false;
} 
```

# c - C中的Posix线程优先级

> ID：13901439
> 
> 赞同：0
> 
> 时间：2012-12-16T12:50:38.337
> 
> 标签：c, pthreads, posix, thread-priority

`A thread which is joined to another can't continue its execution untill the thread to which it is joined has been completely executed or terminated.`

遵循上述线程特性，我在以下代码中创建的最后一个线程也必须在过程中打印其语句，`Func()`但事实并非如此。这是为什么？

其次，我无法为`priority`我在这个程序中创建的任何线程进行设置。我错过了什么吗？

这是代码：

```
void *Func(void *arg);
int main()
{
    pthread_t tid[5];

    pthread_attr_t *tattr;
    struct sched_param param;
    int pr,error,i;

    do
    {
        if( (tattr=(pthread_attr_t *)malloc(sizeof(pthread_attr_t)) )==NULL)
        {
            printf("Couldn't allocate memory for attribute object\n");
        }
    } while(tattr==NULL);

    if(error=pthread_attr_init(tattr))
    {
        printf(stderr,"Attribute initialization failed with error %s\n",strerror(error));
    }

    for(i=0;i<5;i++)
    {
        scanf("%d",&pr);

        param.sched_priority=pr;
        error=pthread_attr_setschedparam(tattr,&param);

        if(error!=0)
        {
            printf("failed to set priority\n");
        }

        if(i%2==0)
        {
            if(error=pthread_attr_setdetachstate(tattr,PTHREAD_CREATE_DETACHED))
            {
                fprintf(stderr,"Failed to set thread attributes with error %s\n",strerror(error));
            }
        }
        else if(error=pthread_attr_setdetachstate(tattr,PTHREAD_CREATE_JOINABLE))
        {
            fprintf(stderr,"Failed to set thread attributes with error %s\n",strerror(error));
        }

        pthread_create(&tid[i],tattr,Func,tattr);

        pthread_join(tid[i],NULL);
        printf("waiting for thread %d\n",i);
    }

    free(tattr);

    printf("All threads terminated\n");
    return 0;
}

void *Func(void *arg)
{
    pthread_attr_t *tattr=(pthread_attr_t *)arg;
    int state,error;

    struct sched_param param;

    error=pthread_attr_getdetachstate(tattr,&state);

    if(error==0 && state==PTHREAD_CREATE_DETACHED)
    {
        printf(" My state is DETACHED\n");
    }
    else if(error==0 && state==PTHREAD_CREATE_JOINABLE)
    {
        printf(" My state is JOINABLE\n");
    }

    error=pthread_attr_getschedpolicy(tattr,&param);

    if(error==0)
    {
        printf(" My Priority is %d\n",param.sched_priority);
    }

    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:15:40.337

你的操作系统是什么？

成员的含义`struct sched_param`是为调度策略定义的实现`SCHED_OTHER`。

例如，在 GNU/Linux 上，除非调度策略为`SCHED_RR`或`SCHED_FIFO`，否则`sched_priority`不使用成员，必须将其设置为 0。

除此之外，第五个线程（最后一个）还打印其状态和优先级。

# powershell - 从另一个软件调用 Powershell 脚本

> ID：13901441
> 
> 赞同：2
> 
> 时间：2012-12-16T12:50:54.450
> 
> 标签：powershell, shellexecute

我尝试从 LaTeX 编辑器 TeXworks 运行 Powershell 脚本。该调用本身有效，但我收到一条错误消息，指出此系统上的脚本执行已停用。我已经尝试将执行策略设置为`unrestricted`or `bypass`，结果相同。当 TeXworks 以管理员身份运行时，结果也相同。我可以毫无问题地手动执行脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T12:54:12.863

您可能会在 32 位/64 位控制台中设置无限制并在 64 位/32 位应用程序中尝试。将其设置在正确的控制台中，或两者中。

```
32-bit
C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe

64-bit
C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:54:46.377

你设置了什么范围？尝试使用管理员权限启动 PowerShell 并输入以下命令：

```
Set-ExecutionPolicy ByPass -Scope LocalMachine 
```

# f# - 为什么 Array.zeroCreate 仍然为不可为空的类型填充 null？

> ID：13901443
> 
> 赞同：1
> 
> 时间：2012-12-16T12:51:30.023
> 
> 标签：f#

这是否意味着每当我传递一个不可为空类型的数组时，我仍然应该检查它是否为空？实际上它甚至不可能检查`<> null`但必须使用`operator.unchecked`。它比 C# 更好吗？

```
type test=
    {
        value: int
    }

let solution = Array.zeroCreate 10

solution.[0] <- {value = 1}
solution.[1].value   // System.NullReferenceException: Object reference not set to an instance of an object

type test =
  {value: int;}
val solution : test [] =
  [|{value = 1;}; null; null; null; null; null; null; null; null; null|]
val it : unit = () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:13:23.513

这取决于从哪里传递数组。

如果数组仅在 F# 中创建和使用，则不，您不需要检查 null；实际上，您*不应该*检查 null （使用`Unchecked.defaultOf`），因为 F# 编译器通过在编译的 IL 中表示它们来优化一些特殊值，例如`[]`（和`None`，在某些情况下） 。`null`

如果您正在使用由用另一种语言（例如 C#）编写的代码传入的数组，那么是的，您仍然应该检查 null。如果调用代码只是创建数组并且没有进一步改变它，那么您只需要执行一次空值检查。

编辑：这是关于 F# 编译器如何使用以下方法优化某些值的表示的先前讨论`null`：[为什么 None 表示为 null？](https://stackoverflow.com/questions/11959321/why-is-none-represented-as-null/11959583)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:14:09.477

如文档`Array.zeroCreate`所示，它将元素初始化为`Unchecked.defaultof<_>`. 因此，这带有与直接使用相同的所有警告`Unchecked.defaultof`。一般来说，我的建议是尽可能使用`Array.create`/ `Array.init`，并将其 `Array.zeroCreate`视为可能的性能优化（在处理不可为空的类型时需要小心）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T13:47:20.220

您正在创建一个记录类型，它被实现为一个类，它确实可以为空。如果您打算创建一个结构，您的代码应如下所示：

```
type test =
    struct
        val value: int
        new(v) = { value = v }
        override x.ToString() = x.value.ToString()
    end

let solution = Array.zeroCreate 10

solution.[0] <- test(1) 
```

这输出：`val solution : test [] = [|1; 0; 0; 0; 0; 0; 0; 0; 0; 0|]`

您还可以使用 Struct 属性编写类型，从而节省一定程度的缩进。

```
[<Struct>]
type test =
    val value: int
    new(v) = { value = v }
    override x.ToString() = x.value.ToString() 
```

# air - 从 Actionscript Worker 调用 AIR 本机扩展

> ID：13901444
> 
> 赞同：1
> 
> 时间：2012-12-16T12:51:35.993
> 
> 标签：air, flash-builder, air-native-extension

我目前正在尝试将一些耗时的任务推给动作脚本工作者。作为其处理的一部分，此工作人员将需要调用 AIR 本机扩展。

我已经在 Flash Builder 4.7 中尝试了各种组合，即嵌入式工作人员和外部工作人员（在外部工作人员项目中显式包装了 ANE），但可惜我无法让这个设置工作。我不断从工作人员那里收到一个错误，说找不到本机扩展类（错误＃1014）。

有谁知道是否有可能做到这一点，或者这是 Actionscript 工作人员的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T18:08:19.770

I'm guessing this might be a bit late now, but I've just been having this problem myself, and it was caused by the ANE not being packaged with the app when it's sent to the device / simulator.

Classes within the NE weren't being found at runtime, but were accessible in Flash Builder.

It turned out that by default the .ANE file wasn't copied to the device.

To fix this, change the following project property:

*ActionScript Build Packaging -> Apple iOS -> Native Extensions -> **Check 'Package' for the ANE***

No idea why it wasn't included by default. When you uncheck 'Package' you get a warning telling you that it may cause runtime issues!

Hope this is of use for somebody.

# c# - “System.threading.threadStart'是一个'类型'，在给定的上下文中无效'？（C＃）

> ID：13901445
> 
> 赞同：0
> 
> 时间：2012-12-16T12:51:36.757
> 
> 标签：c#, .net, multithreading, delegates, lambda

我得到了错误`var ts = System.Threading.ThreadStart(delegate()`（红线淹没在下面`System.Threading.ThreadStart`）。问题是什么？

```
using System;
using System.Threading;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        public Program()
        {
            int[] iArray = new int[3];
            iArray[0] = 2;
            iArray[1] = 1;
            iArray[2] = 5;
            var ts = System.Threading.ThreadStart(delegate()
            {
                foreach (int i in iArray)
                    Foo(i);
            });
        }

        public void Foo(int i)
        {
            Console.WriteLine(i + ",");
        }

        public static void Main(String[] args)
        {
            Program p = new Program();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:53:32.363

您缺少一个`new`：

```
var ts = new System.Threading.ThreadStart(delegate()
         {
             foreach (int i in iArray)
                 Foo(i);
         }); 
```

顺便提一句：

您不必`ThreadStart`为其命名空间添加前缀`System.Threading`，因为您已经`using`在 *.cs 文件的顶部声明了它。

# objective-c - 将对象传递给块是否保证其生命周期将被保留？

> ID：13901447
> 
> 赞同：0
> 
> 时间：2012-12-16T12:51:54.790
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks, retain

假设我有以下 typedef：

```
typedef void (^myBlock)(id); 
```

我有一些方法*myMethod*接受*myBlock*作为参数并产生一些*id*变量：

```
void myMethod(id myObj, myBlock block) {
    // ...
    block(myObj);
    // ...
} 
```

因此，如果我有以下内容：

```
- (void) someMethod {
    __block id myObj; // Some initialization local to the scope of someMethod;
    // myObj = ... some assignment to myObj so it is not nil...

    dispatch_async(someQueue(), ^{
        // (*) Some long, possibly multi-queued and multi-blocked, processing, 
        // so we are sure that someMethod will run out:
        // ...

        // 1\. Can I be sure that myObj is still alive and actual here 
        // after the long processing (*)?

        myMethod(myObj, ^(id myObj) {
            // (**) Some long, possibly multi-queued, processing here too...

            // 2\. Can I be sure that myObj is still alive and actual here 
            // after the long processing (**) finishes?
        })
    })
} 
```

我是否必须**特别保留 myObj**以便它可以跨越不同的队列/块？

抱歉，如果我问的是一些明显且有足够记录的东西 - 我刚刚开始学习 Objective-C，当时 ARC 可能是默认设置，所以它不需要我太关心这些保留计数、自动释放和其他东西，并且只在我在这里描述的情况下考虑它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:58:53.317

> 1.  经过长时间的处理（*）后，我可以确定 myObj 在这里仍然存在并且实际存在吗？

是的，即使您没有使用块说明符，因为块内的块保留了它。

> 1.  在长时间处理 (**) 完成后，我可以确定 myObj 仍然存在并且实际存在吗？

是的。块内使用的每个变量都由 ARC 保留。

**PS：**这一切都与 ARC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T21:54:09.917

> 1.  经过长时间的处理（*）后，我可以确定 myObj 在这里仍然存在并且实际存在吗？

是的。通常，块中的自由变量在复制时由块保留。然而，这是一个`__block`变量。在 ARC 中，`__block`变量也由块保留（但是，在 MRC 中不是这种情况）。

> 1.  在长时间处理 (**) 完成后，我可以确定 myObj 仍然存在并且实际存在吗？

这个问题根本与块捕获变量无关。这里，`myObj`是一个参数，即一个局部变量，不是从周围的范围中捕获的。所以问题真的是，当块被调用时，参数是否指向一个有效的对象？由于简单地用它获得的参数`myMethod()`同步调用它的参数，在 ARC 下，假设参数在被调用时是有效的（即在外部块中）应该不会出错。这是真的，因为我们同意从上面的（1）那里是有效的。`block``myObj``myMethod``myObj`

# javascript - 调整浏览器大小时如何隐藏div？

> ID：13901448
> 
> 赞同：0
> 
> 时间：2012-12-16T12:51:55.543
> 
> 标签：javascript, html, css, responsive-design

查看[www.usatoday.com](http://www.usatoday.com)。
调整浏览器大小时，右侧部分会隐藏。然后，当单击按钮（反过来，当现在隐藏时出现）时，它会从无处出现。我想做同样的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T12:59:36.470

在 CSS 中使用媒体查询

```
@media only screen and (max-device-width: 480px) {
    .mydiv{display:none;}
} 
```

相应地改变你的宽度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T12:56:01.557

这将使用媒体查询来实现，请查看[http://mediaqueri.es/](http://mediaqueri.es/) 以获取更多示例

这里有一些关于媒体查询的教程

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

[http://www.1stwebdesigner.com/css/media-queries-tutorial-convert-burnstudio-responsive-website/](http://www.1stwebdesigner.com/css/media-queries-tutorial-convert-burnstudio-responsive-website/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T13:24:50.493

我建议你很简单的决定。这是你的html：

```
<div id="divToHide">
    TEXT THAT SHOUD DISAPPEAR
</div>
<button id="showDivToHide">
    Show div</button> 
```

那是javascript代码：

```
$(document).ready(function () {
    $(window).resize(function () {
        $('#divToHide').hide();
    });

    $('#showDivToHide').click(function () {
        $('#divToHide').show();
    });
}); 
```

当然你可以描述你自己的规则来隐藏和显示你的 div。

# css - 在struts2中突出显示带有红色边框的TextField错误

> ID：13901450
> 
> 赞同：2
> 
> 时间：2012-12-16T12:52:14.837
> 
> 标签：css, jsp, struts2

我正在使用 struts2 开发网页。我想用红色边框突出显示我的用户 ID/密码文本字段，并在用户名/密码错误的情况下显示错误消息

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
<title>Stock Portfolio Management</title>
</head>
<FONT COLOR=black><marquee BEHAVIOR=ALTERNATE><h1 ALIGN="center">STOCK PORTFOLIO</h1></marquee></FONT>
 <style type="text/css">
body
{
/* background: url(./image/9.jpg) no-repeat fixed;  */
    /* -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; */
    postion:fixed
}
img
{
position:fixed;
bottom: 20%;
left: 20%;
margin-top: -50px;
margin-left: -100px;
}
#login
{
position:fixed;
top: 20%;
left: 50%;
margin-top: -50px;
margin-left: -100px;
} 
.errors {
background-color:#FFCCCC;
    border:1px solid #CC0000;
    width:350px;
    margin-bottom:2px;
    position:relative;
    left:0pt;
    bottom:10pt;

}

.errors li{ 
    list-style: none; 
}
</style>
<body>
<img src="image/9.jpg" height="250" width="300">
<s:form id="login" action="authenticate" method="post">
    <s:textfield name="userid" key="User Id" size="25" />
    <s:password name="password" label="Password" size="25" />

    <s:if test="hasActionErrors()">
    <div class="errors">
      <s:actionerror/>
   </div>
   </s:if> 

   <s:submit method="CheckUser" value="Login" align="center" />  <s:reset value="Reset" align="center" />
    <a href="<s:url action="moveregister" method="execute"/>">New User?</a>
    &nbsp
    <a href="<s:url action="forgotpassword" method="forgot"/>">Forgot Password?</a>
</s:form>
</body>
</html> 
```

这就是我在行动课上的内容：

```
addActionError(getText("User Id which you provided doesnt exists"));
return "error"; 
```

如您所见，我正在`.errors`使用上面的 CSS 捕获错误并在屏幕上显示并对其进行格式化。

但是我想突出显示带有红色边框的错误`userID`字段，如果那是错误或密码字段，如果那是错误。我尝试了谷歌搜索，发现了很多东西，比如编辑你的模板`class/<s:fielderror>`等，但无法生成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:39:30.330

首先，把你所有的 HTML 放在它应该在的地方；

其次，用红色边框装饰字段通常是显示验证错误的惯例：例如，格式错误（或超出范围）的日期，数字字段中的字符，强制字段留空，ecc ... Struts2 应该由 执行，最好通过 XML，为标签`ValidationInterceptor`中的每个字段添加一个错误。`<s:fielderrors/>`您的情况不同：您通过了验证，执行了 Action 的方法，但结果是“用户未通过身份验证”：在大多数 Web 应用程序中，这将导致出现红色错误消息，而无需修饰用户名和密码字段（如果它们是空的，你应该装饰它们......）。

但是，如果你想装饰它们，为什么不使用 Javascript 呢？

以 CSS 样式添加：

```
.decoratedErrorField{
    border:2px solid red;
} 
```

将 ID 添加到您的字段：

```
<s:textfield name="userid" id="userid" key="User Id" size="25" />
<s:password name="password" id="password" label="Password" size="25" /> 
```

如果发生错误，请通过 ID 获取您的字段并通过向它们添加错误类来装饰它们；将其添加到页面末尾，就在之前`</body>`：

```
<s:if test="hasActionErrors()">
    <script type="text/javascript">
        //<![CDATA[                 
            document.getElementById("userid").className += " decoratedErrorField ";
            document.getElementById("password").className += " decoratedErrorField ";
        //]]>
    </script>       
</s:if> 
```

# php - Magento：将属性 ID 转换为发票上的标签

> ID：13901453
> 
> 赞同：1
> 
> 时间：2012-12-16T12:52:57.073
> 
> 标签：php, magento, magento-1.5

我在以下方面进行了一些发票模板修改：

```
/Mage/Sales/Model/Order/Pdf/Items/Invoice/Default.php 
```

允许在发票上包含制造商等自定义属性。

此代码有效，但它会吐出制造商 ID，我需要标签。

```
 $product = Mage::getModel('catalog/product')->loadByAttribute('sku', $this->getSku($item), array('manufacturer'));

           if ($product) {
             $lines[0][] = array(
               'text'  => Mage::helper('core/string')->str_split($manufacturer, 15),
               'feed'  => 220
              );
    } 
```

例如 - 当我需要“耐克”时，我得到 4138

我已经尝试过这个可以在前端工作但我得到一个错误：致命错误：调用非对象上的成员函数getResource（）

```
$_product->getResource()->getAttribute('pos_short_colour')->getFrontend()->getValue($_product) 
```

那么如何在发票模板中调用标签而不是 ID。

PS 我也尝试过使用 getData / getLabel / getText

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:52:19.960

您可以使用该`getAttributeText()`函数获取属性的标签。例如：

```
$text = $product->getAttributeText('manufacturer'); 
```

* * *

另外，我相信您在第二段代码中看到的错误是因为您使用`$_product`的是未定义/空值。试试`$product`吧。

# java - 在 Google 应用引擎 java 中使用 ajax 获取 Json 数据

> ID：13901454
> 
> 赞同：0
> 
> 时间：2012-12-16T12:53:12.177
> 
> 标签：java, jquery, json, google-app-engine, jsp

我无法使用 Json 对象从 java servlet 的 ajax 请求中取回数据。下面是我们在谷歌应用引擎中使用通道 api 的代码。我们需要实现聊天应用程序。

```
displayFriendList = function() {

                        var txt = document.createElement("div");

                        txt.innerHTML = "<p> Logged in as <b>" + userid
                                + "</b><p><hr />";
                        document.getElementById("friendlistdiv").appendChild(
                                txt);

                        var dataString ='userId='+userid;

                        $.ajax({
                            type : "POST",
                            url : "/OnlineUserServlet",
                            data : dataString,
                            success : function(html) {
                            alert(html.frndsList[0].friend);

                            }

                        });

                    }; 
```

Java Servlet 代码：

```
 while(friendList.hasNext()){

      friend = friendList.next() ;
      if(!friend.equals(user)){
           Map<String, String> state = new HashMap<String, String>();
          state.put("friend", friend);
          state.put("type","updateFriendList");
          state.put("message",user); 
          state1.add(state);
          message = new JSONObject(state);

            channelService.sendMessage(
                  new ChannelMessage(friend,message.toString()));

      }
      i++;

    }

    Map<String, String> statejason = new HashMap<String, String>();
    statejason.put("friendsList", state1.toString());
    //System.out.print("hello"+message.toString());
    response.setContentType("text/plain");
    response.getWriter().print(statejason.toString());
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:29:26.130

您的响应类型应该是`application/json`.

# iphone - 如何使用 revmob 运行本地通知

> ID：13901457
> 
> 赞同：0
> 
> 时间：2012-12-16T12:53:43.430
> 
> 标签：iphone, ios, ios4, notifications, revmob

Revmob 在我的应用程序中运行良好，但我想使用 revmob 发送本地通知

[[RevMobAds 会话] scheduleLocalNotification];

// 在你的 AppDelegate.m

*   (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification { [[RevMobAds session] processLocalNotification:notification]; }

这是我正在使用的代码，但之后它没有运行，我的代码有问题，我想，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:37:02.147

如[RevMob 网站](http://sdk.revmob.com/ios-api/Classes/RevMobAds.html#//api/name/scheduleLocalNotification)中所述， scheduleLocalNotification 方法在 RevMob 期望的最佳时间安排通知。昨天这个时间是下午 5:30 左右（当地时间），但如果他们认为有必要，他们可以更改它。

如果要在特定时间测试本地通知，可以使用[scheduleLocalNotification:](http://sdk.revmob.com/ios-api/Classes/RevMobAds.html#//api/name/scheduleLocalNotification%3a)方法。

# php - MySQLi 准备好的语句正在默默地修改我的数据。这是预期的行为吗？

> ID：13901463
> 
> 赞同：0
> 
> 时间：2012-12-16T12:54:09.580
> 
> 标签：php, mysql, mysqli

我的代码当前使用`mysqli::query`并检查`mysqli::$warning_count`. 尝试将文本插入整数列时，`0`会被插入并生成警告。但是，我刚刚开始学习准备好的语句，对于相同的查询，不会产生警告。

**这是我的代码的摘录：**

```
$db_err_msg = 'Database Error: Failed to update profile';
$sql = "UPDATE tblProfiles SET intBookId = ? WHERE lngProfileId = ?";
$stmt = $mysqli->prepare($sql) or output_error($db_err_msg);

$book = 'CA';
$id = 10773;
$stmt->bind_param('ii', $book, $id) or output_error($db_err_msg);
$stmt->execute() or output_error($db_err_msg);
echo '$stmt->affected_rows is ', $stmt->affected_rows, "\n";

if ($mysqli->warning_count) {
    $warnings = $stmt->get_warnings();
    do {
        trigger_error('Database Warning (' . $warnings->errno . '): '
            . $warnings->message, E_USER_WARNING);
    } while ( $warnings->next() );
}
else {
    echo 'no warnings', "\n";
} 
```

**产生以下输出：**

> $stmt->affected_rows 为 1
> 无警告

请注意，该`intBookId`列具有`TINYINT`数据类型。相同的查询在使用时会生成警告`mysqli::query`，但在使用准备好的语句时不会。

启用严格模式无济于事。它会在使用时将警告变成错误`mysqli::query`，但在使用准备好的语句时，该列会以`0`;静默更新。

作为记录，我的应用程序在达到这一点之前已经进行了广泛的验证。但我希望通过这种额外的验证来捕捉我可能错误地错过的任何东西。

**注意：**切换到 PDO 超出了当前项目的范围。

**为什么 MySQLi 准备好的语句会发生这种情况？这是预期的行为吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:54:09.580

虽然它可能不会立即明显，但这是预期的行为。

**因为这行代码：**

```
$stmt->bind_param('ii', $book, $id) or output_error($db_err_msg); 
```

PHP 在将值发送到 MySQL 之前将其转换为整数。MySQL 接收到`0`该列的有效值，并且不会生成警告。

**如果您不希望 PHP 执行此操作，则需要将其作为字符串发送。像这样：**

```
$stmt->bind_param('si', $book, $id) or output_error($db_err_msg); 
```

MySQL 将收到字符串 'CA' 并生成有关它是不正确整数值的警告。

**注意：**通过将所有内容作为字符串发送，MySQL 将不得不做更多的处理来将字符串转换为整数，但是当整个查询使用 mysqli::query 作为字符串发送时，它已经在这样做了。

**注意：**使用大于 的整数时会出现相关问题`PHP_INT_MAX`。如果您认为整数值将超过该最大值（取决于平台，在 32 位平台上仅为 2147483647）并且精度很重要，那么将其作为字符串发送会更安全。

# python - AttributeErrors、Tuples 和其他不错的东西

> ID：13901469
> 
> 赞同：1
> 
> 时间：2012-12-16T12:55:01.167
> 
> 标签：python, module, python-2.7, tuples, attributeerror

我不能说我完全理解这个脚本，因为课程还超出了我的范围。无论如何，我已经[从这里](http://code.google.com/p/py-omegle/downloads/detail?name=Omegle.py&can=2&q=)下载了 py-omegle 模块。而且我似乎无法让它运行。希望我不需要发布包括函数在内的整个课程，特别是我遇到问题的部分与 urllib2 有关 - 所以我想这不是一个太具体的问题 - 导致所有问题的行是：

```
self.connector = urllib2.build_opener(processor),urllib2.HTTPHandler(debuglevel=1) 
```

它不让我：

```
#omegle.py
[ln33] self.connector.addheaders = [
[ln34]     ('User-agent',user_agent)
[ln35]     ]

       # or 

[ln98] self.id = self.connector.open(self.url+'start',data={}).read().strip('"') 
```

两者都返回 AttributeError：

```
AttributeError: 'tuple' object has no attribute 'addheaders'

# and further down
AttributeError: 'tuple' object has no attribute 'open' 
```

有人可以解释如何解决这个问题吗？我确定这与我发布的第一行有关。[可以在此处访问](http://py-omegle.googlecode.com/files/Omegle.py)此模块中唯一文件的完整源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:58:33.760

我认为这是括号放错的情况。

第一行：

```
self.connector = urllib2.build_opener(processor),urllib2.HTTPHandler(debuglevel=1) 
```

创建一个由以下组成的元组

```
 urllib2.build_opener(processor) 
```

和

```
 urllib2.HTTPHandler(debuglevel=1) 
```

然后将此元组分配给`self.connector`.

# jquery - jQuery：使相同的 div 出现

> ID：13901472
> 
> 赞同：1
> 
> 时间：2012-12-16T12:55:24.863
> 
> 标签：jquery

我在这种情况下：http: [//jsfiddle.net/HXGrY/](http://jsfiddle.net/HXGrY/)

我希望能够单击带有 ID #add-cyan 的我，并显示带有 ID #todo-cyan 的 。和所有其他人一样。

有人可以帮我弄这个吗？

我想要这些

```
<img src="img/cyan.png" width="45px" class="hidden" id="todo-cyan"/>
<img src="img/magenta.png" width="45px" class="hidden" id="todo-magenta"/>
<img src="img/yellow.png" width="45px" class="hidden" id="todo-yellow"/>
<img src="img/black.png" width="45px" class="hidden" id="todo-black"/> 
```

单击下方的 img 时显示/向下滑动：

```
<img src="img/cyan.png" width="60px" height="60px" id="add-cyan"/>
<img src="img/magenta.png" width="60px" id="add-magenta"/>
<img src="img/yellow.png" width="60px" id="add-yellow"/>
<img src="img/black.png" width="60px"  id="add-black"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T12:57:53.633

```
$('[id^="add-"]').click(function(){
    $('#todo-' + this.id.replace('add-', '')).removeClass('hidden');
}); 
```

理想情况下，您应该使用类来对`add`元素进行分组，这样您就不必进行`'[id^="add-"]'`特技了。

为了详细说明，我选择了 ID 以以下开头的所有元素`add-`：

```
$('[id^="add-"]') 
```

`hidden`然后添加一个单击处理程序，该处理程序从具有相应`todo`ID的所有元素中删除该类：

```
$('#todo-' + this.id.replace('add-', '')).removeClass('hidden'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:26:46.347

[***更新***](http://jsfiddle.net/HXGrY/4/)

实际上，如果您要做的只是复制单击的图像，甚至不需要将所有这些图像定义两次。只需[克隆](http://api.jquery.com/clone)它。

JavaScript

```
$(function() {
    $("img.add").click( function() {
        $("#todobar").empty().append( $(this).clone() );
    });
});​ 
```

CSS

```
.add {
    height: 60px;
    width: 60px;
} 
```

修改后的 HTML

```
<div id="todobar">
</div>

<img src="img/cyan.png" class="add" alt="cyan"/>
<img src="img/magenta.png" class="add" alt="magenta"/>
<img src="img/yellow.png" class="add" alt="yellow"/>
<img src="img/black.png" class="add" alt="black"/> 
```

* * *

[***jsFiddle 演示***](http://jsfiddle.net/HXGrY/3/)

有用的 jQuery 方法研究：[`.click()`方法](http://api.jquery.com/click)、[jQuery`.data()`方法](http://api.jquery.com/data)、[jQuery`.show()`方法](http://api.jquery.com/show)、[jQuery`.toggle()`方法](http://api.jquery.com/toggle)。jQuery 文档非常棒，方法的命名也相当直观。尽量保持您的 HTML 规范：从 HTML5 开始，有一个 data- 属性用于向标记添加数据。还要看看不同种类的[选择器](http://api.jquery.com/category/selectors)。我使用了下面的[类选择器](http://api.jquery.com/class-selector/)( `'.add'`) 和[id 选择器](http://api.jquery.com/id-selector/)( `'#todo-cyan'`)。

JavaScript

```
$(function() {
    $("img.add").click( function() {
        var col = $(this).data("color");
        $("#todo-" + col).toggle();
    });
});​ 
```

CSS

```
.hidden {
    display: none;
    width: 45px;
}

.add {
    height: 60px;
    width: 60px;
} 
```

修改后的 HTML

```
<div id="todobar">
    <img src="img/cyan.png" class="hidden" id="todo-cyan"/>
    <img src="img/magenta.png" class="hidden" id="todo-magenta"/>
    <img src="img/yellow.png" class="hidden" id="todo-yellow"/>
    <img src="img/black.png" class="hidden" id="todo-black"/>
</div>

<img src="img/cyan.png" class="add" data-color="cyan" alt="cyan"/>
<img src="img/magenta.png" class="add" data-color="magenta" alt="magenta"/>
<img src="img/yellow.png" class="add" data-color="yellow" alt="yellow"/>
<img src="img/black.png" class="add" data-color="black" alt="black"/> 
```

# foxpro - FoxPro 9.0 左连接被覆盖

> ID：13901478
> 
> 赞同：1
> 
> 时间：2012-12-16T12:56:08.953
> 
> 标签：foxpro

我正在通过使用左连接来总结 do while 循环的结果，但由于某些未知原因，它没有加入任何表，只是覆盖。什么是我看不见的？

```
DO WHILE counter < NbContracts
    SELECT depot_nr as depot_nr;
    WHERE rownum = counter FROM test3
    test33(depot_nr, counter)
    counter = counter + 1
ENDDO
CLOSE TABLES 

PROCEDURE test33(depot_nr_in, NbofTimes)
USE bs_case alias bs
SELECT  jaar    as jaar,;   
        Psres4pcgb  as &depot_nr_in;        
    WHERE Depot_nr = depot_nr_in FROM bs 
    COPY TO toJoin.dbf

DO CASE 
    CASE NbofTimes = 1
        SELECT * FROM toJoin.dbf 
        COPY TO joining.dbf
    CASE NbofTimes = NbContracts
        SELECT * FROM bsP.tmp as one LEFT JOIN joining.dbf as aggregated;
        ON (one.depot_nr = aggregated.depot_nr) into table final.dbf
        CLOSE TABLES
        ENDPROC
    OTHERWISE
        SELECT &depot_nr_in FROM toJoin.dbf as a LEFT JOIN joining.dbf as b;
            ON a.jaar = b.jaar INTO TABLE final.dbf
        CLOSE TABLES
        USE final.dbf 
        COPY TO joining.dbf
ENDCASE

CLOSE TABLES
CLOSE DATABASES
ENDPROC 
```

这些问题出现在 OTHERWISE 部分（我认为），并且由于另一个未知原因，我的 FoxPro 无法识别 CASE 结构（奖金问题，但优先级较低）。

关于我想要什么的小插图

```
test3.dbf
===================================
22
31
32
23 
```

NbofTimes = 1

```
final.dbf
===================================
year     22
-----------------------------------
  1     val1
  2     val2
  3     val3
 ...    ...
  80    val80 
```

NbofTimes = 2

```
final.dbf
===================================
year      22      31
-----------------------------------
  1      val1    val4
  2      val2    val5
  3      val3    val6
 ...     ...     ...
 80      val80   val81 
```

NbofTimes = 3

```
final.dbf
===================================
 year    22      31        32
-----------------------------------
  1     val1    val4      val7
  2     val2    val5      val8
  3     val3    val6      val9
 ...     ...       ...    ...
  80     val80   val81     val82 
```

NbofTimes = 4

```
final.dbf
===================================
year    22      31        32       23
-----------------------------------
  1    val1    val4      val7     val10
  2    val2    val5      val8     val11
  3    val3    val6      val9     val12
 ...    ...    ...       ...      ...
  80   val80   val81     val82    val83 
```

现在发生的事情是我的最终表格永远不会增长，它只包含最后一次迭代。帮助.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:34:31.023

我看到这是您对同一问题的第四次迭代，试图得到答案。正在发生的事情的结构和样本确实很差。您正在显示任意值 1、2、3 ... 80、4、5、6...81 等。您的数据似乎都来自 BS_Case 表。您似乎正在尝试为每个 Depot 创建某种交叉表比较。

现在，您的 BS_Case 表中可能有 200 个条目，包括（例如）5 个唯一的 Depot。仓库“A”可能有 40 个条目，仓库“B”可能有 10 个，仓库“C”有 18 个，其余的分为仓库“D”和“E”。

或 - 每个 DEPOT 在 BS_Case 表中是否有相同数量的条目...例如像麦当劳这样的企业，它有数百家商店，并且每天都向同一个中心点报告每日销售额，所有商店都有相同的记录数。

如果是这样，您似乎正在尝试显示每个 Depot 之间的比较。

因此，例如原始数据记录将类似于...

```
BS_CASE
Record #  Depot_NR  Psres4pcgb
1         DepotA    AValue1
2         DepotB    BValue1
3         DepotC    CValue1
4         DepotA    AValue2 test
5         DepotB    BValue2 another
6         DepotC    CValue2 confirm 
```

您的每个外部循环表示的 DISTINCT 仓库列表将导致

```
JustDepotList
Record #  Depot_NR
1         DepotA
2         DepotB
3         DepotC 
```

你希望得到的是

```
Final
Record  DepotA        DepotB            DepotC
1       AValue1       BValue1           CValue1
2       AValue2 test  BValue2 another   CValue2 confirm 
```

所以，请确认我在这里展示的内容的准确性。

另外，编辑这个问题（不是我的答案，而是你的问题的这个版本），而不是为同一个原始问题重新发布另一个问题。在您的编辑、发布中，显示一些实际数据以及我与您想要的数据有多接近。

我没有看到任何真正的“聚合”，例如 min()、max()、sum() 值，但聚合仅针对添加与每个仓库相对应的另一列。我相信我和其他人可以更好地帮助您更好地阐明您最终想要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:07:18.493

我能够通过在 OTHERWISE 语句下使用这段代码来解决我的查询。这有点像黑客，但它正在工作=）

```
 SELECT * FROM toJoin.dbf LEFT JOIN joining.dbf;
        ON toJoin.jaar = joining.jaar INTO TABLE finaltmp.tmp
    CLOSE TABLES
    USE finaltmp.tmp
    ALTER TABLE finaltmp.tmp;
        DROP COLUMN jaar_a;
        RENAME COLUMN jaar_b TO jaar
    COPY TO final.dbf
    USE final.dbf 
    COPY TO joining.dbf 
```

# javascript - Firefox：禁用 javascript

> ID：13901489
> 
> 赞同：-3
> 
> 时间：2012-12-16T12:57:58.667
> 
> 标签：javascript

有人确切知道 Firefox 发送什么信息来告诉应用程序禁用了 javascript 吗？我需要这个用于自动化目的：我必须模仿禁用 js 的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:02:50.990

如果浏览器禁用了 JavaScript，它会：

1.  不会处理 JavaScript`script`元素（如果它们是内联的，则不会执行其中的代码，如果它们使用，则不会下载或执行引用的文件`src`）。

2.  **将**`<noscript>...</noscript>`在文档标记的块内呈现标记内容。

3.  不会触发任何与 DOM0 等属性挂钩的事件处理程序`onclick`。

`accepts`我不相信有任何信息发送到服务器告诉它浏览器禁用了 JavaScript，例如，标题或类似内容没有区别。

# javascript - 使用按钮在两种状态之间切换

> ID：13901495
> 
> 赞同：4
> 
> 时间：2012-12-16T12:58:53.897
> 
> 标签：javascript, html, css

本质上，我想使用一个按钮使用 CSS 将一个 div 带到前面`z-index`，然后当再次按下该按钮时，我希望它恢复到原来的状态。

这是我到目前为止得到的代码，它会很高兴第一次改变它，但它不会恢复它。

```
function thumbnail(){
    if (document.getElementById("div").style.zIndex= -3){
        document.getElementById("div").style.zIndex= -2;
    }

    if  (document.getElementById("div").style.zIndex= -2){
        document.getElementById("div").style.zIndex= -3;
    }       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T13:03:14.843

```
function thumbnail(){
    var depth = document.getElementById("div").style.zIndex;
    document.getElementById("div").style.zIndex = (depth == -3)? -2 : -3;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:31:22.593

这个稍微高效一点的版本避免了多次遍历 DOM：

```
function thumbnail () {
    var elStyle = document.getElementById ("div").style;
    elStyle.zIndex = elStyle.zIndex == -3 ? -2 : -3;
} 
```

当您稍后返回此代码时，使用`div`作为 id 可能会令人困惑，请使用标识 div 功能的名称。

# c# - C#直接到另一个页面

> ID：13901497
> 
> 赞同：0
> 
> 时间：2012-12-16T12:59:00.440
> 
> 标签：c#, redirect, login

我有一个登录表单，当我输入正确的密码时，我希望它把我带到我已经完成的另一个页面，我该如何做到这一点？我已经在 Windows 中使用 c# 完成了此操作以供应用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:09:04.510

如果您使用的是 Windows 窗体应用程序，则可以使用 with[`.Show()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.show.aspx)方法。

```
Form targetform = new Form();
targetform.Show(); 
```

如果您使用的是 ASP.NET Web 应用程序，则可以使用 with[`Response.Redirect()`](http://msdn.microsoft.com/en-us/library/ms524309%28v=vs.90%29.aspx)方法。

```
Response.Redirect("targetpage.aspx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:10:34.043

尝试这个 ：

```
 new Form2().Show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:07:06.280

您创建了一个“其他页面”的新实例（我们称之为 MainForm），`.Show()`它：

```
var mainForm = new MainForm();
mainForm.Show(); 
```

# java - 从顶部减少填充矩形的高度

> ID：13901498
> 
> 赞同：1
> 
> 时间：2012-12-16T12:59:04.477
> 
> 标签：java, swing, size, jcomponent

我在我的一个项目中使用了一个paintComponent类，我目前想知道如何从顶部减小矩形的大小，使其向下。

这是代码的一部分：

```
public Battery(){

    super();
    firstTime = true;
    f = new Font("Helvetica", Font.BOLD, 14);
    m = Toolkit.getDefaultToolkit().getFontMetrics(f);
}

public void paintComponent(Graphics g){

    if(firstTime){

        firstTime = false;
        batteryLevel = 1 +  this.getHeight();
        decr = batteryLevel / 20; 

    }else{

        g.setColor(Color.RED);
        g.fillRect(1, 0, this.getWidth(), this.getHeight());

        g.setColor(Color.GREEN);
        g.fillRect(1, 0, this.getWidth(), batteryLevel);

        g.setColor(Color.BLACK);
        g.setFont(f);
        g.drawString("TEST", (getWidth() - m.stringWidth("TEST")) / 2 , this.getHeight() / 2);
    }

}

public void decreaseBatteryLevel(){

    batteryLevel -= decr; 
    this.repaint();

} 
```

PS。对不起，如果我做错了什么，我是这个论坛的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:36:06.267

当您希望可见电池电量下降时，您需要增加与 的值相关的 Y 坐标`batteryLevel`。你可以使用：

```
g.fillRect(1, getHeight() - batteryLevel, getWidth(), batteryLevel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:07:11.660

反而

```
 g.fillRect(1, 0, this.getWidth(), batteryLevel); 
```

做

```
 g.fillRect(1, batteryLevel, this.getWidth(), getHeight() - batteryLevel); 
```

也可能`repaint(50L)`代替`repaint()`.

* * *

***如果您的问题意味着：如何为电池电量的变化设置动画。***

使用 javax.swing.Timer：

```
 int toPaintBatteryLevel = batteryLevel;
    // In the paintComponent paint upto toPaintBatteryLevel.

    Timer timer = new Timer(100, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if (toPaintBatteryLevl == batteryLevel) {
                return;
            }
            if (toPaintBatteryLevl > batteryLevel) {
                --toPaintBatteryLevel; // Animate slowly
            } else {
                toPaintBatteryLevel = batteryLevel; // Change immediately
            }
            repaint(50L);
        };

    });

    timer.start(); 
```

为了便于编码，有一个永久计时器。并且在外部改变了batteryLevel，时间决定了toPaintBatteryLevel，paintComponent 用它来绘制。

# c# - 如何在 C# 中将灰度图像转换为 RGB？

> ID：13901499
> 
> 赞同：-4
> 
> 时间：2012-12-16T12:59:04.440
> 
> 标签：c#

如何将灰度图像转换为`RGB`格式？我也添加了**Aforge**库，但无法定义着色阈值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:02:56.250

我不清楚您的意思是什么，`Convert gray scale image to RGB`并假设您正在尝试恢复颜色。不幸的是，不可能精确地做到这一点。我的意思是你可以从灰度图像中恢复颜色，但这种颜色并不完全是转换为灰色之前的颜色。从颜色到灰度的标准转换假设图像的每个像素都由公式转换：

```
G(R,G,B) = 0.299*R + 0.587*G + 0.114*B 
```

其中`R`,`G`和`B`是`RGB`像素值

正如您所理解的那样，转换可能会产生许多不同的结果。查看[http://en.wikipedia.org/wiki/Grayscale](http://en.wikipedia.org/wiki/Grayscale)了解更多信息。

你也可以看看[这个](http://www.codeproject.com/Articles/31120/Image-Transformation-Grayscale-to-Color)项目。它实现了尝试从灰度图像中恢复颜色的解决方案。但同样，请记住，这种颜色不会是原始颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:07:05.137

Anton 有一个优点，即生成的彩色图像不会具有原始图像中的颜色。这就是我相信为灰度图像着色被称为伪着色的原因。对于带有调色板的图像，您只需替换调色板即可。对于没有调色板的图像，您必须定义一个要使用的公式。在我们的应用程序中，我们使用了名为leadtools 的sdk，它具有为灰色图像着色的功能，我们发现它非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T06:45:25.680

使用 Aforge 执行此操作：

```
var filter = new GrayscaleToRGB();
var RGBBitmap = filter.Apply(AForge.Imaging.Image.Convert16bppTo8bpp(bitmap)); 
```

（如果您已经有 8bpp 位图，则可以省略转换）

GrayscaleToRGB 在 AForge.Imaging.Filters

# javascript - 如何仅使用一些地理编码信息

> ID：13901500
> 
> 赞同：-3
> 
> 时间：2012-12-16T12:59:08.983
> 
> 标签：javascript, google-maps-api-3, google-geocoder

我试图将地理编码信息从 Schwartmecke 49, 57399 Kirchhundem, Germany 更改为 Schwartmecke 49, Germany ，但不知道如何。任何人都可以帮助我吗？谢谢

```
<script type="text/javascript">
  var map;
  var geocoder;
  var centerChangedLast;
  var reverseGeocodedLast;
  var currentReverseGeocodeResponse;

  function initialize() {
    var latlng = new google.maps.LatLng(49.624935522974546, 15.46877500000007);
    var myOptions = {
      zoom: 7,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    geocoder = new google.maps.Geocoder();

    setupEvents();
    centerChanged();
  }

  function setupEvents() {
    reverseGeocodedLast = new Date();
    centerChangedLast = new Date();

    setInterval(function() {
      if((new Date()).getSeconds() - centerChangedLast.getSeconds() > 1) {
        if(reverseGeocodedLast.getTime() < centerChangedLast.getTime())
          reverseGeocode();
      }
    }, 1000);

    google.maps.event.addListener(map, 'zoom_changed', function() {
      document.getElementById("zoom_level").innerHTML = map.getZoom();
    });

    google.maps.event.addListener(map, 'center_changed', centerChanged);

    google.maps.event.addDomListener(document.getElementById('crosshair'),'dblclick', function() {
       map.setZoom(map.getZoom() + 1);
    });

  }

  function getCenterLatText() {
    return '(' + map.getCenter().lat() +')';
  }   
    function getCenterLngText() {
    return '(' + map.getCenter().lng() +')';
  }   

  function centerChanged() {
    centerChangedLast = new Date();
    var lat = getCenterLatText(); 
    var lng = getCenterLngText();  
    document.getElementById('lat').innerHTML = lat;  
    document.getElementById('lng').innerHTML = lng; 
    document.getElementById('formatedAddress').value = '';
    currentReverseGeocodeResponse = null;
  }

  function reverseGeocode() {
    reverseGeocodedLast = new Date();
    geocoder.geocode({latLng:map.getCenter()},reverseGeocodeResult);
  }

  function reverseGeocodeResult(results, status) {
    currentReverseGeocodeResponse = results;
    if(status == 'OK') {
      if(results.length == 0) {
        document.getElementById('formatedAddress').value = 'None';
      } else {
        document.getElementById('formatedAddress').value = results[0].formatted_address;
      }
    } else {
      document.getElementById('formatedAddress').value = 'Error';
    }
  }

  function geocode() {
    var address = document.getElementById("address").value;
    geocoder.geocode({
      'address': address,
      'partialmatch': true}, geocodeResult);
  }

  function geocodeResult(results, status) {
    if (status == 'OK' && results.length > 0) {
      map.fitBounds(results[0].geometry.viewport);
    } else {
      alert("Geocode was not successful for the following reason: " + status);
    }
  }

  function addMarkerAtCenter() {
    var marker = new google.maps.Marker({
        position: map.getCenter(),
        map: map
    });

    if(currentReverseGeocodeResponse) {
      var addr = '';
      if(currentReverseGeocodeResponse.size == 0) {
        addr = 'None';
      } else {
        addr = currentReverseGeocodeResponse[0].formatted_address;
      }
      text = '<br>' + 'address: <br>' + addr;
    }

    var infowindow = new google.maps.InfoWindow({ content: text });

  }

</script> 
```

希望我足够解释我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:44:32.227

在您的 reverseGeocodeResult() 函数中，您获取第一个结果并返回其“格式化地址”属性。不要返回这个，而是尝试浏览它的“address_components”属性。

[在https://developers.google.com/maps/documentation/geocoding/#JSON](https://developers.google.com/maps/documentation/geocoding/#JSON)查看更多信息

# jquery - 找到流氓代码（任何标签之外的文本）并在它们出现时包装它们

> ID：13901506
> 
> 赞同：0
> 
> 时间：2012-12-16T12:59:50.170
> 
> 标签：jquery, text, jquery-selectors

我正在创建一个脚本来过滤一些论坛输出，其中涉及选择相邻之间的所有内容`<p>`，“p”的数量每次都会改变。p 个标签对之间的内容可能与任何事物无关。像这样的一些事情：

```
 <p><a href="x">...ABC...</a></p>

    <<<<<<<< Beginning of what I want >>>>>>>>

    <fieldset>...</fieldset>
    <font title="...">...</font>
    sometext without any tag<br>  <-----This cannot be selected by jQuery, help needed here
    <a href="...">...</a>
    //[0..N] more tags

    <<<<<<<< End of what I want >>>>>>>>

    <p><a href="x+1">...ABC...</a></p>
    [0..N] more "p"'s with similar pattern ("p" with random url in "a") 
```

然后我想将这些流氓代码（未标记的文本）与其邻居一起包装到某个 div 中，以便我以后可以处理它们。像这样：

```
<div id="outer">
    <div id="1">
        <p><a href="x">...ABC...</a></p>

    <! Beginning of what I want >

        <fieldset>...</fieldset>
        <font title="...">...</font>
        sometext without any tag<br>
        <a href="...">...</a>
        //[0..N] more tags

    <! End of what I want >
    </div>
    <div id="2">
        <p><a href="x+1">...ABC...</a></p>
    </div>
    <div id="3">
        //something or nothing
    </div>
    //something or nothing
</div> 
```

棘手的部分是找出它们属于哪个部分并将它们移动到那个部分。因为它们不在任何 div 甚至任何标签中。我尝试了这种方法：

```
 var ps = $("p:contains('ABC')");
    ps.each(function(){
        if(!($(this).next()[0])){
            return true;
        }
        var me = $(this);
        var pa = me.parent().contents();
        var nx = me.nextAll("p:contains('ABC')").first()
        var i0 = pa.index(me);
        var i1 = pa.index(nx);
        if (i1 > i0) {
            var elements = pa.slice(i0, i1);
            elements.each(function(){
                //Do something
            });
        }
    }); 
```

但文本总是被遗漏。我认为它的 jquery 不能选择没有标签的任何东西？我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:51:08.520

[http://jsfiddle.net/kTVQY/1/](http://jsfiddle.net/kTVQY/1/)

我不认为你会介意它在 div 中！

```
jQuery('div.find').each(function(){
    $("*").each( function() {
        $(this).remove();
    });
    plugin(this);
});

function plugin(node) {
    var next;

    if (node.nodeType === 1) {

        if (node = node.firstChild) {
            do {
                next = node.nextSibling;
                plugin(node);
            } while(node = next);
        }

    } else if (node.nodeType === 3) {
            alert(node.data);
    }

} 
```

# macos - 如何找出 NSScrollView 当前是否正在滚动

> ID：13901508
> 
> 赞同：7
> 
> 时间：2012-12-16T13:00:00.067
> 
> 标签：macos, cocoa, nsscrollview

如何确定我的 NSScrollView 当前是否正在滚动？在 iOS 上，我可以使用委托，但尽管谷歌搜索了很多，但我找不到在 Mac 上执行此操作的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-16T16:02:31.787

您可以收到通知 NSViewBoundsDidChangeNotification 如下所示

```
NSView *contentView = [scrollview contentView];

[contentView setPostsBoundsChangedNotifications:YES];

// a register for those notifications on the content view.
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(boundDidChange:)
                                             name:NSViewBoundsDidChangeNotification
                                           object:contentView]; 
```

通知方式

```
- (void)boundDidChange:(NSNotification *)notification {
    // get the changed content view from the notification
    NSClipView *changedContentView=[notification object];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-19T17:22:57.467

从 OS X 10.9 开始，还有[`NSScrollView.willStartLiveScrollNotification`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScrollView_Class/#//apple_ref/c/data/NSScrollViewWillStartLiveScrollNotification). 它在用户滚动事件开始时发布在主线程上。

例如

```
NotificationCenter.default.addObserver(self, selector: #selector(scrollViewDidScroll), name: NSScrollView.willStartLiveScrollNotification, object: nil) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-10T07:20:51.233

我的 OSX mojave / swift 5 两分钱

```
 let nc =  NotificationCenter.default

    nc.addObserver(
        self,
        selector: #selector(scrollViewWillStartLiveScroll(notification:)),
        name: NSScrollView.willStartLiveScrollNotification,
        object: scrollView
    )

    nc.addObserver(
        self,
        selector: #selector(scrollViewDidEndLiveScroll(notification:)),
        name: NSScrollView.didEndLiveScrollNotification,
        object: scrollView
    ) 
```

……

```
 @objc func scrollViewWillStartLiveScroll(notification: Notification){
        #if DEBUG
        print("\(#function) ")
        #endif
    }

    @objc func scrollViewDidEndLiveScroll(notification: Notification){
        #if DEBUG
        print("\(#function) ")
        #endif
    } 
```

# php - 使用单击按钮继续的简单重定向页面

> ID：13901513
> 
> 赞同：-1
> 
> 时间：2012-12-16T13:00:54.957
> 
> 标签：php, javascript

我需要创建一个动态重定向页面，可以放置广告横幅和 5 秒后出现的呼叫按钮。当我单击按钮时，它将重定向到任何 URL 之后？

例如 ：

1 - 用户点击网站中的链接： - [http://www.mydomain.com/go.php?http://www.google.com](http://www.mydomain.com/go.php?http://www.google.com)

2 - go.php 加载一个带有 5 秒倒数计时器的登录页面

3 - 5 秒后，出现一个按钮...用户可以点击该按钮转到实际链接

我设法得到了简单的代码..但我不希望它自动重定向......

```
<?php
$redirect = $_SERVER['QUERY_STRING'].'';
?>
<html>
<head>
    <meta name="robots" content="noindex" />
    <meta http-equiv="content-type" 
          content="text/html; charset=ISO-8859-1">  
    <title>Your Page title</title>
</head>
<body>
</body>
<SCRIPT LANGUAGE="JavaScript">
    setTimeout("location.href ='<?php echo $redirect ?>'",500);
</script>
</html> 
```

您可以参考 oneclickmoviez.com 并尝试单击我的示例的任何下载链接.. 试试这个： http: [//oneclickmoviez.com/dws/TURBOBIT/51776/7](http://oneclickmoviez.com/dws/TURBOBIT/51776/7)

我不是 php 编码方面的专家，所以我希望你能向我展示 100% 的工作代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:28:20.907

我会建议你多学习一点关于 javascript 的知识。我制作了一个可能满足您要求的示例，但您仍然需要知道它是如何工作以适应您的项目的。

我建议您学习以下内容以了解我的所作所为-

1.  Javascript setTimeout() - [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)
2.  Javascript getElementById() - [http://www.tizag.com/javascriptT/javascript-getelementbyid.php](http://www.tizag.com/javascriptT/javascript-getelementbyid.php)
3.  Javascript innerHTML - [http://www.tizag.com/javascriptT/javascript-innerHTML.php](http://www.tizag.com/javascriptT/javascript-innerHTML.php)

.

```
<?php
$redirect = $_SERVER['QUERY_STRING'].'';
?>
<html><head>
<meta name="robots" content="noindex" />
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">  
<title>Your Page title</title>
</head>

<body>
<div id="buttonArea">
</div>
</body>

<script type="text/javascript">

    function loadButton()
    {
      button = document.getElementById('buttonArea');
      button.innerHTML ='<button onclick="document.location=\'<?php echo $redirect ?>\'">Continue</button>';
    }

setTimeout(loadButton(),5000);
</script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:28:43.583

对于 JavaScript 超时 ins setTimeout 以毫秒为单位，所以它应该是 5000 5 秒：

```
setTimeout ( expression, 5000 ); 
```

我建议使用函数表达式，如下所示：

```
setTimeout ( function() {
    /* code in here */
}, 5000 ); 
```

至少，`window.location`像这样使用

```
setTimeout ( function() {
    window.location = '<?php echo $redirect ?>';
}, 5000 ); 
```

# ruby-on-rails - Rails 远程真实表单的控制器不使用 json 响应

> ID：13901517
> 
> 赞同：2
> 
> 时间：2012-12-16T13:01:20.063
> 
> 标签：ruby-on-rails, ajax, json, forms, model-view-controller

在rails中，我有一个带有remote true的表单，如下所示：

```
<%= form_for(@thing, :html => { :'data-type' => 'json' },  :remote => true ) do |f| %> 
```

我正在使用 javascript 中的 ajax 事件：

```
$('#new_thing').bind('ajax:complete', function(json, status, xhr){
        console.log("complete!");
        console.log(json);
        console.log(xhr);
        console.log(status);
}); 
```

在控制器中，我有一行代码可以像这样响应它：

```
respond_to do |format|
  format.json { render :json => @thing }
end 
```

问题是控制台记录的来自服务器的返回响应不是 json 对象，它是状态对象，而 json 响应是属性“responseText”下的文本字符串，已被转义。

如何让服务器仅使用@thing 的 json 对象进行响应？

这其中的任何阶段有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:30:09.530

尝试`parseJSON(json['responseText'])`获取服务器响应的 JSON 对象。我认为您应该在表单提交事件上手动绑定 Ajax 调用，以获取 JSON 对象而无需在函数`success`处理程序中进行转换`$.ajax()`

# jquery - 谷歌地图的灰色地带

> ID：13901520
> 
> 赞同：8
> 
> 时间：2012-12-16T13:02:01.637
> 
> 标签：jquery, google-maps, google-maps-markers, center

我已经在我的应用程序中实现了谷歌地图（在模式中），但是正如你在下面的图片中看到的那样，我当然想摆脱一个灰色区域。可以移动地图以使灰色区域消失，但这不是必需的。

问题是地图显示在模态框内，其中包含许多内容，这些内容是在单击用于显示模态的按钮时动态创建的。似乎问题可能是在加载模式之前地图内容没有完全加载，但我不确定......

**html:**

```
 ...
  <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">Test</h3>
    </div>
    <div id="modal-left" class="modal-body left"></div>
    <div class="modal-body right">
      <div id="map"></div>
    </div>
  </div>
    ... 
```

**js：**

```
 function initializeMap(latitude, longitude) {
        var place = new google.maps.LatLng (latitude, longitude);

        var myOptions = {
            zoom: 10,
            center: place,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        var map = new google.maps.Map(document.getElementById("map"), myOptions);

        var marker = new google.maps.Marker({
            position: place,
            map: map,
            title: ""
        });
    };

    $('.modal-btn').click(function(){
        var producerId = $(this).attr('id');

        GetProducer(producerId, function(data) {  // <--- data retrieved through ajax
            initializeMap(data.latitude, data.longitude);

            var titel = data.name;

            var content = "<p><img class='modal-img' src='" + data.imgurl + "' /></p>" +
                        "<p>" + data.name + ", " + data.address + "<br/>" +
                        data.zipcode + " " + data.town + "</p>" +
                        "<p><a href='" + data.url + "' >" + data.url + "</a></p>";

            $('#myModalLabel').html(titel);
            $('#modal-left').html(content);
        });
    }); 
```

*图 1：*

![](../Images/1a89beb12d718290ddbaaf4f6f3c6b42.png)

*图 2：*

![](../Images/64b7f0a9a8a17b89eb907d3ed8fbe64f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T17:47:49.303

发生这种情况的通常原因是地图的大小在地图初始化后发生了变化。如果您出于某种原因使用 id="map" 更改 div 的大小，则需要触发“resize”事件

```
google.maps.event.trigger(map, 'resize'); 
```

您可以尝试在您的 javascript 控制台中触发该事件，看看它是否有帮助。

请注意，这个答案是一个猜测，因为问题中没有任何东西可以使用，所以如果它没有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-12T18:21:33.113

把 google.maps.event.trigger(map, "resize"); 在 setTimeout 函数中，以便在事件触发后触发。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T23:57:23.510

我一直在寻找解决方案。我遇到了完全相同的问题，而且我不是唯一一个。上面的代码行还不够，但我注意到手动调整浏览器的大小可以解决问题。如果它也解决了你的问题，那么这就是我的解决方法：

1）在初始化地图的函数末尾添加它。它将为其添加一个侦听器并在加载地图时调用该函数。它基本上会模拟调整大小。

```
google.maps.event.addListenerOnce(map, 'idle', function(){
    $(window).resize();
    map.setCenter(yourCoordinates);
}); 
```

调整大小后我不得不重新定位地图

2）创建一个调整大小的监听器，像这样调用谷歌地图调整大小事件：

```
$(window).resize(function() {
    if ($("#map_canvas").children().length > 0){    
        if (map)
        google.maps.event.trigger(map, 'resize');
    }}); 
```

我还必须将 map 放在我的初始化函数之外......我知道这不是最好的解决方案，但它现在可以工作。不要担心 resize() 调用。

似乎它与包含谷歌地图的隐藏 div 有关。我还在[这个网站](http://blog.codebusters.pl/en/entry/google-maps-in-hidden-div)jfyi 上找到了类似的解决方案。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T14:56:35.520

这对我有用：

```
 var center = map.getCenter();
 // . . . your code for changing the size of the map
 google.maps.event.trigger(map, "resize");
 map.setCenter(center); 
```

取自链接，@Bruno 提到

# eclipse - Eclipse RCP 窗口工具栏菜单中的工具提示

> ID：13901524
> 
> 赞同：2
> 
> 时间：2012-12-16T13:02:27.060
> 
> 标签：eclipse, menu, toolbar, rcp, tooltip

我创建了一个带有带有菜单的工具栏的窗口。现在我希望菜单项有工具提示，但我没有成功。

我在 Ubuntu 12.04 上。

我已经尝试过的：

1.  在 plugin.xml 中设置菜单贡献的“工具提示”

2.  设置命令的“描述”

3.  在我使用 ManuManager 和 Action 以编程方式创建的子菜单中的操作中设置工具提示文本。

问候， 弗拉基米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T17:14:09.227

根据[popupMenus](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_popupMenus.html)扩展点的描述，工具提示仅在操作是工具栏的一部分时显示。考虑到这个问题，存在一个[Eclipse Bug 。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=62575)

# php - 将数组元素从 US 格式更改为 UK

> ID：13901527
> 
> 赞同：0
> 
> 时间：2012-12-16T13:02:51.280
> 
> 标签：php, arrays

我正在从外部 API 中提取电影数据，为我的最后一年大学项目创建一个类似于 IMDb 的数据库，并且发布日期信息的格式为**YYYY-MM-DD**（即 2012 年 12 月 16 日显示为 2012-12-16 ，而不是 2012 年 16 月 12 日）。有没有办法对数组的各个部分重新排序，以便为英国英语观众重新洗牌？

发布日期的原始结果如下，从 TMDb API 中的 getMovieReleases 函数收集（注意，为了节省帖子大小，我只复制了 getMovieReleases 函数的前 10 个结果）：

```
[id] => 17578
    [countries] => Array
        (
            [0] => Array
                (
                    [iso_3166_1] => US
                    [certification] => PG
                    [release_date] => 2011-12-21
                )

            [1] => Array
                (
                    [iso_3166_1] => DE
                    [certification] => 6
                    [release_date] => 2011-10-27
                )

            [2] => Array
                (
                    [iso_3166_1] => FR
                    [certification] => 
                    [release_date] => 2011-10-26
                )

            [3] => Array
                (
                    [iso_3166_1] => TR
                    [certification] => 
                    [release_date] => 2011-11-04
                )

            [4] => Array
                (
                    [iso_3166_1] => DK
                    [certification] => 7
                    [release_date] => 2011-10-27
                )

            [5] => Array
                (
                    [iso_3166_1] => GB
                    [certification] => PG
                    [release_date] => 2011-10-26
                )

            [6] => Array
                (
                    [iso_3166_1] => FI
                    [certification] => 12
                    [release_date] => 2011-11-04
                )

            [7] => Array
                (
                    [iso_3166_1] => IT
                    [certification] => T
                    [release_date] => 2011-10-28
                )

            [8] => Array
                (
                    [iso_3166_1] => SE
                    [certification] => 
                    [release_date] => 2011-10-28
                )

            [9] => Array
                (
                    [iso_3166_1] => NL
                    [certification] => 6
                    [release_date] => 2011-10-26
                )

            [10] => Array
                (
                    [iso_3166_1] => BE
                    [certification] => 
                    [release_date] => 2011-10-26
                )
        )

) 
```

我在我的 PHP 和 HTML 中调用数据如下，只选择美国和英国的发布日期：

```
$releases = $tmdb->getMovieReleases($tmdb_id);

$uk = $releases['countries']['14']['release_date'];
$us = $releases['countries']['0']['release_date'];

<section>
    <p class="title">RELEASE DATE</p>
    <p class="section_body">
        <?php echo $uk; ?> (UK)<br>
        <?php echo $us; ?> (US)
    </p>
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:08:09.990

你想这样格式化日期吗？

```
<?php
        $source = '2011-11-04';
    $date = new DateTime($source);
    echo $date->format('d.m.Y')."<br/>"; // 04.11.2012
    echo $date->format('d-m-Y')."<br/>"; // 04-11-2011
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:09:10.723

```
$uk = date('d/m/Y', strtotime($releases['countries']['14']['release_date'])); 
```

那应该为您指明正确的方向..

见[`date()`](http://php.net/date)和[`strtotime()`](http://php.net/strtotime)

# c# - 对称加密 (AES)：将 IV 和 Salt 与加密数据一起保存是否安全且正确？

> ID：13901529
> 
> 赞同：23
> 
> 时间：2012-12-16T13:03:01.447
> 
> 标签：c#, encryption, cryptography, encryption-symmetric

我试图了解在使用对称加密算法（在本例中为 AES）加密和解密数据时如何处理和管理初始化向量和盐（如果适用）。

我从不同的 SO 线程和各种其他网站推断出，IV 或 salt 都不需要保密，只是为了防御诸如暴力攻击之类的密码分析攻击是唯一的。考虑到这一点，我认为将我的伪随机 IV 与加密数据一起存储是可行的。我在问我使用的方法是否正确，此外，我是否应该以同样的方式处理我目前的硬编码盐？将其写入 IV 旁边的内存流

我的代码：

```
private const ushort ITERATIONS = 300;
private static readonly byte[] SALT = new byte[] { 0x26, 0xdc, 0xff, 0x00, 0xad, 0xed, 0x7a, 0xee, 0xc5, 0xfe, 0x07, 0xaf, 0x4d, 0x08, 0x22,  0x3c };

private static byte[] CreateKey(string password, int keySize)
{
    DeriveBytes derivedKey = new Rfc2898DeriveBytes(password, SALT, ITERATIONS);
    return derivedKey.GetBytes(keySize >> 3);
}

public static byte[] Encrypt(byte[] data, string password)
{
    byte[] encryptedData = null;
    using (AesCryptoServiceProvider provider = new AesCryptoServiceProvider())
    {
        provider.GenerateIV();
        provider.Key = CreateKey(password, provider.KeySize);
        provider.Mode = CipherMode.CBC;
        provider.Padding = PaddingMode.PKCS7;

        using (MemoryStream memStream = new MemoryStream(data.Length))
        {
            memStream.Write(provider.IV, 0, 16);
            using (ICryptoTransform encryptor = provider.CreateEncryptor(provider.Key, provider.IV))
            {
                using (CryptoStream cryptoStream = new CryptoStream(memStream, encryptor, CryptoStreamMode.Write))
                {
                    cryptoStream.Write(data, 0, data.Length);
                    cryptoStream.FlushFinalBlock();
                }
            }
            encryptedData = memStream.ToArray();
        }
    }
    return encryptedData;
}

public static byte[] Decrypt(byte[] data, string password)
{
    byte[] decryptedData = new byte[data.Length];
    using (AesCryptoServiceProvider provider = new AesCryptoServiceProvider())
    {
        provider.Key = CreateKey(password, provider.KeySize);
        provider.Mode = CipherMode.CBC;
        provider.Padding = PaddingMode.PKCS7;
        using (MemoryStream memStream = new MemoryStream(data))
        {
            byte[] iv = new byte[16];
            memStream.Read(iv, 0, 16);
            using (ICryptoTransform decryptor = provider.CreateDecryptor(provider.Key, iv))
            {
                using (CryptoStream cryptoStream = new CryptoStream(memStream, decryptor, CryptoStreamMode.Read))
                {
                    cryptoStream.Read(decryptedData, 0, decryptedData.Length);
                }
            }
        }
    }
    return decryptedData;
} 
```

关于正确实践，我也愿意接受有关对称加密的任何其他信息。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-17T14:01:32.770

将 IV 和 Salt 与密文一起存储是正确的，也是最佳实践。对盐进行硬编码是没有用的，随机很重要，对迭代进行硬编码是完全可以的，但通常远高于 300（实际上至少 1000，如果你的机器/使用可以在 10 秒内处理它，你通常会更高数千）。

Because I've seen so many bad (or old) examples of c# encryption from stack overflow cut and paste into open source code, I wrote a short bit of cut and paste encryption code [Modern Examples of Symmetric Authenticated Encryption of a string.](https://stackoverflow.com/a/10366194/637783) that i try to keep up to date and reviewed. It stores the iv and salt with the ciphertext it also authenticates the ciphertext and values included with the cipher text.

Ideally though a better practice would be to use a high level encryption library that would handle best practices like the iv for you, however those typically haven't existed for csharp. I've been working on a native [csharp version](http://jbtule.github.com/keyczar-dotnet/) of google's [keyczar](http://www.keyczar.org/) library. While it's functionally ready for use, I've been wanting to get more eyes on the code before the first official stable release.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-16T13:36:36.550

是的，IV 和 salt 都是公共值。更重要的是确保这些是每个加密操作的随机值。

举个例子，看看[rncryptor 数据格式](https://github.com/rnapier/RNCryptor/wiki/Data-Format)。在这里，盐和 IV 与密文和 MAC 值一起打包成数据格式。（注意：这是一个objective-c 示例）。

# ruby-on-rails - 设计重置密码问题

> ID：13901534
> 
> 赞同：0
> 
> 时间：2012-12-16T13:03:26.703
> 
> 标签：ruby-on-rails, ruby, devise

当我单击 Devise 的“向我发送重置密码说明”链接时，我得到了；

```
ArgumentError in Devise/passwords#create

Extracted source (around line #5):

2:   
3: Someone has requested a link to change your password, and you can do this through the link below.
4:  
5: <%= link_to 'Change my password', edit_password_url(@resource, :reset_password_token => @resource.reset_password_token) %>  
6:  
7: If you didn't request this, please ignore this email.
8: Your password won't change until you access the link above and create a new one. 
```

有人知道我为什么会收到这个错误吗？我没有更改此文件中的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:26:54.727

尝试添加

```
resources :passwords 
```

在你的 routes.rb

您还需要设置一个邮件程序

```
# Setup for production - deliveries, no errors raised
config.action_mailer.delivery_method = :smtp
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true
config.action_mailer.default :charset => "utf-8"

ActionMailer::Base.smtp_settings = {
  :address => "smtp.yourmail.com",
  :port => 587,
  :authentication => :plain,
  :domain => ENV['SMTP_USER'],
  :user_name => ENV['SMTP_USER'],
  :password => ENV['SMTP_PASSWORD'],
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:17:10.377

实际上，该文件是发送给用户的电子邮件模板。你应该检查邮件设置...

# c++ - 通过指针在子函数中修改函数局部变量的内容

> ID：13901535
> 
> 赞同：1
> 
> 时间：2012-12-16T13:03:29.013
> 
> 标签：c++

我有以下示例代码。只是想知道在全局指针中获取局部变量的地址然后在子函数中修改它的内容是否有效。以下程序正确修改变量**a 的**值。这种做法会引起任何问题吗？

```
#include <iostream>
#include <vector>

using namespace std;

vector<int*> va;

void func()
{
   int b ;
   b = 10;
   int * c = va[0];
   cout << "VALUE OF C=" << *c << endl;
   *c = 20;
   cout << "VALUE OF C=" << *c << endl;

}
int main()
{
     int a; 
     a = 1;
     va.push_back(&a);

     func();

     cout << "VALUE IS= " << a << endl;

     return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:05:11.217

这没关系，只要您在超出范围`va[0]`后不尝试取消引用。`a`你没有，所以从技术上讲，这段代码很好。

也就是说，整个方法可能不是一个好主意，因为它使代码很难维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:36:01.770

只要您`func()`在范围内调用，您的代码就完全有效`a`。*但是，*这不被认为是一种好的做法。考虑

```
struct HugeStruct {
  int a;
};

std::vector<HugeStruct*> va;

void print_va()
{
  for (size_t i = 0; i < va.size(); i++)
    std::cout<<va[i].a<<' ';
  std::cout<<std:endl;
}

int main()
{
  for (int i = 0; i < 4; i++) {
    HugeStruct hs = {i};
    va.push_back(&hs);
  }

  print_va(); // oups ...
} 
```

上面的代码有两个问题。

1.  除非绝对必要，否则不要使用全局变量。全局变量违反封装，可能导致变量名重叠。在大多数情况下，在需要时将它们传递给函数要容易得多。
2.  这段代码中的指针向量看起来很糟糕。正如你所看到的，我忘记了当我离开 for 循环时指针变得无效，并且`print_va`只是打印出垃圾。简单的解决方案可能是将对象存储在向量而不是指针中。但是，如果我不想`HugeStruct`一次又一次地复制对象怎么办？这可能需要相当长的时间。（假设`int`我们有一个百万整数的向量而不是一个。）解决方案之一是动态分配`HugeStruct`s 并使用智能指针向量：`std::vector<std::shared_ptr<HugeStruct>>`。这样您就不必担心内存管理和范围。一旦没有人提及对象，对象就会被销毁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:07:06.550

我想说的是，如果您的程序增长，您可能会忘记您在某些功能中所做的更改并得到一些您没有预料到的奇怪错误。

# symfony - 如何正确覆盖默认路由器？

> ID：13901536
> 
> 赞同：1
> 
> 时间：2012-12-16T13:03:38.953
> 
> 标签：symfony

因此，我创建了一个类，该类扩展`Symfony\Bundle\FrameworkBundle\Routing\Router` 并定义为我在配置中使用的默认值`router.class: My\Bundle\Router\Class`，但是现在每次我更改诸如路由模式或名称之类的简单内容时，我都会得到...

> 致命错误：在第 312 行的 /.../app/cache/dev/classes.php 中的非对象上调用成员函数 get()

在那一行中有：

```
$this->collection = $this->container->get('routing.loader')->load($this->resource, $this->options['resource_type']); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:33:49.913

`$this->container`在课堂上是私有的`Router`。你不能直接访问它。

您需要明确地使其可访问：

```
/**
 * Router 
 */
class Router extends BaseRouter
{
    protected $container;

    /**
     * Constructor.
     *
     * @param ContainerInterface $container A ContainerInterface instance
     * @param mixed              $resource  The main resource to load
     * @param array              $options   An array of options
     * @param RequestContext     $context   The context
     * @param array              $defaults  The default values
     */
    public function __construct(ContainerInterface $container, $resource, array $options = array(), RequestContext $context = null, array $defaults = array())
    {
        $this->container = $container;

        parent::__construct($container, $resource, $options, $context, $defaults);
    }
} 
```

# sql-server-2008 - 使用 tcp/ip 连接到 sql server 2008 时出错

> ID：13901538
> 
> 赞同：0
> 
> 时间：2012-12-16T13:03:42.580
> 
> 标签：sql-server-2008, tcp

我已经将我的系统配置为连接到 SQL Server 2008，我在 windows server 2008 下运行，我做了以下操作：-

1.  在我的 SQL Server 上启用 TCP/IP。

2.  为 SQL Server 激活并启用 192.168.1.20。

3.  为防火墙上的 1433 帖子和 sqlserver.exe 添加两个入站规则。

但是当我尝试连接数据库时，出现以下错误：-

> 与主机 192.168.1.20、端口 1433 的 TCP/IP 连接失败。错误：“连接超时。验证连接属性，检查 SQL Server 实例是否正在主机上运行并在端口接受 TCP/IP 连接，并且没有防火墙阻止与端口的 TCP 连接。”。

当我输入以下内容时：

```
telnet 192.168.1.20 
```

它给了我

```
Connecting To 192.168.1.20...Could not open connection to the host, on port 23:
Connect failed 
```

那么可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:28:12.460

telnet命令错误，试试

```
telnet 192.168.1.20 1433 
```

你没有提到出站规则。您需要在您的机器（在防火墙中）和 SqlServer 机器上添加入站 + 出站规则。

# java - 从 GNOME 运行时如何获取可运行 .jar 文件的位置

> ID：13901540
> 
> 赞同：0
> 
> 时间：2012-12-16T13:04:00.437
> 
> 标签：java, jar, path, gnome

我正在使用 Swing 开发一个小型 Java 应用程序，它应该在 Windows/Linux 和 MacOS 上运行。

最终它将作为一个可运行的 jar 发布，其中一些配置文件位于同一文件夹中。要加载它们，我需要 jar 存储在程序中的文件夹的路径。
已经有几个类似[这个](https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file)或[这个的线程。](https://stackoverflow.com/questions/8187372/how-to-load-a-text-file-from-a-runnable-jar)

我的问题是，当我从 eclipse 中运行程序或从终端调用可运行 jar 时，那里讨论的所有解决方案都可以正常工作，如下所示：

```
java -jar /path/to/jar/jarfile.jar 
```

但是，当我单击 Cinnamon 或 Gnome 中的 jar 文件时（大多数用户都知道这样做），我没有得到正确的路径。（MacOS 用户报告同样的问题）

这是我到目前为止尝试过的以及通过双击运行时的输出（所有这些在从 Eclipse 或终端运行时都显示所需的路径）：

```
ClassLoader.getSystemClassLoader().getResource(".").getPath()
Output: file:/usr/lib/jvm/java-6-openjdk-common/jre/lib/ext/pulse-java.jar!/

SomeClass.class.getProtectionDomain().getCodeSource().getLocation().getPath();
Output: ./

System.getProperty("user.dir");
Output: /home/myusername 
```

有没有其他方法可以做到这一点，或者我在导出 jar 时做错了什么？任何帮助，将不胜感激！

干杯尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:19:57.317

让它变得简单，并使用启动脚本（.bat/.sh 文件）来运行您的应用程序。该启动脚本将获取它自己在文件系统中的位置的路径，并将其作为参数或系统属性传递给 Java 应用程序。这具有能够传递其他参数的额外优势，例如堆的大小等。

在 Windows 上，`%~dp0`是包含已执行 bat 文件的目录的路径。在 Unix 上，您可以使用`$(dirname $0)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:37:33.430

您可以将所有配置文件作为资源存储在 jar 中，然后将它们复制到**home.dir** + ".AppName/" 中的文件中。

虽然很痛苦，但**Preferences API** [Preferences.systemNodeForPackage](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html#systemNodeForPackage%28java.lang.Class%29)似乎是最明智的选择，如果结构化配置数据很少的话。有一种`inputStream`导入方法；您的初始配置模板可能是 jar 中的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:50:07.450

只需使用 System.getProperty("java.class.path") 获取类路径并扫描它以查找您的“.jar”名称。请注意，路径分隔符取决于操作系统（File.pathSeparator）

# database - Oracle Apex - 创建自己的登录页面

> ID：13901541
> 
> 赞同：2
> 
> 时间：2012-12-16T13:04:17.207
> 
> 标签：database, oracle11g, oracle-apex

我创建了一个新的登录页面，其中只有那些可以在数据库中找到的帐户才能登录到我们的主页......我的计划是当我点击登录按钮时，用户将被重定向到主页......我做这通过创建一个新分支，然后在条件选项卡中，我放置了用于检查已在文本字段中输入的帐户是否存在的代码。但发生的事情是它总是显示错误消息“无效的登录凭据” ...

我确定我们放置的条件中的代码是正确的，，，它可以检测到用户名和密码错误，因为它显示了我创建的错误消息，该消息在发生这种情况时返回......

这是我的条件中的代码.. check_login 是一个过程，如果在数据库中找到该帐户，则返回 true ...

```
if CHECK_LOGIN(:P111_USERNAME, :P111_PASSWORD) then return true;
else
return false;
end if; 
```

有人可以帮我们解决这个问题吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T08:46:00.980

您需要自定义身份验证方案来解决此问题，而不是条件分支等。您也不需要构建新的登录页面。标准登录页面将包含您需要的所有内容，并且只需使用当前的活动身份验证方案。身份验证方案可以在共享组件下找到。

您可以在此处找到一些[Oracle 文档](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21674/sec_authentication.htm)。当您在 google 上搜索“oracle apex 自定义身份验证”时，还可以找到大量博客文章！

此外，在创建自定义方案时，您可以单击项目标签以获取帮助。例如，这是在身份验证函数名称帮助中：

> 指定在登录页面上输入用户名和密码后验证用户名和密码的函数的名称。如果您不输入任何内容，则您允许任何用户名/密码成功。函数本身可以在身份验证的“PL/SQL 代码”文本区域、包内或存储函数中定义。
> 
> 该函数必须向调用它的登录过程返回一个布尔值。它有 2 个输入参数“p_username”和“p_password”，可用于访问最终用户在登录页面上输入的值。
> 
> 例如，在 'PL/SQL Code' 文本区域中输入以下代码
> 
> ```
> function my_authentication (
>     p_username in varchar2,
>     p_password in varchar2 )
>     return boolean
> is
>     l_user my_users.user_name%type := upper(p_username);
>     l_pwd  my_users.password%type;
>     l_id   my_users.id%type;
> begin
>     select id  , password
>       into l_id, l_pwd
>       from my_users
>      where user_name = l_user;
> 
>     return l_pwd = rawtohex(sys.dbms_crypto.hash (
>                        sys.utl_raw.cast_to_raw(p_password||l_id||l_user),
>                        sys.dbms_crypto.hash_md5 ));
> exception
>     when NO_DATA_FOUND then return false;
> end; 
> ```
> 
> 和
> 
> ```
> my_authentication 
> ```
> 
> 作为“认证功能”。

**请注意，您的函数需要参数 p_username 和 p_password！**

您可以将其他字段留空，它们将由默认功能处理！

# powershell - PowerShell比较两个字符串的内容

> ID：13901542
> 
> 赞同：1
> 
> 时间：2012-12-16T13:04:17.923
> 
> 标签：powershell, powershell-2.0, powershell-1.0

我正在尝试比较两个变量的值，但是这两个字符串的内容顺序不同

例子：

```
$Var1 = "item1"
$Var1 += "item2"
$Var2 = "item2"
$Var2 = "item1" 
```

如何比较这两个变量以查看它们是否相等？

===== 已更新示例 ===== 示例：获取对象并对其进行排序。

```
$Computers = (Get-Content "$PWD\Computers.txt").GetEnumerator() | Sort-Object {"$_"} 
```

示例：添加结果并对其进行排序。

```
$Successful += $Computer
$Successful = $Successful.GetEnumerator() | Sort-Object {"$_"} 
```

示例脚本：使用上面的示例创建以下脚本。该示例允许我检查结果，而不是计数，而是通过内容让我获得更准确的比较。在我使用“Successful.count -eq Computers.count”之前，它不会检查计算机是否输入了两次。

```
$Computers = (Get-Content "$PWD\Computers.txt").GetEnumerator() | Sort-Object {"$_"}
$HotFixes = Get-Content "$PWD\HotFixes.csv"
CLS
While (!$Successful -OR $Successful -ne $Computers) {
    foreach  ($Computer in $Computers) {
        $MissingCount = 0
        IF (!$Successful -NotLike "*$Computer*") {
            Write-Host "$Computer`: Connecting"
            If (Test-Connection -ComputerName $Computer -Count 1 -quiet) {
                Write-Host "$Computer`: Connected"
                [string]$Comparison = get-hotfix -ComputerName $Computer | Select -expand HotFixID
                ForEach ($HotFix in $HotFixes) {
                    IF ($Comparison -NotLike "*$HotFix*") {
                        $Results += "$Computer,$HotFix"
                        $MissingCount++
                    }
                }
                Write-Host "$Computer`: $MissingCount Patches Needed"
                $Successful += $Computer
                $Successful = $Successful.GetEnumerator() | Sort-Object {"$_"}
            } ELSE {
                Write-Host "$Computer`: Unable to connect"
            }
        } ELSE {
            Write-Host "$Computer already completed"
        }
    Write-Host "$Computer`: Complete"
    Write-Host
    }

}

$Results 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:01:48.650

如果要查找内容是否相等，无论字符位置如何，都可以将字符串分解为其字符，对结果进行排序，然后使用 Compare-Object cmdlet。没有结果意味着变量相等：

```
$v1 = $Var1.GetEnumerator() | Sort-Object {"$_"}
$v2 = $Var2.GetEnumerator() | Sort-Object {"$_"}
compare $v1 $v2 
```

# android - 服务崩溃，即使在活动关闭并且警报管理器启动时使用 startForeground

> ID：13901545
> 
> 赞同：2
> 
> 时间：2012-12-16T13:04:28.377
> 
> 标签：android, service, alarmmanager

我有使用 START_STICKY onStartCommand 启动服务的 mainActivity，在该服务中我还使用 startForeground 和 alarmManager 中继器。当我通过滑动应用程序关闭主要活动时，服务仍在运行，并且来自 startForeground 的通知图标仍然存在，但是，当来自 alarmManager 的警报在服务内部触发时，服务崩溃并在 5000 毫秒内重新启动。为什么设置警报后服务会立即崩溃？

MainActivity.java：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Messenger;
import android.util.Log;
public class MainActivity extends Activity {
    Messenger mService = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        CheckIfServiceIsRunning();
    }
    private void CheckIfServiceIsRunning() {
        if (MyService.isRunning()) {
        } else {
            startService(new Intent(MainActivity.this, MyService.class));
        }
    }
    @Override
    protected void onDestroy() {
        super.onDestroy();
        //stopService(new Intent(MainActivity.this, MyService.class)); //disabled line so that killing UI-app doesn't kill service aswell
    }
} 
```

我的服务.java：

```
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Timer;
import java.util.TimerTask;
import android.annotation.SuppressLint;
import android.app.AlarmManager;
import android.app.Notification;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.os.Messenger;
import android.util.Log;
public class MyService extends Service {
    public AlarmManager alarmManager;
    public PendingIntent pendingIntent;
    private Timer timer = new Timer();
    private int counter = 0, incrementby = 1;
    private static boolean isRunning = false;
    final public static int NOTIFICATION_FOREGROUND = 34444;
    ArrayList<Messenger> mClients = new ArrayList<Messenger>();
    final Messenger mMessenger = new Messenger(new IncomingHandler());
    @Override
    public IBinder onBind(Intent intent) {
        return mMessenger.getBinder();
    }
    @SuppressLint("HandlerLeak")
    class IncomingHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
        }
    }
    @Override
    public void onCreate() {
        super.onCreate();
        Log.i("MyService", "---- Service Started. ----");
        timer.scheduleAtFixedRate(new TimerTask(){ public void run() {onTimerTick();}}, 0, 1000L);
        isRunning = true;
        StartForegroundNotification();
        alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        Intent broadcast_intent = new Intent(this, MyAlarmReceiver.class); 
        pendingIntent = PendingIntent.getBroadcast(this, 0,  broadcast_intent, 0);
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 10*1000, pendingIntent);
    }
    @SuppressWarnings("deprecation")
    public void StartForegroundNotification(){
        String title = "Service Title";
        String message = "Service Message";
        Notification notify = new Notification(R.drawable.ic_launcher, null, 0);            
        Intent notifIntent = new Intent(this, MainActivity.class);          
        PendingIntent i = PendingIntent.getActivity(this, 0, notifIntent, 0);
        notify.setLatestEventInfo(this, title, message, i);
        notify.flags |= Notification.FLAG_NO_CLEAR;
        startForeground(NOTIFICATION_FOREGROUND, notify);
    }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i("MyService", "Received start id " + startId + ": " + intent);
        return START_STICKY;
    }
    public static boolean isRunning()
    {
        return isRunning;
    }
    private void onTimerTick() {
        Log.i("TimerTick", "Timer doing work." + counter);
        try {
            counter += incrementby;
        } catch (Throwable t) {
            Log.e("TimerTick", "Timer Tick Failed.", t);            
        }
    }
    @Override
    public void onDestroy() {
        super.onDestroy();
        alarmManager.cancel(pendingIntent);
        if (timer != null) {timer.cancel();}
        stopForeground(true);
        counter=0;
        Log.i("MyService", "---- Service Stopped. ----");
        isRunning = false;
    }
} 
```

MyAlarmReceiver.java：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
public class MyAlarmReceiver extends BroadcastReceiver { 
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i("alarmer", "I got it");
    }
} 
```

在清单中我使用了：

```
<service android:name=".MyService" />
<receiver android:name=".MyAlarmReceiver" /> 
```

和 logcat （一旦达到警报时间 - 在这种情况下，在计时器计时 3 之后 - 如果应用程序关闭，它就会崩溃，但是，在它重新启动后，它不会再次崩溃，我猜是因为它是从不同的上下文启动的，而不是来自 MainActivity.this，它在 onStartCommand 中获得“null”意图）：

```
12-16 19:08:50.614: I/TimerTick(27069): Timer doing work.1
12-16 19:08:53.614: I/TimerTick(27069): Timer doing work.2
12-16 19:08:56.614: I/TimerTick(27069): Timer doing work.3
12-16 19:08:57.622: I/ActivityManager(395): Killing 27069:com.example.serviceexample/u0a10097: remove task
12-16 19:08:57.629: W/ActivityManager(395): Scheduling restart of crashed service com.example.serviceexample/.MyService in 5000ms
12-16 19:09:02.661: I/ActivityManager(395): Start proc com.example.serviceexample for service com.example.serviceexample/.MyService: pid=27100 uid=10097 gids={50097, 1028}
12-16 19:09:02.715: I/MyService(27100): ---- Service Started. ----
12-16 19:09:02.715: I/TimerTick(27100): Timer doing work.0
12-16 19:09:02.723: I/MyService(27100): Received start id 3: null 
```

# selenium - Fitnesse Slim + Selenium：多个浏览器的参数化套件层次结构？

> ID：13901546
> 
> 赞同：1
> 
> 时间：2012-12-16T13:04:31.857
> 
> 标签：selenium, browser, fitnesse, fitnesse-slim

我从 Selenium 和 FitNesse 开始。我的目标是创建一个可以在不同浏览器中轻松运行的验收测试套件。

起初，我围绕 Seleniums WebDriver 编写了一个非常简短的包装器。包装函数用于场景表、脚本表和查询表。到目前为止，一切都很好。

我的想法是创建一个名为 ParameterizedSuites 的 wiki 页面层次结构，其中包含任何可能深度的子套件和测试。现在我想创建一个名为 FirefoxSuite 的套件，它定义了一个变量 ${BROWSER} ，其值为“firefox”，并且仅包含 ParameterizedSuites。在 ParameterizedSuites.SuiteSetUp 中，将使用 ${BROWSER} 实例化 WebDriver 实例。

但我的想法行不通。看来我必须分别包含*每个*SetUp、TearDown、Suite 和 Test 页面？我的想法完全错误还是我错过了什么？

有人有类似的吗？

希望我的描述足够清楚，可以理解这个场景。

亲切的问候，安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:29:13.453

我认为你想要的是 SymbolicLinks。您可以使用符号链接将 wiki 的子树包含到 wiki 的不同位置。

有关 SymbolicLinks 的更多信息，请查看您当地的用户指南或在线副本：[http ://www.fitnesse.org/FitNesse.UserGuide.FitNesseWiki.SymbolicLinks](http://www.fitnesse.org/FitNesse.UserGuide.FitNesseWiki.SymbolicLinks)

执行此操作的常用方法是实际创建 ParameterizedSuite，然后将其符号链接到定义配置并提供专门的 SetUp 和 TearDown 页面的页面。这有点与您所描述的相反，但我认为您正在做的事情也可以工作，只要您使用 SymbolicLinks 使页面成为参数化测试的 wiki 结构的一部分。

```
FrontPage
  SuiteOne
     TestOne
  ConfigurationOne
     SetUp
     TearDown
     SuiteOneSymolicLink
  ConfigurationTwo
     SetUp
     TearDown
     SuiteOneSymolicLink 
```

在上述结构中，SuiteOne 可以通过 ConfigurationOne 或 ConfigurationTwo 中的符号链接运行。当通过每个配置层次结构中的 SuiteOneSymbolicLink 运行时，ConfigurationOne 或 ConfigurationTwo 页面中定义的变量将继承给 SuiteOne。此外，配置页面中的 SetUp 和 TearDown 也将被继承。

# asp.net - ASP.NET 下一个/上一个向导控件

> ID：13901548
> 
> 赞同：1
> 
> 时间：2012-12-16T13:04:56.747
> 
> 标签：asp.net, gallery, wizard-control

我正在尝试为我正在开发的网站展示 6 种不同的在线杂志封面，并希望使用类似于我在下面制作的向导工具。我是 ASP 的新手，所以我不确定最后一期需要做什么才能只显示上一个按钮。

start 显示 next 和 2,3,4 和 5 显示 previous 和 next，但是 6 只显示 next 并且无处可去所以卡住了

我在下面添加了我的代码，任何帮助都会很棒：

ASP 向导控件

```
 <asp:Wizard ID="Wizard1" runat="server" ActiveStepIndex="0">
        <WizardSteps>
            <asp:WizardStep runat="server" StepType="Start" title="Issue1">
            </asp:WizardStep>
            <asp:WizardStep runat="server" Title="Issue2">
            </asp:WizardStep>
            <asp:WizardStep runat="server" Title="Issue3">
            </asp:WizardStep>
            <asp:WizardStep runat="server" Title="Issue4">
            </asp:WizardStep>
            <asp:WizardStep runat="server" Title="Issue5">
            </asp:WizardStep>
            <asp:WizardStep runat="server" Title="Issue6" StepType="Start">
            </asp:WizardStep>
        </WizardSteps>
    </asp:Wizard> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:19:01.627

发生这种情况是因为您已为最后一步明确指定 StepType="Start"，从*Issue6*中删除这行代码，它将不再显示 Next 按钮。但是，当您这样做时，您会注意到最后一步将现在显示两个按钮：

1) 以前的

2) 完成

这是设计使然，因为向导控件的目的是通过将数据分成逻辑块来收集用户的数据，使数据收集更加直观，并在**最后一步**将数据提交给服务器进行处理。如果您只想显示上一个按钮在最后一步我建议使用[MultiView](http://www.tutorialspoint.com/asp.net/asp.net_multi_views.htm)控件

# process - vbscript-终止进程实例

> ID：13901549
> 
> 赞同：3
> 
> 时间：2012-12-16T13:04:57.467
> 
> 标签：process, vbscript

我正在编写一个运行外部程序的脚本，一段时间后终止它，相关代码部分如下所示：

```
Set objshell=createObject("Wscript.Shell")
objShell.run ""app.exe""
objShell.run ""app.exe""
WScript.Sleep(5000)

strWmiq = "select * from Win32_Process where name='app.exe'" 
Set objQResult = objWmi.Execquery(strWmiq)
    For Each objProcess In objQResult 
        intRet = objProcess.Terminate(1)
    Next 
```

我想做的是`app.exe`在不同的睡眠时间之后关闭每个实例，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:24:40.247

使用 WScript.Shell 的 .Exec 方法为 app.exe 的每个会话/运行/实例获取 WshScriptExec 对象，并在闲暇时终止它们（和风险）。请参阅[终止方法 (WshScriptExec)](http://technet.microsoft.com/en-us/subscriptions/yk84ffsf%28v=vs.85%29.aspx)

# c++ - 用 TBB 执行订单？

> ID：13901552
> 
> 赞同：3
> 
> 时间：2012-12-16T13:05:47.917
> 
> 标签：c++, concurrency, tbb

我想有类似的东西，[`tbb::task_group`](http://software.intel.com/sites/products/documentation/doclib/tbb_sa/help/index.htm#reference/reference.htm)但在订单执行方面有保证，例如

```
serial_task_group tasks;

tasks.run([]{std::cout << 1;});
tasks.run([]{std::cout << 2;});
tasks.run([]{std::cout << 3;});
tasks.wait();

// guaranteed output: 123 
```

关于如何使用 tbb 实现这一目标的任何建议？

目前我有一个显式线程，它只使用条件变量从队列中执行。但是，使用队列的问题是我将如何保证在 task_group 中只有一个任务处于活动状态。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T15:41:14.873

（披露：我在英特尔从事英特尔线程构建模块的工作。）

正如另一个答案中所建议的，您可以使用流程图来做这样的事情。使用流程图的示例代码如下所示：

```
#include "tbb/flow_graph.h"
#include <iostream>

using namespace tbb::flow;

int main( int argc, char *argv[] ) {
    graph g;
    continue_node< continue_msg > n1( g, []( const continue_msg & ) { std::cout << "1"; } );
    continue_node< continue_msg > n2( g, []( const continue_msg & ) { std::cout << "2"; } );
    continue_node< continue_msg > n3( g, []( const continue_msg & ) { std::cout << "3"; } );
    make_edge( n1, n2 );
    make_edge( n2, n3 );
    n1.try_put( continue_msg() );
    g.wait_for_all();
   return 0;
} 
```

# iphone - 我可以在 PLS 流的 UILabel 中显示当前正在播放的歌曲标题吗？

> ID：13901556
> 
> 赞同：4
> 
> 时间：2012-12-16T13:06:34.933
> 
> 标签：iphone, objective-c, ios, xcode, avplayer

我可以在`UILabel`from a中显示当前正在播放的歌曲标题`PLS Stream`吗？

目前这是我的代码：

.h 控制器：

```
AVPlayer *music; 
```

.m 控制器：

```
NSString *u = @"http://sc7b.apple-fm.net:8188/listen.pls";

NSURL *url = [NSURL URLWithString:u];
music = [[AVPlayer alloc] initWithURL:url];
[music play]; 
```

前面谢谢你：）

# plsql - 更新值的触发器

> ID：13901560
> 
> 赞同：1
> 
> 时间：2012-12-16T13:06:57.790
> 
> 标签：plsql, triggers

我是 PLSQL 的新手，我想创建一个触发器，在进行更新之前首先检查表中是否有记录。到目前为止我得到的代码是：

```
CREATE OR REPLACE TRIGGER table_bu
BEFORE UPDATE ON employee
FOR EACH ROW
DECLARE
    v_employee_id:=employee.employee_ID%TYPE;
BEGIN
    SELECT employee_id INTO v_employee_id FROM employee;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RAISE_APPLICATION_ERROR (-20001,'data not found');
END; 
```

如何创建一个触发器来检查表中是否存在记录，如果不存在则不允许更新。我的表结构是：

```
employee_id NUMBER
employee_name VARCHAR(20)
employee_salary NUMBER
... 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:15:05.417

你走错路了。即使在修复语法错误之后，触发器也会引发运行时“变异表”错误 - 您在之后错过了分号`raise_application_error`（它也应该采用 2 个参数，而不是一个）。正确的语法：

```
EXCEPTION
WHEN NO_DATA_FOUND THEN
    RAISE_APPLICATION_ERROR (-20001, 'data not found'); -- 1st parameter -error code 
```

**更新**

据我了解问题的更新版本，如果记录不存在，您希望显示错误。行级触发方法的问题是，如果由于`WHERE`. 最简单的方法是检查客户端受影响的行数并在那里引发错误。或者，您可以编写一个程序，`sql%rowcount`在执行所需更新后进行检查，如果为 0，则抛出异常。
如果您更喜欢硬性操作，您可以`employee.employee_ID%TYPE`在更新语句级别触发器重置变量之前创建类型为 的包变量（说将其设置为`null`)，在更新行级触发器后将此变量设置为`NEW.employee_ID`，并且在更新语句级别触发器之后，如果变量为空则引发异常。注意：这仅适用于个别更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T01:34:59.127

*“我如何创建一个触发器来检查表中是否存在记录，如果不存在则不允许更新。”*

实际上只有一种实用的方法可以做到这一点 - 使用引用约束（外键）。

# coldfusion - Coldfusion - 单项列表

> ID：13901561
> 
> 赞同：0
> 
> 时间：2012-12-16T13:06:59.707
> 
> 标签：coldfusion

没有长期使用 CF，但我遇到了（无疑是简单的）处理列表的绊脚石。

我有一个名为 user 的组件，它有一个名为 roles 的列表属性：

```
property type="List" name="roles"  default=""; 
```

（我设置了 accessors=true 所以免费获得 setter）

现在我想将角色设置为一个列表，我的理解（谷歌告诉我的）是初始化列表就像创建一个逗号分隔的字符串一样简单，例如`"USER,ADMIN,SUPER"`等。

我的问题是，我试图将其设置为单个项目列表：

```
user.setRoles("user"); 
```

我得到了错误

```
The roles argument passed to the SETROLES function is not of type List. 
```

谁能指出我做错了什么/我需要做什么才能使 CF 将单个项目字符串识别为列表？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:24:12.443

好吧，列表实际上只是带有分隔符的字符串。如果将类型更改为字符串怎么办？

# java - 支持 JUnit 测试注解的代码覆盖率工具，指定 UnitTest 覆盖的方法

> ID：13901564
> 
> 赞同：0
> 
> 时间：2012-12-16T13:07:09.530
> 
> 标签：java, junit, code-coverage, metrics

我正在寻找类似 PHPUnit 的Java的“[指定涵盖的方法”之类的东西。](http://www.phpunit.de/manual/current/en/code-coverage-analysis.html#code-coverage-analysis.specifying-covered-methods)这意味着一个代码覆盖工具，它带有我的 JUnit 测试的注释，以便我可以指定哪个方法由哪个 JUnit 测试测试。

这样做的效果将是覆盖行上的更正确的度量，因为只计算指定方法的行，而不是整个应用程序的所有执行行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:36:08.943

这种方法听起来好像会给程序员带来沉重的负担。它要么假设测试和方法之间存在 1:1 的对应关系（这违背了通常的建议来考虑测试类的行为，而不是方法），或者要求程序员通过私有方法等手动跟踪路由代码的每个入口点都会随着时间的推移进行重构和更改。

很难看出如何通过类型安全来实现这一点 - 快速自动化操作（例如方法重命名）需要手动步骤来更新测试中的注释。

如果您的要求是更准确地估计测试套件的有效性，您可能会考虑另一种方法是突变测试。这会将错误植入您的代码中，然后检查您的套件是否能够检测到它们。

有许多可用于 Java 的系统，包括

*   [http://pitest.org](http://pitest.org)
*   [http://jumble.sourceforge.net/](http://jumble.sourceforge.net/)
*   [https://github.com/david-schuler/javalanche/](https://github.com/david-schuler/javalanche/)

可以在此处获得它们的比较

[http://pitest.org/java_mutation_testing_systems/](http://pitest.org/java_mutation_testing_systems/)

# go - 寻找一种优雅的方式来解析整数

> ID：13901566
> 
> 赞同：5
> 
> 时间：2012-12-16T13:07:16.457
> 
> 标签：go

现在我正在执行以下操作以从字符串中解析整数，然后将其转换为`int`类型：

```
tmpValue, _ := strconv.ParseInt(str, 10, 64) //returns int64
finalValue = int(tmpValue) 
```

它非常冗长，而且绝对不漂亮，因为我还没有找到在`ParseInt`调用中进行转换的方法。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:51:32.980

似乎该函数[`strconv.Atoi`](http://golang.org/pkg/strconv/#Atoi)可以执行您想要的操作，除了它的工作原理与位大小无关`int`（您的代码似乎假设它是 64 位宽）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T13:42:29.530

如果您必须在程序中编写一次，那么我认为没有问题。如果您需要在几个地方，您可以编写一个简单的专业化包装器，例如：

```
func parseInt(s string) (int, error) {
        i, err := strconv.ParseInt(str, 10, 32)  // or 64 on 64bit tip
        return int(i), err
} 
```

标准库并不旨在为每种可能的数字类型和/或它们的组合提供（臃肿的）API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T13:53:54.253

不要忘记检查错误。例如，

```
package main

import (
    "fmt"
    "strconv"
)

func main() {
    s := "123"
    i, err := strconv.Atoi(s)
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println(i)
} 
```

输出：

```
123 
```

# asp.net - 在 C# 中导入包含图像的 Excel 工作表

> ID：13901568
> 
> 赞同：2
> 
> 时间：2012-12-16T13:07:19.147
> 
> 标签：asp.net, sql-server-2008

我有一个包含一个整数、一个字符串和一个图像列的 excel 文件。Sheet 包含许多这样的记录。我可以在没有图像列的情况下导入数据，但不知道如何检索图像列。

# button - 垂直对齐：按钮中的文本中间

> ID：13901569
> 
> 赞同：7
> 
> 时间：2012-12-16T13:07:26.760
> 
> 标签：button, vertical-alignment, css

我有这个布局：

![布局](../Images/113b243061d8bff5b5f193f7ecb27657.png)

**我的 CSS**：

```
body {
     background: #e2eaed;
}
a {
     text-decoration: none;
     color: #fff;
     font-size: 30px;
     height: 62px;
     line-height: 62px;
     /* vertical-align: middle is not works  */
     background: #8dc73f;
     width: 132px;
     padding: 0 25px;
     font-size: 16px;
     text-align: center;
     font-weight: bold;
     margin-left: 4px;
     display: block;
     float: left;
} 
```

当按钮有 1 行文本时，我的代码运行良好。但是当按钮有 2 行文本时，如上图所示。代码文本的高度很大，因为我使用了该`line-height`属性。我已经尝试过`vertical-align`，但它不起作用。

请参阅[jsfiddle](http://jsfiddle.net/nJj2c/2/)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T14:02:55.183

另一种方法是使用[灵活的盒子](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)：

```
a {
  display: inline-flex;
  align-items: center; /* cross axis */
  justify-content: center; /* main axis */

  line-height: 1; /* reset */
} 
```

您可能需要添加前缀，请参阅[浏览器支持](http://caniuse.com/flexbox)和[小提琴](http://jsfiddle.net/nJj2c/5/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-16T13:19:05.497

垂直对齐仅影响显示为表格单元格（或内联块，但对后面的效果不同）的元素。这些元素不得浮动。

```
a {
  display: table-cell;
  vertical-align: middle;

  /* Reset */
  float: none;
  line-height: normal;
} 
```

# ruby-on-rails - application_controller.rb 还是新的？

> ID：13901572
> 
> 赞同：1
> 
> 时间：2012-12-16T13:07:43.667
> 
> 标签：ruby-on-rails, convention, applicationcontroller

我是 Ruby on Rails 的新手，正在学习它以创建我正在开发的新 SaaS。虽然我能够编写一些 RoR，但我不知道该语言的大多数约定。

我的问题是，对于前端网站（非注册用户可以看到），我应该添加不同的页面控制器，还是创建一个新的控制器，例如，`main`然后扩展它？

当我在这里时，是否有一个页面可以让我了解 Ruby on Rails 的主要约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:16:29.143

我的偏好是为网站的不受限制的部分添加一个新的控制器。您也可以使用不同的页面控制器来做到这一点。

要了解使用 Rails 进行 Web 开发的约定和工具和技术，我强烈推荐 Michael Hartl 的 Rails 教程书。[它可以免费在线获得，整本书可以在http://ruby.railstutorial.org/book/ruby-on-rails-tutorial](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial)被看作是一页长的一页；-)

# c# - 列表中的字符串分隔

> ID：13901573
> 
> 赞同：4
> 
> 时间：2012-12-16T13:08:00.490
> 
> 标签：c#, asp.net, .net, asp.net-mvc, c#-4.0

我有一个名为的列表`listitems`，其中包含有关项目的信息。

我想用逗号分隔每个列表项并将其放在一个名为的字符串中`gh`

但是当我使用以下内容时，我得到的输出为：

`",a,b"`这是不正确的

但我希望输出为`"a,b"`.

如何修改代码？

```
foreach(var a in listitems)
{
  gh = gh +"," + a;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T13:09:07.847

```
string gh = String.Join(",", listitems); // 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T13:11:04.513

您可以使用 with[`String.Join`](http://msdn.microsoft.com/en-us/library/dd783876.aspx)方法。

> 使用每个成员之间的指定分隔符连接构造`IEnumerable<T>`的 type 集合的成员。`String`

```
string gh = String.Join(",", listitems); 
```

# php - php正则表达式识别解码字符串中的所有HTML特殊字符

> ID：13901577
> 
> 赞同：0
> 
> 时间：2012-12-16T13:08:38.210
> 
> 标签：php, html, regex, decoding

我希望已经在 SO 中找到它......但到目前为止还没有

我说的是一个查看 HTML ENCODED 字符串的正则表达式：例如

```
blip &#9830; trout&rsquo;s mouth 
```

我用`&\w+;`and覆盖了所有的基础`&#[0-9]+;`吗？

```
$encoded_string = htmlspecialchars($_GET["searchterms"]);
echo "<b>Search results for submitted string: \"$encoded_string\"</b><br><br>";
$html_special_chars_pattern = "!(&\\w+;|&#[0-9]+;)!";
$non_html_tokens = preg_split( $html_special_chars_pattern, $encoded_string, -1, PREG_SPLIT_DELIM_CAPTURE ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T13:39:35.780

您缺少[`&#xH;`或`&#XH;`数字字符引用](http://www.w3.org/TR/html4/charset.html#h-5.3.1)。

> 5.3.1 数字字符引用
> 
> 数字字符引用指定文档字符集中字符的代码位置。数字字符引用可以采用两种形式：
> 
> *   语法“&#D;”，其中 D 是十进制数，指的是 ISO 10646 十进制字符数 D。
>     
>     
> *   **语法“&#xH;” 或“&#XH;”，其中 H 是十六进制数，指的是 ISO 10646 十六进制字符数 H。数字字符引用中的十六进制数不区分大小写。**

也就是说，`&#[xX][a-fA-F0-9]+;`在正则表达式中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:37:17.267

我已经把[我之前的相关帖子](https://stackoverflow.com/a/13763250/1338292)作为答案放在这里。如果其他人提出了更好的解决方案或为什么会崩溃，请告诉我:)

```
preg_match_all('/&(?:[a-z]+|#\d+);/', $content, $matches); 
```

也支持十六进制实体：

```
preg_match_all('/&(?:[a-z]+|#x?\d+);/i', $content, $matches); 
```

顺便说一句，`(?: ... )`用于防止内存捕获。另请参阅：[这个 Perl 正则表达式中的 `?` 是什么意思？](https://stackoverflow.com/questions/3890739/what-does-mean-in-this-perl-regex)

# php - PHP 等效于 OpenSSL RSA 命令

> ID：13901578
> 
> 赞同：2
> 
> 时间：2012-12-16T13:08:42.737
> 
> 标签：php, openssl, private-key

如何使用 PHP 从 RSA 私钥中删除 passphase 我知道在 OpenSSL 中是这样的： `openssl rsa -in key.key -out key.key` 我正在 PHP 中搜索与此命令等效的命令。

* * *

RSA 命令需要通过

```
OpenSSL> rsa -in key2.key -out key2.key 
Enter pass phrase for key2.key: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:23:35.087

这将使用`openssl`扩展完成相同的操作：

```
$key = file_get_contents('key2.key');
$password = 'your password or pass phrase';

if (false === ($pkey = openssl_pkey_get_private($key, $password))) {
    die(openssl_error_string());
}
openssl_pkey_export($pkey, $out_key);
file_put_contents('key2.key', $out_key); 
```

一个具体的例子：

```
$key = <<<EOS
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,775352C44A559B6C

V8EuwC29zy4yuY7Ie+HvyygjKJx4G+VF/SgjjCQR+Q/iLaXcoXhIMBmP9ugQpywu
Tgmg25PruaXl3Mabs2h03aUwLyFEEjcnaVz4IFYGflqDIBbSb/Y4Q9Ef0OjbCwCJ
5pEnD0ATPtb+bptHk7VitvyK9vIN4zrqDeWdpGkqhYZx4SkUDLBhcYYYA3eY8P7y
/yeUmHt2p12W7xF4OWflNj0ot7N2GoofKrAomW0vHVAAlVHj4OVyZYeOEG/8gm2A
a3xo+LS9D2tFJjCtnP5ytczWnsoe18bKlWbjV/IimlkVEqR6jx0jC99eCUHyaSvm
OfU/DHHcooBIJxXB5VfxFbRzjyWYgsAiVf2lThvusRb+j8/Ey28t5CWx8ME2hgmk
hrTPmCFor+Lx/7++cmOFWSNvJU8MrC6jH+q2R3xIPuY=
-----END RSA PRIVATE KEY-----
EOS;
$password = 'superman';

if (false === ($pkey = openssl_pkey_get_private($key, $password))) {
    die(openssl_error_string());
}
openssl_pkey_export($pkey, $out_key);
echo $out_key; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T15:39:53.497

使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->setPassword('password');
$rsa->loadKey('...');

$rsa->setPassword();
echo $rsa->getPrivateKey();
?> 
```

# jquery - jQuery淡出图像

> ID：13901585
> 
> 赞同：0
> 
> 时间：2012-12-16T13:09:33.793
> 
> 标签：jquery

我有一个代码可以为每个固定的时间间隔更改图像，但是这个图像通常是在变化的。如何在我的代码中使用淡出选项，以便它慢慢淡出以打开新图像。我的代码如下

```
$(document).ready(function() {
        (function() {
            var curImgId = 0;
            var numberOfImages = 2;
            window.setInterval(function() {
                $('body').css('background-image','url(bg' + curImgId + '.jpg)');
                curImgId = (curImgId + 1) % numberOfImages;
            }, 15 * 100);
        })();
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:25:45.643

你可以看看这个线程：
[CSS3 background image transition](https://stackoverflow.com/questions/9483364/css3-background-image-transition)。
这是一个很好的css解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:11:57.870

您不能淡化背景图像..您只能淡化元素（*但淡化`body`也会淡化所有内容*）

您需要将其添加为元素并将其放在所有其他元素的后面.. 并使用和淡化该[`.fadeIn()`](http://api.jquery.com/fadein)元素[`.fadeOut()`](http://api.jquery.com/fadeout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:17:04.193

您可以将元素的不透明度淡化为零，然后更改背景图像，然后将其淡化回 1：

```
$(document).ready(function() {
        (function() {
            var curImgId = 0;
            var numberOfImages = 2;
            window.setInterval(function() {
                $('body').fadeTo(500, 0, function(){
                    $(this).css('background-image','url(bg' + curImgId + '.jpg)');
                    $(this).fadeTo(500, 1);
                });
                curImgId = (curImgId + 1) % numberOfImages;
            }, 15 * 100);
        })();
 }); 
```

# c - 为什么我没有得到堆栈溢出？

> ID：13901587
> 
> 赞同：13
> 
> 时间：2012-12-16T13:09:42.380
> 
> 标签：c, memory, memory-management, stack-overflow

**编辑**在你兴奋之前，看看最后的重要编辑，如果你仍然好奇，这些报告如下：

*   [http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=696222](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=696222)
*   [http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=696263](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=696263)

* * *

我一直在尝试一段代码，并惊讶地发现我没有得到 stackoverflow。试图简化事情，我什至做到了这一点：

```
#include <stdio.h>

int main()
{
    int i;

    /* 1,500,000,000 x 4 bytes = 6,000,000,000 bytes = 6GB */
    int size = 1500000000;
    int arr[size];
    for (i = 0; i < size; i++) {
        arr[i] = 1;
    }
    printf("first: %d\n", arr[0]);
    printf("last:  %d\n", arr[size - 1]);

    return 0;
} 
```

这让我怀疑我什至不知道内存管理的基础知识。我在想`arr[size]`应该在堆栈上分配并轻松溢出，但它使用了我所有的内存并交换并成功完成。我错过了什么？

## 笔记

*   我在 64 位 ubuntu 12.04 上运行
*   我尝试过使用`gcc`和`clang`使用版本：

    ```
    gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
    Ubuntu clang version 3.0-6ubuntu3 (tags/RELEASE_30/final) (based on LLVM 3.0) 
    ```

*   我已关闭优化 ( `-O0`)

*   运行`ulimit -a`我得到：

    ```
    core file size          (blocks, -c) 0
    data seg size           (kbytes, -d) unlimited
    scheduling priority             (-e) 0
    file size               (blocks, -f) unlimited
    pending signals                 (-i) 29569
    max locked memory       (kbytes, -l) 64
    max memory size         (kbytes, -m) unlimited
    open files                      (-n) 1024
    pipe size            (512 bytes, -p) 8
    POSIX message queues     (bytes, -q) 819200
    real-time priority              (-r) 0
    stack size              (kbytes, -s) 8192
    cpu time               (seconds, -t) unlimited
    max user processes              (-u) 29569
    virtual memory          (kbytes, -v) unlimited
    file locks                      (-x) unlimited 
    ```

*   我有`4GB`ram 和大约相同数量的交换

* * *

```
(gdb) disassemble main
Dump of assembler code for function main:
   0x00000000004004f4 <+0>:     push   %rbp
   0x00000000004004f5 <+1>:     mov    %rsp,%rbp
   0x00000000004004f8 <+4>:     push   %rbx
   0x00000000004004f9 <+5>:     sub    $0x38,%rsp
   0x00000000004004fd <+9>:     mov    %rsp,%rax
   0x0000000000400500 <+12>:    mov    %rax,%rbx
   0x0000000000400503 <+15>:    movl   $0x59682f00,-0x14(%rbp)
   0x000000000040050a <+22>:    mov    -0x14(%rbp),%eax
   0x000000000040050d <+25>:    movslq %eax,%rdx
   0x0000000000400510 <+28>:    sub    $0x1,%rdx
   0x0000000000400514 <+32>:    mov    %rdx,-0x28(%rbp)
   0x0000000000400518 <+36>:    cltq
   0x000000000040051a <+38>:    shl    $0x2,%rax
   0x000000000040051e <+42>:    lea    0xf(%rax),%rdx
   0x0000000000400522 <+46>:    mov    $0x10,%eax
   0x0000000000400527 <+51>:    sub    $0x1,%rax
   0x000000000040052b <+55>:    add    %rdx,%rax
   0x000000000040052e <+58>:    movq   $0x10,-0x38(%rbp)
   0x0000000000400536 <+66>:    mov    $0x0,%edx
   0x000000000040053b <+71>:    divq   -0x38(%rbp)
   0x000000000040053f <+75>:    imul   $0x10,%rax,%rax
   0x0000000000400543 <+79>:    sub    %rax,%rsp
   0x0000000000400546 <+82>:    mov    %rsp,%rax
   0x0000000000400549 <+85>:    add    $0xf,%rax
   0x000000000040054d <+89>:    shr    $0x4,%rax
   0x0000000000400551 <+93>:    shl    $0x4,%rax
   0x0000000000400555 <+97>:    mov    %rax,-0x20(%rbp)
   0x0000000000400559 <+101>:   movl   $0x0,-0x18(%rbp)
   0x0000000000400560 <+108>:   jmp    0x400577 <main+131>
   0x0000000000400562 <+110>:   mov    -0x20(%rbp),%rax
   0x0000000000400566 <+114>:   mov    -0x18(%rbp),%edx
   0x0000000000400569 <+117>:   movslq %edx,%rdx
   0x000000000040056c <+120>:   movl   $0x1,(%rax,%rdx,4)
   0x0000000000400573 <+127>:   addl   $0x1,-0x18(%rbp)
   0x0000000000400577 <+131>:   mov    -0x18(%rbp),%eax
   0x000000000040057a <+134>:   cmp    -0x14(%rbp),%eax
   0x000000000040057d <+137>:   jl     0x400562 <main+110>
   0x000000000040057f <+139>:   mov    -0x20(%rbp),%rax
   0x0000000000400583 <+143>:   mov    (%rax),%edx
   0x0000000000400585 <+145>:   mov    $0x4006bc,%eax
   0x000000000040058a <+150>:   mov    %edx,%esi
   0x000000000040058c <+152>:   mov    %rax,%rdi
   0x000000000040058f <+155>:   mov    $0x0,%eax
---Type <return> to continue, or q <return> to quit---
   0x0000000000400594 <+160>:   callq  0x4003f0 <printf@plt>
   0x0000000000400599 <+165>:   mov    -0x14(%rbp),%eax
   0x000000000040059c <+168>:   lea    -0x1(%rax),%edx
   0x000000000040059f <+171>:   mov    -0x20(%rbp),%rax
   0x00000000004005a3 <+175>:   movslq %edx,%rdx
   0x00000000004005a6 <+178>:   mov    (%rax,%rdx,4),%edx
   0x00000000004005a9 <+181>:   mov    $0x4006c7,%eax
   0x00000000004005ae <+186>:   mov    %edx,%esi
   0x00000000004005b0 <+188>:   mov    %rax,%rdi
   0x00000000004005b3 <+191>:   mov    $0x0,%eax
   0x00000000004005b8 <+196>:   callq  0x4003f0 <printf@plt>
   0x00000000004005bd <+201>:   mov    $0x0,%eax
   0x00000000004005c2 <+206>:   mov    %rbx,%rsp
   0x00000000004005c5 <+209>:   mov    -0x8(%rbp),%rbx
   0x00000000004005c9 <+213>:   leaveq
   0x00000000004005ca <+214>:   retq
End of assembler dump. 
```

* * *

```
$ pmap 2840
2840:   ./a.out
0000000000400000      4K r-x--  /home/gokce/play/a.out
0000000000600000      4K r----  /home/gokce/play/a.out
0000000000601000      4K rw---  /home/gokce/play/a.out
00002b572d7be000    136K r-x--  /lib/x86_64-linux-gnu/ld-2.15.so
00002b572d7e0000      8K rw---    [ anon ]
00002b572d9e0000      4K r----  /lib/x86_64-linux-gnu/ld-2.15.so
00002b572d9e1000      8K rw---  /lib/x86_64-linux-gnu/ld-2.15.so
00002b572d9e3000   1748K r-x--  /lib/x86_64-linux-gnu/libc-2.15.so
00002b572db98000   2044K -----  /lib/x86_64-linux-gnu/libc-2.15.so
00002b572dd97000     16K r----  /lib/x86_64-linux-gnu/libc-2.15.so
00002b572dd9b000      8K rw---  /lib/x86_64-linux-gnu/libc-2.15.so
00002b572dd9d000     28K rw---    [ anon ]
00007ffe080a2000 5859388K rw---    [ stack ]
00007fff6dbfc000      4K r-x--    [ anon ]
ffffffffff600000      4K r-x--    [ anon ]
 total          5863408K 
```

**重要编辑**

我正在使用一个小的手写makefile：

```
build:
        gcc foo.c -Wall -Wextra -g

run:
        ./a.out

.SILENT: 
```

使用我常用的编辑器镜头运行程序，我现在意识到它在某种程度上是相关的。当我使用以下命令从控制台运行时出现段错误：

```
./a.out 
```

但不是当我运行时：

```
make run 
```

这有什么关系？

**重要编辑2**

当我尝试像这样运行`ulimit -s`时`make run`：

```
build:
        gcc foo.c -Wall -Wextra -g

run:
        ulimit -s

.SILENT: 
```

它给：

```
make: ulimit: Command not found
make: *** [run] Error 127 
```

然后我意识到当我最后添加额外内容时它会发生变化`#`：（不是评论字符吗？）

```
build:
        gcc foo.c -Wall -Wextra -g

run:
        ulimit -s #

.SILENT: 
```

我得到：

```
unlimited 
```

我还检查了我的 bash 别名，但没有`make`. `which make`给予`/usr/bin/make`和`file /usr/bin/make`给予：

```
/usr/bin/make: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically 
linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0x1d76b881b71091d
37e6653d7c8b8e19a2a414591, stripped 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T13:47:30.033

`arr`正如您所期望的那样，显然是在堆栈上分配的。从`pmap`输出来看，堆栈明显增长到近 6GB：

```
00007ffe080a2000 5859388K rw---    [ stack ] 
```

因此，问题不在于您的程序或编译器。问题是为什么`ulimit -s 8192`显然没有得到执行。

从您对我的各种问题的回答中，很明显，该`ulimit -s`设置没有以某种方式从您的外壳传播`make run`到您的程序。这对我来说似乎很奇怪。

如果我站在你的立场上，我会查看系统文件`limits.conf`以及共享文件和用户的`bash`启动文件，看看我是否能发现任何相关的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:45:56.040

没有验证它，但恕我直言，这就是正在发生的事情：

```
int size = 1500000000; 
```

你在这里得到一个溢出 - 这个数字对于 int 来说太大了。变量“大小”的**实际**值会低得多。您的编译器实际上应该警告您这一点。同样，我没有验证它，因为我对此太懒了。试试这个：

```
#define SIZE 1500000000ULL
int arr[SIZE]; 
```

而且，当然，“i < SIZE”条件也需要更正 - i 是 int，因此条件将始终为真（同样，编译器也应该警告您）。祝你好运。

# jquery - 为什么 在我的 AngularJS 指令中为 Jquery UI 自动完成小部件包装是否必要？

> ID：13901588
> 
> 赞同：2
> 
> 时间：2012-12-16T13:09:46.417
> 
> 标签：jquery, jquery-ui, autocomplete, angularjs, directive

最近我尝试编写一个 AngularJS 指令来与 Jquery UI 自动完成小部件一起使用。该指令以这种方式使用：

```
<input type="text" auto-comp ng-model="lan" /> 
```

它应该用作自动完成小部件，并将所选项目存储到模型 $scope.lan。

最后我成功了，但是发现我必须放一个“div”标签包裹“input”标签，即

```
<div><input type="text" auto-comp ng-model="lang" /></div> 
```

如果没有“div”包装，Chrome 会报错：TypeError: Cannot set property 'nodeValue' of undefined

使用的库是：jquery 1.8.3 jquery UI 1.9.2 angularjs 1.0.3

我在 jsfiddle [http://jsfiddle.net/QSBvh/23/](http://jsfiddle.net/QSBvh/23/)中上传了代码， 你可以去掉 div，看看结果。

以下是指令：

```
angular.module('myApp', []).
directive('autoComp', function () {
       return function(scope, element, attrs) {
                $(element).autocomplete({
                    source: scope.availableTags,
                    select: function(event, ui) {
                        scope.lan = ui.item.value;
                        scope.$apply();
                    }
                });
        }
}); 
```

新发现。当我将 .autocomplete 放入

```
scope.$watch("availableTags", function(value) {}); 
```

突然，不需要“div”包装。很奇怪。

```
angular.module('myApp', []).
directive('autoComp', function () {
       return function(scope, element, attrs) {
            scope.$watch("availableTags", function(value) {
                $(element).autocomplete({
                    source: scope.availableTags,
                    select: function(event, ui) {
                        scope.lan = ui.item.value;
                        scope.$apply();
                    }
                });
            });
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:13:25.180

.autocomplete() 正在使用元素父元素，它可能正在寻找一个 div 父元素以向其添加功能。

# matplotlib - ipython pylab 数字不是内联的

> ID：13901591
> 
> 赞同：8
> 
> 时间：2012-12-16T13:10:07.570
> 
> 标签：matplotlib, ipython

我已经在 Mac (OSX Lion) 上安装了 iPython + SciPy Superpack。

如果我使用 matplotlib.pyplot 绘图，它会弹出一个带有图形的窗口，我关闭它以便 ipython 内核继续。

```
from matplotlib import pyplot as plt
plt.plot([1, 2, 3], [3, 6, 9])
plt.show() 
```

但是，如果我尝试内联（以`--pylab inline`or开头`--pylab=inline`）并导入 pylab，而不是笔记本内部的绘图（我期望的），我会得到一个外部窗口，它永远不会呈现任何内容。

仍然在外部窗口中：

```
import pylab
pylab.plot([1, 2, 3], [3, 6, 9])
pylab.show() 
```

既然我已经用它启动了笔记本，`ipython notebook --pylab=inline`它应该已经是这样了，但是如果我`%pylab inline`在单元格中使用并运行它，我会得到帮助，上面的相同代码会创建一个空白窗口，并挂起内核 - 我只能强制杀死窗户。这应该如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T13:14:39.473

好的 - 问题是原来的 ipython notebook 进程仍在运行（我没有杀死它），而带有 inline 标志的新进程正在另一个端口上运行。

如果您遇到此问题 - 首先保存所有笔记本，然后检查您没有运行其他进程并杀死任何不应该运行的进程。

如果你想避免这种混乱，你可以`NotebookApp.port_retries=0`在你的配置中设置，在这种情况下，以后的笔记本调用将放弃，而不是监听一个新的端口。（[归功于 minrk](https://stackoverflow.com/users/938949/minrk)，在评论中）

# cassandra - Cassandra 评论数据模型

> ID：13901599
> 
> 赞同：1
> 
> 时间：2012-12-16T13:11:34.743
> 
> 标签：cassandra

我试图在很宽的行中存储非常简单的评论，但问题是我想要获得最高评论。

所以起初我尝试使用`UTF8`比较器类型，每个列名都以喜欢数量开头，后面跟着时间戳，例如：

```
Comments_CF = {
    parent:{
        8_timestamp: comment,
        5_timestamp: comment,
        1_timestamp: comment,
        ...
    }
    ...
} 
```

这种方法的问题在于，例如`2_timestamp`>`19_timestamp`因为字典顺序`2`大于`19`

我可能可以将热门评论存储在单独的 CF 中，但是我需要做两个查询而不是一个，所以我真的很想避免这种情况，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:20:06.600

使用复合，其中第一个组件是长的，第二个是适合您的时间戳格式的任何类型。这样排序将是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:49:53.250

2 个查询而不是 1 个通常没什么大不了的。你也可以只做一个复合值（喜欢的数量+评论）并自己对评论进行排序......从我所看到的东西来看，除了一些帖子之外，从来没有很多评论，所以这会非常快。

还有其他模式也可能在这里激发想法......

[https://github.com/deanhiller/playorm/wiki/Patterns-Page](https://github.com/deanhiller/playorm/wiki/Patterns-Page)

# c - 数组大小为一百万时程序崩溃

> ID：13901602
> 
> 赞同：3
> 
> 时间：2012-12-16T13:11:47.287
> 
> 标签：c, arrays, mergesort

> **可能重复：**
> [大数组在 C 中给出分段错误](https://stackoverflow.com/questions/7678844/big-array-gives-segmentation-error-in-c)

我正在尝试将合并排序和快速排序与不同的输入大小（如 10.000、100.000 和 1.000.000）进行比较。但是，当我输入一百万个输入大小时，程序崩溃了，我不知道为什么？另一方面，数组中充满了从包含数字的文件中读取的内容，这是我的简单合并排序。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>

#define SIZE 1000000

void Merge(int * , int , int , int );
void MergeSort(int *array, int left, int right);

int main(){

    struct timeval tv; 
    struct timezone tz; 
    struct tm *tm; 
    long start,stop;

    long i,num;
    int array[SIZE];

    FILE* fptr;

    gettimeofday(&tv, &tz); 
    tm = localtime(&tv.tv_sec); 
    printf("TIMESTAMP-START\t %d:%02d:%02d:%d (~%d ms)\n", tm->tm_hour, 
    tm->tm_min, tm->tm_sec, tv.tv_usec, 
    tm->tm_hour * 3600 * 1000 + tm->tm_min * 60 * 1000 + 
    tm->tm_sec * 1000 + tv.tv_usec / 1000);

    start = tm->tm_hour * 3600 * 1000 + tm->tm_min * 60 * 1000 + tm->tm_sec * 1000 + tv.tv_usec / 1000;

    fptr = fopen ("onemillion.txt","r");

    for(i=0; i<SIZE-1; i++){

        fscanf(fptr,"%d",&num);
        array[i]=num;
    }

    MergeSort(array,0,SIZE-1);

    /*for(i = 0;i < SIZE;i++)
        {
                printf("%d \n",array[i]);
        }*/

    gettimeofday(&tv, &tz); 
    tm = localtime(&tv.tv_sec); 
    stop = tm->tm_hour * 3600 * 1000 + tm->tm_min * 60 * 1000 + 
    tm->tm_sec * 1000 + tv.tv_usec / 1000; 
    printf("TIMESTAMP-END\t %d:%02d:%02d:%d (~%d ms) \n", tm->tm_hour, 
    tm->tm_min, tm->tm_sec, tv.tv_usec, 
    tm->tm_hour * 3600 * 1000 + tm->tm_min * 60 * 1000 + 
    tm->tm_sec * 1000 + tv.tv_usec / 1000); 

    printf("ELAPSED\t %d ms\n", stop - start);

    return 0;

}

void MergeSort(int *array, int left, int right)
{
        int mid = (left+right)/2;
        /* We have to sort only when left<right because when left=right it is anyhow sorted*/
        if(left<right)
        {
                /* Sort the left part */
                MergeSort(array,left,mid);
                /* Sort the right part */
                MergeSort(array,mid+1,right);
                /* Merge the two sorted parts */
                Merge(array,left,mid,right);
        }
}

void Merge(int *array, int left, int mid, int right)
{
        /*We need a Temporary array to store the new sorted part*/
        int tempArray[right-left+1];
        int pos=0,lpos = left,rpos = mid + 1;
        while(lpos <= mid && rpos <= right)
        {
                if(array[lpos] < array[rpos])
                {
                        tempArray[pos++] = array[lpos++];
                }
                else
                {
                        tempArray[pos++] = array[rpos++];
                }
        }
        while(lpos <= mid)  tempArray[pos++] = array[lpos++];
        while(rpos <= right)tempArray[pos++] = array[rpos++];
        int iter;
        /* Copy back the sorted array to the original array */
        for(iter = 0;iter < pos; iter++)
        {
                array[iter+left] = tempArray[iter];
        }
        return;
} 
```

当我尝试一千，一万和十万时，没有问题。正如我所说，我与一百万个输入大小作斗争。我不确定，但我想这是关于使用数组？无论如何，如果您能提供帮助和感谢，我将很高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T13:14:49.417

你得到一个堆栈溢出。没有足够的堆栈内存来容纳您的请求，从而导致运行时异常。

尝试使用动态分配数组`malloc`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:16:08.280

C 非常严格，不能像其他语言一样决定将数组放在哪里。它总是把这样一个数组放在堆栈上，这个数组很小。使用动态分配。

# windows - Windows 8 商店应用程序设置栏中的按钮样式

> ID：13901608
> 
> 赞同：5
> 
> 时间：2012-12-16T13:12:07.193
> 
> 标签：windows, xaml, windows-runtime, winrt-xaml

我正在创建 Windows 应用商店应用程序。我使用 callisto 库在设置中创建弹出窗口。我对样式按钮有疑问。当我将鼠标悬停在背景上并且字体变为白色时...

看图（鼠标在第二个按钮上）：![番茄钟设置](../Images/32a8e4bb92eaafe96a2117decd492c3c.png)

这是我的 XAML 文件：

```
<UserControl
x:Class="Pomidoro.PomidoroUserControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Pomidoro"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400">

<Grid>
    <StackPanel x:Name="FlyoutContent">
        <Button 
            Name="ChoosePomidoroButton" 
            Click="ChoosePomidoroButton_Click"
            Content="Choose pomidoro image..."    
            Background="LightGray"
            Foreground="Black"
            BorderBrush="Black"           
            />
        <Button 
            Name="DefaultPomidoroButton" 
            Click="DefaultPomidoroButton_Click"
            Content="Set default pomidoro image"  
            Background="LightGray"
            Foreground="Black"
            BorderBrush="Black"
            />
    </StackPanel>
</Grid> 
```

这就是我在 App.xaml.cs 中创建弹出窗口的方式：

```
 // Add an Pomidoro settings
        var pomidoro = new SettingsCommand("pomidoro", "Pomidoro image", (handler) =>
        {
            var settings = new SettingsFlyout();
            settings.Content = new PomidoroUserControl();
            settings.HeaderText = "Pomidoro";
            settings.IsOpen = true;
        });

        args.Request.ApplicationCommands.Add(pomidoro); 
```

当我尝试使用默认样式时...

```
<Button 
            Name="DefaultPomidoroButton" 
            Click="DefaultPomidoroButton_Click"
            Content="Set default pomidoro image"
            /> 
```

...背景、边框和前景是白色的...用户看不到任何东西。

我应该怎么做才能应用默认样式以具有灰色按钮（就像在商店中的许多应用程序中一样）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:37:03.210

问题是当您的应用程序使用深色主题时，默认按钮样式使用白色前景和边框画笔以及透明背景画笔。在页面上，默认按钮样式看起来很好：

![深色背景下默认按钮样式的屏幕截图](../Images/218e8fc36e686a2c77623eb05dff55b3.png)

但是，在 Callisto SettingsFlyout 的内容窗格中，该按钮是不可见的，因为内容窗格的背景是白色的。您一定已经注意到这一点，因为您在 UserControl 中手动设置了按钮的 Foreground 和 Background 属性。

一种解决方案是为 SettingsFlyout 上的按钮定义新样式，使用默认按钮模板来执行此操作。默认样式位于 64 位机器上：

```
C:\Program Files (x86)\Windows Kits\8.0\Include\WinRT\Xaml\Design 
```

`default.xaml`我在此文件夹中找到了 Button 控件的默认样式。

首先，我将这个默认样式复制到一个新的资源字典中。我设置 App.xaml 来引用这个新的资源字典，如下所示：

```
<!-- Add this line to your MergedDictionaries in App.xaml -->
<ResourceDictionary Source="FlyoutResources.xaml"/> 
```

通过一些工作，我调整了复制的默认按钮样式并给它一个独特的键。这是示例：

```
<!-- contents of FlyoutResources.xaml -->
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App1">

    <ResourceDictionary.ThemeDictionaries>
        <ResourceDictionary x:Key="Default">
            <SolidColorBrush x:Key="FlyoutButtonForeground">#FF000000</SolidColorBrush>
            <SolidColorBrush x:Key="FlyoutButtonBackground">#FFD3D3D3</SolidColorBrush>
            <SolidColorBrush x:Key="FlyoutButtonBorder">#FF000000</SolidColorBrush>
            <SolidColorBrush x:Key="FlyoutButtonPointerOverBackgroundThemeBrush" Color="#21D3D3D3" />
            <SolidColorBrush x:Key="FlyoutButtonPointerOverForegroundThemeBrush" Color="#FF000000" />
            <SolidColorBrush x:Key="FlyoutButtonPressedBackgroundThemeBrush" Color="#FFFFFFFF" />
            <SolidColorBrush x:Key="FlyoutButtonPressedForegroundThemeBrush" Color="#FF000000" />
            <SolidColorBrush x:Key="FlyoutButtonDisabledBackgroundThemeBrush" Color="#FFD3D3D3" />
            <SolidColorBrush x:Key="FlyoutButtonDisabledBorderThemeBrush" Color="#66000000" />
            <SolidColorBrush x:Key="FlyoutButtonDisabledForegroundThemeBrush" Color="#66000000" />
        </ResourceDictionary>
    </ResourceDictionary.ThemeDictionaries>

    <Style TargetType="Button" x:Key="flyoutButton">
        <Setter Property="Background" Value="{StaticResource FlyoutButtonBackground}" />
        <Setter Property="Foreground" Value="{StaticResource FlyoutButtonForeground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource FlyoutButtonBorder}" />
        <Setter Property="BorderThickness" Value="{StaticResource ButtonBorderThemeThickness}" />
        <Setter Property="Padding" Value="12,4,12,4" />
        <Setter Property="HorizontalAlignment" Value="Left" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}" />
        <Setter Property="FontWeight" Value="SemiBold" />
        <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlyoutButtonPointerOverBackgroundThemeBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlyoutButtonPointerOverForegroundThemeBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlyoutButtonPressedBackgroundThemeBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlyoutButtonPressedForegroundThemeBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlyoutButtonDisabledBackgroundThemeBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                                       Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlyoutButtonDisabledBorderThemeBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlyoutButtonDisabledForegroundThemeBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="FocusVisualWhite"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="1"
                                                         Duration="0" />
                                        <DoubleAnimation Storyboard.TargetName="FocusVisualBlack"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="1"
                                                         Duration="0" />
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused" />
                                <VisualState x:Name="PointerFocused" />
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Margin="3">
                            <ContentPresenter x:Name="ContentPresenter"
                                              Content="{TemplateBinding Content}"
                                              ContentTransitions="{TemplateBinding ContentTransitions}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}"
                                              Margin="{TemplateBinding Padding}"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                        </Border>
                        <Rectangle x:Name="FocusVisualWhite"
                                   IsHitTestVisible="False"
                                   Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}"
                                   StrokeEndLineCap="Square"
                                   StrokeDashArray="1,1"
                                   Opacity="0"
                                   StrokeDashOffset="1.5" />
                        <Rectangle x:Name="FocusVisualBlack"
                                   IsHitTestVisible="False"
                                   Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}"
                                   StrokeEndLineCap="Square"
                                   StrokeDashArray="1,1"
                                   Opacity="0"
                                   StrokeDashOffset="0.5" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary> 
```

最后一步是在 XAML 按钮定义上设置该样式：

```
<Button 
    Name="ChoosePomidoroButton" 
    Content="Choose pomidoro image..."   
        Style="{StaticResource flyoutButton}"
    />

<!-- etc. --> 
```

这是它的外观（中间按钮处于悬停状态）：

![自定义样式按钮的屏幕截图](../Images/765a37d56f961dfe1f77ff43489976d1.png)

# java - 在java中将按钮组件添加到java选项卡式窗格

> ID：13901609
> 
> 赞同：1
> 
> 时间：2012-12-16T13:12:17.043
> 
> 标签：java, swing, awt, jbutton, jtabbedpane

我正在尝试使用 java swings 创建 GUI。我只是 java swings 的初学者。我的主要想法是创建两个选项卡并在其中一个选项卡中添加一个按钮。

我想为每个选项卡编写一个单独的类，所以我创建了 3 个类，其中一个具有主要方法。另外两个代表选项卡。

在其中一个选项卡中，我想在中间添加一个按钮并向该按钮添加一个动作侦听器。

下面是具有主要方法的类。

```
public class abc {
    JFrame frame;
    JTabbedPane tabPane;
    ImageIcon close;
    Dimension size;
    int tabCounter = 0;
    abc_export exp;
    abc_import imp;
    public static void main(String[] args) {
        abc jtab = new abc();
        jtab.start();
    }
    public void start(){
    exp=new abc_export();
    imp=new abc_import();
    tabPane.addTab(null, exp.panel);
    tabPane.addTab(null, imp.panel);
    tabPane.setTabComponentAt(tabPane.getTabCount()-1, exp.tab);
    tabPane.setTabComponentAt(tabPane.getTabCount()-1, imp.tab);
    }

    public abc() {
        //  Create a frame
        frame = new JFrame();
        //  Create the tabbed pane.
        tabPane = new JTabbedPane();
        //  Create a button to add a tab
        //  Create an image icon to use as a close button
        close = new ImageIcon("C:/JAVAJAZZUP/tabClose.gif");
        size = new Dimension(close.getIconWidth()+1, close.getIconHeight()+1);
        //Adding into frame
        frame.add(tabPane, BorderLayout.CENTER);
        frame.setSize(300, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        }

}; 
```

下面是其中一个选项卡的代码。尽管另一个选项卡也具有相同的代码，它们代表具有不同类名的其他选项卡。

```
public class abc_import {
    ImageIcon close;
    Dimension size;
    int tabCounter = 0;
    JPanel tab;
    final JPanel panel;
    public abc_import() {
        close = new ImageIcon("C:/JAVAJAZZUP/tabClose.gif");
        size = new Dimension(close.getIconWidth()+1, close.getIconHeight()+1);
        //Adding into frame
        JLabel label = null;
        panel = new JPanel();
        //  Create a panel to represent the tab
        tab = new JPanel();
        tab.setOpaque(false);
        String str = "abc_import";
        label = new JLabel(str);
        tab.add(label, BorderLayout.WEST);
        }
}; 
```

正如预期的那样，两个选项卡都已创建。但我不知道在其中一个选项卡内添加一个按钮。

现在我的问题是，如果我想在其中一个选项卡中添加一个按钮，正如我已经说过的那样。我需要做什么？谁能帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:50:43.223

我不确定我是否理解您的意图，但您可以尝试[*如何使用选项卡式窗格：带有自定义组件*](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)[`TabComponentsDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#eg)的选项卡中讨论的方法。[](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)

 *[此处](https://stackoverflow.com/a/3158757/230513)显示了一个相关示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:19:08.500

您可以尝试使用 setTabComponentAt 方法。

这个方法有参数`setTabComponentAt(int index, Component component)`，你只需要在其中提到你想要的组件。

您可以参考[此处](https://blogs.oracle.com/CoreJavaTechTips/entry/placing_components_on_tabs2)的链接。*

# jsp - 关于 servlet 的 web.xml 中的欢迎页面设置

> ID：13901622
> 
> 赞同：1
> 
> 时间：2012-12-16T13:14:58.863
> 
> 标签：jsp, servlets

我开发了一个应用程序，其中包含 servlet 和一些 java 类，另外还有一个名为 home.html 的 html 页面，它是打开页面。

我的 web.xml 是这种格式..

```
<servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>com.saral.MyServlet</servlet-class>
  </servlet>   
     <servlet-mapping>
    <servlet-name>hello</servlet-name>
     <url-pattern>/helloServlet</url-pattern>
  </servlet-mapping> 

   <welcome-file-list>
    <welcome-file>FirstDemo/WebContent/home.html</welcome-file>
  </welcome-file-list>

  <listener>
  <listener-class>com.saral.SessionCounter</listener-class>
</listener> 
```

现在我的问题是，在 tomcat 上部署后，打开的主页是.. [http://imageshack.us/photo/my-images/835/ie1.png/](http://imageshack.us/photo/my-images/835/ie1.png/)

但我希望将此页面作为第一个加载 [http://imageshack.us/photo/my-images/651/ie3f.jpg/](http://imageshack.us/photo/my-images/651/ie3f.jpg/)

请告诉我需要进行哪些更改，以使我的打开页面正确无误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:19:59.920

如果您`home.html`要显示为主页，则只需更改`welcome-file-list`web.xml 中的标记

```
<welcome-file-list>
    <welcome-file>home.html</welcome-file>
</welcome-file-list> 
```

# iphone - 自动布局中的滚动视图

> ID：13901625
> 
> 赞同：2
> 
> 时间：2012-12-16T13:15:13.693
> 
> 标签：iphone, uiscrollview, constraints, autolayout

我已经阅读了一些与我有同样问题的帖子。我的滚动视图在自动布局方面表现不佳。我取消选中自动布局，这很好，但是我有两个按钮（下一个和上一个）需要留在超级视图的底部，如果没有自动布局，我不知道如何 D：我在滚动视图中有一个图像视图和它没有显示整个图像它在显示图像的中途结束。我将图像视图设置为 300 宽度和 500 高度。

谁能帮我解决如何以编程方式设置对象的“底部空间到超级视图”约束？或者，我确信有某种方法可以使用自动布局来完成此操作，苹果不会对我这样做，哈哈。

我试过的：

```
-(void)viewDidAppear:(BOOL)animated
{
  [super viewDidAppear:animated];
  [scroller setScrollEnabled:YES];
  [scroller setContentSize:CGSizeMake(320, 2000)];
} 
```

我还设置了高度和宽度限制，并调整了大小，直到我无法忍受为止。它所做的只是滚动一点点，然后就是这样。我想以编程方式为我的按钮设置约束并取消选中自动布局是一种选择，但必须有某种方法通过自动布局来实现这一点。任何建议都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:59:37.053

有趣的。通过选择底部到超级视图约束并选中“常量”字段旁边的“标准”复选框并让它自动设置来解决它，它会滚动！是的。我想一旦你学会了如何与它交谈，自动布局就是你的朋友^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:44:15.107

您也可以在 iPad 中使用此代码：

```
in .m file 

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    scrollViewMain.frame = CGRectMake(0, 0, 768, 815);
    [scrollViewMain setContentSize:CGSizeMake(768, 1040)];
}else {
    scrollViewMain.frame = CGRectMake(0, 0, 320, 370);
    [scrollViewMain setContentSize:CGSizeMake(320, 510)];
} 
```

# angularjs - 触发 AngularJS ng-show 的最佳方法

> ID：13901628
> 
> 赞同：12
> 
> 时间：2012-12-16T13:15:53.007
> 
> 标签：angularjs

我正在 AngularJS 中构建一个自动完成框。相关代码如下

```
<input type="text" ng-model="tag">
<div ng-show="tag">
  <ul>
    <li ng-repeat="t in user.tags | filter:{name:tag}">
      <a>{{t.name}}</a>
    </li>
  </ul>
</div> 
```

我想知道当“标签”没有价值时显示建议列表的最佳方式是什么（即我想在用户按下向下键时显示所有标签。无需提及按键代码回答）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-17T03:25:22.463

ng-show 适用于任何导致 bool 的表达式，因此您需要做的就是将“tag”替换为“tag === ''”，或者如果您的标签将是未定义的或为空的，则替换为等效的。

如果您只想在按下某个键时显示，我会创建另一个变量，当按下向下键时将其设置为 true 并检查它，例如

```
$scope.KeyPressed = false;
$scope.Tags = '';

$scope.ShowTags = function () {
    return $scope.KeyPressed && $scope.Tags !== '';
}; 
```

然后在你的div中：

```
<div ng-show="ShowTags()"> 
```

例如，请参见[jsfiddle](http://jsfiddle.net/tcallaghan2001/bga7m1b9/)

如果您需要从 jquery 插件中更改任何变量，您可能需要使用

```
$scope.$apply() 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-26T15:01:07.100

我在建立自己的角度项目时遇到了这个问题。

当我做出接受的答案时，我发现我的浏览器的内存不断增加。如果您创建了角度范围方法“ShowTags()”，它将不断被轮询。您可以通过在此方法中设置断点来验证这一点，它将不断被命中。如果您检查任务管理器并显示运行您网站的浏览器，则内存会不断增加并且不会停止。

在我看来，范围函数应该只在使用事件触发器时使用：点击事件、更改事件、按键是一些例子。

显示或隐藏不是事件，所以这就是它被这样轮询的原因。

要修复并提供相同的功能，请将其转换为范围变量。

将html标签从：

```
<div ng-show="ShowTags()"> 
```

到

```
<div ng-show="ShowTags"> 
```

在你的控制器中：

```
$scope.KeyPressed = false;
$scope.Tags = '';

then create a watch event on what you want to watch for:

//initialize showtag when page loads
$scope.ShowTags = $scope.KeyPressed && $scope.Tags !== '';

//watch for any new changes on keypressed
$scope.$watch('KeyPressed', function (newValue, oldValue) {
     if (newValue && $scope.Tags !== '') {
         $scope.ShowTags = true;
     } else {
         $scope.ShowTags = false;
     }
}

//watch for any new changes on keypressed
$scope.$watch('Tags', function (newValue, oldValue) {
     if (newValue !== "" && $scope.KeyPressed) {
         $scope.ShowTags = true;
     } else {
         $scope.ShowTags = false;
     }
} 
```

或者您可以更改为“watchCollection”而不是拥有多个手表，例如：

```
$watchCollection('[KeyPressed, Tags]', function (newValue) { } 
```

但是有了这个，newValue 将是一个数组，您必须访问特定的索引才能获取正在监视的任何变量的 newValues。

like..newValue[0]是KeyPressed的值，newValue[1]是Tags的值

或者遵循公认的答案并尽量减少手表的数量：

```
$scope.TruthyVal= function () {
    return $scope.KeyPressed && $scope.Tags !== '';
};

$scope.$watch('TruthyVal', function (newValue, oldValue) {
     if (newValue) {
         $scope.ShowTags = true;
     } else {
         $scope.ShowTags = false;
     }
} 
```

它查看 KeyPressed 和 Tags 的值，并更改 TruthyVal 的值。如果 TruthyVal 被改变，那么它就会进入被监视的逻辑。

# qtwebkit - qtwebkit-opensource-5.0.0-beta2 构建错误（目标：linux-g++-64，参数：--qt --only-webkit --no-webkit2）

> ID：13901629
> 
> 赞同：1
> 
> 时间：2012-12-16T13:15:55.367
> 
> 标签：qtwebkit

当我尝试构建它时，出现此错误：

```
Encountered 3 configuration warning(s):

! QtQuick module not found, QML APIs will not be built

! Missing QtWidgets module, disabling WebKit1

! Missing QtTest module, disabling DumpRenderTree, WebKitTestRunner and tests

WebKit is now configured for building. Just run 'make'.

...

Project ERROR: Unknown module(s) in QT: core 
```

而我安装了 qtbase-5.0.0-beta2 和 libQtCore libQtWidgets libQtTest 存在

在 usr/lib 但 libQtQuick 不存在。

258\. qtwebkit-opensource-src-5.0.0-beta2/Source/WTF/WTF.pro 文件的行导致错误

上面。这条线似乎是这样的：

```
QT += core 
```

# java - Websphere 应用服务器 8.5 和 geronimo 的隐藏类

> ID：13901630
> 
> 赞同：2
> 
> 时间：2012-12-16T13:16:00.010
> 
> 标签：java, websphere, geronimo

目前，我们的应用程序在 Websphere Community Edition 6 上运行，该版本在内部使用 Geronimo 应用程序服务器。

由于我们的应用程序需求增加，我们正在评估向 Websphere Application Server 8.5 的迁移。但是，我们在类加载器方面遇到了几个问题。如果我们的一些库需要在不受应用服务器干扰的情况下执行。

在 geronimo 中，我们通过更改文件 geronimo.xml 并在其中包含我们不希望被*隐藏类*标记干扰的所有包来获得这种效果。

例子：

```
<hidden-classes>
        <filter>org.apache.commons.logging</filter>
        <filter>org.apache.log4j</filter>
        <filter>org.apache.axiom</filter>
        <filter>org.apache.axis2</filter>
        <filter>org.apache.commons.beanutils</filter>
        <filter>org.apache.struts</filter>
        <filter>org.directwebremoting</filter>
        <filter>com.thoughtworks</filter>
</hidden-classes> 
```

**Websphere Application Server 8.5 中是否有等效机制？**我们尝试使用策略“parent last”进行类加载，但有些事情没有按预期工作（例如，使用我们的 xerces 版本）。

# ocr - 查找图像的角数和其他特征/特征的算法？（OCR，字母识别）

> ID：13901634
> 
> 赞同：1
> 
> 时间：2012-12-16T13:16:15.923
> 
> 标签：ocr, feature-detection

我正在开发一个简单的 OCR 应用程序（我知道已经存在的应用程序和技术比我能够开发的要好得多，但这是为了好玩）。我的方法是通过比较图像的某些特征，将扫描的字符与已知字符的训练集进行比较，例如：

1.  宽度、高度
2.  绘制像素数
3.  角数
4.  等等

有人能告诉我 3\. 和 4\. 的算法吗（伪代码很好）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:38:25.593

### 试试这个

私有函数 getCornerType($im, $x, $y) {

```
 $p11 = $this->getBWcolor($im, $x, $y);
    $p21 = $this->getBWcolor($im, $x+1, $y);
    $p12 = $this->getBWcolor($im, $x, $y+1);
    $p22 = $this->getBWcolor($im, $x+1, $y+1);

    $sum = $p11 + $p12 + $p21 + $p22;

    if ($sum % 2 == 0){
        return false;
    }

    if (($p11==COLOR_BLACK)&&($p21==COLOR_WHITE)&&($p12==COLOR_WHITE)&&($p22==COLOR_WHITE)){
        return CORNER_BP_LEFT_TOP;
    }

    if (($p11==COLOR_WHITE)&&($p21==COLOR_BLACK)&&($p12==COLOR_WHITE)&&($p22==COLOR_WHITE)){
        return CORNER_BP_RIGHT_TOP;
    }

    if (($p11==COLOR_WHITE)&&($p21==COLOR_WHITE)&&($p12==COLOR_BLACK)&&($p22==COLOR_WHITE)){
        return CORNER_BP_LEFT_BOTTOM;
    }

    if (($p11==COLOR_WHITE)&&($p21==COLOR_WHITE)&&($p12==COLOR_WHITE)&&($p22==COLOR_BLACK)){
        return CORNER_BP_RIGHT_BOTTOM;
    }

    if (($p11==COLOR_WHITE)&&($p21==COLOR_BLACK)&&($p12==COLOR_BLACK)&&($p22==COLOR_BLACK)){
        return CORNER_WP_LEFT_TOP;
    }

    if (($p11==COLOR_BLACK)&&($p21==COLOR_WHITE)&&($p12==COLOR_BLACK)&&($p22==COLOR_BLACK)){
        return CORNER_WP_RIGHT_TOP;
    }

    if (($p11==COLOR_BLACK)&&($p21==COLOR_BLACK)&&($p12==COLOR_WHITE)&&($p22==COLOR_BLACK)){
        return CORNER_WP_LEFT_BOTTOM;
    }

    if (($p11==COLOR_BLACK)&&($p21==COLOR_BLACK)&&($p12==COLOR_BLACK)&&($p22==COLOR_WHITE)){
        return CORNER_WP_RIGHT_BOTTOM;
    }

} 
```

### 希望这有效

# android - 具有自定义布局的微调器的动态填充

> ID：13901639
> 
> 赞同：1
> 
> 时间：2012-12-16T13:16:41.557
> 
> 标签：android, spinner

我的列表视图有一个自定义布局项。布局项中有一个微调器，需要用值填充，通常是通过`android:entries`
这种方法我遇到的问题是最终用户无法修改值，这是我想要包括的内容。由于布局项和随后的微调器在同一个列表视图上重复多次，我想必须有一种方法以编程方式填充它一次。我就是想不通。

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/customListItem"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/exerciselbl" />

        <Spinner
            android:id="@+id/Exercise"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:entries="@array/workout_items" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/repslbl" />

        <Spinner
            android:id="@+id/Reps"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:entries="@array/reps_count" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/weightlbl" />

        <EditText
            android:id="@+id/Weight"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="number" />
    </LinearLayout>

</LinearLayout> 
```

所以是的，我想避免使用`android:entries="@array/workout_items"`，因为这意味着在 XML 资源文件中手动输入微调器的每个项目，并且我无法在程序运行时动态添加项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:36:30.633

Here is a simple example of how it would be done, obviously the generics can change and there are other ways of loading the spinner.

```
public void populateSpinner () {
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(this, android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    List<CharSequence> list = new ArrayList<CharSequence>();
    for (int i = 0; i < 10; i++) {
        list.add("Item " + i);
    }
    adapter.addAll(list);
    adapter.notifyDataSetChanged();
} 
```

One of the more important lines is `adapter.notifyDataSetChanged()`, this is because it tells the view that it needs to refresh the data associated with this spinner.

For more information, see the [ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html) and [Spinner](http://developer.android.com/reference/android/widget/Spinner.html) classes.

# python - 生成列表字典的所有排列的组合（按特定顺序）

> ID：13901641
> 
> 赞同：2
> 
> 时间：2012-12-16T13:16:51.173
> 
> 标签：python

我有一个列表的字典

```
d = {'A': [1,2,3], 'B': [4,5], 'C': [6]} 
```

我需要生成每个列表（A、B 和 C）的所有排列。还行吧。

```
p = {}
for k in d.keys():
    p[k] = [i for i in itertools.permutations(d[k])] 
```

这导致`p`

```
{'A': [(1, 2, 3), (1, 3, 2), (2, 1, 3), (2, 3, 1), (3, 1, 2), (3, 2, 1)],
 'B': [(4, 5), (5, 4)],
 'C': [(6,)]} 
```

然后我需要合并来自 A、B 和 C 列表的元组，但要按照特定的顺序（例如，按照`sorted(p.keys())`实际给出的顺序`['A', 'B', 'C']`）。所以我应该获得整数元组的列表：

```
[(1,2,3,4,5,6),
 (1,2,3,5,4,6),
 (1,3,2,4,5,6),
 (1,3,2,5,4,6),
 ...
 (3,2,1,5,4,6)
] 
```

我知道`itertools.product`可以在这种情况下使用它，但是初始字典`d`可以包含任意数量的具有不同键的值，我不知道在这种情况下如何使用它。或者，也许您将能够为所描述的问题提出完全不同的解决方案。最终解决方案越快越好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:22:52.963

像这样的东西：

```
from itertools import permutations, product, chain

d = {'A': [1,2,3], 'B': [4,5], 'C': [6]}
# You don't need to materialise permutations here, but this matches your existing dict
p = {k:list(permutations(v)) for k, v in d.iteritems()}    

for blah in product(*map(p.get, sorted(p))):
    print list(chain.from_iterable(blah)) # or use tuple instead of list

[1, 2, 3, 4, 5, 6]
[1, 2, 3, 5, 4, 6]
[1, 3, 2, 4, 5, 6]
[1, 3, 2, 5, 4, 6]
[2, 1, 3, 4, 5, 6]
[2, 1, 3, 5, 4, 6]
[2, 3, 1, 4, 5, 6]
[2, 3, 1, 5, 4, 6]
[3, 1, 2, 4, 5, 6]
[3, 1, 2, 5, 4, 6]
[3, 2, 1, 4, 5, 6]
[3, 2, 1, 5, 4, 6] 
```

# php - Kohana 3.3：如何为管理子目录创建路由？

> ID：13901642
> 
> 赞同：1
> 
> 时间：2012-12-16T13:17:02.467
> 
> 标签：php, web-applications, routes, kohana-3, subdirectory

我设置了两条路由，一条是默认路由，另一条是启用管理部分，该部分在控制器目录的子目录中具有控制器。这些是它们的样子：

```
Route::set('default', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'controller' => 'Home',
        'action'     => 'index',
    ));

// Admin routes
Route::set('admin', 'admin(/<controller>(/<action>(/<id>)))')
        ->defaults(array(
                'directory'  => 'Admin',
                'controller' => 'Main',
                'action'     => 'index',
        )); 
```

当我导航到 /admin/ 或 /admin/main 时，我收到 404 错误，我无法让它工作。我还将 admin 子目录中的类命名为 Controller_Admin_Main 这样应该可以工作，对吧？

请提供示例说明如何正确执行此操作。非常感谢你！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:48:38.017

通过将管理路由的位置切换到代码中默认路由的上方，问题得到了解决。我猜 kohana 匹配第一个表达式并尝试根据默认路由显示视图。

# javascript - 在 JavaScript 中仅使用表达式/不使用语句是否存在性能劣势？

> ID：13901645
> 
> 赞同：1
> 
> 时间：2012-12-16T13:17:08.140
> 
> 标签：javascript, performance, expression, code-translation

我正在将大量某种语言的代码翻译成 JavaScript。如果我把所有的东西都翻译成表达式而不用语句，我的工作会容易得多。例如，而不是

```
f = function(a,b){
    console.log(a);
    console.log(b);
    if (a>5)
        return a+b;
    else
        return a*b;
};
console.log(f(2,2)); 
```

我会：

```
f = function(a,b){
    return console.log(a), console.log(b), (a>5?a+b:a*b);
}; 
```

除了我担心不太像人类的代码可能会被优化得更糟。这种担心有效吗？

注意：无论哪种方式，代码都无法阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:07:14.050

> 除了我担心不太像人类的代码可能会被优化得更糟。这种担心有效吗？

简而言之，没有。我选择未来的维护是您对执行速度的关注。如果未来从事此工作的程序员没有遇到过 (a>b?a:b;)，他们会很快接受它，并且可能会感谢您提供更简洁的代码。

同样，我会更关心您给出的返回函数。诚然，我只是在学习 js（Java 背景），但是

```
return console.log(a), console.log(b), (a>5?a+b:a*b); 
```

它不如

```
console.log(a); console.log(b); return (a>5?a+b:a*b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:26:11.357

我个人会选择这个

```
var f = function(a, b){
    console.log(a);
    console.log(b);
    return ( a > 5 ? a + b : a * b);
}; 
```

在客户端使用它会将文件大小减少几个字节

# objective-c - 通过属性从数组中过滤对象，使用方法 filteredArrayUsingPredicate

> ID：13901646
> 
> 赞同：2
> 
> 时间：2012-12-16T13:17:12.787
> 
> 标签：objective-c, ios, nsarray, nspredicate, predicatewithformat

我不明白如何使用谓词，我有一个很长的代码来按属性“类型”从数组中过滤对象，突然我看到了可以让我的生活变得更好的方法“filteredArrayUsingPredicate”。我尝试编写谓词，但总是出错；有人可以告诉我如何正确写吗？

我有方法`- (void) filterData: (NSString *)filteredWord`：

我也有对象数组（事件）：**NSArray *eventsArray**。我想使用filteredArrayUsingPredicate 来获取带有对象（事件）的新数组，其中它们的属性（类型）等于filterWord。请注意，事件是核心数据托管子类。

甚至可以用谓词做到这一点吗？

我的尝试之一：

```
NSString *propertyName = @"type";
NSArray *eventsArray = [[[[self currentPerson] events] objectEnumerator]allObjects];
NSPredicate *predicte = [NSPredicate predicateWithFormat:@"%k like '%@'",propertyName,filteredWord];
[eventsArray filteredArrayUsingPredicate:predicte]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:40:47.153

试试这个：

```
NSString *propertyName = @"type";
NSArray *eventsArray = [[[self currentPerson] events] allObjects];
NSPredicate *predicte = [NSPredicate predicateWithFormat:
                         @"%k like %@",propertyName, filteredWord];
NSArray *filteredArray = [eventsArray filteredArrayUsingPredicate:predicte]; 
```

您忽略过滤的结果。`filteredArrayUsingPredicate:` 返回的*新*实例`NSArray`。它不会就地过滤原始数组，因为`NSArray`对象是不可变的。您要么必须制作一个 [`NSMutableArray`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html) 然后使用`filterUsingPredicate:`来过滤适当的数组，要么您必须对返回的数组做一些事情 `filteredArrayUsingPredicate:`（记录它，保存它等等......）

不要在属性周围使用单引号。（感谢@MartinR 的线索）

# c# - 由于异常“多个级联路径”，无法在 mvc 4 中创建模型

> ID：13901647
> 
> 赞同：1
> 
> 时间：2012-12-16T13:17:41.737
> 
> 标签：c#, sql-server, entity-framework, asp.net-mvc-4

我有三个模型类：

1.  用户。
2.  入口。
3.  入口喜欢。

如下：

```
public class User
{
    [Required]
    public int ID { get; set; }

    [Required]
    [DataType(DataType.Text)]
    public string Name { get; set; }
}
public class Entry
{
    [Required]
    public int ID { get; set; }

    public int UserID { get; set; }
    [ForeignKey("UserID")]
    public virtual User User { get; set; }
}
public class EntryLike
{
    [Required]
    public int ID { get; set; }

    [Required]
    public int UserID { get; set; }
    [ForeignKey("UserID")]
    public virtual User User { get; set; }

    [Required]
    public int EntityID { get; set; }
    [ForeignKey("EntityID")]
    public virtual Entry Entry { get; set; }
} 
```

执行后我得到以下异常：

> 在表“EntryLikes”上引入 FOREIGN KEY 约束“FK_dbo.EntryLikes_dbo.Entries_EntityID”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:38:19.507

为什么你与来自 EntryLike 和来自 Entry 的 User 有外键关系？鉴于您在 Entry 类上存在 Entry 和 User 之间的关系，您不需要在 EntryLike 类上建立关系，因为可以根据 EntryLike 和 Entry 之间的关系来推断它。此外，是否应该将 EntryLike 上的外键 id 属性称为 EntryID 而不是 EntityID？

编辑：这是因为您有多个级联路径到您的用户 - 一个是 Entry > User，另一个是 EntryLike > Entry > User。您需要关闭级联删除以阻止此错误的发生。我在评论中添加的链接应该能让你走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:10:51.683

您必须为至少`EntryLike`涉及其中一个关系禁用级联删除。默认情况下，每个*所需*的一对多关系都会启用级联删除。您需要 Fluent API，这是不可能的数据注释。例如：

```
modelBuilder.Entity<EntryLike>()
    .HasRequired(el => el.Entry)
    .WithMany()
    .HasForeignKey(el => el.EntryID)
    .WillCascadeOnDelete(false); 
```

# android - 通过wifi在Android设备中调试而无需root

> ID：13901650
> 
> 赞同：31
> 
> 时间：2012-12-16T13:17:52.667
> 
> 标签：android, adb

是否有任何可能的方法可以通过 wifi 而不是 USB 来调试或运行从 eclipse 到我的 Sony Tablet S 的 android 应用程序而不使设备生根？

如果设备已植根，有办法做到这一点。但是，我正在寻找未植根的设备中的解决方案。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-24T08:25:02.390

*   断开设备与 USB 的连接，然后告诉它在 4455 上收听

    **亚行 tcpip 4455**

以 TCP 模式重启端口：4455

*   使用指定的 ip:port 连接到设备。我的设备正在使用 wifi

    **亚行连接 192.168.1.103:4455**

连接到 192.168.1.103:4455

*   现在通过 tcp 执行正常的 adb 命令，例如

    **亚行外壳**

*   完成后，您可以将其放回 USB 模式 adb usb 在 USB 模式下重新启动

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-09T13:44:32.667

经过一番测试后，当计算机和平板电脑都在同一个 wifi 网络上时，我成功地按照此过程通过 ADB 连接了 Sony Tablet S。我使用 Xperia T 作为笔记本电脑和 Tablet S 之间的连接点。我在 Xperia Tablet S 和 Xperia S 上也遵循了相同的程序。

1.  通过 USB 将 Sony Tablet S 连接到计算机，确保您在平板电脑上启用了 ADB 调试。
2.  在计算机上，执行“adb devices”，验证平板电脑是否显示在可用设备列表中。
3.  在平板电脑连接到计算机时执行“adb tcpip [port]”，确认您收到响应“restarting in TCP mode port: [port]”
4.  断开设备与它所连接的计算机的连接。
5.  从位于同一 wifi 网络上的主机，执行“adb connect [ip to device]:[port]”，验证您收到响应“connected to [ip to device]:[port]”

最后我启动了 Eclipse，创建了一个测试项目并尝试启动该项目。该项目从 Eclipse 自动安装和启动。我还测试了它以进行调试，并且效果同样好。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-14T12:34:48.147

最后经过大量搜索，这里是关于“在***不生根*****的情况下使用 Android 进行无线调试** ”您的 android 手机的综合简短教程。

 ***脚步：**

1.  确保您的手机和 PC/笔记本电脑连接在同一个网络中。
2.  **查找您的 Android 设备的 IP 地址：**转到*设置 > 关于手机 > 状态*。记下它。
3.  **Ping 测试：**让我们首先检查您的手机是否可以从您的 PC/笔记本电脑访问以执行此操作`ping`您的 Android 设备并检查其响应。如果 ping 不成功，请参阅*注释。*

> `e.g: ping 192.168.1.55`

4.  在 USB 调试模式下通过 USB 连接您的 Android 设备。
5.  打开命令提示符并`cd`进入`<Android SDK Folder>\platform-tools`目录并运行以下命令。

> ```
> adb tcpip 5555
> adb connect DEVICE_IP_ADDRESS_HERE:5555 
> ```

6.  如果要切换回 USB 模式，请使用以下命令。

> `adb -s DEVICE_IP_ADDRESS_HERE:5555`

从 USB 断开 Android 设备。如果一切正常，您可以无线调试您的 Android 应用程序！

***笔记：***

*   如果 ping 不成功，请确保无线 (WiFi) 设备和有线设备未***隔离***。如果隔离，则需要禁用隔离。Router Mfgrs 将其称为***AP 隔离***。路由器的无线配置页面会有一个设置。我有 D-Link 路由器，我取消选中*无线基本设置*页面中的**启用 MultiAP 隔离**设置。
**   ***我个人觉得这种连接方法需要更多时间..***所以，我配置了我的 android 设备，使其使用像 192.168.1.55 这样的静态 IP 连接到我的路由器，我制作了一个如下所示的 Windows 批处理文件，*

 *> ```
> @echo off
> cd C:\AndroidSDK\platform-tools\
> echo make sure your your Phone is connected in USB Debugging Mode.
> pause
> adb kill-server
> adb tcpip 5555
> adb connect 192.168.1.55
> pause 
> ```

所以，每次我只需要插入我的设备，然后双击批处理文件，一切都会自动完成：P！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-25T07:52:30.183

*（无需root）* Android Studio 有一种最好的、简单的和带有 UI 的方法

IntelliJ 和 Android Studio 插件旨在通过 WiFi 快速连接您的 Android 设备，以便在不连接 USB 的情况下安装、运行和调试您的应用程序。按一个按钮，忘记您的 USB 数据线。

只需安装插件**Android WiFi ADB**

直接从以下位置下载并安装 Android WiFi ADB

Intellij / Android Studio：**首选项/设置->插件->浏览存储库**

[![在此处输入图像描述](../Images/49fb318eead57f7e878c99fef2037b25.png)](https://i.stack.imgur.com/qXfhW.gif)

[![在此处输入图像描述](../Images/3a3a5e36ee36e5a1f0ad716f1ff9b37a.png)](https://i.stack.imgur.com/ntFYK.png)

.

**记住！**第一次初始化设备，您必须使用 USB 连接

或者，您可以从 JetBrains 插件站点下载插件并在以下位置手动安装：**Preferences/Settings->Plugins->Install plugin from disk。**

有关更多信息，请在此处阅读 [https://github.com/pedrovgs/AndroidWiFiADB](https://github.com/pedrovgs/AndroidWiFiADB)**

# php - 当魔术方法__get和__set在类中定义时PHP函数Empty不起作用

> ID：13901652
> 
> 赞同：5
> 
> 时间：2012-12-16T13:18:28.813
> 
> 标签：php, yii, magic-methods

目前我在 YII 框架中工作，在那里我创建了一个扩展 CFormModel 的类，

在那个类中，我重写了以下函数：

```
public function __get($name)
public function __set($name, $value) 
```

我进行了以下检查以确保 end_date 和 start_date 不为空

```
if(!empty($this->end_date) AND !empty($this->start_date))
{
      **/*Not Working*/**
      /*Some Application Logic*/
} 
```

但它不能正常工作，条件也没有得到满足。当我调试代码时，我知道这一点`$this->start_date`并且`$this->end_date`不是空的。之后，我将检查更改为以下内容：

```
if($this->end_date!='' AND $this->start_date!='')
{
      **/*Working*/**
      /*Some Application Logic*/
} 
```

它按预期工作，但我仍然不明白为什么空函数无法正常工作。是因为魔术方法还是这个问题有什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T13:29:12.093

您必须定义一个神奇的[__isset()](http://php.net/manual/en/language.oop5.overloading.php#object.isset)方法才能使其工作。

```
public function __isset($name) {
    return isset($this->data[$name]);
} 
```

这将触发对无法访问的属性的 isset() 或 empty() 调用。

# javascript - 如何将值推送到多维数组

> ID：13901654
> 
> 赞同：3
> 
> 时间：2012-12-16T13:18:48.683
> 
> 标签：javascript, jquery

我不知道如何将值推送到动态多维数组。这是我的代码：

```
function compareNumbers(){
    var count = $('.finishedRow').length;
    var inputtedNums = new Array();
    for(var i=0; i<count; i++){
        $('.finishedRow').eq(i).find('li').each(function(j){
            inputtedNums[i].push($(this).text());
        });
    }
    console.log(inputtedNums);
} 
```

例如，假设有 3 个`finishedRow`选择器，每个`finishedRow`选择器包含 4 个`li`元素，其值为`first`, `second`, `third`, `fourth`。我希望我的`inputtedNums`变量看起来像：

```
inputtedNums = [
   ["first", "second", "third", "fourth"],
   ["first", "second", "third", "fourth"], 
   ["first", "second", "third", "fourth"] 
] 
```

因为我的代码现在我得到了错误：`Cannot call method 'push' of undefined`.

我敢肯定我在这里遗漏了一些基本的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T13:20:57.283

您需要先初始化每个嵌套数组。

```
for(var i = 0; i < count; i++) {
    inputtedNums[i] = new Array();
    $('.finishedRow').eq(i).find('li').each(function(j) {
        inputtedNums[i].push($(this).text());
    });
} 
```

# c++ - 学习继承

> ID：13901655
> 
> 赞同：0
> 
> 时间：2012-12-16T13:18:51.183
> 
> 标签：c++, inheritance

我正在尝试理解继承，我需要一些帮助来构建两个类。第一个称为 A，第二个称为 B。A 有一个私有整数值“m_a”。它有两个构造函数，默认的一个将 m_a 设置为 5。另一个将一个称为 m 的整数作为参数并将 m_a 的值设置为 m。至于成员函数，它将有两个。第一个将返回 m_a。第二个将打印“Hello from A!”。让我们继续讨论 B。B 将有一个私有字符串 m_s。将 m_s 设置为“asd”或空字符串以外的任何内容的默认构造函数，以及将字符串作为参数并将 m_s 设置为它的值的构造函数。就函数而言，首先 B 将有一个返回 m_s 的函数。它将具有一个与 print "同名的函数

这些是需要的课程。我有以下问题（我将在下面发布我创建的内容）首先，有什么方法可以从基类获取私有数据文件。例如，假设我想获取 m_s 变量，将其添加到另一个变量中并打印出它们的总和。那可能吗 ？（如何）

此外，当我尝试使用与默认构造函数不同的构造函数创建一个类时，我会遇到错误。我显然做错了什么。问题是什么。

我想这些都是我现在的所有问题，所以现在是我发布源代码的时候了。

```
#include <iostream>
#include <string>

using namespace std;

class A
{
private:
    int m_a;
public:
    A(){m_a = 5;}
    A(int m)
    {
        m_a = m;
    }
    void pm()
    {
        cout << "Hello from A!" << endl;
    }
    int get_a()
    {
        return m_a;
    }
};

class B : A
{
private :
    string m_s;
public:
    B(){m_s = "asd";}
    B(string s)
    {
        m_s = s;
    }
    void pm()
    {
        cout << "Hello from B!" << endl;
    }
    string get_s()
    {
        return m_s;
    }
};

int main()
{
     A a(10);
     a.pm();
     cout << a.get_a() << endl;
     B b("asd");
     b.pm();
     cout << b.get_s() << endl;
      cout << b.get_a() << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:28:22.850

问题是您使用的是私有继承：

```
class B : A { 
```

默认情况下，通过类继承是私有的。`public`之前添加`A`。

```
class B : public A { 
```

至于你的其他问题...

> `I want to take the m_s variable, add it to another one and print out their sum.`

这很容易`std::string`。只需创建另一个成员函数：

```
void addTom_s(string s) { m_s += s; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:25:19.007

```
(is that polymorphism ?). 
```

不是你做的方式。如果您有一个指向`A*`实际`B`对象的类型的指针，并且调用该指针正确调用 B 的成员函数，这将是多态性。这只有在 A 中的函数被声明为虚拟函数时`pm`才有可能，如下所示`pm`.

```
class A
{
...
    virtual void pm(){
...
};
...

int main()
{
    A* = new B();
    A->pm(); //"Hello from B!"
} 
```

> 有什么方法可以从基类获取私有数据文件

不确定您在这里的意思-您的示例谈到了派生类的私有字段。通常良好的类设计意味着派生类不需要访问基类的（私有）字段，如果需要，您应该使该字段受到保护。

至于**编译错误**@ArunKumar 得到了它。当你说`Class B : A`你继承自A，但默认情况下所有成员都是私有的，因此，基类构造函数是私有的，所以你不能使用它。

但是，当您说它`Class B : public A`是光谱的另一端时。基类的所有成员在派生类中保留其可访问性（公共保持公共等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T13:26:36.367

尝试更改`class B : A`为`class B : public A`

# android - 如何在状态栏中显示通知？

> ID：13901657
> 
> 赞同：6
> 
> 时间：2012-12-16T13:19:03.653
> 
> 标签：android, android-notification-bar

所以我在我的活动中创建了这个通知

```
Notification n = new Notification.Builder(getApplicationContext())
    .setContentTitle("New mail from " + sender)
    .setContentText(subject)
    .setSmallIcon(R.drawable.notification)
    .build(); 
```

我现在如何在状态/通知栏中显示它以及声音？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:35:05.743

[在 android 开发者网站上](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)有一些很好的文档， 并查看[NotificationManager](http://developer.android.com/reference/android/app/NotificationManager.html)文档

给你，一些代码......：

```
NotificationManager mNotificationManager =
    (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
// mId allows you to update the notification later on.
mNotificationManager.notify(mId, n); 
```

请注意，将您的意图添加到通知中也是一个好主意......

```
mBuilder.setContentIntent(resultPendingIntent); 
```

要添加声音，您可以使用该`Notification.Builder.setSound()`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:47:34.480

> 我现在如何在状态/通知栏中显示它以及声音？

使用[`Notification.Builder.setSound()`](http://developer.android.com/reference/android/app/Notification.Builder.html#setSound%28android.net.Uri%29)方法。

您可以像这样获取默认铃声：

```
Uri uri= RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION); 
```

然后将其设置为通知声音：

```
Notification.Builder(getApplicationContext()).setSound(uri); 
```

然后在您构建通知后，您可以使用以下命令启动它：

```
myNotificationManager.notify(myNotificationId, n); 
```

# unity3d - Unity上导入的基于平铺的地图上的纹理问题

> ID：13901659
> 
> 赞同：1
> 
> 时间：2012-12-16T13:19:09.027
> 
> 标签：unity3d, maya, uv-mapping, roguelike

我正在尝试统一开发一款类似流氓的游戏。因此，我需要一个基于图块的地图。

感谢本教程，我轻松创建了一个 9x9 方形平铺地图。 [http://classes.design.ucla.edu/Winter11/157B/wp-content/uploads/2011/01/BoardGameTutorialPart31.pdf](http://classes.design.ucla.edu/Winter11/157B/wp-content/uploads/2011/01/BoardGameTutorialPart31.pdf)

对于“太长，没看”的家伙，我基本上都是这样做的；

1.  我使用 Adob​​e Illustrator 绘制了一个基于 2D 9x9 方形瓷砖的地图，并将其保存为 Illustrator 8 文件。
2.  我将该 AI 文件导入 Autodesk Maya 并在其上使用 Mesh-> Seperate 工具。之后，我取消了所有瓷砖的父级，并创建了一个基于 3D 瓷砖的地图。我将 .FBX 文件导出到我的统一项目资产文件夹
3.  我将 .FBX 文件从我的 Assets 文件夹中拖放到我的场景中。完毕。

现在，我的问题是，我想在单个图块上应用纹理。然而，每当我尝试将纹理应用到任何图块时，它的行为就像我只使用了 1 / 81 的纹理（请记住，它是一个 9x9 贴图）并且只将纹理的那部分应用到相关图块。

我正在上传截图以便更好地理解。

![在此处输入图像描述](../Images/7fd59fd83069aeddca6331b25595550b.png)

我用谷歌搜索了我的问题，根据我的发现，它正在发生，因为我没有做任何 UV 映射。好吧，问题是我不知道该怎么做（这将是我的第一款游戏，而且我是 3D 建模的超级新手）。只有网络上的示例是关于一般 UV 映射（如何映射立方体或其他一些通用形状）我不知道如何使用 Maya 将 UV 映射到基于图块的贴图。

实际上，即使我不知道这是否是 UV 映射问题。我被困住了。请帮我。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:36:47.277

我解决了我的问题。

我只是在每个图块的 Tile 属性下设置 X = 9 和 Y = 9。现在看起来很完美！

还是非常感谢！

# javascript - 加载 Javascript

> ID：13901668
> 
> 赞同：0
> 
> 时间：2012-12-16T13:20:40.397
> 
> 标签：javascript, html, ajax

到目前为止，这是我的代码，主要问题是有时会在加载主页后加载脚本，使用 AJAX 请求页面并在输出上使用 parseScript，有没有办法让这个函数暂停而不返回在浏览器加载所有脚本之前有什么？

```
function addScriptTag(src) {
    var node = document.getElementsByTagName("head")[0] || document.body;
    if(node){
        var script = document.createElement("script");
        script.type="text/javascript";
        script.src=src
        node.appendChild(script);
    } else {
        document.write("<script src='"+src+"' type='text/javascript'></script>");
    }
}

function parseScript(_source) {
    var source = _source;
    var scripts = source.match(/<script[^>]*src=[^>]*>/g);
    if (scripts) {
    for (var i = 0; i < scripts.length; i++) {
        src = scripts[i].match(/src=("([^"]*)"|'([^']*)')/);
        src = src[2] || src[3];
        if (src) {
            addScriptTag(src);
        }
    }
    }
    var scripts = new Array();

    return source;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:23:13.387

使用 window.onload 或 jquery $(document).ready 然后在里面调用这个函数？或者调用页面底部的函数。

# sql - 对于表中的所有记录，如何保证外键相关表上至少有一条记录？

> ID：13901669
> 
> 赞同：0
> 
> 时间：2012-12-16T13:20:44.160
> 
> 标签：sql, stored-procedures, triggers, foreign-key-relationship

假设数据库中有两个表。第一个是 X，第二个是 Y。Y 表在 X 表上有一个外键。因此，如果 Y 表上有记录，则它的外键相关列值必须存在于 X 表上。这是默认行为。

```
 X         Y
-------   -------
  ID        ID
            XID <--- Foreignkey to X table. 
```

现在，对于 X 表中的所有记录，我想保证 Y 表上必须至少有一条记录。如果没有，它应该自动添加一个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:30:17.960

要将丢失的记录插入`Y`现有数据，您可以运行类似

```
INSERT INTO Y(xid)
SELECT x.id 
FROM x 
WHERE NOT EXISTS(SELECT NULL FROM Y a WHERE a.xid = x.id); 
```

为了以后防止这样的事情发生，写一个在2个表中插入数据的过程，防止大家直接往表中插入数据（只能通过这个过程）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:57:33.037

这里有两个不同的问题。

1.  管理声明性约束。
2.  管理插入、更新和删除。

保证 x 中的每一行在 y 中都存在一行的“正常”方法是在*两个*表中都包含外键。每个表引用另一个。

```
create table x (
  x_id integer primary key,
  y_id integer not null
);

create table y (
  y_id integer primary key,
  x_id integer not null references x (x_id)
);

alter table x
add constraint one_to_one
foreign key (y_id)
  references y (y_id) deferrable initially deferred;

begin transaction;
insert into x values (1, 100);
insert into y values (100, 1);
commit; 
```

虽然这保证了每个“x”都有一个“y”，但可以这么说，它并不能保证每个“x”都有一个*不同*的“y”，或者每个“x”都有自己的“y”。我不确定这是否是您的要求。

这不是您要寻找的*，*因为您的两个表之间存在 1:N 关系。你可以让它工作，但我认为你必须编写一个触发器来管理对表“y”的更改。例如，如果用户从“y”中删除“x”持有外键引用的行，则需要更新“x”以引用“y”中的不同行。

但这会导致第二个问题：管理插入、更新和删除。有几种方法可以做到这一点。

*   客户端负责提供保持数据库一致所需的所有语句。（除了上面的外键问题，最好在“y”的触发器中处理。）
*   客户端无法直接访问基表。所有更改都是通过存储过程进行的。
*   客户端无法直接访问基表。所有更改都通过可更新的视图进行。

存储过程和可更新视图可以让您在一定程度上自动在“y”中添加一行，但您必须编写程序代码才能做到这一点。

# c++ - C++ 变量未正确实例化

> ID：13901671
> 
> 赞同：0
> 
> 时间：2012-12-16T13:21:09.633
> 
> 标签：c++

```
Sprite1 *test = new Sprite1(450, 450, "enemy.bmp", *screen);
    test->DrawJon();
    SDL_Delay(1000);
    test->MoveJon(20,20); 
```

我在第 2 行遇到运行时错误。它说在 0x0 的访问冲突

Sprite1 是我定义的一个类和类中的 DrawJon() 和 MoneJon()。这种语法在编译器中是可以的，但在运行时失败。

Sprite1.cpp

```
#include "Sprite1.h"

Sprite1::Sprite1(int posX, int posY, std::string imagePath, SDL_Surface screen) :     PosX(posX), PosY(posY), ImagePath(imagePath), Screen(screen)
{
void DrawSprite1Jon( int x, int y, SDL_Surface *sprite, SDL_Surface *screen );
void DrawJon();
void MoveJon(int xDist, int yDist);
}

void Sprite1::DrawSprite1Jon( int x, int y, SDL_Surface *sprite, SDL_Surface *screen )
{
//Make a temporary rectangle to hold the offsets
SDL_Rect offset;

//Give the offsets to the rectangle
offset.x = x;
offset.y = y;

//Blit the surface
SDL_BlitSurface( sprite, NULL, screen, &offset );

SDL_UpdateRect(screen, 0, 0, 0, 0);
}

void Sprite1::DrawJon()
{
#pragma region Char to String Conversion

string ImagePath;
char * writable = new char[ImagePath.size() + 1];
copy(ImagePath.begin(), ImagePath.end(), writable);
writable[ImagePath.size()] = '\0';

#pragma endregion

temp = SDL_LoadBMP(writable);
sprite = SDL_DisplayFormat(temp);
SDL_FreeSurface(temp);

// free the string after using it
delete[] writable;

DrawSprite1Jon(PosX, PosY, sprite, screen);
} 
```

Sprite1.h

```
#include <string>
#include <SDL.h>
#include "Functions.h"

using namespace std;

class Sprite1
{
private:
    int PosX;
    int PosY;
    int xDist;
    int yDist;
    string ImagePath;
    SDL_Surface Screen;
    SDL_Surface *temp, *sprite, *screen;

public:
    Sprite1(int PosX, int PosY, string ImagePath, SDL_Surface Screen );
    void DrawSprite1Jon( int x, int y, SDL_Surface *sprite, SDL_Surface *screen);
    void DrawJon();
    void MoveJon(int xDist, int yDist);
}; 
```

# 编辑：

经过进一步调查，是这条线

```
DrawSprite1Jon(PosX, PosY, sprite, screen); 
```

这在 DrawJon() 中失败了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:49:06.757

*至少*你的这段代码被破坏了：

```
string ImagePath;
char * writable = new char[ImagePath.size() + 1];
copy(ImagePath.begin(), ImagePath.end(), writable);
writable[ImagePath.size()] = '\0'; 
```

您正在创建本地 ImagePath 变量，而不是使用类成员变量。局部变量*隐藏*成员变量。删除局部变量（上面代码段中的第一行）。

此外，您可能（我对 SDL 不是很熟悉）可以像这样简单地进行加载：

```
temp = SDL_LoadBMP(ImagePath.c_str()); 
```

然后，只是猜测，但图像加载可能会失败，并且该函数返回 NULL 指针。所以检查返回值然后检查错误（要么有一些 SDL 错误函数你可以调用，或者你需要检查标准 errno 全局变量。

进一步建议：打开编译器警告（对于 gcc：-W -Wall）并学习理解（将警告复制到 google 是一个好的开始），然后修复警告。大多数时候它们是真正的错误（因此警告！），即使它们不是，修复警告也会使您的代码更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:47:37.607

我的实现存在一些问题，但最后我不得不在发布模式而不是调试模式下构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:34:12.813

我很明显你刚刚开始用 C++ 编程，也许你有 javascript 背景，因此你试图将函数声明放入构造函数中。这是一个错误的想法。( `#pragma`'s 通常有一些明确的含义，你也在这里误用它们。[参见例如。`#pragma GCC poison`](http://gcc.gnu.org/onlinedocs/cpp/Pragmas.html) )

我在这段代码中看到了很多混乱。

我建议，在继续编写这段代码之前，你先拿一[本高质量的初学者 C++ 书。](http://www.stroustrup.com/Programming/)在这一点上，我认为没有理由试图从这段代码中找出一些合理的东西。

# c++ - openmp g++ 错误：折叠的循环没有完美嵌套

> ID：13901673
> 
> 赞同：2
> 
> 时间：2012-12-16T13:21:18.283
> 
> 标签：c++, gcc, openmp

我尝试编译

```
#include <omp.h>

using namespace std;

vector< vector<int> > multiplyMatrixes(const vector< vector<int> > &a, const vector<     vector<int> > &b, int aHeight, int aWidth, int bHeight, int bWidth) {
    vector < vector<int> > c(aHeight, vector<int>(bWidth, 0));
    #pragma omp parallel for collapse(2)
    for(int row = 0; row < aHeight; row++) {
            for(int col = 0; col < bWidth; col++) {
                   int value = 0;
                   for(int i = 0; i < aWidth; i++) {
                          value += a[row][i] * b[i][col];
                   }
                   c[row][col] = value;
                   cout<<"Tread #"<<omp_get_thread_num()<<"\n";
            }
            std::cout<<'\n';
    }
    return c;
}

int main() {} 
```

使用 'g++ -fopenmp hello.cpp -o hello' 命令，gcc 版本是 4.7，但我得到以下 'hello.cpp:19:17: 错误：折叠的循环不完全嵌套' 这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:44:29.830

谷歌搜索错误发现“循环必须完全嵌套；也就是说，折叠的循环之间没有干预代码或任何 OpenMP 编译指示”

我认为这意味着不允许使用 for(i) 循环之前和之后的代码。

# java - 无法使用 @EJB 在 WAR 应用程序中实例化我的对象

> ID：13901674
> 
> 赞同：2
> 
> 时间：2012-12-16T13:21:47.877
> 
> 标签：java, jsp, ejb, java-ee-6

我正在学习 Java EE 和 JSP。我在 NetBeans 中创建了一个企业应用程序项目。我有`EJB project`所有 bean 所在的位置以及`WAR project`所有 Web/客户端内容所在的位置。我的问题是注释`@EJB`没有在 WAR 应用程序中实例化我的 Bean。我可以`@EJB`在 EJB 应用程序之外使用吗？

在 EJB 项目中，我有这些文件：
CustomerRemote.java

```
@Remote
public interface CustomerRemote {
    public Customer createCustomer();
    public Customer getCustomer(int customerId);
    public void removeCustomer();
} 
```

CustomerBean.java

```
@Stateless
public class CustomerBean implements CustomerRemote {

    @PersistenceContext(unitName="testPU")
    private EntityManager entityManager;

    @Override
    public Customer createCustomer() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void removeCustomer() {        
    }

    @Override
    public Customer getCustomer(int customerId) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

在 WAR 项目中，我有一个文件，我的 JSP 页面用它来与 EJB 进行通信。问题是 CustomerRemote 对象永远不会被实例化。@EJB 注释似乎不起作用，因为`customerRemote`始终为空。但是当使用该`lookup`方法实例化它时，它可以工作！那么为什么不起作用`@EJB`呢？

```
public class CustomerProxyBean {

@EJB
private CustomerRemote customerRemote;

public CustomerProxyBean() {        
//    try {
//        InitialContext context = new InitialContext();
//        customerRemote = (CustomerRemote)context.lookup("java:app/SimpleShop-ejb/CustomerBean");
//        
//    } catch (NamingException ex) {
//        Logger.getLogger(CustomerProxyBean.class.getName()).log(Level.SEVERE, null, ex);
//    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:36:30.767

`@EJB`注释仅在您的类是容器管理的情况下才有效，即 EJB、servlet、JSP... 在您的情况下，您将其放入普通的旧 Java 对象 (POJO) 中，因此注入将不起作用，正如您所经历的那样。将您的 CustomerProxyBean 编写为无状态会话 bean，您将看到更改。

或者，如果您出于某种原因想要避免 JNDI，您可以使用 CDI 和`@Inject`注释来注入 EJB 并实现所需的行为，即使在 POJO 中也是如此：

```
@Inject
private CustomerRemote customerRemote; 
```

# jquery - 谷歌分析是否计算 Ajax 请求？

> ID：13901677
> 
> 赞同：4
> 
> 时间：2012-12-16T13:22:22.380
> 
> 标签：jquery, ajax, google-analytics

准备好文档后，我使用此脚本

```
jQuery.ajax({
    url:"http://www.other_web_site.com/",
    type:'POST',
    success: function(data) {
       // do nothing
    }
}) 
```

www.other_web_site.com 正在使用谷歌分析。谷歌分析会记录 +1 访问？

如果没有，我怎么能让他知道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:26:04.177

在严重依赖 JavaScript 的 Web 应用程序中，它无法收集有关 AJAX 事件的完整信息，但有一些教程介绍了如何手动将数据推送到 Google Analytics 以跟踪此类事件。

[本教程](http://www.sitepoint.com/google-analytics-track-javascript-ajax-events/)可能很有用。

此外，来自 Google 的[这篇文章](https://developers.google.com/analytics/devguides/collection/gajs/)解释了更多关于如何连接跟踪 AJAX 事件的信息（请参阅推送函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:26:16.763

谷歌分析将计算它。但是，应该按照您的描述请求它，其中所有页面都被访问。

# sql - 在触发器中重建全文索引

> ID：13901679
> 
> 赞同：1
> 
> 时间：2012-12-16T13:22:27.907
> 
> 标签：sql, sql-server, full-text-search

我需要在 SQL Server 表上有一个全文索引，客户希望在更新记录后立即更新索引。我想最好的办法是把这个触发器添加到桌面上......

```
CREATE TRIGGER TR_Section_InsUpd ON dbo.[Section] AFTER INSERT, UPDATE AS

ALTER FULLTEXT CATALOG TUG REBUILD WITH ACCENT_SENSITIVITY = OFF

GO 
```

但是当这被触发时，我被告知我无法在用户事务中重建目录。谁能告诉我如何实现我的目标？每隔几分钟进行一次预定的索引重建似乎是个坏主意，因为表不会经常更新，但是当更新时，他们希望全文索引中的更改尽快可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:43:40.860

创建更新表，例如：

> CREATE TABLE IndexUpdates (TableName NVARCHAR(255), UpdateIndex BIT)

让您的触发器将相关条目更新为 1。现在有一个每两分钟运行一次的作业，查看表是否已更新并让作业重建索引。完成后，将 UpdateIndex 重置为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:41:34.023

使用自动更改跟踪创建 FULLTEXT 索引。 [http://msdn.microsoft.com/en-us/library/ms187317.aspx](http://msdn.microsoft.com/en-us/library/ms187317.aspx)

```
CREATE FULLTEXT INDEX on myTable (myColumn) WITH (CHANGE_TRACKING = AUTO) 
```

效果很好，没有触发器。

# android - 在 GridView 中更改复选框的状态

> ID：13901680
> 
> 赞同：0
> 
> 时间：2012-12-16T13:22:33.557
> 
> 标签：android, android-imageview, android-gridview, android-adapter, android-checkbox

我有一个带有自定义项目的 GridView：一个 ImageView 和一个 Checkbox。我想在 ImageView 上设置 OnClickListener，以在单击图像时选中/取消选中复选框的状态。

这是 gridView 的适配器：

```
public class ProductAdapter extends ArrayAdapter<Product>{
    Context context;
    int layoutResourceId;
    Product datap[];

    public ProductAdapter(Context context, int layoutResourceId, Product datap[]){
        super(context, layoutResourceId, datap);
        this.context = context;
        this.layoutResourceId = layoutResourceId;
        this.datap = datap;
}

@Override
public View getView(int position, View convertView, ViewGroup parent){
    View row = convertView;
    ProductHolder holder = null;
    if(row == null){
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);
        holder = new ProductHolder();
        holder.imgIcon = (ImageView)row.findViewById(R.id.gviv);
        holder.den = (TextView)row.findViewById(R.id.gvtv1);
        holder.pretN = (TextView)row.findViewById(R.id.gvtv2);
        holder.pretV = (TextView)row.findViewById(R.id.gvtv3);
        holder.cb = (CheckBox)row.findViewById(R.id.gcb);
        row.setTag(holder);
    }else{
        holder=(ProductHolder)row.getTag();
    }
    Product product = datap[position];
    holder.denumire.setText(product.den);
    holder.imgIcon.setImageResource(product.icon);
    holder.imgIcon.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // THIS DOESN'T WORK!!!!!
            holder.cb.setChecked(true);

        }
    });

    holder.pretN.setText(product.pretN);
    holder.pretV.setText(product.pretV);
    return row;

}

static class ProductHolder{
    ImageView imgIcon;
    TextView den;
    TextView pretN;
    TextView pretV;
    CheckBox cb;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:55:31.533

`notifyDataSetChanged();`在您的检查命令之后调用。

```
 public void onClick(View v) {
            // THIS DOESN'T WORK!!!!!
            holder.cb.setChecked(true);
            notifyDataSetChanged();
        } 
```

# eclipse-plugin - Cloudfondry Eclipse 插件添加现有应用程序

> ID：13901681
> 
> 赞同：0
> 
> 时间：2012-12-16T13:22:34.777
> 
> 标签：eclipse-plugin, cloud-foundry

我在 cloudfoundry 上部署了一个现有的 spring 应用程序，从一台 PC 部署。现在，我在另一台 PC 上使用我的项目设置了 Eclipse，并通过 Cloudfoundry Eclipse 插件添加了我现有的 cloudfoundry 部署。问题是我部署的应用程序的 CF 服务器没有与我的本地 eclipse 项目同步，所以我无法从我的项目中部署任何更改。

添加 Cloudfoundry 服务器后，有什么方法可以进行同步吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:17:01.417

cloudfoundry 部署方法不会自动（动态）保持两个 Eclipse 环境之间的同步。您可以使用源代码控制方法，将您的版本从一个 Eclipse 环境推送到 github，并通过克隆它并将项目导入到一个或其他 Eclipse 环境中，将其用作同步机制。

# jquery - HTML5 音频：使用 jQuery 获取文件类型

> ID：13901684
> 
> 赞同：0
> 
> 时间：2012-12-16T13:22:43.597
> 
> 标签：jquery, html5-audio

如何获取音频源的文件类型（例如“ogg”）？

```
$('.html5audio').each(function(index) {
    var $play = $(this),
        file = this.firstChild,
        type = file.attr('src').replace(/\.([a-zA-Z0-9]+)$/g, $1);

    $play.append('(' + type + ')');
}); 
```

似乎`file = this.firstChild`无法正常工作，但这是播放文件所必需的。

测试：http: [//jsfiddle.net/4jPKH/3/](http://jsfiddle.net/4jPKH/3/)

# c# - 正则表达式错误输入字符串的格式不正确

> ID：13901687
> 
> 赞同：0
> 
> 时间：2012-12-16T13:22:51.080
> 
> 标签：c#, regex

大家好，我有字符串`<span class="lnk">Участники&nbsp;<span class="clgry">59728</span></span>` 我解析它

```
string population = Regex.Match(content, @"Участники&nbsp;<span class=""clgry"">(?<id>[^""]+?)</span>").Groups["id"].Value;
int j = 0;
if (!string.IsNullOrEmpty(population))
{
    log("[+] Группа: " + group + " Учасники: " + population + "\r\n");
    int population_int = Convert.ToInt32(population);
    if (population_int > 20000)
    {
        lock (accslocker)
        {
        StreamWriter file = new StreamWriter("opened.txt", true);
        file.Write(group + ":" + population + "\r\n");
        file.Close();
    }
    j++;
} 
```

}

但是当我的字符串是`><span class="lnk">Участники&nbsp;<span class="clgry"></span></span>`我收到一个扩展“输入字符串的格式不正确”。如何避免？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:28:09.393

代替 Regex 使用真正的 html 解析器来解析 html。（例如，[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)）

```
string html = @"<span class=""lnk"">Участники&nbsp;<span class=""clgry"">59728</span>";
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var list = doc.DocumentNode.SelectNodes("//span[@class='lnk']/span[@class='clgry']")
              .Select(x => new
              {
                  ParentText = x.ParentNode.FirstChild.InnerText,
                  Text = x.InnerText
              })
              .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:47:42.447

尝试使用正则表达式解析 html 内容并不是一个好的决定。看到[这个](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。请改用[Html Agliliy Pack](http://htmlagilitypack.codeplex.com/)。

```
var spans = doc.DocumentNode.Descendants("span")
               .Where(s => s.Attributes["class"].Value == "clgry")
               .Select(x => x.InnerText)
               .ToList(); 
```

# database - ABAP数据集群如何存储在数据库中？

> ID：13901689
> 
> 赞同：4
> 
> 时间：2012-12-16T13:22:59.623
> 
> 标签：database, abap

可以使用`import`和`export`语句将数据集群存储在数据库中，以及一个遵循模板的字典表（至少具有字段`MANDT, RELID, SRTFD, SRTF2, CLUSTR, CLUSTD`）。

这是两个示例语句，它们使用字典 table和 area将整个内部表存储/检索`ta_test`为数据库中具有 name`testtab`和 id的数据集群`TEST``ztest``AA`

```
export testtab = ta_test to database ztest(AA) id 'TEST'.
import testtab = ta_test from database ztest(AA) id 'TEST'. 
```

查看表的内容`ztest`，我看到以下记录（前 4 个字段是主键）：

```
MANDT   200
RELID   AA
SRTFD   TEST
SRTF2   0 (auto-incremented for each record)
CLUSTR  integer value with a maximum of 2.886
CLUSTD  a 128 character hexadecimal string 
```

我还注意到，以这种方式存储的数据量远远少于内部表中的数据（例如，内部表中的 1.000.000 条唯一记录导致表中只有 1.703 条记录`ztest`）。`compression off`对语句的设置`export`确实增加了记录的数量，但仍然少了很多。

我的问题：有人知道这是如何工作的吗？实际数据是否存储在其他地方并且`ztest`包含指向它的指针？压缩？加密？是否可以直接从数据库访问实际数据（跳过 ABAP 层）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:23:02.530

数据集群的内部格式没有记录（至少没有在官方文档中）。根据我的经验，它确实包含整个数据而不仅仅是指针：将表条目传输到不同的系统——就像传输 ALV 列表布局时经常做的那样——足以移动内容。此外，二进制 blob 似乎不包含有关数据结构的太多信息 - 如果以不兼容的方式更改源/目标结构，则可能会丢失数据。从数据库层直接访问是不可能的（这实际上在整个文档的许多地方都有说明）。可能可以对编组/解组算法进行逆向工程，但是当您有语言语句来访问手头的内容时，为什么还要麻烦呢？

# c# - 即使使用静态委托也检测到 CallbackOnCollectedDelegate

> ID：13901691
> 
> 赞同：0
> 
> 时间：2012-12-16T13:23:34.307
> 
> 标签：c#, delegates, unmanaged, aforge, keyboard-hook

**这是键盘挂钩代码：**

```
 class globalKeyboardHook
        {
            #region Constant, Structure and Delegate Definitions

            public delegate int keyboardHookProc(int code, int wParam, ref keyboardHookStruct lParam);
            public static keyboardHookProc callbackDelegate;

            public struct keyboardHookStruct
            {
                public int vkCode;
                public int scanCode;
                public int flags;
                public int time;
                public int dwExtraInfo;
            }

            const int WH_KEYBOARD_LL = 13;
            const int WM_KEYDOWN = 0x100;
            const int WM_KEYUP = 0x101;
            const int WM_SYSKEYDOWN = 0x104;
            const int WM_SYSKEYUP = 0x105;
            #endregion

            #region Instance Variables

            public List<Keys> HookedKeys = new List<Keys>();
            private static IntPtr hhook = IntPtr.Zero;

            #endregion

            #region Events

            public event KeyEventHandler KeyDown;
            public event KeyEventHandler KeyUp;

            #endregion

            #region Constructors and Destructors

            public globalKeyboardHook()
            {
                hook();
                GC.KeepAlive(callbackDelegate);
            }

            ~globalKeyboardHook()
            {
                unhook();
            }

            #endregion

            #region Public Methods

            public void hook()
            {
                IntPtr hInstance = LoadLibrary("User32");
                callbackDelegate = new keyboardHookProc(hookProc);
                hhook = SetWindowsHookEx(WH_KEYBOARD_LL, callbackDelegate, hInstance, 0);
                if (hhook == IntPtr.Zero) throw new Win32Exception();
            }

            public void unhook()
            {
                bool ok = UnhookWindowsHookEx(hhook);
                if (!ok) throw new Win32Exception();
                callbackDelegate = null;
            }

            public int hookProc(int code, int wParam, ref keyboardHookStruct lParam)
            {
                if (code >= 0)
                {
                    Keys key = (Keys)lParam.vkCode;
                    if (HookedKeys.Contains(key))
                    {
                        KeyEventArgs kea = new KeyEventArgs(key);
                        if ((wParam == WM_KEYDOWN || wParam == WM_SYSKEYDOWN) && (KeyDown != null))
                        {
                            KeyDown(this, kea);
                        }
                        else if ((wParam == WM_KEYUP || wParam == WM_SYSKEYUP) && (KeyUp != null))
                        {
                            KeyUp(this, kea);
                        }
                        if (kea.Handled)
                            return 1;
                    }
                }
                return CallNextHookEx(hhook, code, wParam, ref lParam); // Exception on this line
            }
            #endregion

            #region DLL imports

            [DllImport("user32.dll")]
            static extern IntPtr SetWindowsHookEx(int idHook, keyboardHookProc callback, IntPtr hInstance, uint threadId);

            [DllImport("user32.dll")]
            static extern bool UnhookWindowsHookEx(IntPtr hInstance);

            [DllImport("user32.dll")]
            static extern int CallNextHookEx(IntPtr idHook, int nCode, int wParam, ref keyboardHookStruct lParam);

            [DllImport("kernel32.dll")]
            static extern IntPtr LoadLibrary(string lpFileName);
            #endregion
        } 
```

**当我首先在子表单构造函数中初始化它时，什么也没有发生，你可以按你想要的，但没有任何事件发生：**

```
private globalKeyboardHook kh = new globalKeyboardHook();

public FrmMainForm(FrmVideo owner)
        {
            InitializeComponent();
            _videoForm = owner;

            try
            {
                _videoDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);

                if (_videoDevices.Count == 0)
                {
                    throw new ApplicationException();
                }

                foreach (FilterInfo device in _videoDevices)
                {
                    camerasCombo.Items.Add(device.Name);
                }

                camerasCombo.SelectedIndex = 1;
            }
            catch (ApplicationException)
            {
                camerasCombo.Items.Add("No local capture devices");
                _videoDevices = null;
            }

            kh.KeyUp += new KeyEventHandler(kh_KeyUp);
            kh.hook();
        }

    void kh_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.F12)
            _videoForm.TakeOver = !_videoForm.TakeOver;

        if (e.KeyCode == Keys.Escape)
            Application.Exit();
    } 
```

**在我调用一段 Aforge 代码以从网络摄像头捕获之前，这开始在父表单上流式传输：**

```
 var videoSource = new VideoCaptureDevice(_videoDevices[camerasCombo.SelectedIndex].MonikerString)
        {
            DesiredFrameSize = new Size(Globals.FrameWidth, Globals.FrameHeight),
            DesiredFrameRate = 12
        };

        if (videoSource != null)
        {
            _videoForm.Device = videoSource;
            _videoForm.Start();
            button1.Enabled = false;
        } 
```

**之后在任何按键上我得到：CallbackOnCollectedDelegate 在返回下一个钩子时被检测到，有什么想法吗？**

哦，我正在取消处理表单：

```
 protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            kh.unhook();
            base.Dispose(disposing);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:32:32.773

这需要进行心理调试并推断出您没有记录的内容。奇怪的是，当您调用 CallNextHookEx() 时会触发 MDA。这有点奇怪，你的钩子程序的回调实际上起作用了。未收集该委托对象。这是*下一个*失败的钩子过程调用。

对此有一个简单的解释：您不止一次调用了 SetWindowsHookEx()。现在使用静态变量来存储委托对象会严重咬人，因为静态变量通常会这样做，它只能存储*一个*委托对象。第二次调用 hook() 时，它将覆盖第一个 hook 的委托，因此不再阻止它收集垃圾。这确实触发了 CallNextHookEx() 上的 MDA，因为这将为第一个钩子调用钩子过程。

所以你的 hook() 方法需要改进为：

```
public void hook()
{
    if (callbackDelegate != null) 
        throw new InvalidOperationException("Cannot hook more than once");
    // etc..
} 
```

实际上，多次挂钩并不违法，Windows 并不介意。只是不要将变量声明为静态。

# google-plus - 使用 Web Audio API 访问 YouTube 直播

> ID：13901696
> 
> 赞同：2
> 
> 时间：2012-12-16T13:24:12.187
> 
> 标签：google-plus, html5-audio, youtube-javascript-api, web-audio-api

是否可以在 Javascript 和 Web Audio API 中访问 YouTube 直播内容（视频/音频），例如实时混合音频内容？

有效负载 HTML5 兼容还是仅 Flash？

... 还是通过 CORS 或许可条款限制对这些流的访问？

在我的情况下，将在 Google Hangout [http://www.google.com/+/learnmore/hangouts/onair.html中创建直播流](http://www.google.com/+/learnmore/hangouts/onair.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:35:28.073

您只能访问 HTML5 流的内容，当然我希望将来加密流无法使用此功能。环聊现在使用插件，所以你不能这样做。

# java - 为什么没有找到适合 mysql 消息的驱动程序？

> ID：13901701
> 
> 赞同：1
> 
> 时间：2012-12-16T13:24:46.023
> 
> 标签：java, mysql, sql, jdbc

这是我的代码片段，

```
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Statement;

public class Delete
{
    public static void main(String args[])
    {
        try
        {
            Class.forName("com.mysql.jdbc.Driver");

            Connection con = DriverManager.getConnection("mysql:jdbc://localhost:3306/raja","root","459805");
            Statement stmt=con.createStatement();
            int count=stmt.executeUpdate("DELETE GENNU WHERE USER_ID=3;");
            if(count>0)
                System.out.println(" Ok Deletion done");
        }
        catch(ClassNotFoundException e)
        {
            System.out.println(e.getMessage());
        }
        catch(SQLException e)
        {
            System.out.println(e.getMessage());
        }
    }
} 
```

当我执行它时，我得到了这样的结果。 ![在此处输入图像描述](../Images/52280a8d4a66da5d5722170971f6eeec.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:26:36.503

实际上，您的陈述中有错误`DELETE`，您缺少`FROM`关键字。它应该是

```
DELETE FROM GENNU WHERE USER_ID=3 
```

看到错误，它指向`DELETE`.

**更新 1**

试试，`jdbc:mysql`不`mysql:jdbc`

```
Class.forName("com.mysql.jdbc.Driver");
connect = DriverManager.getConnection("jdbc:mysql://localhost:3306/raja"
              + "user=root&password=459805"); 
```

*   [MySQL 和 JAVA JDBC](http://www.vogella.com/articles/MySQLJava/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:30:07.590

尝试

```
Class.forName("com.mysql.jdbc.Driver").newInstance(); 
```

[文档](http://dev.mysql.com/doc/refman/5.0/en/connector-j-usagenotes-connect-drivermanager.html)说：

```
 // The newInstance() call is a work around for some
        // broken Java implementations

        Class.forName("com.mysql.jdbc.Driver").newInstance(); 
```

此外，URL 应该是

```
jdbc:mysql://localhost/3306/raja 
```

并不是

```
mysql:jdbc://localhost/3306/raja 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:26:27.450

您需要 mySQL Java 连接器。您可以在此处的下载页面找到：

[https://www.mysql.com/products/connector/](https://www.mysql.com/products/connector/)

# c# - 如何提高网络摄像头视频输入的帧率？恩古简历

> ID：13901704
> 
> 赞同：3
> 
> 时间：2012-12-16T13:25:08.653
> 
> 标签：c#, image-processing, emgucv, frame-rate

我正在使用 emgu CV 和 C# 并在捕获/显示网络摄像头视频时获得低 FPS（约 8fps）！到目前为止，这是我尝试过的：我还必须应用一些过滤器，我怎样才能让我的代码更有效率？有没有办法使用 GPU 处理这些帧？

```
 private Capture _capture;
    private bool _captureInProgress;
    private Image<Bgr, Byte> frame;
    private void ProcessFrame(object sender, EventArgs arg)
    {
        frame = _capture.QueryFrame();
        captureImageBox.Image = frame;

    }

    private void startToolStripMenuItem_Click(object sender, EventArgs e)
    {
        #region if capture is not created, create it now
        if (_capture == null)
        {
            try
            {
                _capture = new Capture();
            }
            catch (NullReferenceException excpt)
            {
                MessageBox.Show(excpt.Message);
            }
        }
        #endregion

        Application.Idle += ProcessFrame;

        if (_capture != null)
        {
            if (_captureInProgress)
            {
                //stop the capture

                startToolStripMenuItem.Text = "Start";
                Application.Idle -= ProcessFrame;
            }
            else
            {
                //start the capture
                startToolStripMenuItem.Text = "Stop";
                Application.Idle += ProcessFrame;
            }

            _captureInProgress = !_captureInProgress;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:55:52.187

问题是您正在处理 Application.Idle 回调上的帧，该回调只是每隔一段时间才会调用一次。替换此行

`Application.Idle += ProcessFrame`

和

`_capture.ImageGrabbed += ProcessFrame`

它应该可以工作。每次帧可用时都会调用此回调。

# c# - 自定义实体框架生成的模型类

> ID：13901708
> 
> 赞同：2
> 
> 时间：2012-12-16T13:25:20.890
> 
> 标签：c#, entity-framework-4.1

我有一个需要为我的模型继承的基类

喜欢

```
public class Employee : BaseModel
{

} 
```

在这个 BaseModel 中，我有几个属性和一些默认实现，它们需要可用于创建的每个应用程序模型。

当我计划迁移到实体框架时，如何让使用 EF 生成的模型也具有来自 BaseModel 的方法和属性。

但是，我已经从生成的类中删除了 EntityObject 并在每个属性中注释掉了它的相关实现，例如

```
 //ReportPropertyChanging("id");
                    //_id = StructuralObject.SetValidValue(value);
                    //ReportPropertyChanged("id"); 
```

请建议这是否是正确的方法，或者是否有正确的方法来处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:10:48.527

挑剔的**OO 纯粹主义者**说：为您的域中的所有类拥有一个基类是一种反模式。遵循 OO 原则的类（如单一职责，Liskow）不可能都具有相同的基类。在不知道您的基类的情况下，我敢打赌，通用属性与通用数据库字段或某些实体框架实现有关，因此基类也打破了持久性无知。

**实体框架大师**（谁？？？）说：你最好不要在工作数据库优先时使用基类。或者：当你真的想要一个基类时：首先工作代码并忽略映射中的基类，即不要映射继承。请注意，DbContext API 是首选的 EF API（但您也可以使用 db-first）。

**实用主义者**说：如果可行，请使用接口。每个类都必须一次又一次地实现它是一件令人讨厌的事情，但您不会违反 OO 原则。原则的存在是有原因的。迟早，打破它们会妨碍（但可能不会抑制）你。

# c++ - 事件 vs boost::function

> ID：13901716
> 
> 赞同：1
> 
> 时间：2012-12-16T13:26:33.080
> 
> 标签：c++, events, boost

既然代码胜于雄辩，你会用这个：

```
struct StringEvent
{
    const void* source;
    const std::string str;

    StringEvent(const void* source, const std::string& str)
        : source(source), str(str) 
    { }
};

class StringEventListener
{
public:
    virtual void handler(const StringEvent& event) = 0;
}

class Test : public StringEventListener
{
public:
    void handler(const StringEvent& event) 
    { 
        std::cout << event.str << std::endl; 
    }
}

class EventSource
{
public:
    EventSource(StringEventListener* listener) 
    { 
        listener->handler(StringEvent(this, std::string("foo"))); 
    } 
}

int main()
{
    Test test;

    EventSource(&test);
} 
```

在这个？

```
class Test 
{
public:
    void handler(const std::string& str) 
    { 
        std::cout << str << std::endl; 
    }
};

class EventSource
{
public:
    EventSource(const boost::function<void (const std::string&)>& funcPtr)
    {
        funcPtr(std::string("foo"));
    }
};

int main()
{
    Test test;

    EventSource(boost::bind(&Test::handler, &test, _1));
} 
```

使类 EventSource 调用`test.handler("foo")`？

来自 Java/C# 世界，我发现第一种方法更直观，虽然很冗长，但是否建议在现实生活中使用，还是会导致比其价值/性能损失更多的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:40:57.230

我绝对不会使用第一个版本。这太可怕了。第二个版本要好得多——它也可以是 lambdas 之类的。

另外，`boost::function`不是函数指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:38:02.213

IMO，您可以将“函子”（具有静态方法的对象）与 Boost/C++ 一起使用，而不是完整的对象来保存回调数据和回调对象（在您之前的示例中）。

这是风格问题，如果您需要对象来传递数据。

# prolog - SWI Prolog 多个知识库

> ID：13901717
> 
> 赞同：2
> 
> 时间：2012-12-16T13:26:32.967
> 
> 标签：prolog, swi-prolog

在我的应用程序中，我有许多代理，每个代理都有自己的知识库。
我最初的想法是拥有多个引擎实例，但 swi prolog 最多允许一个实例。
另一种方法是在每个事实和规则中添加一个表示代理 id 的附加术语，但这似乎很麻烦。

例如，而不是：

```
position(10, 20).
do(action(X)):-... 
```

我不得不到处写：

```
position(agent0, 10, 20).
do(Agent, action(X)):-... 
```

因为我会一次更新一个代理，即使每次都保存和恢复所有内容也可能没问题，即使我不知道该怎么做。还是使用模块？
分离不同知识库的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:43:47.897

我认为您建议将原子 ID 添加到您的事实以识别它对应的代理是一个不错的建议，但同意回想起来添加到您的代码中可能会很麻烦。

这里有一些其他的建议，大致按照我的喜好排列......

1.  使用[记录的数据库](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.13%27,swi%28%27/doc/Manual/db.html%27%29%29)。有了这个，您实际上可以使用原子键记录事实，因此可以推测，您可以使用[`recorda/3`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.13%27,swi%28%27/doc/Manual/db.html%27%29%29)and like 谓词分别使用代理 ID 记录每个代理的事实，然后使用[`recorded/2,3`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.13%27,swi%28%27/doc/Manual/db.html%27%29%29)来检索它们。几乎正是您想要的。
2.  使用[模块](http://www.swi-prolog.org/pldoc/doc_for?object=section%281,%275%27,swi%28%27/doc/Manual/modules.html%27%29%29)。大概您可以简单地为每个代理创建新的模块名称，从而分离每个代理的事实，就像使用命名空间的方式一样。例如，断言`agent0:position(10,20)`.
3.  [`assert/2`](http://www.swi-prolog.org/pldoc/man?predicate=assert/2)使用返回子句引用明确跟踪您为每个代理断言的事实。通过保留一个引用列表来标识为特定代理断言的所有事实，您可以使用[`erase/1`](http://www.swi-prolog.org/pldoc/man?predicate=erase/1). 请注意，将子句引用与[`clause/3`](http://www.swi-prolog.org/pldoc/doc_for?object=clause/3)通过它们的引用一起检索子句的组合使用[`retract/1`](http://www.swi-prolog.org/pldoc/doc_for?object=retract/1)可能会收回属于其他代理的类似子句。
4.  根据您的程序的结构，您可以简单地传递一个包含每个代理的所有事实的大型数据结构，例如：`[agent0-[fact1(..), fact2(..), ...], agent1-[...], ...]`并随时更新该术语。请注意，这不如使用数据库本身高效，因为它需要对特定事实进行大量线性扫描；不能使用哈希查找。

# jquery - 使用 jQuery 选择器遍历 DOM 树

> ID：13901722
> 
> 赞同：2
> 
> 时间：2012-12-16T13:27:01.480
> 
> 标签：jquery

我需要一个 jQuery 选择器来定位`FooClass`和`BarClass`通过 `#MainSelector`

```
<div id='MainSelector1'>
    <fieldset>
        <legend>Toto</legend>
            <div class='section'>
                <label>Koko</label>
            <div>
                <input type='text' id='KokoId'>
            </div>
            </div>   
            <div class='section'>
                <label>Foo</label>
                <div>
                    <select class='FooClass' /> 
                </div>
            </div>
            <div class='section'>
                <label>Bar</label>
                <div>
                    <select class='BarClass' />
                </div>
            </div>
    </fieldset>
</div>   

<div id='MainSelector2'>
    <fieldset>
        <legend>Toto</legend>
            <div class='section'>
                <label>Koko</label>
            <div>
                <input type='text' id='KokoId'>
            </div>
            </div>   
            <div class='section'>
                <label>Foo</label>
                <div>
                    <select class='FooClass' /> 
                </div>
            </div>
            <div class='section'>
                <label>Bar</label>
                <div>
                    <select class='BarClass' />
                </div>
            </div>
    </fieldset>
</div> 
```

应该是这样的

```
$("#MainSelector1.FooClass").Css('display', none);
$("#MainSelector1.BarClass").Css('display', none);

$("#MainSelector2.FooClass").Css('display', none);
$("#MainSelector2.BarClass").Css('display', none); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:29:15.837

只需用空格分隔访问器即可访问其非直接子代并`none`作为字符串传递给`css`函数。

```
$("#MainSelector1 .FooClass").css('display', 'none');
$("#MainSelector1 .BarClass").css('display', 'none');

$("#MainSelector2 .FooClass").css('display', 'none');
$("#MainSelector2 .BarClass").css('display', 'none'); 
```

你也可以这样那样做*，*但也许你应该只阅读一些[jQuery 选择器](http://api.jquery.com/category/selectors/)和可能的[隐藏函数](http://api.jquery.com/hide/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:41:21.860

```
var $el = $('#MainSelector1');
$el.find( '.FooClass' ).css('display', 'none');
$el.find( '.BarClass' ).css('display', 'none');

$el = $('#MainSelector2');
$el.find( '.FooClass' ).css('display', 'none');
$el.find( '.BarClass' ).css('display', 'none'); 
```

或者

```
$('#MainSelector1').find( '.FooClass, .BarClass' ).css('display', 'none');
$('#MainSelector2').find( '.FooClass, .BarClass' ).css('display', 'none'); 
```

或者简单地说

```
$('#MainSelector1').find( '.FooClass, .BarClass' ).hide();
$('#MainSelector2').find( '.FooClass, .BarClass' ).hide(); 
```

# android - 在android中使用复选框进行过滤

> ID：13901725
> 
> 赞同：1
> 
> 时间：2012-12-16T13:27:18.240
> 
> 标签：android, checkbox, filtering

我正在开发一个 android 应用程序，用户在其中执行复选框选择，当时显示项目的总数会像这个[链接一样改变](http://blog.joshsoftware.com/2011/09/28/filter-js-client-side-search-filtering-using-json-and-jquery/)

我的数据也在客户端。如何在 android 中执行与上述相同的操作？我正在使用安卓 api 16。

# java - 在 Eclipse 中以编程方式使用一种布局并更改字符串

> ID：13901727
> 
> 赞同：2
> 
> 时间：2012-12-16T13:27:38.763
> 
> 标签：java, android, eclipse

好的，我想使用一种布局并使用 strings.xml 以编程方式更改我的字符串。

我有 40 个问题，总是有 4 个答案（它们是静态的）。

所以我的想法是这样的：

```
while i < 40:
 set question to question[i]
 on answer click: i++ 
```

如何动态获取字符串。我一直用`getResources().getText(R.string.example)`.

我可以做类似的事情：

```
String dynamic = "R.string.example" + i;
getResources().getText(dynamic) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:34:03.403

也许您可以将答案和问题保存在 strings.xml（或其他地方）的数组中，或者如果您愿意，可以保存更多数组。因此，您可以像现在使用 getResources() 一样加载数组，但使用[getStringArray](http://developer.android.com/reference/android/content/res/Resources.html#getStringArray%28int%29) 如果您有一个数组，您可以动态地获取正确的答案/问题或任何您想用它做的事情。

在 strings.xml（或另一个 xml）中：

```
<string-array name="months_array">
    <item>Jan</item>
    <item>Feb</item>
    <item>Mar</item>
    <item>Apr</item>
    <item>May</item>
    <item>Jun</item>
    <item>Jul</item>
    <item>Aug</item>
    <item>Sep</item>
    <item>Oct</item>
    <item>Nov</item>
    <item>Dec</item>
</string-array> 
```

在您的代码中：

```
String[] months = getResources().getStringArray(R.string.months_array); 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:42:10.013

> 好的，我想使用一种布局并使用 strings.xml 以编程方式更改我的字符串。

如果您根本不需要任何动画，这就是要走的路。

> 我可以做类似的事情：
> 
> 字符串动态 = "R.string.example" + i;
> 
> getResources().getText(动态)

使用[Resources.getIdentifier()](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法：

```
int textId = getResources().getIdentifier("example" + i, "string", getPackageName());
getResources().getText(textId); 
```

但是，`ndsmyter`如前所述，您可能希望将所有问题和答案放在 5 个不同的数组中（1 个用于问题文本，4 个用于 4 个答案）。然后，您将在启动时仅加载此数组一次，然后简单地使用 一次性`i`从 5 个数组中获取所有数据。

# github - 如何搜索 GitHub 拉取请求？

> ID：13901728
> 
> 赞同：23
> 
> 时间：2012-12-16T13:27:44.940
> 
> 标签：github

我目前正在查看一个流行的 GitHub 存储库。里面有超过 300 个拉取请求（100 个打开，200 个关闭）。

如何搜索这些拉取请求以查看其中是否已存在特定主题？

即，如果有人已经进行了类似的拉动，我不想创建一些代码并提交拉动请求。

* * *

编辑：或者 - 因为我知道我计划更改哪些文件 - 是否可以在 GitHub 上查看特定文件，然后说“嘿。是否有任何与此特定文件相关的未完成的拉取请求？”。

* * *

更新：GitHub 现在可以轻松地提供此功能 - 当浏览存储库时，顶部的搜索栏提供仅搜索选择的存储库 - 这使得搜索您需要的内容变得更加容易。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-29T14:59:55.457

## 更新

现在，主搜索栏用于所有搜索。您可以通过左侧的 code/repos/issues/etc 进行过滤。要查看拉取请求，请单击`Issues`过滤器。

![搜索图片](../Images/5606353bf5672549309920f0dd76952f.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-16T13:33:48.763

您可以在问题选项卡上找到此搜索表： [![](../Images/c0b22e7a209053054d6916d3775f066c.png)](https://i.stack.imgur.com/aZ0qx.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-13T11:24:54.047

如果它可以帮助通过搜索引擎找到此讨论的人，我会添加这些信息。您可以使用 GitHub 过滤器。

搜索所有拉取请求：`is:pr`

搜索所有打开的拉取请求：`is:pr is:open`

按用户搜索所有打开的拉取请求：`is:pr is:open author:username`

搜索用户评论的所有打开的拉取请求：`is:pr is:open commenter:username`

我没有看到`commenter`过滤器记录在某处或在高级搜索中可用，我只是通过猜测找到它并且它有效。

如果您想搜索所有讨论特定功能的拉取请求，您只需将关键字添加到搜索中即可。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-23T01:14:39.667

Github repo 活动搜索现在[有很好的文档记录](https://help.github.com/articles/searching-issues/)。

例如`github commenter:defunkt type:issue`

# workflow - 在多语言站点中更改工作流程仅适用于一种语言

> ID：13901739
> 
> 赞同：1
> 
> 时间：2012-12-16T13:28:37.013
> 
> 标签：workflow, plone, multilingual, linguaplone

我有一个新的 Plone-4.1.5 站点，安装了 Linguaplone-4.1.1，选择了两种语言并将首页翻译成另一种语言。

当通过控制面板将工作流从 simple_workflow 更改为 intranet_workflow 并将旧状态映射到新状态时，只有当前所选语言的对象才能获得新映射。其他语言的对象获得新工作流的初始状态。

是否可以通过编程方式进行映射来克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T21:11:28.070

在这种情况下，最简单的方法就是修补重新映射工作流的代码。

打开`plone.app.workflow`egg（它的路径将在你的`bin/instance`脚本中列出），找到`plone/app/workflow/remap.py`文件并编辑它。

大约在中途您会发现以下行（我的副本中的第 79 行）：

```
for brain in portal_catalog(portal_type=type_ids): 
```

并补充`Language='all'`：

```
for brain in portal_catalog(portal_type=type_ids, Language='all'): 
```

另一种方法是将整个文件复制到您自己的项目中，在本地进行更改，然后使用以下命令调用它：

```
statemap = {
    'oldstate1_id': 'newstate1_id',
    'oldstate2_id': 'newstate2_id'
}
chain_name = ('workflow_id',)  # tuple of wf ids (can be empty), or the string '(Default)'
portal_types = ('sequence', 'of', 'portal_types')

copiedremap.remap_workflow(portal, portal_types, chain_name, state_map) 
```

然后`remap_workflow`脚本使用对象的*当前*状态来查找它在新目标工作流中应该具有的新状态（它将为每个新工作流执行此操作）；如果旧状态未在地图中列出，它将使用目标工作流的初始状态。

# eclipse - 需要 egit 的本地存储库而不是只有一个遥控器？

> ID：13901745
> 
> 赞同：0
> 
> 时间：2012-12-16T13:29:01.110
> 
> 标签：eclipse, egit

我真的需要先创建一个本地存储库然后才能访问远程存储库吗？

我从 eclipse 市场获得了 egit 并安装了.. 之后我创建了一个简单的项目并尝试与远程存储库共享项目，但是在我创建本地存储库之后就可以这样做了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:38:51.543

[克隆](http://wiki.eclipse.org/EGit/User_Guide/Remote#Cloning_remote_Repositories)远程存储库，然后使用 Team->Share project 共享项目。在“共享项目”对话框中，确保未选中“在项目的父文件夹中使用或创建存储库”并选择克隆的存储库。

# c# - 何时编辑数据应将数据的 id 存储在会话中

> ID：13901752
> 
> 赞同：3
> 
> 时间：2012-12-16T13:29:35.117
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有任何用户都可以编辑的帖子列表。
当我在隐藏字段中进入帖子的编辑模式时，我存储`PostId`.
现在我发现这实际上很糟糕，因为用户可以更改该隐藏字段并更新其他一些帖子。

保留用户编辑的帖子是`session`唯一的选择`id`，还是有更好的策略？

因为我真的很糟糕:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:32:30.977

有一个更好的策略：

在更新记录之前，检查用户尝试更新的记录是否属于当前经过身份验证的用户。

您可以编写一个自定义授权属性来为您执行此任务。这是[`an example`](https://stackoverflow.com/a/10328876/29407).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:42:49.943

尝试将帖子 ID 作为隐藏字段，而不是更多字段。然后，在控制器中使用该 ID 从数据库中获取原始帖子。

然后你必须检查：

*   如果 id 确实从数据库中提取了某些内容（以防帖子已被删除或用户更改了隐藏中的 id）。
*   如果要编辑的帖子来自该用户/租户（如果来自该用户，并且他将您隐藏的 id 更改为指向他自己的其他帖子，这是他的责任）。
*   在逻辑中添加您需要的任何其他检查（检查用户是否有权这样做，或检查日期等）
*   您可以从数据库中更新您允许在 post 对象中编辑的字段，然后保存它（假设您`PostViewModel`在操作中收到 a 而不是`Post`模型本身。

这种方法也可以在 DELETE 情况下使用，检查是否可以删除给定 id 的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:59:49.623

将其保存在 asp Hidden 字段中并将 Visible 属性设置为 false。这将允许您访问使控件在页面上不可见的值，即使在其呈现的 html 标记中

# python - 支持脚本运行的 Python 独立 HTTP 服务器？

> ID：13901757
> 
> 赞同：2
> 
> 时间：2012-12-16T13:30:08.787
> 
> 标签：python, cgi, standard-library, httpserver

我正在编写一个使用 HTML 页面作为用户界面的应用程序 - 用户在他的计算机上运行它并打开`http://localhost:8080`. 在编写了大约一千行代码来实现我自己的 MVC 模型愿景之后，我注意到我几乎在尝试重新发明轮子——RequestHandler 导入类，为特定情况实现 do_POST 和 do_GET，会话处理......我已经几乎意识到我做错了。

我更愿意坚持我的 Python 脚本运行 HTTP 服务器的模型（最好是标准库中的一个），因为我喜欢这种架构。问题是 - 是否有一些类似 HTTPServer 的类会给我一个类似于 CGI 的接口（解析 GET URI，自动加载视图和模型）而不给我很多开销？我希望它尽可能小和简单，所以如果没有基于标准库的解决方案，至少让它是纯 Python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:09:31.060

有一个支持[CGI 的 HTTP 服务器](http://docs.python.org/2/library/cgihttpserver.html#module-CGIHTTPServer)已经融入 python - 这可能是最简单的起点。

# python - 将 Python defaultdict 写入 Mongo 失败

> ID：13901758
> 
> 赞同：0
> 
> 时间：2012-12-16T13:30:14.747
> 
> 标签：python, mongodb, pymongo

我似乎无法`defaultdict`使用 PyMongo 向 MongoDB 写入数据。我得到了`_id`回复，但文件没有写。

```
>>> coll
Collection(Database(Connection('localhost', 27017), u'db_name'), u'coll_name')
>>> doc
{'field1': defaultdict(<type 'int'>, {...}), 'field2': defaultdict(<type 'int'>, {...})}
>>> obj_id = coll.insert(doc)
>>> obj_id
ObjectId('50cdc4df15b6f6dc3f496af7')
>>> coll.find_one()  # nothing...
>>> [x for x in coll.find({'_id': '50cdc4df15b6f6dc3f496af7'})]
[] 
```

这里发生了什么？如何调试此失败的写入？

**编辑**：

切换到我的连接后，`safe=True`我得到了这个：

```
Traceback (most recent call last):
  File "populate_mongo.py", line 36, in <module>
    oid = coll.insert(series)
  File "/Users/user/.virtualenvs/test/lib/python2.7/site-packages/pymongo/collection.py", line 359, in insert
    continue_on_error, self.__uuid_subtype), safe)
  File "/Users/user/.virtualenvs/test/lib/python2.7/site-packages/pymongo/mongo_client.py", line 852, in _send_message
    rv = self.__check_response_to_last_error(response)
  File "/Users/user/.virtualenvs/test/lib/python2.7/site-packages/pymongo/mongo_client.py", line 795, in __check_response_to_last_error
    raise OperationFailure(details["err"], details["code"])
pymongo.errors.OperationFailure: too many namespaces/collections 
```

所以这似乎 Mongo 不能保存我的数据，并且与集合无关`defaultdict`。

# ruby-on-rails - 开始时 Rspec 错误

> ID：13901773
> 
> 赞同：0
> 
> 时间：2012-12-16T13:32:23.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec

我是 Rspec 的新手，我读了《rails 3 in action》一书，在那里我进行了 Rspec 测试：

> 规格/控制器/proect_controller_spec：

```
require 'spec_helper'

describe ProjectsController do
  let(:user) do
    user = Factory(:user)
    user.confirm!
    user
  end

  let(:project) { Factory(:project) }

  context "standard users" do

    it "cannot access the show action" do
      sign_in(:user, user)
    end

  end
end 
```

> 规范/工厂/user_factory.rb

```
Factory.define :user do |user|
  user.sequence(:email) { |n| "user#{n}@ticketee.com" }
  user.password "password"
  user.password_confirmation "password"
end 
```

> 规范/支持/factories.rb

```
Dir[Rails.root + "factories/*.rb"].each do |file|
  require file
end 
```

> 规格/规格助手

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require "email_spec"

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.fixture_path = "#{::Rails.root}/spec/fixtures"
  config.use_transactional_fixtures = true
  config.infer_base_class_for_anonymous_controllers = false
  config.order = "random"
end 
```

> 宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'
gem 'pg'
gem 'devise'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'dynamic_form'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :test, :development do
  gem 'rspec-rails', '~> 2.5'
end

group :test do
  gem 'capybara'
  gem 'database_cleaner'
  gem 'factory_girl'
  gem 'email_spec' # 122 page, for email confirmation
end 
```

当我开始时： `rspec ./spec/controllers/projects_controller_spec.rb`

我有：

```
 ProjectsController standard users cannot access the show action
     Failure/Error: user = Factory(:user)
     NoMethodError:
       undefined method `Factory' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x8e96710> 
```

我错在哪里了？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:32:35.310

我想你想要“factory_girl_rails”，而不是“factory_girl”：[https ://github.com/thoughtbot/factory_girl_rails](https://github.com/thoughtbot/factory_girl_rails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:15:33.000

FactoryGirl 的语法已经改变，现在你不能再写了

```
Factory(:user) 
```

但你应该写

```
FactoryGirl.create(:user) 
```

有关详细信息，请参阅[入门文档](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)。有关升级到 3.0 版（包括弃用旧语法）的更多信息，请参阅[这篇博文](http://robots.thoughtbot.com/post/19412394597/factory-girl-hits-3-0)。

# joomla1.5 - Jumi 搜索插件

> ID：13901774
> 
> 赞同：1
> 
> 时间：2012-12-16T13:32:29.010
> 
> 标签：joomla1.5, jumi

我的 Joomla 1.5 站点默认搜索工作正常，但它没有搜索站点的 Jumi 内容。我知道 Jumi 内容是动态的，很难通过默认搜索进行搜索。现在我想知道如何创建一个插件来包含 Jumi 搜索结果？

# ajax - 在struts2的同一页面中显示动作结果

> ID：13901777
> 
> 赞同：0
> 
> 时间：2012-12-16T13:32:49.040
> 
> 标签：ajax, jquery, struts2, struts2-jquery, struts2-json-plugin

我试图在同一页面中显示结果，但它在单独的页面中显示结果。该操作正在向会话添加属性，我想显示该属性的值作为结果。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="sx" uri="/struts-dojo-tags" %>
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags"%>
<html>
  <head>
   <sx:head/>
   <sj:head/> 
  </head>
<body>
   <%@include file="menu.jsp" %> `
<sj:tabbedpanel id="localtabs" cssStyle="content-left">
  <sj:tab id="tab1"  target="tone" label="Recommend Tests"/>
  <sj:tab id="tab2" target="ttwo" label="Recommend Dose"/>
  <div id="tone">
     <s:form action="saveSuggestedTests" theme="xhtml">
        <s:optiontransferselect
         label="Select Tests"
         name="leftNumber"
         list="%{activeTestsMap}"
         doubleName="rightNumber"
         doubleList="returnMap"
         labelposition="top"
        />
        <sj:submit name="submit" value="Submit" indicator="indicator"  targets="result"/>
     </s:form>
     <div id="result" class="result ui-widget-content ui-corner-all"></div>        
  </div> 
```

`struts.xml`有以下配置

```
<action name="saveSuggestedTests" class="org.arshiya.struts.action.tests.TestsManagerHelper" method="saveSuggestedTests">
            <result name="success">/WEB-INF/result.jsp</result>
             <result name="error">/WEB-INF/login.jsp</result>
            <result name="login">/WEB-INF/login.jsp</result>
            <result name="input">/WEB-INF/createUser.jsp</result>
</action> 
```

# wordpress - 如何添加带有附件的邮箱

> ID：13901778
> 
> 赞同：0
> 
> 时间：2012-12-16T13:32:54.107
> 
> 标签：wordpress

我们的翻译公司有一个网站，在 wordpress 下构建，稍后将迁移到 .com 域。目前，我们希望我们的客户在线提交文件，因此我们应该添加一个框，他们可以在其中单击并附加他们的文件，提交他们的名字并发表评论。

```
http://nytseoul.wordpress.com/
It's on the second page "Submit your documents" 
```

我们尝试了一些不起作用的插件，如果有人有想法，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:32:25.810

您可以使用联系表格 7 插件。以联系表格上传文件非常容易使用。

[http://wordpress.org/extend/plugins/contact-form-7/](http://wordpress.org/extend/plugins/contact-form-7/)

*Contact Form 7 可以管理多个联系表单，并且您可以通过简单的标记灵活地自定义表单和邮件内容。该表单支持基于 Ajax 的提交、CAPTCHA、Akismet 垃圾邮件过滤等。*

# java - 如果某个线程使对象为空而其他线程在该对象的方法内会发生什么

> ID：13901779
> 
> 赞同：1
> 
> 时间：2012-12-16T13:32:55.310
> 
> 标签：java, multithreading, garbage-collection

假设我有 -

```
public class ThreadingIssue {
    public B b = new B();
}

class B{
    private final Object lock = new Object();

    public void someMethod(int timeOut){
        synchronized(lock){
            try{
                lock.wait(timeOut);
            }catch(Exception e){
            }
            // some task..
            lock.notifyAll();
        }
    }
}

class Thread1 implements Runnable{
    private ThreadingIssue t;

    public Thread1(ThreadingIssue issue) {
        t = issue;
    }

    public void run(){
        while(true){
              t.b.someMethod(5000);
        }
    }
}

class Thread2 implements Runnable{
    private ThreadingIssue t;

    public Thread2(ThreadingIssue issue){
        t = issue;
    }

    public void run(){
        try{
            Thread.sleep(2000);
        }catch(Exception e){
        }
        t.b = null;
    }
} 
```

Thread1会发生什么，如果它在`someMethod(5000)`B 内部并等待锁定，并且 Thread2 已使 B 的对象为空？我不确定 Thread1 是否会抛出哪个异常..有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:34:28.930

第二个线程持有对正在运行其方法的对象的引用（否则它将无法运行其实例方法），因此 GC 无法处理该对象，因此不会出现异常。

为了更明确地使用您的代码，当您这样做时

```
t.b.someMethod(5000) 
```

JVM在内部处理`t.b`表达式（这是对对象的引用），所以引用计数不为0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:21:04.980

总结 SJuan76 和 op 的讨论：
看起来有两个对 t 的引用，但只有一个对 b（t 内部的那个）。t 不会被释放，因为线程独立持有它。但是，b 可能会被删除（取决于 gc），因为一旦引用无效，它的引用计数将下降到零。
所以 Thread2 可能会抛出 NullPointerException。

编辑：
在 someMethod() 内部，b 对象不会被释放，因为`this`指针保存在堆栈上，至少使 ref 计数为 1。您可以对成员方法的每次执行都说同样的话，因为它们中的每一个都`this`作为参数。

请注意，尽管您收到 NullPointerException，但这并不意味着对象已经完成/释放，只是您使用的引用为空。GC 可能需要一些时间才能真正释放对象。

# c# - 3 个控制器的必需字段验证器

> ID：13901781
> 
> 赞同：0
> 
> 时间：2012-12-16T13:33:25.213
> 
> 标签：c#, asp.net, validation

每个必填字段验证器都可以验证 1 个控制器，但假设我有 3 个 DropDownLists。

出生日期：

-日月年-

现在我知道我可以通过设置 InitialValue 来验证 1 DropDownList，其中 DropDownList 中的第一项是“Select a Day”，它有一个 Value=""。

但我不想使用 3 个验证器。（缺日，缺月，缺年）

我希望对所有 3 个都使用 1 个验证器，这意味着，如果我设置了日期和月份但我没有设置年份，我会得到（必须设置日期），同样的事情如果我设置没有月……等等……

我知道我可以使用自定义验证器来执行此操作，但我可以使用 1 个必填字段验证器来执行此操作吗？因为通常自定义验证器需要刷新页面（因此它可以执行服务器端代码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:45:56.430

您可以使用验证摘要

```
 <asp:ValidationSummary ID="ValidationSummary1"
  HeaderText="Date must be set"
    DisplayMode="BulletList"
     EnableClientScript="true"
       runat="server"/> 
```

并删除下拉列表必填字段验证器的 ErrorMessage 、InitialValue 和 Text 属性。这将为您提供所需的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:12:21.060

我认为您不能仅使用一个RequiredFieldControl 来完成此操作，要么使用自定义验证器，要么在代码隐藏中迭代每个控件并查看其索引不为零（假设这是您要避免的初始值）

祝你好运

# mysql - MySQL 拒绝与主机 % 的用户连接

> ID：13901782
> 
> 赞同：1
> 
> 时间：2012-12-16T13:33:34.657
> 
> 标签：mysql, privileges

我有这个定义的 MySQL 5：

```
CREATE DATABASE foo DEFAULT CHARACTER SET = 'utf8';
GRANT ALL ON foo.* TO foo@'%' IDENTIFIED BY 'foo';
FLUSH PRIVILEGES; 
```

但是，当使用 user 访问时`foo`， pass `foo`，连接被拒绝。当我将其更改为

```
GRANT ALL ON foo.* TO foo@localhost IDENTIFIED BY 'foo'; 
```

MySQL让我进入。 **为什么第一个不起作用？**AFAIK，`%`应该匹配任何东西。

*更新：*找到了这个，可能是相关的[http://forums.mysql.com/read.php?30,158830,158830](http://forums.mysql.com/read.php?30,158830,158830)

手动参考：（没有找到答案）

*   [http://dev.mysql.com/doc/refman/5.6/en/account-names.html](http://dev.mysql.com/doc/refman/5.6/en/account-names.html)
*   [http://dev.mysql.com/doc/refman/5.6/en/adding-users.html](http://dev.mysql.com/doc/refman/5.6/en/adding-users.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:41:24.753

来自 mysql[文档](http://dev.mysql.com/doc/refman/5.5/en/access-denied.html)：

> 一个非常常见的错误是插入一个 Host='%' 和 User='some_user' 的新条目，认为这使您可以指定 localhost 从同一台机器进行连接。这不起作用的原因是默认权限包括 Host='localhost' 和 User='' 的条目。因为该条目的主机值“localhost”比“%”更具体，所以在从 localhost 连接时优先使用它而不是新条目！正确的过程是插入第二个 Host='localhost' 和 User='some_user' 的条目，或者删除 Host='localhost' 和 User='' 的条目。删除条目后，请记住发出 FLUSH PRIVILEGES 语句以重新加载授权表。另请参见第 6.2.4 节，“访问控制，第 1 阶段：连接验证”。

`mysql.user`执行第一个命令后检查表

```
CREATE DATABASE foo DEFAULT CHARACTER SET = 'utf8';
GRANT ALL ON foo.* TO foo@'%' IDENTIFIED BY 'foo';
FLUSH PRIVILEGES;
select * from mysql.user where User='foo'; 
```

# node.js - 如果脚本重新启动，MongoDB update $inc 会将值重置为 0

> ID：13901786
> 
> 赞同：1
> 
> 时间：2012-12-16T13:33:58.787
> 
> 标签：node.js, mongodb

我对 MongoDB $inc 有一个奇怪的问题。如果脚本重新启动，.update() 函数将从 0 重新启动并且不使用数据库的当前值。代码如下所示：

```
exports.stats.update({n:name},{$inc: {t:1,s:num}}, {safe:true}, function(err){
if(err) console.log(err); 
```

有什么方法可以从当前值开始 $inc 还是有一些技巧可以避免这种行为？

希望有人对这个问题有一些解决方案。

丹尼尔

# android - android 4中的android RadioButton问题

> ID：13901789
> 
> 赞同：11
> 
> 时间：2012-12-16T13:34:13.667
> 
> 标签：android, radio-button

我有一个简单的应用程序。屏幕是在 RelativeLayout 内构建的。我有更多 LinearLayout(s)，其中一个显示 2 RadioButton(s)，如下所示：

```
 <LinearLayout android:layout_width="match_parent" android:layout_height="fill_parent"
            android:padding="3dp" android:gravity="center">
            <RadioGroup android:id="@+id/rgrDayToReport" 
                android:orientation="horizontal" 
                android:layout_width="wrap_content" android:layout_height="wrap_content">
                <RadioButton android:checked="true" android:id="@+id/rbtnToday"
                    android:layout_width="wrap_content" android:layout_height="wrap_content"

                    android:text="@string/radioTodayText"/>
                <RadioButton  android:id="@+id/rbtnYesterday"
                    android:layout_width="wrap_content" android:layout_height="wrap_content"

                    android:text="@string/radioYesterdayText"/>
            </RadioGroup>
        </LinearLayout> 
```

该面板在除三星 Galaxy s3 之外的任何设备（正如我所做的测试）中都能正确呈现。在此设备上（仅在此设备上）屏幕如下所示：

![在此处输入图像描述](../Images/72d0becd2023ad657dfc24ea6d2c7271.png)

**我应该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T12:43:51.473

我遇到了同样的问题。我通过不设置`paddingLeft`RadioButtons 和 CheckBoxes 解决了这个问题 - 保留默认值。`paddingLeft`是从所有手机上的可绘制对象和 Galaxy S3 的左角计算的。设置`background`也在 Galaxy S3 上导致相同的错误。保留默认值后，它现在可以在任何地方使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-26T12:45:45.677

这可能为时已晚，但我遇到了同样的问题，并且通过指定`android:drawableRight`or解决了它`android:drawableLeft`，而不是`android:button`默认设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T13:40:39.733

在 Rugby Pro 和 GS5 上进行测试，我发现如果要设置背景颜色，则必须在 java 中进行，而不是在 XML 中进行。如果您在 XML 中执行此操作，则三星设备会出现问题并导致重叠。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-29T20:12:38.003

我通过将 的 设置为`paddingLeft`使其`RadioButton`看起来正确的某个值来解决此问题。我只在我的三星设备上测试过这个，而不是任何其他设备，所以我不确定在你的“工作”设备上会是什么样子。

# android - 重新分配智能手机的快捷按钮

> ID：13901791
> 
> 赞同：0
> 
> 时间：2012-12-16T13:34:38.673
> 
> 标签：android, html, smartphone

如何重新分配智能手机的快捷按钮（底部的四个按钮（返回、菜单、主页和搜索））（由于“我们很抱歉，但作为垃圾邮件预防机制，不允许新用户发布图像.”： http: [//www.letsgodigital.org/images/artikelen/1/android.jpg](http://www.letsgodigital.org/images/artikelen/1/android.jpg)）

在我的 html5 网页中，以便用户可以搜索、转到主页并打开网站菜单以更快地访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:37:19.733

您不能从您的“html5 网页”中“重新分配智能手机的快捷按钮”，除非此“html5 网页”在特定支持此功能的某个容器中运行（例如，PhoneGap）。

# ssl - 在 Windows Phone 8 模拟器上找不到 SSL 证书

> ID：13901792
> 
> 赞同：2
> 
> 时间：2012-12-16T13:34:48.510
> 
> 标签：ssl, https, ssl-certificate, windows-phone, windows-phone-8

我正在为 WP8 开发程序，从 JSON 中检索数据。连接是安全的（网址以 https 开头）。有时它工作正常，但有时我开始收到异常 `System.Net.WebException: The remote server returned an error: NotFound.` 并且这个异常开始显示所有对所有 https URL 的请求。对于 http URL，一切正常。网址没问题，在模拟器上用IE打开。我认为，证书可能存在问题，但为什么有时会起作用？

```
public static void SendRequest(string requestUrl, Action<Stream, Exception> callback)
{
    var targetUri = new Uri(requestUrl);
    var request = (HttpWebRequest)WebRequest.Create(targetUri);
    request.Method = "POST";

    request.BeginGetResponse(ar => ProcessResponse(ar, callback), request);
}

public static void ProcessResponse(IAsyncResult callbackResult, Action<Stream, Exception> callback)
{
    try
    {
        var myRequest = (HttpWebRequest)callbackResult.AsyncState;
        var myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);

        callback(myResponse.GetResponseStream(), null);

        myResponse.Close();
    }
    catch (Exception e)
    {
        callback(Stream.Null, e);
        Debug.WriteLine("Error in RequestHelper.ProcessResponse\nErrorMessage - " + e.Message);
    }
} 
```

**更新：**问题肯定出在 SSL 证书中。当我尝试在 WebBrowser 控件上打开网页时，我收到一条消息 - “我们在使用此站点的安全证书时遇到问题。”。我点击了“继续访问网站”，但没有任何改变。该页面仍然可以通过 IE 在模拟器上打开。我尝试安装证书（从站点导出，并使用 IE 下载。我收到消息，该证书已成功添加。但我在 WebBrowser 控件上仍然有错误消息。有没有办法安装证书？还是不检查它的有效性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T13:36:22.753

自签名证书工作正常，但您的证书中需要正确的通用名称 (CN)。CN 必须与您的服务器域相同

而且你需要导入证书。到你的手机

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T08:29:00.083

我在与服务器通信的两个应用程序中遇到了同样的问题，但`https`我还没有找到解决方法。但我破解了它。当我得到 a 时，`WebException: Remote server not found`我将检查 a`StatusCode`和`Response`a`Status`的 web 异常，如果`Status`不是`RequestCancelled`（你在快速应用程序切换中获得这样的状态）我重复请求。它看起来像这样：

```
var httpStatusCode = ((HttpWebResponse) webException.Response).StatusCode;
                if (httpStatusCode == HttpStatusCode.NotFound || 
                    httpStatusCode == HttpStatusCode.GatewayTimeout ||
                    httpStatusCode == HttpStatusCode.InternalServerError)
                {
                    if (webException.Status == WebExceptionStatus.UnknownError && !configuration.IsResending)
                    {
                        configuration.IsResending = true;
                        ResendRequest(configuration, successAction);
                        return;
                    }

                    configuration.IsResending = false;
                    throw new ServerTemporaryUnavailabeException();
            } 
```

并且请求的第二次执行不返回`WebException: Not found`。

# php - PHP MySQL 日志记录问题

> ID：13901796
> 
> 赞同：1
> 
> 时间：2012-12-16T13:35:48.743
> 
> 标签：php

我有一个带有用户名和密码的简单登录页面（index.php）。我创建了一个名为 db_connect.php 的文件，其中包含所有与数据库相关的功能。

```
class Database{

    private $connection;
    private $db;

    function __construct()
    {

        $this->connection = mysql_connect('localhost','root','') or die("cannot connect");  
        $this->db = mysql_select_db('logistics',$this->connection);
    }

    function verify_login($uid,$password)
    {
        $verify_login = "select user_id from log_users where user_login = '$uid' and user_password = '$password'";                  
        $status = mysql_query($verify_login,$this->connection);
        while($result = mysql_fetch_assoc($status)){
        if($result['user_id'] == '1')
            {
                return true;
            }
            else{
                return false;
            }
    }
} 
```

现在我创建了一个类数据库对象，用于调用函数 verify_login($username,$password) 。这里的问题是无论登录状态如何，输出都是空白页。如果我打印变量 $status ，它会返回一个资源 ID。但是什么都没有返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:59:38.107

惊人的:) sql 注入...不，我没有

```
or die("cannot connect"); 
```

使用 Exception 和 try/catch 块

```
$verify_login = "select user_id from log_users where user_login = '$uid' and user_password = '$password'"; 
```

哦。为什么是uid？uid 是整数值还是字符串？如果字符串名称变量行 u_login 或其他没有 id 的东西。但是如果它是整数...在 $uid 附近使用 (int) 来获取整数类型的输入数据。$user_passrord 需要清理：mysql_real_escaping 帮助我们

```
$verify_login = "select user_id from log_users where user_login = '$uid' and user_password = 'mysql_real_escape_string($password)'"; 
```

比：

```
if(!empty($result)) {
    return true; // auth
}else{
    return false; // error auth
} 
```

some_file.php：

```
// include your code

if(verify_login($login, $password)) {
    echo 'Auth!';
} 
```

# php - 可以在变量中获取 Phalcon\Mvc\View 渲染输出吗？

> ID：13901805
> 
> 赞同：4
> 
> 时间：2012-12-16T13:36:21.723
> 
> 标签：php, view, phalcon

我需要返回 json 对象，该对象具有带有渲染动作的属性“html”。是否可以在本地使用 Phalcon vew？

例子：

```
$posts = NewsPost::find(['limit' => 10]);
$view = new Phalcon\Mvc\View();
$view->setVar('posts', $posts);
$view->setMainView('news/posts'); // not sure if this is correct

// retrieve some data ...
$response = [
    'html' => $view->render(),
    'somedata' => 'somevalues',
    ....
]; 
```

PS关于phalcon php框架的问题：http: [//docs.phalconphp.com/en/latest/api/Phalcon_Mvc_View.html](http://docs.phalconphp.com/en/latest/api/Phalcon_Mvc_View.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T19:51:31.527

需要先启动输出缓冲：

```
$view = new Phalcon\Mvc\View();

$view->setVar('posts', $posts);

$view->start();
$view->render(); //Pass a controller/action as parameters if required
$view->finish();

// retrieve some data ...
$response = [
    'html' => $view->getContent(),
    'somedata' => 'somevalues',
    ....
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:29:03.800

试试这个

```
$posts = NewsPost::find(['limit' => 10]);
$view = new \Phalcon\Mvc\View();
$view->setRenderLevel(\Phalcon\Mvc\View::LEVEL_LAYOUT);
$view->setVar('posts', $posts);
$viewData = $view->render('news', 'posts');

// retrieve some data ...
$response = [
    'html' => $viewData,
    'somedata' => 'somevalues',
    ....
]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T14:16:47.517

```
$view = new Phalcon\Mvc\View();

$view->setVar('posts', $posts);

$view->start();
$view->render(); //Pass a controller/action as parameters if required
$view->finish();

// retrieve some data ...
$response = [
    'html' => $view->getContent(),
    'somedata' => 'somevalues',
    ....
]; 
```

不要忘记使用

`$view->setViewsDir(APP_PATH . '/app/views/');`

否则，您可能会返回一个空字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-14T20:41:49.497

我正在使用一个简单的解决方案（在我在模型中使用的应用程序的任何部分）： 1\. 从 DI 加载视图对象 2\. 使用带参数的 getRender

```
 // Get the view from DI
        $theView = $this->getDi()->getShared('view');
        // Load the text into variable
        $emailText = $theView->getRender('emails', $emailTemplate, $emailData, function($theView) {
            $theView->setRenderLevel(\Phalcon\Mvc\View::LEVEL_ACTION_VIEW);
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-27T09:15:02.600

这是一个基于 View 的类，呈现为 HTML 或 JSON（Api 调用）。

```
use \Phalcon\Mvc\View;

class ApiView extends View
{
    const OUTPUT_DEFAULT = 0;
    const OUTPUT_JSON = 1;
    public $output_type = self::OUTPUT_DEFAULT;

    public function setOutputJson()
    {
        $this->output_type = ApiView::OUTPUT_JSON;
    }

    public function setOutputDefault() {
        $this->output_type = ApiView::OUTPUT_DEFAULT;
    }

    public function render($controllerName, $actionName, $params = null)
    {
        if ($this->output_type === ApiView::OUTPUT_JSON)
        {
            echo json_encode($this->getParamsToView());
            $this->disable();
        }
        parent::render($controllerName, $actionName, $params);
        if ($this->output_type === GollgiView::OUTPUT_JSON) {
            header("Content-type: application/json, 'UTF-8')");
        }
    }

    public function getOutputType() {
        return $this->output_type;
    }
} 
```

更改 config/service.php 以默认创建 ApiView

```
/**
 * Setting up the view component
 */
$di->setShared('view', function () use ($config) {
     $view = new ApiView();
     $view->setViewsDir($config->application->viewsDir);
     $view->registerEngines(['.phtml' => 'Phalcon\Mvc\View\Engine\Php']);
     return $view;
}); 
```

在控制器中，您可以决定您想要什么类型的输出

```
if ($this->request->has('api')) {
    $this->view->setOutputJson();
} 
```

# mysql - Sql如何删除具有合并值的重复记录？

> ID：13901809
> 
> 赞同：1
> 
> 时间：2012-12-16T13:36:33.050
> 
> 标签：mysql, sql

如何使用合并值删除重复记录？

我有带有 id（整数 pm 键）、val1（文本）、val2（文本）的表。

现在的情况：

```
------------------

 id  val1    val2

 1\.  john     sam
 2\.  larry    tom
 3\.  john     joe 
```

我希望有：

```
---------------

 id  val1    val2

 1\.  john     sam, joe
 2\.  larry    tom
... 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:03:39.503

`UPDATE`据我所知，你不能这样做，你不能`DELETE`在一个查询中。但是，您可以将其作为两个查询来执行`UPDATE`，如下所示：`DELETE`

```
UPDATE Table1 t1
INNER JOIN
(
  SELECT val1, GROUP_CONCAT(val2 SEPARATOR ',') Val2
  FROM Table1
  GROUP BY val1
) t2 ON t1.val1 = t2.val1
SET t1.val2 = t2.val2;

DELETE t
FROM table1 t
WHERE id NOT IN
(
  SELECT ID
  FROM
  (
    SELECT MIN(ID) id, val1
    FROM table1
    GROUP BY val1
   ) sub
 ); 
```

这将进行您想要的更改。

**请注意：**您必须将这两个查询放在一个[***TRANSACTION***](http://dev.mysql.com/doc/refman/5.0/en/commit.html)中。

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/da145/1)

这两个查询将使您的表看起来像：

```
| ID |  VAL1 |    VAL2 |
------------------------
|  1 |  john | sam,joe |
|  2 | larry |     tom | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:01:43.063

你可以用这个

```
 SELECT val1, GROUP_CONCAT(val2 SEPARATOR ',') val2  FROM your_table t1
   INNER JOIN your_table t2 ON  t2.id = t1.id

     WHERE t2.val1 = t1.val1

  GROUP BY  t1.val1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T13:48:18.803

这是一个想法的草图：

1）创建临时表，如：

```
select val1, min(id) min_id, group_concat(val2) val2
from table
group by val1 
```

2) 为 id = temp.min_id 的记录更新 val2

3) 删除 val1 = temp.val1 和 id != min_id 的记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T20:50:05.023

你有答案如何制作你想要的东西。我想知道您是否真的想以这种方式合并值？你不需要新桌子吗？

主表

```
id  val1    

1\.  john    
2\.  larry 
```

新表：

```
idMain val2

1 sam
1 joe
2 tom 
```

# java - 如何处理图像？

> ID：13901817
> 
> 赞同：-3
> 
> 时间：2012-12-16T13:37:41.270
> 
> 标签：java, image, process, pixel

我想制作一个程序，它可以拍摄图像并在其上制作漂亮的效果。效果就像模糊或类似的东西，我想我理论上知道该怎么做，但我不知道如何获取图像数据并实际更改它，而不是保存一个全新的图像。

我知道每个由像素组成的图像以及其中一个具有自己的颜色。我的问题是如何加载图像文本源（？）或如何获取有关图像像素的信息，然后更改此信息并将此数据保存为新图像。我正在使用java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:43:18.997

[BufferedImage](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)是您正在寻找的。[您可以使用ImageIO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html)`BufferedImage`从文件系统（或其他位置）读取图像来创建实例

```
BufferedImage image = ImageIO.read(getClass().getResource("../images/exmaple.jpg"));

// get red/green/blue/alpha value for pixel at position (10,20)
int rgb = image.getRGB(10, 20); 
```

更改值可以使用`setRGB()`. 然后可以使用 . 将更新的图像保存到文件中`ImageIO.write()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:42:25.730

检查 ImageFilter 和子类（例如 BufferedImageFilter）。根据所需的输出格式，您可能需要一个外部库来在转换后保存图像。

# reflection - 通过 Go 中的反射检测空值的快速方法

> ID：13901819
> 
> 赞同：36
> 
> 时间：2012-12-16T13:37:49.907
> 
> 标签：reflection, go

我有一个`int`/ `string`/ `bool`/etc.. 值存储在 an 中`interface{}`，并想确定它是否未初始化，这意味着它的值是

*   `0`
*   `""`
*   `false`
*   或者`nil`

我该如何检查？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-16T22:18:47.210

据我了解，你想要这样的东西：

```
func IsZeroOfUnderlyingType(x interface{}) bool {
    return x == reflect.Zero(reflect.TypeOf(x)).Interface()
} 
```

在谈论接口和`nil`时，人们总是对两个非常不同且不相关的东西感到困惑：

1.  一个`nil`接口值，它是一个没有*基础值的接口值*。这是接口类型的零值。
2.  一个非`nil`接口值（即它有一个*基础值*），但它的基础值是其基础类型的零值。例如，基础值是`nil`映射、`nil`指针或 0 数字等。

我的理解是你问的是第二件事。

* * *

**更新**：由于上面的代码使用`==`，它不适用于不可*比较*的类型。我相信使用`reflect.DeepEqual()`相反会使它适用于所有类型：

```
func IsZeroOfUnderlyingType(x interface{}) bool {
    return reflect.DeepEqual(x, reflect.Zero(reflect.TypeOf(x)).Interface())
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-08-22T16:20:21.050

[Go 1.13](https://tip.golang.org/doc/go1.13#reflect)（2019 年第三季度）应该简化检测过程：

> 新[`Value.IsZero()`](https://tip.golang.org/pkg/reflect/#Value.IsZero)方法报告 Value 是否是其类型的零值。

它是在[提交 c40bffd](https://github.com/golang/go/commit/c40bffd90535bd9d5bf6a398f5227ff2c9aaed52)和[CL 171337](https://go-review.googlesource.com/c/go/+/171337)[`src/reflect/value.go`](https://github.com/golang/go/blob/d9b13233378668a4fd24ac5d044e9d550cd2a8be/src/reflect/value.go#L1085-L1123)中实现的，解决了[问题 7501](https://github.com/golang/go/issues/7501)

请参阅[操场示例](https://play.golang.org/p/HZNA5Unj-FZ)（只要支持 Go 1.13）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T13:45:26.037

type的[零值](http://golang.org/ref/spec#The_zero_value)*`interface{}`是 only `nil`， not `0`or `""`or `false`。

```
package main

import "fmt"

func main() {
        var v interface{}
        fmt.Println(v == nil, v == 0, v == "", v == false)
} 
```

（也[http://play.golang.org/p/z1KbX1fOgB](http://play.golang.org/p/z1KbX1fOgB)）

* * *

输出

```
true false false false 
```

* * *

*: [Q]当内存被分配来存储一个值时，无论是通过声明还是调用make或new，并且没有提供显式初始化，内存被赋予默认初始化。这样一个值的每个元素都被设置为零值：布尔值为 false，整数为 0，浮点数为 0.0，字符串为 ""，指针、函数、接口、切片、通道和映射为 nil。 /问]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T06:18:32.690

@newacct 的答案无法检测到原始零值，调用`reflect.Value.Interface()`它会导致错误。它可以`reflect.Value.IsValid()`用来检查。

```
// IsValid reports whether v represents a value.
// It returns false if v is the zero Value.
// If IsValid returns false, all other methods except String panic.
// Most functions and methods never return an invalid value.
// If one does, its documentation states the conditions explicitly.
func (v Value) IsValid() bool 
```

更新方法：

```
func IsZero(v reflect.Value) bool {
    return !v.IsValid() || reflect.DeepEqual(v.Interface(), reflect.Zero(v.Type()).Interface())
}

func TestIsZero(t *testing.T) {
    var p *string
    v := reflect.ValueOf(p)

    assert.Equal(t, true, v.IsValid())
    assert.True(t, IsZero(v))

    assert.Equal(t, uintptr(0), v.Pointer())

    v = v.Elem()
    assert.Equal(t, false, v.IsValid())
    assert.True(t, IsZero(v))
} 
```

# c# - 分析 MongoDB 数据库以查看执行的查询

> ID：13901822
> 
> 赞同：2
> 
> 时间：2012-12-16T13:38:14.200
> 
> 标签：c#, linq, mongodb, mongodb-.net-driver

有没有办法在 MongoDB 上查看执行的查询？我使用以下命令通过 Windows 上的 mongo.exe 启用了分析：

```
db.setProfilingLevel(2); 
```

这启用了分析，我可以使用以下命令查询配置文件数据，例如：

```
db.system.profile.find().limit(10).sort( { ts : -1 } ).pretty() 
```

但是，这并没有让我得到执行的查询。我知道我也可以使用该`IMongoQuery.ToJson()`方法来查看查询，但我正在使用带有 MongoDB C# 驱动程序的 Linq 查询（顺便说一句，我真的很想知道他们为什么调用这个 C# 驱动程序而不是 .NET 驱动程序）。

这是示例：

```
var people = db.GetCollection<Person>("People")
    .AsQueryable().Where(x => x.Sessions.Any(y => y.SessionDate != null));

var peeps = people.Select(x => 
    x.Sessions.Where(y => y.SessionDate != null)).ToList(); 
```

但是，能够执行以下操作真的很酷：

```
var people = db.GetCollection<Person>("People")
    .AsQueryable().Where(x => x.Sessions.Any(y => y.SessionDate != null))
    .Expression.ToJson(); 
```

但我猜这是不支持的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:34:36.277

我认为没有获得`IMongoQuery`. 好消息是您可以`people`转换为 a`MongoQueryable<Person>`并`IMongoQuery`从那里获取：

```
var people = db.GetCollection<Person>("People")
    .AsQueryable().Where(x => x.Sessions.Any(y => y.SessionDate != null));

var mqPeople = (MongoQueryable<Person>)people;
var query = mqPeople.GetMongoQuery().ToJson(); 
```

**编辑：**

看起来这仅适用于该`Where`子句。

# java - Android：切割后无法设置.mp3文件的新细节

> ID：13901826
> 
> 赞同：0
> 
> 时间：2012-12-16T13:38:30.817
> 
> 标签：java, android, sqlite

我能够将 .mp3 文件剪切到所需的秒数（仅相差 1 或 2 秒）。但是当我在剪切后播放这个文件时，我仍然通过“mediaplayer.getduration();”获得它的旧持续时间。

例如。让我的歌曲时长为 4 分 6 秒，它从 0 秒缩短到 1 分钟。然后当我播放这个时，我通过 mediaplayer.getduration() 得到它的时间 4 分 6 秒，歌曲在 58 秒或 59 秒或 1 分钟停止播放，我也在设置其他细节，比如我设置艺术家名称“麦当娜”但得到“未知”。

所以请帮助我如何在切割时设置正确的时间并设置其他细节。

这是我的代码：

```
path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC);
String str = "xyz3.mp3";
File f = new File(path, str); // new file 
File file = new File("/sdcard/media/audio/music/mysong.mp3") //i am cutting this song
 CheapSoundFile csf = CheapSoundFile.create(file.getAbsolutePath(), listener );
   int mSampleRate = csf.getSampleRate();
    int mSamplesPerFrame = csf.getSamplesPerFrame();
    int duration = (int)(seekBar.getSelectedMaxValue() - seekBar.getSelectedMinValue()+0.5);
    int startframe = (int)(1.0 * (double)(seekBar.getSelectedMinValue()/1000) * mSampleRate / mSamplesPerFrame + 0.5);
    int endframe = (int)(1.0 * (double)(seekBar.getSelectedMaxValue()/1000) * mSampleRate / mSamplesPerFrame + 0.5);
    csf.WriteFile(f, startframe, endframe - startframe);

    ContentValues values = new ContentValues();
    values.put(MediaStore.MediaColumns.DATA, f.getAbsolutePath());
    values.put(MediaStore.MediaColumns.TITLE, "My Song title");
    values.put(MediaStore.MediaColumns.SIZE, f.length());
    values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
    values.put(MediaStore.Audio.Media.ARTIST, "Madonna");
    values.put(MediaStore.Audio.Media.DURATION, duration);
    values.put(MediaStore.Audio.Media.IS_RINGTONE, false);
    values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
    values.put(MediaStore.Audio.Media.IS_ALARM, false);
    values.put(MediaStore.Audio.Media.IS_MUSIC, true);
    //Insert it into the database
    Uri uri = MediaStore.Audio.Media.getContentUriForPath(f.getAbsolutePath());
    getContentResolver().insert(uri, values);
    sendBroadcast(new Intent("android.intent.action.MEDIA_MOUNTED",Uri.parse("file://"  + Environment.getExternalStorageDirectory()))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:39:36.437

Try rescanning the media

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse
("file://" + Environment.getExternalStorageDirectory() + "/media/audio/music"))); 
```

# awk - AWK / 至少两个 'a' 字符但没有 'u' 字符

> ID：13901828
> 
> 赞同：0
> 
> 时间：2012-12-16T13:38:34.667
> 
> 标签：awk

我写下了以下 AWK 脚本来列出在完整路径中至少包含两个“a”字母且没有“u”字母的文件。

```
BEGIN {}

{
if ( (match($1, "^.*[a].*[a]+$") ) )
print $1
}

END{} 
```

现在，您可以，脚本无法消除 '​​u' 字母。我必须进行哪些修改才能得到我想要的？

PS它从通过以下命令单独创建的名为“data”的文件中读取文件名及其完整路径。

```
find / -name '*' > data 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:07:02.613

由于您使用的是 bash，因此无需使用 sed、awk 或 find 等外部​​工具即可完成此操作。

```
#!/bin/bash

shopt -s globstar

for filename in **/*a*a*; do
  [[ "$filename" =~ u ]] || echo "$filename"
done 
```

如果这绝对必须是 awk，我会使用：

```
awk '/a.*a/ && ! /u/' data 
```

**更新：**

根据 gniourf_gniourf 的礼貌警告，使用路径名扩展（globs）而不是正则表达式可能会获得更好的性能。这是一个（非科学）基准：

```
$ rm -f file
$ for (( i=1000000; i-- ; )); do echo u >> file; done
$ time bash -c 'while read i; do [[ $i = *u* ]]; done < file'

real    0m8.291s
user    0m6.570s
sys     0m1.717s
$ time bash -c 'while read i; do [[ $i =~ u ]]; done < file'

real    0m10.416s
user    0m8.676s
sys     0m1.735s 
```

“用户”行是我们感兴趣的行。

这看起来好像 fileglob 的运行速度比正则表达式快约 30%，测试了一百万条记录并获得了积极的结果。

奇怪的是，当测试失败时并没有太大的改进：

```
$ time bash -c 'while read i; do [[ $i = *a* ]]; done < file'

real    0m8.244s
user    0m6.601s
sys     0m1.639s
$ time bash -c 'while read i; do [[ $i =~ a ]]; done < file'

real    0m9.757s
user    0m8.121s
sys     0m1.630s 
```

在这百万次测试中，这只是 23% 的速度提升。如果这种对 shell 脚本的优化很重要（因为您正在运行数百万次测试并且不觉得有任何 CPU 周期可用），那么当您的课程从 awk 转到 bash 时，请考虑 gniourf_gniourf 的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T13:59:43.583

“列出在完整路径中至少包含两个 'a' 字母且没有 'u' 字母的文件”：

```
find / -type f -path "*a*a*" ! -path "*u*" > data 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T14:00:40.800

直接使用此任务的查找选项怎么样，从而`data`完全避免您的文件？

```
find / -name '*a*a*' -not -name '*u*' 
```

现在，如果你真的需要你的文件`data`，那么 a`sed`就足够了：

```
sed -n '/a.*a/{/u/!p}' data 
```

如果你真的想使用`awk`：

```
awk '/a.*a/ { if ($LINE !~ /u/) print ; }' data 
```

对于纯 bash 版本：

```
while read -r file; do
    if [[ "$file" = *a*a* ]] && [[ "$file" != *u* ]]; then 
        echo "$file"
    fi
done < data 
```

`data`对于完全没有文件且没有任何命令的纯 bash 版本`find`，使用 glob：

```
#!/bin/bash

shopt -s globstar
shopt -s nullglob

for file in /**/*a*a*; do
    if [[ "$file" != *u* ]]; then
        echo "$file"
    fi
done 
```

如果您有很多文件（通常是 中的情况），最后一个版本将比其他版本慢得多`/`。它会吞下所有的文件名，然后回显它们。具有 的解决方案`find`是最好的，因为文件名将在找到时被回显（和/或处理）。

希望这可以帮助！

# c# - 如何使用 Fluent nHibernate 在它们之间使用 Or 定义两个 where 子句？

> ID：13901835
> 
> 赞同：0
> 
> 时间：2012-12-16T13:39:38.243
> 
> 标签：c#, fluent-nhibernate

我只想在特定列与两个值之一相等时才映射属性，目前我已经尝试过：

```
HasMany<Event>(u => u.Events)
    .KeyColumn("Id")
    .Cascade.AllDeleteOrphan()
    .OrderBy("OrderByDate desc")
    .Where(e => e.Status == Status.New || e.Status == Status.Old); 
```

但我得到一个异常“无法将表达式转换为 SQL”

如何使用两个 where 子句和它们之间的 OR 运算符创建映射？

编辑：我不想在我的映射中使用 SQL，我想使用 lambda 表达式（如果可能的话......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:09:16.340

该实现确实处理了一些事情，但远未完成（尤其是`ExpressionType.OrElse`/`BinaryExpression`未处理）。你必须自己写sql或者增强class的实现`ExpressionToSql`。

# javascript - Tinymce：存在单个 div 时无法插入任何外部内容

> ID：13901838
> 
> 赞同：2
> 
> 时间：2012-12-16T13:39:49.943
> 
> 标签：javascript, tinymce

使用以下内容创建 tinymce 时

```
<div><p>123</p></div> 
```

您不能编辑该 div 之外的任何内容。

我找不到在 div 之前或之后添加内容的方法。这可以通过某种方式以编程方式修复吗？

这是示例（我设置了 div 以显示问题）： http: [//fiddle.tinymce.com/n3caab](http://fiddle.tinymce.com/n3caab)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-16T19:02:50.830

现在是2017年，问题是一样的。找到了一个简单的方法——`&zwj;`在 div 的两侧插入助记符。不像`&nbsp;`这样不占用太多内容。同时，ckeditor 通过工具提示“在此处插入段落”解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:47:33.760

如果您想让用户可以在内容的开头或结尾书写，只需`&nbsp;`在需要的地方添加即可。

有一种方法可以避免用户删除它们。您可以编写 javascript 函数并将其设置为在[更改](https://stackoverflow.com/questions/2823733/textarea-onchange-detection)内容时执行。该功能可以检查用户是否没有做他不应该做的事情。

您也可以在 tinmce 面板上为其制作特殊按钮。我认为之前的解决方案更优雅，但它也可能存在问题。

# libsvm - LibSVM的-c和-wi参数有什么区别

> ID：13901842
> 
> 赞同：0
> 
> 时间：2012-12-16T13:40:03.067
> 
> 标签：libsvm

我有一个不平衡的数据，我想在 matlab 上使用 LibSVM。LibSVM 有两个不同的成本参数：-c 和 -wi。它们之间有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:41:17.160

**-c**选项是设置超参数值。由于您的数据不平衡，因此与示例数量较少的类相比，它会尽量减少具有大量示例的类的错误。
现在，一种方法是以某种方式向算法建议，与其他类相比，具有较少示例的类的错误应该给予更大的权重。您可以使用**-w**选项来执行此操作。
说：你有两个职业 +1 和 -1。与 -1 类相比，+1 示例的数量较少。因此，您希望对 +1 类给予更多的权重。现在，您可以将参数设置为， `-w+1 10 -c C` 表示正类的错误应该比二元分类中的负类赋予大约 10 倍的权重。
与**-c一起使用的值**和**-w**是使用交叉验证技术选择的。

# php - 如何为第一次出现最多一个空格的任意数量的数字进行正则表达式匹配？

> ID：13901843
> 
> 赞同：2
> 
> 时间：2012-12-16T13:40:05.530
> 
> 标签：php, regex, preg-match

我试图用来`preg_match()`匹配任何数量的数字的第一次出现，直到第一个空格。

```
$var = '2275073540 blah blah blah';
preg_match('/[0-9 ]/', $var, $matches); 
```

我希望 $matches[0] 返回`2275073540`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:42:26.807

```
preg_match('/(\d+)/', $var, $matches);
             | ^-|-------------- one or more digits
             ^   ^-------------- capturing group 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T13:45:46.210

其实不需要 PCRE 正则表达式，一个简单的格式扫描就足够了：

```
sscanf($var, '%f', $number); # $number is 2275073540 now 
```

[演示](http://eval.in/4737)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T14:27:25.113

这匹配直到（但不包括）第一个空格的任何内容：

```
preg_match('/^[^ ]+/', $var, $matches); 
```

尽管它不将输入限制为数字。为了那个原因。你会使用：

```
preg_match('/^[[:digit:]]+/', $var, $matches); 
```

或者按照 Cthulhu 的建议，使用这个角色类的简写。

# iphone - 在 Objective-C 中的 UIImageView 上绘制“安全路径”

> ID：13901846
> 
> 赞同：1
> 
> 时间：2012-12-16T13:40:16.763
> 
> 标签：iphone, objective-c, ios, uiview, uiimageview

我想创建一个`UIImageView`内部有一个视图，用户可以在其中在`UIImageView`. 然后，一旦他们完成绘图，视图就会清除，当他们再次绘图时，如果绘图位于最后一个绘图的圆圈内，则会出现一条警告，显示“正确”。

如何才能做到这一点？我已经看过这样的项目[，](https://github.com/stkim1/MTImageMapView)但我还没有设法找出如何实际绘制边界并设置一个 if 语句来决定用户是在第二次绘图的边界内还是在边界外绘图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:51:58.440

如果您创建一个`UIBezierPath`“安全”区域，则可以使用`containsPoint:`返回的方法：（来自[apple docs](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)的引用）

> 如果该点被认为在路径的封闭区域内，则为 YES，否则为 NO。

您可能需要检测触摸并检查每个触摸点

# c# - 如何在 WPF 应用程序中存储和显示图像？

> ID：13901850
> 
> 赞同：-1
> 
> 时间：2012-12-16T13:41:07.733
> 
> 标签：c#, wpf, image, wpf-controls

在我的 WPF 应用程序中，我想上传图像。规格是，

1.  PNG 或 JPEG 格式
2.  < 200KB
3.  重命名图像
4.  保存到`Images`应用程序根目录的文件夹中。然后，
5.  将图像显示到`Image`名为的控件中`image-1`

请你给我一个简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:35:00.197

1.  You add your images to a img subfolder
2.  In your global Style file you add your images

    `<BitmapImage x:Key="MyImage" Source="..\MyImage.png" />`

3.  Reference the Image by using a Static Resource

    `<Image Source="{StaticResource ResourceKey=MyImage}" />`

# android - GridView 未正确设置 NumColumns（仅包含图像）

> ID：13901857
> 
> 赞同：1
> 
> 时间：2012-12-16T13:41:30.817
> 
> 标签：android, layout, gridview

我正在尝试为我的应用程序实现一个自己的画廊。我有一些类别，每个类别都有自己的 GridView 图像。它们在代码隐藏中实现并添加到我的 LinearLayout 中。

我有以下问题：在我的设备上，每一行都有 4 个图像的空间。其中一些画廊包含超过 4 个图像，但 GridView 没有在另一行中显示它们（因此它们似乎对用户不可见）

我试过以下源代码：

```
GridView gridView = new GridView(this);
gridView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
LayoutParams.WRAP_CONTENT));
gridView.setNumColumns(GridView.AUTO_FIT);
gridView.setVerticalSpacing(10);// TODO check if 10dp
gridView.setHorizontalSpacing(10);
gridView.setColumnWidth(90);
gridView.setStretchMode(GridView.STRETCH_COLUMN_WIDTH);
gridView.setGravity(Gravity.CENTER); 
```

我认为“setNumColums” - AUTO_FIT - Value 可以解决我的问题，但事实并非如此。

我希望你能理解我的问题:) 对不起我的英语不好。

圣诞节快乐！

# java - Java EE、通信 Web 应用和桌面应用

> ID：13901863
> 
> 赞同：3
> 
> 时间：2012-12-16T13:42:30.777
> 
> 标签：java, jakarta-ee

我有 Java Server Faces Web 应用程序，它需要在网络机器上的桌面应用程序中调用一个方法。这台机器将在特定机器上执行一些逻辑。完成后，它应该调用 Web 应用程序上的一个方法来报告其状态。两种方法都是`void`'s，但确实需要参数。

开发它的最佳方法是什么？我考虑了一些选择：

*   Sockets：我已经阅读了多篇关于您不应该在 Web 应用程序上使用 Sockets 的文章。
*   Soap：我可以在 Web 应用程序上设置服务器，但不能在桌面应用程序上。
*   JCA 适配器：我对此一无所知。

**网络应用**

```
 class WebAppClient {
        public void start(String x, List<String> y) {
            // Call DesktopServer.start(x, y);
        }
    }

    interface WebAppServer {
        public void reportBack(String info);
    } 
```

**桌面应用**

```
 class DesktopClient
        public void reportBack(String info) {
            // Call WebAppServer.reportBack(info);
        }
    }

    interface DesktopServer {
        public void start(String x, List<String> y);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:24:11.590

您对套接字是正确的，它们使用简单，但许多网络阻止简单的 TCP 套接字，只允许 HTTP，有时只允许通过 HTTP 代理。

HTTP 是可行的方法，但 HTTP 不允许服务器发起对话，它迫使您在请求响应模型中工作。

但是，有一些方法可以用来克服这个限制：

*   简单轮询：您只需定期轮询服务器以了解您是否收到新消息。

*   长轮询：您轮询服务器，但请求保持打开状态，直到服务器有话要说，这也称为“彗星”协议，那里有像码头这样的实现。

*   websockets：html5的一个特性，顾名思义，通过http提供了一个真正的双向套接字。尚不支持所有网络设置。例如，某些代理会阻止它。

您应该对每种方法进行一些研究，并为您的案例选择正确的方法。

祝你好运。

# jquery - 带有多个参数的 Json Post 请求

> ID：13901864
> 
> 赞同：1
> 
> 时间：2012-12-16T13:42:33.313
> 
> 标签：jquery, c, asp.net-web-api

当我使用 POST 请求在 C# WebApi 下方调用时。当我在方法中有一个参数时，它工作正常。假设我想包含另一个参数 `public HttpResponseMessage Post(Member member, bool IsAdmin)`，那么值是`data: { id: 2012, firstName: 'FirstNameValue', lastName: 'LastNameValue' }`什么？

C＃

```
public HttpResponseMessage Post(Member member)
    {
        try
        {
            var id = BusinessModule.PostMember(member);
            member.Id = id;
            var response = Request.CreateResponse<Member>(HttpStatusCode.Created, member);
            response.Headers.Location = new Uri(VirtualPathUtility.AppendTrailingSlash(Request.RequestUri.ToString()) + member.Username);
            return response;
        }
        catch (MemberException e)
        {
            var response = new HttpResponseMessage(HttpStatusCode.Conflict);
            response.Content = new StringContent(e.Message);
            throw new HttpResponseException(response);
        }
    } 
```

**jQuery**

```
 function postMember() {
            $.ajax({
                url: baseAddress,
                type: "POST",
                // Firefox reuires the dataType otherwise the "data" argument of the done callback
                // is just a string and not a JSON 
                dataType: 'jsonp',
                accept: "application/json",
                data: { id: 2012, firstName: 'FirstNameValue', lastName: 'LastNameValue' },
            })
            .done(function (data) {
                $("#membersList").append('<li data-member=\'' + JSON.stringify(data) + '\'>' + data.firstName + ' ' + data.lastName + '</i>');
            })
            .fail(function (e) {
                alert(e.statusText);
            })
            .always(function () { });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:55:49.897

似乎 Web API 不处理多个发布的内容值。

请参阅[此处](http://techbrij.com/1026/pass-parameters-aspdotnet-webapi-jquery)的解释和可能的解决方法。我会将新参数放在查询字符串中，并在 API 方法中从 QueryString 读取变量。

因此，在**JQUery**中，您将拥有下一行：

```
url: baseAddress+"?IsAdmin=true", 
```

在**C#**中将是：

```
bool IsAdmin = Convert.ToBoolean(queryItems["IsAdmin"]); 
```

# c# - MySQL 身份验证方法错误

> ID：13901866
> 
> 赞同：1
> 
> 时间：2012-12-16T13:42:50.617
> 
> 标签：c#, mysql, authentication, plugins, connector

使用官方 MySQL .NET 连接器（6.6.4.0，最新的 GA 版本），我试图连接到我网站的数据库，但没有运气。

尝试打开连接时会发生此异常。

> 任何可用插件都不支持身份验证方法“mysql_old_password”。

我的连接字符串如下所示：

```
Connection = new MySqlConnection( "Server=" + sHost + ";User Id=" + sUser + ";Port=" + nPort + ";" +
                                                    "Password=" + sPassword + ";Database=" + sDatabase ); 
```

我试过两台服务器，但我只在 HostGator 托管的一台上遇到问题，另一台在我们自己的 Windows 服务器上，它工作得很好。

HostGator 服务器的 MySQL 信息：

*   服务器：通过 UNIX 套接字的 localhost
*   服务器版本：5.5.23-55
*   协议版本：10
*   MySQL 字符集：UTF-8 Unicode (utf8)

Windows 服务器的 MySQL 信息：

*   服务器：通过 TCP/IP 的本地主机
*   软件版本：5.1.66-community - MySQL Community Server (GPL)
*   协议版本：10
*   MySQL 字符集：UTF-8 Unicode (utf8)

我开始怀疑这是否是我无法解决的问题（不离开 HostGator）。如果不是，那么不同的 .NET 连接器会是最佳选择吗？

如果您需要有关任一服务器的更多信息，请告诉我！

提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:35:39.483

当您连接到密码以旧密码格式 ( [http://dev.mysql.com/doc/refman/5.0/en/old-client.html](http://dev.mysql.com/doc/refman/5.0/en/old-client.html) ) 存储的 MySQL 数据库时，会显示此错误消息。较新的 MySQL 客户端不允许使用旧密码格式与数据库建立连接，因为它的安全性较低。可能最好的方法是将密码升级为新的密码格式。然后可以再次设置 MySQL 连接，您的数据库将得到更好的保护。

您可以在此处阅读有关如何将 MySQL 密码从旧格式升级到新格式的信息：http: [//code.openark.org/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords](http://code.openark.org/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords)

# asp.net - CMS 缓存建议

> ID：13901867
> 
> 赞同：1
> 
> 时间：2012-12-16T13:42:56.447
> 
> 标签：asp.net, caching, content-management-system, nosql

我正在使用 .Net 开发视频 cms。主要有两种对象类型： 类别：层次结构。项目：可以具有自定义属性的基础 cms 对象。每个项目属于一个或多个类别。该系统将为许多不同的公司提供服务，因此每个项目和类别都有公司关系。系统将使用 EntityFramework 从 MsSql 数据库中检索数据。系统将根据订单过滤器给出单个项目或订购项目列表。

我需要一个建议来从源中检索数据并在短时间内提供结果。我搜索了分布式缓存解决方案，例如 app fabric 和一些 nosql 解决方案，但我不确定如何构建我的系统。

我应该缓存所有项目并根据缓存的项目生成结果，还是应该缓存结果然后提供它们？我应该使用什么以及如何使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:13:24.250

当您需要以最低延迟交付内容时，最好使用像 Windows App Fabric 这样的分布式缓存，您可以在其中将缓存分布在不同的节点上。

我建议您可以缓存类别，因为类别不会经常更新，并且您可以为公司项目提供基于公司的缓存。由于涉及到自定义属性，因此您应该非常小心，不要在缓存中包含陈旧或无效的数据，这取决于您的应用程序逻辑。

# asp.net-mvc-3 - MVC3 视图不显示内容

> ID：13901868
> 
> 赞同：2
> 
> 时间：2012-12-16T13:43:09.713
> 
> 标签：asp.net-mvc-3

我有一个问题，在我的 MVC 3 项目中，登录视图没有显示，尽管我检查了我的 html 文件并且有 html 元素但它们没有显示。请看一下，并给我一些解决此问题的建议。

这是我的观点：

```
<!DOCTYPE html>

<html>
<head>
    <title>LogOn</title>
    <link href="@Url.Content("~/Content/Admin/css/reset.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Admin/css/CMSS.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Content/Admin/scripts/jquery-1.6.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/Admin/scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
</head>
<body>
    <div class="error-container"></div>
<div id="login-wrapper">
    <div class="background">
    <h3>
        <span class="title">CMS</span></h3>
    <div class="form">
        <p class="seperation"></p>
        @using (Html.BeginForm())
        {
            @Html.ValidationSummary(true)
            <table>
                <col class="col-title" />
                <col class="col-value" />
                <tr>
                    <td>@Html.LabelFor(model => model.UserName)</td>
                    <td>
                        @Html.EditorFor(model => model.UserName)
                        @Html.ValidationMessageFor(model => model.UserName)
                    </td>
                </tr>
                <tr>
                    <td class="login-title">@Html.LabelFor(model => model.Password)</td>
                    <td>
                        @Html.EditorFor(model => model.Password)
                        @Html.ValidationMessageFor(model => model.Password)
                    </td>
                </tr>
                <!--<tr>
                        <td colspan="2">
                            <asp:CheckBox ID="cbxRemember" runat="server" Text="Ghi nhớ" />
                        </td>
                    </tr>-->
                <tr>
                    <td></td>
                    <td>
                        <input type="submit" value="Log On" />
                    </td>
                </tr>
            </table>
        }
    </div>

        @if (Model.EnablePasswordReset)
        {
             <p class="forgot-links">
            <a id="forgot-pass">@Html.ActionLink("Forgot Password?", "ForgotPassword")</a></p>
        }
    </div>
    <p class="shadow">
    </p>
    <p class="copyright">
        <span class="copy">© 2011 CMS. All Rights Reserved.</span>
    </p>

    @{Html.RenderAction("ForgotPassword", "Account");}

</div>
<div class="overlay"></div>
</body>
</html> 
```

这是我的控制器：

```
[HttpGet]
        public virtual ActionResult LogOn()
        {
            var viewModel = new LogOnViewModel();
            return View(viewModel);
        }

        [HttpPost]
        public virtual ActionResult LogOn(LogOnViewModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                MembershipUser user = membershipService.GetUser(model.UserName);
                var role = roleService.GetRolesForUser(user.UserName);
                if (authenticationService.LogOn(model.UserName, model.Password, false)) // in CMS do not for remember user for security
                {
                    if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                        && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                    {
                        return Redirect(returnUrl);
                    }
                    else
                    {
                        if (IsAdministrator(role))
                        {
                            return RedirectToAction("Index", "Dashboard", new { area = "Admin" });
                        }
                        return RedirectToAction("Index", "Account");
                    }
                }
                else
                {

                    if (user == null)
                    {
                        ModelState.AddModelError("", "This account does not exist. Please try again.");
                    }
                    else
                    {
                        if (!user.IsApproved)
                        {
                            ModelState.AddModelError("", "Your account has not been approved yet.");
                        }
                        else if (user.IsLockedOut)
                        {
                            ModelState.AddModelError("", "Your account is currently locked.");
                        }
                        else
                        {
                            ModelState.AddModelError("", "The user name or password provided is incorrect.");
                        }
                    }
                }
            }

            // If we got this far, something failed, redisplay form
            return RedirectToAction("LogOn");
        } 
```

我从 Firefox 得到的结果：

![在此处输入图像描述](../Images/727c4bafa0dfbb4f5af59bf00be97d7b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:28:46.563

感谢您的评论，我发现了问题。它是由我的元素设置为无显示引起的。我没有仔细检查。再次感谢！

# sql - 选择案例中的 SQL Sum 行

> ID：13901871
> 
> 赞同：1
> 
> 时间：2012-12-16T13:43:32.643
> 
> 标签：sql, date, select, sql-server-2008-r2, sum

```
ID    M1      M2       M3    M4       DateM2        DateM3      DateM4 
1     2       NULL     NULL  NULL     NULL          NULL        NULL
2     NULL     2       1     1        11.11.2011    15.11.2011  20.11.2011
3     1       NULL     NULL  NULL     NULL          NULL        NULL
4     2       3        1     2        11.12.2012    12.12.2012  13.12.2012
5     1       1        1     1        11.10.2012    12.10.2012  13.10.2012
6     2       2        2     2        12.9.2012     12.12.2012  1.2.2013 
```

我想生成下表，其中包含 ID 列和新列

```
ID M1+M2+M3+M4
1  2
2  4
3  1
4  8
5  4
6  8 
```

新列将是 M1+M2+M3+M4，具有以下规则

1.  M1 总是加到总和中，如果它为空，我将其设置为 0
2.  如果 DateM2 不是 NULL AND DATE1 < DateM2 < DATE2，则将 M2 添加到总和中
3.  如果 DateM3 不是 NULL AND DATE1 < DateM3 < DATE2，则将 M3 添加到总和中
4.  如果 DateM4 不是 NULL AND DATE1 < DateM4 < DATE2，则将 M4 添加到总和

DATE1 和 DATE2 是查询中指定的变量，现在我的问题是我不知道用什么来提高性能我有数十条记录，如果我使用选择案例，欢迎您提供帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:59:22.117

像这样的东西：

```
SELECT
t.ID,
isnull(t.M1,0)+
CASE WHEN t.DateM2 is not null AND @DATE1 < t.DateM2 < @DATE2
     THEN t.M2
     ELSE 0 END +
CASE WHEN t.DateM3 is not null AND @DATE1 < t.DateM3 < @DATE2
     THEN t.M3 
     ELSE 0 END +
CASE WHEN t.DateM4 is not null AND @DATE1 < t.DateM4 < @DATE2
     THEN t.M4 
     ELSE 0 END AS 'M1+M2+M3+M4'
FROM Table1 t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:50:45.833

试试这个：

> DECLARE @Date1 AS DATETIME
> DECLARE @Date2 AS DATETIME
> SET @Date1 = '01 Jan 1900' --在此处设置日期
> SET @Date2 = '01 Jan 1900' --在此处设置日期
> 
> SELECT ID, ISNULL(M1,0) +
> CASE WHEN DateM2 不为 NULL 并且 DateM2 在 @Date1 和 @Date2 之间
> 则为 ISNULL(m2,0) ELSE 0 END +
> CASE WHEN DateM4 不是 NULL 并且 DateM4 在 @Date1 和 @Date2 之间然后 ISNULL(m4,0) ELSE 0 END
> AS [NameOfColumnHere]
> FROM [TablenameHere]

# django - Django 自定义中间件弄乱了会话中间件

> ID：13901873
> 
> 赞同：0
> 
> 时间：2012-12-16T13:43:52.513
> 
> 标签：django, django-middleware

我试图诊断我的自定义中间件中的错误以某种方式降低了我的会话中间件。自定义中间件是一个简单的应用程序，可以删除某些文件夹中的旧文件。

```
class DeleteMediaMiddleware(object):
    time_limit = 100.

    def check_folder(self,folder):
    '''Deletes the files older than "time_limit" '''
        os.chdir(folder)
        files_in_folder = os.listdir(os.curdir)
        for my_file in files_in_folder:
            creation_time = os.path.getmtime(my_file)
            file_lifetime = time.time() - creation_time
            if file_lifetime > self.time_limit:
                os.remove(my_file)

    def process_request(self, request):
    '''Standard middleware method which runs on every request'''
        self.check_folder(config.input_folder)
        self.check_folder(config.output_folder)
        self.check_folder(config.plot_folder)
        self.check_folder(config.report_folder)
    return None 
```

它位于 Django 项目文件夹中。（级别是 Django 默认创建的方式。在我的例子中，项目名为 expofit，文件夹结构为 expofit/expofit）

```
project_folder_lvl1/project_folder_lvl2/mymiddleware.py 
```

我将中间件添加到 Djagno 设置中：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'server.mymiddleware.DeleteMediaMiddleware',
    ) 
```

但是，我最终遇到了错误。

```
Exception Value:    no such table: django_session 
```

这是通过检查views.py中的会话值：

```
....    
if request.session.has_key('user_id'):
.... 
```

一旦我在 Django 设置中禁用了我的中间件，一切正常。

更新：

我成功打开了数据库，这是一个位于 project_folder_lvl1 中的 sqlite 文件，并找到了无法访问的表。

这是完整的 Django 回溯。

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/expofit/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.messages',
'django.contrib.staticfiles',
'expofit_django_app',
'south',
'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'server.mymiddleware.DeleteMediaMiddleware')

Traceback:
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/views/decorators/csrf.py" in wrapped_view
77\.         return view_func(*args, **kwargs)
File "/home/alan/Desktop/expofit/expofit_hg/py/server/expofit_django_app/views.py" in check
59\.         return view(request, *args, **kwargs)
File "/home/alan/Desktop/expofit/expofit_hg/py/server/expofit_django_app/views.py" in start
23\.     if request.session.has_key('user_id'):
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/contrib/sessions/backends/base.py" in has_key
103\.         return key in self._session
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/contrib/sessions/backends/base.py" in _get_session
165\.                 self._session_cache = self.load()
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/contrib/sessions/backends/db.py" in load
19\.                 expire_date__gt=timezone.now()
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/db/models/manager.py" in get
131\.         return self.get_query_set().get(*args, **kwargs)
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/db/models/query.py" in get
361\.         num = len(clone)
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/db/models/query.py" in __len__
85\.                 self._result_cache = list(self.iterator())
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/db/models/query.py" in iterator
291\.         for row in compiler.results_iter():
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py" in results_iter
763\.         for rows in self.execute_sql(MULTI):
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py" in execute_sql
818\.         cursor.execute(sql, params)
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/db/backends/util.py" in execute
40\.             return self.cursor.execute(sql, params)
File "/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py" in execute
337\.             return Database.Cursor.execute(self, query, params)

Exception Type: DatabaseError at /expofit/
Exception Value: no such table: django_session 
```

寻找有关如何调试此问题的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:24:07.347

通过添加到 sqlite 数据库的绝对路径来解决问题。

产生错误的settings.py：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'expofit_database',  
        ...
        ... 
```

新设置.py：

```
PROJECT_PATH = os.path.realpath(os.path.dirname(__file__))
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join( PROJECT_PATH, 'expofit_database'),  
        ...
        ... 
```

据我所知，问题在于调用

```
os.chdir(folder) 
```

在弄乱运行时路径的 check_folder 函数中。尽管设置绝对路径解决了访问数据库的问题，但我删除了 os.chdir(folder) 以防止将来出现潜在错误。

```
def check_folder(folder):
    time_limit = 100.
    files_in_folder = os.listdir(folder)
    for file_name in files_in_folder:
        file_path = os.path.join(folder,file_name)
        creation_time = os.path.getmtime(file_path)
        file_lifetime = time.time() - creation_time
        if file_lifetime > time_limit:
            os.remove(file_path) 
```

# xaml - 带有登录屏幕的 Windows 应用商店应用

> ID：13901875
> 
> 赞同：1
> 
> 时间：2012-12-16T13:44:16.443
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime, winrt-xaml

我需要我的程序以登录屏幕启动，但我不知道如何让它看起来很漂亮。
我尝试了一个代码，如下所示，但我认为这不是“真正的方法”

```
<Page.Resources>
   <Grid Style="{StaticResource LayoutRootStyle}">
      <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
   </Grid>
   <TextBlock HorizontalAlignment="Left" Margin="647,31,0,0" Grid.Row="1" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/>
   <TextBox HorizontalAlignment="Left" Margin="634,62,0,0" Grid.Row="1" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top"/>
   <TextBlock HorizontalAlignment="Left" Margin="647,128,0,0" Grid.Row="1" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/>
   <TextBox HorizontalAlignment="Left" Margin="634,167,0,0" Grid.Row="1" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top"/>
   <Button Content="Button" HorizontalAlignment="Left" Margin="632,243,0,0" Grid.Row="1" VerticalAlignment="Top"/> 
```

任何人都可以告诉我如何创建一个漂亮的登录屏幕作为开始屏幕
我有一个对话框，因为它应该不可能回到它，但我怎样才能用空背景创建它？

**更新**

感谢 DanielRozo 在下面的回答中，我的代码现在看起来像这样

```
<Popup IsOpen="True" Margin="200" Height="260" Width="900">
   <Grid Height="250">
      <TextBlock Style="{StaticResource HeaderTextStyle}" Text="Login" Margin="0" HorizontalAlignment="Center" VerticalAlignment="Top" Height="50" />
      <TextBlock Style="{StaticResource ResourceKey=SubheaderTextStyle}" Text="" Margin="0,63,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" />
      <TextBox Name="InputUsername" Margin="0,63,0,0" HorizontalAlignment="Right" Height="40" Width="650"/>
      <TextBlock Style="{StaticResource ResourceKey=SubheaderTextStyle}" Text="" Margin="0,138,0,0" HorizontalAlignment="Left" VerticalAlignment="Top"/>
      <PasswordBox Name="InputPassword" Margin="0,0,138,0" HorizontalAlignment="Right" VerticalAlignment="Top" Height="40" Width="650"  />
      <Button Name="Login" Content="" Margin="200,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom"  />
      <Button Name="Cancel" x:Uid="LoginPopupCancel" Content="" Margin="300,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom" />
   </Grid>
</Popup> 
```

但是它不起作用，当我旋转屏幕时，所以我创建了[这个问题](https://stackoverflow.com/questions/13904944/login-popup-not-working-when-rotating)
我还需要帮助来弄清楚如何将页面设置为登录页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:17:13.987

使用 Popup 类怎么样？我认为这是你想要的更好的方法。就像是：

```
 <Popup Margin="200" IsOpen="True">
        <Grid Margin="0" Height="322" Width="865">
            <TextBlock Text="App Name Login" Style="{StaticResource HeaderTextStyle}" Margin="252,4,200,266"></TextBlock>
            <TextBlock Text="User" Style="{StaticResource ResourceKey=SubheaderTextStyle}" Margin="244,63,498,223"/>
            <TextBox x:Name="user" Margin="440,62,180,216"></TextBox>
            <TextBlock Text="Pass" Style="{StaticResource ResourceKey=SubheaderTextStyle}" Margin="244,137,498,149"/>
            <TextBox x:Name="pass" Margin="440,138,180,138"></TextBox>
            <Button Name="Login" Content="Login" Margin="613,230,0,54"></Button>
            <Button Name="Cancel" Content="Cancel" Margin="489,230,0,54"></Button>
        </Grid>
    </Popup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:10:09.767

实际上，我强烈建议使用 Web Auth Broker。如果用户使用他们的 LiveID 进行身份验证，WAB 将为您提供该凭据，使您不必为已连接的帐户重新输入凭据。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:03:27.193

我知道您已经将另一个问题标记为答案，但是如果您*需要*让用户登录到您的应用程序，我认为您绝对应该看看 SplashScreen API。覆盖默认的启动画面，每次应用启动时，您都会始终提示用户输入用户名/密码字段；此外，您永远无法返回启动画面，这正是您所说的需要。

您应该查看此示例：[http](http://code.msdn.microsoft.com/windowsapps/Splash-screen-sample-89c1dc78) ://code.msdn.microsoft.com/windowsapps/Splash-screen-sample-89c1dc78 。我还建议你从市场上下载 Evernote：尝试使用 Splashscreen API 制作的应用程序可能会让你更好地理解我在说什么。

# java - 如何在java和php之间发送数据

> ID：13901879
> 
> 赞同：-3
> 
> 时间：2012-12-16T13:44:34.937
> 
> 标签：java, php, connection

我正在编写一个主页，我需要连接到 JAVA 并将一些加密信息发送到 java 并取回一些信息。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:46:17.193

查看 PHP 的[exec()](http://us1.php.net/manual/en/function.exec.php)命令。

```
string exec ( string $command [, array &$output [, int &$return_var ]] ) 
```

它允许您向 shell 发出命令（例如调用 Java 程序等）并将结果返回给 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:47:19.863

只是给你一个想法

1.  编译并构建您的 JAVA 程序，您的程序应该接受命令行参数作为输入并将输出写入 STDOUT（即写入`System.out`using`System.out.print`等。）
2.  然后，在 PHP 中，用于[`exec()`](http://php.net/manual/en/function.exec.php)执行该 jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:53:47.893

> 免责声明：我假设您的意思是将 PHP 或 Java 网站连接到 PHP 或 Java 服务器。

通常当外星系统必须在网络环境中相互通信时——“网络服务”开始发挥作用。在那里，您可以使用 SSL 加密连接来发送和接收消息/数据。

您可以研究阅读的两个流行语是`REST`和`SOAP`。

```
http://stackoverflow.com/questions/209905/rest-and-soap 
```

# objective-c - 我如何将 NSString 与其他两个 NSString 进行比较

> ID：13901881
> 
> 赞同：1
> 
> 时间：2012-12-16T13:44:44.040
> 
> 标签：objective-c, nsstring

我的问题是我有一个 NSString，我必须将它与其他两个 NSString 进行比较。

我如何比较 NSStrings，例如：

```
if(a == (b || c)) 
```

我对此的解决方案还不是很好（但有效）：

```
NSString *a = @"myfirststring";
NSString *b = @"mysecondstring";
if([[NSString stringWithFormat:@"%s", MethodThatReturnsChar*] isEqual:a] || [[NSString stringWithFormat:@"%s",MethodThatReturnsChar*] isEqual:b])
{
} 
```

问题是我必须调用 MethodThatReturnsChar* 两次，这不是必需的，是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T13:48:05.083

> 这没有必要，是吗？

确切地说，这完全是多余的。这就是 C 语言有变量的原因......另外，不要滥用`- [NSString stringWithFormat:]`. 此外，`isEqualToString:`用于比较：

```
NSString *a = [NSString stringWithUTF8String:someCharPtr];
if ([a isEqualToString:b] || [a isEqualToString:c]) {
    DoStuff();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:48:11.873

将该字符串分配给一个变量，然后将其与其他字符串进行比较

```
 NSString *a = @"myfirststring";
    NSString *b = @"mysecondstring";
    NSString *stringIAmComparing = [NSString stringWithFormat:@"%s", MethodThatReturnsChar*];
    if([stringIAmComparing isEqualToString:a] || [stringIAmComparing isEqualToString:b])
    {
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:49:11.577

您可以使用将“MethodThatReturnsChar *”包装到另一个NSString中

```
NSString* stringToCompare = [NSString stringWithCString:yourCString encoding:NSUTF8StringEncoding]; 
```

然后比较：

```
if([stringToCompare isEqualToString:a] || [stringToCompare isEqualToString:b]) 
```

希望有帮助。

# excel - 如何使用 EPPlus 中的数据数组设置单元格值？

> ID：13901896
> 
> 赞同：0
> 
> 时间：2012-12-16T13:46:32.913
> 
> 标签：excel, epplus

我尝试过搜索，但似乎找不到使用数组设置值范围的方法。

我必须使用双循环来执行此操作吗？有没有办法像在 Google App Scripts 中那样使用多维数组？特别是，我正在寻找与EPPlus中的[https://developers.google.com/apps-script/class_range#setValues类似的功能。](https://developers.google.com/apps-script/class_range#setValues)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-02T13:54:25.897

可能感兴趣。我发现[ExcelRangeBase.LoadFromArrays 和 LoadFromCollection](https://epplus.codeplex.com/SourceControl/latest#EPPlus/ExcelRangeBase.cs "这个")但实现使用双循环......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:41:41.313

双循环是唯一的方法。

# file - 如何将外部文件中的文本插入到 div 中？

> ID：13901899
> 
> 赞同：4
> 
> 时间：2012-12-16T13:46:59.327
> 
> 标签：file, html, text, external

正如标题所说；我希望将外部文件*（文本、html、php 等）*的内容放到 div 上。外部文件中基本上有文本，称为： text_1.txt 或 *text_1.html* ，我希望该文本显示在位于主页上的 div 中。

* * *

完美的解决方案是一个非常基本的代码，通过将文本或 html 文件中的文本插入到 div 类中来显示文本：*内容*

这里我用基本代码说明了问题，以此为例编写解决方案。

text_1.html 中的代码：

```
<p>Hello world.</p> 
```

index.html 中的代码：

```
<!doctype html>
<html>
<head>
<title>Homepage</title>
</head>

<body>

<div class="content"></div>

</body>
</html> 
```

这就像我可以说的一样简单。我非常感谢我收到的所有答案，谢谢。

PS这里有一些你应该避免回答的事情：

*   使用 iframe 或任何其他框架类型的解决方案。
*   利用 jquery 等中的 onclick 功能。
*   使用无效的文本字段来替换某些文本。
*   使用虚拟服务器的插入代码或类似方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:48:41.653

除非您使用 PHP、ASP 或 JSP 使用服务器端包含，否则无法执行此操作

[http://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)

如果你想用 php 来做，你可以使用这个：

```
require_once('filename.php'); /* For including files */ 
```

或使用本机函数打开`.txt`页面中的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:57:30.733

你为什么不直接用 jquery 来做呢

```
$(document).ready(function() {
 $('.content').load('text_1.html');
}); 
```

# php - PHP array_push 不适用于 jquery $_REQUEST 对象

> ID：13901900
> 
> 赞同：0
> 
> 时间：2012-12-16T13:47:02.820
> 
> 标签：php, jquery, jquery-ui-droppable, array-push

在[http://maureenmoore.com/momp_112412/112412.html](http://maureenmoore.com/momp_112412/112412.html)我正在尝试制作一个被拖入可放置框的 div 数组。请查看查看源代码。

我使用 $.post 将 div 发送到 php 文件 process.php ，它给我 1 到 3 个数组，具体取决于我拖动了多少个 div 而不是一个组合数组。我想使用将 $_REQUEST 对象（即删除的 div）推送到数组中

```
$stack = array();
foreach ($_REQUEST as $key => $value) {
            array_push($stack,$value);
          }
print_r($stack); 
```

但它给了我 1 到 3 个数组，每个数组的键为零。如何从例如 3 个拖动的 div 中获取一个数组？

### 从链接移植的代码：

```
$(document).ready(function(){
  $( "#draggable1" ).draggable({ grid: [ 20,20 ] });
  $( "#draggable2" ).draggable({ grid: [ 20,20 ] });
  $( "#draggable3" ).draggable({ grid: [ 20,20 ] });     

  $( "#droppable_box" ).droppable({                
     drop: function( event, ui ) {
       var data = $(ui.draggable).attr('id');
       $("#response").append(data);
       $('#myId').click(function(event){
         $.post("process.php",({id : data}),function(data,status){  
          alert("Data: " + data);
         });
       });
      }
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:50:51.063

我不完全确定为什么您的代码会在 中给出相同的键`$stack`，但您可以将代码重写为这个单行代码：

```
$stack = array_values($_REQUEST); 
```

顺便说一句，制作一个盲目的副本`$_REQUEST`似乎并没有那么有用:)

**更新**

您现在已经添加了 JavaScript；这段代码：

```
$('#myId').click(function(event){
     $.post("process.php",({id : data}),function(data,status){  
      alert("Data: " + data);
     });
   }); 
```

应该放在您的`.droppable()`声明之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:52:07.447

您在 drop 函数内绑定 click，如果进行了 3 个 drop，则绑定 3 次，并触发 3 个 ajax 请求等。

它需要更像这样：

```
$(document).ready(function() {
    var data = [];
    $("#draggable1").draggable({ grid: [20, 20] });
    $("#draggable2").draggable({ grid: [20, 20] });
    $("#draggable3").draggable({ grid: [20, 20] });

    $("#droppable_box").droppable({
        drop: function(event, ui) {
            data.push($(ui.draggable).attr('id'));
            $("#response").append($(ui.draggable).attr('id'));
        }
    });

    $('#myId').click(function(event) {
        $.post("/echo/html/", ({ id: data }), function(return_data, status) {
            alert(data);
        });
    });
});​ 
```

在服务器端，你会得到它`$_POST['id'];`

# php - 用 jquery/javascript 删除奇怪的符号

> ID：13901904
> 
> 赞同：2
> 
> 时间：2012-12-16T13:47:28.377
> 
> 标签：php, javascript, jquery

我正在使用代理来获取谷歌结果。然后我将其显示为纯 html。问题是我时不时地得到一个奇怪的符号，而且看起来像这样……</p>

我知道这可能与我的 proxy.php 和语言/字符设置有关。但由于我不了解 PHP，我想知道是否可以使用 jquery/javascript 删除此符号。我试过了`display:none`，`&('�').remove();`但没有运气。

ps 我不知道您是否看到与我在浏览器中看到的符号相同的符号，但如果您没有：它是“？” 在一个黑色的小方块内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:17:43.060

您应该强制`charset`您的响应标题为`UTF-8`（或其他适合您需要的字符集），或者您之前可以使用[mb_convert_encoding在服务器端转换所有 unicode 字符](http://php.net/manual/en/function.mb-convert-encoding.php)

示例（取自手册页）

```
<?php
$text = "A strange string to pass, maybe with some ø, æ, å characters.";

foreach(mb_list_encodings() as $chr){
    echo mb_convert_encoding($text, 'UTF-8', $chr)." : ".$chr."<br>";   
}
?> 
```

# c# - 将数据从 web 表单发送到 winforms

> ID：13901908
> 
> 赞同：0
> 
> 时间：2012-12-16T13:47:35.987
> 
> 标签：c#, asp.net, web-services

您好，我必须开发一个应用程序，在该应用程序中，我能够将一些数据（通知）从我的 webform 发送到 windows 窗体，类似地从 winform 发送到 webform。

有人告诉我，我必须为此目的使用网络服务。所以如果有人请告诉我我该怎么做？

我为此目的使用 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:00:46.140

Web 表单 -> Win 表单的一般模式：

1.  将 WCF 服务添加到您的 Win forms 应用程序。
2.  实现接口。
3.  使用 ServiceHost 并在初始化代码中的某处启动服务。
4.  启动您的 Win Forms 项目。
5.  在您的 Web 表单项目中，选择 References -> Add Service Reference。
6.  在 Forms 应用程序的配置文件中输入 URL。（这是在您创建服务时添加的）应该会发现服务并自动生成代理代码。
7.  重建 Web 表单项目，您应该可以访问 Win 表单服务方法。

其他方向的服务类似，但不需要 ServiceHost 实现（IIS 会自动托管服务）

您可能还需要进一步的配置。可能不同的绑定和安全性。

# javascript - 如何检查鼠标是否在 Chrome 中的通知窗口上？

> ID：13901909
> 
> 赞同：1
> 
> 时间：2012-12-16T13:47:39.710
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

[http://developer.chrome.com/extensions/notifications.html](http://developer.chrome.com/extensions/notifications.html)

只有当用户的鼠标不在正在显示的通知窗口上方时，我才需要在 X 秒后关闭通知窗口。

```
var notification = webkitNotifications.createNotification(
  'icon.png',
  'Notification titile',
  'Notification body text'
);

notification.show();

// TODO: Close notification window only if user's mouse is not over it
setTimeout(function() { notification.cancel() }, 10000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:56:58.270

我已经有一段时间没有接触过 Chrome 扩展程序了，但我上次这样做时，您可以使用 HTML 文件作为通知的内容。

所以我要做的是：

*   如果您可以在通知中使用 JavaScript 关闭通知，则只需使用普通的 onmouseover/onmouseout 将鼠标是否在通知上存储在布尔值中，并在加载后立即从通知中启动超时。

*   如果您不能做同样的事情，但让通知与后台页面*对话*以使其关闭通知。

# apache - PHP：传递 URL 变量时遇到问题

> ID：13901914
> 
> 赞同：1
> 
> 时间：2012-12-16T13:48:05.513
> 
> 标签：apache, mod-rewrite, url-rewriting

我已经通过了一百万次 URL 变量，包括在我正在使用的当前服务器上。由于某种原因，我在没有已知的服务器更改或升级时遇到了困难。

网址： [http ://www.thisismydomain.net/sched/mycalendar/2012/2](http://www.thisismydomain.net/sched/mycalendar/2012/2)

脚本：/sched/menu.php?currentYear=$1¤tWeek=$2

仅供参考，示例 URL 正常工作：[http ://www.thisismydomain.net/sched/menu.php?currentYear=2012¤tWeek=2](http://www.thisismydomain.net/sched/menu.php?currentYear=2012&currentWeek=2)

**.htaccess 文件**

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(thisismydomain\.net)$ [NC]
RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L]

RewriteRule ^sched/mycalendar/([^/]+)/([^/]+)/?$ /sched/menu.php?currentYear=$1&currentWeek=$2 [QSA,L] 
```

结果：

*

> 未找到 在此服务器上未找到请求的 URL /sched/mycalendar/2012/2。此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

*

关于我做错了什么的任何想法？谢谢

# c - C中的对齐属性

> ID：13901917
> 
> 赞同：2
> 
> 时间：2012-12-16T13:48:20.340
> 
> 标签：c

我在 SO 中看到了很多关于对齐属性的问题，但是我没有在哪里找到优势或何时使用它（我的意思是我们必须在哪里以及在哪些场景中使用这个概念）。任何人都可以明确它的图片。刚刚从一个 SO 问题中复制了一个程序 一个用于对齐属性参考的程序

```
int main()
{
    结构数据
    {
        int a __attribute__( ( 对齐 ( 8 ) ) ) ;
        char ch __attribute__( ( 对齐 ( 1 ) ) ) ;
        float s __attribute__( ( 对齐 ( 4 ) ) ) ;    
    } ;
    结构数据 e ;
    printf ( "\n%u %u %u", &e.a, &e.ch, &e.s ) ;
    printf ( "\n%d", sizeof ( e ) ) ;
    返回 0 ;
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:00:10.847

对齐的重要性主要体现在性能和可移植性上。如果您不了解您正在使用的平台的对齐要求，您的代码可能不一定能够在那里运行，或者一旦有人移动未正确对齐到该平台的代码（或数据），它就会中断。

根据硬件和操作系统等因素，其中一些会为您处理，但您会因制动对齐规则而受到一些惩罚。默认情况下，旧的 Windows 版本在发生对齐错误时会导致进程崩溃，今天 Windows 将能够恢复，但代价是额外的 CPU 周期。

对齐属性是强制对齐的 GCC 特定功能（它与 C 语言无关），对齐是您的数据必须在内存中布置的某个数字的倍数。然后，编译器将在您的数据结构中插入垃圾，以确保满足您对编译器施加的约束。

让我们以您的问题为例：

```
struct data
{
    int a    __attribute__( ( aligned ( 8 ) ) ) ;
    char ch  __attribute__( ( aligned ( 1 ) ) ) ;
    float s  __attribute__( ( aligned ( 4 ) ) ) ;
} ; 
```

我们假设在这种情况下`int`，`float`我们假想平台上的原生大小都是 4 字节。

在内存中布局的最终​​结构将更接近

```
struct data
{
    int a;        // 0x00   
    int junk0     // 0x04
    char ch;      // 0x08
    char junk1[3] // 0x09
    float s;      // 0x0C
} ; 
```

我不确定编译器是否会填充第一个整数，以便它在最终结构中实际占用 8 个字节。仅仅因为填充，它不会是 64 位的，我觉得很奇怪，因为它会假设结构仅放置在 64 位地址上，所以在 32 位架构中，如果你分配内存，只有当内存对齐在一个 8 的倍数的地址是可以的。也许这是为了让它更便携，以确保它在 32 位和 64 位上的行为相同。

编译器可以选择更激进，实际上浪费更多空间，但是有包指令可以解决这个问题。如果本机二进制兼容性对您来说真的很重要，那么这些事情真的很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:51:09.733

第一个用例是当您有一个`char`用于存储其他内容的数组时，您需要将 allign 强制为正确的类型。

第二种情况是二进制协议，当您读取特定布局的数据（来自网络或文件）时，您需要使用对齐强制布局。

# angularjs - 使用计时器更新范围时angularjs中的奇怪行为

> ID：13901921
> 
> 赞同：0
> 
> 时间：2012-12-16T13:49:05.997
> 
> 标签：angularjs

我正在编写一个计时器指令来使用时间循环输出函数的结果。

[http://jsfiddle.net/U3q4U/1/](http://jsfiddle.net/U3q4U/1/)

现在我遇到的问题是代码在 jsfiddle 上完美运行 - 日期每 4 秒更新一次，而数字每秒增加 1。

但是，如果您将代码复制并粘贴到 html 文件（并链接到 angularjs 库）中，则在范围上调用 $apply 将无法正常工作 - 数字不会定期更新并且会跳跃（例如从 5 到 8）。

有问题的指令是这样的：

```
<gx:timer interval="1000" fn="fn1" output="out"></gx:timer> 
```

我在 Firefox 和 chrome 上都试过这个。行为是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:24:42.750

更新了你的 jsfiddle 并让它在 js fiddle 之外工作，没有问题

*   JSFiddle在这里：http: [//jsfiddle.net/U3q4U/3/](http://jsfiddle.net/U3q4U/3/)
*   也在 JSbin 上工作：http: [//jsbin.com/ucugih/2/edit](http://jsbin.com/ucugih/2/edit)

问题可能是`<script>`您使用的多个标签并两次定义同一个模块

```
var app = angular.module('gx', []);
var app = angular.module('gx'); 
```

# c# - 尝试显示 ContextMenu 并单击其父级时出现 StackOverflowException

> ID：13901923
> 
> 赞同：3
> 
> 时间：2012-12-16T13:49:48.370
> 
> 标签：c#, wpf, contextmenu, stack-overflow

我在 WPF 中遇到了一个奇怪的行为。尽管有很多方法*可以避免*这个问题，但我试图更好地理解它发生的**原因**：

我创建了一个新的 WPF 应用程序，只是添加了一个按钮，该按钮具有`ContextMenu`：

```
<Grid>
    <Button x:Name="btnTest" Margin="10,10,10,10" 
            MouseEnter="BtnTest_OnMouseEnter" MouseLeave="BtnTest_OnMouseLeave">
        <Button.ContextMenu>
            <ContextMenu x:Name="myContext">
                <TextBlock Text="Context Menu Text"></TextBlock>
            </ContextMenu>
        </Button.ContextMenu>
    </Button>      
</Grid> 
```

在我用来显示和隐藏`MouseEnter`ContextMenu的代码中：`MouseLeave`

```
private void BtnTest_OnMouseEnter(object sender, MouseEventArgs e)
{
    myContext.PlacementTarget = btnTest;
    myContext.Placement = PlacementMode.Bottom;
    myContext.IsOpen = true;
}

private void BtnTest_OnMouseLeave(object sender, MouseEventArgs e)
{
    myContext.IsOpen = false;
} 
```

所以现在 -`ContextMenu`当鼠标在按钮上时，我看到按钮下方，当鼠标离开按钮时，它隐藏起来。

**但是**当我***单击按钮***时出现异常

> WindowsBase.dll 中出现“System.StackOverflowException”类型的未处理异常

问题是 -**为什么**鼠标点击会触发这个异常？我没有在 Click 事件上运行任何我的代码，但不点击就不会发生异常......

顺便说一句：如果我用例如替换按钮也会发生同样的`Image`情况，所以它似乎不是由特定控件引起的......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T13:51:53.190

像这样更改您的 XAML：

```
 <Grid>
        <Popup x:Name="myContext">
            <TextBlock Text="Context Menu Text"></TextBlock>
        </Popup>

    <Button x:Name="btnTest" Margin="10,10,10,10" 
        MouseEnter="BtnTest_OnMouseEnter" MouseLeave="BtnTest_OnMouseLeave">
    </Button>      
    </Grid> 
```

我认为您的代码中存在这种循环：

1.  你输入按钮，弹出窗口显示
2.  您单击，弹出隐藏（上下文菜单的默认行为）
3.  按钮获得焦点，再次显示弹出窗口

如果设置 ContextMenu 的“StaysOpen”属性会发生什么？如果您不再有这种行为，我的怀疑是正确的。

# objective-c - iOS 6 上的新 Google 地图实施崩溃

> ID：13901926
> 
> 赞同：2
> 
> 时间：2012-12-16T13:50:12.080
> 
> 标签：objective-c, google-maps, ios6

我成功地将 Google 的新 SDK 实施到我在 iOS 6 上的测试项目中。当我从那里的教程中添加代码时，我得到了这样的异常：

```
GoogleMapsBack[7306:5103] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'GMSCachedTile''
*** First throw call stack:
(0x27b0012 0x25d5e7e 0x10373e7 0x34bea 0x30c52 0x2a4f53f 0x2a61014 0x2a51418 0x2a512a6 0x2a52280 0x2a52450 0x97401e12 0x973e9cca)
libc++abi.dylib: terminate called throwing an exception 
```

有谁知道这是什么问题？ [https://developers.google.com/maps/documentation/ios/start](https://developers.google.com/maps/documentation/ios/start)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:28:52.323

您忘记了第 4 步：“将 GoogleMaps.bundle 从 Resources 文件夹拖到您的项目中。我们建议将其放在 Frameworks 组中。出现提示时，请确保未选择将项目复制到目标组的文件夹中。” 我遇到了同样的问题，这解决了它。问候， 托默

# oop - nextTick 在类中的用法

> ID：13901927
> 
> 赞同：0
> 
> 时间：2012-12-16T13:50:34.177
> 
> 标签：oop, node.js, coffeescript

如果我有这样的代码：

```
class SomeClass
  constructor: ->
    @someAttr = false

  someFunction: ->
    process.nextTick ->
      @someAttr = true

obj = new SomeClass
obj.someFunction()
obj.someAttr # Would still be false, because the @ (this) is in the process context 
```

它不起作用，因为 process.nextTick 将我们带入了一个不同的上下文，其中没有定义 @someAttr。我该如何解决这个问题（当我想调用 SomeClass 的方法时）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T14:08:21.270

解决这个问题的常用方法是将引用存储`this`在一个局部变量中，该变量将在匿名函数中可用。在 JavaScript 中：

```
function someFunction() {
  var self = this;
  process.nextTick(function() {
    self.someAttr = true;
  });
} 
```

CoffeeScript 有一个特殊的语法来帮助解决这个问题；“[胖箭头](http://coffeescript.org/#fat_arrow)”：

```
class SomeClass:
  someFunction: ->
    process.nextTick =>
      @someAttr = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:12:27.090

使用`=>`而不是`->`保留`this`变量。

```
class SomeClass
  constructor: =>
    @someAttr = false

  someFunction: ->
    process.nextTick =>
      @someAttr = true 
```

# java - 在 Java 中劫持监听器，传入额外的参数

> ID：13901931
> 
> 赞同：0
> 
> 时间：2012-12-16T13:50:51.810
> 
> 标签：java, swing, model-view-controller, actionlistener

我正在构建一个简单的应用程序，并在一个简单的 MVC 模式中实现它，其中控制器将事件处理程序添加到视图中。这是一个将处理程序附加到 UI 的示例控制器代码。

基本上，当单击 UI 的保存按钮时，代码会添加一个事件处理程序。UI 包含名称和 ID 号条目。我想要发生的是将名称和 ID 号传递给`actionPerformed`函数。

```
ui.onAddStudent(new ActionListener(){
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.print("test");
    }
}); 
```

UI中的接收函数（在另一个文件中）如下。

```
public void onAddStudent(ActionListener handler){
    //something missing here
    addStudent.addActionListener(handler);
} 
```

我不是很喜欢Java，因为它不是我的强项。我实际上是在做 JavaScript。现在，一个类似的处理程序在 JavaScript 中，可以使用`call()`or`apply()`方法来调用处理程序*并*传入额外的参数。如果上面的代码是在 JS 中，它会像

```
//in the controller
ui.onAddStudent(function(event,id,name){
    //I can use id and name
});

//in the UI
ui.onAddStudent = function(handler){
    //store into a cache
    //add handler to the button
}

//when student is added (button clicked)
handler.call(this,event,id,name); 
```

我如何在 Java 中做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:04:14.627

你有两个选择：

*   让它保持原样，让控制器从 GUI 中获取 ID 和名称（这是最简单和最简单的解决方案，恕我直言）
*   使用您自己的事件和侦听器类型，包含此信息。例如：

    ```
    public class StudentAddedEvent {
        private long ID;
        private String name;
        ...
    }

    public interface StudentAddedListener {
        void studentAdded(StudentAddedEvent event);
    } 
    ```

UI 会在按钮上注册一个 ActionListener，这个动作监听器会做：

```
@Override
public void actionPerformed(ActionEvent e) {
    long id = getIdInGui();
    String name = getNameInGui();
    StudentAddedEvent event = new StudentAddedEvent(id, name);
    for (StudentAddedListener listener : studentAddedListeners) {
        listener.studentAdded(event);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:08:04.320

您也可以定义自己的`Action`s，并将它们设置为按钮（构造函数参数或 setAction）和其他组件。

为此扩展 AbstractAction。

# javascript - 如何在 kineticjs 中将事件“转发”（鼠标）到较低 Zindex 上的节点/形状

> ID：13901932
> 
> 赞同：2
> 
> 时间：2012-12-16T13:51:00.507
> 
> 标签：javascript, kineticjs

我正在使用 kineticjs，其中有一个带有一层的舞台。该图层上有多个形状，它们对鼠标悬停事件做出反应（它们显示工具提示）除了这些形状之外，我还有一些位于更高 ZIndex 上的文本节点（因此它们位于形状上方）。

这一切都很好，除了一个例外，当文本位于形状顶部时，形状不显示工具提示我认为这是因为 textnode 使用事件，而不是“转发”它，即使我没有绑定任何东西到文本节点。

如何将事件传播到较低 ZIndex 上的节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:36:14.463

就我个人而言，我会创建一个单独的图层来放置您不想注册鼠标事件的任何内容，并且在创建图层时将其`listening`属性设置为 false。
您还可以为单个元素设置 this 属性。
这是一个使用图层的示例...

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 200
});

var normalLayer = new Kinetic.Layer();
var textLayer = new Kinetic.Layer({listening :false});

var rect = new Kinetic.Rect({
    x: 20,
    y: 20,
    width: 100,
    height: 50,
    fill: 'green',
    stroke: 'black',
    strokeWidth: 4
});

rect.on('click', function(evt) {
    this.setFill('blue');
    normalLayer.draw();
});

normalLayer.add(rect);

var simpleText = new Kinetic.Text({
        x: 40,
        y: 40,
        text: 'Simple Text',
        fontSize: 30,
        fontFamily: 'Calibri',
        textFill: 'yellow'
      });

textLayer.add(simpleText);

stage.add(normalLayer);
stage.add(textLayer); 
```

[http://jsfiddle.net/MT435/](http://jsfiddle.net/MT435/)
请记住，`listening`也可以为单个元素设置属性。

# twitter-bootstrap - 如何使用引导框架将表单放入弹出框？

> ID：13901937
> 
> 赞同：6
> 
> 时间：2012-12-16T13:51:25.553
> 
> 标签：twitter-bootstrap

我想要做的是在弹出框中放置一个简单的表单，现在我的弹出框工作正常，但是当我将表单放入弹出框时它不起作用。

这是我的输出

![在此处输入图像描述](../Images/5389f88a30679dbeb7a8bf0a76a60ec6.png)

这是我的代码

```
<a href="#" class="btn" rel="popover" data-placement="bottom" data-content="
<form class='form-horizontal'>
<div class='control-group'>
<label class='control-label' for='inputEmail'>Start Date</label>
<div class='controls'>

<input type='text' class='span3 ' name='start_date' id='start_date' placeholder='News Date' value='<?php echo date('d-m-Y'); ?>' >
</div>
</div>
<div class='control-group'>
<label class='control-label' for='inputEmail'>End Date</label>
<div class='controls'>
<input type='text' id='end_date' name='end_date' placeholder='End Date' class='input-xlarge uneditable-input'>
</div>
</div>
</form>" title="Popover on bottom">         
</a> 
```

这是教我 [在引导弹出窗口中执行此类包含表单的网址？](https://stackoverflow.com/questions/12128425/contain-form-within-a-bootstrap-popover)

我的引导版本是 2.2.2，知道如何解决我的问题吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T13:55:25.477

您可以在包含弹出框`data-html="true"`的标签上设置`<a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:31:33.273

看看这个 jsfiddle，我用了 3 个简单的按钮： [这里](http://jsfiddle.net/moalla/fsRaN/2/)

我在 jquery 变量中复制了我的 html 代码：

```
var mycontent='<div class="btn-group"> <button class="btn">Left</button> <button class="btn">Middle</button> <button class="btn">Right</button> </div>' 
```

即使您删除它也可以正常工作 `html: true,`

# java - 如何使用apache POI在ms word doc中创建带有rowspan和colspan的表？

> ID：13901938
> 
> 赞同：3
> 
> 时间：2012-12-16T13:51:26.770
> 
> 标签：java, apache-poi

我正在使用 APACHE POI 创建包含表格的 word doc。表格如下所示，我想用rowspan和colspan创建单元格（如图）。

![在此处输入图像描述](../Images/048d7ed380f6941322078ba0c8e46d04.png)

是否可以使用 APACHE POI ？

是否有任何其他相同的java库。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T13:43:19.930

你可以试试这个。

```
 public class Word2Doc {
   public static void main(String aaa[]){
System.out.println("This is Word To Document Class");

File file = null; 
       FileOutputStream fos = null; 
       XWPFDocument document = null; 
       XWPFParagraph para = null; 
       XWPFRun run = null; 
       try { 
           // Create the first paragraph and set it's text. 
           document = new XWPFDocument(); 
           para = document.createParagraph(); 

           para.setAlignment(ParagraphAlignment.CENTER); 

           para.setSpacingAfter(100); 

           para.setSpacingAfterLines(10);
           run = para.createRun(); 
           run.addBreak();    // similar to new line
           run.addBreak();

           XWPFTable table = document.createTable(4, 3);

           table.setRowBandSize(1);
           table.setWidth(1);
           table.setColBandSize(1);
           table.setCellMargins(1, 1, 100, 30);

           table.setStyleID("finest");

           table.getRow(1).getCell(1).setText("EXAMPLE OF TABLE");
           table.getRow(2).getCell(1).setText("fine");
           XWPFParagraph p1 = table.getRow(0).getCell(0).getParagraphs().get(0);
           p1.setAlignment(ParagraphAlignment.CENTER);
                   XWPFRun r1 = p1.createRun();
                   r1.setBold(true);
                   r1.setText("Test Name");
                   r1.setItalic(true);
                   r1.setFontFamily("Courier");
                   r1.setUnderline(UnderlinePatterns.DOT_DOT_DASH);
                   r1.setTextPosition(100);

          //Locating the cell values
                    table.getRow(0).getCell(1).setText("Value"); 
                    table.getRow(0).getCell(2).setText("Normal Ranges"); 

                   table.getRow(2).getCell(2).setText("numeric values");

                    table.setWidth(120);

           file = new File("c:\\nwhpe.docx"); 
           if(file.exists())
               file.delete();

           FileOutputStream out = new FileOutputStream(file);
           document.write(out);
           out.close();
       } catch(Exception e){e.printStackTrace();}
    }

       } 
```

# java - 为进度条设置固定值

> ID：13901940
> 
> 赞同：1
> 
> 时间：2012-12-16T13:51:36.193
> 
> 标签：java, android, progress-bar

我正在开发一个将使用进度条的应用程序。

问题是我不想使用该方法`setProgressBar()`，只是因为我想手动调节加载量。

事实上，例如，当我使用 时，`setProgress(20)`条形图每次都会更新 20。

我的意思是，我需要调用一种“set”方法，它将输入作为参数，并在进度条上设置固定数量，而不是一次又一次地改变它。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:04:04.703

正如文档所述：

> setProgress(int 进度)
> 
> 将当前进度设置为指定值。

这意味着您可以将进度条的进度设置为您想要的固定值。您唯一需要做的就是在正确的时间调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-08T11:09:52.370

你应该这样写！

```
ProgressDialog progressdialog = new ProgressDialog(this);
progressdialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
progressdialog.setCancelable(false);
progressdialog.show(); 
```

最后，您应该使用此方法设置进度

```
progressdialog.setProgress(1); 
```

# wordpress - Wordpress 分类法用法

> ID：13901945
> 
> 赞同：0
> 
> 时间：2012-12-16T13:51:58.797
> 
> 标签：wordpress, taxonomy

有人可以解释为什么我应该在我的网站上使用分类法吗？我真的不明白它的好处。我是 wordpress 的新手，我已经阅读了法典。不要觉得有必要只用几行来回答你的问题，这样我就能得到一个小小的理解。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:53:55.473

分类法是对帖子或自定义帖子类型进行分组/排序的一种方式。我最近在一个房地产网站上使用它们，这是我所拥有的：

*   Wordpress 帖子是博客上的文章
*   我创建了一个与帖子具有相同功能的“列表”自定义类型

我的分类如下（它们具有类别行为）： - 地点 - 类型：公寓、房屋或商业 - Wordpress 类别用于博客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:36:48.593

分类法有利于 SEO。这是查找网站内容的好方法。此外，您可以使用链接来帮助您的用户。单击此链接，他可以查看具有该分类的内容列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T22:40:38.143

一个小例子：我为酒厂建立网站。有些人希望按葡萄酒风格进行导航，例如“红色”、“白色”、“起泡”、“强化”等产品的链接列表。我可以为此使用标签，但通过创建自定义分类法我'能够给 URL 一个 slug “style” 而不是 “tag”，因此是 “example.com/style/red” 和 “example.com/style/white”。

# java - 在不向前看的情况下删除选择冲突 - JavaCC

> ID：13901948
> 
> 赞同：3
> 
> 时间：2012-12-16T13:52:08.417
> 
> 标签：java, regex, compiler-construction, javacc

我正在尝试在 JavaCC 中制定以下生产规则，但出现选择冲突错误。我知道如何使用前瞻来修复它，但我的印象是我们不允许将它用于我们的任务。

```
void statement() #void:{}
{
  <ID> (<ASSIGN>(expression() | <STRING> ))| <LEFTBRACKET>argument_list()<RIGHTBRACKET>
| <NOT>expression()
| <QUESTIONMARK><ID>
| <LEFTBRACE>(statement()<SEMICOLON>)*<RIGHTBRACE>
| <IF>condition()<THEN>statement()                  <-- Conflict, parser will always pick this one
| <IF>condition()<THEN>statement()<ELSE>statement() <-- 
| <WHILE>condition()<DO>statement()
| {}
} 
```

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:57:19.587

这是[JavaCC 前瞻教程](http://javacc.java.net/doc/lookahead.html)中的经典“悬空其他”问题。您应该将两个产品替换为具有可选`if`的单个产品；您还应该在 前面添加，如下所示：`if-then-else``else``LOOKAHEAD(1)``else`

```
| <IF>condition()<THEN>statement()
| <IF>condition()<THEN>statement()<ELSE>statement() 
```

变成

```
| <IF>condition()<THEN>statement() [LOOKAHEAD(1) <ELSE>statement()] 
```

# haskell - 创建 Haskell HTTP 请求时出错

> ID：13901949
> 
> 赞同：2
> 
> 时间：2012-12-16T13:52:21.597
> 
> 标签：haskell, network-programming, cabal

我正在尝试创建一个`Request`值并收到以下错误：

```
ghci> :m +Network.HTTP Network.URI Data.Maybe
ghci> Request { rqURI = fromJust $ parseURI "http://www.google.com", rqMethod = GET, rqHeaders = [], rqBody = ""}

<interactive>:18:19:
    Couldn't match expected type `network-2.3.1.0:Network.URI.URI'
                with actual type `URI'
    In the `rqURI' field of a record
    In the expression:
      Request
        {rqURI = fromJust $ parseURI "http://www.google.com",
         rqMethod = GET, rqHeaders = [], rqBody = ""}
    In an equation for `it':
        it
          = Request
              {rqURI = fromJust $ parseURI "http://www.google.com",
               rqMethod = GET, rqHeaders = [], rqBody = ""} 
```

`cabal list network`显示以下内容：

```
* network
    Synopsis: Low-level networking interface
    Default available version: 2.4.0.1
    Installed versions: 2.3.1.0, 2.4.0.1
    Homepage: https://github.com/haskell/network
    License:  BSD3 
```

从 Hackage 的文档中，我相信我创建的 URI`parseURI`是`Network.URI.URI`.

我在 OS X Mountain Lion 上运行 Haskell Platform 2012.4.0.0（64 位）。

这是我听说的“阴谋集团地狱”的一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:31:11.657

您的[`HTTP`](http://hackage.haskell.org/package/HTTP)包是使用 构建的[`network-2.3.1.0`](http://hackage.haskell.org/package/network-2.3.1.0)，但 ghci 加载最新版本，`network`除非明确告知要使用哪个版本。

所以`parseURI`返回 a`Maybe network-2.4.0.1:Network.URI.URI`但`Request`需要来自 的类型`network-2.3.1.0`。

你可以

*   使用指定要使用`-package`的版本的标志调用 ghci , ,`network``$ ghci -package network-2.3.1.0 other arguments`
*   重建`HTTP`和所有依赖于它的东西`network-2.4.0.1`——在这种情况下，重建所有传递依赖的东西可能会更好`network-2.3.1.0`。

> 这是我听说的“阴谋集团地狱”的一个例子吗？

我还不会称其为“地狱”，但这确实是一个小例子。

# objective-c - iOS 模拟器上的照片库

> ID：13901951
> 
> 赞同：3
> 
> 时间：2012-12-16T13:52:30.390
> 
> 标签：objective-c, ios, xcode, ios-simulator

我有 xcode 4.5.2 并使用 iOS 6。我需要创建照片库，我必须保留照片并仅使用模拟器显示我的应用程序。而且我找不到可以粘贴我的照片的目录（如 iPhone 上的照片库）以进一步浏览这张照片到我的应用程序。或者如何在 iOS 模拟器中浏览照片到应用照片。我看到了一些链接，例如

```
Users/Library/Application Support/iPhone Simulator/5.0/Media/DCIM 
```

但我没有这样的目录=(

所以如果我会使用

```
UIImagePickerControllerSourceTypePhotoLibrary 
```

如果我只使用没有任何苹果设备的 iOS 模拟器，我必须在哪里找到照片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:33:55.483

如果 DCIM 尚不存在，您可能需要创建它。

您可以通过点击并按住图像在模拟器中添加来自 safari 的照片。如果您将图像（或任何其他文件，如 PDF）拖到模拟器中，它将立即打开 Safari 并显示图像，因此这是一种获取图像的非常简单的方法。

简单的步骤：

1）将图像拖放到模拟器上 - 这将打开一个带有您的图像的浏览器

2）单击并按住图像 - 这将打开选项

3）保存图像 - 这会将图像复制到模拟器上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:32:10.137

这是在 xcode 模拟器中向照片添加图像的方法。通过选择您的应用程序并运行它来启动模拟器。然后在 xcode 中停止运行操作，以便您可以转到模拟器中的主屏幕。将图像拖放到模拟器屏幕中。根据您使用的 xcode 版本，保存图像的方式会有所不同。我使用 Xcode 4.5。在 4.5 中，当您放置图像时，它会打开一个类似窗口的 Web 视图。在屏幕的底部，您可以点击中间的图标，它会为您提供共享选项和图标。只需将图像保存到那里的照片中即可。希望这可以帮助。

# php - firefox 自动保存会话

> ID：13901952
> 
> 赞同：0
> 
> 时间：2012-12-16T13:52:31.110
> 
> 标签：php, session, firefox

> **可能重复：**
> [Firefox 会话 cookie](https://stackoverflow.com/questions/777767/firefox-session-cookies)

我有这个代码

```
session_start();

$_SESSION['login'] = "bla";

var_dump($_SESSION); 
```

`$_SESSION['login'] = "bla";`如果我在 Firefox 中执行此页面，然后从脚本中删除此行，然后关闭并重新打开浏览器，Firefox 会显示：`["login"]=> string(3) "bla"`

也就是说，firefox 在关闭浏览器后保存会话数据。为什么会这样？

PS这仅在Firefox中发生，其他浏览器都按预期工作，即结果是空数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:38:00.573

Firefox cannot save $_SESSION. $_SESSION is entirely a server side variable. It does not come to Firefox except that it will set a session cookie which is used only by php to find out the right user session on the server.

The reason you have been getting the `["login"]=> string(3) "bla"` is because you had set it in the first run. Do this:

First run the script

```
session_start();

$_SESSION['login'] = "bla";

var_dump($_SESSION); 
```

Then delete the `$_SESSION['login'] = "bla";` line from the script and run it. It should still show that login key is set in session variable. Then run a separate script:

```
session_start();

$_SESSION['login'] = null;
// OR 
// unset($_SESSION['login']);

var_dump($_SESSION); 
```

Then try to see the value of the Session variable and the value of 'login' key would be gone.

What I mean to say is: if you set something in the session, it will persist and you do not have to set it everytime the script runs. TO remove the value from session variable, you have to explicitly remove it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:05:45.450

您确定您正在测试脚本的正确版本吗？您可能希望在测试脚本中添加其他内容以确保例如*回*显当前时间。

这里可能出现的一种情况是浏览器的所有实例共享同一个 cookie jar。为了强制浏览器删除会话 cookie，您必须关闭**所有**窗口和选项卡。这在“现实生活”中从来都不是问题，但是当您似乎无法退出时，它常常让开发人员发疯！

# nginx - 绑定地理负载平衡与 Nginx 地理负载平衡

> ID：13901953
> 
> 赞同：0
> 
> 时间：2012-12-16T13:52:45.653
> 
> 标签：nginx, bind

我想搭建基于 GEO 的负载均衡服务器，哪种方案更好？绑定或 Nginx 或结合绑定和 nginx ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:49:39.123

好吧，负载均衡器也不是。您可能应该先熟悉这两种软件，然后看看哪一种更适合您。没有最好的，只有最合适的。

# emacs - 如何避免在 Emacs 中弹出 *Async Sh ell Command* 缓冲区？

> ID：13901955
> 
> 赞同：20
> 
> 时间：2012-12-16T13:52:54.830
> 
> 标签：emacs, asynchronous, dired

My`~/.emacs`包含以下设置，用于使用某些应用程序打开某些文件（Ubuntu 12.10；Emacs 24）：

```
(setq dired-guess-shell-alist-user
      '(("\\.pdf\\'" "okular ? &")
    ("\\.djvu\\'" "okular ? &")
        ("\\.mp3\\'" "vlc ? &")
    ("\\.mp4\\'" "vlc ? &")
    )) 
```

当我导航到 .pdf in`dired-mode`并点击`!`时，它会在 Okular 中打开 .pdf，但是 dired-buffer 分为两部分，第二部分现在是一个无用的`*Async Shell Command*`缓冲区，其中包含如下内容

```
okular(25393)/kdecore (KConfigSkeleton) KCoreConfigSkeleton::writeConfig:
okular(25393)/kdecore (KConfigSkeleton) KCoreConfigSkeleton::writeConfig:
okular(25393)/kdecore (KConfigSkeleton) KCoreConfigSkeleton::writeConfig:
okular(25393)/kdecore (KConfigSkeleton) KCoreConfigSkeleton::writeConfig: 
```

如何防止打开此缓冲区？（除了，也许，如果有一个错误，这个信息是有用的）。

我在[这里](https://stackoverflow.com/questions/6915314/emacs-automatically-close-async-output-buffers-on-command-completion)和[这里](https://stackoverflow.com/questions/3679930/how-to-automatically-remove-or-prevent-popping-up-async-shell-command-in-ema)找到了相关的问题，但它们似乎处理异步执行的特定命令，而不是`*Async Shell Command*`一般的（如果可能的话，我想改变异步进程的一般行为，而不仅仅是某些文件类型）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-04-10T08:21:01.317

[在这里](https://groups.google.com/d/msg/gnu.emacs.help/TNqE7R7mULk/ZV6VaeIiOHQJ)找到这个：

```
(call-process-shell-command "okular&" nil 0) 
```

为我工作。没有标准错误 gobbledygook。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-12-01T05:29:15.200

这个问题是在 2012 年提出的，在我撰写本文时，最新的答案是 2015 年。现在，在 2017 年，我可以说答案很简单：

```
(add-to-list 'display-buffer-alist
  (cons "\\*Async Shell Command\\*.*" (cons #'display-buffer-no-window nil))) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-12-20T16:29:08.213

我捎带了 user1404316 的答案，但这是实现预期结果的另一种通用方法。

```
(defun async-shell-command-no-window
    (command)
  (interactive)
  (let
      ((display-buffer-alist
        (list
         (cons
          "\\*Async Shell Command\\*.*"
          (cons #'display-buffer-no-window nil)))))
    (async-shell-command
     command))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T03:53:54.207

一般来说，我不完全确定是否为异步进程执行此操作，但对于任何经过的事情`async-shell-command`，这应该有效：

```
 (defadvice async-shell-command (around hide-async-windows activate)
       (save-window-excursion
          ad-do-it)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-29T18:39:08.440

遗憾的是，没有避免这个缓冲区的好方法，因为它是由“shell-command”函数直接调用的（“async-shell-command”只是一个包装器）。

因此，一个更好的方法是将 'async-shell-command' 替换为 ' [start-process](http://www.gnu.org/software/emacs/manual/html_node/elisp/Asynchronous-Processes.html#Asynchronous-Processes) '。您应该使用“ [set-process-sentinel](http://www.gnu.org/software/emacs/manual/html_node/elisp/Sentinels.html#Sentinels) ”启动进程，以检测进程发出“退出信号”的时刻。然后杀死进程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T15:15:46.317

稍微复杂一点的咒语应该可以得到你想要的。只需使用 shell 命令，例如： `(okular ? >& /dev/null &)`.

我没有用 okular 对此进行测试，但我可以这样做`M-!` `((echo foo; sleep 10; echo bar) >& /dev/null &)`，并且 Emacs 会立即返回，而无需创建新的缓冲区。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-03T11:04:10.350

我用这个方法解决了这个问题：

```
;list of programs, corresponding to extensions
(setq alist-programs
      '(("pdf" ."okular")
        ("djvu" . "okular")
        ("mp3" . "xmms")))

(defun my-run-async-command (command file)
  "Run a command COMMAND on the file asynchronously.
   No buffers are created"
  (interactive
   (let ((file (car (dired-get-marked-files t current-prefix-arg))))
     (list
      ;last element of alist-programs, contains COMMAND
      (cdr
       (assoc
        (file-name-extension file)
        alist-programs))
      file)))
  ;begin of function body
  (if command ;command if not nil?
      (start-process "command" nil command file)
    )
)

;attach function to <f2> key
(add-hook 'dired-mode-hook
      (lambda ()
    (define-key dired-mode-map (kbd "<f2>") 'my-run-async-command))) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-23T13:12:19.480

当然，如果他在路径上运行不同的程序，则使用 start-process 的建议是可以的。但是，如果您想在特定目录（例如您的项目目录）中运行一些 shell 命令，那么只需平息弹出窗口 - 您经常需要缓冲区，但不希望它在您的脸上跳跃。例如，我运行一个网络服务器，我想查看输出，但不是现在......

```
 (use-package php-mode
    :config
    (add-to-list 'display-buffer-alist
    (cons "\\*Symfony Web Server\\*.*" (cons #'display-buffer-no-window nil)))
    (defun php-mode-webserver-hook ()
      (if (projectile-project-root) (let ((default-directory (projectile-project-root)))
        (unless (get-buffer "*Symfony Web Server*" )
          (async-shell-command "bin/console server:run" "*Symfony Web Server*")))))
    :hook (php-mode . php-mode-webserver-hook)) 
```

# vb.net - 使用 EPPlus 库从 SQL Server 导出到 Excel 时出现“内存不足”异常

> ID：13901956
> 
> 赞同：1
> 
> 时间：2012-12-16T13:53:17.240
> 
> 标签：vb.net, excel, sqlconnection, datareader, epplus

我正在使用 EPPlus .NET 库将数据从 SQL Server 导出到 Excel 文件。

我正在使用`SqlConnection`该类来读取数据。对于`SqlDataReader`光标的每一行，我遍历对应行的所有 Excel 单元格，并输入来自阅读器的数据。

问题是当我将这个函数用于大型表时，我遇到了“内存不足”错误。`Read`我需要一种方法来在CURSOR中创建某种缓冲区。

一个简洁的代码示例：

```
Dim sqlConnection As SqlConnection = New SqlConnection()
sqlConnection.ConnectionString = sqlConnectionString.ConnectionString 'connectionstring built before

Dim query As SqlCommand = New SqlCommand(query...)

Dim newFileStream As New FileStream("c:\junk\test.xlsx", System.IO.FileMode.Create,System.IO.FileAccess.ReadWrite)

Using excelApp As New ExcelPackage(newFileStream)
    sqlConnection.Open()
    Dim sqlReader As SqlDataReader = query.ExecuteReader()

    Dim numOfColumns As Byte = sqlReader.FieldCount()
    Dim rowNumber As Integer = 1

    While sqlReader.Read()
        Dim currentColumn As Byte

        For currentColumn = 1 To numOfColumns
            ws.Cells(rowNumber,currentColumn).Value = sqlReader.Item(currentColumn - 1)
        Next
     rowNumber += 1             
    End While

    excelApp.Save()
End Using

newFileStream.Close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:40:45.627

因为当您达到 Excel 的限制时，无论如何您都必须拆分文件，所以这里有一些代码可以从数据库中读取成块到多个 Excel 文件中：

```
static class Program
{
    private static string _dataSource;
    private static string _database;
    private static string _table;
    private static string _outputPath;
    private static int _batchSize;

    public static void Main()
    {
        try
        {
           _dataSource = ConfigurationManager.AppSettings["DataSource"];
           _database = ConfigurationManager.AppSettings["Database"];
           _table = ConfigurationManager.AppSettings["Table"];
           _outputPath = ConfigurationManager.AppSettings["OutputPath"];
           _batchSize = int.Parse(ConfigurationManager.AppSettings["BatchSize"]);

            CreateExcel(_dataSource, _database, _table, _outputPath, "SELECT * FROM " + _table);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }

        Console.WriteLine("All done!");
    }

    public static void CreateExcel(string dataSource, string databaseName, string tableName, string outputFilePath, string queryNoParameters)
    {
        var sqlConnectionString = new SqlConnectionStringBuilder
            {
                DataSource = dataSource,
                InitialCatalog = databaseName,
                IntegratedSecurity = true
            };

        using (var connection = new SqlConnection(sqlConnectionString.ConnectionString))
        {
            connection.Open();
            using (var command = new SqlCommand { Connection = connection, CommandType = CommandType.Text, CommandText = queryNoParameters })
            using (var sqlReader = command.ExecuteReader())
            {
                int i = 0;
                while (WriteExcelFile(tableName, GetFileInfo(databaseName, tableName, outputFilePath, i++),
                                      sqlReader, sqlReader.FieldCount, _batchSize))
                {
                    Console.WriteLine("Reading next batch...");
                }
            }                
        }
    }

    private static bool WriteExcelFile(string tableName, FileInfo fileInfo, IDataReader sqlReader, int numOfColumns, int count)
    {
        using (var excelPackage = new ExcelPackage(fileInfo))
        {
            ExcelWorksheet worksheet = excelPackage.Workbook.Worksheets.Add(tableName);

            Console.WriteLine("Populating header row...");
            for (var currentColumn = 1; currentColumn <= numOfColumns; currentColumn++)
            {
                worksheet.Cells[1, currentColumn].Value = sqlReader.GetName(currentColumn - 1);
                worksheet.Column(currentColumn).Style.Numberformat.Format =
                    TranslateSystemtypeToExceltype(sqlReader.GetFieldType(currentColumn - 1));
            }

            Console.WriteLine("Reading data rows...");
            int rowNumber = 2;
            while (rowNumber <= count + 1 && sqlReader.Read())
            {
                for (var currentColumn = 1; currentColumn <= numOfColumns; currentColumn++)
                    worksheet.Cells[rowNumber, currentColumn].Value = sqlReader[currentColumn - 1];
                rowNumber++;
            }

            if (rowNumber == 2) //nothing read
            {
                Console.WriteLine("Nothing to read, reached end of table!");
                return false;
            }

            Console.WriteLine("Saving Excel file...");
            excelPackage.Save();
            return rowNumber == count + 2; //in which case we want to read more
        }
    }

    private static FileInfo GetFileInfo(string databaseName, string tableName, string outputFilePath, int i)
    {
        return new FileInfo(Path.Combine(outputFilePath,
                                      Path.ChangeExtension(
                                          string.Format("{0}_{1}_{2}", databaseName, tableName.Replace('.', '-'), i), "xlsx")));
    }

    public static string TranslateSystemtypeToExceltype(Type sysType)
    {
        if (sysType == typeof(string))
            return "@";
        if (sysType == typeof(DateTime))
                return "dd/MM/YYYY";
        if (sysType == typeof(Decimal))
                return "0.000";
        if (sysType == typeof(bool))
                return "@";
        if (sysType == typeof(int))
                return "0";
        if (sysType == typeof(short))
                return "0";
        if (sysType == typeof(double))
                return "0.000";
        return "General";
    }
} 
```

# javascript - jquery .on 本身

> ID：13901958
> 
> 赞同：2
> 
> 时间：2012-12-16T13:53:42.320
> 
> 标签：javascript, events, jquery

我想要一个元素来侦听实际上由自身触发的自定义事件。自定义事件可能会从后代触发，但应该被忽略。重要的是它源于自身。它也需要是一个事件，因为我可能需要额外的祖先来监听事件。

.on ( [http://api.jquery.com/on/](http://api.jquery.com/on/) ) 方法能够提供此功能。选择器参数可以用作过滤器。但是，这**不能**过滤出侦听器元素本身。

简而言之：
-事件必须能够冒泡
-触发器和侦听器是同一个元素
-如果自定义事件由祖先触发，则侦听器必须忽略自定义事件

这是如何实现的？

**根据要求使用案例**

我使用 jquery UI 对话框小部件

```
$el = $('#dialogDiv');
$el.on('customEvent', $el /* Won't work */, function() {
    //Do whatever
});
$el.dialog({
    open: function() {
        $el.trigger('customEvent');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:09:24.287

删除不工作的部分，将使其工作。

```
$el = $('#dialogDiv');
$el.on('customEvent', function(e) {
    //Do whatever
});
$el.dialog({
    open: function() {
        $el.trigger('customEvent');
    }
}); 
```

但是，您要求的是普通事件可能不支持的其他功能。您应该考虑设置一个[jQuery 特殊事件](http://docs.jquery.com/Events/jQuery.Event#Special_Events)。查看[Ben Alman 的这篇很棒的文章](http://benalman.com/news/2010/03/jquery-special-events/)。

当涉及到您的先决条件时：

*   一个事件总是能够冒泡，除非它的传播受到阻碍`event.stopPropagation()`或`event.stopImmediatePropagation()`
*   触发器和监听器已经在同一个元素上
*   除非您传递一些可以识别触发它的元素并检查它是否是祖先的参数，否则侦听器将不知道是什么触发了它

请参阅[jsFiddle 上的测试用例](http://jsfiddle.net/g8HYC/2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:10:24.380

您可以传递给的选择器`.on()`用于委托目标以匹配可以处理单击事件的元素（它应该是字符串，而不是对象）。

但在您的情况下，这不是必需的，因为您的选择器和委托目标是同一件事，所以这应该按预期工作：

```
$el.on('customEvent', function(evt) {
    //Do whatever
}); 
```

要检测事件是否来自后代，您将`evt.target`与元素本身进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T14:14:13.093

`.on`工作正常; 忽略祖先检查`e.target`：

```
$el.on('customEvent', function(e) {
  if(e.target === this) {
    //Do whatever
  }
}); 
```

# wcf - 无法启动服务。无法注册网址

> ID：13901960
> 
> 赞同：13
> 
> 时间：2012-12-16T13:53:49.813
> 
> 标签：wcf, windows-services, hosting, localhost

我想在窗口服务中托管 wcf。我之前做过几次，没有任何问题。这次在我安装了服务并单击开始后，我在 EventViewer 中收到以下错误。

`Service cannot be started. System.ServiceModel.AddressAccessDeniedException: HTTP could not register URL http://+:.../.../. Your process does not have access rights to this namespace (see http://go.microsoft.com/fwlink/?LinkId=70353 for details).`

当我在 ConsoleApplication 上托管相同的服务时，相同的地址 - 好的。

[我在这里](https://stackoverflow.com/questions/8727293/http-could-not-register-url-http-8000-hellowcf-your-process-does-not-have)和[这里](https://stackoverflow.com/questions/885744/wcf-servicehost-access-rights)看到了问题，但没有一个解决方案对我有帮助。

有人有想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T14:17:03.730

至于你的答案，那是一个霰弹枪调试。您现在拥有具有管理员权限的网络服务：

[本地系统帐户（Windows）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684190(v=vs.85).aspx)：

> LocalSystem 帐户 [...] 在本地计算机上具有广泛的权限，并充当网络上的计算机。它的令牌包括 NT AUTHORITY\SYSTEM 和 BUILTIN\Administrators SID；这些帐户可以访问大多数系统对象。
> 
> 大多数服务不需要如此高的特权级别。如果您的服务不需要这些权限，并且它不是交互式服务，请考虑使用 LocalService 帐户或 NetworkService 帐户。有关详细信息，请参阅服务安全和访问权限。

[因此，您最好将此服务作为 NetworkService 运行，并按照配置 HTTP 和 HTTPS](http://msdn.microsoft.com/en-us/library/ms733768.aspx)中的说明授予它使用您尝试使用的端口的适当权限：

```
netsh http add urlacl url=http://+:80/MyUri user="NT AUTHORITY\NETWORK SERVICE" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T14:04:40.423

我发现将安装程序帐户更改为 LocalSystem 完成了这项工作:-)

# architecture - 直接连接到 IP 摄像机或通过服务器流式传输视频更好吗？

> ID：13901963
> 
> 赞同：0
> 
> 时间：2012-12-16T13:53:57.410
> 
> 标签：architecture, video-streaming, amazon-cloudfront

我们有一个 IP 摄像机，我们有 100 人有兴趣每天 12 小时观看直播。

如果我们允许人们直接连接到摄像头，那么该位置的带宽就会受到冲击，IP 摄像头必须真正达到最高范围，并且视频质量会下降。

如果我们通过服务器流式传输视频，似乎成本变得天文数字，每个用户都在增加。

以最实惠的方式设计该系统的优缺点是什么？最好的建议是什么？

**更新**：目前我能找到的所有直播服务都使用单播。使用单播，每个用户都有自己的流媒体，这意味着您的每个用户的带宽成本会增加。如果您以 24x7x365 进行流式传输（例如使用 Amazon CloudFront），这将非常昂贵。（在我的情况下，我们将全年流式传输 12 小时，每周 5 天，但仍然单播带宽成本使其无法使用）

我需要的是一种存在于云中但我找不到的多播服务。思科似乎已经收购了一家做我正在寻找的公司，但现在你需要打电话给他们询问，所以我认为它需要一个胳膊和一条腿。

[http://www.cisco.com/en/US/products/ps6552/products_ios_technology_home.html](http://www.cisco.com/en/US/products/ps6552/products_ios_technology_home.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:20:24.513

每位用户的成本将如何增加？

在我看来，最好使用服务器流式传输视频，原因如下：

## 优点

1.  最有可能的是，服务器的带宽限制将低于 IP 摄像机本身。
2.  可扩展性：服务器将比 IP 摄像机更好地处理更多负载，并提供随着请求增加轻松扩展服务的选项。
3.  总体 QoS 更好。你随时准备迎接未来。
4.  成本得到优化。如果您在云上托管您的服务 - 您需要为使用的内容付费。你得到的回报是可靠性。
5.  绝对更灵活，您可能希望在此基础上开发其他增值服务 - 没有人知道明天。

## 缺点

1.  看起来更贵 - 但如果你关心质量，真的是这样吗？
2.  想不出缺点了。也许管理成本？不知道全图...

## 我写在这里是因为评论部分会让人难以阅读：

所以我们开始...

我同意 PlanetStream 很贵。以 800kbps 的速率流式传输 720 分钟（12 小时 - 1 天）的费用为 250.00 英镑 - 荒谬！

对于 100 位观众和上面给出的参数，你得到的是 411.987 GB/天。

这相当于每 GB 0.6068 英镑。或每 GB 0.9811 美元。

我强烈建议您看看[Amazon CloudFront](http://aws.amazon.com/cloudfront/)的[定价](http://aws.amazon.com/cloudfront/pricing/)：前 10 TB/月每 GB 0.120 美元。即使您消费更多，价格也会变得更便宜。

**最后，根据我的计算（如果我在任何地方都没有犯错），Amazon CloudFront 每天只需支付 30.58 英镑，而 Planet Stream 每天只需支付 250.00 英镑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T12:22:16.770

我使用 Wowza Media Server 进行 IP 摄像机转播，但最终它非常昂贵（主要是服务器维护）。现在我们使用像 angelcam.com 这样的 IP 摄像头流媒体提供商（但其他的很少）。主要优点是我不再关心 IP 摄像机的兼容性。我们有许多相机品牌，有时需要很长时间才能让一些相机正常工作。

# c++ - 阻止所有模板派生类型的通用模板函数

> ID：13901964
> 
> 赞同：2
> 
> 时间：2012-12-16T13:53:57.913
> 
> 标签：c++, templates, c++11, metaprogramming, overloading

这个问题跟在这个问题后面：[函数重载和模板推导优先级](https://stackoverflow.com/q/13900616/882932)

考虑以下类：

```
template<typename T1, typename T2> 
class Base {};

class Derived0 : public Base<double, double> {};

template<typename T1, typename T2, typename T3> 
class Derived1 : public Base<T1, T2> {};

template<typename T1, typename T2, typename T3, typename T4> 
class Derived2 : public Base<T3, T4> {}; 
```

以及以下功能：

```
template<typename T> f(const T& x); // version A
template<typename T1, typename T2> f(const Base<T1, T2>& x); // version B 
```

我的问题是`f(double)`会调用`version A`（ok），`f(Base<double, double>)`会调用`version B`（ok），但`f(Derived1<double, double, double>)`会调用`version A`（请参阅开头的另一个问题的链接）。

使用C ++ 11，如何阻止`version A`和强制`version B`所有派生成员和是`Base<T1, T2>`什么？`T1``T2`

注意：如果可能的话，我想避免添加辅助类，而是更喜欢将成员添加到提供的类中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:09:19.490

这是一个可能对你有用的特征。

**特质类：**

```
#include <type_traits>

template <typename, typename> struct Base { };

template <typename T> struct isbase
{
    typedef char yes;
    typedef yes no[2];

    template <typename U, typename V> static yes & test(Base<U, V> const &);
    static no & test(...);

    static bool const value = sizeof(test(std::declval<T>())) == sizeof(yes);
}; 
```

**应用：**

```
#include <iostream>

template <typename T>
typename std::enable_if<!isbase<T>::value>::type f(T const &)
{
    std::cout << "f(T const &)\n";
}

template <typename T1, typename T2>
void f(Base<T1, T2> const &)
{
    std::cout << "f(Base<T1, T2> const &)\n";
} 
```

**例子：**

```
template<typename T1, typename T2, typename T3>
struct Derived1 : public Base<T1, T2> {};

int main()
{
    std::cout << isbase<double>::value << std::endl;
    std::cout << isbase<Base<int, char>>::value << std::endl;
    std::cout << isbase<Derived1<bool, bool, bool>>::value << std::endl;

    f(double{});
    f(Base<int, char>{});
    f(Derived1<bool, float, long>{});
} 
```

* * *

**泛化：**我们可以做一个更通用的特征来检查一个类型是否派生自一个模板实例：

```
template <typename T, template <typename...> class Tmpl>
struct derives_from_template
{
    typedef char yes;
    typedef yes no[2];

    template <typename ...Args> static yes & test(Tmpl<Args...> const &);
    static no & test(...);

    static bool const value = sizeof(test(std::declval<T>())) == sizeof(yes);
}; 
```

用途：`derives_from_template<T, Base>::value`等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:09:40.900

我认为您可以为您`B`的类模板提供一个标记类型作为成员，并导致一般模板的实例化在存在时失败。通常，SFINAE 以相反的方式工作，但使用间接它仍然可以工作。

```
template<typename T1, typename T2> 
class Base {
public:
    struct isBase {};
};

template <typename T>
struct is_base {
    template <typename S> char (&test(typename S::isBase*))[1];
    template <typename S> char (&test(...))[2];
    enum { value = sizeof(test<T>(0)) == 1 };
};

template <typename T>
typename std::enable_if<!is_base<T>::value>::type f(T value) {
    ...
}; 
```

该解决方案基本上与 KerrekSB 的解决方案类似，但不需要明确拼出支持的类型：它使用标签`isBasd`（可能应该拼写更独特）来检测类型`Base`或派生的对象。

# testng - 从命令行运行时，TestNG 错误无法在类路径中找到类

> ID：13901965
> 
> 赞同：1
> 
> 时间：2012-12-16T13:54:02.763
> 
> 标签：testng

我正在尝试通过命令行运行 testng，并且在类路径中有以下内容：

testng jar，编译后的测试用例文件的 jar。testng.xml 指向层次结构中的适当类。

在 Maven 中一切正常，但是当尝试从命令行运行它时：

```
java -classpath .;C:/dev/farm-controller/tests/testng-6.8.jar org.testng.TestNG "C:/dev/farm-controller/tests/testng.xml" 
```

我收到以下错误：

> [TestNG] [错误] 在类路径中找不到类：com.company.rest.FarmControllerTest

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:01:34.497

如果你指的是一个罐子，那么你应该放 * 而不是 . 在您的类路径或明确的 jar 名称中。

# jquery - 使用jQuery删除另一个表中的表

> ID：13901966
> 
> 赞同：1
> 
> 时间：2012-12-16T13:54:17.220
> 
> 标签：jquery, html-table

我有一个表，其中包含另一个我想用 jQuery 删除的表。该表位于原始表的其中一行中，我实际上想删除该行。原始表是一个名为 table 的 jQuery 对象。

```
<table>
<tbody>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td colspan="3">
            <table>
                <tbody>
                    <tr>
                        <td></td>
                        <td></td>   
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>      
                    </tr>
                </tbody>
            </table>
        </td>
    </tr>
</tbody></table> 
```

我尝试了不同的方法，例如以下 4 个示例，但没有任何成功：

```
if ($(table).is('tr')){
    if (('tr').(':has(table)') $('tr').remove(); 
}

if ($(table, 'tr').has('table')) {
    $(table).find('table').remove();
};

if ($(table, 'tr').has('table')) {
    $('tr').remove();
};

$(table, 'tr').siblings().children('table').remove(); 
```

我不确定我是在正确的轨道上还是在完全错误的树上吠叫！！

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:59:36.297

这就是我想出的

```
​$('table').find('table').parents('tr').remove()​​​; 
```

[jsFiddle](http://jsfiddle.net/gVWz2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:28:20.740

在创建行时给它一个 ID，这将使以后更容易删除它，并使 DOM 搜索更有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:56:22.550

这是经过测试并且工作正常：

> **[http://jsfiddle.net/2JfhA/](http://jsfiddle.net/2JfhA/)**

```
$('table').find('table').closest('tr').remove(); 
```

这是在做什么：在里面然后`first get the first table`里面有这张桌子。`then find and child table``remove the closest tr`

结帐小提琴。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-16T13:58:02.287

这已经足够了

```
$(table).find('table').parents("tr").eq(0).remove(); 
```

您不需要任何“如果”，因为如果没有嵌套表，则无需删除任何内容。

# java - 集群环境中的 Log4j

> ID：13901970
> 
> 赞同：0
> 
> 时间：2012-12-16T13:54:31.890
> 
> 标签：java, webserver, log4j

我正在将 log4j 用于在集群环境中运行的 Web 应用程序。在少数情况下，某些进程（不是特定的）的日志记录会丢失。我无法指出原因。在单个服务器实例上运行时，它工作正常。我正在使用每日滚动文件附加程序。要添加/修改的任何其他属性？Async Appender 会有帮助吗？对此有任何解决方案吗？

**编辑：**以下是我打算使用的 log4j XML 和 AsyncAppender

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="true">
    <appender name="appLog" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="/logs/app.log" />
        <param name="DatePattern" value="'.'yyyy-MM-dd" />
        <param name="Threshold" value="DEBUG" />
        <param name="Append" value="true" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p (%F:%L) - %m%n" />
        </layout>
    </appender>

    <appender name="async" class="org.apache.log4j.AsyncAppender">
        <param name="BufferSize" value="256" />
        <param name="LocationInfo" value="true"/> 
        <appender-ref ref="appLog" />
    </appender>

    <root>
        <priority value="debug" />
        <appender-ref ref="async" />
    </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:39:16.933

Without you attaching your Log4J configuration, plus some information about your cluster topology, it is impossible to know for sure, but: what you're describing that could very well happen if there's a mismatch between how you configure Log4J, and how your application is configured to run in a cluster.

For example, if both cluster members run on the same physical machine, and your application is using the very same Log4J configuration file in *both* instances, then effectively, you have two different JVM's logging into the same files at once. That isn't going to work very well.

Generally speaking, you should avoid a situation in which two different classloaders write into the same physical files.

**UPDATE** (following attachment of `log4j.xml`): assuming that your clustered servers run on the same physical machine, the configuration you attached will end up with multiple log4j configurations logging into the same physical files (log4j "lives" in the context of a classloader, and you have multiple servers - hence multiple classloaders, on the same physical machine). This is not going to work, because the two log4j "instances" don't have a way to synchronize writing into that file.

An `AsyncAppender` isn't going to help you. All that `AsyncAppender` does is that it buffers the logging requests so your program gets control *before* the log lines are actually written. It doesn't solve the problem of synchronizing writing into the very same file.

There are two ways to resolve it:

1.  Have each JVM log into a different log file. Actually, give it a shot and witness that it works.
2.  Use a `SocketAppender` instead. All your logging (from all server instances) will end up being sent over a network connection, and a server program (provided by log4j) will collect them and write them into a file. Explanation how to use it can be found [here](https://stackoverflow.com/questions/11759196/log4j-how-to-use-socketappender).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:34:21.497

根据**Isaac**给出的建议，以避免两个不同的类加载器/jvm 写入同一个物理日志文件的情况：

> 有两种方法可以解决它：
> 
> 1.  让每个 JVM 登录到不同的日志文件中。实际上，试一试并见证它有效
>     
>     
> 2.  请改用 SocketAppender。您的所有日志记录（来自所有服务器实例）最终将通过网络连接发送，服务器程序（由 log4j 提供）将收集它们并将它们写入文件。说明如何使用它可以在这里找到。

对于第 1 点，以下方法可以工作：

利用：

```
<param name="File" value="${sys:log4j.logFile}" /> 
```

反而：

```
 <param name="File" value="/logs/app.log" /> 
```

对于 JVM1，设置 JVM 属性：log4j.logFile=/logs/ **jvm1** /app.log

对于 JVM2，设置 JVM 属性：log4j.logFile=/logs/ **jvm2** /app.log

有关更多详细信息和其他选项：请参阅：[link1](https://stackoverflow.com/questions/2810926/how-to-give-dynamic-file-name-in-the-appender-in-log4j-xml)、[link2](http://logging.apache.org/log4j/2.x/manual/configuration.html#PropertySubstitution)

# cordova - 可以将使用流星的 phonegap 应用部署到应用商店吗？

> ID：13901971
> 
> 赞同：4
> 
> 时间：2012-12-16T13:54:31.500
> 
> 标签：cordova, app-store, meteor

我知道meteor 可以与PhoneGap 一起使用，但是在应用程序商店已批准的使用meteor 的phonegap 应用程序中是否有任何示例？

我已经使用 PhoneGap 发布了几个非流星应用程序，所以我了解这个过程。我相信 Apple 对流星的问题可能是流星应用程序实时更新代码的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:28:59.007

**更新**：

Meteor 的客户端/服务器通信是通过使用`WebSockets`. AFAIK，`WebSocket`可通过 PhoneGap 实现，并且不会让您的应用被拒绝（iOS 或 Android）。可能需要进行一些工作才能使用`WebSockets`PhoneGap。这是关于它的 StackOverflow 帖子：

[Socket.io + PhoneGap](https://stackoverflow.com/questions/10738073/socket-io-phonegap)

至于使用 PhoneGap 和 Meteor 构建的 App Store 应用程序，我认为目前很难找到。

* * *

**原件**：

我想没有人能明确回答这个问题。这是因为 Apple 会根据您的内容、性能和演示文稿对您的应用程序进行评分和拒绝。

如果您的 PhoneGap 应用程序感觉像一个网络应用程序或运行缓慢，它将被拒绝。

这是我的个人经历（尤其不是流星）。

今年早些时候，我的公司使用 PhoneGap 和 SenchaTouch 开发了一款应用程序。它在 Apple App Store 被拒绝，因为评论者认为该应用程序感觉太像 webapp。在 SenchaTouch 的帮助下，我们的应用看起来非常原生。但是有明显的性能差异。我认为这就是最终导致拒绝的原因。

最后，我们不得不采用原生方式，否则无法达到相同的性能。我认为马克扎克伯格也同意。

# php - 如何在生产中禁用 Symfony2 中的分析器？

> ID：13901972
> 
> 赞同：15
> 
> 时间：2012-12-16T13:54:33.727
> 
> 标签：php, symfony, symfony-2.0

如何在生产中禁用 Symfony2 中的分析器？

我不是指工具栏——我指的是分析器。

我想在生产中禁用它，我将它广泛用于开发，因此删除其捆绑包的解决方案是行不通的。

我试过设置`framework.profiler.only_exceptions`为true。我已经尝试`framework.profiler`完全删除该部分。无论 profiler.db 在*每个*请求之后增长什么，并且*每个*响应都包含`x-debug-token`标头。

我仔细检查了配置文件（config.yml 和 config_prod.yml），一切似乎都很好。

更重要的是，该命令`app/console router:dump-apache --no-debug`总是转储`_wdt`和`_profiler`路由，但我的 routing_prod.yml 中没有它们，并且在尝试从浏览器访问它们时它们似乎不存在（404）。

我正在运行 symfony 2.0，我现在不会升级，因为 2.1 中的一些重大更改需要重写许多元素。在初始部署之前启动它是不明智的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T11:58:28.503

## Symfony >= 2.2

从 Symfony 2.2 开始，分析器支持`enabled`框架配置中的标志，并且在`test`环境中默认禁用。

```
# app/config/config_test.yml
framework:
    profiler:
        enabled: false 
```

有关更多详细信息，请参阅Fabien Potencier 的[有关 Profiling 的博客条目和](http://symfony.com/blog/new-in-symfony-2-2-functional-tests-speed-up)[FrameworkBundle 配置参考](https://symfony.com/doc/3.4/reference/configuration/framework.html#reference-profiler-enabled)。

[**更新：这个标志在Symfony 4.0**](https://symfony.com/doc/master/reference/configuration/framework.html#reference-profiler-enabled)中仍然有效。

* * *

## Symfony <= 2.1

**在 Symfony <= 2.1 中，如果配置中没有`framework.profiler`密钥，则探查器将完全禁用。**

您可以在 Symfony2 FrameworkBundle 配置的[ProfilerPass中看到这一点。](https://github.com/symfony/FrameworkBundle/blob/2.1/DependencyInjection/Compiler/ProfilerPass.php#L25)

这是默认情况`config.yml`和`config_prod.yml`（包括前者）的情况。因此，如果您没有修改默认配置，那很好。

**然而`config_dev.yml`，默认设置是：**

```
framework:
    profiler: { only_exceptions: false } 
```

这可以对`dev`环境和所有导入的环境进行分析，`config_dev.yml`例如`config_test.yml`.

**如果要在后续配置中取消设置探查器值，请使用：**

```
framework:
    profiler: false 
```

值喜欢`{}`或`~`不会取消设置值。你必须使用`false`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:19:41.487

你试过这个吗（只为开发启用）

> 由于分析器增加了一些开销，您可能只想在生产环境中的某些情况下启用它。唯一例外设置将分析限制为 500 个页面，但是如果您想在客户端 IP 来自特定地址或网站的有限部分时获取信息怎么办？您可以使用请求匹配器：

```
framework:
    profiler:
        matcher: { ip: 192.168.0.0/24 } 
```

[http://symfony.com/doc/current/book/internals.html#profiler](http://symfony.com/doc/current/book/internals.html#profiler)

或者

可以通过执行以下操作在每个操作的基础上禁用探查器：

```
if(in_array($this->container->get('kernel')->getEnvironment(), array('prod'))) {
    $this->container->get('profiler')->disable();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T18:23:45.403

我想通了，但我仍然不确定为什么探查器设置不起作用。`--no-debug`每次更改配置后，我确实清除了缓存。

首先，我检查了FrameworkBundle 的[配置](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/DependencyInjection/Configuration.php#L119)，发现 profiler conf 节点有`canBeDisabled()`. 然后我检查了它[的确切](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Config/Definition/Builder/ArrayNodeDefinition.php#L243)含义。

事实证明，每个`canBeDisabled`节点都有一个`enabled`默认值设置为的隐含子节点`true`。您可以覆盖它或将父节点直接设置为`false`或`null`禁用该部分。如果您只是省略分析器部分，则默认情况下启用它。

也许我在文档中错过了它，但我很确定应该在[这里](http://symfony.com/doc/2.0/reference/configuration/framework.html)提到它。此外，在我看来，探查器应该在生产中默认禁用。从长远来看，我无法想象在生产环境中运行分析器会有什么好处。如果有人证明我错了，我会很高兴。

顺便说一句，我注意到随着请求的`profiler.db`增长，每个请求都会变慢，但在 prod 中可能并非如此。

# linux - 构建我自己的 gnome3 发行版

> ID：13901973
> 
> 赞同：0
> 
> 时间：2012-12-16T13:54:41.653
> 
> 标签：linux, distribution, gnome

我将开始构建基于个人 linux Gnome3 的发行版

经过大量搜索，我找到了一些关于 Fedora 混音的主题，但它们对我来说并不是那么清楚。

我也看过 Gnome3 官方网站，但他们没有提供任何关于如何在新发行版上集成 Gnome3 的教程。

关于如何制作基于 Gnome3 的发行版有什么好的教程吗？

# php - PHP 无需查询即可获取 URL

> ID：13901983
> 
> 赞同：0
> 
> 时间：2012-12-16T13:56:29.043
> 
> 标签：php, javascript, jquery, ajax, api

我正在尝试使用 jQuery 和 PHP（作为代理）从服务中获取。

这是我获取 JSON 的 PHP。

```
<?php 

    if (!isset($_GET['url'])) die();
    $url =  urldecode($_GET['url']);
    $url = 'http://' . str_replace('http://', '', $url);
    echo file_get_contents($url);

 ?> 
```

用 JS 来操作数据（抱歉只好去掉密钥）：

```
var api ='proxy.php?url=http://api.buycraft.net/v3?secret=MY-SECRET-KEY&action=payments';

$.getJSON(api, function(data){
     $.each(data, function(i, donor){
       console.log(donor);
     });
}); 
```

所以`proxy.php?url=http://api.buycraft.net/v3?secret=MY-SECRET-KEY&action=payments`只返回以下内容：

```
{"code":100,"payload":[]} 
```

但是如果我直接访问JSON，我可以看到我想要的数据

```
{
"code": 0,
"payload": [
{
"time": 1349661897,
"packages": [
"49381"
],
"ign": "notch",
"price": "15.99",
"currency": "USD"
} 
```

例如。

我知道这是因为 php 删除了`?action=payments`查询。即使我使用`&amp;`而不是`&`. 那么有没有办法让 PHP 从 URL 中删除查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:03:41.333

将 API 密钥保留在您的 php 中，并且出于明显的安全原因，不要在您的 javascript 中将其公开给客户端。您也可以将整个 URL（除了`proxy.php`）存储在您的 php 配置中。

还应该实现使用 CURL 来检索数据。允许进行一些错误处理，以便在 API 不可用时将信息发送回客户端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:00:34.037

尝试从后端 PHP 脚本中删除它：

```
$url =  urldecode($_GET['url']); 
```

PHP 会自动为您执行该操作。

# ruby-on-rails - 将获取请求路由到模块控制器

> ID：13901985
> 
> 赞同：0
> 
> 时间：2012-12-16T13:56:42.643
> 
> 标签：ruby-on-rails

我如何路由请求

```
/cart 
```

到模块中的控制器

```
Customer::CartController 
```

在查看 rails 文档之后，routes.rb 中的代码行应该是

```
get "cart" => "cart#index", :module => "customer", :as => :cart 
```

但由于某种原因无法正常工作。一直显示`uninitialized constant CartController`

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:01:12.633

`:module => 'customer'`应该去范围调用：

```
scope :module => "customer" do
  get "cart" => "cart#index", :as => :cart
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-08T21:56:56.013

还

```
get "cart" => "customer/cart#index", :as => :cart 
```

# emacs - 执行当前缓冲区时如何在emacs中水平拆分窗口？

> ID：13901986
> 
> 赞同：2
> 
> 时间：2012-12-16T13:56:46.217
> 
> 标签：emacs, split, elisp

我正在使用 Emacs 在 python 中编码。我已经修改了“.emacs”以满足我的需要。但是，我不知道在执行当前缓冲区时如何更改窗口的默认垂直拆分行为。

我知道：

```
(setq split-height-threshold nil) 
(setq split-width-threshold 0) 
```

一般工作。但是当我第一次使用执行缓冲区时它不起作用`C-c C-c`

尽管在我的 ~/.emacs 中有上述代码，但以下情况发生在`C-c C-c`： ![垂直分割:(](../Images/4d7319cf0b1593f4e6b16bbc68be7752.png)

我希望我的问题很清楚，如果您对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:44:18.737

I use the following. It fixes your problem (I hope) as well as preventing Emacs from splitting windows in the first place.

```
;;; ------------------------------------------------------------------
;;; display-buffer

;; The default behaviour of `display-buffer' is to always create a new
;; window. As I normally use a large display sporting a number of
;; side-by-side windows, this is a bit obnoxious.
;;
;; The code below will make Emacs reuse existing windows, with the
;; exception that if have a single window open in a large display, it
;; will be split horisontally.

(setq pop-up-windows nil)

(defun my-display-buffer-function (buf not-this-window)
  (if (and (not pop-up-frames)
           (one-window-p)
           (or not-this-window
               (not (eq (window-buffer (selected-window)) buf)))
           (> (frame-width) 162))
      (split-window-horizontally))
  ;; Note: Some modules sets `pop-up-windows' to t before calling
  ;; `display-buffer' -- Why, oh, why!
  (let ((display-buffer-function nil)
        (pop-up-windows nil))
    (display-buffer buf not-this-window)))

(setq display-buffer-function 'my-display-buffer-function) 
```

# objective-c - 按钮在触摸时未突出显示

> ID：13901992
> 
> 赞同：1
> 
> 时间：2012-12-16T13:57:46.407
> 
> 标签：objective-c, ios, uibutton, highlighting

我是IOS开发的新手。我有一个带有“创建”和“取消”两个按钮的视图，但它们没有突出显示。它们出现在允许长按复制/杯子/粘贴的pdf顶部）。实际上“创建”突出显示非常快，但取消根本不会改变状态。知道可能是什么原因造成的。

```
-(IBAction)create:(id)sender{

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Name your object" message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Save",nil];
alert.alertViewStyle = UIAlertViewStylePlainTextInput;
[alert show];

}

-(IBAction)cancel:(id)sender{

[self.view removeFromSuperview];
[[NSNotificationCenter defaultCenter] postNotificationName:kExitAnnotationView object:nil ];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:21:10.007

如果您“创建”操作映射到 TouchDown，您将无法看到按钮的突出显示状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:25:01.030

在您的取消方法中，您正在删除超级视图...实际上您的取消按钮正在突出显示，但您看不到..如果您想看到您可以稍后使用带有计时器的计时器执行取消方法中的操作1 秒或更短的延迟。你可以在 create 方法中做同样的事情。希望它会工作...... :)

# python - python中的卡尔曼二维过滤器

> ID：13901997
> 
> 赞同：42
> 
> 时间：2012-12-16T13:58:37.437
> 
> 标签：python, numpy, scipy, smoothing, kalman-filter

我的输入是跟踪器软件在屏幕上移动的点的 2d (x,y) 时间序列。它有一些我想使用卡尔曼滤波器去除的噪音。有人可以为我指出卡尔曼 2d 滤波器的 python 代码吗？在 scipy 食谱中，我只找到了一个 1d 示例： [http](http://www.scipy.org/Cookbook/KalmanFiltering) ://www.scipy.org/Cookbook/KalmanFiltering 我看到 OpenCV 中有卡尔曼滤波器的实现，但找不到代码示例。谢谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-16T17:58:49.010

[这是我根据wikipedia](http://en.wikipedia.org/wiki/Kalman_filter)上给出的方程式实现的卡尔曼滤波器。请注意，我对卡尔曼滤波器的理解非常初级，因此最有可能改进此代码的方法。（例如，它受到[此处](http://en.wikipedia.org/wiki/Kalman_filter#Square_root_form)讨论的数值不稳定问题的困扰。据我了解，这仅`Q`在运动噪声非常小时时才会影响数值稳定性。在现实生活中，噪声通常不小，所以幸运的是（在至少对于我的实现而言）在实践中，数值不稳定性并没有出现。）

在下面的示例中，`kalman_xy`假设状态向量是一个 4 元组：2 个数字表示位置，2 个数字表示速度。`F`和`H`矩阵是专门为这个状态向量定义的：如果是`x`一个四元组状态，那么

```
new_x = F * x
position = H * x 
```

然后它调用`kalman`，这是广义卡尔曼滤波器。如果您希望定义不同的状态向量（可能是表示位置、速度和加速度的 6 元组），它在某种意义上仍然很有用。您只需通过提供适当的`F`和来定义运动方程`H`。

```
import numpy as np
import matplotlib.pyplot as plt

def kalman_xy(x, P, measurement, R,
              motion = np.matrix('0\. 0\. 0\. 0.').T,
              Q = np.matrix(np.eye(4))):
    """
    Parameters:    
    x: initial state 4-tuple of location and velocity: (x0, x1, x0_dot, x1_dot)
    P: initial uncertainty convariance matrix
    measurement: observed position
    R: measurement noise 
    motion: external motion added to state vector x
    Q: motion noise (same shape as P)
    """
    return kalman(x, P, measurement, R, motion, Q,
                  F = np.matrix('''
                      1\. 0\. 1\. 0.;
                      0\. 1\. 0\. 1.;
                      0\. 0\. 1\. 0.;
                      0\. 0\. 0\. 1.
                      '''),
                  H = np.matrix('''
                      1\. 0\. 0\. 0.;
                      0\. 1\. 0\. 0.'''))

def kalman(x, P, measurement, R, motion, Q, F, H):
    '''
    Parameters:
    x: initial state
    P: initial uncertainty convariance matrix
    measurement: observed position (same shape as H*x)
    R: measurement noise (same shape as H)
    motion: external motion added to state vector x
    Q: motion noise (same shape as P)
    F: next state function: x_prime = F*x
    H: measurement function: position = H*x

    Return: the updated and predicted new values for (x, P)

    See also http://en.wikipedia.org/wiki/Kalman_filter

    This version of kalman can be applied to many different situations by
    appropriately defining F and H 
    '''
    # UPDATE x, P based on measurement m    
    # distance between measured and current position-belief
    y = np.matrix(measurement).T - H * x
    S = H * P * H.T + R  # residual convariance
    K = P * H.T * S.I    # Kalman gain
    x = x + K*y
    I = np.matrix(np.eye(F.shape[0])) # identity matrix
    P = (I - K*H)*P

    # PREDICT x, P based on motion
    x = F*x + motion
    P = F*P*F.T + Q

    return x, P

def demo_kalman_xy():
    x = np.matrix('0\. 0\. 0\. 0.').T 
    P = np.matrix(np.eye(4))*1000 # initial uncertainty

    N = 20
    true_x = np.linspace(0.0, 10.0, N)
    true_y = true_x**2
    observed_x = true_x + 0.05*np.random.random(N)*true_x
    observed_y = true_y + 0.05*np.random.random(N)*true_y
    plt.plot(observed_x, observed_y, 'ro')
    result = []
    R = 0.01**2
    for meas in zip(observed_x, observed_y):
        x, P = kalman_xy(x, P, meas, R)
        result.append((x[:2]).tolist())
    kalman_x, kalman_y = zip(*result)
    plt.plot(kalman_x, kalman_y, 'g-')
    plt.show()

demo_kalman_xy() 
```

![在此处输入图像描述](../Images/6c9d15365cdcdec7340f2e1e93def543.png)

红点显示噪声位置测量，绿线显示卡尔曼预测位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-25T08:33:24.623

对于我的一个项目，我需要为**时间序列**建模创建间隔，并且为了提高过程效率，我创建了[tsmoothie](https://github.com/cerlymarco/tsmoothie)：一个用于以矢量化方式进行时间序列平滑和异常值检测的 python 库。

它提供了不同的平滑算法以及计算间隔的可能性。

在 的情况下`KalmanSmoother`，您可以对曲线进行平滑操作，将不同的组件组合在一起：水平、趋势、季节性、长季节性

```
import numpy as np
import matplotlib.pyplot as plt
from tsmoothie.smoother import *
from tsmoothie.utils_func import sim_randomwalk

# generate 3 randomwalks timeseries of lenght 100
np.random.seed(123)
data = sim_randomwalk(n_series=3, timesteps=100, 
                      process_noise=10, measure_noise=30)

# operate smoothing
smoother = KalmanSmoother(component='level_trend', 
                          component_noise={'level':0.1, 'trend':0.1})
smoother.smooth(data)

# generate intervals
low, up = smoother.get_intervals('kalman_interval', confidence=0.05)

# plot the first smoothed timeseries with intervals
plt.figure(figsize=(11,6))
plt.plot(smoother.smooth_data[0], linewidth=3, color='blue')
plt.plot(smoother.data[0], '.k')
plt.fill_between(range(len(smoother.data[0])), low[0], up[0], alpha=0.3) 
```

[![在此处输入图像描述](../Images/10bb30c444e4495effe466242716bb6b.png)](https://i.stack.imgur.com/NT8D4.png)

我还指出 tsmoothie 可以以矢量化的方式对多个时间序列进行平滑处理

# wpf - WPF 嵌套数据绑定

> ID：13901998
> 
> 赞同：0
> 
> 时间：2012-12-16T13:58:48.530
> 
> 标签：wpf, binding, stackpanel

我正在尝试使用以下代码将数据绑定到 WPF 中的嵌套 StackPanels - 无济于事。谁能发现我哪里出错了？

```
 <Page.Resources>
    <DataTemplate x:Key="MinuteTimeSlotTemplate">
        <TextBlock Text="{Binding Path=TourName}" Background="Blue" />
    </DataTemplate>
    <DataTemplate x:Key="HourlyTimeSlotTemplate">
        <StackPanel>
            <Border Height="120" BorderThickness="0,0,0,1" BorderBrush="#DDD" x:Name="parentRow">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="123"/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Orientation="Vertical" VerticalAlignment="Center" Margin="0,0,10,0" MouseUp="StackPanel_MouseUp_1">
                        <TextBlock Foreground="#4585B9" FontWeight="Bold" FontFamily="Trebuchet MS" FontSize="20" HorizontalAlignment="Right">
                            <Run Text="{Binding Path=Time}"/></TextBlock>
                        <TextBlock FontFamily="Trebuchet MS" Foreground="#808080" HorizontalAlignment="Right"><Run Text="View Bookings"/></TextBlock>
                    </StackPanel>
                    <StackPanel Orientation="Vertical" Grid.Column="1" Margin="10,0,10,0" x:Name="stk">
                        <ItemsControl ItemTemplate="{StaticResource MinuteTimeSlotTemplate}" ItemsSource="{Binding Path=HourlySlots}" >
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel Orientation="Vertical"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </StackPanel>
                </Grid>
            </Border>
        </StackPanel>
    </DataTemplate>
</Page.Resources>
<helpers:AnimatedScrollViewer  x:Name="scrlHours" Grid.Column="1" PanningMode="Both" PanningDeceleration="5" PanningRatio="2">
    <ItemsControl x:Name="TimeSlotList" ItemTemplate="{StaticResource HourlyTimeSlotTemplate}" >
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Vertical"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</helpers:AnimatedScrollViewer> 
```

我在代码中设置了父 StackPanels ItemsSource：

```
public HourlyCalendar() {
        InitializeComponent();
        TimeSlotList.ItemsSource = new Models.TimeSlots(DateTime.Today).HourlySlots;
    } 
```

这是我的模型：

```
 public class TimeSlots {

    public TimeSlots(DateTime? day) {
        this.HourlySlots = DataManager.GetCalendarDayTimeSlots(day);
    }

    public IEnumerable<TimeSlot> HourlySlots { get; set; }

} 
```

父 StackPanel 按预期绑定，但我不知道如何绑定子 StackPanel ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:19:16.500

事实证明这很简单：

```
 <helpers:AnimatedScrollViewer x:Name="scrlHours" Grid.Column="1" PanningMode="Both" PanningDeceleration="5" PanningRatio="2">
    <ItemsControl x:Name="TimeSlots">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
               <Border Height="120" BorderThickness="0,0,0,1" BorderBrush="#DDD" x:Name="parentRow">
                    <StackPanel Orientation="Horizontal">
                        <StackPanel Orientation="Vertical" VerticalAlignment="Center" Margin="0,0,10,0" Width="123" MouseUp="StackPanel_MouseUp_1"> <!--Height="{Binding Height, ElementName=parentRow}"-->
                            <TextBlock Foreground="#4585B9" FontWeight="Bold" FontFamily="Trebuchet MS" FontSize="20" HorizontalAlignment="Right">
                            <Run Text="{Binding Path=Time}"/></TextBlock>
                            <TextBlock FontFamily="Trebuchet MS" Foreground="#808080" HorizontalAlignment="Right"><Run Text="View Bookings"/></TextBlock>
                        </StackPanel>
                        <ListView ItemsSource="{Binding Bookings}" ScrollViewer.CanContentScroll="False">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TourName}"></TextBlock>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</helpers:AnimatedScrollViewer> 
```