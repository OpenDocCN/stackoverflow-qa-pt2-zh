# StackOverflow 问答 13549000-13549999

# etl - oracle 查询 talend etl

> ID：13549000
> 
> 赞同：0
> 
> 时间：2012-11-25T07:00:25.973
> 
> 标签：etl, talend

我是使用 talend etl 的初学者，我会提出选择数据库 oracle 的请求，然后进行更改 _S 并将其插入我被卡住的 mysql 表中。我还没有找到如何使用 talend 进行选择查询不知道我是如何开始的，这可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:12:16.097

要在 Oracle 模式上进行选择，您需要一个 tOracleInput 组件实例。您需要指定 Oracle 连接（内置连接或存储库注册连接）和输出模式（您需要的列）。

然后，单击“猜测查询”以根据您所需的输出模式构建选择 SQL 代码。然后，您可以修改自动生成的 SQL 代码以满足您的需要（即添加 WHERE 或 SORT 子句）。不要忘记输出模式和选定列必须相同（即，如果您在 select 子句中添加 SQL 生成的列，您也必须在输出模式中添加）。任何有效的 SELECT 语法都可以在这里使用（包括子选择、游标、分区上的窗口，甚至更奇怪的 oracle 东西）。

在输入实例之后，添加一个 tMap，您可以在其中进行所有数据操作。最后，使用 tMySqlOutput 关闭，指定连接和输出表的详细信息。流程看起来很简单：

```
tOracleInput ----> tMap ----> tMySqlOutput 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T18:50:38.433

1.  在 Metadata Objects (Db Connections) 中创建连接 Mysql 和 Oracle。

[![在此处输入图像描述](../Images/b686cf2414e0b015c204cf68c3a97a27.png)](https://i.stack.imgur.com/herJQ.png)

2.  创建以下对象 (tMySqlConnection - TOracleConnection)

[![在此处输入图像描述](../Images/56c56e20f2eafce7d66dc55b24ed3df5.png)](https://i.stack.imgur.com/rpmTG.png)

3.  使用参数连接配置对象（属性类型：存储库）。

[![在此处输入图像描述](../Images/dfb089b0d210e06c60d9d245cd8fb3ac.png)](https://i.stack.imgur.com/wB2W0.png)

4.  提取数据：您可以选择具有对象 tOracleInput 的表。

[![在此处输入图像描述](../Images/527b54c32bc20b004e2122f86d7adf7c.png)](https://i.stack.imgur.com/Y534R.png)

5.  在子菜单组件中编辑表的架构

[![在此处输入图像描述](../Images/18554781557f1e04163b573edb1e3ab9.png)](https://i.stack.imgur.com/rypbJ.png)

6.  创建对象 TMAP，（转换数据）

[![在此处输入图像描述](../Images/dcb7aed6741dcb453787faa8fe39cbb3.png)](https://i.stack.imgur.com/LNVfL.png)

7.  创建对象 tMysqlOutPut 并配置要插入的模式和列。

[![在此处输入图像描述](../Images/7e0c16a44246962816049f22891553a4.png)](https://i.stack.imgur.com/eUbmF.png)

[![在此处输入图像描述](../Images/9a2e60d8306a92886b3db690e3c0fccc.png)](https://i.stack.imgur.com/pQc8Q.png)

8.  创建对象 tMysqlCommit 并关闭连接。

[![在此处输入图像描述](../Images/f00e055df39c57eb906523c855f38cc6.png)](https://i.stack.imgur.com/Z8zjA.png)

9.  利斯托！¡¡跑去上班！！:)

# android - android spinner将不同的值传递给webview

> ID：13549003
> 
> 赞同：1
> 
> 时间：2012-11-25T07:00:58.593
> 
> 标签：android, webview, spinner

我有一个带有城市数组的微调器。每个城市都有自己的网址。如何从微调器传递值以在 web 视图中运行其各自的 url？下面是我的代码：

MainActivity.java：

```
public class MainActivity extends Activity {

private Spinner spinner1;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    addListenerOnButton();
    addListenerOnSpinnerItemSelection();

}

public void addListenerOnSpinnerItemSelection() {
    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner1.setOnItemSelectedListener(new CustomOnItemSelectedListener());
}

// Get selected drop down list value
public void addListenerOnButton() {
    spinner1 = (Spinner) findViewById(R.id.spinner1);  

    final Context context = this;
    Button bcitysearch = (Button) findViewById(R.id.citysearch);
    bcitysearch.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            Toast.makeText(MainActivity.this,
                    "OnClickListener : " +
                    "\nSpinner 1 :            "+String.valueOf(spinner1.getSelectedItem()),
                        Toast.LENGTH_SHORT).show();

        Intent intent = new Intent(context, CitySearch.class);
            startActivity(intent);  
        }   
        });     
} 
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

> CustomOnItemSelectedListener.java:

```
public class CustomOnItemSelectedListener implements OnItemSelectedListener {

public void onItemSelected(AdapterView<?> parent, View view, int pos,long id) {
    Toast.makeText(parent.getContext(), 
        "OnItemSelectedListener : " + parent.getItemAtPosition(pos).toString(),
        Toast.LENGTH_SHORT).show();
  }
public void onNothingSelected(AdapterView<?> arg0) {    
}
} 
```

> CitySearch.java：

```
@SuppressLint("SetJavaScriptEnabled")
public class CitySearch extends Activity{

private WebView webview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    Uri uri = Uri.parse("http://something.com/firstcity/index.html");
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
//How would I parse a different url based on the selection from the spinner?
    startActivity(intent);
    //Initialize the WebView object with data from the 'webview.xml' file
    webview = (WebView) findViewById(R.id.citywebview);
    //Enable JavaScript
    webview.getSettings().setJavaScriptEnabled(true);
    //Set the user agent  
    webview.getSettings().setUserAgentString("AndroidWebView");
    //Clear the cache
    webview.clearCache(true);

    final Activity activity = this;
    webview.setWebChromeClient(new WebChromeClient(){
        public void onProgressChanged(WebView view, int progress) {
            //Activities and WebViews measure progress with different scales
            //The progress meter will automatically disappear when we reach 100%
            activity.setProgress(progress * 1000);
        }
    });

    webview.setWebViewClient(new WebViewClient(){
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Toast.makeText(activity, "Oh no! " + description, Toast.LENGTH_SHORT).show();
        }
    });

    webview.loadUrl("http://something.com/firstcity/index.html");
    //How do I load another city from the array that has a different URL based on spinner selection?

}
} 
```

# android - 如何创建一个真正的按钮单选组？

> ID：13549004
> 
> 赞同：0
> 
> 时间：2012-11-25T07:01:04.757
> 
> 标签：android, button, radio-button

我想创建一个“真实”按钮的按钮组？我想向用户显示包含他的参加选项的按钮：是、否和 Meybe。我想为此显示使用按钮。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:37:39.967

只需在可绘制文件夹中创建一个选择器 xml 文件

checkbox_background.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
      <item android:state_checked="true" android:drawable="@drawable/checkbox_active" />
      <item android:state_checked="false" android:drawable="@drawable/checkbox_inactive" />
</selector> 
```

并将此背景应用于您的单选按钮

```
 <RadioButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/checkbox_background" /> 
```

# c# - C# 有类似 PHP 的 mb_convert_encoding() 的东西吗？

> ID：13549006
> 
> 赞同：1
> 
> 时间：2012-11-25T07:01:24.873
> 
> 标签：c#, unicode, utf-8, html-encode

在 C# 上有没有一种方法可以将 unicode 字符串转换为 ASCII + html 实体，然后再返回？看，在 PHP 中，我可以这样做：

```
<?php
// RUN ME AT COMMAND LINE
$sUnicode = '<b>Jöhan Strauß</b>';
echo "UNICODE: $sUnicode\n";
$sASCII = mb_convert_encoding($sUnicode, 'HTML-ENTITIES','UTF-8');
echo "ASCII: $sASCII\n";
$sUnicode = mb_convert_encoding($sASCII, 'UTF-8', 'HTML-ENTITIES');
echo "UNICODE (TRANSLATED BACK): $sUnicode\n"; 
```

背景：

*   我需要它在 C# .NET 2 中工作，因为我们受到限制并且不能在旧应用程序中使用更高版本的 .NET 库。
*   我在这个应用程序上处理 PHP 后端。我想在这个项目上与 C# 前端团队分享一些技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:37:31.423

是的，有[`Encoding.Convert`](http://msdn.microsoft.com/en-us/library/kdcak6ye.aspx)，虽然我自己很少使用它：

```
string text = "<b>Jöhan Strauß</b>";
byte[] ascii = Encoding.ASCII.GetBytes(text);
byte[] utf8 = Encoding.Convert(Encoding.ASCII, Encoding.UTF8, ascii); 
```

[`Encoding.GetBytes`](http://msdn.microsoft.com/en-us/library/ds4kkd55.aspx)我很少发现我想从一种编码形式转换为另一种编码形式 - 执行从文本到二进制 ( ) 或反之亦然 ( )的单向转换更为常见[`Encoding.GetString`](http://msdn.microsoft.com/en-us/library/744y86tc.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T13:23:26.957

`HTML-ENTITIES`并不是真正的字符编码，即使 PHP API 可能会这样暗示。`<b>J&ouml;han Strau&szlig;</b>`仍然是 UTF-8 编码的文本（甚至是 ASCII、ISO-8859-1，几乎任何东西）。

我找不到任何预制的东西，除了 html 编码函数，它们根本不是一回事，因为它们编码`&`等`<`，而`mb_convert_encoding`没有。我做了他应该工作的课：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

namespace ConsoleApplication6
{
    class HtmlEntities
    {

        private static Dictionary<string, int> EntitiesToCodePoints;
        private static Dictionary<int, string> CodePointsToEntities;

        private static void Init()
        {
            if (EntitiesToCodePoints == null || CodePointsToEntities == null)
            {
                EntitiesToCodePoints = new Dictionary<string, int>();
                CodePointsToEntities = new Dictionary<int, string>();

                EntitiesToCodePoints["nbsp"] = 160; EntitiesToCodePoints["iexcl"] = 161; EntitiesToCodePoints["cent"] = 162; EntitiesToCodePoints["pound"] = 163; EntitiesToCodePoints["curren"] = 164; EntitiesToCodePoints["yen"] = 165; EntitiesToCodePoints["brvbar"] = 166; EntitiesToCodePoints["sect"] = 167; EntitiesToCodePoints["uml"] = 168; EntitiesToCodePoints["copy"] = 169; EntitiesToCodePoints["ordf"] = 170; EntitiesToCodePoints["laquo"] = 171; EntitiesToCodePoints["not"] = 172; EntitiesToCodePoints["shy"] = 173; EntitiesToCodePoints["reg"] = 174; EntitiesToCodePoints["macr"] = 175; EntitiesToCodePoints["deg"] = 176; EntitiesToCodePoints["plusmn"] = 177; EntitiesToCodePoints["sup2"] = 178; EntitiesToCodePoints["sup3"] = 179; EntitiesToCodePoints["acute"] = 180; EntitiesToCodePoints["micro"] = 181; EntitiesToCodePoints["para"] = 182; EntitiesToCodePoints["middot"] = 183; EntitiesToCodePoints["cedil"] = 184; EntitiesToCodePoints["sup1"] = 185; EntitiesToCodePoints["ordm"] = 186; EntitiesToCodePoints["raquo"] = 187; EntitiesToCodePoints["frac14"] = 188; EntitiesToCodePoints["frac12"] = 189; EntitiesToCodePoints["frac34"] = 190; EntitiesToCodePoints["iquest"] = 191; EntitiesToCodePoints["Agrave"] = 192; EntitiesToCodePoints["Aacute"] = 193; EntitiesToCodePoints["Acirc"] = 194; EntitiesToCodePoints["Atilde"] = 195; EntitiesToCodePoints["Auml"] = 196; EntitiesToCodePoints["Aring"] = 197; EntitiesToCodePoints["AElig"] = 198; EntitiesToCodePoints["Ccedil"] = 199; EntitiesToCodePoints["Egrave"] = 200; EntitiesToCodePoints["Eacute"] = 201; EntitiesToCodePoints["Ecirc"] = 202; EntitiesToCodePoints["Euml"] = 203; EntitiesToCodePoints["Igrave"] = 204; EntitiesToCodePoints["Iacute"] = 205; EntitiesToCodePoints["Icirc"] = 206; EntitiesToCodePoints["Iuml"] = 207; EntitiesToCodePoints["ETH"] = 208; EntitiesToCodePoints["Ntilde"] = 209; EntitiesToCodePoints["Ograve"] = 210; EntitiesToCodePoints["Oacute"] = 211; EntitiesToCodePoints["Ocirc"] = 212; EntitiesToCodePoints["Otilde"] = 213; EntitiesToCodePoints["Ouml"] = 214; EntitiesToCodePoints["times"] = 215; EntitiesToCodePoints["Oslash"] = 216; EntitiesToCodePoints["Ugrave"] = 217; EntitiesToCodePoints["Uacute"] = 218; EntitiesToCodePoints["Ucirc"] = 219; EntitiesToCodePoints["Uuml"] = 220; EntitiesToCodePoints["Yacute"] = 221; EntitiesToCodePoints["THORN"] = 222; EntitiesToCodePoints["szlig"] = 223; EntitiesToCodePoints["agrave"] = 224; EntitiesToCodePoints["aacute"] = 225; EntitiesToCodePoints["acirc"] = 226; EntitiesToCodePoints["atilde"] = 227; EntitiesToCodePoints["auml"] = 228; EntitiesToCodePoints["aring"] = 229; EntitiesToCodePoints["aelig"] = 230; EntitiesToCodePoints["ccedil"] = 231; EntitiesToCodePoints["egrave"] = 232; EntitiesToCodePoints["eacute"] = 233; EntitiesToCodePoints["ecirc"] = 234; EntitiesToCodePoints["euml"] = 235; EntitiesToCodePoints["igrave"] = 236; EntitiesToCodePoints["iacute"] = 237; EntitiesToCodePoints["icirc"] = 238; EntitiesToCodePoints["iuml"] = 239; EntitiesToCodePoints["eth"] = 240; EntitiesToCodePoints["ntilde"] = 241; EntitiesToCodePoints["ograve"] = 242; EntitiesToCodePoints["oacute"] = 243; EntitiesToCodePoints["ocirc"] = 244; EntitiesToCodePoints["otilde"] = 245; EntitiesToCodePoints["ouml"] = 246; EntitiesToCodePoints["divide"] = 247; EntitiesToCodePoints["oslash"] = 248; EntitiesToCodePoints["ugrave"] = 249; EntitiesToCodePoints["uacute"] = 250; EntitiesToCodePoints["ucirc"] = 251; EntitiesToCodePoints["uuml"] = 252; EntitiesToCodePoints["yacute"] = 253; EntitiesToCodePoints["thorn"] = 254; EntitiesToCodePoints["yuml"] = 255; EntitiesToCodePoints["OElig"] = 338; EntitiesToCodePoints["oelig"] = 339; EntitiesToCodePoints["Scaron"] = 352; EntitiesToCodePoints["scaron"] = 353; EntitiesToCodePoints["Yuml"] = 376; EntitiesToCodePoints["fnof"] = 402; EntitiesToCodePoints["circ"] = 710; EntitiesToCodePoints["tilde"] = 732; EntitiesToCodePoints["Alpha"] = 913; EntitiesToCodePoints["Beta"] = 914; EntitiesToCodePoints["Gamma"] = 915; EntitiesToCodePoints["Delta"] = 916; EntitiesToCodePoints["Epsilon"] = 917; EntitiesToCodePoints["Zeta"] = 918; EntitiesToCodePoints["Eta"] = 919; EntitiesToCodePoints["Theta"] = 920; EntitiesToCodePoints["Iota"] = 921; EntitiesToCodePoints["Kappa"] = 922; EntitiesToCodePoints["Lambda"] = 923; EntitiesToCodePoints["Mu"] = 924; EntitiesToCodePoints["Nu"] = 925; EntitiesToCodePoints["Xi"] = 926; EntitiesToCodePoints["Omicron"] = 927; EntitiesToCodePoints["Pi"] = 928; EntitiesToCodePoints["Rho"] = 929; EntitiesToCodePoints["Sigma"] = 931; EntitiesToCodePoints["Tau"] = 932; EntitiesToCodePoints["Upsilon"] = 933; EntitiesToCodePoints["Phi"] = 934; EntitiesToCodePoints["Chi"] = 935; EntitiesToCodePoints["Psi"] = 936; EntitiesToCodePoints["Omega"] = 937; EntitiesToCodePoints["alpha"] = 945; EntitiesToCodePoints["beta"] = 946; EntitiesToCodePoints["gamma"] = 947; EntitiesToCodePoints["delta"] = 948; EntitiesToCodePoints["epsilon"] = 949; EntitiesToCodePoints["zeta"] = 950; EntitiesToCodePoints["eta"] = 951; EntitiesToCodePoints["theta"] = 952; EntitiesToCodePoints["iota"] = 953; EntitiesToCodePoints["kappa"] = 954; EntitiesToCodePoints["lambda"] = 955; EntitiesToCodePoints["mu"] = 956; EntitiesToCodePoints["nu"] = 957; EntitiesToCodePoints["xi"] = 958; EntitiesToCodePoints["omicron"] = 959; EntitiesToCodePoints["pi"] = 960; EntitiesToCodePoints["rho"] = 961; EntitiesToCodePoints["sigmaf"] = 962; EntitiesToCodePoints["sigma"] = 963; EntitiesToCodePoints["tau"] = 964; EntitiesToCodePoints["upsilon"] = 965; EntitiesToCodePoints["phi"] = 966; EntitiesToCodePoints["chi"] = 967; EntitiesToCodePoints["psi"] = 968; EntitiesToCodePoints["omega"] = 969; EntitiesToCodePoints["thetasym"] = 977; EntitiesToCodePoints["upsih"] = 978; EntitiesToCodePoints["piv"] = 982; EntitiesToCodePoints["ensp"] = 8194; EntitiesToCodePoints["emsp"] = 8195; EntitiesToCodePoints["thinsp"] = 8201; EntitiesToCodePoints["zwnj"] = 8204; EntitiesToCodePoints["zwj"] = 8205; EntitiesToCodePoints["lrm"] = 8206; EntitiesToCodePoints["rlm"] = 8207; EntitiesToCodePoints["ndash"] = 8211; EntitiesToCodePoints["mdash"] = 8212; EntitiesToCodePoints["lsquo"] = 8216; EntitiesToCodePoints["rsquo"] = 8217; EntitiesToCodePoints["sbquo"] = 8218; EntitiesToCodePoints["ldquo"] = 8220; EntitiesToCodePoints["rdquo"] = 8221; EntitiesToCodePoints["bdquo"] = 8222; EntitiesToCodePoints["dagger"] = 8224; EntitiesToCodePoints["Dagger"] = 8225; EntitiesToCodePoints["bull"] = 8226; EntitiesToCodePoints["hellip"] = 8230; EntitiesToCodePoints["permil"] = 8240; EntitiesToCodePoints["prime"] = 8242; EntitiesToCodePoints["Prime"] = 8243; EntitiesToCodePoints["lsaquo"] = 8249; EntitiesToCodePoints["rsaquo"] = 8250; EntitiesToCodePoints["oline"] = 8254; EntitiesToCodePoints["frasl"] = 8260; EntitiesToCodePoints["euro"] = 8364; EntitiesToCodePoints["weierp"] = 8472; EntitiesToCodePoints["image"] = 8465; EntitiesToCodePoints["real"] = 8476; EntitiesToCodePoints["trade"] = 8482; EntitiesToCodePoints["alefsym"] = 8501; EntitiesToCodePoints["larr"] = 8592; EntitiesToCodePoints["uarr"] = 8593; EntitiesToCodePoints["rarr"] = 8594; EntitiesToCodePoints["darr"] = 8595; EntitiesToCodePoints["harr"] = 8596; EntitiesToCodePoints["crarr"] = 8629; EntitiesToCodePoints["lArr"] = 8656; EntitiesToCodePoints["uArr"] = 8657; EntitiesToCodePoints["rArr"] = 8658; EntitiesToCodePoints["dArr"] = 8659; EntitiesToCodePoints["hArr"] = 8660; EntitiesToCodePoints["forall"] = 8704; EntitiesToCodePoints["part"] = 8706; EntitiesToCodePoints["exist"] = 8707; EntitiesToCodePoints["empty"] = 8709; EntitiesToCodePoints["nabla"] = 8711; EntitiesToCodePoints["isin"] = 8712; EntitiesToCodePoints["notin"] = 8713; EntitiesToCodePoints["ni"] = 8715; EntitiesToCodePoints["prod"] = 8719; EntitiesToCodePoints["sum"] = 8721; EntitiesToCodePoints["minus"] = 8722; EntitiesToCodePoints["lowast"] = 8727; EntitiesToCodePoints["radic"] = 8730; EntitiesToCodePoints["prop"] = 8733; EntitiesToCodePoints["infin"] = 8734; EntitiesToCodePoints["ang"] = 8736; EntitiesToCodePoints["and"] = 8743; EntitiesToCodePoints["or"] = 8744; EntitiesToCodePoints["cap"] = 8745; EntitiesToCodePoints["cup"] = 8746; EntitiesToCodePoints["int"] = 8747; EntitiesToCodePoints["there4"] = 8756; EntitiesToCodePoints["sim"] = 8764; EntitiesToCodePoints["cong"] = 8773; EntitiesToCodePoints["asymp"] = 8776; EntitiesToCodePoints["ne"] = 8800; EntitiesToCodePoints["equiv"] = 8801; EntitiesToCodePoints["le"] = 8804; EntitiesToCodePoints["ge"] = 8805; EntitiesToCodePoints["sub"] = 8834; EntitiesToCodePoints["sup"] = 8835; EntitiesToCodePoints["nsub"] = 8836; EntitiesToCodePoints["sube"] = 8838; EntitiesToCodePoints["supe"] = 8839; EntitiesToCodePoints["oplus"] = 8853; EntitiesToCodePoints["otimes"] = 8855; EntitiesToCodePoints["perp"] = 8869; EntitiesToCodePoints["sdot"] = 8901; EntitiesToCodePoints["lceil"] = 8968; EntitiesToCodePoints["rceil"] = 8969; EntitiesToCodePoints["lfloor"] = 8970; EntitiesToCodePoints["rfloor"] = 8971; EntitiesToCodePoints["lang"] = 9001; EntitiesToCodePoints["rang"] = 9002; EntitiesToCodePoints["loz"] = 9674; EntitiesToCodePoints["spades"] = 9824; EntitiesToCodePoints["clubs"] = 9827; EntitiesToCodePoints["hearts"] = 9829; EntitiesToCodePoints["diams"] = 9830;
                CodePointsToEntities[160] = "nbsp"; CodePointsToEntities[161] = "iexcl"; CodePointsToEntities[162] = "cent"; CodePointsToEntities[163] = "pound"; CodePointsToEntities[164] = "curren"; CodePointsToEntities[165] = "yen"; CodePointsToEntities[166] = "brvbar"; CodePointsToEntities[167] = "sect"; CodePointsToEntities[168] = "uml"; CodePointsToEntities[169] = "copy"; CodePointsToEntities[170] = "ordf"; CodePointsToEntities[171] = "laquo"; CodePointsToEntities[172] = "not"; CodePointsToEntities[173] = "shy"; CodePointsToEntities[174] = "reg"; CodePointsToEntities[175] = "macr"; CodePointsToEntities[176] = "deg"; CodePointsToEntities[177] = "plusmn"; CodePointsToEntities[178] = "sup2"; CodePointsToEntities[179] = "sup3"; CodePointsToEntities[180] = "acute"; CodePointsToEntities[181] = "micro"; CodePointsToEntities[182] = "para"; CodePointsToEntities[183] = "middot"; CodePointsToEntities[184] = "cedil"; CodePointsToEntities[185] = "sup1"; CodePointsToEntities[186] = "ordm"; CodePointsToEntities[187] = "raquo"; CodePointsToEntities[188] = "frac14"; CodePointsToEntities[189] = "frac12"; CodePointsToEntities[190] = "frac34"; CodePointsToEntities[191] = "iquest"; CodePointsToEntities[192] = "Agrave"; CodePointsToEntities[193] = "Aacute"; CodePointsToEntities[194] = "Acirc"; CodePointsToEntities[195] = "Atilde"; CodePointsToEntities[196] = "Auml"; CodePointsToEntities[197] = "Aring"; CodePointsToEntities[198] = "AElig"; CodePointsToEntities[199] = "Ccedil"; CodePointsToEntities[200] = "Egrave"; CodePointsToEntities[201] = "Eacute"; CodePointsToEntities[202] = "Ecirc"; CodePointsToEntities[203] = "Euml"; CodePointsToEntities[204] = "Igrave"; CodePointsToEntities[205] = "Iacute"; CodePointsToEntities[206] = "Icirc"; CodePointsToEntities[207] = "Iuml"; CodePointsToEntities[208] = "ETH"; CodePointsToEntities[209] = "Ntilde"; CodePointsToEntities[210] = "Ograve"; CodePointsToEntities[211] = "Oacute"; CodePointsToEntities[212] = "Ocirc"; CodePointsToEntities[213] = "Otilde"; CodePointsToEntities[214] = "Ouml"; CodePointsToEntities[215] = "times"; CodePointsToEntities[216] = "Oslash"; CodePointsToEntities[217] = "Ugrave"; CodePointsToEntities[218] = "Uacute"; CodePointsToEntities[219] = "Ucirc"; CodePointsToEntities[220] = "Uuml"; CodePointsToEntities[221] = "Yacute"; CodePointsToEntities[222] = "THORN"; CodePointsToEntities[223] = "szlig"; CodePointsToEntities[224] = "agrave"; CodePointsToEntities[225] = "aacute"; CodePointsToEntities[226] = "acirc"; CodePointsToEntities[227] = "atilde"; CodePointsToEntities[228] = "auml"; CodePointsToEntities[229] = "aring"; CodePointsToEntities[230] = "aelig"; CodePointsToEntities[231] = "ccedil"; CodePointsToEntities[232] = "egrave"; CodePointsToEntities[233] = "eacute"; CodePointsToEntities[234] = "ecirc"; CodePointsToEntities[235] = "euml"; CodePointsToEntities[236] = "igrave"; CodePointsToEntities[237] = "iacute"; CodePointsToEntities[238] = "icirc"; CodePointsToEntities[239] = "iuml"; CodePointsToEntities[240] = "eth"; CodePointsToEntities[241] = "ntilde"; CodePointsToEntities[242] = "ograve"; CodePointsToEntities[243] = "oacute"; CodePointsToEntities[244] = "ocirc"; CodePointsToEntities[245] = "otilde"; CodePointsToEntities[246] = "ouml"; CodePointsToEntities[247] = "divide"; CodePointsToEntities[248] = "oslash"; CodePointsToEntities[249] = "ugrave"; CodePointsToEntities[250] = "uacute"; CodePointsToEntities[251] = "ucirc"; CodePointsToEntities[252] = "uuml"; CodePointsToEntities[253] = "yacute"; CodePointsToEntities[254] = "thorn"; CodePointsToEntities[255] = "yuml"; CodePointsToEntities[338] = "OElig"; CodePointsToEntities[339] = "oelig"; CodePointsToEntities[352] = "Scaron"; CodePointsToEntities[353] = "scaron"; CodePointsToEntities[376] = "Yuml"; CodePointsToEntities[402] = "fnof"; CodePointsToEntities[710] = "circ"; CodePointsToEntities[732] = "tilde"; CodePointsToEntities[913] = "Alpha"; CodePointsToEntities[914] = "Beta"; CodePointsToEntities[915] = "Gamma"; CodePointsToEntities[916] = "Delta"; CodePointsToEntities[917] = "Epsilon"; CodePointsToEntities[918] = "Zeta"; CodePointsToEntities[919] = "Eta"; CodePointsToEntities[920] = "Theta"; CodePointsToEntities[921] = "Iota"; CodePointsToEntities[922] = "Kappa"; CodePointsToEntities[923] = "Lambda"; CodePointsToEntities[924] = "Mu"; CodePointsToEntities[925] = "Nu"; CodePointsToEntities[926] = "Xi"; CodePointsToEntities[927] = "Omicron"; CodePointsToEntities[928] = "Pi"; CodePointsToEntities[929] = "Rho"; CodePointsToEntities[931] = "Sigma"; CodePointsToEntities[932] = "Tau"; CodePointsToEntities[933] = "Upsilon"; CodePointsToEntities[934] = "Phi"; CodePointsToEntities[935] = "Chi"; CodePointsToEntities[936] = "Psi"; CodePointsToEntities[937] = "Omega"; CodePointsToEntities[945] = "alpha"; CodePointsToEntities[946] = "beta"; CodePointsToEntities[947] = "gamma"; CodePointsToEntities[948] = "delta"; CodePointsToEntities[949] = "epsilon"; CodePointsToEntities[950] = "zeta"; CodePointsToEntities[951] = "eta"; CodePointsToEntities[952] = "theta"; CodePointsToEntities[953] = "iota"; CodePointsToEntities[954] = "kappa"; CodePointsToEntities[955] = "lambda"; CodePointsToEntities[956] = "mu"; CodePointsToEntities[957] = "nu"; CodePointsToEntities[958] = "xi"; CodePointsToEntities[959] = "omicron"; CodePointsToEntities[960] = "pi"; CodePointsToEntities[961] = "rho"; CodePointsToEntities[962] = "sigmaf"; CodePointsToEntities[963] = "sigma"; CodePointsToEntities[964] = "tau"; CodePointsToEntities[965] = "upsilon"; CodePointsToEntities[966] = "phi"; CodePointsToEntities[967] = "chi"; CodePointsToEntities[968] = "psi"; CodePointsToEntities[969] = "omega"; CodePointsToEntities[977] = "thetasym"; CodePointsToEntities[978] = "upsih"; CodePointsToEntities[982] = "piv"; CodePointsToEntities[8194] = "ensp"; CodePointsToEntities[8195] = "emsp"; CodePointsToEntities[8201] = "thinsp"; CodePointsToEntities[8204] = "zwnj"; CodePointsToEntities[8205] = "zwj"; CodePointsToEntities[8206] = "lrm"; CodePointsToEntities[8207] = "rlm"; CodePointsToEntities[8211] = "ndash"; CodePointsToEntities[8212] = "mdash"; CodePointsToEntities[8216] = "lsquo"; CodePointsToEntities[8217] = "rsquo"; CodePointsToEntities[8218] = "sbquo"; CodePointsToEntities[8220] = "ldquo"; CodePointsToEntities[8221] = "rdquo"; CodePointsToEntities[8222] = "bdquo"; CodePointsToEntities[8224] = "dagger"; CodePointsToEntities[8225] = "Dagger"; CodePointsToEntities[8226] = "bull"; CodePointsToEntities[8230] = "hellip"; CodePointsToEntities[8240] = "permil"; CodePointsToEntities[8242] = "prime"; CodePointsToEntities[8243] = "Prime"; CodePointsToEntities[8249] = "lsaquo"; CodePointsToEntities[8250] = "rsaquo"; CodePointsToEntities[8254] = "oline"; CodePointsToEntities[8260] = "frasl"; CodePointsToEntities[8364] = "euro"; CodePointsToEntities[8472] = "weierp"; CodePointsToEntities[8465] = "image"; CodePointsToEntities[8476] = "real"; CodePointsToEntities[8482] = "trade"; CodePointsToEntities[8501] = "alefsym"; CodePointsToEntities[8592] = "larr"; CodePointsToEntities[8593] = "uarr"; CodePointsToEntities[8594] = "rarr"; CodePointsToEntities[8595] = "darr"; CodePointsToEntities[8596] = "harr"; CodePointsToEntities[8629] = "crarr"; CodePointsToEntities[8656] = "lArr"; CodePointsToEntities[8657] = "uArr"; CodePointsToEntities[8658] = "rArr"; CodePointsToEntities[8659] = "dArr"; CodePointsToEntities[8660] = "hArr"; CodePointsToEntities[8704] = "forall"; CodePointsToEntities[8706] = "part"; CodePointsToEntities[8707] = "exist"; CodePointsToEntities[8709] = "empty"; CodePointsToEntities[8711] = "nabla"; CodePointsToEntities[8712] = "isin"; CodePointsToEntities[8713] = "notin"; CodePointsToEntities[8715] = "ni"; CodePointsToEntities[8719] = "prod"; CodePointsToEntities[8721] = "sum"; CodePointsToEntities[8722] = "minus"; CodePointsToEntities[8727] = "lowast"; CodePointsToEntities[8730] = "radic"; CodePointsToEntities[8733] = "prop"; CodePointsToEntities[8734] = "infin"; CodePointsToEntities[8736] = "ang"; CodePointsToEntities[8743] = "and"; CodePointsToEntities[8744] = "or"; CodePointsToEntities[8745] = "cap"; CodePointsToEntities[8746] = "cup"; CodePointsToEntities[8747] = "int"; CodePointsToEntities[8756] = "there4"; CodePointsToEntities[8764] = "sim"; CodePointsToEntities[8773] = "cong"; CodePointsToEntities[8776] = "asymp"; CodePointsToEntities[8800] = "ne"; CodePointsToEntities[8801] = "equiv"; CodePointsToEntities[8804] = "le"; CodePointsToEntities[8805] = "ge"; CodePointsToEntities[8834] = "sub"; CodePointsToEntities[8835] = "sup"; CodePointsToEntities[8836] = "nsub"; CodePointsToEntities[8838] = "sube"; CodePointsToEntities[8839] = "supe"; CodePointsToEntities[8853] = "oplus"; CodePointsToEntities[8855] = "otimes"; CodePointsToEntities[8869] = "perp"; CodePointsToEntities[8901] = "sdot"; CodePointsToEntities[8968] = "lceil"; CodePointsToEntities[8969] = "rceil"; CodePointsToEntities[8970] = "lfloor"; CodePointsToEntities[8971] = "rfloor"; CodePointsToEntities[9001] = "lang"; CodePointsToEntities[9002] = "rang"; CodePointsToEntities[9674] = "loz"; CodePointsToEntities[9824] = "spades"; CodePointsToEntities[9827] = "clubs"; CodePointsToEntities[9829] = "hearts"; CodePointsToEntities[9830] = "diams";

            }
        }

        public static string Decode(string str)
        {
            Init();
            return Regex.Replace(str, @"&(?:#(?<num>[0-9]+)|(?<named>[0-9A-Za-z]+));", delegate(Match m)
            {
                int charCode;
                string captured;
                if (m.Groups["num"].Captures.Count > 0)
                {

                    if (!int.TryParse(m.Groups["num"].ToString(), out charCode))
                    {//Return unaffected

                        return m.Groups[0].ToString();
                    }
                }
                else
                {
                    captured = m.Groups["named"].ToString();
                    if( EntitiesToCodePoints.ContainsKey(captured) ) {
                        charCode = EntitiesToCodePoints[captured];
                    }
                    else {
                        //Return unaffected

                        return m.Groups[0].ToString();
                    }
                }
                return Convert.ToChar(charCode).ToString();
            });
        }

        public static string Encode(string str)
        {
            Init();
            return Regex.Replace(str, @"[\u0080-\uDAFF\uE000-\uFFFF]", delegate(Match m)
            {
                int codePoint = (int)m.Value[0];
                if (CodePointsToEntities.ContainsKey(codePoint))
                {
                    return "&" + CodePointsToEntities[codePoint] + ";";
                }
                return "&#" + codePoint + ";";
            });
        }
    }
} 
```

PHP：

```
$a = "ɢ♠♤ä<>&'\"";
$b = mb_convert_encoding( $a, "HTML-ENTITIES", "UTF-8" );
echo $b; //&#610;&spades;&#9828;&auml;<>&'"
echo mb_convert_encoding( $b, "UTF-8", "HTML-ENTITIES"); //ɢ♠♤ä<>&'" 
```

C＃

```
string a = "ɢ♠♤ä<>&'\"";
string b = HtmlEntities.Encode(a);
Console.WriteLine(b); //&#610;&spades;&#9828;&auml;<>&'"
Console.WriteLine(HtmlEntities.Decode(b)); //ɢ♠♤ä<>&'" 
```

注意：这不能处理[BMP](http://en.wikipedia.org/wiki/Basic_Multilingual_Plane#Basic_Multilingual_Plane)之外的字符，尽管这样的要求非常罕见，应该明确提及。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T07:40:05.300

以下是一些转换示例。前两个显示如何转换，最后一个可以变成一个以两个编码名称为字符串的函数，并进行转换。

可以在[此处](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)找到编码名称列表。

```
Encoding.UTF8.GetString(Encoding.ASCII.GetBytes(str));
Encoding.UTF8.GetString(Encoding.Unicode.GetBytes(str));
Encoding.GetEncoding("UTF-8").GetString(Encoding.GetEncoding("ASCII").GetBytes(str)); 
```

# windows-phone-7 - 使用 windows phone 组合运动 api 跟踪设备位置

> ID：13549008
> 
> 赞同：2
> 
> 时间：2012-11-25T07:01:47.090
> 
> 标签：windows-phone-7

我想以高精度（理想情况下）跟踪设备相对于初始位置的位置，以进行小规模（比如<1米）的运动。最好的选择似乎是使用motionReading.SensorReading.DeviceAcceleration。我试过这个。但是遇到了一些问题。除了嘈杂的读数（我预料到并且可以容忍）之外，我还看到了一些概念上错误的行为——例如，如果我从休息开始，移动手机并让它恢复休息——并在此过程中定期更新速度沿所有维度的向量，我希望速度的大小非常小（理想情况下为 0）。但我不这么认为。我已经广泛审查了可用的帮助，包括官方 msdn 页面，但我没有 看不到使用加速度矢量更新设备位置/速度的任何示例。api返回的加速度矢量（至少在理论上）应该是速度变化率还是其他什么？（仅供参考 - 我的设备没有陀螺仪，所以 api 将是低精度版本。）

# silverlight - 减少 WP7 Silverlight 中的计时器间隔

> ID：13549010
> 
> 赞同：0
> 
> 时间：2012-11-25T07:01:56.687
> 
> 标签：silverlight, windows-phone-7, timer, dispatchertimer

我`DispatcherTimer`在 WP7 Silverlight 中使用在菜单上应用简单的翻译动画。

现在，如果我减少步长，翻译看起来很流畅，但很慢。如果我增加步长，翻译看起来很快，但不流畅。

解决方案是保持步长较小并减小间隔。但问题是仿真器在间隔等于或小于 10 毫秒的情况下执行相同数量的步骤。

```
introTimer.Interval = TimeSpan.FromMilliseconds(10); 
```

如同：

```
introTimer.Interval = TimeSpan.FromMilliseconds(1); 
```

那么有没有一种方法/替代方案/解决方案可以让某些事情在很短的时间内重复发生？

# security - asp.net C# - 在 web.config 中为子目录设置角色

> ID：13549011
> 
> 赞同：2
> 
> 时间：2012-11-25T07:02:17.270
> 
> 标签：security

```
**After login i am not able to access page.After login again redirect to login page. 
```

我正在使用两级文件夹结构。CMS 文件夹包含两个文件夹。1\. 用户。2\. 管理员。

```
 ---CMS
     ----User
     ----Admin
Means CMS/{USER}{Admin}.** 
```

> 在主 web.config

在主 web.config 中，我设置了 loginurl 并允许所有用户。

```
 <system.web>
    <compilation debug="true" targetFramework="4.0">
    </compilation>
    <authentication mode="Forms">
      <forms name="HESCMS1.0" loginUrl="~/CMS/User/Login.aspx" timeout="40" slidingExpiration="true" cookieless="UseCookies" protection="All" requireSSL="false" enableCrossAppRedirects="false"/>
    </authentication>
    <authorization>
      <allow users="*"/>
    </authorization>
    <customErrors mode="Off"></customErrors>
  </system.web>
  <system.web>
    <httpRuntime requestValidationMode="2.0"/>
  </system.web> 
```

> 在用户文件夹 web.config 中：

为管理员用户设置角色

```
 <system.web>
      <authorization>
        <allow roles="CMSUserAdmin" />
        <deny users="*"/>
      </authorization>
    </system.web>
  <location path="Login.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web> 
```

> 在管理文件夹 web.config 中：

设置超级管理员的角色。

```
 <system.web>
      <authorization>
        <allow roles="CMSSuperAdmin"/>
        <deny users="*" />
      </authorization>
    </system.web>
  <location path="Login.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

这是我在堆栈中的第一篇文章，所以没有太多经验。

# git - 把非代码文件上传到 GitHub 可以吗？

> ID：13549016
> 
> 赞同：8
> 
> 时间：2012-11-25T07:03:22.870
> 
> 标签：git, github

我打算将我的一个 - 主要是 PHP - 项目上传到[GitHub](https://github.com/)，但我不确定是否要上传所有“非代码”文件，如 CSS、.htaccess、HTML、我用于网站设计的图像等. 甚至不是 PHP 的代码文件（例如 JavaScript）。

如果我指定我的存储库将包含 PHP 项目，我应该上传所有内容还是*只上传 PHP 文件？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T07:04:41.537

上传所有内容。

我不知道您从哪里得到版本控制仅适用于代码的想法。

上传*所有内容。* 密码除外。

**说明：**对于每种语言和工具集，您将开发一个不属于存储库的文件列表。例如，您希望将`*.o`文件保留在 C 项目之外，并将`.*.swp`文件保留在任何项目之外（它们是 vim 临时文件）。但删除意外添加的文件总是比添加忘记添加的文件更容易。（删除包含密码等敏感信息的文件是另一回事，因为您还需要从历史记录中清除该文件。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-25T07:05:03.343

您应该上传应用程序所需的所有内容。

我只想说不要上传生成的文件或临时文件。例如，如果你有一个 c++ 项目，你不应该上传最终的二进制文件，除非它们是用于显式下载的某种最终版本。

因此，如果您在设置时生成配置文件，请不要加载它。其他一切都应该没问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T07:06:00.390

语言规范似乎是出于分类目的。大多数超出教科书练习的项目都涉及一种以上的语言。正如 Dietrich 所说，上传所有内容，模数密码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-25T07:18:35.293

将您想要的任何内容上传到 Github。它甚至不必与编程有关。如果您以前从未使用过 Github，请阅读他们的帮助部分

[http://help.github.com](http://help.github.com)

还有一个关于与最佳实践相关的 SO 的好问题，我认为它很好地概述了一般如何使用 git repos

[使用 git 和 github 的工作流最佳实践？](https://stackoverflow.com/questions/1604613/workflow-best-practice-with-git-and-github)

无论您上传什么，只要知道除非您为私人仓库付费，否则您上传的所有内容都将公开可见，因此不要上传您不希望其他人看到或拥有的任何内容。此外，如果您的项目中有不应上传的文件，例如 IDE 或配置特定文件等，您始终可以将文件排除项添加到 .gitignore。有关 .gitignore 是什么以及如何使用它的信息，请参见此处的 git 手册页：

[http://schacon.github.com/git/gitignore.html](http://schacon.github.com/git/gitignore.html)

或者

[https://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

一旦你熟悉了 .gitignore，这里有一些适用于各种项目格式的优秀模板

[https://github.com/github/gitignore](https://github.com/github/gitignore)

# node.js - Vagrant，为 Node.js 设置机器 - 厨师失败

> ID：13549020
> 
> 赞同：5
> 
> 时间：2012-11-25T07:04:00.560
> 
> 标签：node.js, vagrant, chef-infra

我的`Vagrantfile`：

```
Vagrant::Config.run do |config|
  config.vm.box = "lucid32"
  config.ssh.forward_agent = true
  config.vm.forward_port 3000, 3000

  # allow for symlinks in the app folder
  config.vm.customize ["setextradata", :id, "VBoxInternal2/SharedFoldersEnableSymlinksCreate/app", "1"]
  config.vm.customize ["modifyvm", :id, "--memory", 512, "--cpus", 1]

  config.vm.provision :chef_solo do |chef|
    chef.cookbooks_path = "cookbooks"

    chef.add_recipe "apt"
    chef.add_recipe "build-essential"
    chef.add_recipe "nodejs-cookbook"
    chef.add_recipe "chef-hosts"
    chef.add_recipe "git"
    chef.json = {
      "nodejs" => {
        "version" => "0.8.12",
        "install_method" => "source",
        "npm" => "1.1.62"
      },
      "host_aliases" => [{
        "name" => "awesomeapp",
        "ip" => "127.0.0.1"
      }]
    }
  end
end 
```

当我运行时，`vagrant reload`我从厨师那里得到以下异常：

```
[2012-11-25T07:58:23+01:00] ERROR: Running exception handlers
[2012-11-25T07:58:23+01:00] ERROR: Exception handlers complete
[2012-11-25T07:58:24+01:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[2012-11-25T07:58:24+01:00] FATAL: Chef::Exceptions::CookbookNotFound: Cookbook nodejs not found. If you're loading nodejs from another cookbook, make
sure you configure the dependency in your metadata
Chef never successfully completed! Any errors should be visible in the
output above. Please fix your recipes so that they properly complete. 
```

**已解决**：在食谱文件夹中，我重命名`nodejs-cookbook`并`nodejs`更正了 Vagrant 文件。

```
chef.add_recipe "nodejs-cookbook" 
```

我跑了之后

```
vagrant provision 
```

一切都安装得很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T06:35:39.337

add_recipe 应该是配方的名称。例如文件结构：

`cookbooks/nodejs`

重要的是：

`cookbooks/nodejs/metadata.rb`应包含：`name "nodejs"`

# java - 如何用while循环填充数组？

> ID：13549032
> 
> 赞同：1
> 
> 时间：2012-11-25T07:06:10.670
> 
> 标签：java, listview

我有一段类似这样的代码，我想通过使用一段时间来插入数据。

```
Weather weather_data[] = new Weather[]{
                new Weather(0, "Cloudy"),
                new Weather(0, "Showers"),
                new Weather(0, "Snow"),
                new Weather(0, "Storm"),
                new Weather(0, "Sunny")
}; 
```

如何使用一段时间来填写此列表？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T07:12:46.843

尝试这个：

```
Weather weather_data[] = new Weather[5];

int i = 0;
while(i < weather_data.length){
    //fill array [i]
    i++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T07:15:35.707

我了解您希望使用以下 String 数组作为基础填充您的数组：

```
String[] weatherTypes = {"Cloudy","Showers","Snow","Storm","Sunny"}; 
```

然后你可以这样做：

```
int i=0;
Weather[] weather_data = new Weather[];
for (String weatherType: weatherTypes){
   weather_data[i] = new Weather(0,weatherType);
   i++;
} 
```

您也可以使用列表：

```
List<Weather> weather_data = new ArrayList<Weather>();
for (String weatherType: weatherTypes){
   weather_data.add(new Weather(0,weatherTypes));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T21:45:07.103

```
Weather[] weather_data = new Weather[5];

public void addWeatherData(Weather newWeather) {
    int counter = 0;
    while (counter < weather_data.length) {
        if (weather_data[counter] == null) {
            weather_data[counter] = newWeather;
            return;
        }
        counter++;
    }
} 
```

# c# - WriteAsync() 和 WriteLineAsync() c#

> ID：13549034
> 
> 赞同：1
> 
> 时间：2012-11-25T07:06:32.827
> 
> 标签：c#, asynchronous, async-await

我有一个需要将结果写入文本文件的方法。我在 c# 5 中使用 Async/Await 来编写文本文件异步，但我认为程序运行同步。它对性能有什么影响吗？WriteLineAsync() 的正确格式是什么？

```
public static void Do()
{
    for(int i=1;i<1000;i++)
    {
         //Here I want to do something
         Write1();
         Write2();
    }
}  

private static async void Write1()
{
    using (StreamWriter str = new StreamWriter(Environment.CurrentDirectory + @"\R.txt"))
    {
        await str.WriteLineAsync(string.Format("{0}",Public.FullTime.Elapsed));
    }
}

private static async void write2()
{
    using (StreamWriter PStr = new StreamWriter(Environment.CurrentDirectory + @"\p.txt"))
    {
        await PStr.WriteAsync(StrBuilder.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-25T07:15:51.843

写入不是同步的，但您正在等待它完成，因此您实际上从异步中没有任何收获。

如果您不想等待通话结束，您可以新建一个`Task`并启动它。这将在不同的线程上执行写入。

# thin - 为什么要启动多个瘦服务器？

> ID：13549037
> 
> 赞同：6
> 
> 时间：2012-11-25T07:06:56.513
> 
> 标签：thin

在 Thin 网站：[http](http://code.macournoyer.com/thin/usage/) ://code.macournoyer.com/thin/usage/它说您可以使用以下方式启动多个服务器：

```
thin start --servers 3 
```

1.  你为什么需要这样做？
2.  每个服务器是否分配了不同的端口或什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T19:45:31.733

1.  如果您可能有**并发请求要处理**，您将启动不止一次的**精简**。要管理并发请求（同时连接），您需要**一个“瘦”集群**。

*****   是的，你可以很容易地看到这一点：**** 

 ****让我们试试单服务器瘦身

```
 thin start -R fart.ru
 Thin web server (v1.5.0 codename Knife)
 Maximum connections set to 1024
 Listening on 0.0.0.0:3000, CTRL+C to stop 
```

查看：

```
 netstat -an | grep 300
 tcp4       0      0  *.3000                 *.*                    LISTEN 
```

好的，我们在一个端口上进行了细听。

现在让我们试试 --servers 3

```
 thin start -R fart.ru --servers 3
 Starting server on 0.0.0.0:3000 ... 
 Starting server on 0.0.0.0:3001 ... 
 Starting server on 0.0.0.0:3002 ... 
```

查看：

```
 netstat -an | grep 300
 tcp4       0      0  *.3002                 *.*                    LISTEN     
 tcp4       0      0  *.3001                 *.*                    LISTEN     
 tcp4       0      0  *.3000                 *.*                    LISTEN 
```

瞧，你有 3 个端口监听。

```
 ps -ef | grep thin 
```

报告 3 个正在运行的进程，每个进程可以管理一个并发请求。

最终，要同时处理请求，您必须启动一个精简集群并反向代理您的虚拟主机，然后在您启动的各种精简上对请求进行负载平衡。

这篇博文可以说明问题：[使用 Apache 2、mod_proxy_balancer 和 Thin Clusters 扩展 Rails](http://jpaulh.blogspot.it/2008/03/scaling-rails-with-apache-2.html)****

# android - Eclipse中的Logcat在物理设备上不断清除

> ID：13549038
> 
> 赞同：4
> 
> 时间：2012-11-25T07:07:01.860
> 
> 标签：android, eclipse, logcat

> **可能重复：**
> [日食中的Logcat保持自动清除](https://stackoverflow.com/questions/5794796/logcat-in-eclipse-keeps-auto-clearing)

听起来与[这个问题](https://stackoverflow.com/questions/5794796/logcat-in-eclipse-keeps-auto-clearing)非常相似，但那里的答案不起作用

当我从 eclipse 在我的设备上运行我的项目时，logcat 显示我的过滤输出很好，大约一秒钟，但随后完全清除。我尝试单击详细按钮，将其更改为调试，然后在设备选择器中选择设备，这些都没有帮助。

它在虚拟设备上按预期工作，但我想开始在物理设备上进行测试。

我在 Windows 8 x64 上运行 Eclipse Juno。该设备是运行 android 2.3.4 的 HTC Thunderbolt

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:20:26.950

事实证明，设备上的 logcat 正在从其他软件中获取一堆条目，超出了默认设置为 80000 个字符的日志缓冲区。取消选中 Window->Preferences->Run/Debug->Console 中的“限制控制台缓冲区”选项可以解决问题。当然，真正的问题是系统向 logcat 写入了这么多！

虚拟设备是骨架设备，没有安装其他应用，所以不存在这个问题。

很抱歉回答我自己的问题，但我希望这对其他人有帮助。

# c# - + 运算符如何用于组合委托？

> ID：13549043
> 
> 赞同：10
> 
> 时间：2012-11-25T07:07:50.743
> 
> 标签：c#, delegates

例如：

```
delegate void SomeDelegate();

SomeDelegate a = new SomeDelegate( () => Console.WriteLine("A") );
SomeDelegate b = new SomeDelegate( () => Console.WriteLine("B") );

SomeDelegate c = a + b; 
```

在最后一行，`a + b`翻译成什么？我只是好奇如何在不使用`+`运算符的情况下添加它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T07:15:13.363

[http://msdn.microsoft.com/en-us/library/ms173172(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms173172(v=VS.80).aspx) - 搜索添加：

> 一个委托在被调用时可以调用多个方法。这称为多播。要向委托的方法列表（调用列表）添加额外的方法，只需使用加法或加法赋值运算符（“+”或“+=”）添加两个委托。例如：

```
MethodClass obj = new MethodClass(); 
Del d1 = obj.Method1; 
Del d2 = obj.Method2; 
Del d3 = DelegateMethod;

//Both types of assignment are valid. 
Del allMethodsDelegate = d1 + d2; 
allMethodsDelegate += d3; 
```

> 此时 allMethodsDelegate 在其调用列表中包含三个方法——Method1、Method2 和 DelegateMethod。原来的三个代表 d1、d2 和 d3 保持不变。调用 allMethodsDelegate 时，依次调用所有三个方法。如果委托使用引用参数，则引用依次传递给三个方法中的每一个，并且一个方法的任何更改对下一个方法都是可见的。当任何方法抛出未在方法中捕获的异常时，该异常将传递给委托的调用者，并且不会调用调用列表中的后续方法。

**更新**

两个委托都派生自[System.Delegate](http://msdn.microsoft.com/en-us/library/system.delegate.aspx)您可以使用这些`combine()`方法将两个委托添加在一起。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-22T02:21:50.483

它是使用[`Delegate.Combine`](https://msdn.microsoft.com/en-us/library/30cyx32c(v=vs.110).aspx)静态方法完成的。

```
SomeDelegate c = Delegate.Combine(a, b) as SomeDelegate; 
```

使用`+=`运算符时实际上是一样的。

```
// This is the same...
eventSource.onEvent += OnEvent;

// ...as this.
eventSource.onEvent = Delegate.Combine(
    eventSource.onEvent,
    Delegate.CreateDelegate(typeof(EventSource.OnEvent), this, "OnEvent")
    ) as EventSource.OnEvent; 
```

[`MulticastDelegate`](https://msdn.microsoft.com/en-us/library/system.multicastdelegate(v=vs.80).aspx)class（`delegate`关键字后面的类）确实有一个调用列表，但这个列表是不可变的。每次将委托与运算符组合时，都会创建一个结合前两个 Delegate 对象的调用列表的`+=`新实例。`MulticastDelegate`

# git - 多个 git 存储库克隆到同一目录中

> ID：13549045
> 
> 赞同：5
> 
> 时间：2012-11-25T07:08:00.480
> 
> 标签：git, multiple-repositories

我的项目有一个标准存储库

```
/home/repo/.git 
```

这是我克隆以获取新网站的基本代码的存储库，即我将其克隆到

```
/var/www/site1 
```

我还创建了几个模块作为存储库，有些网站将使用这些模块，有些则不会。

```
/home/modules/mod1/.git  
/home/modules/mod2/.git 
```

有没有办法可以将这些模块克隆到同一个站点文件夹中？

```
/var/www/site1 
```

模块目录设置为与主存储库具有相同的文件夹结构，当我将它们克隆到主存储库克隆之上时，它们应该合并/替换现有文件。（很少有文件重叠）

我的最佳解决方案是以某种方式命名存储库，这样当我部署一个新站点时，我会执行以下操作：

```
cd /var/www/newsite  
git clone /home/repo/.git  
git clone /home/modules/mod1/.git  
git clone /home/moudles/mod2/.git 
```

当我要对网站进行更新时，我可以执行以下操作：

```
git pull origin master  
git pull mod1  
git pull mod2 
```

或者最好：

```
git pull origin master 
```

也会调用`mod1`和`mod2`.

我一直在查看 git 子模块和分支，但不知道它们是否是我需要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T07:45:03.723

以下是对所需部署命令的建议稍作更改：

```
cd /var/www/  
git clone /home/repo/.git newsite
git remote add mod1 /home/modules/mod1/.git  
git remote add mod2 /home/moudles/mod2/.git  

cd newsite
git merge mod1/master
git merge mod2/master 
```

解释：

正如您所说，您的主模块（/home/repo）和您的`mod1`等`mod2`具有相同的文件夹结构。那么子模块就不太合适了，因为子模块必须位于主仓库的子目录中。在这个版本中，您的本地 git 存储库（由 创建`clone`）知道三个远程存储库。操作之后`merge`，它的状态将与它们中的任何一个都不相同。mod1将`merge`引入 mod1 “拥有”的任何新文件。如果中的任何文件与 中`home/repo`的文件同名，您可能会遇到合并冲突`mod1`，等等。您可以提供一个标志来`merge`从`mod1`始终选择版本，我相信您说的是您想要的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:19:41.483

简而言之，您不能将一个 git 存储库作为另一个 git 存储库的子目录。

此规则有一个例外：您可以将一个 git repo 作为另一个的[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)，但这有很多限制和不便之处。

解决此问题的一般方法是拥有一个没有自己的实际修道院的主 git 存储库，但仅跟踪少数 git 存储库作为其子模块。

或者，我建议使用[`repo`](http://source.android.com/source/using-repo.html)由 Android 项目专门为此目的开发的工具。它涉及创建仅包含一个 XML 文件（称为清单）的小型 git 存储库，该文件跟踪您的子项目签入的位置以及它们如何粘合在一起。这在 Linux 和 Mac 上运行良好，但不幸的是不支持 Windows（repo 需要操作系统的符号链接支持）。

从某种意义上说，git submodules 和 android repo 解决了本质上相同的任务，但使用的方式略有不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-08T19:31:23.673

vcsh工具允许在同一目录中维护多个[存储库。](https://github.com/RichiH/vcsh)

# php - 放置异常后html表单不起作用

> ID：13549047
> 
> 赞同：2
> 
> 时间：2012-11-25T07:08:42.603
> 
> 标签：php, javascript, html, exception

我使用 JS 创建了异常，因此只允许用户在 html 表单字段中输入数字。这很好用，但问题是，提交按钮不再工作。如果我删除异常代码，提交按钮工作得很好！我不明白问题出在哪里。有人可以帮忙吗？提前致谢！

这是一个例外：

```
function validateNum(evt) {
  var theEvent = evt || window.event;
  var key = theEvent.keyCode || theEvent.which;
  key = String.fromCharCode( key );
  var regex = /[0-9]|\./;
  if( !regex.test(key) ) {
    theEvent.returnValue = false;
    if(theEvent.preventDefault) theEvent.preventDefault();
  }
}

function validate()
{

 if( document.myForm.ic.value == "" ||
           isNaN( document.myForm.ic.value ) ||
           document.myForm.ic.value.length != 12)
   {
     alert( "Please provide your correct IC Number!" );
     document.myForm.ic.focus() ;
     return false;
   }else{
     // Put extra check for data format
     var ret = validateNum();
     if( ret == false )
     {
          return false;
     }
   } 
```

这是我的 html 表单操作：

```
<form name="myForm" method="post" action="nonuum_reg.php" onsubmit="return(validate());"> 
```

这是输入字段和提交按钮：

```
 <input name="ic" type="text" id="ic" maxlength="12" size="45" onkeypress='validateNum(event)'/>

<input type="submit" value="Apply" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T08:04:25.877

试试这个作为我对您问题的评论的解释：

```
<form name="myForm" method="post" action="nonuum_reg.php" onsubmit="validate(event);">
    <input name="ic" type="text" id="ic" maxlength="12" size="45" onkeypress='validateNum(event)'/>
    <input type="submit" value="Apply" />
</form>
<script>
    function validateNum(evt) {
        var theEvent = evt;
        var key = theEvent.keyCode || theEvent.which;
        key = String.fromCharCode( key );
        var regex = /[0-9]|\./;

        if( !regex.test(key) ) {
            theEvent.returnValue = false;
            if(theEvent.preventDefault) theEvent.preventDefault();
        }
    }

    function validate(evt){
        if( document.myForm.ic.value == "" || isNaN( document.myForm.ic.value ) || document.myForm.ic.value.length != 12) {
            evt.preventDefault();

            alert( "Please provide your correct IC Number!" );
            document.myForm.ic.focus() ;
            return false;
        } 
    }
</script> 
```

您仍然应该在您的 PHP 控制器上创建验证，以防止用户在他们的浏览器上关闭 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:23:51.207

尝试在你中添加一个 return true =r else close

```
...

else{
     // Put extra check for data format
     var ret = validateNum();
     if( ret == false )
     {
          return false;
     }

   return true;
} 
```

...

这也应该对您有所帮助（不是相同的问题，而是相同的代码）[链接](https://stackoverflow.com/questions/12236721/js-disabling-backspace-functionality-in-firefox)：

# asp.net-mvc-3 - 在asp.net mvc 3中将数据库表部署到生产环境

> ID：13549048
> 
> 赞同：0
> 
> 时间：2012-11-25T07:09:21.887
> 
> 标签：asp.net-mvc-3, visual-studio-2010, sql-server-2008, sql-server-2005

我必须将 asp.net mvc 3 应用程序从开发环境部署到生产环境。

**开发环境**

1.  数据库服务器 2008
2.  视觉工作室 2010
3.  应用程序：ASP.NET MVC 3 和使用模型优先方法的实体框架
4.  .mdf 格式的 Visual Studio 内置数据库

**生产环境：**

1.  sql server 2005
2.  窗口服务器 2008 R2
3.  IIS 7

我已经使用 FTP 发布方法将使用 Visual Studio 的应用程序发布到生产环境。当我浏览应用程序时，它会引发以下异常：

> System.Data.SqlClient.SqlException：对象名称“dbo.User”无效。

由于我没有在生产环境的sql server 2005数据库中建表，所以抛出了上述异常。是否有任何简单的方法可以将使用 Visual Studio 的开发环境数据库部署到生产环境数据库？或者我是否需要在生产环境中手动构建每个表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:32:58.923

虽然我还没有尝试过，但 Code First 迁移可能是您正在寻找的解决方案：http: [//msdn.microsoft.com/en-US/data/jj591621](http://msdn.microsoft.com/en-US/data/jj591621)。

另一种方法是使用 Microsoft 的 SQL Server Data Tools 项目：http: [//msdn.microsoft.com/en-us/data/tools.aspx](http://msdn.microsoft.com/en-us/data/tools.aspx)。要获得此功能，您过去必须为 Visual Studio Premium 或更高版本的许可证付费，但现在可以免费使用 SQL Server Data Tools。我曾为使用数据库优先方法编写的系统使用过这种方法，并且需要维护版本化 SQL 脚本的历史记录。

要使用这种方法，安装 SSDT 并创建一个新的数据库项目。然后创建一个模式比较，将您的开发数据库与数据库项目进行比较。运行比较并将更新写入项目（对于未来的更新，您可以使用此工具比较生产和开发数据库之间的模式）。

然后，您可以使用发布功能将项目直接发布到生产数据库，或者生成一个脚本，然后手动验证和运行该脚本。

直接发布到生产数据库时要格外小心，因为我会担心数据丢失或意外更新。除了初始模式创建（甚至可能不用于初始创建），我建议您始终生成一个脚本，以便您可以在针对生产数据库运行之前在阶段环境中验证输出和测试。

我意识到您正在与开发数据库模式进行比较并维护一个与 POCO 不同的模型，这可能不是您的意图，但是一旦您开始管理版本和版本控制，就有一组版本化的 SQL 脚本，您可以检查到源代码控制和回头参考是无价的。

# c - 在使用 libcurl 发送第一封无效电子邮件后，SMTP 连接即将终止。这是一个“功能”还是我搞砸了？

> ID：13549050
> 
> 赞同：0
> 
> 时间：2012-11-25T07:09:47.707
> 
> 标签：c, curl, smtp, libcurl

我正在尝试向 libcurl 提供一长串电子邮件（其中一些最终不存在）。如果有任何无效的电子邮件，整个脚本就会死掉。

我可以为每个电子邮件地址重新连接到 SMTP 服务器（处理正确），但这只是愚蠢的低效。

我的相关代码如下：

```
// necessary simple curl setup completed above
// assume all referenced variables have been initialized

// init cURL server connection
curl_easy_setopt(curl, CURLOPT_URL, SMTPSERVER);
curl_easy_setopt(curl, CURLOPT_MAIL_FROM, MAILFROM);

curl_easy_setopt(curl, CURLOPT_WRITEHEADER, stdout);

char tmp[EMAIL_STR_LEN+3] = {0}; tmp[0] = '<';
while( fgets(&tmp[1], EMAIL_STR_LEN+1, emails) ){
        // '>' overwrites '\0' from fgets()
        tmp[EMAIL_STR_LEN-1] = '>';

        strncpy(current->email, tmp, EMAIL_STR_LEN+3);

        // malloc next link
        current->next = initemail();
        current = current->next;

        // remove \n\0 from stream
        fseek(emails, 2, SEEK_CUR);
}
fclose(emails);

current = head;
while(current){
        recipients = curl_slist_append(recipients, (const char *) current->email);
        current = current->next;
}

curl_easy_setopt(curl, CURLOPT_MAIL_RCPT, recipients);
curl_easy_perform(curl);

// clean up stuff 
```

执行上述操作，但`curl_easy_perform`要调用一个电子邮件收件人，然后将变量置空并处理下一封电子邮件即可。唯一的问题是 libcurl 每次都重新连接到 SMTP 服务器，从而增加了处理的大量开销。

我在一个电子邮件线程的某处发现了这个“功能”，但这是一个相当过时的回复。我想知道是否有解决此问题的好方法，或者我是否只是在做一些愚蠢的事情。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:17:26.723

您遇到了[KNOWN_BUG](http://curl.haxx.se/docs/knownbugs.html) #79：

> SMTP。当向多个接收者发送数据时，如果其中一个接收者指示失败（在“RCPT TO”命令上），curl 将中止并返回失败。普通邮件程序会继续进行，但仍会发送给可以接收数据的程序。这在未来可能会发生变化。 [http://curl.haxx.se/bug/view.cgi?id=3438362](http://curl.haxx.se/bug/view.cgi?id=3438362)

随时帮助我们完成修复！

# arrays - 查找对给定数组进行排序所需的先删除后追加操作数

> ID：13549051
> 
> 赞同：24
> 
> 时间：2012-11-25T07:10:54.817
> 
> 标签：arrays, algorithm, sorting, language-agnostic

这是一道面试题。A`swap`表示从数组中删除任何元素并将其附加到同一数组的后面。给定一个整数数组，找出对`swaps`数组进行排序所需的最小数目。

有比 更好的解决方案`O(n^2)`吗？

例如：

输入数组：[3124]。

数量`swaps`：2（[3124] -> [1243] -> [1234]）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-25T08:42:50.563

问题归结为找到作为输入数组中的子序列出现的排序数组的最长前缀。这决定了*不需要*排序的元素。剩下的元素需要从小到大一一删除，在后面追加。

在您的示例中`[3, 1, 2, 4]`，已排序的子序列是`[1, 2]`。最佳解决方案是删除剩余的两个元素，`3`和`4`，并将它们附加在后面。因此，最佳解决方案是两次“交换”。

可以`O(n logn)`使用`O(n)`额外的内存及时找到子序列。以下伪代码将执行此操作（代码也恰好是有效的 Python）：

```
l = [1, 2, 4, 3, 99, 98, 7]
s = sorted(l)
si = 0
for item in l:
  if item == s[si]:
    si += 1
print len(l) - si 
```

如果，如您的示例所示，数组包含从`1`到的整数排列`n`，则可以`O(n)`使用`O(1)`内存及时解决问题：

```
l = [1, 2, 3, 5, 4, 6]
s = 1
for item in l:
  if item == s:
    s += 1
print len(l) - s + 1 
```

更一般地说，只要我们先验地知道输出数组，就可以使用第二种方法，因此不需要通过排序找到它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T07:47:13.197

`O(nlogn)`即使我们不假设连续值数组，这也可能有效。
如果我们这样做 - 它可以在`O(n)`. 一种方法是使用`O(n)`空间和`O(nlogn)`时间。
给定数组`A`将它（）排序`O(nlogn)`为第二个数组`B`。
现在...（数组从 1 开始索引）

```
swaps = 0
b = 1
for a = 1 to len(A)
  if A[a] == B[b]
    b = b + 1
  else
    swaps = swaps + 1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T07:42:36.830

观察：如果一个元素被交换到后面，它之前的位置无关紧要。没有元素需要多次交换。

观察：最后的交换（如果有的话）必须移动最大的元素。

观察：在交换之前，数组（不包括最后一个元素）必须排序（通过前交换，或最初）

**排序算法**，假设值是连续的：找到从 1 开始的连续（按值）元素的最长排序子序列：

3 **1** 5 **2** 4

依次交换所有更高的元素：

1 5 2 4 3

1 5 2 3 4

1 2 3 4 5

**要找到 O(n) 中的交换次数**，请找到从 1 开始的连续元素的最长排序子序列的长度：

*   预期 = 1
*   对于序列中的每个元素
    *   如果元素 == 预期
        *   预期 += 1
*   返回预期-1

那么交换的数量 = 输入的长度 - 它的最长排序子序列。

**如果输入不是 1..n 的排列，则**另一种解决方案（ O(n^2) ）：****

 ***   掉期 = 0
*   环形
    *   找到最大元素的第一个实例并检测数组是否已排序
    *   如果数组已排序，则返回交换。
    *   否则从数组中删除找到的元素并增加交换。

**另一个解决方案**（ O(n log n) ），假设独特的元素：

*   将每个元素包装在 {oldPos, newPos, value}
*   制作数组的浅拷贝
*   按值对数组进行排序
*   存储每个元素的新位置
*   对（未排序的）副本中的 newPos' 运行排列算法

如果您不想复制输入数组，请在最后一步之前按 oldPos 排序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-25T00:10:07.203

这可以在 O(n log n) 中完成。

首先找到数组中的最小元素。现在，找到出现在该元素之前的最大元素。打电话给这个`max_left`。`swap()`您必须在数组的 min 元素之前调用所有元素。

现在，找到最小元素右侧的最长递增子序列，以及应该跳过值大于 max_left 的元素的约束。所需的交换次数是`size(array) - size(LIS)`。

例如考虑数组，

`7 8 9 1 2 5 11 18`

数组中的最小元素是 1。所以我们在最小元素之前找到最大值。

`7 8 9 | 1 2 5 11 18`

max_left = 9

现在，找到元素 < 9 LIS = 1,2,5 的 min 右侧的 LIS

掉期数 = 8 - 3 = 5

在 max element 为 null 的情况下，即 min 是第一个元素，找到数组的 LIS 并且所需的答案是 size(array)-size(LIS)

例如

`2 5 4 3`

max_left 为空。LIS 是`2 3`

交换数 = 大小（数组） - 大小（LIS） = 4 - 2 = 2

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-22T15:11:06.040

这是python中用于最小交换次数的代码，

```
def find_cycles(array):
   cycles = []
   remaining = set(array)
   while remaining:
      j = i = remaining.pop()
      cycle = [i]
      while True:
         j = array[j]
         if j == i:
             break
         array.append(j)
         remaining.remove(j)
      cycles.append(cycle)
   return cycles

def minimum_swaps(seq):
    return sum(len(cycle) - 1 for cycle in find_cycles(seq)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-22T07:08:01.003

**O(1) 空间和 O(N) (~ 2*N) 解决方案**假设 min 元素为 1，并且数组包含从 1 到 N-1 的所有数字，没有任何重复值。其中 N 是数组长度。

```
int minimumSwaps(int[] a) {
    int swaps = 0;
    int i = 0;
    while(i < a.length) {
        int position = a[i] - 1;
        if(position != i) {
            int temp = a[position];
            a[position] = a[i];
            a[i] = temp;
            swaps++;
        } else {
            i++;
        }
    }
    return swaps;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-02T11:23:14.063

```
int numSwaps(int arr[], int length) {
bool sorted = false; 
int swaps = 0;
while(!sorted) {
    int inversions = 0;
    int t1pos,t2pos,t3pos,t4pos = 0;
    for (int i =  1;i < length; ++i)
    {
        if(arr[i] < arr[i-1]){
            if(inversions){
                tie(t3pos,t4pos) = make_tuple(i-1, i);
            }
            else tie(t1pos, t2pos) = make_tuple(i-1, i);
            inversions++;
        }
        if(inversions == 2)
            break;
    }
    if(!inversions){
        sorted = true;
    }
    else if(inversions == 1) {
        swaps++; 
        int temp = arr[t2pos];
        arr[t2pos] = arr[t1pos];
        arr[t1pos] = temp;
    }
    else{
        swaps++;
        if(arr[t4pos] < arr[t2pos]){
            int temp = arr[t1pos];
            arr[t1pos] = arr[t4pos];
            arr[t4pos] = temp;
        }
        else{
            int temp = arr[t2pos];
            arr[t2pos] = arr[t1pos];
            arr[t1pos] = temp;
        }
    }
}
return swaps;
} 
```

此代码返回对数组进行就地排序所需的最小交换次数。

例如，A[] = [7,3,4,1] 通过交换 1 和 7，我们得到 [1,3,4,7]。类似地 B[] = [1,2,6,4,8,7,9]。我们首先将 6 与 4 交换，因此，B[] -> [1,2,4,6,8,7,9]。然后是 7 和 8。所以 -> [1,2,4,6,7,8,9]

该算法以 O(索引 i < 索引 i-1 处的值的对数) ~ O(N) 运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-07T10:59:15.123

编写一个非常简单的 JavaScript 程序来对数组进行排序并找到交换次数：

```
 function findSwaps(){

    let arr = [4, 3, 1, 2];
    let swap = 0
    var n = arr.length
    for (let i = 0; i < n; i++) {
        for (let j = i + 1; j < n; j++) {
            if (arr[i] > arr[j]) {
                arr[i] = arr[i] + arr[j];
                arr[j] = arr[i] - arr[j];
                arr[i] = arr[i] - arr[j]
                swap = swap + 1
            }
        }
    }
    console.log(arr);
    console.log(swap)
  } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-03T18:49:18.243

```
for(int count = 1; count<=length; count++)
{
    tempSwap=0; //it will count swaps per iteration
    for(int i=0; i<length-1; i++)
        if(a[i]>a[i+1])
        {
           swap(a[i],a[i+1]);
           tempSwap++;
        }
    if(tempSwap!=0) //check if array is already sorted!
        swap += tempSwap;
    else
        break;
}
System.out.println(swaps); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-27T19:19:53.617

这是适用于所有输入的 O(n) 解决方案：

```
static int minimumSwaps(int[] arr) {
        int swap=0;
        boolean visited[]=new boolean[arr.length];

        for(int i=0;i<arr.length;i++){
            int j=i,cycle=0;

            while(!visited[j]){
                visited[j]=true;
                j=arr[j]-1;
                cycle++;
            }

            if(cycle!=0)
                swap+=cycle-1;
        }
        return swap;
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-04T10:42:21.483

```
def minimumSwaps(arr):
    swaps = 0
    '''
    first sort the given array to determine the correct indexes 
    of its elements
    '''
    temp = sorted(arr)

    # compare unsorted array with the sorted one
    for i in range(len(arr)):
        '''
        if ith element in the given array is not at the correct index
        then swap it with the correct index, since we know the correct
        index because of sorting. 
        '''
        if arr[i] != temp[i]: 
          swaps += 1
          a = arr[i]
          arr[arr.index(temp[i])] = a
          arr[i] = temp[i]    
    return swaps 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-22T05:41:19.850

如果您注意到在以下情况下需要删除并附加数组中的元素，我认为这个问题可以在 O(N) 中解决：

*   右侧有一个较小的元素或...
*   他的左边有一个较小的元素需要删除和附加。

然后它只是识别需要删除和附加的元素。这是代码：

```
static int minMoves(int arr[], int n) {
    if (arr.length == 0) return 0;

    boolean[] willBeMoved = new boolean[n]; // keep track of elements to be removed and appended
    int min = arr[n - 1]; // keep track of the minimum

    for (int i = n - 1; i >= 0; i--) { // traverse the array from the right
        if (arr[i] < min) min = arr[i]; // found a new min
        else if (arr[i] > min) { // arr[i] has a smaller element to the right, so it will need to be moved at some point
            willBeMoved[i] = true;
        }
    }

    int minToBeMoved = -1; // keep track of the minimum element to be removed and appended
    int result = 0; // the answer

    for (int i = 0; i < n; i++) { // traverse the array from the left
        if (minToBeMoved == -1 && !willBeMoved[i]) continue; // find the first element to be moved
        if (minToBeMoved == -1) minToBeMoved = i;

        if (arr[i] > arr[minToBeMoved]) { // because a smaller value will be moved to the end, arr[i] will also have to be moved at some point
            willBeMoved[i] = true;
        } else if (arr[i] < arr[minToBeMoved] && willBeMoved[i]) { // keep track of the min value to be moved
            minToBeMoved = i;
        }

        if (willBeMoved[i]) result++; // increment
    }

    return result;
} 
```

它使用 O(N) 空间。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-01-10T13:10:38.487

**@all ，@Itay karo 和 @NPE 提供的公认解决方案是完全错误的**，因为它不考虑交换元素的未来顺序......

它对于许多测试用例都**失败了，例如：**

**3 1 2 5 4**

正确输出：**4**

但他们的代码输出为**3** ...

解释： 3 1 2 5 4--->1 2 5 4 3--->1 2 4 3 5--->1 2 3 5 4--->1 2 3 4 5

PS：由于声誉低，我无法在那里发表评论

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-08-14T09:14:27.090

听听我在 c# 中的解决方案，以解决缩短数组所需的最小交换次数当时我们只能交换 2 个元素（在任何索引位置）。

```
public class MinimumSwaps2
{
    public static void minimumSwapsMain(int[] arr)
    {

        Dictionary<int, int> dic = new Dictionary<int, int>();
        Dictionary<int, int> reverseDIc = new Dictionary<int, int>();
        int temp = 0;
        int indx = 0;
  //find the maximum number from the array
        int maxno = FindMaxNo(arr);

        if (maxno == arr.Length)
        {
            for (int i = 1; i <= arr.Length; i++)
            {
                dic[i] = arr[indx];
                reverseDIc.Add(arr[indx], i);
                indx++;
            }
        }
        else
        {
            for (int i = 1; i <= arr.Length; i++)
            {
                if (arr.Contains(i))
                {
                    dic[i] = arr[indx];
                    reverseDIc.Add(arr[indx], i);
                    indx++;
                }

            }
        }

        int counter = FindMinSwaps(dic, reverseDIc, maxno);

    }
    static int FindMaxNo(int[] arr)
    {
        int maxNO = 0;
        for (int i = 0; i < arr.Length; i++)
        {
            if (maxNO < arr[i])
            {
                maxNO = arr[i];
            }
        }
        return maxNO;
    }
    static int FindMinSwaps(Dictionary<int, int> dic, Dictionary<int, int> reverseDIc, int maxno)
    {
        int counter = 0;
        int temp = 0;
        for (int i = 1; i <= maxno; i++)
        {
            if (dic.ContainsKey(i))
            {
                if (dic[i] != i)
                {
                    counter++;
                    var myKey1 = reverseDIc[i];
                    temp = dic[i];
                    dic[i] = dic[myKey1];
                    dic[myKey1] = temp;

                    reverseDIc[temp] = reverseDIc[i];
                    reverseDIc[i] = i;
                }
            }
        }
        return counter;
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-02T17:24:09.413

```
int temp = 0, swaps = 0;
        for (int i = 0; i < arr.length;) {
            if (arr[i] != i + 1){ 
            //  System.out.println("Swapping --"+arr[arr[i] - 1] +"  AND -- "+arr[i]);
                temp = arr[arr[i] - 1];
                arr[arr[i] - 1] = arr[i];
                arr[i] = temp;
                ++swaps;
            } else
                ++i;
                //  System.out.println("value at position -- "+ i +" is set to -- "+ arr[i]);
        }
        return swaps; 
```

这是我找到的最优化的答案。就是这么简单。您可能会通过循环一看就明白。感谢黑客级别的达里尔。**

# javascript - 无法设置选定的属性。未指定的错误。淘汰赛

> ID：13549052
> 
> 赞同：6
> 
> 时间：2012-11-25T07:11:00.767
> 
> 标签：javascript, jquery, internet-explorer, knockout.js

我在 windows XP 上使用 VS2010，Jquery-1.7.1.min.js，knockout-2.1.0.js，我的浏览器是 IE8。尝试使用数组和进行简单的竞标：

这是代码：

```
//my.js:
$(function () {
   function tvm() {
     // Array
     this.tickets = [
        { name: 'A', price: 125 },
        { name: 'B', price: 128 },
        { name: 'C', price: 145 }
     ];
     // this will hold the selected value
     this.chosenTicket = ko.observable();
   }
   ko.applyBindings(new tvm());
});

//html:
<select
   data-bind="options: tickets,
          optionsCaption:'choose...',
          optionsText: 'name',
          value: chosenTicket">
</select>

<p data-bind="with: chosenTicket">
   <b data-bind="text: name"></b>
   <b data-bind="text: price"></b>
</p> 
```

运行此程序时，我可以看到 select 元素及其数据（直到现在一切都很好），当尝试从 select 元素中选择一个值时，我收到以下错误消息： **“无法设置选定的属性。未指定的错误”**

知道如何解决这个问题吗？（在论坛上找不到帮助），

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:41:17.603

检查 jsFiddle 是否相同**http://jsfiddle.net/rupesh_kokal/wPzNQ/**

您编写的代码可以与最新的淘汰赛 js 配合使用。

您可能想交叉检查一次 jsFiddle 的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T08:24:56.930

尝试使用最新版本在 VS 环境外的演示示例中创建相同的内容，然后尝试在 VS 环境中复制。

# asp.net-mvc-3 - 使用 MVC3 和自定义成员资格提供程序的多租户

> ID：13549061
> 
> 赞同：1
> 
> 时间：2012-11-25T07:12:56.530
> 
> 标签：asp.net-mvc-3, multi-tenant, custom-membershipprovider

我有一个关于多租户（使用 MVC3、EF）和自定义 SQL 成员资格提供程序的问题。

我创建了自定义用户和角色成员资格类，因为我必须在我的应用程序表中包含 userId 以及其他基于用户的属性。我现在将其转换为多租户应用程序。我们正在寻找一个共享数据库、共享应用程序模型。我们有一个存储租户详细信息（包括 URL）的主租户表，并且 Tenant_id 已包含在每个表中。现在我们正在对应用程序本身进行更改。

假设租户将使用如下 URL 登录：tenantUrl.mybaseURL.com。

我将根据此算法更改我的自定义用户验证方法：

```
- User goes to URL to login
- The Account controller logon method calls the Custom validate method passing in user/pwd and the tenantId (which has been looked up from the db using the URL).
- The custom validate method checks if the user/password/tenantId combination are valid. 
- If valid, we set the tenant Id in a HttpRequest Object and login the user
- For each db access, we lookup the Request object for the tenandId and use that as a filter. 
```

编辑：这是我的 TenantContext 类，我将在其中设置/获取tenantId

```
public class TenantContext
{
    public static int TenantId
    {
        set
        {

            if (!HttpContext.Current.Items.Contains("tenant-code"))
                HttpContext.Current.Items.Add("tenant-code", value);

            HttpContext.Current.Items["tenant-code"] = value;
        }

        get {return HttpContext.Current.Items.Contains("tenant-code") ? Convert.ToInt32(HttpContext.Current.Items["tenant-code"]) : -1; }

    }
} 
```

tenantId 将在上述 Context 中的 Account Controller Login 中设置。

以上是做到这一点的好方法还是有更好的方法？有人看到我应该注意的任何问题吗？

我在这里看到了一个tenantId 存储在AppSettings 中的示例[Handling data access in multi tenant site](https://stackoverflow.com/questions/9735361/handling-data-access-in-multi-tenant-site)。这是更好的方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T18:23:03.693

你的算法很完美，事实上我一直在从事这种实现。我有一个建议，你可以使用自定义对象来维护不同层的用户身份。这将包含用户 ID、租户 ID 等。因为在 WCF 服务的情况下以及在属于租户并代表另一个租户操作的用户的上下文中，此 HttpContext 不会为您提供帮助。因此，拥有一个标识用户的 UserIdentity 对象将是一个更好的选择。此外，请务必将租户 ID 发送到数据访问层，并且不要从请求中推断租户 ID，因为它并非在所有环境中都可用。

# c# - 使用实体框架

> ID：13549062
> 
> 赞同：0
> 
> 时间：2012-11-25T07:13:10.393
> 
> 标签：c#, asp.net, entity-framework-4

我刚开始使用 Entity Framework，它创建了一个 Context 类，我可以使用它从中获取我需要的所有数据。但是我面临一个关于如何组织我的代码的问题，通过观看演示，这个人只是使​​用框架并在控制台应用程序上编写所有内容。什么是使用实体框架的最佳方式并且它看起来很干净？，我的意思是......现在使用 aspx 页面，我可以只使用 aspx.cs 来获取数据或保存数据。但我不希望这样，我希望它更有条理，尽管实体框架通过创建对象等几乎完成了所有工作。但是，我仍然需要使用类似的东西

```
using(var myobject = new MyContextData())
{
    blah blah..
} 
```

你会说编写包装这些调用的类会更好吗？我真的很感激任何输入，因为它真的会让我成为使用实体框架的更好的程序员。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:32:34.073

每个提供有关 EF 教程的人都应该问这个问题。很难说最好的方法是什么，但是将所有代码放在代码隐藏类 (aspx.cs) 中对可扩展性和可测试性没有帮助。请尝试阅读这篇文章：

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

它不仅是asp.net 上的*官方*教程，而且主要表明，Framework EF 可以在当前幻想中正确使用`Repository pattern`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:31:57.893

您在创建类来处理您的 EF 方面处于正确的轨道上。

这样做的最大好处是能够轻松地进行单元测试。

尽早测试并经常测试总是一个好主意。

我建议将您的 EF 相关类放在一个单独的项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:14:17.220

**编辑：**

我认为通用存储库是反模式。但我不明白@TomTom 的评论。

**原答案：**

正如 Radim Köhler 提到的，您需要实施`Repository and Unit of Work patterns` 但我认为他提供的文章并不完全正确。

在我目前的工作中，我使用以下这些模式的实现。例如，我们有三种类型的实体：`Person, Good and Order`. 我为 Persons 创建了存储库。在常见情况下，存储库不能是通用的。它必须包含代表该实体的特定查询的方法。因此，通过查看存储库的界面，您可以了解对实体（例如人）执行了哪些类型的查询。正如您将看到的，我为名为 的 Person 创建了 DTO `PersonWrap`。要从 Person 创建 PersonWrap 并从 PersonWrap 更新 Person，您可以使用 AutoMapper 而不是`PersonWrap()`构造函数和`Update()`方法。因为 EntityFramework`DbContext`实现了`Unit of Work`模式，您只需将创建的 DbContext 提供给存储库方法。如果存储库方法是一个单独的操作，并且您不需要此方法之外的 DbContext，您可以在此方法中创建和处置它。

```
public class Person {
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string SecondName { get; set; }
    public DateTime RegistrationDate { get; set; }
    public List<Order> Orders { get; set; } 
}

public class Good {
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
}

public class Order {
    public int Id { get; set; }
    public Person Person { get; set; }
    public Good Good { get; set; }
    public int Count { get; set; }
}

public class MyDbContext: DbContext
{
    public IDbSet<Person> Persons { get { return Set<Person>(); }}
    public IDbSet<Good> Goods { get { return Set<Good>(); }}
    public IDbSet<Order> Orders { get { return Set<Order>(); }} 
}

public class PersonRepository {
    public IEnumerable<Person> GetAll() {
        using (var context = new MyDbContext()) {
            return context.Persons.ToList();
        }
    }

    public IEnumerable<Person> GetLastWeekPersons() {
        using (var context = new MyDbContext()) {
            return context.Persons.Where(p => p.RegistrationDate > new DateTime().AddDays(-7)).ToList();
        }
    } 

    public Person GetById(int id, MyDbContext context) {
        return context.Persons.Include(p => p.Orders).FirstOrDefault(p => p.Id == id);
    }

    public Person GetById(int id) {
        using (var context = new MyDbContext()) {
            return GetById(id, context);
        }
    }
}

public class PersonWrap {
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string SecondName { get; set; }
    public int OrderCount { get; set; }

    public PersonWrap(Person person) {
        Id = person.Id;
        FirstName = person.FirstName;
        SecondName = person.SecondName;
        OrderCount = person.Orders.Count;
    }

    public void Update(Person person) {
        person.FirstName = FirstName;
        person.SecondName = SecondName;
    }
}

public class PersonDetailsViewController {
    public PersonWrap Person { get; protected set; }

    public PersonDetailsViewController(int personId) {
        var person = new PersonRepository().GetById(personId);
        if (person != null) {
            Person = new PersonWrap(person);
        }
    }

    public void Save() {
        using (var context = new MyDbContext()) {
            var person = new PersonRepository().GetById(Person.Id, context);
            Person.Update(person);
            context.SaveChanges();
        }
    }
} 
```

# html - 如何设置 joomla 不删除“rel”属性

> ID：13549063
> 
> 赞同：2
> 
> 时间：2012-11-25T07:13:34.670
> 
> 标签：html, joomla, joomla2.5, rel

我想创建一个带有`rel`属性的链接的文章，但是 Joomla 正在删除这个属性。如何让 Joomla 不删除我的属性？

我有：

```
<a href = "http://site.com" rel="my_rel"> 
```

但在页面上看到：

```
<a href = "http://site.com"> 
```

我正在使用 Joomla 2.5 和 tinyMCE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:06:24.207

通过添加 tinymce.init() 来解决：

```
extended_valid_elements: _old_settings_ + ",input[*]" 
```

启用标签的所有属性

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-09T13:30:56.357

我有一个类似的问题。我想使用可以与标签和相应属性一起使用的[Font Awesome Icons 。](http://fortawesome.github.io/)`<i>`

添加`i[*]`到*TinyMCE*插件设置中的*Valid Elements*为我解决了这个问题（*Extensions -> Plugins > Editor - TinyMCE*）

 ****注意：**看起来，为*有效元素*提供一个值会覆盖一些默认设置。因为我必须添加我想要明确允许的所有标签。例如`i[*],span[*],br,h4,h3`**

# java - 基于键值对HashMap的ArrayList进行排序

> ID：13549065
> 
> 赞同：4
> 
> 时间：2012-11-25T07:13:59.957
> 
> 标签：java, hashmap

我有一个 HashMaps 列表。每个 HashMap 由几个 kay-value 对组成，所有内容都以字符串形式出现。我将所有哈希图存储在一个数组列表中。现在我需要根据哈希图中的键对数组列表进行排序。

这是我的示例数据：

```
{
 "productID":"5643",
 "productName":"Apple - iPod touch",
 "outsidePrice":"189.99", 
 "merchantID":"134439",
 "ourPrice":"184.99", 
 "storeName":"Ebay",
}

{
 "productID":"3243",
 "productName":"Apple - iPad",
 "outsidePrice":"389.99", 
 "merchantID":"54439",
 "ourPrice":"384.99", 
 "storeName":"Apple",
} 
```

我将这些数据存储在这个结构中。

```
ArrayList<HashMap<String, String>> data_list = new ArrayList<HashMap<String, String>>(); 
```

我有很多这样的项目。现在我需要根据 hashmap 中的 productName、Price、storeName、productID 字段对数组列表进行排序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T07:48:46.497

我建议您使用自定义产品类来为您执行此操作。恕我直言，它最终将使您的代码更易于维护和更健壮。

这个怎么样？

代表您的数据的类：

```
class Product{

     public string productId;
     public string productName;
     public BigDecimal outsidePrice;
     public int merchantId;
     public BigDecimal ourPrice;
     public string storeName;

// whatever constuctors you need

} 
```

您的产品清单：

```
 List<Product> products; 
```

现在定义一个[比较](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)器进行排序，每个字段对应一个您需要排序的字段。这是 productId 的示例。

```
public class ProductProductIdComparator implements Comparator<Product>{

     @Override
     public int compare(Product product1, Product product2) {

        if (product1.productId > product2.productId){
            return +1;
        }else if (product1.productId < product2.productId){
            return -1;
        }else{
            return 0;
        }
    }
} 
```

最后，一个接受比较器作为参数的[集合排序：](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

```
Collections.sort(products, new ProductProductIdComparator()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-25T07:37:55.707

[Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)类提供了一种实用方法，用于使用 Comparator对列表进行就地排序。

```
final List<Map<String, String>> dataList = new ArrayList<HashMap<String, String>>(4);
Collections.sort(dataList, new Comparator<Map<String, String>>() {
    @Override
    public int compare(final Map<String, String> map1, final Map<String, String> map2) {
        // Get fields from maps, compare
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T07:28:58.847

简而言之，您可以使用 arrays.sort() 来实现这一点，但内存成本很小。

```
HashMap[] result = Arrays.sort(list.toArray(), new Comparator() {
  public void compare(Object o1, Object o2) {
    HashMap<String, String> a = (HashMap<String, String>)o1;
    HashMap<String, String> b = (HashMap<String, String>)o2;
    // return value as per contract of Comparator.compare() doing whatever comparisons you need.
  }

  public boolean equals(Object obj) { return this == obj; }
}); 
```

# asp.net - Asp.net 动态链接按钮未引发事件

> ID：13549071
> 
> 赞同：0
> 
> 时间：2012-11-25T07:14:34.987
> 
> 标签：asp.net, event-handling

我有一个表格数据，其中每行的最后一列都添加了一个动态链接按钮。

```
LinkButton link = new LinkButton();
link.Text = "Edit";
link.ID = dt.Rows[dt.Rows.IndexOf(dtRow)][0].ToString() + "|" + dt.Rows[dt.Rows.IndexOf(dtRow)][1].ToString();
link.ClientIDMode = System.Web.UI.ClientIDMode.AutoID;
cell.Controls.Add(link);
link.Click += new EventHandler(EditClicked); 
```

显示编辑链接，单击它也会回发，但`EditClicked`根本不会触发该事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:40:51.067

您的问题是您正在动态创建 LinkBut​​ton 而不是在加载页面时再次重新创建它**。**

如果您动态创建一个控件，然后在回发时，您不会再次创建它（在`Page_Load`或最好在 中`Page_Init`），则不会触发该事件。

解决此问题的一种方法是使用隐藏字段：
当您动态创建链接按钮时，为隐藏字段设置一个特殊值。然后，在`Page_Load`（在`if (IsPostback)`）中检查隐藏字段，如果它具有特殊值 - 再次重新创建所有这些控件。

# php - 在另一个表列的基础上更新表列

> ID：13549074
> 
> 赞同：0
> 
> 时间：2012-11-25T07:15:16.253
> 
> 标签：php, mysql, compare

我有 2 张桌子。'report' 和 'panel_calculation' 是表格。

```
report contains:

r_zone   r_address    r_status
=======+==========+============
1          8             0
2          9             0
2          6             0
7          9             0
3          2             0

panel_calculation contains:

p_cal_zone  p_cal_address  p_status
===========+==============+============
7                9             1
3                2             1 
```

我需要根据 'panel_calculation' 表更新 'report' 表中的 r_status 列。

所以最终的结果是这样的：

```
Final 'report' should be like this:

r_zone   r_address    r_status
=======+==========+============
1          8             0
2          9             0
2          6             0
7          9             1
3          2             1 
```

我需要你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:17:13.743

即使*更新*表格，您仍然可以加入两个表格。

```
UPDATE  report s
        INNER JOIN panel_calculation b
            ON s.r_zone = b.p_cal_zone
SET     s.r_status = b.p_status 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/6c286/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:17:18.560

尝试这个：

```
UPDATE report r
INNER JOIN panel_calculation p ON r.r_zone = p.p_cal_zone 
SET r.r_status = p.p_status; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/3fa68/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T07:20:22.963

您可以像这样使用 LEFT JOIN：

```
UPDATE report t1
LEFT JOIN panel_calculation t2
    ON t1.r_zone=t2.p_cal_zone
    AND t1.r_address=t2.p_cal_address
SET t1.r_status=t2.p_status 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T07:34:30.110

作为您的问题的解决方案，请尝试执行以下 sql 查询

```
 update report r set r_status=(select p_status from panel_calculation where p_cal_zone=r.r_zone limit 1 ) 
```

# r - Great Circles 代码中的对映错误

> ID：13549080
> 
> 赞同：2
> 
> 时间：2012-11-25T07:16:18.970
> 
> 标签：r, great-circle

我正在尝试构建类似[http://flowingdata.com/2011/05/11/how-to-map-connections-with-great-circles/](http://flowingdata.com/2011/05/11/how-to-map-connections-with-great-circles/)但在 csv 文件中使用我自己的数据。如果我使用与作者相同的 csv 文件，代码运行良好，但使用我的，这就是我得到的

代码

```
library(maps) 
library(geosphere) 

map("world") 

xlim <- c(-180.00, 180.00) 

ylim <- c(-90.00, 90.00) 

map("world", col = "#f2f2f2", fill = TRUE, bg = "white", lwd = 0.05,xlim = xlim, ylim = ylim) 

airports <- read.csv("/Users/shabnam/Desktop/airports.csv", as.is=TRUE, header=TRUE) 
flights <- read.csv("/Users/shabnam/Desktop/flights.csv", as.is=TRUE, header=TRUE) 

 pal <- colorRampPalette(c("#545454", "white"))colors <- pal(100) 
map("world", col="#303030", fill=TRUE, bg="black", lwd=0.05, xlim=xlim, ylim=ylim) 

fsub <- flights[flights$airline == "AA",] 

fsub <- fsub[order(fsub$cnt),] 

maxcnt <- max(fsub$cnt) 

for (j in 1:length(fsub$airline)) 
{ 
air1 <- airports[airports$iata == fsub[j,]$airport1,] 

air2 <- airports[airports$iata == fsub[j,]$airport2,] 

inter <- gcIntermediate(c(air1[1,]$long, air1[1,]$lat), c(air2[1,]$long, air2[1,]$lat), n=100, addStartEnd=TRUE) 

colindex <- round( (fsub[j,]$cnt / maxcnt) * length(colors) ) 

lines(inter, col=colors[colindex], lwd=0.8) 
} 

Error in if (antipodal(p1, p2)) { : missing value where TRUE/FALSE needed 
```

我已经尝试了一切，添加了 breakAtDateLine、sp 和 sepNA 但没有用。

非常感谢任何帮助，这是我第一次尝试使用 R。

# android - 谷歌地图在 Chrome 手机中无法交互

> ID：13549081
> 
> 赞同：1
> 
> 时间：2012-11-25T07:16:33.473
> 
> 标签：android, ios, google-maps, google-chrome, jquery-mobile

我在基于 HTML5、jQuery Mobile 的移动站点中使用 Google 地图。问题在于，在 Chrome 中，地图不是交互式的，即行为不符合预期：捏合、平移或任何手势根本不起作用。该地图或多或少表现为图片，如果我捏它，浏览器最终会放大整个站点。奇怪的是，如果我设法点击地图左上角的 +/- 按钮，它会按预期缩放 - 尽管有点慢/波涛汹涌。

值得一提的是，我使用了几个地图标记以及一个将地图缩放设置为绑定标记的函数。这是在所有经过测试的浏览器中正确“呈现”的方式。

我已经在几个桌面浏览器（包括 Chrome）中测试了该站点，所有这些都可以正常工作。至于移动浏览器，我测试了 Android 浏览器、Opera Mobile、Safari，最后是 Chrome Mobile。地图错误发生在 Android 和 IOS 版本的 Chrome 中。

看到它适用于大多数移动浏览器并且 Chrome 是这群人中的新人，我想知道是否还有其他人看到过这种行为？希望这可能是我现在不附加任何代码的情况。但是，如果有人认为这可能是由代码中的错误引起的，我很乐意对其进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-11T01:28:40.827

所以gestureHandling：'贪婪'！

```
var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 14,
      styles: styleArray,
      center: myLatLng,
      gestureHandling: 'greedy'
    }); 
```

# php - 基于字符数的正则表达式匹配？

> ID：13549083
> 
> 赞同：-3
> 
> 时间：2012-11-25T07:16:41.683
> 
> 标签：php, regex

正则表达式可以识别序列并根据它执行操作吗？

例如：我需要正则表达式来搜索 $string，然后根据 $string 前面的 x 个字符数进行计数并提取一些数据。

如果有人帮助我更好地表达这个问题或建议链接，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T07:27:52.933

您正在寻找正则表达式中称为前瞻的东西。例如，下面的正则表达式只有在字符串前自然有 5 到 7 位数字时才会匹配 - 您需要将“string”替换为您自己的 var。

```
if (eregi('[[:digit:]]{5,7}(?=string)', $subject)) {
    # Successful match
} else {
    # Match attempt failed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:26:21.353

我不了解 PHP，但对于提供反向引用的正则表达式引擎，这应该可以解决问题（使用 Javascript 样式的 RegExp 创建）：

```
var reg = new RegExp("^.*(.{"+x+"})"+str); 
```

如果 x 为 5，str 为“world”，则正则表达式将如下所示：

```
/^.*(.{5})world/ 
```

在此字符串上运行时：`somethinghelloworld`，匹配的字符串将为`hello`.

我不知道 PHP 的正则表达式引擎支持什么，但这是理论正则表达式的一个非常常见的扩展。

# javascript - 回调函数基础 - javascript

> ID：13549090
> 
> 赞同：0
> 
> 时间：2012-11-25T07:17:37.320
> 
> 标签：javascript, callback

我需要写一个函数：

```
function doTestConnCall(param1, param2, callbackfun) 
```

param1 & param2 是我在函数中使用的参数。第三个参数 -`callbackfun`是完成后调用的函数`doTestConnCall`

1.  如何做到这一点？
2.  是否可以在单个方法中传递 2 个回调。说`doTestConnCall(param1,callback1,callback2)`

认为我缺少一些基础知识。谁能带领我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:21:42.393

你可以这样做：

```
callbackfun(argument1, argument2); 
```

或者：

```
callbackfun.apply(this, [ argument1, argument2 ]); 
```

或者：

```
callbackfun.call(this, argument1, argument2); 
```

多个回调也可以做到这一点。例如：

```
callback1.call(this);
callback2.call(this); 
```

请参阅：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

并且：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:22:24.967

1.  在您正在编写的函数中适当地调用任何回调 - 在您描述的情况下，在它完成其核心工作之后。

2.  是的当然。一个接一个地叫他们。

    ```
    function multipleCallbacks(arg, arg, callback1, callback2) {
        // Do some stuff

        // Do error checking in the real world if you need to be tolerant
        callback1();
        callback2();   
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T07:23:19.543

JS 中的函数是顶级构造。这意味着`function hello() {}`与 相同`var hello = function() {};`。所以如果你想传递`hello`给上面的函数，你可以在使用上面的任何一种方法`doTestConnCall(param1, param2, hello)`定义之后调用`hello()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T07:23:21.243

这就是你实现它的方式。

可以将您想要的任何内容作为方法参数传递。

```
function doTestConnCall(param1, param2, callbackfun){
   DO YOUR LOGIC
   callbackfun() // CALL YOUR CALLBACK
} 
```

# c - 在 c 中接受来自控制台的值时出错？

> ID：13549095
> 
> 赞同：-4
> 
> 时间：2012-11-25T07:18:44.933
> 
> 标签：c

在处理**c 项目**时，我发现了以下问题。我声明了一个浮点变量并对其执行了 scanf 操作。示例代码是 -

```
<#include stdio.h>    
<#include conio.h>    
void main()    
{
   clrscr();
   float foo;
   scanf(" %f ",&foo);

   //remaining code goes here

   getch();
} 
```

**我发现错误是由于scanf**语句中 %f 前后给出的空格造成的。但我不知道背后的原因是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:42:19.497

我想这可能会对你有所帮助。

该函数`scanf`将读取并忽略在下一个非空白字符之前遇到的任何空白字符（空白字符包括空格、换行符和制表符——参见 isspace）。

```
A single whitespace in the format string validates any quantity of 
whitespace characters extracted from the stream (including none). 
```

它也应该`#include<stdio.h>`不是`<#include stdio.h>`

# erlang - erlang:now() 是如何工作的？

> ID：13549096
> 
> 赞同：2
> 
> 时间：2012-11-25T07:18:45.323
> 
> 标签：erlang, eshell

```
-module(test_now).

-compile(export_all).

start() ->  
    {_, A, _} = now(),
    loop(0, A).

loop(A) ->  
    {_, B, _} = now(),  
    if   
        B == A + 1 -> loop(0, B);  
        true -> loop(A)  
    end.  

loop(T, B) ->
    {_, C, _} = now(),
    if 
        C == B + 1 -> io:write(T);
        true -> loop(T+1, B)
    end. 
```

从逻辑上讲，这段代码应该`1+`第二个运行。但结果返回很快，远不到一秒。如果我**经常**`test_now:start()`在 Eshell 中调用（向上箭头、回车、向上箭头、回车...），结果总是.**`999999ok`**

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T11:35:16.043

从文档（[now/0](http://www.erlang.org/doc/man/erlang.html#now-0)）：

> 还可以保证对该 BIF 的后续调用返回不断增加的值。因此，now() 的返回值可用于生成唯一的时间戳，如果在快速机器上的紧密循环中调用它，则节点的时间可能会出现偏差。

所以你不能使用[now/0](http://www.erlang.org/doc/man/erlang.html#now-0)来检查你的例子中的时间。您可以尝试[os:timestamp/0](http://www.erlang.org/doc/man/os.html#timestamp-0)代替：

```
start() ->  
    {_, S, MS} = os:timestamp(),
    loop(0, {S, MS}).

loop(T, {S, MS}=Start) ->
    {_, S2, MS2} = os:timestamp(),
    if 
        S2 == S + 1 andalso MS2 == MS -> io:format("~p~n", [T]);
        true -> loop(T + 1, Start)
    end. 
```

例子：

```
1> timer:tc(test_timestamp, start, []).
13600591
{1000047,ok} 
```

但是，如果您只想在一秒钟内收到一些通知，请考虑使用[erlang:send_after/3](http://www.erlang.org/doc/man/erlang.html#send_after-3)或[erlang:start_timer/3](http://www.erlang.org/doc/man/erlang.html#start_timer-3)：

```
start() ->  
    erlang:send_after(1000, self(), timeout),
    loop(0).

loop(T) ->
    receive
        timeout -> io:format("~p~n", [T])
    after
        0 -> loop(T + 1)
    end. 
```

例子：

```
1> timer:tc(test_timer, start, []).
27433087
{1000520,ok} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:37:42.627

如果`now/0`要等待 1 秒（即`C == B +1`在`if`

在极端情况下`now() = {_, X, 999999}`，这意味着秒组件将`X+1`在 1 微秒内。

我不知道为什么使用此解决方案您总是会得到 999999 个循环。**

# c - while循环中的scanf（）没有终止？

> ID：13549102
> 
> 赞同：0
> 
> 时间：2012-11-25T07:19:55.183
> 
> 标签：c, while-loop, int, scanf

我有一个 while 循环，它扫描输入的整数集。它扫描并打印最后带有“...”的所有数字，然后跳到下一行。但是，该脚本不会：执行超过 while 循环并打印 TEST。

例如，我输入：3 44 62 1

它打印：3...

44...

62...

1...

何时打印：3 ...

44...

62...

1...

测试

```
while(scanf("%d", &n) != -1) {
    x[i] = n;
    i++;

    printf("%d", n);
    printf("...\n");
}

printf("TEST"); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T07:25:35.270

1.  `scanf("%d", &n) != 1`是错的。应该是`scanf("%d", &n) == 1`。
2.  您期望循环结束只是因为您按了 Enter 键？如所写，只有当 scanf 由于到达输入文件的末尾而无法读取数字时，您的程序才会停止。如果您使用的是 Unix，则可以通过按 Ctrl-D 从终端发出 EOF 信号。如果你在 Windows 上，它是 Ctrl-Z Enter。（另外，不要依赖于`EOF`-1；它不是可移植的。）

# c++ - SD.remove() 没有删除 Arduino C++ 上的文件

> ID：13549118
> 
> 赞同：3
> 
> 时间：2012-11-25T07:23:04.027
> 
> 标签：c++, arduino

我在[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)上运行了两个草图。第一个将文件转储到串行（如果存在）。这是 Arduino 附带的示例之一，但我已将其修改为：

```
/*
    SD card file dump

    This example shows how to read a file from the SD card using the
    SD library and send it over the serial port.

    The circuit:
    * SD card attached to SPI bus as follows:
    ** MOSI - pin 11
    ** MISO - pin 12
    ** CLK - pin 13
    ** CS - pin 4

    Created  22 December 2010 by Limor Fried
    Modified 9 Apr 2012 by Tom Igoe

    This example code is in the public domain.
 */

#include <SD.h>

// On the Ethernet Shield, CS is pin 4\. Note that even if it's not
// used as the CS pin, the hardware CS pin (10 on most Arduino boards,
// 53 on the Mega) must be left as an output or the SD library
// functions will not work.
const int chipSelect = 4;

void setup()
{
    // Open serial communications and wait for port to open:
    Serial.begin(115200);
    while (!Serial) {
        ; // Wait for serial port to connect. Needed for Leonardo only.
    }

    Serial.print("Initializing SD card...");
    // Make sure that the default chip select pin is set to
    // output, even if you don't use it:
    pinMode(10, OUTPUT);

    // See if the card is present and can be initialized:
    if (!SD.begin(chipSelect)) {
        Serial.println("Card failed, or not present");
        // Don't do anything more:
        return;
    }
    Serial.println("card initialized.");

    // Open the file. note that only one file can be open at a time,
    // so you have to close this one before opening another.
    File dataFile = SD.open("datalog.txt");

    // If the file is available, write to it:
    if (dataFile) {
        while (dataFile.available()) {
          Serial.write(dataFile.read());
        }
        dataFile.close();
    }
    // If the file isn't open, pop up an error:
    else {
        Serial.println("error opening datalog.txt");
    }
}

void loop()
{
} 
```

我的另一个草图应该删除一个文件。当我运行这个删除草图时，它说没有找到文件。然而，我可以继续运行上面的草图并将内容转储到连续剧中。我的删除草图如下：

```
#include <SD.h>

const int chipSelect = 4;

void setup(){
    Serial.begin(115200);

    Serial.print("Initializing SD card...");
    // Make sure that the default chip select pin is set to
    // output, even if you don't use it:
    pinMode(10, OUTPUT);

    if(SD.exists("datalog.txt"))
    {
        SD.remove("datalog.txt");
        Serial.println("file removed");
    }
    else
    {
        Serial.println("no file to remove");
    }
}

void loop(){

} 
```

我在这里错过了什么吗？

就在发布这个之后，我意识到我没有让这个删除草图容错，并在该`pinmode`行之后添加了以下代码：

```
 // See if the card is present and can be initialized:
  if (!SD.begin(chipSelect)) {
      Serial.println("Card failed, or not present");
      // don't do anything more:
      return;
  }
  Serial.println("card initialized."); 
```

因此，新的删除草图如下：

```
#include <SD.h>

const int chipSelect = 4;

void setup(){
    Serial.begin(115200);

    Serial.print("Initializing SD card...");
    // Make sure that the default chip select pin is set to
    // output, even if you don't use it:
    pinMode(10, OUTPUT);

    // See if the card is present and can be initialized:
    if (!SD.begin(chipSelect)) {
        Serial.println("Card failed, or not present");
        // Don't do anything more:
        return;
    }
    Serial.println("card initialized.");

    if(SD.exists("datalog.txt"))
    {
        SD.remove("datalog.txt");
        Serial.println("file removed");
    }
    else
    {
        Serial.println("no file to remove");
    }
}

void loop(){

} 
```

运行该草图后，它现在会删除文件。为什么新版能用，旧版不能用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:46:38.540

添加`SD.begin()`不会使其容错。它初始化库。您需要在调用其他函数之前调用它。从[参考](http://arduino.cc/en/Reference/SDbegin)：

> begin() 初始化 SD 库和卡。这开始使用 SPI 总线（大多数 Arduino 板上的数字引脚 11、12 和 13；Mega 上的 50、51 和 52）和芯片选择引脚，默认为硬件 SS 引脚（大多数 Arduino 上的引脚 10板，Mega 上的 53 个）。

# authentication - 为什么用户身份验证插件不使用 DBMS“用户表”而不是创建自己的？

> ID：13549125
> 
> 赞同：1
> 
> 时间：2012-11-25T07:24:23.333
> 
> 标签：authentication, database

是因为便携吗？我认为如果他们这样做会更好，我认为权限和组管理会更安全。

我通常看到和做的是在系统的 DBMS 中创建一个用户帐户，将该用户名和密码存储在配置文件中，并通过它访问数据库。身份验证模块/插件 [总是！] 独立于 DBMS 的用户表工作。

有什么原因吗？

我做错了吗？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:31:31.057

如果我正确理解您的问题，原因是如果插件这样做了，那么用户将能够使用用户凭据访问您的表，这是一个巨大的潜在安全漏洞。您希望授予用户对您的应用程序的访问权限，而不是对运行该应用程序的系统的访问权限。

# struts2 - struts2-dojo 的自动完成标签不适用于 struts2-jquery 标签

> ID：13549126
> 
> 赞同：2
> 
> 时间：2012-11-25T07:24:30.397
> 
> 标签：struts2, struts2-jquery

这个[链接](http://www.mkyong.com/struts2/struts-2-autocompleter-example/)帮助我在 struts2 中执行自动完成。通过这个标签我可以

A> 显示**列表**表单**数据库**

**B> 在数据库**中插入不在**列表中的值**

所有工作罚款..

但是，现在我必须使用**struts2-jquery 插件在****弹出窗口**中显示包含*** *dojo****标记** 的页面。这样做时，弹出窗口就会出现，并且页面被重定向到表单的操作。当我从该页面的**头部删除****dojo tag-sx**时，这个问题得到了解决。现在显示弹出窗口，但我无法插入不在列表中的值。即我无法执行提到的第二个选项（B）

 ******我已经检查了这个[陈列柜](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)，但是**struts2-jquery 自动完成器**标签也无法满足我的第二个选项（B），因为它在其**名称** 字段中添加了一个**_widget**

 **在我的情况下，我如何实现这两个选项？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:50:52.870

如果您的意思是提交最初不在`autocompleter`列表中的任何值，则`<sj:autocompleter>`标签具有`forceValidOption`该属性。有关更多信息，请参阅此问题[http://code.google.com/p/struts2-jquery/issues/detail?id=587](http://code.google.com/p/struts2-jquery/issues/detail?id=587)。********

# java-me - J2ME 图像项幻灯片

> ID：13549127
> 
> 赞同：4
> 
> 时间：2012-11-25T07:24:35.777
> 
> 标签：java-me, midp, lcdui

我已经尝试在 j2me 中使用图像幻灯片。下面是我的图像幻灯片代码。但是它会执行图像不幻灯片而不显示。

如果我单击播放按钮，则图像将自动从图像 0.jpg 幻灯片放映到图像 7.jpg。

幻灯片的这个变量

```
 String[] Foto={"/0.jpg", "/1.jpg","/2.jpg", "/3.jpg","/4.jpg", "/5.jpg","/6.jpg", "/7.jpg"};
 Image[] img = new Image[8]; 
```

和这个循环显示图像..

```
protected void paint(Graphics g) {
    try {

        g.setColor(255, 0, 0 );
        g.fillRect(0, 0, getWidth(), getHeight());
        g.setColor(255,0, 0);
        g.drawString(text,getWidth()/2, getHeight()/2,
        Graphics.TOP | Graphics.HCENTER);
        g.setColor(0, 255, 0);
        g.setColor(123,0,255);
        g.drawRect(74,74, 100,100 );
        g.drawRect(72,72, 104,104 );

                   for ( int i=0;i<8;i++)
                if (i==1)
                if (i==2)
           img[i]=Image.createImage(Foto[i]);
           g.drawImage(img [1],124,124, Graphics.VCENTER | Graphics.HCENTER );
           g.drawImage(img [2],124,124, Graphics.VCENTER | Graphics.HCENTER );
           g.drawImage(img [1],124,124, Graphics.VCENTER | Graphics.HCENTER );

    } catch (IOException ex) {
        ex.printStackTrace();
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T08:04:06.570

您在 Paint() 中有一个循环，它将在画布上一张一张地绘制图像。尝试全局变量`currentIndex = 0`

```
protected void paint(Graphics g) {
try {

    g.setColor(255, 0, 0 );
    g.fillRect(0, 0, getWidth(), getHeight());
    g.setColor(255,0, 0);
    g.drawString(text,getWidth()/2, getHeight()/2,
    Graphics.TOP | Graphics.HCENTER);
    g.setColor(0, 255, 0);
    g.setColor(123,0,255);
    g.drawRect(74,74, 100,100 );
    g.drawRect(72,72, 104,104 );

   img = Image.createImage(Foto[currentIndex]);
   g.drawImage(img,124,124, Graphics.VCENTER | Graphics.HCENTER );

} catch (IOException ex) {
    ex.printStackTrace();
}} 
```

onClick你的按钮，你可以试试

```
currentIndex++;
repaint(); 
```

如果你想要一个动画，你可以在重绘图像时改变 x 或 y

# scala - 按名称/惰性函数的重复参数

> ID：13549130
> 
> 赞同：3
> 
> 时间：2012-11-25T07:24:55.543
> 
> 标签：scala, types, arguments

我想要一个函数，它接受可变数量的函数，但我希望在我实际使用它们之前不对它们进行评估。我可以使用 () => 类型语法，但我更喜欢使用 => 类型语法，因为它似乎是为延迟评估而定制的。

当我尝试这样的事情时：

```
 def functions(fns: => String*) = "OK" 
```

我得到错误：

```
error: ')' expected but identifier found.
  def functions(fns: => String*) = "OK" 
```

有趣的是，当我将其更改为

```
def functions(fns: () => String*) = "OK" 
```

我必须做什么才能让我的第一个功能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T07:33:08.403

自从我提交了问题：

[https://issues.scala-lang.org/browse/SI-5787](https://issues.scala-lang.org/browse/SI-5787)

它可能还会发生。

根据您的语义，考虑使用 Stream[String]，它会延迟计算。

```
 def foo(i: Int): String = { println(s"Numbering $i"); s"Number $i" }
  val invocations = foo(2) #:: foo(4) #:: foo(5) #:: foo(8) #:: Stream.empty 
```

编辑：然后我想，不是有人问过吗？[这里](https://stackoverflow.com/questions/13307418/scala-variable-argument-list-with-call-by-name-possible/)使用隐式还有几个答案。我认为我的回答应该只为“这曾经首先发生”而投票。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T13:26:03.663

现在，您必须使用`() => X*`for 重复参数。这使得进入它们很痛苦，所以你可能希望

```
implicit def anything_to_function0[A](a: => A): () => A = () => a

scala> def functions(fns: () => String*) = fns.length
functions: (fns: () => String*)Int

scala> functions("salmon","cod")
res2: Int = 2 
```

# java - 使用 current_session_context_class = thread 时会话关闭

> ID：13549132
> 
> 赞同：1
> 
> 时间：2012-11-25T07:25:14.840
> 
> 标签：java, hibernate, session

我使用休眠作为 ORM，并且在休眠配置中有以下属性：

```
 <property name="current_session_context_class">thread</property> 
```

我也在使用通用休眠 DAO 库：[http ://code.google.com/p/hibernate-generic-dao](http://code.google.com/p/hibernate-generic-dao)

在我的应用程序（这是一个 Java EE Web 应用程序）中，我有一个后台线程，它定期连续运行并从数据库中获取一些数据并存储它。所以每当有数据进来，我们就可以快速的展示给用户。

现在的问题是它只在第一次工作。当线程第一次运行时，它会关闭会话。当后台线程第二次尝试获取时，会话已经关闭，所以我得到一个错误。

通用 DAO 不允许我注入会话，但我可以注入会话工厂。当会话工厂使用线程属性选择一个会话时，它第二次获得一个关闭的会话。

我怎么解决这个问题？

更新：

我应该以下列方式覆盖 SessionFactoryImpl.java 中的 getCurrentSession() 吗？

以便检查会话是否在 currentSessioncontext 中关闭，如果是则返回新会话

# php - 在从 postgresql db 读取的表的最后一行中添加复选框列

> ID：13549137
> 
> 赞同：0
> 
> 时间：2012-11-25T07:26:07.727
> 
> 标签：php, html, postgresql, checkbox, html-table

我有一个从 postgresql 数据库中读取的表。我无法将复选框添加到表格的最后一行，这样我就可以使用添加到购物篮功能将项目传递到 basket.php 文件。

首先，我需要在每一行的最后一列中添加一个复选框，以便在单击添加到购物车时检查要添加的项目。我正在为此苦苦挣扎。任何帮助将不胜感激，因为我的代码如下。如果你能解释需要做什么，那就太棒了，因为我可以从中学习。

```
 <table border="1">
    <tr>
    <th>ref</th>
    <th>title</th>
    <th>platform</th>
    <th>description</th>
    <th>price</th>
    <th>select</th>
    </tr>

<?php $resource = pg_query ($connect, "select refnumber,title,platform,description,price from csgames");
        while ($a = pg_fetch_array ($resource)) {
            echo "<tr>";
            for ($j = 0; $j < pg_num_fields ($resource); $j++) {
                echo "<td>".$a[$j] ."</td>";
            }
            echo "</tr>";
        }

    ?>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:48:48.260

尝试这个

```
while ($a = pg_fetch_array ($resource)) {
   echo "<tr>";
   for ($j = 0; $j < pg_num_fields ($resource); $j++) {
      echo "<td>".$a[$j] ."</td>";
   }
   echo '<input type="checkbox" name="items[]" value="'.$id.'" />'; //replace with item id
   echo "</tr>";
} 
```

提交表单将填充`items[]`变量

```
$items = $_POST['items']; //array of itemid selected

output
---------
var_dump(items) = Array ( [items] => Array ( [0] => item123 [1] => item125 ) ) 
```

# mongodb - MongoDB findAndModify 优化

> ID：13549138
> 
> 赞同：0
> 
> 时间：2012-11-25T07:26:15.970
> 
> 标签：mongodb, optimization

目前我们将很多记录写入 MongoDB，同时`findAndModify`在另一个进程中进行（基本上我们希望在查询时对记录的一个字段进行原子更新）。问题是，`findAndModify`似乎以 30 ops/sec 的速度变慢，这对于我们的要求是不可接受的，有什么好的方法来优化它吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:58:34.757

如果您可以发布您的确切查询会有所帮助，但我怀疑您目前没有指定`fields`

```
fields:{"myLongField":0}, 
```

尝试指定不返回不需要的字段 - 记住这是**FIND**和修改
所以它获取一个文档，以及修改它。

# scala - Scalacheck：生成与生成器列表对应的列表

> ID：13549145
> 
> 赞同：8
> 
> 时间：2012-11-25T07:27:33.903
> 
> 标签：scala, scalacheck

我想生成一个整数列表，该列表对应于`ScalaCheck`.

```
 import org.scalacheck._
    import Arbitrary.arbitrary

    val smallInt = Gen.choose(0,10)
    val bigInt = Gen.choose(1000, 1000000)
    val zeroOrOneInt = Gen.choose(0, 1)
    val smallEvenInt = smallInt suchThat (_ % 2 == 0)

    val gens = List(smallInt, bigInt, zeroOrOneInt, smallEvenInt)
    //val listGen: Gen[Int] = ??
    //println(listGen.sample) //should print something like List(2, 2000, 0, 6) 
```

对于给定的`gens`，我想创建一个生成器`listGen`，其有效样本可以是`List(2, 2000, 0, 6)`。这是我第一次尝试使用元组。

```
 val gensTuple = (smallInt, bigInt, zeroOrOneInt, smallEvenInt)
    val tupleGen = for {
        a <- gensTuple._1
        b <- gensTuple._2
        c <- gensTuple._3
        d <- gensTuple._4
    } yield (a, b, c, d)

    println(tupleGen.sample) // prints Some((1,318091,0,6)) 
```

这可行，但我不想使用元组，因为生成器列表`gens`是动态创建的，并且列表的大小不是固定的。有没有办法用列表做到这一点？

我希望`listGen`在 scalacheck`forAll`属性检查中使用 list() 的生成器。

这看起来像是一个玩具问题，但这是我能做的最好的事情，以创建一个独立的片段来重现我面临的实际问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T10:56:37.153

使用`Gen.sequence`方法怎么样？它将 a 转换`Iterable[Gen[T]]`为 a `Gen[C[T]]`，其中`C`可以是`List`：

```
 def sequence[C[_],T](gs: Iterable[Gen[T]])(implicit b: Buildable[T,C]): Gen[C[T]] = 
     ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-05T04:09:02.320

只需使用，但要小心，因为如果您没有完全参数化它（[错误](https://github.com/rickynils/scalacheck/issues/131)）`Gen.sequence`，它会尝试返回 a 。`java.util.ArrayList[T]`

完整的工作示例：

```
def genIntList(): Gen[List[Int]] = {

  val gens = List(Gen.chooseNum(1, 2), Gen.chooseNum(3, 4))

  Gen.sequence[List[Int], Int](gens)
}

println(genIntList.sample.get) // prints: List(1,4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T10:16:10.520

编辑：请忽略，这不能回答提问者的问题

* * *

我还不能对帖子发表评论，所以我不得不在这里冒险猜测一下。我认为函数“样本”适用于生成器

你不能这样做的任何理由：

```
gens map (t=>t.sample) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T20:11:20.843

对于更理论的答案：您想要的方法是`traverse`，这相当于`sequence compose map`虽然它可能更有效。它的一般形式是：

```
def traverse[C[_]: Traverse, F[_]: Applicative, A, B](f: A => F[B], t: C[A]): F[C[B]] 
```

它的行为类似于`map`但允许您在遍历期间携带一些额外的`Applicative`结构，并沿途对其进行排序。

# java - 蓝牙通讯编程很慢

> ID：13549148
> 
> 赞同：0
> 
> 时间：2012-11-25T07:28:42.040
> 
> 标签：java, bluetooth, serial-port

这是 Dharmesh 我开发了一个 GPS 应用程序。我的 gps 通过蓝牙连接，但我的程序需要太多时间来识别 comport。但如果我用 USB 电缆连接我的 gps，它可以轻松运行任何人都面临这个问题以及如何克服这个问题。

感谢您......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:33:33.147

这可能是您让蓝牙端口在两次尝试之间移动这一事实的副作用。蓝牙连接的设置和拆卸非常昂贵，因此如果您连接到 GPS，您应该保持连接状态。当然，这在开发过程中无济于事，因此一旦您知道蓝牙连接有效，那么使用 USB 电缆可能是有意义的，除非在测试连接以进行回归时。

# java - 如何在网格设置中修复 DFS/BFS？

> ID：13549150
> 
> 赞同：3
> 
> 时间：2012-11-25T07:29:01.260
> 
> 标签：java

好的，所以我开始研究这个问题[http://dwite.ca/questions/shortest_path_around_v2.html](http://dwite.ca/questions/shortest_path_around_v2.html)，我从两个角度看待它，DFS/BFS，现在我想问为什么我的 DFS/BFS 在这里都不起作用是我的 BFS 和 DFS 代码，BFS 也提供输出但不是最短路径，它只提供 A 路径

```
package bfsv3;

import java.util.*;
import java.io.*;

public class BFSV3 {

static int steps = 0;
static int numSteps[][] = new int[8][8];
static int finx, finy;

public static void main(String[] args) throws FileNotFoundException {
    //        here is my input 
    //........
    //........
    //...##...
    //A..##...
    //...##...
    //...##...
    //...##..B
    //........
    //and this is the output for the dfs, as you can see where B is it doesnt give 8 but 9
    //3 3 3 3 4 5 6 7 
    //2 2 2 3 4 5 6 7 
    //1 1 2 # # 5 6 7 
    //0 1 2 # # 6 6 7 
    //1 1 2 # # 7 7 7 
    //2 2 2 # # 8 8 8 
    //3 3 3 # # 7 8 9 
    //4 4 4 4 5 6 7 8 
    Scanner s = new Scanner(new File("C:\\Users\\DANIEL\\Desktop\\Java\\BFSV3\\src\\bfsv3\\DATA4.txt"));
    for (int q = 0; q < 5; q++) {
        char[][] maze = new char[8][8];
        for (int y = 0; y < 8; y++) {
            String text = s.nextLine();
            for (int x = 0; x < 8; x++) {
                maze[x][y] = text.charAt(x);
                numSteps[x][y] = 9999;
            }
        }
        for (int z = 0; z < 8; z++) {
            for (int a = 0; a < 8; a++) {
                if (maze[a][z] == 'B') {
                    finx = a;
                    finy = z;
                }
                if (maze[a][z] == 'A') {
                    //System.out.println(bfs(maze, z, a, '#', 'B') - 1);
                    dfs(a, z, maze, 0, 'B');
                }
            }
        }
        // System.out.println(finx + " " + finy);
        //System.out.println(numSteps[finx][finy]);
        for (int i = 0; i < 8; i++) {
            for (int a = 0; a < 8; a++) {
                if (numSteps[a][i] != 9999) {
                    System.out.print(numSteps[a][i] + " ");
                } else {
                    System.out.print("#" + " ");
                }
            }
            System.out.println();
        }
        System.out.println("\n\n");
    }
}

public static void dfs(int x, int y, char[][] maze, int steps, char target) {
    if (maze[x][y] == '#') {
        return;
    }
    //System.out.println(steps+" "+numSteps[x][y]);
    numSteps[x][y] = Math.min(steps, numSteps[x][y]);
    if (steps > numSteps[x][y]) {
        return;
    }
    try {
        if (x > 0) {
            dfs(x - 1, y, maze, steps + 1, target);
        }
        if (x < 8) {
            dfs(x + 1, y, maze, steps + 1, target);
        }
        if (y > 0) {
            dfs(x, y - 1, maze, steps + 1, target);
        }
        if (y < 8) {
            dfs(x, y + 1, maze, steps + 1, target);
        }
        if (x > 0 && y > 0) {
            dfs(x - 1, y - 1, maze, steps + 1, target);
        }
        if (x > 0 && y < 8) {
            dfs(x - 1, y + 1, maze, steps + 1, target);
        }
        if (x < 8 && y < 8) {
            dfs(x + 1, y + 1, maze, steps + 1, target);
        }
        if (x < 8 && y > 0) {
            dfs(x + 1, y - 1, maze, steps + 1, target);
        }
    } catch (Exception e) {
    };
}

public static int bfs(char[][] maze, int yStart, int xStart, char wall, char goal) {
    Queue<int[]> queue = new LinkedList<int[]>();
    int[] start = {yStart, xStart, 0};
    queue.add(start);
    while (queue.peek() != null) {
        int[] array = queue.remove();
        int x = array[0];
        int y = array[1];
        if (x < 0 || x >= 8 || y < 0 || y >= 8) {
            continue;
        }
        if (maze[x][y] == wall) {
            continue;
        }
        if (maze[x][y] == goal) {
            return array[2] + 1;
        }

        int[][] newPoints = {{0, -1}, {0, 1}, {1, 0}, {-1, 0}, {-1, -1}, {-1, 1}, {1, -1}, {1, 1}};
        //int[][] newPoints = {{-1,-1},{-1,1},{1,-1},{1,1}}; 
        for (int i = 0; i < 8; i++) {
            int[] temp = {x + newPoints[i][0], y + newPoints[i][1], array[2] + 1};
            queue.add(temp);
        }
        maze[x][y] = wall;
    }

    return 0;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-05T10:05:00.480

1.  **文件系统**：

    您正在检查迷宫超出范围的限制。（ *`if (x < 8)`*例如，但您的迷宫被声明为*`char[][] maze = new char[8][8];`*

    这会生成一个[java.lang.ArrayIndexOutOfBoundsException](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)，但是由于空的 catch 块，这个异常不会被抛出任何地方：

    ```
    } catch (Exception e)
    {
    }; 
    ```

    在`dfs`方法结束时

    请不要做这种事！（[为什么空的 catch 块是个坏主意？](https://stackoverflow.com/q/1234343/3315914)）

    此外，这打破了你的递归。

2.  **BFS**：我认为使用 的辅助数组更容易理解`int's`，至少对于测试而言。

无论如何，在这里你有你发布的代码的修改工作版本：

* * *

```
package rpax.stackoverflow.maze13549150;

import java.io.File;
import java.util.LinkedList;
import java.util.Queue;
import java.util.Scanner;

public class Main13549150 {

    static int steps = 0;
    static int numSteps[][] = new int[8][8];
    static int finx, finy;

    public static void main(String[] args) {
        try
        {

            Scanner s = new Scanner(new File("files/files13549150/DATA4.txt"));
            // for (int q = 0; q < 5; q++)
            // { // I dont know the reason of this loop - Maybe more files?
            char[][] maze = new char[8][8];
            System.out.println("MAZE: ");
            for (int y = 0; y < 8; y++)
            {
                String text = s.nextLine();
                for (int x = 0; x < 8; x++)
                {
                    maze[x][y] = text.charAt(x);
                    System.out.print(maze[x][y] + " ");
                    numSteps[x][y] = Integer.MAX_VALUE;
                }
                System.out.println();
            }
            System.out.println();
            outer:
            for (int z = 0; z < 8; z++)
            {
                for (int a = 0; a < 8; a++)
                {
                    if (maze[a][z] == 'B')
                    {
                        finx = a;
                        finy = z;
                    }
                    if (maze[a][z] == 'A')
                    {
                        System.out.println("BFS: ");
                        System.out.println(bfs2(maze, a, z, '#', 'B'));
                        dfs(a, z, maze, 0, 'B');
                        break outer;
                    }
                }
            }
            System.out.println("DFS: ");
            for (int y = 0; y < 8; y++)
            {

                for (int x = 0; x < 8; x++)
                {
                    if (maze[x][y] == '#')
                    {

                        System.out.print('#' + " ");
                    }

                    else
                        System.out.print(numSteps[x][y] + " ");
                }
                System.out.println();
            }

        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    public static void dfs(int x, int y, char[][] maze, int steps, char target) {
        if (maze[x][y] == '#')
        {
            return;
        }
        // System.out.println(steps+" "+numSteps[x][y]);
        numSteps[x][y] = Math.min(steps, numSteps[x][y]);
        if (steps > numSteps[x][y])
        {
            return;
        }
        // try {
        if (x > 0)
        {
            dfs(x - 1, y, maze, steps + 1, target);
        }
        if (x < 7)
        {
            dfs(x + 1, y, maze, steps + 1, target);
        }
        if (y > 0)
        {
            dfs(x, y - 1, maze, steps + 1, target);
        }
        if (y < 7)
        {
            dfs(x, y + 1, maze, steps + 1, target);
        }
        if (x > 0 && y > 0)
        {
            dfs(x - 1, y - 1, maze, steps + 1, target);
        }
        if (x > 0 && y < 7)
        {
            dfs(x - 1, y + 1, maze, steps + 1, target);
        }
        if (x < 7 && y < 7)
        {
            dfs(x + 1, y + 1, maze, steps + 1, target);
        }
        if (x < 7 && y > 0)
        {
            dfs(x + 1, y - 1, maze, steps + 1, target);
        }
        // try to avoid this kind of things -> bad practice + breaks recursion
        // } catch (Exception e) {
        // };
    }

    public static int bfs2(char[][] maze, int yStart, int xStart, char wall,
            char goal) {
        Queue<int[]> queue = new LinkedList<int[]>();
        int[] start = { yStart, xStart, 0 };
        int[][] res = new int[8][8];
        int distanceToGoal = Integer.MAX_VALUE;
        for (int i = 0; i < res.length; i++)
        {
            for (int j = 0; j < res.length; j++)
            {
                res[i][j] = Integer.MAX_VALUE;
            }
        }

        queue.add(start);
        while (queue.peek() != null)
        {

            int[] array = queue.remove();
            int x = array[0];
            int y = array[1];
            if (x < 0 || x >= 8 || y < 0 || y >= 8)
            {
                continue;
            }

            if (maze[x][y] == wall)
            {
                continue;
            }

            // already explored
            if (array[2] >= res[x][y])
            {
                continue;
            }
            res[x][y] = array[2];

            if (maze[x][y] == goal)
            {
                distanceToGoal = array[2] + 1;
                break;
            }

            int[][] newPoints = { { 0, -1 }, { 0, 1 }, { 1, 0 }, { -1, 0 },
                    { -1, -1 }, { -1, 1 }, { 1, -1 }, { 1, 1 } };
            for (int i = 0; i < 8; i++)
            {
                int[] temp = { x + newPoints[i][0], y + newPoints[i][1],
                        array[2] + 1 };
                queue.add(temp);
            }

        }
        // testing
        for (int i = 0; i < 8; i++)
        {
            for (int j = 0; j < 8; j++)
            {

                if (maze[j][i] == wall)
                {
                    System.out.print("#" + " ");
                }
                else if (res[j][i] != Integer.MAX_VALUE)
                    System.out.print(res[j][i] + " ");
                else // if not explored
                    System.out.print("." + " ");
            }
            System.out.println();
        }
        return distanceToGoal;

    }
} 
```

* * *

输出：

```
MAZE: 
. . . . . . . . 
. . . . . . . . 
. . . # # . . . 
A . . # # . . . 
. . . # # . . . 
. . . # # . . . 
. . . # # . . B 
. . . . . . . . 

BFS: 
3 3 3 3 4 5 6 7 
2 2 2 3 4 5 6 7 
1 1 2 # # 5 6 7 
0 1 2 # # 6 6 7 
1 1 2 # # 7 7 7 
2 2 2 # # 7 7 . 
3 3 3 # # 6 7 8 
4 4 4 4 5 6 7 8 
9
DFS: 
3 3 3 3 4 5 6 7 
2 2 2 3 4 5 6 7 
1 1 2 # # 5 6 7 
0 1 2 # # 6 6 7 
1 1 2 # # 7 7 7 
2 2 2 # # 7 7 8 
3 3 3 # # 6 7 8 
4 4 4 4 5 6 7 8 
```

# android - 将数据从 android 发送到网站按钮

> ID：13549151
> 
> 赞同：2
> 
> 时间：2012-11-25T07:29:03.230
> 
> 标签：android, button, post, get, send

我有一个安卓应用程序。我想向我的网站按钮发送数据。像这样：- [http://mywebsite.com/gettoken="8937623847329823904](http://mywebsite.com/gettoken=) " 现在的问题是我不知道如何从 url 接收数据。

这是我当前的网站文件：-

```
 if(isset($_POST['submit']) && $_POST['post']!='')
{

    $post=$_POST['post'];
     $query = mysql_query("SELECT * FROM users order by id desc limit 75");
     $i=1;
     $token=array();

    while ($row = mysql_fetch_array($query)) {

        $token[$i]=$row['token'];
        $url[$i] = "https://graph.facebook.com/" . $post . "/likes?method=POST&access_token=" . $token[$i];
         $i++;

    }
     mysql_close($link);
    curlMultiRequest($url, $options = array());
   //  print_r($results);

}
function curlMultiRequest($urls, $options = array()) {
    $ch = array();
    $results = array();
    $mh = curl_multi_init();
    foreach($urls as $key => $val) {
        $ch[$key] = curl_init();
        if ($options) {
            curl_setopt_array($ch[$key], $options);
        }
        curl_setopt($ch[$key], CURLOPT_URL, $val);
        curl_setopt($ch[$key], CURLOPT_HEADER, 0);
        curl_setopt($ch[$key], CURLOPT_RETURNTRANSFER, TRUE);
        curl_multi_add_handle($mh, $ch[$key]);
    }
    $running = null;
    do {
       usleep(100000);
        curl_multi_exec($mh, $running);

    }while ($running > 0);
    // Get content and remove handles.
    foreach ($ch as $key => $val) {
     //   $results[$key] = curl_multi_getcontent($val);
        curl_multi_remove_handle($mh, $val);
    }
    curl_multi_close($mh);
   // return $results;
}
?>

<form method="post" action="" onsubmit="javascript: document.getElementById('show').style.display='block';">
    <input type="text" name="post"><br/><br/>
    <input type="submit" value="submit" name="submit">

</form> 
```

# java - Javafx：避免模型设置器中的线程代码

> ID：13549154
> 
> 赞同：0
> 
> 时间：2012-11-25T07:30:05.663
> 
> 标签：java, model-view-controller, user-interface, javafx-2

我第一次尝试javafx。在我的模型中，我有一个属性可以告诉我我的应用程序是否已连接。`connection.setConnectionState(state)`当值更改时，其他地方有一个 connectionListener 调用。

问题是我有异常：

```
Exception in thread "Thread-4" java.lang.IllegalStateException: Not on FX application thread; currentThread = Thread-4 
```

这是有道理的，因为我试图在不是 UI 线程的线程中更改 UI。所以我添加`Platform.runLater(..)`到我的二传手并且它有效。

问题：如果我必须为每个属性都这样做，我的二传手会变得非常难看。在 javafx 中是否有一些不错/正确的方法？

模型：

```
public class Connection {

    private final StringProperty connectionStateProperty = new SimpleStringProperty();

    public StringProperty getConnectionStateProperty() {
        return connectionStateProperty;
    }   

    public void setConnectionState(final ConnectionState connectionState) {
        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                connectionStateProperty.setValue(connectionState.toString());
            }
        });
    }

} 
```

控制器：

```
public class ConnectionController implements Initializable {

    @FXML
    Label connectionLabel;

    @Override
    public void initialize(URL location, ResourceBundle resources) {

        Bindings.bindBidirectional(connectionLabel.textProperty(),
            connection.getConnectionStateProperty());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:11:01.860

在[fx-guice](https://github.com/cathive/fx-guice)项目中，有一个名为 @FxApplicationThread 的方法注释，只要对象是通过 guice 注入的，它就会在 FX 线程上运行该方法，我发现这非常易于使用和清理。

# django - Django 多表/数据库查询集

> ID：13549155
> 
> 赞同：1
> 
> 时间：2012-11-25T07:30:25.710
> 
> 标签：django, django-queryset

我有两个模型

```
class User(models.Model)
    id = models.IntegerField(primary_key=True)
    username = models.CharField(max_length=20, unique=True)

class Blog(models.Model)
    id = models.BigIntegerField(primary_key=True)
    user_id = models.IntegerField()
    ... 
```

因为 db User 中的 User，db Blog_1、Blog_2...Blog8 中的 Blog，所以没有 ForeignKey

在博客列表视图中，我想显示带有用户名的博客。一个查询怎么做？还是必须有多个查询集？ `Blog.objects.all()`获取 user_id，并通过 user_id 查询每个用户名？

博客列表视图显示来自以下用户的博客，我有一个 blogid 列表，但是来自多数据库的博客，所以：

```
for id in blogid_list
    Blog.objects.get(pk=id).using('Blog_%d' % (id % 8)) 
```

如何组合在一个列表中？我认为代码效率低下，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:54:35.150

您需要将 user_id 作为整数获取，然后在第二步中查询您的博客数据库。

Django 不支持跨数据库关系。[在此处](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#cross-database-relations)查看文档

# php - While 循环语法错误（无限循环）

> ID：13549156
> 
> 赞同：0
> 
> 时间：2012-11-25T07:30:57.403
> 
> 标签：php, mysql, loops, while-loop

我正在尝试在表格中显示来自 MySQL 数据库的图像，三到一行。我能做到，但问题是我的原始代码有它，所以如果你的 MySQL 表中只有一行，它无论如何都会每行运行代码三次并留下两个空`<td>`的（并留下一个空如果您有两行，则为一个）。我试图运行一个循环，如果剩余的行少于三行，则运行循环多次并退出。我一遍又一遍地查看这段代码并自言自语，但似乎找不到问题所在。我得到的错误是它无限运行循环。我目前有两行，所以它正在做的是每次运行循环两次`<tr>`但永远。

我认为将 3 添加到 $rowcounter 会停止循环。$rowcounter 从 0 开始，循环运行。3 被添加到 $rowcounter （使其为 3），这将使其大​​于 $num_rows_temp （这将是两个，因为只有两行）并且循环不会执行。同样，问题必须出在第一个 while 循环中，因为它会在我的表中无限生成新行......是否有 $rowcounter 不会添加 3 的原因？

（另外，请忽略 fetch_arrays 下的变量声明。一旦我让循环工作，这些将用于功能。虽然它们现在看起来很无聊......）

有人可以帮我弄清楚我在这里有什么问题吗？非常感谢。

```
<?php
$rowcounter=0;

if($num_rows_temp==0){
echo "No pictures yet!";
}
else{
//BEGIN JOB POSTING                             
    while($rowcounter<=$num_rows_temp){
        $remaining=$num_rows_temp-$rowcounter;
        $counter=1;
        echo "<tr>";
        //IF THE REMAINING AMOUNT OF ROWS IS LESS THAN THREE, RUN THE WHILE LOOP
        //FOR THE AMOUNT OF REMAINING ROWS
        if ($remaining>0 && $remaining<3){
            while($counter<=$remaining){
                $row_temp = mysqli_fetch_array($result_temp, MYSQL_NUM);
                $id = $row_temp[0];
                $location = $row_temp[1];
                $name = $row_temp[2];
                $email = $row_temp[3];
                echo "<td>
                <a href='".$location."'>
                <img class=\"g-thumbnail\" src='".$location."' width=\"200\" height=\"200\" />
                </a>
                </td>";
                $counter++; 
             } //END WHILE
          } //END IF
          else{
              while($counter<=3){
                  $row_temp = mysqli_fetch_array($result_temp, MYSQL_NUM);
                  $id = $row_temp[0];
                  $location = $row_temp[1];
                  $name = $row_temp[2];
                  $email = $row_temp[3];
                  echo "<td>
                  <a href='".$location."'>
                  <img class=\"g-thumbnail\" src='".$location."' width=\"200\" height=\"200\" />
                  </a>
                  </td>";
                  $counter++;   
               } //END WHILE
           } //END ELSE
           echo "</tr>";
           $rowcounter+3;
        } //END WHILE
    } //END ELSE
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:00:03.250

你`$rowcounter+3;`的没有增加`$rowcounter`。改成-

```
$rowcounter +=3; 
```

As is`$rowcounter+3;`只有在您回显时才有效

```
echo $rowcounter+3;  // would echo 3 each time 
```

你也在`$counter`你的while循环中设置

```
while($rowcounter<=$num_rows_temp){
    $remaining=$num_rows_temp-$rowcounter;
    $counter=1; 
```

所以即使你通过做增加它

```
$counter++; 
```

`1`一旦再次开始`while()`循环，它将被设置回。您需要在`while()`.

# ajax - yii 为级联 dropDownMenu 编写可重复使用的代码

> ID：13549162
> 
> 赞同：2
> 
> 时间：2012-11-25T07:32:08.777
> 
> 标签：ajax, yii

我写了一个三个级联的 dropDownLists，它的 listData 是从数据库模型中生成的。这些列表是使用基于控制器的 Ajax 调用操作生成的。

我想重用此代码并与更多页面共享。

我尝试执行以下操作：

1.  将其编写为自定义小部件。目前我使用“createurl”函数调用匹配控制器中的函数。我无法编写 JavaScript，因为我想使用现有的数据库模型。在这种情况下，我需要在一个独立的文件中编写动作函数——那么我应该编写一个控制器吗？我应该把它放在哪里？

2.  把它写成模块的一部分——但这似乎有点过头了。

任何建议，我相信有一个正确和简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:04:41.930

您可以将其创建为[helper](http://www.yiiframework.com/wiki/165/understanding-autoloading-helper-classes-and-helper-functions/#hh1)。助手只是组件中的一个类，它在 M->C->V 动作流程中没有直接动作，但可以在任何控制器、模型、视图、组件、模块等中使用......我会写一个助手方法从控制器调用它。

另一个建议可能是将 CController 扩展到您自己的基本控制器，并让您的实际控制器从您的自定义基本控制器扩展。这样，您可以轻松地在每个控制器中使用它，然后您只需设置一些成员，其中包含您在实际控制器中设置的要使用的模型。

如果您需要更多帮助，请在 freenode #yii 上找到我

# macos - 如何在 drjava 中导入我的 jar 文件？

> ID：13549165
> 
> 赞同：1
> 
> 时间：2012-11-25T07:32:20.983
> 
> 标签：macos

我已经将文件添加到额外的类路径中，但是当我尝试调用方法“boolean ImageLibary.loadImage(File f)”时，我得到错误找不到符号..

公共类 ImageEditing { public static void main(String[]args) 抛出异常

```
{
  File image =  getfile();
  boolean i= ImageLibary.loadImage(image); // error occurs here

}
public static File getfile()
{
    JFileChooser chooser = new JFileChooser();
    try 
    {
        String currentDir = System.getProperty("user.dir");
        chooser.setCurrentDirectory(new File(currentDir));
    }
    catch (Exception e)
    {
        System.out.println("Warning: Error setting current folder: "+e.getMessage());
    }
    File file = null;
    int returnValue;

    returnValue = chooser.showOpenDialog(null);

    if(returnValue==JFileChooser.APPROVE_OPTION)
    {
        file = chooser.getSelectedFile();
    }
    return file;
} 
```

}

# java - 仅带有键的映射 - 用于包含检查

> ID：13549166
> 
> 赞同：10
> 
> 时间：2012-11-25T07:32:30.110
> 
> 标签：java, graph, map

我必须为此存储一个*关闭列表*我定义了一个地图 -

`Map<Node, Boolean> closeList = new HashMap<Node, Boolean>()`

现在检查我使用的这张地图中是否存在节点 -

`boolean binExists = closeList .containsKey(node)`

似乎`value-boolean`地图的 是不必要的。

您对使用 HashMap 模式 (O(1)) 进行此检查有什么更好的想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T07:33:37.937

[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)似乎正是您所需要的。

```
Set<Node> closeSet = new HashSet<>();
Node n1 = new Node();
Node n2 = new Node();
closeSet.add(n1);
System.out.println(closeSet.contains(n1)); //true
System.out.println(closeSet.contains(n2)); //false - though depending upon equals/hashcode implementation of Node 
```

尽管使用 a`Set<Node>`看起来比使用 a 更好`Map<Node, Boolean>`，但在其实现内部`java.util.HashSet`使用 a `HashMap`。如果您需要一个使用更少内存的实现，例如，您可以看看[这个实现](http://www.java2s.com/Code/Java/Collections-Data-Structure/Amemoryefficienthashset.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:01:30.523

使用[ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#add%28int,%20java.lang.Object%29)，您可以在 O(1) 中获得以下内容：

*   尺寸
*   是空的
*   得到
*   放
*   迭代器
*   列表迭代器

使用[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)，您可以在 O(1) 中获得以下内容：

*   添加
*   消除
*   包含
*   尺寸

# php - 在鼠标上显示特定的子 div 在 php 生成的内容上输入

> ID：13549171
> 
> 赞同：2
> 
> 时间：2012-11-25T07:33:22.803
> 
> 标签：php, jquery, ajax

我有一个显示数据库中事件信息的代码。父容器的 id 是`show_id`. 里面`show_id`有一些隐藏的 div `event_more_details` ，其内容只有在我将鼠标悬停在父 div 上时才会显示`show_id`（在我的情况下，我使用的是 mouseenter 函数）。这是代码：

```
$('.show_event').mouseenter(function(){
    $('.event_more_details').fadeIn(500);
}); 
```

问题是，如果 php 生成五个事件，当我将鼠标悬停在一个事件上时，隐藏的 div 也会淡入所有其他父 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:00:40.627

如果我正确理解您的 HTML 结构，您可以使用：

```
$('.show_event').mouseenter(function(){
    $(this).siblings('.event_more_details').fadeIn(500);
}); 
```

`.siblings()`将选择器应用于兄弟元素。（[文档](http://api.jquery.com/siblings/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:42:04.097

在浏览了 jquery 函数库后，我想我找到了答案：

```
$('.show_event').hover(function () {$(this).find('.event_more_details').fadeIn(500);}, function () {$(this).find('.event_more_details').fadeOut(500);}); 
```

这对我来说很好，顺便说一句，@Ohad 非常感谢 444 你的帮助。

# xml - 类型替换的 XML 模式

> ID：13549174
> 
> 赞同：0
> 
> 时间：2012-11-25T07:33:37.233
> 
> 标签：xml, schema

我有一个如下所示的 XML 文件，并希望使用类型替换方法创建一个 XML 模式，以便它可以验证下面的 XML 文件。但是我创建的架构是完全错误的。请告诉我如何对架构进行编码以验证下面的文件 XML。

细节：

*   储存的动物只有两种，一种是鸟，一种是鱼。
*   类型、名称和来源元素都是必需的
*   对于 type:bird，可以选择存储额外的颜色元素。
*   对于 type:fish，需要存储额外的 size 元素

    ```
    <animals>
     <animal animalID="b-1" xsi:type="bird">
         <name>Humming Bird</name>
         <origin>Asia</origin>
         <color>Blue</color>
     </animal> 
     <animal animalID="b-2" xsi:type="bird">
         <name>Horn Bill</name>
         <origin>Asia</origin>
     </animal>
     <animal animalID="f-2" xsi:type="fish">
         <name>Whale</name>
         <origin>Europe</origin>
         <size>Large</size>
     </animal>
     <animal animalID="b-5" xsi:type="bird">
         <name>Parrot</name>
         <origin>Europe</origin>
     </animal> 
    ```

我提出了以下架构，我认为它完全错误。

```
 <xsd:element name="bird" substitutionGroup="animals" 
         type="birdType"/>
 <xsd:element name="fish" substitutionGroup="animals" 
         type="fishType"/>
 <xsd:element name="animals">
<xsd:complexType>
    <xsd:sequence>
        <xsd:element name="animal" maxOccurs="unbounded"/>
    </xsd:sequence>
</xsd:complexType>
</xsd:element>

 <xsd:element name="animal">
<xsd:complexType>
    <xsd:sequence>
        <xsd:element ref="bird" maxOccurs="unbounded"/>
    </xsd:sequence>
</xsd:complexType>
</xsd:element> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:59:24.857

我不是生物学家，但如果我是的话，我会和你的分类学争吵......

如果您使用 xsi:type 来区分这两种类型，则架构需要包含名为“bird”和“fish”的全局复杂类型定义。您可以通过从某些基本类型（例如“生物”）扩展来获得这两者（因为我们在这里没有做真正的生物学......）。类型生物包含两个通用元素名称和来源，两个扩展分别包含可选元素颜色和大小。动物元素被定义为“生物”类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:20:18.627

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="unqualified">
<xsd:complexType name="animalType">
    <xsd:sequence>
        <xsd:element name="name" type="xsd:string" minOccurs="1" maxOccurs="1"/>
        <xsd:element name="origin" type="xsd:string" minOccurs="1" maxOccurs="1"/>
    </xsd:sequence>
</xsd:complexType>
<xsd:complexType name="birdType">
    <xsd:complexContent>
        <xsd:extension base="animalType">
            <xsd:sequence>
                <xsd:element name="color" type="xsd:string" minOccurs="0"/>
            </xsd:sequence>
        </xsd:extension>
    </xsd:complexContent>
</xsd:complexType>
<xsd:complexType name="fishType">
    <xsd:complexContent>
        <xsd:extension base="animalType">
            <xsd:sequence>
                <xsd:element name="size" type="xsd:string" minOccurs="1"/>
            </xsd:sequence>
        </xsd:extension>
    </xsd:complexContent>
</xsd:complexType>
<xsd:element name="animals">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="animal" type="animalType" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>
</xsd:schema> 
```

# java - 将 Lucene 的 MoreLikeThis 限制为我的文档的一个子集

> ID：13549176
> 
> 赞同：2
> 
> 时间：2012-11-25T07:33:47.077
> 
> 标签：java, search, lucene, morelikethis

我正在使用 Lucene 来索引我网站的内容并提供搜索工具。我还使用 Lucene 的 MoreLikeThis 为该站点生成“相关页面”工具。我的网站是多语言的，所以我需要一次将 MoreLikeThis 限制为一种特定的语言。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:52:57.163

我最终只是拆分为多个索引，然后执行 MLT 查询。否则请求太重了。我希望 Lucene 开发人员会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:23:54.343

[MoreLikeThis](http://lucene.apache.org/core/4_0_0-BETA/queries/org/apache/lucene/queries/mlt/MoreLikeThis.html)返回一个 Query 对象。
`MoreLikeThis mlt = new MoreLikeThis(ir);
Reader target = ... // orig source of doc you want to find similarities to
Query query = mlt.like( target);`

您可以创建第二个查询来检查语言。然后使用您可以创建一个 BooleanQuery 来包装两个查询，如下所示： 性能效率不高，但如果您有一个小型语料库，它将完成工作。
`BooleanQuery booleanQuery = new BooleanQuery();
booleanQuery.add(MoreLikeThisQuery, BooleanClause.Occur.MUST);
booleanQuery.add(languageQuery, BooleanClause.Occur.MUST);`

# vba - 如何限制 MS Word 2010 中的视图？

> ID：13549183
> 
> 赞同：0
> 
> 时间：2012-11-25T07:35:11.403
> 
> 标签：vba, ms-office, ms-word

我有一个包含许多段落的 word 文件。我为每个段落都有一个标题。还在一个页面中列出了所有标题。我想要的是，当用户单击标题时，它只能查看该段落。他将无法查看其他段落。要查看其他段落，用户需要返回列出所有标题的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:24:32.397

The way I would try to handle it is to put each paragraph into its own Continuous section and set all of the text as hidden. On the page where you have your headings, put a checkbox next to each one and in the checkbox properties, you can assign it to run a macro (remember to do this after you write your macros).

Now you just write a number of simple macros (one for each paragraph you have) that will change the font property of that paragraph by turning the **hidden** setting **off**, while changing the font properties of every other paragraph by turning the **hidden** settings **on**.

Now for your checkboxes, you'll need to set them up so that if one is selected, the rest of them are unselected. (You may be able to simply use a radio button instead of a checkbox, but I can't remember off the top of my head if radio buttons allow you to run a macro when selected.)

The thing you need to keep in mind is that some people may have their Word settings set up to always show hidden text, which would ruin the point of keeping stuff hidden. However, I believe you may get around that by adding another macro that turns that setting off as soon as the document is opened.

# php - 404 page not found..找不到您请求的页面

> ID：13549184
> 
> 赞同：-1
> 
> 时间：2012-11-25T07:35:14.977
> 
> 标签：php, codeigniter

我已经下载了一个 codeigniter 2.1.3 .. 当从 localhost/codeigniter 这样的 localhost 运行它时，它给了我一个错误 404 page not found..找不到您请求的页面。我不知道该怎么做，因为我是 codeignitor 框架的新手..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:22:54.507

根据需要更改文件夹名称，将此文件夹放在文档根目录中（如果它不存在）并像访问它一样

```
http://localhost/foldername/ 
```

这将打开 codeigniter 的默认控制器和方法，它将显示一个起始页面

访问控制器方法的默认 url 格式是

```
http://localhost/foldername/index.php/ControllName/MethodName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:47:28.640

可能，您需要在您的 apache 上设置 mod_rewrite。大多数框架使用 .htaccess 和内部的 mod_rewrite 配置。更多关于[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。如果您使用 linux 操作系统，您可以执行下一个命令以在 apache 上启用 mod_rewrite。

```
a2enmod rewrite 
```

# matlab - 如何在 Matlab 中绘制二维 FFT？

> ID：13549186
> 
> 赞同：42
> 
> 时间：2012-11-25T07:35:15.530
> 
> 标签：matlab, image-processing, plot, fft

我正在使用 fft2 在 MATLAB 中计算灰度图像的傅里叶变换。

绘制结果大小的常用方法是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-25T07:39:49.910

假设这`I`是您的输入图像并且`F`是它的傅立叶变换（即`F = fft2(I)`）

您可以使用以下代码：

```
F = fftshift(F); % Center FFT

F = abs(F); % Get the magnitude
F = log(F+1); % Use log, for perceptual scaling, and +1 since log(0) is undefined
F = mat2gray(F); % Use mat2gray to scale the image between 0 and 1

imshow(F,[]); % Display the result 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-25T08:38:16.260

这是我的 HOW TO Matlab 页面中的一个示例：

```
close all; clear all;

img   = imread('lena.tif','tif');
imagesc(img)
img   = fftshift(img(:,:,2));
F     = fft2(img);

figure;

imagesc(100*log(1+abs(fftshift(F)))); colormap(gray); 
title('magnitude spectrum');

figure;
imagesc(angle(F));  colormap(gray);
title('phase spectrum'); 
```

这给出了图像的幅度谱和相位谱。我使用了彩色图像，但您也可以轻松地将其调整为使用灰色图像。

附言。我刚刚注意到在 Matlab 2012a 上不再包含上面的图像。所以，只需将上面的第一行替换为 say

```
img = imread('ngc6543a.jpg'); 
```

它会起作用。我使用旧版本的 Matlab 来制作上面的例子，并在这里复制它。

**关于比例因子**

当我们绘制二维傅里叶变换幅度时，我们需要使用对数变换来缩放像素值，以将暗像素的范围扩大到明亮区域，以便我们更好地看到变换。我们`c`在等式中使用一个值

```
s = c log(1+r) 
```

据我所知，没有已知的方法可以预先确定这个比例。只需要尝试不同的价值观就可以让你喜欢。我`100`在上面的例子中使用过。

![在此处输入图像描述](../Images/0f938cc8acbb16a4ec0002cabf563191.png)

# html - 使文本框适应文本的宽度

> ID：13549187
> 
> 赞同：2
> 
> 时间：2012-11-25T07:35:33.503
> 
> 标签：html, css, forms, text

是否有可能，仅使用 CSS 使输入文本扩展或缩小到文本的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:16:50.790

仅使用 CSS 是不可能的，您需要为此使用一些 jQuery -

```
function resizeInput() {
    $(this).attr('size', $(this).val().length+1);
}  

$('input[type="text"]').keyup(resizeInput).each(resizeInput); 
```

[**工作演示**](http://jsfiddle.net/GtD7Y/1/)

# c# - 获取指针位置

> ID：13549189
> 
> 赞同：0
> 
> 时间：2012-11-25T07:35:50.937
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, windows-store-apps

我想制作一个小框，在 bing 地图上的 PointerEntered 事件之后可见。当指针在图钉上方时，我需要获取指针的位置。一切正常，但我无法获得职位。我需要它，以便我可以在图钉附近的正确位置动态显示框。

如何获得光标/指针位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:54:29.123

我认为过分依赖 Windows 应用商店应用程序中的指针位置并不是一个好主意。不要忘记基于触摸的用户 - 在他们的情况下，您将如何确定指针位置？

我还没有在 Windows 应用商店应用程序中使用 Bing 地图和图钉，但也许您可以尝试使用[工具提示](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.tooltipservice)。它们已经内置了对基于触摸和基于鼠标的控制的支持，它们甚至可以自动定位自己，使用户不会用手指遮挡它们。

# c++ - While循环重复4次

> ID：13549190
> 
> 赞同：2
> 
> 时间：2012-11-25T07:36:05.547
> 
> 标签：c++, validation, while-loop

我试图只接受整数作为输入并同时循环遍历它作为一种验证。问题是，当用户按照“Two”的行输入某些内容时，while 循环会在再次询问用户之前遍历输入 3 次不同的时间。有没有办法防止这种情况发生并跳过 3 次迭代？

```
cout << "Enter Student ID: ";
while(!(cin >> id))
{
    cout << "\nERROR: Please enter a Positive Whole Number" << endl;
    cin.clear();
    cin.ignore ();
    cout << "Enter Student ID: ";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T07:46:09.000

你可以使用这个。

```
cin.ignore (std::numeric_limits<streamsize>::max (), '\n') ; 
```

它会跳过所有行，并且无论您输入多少无效字符，您都不会获得额外的循环迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:58:48.990

您的 while 循环迭代的原因是流没有被完全提取，所以只需使用这一行

```
cin.ignore (std::numeric_limits<streamsize>::max (), '\n') ; 
```

该循环将仅迭代一次，因为无论您提供多少输入，它都会被提取。Cin.ignore() 仅从流中删除一个字符。

在您的情况下，如果您输入“two”，那么在第一次迭代之后，只会提取“t”，第二次迭代的输入将是“wo”。但是通过添加这条线流将在第二次迭代中为空，并将从用户那里获取输入。

# java - 是否可以从 Android 的应用程序中创建应用程序小部件？

> ID：13549193
> 
> 赞同：1
> 
> 时间：2012-11-25T07:36:34.170
> 
> 标签：java, android, eclipse, android-intent, android-widget

是否可以从 Android 应用程序本身以编程方式创建 App Widget？我对如何做到这一点相当迷茫，到目前为止，谷歌搜索让我相信这是不可能的（App Widget 和 App 本身必须是单独的应用程序）。

那么，是否可以从 Android 应用程序中动态创建应用程序小部件？如果不可能，您将如何处理？谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:05:08.240

> 是否可以从 Android 应用程序本身以编程方式创建 App Widget？

那将完全取决于您的意思。

> 我对如何做到这一点相当迷茫，到目前为止，谷歌搜索让我相信这是不可能的（App Widget 和 App 本身必须是单独的应用程序）。

不，应用小部件肯定可以与应用的其余部分放在同一个 Android 项目中。事实上，通常是这样。

> 那么，是否可以从 Android 应用程序中动态创建应用程序小部件？

再一次，你似乎认为世界知道你所说的“动态”是什么意思，迫使我们猜测。

从代码的角度来看，应用程序小部件由 、`AppWidgetProvider`清单中指向该 的条目`AppWidgetProvider`、元数据 XML 文件以及您需要的任何其他资源（布局、可绘制对象等）组成。所有这些都必须由程序员编写并在编译时包含在应用程序中——你不能“动态地”创建这些东西。

应用小部件的实例由用户而不是程序员放在主屏幕上。因此，程序员不能“动态地”创建应用小部件的实例。

程序员*可以*“动态地”做的是决定在应用程序小部件内显示什么（例如，新闻自动收报机的当前标题，音乐播放器正在播放的当前歌曲）。

# parameters - 自动提交后怎么办

> ID：13549195
> 
> 赞同：0
> 
> 时间：2012-11-25T07:36:40.050
> 
> 标签：parameters, submit

我想自动登录到某个站点，所以我使用了这段代码并且它有效

```
<form id="myform" runat="server" action="http://my.yad2.co.il/login.php">
    <div>
        <input type="text" value="MyUserName" name="Username" id="login_email" />
        <br />
        <input type="password" name="Password" id="Irealpass" value="MyPassword" />
        <script>
            document.forms["myform"].submit();
        </script>
    </div>
</form> 
```

现在我想在不使用文本框的情况下传递参数。我用这个脚本替换了脚本

```
 <script>
    var params = { Username: "MyUserName", Password: "MyPassword" };
            this.getForm().getEl().dom.action = 
            'http://my.yad2.co.il/login.php"?' + Ext.urlEncode(params);
            document.forms["myform"].submit();
    </script> 
```

为什么它不起作用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:58:33.693

为了替换 action 属性，您可以使用以下代码

```
document.forms["myform"].action='http://my.yad2.co.il/login.php?' + Ext.urlEncode(params) 
```

但是，服务器不能接受来自查询字符串的登录名/密码，因为您在发布请求中传递它们。

我建议在提交之前设置文本框值

```
<form id="myform" runat="server" action="http://my.yad2.co.il/login.php">
        <div>
            <input type="text" value="MyUserName" name="Username" id="login_email" />
            <br />
            <input type="password" name="Password" id="Irealpass" value="MyPassword" />
                <script>
                Ext.get("login_email").set({value:"MyUserName1"});
                Ext.get("Irealpass").set({value:"MyPassword1"});

                document.forms["myform"].submit();
                </script>

        </div>
    </form> 
```

# android - Android sqlite 使用单选按钮对列表视图进行排序

> ID：13549196
> 
> 赞同：1
> 
> 时间：2012-11-25T07:36:57.173
> 
> 标签：android, eclipse, sqlite, cursor

我制作了一个列表视图，数据是从 sqlite 获取的，现在我想让它使用单选按钮按名称或位置排序

这是我的代码

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        db = new DatabaseHelper(this);
        RadioButton rbname = (RadioButton)findViewById(R.id.radio0);
                RadioButton rblocation = (RadioButton)findViewById(R.id.radio1);

            if (rbname.isChecked()){
            Cursor = db
                .getReadableDatabase()
                .rawQuery("SELECT *  FROM " + DatabaseHelper.LIST + " ORDER BY " + DatabaseHelper.NAME, null);  
            ListAdapter adapter = new SimpleCursorAdapter(this, R.layout.row, Cursor,
                new String[] {DatabaseHelper.NAME, DatabaseHelper.ADDRESS, DatabaseHelper.GENDER, DatabaseHelper.LOCATION},
                new int[] {R.id.txtName, R.id.txtAddress, R.id.txtGender, R.id.txtLocation});       
            setListAdapter(adapter);

            }

            else if (rblocation.isChecked()){
                Cursor = db
                        .getReadableDatabase()
                        .rawQuery("SELECT *  FROM " + DatabaseHelper.LIST+ " ORDER BY " + DatabaseHelper.LOCATION, null);   
                ListAdapter adapter = new SimpleCursorAdapter(this, R.layout.row, Cursor,
                        new String[] {DatabaseHelper.NAME, DatabaseHelper.ADDRESS, DatabaseHelper.GENDER, DatabaseHelper.LOCATION},
                        new int[] {R.id.txtName, R.id.txtAddress, R.id.txtGender, R.id.txtLocation});       
                    setListAdapter(adapter);
            }

        registerForContextMenu(getListView());
    } 
```

我已经尝试将`Cursor.requery()`已经尝试将 ListAdapter 更改为 BaseAdapter 以便我可以使用`notifydatasetchanged()`

但什么也没发生..我的列表视图仍然没有更新

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:37:19.593

您需要做的是将您的代码放入*侦听*器中，以便您的事件在单击按钮后激活，而不是在`onCreate`. 此外，通过重新实例化游标并调用`changeCursor`适配器来获取由游标支持的列表视图以进行更改。我希望下面的代码能让事情更清楚：

```
private RadioButton rbname, rblocation;
private SimpleCursorAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    db = new DatabaseHelper(this);
    rbname = (RadioButton)findViewById(R.id.radio0);
    rblocation = (RadioButton)findViewById(R.id.radio1);

    Cursor cursor = db
            .getReadableDatabase()
            .rawQuery("SELECT *  FROM " + DatabaseHelper.LIST + " ORDER BY " + DatabaseHelper.NAME, null);
    // a default cursor
    adapter = new SimpleCursorAdapter(this, R.layout.row, Cursor,
            new String[] {DatabaseHelper.NAME, DatabaseHelper.ADDRESS, DatabaseHelper.GENDER, DatabaseHelper.LOCATION},
            new int[] {R.id.txtName, R.id.txtAddress, R.id.txtGender, R.id.txtLocation});       
    setListAdapter(adapter);    // do the adapter stuff here to avoid repeating code
    initListeners(); // set up the listeners for the radio buttons

    registerForContextMenu(getListView());
}

private void initListeners() {

    rbname.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked){
                Cursor cursor = db
                        .getReadableDatabase()
                        .rawQuery("SELECT *  FROM " + DatabaseHelper.LIST + " ORDER BY " + DatabaseHelper.NAME, null);
                adapter.changeCursor(cursor); // change cursor in adapter so that listview changes                  
            }               
        }
    });

    rblocation.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked){
                Cursor cursor = db
                        .getReadableDatabase()
                        .rawQuery("SELECT *  FROM " + DatabaseHelper.LIST+ " ORDER BY " + DatabaseHelper.LOCATION, null);   
                adapter.changeCursor(cursor);   
            }               
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:58:27.473

很久以前我有同样的问题，帮助生成刷新方法。所以每次我需要刷新时，我都会简单地调用这个方法。

```
 private void refresh() {
           ListView yourListView = getListView();   
           list = getList(); //this is a List<string>
           adapter = new ArrayAdapter<String> (this,R.layout.your_listview_item,list); //this is ArrayAdapter<String>       
           yourListView.setAdapter(adapter);
           yourListView.invalidateViews();
} 
```

这在我的 ListActivity 中效果很好

# c# - Watin：从下拉列表中选择项目，其值是从另一个下拉列表中填充的

> ID：13549198
> 
> 赞同：2
> 
> 时间：2012-11-25T07:37:21.847
> 
> 标签：c#, visual-studio-2008, nunit, watin

我是 Watin 的新手，并且我正在使用 java 和 iface 技术来自动化站点，我正在尝试从下拉列表中进行选择，它的值是从另一个下拉列表中填充的，并且我正在使用最新的 Watin 版本并在 VS2008 中进行 C# 单元测试。我已经编码：

```
browser.SelectList(Find.ById("BillEnrollmentForm:selectedIndustry")).Option("Charity").Select();

 browser.SelectList(Find.ById("onlinePayment:panelTabSet1:0:quickPaymentTable:0:selectedBiller")).option("Resala").Select(); 
```

它执行了第一个并从下拉列表中选择，但是当涉及到第二个时，它花费了太多时间并显示此异常

```
"WatiN.Core.Exceptions.TimeoutException : Timeout while Internet Explorer busy" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:23:59.517

尝试在命令之间添加它

```
browser.WaitForComplete(); 
```

如果在初始化浏览器时它没有帮助增加 watin 超时

```
Settings.WaitUntilExistsTimeOut = 240; //in seconds
Settings.WaitForCompleteTimeOut = 240; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:22:52.233

尝试通过以下方式选择项目：

```
browser.SelectList(Find.ById("BillEnrollmentForm:selectedIndustry")).Select("Charity");
browser.SelectList(Find.ById("onlinePayment:panelTabSet1:0:quickPaymentTable:0:selectedBiller")).Select("Resala"); 
```

您也可以尝试验证第二个下拉菜单是否存在（我认为 id 有问题）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T10:02:57.650

我使用 SelectNoWait() 方法修复了它。

```
 browser.SelectList(Find.ById("onlinePayment:panelTabSet1:0:quickPaymentTable:0:selectedIndustry")).Option("Phone").SelectNoWait();
  Thread.Sleep(10000); 
```

# php - PHP 文件输出变量

> ID：13549200
> 
> 赞同：0
> 
> 时间：2012-11-25T07:37:41.297
> 
> 标签：php, html, mysql, pdo

好的，我正在使用此代码

```
$Output = $FirstName '_' $LastName '_' $AccountNumber;
file_put_contents($Output, 'ENTER HTML'); 
```

如何让它通过确定的变量输出文件？由于某种原因，它只是返回一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T07:51:52.763

您忘记连接您的 3 个变量：

```
$Output = $FirstName . '_' . $LastName . '_' . $AccountNumber; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:56:27.680

```
$Output = $FirstName .'_'. $LastName .'_'. $AccountNumber; // missing concatenate operator
file_put_contents($Output, 'ENTER HTML'); 
```

有关 file_put_contents 的帮助，请访问[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

# java - java将如何处理退出时正在运行的线程？

> ID：13549202
> 
> 赞同：4
> 
> 时间：2012-11-25T07:37:56.917
> 
> 标签：java, multithreading

所以我正在为学校编写一个简单的服务器客户端程序。客户端发送一个命令和一些参数，服务器返回一个答案。

服务器将监听新的连接，并为每个新的客户端连接创建一个线程。服务器监听器也是一个独立的线程，由 main 发起。

服务器端 Main 等待用户输入，并在收到适当的输入时退出。

就目前而言，服务器侦听器在一个循环中运行，它说

```
while(true)
{
 ...
} 
```

那么当 main 到达程序末尾并退出时，它会杀死所有正在运行的线程吗？还是会等待他们完成运行？

如果是后一种情况，如果系统试图退出，我可以调用某种方法返回 true 吗？

请记住，每个组件都是它自己的类的一部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T07:39:31.117

有两种类型的线程：*daemon*和*user*。主线程始终是用户线程。

只要至少有一个用户线程，该进程就会保持活动状态。当所有用户线程终止时，所有守护线程都被杀死并且进程终止。

要设置线程的守护进程状态，可以[`setDaemon()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)在启动线程之前调用。

> 那么当 main 到达程序末尾并退出时，它会杀死所有正在运行的线程吗？还是会等待他们完成运行？

如果它是一个守护线程，它最终会被杀死。如果它是用户线程，只要线程继续运行，进程就会一直保持活动状态。

# php - PHP不显示文本颜色

> ID：13549203
> 
> 赞同：-2
> 
> 时间：2012-11-25T07:38:21.980
> 
> 标签：php

我有一个页面，我希望看到以绿色显示球队效力的页面。我有以下 SQL：

```
SELECT performance.id, matchid, playerid, team, debut, batpos, runs, ballsfaced, runs/ballsfaced*100 AS strikerate, fours, sixes, no, howout, fielder, bowler, ballsbowled, maidens, wickets, runsconceded, catches, stumpings, runouts, runsconceded/ballsbowled/6 AS economy, matches.round, matches.season, teams.id AS fteamid, a.id AS ateamid, teams.name AS hometeamname, a.name AS awayteamname, players.fname, players.surname 
                    FROM performance 
                    INNER JOIN matches ON performance.matchid=matches.id 
                    INNER JOIN teams ON matches.hometeam = teams.id 
                    INNER JOIN (SELECT teams.id, name FROM teams) AS a ON matches.awayteam = a.id
                    INNER JOIN players ON performance.playerid=players.id 
```

以及下面的 php 语句：

```
<?php 
          //if they play for this team display in green
          if ($team['team'] == $team['fteamid']){
          ?>
          <font color="green"><?php htmlout($team['hometeamname']); ?></font>
          <?php } else {
              ?> <?php htmlout($team['hometeamname']); ?> 
              <?php } ?>
              v 
              <?php 
          //if they play for this team display in green
          if ($team['team'] == $team['ateamid']){
          ?>
          <font color="green"><?php htmlout($team['awayteamname']); ?></font>
          <?php } else {
              ?> <?php htmlout($team['awayteamname']); ?> 
              <?php } ?> 
```

它适用于主队，但不适用于客队，我不知道为什么，这对我来说似乎是正确的。有人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:20:57.587

我发现了问题，这是表格错误，而不是代码

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T07:44:45.237

好吧，如果我没看错，您忘记在其他情况下设置颜色。

```
if ($team['team'] == $team['fteamid']){
    $color="green";
} else {
    $color="red";
}
$html= htmlout($team['awayteamname']); 
echo "<span color='color:$color'>$html</span>"; 
```

# delphi - 如何让程序在 Delphi 7 中保存

> ID：13549207
> 
> 赞同：1
> 
> 时间：2012-11-25T07:39:31.853
> 
> 标签：delphi, delphi-7, save

如何让我的 Delphi 7 程序将自身保存到新位置。例如，程序保存在我的闪存棒上，然后当我运行它时，我希望它保存在 c:\user \（用户名）中

以上是原问题。

这是我尝试使用的代码。该程序运行完美，但是当我检查应该将其保存在其中的文件夹时，它并没有出现在那里。

```
 procedure TForm5.FormActivate(Sender: TObject);
  var source, dest : string;
 begin
  Source := 'project1.exe';
  Dest := 'C:\Users\Craig\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup';
  CopyFile(PChar(Source), PChar(Dest), False);
 end; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T07:48:46.310

从 Application.ExeName 中读取可执行文件名。然后调用 CopyFile 执行复制。

```
Source := Application.ExeName;
Dest := ...;
CopyFile(PChar(Source), PChar(Dest), False); 
```

* * *

关于您的更新：

1.  目标必须是一个文件。您正在尝试将文件复制到指定文件夹的路径。
2.  你没有检查错误。当你调用类似的 API 函数`CopyFile`时，你需要检查返回值。

你想要这样的东西：

```
Source := 'project1.exe';
Dest := 'C:\Users\...\Startup\project1.exe';
if not CopyFile(PChar(Source), PChar(Dest), False) then
  RaiseLastOSError; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:57:23.967

尝试这个：

```
CopyFile(PChar(C:\OldFile.exe), PChar(C:\NewFile.exe), true); 
```

# c++ - 操作结构内向量中的项目

> ID：13549208
> 
> 赞同：0
> 
> 时间：2012-11-25T07:39:46.107
> 
> 标签：c++, vector, struct

试图弄清楚这一点，我感到很失落。我有自己的数据结构，我计划使用向量来避免跟踪可用空间和重组，如果我使用简单的数组，我需要这样做。我不知道我只是没有正确初始化还是什么，但我所做的每一项任务似乎都消失得无影无踪。

这是一些简单的代码来说明我在说什么：

```
#include <vector>
#include <iostream>

using namespace std;

struct node
{
    int test_int;
    bool test_bool;
};

struct file
{
    vector<node> test_file;
};

int main()
{
    file myfile;
    int myint;

    cout << "Enter number: ";
    cin >> myint;

    myfile.test_file[0].test_int = myint;

    cout << "Number entered is: " << myfile.test_file[0].test_int << endl;

    return 0;
} 
```

所以基本上它是一个结构内的向量。似乎访问向量的正常方法似乎不起作用，因为我无法向向量读取或写入任何内容，但是`myfile.test_file.size()`似乎可以正常工作（因为它们从新创建的结构返回“0” ）。尝试直接访问索引`myfile.test_file[0].test_int`会导致运行时错误，`vector subscript out of range`就好像它实际上并不存在一样。

我没有正确初始化它吗？这对我来说似乎有点荒谬，我不明白为什么它不会那样工作。

编辑：编辑代码以更清楚地显示我所指的行为。这会编译但会出现运行时错误`vector subscript out of range`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:03:29.900

编辑后的版本不起作用，因为您正在访问超过矢量末尾的元素：

```
 myfile.test_file[0].test_int = myint; 
```

在执行此操作之前，您需要使用`resize()`向量或添加元素`push_back()`：

```
 myfile.test_file.push_back(node());
    myfile.test_file[0].test_int = myint; 
```

# python - 链接对象的设计模式

> ID：13549211
> 
> 赞同：2
> 
> 时间：2012-11-25T07:40:02.013
> 
> 标签：python, design-patterns

在我正在进行的项目中，我将有许多对象，每个对象都应该可以相互连接和断开。每个对象将有几个“可连接接口”（即 C1、C2、C3），可以连接到不同对象的连接接口之一。无论连接是否存在，接口本身都存在，并且应该是可添加/可删除的。

例如...链接对象可能看起来像这样：

```
obj1 = ConnectableObject()
obj1.addInterface(name=C1,someproperties)
obj2 = ConnectableObject()
obj2.addInterface(name=C2,someotherproperties)
obj1.connectTo(obj2,C1,C2) #Connects obj1 and obj2 through their interfaces C1 and C2 
```

我正在考虑创建一个名为“链接”的第三个类，它是在接口连接时创建的，然后在断开连接时可能会自行破坏。这个想法似乎有点过头了，所以我正在寻找反馈。对于这种类型的对象交互，我可以借鉴推荐的实现或设计模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:57:51.597

听起来很合理。您可能想研究[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)并采用它供您使用。您还没有说明您打算对您的对象做什么，假设您将遍历它们并根据附加的接口执行操作 - 您可以使用[Iterator 模式](http://en.wikipedia.org/wiki/Iterator_pattern)。

但是请注意，在考虑使用设计模式时，始终是收益与投资的问题——就像您所说的那样，这可能是一种矫枉过正，您应该仔细检查利弊。

# javascript - 滚动经过页面的某个点时显示 div

> ID：13549214
> 
> 赞同：11
> 
> 时间：2012-11-25T07:40:25.163
> 
> 标签：javascript, jquery, html, scroll

我的目标是一旦有人向下滚动页面一定数量的像素，就会在页面顶部显示一个固定的 div。基本上，一旦标题部分不在视野范围内，就会出现这个 div。

我查看了与我想要的代码相似的代码；但是，还没有看到任何可以让我从页面顶部轻松修改像素数的东西（如果可能的话）。

这是我看到的一段代码，它处理通过滚动显示 div 的问题。

```
// Get the headers position from the top of the page, plus its own height
var startY = $('header').position().top + $('header').outerHeight();

$(window).scroll(function(){
    checkY();
});

function checkY(){
    if( $(window).scrollTop() > startY ){
        $('.fixedDiv').slideDown();
    }else{
        $('.fixedDiv').slideUp();
    }
}

// Do this on load just in case the user starts half way down the page
checkY(); 
```

我只想知道如何让它出现。如果有人知道一段代码已经与向上和向下滑动动画保持一致，那也将不胜感激，但不是必需的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-25T07:54:57.987

```
window.addEventListener("scroll",function() { 
   if(window.scrollY > 500) {
      $('.fixedDiv').slideDown();
   }
   else {
      $('.fixedDiv').slideUp();
   }
},false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:09:15.993

Brandon Tilley 在评论中回答了我的问题......

> 您将使用 startY 将第一行更改为您需要的特定 Y 位置，而不是根据标题的位置和高度进行计算。这是一个更新的小提琴：jsfiddle.net/BinaryMuse/Ehney/1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T08:33:58.553

```
window.addEventListener("scroll",function() { 
   $('.fixedDiv')[(window.scrollY > 500)?"slideDown":"slideUp"]();
},false); 
```

演示：http: [//jsfiddle.net/DerekL/8eG2A/](http://jsfiddle.net/DerekL/8eG2A/)

# angularjs - 在滚动角度样式时更改 css

> ID：13549216
> 
> 赞同：29
> 
> 时间：2012-11-25T07:40:44.567
> 
> 标签：angularjs

我想在用户滚动角度方式时更改 CSS 元素。

这是以 JQuery 方式工作的代码

```
$(window).scroll(function() {
    if ($(window).scrollTop() > 20 && $(window).scrollTop() < 600) {
        $('header, h1, a, div, span, ul, li, nav').css('height','-=10px');
    } else if ($(window).scrollTop() < 80) {
        $('header, h1, a, div, span, ul, li, nav').css('height','100px');
    } 
```

我尝试使用以下代码执行 Angular 方式，但 $scope.scroll 似乎无法正确拾取滚动数据。

```
forestboneApp.controller('MainCtrl', function($scope, $document) {
    $scope.scroll = $($document).scroll();
    $scope.$watch('scroll', function (newValue) {
        console.log(newValue);
    });
}); 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-25T08:38:46.287

请记住，在 Angular 中，DOM 访问应该在指令中进行。`scrollTop`这是一个简单的指令，它根据窗口的设置一个变量。

```
app.directive('scrollPosition', function($window) {
  return {
    scope: {
      scroll: '=scrollPosition'
    },
    link: function(scope, element, attrs) {
      var windowEl = angular.element($window);
      var handler = function() {
        scope.scroll = windowEl.scrollTop();
      }
      windowEl.on('scroll', scope.$apply.bind(scope, handler));
      handler();
    }
  };
}); 
```

对我来说，您正在寻找的最终结果并不明显，所以这是一个简单的演示应用程序，`1px`如果窗口向下滚动超过 50 像素，则将元素的高度设置为：http: [//jsfiddle.net/BinaryMuse/ Z4VqP/](http://jsfiddle.net/BinaryMuse/Z4VqP/)

# javascript - 如何在 jQuery 的 .html() 方法中使用 javascript 变量

> ID：13549218
> 
> 赞同：1
> 
> 时间：2012-11-25T07:41:34.783
> 
> 标签：javascript, jquery, html

我现在的示例代码如下所示：

```
<script>
   var number = 10;
   $('.someclass').html(
       number  
   )
</script> 
```

但是，在结果中，输出只是数字 var 名称，而不是 javascript 变量的正确数值 10。谢谢你们的帮助！

更新：这正是我所拥有的

```
 $('.well.well-large.' + number).html(
                "."
              article_id
              {{ cur_articles.article_id.title }}
              {{ cur_articles.article_id.domain }}

          ).hide().fadeIn(500); 
```

这 ”。” 我需要这样 hide() 不会出错。也许那是导致问题的原因。

更新：事实证明，“。” 是这个问题的原因，删除后就恢复正常了。不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:45:48.323

```
var number = 10;
$('body').html(number) 
```

在浏览器的控制台中试试这个，它应该给你 10。

# android - 在我的远程应用程序的其他活动中，anymote 协议连接是否有效？

> ID：13549220
> 
> 赞同：0
> 
> 时间：2012-11-25T07:41:46.360
> 
> 标签：android, google-tv

我正在尝试为我的远程应用程序使用多个活动，例如活动 A、活动 B。

但是每次我尝试创建一个意图（在活动 A 中）并启动一个新活动（活动 B）时，配对活动都会不断弹出，但我只希望在我第一次启动应用程序时使用配对活动，我希望配对通信保持活跃（直到我杀死整个应用程序）。

有没有办法实现这个？或者我应该将我的所有应用程序保存在一个活动中？像活动AB？我不太确定，但我认为它可能与 AnymoteClientService 和 AnymoteSender 有关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:15:11.500

如果您的 Anymote 逻辑保存在服务中，那么多个活动可以使用它向 Google TV 发送命令。每个应用程序只会发生一次配对。

如果您使用的是 Google 开源的 Anymote 库 (https://code.google.com/p/googletv-android-samples/source/browse/#git%2FAnymoteLibrary)，则该库需要完成配对步骤与每一个连接。

我开源的 Anymote-for-Java 库（https://code.google.com/p/googletv-android-samples/source/browse/#git%2FAnymoteLibrary）会记住配对信息，只需要配对每个设备执行一次的步骤。

# javascript - 无法更改 JSON.stringify 替换函数中的可枚举属性？

> ID：13549226
> 
> 赞同：0
> 
> 时间：2012-11-25T07:43:56.823
> 
> 标签：javascript, json

我正在尝试在替换函数中序列化不可枚举的属性。

这里有什么问题？

请帮忙。

```
var obj = {x:1,y:2};
Object.defineProperty(obj,"x",{enumerable:false});

var s = JSON.stringify(obj,function(key,value){
if(this.propertyIsEnumerable(key) == false){
Object.defineProperty(this,key,{enumerable:true});
}
return value;});

//"{"y":2}"
// x remains not enumerable 
```

我猜不可枚举的属性在执行替换函数之前被过滤掉了。没有把握。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:15:23.243

如果`.stringify`过滤掉不可枚举的属性，那么是的，它们在回调中不可用 - 它已经完成了该过滤器。为什么不在字符串化之前遍历对象的所有键，并使用内部的逻辑将其设置为可枚举（如果还没有的话）。然后，只需简单地调用`JSON.stringify(obj);`. 不幸的是，正如您所指出的，`for in`循环和 jQuery`$.each`不会遍历不可枚举的键。我发现`.getOwnPropertyNames`应该完成你想要的 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)

这是使用它的示例，类似于您提供的代码：

[http://jsfiddle.net/9Em82/](http://jsfiddle.net/9Em82/)

```
var obj = {x:1,y:2};

Object.defineProperty(obj,"x",{enumerable:false});

var all = Object.getOwnPropertyNames(obj);
for (var i = 0, j = all.length; i < j; i++) {
    console.log("KEY: " + all[i]);
} 
```

# objective-c - 设置 App Delegate 以管理数据

> ID：13549230
> 
> 赞同：3
> 
> 时间：2012-11-25T07:44:39.387
> 
> 标签：objective-c, ios, appdelegate

我正在开发一个带有拆分视图控制器的应用程序，并希望将主数据类存储在 App Delegate 中，以便我可以从多个视图（MasterView、DetailView 和几个 PopUps）访问它。

我有点菜鸟，不知道为什么会出现错误：

> AppDelegate.m:31:26：在“MasterViewController”类型的对象上找不到属性“dataController”

以下是相关代码 - 非常感谢任何帮助。谢谢。

**AppDelegate.h**

```
#import <UIKit/UIKit.h>

@class EventClassDataController;
@class MasterViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

**AppDelegate.m**

```
#import <UIKit/UIKit.h>

@class EventClassDataController;
@class MasterViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

**主视图控制器.h**

```
#import <UIKit/UIKit.h>

@class DetailViewController;
@class EventClassDataController;

@interface MasterViewController : UITableViewController

@property (strong, nonatomic) EventClassDataController *dataController;
@property (strong, nonatomic) DetailViewController *detailViewController;

@end 
```

**主视图控制器.m**

```
#import "MasterViewController.h"
#import "DetailViewController.h"
#import "EventClassDataController.h"
#import "EventClass.h"

@interface MasterViewController ()

@end

@implementation MasterViewController

@synthesize detailViewController, dataController;

- (void)awakeFromNib
{
    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    [super awakeFromNib];

    // Initialize event data
    self.dataController = [[EventClassDataController alloc] init];
} 
```

**EventClassDataController.h**

```
#import <Foundation/Foundation.h>

@class EventClass;

@interface EventClassDataController : NSObject

@property (nonatomic, copy) NSMutableArray *masterEventList;

-(NSUInteger)countOfList;
-(EventClass *)objectInListAtIndex:(NSUInteger)theIndex;
-(void)addNewEvent:(EventClass *)event;
-(void)removeEvent:(EventClass *)event;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:28:41.673

您需要添加

```
#import "MasterViewController.h" 
```

到 AppDelegate.m。

**解释：**

从您的错误消息中，我可以看出您正在尝试在 AppDelegate 的第 26 行访问 MasterViewController 的属性。但是，在您的 AppDelegate 类中，您只有一个前向声明（“@class MasterViewController”），并且您没有包含 MasterViewController 的实际头文件。这意味着 AppDelegate 知道在您的项目中某处存在一个名为 MasterViewController 的类......但这就是它所知道的全部。*AppDelegate 对 MasterViewController 的内容*一无所知，即 MasterViewController 声明的属性或方法。

在头文件中使用@class 的原因是您可以在@interface 中拥有属性，例如

```
@property (nonatomic, strong) MasterViewController * appDelegatesReferenceToMasterViewController; 
```

无需在 AppDelegate.h 中导入 MasterViewController.h。这样，您项目中的其他文件可以导入 AppDelegate.h，而不会无意中导入 MasterViewController.h。

**翻译：**

您编写代码：

```
@class MasterViewController; 
```

就像对编译器说：

> 哟...编译器。我将在这个头文件中谈论一个叫做 MasterViewController 的东西，你不知道 MasterViewController 是什么……但不要误会兄弟。都很好。

但是，稍后在您编写代码后的 .m 文件中：

```
... masterViewController.dataController ... 
```

编译器响应：

> 哇，哇，哇。我很高兴你在头文件中有一个 MasterViewController 类型的变量，因为你告诉我这一切都很好，不用担心。但是现在你在这里尝试使用我一无所知的 MasterViewController 的某些方面。我怎么知道这是否合法？不帅哥

# c# - 更改文本框时传递隐藏 ID

> ID：13549234
> 
> 赞同：1
> 
> 时间：2012-11-25T07:45:32.350
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3

我有多个文本框，每个文本框都有一个相关的隐藏字段，隐藏字段的 ID 是字符串与模型 ID 的串联（例如：“ `FormState25`”）

更改文本框时如何传递隐藏字段的 ID？我正在使用以下代码来检测文本框更改：

```
$("#body-content-container").on('change', 'input[type="text"]', function () {
    $("#FormState").val('dirty');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:04:12.297

您可以使用`this`来引用定义匿名函数的元素，例如：

```
$("#body-content-container").on('change', 'input[type="text"]', function () {
    $("#FormState" + this.attr('id')).val('dirty');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T08:24:00.960

试试这个：

```
$("input[type=text]").click(function(){
     var hiddenId = "FormState" + $(this).attr("Id");
     var hiddenField = $("#" + hiddenId);
     hiddenField.val("dirty");
}); 
```

**编辑：**

如果您的隐藏字段在您的输入框之后呈现，那么您可以执行以下操作：

```
$("input[type=text]").click(function(){        
     var hiddenField = $(this).next();
     hiddenField.val("dirty");
}); 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T11:22:01.927

您可以将自定义属性添加到包含隐藏字段 ID 的文本框标签本身，例如：

**在视图中**

```
@Html.TextBoxFor(model => model.Name, new { HiddenFieldId = "FormState" + Model.Id }) 
```

这样，当文本框发生更改时，您可以获得已用于存储任何内容的隐藏字段的 ID，然后修改 javascript 以处理该隐藏字段的 ID，如下所示：

**Javascript**

```
$("#body-content-container").on('change', 'input[type="text"]', function () {
    var hiddenId = $(this).attr("HiddenFieldId");
    $("#" + hiddenId).val('dirty');
}); 
```

javascript将从`HiddenFieldId`文本框中获取相应隐藏字段的属性并更改其值。试试这个，让我知道..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T02:17:30.637

这是我过去使用的另一个技巧。将两个相关的输入字段包含在一个`div`（或其他）元素中。然后使用文本字段和隐藏字段是兄弟的事实来选择正确的隐藏字段。也许是这样的（注意：我没有测试过这个例子）：

```
<div id="someId">
  <input type="hidden" value="unchanged" />
  <input type="text" value="some data" />
</div>

<script type="text/javascript">
  var hiddenInput = $('#someId input:first')
  var textInput = $('#someId input:last')

  textInput.on('change', function() {
    hiddenInput.val('modified');
  });
</script> 
```

# php - 如何使用谷歌地图api和php计算两个地方之间的距离？

> ID：13549240
> 
> 赞同：0
> 
> 时间：2012-11-25T07:46:11.820
> 
> 标签：php, google-maps, google-maps-api-3

> **可能的重复：**
> [使用 PHP 和 google Maps Api 计算 2 个邮政编码之间的距离（英国）](https://stackoverflow.com/questions/2296087/using-php-and-google-maps-api-to-work-out-distance-between-2-post-codes-uk)
> [Google Maps API：获取两个位置距离并在地图上绘图](https://stackoverflow.com/questions/13542052/google-maps-api-get-two-locations-distance-and-plot-on-map)

我做了一个界面，用户可以在其中插入开始和结束地址，提交后我想获取两个地址的纬度和经度，然后计算它们之间的距离。到目前为止，我已经粘贴了下面的代码：

```
<html>
<head>
</head>
<body>
    <form method="post" action ="gMap.php?showDistance=1" >
        <table>
            <tr><td>Start:</td><td><input id="start" type="text"  name='start'/> </td></tr></br>
            <tr><td>Finish:</td><td><input id="finish" type="text" name='finish'/></td></tr></br>
            <tr><td></td><td><input type="submit" value="Calculate Distance" /></td></tr></br>
        </table>
    </form>
<!--  
<br/><br/>
<div id="map" style="width: 500px; height: 350px"></div>
<div id="results" style="width: 500px;"></div>
-->
</body>
</body> 
</html>
<?php
if(isset($_GET['showDistance'])) {

    if(!empty($_POST['start'])&& !empty($_POST['finish'])){
    $start='';
    $finish='';
    $start=$_POST['start'];
    $finish=$_POST['finish'];

    // I want to send start address via this url;
    $startUrl = 'http://maps.google.com/maps/api.............';
    $startData = @file_get_contents($startUrl);

    // I want to send finish address via this url;
    $finishUrl = 'http://maps.google.com/maps/api............';
    $finishData = @file_get_contents($finishUrl);

    $startResult = explode(",", $startData);
    $finishResult = explode(",", $finishData);

    echo "Information about start address:"."<br/>";
    echo $startResult[0]."<br/>"; // status code
    echo $startResult[1]."<br/>"; // accuracy
    echo $startResult[2]."<br/>"; // latitude
    echo $startResult[3]."<br/>";; // longitude

    echo "Information about finish address:"."<br/>";

    echo $finishResult[0]."<br/>"; // status code
    echo $finishResult[1]."<br/>"; // accuracy
    echo $finishResult[2]."<br/>"; // latitude
    echo $finishResult[3]."<br/>";; // longitude

    } else {
    echo "You forget to insert address";
    }
}  
?> 
```

现在我面临的问题是我不知道如何使用 google map api url 从 google map 获取所需的信息。$startUrl 和 $finishUrl 是我关心的两个变量。顺便说一句，我还没有编写距离计算的代码，因为我还没有得到尊重的纬度和经度值。

# javascript - jQplot 日期轴图起点

> ID：13549241
> 
> 赞同：2
> 
> 时间：2012-11-25T07:46:21.997
> 
> 标签：javascript, graph, jqplot

我似乎无法让我的图表在绘图数据的第一个日期开始并在最后一个日期结束。

```
 $(document).ready(function(){
  var line1=[['01-Nov-12',18],['02-Nov-12',18],['03-Nov-12',18],['04-Nov-12',18],['05-Nov-12',18],['06-Nov-12',18],['07-Nov-12',18],['08-Nov-12',18],['09-Nov-12',18],['10-Nov-12',18],['12-Nov-12',0],['13-Nov-12',0],['14-Nov-12',0],['15-Nov-12',0],['16-Nov-12',0],['17-Nov-12',0],['18-Nov-12',0],['19-Nov-12',0],['20-Nov-12',0],['21-Nov-12',0],['22-Nov-12',0],['23-Nov-12',0],['24-Nov-12',0]];

  var line2=[['01-Nov-12',20],['02-Nov-12',20],['03-Nov-12',20],['04-Nov-12',20],['05-Nov-12',20],['06-Nov-12',20],['07-Nov-12',20],['08-Nov-12',20],['09-Nov-12',20],['10-Nov-12',20],['12-Nov-12',0],['13-Nov-12',0],['14-Nov-12',0],['15-Nov-12',0],['16-Nov-12',0],['17-Nov-12',0],['18-Nov-12',0],['19-Nov-12',0],['20-Nov-12',0],['21-Nov-12',0],['22-Nov-12',0],['23-Nov-12',0],['24-Nov-12',0]];

  var plot2 = $.jqplot('openCloseChart', [line1, line2], {
    title:'Opened/Closed Complaints Chart',
    axes:{
      xaxis:{
        renderer:$.jqplot.DateAxisRenderer,
          tickOptions:{
            formatString:'%b&nbsp;%#d'
          }
      },
      yaxis:{
        min:0,
        tickOptions:{
          formatString:'%d'
        }
      }
    },
    highlighter: {
      show: true
    },
    cursor: {
      show: false,
      tooltipLocation:'sw'
    },
    legend: {
        show: true,
        location: 'e',
        placement: 'outside',
        labels:['Opened', 'Closed']
    }
  });
}); 
```

我创建了以下示例：

[http://jsfiddle.net/tBZbf/5/](http://jsfiddle.net/tBZbf/5/)

我可以让图表从第一个数据点开始并在最后一个日期动态结束吗？在这个例子中，11 月 1 日到 24 日结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:50:18.277

```
 xaxis:{
    min:'01-Nov-12',
    max:'24-Nov-12',
  }, 
```

[http://jsfiddle.net/QpjXd/](http://jsfiddle.net/QpjXd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T08:23:02.240

可以在这里找到更完整的答案： [为什么 jQPlot dateAxisRenderer 不能正常工作？](https://stackoverflow.com/questions/11891672/why-does-jqplot-dateaxisrenderer-not-working-correct)

（它只是更好地解释了如何添加钩子）。

# openssl - 修改私钥后我仍然可以解密文件

> ID：13549242
> 
> 赞同：1
> 
> 时间：2012-11-25T07:46:26.770
> 
> 标签：openssl, encryption

当我尝试使用 openssl 加密我的数据时，我感到很困惑。

首先，我使用以下命令创建了一个自签名证书和相应的私钥：

```
openssl req -newkey rsa:4096 -x509 -nodes -days 36500 -outform PEM -keyout Private.PEM -out Cert.PEM 
```

然后，我使用证书通过以下命令加密我的文件：

```
openssl smime -encrypt -aes-256-cbc -binary -outform DER -in MyFile.zip -out MyFile.zip.enc Cert.PEM 
```

最后，我可以用这个解密加密的数据：

```
openssl smime -decrypt -binary -inform DER -in MyFile.zip.enc -out MyFile.Decrypted.zip -inkey Private.PEM 
```

但是，我打开了私钥（Private.PEM）并用另一个字符替换了一个字符，保存它，重新发出第三个命令，我仍然可以解密文件！

这应该发生吗（PEM 格式是容错的？），还是我的程序错误？

谢谢。

# android - 如何防止在android中重新加载活动

> ID：13549249
> 
> 赞同：0
> 
> 时间：2012-11-25T07:47:27.103
> 
> 标签：android

有活动 A，这里正在从服务器检索数据。单击按钮完成当前活动并启动 B 活动，再次单击按钮我想通过完成 B 活动来进行 A 活动，但我不想重新加载 A 活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:51:19.797

您应该查看活动的生命周期和活动堆栈。developer.android.com/guide/components/tasks-and-back-stack.html。要了解有关此 developer.android.com/training/basics/activity-lifecycle/index.html 的更多信息。通过链接，您应该能够解决您的问题。

# javascript - jquery插件如何调用函数？

> ID：13549254
> 
> 赞同：7
> 
> 时间：2012-11-25T07:48:09.337
> 
> 标签：javascript, jquery, html

```
(function($) { 
    $.fn.top_islides = function(){
        var ajax_init = function(){
            init_islides();
            setTimeout(function(){picmove()},300);
        };
//.....
    };  
})(jQuery); 
```

在文件中调用它准备在另一个文件中

```
$('#top_slides').top_islides();
$('#top_slides').top_islides().ajax_init(); 
```

我认为它应该工作，我得到一个错误，有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T08:02:36.643

像这样做：

```
(function($) {
    //Assuming $.fn.top_islides is defined
    $.fn.top_islides.ajax_init = function(){
        init_islides();
        setTimeout(picmove,300);
    };
 //.....
})(jQuery); 
```

或者

```
(function($) { 
    $.fn.top_islides = function(){
        var ajax_init = function(){
            init_islides();
            setTimeout(picmove,300);
        };
        return {
            ajax_init: ajax_init
        };
    });
     //.....
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T07:51:40.583

尝试以下示例：-

```
<script type="text/javascript">

    $.someplugin = {
      CallMe : function() {
            alert("You called?");
        },
      otherstuff : function() { alert("other stuff!"); }
    };

    $.someplugin.CallMe();
    $.someplugin.otherstuff();
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T08:04:47.040

在函数内部使用时`var`，它将使元素“私有”。这是一种让 Javascript 工作可见性的 hacky 方式，而真正的类结构不会出现在 Javascript 中。您需要将其设置为函数的原型或返回一个对象

```
(function($) { 
  $.fn.top_islides = function(){
    var ajax_init = function(){
        init_islides();
        setTimeout(function(){picmove()},300);
    };
    return {
      'ajax_init': ajax_init
    };
  //.....
  };  
 })(jQuery); 
```

或者

```
(function($) { 
  $.fn.top_islides = function(){
  //.....
  };
  $.fn.top_islides.prototype.ajax_init = function(){
    init_islides();
    setTimeout(function(){picmove()},300);
  }
 })(jQuery); 
```

但在你的情况下，你不会使用原型，因为你不是实例化一个新`top_islides`对象，而是通过 jQuery 访问，所以第一个选项是你最好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T07:03:09.430

Imo，最好的解决方案是使用更清洁的触发器，因为您可以保留可链接的插件系统。

您可以在插件声明中声明事件处理程序并从外部触发：

```
(function($) { 
  $.fn.top_islides = function(){
    this.on ('init_islides', function(){
        setTimeout(function(){picmove()},300);
    };
  //.....
  };  
 })(jQuery);
$( "button" ).click(function () {
  $( "p" ).trigger( "init_islides");
}); 
```

文档可以在这里找到：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

# c# - 对于模拟事件，应该维护一个委托列表还是使用多播委托？

> ID：13549255
> 
> 赞同：1
> 
> 时间：2012-11-25T07:48:12.690
> 
> 标签：c#, delegates

这两个类有什么区别？哪个更可取？

```
class MulticastExample
{
    delegate void ME();

    ME me;

    public MulticastExample()
    {
        ME a = new ME(() => Console.WriteLine("A"));
        ME b = new ME(() => Console.WriteLine("B"));

        me = a + b;
    }

    public void Run()
    {
        me();
    }
} 
```

-

```
class ListExample
{
    delegate void LE();

    List<LE> le = new List<LE>();

    public ListExample()
    {
        LE a = new LE(() => Console.WriteLine("A"));
        LE b = new LE(() => Console.WriteLine("B"));

        le.Add(a);
        le.Add(b);
    }

    public void Run()
    {
        foreach (var x in le)
        {
            x();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:04:28.467

我认为您应该使用第一个示例。请注意，您始终可以通过说出“多播”委托来获取项目列表`me.GetInvocationList()`。该类型`MulticastExample.ME`从 继承此方法`System.Delegate`。

当您分配给`a`并且`b`您不必使用`new`语法时。相同的委托由以下人员创建：

```
ME a = () => Console.WriteLine("A"); 
```

请注意，每个实例`ME`都是不可变的，并且具有固定长度的调用列表。此列表保证至少包含一项。

当您“添加”或“减去”（组合或删除）委托时，原始实例保持不变（不变性）并创建一个新实例。

如果“减法”的结果如下：

```
ME c = b - a; 
```

将给出一个长度为零的多播委托，不会创建新实例，`null`而是返回一个引用（即`c`变为`null`）。因此，请记住`null`在调用之前进行检查：`c();`

如果您选择`List<T>`改用，一个区别是（您现在可能已经知道）a`List<>`是可变的。另请注意，您有责任检查没有任何成员`List<>`本身是多播的，因为.NET 中的*任何*委托类型都允许多个项目的调用列表。

最后（但我猜你知道）委托类型`ME`不需要嵌套在其他类型中（在本例中为`class` `MulticastExample`），但是当您希望委托类型成为包含类。

如果您打算使您的委托类型成为泛型类型，如果您打算与`+`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T08:04:37.420

使用`MulticastExample`, 一次调用`me`将调用它的所有方法`subscribed`。因此`a`，`b`将通过一次调用调用`me`

`ListExample`您必须单独调用每个代表。因此，您必须单独调用以及在`a`循环中执行的**操作**`b`**`foreach`**

 *** * *

如果`a`并且`b`将要引用相同签名的单个方法，那么`ListExample`是多余的。您应该使用`MulticastExample`.**

# php - 带有 CodeIgniter 的 REST API

> ID：13549262
> 
> 赞同：6
> 
> 时间：2012-11-25T07:49:42.727
> 
> 标签：php, api, codeigniter-2

我正在为我正在开发的移动应用程序创建一个 Web 服务后端。（我是经验丰富的 Obj-C 开发人员，而不是网页设计师！）本质上我想使用 Codeigniter 和 Phil Sturgeon 的 RESTful API 服务器[https://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)但是，我有一些麻烦设置和工作。

我有 MySQL 数据库，其中设置了数据。我需要一些帮助来编写 CodeIgniter PHP 模型和控制器，以返回该数据库中内容的 JSON 数据。我发现的所有教程和论坛帖子都处理控制器中的硬编码数据，而不是 MySQL 数据库。理想情况下，我希望 URL 的格式像这样[http://api.mysite.com/v1/search?id=1&name=foo&city=bar](http://api.mysite.com/v1/search?id=1&name=foo&city=bar)，我可能有 50 多个参数来传递 URL。

使用菲尔的代码，我想出了这个作为我的控制器：

```
public function index_get()
{
    if (!$this->get('id'))
    {
        $this->response(NULL, 400);
    }

    $data = $this->grid_m->get_id($this->get('id'));
    if ($data)
    {
        $this->response($data, 200);
    }
    else
    {
        $this->response(NULL, 404);
    }
} 
```

那只会给我一个搜索词：id？=# ..我需要知道如何获取多个搜索词

这是我的 Codeigniter 模型：

```
<?php

class Grid_m extends CI_Model
{

function get_all()
{
    $query = $this->db->get('grid');
    if ($query->num_rows() > 0)
    {
        return $query->result();
    }
    return FALSE;;
} 
```

无论我在 URL 中传递什么 id 或 url 术语，这只会返回我的 MySQL 数据库中的所有内容。

在开发我自己的自定义 API 时，我是一个大菜鸟，所以任何关于如何修复我的控制器和数据库模型的建议都会有很大的帮助！

谢谢您的帮助！

-布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T08:23:44.570

这是一个老问题，但如果有人去这里仍然需要帮助，请尝试以下代码：

在您的控制器中：

```
public function index_get()  
{  
    $where = '';  

    if ($this->get('id'))  // search by id when id passed by
    {              
        $where .= 'id = '.$this->get('id');  
    }  

    if ($this->get('name'))  // add search by name when name passed by        
    {  
        $where .= (empty($where)? '' : ' or ')."name like '%".$this->get('name')."%'";  
    }  

    if ($this->get('city'))  // add search by city when city passed by  
    {  
        $where .= (empty($where)? '' : ' or ')."city like '%".$this->get('city')."%'";  
    }  

    // you can add as many as search terms

   if ( ! empty($where))  
   {  
       $data = $this->grid_m->get_searched($where);  

       if ($data)  
       {  
           $this->response($data, 200);  
       }  
       else  
       {  
           $this->response(NULL, 404);  
       }  
    }  
    else  
    {  
        $this->response(NULL, 404);  
     }  
} 
```

在您的模型中，创建**`get_searched`**函数：

```
class Grid_m extends CI_Model  
{  
   function get_searched($where = NULL)  
   {  
      if ( ! is_null($where))  
      {  
          $this->db->where($where);  
          $query = $this->db->get('grid');  

          if ($query->num_rows() > 0)  
          {  
              return $query->result();  
          }  
       }  
       return FALSE;  
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:02:59.533

请检查您的查询

```
$query = $this->db->get_where('grid', array('id' => $id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T07:55:26.843

使用[Codeigniter 的活动记录](http://codeigniter.com/user_guide/database/active_record.html)来构建正确的查询，您可以使用活动记录的方法构建任何类型的查询，参考以下示例，我刚刚在其中添加了一个条件，您可以根据需要添加更多条件。

```
 <?php
class Grid_m extends CI_Model
{    
  function get_all()
  {
     $this->db->select('col1, col2, col3')->where('id', 5);
     $query = $this->db->get('grid');

    if ($query->num_rows() > 0)
    {
        return $query->result();
    }
    return FALSE;;
  }

} 
```

# html - 为什么我在 IE9 中播放 Video.js 时遇到问题

> ID：13549263
> 
> 赞同：2
> 
> 时间：2012-11-25T07:49:47.680
> 
> 标签：html, internet-explorer, html5-video, video.js, audiovideoplayback

下面是我用于视频标签的代码。我基本上从 Video.js 网站上复制并粘贴了它（然后用我自己的文件名进行了更新）。起初我可以让 Chrome 工作，但不能让 Firefox 或 Internet Explorer 工作。然后我将“webm”标签更改为“web”。Firefox 解决了这个问题，但我仍然无法使用 IE9 播放。它只是显示好像它正在尝试加载。现在我只是尝试使用同一根文件夹中的本地文件对其进行测试，所以我认为等待它下载不是问题。我的视频文件范围从 8.1 到 8.4 兆。

如果有人对如何玩这个有任何想法，将不胜感激。先感谢您。

以下是在 head 标签中：

```
 `<link href="video-js.css" rel="stylesheet">
    <script src="video.js"></script>
    <script>
          _V_.options.flash.swf = "video-js.swf"`
    </script> 
```

以下是在 html 标记中：

```
 `<video id="example_video_1" class="video-js vjs-default-skin"  
              controls preload="auto" width="640" height="264"  
              poster="bdg-vid-poster.png"  
              data-setup='{}'>  
             <source src="bdg112412hr.mp4" type='video/mp4' />  
             <source src="bdg112412.web" type='video/web' />  
             <source src="bdg112412.ogv" type='video/ogv' />
             </video>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:04:35.140

对我也有帮助的是 preload="auto" 必须是 preload="none" 否则它会在播放之前等待加载整个视频......真正的拖累......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:02:16.403

检查服务器上配置的 MIME 类型。

我在使用 mp4 和 IE9 时遇到了问题。我只需要将 myme-tipe 从**video/mpeg**更改为**video/mp4**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:52:56.257

我不确定您为什么将名称从更改`webm`为`web`-`webm`是使用的正确扩展名。该行应为：

```
<source src="bdg112412.webm" type='video/webm' /> 
```

对于这三种视频类型（mp4、web 和 ogv）中的每一种，您都有有效的视频文件吗？将 mp4 直接拖放到 IE9 中会发生什么？试试 Chrome 中的 webm 和 Firefox 中的 ogv。

如果您不确定您的视频文件是否有效，请尝试在[此处下载示例文件](http://camendesign.com/code/video_for_everybody/test.html)。（请参阅视频下方的“下载视频”链接）。

# asp.net-mvc - MVC3 应用程序中的登录页面 - 找不到登录功能

> ID：13549266
> 
> 赞同：0
> 
> 时间：2012-11-25T07:50:18.957
> 
> 标签：asp.net-mvc, login, forms-authentication, runtime-error

我正在尝试在 MVC 应用程序中创建自己的表单身份验证视图，但我的网站似乎找不到登录功能。我首先尝试创建一个regulr视图，并使用ajax调用该函数，但它不起作用，所以我尝试使用表单并提交如下：

```
<form method="post" action="~/Login/Login_btnClick">

<input type="submit" name="Login" value="Login" /> 
```

当然，我还在 web config 中声明了它的表单身份验证，并将登录页面设置为链接：

```
<authentication mode="Forms">
  <forms loginUrl="~/Login/Login" defaultUrl="~/Home/index" />
</authentication>
<authorization>
  <deny users="?" />
</authorization> 
```

我还使用了位置，因此可以找到我的 javascripts 和 css 文件。当我得到

> 加载资源失败：服务器响应状态为 400（错误请求）

错误，我尝试将 Controllers 文件夹也添加到位置：

```
<location path="Controllers">
<system.web>
  <authorization>
    <allow users="*"/>
  </authorization>
</system.web> 
```

但它仍然给我同样的错误....

知道什么可以解决我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:01:40.923

您应该创建一个相应的控制器操作来处理表单提交。例如，如果您有以下表格：

```
<form method="post" action="/Login/LogOn">
    <input type="submit" name="Login" value="Login" />
</form> 
```

那么你应该在你的控制器上创建一个`LogOn`动作：`Login`

```
[HttpPost]
public ActionResult LogOn()
{
    ...
} 
```

此外，您从 web.config 中显示的您禁用对该`Controllers`文件夹的访问的代码段也是绝对不必要的。在 ASP.NET MVC 控制器中编译，当您部署应用程序时，这样的文件夹根本不存在。

除了在 ASP.NET MVC 中的授权是由`[Authorize]`属性控制的，而不是在 web.config 中使用`<authorization>`标签。因此，例如，如果您想保护某个控制器操作仅对经过身份验证的用户可访问，您只需使用此属性装饰它：

```
[Authorize]
public ActionResult Index()
{
    ...    
} 
```

下面是[`some tutorials`](http://www.asp.net/mvc/overview/security)ASP.NET MVC 站点，它说明了如何在 MVC 应用程序中实现身份验证和授权。

此外，当您使用 Internet 模板创建新的 ASP.NET MVC 3 应用程序时，已经为您创建了一个 AccountController 以及相应的视图。您可以使用这个开箱即用的模板来更好地理解这些概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:27:12.097

谢谢，我得到了解决方案......

我应该做两件事： 1\. 改变

```
<deny users="?" /> 
```

至：

```
<allow users="?" /> 
```

1.  在我的表单中更改操作，因此它应该是：@Url.Action("MyLoginFunc", "MyLoginController")

# monomac - 使用 MonoMac 时如何实例化 NSDocument

> ID：13549267
> 
> 赞同：2
> 
> 时间：2012-11-25T07:51:13.230
> 
> 标签：monomac

使用 MonoMac，我有一个基于 NSDocument 的应用程序，但我需要在单击按钮时创建一个新的 NSDocument 对象。

例如。我在另一个窗口中我有一个 NSWindowController 我可以做

```
Controller c = new Controller ();
c.Window.MakeKeyAndOrderFront (this); 
```

从而导致加载绑定到控制器的窗口。

使用 NSDocument 我猜控制器是内置的？所以我期待类似的东西

```
MyNSDocument doc = new MyNSDocument ("Some Value ");
doc.Window.MakeKeyAndOrderFront (this); 
```

当然，这是行不通的。

附加信息，例如在应用程序中，如果您点击`Command + N`，则会加载一个新的文档窗口。这很酷，我基本上需要发生同样的事情，但是当单击按钮时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:04:55.827

使用“文件”/“新建”或在应用程序的共享文档控制器上`Control + N`调用，它是的 First Responder。`newDocument:``menu.xib`

要以编程方式执行相同操作，请使用`NSDocumentController.SharedDocumentController`获取应用程序的共享文档控制器，然后`NewDocument ()`对其调用（您可以作为发送者传递`null`）：

```
var controller = (NSDocumentController)NSDocumentController.SharedDocumentController;
controller.NewDocument (null); 
```

# android - ActionBarSherlock TabNavigation

> ID：13549269
> 
> 赞同：0
> 
> 时间：2012-11-25T07:51:29.657
> 
> 标签：android, actionbarsherlock

我已经使用 Sherlock Fragments 启动并运行了我的标签。所以我有两个标签和两个片段。现在我想要的是，当我单击其中一个片段中的按钮时，我希望打开另一个片段，但它应该位于包含原始片段的选项卡内。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:27:54.960

实际上嵌套`Fragments`是不可能的。我有一个类似的问题，但`Fragment`要显示的小而简单。所以我只是用`setVisibility()`as`LinearLayout.GONE`和`LinearLayout.VISIBLE`

在`Fragment`初始化时，我隐藏了第二个布局，当我需要显示另一个片段时，我隐藏了第一个布局并显示了第二个布局。它对我很有用！

# ruby-on-rails - Mongoid3/Moped：数据库=管理员命令={:ismaster=>1}

> ID：13549271
> 
> 赞同：4
> 
> 时间：2012-11-25T07:51:37.833
> 
> 标签：ruby-on-rails, mongodb, mongoid, moped, database

我已将我的 Rails 应用程序升级到 3.2.8 和 Mongoid 3/Moped。在开发中一切正常，在我的开发机器上同时设置为生产，并且`rails c`在我的生产设置上也可以正常工作。但是，该应用程序没有启动（部署在乘客身上）并且似乎只是超时，没有产生任何错误。我将 log_level 设置为在生产中调试，这就是我所看到的：

```
Creating scope :near. Overwriting existing method City.near.
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (5.8458ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (8.2316ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (16.2363ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (13.0076ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5557ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5068ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5004ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.7371ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.7002ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.8868ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.8172ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.0932ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (10.4055ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5655ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4858ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6346ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5333ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.8239ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5938ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4448ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4253ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (9.8593ms)
# ... this just carries on indefinitely. 
```

我该如何解决？（作为记录，我尝试使用的数据库不称为 admin。）

谢谢，

阿维沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:24:01.653

好吧，看起来Passenger 实际上是在旧的ruby 1.9.2 安装上运行的。将Passenger更新到ruby 1.9.3，重新编译nginx，然后它又可以正常工作了。

# php - 是否可以确定网络浏览器的终止事件？

> ID：13549273
> 
> 赞同：1
> 
> 时间：2012-11-25T07:51:43.820
> 
> 标签：php, html, jquery

我正在建立一个聊天室，我必须确定用户是否在线。因此，当用户登录时，我将他的状态更新为在线，当他注销时，我将他的状态更新为离线，但是当用户简单地关闭浏览器时，状态仍保持在线。

为了解决这个问题，我需要在浏览器终止时执行服务器端代码。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:53:34.697

我相信[这](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)就是您正在寻找的。

当用户关闭浏览器窗口时，`unload`会触发该事件。您可以在此事件上触发一个 ajax 请求，该请求将用户关闭他/她的窗口的信息发布到服务器。

```
window.onunload = function(){
    // make an ajax request that notifies the 
    // server that user has closed the window
} 
```

# visual-studio-2010 - 如何设置 Visual Studio 远程调试器以通过以太网？

> ID：13549274
> 
> 赞同：2
> 
> 时间：2012-11-25T07:51:46.470
> 
> 标签：visual-studio-2010, windows-8, remote-debugging, windows-rt

我想在 Windows RT 上远程调试应用程序（尽管这适用于任何远程调试，我猜），我不想在每次连接时打开我的 WiFi 连接或处理复杂的软件配置（防火墙等）。

我想也许通过在我的 Surface 和我的开发机器之间使用以太网连接，我可以在此基础上进行远程调试。在 Surface 上安装以太网 USB 加密狗似乎很容易，但我不知道如何让我的开发机器真正找到​​上面的 Surface 计算机。

我的设置很简单，开发机器连接到以太网电缆，连接到 USB 加密狗，连接到 Surface (Windows RT)。即使禁用 WiFi，远程调试器也无法找到被调试者。

我需要手动设置IP地址还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:59:06.680

> 我需要手动设置IP地址还是什么？

我就是这么想的。当您尝试从另一台机器 ping 一台机器时会发生什么？任何一台机器都运行 DHCP 服务器吗？如果没有，您可以运行 DHCP 服务器（可能在您的开发机器上）或设置静态 IP 地址。如果您需要将平板电脑连接到其他网络，一开始设置 DHCP 可能会更难，但会更方便。

对于测试，将两个设备连接到路由器可能会有所帮助，这样您就可以分别配置和测试远程调试。

# android - 如何将Android磁力计读数转换为世界坐标空间？

> ID：13549276
> 
> 赞同：2
> 
> 时间：2012-11-25T07:52:01.047
> 
> 标签：android, android-sensors, magnetometer

我正在 Android 传感器上编写一些程序，我对磁力计传感器的读数感到困惑。

磁力计报告**手机三个轴上**的磁场强度。我观察到在同一位置，如果手机的航向发生变化，磁读数会发生巨大变化。但是，在我的理解中，无论手机的放置姿势如何，特定位置的地球磁场都应该是相对稳定的。

所以，我的问题是，有没有办法将原始读数从 3 轴磁力计传感器转换到**世界坐标系**？加速度计和方向数据也可在手机上获得。如果是这样，我怀疑即使手机的航向发生变化，转换后的磁力也应该是相同的。

我参考了 Android 源代码，特别是 getOrientation() 函数和 getRotationMatrix() 函数。我希望从他们的代码实现中得到一些帮助。但我不是很明白。有人能解释一下这些函数的算法原理吗？

函数代码链接：http: [//www.netmite.com/android/mydroid/cupcake/frameworks/base/core/java/android/hardware/SensorManager.java](http://www.netmite.com/android/mydroid/cupcake/frameworks/base/core/java/android/hardware/SensorManager.java)

谢谢！我真的很急于解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:12:20.317

这是不可能的，因为设备不知道它在世界空间中的方向。

当然，可以通过传感器输入来猜测方向，这就是 getOrientation() 和 getRotationMatrix() 所做的。然而，在很长的时间尺度上，只有加速度（通过重力）和磁场的测量才能提供必要的信息。陀螺仪数据可用于在更短的时间内细化估计，但不能保证 getOrientation 使用它，并且可能该传感器甚至不存在于特定设备上。这意味着使用 getOrientation 进行反向转换将使用您想要更正的完全相同的数据，从而使其无用。

# objective-c - 你如何设置文本字段文本？

> ID：13549278
> 
> 赞同：-4
> 
> 时间：2012-11-25T07:52:58.427
> 
> 标签：objective-c, xcode, macos, nstextfield

我想知道您如何在 XCode Objective-C 中设置文本字段文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T07:56:02.330

```
[myTextField setStringValue: @"a string or an NSString object"]; 
```

# objective-c - 如何使用： - (void) saveErrorHandler:(void (^)(NSError *))errorCallback;

> ID：13549286
> 
> 赞同：0
> 
> 时间：2012-11-25T07:54:33.403
> 
> 标签：objective-c, ios, core-data, magicalrecord

我有一个来自 Magical Record 的功能，我正在尝试使用。但是我不明白如何使用错误处理程序部分

函数是： - (void) saveErrorHandler:(void (^)(NSError *))errorCallback;

我不明白“（void（^）（NSError *））errorCallback”部分。我知道这是一个标准的客观 c 问题。如何在我的代码中使用此函数和 errorCallback，以便提取错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:28:11.647

```
 [self saveErrorHandler:^(NSError * error) {
    //NSError code handler
}]; 
```

这就是您实现该功能的方式。

# actionscript-3 - actionscript 矩阵 rotate() 和 DisplayObject.rotation 属性

> ID：13549292
> 
> 赞同：1
> 
> 时间：2012-11-25T07:55:22.643
> 
> 标签：actionscript-3, flash

似乎将矩阵 rotate() 应用于显示对象与 DisplayObject.rotation 不同。我想要的是使用 matrix.rotate() 来获得与使用 rect.rotation = 45 相同的结果。但实际结果不一样。

代码示例：

```
public class Demo extends Sprite {
    public function Demo() {
       testRotation();
    }

    private function testRotation():void {
        var rect:Shape = new Shape();
        rect.graphics.beginFill(0xff0000,1);
        rect.graphics.beginFill(0xff0000, 1);
        rect.graphics.drawRect(0,0,100,100);
        rect.graphics.endFill();
        rect.x = 100;
        rect.y = 100;
        addChild(rect);
        var matrix:Matrix = new Matrix();
        trace(matrix);
        matrix.rotate(Math.PI*45/180);
        rect.transform.matrix = matrix;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:19:50.617

原因是*旋转*方法围绕左上角（0,0）旋转坐标，如图所示。![在此处输入图像描述](../Images/448c45dafbce6e17c8d3286e5faa4a4c.png)

解决方案：

```
var matrix:Matrix = new Matrix();
matrix.translate(-50,-50)// Translate to center of square
matrix.rotate(Math*45/180); //rotate 45 degrees
matrix.translate(rect.x+150, rect.y+150)
rect.transform.matrix = matrix 
```

# python - 获取数据包中的所有层

> ID：13549294
> 
> 赞同：10
> 
> 时间：2012-11-25T07:55:27.243
> 
> 标签：python, scapy

如何获取 scapy 中所有图层的列表？例如：`Ether/IP/UDP/DNS`或`Ether/IP/TCP/HTTP`。我唯一能想到的就是做一个`packet.summary()`并解析输出，这看起来很粗糙。我认为应该有一个内置的方法，但在文档中找不到任何方法。有什么建议么？

我要做的是遍历用户给出的特定协议的所有字段并显示其值。

更新：我正在寻找的东西可以在wireshark中看到：打开任何捕获，选择一个数据包，然后在“框架”菜单中，可以看到 `Protocols in frame: eth:ip:udp:data` 这正是我在Scapy中寻找的。我希望我现在更清楚了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T10:11:37.903

每个附加层都是数据包的有效负载，因此您可以迭代

```
def expand(x):
    yield x
    while x.payload:
        x = x.payload
        yield x 
```

进而

```
res = list(expand(packet)) 
```

我希望这就是你的意思。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-25T12:24:11.197

循环使用`packet.getLayer(<id>)`。例如：

```
from scapy.all import Ether

def get_packet_layers(packet):
    counter = 0
    while True:
        layer = packet.getlayer(counter)
        if layer is None:
            break

        yield layer
        counter += 1

packet = 'ffffffffffff00ffd59c64320806000108000604000100ffd59c6432000000000000000000000a000001'.decode('hex')
packet = Ether(_pkt=packet)

for layer in get_packet_layers(packet):
    print (layer.name) 
```

输出

```
Ethernet
ARP 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T11:55:22.123

我查看了[源代码](http://hg.secdev.org/scapy/file/7621f33286b9/scapy/packet.py)并没有找到这样的方法，所以我稍微修改了cronos的代码，它看起来就像你现在想要的那样。

您可以为 scapy 编写错误报告并建议一种新方法。

```
>>> ip = Ether()/IP()/TCP()
>>> ip
<Ether  type=0x800 |<IP  frag=0 proto=tcp |<TCP  |>>>
>>> ip.name
'Ethernet'
>>> def expand(x):
...     yield x.name
...     while x.payload:
...         x = x.payload
...         yield x.name
... 
>>> list(expand(ip))
['Ethernet', 'IP', 'TCP']
>>> l=list(expand(ip))
>>> ":".join(l)
'Ethernet:IP:TCP'
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-03T10:55:24.513

我`packet.payload.layers()`得到了数据包的层类列表。然后我可以访问数据包层，例如：

```
 def sniff_callback(packet):
    print(packet.payload.layers())  # display all layers
    first_layer = packet[packet.payload.layers()[0]]  # access first layer of the list 
```

# c++ - 比较两个 char* 是否相等

> ID：13549299
> 
> 赞同：15
> 
> 时间：2012-11-25T07:56:12.080
> 
> 标签：c++, c-strings

> **可能重复：**
> [比较两个 C 样式字符串的正确函数是什么？](https://stackoverflow.com/questions/9122000/what-is-the-proper-function-for-comparing-two-c-style-strings)

我的匹配条件不起作用！有人可以建议如何与 C 风格的字符串进行比较吗？

```
void saveData(string line, char* data){
    char *testString = new char[800];
    char *stpr;
    int i=0;
    bool isData=false;
    char *com = data;
    strcpy(testString,line.c_str());
        stpr = strtok(testString, ",");
        while (stpr != NULL) {
            string temp = stpr;
            cout << temp << " ===== " << data << endl; 
```

即使`temp`和`data`匹配，以下条件也不起作用：

```
if (stpr==data) {
  isData = true; 
} 
```

不确定这是否有帮助。该`SaveData()`函数从以下函数调用：

```
void readFile(char* str){
    string c="", line, fileName="result.txt", data(str);
        ifstream inFile;
    inFile.open(fileName.c_str());
    resultlist.clear();

    if(inFile.good()){    
        while(!inFile.eof()){
            getline(inFile, line);
            if(line.find(data)!=string::npos){
                cout << line << endl;
            }
            saveData(line, str);
        }
        inFile.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-25T07:58:37.510

由于`stpr`和`data`都是 C 字符串，因此您需要使用[`strcmp()`](http://linux.die.net/man/3/strcmp)：

```
#include <string.h>
...
if (strcmp(stpr, data) == 0) {
    // strings are equal
    ...
} else {
    // strings are NOT equal
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T07:59:20.083

这种情况不会起作用，因为`==`运算符没有为`char*`.

```
if(stpr==data)
{ 
  isData = true; 
} 
```

改用这个。

```
if (strcmp(stpr, data) == 0)
{
  isData = true ;
} 
```

[`strcmp()`](http://www.cplusplus.com/reference/cstring/strcmp/)`0`如果两个 cstring 相等则返回。确保您匹配的两个 cstrings 都拥有一些合法的内存并且在最后以 null 终止。

编辑：

为避免任何麻烦和错误，建议不要使用 raw`char*`并改用 use `std::string`。所以最好让它们成为字符串并比较它们。

```
std::string data ;   //passed or declared as string
std::string stpr ;
.....
//Do some work.

if (stpr == data)
   //do work here 
```

这种方法可以为您省去很多麻烦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T08:00:06.493

您正在尝试比较两个 char*。您可以尝试使用`strcmp(stpr, data)`检查条件。

更好地使用它

```
 if(strcmp(stpr, data)==0){..} 
```

# html - 任何人都可以在移动设备上看到这个 html 有什么问题吗？

> ID：13549302
> 
> 赞同：2
> 
> 时间：2012-11-25T07:56:27.427
> 
> 标签：html, css, xhtml

[http://home.comcast.net/~maria.pettit/healthmutt/](http://home.comcast.net/~maria.pettit/healthmutt/)

它在最常见的浏览器（Chrome、Firefox、Safari 和 IE）中看起来不错，在 GN、GS3 和 iPad 上的 Chrome 中看起来不错，但主要内容文本在默认的 Android 浏览器上奇怪地左浮动（除了那一张右浮动图像）。

它在默认的 Android 浏览器的内容框右侧创建了大约 25% 的空白，这根本没有任何意义。另外，为什么那张图片（Healthmutt05edit.png）可以正确浮动？文本应该在那里。

我已经尝试了一切以使其正常工作。非常感谢任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:52:22.740

在我的 Android 手机中，如果我缩小页面，它会自行重新排列它应该看起来的样子。

另外，我建议将该文本放在一个段落中`<p>`或将其 div 设置为 float:left。这样文本就不必假设它应该去哪里，而是你可以通过 css 告诉它。

# android - 如何阻止未接来电通知android

> ID：13549305
> 
> 赞同：0
> 
> 时间：2012-11-25T07:56:49.537
> 
> 标签：android

我开发了一个应用程序，可以阻止用户提供的列表中的呼叫和短信。但是有时会发生一个小问题，尤其是在双卡手机上。

问题 ：：

*   打电话一两秒钟，然后铃声就断开了。我不知道为什么延迟来了，这在双卡手机中很常见，但对于 One VI “有时”并不总是如此。

*   即使通话被及时阻止，显示屏也会打开并显示未接来电通知。我不想激活屏幕。（这发生在所有集合中）

我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:30:00.097

AFAIK 您至少在 Android 2.3+ 上无法阻止未接来电通知。在较低版本上，您可以使用[此代码](https://sites.google.com/site/t2k269group/development-diary/reset-missed-calls-notification)。为此，您需要 MODIFY_PHONE_STATE 权限。

# javascript - 如果选中收音机，则禁用选择表单

> ID：13549307
> 
> 赞同：4
> 
> 时间：2012-11-25T07:57:21.787
> 
> 标签：javascript, jquery, forms, select, radio

如果选择了单选按钮，如何禁用选择表单下拉菜单？

如果用户选择#no 单选按钮，我希望禁用#preference 表单，如果用户选择#yes 或#maybe，则再次启用它。

这是我的表单代码 -

```
<form name="xmas" id="xmas" action="send_mail.php" method="post">
            <input type="radio" name="choice" value="Yes" id="yes"/><label for="yes">Yes - I would like to take up the offer</label>
            <input type="radio" name="choice" value="No" id="no"/><label for="no">No - I'm not ready to order yet</label>
            <input type="radio" name="choice" value="Maybe" id="maybe"/><label for="maybe">Maybe - I'm not sure, would you please give me a call</label><br />
            <div class="secondlineform">
                <input type="text" name="name" class="textfield" value="Name" onfocus="if(this.value=this.defaultValue){this.value=''}; return false;"/>
                <input type="text" name="email" class="textfield" value="Email" onfocus="if(this.value=this.defaultValue){this.value=''}; return false;"/>
                <input type="text" name="company" class="textfield" value="Company" onfocus="if(this.value=this.defaultValue){this.value=''}; return false;"/>
                <select class="dropselect" name="preference" label="Preference" id="preference">
                    <option selected="selected" disabled="disabled" value="Preference">Preference</option>
                    <option value="Alcohol Package">Alcohol Package</option>
                    <option value="Gift Card Package">Gift Card Package</option>
                </select>
                <input type="submit" value="" name="submit" id="submit" class="submit"/>

            </div>
        </form> 
```

这是我的脚本代码 -

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

​​​

```
 var update_select = function () {
    if ($('#no').is(':checked')) {
    $('#preference').attr('disabled', "disabled");
}
else {
    $("#preference").removeAttr("disabled");
}

};

$(update_select);
$('#no').change(update_select);

</script> 
```

非常感谢任何答案！我研究这个问题已经很久了，我发现的所有解决方案似乎都不能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:05:20.407

您正在为`No`收音机添加更改事件，将其更改为：

```
$("input[name='choice']").change(update_select); 
```

演示:: [jsFiddle](http://jsfiddle.net/A57fE/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T08:10:49.530

```
$('input[type=radio]').change(update_select);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T08:06:06.443

您需要将该`update_select`功能应用于单选按钮的其余部分，如下所示

```
var update_select = function () {
$('#preference').attr('disabled', $('#no').is(':checked'));
};

$('#no').change(update_select);
$('#yes').change(update_select);
$('#maybe').change(update_select); 
```

这是小提琴：http: [//jsfiddle.net/QXkhM/](http://jsfiddle.net/QXkhM/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T08:12:40.393

用 ul 包裹您的单选按钮列表并给它一个 ID。

例如：

```
 <ul id="offer">
        <input type="radio" name="choice"  value="Yes" id="yes"/><label for="yes">Yes - I would like to take up the offer</label>
        <input type="radio" name="choice"  value="No" id="no"/><label for="no">No - I'm not ready to order yet</label>
        <input type="radio" name="choice"  value="Maybe" id="maybe"/><label for="maybe">Maybe - I'm not sure, would you please give me a cal
        l</label><br />
        </ul>

var update_select = function () {
    if ($('#no').is(':checked')) {
        $('#preference').attr('disabled', "disabled");
    }
    else {
        $("#preference").removeAttr("disabled");
    }
};
$(update_select);
$('#offer').change(update_select); 
```

它会起作用

# c# - request_oauth 使用 Twitter (C#)

> ID：13549318
> 
> 赞同：0
> 
> 时间：2012-11-25T07:59:06.570
> 
> 标签：c#, oauth, twitter, twitter-oauth

我正在使用以下代码来尝试获取 oauth_token 和 oauth_secret。

```
 string url = "https://api.twitter.com/oauth/request_token";
        string base_format = "oauth_callback={0}&oauth_consumer_key={1}&oauth_nonce={2}&oauth_signature_method={3}&oauth_timestamp={4}&oauth_version={5}";
        string base_string = String.Format(base_format, oauth_callback, oauth_consumer_key, oauth_nonce, oauth_signature_method, oauth_timestamp, oauth_version);
        base_string = String.Concat("POST&", Uri.EscapeDataString(url), Uri.EscapeDataString(base_string));

        var compositeKey = string.Concat(Uri.EscapeDataString(oauth_consumer_secret),
                    "&");

        string oauth_signature;
        using (HMACSHA1 hasher = new HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey)))
        {
            oauth_signature = Convert.ToBase64String(
                hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(base_string)));
        }
        string header_format = "OAuth oauth_nonce=\"{0}\", oauth_callback=\"{1}\", oauth_signature_method=\"{2}\", oauth_timestamp=\"{3}\", oauth_consumer_key=\"{4}\", oauth_signature=\"{5}\", oauth_version=\"{6}\"";
        string header = string.Format(header_format, Uri.EscapeDataString(oauth_nonce), Uri.EscapeDataString(oauth_callback), Uri.EscapeDataString(oauth_signature_method), Uri.EscapeDataString(oauth_timestamp), Uri.EscapeDataString(oauth_consumer_key), Uri.EscapeDataString(oauth_signature), Uri.EscapeDataString(oauth_version));

        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
        req.Headers.Add("Authorization", header);
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";

        WebResponse response = req.GetResponse(); 
```

它还给我一个 401。我看不出这里有什么问题。需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:04:28.287

这将使您的生活变得更加轻松。我以前用过它，它会照顾一切。 [http://www.twitterizer.net](http://www.twitterizer.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T22:26:13.913

您需要将 OAuthTokenSecret 添加到您的复合密钥中。

**工作示例**

```
public string UpdateStatus(string status)
{
    var oauth_version = "1.0";
    var oauth_signature_method = "HMAC-SHA1";

    // unique request details
    var oauth_nonce = Convert.ToBase64String(new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
    var oauth_timestamp = Convert.ToInt64(
        (DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc))
            .TotalSeconds).ToString();

    var resource_url = "https://api.twitter.com/1.1/statuses/update.json";

    // create oauth signature
    var baseString = string.Format(
        "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}&" +
        "oauth_timestamp={3}&oauth_token={4}&oauth_version={5}&status={6}",
        config.OAuthConsumerKey,
        oauth_nonce,
        oauth_signature_method,
        oauth_timestamp,
        config.OAuthToken,
        oauth_version,
        Uri.EscapeDataString(status));

    baseString = string.Concat("POST&", Uri.EscapeDataString(resource_url), "&", Uri.EscapeDataString(baseString));

    var compositeKey = string.Concat(Uri.EscapeDataString(config.OAuthConsumerSecret),
    "&", Uri.EscapeDataString(config.OAuthTokenSecret));

    string oauth_signature;
    using (var hasher = new HMACSHA1(Encoding.ASCII.GetBytes(compositeKey)))
    {
        oauth_signature = Convert.ToBase64String(hasher.ComputeHash(Encoding.ASCII.GetBytes(baseString)));
    }

    // create the request header
    var authHeader = string.Format(
        "OAuth oauth_consumer_key=\"{0}\", oauth_nonce=\"{1}\"," +
        " oauth_signature=\"{2}\", oauth_signature_method=\"{3}\", " +
        "oauth_timestamp=\"{4}\",  oauth_token=\"{5}\", " +
        "oauth_version=\"{6}\"",
        Uri.EscapeDataString(config.OAuthConsumerKey),
        Uri.EscapeDataString(oauth_nonce),
        Uri.EscapeDataString(oauth_signature),
        Uri.EscapeDataString(oauth_signature_method),
        Uri.EscapeDataString(oauth_timestamp),
        Uri.EscapeDataString(config.OAuthToken),
        Uri.EscapeDataString(oauth_version)
    );

    var postBody = "status=" + Uri.EscapeDataString(status);
    ServicePointManager.Expect100Continue = false;

    try
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url);
        request.Headers.Add("Authorization", authHeader);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        using (Stream stream = request.GetRequestStream())
        {
            byte[] content = Encoding.ASCII.GetBytes(postBody);
            stream.Write(content, 0, content.Length);
        }

        WebResponse response = request.GetResponse();
        Stream reqStream = response.GetResponseStream();
        StreamReader reqStreamReader = new StreamReader(reqStream);
        return reqStreamReader.ReadToEnd();
    }
    catch (Exception ex)
    {
        return ex + ":\n" + ex.Message;
    }
} 
```

# asp.net - 使用 ASP.NET 网站中的 Excel 上传功能上传 SQL 数据库中的数据

> ID：13549320
> 
> 赞同：0
> 
> 时间：2012-11-25T07:59:16.213
> 
> 标签：asp.net, file-upload

我想在我的网站（基于.net）中创建 excel 上传功能，用户可以使用上传/浏览按钮以特定的 excel 格式上传一些数据。此数据将插入后端 SQL 数据库。如果数据格式不正确，则应抛出错误消息。我做了一些研究，但找不到正确的解决方案。任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:13:57.683

[在这里](http://www.aspsnippets.com/Articles/Read-and-Import-Excel-Sheet-into-SQL-Server-Database-in-ASP.Net.aspx)有一个很好的解决方案。它使我可以选择要在 .xls 和 .xlsx 格式的 excel 书中上传哪个特定工作表。

# php - PHP中的资源类型

> ID：13549328
> 
> 赞同：1
> 
> 时间：2012-11-25T08:00:12.650
> 
> 标签：php, resources

> **可能重复：**
> [对象的 var_dump 中对象（someClass）旁边的 #<some-number> 是什么？我有一个推断。我对吗？](https://stackoverflow.com/questions/8787893/what-is-some-number-next-to-objectsomeclass-in-var-dump-of-an-object-i-ha)

我了解某些函数返回资源 id，例如 PHP 中的 #123，例如`mysql_query`.

我的问题是为什么 object 有这个数字，它的用途是什么？它也是资源ID吗

```
$obj = new MyClassName();
var_dump($obj);

output: object(MyClassName)#324 (0) 
```

#324 在这种情况下是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:14:38.273

Id with reference 用于跟踪资源的唯一性，PHP 每次生成新资源时都会创建唯一资源。当您的资源使用 unset() 函数释放时，该特定 id 会被破坏，因此不要使用此 id 进行引用，因为它每次都会生成新的 id。

# apache-flex - 边界可见性控制

> ID：13549330
> 
> 赞同：2
> 
> 时间：2012-11-25T08:01:15.790
> 
> 标签：apache-flex

我想知道我是否可以控制画布的边框可见性。和其他组件。

我的意思是我可以在特定位置启用边框并在其他位置禁用它。

在我的任务中，我想显示画布周围的边框，但它们之间的交叉点除外

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:01:09.580

如果您使用 flex 4 和边界容器，您可以通过将属性“borderVisible”设置为 true 或 false 来简单地实现它。如果您使用的是 Flex 3 和画布，则没有金子弹，但您始终可以对其进行蒙皮或创建自己的自定义组件，以便将来使用它们。

# php - php应用文件存储结构

> ID：13549334
> 
> 赞同：0
> 
> 时间：2012-11-25T08:01:41.530
> 
> 标签：php, file-upload

我正在做一个网络项目，我为每个产品创建了几种尺寸的图像，并将它们存储在一个名为 storage 的目录中，如缩略图的 TH 或大型的 LG 前缀名称，我的问题是它是优化方法吗？我的朋友建议我将它们存储到几个目录中，例如：/storage/thumbnail//storage/large/，我对此感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:15:40.760

在受尊重的文件夹中根据它们的类型分离图像是好的。它将帮助您将来快速获取信息，而无需编写一些代码行来获得相同的信息。

例如：如果您想知道，您拥有的缩略图的总大小是多少？

此外，它将提供一个整洁干净的文件结构，避免混淆或混乱。

# javascript - 语法 !function() { ... } 是什么意思？

> ID：13549336
> 
> 赞同：5
> 
> 时间：2012-11-25T08:01:50.843
> 
> 标签：javascript

[我在简单、伟大、美妙和强大的库knockoutjs](http://knockoutjs.com)中找到了这个语法：

```
!function(factory) { ... } 
```

声明前的非符号 ( `!`)是什么意思`function`？

更新：源代码不再包含这个确切的语法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T08:03:11.153

运算符的`!`行为正常，否定表达式。在这种情况下，它用于强制函数是函数表达式而不是函数语句。由于`!`运算符必须应用于表达式（将其应用于语句没有意义，因为语句没有值），因此函数将被解释为表达式。

这样就可以立即执行。

```
function(){
    alert("foo");
}(); // error since this function is a statement, 
     // it doesn't return a function to execute

!function(){
    alert("foo");
}(); // This works, because we are executing the result of the expression
// We then negate the result. It is equivalent to:

!(function(){
    alert("foo");
}());

// A more popular way to achieve the same result is:
(function(){
    alert("foo");
})(); 
```

# c++ - C++ 未定义引用（静态成员）

> ID：13549345
> 
> 赞同：3
> 
> 时间：2012-11-25T08:04:07.773
> 
> 标签：c++, mutex, static-methods, static-members

> **可能重复：**
> [C++：对静态类成员的未定义引用](https://stackoverflow.com/questions/272900/c-undefined-reference-to-static-class-member)

记录器.h：

```
class Logger {

private:
    Logger();
    static void log(const string& tag, const string& msg, int level);
    static Mutex mutex;

public:
    static void fatal(const string&, const string&);
    static void error(const string&, const string&);
    static void warn(const string&, const string&);
    static void debug(const string&, const string&);
    static void info(const string&, const string&);
}; 
```

记录器.cpp：

```
#include "Logger.h"
#include <sstream>
ofstream Logger::archivoLog;

void Logger::warn(const string& tag, const string& msg){
    Logger::mutex.lock();
    log(tag, msg, LOG_WARN);
    Logger::mutex.unlock();
} 
```

编译时，我收到此错误：

```
other/Logger.o: In function `Logger::warn(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
Logger.cpp:(.text+0x9): undefined reference to `Logger::mutex'
Logger.cpp:(.text+0x3b): undefined reference to `Logger::mutex' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T08:11:48.147

当您在 C++ 中的类声明中使用静态成员时，您还需要在源文件中定义它，因此在您的情况下，您需要添加`logger.cpp`：

```
Mutex Logger::mutex; // explicit intiialization might be needed 
```

**这是为什么？**这是因为在 C++ 中，与 C 类似，您必须“告诉”编译器将实际变量放在哪个编译单元中。头文件中的声明只是一个声明（与函数声明相同）。另请注意，如果将实际变量放在头文件中，则会得到不同的链接错误。（因为该变量的多个副本将被放置在包括该头文件在内的任何编译单元中）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T08:10:49.217

需要定义静态成员，包括变量。所以在你的 cpp 文件的某个地方，添加这个：

```
Mutex Logger::mutex; 
```

# java - Java 同步方法

> ID：13549346
> 
> 赞同：1
> 
> 时间：2012-11-25T08:04:10.533
> 
> 标签：java, multithreading, synchronization

我有许多共享变量 x,y,z，所有这些都可以在两个不同线程中运行的两种不同方法中修改。（比如线程 1 中的方法 1 和线程 2 中的方法 2）。如果我将这两个方法声明为 synchronized ，是否保证变量 x,y 和 z 的一致性。或者我应该单独对每个变量使用锁定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:09:08.500

是的，您的方法将保证一致性，假设这些变量都是私有的并且在两个同步方法之外不被访问（读取或写入）。

请注意，如果您在同步块之外读取这些变量，那么您可能会得到不一致的结果：

```
class Foo {
    private int x;

    public synchronized void foo() {
        x = 1;
    }

    public synchronized void bar() {
        x = 2;
    }

    public boolean baz() {
        int a = x;
        int b = x;
        // Unsafe! x could have been modified by another thread between the two reads
        // That means this method could sometimes return false
        return a == b;
    }
} 
```

编辑：更新以解决您对静态变量的评论。

每个类都应该拥有自己的数据。如果类`A`允许直接访问变量（通过将其公开），那么它不拥有自己的数据，并且很难强制执行线程安全。

如果你这样做：

```
class A {
    private static int whatever;

    public static synchronized int getWhatever() {
        return whatever;
    }

    public static synchronized void setWhatever(int newWhatever) {
        whatever = newWhatever;
    }
} 
```

那么你会没事的。

请记住，这`synchronized`会对单个对象强制执行互斥锁。对于同步方法，它是`this`（或静态方法的 Class 对象）。其他对象上的同步块不会干扰。

```
class A {
    public synchronized void doSomething() {...}
}
class B {
    public synchronized void doSomethingElse() {...}
} 
```

调用`doSomething`不会等待调用，`doSomethingElse`因为它们在不同的对象上同步：在这种情况下，相关的实例`A`和`B`. `doSomething`同样，对不同实例的两次调用`A`也不会干扰。

我强烈建议您看看[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)。这是一本很好的书，它解释了 Java 线程和内存模型的所有微妙之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T08:10:09.717

是的，它将是一致的。

> 同步方法在执行之前获取监视器（第 17.1 节）。对于类（静态）方法，使用与方法类的 Class 对象关联的监视器。对于实例方法，使用与 this（调用该方法的对象）关联的监视器。

看看这个[链接](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6)

**注意：-** *你必须小心的一点（一些程序员通常陷入这个陷阱）是同步的静态方法和同步的非静态方法之间没有联系*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T08:10:48.660

当您同步方法时：

1.  如果 method 是`static`，将在`class`对象上获取锁
2.  如果 method 是`non-static`，则将对该`instance`对象进行锁定。

只要锁一次只被一个线程占用，是的，做你想做的事情是一致且安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T08:17:00.400

这是主观的。行为取决于您实例化线程的方式。如果两个线程在包含这些方法的类的同一实例上调用同步化方法，它们将阻塞。如果每个线程实例化一个包含方法的类的新对象，它们将不会阻塞，因为在该类的两个不同实例上会有两个锁。

# c# - 如何保持以编程方式进行的设计时属性更改？

> ID：13549351
> 
> 赞同：2
> 
> 时间：2012-11-25T08:04:45.207
> 
> 标签：c#, .net, custom-controls

我有一个自定义控件，我添加了一个`Id`字符串属性。

当控件放置在窗体上时，我希望构造函数将它设置为`Guid.NewGuid().ToString()`，但前提是它之前没有设置。

当我从设计器手动编辑此属性时，它会在文件中添加一行代码`Designer.cs`。我怎样才能以编程方式做到这一点？
具体来说，如何从自定义控件中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:42:48.227

我创建了符合您要求的示例用户控件。在这种情况下，是从 Label 继承的“MyLabel”。

首先创建包含 MyLabel 类的单独库，这是该类的代码：

```
public class MyLabel: Label
{
    public string ID { get; set; }

    protected override void OnCreateControl()
    {
        base.OnCreateControl();
        if (this.DesignMode && string.IsNullOrEmpty(this.ID))
        {
            this.ID = Guid.NewGuid().ToString();
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        this.Text = this.ID;
    }
} 
```

如您所见，如果控件处于设计模式并且尚未设置任何值，则我的控件具有填充的 ID 属性。检查设计模式很重要，因此如果您重新打开项目，值不会改变。

OnPaint 事件的覆盖只是为了实时查看实际的 ID 值，这不是必需的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T08:35:25.253

我相信你需要的是`Properties.Settings`. 请参阅[MSDN 页面](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)。

您可以在设计期间将这些设置为默认值，或在运行时加载和保存。
示例：使用设计器，创建一个新的用户范围`string[]`命名 ID。然后在你的构造函数中，像这样

```
string ID = "";
if (Properties.Settings.Default.IDs!=null && Properties.Settings.Default.IDs.Length>0) {
   ID = Properties.Settings.Default.IDs[0];
}
else {
   ID = "random";
   Properties.Settings.Default.IDs = new string[1];
   Properties.Settings.Default.IDs[0] = ID;
   Properties.Settings.Default.Save();
} 
```

如果有，这将使用存储数组的第一个元素，如果没有，它将创建一个新字符串，并将其持久化（因此下次运行程序时将从设置中读取它）。

# erlang - 如何在氮气中调用erlang函数？

> ID：13549354
> 
> 赞同：2
> 
> 时间：2012-11-25T08:04:52.940
> 
> 标签：erlang, nitrogen

```
-module (blah).
-compile(export_all).
-include_lib("nitrogen_core/include/wf.hrl").

main() -> #template { file="./site/templates/bare.html" }.

title() -> "Welcome to Nitrogen".

body() ->
#button { id=calcButton, text="Click"}.

imafunction(Param1, Param2) -> %something here%. 
```

如何通过单击按钮调用 imafunction(Param1, Param2) 函数及其参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T09:46:47.560

您将希望通过回发来执行此操作。

最简单的方法是更改​​按钮以包含`postback`属性：

```
#button { id=calcButton, text="Click", postback=do_click}. 
```

`event/1`然后你必须用一个函数来处理回发：

```
event(do_click) -> 
    imafunction("first val","second val"). 
```

但是，如果您想将值与某种动态数据一起传递，您可以采用以下两种方式之一。

**1）**您可以将其作为回发的一部分传递，并在回发值上进行模式匹配。

```
#button { id=calcButton, text="Click", postback={do_something,1,2} } 
```

然后在回发上进行模式匹配

```
%% Notice how this is matching the tuple in the postback
event({do_something,Param1,Param2}) ->
    imafunction(Param1,Param2). 
```

**或者，2）**您可以将值作为输入传递（例如文本框或下拉框）

首先，添加要发送的参数字段，并确保您的按钮进行回发

```
body() ->
    [
        #label{text="Param 1"},
        #textbox{id=param1},
        #br{},
        #label{text="Param 2"},
        #textbox{id=param2},
        #br{},
        #button{ id=calcButton, text="Click", postback=do_other_thing}
   ]. 
```

然后在您的`event/1`函数中，我们将检索值并调用您的函数。

```
event(do_other_thing) ->
    Param1 = wf:q(param1),
    Param2 = wf:q(param2),
    imafunction(Param1,Param2). 
```

您可以在以下位置阅读有关 Nitrogen 回发和提交数据的更多信息

*   [氮气回传演示](http://nitrogenproject.com/demos/postback)
*   [关于请求和响应的 Nitrogen API 文档](http://nitrogenproject.com/doc/api.html#sec-10)

# javascript - 打开模式时页面滚动到顶部问题

> ID：13549359
> 
> 赞同：3
> 
> 时间：2012-11-25T08:07:02.773
> 
> 标签：javascript, html, css, modal-dialog

我对我编程的模式有疑问。当它打开或关闭时，它会转到页面顶部。我希望页面背景准确地停留在打开的位置而不移动。我用 JavaScript 打开它并尝试过

```
$("html,body").css("overflow","hidden"); 
```

但它不起作用。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:44:02.977

弄清楚了（尽管不确定这是否是最好的方法）。如果有的话，我会替换为更好的

`<a href="#" onclick="myFunction('function')">Open Modal</a>`

选择。

`<a href="javascript:void(0)" onclick="myFunction('function')">Open Modal</a>`

# php - 在函数中访问全局变量

> ID：13549371
> 
> 赞同：0
> 
> 时间：2012-11-25T08:09:52.253
> 
> 标签：php, global-variables, behavior

我刚刚遇到一段代码，它可以通过使其成为全局变量来访问变量，并开始思考它是否与其他语言方法/行为不同

```
<?php
   $a1 = "WILLIAM";
   $a2 = "henry";
   $a3 = "gatES";
   echo $a1 . " " . $a2 . " " . $a3 . "<br />";
   fix_names();
   echo $a1 . " " . $a2 . " " . $a3;
   function fix_names()
   {
      global $a1; $a1 = ucfirst(strtolower($a1));
      global $a2; $a2 = ucfirst(strtolower($a2));
      global $a3; $a3 = ucfirst(strtolower($a3)); 
   }
 ?> 
```

代码访问在函数外部定义的变量，并使它们在函数内部成为全局变量。这在其他语言中是不可能的。例如，我们在 C 的全局空间中编写变量并使其成为全局变量，因此我们可以在函数内部访问它们。因此，我们首先将它们设为全局，然后在任何地方访问它们。在上面的代码中，我们首先在函数内部访问它们（**我也不明白当它们没有作为参数传递时我们如何访问函数内部的 $a1、$a2、$a3**），然后将它们设为全局。这是因为 PHP 处理器的任何不同行为。

此外，我不明白我们如何使变量在其声明之外的其他地方成为全局变量。

抱歉，这可能不是一个确切地询问代码在哪里中断的问题，但我相信理解为什么代码以特定方式编写以及为什么它以特定方式运行也很重要。

**（希望）用清晰的语言表达**

我想知道：在函数内部，当我们创建一个与外部范围中已经存在的变量同名的全局变量时，它实际上是全局化外部范围中的变量而不是创建一个新的全局变量（具有空值）。是这样吗？如果是，那与其他语言没有什么不同吗？那么，这种不同的行为背后有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:26:50.180

在 php 中，函数有自己的作用域，因此如果您在函数之外的其他地方声明变量，它将在函数内部不可见。要在函数中使用它们，您需要将其声明为全局的。通常，我使用[注册表](http://martinfowler.com/eaaCatalog/registry.html)模式来不污染全局范围并存储我稍后将使用的所有全局对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:23:00.827

考虑使用会话。您可以像这样在文件 file1.php 中定义变量：

```
session_start();    
$_SESSION['a'] = 'William'; 
```

然后您可以访问文件 file2.php 中的任何会话变量，如下所示：

回声 $_SESSION['a'];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T08:23:55.740

根据手册 - h​​ttp: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

> 变量的范围是定义它的上下文。大多数情况下，所有 PHP 变量都只有一个作用域。这个单一范围也涵盖了包含和必需的文件。
> ...
> 但是，在用户定义的函数中，引入了本地函数范围。默认情况下，函数内部使用的任何变量都仅限于本地函数范围。
> ...
> 您可能会注意到，这与 C 语言有点不同，因为 C 中的全局变量自动可用于函数，除非被局部定义特别覆盖。这可能会导致一些问题，因为人们可能会无意中更改全局变量。在 PHP 中，如果要在函数中使用全局变量，则必须在函数中声明它们为全局变量。

这使您可以`$var`在函数中使用相同的名称，而无需重新分配值-

```
$var = 'string';

function test(){
$var = 'new string';
return $var;
}
echo $var;  // echo's - string
test();     // echo's - new string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-17T08:39:07.773

请找到一篇关于 php 中的全局变量的好文章 - 它将告诉您 PHP 语言中存在的各种全局变量以及如何使用和访问这些变量及其用途。

参考：[https ://www.w3elearners.com/php/global-variables/](https://www.w3elearners.com/php/global-variables/)

# php - Apache 设置特定的 PHP 二进制文件

> ID：13549373
> 
> 赞同：3
> 
> 时间：2012-11-25T08:10:07.470
> 
> 标签：php, apache

我用谷歌搜索了这个，发现很多点击似乎与我要求的相同，但结果并非如此。

我安装了 2 个不同版本的 PHP，我想准确指定 apache 启动时使用的 php 二进制文件。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:32:18.357

这是一个示例，表明应该使用 5.3 版本以及到 php.ini 的路由。将以下行添加到 .htaccess：

```
AddHandler application/x-httpd-php53 .php
SuPHP_ConfigPath /PathTo/DirWithPHP.ini 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:41:37.387

就个人而言，我有一台 php 作为 cgi 运行的机器。我只保留多个单独的安装。Apache 寻找`/ws/php`二进制文件

```
/ws/php
/ws/php5.3
/ws/php5.4
/ws/php5.5 
```

切换版本是一个简单的文件夹重命名。

还有其他方法，但这很有效并且非常简单。

# php - php中的资源是外部的

> ID：13549375
> 
> 赞同：0
> 
> 时间：2012-11-25T08:10:11.013
> 
> 标签：php

来自[资源类型的 PHP 文档](http://www.php.net/manual/en/language.types.resource.php)

> 资源是一个特殊的变量，持有**对外部** 资源的引用。

多年来我一直忽略的声明。`mysql_*`等`curl_*`。

为什么它们被称为外部？是因为它们是附加库吗？什么的`fopen()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T08:19:33.197

根据[此手册页，资源类型](http://www.php.net/manual/en/resource.php) `fopen()`也包含在外部资源列表中，并在流下归档。

我相信它们被称为外部的，因为它们就是来自 PHP 核心之外的资源，例如数据库、文件或 ftp 连接。而不是像数组、字符串或整数这样的内部资源。

# jquery - 从所选选项动态添加到 TR 类值

> ID：13549377
> 
> 赞同：1
> 
> 时间：2012-11-25T08:10:45.457
> 
> 标签：jquery

可能是一项简单的任务，但我找不到可行的解决方案？

我需要将所选选项中的类值添加到相对 TR：

```
<table>
<tr class="odd views-row-first">
<td class="views-field views-field-website-id">1</td>
<td class="views-field views-field-changed">1349422708</td>
<td class="views-field views-field-created">1349422708</td>
<td class="views-field views-field-title">Double field</td>
<td class="views-field views-field-field-rules-conditional  views-field-editablefield">
<div id="editablefields-field-rules-conditional" class="editablefield-item">

<select id="edit-field-rules-conditional-0-field-rules-conditional-und" name="field_rules_conditional[0][field_rules_conditional][und]" class="form-select">
<option value="_none">- None -</option>
<option value="green">green</option>
<option value="red">red</option>
<option value="blue" selected="selected">blue</option>
</select>

</div>         
</td>
</tr>
</table>​ 
```

我想拥有的：

```
<tr class="odd views-row-first blue"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:31:55.637

该`index`功能将解决您的问题。请尝试以下操作：

```
 $("#edit-field-rules-conditional-0-field-rules-conditional-und option").click(function(){
         var index = $("option",$("#edit-field-rules-conditional-0-field-rules-conditional-und")).index($(this));
        var $td = $("#tableId tr:eq(0) td:eq(" + index + ")");            
        $td.addClass($(this).attr("value"));
    }); 
```

**编辑**：也给你的表一个 ID。我在示例中使用了“tableId”，所以用你想要的替换。

# wpf - WPF 和 WP8 的 WebAuthenticationBroker

> ID：13549382
> 
> 赞同：1
> 
> 时间：2012-11-25T08:11:46.227
> 
> 标签：wpf, authentication

Windows Store 应用程序中的 WebAuthenticationBroker 方案还不错。WP8 和 WPF 的等价物是什么？编写一次并在每个平台上使用类似的系统会很好。是否仍然推荐使用 DotNetOpenAuth？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T07:44:02.417

我已经为 WP7 构建了一个 WebAuthenticationBroker（当然也适用于 WP8）在我为 WP7 构建的 AzureMobileServices 的包装器中。

我还没有将它迁移到独立项目，它是我构建的 .Net 包装器的一部分。

**让我知道它是否有帮助！**

在此处观看登录 选项**(2) ：** [https ://github.com/zaxy78/azure-mobile-wp7-sdk#login-to-azure-mobile-services](https://github.com/zaxy78/azure-mobile-wp7-sdk#login-to-azure-mobile-services)

# css - 如何在第一个周期结束时暂停 CSS 关键帧动画？

> ID：13549390
> 
> 赞同：0
> 
> 时间：2012-11-25T08:12:18.027
> 
> 标签：css, css-animations

我正在制作我的第一个 CSS 关键帧动画，并且想知道如何在动画完成第一次运行后暂停动画。你可以在这里查看我的网站：[http](http://www.tommaxwell.me) ://www.tommaxwell.me ，底部的灰色引用有一个悬停动画，你可以看到。但是，一旦动画结束，它就会重置。我应该如何停止它，以便它在完成时保持动画的最终状态？

我知道在这种情况下使用关键帧动画有点蹩脚且不必要，但我真的只是在测试关键帧，以后会更好地使用它。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T09:19:00.060

作为@Mr. 外星人回答说，过渡更喜欢这个，但既然你问了 - 可以保持动画中的最后一个状态。

你通过添加来做到这一点`animation-fill-mode: forwards;`

这是一个[演示](http://jsfiddle.net/NsSYJ/2/)

这是我的示例中的代码：

HTML

```
<div class="text">Hover here</div>​ 
```

CSS

```
.text {
  color: blue;  
}

.text:hover {
    -webkit-animation: color 1.0s ease-in forwards;
       -moz-animation: color 1.0s ease-in forwards;
         -o-animation: color 1.0s ease-in forwards;
            animation: color 1.0s ease-in forwards;    
}

@-webkit-keyframes color {
  0%   { color: blue; } 
  100% { color: red;  }
}

@-moz-keyframes color {
  0%   { color: blue; } 
  100% { color: red;  }
}

@-o-keyframes color {
  0%   { color: blue; } 
  100% { color: red;  }
}

@keyframes color {
  0%   { color: blue; } 
  100% { color: red;  }
} 
```

如果您想了解“动画填充模式”属性，这是一个很好的资源。 [http://dev.w3.org/csswg/css3-animations/#animation-fill-mode-property](http://dev.w3.org/csswg/css3-animations/#animation-fill-mode-property)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T08:15:30.773

我知道你在这里做什么，请改用`transition`CSS

[**演示**](http://jsfiddle.net/hFWsW/)

```
.class {
   color: #ff0000;
   transition: color 2s;
   -moz-transition: color 2s; /* Firefox 4 */
   -webkit-transition: color 2s; /* Safari and Chrome */
   -o-transition: color 2s; /* Opera */
}

.class:hover {
   color: #00ff00;
} 
```

您将无法保留文本的悬停状态，因为您需要使用 JavaScript

# javascript - Javascript：关闭父窗口后无法访问对象

> ID：13549392
> 
> 赞同：1
> 
> 时间：2012-11-25T08:12:53.987
> 
> 标签：javascript, jquery, internet-explorer-8

所以我有一个父窗口，它打开一个新窗口（只是为了删除状态栏、工具栏等）。关闭父窗口后，传入的变量返回空白字符串。有时它会返回此错误消息：“远程服务器计算机不存在或不可用。” 即使在关闭父窗口后，我也确实需要访问此变量。有什么建议么？

```
var _env = {};
$(window).load(function()
{
    /**
     *
     * If initialization was not yet performed, start the initialization.
     * Otherwise, show application.
     *
     **/

    if (window.opener)
    {
        /* Start transition to the new window */
        window.blur();
        _env = window.opener._env;

        console.log(_env["title"]);

        /* Show system */
        window.opener.close();
        window.focus();

        console.log(_env["title"]); // Returns blank
    }
    else
    {
        /* Some process manipulating the '_env' variable */
        /* .... */
        /* .... */

        window.open("./index.html", _env["title"], "directories=0, menubar=0, toolbar=0, titlebar=0, resizable=1, width=" + _env["winWidth"] + ", height=" + _env["winHeight"]);
        window.focus();
        window.open("","_self", ""); // To prevent prompt on closing..
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:49:09.727

您可以将对象转换为 JSON，并设置`window.location.href`为它。然后，您可以在需要数据时提取它，并且引用不会有任何问题，因为您正在创建一个新对象。

# java - 在 Tomcat 上作为服务运行 Java 程序

> ID：13549394
> 
> 赞同：0
> 
> 时间：2012-11-25T08:13:14.500
> 
> 标签：java, tomcat, service

我开发了一个在 Apache Tomcat 服务器上运行的 java 程序。

目前我正在eclipse上运行程序。

我的问题是如何在服务器上将程序作为服务运行，而无需为它输入 Eclipse？

我是新手，所以我正在寻找方向。

还有一件事，我还有一个包含 JSP 页面的程序，这种情况下的过程是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:20:16.157

当您说为它输入eclipse时，您是什么意思。您可以在要运行该程序的服务器上安装 tomcat 并在那里部署您的应用程序。部署后，您可以启动 tomcat，这应该可以工作。Tomcat 还应该充当已部署应用程序的 JSP 引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:36:07.400

您需要将项目导出为 WAR 文件。右键单击项目 -> 导出 -> WAR 文件。然后你可以将war文件放到`webapps`Tomcat的目录中。

# php - 如何获取页面内容

> ID：13549397
> 
> 赞同：0
> 
> 时间：2012-11-25T08:14:48.747
> 
> 标签：php, dom, web-crawler

我正在尝试为我的网站制作类似功能的最新新闻。为此，我制作了一个网络爬虫，并且到目前为止通过执行以下操作能够从页面收集链接

```
$dom = new domDocument;
@$dom->loadHTML(file_get_contents($url));
$dom->preserveWhiteSpaces = false;
$linksToStore = $dom->getElementsByTagName('a');

foreach($linksToStore as $tag){
    $links[$tag->getAttribute('href')]= $tag->childNodes->item(0)->nodeValue;
} 
```

我如何从与特定域相关的链接指向的页面中获取内容，在我的情况下是“医疗”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:24:29.727

使用这个[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)库从页面中提取内容。选择器的工作方式与 jQuery 相同，这使得提取内容更加熟悉和高效。

另外，请查看此[http://davidwalsh.name/php-notifications](http://davidwalsh.name/php-notifications)以了解更多信息

# java - 为组 SWT 设置固定大小

> ID：13549402
> 
> 赞同：1
> 
> 时间：2012-11-25T08:15:52.867
> 
> 标签：java, swt

我有一个带有一些`Group`s 的页面。在组中，我放置了一些带有不同文本的标签。我希望所有组都具有相同的大小。我该怎么做？（我尝试了该`setSize`功能，但它对我不起作用）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T10:54:14.663

以下代码可以满足您的需求。诀窍包括两部分：

*   **相同宽度**：父级（在此示例中`Shell`）使用 a `GridLayout`，其中每列具有相同的宽度
*   **相同高度**：我们`GridData`用来告诉每个`Group`人占据父项的整个高度（the `Shell`）。

* * *

```
public class StackExample
{
    public static void main(String[] args)
    {
        Display display = Display.getDefault();
        final Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(3, true));
        shell.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        for(int i = 0; i < 3; i++)
        {
            createGroup(shell, i);
        }

        shell.pack();
        shell.open();
        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

    private static void createGroup(Shell parent, int index)
    {
        Group group = new Group(parent, SWT.NONE);
        group.setText("Group " + index);
        group.setLayout(new GridLayout(1, false));
        group.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        for(int i = 0; i < index + 1; i++)
        {
            String text = "";
            for(int j = 0; j < index + 1; j++)
            {
                text += "text";
            }

            Label label = new Label(group, SWT.NONE);
            label.setText(text);
            label.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));
        }
    }
} 
```

* * *

下面是两张截图：

最小尺寸：

![在此处输入图像描述](../Images/c279ea1030e30fc7d188be8b455f24e4.png)

增加窗口大小时：

![在此处输入图像描述](../Images/04210591bcc05abc46eec67d51d31594.png)

# web-services - 我的方法在 Web 服务安全性中实施一次性密码是否安全

> ID：13549403
> 
> 赞同：0
> 
> 时间：2012-11-25T08:15:56.263
> 
> 标签：web-services, security

我有两个系统（A 和 B），我需要使用 Web 服务相互集成，所以我正在考虑实施以下安全机制：-

1.  系统 B 将向系统 A 发送一个包含用户名和密码的请求，要求提供一次 64 字符的密码。

2.  系统 A 将向系统 B 发送一个包含 64 个字符的一次性密码。

3.  系统 B 将使用 64 个字符的密码调用系统 A Web 服务。

4.  系统 A 将检查 64 字符密码是否有效。

5.  系统 A 将响应系统 B 的请求。

6.  系统 A 将从有效密码中删除 64 位密码（因此，如果系统 B 或其他系统使用先前生成的 64 字符密码调用系统 A Web 服务，则调用将失败）

7.  系统 A 将生成一个新的 64 字符密码，并在需要时将其发送给系统 B。

8.  系统 B 使用新的 64 位密码调用系统 A Web 服务。

所以我的问题是这种方法是否安全，我将在 https 下实现两个系统之间的通信。此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:38:41.053

有许多安全因素需要考虑。所以让我们开始吧：

*   两个系统都可以公开访问吗？
*   两个系统 WS 都可以公开访问吗？
*   你想实现 encrypton 吗？在运输或访问控制中？

据我所知，我认为您的系统 WS 不可公开访问，假设代理包含某种证书身份验证作为额外的控制层，以及某种形式的访问控制列表来限制客户端系统的 IP 范围。

第二件事是您可能想做某种访问控制而不是加密，即用户**A**可以查看文档**aa**和**ab**，您的系统 A 知道这些规则，但系统 B 不知道，但他拥有实际数据。

分析您的协议 如果系统 A 针对系统 B 进行身份验证并获得有效的 OTP，则需要考虑一些事项

*   这种 otp 的有效期是多久？
*   你将如何提供唯一性？
*   它们会依赖于上下文吗？

所有这些都是必需的，因为您不希望普通用户替换数据标识符并使​​用有效的 OPT 访问他/她不应该访问的东西。安全性是一个棘手的主题，我推荐罗斯·安德森（Ross Anderson）的安全工程和迪特·戈尔曼（Dieter Gollman）的计算机安全作为初学者:)。

# windows - Windows 服务的数据存储在哪里（作为本地系统运行）？

> ID：13549404
> 
> 赞同：4
> 
> 时间：2012-11-25T08:16:02.110
> 
> 标签：windows, windows-services

根据Windows 7 客户端软件徽标计划（以及[本文）](https://stackoverflow.com/questions/13163611/where-is-the-guideline-that-says-you-shouldnt-write-to-the-program-files-area)[的技术要求](http://www.microsoft.com/en-us/download/details.aspx?id=3859)，应用程序/用户数据应保存在 AppData 目录下，而不应保存在or目录下。`Program Files``Windows`

但是，如果应用程序是作为本地系统运行的 Windows 服务呢？数据是否应该存储在`C:\Windows\system32\config\systemprofile\AppData`?

# android - 使用 android 使用 ksoap 调用 ASP.NET Web 服务

> ID：13549405
> 
> 赞同：0
> 
> 时间：2012-11-25T08:16:31.983
> 
> 标签：android, asp.net, web-services, android-ksoap2

我为调用 Web 服务创建了一个简单的类

```
public class CallSoap {
    public final String SOAP_ACTION = "http://tempuri.org/Add";

    public  final String OPERATION_NAME = "Add"; 

    public  final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

    public  final String SOAP_ADDRESS = "http://localhost:41614/Service1.asmx";
    public CallSoap() 
    { 
    }
    public String Call(int a,int b)
    {
    SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
    request.addProperty("a",a);
    request.addProperty("b",b);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransport httpTransport = new HttpTransport(SOAP_ADDRESS);
    Object response=null;
    try
    {
    httpTransport.call(SOAP_ACTION, envelope);
    response = envelope.getResponse();
    }
    catch (Exception exception)
    {
    response=exception.toString();
    }
    return response.toString();
    }
} 
```

这是我的`Activity`点击方法

```
public void clickData(View v)
{
    //Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText et=(EditText) findViewById(R.id.editText1);
    EditText et2=(EditText) findViewById(R.id.editText2);
    TextView tv=(TextView) findViewById(R.id.textView1);

    int a=Integer.parseInt(et.getText().toString());
    int b=Integer.parseInt(et2.getText().toString()); 

    CallSoap cs=new CallSoap();
    tv.setText(cs.Call(a, b));
} 
```

出现错误“不幸的是 App1 已停止”。请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T14:17:10.987

对于初学者，也是一种非常好的做法，将调用置于单独的线程中。我这样做：

```
public void call() {
    Log.d("TAG", "Started call");
    new Thread(new Runnable()
    {
        public void run() {
            Looper.prepare();

            /** UI stuff/ This runs on the main thread to update the UI. This can be used for displaying something like "please wait */

            AppPrefFragment.updateSyncJobsNumber(AppPrefFragment.JOB_START);
            if (AppPrefActivity.context != null) {
                ((Activity) AppPrefActivity.context).runOnUiThread(new Runnable()
                {
                    public void run() {
                        //AppPrefFragment.setSyncPreferenceStatusShowingOngoingJobs();
                        ... show "please wait"
                    }
                });
            }

            /** Actual stuff  that you want to do */

            ... the HttpCall or SOAP etc
        }
    }).start();
} 
```

请注意，返回必须异步处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:50:19.690

这是由于 android 2.2 之后的 NetworkOnMainThread 异常，您无法在 mainUi 线程中运行长时间运行的操作，例如网络访问，因为 mainUI 线程用于加载 Ui 组件以使您的应用程序流畅高效。您应该使用 AsynTask 类来保持它关闭主线程

# java - 覆盖可以有效替代延迟初始化中的 if 语句吗？

> ID：13549406
> 
> 赞同：1
> 
> 时间：2012-11-25T08:16:40.213
> 
> 标签：java, design-patterns, inheritance, overriding, oop

我试图模仿以下抽象类，旨在仅启用一个惰性初始化，而不使用逻辑语句。为了简单起见，我忽略了线程安全所需的同步元素。

```
abstract class Thunk<T>
{
    private boolean initiated = false;
    private T value;

    public T get()
    {
        if(!initiated) // not using (value == null)
        {
            value = compute();
            initiated = true;
        }

        return value;
    }

    abstract protected T compute();
} 
```

以下抽象类的实例是否可以被孩子破解以多次初始化同一个变量？

```
abstract class Thunk<T>
{
    private T value;
    private Computer<T> computer;

    public Thunk()
    {
        computer = new Computer<T>(this);
    }

    public T get()
    {
        value = computer.getValue();    
        return value;
    }

    abstract protected T compute();

    private class Computer<T> 
    {
        private static final String TAG = "Computer";

        private Thunk<T> thunk;
        private T value;
        private Computer<T> computer;

        public Computer(Thunk<T> thunk)
        {
            Log.d(TAG, "constructed");
            this.thunk = thunk;
            computer = this;
        }

        public T getValue() 
        {
            Log.d(TAG + ".getValue()", "");
            value = computer.computeValue();
            return value;
        }

        protected T computeValue() 
        {
            Log.d(TAG + ".computeValue()", "");
            value = thunk.compute();
            computer = new DumbComputer<T>(thunk, value);
            return value;
        }

        //this is for maximal encapsulation
        private class DumbComputer<T> extends Computer<T>
        {
            private static final String TAG = "DumbComputer";
            private T value;

            public DumbComputer(Thunk<T> thunk, T value) 
            {
                super(thunk);
                Log.d(TAG + ".contructed()", "booki");
                this.value = value; 
            }

            //overriding so that value will be calculated only once.
            @Override
            protected T computeValue() 
            {
                Log.d(TAG + ".computeValue()", "");
                return value;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:44:43.637

是的，通过覆盖该`get`方法。

要解决这个问题，您可以将其`get`变成一种`final`方法。这将防止覆盖并为您提供类似单例的行为。

请注意，您编写的代码不是线程安全的。

您可以通过制作方法来实现线程安全`synchronized`（不要担心性能*，直到*您知道您给出了问题并且该方法是热点，因为慢速正确代码比快速错误代码更好，并且JVM非常擅长优化锁。如果你发现这个类的特定锁过热，你可以使用一些技巧来加速它......*但现在不要担心*）

另外值得指出的是惰性初始化的资源持有者内部类模式（不适用于您的用例，因为此类需要。它仅用于单例）如果您想要最好的单例惰性初始化，则可以使用。

**更新（回复评论，因为评论不支持格式化）**

做这个：

```
abstract class Thunk<T>
{
    private boolean initiated = false;
    private T value;

    public synchronized final T get()
    {
        if(!initiated) // not using (value == null)
        {
            value = compute();
            initiated = true;
        }

        return value;
    }

    abstract protected T compute();
} 
```

这是可能工作的最简单的代码。甚至不要梦想尝试“改进”该代码。它可以改进，但改进会根据类的使用方式而有所不同，并且改进的复杂性将隐藏你的代码试图做什么。从可以工作的最简单的事情开始，然后从那里开始。

保持简单愚蠢

不要解决你还没有的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:50:46.547

图案

```
public final void f() {
    ...
    X x = ...;
    g(x);
    ...
}

abstract protected void g(X x); 
```

在契约式编程中非常有用：

*   强加一种行为（f 的主体），并且
*   提供本地上下文 (x)。

一个行为通常是通过持有一个状态来实现的（比如你的`initiated`）。所以是的，懒惰的评估很好。尽管可以在现场级别上实现惰性评估，例如通过很少见的宝石`Future<>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T08:41:47.217

您的第二个示例无法（可能）按预期工作，因为您`DumbComputer`每次调用时都会创建一个新示例`Thunk.get`。您可以按如下方式实现您的目标（但我认为这不是一个好的设计，而且我*真的*看不出与更简单的解决方案相比的优势在哪里）：

```
abstract class Thunk<T> {

    T value;
    Computer<T> computer;

    protected abstract T doCompute ();

    private interface Computer<T> {
        Computer getComputer ();
        T compute ();
    }

    public Thunk<T> () {
        // initialize computer with a calculating one
        computer = new Computer<T> () {
            Computer getComputer () {
                // return a dumb computer
                return new Computer<T> () {
                    Computer getComputer () { return this; }
                    T compute () { return value; }
                }
            }
            T compute () { value = doCompute (); return value; }
        };
    }

    public T getValue () {
        T v = computer.compute (); computer = computer.getComputer (); return v;
    }
} 
```

# matlab - Matlab从记事本读取和绘制文本文件数据，

> ID：13549411
> 
> 赞同：1
> 
> 时间：2012-11-25T08:17:45.110
> 
> 标签：matlab, text, text-files, notepad

我试图通过Matlab读取我的数据然后绘制它，但是使用我的代码使用 fscanf 和/或 textscan 文件被读取为一个数组并将数据一一作为一个字符，这使得无法绘制. 就像每个字符/整数都是一个数组。这是我的数据的样子：

```
Time        Volt     Chan 1  chan 2   chan 3    chan 4   chan 5     chan 6   chan 7
3333.222        222.33   0.2334  0.3444   0.2233    0.4455   -0.733     0.3333   0.12345
3333.222        0.2323   0.4566  0.3456   0.2453    0.4563   -0.753     0.2356   0.23455 
```

我想分别绘制时间数据与电压和其他通道。任何人都可以帮忙吗？我知道这里的数据看起来不对，但每个通道都有两组数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:14:36.960

似乎除了第一行之外，文件的其余部分都很有序。尝试使用 阅读第一行`fgetl`，然后使用以下内容阅读其余行`textscan` ：

```
fid = fopen( filename );
firstLine = fgetl( fid );
C = textscan( fid, '%f', 9 );
volt = [];
tm = [];
ch = zeros(0, 7);
while ~isempty(C{1})        
    volt( end + 1 ) = C{1}(1);
    tm( end + 1 ) = C{1}(2);
    ch( end + 1, : ) = C{1}(3:end)';
    C = textscan( fid, '%f', 9 );
end
figure;
plot( tm , volt ); title('volt vs time');
figure;
plot( tm, ch ); legend({'c1', 'c2', 'c3', 'c4', 'c5', 'c6', c7'});
title('chnnels vs time'); 
```

# liferay - 如何使用javascript在liferay中隐藏portlet

> ID：13549412
> 
> 赞同：4
> 
> 时间：2012-11-25T08:17:49.847
> 
> 标签：liferay

实际上在一个页面上我有 2 个 portlet 但我想通过单击`submit`按钮隐藏第一个 portlet 并且只有第二个 portlet 应该可见我使用了以下代码：

```
document.getElementById("portlet-id").style.visibility='none' 
```

但是在刷新页面后，portlet 再次可见，任何人都可以为我提供有关如何继续进行的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T10:57:32.817

您可以使用以下代码在 JSP`visibility`中将 portlet 的设置为：`false`

```
<%
renderRequest.setAttribute(WebKeys.PORTLET_CONFIGURATOR_VISIBILITY, Boolean.FALSE);
%> 
```

这将从用户的视图中隐藏您的 portlet。

每次呈现 portlet 时，您都可以检查在请求或会话中设置的参数（您的选择）以显示 portlet 或不显示 portlet，例如：

```
<%
String paramFromRequestToHide = renderRequest.getParameter("hidePortlet");
// can also fetch from session: portletSession.getAttribute("hidePortlet");

if (paramFromRequestToHide .equals("YES")) { // you can use your favorite data-type
    renderRequest.setAttribute(WebKeys.PORTLET_CONFIGURATOR_VISIBILITY, Boolean.FALSE);
} else {
    renderRequest.setAttribute(WebKeys.PORTLET_CONFIGURATOR_VISIBILITY, Boolean.TRUE);
}
%> 
```

* * *

### 另一种方法：

* * *

如果您不想使用上述方法，则可以将您的 javascript 方法与参数方法结合起来，如下所示：

```
<%
String paramFromRequestToHide = renderRequest.getParameter("hidePortlet");

if (paramFromRequestToHide .equals("YES")) {
%>

<aui:script>
    Liferay.Portlet.ready(

    /*
    This function gets loaded after each and every portlet on the page.

    portletId: the current portlet's id
    node: the Alloy Node object of the current portlet
    */
        function(portletId, node) {
            document.getElementById(portletId).style.display = 'none';
            // or alternatively using pure Alloy UI
            // node.hide();
        }
    );
</aui:script>

<%
} else {
%>

<aui:script>
    Liferay.Portlet.ready(
        function(portletId, node) {
            document.getElementById(portletId).style.display = 'block';
            // or alternatively using pure Alloy UI
            // node.show();
        }
    );
</aui:script>

<%
}
%> 
```

[如果您想查看[Alloy UI API](http://deploy.alloyui.com/api/)和一些[演示](http://deploy.alloyui.com/)来学习 Alloy UI，因为从 Liferay 6.1 开始，Alloy UI 是 liferay 的事实上的 javascript 库。现在 Alloy UI 有一个[官方网站](http://alloyui.com/)，其中包含许多有用的教程和示例。]

希望这能为您提供足够的材料继续进行:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T05:13:25.280

你也可以这样做：

如果您的 portlet id 是： callcenter_WAR_xyzyportlet

$('#p_p_id_callcenter_WAR_xyzyportlet_').css({display:'none'});

# javascript - Javascript 替换（）函数

> ID：13549413
> 
> 赞同：3
> 
> 时间：2012-11-25T08:18:25.803
> 
> 标签：javascript, replace

这是一个简单的 replace() 问题 - 我无法让它在下面的函数中替换子字符串。

```
function linkOnClick(){
    var anyNameYouLike = 'some sort of text/string right here';
    anyNameYouLike.replace('right','in');
    alert(anyNameYouLike)
} 
```

它应该返回“这里的某种文本/字符串”，但没有。我究竟做错了什么？我对 Javascript 相当陌生（如果不是很明显......）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-25T08:19:32.290

```
anyNameYouLike = anyNameYouLike.replace('right','in'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-25T08:25:00.070

在 javascript 中，字符串是不可变的（它们永远不会被修改）。因此，该`.replace()`函数不会修改您调用它的字符串。相反，它返回一个新字符串。因此，如果要`anyNameYouLike`包含修改后的字符串，则必须将结果分配给它，如下所示：

```
anyNameYouLike = anyNameYouLike.replace('right','in'); 
```

有关更多信息，请参阅该[方法的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)[MDN 描述，该描述`.replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)如下：

> 返回一个新字符串，其中模式的部分或全部匹配被替换替换。模式可以是字符串或正则表达式，替换可以是字符串或每次匹配调用的函数。

而且，在该`.replace()`方法的描述中，它是这样说的：

> 此方法不会更改调用它的 String 对象。它只是返回一个新字符串。

# emacs - 微调自动配对 emacs

> ID：13549419
> 
> 赞同：1
> 
> 时间：2012-11-25T08:19:54.523
> 
> 标签：emacs, brackets

有谁知道如何更改 autopair.el，这样当您有一个区域时，按下`(`会导致该点位于 ( 而不是括号内？

这让我很烦恼很长时间，因为每当我选择了一个区域并且我想插入括号时，我不希望点在括号内。

标准行为 SELECTED REGION TEXT -> ([point] TEXT )

首选行为 SELECTED REGION TEXT -> [point]](TEXT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:34:21.613

肮脏的版本：更改`1+`为. 我目前看不到一种干净地进行这种修改的方法。我已经提交了一个[问题](https://github.com/capitaomorte/autopair/issues/14)，以使这种定制更容易。`1-``autopair.el`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:53:58.730

正如 pmr 指出的那样，从第 952 行开始：

```
(goto-char (1+ (car region-before)))) 
```

改成：

```
(goto-char (1- (car region-before)))
(right-char 1)) 
```

# multithreading - 如果非守护线程正在等待守护进程之一？

> ID：13549432
> 
> 赞同：2
> 
> 时间：2012-11-25T08:23:48.757
> 
> 标签：multithreading, jvm

如果非守护线程正在等待守护线程（带有`join()`方法），这会阻止JVM退出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:26:30.490

> 这会阻止JVM退出吗？

是的：-）

对于使用`threading`模块创建的线程，主线程在退出时加入所有非守护线程。

如果你有一些非守护线程正在等待锁，并且你没有安排释放锁，那么主线程将在退出时挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:33:45.337

该方法`wait()`等待一个信号（可以来自任何地方），而不是一个特定的线程（所以你的问题措辞不正确）。

因此，只要非守护线程正在等待（不管怎样），jvm 就不会退出。

# java - android上的运行时错误

> ID：13549437
> 
> 赞同：-2
> 
> 时间：2012-11-25T08:24:33.317
> 
> 标签：java, android

```
11-25 13:20:55.263: D/AndroidRuntime(467): Shutting down VM
11-25 13:20:55.263: W/dalvikvm(467): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-25 13:20:55.313: E/AndroidRuntime(467): FATAL EXCEPTION: main
11-25 13:20:55.313: E/AndroidRuntime(467): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.xample.counter/com.xample.counter.MainActivity}: java.lang.NullPointerException
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.os.Looper.loop(Looper.java:123)
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-25 13:20:55.313: E/AndroidRuntime(467):  at java.lang.reflect.Method.invokeNative(Native Method)
11-25 13:20:55.313: E/AndroidRuntime(467):  at java.lang.reflect.Method.invoke(Method.java:507)
11-25 13:20:55.313: E/AndroidRuntime(467):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-25 13:20:55.313: E/AndroidRuntime(467):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-25 13:20:55.313: E/AndroidRuntime(467):  at dalvik.system.NativeStart.main(Native Method)
11-25 13:20:55.313: E/AndroidRuntime(467): Caused by: java.lang.NullPointerException
11-25 13:20:55.313: E/AndroidRuntime(467):  at com.xample.counter.MainActivity.onCreate(MainActivity.java:28)
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-25 13:20:55.313: E/AndroidRuntime(467):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-25 13:20:55.313: E/AndroidRuntime(467):  ... 11 more 
```

我是android新手，遇到此错误无法解决，请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:54:58.013

请提供您的 MainActivity 代码。并将日志语句放入您的程序中进行调试和 AndroidRuntime(467): at com.xample.counter.MainActivity.onCreate(MainActivity.java:28)

此行表示检查您的行号。28 在 onCreate()

# asp.net - IIS 7 应用程序池优化

> ID：13549441
> 
> 赞同：1
> 
> 时间：2012-11-25T08:26:28.127
> 
> 标签：asp.net, iis-7, nginx

我有几个在 win 2008 64bit/IIS 7 上运行的站点，每个站点都有一个单独的应用程序池（默认设置）。

问题是其中许多非常简单且流量低的站点会消耗大量内存（100mb - 超过 1 gb）。其中大部分是用 c# asp.net 4.0 托管代码（linq to sql 和实体框架 4-5.0）编写的。

假设一个应用程序池为 90000 kb，如果我在浏览器上运行网络，它可能会超过 200000 kb。正常吗？

那么我该怎么做才能让他们![在此处输入图像描述](../Images/e6cd63d6ba8e41e223e04940647942db.png)冷静下来而不中断（很多*）性能？

我应该降低默认回收间隔吗？

此外，任何人都知道易于使用的监视/跟踪内存泄漏的最佳解决方案。

# css - 如何更改extLib中widgetContainer的样式

> ID：13549443
> 
> 赞同：0
> 
> 时间：2012-11-25T08:26:37.737
> 
> 标签：css, xpages, xpages-extlib

我正在使用扩展库中的 widgetContainer。这很好用，但我想以不同的方式设置它（没有 oneUI）。所以我的问题。我可以将样式类用于小部件，但小部件会使用自己的样式创建一些 div。他们没有身份，所以我该如何捕捉/修改他们？

```
<div id="view:_id1:_id5:_id44:_id45:_id46:wgNaviLeft" class="navWidget" style="border: solid thin black; padding:0px; margin: 2px;">
<div style="border-bottom: solid thin black; background-color:#DDDDDD"><span>main</span></div> 
```

谢谢

# php - PHP正则表达式禁止太短的网址

> ID：13549447
> 
> 赞同：1
> 
> 时间：2012-11-25T08:27:20.170
> 
> 标签：php, regex, preg-replace

我有一个正则表达式，可以在文本中查找 url 并用链接替换它们

```
preg_replace( '@(?<![.*">])\b(?:(?:https?|ftp|file)://|[a-z]\.)[-A-Z0-9+&#/%=~_|$?!:,.]*[A-Z0-9+&#/%=~_|$]@i', '<a href="\0" target="_blank" rel="nofollow">\0</a>', $text ); 
```

问题是，当有人键入包含“ie”的文本时，它也会将其转换为链接，这不应该发生。如何限制此正则表达式以替换长度超过 3 个字符的字符串？

我试过 put `{3,}`，但它不起作用。

```
preg_replace( '@(?<![.*">])\b(?:(?:https?|ftp|file)://|[a-z]\.)
([-A-Z0-9+&#/%=~_|$?!:,.]{3,})*[A-Z0-9+&#/%=~_|$]@i', '
<a href="\0" target="_blank" rel="nofollow">\0</a>', $text ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:33:08.123

您可以使用`preg_replace_callback`来检查捕获的文本是否至少具有`5`或`6`chars ：

```
preg_replace_callback( '@(?<![.*">])\b(?:(?:https?|ftp|file)://|[a-z]\.)([-A-Z0-9+&#/%=~_|$?!:,.]{3,})*[A-Z0-9+&#/%=~_|$]@i', function($matches){
   if(strlen($matches[0])>5){
      return '<a href="'.$matches[0].'" target="_blank" rel="nofollow">'.$matches[0].'</a>';
    }else{
       return $matches[0];
     }
   }, $text ); 
```

# php - 获取指定节点类型的最新 10 篇文章？

> ID：13549448
> 
> 赞同：3
> 
> 时间：2012-11-25T08:27:40.017
> 
> 标签：php, drupal, drupal-7

现在，如果节点类型是文章。在术语页面的左侧，我想显示最近 10 篇文章的标题，节点类型为文章。我不想使用视图，我该怎么办？谢谢你。

如果我想在节点页面的左侧显示最新的 10 篇文章的标题，哪个节点类型是文章。如何编写查询。非常感谢。

ps：我发现EntityFieldQuery 可能可以做到这一点，但我现在不知道该怎么做。

我的代码：

```
$query = new EntityFieldQuery();

$query
 ->entityCondition('entity_type', 'node')
 ->entityCondition('bundle', 'article')
 ->propertyCondition('status', 1)
 ->propertyOrderBy('created', 'DESC')
  ->range(0, 10);

$result = $query->execute(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T08:31:54.487

代码可以是这样的（使用[db_select()](http://api.drupal.org/api/drupal/includes!database!database.inc/function/db_select/7)）

```
$query = db_select("node", "n") // select from the node table
    ->fields("n", array("nid", "title")) // fields nid, title
    ->condition("type", "page", "=") // where the node type = page
    ->orderBy("created", "DESC") // order by the newest
    ->range(0, 10) // select only 10 records
    ->execute(); // execute the query

while($record = $query->fetchAssoc()) {
    print(l($record['title'], "node/" . $record['nid'])); // print the node title linked to node.
} 
```

另一个使用[EntityFieldQuery() 的](http://api.drupal.org/api/drupal/includes!entity.inc/class/EntityFieldQuery/7)例子：

```
$query = new EntityFieldQuery();
$entities = $query->entityCondition('entity_type', 'node')          
      ->entityCondition('bundle', 'club')
      ->propertyOrderBy("created", "DESC")
      ->range(0, 10)
      ->execute();

foreach($entities['node'] as $obj)
{
    $node = node_load($obj->nid);
    print(l($node->title, "node/" . $node->nid));
} 
```

性能方面：使用第一种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T10:55:02.610

我将提到另一个解决方案，因为它是否具有良好的 Drupal 知识。Views 模块只需很少的工作就可以创建这样的块。学习起来有点棘手，但它非常适合制作此类列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-12T10:03:58.047

就 D7 性能而言，您最好使用旧`db_query`命令：

```
$result = db_query("SELECT nid FROM {node} WHERE type = :type AND status = 1 ORDER BY created DESC LIMIT 10", array(':type' => $type));
foreach ($result as $record) {
  // Do something with each $record
  $node = node_load($record->nid);
} 
```

有关速度比较，`db_query`请`db_select`查看此处：[https ://www.drupal.org/node/1067802#comment-8996571](https://www.drupal.org/node/1067802#comment-8996571)

> 对于简单查询，db_query() 比 db_select() 快 22%
> 
> 对于简单查询，db_query() 比 EFQ 快 124%
> 
> 对于有两个连接的查询，db_query() 比 db_select() 快 29%

这是因为 db_select 和 EntityFieldQuery() 允许模块挂钩并修改查询。这对你来说可能是件好事！

我只是提供选项。

# android - 在输入文本时验证 EditText 以删除 setError

> ID：13549449
> 
> 赞同：1
> 
> 时间：2012-11-25T08:27:41.263
> 
> 标签：android

我正在尝试验证 EditText 字段中的文本输入。我`setErrors`在字段中没有输入文本时创建。`Submit`按下按钮时验证字段。

如果`setError`为空字段抛出 a ，则在该字段中键入文本，当按下 t 或在该字段中按下回车键时`setError`将消失- 不是当用户在空字段中键入文本，然后手动点击`Submi`另一个领域。`setErro`即使已输入文本，第一个字段的r 仍处于活动状态。

我认为`EditText`可以在输入文本以解决此问题时进行验证。
这是正确的方法吗？

```
EditText toText = (EditText) findViewById(R.id.to);
EditText subjectText = (EditText) findViewById(R.id.subject);

if (toText.getText().length() == 0) {
    toText.setError("Please enter a valid recipient");
}

else {
    toText.setError(null);
}

if (subjectText.getText().length() == 0) {
    subjectText.setError("Please enter a subject");
}

else {
    subjectText.setError(null);
} 
```

所以我想要实现的目标：

*   用户忘记在 toText 中输入文本
*   用户单击提交，出现 setError 消息
*   用户在 toText 中输入文本
*   用户点击主题文本
*   toText 仍然显示 setError
*   我想在这种情况下删除 setError

在以下情况下，toText 将删除 setError：

*   用户再次单击提交以重新验证字段
*   用户按键盘上的 Enter 键前进到下一个字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:16:22.293

其实我没有完全得到你。你为什么不使用这样的东西：

```
//EditText et;

if(et.getText().length() == 0) {
//the field is empty
}
else {
//perform the action
} 
```

或者，您可以`Regular Expressions`用来验证输入

# php - PHP多态根需要

> ID：13549450
> 
> 赞同：0
> 
> 时间：2012-11-25T08:27:44.337
> 
> 标签：php, directory, root

我有一个目录/文件树，如下所示：

```
index.php

/frame/main_class.php
/frame/func/function_1.php
/frame/func/function_1.php
/cfg/config.php 
```

* * *

```
//index.php

require('frame/main_class.php');
new main_class; 
```

* * *

```
//frame/main_class.php

class main_class{
    public function __construct(){
        require('func/function_1.php');
        require('func/function_2.php');
        require('cfg/config.php');
    }
} 
```

* * *

奇怪的是它有效。也许已经晚了，我有一个愚蠢的时刻，但不应该“要求（'cfg/config'）;” 写成“require('../cfg/config.php');” ?

如果它使用的是 index.php 的根目录，那么 "require('func/function_1.php');" 不应该工作，对吧？

我对远程服务器进行了四次检查，认为可能有一两个杂散文件……没有。这两个要求语句如何具有不同的基本路径......？

有谁知道可能导致这种情况发生的代码片段？我正在使用一些 $_SERVER 变量，但我似乎没有改变它们中的任何一个......！？

* * *

[“文件是根据给定的文件路径包含的，如果没有给出，则根据指定的 include_path。如果在 include_path 中找不到文件，include 最终会在失败之前检查调用脚本自己的目录和当前工作目录。 "](http://us.php.net/manual/en/function.include.php) 明确地说`include dirname(__FILE__) . '/path/to/file.php';`可以避免这种混淆。– DCoder

[链接到“目录名”上的 PHP 手册。](http://php.net/manual/en/function.dirname.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:13:13.370

PHP 引擎将在当前目录中查找请求的文件，但它也会在 INCLUDE_PATH 中定义的路径列表中查找它们。如果包含路径列出了脚本运行的路径，那么给定的代码将起作用。如果不是，那么它不会。

出于这个原因，依赖包含路径来解析包含文件的路径并不是一个好主意。您应该改为提供完整路径。

# java - onCreate 中的侦听器是否多次工作？

> ID：13549452
> 
> 赞同：1
> 
> 时间：2012-11-25T08:27:52.423
> 
> 标签：java, android, datepicker, listener, oncreate

我有一个我在 onCreate 中定义的日期选择器的监听器，一旦用户更改了日期选择器日期，我想立即工作，如下所示

***已编辑***

```
 public class birthDate extends Activity{

        DatePicker birthDayDatePicker,periodDatePicker;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);  
            setContentView(R.layout.birthdate);

            birthDayDatePicker = (DatePicker)findViewById(R.id.DatePickerBirthDay);

              birthDayDatePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener () {

                @Override
                public void onDateChanged(DatePicker birthDayDatePicker, int currentYear, int currentMonth, int currentDay) {
                    // TODO Auto-generated method stub

                    periodDateCalculations();

                    }
            });

        }

public void periodDateCalculations ()
    {
        Calendar start = Calendar.getInstance();

        // get the chosen date from birth date picker
        int birthYear = birthDayDatePicker.getYear();
        int birthMonth = birthDayDatePicker.getMonth();
        int birthDay = birthDayDatePicker.getDayOfMonth();

        //set the chosen date to calendar instance
        start.set(birthYear, birthMonth, birthDay);

        //get the date 
        Date birthDate = start.getTime();
        //int constrain = currentMonth + 9;

        int daysToAdd = -280;

        //another instance from calendar 
        Calendar cal2 = Calendar.getInstance();

        //set birth date chosen to calendar
        cal2.setTime(birthDate);

//      if (cal.getTime().getMonth() >= constrain)
//      {System.out.println("cal.getTime().getMonth() >= constrain");}

        //add -280 day to birth day to get period date
        cal2.add(Calendar.DAY_OF_MONTH,daysToAdd);
        System.err.println("-----" +cal2.getTime());
        int periodYearAfterCalc = cal2.getTime().getYear()+1900;
        System.err.println("-----" + periodYearAfterCalc);
        int periodMonthAfterCalc = cal2.getTime().getMonth();
        System.err.println("----" + periodMonthAfterCalc);
        int periodDayAfterCalc = cal2.getTime().getDate();
        System.err.println(periodDayAfterCalc);

        birthDayDatePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS);
        periodDatePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS);

        //edit birth date picker from user  
            if(birthDay >= currentDay && birthMonth >= currentMonth && birthYear >= currentYear){
                //the program runs normally
                periodDatePicker.updateDate(periodYearAfterCalc, periodMonthAfterCalc, periodDayAfterCalc);     

                }
                else{
                                new AlertDialog.Builder(birthDate.this)

                                .setTitle("Wrong Data Input!")

                                .setMessage("birth day input error")

                                .setNeutralButton("Ok",

                                new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,

                                int which) {

                                }

                                }).show();

                          periodDatePicker.updateDate(currentYear, currentMonth, currentDay);   

                            }

        } 
```

我的问题是，这个监听器是否像它在 onCreate 中定义的那样工作不止一次，或者我应该在其他地方定义它以多次使用它？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:32:08.770

它被定义的事实`onCreate()`是无关紧要的。您正在使用给定的侦听器初始化日期选择器，因此日期选择器将在每次其日期更改时调用此侦听器。

# jquery - 使用 JavaScript 变量进行 django 模板列表查找

> ID：13549455
> 
> 赞同：-1
> 
> 时间：2012-11-25T08:28:11.783
> 
> 标签：jquery, django

我之前用 js vars 和 django 模板一起使用过，它已经奏效了，但这种情况有点不同。

我需要使用 js var 作为列表索引号来从 django 模板 var 中的传递列表中查找对象。

```
var index = 0;
$(.someclass).html (
    {{ list.index.some_attr }}
} 
```

这不起作用，奇怪的是我测试了这个：

```
$(.someclass).html (
     {{ list.0.some_attr }}
 ) 
```

它有效！，这也有效：

```
var index = 0;
$(.someclass).html (
     index
} 
```

这有点令人困惑，谁能解释一下？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:37:10.630

如果不对其进行迭代或按索引指向成员，则无法访问可迭代的成员属性。这在 OOP 中是很正常的。那就是说您要解决的问题是什么？

# c# - 遇到 Sprite 问题，请查看 XNA 中的鼠标进行游戏

> ID：13549456
> 
> 赞同：1
> 
> 时间：2012-11-25T08:28:26.250
> 
> 标签：c#, mouse, xna-4.0

我知道这个问题之前已经回答过，我已经完成了我的研究，相信我。我现在要说这个，这是一个学校项目，但考虑到我将进入游戏程序员，我想为自己的学习做这个。

这可能会变得一团糟，但我会尽力而为，所以它从一个基本的射击游戏开始，我们有一个 game.cs- 包含所有纹理向量，以及

entity.cs- 已经开始 spritebatch 供玩家调用 game.cs 中的 player.draw (spritebatch)

player.cs- 包含子弹的射击和位置

子弹头文件

敌人.cs

所以我的问题是我有更新精灵来查看鼠标的代码，然后我会使用

```
player.Draw(
            playerTexture,
            position,
            null,
            Color.White,
            rotation,
            spriteOrigin,
            1.0f,SpriteEffects.None,0f); 
```

在 game.cs 绘制函数中，但是当我这样做时，我得到了另一个精灵（与我的玩家精灵相同的精灵），它确实看着我的鼠标，但我希望我的另一个精灵看着鼠标

但我的教授。编写代码，以便在 entity.cs 中有一个已经开始的 spritebatch

```
public CEntity(CGame myGame, Texture2D myTexture)
    {
        game = myGame;
        texture = myTexture;
    }

    /// <summary>
    /// Draws the player.
    /// </summary>
    /// <param name="begunSpriteBatch">Give this function a already begun SpriteBatch.</param>
    public void Draw(SpriteBatch begunSpriteBatch)
    {
        begunSpriteBatch.Draw(texture, position, Color.White);

    } 
```

所以在 game.cs 中调用 player.draw 绘制函数来绘制玩家，我能做些什么来获得那个精灵的鼠标效果？

```
public CPlayer(CGame game, Texture2D playerTexture)
        : base(game, playerTexture)
    {
        texture = playerTexture;
        brotation = rotation;

        position.X = 400f;
        position.Y = 400f;
    } 
```

并且玩家也是从实体继承的。

根据要求更新鼠标的代码

```
 IsMouseVisible = true;

        MouseState mouse = Mouse.GetState();
        distance.X = mouse.X - position.X;
        distance.Y = mouse.Y - position.Y;
        //Math.Atan2((double)mouseState.Y - position.Y, (double)mouseState.X - position.X); was using this //before found a different way

        rotation = (float)Math.Atan2(distance.Y, distance.X);

        spriteRectangle = new Rectangle((int)position.X, (int)position.Y,//rotation stuff
            playerTexture.Width, playerTexture.Height);
        spriteOrigin = new Vector2(spriteRectangle.Width / 2, spriteRectangle.Height / 2); 
```

# spring - 使用 spring xml 作为后台进程/线程启动码头

> ID：13549457
> 
> 赞同：2
> 
> 时间：2012-11-25T08:28:35.880
> 
> 标签：spring, testing, jetty, automated-tests, integration-testing

我的目标是设置一个码头测试服务器并注入一个自定义 servlet 来测试我项目中的一些 REST 类。我能够使用 spring xml 启动服务器并针对该服务器运行测试。我遇到的问题有时是在服务器启动后，进程在运行测试之前停止。码头似乎没有进入背景。它每次都在我的电脑上工作。但是当我部署到我的 CI 服务器时，它不起作用。当我使用 VPN 时，它也不起作用。（奇怪的。）

服务器应该完成初始化，因为测试卡住了，我可以使用浏览器访问服务器。

这是我的弹簧上下文 xml：....

```
<bean id="servletHolder" class="org.eclipse.jetty.servlet.ServletHolder">
    <constructor-arg ref="courseApiServlet"/>
</bean>

<bean id="servletHandler" class="org.eclipse.jetty.servlet.ServletContextHandler"/>

<!-- Adding the servlet holders to the handlers -->
<bean id="servletHandlerSetter" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="servletHandler"/>
    <property name="targetMethod" value="addServlet"/>
    <property name="arguments">
        <list>
            <ref bean="servletHolder"/>
            <value>/*</value>
        </list>
    </property>
</bean>

<bean id="httpTestServer" class="org.eclipse.jetty.server.Server" init-method="start" destroy-method="stop" depends-on="servletHandlerSetter">
    <property name="connectors">
        <list>
            <bean class="org.eclipse.jetty.server.nio.SelectChannelConnector">
                <property name="port" value="#{settings['webservice.server.port']}" />
            </bean>

        </list>
    </property>

    <property name="handler">
        <ref bean="servletHandler" />
    </property>
</bean> 
```

运行最新的 Jetty 8.1.8 服务器和 Spring 3.1.3。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:01:04.637

我想到了。我的错。我的 REST 客户端连接到的测试 Web 服务器（码头）的 IP 地址设置为仅对我的本地主机可用的内部 IP 地址（不是本地主机）。这就是为什么当我在 VPN 或 CI 服务器上时无法开始测试的原因。

xml 实际上正在工作，我认为它比在[单独的 ant 任务](http://wiki.eclipse.org/Jetty/Howto/Spring)中启动码头更好。因为 spring 管理码头的生命周期。测试完成后，spring 会自动关闭 jetty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:01:38.923

如果您使用 Maven，您可以让[jetty-maven-plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)启动和停止 Jetty 作为构建过程的一部分。你像往常一样创建你的 Spring 项目，将插件添加到你的 .pom 文件中。[mvn jetty:run](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#jetty%3arun_%3a__Running_an_unassembled_webapp)允许您运行未组装的 Web 应用程序，并且[mvn jetty:run-war](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#jetty%3arun-war_%3a__Running_an_assembled_webapp_as_a_war)允许您运行 .war 文件。我想您真正想要的是让 Jetty 在预集成测试阶段开始并在集成后测试阶段停止（[ref](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#jetty%3astart__%3a__Starting_jetty_without_first_executing_the_build_up_to_.22test-compile.22_phase)）：

```
<plugin>
  <groupId>org.mortbay.jetty</groupId>
  <artifactId>jetty-maven-plugin</artifactId>
  <configuration>
    <scanIntervalSeconds>10</scanIntervalSeconds>
    <stopKey>foo</stopKey>
    <stopPort>9999</stopPort>
  </configuration>
  <executions>
    <execution>
      <id>start-jetty</id>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>start</goal>
      </goals>
      <configuration>
       <scanIntervalSeconds>0</scanIntervalSeconds>
       <daemon>true</daemon>
      </configuration>
    </execution>
    <execution>
      <id>stop-jetty</id>
      <phase>post-integration-test</phase>
      <goals>
        <goal>stop</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

# iphone - iOS：PC/Mac 连接检测

> ID：13549460
> 
> 赞同：0
> 
> 时间：2012-11-25T08:30:10.893
> 
> 标签：iphone, ios, usb

> **可能重复：**
> [用于检查 iPhone 与 USB 连接的应用程序](https://stackoverflow.com/questions/7426258/an-application-to-check-iphone-connection-with-usb)

据我所知，可以检测到 iPhone 何时充电，但是否可以检测到 iPhone 已连接到 PC/Mac USB 端口？

在 iPhone 方面，当然。并且仅使用公共框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:38:50.530

看来只有检查充电的方法了。如果不使用黑客或私有框架，就无法检测到 PC/Mac USB 端口的连接。

# php - 分别显示每个测验查询

> ID：13549461
> 
> 赞同：0
> 
> 时间：2012-11-25T08:30:28.450
> 
> 标签：php, mysql, post

我正在尝试使用 PHP 和 Mysql 进行测验。我已经创建了我的数据库并填充了它。数据库结构如下：question_id(PK),question, right answer, annswer1,answer2, answer3,level 和 test_id(FK)。

我创建了一个以随机顺序“绘制”问题的查询，并且我已经打乱了答案。用于向用户显示 Qs 和 As 的 PHP 脚本如下：

```
while ($index <= (count($test)-1)){
 echo $test[$index]['question']. "<br/>";
 $question_id=$test[$index]['question_id'];
 $s_ans=User_Model::shuffle_answers($question_id);
  foreach ($s_ans as $s_a){
      echo "<input type='radio' name='test_ans[$index][$s_a]' id='$question_id' />$s_a <br />";

      }

 echo "<hr/>";
      $index++;

  } 
```

上面的代码一次显示了所有问题及其答案。
我想做但未能成功完成的是分别显示每个问题，当用户按下“下一步”按钮时，将向他显示下一个问题及其答案。

所以，

a）有没有办法我可以做到这一点？

b）当我尝试访问用户的答案时，我得到以下输出：

```
Array ( [0] => Array ( [I  like ice cream => on ) [1] => Array ( [i don't go to school] => on ) [2] => Array ( [i play basketball] => on ) [3] => Array ( [i like sailing] => on ) ) 
```

我如何访问用户的答案以将它们与正确答案进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:40:04.423

好吧，既然您使用的是 PHP，您可以使用会话或 cookie。这可能不是最优雅的解决方案，但我会生成一个表示一系列问题的参考字符串并将其存储在一个会话或 cookie 变量中，然后再使用另一个会话或 cookie 变量来表示测验中的当前位置。此外，您可以使用其他变量来跟踪分数和其他花絮。然后当他们点击下一个按钮时，您只需更新变量并显示下一个问题，或者如果您已经达到它，则显示测验结束。

如果您想动态地执行此操作而不必加载另一个页面，那么您需要查看 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T08:54:22.260

多页测验很容易做到。

A）这可以通过删除`while()`循环来完成，但让计数器通过隐藏`<input>`或增加`$_SESSION`变量

```
$index = $_POST['index'] // OR $_GET['index'] OR $_SESSION['index'] depending on your form method
echo $test[$index]['question']. "<br/>";
$question_id=$test[$index]['question_id'];
$s_ans=User_Model::shuffle_answers($question_id);
foreach ($s_ans as $s_a){
  echo "<input type='radio' name='test_ans[$index][$s_a]' id='$question_id' />$s_a <br />";
}

if ($index < $total_questions){
$index++; // Increase var, and then use in hidden input
echo "<input type='hidden' name='index' value='$index' />";
echo "<input type='submit' name='submit_answer' value='Next' />";}
else {
echo "<input type='submit' name='submit_answer' value='You Are Done' />";}
//OR
$_SESSION['index'] = $index++; 
```

B）没有你的代码，这只是一个例子 -

```
if ($user[$index]['their answer'] == $test[$index]['right answer'])
   { echo "You were correct";}
else
   { echo "Sorry, your answer was incorrect";} 
```

# sql - DENSE_RANK() 中的 ORDER BY

> ID：13549476
> 
> 赞同：0
> 
> 时间：2012-11-25T08:33:22.337
> 
> 标签：sql

我想用它`DENSE_RANK()`来划分周数，并按 id 排序，它工作正常。

但是我有一些情况，我有一个持续时间为两周数的 id，由于 order by，它给了他另一个 id 而不是第一个 id。

这是结果：

```
CardID      WeekN       RowNum

2467        1           1   
**2481      1           *2***   
2468        2           1   
2473        2           2   
2482        2           3   
**2481      2           *4***   
2473        3           1   
2482        3           2   
2481        3           3 
```

我对 RowNum 的查询是：

```
 DENSE_RANK() OVER (PARTITION BY Lng_CardWWeek  ORDER BY Duration , CardID  Desc) as RowNum 
```

我应该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:47:40.213

尝试这样的事情：

```
SELECT DENSE_RANK() 
OVER (PARTITION BY Lng_CardWWeek  ORDER BY Duration , CardID  Desc) AS RowNum
FROM <<tablename>> AS <<name>> 
[WHERE <<condtion>>]
GROUP BY CardID
ORDER BY RowNum 
```

您必须使用 SELECT 来指定您正在尝试从表中获取一些数据。此外，您必须包括表的名称。

如果你只是在后面的行中列出那些具有相同 CardID 的元素，那么也可以在 OVER 子句之外使用 ORDER BY 子句。

尝试使用外部 GROUP BY 以使每个 CardID 仅获取一行。

# amazon-s3 - PigStorage 如何为 S3 工作？

> ID：13549477
> 
> 赞同：1
> 
> 时间：2012-11-25T08:33:24.543
> 
> 标签：amazon-s3, apache-pig

我想知道 Pig 中的 PigStorage 如何将数据存储到 S3？它是否将输出保存到 HDFS 然后将它们复制过来？或者将每个减速器输出保存到每个减速器的本地目录，然后将它们复制到 S3？我想这不能流式传输，因为 S3 只支持放置文件或目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:20:38.857

我的理解是每个reducer都在本地写入输出，然后将输出复制到S3。

正如您所说的那样 - 由于 S3 不支持流式传输，因此减速器只能在完成处理后复制其输出。

# caching - 缺页和脏页

> ID：13549479
> 
> 赞同：1
> 
> 时间：2012-11-25T08:33:36.043
> 
> 标签：caching, memory-management, tlb, page-fault

我已经开始阅读有关 CPU 缓存的信息，我有两个问题：

1) 假设 CPU 收到页面错误并将控制权转移给内核处理程序。处理程序决定驱逐内存中标记为脏的帧。可以说 CPU 缓存用有效和修改的位写回。现在，此帧的内存内容已过时，缓存包含最新数据。内核如何强制缓存刷新？

2）页表条目（PTE）被标记为脏的方式如下：TLB有一个修改位，当CPU修改页面内容时设置。该位在上下文切换时被复制回 PTE。如果我们得到一个页面错误，PTE 可能是非脏的，但 TLB 条目可能设置了修改的位（它还没有被复制回来）。这种情况如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:38:10.843

至于刷新缓存，那只是一条特权指令。操作系统调用指令，硬件开始刷新。有一条指令用于使所有值无效并发出立即刷新而不回写的信号，还有另一条指令告诉硬件在刷新之前将数据写回。在指令调用之后，硬件（缓存控制器和 I/O）接管。还有一些特权指令告诉硬件刷新 TLB。

我不确定你的第二个问题，因为我已经有一段时间没有参加操作系统课程了，但我的理解是，如果发生页面错误，页面将首先被带入页表。删除的任何页面都取决于可用空间以及使用的页面替换算法。在引入该页面之前，如果它正在替换的页面设置了修改位，则必须首先将其写出，以便 IO 排队。如果未修改，则立即替换该页面。TLB 的过程相同。如果设置了修改位，则在替换该页面之前，您必须将其写回，以便 IO 排队，您​​只需要等待。

# c++ - windows下的输出格式

> ID：13549481
> 
> 赞同：0
> 
> 时间：2012-11-25T08:33:44.820
> 
> 标签：c++, io, precision, outputstream

我正在用 C++ 开发一个项目，结果打印在`std::cout`这样的地方：

```
std::cout << std::setprecision(5) << "UNDERLYING=" << v_underlying << '\n';
std::cout << "RESULT=" << v_result << '\n'; 
```

这使 ：

```
UNDERLYING=1.2454
RESULT=0.000054785 
```

但是由于未知原因，当我启动我的团队伙伴的计算机程序时，输出是这样的：

```
UNDERLYING=1.2454
RESULT=5.4785e-031 
```

我们在 Windows 7 X64 位下，所以你知道是否有在 Windows 下更改的选项或问题来自代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:36:51.673

用于`std::cout << std::fixed;`指定输出格式

# android - Android 从不关闭应用程序 - 不需要的行为

> ID：13549485
> 
> 赞同：0
> 
> 时间：2012-11-25T08:34:37.490
> 
> 标签：android, shutdown

如果另一个应用程序需要内存，我知道 Android 在杀死不需要的进程方面是如何工作的，但我不喜欢我目前开发的应用程序的以下行为：

*   我启动我的应用程序，它有很多不同的屏幕/活动
*   使用后，我按下手机的主页按钮并切换到其他应用程序。（假设我在屏幕 C 上的活动 C 处于活动状态时执行此操作）。

我的手机是 HTC One X，我检查过，当我运行我通常需要的应用程序时，总是有大约 300MB 的可用内存。

问题：即使我在几天没有使用它后重新启动应用程序，应用程序也会在屏幕 C 上以 Activity C 重新启动。在我看来，几天不使用应用程序后，它应该以“欢迎屏幕”重新启动我建立。

由于没有使用背景进程或资源（所有这些东西都是通过按下按钮完成的并且必须完成 - 所以不需要自动化的后台进程），我认为，Android 并不觉得有必要杀死它。

有谁知道，“Android 最佳实践”的样子，或者我可以在哪里阅读应用程序在这种情况下应该有什么行为？

（......我不是在寻找代码，但我不知道我应该用什么方法来解决这个问题）

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:06:46.707

我认为您可以轻松地执行`finish()`活动的 on`onPause()`方法。

不确定这是否是最佳做法。等待其他答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:03:45.577

如果我没记错的话，以下标志可以在`Intent`开始新的使用时为您提供帮助`Activity`：[FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)。正如文档所说：

> f 设置，新的活动不保存在历史堆栈中。一旦用户离开它，活动就完成了。

因此，如果`Activities`除了欢迎屏幕之外的所有应用程序都使用此标志启动，则下次用户返回您的应用程序时，他会到达欢迎屏幕。此解决方案的缺点是，如果用户在使用您的应用程序时接到电话，当通话结束时，他也会被转移到欢迎屏幕。不知道有没有其他解决办法。希望这可以帮助。

# javascript - ASP.net MVC4 使用的捆绑和缩小工具是什么？

> ID：13549486
> 
> 赞同：3
> 
> 时间：2012-11-25T08:34:43.383
> 
> 标签：javascript, asp.net-mvc-4, google-closure-compiler

ASP.net MVC4 提供捆绑和缩小功能来组合和压缩 JS 文件。我可以知道它背后的引擎是什么吗？是公共引擎还是ASP.net MVC自己实现的新引擎？我正在分析将 Google 闭包编译器添加到我的 JS 代码中的需求，但似乎 ASP.net MVC4 捆绑和缩小与 Google 闭包编译器的工作类似。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:50:44.743

MVC 4 中的捆绑和缩小是一个 Nuget 包：[Microsoft ASP.NET Web Optimization Framework 1.0.0](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.0.0)。您可以查看依赖关系，向**Hao Kung**`nuget.org`提问，因为他是开发人员之一（[Microsoft ASP.NET Web Optimization Framework 1.0.0 调试模式错误](https://stackoverflow.com/questions/12000935/microsoft-asp-net-web-optimization-framework-1-0-0-debug-mode-error)）。将来它将是开源的。

# c - 迭代指向 char 指针的指针

> ID：13549488
> 
> 赞同：1
> 
> 时间：2012-11-25T08:34:46.553
> 
> 标签：c

假设你有这样的程序

```
#include <stdio.h>

int
main (void)
{
  char **foo;
  foo = malloc (100);
  foo[0] = "cat";
  foo[1] = "dog";
  foo[2] = "bird";
  return 0;
} 
```

你怎么能迭代数组，例如打印所有元素，而不用硬编码上限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:38:03.043

要么在某处定义了边界，要么在数组中有一个标记，指示数组的结尾（这个标记必须从数组元素可能具有的值中排除）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T08:40:00.873

既然你想做：

```
foo[0] = "cat"; 
```

它将字符串文字的地址存储到数组 foo 的元素中，数组的每个元素必须是 char 指针类型。但你正在做：

```
foo = malloc (100); 
```

这使得 foo 的每个元素都是 char 而不是 char 指针。

你需要什么：

```
foo = malloc (100 * sizeof(char*)); 
```

要遍历数组的填充元素，您可以保持一个显式计数器等于填充元素的数量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:01:55.813

这是动态分配数组的外观的简单片段，它易于使用、学习（经过精心评论等）：

```
`/*
 * Copyright (c) 2012 Allan Ference <f.fallen45@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * This module does not depend on any other modules, therefore
 * it can be placed on top of any project and used safely.
 *
 * Note that it uses the xmalloc, xrealloc, ... macros therefore
 * a replacement or an implementation is needed for this to compile.
 */
#ifndef _STACK_H
#define _STACK_H

/**
 * This stack does not actually act as stacks in C, it was made
 * to be used on "stack" and not heap allocated but of course can be
 * heap-allocated.
 *
 * 'ptr' is dynamicly allocated of course depending on the size
 * needed, see stack_push().
 */
struct stack {
    void **ptr;     /* the internel array */
    size_t size;
};

#define INITIAL_SIZE 10
#define SIZE_INCREMENT 2

/**
 * Initialize stack `s'.  Allocates memory of size `size` if > 0
 * otherwise uses INITIAL_SIZE
 *
 * This does NOT allocate memory for the stack itself, it's intended to
 * be used like this:
 *
 *    struct stack stack;
 *    if (!stack_init(&stack, 0))
 *        ...
 *  But as note, it's not a *MUST* to use it on stack only.
 *
 * \sa stack_free().
 */
static inline bool stack_init(struct stack *s, size_t size)
{
    if (!size)
        size = INITIAL_SIZE;
    s->ptr = calloc(size, sizeof(void *));
    if (!s->ptr)
        return false;
    s->size = size;
    return true;
}

/**
 * Free memory used.
 *
 * if destructor is not NULL, this function calls destructor on each pointer
 * that's going to be destroyed  (which means, the user must free it himself).
 *
 * \sa stack_push().
 */
static inline void stack_free(struct stack *s, void (*destructor) (void *))
{
    int i;

    for (i = 0; i < s->size; ++i) {
        if (!s->ptr[i])
            continue;
        if (!destructor)
            free(s->ptr[i]);
        else
            (*destructor) (s->ptr[i]);
    }

    free(s->ptr);
    s->size = 0;
    s->ptr = NULL;
}

/**
 * Preserve some memory of size `new_size'.
 * Does not free previous memory.
 * This is called whenever memory is needed (Internal use).
 */
static inline bool stack_grow(struct stack *s, int new_size)
{
    void *tmp;

    xrealloc(tmp, s->ptr, new_size * sizeof(void *), return false);
    s->ptr = tmp;
    s->size = new_size;
    return true;
}

/**
 * Push item `ptr' on this stack
 *
 * `where' can be -1 if we have to figure out the place ourselves.
 * Specifiying where is good when the user know where to place (saves some cycles).
 *
 * constructor can be NULL if not needed.
 *
 * \returns -1 on failure or pos of where the item is placed.
 * \sa stack_pop(), stack_top(), stack_remove().
 */
static inline int stack_push(struct stack *s, void *ptr, int where, void (*constructor) (void *))
{
    int place = where;

    /* If where is -1, find the place ourselves.  */
    if (place == -1) {
        /* Find the first empty place.  */
        for (place = 0; place < s->size && s->ptr[place]; ++place);
        /* If there's no space left, reallocate  */
        if (place == s->size && s->ptr[place] != NULL) {
            if (!stack_grow(s, s->size + SIZE_INCREMENT))
                return -1;
        }
    } else {
        assert(place >= 0);
        if (place > s->size) {
            if (!stack_grow(s, (place - s->size) + 1))
                return -1;
        }
    }

    s->ptr[place] = ptr;
    if (constructor)
        (*constructor) (ptr);
    return place;
}

/**
 * Pop an item from the top stack.
 *
 * The user must free the pointer himself (and null terminate if possible).
 *
 * \sa stack_top()
 */
static inline void *stack_pop(struct stack *s)
{
    return s ? s->ptr[--s->size] : NULL;
}

/**
 * Get an item off the top of the stack.
 *
 * This keeps the pointer on the stack.
 *
 * \sa stack_remove(), stack_pop()
 */
static inline void *stack_top(struct stack *s)
{
    return s ? s->ptr[s->size - 1] : NULL;
}

/**
 * Remove an item from the stack.
 *
 * If compare_function is specified, it's used instead.
 * This free's the pointer `ptr' unless destructor is specified.
 * duplicate is useful when the user knows the item can be duplicated.
 *
 * \sa stack_push().
 */
static inline bool stack_remove(struct stack *s, void *ptr, bool (*compare_function) (const void *, const void *),
        void (*destructor) (void *), bool duplicate)
{
    int i;
    bool r;

    for (i = 0; i < s->size; ++i) {
        if (!compare_function) {
            r = !!(s->ptr[i] == ptr);
            if (r) {
                if (!destructor)
                    free(s->ptr[i]);
                else
                    (*destructor) (s->ptr[i]);
                s->ptr[i] = NULL;
            }
        } else {
            r = (*compare_function) (s->ptr[i], ptr);
            if (r) {
                 if (!destructor)
                    free(s->ptr[i]);
                else
                    (*destructor) (s->ptr[i]);
                s->ptr[i] = NULL;
            }
        }

        if (!duplicate && r)
            break;
    }

    return r;
}

#endif  /* _STACK_H */ 
```

酱料：[https ://github.com/allanference/csnippets/blob/master/csnippets/stack.h](https://github.com/allanference/csnippets/blob/master/csnippets/stack.h)

希望这可以帮助。

# margin - 填充与有边距的儿童

> ID：13549490
> 
> 赞同：5
> 
> 时间：2012-11-25T08:34:58.630
> 
> 标签：margin, padding, css

让我们先说我了解盒子模型。在我作为开发人员的短暂时间里，我一直试图非常密切地使用语义 html 并使用响应式设计实践。我最近在一家新公司找到了一份 Jr. Developer 的工作，而我的 Sr. 坚决反对填充。就像他不想在任何情况下使用它一样。他希望我在所有东西上使用设置的高度和宽度，如果我需要模拟填充，我必须使用边距添加一个子 div。例如：

```
<div class="caption" style="padding: 5px;">
   Caption
</div> 
```

需要成为

```
<div class="caption">
   <div class="captionContainer" style="margin:5px;">
       Caption
   </div>
 </div> 
```

我试图弄清楚为什么会这样，以及我怎么可能解释为什么我认为这很糟糕，但它不起作用。这对我来说似乎很不对劲。他说这是因为 padding 拉伸了元素的宽度，对此我用 box-sizing:border-box 回应。

我必须按他说的做，但有时我们会谈论它，他似乎确实接受了我的建议，但我认为我说的不是正确的事情。它实际上更好吗？如果不是，为什么？

这个问题可能会因为有点讨论而被关闭，但这让我发疯了，我不知道还能去哪里。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:43:21.183

It's anything **but** better. There is no sense in trying to add padding to a box using other methods when a CSS property made for this exact purpose, `padding`, has existed since pretty much forever.

Anyway, one counter-example I can think of is the fact that adjoining vertical margins can [collapse](http://www.w3.org/TR/CSS21/box.html#collapsing-margins).

[There are several ways to cancel margin collapse](https://stackoverflow.com/questions/12000166/why-no-rule-for-un-collapsing-margins/12000292#12000292) (heck, giving an element padding is one!), but these methods aren't *designed* for preventing margin collapse as much as they do so as a *side effect*, and there is no simple "off switch" for collapsing.

Authors who don't understand the nature and the purpose of collapsing will find themselves having a world of trouble dealing with it. If you're going to use margins to simulate padding you may be in for a hard time. It's not worth it.

Your given markup is a prime example of when margin collapse can happen unexpectedly and cause headaches: if there are no other styles on your `.caption` element (like borders or padding), the margins of `.captionContainer` will combine with those of `.caption`, resulting in something like [this](https://stackoverflow.com/questions/9519841/why-does-this-css-margin-top-style-not-work) happening. In the same vein, it's a great counter-example of when trying to simulate padding using margins ends up backfiring.

Compared to the potential issues caused by margin collapse, I honestly find your suggestion of using `box-sizing: border-box` a good case against using margins to simulate padding, while preserving the exact widths that you need because it's *designed* to solve that problem. Browser support is fairly decent too (IE8+), so unless you're designing for really old browsers, it should be OK to use it.

There are several other potential pitfalls of using margins to do things that `padding` was clearly made to do, but margin collapse is one of the biggest issues you'll face.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:37:25.007

### 用这种方式解释他：

**边距**位于块元素的外部，而填充位于内部。

Use margin to separate the block from things outside it, and **padding** to move the contents away from the edges of the block.

# asp.net-mvc-3 - CodeFirstMembership Provider 的 ResetPassword 函数

> ID：13549493
> 
> 赞同：1
> 
> 时间：2012-11-25T08:35:09.177
> 
> 标签：asp.net-mvc-3, code-first, reset-password

有谁知道如何在**MVC3 应用**`ResetPassword`程序中实现自定义*成员资格提供*程序的功能？

 **请注意，我正在使用[CodeFirstMembershipProvider](http://codefirstmembership.codeplex.com/)。它似乎没有这样的`ResetPassword`功能实现。**

# java - 使用 Guice 绑定服务

> ID：13549504
> 
> 赞同：0
> 
> 时间：2012-11-25T08:37:34.543
> 
> 标签：java, dependency-injection, guice

我已经编写了几个使用 Guice 将它们粘合在一起的服务。例如，一些抽象服务 A 由这些接口描述

```
Response
Request
Service 
```

并且实现被定义为

```
ResponseImpl
RequestImpl
ServiceImpl 
```

**将所有上述实现绑定到服务模块中的接口，还是仅绑定服务类本身会更好吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:00:58.930

当您分离合同（接口）和实现（服务实现）时，您通常只将接口（api-jar）交给应用程序客户端。所以他们永远不会看到（也不会关心）任何实现的 bean。

因此，在您的客户端代码中，绑定接口：

```
@Provides
public Service lookup() {
   return .... whatever you need to do to access the Service
} 
```

# java - 在java中绘制一个形状但在屏幕上保留最新的形状

> ID：13549506
> 
> 赞同：1
> 
> 时间：2012-11-25T08:37:40.687
> 
> 标签：java, drawing, paint, shapes

我创建了一个函数，可以在其中单击 Jpanel 中的某个位置，并在鼠标单击的位置绘制一个形状。我遇到的问题是当我单击一个新位置时，它会移动形状并重新绘制它。我希望以前的形状“燃烧”到屏幕上并留在那里。它不必与任何数据相关联，我只希望形状的图像每次都显示它曾经的位置。我尝试了很多不同的事情，但没有成功。这就是我的意思：

```
public void paintComponent(Graphics g) {

    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;
    g2.setColor(Color.BLUE);
    g2.fillRect(n, m, 32, 32); //I want each one of these shapes to be new, not
                                       //moving, but redrawn      

    ////////////////////////////////////////////////
    //This is just drawing a grid and doing other things(irrelevant)
    g2.fill(new Ellipse2D.Double(x, y, 32, 32));
    for (int i = 0; i < 500; i += 32) {
        g2.drawRect(i, j, 32, 32);
        for (int j = 0; j < 500; j += 32) {
            g2.drawRect(i, j, 32, 32);
        }
    }

    if (paintColBlock){
        System.out.println("Drawing Block at " + n +"," + m);
        paintColBlock = false;
    }
   /////////////////////////////////////////////////////////////////////    

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T08:49:06.843

像这样保持一个`ArrayList`of `Point`s：

```
public void paintComponent(Graphics g) {

super.paintComponent(g);
Graphics2D g2 = (Graphics2D) g;
g2.setColor(Color.BLUE);
for(Point p : points)
    g2.fillRect(p.x, p.y, 32, 32); 
```

`Point`每次单击鼠标时向数组添加一个新的，然后调用`repaint()`：

```
public void mousePressed(MouseEvent evt){
    points.add(new Point(evt.getX(),evt.getY());
    repaint();
} 
```

# websphere - 如何使用python脚本配置线程池

> ID：13549508
> 
> 赞同：0
> 
> 时间：2012-11-25T08:38:11.543
> 
> 标签：websphere

我想通过 python 脚本在 WAS7 中配置默认​​线程池的最大大小（WAS 管理控制台 > 服务器 > 服务器类型 > WebsphereApplicationServer > server_name > ThreadPools > Default 的最大大小）。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:45:05.557

`AdminServerManagement`（Jython 脚本库的一部分）得到了`configureThreadPool`一种简化事情的方法。

它根据您提供的参数创建或修改 ThreadPool。

你可以看到它的实现和一些文档`AdminServerManagement.py`位于`{WAS_HOME}/scriptLibraries/servers/V70`

# perl - 仅当哈希存在时才从哈希中分配值的最简洁方法？

> ID：13549513
> 
> 赞同：4
> 
> 时间：2012-11-25T08:39:26.147
> 
> 标签：perl

我发现自己经常写这样的代码：

```
if ($optionalParamsRef->{verbosity}) {
    $settingsHash{verbosity} = $optionalParamsRef->{verbosity};
} 
```

`$optionalParamsRef->{verbosity}`但是，重复两次似乎很冗长。有没有更短的方法？

**编辑**：是的，我意识到这是检查真/假而不是“存在”。我正在寻找的是与此等效的简洁功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T11:20:09.043

正如其他人所提到的，您的代码检查错误。如果您认为假值不存在，则可以使用逻辑或。可能这不是你想要的。

```
$settingsHash{verbosity} = $optionalParamsRef->{verbosity} || $default; 
```

但也许定义性就足够了。它仍然没有检查存在，但如果你的哈希不包含`undef`值，这可能就足够了：

```
$settingsHash{verbosity} = $optionalParamsRef->{verbosity} // $default; 
```

使用“新”定义或运算符`//`而不是逻辑或`||`。我知道这些示例并不等同于您发布的代码，因为它们总是分配一些东西，但根据我的经验，这通常很有用，所以也许它会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T08:46:00.660

`$optionalParamsRef->{verbosity}`请注意，您正在检查**true**， not **exist**。

可能的方法：

```
foreach my $k (qw/verbosity param1 param2 param3/) { #Enumerate keys here
     $settingsHash{$k} = $optionalParamsRef->{$k} if exists($optionalParamsRef->{$k});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:19:19.530

一个简洁的功能等价物：

```
sub {$_[0]=$_[1] if $_[1]}->($settingsHash{verbosity}, $optionalParamsRef->{verbosity}); 
```

但是，IMO，您的代码的主要问题是您只是有条件地设置 $settingsHash{verbosity}，从而使您无法做一些更简单的事情，例如：

```
$settingsHash{verbosity} = $optionalParamsRef->{verbosity} || somedefault 
```

甚至：

```
%settingsHash = ( %defaultSettings, %$optionalParamsRef ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T08:44:51.717

```
my $v = $optionalParamsRef->{verbosity};
$settingsHash{verbosity} = $v if $v; 
```

 *```
for ($optionalParamsRef->{verbosity}) {
    $settingsHash{verbosity} = $_ if $_;
} 
```*

# android - 在哪里可以找到 AlertDialog xml 文件

> ID：13549514
> 
> 赞同：0
> 
> 时间：2012-11-25T08:39:59.360
> 
> 标签：android, xml, android-layout, android-alertdialog

我想自定义 android AlertDialog ，我需要 android 中的默认 xml 布局文件。

我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:29:47.260

您的默认 XML 布局文件位于 res 目录的 layout 文件夹中。

# asp.net-mvc-4 - Autofac在asp.net mvc web api中返回不同的实例

> ID：13549518
> 
> 赞同：1
> 
> 时间：2012-11-25T08:41:25.843
> 
> 标签：asp.net-mvc-4, asp.net-web-api, autofac

我在 asp.net mvc 和 webapi 项目中使用 autofac。

在配置中我这样做：

```
var builder = new ContainerBuilder();
builder.Register(x => NHibernateConfigurator.BuildSessionFactory()).SingleInstance();
builder.Register(x => x.Resolve<ISessionFactory>().OpenSession()).InstancePerHttpRequest();
builder.RegisterSource(new AnyConcreteTypeNotAlreadyRegisteredSource());

builder.RegisterControllers(Assembly.GetExecutingAssembly());
builder.RegisterApiControllers(Assembly.GetExecutingAssembly());

var container = builder.Build();

DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
config.DependencyResolver = new AutofacWebApiDependencyResolver(container); 
```

现在的问题是，在 api 控制器中，如果我通过构造函数注入 ISession 并调用

```
DependencyResolver.Current.GetService<ISession>() 
```

它将返回 2 个不同的实例。

我猜这个问题是因为这两条线：

```
DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
config.DependencyResolver = new AutofacWebApiDependencyResolver(container); 
```

但是我怎样才能让它返回相同的实例呢？

**编辑：**

更清楚一点 - 我期望每个 HttpRequest 都有相同的 ISession 实例。现在我在同一个请求上得到不同的实例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:00:20.293

好的，我想我找到了答案 - 它无法完成.. 至少不能使用 DependencyResolver。

[ASP .Net 4 Web Api RC + Autofac 手动解析](https://stackoverflow.com/questions/11123732/asp-net-4-web-api-rc-autofac-manual-resolving)

我按照评论中所说的做了，将 IComponentContext 添加到构造函数中，并用它来解决我需要的问题。

它似乎正在工作。谢谢。

# javascript - 使用 jQuery 或 PHP 将 CSS 应用于 html 文档中的单词/字母

> ID：13549519
> 
> 赞同：2
> 
> 时间：2012-11-25T08:41:25.373
> 
> 标签：javascript, jquery, html, css, jquery-plugins

> **可能重复：**
> [在 jQuery 中查找文本字符串并将其设为粗体](https://stackoverflow.com/questions/9794851/find-text-string-in-jquery-and-make-it-bold)

假设如果我有一个这样的 html 文档

```
<div>
hi this is one line<br>
<p>This is second line</p>
<p>This 'word' is within quote</p>
<p>Another 'lorem ipsum' in quote</p>
</div> 
```

我如何将不同的 CSS 仅应用于在我的文档中多次出现的单词“line”，以及对使用 jQuery 出现在引号内的所有单词使用不同的 CSS。某种模式匹配和应用 css

有任何可用的脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:50:50.647

您可以使用 JQuery[包含](http://api.jquery.com/contains-selector/)选择器，如下所示：

[http://jsfiddle.net/z4ZwF/](http://jsfiddle.net/z4ZwF/)

```
function replaceText(textToSearch,classToApply)
{
  $('div').html($('div').html().replace(new RegExp(textToSearch, 'g'),"<span class='"+classToApply+"'>"+textToSearch+"</span>"));
} 
```

示例：`replaceText("'lorem ipsum'",'red')`或`replaceText("line",'red')`

**编辑**

在搜索和替换中添加引号包装：http: [//jsfiddle.net/z4ZwF/3/](http://jsfiddle.net/z4ZwF/3/)

```
function replaceText(textToSearch,classToApply,searchAndWrapQuote)
{
    searchAndWrapQuote = searchAndWrapQuote || false;
    quote = (searchAndWrapQuote) ? "'" : "";

  $('div').html($('div').html().replace(new RegExp(quote+textToSearch+quote, 'g'),"<span class='"+classToApply+"'>"+quote+textToSearch+quote+"</span>"));
}

replaceText("lorem ipsum",'red',true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:58:51.817

您不能将任何样式直接应用于“行”字。您需要的是解析内容并将您的“行”包装到某个标签 - 例如，之后您可以将 CSS 中的一些样式应用于此类。您可以在 php 和 javascript 中执行此操作。

# jquery - 关于跨浏览器技巧

> ID：13549524
> 
> 赞同：2
> 
> 时间：2012-11-25T08:41:47.647
> 
> 标签：jquery, cross-browser

我有一个很棒的[jQuery 插件](http://rafael.adm.br/css_browser_selector/)，它允许您将特定于浏览器的 CSS 插入到您的样式表中。

例子：

```
#foo {width: 100%; border: 12px solid white}
.opera #foo {width: 99%; border: 12px solid red}
.gecko #foo {width: 33%; border: 12px solid blue} 
```

...你明白了。

问题：

是否有类似的东西可用于插入特定于浏览器的 jQuery 片段，甚至是特定于浏览器的 HTML？例如（伪代码）：IF opa、fadeIn div#opera、IF webkit fadeIn div#webkit 等。

例如，我试图弄清楚如何制作一个仅针对 Opera 显示的弹出窗口，以及另一个仅针对 Webkit 等的弹出窗口。

基本上，发布任何有助于针对特定浏览器的内容，因为我想学习我需要知道的所有内容。我正在寻找有助于简化跨浏览器任务的插件，而且我不太关心旧浏览器。

更新：

这是我正在使用的插件：

```
function css_browser_selector(u) {
var ua = u.toLowerCase(),
    is = function (t) {
        return ua.indexOf(t) > -1
    }, g = 'gecko',
    w = 'webkit',
    s = 'safari',
    o = 'opera',
    m = 'mobile',
    h = document.documentElement,
    b = [(!(/opera|webtv/i.test(ua)) && /msie\s(\d)/.test(ua)) ? ('ie ie' + RegExp.$1) : is('firefox/2') ? g + ' ff2' : is('firefox/3.5') ? g + ' ff3 ff3_5' : is('firefox/3.6') ? g + ' ff3 ff3_6' : is('firefox/3') ? g + ' ff3' : is('gecko/') ? g : is('opera') ? o + (/version\/(\d+)/.test(ua) ? ' ' + o + RegExp.$1 : (/opera(\s|\/)(\d+)/.test(ua) ? ' ' + o + RegExp.$2 : '')) : is('konqueror') ? 'konqueror' : is('blackberry') ? m + ' blackberry' : is('android') ? m + ' android' : is('chrome') ? w + ' chrome' : is('iron') ? w + ' iron' : is('applewebkit/') ? w + ' ' + s + (/version\/(\d+)/.test(ua) ? ' ' + s + RegExp.$1 : '') : is('mozilla/') ? g : '', is('j2me') ? m + ' j2me' : is('iphone') ? m + ' iphone' : is('ipod') ? m + ' ipod' : is('ipad') ? m + ' ipad' : is('mac') ? 'mac' : is('darwin') ? 'mac' : is('webtv') ? 'webtv' : is('win') ? 'win' + (is('windows nt 6.0') ? ' vista' : '') : is('freebsd') ? 'freebsd' : (is('x11') || is('linux')) ? 'linux' : '', 'js'];
c = b.join(' ');
h.className += ' ' + c;
return c;
};
css_browser_selector(navigator.userAgent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:56:20.467

似乎这个插件所做的只是在`html`标签上附加了几个类。要使用 jQuery 测试它们，您可以执行

```
$html = $("html"); //cached for performance reasons
...

if( $html.is(".gecko") ){
  ... 
```

. 更好的是，看看插件是否还设置了一些可以直接使用的全局（或在全局范围内可见）变量。很可能是这样。

另外，当您想知道浏览器*可以做*什么时，请不要看浏览器*是*什么。特征检测，而不是浏览器检测（除非该特征不能被可靠地检测到，如 DCoder 所述）。[Modernizr](http://modernizr.com/)库可用于此目的。

# android - 从图库中选择图像并在图像视图中设置相同大小

> ID：13549528
> 
> 赞同：0
> 
> 时间：2012-11-25T08:43:12.027
> 
> 标签：android, android-gallery

我想从图库中选择图像并在活动中的 imageview 中设置相同大小的图像，但我编写了代码，但它没有在 imageview 中以相同大小显示。它的显示很小。如何以相同的尺寸实现。

这是它设置的imageview大小

```
mainImageView.setLayoutParams(new LayoutParams(VirtualMirrorActivity.convertDpToPixel(270,this),VirtualMirrorActivity.convertDpToPixel(280, this)));

mainImageView.setBackgroundResource(R.layout.border);
LinearLayout linearLayout=(LinearLayout)findViewById(R.id.linearLayout);
linearLayout.addView(mainImageView); 
```

从图库中选择图像的意图。

```
Intent intent = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

startActivityForResult(Intent.createChooser(intent, "Select Picture"),10);

if (requestCode == 10 && resultCode == Activity.RESULT_OK) 
            {             
                Uri contentUri = data.getData();          
                String[] proj = { MediaStore.Images.Media.DATA };         
                Cursor cursor = managedQuery(contentUri, proj, null, null, null);         
                int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);         
                cursor.moveToFirst();         
                imageUri = Uri.parse(cursor.getString(column_index));

                InputStream stream = getContentResolver().openInputStream(data.getData());
                tempBitmap = BitmapFactory.decodeStream(stream);
                mainImageView.setImageBitmap(tempBitmap);

                if(tempBitmap!=null)
                {
                    isModel = false;
                    VMAdjustFrame.issaved = false;
                    isPhotofromAccount = false;
                    isPhotoChanged = true;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:00:17.337

`mainImageView.setLayoutParams().height = 270` `mainImageView.setLayoutParams().width= 270`

图像大小

删除它并尝试上面的代码 `mainImageView.setLayoutParams(new LayoutParams(VirtualMirrorActivity.convertDpToPixel(270,this),VirtualMirrorActivity.convertDpToPixel(280, this)));`

# shopify - session_hash 到底是什么？

> ID：13549533
> 
> 赞同：1
> 
> 时间：2012-11-25T08:43:47.597
> 
> 标签：shopify

我对其中一个 shopify 数据元素有疑问。

在网络挂钩阶段，我收到订单数据。

在此数据中，在“client_details”部分下，有一个名为“session_hash”的字段。

我想知道它是什么类型的数据（例如 session_id），以及您使用哪个哈希函数来生成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:30:54.550

该`session_hash`变量是我们用来识别单个客户的会话 id 的安全散列（正如您所猜测的那样）。

您可以使用它来识别特定的用户会话，但仅此而已。出于明显的安全原因，您不能解构哈希以获取原始会话 ID。

# java - 在 Eclipse 中调试已部署的 JAX-WS 服务

> ID：13549538
> 
> 赞同：0
> 
> 时间：2012-11-25T08:44:29.387
> 
> 标签：java, eclipse, web-services, debugging, remote-debugging

有一个用 Java 编写的 Web 服务（使用 jax-ws api），已经部署在服务器上。突然，对于一些 HTTP 请求，它开始给出奇怪的结果，我无法在我的本地机器上重现。我是否可以在同一台服务器上触发 HTTP 请求，并开始调试安装在本地机器上的 eclipse 上的代码。

请帮助我完成相同的步骤。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:50:22.427

您的 Web 服务部署在哪个应用程序服务器上？

您需要在您的 Tomcat、JBoss、Websphere 以及任何应用程序服务器上启用远程调试，并且只需要在 eclipse 中创建一个远程调试任务以连接正确的 ip/port。

这就是你所要做的。

要为您的应用程序服务器激活远程调试，只需将以下行添加到 JAVA_OPTS：`-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n`

对于日食，您可以点击[此链接](http://www.eclipsezone.com/eclipse/forums/t53459.html)

# android - 防止多个版本的 Android 应用产生相同的服务

> ID：13549543
> 
> 赞同：3
> 
> 时间：2012-11-25T08:45:05.823
> 
> 标签：android, service, alarmmanager

我正在创建一个 Android 应用程序，它将在 5 个应用程序商店中以精简版（免费）和完整版的形式打包和分发。

该应用程序包含一个`Service`trigger by `AlarmManager.setRepeating(...)`，因此它以用户可配置的间隔触发，通常在每 5 分钟和每小时之间。

我预见的麻烦是，用户可能会同时获得该应用程序的免费和完整版本，并且可能来自多个商店。我可以做些什么来防止多个实例`Service`被触发`AlarmManager`？确保`Service`名称（清单中的包名称和`<service>`属性）相同是否有帮助？有没有一种方法可以让应用程序的一个变体在第一次启动时禁用其他变体请求的待处理意图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:10:29.533

不是一个有效的建议：每次`AlarmManager`启动您的服务时，您都可以检查是否安装了较新的版本（例如完整版）。如果是，则通过向`AlarmManager.setRepeating(...)`方法提供负间隔毫秒来取消警报。

更清洁的方法将强制删除较旧的安装。首次启动您的应用程序版本时，请检查之前可能安装的其他可能软件包的列表。如果有任何删除它们。属于他们的服务也将被删除。

以下是如何检查包的存在性：

```
public static boolean isPackageInstalled(Context context, String uri) {
    PackageManager pm = context.getPackageManager();
    boolean installed = false;
    try {
        pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
        installed = true;
    } catch (PackageManager.NameNotFoundException e) {
        installed = false;
        // Not installed
    }
    return installed;
} 
```

此处描述了如何通过调用意图来卸载包：[隐式意图卸载应用程序？](https://stackoverflow.com/questions/7868460/implicit-intent-to-uninstall-application)

# ios - 失去理智导致获取核心数据总是返回错误

> ID：13549544
> 
> 赞同：1
> 
> 时间：2012-11-25T08:45:14.863
> 
> 标签：ios, core-data, magicalrecord

好吧，直奔主题……

这是我第一次使用 Magical Panda 的 Magical record 我遵循[http://yannickloriot.com/2012/03/magicalrecord-how-to-make-programming-with-core-data-pleasant/的教程](http://yannickloriot.com/2012/03/magicalrecord-how-to-make-programming-with-core-data-pleasant/)

这是我的代码

人.h

```
@property (nonatomic, retain) NSString * firstname;
@property (nonatomic, retain) NSString * lastname;
@property (nonatomic, retain) NSNumber * age; 
```

AppDelegate.M

```
@implementation AppDelegate

- (void)dealloc
{
    [_window release];
    [_viewController release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     [MagicalRecord setupCoreDataStackWithStoreNamed:@"MyDatabase.sqlite"];
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[JASidePanelController alloc] init];
    self.viewController.shouldDelegateAutorotateToVisiblePanel = NO;
  //  self.viewController = [[[ViewControllerCenter alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.viewController.centerPanel = [[UINavigationController alloc] initWithRootViewController:[[ViewControllerCenter alloc] init]];

    //UINavigationController *navContorller=[[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.viewController.rightPanel = [[NetraRightWindow alloc] init];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{

    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{

}

- (void)applicationWillTerminate:(UIApplication *)application
{
     [MagicalRecord cleanUp];
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

这是我的保存方法：

```
-(void)fetchRecords{

   NSManagedObjectContext *localContext= [NSManagedObjectContext MR_defaultContext];

    // Create a new Person in the current thread context
    Person *person                          = [Person MR_createInContext:    [NSManagedObjectContext MR_defaultContext]];
    person.firstname                        = @"Test";
    person.lastname                         = @"merdeka123";
    person.age=[NSNumber numberWithInt:123];

    [[NSManagedObjectContext MR_defaultContext] MR_save];
    NSArray *Result=[Person MR_findAll];

    NSLog(@"Result==%@",Result); 
```

结果::

```
2012-11-25 15:43:38.033 Trip[10491:15e03] Cok==(
    "<Person: 0x866fe40> (entity: Person; id: 0x866e170 <x-coredata://15583C03-3EB4-479B-9EF2-B0BC750FC987/Person/p1> ; data: <fault>)",
    "<Person: 0x866fe80> (entity: Person; id: 0x8670210 <x-coredata://15583C03-3EB4-479B-9EF2-B0BC750FC987/Person/p2> ; data: <fault>)",
    "<Person: 0x81471a0> (entity: Person; id: 0x815c2a0 <x-coredata://15583C03-3EB4-479B-9EF2-B0BC750FC987/Person/p3> ; data: {\n    age = 123;\n    firstname = Test;\n    lastname = merdeka123;\n    time = nil;\n})"
) 
```

为什么它总是数据错误？这是魔法记录的问题吗？或者我的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T08:52:00.120

这不是错误——它是 Core Data 的一个特性，称为“故障”。这是[苹果的描述](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)：

> 故障减少了应用程序消耗的内存量。故障是表示尚未完全实现的托管对象的占位符对象，或表示关系的集合对象：
> 
> 托管对象故障是适当类的实例，但其持久变量尚未初始化。关系故障是表示关系的集合类的子类。故障允许 Core Data 在对象图上设置边界。由于没有实现故障，托管对象故障消耗的内存较少，与故障相关的托管对象根本不需要在内存中表示。

如果您想查看每个 Person 对象，则必须专门访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T09:45:08.383

我在 Magical 唱片中也一直犯错。经过大量的头部撞击。

```
[[NSManagedObjectContext defaultContext] saveToPersistentStoreWithCompletion:^(BOOL success, NSError *error) {

if (!success) {

NSLog(@"::: Error saving context :::");

}

}]; 
```

现在当你找到所有。通过在调试器中打印来检查对象。

```
Person *testObject = [Result objectAtIndex:0];
NSLog(@"%@", testObject.firstname); 
```

这应该在调试器中打印您的结果。

# c++ - 加载格式化的二进制文件并将信息分配给结构 c++

> ID：13549545
> 
> 赞同：1
> 
> 时间：2012-11-25T08:45:21.937
> 
> 标签：c++, stream

我终于想出了如何将一些特定格式的信息写入二进制文件，但现在我的问题是读回它并以原来的方式构建它。

这是我写入数据的函数：

```
void save_disk(disk aDisk)
{
    ofstream myfile("disk01", ios::out | ios::binary);
    int32_t entries;
    entries = (int32_t) aDisk.current_file.size();
    char buffer[10];
    sprintf(buffer, "%d",entries);

    myfile.write(buffer, sizeof(int32_t));

    std::for_each(aDisk.current_file.begin(), aDisk.current_file.end(), [&] (const file_node& aFile)
    {
        myfile.write(aFile.name, MAX_FILE_NAME);
        myfile.write(aFile.data, BLOCK_SIZE - MAX_FILE_NAME);
    });

} 
```

我最初创建它的结构以及我想将其加载回的结构如下组成。

```
struct file_node
{
    char  name[MAX_FILE_NAME];
    char  data[BLOCK_SIZE - MAX_FILE_NAME];

    file_node(){};
};

struct disk
{
    vector<file_node> current_file;
}; 
```

我真的不知道如何将其读回以使其以相同的方式排列，但无论如何这是我可悲的尝试（我只是试图扭转我为保存所做的事情）：

```
void load_disk(disk aDisk)
{
    ifstream myFile("disk01", ios::in | ios::binary);
    char buffer[10];

    myFile.read(buffer, sizeof(int32_t));

    std::for_each(aDisk.current_file.begin(), aDisk.current_file.end(), [&] (file_node& aFile)
    {
        myFile.read(aFile.name, MAX_FILE_NAME);
        myFile.read(aFile.data, BLOCK_SIZE - MAX_FILE_NAME);
    });

} 
```

**^^ 这绝对是错误的。^^**

我了解 ifstream 的基本操作，但实际上我所知道的只是在一个文本文件中读取它，任何比我有点迷茫的更复杂的东西。

有关如何阅读此内容的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:09:00.293

你很亲密。您需要以二进制形式写入**和**读取长度。

您的长度写入的这一部分是错误的：

```
char buffer[10];
sprintf(buffer, "%d",entries);
myfile.write(buffer, sizeof(int32_t)); 
```

它只写入长度的前四个字节，但长度是来自`sprintf()`调用的字符数据。您需要将其写为`entries`（整数）的二进制值：

```
// writing your entry count.
uint32_t entries = (uint32_t)aDisk.current_file.size();
entries = htonl(entries);
myfile.write((char*)&entries, sizeof(entries)); 
```

然后在阅读：

```
// reading the entry count
uint32_t entries = 0;
myFile.read((char*)&entries, sizeof(entries));
entries = ntohl(entries);

// Use this to resize your vector; for_each has places to stuff data now.
aDisk.current_file.resize(entries);
std::for_each(aDisk.current_file.begin(), aDisk.current_file.end(), [&] (file_node& aFile)
{
    myFile.read(aFile.name, MAX_FILE_NAME);
    myFile.read(aFile.data, BLOCK_SIZE - MAX_FILE_NAME);
}); 
```

或类似的东西。

注意 1：这不会进行错误检查，也不会考虑不同主机上可能存在不同字节序的可移植性（写入文件的大字节序机器，读取文件的小字节序机器）。这可能满足您的需求，但您至少应该意识到这一点。

注意 2：`load_disk()`通过**引用**传递您的输入磁盘参数：

```
void load_disk(disk& aDisk) 
```

**编辑**施工清洁`file_node`内容

```
struct file_node
{
    char  name[MAX_FILE_NAME];
    char  data[BLOCK_SIZE - MAX_FILE_NAME];

    file_node()
    { 
        memset(name, 0, sizeof(name));
        memset(data, 0, sizeof(data));
    }
}; 
```

如果您使用的是兼容的 C++11 编译器：

```
struct file_node
{
    char  name[MAX_FILE_NAME];
    char  data[BLOCK_SIZE - MAX_FILE_NAME];

    file_node() : name(), data() {}
}; 
```

# c++ - c ++比较在缓冲区中的2个字符串之间不起作用

> ID：13549546
> 
> 赞同：1
> 
> 时间：2012-11-25T08:45:26.990
> 
> 标签：c++, sockets, comparison, buffer

我有一个套接字，它从客户端读取字符串，然后在文本文件中搜索匹配项。

```
 vector<string> resultlist;
   int n;
   char* buffer = new char[256];

   bzero(buffer,256);
   n = read(sock,buffer,255);
   if (n < 0) error("ERROR reading from socket");
   printf("Here is the message: %s\n",buffer);
   readFile(buffer);
   string searchStr(buffer);
   for(int k=0; k<resultlist.size(); k++){
    if(resultlist[k].compare(searchStr)==0){ cout << resultlist[k+1] << endl; }
   }
   n = write(sock,"I got your message",18);
   if (n < 0) error("ERROR writing to socket"); 
```

所以基本上，结果列表是一个包含字符串变量的向量，我想比较它是否匹配，然后显示下一个变量。但是，我的比较总是失败。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:01:19.367

您从套接字获得的字符串很可能在末尾包含特殊字符，例如`\r`or `\n`。检查并清理它们。

# google-apps-script - getUserLoginId() 不适用于合作者

> ID：13549550
> 
> 赞同：0
> 
> 时间：2012-11-25T08:45:57.440
> 
> 标签：google-apps-script, google-sheets

getUserLoginId() 适合我，但不适用于我的合作者。我们都有编辑权限。我们都有 gmail 帐户和登录。以下函数作为 onEdit 触发器安装。有什么问题？我看了一下这个链接：[Google script: getUser() not working](https://stackoverflow.com/questions/11938703/google-script-getuser-not-working)，这似乎有一个相关的问题。在那里，他们谈论“登录 api”。所以我沿着那条路走。严重地？验证以找出谁在编辑共享电子表格？如果这实际上是通往救赎的道路，那么是否有人编写了执行此类任务的代码？还是我注定要再花一个星期或更长时间才能找出我允许修改我的电子表格的合作者的名字，这实际上是在修改我的电子表格？

```
function happyFunTime() {
      var s = SpreadsheetApp.getActiveSheet();
      var r = s.getActiveCell();
      var timeLastCalledColumnOffset = getTimeLastCalledColumnOffset();

      timeLastCalledColumnOffset++;

        var dateCell = s.getRange(r.getRow(), timeLastCalledColumnOffset);
        var targetSheetName=setRowColor(i);
        var user=Session.getActiveUser().getUserLoginId();
        var comment="Last Edited By: " + user;
        dateCell.setComment(comment);

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:43:07.207

Session.getActiveUser() 仅适用于特定域中的用户。或者，如果您的脚本部署为 Web 应用程序并设置为作为运行该应用程序的用户执行。

在你的情况下，它们都不是真的。所以，恐怕你运气不好。

# eclipse - Mercurial - 如何查看特定代码行的历史记录

> ID：13549555
> 
> 赞同：7
> 
> 时间：2012-11-25T08:46:45.020
> 
> 标签：eclipse, mercurial

我有一个包含数千行代码的 CSS 文件。我想查看何时更改了特定的代码行/代码块，而无需返回并查看更改此文件的每个修订版（这将花费很长时间！）

有没有办法使用 TortoiseHg、带有 Mercurial 插件的 Eclipse 或命令行来查看特定代码的历史记录？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-25T09:52:55.390

正确答案是`hg grep`（[Mercurial grep page](http://www.selenic.com/mercurial/hg.1.html#grep)）。

更深：

```
hg grep --all "PATTERN" FILENAME 
```

样本输出：

```
>hg grep --all "textdomain" functions.php
functions.php:2:-:load_theme_textdomain('fiver', get_template_directory() . '/translation');
functions.php:2:+:load_theme_textdomain('fiver', get_template_directory() . '/languages');
functions.php:1:+:load_theme_textdomain('fiver', get_template_directory() . '/translation'); 
```

（按顺序 - 此修订版中的文件名、修订版、操作、字符串）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-25T09:05:52.313

您可以使用：

```
hg annotate <file> 
```

找出哪个修订行被更改，然后`-r <revision>`在最后使用相同的命令以向后浏览修订。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T08:55:42.577

我认为没有选项可以查看文件的特定部分。但是要查看多个修订版的总文件的差异，您可以使用`hg diff`：

```
hg diff -r firstrevisionnumber:otherrevnumber filename 
```

例如，`hg diff -r 0:8 screen.css`

或命令`hg log screen.css`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-24T04:35:11.523

使用`hg histgrep --all PATTERN FILENAME`（以前`hg grep`在旧版本中，现在不再适用）

# android - `getContentResolver().openInputStream(uri)` 抛出 FileNotFoundException

> ID：13549559
> 
> 赞同：12
> 
> 时间：2012-11-25T08:47:38.733
> 
> 标签：android, image, android-contentresolver

我使用这个意图让用户选择一张照片：

```
Intent intent = new Intent(Intent.ACTION_PICK, 
                           MediaStore.Images.Media.INTERNAL_CONTENT_URI);
startActivityForResult(intent, INTENT_SELECT_PHOTO); 
```

并在`onActivityResult`：

```
Uri uri = data.getData();
InputStream inputStream = getContentResolver().openInputStream(uri); 
```

但它会`FileNotFoundException`在一些安卓设备上抛出。

的价值`uri`：

```
content://media/external/images/media/26467 
```

抛出的异常：

```
java.io.FileNotFoundException: No such file or directory 
```

而且很奇怪，它不会在其他一些android设备上抛出这个异常。什么会导致此错误以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T08:57:14.563

```
MediaStore.Images.Media.INTERNAL_CONTENT_URI 
```

对于本地设备上的图像或

```
MediaStore.Images.Media.EXTERNAL_CONTENT_URI 
```

用于 SD 卡上的图像。

你确定你的地址都正确吗？内部/外部处理因设备而异，也许这就是为什么它对某些设备起作用而对其他设备不起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:42:55.470

我面临同样的问题，但我通过使用 ImageView 的 setImageURI 方法解决了它。

您不必使用以下代码：

```
InputStream inputStream = getContentResolver().openInputStream(uri); 
```

只需使用以下功能：

```
imageViewCustomer.setImageURI(data.getData()); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-15T07:10:50.453

使用 Context.getContentResolver().openInputStream(Uri);

# php - 检查重复行并更新状态，保持第一个数据不变

> ID：13549562
> 
> 赞同：0
> 
> 时间：2012-11-25T08:48:09.980
> 
> 标签：php, mysql, duplicates

我的表示例：

```
Table_1

+-----id-----+-----zone-----+-----address-----+-----status-----+
=============+==============+=================+================+
     1              5                10               ok
     2              2                 8               ok
     3              3                 2               ok  
     4              2                 5               ok
     5              3                 2               ok 
     6              5                10               ok     
     7              3                 2               ok 
```

我需要检查重复的条目*[区域/地址组合]*并有这样的表：

```
Table_1

+-----id-----+-----zone-----+-----address-----+-----status-----+
=============+==============+=================+================+
     1              5                10               ok
     2              2                 8               ok
     3              3                 2               ok  
     4              2                 5               ok
     5              3                 2               duplicate 
     6              5                10               duplicate 
     7              3                 2               duplicate 
```

查询应检查区域、地址的重复组合，并应更新“状态”列。我需要保持第一个重复数据状态不变，其余重复数据应标记为“重复”？

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:34:30.040

你可以使用这个：

```
update
  Table_1 t1 inner join Table_1 t2
  on t1.zone=t2.zone
     and t1.address=t2.address
     and t1.id>t2.id
set t1.status='duplicate' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:56:28.693

我还没有测试过，但这样的东西应该可以工作。

```
update table_1 set status = 'duplicate' 
where exists 
select 1 from table_1 t 
where id != t.id
and zone = t.zone
and address = t.address
and t.status = 'ok' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:21:08.460

您可以分两步完成

```
# set all duplicate rows as "duplicate"
UPDATE Table_1 t1,(SELECT DISTINCT _t1.id,_t1.zone,_t1.address 
                   FROM Table_1 _t1 
                   INNER JOIN Table_1 _t2
                         ON (_t1.address= _t2.address AND _t1.zone = _t2.zone AND _t1.id != _t2.id) 
                   ) t2 
SET t1.status = 'duplicate' WHERE t2.id = t1.id; 
```

和

```
# set status = "ok" to the first row with status duplicate 
UPDATE Table_1 t1, (SELECT DISTINCT MIN(_t1.id) AS id FROM Table_1 _t1 
                     WHERE status = "duplicate" 
                     GROUP BY CONCAT(_t1.zone,"|",_t1.address)) t2 
SET t1.status = "ok" WHERE t2.id = t1.id 
```

# jsp - JSP包括页面使用参数

> ID：13549563
> 
> 赞同：0
> 
> 时间：2012-11-25T08:49:01.083
> 
> 标签：jsp, dynamic, include

我的问题很简单，解决方案也应该如此。:P

我有两个文件。

索引.jsp

```
<%  
String title = "Homepage";
String desc  = "...'";
String root  = ".";
String include = "content-index.jsp";
%>
<%@ include file="layout.jsp"%> 
```

还有我的 layout.jsp

```
...
<jsp:include page="{include}"/>
... 
```

我想将参数 index.jsp.include 中的内容用于此文件中的包含语句。这不会给我任何错误消息，但它也会返回一个空块，页面内容应该出现在该块中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:00:58.087

为什么你认为这应该有效？花括号在 JSP 中没有任何特殊含义。

你只需要`<jsp:include page="<%= include %>"/>`.

此外，您应该避免使用 scriptlet 并使用 JSP EL 和 JSTL：

```
<c:set var="title" value="Homepage"/>
<c:set var="include" value="content-index.jsp"/>

<jsp:include page="${include}"/> 
```

# php - 当mysql查询结果没有值时在PHP中显示消息

> ID：13549564
> 
> 赞同：0
> 
> 时间：2012-11-25T08:49:05.530
> 
> 标签：php, mysql, return-value

我在 PHP 中有一个显示 MySQL 查询结果的表。

数据库表**item_em**包含在数据库表 hypermarket_em中可用的大卖场中可用的商品的价格详细信息**。**有些**商品**在大卖场中不可用。因此，当我在表格中显示价格时，我希望那些没有价格的单元格为**N/A**。

 ****所以我的问题是我自己尝试了一个代码来在数据库表字段没有值时显示消息。但它不起作用，我也没有收到任何错误。任何想法都非常感谢。谢谢你。

> 这是我的代码

```
$res = mysql_query("SELECT h_id FROM hypermarket_em") or die(mysql_error());
echo"<tbody><tr>";
while($row = mysql_fetch_array( $res ))
{   
    $result = mysql_query("SELECT item_name FROM items_em WHERE h_id=".$row['h_id'])or die(mysql_error());
    while($drop_4 = mysql_fetch_array( $result ))
    {
         echo"<th scope=row>".$drop_4['item_name']."</th>";
         $rslt = mysql_query("SELECT price FROM items_em WHERE item_name='".$drop_4['item_name']."' and h_id=".$row['h_id'])or die(mysql_error());
         if (mysql_num_rows($rslt) == 0)
             echo"<td>N/A</td>";
         while($drop = mysql_fetch_array( $rslt ))
         {
             echo"<td>".$drop['price']."</td>";
         }
    }
}
echo"</tr></tbody>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:03:21.957

尝试反转你的`mysql_num_rows`并检查你是否有`>`超过`0`行 -

```
if (mysql_num_rows($rslt) > 0){
    while($drop = mysql_fetch_array( $rslt )){
      echo"<td>".$drop['price']."</td>";}
}
else{
     echo"<td>N/A</td>";} 
```

* * *

编辑-

我认为你想要做的是这样的 -

```
while($drop = mysql_fetch_array( $rslt )){
    if ($drop['price'] == ''){
      echo"<td>N/A</td>";}
    else{
      echo"<td>".$drop['price']."</td>";} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:55:19.827

```
$data = mysql_fetch_array( $res );
if (!empty($data)) {
   while($row = mysql_fetch_array( $res ))
   {   
      $result = mysql_query("SELECT item_name FROM items_em WHERE h_id=".$row['h_id'])or die(mysql_error());
      while($drop_4 = mysql_fetch_array( $result ))
      {
         echo"<th scope=row>".$drop_4['item_name']."</th>";
         $rslt = mysql_query("SELECT price FROM items_em WHERE item_name='".$drop_4['item_name']."' and h_id=".$row['h_id'])or die(mysql_error());
         if (mysql_num_rows($rslt) == 0)
             echo"<td>N/A</td>";
         while($drop = mysql_fetch_array( $rslt ))
         {
             echo"<td>".$drop['price']."</td>";
         }
      }
   }
} else {
   echo "<td>No record found</td>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:07:14.787

不太确定您要在这里做什么，但您似乎也想简化查询。尝试类似：

```
SELECT
    *
FROM
    hypermarket_em h
    LEFT JOIN items_em i ON ( h.h_id = i.h_id ); 
```

使用此查询，您可以执行以下操作：

```
while($drop = mysql_fetch_array( $rslt )){
    echo"<td>" . ( empty( $drop['price'] ) ? 'N/A' : $drop['price'] ) . "</td>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:38:37.853

所以这是我的答案。

```
$res = mysql_query("SELECT DISTINCT h_id FROM hypermarket_em") or die(mysql_error());
echo"<tbody><tr>";
while($row = mysql_fetch_array( $res ))
{   
    $result = mysql_query("SELECT item_name FROM items_em WHERE h_id=".$row['h_id'])or die(mysql_error());
    while($drop_4 = mysql_fetch_array( $result ))
    {
            echo"<th scope=row>".$drop_4['item_name']."</th>";
            $rslt = mysql_query("SELECT price FROM items_em WHERE item_name='".$drop_4['item_name']."' and h_id=".$row['h_id'])or die(mysql_error());
        while($drop = mysql_fetch_array( $rslt ))
        {
            echo"<td>".$drop['price']."</td>";
        }
    }
}
$res = mysql_query("SELECT DISTINCT h_id FROM hypermarket_em") or die(mysql_error());
while($row = mysql_fetch_array( $res ))
{
    $result = mysql_query("SELECT item_name FROM items_em WHERE h_id=".$row['h_id'])or die(mysql_error());
    if(mysql_num_rows($result)<=0)
        echo"<td>N/A</td>";
}
echo"</tr></tbody>"; 
```

我必须执行两次相同的查询，因为我想要订单中的商品名称和价格值。所以我首先打印项目名称，然后只打印价格或“N/A”消息。

感谢大家的帮助..：）****

# javascript - 使用 CSS 过渡和 Javascript 创建一个移动的 3d 框

> ID：13549568
> 
> 赞同：5
> 
> 时间：2012-11-25T08:50:12.270
> 
> 标签：javascript, css, 3d, transition, translate

我一直在使用 CSS 尝试创建一个 3d 框，您可以使用 vanilla javascript 选择面部。

它只是更改盒子 div 的 className 并使用 transition 属性在位置之间平滑过渡。

这是一个 jsfiddle 来展示一个工作示例[http://jsfiddle.net/synthet1c/VdDmA/1/](http://jsfiddle.net/synthet1c/VdDmA/1/)

目前它看起来很酷，但它的表现并不像我想要的那样......有谁知道我如何在盒子经历过渡时保持盒子稳固？目前，如果面部从 360 度变为 90 度，则面部将朝错误的方向旋转 270 度。我理解它为什么这样做，但无法解决它。

我添加了所有浏览器前缀，但只在 firefox 上使用过。

为任何建议欢呼，

安德鲁 #right, #back, #left, #front { 高度：150px; 宽度：150px；位置：绝对；边框：1px 实心 rgba(200,200,200,0.7); 背景颜色：rgba（0,0,255,0.5）；边距：0px；}

```
.right{
    transform: rotateY(90deg) translatez(75px) translatex(-75px);
    transition: all 4s;
}

.back{
    transform: rotateY(180deg) translatez(0px) translatex(0px);
    transition: all 4s;
}

.left{
    transform: rotateY(270deg) translatez(75px) translatex(70px);
    transition: all 4s;
}

.front{
    transform: rotateY(0deg) translatez(150px) translatex(0px);
    transition: all 4s;
} 
```

```
var id = function(elem){
    var theId = document.getElementById(elem);
    return theId;
}

function button1(){
    id('front').className = 'front';
    id('right').className = 'right';
    id('back').className = 'back';
    id('left').className = 'left';
}

function button2(){
    id('front').className = 'right';
    id('right').className = 'back';
    id('back').className = 'left';
    id('left').className = 'front';
}   

function button3(){
    id('front').className = 'back';
    id('right').className = 'left';
    id('back').className = 'front';
    id('left').className = 'right';
}   

function button4(){
    id('front').className = 'left';
    id('right').className = 'front';
    id('back').className = 'right';
    id('left').className = 'back';
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T02:44:33.333

其实很简单。您只需要检查一下`dif`您当前所处的角度和您想要到达的角度之间的绝对值之间的差异（我们称之为）是否已经结束`180°`，如果是，则以绝对值的`360°`负值旋转`dif`，旋转方向由 的符号给出`dif`。

我还对 CSS 进行了一些更改，如果您想了解更多有关如何创建逼真的立方体的信息，[**您可以查看我对类似问题的（真正）详细答案**](https://stackoverflow.com/questions/9812196/css-3d-animation-how/14421939#14421939)。

# [演示](http://dabblet.com/gist/4600310)

**HTML**：

```
<div class='buttons'>
    <button class='btn'>Front</button>
    <button class='btn'>Left</button>
    <button class='btn'>Back</button>
    <button class='btn'>Right</button>
</div>
<div class='house'>
    <div class='face front'>Front</div>
    <div class='face back'>Back</div>
    <div class='face right'>Right</div>
    <div class='face left'>Left</div>
</div> 
```

相关**CSS**：

```
body /* or parent of .house */ { perspective: 45em; }
.house { position: relative; transform-style: preserve-3d; transition: 1s; }
.house, .face { width: 10em; height: 10em; }
.face {
    box-sizing: border-box;
    position: absolute;
    padding: 1em;
}
.front { transform: translateZ(5em); background: rgba(255, 165, 0, .75); }
.back { 
    transform: rotateY(180deg) translateZ(5em);
    background: rgba(30, 144, 255, .75);
}
.right {
    transform: rotateY(90deg) translateZ(5em);
    background: rgba(220, 20, 60, .75);
}
.left {
    transform: rotateY(-90deg) translateZ(5em);
    background: rgba(127, 255, 0, .75);
} 
```

**JavaScript**：

```
(function(){
    var btnsEl = document.querySelector('.buttons'), currentAngle = 0;
    btnsEl.addEventListener('click', function(e){
        var b = e.target.innerHTML.toLowerCase(), 
            house = document.querySelector('.house'), 
            btns = {'front': 0, 'left': 90, 'back': 180, 'right': -90}, 
            dif = btns[b] - currentAngle%360;
        if(!e.target.classList.contains('btn') || dif === 0) return;
        currentAngle += (Math.abs(dif) > 180) ? 
                        (Math.abs(dif) - 360)*Math.abs(dif)/dif : 
                        dif;
        house.style['-webkit-transform'] = 'rotateY(' + currentAngle + 'deg)';
        house.style['transform'] = 'rotateY(' + currentAngle + 'deg)';
    }, false); 
}()); 
```

* * *

此外，您可以使用纯 CSS 制作旋转 3D 框。但是，>`180°`旋转问题只能用 JavaScript 来解决。

## [纯CSS版demo](http://dabblet.com/gist/4600036)

# ruby-on-rails - rails 中 form_for url 的正确语法

> ID：13549572
> 
> 赞同：0
> 
> 时间：2012-11-25T08:51:07.863
> 
> 标签：ruby-on-rails

这可能很简单，我仍在接受 rails 语法。将 form_for 的 url 中的 address_id 传递给修改后的路由的正确语法是什么？

这是表格 - 注意“address_id 参数”

```
 <div class="one_fourth floatcenter">
    <%= form_for address, :url => edit_address_path(:id => address.id), :method => :get do |f| %>
        <%= content_tag(:button, :class => 'btn btn-inverse') do %> Edit Address
        <% end %>
    <% end %>
  </div> 
```

这是我配置的路线：

```
get "edit_address/:id" => "member/addresses#edit" 
```

由于某种原因，ID 没有被传递给控制器​​......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:38:18.727

`form_for address`如果 address 是一个持久对象，应该就足够了，但如果还不够，那`form_for address, url: edit_address_path(address)`就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-05T05:10:06.277

这很简单。代替`url`，你把你的 post 方法路由：

```
<%= form_for(@post, url: super_posts_path) do |f| %>

...  
<% end %> 
```

**您还按操作调用**

```
 <%= form_for @friend,:url=> { action: "create_friend"} do |f|%><br>
  <%= f.label :u_from %>
      <%= f.text_field :u_from %>
     <%= f.label :u_to %>
     <%= f.text_field :u_to %>
    <%= f.submit%>
 <% end %> 
```

# scala - Scala：类中的字段和构造函数中的参数之间的真正区别是什么

> ID：13549574
> 
> 赞同：17
> 
> 时间：2012-11-25T08:51:10.463
> 
> 标签：scala, constructor, field

这两个类有什么区别：

```
class Person {
  var name : String = _
  var surname: String = _
}

class Person (var name:String, var surname: String) 
```

name 和 surname 始终是 Class Person 中的字段。相等？我只是改变你实例化类 Person 的方式。是对的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T09:35:59.510

两者的区别在于，在第二种情况下，字段也是构造函数的参数。如果您将参数声明为`val`or `var`，它们将自动成为公共成员。如果你没有`var`/`val`并且不在构造函数中的任何地方使用变量，它们将不会成为成员，如果你这样做，它们将是私有成员。如果您将它们`case class`设为 es，则在第一种情况下您将不会取消应用变量。

因此，回答您的问题：在这种情况下，您是对的，您只需更改设置值的方式。

编辑：

提示：您可以看到 scala 编译器生成的内容，如果您使用 调用编译器`-print`，这也适用于 REPL。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-25T09:41:16.740

我已经编译了一个类的两个版本：

```
class PersonV0 {
  var name : String = _
  var surname: String = _
}

class PersonV1 (var name:String, var surname: String) 
```

区别在于构造函数：

```
public experimental.PersonV0();
  Code:
   0:   aload_0
   1:   invokespecial   #23; //Method java/lang/Object."<init>":()V
   4:   return
}

public experimental.PersonV1(java.lang.String, java.lang.String);
  Code:
   0:   aload_0
   1:   aload_1
   2:   putfield    #12; //Field name:Ljava/lang/String;
   5:   aload_0
   6:   aload_2
   7:   putfield    #16; //Field surname:Ljava/lang/String;
   10:  aload_0
   11:  invokespecial   #24; //Method java/lang/Object."<init>":()V
   14:  return
} 
```

# django - 如何在settings.py 中为tastepie mongoengine 配置django？

> ID：13549576
> 
> 赞同：0
> 
> 时间：2012-11-25T08:51:52.773
> 
> 标签：django, tastypie, mongoengine

我刚开始构建restful api。我开始项目烹饪并创建应用程序到 api。我使用了美味派和美味派-mongoengine 插件。在 settings.py 我这样配置

```
INSTALLED_APPS +=('tastypie',
'tastypie_mongoengine',
'django.contrib.sessions')
MIDDLEWARE_CLASSES += ('django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',)
    import mongoengine
mongoengine.connect('cooking')
AUTHENTICATION_BACKENDS = (
    'mongoengine.django.auth.MongoEngineBackend',
    )
SESSION_ENGINE = 'mongoengine.django.sessions' 
```

我评论这个

```
#DATABASES = {
#    'default': {
#        'ENGINE': 'django.db.backends.', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
#        'NAME': '', # Or path to database file if using sqlite3.
#        'USER': '', # Not used with sqlite3.
#        'PASSWORD': '', # Not used with sqlite3.
#        'HOST': '', # Set to empty string for localhost. Not used with sqlite3.
#        'PORT': '', # Set to empty string for default. Not used with sqlite3.
#    }
#} 
```

但是当我同步它时，`django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.` 我希望 django 项目也使用 mongo 吗？如何正确配置？感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:49:41.803

`syncdb`如果您不使用关系数据库，则不应运行。

阅读[MongoEngine](https://mongoengine-odm.readthedocs.org/en/latest/django.html)文档，了解如何将其与 Django 集成。

# python - Django folder structure issues

> ID：13549577
> 
> 赞同：1
> 
> 时间：2012-11-25T08:51:57.833
> 
> 标签：python, django

Coming from an Apache / php world there is something i can't figure out searching for django Development best practices :

With symfony2 framework (or even java Play!) you always have a "public" folder and the webserver only serve files from this folder. Obvious Strategy for security reason it is also clear during dev process to put public files in this folder.

In django it is not clear at all : from my readings it appears as good practice to have a static folder at root level PLUS a Media folder for UGC files and à template folder. No main "public" folder.

Can someone help me to clear my mind here ? Would't it be more secure to have one folder to contain all requests and protect the rest of the app ?

Tanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:25:43.143

There are two different types of 'static' files in django.

1.  Bundled resources/assets with applications (css,javascript typically)
2.  Any files uploaded by your users.

Since these are two different categories of static files, django offers two mechanisms to deal with them. As the first is more common than the second (you may not have an application that requires users to upload files), dealing with the first condition comes built in with django.

As per the standard layout, applications that require static files will include them in a directory called `static` within the application directory. Django will search for this directory inside any app that is in `INSTALLED_APPS` for static files. If you have files that are not tied to any app, you can put them in a separate directory. This directory should be added to `STATICFILES_DIRS` (a tuple) so django is aware of it.

Once you have done this, the `collectstatic` command will gather all the static files (from the `static` subdirectories in all applications in `INSTALLED_APPS` and any directory in `STATICFILES_DIRS`) and put them in a directory pointed to by `STATIC_ROOT`; this is so `{{ STATIC_URL }}` tags work correctly in templates.

Now, all you do is move/point/link the `STATIC_ROOT` directory so that its accesible from the web. Django expects that all files in `STATIC_ROOT` are accessible at the root URL that specified by `STATIC_URL`.

* * *

For user uploaded files, django is more hands off. All it really cares about is that you don't put your user uploaded files in the same place as the `collectstatic` command will be using to read its files - this means, that the `MEDIA_ROOT` cannot be a directory or subdirectory of `STATICFILE_DIRS` (if you have specified any directories here, typically this setting is undefined in vanilla django setups).

`MEDIA_ROOT` is a directory that django can manipulate by creating subdirectories under the root (see the [`FileField` documentation](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField) for example).

`MEDIA_URL` is the URL prefix that points to the root for user-uploaded files. This is so that commands that generate automatic URLs for models work correctly.

* * *

As these are two different classes of static files, there are two different types of security and deployment requirements. For example, you might want to store user uploaded files in a S3 bucket but put your application's assets somewhere else.

This is why these two similar things are segregated in django.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:14:52.077

You can copy all your static assets into a public/static folder with the command

```
> python manage.py collectstatic 
```

provided you have set a static path in your manage.py

STATIC_ROOT = "~/mypath/public/static/"

Each app should have its own static assets.

# mysql - MySQL 用其他表中的名称替换 id

> ID：13549581
> 
> 赞同：0
> 
> 时间：2012-11-25T08:53:04.170
> 
> 标签：mysql, join, replace, userid

我在用着

```
SELECT m.id, r.username AS `from`, s.username AS `to`, m.message
FROM msgs m
INNER JOIN usrs r ON r.user_id = m.from
INNER JOIN usrs s ON s.user_id = m.to; 
```

在消息的'from'和'to'列中用用户名替换用户ID，然后将其输出到带有mysql usrmsgs < script.sql > output.txt的文件

我想将 msgs 表本身的“from”和“to”中的用户 ID 替换为来自 usrs 的相应用户名。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:26:07.187

```
alter table msgs
    add column from_name varchar(<size>),
    add column to_name varchar(<size>);

update msgs m 
join usrs r ON r.user_id = m.from
join usrs s ON s.user_id = m.to
SET m.from_name = r.username, m.to_name = s.username;

alter table msgs drop column from, drop column to; 
```

# javascript - 如何使用 Javascript 根据类名重新排序 div

> ID：13549586
> 
> 赞同：2
> 
> 时间：2012-11-25T08:53:48.510
> 
> 标签：javascript, jquery

这是我的 HTML

```
<div id="subscriptionContainer">

<div class="subscription">
  <div class="subs-btn">
        <div class="subscribed">Subscribed</div>
  </div>
</div>

<div class="subscription">
  <div class="subs-btn">
        <div class="btnGetit">Get It</div>
  </div>
</div>

<div class="subscription">
  <div class="subs-btn">
        <div class="subscribed">Subscribed</div>
  </div>
</div>

<div class="subscription">
  <div class="subs-btn">
        <div class="btnGetit">Get It</div>
  </div>
</div>

<div class="subscription">
  <div class="subs-btn">
        <div class="subscribed">Subscribed</div>
  </div>
</div>

<div class="subscription">
  <div class="subs-btn">
        <div class="btnGetit">Get It</div>
  </div>
</div>

</div> 
```

现在我想用“subscriptionContainer”重新排列“subscription”div，这样class =“subscribed”的div应该移到底部，class =“btnGetit”的div应该全部上移。请用 Javascript 或 JQuery 给出解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T08:55:58.663

```
var $wrap = $('#subscriptionContainer');
$wrap.find('.subscribed').parents('.subscription').appendTo( $wrap ); 
```

**演示：http:** [//jsbin.com/ebudux/2/edit](http://jsbin.com/ebudux/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:48:25.613

这是我最终解决的纯 JavaScript 实现

```
var container = document.getElementById('subscriptionContainer');
var allDivs = container.getElementsByTagName('div');
var subsProds = new Array();
var count = 0;

for (i = 0; i < allDivs.length; i++)
{
    var currentElement = allDivs[i];
    if (currentElement.className == 'subscribed') {
        subsProds[count] = currentElement.parentNode.parentNode;
        container.removeChild(currentElement.parentNode.parentNode);
        count++;
    }
}
for (i = 0; i < subsProds.length; i++)
    container.appendChild(subsProds[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-29T07:47:44.263

```
var $wrap = $('#subscriptionContainer');
$wrap.find('.subscription').children('.subscribed').appendTo( $wrap ); 
```

# javascript - 如何每次加载页面时只重新加载一次

> ID：13549587
> 
> 赞同：2
> 
> 时间：2012-11-25T08:54:11.890
> 
> 标签：javascript, jsp

我有一个 JSP 页面，即使删除了其中一个内容，它也会显示以前的内容。我正在努力寻找问题，但我需要快速解决这个问题。我的*JavaScript*很弱，所以请帮帮我。我需要一个能够在每次访问页面时自动重新加载页面的*JavaScript 。*重新加载页面确实可以解决问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T09:05:12.113

如果你只想做一次，我会使用`localStorage`：

```
if (localStorage.getItem('loadedOnce') === 'true') {
    // don't reload page, but clear localStorage value so it'll get reloaded next time
    localStorage.removeItem('loadedOnce');
} else {
    // set the flag and reload the page
    localStorage.setItem('loadedOnce', 'true');
    document.location.reload(true);
} 
```

我真的建议您调查一下为什么会出现这种情况，而不是试图解决这个问题。

**笔记：**

这在旧浏览器中不起作用。有关更多信息，请参阅[mdn 的兼容性表](https://developer.mozilla.org/en-US/docs/DOM/Storage#Browser_compatibility)（IE8 确实支持它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:14:19.947

基于**@Omar**的回答，类似于**tjameson**的回答。它只是使用cookies。

```
var int=self.setTimeout(function(){refresh()},1000);
function refresh() {      
  if (document.cookie.indexOf("reloaded") === -1){
    document.cookie += ";reloaded";
    document.location.reload(true);        
  }
  else {
    document.cookie = document.cookie.replace(/;reloaded/g, '');
  }
} 
```

# c++ - 使用 Alpha-Beta 修剪的迭代加深 Negamax

> ID：13549594
> 
> 赞同：1
> 
> 时间：2012-11-25T08:56:18.890
> 
> 标签：c++, algorithm

我的程序中有一个有效的 negamax 算法。但是，我需要该程序在时间之内找到最佳的移动方式`kMaxTimePerMove`。我做了一些研究，似乎在我的 negamax 算法中使用迭代深化是最好的方法。现在，我开始搜索的函数如下所示：

```
// this is a global in the same scope as the alpha-beta functions, so they can check the elapsed time
clock_t tStart;

int IterativeDeepening(Board current_state)
{
    bool overtime = false;
    int depth = 0;
    tStart = clock();

    MoveHolder best_move(-1, kWorstEvaluation);

    while ((static_cast<double> (clock() - tStart)/CLOCKS_PER_SEC) < kMaxTimePerMove)
    {
        MoveHolder temp_move = AlphaBetaRoot(kWorstEvaluation, -best_move.evaluation_,++depth, current_state, overtime);          
        if (!overtime)
            best_move = temp_move;
    }

    return best_move.column_;
} 
```

我认为我还应该将以前的最佳移动重新排序到子列表的前面，但是，我正在等待实现它，直到我得到基本版本的工作。实际的 Alpha-Beta 函数如下所示：

```
MoveHolder AlphaBetaRoot(int alpha, int beta, int remaining_depth, Board current_state, bool &overtime)
{
    MoveHolder best(-1, -1);
    if (overtime)
        return MoveHolder(0,0);

    std::vector<Board> current_children;
    current_state.GetBoardChildren(current_children);

    for (auto i : current_children)
    {
        best.evaluation_ = -AlphaBeta(-beta, -alpha, remaining_depth - 1, i, overtime);
        if ((static_cast<double> (clock() - tStart)/CLOCKS_PER_SEC) > kMaxTimePerMove)
        {
            overtime = true;
            return MoveHolder(0,0);
         }
        if (best.evaluation_ >= beta)
            return best;
        if (best.evaluation_ > alpha)
        {
            alpha = best.evaluation_;
            best.column_ = i.GetLastMoveColumn();
        }
    }
    return best;
}

int AlphaBeta(int alpha, int beta, int remaining_depth, Board2 current_state, bool &overtime)
{
    if (overtime)
        return 0;
    if ((static_cast<double> (clock() - tStart)/CLOCKS_PER_SEC) > kMaxTimePerMove)
    {
        overtime = true;
        return 0;
    }

    if (remaining_depth == 0 || current_state.GetCurrentResult() != kNoResult)
    {
        return current_state.GetToMove() * current_state.GetCurrentEvaluation();
    }

    std::vector<Board> current_children;
    current_state.GetBoardChildren(current_children);
    for (auto i : current_children)
    {
        int score = -AlphaBeta(-beta, -alpha, remaining_depth - 1, i, overtime);
        if (score >= beta)
        {
            return beta;
        }
        if (score > alpha)
        {
            alpha = score;
        }
    }
    return alpha;
} 
```

当我尝试调试时，一切似乎都按预期工作。但是，当我将迭代深化版本与常规的 alpha-beta 实现进行对比时，它总是会失败。有时它似乎被“卡住”，并返回一个可怕的举动。

举个例子，如果这个程序被“强迫”在下一回合移动，否则对手会获胜，它不会阻止胜利。在那次移动中，它报告说它正在搜索深度为 38。我发现该算法极难调试，因为如果我中断执行，它会破坏时间。

我不确定我是否错误地实现了算法，或者只是这里有一个棘手的错误。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:51:25.867

您正在使用`-best_move.evaluation_`作为搜索的 beta 值，`best_move`从前一个深度的最佳移动在哪里。这是不正确的：假设一个动作在 depth=2 时看起来不错，但在更深的时候却变得很糟糕。这种方法将继续认为它是好的，并导致在其他移动中不应该发生的 beta 截止。

您应该在 (-infinity, infinity) 上搜索每次迭代以解决此问题。您还可以使用[抽吸窗口](https://www.chessprogramming.org/Aspiration_Windows)来限制 alpha-beta 范围。

请注意，由于您不使用前一个迭代来改进下一个迭代的移动顺序，因此迭代深化将导致结果稍差。理想情况下，您希望移动排序从转置表和/或前一次迭代的主要变化中选择最佳移动。

# django - 具有可变数量的空表单的表单集

> ID：13549595
> 
> 赞同：1
> 
> 时间：2012-11-25T08:56:19.047
> 
> 标签：django, django-forms, inline-formset

我希望这很清楚 - 我认为这是一件非常标准的事情。

我想`formset`用许多空表单创建一个，但是每次呈现表单集时，空白表单的数量需要有所不同。例如，我可以获得 2 个空表单：

```
MyFormSet = inlineformset_factory(ParentModel, MyModel, extra=2)
# and in the view...
f = MyFormSet() # has 2 empty forms. 
```

但问题是我最初不知道我想要多少个空表格。假设我想在一个内联模型表单集中呈现多个表单以响应 GET 参数。`MyFormSet()`现在总是给我 2 个，不多不少。

我想要这样的东西：

```
MyFormSet = inlineformset_factory(ParentModel, MyModel)
# In the view...
f = MyFormSet(extra=some_number())
# ... render f 
```

但显然这行不通。每次我想用不同数量的空白表单呈现表单集时，`MyFormSet`是否需要重新定义？`formset_factory`还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:38:42.917

您可以在视图中使用动态额外参数调用 inlineformset_factory，没问题。django 管理员甚至比这更具动态性（动态子类化等等）。

# java - Integer.decode(String s)

> ID：13549597
> 
> 赞同：2
> 
> 时间：2012-11-25T08:56:25.887
> 
> 标签：java

```
class Test{

    public static void main(String Args[]){

        Integer x;
        x = Integer.decode("0b111");
        System.out.println(x);
    }
} 
```

这不适用于二进制的前缀 0 和前缀为 0 的八进制。正确的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T09:01:22.073

查看 的文档[`Integer.decode`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#decode%28java.lang.String%29)，我没有看到二进制文件*应该*工作的迹象。八进制应该可以工作，前缀只有 0：

```
System.out.println(Integer.decode("010")); // Prints 8 
```

您可以像这样处理“0b”的二进制指标：

```
int value = text.toLowerCase().startsWith("0b") ? Integer.parseInt(text.substring(2), 2)
                                  : Integer.decode(text); 
```

显示 15 的二进制、八进制、十进制和十六进制表示的完整示例代码：

```
public class Test {
    public static void main(String[] args) throws Exception {
        String[] strings = { "0b1111", "017", "15", "0xf" };
        for (String string : strings) {
            System.out.println(decode(string)); // 15 every time
        }
    }

    private static int decode(String text) {
        return text.toLowerCase().startsWith("0b") ? Integer.parseInt(text.substring(2), 2)
                                     : Integer.decode(text);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:05:57.403

Integer.decode 无法解析二进制，请参阅 API。但八进制工作正常，例如：

```
int i = Integer.decode("011"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:20:34.637

从 Java 7 开始，您可以直接在代码中使用[二进制文字。](http://docs.oracle.com/javase/7/docs/technotes/guides/language/binary-literals.html)但是，请注意，这些类型是 、`byte`或（而*不是*）。`short``int``long` *`String`*

 *```
int x = 0b111; 
```*

# c++ - 刷新页面时 OLE-Server 忙：AccessViolationException

> ID：13549599
> 
> 赞同：1
> 
> 时间：2012-11-25T08:57:08.033
> 
> 标签：c++, access-violation, ole, managed

我在用户的机器上安装了一个托管的 32 位 C++ OLE-Server（查看器应用程序），并注册为特定扩展的 OLE-Server；网页在框架内“提供”具有此扩展名的文件。

当 OLE-Server 忙于处理网页中的文件时（Win7-IE9），如果用户刷新页面，Windows 会弹出一个“不工作”框，并且程序会在事件日志中获取 AccessViolationException 条目。

我确实在这段时间很忙的主要代码周围有一个 try-catch(Exception ^pe) ，但它似乎没有捕捉到异常。

有没有办法处理这种情况？

# unit-testing - HTTP 请求来测试请求是否正常？

> ID：13549603
> 
> 赞同：0
> 
> 时间：2012-11-25T08:58:21.930
> 
> 标签：unit-testing, httprequest

互联网上是否有任何“仪表页面”或查询一些流行页面（如谷歌）的一般程序，以便它返回恒定的已知输出？

我想编写一个单元测试，如果互联网正常工作并且数据传输正确，它将成功。

**更新**

我需要 HTTP 来检查所有堆栈，包括我的应用程序部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:01:19.000

我喜欢[www.something.com](http://www.something.com)（注意 www）。自从我找到它以来它没有改变，并且输出非常小。

我不认为这是官方的或任何东西。

# php - PHP/MYSQL 显示数据库

> ID：13549605
> 
> 赞同：0
> 
> 时间：2012-11-25T08:58:36.757
> 
> 标签：php, html, mysql, phpmyadmin

如何使此显示首先显示最近的用户？

```
<?php

$host="mysql13.000webhost.com"; // Host name 
$username="a2670376_Users"; // Mysql username 
$password="PASSWORD"; // Mysql password 
$db_name="a2670376_Pass"; // Database name 
$tbl_name="passes"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// select record from mysql 
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);
?>
<table background='https://lh6.ggpht.com/DFABQFuYSXLBiB6qlvDPfOONOUxCiwM6_S-    dHnjW82iognQToTkORsy7RVXsAz0Y23w=w705' width='50%'>
<tr>
<th align='left'>Submition</th><th align='center'>ScreenName</th><th     align='right'>Password</th>
</tr>
<tr>
<th align='left'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='right'>
<hr color='lime' width='100%'/>
</th>
</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td background='transparent' align='left'><i><b><? echo $rows['id']; ?></b></i></td>
<td background='transparent' align='center'><i><b><? echo $rows['username']; ?></b></i>    </td>
<td background='transparent' align='right'><i><b><? echo $rows['password']; ?></b></i>   </td>
</tr>

<?php
// close while loop 
}
?>

</table>

<?php
// close connection; 
mysql_close();
?>
<center> 
```

所以当它在我的网站上运行时，它会像这样显示

```
1 username password

2 username password

3 username password 
```

我希望它像这样显示

```
3 username password

2 username password

1 username password 
```

最近的第一个，我似乎无法弄清楚

请不要发布诸如使用`mysqli`或不安全之类的东西我知道，一旦我让它正常工作，我会修复它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T09:01:12.877

将您的查询更改为：

```
// select record from mysql 
$sql="SELECT * FROM $tbl_name order by id desc"; 
```

# symfony - 如何在奏鸣曲管理包中调整列大小和居中内容

> ID：13549613
> 
> 赞同：0
> 
> 时间：2012-11-25T08:59:54.797
> 
> 标签：symfony, symfony-sonata, sonata-admin

如何调整奏鸣曲管理包中的列大小和中心内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:21:37.460

您可以从 sonataAdmin 覆盖 layout.css

# asp.net-mvc - MVC 网站上的 YAF.NET 集成

> ID：13549615
> 
> 赞同：0
> 
> 时间：2012-11-25T09:00:12.717
> 
> 标签：asp.net-mvc, yetanotherforum, yaf

我希望将 YAF.NET (http://yafnet.codeplex.com/) 集成到多年前用 MVC 2.0 编写的现有网站中。我希望将它作为一个独立的论坛，而不是集成到我现有的页面中。

我创建了一个目录并复制了所有必需的文件、bin、.config 等，但出现此错误：

“无法加载文件或程序集‘System.Web.Mvc，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35’或其依赖项之一。系统找不到指定的文件。”

我不明白他为什么要加载 mvc dll .. 任何人都可以帮我解决这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:18:57.693

Web.config 文件从它们的父级继承，所以如果你的根网站是为 MVC 设置的，你的应用程序 web.configs 将继承这些设置。

在这种情况下，根 web.config 可能添加了一些您需要删除的程序集引用。简单的方法是将`<clear />`规则添加到程序集部分（在 system.web 中）：

```
<compilation>
  <assemblies>
    <clear />
    <!-- add new assembly references here -->
  </assemblies>
</compilation> 
```

另一种方法是使用`remove`允许您删除特定引用的规则。

```
 <compilation>
  <assemblies>
    <remove assembly="System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
 </compilation> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:01:46.387

简单..是星期天，对不起:)

我需要在我的论坛文件夹中复制所有 YAF 的 dll + ASP.NET MVC dll + 在 YAF 的 web.config 中添加以下行：

# php - 在浏览器会话中存储表单信息的替代方法

> ID：13549622
> 
> 赞同：0
> 
> 时间：2012-11-25T09:00:59.930
> 
> 标签：php, mysql

我希望我网站的访问者在注册帐户之前填写职位信息。填写职位信息并用户注册后，在用户确认其电子邮件地址之前，该职位实际上不会发布。我的问题是，如果用户关闭他的浏览器并稍后确认他的帐户，那么职位发布就消失了，因为我将它保存在浏览器会话中。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:07:49.143

将信息存储在数据库中。

无论如何，您最终都必须这样做才能让其他人看到它。

当会话过期时，您不能依赖会话。

**回应评论：**

如果您在发送电子邮件之前没有存储电子邮件地址，那么您实际上并没有进行电子邮件验证。我会将电子邮件地址存储在用户表中，验证标志为 0。然后当用户验证时，您可以将其设置为 1。然后您知道可以显示与该用户链接的任何内容。

# sql - 如何将 SQL 查询更改为 PL/SQL

> ID：13549628
> 
> 赞同：0
> 
> 时间：2012-11-25T09:01:24.057
> 
> 标签：sql, plsql

我有 3 张桌子。

司机, 旅行, tripLegs

在驱动程序表中，列是 E#、L#、STATUS。在行程表中，列是 T#、L#、REG#、trip_DATE 在tripLeg 表中，列是 T#、LEG#、DEPARTURE、DESTINATION

首先我尝试了一个 sql 查询，它是：

```
select d.l#, count(tg.leg#) as total_no_of_legs
from driver d left outer join trip t on (d.l# = t.l#)
left outer join tripleg tg on (t.t# = tg.t#)
group by d.l#; 
```

我得到的结果是：

```
L#         Total_no_of_legs
-----------------------------
11111        20 
```

等等。

这是所有 T# 的腿的总腿数，例如

```
T#1 's leg# = 3
T#2's leg# = 10
T#3's leg# = 7 
```

Total = 20 这就是为什么 L# 11111 总腿数是 20。但我想找出每个 L# 的最大腿数是 10。我如何进行查询以找出由 T 组成的 LEG# 组的最大数量#?

之后，我如何真正开始将其转换为 PL/SQL 语句？

整天都在想，看书。仍然找不到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:53:46.890

> *但我想找出每个 L# 的最大腿#*

也许我错过了一些东西，但不是那么简单：

```
select d.l#, 
       max(tg.leg#) as max_leg_nr
from driver d 
  left outer join trip t on (d.l# = t.l#)
  left outer join tripleg tg on (t.t# = tg.t#)
group by d.l# 
```

我认为不需要将其放入存储过程中。

要将其放入返回结果的函数中，您需要一个流水线函数：

```
create type leg_info as object (l# integer, max_leg_nr integer);
/

create type leg_info_list as table of leg_info
/

create or replace function get_max_leg_info
  return leg_info_list
  PIPELINED
as
  r_info leg_info;
begin
   r_info := leg_info(null, null);
   for p_rec in ( .... here goes the select ... )
   loop
     r_info.l# := p_rec.l#;
     r_info.max_leg_nr := p_rec.max_leg_nr ;
     pipe row(r_row);
   end loop;
   return;
end;
/ 
```

然后你可以像这样使用这个函数：

```
select *
from table(get_max_leg_info()) 
```

# iphone - iPhone：将 NSString（unicode 字符串）转换为 char 数组并反转

> ID：13549640
> 
> 赞同：1
> 
> 时间：2012-11-25T09:03:23.300
> 
> 标签：iphone, objective-c, ios, unicode, nsstring

我有一个像 @"anh sẽ đến" 这样的 unicode 字符串。现在我想把它剪成一个字符数组，然后我想把它加入一个字符串并在屏幕上显示。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:07:25.213

因为字面量是对象，所以您可以使用`[@"anh sẽ đến" UTF8String]`它来将其转换为 char 数组，以及`[NSString stringWithUTF8String:]`用于 char 到 NSString 的转换，但老实说，使用它可能`+[NSString stringWithFormat:@"anh sẽ đến%c", myUnichar]`比在字符串容器之间来回切换更容易。

# javascript - 加载对话框预加载页面

> ID：13549641
> 
> 赞同：0
> 
> 时间：2012-11-25T09:03:33.487
> 
> 标签：javascript, jquery, html, css

我使用没有对话框 ui 的对话框在网页中显示错误事件

```
<div id="downloadcredit" style="width:100%;position:fixed;height:100%;min-height:overflow:hidden;background-color:rgba(127,127,127,0.4);display:none;" >
<div style="text-align:right;width:466px;position:absolute;left:0;right:0;height:337px;min-height:overflow:hidden;background:url(images/creditbase.png);color:black;margin-left:auto;margin-right:auto;top:200px;font:16px behzad;">
<div style="width:100%;height:40px;background:transparent;font:20px behzad;padding-top:8px;color:#818181;text-align:center;"><span style="float:right;font:12px tahoma;font-weight:bold;color:#75797A;margin-right:15px;cursor:pointer;margin-top:6px;" onclick="$('#downloadcredit').slideUp('slow');">X</span></div>
<div style="margin:175px auto 10px;width:95%;font:11px tahoma;text-align:center;color:white;line-height:165%;">

<p> Erorr Sample ...
</div>
</div>
</div>
<body onload="$('#downloadcredit').slideDown('1000');"> 
```

但我的页面加载缓慢，页面加载完成后 3 或 4 秒后显示对话框:(。有什么方法可以先显示对话框并在后台加载页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:49:56.067

我通常将样式“display:none”应用于目标容器，然后您可以使用 .load() 函数并使用回调来显示填充数据的容器。

基本上 ：

```
$('#target').hide();
$('#target').addClass("loading-layer");
$('#target').load('toto.php',function(){
    $('#target').removeClass("loading-layer");
    $('#target').show();
}); 
```

# android - 识别点击通知栏中的项目

> ID：13549643
> 
> 赞同：-1
> 
> 时间：2012-11-25T09:03:59.163
> 
> 标签：android

当用户单击通知栏项目时，我需要在屏幕上隐藏一个覆盖，这样他就可以顺利退出我的应用程序，当使用与通知栏交互时，有没有办法获得相关的意图/发泄？

PS通知不是我的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:45:01.907

不可能，如果可能的话，这将是一个主要的安全问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T09:39:09.803

`android:launchMode="singleTask"`通过在您的活动中提供使您的活动成为单一任务`AndroidManifest.xml`

之后，将您的通知`Activity`作为`PendingIntent`您的通知，其中包含一些特殊数据。

当您的活动根本不存在时，您将获得`onCreate()`方法。您可以正常填充屏幕。

如果您的活动已经在前台，您将获得`onNewIntent()`功能。覆盖`onNewIntent()`功能并检查您放入通知的数据是否存在。如果它在那里，您可以更新您的 UI 并隐藏您的叠加层。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T09:08:51.073

您可以通过以下方式轻松实现此目的`PendingIntent`并在其中注册您的活动`AndroidManifest.xml`

所以你可以在新的`Activity`

# c# - 当我尝试在 Windows 2000 上安装我的程序时出现错误

> ID：13549646
> 
> 赞同：0
> 
> 时间：2012-11-25T09:04:42.303
> 
> 标签：c#, .net, winforms

当我尝试在 Windows 2000 上安装我的程序（C#、Winforms、.NET 2.0）时出现错误：

> *无法在动态链接库 KERNEL32.dll 中找到过程入口点 GetNativSystemInfo*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T09:05:46.990

您使用的 API 在 Windows 2000 上根本不可用。

另请参阅[MSDN 关于`GetNativeSystemInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724340.aspx)：

> **支持的最低客户端**
> Windows XP [桌面应用程序 | Windows 应用商店应用]
> 
> **支持的最低服务器**
> Windows Server 2003 [桌面应用程序 | Windows 应用商店应用]

为什么不使用[`GetSystemInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724381.aspx)Windows 2000 可用的功能。

# google-maps-api-3 - 结果不一致，maps.googleapis.com/maps/api/geocode

> ID：13549654
> 
> 赞同：1
> 
> 时间：2012-11-25T09:06:00.337
> 
> 标签：google-maps-api-3, geocode

[http://maps.googleapis.com/maps/api/geocode/json?address=rome&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=rome&sensor=false) 或 -------------- - - - - - - - - - - - - - - - -罗马 - - - - - - -

[http://maps.googleapis.com/maps/api/geocode/json?address=Vatican%20Museum&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=Vatican%20Museum&sensor=false)

如果查询是 Rome 或 Roma "types" 的结果：[ "locality", "political" ] 是 "long_name" : "Rome",

如果查询是“梵蒂冈博物馆”，那么“类型”的结果：[“地方”，“政治”] 是“长名称”：“罗马”，而不是应有的罗马。

是服务的bug吗？我尝试使用 language=en 但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:20:00.833

这是完全的猜想，因此可以随意忽略，但我最好的猜测是它与 Maps API 存储的地址有关。例如，如果您（或至少我）尝试在[Google 地图](https://maps.google.com/maps?q=vatican%20museum)中搜索梵蒂冈博物馆，则找不到任何结果，并且建议指向意大利语版本。如果您对 Colosseum 进行类似的查询，您可以看到您使用该`language`参数的方法似乎是正确的：

**英语**

[http://maps.googleapis.com/maps/api/geocode/json?address=Colosseum%20rome&sensor=false&language=en](http://maps.googleapis.com/maps/api/geocode/json?address=Colosseum%20rome&sensor=false&language=en)

**意大利语**

[http://maps.googleapis.com/maps/api/geocode/json?address=Colosseum%20rome&sensor=false&language=it](http://maps.googleapis.com/maps/api/geocode/json?address=Colosseum%20rome&sensor=false&language=it)

我将四处寻找更多信息来证实这一点，但我最好的猜测是，能够在语言之间切换取决于该语言可用的数据，在这种情况下，只有意大利语版本存在

# python - Hopcroft 算法的 DFA 最小化

> ID：13549662
> 
> 赞同：5
> 
> 时间：2012-11-25T09:08:11.790
> 
> 标签：python, algorithm, automata

```
P := {F, Q \ F};
W := {F};
while (W is not empty) do
     choose and remove a set A from W
     for each c in ∑ do
          let X be the set of states for which a transition on c leads to a state in A
          for each set Y in P for which X ∩ Y is nonempty do
               replace Y in P by the two sets X ∩ Y and Y \ X
               if Y is in W
                    replace Y in W by the same two sets
               else
                    if |X ∩ Y| <= |Y \ X|
                         add X ∩ Y to W
                    else
                         add Y \ X to W
          end;
     end;
end; 
```

我使用 Hopcroft 算法将 DFA 转换为最小 DFA。我通过这个链接从维基百科找到了一个伪代码，[http](http://en.wikipedia.org/wiki/DFA_minimization#Hopcroft.27s_algorithm) ://en.wikipedia.org/wiki/DFA_minimization#Hopcroft.27s_algorithm ，我制作了 python 代码来转换 dfa。

```
def minimize(self,dfa):
    P = [set(dfa.finalstates),dfa.states.difference(set(dfa.finalstates))]
    W = [set(dfa.finalstates)]

    while len(W) != 0:
        A = W[0]
        W.remove(A)
        X = set()
        for c in dfa.alphabet:
            for from_state, to_state in dfa.transitions.items():
                for toNum, value in to_state.items():
                    if c in value and toNum in A:
                        X.update(set([from_state]))
        for Y in P:
            if not X.intersection(Y) == set():
                P.append(X.intersection(Y))
                P.append(Y.difference(X))
                if Y in W:
                    W.append(X.intersection(Y))
                    W.append(Y.difference(X))
                    W.remove(Y)
                else :
                    if len(X.intersection(Y)) <= len (Y.difference(X)):
                        W.append(X.intersection(Y))
                        #W.remove(Y)
                    else :
                        W.append(Y.difference(X))
                        #W.remove(Y)
                P.remove(Y)

    print P,W 
```

我的 DFA 包含五个指标，

```
dfa.states = set() of states.
dfa.startstate = int number of start state number
dfa.finalstates = list structure consisting of final states
dfa.transitions = dictionary structure of dfa transitions.
ex) {from state : {to state1 : set of character to go to state1 , to state 2 : set of charac...}}
dfa.alphabet = set of dfa alphabets. 
```

我不知道为什么这个算法对我的代码不起作用，我的代码有什么问题吗？

# jquery - 为每个 gridster.js 小部件设置最小宽度和高度

> ID：13549664
> 
> 赞同：5
> 
> 时间：2012-11-25T09:08:25.783
> 
> 标签：jquery, jquery-ui, gridster

我将 gridster.js 与 Jquery UI 结合使用，通过使用此位拖动来调整其大小：

```
$('.layout_block').resizable({
    grid: [grid_size + (grid_margin * 2), grid_size + (grid_margin * 2)],
    animate: false,
    minWidth: grid_size,
    minHeight: grid_size,
    containment: '#layouts_grid ul',
    autoHide: true,
    stop: function(event, ui) {
        var resized = $(this);
        setTimeout(function() {
            resizeBlock(resized);
        }, 300);
    }
});

$('.ui-resizable-handle').hover(function() {
    layout.disable();
}, function() {

    layout.enable();
});

function resizeBlock(elmObj) {

    var elmObj = $(elmObj);
    var w = elmObj.width() - grid_size;
    var h = elmObj.height() - grid_size;

    for (var grid_w = 1; w > 0; w -= (grid_size + (grid_margin * 2))) {

        grid_w++;
    }

    for (var grid_h = 1; h > 0; h -= (grid_size + (grid_margin * 2))) {

        grid_h++;
    }

    layout.resize_widget(elmObj, grid_w, grid_h);
} 
```

正如 GitHub 上的建议：

[http://jsfiddle.net/maxgalbu/UfyjW/](http://jsfiddle.net/maxgalbu/UfyjW/)

我需要为每个小部件指定最小宽度和高度，而不是一般的 gridster。

有没有明显的方法来实现这个功能？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:18:55.830

如果它对任何人有帮助，我管理了一个解决方案：

为每个小部件添加了数据属性以指定最小 X 和 Y：

```
data-minx="2" data-miny="2" 
```

然后重写了resize函数：

```
$('.layout_block').resizable({
    grid: [grid_size + (grid_margin * 2), grid_size + (grid_margin * 2)],
    animate: false,
    containment: '#layouts_grid ul',
    autoHide: true,
    start: function(event, ui) {
        var resized = $(this);
        $('.layout_block').resizable( "option", "minWidth", resized.data('minx') * grid_size );
        $('.layout_block').resizable( "option", "minHeight", resized.data('miny') * grid_size );
    },
    stop: function(event, ui) {
        var resized = $(this);
        setTimeout(function() {
            resizeBlock(resized);   
        }, 300);
    }
}); 
```

我没有设置最小高度和宽度，而是在可调整大小的开始时运行一个函数

它获取 minx 和 miny 属性并相应地调整参数以调整大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-24T11:45:21.057

从 0.2.1 版开始，您可以使用内置的调整大小功能来调整小部件的大小。

尽管没有记录，但您可以使用它`resize.min_size`来指定小部件的最小尺寸。[resize.max_size](http://gridster.net/#resize_max_size_opt)已记录在案并且工作方式相同。

例子：

```
resize: {
    enabled: true,
    min_size: [4, 4]
} 
```

# iphone - 指向整数转换的不兼容指针使用“UIView *”类型的表达式初始化“BOOL”（又名“有符号字符”）

> ID：13549666
> 
> 赞同：0
> 
> 时间：2012-11-25T09:08:52.920
> 
> 标签：iphone, uitableview, tableview, xcode4.5, accessoryview

我的表格视图有问题。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

[tableView deselectRowAtIndexPath:indexPath animated:YES];

UITableViewCell *tableCell = [tableView cellForRowAtIndexPath:indexPath];
BOOL isSelected = (tableCell.accessoryView = [[ UIImageView alloc ] initWithImage:[UIImage imageNamed:@"Checkmark-hvid"]]);

if (isSelected) {

    tableCell.accessoryType = UITableViewCellAccessoryNone;

}
else {

    tableCell.accessoryView = [[ UIImageView alloc ]

                               initWithImage:[UIImage imageNamed:@"Checkmark-hvid"]];
}

} 
```

问题是我无法将 BOOL isSelected 定义为评估视图（图像）。

如果有人知道答案，请帮助我！

*   Mikkel V（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:43:03.680

在本声明中：

```
BOOL isSelected = (tableCell.accessoryView = [[ UIImageView alloc ] initWithImage:[UIImage imageNamed:@"Checkmark-hvid"]]); 
```

is的*类型*，这就是编译器所抱怨的。要将其转换为，请执行以下操作：`(tableCell.accessoryView = ...``UIView *``BOOL`

```
BOOL isSelected = (tableCell.accessoryView = [[ UIImageView alloc ] initWithImage:[UIImage imageNamed:@"Checkmark-hvid"]]) != nil; 
```

（注意与 的比较`nil`，这会导致布尔条件）。

但是，您的所有代码看起来都有些*狡猾*，因为我希望`alloc/init`总是成功，因此`isSelected`总是如此`YES`。

# c# - 为什么使用 Delegate.Combine 需要强制转换但使用 + 运算符不需要？

> ID：13549674
> 
> 赞同：5
> 
> 时间：2012-11-25T09:10:16.897
> 
> 标签：c#, delegates

`Delegate`我在或下的 Reflector 中找不到 + 运算符`MulticastDelegate`。

我试图弄清楚这不需要演员表：

```
Action a = () => Console.WriteLine("A");
Action b = () => Console.WriteLine("B");

Action c = a + b; 
```

但这确实：

```
Action a = () => Console.WriteLine("A");
Action b = () => Console.WriteLine("B");

Action c = (Action)MulticastDelegate.Combine(a, b); 
```

在第一个样本中，演员是刚刚在封面下完成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T09:19:53.397

`+=`并且`-=`是在语言级别（即在编译器帮助下）使用已知委托类型实现的，因此它不需要强制转换，而`Delegate.Combine`它只是具有返回类型的普通（非泛型）方法`Delegate`，因此需要强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:20:27.390

> 在第一个样本中，演员是刚刚在封面下完成的吗？

是的，你可以这么说！

该`Combine`方法是用 .NET 1 编写的，其中不存在通用 C#。因此，正式的返回类型`Combine`必须是`Delegate`：

```
public static Delegate Combine(Delegate a, Delegate b)
{
  ...
} 
```

但是该方法仍然返回一个`Action`when both`a`和`b`are `Action`。是的，`a`并且`b`需要具有相同的运行时类型。

请不要写成`MulticastDelegate.Combine`类定义`Combine`的方法。因此说，这不那么令人困惑。`static``System.Delegate``Delegate.Combine`

**車輛改道：**

当前版本的 C# 和`Combine`逆变委托类型存在问题。考虑以下：

```
Action<string> doSomethingToString; // will be assigned below

Action<ICloneable> a = cloneable => { Console.WriteLine("I'm cloning"); cloneable.Clone(); }
Action<IConvertible> b = convertible => { Console.WriteLine("I'm converting"); convertible.ToInt32(CultureInfo.InvariantCulture); }

Action<string> aStr = a; // OK by contravariance of Action<in T>, aStr and a reference same object
Action<string> bStr = b; // OK by contravariance of Action<in T>, bStr and b reference same object

doSomethingToString = aStr + bStr;  // throws exception
doSomethingToString("42");          // should first clone "42" then convert "42" to Int32 
```

现在，假设某些未来版本的框架引入了一个通用`Combine`方法：

```
public static TDel Combine<TDel>(TDel a, TDel b) where TDel : Delegate
{
  // use typeof(TDel) to figure out type of new "sum" delegate
} 
```

并假设 C# 已更改`+`为转换为对新泛型`Combine<>`方法的调用，那么**逆变和委托组合将被修复！**我猜他们告诉我们他们有更高的优先级，但仍然如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T09:23:45.203

举个例子：

```
class Program
{
    static void Main(string[] args)
    {
        Test1();
        Test2();
    }

    public static void Test1()
    {
        Action a = () => Console.WriteLine("A");
        Action b = () => Console.WriteLine("B");

        Action c = a + b;
        c();
    }

    public static void Test2()
    {
        Action a = () => Console.WriteLine("A");
        Action b = () => Console.WriteLine("B");

        Action c = (Action)MulticastDelegate.Combine(a, b);
        c();
    }
} 
```

然后用 ILSpy 看：

```
internal class Program
{
    private static void Main(string[] args)
    {
        Program.Test1();
        Program.Test2();
    }
    public static void Test1()
    {
        Action a = delegate
        {
            Console.WriteLine("A");
        };
        Action b = delegate
        {
            Console.WriteLine("B");
        };
        Action c = (Action)Delegate.Combine(a, b);
        c();
    }
    public static void Test2()
    {
        Action a = delegate
        {
            Console.WriteLine("A");
        };
        Action b = delegate
        {
            Console.WriteLine("B");
        };
        Action c = (Action)Delegate.Combine(a, b);
        c();
    }
} 
```

似乎他们做的事情完全相同，只是 C# 在第一次测试中提供了一些语法糖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T09:33:42.520

它使用“运算符重载”完成，您也可以在自己的对象中执行此操作。

```
public class MyObject
{
    public string Property { get; set; }

    public MyObject(string property)
    {
        this.Property = property;
    }

    public static MyObject operator +(MyObject a1, MyObject a2)
    {
        return new MyObject(a1.Property + a2.Property);
    }
}

    MyObject o1 = new MyObject("Hello");
    MyObject o2 = new MyObject(" World!");

    MyObject o3 = o1 + o2; 
```

结果：o3.Property = "Hello World!"

所以我假设框架在后台执行这样的事情

```
 public static Action operator +(Action a1, Action a2)
    {
        return (Action)MulticastDelegate.Combine(a1,a2);
    } 
```

# android - GridView 处理 OnTouch 和 OnClick 事件

> ID：13549675
> 
> 赞同：-1
> 
> 时间：2012-11-25T09:10:43.830
> 
> 标签：android, gridview, calendar, onclick, touch-event

我想写一个日历。为此，我有一个带有 Adapter 的 GridView，它在每个单元格中使用 relativeLayout（包含显示日期的文本视图）填充它。

GridView 只显示一个月。

当我点击一天时 - 我在每个单元格上都有一个 onClickListener 来显示带有 Toast 的一天（仅用于测试），它的工作。现在我想通过在gridview上滑动来切换月份以转到下个月。问题是当我触摸单元格时gridview没有得到onTouch事件......

任何人都可以帮助我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:12:14.733

如果您希望在滑动时显示下/上个月，您可以使用类似`ViewPager`

# c# - LINQ to Entities 仅支持无参数构造函数和初始化程序

> ID：13549678
> 
> 赞同：1
> 
> 时间：2012-11-25T09:11:17.053
> 
> 标签：c#, linq, linq-to-entities

我不想每次都初始化每个字段，我想在构造函数中全部初始化，可以吗？

```
 var districts = _districtRepository.FindBy(d => d.CityID == id).Select(d => new DistrictViewModel(d)).ToList(); 
```

楷模：

```
public class DistrictViewModel
{
    public Int32 ID { get; set; }
    public String Name { get; set; }

    public DistrictViewModel()
    {

    }

    public DistrictViewModel(District district)
    {
        if (district != null)
        {
            ID = district.ID;
            Name = district.Name;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T09:18:29.577

你可以做：

```
var districts = _districtRepository.FindBy(d => d.CityID == id)
                                   .AsEnumerable()
                                   .Select(d => new DistrictViewModel(d))
                                   .ToList(); 
```

在这种情况下，您的语句 .Select(d => new DistrictViewModel(d)) 是 linq-to-object 语句，而不是 linq-to-entity，它将起作用。

# wolfram-mathematica - 在二维列表上同时使用带有“等于”和“不等于”的 Count 函数

> ID：13549680
> 
> 赞同：1
> 
> 时间：2012-11-25T09:11:36.043
> 
> 标签：wolfram-mathematica

在像下面这样的二维列表中，有没有办法使用 Count 函数计算第一列等于 1、第二列等于 2、第三列不等于 3 的所有行？

我尝试了 Count[Data,{1,2,_?(#!=3&)}] - 但它不起作用:(。我使用模式做错了吗？

1 2 3

2 2 3

1 1 1

1 2 1

1 3 2

3 3 3

3 2 1

1 2 2

非常感谢，米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:09:59.017

是的，我认为你的模式是错误的。尝试

`Count[data, {1, 2, x_ /; x != 3}]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:24:33.960

原版运行良好！（虽然使用小写的变量名是更好的形式，即“数据”。）

```
Data = {{1, 2, 3}, {1, 2, 4}, {1, 4, 3}, {1, 2, 5}};

Count[Data, {1, 2, _?(# != 3 &)}] 
```

> 2

你也可以使用`Except`：

```
Count[Data, {1, 2, Except[3]}] 
```

> 2

# xaml - 使用 xaml 在 Windows 8 商店应用程序中未触发 PositionChanged 事件

> ID：13549681
> 
> 赞同：0
> 
> 时间：2012-11-25T09:11:37.690
> 
> 标签：xaml, windows-runtime, winrt-xaml, winrt-async

在下面的代码中，永远不会触发 PositionChanged 事件。我正在尝试在我的笔记本电脑中执行此代码。在执行任何代码之前，有没有办法检查设备中的 GPS 是否可用。

```
private async void Track_Click_1(object sender, RoutedEventArgs e)

    {
        locator = new Geolocator();
        locator.DesiredAccuracy = PositionAccuracy.High;
        locator.MovementThreshold = 10;
        locator.ReportInterval = 2000;
        locator.PositionChanged += locator_PositionChanged;
        locator.PositionChanged +=  new TypedEventHandler<Geolocator, PositionChangedEventArgs>(OnPositionChanged);

    }

    void locator_PositionChanged(Geolocator sender, PositionChangedEventArgs args)
    {
        throw new NotImplementedException();
    }

    void OnPositionChanged(Geolocator sender, PositionChangedEventArgs args)
    {

        dAltitude = Convert.ToDouble( args.Position.Coordinate.Altitude.ToString());
        dPrevLongitude = Convert.ToDouble(args.Position.Coordinate.Longitude.ToString());
        dPrevLatitude = Convert.ToDouble(args.Position.Coordinate.Latitude.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:49:51.667

启用互联网功能后解决。

# c++ - 打开现有 Excel 文件 libxl

> ID：13549683
> 
> 赞同：0
> 
> 时间：2012-11-25T09:11:50.220
> 
> 标签：c++, iphone, objective-c, ios, excel

使用适用于 IOS 的 libxl 示例项目，我试图在包中打开一个现有的 xls 文件

```
BookHandle book = xlCreateBook();
xlBookLoad(book,"Beta-1.xls");    
SheetHandle sheet = xlBookGetSheet(book,0);
NSLog(@"%@",sheet); 
```

它总是返回 null，谁能告诉我哪里出错了，或者这是否可能。

有没有替代品，我花了好几个小时寻找，必须是IOS兼容的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T23:16:05.900

针对这个旧线程发布以供参考，并专门回答使用 LibXL 读取 XLS 或 XLSX 格式文件的问题。下面的代码演示了如何使用 LibXL 读取 excel 文件并打印每个单元格的内容（值）和类型（数字、字符串、布尔值...）。

```
// Get the path to the excel file to be opened
NSString *path = [[NSBundle mainBundle] pathForResource:@"FILE_NAME" ofType:@"xlsx"];

// Convert the path into a const char * from an NSString
const char *file = [path cStringUsingEncoding:NSASCIIStringEncoding];

// Create a handle for the excel book (XLSX)
// Use xlCreateBook() for XLS file format
BookHandle book = xlCreateXMLBook();
xlBookLoad(book, file);

// Authorize full use of the library (uncomment below and change values)
//xlBookSetKey(book, "REGISTERED_NAME", "PROVIDED_KEY");

// Determine if the excel file handle is valid
if(xlBookLoad(book, file)){
    // We have the book now get the first sheet in the book
    SheetHandle sheet = xlBookGetSheet(book, 0);

    // Ensure the sheet has been opened as is valid
    if(sheet){
        // Get the first and last rows of the sheet (determines the length of the parse)
        for (int row = xlSheetFirstRow(sheet); row < xlSheetLastRow(sheet); ++row){
            // Get the first and last columns of the sheet (determines width of the parse)
            for (int col = xlSheetFirstCol(sheet); col < xlSheetLastCol(sheet); ++col){
                // When reading the cell pull the type (bool, int, string...)
                enum CellType cellType = xlSheetCellType(sheet, row, col);
                FormatHandle format = xlSheetCellFormat(sheet, row, col);
                NSLog(@"(row = %i, col = %i) = ", row, col);

                // Determine if the cell has a formula or is a value w/ format
                if (xlSheetIsFormula(sheet, row, col)){
                    const char* s = xlSheetReadFormula(sheet, row, col, &format);
                    NSLog(@"%s %s", (s ? s : "null"), "[formula]");
                } else{
                    // The cell is not a formula therefore print the value and type
                    switch(cellType){
                        case CELLTYPE_EMPTY: NSLog(@"%s", "[empty]"); break;
                        case CELLTYPE_NUMBER:{
                            double d = xlSheetReadNum(sheet, row, col, &format);
                            NSLog(@"%f %s", d, "[number]");
                            break;
                        }
                        case CELLTYPE_STRING:{
                            const char* s = xlSheetReadStr(sheet, row, col, &format);
                            NSLog(@"%s %s", (s ? s : "null"), "[string]");
                            break;
                        }
                        case CELLTYPE_BOOLEAN:{
                            bool b = xlSheetReadBool(sheet, row, col, &format);
                            NSLog(@"%s %s", (b ? "true" : "false"), "[boolean]");
                            break;
                        }
                        case CELLTYPE_BLANK: NSLog(@"%s", "[blank]"); break;
                        case CELLTYPE_ERROR: NSLog(@"%s", "[error]"); break;
                    }
                }
                NSLog(@"\n");
            }
        }
    }
}

xlBookRelease(book); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:19:28.827

问题源于您使用无效文字来记录新创建的值（您没有指针）。%@ 是 ObjC 对象文字，因此您将要使用它`cout`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:02:35.593

你在 sourceforge 上看过 libxls 吗？有一个专门针对 iOS 的 objc 框架。

# node.js - nodejs - 导出“变量”var

> ID：13549684
> 
> 赞同：2
> 
> 时间：2012-11-25T09:11:55.243
> 
> 标签：node.js

我在 node.js 项目中有两个文件；timer.js 和 app.js。

基本上计时器所做的是，它有一个`myNumber`随`setInterval`函数增加的变量。我希望能够在需要时访问该变量，目前我正在使用以下代码：

```
var myNumber = 0;

setInterval(myMethod, 1);

function myMethod() {
    myNumber++;
    module.exports = myNumber;
} 
```

我觉得这是非常错误的（我是一个完全的新手），有人能告诉我如何以正确的方式去做吗？

我想做的是每次我在另一个文件中得到这样的变量时，我都会得到 myNumber 的当前值。目前我正在这样做，并且它正在工作（仍然，这*一定*是错误的）：

```
exports.index = function(req, res){
    var timer = require("../timer.js");
    res.end("timer tick at: " + timer);
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T09:20:48.360

正如我在评论中提到的，我只想`myNumber`附上`module.exports`：

```
module.exports.myNumber = 0;

setInterval(myMethod, 1);

function myMethod() {
    module.exports.myNumber++;
} 
```

You can update your exported object as much as you want because other modules that `require` your module will share the same reference as `module.exports` in your module code.

# android - 按下主页键时如何隐藏android软键盘

> ID：13549687
> 
> 赞同：0
> 
> 时间：2012-11-25T09:12:52.563
> 
> 标签：android

我有一个活动，其中有一个 EditText，当我按下键盘上的“开关”来切换输入法时，然后弹出一个对话框（输入法列表）。现在按下home键，桌面会显示，但键盘和弹出的对话框仍然显示在桌面顶部，那么当我按下home键时如何隐藏键盘和弹出的对话框？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:20:00.887

您可以轻松使用：

```
// hiding keyboard
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(password.getWindowToken(), 0); 
```

`password`是`EditText`参考

# java - 查询java中的数据结构

> ID：13549689
> 
> 赞同：0
> 
> 时间：2012-11-25T09:13:24.230
> 
> 标签：java, map, linkedhashmap

我想从多个文件中计算词频。

此外，我在这些文件中有这些词

```
a1.txt = {aaa, aaa, aaa} 
a2.txt = {aaa} 
a3.txt = {aaa, bbb} 
```

所以，结果必须是 aaa = 3, bbb = 1。

然后，我定义了上述数据结构，

```
LinkedHashMap<String, Integer> wordCount = new LinkedHashMap<String, Integer>();
Map<String, LinkedHashMap<String, Integer>>
fileToWordCount = new HashMap<String,LinkedHashMap<String, Integer>>(); 
```

然后，我从文件中读取单词并将它们放入 wordCount 和 fileToWordCount 中：

```
/*lineWords[i] is a word from a line in the file*/
if(wordCount.containsKey(lineWords[i])){
   System.out.println("1111111::"+lineWords[i]);
   wordCount.put(lineWords[i], wordCount.
   get(lineWords[i]).intValue()+1);
   }else{
   System.out.println("222222::"+lineWords[i]);
   wordCount.put(lineWords[i], 1);
}
fileToWordCount.put(filename, wordCount); //here we map filename
and occurences        of       words 
```

最后，我用上面的代码打印 fileToWordCount，

```
Collection a;
Set filenameset;

        filenameset = fileToWordCount.keySet();    
        a = fileToWordCount.values();          
        for(Object filenameFromMap: filenameset){
                   System.out.println("FILENAMEFROMAP::"+filenameFromMap);                                 
                System.out.println("VALUES::"+a);                                                
        } 
```

和印刷品，

```
FILENAMEFROMAP::a3.txt
VALUES::[{aaa=5, bbb=1}, {aaa=5, bbb=1}, {aaa=5, bbb=1}]
FILENAMEFROMAP::a1.txt
VALUES::[{aaa=5, bbb=1}, {aaa=5, bbb=1}, {aaa=5, bbb=1}]
FILENAMEFROMAP::a2.txt
VALUES::[{aaa=5, bbb=1}, {aaa=5, bbb=1}, {aaa=5, bbb=1}] 
```

那么，我如何使用 map fileToWordCount 来查找文件中的词频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:25:25.093

你让它变得比必要的更难。这是我的做法：

```
Map<String, Counter> wordCounts = new HashMap<String, Counter>();
for (File file : files) {
    Set<String> wordsInFile = new HashSet<String>(); // to avoid counting the same word in the same file twice
    for (String word : readWordsFromFile(file)) {
        if (!wordsInFile.contains(word)) {
            wordsInFile.add(word);
            Counter counter = wordCounts.get(word);
            if (counter == null) {
                counter = new Counter();
                wordCounts.put(word, counter);
            }
            counter.increment();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:26:54.903

如果我可以建议另一种方法:)

使用`Map<String, Set<String>> map`.

```
foreach file f in files
  foreach word w in f
    if w in map.keys()
      map[w].add(f)
    else
      initialize map w to be a set with the only element file 
```

# markdown - 如何在 jekyll 的 markdown 文件中包含 HTML 文件？

> ID：13549690
> 
> 赞同：8
> 
> 时间：2012-11-25T09:13:27.660
> 
> 标签：markdown, jekyll

我有一个 jekyll 网站，其文件结构如下：

```
▾ _includes/
    post-entry.html
▾ _posts/
    2012-11-25-first-post.markdown
index.markdown 
```

在我的 index.markdown 中，我想包含`post-entry.html`这样的内容：

```
{% for post in site.posts %}
* {% include post-entry.html %}
{% endfor %} 
```

但这在博客中显示为 HTML 代码片段。如何防止 HTML 受到保护？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T20:53:47.750

您可以在任何降价文件中使用液体标签，只要它具有 YAML 标头即可。例如，查看[Jekyll 站点的 jekyllbootstrap 模板中](https://github.com/plusjade/jekyll-bootstrap)[给出](https://raw.github.com/plusjade/jekyll-bootstrap/master/index.md)的index.md 。

如果您链接到您的实际 index.markdown 或您的存储库本身（例如，如果它在 github 上），我们可能会更好地了解哪里出了问题。您的示例应该可以工作，尽管您可能需要使用 HTML 列表元素`<li>`而不是 markdown `*`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-10T01:10:12.050

问题是解析器将 HTML 视为代码块。[最好的方法是像我在这个问题中提出的](https://stackoverflow.com/questions/24521599/can-i-turn-off-code-blocks-in-kramdown)那样关闭代码块

要解决此问题，请使用替换标签：

```
{% capture includeGuts %}
{% include post-entry.html %} 
{% endcapture %}
{{ includeGuts | replace: '    ', ''}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T20:37:15.997

改为使用`{{ post.content }}`。

这是我在我的网站上使用的代码作为示例：

```
{% for post in site.posts %}
    <a href="{{ post.url }}">
        <h2>{{ post.title }} &mdash; {{ post.date | date_to_string }}</h2>
    </a>
    {{ post.content }}
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-11-26T14:01:05.737

你不能。Markdown 文件只是带有样式的文本文件。如果你想使用 Liquid 标签，你必须在你的 _layouts 中这样做

如果我猜对了，您希望在您的索引页面上有这个降价文件吗？因此，在 {{ content }} 标签之后的 default.html 布局中，您可以使用您想要使用的液体标签。无需将降价文件与代码混合。

# java - 如何在身份验证失败 url 中包含 SPRING_SECURITY_LAST_USERNAME？

> ID：13549691
> 
> 赞同：4
> 
> 时间：2012-11-25T09:13:51.687
> 
> 标签：java, spring, authentication, spring-mvc, spring-security

我的 Spring Security XML 中有以下内容：

```
<form-login login-page="/login" 
            authentication-failure-url="/login/failure" /> 
```

我想在身份验证失败时获取用户名。我在网上读到它可以从 SPRING_SECURITY_LAST_USERNAME 获得，但我的问题是：

我如何访问它：1）spring security XML，例如

> authentication-failure-url="/login/failure/SPRING_SECURITY_LAST_USERNAME"

2) 或处理 /login/failure 映射的控制器。

请帮忙。我被困住了！:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T10:20:22.397

它已弃用：

```
/**
  * @deprecated If you want to retain the username, cache it in a customized {@code AuthenticationFailureHandler}
  */
@Deprecated
public static final String SPRING_SECURITY_LAST_USERNAME_KEY = "SPRING_SECURITY_LAST_USERNAME"; 
```

所以你需要实现你自己的`AuthenticationFailureHandler`.

我实现了 1）策略：（记住用户名可以包含一些在 URL 中不合适的字符！）

```
package some.package;

import org.springframework.security.core.AuthenticationException;
import org.springframework.security.web.DefaultRedirectStrategy;
import org.springframework.security.web.RedirectStrategy;
import org.springframework.security.web.authentication.AuthenticationFailureHandler;
import org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler;
import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class UsernameInURLAuthenticationFailureHandler extends SimpleUrlAuthenticationFailureHandler {

    private String urlPrefix;
    private RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();
    private String formUsernameKey = UsernamePasswordAuthenticationFilter.SPRING_SECURITY_FORM_USERNAME_KEY;

    public UsernameInURLAuthenticationFailureHandler(String urlPrefix) {
        this.urlPrefix = urlPrefix;
    }

    //Failure logic:
    @Override
    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException {
        //We inherited that method:
        saveException(request, exception);

        //Prepare URL:
        String username = request.getParameter(formUsernameKey);
        String redirectUrl = urlPrefix + username;

        //Redirect:
        redirectStrategy.sendRedirect(request, response, redirectUrl);
    }

    //Getters and setters:
    public String getUrlPrefix() {
        return urlPrefix;
    }

    public void setUrlPrefix(String urlPrefix) {
        this.urlPrefix = urlPrefix;
    }

    public String getFormUsernameKey() {
        return formUsernameKey;
    }

    public void setFormUsernameKey(String formUsernameKey) {
        this.formUsernameKey = formUsernameKey;
    }

    public RedirectStrategy getRedirectStrategy() {
        return redirectStrategy;
    }

    public void setRedirectStrategy(RedirectStrategy redirectStrategy) {
        this.redirectStrategy = redirectStrategy;
    }
} 
```

豆：

```
<bean class="some.package.UsernameInURLAuthenticationFailureHandler">
        <!-- prefix: -->
        <constructor-arg value="/login/failure/"/>
</bean> 
```

您可以轻松实施 2) 策略。只需将用户名保存为`onAuthenticationFailure`方法内的会话属性之一，而不是将用户名添加到 URL。

您可以轻松设置自己的处理程序：

> `<form-login>`属性
> 
> `authentication-failure-handler-ref`
> 
> 可用作 authentication-failure-url 的替代方案，让您在身份验证失败后完全控制导航流程。该值应该是应用程序上下文中 AuthenticationFailureHandler bean 的名称。

更多文档：[点击](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html)

# netbeans - 在 Netbeans 中编辑多行代码

> ID：13549692
> 
> 赞同：69
> 
> 时间：2012-11-25T09:14:03.217
> 
> 标签：netbeans, editing

有没有办法在netbeans中选择和编辑多行代码？
Visual Studio 允许类似的操作，您可以`alt`使用鼠标的拖动动作（左键单击）按下并选择多行？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-11-25T09:36:24.683

这称为**矩形选择**。
可以通过`Crtl`++`Shift`启用`R`

[步骤截图](https://blogs.oracle.com/netbeansphp/entry/rectangular_selection)：

> # 矩形选择
> 
> 通过彼得在 2011 年 10 月 20 日
> 
> 如果您使用开发版本，您可能会注意到 NetBeans 编辑器添加了**矩形选择**操作。我不是每天都需要这个功能，但在某些情况下它会有所帮助。其中一种情况是当您需要删除从教程复制的文本或代码中的行号时。如下图所示。
> 
> ![示例代码](../Images/ffed4d25e0844c85ca5c18c40f348959.png)
> 
> 您可以在按编辑器工具栏中的矩形选择切换按钮或按 `CTRL`+ `SHIFT`+`R`快捷键后选择矩形。
> 
> ![矩形选择切换按钮](../Images/82314416ddad5c32145911d630d6627a.png)
> 
> 选择可以很容易地用鼠标或键盘完成。使用键盘时，只需将插入符号放在角落，按住`SHIFT` 并使用箭头键选择所需内容。
> 
> ![按住 SHIFT 并使用箭头键选择所需内容](../Images/73f4a59f40fc88ed8223b055e2e3d188.png)
> 
> 选择完成后，您可以通过`DELETE`按键轻松删除所有行号。然后您必须退出矩形选择模式（编辑器工具栏中的`CTRL`+ `SHIFT`+`R`或切换按钮）。
> 
> 如果您编写 text ，则该文本将放置在所选区域的每一行上。例如，这对于一次更改类中更多字段的访问修饰符很有用。
> 
> ![如果您编写文本，则该文本将放置在所选区域的每一行上。](../Images/be4aed1bed682fe77b8e1ada84d8fe65.png)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-11-30T10:20:42.353

现在，Netbeans 8.2 中包含了一个更灵活的矩形选择替代方案，它支持多个光标。

[![多个插入符号的演示](../Images/db1d1d4d1e9cbabd014d665aa749375a.png)](https://i.stack.imgur.com/0hwcd.gif)

[Netbeans Wiki](http://wiki.netbeans.org/NewAndNoteworthyNB82#Editor_Multicarets)中列出了键盘快捷键：

```
Description                      Windows/Linux      Mac
==============================   ================   ================
Add/remove caret                 Ctrl+Shift+Click   Cmd+Shift+Click 
Add caret for next occurence     Ctrl+J             Cmd+J   
Add caret for each occurrence    Ctrl+Alt+Shift+J   Ctrl+Cmd+Shift+J    
Add caret on line above          Alt+Shift+[        Ctrl+Shift+[ or
                                                     Alt+Cmd+Up
Add caret on line below          Alt+Shift+]        Ctrl+Shift+] or
                                                     Alt+Cmd+Down   
Remove last added caret          Alt+Shift+J        Ctrl+Shift+J    
Paste over the multiple carets   Ctrl+Shift+L       Cmd+Shift+L or
                                                     Alt+Cmd+V  
Remove all extra carets          Escape             Escape 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-08-05T07:24:24.363

## Netbeans 8.2 发布后

从 Netbeans 8.2 开始，此功能开箱即用。只需`Shift + Ctrl`按住它，现在在任意位置左键单击鼠标任意次即可。

NetBeans 开发版允许您像在 Sublime Text 中一样编辑多行。

不要费心阅读下面的答案。您不再需要下载开发版本。

## 在 Netbeans 8.2 发布之前

是的你可以！与 SublimeText 完全一样，但它不是默认功能，因此您必须下载 NetBeans 开发版本。

[![在此处输入图像描述](../Images/2ca51912c588820f8a6c82adb33118de.png)](https://i.stack.imgur.com/aJa8R.png)

安装后，在按住 Shift + Ctrl + Alt 的同时在代码中的任意位置按`Shift`+ `Ctrl`+ 。简单而且非常有用。`Alt``left click`

这是它在 NetBeans 中的样子：

[![在此处输入图像描述](../Images/9333306da3f17329be5f581328d8fead.png)](https://i.stack.imgur.com/oBsYF.png)

观看视频演示：[youtube.com/watch ?v=iWejyPL5YQI](http://youtube.com/watch?v=iWejyPL5YQI)

当您安装新的 NetBeans 时，您不必卸载旧的。就这样吧。开发版本将询问您是否要导入您在以前的 NetBeans 安装中使用的所有插件和预设。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-10-15T21:19:46.063

来自[Netbeans Wiki](http://wiki.netbeans.org/NewAndNoteworthyNB82#Editor_Multicarets)：*添加/删除插入符号并进入多插入符号模式*

## 快捷方式 Windows/Linux：

`Ctrl`+ `Shift`+ 点击

## 快捷方式 Mac：

`Cmd`+ `Shift`+ 点击

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-10T13:29:59.017

在 Linux 上的 netbeans 8.2 中，热键是`shift + ctrl`按住左键的鼠标。根据我自己的经验。这是很容易确定的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-27T21:20:54.923

以前版本的 Netbeans 和不同的操作系统似乎有点不同。就我而言，对于 Windows 10 上的 Netbeans 8.2，按住`Shift + Ctrl`并左键单击有效。

# javascript - 3位数的正则表达式（不要介意顺序）？

> ID：13549694
> 
> 赞同：5
> 
> 时间：2012-11-25T09:14:19.517
> 
> 标签：javascript, regex

是否有任何正则表达式（！）可以测试字符串是否包含 3 位数字（不要介意顺序）？

*（至少 3 位数。我也很高兴看到确切的 3 解决方案。（如果你好心的话））*

例子 ：

```
abk2d5k6 //3 digits
abk25k6d //same here //3 digits 
```

我的失败尝试：

```
.+?(?=\d){3} 
```

谢谢。

*（出于学习目的，请仅使用正则表达式解决方案。）。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T09:16:56.977

好吧，出于学习的目的，我建议通读这个非常全面的[教程](http://www.regular-expressions.info/tutorial.html)。

否则，JavaScript 正则表达式可能看起来像这样：

如果您想确保至少有三位数字：

```
/^(?:\D*\d){3}/ 
```

或者，如果您想确保恰好是三个数字：

```
/^(?:\D*\d){3}\D*$/ 
```

`\D`是任何非数字字符。`*`允许其中的 0 个或更多。`\d`是任何数字字符。`{3}`重复子模式 3 次。And`^`和`$`分别标记字符串的开始和结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T09:25:15.337

你也可以这样做：

```
str.match(/\d/g).length >= 3 
```

这非常简单，并且非常清楚地显示了没有复杂正则表达式的意图。

不过，这并没有针对速度进行调整。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T09:31:05.483

鉴于您希望“至少”三位数的评论，我认为它不需要比以下更复杂：

```
/\d.*\d.*\d/ 
```

...这是一个数字，然后是零个或多个任何东西，然后是另一个数字，然后是零个或多个任何东西，然后是另一个数字。由于我没有锚定任何一端，因此两端都有一个隐含的“零个或多个任何东西”。

```
console.log(!!"abk2d5k6".match(/\d.*\d.*\d/));  // true
console.log(!!"abk25k6d".match(/\d.*\d.*\d/));  // true
console.log(!!"abkd5k6".match(/\d.*\d.*\d/));   // false (I removed a digit)
console.log(!!"abk2k6d".match(/\d.*\d.*\d/));   // false (I removed a digit) 
```

或者

```
/(\d.*){3}/

console.log(!!"abk2d5k6".match(/(\d.*){3}/));  // true
console.log(!!"abk25k6d".match(/(\d.*){3}/));  // true
console.log(!!"abkd5k6".match(/(\d.*){3}/));   // false (I removed a digit)
console.log(!!"abk2k6d".match(/(\d.*){3}/));   // false (I removed a digit) 
```

或在 m.buettner 在下面的评论中指出，而不是`.`您可以使用`\D`（不是数字）：

```
/\d\D*\d\D*\d/ 
```

或者

```
/(\d\D*){3}/

display(!!"abk2d5k6".match(/\d\D*\d\D*\d/));  // true
display(!!"abk25k6d".match(/\d\D*\d\D*\d/));  // true
display(!!"abkd5k6".match(/\d\D*\d\D*\d/));   // false (I removed a digit)
display(!!"abk2k6d".match(/\d\D*\d\D*\d/));   // false (I removed a digit)

display(!!"abk2d5k6".match(/(\d\D*){3}/));  // true
display(!!"abk25k6d".match(/(\d\D*){3}/));  // true
display(!!"abkd5k6".match(/(\d\D*){3}/));   // false (I removed a digit)
display(!!"abk2k6d".match(/(\d\D*){3}/));   // false (I removed a digit) 
```

基本上，如果它是“至少”匹配，则不需要锚点。

# winapi - 如何在 VBA 中制作“原子”块？

> ID：13549695
> 
> 赞同：0
> 
> 时间：2012-11-25T09:14:28.783
> 
> 标签：winapi, vba, excel

如何使以下行作为原子操作运行：

```
Sheets("worksheet34").Select
Range("D15").Select
Application.WindowState = xlMaximized
SetCursorPos 200, 600 'set mouse position at 200, 600
Call mouse_event(MOUSEEVENTF_RIGHTDOWN, 0, 0, 0, 0) 'click left mouse
Application.SendKeys ("R") 
```

我想确保所有行都以相同的顺序执行，彼此之间没有延迟。

上面的代码是我前往特定单元格并`REFRESH`在该单元格上进行选择的技巧。

[Win32：代码块的原子执行](https://stackoverflow.com/questions/288364/win32-atomic-execution-of-code-block)

[同步功能 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686360%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:01:41.567

你不能。您对 Excel 没有太多的控制权来保证它是原子的，并且 Excel 将做一些事情来响应您的消息，包括弹出菜单所需的消息泵。

了解如何在 Excel VBA 中执行某些操作的最佳方法是录制宏并查看生成的代码。

在您的特定情况下，`Calculate()`单元格或范围的方法应该刷新值。

# android - android：如何知道哪个进程拥有一个目录？

> ID：13549697
> 
> 赞同：0
> 
> 时间：2012-11-25T09:14:42.430
> 
> 标签：android

我有 Galaxy S3，它一直在屏幕底部弹出一个广告，我想找出哪个进程正在执行此操作并杀死它。

现在我找到了存储所有广告图片的目录，但是如何找到拥有该目录的进程呢？目录是：/sdcard/advimg。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:30:12.057

尝试`adb shell`进入您的手机，然后使用以下命令检查该目录的所有者：

```
shell@android:/sdcard $ ls -al
drwxrwxr-x root     sdcard_rw          2012-09-25 02:08 Alarms
drwxrwxr-x root     sdcard_rw          2012-09-25 02:08 Android
drwxrwxr-x root     sdcard_rw          2012-09-25 02:20 DCIM
drwxrwxr-x root     sdcard_rw          2012-09-25 02:08 Download
drwxrwxr-x root     sdcard_rw          2012-09-25 02:08 Movies
drwxrwxr-x root     sdcard_rw          2012-09-25 02:08 Music
drwxrwxr-x root     sdcard_rw          2012-09-25 04:09 Notifications
drwxrwxr-x root     sdcard_rw          2012-10-08 15:01 Pictures
drwxrwxr-x root     sdcard_rw          2012-09-25 02:08 Podcasts
drwxrwxr-x root     sdcard_rw          2012-09-25 02:22 Ringtones 
```

如果您看到与我相同的输出（“sdcard_rw”），那么您无法通过查看目录找到有问题的应用程序。尽量记住你最近安装了什么，然后一一删除。通常这些广告是`airpush`嵌入在应用程序中的结果，并且不太容易找到。

# python - 在python中使用'autospec = True'时模拟类属性

> ID：13549699
> 
> 赞同：7
> 
> 时间：2012-11-25T09:14:53.433
> 
> 标签：python, properties, attributes, mocking, subclassing

我希望模拟具有以下要求的课程：

*   该类具有公共读/写属性，在其`__init__()`方法中定义
*   该类具有公共属性，该属性在对象创建时自动递增
*   我希望使用`autospec=True`，因此该类的 API 将严格检查调用

一个简化的类样本：

```
class MyClass():
    id = 0

    def __init__(self, x=0.0, y=1.0):
        self.x = x
        self.y = y
        self.id = MyClass._id
        MyClass.id +=1

    def calc_x_times_y(self):
        return self.x*self.y

    def calc_x_div_y(self, raise_if_y_not_zero=True):
        try:
            return self.x/self.y
        except ZeroDivisionError:
            if raise_if_y_not_zero:
                raise ZeroDivisionError
            else:
                return float('nan') 
```

就属性而言，我需要模拟对象表现为原始对象：

*   它应该自动增加分配给每个新创建的模拟对象的 id
*   它应该允许访问其`x,y`属性但是模拟方法调用应该被模拟拦截，并验证其调用签名

最好的方法是什么？

**编辑**

我已经尝试了几种方法，包括对类进行子`Mock`类化、 use`attach_mock()`和 and `mock_add_spec()`，但总是遇到一些死胡同。

我正在使用标准的[模拟](http://www.voidspace.org.uk/python/mock/index.html#mock-mocking-and-testing-library)库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:40:38.387

由于没有答案，我将发布对我有用的方法（不一定是最好的方法，但在这里）：

我创建了一个模拟工厂，它创建一个`Mock()`对象，使用[此处](http://www.voidspace.org.uk/python/mock/mock.html#mock.PropertyMock)`id`描述的语法设置其属性，并返回该对象：

```
 class MyClassMockFactory():
     _id = 0

     def get_mock_object(self, *args,**kwargs):
        mock = Mock(MyClass, autospec = True)
        self._attach_mock_property(mock , 'x', kwargs['x'])
        self._attach_mock_property(mock , 'y', kwargs['y'])
        self._attach_mock_property(mock , 'id', MyClassMockFactory._id)
        MyClassMockFactory._id += 1
        return mock

     def _attach_mock_property(self, mock_object, name, value):
         p = PropertyMock(return_value=value)
         setattr(type(mock_object), name, p) 
```

现在，我可以为我的测试修补`MyClass()`构造函数：

```
class TestMyClass(TestCase):
     mock_factory = MyClassMockFactory()

     @patch('MyClass',side_effect=mock_factory.get_mock_object)
     test_my_class(self,*args):
         obj0 = MyClass()
         obj1 = MyClass(1.0,2.2)
         obj0.calc_x_times_y()
         # Assertions
         obj0.calc_x_times_y.assert_called_once_with()
         self.assertEqaul(obj0.id, 0)
         self.assertEqaul(obj1.id, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T18:40:14.563

很抱歉挖掘了一个旧帖子，但是可以让您精确地完成您想要实现的目标是修补`calc_x_times_y`并`calc_x_div_y`设置`autospec=True`在那里，而不是模拟整个类的创建。

就像是：

```
@patch('MyClass.calc_x_times_y')
@patch('MyClass.calc_x_div_y')
test_foo(patched_div, patched_times):
my_class = MyClass() #using real class to define attributes
# ...rest of test 
```

# android - Android 模拟 GPS 提供程序

> ID：13549701
> 
> 赞同：4
> 
> 时间：2012-11-25T09:15:13.017
> 
> 标签：android, gps, android-location

我的代码片段是：

```
mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
if(mLocationManager.getProvider(LocationManager.GPS_PROVIDER) != null) {
    mLocationManager.removeTestProvider(LocationManager.GPS_PROVIDER);
}

mLocationManager.addTestProvider(LocationManager.GPS_PROVIDER,
            "requiresNetwork" == "", "requiresSatellite" == "",
            "requiresCell" == "", "hasMonetaryCost" == "",
            "supportsAltitude" == "", "supportsSpeed" == "",
            "supportsBearing" == "",

android.location.Criteria.POWER_LOW,
        android.location.Criteria.ACCURACY_FINE);

location = new Location(LocationManager.GPS_PROVIDER);

mLocationManager.setTestProviderEnabled(
        LocationManager.GPS_PROVIDER, true);

// mLocationManager.setTestProviderLocation(LocationManager.GPS_PROVIDER,
// location);

location.setLatitude(FinalLatitudeIntArray[0]);
location.setLongitude(FinalLongitudeIntArray[0]);
mLocationManager.setTestProviderLocation(
        LocationManager.GPS_PROVIDER, location); 
```

我收到错误：

```
java.lang.IllegalArgumentException: Provider "gps" unknown
at android.os.Parcel.readException(Parcel.java:1326)
at android.os.Parcel.readException(Parcel.java:1276)
at android.location.ILocationManager$Stub$Proxy.removeTestProviderEnabled(ILocationManager.java:1097)
at android.location.LocationManager.removeTestProviderEnabled(LocationManager.java:1130) 
```

请帮我解决这个错误。添加。早些时候应用程序运行良好，但是当我重新启动系统时，应用程序开始显示错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:39:25.583

来自位置管理器上的 Android 文档：

```
removeTestProvider() throws 
IllegalArgumentException    if no provider with the given name exists 
```

因此，如果您在模拟器上进行测试，GPS 的设置可能已在重新启动时被重置（**尝试检查您的权限和 DDMS 以再次启用它**）。如果在设备上，您必须禁用 GPS（**转到设置并启用 GPS**）。

**编辑**：找到相关的东西：[这里](http://code.google.com/p/android/issues/detail?id=19857)。基本上，模拟器中发生了一些似乎不稳定的事情。从该线程的评论中，尝试使用`Criteria.ACCURACY_FINE`而不是`LocationManager.GPS_PROVIDER`，例如：

```
 LocationManager locationManager = (LocationManager)context.getSystemService( Context.LOCATION_SERVICE );

    Criteria criteria = new Criteria();
    criteria.setAccuracy( Criteria.ACCURACY_FINE );
    String provider = locationManager.getBestProvider( criteria, true );

    if ( provider == null ) {
        Log.e( TAG, "No location provider found!" );
        return;
    } 
```

浏览该线程以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:11:25.307

我遇到了同样的问题，因为现在有些设备没有 GPS。'varevarao' 提到了一个好方法，但如果我使用标准方法，我也会遇到问题。在某些设备上，它仍然在“getBestProvider”处返回空值（参见下面的代码）。

```
 Criteria criteria = new Criteria();
    criteria.setAccuracy( Criteria.ACCURACY_FINE );
    String provider = locationManager.getBestProvider( criteria, false );

    if ( provider == null ) {
        criteria.setAccuracy( Criteria.ACCURACY_COARSE );
        provider = locationManager.getBestProvider( criteria, true );
        Log.d( "Function", "No location provider found!" );
        return;
    } 
```

我这样做是为了解决它（见下面的代码）。不确定这是否是最好的方法，但它目前对我有用。它的工作原理是获取设备上可用的“位置提供者”列表，然后获取第一个（应该没关系，因为我只是将它用于模拟位置）。

```
 List<String> tmpProviders = locationManager.getAllProviders();

   if (!tmpProviders.isEmpty() && tmpProviders.toArray()[0] != null && !tmpProviders.toArray()[0].toString().isEmpty() ) {
      mocLocationProvider = tmpProviders.toArray()[0].toString();
  } else {// your error goes here } 
```

# java - 将 ButtonElement 包装到 Button

> ID：13549704
> 
> 赞同：0
> 
> 时间：2012-11-25T09:15:58.613
> 
> 标签：java, gwt

我正在尝试将 ButtonElement 包装到 Button 中：

```
@UiField ButtonElement myButton;

Button theButton = Button.wrap(myButton); 
```

但是，我收到此错误：

```
@UiField myButton, template field and owner field types don't match: com.google.gwt.dom.client.ButtonElement is not assignable to com.google.gwt.user.client.ui.Button 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:02:01.510

这意味着虽然您`ButtonElement`的 java 代码中有一个，但名称为“myButton”的 uibinder 标记实际上是一个`Button`小部件，而不是一个`ButtonElement`elt。

将 uibinder 更改为实际使用 a `<button>`，或将 更改`@UiField`为 Button （并放弃`wrap(...)`呼叫）。

# multithreading - putStrLn 是线程安全的吗？

> ID：13549706
> 
> 赞同：30
> 
> 时间：2012-11-25T09:16:04.807
> 
> 标签：multithreading, haskell, thread-safety

我知道，如果我有多个线程`putStrLn`在没有任何并发​​控制的情况下调用，那么线程的输出可能是交错的。

我的问题是这个交错输出是否`putStrLn`是线程安全的模数？

我假设这`putStrLn`是一个缓冲的写操作，所以我真的在问是否可以通过同时调用两个线程来发生输出缓冲区的任何损坏`putStrLn`。

总的来说，关于 Haskell（实际上是 GHC）的其他“标准 I/O”函数的线程安全可以说什么？特别是，对于任何缓冲的读取操作，同一个字符是否有可能返回到同时进行相同读取调用的两个不同线程？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-25T11:43:38.187

是的，就您所问的而言，它是线程安全的。A`Handle`受保护，`MVar`不会让缓冲区损坏。但是，正如您所指出的，交错是另一回事。

# tabs - GNU 屏幕分割选项卡

> ID：13549714
> 
> 赞同：0
> 
> 时间：2012-11-25T09:18:03.083
> 
> 标签：tabs, split, gnu-screen

我正在寻找一种使用 GNU Screen 拆分选项卡（不是所有选项卡）的方法。我目前每个帐户/应用程序都有一个标签。对于一个应用程序，我想同时查看日志并进行 bash。

我试图在此选项卡中创建一个新的屏幕实例，但它创建了一个新选项卡...

任何人都可以帮助我吗？

PS：我想要什么：[http ://www.imagup.com/data/1168517677.html](http://www.imagup.com/data/1168517677.html)

为了模拟，我创建了一个附加选项卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:44:08.003

如果要在现有屏幕中创建新屏幕实例，可以运行

```
screen -S SOME-NAME 
```

但是，请注意，这种屏幕中的屏幕很难操作，因为您需要转义所有`C-a`绑定以将它们转发到内部屏幕。例如，发送`C-a`到内部屏幕是使用 完成的`C-a``a`，您可以使用 来在两个选项卡之间切换`C-a``a``C-a``a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:38:57.720

假设控制序列`screen`是默认`Ctrl``a`的，当前窗口可以用`Ctrl``a`-分割`S`。然后使用-切换到新窗格，并使用`Ctrl``a`-`TAB`获取例如窗口 1 。`Ctrl``a``1`

# c# - 将复杂对象绑定到 DataGrid

> ID：13549715
> 
> 赞同：1
> 
> 时间：2012-11-25T09:18:16.753
> 
> 标签：c#, wpf, datagrid

假设我有一个 ObservableCollection（类型 MyRow）（称为 Rows）的行。在 MyRow 中，我有一堆属性，包括 ObservableCollection（类型 MyRowContents）（称为 Contents）——它基本上是该行中所有内容的列表。MyRowContents 也有几个属性，包括 DisplayContents（字符串）。

例如...对于具有 2 行和 3 列的 DataGrid，数据结构将是 2 个“行”，每个包含 3 个“内容”。

我必须在 XAML 的 DataGrid 中做什么才能使单元格内容显示 Rows[i].Contents[j].DisplayContents？

编辑：

嗨，很抱歉在最初的消息中不够清楚。我正在尝试制作一个能够动态显示数据的数据网格（来自提前未知的数据库表）。

我以此为指导： http: [//pjgcreations.blogspot.com.au/2012/09/wpf-mvvm-datagrid-column-collection.html](http://pjgcreations.blogspot.com.au/2012/09/wpf-mvvm-datagrid-column-collection.html) - 我可以动态显示列。

```
 <DataGrid ItemsSource="{Binding Rows}" AutoGenerateColumns="False" 
              w:DataGridExtension.Columns="{Binding ElementName=LayoutRoot, Path=DataContext.Columns}" /> 
```

我只是不知道如何动态显示行数据。

我的行是：

```
public class MyRow
{
    public int UniqueKey { get; set; }
    public ObservableCollection<MyRowContents> Contents { get; set; }
} 
```

MyRowContents 是：

```
public class MyRowContents
{
    public string ColumnName { get; set; } // Do I need this?
    public object DisplayContents { get; set; } // What I want displayed in the grid cell
} 
```

我的视图模型中有一个公共属性 ObservableCollection Rows，如您所见，这是我在 ItemsSource 中绑定的。但我不知道如何让每个 MyRowContents 的“DisplayContents”显示在网格视图的相应单元格中。

鉴于我可以动态显示列名，可以做出这样的假设：Contents（在 MyRow 中）中项目的顺序将与列的顺序相匹配。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:17:15.503

首先，您必须将行 ID 放在 RowContent 中，因此您的应用程序逻辑应类似于：

行内容.cs：

```
public class RowContent
{
    //public string ColumnName { get; set; } "you dont need this property."

    public int ID;  //You should put row ID here.
    public object DisplayContents { get; set; } "What is this property type, is string or int or custom enum??"
} 
```

RowViewModel.cs：

```
public class RowViewModel
{
    public ObservableCollection<MyRowContents> Contents { get; set; }
} 
```

现在你必须把你的 Collection 放在 Window.DataContext 中才能将它绑定到 DataGrid

MainWindow.xaml.cs ：

```
public partial class MainWindow : Window
{
    private RowViewModel rvm = new RowViewModel(); //Here i have made new instance of RowViewModel, in your case you have to put your ViewModel instead of "new RowViewModel();";

    public MainWindow()
    {
        InitializeComponent();

        DataContext = rvm; // this is very important step.
    }
} 
```

最后一步是在窗口 XAML 中。

MainWindow.xaml ：

```
<DataGrid ItemsSource="{Binding Path=Contents}" AutoGenerateColumns="false">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Row ID" Binding="{Binding Path=ID,UpdateSourceTrigger=PropertyChanged}"/>
        <DataGridTextColumn Header="your row header" Binding="{Binding Path=DisplayContents,UpdateSourceTrigger=PropertyChanged}"/>
    </DataGrid.Columns>
</DataGrid> 
```

DataGridColumn 有五种类型，您必须根据 DisplayContents 属性的类型选择合适的类型。

# html - CSS 定位 HTML 图标

> ID：13549718
> 
> 赞同：1
> 
> 时间：2012-11-25T09:19:04.070
> 
> 标签：html, css

这是一个小问题。我试过摆弄它，但没有运气。所以基本上我试图让这个小图标在中心但在栏的末尾：

[http://puu.sh/1u4SI](http://puu.sh/1u4SI)

但是，如果我输入 CSS `top: 5px;`，它会显示： http: [//puu.sh/1u4T1](http://puu.sh/1u4T1)

代码是这样的：

```
 <style>
 a.news-item, a.box-link {
 display: block;
 padding: 5px;
 margin: 0 0 2px -5px;
 background: #E9E9E9;
 -moz-border-radius: 3px;
 -webkit-border-radius: 3px;
 border-radius: 3px;
 color: #8C8C8C;
 text-decoration: none;
 font-weight: normal;
}

a.news-item {
 width: 100%;
 height: 36px;
 color: #8C8C8C;
}

a.box-link {
 width: 230px;
 padding: 5px;
 height: 24px;
 overflow: hidden;
 color: #8C8C8C;
}

a.news-item span.title {    
 font-size: 18px;
}

a.news-item:last-child, a.box-link:last-child {
 margin: 0 0 0 -3px;    
}

a.news-item:hover, a.box-link:hover {
 background: #E2E2E2;
}

.pane .delete {
 position: absolute;                
 right: 28px;  
 top: 5px;   
 cursor: pointer;   
}

.pane {
 padding: 3px;
}
</style>

<script type="text/javascript">
$(document).ready(function(){                  
$(".pane .delete").click(function(){
    $(this).parents(".pane").animate({
        opacity: 0
    }, 'slow', function(){
        $(this).slideUp();
    });
});

});
</script>

    <h2>Topher's Articles</h2>

    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p><br />

    <div class="pane">  
    <img src="../real/_lib/_image/minus.png" alt="delete" class="delete" />             
    <a class="news-item" href="#/media/<?php echo $row['id'] ?>.<?php echo str_replace(" ", "-", $row['news_title']); ?>">        
    <span class="title"><p><?php echo $row['news_title'] ?> <font size="2"> &raquo; <?php echo $row['news_date'] ?></font></p></span>                
    </a> 
    </div>          

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:25:39.880

您是否尝试设置`padding-top`instad of `top`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:28:12.007

我猜你需要使用`margin-top`而不是`top`.

如果你想`top`在相对坐标下工作，你需要应用`position: relative`到它的容器上。

# jquery - 在 fullcalendar.js 的事件中渲染 HTMLS 标签

> ID：13549733
> 
> 赞同：4
> 
> 时间：2012-11-25T09:22:06.767
> 
> 标签：jquery, ruby-on-rails, fullcalendar

在进行 AJAX 调用后，我需要将事件呈现为 HTML 表。成功时我得到了表格 HTMLS。但是当它在标题中呈现时，它会将表格 HTMLS 显示为普通文本。当我搜索它时，我找到了一个解决方案，我需要使用以下代码将其呈现为 HTMLS：

```
eventRender: function (event, element) {
element.find('span.fc-event-title').html(element.find('span.fc-event-title').text());
}); 
```

但是当我把它放在我的代码中时，它显示了一些 JS 错误。我不知道为什么会发生这个错误。请帮我弄清楚。请在下面找到该代码的完整部分：

```
 dayClick: function(start,allDay, jsEvent, view) {
   $('#calendar').fullCalendar('changeView', 'agendaDay');
  var date_clicked = $.fullCalendar.formatDate( start, "yyyy/MM/dd");
  var date_for_view = Date.parse(date_clicked);
  var date_for_view=new Date(date_for_view);
  $('#calendar').fullCalendar( 'gotoDate',date_for_view );
  $.ajax({
      url: "/admins/users/update_projects?date_selected="+date_clicked+"&uid="+'<%=params[:user]%>',
      type: 'GET',
      success: function (data, response, event, date) {
           $('#calendar').fullCalendar('renderEvent',
              {
                title: data,
                start: start
              },
      eventRender: function (event, element) 
              {
               element.find('span.fc-event-title').html(element.find('span.fc-event-title').text());           
              }); },
      error: function () {
          $('#calendar').fullCalendar('renderEvent',
              {
                title: "No Tasks Scheduled Today",
                start: date_clicked              
              });      
               }
            });
  }, 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T10:35:02.813

您应该将[eventRender](http://arshaw.com/fullcalendar/docs/event_rendering/eventRender/)回调添加到初始化日历的代码中

```
// create fullCalendar
$('#calendar').fullCalendar({
    eventRender: function(event, element, view) {
         if (view.name == 'agendaDay') {
              element.find('span.fc-event-title').html(element.find('span.fc-event-title').text());
         }
    }
}); 
```

在 Ajax 响应中，只需调用 renderEvent 方法并将事件作为第二个参数传递

```
//call the render event method
$('#calendar').fullCalendar('renderEvent', {
       title: 'My Event 2',
       start: '2012-11-25'
}); 
```

工作示例：http: [//jsfiddle.net/bfz3J/1/](http://jsfiddle.net/bfz3J/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T02:04:40.280

在 FullCalendar (v2.6.1) 的最新版本上，我在将 html 显示在议程周和议程日时遇到了问题。这对我有用：

```
 eventRender: function(event, element, view) {
    if (view.name === 'month') {
      element.find('span.fc-title').html(element.find('span.fc-title').text());
    } else if (view.name === 'agendaWeek' || view.name === 'agendaDay') {
      element.find('div.fc-title').html(element.find('div.fc-title').text());
    }
  }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T14:09:50.450

我对这两种类型的事件的解决方案（少于半小时，多半小时）

```
eventRender: function (event, element)
            {
                //hack for view html(not as text)
                element.find('.fc-event-title').html(element.find('.fc-event-title').text());
            },
eventAfterAllRender:function( view ) {
                $('.fc-event-time').each(function(){
                    $(this).html($(this).text());
                });
            }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-23T15:02:53.513

@i123fr3 的技术仍然适用，但由于对 fullcalendar 的 HTML 的修改，它不再有效。fullcalendar 生成的 HTML 现在使用`div`，`.fc-event-title`而不是`span`.

将实现更改`eventRender`为：

```
if (view.name == 'agendaDay') {
  element.find('.fc-event-title').html(element.find('.fc-event-title').text());
} 
```

# node.js - socket.io 中的 emit 方法的成功回调

> ID：13549734
> 
> 赞同：23
> 
> 时间：2012-11-25T09:22:24.347
> 
> 标签：node.js, socket.io

我试图从我的客户发出自定义消息。我需要对其成功和失败执行一些操作。现在，我怎样才能将成功回调附加到发射方法？

对于错误回调，我使用了[Exposed events](https://github.com/LearnBoost/socket.io/wiki/Exposed-events) doc 并让它工作

```
socket.on('error', () -> console.log("Error Occured")) 
```

为了成功，我尝试了

```
socket.emit('my custom method', {content: json},() -> console.log("Emitted")) 
```

无论成功还是失败，都不会触发此回调。

我怎样才能获得成功处理程序？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-02-28T05:11:05.843

如果您查看文档，它会向您展示一个传递回调函数的示例-最后一个示例：[http ://socket.io/docs/#Sending-and-getting-data-acknowledgements](http://socket.io/docs/#Sending-and-getting-data-acknowledgements)

前服务器：

```
 socket.on('formData', 
              function(data, fn){
                      // data is your form data from the client side
                      // we are here so we got it successfully so call client callback
                      // incidentally(not needed in this case) send back data value true 
                      fn(true);
              }
             ); 
```

客户：

```
 socket.emit('formData', 
                  data, 
                  function(confirmation){
                          // send data
                          // know we got it once the server calls this callback      
                          // note -in this ex we dont need to send back any data 
                          // - could just have called fn() at server side
                          console.log(confirmation);
                  }
                 ); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-25T10:27:01.927

您的第二个代码没有做任何事情的原因是因为 socketIO 中的暴露事件只是为`socket.on`方法定义的。因此，您需要在服务器 app.js 中添加另一个发射来完成此操作

**客户端**发出自定义消息并通过 socket.emit 将 JSON 数据发送到套接字，他还获得一个处理成功回调的更新函数

```
socket.emit ('message', {hello: 'world'});
socket.on ('messageSuccess', function (data) {
 //do stuff here
}); 
```

**服务器端**从客户端发出的消息中获取调用，并将 messageSuccess 发送回客户端

```
socket.on ('message', function (data) {
 io.sockets.emit ('messageSuccess', data);
}); 
```

您可能可以使用此行为制作一个模块，以便您可以将它附加到您希望以这种方式处理的每条消息。

# android - 安卓小部件安装

> ID：13549735
> 
> 赞同：0
> 
> 时间：2012-11-25T09:23:34.457
> 
> 标签：android, android-widget

我的小部件有问题。这是一个倒计时到固定日期的简单小部件。问题是某些设备不想安装小部件。在eclipse中的模拟器上是同一个对另一个不起作用。没有任何错误。

原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:45:30.070

您可以通过 IntelliJ Idea 或 Eclipse 等 IDE 部署应用程序来获取有关此原因的所有信息。

在 IntelliJ Idea 中，构建所有文件后，在部署期间，`Run`对话框会向您显示安装状态。如果发生故障，它也会显示原因。

通常在调试过程中，原因是来自不同机器的安装（会显示类似`[INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES]`）。这可能是由于安装证书的密钥库已更改。

# css - 覆盖引导显示：内联属性

> ID：13549743
> 
> 赞同：0
> 
> 时间：2012-11-25T09:24:24.953
> 
> 标签：css, twitter-bootstrap

我目前正在使用引导选项卡 css。

我正在尝试使选项卡垂直而不是水平（默认由引导程序）。

我尝试通过创建用户 css 来覆盖引导程序为导航选项卡提供的“显示：内联，内联块”属性，该用户 css 是在引导程序之后加载的，具有 ul 的“显示：块”属性。

它仍然拒绝让步，仍然是水平的。

有任何想法吗？我正在寻找一个仅 css 的解决方案。

# php - 变量 echo 内的 PHP“if”

> ID：13549744
> 
> 赞同：0
> 
> 时间：2012-11-25T09:24:36.247
> 
> 标签：php

我正在创建一个导航栏，如果页面当前处于活动状态，它会自动将类更改为“活动”（使用 php if 语句 [使用当前 URL 进行匹配]）

我还希望能够根据用户是否登录来更改标题...现在我通常对此没有问题，但是，因为变量内部有 if 语句，我不知道如何继续。

我的问题是，如果在变量 estabilsihing 中执行 if 语句是不可能的……例如，这是我正在尝试做的，但是它不起作用……有没有办法做到这一点，并且实际上使它起作用。 ..谢谢你提前！

# 我的代码

### ---PHP ---

## 在头上：

```
<?php
///// (GETS THE PARTS OF THE CURRENT URL)
error_reporting(0);
$directoryURIbody = $_SERVER['REQUEST_URI'];
$pathbody = parse_url($directoryURIbody, PHP_URL_PATH);
$componentsbody = explode('/', $pathbody);
$first_partsbody = $componentsbody[1];
$second_partsbody = $componentsbody[2];
$third_partsbody = $componentsbody[3];
$fourth_partsbody = $componentsbody[4];
$fifth_partsbody = $componentsbody[5];
?> 
```

## 在正文中：

：

```
<?php

if (!isset($_SESSION['idx'])) { ///////////IF NOT LOGGED IN
  if (!isset($_COOKIE['idCookie'])) {//////IF NOT LOGGED IN
      $navbar = '
        <li class="<?php if ($first_partmainnav=="") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>">Home</a></li>
        <li class="<?php if ($first_partmainnav=="tutorials") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>tutorials">Tutorials</a></li>
        <li class="<?php if ($first_partmainnav=="resources") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>resources">Resources</a></li>
        <li class="<?php if ($first_partmainnav=="library") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>library">Library</a></li>
        <li class="<?php if ($first_partmainnav=="our-projects") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>our-projects">Our Projects</a></li>
        <li class="<?php if ($first_partmainnav=="community") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>community">Community</a></li>';
}
if (isset($_SESSION['idx'])) { ////////////IF LOGGED IN (WITHOUT COOKIES)

      $navbar = '
        <li class="<?php if ($first_partmainnav=="") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>">Home</a></li>
        <li class="<?php if ($first_partmainnav=="whatever") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>whatever">whatever</a></li>
        <li class="<?php if ($first_partmainnav=="justanother") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>justanother">Just Another</a></li>
        ';

} else if (isset($_COOKIE['idCookie'])) {//IF LOGGED IN (WITH COOKIES)

      $navbar = '
        <li class="<?php if ($first_partmainnav=="") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>">Home</a></li>
        <li class="<?php if ($first_partmainnav=="whatever") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>whatever">whatever</a></li>
        <li class="<?php if ($first_partmainnav=="justanother") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>justanother">Just Another</a></li>
        ';    

}
?> 
```

* * *

```
<?php echo $navbar; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:31:12.170

您可以使用三元运算符并使用字符串连接而不是回显：

```
<?php

if (!isset($_SESSION['idx'])) { ///////////IF NOT LOGGED IN
  if (!isset($_COOKIE['idCookie'])) {//////IF NOT LOGGED IN
  $navbar = '
    <li class="'. ($first_partmainnav=="" ? "active" : "noactive")  .'"><a href="<?php echo $dyn_wwwFULL; ?>">Home</a></li>

?> 
```

其余的以此类推

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:08:43.907

li 标签内的变量没有任何问题，问题在于您在单引号内混合 HTML 和 PHP 代码和标签的方式。除非你纠正它，否则什么都不会起作用。这是使用您自己的代码正确执行此操作的方法：

```
<?php
if ( !isset( $_SESSION[ 'idx' ] ) ) { ///////////IF NOT LOGGED IN
  if ( !isset( $_COOKIE[ 'idCookie' ] ) ) { //////IF NOT LOGGED IN
    ?>

  <li class="<?php if ( $first_partmainnav == "" ) { echo "active";   } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>">Home</a></li>
  <li class="<?php if ( $first_partmainnav == "tutorials" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>tutorials">Tutorials</a></li>

  <li class="<?php if ( $first_partmainnav == "resources" ) { echo "active"; } else { echo "noactive";  }?>"><a href="<?php echo $dyn_wwwFULL; ?>resources">Resources</a></li>
  <li class="<?php if ( $first_partmainnav == "library" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>library">Library</a></li>

  <li class="<?php if ( $first_partmainnav == "our-projects" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>our-projects">Our Projects</a></li>
  <li class="<?php if ( $first_partmainnav == "community" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>community">Community</a></li>

  <?php }
  if ( isset( $_SESSION[ 'idx' ] ) ) { ////////////IF LOGGED IN (WITHOUT COOKIES)
  ?>

  <li class="<?php if ( $first_partmainnav == "" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>">Home</a></li>
  <li class="<?php if ( $first_partmainnav == "whatever" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>whatever">whatever</a></li>

  <li class="<?php if ( $first_partmainnav == "justanother" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>justanother">Just Another</a></li>

  <?php }  else {
    if ( isset( $_COOKIE[ 'idCookie' ] ) ) { //IF LOGGED IN (WITH COOKIES)
  ?>

    <li class="<?php if ( $first_partmainnav == "" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>">Home</a></li>
    <li class="<?php if ( $first_partmainnav == "whatever" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>whatever">whatever</a></li>
    <li class="<?php if ( $first_partmainnav == "justanother" ) { echo "active"; } else { echo "noactive"; }?>"><a href="<?php echo $dyn_wwwFULL; ?>justanother">Just Another</a></li>
   <?php 
    }
  }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:31:38.170

虽然我个人会更改执行此操作的整个方法（有一个与您的列表对应的数组并相应地回显），但使用您的方法可以通过将变量与代码分开来完成，例如：

```
$array['tutorials'] = ($first_partmainnav == "tutorials") ? 'active' : 'noactive';
$array['resources'] = ($first_partmainnav == "resources") ? 'active' : 'noactive';
// etc... 
```

然后将它与您的输出连接起来。

一般来说，您应该使用字符串连接：

错误的：

```
echo '<a href="<?php echo $dyn_wwwFULL; ?>tutorials ...'; 
```

对：

```
echo '<a href="'.$dyn_wwwFULL.'tutorials ...'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T09:33:34.747

我想你正在寻找这样的东西：

```
$first_partmainnav = 'tutorials';
echo 'some text ' . ($first_partmainnav == 'tutorials' ? 'active' : '') . ' some more text'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T09:35:20.243

我用 PHP 编写代码已经有一段时间了，但看起来你是

以下代码将如何工作？

```
<?php

if (!isset($_SESSION['idx'])) { ///////////IF NOT LOGGED IN
if (!isset($_COOKIE['idCookie'])) {//////IF NOT LOGGED IN
$navbar = '
<li class="' if($first_partmainnav=="") {echo "active"; } else  {echo "noactive";} '"><a href="' echo $dyn_wwwFULL; '">Home</a></li>'
....
?> 
```

相信您可以自己填写其余部分。

当我查看 < li> 行的第一行的语法突出显示时，您会注意到发生了一些奇怪的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-25T19:03:30.857

真正的问题是您不能在引用的 PHP 代码中包含 PHP 标记。让我们检查问题中第一个 li 块的最后一行：

```
 <?php
    //NOTE: Had to add a space to separate php tags in comments for proper code highlighting, like this: < ? php --- ? >

    $navbar = '
            <li class="<?php if ($first_partmainnav=="community") {echo "active"; } else  {echo "noactive";}?>"><a href="<?php echo $dyn_wwwFULL; ?>community">Community</a></li>'; ?>

    <?php
    /* Although the whole $navbar value is quoted (Single quotes), there is php code surrounded by php tags in 2 places: 
    < ? php if ($first_partmainnav=="community") {echo "active"; } else  {echo "noactive";} ? > Here
    < ? php echo $dyn_wwwFULL; ? > And here
    Same happens with the rest of the lines, so it is impossible for this code to work.
    */
    ?> 
```

选择的答案也是错误的。让我们来看看：

```
 <?php
      $navbar = '<li class="'. ($first_partmainnav=="" ? "active" : "noactive")  .'"><a href="<?php echo $dyn_wwwFULL; ?>">Home</a></li>
      '; // Add the single quote an semicolon missing.

    /* Same problem: $navbar value is quoted but there is php code surrounded by php tags:
    <a href="< ? php echo $dyn_wwwFULL; ? > Here.                                       
    This code can't work either.
    */
    ?> 
```

# objective-c - cocoa NSFileManager 文件大小错误

> ID：13549745
> 
> 赞同：1
> 
> 时间：2012-11-25T09:24:38.457
> 
> 标签：objective-c, macos, cocoa, nsfilemanager

我正在使用 NSFileManager 来获取我们应用程序中某些文件的大小。

每个文件都由一个单独的线程检查，所有文件的结果都是相同的错误值。在单独的线程中为每个文件运行以下代码：

```
NSFileManager *fileManager= [[NSFileManager alloc] init];
NSUInteger completedFileSize = [[[fileManager attributesOfItemAtPath:fileName error:&error] objectForKey:NSFileSize] unsignedLongValue];
NSLog(@"Part %lu: %@ => size:%lu actual size:%lu", myPart.SequenceNumber, fileName, completedFileSize, myPart.Size); 
```

输出是：

> 第 1 部分：/Users/David/TEMP/245E0BF53ECA/part1 => 大小：36864 实际大小：37187
> 
> 第 5 部分：/Users/David/TEMP/245E0BF53ECA/part5 => 大小：36864 实际大小：37187
> 
> 第 2 部分：/Users/David/TEMP/245E0BF53ECA/part2 => 大小：36864 实际大小：37187
> 
> 第 4 部分：/Users/David/TEMP/245E0BF53ECA/part4 => 大小：36864 实际大小：37187
> 
> 第 3 部分：/Users/David/TEMP/245E0BF53ECA/part3 => 大小：36864 实际大小：37187
> 
> 第 6 部分：/Users/David/TEMP/245E0BF53ECA/part6 => 大小：36864 实际大小：37187
> 
> 第 7 部分：/Users/David/TEMP/245E0BF53ECA/part7 => 大小：36864 实际大小：37186
> 
> 第 0 部分：/Users/David/TEMP/245E0BF53ECA/part0 => 大小：36864 实际大小：37189

**终端上ls -l**命令的输出也与之前保存在**myPart.Size**中的正确文件大小相同

 **> -rw-r--r-- 1 David 员工 37189 Nov 25 11:25 part0
> 
> -rw-r--r-- 1 David 员工 37187 Nov 25 11:25 第 1 部分
> 
> -rw-r--r-- 1 David 员工 37187 Nov 25 11:25 第 2 部分
> 
> -rw-r--r-- 1 David 员工 37187 Nov 25 11:25 第 3 部分
> 
> -rw-r--r-- 1 David 员工 37187 Nov 25 11:25 第 4 部分
> 
> -rw-r--r-- 1 David 员工 37187 Nov 25 11:25 part5
> 
> -rw-r--r-- 1 David 员工 37187 Nov 25 11:25 第 6 部分
> 
> -rw-r--r-- 1 David 员工 37186​​ Nov 25 11:25 part7

我正在使用 OS X 10.8 和 Xcode 4.5。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:17:46.373

我发现了实际问题！

该文件未在以下之前关闭：

```
[[[fileManager attributesOfItemAtPath:fileName error:&error] objectForKey:NSFileSize] unsignedLongValue]; 
```

**所以我关闭了与path的****fileName**变量关联的文件处理程序，问题就解决了。

 **```
fclose(myFile); //this is the handler for fileName
//now the value returned from the below line is correct.
[[[fileManager attributesOfItemAtPath:fileName error:&error] objectForKey:NSFileSize] unsignedLongValue]; 
```

谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:33:55.260

我认为您应该使用 defaultManager 和 fileSize 来计算文件大小。

```
unsigned long long fileSize = [[[NSFileManager defaultManager] attributesOfItemAtPath:someFilePath error:nil] fileSize]; 
```****

# android-listview - listview 上的取消按钮，asyncTask 不起作用。由于adapter.notifyDataSetChanged()的高频率

> ID：13549751
> 
> 赞同：1
> 
> 时间：2012-11-25T09:25:24.887
> 
> 标签：android-listview, android-asynctask

我正在开发一个 android 应用程序，我正在使用 asyncTask 下载文件并使用以下代码从方法 onProgressUpdate 更新 listView 上的进度条。

```
// In asynctask
@Override
protected String doInBackground(String... aurl) {
    int count;
    try {
    fn = getFileName(aurl[0]); //working fine
    URL url = new URL(aurl[0]);
    URLConnection conexion = url.openConnection();
    conexion.connect();
    int lenghtOfFile = conexion.getContentLength();

    InputStream input = new BufferedInputStream(url.openStream());
    OutputStream output = new FileOutputStream("/mnt/sdcard/"+fn);
    di.title = fn;
    byte data[] = new byte[1024];
    long total = 0;

        while ((count = input.read(data)) != -1) {
            if(isCancelled())return (null);
            total += count;
            publishProgress((int)((total*100)/lenghtOfFile)); //publishing very very frequently as download speed is 3MBPS
            output.write(data, 0, count);
        }
        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
        Log.e("MYAPP", "exception", e);
    }
return null;
}

protected void onProgressUpdate(Integer... progress) {
   downloaditem.title = fn+" - "+progress[0]+"%";
   di.per = progress[0];
   adapter.notifyDataSetChanged();
}
... 
```

我在 listview 上添加了一个按钮，也可以随时取消此下载。按钮点击监听如下：

```
// In adapter holder.button is pointing to correct cancel button in listview
holder.button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
       DownloadItem.di.cancel(true); // This is also correctly canceling the task
    }
}); 
```

如您所见，问题`onProgressUpdate`是更新`listView`非常频繁。所以我无法点击 UI 中的那个按钮来取消它，因为这个按钮也经常被刷新。

如果我使下载速度变慢并且进度更新频率变慢，那么这可以正常工作。

我该如何处理这个问题？

# php - 从爆炸中的特定数组计数

> ID：13549754
> 
> 赞同：0
> 
> 时间：2012-11-25T09:25:42.257
> 
> 标签：php, explode

是否可以从爆炸中的特定数组中计数？

### 例子：

```
<?php
$number='This is the number of,5,6,7,8,9';
$collect=explode(",",$number);
print_r($collect);
?> 
```

### 输出将是：

```
Array ( [0] => This is the number of [1] => 5 [2] => 6 [3] => 7 [4] => 8 [5] => 9 ) 
```

但我需要忽略第一个数组。意思是，我只想计算`5,6,7,8,9`并忽略`"This is the number of"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:29:36.280

```
unset($collect[0]); 
```

见 [http://php.net/manual/en/function.unset.php](http://php.net/manual/en/function.unset.php)

和

[从数组中删除一个元素](https://stackoverflow.com/questions/369602/how-to-delete-an-element-from-an-array-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:32:43.367

您可以使用[array_shift](http://php.net/manual/en/function.array-shift.php)删除数组的第一个元素。

您写了“我想忽略第一个数组”，但您显然是指“数组元素”。请注意，“数组”是`explode`函数的整个输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T09:36:24.183

有可能的。

您可以直接删除数组的第一个元素：

```
$number='This is the number of,5,6,7,8,9';
$collect=explode(",",$number);
unset($collect[0]);
print_r($collect); 
```

But briefly, you should use regular expressions so you match only the numbers:

```
preg_match_all('/,(\d+)/, explode(",",$number), $collect); 
```

see [http://php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T09:35:26.783

只需使用下面的代码而不是您的代码...这里我只是添加一个新行...第四行...

```
<?php
$number='This is the number of,5,6,7,8,9';
$collect=explode(",",$number);
array_shift($collect); // remove the first index from the array
print_r($collect);
?> 
```

输出：

```
 Array ( [0] => 5 [1] => 6 [2] => 7 [3] => 8 [4] => 9 ) 
```

# linux - bash - 转义字符以按原样获取字符串

> ID：13549758
> 
> 赞同：0
> 
> 时间：2012-11-25T09:26:40.693
> 
> 标签：linux, bash, shell

我在 bash 中有以下脚本：

```
#!/bin/bash
PSQL="psql -a -e -d users -U postgres --no-align -F$'\t' -c"
FILENAME="file.ext"
QUERY="select * from users limit 1;"
${PSQL} "${QUERY}" # > ${FILENAME} 
```

但`-F$'\t'`评估的方式不同。我们如何确保不会对字符串进行评估以返回不同的字符串，即最后我们希望将命令执行为：`psql -a -e -d users -U postgres --no-align -F$'\t' -c "select * from users limit 1;" > file.ext`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:34:09.043

解决问题的最佳方法是使用数组：

```
PSQL=( psql -a -e -d users -U postgres --no-align $'-F\t' -c )
FILENAME="file.ext"
QUERY="select * from users limit 1;"
"${PSQL[@]}" "${QUERY}" # > ${FILENAME} 
```

**解释。**第一行定义了一个名为 PSQL 的新数组。你可以把它想象成：

```
PSQL[0] = psql
PSQL[1] = -a
PSQL[2] = -e
PSQL[3] = -d
PSQL[4] = users
PSQL[5] = -U
PSQL[6] = postgres
PSQL[7] = --no-align
PSQL[8] = -F<tab>
PSQL[9] = -c 
```

在最后一行中，（双引号）术语`"${PSQL[@]}"`将扩展为构成数组的 10 个“单词”，`PSQL`而（双引号）术语`"${QUERY}"`将扩展为被`select * from users limit 1;`视为单个单词的字符串。为了让事情更清楚，我将向您展示扩展如何使用`{`并将`}`bash 在扩展行时看到的每个参数进行分组`"${PSQL[@]}" "${QUERY}"`：

```
{ psql } { -a } { -e } { -d } { users } { -U } { postgres } { --no-align } { -F<tab> } { -c } { select * from users limit 1; } 
```

**评论。**使用所有大写的变量名`bash`被认为是不好的做法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T10:08:39.707

你需要确保

*   制表符实际上存储在字符串中：

```
 PSQL="psql -a -e -d users -U postgres --no-align -F"$'\t'" -c" 
```

*   该 bash 在评估期间不会忽略选项卡：

```
OLDIFS="$IFS"
IFS=" "
${PSQL} "${QUERY}" # > ${FILENAME}
IFS="$OLDIFS" 
```

（`IFS`内部字段分隔符）被 bash 用来分隔各个参数，默认情况下包含制表符。您可以通过键入来验证这一点`od -abc <<< "$IFS"`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-25T09:43:25.450

解决方案非常简单，只需将最后一行改为：

```
eval "${PSQL} '${QUERY}' # > ${FILENAME}" 
```

# c++ - Win32 api 用于打开和获取资源文件中的数据

> ID：13549759
> 
> 赞同：2
> 
> 时间：2012-11-25T09:26:47.997
> 
> 标签：c++, winapi, dll, resources, versioning

我有一个正在编译成 DLL 的项目，以及我手动添加的资源文件。我正在寻找可以帮助我查找资源文件并从中获取信息和数据的 Win32 API（使用 C++）。

例如 - 获取公司名称或版本..

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:00:08.053

调用下面的函数，将 TEXT("CompanyName") 作为 lpszVersionType `

```
#pragma comment(lib, "version.lib")
BOOL GetVersionString(LPCTSTR lpszModuleFileName, LPCTSTR lpszVersionType, LPTSTR lpszVersionString)
{   int i, j;
unsigned long u;
LPTSTR pBlock, pTmpVersion;
TCHAR buf[_MAX_PATH];
BOOL bRet = FALSE;

struct LANGANDCODEPAGE
{   WORD wLanguage;
    WORD wCodePage;
} *lpTranslate;

if ((i = GetFileVersionInfoSize(lpszModuleFileName, &u)) == 0) // !!
    return FALSE;
i++;
pBlock = (LPTSTR)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, i * sizeof(TCHAR));
if (pBlock == NULL) // !!
    return FALSE;

if (GetFileVersionInfo(lpszModuleFileName, u, i, pBlock))
{   VerQueryValue(pBlock, TEXT ("\\VarFileInfo\\Translation"), (LPVOID*)&lpTranslate, (UINT *)&u); // // Read the list of languages and code pages
    j = (int)(u/sizeof(struct LANGANDCODEPAGE));
    for (i = 0; i < j; i++)
    {   wsprintf(buf, TEXT ("\\StringFileInfo\\%04x%04x\\%s"), lpTranslate[i].wLanguage, lpTranslate[i].wCodePage, lpszVersionType);
        VerQueryValue(pBlock, buf, (void **)&pTmpVersion, (UINT *)&u);
        if (u > 0)
        {   lstrcpy(lpszVersionString, pTmpVersion);
            bRet = TRUE;
            break;
        }
    }
}

HeapFree(GetProcessHeap(), 0, pBlock);

return bRet;
} 
```

`

# java - 应用进化脚本（JPA 和 Ebean 版本）时在 New I/O worker #1 中播放框架错误

> ID：13549761
> 
> 赞同：3
> 
> 时间：2012-11-25T09:27:21.603
> 
> 标签：java, oracle, playframework, oracle10g, playframework-2.0

我尝试在 oracle 10g 数据库上设置计算机数据库示例，但进化脚本出现错误：创建示例的`play_evolution`表`Company`和`Computer`表后，请我制作进化脚本以将数据放入这些数据库： ![在此处输入图像描述](../Images/d9b42a9e5b23d520339b3cc95d81d548.png)

但是当我尝试时，`Apply this script now!`我得到了这个结果：

```
2012-11-26 11:33:12,324 - [INFO] - from play in play-akka.actor.default-dispatcher-1 
database [default] connected at jdbc:oracle:thin:@10.0.2.15:1521:orcl

2012-11-26 11:33:13,166 - [ERROR] - from application in New I/O  worker #1 

! @6celgd3g6 - Internal server error, for request [GET /] ->

play.api.db.evolutions.InvalidDatabaseRevision: Database 'default' needs evolution! [An SQL script need to be run on your database.]
    at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1$$anonfun$apply$1.apply$mcV$sp(Evolutions.scala:427) ~[play_2.9.1.jar:2.0.4]
    at play.api.db.evolutions.EvolutionsPlugin.withLock(Evolutions.scala:448) ~[play_2.9.1.jar:2.0.4]
    at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:414) ~[play_2.9.1.jar:2.0.4]
    at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:412) ~[play_2.9.1.jar:2.0.4]
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.3]
    at scala.collection.immutable.List.foreach(List.scala:45) ~[scala-library.jar:0.11.3]
    at play.api.db.evolutions.EvolutionsPlugin.onStart(Evolutions.scala:412) ~[play_2.9.1.jar:2.0.4]
    at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0.4]
    at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0.4]
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.3]
    at scala.collection.immutable.List.foreach(List.scala:45) ~[scala-library.jar:0.11.3]
    at play.api.Play$.start(Play.scala:60) ~[play_2.9.1.jar:2.0.4]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anonfun$1.apply(ApplicationProvider.scala:125) ~[play_2.9.1.jar:2.0.4]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anonfun$1.apply(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0.4]
    at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.3]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0.4]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.4]
    at scala.Either$RightProjection.flatMap(Either.scala:277) ~[scala-library.jar:0.11.3]
    at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.4]
    at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.4]
    at akka.dispatch.Future$$anon$3.liftedTree1$1(Future.scala:195) ~[akka-actor.jar:2.0.2]
    at akka.dispatch.Future$$anon$3.run(Future.scala:194) ~[akka-actor.jar:2.0.2]
    at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:94) ~[akka-actor.jar:2.0.2]
    at akka.jsr166y.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1381) ~[akka-actor.jar:2.0.2]
    at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259) ~[akka-actor.jar:2.0.2]
    at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975) ~[akka-actor.jar:2.0.2]
    at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479) ~[akka-actor.jar:2.0.2]
    at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) ~[akka-actor.jar:2.0.2] 
```

并且应用程序停留在`needs evolution page`数据库中，并且数据库中的表是空的，因此显然脚本失败了（我直接在 SQL 上尝试将它放入 oracle 10g 并且脚本正在运行）。任何人都可以帮助我解决问题吗？

**编辑1：这是我的配置文件**

```
application.name=computer-database
application.secret="E27D^[_<Lpt0vjad]de;3/i;tx3gpRmG4Byof/3nahO/dIo9gbsMWut1w3xg[>9W"

db.default.url="jdbc:oracle:thin:@10.0.2.15:1521:orcl"
db.default.driver=oracle.jdbc.driver.OracleDriver
db.default.user=play
db.default.password=play

ebean.default="models.*"

"assets.cache./public/stylesheets/bootstrap.min.css"="max-age=3600"

logger=ERROR

logger.play=INFO

logger.application=DEBUG 
```

**编辑 2：**我尝试过使用示例的 JPA 版本：我得到一个类似的错误：相同的屏幕（`Database 'default' needs evolution!`），当我点击时，`Apply this script now!`我在日志文件中得到完全相同的堆栈错误

**编辑 3：**当我清理数据库时，应用程序要求我制作第一个进化脚本（表的结构和同时的数据），所以我接受应用它：他在我的数据库上创建了表，但他没有'不要插入数据并打印我被阻止的第二个屏幕......在开始时，当应用程序尝试创建 play_evolution 表时出现错误。经过一番谷歌搜索后，我发现 play_evolution 的代码显然不能与 oracle 一起使用，因为字段类型错误......所以我手动创建了它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:57:27.107

看来您的配置可能是错误的，您的示例说：

```
db.default.pass=play 
```

什么时候应该：

```
db.default.password=play 
```

请参阅[配置](http://www.playframework.org/documentation/2.0.4/SettingsJDBC)文档。

另外，请尝试完全擦除数据库，以防万一。

**编辑评论：**

似乎您的数据库由于某种原因进入了一个不稳定的位置（进化方面），但日志没有帮助。您正在运行 Play 2.0.4（最新版本）吗？

鉴于这是一个示例项目，我将通过一种解决方法来解决这个问题：

*   `evolutionplugin=disabled`通过取消注释来禁用进化`application.conf`
*   在数据库上手动运行脚本

在这个阶段，数据库将拥有您需要的数据。如果某些连接/数据类型问题是错误的根源，您将在运行应用程序时在日志中看到它，否则一切都应该正常工作。

您还应该就这个问题在[Lighthouse](https://play.lighthouseapp.com/dashboard)上提出罚单，因为这似乎很严重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:44:17.377

问题解决了`evolutionplugin=disabled`所以`application.conf`它不是一个真正的解决方案。所以我在[这里创建了一张票](https://play.lighthouseapp.com/projects/82401-play-20/tickets/885-play-framework-and-oracle-10g-error-in-new-io-worker-1-when-applying-evolution-script-jpa-and-ebean-version)

请阅读它以找到解决方案！

# javascript - 使用 Jquery 访问 Android 的日期选择器

> ID：13549763
> 
> 赞同：1
> 
> 时间：2012-11-25T09:27:42.940
> 
> 标签：javascript, android, jquery, cordova, datepicker

我正在使用 phonegap[cordova 2.2.0] 为 IOS/Android 开发应用程序

我使用 jquery/Html5。

对于IOS，我只需选择输入类型为“日期”或“时间”，然后单击输入时会显示日期选择器/[时间选择器。

```
 <input type="time" name="basic" value=""  />
   <input type="date" name="reminder" value=""  /> 
```

但这不适用于 Andriod，那么有没有其他方法可以使用 Html5/Javascript/Jquery 显示日期选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:55:55.747

我认为，您有两种方法可以做到：
1\. [Android Datepicker Plugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)
2\. [Mobiscroll](http://mobiscroll.com/)

Mobiscroll 适用于 Android 和 iOS，但速度很慢。
Android 上的原生插件相当不错，但不够灵活。

# dom - 带有 HtmlAgilityPack 的注释节点

> ID：13549764
> 
> 赞同：1
> 
> 时间：2012-11-25T09:27:45.333
> 
> 标签：dom, html-agility-pack

我想从显示中隐藏具有特定图像的节点。如果我基本上设置 style="display:none" 绝大多数浏览器会继续在该节点中下载带有错误 src 的图像:(

所以我决定让这个节点在 html 中注释，并在我需要显示该图像时取消注释。

找不到使用 HtmlAgility 执行此操作的明显技巧。你能给我一个正确的方法来解决它吗？

# database - 如何在 MVVM 中使用视图模型？

> ID：13549765
> 
> 赞同：0
> 
> 时间：2012-11-25T09:27:49.340
> 
> 标签：database, windows-phone-7, mvvm, request, viewmodel

我正在开发 Windows Phone 7 应用程序，听说 MVVM 模式很有用。我在这个站点上阅读了很多文章和问题，但我得到的只是对视图模型作为视图和模型之间桥梁的解释。如果模型是客户类，那么视图模型被认为是客户的集合，用于数据绑定。这是一个非常简单的用法！

如果我想从网络加载客户，将其显示在视图上，然后将其存储到本地数据库，我应该将所有逻辑代码放在视图模型中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:57:04.840

不，您不应该阅读有关[关注点分离的信息](http://en.wikipedia.org/wiki/Separation_of_concerns)。您只希望每个类更改一个原因，视图模型应该只负责翻译模型信息以显示在视图上。

一个单独的服务实现应该负责从您的数据存储中获取模型实例。

例如：

```
public class MyViewModel
{
    private readonly ICustomerRetrieval _retrievalService;

    public MyViewModel(ICustomerRetrieval retrievalService)
    {
        _retrievalService = retrievalService;
    }

    public IEnumerable<CustomerViewModel> Customers
    {
        get { return _retrievalService.GetAllCustomers().Select(AsViewModel);
    }

    private CustomerViewModel AsViewModel(CustomerModel cust)
    {
        return new CustomerViewModel(cust);
    }
} 
```

您可以看到服务负责定位客户模型，而视图模型仅负责将这些转换为 UI 中可用的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:54:03.963

> 如果我想从网络加载客户，将其显示在视图上，然后将其存储到本地数据库，我应该将所有逻辑代码放在视图模型中吗？

如果“从网络加载客户”的逻辑特定于视图并且仅针对该视图，那么将其放入该 ViewModel 是有意义的。

如果客户的加载需要与其他视图共享，那么也许您应该将其放置在数据层中，该数据层在启动时或在后台加载。

ViewModel 应仅包含特定于该 View 的代码。如果应用程序在其他地方需要数据，它不应该包含任何“核心”功能，例如加载数据。

# php - 为每个循环或 SQL 复制结果嵌套

> ID：13549770
> 
> 赞同：1
> 
> 时间：2012-11-25T09:28:54.350
> 
> 标签：php, mysql, foreach, laravel

大家好，我在回显我的数据时遇到了问题。我有三张桌子，一张用于学生、班级和学生班级。我已经查询了数据库以将这三个人联合起来，这样我就可以看到所有学生，无论他们是否已经参加了班级。sql是

```
SELECT students.id, students.student_name, students.student_number,
section_student.ss_id, section_student.section_number,sections.subject 
FROM students 
LEFT JOIN student_classes
ON students.student_number=student_classes.student_number 
LEFT JOIN classes 
ON classes.class_number=student_classes.class_number 
WHERE students.status=1 
```

如果他们有课程，这会生成一个学生列表。对于那些注册了不止一门课程的学生，列表中会显示两次名称。

当我 print_r 我得到的数据

```
Array
(
[0] => stdClass Object
    (
        [class_number] => 
        [student_name] => john smith
        [student_number] => 432100351
        [id] => 2
        [ss_id] => 
        [subject] => 
        [user_email] => john@email.com
        [created_at] => 0000-00-00 00:00:00
        [updated_at] => 0000-00-00 00:00:00
    )

[1] => stdClass Object
    (
        [class_number] => 43223
        [student_name] => Paul jones
        [student_number] => 432100312
        [id] => 3
        [ss_id] => 40
        [subject] => Maths
        [user_email] => Paul@email.com
        [created_at] => 0000-00-00 00:00:00
        [updated_at] => 2012-11-24 08:33:23
    )

[2] => stdClass Object
    (
        [class_number] => 21331
        [student_name] => Paul jones
        [student_number] => 432100312
        [id] => 3
        [ss_id] => 39
        [subject] => Physics
        [user_email] => Paul@email.com
        [created_at] => 0000-00-00 00:00:00
        [updated_at] => 2012-11-24 08:33:23
    ) 
```

当我在表格中为每个人做一个以显示学生和他们的班级时，我想循环浏览学生在一行中的班级。例如

ID:432100351 | 不适用 Paul ID:432100312 | 43223 = 数学，21331 = 物理

当我做我的循环时，我得到

ID:432100351 约翰 | john@email.com | 不适用
ID:432100312 保罗 | 保罗@email.com | 43223 = 数学，21331 = 物理
ID:432100312 Paul | 保罗@email.com | 43223 = 数学，21331 = 物理

我不确定问题出在我的 sql 还是我的循环上

这是代码

```
@foreach ($students as $student)
<tr>
<td> {{ $key++ }}</td>
<td> {{ HTML::link('students/edit/' .$student->id, $student->student_number) }} </td>
<td> {{ HTML::link('students/edit/' .$student->id, $student->student_name) }} </td>
<td> {{ $student->user_email }} </td>
<td>

    @if(!isset($student->ss_id)) 

        {{ HTML::link('add_student_section.php?student_id='.$student->id,'Add to section'); }}

    @else 

        @foreach($students as $section) 

         {{ HTML::link('edit_student_section.php?ss_id=', $section->section_number . " " . $section->subject . " ") ;}}     

        @endforeach

    @endif    

</td>
<td> {{ date("d-M-Y H:i",strtotime($student->created_at )) }} </td>
<td> 
@if($student->updated_at == $student->created_at)

N/A

@else

{{ date("d-M-Y H:i",strtotime($student->updated_at )) }} 
@endif

</td>
<td> {{ HTML::link('students/delete/' .$student->id, 'Delete Student') }} </td>
</tr>
@endforeach 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:34:20.463

在您的查询中使用`distinct`或`group by`，如下例所示

```
SELECT students.id, students.student_name, students.student_number,
section_student.ss_id, section_student.section_number,sections.subject 
FROM students 
LEFT JOIN student_classes
ON students.student_number=student_classes.student_number 
LEFT JOIN classes 
ON classes.class_number=student_classes.class_number 
WHERE students.status=1 group by students.student_number,sections.subject 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:48:06.703

您需要将 GROUP BY 与[GROUP_CONCAT结合使用](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT students.id, students.student_name, students.student_number,GROUP_CONCAT(classes.class_number) as student_classes
FROM students 
LEFT JOIN student_classes
ON students.student_number=student_classes.student_number 
LEFT JOIN classes 
ON classes.class_number=student_classes.class_number 
WHERE students.status=1 GROUP BY students.id 
```

# eclipse - Android-NDK 项目 Eclipse 构建错误

> ID：13549772
> 
> 赞同：1
> 
> 时间：2012-11-25T09:29:08.927
> 
> 标签：eclipse, android-ndk

我有一个带有本机代码的 Android 项目。当我从我的 repo 结帐并构建干净的版本时，它可以构建并在设备上启动，但是在我运行`project->clean`eclipse 命令后，我得到了一个错误：

```
...
Install        : libgnustl_shared.so => libs/armeabi/libgnustl_shared.so

D:/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-strip: unable to rename './libs/armeabi/libgnustl_shared.so'; reason: File exists
make: *** [libs/armeabi/libgnustl_shared.so] Error 1
make: *** Deleting file `libs/armeabi/libgnustl_shared.so'

**** Build Finished **** 
```

这个错误可以在 Cygwin 控制台中以相同的输出重现（是的，我在 MS Windows Vista 下工作）。

我在初始化项目时遇到了同样的错误。通过在管理员下运行的cygwin控制台将`libgnustl_shared.so`文件放入`obj/local/armeabi/libgnustl_shared.so`并设置所有项目文件的777权限来解决它。但现在这无济于事。

你可以在 github 上找到我的项目 [https://github.com/aboritskiy/pacman](https://github.com/aboritskiy/pacman)
我还没有设置任何项目许可证，我希望这个教育项目没有违反任何其他项目许可证。

支持 JNI 的功能位于`jni-powered`分支中。

**编辑：** 似乎我`libgnustl_shared.so`以错误的方式包括在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:14:09.950

您已经`https://github.com/aboritskiy/pacman/blob/jni-powered/libs/armeabi/libgnustl_shared.so`在您的存储库中，但 NDK 认为它应该在构建期间创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T07:35:26.940

当我安装了 Tortoise Git 并且 TGitCache.exe 在后台运行时，我观察到了这个问题，而且我正在构建的代码是存储库代码。

尝试在任务管理器中杀死 TGitCache.exe 并重新构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:05:45.493

**总结：**

我想将其添加`libgnustl_shared.so`到项目中。我正在使用带有 Android 开发者工具插件和 Android 原生开发者工具插件的 Eclipse。但是我有编译错误，这个错误可以通过 eclipse 和 Cygwin 控制台重现。

问题在于配置错误`Android.mk`：要包括`libgnustl_shared.so`我必须添加

1.  `LOCAL_C_INCLUDES := sources/cxx-stl/gnu-libstdc++/include/` 到`Android.mk`,

2.  `APP_STL := gnustl_shared` 到`Application.mk`文件。

但最初我只有第二种选择。

非常感谢**Alex Cohn**在此调试期间提供的有用建议。

# c# - 如何以编程方式绑定到静态属性？

> ID：13549774
> 
> 赞同：5
> 
> 时间：2012-11-25T09:29:39.700
> 
> 标签：c#, .net, wpf, xaml, data-binding

如何以编程方式绑定到静态属性？我可以在 C# 中使用什么来制作

```
{Binding Source={x:Static local:MyClass.StaticProperty}} 
```

**更新：**是否可以进行 OneWayToSource 绑定？我知道 TwoWay 是不可能的，因为静态对象上没有更新事件（至少在 .NET 4 中）。我无法实例化对象，因为它是静态的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T09:47:26.477

***单向绑定***

让我们假设您有`Country`具有静态属性的类`Name`。

```
public class Country
{
  public static string Name { get; set; }
} 
```

现在您希望将属性绑定`Name`到`TextProperty`of `TextBlock`。

```
Binding binding = new Binding();
binding.Source = Country.Name;
this.tbCountry.SetBinding(TextBlock.TextProperty, binding); 
```

***更新：双向绑定***

`Country`类看起来像这样：

```
public static class Country
    {
        private static string _name;

        public static string Name
        {
            get { return _name; }
            set
            {
                _name = value;
                Console.WriteLine(value); /* test */
            }
        }
    } 
```

现在我们想将此属性绑定`Name`到`TextBox`，所以：

```
Binding binding = new Binding();
binding.Source = typeof(Country);
binding.Path = new PropertyPath(typeof(Country).GetProperty("Name"));
binding.Mode = BindingMode.TwoWay;
binding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
this.tbCountry.SetBinding(TextBox.TextProperty, binding); 
```

如果要更新目标，则必须使用`BindingExpression`和功能`UpdateTarget`：

```
Country.Name = "Poland";

BindingExpression be = BindingOperations.GetBindingExpression(this.tbCountry, TextBox.TextProperty);
be.UpdateTarget(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:59:40.937

您总是可以编写一个非静态类来提供对静态类的访问。

静态类：

```
namespace SO.Weston.WpfStaticPropertyBinding
{
    public static class TheStaticClass
    {
        public static string TheStaticProperty { get; set; }
    }
} 
```

提供对静态属性的访问的非静态类。

```
namespace SO.Weston.WpfStaticPropertyBinding
{
    public sealed class StaticAccessClass
    {
        public string TheStaticProperty
        {
            get { return TheStaticClass.TheStaticProperty; }
        }
    }
} 
```

绑定很简单：

```
<Window x:Class="SO.Weston.WpfStaticPropertyBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SO.Weston.WpfStaticPropertyBinding"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:StaticAccessClass x:Key="StaticAccessClassRes"/>
    </Window.Resources>
    <Grid>
        <TextBlock Text="{Binding Path=TheStaticProperty, Source={StaticResource ResourceKey=StaticAccessClassRes}}" />
    </Grid>
</Window> 
```

# java - 在 java 中将 Base64 字节 [] 转换为可读字符串

> ID：13549783
> 
> 赞同：4
> 
> 时间：2012-11-25T09:31:37.140
> 
> 标签：java, base64

我想将 Base62 字节数组转换为人类可读的搅拌

在这段代码中，

我需要将“[B@913fe2”（结果）转换为“Hello Wold！”。

我查看了几个以前的问题，但我不知道如何。

```
package chapter9;

import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.cert.*;
import java.util.Arrays;

import org.apache.commons.codec.binary.Base64;
import org.bouncycastle.cms.CMSProcessable;
import org.bouncycastle.cms.CMSProcessableByteArray;
import org.bouncycastle.cms.CMSSignedData;
import org.bouncycastle.cms.CMSSignedDataGenerator;

/**
 * Example of generating a detached signature.
 */
public class SignedDataExample
    extends SignedDataProcessor
{

    public static void main(String[] args)
        throws Exception
    {
        KeyStore        credentials = Utils.createCredentials();
        PrivateKey      key = (PrivateKey)credentials.getKey(Utils.END_ENTITY_ALIAS, Utils.KEY_PASSWD);
    Certificate[]   chain = credentials.getCertificateChain(Utils.END_ENTITY_ALIAS);
    CertStore       certsAndCRLs = CertStore.getInstance("Collection",
                        new CollectionCertStoreParameters(Arrays.asList(chain)), "BC");
    X509Certificate cert = (X509Certificate)chain[0];

    // set up the generator
    CMSSignedDataGenerator gen = new CMSSignedDataGenerator();

    gen.addSigner(key, cert, CMSSignedDataGenerator.DIGEST_SHA256);
    gen.addCertificatesAndCRLs(certsAndCRLs);

    // create the signed-data object

    CMSProcessable  data = new CMSProcessableByteArray("Hello World!".getBytes());
    //CMSProcessable  data = new CMSProcessableByteArray(data1.getBytes());

    CMSSignedData signed = gen.generate(data, "BC");

    // recreate
    signed = new CMSSignedData(data, signed.getEncoded());

    //signed.signedContent
    //signed.g
    CMSProcessable S = signed.getSignedContent();
    byte[] K = Base64.decodeBase64((S.getContent()).toString());
    //String K = Base64.decodeBase64(S.getContent());
    //BASE64Decoder.decoder.decodeBuffer()

    // verification step
    X509Certificate rootCert = (X509Certificate)credentials.getCertificate(Utils.ROOT_ALIAS);

    if (isValid(signed, rootCert))
    {
        System.out.println("verification succeeded");
        System.out.println(K);
    }
    else
    {
        System.out.println("verification failed");
    }
} 
```

}

## 再次，结果显示

验证成功

## [B@913fe2

我需要将“[B@913fe2”（结果）转换为“Hello Wold！”。

问候。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T09:36:19.380

调用`toString()`字节数组只会打印数组的类型 ( `[B`)，然后是其 hashCode。你想用`new String(byteArray)`.

您还应该考虑使用显式字符集而不是默认字符集：

```
byte[] array = string.getBytes("UTF8");
String s = new String(array, "UTF8"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T09:34:14.293

你应该使用

```
byte[] k = Base64.decodeBase64((S.getContent()).toString());
String asString = new String(k); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-20T17:33:33.177

您必须使用此代码

```
CMSSignedData signeddata = new CMSSignedData(signedBytes);
CMSProcessable cmsdata = signeddata.getSignedContent();
System.out.println(new String((byte[]) s.getContent())); 
```

它对我有用。我正在使用 BouncyCastle 并尝试从 PKCS7 签名数据中获取原始数据。

# mysql - ORDER BY 特定值，然后旋转其余部分

> ID：13549785
> 
> 赞同：1
> 
> 时间：2012-11-25T09:31:41.170
> 
> 标签：mysql, sql, sql-order-by

我有这个查询：

```
SELECT * FROM Users; 
```

我回来的地方

```
 id    name  ...
 1     ...
 2     ...
 3     ...
 4     ... 
```

现在，我想要的是根据 id 对我返回的结果进行排序，并以此为基础轮换顺序。例如，假设我想根据 ID=3 进行排序。我想要回来的是：

```
 id    name  ...
 3     ...
 4     ...
 1     ...
 2     ... 
```

这可以直接在 MySQL 中进行，还是我必须在服务器端进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:47:37.610

我觉得很简单：

```
SELECT * FROM Users ORDER BY id<3,id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:41:42.983

您可以通过使用来实现这一点

```
ORDER BY CASE 
    WHEN id < 3 THEN id + (SELECT MAX(id) FROM users) 
    ELSE id 
END 
```

但请注意，mysql 将无法使用索引进行该排序。我认为在 SQL Server 之外进行这种轮换是最实用的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T09:43:50.290

您可以对两列进行排序，第一列仅在以下情况下填充`id >= 3`：

```
order by
    case 
    when id >= 3 then -id
    end desc
,   id 
```

第一列是排序的，`-id`所以我们可以降序排序，`null`最后是哪里。

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/a616bc/2/0)

# visual-studio - Visual Studio 2010 中的编译错误

> ID：13549786
> 
> 赞同：1
> 
> 时间：2012-11-25T09:31:57.643
> 
> 标签：visual-studio, llvm, clang

`clang/llvm`不编译在`Visual Studio 2010`.
我已经完成了此处描述的所有内容[入门：构建和运行 Clang](http://clang.llvm.org/get_started.html)（使用 Visual Studio 部分）。
我得到了嵌套错误：

> *错误 922 错误 C1083：无法打开包含文件：'llvm/Intrinsics.gen'*

等等。
他们说是因为`TableGe`没有编译。
所以我试图单独编译它。而此时我得到

```
linking error: *error LNK2019: unresolved external symbol "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl llvm::sys::StrError(int)"* 
```

等等。结果：`*fatal error LNK1120: 1 unresolved externals*.`
这些文件

> ....\lib\Debug\LLVMTableGen.lib
> ....\lib\Debug\LLVMSupport.lib

被提出。
如果有人遇到类似的问题，那么您是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T23:11:19.117

你是从主干编译的吗？LLVM/Clang 主干总是在不断变化，有时您可能会发现它的功能不完全，尤其是在 Windows 上，这对大多数 LLVM 开发人员来说不是一阶问题。

如果您不太关心最新的 LLVM，我建议您下载并构建应该适用于所有平台的 3.1 版本。如果您想要更新的版本但不想要最先进的主干，请尝试查看 3.2 版本分支。它尚未正式发布，但目前处于稳定阶段，因此如果您按照说明操作，它很有可能在 Windows 上成功构建。

# java - 我可以在压缩 oops 中使用超过 32 GB 的堆吗

> ID：13549787
> 
> 赞同：13
> 
> 时间：2012-11-25T09:32:06.607
> 
> 标签：java, oop, optimization, compression

我可以理解，使用压缩的 oops，我们只能使用 32 GB 的 RAM。有没有办法通过分配2堆或其他东西来使用更多？

谢谢 Vineeth

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-25T09:54:57.223

您不能拥有多个堆（尽管您可以拥有多个 JVM，这称为向外扩展而不是向上扩展）。

JVM 自动使用低于 32 GiB 内存的压缩对象指针。如果您了解它的工作原理（从每个地址中删除最年轻的三位，因为由于内存对齐，它们始终为 0），您就会明白您无法走得更远。

有一个有趣的事实：一旦超过这个 32 GiB 边界，JVM 就会停止使用压缩对象指针，从而有效地减少可用内存。这意味着您必须将 JVM 堆增加到 32 GiB 以上。根据[*关于 JVM 性能调优的精彩内容 @twitter*](http://www.infoq.com/presentations/JVM-Performance-Tuning-twitter)（大约 13:00）演示文稿**将堆从 32 GiB 增加到低于 48 GiB 实际上会减少可用内存量**（！），因为压缩对象指针不再存在。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-25T11:04:25.473

如果您需要超过 32 GB，我建议您考虑使用一些堆外内存。这有效地为您提供了一个不会占用太多堆的额外内存空间。

例如，我通常使用 200-800 GB，但其中只有 1-2 GB 是堆。这意味着我拥有最有效的压缩 Oops 形式和几乎无限的容量。注意：压缩的Oops有三种形式，

*   普通 32 位非移位（最高约 2 GB）
*   32 位移位（最高约 26 GB）
*   32 位移位和偏移（最高约 32 GB）

使用堆外内存的两种方式是直接内存字节缓冲区和内存映射文件。直接内存可以扩展到大约主内存大小的 3/4。内存映射文件可以很好地扩展到您的硬盘空间大小（通常更多）

> 在这里，我应用了许多优化，最终 80% 的空间被引用而不是实际数据占用。

听起来您没有使用最有效的数据结构。您可以使用不同的数据结构，其中数据使用的空间更多或至少 2/3。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-14T10:06:17.760

您可以使用带有附加参数的更大堆大小： `-XX:ObjectAlignmentInBytes=alignment`

这个参数是Java对象的固定调整。默认值为`8`（字节）。指示值必须是 2 的幂，范围从`8`到`256`。

以字节为单位的堆大小限制计算如下：

```
4GB * ObjectAlignmentInBytes 
```

64GB 堆大小可用于压缩指针，如下行：

```
-XX:ObjectAlignmentInBytes=16 
```

但是，对于较大的堆大小，需要考虑文档中的注释：

> 注意：随着对齐值的增加，对象之间未使用的空间也会增加。因此，您可能没有意识到使用具有较大 Java 堆大小的压缩指针的任何好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T09:48:38.630

如果我站在你的立场上，我会调查以下各项：

1.  不使用压缩的oops。
2.  减少应用程序的内存消耗（内存分析器是调查内存使用的非常方便的工具）。
3.  跨多个 JVM 拆分工作负载，每个 JVM 有一个低于 32GB 的堆。

以上每一项都有可能解决您的问题。哪个最合适我们真的很难说。

> 80% 的空间被引用而不是实际数据占用。

这听起来相当极端。可能值得重新审视您的数据结构，重点是减少对象引用的数量。我过去做过这些事情，但是在不了解您的问题和您当前使用的数据结构的情况下很难给出具体的建议。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T10:10:18.910

数据的本质是什么？

执行此操作的方法可能是将数据存储在 Java 堆之外。您可以通过获取一些堆外内存来做到这一点，通常使用[直接`ByteBuffer`](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html#direct)，然后以字节的形式将数据存储在其中。这有很多优点；对象可以非常紧凑地存储，不需要很大的堆，并且对象不会被垃圾收集器清扫。缺点是复杂性和内存泄漏的风险。

有一些库可以帮助您做到这一点，包括：

*   [http://code.google.com/p/vanilla-java/wiki/HugeCollections](http://code.google.com/p/vanilla-java/wiki/HugeCollections)
*   [http://directmemory.apache.org/](http://directmemory.apache.org/)

# javascript - 本机javascript中的动画

> ID：13549789
> 
> 赞同：2
> 
> 时间：2012-11-25T09:32:17.137
> 
> 标签：javascript

如何在不使用 jQuery 库的 animate 方法的情况下在本机 javascript 中运行动画（如更改 CSS 属性）？我已经尝试过 jQuery 库 animate 和帧率间隔更改以使我的动画流畅。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T09:36:44.407

CSS3 可以自动对大多数样式属性的更改进行动画处理，使用`transition`. 它可能会比任何基于 javascript 的动画运行得更流畅。

有一个关于如何使用它的很好的教程，[在这里](http://css3.bradshawenterprises.com/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T09:52:44.107

这是一个例子：

[http://jsfiddle.net/4M3ts/1/](http://jsfiddle.net/4M3ts/1/)

```
function animate(object, property, start_value, end_value, time) {
  var frame_rate = 0.06; // 60 FPS
  var frame = 0;
  var delta = (end_value - start_value) / time / frame_rate;
  var handle = setInterval(function() {
    frame++;
    var value = start_value + delta * frame;
    object.style[property] = value + "px";
    if (value == end_value) {
      clearInterval(handle);
    }
  }, 1 / frame_rate);
}

animate(document.getElementById("a"), "top", 0, 100, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:40:10.860

这是一个简短的演示：

```
function fade(element, started) {
    if (element.style.opacity > 0){
        console.log(element.style.opacity);
        element.style.opacity -= 0.02;
        setTimeout((function(e){return function(){fade(e);}})(element),10);
    }
}
fade(document.getElementById("myname")); 
```

这是一个jsfiddle：http: [//jsfiddle.net/s6Kzh/1/](http://jsfiddle.net/s6Kzh/1/)

# c# - 日期时间解析的严格或类似选项

> ID：13549796
> 
> 赞同：1
> 
> 时间：2012-11-25T09:33:44.100
> 
> 标签：c#, .net, datetime, .net-4.0, datetime-parsing

我有一个代码，在运行良好的 PC 中看起来像下面的代码：

```
DateTime.Parse("10/10/2012"); 
```

我把它复制到另一台机器上，它说有些东西指责日期转换是错误的。我必须做的是使用：

```
DateTime.TryParseExact("10/10/2012", "dd/MM/yyyy", null); 
```

有谁知道 c# 中是否有任何配置或控制这些东西的机器？（或者两台计算机之间的 .net 版本可能不同？但我很确定它们在两台机器上都是相同的，因为我在两台机器上都使用了 Ms Visual Studio 2008）。

我说的是 Windows 本身的全局配置，它对我的​​程序有一些严格的例外。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:05:06.717

（你正在混合`ParseExact`和`TryParseExact`。）

差异来自于`CultureInfo.CurrentCulture`世界不同地区以不同方式书写日期。

即使说出来`ParseExact("10/10/2012", "dd/MM/yyyy", null)`也可能有问题。您是否尝试过第一次设置

```
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("da-DK"); 
```

然后做上面的`ParseExact`？它会失败，因为它`DateSeparator`不在`"/"`这种文化中。要解决它，要么说

```
DateTime.ParseExact("10/10/2012", @"dd\/MM\/yyyy", null) 
```

或者说

```
DateTime.ParseExact("10/10/2012", "dd/MM/yyyy", CultureInfo.InvariantCulture) 
```

第一个通过“转义”斜杠`/`使其成为文字斜杠并且不翻译为当前的`DateSeparator`. 第二个通过给出我们知道`DateSeparator`确实是的不变文化来工作`"/"`。

**添加：**

如果您从未`CurrentCulture`在代码中设置，则其值取决于操作系统的**区域和语言设置。**我想你正在运行Windows？详细信息可能取决于确切的 Windows 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:36:10.283

解析日期时使用系统的当前文化。我敢打赌，这两台机器有不同的文化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:37:07.970

如果您的输入始终相同（例如 en-us 格式）并且您想从用户日期和时间格式偏好中抽象出来，那么`DateTime.TryParseExact`这是一个很好的、正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T09:38:23.357

你可以试试这个来设置文化不变的日期时间： -

```
 using System.Globalization;
//...
 DateTime _datetime = DateTime.Now;
string _formattedDateTime = _datetime.ToUniversalTime().ToString("s", 
DateTimeFormatInfo.InvariantInfo) + "Z"; 
```

# java - JSF h:selectManyCheckbox inside ui:repeat via Map entry

> ID：13549798
> 
> 赞同：0
> 
> 时间：2012-11-25T09:33:44.887
> 
> 标签：java, jsf, jsf-2, map

我遇到了问题，当我按下按钮时将值`String`放入`List<String>`内部`<ui:repeat>` 时，我看到它只`List<String>`包含 ui:repeat 的最后一个元素的记录。

```
<ui:repeat value="#{util:toList(test.mapQestionsWithAnswers)}" var="entry">
                <h:inputHidden value="#{entry.key.questionId}" />
                <h:outputText value="#{entry.key.question}"
                    rendered="#{not empty entry.value}" />
                <p:selectManyCheckbox value="#{test.questionAnswerList}"
                    layout="pageDirection">
                    <f:selectItems value="#{entry.value}" var="ans"
                        itemValue="#{entry.key.questionId} #{ans.answer.answerId}"
                        itemLabel="${ans.answer.answer}" />
                </p:selectManyCheckbox>
            </ui:repeat> 
```

`util:toList`来自 Baluscanswer 的想法如何[在 jsf 中显示 hashmap 值？](https://stackoverflow.com/questions/6001743/how-to-show-hashmap-values-in-jsf)

**//更新** 我重写这段代码而不使用地图

```
<ui:repeat value="${test.questionList}" var="question">
                <h:outputText value="#{question.question}"
                    rendered="#{not empty question}" />
                <p:selectManyCheckbox value="#{test.questionAnswerList}"
                    layout="pageDirection">
                    <f:selectItems value="#{question.questionAnswers}" var="ans"
                        itemValue="#{ans.questionAnswerIdentifer.questionId} #{ans.questionAnswerIdentifer.answerId}"
                        itemLabel="#{ans.answer.answer}" />
                </p:selectManyCheckbox>
            </ui:repeat> 
```

但这对我没有帮助，我只能`List<String>`在`<ui:repeat/>`. 似乎在每次迭代之后 questionAnswerList 都变空了

//好吧，我读了一些文章[Primefaces ManyCheckbox inside ui:repeat calls setter method only for last loop](https://stackoverflow.com/questions/13147440/primefaces-manycheckbox-inside-uirepeat-calls-setter-method-only-for-last-loop)

我决定使用地图 Map>

但是在这部分错误`ClassCastException`字符串不能转换为列表

```
public List<String> getQuestionAnswerList() {
    // return questionAnswerList;
    List<String> selectedQuestionAnswer = new ArrayList<String>();
    if (!selectedItems.isEmpty()) {
        Set<Long> idsSet = selectedItems.keySet();
        for(Long questionId : idsSet){              
            List<String> questionAnswerPair = selectedItems.get(questionId);
            selectedQuestionAnswer.addAll(questionAnswerPair);
        }
    }
    return selectedQuestionAnswer;
}
<p:selectManyCheckbox value="#{test.selectedItems[question.questionId]}"
                    layout="pageDirection">
                    <f:selectItems value="#{question.questionAnswers}" var="ans"
                        itemValue="#{ans.questionAnswerIdentifer.questionId} #{ans.questionAnswerIdentifer.answerId}"
                        itemLabel="#{ans.answer.answer}" />
                </p:selectManyCheckbox> 
```

我怎样才能得到所有选择的值`List<String>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:41:17.560

您可以制作一个地图（`myMap`例如调用它），其中键`entry.key`和值将是相同类型的列表，例如`questionAnswerList`

就像是

```
<p:selectManyCheckbox value="#{test.myMap[entry.key].questionAnswerList}"
    layout="pageDirection">
    <f:selectItems value="#{entry.value}" var="ans"
        itemValue="#{entry.key.questionId} #{ans.answer.answerId}"
        itemLabel="${ans.answer.answer}" />
</p:selectManyCheckbox> 
```

# iphone - MP3 语音 - iPhone、iOS

> ID：13549801
> 
> 赞同：0
> 
> 时间：2012-11-25T09:34:11.650
> 
> 标签：iphone, mp3, record, voice

如何实现通过 MP3 文件录制用户语音的功能？你知道网上有什么教程吗？

我没有任何代码，我会在这里大发雷霆，但我被困住了，我需要帮助。我搜索了2个小时，一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:58:16.587

根据我的研究，**没有**直接的方法来录制 MP3（也许您可以考虑录制为一种格式并将其转换为 MP3，但这似乎也不简单）文件。参考这些问题：

[iPhone 应用程序：以 mp3 录制音频](https://stackoverflow.com/a/10553363/1548523)

[录制mp3而不是caf文件](https://stackoverflow.com/a/9399313/1548523)

[iOS：以caf以外的其他格式录制音频](https://stackoverflow.com/a/11118966/1548523)

# php - 关于 PHP/MySQL 事务和 SELECT FOR UPDATE 的说明

> ID：13549807
> 
> 赞同：0
> 
> 时间：2012-11-25T09:34:36.950
> 
> 标签：php, mysql, transactions, pdo, locking

这是我的设置： MySQL 数据库中的表格，包含 30 分钟的时间段（整个小时和半小时） 一个网站，显示一段时间内每个时间段有多少房间可供预订的表格。最低预订时间为一小时，因此每次预订至少保留两个位置，当预订时，它们之前的位置将变得不可用（不能预订房间 30 分钟）

我的问题是这样的：我在 php 脚本中使用 PDO 事务，通过更改它们的状态（两列枚举类型）来为预订预留多个插槽。因此，如果假设两个或多个客户尝试在同一时间段或之前的一个时间段预订房间，如果我使用 SELECT FOR UPDATE 会发生什么？第一个是否继续该过程而其他人被拒绝（通过错误或空集）或其他人是否在第一个完成后等待并在他预订的情况下提交数据库中的更改或在该情况下回滚他改变了主意，然后第二快的客户尝试选择行并更新它们，这取决于第一个客户的操作？

基本上我想知道我是否必须实现某种重试系统。

另外，我很好奇这个临时锁什么时候被移除；仅在事务的情况下提交事务（mysql，自动提交关闭）或影响select语句中的部分/所有行的下一次更新？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-25T09:53:43.380

基本上，在 PDO 中，事务（以`beginTransaction`方法开始）只是通过将 autocomit 设置为 false 来“模拟”。因此，即使使用 select to update 并发访问的风险很小，它也存在。

`$db->query('START TRANSACTION')`然后你可以用 SQL 语句开始你的事务`db->query('COMMIT');`，当然，在失败的`db->query('ROLLBACK');` 情况下，通常，它可以让你避免你的问题。如果你想确定，你可以在交易中使用`$db->query('LOCK TABLE ...');`

当您使用 Transaction 时，所有内容都会同时发送，这样您的表中就不会出现垃圾。由于每个事务（默认情况下一个查询是一个事务）都是一个接一个地执行，理论上，这可以保护您免受并发访问。但问题是您使用 SELECT 进行更新，我认为当事务不能保护您并且您会默默地删除另一个好的数据时，可能会出现边缘情况。

锁定表对此很有用，因为不允许出现边缘情况。问题是如果你保持锁的时间太长，就会发送错误。

# visual-studio-2010 - 如何隐藏遍布 Visual Studio 编辑器的 Typemock Auto-Runner 的盾牌？

> ID：13549815
> 
> 赞同：5
> 
> 时间：2012-11-25T09:35:54.203
> 
> 标签：visual-studio-2010, unit-testing, visual-studio-2008, visual-studio-2012, typemock

有没有办法隐藏 Typemock Isolator 在安装后添加到 Visual Studio 编辑器窗口的巨大符号 - 顶部的橙色盾牌和每个方法附近的橙色/绿色盾牌？我不需要它们，因为我正在使用其他测试运行器，但我还没有找到隐藏它们的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T09:35:54.203

要禁用运行器，请转到工具 -> 扩展管理器 -> typemock 自动运行器 -> 禁用。

**更新（VS 2012）：**工具 -> 扩展和更新 -> Typemock Smart Runner -> 禁用。

感谢来自 Typemock Support 的 Alex 的回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T09:31:42.877

在 Visual Studio 2012 中：

工具 -> 扩展和更新 -> 工具（左侧有已安装组下的窗格）

找 Typemock Smart Runner 并选择并单击禁用

# haskell - Haskell - 在无限流中否定偶数

> ID：13549819
> 
> 赞同：1
> 
> 时间：2012-11-25T09:36:17.487
> 
> 标签：haskell, infinite-sequence

我正在尝试生成一个无限数列表

```
0,1,-2,3,-4,5,-6... 
```

到目前为止我得到了

```
evenise x   | x == 0 = 0
            | even x = -x
            | otherwise = x

s = foldl (\x -> evenise x) 0 [1..] 
```

但是我收到了错误

```
Occurs check: cannot construct the infinite type: a0 = b0 -> a0
In the first argument of `evenise', namely `x'
In the expression: evenise x
In the first argument of `foldl', namely `(\ x -> evenise x)' 
```

我不明白错误，因为`evenise`接受了一个元素，并且匿名函数`(\x -> evenise x)`也接受了一个元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T09:40:45.143

你想用`map`不`foldl`

```
s = map evenise [0..] 
```

`map`遍历一个列表并将映射函数应用于每个元素。 `foldl`用于将列表“减少”为值 - 例如，添加列表中的所有元素可以像

```
foldl (+) 0 
```

此外，`foldl`仅适用于有限列表，而`foldr`（也用于减少）有时适用于无限列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T09:43:11.847

你得到一个错误，因为`foldl`它需要*两个*参数的函数，而不是一个。但`foldl`无论如何都无法处理无限列表，所以我不明白你想在那里做什么。

（您不需要第一行，`evenise`因为 -0 == 0。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T10:53:46.890

您还可以创建一个无限列表并将测试嵌入到列表定义中：

```
s = [ if odd x then x else negate x | x <- [0,1..] ] 
```

# mysql - MYSQL 从 2 个字段和不同的值选择语句

> ID：13549828
> 
> 赞同：0
> 
> 时间：2012-11-25T09:37:08.250
> 
> 标签：mysql

```
select DISTINCT leg.destination,leg.departure from trktripleg leg where leg.T# IN (select T# from trktrip trip WHERE L#='10001' OR L#='10002'); 
```

以上是我执行的sql语句...

查找驾照号码 (L#) 10001 和 10002 的两位司机至少访问过一次的所有城市（出发地或目的地）的名称。

表说明：

```
SQL> desc trktrip;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 T#                                        NOT NULL NUMBER(10)
 L#                                        NOT NULL NUMBER(8)
 REG#                                      NOT NULL VARCHAR2(10)
 TRKTRIP_DATE                              NOT NULL DATE

SQL> desc trktripleg;
 Name                                      Null?    Type
 ----------------------------------------- -------- ---------------------------

 T#                                        NOT NULL NUMBER(10)
 LEG#                                      NOT NULL NUMBER(2)
 DEPARTURE                                 NOT NULL VARCHAR2(30)
 DESTINATION                               NOT NULL VARCHAR2(30) 
```

一些样本数据：

在 trktripleg 上插入数据

```
INSERT INTO TRKTRIPLEG VALUES( 1, 1, 'Sydney', 'Melbourne');
INSERT INTO TRKTRIPLEG VALUES( 1, 2, 'Melbourne', 'Adelaide');
INSERT INTO TRKTRIPLEG VALUES( 1, 3, 'Adelaide', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 2, 1, 'Sydney', 'Melbourne');
INSERT INTO TRKTRIPLEG VALUES( 2, 2, 'Melbourne', 'Adelaide');
INSERT INTO TRKTRIPLEG VALUES( 2, 3, 'Adelaide', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 3, 1, 'Sydney', 'Melbourne');
INSERT INTO TRKTRIPLEG VALUES( 3, 2, 'Melbourne', 'Adelaide');
INSERT INTO TRKTRIPLEG VALUES( 3, 3, 'Adelaide', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 4, 1, 'Sydney', 'Melbourne');
INSERT INTO TRKTRIPLEG VALUES( 4, 2, 'Melbourne', 'Adelaide');
INSERT INTO TRKTRIPLEG VALUES( 4, 3, 'Adelaide', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 5, 1, 'Melbourne', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 5, 2, 'Sydney', 'Adelaide');
INSERT INTO TRKTRIPLEG VALUES( 5, 3, 'Adelaide', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 6, 1, 'Melbourne', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 6, 2, 'Sydney', 'Adelaide');
INSERT INTO TRKTRIPLEG VALUES( 6, 3, 'Adelaide', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 7, 1, 'Melbourne', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 7, 2, 'Sydney', 'Adelaide');
INSERT INTO TRKTRIPLEG VALUES( 7, 3, 'Adelaide', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES( 8, 1, 'Sydney', 'Newcastle');
INSERT INTO TRKTRIPLEG VALUES( 8, 2, 'Newcastle', 'Brisbane');
INSERT INTO TRKTRIPLEG VALUES( 8, 3, 'Brisbane', 'Rockhampton');
INSERT INTO TRKTRIPLEG VALUES( 9, 1, 'Sydney', 'Melbourne');
INSERT INTO TRKTRIPLEG VALUES(10, 1, 'Sydney', 'Wollongong');
INSERT INTO TRKTRIPLEG VALUES(11, 1, 'Melbourne', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES(12, 1, 'Melbourne', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES(12, 2, 'Sydney', 'Melbourne');
INSERT INTO TRKTRIPLEG VALUES(13, 1, 'Sydney', 'Melbourne');
INSERT INTO TRKTRIPLEG VALUES(13, 2, 'Melbourne', 'Sydney');
INSERT INTO TRKTRIPLEG VALUES(14, 1, 'Wollongong', 'Sydney'); 
```

在 trktrip 上插入数据

```
INSERT INTO TRKTRIP VALUES( 1, 10001, 'PKR768', ADD_MONTHS(TRUNC(SYSDATE),0)-135 );
INSERT INTO TRKTRIP VALUES( 2, 10002, 'SYF777', ADD_MONTHS(TRUNC(SYSDATE),0)-135 );
INSERT INTO TRKTRIP VALUES( 3, 10001, 'KKK007', ADD_MONTHS(TRUNC(SYSDATE),0)-133 );
INSERT INTO TRKTRIP VALUES( 4, 10003, 'PKR768', ADD_MONTHS(TRUNC(SYSDATE),0)-130 );
INSERT INTO TRKTRIP VALUES( 5, 20002, 'PKR768', ADD_MONTHS(TRUNC(SYSDATE),0)-130 );
INSERT INTO TRKTRIP VALUES( 6, 30005, 'SYF777', ADD_MONTHS(TRUNC(SYSDATE),0)-124 );
INSERT INTO TRKTRIP VALUES( 7, 20005, 'KKK007', ADD_MONTHS(TRUNC(SYSDATE),0)-123 );
INSERT INTO TRKTRIP VALUES( 8, 10001, 'PKR768', ADD_MONTHS(TRUNC(SYSDATE),0)-123 );
INSERT INTO TRKTRIP VALUES( 9, 10002, 'QRT834', ADD_MONTHS(TRUNC(SYSDATE),0)-123 );
INSERT INTO TRKTRIP VALUES(10, 30005, 'KKK007', ADD_MONTHS(TRUNC(SYSDATE),0)-122 );
INSERT INTO TRKTRIP VALUES(11, 10003, 'SST005', ADD_MONTHS(TRUNC(SYSDATE),0)-122 );
INSERT INTO TRKTRIP VALUES(12, 10002, 'PKR768', ADD_MONTHS(TRUNC(SYSDATE),0)-122 );
INSERT INTO TRKTRIP VALUES(13, 20002, 'QRT834', ADD_MONTHS(TRUNC(SYSDATE),0)-120 );
INSERT INTO TRKTRIP VALUES(14, 20002, 'PKR008', ADD_MONTHS(TRUNC(SYSDATE),0)-119 ); 
```

***我的插入代码不完整，我只是将其中的一部分复制到 14 条记录，但足以解决这个问题。***

我的sql代码的问题是

如果我执行以下操作

select DISTINCT leg.destination from trktripleg leg where leg.T# IN (select T# from trktrip trip WHERE L#='10001' OR L#='10002');

没有leg.depature，它会显示正确的答案，但是如果我添加leg.depature，它将为答案创建另一列。

方法

```
destination ----- depature 
```

但我想将这 2 个答案一起加入并成为 1，这将满足以下要求

**查找驾照号码 (L#) 10001 和 10002 的两位司机至少访问过一次的所有城市（出发地或目的地）的名称。**

我的输出：

SQL> select DISTINCT leg.destination,leg.departure from trktripleg leg where leg .T# IN (select T# from trktrip trip WHERE L#='10001' OR L#='10002');

```
DESTINATION                    DEPARTURE
------------------------------ ------------------------------
Sydney                         Adelaide
Sydney                         Melbourne
Perth                          Hobart
Adelaide                       Sydney
Perth                          Sydney
Perth                          Melbourne
Brisbane                       Newcastle
Newcastle                      Sydney
Adelaide                       Perth
Adelaide                       Melbourne
Brisbane                       Sydney

DESTINATION                    DEPARTURE
------------------------------ ------------------------------
Perth                          Adelaide
Wollongong                     Adelaide
Hobart                         Melbourne
Sydney                         Perth
Sydney                         Brisbane
Melbourne                      Perth
Rockhampton                    Brisbane
Melbourne                      Sydney
Sydney                         Wollongong

20 rows selected. 
```

如果我只是按目的地找到，那将是

```
SQL> select DISTINCT leg.destination from trktripleg leg where leg.T# IN (select
 T# from trktrip trip WHERE L#='10001' OR L#='10002');

DESTINATION
------------------------------
Sydney
Adelaide
Brisbane
Newcastle
Perth
Melbourne
Hobart
Rockhampton
Wollongong

9 rows selected. 
```

但问题是我需要将目的地结果与出发合并。当我同时选择两者时，它也不再明显。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:45:35.907

```
select DISTINCT leg.destination city from trktripleg leg where leg.T# IN (select T# from trktrip trip WHERE L#='10001' OR L#='10002')
UNION
select DISTINCT leg.departure city from trktripleg leg where leg.T# IN (select T# from trktrip trip WHERE L#='10001' OR L#='10002') 
```

# javascript - 使用 'headers' 属性使用 JavaScript / jQuery 遍历 HTML 表

> ID：13549831
> 
> 赞同：1
> 
> 时间：2012-11-25T09:37:28.630
> 
> 标签：javascript, jquery, html-table

可以说我有下表：

```
<table>
  <thead>
    <tr>
     <th id="th_00">&nbsp;</th>
     <th id="th_01">TH 01</th>
     <th id="th_02">TH 02</th>
     <th id="th_03">TH 03</th>
     <th id="th_04">TH 04</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="th_10">TH 10</th>
      <td headers="th_01 th_10">DATA 11</td>
      <td headers="th_02 th_10">DATA 12</td>
      <td headers="th_03 th_10">DATA 13</td>
      <td headers="th_04 th_10">DATA 14</td>
    </tr>
    <tr>
      <th id="th_20">TH 20</th>
      <td headers="th_01 th_20">DATA 21</td>
      <td headers="th_02 th_20">DATA 22</td>
      <td headers="th_03 th_20">DATA 23</td>
      <td headers="th_04 th_20">DATA 24</td>
    </tr>
  </tbody>
</table> 
```

`headers`有没有使用 JavaScript 或 jQuery 使用属性和`th`标签查找特定数据单元的本地方法`id`，还是我必须自己构建功能？

我目前正在使用`regular expressions`一个`jQuery('td', 'table tbody').each()`循环来检索我需要使用的特定单元格，尽管这并不理想，因为它单独循环遍历每个单元格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T09:39:03.993

```
var td = $('td[headers="th_01 th_10"]'); 
```

也许？

# google-analytics - 在一个页面中部署 Google Analytics 原始代码段和标签管理器 GA

> ID：13549846
> 
> 赞同：2
> 
> 时间：2012-11-25T09:39:38.013
> 
> 标签：google-analytics, google-tag-manager

我有一种情况，页面已经包含将数据发送到一个帐户（不是我的帐户）的 Google Analytics 代码段。

我插入了带有 Google Analytics 的 Google Tag Manager 代码段，并带有另一个帐户的第二个跟踪号。

但是通过谷歌标签管理器部署的第二个谷歌分析没有收到任何数据。

一切看起来都设置正确，问题的原因是什么？原始 Google Analytics 代码段与通过 Google Tag Manager 部署的代码段之间是否存在冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T06:25:11.073

首先检查GTM的容器是否已经发布。如果不是来自 GTM 的“Google Analytics”标签，则不会在页面上触发。

您可以预览容器并查看通过 Omnibug 进行的“Google Analytics”调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T09:10:42.840

您需要添加默认标签以将网页浏览数据发送到 Google Analytics，然后发布这些更改。验证它们在您的 GA 实时工具中是否有效。其他 GA 标签对您来说应该无关紧要。

![默认标签](../Images/93aacbf0f4df2d534f7c6a5fb1c5e4fb.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T06:33:13.687

根据跟踪代码管理器团队的说法，在转换到跟踪代码管理器时，您可以而且应该使用新的 analytics.js 和 GTM 代码，使用不同的属性 ID。

测试 GTM 设置正常工作后，您可以删除 analytics.js 代码。

有关详细信息，请参阅此视频 - [https://youtu.be/XBCNJo9qGH8](https://youtu.be/XBCNJo9qGH8)

可能是您使用的是旧的 GA 库吗？如果是这样，只需更新到 analytics.js 并重试。

# c# - LoadDataRow 与 Rows.Add

> ID：13549849
> 
> 赞同：0
> 
> 时间：2012-11-25T09:40:15.270
> 
> 标签：c#, datatable

我的`DataTable`C#/WPF 应用程序中有一个用于绑定结果信息并将其显示给用户。该应用程序每隔一段时间就向核心询问其结果，并相应地更新其自己的表。代码是：

```
int selfCount = Table.Rows.Count;
int totalCount = result.ResultsTable.Rows.Count;

for (int i = selfCount; i < totalCount; i++)
    Table.LoadDataRow(result.ResultsTable.Rows[i].ItemArray, true); 
```

我想知道这是否是好的做法，或者是

```
Table.Rows.Add(result.ResultsTable.Rows[i].ItemArray); 
```

一个更好的主意：

*   我不在乎是否一次又一次地添加同一行（结果由用户定义）。
*   Using`LoadDataRow`导致应用程序为新表的每一行迭代当前表，不是吗？

我能看到的唯一可能的问题是如果`Rows.Add`没有在底部添加新行。这会发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:43:00.670

实际上，

```
Table.ImportRow() 
```

将是理想的候选人AFAIK。

# java - 进程无法访问文件

> ID：13549854
> 
> 赞同：-4
> 
> 时间：2012-11-25T09:40:53.760
> 
> 标签：java, file

```
I am getting following exception

    file :: Result000691.dat
    java.io.FileNotFoundException: D:\bio-rad\Result000691.dat (The process cannot access the file because it is being used by another process)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(Unknown Source)
        at java.io.FileReader.<init>(Unknown Source)
        at com.sa.medisys.biorad.io.DirectoryFetcher.read(DirectoryFetcher.java:37)
        at com.sa.medisys.biorad.io.MessageAppender.main(MessageAppender.java:28)

**When am I getting exception:**

I have folder which is stored files that I have to read ,parse ,insert into Database then need to delete.

Exception occurs while program is running and I am trying to copy new files into directory.

**My program code::** 

    while (true) {        
                DirectoryFetcher fetch = new DirectoryFetcher();
                if (fetch.hasFile()) {              
                    for(File file:fetch.getFiles()){
                        if(file.isFile()){
                        logger.info("file :: "+ file.getName());

                        long  startTime = System.nanoTime();
                        //if(file.exists()){
                            boolean flag = fetch.read(file);
                            file.delete();
                        //}                  
    //                   if(flag){
    //                      
    //                   }  
                         long  stopTime = System.nanoTime();
                         System.out.println(stopTime - startTime);
                        }                   
                    }                       
                }
            }

     boolean read(File file){
            BufferedReader br = null;
            String line = null;
            boolean flag = false;
             StringBuffer appendMessage = null;
             String completeMessage = null;
            try {
                if(file.exists()){
                    br = new BufferedReader(new FileReader(file));
                     appendMessage = new StringBuffer(16384); 
                     while ((line = br.readLine()) != null) {                
                         appendMessage.append(line);
                         appendMessage.append('\n');                 
                    }            
                     if(appendMessage != null){
                         completeMessage = appendMessage.toString();
                     }  

                   //  logger.info("Message length " + completeMessage.length());
                    // logger.info("Message::" + completeMessage);

                    if (completeMessage != null) {
                        if (!completeMessage.equals("")) {              

                            flag = new BioRad().parse(completeMessage,file);
                                // logging ACK data into file

                        }
                    }
                }   
            } catch (FileNotFoundException e) {

                e.printStackTrace();
            }catch (Exception e) {

                e.printStackTrace();
            }

            finally{
                if(br != null){
                    try {
                        br.close();

                    } catch (IOException e) {

                        e.printStackTrace();
                    }
                }
            }

            return  flag ;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:42:49.557

我觉得这个问题很清楚：

> 该进程无法访问该文件，因为它正被另一个进程使用

您需要等到其他程序退出或撤销读锁。

一个简单的处理方法是休眠并稍后重试操作：

```
for(int i=0; i<MAX_TRIES; i++) {
    try {
        // your io code:
        boolean flag = fetch.read(file);
        file.delete();
        break;
    } catch(FileNotFoundException ex) {
        Thread.sleep(1000);
    }
} 
```

# c# - 从 LongListSelector 中删除动画项目

> ID：13549862
> 
> 赞同：2
> 
> 时间：2012-11-25T09:42:24.540
> 
> 标签：c#, xaml, animation, triggers, windows-phone

所以我有一个视图模型绑定到具有一些属性（名称、大小等）的自定义对象的集合，这些属性实现了 NotifyPropertyChanged，因此 LongListSelector 相应地更新。

现在我想向 LongListSelector 添加一些动画，当它被添加时它会淡入一个项目，当它被删除时它会淡出一个项目。当 Grid.Loaded 触发时，我已经设法让添加动画工作，所以我想我也可以在 Grid.Unload 上调用反向动画（淡出），但我没有成功。

我看过：Grid.Unload（由于某种原因从不触发），Grid.LayoutUpdated（触发太多次），Triggers PropertyChangedTrigger（我想如果我将它绑定到像“Remove”这样的属性，那么我可以为它制作动画当该属性设置为true，但坚持如何实现这一点。但是，这似乎是我现阶段最好的选择），Styles EventTrigger（但没有事件是我想要的。也许我可以创建一个新事件对于 LongListSelector，但这将需要更多时间来创建从它继承的控件）。

所以我想知道我还有哪些其他选择？或者，如果有人遇到过类似情况，可以分享一些知识！

编辑 - 这是一个 Windows Phone 应用程序，所以有些课程对我不可用。
编辑 2 - 只是为了澄清，我可以为网格制作故事板并降低不透明度，但我的代码的方式是处理删除无法定位网格以开始该故事板的项目。我之前也被困在这个问题上，但决定改变我的实现以解决另一个问题。就目前而言，我的 LongListSelector 的 ItemTemplate 绑定到一个 PhoneApplicationResource（相当于一个资源）DataTemplate，我没有运气在这个模板中找到网格。
编辑 3 - 刚刚尝试过 DataTriggers，似乎进展顺利：

```
 <Custom:Interaction.Triggers>
                <ic:DataTrigger Binding="{Binding IsDeleted}" Value="true">
                    <eim:ControlStoryboardAction Storyboard="{StaticResource fade}"/>
                </ic:DataTrigger>
            </Custom:Interaction.Triggers> 
```

IsDeleted 正在工作，因为我在另一个绑定中对其进行了测试以查看其值，但是当我运行上述代码时，我得到了 debug.break() 错误。它仅在我运行上述代码时出现。这是我的故事板供参考：

```
 <Storyboard x:Name="fade">
                    <DoubleAnimation Storyboard.TargetName="grid" Storyboard.TargetProperty="Height" From="95" To="0" Duration="0:0:1" SpeedRatio="1" />
                    <DoubleAnimation Storyboard.TargetName="grid" Storyboard.TargetProperty="Opacity" From="1.0" To="0" Duration="0:0:1" SpeedRatio="1" />
                </Storyboard> 
```

注意：两者都位于 PhoneApplicationPage.Resources 网格中的 DataTemplate 中，只有情节提要位于 Grid.Resources 中，如下所示：

```
<PhoneApplicationPage.Resources>
     <DataTemplate>
          <Grid>
               //DataTrigger here

               <Grid.Resources>
                  // Storyboard here
               </Grid.Resources>
          </Grid>
     </DataTemplate>
</PhoneApplicationPage.Resources> 
```

谢谢。

# android - 带有按钮单击的 Android 计算器

> ID：13549863
> 
> 赞同：2
> 
> 时间：2012-11-25T09:42:32.980
> 
> 标签：android, button, methods, android-edittext, calculated-field

我正在尝试通过添加值 txtA + txtB 来计算名为 lblAnswer 的字段。我对 android 开发世界相当陌生，想知道解决这个问题的最佳方法是什么。我已经将必要的编辑字段添加到 GUI。我现在正在使用 java 文件来尝试创建该方法。此方法已命名为 doCalc。这是我到目前为止所拥有的。

```
public void doCalc() 
{
    lblAnswer = txtA + txtB;
} 
```

有人建议我在这里添加更多代码是完整的代码。谢谢你的建议。

这是Java文件。

```
 package com.example.wattsprofessional;

     import android.app.Activity;
     import android.os.Bundle;
     import android.view.Menu;

    public class MainActivity extends Activity {

      @Override
      protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void doCalc() 
{
    lblAnswer = txtA + txtB;
    Double.parseDouble(txtA.getText().toString());
    lblAnswer.setText"t
} 
```

这是xml文件。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:tools="http://schemas.android.com/tools"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
              tools:context=".MainActivity" >

    <EditText
           android:id="@+id/txtA"
           android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
             android:layout_centerHorizontal="true"
             android:layout_marginTop="40dp"
            android:ems="10"
            android:hint="Write Here"
            android:inputType="numberDecimal" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/txtB"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/txtA"
    android:layout_below="@+id/txtA"
    android:layout_marginTop="32dp"
    android:ems="10"
    android:hint="Second Here"
    android:inputType="numberDecimal" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/calculate" 
    android:onClick="doCalc"/>

<TextView
    android:id="@+id/lblAnswer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="50dp"
    android:text="TextView" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:57:39.880

为了从 中获取 Double 值`EditText`，您需要使用`Double.parseDouble(txtA.getText().toString())`. 要设置文本，您可以使用`lblAnswer.setText("text")`.

此外，从按钮调用它的最简单方法是`android:onClick`在 XML 中设置其属性，例如`android:onClick="doCalc"`.

编辑：您还需要创建对对象的引用。在你的 onCreate() 之前，放：

```
EditText txtA;
EditText txtB;
TextView lblAnswer; 
```

然后在您的 onCreate() 中，您需要初始化对象：

```
txtA = new (EditText)findViewById(R.Id.txtA);
txtB = new (EditText)findViewById(R.Id.txtB);
lblAnswer = new (TextView)findViewById(R.Id.lblAnswer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:44:58.837

您的代码缺少一些关键组件。查看您的代码，并查看我在下面准备的代码。

```
package com.example.wattsprofessional;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    private EditText txtA, txtB;
    private Button button1;
// ^ we have declared these as fields up here so that we can access them throughout the page, past all the curly brackets

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        txtA = (EditText) findViewById(R.id.txtA);
        txtB = (EditText) findViewById(R.id.txtB);
        button1 = (Button) findViewById(R.id.button1);
        // ^ this is where we initialize these. You did the xml correctly, but you still need to hook the java to it.
        // it allows us to use any names and locations we like not just same ones.
        // basically you say what it is (Button) and then use the following method to look for the id that you wrote in the xml

        initButton();
        // i made this listener so we'd have time. this is the oncreate method and is called instantly.
        // if we called doCalc here, we'd have no time to put numbers in.
    }

    private void initButton() {
        button1.setOnClickListener(new OnClickListener() {
            // this one performs an action when our button is clicked. it performs whatever is below
            @Override
            public void onClick(View v) {
                String strA = txtA.getText().toString();
                String strB = txtB.getText().toString();
                // we get our strings from our editexts. i think you know how to do this well.

                Double dblAnswer = doCalc(strA, strB);              
                // ^we pass them to our method, it does all the heavy lifting for us. and spits an answer for us.
                TextView lblAnswer = (TextView) findViewById(R.id.lblAnswer);
                // this is a local variable, as opposed to a field. i made so you know that you can do it like this - with the whole line here
                // the disadvantage is that we can't do anything to it outside of this curly bracket. but there are performs gains.
                // in general it's wasteful to use fields when you can suffice with local variable
                String answer = String.valueOf(dblAnswer);
                // we get our answer and turn it to a string.
                lblAnswer.setText(answer);
                // finally we set our result to the textView.
            }
        });
    }

    public double doCalc(String a, String b) {
        // a and b are both variables. they refer to the stuff we put in
        double dblA = Double.parseDouble(a);
        double dblB = Double.parseDouble(b);
        // we're gonna make both of these numbers so we can add them. right now they're just text.
        return dblA + dblB;
        // ^ this statement means that this method will spit a number out when it's done which we can use however.
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

# php - 使用 Mysql ext 将 php 代码转换为 PDO 将不起作用

> ID：13549865
> 
> 赞同：0
> 
> 时间：2012-11-25T09:42:44.007
> 
> 标签：php, mysql, pdo

为了安全起见，我决定将带有 mysql 代码的简单 php 转换为 PDO，因为它会加强我的安全性。我的旧代码：

```
$host = "localhost"; 
$user = "username"; 
$pass = "pass"; 
$database = "mydatabase"; 

$linkID = mysql_connect($host, $user, $pass) or die("Could not connect to host."); 
mysql_select_db($database, $linkID) or die("Could not find database."); 
$name=$_POST['name'];
$message=$_POST['message'];
$ip = $_SERVER['REMOTE_ADDR'];
$query="INSERT INTO table (date_time, name, message,ip) VALUES     (NOW(),'$name','$message','$ip')";
If (mysql_query($query,$linkID)){
    //Success
    }else{
    //Failure
    } 
```

我的新代码是：

```
$hostname = 'localhost';
$username = 'username';
$password = 'pass';
$dbname = 'mydatabase';

$dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
if($_POST['name'] && $_POST['message']) {
    $name = $_POST['name'];
    $message = $_POST['message'];
    $ip = $_SERVER['REMOTE_ADDR']; 
    $sql = "INSERT INTO table (date_time, name, message,ip)VALUES (NOW(), :name, :message,'$ip')";
    $stmt = $dbh->prepare($sql);
    $stmt->bindParam(':name', $name, PDO::PARAM_STR);
    $stmt->bindParam(':message', $message, PDO::PARAM_STR);
    if ($stmt->execute()) {
      echo "OK";
    }
} 
```

很奇怪，当我将浏览器指向 index.php?name=someName&message=someMessage 时，我的 PDO 代码不会回显任何事情（甚至`echo "ok"`）或错误，因此我可以确定问题出在哪里。

我可以确认没有数据插入到数据库中。

我什至添加了 try catch 但没有任何改变。我的 php 支持 PDO，简单的 Mysql 代码正在运行。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:51:37.843

在你的情况下，

```
if($_POST['name'] && $_POST['message']) { 
```

应该：

```
if($_GET['name'] && $_GET['message']) { 
```

# sql - 从两个表中按日期时间排序字段

> ID：13549866
> 
> 赞同：0
> 
> 时间：2012-11-25T09:42:45.430
> 
> 标签：sql, sql-server-2008, sql-order-by, multiple-tables

我有两个表 ( `IncomingDocs`) 和 ( `OutgoingDocs`)，每个表都有一个名为`SubmitDate`(datatype `Datetime`) 和`DepositNo`(datatype `Int`) 的字段，每个表都可以在一个表中 `DeposotNo`有多个。`Submitdate`

```
 For example;

_IncomingDocs table_

**DepositNo**  |  **SubmitDate**  

    1  |  10/3/2012 12:00:00 AM  
    1  |  12/3/2012 12:00:00 AM  
    2  |  10/3/2012 12:00:00 AM  
    3  |  10/3/2012 12:00:00 AM  
    3  |  13/3/2012 12:00:00 AM  
    4  |  20/3/2012 12:00:00 AM  

_OutgoingDocs table_

**DepositNo**  |  **SubmitDate**  

    1  |  11/3/2012 12:00:00 AM  
    2  |  15/3/2012 12:00:00 AM  
    3  |  12/3/2012 12:00:00 AM  
    3  |  14/3/2012 12:00:00 AM  
    4  |  19/3/2012 12:00:00 AM  

    SELECT DepositNo, SubmitDate  
    FROM IncomingDocs AS i, OutgoingDocs as o  
    WHERE DepositNo = 1  
    ORDER BY SubmitDate  

* The output of the query should be:

_Output table_

**DepositNo**  |  **SubmitDate**  
1  |  10/3/2012 12:00:00 AM  << From IncomingDocs table  
1  |  11/3/2012 12:00:00 AM  << From OutgoingDocs table  
1  |  12/3/2012 12:00:00 AM  << From IncomingDocs table 
```

我希望输出是特定 DepositNo 的记录（在 WHERE 子句中指定）并按提交日期排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:57:59.093

我不确定sql server是否支持联合，但是像这样

```
Select DepositNo, SubmitDate from IncomingDocs where DepositNo = X
UNION
Select DepositNo, SubmitDate from OutgoingDocs where DepositNo = X
ORDER BY SubmitDate 
```

应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T10:54:33.707

-- 如果您需要保留每个表中的两行 -- 碰巧是重复的，您将需要 'UNION ALL'

```
SELECT DepositNo, SubmitDate  
FROM (  
     SELECT DepositNo, SubmitDate  
     FROM OutgoingDocs  
     WHERE DepositNo = 1 --Or a variable @MyDepositNo  
     UNION ALL --this will preserve duplicate rows if there are any between the two tables  
     SELECT DepositNo, SubmitDate  
     FROM IncomingDocs  
     WHERE DepositNo = 1 --as above  
) TT  
ORDER BY TT.SubmitDate 
```

# javascript - d3js 图形在使用新数据刷新时保留旧轴数据

> ID：13549868
> 
> 赞同：3
> 
> 时间：2012-11-25T09:42:56.363
> 
> 标签：javascript, canvas, graph, svg, d3.js

这是我的问题的图片 ![在此处输入图像描述](../Images/2b4e1f4054f6b4f1d21e74de631aeeea.png)

每次尝试用新数据刷新我的 d3js 图表时，它的 x 轴和 y 轴都会与旧轴和新轴混淆。在 y 轴上的图片中 3、2.5、2、1.5 .... 是我的旧轴和 800,700,600 .....是我的新轴。与 x 轴类似。谁能告诉我我做错了。我只希望新轴出现。这是我的 d3js 代码。

```
function ShowGraph(data) {

var vis = d3.select("#visualisation"),
    WIDTH = 500,
    HEIGHT = 500,
    MARGINS = {
        top: 20,
        right: 20,
        bottom: 20,
        left: 30
    },
    xRange = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([d3.min(data, function (d) {
        return d.year;
    }),
    d3.max(data, function (d) {
        return d.year;
    })]),
    yRange = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([d3.min(data, function (d) {
        return d.count;
    }),
    d3.max(data, function (d) {
        return d.count;
    })]),
    xAxis = d3.svg.axis() // generate an axis
    .scale(xRange) // set the range of the axis
    .tickSize(5) // height of the ticks
    .tickSubdivide(true), // display ticks between text labels
    yAxis = d3.svg.axis() // generate an axis
    .scale(yRange) // set the range of the axis
    .tickSize(5) // width of the ticks
    .orient("left") // have the text labels on the left hand side
    .tickSubdivide(true); // display ticks between text labels
var transition = vis.transition().duration(1000).ease("exp-in-out");

transition.select(".x.axis").call(xAxis);
transition.select(".y.axis").call(yAxis);

vis.append("svg:g") // add a container for the axis
.attr("class", "x axis") // add some classes so we can style it
.attr("transform", "translate(0," + (HEIGHT - MARGINS.bottom) + ")") // move it into position
.call(xAxis); // finally, add the axis to the visualisation

vis.append("svg:g")
    .attr("class", "y axis")
    .attr("transform", "translate(" + (MARGINS.left) + ",0)")
    .call(yAxis);

var circles = vis.selectAll("circle").data(data)
circles.enter()
    .append("svg:circle")
    .attr("cx", function (d) {
    return xRange(d.year);
})
    .attr("cy", function (d) {
    return yRange(d.count);
})
    .style("fill", "red")

circles.transition().duration(1000)
    .attr("cx", function (d) {
    return xRange(d.year);
})
    .attr("cy", function (d) {
    return yRange(d.count);
})
    .attr("r", 10)

circles.exit()
    .transition().duration(1000)
    .attr("r", 10)
    .remove(); 
```

}

这是它看看。[链接](http://bigquerymashup.appspot.com/ajaxPage)一次尝试一个单词“the,and,i,and,the”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T10:28:31.460

在构建图表之前尝试清空轴

```
function ShowGraph(data) {
    d3.selectAll('.axis').remove();
    var vis = d3.select("#visualisation"),
    //... 
```

编辑好吧也许我找到了解决方案

问题是每次调用函数时附加的轴。

因此，如果您添加这样的检查：

```
var hasAxis = vis.select('.axis')[0][0];

if(!hasAxis) {
   vis.append("svg:g") // add a container for the axis
   .attr("class", "x axis") // add some classes so we can style it
   .attr("transform", "translate(0," + (HEIGHT - MARGINS.bottom) + ")") // move it into position
   .call(xAxis); // finally, add the axis to the visualisation

    vis.append("svg:g")
    .attr("class", "y axis")
    .attr("transform", "translate(" + (MARGINS.left) + ",0)")
    .call(yAxis);
} 
```

它应该有效

# android - 什么相当于在 Android 中使用 LayoutInflater 的 findViewById？

> ID：13549875
> 
> 赞同：0
> 
> 时间：2012-11-25T09:43:27.457
> 
> 标签：android, layout-inflater

尽管我在项目中使用了 LayoutInflater 函数，但我并不完全理解它。对我来说，这只是我无法调用**findViewById**方法时查找视图的一种方式。但有时它不像我预期的那样工作。

我有这个非常简单的布局（main.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:id="@+id/layout">
    <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Hello World, MyActivity"
            android:id="@+id/txt"/>

    <Button android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Change text"
            android:id="@+id/btn"/>
</LinearLayout> 
```

我想要的非常简单 - 只需在按下按钮时更改 TextView 内的文本。一切都像这样正常工作

```
public class MyActivity extends Activity implements View.OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btn = (Button) findViewById(R.id.btn);
        btn.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
        TextView txt = (TextView) findViewById(R.id.txt);
        double random = Math.random();
        txt.setText(String.valueOf(random));
    }
} 
```

但我想了解使用**LayoutInflater**的等价物是什么？我试过这个，但没有成功，TextView 没有改变它的价值

```
@Override
public void onClick(View view) {
    LayoutInflater inflater = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View main = inflater.inflate(R.layout.main, null);
    TextView txt = (TextView) main.findViewById(R.id.txt);
    double random = Math.random();
    txt.setText(String.valueOf(random));
} 
```

但是在调试时，我可以看到每个变量都填充了正确的值。我的意思是**txt**变量实际上包含 TextView，其值为“Hello World，MyActivity”，在**setText**方法之后它包含一些随机数，但我在 UI 上看不到这种变化。这是我在项目中使用 LayoutInflater 时遇到的主要问题——由于某种原因，我无法更新膨胀的视图。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:48:38.970

> 对我来说，这只是我无法调用 findViewById 方法时查找视图的一种方式。

这是不正确的。`LayoutInflater`用于从提供的 xml 布局文件膨胀（构建）视图层次结构。使用您的第二个代码片段，您从布局文件（`R.layout.main`）构建视图层次结构，`TextView`从该膨胀视图中找到并在其上设置文本。问题是这个膨胀的视图没有附加到`Activity`. 您可以看到更改，例如，如果您`setContentView`这次再次调用给它一个膨胀的视图。这将使您的内容`Activity`成为新膨胀的`View`：

```
LayoutInflater inflater = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View main = inflater.inflate(R.layout.main, null);
TextView txt = (TextView) main.findViewById(R.id.txt);
double random = Math.random();
txt.setText(String.valueOf(random));
setContentView(main); 
```

# c - 如何使用命令提示符运行 .exe 文件？

> ID：13549877
> 
> 赞同：1
> 
> 时间：2012-11-25T09:43:44.167
> 
> 标签：c, windows, execution

我正在做一个在线法官。这是我的学校项目。

我正在`.c`从用户那里获取文件。我可以`.c`使用命令提示符编译文件。但我不知道如何运行这个文件。我需要运行这个文件，从文本文件中获取输入并将输出保存在文本文件中。编译代码是：

```
 gcc main.c -o HelloWorld 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T09:51:24.880

> 我需要运行这个文件，从文本文件中获取输入并将输出保存在文本文件中。

假设您在 Linux 上，这应该可以工作：

```
./HelloWorld < input.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T09:48:11.917

我假设你在Linux上？如果是，请使用以下命令运行它：

```
。/你好世界
```

需要它`./`以便 shell 知道在当前目录中查找可执行文件。（由于安全原因，不会在当前目录中自动查找可执行文件。）

如果在 Windows 上，只需键入其名称：

```
你好世界
```

附加`.exe`到文件名是可选的。

重定向标准输入的工作方式如下：

`HelloWorld < inputfile`

标准输出被重定向为`>`：

`HelloWorld > outputfile`

您可以将两者结合起来：

`HelloWorld < inputfile > outputfile`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T09:48:17.380

只需输入完整路径。例如，如果您`%homedrive%`使用 name编译文件`dummy.exe`，请键入`%homedrive%/dummy.exe`.

此外，如果您已经在 中`%homedrive%`，则只需键入`dummy.exe`.

**编辑**：假设你在 Windows 上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T10:04:03.740

当您在 Linux 终端中键入 HelloWorld 时，您的系统将在 PATH 变量指示的位置搜索该程序。很可能是 /bin。您可以通过键入以下内容来检查您的 PATH：

```
echo $PATH 
```

因此，您必须准确地说，HelloWorld 位于具体目录中或更改 $PATH 变量。

```
./HelloWorld 
```

点表示当前目录

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T09:48:17.633

您可以安装[TCC](http://bellard.org/tcc/)

```
 #!/usr/local/bin/tcc -run 
```

或者尝试该选项`./HelloWorld`

# android - 重新激活活动

> ID：13549878
> 
> 赞同：0
> 
> 时间：2012-11-25T09:43:46.500
> 
> 标签：android, android-activity, onresume

我确实有一个小问题。我有很多不同的活动，从所有这些活动中我可以属于一个活动（我称之为 ActivityC）。因此，如果我使用返回按钮从 ActivityC 返回到前一个 Activity (ActivityB)，我希望该前一个 Activity 重新激活。

我猜它适用于 onResume() 但我以前从未尝试过这种方法！

我的问题是：我如何使用 onResume() 方法。我的意思是有人有一个小代码示例吗？问题是，一旦我返回旧活动（ActivityB），就应该更新数据库。我以另一种方式再次描述了我的问题。我有三个不同的活动 A、B 和 C。如果我从 C 返回到 B 没有任何反应（没有更新数据库），但是如果我从 B 返回到 A 并且再次从 A 到 B 它可以工作（数据库更新是因为B 以某种方式“重新激活”。

我想改变这一点，我只需要从 C 回到 B 来重新激活它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:08:15.760

如果您想在每次恢复某个活动时执行特定活动，请将那段代码放入特定函数中，例如`doSomething()`并在您的`onResume()`after call中调用它`super.onResume()`。例子：

```
public void doSomething() {
  // Whatever task you want to do goes here
}

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  // setContentView and all can be done here.

  doSomething();
}

protected void onResume() {
  super.onResume();
  doSomething();
} 
```

# javascript - 从 Google 地图加载 div 中的确切位置

> ID：13549881
> 
> 赞同：0
> 
> 时间：2012-11-25T09:43:53.580
> 
> 标签：javascript

我对在我的网站中使用谷歌地图的概念相当陌生。我已经得到这个脚本来加载我网页的 div 中的特定位置。但是，所需的位置不会加载到我的页面中。

* * *

说，我想`BIT Main Bldg Patna, Bihar, India 12 m E`在打开页面时在 div 中加载位置。但是，结果并不准确，我们需要再放大几层。

* * *

```
<!DOCTYPE html>
<html> 
<head> 
   <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
   <title>Google Maps Geocoding Demo</title> 
   <script src="http://maps.google.com/maps/api/js?sensor=false" 
           type="text/javascript"></script> 
</head> 
<body> 
   <div id="map" style="width: 400px; height: 300px;"></div> 

   <script type="text/javascript"> 

   var address = 'BIT Main Bldg Patna, Bihar, India 12 m E';

   var map = new google.maps.Map(document.getElementById('map'), { 
       mapTypeId: google.maps.MapTypeId.TERRAIN,
       zoom: 8
   });

   var geocoder = new google.maps.Geocoder();

   geocoder.geocode({
      'address': address
   }, 
   function(results, status) {
      if(status == google.maps.GeocoderStatus.OK) {
         new google.maps.Marker({
            position: results[0].geometry.location,
            map: map
         });
         map.setCenter(results[0].geometry.location);
      }
      else {
         // Google couldn't geocode this request. Handle appropriately.
      }
   });

   </script> 
</body> 
</html> 
```

* * *

`BIT Main Bldg Patna, Bihar, India 12 m E`通过在[此](http://code.google.com/apis/ajax/playground/#geocoding_simple)页面的输出文本框中输入，您可以看到确切的期望结果。这里有什么错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:55:41.883

要使您的页面显示与您链接到的页面上的地图类似的地图，您需要更改您在地图构造函数中提供的选项。将属性更改`zoom`为 15 或 16 并更改`mapTypeId`为`google.maps.MapTypeId.ROADMAP`，您的地图将看起来更像您的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:01:36.033

尝试以下操作：

```
 var map = new google.maps.Map(document.getElementById('map'), { 
       mapTypeId: google.maps.MapTypeId.ROADMAP,
       zoom: 15
   }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T10:05:54.943

我会重新组织你的标记。脚本应该位于 head 部分或`</body>`标记之后，以便在浏览器 DOM 中正确加载所有元素后执行您的函数。

创建一个类似的函数

```
<script type="text/javascript"> 

function initialise()
{
   var address = 'BIT Main Bldg Patna, Bihar, India 12 m E';

   var map = new google.maps.Map(document.getElementById('map'), { 
       mapTypeId: google.maps.MapTypeId.TERRAIN,
       zoom: 10 //to get to a desirable zoom level change this value
   });

   var geocoder = new google.maps.Geocoder();

   geocoder.geocode({
      'address': address
   }, 
   function(results, status) {
      if(status == google.maps.GeocoderStatus.OK) {
         new google.maps.Marker({
            position: results[0].geometry.location,
            map: map
         });
         map.setCenter(results[0].geometry.location);
      }
      else {
         // Google couldn't geocode this request. Handle appropriately.
      }
   });
}
   </script> 
```

然后在您的`<body>`标签中，您应该使用 onload 事件来执行脚本。

```
<body onload="initialise()"> 
```

# c# - 如何在 MSTest Visual Studio 2012 中解析 dll 绑定

> ID：13549883
> 
> 赞同：2
> 
> 时间：2012-11-25T09:44:22.073
> 
> 标签：c#, unit-testing, reference, visual-studio-2012, mstest

尝试右键单击 Visual Studio 2012 上的测试 -> 运行测试时，我收到未找到 dll 的错误消息。

> “System.IO.FileNotFoundException：无法加载文件或程序集‘Recipe.API，版本=1.0.0.0，文化=中性，PublicKeyToken=null’或其依赖项之一。系统找不到指定的文件。”

在 Visual Studio 2010 中执行相同的操作是有效的，并且测试通过了。

dll位于bin目录下，但与项目的输出目录不同

（我配置了testsetting文件）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:41:24.293

确保[**选择测试设置文件**](http://msdn.microsoft.com/en-us/library/vstudio/ee256991)

![选择测试设置文件](../Images/98023c73fc078c31012fc3133ec4f1fd.png)

# javascript - 使用 Firefox 隐藏 (eSpeak) 命令提示符

> ID：13549884
> 
> 赞同：2
> 
> 时间：2012-11-25T09:45:13.550
> 
> 标签：javascript, firefox, hide, prompt, espeak

这可能是一个愚蠢的问题。Firefox 相当严格，因为众所周知，Internet Explorer 可以毫无问题地激活病毒。但是对于我的英语课程，我需要没有命令屏幕的 eSpeak。该程序在本地运行，但我使用 HTML 和 javascript。

这是我的代码：

```
netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
var localFile = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
var process = Components.classes["@mozilla.org/process/util;1"].createInstance(Components.interfaces.nsIProcess);
var args = new Array('-vmb-en1',"Say something");
localFile.initWithPath('C:\\WINDOWS\\espeak.exe');
process.init(localFile);
process.run(false, args, args.length); 
```

我想在 Firefox 中隐藏提示。Internet Explorer 做我想做的事：

```
try{var speak = new ActiveXObject('WScript.Shell');} catch(err){}
speak.Run('espeak -vmb-en1 "Say something"',0); 
```

欢迎任何其他更改代码的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:47:39.600

我认为您（和许多其他人）的问题是这个：[https ://developer.mozilla.org/en-US/docs/Bypassing_Security_Restrictions_and_Signing_Code](https://developer.mozilla.org/en-US/docs/Bypassing_Security_Restrictions_and_Signing_Code)

但是我现在不知道怎么办！！

# ruby-on-rails - 当列类型为 datetime 时如何在表单上显示本地时间以 UTC 格式保存在数据库中

> ID：13549888
> 
> 赞同：3
> 
> 时间：2012-11-25T09:45:48.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个名为 的列**`test_date`**，`datetime`在 General Exam 表中输入。我构建了一个表单来创建和更新 GeneralExam，在表单上，​​我允许用户选择一个日期和时间[`jQuery UI Datepicker`](http://trentrichardson.com/examples/timepicker/)。

用户选择日期和时间后，它将显示在文本字段中，如：

`25-11-2012 16:30`

这是我现在的时间。当我在控制台中运行时，我看到`test_date`保存在数据库中的是：

`2012-11-25 09:30:00`

当我获得对象 GeneralExam 并获得`test_date`价值时，它是：

```
g = GeneralExam.last
g.test_date
=> Sun, 25 Nov 2012 16:30:00 ICT +07:00 
```

我认为`test_date`是转换的，因为我设置的`application.rb`是：

```
config.time_zone = 'Hanoi' 
```

但是当我更新表单上的一般考试时，它仍然显示保存在数据库中的时间，而不是我的本地时区，这意味着它显示：

`2012-11-25 09:30:00`

但我希望它就像我在表格上选择的那样：

`25-11-2012 16:30:00`

如何设置在本地时间显示日期时间列？

而且我认为日期的顺序是颠倒的，当我选择日期时，它是`25-11-2012`，但是当它显示它时`2012-11-25`，为什么它颠倒了顺序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:46:59.533

几个小时后，我在 google 和 stackoverflow 上搜索，我想我找到了我想要的。我查看了[这个问题](https://stackoverflow.com/questions/6336235/rails-app-config-time-zone-not-applying-when-populating-form-fields-for-edit/6585693#6585693)并找到了一些有关[`strftime`](http://apidock.com/rails/ActiveSupport/TimeWithZone/strftime)方法的信息。这是我解决问题所需的信息。

首先，如何显示日期时间在显示时以 UTC 保存为本地时间：

```
Value was saved:                             2012-11-25 09:30:00

Value I want display on form (ICT +7:00):    25-11-2012 16:30:00 
```

为了显示我想要的值，我在表单上使用了这个（我使用了 simple_form）：

```
<%= f.input :test_date, as: :string, label: false, input_html: { id: "datetime_picker", value: f.object.test_date.strftime("%d-%m-%Y, %H:%M") } %> 
```

我在数据库中获得了价值并通过以下方式对其进行格式化：

```
value: f.object.test_date.strftime("%d-%m-%Y, %H:%M") } %> 
```

而当我想`test_date`在表格数据中显示时，我也习惯`strftime("%d-%m-%Y, %H:%M")`根据需要显示日期时间格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:12:31.447

正确的设置与您的 Rails 配置有关，但也与您的数据库配置有关。有一个[Railscast](http://railscasts.com/episodes/106-time-zones-revised?view=asciicast)，解释了如何避免大多数的陷阱。为了保持一致性，所有日期和时间都以 UTC 格式保存在数据库中。转换由 Rails config 进行，具体取决于您的 config.time_zone 。在这种情况下，您应该尝试：

```
Time.zone.now 
```

它考虑了 Rails 中的配置，并且不同于：

```
Time.now 
```

# java - 如何使用嵌套的 for 循环构建砖金字塔

> ID：13549894
> 
> 赞同：0
> 
> 时间：2012-11-25T09:47:50.020
> 
> 标签：java

我正在解决一个我遇到很多麻烦的问题。问题的概念是用砖块建造金字塔。整个金字塔的砖块都集中在窗户的中央。我可以画一块砖，然后是两块，然后是三块，一直到 12 块，它构成了金字塔的底部，但是所有的砖都在窗口左侧的左边缘对齐，而不是在窗口的中心。

使用 getWidth() 和 getHeight() 我可以做到 (getWidth()-BRICK_WIDTH) / 2; 获得砖块 x 坐标的中心。然后 (getHeight() -BRICK_HEIGHT) / 2; 为一块砖的 y 坐标的中心。唯一的问题是我不知道在哪里输入该代码，因此它适用于所有砖块，因此每排砖块都位于窗口的中心。

```
import acm.program.*;
import acm.graphics.*;

public class Pyramid extends GraphicsProgram {
  public void run() {
    double xCoordinate = (getWidth() - BRICKWIDTH) / 2;
    double yCoordinate = (getHeight() - BRICK_HEIGHT / 2);
    for (int i = 0; i < BRICKS_IN_BASE; i++) {
      for (int j = 0; j < i; j++) {
        double x = j * BRICK_WIDTH;
        double y = i * BRICK_HEIGHT;
        GRect square = new GRect(x, y, BRICK_WIDTH, BRICK_HEIGHT);
        add(square);
      }
    }
  }
  private static final int BRICK_WIDTH = 50;
  private static final int BRICK_HEIGHT = 25;
  private static final int BRICKS_IN_BASE = 12;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:04:43.757

你的意思是这样的吗？

```
 double x = xCoordinate + j * BRICK_WIDTH;
    double y = yCoordinate + i * BRICK_HEIGHT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:10:38.133

你应该尝试这样的事情：

```
import acm.program.*;
import acm.graphics.*;

public class Pyramid extends GraphicsProgram
{
    public void run()
    {
        // We calculate some values in order to center the pyramid vertically
        int pyramidHeight = BRICKS_IN_BASE * BRICK_HEIGHT;
        double pyramidY = (getHeight() - pyramidHeight) / 2;

        // For each brick layer...
        for (int i=BRICKS_IN_BASE ; i >= 1; i--)
        {
            // We calculate some values in order to center the layer horizontally
            int layerWidth = BRICKWIDTH * i;
            double layerX = (getWidth() - layerWidth) / 2;
            double layerY = pyramidY + (i-1) * BRICK_HEIGHT;

            // For each brick in the layer...
            for(int j=0 ; j<i ; j++)
            {
                GRect square = new GRect(layerX + j*BRICK_WIDTH, layerY, BRICK_WIDTH, BRICK_HEIGHT);
                add(square);
            }
        }
    }

    private static final int BRICK_WIDTH = 50;
    private static final int BRICK_HEIGHT = 25;
    private static final int BRICKS_IN_BASE = 12;
} 
```

在这个实现中，我们首先计算层的全局宽度（因为我们已经知道其中会有多少块砖），然后我们用它来找到层的全局“起点”，从中我们可以找到所有的所有矩形的坐标。

# android - 服务完成从互联网下载数据后更新小部件

> ID：13549907
> 
> 赞同：1
> 
> 时间：2012-11-25T09:48:51.277
> 
> 标签：android, android-asynctask, android-service

我有多个具有不同 ID 的小部件。然后我的服务正在下载带有一些异步任务的数据。在我的小部件中，我有刷新按钮，当我单击时，我需要启动服务，通过该异步任务下载数据，之后，它将刷新小部件中的数据。有什么想法吗？

谢谢

# javascript - 如何使用正则表达式解析javascript中的数据？

> ID：13549909
> 
> 赞同：-2
> 
> 时间：2012-11-25T09:49:38.733
> 
> 标签：javascript, regex, parsing

如何在 javascript 中使用正则表达式将项目及其值放入数组中？

这是我的数据样本：

```
battery.voltage: 13.50
battery.voltage.nominal: 12.0
beeper.status: enabled
device.type: ups
driver.name: blazer_ser
driver.parameter.pollinterval: 2 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:22:31.890

为什么要使用正则表达式，你可以简单地使用`substr`and `indexOf`。假设您将列表存储在一个数组中，您可以简单地遍历条目并在第一次出现冒号时拆分。

```
var items = [...]; // Your items.
var arr = {};
for (var i = items.length - 1; i >= 0; i--) {
    var key = items[i].substr(0, items[i].indexOf(':'));
    var value = items[i].substr(items[i].indexOf(':') + 1).trim();
    arr[key] = value;
} 
```

此解决方案仅适用于实现该`trim`方法的浏览器。如果你想在保存端，你可以覆盖`String.prototype`并添加修剪方法。（请参阅[在 JavaScript 中修剪字符串？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)）

`split`如果您将项目作为由换行符分隔的字符串，则可以通过;轻松地将其拆分为数组。

```
var list = "battery.voltage: 13.50\n"
         + "battery.voltage.nominal: 12.0\n"
         + "beeper.status: enabled\n"
         + "device.type: ups\n"
         + "driver.name: blazer_ser\n"
         + "driver.parameter.pollinterval: 2";​​
var items = list.split(/\n/); 
```

[**演示**](http://jsfiddle.net/hCYuP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:53:39.430

使用下面的代码来做到这一点......这里变量`data`包含你的数据......

```
data=data.split(/\n+/);
var output={};
for(var i=0;i<data.length;i++){
     var a=data[i].split(/:\040+/);
     output[a[0]]=a[1];
} 
```

这些代码将为您提供如下所示的数组...

```
Array ( 
    battery.voltage: "13.50",
    battery.voltage: "12.0",
    beeper.status: "enabled",
    device.type: "ups",
    driver.name: "blazer_ser",
    driver.parameter.pollinterval: "2"
) 
```

例子：

```
output['driver.name'] === "blazer_ser" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:42:56.390

这是一个解决方案，它只使用单个正则表达式通过字符串数据：

```
var list = "battery.voltage: 13.50\n"
         + "battery.voltage.nominal: 12.0\n"
         + "beeper.status: enabled\n"
         + "device.type: ups\n"
         + "driver.name: blazer_ser\n"
         + "driver.parameter.pollinterval: 2";

function parse(data) {
    var match, result = {};            
    var pattern = /\s*([^:\s]+)\s*:\s*([^:\s]+)$/gm; 
    while (match = pattern.exec(data)) {
        result[match[1]] = match[2];
    }
    return result;
}

var test = parse(list);

// dump array
for (var i in test) 
    console.log(i + ": " + test[i]);

// select one
console.log(test["driver.parameter.pollinterval"]); 
```

[单击此处在 jsfiddle 上试用](http://jsfiddle.net/johnrobinsn/Mm8A2/4/)

# php - 修改一段PHP代码

> ID：13549911
> 
> 赞同：-1
> 
> 时间：2012-11-25T09:49:53.673
> 
> 标签：php, zend-framework, socialengine

我有这个：

```
<?php echo $this->htmlLink($this->viewer()->getHref(), $this->itemPhoto($this->viewer(), 'thumb.icon')); ?> 
```

这会生成一个 HTML 代码，例如：

```
<a href="http://www.domain.com/john">
  <img src="http://www.domain.com/thumb_0205.jpg" alt="" class="thumb_icon item_photo_user thumb_icon">
</a> 
```

现在，我想做的是添加：

```
<?php echo $this->viewer()->getTitle(); ?> //This will generate the member's name, like "John Doe" 
```

到上面的代码，生成一个 HTML 代码，如：

```
<a href="http://www.domain.com/john">
  <img src="http://www.domain.com/thumb_0205.jpg" alt="" class="thumb_icon item_photo_user thumb_icon">
  <span>John Doe</span>
</a> 
```

反正我能做到吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:56:33.930

这应该有效：

```
<?php echo $this->htmlLink(
    $this->viewer()->getHref(), 
    $this->itemPhoto($this->viewer(), 'thumb.icon') . '<span>' . $this->viewer()->getTitle() . '</span>'
); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T09:57:31.867

猜猜，这应该工作：

```
<?php echo $this->htmlLink($this->viewer()->getHref(), $this->itemPhoto($this->viewer(), 'thumb.icon').'<span>'. $this->viewer()->getTitle().'</span>'); ?> 
```

只需将额外的字符串附加到 htmlLink 的第二个参数。

```
HtmlLink($href, $text, $title = "", array $attribs = array()); 
```

# javascript - 通过 Javascript 或 Jquery 在客户端格式化 JSON 日期时间

> ID：13549922
> 
> 赞同：3
> 
> 时间：2012-11-25T09:51:38.103
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [在 Javascript 中将日期转换为字符串](https://stackoverflow.com/questions/1933320/convert-a-date-to-string-in-javascript)

我在客户端有 json 格式的日期：

```
/Date(1352745000000)/ 
```

我试图解析 Json 日期的代码：

```
eval(dateTime.replace(/\/Date\((\d+)\)\//gi, "new Date($1)")); 
```

和

```
new Date(parseInt(dateTime.substr(6))); 
```

输出我得到：

```
Tue Nov 27 2012 00:00:00 GMT+0530 (India Standard Time) 
```

**愿望输出**

```
 2012-11-27 11:16 
```

我无法弄清楚我们将如何得到这个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T09:55:31.040

```
var date = new Date(parseInt(dateTime.substr(6)));
var formatted = date.getFullYear() + "-" + 
      ("0" + (date.getMonth() + 1)).slice(-2) + "-" + 
      ("0" + date.getDate()).slice(-2) + " " + date.getHours() + ":" + 
      date.getMinutes(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T10:22:03.870

最好不要尝试用这个来节省空间:)

```
var str, year, month, day, hour, minute, d, finalDate;

str = "/Date(1352745000000)/".replace(/\D/g, "");
d = new Date( parseInt( str ) );

year = d.getFullYear();
month = pad( d.getMonth() + 1 );
day = pad( d.getDate() );
hour = pad( d.getHours() );
minutes = pad( d.getMinutes() );

finalDate =  year + "-" + month + "-" + day + " " + hour + ":" + minutes;

function pad( num ) {
    num = "0" + num;
    return num.slice( -2 );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:55:27.733

您得到的输出不是字符串 - 您得到的是[`Date`object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)的字符串表示形式。

在进一步处理之前，您需要以适当的方式对其进行格式化。要了解如何做到这一点，只需查看以下答案：[https ://stackoverflow.com/a/8398929/548696](https://stackoverflow.com/a/8398929/548696)

要为日期添加时间，请参阅 Date JS 对象的文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

# java - 快速失败迭代器

> ID：13549927
> 
> 赞同：4
> 
> 时间：2012-11-25T09:53:04.380
> 
> 标签：java, collections, iterator, fail-fast

我得到了这个定义：顾名思义，快速失败的迭代器一旦意识到**自迭代开始以来**集合的结构已经改变，就会失败。

**自迭代开始以来**是什么意思？是不是意味着**Iterator it=set.iterator()**这行代码之后？

```
public static void customize(BufferedReader br) throws IOException{  
    Set<String> set=new HashSet<String>(); // Actual type parameter added  
    **Iterator it=set.iterator();** 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T09:57:32.433

首先，它们是**快速**故障的，而不是故障**安全**的。

契约是某些类型的集合的结构修改（即插入/删除）使集合中的现有迭代器无效。快速失败的迭代器尝试检测它们不应该是有效的并抛出一个[`ConcurrentModificationException`](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html). 这是为您（程序员）提供的一项服务，以帮助您更快地发现此类错误。

在您的示例中：

```
Iterator it = set.iterator();
it.next();
set.add("unique-entry"); // invalidates the iterator
it.next(); 
```

如果幸运的话，第二个`it.next()`会检测到无效使用并抛出异常。请注意，这是在尽力而为的基础上完成的，不能保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T09:57:59.957

快速失败的迭代器意味着以下代码预计会失败：

```
Set<String> set = new HashSet<String>();
Iterator<String> it = set.iterator();
set.add("");
it.next();   // the set has changed now, and the iterator will throw an exception 
```

因为会发生以下一系列事件：创建迭代器，然后其底层集合发生变化，然后访问迭代器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T10:00:26.400

> 是不是意味着 Iterator it=set.iterator() 这行代码之后？

是的。如果您查看代码，`HashSet.iterator()`您会发现它只是这样：

```
return map.keySet().iterator(); 
```

......哪个代表的`HashMap.KeySet.iterator()`。链中还有一些链接，但最终你会到达`HashMap.HashIterator`，它在构造函数中包含这个：

```
private abstract class HashIterator<E> implements Iterator<E> {
    int expectedModCount;   // For fast-fail

    ...

    HashIterator() {
        expectedModCount = modCount;
        ...
    }
} 
```

... where`modCount`是封闭实例中的一个字段，`HashMap`它跟踪修改的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T09:58:54.440

是的，如果您打算对其进行迭代，请不要在使用 .iterator() 后更改集合，如果您想删除最新的元素，可以使用 .remove()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-10T22:20:14.853

在 Fail Fast Iterator 开始工作之前，它会获取集合计数，并且在任何迭代之后，它会检查计数是否更改，如果计数更改，JVM 将抛出 ConcurrentModificationException。快速失败迭代器是 java.util 包内的任何集合迭代器（例如 ArrayList、LinkedList 等），而故障安全迭代器是 java.concurrent 包内的迭代器（例如 CopyOnWriteArrayList、CopyOnWriteSet 等）。Fail Fast迭代器在并发修改的情况下会抛出异常，但Fail Safe迭代器基本上是在处理集合的副本，在并发修改的情况下不会抛出异常。

# mercurial - 在某个版本创建一个新分支

> ID：13549931
> 
> 赞同：36
> 
> 时间：2012-11-25T09:53:49.190
> 
> 标签：mercurial

使用 mercurial 可以很容易地在某个版本中创建标签：`hg tag -r <revision> <tag-name>`. 但是如何在某个版本创建一个分支呢？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-25T10:09:08.493

**前言：** Mercurial 分支有两种类型：

*   命名分支
*   匿名的

## 命名分支

为了获得命名分支 BRANCHNAME，从 REV 开始

```
hg update REV
hg branch BRANCHNAME
...
hg commit 
```

提交是必须的，因为

> 在下一次提交之前，该分支不会存在于存储库中

如中所述`hg help branch`

## 匿名分支

```
hg update REV
...
hg commit 
```

和当前分支获得额外的头

* * *

最后一步，使用以下命令创建远程分支并推送变更集。

```
hg push --new-branch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:57:02.560

你可以你`hg clone -r <rev>`。从命令行帮助（运行`hg -v help clone`）：

```
- create a repository without changesets after a particular revision:

    hg clone -r 04e544 experimental/ good/ 
```

# c - C：警告：数组初始值设定项中的多余元素；'xxx' 的初始化附近；期望 'char *'，但类型为 'int'

> ID：13549933
> 
> 赞同：7
> 
> 时间：2012-11-25T09:54:02.380
> 
> 标签：c, arrays, char, initializer

尝试用 C 语言编译程序时出现一些警告：

> ```
> 13:20: warning: excess elements in array initializer [enabled by default]
> 
> 13:20: warning: (near initialization for ‘litera’) [enabled by default]
> 
> 22:18: warning: excess elements in array initializer [enabled by default]
> 
> 22:18: warning: (near initialization for ‘liczba’) [enabled by default]
> 
> 43:1: warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘int’ [-Wformat]
> 
> 45:2: warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘int’ [-Wformat]
> 
> 55:2: warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘int’ [-Wformat] 
> ```

来源是：

```
char litera[63] = {'E', 'G', 'H', 'F', 'E', 'G', 'H', 'F',
                   'D', 'B', 'A', 'C', 'D', 'B', 'A', 'C', 
                   'B', 'A', 'C', 'D', 'C', 'A', 'B', 'D', 
                   'F', 'H', 'G', 'E', 'F', 'H', 'G', 'E', 
                   'C', 'D', 'B', 'A', 'B', 'A', 'C', 'D', 
                   'F', 'E', 'G', 'H', 'G', 'H', 'F', 'G', 
                   'H', 'F', 'E', 'F', 'H', 'G', 'E', 'C',
    /*line13:*/    'A', 'B', 'D', 'C', 'A', 'B', 'D', 'E'};

int liczba[63] ={'8', '7', '5', '6', '4', '3', '1', '2', 
                 '1', '2', '4', '3', '5', '6', '8', '7', 
                 '5', '7', '8', '6', '4', '3', '1', '2', 
                 '1', '2', '4', '3', '5', '6', '8', '7', 
                 '6', '8', '7', '5', '3', '1', '2', '4', 
                 '3', '1', '2', '4', '6', '8', '7', '5', 
                 '7', '8', '6', '4', '3', '1', '2', '1', 
    /*line22*/   '2', '4', '3', '5', '6', '8', '7', '5'};

int i=0, x=0, n;
char a;
int b=0;
printf("Podaj literę z pola startowego skoczka(duże litery)\n");
scanf("%s", &a);
printf("Podaj liczbę z pola startowego skoczka \n");
scanf("%d", &b);

if (b<=0 || b>8){
    printf("Zła pozycja skoczka\n");
    return 0;
    }

while (litera[i] != a || liczba[i] != b){
    ++i;
    }
n=i;

/*line43*/ printf("Trasa skoczka od punktu %s %d to:\n", a, b); 
while (i<=64){
/*line45*/ printf("%s%d ", litera[i], liczba[i]);
    ++i;

    ++x;
    x=x%8;
    if(x==0)
        printf("/n");
    }
i=0;
while (i<n){
/*line55*/ printf("%s%d ", litera[i], liczba[i]);

    ++i;

    ++x;
    x=x%8;
    if(x==0)
        printf("/n");
    } 
```

我也有“核心转储”之后`scanf("%d", &b);`，但`int b=0;`没有问题......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T10:05:20.723

这里有两个错误：首先，您试图声明`arrays[63]`存储 64 个元素，因为您可能将数组 ( `n`) 的大小与可能的最大索引值 (即`n - 1`) 混淆了。所以它肯定应该是`litera[64]`and `liczba[64]`。顺便说一句，您也必须更改此行 - `while (i<=64)`：否则您最终会尝试访问*第 65 个*元素。

其次，您尝试使用 scanf`char`的格式说明符填充值`%s`，而您应该在`%c`此处使用。

此外，不禁想知道为什么将`liczba`数组声明为存储`int`s 的数组，并使用 s 数组对其进行初始化`char`。所有这些“1”、“2”等......文字代表的不是相应的数字 - 而是它们的字符码。我怀疑那是你的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-10T18:12:53.493

char litera[63] -> char litera[64] int liczba[63] -> int liczba[64]

make 64 代替数组大小初始化。初始化数组大小时再初始化 1 个索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-02T00:48:42.397

索引总是从 i = 0 开始，但元素的数量从 1 开始。

# java - 查找实例所属的节点

> ID：13549941
> 
> 赞同：1
> 
> 时间：2012-11-25T09:55:16.267
> 
> 标签：java, xml, swing, jtree, weka

我根据一组数据生成了一个决策树，然后我将此数据转换为一个 xml 文件，然后将其放入 JTree 中。这部分工作正常，但现在我必须采用一个新实例（其中包含从用户接收的数据），找到它在决策树中的位置并更改该节点的颜色。我找不到办法做到这一点。我正在使用 weka 和 J48 分类器来生成决策树。xml 是以 Luc So​​rel 风格创建的：[http](http://www.lucsorel.com/media/downloads/sample_decision_tree.xml)
://www.lucsorel.com/media/downloads/sample_decision_tree.xml 我尝试的第一件事是使用算法对实例进行分类，但这只让我得到它所属的类，我不知道如何在 JTree 中找到它。我应该怎么办？有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:16:22.640

像`JTable`，`JTree`使用享元[渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#display)来绘制节点。由于默认渲染器是 a `JLabel`，您可以设置前景色或使标签不透明并设置背景色。此相关[示例](https://stackoverflow.com/a/8351850/230513)更改了强调的图标。更多示例可在[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#eg)找到。

附录：*我找不到……我应该着色的节点。*

当`getTreeCellRendererComponent()`被调用时，`value`是对要渲染的节点的引用，并且该`tree`参数允许通过 访问`TreeModel`作为一个整体`getModel()`。此[示例](https://stackoverflow.com/a/8210759/230513)显示如何搜索树。

# haskell - 如何在已安装的包中查找符号

> ID：13549943
> 
> 赞同：1
> 
> 时间：2012-11-25T09:55:25.367
> 
> 标签：haskell, symbols, ghci

当我需要查找包含符号的包时，我使用 Google 或 Hoogle。99% 的案例我都找到了 Hackage 的参考资料（这很好）。

有办法在本地查找吗？

例子：

```
$ ghci
Prelude> :i MonadState
Not in scope: data constructor `MonadState' 
```

然后我搜索“hackage MonadState”并找到

```
http://hackage.haskell.org/.../Control-Monad-State-Class.html 
```

然后：

```
Prelude> :m Control.Monad.State
Prelude> etc... 
```

你怎么做？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T10:15:44.283

要在本地安装的软件包中搜索符号，请使用`hoogle`：

```
$ cabal install hoogle
...

# generate a database of symbols
$ hoogle data
...

$ hoogle search MonadState
Control.Monad.State.Class class Monad m => MonadState s m | m -> s
Control.Monad.State.Lazy class Monad m => MonadState s m | m -> s
Control.Monad.State.Strict class Monad m => MonadState s m | m -> s 
```

# windows-phone-7 - WP7如何实现更好的支点控制？

> ID：13549946
> 
> 赞同：0
> 
> 时间：2012-11-25T09:55:32.967
> 
> 标签：windows-phone-7, pivot, swipe

我正在使用枢轴控件来显示大量图像（大约 300 张）。我想只使用 3 个枢轴项目，当用户滑动时，更改枢轴项目或更新项目源。但我不知道如何有效地做到这一点？

或者有没有办法像枢轴一样使用手势和刺激滑动效果？像过渡之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:33:03.753

您可以使用带有手势操作事件的普通图像控制来从左向右和从右向左滑动以查看上一张/下一张照片。

请在下面找到代码。

```
XAML Code 

  <!--ContentPanel - place additional content here-->
  <Grid x:Name="ContentPanel" Margin="0">        
     <Image Margin="0" x:Name="ImagePanel"  Source="{Binding SelectedPhoto.PhotoURL}" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center"/>
  </Grid>

C# code 
  public SlideShow()
     {
  // Tag ManipulationCompleted event for the current page in the constructor. 
    ManipulationCompleted += new EventHandler<ManipulationCompletedEventArgs>(SlideShow_ManipulationCompleted);
     }

    // ManipulationCompleted event. Update the Previous/next photo based on the swipe direction. 
 void SlideShow_ManipulationCompleted(object sender, ManipulationCompletedEventArgs e)
        {
            var manipEndPoint = e.TotalManipulation.Translation;
            const int threshold = 100;

            if ((manipEndPoint.X > _manipStartPoint.X) && ((manipEndPoint.X - _manipStartPoint.X) > threshold))
            {
                LoadPreviousPhoto();
            }
            else if ((manipEndPoint.X < _manipStartPoint.X) && ((_manipStartPoint.X - manipEndPoint.X) > threshold))
            {
                LoadNextPhoto();
            }
        } 
```

如果您需要更多帮助，请告诉我。

谢谢，卡马尔。

# extjs - 是否可以使用 ext js 组件作为 Dataview 的项目渲染器而不是使用 tpl？

> ID：13549951
> 
> 赞同：1
> 
> 时间：2012-11-25T09:56:43.960
> 
> 标签：extjs, itemrenderer, dataview

我对 Ext JS 3.4 有一些经验，我可以创建一个带有商店的 Dataview 并使用 tpl 来显示/渲染项目。

但我想要的是为 Ext Designer 中的布局创建一个项目渲染器（就像在 Flex 中一样）。并在 DataView 中重复此组件。我找不到有关 DataView 或 ListView 的项目渲染器的任何文档。

这个事情谁有经验？

问候，克里斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T18:32:14.643

哟可以做这样的事情：

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    renderTo: Ext.getBody(),
    height: 200,
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [{
        text: 'Name',
        dataIndex: 'name',
        renderer: theRender,
    }]
});

function theRender(value, id, record)
{
    var id = Ext.id();
    Ext.defer(myComponent, 10, this, [id, record.get('name')]);
    return '<div id="' + id + '"></div>';
}

function myComponent(id, value) {
    new Ext.Button({
        text: value,
        handler : function(btn, e) {
            alert('Hi ' + value);
        }
    }).render(document.body, id);
}​ 
```

这个想法是为每一行创建 div 元素并在这些元素中呈现您的组件。请在此处查看此工作示例：

[http://jsfiddle.net/lontivero/p8qDL/](http://jsfiddle.net/lontivero/p8qDL/)

我使用的是按钮组件，但您可以以同样的方式使用您自己的复杂组件。

祝你好运。

# objective-c - 连接到 sqlite 数据库

> ID：13549952
> 
> 赞同：0
> 
> 时间：2012-11-25T09:56:48.303
> 
> 标签：objective-c, xcode

嗨，新的 Iphone 程序员在这里

我正在尝试连接到我的 sqlite 数据库但遇到问题，我有 sqlite 库，并且我的支持文件夹中的数据库文件，当我加载模拟器时它没有连接

```
 (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *docsDir;
        NSArray *dirPaths;

         //Get the documents directory
         dirPaths =          NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);

  docsDir = [dirPaths objectAtIndex:0];

        //Builds the path to the database file
        databasePath = [[NSString alloc]
        initWithString:[docsDir                    stringByAppendingPathComponent:@"PetrolWatch.sqlite"]];

        NSFileManager *fileMgr = [NSFileManager defaultManager];

              if([fileMgr fileExistsAtPath:databasePath]== YES)
              {
               lblStatus.text = @"Path Exists";

              }
              else
              {
              lblStatus.text = @"Failed to open db";
              }

} 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:03:19.773

您正在文档目录中查找 SQLite 文件，尽管资源已加载到应用程序包中，然后手动复制到文档目录中。因为我没有看到将文件移出捆绑包的代码，所以可能`[[NSBundle mainBundle]pathForResource:]`是检查文件是否存在的更有效的方法（无路径 = 无资源）。

# php - 如何在php中使用if条件发布请求数据

> ID：13549953
> 
> 赞同：0
> 
> 时间：2012-11-25T09:56:52.230
> 
> 标签：php, html, if-statement, switch-statement

我在html中有三个输入框：

```
<input type='text' name='source' />
<input type='text' name='target' />
<input type='text' name='date' />
<input type='submit' name='submit' value='go' /> 
```

在此，我成功地从 mysql 检索了源数据和目标数据，但如果没有提供日期，那么我必须从数据库中检索最近 7 天的数据。我可以试试这个，并为选择查询创建了一个函数，但使用了七个变量并以表格形式构造它们。问题是我无法为所有这些设计合适的逻辑，

*   如果未提供日期，则检索源的 7 天数据

*   如果未提供日期，则为目标的 7 天数据

我可以尝试使用 if 和 elseif 条件，例如：

```
if (isset($_POST['source']) && empty($_POST['target'] && empty($_POST['date'] ) {

  //fired query function seven times with different dates through pass a query
  $init->get_result( $_POST['source'], date('Y-m-d') );

} 
```

select_query 的函数：

```
function get_result() {
   $query = "select count(*) from tablename where column=$_POST['source']";
   $this->select_query($query); //from there select query function called
}

function select_query($post, $date) {

$res = $mysqli->query($query);
$row->$res->fetch_row();

return $row[0];

} 
```

如果提供日期，则检索特定日期的数据，这一切都做得很好，但逻辑不好。我也使用表单操作作为 php_self 在同一页面上获取结果，但是当我在变量中使用结果并在 html 表中显示时，我必须给出一个条件，即在指定发布数据结果后显示，这没有完成。这很长，但问题对我来说非常关键。请看看这个。

**更新：**我在这段代码中从 php 中的数据库获取值：

```
if ( !empty( $_POST['source'] ) && empty( $_POST['target'] ) && empty( $_POST['date'] ) ) {

        echo '<table border=1>';

        echo '<tr>' . '<td>' ."<input type=submit name='tod' value=" . date( 'Y-m-d' )." >" . '</td>' . '<td>' . $adinit->get_req_data( $_POST['source'], date( 'Y-m-d' ) ) . '</td>' . '</tr>';
} 
```

我在 echo 语句中创建了一个输入按钮，它显示日期。我正在尝试在按钮上创建一个事件，该事件显示数据库中的另一个表格数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:03:52.097

您可以使用`strtotime()`功能：

```
if (isset($_POST['source']) && empty($_POST['target'] && empty($_POST['date'] ) {
    $time = strtotime('-7 days'); // or strtotime('-1 week') works too
    //fired query function seven times with different dates through pass a query
    $init->select_query( $_POST['source'], date('Y-m-d', $time) );
} 
```

附录：为了使用一天的时间间隔，您必须将查询更改为以下内容：

```
get_req_data($source, $date) { 
    $dateMax = date('Y-m-d', strtotime($date) + (60 * 60 * 24)); // + 1 days
    $query = "Select count(*) from tablename where time >= '$date' AND time <= '$dateMax'";
    ...
} 
```

这仅在`time`列是日期时间/时间戳类型时才有效。

# swi-prolog - SWI Prolog 使用 :-lib(ic)

> ID：13549958
> 
> 赞同：1
> 
> 时间：2012-11-25T09:57:39.000
> 
> 标签：swi-prolog

我是 prolog 的新手，我正在尝试来自网络的示例，但是关于 lib 有一个错误

```
:-lib(ic).

:-use_module(library(ic)). 
```

错误是

*目标（指令）失败：用户：lib（ic）*

*source_sink `library(ic)' 不存在*

如何在序言中使用它？我正在使用 SWI Prolog IDE。

# javascript - 如何使用带有函数指针的闭包？

> ID：13549960
> 
> 赞同：1
> 
> 时间：2012-11-25T09:57:45.730
> 
> 标签：javascript, closures

我的目标是在编写干净代码的同时使用闭包。我注意到的一件事是，不知何故，我总是以某种方式重复自己，因为在不止一种情况下需要我的一个匿名函数。

为此，我希望将这些重复的函数存储在一个对象中，以便以后重用。

现在，我的问题。我已经创建了这个示例[http://jsfiddle.net/tiagoespinha/tTx64/](http://jsfiddle.net/tiagoespinha/tTx64/)并且警报不会触发，因为`y`它是空的。

但是，如果我内联函数，一切正常[http://jsfiddle.net/tiagoespinha/tTx64/1/](http://jsfiddle.net/tiagoespinha/tTx64/1/)

有没有办法解决这个问题？我怎样才能让它在第一个例子中工作？变量`y`还在，为什么JS抓不到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:01:05.677

您希望对象具有自己的变量 (y) 和共享功能。

你真正需要的可能是原型。

```
function Holder() {
   this.y = 5;
   this.myFn();
}
Holder.prototype.myFn = function() {
    alert("The value of the closure var is " + this.y);           
}
new Holder(); 
```

我建议阅读[面向对象的 JavaScript 简介，](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)这样您就不会尝试仅使用闭包来重建 OOP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:03:54.423

```
//our constructor, each instance will carry a y of 5
function Proto() {
    this.y = 5;
}

//a shared function for all instances
Proto.prototype.returnedFn = function() {
    alert("The value of the closure var is " + this.y);
}

//just a wrapper for the new instance call.
//I just like it this way to avoid using "new" when making instances
function newFn() {
    //return a new instance
    return new Proto();
}

//test it out
newFn().returnedFn();
newFn().returnedFn(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T10:35:50.223

您的第一个示例需要某种**动态范围**才能工作。Javascript 是静态作用域的。

闭包允许函数从它定义的范围中捕获一些局部变量。`Holder.myFn`未在包含变量的范围中定义`y`。

另请注意，函数的每个实例都有自己的闭包。因此，不可能一次定义您的函数并让它`y`在不同的上下文中引用不同的 's。*（在您的第二个示例中，每次*调用时都会定义内部函数`newFn`，因此可以存在很多实例，每个实例都有自己的副本`y`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T13:53:21.603

我还将为我自己的问题添加一个答案以报告我的发现。

基于提供的其他解决方案并部分使用 OOP 解决方案，我找到了另一种也使用闭包的方法。

```
// Object prototype which takes an argument 
function MyObj(abc) {

    // Declare function using a closure
    // and thus being able to use the argument
    this.myFn = (function(){
        return function() {
            alert("abc is " + abc);
        };
    })();                
}

// Then we can simply create an object with the
// desired argument and the function will behave as expected
var v = new MyObj(10);
v.myFn(); 
```

我认为没有人提供此解决方案可能是因为我忽略了我真的不想将值本地存储在对象中。我只是想传入一些值，在一个函数中使用它们，然后摆脱该对象。

在这种情况下，我相信纯粹的 OOP 解决方案可能是矫枉过正。

无论如何，感谢您提出的所有解决方案！​</p>

# ruby - 如何从 ruby 脚本中引用本地 gem？

> ID：13549963
> 
> 赞同：16
> 
> 时间：2012-11-25T09:58:05.917
> 
> 标签：ruby, gem, bundler

我需要从普通的 ruby​​ 脚本中引用本地 gem，而不安装 gem。如何在[红宝石中引用本地宝石？](https://stackoverflow.com/questions/6444827/how-to-refer-a-local-gem-in-ruby)，我尝试使用以下设置创建一个 Gemfile：

```
%w(
  custom_gem
  another_custom_gem
).each do |dependency|
  gem dependency, :path => File.expand_path("../../#{dependency}", __FILE__)
end 
```

脚本如下所示：

```
require 'custom_gem'
CustomGem::Do.something 
```

当我执行此操作时：

```
bundle exec ruby script.rb 
```

我得到：

```
script.rb:1:in `require': cannot load such file -- custom_gem (LoadError) from script.rb:1:in `<main>' 
```

如果我省略 `require 'custom_gem'` ，我会得到：

```
script.rb:3:in `<main>': uninitialized constant CustomGem (NameError) 
```

我什至尝试不使用捆绑程序，只是`gem ... :path =>̣ ...`在脚本本身中编写，但没有结果。有没有其他方法可以从 ruby​​ 脚本中引用自定义 gem，而无需在本地安装 gem？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T10:20:42.660

确保您的 gem 名称与 Gemfile 中的相同（例如`custom_gem`）

```
# Gemfile

source "https://rubygems.org"

gem "custom_gem", path: "/home/username/path/to/custom_gem" 
```

不要忘记使用 bundler 实际安装这个 gem

```
bundle install 
```

之后，脚本应该可以使用了`bundle exec ruby script.rb`

```
# script.rb

require 'custom_gem'
CustomGem::Do.something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-22T20:15:51.107

在不使用 Gemfile 的情况下，您可以通过`bundle exec rake install`在 gem 的根目录中运行来安装 gem 的本地版本，然后您可以像任何其他已安装的 gem 一样引用它。

# php - 支付成功后如何从paypal获取交易明细

> ID：13549964
> 
> 赞同：4
> 
> 时间：2012-11-25T09:58:45.647
> 
> 标签：php, paypal

我发送到贝宝的数据是

```
"https://www.paypal.com/cgi-bin/webscr/cmd=_cart&upload=1&business=seller.email@something.com&currency_code=USD&bn=BusinessName&return=http://www.sellersite.com&item_number_1=55&item_name_1=battery&amount_1=55&quantity_1=2&item_number_2=52&item_name_2=bat&amount_2=5&quantity_2=3" 
```

付款成功后，我想在“http://www.sellersite.com”上向买家显示那些发送的数据（商品编号、商品名称、金额、数量）和贝宝交易 ID。（假设卖家有paypal的商家账户，他会从网站的管理部分将该paypal id输入数据库。所以，我不会考虑他的paypal账户设置，我的工作只是为paypal支付创建环境给卖家。）

如果我写一个脚本

```
$T_ID=$_REQUEST['tx']; // or $T_ID=$_GET['tx']; **ref(tx):- "https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_html_paymentdatatransfer"

$item=$_REQUEST['item_number_1']; // or $item=$_GET['item_number_1']; 
```

那么我会从贝宝获得这些数据吗？

请告诉我。

-谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:35:40.157

事情不会那么简单。您需要设置[付款数据传输 (PDT)](https://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/rec/pdt-techview-outside)，以便在买家完成付款后将详细信息发送回您的退货 URL。

如果您只是要向用户显示详细信息，这很有用，但不建议更新您自己的数据库、发送电子邮件通知等，因为无法保证此页面会被访问，因此代码不会t 总是运行。

对于这种事情，您需要使用[Instant Payment Notification (IPN)](https://www.paypal.com/ipn)。这与 PDT 非常相似，只是它总是将数据发布到您服务器上的 IPN 侦听器，无论用户是否将其返回到您的返回 URL，并且它一起发生在您的结帐系统之外。

# ruby-on-rails-3 - NoMethodError / 使用 form_for 时未定义的方法 `foobar_path'

> ID：13549967
> 
> 赞同：2
> 
> 时间：2012-11-25T09:58:56.890
> 
> 标签：ruby-on-rails-3

我正在使用 form_for 创建一个聊天室，当我查看页面时出现以下错误：

```
NoMethodError in Chatrooms#new 
undefined method `chatrooms_path' for #<#<Class:0xa862b94>:0xa5307f0> 
```

这是视图的代码，位于 app/views/chatrooms/new.html.erb 中：

```
<div class="center">
  <%= form_for(@chatroom) do |f| %>
    <%=f.text_field :topic%>
    <br>
    <%=f.submit "Start a discussion", class: "btn btn-large btn-primary"%>
  <% end %>
</div> 
```

这是相关的控制器：

```
class ChatroomsController < ApplicationController
  def new
    @chatroom = Chatroom.new
  end

  def show
    @chatroom = Chatroom.find(params[:id])
  end
end 
```

如果我换行

```
<%= form_for(@chatroom) do |f| %> 
```

到

```
<%= form_for(:chatroom) do |f| %> 
```

它工作正常。
我四处寻找类似的问题，但没有一个解决方案对我有用。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:00:48.850

这是因为您没有为`ChatroomsController`. 当您呈现`new`表单时，它默认指向创建操作，如果您想更改处理程序操作，请使用

```
form_for @chatroom, :url => some_other_path 
```

# hibernate - 从 Grails 中的 Hibernate 事件监听器获取调用动作和动作的参数

> ID：13549969
> 
> 赞同：0
> 
> 时间：2012-11-25T09:59:33.347
> 
> 标签：hibernate, grails, groovy

我想在 Grails 中为我的域类创建自定义注释以进行审计。我正在考虑收听休眠事件，然后保存那些带注释的类动作。

我仍然对如何获得调用此域类方法的操作以及它的参数有什么疑问？我怎么能得到它们？有任何想法吗？

谢谢， 费拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:49:59.630

您可以使用[RequestContextHolder](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/request/RequestContextHolder.html)访问当前的[GrailsWebRequest](http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/servlet/mvc/GrailsWebRequest.html)

```
GrailsWebRequest req = (GrailsWebRequest)RequestContextHolder.getRequestAttributes();
if(req != null) {
  log.info("controller = " + req.getControllerName());
} else {
  log.info("Not in a web request thread");
} 
```

`req.getParams()`如果您需要整个参数映射，您也有。

# jsf-2 - 如何在同一个耳朵项目中从一个项目访问本地接口到另一个项目

> ID：13549971
> 
> 赞同：0
> 
> 时间：2012-11-25T09:59:33.653
> 
> 标签：jsf-2, ejb, cdi

我有一个具有 FacesValidator 的 Web 项目，该验证器需要访问 EJB 服务来验证记录是否存在。不幸的是，我无法注入我的企业 bean，因为验证器不是托管 bean，所以我试图通过 InitialContext 访问它。我尝试了与[http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html](http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html)不同的组合，但失败了。

有效的是这种格式：

```
java:global/myProject-ear-1.0.0/myProject/MyService!com.czetsuya.myProject.service.membership.MyService, 
```

我的问题是可以简化吗？好像太长了

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T12:09:30.030

查看服务器日志。有点像样的 EJB 容器（至少 Glassfish 3 和 JBoss 6/7 是这样），在 EJB 部署步骤期间记录 EJB 的所有可用 JNDI 名称。如果验证器已正确放入 WAR 并且 EJB 具有`@Local`接口，那么最短的 JNDI 名称将是`java:app`在您的情况下应该是`java:app/myProject/MyService`.

一个完全不同的替代方案是将验证器改为 JSF 或 CDI 托管 bean，这样您就可以只使用`@EJB`注释。

```
@ManagedBean // Or @Named.
@ApplicationScoped // Provided that the instance doesn't have any state.
public class MyValidator implements Validator {

    @EJB
    private MyService myService;

    // ...
} 
```

`binding`并通过而不是引用它`validatorId`：

```
<f:validator binding="#{myValidator}" /> 
```

请注意，从 JSF 2.2 开始，您应该能够注入`@EJB`( `@FacesValidator`and `@FacesConverter`)。

### 也可以看看：

*   [如何使用@EJB、@PersistenceContext、@Inject、@Autowired 注入@FacesValidator](https://stackoverflow.com/questions/7572335/dependency-injection-in-facesvalidator-jsf-validation/7572413#7572413)

# java - 如何更改 JFrame 中组件的尺寸

> ID：13549976
> 
> 赞同：2
> 
> 时间：2012-11-25T10:00:49.327
> 
> 标签：java, swing, components, jframe, jpanel

假设我在 JFrame 中有一个 JPanel。当我调用更改该 JPanel 的首选大小的方法时，它不会更改。

代码看起来像这样：

```
public class SomePanel extends JPanel{

    public SomePanel(){
        setPreferredSize( new Dimension( 390, 40 ) );
        setBackground( Color.BLACK );
    }

    public void expand(){
        setPreferredSize( new Dimension( 390, 200 ) );
    }

    public static void main( String args[] ){
        JFrame frame = new JFrame();
        frame.setSize( 450, 500 );
        frame.setLayout( new FlowLayout() );

        SomePanel somePanel = new SomePanel();

        frame.add( somePanel );
        frame.setVisible( true );

        somePanel.expand();
    }
} 
```

有什么我必须先做的吗？我试过在调用 expand() 时检查 JPanel 的大小。JPanel 在设置首选大小之前和之后的高度保持在 40。

我也尝试过使用 Dimension 变量，但这也不起作用。

```
 Dimension dimension;

    public SomePanel(){
        dimension = new Dimension( 390, 40 );
        ...
    }

    public expand(){
        dimension.setSize( 390, 200 );
        setPreferredSize( dimension );
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:08:45.530

在您的方法中添加`frame.pack();`之后。将会完成。`somePanel.expand();``main()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T10:16:18.243

您需要`invalidate`容器层次结构以使其重新布局组件。

只需调用您已更改的组件，`invalidate`然后调用。`revalidate`

这是一个小例子......

```
public class TestComponentHierarcy {

    public static void main(String[] args) {
        new TestComponentHierarcy();
    }

    public TestComponentHierarcy() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(new Test());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class Test extends JPanel {

        private Dimension size = new Dimension(10, 10);

        public Test() {

            setLayout(new GridBagLayout());
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    size.width += 10;
                    size.height += 10;
                    invalidate();
                    revalidate();
                }
            });

        }

        @Override
        public Dimension getPreferredSize() {
            return size;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.RED);
            g.drawRect(0, 0, getWidth() - 1, getHeight() - 1);
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T12:57:19.803

对所有人 +1。

我通常使用以下组合：

`revalidate()`和`pack()`。（[请参阅@GagandeepBali 和@StanislavL 在此处回答有关我选择的更多理由`revalidate()`](https://stackoverflow.com/a/9511880/1133011)）因为[`pack()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)这允许我`JFrame`调整大小以适合内容。

*   不要调用`setPreferredSize`宁可覆盖`getPreferredSize`的`JPanel`.

*   也不要调用`setSize(..)`使用`JFrame`正确`LayoutManager`的方法来调整所有添加的组件大小，而不是`pack()`在设置`JFrame`可见之前简单地调用。

*   最后但没有强调足够的扭曲创建和在[`SwingUtilities.invokeXXX`块/事件调度线程中操作 Swing 组件](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

这是我做的一个例子：

基本上 a`JPanel`覆盖`getPreferredSize`并具有一个方法，该方法`setPanelSize(int w,int h)`更改实例中的变量`JPanel`以返回 new `Dimension`s for `getPreferredSize`。之后我打电话`revalidate()`并`pack()`反映`JFrame`变化：

![图 1](../Images/060ba377558ccd0dca492302c2b3679b.png)

![在此处输入图像描述](../Images/e5d88a1377a55522de5fe9ced9c21557.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {
        final JFrame frame = new JFrame();
        frame.setTitle("Test");

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final MyPanel myPanel = new MyPanel();
        final JButton changeSizeButton = new JButton("Change size to 300x300");

        changeSizeButton.addActionListener(new ActionListener() {
            boolean resized = false;

            @Override
            public void actionPerformed(ActionEvent ae) {
                if (resized) {
                    myPanel.setPanelSize(200, 200);
                    resized = false;
                    changeSizeButton.setText("Change size to 300x300");
                } else {
                    myPanel.setPanelSize(300, 300);
                    resized = true;
                    changeSizeButton.setText("Change size to 200x200");
                }

                frame.revalidate();
                frame.pack();

            }
        });
        frame.add(myPanel);
        frame.add(changeSizeButton, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);
    }
}

class MyPanel extends JPanel {

    private int width, height;

    public MyPanel() {
        super(true);
        width = 200;
        height = 200;
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    public void setPanelSize(int width, int height) {
        this.width = width;
        this.height = height;
    }
} 
```

# c++ - 从 C++ 容器中移除对象而不删除它们

> ID：13549985
> 
> 赞同：7
> 
> 时间：2012-11-25T10:01:55.017
> 
> 标签：c++, stdvector, 3d-engine

我正在使用 C++ 标准向量来存储渲染对象以实现简单的场景图实现。我需要能够在运行时从场景图中添加和删除渲染对象。添加不是问题，对于删除：阅读向量和其他文档C++ 容器似乎在弹出对象时调用了它们的析构函数。这不是我需要的，因为我希望稍后能够将这些对象重新添加到渲染循环中。这个问题的可能解决方案是什么？我忘记提及的重要细节 - 我正在使用指向渲染对象的指针向量。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T10:19:04.320

您似乎对对象实例的基本概念感到困惑。当您将某些内容添加到矢量时，您不会将其移动到其中，而是复制它：

```
vector<string> vec;
string s;
vec.push_back(s); 
```

`vec[0]`不是*，* `s`它是副本`s`。所以当你从向量中删除它时，`s`不会*受到*影响。

如果您不想要副本，则应改为使用指针。您可以将它们从向量中删除，并且不会调用它们指向的对象的析构函数。

编辑：好的，看来您已经在使用指针了。你说：

> 阅读矢量和其他 C++ 容器的文档，似乎在弹出对象时调用了它们的析构函数

那是真实的。当您从向量中删除指针时，指针将被破坏。这就是文档的意思。这并不意味着指针指向的对象正在被破坏：

```
vector<string*> vec;
string s;
vec.push_back(&s);
vec.pop_back(); 
```

`s`完全不受影响。被弹出操作破坏的是保存地址的指针，而`s`不是`s`它本身。

所以你没事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T10:21:45.800

您需要了解所有权才能使其正常工作。如果您使用的向量只是临时的并且仅用于观察对象，则只需使用点向量。

```
std::vector<object*> x; 
```

在销毁时，`vector`指向的对象不受影响。

如果您想共享所有权，请使用`boost::shared_ptr`或`std::shared_ptr`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T10:24:04.120

弹出指针时，不会调用析构函数。从概念上讲，即使是原始类型也有析构函数，以解释当它们超出范围时会发生什么。销毁指针向量与使一堆局部指针变量超出范围相同。

Reference-counted *smart pointers* are objects that overload the `*` and `->` operators to behave like pointers. They do implement the destructor to destroy the pointed-to object, thus implementing ownership. But for a scene graph, that's probably unnecessary.

# authentication - Websphere 基本身份验证不起作用

> ID：13549986
> 
> 赞同：0
> 
> 时间：2012-11-25T10:02:43.740
> 
> 标签：authentication, websphere, basic-authentication

我正在为基本的 http 身份验证而苦苦挣扎，但我还没有找到解决方案。这是我的步骤，请告诉我我错在哪里：

*   创建新策略集
*   将 HTTP 传输策略添加到此集合
*   创建一个新的提供者绑定
*   添加HTTP传输并指定客户端的用户名和密码（不知道这部分是否正确）
*   转到服务提供商并将策略和绑定附加到相关服务

当我使用 .NET 客户端（不在本地）测试我的服务时，它的行为就像没有身份验证一样。我错过了什么吗？

WAS 版本：7.0.0.25

现在谢谢你。恩拉

# iphone - 如果单元格是第一响应者并且不在屏幕上，则 UITableViewCell setEditing:animated 不会被调用

> ID：13549987
> 
> 赞同：2
> 
> 时间：2012-11-25T10:03:08.337
> 
> 标签：iphone, ios, xcode, cocoa-touch

我有一个 UITableViewCell 的子类，其中添加了 UITextField 以在编辑模式下编辑单元格的内容。在我的自定义单元格实现中，我已经像这样覆盖了 setEditing：

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    if ([self.textField isFirstResponder])
        [self.textField resignFirstResponder];
    NSLog(@"%@",self.textLabel.text);
    if (editing) {
        self.textLabel.hidden = YES;
        self.textField.hidden = NO;
    }else{
        self.textLabel.hidden = NO;
        self.textField.hidden = YES;
    }

    [super setEditing:editing animated:animated];
} 
```

当我第一次调用 setEditing 时会发生什么，它们都进入了编辑模式。但是，如果我尝试修改单元格并且如果该单元格离开屏幕并且我点击“完成”按钮，则该单元格仍处于编辑模式。只有已经离开屏幕的单元格。如果当我点击“完成”按钮时它在屏幕上可见，它就可以工作。

这是一个更好地描述问题的[视频：Dropbox 上的视频](https://www.dropbox.com/s/tfa3jiizwgco4db/bug-textfield.mov "Dropbox 上的视频")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T07:33:11.303

您可以通过实现以下内容在 UITableViewController 子类中解决此问题：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated{    
    [super setEditing:editing animated:animated];

    //since setEditing isn't called on cells that are offscreen do this to ensure the keyboard is dismissed.
    [self.view endEditing:editing];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T10:38:58.060

当文本字段离开屏幕时，您可以尝试关闭键盘

# javascript - 单击按钮时获取相同类的值但复选框的差异ID

> ID：13549989
> 
> 赞同：0
> 
> 时间：2012-11-25T10:03:23.017
> 
> 标签：javascript, jquery

单击#catDelete 时，我想获取复选框的值。

下面是html代码

```
<?php $i=1; do { ?>
<input type="checkbox" value="<?php echo $row_cat['cat']; ?>" class="checkboxcat" id="<?php echo $i; ?>"  name="catcheckbox" style="border:#cccccc 1px solid; background-color:#fff;"><?php echo $row_cat['cat']; ?>
<span id="CatDelete" style="position:relative; left:10px; color:#ff0000; font-size:10px;">Delete</span>
<?php $i++; } while ($row_cat = mysql_fetch_assoc($cat)); ?> 
```

jquery 代码 - 它给了我第一个复选框的值

```
$('#CatDelete').click(function(){
alert($('.checkboxcat').attr('id'));
}); 
```

任何帮助表示赞赏。搜索是否有重复的问题，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:08:17.633

您没有展示太多的结构，但看起来复选框是跨度之前的兄弟元素。如果是这样的话：

```
$("#CatDelete").click(function() {
    var val = $(this).prevAll('input').first().val();
    console.log(val);
}); 
```

从被点击的元素开始，通过兄弟姐妹寻找`input`元素，抓取第一个元素，并获取它的值。

但是您现在已经编辑了问题，说它处于循环状态。您**不能**拥有多个相同的元素`id`（“CatDelete”）。您需要更改跨度以使用类，然后更改上述内容以使用该类。因此，例如，如果您将其更改为使用“CatDelete”*类，则：*

```
// v--- Note the change
$(".CatDelete").click(function() {
    var val = $(this).prevAll('input').first().val();
    console.log(val);
}); 
```

[实时工作副本](http://jsbin.com/iboqev/1)| [来源](http://jsbin.com/iboqev/1/edit)

但我想我可能会稍微调整结构，这样你就不会像那样寻找兄弟元素。如果将每一对（复选框和按钮）放在一个容器中，例如 a `div`，您可以做一些更直接的事情来找到匹配的`input`：

```
var val = $(this).closest('div').find('input').val(); 
```

例如

```
$(".CatDelete").click(function() {
    var val = $(this).closest('div').find('input').val();
    console.log("The value for the checkbox is: " + val);
}); 
```

[实时工作副本](http://jsbin.com/iboqev/2)| [来源](http://jsbin.com/iboqev/2/edit)

# java - 如何在java中锁定一个向量，以便只有一个线程可以同时使用它？

> ID：13549996
> 
> 赞同：-1
> 
> 时间：2012-11-25T10:04:02.860
> 
> 标签：java, multithreading, swing

我有一个在多个线程之间共享的向量，当我尝试使用其中一个线程从该向量中读取时，我得到了 StreamCorruptedException。

这是异常的堆栈跟踪：

`java.io.StreamCorruptedException: invalid stream header: 7371007E at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:801) at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298) at prj.ReadThread.run(ReadThread.java:32`

在 prj.ReadThread.run 中产生此异常的代码行是

```
ObjectInputStream o = new ObjectInputStream(RS.getInputStream()); 
```

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:08:45.627

> 堆栈跟踪没有帮助吗？

异常似乎被抛出[`readStreamHeader()`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html#readStreamHeader%28%29)，您可以在调试器中单步执行。我怀疑[*版本号*](http://en.wikipedia.org/wiki/Java_class_file)不匹配。许多类都包含*警告：此类的序列化对象将与未来的 Xxx 版本不兼容。*

附录：@S Kh 有用地报告了以下内容：

> 问题是因为 Java 中的流。我正在从服务器上的唯一流（an）发送数据包`ObjectOutputStream`，但我每次在客户端通过`new ObjectInputStream`每个数据包从不同的流中接收数据。所以我得到了这个例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:12:11.937

默认情况下，向量是同步的。如果您在线程之间共享它们，请检查它们实际实现的同步策略是否足以使您的程序线程安全（因为某些同步的存在很少表明类的全面并发行为）

# javascript - 如何通过javascript将所有href链接附加到重定向器url

> ID：13549997
> 
> 赞同：1
> 
> 时间：2012-11-25T10:04:21.540
> 
> 标签：javascript, regex, url, location-href

我的几个页面中有以下 URL（http://something.com）..

```
<a href="http://something.com">Home</a>
<a href="index.html">Index</a>
<a href="about.html">About</a>
<a href="contact.php">Contact</a>
<a href="#">Same</a>
<a hre="http://example.com/home.html">New Home</a>
<a href="../services.html">Services</a> 
```

我想要的是将所有链接转换为...

```
<a href="http://this.com/?url=http://something.com">Home</a>
<a href="http://this.com/?url=http://something.com/index.html">Index</a>
<a href="http://this.com/?url=http://something.com/about.html">About</a>
<a href="http://this.com/?url=http://something.com/contact.php">Contact</a>
<a href="#">Same</a>
<a hre="http://this.com/?url=http://example.com/home.html">New Home</a>
<a href="../services.html">Services</a> 
```

所以基本上我不想转换`"#"`或`"../"`这样的链接。

我是 JS 的菜鸟。

在我的努力下，在 w3schools 的帮助下.. 我试图完成的事情：-

```
<script type="text/javascript">
var url= document.getElementByTagName(a);
var pattern = /..\//g;
var result = pattern.test(url);
if(url.href != "#" || result === "false" ) {
var nurl = url.replace("http://this.com/?url="+url.href, url.href);
}
</script> 
```

而且我无能为力...请帮助，我该如何修改 URL 并添加`http://this.com/?url=My_web_page_url_here`.

**更新** 我用

```
<script type="text/javascript">
var links = document.links;
var i = links.length;

while (i--) {
    if (links[i].href.slice(-1) == "#" || 
        links[i].getAttribute("href").slice(0, 3) == "../") {
        continue;
    }
    links[i].href = "http://this.com/?url=" + encodeURIComponent(links[i].href);
}​
</script> 
```

并且仍然所有 url 都以相同的方式没有附加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:08:15.633

试试这个...

```
var links = document.links;
var i = links.length;

while (i--) {
    if (links[i].href.slice(-1) == "#" || 
        links[i].getAttribute("href").slice(0, 3) == "../") {
        continue;
    }
    links[i].href = "http://this.com/?url=" + encodeURIComponent(links[i].href);
}​ 
```

[js小提琴](http://jsfiddle.net/Ks8ry/)。

我对参数进行了编码，但如果您不想对其进行编码，就像在您的示例中一样，请放弃对`encodeURIComponent()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:36:53.793

解决此问题的另一种方法是使用事件委托。此方法在使用链接时*（而不是之前）*重写 URL ：

```
window.onload = function(){

  var de = document.documentElement || document.body;
  /// an event listener that steps in at the point the user has
  /// clicked any element on the page. We specifically detect for
  /// links and redirect the outcome
  var proxyLink = function(e,t,href){
    /// handle old versions of IE
    e = e || Event; t = e.target || e.srcElement;
    /// hashs can occur at the end of external links, so am only checking
    /// your specific case. Switched to using getAttribute so as to get
    /// the original href string.
    if ( t.getAttribute('href').charAt(0) === '#' ) return;
    if ( t.getAttribute('href').indexOf('../') === 0 ) return;
    if ( String(t.nodeName).toLowerCase() == 'a' ) {
      if ( e.preventDefault ) { e.preventDefault(); }
      href = makeHrefAbsoluteIfPossible(t.href);
      window.location = 'http://this.com/?url='+encodeURIComponent(href);
      return (e.returnValue = false);
    }
  }

  /// add the listener to the body or document element, this will trigger
  /// the event onclick thanks to event bubbling.
  if ( de.addEventListener ) {
    /// handles modern browsers
    de.addEventListener('click', proxyLink, true);
  }
  else {
    /// handles old IE
    de.attachEvent('onclick', proxyLink)
  }

} 
```

我还创建了以下函数，以根据当前的`window.location`. 我永远不确定哪些浏览器会返回绝对 URL 或原始 href 文本，所以这个函数只是以防后者发生：

```
function makeHrefAbsoluteIfPossible( href ){
  var path;
  if ( href.indexOf(':') == -1 ) {
    if ( href.charAt(0) == '/' ) {
      path = href;
    }
    else {
      path = String(window.location.pathname);
      if ( path.indexOf('/') != -1 ) {
        path = path.substring(0,path.lastIndexOf('/')) + '/';
      }
      path += href;
    }
    return window.location.protocol +'://' +
      window.location.host + path;
  }
  return href;
} 
```

工作示例（使用警报而不是重定向）：

[http://jsfiddle.net/teykz/2/](http://jsfiddle.net/teykz/2/)

这种方法的好处是它可以与在运行时生成新的 html 内容的应用程序一起工作……这通常发生在 AJAX 驱动的系统中。此外，这些链接仍然对用户显示为原始链接*（这可能取决于您正在做什么）*。