# StackOverflow 问答 14181000-14181999

# android - 在drawable中修改png文件后，它仍然在手机运行中显示旧图标

> ID：14181004
> 
> 赞同：1
> 
> 时间：2013-01-06T09:52:59.580
> 
> 标签：android, mobile, icons

我开发了一个简单的程序，我想更改图标。这是更改每个可绘制文件夹中的 ic_launcher.png 文件的方法。

我在模拟器中编译，它可以运行良好。它更改了新图标。当我安装手机并运行时，它仍然显示旧图标。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:59:57.923

试试这个方法：

```
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name"> 
```

代替：

```
<application android:icon="@+drawable/ic_launcher" android:label="@string/app_name"> 
```

只需从`android:icon="@+drawable/ic_launcher"`.

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:50:48.947

更改所有可绘制文件夹中的图标：hdpi/mdpi/ldpi

您的手机可能是 hdpi 设备，您可能正在更改 ldpi 中的图标（例如）。清理您的项目并从设备中卸载旧的 apk 文件并重新安装新的 apk。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:50:56.890

如果您是更新应用程序而不是第一次安装，那么启动器图标将不会被替换。您需要完全卸载该应用程序并重新安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T09:55:44.933

你在其他手机上试过吗？问题可能出在缓存中，但我不确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T09:56:59.517

这真的很奇怪，但也许您只更改了一个图标，我的意思是您必须更改 res/drawable、res/drawable-hdpi、res/drawable-ldpi、res/drawable-mdpi、res 中的所有图标版本/drawable-xdpi

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-16T09:01:11.103

按照以下步骤解决此问题
1.卸载应用程序并重新启动手机 2.清理项目并构建项目 3.在手机中运行应用程序以查看应用程序的更改图标

# python - Python-在 CSV 文件中检查 Header 值和数据值是否相等

> ID：14181007
> 
> 赞同：-2
> 
> 时间：2013-01-06T09:53:30.623
> 
> 标签：python, csv, python-2.7

我只是对 CSV 文件有一些疑问。

**- 所有值都等于 Header。**

例如：-

abc.csv 文件包含

```
RollNO,Name,Age
1,Abc,15
2,Def,18 
```

有时发生了什么文件是这样来的

```
RollNO,Name,Age
1,Abc,15
2,Def,18,blabla,21 
```

在这种情况下，该值大于标头。那么我该如何检查这个东西。

**-检查空白页眉**

***aaa.csv***

```
RollNO,Name,Age, ,Address 
```

我必须检查标题中是否应该有空白。

**- 检查标题中是否没有特殊字符。**

***bbb.csv***

```
Rol$lNO,Name,Age,Address 
```

我还必须检查这件事，标题不应包含特殊字符。

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:24:39.820

```
import re    
csvfile = open('abc.csv','r')
csv = [line.split(',') for line in csvfile.readlines()] 
```

## 问题 #1：检查数据行是否比标题行长：

```
for i in csv[1:]:
    if len(i) > len(csv[0]):
        print("found a data row that is longer then the header row.") 
```

## 问题#2：检查是否有一个空的标题项：

```
blank = re.compile(r'\s*')
for i in csv[0]:
    if blank.match(i).end() == len(i):
        print("found an empty header item") 
```

## 问题#3：检查标题中是否有任何特殊字符：

```
charset = re.compile(r'\w*')
for i in csv[0]:
    if charset.match(i).end() != len(i):
        print("found a header item that contains special characters.") 
```

# c++ - C: 错误 C2784: 'bool std::operator <

> ID：14181008
> 
> 赞同：-4
> 
> 时间：2013-01-06T09:53:38.040
> 
> 标签：c++

我使用 Visual Studio 2010。

```
struct SPoint
{
    int id;
    int X;
    int Y;
};
////////////////
vector<SPoint> points;
vector<SPoint> chosen;
////////////////
void print_vect(const vector<SPoint> & vect)
{
    for (int i = 0; i < vect.size(); ++i)
    {
        cout << vect[i].id << " (" << vect[i].X << "," << vect[i].Y << ")"<<endl;               
    }               
    cout << endl;   
}
////////////////
print_vect(points); 
```

编译器显示：

```
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\algorithm(4674): error C2784: 'bool std::operator <(const std::move_iterator<_RanIt> &,const std::move_iterator<_RanIt2> &)' : could not deduce template argument for 'const std::move_iterator<_RanIt> &' from 'SPoint'
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\iterator(371) : see declaration of 'std::operator <' 
```

我在一个单独的项目中对此进行了建模：

```
struct SPoint
{   
    int X;
    int Y;
};

vector<SPoint> points;
vector<SPoint> selected;

void print_vector(const vector<SPoint> & points) {    
    for (int i = 0; i < points.size(); i++)
    {
        cout << '('<<points[i].X <<',' <<points[i].Y <<')'<< endl;
    }
    cout << endl;
}
int main ()
{
    SPoint temp = {0, 0};
    for (int i = 0; i < 11;i++)
    {
        temp.X = i;
        temp.Y = i;
        points.push_back(temp);
    }
    for (int i = 5; i< 11;i++)
    {
        temp.X = i;
        temp.Y = i;
        selected.push_back(temp);
    }

    print_vector(points);       
    system ("pause" );
  return 0;
} 
```

它完美地工作。我试图在这个问题上找到一些东西。他们说，编译器无法比较两个对象。将“<”方法添加到您的课程中。但到目前为止，我正在学习过程编程。然后，我的试用示例有效。为什么和做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:17:50.570

在您的代码中，`set_difference`调用`operator<`以比较点/选择的元素：

```
set_difference(points.begin(), points.end(),
    chosen.begin(), chosen.end(), back_inserter(cleared)); 
```

为了使您的代码编译，您需要重载`operator<`SPoint 类型，例如：

```
bool operator<(const SPoint& lhs, const SPoint& rhs)
{
  return lhs.id < rhs.id;
} 
```

# javascript - Javascript 对数组进行排序

> ID：14181018
> 
> 赞同：0
> 
> 时间：2013-01-06T09:54:18.100
> 
> 标签：javascript, arrays, selection

我正在尝试使用值和文本对选择选项进行排序，如下所示。文本可以有特殊字符，需要排序。但是我发现，一些特殊字符出现在字母之后。我首先想要所有特殊字符，然后是 Alphabets 。

```
c =    [["#test","#test"], ["?test", "?test"], ["test", "test"], ["TEst", "TEst"], ["]test", "]test"]]
    >>> c.sort()
    [["#test", "#test"], ["?test", "?test"], ["TEst", "TEst"], ["]test", "]test"], ["test", "test"]] 
```

问题似乎是 'TEst' 。

另一个简单的例子：

```
cool = ['#new','?new','[new',']new','NEw','&new','cool','ind']
["#new", "?new", "[new", "]new", "NEw", "&new", "cool", "ind"]
cool.sort()
["#new", "&new", "?new", "NEw", "[new", "]new", "cool", "ind"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:59:09.217

您可以将比较函数作为`.sort()`函数参数传递，例如

```
c.sort(function(a, b) {
    if (a.charCodeAt(0) <= 49) {
        return -1;
    }

    return a.localeCompare(b);
}) 
```

演示：http: [//jsfiddle.net/7DUEg/](http://jsfiddle.net/7DUEg/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T10:11:02.227

问题特别在于[ASCII 代码为 91-96 和 123-126](http://www.w3schools.com/tags/ref_ascii.asp)的字符，它们是标点符号或特殊字符，但其代码高于字母字符。所以你的排序功能需要考虑到这一点。

例如，您可以通过将这些字符映射到较低的 ASCII 字符来做到这一点。[http://jsfiddle.net/LGjnY/4/](http://jsfiddle.net/LGjnY/4/)

```
function transformString(s) {
  var r = '',
    code;
  for (var i = 0; i < s.length; i++) {
    code = s.charCodeAt(i);
    // map 91-96 onto 22-27
    if (code >= 91 && code <= 96) code -= 69; 
    // map 123-126 onto 28-31
    else if (code >= 123 && code <= 126) code -= 95; 
    r += String.fromCharCode(code);
  }
  return r;
}
c.sort(function (a, b) {
  return transformString(a[0]).localeCompare(transformString(b[0]));
}); 
```

或者结合比较和转换以使其更快（[jsfiddle](http://jsfiddle.net/LGjnY/6/)；未经过真正测试）

```
function compareTransformedStrings(a, b) {
    if (a == b) return 0;
    for (var i = 0, A, B; (A = a.charCodeAt(i)) && (B = b.charCodeAt(i)); i++) {
        if (A != B) {
            return A - (A >= 91 && A <= 96) * 69 - (A >= 123 && A <= 126) * 95
                < B - (B >= 91 && B <= 96) * 69 - (B >= 123 && B <= 126) * 95 
                ? -1 : 1;
        }
    }
    return a.length < b.length ? -1 : 1;
}
c.sort(function (a, b) {
    return compareTransformedStrings(a[0], b[0]);
}); 
```

# c# - 返回组合的有效方法

> ID：14181030
> 
> 赞同：1
> 
> 时间：2013-01-06T09:56:23.120
> 
> 标签：c#, algorithm, combinations

我正在编写一个多人游戏，其中每个玩家必须与他组中的每个玩家只玩一次。即，如果您有 3 名玩家：Joe、Mary 和 Peter，这些将是组合：Joe & Mary、Joe & Peter 和 Mary & Peter。

计算轮数的代码非常简单。由于轮数等于n！/r！* (n - r)！其中 n 等于玩家人数，r 等于 2（因为游戏每轮有 2 名玩家进行）。

```
 public int factorial(int n)
 {
      if (n == 0)
          return 1;
      return n * factorial(n - 1);
 }

 public int calcNoOfRounds()
 {
      return factorial(noOfPlayers) / (factorial(2) * factorial(noOfPlayers -2));
 } 
```

但是，我坚持要产生一种有效的方式来返回实际的玩家组合。我尝试了以下代码。它可以工作，但是它太手动了，而且有些事情我想改进。在这段代码中，我将 p1 vs p2、p2 vs p3、p3 vs p4 ... p(n-1) vs p(n) 配对。然后我从第 3 名球员开始，将这些球员与上述所有球员进行匹配，除了他们之前的球员，即 p3 vs p1、p4 vs p1、p4 vs p2、p5 vs p1、p5 vs p2、p5 vs p3 等。 . 你觉得我能做得更好吗？

```
 public void calcPlayerCombinations()
 {
     List<string> playerNames = new List<string>();

     for (int i = 0; i < noOfPlayers; i++)
     {
          playerNames.Add(players[i].PlayerName);
     }

     for (int i = 0; i < noOfPlayers - 1; i++)
     {
          playerCombinations.Add(playerNames[i] + " " + playerNames[i + 1]);
     }

     for (int j = 3; j <= noOfPlayers; j++)
     {
          int counter = 1;

          do
          {
             playerCombinations.Add(playerNames[j -1] + " " + playerNames[counter -1]);
             counter++;

          } while (counter != (j - 1));
     }
 } 
```

我不喜欢这样，因为如果游戏真的在玩，你会希望同一个玩家连续玩 6 场比赛吗？我可以随机选择一个组合进行一轮是的，但我仍然想知道一个更好的方法以供将来参考。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:01:05.210

Why would you not just pair each player (as "first" in a pairing) with each player later than them (as "second")? For example:

```
public static IEnumerable<string> PairPlayers(List<string> players)
{
    for (int i = 0; i < players.Count - 1; i++)
    {
        for (int j = i + 1; j < players.Count; j++)
        {
            yield return players[i] + " " + players[j];
        }
    }
} 
```

(Obviously you can do this eagerly too, should you wish.)

It's possible that I've misinterpreted the requirements though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:31:20.940

此示例显示如何将玩家列表用作队列。当一名球员上场后，他们会被排在后面，并且最不可能再次被选中。它还展示了如何做 Jon Skeet 所做的但渴望（没有`yield`）。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace SOPlayersOrder
{
    class Program
    {
        /// <summary>
        /// Represents a match up between two players.
        /// It is tempting to use strings for everything, but don't do it,
        /// you'll only end up having to split those strings and you will
        /// not benefit from type safety.
        /// </summary>
        public class MatchUp
        {
            public string Player1 { get; set; }
            public string Player2 { get; set; }

            public override string ToString()
            {
                return string.Format("{0} vs {1}", Player1, Player2);
            }
        }

        public static IEnumerable<MatchUp> PairPlayers(List<string> players)
        {
            var results = new List<MatchUp>();
            for (int i = 0; i < players.Count - 1; i++)
            {
                for (int j = i + 1; j < players.Count; j++)
                {
                    var matchup = new MatchUp { Player1 = players[i], Player2 = players[j] };
                    //yield return matchup; //this is how Jon Skeet suggested, I am showing you "eager" evaluation
                    results.Add(matchup);
                }
            }
            return results;
        }

        public static IEnumerable<MatchUp> OrganiseGames(IEnumerable<string> players, IEnumerable<MatchUp> games)
        {
            var results = new List<MatchUp>();
            //a list that we will treat as a queue - most recently played at the back of the queue
            var playerStack = new List<string>(players);
            //a list that we can modify
            var gamesList = new List<MatchUp>(games);
            while (gamesList.Count > 0)
            {
                //find a game for the top player on the stack
                var player1 = playerStack.First();
                var player2 = playerStack.Skip(1).First();
                //the players are in the order of least recently played first
                MatchUp matchUp = FindFirstAvailableGame(playerStack, gamesList);
                //drop the players that just played to the back of the list
                playerStack.Remove(matchUp.Player1);
                playerStack.Remove(matchUp.Player2);
                playerStack.Add(matchUp.Player1);
                playerStack.Add(matchUp.Player2);
                //remove that pairing
                gamesList.Remove(matchUp);
                //yield return matchUp; //optional way of doing this
                results.Add(matchUp);
            }
            return results;
        }

        private static MatchUp FindFirstAvailableGame(List<string> players, List<MatchUp> gamesList)
        {            
            for (int i = 0; i < players.Count - 1; i++)
            {
                for (int j = i + 1; j < players.Count; j++)
                {
                    var game = gamesList.FirstOrDefault(g => g.Player1 == players[i] && g.Player2 == players[j] ||
                                                             g.Player2 == players[i] && g.Player1 == players[j]);
                    if (game != null) return game;
                }
            }
            throw new Exception("Didn't find a game");
        }

        static void Main(string[] args)
        {
            var players = new List<string>(new []{"A","B","C","D","E"});
            var allGames = new List<MatchUp>(PairPlayers(players));

            Console.WriteLine("Unorganised");

            foreach (var game in allGames)
            {
                Console.WriteLine(game);
            }

            Console.WriteLine("Organised");

            foreach (var game in OrganiseGames(players, allGames))
            {
                Console.WriteLine(game);
            }

            Console.ReadLine();
        }
    }
} 
```

# xcode - 集合视图单元格不允许我选择

> ID：14181034
> 
> 赞同：0
> 
> 时间：2013-01-06T09:56:39.043
> 
> 标签：xcode, collectionview

这可能是一个非常容易解决的问题；我一直在阅读无数的论坛和教程，似乎无法找到答案。

在我的应用程序中，我有一个弹出集合视图来选择特定选项并返回一个值...

但是它不会突出显示或选择？我可以看到 NS 日志输出从不显示选择或数据传递。

这是我的代码...

集合.h 文件

```
@interface collection : UICollectionViewController <UICollectionViewDataSource,     UICollectionViewDelegate>

@property (nonatomic, retain) NSArray  *counterImages;
@property (nonatomic, retain) NSArray  *descriptions;
@property (nonatomic, weak)   UILabel *graniteselect;
@property (nonatomic, retain) UIPopoverController* _collectionPopOver;
@property (nonatomic) BOOL clearsSelectionOnViewWillAppear; // defaults to YES, and if    YES, any selection is cleared in viewWillAppear:
@property (nonatomic) BOOL allowsSelection;

@end

implementation file:

#pragma mark UICollectionViewDataSource

-(NSInteger)numberOfSectionsInCollectionView:
(UICollectionView *)collectionView
{
return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView
numberOfItemsInSection:(NSInteger)section
{
return _descriptions.count;

}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView
             cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
MyCell *myCell = [collectionView
                                dequeueReusableCellWithReuseIdentifier:@"MyCell"
                                forIndexPath:indexPath];

UIImage *image;
int row = [indexPath row];

image = [UIImage imageNamed:_counterImages[row]];

myCell.imageView.image = image;

myCell.celltext.text= [_descriptions objectAtIndex:row];

return myCell; 
```

}

```
- (void)collectionView:(UICollectionView *)collectionView performAction:(SEL)action        forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender
{
_graniteselect.text = [_descriptions objectAtIndex:row];
 [self._collectionPopOver dismissPopoverAnimated:YES];

NSLog(@"Setting Value for Granite Select"); 
```

}

```
- (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:    (NSIndexPath *)indexPath {
// TODO: Deselect item
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
RoleDetailTVC *destination =
[segue destinationViewController];

destination.graniteselect = _graniteselect;

NSLog(@"Passing Data to RoleDetailTVC");

}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T12:10:53.107

这里有很多问题。首先，我认为您混淆了选择的委托方法。该方法仅适用于特殊菜单弹出框，与选择单元格*本身*`collectionView:performAction:forItemAtIndexPath:withSender:`无关。你需要在你的委托中实现的是：

 *```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"Selected cell at index path %@", indexPath);
} 
```

现在你只是在实现**取消选择**回调。

除此之外，还要确保您的图像视图中的`UICollectionViewCell`触摸已启用，否则您可能会阻止触摸事件到达单元格并且它不会触发任何委托调用。我希望这会有所帮助！*

# php - 使用基于用户选择的 PHP 变量预填充 Web 表单

> ID：14181037
> 
> 赞同：0
> 
> 时间：2013-01-06T09:57:00.150
> 
> 标签：php

我有一个从 $_GET 函数生成的 Web 表单。

我想从使用 PHP 传递的数据中填充此 Web 表单中的一些输入字段。

有什么想法我该怎么做吗？

谢谢

## 这是PHP（它成功地传递了用户选择的行中的变量，呸！）

```
<html>
<?php
    require_once 'config.php';
    $dbh = new PDO($dsn, $dbuser, $dbpass);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $id = $_GET['id'];
    $sth = $dbh->prepare('
        SELECT a_aif.aif_id,
          a_aif.fee_source_id,
          a_aif.company_name_per_sedar,
          a_aif.document_filing_date
        FROM  a_aif
        WHERE a_aif.fee_source_id = :id');
    $sth->bindParam(':id', $id, PDO::PARAM_STR);
    $sth->execute();
    $result = $sth->fetch(PDO::FETCH_ASSOC);
?>

<form action="submit_data.php" method="get" autocomplete="on">

<?php
    echo implode ( ', ', $result);
    echo "<br>";
?> 
```

**这是我想包括公司名称的地方**

```
Company Name:<input type="text" name="coname" value="<?php $result[a_aif.company_name_per_sedar];?>"><br> 
```

和表格的其余部分......

```
Year-End:<input type="date" name="year-end"><br>
Auditor:<input list="auditor" name="auditor"><br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:20:49.830

我想，你只是错过了`echo`

```
<input type="text" name="coname" value="<?php echo $result['a_aif.company_name_per_sedar'];?>"> 
```

# html - 无法将表格中的复选框向左对齐

> ID：14181042
> 
> 赞同：4
> 
> 时间：2013-01-06T09:57:55.727
> 
> 标签：html, css

我在表格中有一个复选框，我无法将它们对齐到左侧。

```
<tr>
<td colspan="3" class="cb">
    <input type="checkbox" name="cb" value="checked" /> this is a checkbox
</td>
</tr>

table.all td.cb{
color: #424242;
border:1px solid black;
margin:0 auto;
text-align:left;
} 
```

我尝试了很多东西，但结果是这样的：

![在此处输入图像描述](../Images/cc270d13819e5e8405e5a380f678cb00.png)

我为演示目的应用了边框。

如果我添加 float:left，我会得到：

![在此处输入图像描述](../Images/f0319042597a8b369584dee5c37747f9.png)

我在另一个运行良好的网页中使用了相同的代码（该表只有 2 列）。

**解决方案**：

我的 .css 文件中已经有了这个，尽管 colspan="3" 奇怪地导致了这个问题

```
table.all td input{
width:90%;
float:left;
} 
```

我把它改成

```
table.all td input.i{
width:90%;
float:left;
} 
```

并将 class="i" 添加到所有其他输入类型，现在它工作正常。

如有必要，整个表格：

```
<div id="container_center">
            <form>
                <table class="minden">
                    <tr>
                        <td colspan="3">
                            <p class="title">Create new account</p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <p class="title2">Enter account holder information</p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <div id="container_jobb_content_vonal"> </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p>First name: *</p>
                        </td>
                        <td colspan="2">
                            <p>Last name: *</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" name="firstname" size="45">
                        </td>
                        <td colspan="2">
                            <input type="text" name="lastname" size="45">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p>Email: *</p>
                        </td>
                        <td colspan="2">
                            <p>Email again: *</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" name="email" size="45">
                        </td>   

                        <td colspan="2">
                            <input type="text" name="email2" size="45">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p>Address 1: *</p>
                        </td>
                        <td colspan="2">
                            <p>Address 2:</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" name="address1" size="45">
                        </td>

                        <td colspan="2">
                            <input type="text" name="address2" size="45">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p>Country: *</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select name="country" class="sel_country">
                                <option value="">[Please Select]</option>
                                <option value="United States">United States</option>
                                <option value="United Kingdom">United Kingdom</option>
                                <option value="Germany">Germany</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p>City: *</p>
                        </td>
                        <td>
                            <p>State/Province: *</p>
                        </td>
                        <td>
                            <p>Zip code: *</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" name="city" size="45">
                        </td>
                        <td>
                            <input type="text" name="state" size="30">
                        </td>
                        <td>
                            <input type="text" name="zip" size="10" class="zip">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p>Phone number: *</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" name="phone" size="45">
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <p class="title3">Create your login</p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <div id="container_jobb_content_vonal"> </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p>Username: *</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" name="username" size="45">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p>Password: *</p>
                        </td>
                        <td>
                            <p>Confirm password: *</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" name="password" size="45">
                        </td>
                        <td colspan="2">
                            <input type="text" name="password2" size="45">
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <p class="title3">Accept terms</p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <div id="container_jobb_content_vonal"> </div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3" class="cb">
                            <input type="checkbox" name="cb" value="checked"/>this is a checkbox
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <ul>
                                <li><a href="termsofservice.html">Terms of service</a></li>
                                <li><a href="privacypolicy.html">Privacy policy</a></li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td class="submit" colspan="3">
                            <input type="submit" name="purchase" value="Purchase" id="submitbutton"> 
                        </td>
                    </tr>
                </table>

            </form>
            </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T15:27:31.660

您也可以通过从输入样式中排除复选框来完成此操作。例如，我在使用这个 CSS 时遇到了类似的问题：

```
 input {
        width: 300;
    } 
```

并通过更改为：

```
 input:not([type="checkbox"]) {
        width: 300;
    } 
```

# objective-c - 核心数据，重复和删除的 RSS 条目

> ID：14181043
> 
> 赞同：0
> 
> 时间：2013-01-06T09:58:09.450
> 
> 标签：objective-c, ios, cocoa-touch, core-data, rss

我一直在研究 RSS 阅读器，使用核心数据进行缓存。像很多人一样，我想避免重复条目，这导致我提出了[这个](https://stackoverflow.com/questions/3185885/prevent-duplicates-when-importing-rss-feed-to-core-data)问题，也是[这个](https://stackoverflow.com/questions/9656244/how-to-prevent-core-data-making-duplicates-in-ios-5/10344505#10344505)问题。但是，我还想要一件事，我也想给用户删除文章的能力，并且在刷新提要时避免再次添加已删除的文章，即如果删除的文章仍然存在于提要中。因此，我目前的解决方案是，要在我的托管对象上下文中使用已删除文章的唯一标识符（我如何识别提要中的每个项目）维护另一个实体，我只需将要删除的文章的标识符添加到该实体, 并对其进行检查。

现在，这是我为完成上述所有操作而编写的一段代码。在解析过程中，每次解析提要中的新项目时都会运行此代码。

```
 dispatch_queue_t checkQueue = dispatch_queue_create("com.feedreader.backgroundchecking", NULL);

    dispatch_async(checkQueue,^{
        NSMutableArray *mutablesortedArticles = [NSMutableArray arrayWithArray:self.feeds.sortedArticles];

        if (!mutablesortedArticles) {
            // Handle the error.
        }

        if ([[mutablesortedArticles valueForKey:@"identifier"]
             containsObject:article.identifier]) {
            NSLog(@"This article already exists");
            return;
        }else {
            NSMutableArray *mutabledeletedArticles = [NSArray arrayWithArray:self.alldeletedArticles];

            if (!mutabledeletedArticles) {
                // Handle the error.
            }

            if ([mutabledeletedArticles valueForKey:@"identifier"]
                 containsObject:article.identifier]) {
                NSLog(@"This article has been deleted");
                return;
            }else {
                Article *newArticle = [NSEntityDescription insertNewObjectForEntityForName:@"Article" inManagedObjectContext:self.managedObjectContext];

                newArticle.title = article.title;
                newArticle.date = article.date;
                newArticle.link = article.link;
                newArticle.summary = article.summary;
                newArticle.image = article.image;
                newArticle.identifier = article.identifier;
                newArticle.updated = article.updated;
                newArticle.content = article.content;
                newArticle.feed = self.feed;

                dispatch_async(dispatch_get_main_queue(),^{
                    NSError *error = nil;
                    [self.managedObjectContext save:&error];
                    if (error) {
                        NSLog(@"%@", error);
                    }
                });
            }
        }
    }); 
```

self.feeds.sortedArticles 和 self.alldeletedArticles 都是在解析开始之前从托管对象上下文中获取的。

我的问题开始于运行此代码时，UI 冻结 1-2 秒（我尝试使用在托管对象上下文中有超过 500 篇文章的提要）。所以，我想我的问题是，有没有一种更有效的方法来做我想做的事情，希望不会冻结 UI？也许是处理已删除文章的更好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:58:47.750

我的第一个建议是通过向*Article*实体添加“itemDeleted”属性来处理已删除的文章。然后，在插入新项目时，您只有一个要检查的对象列表。

（*提示：*不要将该属性称为“已删除”。`isDeleted`是 的内置属性`NSManagedObject`，因此可能会导致名称冲突。）

*下一个建议是仅在导入所有*项目之后才保存托管对象上下文，而不是在每个项目之后（**编辑：**另请参阅 Caffeine 的答案，这是在我写这篇文章时发布的。）

最后，单独搜索所有文章列表中的每个新项目是一种无法很好扩展的模式。[在“Core Data Programming Guide”中高效地实现 Find-or-Create](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW4)描述了一种可能更好的模式：

*   对于要插入的项目列表，执行获取请求，获取该列表中已经存在于数据库中的所有项目，
*   并行遍历新项目列表和获取列表，以找出哪些项目是真正新的并且必须插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:48:51.760

UI 冻结可能是`[self.managedObjectContext save:&error]`由于将所有对象写入磁盘需要几秒钟。在 iOS 5+ 中，一个很好的解决方案是嵌套上下文。有关更多详细信息，请参阅此博客文章[http://www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)特别是末尾的异步保存部分。

# mongodb - 如何为 mongodb 设置永久 dbpath

> ID：14181047
> 
> 赞同：6
> 
> 时间：2013-01-06T09:58:45.210
> 
> 标签：mongodb

我知道需要先启动 mongo db，然后才能与之交互。但是我不明白为什么我每次都设置dbpath？我以为我们只需要配置一次该路径。我对么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:07:56.843

您可以通过两种方式解决此问题：

*   将您的 dbpath 更改为将指向的硬编码路径`/data/db/`
*   或者制作一个启动脚本，它实际上会为您调用 MongoDB 实例

正如我在上一点中所说，您可以编写一些脚本来为您执行此操作，例如：

```
=== rnMongo.sh ===
./mongod --dbpath 
```

然后使用一个命令：

```
./rnMongo.sh 
```

或者作为一个新贵的工作：

```
# mongodb - Mongo Starter
author "lol"
description "Starts the MongoDB servers"

start on started network-services

#expect fork
exec /home/ubuntu/mongodb/bin/mongod --auth
#echo "Mongodb is now running";
#exit 0;
#stop
stop on runlevel [016]

#pre-stop 
```

类似的东西

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-16T21:37:42.700

只需将 mongod --dbpath /home/user/mongodb 添加到您的启动应用程序；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-22T10:54:17.490

sudo mongod --port portnumber --dbpath /path 到你的文件夹

默认设置为 sudo mongod --port 27017 --dbpath /var/lib/mongodb

# .net - WCF on Azure can't hit SQL Azure database

> ID：14181048
> 
> 赞同：1
> 
> 时间：2013-01-06T09:58:48.757
> 
> 标签：.net, wcf, entity-framework, azure, azure-sql-database

Doing a very small test, [Source Code](https://dl.dropbox.com/u/14486902/StackOverflow/WCFNoHitDatabase.rar)

I have a database (SQLAzure) and I use EF5.

In my project I create :

*   A "Cloud" project with a "WCF WebRole"
*   A test project to test my DB on the local computer
*   A test project to test my WCF service deployed

My Service has 2 methods :

*   The first named `Hello` just return the string "hello"
*   The second return an `int`, this `int` is the number of record of a table

I test in local, the WCF Service, no problem for both methods.

On Azure :

*   I creates a SQLAzure database, I set the tables and data and I can join the database from "SQL Management studio 2012"
*   A web site named "Pointage"

From VS2012 :

*   I published ("Publish to Azure") the WebRole project (named in the project "PointageOnAzureWcfWebRole"), I can see the service : [enter link description here](http://pointage.azurewebsites.net/Service1.svc?singleWsdl)
*   When I test (using AzureOnline.Test), the method `Hello()`, return the right value and no error but when I try `NumberOfUser()`, I get this error :

*System.ServiceModel.FaultException : The server was unable to process the request due to an internal error. For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework SDK documentation and inspect the server trace logs.*

The connectionsgtring is correct, I use the same than the one in "SQL Management Studio", the name is the same than the web.config

I really don't understand what's happen. Something wrong in the Azure configuration ("Windows Azure manager") ? The dashboard look like this :

![enter image description here](../Images/3d389994f8ec35e8a9dc4a09af019eac.png)

**Update1 :**

```
<configuration>

    <system.serviceModel>

      <bindings>
        <basicHttpBinding>
          <binding name="BasicHttpBinding_IService1"
                   hostNameComparisonMode="StrongWildcard"
                   receiveTimeout="00:10:00"
                   sendTimeout="00:10:00"
                   openTimeout="00:10:00"
                   closeTimeout="00:10:00"
                   maxReceivedMessageSize="65536"
                   maxBufferSize="65536"
                   maxBufferPoolSize="524288"
                   transferMode="Buffered"
                   messageEncoding="Text"
                   textEncoding="utf-8"
                   bypassProxyOnLocal="false"
                   useDefaultWebProxy="true" >
            <security mode="None" />
          </binding>
        </basicHttpBinding>
      </bindings>

      <client>
        <endpoint address="http://pointage.azurewebsites.net/Service1.svc"
                  binding="basicHttpBinding" 
                  bindingConfiguration="BasicHttpBinding_IService1"
                  contract="PointageOnAzureOnlineService.IService1" 
                  name="BasicHttpBinding_IService1" />
      </client>
    </system.serviceModel>

</configuration> 
```

**Update2 :**

The connection string is set when I publish the service

![enter image description here](../Images/32e2020e867c1afbfb817635ba2cffbd.png)

# django - How to use Backbone collection's create method correctly

> ID：14181049
> 
> 赞同：1
> 
> 时间：2013-01-06T09:58:52.290
> 
> 标签：django, backbone.js

I found that when I use the collection.create to create a new model, backbone will send a post request, but the post data is incorrect for example collection.create({name:'test'}) backbone will send POST data using "{name:'test'}" as key, and "" as value, but I want the POST data by using name as key, 'test' as value, can anybody no how to setting it,

I use django as the server

thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:41:08.247

除非您更改主干的集合，否则使用 Backbone.sync 与您的后端进行通信。

他们在文档中说：

> 使用默认实现，当 Backbone.sync 发送一个保存模型的请求时，它的属性将被传递，序列化为 JSON，并在 HTTP 正文中以 content-type application/json 发送

所以我想你需要在你的 django 视图中做这样的事情

```
json.load(request.POST) 
```

或使用不将数据序列化为 json 的自定义同步函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T22:44:15.960

您还可以设置

```
Backbone.emulateJSON = true; 
```

根据[http://backbonejs.org/#Sync-emulateJSON](http://backbonejs.org/#Sync-emulateJSON)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T23:30:53.803

您需要解析原始帖子数据字符串并将其解析为 python dict。

```
import json
data = json.loads(request.raw_post_data) 
```

# javascript - Jquery two api calls to retrieve different dynamic elements inside two nested $.each loops

> ID：14181052
> 
> 赞同：0
> 
> 时间：2013-01-06T09:59:37.660
> 
> 标签：javascript, jquery, json, api, loops

I have one api link that contains the top elements. From each element, I need to build the end of a second api call which will give me the rest of the elements I need and pull them out.

Let say the first json is (urlphonebrands) that contains 3 phone brands (Apple, Samsung & Nokia). The second json call depends on each brand name, like urlphonebrands/Nokia, or urlphonebrands/Samsung or urlphonebrands/Apple built automatically.

I need to loop through each brand name to get properties such as colors, battery life and size. But each color has another loop of choices, as for example, black, white, red. My end result will be,

```
Apple
    battery life: 
        6h
    color: 
        blue 
        black
Samsung: 
    battery life: 
        6h
    color:
        blue 
        black
Nokia:
    battery life: 
        3h
    color: 
        blue 
```

While I am able to loop through each top element successfully I can only retrieve the last color element of the first item, which indicates that I built the second loop incorrectly. Went a few hours through it and figured I could use some help. This is what I have,

```
$.getJSON("urlphonebrands", function(data){

    var brandBlock = data[0]['name'];

    $.each(data, function(index, brandBlock){

        var brand = brandBlock.name;

        $('#table').append('<tr><td>' + brand + '</td></tr>');

        //It works fine until this point

        $.getJSON("phonebrandsurl" + brand, function(data){

            $.each(brand, function (index2, brand){

                var color = data[0].name[0].color;

                $('#table').append('<tr><td>' + color + '</td></tr>');

            });

        });

    });

}); 
```

Which gives me something like,

```
Apple
    blue
    blue
Samsung
    blue
    blue
Nokia
    blue 
```

This is the console.log output after the second api call,

```
[Object]
0: Object
brand: Array[17]
0: Object
battery life: "6h"
colors: Object
color: "blue" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:21:31.810

尝试将第二个包装`getJSON`到匿名函数中并将品牌作为参数传递::

```
(function(brand){
  $.getJSON('phonebrandsurl' + brand, function(data){
  // ...
}(brand)) 
```

# jquery - jquery tabs, jpages "Syntax error, unrecognized expression: ?"

> ID：14181053
> 
> 赞同：0
> 
> 时间：2013-01-06T09:59:38.283
> 
> 标签：jquery

I'm using two popular technologies, jquery tabs and jPages. Unfortunately the target below does not seem to be cooperating. Can this be fixed in the current setup for the three pages I've put below?

```
$("div.holder").jPages({containerID : "card-row"}); 
```

Page 1 (using jquery tabs):

```
<script>
$(function() {
    $( "#tabs" ).tabs({
        beforeLoad: function( event, ui ) {
            ui.jqXHR.error(function() {
                ui.panel.html(
                    "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                    "If this wouldn't be a demo." );
            });
        }
    });
});
</script>
<div id="tabs">
    <ul><li><a href="pages/page-2.php">Your Collection</a></li>
    </ul>
</div> 
```

Page 2 (uses ajax):

```
<script>
$(document).ready(function(){
    $.get("/pages/page-3.php",{}, function(data, statusTxt){
        $('#collection-table .search-results').html(data);
    });
});
</script>
<div id="#collection-table">
    <div class="search-results">
    <!-- get page 3 contents-->
    </div>
</div> 
```

Page 3:

```
<script type="text/javascript" src="../scripts/jquery.js"></script>
<script type="text/javascript" src="../scripts/jpage.js"></script>
<script>
  $(function(){
    $("div.holder").jPages({
      containerID : "card-row",
      previous : "?",
      next : "?",
      perPage : 20,
      delay : 20
    });
  });
</script>
<div class="holder">
<!-- pagination pages-->
</div>
<tbody id="card-row">
<!--rows-->
</tbody> 
```

# c# - Video player in C#

> ID：14181060
> 
> 赞同：-4
> 
> 时间：2013-01-06T10:00:07.873
> 
> 标签：c#, .net, video

What is the best way to make a video player using C# so that we can take the required snapshot by using button.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:02:17.987

its not easy to make pure video player in c#, btw you have to you use c++ libraries, anyway best is to find a library, vlc has some dll to inject it in your c# application. [Here](https://stackoverflow.com/questions/7382793/does-vlc-media-player-have-a-c-sharp-interface) is more info..
Hmm if you want just snapshot by code.. now its more different, you can use [EmguCv](http://www.emgu.com/wiki/index.php/Main_Page) for that. Its opencv wrapper for .net.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T10:14:36.830

我所知道的最好的一个是[DirectShow.NET](http://www.codeproject.com/Articles/2615/DirectShow-NET)，它非常易于使用，并且允许您截取屏幕截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T10:14:54.450

最简单的方法是在**WinForms中**

[使用 Windows Media Player 控件 在 Microsoft Visual Studio](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564585%28v=vs.85%29.aspx)
[中使用 Windows Media Player 控件 在 C# 解决方案中嵌入 Windows Media Player 控件](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562851%28v=vs.85%29.aspx)

**编辑：**要捕获屏幕截图，请查看此讨论
[从视频中捕获帧](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/994554ec-219e-4090-9ddf-befd51bd4912)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T11:27:40.633

您可以使用 WPF MediaElement。要拍摄快照，您可以使用 RenderTargetBitmap 从 MediaElement 捕获当前视频帧。请参阅此[链接](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/51a67a51-9880-40ec-9a42-38a547c5392c/)。

# facebook - Facebook Plugin to show visitors comments on Facebook Page

> ID：14181064
> 
> 赞同：-1
> 
> 时间：2013-01-06T10:01:23.507
> 
> 标签：facebook, plugins, comments, review

Which Facebook plugin do i need to use for my website,that would let visitors make comments/reviews and those comments are shown on my Facebook Business page.

I have already tried the Comments Plugin but that is showing the comment to the person profile that has left the review.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:37:09.873

好吧，如果您使用的是 Wordpress，您可以使用 Facebook 自己提供的 Wordpress 插件。另一个机会是您没有使用 Wordpress，那么您需要为此开发自己的应用程序，或者您可以使用第三方应用程序。您可能会发现这里有一个不错的应用程序： [链接](http://www.faceitpages.com/facebook-application/embed-website/)

# sql - 仅连续 3 个月的 SQL 记录

> ID：14181076
> 
> 赞同：4
> 
> 时间：2013-01-06T10:03:01.887
> 
> 标签：sql, sql-server, date-arithmetic

我有 emp 表。出勤表：

```
emp_No Absent_Date
-------------------
111     01/03/2012
111     05/05/2012
222     13/02/2012
222     01/03/2012
222     02/03/2012
222     29/04/2012
222     09/09/2012
333     15/05/2012
333     18/09/2012
333     19/09/2012 
```

我需要返回如下行：

```
emp_No Absent_Date
-------------------
222     13/02/2012
222     01/03/2012
222     02/03/2012
222     29/04/2012 
```

因为只有 emp 222 连续 3 个月缺席。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T15:41:58.230

您要做的是按连续月份对缺勤进行分组。让我假设您正在使用支持`dense_rank()`函数和基本窗口函数的合理数据库。

这个想法是按顺序找到缺勤的月份。然后，计算每个员工在每个序列中的月数，并保留超过三个月的月数。

查询通过将月份转换为月份数来实现这一点——年份加上月份的 12 倍。然后它使用一个简单的观察。月份数字减去数字序列是一个常数，对于连续的月份。通常，我`row_number()`用于序列。因为您在一个月内重复缺勤，所以我使用`dense_rank()`.

```
select emp_no, absent_date
from (select a.*,
             max(monthnum) over (partition by emp_no, groupnum) as lastmonth,
             min(monthnum) over (partition by emp_no, groupnum) as firstmonth
      from (select a.*,
                   monthnum - dense_rank() over (partition by emp_no order by monthnum) as groupnum
            from (select a.*,
                         year(a.absent_date)*12+month(a.absent_date) as monthnum
                  from Attendance a
                 ) a
           ) a
     ) a
where lastmonth - firstmonth >= 2 
```

最后，因为您想要缺勤日期——而不仅仅是员工人数——我使用窗口函数找到第一个月和最后一个月，并将它们的差异用作过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T10:09:37.750

我想最简单的方法是对表进行三次自联接，每次将日期加 1 个月：

```
SELECT DISTINCT S1.emp_No
FROM attendance_sheet S1
JOIN attendance_sheet S2
ON S1.emp_No = S2.emp_No
AND Month(S1.Absent_Date + 1 MONTH) = Month(S2.Absent_Date)
AND Year(S1.Absent_Date + 1 MONTH) = Year(S2.Absent_Date)
JOIN attendance_sheet S3
ON S2.emp_No = S3.emp_No
AND Month(S2.Absent_Date + 1 MONTH) = Month(S3.Absent_Date)
AND Year(S2.Absent_Date + 1 MONTH) = Year(S3.Absent_Date) 
```

这将为您提供所有独特`emp_No`的。现在要获得您想要的结果，您必须进行另一个联接（`IN`为了便于阅读，我将分别使用）：

```
SELECT * 
FROM attendance_sheet
WHERE emp_No IN (
  SELECT S1.emp_No
  FROM attendance_sheet S1
  JOIN attendance_sheet S2
  ON S1.emp_No = S2.emp_No
  AND Month(S1.Absent_Date + 1 MONTH) = Month(S2.Absent_Date)
  AND Year(S1.Absent_Date + 1 MONTH) = Year(S2.Absent_Date)
  JOIN attendance_sheet S3
  ON S2.emp_No = S3.emp_No
  AND Month(S2.Absent_Date + 1 MONTH) = Month(S3.Absent_Date)
  AND Year(S2.Absent_Date + 1 MONTH) = Year(S3.Absent_Date)
) 
```

请参阅[SQL Fiddle](http://sqlfiddle.com/#!2/fc8c6/3)尝试（我不得不将月份添加语法从标准 SQL 更改为 MySQL）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:10:37.820

试试这个代码：

```
SELECT DISTINCT * FROM
(
SELECT  E1.Attendance _No,
        E1.Absent_Date
FROM Attendance  E1
JOIN Attendance  E2
ON E2.Attendance _No = E1.Attendance _No
AND MONTH(E2.Absent_Date)  = MONTH(E1.Absent_Date) + 1
JOIN Attendance  E3
ON E3.Attendance _No = E2.Attendance _No
AND MONTH(E3.Absent_Date) = MONTH(E2.Absent_Date)  + 1

UNION ALL

SELECT  E2.Attendance _No,
        E2.Absent_Date
FROM Attendance  E1
JOIN Attendance  E2
ON E2.Attendance _No = E1.Attendance _No
AND MONTH(E2.Absent_Date)  = MONTH(E1.Absent_Date) + 1
JOIN Attendance  E3
ON E3.Attendance _No = E2.Attendance _No
AND MONTH(E3.Absent_Date) = MONTH(E2.Absent_Date)  + 1

UNION ALL

SELECT  E3.Attendance _No,
        E3.Absent_Date
FROM Attendance  E1
JOIN Attendance  E2
ON E2.Attendance _No = E1.Attendance _No
AND MONTH(E2.Absent_Date)  = MONTH(E1.Absent_Date) + 1
JOIN Attendance  E3
ON E3.Attendance _No = E2.Attendance _No
AND MONTH(E3.Absent_Date) = MONTH(E2.Absent_Date)  + 1

) A 
```

# c++ - 在 Qt 中为 QGraphicsObject/QGraphicsItem 设置动画

> ID：14181079
> 
> 赞同：1
> 
> 时间：2013-01-06T10:03:22.027
> 
> 标签：c++, qt, animation

**情况**：上层类`dialog`生成带有正方形的栅格。玩家坐在 (0,0) 处，当用户点击正方形时，寻路算法会`pathFind`生成`QString`玩家必须采取的方向才能达到此目标。然后`QString`将 转换为 的数组`int`。

`dialog`从名为 movePlayer 的类中调用一个函数，该函数`mysquare`应该将玩家移动到正确的方向。

*这个动作不应该是瞬间发生的，而是以一定的速度发生的，这就是为什么我试图为每个动作设置动画，所以它需要一定的时间。*

然而，我的**问题**是玩家广场根本没有移动。有时，当我单击网格外的某个位置时，它会捕捉到结束位置。奇怪的。

*MySquare 类（玩家）*

```
 MySquare::MySquare(int x,int y, int w, int h){
        curX = x;
        curY = y;

    initX = x;
    initY = y;
    width = w;
    height = h;
    posAnimation.setPropertyName("getGridPos");
    posAnimation.setTargetObject(this);
}

bool MySquare::movePlayer(int direction){
    switch (direction){
    case 0: //move right
        curX+=width;
        break;
    case 1: //move up
        curY+=height;
        break;
    case 2: //move left
        curX+=-width;
        break;
    case 3: //move down
        curY+=-height;
        break;
    }
    //setPos(curX,curY);
    QPoint p;
    p.setX(curX);
    p.setY(curY);

    setGridPos(p);
    update();
    return true;
}

void MySquare::setGridPos(QPoint myPos) {
    posAnimation.setStartValue(pos());
    posAnimation.setDuration(2000); // 2 seconds
    posAnimation.setEndValue(myPos);
    posAnimation.start();
}

QPoint MySquare::getGridPos() const {
    return pos();
} 
```

*MySquare 标头（玩家）*

```
 class MySquare : public QGraphicsObject
    {
        Q_OBJECT
        Q_PROPERTY(QPoint getGridPos READ getGridPos WRITE setGridPos) // define meta-property "pos"s
    public:
    QPropertyAnimation posAnimation;
    MySquare(int x,int y,int h, int w);
    QRectF boundingRect() const; //outer most edges of the object
    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget);
    bool movePlayer(int direction);
public slots:
    QPoint getGridPos() const; // getter
    void setGridPos(QPoint p); // setter

signals:
    void targetChanged(int x, int y);

private:
    int curX,curY,height,width,initX,initY;
    void mousePressEvent(QGraphicsSceneMouseEvent *event);
    void mouseReleaseEvent(QGraphicsSceneMouseEvent *event);
    void keyPressEvent(QKeyEvent *event);
    void mouseMoveEvent(QGraphicsSceneMouseEvent *event);
}; 
```

编辑：

*   我在 setGridPos 中添加了一些 qDebug，它们都会立即打印出来；这告诉我脚本没有阻止动画，这可能是问题的一部分。

编辑2：

*   当我只调用一次 movePlayer 函数时，它似乎有效；

edit3：我觉得它可能会使用动画组来解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:29:32.617

使用`QSequentialAnimationGroup`.

从我第二次调用 movePlayer 开始，动画停止工作。我不得不重写`dialog`aswel 的某些部分：现在不再一一给出方向，而是通过向量传递。我希望我没有使用“新”添加任何内存泄漏，但我认为没有任何方法可以解决它。

```
 void MySquare::movePlayer(std::vector <int> directions){
        QSequentialAnimationGroup *group = new QSequentialAnimationGroup;
        //determine direction
        //& add each element to the group
        QPoint startPosition;
        startPosition.setX(pos().x());
        startPosition.setY(pos().y());

        for (int i=0; i<directions.size(); i++){
            int direction = directions[i];
            switch (direction){
            case 0: //move right
                curX+=width;
                break;
            case 1: //move up
                curY+=height;
                break;
            case 2: //move left
                curX+=-width;
                break;
            case 3: //move down
                curY+=-height;
                break;
            }

            QPoint endPosition;
            endPosition.setX(curX);
            endPosition.setY(curY);

            QPropertyAnimation *animation = new QPropertyAnimation(this,"getGridPos");
            animation->setStartValue(startPosition);
            animation->setDuration(1000); // 1 seconds
            animation->setEndValue(endPosition);
            group->addAnimation(animation); ////add animatons to a QSequentialAnimationGroup
            //delete animation;

            //update startPosition for next loop
            startPosition.setX(endPosition.x());
            startPosition.setY(endPosition.y());
        }
        qDebug() << "start animation group" << endl;
        group->start();
        update();
        //delete group;
    } 
```

# python - URL 重写 - Google App Engine (Python)

> ID：14181085
> 
> 赞同：2
> 
> 时间：2013-01-06T10:04:43.177
> 
> 标签：python, google-app-engine, url, rewrite

我按照教程为我计划在 Google App Engine (Python) 上托管的网站创建漂亮的 URL。

问题是它不会在子目录中显示索引页。

我有一个名为 abc.html 的文件，它可以在这个地址 http://**www.testsite.com/abc**

 **但是我在子目录（xyz 和 123）中有索引文件，这些文件不会加载到内容区域（内容区域中的空白）

带有 index.html 的子目录 xyz： [http ://www.testsite.com/xyz](http://www.testsite.com/xyz)

子目录 123 与目录 xyz 内的 index.html： [http ://www.testsite.com/xyz/123](http://www.testsite.com/xyz/123)

这是我使用的代码

**应用程序.yaml**

```
application: testsite
version: 1
runtime: python
api_version: 1
threadsafe: yes

default_expiration: "1d"

handlers:
- url: /(.*\.(gif|png|jpg|ico|js|css|swf|xml))
  static_files: \1
  upload: (.*\.(gif|png|jpg|ico|js|css|swf|xml))

- url: /.*
  script: main.py 
```

**主文件**

```
import os
    from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.ext.webapp import template

class MainPage(webapp.RequestHandler):
   def get(self, p):
      if p:
         page = p + ".html"
      else:
         p = "main"
         page = p + ".html"

          if not os.path.exists(page):
         page = "404.html"

      template_values = {
            "page" : page,
                p: "first", 
      };

      path = os.path.join(os.path.dirname(__file__), 'index.html')
      self.response.out.write(template.render(path, template_values))

application = webapp.WSGIApplication([(r'/(.*)', MainPage)],debug=True)

def main():
   run_wsgi_app(application)

if __name__ == "__main__":
   main() 
```

**索引.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>TestTitle</title>
   <link href="/static/style.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
   <div id="header">
            <ul>
                <li><a href="main">Home</a></li>
                <li><a href="abc">abc</a></li>
                <li><a href="xyz/123">xyz</a></li>
            </ul>
   </div>

   <div id="content">
      <!-- this is where content will be loaded -->

      {% if page %}
         {% include page %}
      {% else %}
         {% include "main.html" %}
      {% endif %}

   </div>

   <div id="sidebar">
      TestSideBar
   </div>

   <div id="footer">
      TestFooter
   </div>
</body>
</html> 
```

PS：我遵循的教程是动态页面+ URL重写指南。动态页面方面并不是真正需要的。我只是找不到可以让漂亮的 URL 工作的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:30:33.173

首先，您的 app.yaml 或 main.py 是错误的。由于 Python27 是更现代的运行时，我建议它是 app.yaml，我建议使用以下 app.yaml：

```
application: testsite
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: .*
  script: main.application 
```

然后你在子目录中谈论名为 index.html 的文件，但它们无法在任何地方访问。相反，您访问“xyz.html”和“xyz/123.html”。

请尝试以下代码片段：

```
 if p:
            page = os.path.join(p, "index.html")
        else:
            p = "main"
            page = "main.html" 
```

顺便说一句：您应该考虑模板继承而不是包含标签！**

# python - python中的正则表达式与％

> ID：14181088
> 
> 赞同：0
> 
> 时间：2013-01-06T10:05:07.607
> 
> 标签：python, regex

一般来说，我是正则表达式的新手，但我找不到关于`%`char 的特殊规则。

我执行以下操作：

```
line = parseFileHandle.readline()
while 1:
    line = parseFileHandle.readline()
    if not line:
        break
    # test for string '%%?'
    match = re.match("%%?", line)
    if match:
        print (line) 
```

`%`但是，它会打印出任何以char开头的行。那不是我想要的。

最后我想以这种形式找出文件中的文件名（myfile.tex）

```
%%?  file: myfile.tex 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T10:06:40.130

问题不在于`%`. 它`?`具有特殊含义：它使第二个`%`可选。因此，您的正则表达式将匹配`%`and `%%`。

以下正则表达式应该可以工作：

```
match = re.match("%%[?]", line) 
```

如果您在行首进行搜索`%%?`，则不需要正则表达式。以下将实现相同的目标：

```
if line.startswith("%%?"): 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T10:09:07.303

`.startswith()`在这种情况下可能是最好的功能。您在这里不需要正则表达式。

此外，您似乎正在以一种有点奇怪的方式读取文件。通常的语法是：

```
with open('filename.txt', 'r') as handle:
    for line in handle:
        if line.startswith('%%?'):
            print(line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:20:45.423

可以使用正则表达式从列表中提取文件名：

```
exp = re.compile("^%%\?  file: ([^ \n]+)$")
with open('filename.txt', 'r') as myfile:
    for line in myfile:
        match = exp.match(line)
        if match:
            print(match.group(1)) 
```

正如其他人指出的那样，您需要`?`在最初的尝试中转义该字符 - 因为它在正则表达式中具有特殊含义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T10:07:11.167

```
if line.startswith('%%?'):
   # do something 
```

很可能是你想要的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T10:26:21.260

`?`在正则表达式中是量词和手段：

> ***`?`*** 匹配前一个元素零次或一次。

对于匹配`?`字符，您必须使用`\?`(字符转义) 或`[?]`(字符组)

# terminology - 16 位和 32 位的名称

> ID：14181090
> 
> 赞同：10
> 
> 时间：2013-01-06T10:05:46.053
> 
> 标签：terminology, conventions, bits

8位称为“字节”。16位怎么称呼？“短的”？“单词”？

那么32位呢？我知道“int”依赖于 CPU，我对普遍适用的名称感兴趣。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-06T10:19:49.607

*字节*是计算机可以处理的最小数据单位。C 语言定义`char`为一个“字节”并且有`CHAR_BIT`位。在大多数系统上，这是 8 位。

*另一方面*，通常是由 CPU 处理的值的大小。大多数时候，这是通用寄存器的大小。这个定义的问题是，它的年龄不够大。

例如，MS Windows`WORD`数据类型是在早期定义的，当时 16 位 CPU 是标准。当 32 位 CPU 出现时，定义仍然存在，一个 32 位整数变成了`DWORD`. 现在我们有了 64 位`QWORD`的 s。

远非“普遍”，但这里有几种不同的看法：

[**窗户**](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx)：

*   `BYTE`- 8 位，无符号
*   `WORD`- 16 位，无符号
*   `DWORD`- 32 位，无符号
*   `QWORD`- 64 位，无符号

[**广发银行**](http://www.delorie.com/gnu/docs/gdb/gdb_56.html)：

*   字节
*   半字（两个字节）。
*   字（四个字节）。
*   巨字（八字节）。

[**`<stdint.h>`**](http://www.unix.com/man-page/posix/7posix/stdint.h/)：

*   `uint8_t`- 8 位，无符号
*   `uint16_t`- 16 位，无符号
*   `uint32_t`- 32 位，无符号
*   `uint64_t`- 64 位，无符号
*   `uintptr_t`- 指针大小的整数，无符号

（也存在有符号类型。）

如果您尝试编写依赖于特定数据类型大小的可移植代码（例如，您正在实现网络协议），请**始终**使用`<stdint.h>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T10:07:55.883

一组正好 8 位的正确名称实际上是一个[octet](https://en.wikipedia.org/wiki/Octet_%28computing%29)。一个[字节](https://simple.wikipedia.org/wiki/Byte)可能多于或少于 8 位（尽管这种情况比较少见）。

除此之外，据我所知，16 位、32 位等没有严格定义的术语。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T10:14:27.423

Werner Buchholz 博士创造了字节这个词来表示“一个数字信息单位，用于描述一组有序的位，作为计算机可以处理的最小数据量”。因此，该词的实际含义取决于相关机器的架构。因此，一个字节中的位数是任意的，可以是 8、16 甚至 32。

有关该主题的详尽论文，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Byte)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T10:18:55.200

16 位或 32 位测量单位没有通用名称。

术语“字”用于描述程序或操作系统一次处理的位数。因此，在 16 位 CPU 中，字长为 16 位。在 32 位 CPU 中，字长为 32 位。我也相信这个术语有点灵活，所以如果我编写一个程序，它以 10 位的块进行所有处理，我可以将这些 10 位的块称为“单词”。

只是要清楚; “int”不是计算机内存的度量单位。它实际上只是用于存储整数的数据类型（即小数部分为零的数字）。因此，如果您找到一种在您的编程语言中仅使用 2 位（或其他）实现整数的方法，那仍然是一个 int。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T10:08:13.147

我曾经将它们称为字节、字和长字。但正如其他人所提到的，它取决于您正在处理的本机架构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T10:08:23.877

它们被称为2字节和4字节

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-06T10:09:32.287

16 位和 32 位没有任何通用术语。单词的大小取决于机器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-06T10:17:02.973

`short`，`word`并且`int`都依赖于编译器和/或架构。

*   `int`是一种数据类型，**通常**在桌面 32 位或 64 位系统上为 32 位。我认为它永远不会大于底层硬件的寄存器大小，因此它应该始终是一种快速（并且通常足够大）用于常见用途的数据类型。
*   `short` **那么可能**尺寸更小`int`，这就是你所知道的。实际上，它们**通常是**16 位的，但您不能依赖它。
*   `word`不是数据类型，而是表示底层硬件的自然寄存器大小。

而关于 16 位或 32 位的名称，则没有。没有理由给它们贴上标签。

# java - JTextarea 没有使用 miglayout 垂直增长

> ID：14181091
> 
> 赞同：4
> 
> 时间：2013-01-06T10:05:51.170
> 
> 标签：java, swing, textarea, notepad, miglayout

这是使用 miglayout 在 swing 中使用简单记事本的代码。我使用 span 和 grow 来填充水平空间，但 fill 和 grow 不能用作行约束。为什么？我希望 textarea 以最小和最大尺寸填充所有可用空间，但这并没有发生。下面是代码：

```
import javax.swing.*;
import net.miginfocom.swing.MigLayout;
import java.awt.*;
import java.awt.event.*;
public class Notepad{
JFrame jf;
JMenuBar jmbar;
JMenu jm1,jm2;
JMenuItem jmnew,jmopen,jmsave,jmexit;
JMenuItem jmselect,jmpaste,jmcopy,jmcut;
Notepad(){
    jf=new JFrame("Notepad");
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jf.setLayout(new MigLayout("debug,fill","","[push,grow]"));

    /*Toolkit tk = Toolkit.getDefaultToolkit();  
    int xSize = ((int) tk.getScreenSize().getWidth());  
    int ySize = ((int) tk.getScreenSize().getHeight());  
    jf.setSize(xSize,ySize);  */
    jf.setExtendedState(Frame.MAXIMIZED_BOTH);

    createTextArea();
    createMenu();
    //JTextArea txt=new JTextArea("", 0,0,);
    jf.setMinimumSize(new Dimension(600,400));
    jf.setVisible(true);
}
void createMenu(){
    jmbar=new JMenuBar();
    jm1=new JMenu("File");
    jmnew=new JMenuItem("New");
    jmopen=new JMenuItem("Open");
    jmsave=new JMenuItem("Save");
    jmexit=new JMenuItem("Exit");
    jmexit.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent ae){
            System.exit(0);
        }
    });
    jm1.add(jmnew);
    jm1.add(jmopen);
    jm1.add(jmsave);
    jm1.addSeparator();
    jm1.add(jmexit);
    jmbar.add(jm1);

    jm2=new JMenu("Edit");
    jmcut=new JMenuItem("Cut");
    jmcopy=new JMenuItem("Copy");
    jmpaste=new JMenuItem("Paste");
    jmselect=new JMenuItem("Select All");

    jm2.add(jmcut);
    jm2.add(jmcopy);
    jm2.add(jmpaste);
    jm2.add(jmselect);
    jmbar.add(jm2);
    jf.setJMenuBar(jmbar);

}
void createTextArea(){
    JTextArea textArea = new JTextArea("", 10,40);
    JScrollPane textScroll = new JScrollPane(textArea,    JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
            JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

    textArea.setFont(new Font("Century Gothic", Font.BOLD, 12));
    jf.add(textScroll,"grow,span,wrap");
}
public static void main(String s[]){
    SwingUtilities.invokeLater(new Runnable(){
        public void run(){
            new Notepad();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:23:14.417

对我来说看起来像一个错误：将包装从组件约束移动到布局约束似乎使它的行为符合预期。

```
jf = new JFrame("Notepad");
jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
jf.setLayout(new MigLayout("debug, fill, wrap 1", "", ""));
// add a label to better see the cell vs. component size
// fills as expected without component wrap
jf.add(new JLabel("nothing"), "grow");
// bug: doesn't fill vertically with component wrap
//jf.add(new JLabel("nothing"), "grow, wrap");
jf.setSize(800, 600);
jf.setVisible(true); 
```

这可能（或没有，没有挖掘）与[去年夏天报告的问题有关](http://migcalendar.com/forums/viewtopic.php?f=8&t=3836)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:06:29.927

看起来确实应该如此，我没有看到任何竞争组件。

无论如何，`jf.add(textScroll,"w 100%, h 100%,span,wrap");`都会起作用，尽管您可能需要修剪一些像素以防止它剪裁框架装饰（即`jf.add(textScroll,"w 100%-10, h 100%-10,span,wrap"`），尽管我不认为需要修剪。

# java - 在使用 JLayeredPane 调试简单的 Swing 应用程序时需要帮助

> ID：14181095
> 
> 赞同：0
> 
> 时间：2013-01-06T10:06:27.167
> 
> 标签：java, swing, graphics, awt, graphics2d

我正在尝试开发一个如下所示的摇摆应用程序：-

![在此处输入图像描述](../Images/1648a08b732933c81981067d08069ed8.png)

（可以在[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)找到此应用程序的演示）

黑色方块随着光标的移动而移动。ComboBox 条目选择堆栈中的最顶层，在移动过程中方块将出现在该层之上，但在剩余的下一个顶层之下。

我几乎完成了它，但是当鼠标移动时黑色方块（图像）正在振动（运动不流畅），并且它的运动仅限于小区域并且它没有在完整的分层窗格上移动。也没有改变的效果ComboBox 或 CheckBox 中的设置。

这是代码：-

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class JLayeredPaneDemo implements ActionListener, MouseMotionListener{
private String layerString[]={"Red(0)","Yellow(1)","Blue(2)","Green(3)","Orange(4)"};
private Color layerColors[]={Color.RED,Color.YELLOW,Color.BLUE,Color.GREEN,Color.ORANGE};
JComboBox jcb;
JCheckBox jcheck;
JLayeredPane layeredPane;
ImageIcon img;
JLabel cursor;

public static void main(String args[])
{
SwingUtilities.invokeLater(new Runnable(){public void run(){new JLayeredPaneDemo();}});
}

public JLayeredPaneDemo()
{
JFrame frame=new JFrame("JLayeredPane Demo");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setLayout(new GridLayout(2,1));

frame.add(createControlPanel());
//frame.add(Box.createRigidArea(new Dimension(0, 10)));
frame.add(createLayeredPane());

try
{
    img=new ImageIcon(ImageIO.read(new File("src/watermark.png")));
}catch(IOException e){System.out.println("ERROR LOADING IMAGE :"+ e);}
cursor=new JLabel(img);
cursor.setBounds(45,45,img.getIconWidth(),img.getIconHeight());
cursor.addMouseMotionListener(this);
layeredPane.add(cursor,new Integer(2),0);

frame.pack();
frame.setVisible(true);
}

public JPanel createControlPanel()
{
JPanel panel=new JPanel();
panel.setBorder(BorderFactory.createTitledBorder("Select the Settings"));

jcb=new JComboBox(layerString);
jcb.setSelectedIndex(0);
jcb.setActionCommand("LAYER_SETTING");
jcb.addActionListener(this);

jcheck=new JCheckBox();
jcheck.setSelected(true);
jcheck.setActionCommand("FRONT_BACK");
jcheck.addActionListener(this);

panel.add(jcb);
panel.add(jcheck);

return panel;
}

public JLayeredPane createLayeredPane()
{
layeredPane=new JLayeredPane();
layeredPane.setBorder(BorderFactory.createTitledBorder("Layered Pane : Move Your Mouse"));
layeredPane.setPreferredSize(new Dimension(300,310));

Point origin=new Point(20,20);
int offset=35;

for(int i=0;i<layerString.length;i++)
{
    JLabel label=createColoredLabel(layerString[i],layerColors[i],origin);
    layeredPane.add(label,new Integer[i]);
    origin.x+=offset;
    origin.y+=offset;
}

return layeredPane;
}

private JLabel createColoredLabel(String str,Color color,Point origin)
{
JLabel label =new JLabel(str);
label.setVerticalAlignment(JLabel.TOP);
label.setHorizontalAlignment(JLabel.CENTER);
label.setOpaque(true);
label.setBackground(color);
label.setForeground(Color.BLACK);
label.setBorder(BorderFactory.createLineBorder(Color.BLACK));
label.setBounds(origin.x,origin.y,100,100);

return label;
}
public void actionPerformed(ActionEvent e)
{
String cmd=e.getActionCommand();
if(cmd.equals("LAYER_SETTING"))
{
    int position=jcheck.isSelected() ? 0 :1;
        layeredPane.setLayer(cursor,jcb.getSelectedIndex(),position);
}
else if(cmd.equals("FRONT_BACK"))
{
    if(jcheck.isSelected())
        layeredPane.moveToFront(cursor);
    else
        layeredPane.moveToBack(cursor);
}
}

@Override
public void mouseDragged(MouseEvent e) {
// TODO Auto-generated method stub
//Do nothing
}

@Override
public void mouseMoved(MouseEvent e) {
// TODO Auto-generated method stub
cursor.setLocation(e.getX(),e.getY());
}
} 
```

请帮我找出问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:26:32.720

Your `mouseMoved()` implementation no longer applies the offsets used in the original; you'll need to supply them based on the geometry of the `Icon` used in your `cursor`.

```
//Adjustments to put Duke's toe at the cursor's tip.
private static final int XFUDGE = 40;
private static final int YFUDGE = 57;
...
//Make Duke follow the cursor.
public void mouseMoved(MouseEvent e) {
    dukeLabel.setLocation(e.getX()-XFUDGE, e.getY()-YFUDGE);
} 
```

Addendum: *I don't understand why I didn't get any error when I used the wrong brackets? Can anyone point out the reason, please.*

```
layeredPane.add(label,new Integer(i)); 
```

Because the language [defines](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.2) an array as an `Object`, the compiler chose the matching available [`add()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component,%20java.lang.Object%29) method:

```
public void add(Component comp, Object constraints); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:52:16.683

There are two silly mistakes which consumed my 11 precious hours.

1)I set actionListener for 'cursor' instead of layeredPane and that's why the movement was confined to a small area.

2)Secondly,i wrote `layeredPane.add(label,new Integer[i]);` instead of `layeredPane.add(label,new Integer(i));` .(Notice the square brackets).

# php - 如何以重复形式触发文件输入

> ID：14181098
> 
> 赞同：0
> 
> 时间：2013-01-06T10:06:37.760
> 
> 标签：php, jquery, html

我有一个带有动态重复表单的 div，可以根据各自的 id 更改重复 div 的图像，当单击 div 图像时，我想触发单击 div 的文件输入。内容通过 jquery post 请求加载到 div(image-container) 中。

**HTML**

```
<div id="image-container"></div>

//repating dynamic form
<?php while($row=mysqli_fetch_assoc($result)):?>

<div class="image">
    <form name="image_change">
        <img src=".." class="image_change"/>
        <input name="image" type="file" />
        <input name="id" type="hidden" />
        <input name="edit" type="submit" />
    </form>
</div>

<?php endwhile;?> 
```

**jQuery**

```
$('#image-container').on('click', 'form[name=image_change] .image_change', function(){
    $(this).find('input[name=image]').trigger('click');
    return false;
}); 
```

这仅在表单不重复时才有效，我怎样才能使其与重复表单一起使用。

请查看并建议任何可能的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:16:59.960

这是因为您有多个具有相同名称的表单，并且只有第一个被识别。

从表单中删除 name 属性：

```
<div class="image">
    <form>
        <img src=".." class="image_change"/>
        <input name="image" type="file" />
        <input name="id" type="hidden" />
        <input name="edit" type="submit" />
    </form>
</div> 
```

并将js代码修改为以下

```
$(document).on('click', 'form .image_change', function(){
    $(this).parent().find('input[name=image]').trigger('click');
    return false;
}); 
```

如果您需要区分表单，请在表单中添加 id。

# jquery - jQuery 内容旋转器

> ID：14181109
> 
> 赞同：1
> 
> 时间：2013-01-06T10:08:18.787
> 
> 标签：jquery, jquery-ui, jquery-plugins, rotation, autorotate

有人可以向我推荐一些 jQuery 插件，用于旋转这个 HTML 结构。

```
<div id="event_rotator">
 <div class="event">
 <h2>Title</h2>
 <p>Text</p>
 </div>
 <div class="event">
 <h2>Title</h2>
 <p>Text</p>
 </div>
 <div class="event">
 <h2>Title</h2>
 <p>Text</p>
 </div>
</div> 
```

我希望它会在特定时间段内自动旋转，当用户在页面上时，用户也可以通过单击箭头左右旋转它。

我试图使用这个[http://jquery.malsup.com/cycle/pager11.html](http://jquery.malsup.com/cycle/pager11.html)，但我无法让它工作。

问题是，我从 PHP 代码中动态获取了这个 HTML。我不知道如何分配所需的 css（我可以分配对所有人都相同的 css，但我不能分配不同的 Z-index .

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T10:30:30.520

我在 10 分钟内创建了这个，所以它不是设计师的画廊，但是这个有你需要**使用**的所有东西，并**学习**如何为自己创建**一个**带有左/右按钮、自动旋转和悬停/暂停的幻灯片画廊。

HTML、CSS、JS 代码非常简单，请看一下：

[http://jsbin.com/ofukaq/8/edit](http://jsbin.com/ofukaq/8/edit)

HTML：

```
<div id="event_rotator">

  <button id="left">left</button>
  <button id="right">right</button>  

  <div id="slider">

     <div class="event">
     <h2>Title1</h2>
     <p>Text1</p>
     </div>
     <div class="event">
     <h2>Title2</h2>
     <p>Text2</p>
     </div>
     <div class="event">
     <h2>Title3</h2>
     <p>Text3</p>
     </div>

  </div>

</div> 
```

CSS：

```
#event_rotator{
  width:300px;
  height:150px;
  position:relative;
  overflow:hidden;
}
#slider{
  position:absolute;
  height:150px;
  left:0; 
  width:99999px;
}
.event{
  float:left;
  width:300px;
  height:150px;
  background:#eee;
} 
```

最后是 jQuery：

```
$(function(){

var W = $('#event_rotator').width();      // Gallery Width
var N = $('#slider .event').length;    // Number of elements
var C = 0;                          // Counter
var intv;                         // Auto anim. Interval

if(N<=1){ 
  $('#left, #right').hide();  // hide buttons only 1 element
}  

$('#slider').width( W*N );          // Set slider width

$('#left, #right').click(function(){
  // Animation logic
  if(this.id=='right'){

    C++;
    C = C % N;     // reset to '0' if end reached

  }else{ // left was clicked

    C--;
    if(C===-1){   // IF C turns -1 scroll to last one (N-1)
      C = N-1; 
    }

  }
  // Animation
  $('#slider').stop().animate({left: -C*W }, 1000 );
});

// auto rotate

function autoRotate(){
  intv = setInterval(function(){
      $('#right').click();
  },2000); // pause time
}
autoRotate(); // start auto rotate

// pause hover

$('#event_rotator').on('mouseenter mouseleave', function( e ){
   var mEnt = e.type=='mouseenter';
  if(mEnt){
     clearInterval(intv);
  }else{
     autoRotate();
  }
});

}); // * end document ready. 
```

希望我让您大开眼界，有时您不需要一个 3000 行的插件来构建一个具有您需要的所有功能的漂亮画廊。

* * *

这是使用**三元运算符**的一个有点压缩的 jQuery 脚本：

## [jsBin 演示](http://jsbin.com/ofukaq/378/edit)

```
var W = $('#event_rotator').width(),
    N = $('#slider .event').length,
    C = 0,
    intv;

if(N<=1)$('#left, #right').hide(); 
$('#slider').width( W*N );

$('#left, #right').click(function(){
     C = (this.id=='right'? ++C : --C) < 0 ? N-1 : C%N ;
     $('#slider').stop().animate({left: -C*W }, 700 );
});

function auto(){
  intv = setInterval(function(){
      $('#right').click();
  }, 3000 );
}
auto();

$('#event_rotator').hover(function( e ){
  return e.type=='mouseenter' ? clearInterval(intv) : auto();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-26T12:15:40.913

[http://jsbin.com/ofukaq/8/edit](http://jsbin.com/ofukaq/8/edit)

如何使它循环显示的标题，例如：

`Title 1 -> Title 2 -> Title 3 -> Title 1 -> title 2 ->`无限循环

代替

```
Title 1 -> Title 2 -> Title 3 
```

?

# java - javax.security.auth.login.LoginException：安全异常

> ID：14181111
> 
> 赞同：2
> 
> 时间：2013-01-06T10:08:28.190
> 
> 标签：java, glassfish, java-ee-6, jaas, jdbcrealm

我正在尝试使用 GlassFish v3.1.2 和 JSF 2.1 和 primeFaces 3.4.2 设置容器管理的安全性

HexValue 值与数据库匹配，但得到以下异常

我尝试了 Base64 编码器，但结果相同。计算出的值和密码都很好，我错过了其他一些东西......还有其他我错过的设置，尤其是 glassfish 或 login.xhtml 文件

用户名：admin1 通过：admin

使用以下 SHAConverter.java

```
Used org.apache.commons.codec.digest.DigestUtils; for calculating HEX

final MessageDigest messageDigest = MessageDigest.getInstance("SHA-256");
final byte bin[] = messageDigest.digest((value.getBytes("UTF-8")));

final String hash = DigestUtils.sha256Hex(bin);
System.out.println("hex : " + hash); 
```

 `````
 FINE: [Web-Security] Setting Policy Context ID: old = null ctxID = PrimeJSF-EJB-JPA-2/PrimeJSF-EJB-JPA-2
FINE: [Web-Security] hasUserDataPermission perm: ("javax.security.jacc.WebUserDataPermission" "/Login.xhtml" "POST")
FINE: [Web-Security] hasUserDataPermission isGranted: true
INFO: VALUE ------------- admin
INFO: hex : dd474e450473186ec733689b549a94a54a96f276dba76b29138c57b6afe15bf7
INFO: request.isRequestedSessionIdValid() true
INFO: user : admin1 >> dd474e450473186ec733689b549a94a54a96f276dba76b29138c57b6afe15bf7
INFO: false
FINEST: Processing login with credentials of type: class com.sun.enterprise.security.auth.login.common.PasswordCredential
FINE: Logging in user [admin1] into realm: myRealm using JAAS module: jdbcRealm
FINE: Login module initialized: class com.sun.enterprise.security.auth.login.JDBCLoginModule
FINE: JAAS authentication aborted.
FINEST: doPasswordLogin fails
javax.security.auth.login.LoginException: Security Exception
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:870)
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)
    at javax.security.auth.login.LoginContext$4.run(LoginContext.java:698)
    at javax.security.auth.login.LoginContext$4.run(LoginContext.java:696)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:695)
    at javax.security.auth.login.LoginContext.login(LoginContext.java:594)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:382)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:240)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:153)
    at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:514)
    at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:455)
    at org.apache.catalina.connector.Request.login(Request.java:1938)
    at org.apache.catalina.connector.Request.login(Request.java:1901)
    at org.apache.catalina.connector.RequestFacade.login(RequestFacade.java:1146)
    at com.nz.simplecrud.controller.LoginController.login(LoginController.java:83)
    at com.nz.simplecrud.controller.LoginController$Proxy$_$$_WeldClientProxy.login(LoginController$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.nz.simplecrud.filter.LoginPageFilter.doFilter(LoginPageFilter.java:32)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.SecurityException
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:871)
    ... 64 more

WARNING: WEB9102: Web Login Failed: com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Security Exception
SEVERE: IOException, Login Controller: The username or password you provided does not match our records.
SEVERE: javax.servlet.ServletException: Exception thrown while attempting to authenticate for user: admin1
    at org.apache.catalina.connector.Request.login(Request.java:1970)
    at org.apache.catalina.connector.Request.login(Request.java:1901)
    at org.apache.catalina.connector.RequestFacade.login(RequestFacade.java:1146)
    at com.nz.simplecrud.controller.LoginController.login(LoginController.java:83)
    at com.nz.simplecrud.controller.LoginController$Proxy$_$$_WeldClientProxy.login(LoginController$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.nz.simplecrud.filter.LoginPageFilter.doFilter(LoginPageFilter.java:32)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.servlet.ServletException: Failed login while attempting to authenticate user: admin1
    at org.apache.catalina.connector.Request.login(Request.java:1941)
    ... 52 more

SEVERE:     at org.apache.catalina.connector.Request.login(Request.java:1970)
SEVERE:     at org.apache.catalina.connector.Request.login(Request.java:1901)
SEVERE:     at org.apache.catalina.connector.RequestFacade.login(RequestFacade.java:1146)
SEVERE:     at com.nz.simplecrud.controller.LoginController.login(LoginController.java:83)
SEVERE:     at com.nz.simplecrud.controller.LoginController$Proxy$_$$_WeldClientProxy.login(LoginController$Proxy$_$$_WeldClientProxy.java)
SEVERE:     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
SEVERE:     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
SEVERE:     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
SEVERE:     at java.lang.reflect.Method.invoke(Method.java:601)
SEVERE:     at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
SEVERE:     at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
SEVERE:     at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
SEVERE:     at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
SEVERE:     at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
SEVERE:     at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148)
SEVERE:     at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
SEVERE:     at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
SEVERE:     at javax.faces.component.UICommand.broadcast(UICommand.java:300)
SEVERE:     at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
SEVERE:     at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
SEVERE:     at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
SEVERE:     at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
SEVERE:     at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
SEVERE:     at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
SEVERE:     at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
SEVERE:     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
SEVERE:     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
SEVERE:     at com.nz.simplecrud.filter.LoginPageFilter.doFilter(LoginPageFilter.java:32)
SEVERE:     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
SEVERE:     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
SEVERE:     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
SEVERE:     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
SEVERE:     at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
SEVERE:     at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
SEVERE:     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
SEVERE:     at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
SEVERE:     at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
SEVERE:     at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
SEVERE:     at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
SEVERE:     at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
SEVERE:     at java.lang.Thread.run(Thread.java:722)
SEVERE: Caused by: javax.servlet.ServletException: Failed login while attempting to authenticate user: admin1
SEVERE:     at org.apache.catalina.connector.Request.login(Request.java:1941)
SEVERE:     ... 52 more 
````  `**这是 Glassfish 领域设置**

```
Configuration Name: server-config
Realm Name: myRealm
Class Name: com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm
JAAS Context: jdbcRealm
JNDI: jdbc/myDatasource
User Table: user_role_view
User Name Column: username
Password Column: password
Group Table: user_role_view
Group Table User Name Column:---
Group Name Column: rolename
Assign Groups:---
Database User:---
Database Password:---
Digest Algorithm: SHA-256
Password Encryption Algorithm:---
Encoding:Hex
Charset:UTF-8 
```

**我的 login.xhtml**

```
<ui:define name="content">
         <h:form styleClass="loginPanelStyle">
                 <p:growl id="msgs" showDetail="true" sticky="false" />                        
                <p:panelGrid columns="2">
                <f:facet name="header">
                    Login Panel
                </f:facet>
                <h:outputText value="Username : "></h:outputText>
                <p:inputText id="username" value="#{loginController.username}" required="true" requiredMessage="Please Enter Username!">
                    <f:validateLength minimum="1" />  
                </p:inputText>
                <h:outputText value="Password : "></h:outputText>
                <p:password id="password"  value="#{loginController.password}" required="true" requiredMessage="Please Enter password!">
                    <f:validateLength minimum="1" />  
                    <f:converter converterId="com.nz.util.SHAConverter"></f:converter>
                </p:password>
                <f:facet name="footer">
                    <p:commandButton value="Submit" update="msgs" actionListener="#{loginController.login}" type="submit" icon="ui-icon-check" style="margin:0"></p:commandButton>

                </f:facet> 
            </p:panelGrid> 
```

**我的 web.xml**

```
<security-constraint>
        <display-name>Administrator</display-name>
        <web-resource-collection>
            <web-resource-name>Admin Area</web-resource-name>
            <description/>
            <url-pattern>/admin/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description>Administrator</description>
            <role-name>Administrator</role-name>
        </auth-constraint>
    </security-constraint>
    <security-constraint>
        <display-name>Manager</display-name>
        <web-resource-collection>
            <web-resource-name>Manager Area</web-resource-name>
            <description/>
            <url-pattern>/manager/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description>Manager</description>
            <role-name>Manager</role-name>
            <role-name>Administrator</role-name>
        </auth-constraint>
    </security-constraint>
    <security-constraint>
        <display-name>User</display-name>
        <web-resource-collection>
            <web-resource-name>User Operations</web-resource-name>
            <description/>
            <url-pattern>/user/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description>User</description>
            <role-name>Manager</role-name>
            <role-name>Administrator</role-name>
            <role-name>User</role-name>
        </auth-constraint>
    </security-constraint>
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>myRealm</realm-name>
        <form-login-config>
            <form-login-page>/Login.xhtml</form-login-page>
            <form-error-page>/Login.xhtml</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <role-name>Administrator</role-name>
    </security-role>
    <security-role>
        <role-name>Manager</role-name>
    </security-role>
    <security-role>
        <role-name>User</role-name>
    </security-role> 
```

**我的 glassfish-web.xml**

```
 <security-role-mapping>
        <role-name>Administrator</role-name>
        <group-name>Administrators</group-name>
    </security-role-mapping>
    <security-role-mapping>
        <role-name>Manager</role-name>
        <group-name>Managers</group-name>
    </security-role-mapping>
    <security-role-mapping>
        <role-name>User</role-name>
        <group-name>Users</group-name>
    </security-role-mapping> 
```

[我使用了这个帖子表格](https://stackoverflow.com/questions/7941713/loginexception-login-failed-security-exception)，但是这个表格的计算不匹配，但我的问题似乎与计算不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:49:35.357

您遇到的问题与您提到的帖子中几乎相同。如您所见，密码**管理员**的哈希值应该是**8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918** 而不是**dd474e450473186ec733689b549a94a54a96f2776dba76b29138c**是您的情况

因为该值应该是您可以使用的字符串：

```
final String hash = DigestUtils.sha256Hex(value);
System.out.println("hex : " + hash); 
```

但这是我不明白的事情：

```
 final MessageDigest md = MessageDigest.getInstance("SHA-256");
    String value = "admin";
    md.update(value.getBytes("UTF-8"));
    final byte bin[] = md.digest();

    System.out.println(DigestUtils.sha256Hex(bin));
    System.out.println(DigestUtils.sha256Hex(value)); 
```

输出是：

```
dd474e450473186ec733689b549a94a54a96f276dba76b29138c57b6afe15bf7
8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918 
```

但我猜这两种方法都应该返回相同的值......？``

# c# - c#如何获取当年的第一天和最后一天

> ID：14181113
> 
> 赞同：59
> 
> 时间：2013-01-06T10:09:06.833
> 
> 标签：c#, date

如何在c#中获取当年的第一天和最后一天

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-01-06T10:14:37.993

这个？

```
int year = DateTime.Now.Year;
DateTime firstDay = new DateTime(year, 1, 1);
DateTime lastDay = new DateTime(year, 12, 31); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-06T10:15:08.803

尝试这个：

```
var firstDay = new DateTime(DateTime.Now.Year, 1, 1);
var lastDay = new DateTime(DateTime.Now.Year, 12, 31); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-08-28T14:58:45.737

这里没有一个答案实际上说明了最后一天。在我看来，正确的方法是：

```
 int year = DateTime.Now.Year;
    DateTime firstDay = new DateTime(year , 1, 1);
    DateTime lastDay = firstDay.AddYears(1).AddTicks(-1) 
```

希望这对某人有价值:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T15:52:05.027

为什么不获取下一个日历年的第一天（第 1 个月，第 1 天）并减去一天。

# c# - 当鼠标悬停在 DIV 上时，如何使某些控件可见并与 DIV 重叠？

> ID：14181124
> 
> 赞同：2
> 
> 时间：2013-01-06T10:10:16.377
> 
> 标签：c#, javascript, jquery, asp.net, css

我在 CSS 和 JavaScript 方面不是那么专业。我正在一个用户创建和编辑文章的文章网站上工作。目前，每当用户想要删除或编辑一篇文章时，他都会单击每个代表一篇文章的 DIV 下面给出的一些按钮。代码是这样的

```
<div id="article"><!-- article data --></div>
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
            style="height: 26px" Text="Delete" /> 
```

但我想要的是，这个删除按钮在页面加载时一定是不可见的。只有当用户将鼠标悬停在相应的 div 上时它才应该可见，并且它应该与 div 右下角的 div 重叠。请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T10:24:29.197

This uses jQuery to handle a fade in and fade out. I don't know anything about ASP or C# but maybe this will help [Demo](http://jsfiddle.net/atomicpages/KVeg2/)! Just hover over the black square in the bottom left corner and you'll see the delete button show up. The jQuery can be seen here:

```
$('.delete input').hide();
$('.delete').hover(
    function() {
        $('.delete input').fadeIn();
    }, function() {
      $('.delete input').fadeOut();
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:49:01.527

如果你想让css可以看到按钮，它就像

```
div:hover input {visibility: visible} 
```

这将适用于您提供的代码。当然，如果您有一个更复杂的页面，您应该使规则更具体（可能为 div 分配一个类）

# perl - 由于“make test”挂起，无法安装 Image::ExifTool

> ID：14181125
> 
> 赞同：4
> 
> 时间：2013-01-06T10:10:24.473
> 
> 标签：perl, installation, cross-compiling, perl-module, sparc

我有一个**Netgear ReadyNAS NV+**，我正在尝试使用 perl 做一些事情。

由于来自供应商的 perl 安装是在没有**uselargefiles** -flag 的情况下编译的，因此我尝试编译/安装我自己的版本以与系统之一并行运行。

当我第一次尝试在机器本身上编译 perl 时，我遇到了麻烦，因为系统缺少很多常规的系统工具，这会阻止 Configure-script 正常运行。

```
# ./Configure -des -Dprefix=$HOME/perl-5.16.2
First let's make sure your kit is complete.  Checking...
./Configure: line 1986: split: command not found
cat: /root/dload/perl-5.16.2/UU/x??: No such file or directory
Locating common programs...
I don't know where 'comm' is, and my life depends on it.
Go find a public domain implementation or fix your PATH setting! 
```

为了解决这个问题，我安装并使用[这个交叉编译器](http://kb.netgear.com/app/answers/detail/a_id/12273/~/setting-up-a-readynas-cross-compiler)在另一台机器上构建 perl。我不知道如何使用 perl 中的标准配置脚本进行交叉编译，所以我使用[了这个](http://perlcross.berlios.de/download.html).

之后，我可以将新的 perl 文件夹复制到 NAS 上，然后进行以下工作：

```
# ~/sparc-perl-5.16.2/bin/perl -version

This is perl 5, version 16, subversion 2 (v5.16.2) built for sparc-linux

Copyright 1987-2012, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.

# ~/sparc-perl-5.16.2/bin/perl -e 'print "A string!\n";'
A string! 
```

所以从某种意义上说，我觉得我已经成功地让“我的”perl 在机器上工作了。

但是，当我尝试安装额外的模块时，我遇到了麻烦。

我尝试使用 cpanp （以及其他）安装**Image::ExifTool ，但安装从未完成。**

今天我求助于手动安装。

```
wget http://search.cpan.org/CPAN/authors/id/E/EX/EXIFTOOL/Image-ExifTool-9.12.tar.gz
tar xzf Image-ExifTool-9.12.tar.gz
cd Image-ExifTool-9.12
~/sparc-perl-5.16.2/bin/perl Makefile.pl
make 
```

所有工作都按他们应该做的。

当我开始**进行测试**时，它会像这样无限期地挂起：

```
# make test
PERL_DL_NONLAZY=1 /root/sparc-perl-5.16.2/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/*.t t/AFCP.t ........... 
```

查看正在运行的进程，我认为这些是代表命令的进程：

```
# ps aux | grep per[l]
root     26187  0.5  0.7 12000 7808 pts/0    S+   10:31   0:07 /root/sparc-perl-5.16.2/bin/perl -MExtUtils::Command::MM -e test_harness(0, 'blib/lib', 'blib/arch') t/AFCP.t t/AIFF.t t/APE.t t/ASF.t t/BigTIFF.t t/BMP.t t/CanonRaw.t t/Canon.t t/CanonVRD.t t/Casio.t t/DICOM.t t/DjVu.t t/DNG.t t/DV.t t/EXE.t t/ExifTool.t t/FLAC.t t/FlashPix.t t/Flash.t t/Font.t t/FotoStation.t t/FujiFilm.t t/Geotag.t t/GeoTiff.t t/GE.t t/GIF.t t/GIMP.t t/GPS.t t/HTML.t t/InDesign.t t/IPTC.t t/ITC.t t/Jpeg2000.t t/JVC.t t/Kodak.t t/KyoceraRaw.t t/Lang.t t/LNK.t t/M2TS.t t/Matroska.t t/MIE.t t/MIFF.t t/Minolta.t t/MP3.t t/MWG.t t/MXF.t t/Nikon.t t/Olympus.t t/OpenEXR.t t/Panasonic.t t/PDF.t t/Pentax.t t/PGF.t t/PhotoCD.t t/PhotoMechanic.t t/Photoshop.t t/PICT.t t/PNG.t t/PostScript.t t/PPM.t t/PSP.t t/QuickTime.t t/Radiance.t t/Real.t t/Ricoh.t t/RIFF.t t/RTF.t t/Sanyo.t t/Sigma.t t/Sony.t t/Unknown.t t/Vorbis.t t/Writer.t t/XMP.t t/ZIP.t
root     26189  1.7  0.0     0    0 pts/0    Z+   10:31   0:24 [perl] <defunct> 
```

这与我尝试使用 cpanp 进行相同安装时发生的情况完全一致。

我想我可以运行**make install**并希望测试无法运行/完成不会有太大问题，但这让我感到有点不安。我宁愿找出问题所在。

我也觉得奇怪的是测试挂起它的方式，我可以接受它失败，但它只是继续以非生产方式运行感觉很奇怪。

因为这是我第一次从源代码构建 perl 并且我第一次使用交叉编译器，所以当我知道我做错了什么时，我不会感到惊讶，任何帮助确定什么是非常受欢迎的。

我究竟做错了什么？

**编辑 - 在机器上编译：**

想出了如何让配置脚本在机器上本地工作。将尝试在那里建造，看看是否会更好。不过这需要一些时间，机器很*慢*。

为了能够运行我需要的配置脚本：

**海合会**

```
apt-get install libc6-dev gcc gdb libtag1-dev uuid-dev 
```

**核心工具**

```
apt-get install coreutils 
```

**-Dcc=gcc**

```
./Configure -des -Dprefix=$HOME/perl-5.16.2 -Dcc=gcc 
```

**EDIT2 - 编译失败：**

有史以来最短暂的成功：

```
# make
`sh  cflags "optimize='-O2'" perlmini.o`  -DPERL_IS_MINIPERL -DPERL_EXTERNAL_GLOB perlmini.c
  CCCMD =  gcc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -O2 -Wall 
In file included from perl.c:33:
perl.h:699: error: conflicting types for `syscall'
/usr/include/unistd.h:939: error: previous declaration of `syscall'
ake: *** [perlmini.o] Error 1 
```

**EDIT3 - 试驾前叉：**

尝试以下方法来验证 fork 是否可以正常工作。我相信测试是成功的，但是我之前从未尝试过fork，所以如果我读错了输出，请告诉我。

```
# cat test_forkwait.px 
#!/root/sparc-perl-5.16.2/bin/perl

$pid = fork();
die if $pid < 0;

$SIG{CHLD} = sub { warn "SIGCHLD\n"; };

if($pid) {
    $status = waitpid($pid, 0);
    warn "wait status: $status\n";
} else {
    warn "Child starting\n";
    sleep 1;
    warn "Child terminating\n";
}

# ./test_forkwait.px 
Child starting
Child terminating
SIGCHLD
wait status: 29913 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-11T13:58:46.637

我对这个评论有点晚了，对你的“make test”挂起没有任何想法，但我想指出 Image::ExifTool 是纯 Perl，所以它不需要编译。安装步骤就像将分发文件复制到正确的目录一样简单。

*   菲尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:25:33.813

放弃找出测试失败的原因。最终还是使用了该模块。似乎可以处理我的文件。

# air - 哪些是这些产品的正确技术名称，以及可用产品列表

> ID：14181127
> 
> 赞同：1
> 
> 时间：2013-01-06T10:10:45.783
> 
> 标签：air, appjs, node-webkit

我正在尝试寻找允许我通过 html5 + javascript 创建桌面应用程序的其他类型的产品。实际上我找到了这三个，但我仍然不知道它们的技术名称，所以我真的无法在谷歌上搜索它们。对此有何建议？

另外，我正在寻找类似产品的列表，以选择适合我需要的产品。

我真的很喜欢你如何使用 html + css + javascripts 构建界面并取得很好的效果，但我需要与操作系统进行良好的交互来处理窗口。特别是，我一直在寻找目前似乎没有在 node-webkit 上实现的透明窗口，而在 AppJS 上似乎还可以，但我不喜欢像 web 服务器一样提供内容的想法，我更喜欢 node-webkit 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:13:14.513

搜索“HTML5 Desktop”，您会在首页找到所有允许您使用 html5 构建桌面应用程序的平台，如 appjs、tidesk、pokki、node-webkit 等。

# objective-c - Objectiveflickr Apple Mach-O 链接器错误

> ID：14181129
> 
> 赞同：0
> 
> 时间：2013-01-06T10:11:12.633
> 
> 标签：objective-c, xcode, ios6, clang, objectiveflickr

使用 ObjectiveFlickr、Xcode 4.5.2、iOS 6。

编译时，它让我：

```
Ld /Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-ecsrjcjimihxevguffdchwqnqtzf/Build/Products/Debug-iphonesimulator/Shutterbug.    app/Shutterbug normal i386
    cd /Users/axu/prj/ios/Shutterbug
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.    app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.    app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -    L/Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-ecsrjcjimihxevguffdchwqnqtzf/Build/Products/Debug-iphonesimulator -    F/Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-ecsrjcjimihxevguffdchwqnqtzf/Build/Products/Debug-iphonesimulator -filelist     /Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-ecsrjcjimihxevguffdchwqnqtzf/Build/Intermediates/Shutterbug.build/Debug-    iphonesimulator/Shutterbug.build/Objects-normal/i386/Shutterbug.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -    Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 /Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-    ecsrjcjimihxevguffdchwqnqtzf/Build/Products/Debug-iphonesimulator/ObjectiveFlickr/ObjectiveFlickr     /Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-ecsrjcjimihxevguffdchwqnqtzf/Build/Products/Debug-iphonesimulator/libObjectiveFlickr.a -    framework UIKit -framework Foundation -framework CoreGraphics -o /Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-    ecsrjcjimihxevguffdchwqnqtzf/Build/Products/Debug-iphonesimulator/Shutterbug.app/Shutterbug

clang: error: no such file or directory: '/Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-ecsrjcjimihxevguffdchwqnqtzf/Build/Products/Debug-    iphonesimulator/ObjectiveFlickr/ObjectiveFlickr' 
```

我不知道为什么它会询问我从未在任何地方设置过的 **/ObjectiveFlickr/ObjectiveFlickr。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:37:48.940

如果您查看以以下开头的命令：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/... 
```

你会找到：

```
/Users/axu/Library/Developer/Xcode/DerivedData/Shutterbug-ecsrjcjimihxevguffdchwqnqtzf/Build/Products/Debug-iphonesimulator/ObjectiveFlickr/ObjectiveFlickr 
```

所以你的项目肯定有问题。

检查这一点的一种简单方法是`*.xcodeproj/project.pbxproj`在文本编辑器中打开您的项目文件并搜索`ObjectiveFlickr`以查看是否一切正确。

# jquery - Excel 2013 应用程序、jQuery、WCF 调用失败并出现“无传输”错误

> ID：14181135
> 
> 赞同：1
> 
> 时间：2013-01-06T10:12:00.533
> 
> 标签：jquery, ajax, wcf, excel, office-2013

编程环境为： - Windows 8 桌面；- WCF 服务；- Excel 2013 办公应用程序；- WCF 服务和 Excel 办公应用程序在同一台机器上运行；- 办公应用程序对 WCF 服务进行 ajax 调用；出现问题的 javascript 代码（在 office 应用程序中使用）是：

```
function F() {
  $.support.cors = true;
  $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "http://localhost:5000/<service>/<method>",
    data: '{<my data>}',
    dataType: "json",
    success: ...
    error: ...
   });
} 
```

这是我遇到的问题 - 当我从 Excel 2013 应用程序调用 WCF 服务时，我收到“无传输”错误。我能够识别以下用例：1) 仅当我运行独立的 Excel 2013 实例并从“插入”Excel 菜单插入应用程序时才会发生这种情况。2）如果我从VS2012运行应用程序，那么一切都很好，我可以毫无问题地调用WCF服务。（顺便说一句，WCF 服务在同一台机器上运行。我从 Excel 2013 应用程序发出的请求是一个 ajax 请求。）。3）与（2）相同的情况。该应用程序可以进行 WCF 调用。然后我还从 Excel 的“插入”菜单中插入我的应用程序实例。在这种情况下，如果我尝试使用插入的应用程序实例进行 WCF 调用，则会收到与 (1) 中相同的错误 - “无传输”。

我在互联网上进行了一些搜索，发现我的问题可能与我尝试拨打的呼叫是跨域呼叫有关。（顺便说一句，我调试了 jQuery 代码，调用确实是跨域调用）。建议的解决方案是在调用之前设置 jQuery 属性之一：“jQuery.support.cors = true;”。我在我的 Excel 2013 应用程序代码中这样做了，但问题没有解决。然后我在 jQuery 代码中跟踪调用，发现：

1）当应用程序从 VS2012 运行时，jQuery 会创建两个传输对象：（1）一个用于跨域请求，（2）一个只允许通过 XMLHttpRequest 进行跨域请求。当从应用程序发出 WCF 调用时，jQuery 使用第二个传输并且调用成功。

2) 当应用程序从 Excel 2013 的“插入”菜单插入时，在 WCF 调用之前，jQuery 只为跨域请求创建一个传输对象。然后jQuery“决定”不可能使用该传输对象并且请求失败并出现“无传输”错误。

知道为什么会发生这种情况以及如何解决问题吗？

# php - .htaccess 启用加载 js 和 css 文件

> ID：14181137
> 
> 赞同：1
> 
> 时间：2013-01-06T10:12:08.143
> 
> 标签：php, .htaccess, clean-urls

我通过使用以下代码编辑 .htacces 来启用干净的 url

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-zA-Z0-9]+)/(.+)/$ index.php?page=$1&option=$2 [L]
RewriteRule ^([a-zA-Z0-9]+)/(.+)$ index.php?page=$1&option=$2 [L]
RewriteRule ^([a-zA-Z0-9]+)$ index.php?page=$1 [L]
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?page=$1 [L] 
```

我对 .htaccess 了解不多，并且做了很多谷歌搜索。我现在的问题是我无法从我的服务器加载 .js 、 .css 和其他文件。当请求的页面不存在时，我得到了显示的 404 错误页面

我怎样才能让我的css和js加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:22:28.400

创建目录`statics`并将静态文件放在那里。

```
/
|__ .htaccess
|__ statics
|  |__style.css
|  |__script.js
|__ some directory 
```

像这样编辑你的`.htaccess`：

```
RewriteEngine On
RewriteRule ^statics/ - [L,NC]

#your codes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:28:53.583

确保您的 css/js/image 文件的路径是相对于域而不是页面的（例如，使用 /yourdomain/styles.css 而不是 yourdomain/styles.css）。将这样的重写条件添加到您的 htaccess 中：

```
RewriteCond $1 !^(favicon\.ico|favicon\.png|media|robots\.txt|crossdomain\.xml|css|js) 
```

# c# - 如何将 MVC 应用程序与不同类库中的成员提供程序和数据模型链接在一起？

> ID：14181139
> 
> 赞同：0
> 
> 时间：2013-01-06T10:12:37.733
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-membership, libraries

我有 3 个类库和`ASP.MVC 4`Web 应用程序。

1.  库 - 基础数据模型（用户、角色等）

```
public class User
{
  public int ID { get; set; }
  public string Comments { get; set; }....
} 
```

2.  库 - 扩展数据模型（合作伙伴、产品） - 这可能因不同的 Web 应用程序而异。
3.  图书馆 - 会员提供者。

我`DBContext`在 MVC 应用程序中创建我的，因为只有我知道`DBSet`当前应用程序需要哪个。

```
public class DSContext:DbContext
{
   public DbSet<User> Users { get; set; }
} 
```

我可以在 MVC 应用程序中访问和使用两个数据库中的模型（并且它可以工作），但是如何告诉使用我在 MVC 应用程序`membership provider`中使用的相同`DBContext`的模型呢？

```
var pUser = SomeDBContext.Users.Find(Username);
return new MembershipUser(...Set properties from pUser...); 
```

`SomeDBContext`可以是任何具有来自第一类库的类型的`DbContext`属性。`Users``User`

**经过一些试验和错误得到了解决方案** 随意评论 - 因为我不知道它有多正确。

1.  类库

```
public class User
{
   [Required]
   [Key]
   public string UserName{get; set;}
   public string PassWord{ get; set;}
}

public class UserContext : DbContext
{
   public DbSet<User> Users { get; set; }
} 
```

2.  提供者 - 关键是使其抽象

```
public abstract class STMembershipProvider : ExtendedMembershipProvider 
```

并添加抽象属性

```
public abstract CL.UserContext DB { get; }

public override bool ValidateUser(string username, string password)
{

    User dbuser = DB.Users.Find(username);

    if (dbuser != null)
    {
        if (dbuser.PassWord == password) return true;
    }
    return false;
} 
```

3.  在 MVC 应用程序中，创建`DbContext`从类库继承的本地内容`DbContext`和从库中继承的本地提供程序`MembershipProvider`。

```
public class EFContext:CL.UserContext
{

} 
```

和

```
public class LocalMp:MP.STMembershipProvider
{
    public override CL.UserContext DB
    {
        get
        {
            return new EF.Models.EFContext();
        }
    }
} 
```

这就是魔法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:07:20.523

要使用通用库来获得用户权限和访问权限，您必须设计一个抽象层，供您的会员提供者使用。由于 DBContext 直接连接到特定的业务域，并且您希望使用通用库进行访问和授权，因此您需要将项目的特定对象映射到该抽象层。我可以想象这样的抽象层应该允许以以下方式对实体（或表格）进行操作：

1.  获取业务对象的特定实例
2.  将其映射（或强制转换）到抽象层安全对象 A
3.  运行您的会员提供程序以对对象 A 执行安全工作
4.  使用输出来决定任何操作（允许访问，限制访问）......

希望这会有所帮助。

# java - Eclipse 没有找到 javax.swing

> ID：14181142
> 
> 赞同：8
> 
> 时间：2013-01-06T10:13:10.333
> 
> 标签：java, eclipse, swing

Eclipse 找不到`import javax.swing.JOptionPane`

它位于哪里，我如何包含它？

```
import javax.swing.JOptionPane; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T12:35:52.387

1.  Eclipse 中必须有一个已安装（并已选择）的 JDK：

    ```
    Window > Preferences > Java > Installed JREs 
    ```

2.  该项目必须配置为使用该 JDK：

    ```
    Project > Properties > Java Build Path > Libraries 
    ```

    列表中应该有一个类似“JRE System Library [JDK7]”的条目。如果不按：

    ```
    Add Library... > JRE System Library 
    ```

3.  该项目应该已创建为“Java 项目”：

    ```
    Project > Properties > Builders 
    ```

    应包括“Java Builder”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-06-20T13:50:43.613

接受的答案对我不起作用。

这就是我解决它的方法：

右键单击您的项目，选择`Properties`

去`Java Build Path`

点击`Libraries`，然后`Add Library ...`

选择`JRE System Library`

单击`Execution environment`并选择`JavaSE-1.7`或`JavaSE-1.8`

单击`Finish`，然后单击`Apply and Close`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-25T09:51:05.673

尝试在eclipse中将系统库下的执行环境更新为JavaSE-1.7或JavaSE-1.8。可以按照以下步骤进行更新：

```
> Right-click on the project
> Select properties
> Java build path
> Library > Add Library > Add JRE SYSTEM Library
> Execution Environment
> Select JavaSE-1.7 or JavaSE-1.8
> Finish 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-23T03:40:46.240

一开始，当你开始创建一个新的java项目时，不要直接点击“完成”或“下一步”。但是转到表单中间的 JavaSE 版本文本输入并选择 JavaSE 1.6 或 1.7 或 1.8，然后单击下一步 -> 完成。然后它与解析和工作。

# ocaml - 一个简单的 OCaml 程序

> ID：14181145
> 
> 赞同：4
> 
> 时间：2013-01-06T10:13:33.727
> 
> 标签：ocaml

我想学习一点 OCaml，只是为了体验 C++ 和 Java 以外的编程语言。如果您帮助我完成以下程序，我将非常感激：基本上用户输入一个正整数。打印从 N 到 0 的所有整数的总和。

显然你创建了一个 integer `N`，让用户输入它的值。创建一个`sum`类型的变量`int`。有一个`for`循环，它会加`N`一`sum`然后递减`N`的值。循环将在`N`大于 1 时运行。不过，我不知道如何在 OCaml 的语法中执行此操作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T11:10:19.190

您描述算法的方式是您通常如何在 C++ 或 Java 中实现它。您可以在 OCaml 中以相同的方式编写它，但惯用的方式是不改变变量的递归函数，如下所示：

```
let rec print_sum acc n =
  if n <= 0
  then Printf.printf "Sum: %d\n" acc
  else print_sum (acc + n) (n - 1) 
```

调用：`print_sum 0 11 ;;`

编写递归函数：

1.  首先考虑不需要递归的基本情况。这将使您免于忘记它（这里是这种情况`n <= 0`）
2.  一般情况：如何才能更接近已经编写的基本情况？这是通过调用函数来实现的`n-1`。

# python - codeacademy 战舰项目语法错误

> ID：14181146
> 
> 赞同：2
> 
> 时间：2013-01-06T10:13:43.367
> 
> 标签：python

我正在通过 codeacademy 网站学习 python。现在我正在尝试编写战舰项目，但我遇到了一个问题：我的代码是：

```
import random

board = []

for x in range(0,5):
  board.append(["O"] * 5)

def print_board(board):
  for row in board:
    print " ".join(row)

print_board(board)

def random_row(board):
  return random.randint(0,len(board)-1)

def random_col(board):
    return random.randint(0,len(board[0])-1)

ship_row = random_row(board)
ship_col = random_col(board)
guess_row = input("Guess Row:")
guess_col = input("Guess Col:")

print ship_row
print ship_col

if (guess_row == ship_row and guess_col == ship_col):
    print "Congratulations! You sank my battleship!"
else:
    if((guess_row < 0) or (guess_row > (len(board) -1) or (guess_col < 0) or (guess_col> (len(board) -1)):
        print "Oops, that’s not even in the ocean."
    else:
        print "You missed my battleship!"
        guess_row = "X"
        guess_col = "X"
        print_board(board)
    if board[guess_row][guess_col] == "X":
        print "You guessed that one already." 
```

但它返回此错误：

```
 if((guess_row < 0) or (guess_row > (len(board) -1) or (guess_col < 0) or (guess_col> (len(board) -1)):
                                                                                                         ^
SyntaxError: invalid syntax 
```

你能帮我解决这种情况吗？

提前感谢伙计们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T10:15:32.453

你有九个左括号，但只有七个右括号。

我个人会删除其中的大部分：

```
 if guess_row < 0 or guess_row >= len(board) or guess_col < 0 or guess_col >= len(board): 
```

或者，更好的是：

```
 if not (0 <= guess_row < len(board)) or not (0 <= guess_col < len(board)): 
```

在这里，后面的两对括号`not`不是必需的，但 IMO 提高了可读性。如果您不同意，请随意放弃它们。

代码还有其他一些问题。

以下：

```
 guess_row = "X"
    guess_col = "X" 
```

应该读

```
 board[guess_row][guess_col] = "X" 
```

此外，`if board[guess_row][guess_col] == "X":`检查应该在当前的and之前或代替设置`board[guess_row][guess_col]`为进行。`"X"``guess_row``guess_col`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:15:10.107

您在`)`冒号之前缺少一个（编辑：您也缺少另一个）。你的行应该是：

```
if((guess_row < 0) or (guess_row > (len(board) -1)) or (guess_col < 0) or (guess_col> (len(board) -1))): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T10:20:00.080

用这个：

```
if(guess_row < 0) or (guess_row > (len(board) -1)) or (guess_col < 0) or (guess_col> (len(board) -1)): 
```

# objective-c - 由 uitableview 驱动的 uipageviewcontroller

> ID：14181147
> 
> 赞同：0
> 
> 时间：2013-01-06T10:13:52.730
> 
> 标签：objective-c, uitableview, uipageviewcontroller

我有一个基于 uitablewview 的应用程序，单击一个单元格将推送一个新视图。我想做的不是对新视图执行推送动画，而是执行 iBooks 中的翻页动画。

我想我必须创建一个 uipageviewcontroller 并使用 uitableview 来翻页。

不过，我不确定如何编写代码。任何人都可以给我一些开始的代码吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:28:37.500

您可以使用 UINavigationController 并使用动画 == NO 进行推送/弹出，而不是使用自定义动画。请参阅有关如何执行此操作的出色帖子：[https ://stackoverflow.com/a/5889757/289843](https://stackoverflow.com/a/5889757/289843)

翻页效果的动画是 UIViewAnimationTransitionCurlUp 和 UIViewAnimationTransitionCurlDown。

# asp.net-mvc - mvc和link中的路由

> ID：14181153
> 
> 赞同：-1
> 
> 时间：2013-01-06T10:14:47.237
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我在 global.asax 中有这些路由

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}/{Name}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional, name = UrlParameter.Optional },
            namespaces: new[] {"MVCTemplateProject.Controllers"}
            );
        routes.MapRoute(
            name: "Post",
            url: "{controller}/{action}/{id}/{Title}",
            defaults: new {controller = "Post", action = "Index", id = UrlParameter.Optional, Title = UrlParameter.Optional},
            namespaces: new[] {"MVCTemplateProject.Controllers"}
            );

        routes.MapRoute(
            name: "GetPostByCategoryName",
            url: "{controller}/{action}/{CategoryName}",
            defaults:
                new {controller = "Post", action = "Index", id = UrlParameter.Optional, CategoryName = UrlParameter.Optional},
            namespaces: new[] {"MVCTemplateProject.Controllers"}
            ); 
```

如果我单击该行并重定向到具有相同地址的相同链接的页面，则 我有一个与此 href [http://mysite.com/Post/GetPostsByTagId/3/a的链接，因此我的链接具有此地址](http://mysite.com/Post/GetPostsByTagId/3/a)[http://mysite .com/Post/GetPostsByTagId/3/a/2/asdasd](http://mysite.com/Post/GetPostsByTagId/3/a/2/asdasd) 并引发错误这是我的链接语法

```
 <a href="@Url.Action(MVC.Post.ActionNames.GetPostsByCategoryId,MVC.Post.Name)\@category.Id\@category.Name.ToSeoUrl()">@category.Name</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:20:20.220

该答案可能无法完全回答您的问题，但应该可以帮助您。

**URL.Action()**

先说一件小事。您链接的 URL 使用的是反斜杠，而应该使用斜杠。所以改变

```
 <a href="@Url.Action(MVC.Post.ActionNames.GetPostsByCategoryId,MVC.Post.Name)\@category.Id\@category.Name.ToSeoUrl()">@category.Name</a> 
```

至

```
 <a href="@Url.Action(MVC.Post.ActionNames.GetPostsByCategoryId,MVC.Post.Name)/@category.Id/@category.Name.ToSeoUrl()">@category.Name</a> 
```

为了让我们帮助您，请同时显示当前结果。

同样在这一部分中，您将希望[为附加的 url 参数使用路由值](http://msdn.microsoft.com/en-us/library/dd460348%28v=vs.108%29.aspx)，以便 MVC 路由系统可以整理出在您的 SEO 优化 URL 中放置什么的位置。那么它看起来像这样：

```
<a href="@Url.Action(MVC.Post.ActionNames.GetPostsByCategoryId,MVC.Post.Name, new { id = category.Id, CategoryName = category.Name.ToSeoUrl() })">@category.Name</a> 
```

**MVC 路由**

关于您的问题的主要部分与路由有关。当前路由的设置方式是第一个将捕获*所有内容*，因为该路由中的所有参数都是可选的。

当您使用`Url.Action()`或当请求与路由匹配时，将使用匹配的第一个可能性。它*不会*试图找到可能的最佳匹配。

所以这个想法是你必须把你最具体的路线放在最上面。如果它们匹配，则使用它们，如果不匹配，它将继续，直到最终最终进入一条包罗万象的路线，就像 MVC 自动为您设置的路线一样。

您的第二条和第三条路线的参数仍然是可选的。你不是说对于那些路由，参数应该是必需的吗？

第二个似乎比第三个更具体，因为它有 4 个参数，而另一个有 3 个参数。第一条似乎被认为是包罗万象的路线。

作为最后一部分，如果您指定默认值，它仍然可以被其他任何东西替换。所以如果你想让它只匹配`PostController`，你必须把它放在 中`url`，而不是`defaults`.

这将导致以下更改的路由规则：

```
routes.MapRoute(
    name: "Post",
    url: "Post/Index/{id}/{Title}",
    defaults: new { controller = "Post", action = "Index" },
    namespaces: new[] {"MVCTemplateProject.Controllers"}
);

routes.MapRoute(
    name: "GetPostByCategoryName",
    url: "Post/GetPostByCategoryName/{CategoryName}",
    defaults: new { controller = "Post", action = "GetPostByCategoryName" },
    namespaces: new[] {"MVCTemplateProject.Controllers"}
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}/{Name}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional, name = UrlParameter.Optional },
    namespaces: new[] {"MVCTemplateProject.Controllers"}
); 
```

你可以看到，`url`s 是为 固定的`PostController`，但是路由并不神奇地知道控制器和动作是什么，所以你仍然需要在你的`defaults`.

**结论**

尝试更多地了解 MVC 路由系统。这个解释应该对你有所帮助。或者它甚至可以帮助您解决问题。

您需要什么并不完全清楚（如果这是）。如果您详细说明您的问题，我可能会详细说明我的答案。

# javascript - javascript:对象

> ID：14181160
> 
> 赞同：2
> 
> 时间：2013-01-06T10:16:09.507
> 
> 标签：javascript

最后，我在下面的代码中看到了一种关闭的味道。

```
function create(parent) {
var F = function() {};
 F.prototype = parent;
return new F();
}

var masterObject = {a: "masterObject value"}
var object1 = create(masterObject);
var object2 = create(masterObject);
var object3 = create(masterObject);
var object3.a = "overridden value";

object1.a; // "masterObject value"
object2.a; // "masterObject value"
object3.a; // "overridden value"

masterObject.a = "new masterObject value"//value is changed now

object1.a; // "new masterObject value"
object2.a; // "new masterObject value"
object3.a; // "overridden value" 
```

object1.a ,abject2.a 的值永久更改。这是因为我更改了全局变量还是关闭的影响？因为我没有再次调用 Create() 函数，为什么值会自动更改？最后一个问题“当我对全局变量进行更改时，这是否会自动影响使用该变量的所有对象？”在我看来，要使该变量生效，我应该再次调用 Create() 函数不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:31:31.640

当您访问 时`object3.a`，JavaScript 首先查看对象的属性。如果对象没有名为 的属性`a`，则接下来检查对象的原型。

Setting`object3.a = "overridden value";`给出`object3`了一个名为 的属性`a`。它不会影响原型的`a`属性。

由于`object1`并且`object2`没有名为 的属性`a`，但它们的原型有，因此当您修改`masterObject`的`a`属性时，所有具有原型的对象的值都会全局更改`masterObject`。

即使您提供了`object3`一个名为 的属性`a`，但您仍然可以访问原型的`a`属性，该属性保持不变：

```
object3.__proto__.a; // "new masterObject value" 
```

基本上，通过提供`object3`一个名为 的属性`a`，您将对象的新属性“放在”原型属性的“前面”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:34:47.540

当您直接更改对象的“a”属性时（就像您所做的那样`var object3.a = "overridden value";`（前面不应该有 a `var`），您更改了该实例自己的“a”属性。

所以，真正发生的是：

`object3.a = "overridden value";`在这里，您在 object3 上**创建了一个新属性。**它以前没有“a”属性。然而，它的原型确实如此，因此`object3.a`是合法的，并且会引用原型的“a”属性。

`masterObject.a = "new masterObject value"`在这里，您更改所有对象的**原型**`create()`（由 创建）。因此，如果您访问对象上的属性“a”，它现在将被更改，除了那些具有**自己的**“a”属性的对象（例如 object3）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T10:49:48.517

发生这种情况是因为继承在[基于原型的](http://en.wikipedia.org/wiki/Prototype-based)语言（例如 javascript）中是如何工作的。当您调用 时`create(masterObject)`，您将返回一个函数对象（您调用的`F`）的新实例，其原型设置为`masterObject`。这意味着 、 和 的原型字段`object1`指向`object2`同`object3`一个对象`masterObject`。

该声明：

```
object3.a  = "overriden value" 
```

创建一个名为`a`in的字段`object3`并为其分配字符串`"overriden value"`，这就是您检查时得到的结果`object3.a`。但是当您查看时`object1.a`，解释器注意到该`a`字段不存在，`object1`因此它遵循原型链接到其父级并检查该字段是否名为`a`. 在这种情况下，原型链接指向的`masterObject`有一个名为的字段，该字段`a`保存字符串`"masterObject value"`，这就是您所看到的。如果`masterObject`没有被调用的字段`a`，解释器将一次又一次地跟踪原型链接，直到找到一个`a`字段或直到它到达一个带有空原型链接的对象，然后它将返回该值`undefined`。

因此，通过更改`masterObject.a`，您可以更改检查时看到的内容，`object1.a`并且`object2.a`因为`object1`并`object2`没有名为 的字段`a`，所以他们从父级“继承”它，`masterObject`。

当您检查时不会发生这种情况，`object3.a`因为您创建了一个名为`a`in的字段`object3`来保存字符串`"overridden value"`。

如果在代码末尾添加：

```
delete object3.a; 
```

您现在会看到`"new masterObject value"`，`object3.a`因为`object3`不再有一个名为 的字段`a`，所以它从其父级“继承”它，`masterObject`.

# macos - 在 NSTableView 中设置 NSPopUpButtonCell 的选定索引

> ID：14181167
> 
> 赞同：0
> 
> 时间：2013-01-06T10:17:04.867
> 
> 标签：macos, cocoa, nstableview, nsmenuitem, nspopupbuttoncell

`NSTableView`我用实例填充一列`NSPopUpButtonCell`（只是将这样的单元格拖到 IB 中的一列）。一切正常，除了一件事：当我尝试`NSPopUpButtonCell`通过在菜单中返回适当的索引来设置其中一个实例的选定项目索引时，`-tableView:objectValueForTableColumn:row:`仍然突出显示第一项。我检查了我在该方法中返回的值，它是正确的（所以它并不总是零）。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:37:22.287

我添加了 `-selectItemAtIndex:`对“willDisplayCell”委托方法的调用。

# wpf - WPF：CroppedBitmap 作为 XAML 中的源不显示任何内容

> ID：14181170
> 
> 赞同：2
> 
> 时间：2013-01-06T10:17:26.310
> 
> 标签：wpf, xaml, bitmap

不知道这里有什么问题。如果我执行以下操作：

```
<Image Width="90" Height="97" Source="<some path>" /> 
```

我的图像按预期显示。但我想裁剪它，所以我使用下面的代码和完全相同的路径。

```
<Image>
    <Image.Source>
        <CroppedBitmap Source="<same path>">
            <CroppedBitmap.SourceRect>
                <Int32Rect X="0" Y="0" Width="100" Height="100" />
            </CroppedBitmap.SourceRect>
        </CroppedBitmap>
    </Image.Source>
</Image> 
```

什么都没有出现。谁能告诉我为什么它不起作用？如果这有所作为，我正在使用 PNG。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T16:29:08.173

我有一个类似的问题，有一个gif。在 Visual Studio 2012 中，图像不会显示在设计视图中，但当我实际运行应用程序时，裁剪后的图像显示得很好。

# regex - 带有 GET 变量的 URL 正则表达式

> ID：14181173
> 
> 赞同：1
> 
> 时间：2013-01-06T10:18:22.447
> 
> 标签：regex, string, mod-rewrite

尝试获取与带有 as value`view.php`的 GET 变量匹配的任何字符串的正则表达式。仅供参考，我需要将此 URL 重写为`file``[a-zA-Z0-9_]*``/file/value`

我做了什么但没有工作：`^view.php\?.*?(&|\?)file=([a-zA-Z0-9_]*).*$`

有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:48:32.510

正如@Lindrian 所问，这将针对以整个 url 开头的字符串`view.py`还是针对整个 url 运行？对于前一种情况，我认为这个简单的正则表达式应该可以正常工作（在此处使用 Python）：

```
In [1]: import re

In [2]: s = 'view.php?foo=bar&file=blablah123&anotherfoo=anotherbar'

In [3]: re.sub(r'view\.php\?.*\bfile=(\w+).*', '/file/\g<1>', s)
Out[3]: '/file/blablah123' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:23:54.097

*   `view.php\?`在这里你接受`viewaphp?`。那样行吗？你可能的意思是`view\.php`。此外，您在最后强制使用问号，而：
*   `(&|\?)`在这里，您再次强制使用与号或问号。因此，您需要类似`view.php??file=...`或`view.php?.*&file=...`

您想要的可能类似于（尽管未经测试，并注意 + 不允许空文件名）：

`^view\.php\?(?:file=)|(?:.*&file=)([a-zA-Z0-9_]+)(?:&|$)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:35:19.083

前导`^`意味着您的整个字符串以 view.php 开头，这可能不是真的。同样在您的正则表达式中，您的假设`file`是最后一个 GET 等。

此正则表达式应匹配`file`任何字符串中的获取值

```
view\.php\?.*?\bfile=(\w*)\b 
```

# .htaccess - 将“&”添加到 .htaccess

> ID：14181174
> 
> 赞同：0
> 
> 时间：2013-01-06T10:18:31.360
> 
> 标签：.htaccess

我有一个网址，应该是这个

```
http://127.0.0.1/search/d&r/ 
```

但是当我在我的 .htaccess 中添加“&”时，我得到的结果与这个 url 相同，

```
http://127.0.0.1/search/d/ 
```

我不能在我的网址中使用“&”，我尝试了一切但我做不到，这是我的 htaccess

```
RewriteEngine On
Options -MultiViews
RewriteRule ^([.//0-9a-zçöşığüA-ZÇÖŞİĞÜ&-]+)/$ tab.php?tab_id=$1 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l 
```

知道如何解决这个问题吗？谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:17:14.980

将＆符号放入替换网址时应进行编码。为此，请使用[`B`flag](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_b)。

```
RewriteEngine On
Options -MultiViews
RewriteRule ^([.//0-9a-zçöşığüA-ZÇÖŞİĞÜ&-]+)/$ tab.php?tab_id=$1 [QSA,L,B] 
```

PS。不确定 RewriteCond 的用途，但它们总是需要放在 RewriteRule 之前。

# php - 执行 Ajax GET 请求以将数据返回给 PHP

> ID：14181176
> 
> 赞同：0
> 
> 时间：2013-01-06T10:18:44.240
> 
> 标签：php, ajax, jquery

我想再次向 API 发出 Ajax 搜索请求并将数据返回到我的 PHP 文件中，现在我正在使用 Javascript 和 jQuery 来完成这项工作。但我想让 PHP 完成所有工作，仅仅是因为我不想公开我的 API 密钥，而且我可能想进一步将数据兑现到数据库中。似乎它应该很简单，但我只是不知道如何清理，调用javascript并返回或如何将它与PHP“集成”。

我在 MVC 模式中做我的 PHP，如下所示：

从“主控制器/索引”调用的控制器：

```
class SearchController {

    public function DoControl($view, $model) {
        $ret = "";

        $ret .= $view->GetSearchForm();

        if($view->TriedToSearch()) {
            if($view->GetSearchString()) {
                $ret .= $model->CheckSearchString($view->GetSearchString());
            } else {
                // Didn't search for anything
            }
        } else {
            // Didn't press the search button
        }

        return $ret;
    }
} 
```

我的视图正在返回一个 HTML 表单，检查是否按下了提交并返回了我发送到上面的模型的搜索字符串。

模型：

```
class SearchModel {

    public function CheckSearchString($searchString) {
        // 1\. Call Googlebooks api with the searchstring
        // 2\. Get JSON response to return to the controller
        // 3\. The controller sends the data to the View for rendering
    }
} 
```

我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:01:18.440

我不完全确定，但您似乎在问如何在没有 JavaScript 的情况下执行 AJAX 请求。`XmlHttpRequest`你不能这样做——没有 JavaScript就不可能使用对象。据传说，这就是 AJAX 名称中“J”的由来。

听起来您需要使用[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)来调用特定的 API。RESTful 状态允许您使用 Web 服务根据预定义的 API 返回特定数据。数据可以以 XML 或 JSON 格式返回。

使用 Google 提供的任何键，您都可以通过 PHP 的 cURL 实现非常轻松地做到这一点。

有关 PHP API 和示例代码的链接，请参阅 Google 的[Google Books API 系列](https://developers.google.com/books/docs/v1/libraries)页面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T10:41:39.997

~~下面的练习对你有用吗？如果您只想在代码中实现 ajax 功能。~~

[简单的 AJAX - PHP 和 Javascript](http://www.switchonthecode.com/tutorials/simple-ajax-php-and-javascript)

~~我很抱歉弄错了内容。下面这两个怎么样：~~

 ~~来自另一个stackoverflow问题的php
[PHP HTTP-Request *中的](https://stackoverflow.com/questions/4565451/php-http-request)[简单http请求示例](https://gist.github.com/989974)

但我认为 ajax 主要是客户端程序的含义。在服务器端，只需将其称为 http 请求。~~

# java - java中如何使用数组列表访问访问列表类型对象的方法

> ID：14181179
> 
> 赞同：0
> 
> 时间：2013-01-06T10:19:02.977
> 
> 标签：java

在我的程序中，有三个班级 Student、School 和 TestStudent。我已经在学生班级中声明了学生状态，并且还有一些获取学生主题的方法，我在学校班级中创建了一个学生类型的数组列表，但是当我尝试在学校访问学生的方法时，我得到错误 newStudent type can not be resolve .这是我的代码。

```
public class Student {
        String name;
    String subject;
    int age;
    Student(String name,String subject,int age){
    this.name = name;
    this.subject = subject;
    this.age = age;
}
public void setName(String name){
    this.name = name;
}
public String getName(){
    return this.name;
}
public String getSubject(){
    return this.subject;
}
public int getAge(){
    return this.age;
}

}

public class School {
public ArrayList <Student> students = new ArrayList <Student>(); 
public void addStudent(String name,String subject,int age){
    Student newStudent = new Student(name,subject,age);
    students.add(newStudent);
}
public void showSubject(String student){
     newStudent.getSubject();

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T10:21:42.790

```
newStudent.getSubject(); 
```

这不是你想要的。因为你还没有`student`从`ArrayList`.

您需要遍历`ArrayList`, 并查看哪个学生具有作为传入参数的名称。因此，只需使用`for-each`循环遍历您的`ArrayList`，并返回适当的 Student。

因此，您的方法应如下所示： -

```
public void showSubject(String student){
     for (Student student: students) {
        if (student.getName().equals(student)) {
            System.out.println(student.getSubject());
        }
     }
} 
```

**请注意，正如@Peter 在**[他的回答](https://stackoverflow.com/a/14181222/1679863)中所解释的那样，在此处使用`Map`会是一个更好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T10:23:46.403

如果您想按姓名查找学生，我会将学生的姓名设为不可变并使用 a`Map<String, Student>`代替。这将允许你写

```
 Student student = map.get(studentName); 
```

使用列表，您必须按照 Rohit 的建议搜索每个条目。注意：一个列表可以有多个同名的学生（就像在现实生活中一样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:21:24.000

`newStudent`是 中的局部变量`addStudent()`，因此您无法从 中访问它`showSubject()`。

我不知道您访问该主题的逻辑应该是什么，但是，例如，可以通过`students.get(0).getSubject()`[如果列表不为空]访问它

# sql - 为什么 SQL 数据库使用预写日志而不是命令日志？

> ID：14181180
> 
> 赞同：51
> 
> 时间：2013-01-06T10:19:18.600
> 
> 标签：sql, database, logging, transactions, voltdb

我阅读了有关 Voltdb 的[命令日志](http://voltdb.com/docs/UsingVoltDB/ChapCmdLog.php)。命令日志记录事务调用，而不是像预写日志那样记录每行更改。通过仅记录调用，命令日志保持在最低限度，从而限制了磁盘 I/O 对性能的影响。

谁能解释为什么 Voltdb 使用命令日志以及为什么 Postgres、MySQL、SQLServer、Oracle 等标准 SQL 数据库使用预写日志背后的数据库理论？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-10T14:58:22.237

我认为最好改写：

> 为什么新的分布式 VoltDB 使用命令日志而不是预写日志？

让我们做一个实验，假设您要编写自己的存储/数据库实现。毫无疑问，您已经足够先进，可以抽象文件系统并使用块存储以及一些额外的优化。

一些基本术语：

*   状态：在给定时间点存储的信息
*   命令：指示存储更改其状态

因此，您的数据库可能如下所示：

![在此处输入图像描述](../Images/67217a1edad554c3df9c4d3db92b1bf7.png)

下一步是执行一些命令：

![在此处输入图像描述](../Images/59e3128ae568fc712172ce6076e164a9.png)

请注意几个重要方面：

1.  一个命令可能会影响很多存储的实体，所以很多块会变脏
2.  下一个状态是当前状态和命令的函数

可以跳过一些中间状态，因为有一个命令链就足够了。

![在此处输入图像描述](../Images/fbfe5892e2d5b125cc1a9b423856894f.png)

最后，您需要保证数据的完整性。

*   **Write-Ahead Logging** - 中心概念是在对永久存储进行任何重大更新之前，应记录**状态更改。**按照我们的想法，我们可以记录每个块的增量更改。
*   **命令记录**- 中心概念是仅记录用于生成状态的**命令。**

![在此处输入图像描述](../Images/49b5fed76a37509d431185e2cd9304d8.png)

这两种方法各有利弊。Write-Ahead log 包含所有更改的数据，Command log 将需要附加处理，但速度快且轻量级。

[VoltDB：命令记录和恢复](http://voltdb.com/docs/UsingVoltDB/ChapCmdLog.php)

> 命令日志记录的关键是它记录事务的调用，而不是结果。通过仅记录调用，命令日志保持在最低限度，从而限制了磁盘 I/O 对性能的影响。

**补充说明**

[SQLite：预写式日志记录](http://www.sqlite.org/wal.html)

> 传统的回滚日志的工作原理是将原始未更改的数据库内容的副本写入单独的回滚日志文件，然后将更改直接写入数据库文件。
> 
> 当指示提交的特殊记录附加到 WAL 时，会发生 COMMIT。因此，COMMIT 可以在不写入原始数据库的情况下发生，这允许读者在将更改同时提交到 WAL 的同时继续从原始未更改的数据库进行操作。

[PostgreSQL：预写式日志记录 (WAL)](http://www.postgresql.org/docs/9.1/static/wal-intro.html)

> 使用 WAL 会显着减少磁盘写入次数，因为只需要将日志文件刷新到磁盘以保证事务被提交，而不是事务更改的每个数据文件。
> 
> 日志文件是按顺序写入的，因此同步日志的成本远低于刷新数据页的成本。对于处理涉及数据存储不同部分的许多小事务的服务器来说尤其如此。此外，当服务器正在处理许多小的并发事务时，日志文件的一个 fsync 可能足以提交许多事务。

**结论**

命令记录：

1.  是比较快的
2.  占地面积小
3.  有更重的“重播”程序
4.  需要频繁的快照

预写日志是一种提供原子性的技术。更好的命令日志记录性能还应该改进事务处理。[1 英尺上的数据库](http://db.cs.berkeley.edu/topics/lecs/dbprimer/)

![在此处输入图像描述](../Images/095b905ccdcce13700f8b4ff5d826740.png)

**确认**

[VoltDB 博客：VoltDB 命令记录简介](http://blog.voltdb.com/intro-to-voltdb-command-logging/)

> 命令日志记录优于 ARIES 样式日志记录的一个优点是可以在执行开始之前记录事务，而不是执行事务并等待日志数据刷新到磁盘。另一个优点是命令日志所需的 IO 吞吐量受用于中继命令的网络的限制，在 Gig-E 的情况下，这种吞吐量可以通过廉价的商品磁盘来满足。

重要的是要记住 VoltDB 是按其性质分布的。所以事务处理起来有点棘手，性能影响很明显。

[VoltDB 博客：VoltDB 的新命令记录功能](http://blog.voltdb.com/voltdbs-new-command-logging-feature/)

> VoltDB 中的命令日志由存储过程调用及其参数组成。在每个节点上创建一个日志，并且每个日志都被复制，因为所有工作都复制到多个节点。这会生成一个复制的命令日志，可以在重播时进行重复数据删除。因为 VoltDB 事务是强排序的，所以命令日志也包含排序信息。因此，回放可以按照原始事务运行的确切顺序发生，并具有 VoltDB 提供的完整事务隔离。由于调用本身通常小于修改后的数据，并且可以在提交之前记录下来，因此这种方法对性能的影响非常小。这意味着 VoltDB 用户可以获得相同类型的平流层性能数字，并具有额外的耐用性保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T03:57:44.143

从 Postgres 的预写[http://www.postgresql.org/docs/9.1/static/wal-intro.html](http://www.postgresql.org/docs/9.1/static/wal-intro.html)和 VoltDB 的命令日志（您引用的）的描述中，我看不出有太大的区别。它似乎是具有不同名称的相同概念。

两者都只将日志文件同步到磁盘而不同步数据，以便可以通过重播日志文件来恢复数据。

VoltDB 的第 10.4 节解释说，他们的社区版本没有命令日志，因此无法通过 ACID 测试。即使在企业版中，我也看不到他们的事务隔离的细节（例如[http://www.postgresql.org/docs/9.1/static/transaction-iso.html](http://www.postgresql.org/docs/9.1/static/transaction-iso.html)）需要让我对 VoltDB 感到满意像Postges一样严重。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-03T19:34:39.690

使用 WAL，读者可以从未刷新的日志中读取页面。不对主数据库进行任何修改。使用命令日志，您无法读取命令日志。

因此，命令日志记录有很大不同。VoltDB 使用命令日志记录来创建恢复点并确保持久性，当然——但它正在实时写入主数据库存储（RAM）——伴随着所有伴随的锁定问题等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T21:49:07.470

它实际上只是粒度问题。它们在存储过程级别记录操作，大多数 RDBMS 在单个语句级别（和“更低”）记录。他们关于优势的宣传也有点牵强附会：

> 命令日志记录优于 ARIES 样式日志记录的一个优点是可以在执行开始之前记录事务，而不是执行事务并等待日志数据刷新到磁盘。

他们也必须等待命令被记录，它只是一个小得多的记录。

如果我没记错的话 VoltDB 的事务单元是一个存储过程。传统的 RDBMS 通常需要支持包含任意数量语句的 ad-hoc 事务，因此过程级日志记录是不可能的。此外，在传统的 RDBMS 中，存储过程通常不是真正的确定性（即，给定的参数+日志+数据总是产生相同的输出），它们必须这样才能工作。

然而，对于这种受约束的 RDBMS 模型，性能改进将是巨大的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T09:47:49.990

我的阅读方式如下：（我自己的看法）

此处描述的命令日志记录仅记录发生的事务，而不记录其中发生的事情或发生在它们身上的事情。好的，这就是神奇的部分......如果你想回滚，你需要恢复最后一个快照，然后你可以重播之后应用的所有事务（在上面的链接中描述）。因此，您可以有效地恢复备份并重新应用所有脚本，现在只有 VoltDB 为您自动化了它。

我看到的真正区别是您不能像使用普通事务日志那样在逻辑上回滚到某个时间点。正常事务日志（MSSQL、MySQL 等）可以轻松回滚到某个时间点（在正确的设置中），因为事务可以“反转”。

有趣的问题出现了 - 参考 pedz 的 pos，即使有命令日志，它是否总是通过 ACID 测试？会多读书...

补充：做了更多的阅读，我认为这对于非常大和繁忙的事务数据库来说不是一个好主意。当命令日志填满时，会自动创建数据库快照，以使您免受大事务日志和用于此的 IO 的影响？定期执行快照会产生大量 IO，而且您的内存也快到了极限。Alos，在我看来，您失去了轻松回滚到最后一个自动快照之前的时间点的能力 - 认为这将变得非常难以管理。

我宁愿坚持使用事务系统的事务日志。它已被证明并且有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-15T03:35:53.437

在我开始解释之前，有几个术语：

日志方案：数据库使用[影子分页](https://en.wikipedia.org/wiki/Shadow_paging)、预写日志（WAL）等日志方案来实现并发、隔离和持久性（如何不同的主题）。

为了理解为什么 WAL 更好，让我们看一个影子分页的问题。在影子分页中，数据库使用数据库的主版本和影子版本，因此如果表大小为 10 亿并且缓冲池管理器没有足够的内存来保存内存中的所有元组（记录），则脏页在未提交事务之前不会将其写入主版本。

[![在此处输入图像描述](../Images/5817bf9fcd03628ce7e9ba360c6c132e.png)](https://i.stack.imgur.com/h5A3L.png)

一旦提交了所有事务，就会切换标志并且影子版本成为主版本。在上图中，有`Page 3 and Page 5`一些旧的并且可以被垃圾收集。

1.  这种方法的问题是留下了大量随机定位的碎片元组，这与顺序访问脏页相比要慢，这就是预写日志所做的。

2.  使用 WAL 的另一个优点是运行时性能（因为您没有执行随机 IO 来刷新页面）但恢复时间较慢。然而，使用影子分页，恢复性能更快（偶尔需要）。

# grails - 对于 grails 2.1.1，类路径中的 grails-app/conf 是否不再存在？

> ID：14181181
> 
> 赞同：0
> 
> 时间：2013-01-06T10:19:29.927
> 
> 标签：grails

有这样的引导程序：

```
class BootStrap {                                                                                                                                                                                                                              

    def init = { servletContext ->                                                                                                                                                                                                             
      def file = servletContext.getResource("ehcache.xml")                                                                                                                                                                                     
       println "+++ ${file}"                                                                                                                                                                                           
    }                                                                                                                                                                                                                                          
    def destroy = {                                                                                                                                                                                                                            
    }                                                                                                                                                                                                                                          
} 
```

应用程序包含`ehcache.xml`grails-app/conf 目录中的文件，但它打印

+++ 空

在引导期间。问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:23:00.707

`servletContext.getResource`不在类路径上，它在`web-app`. 改为尝试（这可能需要闭包之外的`grailsApplication.classLoader.getResource`类级别，我不确定）。`def grailsApplication``init`

或者，将文件移动到`web-app/WEB-INF`，然后

```
servletContext.getResource('/WEB-INF/ehcache.xml') 
```

应该管用。

# java - 有人可以帮我逐行理解这段代码的渲染方法中发生了什么吗？

> ID：14181182
> 
> 赞同：-1
> 
> 时间：2013-01-06T10:19:35.660
> 
> 标签：java, multithreading, rendering, buffer

我也不完全理解 volatile 和 synchronized 修饰符的作用。但基本上这应该是我从 youtube 系列中学习的游戏的开端，到目前为止它所做的只是启动一个线程，该线程有一个 while 循环，在内部运行方法更新和渲染。事情是除了颜色的设置和矩形的创建之外，我不了解渲染方法中的任何内容。

```
package game;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferStrategy;

import javax.swing.JFrame;

public class Game implements Runnable {

    public static Thread Game;
    public volatile boolean running = false;

    public void start() {
        running = true;
        Game = new Thread(this);
        Game.start();
    }

    public synchronized void stop() {
        running = false;
        try {
            Game.join();
        } catch (InterruptedException e) {
            System.out.println("asddsa");
        }

    }

    public void update() {

    }

    public void render() {
        BufferStrategy bs = GameFrame.GraphicsBoard.getBufferStrategy();
        if (bs == null) {
            GameFrame.GraphicsBoard.createBufferStrategy(3);
            return;
        }
        Graphics g = bs.getDrawGraphics();
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, GameFrame.GraphicsBoard.getWidth(),
                GameFrame.GraphicsBoard.getHeight());
        g.dispose();
        bs.show();
    }

    public synchronized void run() {
        new GameFrame();

        while (running) {
            update();
            render();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:34:48.780

***易挥发的***

Java 中的 Volatile 用作 Java 编译器和线程的指示器，它们不缓存此变量的值并始终从主内存中读取它。

在这个代码示例中，一个线程（游戏线程）可以缓存“*正在运行*”的值，而不是每次都从主内存中获取它，并且如果在任何其他线程之间更改该值；该线程将看不到它。在 java 中将布尔变量“ *running* ”设置为 volatile 可确保不会发生这种情况。

[***同步的***](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

同步用于使您的方法线程安全。

*编辑*：长答案如下。

如果您的代码在多线程环境中执行，您需要对在多个线程之间共享的对象进行同步，以避免任何状态损坏或任何类型的意外行为。

java中的synchronized关键字提供了锁定，确保共享资源的互斥访问并防止数据竞争。在访问同步的代码之前，线程还需要获取锁。

可以对整个方法或特定块进行同步。该示例显示了方法同步。意味着整个方法被锁定，并且在任何时候只有一个线程可以访问您的方法。

不建议使用方法同步，因为它可能会降低性能。此回复中未涵盖其他优点和缺点。

# google-provisioning-api - 如何使用 Google Apps OrgUser 配置 API 提要获取 1st 100 之外的 orguser

> ID：14181183
> 
> 赞同：0
> 
> 时间：2013-01-06T10:19:38.350
> 
> 标签：google-provisioning-api

我将 Zend 的 gdata 库用于 Google Apps 配置 API。由于 Zend 还不支持获取 org 用户（库没有为此提要提供检索功能），我正在对 url 进行自定义 gdata 查询（如文档 developers.google.com/google-apps/provisioning 中所建议的） /#retrieving_organization_users_experimental）：

```
apps-apis.google.com/a/feeds/orguser/2.0/'.$customerId.'?get=all 
```

这适用于 <= 100 个用户。

现在，我创建了一个包含 5 个 OU 的 125 个用户的域。当我获取上述 URI 时，我得到了前 100 个用户（如记录和预期的那样）。但是，我找不到这里提到的分页链接：developers.google.com/google-apps/provisioning/reference#Results_Pagination

这是我的 orguser 提要的开始：

```
<?xml version='1.0' encoding='UTF-8'?><feed xmlns='http://www.w3.org/2005/Atom' xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' xmlns:apps='http://schemas.google.com/apps/2006'><id>https://apps-apis.google.com/a/feeds/orguser/2.0/C00xxxxxxx</id><updated>2013-01-06T08:17:43.520Z</updated><**link rel='next' type='application/atom+xml' href='https://apps-apis.google.com/a/feeds/orguser/2.0/C00xxxxxxx?get=all&amp;startKey=RASS03jtnz0s2orxmbn.**'/><link rel='http://schemas.google.com/g/2005#feed' type='application/atom+xml' href='https://apps-apis.google.com/a/feeds/orguser/2.0/C00xxxxx'/> 
```

我试过了`https://apps-apis.google.com/a/feeds/orguser/2.0/C00xxxxxxx?get=all&amp;startKey=RASS03jtnz0s2orxmbn`。链接，但它为我提供了与链接提供的完全相同的 100 个用户`https://apps-apis.google.com/a/feeds/orguser/2.0/C00xxxxxxx?get=all`。这是我的提要中唯一出现的“下一个”一词，因此没有其他 URI 我可以尝试获取接下来的 25 个用户。

所以我只能从这个 API 调用中获得 100 个用户。如何获取接下来的 25 个用户？示例/代码将不胜感激。或者我做错了什么？

请帮助 - 这阻止了紧急交付。

谢谢！，维奈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:18:40.043

您的第二个请求应如下所示：

```
https://apps-apis.google.com/a/feeds/orguser/2.0/C00xxxxxx?startKey=RASS03jtnz0s2orxmbn&get=all 
```

startKey 应设置为下一个参数的值，并且 get 应继续为每个页面请求的全部。

另外，请确保 URL 已解码，如果 &`&amp;`在请求中被编码，则 Google 的服务器会将 all`all&amp;startKey=RASS03jtnz0s2orxmbn`视为 get 的值，并且根本看不到 startKey 参数。

# php - How do you rearrange text within a string from a MySQL query?

> ID：14181186
> 
> 赞同：1
> 
> 时间：2013-01-06T10:20:11.433
> 
> 标签：php, mysql, string

**Solution I am looking for:** I would like to rearrange words within the text string results such that the job title is moved from the end of the string to the beginning of the string for each line item.

Currently, I am retrieving data from an external medical database query (**$query**). However, I cannot make any changes to the database or to the MySQL query statement itself.

The **$query** is retrieved and I then place the results in a **$data** array via the following command:

```
while($row = mysql_fetch_assoc($query)){$data[] = $row;} 
```

I then change all the job titles to uppercase in the **$data** array as follows:

```
$job_01 = 'anesthesiologist';
$job_02 = 'dentist';
$job_03 = 'general practitioner';
$job_04 = 'internist';
$job_05 = 'lawyer';
$job_06 = 'manager';
$job_07 = 'pediatrician';
$job_08 = 'psychiatrist';

$replace_01 = 'ANESTHESIOLOGIST';
$replace_02 = 'DENTIST';
$replace_03 = 'GENERAL PRACTITIONER';
$replace_04 = 'INTERNIST';
$replace_05 = 'LAWYER';
$replace_06 = 'MANAGER';
$replace_07 = 'PEDIATRICIAN';
$replace_08 = 'PSYCHIATRIST';

$searchArray = array($job_01, $job_02, $job_03, $job_04, $job_05, $job_06, $job_07, $job_08);
$replaceArray = array($replace_01, $replace_02, $replace_03, $replace_04, $replace_05, $replace_06, $replace_07, $replace_08);

for ($i=0; $i<=count($data)-1; $i++) {
 $line[$i] = str_ireplace($searchArray, $replaceArray, $data[$i]));
} 
```

The final output is in the following line item text string format:

**Example Query results (4 line items)**

```
California Long time medical practitioner  -  ANESTHESIOLOGIST 55yr
New York Specializing in working with semi-passive children - PEDIATRICIAN (doctor) 42yr
Nevada Currently working in a new medical office - PSYCHIATRIST 38yr
Texas Represents the medical-liability industry - LAWYER (attorney) 45yr 
```

I would like to rearrange these results such that I can output the data to my users in the following format by moving the **job title** to the **beginning** of each line item as in:

**Desired results (usually over 1000 items)**

```
ANESTHESIOLOGIST - California Long time medical practitioner  - 55yr
PEDIATRICIAN - New York Specializing in working with semi-passive children - (doctor) 42yr
PSYCHIATRIST - Nevada Currently working in a new medical office - psychiatrist 38yr
LAWYER - Texas Represents the medical-liability industry - lawyer (attorney) 45yr 
```

Ideally, if possible, it would also be nice to have the **age** moved to the **beginning** of the text string results as follows:

**Ideal Results**

```
55yr - ANESTHESIOLOGIST - California Long time medical practitioner
42yr - PEDIATRICIAN - New York Specializing in working with semi-passive children - (doctor)
38yr - PSYCHIATRIST - Nevada Currently working in a new medical office - psychiatrist
45yr - LAWYER - Texas Represents the medical-liability industry - lawyer (attorney) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:48:34.920

您可以使用正则表达式来提取和重新排列数组：

```
for ($i=0; $i<=count($data)-1; $i++) {
    $line[$i] = str_ireplace($searchArray, $replaceArray, $data[$i]));
    // variant a, complete line
    if(preg_match_all('/(.*)\s+-\s+(.*)\s+(\d+)yr$/', $line[$i],$matches)) {
        $line[$i] = $matches[3][0].'yr - '.$matches[2][0].' - '.$matches[1][0];
    // variant b, a line with age, but no jobtitle
    } elseif(preg_match_all('/(.*)\s+-\s+(\d+)yr$/', $line[$i],$matches)) {
        $line[$i] = $matches[2][0].'yr - '.$matches[1][0];
    // variant c, no age
    } elseif(preg_match_all('/(.*)\s+-\s+(.*)$/', $line[$i],$matches)) {
        $line[$i] = $matches[2][0].' - '.$matches[1][0];
    }
    // in other cases (no age, no jobtitle), the line is not modified at all.        
} 
```

# python - Why does the output of my Python program look this (very odd) way?

> ID：14181187
> 
> 赞同：4
> 
> 时间：2013-01-06T10:20:11.757
> 
> 标签：python, multithreading, output

I've worked with Python for a while, but I've never really done any concurrency in it before today. I stumbled upon [this blog post](http://www.blog.pythonlibrary.org/2012/08/01/python-concurrency-an-example-of-a-queue/) and decided to make a similar (but simpler) example:

```
import os
import threading
import Queue

class Worker(threading.Thread):
    def __init__(self, queue, num):
        threading.Thread.__init__(self)
        self.queue = queue
        self.num = num

    def run(self):
        while True:
            text = self.queue.get()
            #print "{} :: {}".format(self.num, text)
            print "%s :: %s" % (self.num, text)
            self.queue.task_done()

nonsense = ["BLUBTOR", "more nonsense", "cookies taste good", "what is?!"]
queue = Queue.Queue()

for i in xrange(4):
    # Give the worker the queue and also its "number"
    t = Worker(queue, i)
    t.setDaemon(True)
    t.start()

for gibberish in nonsense:
    queue.put(gibberish)

queue.join() 
```

It seems to work fine, but there seems to be some problem with the prints which I cannot figure out. A couple of test runs:

```
chris@DPC3:~/code/pythonthreading$ python owntest.py 
0 :: BLUBTOR
 1 :: more nonsense
3 :: cookies taste good
 2 :: what is?!
chris@DPC3:~/code/pythonthreading$ python owntest.py 
0 :: BLUBTOR
2 :: more nonsense
3 :: cookies taste good0 :: what is?!

chris@DPC3:~/code/pythonthreading$ python owntest.py 
2 :: BLUBTOR
 3 :: more nonsense1 :: cookies taste good

 2 :: what is?!
chris@DPC3:~/code/pythonthreading$ 
```

Why is the output formatted this oddly?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T10:51:41.943

`print`不是原子的。

以下行：

```
 print "%s :: %s" % (self.num, text) 
```

被翻译成以下字节码：

```
 24 LOAD_CONST               1 ('%s :: %s')
         27 LOAD_FAST                0 (self)
         30 LOAD_ATTR                3 (num)
         33 LOAD_FAST                1 (text)
         36 BUILD_TUPLE              2
         39 BINARY_MODULO       
         40 PRINT_ITEM          
         41 PRINT_NEWLINE 
```

如您所见，那里有两个打印字节码（`PRINT_ITEM`和`PRINT_NEWLINE`）。如果线程在两者之间被抢占，你会看到你所看到的。

我同意其他人`sys.stdout.write()`对此用例更安全的选择，因为：

1.  它迫使您在编写整个字符串之前对其进行格式化（`print`您可能会不小心使用`print a, b, c,`并最终得到三个单独的写入而不是一个）；
2.  它回避了软空间和自动换行的问题，这两者都可以与`print`程序其他部分的语句交互。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T10:47:25.947

打印不是线程安全的。

当一些字符被一个线程复制到`stdout`流中时，另一个线程被调度，它*也在*打印，它可以将字符复制到`stdout`流中。

结果是您`stdout`不包含谨慎的`print`调用结果，而是来自不同线程的混合输出，所有这些都混杂在一起。

解决方法是`sys.stdout.write()`改用；这*是*一个原子（线程安全）操作。确保包含明确的`\n`换行符。

# objective-c - Basic iOS Networking Questions

> ID：14181189
> 
> 赞同：0
> 
> 时间：2013-01-06T10:20:21.700
> 
> 标签：objective-c, ios, xcode

I am trying to do my first App which is a basic joke app that uses tableViews and allows users to add their own jokes to the app database. My problem is in the networking department and I think I'm getting confused with all that is out there. I have a couple basic questions that I was hoping to get answers or opinions on:

1.  I am really confused about the path that is taken from the app on the iphone to the database that is holding the data. Does the tableview controller call a AFNetworking object, that then sends a JSON object to a server-side script(??), that then queries a SQL database and returns the data? I am just looking for a basic path that allows the user to add their own joke to the database.

2.  Is this a URL request? When I see URL request I think of a web page.

3.  I have a website that is hosted on GoDaddy.com. Is this also sufficient to hold the database for the jokes on the iOS app?

I have been searching for days and have gotten no simple answer. I just want to study the correct subjects instead of wasting time. ANY help or pointers would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:06:52.340

1.  这里有两种存储形式——某种形式的网络商店（例如 MySQL 之类的服务器数据库技术）和本地 iOS CoreData（如果你想在本地存储，或者每次都发出新请求，因此需要连接）。您可以使用 Web 请求（可能使用 AFNetworking 库）来确保本地商店和在线商店匹配。例如，一个典型的流程可能是 - 在应用程序启动时执行一个 GET 请求以使用返回 JSON 文件的服务 URL 从服务器中提取所有笑话，然后更新 Coredata。要上传新笑话，请使用执行类似功能的 POST 请求。

2.  “URL 请求”映射到使用某种形式的逻辑来确定如何返回某些数据的 Web 技术。例如，请求可能到达 Web 服务器（例如 Apache），该服务器将您的请求路由到 PHP 控制器文件，该文件然后与数据库对话并返回您的数据。

3.  GoDaddy 是一个支持 PHP 和 MySQL 的托管平台（以及其他可以实现相同技巧的技术），所以是的。

在您的情况下，我会研究模型-视图-控制器设计模式。我认为您的应用程序将是一次很棒的学习体验，您应该学习很多核心概念。

**编辑以在第一条评论中回答您的问题：**

您的问题： 1\. JSON 文件是存储在设备上还是服务器上？2\. JSON 会取代 JavaScript 吗？

答案：

JSON 是 JavaScript Object Notation 的缩写，它只是一种表示数据的方式，并不能替代任何东西。它特别有用，因为大多数语言都支持以技术可以理解的方式解析 JSON。这是一种发送数据的便捷方式，因为它非常轻量级并且得到广泛支持。

在这种情况下，JSON 可能不会存储在服务器上。数据将存储在数据库中。您的请求将被映射到服务器端技术，例如 PHP 或 Ruby，然后向数据库询问信息，将其转换为 JSON 以发送并返回给客户端。（可以将数据存储在服务器上的 JSON 文件中，但您必须编写服务器端代码来直接操作 JSON 文件，这将是一项艰苦的工作，而且不太优雅！）

客户端（在本例中为 iOS 设备）会将 JSON 解析为 Objective-C 可以使用的对象，例如 NSDictionary。

希望有帮助！

# javascript - Event doesnt fire in chrome addon

> ID：14181190
> 
> 赞同：0
> 
> 时间：2013-01-06T10:20:33.360
> 
> 标签：javascript, google-chrome, google-chrome-extension

So, I've been back and forth with this problem. What I want is to execute som piece of code (in a injected.js file) when a button is pressed on the website. I want to run code that I've written myself.

This should be do-able? I've looked it up, and this is taken from the developer docs:

*Content scripts execute in a special environment called an isolated world. They **have access to the DOM** of the page they are injected into, but not to any JavaScript variables or functions created by the page. **It looks to each content script as if there is no other JavaScript executing on the page it is running on**. The same is true in reverse: JavaScript running on the page cannot call any functions or access any variables defined by content scripts.*

As can be seen in the example, also found on the same page (http://developer.chrome.com/extensions/content_scripts.html#execution-environment) I should be able to attach a click event to something and the execute code from the same .js file when that button is clicked? Right?

Anyway, here's the code I've written:

```
$sidebar = $('<div><div></div></div>')
    .css('background', '#eee')
    .css('width', '20%')
    .css('position', 'fixed')
    .css('right', '0px')
    .css('top', '0px')
    .css('height', '100%');

$form = $('<br/><center><div class="input-append">\
  <input class="span2" id="add_cat_input"  type="text">\
  <button class="btn" type="button">Add category</button>\
  </div>\
  <div class="input-append"><select id="categories">\
  <option>A</option>\
  <option>B</option>\
  <option>C</option>\
  <option>D</option>\
  <option>E</option>\
</select>\
<button class="btn" type="button">Edit</button><button class="btn" type="button">Delete</button>\
</div></center>');

$('body').prepend($sidebar);
$sidebar.append($form);

$(document).ready(function() {
    console.log(document.getElementById("add_cat_input"));
    document.getElementById("add_cat_input").addEventListener("click", function() {
        console.log('hej');
}, false);
}); 
```

But nothing happends when I press 'Add category'.

Can anyone explain why? Am I doing it wrong?

The code above is from myscript.js. Here is my manifest.json

```
{
  "name" : "πSpend",
  "version" : "0.1",
  "description" : "Creates a piechart of the spendings in your bankaccount.",
  "permissions": [ "cookies", "tabs", "http://*/*", "contextMenus" ],
  "icons": { "16": "cookie.png", "48": "cookie.png", "128": "cookie.png" },
  "browser_action": {
    "default_icon": "cookie.png",
    "default_popup": "popup.html"
  },
  "background": {
    "scripts": ["background.js"]
  },
  "manifest_version": 2,
  "content_scripts": [
    {
      "matches": ["https://internetbanken.privat.nordea.se/*"],
      "css": [ "bootstrap.min.css" ],
      "js": ["jquery.js", "raphael-min.js", "g.raphael-min.js", "g.pie-min.js", "myscript.js"]
    }
  ]
} 
```

On the way I tried to use some form of message posting instead, but this line:

```
var port = chrome.extension.connect(); 
```

Gets me this error:

```
Port error: Could not establish connection. Receiving end does not exist. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:03:13.153

`add_cat_input`绑定到侦听器的元素`click`不是按钮，而是文本字段。“添加类别”按钮在您的代码中没有 ID。

# math - Ordered triplets of numbers

> ID：14181191
> 
> 赞同：-3
> 
> 时间：2013-01-06T10:20:38.367
> 
> 标签：math, combinatorics

> Hello everyone, I am solving a problem to count the no. of ordered triples of different numbers (X1,X2,X3) where X could be any from 1 to Ni for i=1,2,3

For 2 4 2

o/p is 4

For 25 12 2012

o/p is 578880

> What is the meaning of ordered triples here in the above problem??
> 
> Thanx very much in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:32:30.437

> 这里的有序三元组是什么意思？

*三元组*由三个数字组成。因此，以下是三元组：

```
 1 2 3
10 2 5
 1 1 7 
```

在*有序*的三元组中，顺序很重要。因此，即使它们由相同的一组数字组成，以下也被认为是不同的

```
1 2 5
1 5 2
2 1 5
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:57:06.707

如果要计算有序三元组的总数

```
Arrays.sort(n);
int answer= n[0]*(n[1]-1)*(n[2]-2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T13:31:09.593

对于您的示例 2 4 2，不同数字的有序三元组将是：

当 X1 变化 1 到 2 时，X2 变化 1 到 4 并且 X3 变化 1 到 2

```
X1 X2 X3
1, 3, 2
1, 4, 2
2, 3, 1
2, 4, 1 
```

# c# - 解析 JSON C# 错误

> ID：14181193
> 
> 赞同：1
> 
> 时间：2013-01-06T10:20:47.247
> 
> 标签：c#, json, json.net

我正在尝试获取 JSON 数据但出现错误。

> 解析值时遇到意外字符: 。路径 ''，第 0 行，第 0 位置。

我正在使用 Net 4.5 和 JSON.Net Framework 这是我的代码

```
WebClient net = new WebClient();
string str = await net.DownloadStringTaskAsync(url);
JObject o = JObject.Parse(str); // ERROR Here 
```

而我的代码 JSON Data View on Webservice [http://sv1.volcanosoft.com/test/index.php?area=ho-chi-minh](http://sv1.volcanosoft.com/test/index.php?area=ho-chi-minh) 这个站点格式 index.php UTF-8 和 php 文件头

```
header('Content-Type:application/json; charset=utf-8');
echo '{"item":';
echo json_encode($data);
echo '}'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:06:58.613

下载的字符串以两个[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)(U+FEFF) 开头，JSON.NET 解析器（正确）无法理解。

下载的字符串包含两个 BOM 的原因是您的服务发送的数据包含其中 3 个。第一个通过 UTF-8 编码自动删除，但其他两个保留。

BOM 可用于无法存储使用的字符集的文件。但是您正在发送标头中使用的字符集，因此您根本不需要发送 BOM。并且发送其中三个肯定是不正确的。

我相信这是由您的 PHP 文件中的 BOM 引起的，因此您可能应该从那里删除它们。

# mysql - MySQL每日复制

> ID：14181198
> 
> 赞同：0
> 
> 时间：2013-01-06T10:21:20.333
> 
> 标签：mysql, replication

复制 MySQL 中的每个查询都会在数据库服务器上花费一些成本。是否可以每天一次在备份服务器上记录新查询并复制和运行查询，而不是每次都复制每个查询？

如果可能，怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:18:51.773

您可以使用 cron 作业来启动和[停止复制](http://dev.mysql.com/doc/refman/5.1/en/replication-administration-pausing.html)`STOP SLAVE;``START SLAVE;`

问题是，binlog 会增长，slave 可能要花很多时间才能赶上。

如果从站的唯一目的是提供备份解决方案，您应该考虑使用[InnoDB Hotbackup](http://dev.mysql.com/doc/refman/5.1/en/innodb-backup.html)。

只是为了提高性能，您应该考虑 Erik Ekman 的建议并为 binlog 数据选择不同的磁盘。

# iphone - 将触摸事件发送到堆叠在后面的 UIviewController

> ID：14181205
> 
> 赞同：3
> 
> 时间：2013-01-06T10:21:53.693
> 
> 标签：iphone, ios, uiview, hittest

在我的应用程序中，我有 2 个透明`UIViewController`层。第一层包含`UIView`我试图通过触摸识别的对象：

```
 - (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event; 
```

方法。

问题是，`UIViewController`它上面有一个透明的。

我试图在 上实现触摸事件`SeconedStackedViewController`并创建一个实例`FirstStackedViewController`并从那里调用相同的方法。方法被调用，但命中测试没有。

代码：

```
FirstStackedViewController *fsvc = [[FirstStackedViewController alloc]init];

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
      [fsvc hitTest:point withEvent:event];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
      fsvc = [[FirstStackedViewController alloc]init];
      [fsvc touchesEnded:touches withEvent:event];
} 
```

如何覆盖此方法以在 上调用`FirstStackedViewController`？如果我能模拟触摸`FirstStackedViewController`我认为它会成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:53:50.913

我的第一个问题是为什么要推动透明视图控制器。通过在同一个控制器中分层透明*视图是否可以更好地满足您的需求？*

如果不查看您的要求，很难确定，但这很可能更符合通常的逻辑分离：您需要可以从一个视图接收输入并将其传递给其他逻辑的代码。它需要了解两者的内部结构，因此是具有完成任务所需知识的控制器对象的良好候选者。

在这种情况下，您根本不会遇到任何问题 - 只需展示您的透明视图，然后将触摸传递给您想要的任何操作。

但有充分的理由做一个透明的 VC。要访问您下方的 VC，您可以像另一个响应者所说的那样访问应用程序委托。我会将应用程序委托排除在外，只需访问 self.navController.viewControllers。该数组表示 VC 的堆栈。然后向下迭代 - 你“下方”的那个是你想要传递消息的那个。

最有可能的不是使用 isMemberOfClass，而是您想要定义一个协议并检查 VC 是否符合ToProtocol。

```
for (int i=0; i < navBar.viewControllers.count ; i++) {
   UIViewController *current = navBar.viewControllers[i];
   if (current == self) {
      UIViewController *targetVC = navBar.viewControllers[i+1]; // make sure you're not over bounds - you could do this in the loop def'n.
      if ([targetVC class] conformsToProtocol("TransparentPassingActions")]) {
         // pass message
      }
   }
} 
```

我想你也可以只使用 indexOfObject 来获取当前的 VC，然后再往下看。这摆脱了循环。

顺便说一句，上一个答案中的伪代码混淆了 UIViews 和 UIViewControllers；也许这对你来说很清楚。无法通过访问视图来访问视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:27:37.333

我将首先获得对 rootViewController 的引用。我假设您的层次结构是 root -> 1st view controller --> 2nd view controller，然后通过初始化 fsvc 您正在创建一个新实例，并且实际上并没有从视图层次结构中获取引用。

我建议遍历 rootviewcontroller 子视图并为第一个 viewcontroller 找到您的实例，然后在该实例上调用该方法。

```
//PSEUDO-Code for class names, but iteration should solve the problem.
if(UIView *view in RootViewController.subviews){
     if(view isMemberOfClass: [FirstStackedViewController class]]){
          [(FirstStackedViewController *)view touchesEnded:touches withEvent:event];
     }
}

//ToolUser was right about mixing up VCs and regular Views, you'd want to do this:
for(UIViewController *vc in self.navigationController.viewControllers){
        if(view isMemberOfClass: [FirstStackedViewController class]]){
              [(FirstStackedViewController *)vc touchesEnded:touches withEvent:event];
         }
} 
```

# jsp - Web-Inf、JSP 和 useBean

> ID：14181214
> 
> 赞同：0
> 
> 时间：2013-01-06T10:22:56.623
> 
> 标签：jsp, servlets, usebean

我有以下网络结构

```
Root
- ----- Web-Inf
- --------- (classes, web.xml, etc...)
- ----- Members area (a normal folder)
- --------- FileB.jsp
- ----- FileA.jsp 
```

我遇到了这个非常奇怪的问题，FileA 和 B.jsp 在他们的第一行都有

`<jsp:useBean id="User" scope="session" class="kcc.Users"/>`

FilaA.jsp 工作正常，但 FileB.jsp 似乎无法找到有错误的类

```
exception

org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.NoClassDefFoundError: kcc/Users
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:491)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:401)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

root cause

javax.servlet.ServletException: java.lang.NoClassDefFoundError: kcc/Users
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:862)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:791)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:325)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我该如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:45:43.543

这是tomcat根应用程序路径和虚拟主机下配置应用程序的方式有问题，基本上我需要在虚拟主机条目下创建一个ROOT文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:36:05.123

这是一个欢迎文件的堆栈跟踪，与 FileB.jsp 无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T17:45:40.670

检查你 FileB.jsp 我认为你缺少一些 jar 文件。标签库？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T16:40:10.883

描述太简单了，无法理解。

我最好的猜测是这个 tomcat 的安全策略阻止 B.jsp 访问 kcc.Users（顺便说一句，它在 WEB-INF/classes 或一些 lib jar 中？），关注 tomcat/conf/policy.d

# c++ - 删除标准库映射

> ID：14181216
> 
> 赞同：0
> 
> 时间：2013-01-06T10:23:05.200
> 
> 标签：c++, dictionary, std

我有一个`map<long,myClass *> myMap;` myMap 的元素是动态分配的： `myMap[1] = new myClass();`等等。我想删除所有为 `myMap`元素分配的内存。可以使用吗`myMap.erase(myMap.begin(),myMap.end());`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T10:24:11.660

不，您需要显式地遍历这些值和`delete`它们。

最好的解决方案是`map<long,std::shared_ptr<myClass> >`改用一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T10:24:26.010

您必须先删除所有这些动态分配的元素，否则您可能会泄漏内存。

```
for (std::map<long,myClass *>::iterator iter = myMap.begin();
     iter != myMap.end(); ++iter)
{
   delete (*iter).second;
}

myMap.clear(); 
```

更好的方法是使用智能指针：

```
std::map<long, std::shared_ptr<myClass> > myMap;
std::shared_ptr<myClass> p(new myClass());
myMap[1] = p;
myMap.clear();  // no need to call delete manually anymore, clear is enough 
```

# android - Android：如何在 google map api v2 中通过 java 代码而不是 xml 创建地图？

> ID：14181218
> 
> 赞同：0
> 
> 时间：2013-01-06T10:23:18.790
> 
> 标签：android, google-maps-api-2

在我的android项目中，我想使用java代码而不是xml创建一个谷歌地图，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:32:28.523

您可以将`Map`using添加`MapFragment`到`Activity`in 代码中。为此，请创建一个新`MapFragment`实例，然后调用`FragmentTransaction.add()`以`Fragment`将`Activity`.

> ```
>  mMapFragment = MapFragment.newInstance();
>    FragmentTransaction fragmentTransaction =getFragmentManager().beginTransaction();
>    fragmentTransaction.add(R.id.my_container, mMapFragment);
>    fragmentTransaction.commit(); 
> ```

有关更多详细信息，请查看[GoogleMaps](https://developers.google.com/maps/documentation/android/map)，您将对实施地图有更多想法。

# image - 将图像与 iText 和 AbstractPdfView 一起使用

> ID：14181220
> 
> 赞同：0
> 
> 时间：2013-01-06T10:23:33.777
> 
> 标签：image, spring, itext, filenotfoundexception

我正在使用 iText 使用 AbstractPdfView 创建 PDF。我的图像位于

```
-webapp
--resources
---img
----logo.jpg 
```

我正在尝试将其加载到我的 PDF 中，但我总是收到 FileNotFoundException

```
Image.getInstance("/resources/img/logo.jpg") 
```

如何将位于我的 webapp 文件夹下的图像加载到我的 PDF 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T17:02:38.797

刚刚在做这个上午...

ServletContext servletContext = request.getSession().getServletContext(); 资源 res = new ServletContextResource(servletContext,"/images/logo.png");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T19:55:37.807

首先在 src/main/resources 中添加一个文件夹。例如：

> src/main/资源/图像

在此文件夹中放置您的图像。比方说：

> src/main/resources/images/logo.png

然后，您可以将 AbstractPdfView 中的此资源用作：

```
URL imageUrl = getClass().getResource("/images/logo.png");
Image logo = Image.getInstance(imageUrl); 
```

然后根据需要在文档中使用该图像。

问候！

# ember.js - 如何重新加载 ember 数据记录？

> ID：14181223
> 
> 赞同：27
> 
> 时间：2013-01-06T10:23:48.883
> 
> 标签：ember.js, ember-data

我正在使用新的路由器和 ember data rev 11。

我需要强制 ember-data 从服务器重新加载记录的数据。在函数中使用`App.MyRecord.find`(2)`setInterval`从客户端本地存储加载数据。

如何从服务器重新加载数据？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-06T15:16:35.043

我[刚刚推](https://github.com/emberjs/data/commit/278a0b863f0b1b2494fe2319ac12be6167195f6b) `record.reload()`送到 Ember Data。这将要求适配器从服务器重新加载数据并使用新数据更新记录。

### 约束：

*   `reload()`只有完成加载且尚未修改的记录才能调用。否则返回的数据会与修改后的数据冲突。将来，我们将添加对合并挂钩的支持来解决这些类型的冲突，这将允许`reload()`更多的记录状态。
*   如果您`reload()`在适配器返回新数据之前调用并更改或保存记录，您将出于同样的原因收到错误。该错误当前看起来像`Attempted to handle event 'reloadRecord' on <Person:ember263:1> while in state rootState.loaded.updated.uncommitted.`. 基本上，这意味着您的记录处于“已更新但未提交”状态，并且不允许您`reload()`在“加载和未修改”状态之外调用。

# php - 从收件箱中的特定号码获取所有短信 - Esendex

> ID：14181226
> 
> 赞同：3
> 
> 时间：2013-01-06T10:23:58.317
> 
> 标签：php, rest

我正在使用 Esendex Rest API [http://developers.esendex.com/APIs/REST-API/inbox](http://developers.esendex.com/APIs/REST-API/inbox)，我正在尝试从特定电话号码获取收件箱中的所有消息。

这基本上是这样，如果我发送短信并且有人回复我可以检索回复。

我目前可以将收件箱中的所有消息放入一个数组中并对其进行排序，但这对于超过 4000 条消息来说太慢了。

有谁知道我是否可以按电话号码过滤，或者至少在我的 API 请求中接收日期？即使我能收到最后几周的短信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:01:12.323

如果要按电话号码过滤，可以尝试使用[对话 API 。](http://developers.esendex.com/APIs/REST-API/conversation)缺点是您只能获取最新的 15 条消息，而且没有可靠的方法来检测是否收到了来自收件箱 API 以外的电话号码的回复。除此之外，我找不到任何可以帮助您的东西。他们的 API 非常严格且极少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:39:20.753

目前无法通过 REST API 执行此操作，但我会看看我们是否可以在接下来的几周内添加它（我为 Esendex 工作）。正如您所注意到的，Conversations API 中已经存在该功能，尽管形式更为简洁。

同时，您可以通过轮询收件箱或使用[推送通知](http://developers.esendex.com/APIs/Push-Notifications)检查所有到达的消息来实现这一点。

# php - changing user inputed date and time to a unix timestamp

> ID：14181233
> 
> 赞同：1
> 
> 时间：2013-01-06T10:24:33.020
> 
> 标签：php, unix-timestamp, strptime

I have a user input where the user inputs time and date as '9.30am' and '01/02/2012'. I am trying to convert this to a unix timestamp to aid ordering when dragging the data back out of the database but strptime() is confusing me as I am unsure as to whether this is actually returning a unix timestamp that I need.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:29:09.080

您可以使用：[strtotime](http://php.net/manual/en/function.strtotime.php)

PHP.net 示例：

```
echo strtotime("now"), "\n";
echo strtotime("10 September 2000"), "\n";
echo strtotime("+1 day"), "\n";
echo strtotime("+1 week"), "\n";
echo strtotime("+1 week 2 days 4 hours 2 seconds"), "\n";
echo strtotime("next Thursday"), "\n";
echo strtotime("last Monday"), "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:39:03.887

```
$date = DateTime::createFromFormat('H:ia d/m/Y' '9:30am 1/2/2012');
$timestamp = $date->getTimestamp(); 
```

是你正在寻找的。[http://www.php.net/datetime](http://www.php.net/datetime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T10:28:21.433

你可以使用 strtotime()

通过放入变量来调用它。

strtotime("9.30 1/2/2012");

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T11:18:10.370

使用 PHP 的内置 DateTime 类...

```
$objDate = DateTime::createFromFormat('H:ia d/m/Y', '9:30am 1/2/2012');
$timestamp = $objDate->getTimestamp(); 
```

...返回一个 Unix 时间戳。

文档：

1.  [PHP 日期时间类](http://php.net/manual/en/class.datetime.php)

    一个。[日期时间::createFromFormat](http://php.net/manual/en/datetime.createfromformat.php)

    湾。[日期时间::getTimestamp](http://php.net/manual/en/datetime.gettimestamp.php)

要添加变量，请像这样使用它...

```
$objDate = DateTime::createFromFormat('H:ia d/m/Y', "$time $date");
$timestamp = $objDate->getTimestamp(); 
```

或者...

```
$time_date = sprintf("%s %s", $time, $date); // concatenates into a single var
$objDate = DateTime::createFromFormat('H:ia d/m/Y', $time_date);
$timestamp = $objDate->getTimestamp(); 
```

**注意：**确保您的变量符合以下...

`$time`= hh:mm（并附加“am”或“pm”）

`$date`= dd/mm/yyyy

# r - Facet labels involving a greek symbol

> ID：14181234
> 
> 赞同：6
> 
> 时间：2013-01-06T10:24:39.603
> 
> 标签：r, ggplot2

Suppose I have the data and plot as follows:

```
mydata = data.frame(x=rnorm(4), y=runif(4), tau=c(0,0,1,1))
ggplot(mydata) + geom_point(aes(x=x, y=y)) + facet_wrap(~ tau) 
```

I would like the facet labels to read "tau=0" and "tau=1", respectively, with tau formatted as its greek symbol. I know from [another question](https://stackoverflow.com/questions/5293715/how-to-use-greek-symbols-in-ggplot2) that using the labeller `label_parsed` will format the letter tau by itself, but the equal sign seems to complicate things. An ideal solution would not require me to change the data (i.e. make tau a factor and name its levels), but I will take whatever works :)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T13:01:09.247

这里有一个解决方案，`facet_grid`它按级别对 tau 进行索引。

```
mydata = data.frame(x=rnorm(4), y=runif(4), tau=c(0,0,1,1))
ggplot(mydata) + geom_point(aes(x=x, y=y)) +
         facet_grid(~ tau,labeller = label_bquote(tau ^ .(x))) 
```

![在此处输入图像描述](../Images/bebfc1319fa95ed35d40dc37ecc88418.png)

**编辑**获得“tau=0”和“tau=1”

```
facet_grid(~ tau,labeller = label_bquote(tau == .(x))) 
```

**Edit2**第二个变量 sigma

我通过定义自定义贴标机找到了这个解决方案。希望有人（ ggplot2 伙计们）给我一个更简单的解决方案。

![在此处输入图像描述](../Images/cf4283f5f38c64dbd7cac836303a80a6.png)

```
my.label_bquote <- function (expr1 = (tau == .(x)),expr2 = (sigma == .(x))) 
{
   quoted1<- substitute(expr1)
   quoted2 <- substitute(expr2)
   function(variable, value) {
      value <- as.character(value)
      if(variable == 'tau')
         lapply(value, function(x)
               eval(substitute(bquote(expr1, list(x = x)),list(expr1 = quoted1))))
      else
         lapply(value, function(x) 
               eval(substitute(bquote(expr2, list(x = x)),list(expr2 = quoted2))))
   }
}

mydata = data.frame(x=rnorm(4), y=runif(4), tau=c(0,0,1,1),sigma=c(2,2,3,3))
ggplot(mydata) + geom_point(aes(x=x, y=y)) +
  facet_grid(sigma ~ tau,labeller = my.label_bquote()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-15T02:28:20.073

有一个更简单的解决方案。为了清楚地了解它们在 labeller 参数中的工作方式，已更改模拟数据变量名称。

```
mydata = data.frame(x=rnorm(4), y=runif(4), tauvar=c(0,0,1,1),sigmavar=c(2,2,3,3))

ggplot(mydata) + 
   geom_point(aes(x=x, y=y)) +
   facet_grid(sigmavar ~ tauvar,labeller = label_bquote(sigma==.(sigmavar),
                                                   tau==.(tauvar))) 
```

# html - Designing HTML from beginning compatible to all browsers of all devices?

> ID：14181237
> 
> 赞同：-7
> 
> 时间：2013-01-06T10:25:14.623
> 
> 标签：html

we are developing new website and i know little bit about HTML so can suggest any solid open-source tools for good HTML design.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:20:57.770

[检查http://www.initializr.com/](http://www.initializr.com/)中的样板

这是开始一个项目的好方法，它涵盖了很多关于浏览器兼容性的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:27:59.847

可能不是寻求建议的地方，但您应该将[响应式 CSS 框架](http://designshack.net/articles/css/which-is-right-for-me-22-responsive-css-frameworks-and-boilerplates-explained/)视为一个很好的起点。如果您不熟悉 CSS，那么您*必须*学习它才能创建响应式设计。

# oracle - Cannot navigate to package body because this spec has no body

> ID：14181239
> 
> 赞同：0
> 
> 时间：2013-01-06T10:25:54.373
> 
> 标签：oracle, package, toad

I faced with the problem at Toad 11.6.1 I cannot open package body of Oracle database on Toad 11.6\. So when I click button **Toggle Spec/Body** The following info was showing:

**Cannot navigate to package body because this spec has no body**

But when I connect to the same DB with with the same username with TOAD 10.1.1 everything is ok. It means that I have access to see the package and it's body. I have no idea what maybe the problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:19:06.870

我假设该软件包不属于您连接的用户？

如果是这样，TOAD 可以选择使用默认未选中的 DBA 视图。它在你的 11.6 版本中检查吗？如果没有，那么除非您对包有 DEBUG 特权，否则您将看不到正文。

# android - 关于文件上传列表和服务/活动的设计模式

> ID：14181240
> 
> 赞同：1
> 
> 时间：2013-01-06T10:26:04.153
> 
> 标签：android, service, upload, queue

1.  我有一个 ListActivity 让用户选择要上传的照片
2.  对于上传，我会将照片放在一个名为 PhotoList 的静态 ArrayList 中
3.  之后，我将启动一个服务来上传这些照片
4.  现在，用户可以切换到另一个活动来做一些其他事情
5.  稍后，用户将返回此 ListActivity 以检查上传状态。同样在这里，他们可以选择要上传的更多照片。

所以，我的PhotoList其实是一种Queue，同时也是ListActivity中要显示的数据。

我的问题是，当服务运行时，用户选择了更多照片，我想把这些照片放在 PhotoList 中。（我不想再次启动服务，因为服务已经在运行......）

现在我只是被困在这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:53:30.367

好的，我会根据我对您的问题的理解尝试为您提供解决方案：您有一个包含照片的列表，并且您希望用户有资格上传这些图像并将其更新为用户状态（已上传/上传/上传/失败）并且您不想在`Service`每次上传时都开始。

一个简单的工作解决方案是使用[`IntnetService`](http://developer.android.com/reference/android/app/IntentService.html)i 只有在分配了任务时才会运行，并且在完成工作时自动关闭，当然在使用时工作将在一个单独的线程中`IntentService`

```
step 1 
```

使数据库表包含有关图像的数据

```
_id integer 
_image_uri 
_image_status : 
```

`_image_status`将保留这些值之一（1-uploaded：finish_uploaded，2-uploading：服务正在上传图片，3-upload：用户可以上传图片4-failed：上传失败您可以重试）

```
step2 
```

现在正在`UploadIntentService`尝试将图像上传到服务器以及上传成功或上传时发生错误时更新数据库

```
public class UploadIntentService extends IntentService {
    private static final String TAG = UploadIntentService.class.getSimpleName();
    private static final int STATUS_UPLOAD = 0x01; //can be uploaded
    public static final int STATUS_FAILED_TO_UPLOAD = 0x02; // tried to upload but failed
    public static final int STATUS_UPLOADING = 0x03; // self explanied
    public static final int STATUS_SUCCESSFULLY_UPLOADED = 0x04; // the image uploaded to server 

    public UploadIntentService() {
        super(TAG);

    }

    @Override
    protected void onHandleIntent(Intent intent) {

        int status = intent.getIntExtra("status", -1);
        String imageUri = intent.getStringExtra("image_path");
        long imageDatabaseid = intent.getLongExtra("image_db_address",-1);

        if(status != STATUS_SUCCESSFULLY_UPLOADED && status != STATUS_UPLOADING){

            try{
                //update _image_status column with value of STATUS_UPLOADING with the image_id = imageDatabaseid;

                //upload code 

                //successfully uploaded 
                //update _image_status column with value of STATUS_SUCCESSFULLY_UPLOADED with the image_id = imageDatabaseid;
            }catch(Exception ex){
                ex.printStackTrace();
                //update _image_status column with value of STATUS_FAILED_TO_UPLOAD with the image_id = imageDatabaseid;
            }
        }

    }

} 
```

……

```
step3 
```

如果`ListActivity`您想上传任何图片，请使用此代码

```
Intent intent = new Intent(context, UploadIntentService.class);
    Bundle uploadExtras = new Bundle(3);
    uploadExtras.putLong("image_db_address", PUT HERE THE IMAGE DATABASE ID );
    uploadExtras.putInt("status", PUT HERE THE IMAGE STATUS );
    uploadExtras.putString("image_path", PUT HERE THE IMAGE PATH IN FILE SYSTEM);

    intent.putExtras(uploadExtras);
    context.startService(intent); 
```

....... 第4步

确保您在 manifest.xml 中声明了服务，并享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:40:31.870

您可以[`BlockingQueue`](http://developer.android.com/reference/java/util/concurrent/BlockingQueue.html)在其中存储要上传的照片。这`BlockingQueue`是你的`PhotoList`。在`Service`，在循环中，您将研究 this `BlockingQueue`。两种情况是可能的：

1.  有一些照片。拿走并上传。
2.  队列为空。所以线程将进入睡眠状态，`BlockingQueue`确保这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:46:38.480

您的服务应覆盖 onResume() 函数。每当用户执行其他任务、打开其他活动等并最终返回到应用程序的活动时，都会调用 onResume()。这只是要点。

您可以了解有关[运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)的更多信息。适用于 Activity 的概念也适用于 Service，因为该 Service 只是没有“显示”给用户。

在上面的链接中，您将了解何时重新创建活动，以及通过调用 onResume() 实际恢复活动的时间。您还需要覆盖`onSaveInstanceState()`，`onRestoreInstanceState()`以便在旧 Activity 实例和新实例之间传递状态对象。

你可以做的是，当用户离开你的活动时`onSaveInstanceState()`，你应该保存你的状态变量，例如。您选择的照片列表，在一个 Bundle 中。并将这个 Bundle 传递给`onRestoreInstanceState()`

**问题：**您实际上是否将服务作为有效[服务](http://developer.android.com/reference/android/app/Service.html)启动？我的意思是，你在扩展服务类吗？我已经在我的项目中使用了服务，并且他们总是从他们离开的地方恢复而不覆盖任何东西。**原因：**服务在后台运行，在服务完成工作之前不会释放资源。因此，如果您还没有使用过 Service ，那么我建议您这样做。您的问题将得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T10:49:49.840

你可以使用这个：

[写入数组列表时复制](http://developer.android.com/reference/java/util/concurrent/CopyOnWriteArrayList.html)

这将是一个**线程安全的随机访问列表**。

检查此链接以获得良好的解释和示例。

[ArrayList 和 CopyOnWriteArrayList 的区别](http://techvivek.wordpress.com/2009/08/29/difference-between-arraylist-and-copyonwritearraylist/)

`Iterators`这个列表永远不会抛出`ConcurrentModificationException`。创建an 时`iterator`，它会保留列表内容的副本。**迭代这个列表总是安全的**。

# entity-framework - EF Code First: Creating Customer, Item and Order relationship using poco

> ID：14181242
> 
> 赞同：0
> 
> 时间：2013-01-06T10:26:25.497
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.1, code-first, poco

I am trying to create 3 tables represented by pocos for use in code first.

The tables are customer, item and orders. (i presume the orders is a good naming convetion? or should i use customitem, or customeritem?)

I have created a customer table with an Id and things like Name, Address

I have created an item table with an Id and things like itemname and price.

Now i need to create a 3rd table which will hold the number of items a customer has purchased. I have an Id so i need to create 2 foreign keys (int) 1 called CustomerId and the other called ItemId - is this correct?

Then i need to create a navigation property from customers so i can see all the items that the customers has purchased

and navigation property for an item so you can see which customers has purchased that item

I am a little lost of how to do this

Does anyone have an example or can help me?

I presume its a standard question, how to create customers and items and store who purchased what but i can't seem to find any tutorials

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:34:16.233

您真的不需要第三张表，将自动创建第三张表，并且内部管理关系。您只需`Entity framework`将`Principal and dependent``Navigation Properties.`

```
public partial class Customer
{
    public Customer()
    {
        this.Items = new HashSet<Item>();
    }

    public int CustomerId { get; set; }
    public string CustomerName { get; set; }
    public string CustomerAddress { get; set; }

    public virtual ICollection<Item> Items { get; set; }
}

 public partial class Item
{
    public int ItemId { get; set; }
    public int Price { get; set; }
    public int CustomerCustomerId { get; set; }

    public virtual Customer Customer { get; set; }
} 
```

这样，就可以建立两个表之间的关系，`customer`并且`item`。但是，如果您想为关系添加一些*描述性属性*，那么您应该在实体框架中创建新表，其中将包括来自两个`Customer`和`Item`类的外键以及您的其他描述性属性`PurchaseDate`等

# templates - 防止服务器端jade解释浏览器jade模板

> ID：14181246
> 
> 赞同：1
> 
> 时间：2013-01-06T10:27:10.040
> 
> 标签：templates, browser, express, pug

我想从服务器中的翡翠模板将翡翠模板传递给浏览器。

我的问题是玉模板目前由服务器解释......

这是我声明模板的方式：

```
script#entry-row(type='text/template')
  tr
    td= number
    td= sum + '€'
    td= description || '' 
    td= moment(date, 'YYYY-MM-DDTHH:mm:ss:SSSZ').format('dddd DD MMMM YYYY') 
    td 
      span.label= category
    td 
      input(type='checkbox', disabled='disabled', checked=shared) 
```

我发现的唯一解决方案是在行开始处添加一个管道，但这不是一个好方法：

```
script#entry-row(type='text/template')
  | tr
  |   td= number
  |   td= sum + '€'
  |   td= description || '' 
  |   td= moment(date, 'YYYY-MM-DDTHH:mm:ss:SSSZ').format('dddd DD MMMM YYYY') 
  |   td 
  |     span.label= category
  |   td 
  |     input(type='checkbox', disabled='disabled', checked=shared) 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T13:30:00.140

我最近在这个问题上困扰了几天，我找到了一个更好的解决方案。

您可以将您的翡翠部分模板重命名为 html 扩展名，并将其包含在主

玉页。所以玉不会尝试在服务器端编译包含的部分，而你

在浏览器端得到你想要的。

这是我的示例编码：

***index.jade:***

```
extends layout

block content
  .container
    .header
      a= title
      .input-append
        input.input-medium(type="text", placeholder="电子邮箱")
        button.btn(id='subscribe') 订阅
      .clear
    .row-fluid 
      .span8
        ul.tweets
      .span3

        ul.users

  script#tweet-template(type='template')
    include templates/tweet.html 
```

和部分***模板/tweet.html***

```
li
  .media
    img.pull-left(src=tweet.user_img)
    .media-body
      h5.media-heading= tweet.user_name
      p.text 
        span #{tweet.text}
        - if (tweet.pic_name != '') {
          br
          img.img-polaroid(src='/images/tweets/' + tweet.pic_name + '_thumb.jpg', class='thumb_img')
          img.img-polaroid(src='/images/tweets/' + tweet.pic_name + '_middle.jpg', class='middle_img')
        - }
      p.tail 
        - if (tweet.pic_name != '') {
          a(href='/images/tweets/' + tweet.pic_name + '_large.jpg') 查看大图
        - }
        span.time #{tweet.create_at} 
        转发(#{tweet.reposts_count}) 评论(#{tweet.comments_count}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:34:43.067

正在使用[快递](http://expressjs.com/)吗？

一个可能的解决方案可能是[JadeAsset](https://github.com/techpines/asset-rack#jadeasset)。[另请参阅此处](https://stackoverflow.com/questions/9522542/how-to-compile-jade-templates-in-to-javascript-functions-to-use-them-on-client-s)的讨论。

您可以将资产挂钩到 Express：

```
assets.on('complete', function() {
    var app = express.createServer();
    app.configure(function() {
        app.use(assets);  // that's all you need to do
    });
    app.listen(8000);
}); 
```

要创建您的 Jade 资产：

```
var assets = new AssetRack([
    new rack.JadeAsset({
        url: '/templates.js',
        dirname: __dirname + '/templates'
    })
]); 
```

# c# - exceptions and coupling

> ID：14181247
> 
> 赞同：0
> 
> 时间：2013-01-06T10:27:18.670
> 
> 标签：c#, exception, coupling

I have this main-class that receives a queuemessage and then uses a few other classes to do some work. All these other classes use some lower classes themselves, and eventually data is written to a database or send to wcf services.

Based on the result of the lower classes the main-class has to decide wheter to remove the queuemessage, or place it on the queue again, or send it to a deadletterqueue.

If for example a the database is unreachable, the queuemessage can be placed in the queue to try it again later. But if the wdcf service returns that it doesn't accept some data, the message has to be sent to the deadletterqueue.

I have a couple of ways to implement this scenario:

1.  Throw exceptions and only handle them in the main-class.
2.  Throw exceptions but catch them in each calling class. And rethrow a new exception
3.  Return result-objects which indicate error/success-state

These are my ideas about the scenarios:

1.  If one of the lowest classes throws an exception, and the main-class has to handle it, it couples the main-class all the way to the lowest classes. If one of the lowest classes decides to change an exception, I have to change the main-class exception handling.

2.  There is no good way to let upper classes know which exceptions will be thrown from the called class in C#.

3.  This is what i prefer. Every called method can return a result-object, with an enum indicating succes or failure, and the type of failure.

So, my preferred way is option 3, but I don't know if that's architecturally acceptable. Or if there are any better ways.

**Code**

This is what the code (in simplified form) looks like:

***QueueHandler***

```
private static void HandleQueueMessage(Message message)
{
    var deliveryOrder = deserialize(message.body);

    var deliveryOrderHandler = new DeliveryOrderHandler();

    var result = deliveryOrderHandler.Execute(deliveryOrder.PubId);

    switch (result)
    {
        case DeliveryOrderHandlerResult.DeliverySucceeded:
            break;

        case DeliveryOrderHandlerResult.FataleErrorInExternalSystem:
        case DeliveryOrderHandlerResult.MAndatoryDocuhmentTransformationFailed:
            SendDeliveryOrderToDeadletterQueue(deliveryOrder);
            break;

        default:
            deliveryOrder.AbortCount = deliveryOrder.AbortCount + 1;
            ResendDeliveryOrderToQueue(deliveryOrder);
            break;
    }
} 
```

***DeliveryOrderHandler***

```
private DeliveryOrderHandlerResult Execute(long pubId)
{
    DeliveryOrderHandlerResult deliveryOrderHandlerResult;

    var transformationResult = GetTransformationResultaat(pubId);

    if (transformationResult == TransformationResult.Success)
    {
        var deliveryResult = DeliverDocumentToExternalSystem(pubId); 

        if (deliveryResult.Status == DeliveryResult.Success)
        {
            SaveDeliveryResult(pubId, deliveryResult);
        }

        deliveryOrderHandlerResult = deliveryResult.Status;
    }
    else
    {
        switch (transformationResult)
        {
            case TransformationResult.NotStarted:
                deliveryOrderHandlerResult = DeliveryOrderHandlerResult.TransformationNotStarted;

            case TransformationResult.Busy:
                deliveryOrderHandlerResult = DeliveryOrderHandlerResult.TransformationBusy;

            case TransformationResult.MandatoryTransformationFailed:
                deliveryOrderHandlerResult = DeliveryOrderHandlerResult.MandatoryTransformationFailed;

            default:
                throw new Exception(--unknown enum value --);
        }
    }

    return deliveryOrderHandlerResult;
} 
```

***DeliverDocumentToExternalSystem***

```
pseudo:
- Create Delivery package by reading data from database and transformed files from disk
- Send package to external system 
```

As you can see there's a lot that can go wrong; failed database connections, failed wcf service calls, files not present etc.

# **I was hoping I could prevent this:**

***QueueHandler***

```
private static void HandleQueueMessage(Message message)
{
    var deliveryOrder = deserialize(message.body);

    var deliveryOrderHandler = new DeliveryOrderHandler();

    try
    {
        var result = deliveryOrderHandler.Execute(deliveryOrder.PubId);

        switch(result)
        {
           case DeliveryOrderHandlerResult.Success:
              // remove message from queue

           case DeliveryOrderHandlerResult.NotStarted:
              // resent message to queue

           case DeliveryOrderHandlerResult.MandatoryTransformationFailed:
              // send message to deadletterqueue

           case ...
              // handle

           case ...
              // handle

        }
    }
    pseudo catches:
    catch (DatabaseNotFoundexception ex)
    {
        // resent message to queue
    }
    catch (ExternalWcfServiceDownException ex)
    {
        // resent message to queue
    }
    catch (FileNotFoundException ex)
    {
         // send message to deadletterqueue
    }
    catch (...)
    {
        // handle
    }
    catch (...)
    {
        // handle
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:33:00.757

> 1.  ...它将主班一直耦合到最低班。

不，它将您的主类与异常类型结合起来。是的，如果您将异常更改为较低，则需要将处理更改为较高，但耦合是在异常级别上。

3 不是一个好的选择，因为您可能会忘记检查退货。您最终会遇到与选项 1 中列出的完全相同的问题，就好像您将结果对象更改得很低，您需要在主类中进行更改......

异常被认为是[更好的](https://stackoverflow.com/questions/253314/exceptions-or-error-codes) [选择](https://stackoverflow.com/questions/2792728/when-is-it-appropriate-to-use-error-codes)，因为您不必*检查*是否发生错误。

# php - 我正在摆弄一个域检查器教程，想知道是否有人可以帮助我

> ID：14181251
> 
> 赞同：-1
> 
> 时间：2013-01-06T10:27:55.993
> 
> 标签：php, ajax, dns

我已经摆弄了几个小时了，[http:](http://www.jqueryrain.com/?Om7fqYxi) //www.jqueryrain.com/?Om7fqYxi我有点卡住了，我想手动搜索每个 .com、.net、.org 和 .我，所以它进入输入，选择菜单，提交，并根据从下拉列表中选择的域显示结果。

这是表单布局的粗略副本：

```
<form method="post">
<input type="text" autocomplete="off" id="Search" name="domain"><select name="trd">
<option>.com</option>
<option>.net</option>
<option>.org</option>
<option>.me</option>
</select><input type="submit" id="Submit" value="Submit"></form> 
```

因此，基本上，本教程创建了一个域查找工具，但它一次查找所有域，我希望它只返回所选选项的值。

process.php 文件在链接[http://www.jqueryrain.com/?Om7fqYxi的下载中](http://www.jqueryrain.com/?Om7fqYxi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:42:26.890

在教程中是：

```
$.post('process.php?domain=' + escape($('#Search').val()),{ // ... 
```

一种可能性是添加到所选选项的上述 url 值：

```
$.post('process.php?domain=' + escape($('#Search').val()) + '&trd=' + $('select[name=trd]').val(),{ // ... 
```

`$_GET['trd']`然后在 PHP 脚本中，您可以从变量中读取此值。

--

如果您想从中读取`trd`值，`$_POST`可以使用：

```
$.post('process.php?domain=' + escape($('#Search').val()), {'trd': $('select[name=trd]').val()},{ //... 
```

然后看看@Michel Feldheim 的回答

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:02:26.923

我会做这样的事情：

**1\. 在数组中定义可能的 .TLD**

```
$possibleTLD = array (
    '.org',
    '.com',
    '.net'
); 
```

**2.使用它来输出下拉列表**

```
<form action="" method="post">
    <input type="text" name="domain" />
    <select name="tld">
        <?php foreach ( $possibleTLD as $tld ): ?>
            <option value="<?php echo $tld; ?>"><?php echo $tld; ?></option>
        <?php endforeach; ?>
    </select>
    <input type="submit" name="submit" value="lookup" />
</form> 
```

**注意：**在您的示例表单选项中没有 value 属性。此值是必需的，因为它是在您提交表单时发送的。标签之间的文本只是浏览器的显示字符串。

**3\. 表单提交后检查和处理值**

```
if ( !empty( $_POST['tld'] ) ) {
    // check tld against our possible values
    if ( !in_array( $_POST['tld'], $possibleTLD ) {
        die( 'not a valid TLD' );
    }

    // check domain name, the regex will need some work
    if ( !preg_match ( '/^[a-z][a-z0-9üöä]+$/U', $_POST['domain'] ) ) {
        die( 'not a valid domain' );
    }

    $cleanDomain = strtolower ( $_POST['domain'] ) . $_POST['tld'];

    // the lookup and result output

} 
```

# visual-c++ - 使用 libavcodec 对 direcshow 帧缓冲区进行编码

> ID：14181260
> 
> 赞同：0
> 
> 时间：2013-01-06T10:28:39.857
> 
> 标签：visual-c++, directshow, libavcodec

我正在尝试使用 libavcodec 对 ISampleGrabber(directshow) 抓取的帧的流缓冲区进行编码。在对这些帧进行编码后，我将其写入文件。但完成后文件只包含绿框。

她的是用于抓取帧并对其进行编码的代码......

```
void DSGrabberCallback::initFFMpeg(){
    const char* filename="G:/test1.mpg";
    avcodec_register_all();
    printf("Encode video file %s\n", filename);

    AVCodecID codec_id=AV_CODEC_ID_MPEG2VIDEO;
    codec = avcodec_find_encoder(codec_id);

    c = avcodec_alloc_context3(codec);

    if (!c) {
        fprintf(stderr, "Could not allocate video codec context\n");
    }

    c->bit_rate = 4000000;
    c->width = 320;
    c->height = 240;

    AVRational test;
    test.den=25;
    test.num=1;
    c->time_base= test;
    c->gop_size = 10;
    //c->max_b_frames=1;
    c->pix_fmt = AV_PIX_FMT_YUV420P;

    if(codec_id == AV_CODEC_ID_H264)
        av_opt_set(c->priv_data, "preset", "slow", 0);

    if (avcodec_open2(c, codec, NULL) < 0) {
        fprintf(stderr, "Could not open codec\n");
    }

    f = fopen(filename, "wb");
    if (!f) {
        fprintf(stderr, "Could not open %s\n", filename);
    }

    picture = alloc_picture(c->pix_fmt, c->width, c->height);

    /*picture->format = c->pix_fmt;
    picture->width  = c->width;
    picture->height = c->height;*/

    av_init_packet(&pkt);

}

void DSGrabberCallback::encodeFrame(unsigned char *frame,ULONG size){

    std::cout<<"called.....";

    pkt.data = NULL;   
    pkt.size = 0; 
    picture->data[0]=frame;
    fflush(stdout);

    picture->pts=counter;

    ret = avcodec_encode_video2(c, &pkt, picture, &got_output);
    if (ret < 0) {
        fprintf(stderr, "Error encoding frame\n");
    }

    if (got_output) {
        printf("Write frame %3d (size=%5d)\n", counter, pkt.size);
        fwrite(pkt.data, 1, pkt.size, f);
        av_free_packet(&pkt);
    }
}

STDMETHODIMP DSGrabberCallback::SampleCB(double time, IMediaSample* sample)
{
    BYTE* data = NULL;
    ULONG length = 0;
    m_bytes=NULL;

    counter=counter+1;

    if(FAILED(sample->GetPointer(&data)))
    {
        return E_FAIL;
    }

    length = sample->GetActualDataLength();
    if(length == 0)
    {
        return S_OK;
    }

    if(!m_bytes || m_bytesLength < length)
    {
        if(m_bytes)
        {
            delete[] m_bytes;
        }

        m_bytes = new unsigned char[length];
        m_bytesLength = length;
    }
    if(true)
    {
        for(size_t row = 0 ; row < 480 ; row++)
        {
            memcpy((m_bytes + row * 640 * 2), data + (480 - 1 - row) * 640 * 2,
                640 * 2);
        }
    }
    std::cout<<"hiiiiiiiiiiiiiiiiiiiiiiii";

    // memcpy(m_bytes, data, length);
    // std::cout<<"called............... "<<m_bytes<<"\n";
    if(counter<500){
        encodeFrame(m_bytes,length);
    }else{
        fwrite(endcode, 1, sizeof(endcode), f);
        fclose(f);
        avcodec_close(c);
        av_free(c);
        av_freep(&picture->data[0]);
        avcodec_free_frame(&picture);
        printf("\n");
        exit(1);
    }

    //rtp.sendRTP(data,length);

    //sample->Release();
    //printf("Sample received: %p %u\n", data, length);

    return S_OK;
} 
```

谁能告诉我问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:03:43.643

现在工作正常。实际上我忘记将图像缓冲区转换为 YUV420P 格式。我添加了一些将缓冲区缩放为 YUV 格式的代码，现在一切都很好。谢谢 Wimmel 和 Roman R。

# ruby-on-rails - rails中的复杂sql查询并将结果显示为网格

> ID：14181266
> 
> 赞同：2
> 
> 时间：2013-01-06T10:29:47.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设我有一个很长的 sql 查询，其中包含一些选择和合并。我不想开始为它编写 ActiveRecord 代码，因为它只由我使用。并且每隔几周才一次（就像报告一样）我只想运行查询，获取结果并按原样显示它们。

我是 Rails 新手，习惯了 ASP.Net 和 MVC 3，有什么我可以用于视图的东西，它只会从查询结果中呈现一个表格吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:16:14.247

您可以在 ActiveRecord 中执行原始 SQL，而无需将类绑定到表：

```
result = ActiveRecord::Base.establish_connection(@db).connection.execute("select * from teh_tables")
p result.to_yaml 
```

然后，您可以使用 result.to_yaml、result.inspect 或将结果传递给 FasterCSV 以生成 CSV 文件，以便在 Excel 或您选择的电子表格中进行进一步分析。

高温高压

# ajax - Primefaces commandButton 和 ajax

> ID：14181270
> 
> 赞同：0
> 
> 时间：2013-01-06T10:31:10.750
> 
> 标签：ajax, primefaces

我使用`tabView`带有许多选项卡的组件。在其中许多中，我都有`form`由 primefaces`commandButton`组件提交的。

默认情况下，PF`commandButton`使用 ajax 模式，但是当我提交表单时，我的页面似乎已完全加载，并且我的`tabView`组件丢失了它的索引视图（呈现索引 0）。

请问这是正常行为吗？

我虽然我会留在同一个索引中，因为它是 ajax ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:30:21.823

看起来有一些命名容器（`p:tabView`也许）你最好分配一个`id`给它，所以不是得到前缀`j_idt16`（可能会不时变化）你会得到`myTab0`, `myTab1`etc 前缀......

例如`<p:tabView id="myTab"`

为了安全起见，您可以做的另一件事是在尝试使用 jquery 选择元素并访问其值之前检查元素是否存在，如下所示

```
if($('#j_idt16\\:register_location_choice_2_input').length > 0){
    //some code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:10:36.510

好的，我的问题是JS`validateRegisterForm`函数。当我删除它时，它可以工作，但我需要它......

我用它来检查是否可以启动验证表单。

```
function validateRegisterForm(){    

if($('#j_idt16\\:register_location_choice_2_input').attr('checked')){

    if($('#j_idt16\\:register_galaxies_input').val() == 0){
        var galaxie = MUST_CHOOSE_GALAXY;
        alert(galaxie.charAt(0).toUpperCase() + galaxie.slice(1));
        return false;
    }

    if($('#j_idt16\\:register_solar_systems_input').val() == 0){
        var ss = MUST_CHOOSE_SOLAR_SYSTEM;
        alert(ss.charAt(0).toUpperCase() + ss.slice(1));
        return false;
    }

    if($('#j_idt16\\:register_positions_input').val() == 0){
        var position = MUST_CHOOSE_POSITION;
        alert(position.charAt(0).toUpperCase() + position.slice(1));
        return false;
    }

}

return true; 
```

}

那么如何在发送和允许或不允许使用 ajax 验证表单之前检查字段值呢？

**编辑 ：**

好的，我通过在我的 JS 函数中启动验证解决了我的问题，按钮`type`传递给`button`not`submit`并使用`remoteCommand`组件：

我的 JS 函数：

```
function validateRegisterForm(){    

if(...)
      validateForm(); 
```

}

我的`remoteCommand`：

```
<p:remoteCommand name="validateForm" actionListener="#{login.registerAccount()}"/> 
```

# qt - Qt 锁定和信号

> ID：14181272
> 
> 赞同：0
> 
> 时间：2013-01-06T10:31:25.947
> 
> 标签：qt, thread-safety, locking

我有一个从另一个类调用的简单数据类。

数据类：

```
class Data
{
public:
    QString getName() const
    {
        return this->mName;
    }

    void setName(AccessData* access, const QString& name)
    {
        this->mName = name;
        access->emitNameChanged(this);
    }
private:
    QString mName;
    QReadWriteLock mLock;
}; 
```

这是我用来获取/设置也处理锁定的新名称的类：

```
class AccessData : public QObject
{
public:
    QString getName(Data* data)
    {
        QReadLocker lock(&data->mLock);
        return data->getName();
    }

    void setName(Data* data, const QString& name)
    {
        QWriteLocker lock(&data->mLock);
        data->setName(this, name);
    }

    void emitNameChanged(Data* data)
    {
        emit this->nameChanged(data);
    }
signals:
    void nameChanged(AccessData* access, Data* data);
}; 
```

发生的情况是这样的：我使用 AccessData 类来读取和写入 Data 实例的名称。AccessData 类负责锁定读/写。但是，如您所见，Data 类在它的 setName() 方法中回调 AccessData 实例以正确发出有关更改的信号。注意：这只是伪代码，实际上它更复杂，这就是 Data 类需要能够通过它的调用者发出信号的原因。

这就是问题所在：

假设我有一个名为“d”的“Data”实例：Data* d; 我现在使用“AccessData”实例“a”来更改名称：a->setName(d, "new name"); 同时，我通过以下代码连接到 nameChanged() 信号：

```
...
void nameChanged(AccessData* access, Data* data)
{
    // Read the new name
    QString newName = access->getName();
} 
```

这就是问题所在：

1.  调用 a->setName(d, "new name")
2.  “d”现在被“a”锁定（写锁）
3.  "d" 发出关于名称更改的信号，但仍处于锁定状态
4.  我连接到 nameChanged 信号的方法尝试访问 getName()
5.  这将导致另一个 QReadLock 发出，这只会导致死锁

我该怎么做才能正确处理这个问题？我想到了两件事：

1.  发出延迟的信号（也称为非阻塞）以使其进入循环。这不是我想要的，因为我希望立即推送信号。

2.  在 Data 类中移动锁定/解锁内容并首先解锁，然后发出信号。这不是我想要的，因为我想让 Data 类完全不受锁定的影响。

任何的想法？我有没有怀孕？

非常感谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:20:55.123

您需要考虑模型中的对象代表什么。的哲学`Data`是可疑的。它*拥有*锁（*has-a* composition），但您不希望它是可自锁的。如果`Data`打算成为一个*简单*的数据包装器，那么它不应该拥有锁。因此，要么让它处理自己的锁（然后你可以在发射之前解锁），要么将锁*和发射*移离`Data`到`AccessData`.

如果出于某种原因您想保留呈现的设计，您可以通过初始化`mLock`为[`QReadWriteLock::Recursive`](http://doc.qt.digia.com/qt/qreadwritelock.html#QReadWriteLock-2). 然后同一个线程可以多次锁定它 - 假设您仍然调用等量的`unlock()`. 但我个人的经验是，可重入锁定是失控/被误解的呼叫流的明确标志，并且是一种缓慢的误解，会狠狠地反击。虽然我确实阅读了一些理论上如果没有可重入锁就无法解决的概念，但我仍然必须看到一个实际上不可避免的概念。

# c - Pango 文本标记语言如何与 GTK 框一起使用？除了 gtk 标签

> ID：14181273
> 
> 赞同：0
> 
> 时间：2013-01-06T10:31:29.253
> 
> 标签：c, gtk

在“GTK+ 的基础”一书中。据记载，Pango 文本标记语言允许您在某些小部件（例如 GtkLabel）中更改带有 XML 标记的文本样式。我想知道如何更改 Gtk Box 的背景颜色？Pango 文本标记语言可以与 Gtk Box 一起使用吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:07:47.410

不，不可能。参见例如[这个描述](http://developer.gnome.org/pygtk/2.22/pango-markup-language.html)。我建议你 1) 安装 Devhelp；2) 使用 C 以外的其他东西来学习 GTK+，例如 Python。我并不是说你不应该用 C 语言编写，只是为了快速原型制作等。它太麻烦了。

这是您的操作方法：

```
from gi.repository import Gtk, Gdk

box = Gtk.Box ()
box.add (Gtk.Label ('some test label'))

# You need a wrapping Gtk.EventBox because Gtk.Box lacks a GDK window:
wrapper = Gtk.EventBox ()
wrapper.add (box)
wrapper.override_background_color (Gtk.StateFlags.NORMAL, Gdk.RGBA (1, 1, 0.5))

window = Gtk.Window ()
window.add (wrapper)

window.connect ('destroy', lambda *x: Gtk.main_quit ())

window.show_all ()
Gtk.main () 
```

# php - 使用php打印浏览器的名称

> ID：14181275
> 
> 赞同：0
> 
> 时间：2013-01-06T10:31:54.027
> 
> 标签：php

> **可能重复：**
> [用户代理，从字符串中提取操作系统和浏览器 [PHP]](https://stackoverflow.com/questions/9693574/user-agent-extract-os-and-browser-from-string-php)

我只是想打印用户用来访问`php`页面的浏览器的名称，使用`php`它自己。为此，我正在做

```
<?php
    echo $_SERVER['HTTP_USER_AGENT'];
?> 
```

但是当我使用谷歌浏览器时，这会打印以下内容

```
Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) 
Chrome/23.0.1271.97 Safari/537.11 
```

为什么会这样？以及如何使用 PHP 获取浏览器的实际名称？

# delphi - 我可以在非 GUI 线程中读取 VCL 控件的属性吗？

> ID：14181276
> 
> 赞同：6
> 
> 时间：2013-01-06T10:31:56.740
> 
> 标签：delphi, asynchronous, thread-safety

如果线程从 Delphi 中的 VCL 控件异步读取信息，线程是否安全？

例如。

```
procedure TMyThread.Execute;
var bOK:Boolean; 
    iOK:Integer;
begin
   while not terminated do
   begin
      bOk:=MyForm.cbCheckBox.Checked;
      iOK:=MyForm.Left;
      sleep(20);
   end;
end; 
```

如果它不是线程安全的，我应该如何在复选框更改其属性时捕获事件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T10:40:53.667

不，这不安全。您的代码可能会导致创建的窗口句柄与错误的线程有关联。

不要使用 GUI 来存储您的应用程序状态。使用 GUI 显示该状态的视图。一旦你将状态与视图分开，你就回家了。您的工作线程可以使用底层状态状态而无需接触 GUI。

# java - Spring Security 注销和独立应用程序

> ID：14181277
> 
> 赞同：0
> 
> 时间：2013-01-06T10:31:59.633
> 
> 标签：java, spring-security, logout

我有一个使用基本身份验证的 Spring Security 保护的 SOAP Web 服务。

我编写了一个访问此 Web 服务的 Swing 应用程序。当应用程序启动时，会出现一个登录对话框，用户可以在其中输入其凭据。当用户单击登录按钮时，将使用给定的凭据创建 JAXWS 客户端。我还想为登录的用户提供注销的可能性。Spring Security 需要访问 URL 才能注销。这在独立应用程序中如何工作？这应该通过 CXF 还是使用简单的 HTTP 客户端来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:34:53.887

完全避免会话，并让您的 JAXClient 在每个连接请求上重新进行身份验证。`stateless`配置从 Spring Security 3.1 中可用的 secuity.xml 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T22:41:28.137

好的，我不会争论有状态与无状态。如果您需要从 Swing 应用程序中注销，只需向配置的注销 URL 发送一个 HTTP GET 请求，同时发送会话 ID。为此，您甚至不需要 Apache HttpClient：

```
String url = "http://example.com/logout";
String charset = "UTF-8";
String session = ";jsessionid=" + sessionId;
URLConnection connection = new URL(url + session).openConnection();
connection.setRequestProperty("Accept-Charset", charset);
InputStream response = connection.getInputStream();
// ... 
```

有关详细信息，请参阅[https://stackoverflow.com/a/2793153/131929](https://stackoverflow.com/a/2793153/131929)（触发 HTTP GET 请求）。

您可以将会话 ID 直接附加到 URL，如上所示，或者将其作为常规 cookie 标头发送，如下所示：

```
connection.addRequestProperty("Cookie", "JSESSIONID=" + sessionId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:30:15.673

你如何实现这一点并不重要。唯一的要求是创建 HTTP GET 以注销 URL，但您的请求应包含会话的会话 ID。否则 Spring 无法知道要使哪个会话无效。所以，我认为对您来说最简单的方法是使用您当前使用的同一个客户端。

# symfony - Symfony 2 AsseticBundle 中未记录的“变量”配置部分？

> ID：14181279
> 
> 赞同：0
> 
> 时间：2013-01-06T10:32:25.883
> 
> 标签：symfony, symfony-2.1, assets, assetic

在[`Configuration.php`](https://github.com/symfony/AsseticBundle/blob/master/DependencyInjection/Configuration.php)AsseticBundle 中掠夺你可以看到“变量”部分：

```
// variables
->fixXmlConfig('variable')
->children()
    ->arrayNode('variables')
        ->useAttributeAsKey('name')
        ->prototype('array')
            ->prototype('scalar')->end()
        ->end()
    ->end()
->end() 
```

本节的目的是什么？我找不到任何关于它的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:59:16.620

您可以在资产路径中包含变量，例如：

```
{% javascripts "js/scripts_{locale}.min.js" vars=["locale"] %}
    <script src={{ asset_url }}></script>
{% endjavascripts %} 
```

我们设置了一个`locale`变量，Assetic 将用`locale`配置文件中的 set 值替换它，例如：

```
# app/config/config.yml

# ...
assetic:
    variables:
        locale: [en, fr] 
```

这将编译`js/scripts_en.min.js`和`js/scripts_fr.min.js`文件。更多信息请参阅Johannes Schmitt（Asetic 的创建者）的这篇博文[。](http://jmsyst.com/blog/asset-variables-in-assetic)

# jquery - 分页不超过 270 页

> ID：14181286
> 
> 赞同：0
> 
> 时间：2013-01-06T10:33:17.190
> 
> 标签：jquery, jqxgrid

以下代码使用 jqxgrid 插件。我将循环值更改为 400，以生成 400 页，每页 10 页。

运行时，我只看到 0-26 个链接（270 页），而不是 0-39 个链接。请问我该如何解决这个问题？

在另一种情况下，在我的应用程序中，我只看到 380 页而不是 900 页的分页链接。如果有人可以修复，以下我将能够在我的应用程序中应用相同的解决方案。非常感谢！

* * *

较早的代码已被修改，以使用以下示例：

[http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/virtualdata.htm?classic](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/virtualdata.htm?classic)

为什么不显示记录？请解释。需要改变什么。非常感谢。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title id='Description'>In this demo jqxGrid uses a virtualized paging which enables you to handle very large data sets without any impact on client side performance.</title>
    <link rel="stylesheet" href="../../jqwidgets/styles/jqx.base.css" type="text/css" />
    <script type="text/javascript" src="../../scripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxdata.js"></script> 
    <script type="text/javascript" src="../../jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxdropdownlist.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.pager.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.selection.js"></script> 
    <script type="text/javascript" src="../../scripts/gettheme.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var theme = getTheme();
            // prepare the data
            var data = new Array();
            var jsonObject = { "contactList":[

{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},

], "totalrecords":9};

//alert("jsonObject.totalrecords : " + jsonObject.totalrecords);

            // generate sample data.
            var generatedata = function (startindex, endindex) {
                var data = {};
                for (var i = startindex; i < endindex; i++) {

            //alert(startindex + " " + endindex);
                    var row = {};

                            row["age"] = jsonObject.contactList[i].age;
                            row["gender"] = jsonObject.contactList[i].gender;
                            row["SId"] = jsonObject.contactList[i].SId;

                    data[i] = row;
                }
                return data;
            }
            var source =
            {
                datatype: "array",
                localdata: {},
                totalrecords: jsonObject.totalrecords
            };

            // load virtual data.
            var rendergridrows = function (params) {

        alert("rendergridrows : " + source.totalrecords);
        //alert("rendergridrows : " + params.startindex + " " + params.endindex);
                var data = generatedata(params.startindex, params.endindex);
                return data;
            }
            var totalcolumnrenderer = function (row, column, cellvalue) {
                var cellvalue = $.jqx.dataFormat.formatnumber(cellvalue, 'c2');
                return '<span style="margin: 6px 3px; font-size: 12px; float: right; font-weight: bold;">' + cellvalue + '</span>';
            }
            var dataAdapter = new $.jqx.dataAdapter(source);
            $("#jqxgrid").jqxGrid(
            {
                width: 670,
                autoheight: true,
                source: dataAdapter,
                theme: theme,
                virtualmode: true,
                pageable: true,
                rendergridrows: rendergridrows,
                columns: [

                          { text: 'Age', datafield: 'age', width: 50 },
                          { text: 'SId', datafield: 'SId', width: 120 },
                          { text: 'Gender', datafield: 'gender', width: 80 },

                ]
            });
        });
    </script>
</head>
<body class='default'>
    <div id='jqxWidget' style="font-size: 13px; font-family: Verdana; float: left;">
        <div id="jqxgrid"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:12:41.213

据我从您的代码中看到的，您为每个页面添加了锚点。我认为 DIV 标签中没有足够的空间容纳这么多标签。考虑使用不同的布局，例如输入字段来选择具有 100 万条记录的示例中的页面：[virtualdata.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/virtualdata.htm?classic)

# c# - 在使用 XmlSerializer 反序列化之前以编程方式验证 Xml 输入？

> ID：14181299
> 
> 赞同：0
> 
> 时间：2013-01-06T10:36:03.280
> 
> 标签：c#, xml, deserialization

我有一个我自己创建的 Xml Schema，并使用 Xsd.exe 工具生成了相应的 C# 类。然后，我的应用程序将 Xml 文档读入（反序列化）到生成的类型中。

这是我用来反序列化的代码：

```
XmlSerializer serializer = new XmlSerializer(typeof(MyConfig));
TextReader textReader = new StreamReader(fileName);               
MyConfig config = (MyConfig)serializer.Deserialize(textReader);            
textReader.Close(); 
```

XmlSerializer 在解析 Xml 时非常宽容。Xml 对于架构可能无效，但仍可以反序列化。

我想要做的是在反序列化文件之前验证 Xml。我有谷歌如何做到这一点，这似乎是直截了当的。

我遇到的问题/担心是我想交付单个 .EXE 文件，但如果我的程序针对 Xml Schema 文档进行运行时 Xml 验证，我也必须将 .xsd 作为交付的一部分*并*确保这一点.xsd 文件始终位于可执行文件的相同（相对）目录中？

也许有一种方法可以*将*Xml Schema 文档嵌入到我编译的应用程序中，这样我就不必从磁盘中查找/读取它了？

谢谢！

# python - 使用 Boost-Python 查找函数具有的参数数量

> ID：14181303
> 
> 赞同：0
> 
> 时间：2013-01-06T10:36:33.827
> 
> 标签：python, python-2.7, boost-python

我在 python 中有一个用户定义的函数，我不知道它有多少个参数。即可以

```
def f1(x,y,z):
  return  sin(x)*cos(y)*tan(z) 
```

或者

```
def f1(x):
  return  sin(x) 
```

**我如何使用 Boost-Python 来查找函数有多少个参数？**如果我只有 1 个函数参数，我总是可以这样评估：

```
 bp::object f1 = main_dict["f1"];
  std::cout << bp::extract<double>(f1(0.0)) << std::endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:47:15.953

对于python中的用户自定义函数，可以通过特殊属性来提取函数的[arity 。](http://en.wikipedia.org/wiki/Arity)`func_code`该属性表示编译后的函数体，并提供`co_argcount`指示函数的数量的属性。有关更多信息和其他可能的方法，请考虑阅读[此](https://stackoverflow.com/questions/990016/how-to-find-out-the-arity-of-a-method-in-python)问题。

忽略错误检查，Boost.Python 实现变得相当简单：

```
boost::python::extract<std::size_t>(fn.attr("func_code").attr("co_argcount")); 
```

* * *

这是一个完整的简短示例：

```
#include <iostream>
#include <boost/python.hpp>

void print_arity(boost::python::object fn)
{
  std::size_t arity = boost::python::extract<std::size_t>(
                        fn.attr("func_code").attr("co_argcount"));
  std::cout << arity << std::endl;
}

BOOST_PYTHON_MODULE(example)
{
  def("print_arity", &print_arity);
} 
```

及其用法：

```
>>> from example import print_arity
>>> def f1(x,y,z): pass
... 
>>> print_arity(f1)
3
>>> def f1(x): pass
... 
>>> print_arity(f1)
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T21:00:20.243

```
def foobar(x, *args):
    return len(args) + 1 
```

参数列表中的`*args`将参数列表中未明确定义的所有额外参数分配给列表`args`（此名称是用户定义的）。假设函数必须至少有一个参数，上述函数将返回参数的数量。

**免责声明：**我对 Boost.Python 没有任何经验。这个答案只是 Python 中的实现，将返回值转换为 C++ 取决于用户。

# c# - 使用箭头键滚动 ScrollableControl

> ID：14181304
> 
> 赞同：4
> 
> 时间：2013-01-06T10:36:39.687
> 
> 标签：c#, winforms, scroll, scrollbar

我`ScrollableControl`在我的 C# 项目中使用 a ，我想知道如何**将箭头键映射到 vertical/horizo​​ntal scrolling**。

编辑：我的图片框获得焦点，我设法将键映射到滚动。这里的问题是，当我按下箭头键时，它会滚动一次，然后失去焦点，将其提供给 Scrollviewer 旁边的按钮。我希望滚动查看器不要失去焦点

这是我的代码，**第二段**是这里有趣的一段。

```
private void drawMap(IGame game)
{
    System.Windows.Forms.PictureBox pictureBox = new System.Windows.Forms.PictureBox();
    pictureBox.Width = (int)Math.Sqrt((double)game.Map.grid.Count) * 50; pictureBox.Height = (int)Math.Sqrt((double)game.Map.grid.Count) * 50;
    pictureBox.Paint += new System.Windows.Forms.PaintEventHandler(game.Map.afficher);
    pictureBox.MouseEnter += pictureBoxFocus;
    pictureBox.Click += pictureBoxFocus;
    pictureBox.Click += mapClicked;

    System.Windows.Forms.ScrollableControl sc = new System.Windows.Forms.ScrollableControl();
    sc.Controls.Add(pictureBox);
    sc.AutoScroll = true;
    windowsFormsHost1.Child = sc;
} 
```

先感谢您 ：）

加：我的滚动算法有点脏，效果不太好，所以我想知道是否有一种“简单的方法”来做到这一点。

```
private void sc_PreviewKeyDown(object sender, System.Windows.Forms.PreviewKeyDownEventArgs e)
{
    System.Windows.Forms.ScrollableControl sc = (System.Windows.Forms.ScrollableControl)sender;
    switch (e.KeyValue)
    {
        case (int)System.Windows.Forms.Keys.Down:
            sc.VerticalScroll.Value += 50;
            break;
        case (int)System.Windows.Forms.Keys.Up:
            if(sc.VerticalScroll.Value - 50 < 0)
                sc.VerticalScroll.Value = 0;
            else sc.VerticalScroll.Value -= 50;
            break;
        case (int)System.Windows.Forms.Keys.Right:
            sc.HorizontalScroll.Value += 50;
            break;
        case (int)System.Windows.Forms.Keys.Left:
            if (sc.HorizontalScroll.Value - 50 < 0)
                sc.HorizontalScroll.Value = 0;
            else sc.HorizontalScroll.Value -= 50;
            break;
    }
    windowsFormsHost1.Child.Focus();
} 
```

# c# - 将数据传递到 datagridview 的选定单元格

> ID：14181315
> 
> 赞同：0
> 
> 时间：2013-01-06T10:38:42.807
> 
> 标签：c#, winforms, datagridview, user-controls

我在winforms工作。在那，我有一个`datagridview`. 我已将选定的单元格值转移到新表单中，`form2`

但现在我想将文本框值重新传输`form2`到`datagridview`单元格中。

我怎样才能做到这一点？

在 上`form2`，伴随着`label1`有`button1`和`textbox`。我希望当它`textbox`被填充并被`button1`按下时，它将文本从 传输`textbox`到被选中的单元格。

我为此使用了以下代码。事件代码`button_click`...

但是出现如下错误。

> “对象引用未设置为对象的实例”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:53:30.743

您确实在表单 2 中重新创建了主表单，这可能不是您需要的。将代码更改为：

```
private void editToolStripMenuItem_Click(object sender, EventArgs e)
{
 form2 f2 = new form2();
 f2.label1.Text = dataGridView1.SelectedCells[0].Value.ToString();
 f2.ShowDialog();
 dataGridView1.SelectedCells[0].Value = f2.textBox1.Text;
}

private void button1_Click(object sender, EventArgs e)
{
    DialogResult = DialogResult.OK;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:47:22.270

的设计属性`DataGridView` `dataGridView1.Modifiers = Public`

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        using (var f = new Form2 { Owner = this})
        {
            f.valueFromSelectedCell = dataGridView1.SelectedCells[0].EditedFormattedValue.ToString();
            f.ShowDialog();
        }
    }
}

public partial class Form2 : Form
{
    public string valueFromSelectedCell { get; set; }
    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        textBox1.Text = valueFromSelectedCell;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form1 f = this.Owner as Form1;
        var currentCell = f.dataGridView1.CurrentCell;
        f.dataGridView1[currentCell.ColumnIndex, currentCell.RowIndex].Value = textBox1.Text;
        Close();
    }
} 
```

# java - 动作/按键监听器无法正常工作

> ID：14181318
> 
> 赞同：1
> 
> 时间：2013-01-06T10:39:40.930
> 
> 标签：java, swing, awt, jbutton, actionlistener

我有两个框架（一个主框架和一个弹出窗口）。在主框架上添加了键和鼠标侦听器。两者都工作得很好。在弹出窗口中有 50 个按钮。我为所有这些设置了一个动作监听器。它工作正常。我也有键鼠监听器。鼠标工作。关键是片状。主框架中使用的相同 keyListener 类也被添加到弹出框架中。一旦弹出窗口显示，按键监听器就会工作，一旦发生鼠标点击（动作监听器启动）按键监听器就会停止工作。请帮忙。附上的代码是简化版

* * *

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class key {
    private static  class toolsAction implements ActionListener {
        public void actionPerformed (ActionEvent ae) {
            log("Command " + Integer.parseInt(ae.getActionCommand()));
        }
    }
    private static void log(String s) { System.out.println(s); }
    private static class keyboardHandler implements KeyListener {
        public void keyPressed( KeyEvent e) { log("KB Press called ");   }
        public void keyReleased(KeyEvent e) { log("KB Release called "); }
        public void keyTyped   (KeyEvent e) { log("KB Typed called ");   }
    }
    public static void main(String [] args) {
        JFrame pFrame = new JFrame("Frame");
        pFrame.addKeyListener(new keyboardHandler());
        Container pane = pFrame.getContentPane();
        pane.setLayout(null);
        pane.setVisible(true);
        pFrame.setSize(650, 300);
        pFrame.setVisible(true);
        JButton[] buttons = new JButton[50];
        toolsAction action = new toolsAction();
        for (int i = 0; i < 50; i++) {
            buttons[i] = new JButton("" + i);
            buttons[i].setActionCommand("" + i);
            buttons[i].addActionListener(action);
            pane.add(buttons[i]);
            buttons[i].setBounds(((i % 10) * 60), ((i / 10) * 40), 60, 40);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:42:29.707

另一种方法使用[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)和[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。下面的示例将 10 个按钮绑定到数字键，也使用数字作为`MNEMONIC_KEY`每个按钮。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/** @see http://stackoverflow.com/a/14182227/230513 */
public class Key {

    public static final int SIZE = 10;

    private static class ToolAction extends AbstractAction {

        public ToolAction(int i) {
            super(String.valueOf(i));
            putValue(MNEMONIC_KEY, KeyEvent.VK_0 + i);
        }

        @Override
        public void actionPerformed(ActionEvent ae) {
            System.out.println(ae.getActionCommand());
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("Frame");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setLayout(new GridLayout(0, SIZE / 2));
                for (int i = 0; i < SIZE; i++) {
                    final ToolAction toolAction = new ToolAction(i);
                    JButton b = new JButton(toolAction);
                    String name = b.getText();
                    b.getInputMap(JButton.WHEN_IN_FOCUSED_WINDOW).put(
                        KeyStroke.getKeyStroke(KeyEvent.VK_0 + i, 0), name);
                    b.getActionMap().put(name, toolAction);
                    f.add(b);
                }
                f.pack();
                f.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T11:34:41.787

仅当`KeyListener`添加了侦听器的组件具有（键盘）焦点时才会执行。如果单击另一个组件，该组件将成为焦点，并且键盘事件将发送到其`KeyListener`s。
在没有看到弹出代码的情况下不确定这是否是问题，但这是发布代码中的问题......

**编辑**
您可以添加一个`AWTEventListener`以`Toolkit`拦截与焦点组件无关的所有事件：

```
private static class AWTListener implements AWTEventListener {
    @Override
    public void eventDispatched(AWTEvent event) {
        log("AWT: " + event);
    }
};

...

    Toolkit toolkit = Toolkit.getDefaultToolkit();
    toolkit.addAWTEventListener(new AWTListener(), AWTEvent.KEY_EVENT_MASK); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T04:50:08.577

我通过添加 MouseMotionListener 并在 mouseMoved 方法中调用 pFrame.requestFocusInWindow() 并在按钮的 actionPerformed 方法中添加焦点请求来解决这个*问题*。即使框架中只有一个按钮，只要将 ActionListener 添加到按钮，KeyListener 也不起作用。这充其量是笨拙的，但对我有用。我仍然很想听听社区的意见，为什么我的原始代码不起作用。

# javascript - 使用 javascript onclick 错误调用数据

> ID：14181319
> 
> 赞同：0
> 
> 时间：2013-01-06T10:39:44.207
> 
> 标签：javascript, jquery, html, ajax

我创建了一个 javascript 函数，该函数包含在 html 代码中的 onclick 函数中。当使用值 10.34.099 或“10AXMN.09”调用的变量“data.nik”onclick 函数无法正常运行并显示错误消息时。如果 "data.nik" 价值 101011 那么 onclick 功能可以运行良好。

以下 javascript 代码

```
function tabelListPegawai(data){
    var statusPegawai;
    if (data.status==1){
        statusPegawai = 'Karyawan Tetap';
    }else if(data.status==2){
        statusPegawai = 'Karyawan Tidak Tetap';
    }
    return baris = $("<tr>\
            <td>"+data.nik+"</td>\
            <td>"+data.nama_pegawai+"</td>\
            <td>"+data.nama+"</td>\
            <td>"+data.nama_jabatan+"</td>\
            <td>"+statusPegawai+"</td>\
            <td style='text-align: center;'>\
            <a class='btn btn-small aksi_atas' rel='tooltip' title='Ubah' onclick='editPegawai("+data.id_pegawai+")'><i class='icon-edit'></i></a>\
            <a class='btn btn-small aksi_atas' rel='tooltip' title='Hapus' onclick='hapusPegawai("+data.id_pegawai+", "+data.nik+")'><i class='icon-remove'></i></a>\
            </td>\
    </tr>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:44:20.163

您应该在参数周围插入引号

```
onclick='editPegawai(\""+data.id_pegawai+"\")'> 
```

# mysql - Liquibase 不能使用部分键？

> ID：14181321
> 
> 赞同：1
> 
> 时间：2013-01-06T10:40:02.700
> 
> 标签：mysql, liquibase

我执行由 liquibase 生成的 sql，我得到：

```
CREATE INDEX `messageId_IDX` ON `messagedetails`(`messageId`); 
```

> 第 275 行的错误 1170 (42000)：在没有密钥长度的密钥规范中使用了 BLOB/TEXT 列“messageId”

我原来的sql是：

```
CREATE INDEX messageId_IDX ON MessageDetails(MessageID(128)) 
```

它是 liquibase 中的错误吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-07T10:28:48.670

目前 Liquibase 不支持设置索引长度。请参阅[此未解决的功能请求](https://liquibase.jira.com/browse/CORE-1180)，以及[此邮件列表线程](https://www.mail-archive.com/liquibase-user@lists.sourceforge.net/msg00182.html)

# javascript - 将弹出窗口设置为每 30 天打开一次

> ID：14181324
> 
> 赞同：0
> 
> 时间：2013-01-06T10:40:32.780
> 
> 标签：javascript, jquery, cookies

我正在尝试设置每 30 天（或任何其他设定时间段）将启动的 cookie，例如 Stackoverflow.com。

我在这里找到了一个我认为可能会有所帮助的[答案。](https://stackoverflow.com/questions/12926119/cookie-to-show-a-popup-every-30-days)到目前为止，这是我的测试代码： HTML + Initiator

```
<html>
    <head>
        <!-- Load JQuery 1.8.3 and the repeatablePopup functions-->
        <script src="js/jquery-1.8.3.min.js"></script>
        <script src="js/repeatablePopup.js"></script>

        <script>
            jQuery(document).ready(function() {
                var visited = readCookie('visited');
                if (!visited || visited !== "true") {
                    createCookie('visited', "true", 7);
                } else {
                        window.open("http://stackoverflow.com");
                }
            });
        </script>
    </head>

    <body>
        <p>Setting Cookie</p>
    </body>

</html> 
```

repeatablePopup.js 上的函数

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
    document.write('Cookie is set');
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

编辑：现在的问题是每次刷新页面时都会植入 cookie，即使 cookie 存在。所以最终弹出窗口不起作用。

感谢您提供的任何帮助，沙哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:40:23.017

试试这个：

```
jQuery(document).ready(function () {
    if (!readCookie('visited')) {
        window.open("http://stackoverflow.com");
        createCookie('visited', null, 30);
    }
}); 
```

当 cookie 不存在时，将打开弹出窗口。弹出窗口打开后，您设置 cookie。三十天后，cookie 将过期，一切将恢复正常并再次执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T08:36:48.167

尝试使用[CoverPop.js](https://github.com/tylerpearson/CoverPop)，也许它可以帮助某人，有一些参数可以设置

```
CoverPop.start({
    coverId:             'CoverPop-cover',       // set default cover id
    expires:             30,                     // duration (in days) before it pops up again
    closeClassNoDefault: 'CoverPop-close',       // close if someone clicks an element with this class and prevent default action
    closeClassDefault:   'CoverPop-close-go',    // close if someone clicks an element with this class and continue default action
    cookieName:          '_CoverPop',            // to change the plugin cookie name
    onPopUpOpen:         function() {},          // on popup open callback function
    onPopUpClose:        function() {},          // on popup close callback function
    forceHash:           'splash',               // hash to append to url to force display of popup (e.g. http://yourdomain.com/#splash)
    delayHash:           'go',                   // hash to append to url to delay popup for 1 day (e.g. http://yourdomain.com/#go)
    closeOnEscape:       true                    // close if the user clicks escape
    delay:               0                       // set an optional delay (in milliseconds) before showing the popup
    hideAfter:           null                    // set an optional time (in milliseconds) to autohide
}); 
```

# android - TextViews 在 Android 4 上仅动画一次

> ID：14181325
> 
> 赞同：1
> 
> 时间：2013-01-06T10:40:45.607
> 
> 标签：android, animation, textview, backwards-compatibility, layout-animation

我有一个带有许多按钮和两个文本视图的布局（RelativeLayout）。对于信息的每次更改，我都会淡出所有视图，更新信息，然后淡入视图。我为此使用布局动画。

非常奇怪的是，文本视图只能动画一次。它们一次正确地淡入和淡出，然后就不再动画了。另一方面，按钮继续动画效果很好。

另一个可能奇怪的事情是我在 android 2.3.x 上没有遇到这个问题，但在 android 4.0.x 上。

我可以通过在淡入后清除文本视图上的动画来解决这个问题，但它看起来不太好，因为它们仍然没有淡入。

我曾尝试在淡入之前清除文本视图上的动画，但这无济于事。我还尝试了清单中 targetSdkVersion 属性的不同设置，但没有任何结果。

淡入动画（淡出类似）：

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="750" 
    android:fillAfter="true" 
    android:fromAlpha="0.0"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toAlpha="1.0" 
/> 
```

动画代码（每次布局淡入时都会运行）：

```
// Set listener.
viewGroup.setLayoutAnimationListener(listener);

// Load animation.
final Animation fadeIn = AnimationUtils.loadAnimation(context, R.anim.fade_in);

// Create and start animation controller.
final LayoutAnimationController animController = new LayoutAnimationController(fadeIn);
viewGroup.setLayoutAnimation(animController);
animController.setAnimation(fadeIn);
animController.setDelay(FADE_IN_DELAY + extraDelay);
animController.setOrder(LayoutAnimationController.ORDER_REVERSE);
animController.start(); 
```

有人有什么主意吗？Buttons 和 TextViews 之间是否存在某种特定于动画的区别？Android 4 中是否有任何动画更改破坏了向后兼容性？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:26:47.147

布局动画仅在视图组布置其子项时发生 - 根据`[LayoutAnimationController][1]`文档，为每个子项播放相同的动画，但开始时间不同 - 它通常用于例如 a`ListView`或`GridView`为项目的入口设置动画。

更新内容时通常不会播放**动画**。每次更新内容时，您都需要使用`View.startAnimation(Animation)`并确保播放动画。`View.clearAnimation()`

# ruby-on-rails - 使用范围验证唯一性不起作用

> ID：14181332
> 
> 赞同：1
> 
> 时间：2013-01-06T10:42:19.973
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

v3.2.1

**不知道为什么“计数”出现为零并且索引不会呈现，因为“计数”在每个模型中都很好，直到我通过范围验证进行唯一性。**

**有什么建议么？**

* * *

**模型**

```
Class FeatureIcon < ActiveRecord::Base
  belongs_to :user

  validates_presence_of :img_size, :feature_name, :image, :user_id
  validates_uniqueness_of :img_size, :scope => :feature_name

  //paperclip interpolates stuff....
end 
```

**控制器**

```
before_filter :load_user

def index
  @feature_icons = @user.feature_icons.all
  @feature_icon = @user.feature_icons.new

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @feature_icons }
    format.js
  end
end

def create
  @feature_icon = @user.feature_icons.new(params[:feature_icon])

  respond_to do |format|
    if @feature_icon.save
      format.html { redirect_to user_feature_icons_url, notice: 'successfully created.' }
      format.json { render json: @feature_icon, status: :created, location: @feature_icon }
      format.js
    else
      format.html { render action: "index" }
      format.json { render json: @feature_icon.errors, status: :unprocessable_entity }
    end
  end
end 
```

**错误**

```
NoMethodError in Feature_icons#create

undefined method `count' for nil:NilClass
  Extracted source (around line #7):

  6:       <div class="count">
  7:         <div id="count" class="feed-count"><%= @feature_icons.count %></div>
  8:       </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:53:36.450

在该`create`方法中，您实例化`@feature_icons`（使用“s”），但在您使用的视图中`@feature_icon`（没有“s” ）`@feature_icons`，.`nil`

如果保存失败，该行`format.html { render action: "index" }`会渲染视图`index.htm.erb`，但`index`不会调用控制器中的方法。尝试

```
if @feature_icon.save
  #... nothing to change
else
  format.html do
    @feature_icons = @user.feature_icons.all
    render action: "index"
  end
  format.json { render json: @feature_icon.errors, status: :unprocessable_entity }
end 
```

或者

```
if @feature_icon.save
  #... nothing to change
else
  format.html { redirect_to :index }
  format.json { render json: @feature_icon.errors, status: :unprocessable_entity }
end 
```

# c# - 如何在实体框架中编写此 SQL 查询？

> ID：14181334
> 
> 赞同：2
> 
> 时间：2013-01-06T10:42:43.240
> 
> 标签：c#, sql-server, sql-server-2008, entity-framework

我有这个查询，我想将其从 Entity Framework 1:1 翻译成 SQL：

```
SELECT GroupId, ItemId, count(*) as total
  FROM [TESTDB].[dbo].[TestTable]
  WHERE GroupId = '64025'
  GROUP BY GroupId, ItemId
  ORDER BY GroupId, total DESC 
```

`ItemId`此 SQL 查询应根据相同（对于该组）的出现次数进行排序。

我现在有这个：

```
from x in dataContext.TestTable.AsNoTracking()
where x.GroupId = 64025
group x by new {x.GroupId, x.ItemId}
into g
orderby g.Key.GroupId, g.Count() descending 
select new {g.Key.GroupId, g.Key.ItemId, Count = g.Count()}; 
```

但这会生成以下 SQL 代码：

```
SELECT 
  [GroupBy1].[K1] AS [GroupId], 
  [GroupBy1].[K2] AS [ItemId], 
  [GroupBy1].[A2] AS [C1]
FROM ( SELECT 
         [Extent1].[GroupId] AS [K1], 
         [Extent1].[ItemId] AS [K2], 
         COUNT(1) AS [A1], 
         COUNT(1) AS [A2]
       FROM [dbo].[TestTable] AS [Extent1]
       WHERE 64025 = [Extent1].[GroupId]
       GROUP BY [Extent1].[GroupId], [Extent1].[ItemId]
     )  AS [GroupBy1]
ORDER BY [GroupBy1].[K1] ASC, [GroupBy1].[A1] DESC 
```

这也有效，但比我创建的 SQL 慢 2 倍。

我一直在摆弄 linq 代码，但我还没有设法创建类似于我的查询的东西。

执行计划（只有最后两项，前两项相同）：

```
FIRST:   |--Stream Aggregate(GROUP BY:([Extent1].[ItemId]) DEFINE:([Expr1006]=Count(*), [Extent1].[GroupId]=ANY([TESTDB].[dbo].[TestTable].[GroupId] as [Extent1].[GroupId])))
           |--Index Seek(OBJECT:([TESTDB].[dbo].[TestTable].[IX_Group]), SEEK:([TESTDB].[dbo].[TestTable].[GroupId]=(64034)) ORDERED FORWARD)

SECOND:  |--Stream Aggregate(GROUP BY:([TESTDB].[dbo].[TestTable].[ItemId]) DEFINE:([Expr1007]=Count(*), [TESTDB].[dbo].[TestTable].[GroupId]=ANY([TESTDB].[dbo].[TestTable].[GroupId])))
           |--Index Seek(OBJECT:([TESTDB].[dbo].[TestTable].[IX_Group] AS [Extent1]), SEEK:([Extent1].[GroupId]=(64034)) ORDERED FORWARD) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:12:00.630

Entity Framework 生成的查询和您手工制作的查询在语义上是相同的，并且会给出相同的计划。

派生表定义在查询优化期间内联，因此唯一的区别可能是解析和编译期间的一些极小的额外开销。

您发布的片段`SHOWPLAN_TEXT`是相同的计划。唯一的区别是别名。看起来您的表定义类似于。

```
CREATE TABLE [dbo].[TestTable] 
(
[GroupId] INT,
[ItemId] INT
)

CREATE NONCLUSTERED INDEX IX_Group ON  [dbo].[TestTable] ([GroupId], [ItemId]) 
```

你得到一个这样的计划

![计划](../Images/008c98778e76d4027b80244b3d46a644.png)

就所有意图和目的而言，这些计划都是相同的。您的性能测试方法可能存在缺陷。例如，也许您的第一个查询将页面带入缓存，然后使第二个查询受益。

# mysql - SQL - 从表中获取最新事件

> ID：14181338
> 
> 赞同：0
> 
> 时间：2013-01-06T10:42:57.950
> 
> 标签：mysql, sql, facebook, greatest-n-per-group

我有两张桌子。
一个经销商表（id、名称等）和一个事件表（id、did(dealerid)、eid(fb eventid)、场地等），我在其中保存了来自 facebook 的经销商 ID、事件 ID、事件 URL 和日期。

我可以用这个 sql 语句获取所有数据：

```
SELECT * FROM dealer as t_d INNER JOIN events AS t_e
ON t_d.id = t_e.did; 
```

这工作正常。

```
1   Laden Dortmund  Stra    12  45525   Dortmund    DE  www.google.de   0201-123456 laden@dortmund.de   300 400 1   1   416364098428245 https://www.facebook.com/events/416364098428245/    2013-01-28
2   Laden Unna  Wurststr.   123 45130   Unna    DE  www.bing.de 0222-11223344   laden@unna.de   400 276 2   2   145457548940302 https://www.facebook.com/events/145457548940302/    2013-03-08
2   Laden Unna  Wurststr.   123 45130   Unna    DE  www.bing.de 0222-11223344   laden@unna.de   400 276 3   2   405092472902921 https://www.facebook.com/events/405092472902921/    2013-04-26 
```

如您所见，我得到了经销商 id 2 的两行，因为列出了两个事件。
我怎样才能得到最接近这个日期（今天）的事件。

稍后，将有大约 20 个经销商，每个经销商至少有 3-4 个事件。

一个提示会很好，谢谢！

**更新：**
这是解决方案！

```
SELECT  t_d.*, t_e.*, DATE_FORMAT(t_e.date,'%d.%m.%Y') as date
    FROM    dealer as t_d
    INNER JOIN events AS t_e
        ON t_d.id = t_e.did
    INNER JOIN
    (
        SELECT  did, MIN(date) minDate
        FROM    events
        GROUP BY did
    ) e ON  t_e.did = e.did AND
            t_e.date = e.minDate 
```

但是是否有可能以某种方式显示所有经销商，即使经销商不存在任何事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T10:46:00.033

```
SELECT  t_d.*, t_e.*
FROM    dealer as t_d 
        INNER JOIN events AS t_e
            ON t_d.id = t_e.did
        INNER JOIN
        (
            SELECT  did, MAX(date) maxDate
            FROM    events
            GROUP BY did
        ) e ON  t_e.did = e.did AND
                t_e.date = e.maxDate 
```

# android - 滚动/拖动在 Android 2.2 中停止计数器

> ID：14181341
> 
> 赞同：1
> 
> 时间：2013-01-06T10:43:36.903
> 
> 标签：android, cordova, jquery-mobile

我正在为我的 Android 应用程序使用 JQM 和 Phonegap。我在页面上显示一个计数器。但是当我开始在该页面上滚动/拖动时，计数器会在那个时候暂停，然后当我抬起拇指时再次恢复并显示递增的值。

根据 jQueryMobile 的文档

scrollstart：滚动开始时触发。请注意，iOS 设备在滚动期间冻结 DOM 操作，将它们排队以在滚动完成时应用。我们目前正在研究允许在滚动开始之前应用 DOM 操作的方法。

但这似乎也发生在 Android 2.2 上

当用户在屏幕上滚动或拖动时，如何继续显示时钟运行。

# php - __soapCall - 我如何打出正确的电话？

> ID：14181343
> 
> 赞同：1
> 
> 时间：2013-01-06T10:43:48.940
> 
> 标签：php, soap

我是来自 PHP 的 WS 调用的新手。谁能告诉我如何从这个 WS 读取数据。

这是我的代码

```
$wsdl = "https://test.saljfinans.handelsbanken.se/xml/netxservice.wsdl";

$username       = 'user';
$password       = 'password';
$contractNumber = XXXXXX;
$orderNumber    = '7871';
$call = array("contractNumber" => $contractNumber, "orderNumber" => $orderNumber);

$client = new SoapClient( $wsdl, array('cache_wsdl' => WSDL_CACHE_NONE, 'trace' => 1) );
//var_dump($client->__getFunctions());
//var_dump($client->__getTypes());

$name = 'namespace';
$text = '';
$text .= '<authHeaderRequest><credentials><username>'.$username.'</username><password>'.$password.'</password></credentials></authHeaderRequest>';
$var = new SoapVar( $text, XSD_ANYXML, null, null, null );
$header = new SoapHeader( $name, 'authHeaderRequest', $var );
$client->__setSoapHeaders($header);

$response = $client->__soapCall("getInvoiceOrder", array("getInvoiceOrderRequest_t" => $call), null, $header); 
```

我收到致命错误：未捕获的 SoapFault 异常：[Client] SOAP-ERROR: Encoding: object has not 'request' property

如何调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:20:26.497

我现在有更多信息，但无论如何我都无法正常工作。我只是得到

请求 = soapenv:Server.generalException

```
class getInvoiceOrder {
    public $request;
}

class getInvoiceOrderRequest_t {
    public $contractNumber;
    public $orderNumber;
}

ini_set("soap.wsdl_cache_enabled", 0);
$wsdl = "https://test.saljfinans.handelsbanken.se/xml/netxservice.wsdl";

$username       = 'user';
$password       = 'password';
$contractNumber = 550158;
$orderNumber    = '7871';

$params = new getInvoiceOrder(); 
$params->request = new getInvoiceOrderRequest_t;
$params->request->orderNumber = $orderNumber;
$params->request->contractNumber = $contractNumber;
$param[] = $params;

$client = new SoapClient( $wsdl, array('cache_wsdl' => WSDL_CACHE_NONE, 'trace' => 1) );

$name = 'namespace';
$text = '';
$text .= '<authHeaderRequest><credentials><username>'.$username.'</username><password>'.$password.'</password></credentials></authHeaderRequest>';
$var = new SoapVar( $text, XSD_ANYXML, null, null, null );
$header = new SoapHeader( $name, 'authHeaderRequest', $var );
try { 
    $client->__setSoapHeaders($header);
} catch(SoapFault $client) { 
    printf("<br/> Request = %s </br>", htmlspecialchars($client->faultcode));
    print $client->getMessage(); 
    print $client->getTraceAsString(); 
}

try { 
    $response = $client->__soapCall("getInvoiceOrder", $param, null, $header);
} catch(SoapFault $client) { 
    printf("<br/> Request = %s </br>", htmlspecialchars($client->faultcode));
    print $client->getMessage(); 
    print $client->getTraceAsString(); 
} 
```

# git - 如何在 git repo 中合并用户？

> ID：14181348
> 
> 赞同：0
> 
> 时间：2013-01-06T10:44:49.977
> 
> 标签：git, git-config

我有一个 git repo，我从不同的计算机提交，所以我最终显示为 2 个不同的贡献者，但实际上它是一个用户 - 我。如何将这些用户合二为一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:46:41.570

您必须在两台机器上将您的用户名和电子邮件设置为相同：

```
git config --global user.name <name>
git config --global user.email <email> 
```

如果您想更改现有提交，请注意您将重写历史记录。

你可以参考这个答案：[How do I rewrite committer names in a git repository?](https://stackoverflow.com/questions/1566809/how-do-i-rewrite-committer-names-in-a-git-repository)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:14:45.093

[@SergiuDumitriu在](https://stackoverflow.com/users/620249/sergiu-dumitriu)**[https://github.com/settings/emails](https://github.com/settings/emails)**将所有电子邮件添加到您的帐户是正确的。这样，您所有提交的工作（来自不同的电子邮件）都将链接到您的 GitHub 帐户，并汇总在您贡献的每个存储库的“图表”部分中。

但是，为了在您计算机上的本地存储库上也能做到这一点，您必须将`.mailmap`文件提交到存储库的根目录，该文件会将您的电子邮件链接在一起。**[一旦可以在git shortlog](http://git-scm.com/docs/git-shortlog)**文档中找到有关此 git 功能和文件格式的更多信息。

这种方式运行`$ git shortlog -s -n`将正确聚合您的所有身份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:10:11.430

如果您只关心将所有提交链接到您的 GitHub 帐户，那么将两个电子邮件地址添加到您的帐户就足够了。

如果你真的想修改所有现有的提交，除非代码没有被其他人真正使用过，否则**不要这样做**，因为你要重写每个提交，你的存储库中的整个历史。

如果您仍想这样做，则应使用[`git-filter-branch --env-filter`](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)，如[本答案](https://stackoverflow.com/questions/1566809/how-do-i-rewrite-committer-names-in-a-git-repository#answer-1566833)所示。

# sorting - 在已排序的无限二进制数组中第一次出现 1

> ID：14181350
> 
> 赞同：2
> 
> 时间：2013-01-06T10:45:30.550
> 
> 标签：sorting, search

对于有限大小的数组，我们可以使用二进制搜索在 O(log(n)) 时间内得到解。

如果我们有一个具有恒定时间查找索引的无限数组，如果我们知道数组已排序，我们能以多快的速度找到第一次出现的 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:50:52.617

上面的问题是什么？你对无限数组的操作是什么？O(1) 查找？也许最好的办法是查找第一次出现的索引 2^n 的 1 对于某些 n，然后进行二进制搜索。然后保证在 O(log(n)) 中找到它，其中 n 是第一个索引的位置。

编辑：附言。如果数组确实是无限的并且只包含零，则不能保证终止。

# boost - 使用大小优化 (-Os) 编译 boost_regex 时出现“重复部分”错误

> ID：14181351
> 
> 赞同：11
> 
> 时间：2013-01-06T10:45:35.093
> 
> 标签：boost, mingw, compiler-optimization

编译器：http: [//sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev6。 7z](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev6.7z)

提升：http: [//sourceforge.net/projects/boost/files/boost/1.52.0/boost_1_52_0.7z](http://sourceforge.net/projects/boost/files/boost/1.52.0/boost_1_52_0.7z)

（都在 D：驱动器上）

boost_regex 编译为：

```
b2 --prefix=D:\boost toolset=gcc --with-regex --layout=tagged release 
```

代码：

```
#include <boost\regex.hpp>
int main() {
  boost::regex reg("[a-z]+");
} 
```

用参数编译：

```
g++ -I "d:\boost" -Os -o test.exe test.cpp -static -L d:\boost\stage\lib -lboost_regex-mt 
```

错误：

```
d:\boost\stage\lib\libboost_regex-mt.a(regex.o): duplicate section `.rdata$_ZTVN5boost16exception_detail19error_info_injectorISt13runtime_errorEE[__ZTVN5boost16exception_detail19error_info_injectorISt13runtime_errorEE]' has different size
d:\boost\stage\lib\libboost_regex-mt.a(regex.o): duplicate section `.rdata$_ZTVN5boost16exception_detail10clone_implINS0_19error_info_injectorISt13runtime_errorEEEE[__ZTVN5boost16exception_detail10clone_implINS0_19error_info_injectorISt13runtime_errorEEEE]' has different size
d:\boost\stage\lib\libboost_regex-mt.a(regex.o): duplicate section `.rdata$_ZTSN5boost16exception_detail10clone_implINS0_19error_info_injectorISt13runtime_errorEEEE[__ZTSN5boost16exception_detail10clone_implINS0_19error_info_injectorISt13runtime_errorEEEE]' has different size
d:\boost\stage\lib\libboost_regex-mt.a(regex.o): duplicate section `.rdata$_ZTSN5boost16exception_detail10clone_baseE[__ZTSN5boost16exception_detail10clone_baseE]' has different size
d:\boost\stage\lib\libboost_regex-mt.a(regex.o): duplicate section `.rdata$_ZTSN5boost16exception_detail19error_info_injectorISt13runtime_errorEE[__ZTSN5boost16exception_detail19error_info_injectorISt13runtime_errorEE]' has different size 
```

它可以编译，但我还没有测试它是否可以在更复杂的代码中工作。移除`-Os`开关会清除错误，但应用程序大小会大 2 倍。

也许我也应该使用大小优化来构建 Boost，但我不知道在 b2 命令行中将这个选项传递到哪里。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-04-19T22:27:46.203

在我的情况下，boost 1.58 是使用“-march=i686”在内部编译的，但我的代码不是。在我的项目中添加“-march=i686”消除了所有“重复部分”。

经验教训：始终努力确保所有库和主项目都使用相同的编译器选项进行编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-15T19:37:04.023

我相信这是一个编译器错误。在我的情况下，解决方法是添加`-fno-tree-vectorize`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T08:57:45.797

当我在 MinGW32 中使用 gcc-4.9.1 和一个使用 gcc-4.4.7 作为编译器的库编译我的代码时，我遇到了同样的错误。而且我也用ccache来加速，ccache也是个问题。删除 ~/.ccache/ 中的缓存并重新编译，然后我解决了这个问题。

# java - Java http 服务器和 web 文件夹

> ID：14181353
> 
> 赞同：0
> 
> 时间：2013-01-06T10:45:53.290
> 
> 标签：java, php, web, directory, httpserver

有谁知道如何在 Java 中创建 HTTP 服务器，但是为 web 设置默认文件夹而不是从中加载文件？我想使用`com.sun.net.httpserver`类。

例如，我的 java 文件旁边有一个名为*abc的文件夹。*java 文件在端口 8080 下运行 HTTP 服务器。如果我打开地址`http://123.123.123.123:8080/`，我想查看文件夹*abc*中的文件列表。在文件夹 abc 中有一些文件，例如。*图像.jpg* . 所以我想在我的浏览器地址中打开图像文件，比如`http://123.123.123.123:8080/image.jpg`. 这样我就可以打开文件夹*abc*中的所有其他文件（还有子文件夹、子文件夹中的文件等）。

1.  是否可以创建此 HTTP 服务器？
2.  是否有可能在文件夹中运行 PHP 文件？

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:50:12.493

为什么不使用嵌入式 Jetty？我很确定用它你可以完成你正在寻找的东西。如果要在 Jetty 中执行 PHP，请参阅[http://docs.codehaus.org/display/JETTY/Jetty+and+PHP](http://docs.codehaus.org/display/JETTY/Jetty+and+PHP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:17:59.270

创建服务器对象后，您需要为希望用户用于获取文档的路径注册一些处理程序。

```
HttpServer server = HttpServer.create(new InetSocketAddress("localhost",8080));
HttpHandler myDocsHandler = new MyDocsHandler();
server.createContext("/abc", myDocsHandler); 
```

没有内置的默认处理程序，因此您需要编写实现**HttpHandler接口的****MyDocsHandler**类来处理在**http://localhost:8080/abc**进入服务器的任何请求。

 ****该处理程序需要一个单**句柄**方法，该方法接受一个**HttpExchange**参数，该参数提供对请求数据和响应流的访问权限。在这一点上，您有责任做需要做的事情。因此，如果您希望实际文件位于**/usr/local/abc**的硬盘驱动器上，您的处理程序将需要使用标准文件 io 打开请求的文件并将其流式传输回用户。****

# php - 删除具有两个重复值的值，无论它们位于哪一列

> ID：14181356
> 
> 赞同：0
> 
> 时间：2013-01-06T10:46:04.993
> 
> 标签：php, mysql, duplicates

我有一个 mysql 表，它看起来像这样：

```
id_one     id_two
1          2
2          1
3          2
2          3
4          5
5          4 
```

我想删除具有两个重复值的行，而不管它们在哪些列中，因此示例如下所示：

```
id_one     id_two
1          2
3          2
5          4 
```

总共有超过 1200 万行。关于我应该如何做到这一点的任何想法？首选 PHP 或 mysql 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:32:53.973

```
DELETE a
FROM table1 a
LEFT JOIN
    (
      select id_one, id_two
      from   Table1
      GROUP BY least(id_one, id_two), greatest(id_one, id_two)
    ) b ON a.id_one = b.id_one AND a.id_two = b.id_two
WHERE b.id_two IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/b70cb/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:19:03.287

我建议采用两步法：

1.  使 id_one 总是较小的值，即，如果 id_one 大于 id_two 则交换它们的值 - 考虑这样的事情（取自[此处](https://stackoverflow.com/a/559291/927626)）：

    ```
    UPDATE tablename
    SET id_one = (@temp:=id_one), id_one = id_two, id_two = @temp
    WHERE id_one > id_two 
    ```

2.  [按照此处](https://stackoverflow.com/a/6471575/927626)所述删除重复项：

    ```
    DELETE tablename FROM tablename INNER JOIN
        (SELECT min(primary_key) AS min_id, id_one, id_two FROM tablename
         GROUP BY id_one, id_two
         HAVING count(1) > 1) AS d
    ON (d.id_one = tablename.id_one
        AND d.id_two = tablename.id_two
        AND d.min_id <> tablename.primary_key) 
    ```

    （我假设您将在包含 1200 万个条目的表上拥有一个主键。）

未测试，所以请备份您的数据！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:27:21.427

```
DELETE FROM ztable zt
WHERE zt.id_one > zt.id_two
  AND EXISTS (
    SELECT * 
    FROM ztable tx
    WHERE tx.id_one = zt.id_two
      AND tx.id_two = zt.id_one
    )
    ; 
```

在 mysql 中不起作用，因为在 mysql 中您无法引用正在更新或删除的表。由于您无论如何都想制作备份副本，因此您可以在 EXISTS 子查询中使用它：

```
CREATE table safetable AS (SELECT * from ztable);

DELETE FROM ztable zt 
WHERE zt.id_one > zt.id_two 
AND EXISTS (
   SELECT * 
   FROM safetable tx
   WHERE tx.id_one = zt.id_two 
     AND tx.id_two = zt.id_one
   ); 
```

# python - 使用 apache 在子目录中运行烧瓶网站

> ID：14181364
> 
> 赞同：5
> 
> 时间：2013-01-06T10:47:12.593
> 
> 标签：python, apache, flask

我在我的个人服务器上使用 apache，我正在尝试运行一个使用 on 制作的“主”网站和另一个使用`Silex`on制作的网站`www.mydomain.com/``Flask``www.mydomain.com/something`

要运行该`Flask`网站，我正在使用 mod_wsgi，如其官方网站 (http://flask.pocoo.org/docs/deploying/mod_wsgi/) 中所述。

它工作得很好，我可以在 访问我的网站`www.mydomain.com/something`，但是当我返回时`www.mydomain.com/`收到`Flask`404 错误消息。

我已经尝试检查`apache`有关虚拟主机的文档，但我无法理解，这是我当前的`'sites-enabled/defaults'`配置文件：

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        WSGIDaemonProcess bc user=bc group=bc threads=5
        WSGIScriptAlias / /var/www/bc/bc.wsgi
        <Directory /var/www/bc>
                   WSGIProcessGroup bc
                   WSGIApplicationGroup %{GLOBAL}
                   Order deny,allow
                   Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

我的`/var/www`目录如下所示：

```
./index.php

./bc/

./bc/index.py 
```

我怎样才能让 python 网站只在 www.mydomain.com/something 中工作，并让 PHP 在 www.mydomain.com/ 上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:20:30.823

第一个参数`WSGIScriptAlias`是[url path](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIScriptAlias)，通过指定`WSGIScriptAlias / <foo>`您告诉 apache 将所有请求发送到 WSGI 应用程序。尝试`WSGIScriptAlias /something <foo>`

# javascript - 获取 iframe 的原始内容

> ID：14181365
> 
> 赞同：0
> 
> 时间：2013-01-06T10:47:14.683
> 
> 标签：javascript, jquery, html, xml, iframe

我想使用 Jquery 或 javascript 来获取 iframe 的原始内容（意味着每个字符）。这听起来很简单，但我仍在努力寻找正确的方法。

不过，目前它只是 iframe 中的 XML 内容。这里的代码：

```
$(function() {

    var xmlContent = $("#CFrame").contents().find("*").text();

    // The magic
    $('#SResult').xslt({xml: xmlContent, xslUrl: 'stylesheet/designSS.xsl'});
}); 
```

html页面

```
<form id="searchForm" method="GET" target="ContentFrame" action="http://125.235.8.210:380/search" onSubmit="processContent()">
        .....
    </form>
</div>
<div id="SResult">
</div>
<iframe id="CFrame" name="ContentFrame" frameborder="1" height="2000px" width="1000px" scrolling="no" src="stylesheet/test.xml"></iframe>
</body> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:33:42.480

免责声明：我会回答您的问题，无论它是否真的是您问题的优雅解决方案。约瑟夫似乎认为这是一个问题。我会说他这样做可能是对的。

尝试使用 mimetype text/xml 获取框架是行不通的。浏览器将继续并将 XML '翻译'成 HTML。这就是为什么它听起来不那么简单。这种方式实际上是不可能的。

我为您提供了解决此问题的简单方法。

```
<html>
<head>
<script>
function getXmlContents() {
    /*
    Note: Because of security reasons, the contents of a document can be accessed from another document only if the two documents are located in the same domain.
    http://www.w3schools.com/jsref/prop_frame_contentdocument.asp

    */
    var iframeDocument = document.getElementById('greetingFrame').contentDocument;
    if (iframeDocument == null) 
        return undefined;
    var xmlContainer = iframeDocument.getElementById('xmlContainer');
    if (xmlContainer == null)
        return undefined;
    return xmlContainer.innerText == null ? xmlContainer.textContent : xmlContainer.innerText;
};
</script>
</head>
<body>
<iframe id="greetingFrame" src="helloworld.html" onload="alert(getXmlContents())">
</iframe>
</body>
</html> 
```

XML 的内容包含在 HTML (helloworld.html) 中：

```
<html>
<body>
<script id="xmlContainer" type="text/xml">
  <?xml version="1.0" encoding="UTF-8"?>
  <title>
    Hello world
  </title>
</script>
</body>
</html> 
```

我已经在 Chrome、Firefox 和 IE 中成功地测试了这个。

当然，您必须将 XML 文档包装在 HTML 脚本标记中，如上所示。XML 也可以包装在不同的标记中，例如，如果您希望它呈现，但您必须使用 html 编码对 XML 进行编码。这需要在服务器端完成。一个非常简单的（php/ruby/python/etc）脚本就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:12:40.133

如果您的 XML 位于您的域中，那么您最好使用 AJAX，尤其是使用[jQuery 库](http://api.jquery.com/jQuery.ajax/)，它会为您解析并准备好立即进行操作。

如果它不在您的域中，那么[您将无法通过 AJAX 访问它，](http://en.wikipedia.org/wiki/Same_origin_policy)除非远程[服务器和您的客户端浏览器都支持 CORS。](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

不过，您有以下选择：

*   如果远程服务器的 API 支持 JSONP，请使用它而不是 XML。然后，您可以使用 jQuery 检索 JSONP 数据或滚动您自己的脚本加载器。
*   或者使用您的服务器为您代理 XML。服务器不限于同源策略。在您的服务器上创建一个 API，将您的表单数据中继到远程服务器并检索远程页面 - 就像您的服务器是浏览器一样。然后将结果转发给您。

# grails - 圣杯。ehcache 在启动期间抛出`Cache foo already exists`

> ID：14181369
> 
> 赞同：0
> 
> 时间：2013-01-06T10:47:50.403
> 
> 标签：grails, apache-camel, ehcache, terracotta

有这样的`ehcache`配置：

```
<ehcache>                                                                                                                                                                                                                                      

  <terracottaConfig url="192.168.1.4:9510"/>                                                                                                                                                                                                           

  <defaultCache                                                                                                                                                                                                                                
      maxElementsInMemory="50"                                                                                                                                                                                                                 
      eternal="false"                                                                                                                                                                                                                          
      timeToIdleSeconds="20"                                                                                                                                                                                                                   
      timeToLiveSeconds="20"                                                                                                                                                                                                                   
      overflowToDisk="false"                                                                                                                                                                                                                   
      diskPersistent="false"                                                                                                                                                                                                                   
      memoryStoreEvictionPolicy="LRU"                                                                                                                                                                                                          
      />                                                                                                                                                                                                                                       

  <cache name="foo"                                                                                                                                                                                                              
         maxElementsInMemory="50000"                                                                                                                                                                                                           
         eternal="true">                                                                                                                                                                                                                       
    <terracotta />                                                                                                                                                                                                                             
  </cache>                                                                                                                                                                                                                                     

</ehcache> 
```

它不起作用，应用程序只是不连接到`terracotta`服务器，但是在启动期间它会抛出这样的异常：

```
 net.sf.ehcache.ObjectExistsException: Cache foo already exists. 
```

当我启用`ehcache`调试日志时，我看不到我`ehcache.xml`的已加载到某个地方（尽管加载了另一个`ehcache.xml`位于某个 jar 文件内的类路径上）。可能是什么问题？

我的`grails`版本是`2.1.1`，`ehcache.xml`位于`grails-app/conf`目录上。

**更新 1** 更多解释。缓存命名在代码`foo`中`ehcache.xml`和代码中用作参考（实际上在 Apache Camel 路由中作为 to('cache://foo')。当我`foo`在代码中重命名为时`bar`（例如，路由现在看起来像 to('cache://bar' ) 它抛出异常`Cache bar already exists`。因此，异常不是来自`ehcache.xml`配置文件，而是来自按名称引用该缓存的代码。任何建议都将受到高度赞赏。

**更新 2** 似乎引发了异常，因为骆驼路线中有 2 个地方`cache://foo`被引用。当达到第二个引用时，它会抛出该异常。所以主要问题是，为什么`ehcache.xml`应用程序在启动时看不到？它应该预热并`cache://foo`为将来的使用做准备。

**UPDATE 3** It apparently worked before on `grails 1.3.7`. And now it does not work on `grails 2.1.1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:53:18.107

When I run grails with -noreloading option it works well. Must be some classpath issue.

# asp.net - 关于 Response.Redirect、FormsAuthentication 和 MVC

> ID：14181377
> 
> 赞同：0
> 
> 时间：2013-01-06T10:49:30.087
> 
> 标签：asp.net, asp.net-mvc, forms-authentication, response.redirect

我想了解`FormsAuthentication.RedirectFromLoginPage`调用`Response.Redirect(FormsAuthentication.GetRedirectUrl())`和手动重定向时程序行为的区别。

请参阅下面的评论。

我有一个`LoginController/Index`（两个动作，一个 for`HttpGet`和一个 for `HttpPost`）。这个控制器的视图代表应用程序的登录页面。

我还有一个主页或登录页面，即用户成功登录后必须转到的页面。这在我的应用程序中由`HomeController's` `Index`操作和`~Views/Home/Index.cshtml`视图表示。

我提出了三种情况。我了解场景 1，并且我希望它能够按照它的方式工作，但我注意到场景 2 和 3 的不同之处。

**方案 1**

```
namespace Controllers
{
    [AllowAnonymous]
    public class LoginController : Controller
    {
        [HttpPost]
        public ActionResult Index(Login loginViewModel)
        {
            if (ModelState.IsValid)
            {
                var user = ValidateUser(loginViewModel);

                if (user != null)
                {
                    // Other stuff: set cookies, session state, etc.

                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    ModelState.AddModelError("", "Invalid password. Please try again.");
                }
            }

            // If the user was a valid user, the flow-of-control won't reach here
            // as expected and the user will be taken to the view that is served
            // by the HomeController::Index() action. If it is by convention, it will 
            // be the ~Views/Home/Index.cshtml view. This is fine.
            return View();
        }
    }
} 
```

**方案 2**

```
namespace Controllers
{
    [AllowAnonymous]
    public class LoginController : Controller
    {
        [HttpPost]
        public ActionResult Index(Login loginViewModel)
        {
            if (ModelState.IsValid)
            {
                var user = ValidateUser(loginViewModel);

                if (user != null)
                {
                    // Other stuff: set cookies, session state, etc.

                    Response.Redirect(FormsAuthentication.GetRedirectUrl(loginViewModel.UserName, 
                        loginViewModel.RememberMe));
                }
                else
                {
                    ModelState.AddModelError("", "Invalid password. Please try again.");
                }
            }

            // If the user was a valid user, the flow-of-control still reaches here
            // as expected. And as expected, it renders the same View, i.e. the View
            // associated with the controller we are in, which is ~Views/Login/Index, 
            // which represents the login page. This is wrong. I shouldn't redirect here.
            // I understand this. My question here is two fold:
            // 1) I am simply trying to understand the difference in behaviors of the three 
            //    scenarios described in this question.
            // 2) Given this, the right way would be to not use Response.Redirect here but instead
            //    use RedirectToAction. However, if I wanted to use Response.Redirect, what should
            //    I do?
            return View();
        }
    }
} 
```

**方案 3**

```
namespace Controllers
{
    [AllowAnonymous]
    public class LoginController : Controller
    {
        [HttpPost]
        public ActionResult Index(Login loginViewModel)
        {
            if (ModelState.IsValid)
            {
                var user = ValidateUser(loginViewModel);

                if (user != null)
                {
                    // Other stuff: set cookies, session state, etc.

                    FormsAuthentication.RedirectFromLoginPage(loginViewModel.UserName, 
                        loginViewModel.RememberMe);
                }
                else
                {
                    ModelState.AddModelError("", "Invalid password. Please try again.");
                }
            }

            // If the user was a valid user, the flow-of-control still reaches here
            // as expected. However, magically, somehow, even though the statement below
            // suggests that the user must be taken to the View of the same controller and
            // action that we are currently in, i.e. the View of the LoginController::Index()
            // action, i.e. the ~Views/Login/Index.cshtml, it magically takes me to the 
            // ~Views/Home/Index.cshtml instead, which is what is specified as the LoginPage
            // attribute of the <authentication>/<forms> element in the web.config.
            // I want to know how this happens.
            return View();
        }
    }
} 
```

**更新**

我现在无计可施。现在，即使使用的**场景 1**也在类上`RedirectToAction`调用`Index()`动作。`LoginController`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:03:51.133

实际区别在于 FormsAuthentication.RedirectFromLoginPage() 设置 cookie 然后进行重定向，但 FormsAuthentication.GetRedirectUrl() 仅返回重定向 url。

有趣的是 FormsAuthentication.GetRedirectUrl() 的实现是这样的：

```
public static String GetRedirectUrl(String userName, bool createPersistentCookie)
{ 
    if (userName == null) 
        return null;
    return GetReturnUrl(true); 
} 
```

所以实际上 userName 和 createPersistentCookie 参数被完全忽略了。在调用 GetRedirectUrl 之前，您必须手动调用 FormsAuthentication.SetAuthCookie(userName, true/false)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:17:31.233

同意瓦西里的观点。 `RedirectFromLoginPage`发出身份验证票并使用该`SetAuthCookie`方法将其放置在默认 cookie 中。
您可以[在此处](http://aleris.wordpress.com/2009/02/28/the-infamous-redirectfromloginpage-method/)阅读有关此行为的信息。

如果您想更好地控制 cookie 创建，您应该（加密、过期、扩展主体）您应该自己创建 cookie。[我在这里](https://stackoverflow.com/questions/4939533/cookie-confusion-with-formsauthentication-setauthcookie-method/4940079#4940079)和[这里](https://stackoverflow.com/questions/5030227/asp-net-mvc-let-user-switch-between-roles/5041584#5041584)
解释了整个过程。

# html - 如何从 selenium webdriver 获取 GWT 文本框值？

> ID：14181390
> 
> 赞同：0
> 
> 时间：2013-01-06T10:51:22.197
> 
> 标签：html, gwt, selenium

我正在尝试使用 selenium 测试我的 GWT 应用程序，GWT Textbox 生成的 html 如下所示：

```
<input type="text" class="gwt-TextBox" > 
```

那里没有价值，但从 UI 我可以看到文本，有没有办法从硒中获取价值？

更新：我可以`input`从 selenium 中找到它，但无法获取它的值，例如上面的值`input`是“blahblah ...”，我可以从页面 UI 中看到，但无法从上面的 html 中获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:07:58.847

@Bhumika 是正确的，`id`对于您想要操作的每个元素都有一个独特的属性是很好的编程习惯。但是，如果您没有它并且无法添加它，那么您仍然可以很好地处理这种特殊情况：`placeholder`属性。要定位元素，请使用 XPath `//input[@placeholder='Input note title...']`。要获取字段的值，请获取其`value`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T17:03:36.517

就像@BMT 说的那样，你应该使用getAttribute 来获取值，就像这样

GWT 代码

```
TextBox textField = new TextBox(); 
textField.ensureDebugId("textFieldId"); 
```

硒代码

```
driver.findElement(By.id("textFieldId")).getAttribute("value"); 
```

您可以使用浏览器的 Inspect Element Tool (F12) 查看一个元素的所有属性（可见或不可见），然后获取所需的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:31:48.097

每个小部件都应该有一个用于硒测试的 id。这里 selenium 不识别元素，您无法获取 UI 上的值。所以你必须为输入小部件设置 id。IE

```
TextBox textField= new TextBox();    
textField.getElement().setId("name"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T16:44:10.937

如果您希望生成的 DOM 看起来像

```
<input type="text" class="gwt-TextBox" value="myValue"> 
```

你必须使用

```
textBox.getElement().setAttribute("value", "myValue"); 
```

代替

```
textBox.setText("myValue") 
```

那是因为`setText`只会更新`value` *属性*（即`theDomElement.value = "myValue"`），而**不会**更新`value` *属性*（即`<input value="myValue"/>`）。

更新属性时，浏览器不会更新关联的属性。

# c++ - Gnome shell 和 Unity 不在系统托盘图标 (Qt) 中显示提示

> ID：14181393
> 
> 赞同：2
> 
> 时间：2013-01-06T10:52:01.600
> 
> 标签：c++, linux, qt, system-tray

当鼠标悬停在托盘图标上时，不会显示任何工具提示。

```
 trayIcon->setToolTip(str); 
```

不起作用。我为 Gnome 找到了另一种方法：

```
 curpos = QCursor::pos();
    QRect rect;
    rect = trayIcon->geometry();
    if(rect.contains(curpos))
    {
         QToolTip::showText(rect.center(),"hello",this);
    } 
```

但是在 Unity shell 中

```
rect = trayIcon->geometry(); 
```

总是返回 (0,0,0×0)。所以任何人都可以建议任何替代方法，我可以在 Unity Shell 中使用。

# java - 如何禁用视图的所有子元素以捕获鼠标触摸事件

> ID：14181394
> 
> 赞同：0
> 
> 时间：2013-01-06T10:52:23.003
> 
> 标签：java, android, android-layout

我正在尝试在 Android 中使用水平滑块菜单（如 Facebook）。

我只希望我的容器视图能够捕获鼠标触摸事件。

我已经尝试`setEnable(false)`了容器视图的所有子元素。但这会导致视图无法捕获触摸事件。

```
public void ChangeMenuVisibility() {
        int menuWidth = menu.getMeasuredWidth();
        // Ensure menu is visible
        menu.setVisibility(View.VISIBLE);
        int left = !menuOut ? 0 : menuWidth;
        container.smoothScrollTo(left, 0);
        menuOut = !menuOut;
        ViewUtils.enableDisableViewGroup(
                (ViewGroup) window.findViewById(R.id.main_content), !menuOut);
        window.findViewById(R.id.main_content).setEnabled(true);
    }
[ViewUtils.java]
    public static void enableDisableViewGroup(ViewGroup viewGroup,
            boolean enabled) {
        int childCount = viewGroup.getChildCount();
        for (int i = 0; i < childCount; i++) {
            View view = viewGroup.getChildAt(i);
            view.setEnabled(enabled);
            if (view instanceof ViewGroup) {
                enableDisableViewGroup((ViewGroup) view, enabled);
            }
        }
    } 
```

我应该遵循什么策略来实现这一点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:58:11.713

`View.onInterceptTouchEvent()`在 中覆盖`ViewGroup`，不要调用`super.onInterceptTouchEvent()`并返回 true。这会导致触摸事件不会向下传递到层次结构（传递给 的子级`ViewGroup`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:15:01.277

我已经根据@nmw 的回答解决了这个问题。

您应该扩展您的 View 组（我更喜欢使用`LinearLayout`）。

对于子元素忽略鼠标触摸事件。你必须实现`onInterceptTouchEvent`方法。

这是解决此问题的示例布局：

导入android.content.Context；导入android.util.AttributeSet；导入 android.view.MotionEvent；导入 android.widget.LinearLayout；

```
public class MyLinearLayout extends LinearLayout {

    public MyLinearLayout(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public MyLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    boolean mChildCanCaptureTouchEvent = true;

    /**
     * @return the mChildCanCaptureTouchEvent
     */
    public boolean ChildCanCaptureTouchEvent() {
        return mChildCanCaptureTouchEvent;
    }

    /**
     * @param mChildCanCaptureTouchEvent
     *            the mChildCanCaptureTouchEvent to set
     */
    public void ChildCanCaptureTouchEvent(boolean mChildCanCaptureTouchEvent) {
        this.mChildCanCaptureTouchEvent = mChildCanCaptureTouchEvent;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        if (ev.getAction() != MotionEvent.ACTION_MOVE) {
            return true;
        }

        if (!mChildCanCaptureTouchEvent)
            return true;

        return super.onInterceptTouchEvent(ev);
    }
} 
```

# iphone - 如何在 Xcode 中记录用户按下 UIbutton 序列

> ID：14181395
> 
> 赞同：0
> 
> 时间：2013-01-06T10:52:42.800
> 
> 标签：iphone, ios, xcode, ipad

我正在尝试在不同的 UIbutton 上制作一系列数字，例如 1-10 和十个按钮。

我想记录用户按下的序列，例如“198768”，然后当用户完成并按下完成按钮时，198768 的序列会显示一个警报视图。不必保存序列，只需显示在警报视图中即可。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:56:04.147

如何在 Xcode 中记录用户按下 UI 按钮的顺序：

第 1 步：在 Mainstoryboard 或 Xib 中创建 11 个按钮，其中包含您想要的任何数字，一个按钮用于获取结果以及一个文本字段。

第 2 步：在 ViewController.h 中编写以下代码：

```
//
//  ViewController.h
//  Test4
//
//  Created by Stackoverflow on 1/06/12.
//

@interface ViewController : UIViewController {
    IBOutlet UITextField *display;
    IBOutlet UIButton *cbutton;
    NSString *storage;

}
- (IBAction) button1;
- (IBAction) button2;
- (IBAction) button3;
- (IBAction) button4;
- (IBAction) button5;
- (IBAction) button6;
- (IBAction) button7;
- (IBAction) button9;
- (IBAction) button10;
- (IBAction) finalbutton; 

@end 
```

第 3 步：在 ViewController.m 中编写以下代码：

```
 - (IBAction) button1 {
            display.text=[NSString stringWithFormat:@"%@1",display.text];
        }
        - (IBAction) button2 {
            display.text=[NSString stringWithFormat:@"%@2",display.text];
        }
        - (IBAction) button3 {
            display.text=[NSString stringWithFormat:@"%@3",display.text];
        }
        - (IBAction) button4 {
            display.text=[NSString stringWithFormat:@"%@4",display.text];
        }
        - (IBAction) button5 {
            display.text=[NSString stringWithFormat:@"%@5",display.text];
        }
        - (IBAction) button6 {
            display.text=[NSString stringWithFormat:@"%@6",display.text];
        }
        - (IBAction) button7 {
                display.text=[NSString stringWithFormat:@"%@7",display.text];
            }
            - (IBAction) button8 {
                display.text=[NSString stringWithFormat:@"%@8",display.text];
            }
            - (IBAction) button9 {
                display.text=[NSString stringWithFormat:@"%@9",display.text];
            }
            - (IBAction) button0 {
                display.text=[NSString stringWithFormat:@"%@0",display.text];
            }
            - (IBAction) finalbutton {

NSString *string = self.display.text;

             UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Final Result"
                                                                  message:string 
                                                                 delegate:nil
                                                        cancelButtonTitle:@"OK"
                                                        otherButtonTitles:nil];
                [message show];

        }

        @end 
```

因此，代码所做的是当您单击任何按钮（1-10）时，它会将其显示在文本字段中。然后警报会拾取文本字段中的任何内容。告诉我他们是否有任何问题:)

# android - 我有一个关于处理程序中的 TextView 的 java.lang.NullPointerException

> ID：14181398
> 
> 赞同：1
> 
> 时间：2013-01-06T10:53:22.203
> 
> 标签：android, multithreading, nullpointerexception, textview, handler

所以当一个动作附加到另一个线程中时，我有这个代码来更改 texview 中的文本：

编辑：我更改了答案中所说的代码：

```
public class TargetActivity extends Activity {

  TextView Text = null;
  private Handler mHandler;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_target);

       Text = (TextView) findViewById(R.id.textView1);

       mHandler = new Handler();
   }

   public void receiveMyMessage() {
        mHandler.post(new Runnable() {
            @Override
            public void run() {

                if (Text != null) Text.setText("Done");
            }
        });
    }
} 
```

现在我有这些错误：

```
01-06 13:57:13.656: E/AndroidRuntime(25361): FATAL EXCEPTION: Thread-9
01-06 13:57:13.656: E/AndroidRuntime(25361): java.lang.NullPointerException
01-06 13:57:13.656: E/AndroidRuntime(25361):    at com.mat.archery.statistics.TargetActivity.receiveMyMessage(TargetActivity.java:30)
01-06 13:57:13.656: E/AndroidRuntime(25361):    at com.mat.archery.statistics.MySurfaceView.onDraw(MySurfaceView.java:130)
01-06 13:57:13.656: E/AndroidRuntime(25361):    at com.mat.archery.statistics.MySurfaceThread.run(MySurfaceThread.java:30) 
```

为了更多地理解我的代码，这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Test"
        android:textAppearance="?android:attr/textAppearanceLarge" />

<FrameLayout
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
<com.mat.archery.statistics.MySurfaceView
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"/>
</FrameLayout>
</LinearLayout> 
```

这是我调用线程的.java：

```
public class MySurfaceThread extends Thread {
 private SurfaceHolder myThreadSurfaceHolder;
 private MySurfaceView myThreadSurfaceView;
 private boolean myThreadRun = false;

 public MySurfaceThread(SurfaceHolder surfaceHolder, MySurfaceView surfaceView) {
  myThreadSurfaceHolder = surfaceHolder;
  myThreadSurfaceView = surfaceView;
 }

 public void setRunning(boolean b) {
  myThreadRun = b;
 }

 @Override
 public void run() {
  // TODO Auto-generated method stub
  while(myThreadRun){
   Canvas c = null;

   try{
    c = myThreadSurfaceHolder.lockCanvas(null);
    synchronized (myThreadSurfaceHolder){
     myThreadSurfaceView.onDraw(c);
    }
    /*sleep(100);
   } catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();*/
   }
   finally{
    // do this in a finally so that if an exception is thrown
    // during the above, we don't leave the Surface in an
    // inconsistent state
    if (c != null) {
     myThreadSurfaceHolder.unlockCanvasAndPost(c);
    }
   }
  }
 }
} 
```

这是我做Draw​​的.java，我在draw中调用receiveMyMessage（），因为它与draw密切相关。之前的计算不能按我的意愿工作，但这不是现在的问题：

```
public class MySurfaceView extends SurfaceView implements SurfaceHolder.Callback{

 private MySurfaceThread thread;
 private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
 private Paint paintJaune = new Paint(Paint.ANTI_ALIAS_FLAG);
 int cx, cy, offx, offy;
 private float initX, initY, radius;
 private double distx, disty, distance;
 private boolean drawing = true;
 private boolean first = true;

public TargetActivity mActivity = null;

 public MySurfaceView(Context context) {
  super(context);
  // TODO Auto-generated constructor stub
  init();
 }

 public MySurfaceView(Context context, AttributeSet attrs) {
  super(context, attrs);
  // TODO Auto-generated constructor stub
  init();
 }

 public MySurfaceView(Context context, AttributeSet attrs, int defStyle) {
  super(context, attrs, defStyle);
  // TODO Auto-generated constructor stub
  init();
 }

  private void init(){
        Log.d("Essai", "TargetActivity  5");

        mActivity = new TargetActivity();

        getHolder().addCallback(this);
        thread = new MySurfaceThread(getHolder(), this);

        setFocusable(true); // make sure we get key events

        paint.setColor(getResources().getColor(R.color.Fleche1Default));
        paint.setStyle(Style.FILL);

        paintJaune.setColor(getResources().getColor(R.color.Jaune));
        paintJaune.setStyle(Style.FILL);

   }

 @Override
 public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
  // TODO Auto-generated method stub
  drawing = true;
 }

 @Override
 public void surfaceCreated(SurfaceHolder holder) {
  // TODO Auto-generated method stub
  thread.setRunning(true);
  thread.start();

 }

 @Override
 public void surfaceDestroyed(SurfaceHolder holder) {
  // TODO Auto-generated method stub
  boolean retry = true;
  thread.setRunning(false);
  while (retry) {
   try {
    thread.join();
    retry = false;
   }
   catch (InterruptedException e) {
   }
  }
 }

 @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        //super.onDraw(canvas);
     int width = this.getWidth(); 
     int height = this.getHeight(); 

        if(drawing){
            canvas.drawColor(Color.BLACK);
            canvas.drawCircle(width/2, height/2, 80, paintJaune);
            canvas.drawCircle(initX, initY, radius, paint);

            distx = (width/2)-initX;
            distx *= distx;

            disty = (height/2)-initY;
            disty *= disty;

            distance = distx + disty;
            distance = Math.sqrt(distance);

            if((distance + radius/2) < 40)
            {   
                mActivity.receiveMyMessage();
            }

        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub
        //return super.onTouchEvent(event);

        int action = event.getAction();
        if (action==MotionEvent.ACTION_MOVE){
            initX = event.getX();
            initY = event.getY();
            radius = 30;
            drawing = true;
            first = false;
        }
        else if (action==MotionEvent.ACTION_DOWN){
            initX = event.getX();
            initY = event.getY();
            radius = 30;
            drawing = true;
            first = false;
        }
        else if (action==MotionEvent.ACTION_UP){
            try {
                Thread.sleep(50);
            } catch (InterruptedException e) {}
            drawing = false;
            first = false;
        }

        return true;

    }

       /*public void test() {

           mActivity.handler.sendEmptyMessage(0);
       }*/

} 
```

@PratikSharma 编辑：更改后有这个 LogCat ：

```
01-08 14:55:34.859: D/AndroidRuntime(22436): Shutting down VM
01-08 14:55:34.859: W/dalvikvm(22436): threadid=1: thread exiting with uncaught exception (group=0x4001f888)
01-08 14:55:34.882: E/AndroidRuntime(22436): FATAL EXCEPTION: main
01-08 14:55:34.882: E/AndroidRuntime(22436): java.lang.NullPointerException
01-08 14:55:34.882: E/AndroidRuntime(22436):    at android.app.Activity.findViewById(Activity.java:1637)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at com.mat.archery.statistics.TargetActivity$1.run(TargetActivity.java:78)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at android.os.Handler.handleCallback(Handler.java:587)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at android.os.Looper.loop(Looper.java:123)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at android.app.ActivityThread.main(ActivityThread.java:4668)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at java.lang.reflect.Method.invokeNative(Native Method)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at java.lang.reflect.Method.invoke(Method.java:521)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
01-08 14:55:34.882: E/AndroidRuntime(22436):    at dalvik.system.NativeStart.main(Native Method) 
```

第 78 行是：`Text = (TextView) findViewById(R.id.textView1);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:58:34.420

试试这个：

```
public class TargetActivity extends Activity {

  TextView Text = null;
  private Handler mHandler = null;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_target);

       if(Text == null)
           Text = (TextView) findViewById(R.id.textView1); 
       if(mHandler == null)   
           mHandler = new Handler();
   } 
```

**编辑：**

```
public void receiveMyMessage() {
        if(mHandler == null)
           mHandler = new Handler();
        if(Text == null)
           Text = (TextView) findViewById(R.id.textView1);

        mHandler.post(new Runnable() {
            @Override
            public void run() {                    
                Text.setText("Done");
            }
        });
    }
} 
```

**新编辑：**

```
public void receiveMyMessage() {
        if(mHandler == null)
           mHandler = new Handler();
        new Thread() {
            public void run() {
                mHandler.post(mUpdateResults);
            }
    }.start();

}

final Runnable mUpdateResults = new Runnable() {
    public void run() {
        if(Text == null)
            Text = (TextView) findViewById(R.id.textView1);                    
        Text.setText("Done");
    }
} 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:12:41.257

添加文本不为空检查。我认为有时您在 onCreate 完成和 Text 初始化之前调用 receiveMyMessage 。

```
@Override
public void run() {
    if (Text != null) Text.setText("Done");
} 
```

# git - git 文件夹是自包含的吗？

> ID：14181402
> 
> 赞同：5
> 
> 时间：2013-01-06T10:53:38.653
> 
> 标签：git, repository

我刚开始使用Git，我有一个问题：

当我创建一个新存储库时，我会得到一个文件夹，我应该在其中放置所有文件（该文件夹包含`.git`文件夹）。这个文件夹是完全独立的吗？

假设我创建了一个新的存储库并在该项目上工作了一段时间（进行提交）。如果我将那个文件夹移动到另一个位置（比如另一个磁盘）它仍然可以工作吗？如果我把它移到另一台电脑上怎么办？我可以在外部设备（外部 HDD 或 USB 记忆棒）上拥有存储库/文件夹并在多台计算机上使用它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T10:56:32.260

是的。那是本地存储库，它包含有关存储库的所有信息。

唯一不包括在内的是全局配置。

有关更多详细信息，请参阅[此免费 Git 文档](http://git-scm.com/book/en/Git-Internals-Plumbing-and-Porcelain)。从那里引用：

> Git 创建 .git 目录，该目录几乎是 Git 存储和操作的所有内容所在的位置。如果您想备份或克隆您的存储库，将这个单一目录复制到其他地方几乎可以满足您的一切需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T11:00:06.973

文件夹本身是独立的。

实际上，如果您已经提交了所有内容并且没有本地更改，那么`.git`文件夹本身就足够了。该`.git`文件夹是您的存储库。该文件夹的其余内容是签出的工作目录。您不能将这些（特别是如果有很多文件）复制到其他机器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:55:53.303

是的，它包含了 git 需要的一切。

它确实适用于 USB 棒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T10:56:15.040

是的，该文件夹是自包含的，但是如果您想从另一台机器上对其进行 git 操作，则需要安装 git

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T12:58:27.653

几乎。

*   [Serge](https://stackoverflow.com/users/620249/sergiu-dumitriu)已经[提到](https://stackoverflow.com/a/14181425/6309)了**global config**。
*   **出于明显的安全原因， hooks**不是 repo 的一部分（它们不被 a `push`or`clone`或 a复制`bundle`），即使它们存储在`.git`文件夹中。
    在您的情况下（`.git`目录的重复），在本地机器上工作的钩子可能无法在另一台机器上工作（例如，因为它是一个`perl`脚本，并且`perl`没有安装在另一台机器上）。
*   **[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)**引用外部存储库（一旦您将 git 存储库复制到另一台机器上，可能无法访问）
*   **[git 属性](http://git-scm.com/book/en/Customizing-Git-Git-Attributes)**可以引用仅存储在一台机器上的脚本，而不能在另一台机器上访问。
*   **git 远程地址**（存储在本地配置中）可以引用在您将存储库复制到其他位置后不再可访问的存储库。

Git 会将移动的 repo 识别为 git repo，因此您可以说它在这方面是自包含的。
我更喜欢将我的 repo 移动为一个**[`git bundle`](https://stackoverflow.com/a/9080353/6309)**（只移动*一个*文件）。

但是，如果您依赖任何其他（脚本/工具/其他存储库）来完成您的存储库并且实际上允许您使用它，那么您可能还需要考虑移动其他*外部*元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-21T06:43:20.447

Git 文件夹可能包含在内，但并不总是如此。

例如，今天我努力尝试将恢复的 .git 文件夹和文件复制到新的 Virtual Box 系统，因为存储在 Virtual Box/Lubuntu 内部的外部 USB 驱动器上的 repo 的硬盘损坏在正确关闭之前意外断开（使用 chkdsk / 修复f /x) 。

据我所知，所有文件看起来都完好无损，并且 git log 看起来很正常，除了标题是红色的。但是所有推送到新创建的远程仓库的尝试都遇到了各种错误，例如各种提交 # 的“无法遍历父级”和“你确定你有权限吗？” 此外，当文件最初从我恢复的驱动器复制到新创建的 VM 时，还有一些关于“符号链接”的消息。我认为这可能是权限问题，但所有文件都是读/写的。也许 .git 有内部检查？最终结果我只是通过删除 .git 并初始化本地存储库（基本上是硬重置）成功地推送到远程......所有历史记录都丢失了（只是一个类项目，所以之前只是本地的，现在 Bitbucket 将防止我希望再次发生。
但我想。

# c - 读取输入 - 获取 scanf - 新手

> ID：14181403
> 
> 赞同：0
> 
> 时间：2013-01-06T10:53:39.853
> 
> 标签：c, eclipse, macos, scanf, gets

我目前正在为涉及客户订单的任务编写程序...到目前为止，所有代码都已正确编码，但现在在读取用户输入时我遇到了问题。屏幕上出现了 2 行，但没有给用户时间输入订单数量..这是因为我正在使用scanf..我尝试使用fflush（stdin）并获取char（）但没有成功..以下是给我带来问题的代码

```
puts("\nEnter Product Details\n");

puts("Product Name: ");

gets(newProduct.Name);

puts("ISBN: ");

gets(newProduct.ISBN);

puts("Description: ");

gets(newProduct.Description);

puts("Price: ");

scanf("%f",&newProduct.Price);

puts("Quantity in Stock: ");

scanf("%d",&newProduct.QuantityinStock);

printf("Supplier: ");

gets(newProduct.Supplier);

printf("Order Quantity: ");

scanf("%d",&newProduct.OrderQuantity); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:59:31.777

您可以尝试使用`getchar()`后`scanf()`

# c# - 如何使用 c# 从字节数组创建 WPF 媒体元素的源？

> ID：14181405
> 
> 赞同：2
> 
> 时间：2013-01-06T10:53:50.217
> 
> 标签：c#, wpf, byte, mediaelement, memorystream

我已将视频转换为字节数组并将其存储在 MsSql 数据库中。现在我从数据库中获取它并得到字节数组。我想将此字节数组设置为媒体元素的源，然后在 WPF 应用程序中显示此视频。

请提出一种可以将字节数组或内存流转换为媒体元素源的方法？

我将无权在用户机器上写入，因此将文件写入用户机器然后设置源对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:24:46.683

这不是直接可能的。只有`MediaElement`Silverlight 的支持该功能。有一些解决方法。签出此[链接](https://stackoverflow.com/questions/7117589/using-mediaelement-to-play-video-from-stream)。

# c# - Ashx 文件中的 HttpContext.Current.Session 为空

> ID：14181408
> 
> 赞同：43
> 
> 时间：2013-01-06T10:54:36.720
> 
> 标签：c#, asp.net, .net, session, generic-handler

我看到了一些问题（[此处](https://stackoverflow.com/questions/5868599/httpcontext-current-session-is-null)和[此处](https://stackoverflow.com/questions/4710411/httpcontext-current-session-null-item)），但他们没有回答我的问题。我正在尝试使用“ajax.ashx”文件调用 Ajax，并在函数中访问会话。出于某种原因，Session 对象本身的值为 null。

使用示例：

```
Session = HttpContext.Current.Session // This is null 
```

或者：

```
public virtual void ProcessRequest(HttpContext context)
{
    System.Web.SessionState.HttpSessionState Session = context.Session; 
    // This is null
} 
```

在 Web.config 中：

```
<sessionState timeout="1800"></sessionState> 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-01-06T11:16:10.837

您必须在您的处理程序`IRequiresSessionState`上添加它的声明为：

```
public class YourHandleName : IHttpHandler, IRequiresSessionState 
{
... 
```

默认情况下，处理程序不与会话连接以保持它们最小，通过添加`IRequiresSessionState`您将它们附加到会话中。

# visual-c++ - 如何平铺或变大

> ID：14181409
> 
> 赞同：-5
> 
> 时间：2013-01-06T10:54:43.660
> 
> 标签：visual-c++, opengl

我如何平铺这个？或者把它变大，让草的纹理出现在整个屏幕上，就像覆盖整个地板一样？

这里的代码和结果：

（图）[http://tinypic.com/r/dyvc7t/6](http://tinypic.com/r/dyvc7t/6)

```
glBegin(GL_QUADS);

glNormal3f(0.0f, 0.0f, 1.0f);

glTexCoord2f(0.0,0.0);
glVertex3f(-140.0, 0.0,100.0);

glTexCoord3f(1.0,0.0,0.0);
glVertex3f(140.0, 0.0,100.0);

glTexCoord2f(1.0,1.0);
glVertex3f(140.0, 140.0,100.0);

glTexCoord2f(0.0,1.0);
glVertex3f(-140.0, 140.0,100.0);

glEnd();
glDisable( GL_TEXTURE_2D ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:48:14.783

如果你想平铺它，只需使用'for (int x = 0; x < so on...)' 和'translate' 方法。确保每次翻译图块时都弹出矩阵，否则它将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:03:21.113

这是正方形的opengl代码：

```
glVertex3f(-1.0f, -1.0f, 0.0f); // The bottom left corner
glVertex3f(-1.0f, 1.0f, 0.0f); // The top left corner
glVertex3f(1.0f, 1.0f, 0.0f); // The top right corner
glVertex3f(1.0f, -1.0f, 0.0f); // The bottom right corner 
```

这是相同的代码，用于更大的正方形：

```
glVertex3f(-2.0f, -2.0f, 0.0f); // The bottom left corner
glVertex3f(-2.0f, 2.0f, 0.0f); // The top left corner
glVertex3f(2.0f, 2.0f, 0.0f); // The top right corner
glVertex3f(2.0f, -2.0f, 0.0f); // The bottom right corner 
```

所以如果你想让你的多边形更大，只需改变定义它的数字。

# html - 添加新子元素后子元素顶部值增加

> ID：14181417
> 
> 赞同：1
> 
> 时间：2013-01-06T10:55:42.430
> 
> 标签：html, css, positioning

这就是我为标题设计布局的方式

```
<div id="DivHeader">
<div id="DivTop">
</div>
<div id="DivBottom">
</div>
</div> 
```

最初我将 top 属性设置`DivBottom`为 35px。当时我没有`DivTop`。
所以现在，在添加它之后，顶部`DivBottom`已经从新的 child(DivTop) 计算为`DivTop's height`+ `DivBottom's top`。结果布局像[这样](http://jsfiddle.net/laraprabhu/3u3gz/)崩溃了。我需要在`DivTop`不影响的情况下放置`DivBottom's Top`，任何想法。？

[注意：我没有为我的 div 使用绝对定位，因为在这种情况下，margin:0 auto 将不起作用。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:21:34.653

您需要使用绝对定位：

```
#first
{
  position:absolute;
  left:50%;
  margin-left:-5px; /* half the width value */
  width:10px;
  height:10px;
  background-color:yellow;
} 
```

[http://jsfiddle.net/3u3gz/1/](http://jsfiddle.net/3u3gz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:18:11.453

您正在使用**相对定位**，这是预期的行为。请参阅[W3 上的相对定位](http://www.w3.org/TR/CSS2/visuren.html#relative-positioning)：

> 一旦一个盒子按照正常流程布局或浮动，它可能会相对于这个位置移动。这称为相对定位。

因此，如果您在相对定位的元素上方插入一些东西，它将首先根据“正常流程”定位，然后根据您的 CSS 重新定位。

`position`如果您想要指定的行为，则需要将 更改为另一个值。

# nuget - 从具有可移植类库的 NuGet 包中以 .NET 4 为目标的最佳策略

> ID：14181422
> 
> 赞同：3
> 
> 时间：2013-01-06T10:55:55.317
> 
> 标签：nuget, portable-class-library

我有一个库的 NuGet 包，目前仅针对 .NET 4 实现。但我已经移植了库代码以支持各种平台（WinRT、SL5、WP8），所以理想情况下我想将其打包为可移植类库（PCL ) 以简化维护。但是该库正在使用 LINQ to XML（XELements 等），需要针对 .NET 4.0.3 并在客户端计算机上安装 .NET 4.0.3。

所以我对如何定位普通的 .NET 4 感到两难。如果不是关于 NuGet 包并且我可以控制用户群，我可以简单地声明为安装 .NET 4.0.3 运行时的先决条件。但是，我不想以任何方式限制用户群，所以看起来我必须拥有两个版本的库：针对 .NET 4.5、SL5 和 WP8 的可移植版本，以及仅针对 .NET4 的不可移植版本。愚蠢的是，这两个库将具有完全相同的代码，因为 .NET 4 当然支持 LINQ to XML，只是 PCL 在面向 .NET 4 时没有这种支持。

我的第一个问题是这似乎是一个正确的策略吗？另一种方法是从 PCL 中删除所有与 XElement 相关的代码，并将其放在不可移植的部分中，但这似乎不正确，因为所有库的代码都完全相同。

第二个问题是从 PCL 定位 .NET 4.0.3 是否有意义：如果我有针对 .NET 4 的单独版本，安装了 .NET 4.0.3 运行时的用户是否会从获得 PCL 而不是普通的.NET 4 版本？我知道 .NET 4.0.3 有其他改进，但不会影响我的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:55:20.730

是的，我认为最好的办法是创建两个版本的库，一个针对 .NET 4，另一个针对您支持的其他平台的可移植库。使用源文件链接，因此您不必拥有两个不同的源代码副本，只需两个不同的 Visual Studio 项目。

不过，您只需要一个 NuGet 包。将 .NET 4 版本放在 lib/net40 中，将可移植版本放在 lib/portable-net403+win8+wp8+sl5（或您决定支持的任何平台组合）中。然后 NuGet 将根据项目的目标安装正确的。便携版需要 NuGet 2.1 或更高版本。

关于 .NET 4.0.3 的问题，它是关于为您的库的使用者提供灵活性。使用您的库的人正在使用它来创建应用程序。支持 .NET 4 对他们来说可能不如对您重要。通过在您的库的可移植版本中支持 .NET 4.0.3，这意味着如果他们选择在他们的应用程序中要求 .NET 4.0.3，那么他们将能够从他们自己的可移植库中使用您的库并更轻松地[共享他们跨平台的应用程序代码](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)。

# ios - 禁用和隐藏 UIButton / UIBarButtonItem 的理想方法是什么？

> ID：14181428
> 
> 赞同：0
> 
> 时间：2013-01-06T10:57:07.197
> 
> 标签：ios, interface-builder, storyboard

在我的应用程序中，如果它是第一次运行或用户清除了他们的登录凭据，则会以模态方式显示一个视图，他们可以在其中登录。如果他们希望切换帐户，他们还可以选择显示登录视图。但是，如果他们错误地点击了“切换帐户”按钮，我也希望他们能够使用“取消”按钮关闭此视图，但如果应用程序第一次运行则不会。

我知道我可以通过`UIBarButtonItem`编写代码并设置其`hidden`和`enabled`属性来做到这一点，但想知道是否可以使用 Storyboards 和 Outlets。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:18:26.170

你当然可以这样做。您只需将隐藏或启用的消息发送到插座。因此，如果您有一个名为 myButton 的 IBOutlet 连接到 IB 中的按钮，您可以编写：

```
myButton.hidden = YES; 
```

# wordpress - 当用户在 Facebook 上分享时，在 woocommerce 中结帐前的总价折扣

> ID：14181430
> 
> 赞同：0
> 
> 时间：2013-01-06T10:57:58.647
> 
> 标签：wordpress, woocommerce

嗨，我正在为我的网站使用 wordpress + woocommerce。我想在结帐前对购物车中的商品总价应用折扣，并在折扣后更新购物车总价。我希望当用户在他的墙上分享此购买时完成此操作。请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T16:19:32.083

只需查看此网站，您就可以找到所需的内容。 [http://shareyourcart.com/?v=july](http://shareyourcart.com/?v=july)

或者你可以直接在这里免费下载 [http://wordpress.org/plugins/shareyourcart/](http://wordpress.org/plugins/shareyourcart/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:15:33.380

有一个漂亮的插件可以满足您的需求：病毒优惠券插件[http://wpin.me/best-ever-plugin-for-woocommerce-say-hello-to-viral-coupon/](http://wpin.me/best-ever-plugin-for-woocommerce-say-hello-to-viral-coupon/)

我为客户购买了它，它按预期工作。配置后，我只需要通过 CSS 自定义外观。

# c# - 使用 C# 更新 Redis 中的值

> ID：14181439
> 
> 赞同：1
> 
> 时间：2013-01-06T10:59:11.073
> 
> 标签：c#, redis

我运行 Redis 的 Windows 服务器版本，然后有一个小的客户端应用程序，但我不知道如何更新数据库中已有的数据类型中的值

我有这个领导者类，如果给定区存在，我想更新它，否则创建一个新条目

```
public class Leader
{
    public Employee Employee { get; set; }
    public District District { get; set; }
}

    public void SetLeader(District district, Employee employee)
    {
        using (var leaderSession = _redisClient.GetTypedClient<Leader>())
        {
            var leader = leaderSession.GetAll().SingleOrDefault(x => x.District.Id == district.Id);
            if (leader != null)
            {
                leader.Employee = employee;
            }
            else
            {
                leader = new Leader{District = district, Employee = employee};
            }
            leaderSession.Store(leader);
        }
    } 
```

但是当我这样做时，我只是在数据库中获得了一个额外的条目，因此 Store 不是正确使用的命令，但我应该使用哪个？

我能想出的唯一解决方案是删除旧的并存储一个新的，但这似乎有点无效？（在我的例子中并不重要，但仍然如此）

**编辑**：删除也不起作用，它仍然会创建一个新的并保留旧的。

```
 public void SetLeader(District district, Employee employee)
    {
        using (var leaderSession = _redisClient.GetTypedClient<Leader>())
        {
            var leader = leaderSession.GetAll().SingleOrDefault(x => x.District.Id == district.Id);
            if (leader != null)
            {
                leaderSession.Delete(leader);
            }

            leader = new Leader { District = district, Employee = employee };
            leaderSession.Store(leader);
        }
    } 
```

**编辑 2**向 Leader 添加一个 Id 字段显然是必要的，以便区分不同的行

所以把它改成这个工作

```
public class Leader
{
    public long Id { get; set; }
    public Employee Employee { get; set; }
    public District District { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:48:54.517

显然有必要为 Leader 添加一个 Id 字段以区分不同的行

所以把它改成这个工作

```
public class Leader
{
    public long Id { get; set; }
    public Employee Employee { get; set; }
    public District District { get; set; }
} 
```

# c# - 按值选择组合框项目C#

> ID：14181441
> 
> 赞同：3
> 
> 时间：2013-01-06T10:59:15.540
> 
> 标签：c#, winforms, combobox

我有一个组合框，绑定到`Datatable` 并具有以下属性：

```
cboCars.DisplayMember = "carLiscen";
cboCars.ValueMember = "carNo"; 
```

`DisplayMember`当我知道 时如何选择`ValueMember`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T11:06:46.803

如果你`ValueMember`有一套，你可以选择使用`SelectedValue`

```
cboCars.DisplayMember = "carLiscen";
cboCars.ValueMember = "carNo";

cboCars.SelectedValue = "valuemember value"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T22:57:05.293

您可以`cboCars.SelectedValue = "123";`为此使用属性。这是一个代码片段，它将在行动中显示它。

```
 public void Test()
    {
        ArrayList info = new ArrayList();
        info.Add(new CarInfo { CarLiscen = 123456, CarNo = 123});
        info.Add(new CarInfo { CarLiscen = 234567, CarNo = 234 });
        cboCars.DataSource = info;

        cboCars.DisplayMember = "CarLiscen";
        cboCars.ValueMember = "CarNo";

        cboCars.SelectedValueChanged +=
            delegate(object sender, EventArgs e)
            {
                if (cboCars.SelectedIndex != -1)
                {
                    this.Text = cboCars.SelectedValue.ToString();
                }
            };

        cboCars.SelectedValue = 234;
    } 
```

如果您想知道`CarInfo`. 这是它的代码（相当简单）：

```
public class CarInfo
{
    public int CarLiscen { get; set; }
    public int CarNo { get; set; }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-17T13:42:18.563

您可以搜索正确的项目并将其设置为该项目，非常简单：

```
cbTEST.SelectedIndex = cbTEST.FindStringExact("your search string here"); 
```

或根据 ListViewItem 选择一个项目：

```
cbTEST.SelectedIndex = cbTEST.FindStringExact(lvTEST.SelectedItems[0].SubItems[0].Text); 
```

就是这样。非常简单！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-12T07:12:45.170

嗨，伙计们，如果搜索文本或值，最好的方法是

```
int Selected;    
int count = ComboBox1.Items.Count;
    for (int i = 0; (i<= (count - 1)); i++) 
     {        
         ComboBox1.SelectedIndex = i;
        if ((string)(ComboBox1.SelectedValue) == "SearchValue") 
        {
            Selected = i;
        }

    }

    ComboBox1.SelectedIndex = Selected; 
```

# spring - Spring 中的两个实体管理器

> ID：14181444
> 
> 赞同：4
> 
> 时间：2013-01-06T10:59:40.250
> 
> 标签：spring, hibernate, entitymanager, transactionmanager

我在某个时候以编程方式完成了这项工作——即创建两个具有不同数据源的实体管理器，并为不同的服务提供它们。

但是现在我正在使用 Spring 构建一个 webApp。事情是我想让两个实体经理负责不同的数据库。所以在我的例子中，一半的 DAO 将使用**emNumber1**，而另一半将使用**emNumber2**。哦，完全不同的持久性单元，因为我只需要从**DB1**读取数据，然后处理它并将这些数据存储在**DB2**中完全不同的实体中。

我很清楚这个问题已经存在并且已经存在一段时间了，但是以不同的形式和形式存在，所以我提出这个问题只是因为我无法理解那些用谷歌搜索的论坛主题提出的解决方案，或者他们是不适用于我的情况。在同样的情况下，我无法理解解决方案或如何在我的情况下应用它，所以如果要通过链接这个自己的站点的解决方案来解决多余的问题，我真的很抱歉。

这是我认为适合配置单个事务管理器的方法

```
<tx:annotation-driven transaction-manager="transactionManager" />
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

<bean id="dataSource"
      class="org.springframework.jdbc.datasource.DriverManagerDataSource"
      p:driverClassName="com.mysql.jdbc.Driver"
      p:url="jdbc:mysql://localhost:3306/db"
      p:username="dbuser"
      p:password="dbuser"/>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="pu1"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true"/>
            <property name="generateDdl" value="true"/>
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect"/>
        </bean>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

然后在我的道内：

```
public class SimpleDaoImpl implements SimpleDao {
@PersistenceContext
private EntityManager entityManager;

    /* methods that use entity manager for transactions and data detcing */
} 
```

因此，如果两个事务管理器具有不同的数据源，如何指定将哪个实体管理器注入哪个 DAO 或者在 Spring 中这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T19:57:54.047

在这里，我使用两个不同的数据源进行休眠，并使用 @Qualifier 来指定会话工厂，如下所示：

```
@Autowired
@Qualifier(value="sessionFactoryOne")
private SessionFactory sessionFactoryOne;

@Autowired
@Qualifier(value="sessionFactoryTwo")
private SessionFactory sessionFactoryTwo; 
```

然后我从这些家伙那里得到了会议。

在 xml 配置中，我有两个数据源 sessionFactory 和 transactionManager，每个 DB 一个。工作正常 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-18T16:54:39.547

你可以做 @PersistenceContext(unitName="pu1")

# c++ - 如何在不使用“long”的情况下对 2 个大数进行求和和乘法？

> ID：14181448
> 
> 赞同：-1
> 
> 时间：2013-01-06T11:00:20.047
> 
> 标签：c++

如何在不使用“long”的情况下对 2 个大数进行求和和乘法？

它必须与数组一起使用吗？所以..想象一下我在做 18+18 的总和：

```
 18
+15
array1 (1,8)
array2 (1,5) 
```

我需要通过 colmn ..8+5=13 --> 3 和 1+1+1 进入它的列（第三个“1”来自溢出）。

..所以我需要对数组中的每个元素都这样做

```
#include <stdio.h>
#include <conio.h>
#include <vectors.h>

int main()
{

int array1 ???
int array2 ???

printf("first number");
scanf();

printf("second number");
scanf();

printf("To Sum Enter 'S', to Multiply Enter 'M'");
scanf();

If(M){ 
```

//下面的代码是错误的，因为我仍然必须使用“长”属性......

```
 while(i=1,i<LA2,i++){
while(j=1,j<LA1,j++){
    A1[i]*A2[j]*10^(i+j-2);

            }
            }
   }

If(S){

 while(i=1,i<LA2,i++){
while(j=1,j<LA1,j++){
    A1[i]*A2[j]*10 pow(i+j-2); 
```

//不能用 pow() 做到这一点，因为我不能使用“long”，这意味着我必须在数组中逐个元素地执行它并将结果呈现在第三个数组中

```
 }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:08:38.220

`struct`如果您不想使用 a ，可以使用两个整数创建a `long`。

像这样：

```
struct BigInteger{
  int lowerInt;
  int upperInt;
}; 
```

然后您可以根据各种算法对这些结构进行加、减、乘或除。例如，要相乘，您可以使用 Shift-And-Add 乘数算法。

但是这样做会带来严重的性能问题。使用完整的语言而不是限制自己。

PS：这是什么语言问题？C 还是 C++？

# android - android：检测声级

> ID：14181449
> 
> 赞同：35
> 
> 时间：2013-01-06T11:00:28.217
> 
> 标签：android, audio

使用`MediaRecorder`我从设备的麦克风捕获声音。从我得到的声音中，我只需要分析音量（声音响度），而无需将声音保存到文件中。

两个问题：

1.  如何在给定时刻获得声音的响度？
2.  如何在不将声音保存到文件的情况下进行分析？

谢谢你。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-06T11:38:23.353

1.  采用`mRecorder.getMaxAmplitude();`

2.  为了分析声音而不保存所有你需要的就是使用`mRecorder.setOutputFile("/dev/null");`

这是一个例子，我希望这会有所帮助

```
public class SoundMeter {

    private MediaRecorder mRecorder = null;

    public void start() {
            if (mRecorder == null) {
                    mRecorder = new MediaRecorder();
                    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                    mRecorder.setOutputFile("/dev/null"); 
                    mRecorder.prepare();
                    mRecorder.start();
            }
    }

    public void stop() {
            if (mRecorder != null) {
                    mRecorder.stop();       
                    mRecorder.release();
                    mRecorder = null;
            }
    }

    public double getAmplitude() {
            if (mRecorder != null)
                    return  mRecorder.getMaxAmplitude();
            else
                    return 0;

    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-03T22:10:06.260

如果要分析直接从麦克风获取的声音样本而不将数据保存在文件中，则需要使用 AudioRecord 对象，如下所示：

```
int sampleRate = 8000;
try {
    bufferSize = AudioRecord.getMinBufferSize(sampleRate, AudioFormat.CHANNEL_IN_MONO,
        AudioFormat.ENCODING_PCM_16BIT);
    audio = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleRate,
            AudioFormat.CHANNEL_IN_MONO,
            AudioFormat.ENCODING_PCM_16BIT, bufferSize);
} catch (Exception e) {
    android.util.Log.e("TrackingFlow", "Exception", e);
} 
```

然后你必须在准备好后开始录制：

```
audio.startRecording(); 
```

现在是时候开始阅读示例了，如下所示：

```
short[] buffer = new short[bufferSize];

    int bufferReadResult = 1;

    if (audio != null) {

        // Sense the voice...
        bufferReadResult = audio.read(buffer, 0, bufferSize);
        double sumLevel = 0;
        for (int i = 0; i < bufferReadResult; i++) {
            sumLevel += buffer[i];
        }
        lastLevel = Math.abs((sumLevel / bufferReadResult)); 
```

最后一个代码结合了所有不同的样本幅度并将平均值分配给 lastLeveL 变量，有关更多详细信息，您可以转到这篇[文章](http://www.doepiccoding.com/blog/?p=195)。

问候！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T10:48:31.343

我玩了一些录音源代码应用程序，但花了一段时间才得到它。

您可以复制 Google 的 NoiseAlert 源代码——我使用的 SoundMeter 代码。

getMaxAmplitude 范围从 0 到 32768。我懒得使用的 EMA 东西。

在您的主要活动中，您必须声明一个 MediaRecorder 对象并按照 Anna 引用的方式调用它的 start() 函数。

有关更多信息，您可以参考我的项目： http: [//kaitagsd.wordpress.com/2013/03/25/arduino-project-amplify-part-2-ie-how-to-transmit-send-data-from -android-to-arduino-bluesmirf-silver-using-bluetooth/](http://kaitagsd.wordpress.com/2013/03/25/arduino-project-amplify-part-2-i-e-how-to-transmit-send-data-from-android-to-arduino-bluesmirf-silver-using-bluetooth/) 我需要通过蓝牙发送声音幅度的值。

确切的代码在这里：[https ://github.com/garytse89/Amplify/tree/master/Android%20Code/src/com/garytse89/allin](https://github.com/garytse89/Amplify/tree/master/Android%20Code/src/com/garytse89/allin)

只需浏览与关联的 MediaRecorder 对象有关的部分即可。

# python - __init__() 的“私有”参数？

> ID：14181450
> 
> 赞同：5
> 
> 时间：2013-01-06T11:01:06.620
> 
> 标签：python

我有一个在实例化时采用单个参数的类，该参数`a`存储在`_a`属性中。对于许多方法（运算符），我还需要`_b`在结果上设置一个属性。这目前以直接的方式实现：

```
class SomeClass(object):
    def __init__(self, a=0):
        self._a = a
        self._b = 0

    def __add__(self, other):
        result = self.__class__()
        result._b = self._a + other._a
        return result 
```

现在，我有许多成员`_b`，例如`_c`和`_d`，因此`__add__`每个属性都需要额外的一行。能够在对象实例化上传递这些将导致更简洁的代码：

```
class SomeClass(object):
    def __init__(self, a=0, _b=0):
        self._a = a
        self._b = 0

    def __add__(self, other):
        return self.__class__(_b=self._a + other._a) 
```

但是，我不希望用户传递所有参数的值，除了`a`as `_b`，`_c`并且`_d`是实现细节。我可以简单地在文档字符串中声明不要传递多个参数。在“私有”属性之前加上下划线旨在反映这一点。

或者，我可以尝试通过提供第二个私有构造函数来让用户更难行为不端：

```
class SomeClass(object):
    def __init__(self, a=0):
        self._a = a
        self._init()

    def _init(self, _b=0):
        self._b = _b

    @classmethod
    def _constructor(cls, a, _b):
        obj = cls(a)
        obj._init(b)
        return obj

    def __add__(self, other):
        return self.__class__._constructor(_b=self._a + other._a) 
```

我认为这是一个相当笨拙的解决方案。

解决这个问题的首选方法是什么？还有其他更优雅的解决方案吗？这真的是个问题吗？我应该只使用第一个选项并最终得到更多代码行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T11:04:14.360

下划线约定在`_`python 世界中是明确和普遍的。

您记录您的“公共”属性，并在您的`__init__`方法中使用带下划线的默认参数。把事情简单化。

如果有人*想*通过使用这些私有参数来搞砸一个类，你不会阻止他们，而不是在 Python 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:12:53.693

为了稍微整理一下，您可以`_b`在之前设置`__init__`：

```
class SomeClass(object):
    _b = 0
    def __init__(self, a=0):
        self._a = a

    def __add__(self, other):
        result = self.__class__()
        result._b = self._a + other._a
        return result 
```

或者如果有大量私有变量，将它们放入一个列表并做一些魔术？

```
class SomeClass(object):
    calculated_vars = ['_b'] # All your calculated variables

    def __init__(self, a=0):
        self._a = a

    def __getattr__(self, k):
        if k in self.calculated_vars:
            return 0 # Default value for calculated variables
        else:
            raise AttributeError('{} not found'.format(k))

    def __add__(self, other):
        result = self.__class__()
        result._b = self._a + other._a
        return result

if __name__ == '__main__':
    i = SomeClass(1)
    print '_a attr: ', i._a # 1
    print '_b attr: ', i._b # 0 (Default value)
    print '_c attr: ', i._c # AttributeError: _c not found

    i2 = SomeClass(3)
    i3 = i + i2
    print '_b attr: ', i3._b # 4 (Calculated value) 
```

# image - 初始渲染后下载大型隐藏图像

> ID：14181451
> 
> 赞同：0
> 
> 时间：2013-01-06T11:01:10.407
> 
> 标签：image, rendering

我的网站显示缩略图。当用户点击图像时，图像会以更大的尺寸显示。图像本身有两种尺寸，用于快速渲染的缩略图尺寸和更大的尺寸。

最初下载并显示缩略图大小。我想要的是在页面渲染/加载后下载更大的图像（但被隐藏）。这样，初始渲染速度很快，但是当用户单击缩略图时，图像已经下载。

起初我是这样做的

```
<div name = "big_path" style= "display:hidden" src == "" path = "big/path"></div> 
```

在 js/jquery 中，加载后，我将 src 属性设置为路径，导致图像被下载。除了下载图像，我不使用这个 div 元素。

这适用于 IE，但 Chrome 不会下载隐藏图像。因此，当用户单击缩略图时，首先下载图像。也许这已经足够快了，但我更希望已经下载了图像。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:15:16.767

我最终做的是使 div 可见，但使其为 1px x 1px。然后我把它变成了一个跨度，而不是 div：

```
<span name = "big_path" style = "width:1px; height:1px" src == "" path = "big/path"></span> 
```

然后，一旦初始渲染完成，我仍然设置 src = path 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:29:42.253

你可能想做这样的事情：

```
$(document).ready(function(){
    //load images
    //append images
}); 
```

基本上，您是在文档加载后加载大图像。之后，您将像这样附加图像：

```
$('.thumbnail').append('<img src="img/lol.jpeg" />'); 
```

您可能希望将其放在 for 循环中以获取大量缩略图。

另一种解决方案是使用[渐进式 jpeg](http://calendar.perfplanet.com/2012/progressive-jpegs-a-new-best-practice/)。

# ios - 栏按钮项目图像变为白色图标，即使它是黑色的

> ID：14181453
> 
> 赞同：3
> 
> 时间：2013-01-06T11:01:25.683
> 
> 标签：ios, ios5, ios6, uibarbuttonitem

我将这些图标用作工具栏中的栏按钮项目
[http://stopiransnukes.org/images/home_icon.png](http://stopiransnukes.org/images/home_icon.png)
和
[http://www.bladmuziekplus.nl/shop/files/images/icon_home.png](http://www.bladmuziekplus.nl/shop/files/images/icon_home.png)
但背景图像已转换即使它是黑色的，也会自动变为白色。

我尝试通过代码设置图像背景，但仍然变成白色。

手动：我已将上面的图像拖放到项目中。我选择了条形按钮项目，并在右侧栏（盾牌图标）上的第 4 个选项上选择不同的色调，并将条形按钮下拉图像设置为上面的图像.

以编程方式：

```
 [self.homeButton setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [UIColor blackColor], UITextAttributeTextColor,nil] forState:UIControlStateNormal];

   [[self.homeButton] setImage:[UIImage imageNamed:@"home_icon.png"]]; 
```

我如何解决它 ？
提前致谢。

.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:54:34.260

`UIButton`这是添加图像并将其添加`UIButton`为`custom view`内部的`UIBarButtonItem`逐步过程`storyboard`。我将添加一些图像让您完全理解这一点。

**`toolbar`第**1 步：**拖放`storyboard`视图 ![在视图中拖放工具栏](../Images/b922ef2d6538a21a1bc6f019685a7851.png)**

 ****第 2 步：**拖放`UIButton`到您的`view`

![在此处输入图像描述](../Images/ae5f3959629432b6b7f2eb45af3e9fe5.png)

**第 3 步：**将图像拖放到您的`UIButton`

![在此处输入图像描述](../Images/988b598d10fe9b30b7bd05f80fb06586.png)

**第 4 步：**拖放`UIButton`工具栏中的 ，现在您可以在右侧将其添加到`UIBarButtonItem`. 现在你只需要为你的按钮连接一个动作方法。

![在此处输入图像描述](../Images/5ab041ccbcd5f66b926abb37b6be9156.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:44:37.753

这是正常行为，您可以在人机界面指南中阅读。

[http://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW8](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW8)

如果你想改变，你需要编写自己的子类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T14:36:07.420

viewDidLoad

```
[super viewDidLoad];

//uıbarButtonItem firstButtonItem,secondButtonItem
UIImage* firstButtonImage = [UIImage imageNamed:@"firstImageName"];;
CGRect frameimg = CGRectMake(0, 0, 30, 30);
UIButton * someButton = [[UIButton alloc] initWithFrame:frameimg];
[someButton setBackgroundImage:firstButtonImage forState:UIControlStateNormal];
[someButton addTarget:self action:@selector(goToUserProfile)
     forControlEvents:UIControlEventTouchUpInside];
self.firstButtonItem = [[UIBarButtonItem alloc] initWithCustomView:someButton];

UIImage* secondButtonImage = [UIImage imageNamed:@"secondImageName"];
frameimg = CGRectMake(0, 0, 30, 30);
someButton = [[UIButton alloc] initWithFrame:frameimg];
[someButton setBackgroundImage:secondButtonImage forState:UIControlStateNormal];
[someButton addTarget:self action:@selector(likePhoto)
     forControlEvents:UIControlEventTouchUpInside];
[someButton setTag:1];
self.secondButtonItem = [[UIBarButtonItem alloc] initWithCustomView:someButton];

[self.toolbar setItems:[self addItemsToToolbar]]; 
```

AddItemsToToolbar 方法

```
- (NSMutableArray *)addItemsToToolbar{
NSMutableArray *items = [[NSMutableArray alloc] init];
UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
[items addObject:flexSpace];
[items addObject:self.firstButtonItem];
[items addObject:flexSpace];
[items addObject:self.secondButtonItem];
return items; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T13:09:28.013

```
UIImage* infoButtonImage = [UIImage imageNamed:@"info_button.png"];;
CGRect frameimg = CGRectMake(0, 0, infoButtonImage.size.width, infoButtonImage.size.height);
UIButton * someButton = [[UIButton alloc] initWithFrame:frameimg];
[someButton setBackgroundImage:infoButtonImage forState:UIControlStateNormal];
[someButton addTarget:self action:@selector(actionOfButton)
     forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem * infoButton = [[UIBarButtonItem alloc] initWithCustomView:someButton]; 
```

此代码将解决您的问题**

# android - SlidingDrawer 中的 YouTubePlayerSupportFragment

> ID：14181454
> 
> 赞同：3
> 
> 时间：2013-01-06T11:01:32.167
> 
> 标签：android, youtube-api, slidingdrawer

我正在尝试将 a`YouTubePlayerSupportFragment`放在`SlidingDrawer`视图中。但是，当它运行时，视频会在 1 秒后停止，并在 LogCat 中发布以下内容：

```
W/YouTubeAndroidPlayerAPI(1778): YouTube video playback stopped due to unauthorized overlay on top of player. The YouTubePlayerView is obscured by ViewName{41726520 V.E..... ........ 0,0-720,1038 #7f060040 app:id/drawer}. YouTubePlayerView is completely covered, with the distance in px between each edge of the obscuring view and the YouTubePlayerView being: left: 0, top: 241, right: 0, bottom: 392.. 
```

打开，`SlidingDrawer`视频完全可见，没有被遮挡。有谁知道解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:57:38.427

我有同样的问题，我正在改变 YouTubePlayerSupportFragment 的边距，在它起作用之前距离是负的。不知道为什么会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T15:36:40.577

来自[youtube](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerView)播放器的文档应该是最顶级的元素，并且最小尺寸为 200*110 dp。如果它更小 - 玩家将停止。如果任何视图（甚至不可见）将与 youtube 播放器重叠 - 播放器将停止

# visual-studio-2010 - Visual Studio 项目的 Git 最佳实践

> ID：14181458
> 
> 赞同：10
> 
> 时间：2013-01-06T11:02:02.413
> 
> 标签：visual-studio-2010, git

我想将 Git 用于我从事的一些个人项目。我是 git 新手，不知道如何开始......

我应该先在 Visual Studio 中创建项目（例如 ASP.NET MVC 应用程序），然后将创建的文件夹转换为存储库，还是应该先创建存储库，然后在该文件夹中创建项目？

此外，对于如何在“存储库根文件夹”中构建文件夹，是否有任何最佳实践？

这是我现在的两个问题，但是欢迎任何关于使用 Git 和 Visual Studio 的最佳实践的文章等的指针！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T11:08:45.147

Git 存储库非常轻量级，因此无论您是创建项目然后创建存储库还是创建存储库并添加文件夹都无关紧要。无论如何，您将在创建文件夹之后执行 a `git add`and 。`git commit`

但是，对我来说，我通常从 VS 创建项目并重组文件夹，以便在根目录下有`src`文件夹，`.sln`并且项目文件位于 src 文件夹中。VS 通常会使用我重命名为 src 的项目名称创建根文件夹。然后我创建 repo，添加标准`.gitignore`并`.gitattributes`提交 repo。

在这里查看我的首选结构： [https ://github.com/manojlds/cmd](https://github.com/manojlds/cmd)

当然，你可以有任何你想要的结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T21:09:29.147

组织你的文件和文件夹，但是对于你的项目和工作流程来说，git 并不关心文件是如何组织的。

由于当我尝试在现有文件夹中创建项目时 Visual Studio 会报错，因此我按照以下步骤操作。

1.  创建一个裸远程存储库。
2.  在本地克隆空存储库。
    *   add`.gitignore`等并进行初始提交。
3.  在不同的文件夹中创建 VS 项目。
4.  然后我执行以下操作之一。
    *   将 .git 存储库中的文件复制到 VS 解决方案文件夹中——这会更改本地存储库的位置。
    *   关闭 VS，将解决方案文件复制到本地存储库，然后重新打开 VS。

我真的应该花时间来自动化它，但是我花更多的时间在现有项目上而不是重新开始，所以它还没有太大的烦恼。

我已经尝试了所有可视化 git 工具，包括那些与 VS 集成的工具，但最终总是使用 PowerShell 代替——只是偏好问题。试一试，它们可能适用于您的工作流程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T11:08:14.827

要在 VS 中使用，您可以使用[Git 扩展](http://code.google.com/p/gitextensions/)。它集成到 IDE 中，并为基本的 Git 操作提供了漂亮的 GUI。

至于文件夹结构，因项目而异，这里无法给出答案。没有比根据您的工作方式进行组织更好的做法了！

至于创建repo的那一刻，尽早创建，所以我会说先创建它，然后添加你的项目。

# java - 复选框渲染器

> ID：14181459
> 
> 赞同：0
> 
> 时间：2013-01-06T11:02:09.440
> 
> 标签：java, swing, checkbox, jtable, render

我已经开发了一个应用程序，我从数据库中获取数据并填充到 jtable 中。但问题在于渲染复选框。我已经为选择所有复选框进行了编码，但它在 UIManager 中给出了错误。尝试了很多但没有用。代码是： -

```
 public jtable1_1() throws Exception {

    DBEngine dbengine = new DBEngine();
    data = dbengine.getcandidatereport();

    //create header for the table
    header = new Vector<String>();

    header.add("check");
    header.add("Name");
    header.add("UserID"); //Empid
    header.add("EName"); // employee position
    header.add("LeadName");

    initComponents();
    TableColumn tc = jTable1.getColumnModel().getColumn(0);   
    tc.setHeaderRenderer(new CheckBoxHeader(new MyItemListener()));
    tc.setCellEditor(jTable1.getDefaultEditor(Boolean.class));     
    tc.setCellRenderer(jTable1.getDefaultRenderer(Boolean.class));} 

    private void jTable1MouseClicked(java.awt.event.MouseEvent evt)   
    {                                     
       // TODO add your handling code here:
       int row = jTable1.getSelectedRow();
       jTextField1.setText(jTable1.getModel().getValueAt(row,1).toString());
       jTextField2.setText(jTable1.getModel().getValueAt(row,2).toString());
       jTextField3.setText(jTable1.getModel().getValueAt(row,3).toString());
    } 

    public static void main(String args[]) {
        /* Create and display the form */
       java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
           try
            {
                new jtable1_1().setVisible(true);
            }catch(Exception e){e.printStackTrace();}
        }
      });
    }

     public class MyItemListener implements ItemListener {

      public void itemStateChanged(ItemEvent e) {
        Object source = e.getSource();
        if (source instanceof AbstractButton == false) {
            return;
        }
        boolean checked = e.getStateChange() == ItemEvent.SELECTED;
        for (int x = 0, y = jTable1.getRowCount(); x < y; x++) {
            jTable1.setValueAt(new Boolean(checked), x, 0);
        }
     }
    }

     public class CheckBoxHeader extends JCheckBox implements TableCellRenderer, MouseListener {

    protected CheckBoxHeader rendererComponent;
    protected int column;
    protected boolean mousePressed = false;

    public CheckBoxHeader(ItemListener itemListener) {
        rendererComponent = this;
        rendererComponent.addItemListener(itemListener);
    }

    public Component getTableCellRendererComponent(JTable jTable1, 
              Object value, boolean isSelected, boolean hasFocus, 
                                          int row, int column) 
    {
        if (jTable1 != null) {
            JTableHeader header = jTable1.getTableHeader();
            if (header != null) {
                rendererComponent.setForeground(header.getForeground());
                rendererComponent.setBackground(header.getBackground());
                rendererComponent.setFont(header.getFont());
                header.addMouseListener(rendererComponent);
            }
        }
        setColumn(column);
        rendererComponent.setText("Check All");
        setBorder(UIManager.getBorder("TableHeader.cellBorder"));     
        return rendererComponent;
    }

    protected void setColumn(int column) {
        this.column = column;
    }

    public int getColumn() {
        return column;
    }

    protected void handleClickEvent(MouseEvent e) {
        if (mousePressed) {
            mousePressed = false;
            JTableHeader header = (JTableHeader) (e.getSource());
            JTable tableView = header.getTable();
            TableColumnModel columnModel = tableView.getColumnModel();
            int viewColumn = columnModel.getColumnIndexAtX(e.getX());
            int column = tableView.convertColumnIndexToModel(viewColumn);

            if (viewColumn == this.column && e.getClickCount() == 1 && column != -1) {
                doClick();
            }
        }
    }

    public void mouseClicked(MouseEvent e) {
        handleClickEvent(e);
        ((JTableHeader) e.getSource()).repaint();
    }

    public void mousePressed(MouseEvent e) {
        mousePressed = true;
    }

    public void mouseReleased(MouseEvent e) {
    }

    public void mouseEntered(MouseEvent e) {
    }

    public void mouseExited(MouseEvent e) {
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:26:19.490

> 公共类 CheckBoxHeader 扩展 JCheckBox 实现 TableCellRenderer，MouseListener {

*   这段代码，整个类对今天的 Java、Swing 和 JTable（它的渲染器和编辑器）都是有用的，[请阅读 Oracles JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   仅将[布尔值放入模型，而不是 JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

*   必须[覆盖 XxxTableModel 中的 ColumnClass](https://stackoverflow.com/questions/6232432/sorting-rows-by-columns-in-jtable/6233119#6233119)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:34:40.893

这两行不是必需的。[默认情况下， JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)会为您执行此操作。

```
tc.setCellEditor(jTable1.getDefaultEditor(Boolean.class));     
tc.setCellRenderer(jTable1.getDefaultRenderer(Boolean.class)); 
```

您唯一需要做的就是`override getColumnClass(..)`在表格模型中。

```
private Class<?> getColumnClass(int columnIndex) {
     switch(columnIndex) {
          // This is for your case.
          case 0:
                 return Boolean.class;
          default: 
                 return String.class;
     }
} 
```

# java - 如何避免类目录/jar文件中的java文件？

> ID：14181461
> 
> 赞同：0
> 
> 时间：2013-01-06T11:02:33.653
> 
> 标签：java, file, deployment, jar, intellij-idea

我正在使用 IntelliJ Idea v11.4，当我在 target/classes 目录中编译我的项目时，不仅列出了类文件，还列出了 java 文件。对于每个类文件，我都找到了相应的 java 文件……这是正确的行为吗？

在我的项目中，我使用 maven 创建项目 jar 文件，这个 jar 文件也包含这些 java 文件。

如何防止将java文件复制到jar文件中？我想混淆 jar 文件以在网络上发布它，所以如果 java 文件也是它的一部分，那么混淆变得无用。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:19:09.680

遵循本[指南：您应该使用](http://blogs.jetbrains.com/idea/2010/08/quickly-create-jar-artifact/)**Build |**构建 Jar 文件。**构建工件**菜单项。请注意，默认情况下，所有库都被提取到目标 Jar。**通过添加新的提取目录**元素，这成为可能。使用这样的元素，您可以从 Jar 文件中提取目录并将其放入工件的输出中：

# jquery - 排序 列出其风格

> ID：14181464
> 
> 赞同：-2
> 
> 时间：2013-01-06T11:02:55.580
> 
> 标签：jquery, jquery-ui, jquery-plugins

我有一个动态创建的列表如下：

```
<ul id="Bucket-1" class="list1" data-listidx="11">
<li><div style="cursor: pointer;">BYBO2</div></li>
<li style="display: none;"><div style="cursor: pointer; display: none;">FURG4</div></li>
<li><div style="cursor: pointer;">HCLB8</div></li>
<li style="display: none;"><div style="cursor: pointer; display: none;">KVQF1</div></li>
<li style="display: none;"><div style="cursor: pointer; display: none;">LYPI6</div></li>
<li><div style="cursor: pointer;">MLET3</div></li>
<li style="display: none;"><div style="cursor: pointer; display: none;">MPZM9</div></li>
<li style="display: none;"><div style="cursor: pointer; display: none;">RFHP7</div></li>
<li style="display: none;"><div style="cursor: pointer; display: none;">TEAR5</div></li>
</ul> 
```

我必须通过 jquery`<li>`对上面应用排序，其中`<li>`不包含`style="display:none"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:58:06.303

您可以使用 css 类代替，并在[此 POST](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)`display:none` css中使用简单的解决方案 ：

```
.visible-li{}
.hidden-li{display:none;} 
```

html:

```
<ul id="Bucket-1" class="list1" data-listidx="11">
<li class="visible-li"><div style="cursor: pointer;">BYBO2</div></li>
<li class="hidden-li"><div style="cursor: pointer;">FURG4</div></li>
<li class="visible-li"><div style="cursor: pointer;">ACLB8</div></li>
<li class="hidden-li"><div style="cursor: pointer;">KVQF1</div></li>
<li class="hidden-li"><div style="cursor: pointer;">LYPI6</div></li>
<li class="visible-li"><div style="cursor: pointer;">MLET3</div></li>
<li class="hidden-li"><div style="cursor: pointer;">MPZM9</div></li>
<li class="hidden-li"><div style="cursor: pointer;">RFHP7</div></li>
<li class="hidden-li"><div style="cursor: pointer;">TEAR5</div></li>
</ul> 
```

最后在推荐的帖子中使用解决方案

在[JSFIDDLE上查看](http://jsfiddle.net/y9UrR/)

# android - Nexus 7：应用程序未打开

> ID：14181466
> 
> 赞同：0
> 
> 时间：2013-01-06T11:03:12.343
> 
> 标签：android, opengl-es-2.0, nexus-7

用户对应用程序未打开的 google play 发表评论`nexus 7`。我正在等待我的关系来测试这个问题。现在我没有那个设备。

我的应用是`OpenGL ES 2.0`游戏。

一些人对谷歌播放该应用程序未打开的评论。`Crashes and ANRs`但我在 Google Play中没有收到异常错误。

这可能是什么原因？

我有很多本机代码。是否以某种方式报告了本机代码异常？

这可能是一个`ConfigChooser.chooseConfig`错误吗？是否推荐`ConfigChooser.chooseConfig`用于 Nexus 或大多数应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:16:02.353

我可以确认你在 Nexus 7 上打开游戏的那一刻游戏就崩溃了，但是我知道为什么你什么都没有`Crashes & ANR`……根本没有打开强制关闭对话框，你得到一个黑屏，然后游戏立即退出。

但是，我确实有来自 logcat 的堆栈跟踪可用，错误出现在您通过 NDK 获得的某些 C/C++ 代码中。我已经为你上传了从你打开应用程序到 pastebin 的整个日志。

Logcat：[http](http://pastebin.com/dq0kRxnn) ://pastebin.com/dq0kRxnn （链接1个月后失效）

# ruby-on-rails - 帮助规范中的 rspec Let() 行为

> ID：14181469
> 
> 赞同：0
> 
> 时间：2013-01-06T11:03:34.767
> 
> 标签：ruby-on-rails, rspec, tdd, rspec-rails

我有以下内容`application_helper_spec.rb`

```
shared_examples_for "some shared process" do

    it "displays the value defined by Let" do
        puts object.inspect # This should output the value defined by Let
    end

end

describe ApplicationHelper do

    describe "a_helper_methond" do

        describe "some behaviour" do
            let(:object) { "foo" }
            puts object.inspect # This should output the value defined by Let
            it_should_behave_like "some shared process"
        end

    end

end 
```

但是，当我运行它时，我在两个 put 上都出现了两个错误：

```
undefined local variable or method `object' for #<Class:0x007f951a3a7b20> (NameError) 
```

为什么？我的模型中有完全相同的代码，并且请求规范运行良好，但在辅助规范中却没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T11:31:30.103

该`let`调用在您的规范将被执行的上下文中定义了一个方法。但是，您的`puts`陈述超出了该范围。您需要将其包装在一个`it`块中。

```
it 'print debug output' do
  puts object.inspect
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:45:15.890

我还通过将 Let 命令放在 it_behaves_like 块中进一步改进了这一点

# jquery - 后退按钮在第三页上不起作用

> ID：14181472
> 
> 赞同：0
> 
> 时间：2013-01-06T11:04:12.547
> 
> 标签：jquery, jquery-mobile, mobile, mobile-safari

我有以下代码来更改页面：

```
$.mobile.changePage("<?php echo base_url(); ?>mobile/products_by_phone/"+ 
$('#phone_number').val(),  {
 type: "GET",
transition: "flip"} ); 
```

现在在该页面内，如果我按下后退按钮，它会返回到我的初始页面，但如果我调用另一个 changePage 调用，这个：

```
$.mobile.changePage("<?php echo base_url(); ?>mobile/pay_method_dialog",  {
type: "POST",
data: data,
transition: "flip"} ); 
```

它改变得很好，但是当我按下后退按钮时，我只在 URL 中看到：`mybaseurl/mypage#products` 当 products 是我在第二个请求中加载的页面的 ID 但它不会变回来，只有当我再次按下时，页面才会更改为原来的。

我怎样才能解决这个问题？

*   我尝试调用链接到这些页面的锚点调用，但这没有用。
*   所有这些页面都有有效的 HTML 标签（尽管我在这些页面中再次包含了所有脚本）

# c++ - 界限和整数

> ID：14181474
> 
> 赞同：0
> 
> 时间：2013-01-06T11:04:15.040
> 
> 标签：c++, math, bounds

我正在阅读 Bjarne Stroustrup 的“Programming Principles and Practice Using C++”。我在第 4 章，练习 4。

练习如下：

> 编写一个程序来玩数字猜谜游戏。用户想一个介于 1 和 100 之间的数字，您的程序会提出问题以找出该数字是多少（例如“您想的数字是否小于 50？”）。在询问不超过七个问题后，您的程序应该能够识别数字。提示：使用 < 和 <= 运算符和 if-else 结构。

现在这很好，我已经成功地实现了这一点。

我以为我会尝试推动自己并尝试使用循环并每次调整下限或上限来实现这一点。

这是我的代码：

```
#include "std_lib_facilities.h"

int main( ){
  int count = 0;
  int lowerBound = 0;
  int upperBound = 100;
  string userInput = "";

  while ( lowerBound != upperBound ){
    // Increment count
    ++count;

    int halfRange = 0;

    // Make halfRange a while number, round up if any decimal portion.
    double range = ( upperBound - lowerBound ) / 2;

    int rangeDelta = range - (int)range;

    if ( rangeDelta != 0 )
      halfRange = (int)range + 1;
    else
      halfRange = range;

    cout << count <<": Is your number between " << lowerBound << " and " << lowerBound + halfRange << "? ";
    cin >> userInput;

    // Reset the bounds
    if ( userInput == "y" || userInput == "Y" )
      upperBound -= halfRange;
    else if ( userInput == "n" || userInput == "n" )
      lowerBound += halfRange;
    else {
      --count;
      cout << "Error! Answer could not be understood.";
    }
  }

  cout << "lowerBound: " << lowerBound << ", upperBound: " << upperBound << "\n\n";
  cout << "Your number is: " << lowerBound << "\n";

  return 0;
} 
```

问题？好吧，当它到达有小数部分的数字并使用整数除法时，就会发生这种情况，这会丢弃小数部分。如果使用数字 48，程序会猜测 47 和 47。

有什么线索可以让我走吗？我想我已经很接近了，但会感谢一些帮助。

谢谢，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:09:50.293

```
 double range = ( upperBound - lowerBound ) / 2; 
```

这条线会给你带来问题，因为所有的操作数都`int`因此被评估为 int 而不是`double`. 如果这不是故意的，请更改`2`->`2.0`以解决此问题。

```
int rangeDelta = range - (int)range; 
```

你也确定你不想要`double rangeDelta`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:11:04.130

我认为您的代码中仍然存在问题（即使之前发出信号的错误已修复）：应该清楚的是，**上限和下限都包含**在剩余的可能数字中，这从您的代码中不清楚：在第一个问题，如果我回答'y'，则新区间为[0,50]，如果我回答'n'，则新区间为[50,100]，这是错误的！50 不应包含在第二个区间中。

要解决此问题，您应该将边界的更新更改为：

```
if ( userInput == "y" || userInput == "Y" )
   upperBound = lowerBound + halfRange;
else if ( userInput == "n" || userInput == "n" )
   lowerBound = lowerBound + halfRange + 1; 
```

现在最后一个问题仍然存在问题，永远保持不变。问题是当 range=1 时，你也有 halfrange=1 并且问题保持不变。

要解决该问题，您应该**缩小**范围。只需将其定义为：

```
int halfRange = ( upperBound - lowerBound ) / 2; 
```

现在你的代码应该可以工作了。这是我将用于 while 循环的代码：

```
while ( lowerBound != upperBound ){
// Increment count
++count;

int halfRange = ( upperBound - lowerBound ) / 2;
int midpoint = lowerBound + halfRange;

cout << count <<": Is your number between " << lowerBound << " and " << midpoint << "? (both included) ";
cin >> userInput;

// Reset the bounds
if ( userInput == "y" || userInput == "Y" )
  upperBound = midpoint;
else if ( userInput == "n" || userInput == "n" )
  lowerBound = midpoint + 1;
else {
  --count;
  cout << "Error! Answer could not be understood.";
} 
```

}

请注意，现在我们只使用整数，根本没有双精度！如果您使用整数，请尽量避免通过 double 传递，而是使用整数除法和模数来处理它们（并且不要使用 double 来表示整数）。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T20:02:40.823

您也可以使用数组来实现这一点，第 4 章对此进行了解释。

```
int min = 1;    // range for our guessing game
int max = 10;
int guess = 0;  // value to keeep track of guessing
char choice = ' ';
vector<int>v;

// put all our values into a vector
for(int i = min; i <= max; i++) {
    v.push_back(i);
}

while (v.size() != 1) {   // if there is only one value left, no guessing needed. jump out of loop

    guess = v[v.size()/2];   // find median

    cout << "\nIs your number less than " << guess << "? (y/n)\n";  // ask user for hint
    cin >> choice;

    if(choice == 'y') { //y: value is below median, pop values of median and above out of our range of values
        for(int i = 0; i < v.size(); i++)
        v.pop_back();
    }
    else {  // n: value is median or above. erase the lower values out of our range of values
        for(int i = 0; i < v.size(); i++){
            v.erase(v.begin());
        }
    }
} // end while
cout << "The number is " << v[0] << "\n"; 
```

# android - 适用于 Android 的共享数据云存储

> ID：14181475
> 
> 赞同：1
> 
> 时间：2013-01-06T11:04:15.660
> 
> 标签：android, api, sdk, cloud

我正在开发需要从云中的某些共享存储中存储和读取数据的 android 应用程序。

我想知道是否已经有现有的 android API/SDK 用于从一些抽象的“云存储”推送和获取数据，还是我必须实现和托管我自己的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:10:15.730

A. 简要了解[适用于 Android 的 Amazon AWS SDK](http://aws.amazon.com/sdkforandroid/)，但我并不是说您*必须*使用它。

B. 如果只是为了存储数据，另一个简单的解决方案是使用 SFTP 服务器，在 Android 端带有一些[SFTP java 客户端。](https://stackoverflow.com/questions/14617/java-what-is-the-best-way-to-sftp-a-file-from-a-server)SFTP 服务器的设置很简单（使用 OpenSSH），一些提供商（例如[Nine](http://nine.ch/managed-vserver/plans)）也准备好为您维护和备份它。

# php - 如何在php中显示特定类别的帖子？

> ID：14181476
> 
> 赞同：2
> 
> 时间：2013-01-06T11:04:24.057
> 
> 标签：php, mysql

这里的问题是，当我手动键入 cat='hotels' 时，它会显示该类别的详细信息。
但是当我给 cat=$category 时，（类别将由用户选择），它说类别是未定义的变量。

我想要的是，当我点击任何类别时，应该显示与该类别相关的帖子。

帮助解决这个问题。

下面是代码。

这是脚本。

```
<script>
   $(document).ready(function(){
   $(".button").click(function(){
   $("#display").load("cat.php");
   });
   });
</script> 
```

这是我的html。

```
<ul>            
<li class="button"><a href="#">Hotels</a></li>
<li class="button"><a href="#">Resorts</a></li>
<li class="button"><a href="#">Hills</a></li>
</ul>

<div id="display"></div> 
```

这是我的 insert.php 文件。

```
$id = isset($_POST['post_id'])?$_POST['post_id']:'';
$category=$_POST['cat'];

mysql_connect('localhost','root','');

mysql_select_db("database") or die("Unable to select database");

$insertquery="INSERT INTO posts VALUES('$id','$category')";

$result=mysql_query($insertquery);

if(! $result )
{
  die('Could not enter data: ' . mysql_error());
}
else {

        echo "Entered data successfully\n";
        header('Location:home.php');
    }   

mysql_close();
?> 
```

这是在我的主页上显示它的代码 (cat.php)。

```
<?php
$row="";

$link = mysql_connect("localhost","root","");
mysql_select_db("database");

$query = "SELECT * FROM posts WHERE cat=$category";

$result = mysql_query($query) or die("Query to get data failed with error:   ".mysql_error());

while($row = mysql_fetch_array($result)) { 

echo    $row['cat'];

}
mysql_close($link);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:06:41.733

改变

```
$query = "SELECT * FROM posts WHERE cat=$category"; 
```

至

```
$query = "SELECT * FROM posts WHERE cat='$category'"; 
```

# python - sqlalchemy：filter() 由于缺少映射器属性/AttributeError 而无法正常工作

> ID：14181481
> 
> 赞同：1
> 
> 时间：2013-01-06T11:05:23.157
> 
> 标签：python, sqlalchemy

我的 SQLAlchemy 0.8 代码如下所示：

模型.py：

```
from sqlalchemy import Table
from sqlalchemy.orm import mapper

class Food(object):
    pass

def initialize_model(metadata):
    FoodTable = Table('food', metadata, schema='food', autoload=True)
    globals()['Food'] = mapper(Food, FoodTable) 
```

应用程序.py

```
engine = create_engine(dsn, convert_unicode=True)$
metadata = MetaData(engine)$

import xxx.core.model$
xxx.core.model.initialize_model(metadata)$

session = scoped_session(sessionmaker(bind=engine, twophase=True))

from xxx.core.model import Food
results = session.query(Food).filter(Food.nbo_no==query) 
```

这给了我 Food.ndb_no 的 AttributeError，尽管 Food Table 包含此列“ndb_no”。为什么此列没有映射到“食物”映射器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:44:18.617

通过使用声明层并将 Base 直接传递给 initialize_model() 方法来解决：

```
 9 def initialize_model(Base):
 10     
 11     class Food(Base, Mixin):
 12         __tablename__ = 'food'
 13         __table_args__ = {'schema': 'food', 'autoload': True}
 14     globals()['Food'] = Food 
```

# android - LocationManager 不更新位置

> ID：14181483
> 
> 赞同：0
> 
> 时间：2013-01-06T11:05:49.467
> 
> 标签：android, android-location, locationlistener

获取当前位置的代码如下：

```
final LocationManager manager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
LocationListener listener=new LocationListener() {

    @Override
    public void onLocationChanged(Location location) {

        manager.removeUpdates(this);
        Toast.makeText(MainActivity.this, "2", Toast.LENGTH_LONG).show();
        if (location!=null) {
                                doSomeAction();
        }
        else {
            Toast.makeText(MainActivity.this, LOCATION_IS_NULL_MESSAGE, Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
        manager.removeUpdates(this);
        String newProvider=provider.equals(LocationManager.GPS_PROVIDER) ? LocationManager.NETWORK_PROVIDER : null; 
        if (newProvider==null) {
            Toast.makeText(MainActivity.this, LOCATION_PROVIDERS_ARE_DISABLED_MESSAGE, Toast.LENGTH_LONG).show();
        }
        else {
            manager.requestLocationUpdates(newProvider, 0, 0, this);
        }
    }

    @Override
    public void onProviderEnabled(String provider) {}

    @Override
    public void onStatusChanged(String provider, int status,
            Bundle extras) {}

};
String provider=manager.isProviderEnabled(LocationManager.GPS_PROVIDER) ? LocationManager.GPS_PROVIDER : 
    LocationManager.NETWORK_PROVIDER;
Location location=manager.getLastKnownLocation(provider);
if (location!=null) {
                doSomeAction();
}
else {
    Toast.makeText(this, "1", Toast.LENGTH_LONG).show();
    manager.requestLocationUpdates(provider, 0, 0, listener);
} 
```

我每次看到吐司“1”，但我从未见过“2”吐司，因此我的位置没有更新。请告诉我，我需要获取当前位置 - 如何解决我的问题？我使用网络位置提供商。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:48:19.363

你真的附上了听众吗？如果没有附加监听器，它的代码是无用的，但此外 afaik：如果 LocationManager 没有附加监听器，它将不会更新任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:31:41.217

试试这样：

```
public class Locato extends Activity implements LocationListener {

LocationManager locman;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.idlayout);
locman = (LocatonManager) getSystemService(Context.LOCATION_SERVICE);

}

 public void onStatusChanged(String pr, int s, Bundle a) {}

 @Override
    public void onProviderDisabled(String provider) {
       Log.d("MyApp", "Provider disabled : " + provider);
    }

    @Override
    public void onProviderEnabled(String provider) {
Log.d("MyApp", "Provider enabled : " + provider);
}

 @Override
    public void onLocationChanged(Location location) {
// do something
    } 
```

您还必须向清单添加权限：访问粗略位置和访问精细位置

# php - 如何使我的 Htaccess 删除扩展名，而目录后没有文件名

> ID：14181485
> 
> 赞同：1
> 
> 时间：2013-01-06T11:06:05.597
> 
> 标签：php, .htaccess

我正在使用 PHP 进行编码，并且已经实现了一个删除文件扩展名的 htaccess 代码（在本例中为“.php”）。

问题是，这不允许目录最终删除 index.php。

IE [http://www.domain.com/about/](http://www.domain.com/about/) - 在此服务器上找不到请求的 URL /about/.php。

这是我当前的代码：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L]

RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^/]+/)*[^.#?\ ]+\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(([^/]+/)*[^.]+)\.php http://www.domain.com/$1 [R=301,L]

Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^index\.php/?$ / [L,R=301,NC] 
```

我想让 /about/ 重定向到 /about/index.php，同时只显示 /about/

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:10:12.947

只需在 htaccess 文件中使用 DirectorySlash 补丁程序会自动在目录名称后附加斜杠

```
DirectorySlash On 
```

如果您想调用不带斜杠的目录，请尝试：

```
DirectorySlash Off 
```

# linux - 使用 bash 模拟按键

> ID：14181488
> 
> 赞同：7
> 
> 时间：2013-01-06T11:06:24.473
> 
> 标签：linux, bash, ubuntu

我尝试从终端运行 gedit 并在其中打开的文件中键入一些文本，但没有成功。我尝试使用`gedit; sleep 2; xte -x display 'key k';`命令，但这个命令只运行 gedit（不输入 k 字符）。有人可以在我身上筹码吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T11:59:26.557

[Xdotool](http://www.semicomplete.com/projects/xdotool/)（不知道网页发生了什么，这是它的[来源](https://github.com/jordansissel/xdotool)）非常适合：

```
xdotool key k 
```

并使用 gedit：

```
gedit & sleep 2; xdotool key k; 
```

# c# - 1/C#中的大整数

> ID：14181494
> 
> 赞同：2
> 
> 时间：2013-01-06T11:06:55.507
> 
> 标签：c#, biginteger, inverse

我要实现

```
BigInteger.ModPow(1/BigInteger, 2,5); 
```

但`1/BigInteger`总是 return `0`，这导致结果也是`0`如此。我试图为 c# 寻找一些`BigDecimal`类，但我什么也没找到。即使没有，有没有办法计算这个`BigDecimal`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T11:55:23.170

`1/a`|a|>1 时为 0，因为`BigIntegers`使用整数除法，其中忽略除法的小数部分。我不确定您对此有何期待。

我假设您想要模数的模[乘逆](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)，而不是小数。这个逆存在当且仅当且是互质的，即。`a``m``a``m``gcd(a, m) = 1`

链接的维基百科页面列出了计算模乘逆的两种标准算法：

*   [扩展欧几里得算法](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)，适用于任意模
    它很快，但具有输入依赖的运行时。

    我手头没有 C# 代码，但是从维基百科移植伪代码应该是直截了当的。

*   使用欧拉定理：
    ![$i^{-1} = i^{φ(n)-1}$](../Images/0d28653d883ce4e99461a45935d269e4.png)
    这需要知道 φ(m)，即您需要知道 m 的质因数。`m`当是素数时，这是一个流行的选择，因此当它简单地变为 时 φ(m) = m-1 ![$a^{-1} = a^{p-2}$](../Images/7ee7b6d7c7ce173320695d7e04ecf015.png)。如果您需要恒定的运行时间并且您知道 φ(m)，那么这就是要走的路。

    在 C# 中，这变成`BigInteger.ModPow(a, phiOfM-1, m)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:36:54.377

`/`所选运算符的重载如下：

```
public static BigInteger operator /(
        BigInteger dividend,
        BigInteger divisor
) 
```

请参阅[BigInteger.Division 运算符](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.op_division.aspx)。如您所见，如果结果介于`0`和之间`1`（很可能`dividend`是`1`您的情况），因为返回值是整数，所以返回。`0`

你想用这个`ModPow`方法做什么？您是否意识到这`2,5`是*两个*论点，二和五，而不是“二点五”？你的意图是“取平方模5”吗？

如果要浮点除法，可以使用：

```
1.0 / (double)yourBigInt 
```

注意转换为`double`. `yourBigInt`如果太大，这可能会失去精度，甚至“下溢”为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-08T21:26:30.057

例如，您需要在下一个中获取 d：
**3*d = 1 (mod 9167368)** 

这同样是：
**3*d = 1 + k * 9167368，其中 k = 1, 2, 3, ...** 

重写它：
**d = (1 + k * 9167368)/3** 

您的 d 必须是具有**最低**k 的整数。
让我们写下公式：
**d = (1 + k * fi)/e** 

```
public static int MultiplicativeInverse(int e, int fi)
        {
            double result;
            int k = 1;
            while (true)
            {
                result = (1 + (k * fi)) / (double) e;
                if ((Math.Round(result, 5) % 1) == 0) //integer
                {
                    return (int)result;
                }
                else
                {
                    k++;
                }
            }
        } 
```

让我们测试一下这段代码：

```
Assert.AreEqual(Helper.MultiplicativeInverse(3, 9167368), 6111579); // passed 
```

# android - 从自定义 SurfaceView 获取位图

> ID：14181498
> 
> 赞同：9
> 
> 时间：2013-01-06T11:07:27.497
> 
> 标签：android, bitmap, android-canvas, surfaceview, extends

我在一个扩展表面视图并实现可运行的类中有这个代码我能够使用该类基本上允许您使用不同的颜色等绘制到画布上。我正在尝试获得一种方法，该方法允许我在绘制图像后保存图像，这就是方法。无论我做什么，我都会得到一个黑色的图像，上面什么都没有。有任何想法吗？

我启用了缓存绘图

Objective get a bitmap image from a custom SurfaceView 我已经用尽了在这里查看其他帖子的选项，但没有找到任何工作。希望最近有一个新的解决方案。非常感谢

```
public Bitmap getImage() {
            Bitmap bitmap = Bitmap.createBitmap(this.getWidth(),
                    this.getHeight(), Bitmap.Config.ARGB_8888);
            Canvas canvas = new Canvas(bitmap);
            this.draw(canvas);
            return bitmap;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:25:41.570

您的问题只有在您最后的评论中才变得清晰。在您上面发布的代码中，您返回的是`return bitmap`. 这将返回局部变量`bitmap`。这个局部变量是完全空白的。您可能正在代码中的其他位置绘制位图或将图像与其关联。但是您上面的代码中的位图**实例**是空白的，并且仅在函数本地。您不能期望它返回您更新的最新位图。

现在，在您发表评论后，我在 Google 上搜索“获取当前表面视图的位图”，这让我得到了这样的答案：[从 SurfaceView 创建位图](https://stackoverflow.com/questions/4742868/android-creating-a-bitmap-with-surfaceview-content)

在那个问题上，显然是通过扩展 View 而不是 SurfaceView 来解决的。绘图缓存仅适用于视图。

**更新：**遵循以下教程。根据您粘贴的代码，尚不清楚错误是什么。绘制到 SurfaceView 需要做很多事情，我不确定你是否已经完成了这些，我不能要求每一个这样的缺失项目。我按照以下教程进行了基本图形项目。你需要阅读它们，看看你是否遗漏了什么。

Canvas 绘图教程：

[在 android](http://android10.org/index.php/articlesgraphicsaudiovideo/131-playing-with-graphics-in-android-part-i)所有部分中使用 Graphics。

[安卓 2D](http://android-journey.blogspot.co.il/2010/02/android-2d-simple-example.html)

# html - 在某些情况下，字体无法以西里尔文正确显示

> ID：14181499
> 
> 赞同：0
> 
> 时间：2013-01-06T11:07:34.470
> 
> 标签：html, css

我正在使用 Font face 在网站[http://www.mastersofbackgammon.net/site](http://www.mastersofbackgammon.net/site)（英文版）和 [http://www.mastersofbackgammon.net/site/index_ru.html](http://www.mastersofbackgammon.net/site/index_ru.html)（网站的俄语版）上显示 Thonburi 字体

我在网站的英文版上正确显示了字体，但在俄文版上，它在某些浏览器中有效，而在某些浏览器中无效。该字体肯定支持西里尔文，但我不确定如何配置它以在所有浏览器和计算机中正确显示。

目前，我在所有这些浏览器中显示西里尔文版本时遇到问题：Firefox、Internet Explorer、Opera、Chrome

当它不显示时，字体只是 Times New Roman。

对此有什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:16:18.753

页面上指定的 Thonburi 和 Thonburi Bold 字体没有西里尔字母（我使用 OTMaster Light 进行了检查）。这解释了为什么西里尔字母使用后备字体显示，默认情况下通常是 Times New Roman。

# css - 在菜单分隔符图像之间垂直居中菜单项

> ID：14181502
> 
> 赞同：2
> 
> 时间：2013-01-06T11:07:58.347
> 
> 标签：css

这就是我想要实现的目标，并且已经非常接近：

![在此处输入图像描述](../Images/68baeb4301b9605588d0f40c9a2f6c74.png)

这是我的 CSS：

```
li {
    float: left;
    position: relative;
    padding-left: 55px;
    background: url(../../images/separator.png);
    background-repeat: no-repeat;
    background-position: left bottom;
    height: 87px;
}       

a {
    font-size: 15px;
    line-height: 67px;
} 
```

我快到了，但有一些问题。我想出让菜单项垂直位于分隔符中间的唯一方法是使用行高。但是现在当然当悬停在链接上时，悬停是行高的高度，我不希望这样。

另外：有没有办法让菜单项进入分隔符图像“内部”，就像在图片中一样？分隔符图像是透明的 png。如果不是，我将减少菜单项上的填充以尝试使它们更接近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:31:35.953

第一种方法：

给链接一个高度，将其放置在距离顶部 50% 的位置，一半的高度回到顶部：

```
a {
    font-size: 15px;
  height:30px;
  display:block;
  position:relative;
  top:50%;
  margin-top:-15px;
} 
```

演示 [http://jsbin.com/ovaqix/1/edit](http://jsbin.com/ovaqix/1/edit)

第二种解决方案

使 a 元素 display:table-cell 和 li 高度相同，然后使用垂直对齐：

```
a  {
  display:table-cell;
  height:87px;
  vertical-align:middle;
} 
```

演示

[http://jsbin.com/ovaqix/2/edit](http://jsbin.com/ovaqix/2/edit)

表格单元格在 IE7 中不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:31:11.413

您是否尝试过更改 a:hover 中的高度？

为了让菜单项进入分隔符，我认为您需要在伪元素之后和之前创建伪元素，并使用边框 hack 来生成三角形。他的一些东西：

```
a:before {
    border-top: 38px solid transparent;
    border-bottom: 60px solid transparent;
    border-right: 60px solid black;
} 
```

如果您提供更多详细信息，我可以更具体。

# android - 存储临时图像最佳实践

> ID：14181506
> 
> 赞同：0
> 
> 时间：2013-01-06T11:08:15.137
> 
> 标签：android, sqlite

我正在创建一个应用程序，它从服务器下载六个最近的图像（缩略图），然后在滑动（通过`Viewpager`）下载接下来的六个。在向后滑动时，它会显示前六个。存储它们的最佳做法是什么？我应该将它们保存在 sqlite 数据库中并在会话后删除还是应该将它们存储在堆中？目前我将它们存储在堆上，当下载 42 个缩略图时，它会破坏前六个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:26:27.057

这取决于。这是堆内存和速度与持久性需求之间的权衡。

但是，如果您必须永久存储图像，请将它们作为单独的文件保存在应用程序的缓存目录（[内部](http://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)或[外部](http://developer.android.com/reference/android/content/Context.html#getExternalCacheDir%28%29)）而不是 SQLite 数据库中。SQLite 最适合存储结构化数据而不是二进制 blob。如果您有关联的元数据，您可以将文件的*路径*与元数据一起存储在 SQLite 中。

当设备存储空间不足时，缓存中的文件将被自动删除。但是请阅读文档以获取警告。

如果您选择在堆中缓存，请考虑使用[`LruCache`](http://developer.android.com/reference/android/util/LruCache.html). 它在API 级别 < 11的[支持库中可用。](http://developer.android.com/reference/android/support/v4/util/LruCache.html)

当然，最好的选择是让一个小的内存缓存由一个更大的文件缓存来备份。

# c++ - 调用 QSslSocket::startServerEncryption，但没有任何反应

> ID：14181507
> 
> 赞同：3
> 
> 时间：2013-01-06T11:08:22.743
> 
> 标签：c++, qt, sockets, ssl, qsslsocket

我正在尝试使用 Qt 文档中的示例代码来实现 SSL 服务器。

但是在`serverSocket->startServerEncryption();`被调用之后，什么都没有发生——既`encrypted()`没有`sslErrors()`发出信号也没有发出信号（我已经在连接到它们的插槽中放置了断点）。

我通过将 QSslSocket 连接`connectToHostEncrypted`到我正在监听的端口来测试它。套接字发送数据，但我的服务器没有响应（我正在使用 TCP 嗅探器/代理来查看从客户端发送到服务器以及从服务器发送到客户端的所有数据）。

这是我的服务器代码：

```
void SslServer::incomingConnection(int socketDescriptor)
{
    qDebug() << "SslServer::incomingConnection()";
    QSslSocket *serverSocket = new QSslSocket(this);
    if (serverSocket->setSocketDescriptor(socketDescriptor)) {
        connect(serverSocket, SIGNAL(encrypted()), this, SLOT(ready()));
        connect(serverSocket, SIGNAL(sslErrors(QList<QSslError>)), this, SLOT(sslErrors(QList<QSslError>)));
        serverSocket->startServerEncryption();
    } else {
        delete serverSocket;
    }
} 
```

这就是我连接它的方式：

```
server = new SslServer(this);
server->listen(QHostAddress::Any, 3333);
QSslSocket *socket = new QSslSocket(this);
socket->connectToHostEncrypted("127.0.0.1", 3333); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:00:06.647

根据[文档](http://qt-project.org/doc/qsslsocket.html#setPrivateKey)：

> 如果您要创建 SSL 服务器套接字，则需要密钥和本地证书。

如果您不提供它们，则`error(QAbstractSocket::SocketError)`套接字会发出“常规”信号。如您所见，在这种情况下，服务器不会发送任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:29:18.163

SSH 不是 SSL。SSH 客户端等待来自服务器的初始数据，而 SSL 客户端首先发送数据。所以他们都在等待对方的数据。

# html - 将 twitter 引导程序添加到当前项目

> ID：14181508
> 
> 赞同：0
> 
> 时间：2013-01-06T11:08:34.023
> 
> 标签：html, css, twitter-bootstrap

我正在考虑将 twitter bootstrap 中的一些元素添加到我当前的 Web 应用程序中。这将帮助我在 Web 开发过程的某些部分更有效。我确实认为我自己擅长 css，而且我总是从头开始构建我的网站。

使用 twitter bootstrap 的某些部分是否可行，例如网格系统？然后使用我自己的自定义类进行样式设置等？还是应该全力以赴并使用引导程序的各个方面，并自定义引导程序类？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:09:24.960

如果您希望拥有样式所需的最少代码，并且您可以在将来需要时进行扩展/重新集成，那么可以使用您想要的那些特定引导程序部分，并可以根据需要设置它们的样式，并且可以留下不需要的引导功能..

但是，如果您不介意一些额外的代码，这可能会增加您的页面加载时间，那么您可以使用整个引导程序。

在任何一种情况下，最好不要更改核心引导代码并编写自己的代码以添加/修改功能。这将为您提供使用引导样式的选项，以防将来出现需要，并且您还可以在更新版本到来时直接更新引导文件。

# php - 下拉框显示用户名，选择时获取用户号

> ID：14181512
> 
> 赞同：0
> 
> 时间：2013-01-06T11:08:54.230
> 
> 标签：php, mysql

我正在创建一个报告功能，经理可以查找对 mySQL 表的用户列表的修改。这包含 5 列 Unique_ID（*自动增量*）、UserID（*13 位数字*）、生效日期（*Unix 日期*）、添加日期（*Unix 日期*）、Added_by（*13 位数字*）。

为了选择正确的数据，我从另一个包含用户名和用户 ID（一个 13 位数字）的表中填充了一个下拉列表，但是我不知道如何选择名称（因为没有人能记住所有员工编号）并且它发布对应的用户 ID 到下一个查询。

```
<form action="<?=$_SERVER['php_SELF']?>" method="get">
<?
    $loc = $usersite->UserLocation();
    $username = "Uname";
    $password = "Pword";
    $hostname = "Hname";
    $dbhandle = mysql_connect($hostname, $username, $password)
        or die("Unable to connect to MySQL");
    $selected = mysql_select_db("DBname",$dbhandle)
        or die("Could not select database");
    $query="SELECT name FROM `login1st` WHERE `Location` = '$loc'";
    $result = mysql_query ($query);
    echo "<select name=category value=''></option>";
    while($nt=mysql_fetch_array($result)){
        echo'<option value="'.$nt['name'].'">'.$nt['name'].'</option>';
    }
    echo "</select>";
?>
<input type="submit" value="Search" class="buttons2">
</form> 
```

这工作正常，我有一个包含所有员工姓名的下拉框，有没有办法从选择中获取关联的用户 ID 到单独的查询？例如

```
 SELECT * FROM  `$loc` WHERE  `User_id` = (query result from drop down) 
```

我使用 PHP_SELF 作为结果，我希望，将进入下拉列表下方的表格。我愿意接受任何其他方式来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:16:19.157

在值部分中，您可以定义要提交的内容。因此，只需更改您的查询以获取 UserId

```
$query="SELECT UserID, name FROM `login1st` WHERE `Location` = '$loc'"; 
```

然后在您的选择框中输出 id：

```
echo'<option value="'.$nt['UserID'].'">'.$nt['name'].'</option>'; 
```

# webcam - 在树莓派上使用动作来解决网络摄像头流问题

> ID：14181516
> 
> 赞同：7
> 
> 时间：2013-01-06T11:09:37.563
> 
> 标签：webcam, raspberry-pi, motion, raspbian

我有一个 USB 网络摄像头（未知品牌，没有标记），在我的 Raspberry Pi 上检测到很好。

这是 lsusb 的输出

```
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 002: ID 0424:9512 Standard Microsystems Corp. 
Bus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp. 
Bus 001 Device 004: ID 0c45:608f Microdia PC Camera (SN9C103 + OV7630)
Bus 001 Device 005: ID 1267:0103 Logic3 / SpectraVideo plc G-720 Keyboard 
```

但是，当我运行运动时，使用带有唯一默认配置的 /dev/video0 更改了分辨率并将网络摄像头主机设置为关闭，以便我可以在网络上流式传输它。这是我跑步时的日志

```
Log of motion -n 

[0] Processing thread 0 - config file /etc/motion/motion.conf
[0] Motion 3.2.12 Started
[0] ffmpeg LIBAVCODEC_BUILD 3482368 LIBAVFORMAT_BUILD 3478784
[0] Thread 1 is from /etc/motion/motion.conf
[0] motion-httpd/3.2.12 running, accepting connections
[0] motion-httpd: waiting for data on port TCP 8080
[1] Thread 1 started
[1] cap.driver: "sonixb"
[1] cap.card: "USB camera"
[1] cap.bus_info: "usb-bcm2708_usb-1.2"
[1] cap.capabilities=0x05000001
[1] - VIDEO_CAPTURE
[1] - READWRITE
[1] - STREAMING
[1] Config palette index 8 (YU12) doesn't work.
[1] Supported palettes:
[1] 0: S910 (S910)
[1] 1: BA81 (BA81)
[1] Selected palette BA81
[1] Test palette BA81 (480x640)
[1] Adjusting resolution from 480x640 to 160x120.
[1] Using palette BA81 (160x120) bytesperlines 160 sizeimage 19200 colorspace 00000008
[1] found control 0x00980900, "Brightness", range 0,255 
[1]     "Brightness", default 127, current 127
[1] found control 0x00980911, "Exposure", range 0,1023 
[1]     "Exposure", default 66, current 66
[1] found control 0x00980912, "Automatic Gain (and Exposure)", range 0,1 
[1]     "Automatic Gain (and Exposure)", default 1, current 1
[1] found control 0x00980913, "Gain", range 0,255 
[1]     "Gain", default 127, current 127
[1] mmap information:
[1] frames=4
[1] 0 length=20480
[1] 1 length=20480
[1] 2 length=20480
[1] 3 length=20480
[1] Using V4L2
[1] Resizing pre_capture buffer to 1 items
[1] v4l2_next: VIDIOC_DQBUF: EIO (s->pframe 0): Input/output error
[1] v4l2_next: VIDIOC_QBUF: Invalid argument
[1] v4l2_next: VIDIOC_QBUF: Invalid argument
[1] v4l2_next: VIDIOC_QBUF: Invalid argument
[1] v4l2_next: VIDIOC_QBUF: Invalid argument
[1] Error capturing first image
[1] Started stream webcam server in port 8081
[1] v4l2_next: VIDIOC_QBUF: Invalid argument
[1] Video device fatal error - Closing video device
[1] Closing video device /dev/video0
[1] Retrying until successful connection with camera
[1] cap.driver: "sonixb"
[1] cap.card: "USB camera"
[1] cap.bus_info: "usb-bcm2708_usb-1.2"
[1] cap.capabilities=0x05000001
[1] - VIDEO_CAPTURE
[1] - READWRITE
[1] - STREAMING
[1] Config palette index 8 (YU12) doesn't work.
[1] Supported palettes:
[1] 0: S910 (S910)
[1] 1: BA81 (BA81)
[1] Selected palette BA81
[1] Test palette BA81 (480x640)
[1] Adjusting resolution from 480x640 to 160x120.
[1] Using palette BA81 (160x120) bytesperlines 160 sizeimage 19200 colorspace 00000008
[1] found control 0x00980900, "Brightness", range 0,255 
[1]     "Brightness", default 127, current 127
[1] found control 0x00980911, "Exposure", range 0,1023 
[1]     "Exposure", default 66, current 66
[1] found control 0x00980912, "Automatic Gain (and Exposure)", range 0,1 
[1]     "Automatic Gain (and Exposure)", default 1, current 1
[1] found control 0x00980913, "Gain", range 0,255 
[1]     "Gain", default 127, current 127
[1] mmap information:
[1] frames=4
[1] 0 length=20480
[1] 1 length=20480
[1] 2 length=20480
[1] 3 length=20480
[1] Using V4L2
[1] Camera has finally become available
[1] Camera image has different width and height from what is in the config file. You should fix that
[1] Restarting Motion thread to reinitialize all image buffers to new picture dimensions
[1] Thread exiting
[1] Calling vid_close() from motion_cleanup
[1] Closing video device /dev/video0
[0] Motion thread 1 restart
[1] Thread 1 started
[1] config image height (120) is not modulo 16
[1] Could not fetch initial image from camera
[1] Motion continues using width and height from config file(s)
[1] Resizing pre_capture buffer to 1 items
[1] Started stream webcam server in port 8081
[1] Retrying until successful connection with camera
[1] config image height (120) is not modulo 16
[0] httpd - Finishing
[0] httpd Closing
[0] httpd thread exit
[1] Thread exiting
[0] Motion terminating 
```

相机上的灯在开始时亮起然后又熄灭，有人知道我遇到的任何错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T02:48:31.577

您的问题在日志中：

```
config image height (120) is not modulo 16 
```

所以你需要不同的图像分辨率。

查看您的设备支持什么

```
$ uvcdynctrl -f 
```

选择一个 y 分辨率为 16 倍数的分辨率。例如，如果为您的相机列出了 640x480。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:36:01.457

我认为您需要将 conf 文件中图像的高度和宽度设置为您的相机规格。在我设置高度 640 宽度 480 之前，我的没有工作。流很棒！只需要弄清楚webstream身份验证的补丁。目前我有这个需要登录的网络服务器的流式传输，但是如果有人输入我的 IP 加上我正在流式传输的端口，这可以绕过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:05:48.493

即使在*conf*文件中配置不同，motion 也会使用它在运行时检测到的可能分辨率（至少根据我的经验）。

此外，似乎在*conf*文件中设置了一个不受支持的调色板，并且动作选择了它检测为受支持的两个调色板之一。*您是否尝试在conf*文件中将调色板设置更改为“0”（S910） ？

最后，Pi 的 USB 支持存在一些关于大数据块的已知问题和目前尚未解决的问题。降低帧速率在其他情况下也可能有所帮助（在这种情况下，我认为我无济于事，因为该过程已经因第一张图像而失败）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-30T13:22:23.493

尝试`v2l4-ctl --list-format-ext`查看您的相机支持哪些像素格式和图像大小的组合。这`S910`是一款便宜的旧相机，您可能需要升级。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T12:06:45.783

我建议您尝试 guvcview 而不是运动。它运行得更快，并且在我的 Pi 上提供了更好的图像。它在 X 下运行。

guvcview 的两个注释 - 将 POWER LINE FREQUENCY 设置为您当地的电源频率。- 将分辨率设置为 640 x 480。

guvcview 需要大约 50% 的处理器功率。是的，也可以使用 USB 集线器！

嗯。

# python - 修改 pandas 中的 nan 索引

> ID：14181519
> 
> 赞同：2
> 
> 时间：2013-01-06T11:10:06.770
> 
> 标签：python, plot, pandas

[这个问题与 Pandas 中的Visually separator bar chart clusters](https://stackoverflow.com/questions/13983498/visually-separating-bar-chart-clusters-in-pandas)有点相关

我正在阅读并绘制 tmp.csv 文件：

```
pol1 pol2 pol3
perim 0.54 0.64 0.40
mst 0.08 0.12 0.12
treeadd 0.25 0.34 0.35
health 0.14 0.17 0.17
bisort 0.48 0.56 0.56
em3d 0.14 0.17 0.17

g721d 1.41 2.58 2.58
mesa 1.16 1.8 1.8
epic 1.82 2.43 2.43
jpege 1.18 1.68 1.68

gzip 1.15 1.43 1.45
vpr 0.19 0.24 0.24
gcc 0.82 1.11 1.15
mcf 0.05 0.05 0.05
crafty 0.67 1.17 1.17 
```

和：

```
#!/usr/bin/env python

from pandas import *
import matplotlib.pyplot as plt
from numpy import zeros

# Create original dataframe
df = read_csv('tmp.csv',sep='\s')

print df

df.plot(kind='bar')
plt.show() 
```

我得到：

```
 pol1  pol2  pol3
perim    0.54  0.64  0.40
mst      0.08  0.12  0.12
treeadd  0.25  0.34  0.35
health   0.14  0.17  0.17
bisort   0.48  0.56  0.56
em3d     0.14  0.17  0.17
nan       NaN   NaN   NaN
g721d    1.41  2.58  2.58
mesa     1.16  1.80  1.80
epic     1.82  2.43  2.43
jpege    1.18  1.68  1.68
nan       NaN   NaN   NaN
gzip     1.15  1.43  1.45
vpr      0.19  0.24  0.24
gcc      0.82  1.11  1.15
mcf      0.05  0.05  0.05
crafty   0.67  1.17  1.17 
```

和：

![在此处输入图像描述](../Images/2ecfc8254a0b716adb77a30adbd3cb7c.png)

注意用空线分隔簇。这就是我想要的效果。有没有办法在 x 轴上用“”替换“nan”标签？

我试过： df.rename(index={'nan': ""})

但是有一个断言失败

```
assert(new_axis.is_unique) 
```

可能是因为有多个 'nan' 索引 df。想法？

-谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:28:28.560

而不是修改`DataFrame`，也许只是改变 matplotlib xtick 标签：

```
import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_csv('tmp.csv', sep = '\s')
df.plot(kind='bar')
locs, labels = plt.xticks()
plt.xticks(locs, [d if d==d else '' for d in df.index], rotation = 25)
plt.show() 
```

![在此处输入图像描述](../Images/ea8d1d9458919741880fc264e3fc7d85.png)

# c++ - 带有工厂设计尝试的 Seg fault unique_ptr

> ID：14181522
> 
> 赞同：0
> 
> 时间：2013-01-06T11:10:15.117
> 
> 标签：c++, class, unique-ptr

我`segmentation fault`在尝试使用 a`unique_ptr`创建派生类的实例时遇到了问题。之前，我一个接一个地编写了七个派生类的每个实例化代码，并且代码工作正常。

当前代码如下：

```
typedef std::unique_ptr<Comum> ComumPtr;

ComumPtr createInstance ( string dom, map<string, string> & config, map<string, string> & config_fields )
{
    ComumPtr ptr;       // initialized to nullptr.
    if ( dom == "voice" ) {
    ptr.reset ( new Voice (config, config_fields) );
    //    } else if ( dom == "account" ) {     // FOR OTHER DERIVED CLASSES
    //  ptr.reset ( new Account (config, config_fields) );
    }
    return ptr;
}

// At  main function:
 for (vector<string>::const_iterator cit = for_domain.begin(); cit != for_domain.end(); ++cit) { 
    const char * section (cit->c_str());
    string fsn = *cit + "_fields";
    const char * fields_section_name (fsn.c_str());
    const char * db_section ("Database");

    map <string, string> domain_config = cfg.getSectionConfig (config_file.c_str(), section);
    map <string, string> domain_config_fields  = cfg.getSectionConfig (config_file.c_str(), fields_section_name);
    map <string, string> database_config = cfg.getSectionConfig (config_file.c_str(), db_section);

    std::unique_ptr<Comum> domain = createInstance(*cit, domain_config, domain_config_fields);

    domain->readDatabaseFields (database_config);   // <- segmentation fault 
```

您认为有什么理由会导致故障吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:21:56.087

`function createInstance`有机会返回**nullptr**，您需要检查指针是否有效：

```
if (domain.get())
{
  domain->readDatabaseFields (database_config);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:52:52.887

这一行是错误：

```
ComumPtr ptr;       // initialized to nullptr. 
```

虽然我知道 nullity 很*容易*，但它也是自责的最好方法（无论是在 C++ 还是 Java 中），因为现在需要检查对这个函数结果的任何一次使用。

相反，您可以：

*   使用 Null 对象：该方法`readDatabaseFields`什么也不做
*   选择抛出异常而不是返回空指针

上述替代方案没有一个天生就比另一个更好，这在很大程度上取决于情况；但是两者都比返回 null 好`unique_ptr`。

假设您选择异常方法：

```
ComumPtr createInstance ( string dom, map<string, string> & config, map<string, string> & config_fields )
{
    if ( dom == "voice" ) {
        return ComumPtr ( new Voice (config, config_fields) );
    } 
    if ( dom == "account" ) {
        return ComumPtr ( new Account (config, config_fields) );
    }

    throw std::runtime_error("Unknown config field");
} 
```

# sql-server-2008 - 使用 Entity Framework 一次插入多个表

> ID：14181525
> 
> 赞同：0
> 
> 时间：2013-01-06T11:10:22.520
> 
> 标签：sql-server-2008, entity-framework

不再是 SQL 开发的新事物，而是 EF 的新事物。

我有一些相关的表。我想知道 EF 是否可以在生成 IDENTITY 键的表中插入多行，然后是包含相关数据的表。

即将开始在 EF 上进行一些学习，但知道这是可能的会更加激励我（在学习该主题时让我在晚上保持更长时间）。

如果可能的话，这是我真正可以使用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:48:23.347

是的，您可以在使用实体框架时同时插入父数据和子数据（每个数据都是新的）。您可以查看[此博客文章](http://blog.aggregatedintelligence.com/2010/05/entity-framework-inserting-objects-with.html)以获取有关如何执行此操作的非常基本的示例。

# c# - 如何在 Resharper 中跳转到下一个参考？

> ID：14181529
> 
> 赞同：4
> 
> 时间：2013-01-06T11:12:01.530
> 
> 标签：c#, resharper, coderush

当我从 DevExpress 试用 CodeRush 时，有一个很棒的功能叫做[Tab to next reference](http://documentation.devexpress.com/#CodeRush/CustomDocument3864)。

Resharper 中是否有类似的功能？我正在使用`Shift`++来`Alt`调`F12`出“使用”上下文菜单，这很好，但使用起来比较慢。

编辑：我问是因为谷歌搜索什么也没找到。现在这个问题是谷歌搜索 Resharper 跳转到下一个参考的点 5。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T11:27:23.830

您可以使用

`Ctrl`+ `Shift`+ `Down`( `Up`) - IDEA 快捷方案

`Ctrl`+ `Alt`+ `PgDn`( `PgUp`) - Visual Studio 方案

还带来了所有用途的简短菜单

`Ctrl`+ `Alt`+ `F7`- IDEA 方案

`Shift`+ `Alt`+ `F12`- Visual Studio 方案

还

`Ctrl`+ `Shift`+`F7`

即使光标已经消失，也要突出显示用法。在屏幕截图中，我已修复`_ninjectKernel`并将光标放在模块变量上。`_ninjectKernel`和的用法之间的导航`module`由`Ctrl`+ `Alt`+完成`PgUp` （或`Up`用于 IDEA 方案）

![在此处输入图像描述](../Images/b35631bd4a0a8624a5932b658adbf21e.png)

# winapi - 将当前目录设置为末尾带有点的路径

> ID：14181531
> 
> 赞同：0
> 
> 时间：2013-01-06T11:12:35.503
> 
> 标签：winapi

Win32 SetCurrentDirectory() 函数未能将当前目录更改为以点结尾的路径，导致 GetLastError 2（系统找不到指定的文件。）。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:14:53.567

文件名不允许以点结尾，如果这样做，则无法保证行为。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx#naming_conventions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx#naming_conventions)

> 不要以空格或句点结尾的文件或目录名称。尽管底层文件系统可能支持此类名称，但 Windows shell 和用户界面不支持。

# c# - 无法将所选项目从 DropDownList 设置为控制器

> ID：14181537
> 
> 赞同：0
> 
> 时间：2013-01-06T11:13:11.837
> 
> 标签：c#, asp.net-mvc, ef-code-first

在我看来，DropDownList 显示了正确的字段，但是当我在“编辑或创建”中选择一个时，该字段将被保存/修改为 NULL。调试时我可以看到没有发送新值。我认为 ID 和 SurveyID 之间存在不匹配...

看法：

```
@model Project_ASP_2012.Models.QuestionGroup

@{
ViewBag.Title = "Edit";
}

<h2>Edit</h2>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>QuestionGroup</legend>

    @Html.HiddenFor(model => model.ID)

    <div class="editor-label">
        @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Description)
        @Html.ValidationMessageFor(model => model.Description)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.SurveyID, "Survey")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Id", String.Empty)
        @Html.ValidationMessageFor(model => model.SurveyID)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
}

<div>
@Html.ActionLink("Back to List", "Index")
</div>

 @section Scripts {
@Scripts.Render("~/bundles/jqueryval")
} 
```

模型：

```
public class Survey : IEntity
{

    [Key]
    [Display(Name = "SurveyID")]
    public int ID { get; set; }

    [Required(ErrorMessage = "Survey title is required.")]
    [Display(Name = "Survey Title")]
    [MaxLength(20, ErrorMessage = "Title cannot be longer than 20 characters.")]
    public string Title { get; set; }

    [MaxLength(50, ErrorMessage = "Description cannot be longer than 50 characters.")]
    public string Description { get; set; }

    public virtual ICollection<QuestionGroup> QuestionGroups { get; set; }

}

public class QuestionGroup : IEntity
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    [MaxLength(50, ErrorMessage = "Description cannot be longer than 50 characters.")]
    public string Description { get; set; }

    [Display(Name = "SurveyID")]
    public int? SurveyID { get; set; }

    public virtual Survey Survey { get; set; }

} 
```

控制器：

```
 public ActionResult Edit(int id)
    {
        QuestionGroup questiongroup = unitOfWork.QuestionGroupRepository.GetById(id);
        if (questiongroup == null)
        {
            return HttpNotFound();
        }

        PopulateSurveysDropDownList(questiongroup.SurveyID);
        return View(questiongroup);
    }

    //
    // POST: /QuestionGroup/Edit/5

    [HttpPost]
    public ActionResult Edit(QuestionGroup questiongroup)
    {
        try
        {
           if (ModelState.IsValid)
            {
                unitOfWork.UoWContext.Entry(questiongroup).State = EntityState.Modified;
                unitOfWork.SaveChanges();
                return RedirectToAction("Index");
            }
        }
        catch (DataException)
        {
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists see your system administrator.");
        }
        PopulateSurveysDropDownList(questiongroup.SurveyID);
        return View(questiongroup);
    }

    private void PopulateSurveysDropDownList(object selectedSurvey = null)
    {
        var surveyQuery = unitOfWork.SurveyRepository.Get(
            orderBy: q => q.OrderBy(d => d.Title));
        ViewBag.Id = new SelectList(surveyQuery, "Id", "Title", selectedSurvey);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T00:51:40.767

尝试改变：

```
private void PopulateSurveysDropDownList(object selectedSurvey = null)
{
    var surveyQuery = unitOfWork.SurveyRepository.Get(
        orderBy: q => q.OrderBy(d => d.Title));
    ViewBag.Id = new SelectList(surveyQuery, "Id", "Title", selectedSurvey);
}

....

<div class="editor-field">
    @Html.DropDownList("Id", String.Empty)
    @Html.ValidationMessageFor(model => model.SurveyID)
</div> 
```

至：

```
private void PopulateSurveysDropDownList(object selectedSurvey = null)
{
    var surveyQuery = unitOfWork.SurveyRepository.Get(
        orderBy: q => q.OrderBy(d => d.Title));
    //don't provide the select value here.  you will bind to it in your view
    ViewBag.SurveySelectList = new SelectList(surveyQuery, "Id", "Title");
}

....

<div class="editor-field">
    //selected value will be whatever SurveyID is on your model.
    @Html.DropDownListFor(model => model.SurveyID, ViewBag.SurveySelectList, String.Empty)
    @Html.ValidationMessageFor(model => model.SurveyID)
</div> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:21:59.987

在您看来，您有 Id 而不是 SurveyId 的下拉菜单。另外，您有两次 ID - 在下拉列表和隐藏字段中。

```
<div class="editor-field">
    @Html.DropDownList("Id", String.Empty)
    @Html.ValidationMessageFor(model => model.SurveyID)
</div> 
```

# sql - 从存储过程中选择前 0 * INTO #temp

> ID：14181541
> 
> 赞同：0
> 
> 时间：2013-01-06T11:13:44.107
> 
> 标签：sql, sql-server, select, stored-procedures

```
select top 0 * INTO #temp from stored procedure 
```

需要根据存储过程返回的数据类型的结构创建临时表。使用 sql server 2000,2005, 0r 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:06:01.040

你不能这样做。要从存储过程中获取结果，您必须首先定义结果的结构：

```
create table #temp ( . . . );
insert into #temp
    exec(stored procedure) 
```

如果您检查`SELECT`语句的语法（[此处](http://msdn.microsoft.com/en-us/library/ms189499%28v=sql.105%29.aspx)），您将看不到对运行存储过程的引用。

也许您应该发布另一个问题来描述您正在尝试做什么。为什么存储过程会返回不同的结果格式？

# iphone - obj c uiwebview 响应式 html

> ID：14181543
> 
> 赞同：0
> 
> 时间：2013-01-06T11:13:59.123
> 
> 标签：iphone, html, objective-c, ios, uiwebview

我想在 uiwebview (xcode) 中加载响应式 html，但页面没有调整自身，因为它是响应式 html。当我在其他 iphone 浏览器中尝试相同的文件时，它正在显示调整后的内容，即调整后的内容。我不想为此使用phonegap。在这种情况下如何显示响应式 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:21:30.550

您可能会检查以下几件事：

1.  尝试在响应式 HTML 中定义（或取消定义）视口，例如：

    ```
    <meta name="viewport" content="width=320,user-scalable=yes,initial-scale=1.0"> 
    ```

2.  通过设置检查情况是否有所改善`scalesPageToFit`：

> 如果将此设置为 YES，则网页将缩放以适合用户，并且用户可以放大和缩小。如果否，则禁用用户缩放。默认值为 NO。

但这些只是在黑暗中拍摄，因为您没有提供有关您做事的方式以及究竟什么不起作用的信息。无论如何，我希望它有所帮助。

# node.js - 管理 http 会话，nodeJS

> ID：14181547
> 
> 赞同：0
> 
> 时间：2013-01-06T11:14:24.737
> 
> 标签：node.js, cookies, webserver

我正在 nodeJS 中构建一个 HTTP 服务器（作业分配），我需要使用 cookie 管理 HTTP 会话 - 对于每个会话，我都会发送一个带有`UUID`（字符串 ID）的 cookie，然后当我取回它时，我会重置会话的计时器。

我的问题：我应该为每个请求（例如，甚至是图像/css 请求）还是为每个页面打开一个会话？

这是我现在的代码：

```
socket.on('data',function(data) {
    //some code
    // if no UUID exsit in request, create one for it
    var request = new REQUEST.Request(data, resourceMap, rootFolder); //
    //response will send the UUID created/sent in request
    var response = new RESPONSE.Response(socket,request);
    session(request); // look for uuid from request in data base
} 
```

现在，当我加载页面时，`html`请求始终是第一个请求，并且会为其创建一个新的 UUID，但不会为该页面中的下一个请求（图像等）创建一个新的 UUID。此外，当我点击指向另一个页面的链接时，不会创建 UUID。

任何想法为什么？检查现有 UUID 并在不存在时添加一个的最佳位置在哪里？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:51:34.180

您应该为一个会话创建一个会话。:) 不是每个请求。

在会话中，您可以设置 UUID。

有很多资源可以帮助你。如果您的教授允许您使用图书馆，我强烈建议您检查您的选择。这只是几个：[https ://github.com/joyent/node/wiki/modules](https://github.com/joyent/node/wiki/modules)

因为这是家庭作业问题，我认为你最好只找到“答案”的方向

祝你好运

# android - 数据库代码在每个 android API 上崩溃，但 4.1

> ID：14181548
> 
> 赞同：0
> 
> 时间：2013-01-06T11:14:37.363
> 
> 标签：android, sql, database, android-sqlite

我有一些代码是关于将填充的数据库复制到 android 中的 sqlite 数据库中。

我已经使用 android API 4.1 版测试了我的所有代码。但是现在当我尝试从 db 获取查询时，所有其他版本都会崩溃。这是 dbHelper 的代码：

```
package com.rasta.ghavanin;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

    public class DatabaseHelper extends SQLiteOpenHelper{

    //The Androids default system path of your application database.
    private static String DB_PATH = "/data/data/com.rasta.ghavanin/databases/";

    private static String DB_NAME;
    private static String COLUMN_ID_NAME = "_id";
    private static String COLUMN_DESC_NAME = "Description";

    private SQLiteDatabase DataBase; 

    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DatabaseHelper(Context context , String DBName) {

        super(context, DBName, null, 1);
        DB_NAME = DBName;
        this.myContext = context;
    }   

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        //By calling this method and empty database will be created into the default system path
        //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();

        try 
        {
            copyDataBase();
        }
        catch (IOException e) 
        {
            throw new Error("Error copying database");
        }
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    // this method simply open the database
    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        DataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }

    @Override
    public synchronized void close() {

            if(DataBase != null)
                DataBase.close();

            super.close();

    }

    public String getLaw(int lawID)
    {
        String[] columnNames = { COLUMN_ID_NAME, COLUMN_DESC_NAME};
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query("Laws", columnNames, COLUMN_ID_NAME + "=?",
                new String[] { String.valueOf(lawID) }, null, null, null, null);

        if (cursor != null)
        {
            cursor.moveToFirst();
            return cursor.getString(1);
        }
        else
        {
            return "salam :D";
        }
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

    // Add your public helper methods to access and get content from the database.
    // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
    // to you to create adapters for your views.

} 
```

这是logcat，全部都是：D

```
01-06 15:10:39.554: D/dalvikvm(562): Not late-enabling CheckJNI (already on)
01-06 15:10:40.254: I/dalvikvm(562): Turning on JNI app bug workarounds for target SDK version 8...
01-06 15:10:42.214: D/gralloc_goldfish(562): Emulator without GPU emulation detected.
01-06 15:10:46.974: D/dalvikvm(562): GC_CONCURRENT freed 160K, 3% free 10163K/10439K, paused 7ms+8ms
01-06 15:10:47.304: I/SqliteDatabaseCpp(562): sqlite returned: error code = 1, msg = no such table: Laws, db=/data/data/com.rasta.ghavanin/databases/Constitution
01-06 15:10:47.316: D/AndroidRuntime(562): Shutting down VM
01-06 15:10:47.324: W/dalvikvm(562): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
01-06 15:10:47.384: E/AndroidRuntime(562): FATAL EXCEPTION: main
01-06 15:10:47.384: E/AndroidRuntime(562): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rasta.ghavanin/com.rasta.ghavanin.ViewActivity}: android.database.sqlite.SQLiteException: no such table: Laws: , while compiling: SELECT _id, Description FROM Laws WHERE _id=?
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.os.Looper.loop(Looper.java:137)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-06 15:10:47.384: E/AndroidRuntime(562):  at java.lang.reflect.Method.invokeNative(Native Method)
01-06 15:10:47.384: E/AndroidRuntime(562):  at java.lang.reflect.Method.invoke(Method.java:511)
01-06 15:10:47.384: E/AndroidRuntime(562):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-06 15:10:47.384: E/AndroidRuntime(562):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-06 15:10:47.384: E/AndroidRuntime(562):  at dalvik.system.NativeStart.main(Native Method)
01-06 15:10:47.384: E/AndroidRuntime(562): Caused by: android.database.sqlite.SQLiteException: no such table: Laws: , while compiling: SELECT _id, Description FROM Laws WHERE _id=?
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1523)
01-06 15:10:47.384: E/AndroidRuntime(562):  at com.rasta.ghavanin.DatabaseHelper.getLaw(DatabaseHelper.java:111)
01-06 15:10:47.384: E/AndroidRuntime(562):  at com.rasta.ghavanin.ViewActivity.updateDescription(ViewActivity.java:110)
01-06 15:10:47.384: E/AndroidRuntime(562):  at com.rasta.ghavanin.ViewActivity.onCreate(ViewActivity.java:82)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.app.Activity.performCreate(Activity.java:4465)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-06 15:10:47.384: E/AndroidRuntime(562):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
01-06 15:10:47.384: E/AndroidRuntime(562):  ... 11 more
01-06 15:10:50.554: I/Process(562): Sending signal. PID: 562 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T16:25:16.830

终于解决了。

当您在 android 中创建数据库时，它会自动将名为 android_metadata 的表添加到数据库中。现在，因为我正在使用流复制我的外部数据库，所以我正在重写整个文件，因此 4.1 之前的 API 所需的 android_metadata 必须手动添加到外部数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:32:21.807

在没有表定义的情况下诊断这个有点棘手，但我可以告诉你。关键错误在此语句中：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.rasta.ghavanin/com.rasta.ghavanin.ViewActivity}：android.database.sqlite.SQLiteException：没有这样的表：法律：，编译时：SELECT _id，描述 FROM法律 WHERE _id=?

请注意，它说没有`TABLE Laws`. 不知何故，这并没有在您正在测试的每个模拟器上导入。一些提示。

1.  应该只有一个位置来获取数据库路径，所有其他功能都应该引用它。这将避免任何混淆，并在以后需要时更容易更改。
2.  正如 Doomsknight 建议的那样，您最好使用 absolutePath 作为此参考。
3.  我会尝试[通过 adb 使用 sqlite](http://developer.android.com/tools/help/adb.html#shellcommands)来查看数据库是否正确。我怀疑当你这样做时，问题就会显现出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:53:41.787

要获取数据库路径，您应该真正使用类似的东西

```
String myPath = myContext.getDatabasePath(DB_NAME).getAbsolutePath(); 
```

而不是你所做的方式`DB_PATH + DB_NAME`

有几个地方你已经这样做了。不确定它会解决问题，但值得一试。并且无论哪种方式都是更好的做法。

（您已硬编码 DB_PATH 不`/data/data/com.rasta.ghavanin/databases/`理想）

# http-status-code-404 - 为什么我的 Flask 应用程序处理对不同且不熟悉的域 (http://imagefreak007.com/2ch.php) 的请求？

> ID：14181552
> 
> 赞同：1
> 
> 时间：2013-01-06T11:14:51.343
> 
> 标签：http-status-code-404, flask

我有一个在域上运行的 Flask 应用程序 - 比如说 abc.com。它记录所有 404 错误，以便我可以查看它们，并在日志中包含 request.url 值。这很好用，但偶尔我会收到一个 request.url 值为“http://imagefreak007.com/2ch.php”的日志条目。它总是相同的 url - 相同的域和页面。

我认为请求对象，特别是 url 值，表明客户端试图访问的 url - 我认为它必须与运行 Flask 应用程序的域相同。我不确定 url 值来自哪里 - 它不是 Flask 应用程序的有意部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:44:27.333

**客户端总是可以谎报它试图访问的主机名。**如果您的站点是`example.com`，则以下将是正常的 HTTP 请求：

```
GET /some/path
Host: example.com 
```

您收到的请求也会发送到`example.com`，但可能类似于：

```
GET /2ch.php
Host: imagefreak007.com 
```

您可以使用以下命令进行尝试`telnet`：执行`telnet example.com 80`，然后在提示符中键入其中一个请求，最后按两次回车键。

# java - amazon AWS - 从 Web 下载图像并对其进行操作

> ID：14181554
> 
> 赞同：0
> 
> 时间：2013-01-06T11:15:00.027
> 
> 标签：java, image-processing, amazon-web-services, amazon

我想建立一个小项目。

我这样做：

1) 自动从已知互联网地址下载 RGB 图像到亚马逊 AWS。

2）将图像转换为灰度（最终会做更高级的图像处理）。

3）将灰度图像存储在亚马逊AWS中。

4) 能够在网络浏览器中查看/下载灰度图像。

我知道的编程语言是 matlab 和基本的 java（OOP 大学课程）。

有分步指南吗？

我应该从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T20:00:40.453

请阅读 java.net.HttpURLConnection 的文档以了解如何使用 Java 下载文件。

然后阅读[http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html)，其中介绍了如何下载和上传到 Amazon S3。以下是来自 Java 的 S3 示例：

```
//---------------------------------------------------------------------     
// Amazon S3
//---------------------------------------------------------------------     
class S3 extends AmazonS3Client
 {final String bucket;
  S3(String u, String p, String Bucket)
   {super(new BasicAWSCredentials(u, p));
    bucket = Bucket;
   }
  boolean put(String k, String v)      
   {try 
     {final ByteArrayInputStream b = new ByteArrayInputStream(v.toString().getBytes());
      putObject(bucket, k, b, new ObjectMetadata());
      setObjectAcl(bucket, k, CannedAccessControlList.PublicRead);  // Has to be here to allow change to reduced redundancy
      changeObjectStorageClass(bucket, k, StorageClass.ReducedRedundancy);
      setObjectAcl(bucket, k, CannedAccessControlList.PublicRead);  // Has to be repeated because it is now a new object again
      return true; 
     }
    catch(Exception e) {log("Cannot put "+bucket+"/"+k+" to S3 because "+e);}
    return false; 
   }
  String get(String k) 
   {try 
     {final S3Object f = getObject(bucket, k);
      final BufferedInputStream i = new BufferedInputStream(f.getObjectContent());  
      final StringBuilder s = new StringBuilder(); 
      final byte[]b = new byte[1024];
      for(int n = i.read(b); n != -1; n = i.read(b)) {s.append(new String(b, 0, n));}
      return s.toString(); 
     }
    catch(Exception e) {log("Cannot get "+bucket+"/"+k+" from S3 because "+e);}
    return null; 
   }
  String[]list(String d) 
   {try 
     {final ObjectListing l = listObjects(bucket, d);
      final List<S3ObjectSummary> L = l.getObjectSummaries(); 
      final int n = L.size();
      final String[]s = new String[n];  
      for(int i = 0; i < n; ++i)
       {final S3ObjectSummary k = L.get(i);
        s[i] = k.getKey();
       } 
      return s; 
     }
    catch(Exception e) {log("Cannot list "+bucket+"/"+d+" on S3 because "+e);}
    return new String[]{}; 
   }
 } 
```

}

在 Amazon S3 上获得图像后，您可以使文件公开可见，从而可以在任何 Web 浏览器中显示。

# javascript - 在保存模型之前等待更改处理程序完成

> ID：14181558
> 
> 赞同：0
> 
> 时间：2013-01-06T11:16:24.437
> 
> 标签：javascript, events, backbone.js

我有一个用户模型（Backbone.js），我想更新其设置属性，然后将其保存到服务器。设置是 JSON 格式，我设置它的方式是设置是字符串版本，settingsJSON 是对象版本。我将函数绑定到每个函数的更改事件，以便当一个函数更改时，它会更新另一个函数。

我遇到的问题是 save 方法在更改的处理程序完成运行之前运行。有什么办法可以确保该模型的所有事件处理程序都是完整的或类似的东西？

我怎么称呼它：

```
currentUser.get('settingsJSON').apps = appsEnabled;
currentUser.save(); 
```

我的事件处理程序：

```
Initialize: function() {
    var that = this;
    this.on("change:settingsJSON", function(model){
        model.set({settings: JSON.stringify(model.get('settingsJSON'))});
    });

    this.on("change:settings", function(model){
        model.set({settingsJSON: JSON.parse(model.get('settings'))});
    });
} 
```

@fencliff：

当我运行它并正常工作时，更改事件正在触发，我让它将新的设置字符串打印到控制台。

你确定它们是同步调用的吗？我添加`console.log('changed')`到末尾并在每次控制台读取时直接`.on(change)`放置：`console.log('saved')``currentUser.save()`

```
saved
changed 
```

现在我已经完成了，以便在保存之前直接将 JSON 字符串保存到设置中，并且效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:21:13.987

主干事件是同步执行的。这意味着除非您（或某个库）覆盖了事件处理的某些部分，否则一旦您执行下一行代码，更改处理程序就会处理。

在您的代码示例中，还有另一个问题。你打电话时

```
user.get('settingsJSON').apps = appsEnabled; 
```

该`change`事件**不会**触发，因为 的值`settingsJSON`没有改变，只是对象的内容被修改了。`model.attributes.settingsJSON`仍然是和以前一样的对象。

仅当您调用`set`该属性时才会触发事件，并且新值是**不同**的对象。例如：

```
user.set('settingsJSON', _.extend({}, user.get('settingsJSON'), {apps:appsEnabled}); 
```

另一个问题似乎是，如果您的事件处理程序被触发，将导致`change`事件为第一次设置的属性触发两次：

```
this.on("change:settingsJSON", function(model){
    //-> changes settings, and set triggers change
    model.set({settings: JSON.stringify(model.get('settingsJSON'))});
});

this.on("change:settings", function(model){
    //-> changes settingsJSON, and set triggers change
    model.set({settingsJSON: JSON.parse(model.get('settings'))});
}); 
```

要解决该问题，请直接调用`set`或`{silent:true}`修改`model.attributes`哈希。

**由@muistooshort**编辑并更正。****

 ****再次编辑**并进一步更正**

# scala - 使用特征时的 Scala 和菱形继承

> ID：14181559
> 
> 赞同：1
> 
> 时间：2013-01-06T11:16:39.513
> 
> 标签：scala, diamond-problem

给定特征：

```
trait HasSize {
  def size() : Int
}

trait StorageTrait extends HasSize {
  def something() : Unit
}

trait YetAnotherStorageTrait extends HasSize {
  def anotherSomething() : Unit
} 
```

我想创建类

```
class InMemoryStorage extends StorageTrait with YetAnotherStorageTrait {
   //...
} 
```

现在，StorageTrait 的方法**大小**返回与方法 YetAnotherStorageTrait 不同的东西（它仍然是一个大小，但具有不同的集合）。

在 Scala 中设计这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:25:23.350

如果我正确理解了这个问题，那么您有一个继承了对`size`方法响应不同的特征的类？那么没有办法解决这种歧义，而不是使用组合而不是mixin。

```
class InMemoryStorage
  def mainStorage: StorageTrait
  def auxStorage: YetAnotherStorageTrait

  def mainSize = mainStorage.size
  def auxSize  = auxStorage.size
} 
```

这就是你要照顾的吗？

# c++ - 动态数组改变内存地址位置

> ID：14181560
> 
> 赞同：0
> 
> 时间：2013-01-06T11:16:50.510
> 
> 标签：c++, arrays, pointers, dynamic

我有一个小问题，不太了解我想要做的语法。见下文：

```
float* ParticleSystem::GetMinLifeTime()
{
    return &minLifeTime;
} 
```

我想声明一个动态数组，然后将元素 0 的值更改为指向 minLifeTime 内存位置。到目前为止，我的尝试是：

```
float* lifeTimeNumbers = new float[LIFETIME_STRINGS_SIZE];

lifeTimeNumbers[0] = *activeParticleSystem->GetMinLifeTime(); 
```

不过我的理解是，我在将它们添加到数组时取消引用这些值。这不是我想要的。我真的很想将 lifeTimeNumbers[0] 的内存位置更改为 GetMinLifeTime() 返回的内存位置。我能做这样的事吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:20:08.023

您的问题主要是关于如何使用 Y 方法解决问题以实现 X。

方法 Y 真的毫无意义（这被称为**XY 问题**）。

不要专注于 Y，而是直接做 X：

```
#include <vector>

double ParticleSystem::minLifeTime() const
{
    return minLifeTime_;
}

int main()
{
    std::vector<double> lifeTimeNumbers;

    ParticleSystem activeParticleSystem = ...;
    lifeTimeNumbers.push_back( activeParticleSystem.minLifeTime() );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:18:38.920

您不能更改数组 [0] 的地址，因为数组基本上是一个内存区域，而不是数字而不是单个指针。

您的“问题”可以使用 **.. 来完成，然后您可以让 [0] 存储指向该值的指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:22:37.633

你想要的是一个指向浮点数的指针数组，而不是一个浮点数数组。为此，您必须像这样声明数组

```
float** lifeTimeNumbers = new float*[LIFETIME_STRINGS_SIZE];
lifeTimeNumbers[0] = activeParticleSystem->GetMinLifeTime(); 
```

但为什么不只使用这样的矢量容器

```
std::vector<float*> vec;
vec.push_back(activeParticleSystem->GetMinLifeTime()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T11:18:47.903

> 我真的很想将 lifeTimeNumbers[0] 的内存位置更改为 GetMinLifeTime() 返回的内存位置

您需要做的就是：

```
float *lifeTimeNumbers = activeParticleSystem->GetMinLifetime(); 
```

现在你有一个指向数组第一个元素的指针。

# xml - Grails 在 csv 和 xml 中嵌入图像

> ID：14181561
> 
> 赞同：0
> 
> 时间：2013-01-06T11:16:53.610
> 
> 标签：xml, image, grails, csv, groovy

无论如何，在 csv 和 xml 中是否有 50x50 的缩略图？我正在使用grails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:31:43.767

您可以将图像转换为 Base64 并嵌入字节数据。这有时在 css 和其他媒体（如数据库）中完成。这是一个简单的例子......

将图像编码为 CSV 文件...

```
def csvFile = new File('my_csv.csv');  
def imageFile = new File('./images/thumbnail.png');    
String imageData = imageFile.bytes.encodeBase64().toString();

csvFile.append("${image.name}, ${imageData}"); //<-- write image name and data 
```

解码图像也很容易......

```
byte[] imageBytes = imageData.decodeBase64();
imageFile = new File('./images/decoded/thumbnail.png');
imageFile.setBytes(imageBytes); 
```

# android - 从另一个线程停止传感器

> ID：14181563
> 
> 赞同：0
> 
> 时间：2013-01-06T11:16:59.200
> 
> 标签：android, multithreading, android-sensors

在执行某些操作后，我想从另一个线程或类停止传感器管理器活动（取消注册）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:35:32.457

看这里。它可能会帮助你。

ShakeListener.java

```
Made Instance variable in ShakeListener class.
private Sensor accelerometer;
SensorManager sensorManager;

public ShakeListener(Context context) {
    sensorManager = (SensorManager)this.context.getSystemService(Context.SENSOR_SERVICE);
    accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    sensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL);
} 
```

从另一个线程或类中注销。

做这个：

```
private ShakeListener shakeListener;  //Instance variable
shakeListener = new ShakeListener(this);
shakeListener.sensorManager.unregisterListener(shakeListener, shakeListener.sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER)); 
```

# android - 为什么在我的应用程序中没有使用 WebView 加载 Url

> ID：14181565
> 
> 赞同：0
> 
> 时间：2013-01-06T11:18:02.517
> 
> 标签：android, android-intent, android-webview

乳清我写了下面的代码，网址在默认浏览器中打开，为什么它没有加载到我的应用程序中。

```
setContentView(R.layout.activity_main);
myWebView = (WebView) findViewById(R.id.webView);
myWebView.loadUrl("http://www.google.com"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:23:47.073

尝试`WebViewClient`在`WebView`:

```
myWebView.setWebViewClient(new WebViewClient() {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;
    }
});
myWebView.loadUrl("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-10T12:50:43.913

也许你想要这个解决方案：

```
WebView webview = findViewById(R.id.webviewLW);
webview = new WebView(this);
webview.getSettings().setLoadsImagesAutomatically(true);
webview.getSettings().setJavaScriptEnabled(true);
webview.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

webviewLWComplience.setWebViewClient(new WebViewClient() {
        @SuppressWarnings("deprecation")
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Toast.makeText(MainActivity.this, description, Toast.LENGTH_SHORT).show();
        }

        @TargetApi(android.os.Build.VERSION_CODES.M)
        @Override
        public void onReceivedError(WebView view, WebResourceRequest req, WebResourceError rerr) {
            // Redirect to deprecated method, so you can use it in all SDK versions
            onReceivedError(view, rerr.getErrorCode(), rerr.getDescription().toString(), req.getUrl().toString());
        }
    });

webviewLWComplience.loadUrl(CONSTANTS.HOST_URL);
setContentView(webviewLWComplience); 
```

不要忘记添加权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

还要检查这个链接：[https ://stackoverflow.com/a/7306176](https://stackoverflow.com/a/7306176)

# javascript - 使用 CSS 或 Javascript 隐藏元素

> ID：14181566
> 
> 赞同：2
> 
> 时间：2013-01-06T11:18:05.043
> 
> 标签：javascript, css

我的 HTML 页面中有这个元素：

```
<a style="display:block;width:728px;height:90px;margin:0 auto;background:#EEE url('/_images/2011images/img_dotco_3.jpg') no-repeat top left; text-decoration:none;color:#000;" href="/domain-registration/dotco-overview.aspx?sourceid=bnrq2co728x90">
       <span style="float:right;margin:5px 27px 0 0;width:110px;color:#FFF;text-align:center">
          <span style="display:block;font-size:1em;text-align:center">NOW ONLY</span> 
          <strong style="display:block;font-size:1.6em;text-align:center"><!-- START TAG // Co_RegisterPrice_TLD -->
   <span class="Tag_Co_RegisterPrice_TLD"><strong>$35.70</strong>/yr</span>
<!-- End TAG // Co_RegisterPrice_TLD --></strong>       
       </span>    
    </a> 
```

我需要用 CSS 或 Javascript 隐藏它。CSS 将是最好的方案，但 Javascript 也可以。事实是我根本无法编辑 HTML 代码，所以我无法直接删除该项目。这也不是任何其他 HTML 元素的父元素，所以我找不到用 CSS 隐藏它的简单方法。

此外，即使背景图像更改或链接更改，我也需要隐藏此 A 元素，实际上它并不总是相同的。

我报告了所有可用的 HTML。这是一个示例[http://subdir.co/help-center/default.aspx](http://subdir.co/help-center/default.aspx) 它是那里的顶部横幅。让我知道如何从页面中隐藏它。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T11:31:51.673

尝试使用 jQuery：

```
$('a[href^="/domain-registration/dotco-overview.aspx?sourceid"]').hide(); 
```

这会隐藏带有以开头`a`的属性的标签。`href``/domain-registration/dotco-overview.aspx?sourceid`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-29T20:59:35.300

利用：

```
document.getElementById('yourElementId').display=none; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:49:50.607

[**jsFiddle 类名方法 DEMO**](http://jsfiddle.net/F4Gyv/)

**jQuery via Classname：**在这种方法中，我们“查看”锚点以寻找线索。

```
$(document).ready(function () {

  // To disable the line below, just comment it out just like this line is.
  $('.Tag_Co_RegisterPrice_TLD').closest('a').hide();

}); 
```

* * *

[**jsFiddle ID方法DEMO**](http://jsfiddle.net/NqKe7/)

**jQuery via ID：**这一次，我们不看内部，因为**任何事情都**可能改变。我们现在使用**div**引用！

```
$(document).ready(function () {

  // To disable the line below, just comment it out just like this line is.
  // No matter the unique ID code in front of MasterUpdatePanel Div, it will always be matched.
  $('[id$="MasterUpdatePanel"]').next('a').hide();

}); 
```

此处显示的是 HTML 页面的 Firefox 屏幕截图。注意 div ID 包含`ctl00_MasterUpdatePanel`. 前面的字母、数字和下划线可能会改变，但这个关键字不会。因此，作品的“结局部分”的匹配`id`！

![在此处输入图像描述](../Images/76e48ff20abe9c7631cb9638aae8959b.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T11:36:03.427

由于您无法更改 HTML 代码，因此您无法向元素添加标识符以选择和操作它。

但是您可以使用 jQuery 选择第一个 'a' 元素，并将 'display' 属性设置为 'none'。

我认为应该这样做：

```
$('a:first').css("display","none"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T11:36:53.723

你可以用css试试：

```
a[style][href] {
   display: none !important;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T11:29:06.257

我认为为 CSS 选择器添加类或制定一些规则是行不通的，因为元素属性中的定义会覆盖另一个样式定义。如果您使用一些 javascript 库来进行 dom 操作，例如 jQuery，这将很容易。

之后你可以写类似

```
$(".sCntSub3 > a").hide() 
```

您可以尝试从浏览器控制台中查找元素。这是如何验证您选择正确元素的简单方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-06T11:32:07.053

您可以从“Tag_Co_RegisterPrice_TLD”类中遍历 dom 树，找到可以隐藏的 A 标签。

如果您需要执行额外的逻辑，那么您可以在决定隐藏之前访问文本（例如价格/标题/网址）。

如果原始 javascript 对您来说太多，请使用 jQuery。

# perl - perl 中的@ISA 数组是什么？

> ID：14181570
> 
> 赞同：15
> 
> 时间：2013-01-06T11:18:24.170
> 
> 标签：perl

```
our @ISA = "Critter"; 
```

我会在什么情况下使用`@ISA`？

为什么`our @ISA`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-06T11:35:31.620

为了扩展 Mat 的评论，类似这样的内容在[`perldocs`](http://perldoc.perl.org/).

关于`@ISA`，[这就是它所说的](http://perldoc.perl.org/perlobj.html#A-Class-is-Simply-a-Package)：

> ## 一个类只是一个包
> 
> ...
> 
> 每个包都包含一个特殊的数组，称为`@ISA`. 该`@ISA`数组包含该类的父类的列表（如果有）。当 Perl 进行方法解析时会检查这个数组，我们稍后会介绍。
> 
> 可以手动设置`@ISA`，您可能会在较旧的 Perl 代码中看到这一点。很多旧代码也使用`base`编译指示。对于新代码，我们建议您使用`parent`pragma 来声明您的父母。这个 pragma 将负责设置`@ISA`。它还将加载父类并确保包不会从自身继承。
> 
> 无论父类如何设置，包的`@ISA`变量将包含这些父类的列表。这只是一个标量列表，每个标量都是对应于包名称的字符串。

`our`并`@ISA`齐头并进，因为`@ISA`预计将是一个包变量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-22T02:17:02.230

@ISA 代表'is a'，表示数组包含父母的包

# z3 - Z3 如何处理包含未解释函数的 forall 命题？

> ID：14181576
> 
> 赞同：1
> 
> 时间：2013-01-06T11:19:59.843
> 
> 标签：z3, forall

假设我们有两个未解释的函数 func1 和 func2：

```
stuct_sort func1(struct_sort);
stuct_sort func2(struct_sort ,int). 
```

他们有这样的关系：

```
func2(p,n)=func1(p)  if n==1
func2(p,n)=func1(func2(p,n-1))  if n>1 
```

我想知道的是，如果以下命题：

```
((forall i:[1,m].func2(p,i)==Z)&&(q==func1(p))) implies (forall i:[1,m-1].func2(q,i)==Z) 
```

能在Z3中证明是真的吗？在我的程序中，证明结果是`Z3_L_UNDEF`.

当我给 m 赋值比如 3 时，现在的命题是

```
((forall i:[1,3].func2(p,i)==Z)&&(q==func1(p))) implies (forall i:[1,3-1].func2(q,i)==Z); 
```

结果是`Z3_L_UNDEF`。但是当我如下单独重写案例（不使用 forall）时，结果是`true`.

```
(func2(p,1)==Z)&&(func2(p,2)==Z)&&(func2(p,3)==Z)&&(q==func1(p)) implies (func2(q,1))&&(func2(q,2)). 
```

找不到原因，期待你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:29:29.280

我使用 Z3 Python 接口对您的问题进行了编码，Z3 解决了它。它为猜想找到了一个反例。当然，当我对问题进行编码时，我可能犯了一个错误。Python 代码在文章末尾。我们可以在[rise4fun](http://rise4fun.com/Z3Py/LSyW)在线试用。顺便说一句，您使用的是哪个版本的 Z3？我假设您使用的是 C API。如果是这样，您能否提供用于创建 Z3 公式的 C 代码？另一种可能性是创建一个日志来记录您的应用程序和 Z3 的交互。要创建日志文件，我们必须`Z3_open_log("z3.log");`在您执行任何其他 Z3 API 之前执行。我们可以使用日志文件来重放您的应用程序与 Z3 之间的所有交互。

```
from z3 import *
# Declare stuct_sort 
S = DeclareSort('stuct_sort')
I = IntSort()
# Declare functions func1 and func2
func1 = Function('func1', S, S)
func2 = Function('func2', S, I, S)

# More declarations
p = Const('p', S)
n = Int('n')
m = Int('m')
i = Int('i')
q = Const('q', S)
Z = Const('Z', S)

# Encoding of the relations 
#    func2(p,n)=func1(p)  if n==1
#    func2(p,n)=func1(func2(p,n-1))  if n>1
Relations = And(func2(p, 1) == func1(p), 
                ForAll([n], Implies(n > 1, func2(p, n) == func1(func2(p, n - 1)))))

# Increase the maximum line width for the Z3 Python formula pretty printer
set_option(max_width=120)
print Relations

# Encoding of the conjecture
# ((forall i:[1,m].func2(p,i)==Z)&&(q==func1(p))) implies (forall i:[1,m-1].func2(q,i)==Z)
Conjecture = Implies(And(q == func1(p), ForAll([i], Implies(And(1 <= i, i <= m), func2(p, i) == Z))),
                     ForAll([i], Implies(And(1 <= i, i <= m - 1), func2(q, i) == Z)))
print Conjecture

prove(Implies(Relations, Conjecture)) 
```

# php - 当 StringBuilder 为 Null 时，它不会继续

> ID：14181585
> 
> 赞同：1
> 
> 时间：2013-01-06T11:22:08.347
> 
> 标签：php, android, mysql, stringbuilder

我是初级 Android 开发人员，我正在使用 JSON 从 Web 服务器上的 PHP 文件中获取数据，该文件从 MySql 数据库中获取数据

这是我的代码

```
public void onlinegetbooks() {

    try {

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("user",userid));

        HttpClient httpclient = new DefaultHttpClient(); 

        try{
            HttpPost httppost = new HttpPost("http://url/mybooks.php");

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        }catch(Exception e){
            Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
        }
        //buffered reader
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"), 80);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            resultt = sb.toString();

            System.out.println("in onlinegetbooks, resultt: "+resultt); 
            System.out.println("onlinegetbooks StringBuilder: "+sb);

        }catch(Exception e){
            Toast.makeText(getApplicationContext(), "invalid", Toast.LENGTH_LONG).show();
        }

                            resultt = resultt.substring(1);
            jArray = new JSONArray(resultt);
        System.out.println("in onlinegetbooks jArray.length(): "+jArray.length());

        try{

            JSONObject json_data = null;

            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i); 

                targetcover=json_data.getString("bo_cover_img");
                targetbname = json_data.getString("bo_name"); 
                targetbpath = json_data.getString("bo_path"); 
                targetbpartion=json_data.getString("bo_bg_id"); 
                targetauthname=json_data.getString("au_name");
                targetbokid=json_data.getString("bo_id");
                targetbokabout=json_data.getString("bo_about");

                coverr.add(targetcover); 
                bnamee.add(targetbname);
                bpathh.add(targetbpath );
                bpartionnn.add(targetbpartion);
                authnamee.add(targetauthname);
                bokiddd.add(targetbokid);
                bokabouttt.add(targetbokabout);

            }

            fflage=true;

    }catch(JSONException e){
            Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
        }   
    } catch (ParseException e) {
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
    }  
    catch (Exception e) {
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
    }       

} 
```

我在下面的代码中调用这个函数

```
private class LoadData extends AsyncTask<Void, Void, Void> { 
    private ProgressDialog progressDialog;  

    @Override

    protected void onPreExecute() {

        CharSequence contentTitle = getString(R.string.loginning);
        this.progressDialog = ProgressDialog.show(loginActivity.this,"",contentTitle); 

    }

    @Override
    protected void onPostExecute(final Void unused) {  
        this.progressDialog.dismiss();  

        if(fflage){

        Intent myBooks = new Intent(getApplicationContext(),TabsOFBooks.class);

        myBooks.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(myBooks);
        finish(); 

        } else {
            Toast.makeText(getApplicationContext(),R.string.noinfo, Toast.LENGTH_LONG).show();
        }

    }

    @Override
    protected Void doInBackground(Void... params) {

        try{
            bk.deletetable();
            recb.deletetable();
            mosb.deletetable();
            frboks.deletetable();
            ggp.deletetable();

        addusers();
        onlinegetbooks();
        addmybooks();

        onlinerecentbooks();

        fflage=true;
        }
        catch (Exception e) {
            System.out.println("No Information");

        }

        return null;

    }

} 
```

我的问题在`resultt = sb.toString();`

当不在继续代码中的其他行并且不打印此`resultt`行时`Null`

```
System.out.println("in onlinegetbooks jArray.length(): "+jArray.length()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:53:09.383

目前您正在尝试显示来自 doInBackground 的 Toast 消息，这是不可能的，因为我们无法从 AsyncTask 的 doInBackground 方法访问 UI 元素。当 doInBackground 执行完成时，您可以更改 AsyncTask 类以更新 UI

```
private class LoadData extends AsyncTask<Void, Void, Void> { 
    private ProgressDialog progressDialog;  

    @Override

    protected void onPreExecute() {

    }

    @Override
    protected Void doInBackground(Void... params) {

        // call your methods here for getting data from server

        return null;

    }

     @Override
    protected void onPostExecute(final Void unused) {  
        this.progressDialog.dismiss();  
          // show toast messages or UI date UI here 

    }

} 
```

# objective-c - 从 appdelegate 执行 segue

> ID：14181588
> 
> 赞同：1
> 
> 时间：2013-01-06T11:22:51.507
> 
> 标签：objective-c, cocoa-touch, uiwebview, appdelegate

我有以下代码：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    //make sure that the user credentials are still ok
    if (userLeftApplication){
        BaseViewController * baseViewController = [[BaseViewController alloc]init];
        BOOL detailsAreOK = [baseViewController credentialsValidated];
        if (!detailsAreOK){
            [self.window.rootViewController performSegueWithIdentifier: @"fromSplashToLogin" sender: self.window.rootViewController];
        }
        userLeftApplication = FALSE;
    }
} 
```

但是，尝试执行 segue 时出现以下异常：

```
Attempt to present <LoginViewController: 0x2012e180> on <FirstViewController: 0x1f59cef0> whose view is not in the window hierarchy! 
```

并且用户没有被引导到那里。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:34:55.323

rootViewController 当前未定义。您不能“从 App Delegate 执行转场”，转场是视图控制器之间的转换。您需要启动视图控制器而不是执行 segue。

```
self.window.rootViewController = baseViewController; 
```

# tinymce - 在从右到左（反之亦然）的句子或段落中编写从左到右的文本

> ID：14181590
> 
> 赞同：1
> 
> 时间：2013-01-06T11:23:00.050
> 
> 标签：tinymce

我在从右到左模式下使用 TinyMCE。有时我需要在段落或长句中使用从左到右的方向来纠正特定的单词或文本。

一个常见的例子是在文本中写一个电话号码：

```
لطفا با شماره تلفن +1 818 574 3696 تماس بگیرید 
```

此示例是否只有电话号码应该是从左到右才能正确显示为`+1 818 574 3696`.

我想知道在 TinyMCE 中是否有办法做到这一点，而无需手动编辑 HTML 代码。

# asp.net-mvc - $.data 未定义

> ID：14181597
> 
> 赞同：1
> 
> 时间：2013-01-06T11:24:27.063
> 
> 标签：asp.net-mvc, json

以下是我的 MVC razor 视图的标记：

```
<div style="visibility:visible;">
var data = [
        {"id":"1", "ui_bgcolor":"Green", "ui_forecolor": "Black"},
        {"id":"2", "ui_bgcolor":"Amber", "ui_forecolor": "Black"},
        {"id":"3", "ui_bgcolor":"Red", "ui_forecolor": "White"}
]
</div>

<script type="text/javascript">
    function SetGradeDLLItemStyling() {
        $.each(data, function (i) {
            alert(data[i].UIBackgroundColor);
        });
    }
</script> 
```

我在脚本块中收到 $.data is undefined 错误。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:27:56.323

数据未在脚本块中定义，因此不可用。

```
<script type="text/javascript">
var data = [
        {"id":"1", "ui_bgcolor":"Green", "ui_forecolor": "Black"},
        {"id":"2", "ui_bgcolor":"Amber", "ui_forecolor": "Black"},
        {"id":"3", "ui_bgcolor":"Red", "ui_forecolor": "White"}
]
</script> 
```

# iphone - 如何在uitableviewCell上添加按钮并在下一个单元格选择中删除上一个

> ID：14181600
> 
> 赞同：0
> 
> 时间：2013-01-06T11:24:56.123
> 
> 标签：iphone, uitableview

在我的 uitableview 中，我想在单元格上添加两个按钮，当用户选择某个特定单元格时。现在，如果用户选择另一个单元格，则应从最后一个选定的单元格中删除按钮并添加到新的选定单元格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:30:57.917

1.  在类级别保留对按钮的引用。
2.  当你想移动按钮调用`[self.myMovingbutton removeFromSuperview]`然后`[cell addSubview:self.myMovingButton]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:47:32.137

**。H**

```
NSIndexPath *selectedIndexPath; 
```

**.m**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //  . . Some Code . . .
    if ( selectedIndexPath.row = indexPath.row &&  selectedIndexPath.section = indexPath.section ) {
        button1.hidden = NO;
        button2.hidden = NO;
    } else {
        button1.hidden = YES;
        button2.hidden = YES;
    }
    //  . . Some Code . . .
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    selectedIndexPath = indexPath;
    [tableView relaodData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:33:39.690

子类`UITableViewCell`并将其添加`UIButton`为子类的属性。使用该属性来存储您的按钮实例。重新使用单元格时，您可以检查属性的值，以查看是否需要在添加新按钮之前删除旧按钮。

# javascript - 无法在 JavaScript 中获取对象的属性

> ID：14181602
> 
> 赞同：0
> 
> 时间：2013-01-06T11:25:05.440
> 
> 标签：javascript

我有以下代码：

```
 var userId = r.response[0].uid; 
     if (typeof ratings[userId] !== 'undefined'){
        ratings[userId].likes = ratings[userId].likes++;
        ratings[userId].name = r.response[0].first_name +" "+ r.response[0].last_name;
     } else {
        ratings[userId] = new Object;
        ratings[userId].likes = 1;                          
        ratings[userId].name = r.response[0].first_name +" "+ r.response[0].last_name; 
     } 
```

所以我有奇怪的事情。当我使用 console.log(ratings) 查看对象中的内容时，它会显示该对象的所有属性。但是当我尝试获得这样的任何属性时：

```
 console.log(ratings[12345]) or console.log(ratings["12345"]) 
```

它是未定义的。但`console.log(ratings)`我说我有财产 12345 （它也是一个对象）。我的代码有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-06T11:36:16.437

如果您使用数字作为用户的 ID，那么您必须使用

```
var userId = '12345';
ratings[userId]; 
```

或者

```
ratings['12345']; 
```

或者

```
ratings[12345+""]; // this is the last resort, if possibile don't use it! 
```

请记住，纯数字不允许作为 JavaScript 变量/键标识符，但如果它们被强制转换为字符串，那么您可以将它们用作对象中的键。

# iphone - Json SBJSON 错误 - 对 NSDictionary 感到困惑

> ID：14181606
> 
> 赞同：0
> 
> 时间：2013-01-06T11:25:40.757
> 
> 标签：iphone, json, dictionary

嗨，我是编程新手。

我对 NSDictionary 和 Table 单元格有一些问题。我试图找到好的教程，但没有找到任何可以帮助我的东西。我正在使用 JSONKit 来解析 json。我有旧版本的 xcode，只有模拟器 4.3。

我想做的是将我的 Json 解析成一个带有单元格的表格。

我要解析的json：

```
{[{"n_id":"1","name":"Green","age":"23"}]} 
```

我的主要问题。我没有收到任何错误，但是当我运行该应用程序时，它会自动关闭。当我注释掉 //cell.textLabel.text = [studName objectAtIndex:indexPath.row]; 并将其替换为 cell.textLabel.text = @"Test"; 该应用程序和输出工作正常。我也能得到 NSLog(); 价值观

我认为我的错误在 cell.textLabel.text = [studName objectAtIndex:indexPath.row]; 提前致谢

//Json2ViewController.m

```
- (void)viewDidLoad {
[super viewDidLoad];

NSData * JSONdata =[[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://myurl.php"]];

 if([JSONdata length] == 0){
 [JSONdata release];
 return;
 }

NSArray *students =[JSONdata objectFromJSONData];

studName = [[NSMutableArray alloc] init];

for(NSDictionary *student in students)
{
    NSLog(@"Name: %@", [student objectForKey:@"name"]);
    NSLog(@"Age: %@", [student objectForKey:@"age"]);

    content = [student objectForKey:@"name"];
    if(content)
       [studName addObject:content];

}

}

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...
cell.textLabel.text = [studName objectAtIndex:indexPath.row];
return cell; 
```

}

我不确定 NSMutableArray。

//Json2ViewController.h

```
@interface Json2ViewController : UIViewController {
NSArray * list;
NSString * content;
NSMutableArray *studName; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:26:46.633

试试这个：

```
 //Declare NSMutableArray *studName= [[NSMutableArray alloc] init]; in your .h file.
// 3\. iterate the array; each element is a dictionary...

 for (NSDictionary *results in list)
    {
        // 3 ...that contains a string for the key "stunde"
        content = [results objectForKey:@"n_name"];
        if(content)
            [studName addObject:content];
    } 
```

并在索引处的行的表委托方法单元格中

```
 // Configure the cell...
            cell.textLabel.text = [studName objectAtIndex:indexPath.row]; 
```

# javascript - 在现有表单中验证 ajax html 元素

> ID：14181610
> 
> 赞同：0
> 
> 时间：2013-01-06T11:26:11.040
> 
> 标签：javascript, html, ajax

我有一个带有选择框的表单（使用 jQuery Validate 验证），当更改时，它将新元素插入表单：

```
 ctype.on('change', function () {
    $.ajax({ url: '@Url.Action("GetDetails")', type: 'POST', data: { id: $(this).val(), cntr: $('#ID').val() } })
        .then(function (result) {

            $('#fields').html(result).show('clip', {}, 500);
        }, 
```

问题是我无法添加验证规则，因为这些新元素的 element.Form 属性为 null （这是非常正确的）。是否有任何解决方法或特殊程序来告知这些新元素属于该表单？（无论如何，发布请求已正确完成，我可以看到服务器端的所有数据）

# php - 拦截器不适用于 JMSAopBundle (Symfony2 AOP)

> ID：14181611
> 
> 赞同：2
> 
> 时间：2013-01-06T11:26:16.780
> 
> 标签：php, symfony, aop

我正在尝试在 Symfony2 上做一个方面，但我按照[http://jmsyst.com/bundles/JMSAopBundle](http://jmsyst.com/bundles/JMSAopBundle)中的说明进行操作，但找不到问题所在。这是我的 services.yml：

```
exception_pointcut:
        class:    AGF\Services\Aspects\Exceptions\ExceptionPointcut
        tags:
          - { name: jms_aop.pointcut, interceptor: exception_interceptor }  

exception_interceptor:
        class:    AGF\Services\Aspects\Exceptions\ExceptionInterceptor
        arguments: [@security.context, @logger] 
```

这是我的“切入点”：

```
<?php
namespace AGF\Services\Aspects\Exceptions;

use JMS\AopBundle\Aop\PointcutInterface;

class ExceptionPointcut implements PointcutInterface
    {

    public function matchesClass(\ReflectionClass $class) 
        {
        return true;
        }

    public function matchesMethod(\ReflectionMethod $method)
        {

            if($method->name == '__construct')
                {
                return false;   
                }

        }

    } 
```

这是我的拦截器：

```
<?php
namespace AGF\Services\Aspects\Exceptions;

use CG\Proxy\MethodInterceptorInterface;
use CG\Proxy\MethodInvocation;
use Symfony\Component\HttpKernel\Log\LoggerInterface;
use Symfony\Component\Security\Core\SecurityContextInterface;

class ExceptionInterceptor implements MethodInterceptorInterface
    {

    private $context;
    private $logger;

    public function __construct(SecurityContextInterface $context, LoggerInterface $logger)
        {

        $this->context = $context;
        $this->logger = $logger;    
        $this->logger->debug('HOLA2');

        }

    public function intercept(MethodInvocation $invocation) 
        {

        try {
            return $invocation->proceed();
            }   
        catch (\Exception $e)
            {
            $this->logger->err($e);
            }   

        }

    } 
```

所有类都到达切入点，但不到达拦截器。当我在切入点（echo $method->name）中进行“回声”时，切入点起作用，但是当我在拦截器中进行调试时，日志中没有任何内容。

# javascript - 如何根据某些条件切换css属性

> ID：14181612
> 
> 赞同：1
> 
> 时间：2013-01-06T11:26:22.427
> 
> 标签：javascript, jquery, asp.net, css, radiobuttonlist

我有以下单选按钮列表：

```
<asp:Panel ID="pnl_select_sign" runat="server" Visible="false" Style="text-align: right">
        <asp:RadioButtonList ID="rb_select_sign" runat="server" AutoPostBack="true" RepeatDirection="Horizontal"
            OnSelectedIndexChanged="rb_select_sign_SelectedIndexChanged" CausesValidation="false"
            AppendDataBoundItems="true">
            <asp:ListItem Selected="True" Value="0">Normal</asp:ListItem>
            <asp:ListItem Value="1">Electronic</asp:ListItem>
        </asp:RadioButtonList>
    </asp:Panel> 
```

* * *

我想`css`换房`overflow-y`

从 `overflow-y :auto`; 到`overflow-y :hidden;`

对于 div`id = wrap_form`

如果我选择了`ListItem with Value = 1`；

* * *

从**萤火虫**：

```
<td>
<input id="ctl00_ContentPlaceHolder1_rb_select_sign_0" type="radio" onclick="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$rb_select_sign$0\',\'\')', 0)" value="0" name="ctl00$ContentPlaceHolder1$rb_select_sign">
<label for="ctl00_ContentPlaceHolder1_rb_select_sign_0">Normal</label>
</td>
<td>
<input id="ctl00_ContentPlaceHolder1_rb_select_sign_1" type="radio" checked="checked" value="1" name="ctl00$ContentPlaceHolder1$rb_select_sign">
<label for="ctl00_ContentPlaceHolder1_rb_select_sign_1">Electronic</label>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:32:03.537

像这样的东西应该工作：

```
$('input[id^="ctl00_"]').click(function() {
 if ($(this).val() == 1) {
  $('#wrap_form').css('overflow-y', 'hidden');
 }
}) 
```

这是[jsfiddle](http://jsfiddle.net/3LWeD/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:48:09.243

请注意，如果您使用建议的 javascript 答案，则 css 将在页面回发后恢复正常。您已经在 Your 上使用了回发`RadioButtonList`，所以我想您可以改为更改服务器端的样式。

**更新**

将其放入您的方法处理列表中的项目选择更改中：

```
protected void rb_select_sign_SelectedIndexChanged(object sender, EventArgs e)
{
    if (rb_select_sign.SelectedValue == "1")
    {
        Page.ClientScript.RegisterStartupScript(this.GetType(), "styleChangeScript", "<script type='text/javascript'>var divToChange = document.getElementById('wrap_form'); if(divToChange) { divToChange.style.overflowY = 'hidden' }</script>", false);
    }
    //the rest of the original code of this method should be here
    //...
} 
```

为了在单击其他按钮等导致回发时使其工作，您应该在`Page_Load`您的页面事件中放置相同的代码行（或者将其放在单独的方法中并从两个地方调用它）。

# plsql - P/L SQL 中 CASE 内的 IF 语句

> ID：14181613
> 
> 赞同：-1
> 
> 时间：2013-01-06T11:26:27.267
> 
> 标签：plsql, sqlplus

我试图在 CASE 中编写 IF 语句，但这给了我编译错误。这我的代码看起来像

```
(CASE 
    IF (acc_type_id_ = 'ENDU') THEN
      WHEN PRODUCT_ID !=  product_id_ AND AVAIL_TO_SELL = 'YES' AND Enable_Add_To_Cart(PRODUCT_ID)='YES' AND PROD_ITEM_PKG.Get_Allow_Endu_Purch(PRODUCT_ID)='YES' THEN '&ACTION_ADD_TO_CART'                               
      WHEN PRODUCT_ID =  product_id_ AND AVAIL_TO_SELL = 'YES' AND Enable_Add_To_Cart(PRODUCT_ID)='YES' AND SELL_ONLY_LINKED != 'YES' AND PROD_ITEM_PKG.Get_Allow_Endu_Purch(PRODUCT_ID)='YES' THEN '&ACTION_ADD_TO_CART' 
    ELSE
       WHEN PRODUCT_ID !=  product_id_ AND AVAIL_TO_SELL = 'YES' AND Enable_Add_To_Cart(PRODUCT_ID)='YES' THEN '&ACTION_ADD_TO_CART'                               
       WHEN PRODUCT_ID =  product_id_ AND AVAIL_TO_SELL = 'YES' AND Enable_Add_To_Cart(PRODUCT_ID)='YES' AND SELL_ONLY_LINKED != 'YES' THEN '&ACTION_ADD_TO_CART' 
    END IF;   
ELSE '&ACTION_NO_ACTION'
END) ACTION2, 
```

SQLPLUS 中的错误

```
( begin case declare exit for goto if loop mod null pragma
raise return select update while with <an identifier>
<a double-quoted delimited-identifier> <a bind variable> <<
continue close current delete fetch lock insert open rollback
savepoint set sql execute commit forall merge pipe purge 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T11:31:20.830

那这个呢？您可以使用`acc_type_id_ = 'ENDU'`作为`WHEN`条件的一部分来实现相同的结果。

```
(CASE 
      WHEN acc_type_id_ = 'ENDU' AND PRODUCT_ID !=  product_id_ AND AVAIL_TO_SELL = 'YES' AND Enable_Add_To_Cart(PRODUCT_ID)='YES' AND PROD_ITEM_PKG.Get_Allow_Endu_Purch(PRODUCT_ID)='YES' THEN '&ACTION_ADD_TO_CART'                               
      WHEN acc_type_id_ = 'ENDU' AND PRODUCT_ID =  product_id_ AND AVAIL_TO_SELL = 'YES' AND Enable_Add_To_Cart(PRODUCT_ID)='YES' AND SELL_ONLY_LINKED != 'YES' AND PROD_ITEM_PKG.Get_Allow_Endu_Purch(PRODUCT_ID)='YES' THEN '&ACTION_ADD_TO_CART' 
      WHEN acc_type_id_ != 'ENDU' AND PRODUCT_ID !=  product_id_ AND AVAIL_TO_SELL = 'YES' AND Enable_Add_To_Cart(PRODUCT_ID)='YES' THEN '&ACTION_ADD_TO_CART'                               
      WHEN acc_type_id_ != 'ENDU' AND PRODUCT_ID =  product_id_ AND AVAIL_TO_SELL = 'YES' AND Enable_Add_To_Cart(PRODUCT_ID)='YES' AND SELL_ONLY_LINKED != 'YES' THEN '&ACTION_ADD_TO_CART' 
      ELSE '&ACTION_NO_ACTION'
END) ACTION2, 
```

# android - 持续更新andEngine中的精灵

> ID：14181615
> 
> 赞同：0
> 
> 时间：2013-01-06T11:26:36.030
> 
> 标签：android, sprite, andengine

一个精灵（比如轨道）如何不断地看着/指向另一个精灵（比如四四方方）......我尝试过的东西在这里（在 onPopulate 场景中）但它不起作用:(。

## 轨道（当前/默认向上）

![乱七八糟的](../Images/4ce139257eb94d2ed5bd8779bd2894ef.png)

```
track.registerUpdateHandler(new IUpdateHandler() {

        @Override
        public void reset() {

        }

        @Override
        public void onUpdate(float pSecondsElapsed) {

                float centre_tracky_width = track.getWidth() / 2;
                float centre_tracky_height = track.getHeight() / 2;
                float centre_boxy_width = boxy.getWidth() / 2;
                float centre_boxy_height = boxy.getHeight() / 2;
                float x_d = (centre_tracky_width - centre_boxy_width);
                float y_d = (centre_tracky_height - centre_boxy_height);
                float dtoboxy = (float) Math.pow(
                        (float) (Math.pow(y_d, 2) + Math.pow(x_d, 2)), 0.5);
                track.setRotation((float) Math.toDegrees((float) Math
                        .acos(y_d / dtoboxy)));

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:48:03.250

对不起，

```
track.setRotation((float) Math.toDegrees((float) Math
                    .acos(y_d / dtoboxy))); 
```

应该 ：

```
track.setRotation((float) Math.toDegrees((float) Math
                    .atan2(y_d / dtoboxy))); 
```

# semantics - 无法使用 Jena 从 owl 检索结果

> ID：14181617
> 
> 赞同：0
> 
> 时间：2013-01-06T11:26:37.480
> 
> 标签：semantics, sparql, semantic-web, jena, protege

首先，我使用**Protege 4**创建了自己的示例本体。我的实际目标是开发一个语义 Web 应用程序，该应用程序可以从对象属性中受益，从而为用户提供一些东西。创建本体后，我将添加动态数据，因此我需要使用 * *Jena API **。为了演示，我创建了示例实例。但是当我尝试检索结果时，我什么也没得到。

也许我在我的**SPARQL**查询中遗漏了一些东西。

```
private static final String baseUri = "http://www.semanticweb.org/ontologies/alisveris.owl#";

private static void modelReadFile(String filename, Model model) {
    try {
        File f = new File(filename);
        FileReader fr = new FileReader(f);
        model.read(fr, baseUri);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
}

private static void printModel(Model model) {
    String queryString =
        "PREFIX lib: <http://www.semanticweb.com/ontologies/alisveris.owl>" +
        "SELECT ?name ?surname " +
        "FROM <http://www.semanticweb.com/ontologies/alisveris.owl>" +
        "WHERE {" +
        "?name lib:take \"JavaProgramming\" " +
        "}";
    System.out.println(queryString);
    Query query = QueryFactory.create(queryString);
    QueryExecution qe = QueryExecutionFactory.create(query, model);
    ResultSet results = qe.execSelect();
    ResultSetFormatter.out(System.out, results, query);
    qe.close();
}

public static void main(String[] args) {
    Model model = ModelFactory.createDefaultModel();
    modelReadFile("/home/talha/ontologies/alisveris.owl", model);

    // Create properties for the different types of relationship to represent
    Property take = model.createProperty(baseUri, "take");
    Property isTakenBy = model.createProperty(baseUri, "isTakenBy");
    Property published = model.createProperty(baseUri, "published");
    Property publishedBy = model.createProperty(baseUri, "publishedBy");

    // User data properties
    Property userId = model.createProperty(baseUri, "userId");
    Property name = model.createProperty(baseUri, "name");
    Property surname = model.createProperty(baseUri, "surname");
    Property username = model.createProperty(baseUri, "username");
    Property password = model.createProperty(baseUri, "password");
    Property gender = model.createProperty(baseUri, "gender");
    Property age = model.createProperty(baseUri, "age");
    // Publisher data properties
    Property publisherId = model.createProperty(baseUri, "publisherId");
    Property publisherName = model.createProperty(baseUri, "publisherName");
    // Book data properties
    Property bookId = model.createProperty(baseUri, "bookId");
    Property bookName = model.createProperty(baseUri, "bookName");
    Property bookGenre = model.createProperty(baseUri, "bookGenre");
    Property pageCount = model.createProperty(baseUri, "pageCount");
    Property isbn = model.createProperty(baseUri, "isbn");
    Property bookRating = model.createProperty(baseUri, "bookRating");

    Resource talha = model.createResource(baseUri + "Talha");
    Resource javaProgramming = model.createResource(baseUri + "JavaProgramming");
    // and so on for other family members

    talha.addProperty(userId, "1");
    talha.addProperty(name, "Talha");
    talha.addProperty(surname, "Kabakuş");
    talha.addProperty(username, "talhak");
    talha.addProperty(password, "00");
    talha.addProperty(gender, "1");
    talha.addProperty(age, "23");

    javaProgramming.addProperty(bookId, "1");
    javaProgramming.addProperty(publisherId, "1");
    javaProgramming.addProperty(bookName, "Java Programming");
    javaProgramming.addProperty(bookGenre, "1");
    javaProgramming.addProperty(pageCount, "200");
    javaProgramming.addProperty(isbn, "121321312");
    javaProgramming.addProperty(bookRating, "3");

    // Add properties to adam describing relationships to other family members
    talha.addProperty(take, javaProgramming);

    Statement s = ResourceFactory.createStatement(talha, take, javaProgramming);
    model.add(s); // add the statement (triple) to the model
    printModel(model);
} 
```

这是我得到的结果：

```
------------------
| name | surname |
==================
------------------ 
```

最后是我的示例本体：

```
<?xml version="1.0"?>

<!DOCTYPE rdf:RDF [
    <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
    <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
    <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
    <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
    <!ENTITY alisveris "http://www.semanticweb.org/ontologies/alisveris.owl#" >
]>

<rdf:RDF xmlns="http://www.semanticweb.org/ontologies/alisveris.owl#"
     xml:base="http://www.semanticweb.org/ontologies/alisveris.owl"
     xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
     xmlns:owl="http://www.w3.org/2002/07/owl#"
     xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:alisveris="http://www.semanticweb.org/ontologies/alisveris.owl#">
    <owl:Ontology rdf:about="http://www.semanticweb.org/ontologies/alisveris.owl"/>

    <!-- 
    ///////////////////////////////////////////////////////////////////////////////////////
    //
    // Object Properties
    //
    ///////////////////////////////////////////////////////////////////////////////////////
     -->

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#isTakenBy -->

    <owl:ObjectProperty rdf:about="&alisveris;isTakenBy">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
        <rdfs:range rdf:resource="&alisveris;User"/>
    </owl:ObjectProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#published -->

    <owl:ObjectProperty rdf:about="&alisveris;published">
        <rdfs:range rdf:resource="&alisveris;Book"/>
        <rdfs:domain rdf:resource="&alisveris;Publisher"/>
    </owl:ObjectProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#publishedBy -->

    <owl:ObjectProperty rdf:about="&alisveris;publishedBy">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
        <rdfs:range rdf:resource="&alisveris;Publisher"/>
        <owl:inverseOf rdf:resource="&alisveris;published"/>
    </owl:ObjectProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#take -->

    <owl:ObjectProperty rdf:about="&alisveris;take">
        <rdfs:range rdf:resource="&alisveris;Book"/>
        <rdfs:domain rdf:resource="&alisveris;User"/>
        <owl:inverseOf rdf:resource="&alisveris;isTakenBy"/>
    </owl:ObjectProperty>

    <!-- 
    ///////////////////////////////////////////////////////////////////////////////////////
    //
    // Data properties
    //
    ///////////////////////////////////////////////////////////////////////////////////////
     -->

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#age -->

    <owl:DatatypeProperty rdf:about="&alisveris;age">
        <rdfs:domain rdf:resource="&alisveris;User"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#bookGenre -->

    <owl:DatatypeProperty rdf:about="&alisveris;bookGenre">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#bookId -->

    <owl:DatatypeProperty rdf:about="&alisveris;bookId">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#bookName -->

    <owl:DatatypeProperty rdf:about="&alisveris;bookName">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#bookRating -->

    <owl:DatatypeProperty rdf:about="&alisveris;bookRating">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#gender -->

    <owl:DatatypeProperty rdf:about="&alisveris;gender">
        <rdfs:domain rdf:resource="&alisveris;User"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#isbn -->

    <owl:DatatypeProperty rdf:about="&alisveris;isbn">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#name -->

    <owl:DatatypeProperty rdf:about="&alisveris;name">
        <rdfs:domain rdf:resource="&alisveris;User"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#pageCount -->

    <owl:DatatypeProperty rdf:about="&alisveris;pageCount">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#password -->

    <owl:DatatypeProperty rdf:about="&alisveris;password">
        <rdfs:domain rdf:resource="&alisveris;User"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#publisherId -->

    <owl:DatatypeProperty rdf:about="&alisveris;publisherId">
        <rdfs:domain rdf:resource="&alisveris;Book"/>
        <rdfs:domain rdf:resource="&alisveris;Publisher"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#publisherName -->

    <owl:DatatypeProperty rdf:about="&alisveris;publisherName">
        <rdfs:domain rdf:resource="&alisveris;Publisher"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#rating -->

    <owl:DatatypeProperty rdf:about="&alisveris;rating"/>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#surname -->

    <owl:DatatypeProperty rdf:about="&alisveris;surname">
        <rdfs:domain rdf:resource="&alisveris;User"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#userId -->

    <owl:DatatypeProperty rdf:about="&alisveris;userId">
        <rdfs:domain rdf:resource="&alisveris;User"/>
    </owl:DatatypeProperty>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#username -->

    <owl:DatatypeProperty rdf:about="&alisveris;username">
        <rdfs:domain rdf:resource="&alisveris;User"/>
    </owl:DatatypeProperty>

    <!-- 
    ///////////////////////////////////////////////////////////////////////////////////////
    //
    // Classes
    //
    ///////////////////////////////////////////////////////////////////////////////////////
     -->

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#Book -->

    <owl:Class rdf:about="&alisveris;Book">
        <owl:disjointWith rdf:resource="&alisveris;Publisher"/>
    </owl:Class>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#Female -->

    <owl:Class rdf:about="&alisveris;Female">
        <rdfs:subClassOf rdf:resource="&alisveris;Gender"/>
        <owl:disjointWith rdf:resource="&alisveris;Male"/>
    </owl:Class>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#Gender -->

    <owl:Class rdf:about="&alisveris;Gender"/>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#Male -->

    <owl:Class rdf:about="&alisveris;Male">
        <rdfs:subClassOf rdf:resource="&alisveris;Gender"/>
    </owl:Class>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#Publisher -->

    <owl:Class rdf:about="&alisveris;Publisher">
        <rdfs:subClassOf rdf:resource="&owl;Thing"/>
    </owl:Class>

    <!-- http://www.semanticweb.org/ontologies/alisveris.owl#User -->

    <owl:Class rdf:about="&alisveris;User"/>
</rdf:RDF> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:06:25.767

```
PREFIX lib: <http://www.semanticweb.com/ontologies/alisveris.owl> 
```

你需要一个 # 来同意 baseURI：

```
PREFIX lib: <http://www.semanticweb.com/ontologies/alisveris.owl#> 
```

你也不需要

```
FROM <http://www.semanticweb.com/ontologies/alisveris.owl> 
```

您提供的数据是`model`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T17:23:31.703

*该答案也在[answers.semanticweb.com 上的副本中](https://web.archive.org/web/20160614125239/http://answers.semanticweb.com:80/questions/20229/unable-to-retrieve-results-from-owl-using-jena#27885)。*

您的查询要求一个三元组，其中对象是文字`"JavaProgramming"`，但代码`Resource javaProgramming = model.createResource(baseUri + "JavaProgramming");`创建了一个资源。您需要查询资源而不是字符串。除了本体代码之外，您创建的模型是这样的（注意我们看到的是`:JavaProgramming`，而不是`"JavaProgramming"`）：

```
@prefix :      <http://www.semanticweb.org/ontologies/alisveris.owl#> .

:JavaProgramming  :bookGenre  "1" ;
        :bookId       "1" ;
        :bookName     "Java Programming" ;
        :bookRating   "3" ;
        :isbn         "121321312" ;
        :pageCount    "200" ;
        :publisherId  "1" .

:Talha  :age       "23" ;
        :gender    "1" ;
        :name      "Talha" ;
        :password  "00" ;
        :surname   "Kabakuş" ;
        :take      :JavaProgramming ;
        :userId    "1" ;
        :username  "talhak" . 
```

在此数据上，您可以运行以下查询（使用`:JavaProgramming`）并获得以下结果。

```
prefix :      <http://www.semanticweb.org/ontologies/alisveris.owl#>

select ?student ?name ?surname where {
  ?student :take :JavaProgramming ;
           :name ?name ;
           :surname ?surname .
} 
```

```
---------------------------------
| student | name    | surname   |
=================================
| :Talha  | "Talha" | "Kabakuş" |
--------------------------------- 
```

# spring - 无法加载 Webapp（Spring 3.2.0RC2、Tomcat 7.0.27）

> ID：14181619
> 
> 赞同：1
> 
> 时间：2013-01-06T11:26:49.620
> 
> 标签：spring, spring-mvc, tomcat7

在 Eclipse Indigo 中使用 Spring MVC 3.2.0、Tomcat 7.0.27 启动我的 Web 应用程序时遇到问题。从昨天开始一切正常。但现在看来我的 Webapp 无法正确部署。

```
...
Jan 06, 2013 12:04:49 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 477 ms
Jan 06, 2013 12:04:49 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jan 06, 2013 12:04:49 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Jan 06, 2013 12:04:50 PM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
Jan 06, 2013 12:04:51 PM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
Jan 06, 2013 12:04:51 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory <...>.metadata\.plugins\org.eclipse.wst.server.core\tmp0\webapps\...
Jan 06, 2013 12:04:52 PM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
Jan 06, 2013 12:04:52 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-80"]
Jan 06, 2013 12:04:52 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Jan 06, 2013 12:04:52 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Jan 06, 2013 12:04:52 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2800 ms 
```

只有消息

> 信息：在类路径上未检测到 Spring WebApplicationInitializer 类型

我觉得部署 webapp 有问题

当我调用 URL

本地主机：8080/myWebApp

我只看到目录列表

我做了什么：我`source`从我的 webApp 中删除了我的属性，`server.xml`我`/WEB-INF/web.xml`看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>        

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

我将 servlet-definition 放入`/WEB-INF`其中，它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:jms="http://www.springframework.org/schema/jms"
    xmlns:amq="http://activemq.apache.org/schema/core"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/context 
                        http://www.springframework.org/schema/context/spring-context-3.0.xsd
                        http://www.springframework.org/schema/jms 
                        http://www.springframework.org/schema/jms/spring-jms.xsd
                        http://www.springframework.org/schema/mvc
                        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
                        http://activemq.apache.org/schema/core 
                        http://activemq.apache.org/schema/core/activemq-core.xsd">

    <context:component-scan base-package="net.tud.vorlesung" />

    <mvc:annotation-driven />

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T09:55:22.020

为了解决这个问题，我将描述我是如何解决我自己的问题的。

至少问题是将我的项目发布到我的本地服务器中，我猜并不是所有构建的类都已部署。

使用 Maven，似乎有必要将您的 maven-lib 包添加到您的项目部署程序集中（项目>右键单击>属性>部署程序集）。

此外，如果您的控制台显示 NoClassDef-Exception，您应该“清理”您的 Serverdeployment。这可以通过 Eclipse（我使用 Juno）来完成。只需右键单击您的服务器，然后单击“清理...”。

重新部署需要多长时间取决于您的项目。在我的项目中，它需要 > 5 分钟。

如果这不起作用，请先尝试使用“真实”JAR 而不是 Maven。实际上我对 Jena 有疑问（请参阅 [Sparql Select Query works on Sesame-Workbench but not on Java](https://stackoverflow.com/questions/16594533/sparql-select-query-works-on-sesame-workbench-but-not-on-java)）

希望这会帮助很多人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T09:48:39.143

当我将项目从升级的 IDE 打开到旧的 IDE 时，我就发生了这种情况，所以这有助于我解决问题`Right Click on my project -> Maven -> Update Project...`

# java - 如何很好地使用 messageQuery()？

> ID：14181621
> 
> 赞同：0
> 
> 时间：2013-01-06T11:27:18.527
> 
> 标签：java, android, android-intent

*   我是日本人，所以这个问题可能有语法错误。
    请用简单的英语写下你的答案。对不起。

我正在为安卓开发邮件软件。

我想让邮件应用程序的目的地选择“联系人”，我编写了如下代码。

```
 button1.setOnClickListener(new View.OnClickListener() {     
        public void onClick(View v) {
            // TODO Method stubs that are automatically generated.
            Intent intent = new Intent(Intent.ACTION_PICK,ContactsContract.Contacts.CONTENT_URI);
            startActivityForResult(intent, PICK_CONTACT);
        }
    public void onActivityResult(int reqCode, int resultCode, Intent data){
    super.onActivityResult(reqCode, resultCode, data);
    switch(reqCode){
       case (PICK_CONTACT):
         if (resultCode == Activity.RESULT_OK){

         Cursor c = managedQuery(Uri.parse(data.getDataString()), null, null, null, null);
    if (c.moveToFirst()){

        edittext1.setText( c.getString(
        c.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA1)));

     }
 }
case .....
}
} 
```

然而，作为运行的结果，我引发了 java.lang.IllegalStateException。

```
01-06 19:28:19.364: E/AndroidRuntime(614): FATAL EXCEPTION: main
01-06 19:28:19.364: E/AndroidRuntime(614): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=3, result=-1, data=Intent { dat=content://com.android.contacts/contacts/lookup/0r1-CF25D709DAA6CF49D22F/1 flg=0x1 (has extras) }} to activity {com.example.voicemailer/com.example.voicemailer.MainActivity}: java.lang.IllegalStateException: get field slot from row 0 col -1 failed
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.app.ActivityThread.access$2000(ActivityThread.java:117)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.os.Looper.loop(Looper.java:123)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-06 19:28:19.364: E/AndroidRuntime(614):  at java.lang.reflect.Method.invokeNative(Native Method)
01-06 19:28:19.364: E/AndroidRuntime(614):  at java.lang.reflect.Method.invoke(Method.java:507)
01-06 19:28:19.364: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-06 19:28:19.364: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-06 19:28:19.364: E/AndroidRuntime(614):  at dalvik.system.NativeStart.main(Native Method)
01-06 19:28:19.364: E/AndroidRuntime(614): Caused by: java.lang.IllegalStateException: get field slot from row 0 col -1 failed
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.database.CursorWindow.getString_native(Native Method)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.database.CursorWindow.getString(CursorWindow.java:329)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.database.CursorWrapper.getString(CursorWrapper.java:135)
01-06 19:28:19.364: E/AndroidRuntime(614):  at com.example.voicemailer.MainActivity.onActivityResult(MainActivity.java:116)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.app.Activity.dispatchActivityResult(Activity.java:3908)
01-06 19:28:19.364: E/AndroidRuntime(614):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
01-06 19:28:19.364: E/AndroidRuntime(614):  ... 11 more 
```

调试结果，'Cursor c = managedQuery(null, null, null, null)), Uri.parse(data.getDataString();' 原因我想。

但我无法修复它。我知道不推荐 managedQuery() ，但我不知道其他方式。请教我如何解决它....

PS我确实看过这个页面：[Cursor cursor = managedQuery(intent.getData().... nullpointerexception](https://stackoverflow.com/questions/5550720/cursor-cursor-managedqueryintent-getdata-nullpointerexception?answertab=active#tab-top) 但我不明白。我对该页面的问题是“getContactinfo() 在哪里？以及如何使用它？”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:28:58.157

**尝试使用 ContentResolver**

```
private static final String[] PROJECTION = new String[] {
ContactsContract.CommonDataKinds.Email.CONTACT_ID,
ContactsContract.Contacts.DISPLAY_NAME,
ContactsContract.CommonDataKinds.Email.DATA
};

...

ContentResolver cr = getContentResolver();
Cursor cursor = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, PROJECTION, null, null, null);
if (cursor != null) {
try {
    final int emailIndex = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA);
    if (cursor.moveToFirst())
     {
    edittext1.setText(cursor.getString(emailIndex));
     }
    } 
finally
  {
    cursor.close();
  } 
```

# php - codeigniter ajax如何不自动注销用户

> ID：14181624
> 
> 赞同：0
> 
> 时间：2013-01-06T11:27:27.653
> 
> 标签：php, ajax, codeigniter-2, session-cookies

我正在为我正在开发的网站使用 CodeIgniter，因为管理区域使用 AJAX 请求与服务器进行通信。用户可能正在处理不需要 AJAX 请求的事情，因此当用户尝试使用 AJAX 发送内容时，经过一段时间的非 AJAX 工作后，会导致如下错误：

> > 语法错误：意外的令牌 < [http://www.site.com/index.php](http://www.site.com/index.php)

我检查用户是否在服务器上登录，如下所示：

```
if(!isset($_SESSION['username'])){
    redirect('login');
} 
```

我只使用 $_SESSION，而不是 cookie。我是否必须使用 cookie 或实现一些 JavaScript 函数来 ping 服务器以在用户空闲时使其保持活动状态，或者两者兼而有之？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:33:44.467

只需在配置文件中更改会话过期变量：

```
$config['sess_cookie_name']     = 'yoursite';
$config['sess_expiration']      = 7200;
$config['sess_encrypt_cookie']  = TRUE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

将 sess_expiration 设置为您满意的足够长的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:25:23.157

我没有为这个错误实现解决方案，但是，最终在这里寻找同样的东西，一个好的解决方案是使用[jQuery-Idle](http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/)插件，我希望这对任何人都有帮助。

# c# - 如何使用 linq to dataset 删除数据表中的一行？

> ID：14181630
> 
> 赞同：0
> 
> 时间：2013-01-06T11:28:37.127
> 
> 标签：c#, .net, linq, ado.net, dataset

我`Color`在 DataSet( ) 中有 table( `dsObjets`)。

我想`ColorID`从此表中删除特定行（特定）。

知道如何在 LINQ 的帮助下实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:35:19.743

尝试这个

```
var results = from row in dsObjects.Tables["Color"].AsEnumerable()
          where row.Field<int>("ColorID") == <color ID to be removed> 
          select row;
foreach (DataRow row in results)
{
   dsObjects.Tables["Color"].Remove(row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:32:03.730

以下是有关删除记录的更多信息：http: [//msdn.microsoft.com/en-us/library/bb386925.aspx](http://msdn.microsoft.com/en-us/library/bb386925.aspx)

要删除数据库中的一行：

*   在数据库中查询要删除的行。
*   调用 DeleteOnSubmit 方法。
*   将更改提交到数据库。

# colors - 在three.js中改变立方体的颜色

> ID：14181631
> 
> 赞同：41
> 
> 时间：2013-01-06T11:28:45.580
> 
> 标签：colors, three.js

我正在尝试根据变量更改立方体的颜色。我创建了两个立方体，我想根据它们之间的距离改变它们的颜色。

立方体是这样创建的：

```
geometry = new THREE.CubeGeometry( 50, 50, 50 );
material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );
cube = new THREE.Mesh( geometry, material );
scene.add( cube ); 
```

现在我尝试了这样的事情：

```
if(distance > 20)
{
cube.material.color = 0xffffff;
} 
```

但它不起作用。我查看了示例，但找不到任何合适的内容。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-06T14:11:11.010

您没有正确指定颜色值。

```
cube.material.color.setHex( 0xffffff ); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-11T23:48:54.193

```
cube.material.color 
```

将为您提供 THREE.Color 对象：

[颜色](https://threejs.org/docs/#api/math/Color)

它有很多方法可以用来设置颜色。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-21T14:09:37.593

我的建议是将函数附加到您的对象，然后您可以在运行时轻松更改对象的颜色。
根据您的代码

```
geometry = new THREE.CubeGeometry( 50, 50, 50 );
material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );
cube = new THREE.Mesh( geometry, material );

//here is the funcion defined and attached to the  object
cube.setColor = function(color){
     cube.material.color.set(color);
}

cube.setColor(0xFFFFFF)  //change color using hex value or
cube.setColor("blue")    //set material color by using color name

scene.add( cube ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-07T13:53:38.110

在材料部分，您可以提供一个十六进制颜色值像这样 `meshMaterial = new THREE.MeshBasicMaterial({color:0xfffff})` 在下面的代码中，十六进制值（0xffffff）是白色的

# python - 协助听写理解

> ID：14181643
> 
> 赞同：0
> 
> 时间：2013-01-06T11:30:17.057
> 
> 标签：python, performance, list-comprehension, dictionary-comprehension

我正在尝试编写字典理解。

我有一本这样的字典：

```
main_dict = {
    'A' : {'key1' : 'valueA1', 'key2' : 'valueA2'},
    'B' : {'key2' : 'valueB2', 'key3' : 'valueB3'},
    'C' : {'key3' : 'valueC3', 'key1' : 'valueC1'}} 
```

我想执行以下逻辑：

```
d = {}
for k_outer, v_outer in main_dict.items():
    for k_inner, v_inner in v_outer.items():
        if k_inner in d.keys():
            d[k_inner].append([k_outer, v_inner])
        else:
            d[k_inner] = [[k_outer, v_inner]] 
```

这会产生以下结果：

```
{'key3': [['C', 'valueC3'], ['B', 'valueB3']], 
 'key2': [['A', 'valueA2'], ['B', 'valueB2']], 
 'key1': [['A', 'valueA1'], ['C', 'valueC1']]} 
```

（我知道我可以使用`defaultdict(list)`，但这只是一个例子）

我想使用 dict-comprehension 执行逻辑，到目前为止，我有以下内容：

```
d = {k : [m, v] for m, x in main_dict.items() for k, v in x.items()} 
```

这不起作用，它只给我以下输出：

```
{'key3' : ['B', 'valueB3'],
'key2' : ['B', 'valueB2'],
'key1' : ['C', 'valueC1']} 
```

这是为每个 inner_key 找到的最后一个实例...

我不知道如何正确执行此嵌套列表理解。我尝试了多种变体，都比上一个更糟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:43:38.097

你可以尝试这样的事情：

```
In [61]: main_dict
Out[61]: 
{'A': {'key1': 'valueA1', 'key2': 'valueA2'},
 'B': {'key2': 'valueB2', 'key3': 'valueB3'},
 'C': {'key1': 'valueC1', 'key3': 'valueC3'}}

In [62]: keys=set(chain(*[x for x in main_dict.values()]))

In [64]: keys
Out[64]: set(['key3', 'key2', 'key1'])

In [63]: {x:[[y,main_dict[y][x]] for y in main_dict if x in main_dict[y]] for x in keys}
Out[63]: 
{'key1': [['A', 'valueA1'], ['C', 'valueC1']],
 'key2': [['A', 'valueA2'], ['B', 'valueB2']],
 'key3': [['C', 'valueC3'], ['B', 'valueB3']]} 
```

使用更具可读性的解决方案`dict.setdefault`：

```
In [81]: d={}

In [82]: for x in keys:
    for y in main_dict:
       if x in main_dict[y]:
           d.setdefault(x,[]).append([y,main_dict[y][x]])
   ....:            

In [83]: d
Out[83]: 
{'key1': [['A', 'valueA1'], ['C', 'valueC1']],
 'key2': [['A', 'valueA2'], ['B', 'valueB2']],
 'key3': [['C', 'valueC3'], ['B', 'valueB3']]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:08:44.847

使用三个字典理解来完成这样的任务，第三个字典理解是结合前两个字典：

```
e = {k : [m, v] for m, x in main_dict.items() for k, v in x.items()}
f = {k : [m, v] for m, x in main_dict.items() for k, v in x.items() if [m,v] not in e.values()}
g = {k1 : [m, v] for k1,m in e.items() for k2,v in f.items() if k1==k2} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:35:36.337

一种选择是使用[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby "itertools.groupby")

```
from itertools import groupby
from operator import itemgetter

main_dict = {
    'A' : {'key1' : 'valueA1', 'key2' : 'valueA2'},
    'B' : {'key2' : 'valueB2', 'key3' : 'valueB3'},
    'C' : {'key3' : 'valueC3', 'key1' : 'valueC1'}}

## Pull inner key, outer key and value and sort by key (prior to grouping)
x = sorted([(k2, [k1, v2]) for k1, v1 in main_dict.items() for k2, v2, in v1.items()])

## Group by key. This creates an itertools.groupby object that can be iterated
## to get key and value iterables
xx = groupby(x, key=itemgetter(0))

for k, g in xx:
    print('{0} : {1}'.format(k, [r[1] for r in list(g)])) 
```

根据您的数据和性能要求，排序可能并不理想，因此值得进行分析。

此外，它不会产生指定的 dict，而是 groupby 对象。这可能足以满足您的需求；迭代它会产生 key 和 iterables。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T09:27:39.903

最后，这就是我使用的：

```
from collections import defaultdict

d = defaultdict(list)
for m, x in main_dict.items():
    for k, v in x.items():
        d[k].append((m, v)) 
```

# php - mod_rewrite 不起作用，尝试了所有可能的方法

> ID：14181644
> 
> 赞同：0
> 
> 时间：2013-01-06T11:30:17.607
> 
> 标签：php, .htaccess, mod-rewrite, pretty-urls

我发誓无法得到这个，我阅读了 10 个教程但无法使其工作......我想要漂亮的 url，所以我的目录结构是这样的

```
localhost/my_website/home.php?page=dashboard 
```

我在具有这些规则的`.htaccess`文件夹中有一个文件`my_website`

```
#Redirect To Default Login Page
DirectoryIndex login.php

#Block Directory Listing
IndexIgnore * 

# Turn on URL rewriting
RewriteEngine On

RewriteRule ^page/([^/\.]+)/?$ home.php?page=$1 [L] 
```

但是当我输入这个时，`http://localhost/my_website/home/dashboard`我实际上什么也没得到

我得到的是

```
The requested URL /my_website/home/dashboard was not found on this server. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:48:24.237

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /([^/]+)/([^/]+)$ [NC]
RewriteRule .*  my_website/%1.php?page=%2 [L,QSA] 
```

它将静默映射：

`http://localhost/my_website/anything1/anything2`

到：

`http://localhost/my_website/anything1.php?page=anything2`

我假设`home`并且`dashboard`在问题中是变量（可以是任何东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:54:25.120

这就是您需要的：

```
 RewriteEngine On
 RewriteRule ^my_website\/home\/([a-z0-9_-]+)?$ my_website/home.php?page=$1 [L] 
```

# silverlight-4.0 - Silverlight 4 和 SignalR

> ID：14181651
> 
> 赞同：0
> 
> 时间：2013-01-06T11:31:25.120
> 
> 标签：silverlight-4.0, signalr

我已经阅读了有关 SignalR 和 Silverlight 的所有内容，但我仍然无法使其运行。我已经在 Web 项目中安装了 SignalR，并且进展顺利。然后，我将这里的 dll 添加到 SL4 项目[http://chris.59north.com/post/2011/12/15/SignalR-and-Silverlight.aspx](http://chris.59north.com/post/2011/12/15/SignalR-and-Silverlight.aspx)。最后，它说我错过了 SignalR.Client.Hubs 命名空间 (SignalR)。无论我做什么，我都无法在 SL 项目中找到 SignalR 命名空间。

有没有办法用 SL4 运行 SignalR 或者我应该去 SL5？有没有人有运行 SignalR 的 SL 应用程序示例。我真的需要这个并运行它，但我觉得这是不可能的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T20:20:07.800

[根据http://www.asp.net/signalr/overview/getting-started/supported-platforms](http://www.asp.net/signalr/overview/getting-started/supported-platforms)页面上的客户要求，Silverlight 5 似乎是 SignalR 支持的版本。因此，您需要升级到 SL 5。

# android - Getting error to post to facebook wall

> ID：14181653
> 
> 赞同：1
> 
> 时间：2013-01-06T11:31:30.377
> 
> 标签：android, facebook, post, sdk, share

I've already searched google and stackoverflow but I can't find a solution. I'm trying to integrate facebook into my App so users can suggest new Beer Brands directly to my facebook fanpage thorugh my app. Because right now I'm getting like 3 e-mails a day where users suggest new beer brands.

What I did: - Created a facebook developer account, enabled Native Android app and inserted the Key-Hash etc. - downloaded and integrated the facebook sdk. - addet internet permission - integrated the following facebook helper class:

```
package com.celticwolf.nsod; //changed
import com.facebook.android.*;
import com.facebook.android.Facebook.DialogListener;
import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.Window;
import android.widget.Toast;

 public class ShareOnFacebook extends Activity{ 
    private static final String APP_ID = "35253892647899";  // changed
    private static final String[] PERMISSIONS = new String[] {"publish_stream"};
private static final String TOKEN = "access_token";
        private static final String EXPIRES = "expires_in";
        private static final String KEY = "facebook-credentials";

    private Facebook facebook;
    private String messageToPost;

    public boolean saveCredentials(Facebook facebook) {
            Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
            editor.putString(TOKEN, facebook.getAccessToken());
            editor.putLong(EXPIRES, facebook.getAccessExpires());
            return editor.commit();
        }

        public boolean restoreCredentials(Facebook facebook) {
            SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);
            facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
            facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
            return facebook.isSessionValid();
        }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        facebook = new Facebook(APP_ID);
        restoreCredentials(facebook);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.facebook_dialog);

        String facebookMessage = getIntent().getStringExtra("facebookMessage");
        if (facebookMessage == null){
            facebookMessage = "Test wall post";
        }
        messageToPost = facebookMessage;
    }

    public void doNotShare(View button){
        finish();
    }
    public void share(View button){
        if (! facebook.isSessionValid()) {
            loginAndPostToWall();
        }
        else {
            postToWall(messageToPost);
        }
    }

    public void loginAndPostToWall(){
         facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
    }

    public void postToWall(String message){
        Bundle parameters = new Bundle();
                parameters.putString("message", message);
                parameters.putString("description", "topic share");
                try {
                    facebook.request("me");  // <------  here it fails
            String response = facebook.request("me/feed", parameters, "POST");
            Log.d("Tests", "got response: " + response);
            if (response == null || response.equals("") ||
                    response.equals("false")) {
                showToast("Blank response.");
            }
            else {
                showToast("Message posted to your facebook wall!");
            }
            finish();
        } catch (Exception e) {
            showToast("Failed to post to wall!");
            e.printStackTrace();
            finish();
        }
    } 

    class LoginDialogListener implements DialogListener {
        public void onComplete(Bundle values) {
            saveCredentials(facebook);
            if (messageToPost != null){
            postToWall(messageToPost);
        }
        }
        public void onFacebookError(FacebookError error) {
            showToast("Authentication with Facebook failed!");
            finish();
        }
        public void onError(DialogError error) {
            showToast("Authentication with Facebook failed!");
            finish();
        }
        public void onCancel() {
            showToast("Authentication with Facebook cancelled!");
            finish();
        }
    }

    private void showToast(String message){
        Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();
    }
} 
```

and I've addet the following Code to access the helper class:

```
private void shareonfb(){
        Intent postOnFacebookWallIntent = new Intent(this, ShareOnFacebook.class);
        postOnFacebookWallIntent.putExtra("facebookMessage", "Teeeeeeeeeeeest");
        startActivity(postOnFacebookWallIntent);
    } 
```

Where it fails: - I'm able to log into facebook but when it asks if I want to share it fails at the following codeblock:

```
public void postToWall(String message){
    Bundle parameters = new Bundle();
            parameters.putString("message", message);
            parameters.putString("description", "topic share");
            try {
                facebook.request("me");   // <-------------  here it fails and jups to catch
        String response = facebook.request("me/feed", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") ||
                response.equals("false")) {
            showToast("Blank response.");
        }
        else {
            showToast("Message posted to your facebook wall!");
        }
        finish();
    } catch (Exception e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
        finish();
    }
} 
```

here is the log: (i've marked the part where it fails)

```
01-06 13:19:53.795: W/ActivityThread(1220): Application com.celticwolf.alex is waiting for the debugger on port 8100...
01-06 13:19:53.805: I/System.out(1220): Sending WAIT chunk
01-06 13:19:54.205: I/System.out(1220): Debugger has connected
01-06 13:19:54.205: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:54.405: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:54.615: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:54.820: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:55.250: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:55.450: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:55.650: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:55.850: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:56.050: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:56.250: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:56.450: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:56.650: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:56.850: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:57.050: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:57.255: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:57.455: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:57.655: I/System.out(1220): waiting for debugger to settle...
01-06 13:19:57.855: I/System.out(1220): debugger has settled (1373)
01-06 13:19:58.285: I/dalvikvm-heap(1220): Grow heap (frag case) to 7.205MB for 3502096-byte allocation
01-06 13:19:58.400: I/dalvikvm-heap(1220): Grow heap (frag case) to 13.139MB for 6224656-byte allocation
01-06 13:19:58.575: I/MediaPlayer(1220): setLPAflag() in
01-06 13:19:58.575: I/MediaPlayer(1220): mContext is null, can't getMirrorDisplayStatus!!!
01-06 13:19:58.575: I/MediaPlayer(1220): setLPAflag() out
01-06 13:19:58.585: W/MediaPlayer(1220): info/warning (1, 902)
01-06 13:19:58.585: D/MediaPlayer(1220): [DLNA]contentType = 902
01-06 13:19:58.585: D/MediaPlayer(1220): doStart() in
01-06 13:19:58.590: D/MediaPlayer(1220): getIntParameter = 902
01-06 13:19:58.665: D/MediaPlayer(1220): Mediaplayer receives message, message type: 200
01-06 13:19:58.665: I/MediaPlayer(1220): Info (1,902)
01-06 13:19:58.665: D/MediaPlayer(1220): Mediaplayer receives message, message type: 5
01-06 13:19:58.665: D/MediaPlayer(1220): Mediaplayer receives message, message type: 1
01-06 13:19:58.745: E/(1220): file /data/data/com.nvidia.NvCPLSvc/files/driverlist.txt: not found!
01-06 13:19:58.745: I/(1220): Attempting to load EGL implementation /system/lib//egl/libEGL_tegra_impl
01-06 13:19:58.805: I/(1220): Loaded EGL implementation /system/lib//egl/libEGL_tegra_impl
01-06 13:19:58.905: I/(1220): Loading GLESv2 implementation /system/lib//egl/libGLESv2_tegra_impl
01-06 13:19:59.350: D/MediaPlayer(1220): Mediaplayer receives message, message type: 2
01-06 13:20:00.200: D/MediaPlayer(1220): release() in
01-06 13:20:00.210: D/MediaPlayer(1220): release() out
01-06 13:20:00.745: W/MediaPlayer-JNI(1220): MediaPlayer finalized without being released
01-06 13:20:00.745: I/dalvikvm-heap(1220): Grow heap (frag case) to 15.433MB for 3317776-byte allocation
01-06 13:20:40.855: D/View(1220): ACTION_DOWN before UnsetPressedState. invoking mUnsetPressedState.run()
01-06 13:20:40.870: I/Choreographer(1220): Skipped 1158 frames!  The application may be doing too much work on its main thread.
01-06 13:20:43.810: E/SpannableStringBuilder(1220): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
01-06 13:20:43.810: E/SpannableStringBuilder(1220): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
01-06 13:20:43.975: E/SpannableStringBuilder(1220): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
01-06 13:20:43.975: E/SpannableStringBuilder(1220): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
01-06 13:20:45.150: E/SpannableStringBuilder(1220): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
01-06 13:20:45.150: E/SpannableStringBuilder(1220): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
01-06 13:21:40.920: D/Facebook-Util(1220): GET URL: https://graph.facebook.com/me?access_token=AAAFAqIQXNsUBAE18DxmYZCvB9uLEFUSeQEMp3hZASDnjOMllu1Q0BqSTYEoGVEvjZAp8l18eZCt8ZArlPwQ5A08SijSFF00imS2JDO0A9MAZDZD&format=json
01-06 13:21:51.180: W/System.err(1220): android.os.NetworkOnMainThreadException                                                        <--- at this point it fails
01-06 13:21:51.215: W/System.err(1220):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1208)
01-06 13:21:51.215: W/System.err(1220):     at java.net.InetAddress.lookupHostByName(InetAddress.java:388)
01-06 13:21:51.220: W/System.err(1220):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:239)
01-06 13:21:51.220: W/System.err(1220):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
01-06 13:21:51.225: W/System.err(1220):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
01-06 13:21:51.225: W/System.err(1220):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-06 13:21:51.230: W/System.err(1220):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
01-06 13:21:51.230: W/System.err(1220):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
01-06 13:21:51.235: W/System.err(1220):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
01-06 13:21:51.235: W/System.err(1220):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
01-06 13:21:51.240: W/System.err(1220):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461)
01-06 13:21:51.240: W/System.err(1220):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433)
01-06 13:21:51.245: W/System.err(1220):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
01-06 13:21:51.245: W/System.err(1220):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
01-06 13:21:51.250: W/System.err(1220):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
01-06 13:21:51.255: W/System.err(1220):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
01-06 13:21:51.255: W/System.err(1220):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
01-06 13:21:51.255: W/System.err(1220):     at com.facebook.android.Util.openUrl(Util.java:219)
01-06 13:21:51.260: W/System.err(1220):     at com.facebook.android.Facebook.requestImpl(Facebook.java:806)
01-06 13:21:51.260: W/System.err(1220):     at com.facebook.android.Facebook.request(Facebook.java:732)
01-06 13:21:51.265: W/System.err(1220):     at com.celticwolf.alex.ShareOnFacebook.postToWall(ShareOnFacebook.java:81)
01-06 13:21:51.265: W/System.err(1220):     at com.celticwolf.alex.ShareOnFacebook.share(ShareOnFacebook.java:68)
01-06 13:21:51.265: W/System.err(1220):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 13:21:51.265: W/System.err(1220):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 13:21:51.270: W/System.err(1220):     at android.view.View$1.onClick(View.java:3603)
01-06 13:21:51.270: W/System.err(1220):     at android.view.View.performClick(View.java:4101)
01-06 13:21:51.270: W/System.err(1220):     at android.view.View$PerformClick.run(View.java:17078)
01-06 13:21:51.275: W/System.err(1220):     at android.os.Handler.handleCallback(Handler.java:615)
01-06 13:21:51.275: W/System.err(1220):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-06 13:21:51.275: W/System.err(1220):     at android.os.Looper.loop(Looper.java:155)
01-06 13:21:51.280: W/System.err(1220):     at android.app.ActivityThread.main(ActivityThread.java:5485)
01-06 13:21:51.280: W/System.err(1220):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 13:21:51.280: W/System.err(1220):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 13:21:51.285: W/System.err(1220):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
01-06 13:21:51.285: W/System.err(1220):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
01-06 13:21:51.285: W/System.err(1220):     at dalvik.system.NativeStart.main(Native Method) 
```

Thank You!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:36:42.773

You cant make a Network Operation in the main Thread since android 3.0 AFAIK . place your call in a sperate thread and if you need to update `UI` use either `handlers` or `AsyncTask`

example :

```
class MyAsyncTask extends AsyncTask<String,Void,Boolean>
{
public Boolean doInBackground(String ...message){

    Bundle parameters = new Bundle();
            parameters.putString("message", message[0]);
            parameters.putString("description", "topic share");
            try {
                facebook.request("me");   // <-------------  here it fails and jups to catch
        String response = facebook.request("me/feed", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") ||
                response.equals("false")) {
            return Boolean.FALSE;
        }
        else {
             return Boolean.TRUE;
        }
    } catch (Exception e) {

        e.printStackTrace();
        return Boolean.FALSE;
    }
} 

public void onPostExecute(Boolean result){
        if(result == Boolean.TRUE){
 showToast("posted successfully");
}else{
 showToast("couldn't post to FB.");
}
        finish();
}
} 
```

see this [NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

# objective-c - UITextFieldDelegate 导致异常

> ID：14181663
> 
> 赞同：0
> 
> 时间：2013-01-06T11:32:36.867
> 
> 标签：objective-c, ios, delegates, uitextfield, uitextfielddelegate

简单案例。我想创建一个 UIViewController 来显示和响应一个简单的 UITextField 的输入。

1.  我创建了一个包含**xib**文件的 UIViewController。
2.  在 Interface Builder 中，我添加了一个**View**和一个包含**UITextField**。
3.  文件的**所有者**设置为包含逻辑“CardViewController”的相应类名。
4.  文件所有者指向视图作为视图。
5.  **文本字段**使用File **'s Owner**作为**delegate**。

看起来像这样...

![在此处输入图像描述](../Images/71e0dc2276d239b15522693b892a3a3e.png)

视图正在正确显示，但只要我点击文本字段，应用程序就会崩溃，并出现异常“EXC_BAD_ACCESS ....”

我的猜测是委托的分配有问题，但我在查找问题时遇到了问题。任何的想法？我错过了什么？

* * *

进一步的发现。**当我直接在 AppDelegate 中**实例化这个视图控制器时， UITextField 的委托实际上是有效的！！

但是我实际上打算首先创建一个“BoardViewController”类的实例，然后创建“CardViewController”对象。拥有这种嵌套会导致委托失败。

作为参考。在我的应用程序代表中：

```
BoardViewController *bvc = [[BoardViewController alloc] init];
[self.window setRootViewController:bvc]; 
```

在板类中，我有一个“添加”按钮，可以触发 CardViewControllers 的创建

```
-(void) addCard:(id)touchEvent{
    NSLog(@"<Board> Add");
    CardViewController *cvc = [[CardViewController alloc]init];
    [self.view addSubview:cvc.view];
} 
```

然后 CardViewController 看起来就像最初提到的那样，在 xib 中设置了委托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:37:57.777

看起来您的 CardViewController 未初始化。你建议它应该建在哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:01:54.797

您需要正确初始化视图控制器。

```
CardViewController *objCardView = [[CardViewController alloc]initWithNibName:@"CardViewController" bundle:nil];

[self.view addSubview:objCardView.view]; 
```

如果这是有效的，那么检查这个东西：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization}

    }
    return self;
} 
```

你的类的这个方法正在工作，然后检查 ViewDidLoad。

然后你还需要检查你是否正确地实现了你的 textField Delegate。使用属性初始化您的 textField 并建立连接文件所有者。

使用断点调试您的代码。我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:07:49.073

看起来我找到了我的解决方案。除了将 CardViewController 的视图添加为子视图之外，我还需要将其添加为 ChildViewController。

在父 BoardViewController

```
-(void) addCard:(id)touchEvent{
    CardViewController *cvc = [[CardViewController alloc]init];
    [self addChildViewController:cvc];
    [self.view addSubview:cvc.view];
} 
```

然后委托调用工作。耶。

# javascript - 在javascript中创建对象

> ID：14181666
> 
> 赞同：0
> 
> 时间：2013-01-06T11:33:08.030
> 
> 标签：javascript, oop, object

那有什么区别

```
 install=function(s,p){var n;for(n in p)if(p.hasOwnProperty(n))s[n]=p[n]}}
    install(myObj,{userid:"5",username:"john"}); 
```

到

```
 myObj={userid:"5",username:"john"}; 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T11:35:18.683

第一个是使用一个函数，它（可能）会将属性复制到`myObj`. 当您需要向已经存在的对象添加属性时，您将主要使用它。

第二个只是创建一个具有给定属性的新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:36:39.177

您应该尝试清理代码中的一些空白，使其更易于阅读。

好吧，在第一种情况下，您永远不会真正创建对象 myObj。所以我猜**代码甚至没有运行**。

第二个代码是您通常如何构造匿名对象。

# javascript - 在 Web 应用程序中创建文本文件

> ID：14181668
> 
> 赞同：0
> 
> 时间：2013-01-06T11:33:17.180
> 
> 标签：javascript, web-applications, iframe, text-files

我正在为内容管理工作创建一个基于 JavaScript 和 HTML5 的 Web 应用程序。Web 应用程序基本上由 2 个 iframe 组成，当最终用户将数据从一个 iframe 拖动到另一个 iframe（这是一个 HTML 表单）时。另一个具有 HTML 表单的 iFrame 具有“生成”按钮。

通过这个“生成”按钮，我想将拖动到最终用户计算机上的表单中的数据保存为文本文件？

我不想使用 PHP，因为这意味着最终用户必须安装服务器。有没有办法通过 Web-App 获取文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:36:10.270

您不能直接在客户端计算机上创建文本文件。这样做的主要原因是安全考虑：如果允许每个网页在没有任何干预的情况下将数据保存在您的计算机上，那么您将遇到大问题。有多种可能：

1.  提供文件作为下载，以便客户可以自己保存。

2.  使用Java：您可以向用户请求将文件保存在硬盘上的权限。这将涉及 Java Applet。由于存在安全风险，并非所有浏览器都支持 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:19:55.313

我想它可以帮助你。尝试使用**FILE API**（html5 的工作草案） [，你可以在这里找到它](http://dev.w3.org/2009/dap/file-system/pub/FileSystem/)，还有一些[教程](http://www.html5rocks.com/en/tutorials/file/filesystem/)

# wpf - 收集时出现奇怪的异常

> ID：14181673
> 
> 赞同：4
> 
> 时间：2013-01-06T11:33:50.443
> 
> 标签：wpf, exception, observablecollection

当我尝试向集合添加/插入/删除（或更改集合的任何操作）时，出现以下异常。集合已初始化，插入的项不为 null 且与集合 T 的类型相同。

任何人都可以告诉我为什么会发生这种情况吗？

运行时遇到致命错误。错误的地址在`0x60f41744`, on thread `0x231c`。错误代码是`0x80131623`。
此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

更新：集合是一个`ObservableCollection`，我设法知道它发生在集合的通知部分发生了变化。

这发生在具有该`TaskScheduler.FromCurrentSynchronizationContext()`选项的任务内的 UI 线程上。

奇怪的是，如果我删除这个 ( `TaskScheduler.FromCurrentSynchronizationContext()`) 选项添加/插入/删除操作，一切似乎都很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T13:52:09.437

> 错误代码为 0x80131623

这是一个非常具体的错误代码，COR_E_FAILFAST。只有一种生成它的方法，有人称为 Environment.FailFast()。

显然，挑战是找出什么代码叫它。首先查看 Windows 应用程序事件日志，应该有一条关于它的消息，说明调用的主要原因，无论传递给 FailFast() 的字符串是什么。

* * *

> 应用程序通过 System.Environment.FailFast(string message) 请求进程终止。
> 在 System.Environment.FailFast(System.String)
> 在 System.Windows.WeakEventManager.DeliverEventToList(System.Object, System.EventArgs, ListenerList)
> 在 System.Windows.WeakEventManager.DeliverEvent(System.Object, System.EventArgs)

是的，该代码中有一个 Assert() 。我只会发布我在参考源中可以看到的内容，我对您的代码知之甚少，无法查看您做错了什么。除了线程肯定是触发此类问题的好方法之外，ObservableCollection 完全是线程不安全的，并且必须由锁保护。

```
 // if the event isn't handled, something is seriously wrong.  This
   // means a listener registered to receive the event, but refused to
   // handle it when it was delivered.  Such a listener is coded incorrectly.
   if (!handled)
   {
       Invariant.Assert(handled,
                   SR.Get(SRID.ListenerDidNotHandleEvent),
                   SR.Get(SRID.ListenerDidNotHandleEventDetail, iwel.GetType(), managerType));
   } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-06T11:38:32.380

内存不好，运行时损坏。

这是一个像这样的致命错误 - 因此它不是 .NET 级别的错误，正如它所说，它指向一些内存损坏，无论出于何种原因。可能是内存损坏、电源损坏或非托管部分中的程序错误导致内存损坏。或运行时出错（JIT 级别，即处理汇编程序级别或 WPF/本机区域的部分），但我不知何故对此表示怀疑。

顺便说一句，在没有错误类型的情况下发布错误描述不太聪明。

# elasticsearch - Elasticsearch 中的多个分组依据

> ID：14181674
> 
> 赞同：16
> 
> 时间：2013-01-06T11:34:18.883
> 
> 标签：elasticsearch, nosql-aggregation

我需要使用 ES 中的 3 个字段进行聚合（分组）。

我可以在 1 个查询中做到这一点，还是我需要为每一列使用一个方面 + 迭代？

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-01-23T07:31:31.343

从 1.0 版开始`ElasticSearch`，新的[*聚合*API允许使用](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations.html)*子聚合*按多个字段进行分组。假设您要按字段分组`field1`，`field2`并且`field3`：

```
{
  "aggs": {
    "agg1": {
      "terms": {
        "field": "field1"
      },
      "aggs": {
        "agg2": {
          "terms": {
            "field": "field2"
          },
          "aggs": {
            "agg3": {
              "terms": {
                "field": "field3"
              }
            }
          }          
        }
      }
    }
  }
} 
```

当然，这可以适用于您想要的多个领域。

**更新：**
为了完整起见，以下是上述查询的输出外观。下面还有用于生成聚合查询并将结果展平为字典列表的 python 代码。

```
{
  "aggregations": {
    "agg1": {
      "buckets": [{
        "doc_count": <count>,
        "key": <value of field1>,
        "agg2": {
          "buckets": [{
            "doc_count": <count>,
            "key": <value of field2>,
            "agg3": {
              "buckets": [{
                "doc_count": <count>,
                "key": <value of field3>
              },
              {
                "doc_count": <count>,
                "key": <value of field3>
              }, ...
              ]
            },
            {
            "doc_count": <count>,
            "key": <value of field2>,
            "agg3": {
              "buckets": [{
                "doc_count": <count>,
                "key": <value of field3>
              },
              {
                "doc_count": <count>,
                "key": <value of field3>
              }, ...
              ]
            }, ...
          ]
        },
        {
        "doc_count": <count>,
        "key": <value of field1>,
        "agg2": {
          "buckets": [{
            "doc_count": <count>,
            "key": <value of field2>,
            "agg3": {
              "buckets": [{
                "doc_count": <count>,
                "key": <value of field3>
              },
              {
                "doc_count": <count>,
                "key": <value of field3>
              }, ...
              ]
            },
            {
            "doc_count": <count>,
            "key": <value of field2>,
            "agg3": {
              "buckets": [{
                "doc_count": <count>,
                "key": <value of field3>
              },
              {
                "doc_count": <count>,
                "key": <value of field3>
              }, ...
              ]
            }, ...
          ]
        }, ...
      ]
    }
  }
} 
```

以下 python 代码在给定字段列表的情况下执行分组。如果您指定`include_missing=True`，它还包括缺少某些字段的值组合（如果您有 Elasticsearch 2.0 版，则不需要[它](https://github.com/elastic/elasticsearch/pull/11042)）

```
def group_by(es, fields, include_missing):
    current_level_terms = {'terms': {'field': fields[0]}}
    agg_spec = {fields[0]: current_level_terms}

    if include_missing:
        current_level_missing = {'missing': {'field': fields[0]}}
        agg_spec[fields[0] + '_missing'] = current_level_missing

    for field in fields[1:]:
        next_level_terms = {'terms': {'field': field}}
        current_level_terms['aggs'] = {
            field: next_level_terms,
        }

        if include_missing:
            next_level_missing = {'missing': {'field': field}}
            current_level_terms['aggs'][field + '_missing'] = next_level_missing
            current_level_missing['aggs'] = {
                field: next_level_terms,
                field + '_missing': next_level_missing,
            }
            current_level_missing = next_level_missing

        current_level_terms = next_level_terms

    agg_result = es.search(body={'aggs': agg_spec})['aggregations']
    return get_docs_from_agg_result(agg_result, fields, include_missing)

def get_docs_from_agg_result(agg_result, fields, include_missing):
    current_field = fields[0]
    buckets = agg_result[current_field]['buckets']
    if include_missing:
        buckets.append(agg_result[(current_field + '_missing')])

    if len(fields) == 1:
        return [
            {
                current_field: bucket.get('key'),
                'doc_count': bucket['doc_count'],
            }
            for bucket in buckets if bucket['doc_count'] > 0
        ]

    result = []
    for bucket in buckets:
        records = get_docs_from_agg_result(bucket, fields[1:], include_missing)
        value = bucket.get('key')
        for record in records:
            record[current_field] = value
        result.extend(records)

    return result 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T06:04:55.043

你可以通过两种方式做到这一点：

1）在单个方面结果中使用多个字段：

单个字段方面的示例：

```
curl -X GET "http://localhost:9200/sales/order/_search?pretty=true" -d '{
  "query": {
    "query_string": {
      "query": "shohi*",
      "fields": [
        "billing_name"
      ]
    }
  },
  "facets": {
    "facet_result": {
      "terms": {
        "fields": [
          "status"
        ],
        "order": "term",
        "size": 15
      }
    }
  }
}' 
```

单个方面结果中的多个字段的示例：

```
curl -X GET "http://localhost:9200/sales/order/_search?pretty=true" -d '{
  "query": {
    "query_string": {
      "query": "shohi*",
      "fields": [
        "billing_name"
      ]
    }
  },
  "facets": {
    "facet_result": {
      "terms": {
        "fields": [
          "status",
          "customer_gender",
          "state"
        ],
        "order": "term",
        "size": 15
      }
    }
  }
}' 
```

2）使用多方面结果集：

```
curl -X GET "http://localhost:9200/sales/order/_search?pretty=true" -d '{
  "query": {
    "query_string": {
      "query": "*",
      "fields": [
        "increment_id"
      ]
    }
  },
  "facets": {
    "status_facets": {
      "terms": {
        "fields": [
          "status"
        ],
        "size": 50,
        "order": "term"
      }
    },
    "gender_facets": {
      "terms": {
        "fields": [
          "customer_gender"
        ]
      }
    },
    "state_facets": {
      "terms": {
        "fields": [
          "state"
        ],
        ,
        "order": "term"
      }
    }
  }
}' 
```

参考链接： [http ://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)

# htmlunit - 提交下拉值 htmlunit

> ID：14181680
> 
> 赞同：1
> 
> 时间：2013-01-06T11:35:20.863
> 
> 标签：htmlunit

如何使用 HTML 单元执行以下操作？

1.  从第一个下拉列表中选择值。

2.  根据第一个下拉列表中选择的值，第二个下拉列表将生成一些值。

3.  用户必须从第二个下拉列表中选择一个值。

4.  两个下拉菜单都被选中，现在单击复选框，表单将使用 AJAX 提交。

# java - Java构造函数问题

> ID：14181686
> 
> 赞同：1
> 
> 时间：2013-01-06T11:35:58.183
> 
> 标签：java, constructor

我不知道为什么这段代码：

```
class HelloWorld
{
    HelloWorld()
    {
        System.out.println("1 cnstr ");
    }

    public static void main(String[] args)
    {
        HelloWorld a = new HelloWorld();
    }

    {
        System.out.println("2 cnstr ");
    }
} 
```

给我输出：

```
2 cnstr
1 cnstr 
```

为什么线路`System.out.println("2 cnstr ");`有效？它是什么样的块？我使用`jdb`并发现在构造函数中的任何行之前`JVM`使用该行开始块。`HelloWorld()`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T11:36:47.710

```
{
        System.out.println("2 cnstr ");
    } 
```

它是一个**实例初始化块**。它在执行类的构造函数之前运行。

从[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)：

> Java 编译器将初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T11:37:52.020

它是一个实例初始化程序块，在每个构造函数之前执行。

# ios - 带有 UITableView 索引的 NSFetchedResultsController 性能

> ID：14181687
> 
> 赞同：0
> 
> 时间：2013-01-06T11:36:00.643
> 
> 标签：ios, performance, cocoa-touch, indexing, nsfetchedresultscontroller

我正在学习`NSFetchedResultsController`，但有一件事让我感到困惑。与`NSFetchedResultsController`结合使用`UITableView`以帮助获取性能并根据当前显示在`UITableView`.

当您使用`UITableView`索引（如地址簿应用程序中的第一个字母）时，这是否意味着将加载整个数据集以确定所有部分的所有第一个字母？

索引的使用不会阻止`NSFetchedResultsController`它对加载的内容变得聪明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T22:06:30.670

`NSFetchedResultsController`从`sectionKeyPath`. 有人会假设要获取此值，将执行一次获取以仅获取此键的唯一值，而不是任何接近完整数据集的值。例如，它可能正在做一些事情，比如制作`NSFetchRequest`一个结果类型为`NSDictionaryResultType`、`returnsDistinctResults`设置为`YES`和`propertiesToFetch`仅设置为 的结果`sectionKeyPath`。

# c - 为什么 printf 显示 unsigned int 的负值？

> ID：14181691
> 
> 赞同：1
> 
> 时间：2013-01-06T11:36:15.630
> 
> 标签：c, linux, linux-kernel, system-calls

> **可能重复：**
> [带负值的无符号长整数](https://stackoverflow.com/questions/2455806/unsigned-long-with-negative-value)

我编写了一个内核模块，它中断任何系统调用，打印其当前的 user_id 和传递给系统调用函数的输入参数。其中，一个是 sys_ioctl()，如下：

```
asmlinkage long sys_ioctl(unsigned int fd, unsigned int cmd,unsigned long arg); 
```

这意味着所有输入参数都是无符号整数。

但是当我打印输入参数时，我得到以下输出：

```
 fd=21, cmd=-1072143871 and arg=3202983648 
 fd=21, cmd=-1072143871 and arg=3202983648 
 fd=21, cmd=-1072143871 and arg=3202983648 
 ---------- 
```

这是我的函数定义：

```
asmlinkage long our_sys_ioctl(unsigned int fd ,  unsigned int cmd , unsigned long arg)
{
    uid_t gtuid ;
    gtuid = getuid_call();
    printk ("our_sys_ioctl ---> uid = %d with fd=%i, cmd=%i and arg=%lu \n ", gtuid, fd, cmd, arg);
    return original_call_ioctl(fd , cmd , arg);
} 
```

知道为什么 cmd 值为负数以及这些值是什么意思吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T11:40:15.110

当您使用`%i`打印时，`cmd` **您将其转换`signed int`**为@Mario 之前猜测的那样。这就是为什么它是负面的。

您需要使用`%u`它来进行打印以使其保持`unsigned int`

> d 或 i - 有符号十进制整数
> 
> u - 无符号十进制整数

（来自：[http](http://www.cplusplus.com/reference/cstdio/printf/) ://www.cplusplus.com/reference/cstdio/printf/ ）

这将按您的预期工作。

```
printk ("our_sys_ioctl ---> uid = %d with fd=%i, cmd=%u and arg=%lu \n ", gtuid, fd, cmd, arg);
                                                    ^^^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T11:41:35.780

您 print 使用`%i`which 将参数转换为带符号的 int。用 打印`%u`。

# iphone - MapView 注释不可点击且不显示详细信息

> ID：14181692
> 
> 赞同：1
> 
> 时间：2013-01-06T11:36:16.220
> 
> 标签：iphone, objective-c, cocoa-touch

1-我正在使用以下代码，但是我的自定义引脚不会像默认我的位置引脚那样显示气泡。2- 有没有办法自定义我的位置图钉以将颜色从默认的蓝色更改为红色，或者增加它的动画圆半径？

```
-(void) showMarkers
{
    [self.mapView removeAnnotations:[self.mapView annotations]];
    for (int i = 0 ; i < 1;  i ++)
    {
        MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];

        Players *player = [self.playersArray objectAtIndex:i];

        annotationPoint.coordinate = CLLocationCoordinate2DMake([player.latitude doubleValue], [player.longitude doubleValue]);
        annotationPoint.title = player.name;
        annotationPoint.subtitle = [NSString stringWithFormat:@"Level %@", player.level ];
        [self.mapView addAnnotation:annotationPoint];
        MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(annotationPoint.coordinate, 1500, 1500);
        MKCoordinateRegion adjustedRegion = [self.mapView regionThatFits:viewRegion];
        [self.mapView setRegion:adjustedRegion animated:YES];

    }
}

- (void)map:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    self.mapView.centerCoordinate = userLocation.location.coordinate;
    myLocation = userLocation;
}

-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([[annotation title] isEqualToString:@"Current Location"] )
    {
        return nil;
    }

    MKAnnotationView *annView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"players"];
    annView.image = [UIImage imageNamed:@"marker.png"];
    annView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    annView.canShowCallout = YES;
    annView.enabled = YES;
    [annView setUserInteractionEnabled:YES];

    return  annView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:13:13.780

最近在一个应用程序中，我使用自定义图像来显示气泡而不是默认图钉。使用的代码发布在下面。请看一看。也许会有所帮助。

```
(MKAnnotationView *) mapView:(MKMapView *)mapView1 viewForAnnotation:(id <MKAnnotation>) annotation{

Annotation *annotationInst = (Annotation*)annotation;

MKAnnotationView *pinView = nil;
if(annotation != mapView.userLocation)
{
    static NSString *defaultPinID = @"mypin";
    pinView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];

    if ( pinView == nil ){
        pinView = [[[MKAnnotationView alloc]
                   initWithAnnotation:annotation reuseIdentifier:defaultPinID]autorelease];

    }        

    pinView.canShowCallout = YES;
    pinView.image = [UIImage imageNamed:@"pin.png"];

    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    pinView.rightCalloutAccessoryView = rightButton; 
}
else {
    [mapView.userLocation setTitle:@"You are here"];
}
return pinView;
} 
```

并获取标注附件按钮单击：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control{
Annotation *tappedAnnotation =  view.annotation;
CLLocationCoordinate2D tappedLocation = [tappedAnnotation coordinate]; 
```

}

# javascript - jQuery .on() 点击事件未触发

> ID：14181702
> 
> 赞同：4
> 
> 时间：2013-01-06T11:37:44.423
> 
> 标签：javascript, jquery, .net, twitter-bootstrap, asp.net-mvc-4

我正在开发一个在地图上显示事件的网站。当用户将鼠标悬停在事件图钉上时，会显示一个工具提示信息窗口并提供事件信息。当用户单击图钉时，它们应该被放大到更靠近事件。

我有这个功能可以在除 Firefox 之外的所有浏览器上运行。由于某种原因，每个图钉 div 的单击事件都不会触发。这特别奇怪，因为 mouseover 事件触发没有问题。我也没有看到任何错误。

```
$(document).on('click', 'div.pushpin', function () {
  alert('Detected a click!');
});

$(document).on('mouseover', 'div.pushpin', function () {
  // Displays tooltip
}); 
```

这是我的网站：[http ://www.raveradar.com/qa](http://www.raveradar.com/qa)

您可以比较它在 Chrome 和 Firefox 中的工作方式以查看问题。

我试图通过创建一个 jsFiddle 来隔离问题。但是点击事件在小提琴中没有问题地触发：http: [//jsfiddle.net/acraswell/9TxQg/4/](http://jsfiddle.net/acraswell/9TxQg/4/)

在这一点上，我真的可以用第二双眼睛检查我的工作了。

**编辑：** 我刚刚意识到，如果您禁用“位置：固定；” “图钉图标”图像上的 CSS 属性，突然单击图标工作正常。

**编辑2：** 我已经设法解决了这个问题，请在下面查看我的解决方案。我将把答案奖励给任何能够解释为什么原始代码一开始就被破坏的人，因为这是真正的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T12:05:37.010

**编辑**

我想我已经在你的 css 中为你缩小了范围我注意到你使用`pointer-events: all;`了根据 mozilla 是实验性的

> 警告：在 CSS 中对非 SVG 元素使用指针事件是实验性的。该功能曾经是 CSS3 UI 草案规范的一部分，但由于许多未解决的问题，已推迟到 CSS4。

[https://developer.mozilla.org/en-US/docs/CSS/pointer-events](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)

我认为这就是导致 Firefox 出现问题的原因，将它们从你的 css 和内联 css 中删除并尝试

* * *

仅当您单击数字而不是图像时，单击事件才有效尝试将单击事件绑定到图像而不是 div.pushpin

```
$(document).on('click', 'img.pushpin-icon', function () {
  alert('Detected a click!');
});

$(document).on('mouseover', 'div.pushpin', function () {
  // Displays tooltip
}); 
```

如果两个事件都在做同样的事情，你可以在 on

```
 $(document).on('click mouseover', 'img.pushpin-icon', function () {
      alert('Detected a click!');
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:52:49.207

您是否尝试过使用特定的 click() 函数而不是 on() 函数？

```
$("img.pushpin-icon").click(function(){alert("clicky");}); 
```

编辑：使用“图钉图标”，而不是图钉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T22:39:46.997

经过数小时的故障排除后，我解决了这个问题。以下是我采取的步骤：

1）如前所述，移除图片`position: fixed`上的属性`.pushpin-icon`似乎允许触发点击事件。

2) 我将`.pushpin-icon`'img' 标签更改为 a `div`，并使用 'background-image' CSS 属性来设置图标图像。

3）`position: fixed;`财产没了，我不得不调整`.pushpin`孩子们的相对位置。

现在它似乎工作得很好。我仍然不确定为什么它一开始就不起作用，这是真正的问题。我会把答案奖励给任何能弄清楚原因的人。

查看网站上的更改：[http ://www.raveradar.com/qa](http://www.raveradar.com/qa)

单击任何图钉后，控制台会记录一条消息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T11:53:41.217

我观察到您的网站在 firefox 中正确加载了所有内容，但在 Chrome 中却没有。*这*就是你的 onClick() 在 Chrome 中没有被触发的原因。*$(document).on() 将侦听器附加到将*要加载但尚未加载的元素。如果您可以直接将监听器附加到`pushpin`而不是`document`，那么您的监听器将`pushpin`在图钉完成加载后附加到，然后您的 onClick() 将被调用。查看this other SO question及其答案，它解决了类似的问题：

[jQuery Document.on()](https://stackoverflow.com/questions/10864683/how-to-use-jquery-document-on-on-elements-that-are-pulled-in-via-ajax)

它不能解决你的全部问题，但它确实缩小了范围：Chrome 没有加载你的元素，因此你的 onClick() 没有被触发。如果您能弄清楚 Chrome 为何会这样做，那么您的解决方法就是。同时，您可以将侦听器附加到元素的特定 ID/类

# qt - Qt - 如何杀死 QThread

> ID：14181709
> 
> 赞同：7
> 
> 时间：2013-01-06T11:38:54.193
> 
> 标签：qt

我正在尝试杀死/取消 QThread。我遵循了[https://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/的实施](https://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)

我像这样创建 QThread：

```
workerThread = new QThread();
ImageProcessor* worker = new ImageProcessor();
worker->moveToThread(workerThread);
connect(workerThread, SIGNAL(started()), worker, SLOT(process()));
connect(worker, SIGNAL(finished()), workerThread, SLOT(quit()));
connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));
connect(workerThread, SIGNAL(finished()), workerThread, SLOT(deleteLater()));
workerThread->start(); 
```

并尝试通过调用在某个 UI 事件上停止它：

```
workerThread->quit(); 
```

我的工人看起来像这样：

```
class ImageProcessor : public QObject
{
Q_OBJECT
public:
explicit ImageProcessor(QObject *parent = 0);
~ImageProcessor();

signals:
void finished();

public slots:
void process();

private:
//...
}; 
```

进程调用具有大量计算的 API

```
void ImageProcessor::process()
{
// API call...

emit finished();
} 
```

我的问题是，在线程上调用退出后，线程继续运行，即 API 的计算不会停止。因为工作人员只调用 API，所以我无法在工作人员循环中使用取消检查。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T12:21:35.910

您的繁重任务是如此简单，以至于我会使用`QtConcurrent::run`并忘记 QThread。

```
ImageProcessor* worker = new ImageProcessor();
connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));
QtConcurrent::run(worker, &ImageProcessor::process); 
```

这正是您所需要的，而且速度会更快一些，因为它将使用线程池中的线程，而不是创建一个新线程。

只要记住使用`Qt::AutoConnection`（默认值）。

要优雅地停止处理，您必须在您的 process 方法中对一些变量进行极化：

```
bool ImageProcessor::needEndNow() {
    QMutexLocker locker(mutex);
    return endNowRequested;
}

void ImageProcessor::requestEndNow() {
    QMutexLocker locker(mutex);
    endNowRequested = true;
}

void ImageProcessor::process()
{
   while(!needEndNow()) {
       // nextStep of processing
   }

   emit finished();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T10:14:10.403

如果你有这样的东西，没有任何循环：

```
void ImageProcessor::process()
{
    worker_api(); // that takes a lot of time
    emit finished();
} 
```

QThread 几乎无能为力。你可以做到，从好到坏：

*   也许您正在使用的 API 有另一个调用来停止该工作调用。但是既然你在这里问，我想没有这样的事情。
*   在不再需要时使用`QProcess`和它从不同的进程启动工作人员调用。`kill`优点：不用担心清理。对比：检索结果可能很困难。
*   `QThread::terminate`，但不建议使用（请参阅[文档中的警告](http://qt-project.org/doc/qt-4.8/qthread.html#terminate)：基本上，没有清理）。
*   在 Windows 中，`QThread::currentThreadId`为您提供一个可以用于其他操作系统调用的编号（请参阅[文档中的警告](http://qt-project.org/doc/qt-4.8/qthread.html#currentThreadId)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T15:41:05.370

您不能停止已阻塞的 QThread，至少不能以任何安全的方式停止。

例如，如果你输入了这个函数

```
void neverStop() {
    int *arr = new int[1024*1024];
    for (;;) {
    }
} 
```

线程不会响应任何退出消息，虽然大多数操作系统都有强制终止线程的方法，但任何分配的内存都不会被正确释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T11:55:41.120

> 即API 的计算不会停止。

所以你试图在计算过程中停止它？

*QThread::quit 仅在计算完所有内容后才*停止它。

您可以将计算拆分为较小的任务，甚至可以添加取消标志。在 ImageProcessor 对象上有一个普通的方法来设置它：

```
class ImageProcessor{
   void stop(){
     canceled = true;
   }
private:
   bool canceled;
} 
```

然后检查是否（取消）返回；在进程槽中。（只写布尔是一种线程安全的）

然后调用 stop(); 在对象上并在线程上退出（）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-07T11:41:42.463

而不是使用`thread->quit()`您应该在处理循环中包含一个取消标志（以适应 semahpore 的概念）。通过这种方式，您可以从内部正确地停止工作人员，例如通过停止处理并发出 finished() 信号。

您可以通过在工作人员中实现用于取消（例如`slot_cancelWorker()`）的插槽来设置标志。然后你可以将它与你的 GUI 连接起来：

```
connect(myPushButton, SIGNAL(clicked()), worker, SLOT(slot_cancelWorker())); 
```

当然，在处理函数内部，您必须检查未决事件。`QCoreApplication::processEvents()`因此，您必须定期致电。

# haskell - 我应该如何从列表中输出计算值？

> ID：14181713
> 
> 赞同：6
> 
> 时间：2013-01-06T11:39:32.657
> 
> 标签：haskell, frp

我有一个输出列表的长时间运行的计算。我想在计算时从该列表中输出值。什么是一个巧妙的方法来做到这一点？

目前我使用`mapM_ print`将每个值打印到 STDOUT。这对于将值打印到命令行的简单情况来说足够好，但感觉有点hacky并且难以使用。

此外，在某些时候，我想将我的命令行输出转换为交互式可视化。我怎样才能将我的列表变成类似 FRP 的事件流？能够将其作为事件源插入现有的 GUI 框架会很棒。

重写函数以使用列表以外的东西是一种选择，尽管允许我按原样获取列表的解决方案是理想的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T16:43:35.243

这是迭代者和像库这样的迭代者的工作。

使用[代理](http://hackage.haskell.org/package/pipes)库。

```
import Control.Proxy

runProxy $ fromListS [1..10] >-> <processing> >-> printD >-> <more> processing> 
```

`<processing>`您需要进行的加法计算在哪里。

类似的问题： mapM 的[懒惰版本](https://stackoverflow.com/questions/12609208/lazy-version-of-mapm)，[Haskell 的 mapM 不懒惰吗？](https://stackoverflow.com/questions/3270255/is-haskells-mapm-not-lazy)

例如：

```
> labeledPrint label x = putStrLn $ label ++ show x
> runProxy $ fromListS [1..4] >-> printD >-> mapD (*2) 
                              >-> useD (labeledPrint "Second printer: ")
1
Second printer: 2
2
Second printer: 4
3
Second printer: 6
4
Second printer: 8 
```

如果您颠倒应用程序的顺序并使用`<-<`而不是`>->`那么它看起来像正常的功能应用程序。

```
runProxy $ useD (labeledPrint "Second printer: ") <-< mapD (*2)
                                                  <-< printD
                                                  <-< fromListS [1..4] 
```

# java - 添加和排序后如何在列表视图项目上保持复选框选择？

> ID：14181714
> 
> 赞同：0
> 
> 时间：2013-01-06T11:39:44.100
> 
> 标签：java, android, listview

这是一个使用多项选择适配器的 ListView。

```
public class ExampleActivity extends ListActivity {

    private ListView list;
    private List<String> items;
    private ArrayAdapter<String> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_example);
        this.list = this.getListView();
        this.items = new ArrayList<String>();
        this.items.add("A");
        this.items.add("C");
        this.items.add("D");
        this.items.add("D");
        this.adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, items);
        this.list.setAdapter(adapter);

        this.user(); // simulating user selecting C

        this.button(); // simulating user press some button who adds items to list
    }

    private void user() {
        this.list.setItemChecked(1, true);
    }

    private void button() {
        this.items.add("B");
        Collections.sort(this.items);
        this.adapter.notifyDataSetChanged();
    }
} 
```

如果用户选择 C（索引 1），然后用户按下按钮将项目添加到列表和排序（如 B），则将选择 B（新索引 1）而不是 C。如何解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:55:39.707

这是因为您选择了索引**1**

```
 this.list.setItemChecked(1, true); // selects C 
```

在进行插入和排序之后，`B`是具有索引的项目`1`

尝试这个

```
this.list.setItemChecked(this.list.indexOf("c"),true); 
```

# java - 编辑文本中的重要数字

> ID：14181729
> 
> 赞同：0
> 
> 时间：2013-01-06T11:42:23.477
> 
> 标签：java, android

我有一个`EditText`用户输入数字的地方。

有没有办法设置有效数字？所以它会自动更改`"003645"`为`"365"`3.sf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:56:14.080

像这样：

```
 // input, you have to read your EditText
  String input = "003645";    // your example
  int significantFigures = 3; // your example

  // calculation
  int number = Integer.parseInt(input, 10);
  int tooBig = (int) Math.pow(10, significantFigures);
  while (number > tooBig) {
      number = (int) Math.round(number / 10.0);
  }
  System.out.println(number); // prints 365 
```

这将产生`1000`输入`001000`和`3`重要的数字。如果它应该产生`100`相同的输入和大量的数字，则需要在`while`条件中使用更大或等于。

# java - Servlet 过滤器 url-mapping /* 不适用于 404 错误

> ID：14181731
> 
> 赞同：1
> 
> 时间：2013-01-06T11:42:30.170
> 
> 标签：java, apache, servlet-filters, resin

我将 Resin Server & Apache 2.2 与虚拟主机一起使用。在这里，我面临调用混凝土过滤器的巨大挑战。我有一个通用的过滤器类来处理所有传入的请求。

例如：www.example.com/hello 这个 hello 没有调用下面的过滤器，而是抛出文件未找到错误（404）。

如果“hello”具有正确的 servlet 映射，则下面的过滤器正在工作。

**网页.xml：**

```
<filter>
  <filter-name>CorpFilter</filter-name>
  <filter-class>com.filter.CorpFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>CorpFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**阿帕奇日志：**

> [Fri Jan 04 22:05:07 2013] [error] [client xxx.xxx.xxx.xxx] 文件不存在：/home/xxxx/public_html/hello

为什么没有调用 servlet 过滤器并抛出 404 错误？Servlet 过滤器正在正确初始化。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:43:57.633

默认情况下，过滤器在成功的请求上分派。默认情况下，它们不会在错误请求上分派。为了在错误请求上也分派它们，请使用适当的`<dispatcher>`元素扩展过滤器映射：

```
<filter-mapping>
    <filter-name>CorpFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

请注意，当指定自定义调度程序类型并且您希望*保留*默认`REQUEST`调度程序时，您也应该明确指定它。请注意，出于显而易见的原因，我还假设 404 不是由 Web 代理 (Apache HTTPD) 处理，而是由 servlet 容器 (Resin) 本身处理。

# python - 通过 easy_install 在 Mountain Lion 下安装 Python 的 Pandas

> ID：14181732
> 
> 赞同：0
> 
> 时间：2013-01-06T11:42:34.850
> 
> 标签：python, gcc, pandas, easy-install

我在运行 Mountain Lion 的新 MacBookPro 上安装 Python 的 Pandas 库时遇到问题。

我尝试通过 easy_install 安装 Pandas。但是，easy_install 和 gcc 显然存在问题（请参阅下面的错误消息）。似乎easy_install 找不到它显然需要的gcc 编译器（gcc-4.0）。我所做的一切都与我之前在运行 Snow Leopard 的 MacBook 上所做的一模一样，一切正常。我更像是一个应用程序的人，而不是编程本身，所以我很感激任何帮助:-)

这是我尝试但没有解决问题的信息和事情的列表：

*   XCode 4.5 已安装，我还从 Xcode 中安装了命令行工具（也重新安装了 Xcode）。
*   在终端中启动 gcc 编译器也可以正常工作。

    Stefans-MacBook-Pro:/ Stefan$ which gcc /usr/bin/gcc Stefans-MacBook-Pro:/ Stefan$ gcc i686-apple-darwin11-llvm-gcc-4.2: 没有输入文件

*   路径设置是否存在问题，因此在调用 gcc 时，它没有正确重定向到编译器？由于我没有那么有经验，因此我不想在没有与您仔细检查的情况下开始创建链接...

*   我怀疑这个问题比 Pandas 更具体是 easy_install&gcc，因为我在尝试通过 easy_install 安装 Cython 时遇到了同样的错误。

我有点困惑，因为在雪豹下一切正常。

非常感谢！

这是完整的错误消息：

```
Stefans-MacBook-Pro:~ Stefan$ sudo easy_install pandas   
Searching for pandas
Processing pandas-0.10.0.zip
Writing /tmp/easy_install-zr8Lfg/pandas-0.10.0/setup.cfg
Running pandas-0.10.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-zr8Lfg/pandas-0.10.0/egg-dist-tmp-N1xJeV
warning: no files found matching 'setupegg.py'
no previously-included directories found matching 'doc/build'
warning: no previously-included files matching '*.so' found anywhere in distribution
warning: no previously-included files matching '*.pyd' found anywhere in distribution
warning: no previously-included files matching '*.pyc' found anywhere in distribution
warning: no previously-included files matching '.git*' found anywhere in distribution
warning: no previously-included files matching '.DS_Store' found anywhere in distribution
warning: no previously-included files matching '*.png' found anywhere in distribution
gcc-4.0: error: unrecognized command line option '-arch'
error: Setup script exited with error: command 'gcc-4.0' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:39:00.253

这里的问题是配置脚本正在寻找`gcc-4.0`而不是`gcc`. 由于 Apple 已经`gcc-4.0`很长时间没有发布了（如果我没记错的话，Xcode 3.1 for 10.5），这不可能是 Apple 构建的。

因此，除了 Xcode/命令行工具附带的工具链之外，您至少还有一个 gcc 工具链。而且，无论它来自哪里，它都没有 Apple 扩展，尤其是`-arch`标志。

这就是为什么你会得到：

```
gcc-4.0: error: unrecognized command line option '-arch' 
```

最简单的解决方案是找出您从哪里安装 gcc-4.0 并卸载它。

如果你不记得安装`gcc-4.0`了，有几种可能：

*   如果您使用 Homebrew、MacPorts 或 Fink，它可能已作为您安装的其他软件包的先决条件安装。在这种情况下，它几乎肯定应该分别位于 、`/usr/local/bin`或`/opt/local/bin`，`/sw/bin`而不是`/usr/bin`。
*   `gcc-4.0`由于某种原因，您安装的其他一些软件包也可能已经安装。

一般来说，拥有多个 gcc 工具链会导致混乱。安装多个 Python 2.7 也是如此。在这两种情况下，只需使用 Apple 的，除非您出于某种原因需要另一个，或者您真的知道自己在做什么。

既然您说这是您刚开始设置的新笔记本电脑，那么如果您迷路了，最好重新开始：将您的用户帐户和设置迁移到全新安装，然后重新安装您需要的东西。

（当我们这样做时，你通常最好使用`pip`而不是`easy_install`. 做 a `sudo easy_install pip`，然后你可以`sudo pip install pandas`和 Cython 等等。除了`pip`它自己和`readline`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:11:57.230

既然你已经有了 Xcode，我只会通过 Macports 安装。这将处理您所有的依赖项和编译问题。获取 Macports 及其简单如下：

```
sudo port install py27-pandas 
```

# python - 定期任务在 Django Celery 中不起作用

> ID：14181738
> 
> 赞同：3
> 
> 时间：2013-01-06T11:44:01.943
> 
> 标签：python, django, celery

这是我的定期任务：

```
from celery.task import PeriodicTask
from celery.registry import tasks
from datetime import timedelta
from datetime import datetime

class MyTask(PeriodicTask):
    run_every = timedelta(minutes=1)

    def run(self, **kwargs):
        self.get_logger().info("Time now: " + datetime.now())
        print("Time now: " + datetime.now())

tasks.register(MyTask) 
```

我在 python manage.py runserver 启动了我的 django 服务器，还使用 ​​python manage.py celeryd -B 启动了 celery。

尽管根据代码，命令提示符上仍然没有打印任何内容，应该已经打印了时间。

知道这里出了什么问题吗？看起来很直截了当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:22:53.513

你应该有类似的东西：

```
CELERYBEAT_SCHEDULE = {
    'proc': {
        "task": "tasks.processing",
        "schedule": timedelta(seconds=60),
        },
    } 
```

在您`celeryconfig.py`或 django 的 settings.py 中查看完整文档[http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T00:01:35.230

检查您的系统时区是否与 Django 时区相同。

对于 Django：从设置文件中更改它。

对于 linux 操作系统：更改如下：`ln -s /usr/share/zoneinfo/America/Chicago /etc/localtime`

# magento - Display Yes/No Drop-Down Attribute in Magento Frontend only if Yes is Selected

> ID：14181744
> 
> 赞同：1
> 
> 时间：2013-01-06T11:44:55.833
> 
> 标签：magento, attributes

我仅在选择“是”时才尝试显示自定义是/否产品属性。到目前为止，这是我的代码：

```
<?php $freeship = Mage::getModel('catalog/product')->load($this->getProduct()->getId())->getAttributeText('free_shipping_discount');
if ($freeship == "yes")
echo '<span class="free-ship">FREE SHIPPING</span>'; ?> 
```

它不会产生错误，但也不会显示任何内容。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:58:35.403

也许它是一个大写是？我会尝试使用 var_dump($freeship) 来查看您的变量是否返回您所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T08:41:25.413

这对我有用：

```
<?php if ($_product->getFreeShippingDiscount()):?>
<span class="free-ship">FREE SHIPPING</span>            
<?php endif;?> 
```

# asp.net - 自动转义 <'s 和 >'s

> ID：14181747
> 
> 赞同：0
> 
> 时间：2013-01-06T11:45:07.573
> 
> 标签：asp.net, html, css, visual-studio-2010, visual-web-developer-2010

我想在网页上显示文本，*而*不必记住检查它并检查其中是否有任何`<`'s 和`>`'，所以简单地将文本从记事本复制到 Visual Studio 并不好。

所以我尝试了“粘贴替代”，但它添加了换行符，并保留了原始字体等。我想要的只是文本本身。

有没有一种自动的方式——也许是通过 CSS 或 Visual Studio？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:49:09.493

正则表达式搜索+替换：`s/</&lt;/`和`s/>/&gt;/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:53:32.607

找到了一个使用 jQuery 的答案。

使用该`.text()`功能。

将返回 HTML 中存在的所有文本。

[http://api.jquery.com/text/](http://api.jquery.com/text/)

例如`($('<p>test</p>').text());`

会产生`test`

**编辑**

对于字符串替换，您可以尝试使用 javascript replace 方法。在文件加载时调用它。它应该可以解决问题

```
str.replace(">","&gt;"); 
```

# c# - 如何使用 FacebookClient 发布到 Facebook 页面

> ID：14181749
> 
> 赞同：4
> 
> 时间：2013-01-06T11:45:30.913
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

我正在尝试发布到 facebook 页面，因为页面和我遇到了问题。

当我运行它时，我得到：

> Facebook.FacebookOAuthException: (OAuthException - #200) (#200) 用户没有足够的管理权限来执行此页面上的此操作

我相信我需要一个用户访问令牌而不是应用程序访问令牌。在线示例显示了用“代码”交换令牌。我目前无法检索此“代码”。

对于如此简单的任务，这个过程似乎非常复杂。我在这里错过了什么吗？

我需要用户访问令牌吗？假设此代码位于 Windows 服务中并且无法提示用户，我如何获取此令牌。

```
const string applicationId = "114810611889734";
const string applicationSecret = "*** SECRET ***";
const string pageId = "102661313114041";

var client = new FacebookClient();

dynamic token = client.Get("oauth/access_token", new
{
    client_id = applicationId,
    client_secret = applicationSecret,
    grant_type = "client_credentials"
});

client.AccessToken = token.access_token;

dynamic parameters = new ExpandoObject();
parameters.title = "test title";
parameters.message = "test message";

var result = client.Post(pageId + "/feed", parameters); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T05:14:52.193

好的，我终于可以在我的 Facebook 页面上发帖了，但现在我需要一个用户才能这样做。这些是我采取的步骤...

首先，我需要创建一个新的 Facebook 帐户，用于发布到此页面。

接下来，我转到主页的管理员角色部分，并将此用户添加为经理。

我从这个 URL 获得了这个用户的访问令牌：

> [https://www.facebook.com/dialog/oauth?client_id=APPLICATION_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=code+token&display=popup&scope=manage_pages](https://www.facebook.com/dialog/oauth?client_id=APPLICATION_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=code+token&display=popup&scope=manage_pages)

重定向之后，URL 应该包含一个不会过期的 access_token。（expires_in=0 应该在 URL 中。）

为了确认这一点，我去了[https://developers.facebook.com/tools/debug/access_token](https://developers.facebook.com/tools/debug/access_token)的访问令牌调试器，输入我的访问令牌并点击调试。

最后，我对代码进行了一些更改，以使用我的访问令牌而不是应用程序 ID 和应用程序密码。

```
const string accessToken = "MY_ACCESS_TOKEN";
const string pageId = "MY_PAGE_ID";

var client = new FacebookClient(accessToken);

dynamic parameters = new ExpandoObject();
parameters.title = "test title";
parameters.message = "test message";

var result = client.Post(pageId + "/feed", parameters); 
```

这个访问令牌现在被硬编码到我的应用程序的配置文件中。

# python - 如何检查列表中包含的类型？

> ID：14181750
> 
> 赞同：2
> 
> 时间：2013-01-06T11:45:31.977
> 
> 标签：python, error-reporting

我想在不定义函数的情况下执行以下操作：

```
if isinstance(x,(list,tuple)) and every_element_isinstance(x,basestring):
   foobar 
```

IE：`implementing type checking`

有速记/`builtin`这个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T11:54:31.407

我认为这是最好的解决方案（如果我理解这个问题）

```
if isinstance(x, (list, tuple)) and all(isinstance(i, basestring) for i in x):
    #do whatever 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T11:54:15.883

```
if isinstance(x, (list, tuple)) and all([isinstance(i, basestring) for i in x]):
    foobar 
```

令人惊讶的是，这里的列表理解`[ ... ]`比没有的更快，无论是短列表还是长列表：

短名单：

```
>>> timeit('isinstance(x, (list, tuple)) and all(isinstance(i, basestring) for i in x)', "x=['a','b','c']")
2.7594685942680144
>>> timeit('isinstance(x, (list, tuple)) and all(isinstance(i, basestring) for i in x)', "x=['a','b','c']")
2.8013695153947538
>>> timeit('isinstance(x, (list, tuple)) and all([isinstance(i, basestring) for i in x])', "x=['a','b','c']")
2.4351678506033068
>>> timeit('isinstance(x, (list, tuple)) and all([isinstance(i, basestring) for i in x])', "x=['a','b','c']")
2.4491469896721583 
```

长名单：

```
>>> timeit('isinstance(x, (list, tuple)) and all(isinstance(i, basestring) for i in x)', "x=['a','b','c'] * 1000", number=1000)
1.3357901657891489
>>> timeit('isinstance(x, (list, tuple)) and all(isinstance(i, basestring) for i in x)', "x=['a','b','c'] * 1000", number=1000)
1.3305278872818462
>>> timeit('isinstance(x, (list, tuple)) and all([isinstance(i, basestring) for i in x])', "x=['a','b','c'] * 1000", number=1000)
1.2626525921055531
>>> timeit('isinstance(x, (list, tuple)) and all([isinstance(i, basestring) for i in x])', "x=['a','b','c'] * 1000", number=1000)
1.2881240045551863 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-06T11:54:41.957

没有内置定义[泛型类型](http://en.wikipedia.org/wiki/Generic_programming)。但是有[很多验证库](https://stackoverflow.com/q/12235120/89391)可以模仿这个功能。

[使用https://github.com/alectomas/voluptuous](https://github.com/alecthomas/voluptuous)的示例：

```
>>> from voluptuous import Schema
>>> s_list = Schema([basestring]) # only strings in a list are allowed
>>> s_list("hello") 
...
voluptuous.InvalidList: expected a list
>>> s_list([123])
...
voluptuous.InvalidList: invalid list value @ data[0]
>>> s_list(["correct"])
["correct"] # returns the object, if validation was successful 
```

前几天，这个库[增加了对元组的支持：](https://github.com/alecthomas/voluptuous/commit/fb942615fab1f13c1af4f7bc71e8a7f538d32474)

```
>>> s_tuple = voluptuous.Schema((basestring, )) 
```

现在将两者结合起来得到你的结果：

```
>>> from voluptuous import any

# - this is now equivalent to your code
# - raises Exceptions on invalid input
>>> schema = Schema(any(s_list, s_tuple)) 
```

甚至比 double- 还要快一点`isinstance`：

```
>>> from timeit import timeit

>>> timeit('(schema(i) for i in x)', "x=['a','b','c']")
0.679318904876709

>>> timeit("""
        (isinstance(x, (list, tuple)) 
         and all(isinstance(i, basestring)) for i in x)""", "x=['a','b','c']")
0.7801780700683594 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-16T16:57:16.423

使用 voluptuous '0.8.7' 您可以从[miku](https://stackoverflow.com/a/14181819/2944893)更新答案并跳过“元组部分”：

```
>>> from voluptuous import Schema
>>> from timeit import timeit
>>> s_list = Schema([basestring]) # only strings in a list are allowed
>>> timeit('(s_list(i) for i in x)', "x=['a','b','c']")
0.503572940826416
>>> timeit("(isinstance(x, (list, tuple)) and all(isinstance(i, basestring)) for i in x)", "x=['a','b','c']")
0.5400209426879883 
```

# c# - 如何从另一个 winform 更改 form1 属性或其对象属性？

> ID：14181751
> 
> 赞同：0
> 
> 时间：2013-01-06T11:45:41.817
> 
> 标签：c#, .net, winforms

我无法从从`Form1`.

有没有简单的方法可以解决这个问题？

我在网上找到了几个无用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:13:30.297

在 MainForm 中设置一个或多个公共属性。打开第二个窗体时，将该窗体的所有者设置为 MainForm。这样，您就可以在第二个窗体中访问 MainForm 的属性。示例代码：

代码隐藏 Form1：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public String SomeProperty { get; set; }

    //Event of a normal button with name 'OpenFormButton'
    private void OpenFormButton_Click(object sender, EventArgs e)
    {
        var secondForm = new Form2
        {
            Owner = this
        };
        secondForm.Show();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        SomeProperty = "HELLO WORLD";
    }
} 
```

代码隐藏 Form2：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        var owner = this.Owner as Form1;
        var val = owner.SomeProperty;
        MessageBox.Show(val); //Shows a MessageBox with 'HELLO WORLD'
    }
} 
```

这只是一个简单的代码，展示了如何访问另一个表单上的属性。不仅可以获取属性的值，还可以设置（更改）属性的值。这也适用于复杂类型而不是字符串和整数。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:00:31.043

您必须将 Form1 的实例传递给 Form2 构造函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:20:33.240

我更喜欢使用这样的简单回调函数：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public String SomeProperty { get; set; }

    private void OpenFormButton_Click(object sender, EventArgs e)
    {
        var secondForm = new Form2()
        {
            GetSomeProperty = () => { return SomeProperty ;};
        };
        secondForm.Show();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        SomeProperty = "HELLO WORLD";
    }
}

public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public Func<string> GetSomeProperty
    {
        get;
        set;
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        MessageBox.Show(GetSomeProperty.Invoke());
    }
} 
```

每次调用 GetSomeProperty.Invoke(); Func 将调用 get 访问器并从第一个 Form 返回它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T11:49:26.327

将 的属性设置`Form1`为 public 但请注意，这违反了 OOP 规则

# c++ - 如何找到复杂多边形的面积 - C++

> ID：14181756
> 
> 赞同：1
> 
> 时间：2013-01-06T11:46:45.470
> 
> 标签：c++, geometry, polygon, computational-geometry

对于非复杂的多边形，这很简单：

```
A = 1/2 * (x1*y2 - x2*y1 + x2*y3 - x3*y2 + ... + x(n-1)*yn - xn*y(n-1) + xn*y1 - x1*yn) 
```

这是我在 C++ 中的实现：

```
struct Point { 
    double x, y;
} point[210];

double area(int n) {
    double a=0, b=0;
    for(int i=0; i<n-1; ++i) {
        a += point[i].x * point[i+1].y;
        b += point[i].y * point[i+1].x;
    }
    return (a - b)/2;
} 
```

但是如果多边形很复杂呢？有没有类似的方法来找到它的区域？

**注意：**我尝试使用相同的技术，但没有奏效。对于多边形

```
(0,0) , (0,7) , (4,3) , (0,3) , (2,4) , (2,1) , (0, 0) 
```

上面的公式给了我 28.000，应该是 26.000。我能给出的唯一解释是三角形 (0,3) , (2,4) , (2,3) 被计算了两次（点 (2,3) 是线段 (0,3) 的交点， (4,3) 和 (2,4) , (2,1))。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:49:50.853

根据[此链接](http://www.mathwords.com/a/area_convex_polygon.htm)，您说明的公式**适用于凸多边形**，但您给出的示例**似乎不是**一个。

ps 而不是二维数组，请考虑使用以下内容以获得更好的可读性。

```
struct Point{ 
   double x,y;
};

Point point[210];

...
a += point[i].x * point[i+1].y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:56:07.837

该公式适用于*简单*的多边形（那些不是*自相交的*），凸面与否。请注意，它计算多边形的有*符号*面积。如果（简单）多边形是*顺时针方向*，则使用该公式计算的面积将为负数。

对于非简单多边形，该公式计算多边形所有简单分量的有符号面积之和。您的示例组件具有自相交，实际上它的一个组件，三角形，对该区域有两倍的贡献。

# c# - 是否可以在两个不同的类中重载

> ID：14181760
> 
> 赞同：2
> 
> 时间：2013-01-06T11:47:33.537
> 
> 标签：c#, asp.net, oop, loops, overloading

我的一些朋友正在就 OOP 的一个基本概念互相争论，是否可以在两个不同的类中重载？

据我了解，重载只能在同一个类中完成，但是当涉及到不同的类时，它被称为覆盖，这是它们两个之间的主要区别。

我的理解准确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T11:50:34.360

重载意味着拥有多个同名的方法。

如果它们之间具有继承关系，则重载可能位于不同的类上。

覆盖意味着一个类有一个父类，并且具有与它明确想要使用的基类*相同签名的方法，**而不是*父类中的方法。C# 使用`override`关键字来表示这一点。

```
public class Base
{
  protected virtual void CanBeOverridden() {}

  public void ToOverload() {}

  // An overload of ToOverload in the Base class
  public void ToOverload(int param) {}
}

public class Child : Base
{
  // override
  protected override void CanBeOverridden() {}

  // An extra overload of ToOverload in the child class
  public void ToOverload(string param) {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:52:56.957

在不同的类中可以重载：

```
class Class1
{
    public void Function1(string param1);
}

class Class2 : Class1
{
    public void Function1(string param1, string param2);
} 
```

然后，您有 2 个 function1 选项

# iphone - CCLayer 更新方法与 box2d 实体失败

> ID：14181761
> 
> 赞同：0
> 
> 时间：2013-01-06T11:47:38.853
> 
> 标签：iphone, ios, cocoa-touch, cocos2d-iphone, box2d

我正在阅读 Rod Strougo 和 Ray Wenderlich 的《Learning Cocos2D》一书，我决定使用 Cocos2d-Box2d 制作自己的 iOS 游戏。现在我有一个我无法解决的问题。我创建了一个名为 Box2dLayer 的类，它继承自 CCLayer，我有一个继承自 Box2dLayer 的 Level1Layer 类。一切正常，直到我在屏幕上呈现两种不同类型的 box2d 主体。现在每次我开始游戏时，它都会在 -[Box2DLayer update:] 方法中失败，给出以下信息：线程 1：EXC_BAD_ACCESS(code=1, address= 0xsomething); 1 - 第 2 行的`sp.position...` [Box2DLayer 更新：] - 第 2 行的 [CCScheduler 更新：]`entry->impMethod( entry->target, updateSelector, dt );`

这是我的代码：

```
//Box2DSprite.h
@interface Box2DSprite : CCSprite
{
    b2Body *body;
}
@property (assign) b2Body *body;
@end

//Box2DSprite.mm

@implementation Box2DSprite
@synthesize body;
-(void)dealloc
{

    body = NULL;
    [super dealloc];
}
@end

//Box2DLayer.h
@interface Box2DLayer : CCLayer
{
    b2World *world;
    GLESDebugDraw *debugDraw;
    b2MouseJoint *mouseJoint;
    b2Body *groundBody;
}
-(void)setupGround;
@end

//Box2DLayer.mm

@implementation Box2DLayer
-(id)init
{
    if (self = [super init]) {
        [self scheduleUpdate];
        [self setupWorld];
        [self setupDebugDraw];
        [self setupGround];
        self.isTouchEnabled = YES;
    }
    return self;
}

- (void)setupWorld {
    b2Vec2 gravity = b2Vec2(0.0f, -10.0f);
    world = new b2World(gravity);
    //world->SetContinuousPhysics(true);
}

-(void) draw {    
    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );
    kmGLPushMatrix();
    world->DrawDebugData();
    kmGLPopMatrix();
}

- (void)setupDebugDraw {
    debugDraw = new GLESDebugDraw(PTM_RATIO *[[CCDirector sharedDirector] contentScaleFactor]);
    world->SetDebugDraw(debugDraw);
    debugDraw->SetFlags(b2Draw::e_shapeBit);
}
- (void)registerWithTouchDispatcher {
    [[[CCDirectorIOS sharedDirector] touchDispatcher]  addTargetedDelegate:self priority:0
                                                           swallowsTouches:YES];
}
-(void)update:(ccTime)dt {
    int32 velocityIterations = 3;
    int32 positionIterations = 2;
    world->Step(dt, velocityIterations, positionIterations);
    for(b2Body *b = world->GetBodyList(); b != NULL; b = b->GetNext())
    {
        if (b->GetUserData() != NULL) {
            Box2DSprite *sp = (Box2DSprite *) b->GetUserData();
            sp.position = ccp(b->GetPosition().x * PTM_RATIO*RETSIZE,b->GetPosition().y * PTM_RATIO*RETSIZE);
            sp.rotation = CC_RADIANS_TO_DEGREES(b->GetAngle() * -1);
        }
    }
}
-(void)setupGround{
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    b2BodyDef groundBodyDef;

    groundBodyDef.type = b2_staticBody;
    groundBodyDef.position.Set(0, 10/RETSIZE/PTM_RATIO);
    groundBody = world->CreateBody(&groundBodyDef);
    CCSprite *gsprite = [CCSprite spriteWithFile:@"ground.png"];
    groundBody->SetUserData(gsprite);

    b2EdgeShape groundBox;

    groundBox.Set(b2Vec2(0,0), b2Vec2(winSize.width/PTM_RATIO/RETSIZE-150/PTM_RATIO,0));
    groundBody->CreateFixture(&groundBox,0);

}
-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{
    CGPoint touchLocation = [touch locationInView:[touch view]];
    touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];

    b2Vec2 locationWorld = b2Vec2(touchLocation.x/PTM_RATIO/RETSIZE, touchLocation.y/PTM_RATIO/RETSIZE);

    b2AABB aabb;
    b2Vec2 delta = b2Vec2(1.0/PTM_RATIO/RETSIZE, 1.0/PTM_RATIO/RETSIZE);
    aabb.lowerBound = locationWorld - delta;
    aabb.upperBound = locationWorld + delta;
    SimpleQueryCallback callback(locationWorld);
    world->QueryAABB(&callback, aabb);

    if (callback.fixtureFound) {
        b2Body *body = callback.fixtureFound->GetBody();

        b2MouseJointDef joint;
        joint.bodyA = groundBody;
        joint.bodyB = body;
        joint.target = locationWorld;
        joint.maxForce = 100*body->GetMass();
        joint.collideConnected = true;

        mouseJoint = (b2MouseJoint *)world->CreateJoint(&joint);
       // body->SetAwake(false);
        return YES;
    }

}

-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event{
    CGPoint touchLocation = [touch locationInView:[touch view]];
    touchLocation = [[CCDirector sharedDirector]
                     convertToGL:touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];
    b2Vec2 locationWorld = b2Vec2(touchLocation.x/PTM_RATIO/RETSIZE, touchLocation.y/PTM_RATIO/RETSIZE);
    if (mouseJoint) {
        mouseJoint->SetTarget(locationWorld);        
    }

}

-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event{
    if (mouseJoint) {
        world->DestroyJoint(mouseJoint);
        mouseJoint = NULL;
        }
}
-(void) dealloc
{
    if (world) {
        delete world;
        world = NULL;

    }
    if (debugDraw) {
        delete debugDraw;
        debugDraw = NULL;
    }
    [super dealloc];
}
@end 
```

程序在更新方法中的 for 循环处崩溃。注意，如果我注释掉 for 循环，一切正常，但精灵不会附加到 box2D 主体。

如果您不能给出答案，出了什么问题，请告诉我可能出现的问题列表。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:56:57.797

最后我解决了这个问题！我只需要检查我要更新的主体是否不是静态的。现在一切正常。更正的更新方法如下所示：

```
-(void)update:(ccTime)dt {
    int32 velocityIterations = 3;
    int32 positionIterations = 2;
    world->Step(dt, velocityIterations, positionIterations);
    for(b2Body *bdy = (world->GetBodyList()); bdy != NULL; bdy = bdy->GetNext())
    {
        if (bdy->GetType()!=b2_staticBody && bdy->GetUserData() != NULL) {
            Box2DSprite *sp = (Box2DSprite *) bdy->GetUserData();
            sp.position = ccp(bdy->GetPosition().x * PTM_RATIO*RETSIZE,bdy->GetPosition().y * PTM_RATIO*RETSIZE);
            sp.rotation = CC_RADIANS_TO_DEGREES(bdy->GetAngle() * -1);

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:26:21.630

嗨，错误说这是内存问题；您正在尝试访问一些不存在的东西。2件事；在您的代码中，我在任何地方都看不到精灵主体与世界相连。第二，为什么Box2dSprite类中的body属性是赋值的，不应该是retain。

# java - 使用 jdbc 连接数据库时的安全问题

> ID：14181762
> 
> 赞同：1
> 
> 时间：2013-01-06T11:47:40.873
> 
> 标签：java, sql, security, jdbc

我创建了一个使用 jdbc 与 sql 数据库连接的 java 应用程序。它是一个摇摆应用程序。连接数据库的代码在项目的其中一个文件中。sql server 的用户名和密码在那里被硬编码。

我想要一个解决方案，以便我连接到服务器（网络上具有数据库的计算机之一）而不直接在应用程序中写入密码，而是应该从服务器上的某个文件中读取。怎么做？

同样，这里出现了一个安全问题，我必须在应用程序中提供文件名。由于 jar 文件可以很容易地被反编译以获得源代码，因此任何人都可以看到文件名并访问它。

如何解决这个安全问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:52:22.763

我理解你的担忧，但没有办法**完全**达到你想要的。如果应用程序必须与数据库连接，它必须“知道”访问凭据。

“混淆”技术（如“加密密码并即时解密”或“从其他地方提取密码”）只是将问题转移到其他地方的缓解措施。

您应该考虑添加一个抽象层。您的应用程序应该访问仅提供应用程序所需的 CRUD 功能的**远程 Web 服务，并应用**[最小权限原则](http://en.wikipedia.org/wiki/Principle_of_least_privilege)。现代客户端-服务器架构的设计方式是“富客户端”（如您的 Swing 应用程序）不直接与 DBMS 交互。是的，它速度较慢，但​​更安全且可扩展。此外，您的富客户端变得“不那么丰富”（它不实现业务逻辑），因此例如，如果您更改表，则无需更新它。

使用 Web 服务还使您能够*实施复杂的约束*。例如，以在线帮助台为例。一个常见的规则是您不能在已关闭的工单上发布消息。你如何在 DBMS 中执行它？如果我可以登录到您的 DBMS，我可以为`closed`属性设置为的票发布尽可能多的消息`1`：除非某些 DBMS 甚至不支持某些繁琐的 CHECK 子句，否则没有任何东西会强制执行约束。

**隐藏你的数据库！**

将 REST 视为用于 Web 服务的 SOAP 的轻量级替代方案。在 Java 中，您可以使用[Jersey](http://jersey.java.net/)快速创建 REST 服务器和客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:01:00.293

问题是凭证不应该在代码中硬编码。这也适用于 Web 服务凭据。

我建议向用户询问用户名密码，一次（第一次启动）或者甚至定期（比如每月）。然后您可以将凭据保存在用户主目录中，[设置权限](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#setReadable%28boolean,%20boolean%29)以便只有所有者可以访问它们（让操作系统关心安全性）。大多数需要身份验证的 Web 服务器或多或少都遵循这些原则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:12:32.247

你说

> 我想要一个解决方案，以便我连接到服务器（网络上具有数据库的计算机之一）而不直接在应用程序中写入密码，而是应该从服务器上的某个文件中读取

希望您不是将服务器作为数据库服务器，因为首先要从数据库服务器访问密码，您需要在服务器端（部署应用程序的地方）访问您需要密码的数据库服务器:)。理想情况下，您应该提供凭据在部署应用程序的属性文件中。这是它通常的做法

关于安全性，我能想到的一种方法是您可以编写将在属性文件中生成凭据的程序，并邮寄给 db admin 以在某个时间点更改凭据。

# java - ArrayList 只检测最后添加的对象的碰撞

> ID：14181763
> 
> 赞同：1
> 
> 时间：2013-01-06T11:48:00.277
> 
> 标签：java, arraylist, collision-detection

在检测玩家与许多相同对象（在本例中为墙砖）之间的碰撞时，我遇到了问题。问题是我的程序仅在我与**最后添加**的墙砖接触时才检测到碰撞。这是用java写的...

我正在使用矩形（它们的相交方法）来检测碰撞。

代码示例：

更新瓷砖：

```
 for (int i = 0; i < wallTileArr.size(); i++)
    {
        wallTile = wallTileArr.get(i);
        wallTile.update(p);
        if(wallTile.getBounds().intersects(Screen.getBounds()))
        {
            wallTile.draw = true;
        }
        else if(!wallTile.getBounds().intersects(Screen.getBounds()))
        {
            wallTile.draw = false;
        }
    } 
```

这是我用瓷砖制作墙的课程：

```
 public Wall(int x, int y, int length, int dir, WallTile wallTile)
     {
 this.x = x;
 this.y = y;
 this.length = length;
 this.wallTile = wallTile;

    for(int i = 0; i < length; i++)
    {
        if (dir == 0)
        {
            Methods.addWallTile(new WallTile(x+(wallTile.size*i), y));
        }
        else if (dir == 1)
        {
            Methods.addWallTile(new WallTile(x, y+(wallTile.size*i)));
        }

        else if (dir != 0 || dir != 1)
        {
            System.out.println("Error in setting direction: 0 = horizontal, 1 = vertical. Your input is: "+dir );
            //Methods.Exit(1);
        }

    } 
```

}

这是我用墙壁制作房间或房屋的课程：

```
 public HouseSmall_1(int x, int y,int size, int rotation, WallTile wallTile)
    {
this.x = x;
this.y = y;
this.wallTile = wallTile;
this.size = size;

if (rotation == 0)
{
    Methods.addWall(new Wall(x, y, size, 1, wallTile));
    Methods.addWall(new Wall(x+(size*wallTile.size), y, size, 1, wallTile));

    Methods.addWall(new Wall(x, y, size, 0, wallTile));
    Methods.addWall(new Wall(x, y+(size*wallTile.size), (size)/2, 0, wallTile));
    Methods.addWall(new Wall(x+wallTile.size+((size*wallTile.size)/2), y+(size*wallTile.size),(size/2), 0, wallTile));
} 
```

}

将瓷砖和墙壁添加到它们的 arrayList 中的代码：

```
public static void addWallTile(WallTile wallTile)
{
    Controller.wallTileArr.add(wallTile);
}

public static void addWall(Wall wall)
{
    Controller.wallArr.add(wall);
} 
```

更新 wallTile.java 文件中的碰撞代码：

```
 public void update(Player p)
{
    x+=Screen.movementX;
    y+=Screen.movementY;

    if(getBounds().intersects(p.upGetBounds()))
    {

        p.walk = false;

    }
    else
    {
        p.walk = true;
    }
} 
```

为什么会这样？你建议我如何解决它？

随时索取更多代码示例！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:01:12.480

```
if(getBounds().intersects(p.upGetBounds()))
{

    p.walk = false;

}
else
{
    p.walk = true;
} 
```

问题是这段代码。您正在为未与玩家碰撞的每个图块重置标志，因此只有最后一个图块可以与玩家成功碰撞并且不会重置标志。

ie - 假设有 2 个瓷砖`#1`正在碰撞，`#2`但没有。

在循环的第一次迭代中 -

`#1`正在碰撞 => p.walk = false;

在循环的第二次迭代中 -

`#2`没有碰撞 => p.walk = true;**`//value has been reset.`**

但是，如果`#2`是一个碰撞，则标志无法重置。

修复：删除`else`子句并将其重置一次**到**循环之前`true` **。**`for`

# sql-server - 用于 Saas 的 SQL Server - 最佳方法

> ID：14181764
> 
> 赞同：1
> 
> 时间：2013-01-06T11:48:05.753
> 
> 标签：sql-server, performance, saas

假设我们有一个庞大的客户群，每个客户都可以拥有大量的数据。在 SQL Server 中，处理此问题的最佳方法是什么？

是否会为所有记录提供一个新字段来识别客户？

为每个客户创建一个新数据库？

其他选择？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:59:52.503

阅读[多租户数据架构](http://msdn.microsoft.com/en-us/library/aa479086.aspx)。您的选择是：

*   单独的数据库
*   共享数据库，独立架构
*   共享数据库，共享架构

我强烈建议阅读这篇文章以获取每一个的详细信息，因为要考虑的变量太多了，所以这篇文章最终不会推荐一个或另一个，因为*你*必须根据你的具体情况选择一个基础。

由于它是在 2006 年编写的，因此它不考虑[Azure 联合](http://msdn.microsoft.com/en-us/library/windowsazure/hh597452.aspx)，这是一种特殊的`Shared Database, Shared Schema`方法，但具有由联合机制提供的内置横向扩展。

此外，在 stackoverflow 和 dba.stackexchange 上搜索“多租户 sql server”将揭示大量先前的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T07:24:27.453

您可以使用[partitiondb](http://www.partitiondb.com/)。他们为您的案例提供最佳解决方案。

看看他们的[saas 例子](http://partitiondb.com/saas-example-general-overview/)。如您所见，每个客户都有一个 gatedb 和多个 db。它就像数据库的面向对象概念。他们还支持不同服务器上的数据库。

# ruby - ruby /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 无法加载此类文件 -- libnotify (LoadError)

> ID：14181769
> 
> 赞同：2
> 
> 时间：2013-01-06T11:48:43.177
> 
> 标签：ruby

我比较新鲜，我想使用这个 pomo util：[https](https://github.com/visionmedia/pomo#readme) ://github.com/visionmedia/pomo#readme 。

但是当我在我的 ubuntu 12.10 终端上执行 pomo 时：

```
/var/lib/gems/1.9.1/gems/commander-4.1.3/lib/commander/runner.rb:365:in 
  `block in require_program': 
   program version required (Commander::Runner::CommandError)
    from /var/lib/gems/1.9.1/gems/commander-4.1.3/lib/commander/runner.rb:364:in `each'
    from /var/lib/gems/1.9.1/gems/commander-4.1.3/lib/commander/runner.rb:364:in `require_program'
    from /var/lib/gems/1.9.1/gems/commander-4.1.3/lib/commander/runner.rb:52:in `run!'
    from /var/lib/gems/1.9.1/gems/commander-4.1.3/lib/commander/delegates.rb:11:in `run!'
    from /var/lib/gems/1.9.1/gems/commander-4.1.3/lib/commander/import.rb:10:in `block in <top (required)>'
    /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 
      cannot load such file -- libnotify (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.9.1/gems/pomo-2.0.2/lib/pomo.rb:5:in `<top (required)>'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.9.1/gems/pomo-2.0.2/bin/pomo:7:in `<top (required)>'
    from /usr/local/bin/pomo:23:in `load'
    from /usr/local/bin/pomo:23:in `<main>' 
```

我该怎么办。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:35:11.617

不完全确定问题是什么。但至少从修复这个错误开始：

```
cannot load such file -- libnotify 
```

...和：

```
sudo apt-get install libnotify1
sudo gem install libnotify 
```

祝你好运，它会解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T09:55:41.097

就我而言，这是一个 RVM Ruby 版本问题。我使用的是 Ruby 1.9，当我将其更改为 1.8 时，迁移成功了。

```
rvm use 1.8 
```

# android - 非谷歌地图 api 密钥对我有用

> ID：14181770
> 
> 赞同：0
> 
> 时间：2013-01-06T11:48:50.137
> 
> 标签：android, google-maps, google-maps-api-3, google-api, google-maps-api-2

我将两个键与 debug.keystore 和自定义密钥库一起使用，但只有网格显示在我的地图上

这是我在开始地图活动时的日志输出

```
01-06 17:14:38.475: W/System.err(4391): IOException processing: 26
01-06 17:14:38.475: W/System.err(4391): java.io.IOException: Server returned: 3
01-06 17:14:38.482: W/System.err(4391):at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
    01-06 17:14:38.482: W/System.err(4391):at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
    01-06 17:14:38.482: W/System.err(4391):at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
    01-06 17:14:38.482: W/System.err(4391):at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
                                                at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:05:00.610

这是我的 manifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.bombil.aawaz"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />

<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

<!-- Creates a custom permission so only this app can receive its messages. -->
<permission
    android:name="com.bombil.aawaz.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.bombil.aawaz.permission.C2D_MESSAGE" />

<!-- This app has permission to register and receive data message. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<!-- Network State Permissions to detect Internet status -->
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<!-- Permission to vibrate -->
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.bombil.aawaz.Registration"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"
        android:screenOrientation="portrait"

    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz." />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

    <activity
        android:name="com.bombil.aawaz.TraceLocation"
        android:label="@string/app_name"

    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz.TraceLocation" />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

    <activity
        android:name="com.bombil.aawaz.HelpMe"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"
       android:screenOrientation="portrait"
    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz.HelpMe" />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

    <activity
        android:name="com.bombil.aawaz.HelpAlert"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"
        android:screenOrientation="portrait"
    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz.HelpAlert" />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

     <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" 
               android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.bombil.aawaz" />  
        </intent-filter>   
    </receiver>

    <service
        android:name=".GCMIntentService">
    </service>

    <activity
        android:name="com.bombil.aawaz.AlertWidget"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"

    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz.AlertWidget" />
            <category android:name="android.intent.category.DEFAULT"/>

                     </intent-filter>

                  </activity>

                </application>

                  </manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:56:36.570

在活动标签中声明这个

```
<activity ....... >
        ...
        ...
        <meta-data android:name="com.google.android.maps.v2.API_KEY"
                android:value="your_api_key"/>
</activity> 
```

# mysql - 在多台服务器之间的mysql中自动重新同步表

> ID：14181771
> 
> 赞同：0
> 
> 时间：2013-01-06T11:48:55.250
> 
> 标签：mysql

我正在寻找一些解决方案，用于将一个表从一台 mysql 服务器自动重新同步/复制到许多其他服务器。

我不需要主/从解决方案，因为服务器不是以这种方式连接的，但是有一些表，只有在一台服务器上更改了这个表，而其他服务器也需要实际的表。

一些想法如何做到这一点？是否有一些守护进程正在监视背景变化并在有变化时同步表。

当然，我可以编写自己的工具来同步表，但首先我想问一下是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:53:55.593

[钨复制](http://code.google.com/p/tungsten-replicator/)器做了很多复制特殊情况。它可能可以帮助你。

将所有更改表的 MySQL 服务器配置为主服务器，然后创建一个环或将这些更改分发给其他服务器。

# c# - 将 string[] 转换为 ObservableCollection

> ID：14181775
> 
> 赞同：2
> 
> 时间：2013-01-06T11:49:21.750
> 
> 标签：c#, .net, c#-4.0, casting, observablecollection

我有一个`string[]`. 我想做的是`string[]`将`ObservableCollection<string>`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T11:52:02.190

类型转换不起作用。您需要[`ObservableCollection`](http://msdn.microsoft.com/en-us/library/cc679169.aspx)使用`string`数组进行初始化。

```
new ObservableCollection(<string array>) 
```

# java - 共享 WAR 和 logback 日志分离

> ID：14181779
> 
> 赞同：0
> 
> 时间：2013-01-06T11:49:29.307
> 
> 标签：java, logging, tomcat7

我正在尝试在 Tomcat 7 下使用 logback ( [http://logback.qos.ch](http://logback.qos.ch) ) 实现 Web 应用程序的日志分离。我已经阅读了他们网站上的所有教程，即：

[http://logback.qos.ch/manual/loggingSeparation.html](http://logback.qos.ch/manual/loggingSeparation.html)

它依赖于在每个 Web 应用程序 web.xml 中提供 JNDI 条目并在 logback 配置中使用它们。这很简单。问题很棘手，我只有一个 WAR，它通过单独的上下文配置（在 TOMCAT_HOME\conf\Catalina\localhost 下）在多个上下文中部署：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context docBase="c:\applications\app" path="/Test1" reloadable="true">
</Context> 
```

使用这种方法，我无法修改 web.xml 文件以提供不同的应用程序名称。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:48:00.143

您可以实现 ServletContextListener ：

```
public class YourContextListener implements ServletContextListener {
...
@Override
public void contextInitialized(ServletContextEvent sce) {
...
} 
```

并且在 contextInitialized 方法中使用来自 servlet 上下文路径的信息更新应用程序的 logback 上下文名称 JNDI 值。

# php - 如果它们只包含数字，我可以遍历 PHP 中的多维数组并将类型从字符串转换为整数吗？

> ID：14181780
> 
> 赞同：2
> 
> 时间：2013-01-06T11:49:43.493
> 
> 标签：php, type-conversion

我有一个多维数组，其中一些值是字符串，一些值是数字。当我将数组转换为 JSON 对象时，我得到如下所示的结果：

```
"A" : "1", "B" : "Text", "C" : "3" 
```

目标是有一个看起来像这样的 JSON

```
"A" : 1, "B" : "Text", "C" : 3 
```

之前，我通过在 JSON 编码后编辑 JSON 来完成此操作：

```
$JSON = preg_replace('/"(-?\d+\.?\d*)"/', '$1', json_encode($array)); 
```

但由于种种原因，这一直是个问题。

因此，相反，在将数组转换为带有 的 JSON 之前`json_encode()`，我想逐步检查所有值并确保如果一个值是一个数字，那么他们为该值键入的类型从 更改`string`为`int`。

我知道我可以使用 settype() 命令在 PHP 中设置变量的类型：

```
settype(int, $variable); 
```

我认为我需要将它与类似的命令结合起来`array_walk()`，但我不知道如何以某种方式结合它，以便它进行测试以仅对数字起作用。

是否可以在 PHP 中搜索多维数组，查找仅包含数字的值并将它们转换为`int`类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:56:42.097

自 PHP 5.3.3 以来有一个选项[`json_encode`](http://php.net/manual/en/function.json-encode.php)应该这样做：[`JSON_NUMERIC_CHECK`](http://php.net/manual/en/json.constants.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T11:59:49.787

您可以使用以下`JSON_NUMERIC_CHECK`选项：

```
$array = array('A' => '1', 'B' => 'Text', 'C' => '3');
echo json_encode($array, JSON_NUMERIC_CHECK); 
```

或者您可以遍历数组：

```
$array = array('A' => '1', 'B' => 'Text', 'C' => '3');
foreach ($array as & $value) {
    if (is_string($value) && ctype_digit($value)) {
        $value = (int) $value;
    }
}
echo json_encode($array); 
```

编辑：只是为了后代，`&`变成`$value`一个引用（它指向数组项的实际内容），而不仅仅是一个带有值的变量。

# erlang - Erlang 基于接口的设计

> ID：14181785
> 
> 赞同：1
> 
> 时间：2013-01-06T11:50:30.850
> 
> 标签：erlang

如果我要构建新模块，但首先要定义他们必须满足的模板（接口/合同），我应该使用行为，还是有一些更受欢迎的解决方案？显然，我想以这样一种方式构建我的 [非平凡的] 模块，以便以后可以放入该功能的不同实现中。

我想确保我正在建立适当和有效的习惯，并且搜索不会出现有关该主题的即时/有用信息。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T22:01:57.323

在 erlang 中，您可以让模块具有相同类型的相同方法，这就足够了。如果您想确保存在某种规范和/或合同，您可以使用带有行为的 R15 功能并`-callback`制作透析器可以为您检查的类型规范。除此之外，通常的好想法也适用：将您从抽象中获得的值视为模块外部的抽象。否则，简单的直接替换不会那么有效。

我经常通过接口模块在 erlang 中进行抽象。说我正在写应用程序`foo`。我经常有一个模块`foo`，这个模块是使用应用程序的唯一方法。您不得以任何其他方式调用应用程序。对于较大的系统，公开暴露的模块更多，但基本思想是保持暴露列表较小。

这确保您可以根据需要重写分解模块背后的内容。您可以决定添加更多进程、更改监督树等。

Erlang 中的关键通常是指定进程之间的协议。并保持稳定。该协议强制解耦，因为进程无法共享状态，这对您以后想要重新设计部分代码时有利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:50:48.287

行为基本上是你唯一的选择:(我大量使用它们来达到这个目的，但我真的很想有一些更类似于 ML 仿函数的东西。

对于小于模块规模的接口，有类型注释的高阶函数，也是次优的。

# c++ - 如何在 -std=c++11 -Weverything -Werror 中使用 clang++

> ID：14181789
> 
> 赞同：19
> 
> 时间：2013-01-06T11:51:19.940
> 
> 标签：c++, c++11, compilation, clang, compiler-warnings

我想编译以下文件（temp.cpp）：

```
#include <iostream> 

class Foo {
public:
  Foo() = default;
};

int main(){
  std::cout << "Works!" << std::endl;
  return 0;
} 
```

使用以下命令：`clang++ temp.cpp -o temp -std=c++11 -Weverything -Werror`

有一个错误：

> temp.cpp:5:11：错误：默认函数定义与 C++98 不兼容 [-Werror,-Wc++98-compat]

我知道有一个像 c++98-compat 这样的警告，它是一切的一部分。如何启用除 c++98-compat 之外的所有警告？-Weverything 是否有 c++11 兼容标志？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-06T18:50:20.807

实际上，您可能不想要所有警告，因为许多警告可以被认为是风格或主观的，而其他警告（例如您遇到的警告）在您的情况下只是愚蠢的。

`-Weverything`最初建造的原因有两个：

*   发现：否则很难获得所有可用警告的列表
*   黑名单替代方案：使用 gcc，您可以选择您希望应用的警告（白名单），`-Weverything`您可以选择您不希望应用的警告；优点是当迁移到新版本的编译器时，您更有可能从新警告中受益

显然，发现与生产使用并不真正兼容；因此，您似乎陷入了*黑名单*。

Clang 诊断系统将输出（默认情况下）负责生成警告的最具体警告组的名称（此处`-Wc++98-compat`），并且可以通过`no-`在`-W`.

因此，对于列入黑名单，您将获得：

```
-Weverything -Wno-c++98-compat -Wno-... 
```

并且鼓励您不时修改列入黑名单的警告列表（例如，当您升级到较新的编译器时）。

# eclipse - 将项目部署到 JBoss 7.1.1 时出现“无法索引”错误

> ID：14181790
> 
> 赞同：1
> 
> 时间：2013-01-06T11:51:41.720
> 
> 标签：eclipse, spring, maven, jsf-2, jboss7.x

我有一个 Spring 3 + maven + JSF 2.0 + primefaces 项目。当我部署到 Jboss 7.1.1 并在 Eclipse 中运行服务器时，在启动过程中会显示很多警告消息，如下所示：

```
12:24:28,262 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015852: Could not index class com/sun/faces/context/FacesContextImpl$ComponentMessagesIterator.class at /Users/bonski/Google Drive/MyProject/server/jboss-as-7.1.1.Final/standalone/deployments/SportPack.war/WEB-INF/lib/jsf-impl-2.1.6.jar: java.util.zip.ZipException: invalid LOC header (bad signature)
at java.util.zip.ZipFile.read(Native Method) [classes.jar:1.6.0_37]
at java.util.zip.ZipFile.access$1200(ZipFile.java:31) [classes.jar:1.6.0_37]
at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:459) [classes.jar:1.6.0_37]
at java.util.zip.ZipFile$1.fill(ZipFile.java:242) [classes.jar:1.6.0_37]
at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141) [classes.jar:1.6.0_37]
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218) [classes.jar:1.6.0_37]
at java.io.BufferedInputStream.read1(BufferedInputStream.java:258) [classes.jar:1.6.0_37]
at java.io.BufferedInputStream.read(BufferedInputStream.java:317) [classes.jar:1.6.0_37]
at java.io.DataInputStream.readFully(DataInputStream.java:178) [classes.jar:1.6.0_37]
at java.io.DataInputStream.readFully(DataInputStream.java:152) [classes.jar:1.6.0_37]
at org.jboss.jandex.Indexer.verifyMagic(Indexer.java:387) [jandex-1.0.3.Final.jar:1.0.3.Final]
at org.jboss.jandex.Indexer.index(Indexer.java:630) [jandex-1.0.3.Final.jar:1.0.3.Final]
at org.jboss.as.server.deployment.annotation.ResourceRootIndexer.indexResourceRoot(ResourceRootIndexer.java:77) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.server.deployment.annotation.AnnotationIndexProcessor.deploy(AnnotationIndexProcessor.java:51) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_37]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_37]
at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_37] 
```

最后我有以下错误：

```
12:24:28,943 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.deployment.unit."SportPack.war".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit."SportPack.war".STRUCTURE: Failed to process phase STRUCTURE of deployment "SportPack.war"
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_37]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_37]
at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_37] Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: Failed to get manifest for deployment "/Users/bonski/Google Drive/MyProject/server/jboss-as-7.1.1.Final/standalone/deployments/SportPack.war/WEB-INF/lib/jsf-impl-2.1.6.jar"
at org.jboss.as.server.deployment.module.ManifestAttachmentProcessor.deploy(ManifestAttachmentProcessor.java:73) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
... 5 more  
Caused by: java.util.zip.ZipException: invalid LOC header (bad signature)
at java.util.zip.ZipFile.read(Native Method) [classes.jar:1.6.0_37]
at java.util.zip.ZipFile.access$1200(ZipFile.java:31) [classes.jar:1.6.0_37]
at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:459) [classes.jar:1.6.0_37]
at java.util.zip.ZipFile$1.fill(ZipFile.java:242) [classes.jar:1.6.0_37]
at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141) [classes.jar:1.6.0_37]
at java.util.jar.Manifest$FastInputStream.fill(Manifest.java:422) [classes.jar:1.6.0_37]
at java.util.jar.Manifest$FastInputStream.readLine(Manifest.java:356) [classes.jar:1.6.0_37]
at java.util.jar.Manifest$FastInputStream.readLine(Manifest.java:390) [classes.jar:1.6.0_37]
at java.util.jar.Attributes.read(Attributes.java:359) [classes.jar:1.6.0_37]
at java.util.jar.Manifest.read(Manifest.java:180) [classes.jar:1.6.0_37]
at java.util.jar.Manifest.<init>(Manifest.java:50) [classes.jar:1.6.0_37]
at org.jboss.vfs.VFSUtils.readManifest(VFSUtils.java:216)
at org.jboss.vfs.VFSUtils.getManifest(VFSUtils.java:199)
at org.jboss.as.server.deployment.module.ManifestAttachmentProcessor.deploy(ManifestAttachmentProcessor.java:69) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
... 6 more 
```

这是我的 pom.xml 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
      http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.sportPack.app</groupId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>sp</name>
<url>http://maven.apache.org</url>

<repositories>
    <repository>
        <id>prime-repo</id>
        <name>PrimeFaces Maven Repository</name>
        <url>http://repository.primefaces.org</url>
        <layout>default</layout>
    </repository>
</repositories>

<properties>
    <spring.version>3.1.1.RELEASE</spring.version>
    <hibernate.version>3.5.1-Final</hibernate.version>
</properties>

<dependencies>

    <!-- Spring 3 dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>   

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- JSF library -->
    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-api</artifactId>
      <version>2.1.6</version>
    </dependency>

    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-impl</artifactId>
      <version>2.1.6</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Primefaces library -->
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.1.1</version>
    </dependency>

    <!-- Hibernate library -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.5.1-Final</version>
    </dependency>

    <!-- MySQL Java Connector library -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.17</version>
    </dependency>

    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.1.2</version>
    </dependency>            

    <!-- Log4j library -->
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.4</version>
    </dependency>

</dependencies>

<artifactId>sp</artifactId> 
```

.

# powershell - 在 Get-ChildItem 等类别中显示输出

> ID：14181798
> 
> 赞同：3
> 
> 时间：2013-01-06T11:53:01.647
> 
> 标签：powershell

有谁知道如何在 get-childitem 等函数多次运行时显示输出（数组管道输入）？我会尝试用一个例子来展示它。

```
PS C:\Users> ".\Graimer", ".\Public" | Get-ChildItem

    Directory: C:\Users\Graimer

Mode                LastWriteTime     Length Name                                                            
----                -------------     ------ ----                                                            
d-r--        20.12.2012     15:59            Contacts                                                        
d-r--        06.01.2013     01:23            Desktop                                                         
d-r--        02.01.2013     17:15            Documents                                                       
d-r--        05.01.2013     16:38            Downloads                                                       
d-r--        20.12.2012     15:59            Favorites                                                       
d-r--        20.12.2012     15:59            Links                                                           
d-r--        20.12.2012     15:59            Music                                                           
d-r--        20.12.2012     15:59            Pictures                                                        
d-r--        20.12.2012     15:59            Saved Games                                                     
d-r--        20.12.2012     15:59            Searches                                                        
d-r--        20.12.2012     15:59            Videos                                                          

    Directory: C:\Users\Public

Mode                LastWriteTime     Length Name                                                            
----                -------------     ------ ----                                                            
d-r--        20.12.2012     13:57            Documents                                                       
d-r--        26.07.2012     10:13            Downloads                                                       
d-r--        26.07.2012     10:13            Music                                                           
d-r--        26.07.2012     10:13            Pictures                                                        
d-r--        26.07.2012     10:13            Videos 
```

在我的函数中，当我使用数组输入和处理 { } 块时，Write-output 会将所有结果放在一个表中，就像它应该的那样。但是我怎么能像这样格式化呢？显示时按目录分隔，同时存储为标准对象数组？好像找不到关于它的文章。是否只能使用已编译的 cmdlet 没关系，无论如何我都在寻找一些线索:)

编辑：添加了我的代码。只需创建 psobjects 并使用 Write-Object 来显示它们。

```
Function Get-RecurseFileCount
{
    [CmdletBinding()]
    Param
    (
        [Parameter(ValueFromPipeline=$true)]
        [String[]]$Path = "."
    )
    Begin
    {
    }
    Process
    {
        foreach ($rootpath in $Path)
        {
            Write-Verbose "Testing if path of rootdirectory exists"
            if(Test-Path $rootpath)
            {
                Write-Verbose "Getting all recursive subfolders"
                $folders = Get-ChildItem $rootpath -Recurse -ErrorAction SilentlyContinue | where {$_.PSIsContainer}

                Write-Verbose "Starting to count files in rootfolder"
                $folder = Get-Item $rootpath
                $fcount = (Get-ChildItem $rootpath -ErrorAction SilentlyContinue | where {!$_.PSIsContainer}).Count
                New-Object psobject -Property @{FolderName = $folder.Name; FolderPath = $folder.FullName; FileCount = $fcount} | Write-Output

                Write-Verbose "Starting to count files in subfolders"
                foreach($folder in $folders)
                {
                   $fname = $folder.Name
                   $fpath = $folder.FullName
                   $fcount = (Get-ChildItem $fpath -ErrorAction SilentlyContinue | where {!$_.PSIsContainer}).Count
                   New-Object psobject -Property @{FolderName = $fname; FolderPath = $fpath; FileCount = $fcount} | Write-Output
                }
                Write-Verbose "Finished with filecount"
            }
        }
    }
    End
    {
    }
} 
```

而且`Format-Table -GroupBy ..`不是答案。一种解决方案是添加一个名为的属性`root = $rootpath`并添加一个按属性分组的默认视图，并将其`root`隐藏在表中，这样它就不会多次显示。问题只是..如何？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:12:02.290

您必须在文件中提供`GroupBy`视图中的信息`format.ps1xml`并更新格式数据以获得所需的行为。在您的会话中编写`ps1xml`和加载它是没有办法的。

[http://technet.microsoft.com/en-us/library/dd315396.aspx](http://technet.microsoft.com/en-us/library/dd315396.aspx)

# asp.net - 如何使用带有 SQL 命令的 ajax 加载程序

> ID：14181800
> 
> 赞同：0
> 
> 时间：2013-01-06T11:53:08.753
> 
> 标签：asp.net, asp.net-ajax

嗨，我有一个项目作为申请人，用户通过更多选项卡提交他的数据，他将他的简历添加到数据旁边，但是当数据插入数据库时​​需要很长时间，用户可能会点击更多次，这导致插入重复数据。

我建议使用 Ajax 加载器作为弹出窗口，但我不知道解决这个问题的最佳解决方案，因为我需要这个加载器等到数据插入 DB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:58:57.657

查看[此 SO 答案](https://stackoverflow.com/a/6064279/96505)，该答案显示了如何设置变量以查看请求当前是否正在运行。这样，您可以在进程运行时暂时禁用单击功能，然后在一切完成后启用它。

**编辑**
我已经修改了上面链接中的 jQuery 代码，以展示你*可以*如何做你需要的事情。这些功能需要用您自己的实现来填写。我无法为您做到这一点-我不知道您当前代码的结构...

```
var requestRunning = false;
$('#save_link').live('click', function () {
if (requestRunning) { // don't do anything if an AJAX request is pending
    return;
}

$(".save_link").text("Saving ...");

var ajaxOpts = {
    type: "",
    url: "", 
    dataType: "",
    data: "",
    success: function (data) {
        // something to show the user a save is happening maybe?
    },
    complete: function() {
        requestRunning = false;
    }

};

requestRunning = true;
$.ajax(ajaxOpts);
return false;
}); 
```

# html - 宽度 100% 页脚问题 - HTML CSS

> ID：14181801
> 
> 赞同：2
> 
> 时间：2013-01-06T11:53:10.220
> 
> 标签：html, css

我有一个大问题。我正在设计一个登陆页面，但我的页脚元素有问题！

我将其宽度设置为 100%，但是当我在浏览器中预览它时，它不是 100%，而是在左侧、右侧和底部留下了几个像素的边框。

这是页脚的 CSS：

```
footer {
width: 100%;
background: white;
height: 100px;
margin-top: 100px;

} 
```

如果我添加以下内容，任何内容都会发生变化：left: 0px; 底部：0px；或对：0px；

我能怎么做？

如果我没有很好地解释问题，这是一张图片。

[http://tinypic.com/r/zsoh8m/6](http://tinypic.com/r/zsoh8m/6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:58:18.773

似乎父元素（可能`<body>`或任何`<div>`）具有固定宽度或一些边距和/或填充。

`width:100%;`占用父元素提供的所有可用空间。例如，如果父级的宽度为 700 像素，那么您的页脚也会有这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:58:23.170

看起来您没有重置标签上的`padding`and`margin`值。`body`浏览器在那里使用一组标准的 CSS 规则，其中通常包括一些填充和边距。

将此添加到您的 CSS 中：

```
body { margin: 0; padding: 0; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T11:58:24.913

看起来那是您的 body 元素的边距/填充，而不是页脚本身。尝试将以下内容添加到您身体的 CSS 标记中：

```
body
{
  margin:0;
  padding:0;
} 
```

还将这两个属性添加到您的页脚 css 标记中，以确保它不会从另一个元素继承任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T12:00:55.387

这看起来是一个合并/填充问题。您可以重置主体的填充和页脚的边距，使其覆盖 100% 宽度

```
body {
    margin: 0px;
    padding: 0px;
}

footer {
    margin: 0px;
} 
```

# android - MK802 II 上的 Android 大容量存储文件夹？

> ID：14181804
> 
> 赞同：-1
> 
> 时间：2013-01-06T11:53:34.073
> 
> 标签：android, android-sdcard

我正在使用运行库存 Android ICS 的 MK802 迷你 PC。它**没有**插入外部 micro-sd 卡。

连接到我的 PC 时，该设备显示为大容量存储设备 - 我可以将文件复制到它。到现在为止还挺好。

问题是，我似乎无法在设备中找到这些文件（使用我的 PC 上的 SSH 或直接从设备的文件资源管理器中）。就好像设备上不存在目录结构（在我的 PC 上映射为“G”的目录结构）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:56:41.900

设备是否已植根？尝试安装[Total Commander for Android](https://play.google.com/store/apps/details?id=com.ghisler.android.TotalCommander&hl=nl)，您可以尝试导航到您的存储文件夹，您将在左上角看到文件路径（例如“/sdcard0”或“/sdcard1”）

# python - 使用 mod_wsgi 在 Apache 上部署 django 应用程序

> ID：14181812
> 
> 赞同：1
> 
> 时间：2013-01-06T11:53:55.720
> 
> 标签：python, django, apache, mod-wsgi

我在使用 mod_wsgi 的 Apache HTTP 服务器上部署 Django 应用程序时遇到了一些问题。我已向 httpd.conf (WSGIScriptAlias) 添加了信息，这些信息指示带有测试内容的文件 wsgi.py：

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

当我运行它时，一切似乎都很好，因为我可以看到“Hello world！”。但是当我将文件 wsgi.py 更改为：

```
import os
import sys

os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我有：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request. 
```

wsgi.py 文件与 settings.py 文件位于同一目录中...（我的所有应用程序都在子目录中：mydomain/public_html/hc/hc/hc/settings.py - hc 是我的应用程序的名称）

有什么问题？我应该怎么做才能使我的应用程序正常工作？如何找出导致错误的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:18:06.123

```
sys.path.append('path_to_python_dir')
sys.path.append('path_to_project') 
```

将这些行添加到您的 wsgi.py 文件中。

settings.py 中的问题也会导致 500 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:10:38.083

我自己解决了我的问题添加了这个帮助我（导入后）：

```
sys.path.append('path_to_project')
sys.path.append('path_to_wsgi_py_file') 
```

# zend-framework - 在插件中添加到 zend 视图的路径

> ID：14181817
> 
> 赞同：0
> 
> 时间：2013-01-06T11:54:32.570
> 
> 标签：zend-framework

我正在尝试在 preDispatch 插件中为我的视图脚本添加新路径。

我的最终目标是从同一个 Zend Framework 应用程序运行多个站点，每个站点都有自己的布局和视图脚本。但是，我希望在站点没有自己的视图/布局的情况下使用默认布局/视图。

我已经让布局正常工作，但我无法加载视图脚本。

我的views文件夹布局如下

```
/application
    /modules
        /views
            /scripts
                /index
                    index.phtml -> the default index controller view script
                /sites
                    /domingod -> this is a site
                        /index
                            /index.phtml -> the sites index controller view script 
```

我想要实现的是加载domingod/index/index.phtml 中的索引视图脚本，如果找不到该文件，我希望呈现默认的index.phtml 视图脚本。

到目前为止我已经尝试过了，但没有运气

```
Zend_Layout::getMvcInstance()->getView()->setScriptPath($viewScriptPath); 
```

这似乎添加了路径，但 ZF 仍然呈现默认 index.phtml 而不是站点 (domingod) 之一。

我希望这一切都有意义，非常感谢。

加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:59:12.413

我想出的解决方案是检查该站点是否有视图脚本，然后将其设置为呈现。

```
class FreedomS_Zend_Controller_Plugin_SetView extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
        {
            $module = $request->getModuleName();
            $controller = $request->getControllerName();
            $action = $request->getActionName();

            $viewScriptPath = APPLICATION_PATH . '/modules/' . $module . '/views/scripts/sites/' . Zend_Registry::get('siteId') . '/';

            $view = Zend_Controller_Action_HelperBroker::getExistingHelper('ViewRenderer')->view;
            if (file_exists($viewScriptPath . $controller . '/' . $action . '.phtml'))
                $view->addScriptPath($viewScriptPath);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:18:04.000

实际上它总是寻找 index/index.phtml。这是基本动作和基本控制器。如果你想实现你的目标，我认为你应该在那里设置重定向并进行一些检查。

```
$this->_redirect(   $this
                            ->view
                            ->url(array('controller' => 'domingod',
                                        'action' => 'index')));
            return; 
```

但是以我的拙见，您应该确定自己的网站上有什么，没有什么。如果站点不必存在，请在此处设置一个重定向链接，您的网站将作为瑞士时钟运行。

# php - 将自定义响应从 PHP 后端加载到 Jqgrid

> ID：14181820
> 
> 赞同：0
> 
> 时间：2013-01-06T11:55:01.210
> 
> 标签：php, jquery, jqgrid

几天来，我一直在寻找解决我的情况的方法，但我似乎找不到任何可以帮助我的东西。

我允许我的用户使用简单的表单在数据库上进行自定义搜索，然后服务器发回代表结果的 JSON 编码对象（这部分功能正常）。

问题是网格没有被刷新，我似乎无法显示这些结果。

我试图做以下事情，但它只是再次刷新网格一次，然后向我显示所有结果，而无需进行任何搜索。

我可以以某种方式调整 jqgrid 以显示搜索结果吗？

完成此操作后，我还想将我的系统与 jqgrid 的排序和分页功能结合起来（允许我的客户对他们的结果进行分页和排序）。

提前感谢您的帮助！

```
enter code here

 $(function() {

    $("#list2").jqGrid({
        url:'applicants.temp.php',
        datatype: "json",
         width: 900,
         height: 300,
         scroll: false,
         shrinktofit: false,
         gridview: true,
         direction: '<?=$web_direction?>',
         colNames:['id', '<?=$mylabel["last_updated"]?>', '<?=$mylabel["job_title"]?>', '<?=$mylabel["applicant_name"]?>', '<?=$mylabel["cv_filename"]?>', '<?=$mylabel["referer_name"]?>',
        '<?=$mylabel["note"]?>', '<?=$mylabel["media_id"]?>', '<?=$mylabel["ref_type"]?>', '<?=$mylabel["job_internal_id"]?>', 'status_id', 'job_id', ''],
          colModel:[
          {name: 'id',index:'2', width:10, hidden: true, align:'<?=$col_direction?>'},
          {name:'last_updated', index:'1', width:20, align:'<?=$col_direction?>'},
          {name:'job_title',index:'8', width: 20, align:'<?=$col_direction ?>'},
          {name:'applicant_name', index:'3', width:40, align:'<?=$col_direction?>'},
          {name:'cv_filename',index:'11', width:30, align:'center'}, 
          {name:'referer_name', index:'4', width:40, align:'<?=$col_direction?>'},
          {name:'note',index:'10', width:60, align:'<?=$col_direction?>'},  
          {name:'media_id',index:'5', width:20, align:'<?=$col_direction?>'},    
          {name:'ref_type',index:'6', width:20, align:'<?=$col_direction?>'}, 
          {name:'job_internal_id',index:'9', width:15, hidden: false, align:'
          <?=$col_direction?>'}, 
          {name:'status_id',index:'12', hidden:true, width:0, align:'<?=$col_direction?                             >'},
          {name:'job_id',index:'7', hidden:true, width:0, align:'<?=$col_direction?>'},
          {name:'empty', width:60, sortable:false ,index:'13', hidden:'hidden',  align:'center'}

        ],
        rowNum:20,
        rowList:[20,40,60],
        pager: '#pager2',
        sortname: '1',
        viewrecords: true,
        sortorder: "DESC",
        caption:"<?=get_phrase("Applicants")?>",
        loadonce:false,
        postData: { medias: function(){return $("#medias option:selected").val();},
                    types: function(){return $("#types option:selected").val();},
                    jobs: function(){return $("#jobs option:selected").val();},
                    applicant: function(){return $("#applicant").val();},
                    referrer: function(){return $("#referrer").val();} }

    }); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:30:21.150

您应该包含显示如何创建网格的代码。与 jqGrid 相关的唯一代码是 line `$('#grid').trigger('reloadGrid');`，但我没有看到您在重新加载之前*对网格*进行任何更改。所以你可能有和以前一样的网格结果。

我建议您阅读[答案，该答案](https://stackoverflow.com/a/2928819/315935)描述了如何从控件中向服务器发送额外的自定义信息，您可以在后端使用这些信息来过滤数据。我想如果你按照这种方式来解决你的问题。

# java - Java中通过接口覆盖的替代方法是什么？

> ID：14181824
> 
> 赞同：2
> 
> 时间：2013-01-06T11:56:12.357
> 
> 标签：java, inheritance, interface, multiple-inheritance

以下在 Java 中是不可能的，因为接口没有实现：

```
class A {
    protected void foo() { /* A impl */ }
    protected void baz() { /* impl */ }
}
interface B {
    /* here's what's impossible to have in Java. */
    protected void foo() { /* B impl incl. call to baz() */ }
}

class C extends A {
    /* stuff that's not in B... */
}

class D extends C implements B {
    void bar() { foo(); /* uses the B impl */ }
}

class E extends A {
    void bar() { foo(); /* uses the A impl */ }
}

class F extends C implements B {
    void bar() { foo(); /* uses the B impl */ }
} 
```

我想要的是让 D 继承 C，但不必重写`foo()`自己；相反，我希望它仅表明“我使用 B 的已知修改”。在这种情况下，正确的成语是什么？

笔记：

*   是的，我确实希望需要更改我的设计；但改成什么？这就是我来这里问的。
*   我知道 Java，请不要在您的答案中重新解释抽象类和接口。
*   这应该可以通过多重继承实现 - D 可以同时继承 C 和 B（假设没有其他冲突）。
*   请Java 6；如果绝对必要，Java 7；Java 8 与我无关。
*   B 实现不能向上移动到 A 中，因为 A 实现确实是默认的，并且其他类直接从它继承（例如 E 类）。
*   C和B彼此不熟悉，不能互相提及。
*   B 实现不能下移到 D 中，因为其他不熟悉 D 的类需要它（例如 F 类）。
*   这不是多重继承的[钻石问题](http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)，因为对于使用谁的实现没有歧义。虽然有一种菱形图案 A->B,C->D 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:09:09.997

除非您使用的是 Java 1.8，否则接口中不能有任何实现，所以您的问题是基于错误的假设：您只有`A.foo`in`C`和的实现`D`。

在 Java 1.8 中，您可以在接口中使用所谓的*虚拟扩展方法。*应该可以使用[以下语法](http://cr.openjdk.java.net/~briangoetz/lambda/Defender%20Methods%20v4.pdf)：

```
class ExtenderOfB {
  public static void foo(B b) {
    //...
  }
}

interface B {
  public void foo() default ExtenderOfB.foo;
}

class D extends C implements B {
  public void bar() {
    B.super.foo();
  }
} 
```

但是，由于魔术本质上归结为调用静态方法，因此您已经可以自己执行此操作：

创建一个帮助类，它提供`B.foo`使用 a的默认实现并从via`static void foo(B b)`调用它。`D.bar``HelperClass.foo(this)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:12:57.990

这是你要找的吗？（这应该在评论中，因为我不确定你在寻找什么，但它并没有很好地显示在那里。）

```
interface A {
    void foo();
    void baz();
}
class B extends A{
    void foo(){/* B's impl. (must be impl.)*/};
    void baz(){/* B's impl. (must be impl.)*/};
}

class C extends A {
    void foo(){/* C's impl. (must be impl.)*/};
    void baz(){/* C's impl. (must be impl.)*/};
}

class D extends C {
    void foo(){/* D's impl */};
    void baz(){/* D's impl, if not included C's impl will be used */};
}

class E extends B {
    void foo(){/* E's impl, if not included B's impl will be used.*/};
    void baz(){/* E's impl, if not included B's impl will be used.*/};
} 
```

或者，如果您希望 B 和 C 都从 A 共享方法，您可以这样做...

```
class A {
    void foo(){ /*(must be impl.)*/ };
    void baz(){ /*(must be impl.)*/ };
}

class B extends A {
    void foo(){/* B's impl, if not included A's impl will be used*/};
    void baz(){/* B's impl, if not included A's impl will be used*/};
}

class C extends A {
    void foo(){/* C's impl, if not included A's impl will be used*/};
    void baz(){/* C's impl, if not included A's impl will be used*/};
}

class D extends C {
    void foo(){/* D's impl, if not included C's impl will be used */};
    void baz(){/* D's impl, if not included C's impl will be used */};
}

class E extends B {
    void foo(){/* E's impl, if not included B's impl will be used.*/};
    void baz(){/* E's impl, if not included B's impl will be used.*/};
} 
```

如果你想让 A 实现 foo()，而不是 baz()，你可以让它抽象，像这样......

```
abstract class A {
    void foo(){ /*(must be impl.)*/ };
    abstract void baz();
}
class B extends A{
    void foo(){/* B's impl, if not included A's impl will be used*/};
    void baz(){ /*(must be impl.)*/ };
}

class C extends A {
    void foo(){/* C's impl, if not included A's impl will be used*/};
    void baz(){ /*(must be impl.)*/ };
}

class D extends C {
    void foo(){/* D's impl, if not included C's impl will be used */};
    void baz(){/* D's impl, if not included C's impl will be used */};
}

class E extends B {
    void foo(){/* E's impl, if not included B's impl will be used.*/};
    void baz(){/* E's impl, if not included B's impl will be used.*/};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:14:31.683

这里有一个关于接口和抽象类的速成课程......

Java 确实没有多重继承，因为您只能扩展一个类——但是，您可以实现多个接口。

还有抽象类。假设你有：

```
interface B {
    void foo();
}

// A is abstract, and it does not implement foo(): this will be left to 
// its inheritors
abstract class A implements B {
    // Method with implementation
    protected void bar() {}
    // Method which must be implemented in inheriting classes
    abstract void baz();
}

// Concrete implementation of A: note that there is no need to specify
// "implements B" since A already does
class C extends A {
    // C must implement baz()  since it is declared abstract in A,
    // but must also implement foo() since A implements B, and A
    // has no implementation of it
} 
```

此外，一个抽象类可以扩展另一个抽象类：

```
// D also implements B since A does.
abstract class D extends A {
    // But this time, D implements foo() from B
    @Override
    void foo() {}
}

class E extends D {
    // E must still implement the abstract baz() method declared in A
} 
```

不要犹豫，询问更多细节，我会酌情编辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T12:15:56.843

您可能需要在这里重新设计，但是...

```
class D extends C implements B {
    void bar() {
        foo(); /* used the B impl */
} 
```

is valid only if `interface B` declares `foo` as a method signature (`protected void foo();`) and if `D` implements `foo` (since it would then implement the valid `B` interface). Thus `bar()` would then call the `foo()` method that `D` implements, since it would be most local to `D`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T12:10:09.640

您可以使用解决此问题`multilevel inheritance`

```
class A
{
    //implementation of A
}

class B extends A
{
  public void foo()
 {
  //you can give your implementation of foo() here
 }
  //includes A's methods also.

}

class C extends B
{
  //will have methods from both A and B
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T12:20:50.443

在场景中，一个类 A 应该实现接口 B 并且两者都有方法`foo()`。

然后类 C 扩展 A 它不必实现 B 因为它具有超类的默认实现。

然后类 D 扩展 C 并`foo()`通过方法包装方法`bar()`而不覆盖它。这是成语。

编码

```
 interface B {
    void foo();
  }

  class A  implements B {
    public void foo() {
      /* B impl */
    }
  }

  class C extends A  {
    /* stuff that's not in B... */
  }

  class D extends C  {
    void bar() {
      foo(); /* used the B impl */
    }
  } 
```

# c# - 一个 aspx 页面中带有单选按钮的两个数据列表

> ID：14181826
> 
> 赞同：0
> 
> 时间：2013-01-06T11:56:20.527
> 
> 标签：c#, javascript, radio-button, datalist

我在一个 aspx 页面中有两个数据列表。我需要确保每个数据列表只能选择一个单选按钮。但是，我只能对这两个数据列表执行此操作，这意味着当我单击 datalist1 上的单选按钮以及在 datalist2 上选择另一个单选按钮时，它只允许我选择一个单选按钮。我需要确保当我在 datalist1 上选择一个单选按钮时，我也可以在 datalist2 上选择另一个。

有人能帮我吗？

下面是aspx页面中的javascript。

```
<script type="text/javascript" language="javascript">

function CheckOnes(spanChk) {

    var oItem = spanChk.children;
    var theBox = (spanChk.type == "radio")
    spanChk : spanChk.children.item[0];

    xState = theBox.unchecked;
    elm = theBox.form.elements;

    for (i = 0; i < elm.length; i++)
        if (elm[i].type == "radio" && elm[i].id != theBox.id) {
            elm[i].checked = xState;
        }
    }

    function CheckTwos(spanChk2) {

        var oItem2 = spanChk2.children;
        var theBox2 = (spanChk2.type == "radio")
        spanChk2 : spanChk2.children.item[0];

        xState2 = theBox2.unchecked;
        elm2 = theBox2.form.elements;

        for (i = 0; i < elm2.length; i++)
            if (elm2[i].type == "radio" && elm2[i].id != theBox2.id) {
                elm2[i].checked = xState2;
            }
    } 
```

下面是 aspx.cs 中的代码

```
protected void DataList2_ItemDataBound(object sender, DataListItemEventArgs e)
{
    RadioButton rdb;
    rdb = (RadioButton)e.Item.FindControl("radioDelete");
    if (rdb != null) 
       rdb.Attributes.Add("onclick", "CheckTwos(this);");
}

protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
{
    RadioButton rdb;
    rdb = (RadioButton)e.Item.FindControl("radioAdd");
    if (rdb != null)
        rdb.Attributes.Add("onclick", "CheckOnes(this);");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:30:22.923

您只需要让任何一组单选按钮具有相同的名称。

```
Group1 :
    <input type="radio" name="group1" />
    <input type="radio" name="group1" />
Group2 :
    <input type="radio" name="group2" />
    <input type="radio" name="group2" />
Group3 :
    <input type="radio" name="group3" />
    <input type="radio" name="group3" /> 
```

# android - 如何为 DialogPreference 子类正确实现 onRestoreInstanceState()？

> ID：14181831
> 
> 赞同：9
> 
> 时间：2013-01-06T11:56:48.740
> 
> 标签：android, android-widget, state, android-preferences, dialog-preference

我正在实现我自己的自定义 DialogPreference 子类，它有一个用于持久化整数的 SeekBar。我对需要进入的内容`onSaveInstanceState()`和`onRestoreInstanceState()`. 具体来说，您是否需要更新用户与之交互的 UI 小部件（在我的例子中是 SeekBar 小部件）`onRestoreInstanceState()`？

我感到困惑的原因是[这里](http://developer.android.com/guide/topics/ui/settings.html#CustomSaveState)的 API 文档文章告诉你这样做：

```
@Override
protected Parcelable onSaveInstanceState() {
    final Parcelable superState = super.onSaveInstanceState();
    if (isPersistent()) {
        return superState;
    }

    final SavedState myState = new SavedState(superState);
    myState.value = mNewValue; //<------------ saves mNewValue
    return myState;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    if (state == null || !state.getClass().equals(SavedState.class)) {
        super.onRestoreInstanceState(state);
        return;
    }

    SavedState myState = (SavedState) state;
    super.onRestoreInstanceState(myState.getSuperState());
    mNumberPicker.setValue(myState.value); //<------------ updates the UI widget, not mNewValue!
} 
```

但是查看一些官方 Android Preference 类（[EditTextPreference](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/preference/EditTextPreference.java)和[ListPreference](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/preference/ListPreference.java)）的源代码，UI 小部件没有在`onRestoreInstanceState()`. 只有 Preference 的基础值是（在上面的示例中，这将是`mNewValue`）。

这是 EditTextPreference 的相关来源：

```
@Override
protected Parcelable onSaveInstanceState() {
    final Parcelable superState = super.onSaveInstanceState();
    if (isPersistent()) {
        return superState;
    }

    final SavedState myState = new SavedState(superState);
    myState.value = getValue(); //<---- saves mValue
    return myState;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    if (state == null || !state.getClass().equals(SavedState.class)) {
        super.onRestoreInstanceState(state);
        return;
    }

    SavedState myState = (SavedState) state;
    super.onRestoreInstanceState(myState.getSuperState());
    setValue(myState.value); //<---- updates mValue, NOT the UI widget!
} 
```

那么，共识是什么？我应该在哪里更新 UI 小部件（如果我应该更新它......）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:03:11.477

好的，经过一些实验，看起来更新内部的 UI 小部件`onRestoreInstanceState()`不是要走的路，因为它似乎总是`null`在那个时候。我不知道他们为什么建议它。如果子类化 Preference，也许你必须这样做，但是在子类化 DialogPreference 时要遵循不同的规则......？这至少可以解释为什么 ListPreference 和 EditTextPreference 不这样做，因为它们是 DialogPreference 的子类。

事实上，根据我的发现，UI 小部件根本不需要更新！它应该有自己的保存/恢复方法来为您处理其状态管理。例如，下面是我使用 SeekBar 小部件制作的 DialogPreference 子类的摘录：

```
@Override
protected Parcelable onSaveInstanceState() {
    final Parcelable superState = super.onSaveInstanceState();

    final SavedState myState = new SavedState(superState);
    myState.maxValue = getMaxValue(); //<---- saves mMaxValue
    myState.value = getValue(); //<---- saves mValue
    return myState;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    if (state == null || !state.getClass().equals(SavedState.class))
    {
        super.onRestoreInstanceState(state);
        return;
    }

    SavedState myState = (SavedState) state;
    setMaxValue(myState.maxValue); //<---- updates mMaxValue
    setValue(myState.value); //<---- updates mValue
    super.onRestoreInstanceState(myState.getSuperState());
} 
```

如您所见，我从不在任何地方更新 SeekBar 小部件。SeekBar 将自行保存/恢复其状态！

您还会注意到与 Android 开发人员文档中建议的内容略有不同。在保存状态之前，我不会检查 DialogPreference 是否持久，因为如果是的话，`mValue`and`mMaxValue`属性将不会被保存。我最后也直接调用`super.onRestoreInstanceState()`，因为我发现它在更早调用时永远不会起作用。

这些只是我到目前为止的发现。我不确定正确的方法是什么，但我上面的方法似乎有效。

更新：@whatyouhide 想知道我的 DialogPreference 子类中的`setValue`和方法是什么样的。`setMaxValue`他们来了：

```
public void setValue(int value)
{
    value = Math.max(Math.min(value, mMaxValue), mMinValue);

    if (value != mValue)
    {
        mValue = value;
        persistInt(value);
        notifyChanged();
    }
}

public void setMaxValue(int maxValue)
{
    mMaxValue = maxValue;
    setValue(Math.min(mValue, mMaxValue));
} 
```

# c++ - 在带有代码块的 Windows 上安装 boost

> ID：14181832
> 
> 赞同：1
> 
> 时间：2013-01-06T11:57:01.880
> 
> 标签：c++, boost, installation, codeblocks

我正在按照本指南在运行 CodeBlocks 的 Windows XP 上安装 Boost：[http](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef) ://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef 。我已经下载了 Boost 和 BoostJam 版本是

提升：1.52.0 BoostJam：3.1.18.1-ntx86

我正在尝试构建 Boost（指南中的“构建 Boost”部分），因此我已成功将 PATH 设置为 c:\boost-jam

现在我想运行 boost-jam，我写： bjam --toolset=gcc "--prefix=c:\program files\codeblocks" install

这是我得到错误的地方。命令提示符告诉我：“警告：Boost.Build 引擎和核心版本不匹配”。我遵循的指南是否已过时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T21:12:15.680

当我尝试从源设置提升时，我遇到了同样的问题。最好的方法是从源代码构建 bjam（它带有 boost）。首先确保路径上有 mingw gcc，然后在命令行上导航到

> < boost-root >/tools/build/v2/engine

作为`<boost-root>`您提取 boost 源代码的文件夹。
从这里调用`build.bat gcc`.

这将构建一个可执行文件（`b2.exe`和/或`bjam.exe`）。将其复制到`<boost-root>`并使用您需要的选项调用它。

# matlab - 发生无限递归时处理崩溃

> ID：14181833
> 
> 赞同：0
> 
> 时间：2013-01-06T11:57:21.873
> 
> 标签：matlab, recursion, stack-overflow

发生无限递归时Matlab崩溃，如下代码

文件：**xm**

```
function x
     y;
end 
```

档案：**ym**

```
function y
     x;
end 
```

文件：**脚本.m**

```
x; 
```

如果脚本 script.m 被执行 matlab crash 并且必须重新启动。

即使我使用了 try-catch，它仍然会崩溃：

文件：**脚本.m**

```
try
x;
catch
    error('stack-overflow');
end 
```

有没有办法处理无限循环中省略的这种崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:32:47.560

作为一个快速的技巧，你可以做

```
global counter;
global RecursionDepth;
counter = 0;
RecursionDepth = 1000; 
```

在你的代码开头的某个地方，那么你可以做

```
function IncrementCounterAndCheckDepth()

    global counter;
    global RecursionDepth;
    counter = counter+1;
    if counter > RecursionDepth
    error('stack-overflow');
else
disp(RecursionDepth);
    end;
    return; 
```

and insert it whenever necessary to check recursion. You can even add additional info/pass some arguments to it to improve your debugging, and once you are done with debugging, you can remove all globals and define IncrementCounterAndCheckDepth() to do nothing, so performance will not be affected, and for debugging it can be inserted in a lot of places without affecting performance. If you ever need to do additional debugging, you simply turn this function back on and modify is as required to track particular issue - you know it is everywhere in your code.

# c - libcurl - curl_slist_append()

> ID：14181837
> 
> 赞同：0
> 
> 时间：2013-01-06T11:58:11.203
> 
> 标签：c, curl, libcurl

我有 curl_slist_append 的问题。代码 ：

```
int my1 = rand() % 100;
int my2 = system ("dir");
int my3= time(NULL);

headers = curl_slist_append(headers,my1);
headers = curl_slist_append(headers,my2);
headers = curl_slist_append(headers,my3);

warning: passing argument 2 of ‘curl_slist_append’ makes pointer from integer without a cast
note: expected ‘const char *’ but argument is of type ‘int’ 
```

我解决了这个问题。Wireshark 测试一切正常。

```
int my1 = time(NULL);
char str[15];
sprintf(str, "%d", my1);
headers = curl_slist_append(headers,str); 
```

# android - 将 UI 组件的高度定义为屏幕高度的百分比（或相对）

> ID：14181838
> 
> 赞同：0
> 
> 时间：2013-01-06T11:58:11.967
> 
> 标签：android

需要一些帮助来解决 android 中的 UI 问题。我正在尝试创建一个活动，其中文​​本视图应该填充右下角和左下角两个按钮上方的所有空间。 ![布局](../Images/21d93fe975f8d8b14403d39b8fa87021.png)

我不想硬编码任何高度/宽度参数，但想将它们定义为 %. 所以我希望按钮高度为屏幕高度的 10%，文本视图为屏幕高度的 90%。

因此，我将按钮宽度保持为 Wrap_text，将 textview 宽度保持为 fill_parent。

下面是我现在拥有的xml文件。问题在于定义高度。如何将按钮高度指定为屏幕高度的 10% 和/或文本视图高度为屏幕高度的 90%？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Activityclass" >

<TextView
 android:id="@+id/textView1"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:layout_above="@+id/button1" />

<Button
 android:id="@+id/button1"
 style="?android:attr/buttonStyleSmall"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentBottom="true"
 android:layout_alignParentLeft="true"
 android:background="@android:drawable/btn_default"
 android:text="<-prev" />

<Button
 android:id="@+id/button2"
 style="?android:attr/buttonStyleSmall"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentBottom="true"
 android:layout_alignParentRight="true"
 android:background="@android:drawable/btn_default"
 android:text="next->" /> 
```

任何帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:14:45.583

如果您使用 a`LinearLayout`那么您可以使用该`layout_weight`属性来`TextView`填充可用高度：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".Activityclass" >

<TextView
 android:id="@+id/textView1"
 android:layout_width="fill_parent"
 android:layout_height="0dp"
 android:layout_weight="1" />

<RelativeLayout
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 >

<Button
 android:id="@+id/button1"
 style="?android:attr/buttonStyleSmall"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentLeft="true"
 android:background="@android:drawable/btn_default"
 android:text="<-prev" />

<Button
 android:id="@+id/button2"
 style="?android:attr/buttonStyleSmall"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentRight="true"
 android:background="@android:drawable/btn_default"
 android:text="next->" />

</RelativeLayout>

</LinearLayout> 
```

当视图具有该`layout_weight`属性时，系统首先计算没有该属性的视图的尺寸，然后在具有该属性的视图之间划分剩余空间。每个具有布局权重的视图都会获得`layout_weight/sum(all layout_weights)`剩余空间的一小部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:16:02.680

`layout_weight`您可以指定多个视图之间的大小比例。

例如，您有一个 MapView 和一个应该向地图显示一些附加信息的表格。

地图应**占屏幕的 3/4，**表格**应占屏幕的 1/4**。

然后将表`layout_weight`的`map to 3`和 `layout_weight 设置为 1。

为了让它工作，你还必须设置`height or width (depending on your orientation) to 0px.`

# mysql - StringBuilder() 在最后一次迭代中附加事务 id

> ID：14181839
> 
> 赞同：2
> 
> 时间：2013-01-06T11:58:15.267
> 
> 标签：mysql, transactions, stringbuilder

在 Xls 文件上传下面的方法调用直到 Xls 表的最后一行时，我有以下代码，并且我正在将值附加到 StringBuilder。

```
 public boolean insertBatch(Connection con, int projectId, int venueId, String batchName, String examStartDate, String examStartTime, String examEndTime, String reportingStartTime, String reportingEndTime, int totalSeats) {
    String  this.query = new StringBuilder().append("insert into venue_batch ( batch_code  ,exam_venue_id  ,exam_date  ,exam_start_time  ,exam_end_time  ,reporting_start_time  ,reporting_end_time  ,total_seats,tranID) VALUES ('").append(batchName).append("' ,").append(venueId).append(" ,'").append(stDate).append("' ,'").append(examStartTime).append("'  ,'").append(examEndTime).append("' ,'").append(reportingStartTime).append("' ,'").append(reportingEndTime).append("' ,").append(totalSeats).append(" )").toString();
                try {
                    this.stmt = con.createStatement();
                    count = this.stmt.executeUpdate(this.query);
                    this.stmt.close();
                } catch (SQLException ex) {
                    System.out.println(new StringBuilder().append("Venue # insertBatch # SQLException").append(ex.toString()).toString());
                    onUploadFail(con, "Please try again!");
                }
    }

*I need to add Unique Transaction id(VenueTranId) to DB at the last during executeUpdate(this.query), in the above  Query  how to Proceed below is Transaction id code.Thanks All..

          Calendar calendar = Calendar.getInstance();
      Long lngTime = Long.valueOf(calendar.getTimeInMillis());
      String VenueTranId=lngTime.toString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:27:13.467

将 StringBuilder 存储在一个变量中，以便您以后可以将所需的任何内容附加到它。

```
public boolean insertBatch(Connection con, int projectId, int venueId, String    batchName, String examStartDate, String examStartTime, String examEndTime, String reportingStartTime, String reportingEndTime, int totalSeats) {
StringBuilder query = new StringBuilder();
query.append("insert ");
query.append("more blabla ");

try {
  this.stmt = con.createStatement();
  count = this.stmt.executeUpdate(this.query.toString());
  this.stmt.close();
} catch (SQLException ex) {
                query.append(" Failed: "+ex.getMessage());
} finally {
  String VenueTranId = computeId();
  query.append(VenueTranId);
} 
```

# php - Codeigniter 结合移动站点和普通站点

> ID：14181843
> 
> 赞同：0
> 
> 时间：2013-01-06T11:58:25.687
> 
> 标签：php, api, codeigniter, mobile

对于我的网站，我还想集成一个移动版本。

我不会使用响应式设计，因为我不确定最终移动版是否需要来自常规站点的所有内容。

所以我想将移动版本集成到我当前的项目中，因为我需要模型和大部分控制器。所以基本上大部分资源都是一样的。

我觉得没有必要在第二个应用程序或其他东西中重写我的所有控制器。

只需检查我的控制器是否每次加载视图时它都是移动设备对我来说似乎不是最优雅的解决方案。

我们还在开发一个 API（用于未来的移动应用程序和类似的东西）它是否是创建独立应用程序并通过 API 进行所有通信的解决方案？

任何提示或想法如何以有效的方式创建它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:22:03.560

您可以使用用户代理库，它提供了几种处理移动请求的方法，例如：

```
$this->agent->is_mobile(); 
```

您可以使用此库检查您的访问者用户代理，然后加载正确的视图。

更多信息：[http ://ellislab.com/codeigniter/user-guide/libraries/user_agent.html](http://ellislab.com/codeigniter/user-guide/libraries/user_agent.html)

# javascript - Android键盘上点击字母的运行功能

> ID：14181846
> 
> 赞同：0
> 
> 时间：2013-01-06T11:58:43.727
> 
> 标签：javascript, android, html, cordova, keyboard

我有一个按Android键盘字母时应该运行的功能：

该应用程序采用 HTML + PhoneGap 构建

我的输入：

```
<input type="text" onkeydown="Refresh();" onkeypress="Refresh();" id="MyInput" /> 
```

刷新功能：

```
function Refresh()
{
   alert('Now Refresh!');
} 
```

只有在删除一个字母和点击空格时才会出现警报，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:24:46.310

问题解决了，我使用了 oninput 事件，它起作用了

# c# - c#对象引用未设置为对象的实例

> ID：14181847
> 
> 赞同：2
> 
> 时间：2013-01-06T11:58:45.383
> 
> 标签：c#, asp.net, sql-server

我正在从网站上做一个约会功能。它可以在创建新约会之前比较日期和时间，如果数据库中存在相同日期和时间的用户键，它将弹出消息框。当我尝试插入与 db 不同的日期和时间时，它给了我错误。 [错误](http://postimage.org/image/4lfhpuy37/)

我在这一行收到错误：

```
string dtime = time.ExecuteScalar().ToString(); 
```

我不知道我的代码有什么问题，谁能指出我？谢谢。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Windows.Forms;
public partial class MakeAppointment : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{
    string appointmentdate = Convert.ToString(DropDownListDay.Text + "-" + DropDownListMonth.Text + "-" + DropDownListYear.Text);
    string appointmenttime = Convert.ToString(DropDownListHour.Text + ":" + DropDownListMinute.Text + ":" + DropDownListSecond.Text + " " + DropDownListSession.Text);

    SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True");
    con.Open();
    SqlCommand date = new SqlCommand("Select adate from customer_registration where adate='"+ appointmentdate +"'",con);
    string ddate = date.ExecuteScalar().ToString();
    con.Close();
    if (ddate == appointmentdate)
    {
        con.Open();
        SqlCommand time = new SqlCommand("Select atime from customer_registration where atime='"+ appointmenttime +"'", con);
        string dtime = time.ExecuteScalar().ToString();
        con.Close();

        if (dtime == appointmenttime)
        {
            MessageBox.Show("This appointment is not available. Please choose other date & time.");
        }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:18:34.873

似乎有问题，`ExcuteScalar();` 因为它`null`在查询不存在记录时返回。

你可以这样使用

```
 var data= date.ExecuteScalar();
   if(data!=null)
         ddate =data.ToString(); 
```

细节

[ExecuteScalar 抛出 NullReferenceException](https://stackoverflow.com/questions/559632/executescalar-throws-nullreferenceexception)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:10:21.760

试试这个

```
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Windows.Forms;
using System;
public partial class MakeAppointment : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        string appointmentdate = Convert.ToString(DropDownListDay.Text + "-" + DropDownListMonth.Text + "-" + DropDownListYear.Text);
        string appointmenttime = Convert.ToString(DropDownListHour.Text + ":" + DropDownListMinute.Text + ":" + DropDownListSecond.Text + " " + DropDownListSession.Text);

        using (SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True"))
        {
            con.Open();
            SqlCommand date = new SqlCommand("Select adate from customer_registration where adate='" + appointmentdate + "'", con);
            string ddate = date.ExecuteScalar().ToString();
            if (ddate == appointmentdate)
            {
                SqlCommand time = new SqlCommand("Select atime from customer_registration where atime='" + appointmenttime + "'", con);
                var rtime = time.ExecuteScalar();
                if (rtime != null)
                {
                    string dtime = rtime.ToString();

                    if (dtime == appointmenttime)
                    {
                        MessageBox.Show("This appointment is not available. Please choose other date & time.");
                    }
                }
                else
                {
                    MessageBox.Show("Failed to fetch time from database");
                }
            }
            con.Close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:03:58.210

看起来您的问题是，当您对 ExecuteScalar 的调用未返回任何值时，时间变量为空。在尝试调用它的 ExecuteScalar 成员之前，只需检查时间变量是否有效（！= null）。

# javascript - 在 Javascript 中寻找具有区域设置和时区支持的日期解析器库

> ID：14181855
> 
> 赞同：3
> 
> 时间：2013-01-06T12:00:19.737
> 
> 标签：javascript, node.js, date, titanium

我知道有许多 Javascript 库可以解析和格式化 Javascript 中的日期，但我想使用一个允许解析日期字符串的库，如下所示：

```
"sáb, 5 ene 2013 13:21:24 PST" 
```

这相当于：

```
"Sat, 5 jan 2013 21:21:24 UTC" 
```

我喜欢[moment.js](http://momentjs.com/)和[sugar.js](http://sugarjs.com/)，它们都是很好的库，并且支持不同的语言环境，但是，AFAIK，它们不支持以下形式的时区：“CES，PST，CET，...”，只有ISO 格式“+01:00”。

我已经测试了许多其他库，唯一符合要求的是[date.js](http://www.datejs.com/)工作正常，但有两件事我不喜欢它，该项目似乎自 2007 年以来就被放弃了，它不支持使用 require() 加载模块，因为它是为 Web 使用而创建的，我需要它用于 Titanium Mobile 应用程序，因此与 Node.js 兼容的库更适合。

换句话说，我需要一个 Javascript 库来允许我这样做（使用他们自己的 API 方法）：

```
var DateHelper = require('my-date-helper-lib');
var strDate = 'sáb, 5 ene 2013 13:21:24 PST';
console.log(strDate + ' => ' + DateHelper.parse(strDate).toISOFormat()); 
```

该代码应在控制台中打印，例如：

```
sáb, 5 ene 2013 13:21:24 PST => 2013-01-05 21:21:24+0000 
```

我可以修改 date.js 以在我的应用程序中使用它，但如果有任何其他不需要触及的库，我更喜欢它。

有谁知道任何符合这种要求的图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T12:08:00.577

查看模块[时区](https://npmjs.org/package/timezone)：

```
var tz = require('timezone/loaded'),
    equal = require('assert').equal,
    utc;

// Get POSIX time in UTC.
utc = tz('2012-01-01');

// Convert UTC time to local time in a localize language.
equal(tz(utc, '%c', 'fr_FR', 'America/Montreal'),
      'sam. 31 déc. 2011 19:00:00 EST'); 
```

# javascript - JavaScript:: 如何防止来自 JS 的 XMLHttpRequest 中的缓存？

> ID：14181859
> 
> 赞同：0
> 
> 时间：2013-01-06T12:01:03.697
> 
> 标签：javascript

> **可能重复：**
> [如何防止浏览器中的 Ajax/javascript 结果缓存？](https://stackoverflow.com/questions/948828/how-to-prevent-ajax-javascript-result-caching-in-browsers)

我想动态加载 JS 脚本。每次浏览器加载旧版本的文件？

如何防止在不更改服务器代码的情况下加载新版本的文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T12:54:18.903

对于 sandeepraju 建议的随机数部分：

```
var url = "jsfile.js?" + new Date().getTime(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T12:14:22.963

最简单的方法是每次发送一个随机数作为参数来发送请求，这样浏览器就不会缓存请求！

例子：

```
<script type="text/javascript" src="somejsfile.js?r=random_number"></script> 
```

在此之前加载的脚本每次都可以生成一个随机数！

我不确定这是否是正确的方法，但它做得很好！

# javascript - 在函数中 - 等待 ajax 响应

> ID：14181863
> 
> 赞同：0
> 
> 时间：2013-01-06T12:01:23.370
> 
> 标签：javascript, ajax

在这个函数中：

```
 function ValidateForm()
    {
        var ret = true;

        if ($("#txtName").val().trim().length == 0) { ret = false; $('#txtName').effect("highlight", {}, 1000); }
        if ($("#txtSurname").val().trim().length == 0) { ret = false; $('#txtSurname').effect("highlight", {}, 1000); }
        if ($("#txtUserName").val().trim().length == 0) { ret = false; $('#txtUserName').effect("highlight", {}, 1000); }
        else {
            var pData = {}; pData["username"] = $("#txtUserName").val();
            $.ajax({
                url: 'service.aspx?/isusernameexist/',
                dataType: 'json',
                type: "POST",
                data: pData,
                success: function (data) {

                    if (data[0].cnt > 0) {
                        ret = false; $('#txtUserName').effect("highlight", {}, 1000);
                    }

                }
            });
        }
        return ret;
    } 
```

我试图在插入新用户之前验证表单，但检查用户名是否可以免费使用需要一些时间，并且我的函数`ValidateForm()`在 ajax 请求完成之前返回值。

在这种情况下如何正确实现ajax功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:04:48.130

你不能这样做。Javascript中的事件系统是异步的，函数总是会在AJAX请求运行之前返回，并触发回调。

你应该找到另一种方法来做到这一点。`ValidateForm`必须重写调用的函数以考虑 JavaScript 的异步特性。想想它做了什么以及如何让它在约束中工作。

它是否向用户显示错误？如果是这样，请在回调函数中显示该错误。

它会使表单无效或阻止提交吗？如果是这样，请将其存储为全局变量或数据属性，您可以稍后在提交时查找。

# c# - 将字符串转换为 byte[] 创建零字符

> ID：14181866
> 
> 赞同：10
> 
> 时间：2013-01-06T12:01:31.740
> 
> 标签：c#, arrays, string, char, byte

在这个转换函数中

```
public static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
}

byte[] test = GetBytes("abc"); 
```

结果数组包含零个字符

```
test = [97, 0, 98, 0, 99, 0] 
```

当我们将 byte[] 转换回字符串时，结果是

```
string test = "a b c " 
```

我们如何使它不会产生那些零

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T12:11:17.093

首先让我们看看你的代码做错了什么。[`char`](http://msdn.microsoft.com/en-us/library/x9h8tsay%28v=vs.110%29.aspx)在 .NET 框架中是 16 位（2 字节）。这意味着当您写入时`sizeof(char)`，它会返回`2`。`str.Length`是`1`，所以实际上你的代码将`byte[] bytes = new byte[2]`是相同的`byte[2]`。因此，当您使用方法时，实际上是将字节从源数组[`Buffer.BlockCopy()`](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)复制到目标数组。`2`这意味着你的`GetBytes()`方法返回`bytes[0] = 32`，`bytes[1] = 0`如果你的字符串是`" "`.

尝试[`Encoding.ASCII.GetBytes()`](http://msdn.microsoft.com/en-us/library/ds4kkd55.aspx)改用。

> 在派生类中重写时，将指定字符串中的所有字符编码为字节序列。

```
const string input = "Soner Gonul";

byte[] array = Encoding.ASCII.GetBytes(input);

foreach ( byte element in array )
{
     Console.WriteLine("{0} = {1}", element, (char)element);
} 
```

输出：

```
83 = S
111 = o
110 = n
101 = e
114 = r
32 =
71 = G
111 = o
110 = n
117 = u
108 = l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:22:17.343

只是为了消除您对答案的困惑，C# 中的 char 类型需要 2 个字节。因此，string.toCharArray() 返回一个数组，其中每个项目占用 2 个字节的存储空间。在复制到每个项目占用 1 字节存储空间的字节数组时，会发生数据丢失。因此，结果中出现零。
如建议的那样，`Encoding.ASCII.GetBytes`是一个更安全的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T10:08:02.803

实际上.net（至少对于 4.0）在使用 BinaryWriter 序列化时会自动更改 char 的大小

UTF-8 字符具有可变长度（可能不是 1 个字节），ASCII 字符具有 1 个字节

'ē' = 2 个字节

'e' = 1 字节

使用时必须牢记

```
BinaryReader.ReadChars(stream) 
```

如果单词 "ēvalds" = 7 字节大小将不同于 "evalds" = 6 字节

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T12:11:12.597

尝试`Encoding`明确指定。您可以使用下一个代码将字符串转换为具有指定编码的字节

```
byte[] bytes = System.Text.Encoding.ASCII.GetBytes("abc"); 
```

如果您打印字节的内容，您将得到`{ 97, 98, 99 }`不包含零的内容，如您的示例在您的示例默认编码中，每个符号使用 16 位。它可以通过打印结果来成为观察者

```
System.Text.Encoding.Unicode.GetBytes("abc"); // { 97, 0, 98, 0, 99, 0 } 
```

然后在将其转换回来时，您应该选择适当的编码：

```
string str = System.Text.Encoding.ASCII.GetString(bytes);
Console.WriteLine (str); 
```

`"abc"`如您预期的那样打印

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T12:18:56.857

(97,0) 是 'a' 的 Unicode 表示。Unicode 以两个字节表示每个字符。所以你不能删除零。但是您可以将编码更改为 ASCII。尝试以下将字符串转换为字节 []。

```
byte[] array = Encoding.ASCII.GetBytes(input); 
```

# php - 在 PHP 中不使用查询字符串形式传递查询参数

> ID：14181874
> 
> 赞同：0
> 
> 时间：2013-01-06T12:02:23.653
> 
> 标签：php, html, http

我想使用`$_GET`但不想使用查询表单传递参数：

```
showevent.php?event=usa 
```

应该显示在 url 中而不是希望

```
site.com/events/usa 
```

对于配置文件：

```
site.com/username 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:17:29.870

浏览器不知道如何格式化这样的 URL。通过 GET 提交表单的标准是查询字符串，这是您的浏览器唯一可以做的事情。两种选择：

1.  通过 Javascript 构建 URL 并以编程方式重定向浏览器。这具有需要支持 Javascript 的客户端的缺点。
2.  通过普通查询字符串提交，然后在服务器上重写 URL 并重定向客户端。例如：

    ```
    header('Location: /events/' . $_GET['event']);
    exit; 
    ```

    这样做的缺点是每次需要两次往返服务器，并且未重写的 URL 可能会在用户的浏览器中短暂闪烁，但最终会为您提供漂亮的 URL。

您可能需要两者的组合，其中 2\. 作为非 Javascript 客户端的后备。

# .htaccess - .htaccess 文件不起作用？

> ID：14181877
> 
> 赞同：1
> 
> 时间：2013-01-06T12:03:16.607
> 
> 标签：.htaccess, mod-rewrite, redirect, opencart

我在下面使用opencart的默认.htaccess文件，我手动添加了最后两行。

```
RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]

RewriteCond %{REQUEST_URI} diger_olcu_aletleri
RewriteRule ^diger_olcu_aletleri$ http://www.hirdavatdeposu.com/diger-olcu-aletleri 
```

我已经使用网站（http://htaccess.madewithlove.be/）进行了检查，它改变了我的网址

> diger_olcu_aletleri

到

> 迪格-奥尔库-阿莱莱里

正如预期的那样，但它在我的网站上不起作用。可能是什么问题？

下面是我完整的 .htaccess 文件。

```
# 1.To use URL Alias you need to be running apache with mod_rewrite enabled. 

# 2\. In your opencart directory rename htaccess.txt to .htaccess.

# For any support issues please visit: http://www.opencart.com

Options +FollowSymlinks

# Prevent Directoy listing 
Options -Indexes

# Prevent Direct Access to files
<FilesMatch "\.(tpl|ini|log)">
 Order deny,allow
 Deny from all
</FilesMatch>

# SEO URL Settings
RewriteEngine On
# If your opencart installation does not run on the main web folder make sure you folder it does run in ie. / becomes /shop/ 

RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]

RewriteCond %{REQUEST_URI} diger_olcu_aletleri
RewriteRule ^diger_olcu_aletleri$ http://www.hirdavatdeposu.com/diger-olcu-aletleri

### Additional Settings that may need to be enabled for some servers 
### Uncomment the commands by removing the # sign in front of it.
### If you get an "Internal Server Error 500" after enabling any of the following settings, restore the # as this means your host doesn't allow that.

# 1\. If your cart only allows you to add one item at a time, it is possible register_globals is on. This may work to disable it:
# php_flag register_globals off

# 2\. If your cart has magic quotes enabled, This may work to disable it:
# php_flag magic_quotes_gpc Off

# 3\. Set max upload file size. Most hosts will limit this and not allow it to be overridden but you can try
# php_value upload_max_filesize 999M

# 4\. set max post size. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value post_max_size 999M

# 5\. set max time script can take. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value max_execution_time 200

# 6\. set max time for input to be recieved. Uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value max_input_time 200 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:23:01.797

OpenCart`.htaccess`规则的最后一行基本上捕获任何东西然后停止。在该行之后尝试您的两行，`RewriteBase`因为这应该可以。`.htaccess`文件逐行检查，最后 OC 行的in`L`表示`[L,QSA]`在该行运行后停止

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T23:31:26.853

我们遇到了一个不同的问题，即未显示 OpenCart SEO Urls。所有 Google 搜索都指向我们启用 mod_rewrite。我们的问题的解决方案与其他人发布的略有不同，所以我想我会在其他人也可能找到的地方分享。

我们的平台：

> -Linux 版本 2.6.32-042stab111.11
> (root@kbuild-rh6-x64.eng.sw.ru) (gcc 版本 4.4.6 20120305 (Red Hat 4.4.6-4) (GCC)) #1 SMP Tue Sep 1 18:19:12 MSK 2015
> 
> -CentOS release 6.8 (Final) - 内核 \r 在一个 \m

服务提供商：railsplayground.com

我们正确地创建了 .htaccess 文件，因为 OpenCart 指定了 cp .htaccess.txt .htaccess

但这破坏了 OpenCart 向我们展示的**所有页面。**

咬牙切齿之后，我们开始在 .htaccess 文件中注释掉不同的行。

结果是**第一行**

```
 Options +FollowSymlinks 
```

破坏了我们的链接。完全删除这一行使 SEO URLS 工作得很好。

此外，请确保在 SEO URL 之前或之后不要有 /。

希望这可以帮助某人。

# jquery - 如何克隆所选插件的选择元素

> ID：14181884
> 
> 赞同：3
> 
> 时间：2013-01-06T12:04:17.023
> 
> 标签：jquery, select, jquery-chosen

我使用 jQuery 的 Chosen Plugin（可在此处找到：http: [//harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)）。它添加了额外的功能来选择 HTML 元素。

我想克隆一个包含选择元素的 div 并增加所有 id。问题是克隆没问题，但选择事件适用于源而不是克隆。

```
<div id="smallConfig">  
<div id="MainConfig_1">

<select data-placeholder="Choose a country" name="country_1" id="country_1" class="chzn-select">
<option value="" /> 
<option value="Afghanistan">Allemagne</option>
<option value="Afghanistan">Belgique</option> 
</select>

<input style="vertical-align: middle;" type="text" class="large" name="cni" id="f_1" />

<span class="f_help"> </span>
<a  class="add">Add more</a>
</div>
</div>

<script type="text/javascript">

var cur_num = 1;    // Counter used previously.

var addAttendee = function(){
var cloned = $("#MainConfig_" + cur_num).clone(true, true).get(0);
++cur_num;
cloned.id = "MainConfig_" + cur_num;                  // Change the div itself.
$(cloned).find("*").each(function(index, element) {   // And all inner elements.
    if(element.id)
    {
        var matches = element.id.match(/(.+)_\d+/);
        if(matches && matches.length >= 2)            // Captures start at [1].
            element.id = matches[1] + "_" + cur_num;
    }
});
$(cloned).appendTo($("#smallConfig"));
};

$('.add').click(addAttendee); // attach event

</script> 
```

我发现这个线程[如何将选择的插件添加到动态创建/克隆的 CSS div？](https://stackoverflow.com/questions/10523395/how-to-add-chosen-plugin-to-dynamically-created-cloned-css-div)但我无法适应我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T06:50:08.203

我有同样的问题，并像这样解决它：

```
$('.agregar_otro').click(function(e) {

    var num=$(this).attr("id").split("_");
    var cur_num = num[1];    // Counter used previously.
    //...
    var cloned = $("#datos_solicitud_" + cur_num).clone(true, true).get(0);
    ++cur_num;
    cloned.id = "datos_solicitud_" + cur_num;                  // Change the div itself.
    $(cloned).find("*").each(function(index, element) {   // And all inner elements.
        if(element.id)
        {
            var matches = element.id.match(/(.+)_\d+/);
            if(matches && matches.length >= 2)            // Captures start at [1].
                element.id = matches[1] + "_" + cur_num;
        }
    });
    $(cloned).appendTo($("#contenedor"));
    //this lines are the ones that solves the problem
    //id_almacen is the id of the element chosen which was cloned
    $("#id_almacen_"+cur_num).removeClass("chzn-done").css("display", "block").next().remove();
    $("#id_almacen_"+cur_num).chosen();
}); 
```

# android - 安卓充气机

> ID：14181887
> 
> 赞同：1
> 
> 时间：2013-01-06T12:04:44.183
> 
> 标签：android, locale, layout-inflater

有什么方法可以通知：inflater 服务何时膨胀视图？我想获取每个生成的视图并进行一些更改，以支持 2.3.3 之前 android 本身不支持的一些语言环境和语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:22:09.043

`LayoutInflater.Factory`可以帮助你。在这里你可以找到一个很好的例子如何使用它[http://sergiandreplace.com/blog/2012/11/15/dealing-with-fonts-and-inflaters-in-android/](http://sergiandreplace.com/blog/2012/11/15/dealing-with-fonts-and-inflaters-in-android/)

# javascript - 如果我写了 runat="server"，javascript 代码会出错

> ID：14181889
> 
> 赞同：2
> 
> 时间：2013-01-06T12:04:53.153
> 
> 标签：javascript, asp.net

html中的代码：

```
 <input type="text" name="fileName" id="fileName" class="file_input_textbox" readonly="readonly" />

        <div class="file_input_div">
          <input type="button" value="Search files" class="file_input_button" />
          <input type="file" class="file_input_hidden" onchange="javascript: document.getElementsByName('fileName')[0].value = this.value" />
        </div> 
```

它工作正常。但如果我会这样写：

```
<input runat="server" type="text" name="fileName" id="fileName" class="file_input_textbox" readonly="readonly" />

    <div class="file_input_div">
      <input type="button" value="Search files" class="file_input_button" />
      <input type="file" class="file_input_hidden" onchange="javascript: document.getElementsByName('fileName')[0].value = this.value" />
    </div> 
```

它不起作用，错误：document.getElementsByName(...).0' is null or not an object

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:11:43.063

当您添加`runat="server"`then`id`并且`name`呈现不同并且可能由 asp.net 更改

要获取呈现的名称，请使用`UniqueID`并将其获取为`<%=fileName.UniqueID%>`，因此必须按**原样完成代码：**

```
<input runat="server" type="text" name="fileName" id="fileName" class="file_input_textbox" readonly="readonly" />

    <div class="file_input_div">
      <input type="button" value="Search files" class="file_input_button" />
      <input type="file" class="file_input_hidden" 
         onchange="javascript: document.getElementsByName('<%=fileName.UniqueID%>')[0].value = this.value" />
    </div> 
```

我验证它，就是这样，当它被添加到母版页中时，名称和 ID 会发生变化。如果它们单独在没有母版页的页面上，那么它们将保持原样，但如果您将它们添加到母版页上，它们会发生变化，您需要通过呈现的 id 获取它们。

请注意，`clientidmode="Static"`输入控件上的 the 不适用于 the ，`name`而仅适用于 the ，`id`因此如果添加它并尝试保持 id 相同，则必须通过 id 而不是名称获取元素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T12:27:24.627

您可以使用控件的 ID，但如果您有母版页，并且您使用的是模板或网格，那么 ID 将被更改。因此，您可以将客户端 ID 模式设置为静态，这样在这种情况下就不会更改

例子

< input runat="server" type="text" name="fileName" id="fileName" class="file_input_textbox" readonly="readonly" />

或者您可以获取控件的客户端 ID。

例子 ：

document.getElementById(<%= fileName.ClientID %>);

希望这有帮助..

# php - InsertLastID 从另一个表到新表？使用 PDO 准备好的语句

> ID：14181892
> 
> 赞同：0
> 
> 时间：2013-01-06T12:05:06.153
> 
> 标签：php, mysql, database, pdo, prepared-statement

我有这两个表comments_tbl 和news_comments_tbl，我正在使用MySQL。

当我创建评论时，我想将最后创建的评论 ID 发送到新表 news_comments_tbl 中。

在使用准备好的语句之前，我使用了这种方法，并且效果很好：

```
//comment
$name     = $_POST['name'];
$comment  = $_POST['comment'];

//ID
$commentidfk  = $_POST['comments_id'];
$newsidfk     = $_POST['news_id_fk'];
$newsidfk     = $_GET['news_id_fk'];

if (isset($_POST['comment']))
{

  $sqlquery ="INSERT INTO comments_tbl(comments_id, name, comment)
  VALUES (NULL, '$name', '$comment')";
  $result = $conn->query($sqlquery) or die('Error');

  $sqlquery2 ="INSERT INTO news_comments_tbl(news_id_fk, comments_id_fk)
  VALUES ('$newsidfk', LAST_INSERT_ID())";
  $result2 = $conn->query($sqlquery2) or die('Error'); 

  header("location:news.php");

}
    else
    {
        echo 'Error';
    } 
```

但是现在当我转换为使用 PDO 准备好的语句时，我无法让它工作。评论已创建，但我无法将最后插入的 id 插入新表（news_comments_tbl）

这就是我的做法：

```
$query  = "INSERT INTO comments_tbl(comments_id, name, comment) VALUES (NULL,?,?)";

  $stmt = $conn->prepare($query);
  $stmt->bindParam(1,$name, PDO::PARAM_STR);
  $stmt->bindParam(2,$comment, PDO::PARAM_STR);

  $stmt->execute();

  return $conn->lastInsertId('comments_id');

  $query  = "INSERT INTO news_comments_tbl(news_id_fk, comments_id_fk) VALUES (?, LAST_INSERT_ID)";

  $stmt = $conn->prepare($query);
  $stmt->bindParam(1, $newsidfk, PDO::PARAM_INT);

  $stmt->execute();

  header("location:news.php"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T12:58:38.550

在执行第二个准备好的语句之前，您不应该发出返回。如前所述，您`LAST_INSERT_ID`在第二个查询中没有正确调用，但无论如何您都不需要它。你的代码应该看起来更像这样：

```
$comments_id = $conn->lastInsertId();

$query  = "INSERT INTO news_comments_tbl(news_id_fk, comments_id_fk) VALUES (?, ?)";

$stmt = $conn->prepare($query);
$stmt->bindParam(1, $newsidfk, PDO::PARAM_INT);
$stmt->bindParam(1, $comments_id, PDO::PARAM_INT);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:14:59.890

看起来你只是忘了带牙套`LAST_INSERT_ID()`

要收到此类错误的通知，请在连接后使用以下命令初始化您的 PDO：

```
$conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

# c++ - 清除 multi_index_container

> ID：14181893
> 
> 赞同：3
> 
> 时间：2013-01-06T12:05:09.010
> 
> 标签：c++, boost, boost-multi-index

我的代码（不是我的代码）中有一个类使用 boost multi_index_container

```
template <class T_key, class T_val>
class foo_map {
  typedef MapEntry_T<T_key, T_val> MapEntry;

  typedef multi_index_container
  < MapEntry
  , indexed_by
  < sequenced< tag<by_LRU> >
  , ordered_unique
  < tag<by_index>
  , member<MapEntry, T_key, &MapEntry::first>
  >
  >
  > MapTable;
  typedef typename MapTable::template index<by_index>::type::iterator IndexIter;

  MapTable theMap;

public:
  typedef IndexIter iterator;
  void erase(iterator iter) {
    theMap.get<by_index>().erase(iter);
  } 
```

};

假设所有变量和类型都已正确定义。我不想弄乱片段。该代码实际上有效。我想要做的是添加一个`clear`函数来擦除所有元素。

```
 void erase(iterator iter) {
    for (iter = theMap.begin(); iter != theMap.end(); iter++ )
      theMap.get<by_index>().erase(iter);
  } 
```

有人可以帮忙吗？我收到一个 100 行错误！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T12:28:04.977

另外，你可以考虑

```
theMap.get<by_index>().clear(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T12:09:54.857

尝试使用标准 STL 技巧而不是您的代码：

```
MapTable().swap(theMap); 
```

# node.js - 静态 webapp 的服务器

> ID：14181895
> 
> 赞同：1
> 
> 时间：2013-01-06T12:05:24.133
> 
> 标签：node.js, heroku, static, webserver

我正在构建一个仅用 html5 和 javascript 编写的客户端 webapp，但我仍然需要一个服务器来为这些文件提供服务。

我正在使用 GruntJS 来缩小/连接文件，我计划将编译后的网站放在一个名为`dist`或类似的文件夹中。

所以我只需要一个服务器来处理对我的网站的所有请求并从中加载相应的文件，`/dist`以便请求 mysite/style.css 加载 mysite/dist/load.css。

我还需要服务器来处理`gzip`压缩、http 标头、mime 类型、缓存控制和错误处理。

因为我已经在使用 nodejs，所以我想到了一个 nodejs 服务器，比如[connect](http://www.senchalabs.org/connect/)或[lactate](https://github.com/Weltschmerz/Lactate)

对于托管，我打算使用 heroku（但也许有更好的服务适合我的情况），**您建议使用哪个服务器**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:29:35.247

在 Amazon-CDN 中托管静态文件的最佳方式，您可能在 heroku basic-html 页面上有简单的逻辑。您可以准备自己的脚本，包括编译、串联、gzip 压缩文件并将它们放入`s3cmd`AWS 上的 s3-bucket。之后，您需要将 CDN 链接到 s3 存储桶 - 这就是您的应用程序将准备好的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:41:41.617

由于您正在使用 grunt，并且已经考虑过连接，因此您始终可以使用[grunt-connect](https://npmjs.org/package/grunt-connect)插件。

安装：

```
$ npm install grunt-connect 
```

在您的`grunt.js`文件中：

```
// Project configuration.
grunt.initConfig({
  connect: {
    yourServer: {
      port: 1337,
      base: 'dist'
    }
  }
});

grunt.loadNpmTasks('grunt-connect'); 
```

# asp.net - .dbml 文件的更改会影响 Asp.Net MVC 3 应用程序中的视图验证吗？

> ID：14181896
> 
> 赞同：0
> 
> 时间：2013-01-06T12:05:26.447
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, validation, linq-to-sql

我在验证表单的 asp.net mvc 3 应用程序中有很多视图。在某个阶段，我注意到验证停止工作（无处不在）。

我不记得从那以后我做了什么。此外，我尝试将后备词移到以前的存储库提交中，并且似乎问题发生在很久以前，而我现在才注意到这一点！

我唯一确定的是我必须多次更改数据库，所以我清理了 .dbml 文件并一次又一次地拖放我的表（很多次）。

我使用 Linq 到 SQL。大多数视图都是使用“编辑”模板生成的。在“WebStore.designer.cs”文件（“WebStore”是项目名称）中，我使用 [Required] 属性。总之，不行！

那么，.dbml 文件的更改会影响视图的验证吗？

先感谢您！

**编辑：**

例如这里是视图：

```
@model WebStore.WebStoreModels.Post   

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

    @Html.HiddenFor(model => model.PostId)

    <div>Title</div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Title)
        @Html.ValidationMessageFor(model => model.Title)
    </div>

    <div>Text</div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Text)
        @Html.ValidationMessageFor(model => model.Text)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
} 
```

如果我不填写表格并单击“保存”，我将在我的数据上下文包装器中得到一个 SqlException（我保存更新后的帖子）：

```
public void UpdatePost(Post post)
    {
        var dbPost = GetPost(post.PostId);
        dbPost.Title = post.Title;
        dbPost.Text = post.Text;
        _dataContext.SubmitChanges(); // here the exception occures
    } 
```

验证不起作用！来自 WebStore.designer.cs 的代码块：

```
[Required(ErrorMessage = "Post title is required")]
public string Title
{ // here goes the content of this Post's property } 
```

**编辑（2）：**

这里有两种操作方法：

```
 [HttpGet]
    public ViewResult EditPost(int id)
    {
        var post = _postsRepository.GetPost(id);
        return View(post);
    }

    [HttpPost]
    public RedirectToRouteResult EditPost(Post post)
    {
        _postsRepository.UpdatePost(post);
        return RedirectToAction("NewsFeed");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:53:35.737

您需要在调用 UpdatePost() 之前检查模型状态的有效性，即

```
[HttpPost]
public RedirectToRouteResult EditPost(Post post)
{
    if (!this.ModelState.IsValid)
    {
        return this.View(model);
    }
    else
    {
        _postsRepository.UpdatePost(post);
        return RedirectToAction("NewsFeed");
    }
} 
```

我希望这有帮助。

# c - c语言制作计算器需要帮助

> ID：14181897
> 
> 赞同：-3
> 
> 时间：2013-01-06T12:05:27.660
> 
> 标签：c

```
#include <stdio.h>
#include "funcs.h"

int main(void)
{
        /* varibles */
        float a[3];
        char operation;
        int num;

        /* header print */
        printf("Enter the operation you would like to use\n");
        scanf("%c", &operation);

        /* ifs */
        if(operation == "*") //warning is here
        {       
                printf("How many numbers would you like to use (max 4)\n");
                scanf("%d", &num);

                switch(num)
                {
                        case 2:
                                printf("enter your numbers\n");
                                scanf("%f", &a[0]);
                                scanf("%f", &a[1]);
                                printf(" the answer is %2f %2f", a[0] * a[1]);
                        break;
                }

        }
} 
```

有什么问题？我得到这个错误

```
Calculator.c: In function 'main':
Calculator.c:16:15: warning: comparison between pointer and integer [enabled by default] 
```

为什么不编译请帮忙。现在请快速帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:07:27.463

尝试改变

```
operation == "*" 
```

至

```
operation == '*' 
```

这可能是您的问题，因为字符串文字（带双引号的“*”）是 a `const char *`（指针）`operation`而是 a `char`（整数）。有你的警告。

解决这个问题很好，因为如果你忽略它，你会得到非常错误的行为（几乎总是错误的），因为你将一个字符与一个指向字符串的指针进行比较，而不是你期望的两个字符。

ps - @WhozCraig 指出的另一个错误（不是编译器，而是可能的运行时），您的 printf 有 2 个说明符（`%2f`）但只有 1 个变量。这充其量会导致未定义的行为。

修复为：

```
printf(" the answer is %2f", a[0] * a[1]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T12:09:43.503

您应该更改`operation == "*"`为，`operation == '*'`因为**单引号**用于*字符*，**双引号**用于*字符串*，显然，您正在检查字符是否相等。

# php - php 仅在存在时才包含文件

> ID：14181898
> 
> 赞同：0
> 
> 时间：2013-01-06T12:05:33.243
> 
> 标签：php, caching, include, warnings

我正在测试 php 中的一些缓存代码：

```
 if (is_readable($cachefile) && (time() - $cachetime
     < filemtime($cachefile))) 
  {
            include($cachefile);
   […] 
```

**它应该做什么：** 仅当 $cachefile 已经存在时才运行包含。如果不是，它应该在不尝试包含 $cachefile 的情况下继续进行。

**它的作用：** 它每次都尝试加载 $cachefile，因此当它不存在时会创建一个 php 警告。

我不知道如何解决它，因为我尝试了几乎所有通常会阻止包含被执行的东西。有人可以帮忙吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:14:42.807

像这样试试

```
if (isset($cachefile) && ((time() - $cachetime) < filemtime($cachefile))) 
{
    include($cachefile);
} 
```

你可以使用`isset`or`file_exists`函数，这里是文档 =>

[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

**注意**：`Wrap time() - $cachetime`在 () 中，还要确保`$cachefile`url 是正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:08:04.090

if(file_exists('file.php')) 包括'file.php';

# javascript - 从 1.3.2 升级到 1.8.3 时 Jquery ajax 成功

> ID：14181900
> 
> 赞同：1
> 
> 时间：2013-01-06T12:05:38.653
> 
> 标签：javascript, jquery, ajax, jquery-plugins

我有个问题 ：）

我将旧 jquery 1.3.2 升级到最新版本 1.8.3。

当然，从这样的旧版本升级会导致我的自定义 jquery 代码出现问题 :)

我发现我应该使用代理而不是绑定，但我的 ajax 代码仍然存在问题。

我不是一个经验丰富的 javascript 调试器，但对我来说，似乎 ajax 成功不会触发我在 setProgress 中的 Google Chrome 断点。

我的代码：

```
getProgress: function() {
    $.ajax({type: "GET", url: "/progress", dataType: "json",
      beforeSend: $.proxy(function(xhr) {
        xhr.setRequestHeader("X-Progress-ID", this.uuid);
      }, this),
      success: $.proxy(this.setProgress, this)
    });
  },
  setProgress: function(data) {
    if (data.state == "done") {
      this.finished();
    } else if (data.state == "error") {
      alert("ERROR"+data.status);
      this.finished();
    } else if (data.state == "starting") {
      this.statusText.text("Startar");
      this.setTime();
    } else {
      bps = bytesPerSecond((new Date()).getTime()-this.lastTime, this.received, data.received);
      this.lastTime = (new Date()).getTime()
      try { remaining = (this.size-this.received)/bps; } catch(err) { remaining = 0; }
      this.received = data.received;
      this.size = data.size;
      this.statusText.html(
        (this.received/this.size).toPercentage()+
        "&nbsp;Uppladdat&nbsp;(&nbsp;"+
        data.received.toHumanSize()+
        "&nbsp;av&nbsp;"+
        data.size.toHumanSize()+
        "&nbsp;)&nbsp;&nbsp;&nbsp;"+
        bps.toHumanSize()+
        "/s&nbsp;&nbsp;&nbsp;"+
        timeLeft(remaining)+
        "&nbsp;kvar"
      );
      this.statusText.width((this.progressBar.width()-40)*(this.received/this.size)+20);
      this.setTime();
    }
  }, 
```

我想在 jquery 1.4+ 中对 ajax 进行了一些更改，这会破坏我的代码。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:38:58.113

好的，我找到了解决方案:)

真正导致问题的不是代码。是我的 Nginx conf 没有输出 jquery 现在在 1.4+ 版本中验证的纯 json （这就是为什么它在 jquery 1.3.2 中工作而不在较新版本中工作的原因）。

所以我将它添加到我的 Nginx conf 中：

```
location ^~ /progress {
  upload_progress_json_output;
  report_uploads proxied;
} 
```

# c# - 如何将图表类型设置为饼图

> ID：14181902
> 
> 赞同：7
> 
> 时间：2013-01-06T12:05:45.093
> 
> 标签：c#, mschart, pie-chart

当我在没有放置图表类型的情况下执行此操作时，工作正常，但是当我将其设置为饼图时，它无法正常工作。它将所有系列名称作为第 1 点，馅饼只有 1 个蓝色块（一个圆圈），它只显示第一个点（值）。

```
foreach (var tag in tags)
{
    HtmlNode tagname = tag.SelectSingleNode("a");
    HtmlNode tagcount = tag.SelectSingleNode("span/span");
    chart1.Series.Add(tagname.InnerText);
    chart1.Series[x].Points.AddY(int.Parse(tagcount.InnerText));
    chart1.Series[x].IsValueShownAsLabel = true;
    chart1.Series[x].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Pie;
    x++;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T12:39:56.343

您正在添加多个`Series`，每个都有一个`Point`。因此，图表控件仅显示第一个`Series`. 我相信您想要做的是将多个点添加到单个`Series`.

我不确定我是否理解您要使用的内容，但下面的代码演示了如何使用标签名称作为键和整数作为值`HtmlNode`来构建简单的饼图。`Dictionary`

```
 Dictionary<string, int> tags = new Dictionary<string,int>() { 
            { "test", 10 },
            { "my", 3 },
            { "code", 8 }
        };

        chart1.Series[0].Points.Clear();
        chart1.Series[0].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Pie;
        foreach (string tagname in tags.Keys)
        {
            chart1.Series[0].Points.AddXY(tagname, tags[tagname]);
            //chart1.Series[0].IsValueShownAsLabel = true;
        } 
```

# jquery - 选择前一个元素 - jQuery

> ID：14181903
> 
> 赞同：2
> 
> 时间：2013-01-06T12:05:50.440
> 
> 标签：jquery, html, checkbox

这是我的代码，

```
<tr>
    <td>
        <input type="checkbox" class="cbx" name="cbx">
    </td>
    <td>
        <div>some content</div>
    </td>
    <td>
        <span class="book">Book now</span>
    </td>
</tr> 
```

我的页面中有大约 20 个与此类似的表格行。我想要做的是，当我单击该行中第三个 td 中的 span 标签时，应选中同一行中的复选框。

我试过这个，但它不起作用，

```
$('.book').click(function() {
   $(this).parent().find('.cbx').attr('checked',true);
}); 
```

请帮我缩短这个，

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:07:26.113

简单，使用`.closest()`方法 find`tr`比去搜索你的`.cbx`！:)

```
$('.book').click(function() {
   $(this).closest('tr').find('.cbx').prop('checked',true);
}); 
```

您的示例指向您的`TD`元素，因为您仅使用`.parent()`.
要达到`TR`而不是使用`.parent().parent()`使用只是`.closest('tr')`

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)
[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:13:36.247

这可以很简单地完成

```
$( '.book' ).on( 'click', function() {
    var $tr = $( this ).parents( 'tr' ).eq( 0 );
    // get the parenting tr

    $( '.cbx', $tr ).attr( 'checked', true );
    // select elements matching '.cbx' inside of $tr and check them
} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T12:08:08.227

在您的代码`.parent()`中将选择父`<td>`节点。为了选择`<tr>`，您应该使用`.parent().parent()`或`.closest("tr")`：

```
$(".book").on("click", function() {
    $(this).closest("tr").find(".cbx").prop("checked", true);
}); 
```

请注意，最好应用`.prop("checked", true)`or `.attr("checked", "checked")`。

# eclipse - 如何将 ProjectExplorer 添加到 Eclipse e4 RCP 应用程序？

> ID：14181905
> 
> 赞同：1
> 
> 时间：2013-01-06T12:06:09.513
> 
> 标签：eclipse, eclipse-rcp, e4

是否可以将 ProjectExplorer 添加到 Eclipse e4 RCP 应用程序？如果是，我该怎么做？如果我将 RCP 应用程序作为 E4Application 启动，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:29:04.367

我发现了另一种很好的方法 [http://dirksmetric.wordpress.com/2012/08/01/tutorial-eclipse-rcp-e4-with-3-x-views-like-project-explorer-properties-etc /](http://dirksmetric.wordpress.com/2012/08/01/tutorial-eclipse-rcp-e4-with-3-x-views-like-project-explorer-properties-etc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:46:28.493

是的，这是可能的。使用 google 并找到一些包含此主题的链接，例如[一个](http://www.eclipsezone.com/eclipse/forums/t107132.html)、[两个](http://www.eclipsezone.com/eclipse/forums/t71394.html)或[三个](https://stackoverflow.com/questions/8277902/add-package-explorer-in-rcp-application-result-in-loosing-some-icon)。尝试阅读并理解 eclipse 插件开发的思想，它是什么[eclipse 插件](http://www.eclipse.org/articles/Article-Plug-in-architecture/plugin_architecture.html)以及它是如何重用的。如果您不知道插件的名称，请使用[Eclipse Spy Plugin](http://www.eclipse.org/pde/incubator/spy/)给您一个实用的提示。点击**Package Explorer**点击 ALT+SHIFT+F1 将看到插件名称、类等。

![插件间谍屏幕](../Images/b0330228c2ec00ff7ea957c58b5d8ac4.png)

# javascript - 通过另一个位置在两个位置之间绘制路线图

> ID：14181919
> 
> 赞同：0
> 
> 时间：2013-01-06T12:08:24.627
> 
> 标签：javascript, google-maps

我不太了解 Google 地图 API，我现在才刚刚学习。[通过此处](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel)解释的示例，我可以在两个位置之间绘制地图。但我只是想知道是否可以包含`via`位置..对此有什么帮助..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:59:11.943

我已经通过使用`waypoints`如下 方式解决了它

```
 var request = {
   origin: "Mumbai, India",
   destination: "Pune, India",
   waypoints: [{ location: "Via point address", stopover: true}],
   travelMode: google.maps.DirectionsTravelMode.DRIVING
 }; 
```

谢谢

# javascript - textarea 更改 dom 事件，在不失去焦点的情况下工作，例如使用鼠标粘贴

> ID：14181920
> 
> 赞同：5
> 
> 时间：2013-01-06T12:08:30.853
> 
> 标签：javascript, dom, mouseevent, jquery

我正在创建一个用于逐段翻译文本的网页。用户应该填写许多文本区域并在完成后按“保存”按钮。默认情况下，保存按钮处于非活动状态，并在按键、按键和按键按下时变为活动状态。但是，这不包括使用鼠标右键单击并按“粘贴”或中键（在 X Windows 中常见的中键粘贴）粘贴文本的情况。这种粘贴场景在我正在创建的网页上比较常见。

"change" 事件会起作用，但它只会在 textarea 失去焦点后触发。有没有办法在文本更改时立即触发鼠标粘贴事件？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T12:11:09.863

```
$("textarea").on("change keyup keydown paste cut copy", function(e) {

// do something

}); 
```

你可以附加任何事件，你想。剪切、复制和粘贴。我都加了！

# xml - Lisp 数据格式化为 xml

> ID：14181924
> 
> 赞同：1
> 
> 时间：2013-01-06T12:08:53.500
> 
> 标签：xml, lisp

我是 lisp 的新手，我似乎找不到任何关于如何将读取的单词从 txt 文件格式化为 xml 的示例。

例子：

```
tag1
tag2 word2
tag1 word3
tag1 word4 
```

我想要退出文件：.xml

```
<tag1>
   <tag2>word2</tag2>
</tag1>
<tag1>word3</tag1>
<tag1>word4</tag1> 
```

或任何类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:29:26.033

使用 CXML 和 SPLIT-SEQUENCE 库，您可以这样做：

```
(defun write-xml (input-stream output-stream)
  (cxml:with-xml-output
      (cxml:make-character-stream-sink output-stream
                                       :indentation 2 :canonical nil)
    (loop :for line := (read-line input-stream nil) :while line :do
       (destructuring-bind (tag &optional text)
           (split-sequence:split-sequence #\Space line)
         (cxml:with-element tag
           (when text
             (cxml:text text))))))) 
```

结果会略有不同：

```
CL-USER> (with-input-from-string (in "tag1
tag2 word2
tag1 word3
tag1 word4")
           (write-xml in *standard-output*))
<?xml version="1.0" encoding="UTF-8"?>
<tag1/>
<tag2>
  word2</tag2>
<tag1>
  word3</tag1>
<tag1>
  word4</tag1> 
```

你剩下的就是弄清楚如何在你的表示中处理元素的嵌套......

# java - CLASSPATH 启动一个简单的本地类文件

> ID：14181928
> 
> 赞同：2
> 
> 时间：2013-01-06T12:09:27.200
> 
> 标签：java, classpath, classloader, jasmin

我的本地目录中有一个 .class 文件，由以下 jasmin 代码组装而成：

```
.class public default_class
.super java/lang/Object
.method public static main([Ljava/lang/String;)V
.limit locals 10
.limit stack 10
invokestatic main_65428301()I
return
.end method
.method public static main_65428301()I
.limit locals 10
.limit stack 10
ldc "foobar"
astore_0
iconst_0
ireturn
.end method 
```

当我执行 java -jar jasmin.jar test.j 时，所有内容都会编译并获得 .class 文件，但我无法使用 java default_class 启动它，因为我收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: 
    at default_class.main(test.j)
Caused by: java.lang.ClassNotFoundException: 
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 1 more 
```

我的 JAVA_HOME 是：

```
/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home 
```

并且类路径仅包含我当前的目录（此 .class 文件所在的位置）。我应该添加一些东西吗？

编辑：我用来启动我的课程的命令是`java default_class`

EDIT2：好的，我终于弄清楚出了什么问题！类名必须以大写开头！这解决了我的问题！无论如何，感谢所有试图帮助我的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:38:07.820

你通常会想要：

```
java -cp . NameOfClassWithMainMethod 
```

运行位于当前目录中的单个类文件。但是，如果您仔细阅读堆栈跟踪，您会发现 Java 找到了您的主类和主方法，但找不到其他东西。从您发布的代码中，我看不出是什么。

跑步

```
java -verbose:class ...... 
```

可能会阐明这种情况，就像使用调试器来观察工作和游戏中的类加载器一样。就像使用 strace 查看它试图打开的文件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T21:36:18.323

您的错误消息说：

> java.lang.ClassNotFoundException：

但此消息的格式通常如下所示：

> java.lang.ClassNotFoundException: SomeNonExistingClass

找不到的类名怎么不见了？因为您的示例中有一条指令引用了一个空的类名（“”）。因此，您需要查找忘记指定类名的指令。就在这里：

```
invokestatic main_65428301()I 
```

相反，它应该是：

```
invokestatic default_class/main_65428301()I 
```

这将解决您的问题。

怀疑你写：

> EDIT2：好的，我终于弄清楚出了什么问题！类名必须以大写开头！这解决了我的问题！无论如何，感谢所有试图帮助我的人！

因为没有任何迹象表明这可能是一个原因，实际上也不是这样。

# jquery - 延迟加载 js 时 $(document).load() 和 $(document).ready() 的顺序

> ID：14181929
> 
> 赞同：9
> 
> 时间：2013-01-06T12:09:31.193
> 
> 标签：jquery, rendering, loading

在我更改所有代码之前，我只想验证我是否需要这样做。

我在 ready() 函数中有几个内联 js 和 jquery 函数：

```
$(document).ready(function(){ do_something(); ... 
```

其中许多函数依赖于包含在外部 js 文档中的其他函数。它们还使用在外部样式表中定义的类。

现在我刚刚更改了我的外部 js 和 css 的加载，使其被延迟（如 Google [https://developers.google.com/speed/docs/best-practices/payload?hl=en#DeferLoadingJS](https://developers.google.com/speed/docs/best-practices/payload?hl=en#DeferLoadingJS)推荐的那样）：

```
 if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
else window.onload = downloadJSAtOnload; 
```

这样页面在开始加载 JS 之前就完全呈现，包括所有图像。

这工作正常。但是，我想知道为什么以及是否总是会。$(document).ready() 不是在 onLoad 之前执行的吗？在执行 $(document).ready 时，我不会冒险没有定义必要的功能吗？

那么，我是否需要将每个 $(document).ready 更改为 $(document).load()？或者，至少其中一些？但是首先执行哪个 onLoad() 呢？加载外部js（在标题中定义）还是内联的？通过更改准备加载，我会失去什么？例如，当用户单击元素时，我是否会冒着事件未附加到元素的风险？

顺便说一句，jquery api 没有被推迟，因为当我去执行其他代码时这会导致问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-27T07:24:09.813

尝试使用

```
 $(window).load(function(){
 dosomething();
 }); 
```

它会在整个页面加载完成后运行 js。

避免使用

```
$(document).ready(function(){
 dosomething();
 }); 
```

它将在加载 DOM 后运行 js。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-14T22:37:16.527

执行顺序如下：

1.  `ready()`当 DOM (HTML) 准备好并加载脚本时触发。
2.  `load()`当其他所有内容也完成加载时触发：HTML、脚本、CSS、图像

作为一般规则，将所有脚本放在 ready 和 load 处理程序之外，以便在调用它们时加载函数。然后将所有事件侦听器保留在就绪处理程序中并按需调用任何函数。

高级 JS 结构如下所示：

1.  jQuery 库
2.  插件/第三方脚本
3.  自定义脚本
4.  `$(document).ready()`封装最小的 JS 逻辑，监听 DOM 事件

# rake - 如何修复 zsh：将 'deploy' 更正为 '_deploy' [nyae]？

> ID：14181933
> 
> 赞同：2
> 
> 时间：2013-01-06T12:09:44.097
> 
> 标签：rake, zsh

我正在玩 Octopress/github 页面。当我输入 rake deploy 时，终端总是输出 zsh: correct 'deploy' to '_deploy' [nyae]?。我输入 n。

为了不显示'zsh：正确'deploy'到'_deploy'[nyae]，我需要做什么？' 在我的终端？

提前致谢。

```
rake deploy 
zsh: correct 'deploy' to '_deploy' [nyae]? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T23:20:46.153

快速修复：禁用自动更正。在你的`~/.zshrc`：

```
unsetopt correct_all 
```

如果您想要自动更正但不是`rake`：

```
alias rake='nocorrect rake' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T16:25:50.253

我相信`unsetopt correct_all`最新更新不再适用。一个更强大的解决方案是在您的`~/.zshrc`文件中添加

```
DISABLE_CORRECTION="true" 
```

# javascript - RaphaelJS/Javascript 更新路径而不是创建新路径

> ID：14181940
> 
> 赞同：0
> 
> 时间：2013-01-06T12:10:50.350
> 
> 标签：javascript, raphael, updates

我有一个必须输入坐标位置的文本框。然后通过单击**Set**，将文本（坐标）分配给变量*c*。单击**Draw**会绘制一条到定义坐标的路径。

我想要做的是每次单击**Draw**时更新现有路径。但它所做的只是在我单击**Draw**时不断创建新路径。我哪里错了？

这是[**小提琴**](http://jsfiddle.net/F9KAx/)

```
<html>
<head>

<script src="raphael.js"></script>
<script>
var c, previous1, linepath;
var l = 5;
var x = 1;

window.onload = function(){

    set = function(){
        c = document.getElementById("b1").value;//get the co-ords
        circ();//draw circle at the select co-ord
    }

    var paper = Raphael(0,80,600,600);  

    draw = function(){  
        if (x==1){
            previous1 = "M100,100 L";
            x++;
        }else{
            previous1 = window.linepath + " ";
        }

        var new1 = previous1 + window.c;
        linepath = new1;
        var line = paper.path(linepath);

        var path = paper.text(10,l,linepath);
        path.attr({"text-anchor":"start","font-size":"12"});
        l = l+10;       
    };

    function circ(){
        var posX = c.substring(0,3);
        var posY = c.substring(4,7);
        var circl = paper.circle(posX,posY,5).attr({fill:'red',stroke:'none'});
    };

}
</script>

</head>
<body>
    Enter co-ords  >  Click Set  >  Click Draw
    <br>
    <input type="text" id="b1" value="100,400">
    <button type="button" onclick="set()">Set</button>

    <button type="button" onclick="draw()">Draw</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T15:37:19.230

简单：每次用户单击“绘图”时，您都在创建一个新的 Raphael.path() 对象，而您需要更新现有对象（如果至少已经单击了一次“绘图”）。

```
//line needs to be declared outside the function, without an initial value
if (typeof line === "undefined") {
    line = paper.path(linepath);    
} else {
  line.attr("path", linepath);  
} 
```

当我们在这里时，如果您不将该条件作为限制条件，您不想假设用户输入了三位数的坐标值。不要使用子字符串从输入中获取 x/y 值，而是执行以下操作：

```
var posX = parseInt(c.split(",")[0], 10);
var posY = parseInt(c.split(",")[1], 10); 
```

[更新的小提琴](http://jsfiddle.net/F9KAx/1/)

# java - DriverManager 类

> ID：14181945
> 
> 赞同：-1
> 
> 时间：2013-01-06T12:11:15.467
> 
> 标签：java, mysql, eclipse, jdbc, database-connection

我可以获得有关**DriverManager**类的更多技术信息吗？我知道它用于创建 java 和数据库之间的连接（在我的情况下，我正在使用 MySQL 创建一个数据库）。但是应该在我的项目中将 DriverManager 创建为一个单独的类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:49:26.590

没有太多：

```
Class.forName("com.mysql.jdbc.Driver");
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/dbtest", "user", "password");
PreparedStatement pstmt = conn.prepareStatement("SELECT * FROM tbltest");
// Do things
// ...
pstmt.close();
conn.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:16:19.893

当然可以，[请在此处阅读](http://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html)。通常你不需要实现它，使用系统库中的类。

如果你对这个类非常感兴趣，也可以[查看这里的源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/sql/DriverManager.java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:21:02.277

要了解 Class，您可以查看 API [http://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html](http://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html)

如果要查看源代码，可以使用 Java 反编译器（例如： http://java.decompiler.free.fr/?q= [jdgui](http://java.decompiler.free.fr/?q=jdgui)

# android - 其他视图背后的 Android 动画

> ID：14181948
> 
> 赞同：1
> 
> 时间：2013-01-06T12:11:43.357
> 
> 标签：android, animation

为 android 开发我需要一个翻译动画。这很容易，但我希望动画落后于其他视图。我怎样才能做到这一点？ `setZAdjustment(Animation.ZORDER_BOTTOM)`不起作用。不可能那么难...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T19:39:21.237

我在具有动画 ImageView 的 RelativeLayout 中遇到了同样的问题。

首先在RelativeLayout中定义/添加我的动画视图，然后其他视图帮助了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T18:55:36.890

我如何解决这个问题是实现我自己的 android.view.animation.Animation 类，并覆盖 applyTransformation() 方法。通过这个方法，我设置了一些我自己的自定义绘图变量（X 偏移等），然后在动画视图上调用 invalidate()。请注意，我的视图是自定义视图，并且我的所有绘图都是在 onDraw 中完成的。

# php - 在服务器上找不到我的 FuelPHP 模块的 URL

> ID：14181949
> 
> 赞同：0
> 
> 时间：2013-01-06T12:11:55.577
> 
> 标签：php, module, routing, fuelphp

我正在创建一个包含博客模块的小型 FuelPHP 应用程序。在这个模块中，帖子控制器只是为帖子索引的模板分配一个简单的视图。

我已阅读 FuelPHP 文档，并在模块的应用程序配置中进行了以下设置：

```
'module_paths' => array(
    APPPATH.'modules'.DS,
    APPPATH.'..'.DS.'globalmods'.DS
),

'always_load' => array(
    'packages' => array(
        'auth',
        'orm',
    ),
    'modules' => array(
        'admin',
        'blog',
    ),
), 
```

应用程序本身在我的 WAMP www docroot 之外，但资产、htaccess 和 index.php 在里面。

我不知道为什么服务器找不到 localhost/blog/posts/index URL，因为我遵循了文档中建议的所有内容，并且主页（*根*路由）似乎显示正常。只有当我单击博客链接（博客/帖子/索引）时，它才会声明

“未找到

在此服务器上找不到请求的 URL /blog/posts/index。”

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T19:21:25.167

我自己也有同样的问题。我做了两件关键的事情：

1) 从全新的 Fuel 副本开始。我缺少某种配置文件，所以我创建了一个全新的 Fuel 框架，然后将所有应用程序文件添加回

2）在 Apache 模块中启用“rewrite_module”（在 Wampserver 配置中）

试试这两件事，看看你会得到什么。

# android - OpenGL ES 2.0 在横向模式下切屏

> ID：14181950
> 
> 赞同：0
> 
> 时间：2013-01-06T12:12:02.717
> 
> 标签：android, opengl-es-2.0, projection-matrix

我开始学习 OpenGL，并使用以下网站： http: [//www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)

但似乎我在这部分遇到了问题（在纵向模式下工作正常）：

```
private float[] mViewMatrix = new float[16];

/** Store the projection matrix. This is used to project the scene onto a 2D viewport. */
private float[] mProjectionMatrix = new float[16];

/** Allocate storage for the final combined matrix. This will be passed into the shader program. */
private float[] mMVPMatrix = new float[16];

/** This will be used to pass in the transformation matrix. */
private int mMVPMatrixHandle;

/** This will be used to pass in model position information. */
private int mPositionHandle;

/** This will be used to pass in model color information. */
private int mColorHandle;

/** How many bytes per float. */
private final int mBytesPerFloat = 4;

/** How many elements per vertex. */
private final int mStrideBytes = 7 * mBytesPerFloat;    

/** Size of the position data in elements. */
private final int mPositionDataSize = 3;

/** Offset of the color data. */
private final int mColorOffset = 3;

/** Size of the color data in elements. */
private final int mColorDataSize = 4;

public void onSurfaceChanged(GL10 gl, int width, int height)
{       
    GLES20.glViewport(0, 0, width, height);

    // Create a new perspective projection matrix. The height will stay the same
    // while the width will vary as per aspect ratio.
    final float ratio = (float) width / height;
    final float left = -ratio;
    final float right = ratio;
    final float bottom = -1.0f;
    final float top = 1.0f;
    final float near = 1.0f;
    final float far = 10.0f;

    System.out.println("Height: " + height);
    System.out.println("Width: " + width);

    Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far);
}

public void onDrawFrame(GL10 gl)
{
        final float eyeX = 0.0f; 
        final float eyeY = 0.0f;
        final float eyeZ = 1.5f;

        final float lookY = 0.0f; //Y direction of what user see
        final float lookZ = -5.0f;  //Z direction of what user see

        // Set our up vector. This is where our head would be pointing were we holding the camera.
        final float upX = 0.0f;
        final float upY = 1.0f;
        final float upZ = 0.0f;

        GLES20.glClearColor(red, green, blue, clearcoloralpha);
        GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);    
        Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, xax, lookY, lookZ, upX, upY, upZ);

        // Draw the triangle facing straight on.        
        for(int i = 0; i < Triangles.size(); i++)
        {
            Matrix.setIdentityM(Triangles.get(i).getModelMatrix(), 0);

            if(Triangles.get(i).Rotate())
            {
                Triangles.get(i).rotation = (360.0f / 10000.0f) * ((int) Triangles.get(i).last);
                Triangles.get(i).last+=20;

                //Rotates the matrix by rotation degrees
                Matrix.rotateM(Triangles.get(i).getModelMatrix(), 0, Triangles.get(i).rotation, 0.0f, 0.0f, 1.0f);
            }
            else
                Matrix.rotateM(Triangles.get(i).getModelMatrix(), 0, Triangles.get(i).rotation, 0.0f, 0.0f, 1.0f);

            drawTriangle(Triangles.get(i).getFloatBuffer(),Triangles.get(i));
        }
}

private void drawTriangle(final FloatBuffer aTriangleBuffer, Triangle tri)
{       
    aTriangleBuffer.position(0);
    GLES20.glVertexAttribPointer(mPositionHandle, tri.DataSize, GLES20.GL_FLOAT, false, mStrideBytes, aTriangleBuffer);                
    GLES20.glEnableVertexAttribArray(mPositionHandle);        

    aTriangleBuffer.position(3);
    GLES20.glVertexAttribPointer(mColorHandle, tri.ColorDataSize, GLES20.GL_FLOAT, false, mStrideBytes, aTriangleBuffer);                
    GLES20.glEnableVertexAttribArray(mColorHandle);

    Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, tri.getModelMatrix(), 0);
    Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mMVPMatrix, 0);

    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mMVPMatrix, 0);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 3);     
} 
```

但是当我尝试在横向模式下移动一个三角形（向左或向右）时，当将它们移动到远处的一侧时，三角形会被“切断”（不显示整个三角形）。似乎他们被表演了，就好像他们在屏幕外一样，而实际上并非如此。如前所述，它似乎在纵向模式下工作正常。

横向模式下的高度为 752，宽度为 1280（Galaxy Tab 2）。

这是否与此处设置的项目矩阵有关？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:20:34.130

你是对的，问题是你在移动你的相机：D

xax 应该保持为 0.0f

`Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, xax, lookY, lookZ, upX, upY, upZ);`

# r - 如何在 R 中测试非参数同步推理

> ID：14181953
> 
> 赞同：0
> 
> 时间：2013-01-06T12:12:35.207
> 
> 标签：r, testing, simultaneous, inference

我想对数据框执行非参数测试。我有三组A，B，C。我想现在 A/B、B/C 和 A/C 组之间的统计显着性。我怎样才能以非参数方式做到这一点？应用 Kruskal-Wallis-Test 时，我得到了组间的整体推断。这可作为对以下事后测试的保护。但是如何对非参数事后检验进行编程（使用 Kruskal-Wallis 或 Mann-Whitney-U）？

```
x<-c(1,2,3,4,5,6,7,8,9,NA,9,8)
y<-c(2,3,NA,3,4,NA,2,3,NA,2,3,4)
group<-rep((factor(LETTERS[1:3])),4)
df<-data.frame(x,y,group)
df 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:59:30.653

好的，只是为了总结上面评论中的讨论，有几种（不太为人所知）的可能性来执行与 R-project 的多个非参数比较。我在上面的示例中包括了其中两个：

```
library(pgrimess)
library(nparcomp)

x<-c(1,2,3,4,5,6,7,8,9,NA,8,9)
y<-c(2,3,NA,3,4,NA,2,3,NA,2,3,4)
group<-rep((factor(LETTERS[1:3])),4)
df<-data.frame(x,y,group)

kruskal.test(df$x~df$group)
kruskalmc(df$x~df$group)

m<-nparcomp(x ~ group, data=df, asy.method = "probit", type = "Dunnett", control = "A", alternative = "two.sided", info = FALSE)
summary(m) 
```

nparcomp 显然更灵活，并允许大量的对比。这里我选择了 Dunnett 作为例子。

有一个建议的程序进行多次测试，根据几篇帖子，在大型数据集中出现了一些准确性问题。 [https://stat.ethz.ch/pipermail/r-help/2012-January/300100.html](https://stat.ethz.ch/pipermail/r-help/2012-January/300100.html)

```
NDWD <- oneway_test(price ~ clarity, data = diamonds,
        ytrafo = function(data) trafo(data, numeric_trafo = rank),
        xtrafo = function(data) trafo(data, factor_trafo = function(x)
            model.matrix(~x - 1) %*% t(contrMat(table(x), "Tukey"))),
        teststat = "max", distribution = approximate(B=1000))

    ### global p-value
    print(pvalue(NDWD))

    ### sites (I = II) != (III = IV) at alpha = 0.01 (page 244)
    print(pvalue(NDWD, method = "single-step")) 
```

另一种可能性是 rms::polr 后跟 rms::contrasts，正如 Frank Harrell [https://stat.ethz.ch/pipermail/r-help/2012-January/300329.html所建议的那样](https://stat.ethz.ch/pipermail/r-help/2012-January/300329.html)

最后，user1317221_G 包含了一些非常有用的链接，包括包含测试结果的箱线图[https://stats.stackexchange.com/a/20133](https://stats.stackexchange.com/a/20133)，更详细的箱线图高级绘图描述可在[http://的进一步链接中找到egret.psychol.cam.ac.uk/statistics/R/graphs2.html](http://egret.psychol.cam.ac.uk/statistics/R/graphs2.html)

希望这可以解决该领域的几个问题。

# xcode - Xcode 和数据 - “云”还是本地？

> ID：14181954
> 
> 赞同：0
> 
> 时间：2013-01-06T12:12:49.907
> 
> 标签：xcode

我是学习 xcode 的新手，并开始了一个简单的项目，主要目标是让我学习 Xcode。该项目是一个简单的应用程序，用于跟踪纸牌游戏中的分数。到目前为止，这只是为了好玩，对我和我一起打牌的人来说。

但这里有一个问题：我想让我们使用谁的 Iphone 成为可能。任何拥有该应用程序的人都应该能够登录并查看我们所有的游戏分数。

那应该很容易。我和我的朋友可以创建一个组，其中存储了我们所有的游戏。

其他人可以创建自己的组，并在其中存储自己的组。

但是在构建应用程序时，我应该将数据存储在哪里？

如果很多人下载该应用程序并玩很多牌，那么可能会有很多数据！

我是一名网络程序员，习惯于使用 PHP 和 mySQL。

处理这个问题的聪明方法是什么？

谢谢约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:35:30.953

您应该考虑使用 GameKit 框架，它可能最适合您的需求。 [http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008304-CH1-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008304-CH1-SW1)

# c# - 如何从许多日志文件中创建一个数据库并执行一些类似 SQL 的查询？

> ID：14181956
> 
> 赞同：0
> 
> 时间：2013-01-06T12:13:21.020
> 
> 标签：c#, mysql, sql, linq-to-sql, linq-to-xml

考虑您有许多日志文件，您需要处理所有这些文件并从中创建一个数据库，该数据库将能够通过 SQL 查询进行查询。
我应该使用哪种技术？合适吗
？`LINQ to SQL`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:45:10.373

我的建议是使用 Filehelpers 库[http://filehelpers.sourceforge.net/](http://filehelpers.sourceforge.net/)之类的东西来获取数据库中的日志文件。

一个基于 DirectoryInfo 类 (http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx) 的简单 foreach，您的日志文件就在其中。

您是否使用 Linq-2-sql 或其他技术进行插入取决于记录数。Linq-2-sql 不太适合大批量插入，因为它会为每条记录生成一个插入语句。我会将**SqlBulkCopy**与**FileHelpers**结合起来。这将是简单且高性能的。

之后，Linq-2-sql 可以很好地查询数据库中的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:35:17.857

SQL 与结构化数据一起使用，如果您的日志文件只是原始文本文件，那么您就不走运了。我的建议是解析日志文件，创建本地数据结构来封装文件中的重要数据
你可以有类似的东西

```
class LogFileRow
{
  DateTime timestamp{get; set;}
  int ActivityId{get; set;}
  string Message{get; set;}
....
} 
```

然后对`LogFileRow`.

# c# - 重定向标准输出数据">"

> ID：14181957
> 
> 赞同：0
> 
> 时间：2013-01-06T12:13:29.057
> 
> 标签：c#, process, redirectstandardoutput

我认为这很简单，但是我在 Process 类和重定向标准输出方面遇到了问题。我正在尝试运行一个 java 程序（Craftbukkit，Minecraft 服务器软件）并重定向输出。

前两行一切正常

```
210 recipes
27 achievements 
```

但在那一行之后，后面的每一行都只是“>”

```
>
>
>
>
> 
```

正确的输出应该是这样的

```
210 recipes
27 achievements
20:52:45 [INFO] Starting minecraft server version 1.4.6
20:52:45 [INFO] Loading properties
20:52:45 [INFO] Default game type: SURVIVAL
20:52:45 [INFO] Generating keypair
20:52:46 [INFO] Starting Minecraft server on *:25565
20:52:48 [INFO] This server is running CraftBukkit version git-Bukkit-1.4.6-R0.3
-5-g82c58b5-b2589jnks (MC: 1.4.6) (Implementing API version 1.4.6-R0.4-SNAPSHOT)

20:52:49 [INFO] Preparing level "world" 
```

我设置了一个断点来查看 e.Data 的值是什么，输入字符串，值“>”。所以问题不在于输出。

代码：

```
static void Main(string[] args)
{
    ServerProcess p = new ServerProcess("craftbukkit.jar");
}

class ServerProcess
{

    public ServerProcess(string server_jar)
    {
        ProcessStartInfo pInfo = new ProcessStartInfo("java", "-jar " + server_jar);
        pInfo.RedirectStandardOutput = true;
        pInfo.RedirectStandardError = true;
        pInfo.UseShellExecute = false;

        Process p = new Process();
        p.StartInfo = pInfo;
        p.OutputDataReceived += new DataReceivedEventHandler(ServerOutputDataReceived);
        p.ErrorDataReceived += new DataReceivedEventHandler(ServerErrorDataReceived);
        p.Start();

        p.BeginOutputReadLine();
        p.WaitForExit();
    }

    static void ServerErrorDataReceived(object sender, DataReceivedEventArgs e)
    {
        Console.WriteLine("Error: {0}", e.Data);
    }

    static void ServerOutputDataReceived(object sender, DataReceivedEventArgs e)
    {
        Console.WriteLine("{0}", e.Data);
    }

} 
```

有人知道发生了什么吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:25:01.297

通常情况下，正常的非错误消息会像错误一样被处理。您添加了错误处理程序，但没有启动它。

```
p.BeginErrorReadLine(); 
```

编辑：也尝试不格式化的 WriteLine

```
Console.WriteLine(e.Data); 
```

# c++ - 崩溃，删除 [ ] this->str

> ID：14181963
> 
> 赞同：-1
> 
> 时间：2013-01-06T12:13:51.497
> 
> 标签：c++, string, dynamic, member

您好，我在**删除**我的类的成员字符串时遇到了一些麻烦，该字符串不为空并且指向正确的位置，因为**我可以在之前显示我的字符串“hello world”。**

之后我从另一个成员函数调用函数 mystringclass::alloc() ， this->str 应该让另一个字符串内容更大。

**当我以相同的方式调整“hello”以获取“hello world”时，该过程第一次运行良好。**但现在我想再次放大它并没有。所以我很困惑。

请帮我。

```
void mystringclass::alloc(long newsize) //newsize includes the +1 char
{   
   cout << "old size was: " << this->size << endl; //displays "12"
   if(this->str) cout << this->str << endl; //displays "hello world" all is right till here

   if(this->str) delete [] this->str ; //it crashes here

   cout << "str deleted\n"; //never show up on screen

   this->str = new char[newsize + 1];
   this->size = newsize;
   this->str[0] = 0;
} 
```

* * *

感谢您的回答，我试图清除我的代码以将其发布在这里。我的错误消失了，但又出现了一个与三规则有关的错误：

```
int main()
{
      stringclass str = "Hello";
      stringclass str2 = str;
      return 0;
} 
```

我在整个过程中都显示信息**所以问题是 str2 已经等于“你好”，甚至在我的复制构造函数中影响 str 的内容之前。并且复制后为空。**怎么了？有人可能会说，我是在魔法盒中学习 c++ 的。我正在使用代码块 10.05

**完整代码：**

```
#include <fstream>
#include <iostream>
#include <vector>
using namespace std;

class stringclass
{
   protected :

      inline bool success()   { failbit = false;  return true; }
      inline bool fail()      { failbit = true; return false; }

   public :

      bool failbit;

      char * mystring;
      long memsize;
      long length;

      void alloc(long newsize);
      void reset();

      void copy(const stringclass & other);

      stringclass()                          {reset(); }
      stringclass(const stringclass & other) {copy(other); }
      stringclass(const char str[]);
      ~stringclass()                         {delete [] mystring;}

      inline long get_length()        { if(mystring) length = strlen(mystring); return length;}
      inline long get_memsize() const { return memsize; }

      friend ostream& operator << (ostream& out, stringclass & sc){out << sc.mystring; return out;}
      stringclass & operator = (stringclass & other)  { copy(other); return *this;}

};

void stringclass::reset()
{
   delete [] mystring;
   mystring = NULL;
   length = 0;
   memsize = 0;
}

void stringclass::alloc(long newsize)
{
   cout<< "\nalloc(long newsize)... \n" << endl;
   cout << "memsize was : " << memsize << endl;
   cout << "length was : " << length << endl;
   if(mystring) cout << "mystring = " << mystring << endl;

   delete [] mystring;

   cout << "mystring deleted...\n";

   mystring = new char[newsize];

   cout << "mystring has been resized\n";

   mystring[0] = 0;
   memsize = newsize;
   length = strlen(mystring);

   cout << "memsize is now : " << memsize << endl;
   cout << "length is now : " << length << endl;
   cout<< "\nend of alloc()... " << endl;
   cout << "\n";
}

void stringclass::copy(const stringclass & other)
{
   cout << "\n";
   cout << "copy(const stringclass & other)...\n" << endl;
   cout << "other.mystring = "<< other.mystring << endl;

   if(other.mystring == NULL || other.memsize == 0)
   {
      reset();
      return;
   }

   alloc(other.memsize);
   strcpy(mystring, other.mystring);

   cout << "mystring = "<< mystring;

   length = strlen(mystring);

   cout << "length: " << length << endl;
   cout<< "\nend of copy()... " << endl;
   cout << "\n";
}

stringclass::stringclass(const char str[]) : mystring(NULL), memsize(0), length(0)
{
   if(str == NULL) reset();
   else
   {
      alloc(strlen(str) + 1);
      strcpy(mystring, str);
      length = strlen(mystring);
   }
}

int main()
{
      stringclass str = "Hello";
      stringclass str2 = str;

      cout << "\nback to main()...\n";
      cout << "str = " << str << "\n";
      cout << "str2 = " << str2 << "\n";
      cout << endl;

      system("PAUSE");
      return 0;
} 
```

**屏幕上的结果：**

```
alloc(long newsize)...

memsize was : 0
length was : 0
mystring deleted...
mystring has been resized
memsize is now : 6
length is now : 0

end of alloc()...

copy(const stringclass & other)...

other.mystring = Hello

alloc(long newsize)...

memsize was : 3214960
length was : 2293560
mystring = Hello
mystring deleted...
mystring has been resized
memsize is now : 6
length is now : 0

end of alloc()...

mystring = length: 0

end of copy()...

back to main()...
str =
str2 =

Appuyez sur une touche pour continuer... 
```

我刚刚意识到您不需要以下代码：

```
 protected :

          inline bool success()   { failbit = false;  return true; }
          inline bool fail()      { failbit = true; return false; }

       public :

          bool failbit; 
```

所以**我推迟了这两个函数和这个变量**，猜猜是什么......一切都很好，**没有错误**。它们甚至一次都没有使用过。**我把它放回去了，问题也回来**了。你怎么解释？！我已经脱发了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:17:11.747

不幸的是，您可以“显示”字符串这一事实完全没有说明。取消分配字符串仍将使其可打印，很可能直到它被新的定位和初始化覆盖。

只需在您完成后尝试打印字符串`delete[]`并查看。

# git - Git submodule pull overwrite/discard any local changes

> ID：14181964
> 
> 赞同：7
> 
> 时间：2013-01-06T12:14:14.257
> 
> 标签：git, git-submodules, git-pull

I have a submodule which I changed some local files. The original repository has been modified and I now wish to do a pull on the submodule, but I get an error saying that I will lose my changes.

How do I force git to ignore local changes and do the pull?

I know there are lot's of similar questions to this, but I couldn't find a question in stack overflow that answered my particular problem (specifically submodules).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T13:17:51.593

`git reset --hard` does exactly that - discard all changes and return to `HEAD`.

Or you can use `git stash` and after pull - `git stash apply` to restore your changes over updated tree.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T19:06:58.010

This is what worked for me:

Change directory into the submodule then run this:

```
git checkout -f -b submodule-branch remotes/origin/submodule-branch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-21T16:19:50.170

git submodule update --remote --force pathToSubmodude

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-06T12:18:05.700

I have a very silly solution, just clone all the files elsewhere, delete your local submodules, and put the new ones in.

# jquery - 如何从点击事件中获取链接的名称 ID？

> ID：14181968
> 
> 赞同：0
> 
> 时间：2013-01-06T12:14:37.323
> 
> 标签：jquery

我有以下内容：

```
$('#status-infos')
    .on('click', '#manageLink, #loginLink, #registerLink', function (e) {
        var $link = $(this);
        var abc = ??? 
```

如何根据单击的内容用“#manageLink”、“#loginLink”或“registerLink”填充字符串 abc？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:16:20.030

纯JS：

```
var abc = this.id; 
```

使用 jQuery：

```
var $link = $(this);
var abc = $link.attr("id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:17:11.117

```
$('#status-infos').on('click', '#manageLink, #loginLink, #registerLink', function (e) {
        var $link = $(this);
        var s = $link.attr("id");  // $link.prop("id");
}); 
```

您还可以通过以下方式获取 id：

```
$('#status-infos').on('click', '#manageLink, #loginLink, #registerLink', function (e) {
        var s = e.target.id;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:17:46.870

试试用这个...

```
$link.attr('id'); 
```

可能工作...

# scons - Scons：每个源文件的共享库

> ID：14181974
> 
> 赞同：0
> 
> 时间：2013-01-06T12:14:59.713
> 
> 标签：scons

我的 sconscript 有这样一行：

```
EXT_SHADERS = shader_env.SharedLibrary('scrubs', source_files, LIBPREFIX='') 
```

并且`source_files`是“缩写”的：

```
src_base_dir  = os.path.join(shader_env['ROOT_DIR'], 'contrib', 'extensions', 'scrubs', 'shaders')
source_files  = [os.path.join('shaders', x) for x in find_files_recursive(src_base_dir, ['.c', '.cpp'])] 
```

现在我从[文档](http://www.scons.org/doc/2.2.0/HTML/scons-man.html)中知道，这会构建一个名为 scrubs 的共享库，但是对于源文件夹中的每个 .cpp 文件，需要一个***仅从其对应的源文件 (.cpp) 构建***的共享库，以及稍后添加更多源而不更改构建的选项脚本，是不是像这种可能的原因。我在文档或其他地方没有看到任何东西，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:52:19.123

如果您希望每个源文件有一个共享库，并且库名称与源文件具有相同的基本名称（fileName1.cc => libfileName1.so，fileName2.cc => libfileName2.so），那么您必须编写一些更多的python代码，最好使用该`os.path.splitext()`函数。

[这](https://stackoverflow.com/a/541394/1158895)是一个例子。

另外，从您的回答中，我看到源文件与根 SConstruct 不在同一目录结构中的可能性，SCons 不支持该目录结构。这是两个示例（一个支持，另一个不支持）

**支持的目录结构**

```
topDir/
  SConstruct
  srcDir/
     srcFile1.cc
     srcFile2.cc 
```

**不支持的目录结构**

```
topDir/
  subDir1/
     SConstruct
  subDir2/
     srcFile1.cc
     srcFile2.cc 
```

# javascript - 如何从 Javascript 调用原生 Iphone/Android 函数？

> ID：14181976
> 
> 赞同：10
> 
> 时间：2013-01-06T12:15:10.657
> 
> 标签：javascript, android, iphone

我在 Iphone 和 Android 中都使用 Web View。在 Android 中，我使用[创建变量](http://developer.android.com/guide/webapps/webview.html)来调用原生 Andriod 函数/方法。但我无法在 Iphone 中找到类似的东西。那么，如何从 JavaScript 调用原生 Iphone 函数。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-06T12:23:32.867

## iOS

在 iOS 中，您可以通过实现`shouldStartLoadWithRequest`. 如果我想更改工具栏的色调颜色：

**视图控制器.h**

```
@property (strong, nonatomic) IBOutlet UIToolbar *toolbar; 
```

**视图控制器.m**

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSURL *url = request.URL;
    NSString *scheme = [url scheme];

    if ([scheme isEqualToString:@"color"]) {
        self.toolbar.tintColor = [self colorWithHexString:url.host];
    }

    return YES;
} 
```

## Javascript

在 javascript 中，您只需更改`window.location`，这将引发*火灾并忘记*：

```
window.location = 'color://' + color; 
```

只需链接您的参数，例如：

```
window.location = 'myscheme://param1/' + value1 + '/param2/' + value2; 
```

只需确保使用**encodeURIComponent**对参数进行编码（以创建有效的 url）。

[更多信息](https://stackoverflow.com/a/1662762/1916258)

## 安卓

在 Android 中，您添加一个 javascript 界面：

```
 WebView webView = getWebView();
    webView.loadUrl("http://localhost:8080");
    // must be after loadUrl on lower apis
    webView.addJavascriptInterface(new AndroidBridge(this), "AndroidBridge"); 
```

...

```
public class AndroidBridge {

    private MainActivity activity;

    public AndroidBridge(MainActivity activity) {
        this.activity = activity;
    }

    @JavascriptInterface
    public void changeNavbarBackground(String color) throws NoSuchFieldException, IllegalArgumentException, IllegalAccessException {
        Log.i(getClass().getSimpleName(), "changeNavbarBackground " + color);

        Field f = R.color.class.getField(color);
        final int col = (Integer) f.get(null);

        activity.changeNavbarBackground(col);
    }
} 
```

## Javascript

在 javascript 中，您使用 javascript 接口：

```
if (window.AndroidBridge) {
            window.AndroidBridge.changeNavbarBackground(color);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-18T06:59:22.423

Webview 的 Firebase 分析示例将为实现此功能提供更多见解。请检查此[样本](https://github.com/firebase/analytics-webview)

为了进行测试，您可以在某些服务器上托管示例 Web 部件并在 Webview 上加载该 URL。

# arrays - 处理中的数组

> ID：14181977
> 
> 赞同：0
> 
> 时间：2013-01-06T12:15:30.923
> 
> 标签：arrays, processing

我对编程很陌生，最近开始学习处理。在我的代码中，collide 函数将 touch 布尔值设置为 true，但是通过对其进行排列，它只测试最终数组的 true 而不是它之前的数组。我在哪里错了？我希望我的问题足够清楚。

编辑：

对不起，让我再试一次。我想我的问题是找出如何正确排列碰撞函数。我似乎无法为数组中的碰撞添加 [i]。目前，该代码有效，但它只测试最后一个数组的真值，而不是它之前的数组。

数组代码：

```
for(int i = 0 ; i < lineDiv; i++){ 
collide(xPts[i], yPts[i], vecPoints.xPos, vecPoints.yPos, myDeflector.Thk, vecPoints.d); 
```

碰撞函数：

```
void collide(float pt1x, float pt1y, float pt2x, float pt2y, int size1, int size2){
if (pt1x + size1/2 >= pt2x - size2/2 && 
pt1x - size1/2 <= pt2x + size2/2 && 
pt1y + size1/2 >= pt2y - size2/2 && 
pt1y - size1/2 <= pt2y + size2/2) {
touch = true;
}
else{
touch=false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:53:48.450

您的“触摸”变量是全局的。每次调用 collide() 函数时，它都会覆盖之前设置的任何内容。也许你只是想在调用 collide() 后测试 touch 是否为真，然后退出 for 循环？

或者，您可能希望让 collide() 返回触摸布尔值，避免全局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:09:41.963

看起来你想要做的是运行一个循环，在数组的那个元素上运行函数，如果其中任何一个元素为真，则返回一个值。这是我最好的猜测，您可能需要编辑您的问题以阐明您要做什么。所以假设这个：

1）将您的方法更改为函数

```
boolean collide(float pt1x, float pt1y, float pt2x, float pt2y, int size1, int size2){
if (pt1x + size1/2 >= pt2x - size2/2 && 
pt1x - size1/2 <= pt2x + size2/2 && 
pt1y + size1/2 >= pt2y - size2/2 && 
pt1y - size1/2 <= pt2y + size2/2) {
return true;
}
else{
return false;
} 
```

2）改变你的循环和你如何称呼它

```
touch = false;  // if you don't set this to false before the loop, it will be the last value taken
for(int i = 0 ; i < lineDiv; i++){ 
     if (collide(xPts[i], yPts[i], vecPoints.xPos, vecPoints.yPos, myDeflector.Thk, vecPoints.d)) touch = true; 
```

在操作之前，当您遍历数组和处理过程中，触摸可能会在真假之间循环（因为您可能会提取数据），您不太可能想要这种行为，因为您无法做到除非您将该数据打包在另一个结构中，例如数组，否则可以使用它。

所以现在，“触摸”设置为 false，如果任何函数调用返回 true，则将更改为 true。如果一切都是假的，它将保持假。

注意：您可以考虑使用 xPts.length() 或 yPts.length() 与 lineDiv。假设 xPts 和 yPts 具有相同的元素数，这将减少数组越界异常的可能性。

# scala - Scala 包对象 - val 声明

> ID：14181978
> 
> 赞同：1
> 
> 时间：2013-01-06T12:15:33.623
> 
> 标签：scala

在 Scala 2.9.1 中，当我为“com.sample.website”声明包对象时

```
com.sample

package object website {
  val (CONST_1, CONST_2, CONST_3) = (1, 2, 3)
} 
```

编译器会抛出 3 个错误，例如

```
not found: value CONST_1 
```

我做错了什么还是我根本不允许在包对象中使用模式匹配值声明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:31:51.407

检查此链接[如何将模式匹配到大写变量中？](https://stackoverflow.com/questions/12636972/how-to-pattern-match-into-an-uppercase-variable), 模式匹配不适用于大写变量。

您需要将其转换为小写变量或单独进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T12:32:00.350

在所有上下文中，模式匹配仅绑定到小写变量。

```
val (A,B) = (1,2)     // Checks that A==1 and B==2
val (a,b) = (1,2)     // Sets a=1, b=2 
```

# java - 是否可以从 Android 手机摄像头广播到网络

> ID：14181979
> 
> 赞同：2
> 
> 时间：2013-01-06T12:15:37.507
> 
> 标签：java, android, web-applications, live-streaming, broadcasting

所以，我正在大学里做一个项目，并考虑从 Android 手机摄像头进行广播。

这有点像 G+ 中的环聊，但它是一种单向连接。

例如，我通过手机广播自己，想要观看此广播的人可以通过手机或网站观看。

所以，我只是想知道这个想法是否可能（假设我不关心互联网连接速度或互联网的任何限制），如果可能的话，我应该如何开始？

# c#-4.0 - 将数据插入 SQL Server CE 数据库时出现问题

> ID：14181980
> 
> 赞同：1
> 
> 时间：2013-01-06T12:15:43.110
> 
> 标签：c#-4.0, sql-server-ce

我是 C# 新手，正在尝试将东西插入 SQL Server CE 数据库。我不明白为什么这段代码不起作用。我得到一个

> *System.Data.SqlServerCE.SqlCeException*

`com1.ExecuteNonQuery();`程序运行时指向该行的错误。

我附上了我用来插入表格的代码。

```
//Connecting to SQL Server
SqlCeConnection conn1 = new SqlCeConnection();
conn1.ConnectionString = connection; //connection is a string variable which has the connection details
conn1.Open();

SqlCeCommand com1 = new SqlCeCommand();
com1.Connection = conn1;
com1.CommandType = CommandType.Text;
com1.CommandText = "INSERT into data(pname, budget, dcommision, advance, phone, cdetails, mail) values(@pname , @budget, @dcommision, @advance, @phone, @cdetails, @mail)";

com1.Parameters.AddWithValue("@pname", textBox8.Text.Trim());
com1.Parameters.AddWithValue("@budget", budget);
com1.Parameters.AddWithValue("@dcommision", textBox7.Text.Trim());
com1.Parameters.AddWithValue("@advance", advance);
com1.Parameters.AddWithValue("@phone", phone);
com1.Parameters.AddWithValue("@cdetails", richTextBox1.Text.Trim());
com1.Parameters.AddWithValue("@mail", textBox3.Text.Trim());

com1.ExecuteNonQuery();     //Executing the SQL query

com1.Dispose();     //Closing SQL Server connection
conn1.Close(); 
```

我的查询有问题吗？我真的是一个新手，所以非常感谢一些帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:25:52.823

您的表格`data`还有`cname`未包含在`INSERT`列表中的列，并且列 i 标记为`NOT NULL`。将该列也包含在列表中或在数据库中为该列`INSERT`提供值。`DEFAULT`

# php - onclick ajax 其他所有链接启用

> ID：14181987
> 
> 赞同：0
> 
> 时间：2013-01-06T12:16:57.700
> 
> 标签：php, javascript, ajax, jquery

我需要在通过 jquery 加载 ajax 期间启用所有链接

[http://frontier.rsitbs.com/frontier/main.php](http://frontier.rsitbs.com/frontier/main.php)是我 onclcik 活动链接时的站点，直到 ajax 加载内容所有链接禁用我需要知道如何在 ajax 内容加载期间照常启用所有链接

```
$(document).ready(function(){
    $("#Surfing").click(function(e){
        e.preventDefault()
        $("#hide").show("slow");
        $.ajax({
            type: "GET",
            url: "dynamic_activities.php",
            dataType: "html",
            data: "q=24",
            success: function(msg){
                function activateDatePicker() {
                    $( "#datepicker" ).datepicker();
                }
                $("#txtHint").html(msg);
            }
        });
    });
}); 
```

# iphone - UIScrollView 中页面之间的缩进

> ID：14181998
> 
> 赞同：0
> 
> 时间：2013-01-06T12:18:11.127
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在使用启用分页的 UIScrollView。我的代码基于[PageControl 示例](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007795)。

UIScrollView 中的页面彼此靠近。但是我需要在页面之间添加一些空间（例如在您浏览相机胶卷中的照片时）。有没有办法在页面之间添加一些水平缩进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:42:28.583

您必须使 scrollView 的框架更宽，以便它向屏幕的左侧和右侧延伸 gap/2 个像素。

```
CGFloat gap = 20.0; //20 pixels spacing between pages
CGRect frame = self.view.frame;
frame.size.width += gap;
frame.origin.x -= gap/2;
scrollView.frame = frame; 
```

然后你像正常一样添加内容视图控制器，居中并填充屏幕，因此请确保将它们正确偏移 gap/2 in`loadScrollViewWithPage:`

**编辑：**如果您仅针对 iOS 6，则可以使用 UIPageViewController 和 UIPageViewControllerTransitionStyleScroll 并使用 UIPageViewControllerOptionInterPageSpacingKey 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:34:52.640

找到[PhoneContentController.m](http://developer.apple.com/library/ios/#samplecode/PageControl/Listings/Classes_iPhone_PhoneContentController_m.html#//apple_ref/doc/uid/DTS40007795-Classes_iPhone_PhoneContentController_m-DontLinkElementID_20)`loadScrollViewWithPage:(int)page`中的方法，看看这一行：

```
frame.origin.x = frame.size.width * page; 
```

它通过内容的宽度*页面的数量来设置滚动视图中内容框架的x位置。因此，如果您想在内容之间添加排水沟，您可以执行以下操作：

```
int xOffset = 20;
frame.origin.x = (frame.size.width * page) + xOffset; 
```

# java - 在后续 RPC 调用之间访问 servlet 上存储的对象

> ID：14181999
> 
> 赞同：0
> 
> 时间：2013-01-06T12:18:13.710
> 
> 标签：java, gwt, servlets

是否可以在一个 RPC 请求期间在 servlet 中创建对象，然后在下一次调用中访问相同的对象。在这里，我在一个 RPC 请求（createInstanceParams）中创建了一个对象“模型”，然后我返回到客户端，返回到其他一些东西并进行另一个调用。我的对象“模型”会从上一次调用中保存，还是我必须重新创建它。每次调用时，我都会对“模型”对象进行一些更改，因此了解它是否可能很重要。此外，如果可能的话，一个例子将是极好的。谢谢。这是我的代码：

```
public class UpdateModelServiceImpl extends RemoteServiceServlet implements UpdateModelService {

public Model model;

@Override
public void createInstanceParam(double[] param, ClientModel m) {
    model = new Model(m);
    model.createInstanceParams(param);
}

@Override
public boolean inputFile(String name) {

    return model.inputFile(name);
}

@Override
public ClientModel updateClientModel(ClientModel m) {

    /** 
        model = new Model(m);

        if(...){
            model.inputFile(m.getFileName());
        }
        else if (...){
            model.createInstanceParams(m.getParamList());
    }
    */
    return model.updateClientModel(m);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:22:57.190

是的，您可以将对象存储在用户会话中：

```
getThreadLocalRequest().getSession().setAttribute("id", obj); 
```

然后在下一个 rpc 调用中访问它：

```
getThreadLocalRequest().getSession().getAttribute("id"); 
```