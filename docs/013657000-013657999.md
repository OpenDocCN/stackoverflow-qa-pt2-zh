# StackOverflow 问答 13657000-13657999

# java - 将 url 转换为安全的文件名

> ID：13657002
> 
> 赞同：2
> 
> 时间：2012-12-01T06:22:18.527
> 
> 标签：java, guava

我有一个要保存 html 的 url 列表，我希望文件名是 url。

番石榴中是否有任何内置方法可以确保文件名可以安全保存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:43:08.243

您所说的“安全保存”是什么意思还不是很清楚。您可以使用`CharMatcher.matchesAllOf`来确保 URL 仅包含特定的安全字符，或者在几周后发布的 Guava 14 中，您可以使用`BaseEncoding.base64Url()`base64 将 URL 编码为绝对安全的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:45:19.847

要回答您的字面问题，不，没有这样的内置方法。事实上，[我能找到的最接近的](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/Files.html#simplifyPath%28java.lang.String%29)，`com.google.common.io.Files.simplifyPath()`特别带有警告，它可能“并不总是与文件系统的行为相匹配”。

`CharMatcher`路易斯想出的主意是个好主意。有关这方面的更多信息，请参阅 Guava 的[wiki](http://code.google.com/p/guava-libraries/wiki/StringsExplained#CharMatcher)及其[Javadoc](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/CharMatcher.html)。根据您的特定文件命名规则构建自己的匹配器应该相对简单。

这是一个假设您使用 Windows/NTFS 的示例。[在 NTFS 上](http://support.microsoft.com/kb/100108)：

> 文件和目录名称最长可达 255 个字符，包括任何扩展名。名称保留大小写，但不区分大小写。NTFS 不区分大小写的文件名。名称可以包含除以下字符外的任何字符：
> 
> ```
> ?  "  /  \  <  >  *  |  : 
> ```

在 Windows 上，[Microsoft 建议](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#naming_conventions)跳过所有这些，以及值介于 0 到 31 之间的字符（包括 0 到 31）。所以你最终可能会得到这样的结果：

```
public boolean isSafeFilename(String url) {
    CharMatcher ntfsMatcher = CharMatcher.noneOf("?\"/\\<>*|:");
    char zero = 0;
    char thirty-one = 31;
    CharMatcher windowsMatcher = CharMatcher.inRange(zero, thirty-one);
    CharMatcher ntfsWindows = ntfsMatcher.and(windowsMatcher);

    return ntfsWindows.matchesAllOf(url);
} 
```

# delphi - DataSnap 和数据库连接/登录

> ID：13657003
> 
> 赞同：4
> 
> 时间：2012-12-01T06:22:24.687
> 
> 标签：delphi, authentication, delphi-xe2, firebird, datasnap

我正在尝试找出“正确”的方法来从我的 DataSnap 应用程序的服务器建立到我的数据库的连接。

数据库中的每个（大多数）表都有字段（其值通过插入和更新触发器设置），称为更新和创建（这是写入记录时的当前时间戳）和 update_by 和 created_by（应该）包含当前登录的用户。

我希望用户从客户端“登录”，以便这些字段反映已登录的用户（并且通过扩展，我将从数据库获取用户身份验证，而不仅仅是从服务器获取）。我可以从客户端处理服务器本身的身份验证，可以处理服务器上的 OnUserAuthenticate 和 OnUserAuthorize 事件。然后我试图将凭据传递给我的数据库，以便触发器可以正确设置上述字段。

那么处理这种情况的方法是什么？我想知道是否可以使用来自客户端的 DSAuthProxyUser 和 DSAuthProxyPassword，但我找不到太多（任何）文档来说明我将如何使用它。我是否为每个连接的用户建立一个新的连接？这对我来说似乎最合乎逻辑。我不会有很多并发用户。前 30 名。最有可能是 5-10 名。但是这样做的“正常”方式是什么？我不想（希望我不必）将用户名传递给我的每个插入/更新以设置表中的值。

我希望我已经清楚地解释了我的情况。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:24:48.333

我还没有使用它，但在我看来，Firebird 2 中引入的[`RDB$SET_CONTEXT()`](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-functions-scalarfuncs-set-context)和[`RDB$GET_CONTEXT()`](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-functions-scalarfuncs-get-context)是您所需要的。使用这些函数，您可以设置（和获取）特定于用户会话（命名空间`USER_SESSION`）或当前事务（命名空间`USER_TRANSACTION`）的附加信息。您还可以检索当前会话（命名空间`SYSTEM`）的其他系统信息，但这可能与您的情况无关。

您需要做的是调用`RDB$SET_CONTEXT()`OnUserAuthorize 事件中的方法，例如使用（作为查询）：

```
SELECT RDB$SET_CONTEXT('USER_SESSION', 'actualuser', '<name of user') 
FROM RDB$DATABASE 
```

这`'actualuser'`是我们使用的上下文变量。在您的触发器中，您可以检索名称（假设 PSQL，带有声明的变量`actualuser`）

```
actualuser = RDB$GET_CONTEXT('USER_SESSION', 'actualuser'); 
```

然后，您可以`actualuser`在触发器的其余部分中使用。只需确保您还考虑了未设置上下文变量的情况（例如，管理员直接更改数据库或类似的东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:32:09.813

Firebird 具有可在 SQL 中使用的 CURRENT_USER 关键字。

以下示例基于[http://www.firebirdsql.org/refdocs/langrefupd15-current_user.html](http://www.firebirdsql.org/refdocs/langrefupd15-current_user.html)

```
create trigger bi_customers for customers before insert as
begin
  New.created_by  = CURRENT_USER;
end 
```

要获得更新的用户名，只需声明一个更新前触发器，如

```
create trigger bi_customers for customers before update as
begin
  New.updated_by  = CURRENT_USER;
end 
```

此解决方案需要数据库用户到外部用户的 1:1 映射。在最简单的实现中，这意味着 DataSnap 会话根据数据库对用户凭据进行身份验证。

但是，在您的描述中，这似乎是一个两步验证（首先针对 DataSnap 层，然后针对数据库）。我不确定如何在安全密码处理方面做到这一点，以及您是否计划仅针对第一个身份验证阶段 (DataSnap) 使用单独的用户/密码表，以及从 DataSnap 到数据库的用户登录映射作为某种“解耦” '。

# spring - Intellij 不尊重工具：自定义 Spring 命名空间中的预期类型注释

> ID：13657005
> 
> 赞同：2
> 
> 时间：2012-12-01T06:22:43.730
> 
> 标签：spring, xsd, intellij-idea

我创建了一个自定义 Spring 命名空间。就正确部署等而言，它工作正常，但 Intellij 没有验证`tool:expected-type`bean 引用上的注释（即我可以引用任何类型的 bean，并且 Intellij 没有按应有的红色突出显示该属性），也没有提供这些引用的任何自动完成。

其他`tool`功能似乎工作正常，例如`tool:exports`.

Intellij 识别我的模式，并提供除预期类型参考之外的所有其他自动完成功能。

选择命令时，Intellij 还成功地将自定义元素解析为各种所需的 bean `Parse custom bean`。

这是我想要的精简版，但这是我目前正在尝试的：

```
<xsd:element name="routed-channel">
    <xsd:annotation>
        <xsd:appinfo>
            <tool:annotation>
                <!-- This part works - other bean refs that require a MessageChannel can reference this channel -->
                <tool:exports type="org.springframework.integration.core.MessageChannel" />
            </tool:annotation>
        </xsd:appinfo>
    </xsd:annotation>
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="recipient" minOccurs="1" maxOccurs="unbounded">
                <xsd:complexType>
                    <xsd:attribute name="channel" type="xsd:string" use="required">
                        <xsd:annotation>
                            <xsd:appinfo>
                                <tool:annotation kind="ref">
                                    <!-- This part does not work - IntelliJ allows a any reference here -->
                                    <tool:expected-type type="org.springframework.integration.core.MessageChannel" />
                                </tool:annotation>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:attribute>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string" use="required"/>
    </xsd:complexType>
</xsd:element> 
```

我正在使用 IntelliJ IDEA v11.1.3。

如果任何人都可以提供一些关于可能出现问题或如何修复它的线索，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:41:48.953

[这是 Intellij bugbase](http://youtrack.jetbrains.com/issue/IDEA-87187)中的相关错误报告：http://youtrack.jetbrains.com/issue/IDEA-87187

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T03:29:35.790

我升级到 IntelliJ 12，这不再是问题。所以答案是：升级 IntelliJ！

# assembly - 未处理的异常：汇编中的递归阶乘 (MASM)

> ID：13657007
> 
> 赞同：3
> 
> 时间：2012-12-01T06:23:08.740
> 
> 标签：assembly, recursion, masm

我用汇编语言 (MASM) 编写了一个程序，让学生练习计算组合。该程序递归地计算阶乘。我使用了一个称为组合的过程，它接收 n 和 r，然后得到 (n=r)!、n! 和 r! 通过调用称为阶乘的过程。阶乘是递归的。

```
.data
n       DWORD   ?
r       DWORD   ?
result  DWORD   ?
answer            DWORD ?
divisor DWORD   ?

.code
MAIN    PROC 
```

（一些初步程序调用）

```
push OFFSET divisor     ;ebp+20
push n              ;ebp+16
push r              ;ebp+12
push OFFSET result      ;ebp+8
call    combinations

;*************************************************
; combinations calls factorial (3 times) to calculate n!, r!, and (n-r)!.
; combinations calculates n!/(r!(n-r)!) , and stores the value in result.
; receives:  accepts n and r by value and result by address.
; returns: none
; preconditions: none
; registers changed:  eax, ebx, edx
;*************************************************
combinations    PROC
push        ebp
mov     ebp,esp

mov     eax, [ebp+16]   ;find (n-r)!
sub     eax, [ebp+12]
mov     ebx, eax
push        ebx
call        factorial
pop     ebx
mov     edx,[ebp+20]    ;move (n-r)! into result
mov     [edx],eax

mov     ebx, [ebp+12]        ;find r!
push        ebx
call        factorial
pop     ebx

mov     edx,[ebp+20]
mov     ebx, [edx]
mul     ebx         ;r!*(n-r)!, store product in eax
mov     ebx, [ebp+20]
mov     [ebx], eax          ;store product in divisor variable

mov     ebx, [ebp+16]   ;find n!
push        ebx
call        factorial
pop     ebx
mov     edx,[ebp+20]            
mov     ebx,[edx]           ;move value of divisor into ebx

mov     edx, 0
div     ebx         ;divide n! by divisor (r!*(n-r)!)
mov     ebx, [ebp+8]
mov     [ebx],eax                 ;move quotient into result

pop     ebp
ret     16
combinations    ENDP

;*************************************************
; calculates factorial recursively
; receives: 
; returns: factorial solution in eax
; preconditions: none
; registers changed: eax
;*************************************************
factorial   PROC
mov eax,dword ptr [esp+4]
cmp eax,1
jle endRecursive
dec eax
push eax
call factorial
mov esi,dword ptr [esp+4]
mul esi
endRecursive:
    ret 4
factorial   ENDP 
```

一切都按预期进行，我得到了所需的值。但是，当所有计算完成并且程序在组合过程结束时到达语句“ret 16”时，我得到以下异常：

Project.exe 中 0x76f915de 处的未处理异常：0xC0000005：访问冲突。

我已经通过调试器运行它，并尝试在我计算错误的情况下更改 return 语句，但到目前为止我尝试过的任何方法都没有奏效。也许这是一个盯着这个太久的例子，但任何想法都会受到赞赏。提前致谢。

**更新：** 仅在调试器中跟踪 ebp 和 esp：看起来当程序退出最后一次阶乘调用时，esp 是 ebp 的 +12，因此每次调用阶乘时都会增加 +4。结果，当程序点击 pop ebp 时，ebp 指向 r 而不是它应该指向的位置。有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:55:08.100

您需要删除在`pop ebx`三个顶级调用之后出现的三个指令`factorial`。由于`factorial`已经将其参数从堆栈中弹出（通过使用`ret 4`），因此尝试通过 do 再次删除参数会`pop ebx`弄乱堆栈指针。

# java - 如何将变量从 Activity 传递给 Android 中的对象

> ID：13657008
> 
> 赞同：1
> 
> 时间：2012-12-01T06:23:22.997
> 
> 标签：java, android

您好我正在创建一个以安卓设备为客户端的**客户端-服务器应用程序。**在我的应用程序中，我的客户端（android 设备）发送一个请求，服务器对该请求作出响应。我注意到任何导致主线程等待的方法都必须在不同的线程上完成。我正在尝试这样做，但在我的情况下使用`ThreadExecutor`. 我实现了一个**辅助** `Runnable`类，我将其传递`ObjectInputStream`给但由于某种原因，它始终为空。我在这里检查了许多问题，但似乎大多数问题都是关于如何从一项活动传递到另一项活动。但是，我想从我的助手传给`activity`我的助手`class`，但我不确定该怎么做。

这是我的代码，我希望它更有意义。

```
 package com.dozie.service;
    import java.io.DataInputStream;
    import java.io.DataOutputStream;
    import java.io.IOException;
    import java.io.ObjectInputStream;
    import java.io.ObjectOutputStream;
    import java.io.StringWriter;
    import java.net.Socket;
    import java.net.UnknownHostException;
    import java.util.concurrent.ExecutorService;
    import java.util.concurrent.Executors;
    import java.util.regex.Matcher;
    import java.util.regex.Pattern;

    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;
    import javax.xml.parsers.ParserConfigurationException;
    import javax.xml.transform.Transformer;
    import javax.xml.transform.TransformerException;
    import javax.xml.transform.TransformerFactory;
    import javax.xml.transform.dom.DOMSource;
    import javax.xml.transform.stream.StreamResult;

    import org.w3c.dom.Document;
    import org.w3c.dom.Element;

    import com.dcloud.common.Event;
    import com.dcloud.common.Message;

    import android.os.Bundle;
    import android.app.Activity;
    import android.content.Intent;
    import android.text.Editable;
    import android.text.TextWatcher;
    import android.util.Log;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;

    public class RegisterActivity extends Activity {

        private Button registerButton;
        private Button cancelButton;
        private TextView errorText;
        private EditText firstnameField, lastnameField, passwordField, cPasswordField, usernameField;
        private String fname, lname, pword, cPword, uname;
        private Socket socket;
        private TextWatcher fnameWatcher, lnameWatcher, pwordWatcher, cPwordWatcher, unameWatcher;
        protected ObjectOutputStream os;
        protected ObjectInputStream is;
        private ExecutorService threadPool;
        private RegisterWorker worker;
        public static final String PASSWORD_PATTERN = "((?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{6,20})";
        public static final String USERNAME_PATTERN = "^[A-z0-9_-]{5,20}$"; 
        public static final String TAG = RegisterActivity.class.getName();
        public static final int SAMEFIRSTUSER = 100; //same first name and username,
        public static final int SAMELASTUSER = 200;  //same last name and username
        public static final int SAMEPASSFIRST = 300; //same password and firstname
        public static final int SAMEPASSLAST = 400; //same password and lastname
        public static final int SAMEPASSUSER = 500; //same password and username
        public static final int USERNOTMATCH = 600; //username does not match
        public static final int PASSNOTMATCH = 700; //password does not match
        public static final int CPASS_DIFF = 800; //password and confirm password are different
        public static final int GOODINPUT = 1; //every input is good

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_register);
            registerButton = (Button) findViewById(R.id.register_id);
            cancelButton = (Button) findViewById(R.id.cancel_id);
            firstnameField = (EditText) findViewById(R.id.firstname_id);
            lastnameField = (EditText) findViewById(R.id.lastname_id);
            passwordField = (EditText) findViewById(R.id.rpassword_id);
            cPasswordField = (EditText) findViewById(R.id.rcpassword_id);
            usernameField = (EditText) findViewById(R.id.rusername_id);
            errorText = (TextView) findViewById(R.id.errorText_id);
            fname="";lname="";pword="";cPword="";uname="";

            //initialize TextWatchers
            initializeWatchers();
            // add TextWatchers
            firstnameField.addTextChangedListener(fnameWatcher);
            lastnameField.addTextChangedListener(lnameWatcher);
            passwordField.addTextChangedListener(pwordWatcher);
            cPasswordField.addTextChangedListener(cPwordWatcher);
            usernameField.addTextChangedListener(unameWatcher);
            cancelButton.setOnClickListener(new OnClickListener()
            {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    firstnameField.setText("");
                    lastnameField.setText("");
                    passwordField.setText("");
                    cPasswordField.setText("");
                    usernameField.setText("");
                    setResult(RESULT_CANCELED);
                    finish();
                }

            });
        }

        @Override
        public void onStart()
        {
            super.onStart();
            Log.d(TAG, "onStart()");
            Intent intent = getIntent();
            final String address = intent.getStringExtra("ipAddress");
            final int port = intent.getIntExtra("port", 6060);
            threadPool = Executors.newFixedThreadPool(2);
            new Thread(new Runnable()
            {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    try {
                        Log.i(TAG, "Trying to Connect to "+ address + " on " + port);
                        socket = new Socket(address, port);
                        Log.i(TAG, "Connection established!");
                        os = new ObjectOutputStream(new DataOutputStream(socket.getOutputStream()));
                        is = new ObjectInputStream(new DataInputStream(socket.getInputStream()));

                        Log.i(TAG, "Client connected to server.");
                    } catch (UnknownHostException e) {
                        // TODO Auto-generated catch block
                        Log.e(TAG, "UnknownHostException", e);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        Log.e(TAG, "I/O Exception", e);
                    }

                }

            }).start();
    //      threadPool.execute(worker = new RegisterWorker(is));;
        }

        @Override
        public void onPause()
        {
            super.onPause();
            Log.d(TAG, "onPause()");
            threadPool.shutdown();
            Message out = new Message("disconnect");
            out.setRequest(Event.Request.DISCONNECT);
            try {
                os.writeObject(out);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.e(TAG, "I/O Exception", e);
            }
            finally
            {
                try {
                    is.close();
                    os.close();
                    socket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            Log.i(TAG, "socket closed");
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_register, menu);
            return true;
        }

        public int validateInput(String [] input)
        {
            String firstname = input[0];
            String lastname = input[1];
            String password = input[2];
            String cpassword = input[3];
            String username = input[4];

            Pattern pattern = Pattern.compile(PASSWORD_PATTERN);
            Matcher matcher = pattern.matcher(password);
            Pattern p = Pattern.compile(USERNAME_PATTERN);
            Matcher m = p.matcher(username);
            if(firstname.equals(username))
                return RegisterActivity.SAMEFIRSTUSER;
            if(lastname.equals(username))
                return RegisterActivity.SAMELASTUSER;
            if(firstname.equals(password))
                return RegisterActivity.SAMEPASSFIRST;
            if(lastname.equals(password))
                return RegisterActivity.SAMEPASSLAST;
            if(password.equals(username))
                return RegisterActivity.SAMEPASSUSER;
            if(!password.equals(cpassword))
                return RegisterActivity.CPASS_DIFF;
            if(!matcher.matches())
                return RegisterActivity.PASSNOTMATCH;
            if(!m.matches())
                return RegisterActivity.USERNOTMATCH;
            return RegisterActivity.GOODINPUT;
        }

        public void registerUser(View v)
        {
            String [] input = getUserInformation();
            int result = validateInput(input);
            switch(result)
            {
            case RegisterActivity.GOODINPUT:
                Intent info = new Intent();
                info.putExtra("username", input[4]);
                registerUser(input);
                if(worker.getServerResponse() != null)
                {
                    if(worker.getServerResponse().getResponse() == Event.Response.REQUEST_SUCCESSFUL)
                    {
                        threadPool.shutdown();
                        setResult(RESULT_OK, info);
                        finish();
                        Log.i(TAG, "registerUser(): data input successful!");
                    }
                    else if(worker.getServerResponse().getResponse() == Event.Response.REQUEST_UNSUCCESSFUL)
                    {
                        threadPool.execute(worker);
                        Log.i(TAG, "registerUser(): data input unsuccessful!");
                    }
                }

                break;
            case RegisterActivity.SAMEFIRSTUSER:
                errorText.setText("username should not be the same as firstname");
                Log.i(TAG, "registerUser(): username same as firstname");break;
            case  RegisterActivity.SAMELASTUSER:
                errorText.setText("username should not be the same as lastname");
                Log.i(TAG, "registerUser(): username same as lastname");break;
            case  RegisterActivity.SAMEPASSFIRST:
                errorText.setText("password should not be the same as firstname");
                Log.i(TAG, "registerUser(): password same as firstname");break;
            case RegisterActivity.SAMEPASSLAST:
                errorText.setText("password should not be the same as lastname");
                Log.i(TAG, "registerUser(): password same as lastname");break;
            case RegisterActivity.SAMEPASSUSER:
                errorText.setText("password should not be the same as username");
                Log.i(TAG, "registerUser(): password same as username");break;
            case RegisterActivity.CPASS_DIFF:
                errorText.setText("password and confirm password are not the same");
                Log.i(TAG, "registerUser(): password and confirm password not the same");break;
            case RegisterActivity.PASSNOTMATCH:
                errorText.setText("password format wrong. Password should contain 6-20 characters\n" +
                        "characters containing at least 1 digit, 1 lower case alphabet and 1 upper case character");
                Log.i(TAG, "registerUser(): password format not correct");break;
            case RegisterActivity.USERNOTMATCH:
                errorText.setText("username format wrong. username should contain 5-20 characters " +
                        "and should have to special characters");
                Log.i(TAG, "registerUser(): username format not correct");break;
            default:
                Log.i(TAG, "registerUser(): Code not handled");break;
            }
        }

        public String []  getUserInformation()
        {
            String firstname = firstnameField.getText().toString();
            String lastname = lastnameField.getText().toString();
            String password = passwordField.getText().toString();
            String cpassword = cPasswordField.getText().toString();
            String username = usernameField.getText().toString();
            String [] input = {firstname, lastname, password, cpassword, username};
            return input;
        }

        public void initializeWatchers()
        {
            fnameWatcher = new TextWatcher()
            {

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                    fname = firstnameField.getText().toString();
                    fname.trim();
                    updateButton();
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    // TODO Auto-generated method stub

                }

            };

            lnameWatcher = new TextWatcher()
            {
                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                    lname = lastnameField.getText().toString();
                    lname.trim();
                    updateButton();
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    // TODO Auto-generated method stub

                }
            };

            pwordWatcher = new TextWatcher()
            {
                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                    pword = passwordField.getText().toString();
                    pword.trim();
                    updateButton();
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    // TODO Auto-generated method stub

                }
            };

            cPwordWatcher = new TextWatcher()
            {
                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                    cPword = cPasswordField.getText().toString();
                    cPword.trim();
                    updateButton();
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    // TODO Auto-generated method stub

                }

            };

            unameWatcher = new TextWatcher()
            {
                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                    uname = usernameField.getText().toString();
                    uname.trim();
                    updateButton();
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    // TODO Auto-generated method stub

                }
            };
        }

        public void updateButton()
        {
            boolean enabled = fname.length()>0 && lname.length()>0 && pword.length()>0 
                    && cPword.length()>0 && uname.length() >0;
                    registerButton.setEnabled(enabled);
        }

        public void registerUser(String [] input)
        {

            try {
                DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
                DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
                Document doc = docBuilder.newDocument();

                Element rootElement = doc.createElement("Register");
                doc.appendChild(rootElement);

                Element user = doc.createElement("user");
                rootElement.appendChild(user);

                Element firstname = doc.createElement("firstname");
                firstname.appendChild(doc.createTextNode(input[0]));
                user.appendChild(firstname);

                Element lastname = doc.createElement("lastname");
                lastname.appendChild(doc.createTextNode(input[1]));
                user.appendChild(lastname);

                Element password = doc.createElement("password");
                password.appendChild(doc.createTextNode(input[2]));
                user.appendChild(password);

                Element username = doc.createElement("username");
                username.appendChild(doc.createTextNode(input[4]));
                user.appendChild(username);

                StringWriter writer = new StringWriter();
                TransformerFactory transformerFactory = TransformerFactory.newInstance();
                Transformer transformer = transformerFactory.newTransformer();
                transformer.transform(new DOMSource(doc), new StreamResult(writer));
                String content = writer.toString();

                Message out = new Message(content);
                out.setRequest(Event.Request.REGISTER);
                os.writeObject(out);
                Log.d(TAG, "registerUser(): Register message sent");

            } catch (ParserConfigurationException e) {
                // TODO Auto-generated catch block
                Log.e(TAG, "onActivityReturn(): ParserConfigurationException error", e);
            }  catch (TransformerException e) {
                // TODO Auto-generated catch block
                Log.e(TAG, "onActivityReturn(): TransformerException error", e);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.e(TAG, "onActivityReturn(): IOException error", e);
            } 
        }
    }

<p>And for my runnable class</p>

package com.dozie.service;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.OptionalDataException;

import android.util.Log;

import com.dcloud.common.Event;
import com.dcloud.common.Message;

public class RegisterWorker implements Runnable{

    private ObjectInputStream is;
    private Message in;
    public static final String TAG = RegisterWorker.class.getName();

    public RegisterWorker(ObjectInputStream is)
    {
        this.is = is;
        if(this.is == null)
            System.out.println("null");

    }
    @Override
    public void run() {
        // TODO Auto-generated method stub
        try {
            while((in = (Message) is.readObject())!=null)
            {
                if(in.getResponse() == Event.Response.REQUEST_SUCCESSFUL)
                {
                    Log.d(TAG, "Login Response: "+in.getMessage());
                }
                else if(in.getResponse() == Event.Response.REQUEST_UNSUCCESSFUL)
                {
                    Log.d(TAG, "Login Response: "+in.getMessage());
                    //give reason for rejection
                }
            }
        } catch (OptionalDataException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public Message getServerResponse()
    {
        return in;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:34:05.717

简单的方法是创建一个静态变量并将值分配给它。其他解决方案是创建一个对象，其中包含要在可运行和活动之间携带的值列表，并在创建实例时传递此对象

在你的情况下，它可能看起来像

```
MyObject myObject = null;

public RegisterWorker(ObjectInputStream is, MyObject myObject)
    {
        this.is = is;
          this.myObject=myObject;
        if(this.is == null)
            System.out.println("null");

    } 
```

处理完成后，您添加一个方法，您可以在其中返回对象，以便您的活动类可以调用该方法并将其用于进一步处理。

```
public MyObject getMyObject(){
retunr myObject
} 
```

但是您可以尝试的另一种方法是使用 AsyncTask。您可以在哪里提及创建 AsyncTask 时要返回的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:39:50.557

我认为您正在编写的代码比它需要的要复杂得多。如果您想将变量传递给 a `Thread`，这是我认为您正在尝试做的事情，只需执行以下操作：

```
public Worker extends AsyncTask<Arguments, Void, Void> {
  // method names may be slightly incorrect, writing this from memory
  public void runInBackground(Arguments...args) {
    // do what you want to do in the background
  }
} 
```

然后开始你的线程：

```
Arguments args = new Arguments(arg1, arg2); // whatever you want to pass along
new Worker().execute(args); 
```

Where`Arguments`可以是任何类，以此为例。

希望这可以帮助。

# ruby-on-rails - 控制器操作和加载模式 html（引导程序）中的 redirect_to 问题

> ID：13657009
> 
> 赞同：0
> 
> 时间：2012-12-01T06:23:32.210
> 
> 标签：ruby-on-rails, twitter-bootstrap, view, controller

我对控制器操作有一点小问题。我所追求的行为是编辑笔记的选项。我希望用户能够在模态（twitter bootstrap）中编辑便笺，就像他们创建便笺一样。以这种方式创建笔记效果很好。问题来了编辑笔记。主要问题是，当用户单击“编辑”按钮时，我需要始终知道确切的注释 ID。更复杂的是，有一个“仪表板”控制器/模型充当“笔记”和其他东西的容器。

这是我在仪表板上的视图中的代码/链接，它显示了所有用户当前的笔记。

```
 = link_to "Edit Note", "update_note/#{n.id}",{:note_id => "#{n.id}"} 
```

所以在这里我发送一些包含注释 id 的参数。然后在控制器动作中，在仪表板（容器）中

```
 def update_note
            @user         = current_user
            @edit_note_id = params[:params1]
            redirect_to dashboard_path and return
            respond_to do |format|
               format.html { render "#modal_edit_notes"}
            end
          end 
```

所以在这一点上，我有唯一的笔记 id，并实例化一些东西，所以当希望模式加载时，我可以基于它创建一个表单。我遇到的问题是此时让控制器返回仪表板，并弹出模式，现在我有了 note.id。

要触发模态，我通常会做一个

```
 href = #modal_edit_notes, data-toggle = "modal" 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:54:58.180

好的，这里有两个选择。

1.  为您显示的每个注释在隐藏元素中嵌入一个表单，然后当您想要编辑该特定注释时，只需将该预呈现的表单显示在模态中即可。

2.  通过 ajax 加载 modal 的内容，这将需要一些自定义 JS 才能使其与 bootstrap modals 一起使用，但这并不太难。我就是这样做的。

另外，顺便说一句，该`update_note`方法确实应该`update`是`NotesController`.

# iphone - 如何在windows 7平台安装XCODE？

> ID：13657010
> 
> 赞同：10
> 
> 时间：2012-12-01T06:23:37.200
> 
> 标签：iphone, ios

> **可能重复：**
> [如何使用 Windows 开发机器为 iPhone 开发？](https://stackoverflow.com/questions/22358/how-can-i-develop-for-iphone-using-a-windows-development-machine)

你能告诉我如何在 Windows 7 中安装 Xcode .... 或者还有其他方法可以在 Windows 7 上开发 Iphone 应用程序吗？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T06:32:24.563

X-code 主要用于 Mac 系统上的 OS-X 或 iPhone 开发。Windows 版本不可用。但是[，这](http://ipodtoucher55.blogspot.in/2010/12/installing-ios-sdk-and-xcode-on-windows.html)可能会有所帮助！

没有办法在 Windows 上获取 Xcode；但是您可以使用像[Corona](http://www.anscamobile.com/corona/)这样的不同 SDK， 尽管它不会使用 Objective-C（我相信它使用 Lua）。然而，我听说它使用起来很糟糕。

资料来源：[classroom.com](http://classroomm.com/objective-c/index.php?PHPSESSID=8j5b729rocc4cm8h7end7edvi6&topic=5088.msg13883#msg13883)

# c++ - 这个函数如何从链表中删除一个元素？

> ID：13657015
> 
> 赞同：0
> 
> 时间：2012-12-01T06:23:50.787
> 
> 标签：c++, linked-list

我的导师将函数 remove() 定义为：

```
struct node
{
  node *next;
  int value;
}

int IntList::remove()
{
  node *victim = first;
  int result;

  if(isEmpty()) throw listIsEmpty();

  first = victim->next;
  result = victim->value;
  delete victim;
  return result;
} 
```

其中`first`“指向代表 this 的节点序列`IntList`”。

如果victim和first都指向同一个东西，我们删除了victim，这不也是delete first吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:27:01.157

> 如果victim和first都指向同一个东西，我们删除了victim，这不也是delete first吗？

在删除时，它们并不指向同一事物。

基本上这里发生的是第二个节点成为第一个节点，然后旧的第一个节点被删除。

由于`first = victim->next`在删除之前，除非在链表中永远不会发生，`first == victim`否则将永远不会相同。`victim->next == victim`

* * *

对于一个简化的示例，假设：

```
first is at address 0xDEAD (crazy address, but go with it)
first->next is at address 0xF00D 
```

然后它像这样下降：

```
node *victim = first; //victim = 0xDEAD
first = victim->next; //first = 0xF00D, so first now = first->next
delete victim; //victim = 0xDEAD, so you deleted the original first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:28:00.510

**不**，它绝对不会删除列表的第一个节点。

因为在 'int IntList::remove()' 函数中，它首先只是向前移动第一个节点，然后删除受害节点。

*所以，它只会删除受害者，在你的情况下，列表的下一个节点将是新的第一个节点。:)*

# java - MySQL中如何去除不适合utf8编码的坏字符？

> ID：13657019
> 
> 赞同：17
> 
> 时间：2012-12-01T06:25:28.680
> 
> 标签：java, mysql, unicode, utf-8

我有脏数据。有时它包含这样的[字符](http://www.fileformat.info/info/unicode/char/d86d/index.htm)。我使用这些数据进行查询，例如

```
WHERE a.address IN ('mydatahere') 
```

对于这个角色，我得到

> org.hibernate.exception.GenericJDBCException：非法混合排序规则（utf8_bin，IMPLICIT），（utf8mb4_general_ci，COERCIBLE），（utf8mb4_general_ci，COERCIBLE）用于操作'IN'

我怎样才能过滤掉这样的字符？我使用Java。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T07:26:28.523

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-17T04:53:37.150

您可以对其进行编码，然后将其解码为 UTF-8：

```
String label = "look into my eyes 〠.〠";

Charset charset = Charset.forName("UTF-8");
label = charset.decode(charset.encode(label)).toString();

System.out.println(label); 
```

输出：

```
look into my eyes ?.? 
```

编辑：我认为这可能只适用于 Java 6。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T08:12:38.623

您可以使用此正则表达式过滤代理字符：

```
String str  = ""; //U+20000, represented by 2 chars in java (UTF-16 surrogate pair)
str = str.replaceAll( "([\\ud800-\\udbff\\udc00-\\udfff])", "");
System.out.println(str.length()); //0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-27T11:44:54.530

在 java 机器上将字节数组转换为 String 后，您将获得（在大多数机器上默认情况下）UTF-16 编码的字符串。摆脱非 UTF-8 字符的正确解决方案是使用以下代码：

```
String[] values = {"\\xF0\\x9F\\x98\\x95", "\\xF0\\x9F\\x91\\x8C", "/*", "look into my eyes 〠.〠", "fkdjsf ksdjfslk", "\\xF0\\x80\\x80\\x80", "aa \\xF0\\x9F\\x98\\x95 aa", "Ok"};
for (int i = 0; i < values.length; i++) {
    System.out.println(values[i].replaceAll(
                    //"[\\\\x00-\\\\x7F]|" + //single-byte sequences   0xxxxxxx - commented because of capitol letters
                    "[\\\\xC0-\\\\xDF][\\\\x80-\\\\xBF]|" + //double-byte sequences   110xxxxx 10xxxxxx
                    "[\\\\xE0-\\\\xEF][\\\\x80-\\\\xBF]{2}|" + //triple-byte sequences   1110xxxx 10xxxxxx * 2
                    "[\\\\xF0-\\\\xF7][\\\\x80-\\\\xBF]{3}" //quadruple-byte sequence 11110xxx 10xxxxxx * 3
            , ""));
} 
```

或者，如果您想验证某个字符串是否包含非 utf8 字符，您可以使用 Pattern.matches，例如：

```
String[] values = {"\\xF0\\x9F\\x98\\x95", "\\xF0\\x9F\\x91\\x8C", "/*", "look into my eyes 〠.〠", "fkdjsf ksdjfslk", "\\xF0\\x80\\x80\\x80", "aa \\xF0\\x9F\\x98\\x95 aa", "Ok"};
for (int i = 0; i < values.length; i++) {
    System.out.println(Pattern.matches(
                    ".*(" +
                    //"[\\\\x00-\\\\x7F]|" + //single-byte sequences   0xxxxxxx - commented because of capitol letters
                    "[\\\\xC0-\\\\xDF][\\\\x80-\\\\xBF]|" + //double-byte sequences   110xxxxx 10xxxxxx
                    "[\\\\xE0-\\\\xEF][\\\\x80-\\\\xBF]{2}|" + //triple-byte sequences   1110xxxx 10xxxxxx * 2
                    "[\\\\xF0-\\\\xF7][\\\\x80-\\\\xBF]{3}" //quadruple-byte sequence 11110xxx 10xxxxxx * 3
                    + ").*"
            , values[i]));
} 
```

要使整个 Web 应用程序与 UTF8 兼容，请阅读此处：
[如何在 Java webapps 中使用 UTF-8](https://stackoverflow.com/a/138950/521754)
[更多关于字节编码和字符串](https://docs.oracle.com/javase/tutorial/i18n/text/string.html)。[你可以在这里](http://www.regexplanet.com/advanced/java/index.html)
检查你的模式。 在 PHP 中也是[如此](https://stackoverflow.com/questions/1401317/remove-non-utf8-characters-from-string)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-01T09:11:12.110

可能这会帮助某人，因为它帮助了我。

```
public static String removeBadChars(String s) {
  if (s == null) return null;
  StringBuilder sb = new StringBuilder();
  for(int i=0;i<s.length();i++){ 
    if (Character.isHighSurrogate(s.charAt(i))) continue;
    sb.append(s.charAt(i));
  }
  return sb.toString();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-12-16T15:29:24.070

在 PHP 中 - 我只允许可打印数据来解决这个问题。这确实有助于清理数据库的数据。
虽然它是预处理，但有时你没有那么奢侈。

```
$str = preg_replace('/[[:^print:]]/', '', $str); 
```

# java - 如何检查子列表是否位于较大列表的某个“窗口”中？

> ID：13657022
> 
> 赞同：0
> 
> 时间：2012-12-01T06:25:57.083
> 
> 标签：java, sorting, arraylist

给定一个数组列表和两个开始和结束索引，如何检查某个子数组列表是否存在于“窗口”中，即在索引之间。

IE

```
private ArrayList<Character> list = new ArrayList<Character>;
private int start = 2, end = 6;
private ArrayList<Character> sublist = new ArrayList<Character>;

boolean present = isPresent(); 
```

如何有效地实现这个 isPresent() 方法？我将在运行时编码算法中使用此方法来压缩文本文件（我需要先将其读入 ArrayList）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:46:01.403

我希望这就是你要找的

```
boolean iPresent(List l1, int start, int end, List l2) {
    for (int i = start; i < end; i++) {
        if (l2.size() > end - i) {
            break;
        }
        if (l1.get(i).equals(l2.get(0))) {
            return l1.subList(i, i + l2.size()).equals(l2);
        }
    }
    return false;
} 
```

请注意 subList() 返回一个由其父列表支持的 List 并且不会创建新数组，无需担心性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:41:15.447

```
return Collections.indexOfSubList(list.subList(start, end), subList) != -1; 
```

# java - 观察者表更新期间出现 NullPointerException

> ID：13657023
> 
> 赞同：0
> 
> 时间：2012-12-01T06:26:00.367
> 
> 标签：java, compiler-errors

我在表更新期间遇到了 initVectors 问题。它抛出一个 NullPointerException。

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at HardwareDbFile.HardwareInventoryUI.update(HardwareInventoryUI.java:47)
    at java.util.Observable.notifyObservers(Observable.java:159)
    at java.util.Observable.notifyObservers(Observable.java:115)
    at HardwareDbFile.HardwareFileWatchdog.actionPerformed(HardwareFileWatchdog.java:36)
    at javax.swing.Timer.fireActionPerformed(Timer.java:312)
    at javax.swing.Timer$DoPostEvent.run(Timer.java:244)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

表模型

```
package HardwareDbFile;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.StringTokenizer;
import java.util.Vector;
import javax.swing.table.AbstractTableModel;

public class HardwareFileTableModel extends AbstractTableModel{
    protected Vector data;
    protected Vector columnNames ;
    protected String datafile;

    public HardwareFileTableModel(String file){
        datafile = file;
        initVectors();  
    }

    public void initVectors() {
        String aLine ;
        data = new Vector();
        columnNames = new Vector();
        try {
            FileInputStream fin =  new FileInputStream(datafile);
            try (BufferedReader br = new BufferedReader(new InputStreamReader(fin))) {
                StringTokenizer st1 = new StringTokenizer(br.readLine(), "|");
                while(st1.hasMoreTokens()) {
                    columnNames.addElement(st1.nextToken());
                }
                // extract data
                while ((aLine = br.readLine()) != null) {
                    StringTokenizer st2 = new StringTokenizer(aLine, "|");
                    while(st2.hasMoreTokens()) {
                        data.addElement(st2.nextToken());
                    }
               }
           }
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
    @Override
    public int getRowCount() {
        return data.size() / getColumnCount();
    }

    @Override
    public int getColumnCount(){
        return columnNames.size();
    }

    @Override
    public String getColumnName(int columnIndex) {
        String colName = "";

        if (columnIndex <= getColumnCount()) {
            colName = (String)columnNames.elementAt(columnIndex);
        }
        return colName;
    }

    @Override
    public Class getColumnClass(int columnIndex){
        return String.class;
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return false;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        return (String)data.elementAt( (rowIndex * getColumnCount()) + columnIndex);
    }

    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    }
} 
```

观察者类

```
package HardwareDbFile;

import java.awt.event.*;
import java.io.*;
import java.util.*;
import javax.swing.Timer;

 public class HardwareFileWatchdog extends Observable implements ActionListener {
     Timer time = new Timer(1000,this); // check every second
     long lastModified;
     String file;

     HardwareFileWatchdog (String string) {
         file = string;
         File f = new File(file);
         lastModified = f.lastModified(); // original timestamp
         time.start();
    }

    @Override
     public void actionPerformed(ActionEvent e) {
         File f = new File(file);
         long actualLastModified = f.lastModified() ;
         if (lastModified != actualLastModified) {
             // the file have changed
             lastModified = actualLastModified;
             setChanged();
             notifyObservers();
         }
     }
} 
```

主类片段

```
 public class HardwareInventoryUI extends javax.swing.JFrame implements Observer {

    private String datafile = "hardware.dat";
    private String dataFilePath = "C:\\Windows\\Temp\\hardware.dat";
    protected HardwareFileTableModel model;

    /**
    * Creates new form HardwareInventoryUI
    */
    public HardwareInventoryUI() {
        initComponents();

        HardwareFileWatchdog  fileWD;
        Font font;
        font = new Font("SanSerif",Font.PLAIN,14);
        setFont(font);

        // this watchdog (an Observable object) is monitoring any file change
        fileWD = new HardwareFileWatchdog(dataFilePath);
        fileWD.addObserver(this);
    }

    @Override
    public void update(Observable o, Object arg) {
        // reload data because data file have changed
        model.initVectors();
        jTable.repaint();
    } 
```

添加记录的按钮操作

```
 private void jAddRecordActionPerformed(java.awt.event.ActionEvent evt) {

        String toolID = jToolID.getText();
        String toolName = jToolName.getText();
        String quantity = jQuantity.getText();
        String itemPrice = jItemPrice.getText();
        try {
            FileWriter fstream = new FileWriter(dataFilePath, true);
            BufferedWriter newRecord = new BufferedWriter(fstream);
            newRecord.newLine();
            newRecord.write(toolID + "|"+ toolName + "|" + quantity + "|" + itemPrice );
            newRecord.close();
        } catch (IOException ex) {
            Logger.getLogger(HardwareInventoryUI.class.getName()).log(Level.SEVERE, null, ex);
        }

    } 
```

过程：在表模型中创建并加载文件，工作正常。当我尝试添加新记录时，问题就来了。记录以正确的格式添加到文本文件中，但在尝试使用新数据更新表模型期间会引发异常。我很茫然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:30:48.333

`model`一片空白。您尚未为其创建实例。

# java - 具有相同名称但类型不同的变量

> ID：13657026
> 
> 赞同：5
> 
> 时间：2012-12-01T06:26:18.670
> 
> 标签：java, naming-conventions

我在[这里](http://www.steike.com/code/java-reverse-engineering)读到，在 Java 中，两个具有相同名称但不同类型的变量可以在同一范围内共存。我的意思是这个

```
class test
{
    private int x;
    private double x;
} 
```

但是所有的 java IDE 都不允许这样的代码。我想知道这样的代码在语法上是否真的正确，或者只是IDE不允许这样的代码来防止歧义。

[不管怎样，这里是网站](http://www.steike.com/code/java-reverse-engineering/)的摘录

> “如果幸运的话，你也许可以重新编译 Jad 的输出。**但是，Java VM 对变量命名的规则比 Java 语言本身更宽松。例如，一个有效的类文件可以有多个名为 'a '，只要它们的类型不同。如果你反编译这样的一个类，你得到的源代码将是无效的。**
> 
> JAD 通常会重命名有问题的字段，并制作一个可重新编译的文件……唯一的问题是重新编译的文件与原始类不兼容。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-11T09:20:40.403

正如其他人所说，在 Java 中是非法的，但在字节码中是合法的。

**javac 断言**

`assert`是一个 Java 示例，它在 Oracle JDK 1.8.0_45 中生成多个名称相同但类型不同的字段。例如：

```
public class Assert {
    // We can't use a primitive like int here or it would get inlined.
    static final int[] $assertionsDisabled = new int[0];
    public static void main(String[] args) {
        System.out.println($assertionsDisabled.length);
        // currentTimeMillis so it won't get optimized away.
        assert System.currentTimeMillis() == 0L;
    }
} 
```

的存在会`assert`生成`bool $assertionsDisable`一个合成字段来缓存方法调用，有关详细信息，请参见：[https](https://stackoverflow.com/a/29439538/895245) ://stackoverflow.com/a/29439538/895245 。

然后：

```
javac Assert.java
javap -c -constants -private -verbose Assert.class 
```

包含以下行：

```
 #3 = Fieldref           #9.#28         // Assert.$assertionsDisabled:[I
 #5 = Fieldref           #9.#31         // Assert.$assertionsDisabled:Z
#12 = Utf8               $assertionsDisabled
#28 = NameAndType        #12:#13        // $assertionsDisabled:[I
#31 = NameAndType        #12:#14        // $assertionsDisabled:Z

public static void main(java.lang.String[]);
 3: getstatic     #3                  // Field $assertionsDisabled:[I
10: getstatic     #5                  // Field $assertionsDisabled:Z 
```

请注意常量表是如何重用`#12`作为变量名的。

但是，如果我们声明了另一个布尔值，它将无法编译：

```
static final boolean $assertionsDisabled = false; 
```

有错误：

```
the symbol $assertionsDisabled conflicts with a compile synthesized symbol 
```

这也是为什么使用带有美元符号的字段名称是一个非常糟糕的主意：[我什么时候应该在变量名中使用美元符号 ($)？](https://stackoverflow.com/questions/14056918/when-should-i-use-the-dollar-symbol-in-a-variable-name)

**茉莉**

当然，我们也可以用 Jasmin 试试看：

```
.class public FieldOverload
.super java/lang/Object

.field static f I
.field static f F

.method public static main([Ljava/lang/String;)V
    .limit stack 2

    ldc 1
    putstatic FieldOverload/f I
    ldc 1.5
    putstatic FieldOverload/f F

    getstatic java/lang/System/out Ljava/io/PrintStream;
    getstatic FieldOverload/f I
    invokevirtual java/io/PrintStream/println(I)V

    getstatic java/lang/System/out Ljava/io/PrintStream;
    getstatic FieldOverload/f F
    invokevirtual java/io/PrintStream/println(F)V

    return
.end method 
```

其中包含两个静态字段，一个`int`( `I`) 和一个`float`( `F`)，并输出：

```
1
1.5 
```

如果有效，因为：

*   `getstatic`指向`Fieldref`常量表上的结构
*   `Fieldref`指向一个`NameAndType`
*   `NameAndType`显然指向类型

因此，为了区分它们，Jasmin 只是使用了两种不同`Fieldref`的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T06:29:36.270

根据语言规范（[JLS 8.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3-300)）：

> 类声明的主体声明两个具有相同名称的字段是编译时错误。

您引用的语句是关于类文件（即编译文件，而不是源代码）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T05:27:36.183

您不能让具有相同名称（但类型不同）的变量存在于同一范围内。考虑是否有可能，那么 java 编译器将如何确定您的意思。

考虑这个代码片段

```
class test
{
    private int x;
    private double x;

    test() //constructor
    {
        System.out.println(x); //Error cannot determine which x you meant
    } 
} 
```

java 编译器无法理解您实际指的是哪个 x。所以这样的代码在语法上不正确且不可编译。

但是，存在诸如[ClassEditor](http://classeditor.sourceforge.net/)之类的工具，可以在生成的类文件创建后对其进行修改。可以将两个变量的名称更改为相同。

然而，这样的类不一定可以由 java jvm 运行。

您引用的软件`JAD`可以在类文件中重命名此类重复的命名变量，以便您将获得的源代码实际上在语法上是正确的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T09:25:18.140

当然，你不能在同一个类中有 int x 和 long x 字段，就像你不能有两个具有相同名称和参数列表的方法一样。但这是在源代码级别。JVM 和字节码有不同的规则。考虑一下：

包装测试；

```
public class Test {
    static int x;

    @Override
    protected Test clone() throws CloneNotSupportedException {
        return this;
    }

    public static void main(String[] args) {
        int y = x;
    }
} 
```

如果您使用字节码大纲工具（我使用了 Andrey Loskutov 的 Eclipse 插件），您将在这一行中看到 int Test.main()

```
GETSTATIC test/Test.x : I 
```

这就是 JVM 从字段 x 加载值的方式，它的全名是“test/Test.x : I”。这会提示您字段值存在于字段全名中。

众所周知，javac 不是创建类的唯一方法，还有一些工具/库可以直接创建字节码，并且它们可以自由地创建具有相同名称但不同类型的字段的类。JNI 也是如此。

很难展示一个我试图证明的工作示例。但是让我们考虑方法，一个类似的问题。字节码分析显示Test类中有两个方法名称和参数相同，这是JLS不允许的：

```
protected clone()Ltest/Test; throws java/lang/CloneNotSupportedException 

protected volatile bridge clone()Ljava/lang/Object; throws java/lang/CloneNotSupportedException 
```

javac 添加了“bridge”方法，因为 Test.clone() 返回 Test ，这意味着它不会覆盖返回 Object 的 Object.clone() ，这是因为 JVM 认为这两个是不同的方法

```
1 clone()Ltest/Test;
2 clone()Ljava/lang/Object; 
```

# javascript - javascript滚动多个div

> ID：13657031
> 
> 赞同：2
> 
> 时间：2012-12-01T06:27:04.087
> 
> 标签：javascript, jquery, html, unbind

```
 <script>
    $(document).ready(function() {

            $('#scrollingtext').bind('marquee', function() {
                var ob = $(this);
                var tw = ob.width();
                var ww = ob.parent().width();
                ob.css({ right: -tw });
                ob.animate({ right: ww }, 20000, 'linear', function() {
                    ob.trigger('marquee');

                });
            }).trigger('marquee');

        });     

    </script>

<div id="scrollingtext"></div> 
```

我正在用这个scrollingtext div做foreach，所以第二次它不会滚动bec。相同的 id .. 我尝试了一些`$(this).unbind();`事情但无法解决它.. 我需要滚动 foreach 中的每个 id=scrollingtext 任何帮助都可以节省我的时间..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:29:04.103

HTML 只允许在同一页面上使用一个 ID。改用一个类。问题解决了。

```
<div class="scrollingtext"></div>
<div class="scrollingtext"></div>
<div class="scrollingtext"></div>
<script>
    $('.scrollingtext').bind('marquee', function() { /* .. */ });
</script> 
```

# yii - 如何在 yii 下拉列表中选择默认值

> ID：13657033
> 
> 赞同：9
> 
> 时间：2012-12-01T06:27:28.533
> 
> 标签：yii

我正在使用 yii`dropDownList`在我的表单中创建下拉菜单。我想要一个值，例如`'78'=>'selected'`在下拉菜单中选择默认值。我的下拉菜单是

```
dropDownList($testcontroller,'testid',CHtml::listData(Phases::model()->findAllByAttributes(array('pid'=>$pid)), 'id', 'phaseName')); 
```

谁能帮我做这件事

谢谢 ;）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-01T06:35:08.717

```
dropDownList($testcontroller,
  'testid',
   CHtml::listData(Phases::model()->findAllByAttributes(array('pid'=>$pid)), 
  'id', 
  'phaseName'),
   array('options' => array('78'=>array('selected'=>true)))); 
```

**如果它来自数据库，请使用类似下面的内容（在列表框或多个允许`dropDownList`使用的情况下`multiple=>true`）**

```
foreach ($selections as $eachValue)
  $selectedOptions[$eachValue] = array('selected'=>'selected');

echo  $form->dropDownList($model,
      'testid', 
       CHtml::listData(Phases::model()->findAllByAttributes(array('pid'=>$pid)),
      'id',
      'phaseName'),
      array('multiple'=>'true','prompt'=>'select ','options'=>$selectedOptions)); 
```

**有关 dropDownList 的更多详细信息：[dropDownList() 方法](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T06:33:16.003

这可以通过在下拉的 html 选项中传递它来完成。

`dropDownList($testcontroller, 'testid', CHtml::listData(Phases::model()->findAllByAttributes(array('pid'=>$pid)), 'id', 'phaseName'), array('options' => array('78'=>array('selected'=>true))));`

并且将选择值 78。

对于提示，可以执行以下操作：

`dropDownList($testcontroller,'testid', CHtml::listData(Phases::model()->findAll(), 'id', 'phasename'), array('empty'=>'Select an option'));`

检查这个寻求[帮助](http://yiihelp.blogspot.in/2012/05/default-selected-value-in-dropdownlist.html)。谢谢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-14T10:43:13.047

假设您想在低音上显示下拉列表`menu_name` 和`Menu model`选定值，`parent_menu_id`那么您可以像这样使用它

```
 <?php echo $form->dropDownList($model,'parent_menu_id', CHtml::listData(Menu::model()->findAll(), 'menu_id', 'menu_name'), array('empty'=>'--please select--')); ?> 
```

# r - 如何避免在 data.table 中进行向量搜索

> ID：13657039
> 
> 赞同：6
> 
> 时间：2012-12-01T06:28:30.220
> 
> 标签：r, data.table

我有一个 data.table X 我想创建一个基于 2 个字符变量的变量

```
 X[, varC :=((VarA =="A" & !is.na(VarA)) 
               | (VarA == "AB" & VarB =="B" & !is.na(VarA) & !is.na(VarB))
                )
      ] 
```

此代码有效，但速度很慢，因为它对 2 个字符变量进行矢量扫描。请注意，我没有按 VarA 和 VarB 设置密钥 claim4 表。在 data.table 中是否有“正确”的方法来执行此操作？

更新 1：我不使用 setkey 进行此转换，因为我已经使用 setkey(X, Year, ID) 进行其他变量转换。如果我这样做了，我需要在此转换后将键重置回 Year, ID。

更新 2：我确实用 Matthew 的方法对我的方法进行了基准测试，而且他的方法要快得多：

```
 test replications elapsed relative user.self sys.self user.child sys.child
2 Matthew               100   3.377    1.000     2.596    0.605          0         0
1 vectorSearch          100 200.437   59.354    76.628   40.260          0         0 
```

唯一的次要问题是 setkey 然后再次 re-setkey 有点冗长:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T14:38:41.333

怎么样 ：

```
setkey(X,VarA,VarB)
X[,varC:=FALSE]
X["A",varC:=TRUE]
X[J("A","AB"),varC:=TRUE] 
```

或者，在一行中（保存变量的重复`X`并进行演示）：

```
X[,varC:=FALSE]["A",varC:=TRUE][J("A","AB"),varC:=TRUE] 
```

为避免按要求设置密钥，*手动辅助密钥*如何：

```
S = setkey(X[,list(VarA,VarB,i=seq_len(.N))],VarA,VarB)
X[,varC:=FALSE]
X[S["A",i][[2]],varC:=TRUE]
X[S[J("A","AB"),i][[3]],varC:=TRUE] 
```

现在很明显，这种语法很丑陋。所以[FR#1007 Build in secondary keys](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=1007&group_id=240&atid=978)就是将其构建到语法中；例如，

```
set2key(X,varA,varB)
X[...some way to specify which key to join to..., varC:=TRUE] 
```

与此同时，也可以手动操作，如上图所示。

# java - Primefaces 选项列表目标和源值不会更改

> ID：13657042
> 
> 赞同：4
> 
> 时间：2012-12-01T06:29:06.630
> 
> 标签：java, jsf, primefaces, omnifaces

我的 primefaces pickList 源值和目标值没有改变，我按照[primefaces 展示](http://www.primefaces.org/showcase-labs/ui/picklist.jsf)中的示例 并在这里查看了几个帖子，但仍然无法解决问题。我正在使用数据库中的列表来填充源，如下所示：

```
private DualListModel<Course> courseModel;
public CourseBean() {
    List<Course> target = new ArrayList<Course>();
    List<Course> source = new ArrayList<Course>();
    courseModel = new DualListModel<Course>(source, target);
}
...
//this DualListModel getter also populates the source with values from db
public DualListModel<Course> getCourseModel() {
    courseModel.setSource(getCourseList());
    return courseModel;
} 
```

我的转换器是

```
import org.omnifaces.converter.SelectItemsConverter;

@FacesConverter("courseConverter")
public class CourseConverter extends SelectItemsConverter {
@Override
public String getAsString(FacesContext context, UIComponent component,
        Object value) {
    Integer id = (value instanceof Course) ? ((Course) value).getId()
            : null;
    return (id != null) ? String.valueOf(id) : null;
}
@Override
public Object getAsObject(FacesContext arg0, UIComponent arg1, String value) {
    Course course = new Course();
    course.setId(Integer.parseInt(value));
    return course;
}
} 
```

最后我的 xhtml 页面是：

```
<h:form>
    <p:pickList id="coursesOffered"
        value="#{courseView.courseModel}" var="course"
        itemValue="#{course}" itemLabel="#{course.courseTitle}"
        converter="courseConverter" showSourceFilter="true"
        showTargetFilter="true" filterMatchMode="contains">

        <f:facet name="targetCaption">Selected</f:facet>
        <f:facet name="sourceCaption">All Courses</f:facet>

        <p:ajax event="transfer" listener="#{courseView.onTransfer}" />

        <p:column style="width:10%">  
        #{course.courseCode}:
    </p:column>
        <p:column style="width:90%">  
       #{course.courseTitle}  
    </p:column>

    </p:pickList>

    <p:commandButton id="pojoSubmit" value="Submit"
        update="displayPlayers" oncomplete="playerDialog.show()"
        style="margin-top:5px" />

    <p:dialog showEffect="fade" hideEffect="fade" widgetVar="playerDialog">
        <h:panelGrid id="displayPlayers" columns="2">

            <h:outputText value="Source: " style="font-weight:bold" />
            <ui:repeat value="#{courseView.courseModel.source}"
                var="course">
                <h:outputText value="#{course.courseTitle}"
                    style="margin-right:5px" />
            </ui:repeat>

            <h:outputText value="Target: " style="font-weight:bold" />
            <ui:repeat value="#{courseView.courseModel.target}"
                var="course">
                <h:outputText value="#{course.courseTitle}"
                    style="margin-right:5px" />
            </ui:repeat>

        </h:panelGrid>
    </p:dialog>
</h:form> 
```

选择列表正确显示，源中填充了数据库中的值，但是，单击按钮后，即使在界面上传输项目后，对话框也仅显示原始源列表值和空目标列表。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T07:34:35.590

我发现您的代码存在一些问题。在 getter 中，您正在从数据库中重建 DualList，重置您迄今为止所做的任何更改。

试着让你得到这样的东西：

```
public DualListModel<Course> getCourseModel() {
    return this.courseModel;
} 
```

在注解 @PostConstruct 的方法中而不是在构造函数 + getter 中构造和加载数据库中的列表。

```
public CourseBean() {}

@PostConstruct
public void init() {
    List<Course> target = new ArrayList<Course>();
    courseModel.setSource(getCourseList());
    courseModel = new DualListModel<Course>(source, target);
} 
```

还要注释你的bean @ViewScoped，这样你就不会在每个请求上构造一个带有空目标列表的新bean

```
@ManagedBean(name="courseView")
@ViewScoped
public class CourseBean {

} 
```

最后你还需要一个setter：

```
public void setCourseModel(DualListModel<Course> courseModel) {
    this.courseModel = courseModel;
} 
```

我还没有真正研究过转换器，当我上次做一个选择列表时，我把转换器包含在 primefaces 展示中（从未尝试过omnifaces）。这是源链接：[http ://code.google.com/p/ind/source/browse/indicadorCensoJSF/src/ve/gob/ine/censo/beans/convert/PrimeFacesPickListConverter.java?spec=svn154&r= 154](http://code.google.com/p/ind/source/browse/indicadorCensoJSF/src/ve/gob/ine/censo/beans/convert/PrimeFacesPickListConverter.java?spec=svn154&r=154)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-27T18:46:21.180

作为已接受答案的补充，我遇到了**Omnifaces**列表转换器的问题。一切正常，除了已经选择的项目没有被更新和“丢失”，它们在视图中，但唯一处理的项目是视图中的选择，而不是已经设置为目标的项目bean，因此，目标列表中没有选择的项目加上在 dualList 构造函数中设置的项目，目标列表只有在视图中选择的项目，而不是先前设置的项目。

作为解决方案，我还为 primefaces 组件实现了一个自定义选项列表转换器。现在一切都像一个魅力。

我没有具体回答实际问题，因为它已经有一个可接受的答案（而且我没有发表评论的要点）。我只是在补充，因为有些人在使用 primefaces 2.3 和 omnifaces 3.1 时可能会遇到问题。我确实搜索了很多关于我所面临的问题，但至少没有发现正在发生的事情的暗示。

这个站点：[picklist example](https://www.logicbig.com/tutorials/misc/primefaces/pick-list.html)有一个关于如何制作转换器的教程，如果有人有疑问。ACV 的答案对转换器也有效，尽管它已经由提出问题的 Silverfish 实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-17T17:02:30.357

要使用对象，您需要一个转换器。这是如何实现它的最佳答案：[https ://stackoverflow.com/a/6625392/912829](https://stackoverflow.com/a/6625392/912829)

# c++ - stl_list.h中“NOTA BENE”这一段是什么意思？

> ID：13657043
> 
> 赞同：2
> 
> 时间：2012-12-01T06:29:14.167
> 
> 标签：c++

我是 cplusplus 的新手，感谢您回答我的问题。

stl_list.h 中的段落内容如下：

```
// NOTA BENE
// The stored instance is not actually of "allocator_type"'s
// type.  Instead we rebind the type to
// Allocator<List_node<Tp>>, which according to [20.1.5]/4
// should probably be the same.  List_node<Tp> is not the same
// size as Tp (it's two pointers larger), and specializations on
// Tp may go unused because List_node<Tp> is being bound
// instead.
//
// We put this to the test in the constructors and in
// get_allocator, where we use conversions between
// allocator_type and _Node_alloc_type. The conversion is
// required by table 32 in [20.1.5]. 
```

1.  我在哪里可以找到 [20.1.5]/4 和 table 32 这样的东西？
2.  为什么 Tp 上的专业化可能会被闲置？这实际上意味着什么？（如果您能提供一段简单的源代码和简单的解释，我将不胜感激。）
3.  如果人们确实需要专业化怎么办，有没有办法破解它？？：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T08:16:15.460

1.  正如 Paul 已经指出的，这些是对 C++ 标准的引用。（尽管他发布的链接侵犯了版权，并且是该标准的旧副本）您在此处阅读了如下参考：

    ```
    N3376 23.2.1 [container.requirements.general]/6
    ^^^^^ Version of the standard working paper being discussed
          ^^^^^^ Clause / subclause in the standard being discussed
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ section name
                              paragraph number    ^ 
    ```

    您会在标准参考中看到打印在 s 中的部分标题的原因`[]`是因为该标准的不同工作文件副本会根据条款编号移动部分，但部分标题相对恒定。（例如，如果有人使用比 N3376 更晚的标准工作文件，他们可以搜索`[container.requirements.general]`并找到我正在谈论的部分）
    段落编号单独列出以将其与子条款编号区分开来。例如，是`23.2.1`第 23.2 条中的第 1 段还是整个子条`23.2.1`？将其分开可以更清楚地说明这一点。

2.  这意味着如果您为分配器类创建模板特化，则针对给定类型的模板特化可能不会被使用；并改为使用主模板。这是因为分配器的特化是基于类型的。假设您有一个主模板`my_allocator<Type>`和一个专门`my_allocator<int>`针对`int`. 但是`std::list`是链表，所以需要分配`list_node<int>`对象，而不是`int`s。所以它创建了一个`my_allocator<list_node<int>>`替代，这使得`<int>`未使用的专业化。有关更多示例和细节，
    请参阅[Stephan T. Lavavej 的优秀系列 Core C++，第 5 部分“模板专业化” 。](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-C-5-of-n)

3.  你不能；至少不是以标准方式。`list`用于其列表节点的内部名称由实现定义。您不能在可移植代码中命名该类型以进行专业化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T06:55:34.277

至于你的问题1：

它似乎是对与分配器要求相关的 ISO C++ 标准的引用。我在这里找到了 1998 年 C++ 标准的副本：

[http://www-d0.fnal.gov/~dladams/cxx_standard.pdf](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)

看看 pdf 中的第 354 页（第 380 页）。表 32 出现了 2 页。

至于你的问题 2 和 3，那远高于我的工资等级。我可能会冒昧地说，专业化是指从 Tp 派生的类。但我只是不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T08:17:04.123

对于`std::list`类型，它将（通常）使用类似`node`（或类似的东西）的类来保存类型的值`Tp`以及指向前一个和下一个元素的指针。显然，当您使用分配器来创建这些值时，实际上需要的不是一个类型，`Tp`而是一个类型`node<Tp>`。这就是他们需要重新绑定分配器的原因。因此，在列表类中，您会看到类似`std::allocator<Tp>::template rebind<node<Tp>>`.

专业化可能未使用的原因是它在内部分配`node<Tp>`而不是`Tp`. 因此，如果我们编写自己的分配器类，然后将其专门用于`Tp`，则这种专门化将不会用于`std::list`。例如：

```
template <typename T>
class my_allocator
{
     //typedefs
     pointer allocate(...);
     void deallocate(...);

     //Other member functions
};

template <>
class my_allocator<int>
{
     //Some specialization for int
     ...

}; 
```

现在，如果我们使用`std::list<int, my_allocator<int>>`，由于分配器会反弹，我们最终可能`my_allocator<node<int>>`会使用非专业化的，因此将使用非专业化版本`my_allocator`。

如果`std::list`像`std::list`.

# javascript - 单击对象会在同一页面上触发单独的链接

> ID：13657044
> 
> 赞同：0
> 
> 时间：2012-12-01T06:29:13.697
> 
> 标签：javascript, twitter-bootstrap

您好我正在使用 bootstrap-tab.js（如下）[来更改选项卡](http://twitter.github.com/bootstrap/javascript.html#tabs)，我想使用页面上的单独链接激活其中一个选项卡。通过链接到“#tab2”，我可以很容易地访问第二个选项卡内容，但问题是选项卡系统没有反映更改。因此，如果有意义的话，我的 Tab1 在显示 Tab2 内容时处于活动状态。

我怀疑最简单的方法（给定 js）是使用 js 从实际选项卡触发链接点击。知道如何实现这一目标吗？

```
!function ($) {

  "use strict"; // jshint ;_;

 /* TAB CLASS DEFINITION
  * ==================== */

  var Tab = function (element) {
    this.element = $(element)
  }

  Tab.prototype = {

    constructor: Tab

  , show: function () {
      var $this = this.element
        , $ul = $this.closest('ul:not(.dropdown-menu)')
        , selector = $this.attr('data-target')
        , previous
        , $target
        , e

      if (!selector) {
        selector = $this.attr('href')
        selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
      }

      if ( $this.parent('li').hasClass('active') ) return

      previous = $ul.find('.active a').last()[0]

      e = $.Event('show', {
        relatedTarget: previous
      })

      $this.trigger(e)

      if (e.isDefaultPrevented()) return

      $target = $(selector)

      this.activate($this.parent('li'), $ul)
      this.activate($target, $target.parent(), function () {
        $this.trigger({
          type: 'shown'
        , relatedTarget: previous
        })
      })
    }

  , activate: function ( element, container, callback) {
      var $active = container.find('> .active')
        , transition = callback
            && $.support.transition
            && $active.hasClass('fade')

      function next() {
        $active
          .removeClass('active')
          .find('> .dropdown-menu > .active')
          .removeClass('active')

        element.addClass('active')

        if (transition) {
          element[0].offsetWidth // reflow for transition
          element.addClass('in')
        } else {
          element.removeClass('fade')
        }

        if ( element.parent('.dropdown-menu') ) {
          element.closest('li.dropdown').addClass('active')
        }

        callback && callback()
      }

      transition ?
        $active.one($.support.transition.end, next) :
        next()

      $active.removeClass('in')
    }
  }

 /* TAB PLUGIN DEFINITION
  * ===================== */

  $.fn.tab = function ( option ) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('tab')
      if (!data) $this.data('tab', (data = new Tab(this)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.tab.Constructor = Tab

 /* TAB DATA-API
  * ============ */

  $(function () {
    $('body').on('click.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
      e.preventDefault()
      $(this).tab

('show')
    })
  })

}(window.jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:27:13.650

好的，对不起，我想通了。

```
$(document).ready(function(){
    $('#scoretab').click(function (e) {
      $('#myTab a[href="#tab2"]').tab('show');
    })
}); 
```

# android - 使用自定义 baseAdapter 从列表视图中删除行

> ID：13657045
> 
> 赞同：0
> 
> 时间：2012-12-01T06:29:15.443
> 
> 标签：android, listview, baseadapter

您好，我有一个带有 CustomBaseAdapter 的 ListView。listview 内容 EditText 和 DeleteButton。现在我想删除按钮单击事件上的行。我尝试了adapter.removeViewAt(int) 方法，但它给了我AdapterView 不支持removeViewAt(int) 的异常。我尝试了许多解决方案，但没有一个有效，请帮助我。

我得到以下错误日志 -

```
12-01 12:28:53.499: W/System.err(464): java.lang.UnsupportedOperationException: removeView(View) is not supported in AdapterView
12-01 12:28:53.499: W/System.err(464):  at android.widget.AdapterView.removeView(AdapterView.java:489)
12-01 12:28:53.499: W/System.err(464):  at android.view.View.performClick(View.java:2408)
12-01 12:28:53.499: W/System.err(464):  at android.view.View$PerformClick.run(View.java:8816)
12-01 12:28:53.499: W/System.err(464):  at android.os.Handler.handleCallback(Handler.java:587)
12-01 12:28:53.499: W/System.err(464):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-01 12:28:53.509: W/System.err(464):  at android.os.Looper.loop(Looper.java:123)
12-01 12:28:53.519: W/System.err(464):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-01 12:28:53.519: W/System.err(464):  at java.lang.reflect.Method.invokeNative(Native Method)
12-01 12:28:53.519: W/System.err(464):  at java.lang.reflect.Method.invoke(Method.java:521)
12-01 12:28:53.519: W/System.err(464):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-01 12:28:53.519: W/System.err(464):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-01 12:28:53.519: W/System.err(464):  at dalvik.system.NativeStart.main(Native Method) 
```

我的适配器是 -

公共类 LazyAdapter 扩展 BaseAdapter {

```
private Activity activity;   
private static LayoutInflater inflater=null;
private int noofrows;
private int LayoutRid;

static Map<Integer, String> Amt = new LinkedHashMap<Integer, String>();
static String AmtValue;

public LazyAdapter(Activity a, int rows, int Layoutid) {
    activity = a;       
    noofrows = rows;
    LayoutRid = Layoutid;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);        
}

public int getCount() {
    return noofrows;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    ViewHolder holder = new ViewHolder();

    convertView = inflater.inflate(_LayoutRid, null );  

        holder.Amount = (EditText)convertView.findViewById(R.id.SESDedCCetDedAmount);

        holder.btnDel = (Button)convertView.findViewById(R.id.btnMinus);

        convertView.setTag(holder);     

        holder.Amount.setText(AmtValue == null? "" : AmtValue);
        holder.btnDel.setText(CodeValue == null? "" : CodeValue);

        holder.Amount.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before, int count) {

            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            public void afterTextChanged(Editable s) {
                Amt.put(position, s.toString());
            }
        });

        holder.btnDel.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // Take List from parent view
                ParentActivity.list.removeViewAt(position);
                notifyDataSetChanged();
            }
        });

    return convertView;
}

static class ViewHolder {

    EditText Amount;
    Button btnDel;

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T08:21:04.780

试试这个代码，

```
 btnOrImage.setOnClickListener(new OnClickListener() 
 {
    @Override
    public void onClick(View v) 
    {
        // delete query fire here whatever related to requirements.
        mList.remove(position);//you can delete your item here
        notifyDataSetChanged();
    }
}); 
```

此方法用于**notifyDataSetChanged()**从 BaseAdapter 刷新到 getView() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:34:43.957

试试这个，

```
holder.delete.setOnClickListener(new OnClickListener() 

    {
        @Override
        public void onClick(View v) 
        {
            your_item.remove(position);//you can delete your item here

            notifyDataSetChanged();
        }
    }); 
```

**notifyDataSetChanged**是刷新视图和更新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T06:36:44.677

```
myHolder.btn_delete.setOnClickListener(new OnClickListener() 
{
    @Override
    public void onClick(View v) 
    {
      // remove data from List and call 
      notifyDataSetChanged(); <-- will remove old data
    }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-03T05:24:55.347

我试图将其从 中删除`Arraylist`，但实际上我将其存储在`Hashmap`. 我不得不从那里删除它：`hashmap.remove(position);`解决了我的问题。

# ruby-on-rails - 基于 Ruby on Rails 的网站和应用程序

> ID：13657046
> 
> 赞同：1
> 
> 时间：2012-12-01T06:29:17.377
> 
> 标签：ruby-on-rails, mongodb, geolocation, rails-geocoder

我已经在空闲时间开始编码一年多了。我有一个基于位置的社交社区想法，主要处理位置和附近的热门地点。我做了一些关于脚手架的 10 分钟视频，并且完全被 Ruby on Rails 迷住了。我真的很想继续前进并在 RoR 上取得成功。

但是我不知道如何使用处理位置的数据库。我做了一些研究，看起来 Mongo.DB 是考虑到 4square 所做的最流行的一个。但我想知道我们可以使用 Active Record 吗？我看到了一个名为 geocoder 的 gem，它会帮助我解决我想要解决的问题吗？

同样，我只用 C++ 编写过代码，并没有完全使用数据库。

我应该使用哪些宝石和工具？Ruby 和 Mongo.db 或 Ruby on Rails 使用 geocoder 之类的 gem 简单吗？

看到一个名为 www.foodspotting.com 的网站，我感到很受鼓舞，它表明他们已经用 ruby​​ on rails 进行了编码！有人可以给出一些好的组合，以便我可以开始朝着正确的方向思考吗？

用mongo在rails上运行ruby？红宝石与辛纳屈？

虽然我试图坚持 RoR 类型，因为我订阅了 Michael Hartl 教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:49:12.197

我建议将**PostgreSQL**与**PostGIS**一起使用。您需要`activerecord-postgis-adapter`gem 才能使用 ActiveRecord。

然而，警告一句，处理空间数据并不容易，如果这是你的第一个 Ruby on Rails 应用程序*和*你的第一个数据库支持的应用程序，我会说你咬得比你能做的要多预计咀嚼。从小处着手，从简单开始，一路向上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:17:24.330

首先尝试使用 MongoDB 等数据库在 ruby​​ on rails 中制作一些小型应用程序。我建议这样做是因为您将使用基于位置的应用程序实现。

一个非常好的教程一步一步让你去做 -

[http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started](http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started)

关于地理编码器 - 它提供对象地理编码（按街道或 IP 地址）、反向地理编码（与街道地址的坐标）、ActiveRecord 和 Mongoid 的距离查询、结果缓存等。专为 Rails 设计，但也适用于 Sinatra 和其他 Rack 框架。您将找到地理编码器的文档，让您从这里重新开始 -

[http://rubydoc.info/gems/geocoder/1.1.5/frames](http://rubydoc.info/gems/geocoder/1.1.5/frames)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T08:05:32.707

这不是在 MongoDB 和 PostgreSQL 或 RoR 和 Sinatra 之间进行选择的问题。

您真正需要的是一个 RoR 插件/引擎/模块/任何可以帮助您进行地图查看、导航、定位和地理编码的东西。geocoder gem 是这个软件堆栈的一个组件。

您将选择的地理编码/映射/导航工具集将强加给您 DB（很可能是带有 GIS 扩展的 PostgreSQL，即：PostGIS）和许多其他实现细节。

OpenStreetMap (http://wiki.openstreetmap.org/wiki/Main_Page) 开发和使用的一个非常知名且广受好评的地图/导航软件堆栈（你是一个幸运的人......）甚至基于在 RoR 上。

看看他们的解决方案，并在他们的论坛/邮件列表上与开发人员交谈。我相信你会找到你需要的。

# uitableview - 如何自动旋转自定义标题部分视图

> ID：13657052
> 
> 赞同：0
> 
> 时间：2012-12-01T06:29:49.000
> 
> 标签：uitableview, ios5, autorotate

我的表格有一个自定义的部分标题。我添加了一个按钮
button1.frame = CGRectMake(frame.size.width-70, 5.0, 35.0, 35.0); 这会将按钮放在右上角。但是，当我自动旋转到横向时，按钮保持在与纵向模式相同的位置？我错过了什么？

```
-(id)initWithFrame:(CGRect)frame title:(NSString*)title section:(NSInteger)sectionNumber delegate:(id <SectionHeaderViewDelegate>)delegate AllAnswered:(SectionAnswered)sectionAnswered{

self = [super initWithFrame:frame];

if (self != nil) {

    // Set up the tap gesture recognizer.
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(toggleOpen:)];

    tapGesture.cancelsTouchesInView = NO;

    [self addGestureRecognizer:tapGesture];

    _delegate = delegate;
    self.userInteractionEnabled = YES;

    //create applyAll image
    UIButton *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
    button1.frame = CGRectMake(frame.size.width-70, 5.0, 35.0, 35.0);
    button1.backgroundColor = [UIColor clearColor];
    button1.opaque = NO;
    button1.tag= 1;
    [button1 setImage:[UIImage imageNamed:@"carat-open.png"] forState:UIControlStateNormal];
    [button1 addTarget:self action:@selector(applyToAll:) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:button1];
    _applyButton = button1;

     .............
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:46:26.740

您可以设置按钮的`autoresizingMask`.

```
button1.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

# objective-c - 仅使用捏合手势增加高度或宽度

> ID：13657053
> 
> 赞同：0
> 
> 时间：2012-12-01T06:29:52.480
> 
> 标签：objective-c, ios, ios6, xcode4.5, uipinchgesturerecognizer

> **可能重复：**
> [使用 UIPinchGestureRecognizer 在单方向缩放 uiview](https://stackoverflow.com/questions/6759028/using-uipinchgesturerecognizer-to-scale-uiviews-in-single-direction)

**我的代码如下：**

```
 UIPinchGestureRecognizer *croperViewGessture = [[UIPinchGestureRecognizer alloc]initWithTarget:self action:@selector(croperViewScale:)];
        croperViewGessture.delegate=self;
        [croperView addGestureRecognizer:croperViewGessture];   

     -(void)CanvasScale:(id)sender
{
    if([(UIPinchGestureRecognizer *)sender state]==UIGestureRecognizerStateBegan)
    {
        if ([sender numberOfTouches] == 2) {
            _pntOrig[0] = [(UIPinchGestureRecognizer *)sender locationOfTouch:0 inView:cropedAngle];
            _pntOrig[1] = [(UIPinchGestureRecognizer *)sender locationOfTouch:1 inView:cropedAngle];
        } else {
            _pntOrig[0] = [(UIPinchGestureRecognizer *)sender locationInView:cropedAngle];
            _pntOrig[1] = _pntOrig[0];
        }
        _lenOrigX = fabs(_pntOrig[1].x - _pntOrig[0].x);
        _lenOrigY = fabs(_pntOrig[1].y - _pntOrig[0].y);
        _xScale = 1.0;
        _yScale = 1.0;
    }
    if ([(UIPinchGestureRecognizer *)sender state] == UIGestureRecognizerStateChanged) {
        if ([sender numberOfTouches] == 2) {
            CGPoint pntNew[2];
            pntNew[0] = [(UIPinchGestureRecognizer *)sender locationOfTouch:0 inView:cropedAngle];
            pntNew[1] = [(UIPinchGestureRecognizer *)sender locationOfTouch:1 inView:cropedAngle];

            CGFloat lenX = fabs(pntNew[1].x - pntNew[0].x);
            CGFloat lenY = fabs(pntNew[1].y - pntNew[0].y);

            CGFloat dX = fabs(lenX - _lenOrigX);
            CGFloat dY = fabs(lenY - _lenOrigY);
            CGFloat tot = dX + dY;

            CGFloat pX = dX / tot;
            CGFloat pY = dY / tot;

            CGFloat scale = [(UIPinchGestureRecognizer *)sender scale];
            CGFloat dscale = scale - 1.0;
            _xScale = dscale * pX + 1;
            _yScale = dscale * pY + 1;
        }
    }
CGAffineTransform transform = cropedAngle.transform;
CGAffineTransform newTarnsform = CGAffineTransformScale(transform, _lenOrigX, _lenOrigY);
[cropedAngle setTransform:newTarnsform]; 
```

}

但问题是，当我执行 Zoomin 或 Zoomout 时，查看分布在整个屏幕上，禁用后请查看我的代码并告诉我出了什么问题。

请在这个问题上帮助我，我提前表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:44:16.490

我编写了自己的自定义扩展来`UIPinchGestureRecognizer`提供一个`xScale`和一个`yScale`，除了正常的`scale`. 这是替代品的下降`UIPinchGestureRecognizer`。您现在可以选择查看普通版`scale`或新版`xScale`and `yScale`。根据用户捏合手势的方式，相应地使用这些值来缩放视图。

RMPinchGestureRecognizer.h

```
#import <Foundation/Foundation.h>
#import <UIKit/UIGestureRecognizerSubclass.h>

@interface RMPinchGestureRecognizer : UIPinchGestureRecognizer {
    CGPoint _pntOrig[2];
    CGFloat _lenOrigX;
    CGFloat _lenOrigY;
    CGFloat _xScale;
    CGFloat _yScale;
}

@property (nonatomic, readonly) CGFloat xScale;
@property (nonatomic, readonly) CGFloat yScale;

@end 
```

RMPinchGestureRecognizer.m

```
#import "RMPinchGestureRecognizer.h"

@implementation RMPinchGestureRecognizer

@synthesize xScale = _xScale;
@synthesize yScale = _yScale;

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesMoved:touches withEvent:event];

    if (self.state == UIGestureRecognizerStateChanged) {
        if ([self numberOfTouches] == 2) {
            CGPoint pntNew[2];
            pntNew[0] = [self locationOfTouch:0 inView:self.view];
            pntNew[1] = [self locationOfTouch:1 inView:self.view];

            CGFloat lenX = fabs(pntNew[1].x - pntNew[0].x);
            CGFloat lenY = fabs(pntNew[1].y - pntNew[0].y);

            CGFloat dX = fabs(lenX - _lenOrigX);
            CGFloat dY = fabs(lenY - _lenOrigY);
            CGFloat tot = dX + dY;

            CGFloat pX = dX / tot;
            CGFloat pY = dY / tot;

            CGFloat scale = [self scale];
            CGFloat dscale = scale - 1.0;
            _xScale = dscale * pX + 1;
            _yScale = dscale * pY + 1;
        }
    }
}

- (void)setState:(UIGestureRecognizerState)state {
    if (state == UIGestureRecognizerStateBegan) {
        if ([self numberOfTouches] == 2) {
            _pntOrig[0] = [self locationOfTouch:0 inView:self.view];
            _pntOrig[1] = [self locationOfTouch:1 inView:self.view];
        } else {
            _pntOrig[0] = [self locationInView:self.view];
            _pntOrig[1] = _pntOrig[0];
        }
        _lenOrigX = fabs(_pntOrig[1].x - _pntOrig[0].x);
        _lenOrigY = fabs(_pntOrig[1].y - _pntOrig[0].y);
        _xScale = 1.0;
        _yScale = 1.0;
    }

    [super setState:state];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:40:44.907

看看[这里](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)

您的行`CGAffineTransformScale(transform, scaleTemp,scaleTemp);`使用相同的`scaleTemp`变量来修改变换的 x 和 y 值。

# azure - 天蓝色表服务身份验证

> ID：13657055
> 
> 赞同：0
> 
> 时间：2012-12-01T06:30:16.380
> 
> 标签：azure, azure-storage

在使用 nodejs/azure 和表服务编写应用程序时，我们如何设置应该使用哪种类型的授权。共享密钥精简版（或）共享密钥。

我们如何设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:28:12.350

这取决于您如何访问表服务。如果您使用 SDK，您可以这样做：

**共享密钥**

```
var sharedKey = = new SharedKeyTable(storageAccount, storageAccessKey, usePathStyleUri);
var tableService = azure.createTableService(null, null, null, sharedKey); 
```

**共享密钥精简版**

```
var sharedKeyLite = = new SharedKeyLiteTable(storageAccount, storageAccessKey, usePathStyleUri);
var tableService = azure.createTableService(null, null, null, sharedKeyLite); 
```

[查看代码](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/table/tableservice.js)，您将看到如果您省略身份验证提供程序，将使用共享密钥。

如果使用`http.request`需要在授权头中指定类型：

```
Authorization="[SharedKey|SharedKeyLite] <AccountName>:<Signature>" 
```

所以你的代码将是这样的：

```
var http = require('http');

function doSomethingWithTables() {
    var settings = {
        host: ...,
        port: 80,
        path: ...,
        headers: {},
        method: 'GET'
    };
    settings.headers['Authorization'] = 'SharedKeyLite myaccount:xxiofojpfzaopfiaz';

    var req = http.request(settings);
    req.write(...);
    req.on('response', function(res){
        ...
    });
} 
```

# sql-server - 如何通过批处理文件执行 sql server 2008 命令？

> ID：13657057
> 
> 赞同：0
> 
> 时间：2012-12-01T06:30:19.220
> 
> 标签：sql-server, sql-server-2008, batch-file

我必须从批处理文件中执行 sql 命令。喜欢 ：-

“按 Id desc 从 SchemaVersion 顺序中选择前 1 个版本号”

并在批处理文件上显示其结果，就在此批处理文件打开时。

请问有人可以建议我正确的解决方案吗？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:40:20.960

在批处理文件中使用 sqlcmd.exe 命令。（MSDN 参考：http: [//msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)）

```
sqlcmd.exe -S mysqlserver -d mydb -U myuser -P mypass -Q "Select top 1 versionNumber from SchemaVersion order by Id desc" 
```

例如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:40:38.153

指定 -Q "set nocount on; Select top 1 versionNumber from SchemaVersion order by Id desc"

# google-app-engine - 如何在谷歌应用引擎的转发消息中获取原始地址？

> ID：13657064
> 
> 赞同：1
> 
> 时间：2012-12-01T06:31:41.833
> 
> 标签：google-app-engine

我想知道如何使用谷歌应用引擎 mail_message.original 对象获取转发邮件的原始发件人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:34:47.240

来自文档：如果您使用 Python，则必须分析消息：

original 是完整的消息，包括未由其他字段（例如电子邮件标题）公开的数据，作为 Python email.message.Message。 [http://docs.python.org/2/library/email.message.html](http://docs.python.org/2/library/email.message.html)

# iphone - 在 Apple 应用商店上传应用程序时收到警告

> ID：13657067
> 
> 赞同：10
> 
> 时间：2012-12-01T06:32:34.750
> 
> 标签：iphone, objective-c, ios, application-loader

我是这项技术的新手。

从已加载的应用程序上传应用程序时，我收到以下警告。

警告说“**应用程序引用了“应用程序名称”实例中的非公共选择器，viewController** “

请帮我解决这个警告。

提前致谢！

编辑

图片 ：-

![在此处输入图像描述](../Images/d8a6db0e029886f2fdd715d67b8625ba.png)

编辑 ：-

我的申请会获得批准吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:00:14.813

使用[应用扫描仪](https://github.com/ChimpStudios/App-Scanner)。它会分析您的 .app 文件以了解私有 API 方法的使用情况。

它将捕获与私有 API 方法命名相同的方法，即使它有自己的实现。此外，它会在方法中捕获 @selectors（就像官方的 iOS 自动检查器一样）。

当 performSelector: 使用作为私有方法的选择器调用时，App Scanner 无法捕捉到这种情况。但是，Apple 的工具确实可以解决这种情况。

另一个 Alternative [APP Kit](http://ericasadun.com/2009/12/apikit-goes-beta/)，虽然我没用过。试试看。

如果您还没有，请查看此问答。[Apple 怎么知道你在使用私有 API？](https://stackoverflow.com/questions/2842357/how-does-apple-know-you-are-using-private-api). 看起来很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T09:39:45.763

在整个项目中搜索 viewController 并搜索是否有任何单例实现。即使Apple批准您的申请，您的申请中也有非公共部门是不好的。您还可以使用[应用扫描仪](https://github.com/ChimpStudios/App-Scanner)

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T06:36:09.167

在出现此错误之前，您添加到代码中的最后一件事是什么？正如我上面的链接所指出的，该错误意味着您有一个私有 API 调用。

如果您认为这不是您的代码，那么它可能是任何包含的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T06:51:54.673

@iPhoneDev：我猜你的申请不会因为这个原因被拒绝。因为我在我的一个应用程序中遇到了这个警告，并且它被成功接受了。所以不用担心

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T22:19:03.573

我认为您可能`instance`在代码中的某处命名了一个函数，例如：

```
+(id)instance{
    return something;
} 
```

..也许是单例实现？如果是这种情况，只需重命名它。

尽管应用程序触发了类似的警报，但我已经看到获得批准的应用程序，但是您为什么要冒被拒绝的风险呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T21:59:42.310

几乎可以肯定会因此而被拒绝。

只是一个猜测，但搜索“viewController”并查看您是否引用了私有实例方法，或者可能通过点表示法引用私有实例变量：.viewController

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-09T09:21:38.417

不，您的应用会像这样被拒绝。确实。Apple 审查团队使用与 Xcode 相同的检查以及更多检查。

# python - 使用函数中返回的值作为另一个函数的参数

> ID：13657072
> 
> 赞同：1
> 
> 时间：2012-12-01T06:33:01.237
> 
> 标签：python

是否有可能做到这一点？

这是我想要做的一个简单的例子：

```
def getsize():
    size = input('size?')
    return size

def makebox(getsize()):
    blahblah 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:36:43.037

事实上，有两个不同的阶段：函数的定义及其调用。首先是定义：

```
def getsize():
    size = input('size?')
    return size

def makebox(size):
    # Some code goes here 
```

然后你`makebox()`这样打电话：

```
makebox(getsize()) 
```

# android - android通过mnt查找外部文件夹

> ID：13657074
> 
> 赞同：0
> 
> 时间：2012-12-01T06:33:34.403
> 
> 标签：android

让我解决这个问题；我是 java 的初学者，我研究了我需要的代码并尝试在我的应用程序中使用它时学习它。

我目前陷入困境，不确定如何继续，非常感谢任何帮助。我正在尝试在 /mnt/ 文件夹中查找文件名中带有“ext”或“sd”的任何文件夹。这是我到目前为止所拥有的，它给我一个空指针异常，但我不知道什么变量是空的。

```
public class MainActivity extends Activity
{
    static File[] dirs;
    @Override
    public void onCreate(Bundle savedInstanceState)
        {
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        findMnt("/mnt/");
        AlertDialog builder = new AlertDialog.Builder(this).setTitle("AppName").setMessage(dirs[0].getPath()).setNeutralButton("Close", null).show();
        AlertDialog builder2 = new AlertDialog.Builder(this).setTitle("AppName").setMessage(dirs[1].getPath()).setNeutralButton("Close", null).show();
}
    public static void findMnt(String path) {
        File file = new File(path);
        if(file.exists()){
            File[] list = file.listFiles();
            for(int i=0; i<list.length; i++) {
                if(list[i].isDirectory()) {
                    if(list[i].getPath().contains("sd") || list[i].getPath().contains("ext")){
                        for(int b=0; b<list.length; b++){
                            dirs[b] = new File(list[i].getPath());
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:49:19.340

记忆盒：如果您使用任何新设备或前。micromax funbook，然后它具有三个内存

*   /data/data/（手机内存）getFilesDirectory()
*   /mnt/sdcard/（手机的内部sdcard）Environment.getExternalStorageDirectory()
*   /mnt/extsd/（外部存储卡）/mnt/extsd

您首先需要确定您的外部卡是否属于`/mnt/sdcard/`或`/mnt/extSd`为此我创建了一个功能

```
/**
     * @return Number of bytes available on external storage extSD
     */
    public long getExternalAvailableSpaceInBytes() {
        long availableSpace = -1L;
        try {
            StatFs stat = new StatFs("mnt/extsd");
            System.out.println("ExternalAvailableSpace Path : "+mStringExernalSD);
            availableSpace = (long) stat.getAvailableBlocks() * (long) stat.getBlockSize();
        } catch (Exception e) {
            e.printStackTrace();
        }

        return availableSpace;
    } 
```

如果`getExternalAvailableSpaceInBytes()`退货`0`意味着您需要考虑`/mnt/sd`

获取所有文件夹

```
ArrayList<File> mFiles= new ArrayList<File>();
    if(getExternalAvailableSpaceInBytes()>0)
             findMnt(mFiles, "/mnt/extsd");
    else
             findMnt(mFiles, "/mnt/sdcard");

public ArrayList<File> findMnt(ArrayList<File> files, File dir)
{

    if (!dir.isDirectory())
    {
        files.add(dir);
        return files;
    }

    for (File file : dir.listFiles())
        findMnt(files, file);
    return files;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:23:04.677

这种方法很粗糙，但可以满足我的需要。搜索 sdcard 文件夹，然后搜索名称中带有 ext 的文件夹，如果失败，它会在 sdcard 文件夹中搜索 ext 文件夹。

```
String sd = findSd("/mnt/") + "/";
                String ext = findExt("/mnt/") + "/";

            if(ext == "ext not found"){
                ext = findExt(sd + "/");
            }

public static String findSd(String path){
    File file = new File(path);
    if(file.exists()){
        File[] list = file.listFiles();
        for(int i=0; i<list.length; i++) {
            if(list[i].isDirectory()) {
                if(list[i].getPath().contains("sd")){
                    return list[i].getPath();
                }
            }
        }
    }
    return "sd not found";
}

public static String findExt(String path){
    File file = new File(path);
    if(file.exists()){
        File[] list = file.listFiles();
        for(int i=0; i<list.length; i++) {
            if(list[i].isDirectory()) {
                if(list[i].getPath().contains("ext") && list[i].getPath() != findSd("/mnt/")){
                    return list[i].getPath();
                }
            }
        }
    }
    return "ext not found";
} 
```

# ios - 片段着色器未读取顶点着色器“colorVarying”的输出

> ID：13657076
> 
> 赞同：2
> 
> 时间：2012-12-01T06:33:56.073
> 
> 标签：ios, opengl-es, opengl-es-2.0, glsl, shader

如下图，错误很奇怪。我在 iPad 程序中使用 OpenGLES 2.0 和着色器，但代码或项目配置似乎有问题。模型完全没有颜色（黑色）绘制。

> 2012-12-01 14:21:56.707 医疗保险 [6414:14303] 程序链接日志：
> 警告：找不到与 BindAttributeLocation 请求匹配的顶点着色器属性“颜色”。
> 警告：片段着色器未读取顶点着色器“colorVarying”的输出
> [切换到进程 6414 线程 0x1ad0f]

我`glBindAttibLocation`用来传递位置和正常数据，如下所示：

```
// This needs to be done prior to linking.
glBindAttribLocation(_program, INDEX_POSITION, "position");
glBindAttribLocation(_program, INDEX_NORMAL, "normal");

glBindAttribLocation(_program, INDEX_COLOR, "color"); //pass color to shader 
```

我的项目中有两个着色器。那么对于这个奇怪的错误有什么好的解决方案吗？非常感谢！

我的顶点着色器：

```
uniform mat4 modelViewProjectionMatrix;
uniform mat3 normalMatrix;

attribute vec4 position;
attribute vec3 normal;
attribute vec4 color;

varying lowp vec4 DestinationColor;
void main()
{
    //vec4 a_Color = vec4(0.9, 0.4, 0.4, 1.0);
    vec4 a_Color = color;
    vec3 u_LightPos = vec3(1.0, 1.0, 2.0);

    float distance = 2.4;
    vec3 eyeNormal=normalize(normalMatrix * normal);

    float diffuse = max(dot(eyeNormal, u_LightPos), 0.0); // remove approx ambient light
    diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance)));
    DestinationColor = a_Color * diffuse; // average between ambient and diffuse   a_Color * (diffuse + 0.3)/2.0;

    gl_Position = modelViewProjectionMatrix * position;
} 
```

我的片段着色器是：

```
varying lowp vec4 DestinationColor;

void main()
{
  gl_FragColor = DestinationColor;
} 
```

很简单。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:37:30.140

我认为这里有一些问题。首先，您对属性的使用可能不正确。属性就像一个元素，每个顶点都会发生变化。你有颜色作为数据结构中的元素吗？因为如果不是，着色器将无法正常工作。

> 我使用 glBindAttibLocation 来传递位置和正常数据，如下所示：

不，你没有。glBindAttribLocation “将通用顶点属性索引与命名属性变量相关联”。它不传递数据。它将索引（闪烁）与变量相关联。您稍后使用：glVertexAttribPointer 传递内容。

我什至不使用绑定..我这样做 - 设置属性：

```
glAttributes[PROGNAME][A_vec3_vertexPosition] = glGetAttribLocation(glPrograms[PROGNAME],   "a_vertexPosition");
glEnableVertexAttribArray(glAttributes[PROGNAME][A_vec3_vertexPosition]); 
```

然后在调用 glDrawElemetns 之前将您的指针传递给它，以便它可以获取数据：

```
glVertexAttribPointer(glAttributes[PROGNAME][A_vec3_vertexPosition], 3, GL_FLOAT, GL_FALSE, stride, (void *) 0); 
```

在那里，我使用了一个名为 glAttributes 的二维整数数组来保存我的所有属性索引。但是你可以像现在一样使用闪烁。

错误消息告诉您出了什么问题。在您的顶点着色器中，您说：

```
attribute vec4 color; 
```

但是在下面你也有一个a_Color：

```
DestinationColor = a_Color * diffuse; 
```

与您的变量名称保持一致。我现在把 a_ v_ 和 u_ 放在我所有的前面，以试图弄清楚它是什么类型的变量。你所说的 a_ 确实有变化。

我还怀疑错误消息不是来自您发布的相同版本的着色器和代码，因为错误：

```
WARNING: Output of vertex shader 'colorVarying' not read by fragment shader 
```

即使在这个版本的顶点着色器中，关于 colorVarying 的错误也会令人困惑。重新发布当前版本的着色器以及您从中获得的错误消息，这样会更容易为您提供帮助。

# asp.net - 在带有下一页的asp .net中显示长描述（页面明智）

> ID：13657077
> 
> 赞同：0
> 
> 时间：2012-12-01T06:33:57.057
> 
> 标签：asp.net

我想显示使用 asp .net 从数据库中检索到的很长的描述数据。该描述应显示在 Page Wise 中，并且不会在单个页面中看到所有详细信息。当用户单击“下一页”时，该页面将显示下一个详细信息，依此类推，直到总文本/描述的末尾。有没有这样的控件可以显示这种类型？

请回答我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T07:52:41.513

如果您在 gridview 中显示数据，则选择设计页面的gridview **，****转到**解决**方案资源**管理器并将**AllowPaging**从 no 更改为 yes。

# phpfox - 如何在 phpFox 中访问我网站的管理员端？

> ID：13657080
> 
> 赞同：-1
> 
> 时间：2012-12-01T06:34:31.300
> 
> 标签：phpfox

我想在 phpFox 中访问我网站的管理面板。

在 Joomla 的情况下！我们可以轻松访问管理面板的网站

www.example.com/administrator 任何想法都一样

关于 phpFox 网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:37:02.100

```
You can access your admin area in phpfox by using

(1)http://www.example.com/admincp
(2)http://www.example.com/index.php?do=/admincp/ 
```

# javascript - 日期更改时，setInterval 在 Safari 浏览器中停止工作

> ID：13657092
> 
> 赞同：1
> 
> 时间：2012-12-01T06:37:50.977
> 
> 标签：javascript, safari, setinterval

例如，当日期从 31 更改为 1 时 setInterval javascript 函数在使用 safari 浏览器时停止工作，有关解决此问题的任何想法。

如何重现：使用 setInterval 创建空 html，而不是显示一些警报打开 safari 浏览器向后更改计算机日期（通过打开 Windows 日期/时间对话框），您会看到计时器停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:49:28.133

有针对 Chrome 和 Webkit 浏览器（包括 Safari）提交错误报告的详尽指南，如果您确实认为自己发现了错误[http://www.chromium.org/for-testers/bug-reporting-guidelines ，可以遵循这些指南#TOC-归档-Chromium-bugs-at-bugs.webkit.org](http://www.chromium.org/for-testers/bug-reporting-guidelines#TOC-Filing-Chromium-bugs-at-bugs.webkit.org)

简单搜索一下[webkit 的 bug 列表](https://bugs.webkit.org/buglist.cgi?query_format=specific&order=relevance+desc&bug_status=__open__&product=&content=setInterval)，没有发现之前记录的关于这个问题的明显 bug，所以我怀疑这是真的。

另外，您如何使用 JS 更改计算机日期？我认为您不了解该`Date`对象的工作原理？您可以实例化一个日期实例并设置其日期，但不能设置计算机日期。再次没有看到您的代码，它超级不清楚如何提供帮助，对不起！在我看到更多代码示例后可能会更新，并可以尝试验证这个“错误”。

# android - 如何在android logcat中打印中文字体？

> ID：13657100
> 
> 赞同：2
> 
> 时间：2012-12-01T06:39:30.153
> 
> 标签：android, android-emulator

当我将模拟器的输入语言更改为中文时，它会引发错误`Unfortunately(chinese..) has stopped..` 有人可以建议我如何使其适用于中文吗？![在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T07:21:17.027

我不知道我是对还是错，但我已经在设置环境变量的帮助下解决了这个问题

```
 JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF8
```

我刚刚回答了这个问题，因为遇到同样问题的人可以尝试这个解决方案。可能这对某人有帮助....

# java - 如何应用 html head 中定义的 css 样式来完成 iReport 中的报告？

> ID：13657101
> 
> 赞同：1
> 
> 时间：2012-12-01T06:39:49.300
> 
> 标签：java, jasper-reports

我想在生成报告时包含我自己的 CSS 样式。我正在使用 iReport 生成报告。我通过设置 .html_header 成功设置了`JRHtmlExporterParameter.HTML_HEADER`. 当我运行 ireport 时，标头值具有带有相应 href 的链接标记。

```
<html><head><title></title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><style type="text/css">a {text-decoration: none}</style></head><body text="#000000" link="#000000" alink="#000000" vlink="#000000"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="50%">&nbsp;</td><td align="center"><link rel="stylesheet" type="text/css" href="/apsrtc-oprs/_assets/skin/style.css" /> <center><a name="JR_PAGE_ANCHOR_0_1"></a> 
```

我的问题是如何将定义的 css 样式应用于完整的 iReport ？

欢迎任何建议。

# java - LWJGL 中的基本动态 3D 碰撞

> ID：13657102
> 
> 赞同：0
> 
> 时间：2012-12-01T06:40:03.207
> 
> 标签：java, collision, lwjgl

对不起我的最后一个问题，它有点到处都是。

我为朋友编写的游戏遇到了巨大的障碍，我需要学习动态碰撞。一个教程会很棒，一个非常基础的教程，我已经看过 NeHe 碰撞检测教程，但似乎并没有从中学到很多东西。

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:37:36.480

您可以做的是在您的实体周围创建一个不可见的 3d 框，并检查两个或多个所述框何时具有相交的 xyz 坐标。我无法为您提供代码，但我知道它有效。您必须自己弄清楚编码

# perl - 如何从 perl 哈希引用中设置标量列表？

> ID：13657103
> 
> 赞同：4
> 
> 时间：2012-12-01T06:40:05.157
> 
> 标签：perl, hashref

如何从 perl 哈希中设置标量列表？

```
use strict;
my $my_hash = { field1=>'val1', field2=>'val2', field3=>'val3', };
my ($field1,$field2,$field3) = %{$my_hash}{qw(field1 field2 field3)};

print "field1=$field1\nfield2=$field2\nfield3=$field3\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T06:49:52.750

您正在寻找一个[哈希片](http://perldoc.perl.org/perldata.html#Slices)，在您的情况下看起来像这样：

```
my ($field1,$field2,$field3) = @{$my_hash}{qw(field1 field2 field3)}; 
```

或像这样：

```
my ($field1,$field2,$field3) = @$my_hash{qw(field1 field2 field3)}; 
```

如果我们简化一些事情，以便您使用直接哈希而不是哈希引用，我们可以消除一些噪音，语法看起来会更清晰一些：

```
my %my_hash = ( field1=>'val1', field2=>'val2', field3=>'val3' );
my ($field1, $field2, $field3) = @my_hash{  qw(field1 field2 field3)  };
# we want an array/list ---------^       ^  ^
# but my_hash is a hash -----------------/  |
# and we want these keys (in this order) ---/
# so we use a qw()-array 
```

`$my_hash`然后我们可以通过以通常的方式将哈希替换为哈希引用来获取您的哈希引用版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:45:19.970

以下工作正常：

```
#!/usr/bin/perl
use warnings;
use strict;
my $my_hash = { field1=>'val1', field2=>'val2', field3=>'val3', };
my ($field1,$field2,$field3) = (values %{$my_hash});
print "field1=$field1\nfield2=$field2\nfield3=$field3\n"; 
```

但是，请参阅以下内容以了解为什么它不能正常工作：

[Perl 是否保证返回一致排序的哈希键？](https://stackoverflow.com/questions/1256502/is-perl-guaranteed-to-return-consistently-ordered-hash-keys)

这种出错的一个例子如下：

```
my $my_hash = { field1=>'val1', blah=>'val1.1', field2=>'val2', field3=>'val3', };
my ($field1,$field2, $blah,$field3) = (sort values %{$my_hash});
print "field1=$field1\nfield2=$field2\nblah=$blah\nfield3=$field3\n"; 
```

输出是：

```
field1=val1
field2=val1.1
blah=val2
field3=val3 
```

注意这里 $field1 的值是错误的。由于“mu 太短”已经指出，Hash Slice 是确保排序符合您期望的方式，并且不要忘记在所有代码上使用警告。

# javascript - 粘性框 jQuery

> ID：13657105
> 
> 赞同：0
> 
> 时间：2012-12-01T06:40:16.767
> 
> 标签：javascript, jquery, sticky

我有这个代码：http: [//jsfiddle.net/k56yR/1/](http://jsfiddle.net/k56yR/1/)

但是当浏览器滚动条向下并开始顶部#sticky颤抖时，有人知道如何解决这个问题吗？

这是 jQuery 代码：

```
$(function(){ // document ready
   if (!!$('#sticky').length) { // make sure "#sticky" element exists
      var el = $('#sticky');
      var stickyTop = $('#sticky').offset().top; // returns number
      var footerTop = $('#footer').offset().top; // returns number
      var stickyHeight = $('#sticky').height();
      var limit = footerTop - stickyHeight - 20;
      $(window).scroll(function(){ // scroll event
          var windowTop = $(window).scrollTop(); // returns number

          if (stickyTop < windowTop){
             el.css({ position: 'fixed', top: 0 });
          }
          else {
             el.css('position','static');
          }

          if (limit < windowTop) {
          var diff = limit - windowTop;
          el.css({top: diff});
          }     
        });
   }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-06T16:31:21.960

```
<div class="wrapper">
<div class="results">

</div>
  <header>
    Header
    <span></span>
  </header>
  <div class="left">
    <span class="top"></span>
    <div class="nosticky">Nosticky</div>
    <div class="sticky">
    <span class="top"></span>
      <div class="bloc bloc1">
        Bloc 1<br>
        <span></span>
      </div>
      <div class="bloc bloc2">
        Bloc 2
      </div>
      <span class="bottom"></span>
    </div>
    <span class="bottom"></span>
  </div>
  <div class="right">
    Content
    <span></span>
  </div>
  <div class="footer">
    Footer
  </div>
</div>

<script>
var sticky_offsettop = $('.sticky').offset().top;
var sticky_height = $('.sticky').height();
var sidebar_height = $('.left').height();
var empty_space_left = sidebar_height - sticky_height;
var sidebar_offsettop = $('.left').offset().top;
var sidebar_bottom_offsettop = (sidebar_offsettop+sidebar_height);
var margintotop = 20;
$(window).scroll(function() {
    var window_scrolltop = $(window).scrollTop();
  var window_scrolltop_margin = (window_scrolltop+margintotop);
  var realtime_sidebar_bottom_offsettop = (sidebar_bottom_offsettop - window_scrolltop);
  var sticky_height_realtime = $('.sticky').height();

    if(window_scrolltop_margin >= sticky_offsettop ){
        $('.bloc').css('background', '#ddd');
     $('.sticky').css('position', 'sticky').css('top', '20px').css('bottom', 'initial');
    }
    if(sticky_offsettop > window_scrolltop_margin ){
        $('.bloc').css('background', '#ddd');
        $('.sticky').css('position', 'relative').css('top', 'initial').css('bottom', 'initial');
    }    
    if(sticky_height_realtime >=  realtime_sidebar_bottom_offsettop ){
        $('.bloc').css('background', '#ddd');
        $('.sticky').css('position', 'absolute').css('top', 'initial').css('position', 'absolute').css('bottom', '0');
    } 
});
<script> 
```

这是我为实现它所做的一个示例：[https ://jsfiddle.net/cuopyL51/](https://jsfiddle.net/cuopyL51/)

# c# - 出现错误：-System.net.mail.SmtpException

> ID：13657111
> 
> 赞同：0
> 
> 时间：2012-12-01T06:41:07.580
> 
> 标签：c#, xamarin.android

运行以下代码时，我得到

> 未处理的异常：System.Net.Mail.SmtpException

此代码用于发送邮件。它适用于 Windows 应用程序，但我在 Mono for Android 上遇到运行时错误。Smeone 告诉我 System.net.mail 是 System.dll 程序集的一部分，但我不知道如何在我的 MonoDroid 应用程序中使用它。

附加命名空间是：“使用 System.Net.Mail；”

```
 string username = "abc@xyz.com";
 string password = "1234567890";
 System.Net.NetworkCredential nc = new
 System.Net.NetworkCredential(username, password);
 MailMessage MailMessage = new MailMessage();
 MailMessage.To.Add("pqr@xyz.com");
 MailMessage.Subject = "here is the subject";
 MailMessage.From = new System.Net.Mail.MailAddress("abc@xyz.com");
 MailMessage.Body = "Application run time was ";
 System.Net.Mail.SmtpClient SmtpClient = new System.Net.Mail.SmtpClient("
 smtp.gmail.com");
 SmtpClient.UseDefaultCredentials = false;

 SmtpClient.EnableSsl = true;
 SmtpClient.Credentials = nc;
 SmtpClient.Port = 587;
 SmtpClient.Send(MailMessage); 
```

这在 Windows 上运行良好。我正在为 Android 4.2.7、Visual Studio 2010 运行 Mono。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:37:53.497

尝试以下一项**作为测试，然后将其更改为您的情况如果它正在工作**。祝您好运。

```
using System;
using System.Net.Mail;
using System.Collections.Generic;
using System.Text;
using Gtk;
using GtkSharp;
using GLib;
using System.Net;
using System.Security.Cryptography.X509Certificates;
using System.Net.Security;

namespace KentSoft
    {
    class  printTest : Window
    {
    public  printTest() : base("Kent_Calisma")
    {
    try{
    MailMessage mail = new MailMessage();
    SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
    mail.From = new MailAddress("yourmailadress@gmail.com");
    mail.To.Add("destinationmailadress@gmail.com");
    mail.Subject = "TEST";
    mail.Body = "This is for testing SMTP mail from GMAIL";
    SmtpServer.Port = 587;

    SmtpServer.Credentials = new System.Net.NetworkCredential("gmailusername without @gmail.com", "gmailpassword");

    SmtpServer.EnableSsl = true;
    ServicePointManager.ServerCertificateValidationCallback = delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; };

    SmtpServer.Send(mail);

}

catch(Exception e){
    Console.WriteLine("Ouch!"+e.ToString());
  }
}

public static void Main()
    {
   Application.Init();
   new printTest();
   Application.Run();
          }
        }
      } 
```

您可以从**[原始帖子获取更多详细信息](http://huseyincakir.wordpress.com/2010/03/11/mono-c-sending-mail-through-gmail/)**

# c# - 使用 c# 在 Twitter 上发布状态

> ID：13657113
> 
> 赞同：2
> 
> 时间：2012-12-01T06:41:42.863
> 
> 标签：c#, twitter, linq-to-twitter

我正在使用`Linq 2 twitter`图书馆..

我想发布一个状态，我在 twitter api 中创建了一个“Sampleapp”。通过使用这个库，我可以在消费者密钥和消费者秘密的帮助下将消息发布到“我的 Twitter 帐户”。

现在我的问题是其他人如何在我的示例应用程序的帮助下发布消息而不使用消费者密钥和消费者秘密。（只需使用他们的用户名和密码）

这可能吗？有什么建议么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:22:20.457

Twitter API 不再支持用户名和密码。几年前，他们只迁移到 OAuth，但只有一些 API 所需的身份验证 - 那是 v1.0。最近，Twitter API 引入了 LINQ to Twitter 支持的 v1.1。Twitter API v1.1 要求对所有查询和命令进行 OAuth。因此，LINQ to Twitter 支持作为 Twitter API 的身份验证类型。

也就是说，这里有一些提示可能会使您的用户体验更好。您将包含应用程序的 ConsumerKey 和 ConsumerSecret，它们不会更改，但不需要用户获取单独的 ConsumerSecret/ConsumerKey 对。事实上，这就是 OAuth 的工作方式。

另一个提示是 Twitter 身份验证令牌不会对用户过期。这意味着您可以在注册期间要求用户进行一次身份验证，然后在他们通过身份验证后保存他们的凭据。凭据可通过您用于执行 OAuth 过程的授权方获得。之后，只需重新使用保存的凭据，将所有四个凭据加载到授权者和 LINQ to Twitter 将只执行（签名）查询，而无需让用户再次进行身份验证。

顺便说一句，我在 SO 上观看了 linq-to-twitter 标签，并有一个 CodePlex.com 讨论论坛。我也在推特上，但有时像这样的答案通过推文具有挑战性——尽管众所周知我会在推特上发布一两个答案。:)

[@乔梅奥](https://twitter.com/JoeMayo)

# jpa - JPQL 中实体之间相等的语义

> ID：13657115
> 
> 赞同：0
> 
> 时间：2012-12-01T06:41:51.320
> 
> 标签：jpa, jpa-2.0

JPA 规范说：

> 只允许比较相似类型的值。如果一个类型对应于相同的 Java 语言类型，或者如果一个类型是原始 Java 语言类型而另一个是包装的 Java 类类型等价物（例如，int 和 Integer 在这个意义上是类似的类型），则它们类似于另一种类型。此规则有一个例外：比较适用数值提升规则的数值是有效的。除了这种数字情况外，不允许尝试比较非相似类型值的条件表达式。
> 
> 请注意，允许将算术运算符和比较运算符应用于与原始数字 Java 类型等效的包装 Java 类的状态字段和输入参数。
> 
> 当且仅当它们具有相同的主键值时，相同抽象模式类型的两个实体才相等。
> 
> 只需要支持枚举上的相等/不等比较。
> 
> 不支持对可嵌入类或映射条目类型的实例进行比较。

这是否意味着查询

```
where entity1 = entity2 
```

和

```
where entity1.id = entity2.id 
```

应该始终给出相同的结果（并具有相同的性能）还是存在一些边缘情况（例如，如果实体之一为空）？所有实现中的行为都相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:21:37.943

这些可能会有所不同，具体取决于您的实体来自何处以及您的 JPA 实现。

entity1 = entity2，可能允许 JPA 实现在某些情况下优化连接。

# php - 通过jquery将ID传递给url字符串，然后通过PHP选择它而不刷新页面？

> ID：13657116
> 
> 赞同：0
> 
> 时间：2012-12-01T06:41:51.133
> 
> 标签：php, jquery, url

我想通过 jQuery 将 ID 传递给 urlstring 而不刷新 jQuery 和`#`标签，以便我可以通过 php`$_get['ID']`函数获取 ID。

但问题是

1.  如果我使用`#`，页面没有得到刷新，但是 PHP 确实从 url 中选择了 ID。
2.  如果我不使用#，那么 php 会选择 ID，但页面会刷新。

我想在不刷新页面的情况下将 id 传递给 php。

```
//javascript
function com(id) {
    location.href = '#?ID=id'; //by this way way,page doesn't refresh, ID appears in the url string but ID is not picked by  PHP as # is there
    // location.href = '?ID=id';   this way way, ID appears in the url string , ID is also  picked by  PHP as # is there.But page get refreshed.
    $.ajax({
        type: "Post",
        url: "getdata.php",
        async: true,
        cache: false,
        success: function(data) {},
    });
}​ 
```

```
//php for getdata.php
<?php  echo $_GET['ID'];    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:46:47.380

您需要了解服务器端与客户端操作。Javascript是客户端。除非您发回一些信息，否则服务器（在您的情况下运行 PHP）对 javascript 正在做什么一无所知。这可以通过页面刷新或通过 ajax（简单地说）来完成。

您想要的是 ajax，它是一个返回到服务器的异步请求。然后服务器可以处理它并选择将信息传递回页面。查看 jQuery 的[ajax](http://api.jquery.com/jQuery.ajax/)。

根据您更新的评论进行更新：

```
function com(id) {
    //forget about appending the id. This isn't doing anything.
    //You can use it for informational purposes or so that if someone cuts and pastes
    //the link you can handle it server side appropriately.
    location.href = '#?ID=id';

    //instead focus on this call. append your query string to the url    
    $.ajax({
        type: "POST",
        url: "getdata.php?ID=12345",
        async: true,
        cache: false,
        success: function(data) {
            alert(data); //should alert the id processed by php
        },
    });
}​ 
```

# iphone - 地图在iphone中旋转不顺畅

> ID：13657126
> 
> 赞同：2
> 
> 时间：2012-12-01T06:44:13.267
> 
> 标签：iphone, objective-c, ipad

嗨，我正在使用 iPhone 中的地图。我正在旋转带有方向的地图视图。地图正在旋转，但移动不顺畅。

我正在使用下面的代码来旋转地图。谁能告诉我有关顺利旋转地图视图的任何建议？

```
float oldRad =  -manager.heading.trueHeading * M_PI / 180.0f;
float newRad =  -newHeading.trueHeading * M_PI / 180.0f;
CABasicAnimation *theAnimation;
theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.rotation"];
theAnimation.fromValue = [NSNumber numberWithFloat:oldRad];
theAnimation.toValue=[NSNumber numberWithFloat:newRad];
theAnimation.duration = 0.5f;
[mapView setTransform:CGAffineTransformMakeRotation(newRad)];
CGPoint anchorPoint = CGPointMake(0, 0);
[[mapView annotations] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) 
 {
     MKAnnotationView * view = [mapView viewForAnnotation:obj];

     [view setTransform:CGAffineTransformMakeRotation(newRad)];
     [view setCenterOffset:CGPointApplyAffineTransform(anchorPoint, CGAffineTransformMakeRotation(newRad))];

 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:18:03.013

在 iOS 5.0 及更高版本中，您可以使用

```
[mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading animated:YES]; 
```

查看[MKMapView 的文档](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)，特别是**跟踪用户位置**部分以获取更多信息。

但是，如果您仍想支持旧版本的 iOS，您将不得不经历解决这些故障和错误的所有痛苦。我自己做过（在 iOS 5 出来之前），相信我，你最好放弃对 iOS 4 的支持。

# android - Gps 追踪问题

> ID：13657131
> 
> 赞同：0
> 
> 时间：2012-12-01T06:44:55.090
> 
> 标签：android, gps

在我的应用程序中进行 GPS tracking.how 绘制从一个源到目的地的行车方向。不使用谷歌导航网址可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:54:10.347

好吧，这是可能的，但是：

1.  无论如何，您需要一个“路由引擎”。一个可能的例子是开源路由机：[http](http://project-osrm.org/) ://project-osrm.org/ 。

2.  您不能将 Google 地图与其他提供商的路线服务一起使用（出于技术和法律原因）。在这种情况下，您应该使用 OpenStreetMap 项目提供的整个软件堆栈：[http ://wiki.openstreetmap.org/wiki/Main_Page](http://wiki.openstreetmap.org/wiki/Main_Page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:39:03.603

为什么不使用 Google 的解决方案？我正在运行[Google Tracks API](http://blog.jammer-store.com/2012/11/google-is-proud-to-present-two-new-ways-of-geolocation-and-tracking/)一段时间，它没有给我带来任何问题。

# android - 如何在列表视图项中设置焦点？

> ID：13657136
> 
> 赞同：0
> 
> 时间：2012-12-01T06:45:39.763
> 
> 标签：android, listview, focus

![在此处输入图像描述](../Images/87e599ecfcb1427b909aeb0ac636b9a3.png)我必须将重点放在列表视图项目上。ListView 由 TextView 组成。我想将焦点设置在 listview 项目上的点，此时我有了该项目的位置。

我试过 setSelectio(pos)，其中 pos 是列表视图项的位置，但这会导致将项的位置设置在屏幕顶部的位置。

请建议我如何进行。

```
 builder.setPositiveButton(R.string.save,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        Log.d("@gaurav", "changeText is not null");

                        if (null != changeText) {
                            Log.d("@gaurav", "changeText is not null");
                            if (!(changeText.getText().toString().equalsIgnoreCase(""))) {
                                myList
                                        .set(pos, changeText.getText()
                                                .toString());
                                adapter.notifyDataSetChanged();
                                setListAdapter(adapter);
                            }
                        } else {
                            Log.d("@gaurav", "changeText is null");
                        }
                        getListView().setFocusableInTouchMode(true);
                        getListView().setSelection(pos);
                        getListView().requestFocus();
                    }

                }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T10:48:56.093

我认为您想根据您的要求突出显示特定的列表项。因此，如果该项目在屏幕上不可见，您将无法设置焦点。我对吗 ？如果这是您的问题，您可以使用以下方法`public void smoothScrollToPosition (int position) Added in API level 8` 滚动到该特定位置，然后使用 setSelection() 方法

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-06T10:46:01.870

如果你想在 的特定索引上设置焦点/颜色`ListView`，你应该试试这个，效果很好。

```
list.post(new Runnable() {
    @Override
    public void run() {
        list.setSelected(true);
        list.getChildAt(0).setBackgroundColor(Color.BLACK);
        list.getChildAt(1).setBackgroundColor(Color.BLUE);
        firstListItemPosition = firstListItemPosition +1;
        Log.v("firstListItemPosition", "firstListItemPosition ");
    }                   
});

firstListItemPosition = list.getFirstVisiblePosition(); 
```

# couchdb - 如何以 JSON 格式获取与特定关键字匹配的所有 npm 包？

> ID：13657140
> 
> 赞同：14
> 
> 时间：2012-12-01T06:46:43.820
> 
> 标签：couchdb, npm

对沙发和 redis 没有任何经验，目前这已经超出了我的能力范围。

npm 网站允许您通过关键字搜索包 - [https://npmjs.org/browse/keyword/awesome](https://npmjs.org/browse/keyword/awesome)

但是，它没有提供任何以 json 格式获取此信息的方法 - 理想情况下，我们可以只做[https://npmjs.org/browse/keyword/awesome.json](https://npmjs.org/browse/keyword/awesome.json)但事实并非如此 :(

我知道 npm 网站由 couchdb 和本地 redis 实例提供支持。远程 couchdb 安装是[http://registry.npmjs.org/](http://registry.npmjs.org/)并由[https://github.com/isaacs/npmjs.org提供支持](https://github.com/isaacs/npmjs.org)

然而，花了一天的时间研究这个，我只是无法弄清楚如何获取特定关键字的所有包。有谁知道怎么做？如果您还解释了您寻找如何去做的过程，那么我会知道下一次：）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-01T07:51:49.127

**好问题！**

这将为您提供有关特定模块的信息：

`npm view request`

要获得所有模块所需的内容，您可以点击 URL： [https ://registry.npmjs.org/-/all/](https://registry.npmjs.org/-/all/)

倒完这两个文件后：

1.  [https://github.com/isaacs/npm/blob/master/lib/search.js](https://github.com/isaacs/npm/blob/master/lib/search.js)
2.  [https://github.com/isaacs/npm-www/blob/master/models/browse.js](https://github.com/isaacs/npm-www/blob/master/models/browse.js)

我得出以下结论：

1.  我非常惊讶没有更好的方法来进行搜索而不直接点击 couchdb。
2.  命令行 NPM 客户端通过对上面列出的 /all/ 搜索的完整结果进行排序和过滤，在 node.js 内部进行搜索。
3.  该网站甚至不打扰真正的搜索，因为它将它典当给搜索引擎
4.  您想要的按关键字搜索不会得到与命令行 NPM 相同的结果。它实际上仅限于关键字属性的范围，其他搜索选项可以通过（参见上面的 search.js）
5.  查询看起来很奇怪。

试试这个： `https://registry.npmjs.org/-/_view/byKeyword?startkey=["keyword"]&endkey=["keyword",{}]&group_level=3`

另外，快速说明一下，这种问题可能会在大约 4 秒内在 node.js 聊天室或邮件列表中得到回答 :)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-22T02:50:26.243

基于这个答案，我为节点编写了一个小库，[https://github.com/wires/npm-keywordsearch](https://github.com/wires/npm-keywordsearch)。

`npm install npm-keywordsearch`

然后

```
var search = require('npm-keywordsearch')

search('my-plugin', function (error, packages) {
  packages.forEach(function (pkg) {
    console.log(pkg.name + ': ' + pkg.description)
  })
}) 
```

也许对你有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-27T04:19:43.747

2018 年的某个时候，[npm 停用](https://npm.community/t/how-do-i-fetch-all-npm-packages-that-contain-a-given-keyword/400?u=balupton)了`/-/_view/byKeyword`API：

> [https://registry.npmjs.org/-/_view/byKeyword?startkey=%5B%22docpad-plugin%22%5D&endkey=%5B%22docpad-plugin%22,%7B%7D%5D&group_level=2](https://registry.npmjs.org/-/_view/byKeyword?startkey=%5B%22docpad-plugin%22%5D&endkey=%5B%22docpad-plugin%22,%7B%7D%5D&group_level=2)

新的 API 现在是`/-/v1/search`：：

> [https://registry.npmjs.org/-/v1/search?text=keywords:docpad-plugin&size=250](https://registry.npmjs.org/-/v1/search?text=keywords:docpad-plugin&size=250)

它的文档在这里：

> [https://github.com/npm/registry/blob/master/docs/REGISTRY-API.md#get-v1search](https://github.com/npm/registry/blob/master/docs/REGISTRY-API.md#get-v1search)

我已经相应地更新了[pluginclerk](https://github.com/bevry/pluginclerk)包。它是一个节点包，它提供了一个 API 来命中该调用，同时提供缓存以及依赖兼容性解决方案。

# php - 如何将三个外部参照表合并为一个？

> ID：13657143
> 
> 赞同：0
> 
> 时间：2012-12-01T06:47:00.153
> 
> 标签：php, mysql

我有三个 XREF 表。

1.  `order_delivery_xref`: order_id (int), delivery_id (int)
2.  `delivery_invoice_xref`: delivery_id (int), invoice_id (int)
3.  `invoice_order_xref`: invoice_id (int), order_id (int)

我现在需要将它们组合成一个公用表，如下所示：

`order_delivery_invoice_xref`: order_id (int), delivery_id (int), invoice_id (int)

有没有办法使用查询来做到这一点？还是程序？还是使用 php 脚本 + mysql 查询？

笔记：

1.  `delivery_id`总是与`order_id`
2.  An`invoice_id`并不总是存在，并且需要`null`在行中，如果缺少

* * *

这是我尝试过的：

```
SELECT order_id, delivery_id
FROM order_delivery_xref
WHERE 1 
```

...等等所有三个表。

然后我为第一个数组运行一个`foreach()`循环，检查其他数组的使用函数（替换where ），并在 html 中创建一个 table>tr>td。`php``isset()``NULL``!isset()`

我不太确定这是否是正确的方法。有人可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:52:28.787

It depends on what you want to do. To do it once, this will work:

> create table odx (order_id int, delivery_id int); create table dix (delivery_id int, invoice_id int); create table iox (invoice_id int, order_id int);
> 
> insert into odx values (1, 11), (2, 22), (3,33); insert into dix values (22, 333), (22, 444), (33, 555); insert into iox values (333, 1), (444, 2), (555, 2);
> 
> create table odix (order_id int, delivery_id int, invoice_id int);
> 
> insert into odix (order_id, delivery_id, invoice_id) select odx.order_id, odx.delivery_id, dix.invoice_id from odx left join dix on dix.delivery_id = odx.delivery_id left join iox on iox.order_id = odx.order_id;

But you have to make your own decisions about how to join the tables - because of the contents of the three tables, you can join them many ways with different results.

Also, you have to figure out what to do when any of the subsidiary tables changes - do you recreate the odix table from scratch or just add new or changed records.

You'll find that doing as much of this as possible in MySQL will be faster than in PHP - MySQL is very good at joining tables together and aggregating data in this way.

Finally, you probably want to think about why you are doing this - why put the data in another table. With MySQL, you can always assemble the data together to view them this way, so copying the data doesn't seem to make sense. It creates redundancy in your database, which can get confusing and difficult to manage.

Check out a few references on "normalization" to get some ideas.

# java - 如何将值从一个类返回到另一个类？爪哇

> ID：13657147
> 
> 赞同：0
> 
> 时间：2012-12-01T06:48:43.107
> 
> 标签：java, swing, user-interface, button

我有点问题。这是情况。我的主类中有一个金额字段，当单击某些按钮时该字段会增加。提供了一种方法，您可以通过该方法删除任何订单（我基本上是为餐厅终端编程）并且数量会减少。删除方法放在另一个类中。

```
public void posdel(int pos, JTextField amountFieldGot, int amountGot)
{
    if(slist==null)
    {
        JOptionPane.showMessageDialog(null, "No order has been placed yet.",null,JOptionPane.WARNING_MESSAGE);
    }
    else
    {
        if(pos==1)
        {
            reductionAmount = (slist.quantity*slist.price);
            amountGot = amountGot - reductionAmount;
            slist=slist.next;
        }
        else
        {
            int i=1;
            Node temp=slist;
            Node prev=null;
            while(temp.next!=null && i<pos)
            {
                prev=temp;
                temp=temp.next;
                i++;
            }
            if(pos==i)
            {
                prev.next=temp.next;
            }
            else
            {
                JOptionPane.showMessageDialog(null, "Invalid order", null, JOptionPane.ERROR_MESSAGE);
            }
        }
    }
    amountFieldGot.setText(Integer.toString(amountGot));
} 
```

所以基本上，我的 GUI 中有一个 amountField，我将其作为参数传递给 posdel 方法。我还将金额值作为参数传递。我得到的新金额是删除第一个订单后的amountGot。（其他仓位的代码我还没写。）假设我传入方法的金额值为30（14+16）14 = order 1, 16 = order2。我的第一个订单的值为 14。所以 amountGot = 30 - 14 即 16。GUI 中的 amountField 更新为 16。现在我的订单 2 成为我的订单 1。如果我尝试删除它，我的 amountField更新到 14。（30-16 = 14）。所以我猜测金额值本身与 30 相同，并且不会更新为新的 amountGot 值。有人可以帮我解决这个问题吗？

下面是我的删除按钮的代码。

```
deleteButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                dishDelPos = JOptionPane.showInputDialog("Enter the position of the order to be deleted");
                try
                {
                    dishDeletePosition = Integer.parseInt(dishDelPos);
                    order1.posdel(dishDeletePosition, amountField, amount);
                    repaint();
                }
                catch(NumberFormatException ex1)
                {
                    JOptionPane.showMessageDialog(null,"This is not a valid position");
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:54:35.540

一些东西。

您可以将类中的删除方法设为静态。你会参考它

```
 value = MyClass.deleteMethod(); 
```

您可以创建一个新类来执行该方法

```
MyClass myClass = new MyClass();
value = myClass.deleteMethod(); 
```

您可以使用各种指针来执行此操作，方法是将对包含删除方法的类的现有实例的引用传递到您要调用它的位置。

```
 myFunction(MyClass myClass)
 {
    value = myClass.deleteMethod();
 } 
```

基本上设置你的函数来返回一个值

```
public static int deleteMethod()
{
} 
```

此函数返回一个 int。

或者如果您需要返回更多信息，则使用全局信息变量设置类

```
class MyClass
{
   public int value1;
   public int value2;
   public String value3;

   public void deleteMethod()
   {
       //does something with global variables
   }
} 
```

现在像这样调用删除后获取信息

```
Myclass myClass = new MyClass();
myClass.deleteMethod();
value1 = myClass.value1
value2 = myClass.Value2
value3 = myClass.Value3 
```

# wordpress - 此网页有一个重定向循环 - Wordpress + 自定义重写

> ID：13657150
> 
> 赞同：0
> 
> 时间：2012-12-01T06:49:01.317
> 
> 标签：wordpress, .htaccess

我正在尝试运行一个站点，该站点通过 index.php 文件路由所有 URI 请求以进行处理，但我也在尝试在 webroot 上运行 Wordpress。一切正常，除了对[https://mysite.com/wp-admin/](https://mysite.com/wp-admin/)的请求，这给了我一个“这个网页有一个重定向循环”错误。去[https://mysite.com/wp-admin/edit.php](https://mysite.com/wp-admin/edit.php)工作正常。

我的 .htaccess 文件如下所示：

```
RewriteEngine On

# eliminate www
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# force SSL
RewriteCond %{HTTPS} !=on
RewriteRule .* https://%{SERVER_NAME}/%1 [R,L]

RewriteBase /

# rewrite directory patterns
RewriteRule ^([a-zA-Z0-9-\/]+)/([a-zA-Z0-9-%/\/]+)/([0-9]+)$    /index.php?page=$1&action=$2&id=$3  [NC,QSA,L] 
RewriteRule ^([a-zA-Z0-9-\/]+)/([a-zA-Z0-9-%/\/]+)$ /index.php?page=$1&action=$2    [NC,QSA,L] 
RewriteRule ^([a-zA-Z0-9-\/]+)$ /index.php?page=$1  [NC,QSA,L] 

# Wordpress
<IfModule mod_rewrite.c>
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

任何想法是什么导致重定向循环？我试过把

```
RewriteCond %{REQUEST_URI} !wp-admin 
```

在强制 SSL 和消除 www 规则的前面，但它似乎并没有什么不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:28:29.307

```
RewriteRule ^wp-admin - [L] 
```

将此规则添加到顶部，高于所有其他规则。

# php - 获取有关视频聊天邀请的通知

> ID：13657154
> 
> 赞同：2
> 
> 时间：2012-12-01T06:49:24.983
> 
> 标签：php, yii, videochat

我开发了一个应用程序，并且我有 API 来创建视频通话。目前我的问题是如果有人邀请其他人聊天，我如何为被邀请者生成通知？我正在使用 PHP 和 MySQL 来开发应用程序。目前我在想我应该这样工作：在邀请时，会发生数据库插入，我应该以小间隔（可能是几秒钟）检查这个插入。如果此人被邀请，那么他将收到通知。这是通常的做法吗？请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:37:59.180

我终于做到了。不知道这是否是最佳做法。我创建了一个函数来检查任何数据库更改。我曾经`setinterval`以 5 秒的间隔重复该功能。它确实有效:)

# facebook-graph-api - facebook 用户可以选择退出图形 api 吗？

> ID：13657156
> 
> 赞同：0
> 
> 时间：2012-12-01T06:49:32.260
> 
> 标签：facebook-graph-api, spring-social

我正在使用 spring social 来获取我所有朋友的列表。但是，我可以从 facebook graph api 获得的朋友数量似乎与 facebook 在我的个人资料中报告的朋友数量不同。

根据 facebook，我有 175 个朋友。使用 spring social facebook 我似乎只能获得 156 个朋友。我知道 spring social facebook 的分页问题，​​所以我使用下面的代码。

```
private Map<String, FacebookProfile> getFacebookProfiles()
{
    Connection<Facebook> connection = connectionRepository.findPrimaryConnection(Facebook.class);
    FriendOperations friendOperations = connection.getApi().friendOperations();

    // FindFriendProfes() only returns 100 friends, need to use batching to get all friends 
    List<FacebookProfile> friendProfiles = new ArrayList<>(250);
    final int batchSize = 100;
    int offset = 0;
    List<FacebookProfile> batch = friendOperations.getFriendProfiles(offset, batchSize);
    do
    {
        friendProfiles.addAll(batch);
        offset = offset + batchSize;
        batch = friendOperations.getFriendProfiles(offset, batchSize);
    } while (batch.size() != 0);

    Map<String, FacebookProfile> result = new HashMap<>(friendProfiles.size());
    for (FacebookProfile facebookProfile : friendProfiles)
    {
        result.put(facebookProfile.getId(), facebookProfile);
    }

    return result;
} 
```

要么在 spring-social facebook 集成中存在错误，要么 facebook 用户有办法说他们不应该作为图形 api 调用的一部分返回。

facebook 用户可以选择从 graph api 作为朋友返回吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:07:22.883

是的，准确地说，Facebook 用户可以通过转到他们的隐私设置 > 广告、应用程序和网站 > 编辑设置 > 人们如何将您的信息带到他们使用的应用程序来选择退出第三方应用程序

那些编辑这些设置的朋友不会出现在您的图形 API 调用中。

# php - 实现 Google+ 圈子等功能

> ID：13657159
> 
> 赞同：1
> 
> 时间：2012-12-01T06:50:10.510
> 
> 标签：php, mysql, database

我很好奇 Google+ 圈子之类的数据库结构（mysql）可能是什么，以及它们如何跟踪用户定义的圈子。我想为一个应用程序实现类似的东西，用户可以选择与某些其他用户共享内容。

本质上，用户可以将朋友放入他定义的组中，以过滤朋友可以看到的内容。到目前为止，我有一个朋友系统的相当简单的实现——它是一个标准的规范化数据库，包括一个用户表和一个朋友表。

任何人都可以阐明如何为“组”或圈子设置数据库结构吗？我考虑在 Friends 表中添加一个额外的字段，这将是组表的外键。但是，我可以看到这很快就会变得笨拙，特别是如果用户可以定义组并将朋友放置在任意数量的组中。

是否有一个快速的实现，或者不需要谷歌服务器的计算能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:49:25.297

我能想到的最佳方法如下：

用户表
朋友表（2 个用户 ID，可能一个字段用于“已接受”或“尚未”） - 我推荐两种方式的友谊
组表（组 ID、所有者（或不）、描述）
group_participants 表（组 ID、用户 ID 和一个字段）表示“已接受”或“尚未”）

当你想分配一些东西时，你可以有各种选项，包括“组”，或者你可以将组列表附加到用户列表中，并带有某种字母，例如：

*   约翰
*   凯特
*   实验室（克）
*   朋友（克）

此外，可以通过两种方式管理将内容分配给组：
1）实际分配权限给 group_id（这使得分配内容后查看者组可编辑）
2）只需将权限分配给组中的每个用户苍蝇（这使得任务忍受将某人踢出小组）

如果您选择选项 1，那么您可以通过“手工挑选”人员来分配权限，就像隐藏的自定义组一样。

只是我的2c

# node.js - 限制登录访问 - Passport.js、Google 身份验证

> ID：13657162
> 
> 赞同：3
> 
> 时间：2012-12-01T06:50:19.697
> 
> 标签：node.js, openid, google-openid, passport.js

好的，从我所看到的情况来看，使用 passport.js 是有效的，而且效果很好。但是，我不确定如何正确排除某些用户。如果应用程序旨在限制访问，而不仅仅是为用户提供登录方法，我该如何限制通过 passport.js 登录？就目前而言，用户只需访问`/login`并使用他们的 Google 帐户登录，就可以访问内部。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T00:02:33.277

这是执行此操作的一种方法，并在整个过程中提供评论。主要是从作者那里理解这个页面：http: [//passportjs.org/guide/authenticate/](http://passportjs.org/guide/authenticate/)，我在这个例子中解释了一点......

从下到上阅读可能更容易：

```
var authenticate = function(req, success, failure) {

    // Use the Google strategy with passport.js, but with a custom callback.
    // passport.authenticate returns Connect middleware that we will use below.
    //
    // For reference: http://passportjs.org/guide/authenticate/
    return passport.authenticate('google', 
        // This is the 'custom callback' part
        function (err, user, info) {

            if (err) { 
                failure(err);
            }
            else if (!user) { 
                failure("Invalid login data");
            }
            else {
                // Here, you can do what you want to control 
                // access. For example, you asked to deny users 
                // with a specific email address:
                if (user.emails[0].value === "no@emails.com") {
                    failure("User not allowed");
                }
                else {
                    // req.login is added by the passport.initialize() 
                    // middleware to manage login state. We need 
                    // to call it directly, as we're overriding
                    // the default passport behavior.
                    req.login(user, function(err) {
                        if (err) { 
                            failure(err);
                        }
                        success();
                    });
                }
            }
        }
    );
}; 
```

一个想法是将上面的代码包装在更多的中间件中，以使其更易于阅读：

```
// This defines what we send back to clients that want to authenticate
// with the system.
var authMiddleware = function(req, res, next) {

    var success = function() {
        res.send(200, "Login successul");
    };

    var failure = function(error) {
        console.log(error);
        res.send(401, "Unauthorized"); 
    };

    var middleware = authenticate(req, success, failure);
    middleware(req, res, next);
};

// GET /auth/google/return
//   Use custom middleware to handle the return from Google.
//   The first /auth/google call can remain the same.
app.get('/auth/google/return', authMiddleware); 
```

（这一切都假设我们使用的是 Express。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T10:37:18.243

试试这个。

```
googleLogin: function(req, res) {
        passport.authenticate('google', { failureRedirect: '/login', scope: ['https://www.googleapis.com/auth/plus.login', 'https://www.googleapis.com/auth/userinfo.profile', 'https://www.googleapis.com/auth/userinfo.email'] }, function(err, user) {
          req.logIn(user, function(err) {
            if (err) {
              console.log(err);
              res.view('500');
              return;
            }
            var usrEmail = user['email'];
                 if(usrEmail.indexOf("@something.com") !== -1)
                 {
                 console.log('successful');
                 res.redirect('/');
                 return;
                 }
                 else
                 {
                 console.log('Invalid access');
                 req.logout();
                 res.view('403');
                 return;
                 }

          });
        })(req, res);
      } 
```

*

# python - 如何将 python 日志输出存储到 mongoDb

> ID：13657163
> 
> 赞同：1
> 
> 时间：2012-12-01T06:50:29.330
> 
> 标签：python, mongodb, logging

这是我想做的例子。如果我能够将 logging.warning() 的输出存储到变量中，我将能够将其存储到 Mongodb

```
import logging
logging.basicConfig(level=logging.DEBUG,filename='logDemo.log')
logging.basicConfig(format='%(levelname)s:%(message)s', level=logging.DEBUG)
logging.basicConfig(format='%(asctime)s %(message)s')

def divide(a,b):
    try :

        divide = a/b
        return divide
    except ZeroDivisionError:           

    a=logging.warning('Watch out!') # will print a message to the console
    logging.info('I told you so') # will not print anything
    logging.warning('is when this event was logged.')        
    print a

divide(60,0) 
```

**我试图将 logging.warning() 的输出存储到一个变量中，但它失败了，有没有办法将日志记录函数输出存储到 mongodb**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:01:23.900

正确的解决方案是编写自己的 MongoDBLoggingHandler 并实现处理 MongoDB 特定保存的 emit() 方法。看

[http://docs.python.org/2/library/logging.handlers.html](http://docs.python.org/2/library/logging.handlers.html)

# java - Java SimpleHTTPServer 相当于“python -m SimpleHTTPServer”

> ID：13657165
> 
> 赞同：2
> 
> 时间：2012-12-01T06:50:43.347
> 
> 标签：java, http, groovy

是否有一个简单的 java/jvm/groovy 服务器可以用来提供文件，就像'python -m SimpleHTTPServer' [http://docs.python.org/2/library/simplehttpserver.html](http://docs.python.org/2/library/simplehttpserver.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:37:32.957

看看这个线程： http: [//groovy.329449.n5.nabble.com/groovy-one-liner-to-run-HttpServer-td3245538.html](http://groovy.329449.n5.nabble.com/groovy-one-liner-to-run-HttpServer-td3245538.html)

$ groovy -l 80 SimpleWebServer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-08T12:16:33.797

[JEP 408](https://openjdk.java.net/jeps/408)正在开发中来实现这一点。只需使用标准`java`命令，您就可以启动简单的 http 服务器：

```
$ java -m jdk.httpserver [-b bind address] [-p port] [-d directory] \
  [-o none|info|verbose] [-h to show help message] 
```

不幸的是，它很可能要到 Java 18+ 才会发布。因此，与此同时，您将不得不寻找像[这样](https://www.jbang.dev/learn/jep-408-with-jbang/)的其他解决方案，或者自己做饭。

# silverlight - 如何在 Windows Phone 中的 ScheduledTaskAgent 上裁剪图像

> ID：13657168
> 
> 赞同：1
> 
> 时间：2012-12-01T06:51:05.950
> 
> 标签：silverlight, windows-phone, windows-phone-8

我需要使用 ScheduledTaskAgent 裁剪图像。由于它在后台运行，因此在尝试实例化 WriteableBitmap 时出现跨线程异常（因为它需要在 UI 线程中创建）。我有一个图像流，我将如何在不使用 WriteableBitmap 的情况下裁剪它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T10:12:37.513

即使在后台代理中，您也可以使用调度程序（因此也可以使用 UI 线程）：

```
protected override void OnInvoke(ScheduledTask task)
{
    Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        // Use the WriteableBitmap here

        this.NotifyComplete();
    });
} 
```

# ruby-on-rails - Rails Mongoid form_for 没有使用正确的动词

> ID：13657181
> 
> 赞同：1
> 
> 时间：2012-12-01T06:53:29.260
> 
> 标签：ruby-on-rails, routes, mongoid, form-for

我在单一资源 ( ) 中有一个嵌入式资源，并且在使用助手`/profile/workout`时遇到了一些问题。`form_for`

我已经定义了以下帮助程序，因为`profile`它只是基于`current_user`（只是重定向到正确的 url）：

```
def workout_path(*args)
    profile_workout_path(*args)
end 
```

我有以下模型：

```
class Workout
  include Mongoid::Document
  include Mongoid::Timestamps

  field :name, type: String

  embedded_in :user
  embeds_many :movements
  accepts_nested_attributes_for :movements
end 
```

控制器：

```
def new
  @workout = current_user.workouts.build
  @workout.movements.build
end 
```

路线：

```
ComposerDelete::Application.routes.draw do
  authenticated :user do
    root :to => 'home#index'
  end

  root :to => "home#index"
  devise_for :users
  resources :users do
  end

  resource :profile do
    resources :workouts
  end
end 
```

和形式

```
= form_for @workout do |f|
  %fieldset
    = f.label :name
    = f.text_field :name
    = f.fields_for :movements do |builder|
      = render "movement_fields", f: builder
    = link_to_add_fields "Add Movement", f, :movements
    = f.submit "Create" 
```

当我访问 url:`http://localhost:3500/profile/workouts/50b99b70f0f800cd53000002/edit`时，表单具有以下标题：

```
<form accept-charset="UTF-8" action="/profile/workouts/50b99b70f0f800cd53000002" class="edit_workout" id="edit_workout_50b99b70f0f800cd53000002" method="post"> 
```

它得到了正确的 id ( `edit_<model>_<id>`)，但错误的方法 ( `post`, 应该是`put`)，而且，提交按钮说`Create`而不是`Update`. 该表格可以正常工作，并更新锻炼。

耙路线：

```
 root        /                                    home#index
                    root        /                                    home#index
        new_user_session GET    /users/sign_in(.:format)             devise/sessions#new
            user_session POST   /users/sign_in(.:format)             devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)            devise/sessions#destroy
           user_password POST   /users/password(.:format)            devise/passwords#create
       new_user_password GET    /users/password/new(.:format)        devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)       devise/passwords#edit
                         PUT    /users/password(.:format)            devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)              devise/registrations#cancel
       user_registration POST   /users(.:format)                     devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)             devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                devise/registrations#edit
                         PUT    /users(.:format)                     devise/registrations#update
                         DELETE /users(.:format)                     devise/registrations#destroy
                   users GET    /users(.:format)                     users#index
                         POST   /users(.:format)                     users#create
                new_user GET    /users/new(.:format)                 users#new
               edit_user GET    /users/:id/edit(.:format)            users#edit
                    user GET    /users/:id(.:format)                 users#show
                         PUT    /users/:id(.:format)                 users#update
                         DELETE /users/:id(.:format)                 users#destroy
        profile_workouts GET    /profile/workouts(.:format)          workouts#index
                         POST   /profile/workouts(.:format)          workouts#create
     new_profile_workout GET    /profile/workouts/new(.:format)      workouts#new
    edit_profile_workout GET    /profile/workouts/:id/edit(.:format) workouts#edit
         profile_workout GET    /profile/workouts/:id(.:format)      workouts#show
                         PUT    /profile/workouts/:id(.:format)      workouts#update
                         DELETE /profile/workouts/:id(.:format)      workouts#destroy
                 profile POST   /profile(.:format)                   profiles#create
             new_profile GET    /profile/new(.:format)               profiles#new
            edit_profile GET    /profile/edit(.:format)              profiles#edit
                         GET    /profile(.:format)                   profiles#show
                         PUT    /profile(.:format)                   profiles#update
                         DELETE /profile(.:format)                   profiles#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:27:41.330

该方法将始终是`POST`，而不是`PUT`- 您的浏览器本身不支持`PUT`，因此 Rails 通过在表单中​​使用隐藏的表单字段来解决这个问题`_method=PUT`。有关这方面的一些文档，请参见[此处](http://guides.rubyonrails.org/form_helpers.html#how-do-forms-with-put-or-delete-methods-work%20here)。

另外，您自己的代码说`= f.submit "Create"`，所以难怪按钮说“创建”。

# c# - 自动运行 C# 文件

> ID：13657182
> 
> 赞同：1
> 
> 时间：2012-12-01T06:53:38.297
> 
> 标签：c#, asp.net

大家好，堆栈溢出。我有 Asp.net Web 应用程序，它从文件夹中获取图像，调整它们的大小并转储到其他文件夹中。为此，我必须经常点击一个按钮来选择图像。

有没有办法通过从文件夹中选择图像并对其进行处理然后转储到其他文件夹中来使应用程序自动运行。

设置可以像启动应用程序并运行五分钟然后停止然后等待1分钟然后再次启动并运行5分钟。

重要的是它应该只在完成调整大小并在间隔中转储最后一个图像后停止。

这将为我省去很多麻烦，因为我必须经常点击按钮并打扰我。

我只想要方法和相关的链接。很多。请回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:59:53.147

使用计时器控件来执行此任务

```
 timer.Tick += new EventHandler(timer_Tick); // Everytime timer ticks, timer_Tick will be called
        timer.Interval = (1000) * (1);              // Timer will tick evert second
        timer.Enabled = true;                       // Enable the timer
        timer.Start();  

void timer_Tick(object sender, EventArgs e)
    {
        do whatever you want
    } 
```

# android - jspeex，android中的java.lang.NoClassDefFoundError

> ID：13657185
> 
> 赞同：1
> 
> 时间：2012-12-01T06:54:17.397
> 
> 标签：android, jspeex

`jspeex.jar`当我尝试编译时，我在 android 中使用它会引发错误

```
12-01 11:30:58.998: E/AndroidRuntime(17989): java.lang.NoClassDefFoundError: org.xiph.speex.SpeexEncoder 
```

[在此链接](http://www.basic4ppc.com/forum/basic4android-updates-questions/20207-problem-creating-library-i-keep-getting-java-lang-noclassdeffounderror-error.html)中，他们建议使用 @DependsOn(value = {"jspeex"}) 但它显示错误。我在带有openjdk-6的ubuntu上使用eclipse。

我正在发布日志，它可以让您更好地了解我的问题

```
12-01 11:30:58.898: E/dalvikvm(17989): Could not find class 'org.xiph.speex.OggSpeexWriter', referenced from method com.samsung.sample.jspeex.JSpeexSampleActivity.encodeFile
12-01 11:30:58.898: W/dalvikvm(17989): VFY: unable to resolve new-instance 50 (Lorg/xiph/speex/OggSpeexWriter;) in Lcom/samsung/sample/jspeex/JSpeexSampleActivity;
12-01 11:30:58.898: W/dalvikvm(17989): VFY: unable to resolve virtual method 71: Lorg/xiph/speex/AudioFileWriter;.close ()V
12-01 11:30:58.898: W/dalvikvm(17989): VFY: unable to resolve virtual method 71: Lorg/xiph/speex/AudioFileWriter;.close ()V
12-01 11:30:58.898: W/dalvikvm(17989): VFY: unable to resolve virtual method 71: Lorg/xiph/speex/AudioFileWriter;.close ()V
12-01 11:30:58.908: W/dalvikvm(17989): VFY: unable to resolve virtual method 71: Lorg/xiph/speex/AudioFileWriter;.close ()V
12-01 11:30:58.908: E/dalvikvm(17989): Could not find class 'org.xiph.speex.SpeexEncoder', referenced from method com.samsung.sample.jspeex.JSpeexSampleActivity.initEncoder
12-01 11:30:58.908: W/dalvikvm(17989): VFY: unable to resolve new-instance 51 (Lorg/xiph/speex/SpeexEncoder;) in Lcom/samsung/sample/jspeex/JSpeexSampleActivity;
12-01 11:30:58.998: W/dalvikvm(17989): threadid=1: thread exiting with uncaught exception (group=0x400207d8)
12-01 11:30:58.998: E/AndroidRuntime(17989): FATAL EXCEPTION: main
12-01 11:30:58.998: E/AndroidRuntime(17989): java.lang.NoClassDefFoundError: org.xiph.speex.SpeexEncoder
12-01 11:30:58.998: E/AndroidRuntime(17989):    at com.samsung.sample.jspeex.JSpeexSampleActivity.initEncoder(JSpeexSampleActivity.java:99)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at com.samsung.sample.jspeex.JSpeexSampleActivity.onCreate(JSpeexSampleActivity.java:52)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at android.app.ActivityThread.access$2300(ActivityThread.java:126)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at android.os.Looper.loop(Looper.java:123)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at android.app.ActivityThread.main(ActivityThread.java:4633)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at java.lang.reflect.Method.invokeNative(Native Method)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at java.lang.reflect.Method.invoke(Method.java:521)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
12-01 11:30:58.998: E/AndroidRuntime(17989):    at dalvik.system.NativeStart.main(Native Method) 
```

任何机构都可以帮我解决这个问题。提前致谢

# php - 使用单独的列将 php 导出到 excel

> ID：13657191
> 
> 赞同：4
> 
> 时间：2012-12-01T06:55:28.173
> 
> 标签：php, mysql, sql

我正在尝试将我的数据库导出到 .csv 导出完成，但它将所有字段放在一列中（不分隔）

编码 ：

```
$sql = "SELECT ARP_name ,Student_name   ,institute  ,id ,Major from       istyle ";
$results=mysql_query($sql);
$filename = "uploaded/".time().".csv";

$handle = fopen($filename, 'w+');

fputcsv($handle, array_keys("ARP_name","Student_name","institute"));

while($row = mysql_fetch_assoc($results))
{
    fputcsv($handle, array($row["ARP_name"], $row["Student_name"],$row["institute"]));
} 
```

结果是：

> ![在此处输入图像描述](../Images/e1ebacdd6202d2577c4777d426f47a67.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:09:47.033

由于您的 csv 导出乍一看看起来非常好，我假设您的意思是您尝试将数据导入其中的电子表格将所有内容都放在一个列中？

在将数据导入电子表格应用程序时，您可以调整各种设置来描述 csv 格式的详细信息。检查应用程序首选项对话框。OpenOffice 和 LibreOffice Calc 应用程序为此提供了一个很棒的向导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T12:54:37.707

对于单独的列，使用“\t”对于单独的行，使用“\n”

# android - 使用 actionbarsherlock 的状态寻呼机获取当前片段位置

> ID：13657198
> 
> 赞同：4
> 
> 时间：2012-12-01T06:57:04.120
> 
> 标签：android, actionbarsherlock

我有一个使用 actionbarsherlock 的工作状态寻呼机项目，但我无法获取显示的当前片段。是否可以获得当前片段的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T09:01:13.350

是的，有可能。如果您使用的是 ViewPager，您可以这样做：

```
_viewPager.getCurrentItem(); 
```

或者那个

```
_pageListener = new PageListener();
_viewPager.setOnPageChangeListener(_pageListener); 
```

并用类似的东西跟踪当前页面：

```
private int _currentPage;

    private static class PageListener extends SimpleOnPageChangeListener{
            public void onPageSelected(int position) {
                Log.i(TAG, "page selected " + position);
                   _currentPage = position;
        }
    } 
```

否则，您可以使用这样的 TabAdapter 轻松做到这一点：

```
public static class TabsAdapter extends FragmentPagerAdapter implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
        private final Context               mContext;
        private final ActionBar             mActionBar;
        private final ViewPager             mViewPager;
        private final ArrayList<TabInfo>    mTabs   = new ArrayList<TabInfo>();

        static final class TabInfo {
            private final Class<?>  clss;
            private final Bundle    args;

            TabInfo(Class<?> _class, Bundle _args) {

                clss = _class;
                args = _args;
            }
        }

        public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {

            super(activity.getSupportFragmentManager());
            mContext = activity;
            mActionBar = activity.getSupportActionBar();
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {

            TabInfo info = new TabInfo(clss, args);
            tab.setTag(info);
            tab.setTabListener(this);
            mTabs.add(info);
            mActionBar.addTab(tab);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {

            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position) {

            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        }

        public void onPageSelected(int position) {

            mActionBar.setSelectedNavigationItem(position);
            ((SherlockFragmentActivity) mContext).supportInvalidateOptionsMenu();
        }

        public void onPageScrollStateChanged(int state) {

        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {

            Object tag = tab.getTag();
            for (int i = 0; i < mTabs.size(); i++) {
                if (mTabs.get(i) == tag) {
                    mViewPager.setCurrentItem(i);
                }
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {

        }
    } 
```

您只需要使用一种/或两种方法保留当前页面。例如在**onTabSelected**

希望它可以帮助你好运

# ipython - 在 ipython3 笔记本中使用 sys.argv[]

> ID：13657199
> 
> 赞同：2
> 
> 时间：2012-12-01T06:57:23.577
> 
> 标签：ipython

“ipython3 notebook”有没有办法用它的“运行”按钮接收命令行参数？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-29T09:58:38.750

当我尝试`argparse`使用`Jupyter Notebook`. 由于我不想对代码做太多修改，所以我需要提供`sys.argv[]`给解析器。就我而言，这样的代码可以解决问题：

```
import sys
sys.argv=['self.py','arg1','arg2'] 
```

因为在真正的命令行中，第一个元素`sys.argv`是脚本的名称，所以你必须提供一个随机的脚本名称或者一个适合你的应用程序的名称，而后面的参数就像是通过一个真正的命令传递的一样线。到目前为止这对我有用，但我不知道它是否安全和优雅，希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:53:55.497

你的意思是 Cell -> Run 菜单项？如果是这样，没有。笔记本并不是真正为那样使用而设计的。你想做什么？

# objective-c - 需要有关“书架”应用程序（表格或滚动条）创意的一般说明吗？

> ID：13657201
> 
> 赞同：-1
> 
> 时间：2012-12-01T06:57:52.953
> 
> 标签：objective-c, uitableview, uiscrollview, uiimageview

我目前正在创建应用程序。
我们的要求是制作类似于 iBooks 的“图书查看器”应用程序。每本书都只是一系列图像（JPEG 或 PNG），而不是 pdf。所以从某种意义上说，它更像是一个图像查看器。

主视图将类似于“水平表格视图”，用户可以水平滚动书籍的封面，单击它以下载并打开书籍（这会导致另一个页面视图）。封面的行应该至少有两个，因为为书籍设置了两个“类型”。这部分更像是一个“脉冲式”的书架，其 UI 与[此](http://iosstuff.wordpress.com/2011/06/29/creating-pulse-style-scrolling-horizontally-scrolling-uitableview-as-a-subview-of-uitableviewcell/)类似。

当我想到如何实现这种行为时，我找到了 UITableView 的方法，就像[这里](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)描述的那样。然而，作为一个objective-c初学者，我使用它有点复杂，而且我们的要求还有每个“单元格”必须有多个按钮来将每本书设置为“收藏”或“下载”等......这可以如果我选择使用 UITableView 会更复杂。

所以我开始想到使用 UIScrollView 来排列书籍封面，将每个封面嵌入为带有按钮的 UIImageView。但是我真的不知道这是否是正确的方向，因为 UIScrollView 没有“重新加载”功能，并且要求还规定用户应该能够通过使用头部的“搜索栏”找到书籍书架视图。

如您所见，我完全感到困惑和沮丧，因为我不知道如何才能做到这一点。我搜索了谷歌，stackoverflow 上的几个答案建议使用[AQGridView](https://github.com/AlanQuatermain/AQGridView)或[EasyTableView](https://github.com/alekseyn/EasyTableView)。它们都很棒，但又太复杂了，无法将它们实现到我们的要求中......

哪种方式，或者我应该如何实现这种动态的“脉冲式”书架式功能？

我认为我的问题有点模糊，但我也不清楚在这里问什么，因为我真的不知道该怎么做。这个应用程序的Android版本已经通过相当简单易懂的代码实现了这个要求（因为我有一些Java经验），但是对于这个Objective-C来说，一切似乎都不必要地复杂......

任何帮助，将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:10:57.340

`<preachy>`事实是，当您是“objective-c 初学者”时，您试图让这个应用程序具有一个充满非标准 UI 组件的复杂界面，这是一个错误。我了解这可能不是您的决定；可能是签你薪水的那个人强加给你的。然而，在您花时间阅读教程和阅读构建它所需的编程语言和库的文档之前，期望您可以实现这个应用程序是不合理的。在开始写打油诗之前，我们都必须学习字母表。`</preachy>`

也就是说，如果您的应用程序可能需要 iOS 6，并且您可以花时间学习一些 Objective-C 和 iOS 编程，那么使用`UICollectionView`. Apple 在 WWDC 2012 上就这个强大的新课程举办了几次会议。我建议您观看视频：

*   [会话 205 - 介绍集合视图](https://developer.apple.com/videos/wwdc/2012/?id=205)
*   [会话 219 - 高级集合视图和构建自定义布局](https://developer.apple.com/videos/wwdc/2012/?id=219)

您还可以轻松找到一些有关`UICollectionView`使用您喜欢的搜索引擎的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:03:41.683

看看[Collection View 的](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/Introduction/Introduction.html)

您甚至可以下载一些[示例代码](http://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Introduction/Intro.html)来了解如何实现网格布局。

# android - android中的片段导航

> ID：13657202
> 
> 赞同：0
> 
> 时间：2012-12-01T06:57:59.447
> 
> 标签：android, android-fragments

嗨，我是 android 中这个片段开发的新手。我的问题是片段之间的导航。我在片段 1 中有一个按钮，在片段 2 中有一个文本视图，我有活动 activity1，我在 xml 中声明了这两个片段。我的问题是当我按下fragment1中的按钮时，它必须携带一些文本并在fragment2的textview中显示，然后它必须检查fragment2是否处于相同的布局中？

代码对我很有帮助。提前致谢..........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:18:32.877

首先将您的充气机声明为 onCreateView（在 2ndFragmentClass 中），如下所示：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_content, container, false);

    return view;
} 
```

请考虑 fragment_content 必须至少在其内部有一个 TextView（以便我们在片段内设置它的值）。然后我们必须从第一个片段更改此文本的值。所以我们在我们的第二个片段（包含 TextView 的片段）中添加这个构造函数，如下所示：

```
public void setText(String name) {
    TextView txt= (TextView ) getView().findViewById(R.id.textView1);
    txt.setNewText(name);
  } 
```

简而言之，它将如下所示：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_content, container, false);

    return view;
}
public void setText(String name) {
    TextView txt= (TextView ) getView().findViewById(R.id.textView1);
    txt.setNewText(name);
  } 
```

然后我们必须定义哪些文本必须**从 1stFragmentClass 设置到 2nd Fragment。**然后我们通过按下第一个片段中的按钮来设置第二个片段的文本，如下所示：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    String url = "Hello, This is the text from 1st Fragment:)";
         //Here we try to declare 2nd fragment.
    2ndFragmentClass fragment = (2ndFragmentClass) getFragmentManager()
            .findFragmentById(R.id.detailFragment);
        fragment.setNewText(url);
} 
```

# javascript - 调用前检查函数是否存在？

> ID：13657204
> 
> 赞同：36
> 
> 时间：2012-12-01T06:58:21.810
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 测试对象是否有方法？](https://stackoverflow.com/questions/5108832/jquery-test-for-whether-an-object-has-a-method)

我想在调用 javascript 之前设置函数是否存在你能帮我如何做到这一点并应用在这个脚本上吗

```
$(document).ready(function() {
   $(".cs-text-cut").lettering('words');
}); 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-12-01T07:01:15.570

我假设你想要检查并确保它`lettering`存在，试试这个：

[http://api.jquery.com/jQuery.isFunction/](http://api.jquery.com/jQuery.isFunction/)

这是一个例子：

```
if ( $.isFunction($.fn.lettering) ) {
    $(".cs-text-cut").lettering('words');
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-01T07:06:34.447

Use this to check if function exists.

```
<script>
if ( typeof function_name == 'function' ) { 
        //function_name is a function
}
else
{
 //do not exist
}
</script> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-01T07:04:24.833

If it's the `lettering` function you want to test for, you can do so like this;

```
$(document).ready(function() {
    var items = $(".cs-text-cut");
    if (items.lettering) {
        items.lettering('words');
    }
}); 
```

Or, if you want to make absolutely sure `items.lettering` is a function before attempting to call it, you can do this:

```
$(document).ready(function() {
    var items = $(".cs-text-cut");
    if (typeof items.lettering === "function") {
        items.lettering('words');
    }
}); 
```

Or, if you really don't control the environment so you don't really know if the lettering function call is going to work or not and might even throw an exception, you can just put an exception handler around it:

```
$(document).ready(function() {
    try {
        $(".cs-text-cut").lettering('words');
    } catch(e) {
        // handle an exception here if lettering doesn't exist or throws an exception
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T07:30:43.190

`typeof $({}).lettering == 'function'`或者`$.isFunction($({}).lettering)`应该返回一个布尔值是否可用。

# php - 未加载codeigniter htaccess？

> ID：13657209
> 
> 赞同：2
> 
> 时间：2012-12-01T06:59:23.637
> 
> 标签：php, .htaccess, codeigniter, config

我所做的 htaccess 没有按应有的方式运行，为什么？

有我的 htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
#RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
php_value memory_limit "64M" 
</IfModule> 
```

和索引页面配置

```
$config['index_page'] = ''; 
```

但是仍然没有找到404页面

```
http://hostname/blog <=== 404 page not found
http://hostname/index.php/blog <=== normal page show up 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:04:49.983

```
RewriteRule ^(.*)$ index.php?/$1 [QSA,L] 
```

should be:

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

See [http://ellislab.com/codeigniter/user-guide/general/urls.html](http://ellislab.com/codeigniter/user-guide/general/urls.html) and the section titled 'Removing the index.php file' You need to use the same RewriteRule, the RewriteConds you have are fine though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:41:36.957

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这是[Codeigniter 删除 index.php 文件的用户指南](http://ellislab.com/codeigniter/user-guide/general/urls.html)中编写的标准内容，您可以在其中添加其他规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:48:03.353

将 .htaccess 文件与 index.php 文件一起放在应用程序根目录中。（检查 htaccess 扩展是否正确，Bz htaccess.txt 对我不起作用。）

并将以下规则添加到 .htaccess 文件中，

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

然后在您的 application/config/config.php 文件中找到以下行

```
$config['index_page'] = 'index.php'; 
```

将变量设置为空，如下所示。

```
$config['index_page'] = ''; 
```

就是这样，它对我有用。

如果它不起作用，请尝试用这些参数（'AUTO'、'PATH_INFO'、'QUERY_STRING'、'REQUEST_URI'和'ORIG_PATH_INFO'）一一替换以下变量

```
$config['uri_protocol'] = 'AUTO'; 
```

# php - PHP money_format 函数用于多种货币

> ID：13657211
> 
> 赞同：2
> 
> 时间：2012-12-01T06:59:45.623
> 
> 标签：php, currency, money-format

我想从以下货币中使用 php money_format 函数。

```
(INR,USD,EUR,GBP,AUD,CNY,HKD,JPY) 
```

在我的系统中，我允许从上面的列表中选择货币，根据选择我有显示金额。

我已经尝试过使用美元和印度卢比的代码

```
money_format('$%i',$amount); //USD

money_format('%!i',$amount); //INR 
```

我想要上面列出的所有货币的货币格式功能代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T08:56:33.667

我在网上找到了这个功能，它对我真的很有帮助。

[格式化货币](http://www.joelpeterson.com/blog/2011/03/formatting-over-100-currencies-in-php/)

```
 function formatcurrency($floatcurr, $curr = "USD"){
        $currencies['ARS'] = array(2,',','.');          //  Argentine Peso
        $currencies['AMD'] = array(2,'.',',');          //  Armenian Dram
        $currencies['AWG'] = array(2,'.',',');          //  Aruban Guilder
        $currencies['AUD'] = array(2,'.',' ');          //  Australian Dollar
        $currencies['BSD'] = array(2,'.',',');          //  Bahamian Dollar
        $currencies['BHD'] = array(3,'.',',');          //  Bahraini Dinar
        $currencies['BDT'] = array(2,'.',',');          //  Bangladesh, Taka
        $currencies['BZD'] = array(2,'.',',');          //  Belize Dollar
        $currencies['BMD'] = array(2,'.',',');          //  Bermudian Dollar
        $currencies['BOB'] = array(2,'.',',');          //  Bolivia, Boliviano
        $currencies['BAM'] = array(2,'.',',');          //  Bosnia and Herzegovina, Convertible Marks
        $currencies['BWP'] = array(2,'.',',');          //  Botswana, Pula
        $currencies['BRL'] = array(2,',','.');          //  Brazilian Real
        $currencies['BND'] = array(2,'.',',');          //  Brunei Dollar
        $currencies['CAD'] = array(2,'.',',');          //  Canadian Dollar
        $currencies['KYD'] = array(2,'.',',');          //  Cayman Islands Dollar
        $currencies['CLP'] = array(0,'','.');           //  Chilean Peso
        $currencies['CNY'] = array(2,'.',',');          //  China Yuan Renminbi
        $currencies['COP'] = array(2,',','.');          //  Colombian Peso
        $currencies['CRC'] = array(2,',','.');          //  Costa Rican Colon
        $currencies['HRK'] = array(2,',','.');          //  Croatian Kuna
        $currencies['CUC'] = array(2,'.',',');          //  Cuban Convertible Peso
        $currencies['CUP'] = array(2,'.',',');          //  Cuban Peso
        $currencies['CYP'] = array(2,'.',',');          //  Cyprus Pound
        $currencies['CZK'] = array(2,'.',',');          //  Czech Koruna
        $currencies['DKK'] = array(2,',','.');          //  Danish Krone
        $currencies['DOP'] = array(2,'.',',');          //  Dominican Peso
        $currencies['XCD'] = array(2,'.',',');          //  East Caribbean Dollar
        $currencies['EGP'] = array(2,'.',',');          //  Egyptian Pound
        $currencies['SVC'] = array(2,'.',',');          //  El Salvador Colon
        $currencies['ATS'] = array(2,',','.');          //  Euro
        $currencies['BEF'] = array(2,',','.');          //  Euro
        $currencies['DEM'] = array(2,',','.');          //  Euro
        $currencies['EEK'] = array(2,',','.');          //  Euro
        $currencies['ESP'] = array(2,',','.');          //  Euro
        $currencies['EUR'] = array(2,',','.');          //  Euro
        $currencies['FIM'] = array(2,',','.');          //  Euro
        $currencies['FRF'] = array(2,',','.');          //  Euro
        $currencies['GRD'] = array(2,',','.');          //  Euro
        $currencies['IEP'] = array(2,',','.');          //  Euro
        $currencies['ITL'] = array(2,',','.');          //  Euro
        $currencies['LUF'] = array(2,',','.');          //  Euro
        $currencies['NLG'] = array(2,',','.');          //  Euro
        $currencies['PTE'] = array(2,',','.');          //  Euro
        $currencies['GHC'] = array(2,'.',',');          //  Ghana, Cedi
        $currencies['GIP'] = array(2,'.',',');          //  Gibraltar Pound
        $currencies['GTQ'] = array(2,'.',',');          //  Guatemala, Quetzal
        $currencies['HNL'] = array(2,'.',',');          //  Honduras, Lempira
        $currencies['HKD'] = array(2,'.',',');          //  Hong Kong Dollar
        $currencies['HUF'] = array(0,'','.');           //  Hungary, Forint
        $currencies['ISK'] = array(0,'','.');           //  Iceland Krona
        $currencies['INR'] = array(2,'.',',');          //  Indian Rupee
        $currencies['IDR'] = array(2,',','.');          //  Indonesia, Rupiah
        $currencies['IRR'] = array(2,'.',',');          //  Iranian Rial
        $currencies['JMD'] = array(2,'.',',');          //  Jamaican Dollar
        $currencies['JPY'] = array(0,'',',');           //  Japan, Yen
        $currencies['JOD'] = array(3,'.',',');          //  Jordanian Dinar
        $currencies['KES'] = array(2,'.',',');          //  Kenyan Shilling
        $currencies['KWD'] = array(3,'.',',');          //  Kuwaiti Dinar
        $currencies['LVL'] = array(2,'.',',');          //  Latvian Lats
        $currencies['LBP'] = array(0,'',' ');           //  Lebanese Pound
        $currencies['LTL'] = array(2,',',' ');          //  Lithuanian Litas
        $currencies['MKD'] = array(2,'.',',');          //  Macedonia, Denar
        $currencies['MYR'] = array(2,'.',',');          //  Malaysian Ringgit
        $currencies['MTL'] = array(2,'.',',');          //  Maltese Lira
        $currencies['MUR'] = array(0,'',',');           //  Mauritius Rupee
        $currencies['MXN'] = array(2,'.',',');          //  Mexican Peso
        $currencies['MZM'] = array(2,',','.');          //  Mozambique Metical
        $currencies['NPR'] = array(2,'.',',');          //  Nepalese Rupee
        $currencies['ANG'] = array(2,'.',',');          //  Netherlands Antillian Guilder
        $currencies['ILS'] = array(2,'.',',');          //  New Israeli Shekel
        $currencies['TRY'] = array(2,'.',',');          //  New Turkish Lira
        $currencies['NZD'] = array(2,'.',',');          //  New Zealand Dollar
        $currencies['NOK'] = array(2,',','.');          //  Norwegian Krone
        $currencies['PKR'] = array(2,'.',',');          //  Pakistan Rupee
        $currencies['PEN'] = array(2,'.',',');          //  Peru, Nuevo Sol
        $currencies['UYU'] = array(2,',','.');          //  Peso Uruguayo
        $currencies['PHP'] = array(2,'.',',');          //  Philippine Peso
        $currencies['PLN'] = array(2,'.',' ');          //  Poland, Zloty
        $currencies['GBP'] = array(2,'.',',');          //  Pound Sterling
        $currencies['OMR'] = array(3,'.',',');          //  Rial Omani
        $currencies['RON'] = array(2,',','.');          //  Romania, New Leu
        $currencies['ROL'] = array(2,',','.');          //  Romania, Old Leu
        $currencies['RUB'] = array(2,',','.');          //  Russian Ruble
        $currencies['SAR'] = array(2,'.',',');          //  Saudi Riyal
        $currencies['SGD'] = array(2,'.',',');          //  Singapore Dollar
        $currencies['SKK'] = array(2,',',' ');          //  Slovak Koruna
        $currencies['SIT'] = array(2,',','.');          //  Slovenia, Tolar
        $currencies['ZAR'] = array(2,'.',' ');          //  South Africa, Rand
        $currencies['KRW'] = array(0,'',',');           //  South Korea, Won
        $currencies['SZL'] = array(2,'.',', ');         //  Swaziland, Lilangeni
        $currencies['SEK'] = array(2,',','.');          //  Swedish Krona
        $currencies['CHF'] = array(2,'.','\'');         //  Swiss Franc 
        $currencies['TZS'] = array(2,'.',',');          //  Tanzanian Shilling
        $currencies['THB'] = array(2,'.',',');          //  Thailand, Baht
        $currencies['TOP'] = array(2,'.',',');          //  Tonga, Paanga
        $currencies['AED'] = array(2,'.',',');          //  UAE Dirham
        $currencies['UAH'] = array(2,',',' ');          //  Ukraine, Hryvnia
        $currencies['USD'] = array(2,'.',',');          //  US Dollar
        $currencies['VUV'] = array(0,'',',');           //  Vanuatu, Vatu
        $currencies['VEF'] = array(2,',','.');          //  Venezuela Bolivares Fuertes
        $currencies['VEB'] = array(2,',','.');          //  Venezuela, Bolivar
        $currencies['VND'] = array(0,'','.');           //  Viet Nam, Dong
        $currencies['ZWD'] = array(2,'.',' ');          //  Zimbabwe Dollar

        function formatinr($input){
            //CUSTOM FUNCTION TO GENERATE ##,##,###.##
            $dec = "";
            $pos = strpos($input, ".");
            if ($pos === false){
                //no decimals   
            } else {
                //decimals
                $dec = substr(round(substr($input,$pos),2),1);
                $input = substr($input,0,$pos);
            }
            $num = substr($input,-3); //get the last 3 digits
            $input = substr($input,0, -3); //omit the last 3 digits already stored in $num
            while(strlen($input) > 0) //loop the process - further get digits 2 by 2
            {
                $num = substr($input,-2).",".$num;
                $input = substr($input,0,-2);
            }
            return $num . $dec;
        }

        if ($curr == "INR"){    
            return formatinr($floatcurr);
        } else {
            return number_format($floatcurr,$currencies[$curr][0],$currencies[$curr][1],$currencies[$curr][2]);
        }
    }

    echo formatcurrency(39174.00000000001);             //1,000,045.25 (USD)        

    /*formatcurrency(1000045.25, "CHF");        //1'000'045.25
    formatcurrency(1000045.25, "EUR");      //1.000.045,25
    formatcurrency(1000045, "JPY");         //1,000,045
    formatcurrency(1000045, "LBP");         //1 000 045
    formatcurrency(1000045.25, "INR");      //10,00,045.25
    */
    ?> 
```

# java - Swing 事件处理程序在它需要使用的方法的值更新之前执行

> ID：13657215
> 
> 赞同：0
> 
> 时间：2012-12-01T07:00:38.090
> 
> 标签：java, swing

所以我正在为课堂制作数独游戏。我有一个网格 JPanel，它是一个由不同空间组成的网格。这个网格上的每个空间都是 JButton，它包含一个 Space 类字段并附加到一个列表，每个列表都有一个相应的列表操作侦听器，它根据用户所做的选择更改 Space 的值。

附加到这个列表的是原始 JFrame 中的一个动作侦听器，网格 JPanel 包含在其中。我想做的是让JFrame中的这个动作监听器使用一种方法来查看数独板上的任何空间是否未填充，这样如果它们都被填充，它可以做一个适当的赢或输窗口。

但我认为正在发生的是，在 JFrame actionlistner 中查找未填充空格的代码时，更改列表 actionlistener 中空格值的代码尚未执行，因此导致该方法的响应为 false检查游戏是否结束。

有人对如何克服这个有任何想法吗？

# jquery - 使用 jquery 向表中添加行

> ID：13657216
> 
> 赞同：0
> 
> 时间：2012-12-01T07:00:39.873
> 
> 标签：jquery

我正在尝试在带有变量的表中追加一个新行

我用这行代码没有运气

```
 $('.view-payments table').append('<tr><td>Amount</td><td>' grandTotal '</td></tr>'); 
```

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:01:51.450

它应该是

```
$('.view-payments table').append('<tr><td>Amount</td><td>'+grandTotal+'</td></tr>'); 
```

# php - PHP $_COOKIE 中的转义 JSON 全局

> ID：13657219
> 
> 赞同：1
> 
> 时间：2012-12-01T07:01:01.060
> 
> 标签：php, javascript, json

好的，所以我对最近的一个项目有一个奇怪的要求。为了绕过我们的 CMS 和缓存的限制，我需要在进行几次 AJAX 调用后在 cookie 中存储和更新 JSON 对象。稍后，如果用户完成了一个过程，则存储在此 cookie 中的信息将用于识别之前做出的选择。完成可以跨越几分钟到几周，即。几乎没有时间限制的页面转换。

当我从 $_COOKIE 全局中提取编码的 JSON 字符串时，我开始收到 JSON 语法错误（实际上在此之前出现了错误，但那是我开始弄清楚发生了什么的时候）。我在 Javascript 中使用内置的 JSON.stringify 来设置 cookie 值，在 PHP 中使用 json_decode。

显然，PHP 会在 $_COOKIE 出来的字符串值中转义引号，这会导致 JSON 语法错误，以及之后的级联效应。我在 PHP JSON 函数或 $_COOKIE 文档中没有看到任何提及。我最终在“\”上做了一个 preg_replace 并删除了它们，它现在“工作”了。

这似乎是一个棘手的工作。有/有什么我想念的吗？将来有没有更好的方法来做到这一点？

回显值和 json_last_error() 时：

> $cookie = $_COOKIE['cookie_name']; => {\"后缀\":\"一般\"...}
> $cookie = json_decode($cookie, true); => 语法错误：NULL
> $cookie = preg_replace('/\\/', "", $cookie); => {"suffix":"general"...}
> $cookie = json_decode($cookie, true); => 没有错误：数组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T07:06:32.483

you need to add the second parameter of json_encode as (some constants need PHP 5.3)

```
json_encode($data, JSON_HEX_QUOT | JSON_HEX_TAG | JSON_HEX_AMP | JSON_HEX_APOS | JSON_HEX_QUOT); 
```

also, you'll need `json_decode(stripslashes($json))` since it seems `magic_quotes_gpc` is on

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T07:12:38.367

你可能是[魔术引语](http://php.net/manual/en/security.magicquotes.php)的受害者。
确保它们已关闭。

# objective-c - NSRunLoop runMode 并不总是处理 dispatch_async

> ID：13657220
> 
> 赞同：5
> 
> 时间：2012-12-01T07:01:10.353
> 
> 标签：objective-c, grand-central-dispatch, nsrunloop, dispatch-async

我正在尝试更好地了解队列及其工作方式。这个片段是为了测试他们的行为：

```
- (void)dispatchQueueTest
{
    NSLog( @"Begin test on %@ thread", [NSThread isMainThread] ? @"main" : @"other" );
    dispatch_semaphore_t s = dispatch_semaphore_create(0);

    dispatch_async( dispatch_get_main_queue(), ^{
        NSLog( @"Signalling semaphore" );
        dispatch_semaphore_signal(s);
    });

    NSLog( @"Waiting for worker" );
    while( dispatch_semaphore_wait( s, DISPATCH_TIME_NOW ) ) {
        NSDate* timeout = [NSDate dateWithTimeIntervalSinceNow:10.f];
        // Process events on the run loop
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:timeout];
    }
    dispatch_release(s);
    NSLog( @"All sync'd up" );
} 
```

正如所料，它会在日志中生成：

```
Begin test on main thread
Waiting for worker
Signalling semaphore
All sync'd up 
```

奇怪的是，如果从 UIViewController 的 (void)viewDidAppear:(BOOL)animated 调用此代码，那么它会改变行为。具体来说，它会因以下日志而死锁：

```
Begin test on main thread
Waiting for worker 
```

我的问题是为什么 NSRunLoop runMode 在这种情况下不处理通过 dispatch_async 发送的块，但在其他情况下却处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T07:27:25.613

我有一个项目，我将 a 推`PlayerNameEntryViewController`送到导航控制器上。我在`-[PlayerNameEntryViewController viewDidAppear:]`. 这是命中断点时的堆栈跟踪：

```
#0  0x0002d3d3 in -[PlayerNameEntryViewController viewDidAppear:] at /Volumes/b/Users/mayoff/t/hotseat2/hotseat2/Home/PlayerNameEntryViewController.m:39
#1  0x00638fbf in -[UIViewController _setViewAppearState:isAnimating:] ()
#2  0x006392d4 in -[UIViewController __viewDidAppear:] ()
#3  0x006395d7 in -[UIViewController _endAppearanceTransition:] ()
#4  0x00648666 in -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:] ()
#5  0x007ee90e in -[UINavigationTransitionView _notifyDelegateTransitionDidStopWithContext:] ()
#6  0x007eec17 in -[UINavigationTransitionView _cleanupTransition] ()
#7  0x007eec86 in -[UINavigationTransitionView _navigationTransitionDidStop] ()
#8  0x005a2499 in -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] ()
#9  0x005a2584 in -[UIViewAnimationState animationDidStop:finished:] ()
#10 0x00497e00 in CA::Layer::run_animation_callbacks(void*) ()
#11 0x02e86515 in _dispatch_main_queue_callback_4CF ()
#12 0x015fe833 in __CFRunLoopRun ()
#13 0x015fddb4 in CFRunLoopRunSpecific ()
#14 0x015fdccb in CFRunLoopRunInMode ()
#15 0x01acd879 in GSEventRunModal ()
#16 0x01acd93e in GSEventRun ()
#17 0x00571a9b in UIApplicationMain ()
#18 0x00002461 in main at /Volumes/b/Users/mayoff/t/hotseat2/hotseat2/main.m:17 
```

注意第 11 帧。这是对`_dispatch_main_queue_callback_4CF`. 这是运行放在主队列上的块的函数。所以`viewDidAppear:`实际上是从添加到主队列的块内部调用的`dispatch_async`。

主队列是串行队列。串行队列的定义是一次只执行一个块的队列。如果队列正在执行一个块，则该队列上的任何其他块都不能启动。因此，当您递归地运行主运行循环时，运行循环会看到它已经在主队列上运行的块内，并且不会尝试启动更多块。这就是为什么你的信号量信号块永远不会运行并且你的应用程序挂起的原因。

请注意，有时`viewDidAppear:`会从排队的块内部调用，有时则不会。你不应该依赖任何一种行为。

# iphone - 如何在 ARC 项目中重新初始化 NSMutableDictionary？

> ID：13657225
> 
> 赞同：-4
> 
> 时间：2012-12-01T07:01:49.577
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting, nsmutabledictionary

我有一个需要初始化和重新初始化的类级别 NSMutableDictionary 对象。由于我的项目是 ARC，我不确定是否可以使用 release。

什么是正确的方法？

我当前的代码导致崩溃：

```
myDict = [[NSMutableDictionary alloc] initWithObjectsAndKeys: value1,@"key1", 
value2,@"key2", nil]; 
```

请注意，此崩溃是我在加载类后第二次执行此操作，而不是第一次。所以问题肯定是我正在重新分配它。

在任何情况下（无论是否崩溃），我都希望在 ARC 项目中以一种无泄漏的方式来处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:38:34.390

我认为你需要这样做

```
 -(void)ViewDidLoad
 {
      [super viewDidLoad];
      myDict =  [[NSMutableDictionary alloc] initWithObjectsAndKeys: value1,@"key1", value2,    @"key2", nil];
 } 
```

当您使用它时，请不要再次分配/初始化，而是您可以执行以下操作

```
if([[myDict allKeys]count])
{
     [myDict removeAllObjects];
} 
```

**并在字典中再次设置值**

```
 [myDict setValue:@"Abc" forKey:@"xyz"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:03:54.133

不确定“重新初始化”是什么意思，但您始终可以删除字典中的所有键和值并重新放入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T07:04:24.990

Simply alloc+init it again, all your previous values will be released and new object will be reassigned to the same object/Dictionary.

# php - 当用户首次访问我的网站时，制作文本的 CSS 样式

> ID：13657229
> 
> 赞同：0
> 
> 时间：2012-12-01T07:02:20.200
> 
> 标签：php, javascript, jquery, html

我有一个网站。在我的主页中有一个内容“我的虚拟文本”。这是放置在 ul li 中的一个标签。IE

```
<ul><li><a>My dummy text</a></li></ul> 
```

我想让这个文本在有人第一次登陆主页时以蓝色突出显示。否则它必须是白色的。有谁知道如何做到这一点 ？我的是一个 php 网站

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:04:13.550

you can use cookie

1.  set default 0
2.  if someone loaded the page than change cookie to 1 otherwise 0

.

```
<ul>
   <li>
    <a <?php if($_COOKIE["status"] == 0){style="color:blue;"} ?>>My dummy text</a>
   </li>
 </ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:05:35.607

I dont see any code so..here is my theoritical explaination as well...

```
1 Use Cookies.
2 HTML5 Cache..You can use localstorage to do that as well 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T07:12:48.287

只是在 cookie 方法上添加一点，我建议在`<body>`标签中添加一个类，这样如果将来你想做更多的事情，你可以在不修改 PHP 的情况下做到这一点。

例如：

```
<?php 
      function dejavu() {
          $class = '';
          if($_COOKIE['beenHereBefore']) {
             $class .= 'beenHereBefore';
           }
          else {
             $class .= 'firstTimeHere';
             setcookie("beenHereBefore", true);
          }
          return $class;
      }
?>

<body class="<?php echo dejavu(); ?>"> 
```

但是，您要考虑的一件事是，如果用户清除了他们的 cookie，那么它将表现得好像他们是第一次访问该站点一样；所以我建议，如果可能的话，将其存储在他们的用户配置文件中（如果存在的话）。

因此，在您的 CSS 中，您可以执行以下操作：

```
ul li a {color: white;}
.firstTimeHere ul li a {color: blue;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T14:20:51.087

我建议您使用 jquery 来检查您是否在主页中假设您的主页称为：index.php

像这样 ：

```
if(window.location.href.indexOf("index.php") > -1)
{
      $('#ulid li').css('color', 'red');
}
else $('#ulid li').css('color', 'black'); 
```

给你的 ul 一个 ID 并假设你想用红色突出显示你的原始文本颜色是黑色 不需要使用 Cookies 你可以很容易地使用 jquery 来完成这个技巧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T07:20:44.170

利用：

```
$(window).ready(function(){
// do your CSS stuff here ...
}); 
```

或使用：

```
$(document).ready(function(){ 
// do your CSS stuff here ...
}); 
```

检查此链接：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

# go - 将 [8]byte 转换为 uint64

> ID：13657232
> 
> 赞同：16
> 
> 时间：2012-12-01T07:02:31.763
> 
> 标签：go

全部。我遇到了一个似乎很奇怪的问题。（可能是我应该睡着的时间已经过去了，我忽略了一些明显的东西。）

由于一些十六进制解码，我有一个`[]byte`长度为 8 的结果。我需要制作一个`uint64`才能使用它。我曾尝试使用[`binary.Uvarint()`](http://go.pkgdoc.org/encoding/binary#Uvarint), from`encoding/binary`这样做，但它似乎只使用数组中的第一个字节。考虑以下示例。

```
package main

import (
    "encoding/binary"
    "fmt"
)

func main() {
    array := []byte{0x00, 0x01, 0x08, 0x00, 0x08, 0x01, 0xab, 0x01}
    num, _ := binary.Uvarint(array[0:8])
    fmt.Printf("%v, %x\n", array, num)
} 
```

**[它在 play.golang.org 上。](http://play.golang.org/p/q0lCVvTfRD)**

当它运行时，它显示`num`为`0`，即使在十六进制中，它应该是`000108000801ab01`。此外，如果从 中捕获第二个值`binary.Uvarint()`，则它是从缓冲区读取的字节数，据我所知，它应该是 8，即使它实际上是 1。

我解释错了吗？如果是这样，我应该改用什么？

谢谢大家。:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-01T08:45:57.800

您正在使用一个函数进行解码，该函数的用途不是您需要的：

> Varints 是一种使用一个或多个字节对整数进行编码的方法；绝对值较小的数字占用较少的字节数。有关规范，请参阅 [http://code.google.com/apis/protocolbuffers/docs/encoding.html](http://code.google.com/apis/protocolbuffers/docs/encoding.html)。

它不是标准编码，而是一种非常具体的可变字节数编码。这就是为什么它在值小于 0x080 的第一个字节处停止。

正如斯蒂芬所指出的， binary.BigEndian 和 binary.LittleEndian 提供了有用的函数来直接解码：

```
type ByteOrder interface {
    Uint16([]byte) uint16
    Uint32([]byte) uint32
    Uint64([]byte) uint64
    PutUint16([]byte, uint16)
    PutUint32([]byte, uint32)
    PutUint64([]byte, uint64)
    String() string
} 
```

所以你可以使用

```
package main

import (
    "encoding/binary"
    "fmt"
)

func main() {
    array := []byte{0x00, 0x01, 0x08, 0x00, 0x08, 0x01, 0xab, 0x01}
    num := binary.LittleEndian.Uint64(array)
    fmt.Printf("%v, %x", array, num)
} 
```

或者（如果你想检查错误而不是恐慌，感谢 jimt 用直接解决方案指出这个问题）：

```
package main

import (
    "encoding/binary"
    "bytes"
    "fmt"
)

func main() {
    array := []byte{0x00, 0x01, 0x08, 0x00, 0x08, 0x01, 0xab, 0x01}
    var num uint64
    err := binary.Read(bytes.NewBuffer(array[:]), binary.LittleEndian, &num)
    fmt.Printf("%v, %x", array, num)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-14T04:10:21.223

如果不关心字节顺序，你可以试试这个：

```
arr := [8]byte{1,2,3,4,5,6,7,8}
num := *(*uint64)(unsafe.Pointer(&arr[0])) 
```

[http://play.golang.org/p/aM2r40ANQC](http://play.golang.org/p/aM2r40ANQC)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T08:38:28.200

如果您查看[Uvarint](http://weekly.golang.org/src/pkg/encoding/binary/varint.go?s=2073:2111#L50)的函数，您会发现它不像您期望的那样直接转换。

老实说，我还没有弄清楚它期望什么样的字节格式（见编辑）。

但是编写自己的代码几乎是微不足道的：

```
func Uvarint(buf []byte) (x uint64) {
    for i, b := range buf {
        x = x << 8 + uint64(b)
        if i == 7 {
            return
        }
    }
    return
} 
```

**编辑**

我不熟悉字节格式。它是一种可变宽度编码，其中每个字节的最高位是一个标志。
如果设置为 0，则该字节是序列中的最后一个。
如果设置为 1，则编码应继续下一个字节。

只有每个字节的低 7 位用于构建 uint64 值。第一个字节将设置 uint64 的最低 7 位，接下来的字节位 8-15 等。

# java - 多项和单选测试

> ID：13657234
> 
> 赞同：9
> 
> 时间：2012-12-01T07:02:56.060
> 
> 标签：java, android

我正在做单选和多选测试。

我有几个问题，每个问题有 4 个答案。

我正在改组答案，因为每个答案都分配给单选按钮。这就是我改组数组列表的方式，其中 Random 是带有项目的数组列表，而 r1,r2,r3,r4 是单选按钮。

```
random.add(val);
Collections.shuffle(random);

r1.setText(random.get(0));
r2.setText(random.get(1));
r3.setText(random.get(2));
r4.setText(random.get(3)); 
```

我能够以混乱的方式显示答案，但是当我选择答案时，我需要表明答案是正确的还是错误的。

```
Sample question and options.
1\. which language is used for android programming?
 A.PHP
 B.JAVA
 C.C
 D.C++ 
```

正确答案是 B 我需要显示正确答案是 B。

如何实现这一点。

**编辑：** 我试过这个：

每个单选按钮的 Onclick 分配值 A 并将该值与 xml 值进行比较，如果其正确显示正确但当我混乱时它将不起作用。

**编辑 2** xml

```
<Question no="1" text="Which Programming language is used in android develoment" type="SCA" noc="4" jumble="NO" correctans="PHP">
<choice a = "PHP" flag="A"> 
<choice b = "JAVA" flag="B"> 
<choice c = "C" flag="C"> 
<choice d = "C++" flag="D"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T05:57:52.783

You can create a hashmap with Option-isOptionCorrect pair. Like for your case:

```
HashMap<String, Boolean> choices = new HashMap<String, Boolean>();
choices.put("PHP", false);
choices.put("JAVA", true);
choices.put("C", false);
choices.put("C++", false); 
```

Now shuffle the key-value pairs. Your correct choice will be one which has value `true` in the HashMap.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T06:33:27.853

Egor 很清楚他的建议，但我会让你使用你当前的实现。

```
class Option{
      //You can add any other parameters if required.
      String optionText;
      boolean isAnswer;
}

// Use arraylist of Option class like this
`ArrayList<Option> options = new ArrayList<Option>();` // in your case random `// Now suffle it.
Collections.shuffle(options);
// get the user selected option and verify using.
if(options.get(userSelectedOptionPosition).isAnswer){
      //show "You are Correct!"
}else{
     // show "You are In correct!"
}`
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T12:00:33.960

这是一个有点幼稚的解决方案，但它应该可以工作。

```
class Question {
    String message;
    String answer;
    List<String> options; //"Java", "PHP", etc
} 
```

在您的 Question 对象中随机播放 Map 的键在您的单选按钮中，执行类似的操作`r1.setText(random.get(0))`

单击时，执行

```
String choice = null;
for (RadioButton rb : rBtns) {
    if (rb.isSelected) {
        choice = rb.getText(); break();
    }
}

if (choice.equals(question.getAnswer))
    return true; //correct
else
    return false; //wrong 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T14:50:09.083

您可以将答案保存在模型中的“随机”数组列表中，而不是纯字符串；

```
private class AnswerModel {
    string answer;
    boolean flag;

//... getters and setters...
} 
```

在这里，您可以将您真正答案的标志设置为 true，并将所有其他标志设置为 false。这样，如果答案正确，您可以简单地返回。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-01T07:19:05.953

这里最好的方法不是使用 操作`Strings`，而是创建一个`Question`类，该类将包含有关问题的所有信息：它的值、答案列表和正确答案的索引。解析 XML 时，创建`Question`对象列表，然后使用它们。不会有任何映射问题了。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-31T16:59:47.743

这里已经有几个很好的答案。但另一种选择是编写自己的 shuffle 函数。shuffle 算法是一个非常简单的算法，它在线性时间内运行，至少对于数组来说是这样。通过编写自己的 shuffle 函数，您可以跟踪正确答案的最终位置。

为了简单起见，我发布了代码，该代码返回洗牌集合中指定索引的新索引。该函数改变（改变）原始集合，所以这应该工作。

```
/**
 * @return Returns the new index of the element that was placed at correctIndex,
 *         or -1 if the correctIndex parameter was out of bounds.
 */
public int shuffleAnswers(Collection<String> collection, index correctIndex) {
    String[] shuffleArray = new String[collection.size()];
    int returnValue = -1;

    collection.toArray(shuffleArray); // Convert to array
    collection.clear(); // We have to add the elements again later

    // Pick random elements
    for (int i = shuffleArray.length; i > 0; i--) {
        int randIndex = Math.random() * i;
        if (returnValue == -1 && randIndex == correctIndex) {
            // This only works if elements are added to the end
            // So you may want to limit the function to ArrayLists or LinkedLists
            returnValue = collection.size();
        }

        // Add the randomly selected element to the collection
        collection.add(shuffleArray[randIndex]);

        // We must ensure that we don't lose elements
        // So we swap them down from the end
        shuffleArray[randIndex] = shuffleArray[i - 1];
    }

    return returnValue;
} 
```

请注意，就像评论说的那样，这仅适用于将元素添加到集合末尾的集合，并且从添加到集合的第一个到最后一个元素填充数组。

这可能比其他解决方案慢，但请注意，无论如何您都需要随机播放，因此它不会对运行速度产生太大影响。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-01T16:40:06.520

另一种选择是只拥有一个`correctAnswer`字符串，然后将用户的选择与字符串（使用`.equals()`）进行比较。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-01T12:59:09.733

这就是我要做的。由于您在 XML 文件中记住答案而不是答案位置，因此在选定的单选按钮上获取文本（在本例中为“PHP”、“Java”、“C++”或“C”）并将其与正确答案进行比较.

混杂不能影响这一点，否则你做错了什么。

# asp.net - 通过邮件服务器 Asp.net mvc4 发送邮件

> ID：13657235
> 
> 赞同：1
> 
> 时间：2012-12-01T07:03:13.177
> 
> 标签：asp.net, email, asp.net-mvc-4

我正在尝试通过邮件服务器发送邮件（在 fatcow 中可用）。

```
Username:    info@efernssolutions.com
SMTP Server:     smtp.hostname.com
SMTP Port:   587 
```

我使用以下代码发送邮件，

```
 if (ModelState.IsValid)
 {
   MailMessage message = new MailMessage();
     try
        {
                message.To.Add(new MailAddress("kishore.eferns@gmail.com"));
                message.From = new MailAddress("info@efernssolutions.com");
                message.Subject = "Test mail";
                message.Body = "this is the mail sended through my c#.net program";
                message.BodyEncoding = System.Text.Encoding.UTF8;
                message.SubjectEncoding = System.Text.Encoding.UTF8;

                SmtpClient client = new SmtpClient();
                client.Port = 587; 
                client.Host = "smtp.hostname.com";
                System.Net.NetworkCredential nc = new System.Net.NetworkCredential("info@efernssolutions.com", "password");// is u are using Gmail
                client.EnableSsl = true;
                client.UseDefaultCredentials = false;
                client.Credentials = nc;
                ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(ValidateServerCertificate);
                client.Send(message);
            }
            catch (Exception ex)
            {
                ;
            }
        } 
```

当我使用 gmail 服务器时，代码工作正常，我收到了邮件。

但它不适用于我的电子邮件服务器。

我得到错误，

```
the remote certificate is invalid according to the validation procedure 
```

有什么事情要做才能让它发挥作用吗？

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:03:13.263

作为第一次检查，我建议检查您的 SSL 证书是否正确安装在您的服务器上

# c# - 条码库存管理

> ID：13657236
> 
> 赞同：1
> 
> 时间：2012-12-01T07:03:28.653
> 
> 标签：c#, barcode, barcode-printing

我正在为一家珠宝店创建一个库存管理应用程序。我已经完成了没有条形码的库存的添加和销售。现在他们希望我将其与条形码集成。

当我添加库存时，应该像这样打印条形码： ![在此处输入图像描述](../Images/f530b7a23d54c58c535a9b12a0fcbf25.png)

我正在做的条目是这样的：

![在此处输入图像描述](../Images/ca6bbe254a55c1799aaf13f4fd14c897.png)

一旦我点击保存按钮，股票就会被添加到数据库中。如何为条形码编写代码以打印？

我现在使用的代码在这里：

```
 public partial class FrmAddNewItem : Form
{
    public static bool isEditMode = false;
    private void btnReset_Click(object sender, EventArgs e)
    {
        addComboItems();
        Utility.resetForm(groupBox1);
        isEditMode = false;
        btnStartInvoice.Enabled = true;
        btnSave.Text = "Save";
        generateBarCode();
    }

    private void generateBarCode()
    {
        Random random = new Random();
        String barCode = random.Next(1000000000, int.MaxValue).ToString();
        String strCmd = "select itemCode from tblItemDetail where itemCode='" + barCode + "'";
        while (DBUtil.isRecordExist(strCmd))
        {
            barCode = random.Next(1000000000, int.MaxValue).ToString();
            strCmd = "select itemCode from tblItemDetail where itemCode='" + barCode + "'";
        }
        txtBarCode.Text = barCode;
        lblBarCode.Text = barCode;
        lblBarCode.Font = new Font("Barcode Font", 48);
    }

    private void addComboItems()
    {
        cmboMakingType.Items.Clear();
        cmboStoneRateType.Items.Clear();
        cmboVendorName.Items.Clear();
        cmboVendorId.Items.Clear();

        cmboMakingType.Items.Add(Constants.COMBO_DEFAULT);
        cmboStoneRateType.Items.Add(Constants.COMBO_DEFAULT);
        cmboVendorName.Items.Add(Constants.COMBO_DEFAULT);
        cmboVendorId.Items.Add(Constants.COMBO_DEFAULT);

        cmboMakingType.Items.Add("Pc");
        cmboMakingType.Items.Add("Gm");
        cmboMakingType.Items.Add("Tot");

        cmboStoneRateType.Items.Add("Ct");
        cmboStoneRateType.Items.Add("Pc");
        cmboStoneRateType.Items.Add("Tot");

        String strCmd = "select fullName from tblMemberDetail where isActive='TRUE' and ucase(memberType)='VENDOR'";
        String[] strVendorsName = DBUtil.getAllRecords(strCmd);
        strCmd = "select memberId from tblMemberDetail where isActive='TRUE' and ucase(memberType)='VENDOR'";
        String[] strVendorsId = DBUtil.getAllRecords(strCmd);
        if (strVendorsName != null)
        {
            foreach (String strName in strVendorsName)
                cmboVendorName.Items.Add(strName);
            foreach (String strId in strVendorsId)
                cmboVendorId.Items.Add(strId);
        }
    }

    private void btnSave_Click(object sender, EventArgs e)
    {
        String strMsg = "";
        if (txtItemCode.Text.Trim() == "")
        {
            strMsg = "Please enter the Item Code of the item to be added. And please try again.";
            MessageBox.Show(strMsg, "Add New Item", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            return;
        }
        String strCmd = "select itemName from tblItemCodeDetail where itemCode='" + txtItemCode.Text + "'";
        strMsg = "";
        if (!DBUtil.isRecordExist(strCmd))
        {
            strMsg = "Item code does not exist. Please enter a valid item code and try again.";
            MessageBox.Show(strMsg, "Add New Item", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            txtItemCode.SelectAll();
            txtItemCode.Focus();
            return;
        }
        foreach (Control ctrl in groupBox1.Controls)
        {
            if (ctrl is TextBox && ctrl.Text == "")
                ctrl.Text = "0";
        }
        if (cmboMakingType.SelectedIndex == 0 || cmboStoneRateType.SelectedIndex == 0)
        {
            strMsg = "Please select the making type and the stone rate type from the dropdown menu.";
            MessageBox.Show(strMsg, "Add New Item", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            return;
        }
        if (cmboVendorName.SelectedIndex == 0)
        {
            strMsg = "Please select the vendor from whom you are purchasing this item.";
            MessageBox.Show(strMsg, "Add New Item", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            cmboVendorName.Focus();
            return;
        }
        strMsg = "Are you sure all the details provided are correct and you want to add/update this item to the stock?";
        if (MessageBox.Show(strMsg, "Add / Update New Item", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.No)
            return;
        if (isEditMode)
            doUpdate();
        else
            doAdding();
        btnReset_Click(null, null);
    }

    private void doUpdate()
    {
        String[] commands = { "update tblItemDetail set originalTunch='" + txtOriginalTunch.Text + "', purchaseTunch='" + txtPurchaseTunch.Text + "', itemCode='" + txtItemCode.Text + "', grossWeight='" + txtGrossWeight.Text + "', making='" + txtMaking.Text + "', makingType='" + cmboMakingType.Text + "', quantity='" + txtPieces.Text + "', stoneWeight='" + txtStoneWeight.Text + "', stoneRate='" + txtStoneRate.Text + "', stoneRateType='" + cmboStoneRateType.Text + "', stoneQuantity='" + txtStonePieces.Text + "', vendorId='" + cmboVendorId.Text + "', purchaseRate='" + txtPurchaseRate.Text + "', 'TRUE', 'NONE')" };
        String strMsg = "";
        if (!DBUtil.executeCommands(commands))
        {
            strMsg = "There occured some error while updating existing item to the stock. Please re-check all the details and try again later.\nIf the problem persists please contact service provider.";
            MessageBox.Show(strMsg, "Update existing Item", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            return;
        }
        strMsg = "Item updated successfully to the stock.";
        MessageBox.Show(strMsg, "Update existing Item", MessageBoxButtons.OK, MessageBoxIcon.Information);
    }

    private void doAdding()
    {
        String[] commands = { "Insert into tblItemDetail values('" + txtBarCode.Text + "', '" + txtOriginalTunch.Text + "', '" + txtPurchaseTunch.Text + "', '" + txtItemCode.Text + "', '" + txtGrossWeight.Text + "', '" + txtMaking.Text + "', '" + cmboMakingType.Text + "', '" + txtPieces.Text + "', '" + txtStoneWeight.Text + "', '" + txtStoneRate.Text + "', '" + cmboStoneRateType.Text + "', '" + txtStonePieces.Text + "', '" + cmboVendorId.Text + "', '" + txtPurchaseRate.Text + "', 'TRUE', 'NONE', '" + invoiceNumber + "', '" + invoiceDate + "')" };
        String strMsg = "";
        if (!DBUtil.executeCommands(commands))
        {
            strMsg = "There occured some error while adding new item to the stock. Please re-check all the details and try again later.\nIf the problem persists please contact service provider.";
            MessageBox.Show(strMsg, "Add New Item", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            return;
        }
        strMsg = "New Item added successfully to the stock.";
        MessageBox.Show(strMsg, "Add New Item", MessageBoxButtons.OK, MessageBoxIcon.Information);
    }

    private void FrmAddNewItem_Load(object sender, EventArgs e)
    {
        btnReset_Click(sender, e);
    }
} 
```

我只需要帮助打印出那个条形码，这样他们就可以把这个条形码贴在他们的物品上。他们将有条码打印机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:13:30.477

拉维，

您可以在表格上显示条形码，并使用 Print Form 技术打印出条形码！

请参阅以下链接：
[在 C#](http://www.c-sharpcorner.com/UploadFile/srajlaxmi/printing-windows-form-in-C-Sharp-net/)
[打印窗体中打印 Windows 窗体没有 API的 C#](http://www.codeproject.com/Articles/6284/Print-Windows-Forms-w-o-using-API)
[MSDN：如何打印 Windows 窗体](http://msdn.microsoft.com/en-us/library/6he9hz8c.aspx)

**更新：**
这些链接也可能有帮助：
[在 .NET 中获取默认打印机的最佳方法是什么](https://stackoverflow.com/questions/86138/whats-the-best-way-to-get-the-default-printer-in-net)
[如何在 C# 中设置 Windows 默认打印机？](https://stackoverflow.com/questions/971604/how-do-i-set-the-windows-default-printer-in-c)

# android - 错误的 Parcelable 异常

> ID：13657238
> 
> 赞同：2
> 
> 时间：2012-12-01T07:03:39.077
> 
> 标签：android, fragment, android-fragmentactivity, badparcelableexception

我已经使用 Fragment 与 Fragment Activity 进行通信，并且这个 Fragment Activity 传递它的引用来处理 Fragment 中的点击事件，如下所示。

```
 Bundle tempBundle = new Bundle();
tempBundle.putParcelable("Interface", (Parcelable) new ClickHandler()); 
```

在哪里

```
class ClickHandler implements ItemClickListener, Parcelable
{
 } 
```

这工作得很好，当我浏览应用程序时，只有当我退出应用程序（按 HOME 键）和几分钟后我从最近使用的应用程序返回到应用程序时才导致问题（注意回来应用程序立即不会导致异常）。

有没有人遇到过这样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T05:48:19.390

我也遇到了这个问题，我花了很多时间才弄清楚错误发生在哪里。我所做的是遵循这个[问题](https://stackoverflow.com/questions/13997550/unmarshalling-errors-in-android-app-with-custom-parcelable-classes "问题")的已接受答案中的建议。

我做的第一步是寻找应用程序正在从`savedInstanceState`与发生崩溃的类相关的数据中恢复数据的实例。`savedInstanceState`我只是按照我提供的链接中的建议设置了这些捆绑包的类加载器。虽然第一次没有用。崩溃仍然发生，但它已更改其错误日志堆栈跟踪，因此我的代码中没有任何行被指出。然后我在我的自定义 parcelable 对象中寻找可能的空值，并将它们设置为非空值。这可能会很痛苦，尤其是当您在代码中的某些地方检查 null 时。你只需要咬紧牙关去做，因为显然，Android 不喜欢 parcelables 中的空值。

做了这两个之后，它仍然对我不起作用。所以我看得更远，我注意到我实际上是从适配器中的捆绑包中恢复实例。一些适配器会这样做，例如，`FragmentStatePagerAdapter`. 我只是设置了那个包的类加载器，然后它就为我解决了。

# node.js - 将 Stylus 文件输出到 express3 中的自定义目录

> ID：13657240
> 
> 赞同：4
> 
> 时间：2012-12-01T07:03:43.167
> 
> 标签：node.js, express, stylus

我有我的项目，并且正在将一些代码从 express2.5.7 移植到 express3.0.3。我认为这几乎是 1:1 传输，但我遇到了无法将我的手写笔文件编译到我指定的目录的问题。这是我的基本 app.js 设置：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path')
  , nib = require('nib')
  , bootstrap = require('bootstrap-stylus')
  , stylus = require('stylus');

var app = module.exports = express();

app.configure('dev', function(){
  var stylusMiddleware = stylus.middleware({
    src: __dirname + '/stylus/', // .styl files are located in `/stylus`
    dest: __dirname + '/public/css/', // .styl resources are compiled `/css/*.css`
    debug: true,
    compile: function(str, path) { // optional, but recommended
      console.log(path);
      return stylus(str)
        .set('filename', path)
        //.set('warn', true)
        .set('compress', true)
        .use(bootstrap())
    }
  });
  app.use(express.logger('dev'));
  app.use(stylusMiddleware);  
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true })); 
  app.set('view options', { pretty: true });
});

app.configure('prod', function(){
  app.use(express.errorHandler());
});

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

我已经测试了`app.configure`这些东西，它正在通过正确的方法（'dev'和只使用一个函数的配置）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T08:15:17.867

我也尝试设置自定义`src`，`dest`但我不能。为了寻找解决方案，我查看了 Stylus 源代码。用两个词来说`styl`，`css`文件的路径应该是相似的。如果链接到`css`html 中的文件看起来像

```
<link rel="stylesheet" href="css/app.css"> 
```

它的物理路径是

```
public/css/app.css 
```

那么你的`styl`文件应该位于

```
stylus/css/app.styl 
```

和 Express 配置应该是

```
app.configure('dev', function () {
  ...
  app.use(stylus.middleware({
    src: __dirname + '/stylus/',
    dest: __dirname + '/public/',
    compile: function(str, path) { ... }
  }));
  ...
}); 
```

我在[源代码](https://github.com/LearnBoost/stylus/blob/master/lib/middleware.js)中看到的。

Stylus 解析所有请求并仅选择那些被请求的`css`文件。然后它将`css`url 的路径名与您的`dest`选项结合起来，替换`css`为`styl`路径名并将结果与​​您的`src`选项结合起来：

```
// Middleware
return function stylus(req, res, next){
  if ('GET' != req.method && 'HEAD' != req.method) return next();
  var path = url.parse(req.url).pathname;
  if (/\.css$/.test(path)) {
    var cssPath = join(dest, path)
      , stylusPath = join(src, path.replace('.css', '.styl'));

    // ...

  } else {
    next();
  }
} 
```

# java - 如何在ejb中依次运行两个用@Schedule注释的方法

> ID：13657243
> 
> 赞同：1
> 
> 时间：2012-12-01T07:03:55.727
> 
> 标签：java, ejb-3.1

我必须使用 ejb 中的 @schedule 注释每 10 分钟一个接一个地运行两个方法。

我的代码是这样的：

```
@Schedule(minute="*/10")
public void mth1() { 
    System.out.println("welcome");
}

@Schedule(minute="*/10")    
public void mth2() {
    System.out.println("hello");
} 
```

如何进行？

感谢您的回复..但是，两个 mthds 的计时器分别设置为 10 分钟。第 1 个 mthd 完成后，第 2 个 mthd 开始执行。如果我在第一个 mthd 中调用第二个 mthd，两者都在 10 分钟内运行 ..我想每个运行 10 分钟

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:08:16.617

If you want to have mth2 executed after mth1, you can just call mth2 at the end of mth1 and remove the Schedule annotation from mth2.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:11:38.707

您可以尝试下面的代码让计时器一个接一个地执行，延迟特定的时间间隔。

```
@Schedule(minute="*/10")
public void mth1() { 
    System.out.println("welcome");

    //-- Creating a timer manually for mth2
    timerService.createTimer(duration, info);

} 
```

在指定的时间间隔之后，将调用超时方法，并用@Timeout 注解标记 meth2()。因此，meth1() 退出时，将在 x 单位持续时间后调用 meth2()。

```
@Timeout
public void mth2(Timer timer){
    System.out.println("hello");
} 
```

# linux - Get ip add and hostname of machines using script

> ID：13657245
> 
> 赞同：0
> 
> 时间：2012-12-01T07:04:06.143
> 
> 标签：linux, bash, shell, powershell

I would like to get ip add and hostname of machines when i start them. i already installed 3 virtual machine on vmware with dynamic ip . its form: xxxx.xxxx.xxxx.xxxx. hostname.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:16:22.230

尝试获取 Ipdata 功能：

```
Function Get-IPData {
#this function assumes admin credentials
[cmdletBinding()]
Param(
    [Parameter(Position=0,ValueFromPipeline=$True,ValueFromPipelineByPropertyName=$True)]
    [ValidateNotNullOrEmpty()]
    [Alias("name")]
    [string[]]$computername=$env:computername
)

Process {
    ForEach ($computer in $computername) {
        Write-Verbose "Querying $($computer.ToUpper())"
        Try 
        {
        #get NICS that are IP and DHCP enabled
         Get-WMIObject -Class win32_networkadapterconfiguration -computername $Computer `
        -Filter "IPEnabled='TRUE' AND DHCPEnabled='TRUE'" -ErrorAction "Stop" | 
        Select Description,DNSHostname,
        @{Name="IPAddress";Expression={$_.IPAddress[0]}},
        @{Name="SubnetMask";Expression={$_.IPSubnet[0]}},
        @{Name="DefaultGateway";Expression={$_.DefaultIPGateway[0]}},DNSDomain,
        @{Name="PrimaryDNS";Expression={$_.DNSServerSearchOrder[0]}},DHCPServer,
        @{Name="DHCPLease";Expression={$_.ConvertToDateTime($_.DHCPLeaseObtained)}},
        @{Name="DHCPExpires";Expression={$_.ConvertToDateTime($_.DHCPLeaseExpires)}},
        @{Name="DHCPTimeToLive";Expression={ $_.ConvertToDateTime($_.DHCPLeaseExpires) - (Get-Date)}},
        MACAddress,
        @{Name="Speed";Expression={
        #use an Associators Of query to get the NIC
          $nic=Get-WmiObject -query "associators of {Win32_NetworkAdapterConfiguration.Index=$($_.index)}" -computername $computer
          $nic.Speed
          }}
    } #close Try
    Catch
        {
            Write-Warning "Failed to retrieve IP configuration from $($computer.ToUpper())"
            Write-Warning $_.Exception.Message

        } #close Catch
    } #close ForEach
 } #close Process
} #end function 
```

# gwt - How can I get the text in a EmptyTableWidget in GWT CellTable

> ID：13657252
> 
> 赞同：1
> 
> 时间：2012-12-01T07:04:55.733
> 
> 标签：gwt, gwt2, gwt-2.2-celltable, celltable, gwt-celltable

My code is

```
CellTable celltable = new CellTable();    
celltable.setEmptyTableWidget(new Label("No")); 
```

Here I want to get this "No" from CellTable

I tried as `cellTable.getEmptyTableWidget()).getElement().getInnerText()`

But I don't know how to get it.

Can you help me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:28:26.347

您的选择`cellTable.getEmptyTableWidget()`已经是正确的。之后您需要将 Widget 转换为您添加的内容（在您的情况下`Label`）。所以做这样的事情：

```
((Label)celltable.getEmptyTableWidget()).getText() 
```

`no`从您的餐桌上接收。

问候，噪音

# ant - Building war file for Struts2 using ANT Error

> ID：13657254
> 
> 赞同：0
> 
> 时间：2012-12-01T07:05:25.483
> 
> 标签：ant, struts2, build.xml

I am having problem generating the war file correctly with ANT's build.xml for Struts2.

My problem was for the struts.xml, I can't seem to be able to put it to the right place even though I tried to use the tag.

What is the correct way of putting it into the war file? Here is my code (removed the tag as it wasn't working):

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Struts2Proj" default="war">

<property name= "build.dir" value="build"/>
<property name= "src.dir" value="src"/>
<property name= "lib.home" value="WebContent/WEB-INF/lib"/>

<target name="clean" description="Clean output directories">
    <delete>
        <fileset dir="classes">
            <include name="**/*.class"/>
        </fileset>
    </delete>
</target>

<target name="build" description="Compile source tree java files">
    <mkdir dir="${build.dir}"/>
    <javac src ="${src.dir}" destdir="${build.dir}" >
       <classpath>
           <path>
                <fileset dir="${lib.home}" />                  
          </path>
        </classpath>

    </javac>
</target>

<target name="war">
    <war destfile="Struts2Project.war" webxml="WebContent/WEB-INF/web.xml">
        <fileset dir="WebContent">
             <include name="**/*.*"/>
        </fileset>
        <lib dir="${lib.home}" /> 
        <classes dir="build/classes"/>

    </war>
</target>

</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:11:25.040

问题似乎出在您的`build`目标上。您没有将配置文件（如`struts.xml`）复制到构建路径。请参阅此 ANT 教程：[http](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html#config-files) ://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html#config-files 。

例子：

```
<target name="compile">
    <mkdir dir="${classes.dir}"/>
    <javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="classpath"/>
    <copy todir="${classes.dir}">
        <fileset dir="${src.dir}" excludes="**/*.java"/>
    </copy>
</target> 
```

# android - Calimero knx api on Android stop working

> ID：13657256
> 
> 赞同：1
> 
> 时间：2012-12-01T07:05:40.903
> 
> 标签：android, knx

I wrote this simple code in Java for Android to connect to KNX bus over Ethernet (WiFi). Unfortunately not working

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
 }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected void onStart() {

    super.onStart();
    /*Pokus pro spojeni*/
    setContentView(R.layout.activity_main); 
    Button actButton = (Button) findViewById(R.id.button1); 
    int a=1;
    actButton.setText("1234" + Integer.toString(a));
    new NewComm().execute("Sending.....");
    Log.i ("MyTag","Starting.....");
  }
}

final  class NewComm extends AsyncTask<String, Void, Void>{

@Override
protected Void doInBackground(String... text) {

            String Enable = "Enalbe";
    String Disable = "Disable";
    String Address = "1/5/217";
    final CEMI_Connection tunnel;
    try {
        /* Create a new connection using CEMI_Connection
         *  to KNXnet/IP interface (in this case the ip
         *  192.168.1.3), with the default port
        */

        System.out.println("vsm> Connecting.....");
        tunnel = new CEMI_Connection(
                new InetSocketAddress("192.168.0.110",
                        EIBNETIP_Constants.EIBNETIP_PORT_NUMBER),
                        new TunnellingConnectionType());

        /* Just saying that it connected. In case of an error,
         *              
         *              
         * this is not executed, so you know it was unable to connect
         */
        System.out.println("Connected.");
        /* Create the knx device (a port from a relay for example)             
         *   and declare it as a boolean device, and it's a Enable/Disable             
         *   device. In the API docs there are all kinds avaliable 
        */

        PointPDUXlator object = PDUXlatorList.getPointPDUXlator(
                PDUXlatorList.TYPE_BOOLEAN[0],
                PointPDUXlator_Boolean.DPT_ENABLE[0]);

        /* Declare that we are going to write some info in the "Address"
         *              *  and this info is writed in the string Enable. To disable just
         *                            *  change the variable             
         */  

        object.setServiceType(PointPDUXlator.A_GROUPVALUE_WRITE);            
        object.setASDUfromString(Enable);

        /* Create the message to be sent to device
         * The device KNX address was declared in the begining
        */ 

        CEMI_L_DATA message = new CEMI_L_DATA(
                CEMI_L_DATA.MC_L_DATAREQ,
                new EIB_Address(),
                new EIB_Address(Address),
                object.getAPDUByteArray());
        /* Send the message using the connection "tunnel"
        */            
        tunnel.sendFrame(message, CEMI_Connection.WAIT_FOR_CONFIRM);

        /* Print that the message was sent
         */
        System.out.println("Message Sent to " + Address + ": " + Enable);

        /* Disconnect from the device and print it to the screen             
         * If your device can handle more than 1 Tunneling connection you             
         * can let it connected, but in my case I use different devices             
         * to control it, so I always have to disconnect after doing
         * anything             
         */ 

        tunnel.disconnect(null);
        System.out.println("Disconnected.");
        }        catch (EICLException ex) {
                ex.printStackTrace();
                System.out.println("vsm> Connection exception! "+ex.getMessage());
                    }  // connection error
    return null;

}

} 
```

This code can not run on my android mobile phone. If I run it the program failed with message "application stop working...." on my android mobile phone. But on PC the similar code (content of doInBackground() ) working good. Working good it mean that I am able to receive KNX connecting UDP packet on another computer.

On Android device I can send simple UDP packet over wifi - that mean wifi connection and basic code in Android Java is working.

Can anybody experienced examine my code and give me a advice where is the problem? Is part of code with calimero API using correct? It was vary helpful for me. Can Calimero api works in android OS? Does anybody have experiences with that (I think so, according to posts here in forum).

LogCat content:

```
12-01 07:48:03.452: E/dalvikvm(15234): Could not find class 'tuwien.auto.eicl.CEMI_Connection', referenced from method com.example.testapp.NewComm.doInBackground

12-01 07:48:03.452: W/dalvikvm(15234): VFY: unable to resolve new-instance 550 (Ltuwien/auto/eicl/CEMI_Connection;) in Lcom/example/testapp/NewComm;

12-01 07:48:03.452: D/dalvikvm(15234): VFY: replacing opcode 0x22 at 0x000e

12-01 07:48:03.452: W/dalvikvm(15234): VFY: unable to resolve exception class 555 
(Ltuwien/auto/eicl/util/EICLException;)

12-01 07:48:03.452: W/dalvikvm(15234): VFY: unable to find exception handler at addr 0x80

12-01 07:48:03.452: W/dalvikvm(15234): VFY:  rejected Lcom/example/testapp/NewComm;.doInBackground ([Ljava/lang/String;)Ljava/lang/Void;

12-01 07:48:03.452: W/dalvikvm(15234): VFY:  rejecting opcode 0x0d at 0x0080

12-01 07:48:03.452: W/dalvikvm(15234): VFY:  rejected Lcom/example/testapp/NewComm;.doInBackground ([Ljava/lang/String;)Ljava/lang/Void;

12-01 07:48:03.462: W/dalvikvm(15234): Verifier rejected class Lcom/example/testapp/NewComm;

12-01 07:48:03.462: D/AndroidRuntime(15234): Shutting down VM
12-01 07:48:03.462: W/dalvikvm(15234): threadid=1: thread exiting with uncaught exception (group=0x40a95228)

12-01 07:48:03.472: E/AndroidRuntime(15234): FATAL EXCEPTION: main

12-01 07:48:03.472: E/AndroidRuntime(15234): java.lang.VerifyError: com/example/testapp/NewComm

12-01 07:48:03.472: E/AndroidRuntime(15234):    at com.example.testapp.MainActivity.onStart(MainActivity.java:48)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1195)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.app.Activity.performStart(Activity.java:4548)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2178)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.app.ActivityThread.access$600(ActivityThread.java:139)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.os.Handler.dispatchMessage(Handler.java:99)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.os.Looper.loop(Looper.java:156)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at android.app.ActivityThread.main(ActivityThread.java:4977)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at java.lang.reflect.Method.invokeNative(Native Method)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at java.lang.reflect.Method.invoke(Method.java:511)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)

12-01 07:48:03.472: E/AndroidRuntime(15234):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:11:04.293

同样的问题也发生在我身上。您需要检查您导入到项目中的 jar 文件，您可以从：YourProjectName(右键单击) -> 属性 -> Java BuildPath -> 排序和导出

# objective-c - 在 UIImageView 之上的 UITextView 中为文本设置动画

> ID：13657262
> 
> 赞同：0
> 
> 时间：2012-12-01T07:06:25.777
> 
> 标签：objective-c, ios, animation

我正在使用 Interface Builder 为 iOS6 编写一个应用程序，它在 UIImageView 顶部的 UITextView 中显示文本（来自文本数组）。用户可以向右或向左滑动以更改数组中的另一个文本。

现在我正在使用以下代码：

```
 CATransition *transition = [CATransition animation];
    transition.duration = 0.25;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush;
    transition.subtype =kCATransitionFromRight;
    transition.delegate = self;
    [self.view.layer addAnimation:transition forKey:nil];
    [self.view addSubview:self.text]; 
```

当用户滑动，UITextView，UIImageView，和所有的时候，整个屏幕都是动画的。当用户滑动但将 UIImageView 留在原位时，如何仅使文本左右移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:14:55.353

使用此动画向左移动：

```
 [UIView animateWithDuration:1 
                 animations:^{
                     [yourTextView setFrame:CRectMake(-yourTextView.frame.size.width,yourTextView.frame.origin.y,yourTextView.frame.size.width,yourTextView.frame.size.height)];
                 }
                 completion:^(BOOL finished){
                     //do something after completion if needed
                     //new text to uitextView.
                 }]; 
```

使用此动画向右移动：

```
[UIView animateWithDuration:1 
                 animations:^{
                     [yourTextView setFrame:CRectMake(self.view.frame.size.width+yourTextView.frame.size.width,yourTextView.frame.origin.y,yourTextView.frame.size.width,yourTextView.frame.size.height)];
                 }
                 completion:^(BOOL finished){
                     //do something after completion if needed
                     //new text to uitextView.
                 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:49:32.780

使用 UITextview 的图层添加动画。`[YourTextView.layer addAnimation:transition forKey:nil];`

# python - Why is the "divide and conquer" method of computing factorials so fast for large ints?

> ID：13657265
> 
> 赞同：7
> 
> 时间：2012-12-01T07:06:36.830
> 
> 标签：python, factorial, divide-and-conquer

I recently decided to look at factorial algorithms for large integers, and this "divide and conquer" algorithm is faster than a simple iterative approach and the prime-factoring approach:

```
def multiply_range(n, m):
    print n, m
    if n == m:
        return n
    if m < n:
        return 1
    else:
        return multiply_range(n, (n+m)/2) * multiply_range((n+m)/2+1, m)

def factorial(n):
    return multiply_range(1, n) 
```

I understand why the algorithm works, it just breaks the multiplication into smaller parts recursively. What I don't understand is why this method is faster.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T16:01:44.743

与@NPE 的回答相反，您的方法**更快**，仅适用于非常大的数字。对我来说，我开始看到分治法在输入 ~10^4 时变得更快。在 10^6 及以上，没有可比性，传统循环惨遭失败。

我不是硬件乘法器方面的专家，我希望有人可以对此进行扩展，但我的理解是乘法是逐位数进行的，就像我们在小学时所教的那样。

传统的阶乘循环将从小数字开始，结果不断增长。最后，您将一个巨大的数字与一个相对较小的数字相乘，由于数字不匹配，这是一个昂贵的计算。

前任。相比

```
reduce(operator.mul, range(1,10**5))
reduce(operator.mul, range(10**5,1,-1)) 
```

第二个比较慢，因为结果增长很快，导致更快的计算成本更高。

对于大数，您的方法比其中任何一个都快几个数量级，因为它将阶乘划分为类似大小的部分。子结果具有相似的位数并且乘法速度更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T07:11:02.410

简短的回答是你错了。它不是很快：

```
In [34]: %timeit factorial(100)
10000 loops, best of 3: 57.6 us per loop

In [35]: %timeit reduce(operator.mul, range(1, 101))
100000 loops, best of 3: 19.9 us per loop 
```

换句话说，它比简单的单线慢大约三倍。

对于较小的值，`n`差异更为显着。

# java - How to deploy Web Application in Tomcat7 using Eclipse Indigo?

> ID：13657267
> 
> 赞同：1
> 
> 时间：2012-12-01T07:06:48.387
> 
> 标签：java, eclipse, apache, tomcat

Can any one tell how would I deploy my `Web Application` in `Tomcat7` using `Eclipse Indigo`. When I manually create `WAR` and paste it in `WebApps/ROOT` then it works. But in`Eclipse IDE`, server started successfully but not able to deploy `war/web application`. I also added my`Web Application using Add/Remove Server properties` but all in vain. Only `Apache server startUp` page shown. Also when I double click `Server` My `Server Locations` tab is disabled. I don't know WHY ?

Secondly by default `apache server access any jsp direct from WEBAPPS/abc.jsp or WEBAPPS/ROOT/abc.jsp`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:16:36.023

看来您`tomcat/web.xml`的配置不正确。请按照以下步骤使其工作 -

1.  首先从 Eclipse 中的服务器选项卡中删除服务器。
2.  然后从向导中添加新服务器 - 它通常会要求您提供 Tomcat 安装目录的路径 -`C:\Program Files\Apache Software Foundation`
3.  在最后一步时，您将提示一个对话框，列出所有打开的 eclipse 项目，以添加到 tomcat 环境中。
4.  单击完成并清理/构建项目。
5.  检查 web.xml，您的欢迎文件已正确添加。（通常在 WebContent 目录下）

希望这对你有用。

另请注意，在开发任何应用程序时，您不需要创建 WAR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:20:10.313

您右键单击服务器选项卡中的 tomcat 图标，然后单击属性。通常单击“切换位置”按钮，然后应用并确定。现在双击 Tomcat 图标并查看您的服务器位置现在已启用。然后单击第二个单选按钮并保存。然后再次尝试部署。它应该工作。

# php - 将类定义发送到 PHP 中的函数

> ID：13657268
> 
> 赞同：0
> 
> 时间：2012-12-01T07:06:48.420
> 
> 标签：php, oop, function, arguments, overriding

我正在尝试在 PHP 中完成以下操作：

```
// Some interface type thing
class Action {
   // Meant to be overridden
   public function doit(){ return null; }
}

class ActionPerformer {
   public function perform(Action $action) {
      $action->doit();
   }
}

$ap = new ActionPerformer();

// *** What I'm trying to do/simulate *** //
//
// But returns:  Parse error: syntax error, unexpected '{' in 
// <file> on line 19
//
$ap->perform(new Action(){ // <-- This is line #19

  @Override
  public function doit() {
     return "Custom action";
  }
}); 
```

有什么想法或见解吗？

提前致谢

**编辑**

我知道我可以扩展 Action 并覆盖我想要的函数，然后将新类作为参数传递。我正在尝试做的是模仿 Java 中通常所做的事情，只需将原始类与重写的方法一起发送，因此我不必创建一个全新的类来将它传递给一个函数一次。

**编辑**

我想到了一种有点笨拙的方法，但是使用闭包可以满足我的需要：

```
class Action {
   private $isOverridden;
   private $func;

   public function __construct($func = null) {
      $this->isOverridden = false;

      if (!is_null($func)) {
         $this->isOverridden = true;
         $this->func = $func;
      }
   }

   // Meant to be overridden
   public function doit(){ 
      if ($this->isOverridden)
         return $this->func->__invoke();

      return "='("; 
   }
}

// class ActionPerformer remains the same

$ap = new ActionPerformer();
echo $ap->perform(new Action(function(){ return "=)";}));
echo $ap->perform(new Action(function(){ return "=|";}));
echo $ap->perform(new Action(function(){ return "=P";}));
echo $ap->perform(new Action(function(){ return "=O";})); 
```

尽管如此，我的主要目标是模仿与 Java 中完全相同的行为，在那里我可以动态地覆盖多个方法......仍然欢迎想法和/或见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:09:17.033

```
class ExtendedAction extends Action {

    public function doit() {
        return "Custom action";
    }

}

$ap->perform(new ExtendedAction); 
```

您必须声明一个常规的新类，它可以是`extend`您的基类。你不能像你正在尝试的那样即时执行此操作。

> 我正在尝试做的是模仿 Java 中通常所做的事情，并使用被覆盖的方法发送原始类......

这在 PHP 中是不可能的。

# android - fetch multiple images from url in android?

> ID：13657269
> 
> 赞同：0
> 
> 时间：2012-12-01T07:06:55.973
> 
> 标签：android

> **Possible Duplicate:**
> [how to implement lazy loading of images in gridview](https://stackoverflow.com/questions/13626313/how-to-implement-lazy-loading-of-images-in-gridview)

How to fetch multiple images from url using Drawable in android?

```
private Drawable LoadImageFromWebOperations(String url) {
        try {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "icon");
            return d;
        } catch (Exception e) {
            System.out.println("Exc=" + e);
            return null;
        }
    } 
```

I'm using this function to return drawable image but I'm not getting how to bind list of images to gridview..

Please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:14:39.670

只需将 url 提供给“imgaeUrl”字段

```
URL url = new URL(imageUrl);
HttpURLConnection connection  = (HttpURLConnection) url.openConnection();

InputStream is = connection.getInputStream();
Bitmap img = BitmapFactory.decodeStream(is);  

imageView.setImageBitmap(img ); 
```

并设置图像视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:33:13.043

您可以查看此[http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)。它可以带领你

# php - 使视图源中的 html 出现在每一行

> ID：13657276
> 
> 赞同：1
> 
> 时间：2012-12-01T07:08:58.583
> 
> 标签：php, html

如何使浏览器的视图源中的 html 出现在每一行上？我正在使用 php 使用这样的模板生成我的网页：

```
$template  = '<!DOCTYPE html>';
$template .= '<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">';
$template .= '<head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">';
echo $template; 
```

问题是，当我在浏览器中使用视图源查看它时，它全部出现在一行上。

如何让它出现在不同的行上？

我尝试在模板中使用 \r\n ，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T07:14:05.893

```
$template  = <<<EOT
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type"; content="text/html; charset=UTF-8">
EOT;

echo $template; 
```

使用heredoc

*   [http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T07:10:50.280

你应该`PHP_EOL`这样使用：

```
$template  = '<!DOCTYPE html>' . PHP_EOL;
$template .= '<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">' . PHP_EOL;
$template .= '<head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">' . PHP_EOL;
echo $template; 
```

# c++ - 是否可以使用 Qt Creator 中的 .pro 文件在 Qt 中构建 Mac .framework？

> ID：13657290
> 
> 赞同：1
> 
> 时间：2012-12-01T07:11:41.210
> 
> 标签：c++, qt, frameworks, qt-creator

使用 XCode 及其现成的模板在 Mac OSX 上构建框架非常简单。我想知道是否有一种简单的方法可以做同样的事情，即。使用 .pro 文件将 Qt Creator 构建的输出定义为框架。

目前，我一直在构建我的库，然后手动构建具有库、标题和 ./Current 和 ./Version 目录的框架的目录结构。

多谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T13:26:44.503

是的。该功能由 qmake 提供。在您的`.pro`文件中，您需要：

```
TEMPLATE = lib
CONFIG += lib_bundle 
```

这记录在这里：[https ://doc.qt.io/qt-5/qmake-platform-notes.html#creating-frameworks](https://doc.qt.io/qt-5/qmake-platform-notes.html#creating-frameworks)

如果您希望框架用于开发，请确保将正确的标头复制到包中。`QMAKE_BUNDLE_DATA`用于此。

# php - 修改 osCommerce 产品类的变量

> ID：13657296
> 
> 赞同：1
> 
> 时间：2012-12-01T07:13:06.047
> 
> 标签：php, oscommerce

我在哪里可以找到 osCommerce 中的产品类别？我想修改产品类别以满足我的需要。

我检查了包含/类的类文件夹，找到了运输类、购物车类等，但找不到产品类。

这些是我想在产品类中修改的变量。

```
$products_price
$product_info['products_image']
$products_options
$products_options_name
$product_info 
```

所有这些变量都用于显示产品的页面，如 oscommerce/product_info.php、oscommerce/product_review.php 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:22:58.383

osccomerce 中没有 Product 类。

在`product_info.php`所有变量都由`product_info.php`（或多或少第 75 行）中的查询设置：

```
$product_info_query = tep_db_query("select p.products_id,
pd.products_name, pd.products_description, p.products_model, 
p.products_quantity, p.products_image, pd.products_url, 
p.products_price, p.products_tax_class_id,
p.products_date_added, p.products_date_available, 
p.manufacturers_id from " . TABLE_PRODUCTS . " p, "
 . TABLE_PRODUCTS_DESCRIPTION . " pd where 
p.products_status = '1' and p.products_id = '" . 
(int)$HTTP_GET_VARS['products_id'] . "' and pd.products_id
 = p.products_id and pd.language_id = '" . (int)$languages_id . "'");

$product_info = tep_db_fetch_array($product_info_query); 
```

如果您需要在产品中添加一些东西，只需将其添加到`products`mysql 中的表中，然后修改您要使用它的所有 php is oscommerce 即可。

例如：您需要为所有产品添加 ISBN 字段，因为您有一个在线图书馆并且您需要它。

1.- 编辑您的产品表以添加新字段：

```
alter products ADD products_isbn VARCHAR(15); 
```

2.- 转到目录中显示产品的所有页面，并且要显示新字段并编辑产品 sql

```
//products_info.php
$product_info_query = tep_db_query("select p.products_id,
pd.products_name, pd.products_description, p.products_model, 
p.products_quantity, p.products_image, pd.products_url, 
p.products_price, p.products_tax_class_id,
p.products_date_added, p.products_date_available, 
p.manufacturers_id,p.products_isbn from " . TABLE_PRODUCTS . " p, "
 . TABLE_PRODUCTS_DESCRIPTION . " pd where 
p.products_status = '1' and p.products_id = '" . 
(int)$HTTP_GET_VARS['products_id'] . "' and pd.products_id
 = p.products_id and pd.language_id = '" . (int)$languages_id . "'");

$product_info = tep_db_fetch_array($product_info_query); 
```

（就在我添加 p.products_isbn 之前）

现在您`$products_info["products_isbn"]`可以使用它了。

3.- 如果您想将字段添加到产品列表中（类别视图、搜索结果、特价、即将推出的产品、最新产品……），您必须将其添加到产品列表`catalog/includes/modules/product_listing.php`中（最简单的方法正在跟踪`catalog/index.php`新字段的骗局中的 products_name）

4.- 如果您想在一个框中显示（如“其他客户也购买”或右列或左列），您也必须去`catalog/include/boxes/`添加它。

5.- 如果您想在管理中编辑新字段，您必须编辑`catalog/admin/categories.php`并添加新字段（这里的简单方法是跟踪`products_model`和复制您的新字段）

我确定我会留下更多更改，因为这些是显示新字段的最小更改，如果新字段具有任何功能，例如折扣，您必须编辑订单类、结帐流程......

是的，这是一团糟

# cordova - 通过引导程序在 ios 模拟器中旋转时自动调整内容宽度

> ID：13657297
> 
> 赞同：1
> 
> 时间：2012-12-01T07:13:28.373
> 
> 标签：cordova, twitter-bootstrap, ios-simulator

我正在使用引导程序在 phonegap（用于 iPad 模拟器）中构建电话间隙应用程序。

我想在使用引导响应功能从纵向旋转到横向时调整身体的宽度。顺便说一句，可以吗？可以通过在旋转事件中通过硬编码来完成，方法是使用 jquery 通常将类添加到内容选择器。

我想知道引导程序是否有任何内置功能。

任何人都可以帮忙吗？

# java - 如何以编程方式在磁盘上查找当前的信任库？

> ID：13657299
> 
> 赞同：10
> 
> 时间：2012-12-01T07:13:29.683
> 
> 标签：java, ssl, truststore

是否有任何函数可以告诉我程序中当前使用的信任库是什么。在 Windows 上，默认信任库位于 JAVA_HOME\lib\security\cacerts。

但是，可以通过多种方式更改默认值。

*   `-Djavax.net.ssl.keyStore`在命令行中使用

*   使用`Keystore`类。

*   如果程序在运行应用程序的应用服务器上运行，则可以通过其面板设置存储路径。

*   如果程序在 Tomcat 上运行，则 Tomcat 设置可能会更改信任库。

和许多其他方式。

是否有一种编程方式可以找出当前处于活动状态的信任库的磁盘路径？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T14:22:39.950

一般来说，你不能（这与[这个问题](https://stackoverflow.com/a/3140199/372643)非常相似）。

在 JSSE API 中，信任证书实际上不是由信任库决定的，而是由`TrustManager`. 虽然它通常使用密钥库（信任库）进行初始化，但这不是必需的。此外，[密钥库本身不必是文件](https://stackoverflow.com/a/6157716/372643)。默认信任管理器 API 中没有任何内容可让您检查潜在信任存储的使用位置和方式。

甚至没有任何东西`SSLSocket`可以让你回到它的位置`SSLSocketFactory`，也没有任何东西可以让你回到它的起源`SSLContext`，也没有任何东西可以让你获得信任经理。

哪个信任库/信任管理器当前处于活动状态也很大程度上取决于应用程序。一般来说，没有什么可以告诉您应用程序正在使用的连接使用默认值`SSLContext`，它可以由`javax.net.ssl.*`系统属性初始化。应用程序可以自由地初始化它们自己`SSLContext`的 s 来创建它们的套接字（当您指定某些值时，这是 Tomcat 对其连接器所做的）。

从 Java 6 开始，默认值（当前）`SSLContext`也可以全局更改（通过`SSLContext.setDefault(...)`.

您可以从[JSSE 参考指南](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)中找到默认使用的内容。其余的将取决于每个应用程序的文档。如果您需要，使用`-Djavax.net.debug=SSL,trustmanager`可能会有所帮助，但这不是 API 访问。

（顺便说一下，`-Djavax.net.ssl.keyStore`将为默认密钥管理器设置密钥库，而不是信任库。）

# c# - 在图像控制区域中缩放和滚动 WP7 中的图像

> ID：13657302
> 
> 赞同：0
> 
> 时间：2012-12-01T07:14:08.900
> 
> 标签：c#, windows-phone-7, xaml

有什么方法或资源可以完成以下任务吗？我在 xaml 的图像控件中加载本地图像，想要启用放大/缩小但将缩放限制限制为图像控件的宽度和高度。

我在我的应用程序中使用了这种建议的方法[在 wp7 中缩放和滚动图像](https://stackoverflow.com/questions/10793239/zoom-and-scroll-image-in-wp7)，但图像缩放到图像控制区域之外并遮蔽了应用程序中的其他控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:41:08.910

我不知道图像控件本身，但在我的可缩放画布（基于常规画布）中，我使用了剪辑属性。例如：

```
public partial class ZUICanvas : UserControl
    {

        public ZUICanvas()
        {
            InitializeComponent();

            FrameworkElement viewport;

#if(!LITE)
            viewport = this;
#else
            viewport = Viewport; //just another implementation
#endif
            viewport.SizeChanged += (sender, e) =>
        {
            viewport.Clip = new RectangleGeometry { Rect = new Rect(0, 0, viewport.ActualWidth, viewport.ActualHeight) };
        };

        }
//... 
```

# android - 预期的浮点数，但值为 java.lang.Double

> ID：13657303
> 
> 赞同：0
> 
> 时间：2012-12-01T07:14:16.747
> 
> 标签：android, floating-point, double

活动_A：

```
Intent intent = new Intent(Activity_A.this,
                            Activity_B.class);
intent.putExtra("user_lat",
                    getSharedPreferences(
                    Activity_C.USER_PREFS, 0).getFloat(
                    "lat", 0));
Log.d("lat from prefs = ",
            getSharedPreferences(Activity_C.USER_PREFS, 0)
            .getFloat("lat", 0));
intent.putExtra("lng",
                    getSharedPreferences(
                    Activity_C.USER_PREFS, 0).getFloat(
                    "user_lng", 0));
Log.d("lng from prefs = ",
            getSharedPreferences(Activity_C.USER_PREFS, 0)
            .getFloat("lng", 0)"); 
```

Logcat 显示：

**12-01 12:36:53.409: D/lat 来自首选项 =(554): 18.599348**

**12-01 12:36:53.409：来自首选项的 D/lng =（554）：73.7625**

和活动_B：

```
 try {

        MyLat = this.getIntent().getDoubleExtra("user_lat", 0);
        MyLng = this.getIntent().getDoubleExtra("user_lng", 0);
    } catch (Exception e) {

        Log.e("Exception in getting user lat and lng as Double",
                e.toString());
    }
    if (MyLat == 0.0 || MyLng == 0.0) {

        try {

            MyLat = this.getIntent().getFloatExtra("user_lat", 0);
            MyLng = this.getIntent().getFloatExtra("user_lng", 0);
        } catch (Exception e) {

            Log.e("Exception in getting user lat and lng as Float",
                    e.toString());
        }
    }

    Log.d("MyLat and MyLng", MyLat + "+" + MyLng); 
```

和 LogCat：

**12-01 12:36:57.168: D/MyLat 和 MyLng(554): 18.599348068237305+0.0**

和 LogCat 错误：

```
12-01 12:36:57.138: W/Bundle(554): Key user_lat expected Double but value was a java.lang.Float.  The default value 0.0 was returned.
12-01 12:36:57.159: W/Bundle(554): Attempt to cast generated internal exception:
12-01 12:36:57.159: W/Bundle(554): java.lang.ClassCastException: java.lang.Float
12-01 12:36:57.159: W/Bundle(554):  at android.os.Bundle.getDouble(Bundle.java:1017)
12-01 12:36:57.159: W/Bundle(554):  at android.content.Intent.getDoubleExtra(Intent.java:3377)
12-01 12:36:57.159: W/Bundle(554):  at com.wicfy.mobileapp.MapMarkerActivity.onCreate(MapMarkerActivity.java:60)
12-01 12:36:57.159: W/Bundle(554):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-01 12:36:57.159: W/Bundle(554):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-01 12:36:57.159: W/Bundle(554):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-01 12:36:57.159: W/Bundle(554):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-01 12:36:57.159: W/Bundle(554):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-01 12:36:57.159: W/Bundle(554):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-01 12:36:57.159: W/Bundle(554):  at android.os.Looper.loop(Looper.java:130)
12-01 12:36:57.159: W/Bundle(554):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-01 12:36:57.159: W/Bundle(554):  at java.lang.reflect.Method.invokeNative(Native Method)
12-01 12:36:57.159: W/Bundle(554):  at java.lang.reflect.Method.invoke(Method.java:507)
12-01 12:36:57.159: W/Bundle(554):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-01 12:36:57.159: W/Bundle(554):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-01 12:36:57.159: W/Bundle(554):  at dalvik.system.NativeStart.main(Native Method) 
```

我想，因为我在 Activity_B**中将 user_lat**作为双倍，所以我必须在**intent.putExtra**期间将其转换为**双倍**

 **但后来我在 LogCat 中得到了这个：

**12-01 12:36:57.168：D/MyLat 和 MyLng（554）：0.0+0.0**

```
12-01 12:07:50.218: W/Bundle(498): Key user_lat expected Float but value was a java.lang.Double.  The default value 0.0 was returned.
12-01 12:07:50.249: W/Bundle(498): Attempt to cast generated internal exception:
12-01 12:07:50.249: W/Bundle(498): java.lang.ClassCastException: java.lang.Double
12-01 12:07:50.249: W/Bundle(498):  at android.os.Bundle.getFloat(Bundle.java:984)
12-01 12:07:50.249: W/Bundle(498):  at android.content.Intent.getFloatExtra(Intent.java:3360)
12-01 12:07:50.249: W/Bundle(498):  at com.wicfy.mobileapp.MapMarkerActivity.onCreate(MapMarkerActivity.java:71)
12-01 12:07:50.249: W/Bundle(498):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-01 12:07:50.249: W/Bundle(498):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-01 12:07:50.249: W/Bundle(498):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-01 12:07:50.249: W/Bundle(498):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-01 12:07:50.249: W/Bundle(498):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-01 12:07:50.249: W/Bundle(498):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-01 12:07:50.249: W/Bundle(498):  at android.os.Looper.loop(Looper.java:130)
12-01 12:07:50.249: W/Bundle(498):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-01 12:07:50.249: W/Bundle(498):  at java.lang.reflect.Method.invokeNative(Native Method)
12-01 12:07:50.249: W/Bundle(498):  at java.lang.reflect.Method.invoke(Method.java:507)
12-01 12:07:50.249: W/Bundle(498):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-01 12:07:50.249: W/Bundle(498):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-01 12:07:50.249: W/Bundle(498):  at dalvik.system.NativeStart.main(Native Method) 
```

我没有收到任何**Log.e**消息。可能是因为它是内部异常并且不会导致崩溃。

**那么，我怎样才能从Activity_B**中的**Activity_A**获取我通过意图发送的实际值

 **谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:24:50.803

虽然对于原语，您可以强制`double`转换为 a `float`（精度损失）和`float`a （没有警告） ，`double`以防万一这不起作用。因此，每次将 a放入 a时，都必须确保它是 a而不是 a 。希望这可以帮助。`Float``Double``Float``Bundle``Float``Double`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T07:26:11.023

由于该值已存储在 SharedPreferences 文件中，因此似乎最简单的答案是不使用 Intent。

在活动 B 中使用：

```
float myLat = getSharedPreferences(Activity_C.USER_PREFS, 0).getFloat("lat", 0);
// Read the Longitude in the same way 
```

* * *

您正在*尝试*使用 Location 对象中的 Doubles（我假设），但是 SharedPreferences 不适用于 Doubles。将 Doubles 转换为 Strings 并返回可能会更安全。这样您就不会获得或失去任何往返浮动的精度。****

# ruby-on-rails-3 - 使用 Authlogic 验证电子邮件字段

> ID：13657306
> 
> 赞同：0
> 
> 时间：2012-12-01T07:14:47.183
> 
> 标签：ruby-on-rails-3, model, authlogic, email-validation

我刚刚开始新的练习申请，并希望在注册页面上进行电子邮件字段验证。我已经用谷歌搜索并得到了解决方案

```
class user < ActiveRecord::Base
  validates_presence_of :username
  validates_format_of :email, :with => /SomeRegexpYouGotFromGoogle/
end 
```

但我听说 Authlogic 可以做得更好。我也有Authlogic的方法，即

```
Authlogic::ActsAsAuthentic::Email 
```

但我不知道如何在我的项目中使用它。请建议我解决我的问题的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:52:53.667

以下链接可能对您有所帮助。
[Authologic 用于电子邮件验证](http://saravani.wordpress.com/2012/01/03/rails-3-authlogic-implementation-a-basic-tutorial/)
或
以下链接也用于如何使用 authologic 只是尝试使用 Authlogic 的
[Rails 3 示例](https://github.com/trevmex/authlogic_rails3_example.git)

# javascript - 在 Spine.js 中传递 this.item 时车把断裂

> ID：13657310
> 
> 赞同：8
> 
> 时间：2012-12-01T07:15:22.817
> 
> 标签：javascript, handlebars.js, spine.js

我正在尝试实现 Spine.js 文档中给出的 Todo 示例，此处给出：[http ://spinejs.com/docs/example_tasks](http://spinejs.com/docs/example_tasks)

只有我想使用 Handlebars 而不是 jQuery.tmpl。我正在使用把手 1.0.rc.1

但是，当我尝试调用时：

```
template: Handlebars.compile($('#history-template').html()),

render: function(){
    var t = this.template(this.item);
    this.replace(t);
    return this;
} 
```

Handlebars 在以下位置引发异常`this.template(this.item)`：

```
Uncaught TypeError: Cannot call method 'match' of undefined 
```

在 Handlebars 词法分析器中，`this._input`返回为未定义。

我的模板如下：

```
<script id='history-template' type='text/x-handlebars-template'>
    <div class="content-inner {{#if viewed}}msg_unseen{{/if}}">                                             
        <div>{{data}}</div>
    </div>
</script> 
```

数据：

```
"[{"data":"hello","id":"c-0"}]" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:31:40.080

问题似乎是：

1.  ID 不匹配 - 您的模板 ID 是`history-template`，但您尝试将其选择为`$("#my-template)`.
2.  你的数据应该写成`{"data":"hello","id":"c-0"}`（一个对象），没有方括号（使它成为一个数组）。

一旦我做了这两个更正，我就可以运行你的代码。 [有关工作演示，请参见此处。](http://jsfiddle.net/hVTET/)

```
var data = { data: "hello", id: "c-0" };
var template = Handlebars.compile($('#history-template').html());
var html = template(data); 
```

（另请参阅[此处](http://jsfiddle.net/hVTET/1/)以确认 #if 逻辑是否正常工作。）

* * *

**编辑**

要使用数组形式的数据 -- `{ data: "hello", id: "c-0" }`-- 据我所知，为了在 Handlebars 模板中使用它，您需要将其包装在一个对象中：

```
var obj = { data: "hello", id: "c-0" };
var handlebarsData = { items: obj }; 
```

这样您就可以使用 Handlebars 迭代形式`{{#each items}}`：

```
{{#each items}}
    <div class="content-inner {{#if viewed}}msg_unseen{{/if}}">                                             
        <div>{{data}}</div>
    </div>
{{/each}} 
```

[这是更新的小提琴。](http://jsfiddle.net/hVTET/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T00:32:37.267

您传递的数据不正确。

[根据官方车把文档](http://handlebarsjs.com/execution.html)，数据应该作为对象传递给车把。例如：

```
{"foo":"bar","baz":"faz"} 
```

使用以下模板：

```
<div>{{foo}}</div>
<div>{{baz}}</div> 
```

将呈现为

```
<div>bar</div>
<div>faz</div> 
```

# html - 您如何确定导致页面加载缓慢的原因？

> ID：13657313
> 
> 赞同：0
> 
> 时间：2012-12-01T07:15:56.123
> 
> 标签：html

所以我有这个 WordPress 页面，里面只有 html，与其他页面在 1 秒内加载相比，加载大约需要 6 秒。

所以我检查了萤火虫网络选项卡，它只是告诉我它的 HTML 需要 6 秒。我已经检查了所有媒体，例如图像，甚至检查了 JS，并且这两个项目都在毫秒内加载。

我现在的问题是，如果它说的是 HTML，那到底是什么意思？我将如何确定 HTML 的哪一部分加载缓慢以便我可以修复它？

任何见解都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:20:00.093

使用 Fiddler 获得有关加载页面所需的每个 Web 请求的更详细信息，或者您甚至可以更进一步并使用wireshark 进入低得多的级别以查看在线上发生的传输。

顺便说一句，通常为了减少请求的带宽或时间，通常您可以使用 sprite 对包含许多图片的图像进行 1 个单一请求，而不是对单个最小图片的许多小请求。

# windows - Windows 安装程序与 TeamViewer 相同

> ID：13657314
> 
> 赞同：1
> 
> 时间：2012-12-01T07:16:10.273
> 
> 标签：windows, installation

我正在努力从三天内创建 Windows 安装程序。我需要创建一个与 TeamViewer 相同的窗口安装程序。请参阅附上的快照：

![TeamViewer 设置第一个窗口](../Images/12f3fdbe47a34946173b77dc6b3bb820.png)

如果我们选择“运行”选项并单击“下一步”，它会显示“许可协议”对话框。然后单击最后一个 Next，整个设置将关闭并启动 Team Viewer。在幕后，Team Viewer 设置将整个所需文件复制到某个临时文件夹中。然后启动那个 .exe 文件。

我曾尝试使用**[Advanced Installer 9.6.1](http://www.advancedinstaller.com/)**并尝试使用**InstallShield 2010**实现相同的目标。在第一个中，您可以启动自定义文件，但无法退出对话框（进度和退出对话框）。在第二种情况下，我需要使用安装脚本语言。这使得它很难使用。

您能否建议我一些设置设置的方法。或者，如果您有任何其他建议或工具可以帮助我解决此问题。最后，我考虑创建具有此类功能的自定义 Windows 安装程序（从 Team Viewer 开始）。但我是创建 Windows 安装程序的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:22:27.337

我不认为您可以在不编写任何代码的情况下获得与 TeamViewer 完全相同的行为。这是因为 Windows 安装程序包 (.MSI) 不是为这种情况设计的。

高级安装程序支持临时文件并显示所需的对话框，但一旦您关闭安装程序，它将删除所有文件。正如您已经发现的那样，您无法在不显示退出对话框的情况下关闭完整的 UI 设置包。

# php - 文章发布中的 WordPress tinymce 问题

> ID：13657320
> 
> 赞同：7
> 
> 时间：2012-12-01T07:17:03.527
> 
> 标签：php, wordpress, tinymce

在为一位特定用户发布的 WordPress 文章中发现 1 个奇怪的问题。

1.  用户以 tinymce HTML 模式添加文章
2.  再次尝试在 tinymce 可视模式下添加新帖子。实际上没有发布，只是将 tinymce 选择的选项卡从 HTML 切换到 Visual
3.  用户尝试在 setp 1 中打开以 HTML 模式保存的帖子，它在选项卡中显示 tinymce 可视模式处于活动状态，但加载的图标来自 HTML 模式。tinymce 内容现在无法查看，内容存在但无法查看，如果我按 CTRL+A，我可以查看内容，它还会阻止其他功能，例如编辑草稿、注销等。
4.  现在，如果用户再次尝试添加新帖子，并从 tinymce 选项卡中选择 HTML 并从页面退出
5.  他尝试编辑在 setp 1 中添加的帖子，现在它显示正确。

内容没有问题，因为我尝试将此内容复制并粘贴到新帖子中并且工作正常。

并非所有用户都发生这种情况。而且在可视模式下加载的图标比在管理员帐户中加载的图标要少 1 点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-19T07:27:28.553

试试这个插件 - [http://wordpress.ckeditor.com/](http://wordpress.ckeditor.com/)。它取代了tinymce，许多人发现它更“用户友好”。它有一个“源”模式，似乎比 tinymce 的 HTML 模式表现得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T09:17:39.957

您可以尝试的第一件事是转到“用户”>“您的个人资料”，在编辑时禁用可视化编辑器，保存设置，然后取消选中该框并再次保存设置。

之后，检查tinyMCE功能是否正常，否则，请尝试逐个禁用您的插件，以找出导致jQuery冲突的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T13:25:32.533

您应该使用 firebug 调试您的 js 代码。

TinyMCE 可能无法正确初始化，因为之前发生了 JS 错误（在您的 js 代码或 wordpress 插件中，即 Secure WordPress）。

检查这个，可能会有所帮助：[http ://wordpress.org/support/topic/uncaught-referenceerror-switcheditors-is-not-defined](http://wordpress.org/support/topic/uncaught-referenceerror-switcheditors-is-not-defined)

# c++ - 打印出数组成员错误的对象

> ID：13657323
> 
> 赞同：0
> 
> 时间：2012-12-01T07:17:29.523
> 
> 标签：c++, arrays, string, printing

我在打印出我的结构成员时遇到了一些麻烦。这是我到目前为止所拥有的：

```
struct Code
{
  char letter;
  string sequence;
}

void createCode(HuffmanNode *root, string codestr, Code *codeBook, int count)
{
  if(root->getRight() == NULL && root->getLeft() == NULL)
  {
    Code code;
    code.letter = root->getLetter();
    code.sequence = codestr;
    codeBook[count] = code;
    count++;
  }
  else
  {
    createCode(root->getLeft(), codestr + "1", codeBook, count);
    createCode(root->getRight(), codestr + "0", codeBook, count);
  }
} 
```

这一切正常，但主要是当我尝试在 Codebook 中的代码数组中打印出成员序列时：

```
string codestr;
count = 0;
Code codeBook[256];
createCode(root, string codestr, codeBook, count); //root is already created 
for(int i = 256; i >= 0; i--)
{
  if(isalpha(codeBook[i].letter))
  cout << codeBook[i].sequence << " ";
} 
```

只打印我存储的最后一个字符串。可能有人知道解决方法以及为什么会这样吗？如果有人可以提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:20:17.553

主要问题是`createCode()`总是通过`count=0`。因此，您将所有`Code`条目存储在数组的第零位，最后一个将覆盖所有先前的条目。

要解决此问题，`count`请通过引用或指针传递，或者使函数返回`count`.

最后，循环的起始值`for`超出范围（减一）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:19:42.843

当您`createCode`,`count`不递增时，因为您是按值传递它，所以更改为按引用传递：

```
void createCode(HuffmanNode *root, string codestr, Code *codeBook, int& count) 
```

数组 codeBook 包含 256 个元素，但索引从 0 到 255。for 循环应该是：

```
for(int i = 255; i >= 0; i--) 
```

否则访问越界数组元素是未定义的行为。

# android - 如何在android中将值从一页发送到另一页？

> ID：13657324
> 
> 赞同：1
> 
> 时间：2012-12-01T07:17:29.883
> 
> 标签：android

我需要将值从 screen1 传递到 screen4。我将这些值声明为静态的，但这样的值不会传递。在 screen1 之后，我需要调用 screen2 和 screen3。在 screen1 按钮中单击我正在获取值，但如何将它们发送到 screen4。在这方面的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:19:14.240

`EXTRAS`您应该在用于启动新活动的意图中传递您的值。[您可以使用Intent 类](https://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.lang.String%29)中的众多功能之一。`putExtra`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:28:22.103

您在活动之外声明静态变量。意味着在一个单独的类中。并尝试访问它们。它会起作用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T07:49:05.747

您可以像这样创建独立类：

```
public class Myclass{
    private String myString;
    public void setString(String str){
    myString=str;
    }
    public String getString(){
    return myString;
    }
} 
```

在您的 Activity1 中，您可以通过

```
String myString="What ever the string you have"
MyClass.setString(myString); 
```

您可以通过以下方式在任何您想要的地方调用该字符串：

```
String myString=MyClass.getString(): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T08:00:01.457

尽量避免使用静态，因为您可能会在不知不觉中导致内存泄漏，如果您必须使用静态，请确保您没有（直接/间接）持有活动的上下文。

您还可以使用[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)，尤其是当您的数据复杂且庞大时。为您的数据创建 POJO 并实现 parcelable

```
public class Student implements Parcelable{
    private String id;
    private String name;
    private String grade;

    // Constructor
    public Student(String id, String name, String grade){
        this.id = id;
        this.name = name;
       this.grade = grade;
   }
   // Getter and setter methods
   .........

   // Parcelling part
   public Student(Parcel in){
       String[] data = new String[3];

       in.readStringArray(data);
       this.id = data[0];
       this.name = data[1];
       this.grade = data[2];
   }

   @override
   public int describeContents(){
       return 0;
   }

   @Override
   public void writeToParcel(Parcel dest, int flags) {
       dest.writeStringArray(new String[] {this.id,
                                           this.name,
                                           this.grade});
   }
   public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
       public Student createFromParcel(Parcel in) {
           return new Student(in); 
       }

       public Student[] newArray(int size) {
           return new Student[size];
       }
   }; 
```

}

一旦使 POJO 可打包，就可以通过 Intent 传递此类的对象。

```
intent.putExtra("student", new Student("2","Ryan","9")); 
```

然后就可以在目标activity中恢复这个对象了

```
Bundle data = getIntent().getExtras();
Student student = data.getParcelable("student"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T07:20:38.140

最简单的方法是在您用于启动活动的意图中传递值：

```
Intent intent = new Intent(getBaseContext(), Your4NumberScreen.class);
intent.putExtra("new_variable_name", "valueToPass");
startActivity(intent) 
```

然后在新的 Activity 中，检索这些值：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    String value = extras.getString("new_variable_name");
} 
```

**编辑：**如果你想直接将值传递给屏幕 4，那么你可以使用，否则你必须使用上面的代码传递给 screen2，然后从 screen2 到 screen3，然后从 3 到 4。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T07:20:42.703

发送方：

```
Intent myIntent = new Intent(screen1.this, screen4.class);
myIntent.putExtra("intVariableName", intValue);
startActivity(myIntent); 
```

接收端[screen4]：

```
Intent mIntent = getIntent();
 int intValue = mIntent.getIntExtra("intVariableName", 0); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-01T07:22:11.317

你需要使用 putextra。

```
String easyPuzzle  = "630208010200050089109060030"+
                     "008006050000187000060500900"+
                     "09007010681002000502003097";

Intent i = new Intent(this, ToClass.class);
i.putExtra("epuzzle", easyPuzzle);
startActivity(i); 
```

然后从您的新活动中提取它，如下所示：

```
Intent intent = getIntent();
String easyPuzzle = intent.getExtras().getString("epuzzle"); 
```

# c++ - 如何将模板大小的数组初始化转换为 constexpr 初始化？

> ID：13657325
> 
> 赞同：1
> 
> 时间：2012-12-01T07:17:30.227
> 
> 标签：c++, c++11

这是循环。基本上沿圆的圆周生成一定数量的点。点数组显然是恒定的并且可以在编译时计算，但我似乎无法找到将其提升为 constexpr 的方法。

```
#include <array>
#include <cmath>

template <std::size_t Len>
class Circle {
public:
    Circle() {
        for (int i = 0; i < Len; i++) {
            float x = (float)std::cos(2 * M_PI * i / (Len - 1));
            float y = (float)std::sin(2 * M_PI * i / (Len - 1));
            points[i * 3] = x;
            points[i * 3 + 1] = y;
            points[i * 3 + 2] = 0;
        }
     }
 private:
     std::array<float, Len * 3> points;
 }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T08:42:05.013

它们不能保证严格准确，但它们可能足以满足您的目的。

我只是使用了泰勒级数近似。添加`constexpr`并查看它们是否有效。

```
long double sin2r(long double const r, long double const t, long double const tn, unsigned long long k)
{
    return tn == 0 ? r : sin2r(r + ((k / 2) % 2 ? -1 : +1) * tn, t, tn * t * t / ((k + 1) * (k + 2)), k + 2);
}

long double cos2r(long double const r, long double const t, long double const tn, unsigned long long k)
{
    return tn == 0 ? r : cos2r(r + ((k / 2) % 2 ? -1 : +1) * tn, t, tn * t * t / ((k + 1) * (k + 2)), k + 2);
}

long double sin2(long double const t)
{
    return sin2r(0, t, t, 1);
}

long double cos2(long double const t)
{
    return cos2r(0, t, 1, 0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T08:03:21.553

首先，`constexpr`函数不一定在编译时进行评估。在某些情况下编译器必须这样做（例如，如果事物被用作编译时间常数）；但标准不需要这样的东西。（理论上，如果存储生成代码并在启动时运行一次是微不足道的并且使用的空间比存储的计算值少，编译器可能希望这样做`constexpr`）

其次，你的例子是不可能的`constexpr`。该标准要求任何`constexpr`函数只能调用其他`constexpr`函数，并且格式为`return expression;`. 您的示例不符合任何条件，因为您依赖于`sin`and `cos`（它们不是`constexpr`函数），并且您需要一个不是形式的循环`return expression;`。

`constexpr`不是为优化而设计的；它旨在允许您计算编译时间常数（例如，以便您可以将结果用作堆栈分配数组的大小）。

# oracle - Oracle 过程创建警告消息

> ID：13657326
> 
> 赞同：0
> 
> 时间：2012-12-01T07:17:46.693
> 
> 标签：oracle, oracle10g, oracle11g, oracle9i

我正在使用下面的代码在 oracle 中创建一个过程。这是用警告消息编译的

> 警告：已编译但存在编译错误。

我无法解决这个问题。请帮我解决这个问题。

```
CREATE OR REPLACE PROCEDURE sp_get_discount_master(In_value IN float) IS
    PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN
    INSERT INTO tbl_discount_master
        (fld_value)
    VALUES
        (In_value);
    COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
END sp_get_discount_master; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:57:04.840

这是您的代码中我不喜欢的项目列表。

1.  以“sp_”作为过程名称的前缀
2.  在参数名称前加上“in_”
3.  使用数据类型 float，在算术运算中不精确
4.  当小写更容易阅读时，为您的代码使用大写。
5.  使用“当其他人”，这将导致对您隐藏任何运行时故障。

继续。

# linux - Bash-将两个数组变量加到第三个数组的变量中

> ID：13657329
> 
> 赞同：0
> 
> 时间：2012-12-01T07:18:43.257
> 
> 标签：linux, arrays, bash

我有三个`arrays A, B, C`。数组 AB 值正在从文件中解析，我希望它们加起来`array C`。

```
#!/bin/bash
i=0
A=()
B=()
C=()
while read line
do
  A[i]="$(echo $line| cut -d\  -f4)"
  B[i]="$(echo $line| cut -d\  -f11)"
  echo ${A[i]} " and " ${B[i]}
  # outputs correct values
  C[i]=`expr ${A[i]} + ${B[i]}`
  echo ${C[i]} 
  # no output
  i=$((i+1))
done < ~/file
exit 0 
```

那个任务有什么问题？

脚本的完整行：

```
hitEnd[i]=`expr ${hitLength[i]}+${hitStart[i]}`
echo "${hitEnd[i]}"
#no output 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:42:13.223

该行：

```
 C[i]=`expr ${A[i]} + ${B[i]}` 
```

如果两个操作数之一丢失，则给出错误。如果这是预期的，即文件中有空字段，那么：

```
 C[i]=$((${A[i]:-0}+${B[i]:-0})) 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:45:10.780

脚本看起来正确。您可能无法正确构造数组。

并且总是双引号变量以避免一些错误。

# magento - 使用 taskel 安装了 LAMP 堆栈，但没有任何效果

> ID：13657330
> 
> 赞同：0
> 
> 时间：2012-12-01T07:18:43.630
> 
> 标签：magento, ubuntu, lamp

我以前从未使用过 taskell，但听说它“非常简单”，所以我使用了它。

我从来没有遇到过让 Magento 安装工作这么麻烦。

我传输了所有文件、数据库和所有内容，但出现了我无法弄清楚来源的错误。

`Fatal error: Call to a member function children() on a non-object in /var/www/magento/app/code/core/Mage/Core/Model/Config.php on line 901`

也许这与 SPL 自动加载有关？但它在两者中都启用了。我不知道。我所知道的是它应该可以正常工作，就像 Apple 产品一样。

主要区别在于这是 Ubuntu 12.04.1（服务器）。在我只使用过 Ubuntu 10 和 CentOS 之前。在 Ubuntu 10 上，我在安装操作系统时安装了 LAMP。但是服务器主机没有这样做，所以我使用了 taskel，现在一切都很糟糕。

在 CentOS 上使用 YUM 是一场噩梦，但这是一场更大的噩梦。

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:42:07.990

原来，当我在`tar.gz`服务器上创建文件时，有一些文件我没有读取权限，在`app/etc/modules`. 我所要做的就是把那些转移过来。

在我决定重做`tar.gz`并在输出中多次看到“权限被拒绝”之后，我找到了答案。我检查了新服务器，发现这些文件确实丢失了。

转移它们后，一切都立即生效。

因此，它与 taskel 或 Ubuntu 版本无关。只是一些丢失的文件。

# java - 如何在 Java 中创建一个可以存储 50 个字符串的 ArrayList？

> ID：13657331
> 
> 赞同：2
> 
> 时间：2012-12-01T07:19:00.097
> 
> 标签：java, arraylist

我想将数组列表限制为 50。但我不知道如何。

这是我的代码 Object1.java

```
public class Object1 {

    public String seat_no, id;

    public Object1(String seat_no, String id) {

        this.seat_no = seat_no;
        this.id = id;

    }
} 
```

main.java

```
private ArrayList<Object1> list;

list = new ArrayList<Object1>(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T07:21:45.053

您可以做的是将 ArrayList 扩展到 LimitedArrayList 并覆盖 add 方法。

```
public class LimitedArrayList<E> extends ArrayList<E>{

private final int capacity;

public LimitedArrayList(int capacity) {
    super(capacity);
    this.capacity = capacity;

}
@Override
public boolean add(E e) {
    if(size()>=capacity){
        throw new ListFullExcption();
    }
    return super.add(e);
}

    // there are more add methods to override but i will let you figure that out.
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-01T07:31:13.673

尽管听起来很诱人，但我建议不要扩展`ArrayList`或任何其他`List`实现，因为那样您将限制自己只使用一种类型的列表。如果下次你想限制 a`LinkedList`而不是a 会发生`ArrayList`什么？你也要延长`LinkedList`吗？如果你想限制，基本上，任意实现会发生`List`什么？

您正在寻找的东西已经存在。您可以使用 Commons Collections 并使用谓词包装列表：

```
class SizePredicate implements Predicate {
    private List list;
    private int maxSize;

    public SizePredicate(List l, int size) {
        list = l;
        maxSize = size;
    }

    public boolean evaluate(Object obj) {
        if (list.size() >= maxSize) {
            throw new IllegalStateException("Your message here");
        }
        list.add(obj);
    }
}

...

List list = new LinkedList();  // Or, really, any implementation of list.

List maxList = ListUtils.predicatedList(list, new SizePredicate(list, 50)); 
```

使用上面的设计，您可以使用相同的`Predicate`实例来限制任何类型的列表。您还可以扩展它以处理任何类型的集合...

... 无需扩展任何 JDK 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T07:28:35.943

你有两个选择：

您可以创建一个字符串数组，在这里您可以选择设置最大大小。或者

您可以创建一个新类，该类将扩展 ArrayList 并覆盖其 add() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T07:43:51.503

试试这个代码

```
public class UserInformation {

    private String userId;
    private String name;
    public void setUserId(String userId) {
        this.userId = userId;
    }
    public void setUsername(String name) {
        this.name = name;
    }  
    } 
```

添加数据

```
public List<UserInformation> userInfo= new ArrayList<UserInformation>();
    public UserInformation objuserinfo= null;

              for(int i=0;i<50;i++)
               {
                 objuserinfo = new UserInformation();
                objuserinfo.setUserId("ID");
                objuserinfo.setUsername("name");
                userInfo.add(objuserinfo);
                } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-01T12:05:46.270

你不能做吗

```
ArrayList list = new ArrayList(size); 
```

# android - 使用 TextView 显示 ListView 中项目的附加信息

> ID：13657335
> 
> 赞同：1
> 
> 时间：2012-12-01T07:19:14.363
> 
> 标签：android, listview, textview

从下面的代码可以看出，当我点击项目（项目 1、项目 2 或项目 3）时，我的 TextView 将显示字符串，即“项目 1”、“项目 2”或“项目 3” .

但是，当我单击该项目时，我希望 TextView 显示有关该项目的其他信息，例如姓名、联系人等。

我不知道我该怎么做。谁能给点建议？

```
public class ListA extends ListActivity {
  private TextView selection;
  private static final String[] items={"Item 1", "Item 2", "Item 3"};

  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_list);
    setListAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1,
                    items));
selection=(TextView)findViewById(R.id.selection);
  }

  @Override
  public void onListItemClick(ListView parent, View v, int position,
                                long id) {
    selection.setText(items[position]);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:29:08.453

我认为您可以使用`getItemAtPosition(position)`将所选项目作为对象。然后你就可以使用这个对象的信息了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:39:36.593

您可以使用 ArrayList 并继续尝试此代码，

```
mList = new ArrayList<String>();
    mList.add("Item 1");
    mList.add("Item 2");
    mList.add("Item 3");
    mList.add("Item 4");
    mList.add("Item 5"); 
```

和 onItemClick 代码：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    selection.setText(mList.get(position));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T07:33:14.437

在这种情况下，您应该使用 BaseAdapter。看到这个walkthough。 [http://anujarosha.wordpress.com/2011/11/30/how-to-use-baseadapter-and-onitemclicklistener-in-android/](http://anujarosha.wordpress.com/2011/11/30/how-to-use-baseadapter-and-onitemclicklistener-in-android/)

编辑：

您必须实现 BaseAdapter，因为 ArrayAdapter 只能显示一个字符串。

请参阅我的实现，它有一个项目列表。每个项目都包含一个姓名和联系人。

您需要设置此 BaseAdapter 来代替 ArrayAdapter。

BaseAdapter 通过 getView() 方法中的布局膨胀来创建视图。布局有两个TextView。

在该方法中，我们还将名称和联系人设置为两个 TextView。

```
 public class Item
{
    private String name;
    private String contact;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getContact() {
        return contact;
    }
    public void setContact(String contact) {
        this.contact = contact;
    }

}

public class Adapter1 extends BaseAdapter
{
    private List<Item> items;
    private LayoutInflator inflator;
    public Adapter1(List<Item> items, LayoutInflator inflator) {
        super();
        this.items = items;
                    this.inflator = inflator;
    }

    @Override
    public int getCount() {
        return items.size();
    }

    @Override
    public Object getItem(int position) {
        return items.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View view;

        if(convertView != null)
            view = convertView;
        else
            view = inflator.inflate(R.layout.item_layout, parent, false);

        Item item = (Item) getItem(position);

        ((TextView) view.findViewById(R.id.textName)).setText(item.getName());
        ((TextView) view.findViewById(R.id.textContact)).setText(item.getContact());

        return view;
    }

} 
```

# python - 如何使用 Python ElementTree 将新数据附加到现有 XML？

> ID：13657341
> 
> 赞同：4
> 
> 时间：2012-12-01T07:19:47.757
> 
> 标签：python, elementtree

我是 Python/ [ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)的新手。我有以下 XML 示例：

```
<users>
    <user username="admin" fullname="admin" password=""  uid="1000"/>
    <user username="user1" fullname="user1" password="" grant_admin_rights="yes"><group>my_group</group><group>group_2</group></user>
</users> 
```

我想将以下内容*附加*到这个现有的 XML：

```
<user username="+username+" password="+password+"><group>+newgroup+</group></user> 
```

所以我的最终输出应该是这样的：

```
 <users>
        <user username="admin" fullname="admin" password=""  uid="1000"/>
        <user username="user1" fullname="user1" password="" grant_admin_rights="yes"><group>my_group</group><group>group_2</group></user>
        <user username="+username+" password="+password+"><group>+newgroup+</group></user>
    </users> 
```

这是我的尝试：

```
import sys
import xml.etree.ElementTree as ET

class Users(object):
    def __init__(self, users=None):
        self.doc = ET.parse("users.xml")
        self.root = self.doc.getroot()

    def final_xml(self):
        root_new  = ET.Element("users") 
        for child in self.root:
            username             = child.attrib['username']
            password             = child.attrib['password']  
            user    = ET.SubElement(root_new, "user") 
            user.set("username",username)               
            user.set("password",password) 
            try:
                fullname             = child.attrib['fullname']
            except KeyError:
                pass
            for g in child.findall("group"):
                group     = ET.SubElement(user,"group")
                group.text = g.text
        tree = ET.ElementTree(root_new)
        tree.write(sys.stdout) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T08:20:56.277

在 ElementTree 中，Element 对象有一个“append”方法。通过使用这种方法，您可以直接添加新的 XML 标记。

例如：

```
user = Element('user')
user.append((Element.fromstring('<user username="admin" fullname="admin" password="xx"  uid="1000"/>'))) 
```

“元素”来自哪里`from xml.etree.ElementTree import Element`。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-12-01T08:11:15.487

获取 XML 根之后，将该根的子级转换为字符串 - “ET.toString()”，并将“.split()” 分割成片段，这样您就可以创建一个列表，并将新行附加到该列表列表。然后使用“.join()”从列表中创建一个字符串。之后，使用“ET.fromString()”方法创建一个新的 xml。并将其写入文件。

# grails - groovy 和 grails 中的网络爬虫每天都在爬

> ID：13657349
> 
> 赞同：1
> 
> 时间：2012-12-01T07:20:41.317
> 
> 标签：grails, groovy, web-crawler

我需要实现一个网络爬虫来爬到一个网站每天获取数据。做这个的最好方式是什么？我应该写一个时髦的脚本并让它每天重复吗？如果我使用脚本，我不能使用域类。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T10:29:28.080

我建议使用 XmlSlurper 从站点读取数据，将其放入 Grails 的服务中，然后使用 Quartz 插件对其进行调度。这样您就可以访问 Grails 中的域模型，并且可以使用 slurper 的酷炫功能来获取 HTML。您可能还需要像 Nekohtml [http://nekohtml.sourceforge.net](http://nekohtml.sourceforge.net)这样的解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:39:30.890

我会通过 Quartz 使用 Cron 作业创建服务并安排它。

服务本身应该使用 selenium 进行爬网。根据您需要抓取的站点，您可能需要检查您需要多好的浏览器来支持 JavaScript。Selenium 中的 May e Htmlunit 不会削减它。

因此，您需要确保可以在 Grails 机器上安装 Firefox 或 Chrome。为了更进一步并将浏览器安装与您的服务器分开，您可以将另一台机器用作 Selenium 网格节点，将服务器用作网格集线器，所有节点都在此处连接。您的 Grails 服务现在不需要 FirefoxDriver 或 ChromeDriver 来抓取，而是需要 RemoteDriver，它与您的 Selenium 节点对话。

也许，为了分离爬虫和 Grails 应用程序的反馈，您可能想要使用消息系统。APMQ 与 Apache Camel 的结合将使您走得更远。如果您使用 Camel，请查看 Camel 如何帮助您使用 Quartz

# c# - Android.Widget.TextView

> ID：13657357
> 
> 赞同：0
> 
> 时间：2012-12-01T07:22:12.087
> 
> 标签：c#, android, widget, textview, monodevelop

我正在尝试更改`textview`Android MonoDevelop 中 a 的颜色。

我试过这个：

```
TextView mapTextView = new TextView(contextOverlay); 
mapTextView.Text = overlayDetailsForThisOverlay.stringName; 
mapTextView.setTextColor(Color.RED); 
```

我收到以下错误：

> `Android.Widget.TextView`不包含 的定义`setTextColor`。

我尝试将以下内容添加为 using 语句：

```
using `Android.Graphics`; 
```

没有运气。

我可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T09:15:53.257

要更改 textview 的颜色，您应该使用以下命令：

```
tv.SetTextColor(Resources.GetColorStateList(Resource.Color.textcolor)); 
```

但首先您必须在 Values 文件夹中创建一个 xml 文件（Color.xml），其中包含以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <color name="textcolor">#ffcc33</color>
</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:56:20.883

我不明白您是要更改背景颜色还是文本颜色。无论如何，要更改文本颜色，您应该使用以下命令：

```
TextView tv=new TextView(this);
tv.setTextColor(Color.argb(255, 255, 0, 0));//ARGB 255 255 0 0 is red 
```

并更改背景颜色：

```
TextView tv=new TextView(this);
tv.setBackgroundColor(Color.argb(255, 0, 255, 0));//ARGB 255 0 255 0 is green 
```

不要忘记将其放入您的导入中：

```
import android.graphics.Color; 
```

# mysql - 如何组合这三个 SQL 查询？

> ID：13657358
> 
> 赞同：-1
> 
> 时间：2012-12-01T07:22:20.840
> 
> 标签：mysql, sql

我有这三个 SQL 查询：

第一个查询：

```
SELECT DISTINCT     company.company_name AS CompanyName, pts AS CompanyPts
FROM                users_pts, users_codes, company
WHERE               scanned = 1 
AND                 users_codes.company_id = company.company_id 
AND                 users_codes.company_id = users_pts.company_id 
AND                 users_codes.email = 'test@gmail.com'
GROUP BY            company.company_id 
```

第二个查询：

```
SELECT SUM(IF(completed = 0, 1, 0)) AS NumberOfSurveys 
FROM users_survey_answers
WHERE users_survey_answers.email = 'test@gmail.com'
GROUP BY users_survey_answers.company_id 
```

第三个查询：

```
SELECT SUM(IF(redeemed = 0, 1, 0)) AS NumberOfRewards
FROM users_rewards
WHERE users_rewards.email = 'test@gmail.com'
GROUP BY users_rewards.company_id 
```

电子邮件列在所有数据库中，所以不用担心你从哪里得到它。（不管是users_rewards.email还是users_survey_answers.email，都无所谓）

我只需要帮助开始。

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:34:40.280

可以用子查询来完成

```
select distinct
    c.company_name as CompanyName, pts as CompanyPts,
    (
        select sum(if(usa.completed = 0, 1, 0))
        from users_survey_answers as usa
        where
            usa.email = uc.email and
            usa.company_id = uc.company_id
    ) as NumberOfSurveys,
    (
        select sum(if(ur.completed = 0, 1, 0))
        from users_rewards as ur
        where
            ur.email = uc.email and
            ur.company_id = uc.company_id
    ) as NumberOfRewards
from users_pts as upusers_codes as uc, company as c
where
    scanned = 1 and
    uc.company_id = c.company_id and
    uc.company_id = up.company_id and
    uc.email = 'test@gmail.com' 
```

也可以通过连接来做到这一点

```
select distinct
    c.company_name as CompanyName, pts as CompanyPts,
    ifnull(usa.NumberOfSurveys, 0) as NumberOfSurveys,
    ifnull(ur.NumberOfRewards, 0) as NumberOfRewards
from company as c
    inner join users_codes as uc on uc.company_id = c.company_id
    inner join users_pts as up on up.company_id = c.company_id
    left outer join
    (
        select
            t.email, t.company_id,
            sum(if(t.completed = 0, 1, 0)) as NumberOfSurveys 
        from users_survey_answers as t
        group by t.email, t.company_id
    ) as usa on usa.email = uc.email and usa.company_id = uc.company_id
    left outer join
    (
        select
            t.email, t.company_id,
            sum(if(t.redeemed = 0, 1, 0)) as NumberOfRewards
        from users_rewards as t
        group by t.email, t.company_id
    ) as ur on ur.email = uc.email and ur.company_id = uc.company_id
where
    scanned = 1 and
    uc.email = 'test@gmail.com' 
```

# svn - 为什么SVN占用这么多空间？

> ID：13657359
> 
> 赞同：17
> 
> 时间：2012-12-01T07:22:33.297
> 
> 标签：svn

我正在处理一个大小约为 1020 MB 的大型项目。这是因为除了代码之外，我们在版本控制中还有其他资源，比如图形、XML 配置等。

.svn-base 文件的大小约为 998 MB，总结帐大小约为 2 GB。据我了解 .svn-base 是元信息，它的大小不应该那么大。

为什么SVN需要这么大的空间？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-02T18:35:55.863

如果您的工作副本有很多更新，它的大小可能会增长，甚至比签出的内容可能暗示的还要多。跑步`svn cleanup`将再次释放这个空间。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-01T07:23:32.273

这样`svn revert`就不需要联系服务器了。

SVN 实际上在本地存储了该文件的另一个副本。这就是为什么`.svn`dirs 总结起来几乎就是项目代码库本身的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:52:50.953

对于二进制数据，SVN 将整个副本存储在每个新修订版上，而不是增量。因此 - 随着时间的推移，您将获得大型存储库。`.svn-base`存储工作副本的原始状态 - 如果您有一个大的工作副本，您将拥有相同大小的原始数据。

# mysql - mysql group_concat 输出作为另一个查询列列表

> ID：13657360
> 
> 赞同：0
> 
> 时间：2012-12-01T07:22:33.687
> 
> 标签：mysql, crosstab

我想在 MySQL 中生成一个交叉表查询。我用过`group_concat`，但它不起作用。我发出以下查询来生成年份列表：

```
set @v1 = (SELECT GROUP_CONCAT(DISTINCT 
CONCAT('\\nsum(CASE WHEN myear=\"', myear ,'\" 
THEN amount ELSE NULL END) AS\"', myear,'\"')) AS column_list
FROM mdata
where myear > 1972 and myear < 1974);
select myear, amount, @v1 from mdata; 
```

它生成了`@v1`包含二进制字段的年份列表。我想在下一个查询中使用它来进行交叉表查询。

我可以使用 PHP 运行第一个查询并将值存储在一个变量中并在下一个查询中使用它，但是如何在 MySQL 中完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:31:55.600

您必须从要执行的 SQL 中[准备一条语句：](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html)

```
SET @v1 = (
  SELECT CONCAT('
    SELECT myear, amount, ',
           GROUP_CONCAT(DISTINCT CONCAT(
             'SUM(CASE WHEN myear=', QUOTE(myear), ' THEN amount END)
                AS `', REPLACE(myear, '`', '``'), '`'
           )), '
    FROM mdata'
  )
  FROM   mdata
  WHERE  myear > 1972 AND myear < 1974
);

PREPARE stmt FROM @v1;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# jquery - 打开一个新的弹出窗口并将数据发布到它

> ID：13657362
> 
> 赞同：6
> 
> 时间：2012-12-01T07:23:04.173
> 
> 标签：jquery, popup, http-post

我正在使用 jQuery 打开一个弹出窗口，我想在它打开时使用 post 方法向它发送数据。任何人都可以帮助我，提前谢谢。

我目前正在使用 get 方法传递数据，因此数据是 url 的一部分，但我不希望数据在 url 中可见。

```
function openWindow(){

    var name = $('#name').val();

    var url = 'popup_window.php?name='+name;
    window.open(
        url,
        'popUpWindow',
        'height=400,     \
         width=650,      \
         left=300,       \
         top=100,        \
         resizable=yes,  \
         scrollbars=yes, \
         toolbar=yes,    \
         menubar=no,     \
         location=no,    \
         directories=no, \
         status=yes');
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T08:19:12.263

这是基于[如何打开弹出窗口并使用父窗口中的数据填充它的答案？](https://stackoverflow.com/questions/1740783/open-popup-and-poulate-it-with-data-from-parent-window?rq=1)

```
var newpage;
function openWindow() {
    $.post('popup_window.php', {name: $('#name').val()}, function(result) {
        newpage = result;
        window.open('Popup.html', 'popUpWindow','height=400, width=650, left=300, top=100, resizable=yes, scrollbars=yes, toolbar=yes, menubar=no, location=no, directories=no, status=yes');
    });
} 
```

Popup.html 应包含：

```
<script type="text/javascript">
    if(window.opener && !window.opener.closed) {
        document.write(window.opener.newpage);
    }
</script> 
```

# google-maps-api-3 - Google Map API v3 解析 xml 并通过标签名称获取元素

> ID：13657364
> 
> 赞同：0
> 
> 时间：2012-12-01T07:23:09.593
> 
> 标签：google-maps-api-3, xml-parsing

我在解析要在谷歌地图中作为标记覆盖的 xml 时遇到了一些问题，首先，我有一个这样的 XML 文件

```
<root> 
```

`<weather>`

`<city>city_name</city>`

`<level>1</level>`

`<data>weather_data</data>`

`<lat>-6.211544</lat>`

`<lon>106.845172</lon>`

```
<elevation>13.41</elevation> 
```

`</weather>`

```
</root> 
```

如您所见，我在一个标签中包含了必要的数据，而不是属性，问题是，在 V2 中，我使用了 GDownloadUrl 和 GXml 解析和 getelementsbytagname 方法。在 V3 中，我似乎无法使用 GDownloadUrl，而且我在互联网上看到的所有示例都使用属性解析。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:44:01.287

查看 geoxml3 的源代码（polys[分支](http://code.google.com/p/geoxml3/source/browse/branches/polys/geoxml3.js)或[kmz 分支](http://code.google.com/p/geoxml3/source/browse/branches/kmz/geoxml3.js)）；nodeValue 函数，这是来自 kmz 分支，polys 分支略有不同，两者都可以：

```
/**
 * Extract the text value of a DOM node, with leading and trailing whitespace trimmed.
 *
 * @param {Element} node XML node/element.
 * @param {Any} delVal Default value if the node doesn't exist.
 * @return {String|Null}
 */
geoXML3.nodeValue = function(node, defVal) {
  var retStr="";
  if (!node) {
    return (typeof defVal === 'undefined' || defVal === null) ? null : defVal;
  }
  if(node.nodeType==3||node.nodeType==4||node.nodeType==2){
     retStr+=node.nodeValue;
  }else if(node.nodeType==1||node.nodeType==9||node.nodeType==11){
    for(var i=0;i<node.childNodes.length;++i){
      retStr+=arguments.callee(node.childNodes[i]);
    }
  }
  return retStr;
} 
```

另一种选择是v2 中两个 Gxml 函数[的](http://www.geocodezip.com/scripts/Gxml.js)实现。

# android - 多种字体在应用程序中不工作

> ID：13657370
> 
> 赞同：5
> 
> 时间：2012-12-01T07:23:57.527
> 
> 标签：android, fonts, reboot

朋友们，遇到一个奇怪的问题。我想在同一个应用程序中使用两种字体（[古吉拉特](http://en.wikipedia.org/wiki/Gujarati_language)语和[印地语](http://en.wikipedia.org/wiki/Hindi)）。这是在设备中安装字体的过程

*   需要的根设备。
*   安装[字体安装](https://play.google.com/store/apps/details?id=com.jrummy.font.installer&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5qcnVtbXkuZm9udC5pbnN0YWxsZXIiXQ..)程序
*   从此[网站](https://fedorahosted.org/lohit/)下载 `Lohit-Devanagari.ttf`和`Lohit-Gujarati.ttf`
*   复制ttf文件文件在`/system/fonts`
*   给定读/写权限并安装了两种字体
*   重启设备

**问题**

重启设备后，我只能读取我最后安装的字体。要么`Gujarati`或`Devangari`

**注意：- 我正在创建仅适用于所有应用程序的软键盘应用程序，因此我不能使用字体类**

我只是在为读取字体做 setText ..

```
textView1.setText("TextView1 ગુજરાતી");
textView2.setText("TextView2 हिन्दी "); 
```

**我想要这样**。

```
TextView1 ગુજરાતી
TextView2 हिन्दी 
```

**但我得到这样的输出**

```
TextView1 ગુજરાતી
TextView2 ☐☐☐☐☐☐ 
```

**或者**

```
TextView1 ☐☐☐☐☐☐☐
TextView2 हिन्दी 
```

**注意：- 我正在创建仅适用于所有应用程序的软键盘应用程序，因此我不能使用字体类**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:40:10.800

借助 Font Installer 应用程序安装字体，只需替换 /system/fonts 中的 DroidSansFallback.ttf 文件。我建议您将印地语和古吉拉特语（在您的情况下）的字体合并为一个，然后使用您的应用程序安装字体。现在你可以看到你的两种字体了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:28:59.670

您是否尝试将这些字体放在您的资产文件夹中？

```
Typeface tf = Typeface.createFromAsset(this.getAssets(), "fonts/Lohit-Devanagari.ttf");
TextView tv = (TextView) findViewById(R.id.txtOnlyOne)
tv.setText("TextView1 ગુજરાતી");    
tv.setTypeface(tf); 
```

系统中的根和字体是必需的吗？

# for-loop - J 编程初学者循环

> ID：13657371
> 
> 赞同：2
> 
> 时间：2012-12-01T07:23:59.463
> 
> 标签：for-loop, while-loop, j, tacit-programming

有人可以解释一下 J 中的控制结构（特别是 For 和 While 循环）吗？假设我有 a=:1 和 b=:10，我想使用 For/While 循环将 '1' 添加到 'a' 直到 a < b。

所以，通常它会像（在其他语言中）

```
for i= 1 to b   
a=a+1    
next i 
```

或者

```
while a<=b    
a=a+1    
end 
```

请帮忙。我知道这很简单，但我不知道如何在循环中执行此操作。

另外，我读到了一些叫做“explicits”的东西。例如：

```
foo=: 3 : 0
if. 1 do. wdinfo 'success' end.
) 
```

3 和 0 代表什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T04:47:19.060

[控制结构](http://www.jsoftware.com/docs/help701/dictionary/ctrl.htm)必须在[显式定义](http://www.jsoftware.com/docs/help701/dictionary/d310n.htm)中使用。显式定义链接​​将解释“3”和“0”的含义，但请注意以下内容是等效的。

```
myfunction=: 3 : 0
  NB. define function/verb here
) 

myfunction=: verb define
  NB. define function/verb here
) 
```

这是定义包含 for 循环的显式函数/动词的示例：

```
for_eg=: verb define
 a=. 3
 b=. 8
 for. i.b do.
   a=. a + 1
 end. 
 a
) 
```

这是使用该动词的示例：

```
for_eg ''
11 
```

Jwiki 包含一个描述如何定义动词的[wiki 页面。](http://www.jsoftware.com/jwiki/Guides/Defining%20Verbs)请注意底部的参考资料以获取更多信息。

# caching - 如何判断 nginx 是否正在缓存具有（共享）最大年龄的响应，公共？

> ID：13657378
> 
> 赞同：1
> 
> 时间：2012-12-01T07:25:09.697
> 
> 标签：caching, symfony, nginx, symfony-2.1, http-caching

是否有可能知道我得到的响应是新的（我是第一个发出该请求的）还是从缓存中出来的（其他人或我已经发出了该请求并且缓存是新的）。

我可以访问所有内容，但我找不到在哪里查看命中/未命中。

我也看不到标题中的任何内容，表明响应的年龄（只有最大年龄）。

当我使用 Symfony2 的 AppCache 而不是 nginx 缓存时，我可以看到一个 Age 标头。nginx 是否也应该添加该标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T13:35:45.027

我发现[了这个](http://forum.nginx.org/read.php?2,226331,226337#msg-226337)：

```
add_header X-Cache $upstream_cache_status; 
```

似乎工作正常。

# javascript - 添加删除事件

> ID：13657387
> 
> 赞同：3
> 
> 时间：2012-12-01T07:26:50.303
> 
> 标签：javascript, memory-leaks, dom-events

我最近读了一篇关于跨浏览器事件处理的教程……[跨浏览器事件处理……](http://msdn.microsoft.com/en-us/magazine/ff728624.aspx)

我已经将教程中的一些实践改编为像这样浮动的通用函数......

```
function isHostMethod(object, property) {
    var type = typeof object[property];
    return type === "function" || (type === "object" && !! object[property]) || type === "unknown";
}

var events = {
    add: (function() {
        if (isHostMethod(this, 'addEventListener')) {
            return function(element, type, handler) {
                element.addEventListener(type, handler, false);
            };
        } else if (isHostMethod(this, 'attachEvent')) {
            return function(element, type, handler) {
                element.attachEvent('on' + type, function() {
                    handler.call(element, window.event);
                });
            };
        } else {
            return function(element, type, handler) {
                element['on' + type] = handler;
            };
        }
    }()),
    remove: (function() {
        if (isHostMethod(this, 'removeEventListener')) {
            return function(element, type, handler) {
                element.removeEventListener(type, handler, false);
            };
        } else if (isHostMethod(this, 'detachEvent')) {
            return function(element, type, handler) {
                element.detachEvent('on' + type, function() {
                    handler.call(element, window.event);
                });
            };
        } else {
            return function(element, type, handler) {
                element['on' + type] = null;
           };
       }
    }())
}; 
```

用法：

```
var img_wrap = document.getElementById('img_wrap'),
    img = img_wrap.getElementsByTagName('img'),
    img_amount = img.length;

function do_stuff() {
    //
    //do stuff - update preloaded percentage, etc. 
    //
    events.remove(this, 'load', do_stuff);
}

for (var i = 0; i < img_amount; i += 1) {
    events.add(img[i], 'load', do_stuff);
} 
```

**这就是我很好奇...**
1\. 'isHostMethod' 功能是否必要？
2\. 本教程警告内存泄漏，并概述了一个附加函数，以避免它们使用“唯一 ID”作为对每个元素的引用......这还没有被包括在内......也许我正在监督一些事情，但我没有认为在我的情况下这是必要的......*或者*我应该担心吗？

jsfiddle[这里](http://jsfiddle.net/ZgXaN/2/) 警告：图像很大，需要一段时间才能下载，大量带宽等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:39:55.107

> > 1.isHostMethod功能有必要吗？

*不，除非你坚持支持 IE6、7 和 8。现在每个现代浏览器都*使用*`addEventListener()`和`removeEventListener()`。*

 *所以我想这是不可接受的，这就是人们使用像 mootools 和 jQuery 这样的库的原因。他们会为你处理好这些。

> > 2.本教程警告内存泄漏，并概述了一个附加功能，以避免它们使用“唯一 ID”作为对每个元素的引用……这还没有被包括在内……也许我正在监督一些事情，但我没有认为在我的情况下这是必要的，还是我应该担心内存泄漏？

看情况。如果您要构建 Gmail、Stackoverflow、FB、G+ 或 Twitter，内存泄漏确实很重要，因为这些站点上的页面几乎不会刷新，并且会存在很长时间。

但是，如果您只想制作网页，请附加一些事件，人们会单击链接并移至下一个。由于上下文将在它们继续前进时被释放，即使您确实泄漏了一些内存，也不会造成任何麻烦（尽管我认为您应该尽量避免它，但这不是*必须*的。）

这是 IBM 提供的关于如何避免内存泄漏的[教程](https://www.ibm.com/developerworks/library/wa-memleak/)（这有点过时，并且某些模式不再是内存泄漏。）它可能会对您有所帮助。

在实践中，您始终可以使用 Chrome 的检查器来分析内存使用情况，这是一个非常强大的工具。*

# php - jquery提交需要点击两次

> ID：13657395
> 
> 赞同：2
> 
> 时间：2012-12-01T07:28:55.397
> 
> 标签：php, jquery, ajax

```
$(document).ready(function () {
$.validator.setDefaults({
    submitHandler: function () {
        $('#search').submit(function () {
            var city = $("#city").val();
            var adults = $("#adults").val();
            var children = $("#children").val();
            var SDate = $("#hotelStartDate").val();
            var EDate = $("#hotelEndDate").val();
            SDate = SDate.substr(6, 4) + '-' + SDate.substr(3, 2) + '-' + SDate.substr(0, 2);
            EDate = EDate.substr(6, 4) + '-' + EDate.substr(3, 2) + '-' + EDate.substr(0, 2);
            jQuery(":submit", this).css("display", "none");
            jQuery(":submit", this).after("<span class='button nice awesome green large radius'>Searching...</span>");
            location.href = 'http://www.dhitrax.com/destination.php?checkin=' + SDate + '&checkout=' + EDate + '&city=' + city + '&adults=' + adults + '&children=' + children;
            return false;
        });
    },
    highlight: function (input) {
        $(input).addClass("ui-state-highlight");
    },
    unhighlight: function (input) {
        $(input).removeClass("ui-state-highlight");
    }
});
$().ready(function () {
    $.fn.themeswitcher && $('<div/>').css({
        position: "absolute",
        right: 10,
        top: 10
    }).appendTo(document.body).themeswitcher();
    $("#search").validate({
        rules: {
            city: "required",
            hotelStartDate: "required",
            hotelEndDate: "required"
        },
        messages: {
            City: "Please type your destination",
            hotelStartDate: "Select check in Date",
            hotelEndDate: "Select check out Date"
        }
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:02:17.543

您不应该将事件处理程序绑定到现有jQuery 验证提供的`submit`事件*中。*`submitHandler`提交表单需要点击两次，因为第一次提交时，处理程序被绑定，第二次提交处理程序被执行。

这应该就像将代码移动到`submitHandler`：

```
$.validator.setDefaults({
    submitHandler: function () {
        var city = $("#city").val();
        var adults = $("#adults").val();
        var children = $("#children").val();
        var SDate = $("#hotelStartDate").val();
        var EDate = $("#hotelEndDate").val();
        SDate = SDate.substr(6, 4) + '-' + SDate.substr(3, 2) + '-' + SDate.substr(0, 2);
        EDate = EDate.substr(6, 4) + '-' + EDate.substr(3, 2) + '-' + EDate.substr(0, 2);
        jQuery(":submit", this).css("display", "none");
        jQuery(":submit", this).after("<span class='button nice awesome green large radius'>Searching...</span>");
        location.href = 'http://www.dhitrax.com/destination.php?checkin=' + SDate + '&checkout=' + EDate + '&city=' + city + '&adults=' + adults + '&children=' + children;
    },
    highlight: function (input) {
        $(input).addClass("ui-state-highlight");
    },
    unhighlight: function (input) {
        $(input).removeClass("ui-state-highlight");
    }
}); 
```

# android - 如何在android中生成随机数jni

> ID：13657399
> 
> 赞同：2
> 
> 时间：2012-12-01T07:29:30.560
> 
> 标签：android, c, java-native-interface

您好我正在尝试将我`java`的代码转换为代码以`c`获得更好的速度，

我想在`c code`使用中生成一个随机数`jni(android)`

在java代码中，

```
public  int getRandomNumberFor()
    {
        Random random ;
        random = new Random();
        return random.nextInt(0xFF);
    } 
```

我不知道什么代码适用于`c`

我尝试找到示例，但不幸的是我不明白。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T07:37:48.607

将代码更改为在 NDK 中使用 C 编程：

```
#include <stdio.h>
#include <stdlib.h>

JNIEXPORT jint JNICALL Java_com_imrantestndk_androiddemo_NativeLib_Randomnum
  (JNIEnv * env, jobject this){
    int n;
     n = rand()%100 + 1;

    return n;
} 
```

或者

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
JNIEXPORT jint JNICALL Java_com_imrantestndk_androiddemo_NativeLib_Randomnum
  (JNIEnv * env, jobject this){
int random;
randomize();
random = random(100);
return random;
} 
```

# wpf - 从列表中拖动一个未选中的项目，一个已经选中的项目在鼠标按下事件时不会进入拖动信息？

> ID：13657401
> 
> 赞同：0
> 
> 时间：2012-12-01T07:30:27.257
> 
> 标签：wpf, drag-and-drop

在 WPF ItemsControl 中，拖动已选中项目并按下控制键的项目（未选中）不会将单击的项目放入项目控件的已选项目列表中。因此，第二个项目（未选择但被拖动）永远不会被丢弃，因为它不在选定的项目控件列表中。DragInfo 对象是在拖动源的鼠标左键按下事件上创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:10:09.537

不使用所选项目，而是在 MouseDown 事件中使用 InputHitTest 来查找被单击的元素，并使用该元素的 DataContext 创建 DragInfo 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:41:09.113

我不确定这是否是您想要的，但您可以处理`OnPreviewMouseleftButtonDown`事件并将拖动（但未选择）的项目添加到`SelectedItems`.

# python - 使用动态 IP 配置远程 MYSQL

> ID：13657404
> 
> 赞同：0
> 
> 时间：2012-12-01T07:31:01.507
> 
> 标签：python, networking, cpanel

我正在将我的 python 软件连接到远程 msql 服务器。

我不得不在 cPanel 上为我的计算机添加一个访问主机，但问题是访问主机，即我的 IP，是动态的。

我怎样才能连接到远程服务器而不必每次都更改访问主机？

谢谢大家，网络是我的弱点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:35:46.910

您最好的选择可能是找到 [动态 DNS] 提供商。这个想法是在您的机器上运行一个客户端，它更新远程服务器上的 DNS 条目。然后您可以使用提供的主机名代替您在 cPanel 中的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-21T07:37:52.993

有一个适用于 linux 的 bash 脚本，可以运行该脚本来持续检查 IP 是否已更改，并在必要时更新提供程序记录。它适用于 cPanel，需要编辑代码以插入凭据，这很简单。

从[github下载](https://github.com/CpanelInc/cpanel-dynamicdns-tools)

# javascript - 我无法使用表单的 onSubmit 属性更改谷歌地图的中心

> ID：13657405
> 
> 赞同：1
> 
> 时间：2012-12-01T07:31:06.483
> 
> 标签：javascript, html, google-maps-api-3

我的目标是最终允许用户在两​​个文本框中输入坐标，然后提交表单以使用新值更改谷歌地图的中心。我目前正在测试只是将一个按钮作为表单的一部分。单击按钮时，具有两个硬编码值的函数应更改地图的中心，但它不起作用。初始地图已正确创建，但单击按钮时地图的中心不会改变。这是我的javascript代码：

```
 var map;
    var center;
    var mapOptions;

    function reMap() {
     alert("setting the center");
     center = new google.maps.LatLng(41.4200, -73.9550);
         map.setCenter(center);
         map.setZoom(10);
    }

    function initialize() {
     document.getElementById('location').onSubmit = reMap;

         mapOptions = {
             center: new google.maps.LatLng(-34.397, 150.644),
             zoom: 8,
             mapTypeId: google.maps.MapTypeId.ROADMAP
         };
         map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 

     }
      google.maps.event.addDomListener(window, 'load', initialize); 
```

这是html：

```
 <!DOCTYPE html>
    <html>
      <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
         html { height: 100% }
          body { height: 100%; margin: 0; padding: 0 }
          #map_canvas { height: 100% }
        </style>
        <script type="text/javascript"
          src="https://maps.googleapis.com/maps/api/js?key=MY_KEY&sensor=false">
        </script>
        <script type="text/javascript"
          src="js/mapActions.js">
        </script>
      </head>
      <body >
      <div><form id="location" action="" method="post">
       <fieldset> <input type="submit" value="try" id="try"></fieldset></form></div>
        <div id="map_canvas" style="width:100%; height:100%"></div>
      </body>
    </html> 
```

任何关于为什么这不起作用的想法将不胜感激。请注意，如果我将输入类型更改为“按钮”并将“onClick = reMap()”添加到 html，那么它实际上可以工作，但就像我提到的那样，我需要能够使用表单，我宁愿没有函数调用在 HTML 中。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:06:14.717

正如 Marcelo 所指出的，表单提交操作将重新加载页面。你说你不能（或者不想使用他提出的解决方案。为了防止提交操作重新加载页面，该函数需要返回“false”。

未测试：

```
function reMap() {
  // alert("setting the center");
  center = new google.maps.LatLng(41.4200, -73.9550);
  map.setCenter(center);
  map.setZoom(10);
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:40:54.933

表单的提交操作只会重新加载整个页面。试试这个按钮，没有任何`<form>...</form>`标签：

```
<input type="button" value="Go to Chicago" id="chicago" onclick="function(){map.setCenter(new google.maps.LatLng(41.850033, -87.6500523))}"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T07:41:06.977

```
document.getElementById('location').onSubmit = reMap; 
```

将其更改为：

```
document.getElementById('location').onsubmit = reMap; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T08:45:00.583

是的，您在 initialize() 中名为“reMap()”的函数分配似乎是错误的，

“document.getElementById('location').onSubmit = reMap;”

它应该是 onsubmit()，然后它将被解决，否则工作正常。

# c# - 有什么方法可以从 WCF Web 服务方法访问 cookie 值？

> ID：13657407
> 
> 赞同：4
> 
> 时间：2012-12-01T07:31:15.750
> 
> 标签：c#, .net, wcf, web-services, cookies

我正在将我的 Web 服务从 .ASMX 切换到 .SVC，但是其中一些依赖于 HTTP 请求中传入的 cookie 值。

对于 WCF Web 服务，`HttpContext.Current`为空。您可以通过设置`aspNetCompatibilityEnabled`来更改此设置`true`，但是此设置与我也想使用的 IIS7 上的集成管道模式不兼容。

WCF 是否实现了一些很酷的现代访问 cookie 的新方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:32:33.240

> WCF 是否实现了一些很酷的现代访问 cookie 的新方式？

WCF 确实有一种访问 cookie 的方法，但我不知道我是否将其称为“酷新现代”。本质上，在您的服务操作中，您可以访问该`WebOperationContext.Current.IncomingRequest.Headers[HttpRequestHeader.Cookie]`属性，这将为您提供`Cookie`客户端发送的标头的值 - 作为字符串。那时，您可以随意解析它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T09:04:14.740

除了正确答案之外，您还需要确保将绑定的 allowCookies 属性设置为 false。

如果设置为 true，WCF 将接管 cookie 管理，并在 cookie 到达您的代码之前将其从标头中删除。见[MSDN 论坛](https://social.msdn.microsoft.com/Forums/vstudio/en-US/9e2659b8-6834-464b-a618-1fcd2359a654/bug-in-wcf-cookie-header-is-deleted-in-httprequestmessageproperty-but-not-any-other-headers?forum=wcf)

（抱歉，还不能评论。）

# scala - Play Framework 2.1 升级，现在必须为视图投射所有内容？

> ID：13657408
> 
> 赞同：1
> 
> 时间：2012-12-01T07:31:26.830
> 
> 标签：scala, playframework, playframework-2.1

我刚刚从现有项目的 2.0 迁移到 Play Framework 2.1-RC1，由于某种原因，我现在必须在渲染视图时将所有内容从 Java 类转换为 Scala 类。（显然我在 Java 项目而不是 Scala 项目中使用 Play）

下面是一个示例错误...

```
render(java.lang.String,scala.collection.immutable.List<models.User>) in views.html.list cannot be applied to (java.lang.String,java.util.List<models.User>) 
```

而我的观点最重要的是......

```
@(message: String, users : List[models.User]) 
```

据此，我推测由于某种原因，类不会自动`java.util.List`转换为等效的 scala。在这个阶段，我是 Java 人，而不是 Scala 人，所以我可能会做一些愚蠢的事情。

调用渲染的示例代码...

```
public static Result list() {
        List<User> users = MorphiaManager.getDatastore().find(User.class).asList();
    System.out.println("about to try to display list of " + users.size() + " users");
        return ok(list.render("Welcome", msgs));
    } 
```

Build.scala 下面

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "blah-worker"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
  // Play framework dependencies
  javaCore, javaJdbc, javaEbean,
  // Add your project dependencies here,
  "org.apache.camel" % "camel-core" % "2.10.0",
  "org.apache.camel" % "camel-jms" % "2.10.0",
  "org.apache.camel" % "camel-mail" % "2.10.0",
  "org.apache.camel" % "camel-jackson" % "2.10.0",
  "org.apache.camel" % "camel-gson" % "2.10.0",
  "org.apache.activemq" % "activemq-core" % "5.6.0",
  "org.apache.activemq" % "activemq-camel" % "5.6.0",
  "org.apache.activemq" % "activemq-pool" % "5.6.0",
  "com.google.code.morphia" % "morphia" % "0.99.1-SNAPSHOT",
  "com.google.code.morphia" % "morphia-logging-slf4j" % "0.99",
  "cglib" % "cglib-nodep" % "[2.1_3,)",
  "com.thoughtworks.proxytoys" % "proxytoys" % "1.0",
  "org.apache.james" % "apache-mime4j" % "0.7.2",
  ("org.jclouds" % "jclouds-allblobstore" % "1.5.0-beta.4").exclude("com.google.guava", "guava").exclude("org.reflections", "reflections"),
  ("org.reflections"                  %    "reflections"              %   "0.9.7").exclude("com.google.guava", "guava").exclude("javassist", "javassist")
)

val main = play.Project(appName, appVersion, appDependencies).settings(
  // Add your own project settings here
  resolvers += "Morphia repo" at "http://morphia.googlecode.com/svn/mavenrepo/",
  resolvers += "CodeHaus for ProxyToys" at "http://repository.codehaus.org/",
  checksums := Nil
)

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:54:34.563

您是否缺少新的“javaCore”依赖项？使用 Play 2.1 的 Java 项目需要它。在此处查看迁移详细信息：

[https://github.com/playframework/Play20/wiki/Migration](https://github.com/playframework/Play20/wiki/Migration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:14:02.793

想通了，我没有更新`Build.scala`.

具体来说...

```
import PlayProject._ 
```

应该更新到...

```
import play.Project._ 
```

这在迁移指南中也有详细说明（但我错过了）：[https ://github.com/playframework/Play20/wiki/Migration](https://github.com/playframework/Play20/wiki/Migration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:51:08.873

我不确定它是否会解决您的问题，但您可以尝试添加此导入：

`import scala.collection.JavaConversions.*;`

# azure - Azure 网站：免费、共享、保留的区别？

> ID：13657411
> 
> 赞同：7
> 
> 时间：2012-12-01T07:31:53.190
> 
> 标签：azure

我有 ASP.NET 网站 + 数据库。我想尝试将其部署到 ms 云中。我期待 Azure“[网站](http://www.windowsazure.com/en-us/pricing/calculator/)”。我不清楚免费，共享，保留之间有什么区别。我需要使用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T07:48:58.887

查看此链接：[https](https://www.windowsazure.com/en-us/pricing/details/#header-1) ://www.windowsazure.com/en-us/pricing/details/#header-1并单击左侧的网站链接。这应该让您了解 3 个模型之间的差异。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T08:16:18.697

查看下面的这个链接，它清楚地解释了免费、共享和保留网站模式之间的区别。

[http://www.windowsazure.com/en-us/manage/services/web-sites/how-to-scale-websites/#freemode](http://www.windowsazure.com/en-us/manage/services/web-sites/how-to-scale-websites/#freemode)

希望这可以帮助。！

# jquery - JS 不能在加载的 html 上工作

> ID：13657413
> 
> 赞同：0
> 
> 时间：2012-12-01T07:32:29.170
> 
> 标签：jquery, html, load, jquery-select2

我正在使用[select2](http://ivaynberg.github.com/select2/)，基于 jQuery 的选择框。
并希望通过选择多个选项来加载页面的一部分。
这很好用，但是 javascript 在加载的部分上不起作用。
我该如何解决这个问题？

```
<script>
$(function(){
  $("#e1").on("change", function(e){
   $(".map_border").load('.', {"age":e.val, "cat":$("#e2").select2("val") });
 });
});
$(function(){
  $("#e2").on("change", function(e){
   $(".map_border").load('.', {"cat":e.val, "age":$("#e1").select2("val") });
 });
});
</script>

<div class="selector">
 <select id="e1">
  <option value="1">小学生&lt;/option>
  <option value="2">中学生&lt;/option>
  <option value="3">高校生&lt;/option>
 </select>
 <select id="e2">
  <option value="1">算数</option>
  <option value="2">英文法&lt;/option>
 </select>
</div>

<div class="map_border" style="height:{{max_loop}}px">
・・・loaded part・・・
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:26:50.357

使用 jQuery .live() 或 .on() 取决于您使用的 jQuery 版本。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# asp.net - 下拉框位于右侧？！我希望它直接位于文本框下方

> ID：13657414
> 
> 赞同：-2
> 
> 时间：2012-12-01T07:33:01.330
> 
> 标签：asp.net, c#-4.0, asp.net-ajax, ajaxcontroltoolkit

嗨，我希望有人可以帮助我解决这个问题，因为它让我发疯！

我有一个 C#、asp.net 网页（带有 Master.Page），在该网页中我放置了一个和在其中放置了一个组合框（来自 AJAX 工具包）。将多个项目附加到组合框并且用户单击向下箭头时，下拉框（通常）出现在组合框文本框的正下方。在我的情况下，这个下拉框出现在右边！我的意思是它超出了可见页面！是否有一个原因？我究竟做错了什么？

这是我的代码示例：温和中等热

在此先感谢您的帮助史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:17:18.503

问题不清楚。也许您的意思是您的下拉值不在文本框下方。如果是这种情况，您必须根据您的要求通过调整 CSS 来修复它。

# javascript - 有什么方法可以加快基于滚动调整的元素放置速度？

> ID：13657423
> 
> 赞同：0
> 
> 时间：2012-12-01T07:34:26.553
> 
> 标签：javascript, jquery, optimization, scroll

我有一个位于左上角的元素。它是打印管理器的一部分，上面有一些 UI。这是我用来确保它位于滚动条上的相同位置的代码。

```
var printManagerElement = document.getElementById("printManager");
var windowReference = $(window);
window.onscroll = function () {
  printManagerElement.style.top = windowReference.scrollTop() + "px";
}; 
```

当滚动缓慢时，没有撕裂。但是，如果我尽可能快地滚动一次鼠标滚轮，或者抓住滚动条并快速移动它，那么我会注意到一瞬间的撕裂。

撕裂可以预防吗？有没有办法可以加快这段代码的速度？或者这种方法的替代方法？

*编辑*

div的样式是这样的

```
padding:2px;
margin:2px;
border: 1px solid blue; 
background-color:white;
position:absolute;
top:0px;
left:0px;
z-index:10; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:45:19.347

你需要的只是 CSS。

```
position:fixed; top:0; left:0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:44:16.397

我认为您应该改用 CSS。在您的 CSS 文件中，按如下方式使用它：

```
#printManager {
    position: fixed;
    top: 10px;
    left: 10px;
} 
```

这会将您的打印管理器放置在距浏览器窗口左上角的顶部 10px 和左侧 10px 处

# java - 用于连续分析的范围内的随机数生成器

> ID：13657426
> 
> 赞同：1
> 
> 时间：2012-12-01T07:34:32.313
> 
> 标签：java

我可以使用从一个范围内创建随机数

```
Random rand = new Random();
int num = rand.nextInt(10);
System.out.println("Generated Random Number between 0 to 10 is : " + num); 
```

但是，如果我需要生成的下一个随机数成为已经生成的范围`minus`的一部分，那么将上述语句保持在一个循环中就足够了吗？

此外，一旦我用完该范围内的所有数字，我就需要停下来。

例如，

该代码给了我一个 [0-10] 之间的随机数，

`1st - 4`- 范围 {[0-10]}

`2nd - 9`- 范围 {[0-10]-4}

`3rd - 8`- 范围 {[0-10]-4,9}

..

..

`10th - 10`- 范围 {[0-10]-[0-9]}

这个函数会从 [Range]{this is my requirements} 或 (Range) 输出吗？或者有没有更好的替代解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:36:30.863

最简单的方法可能是：

*   将数字（0到10）放在一个列表中
*   [在那个名单上](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)打电话[`Collections.shuffle()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)
*   循环列表

就像是：

```
List<Integer> numbers = Arrays.asList(0, 1, 2, 3, 4, 5, 6, 7, 8, 10);
Collections.shuffle(numbers);
System.out.println(numbers); 
```

如果默认设置不适合您，您甚至可以为洗牌操作[提供随机生成器。](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List,%20java.util.Random%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:41:05.260

我不认为这是可能的。尝试记住您已经在列表中生成的数字并使用它来生成更多随机数，直到找到不在列表中的数字。

# jpa - EntityManager 保留已删除的实体

> ID：13657431
> 
> 赞同：0
> 
> 时间：2012-12-01T07:35:34.570
> 
> 标签：jpa, openjpa

在一项交易中，我运行

```
delete from OdpObjectScheduleEntity e where e.id = 956101 
```

然后，在另一个事务中（并且日志显示它在前一个事务提交后开始）我尝试`OdpObjectScheduleEntity`使用 id 956101 持久化一个新事务，但出现异常：

```
Caused by: <openjpa-2.2.0-r422266:1244990 nonfatal store error> org.apache.openjpa.persistence.EntityExistsException: An object of type "ru.focusmedia.odp.server.datastore.jpa.entity.OdpObjectScheduleEntity" with oid "956101" already exists in this context; another cannot be persisted.
FailedObject: ru.focusmedia.odp.server.datastore.jpa.entity.OdpObjectScheduleEntity@3ad41caa
    at org.apache.openjpa.kernel.BrokerImpl.checkForDuplicateId(BrokerImpl.java:5075)[106:org.apache.openjpa:2.2.0]
    at org.apache.openjpa.kernel.BrokerImpl.persistInternal(BrokerImpl.java:2651)[106:org.apache.openjpa:2.2.0]
    at org.apache.openjpa.kernel.BrokerImpl.persist(BrokerImpl.java:2571)[106:org.apache.openjpa:2.2.0]
    at org.apache.openjpa.kernel.BrokerImpl.persist(BrokerImpl.java:2554)[106:org.apache.openjpa:2.2.0]
    at org.apache.openjpa.kernel.BrokerImpl.persist(BrokerImpl.java:2458)[106:org.apache.openjpa:2.2.0]
    at org.apache.openjpa.kernel.DelegatingBroker.persist(DelegatingBroker.java:1077)[106:org.apache.openjpa:2.2.0]
    at org.apache.openjpa.persistence.EntityManagerImpl.persist(EntityManagerImpl.java:716)[106:org.apache.openjpa:2.2.0]
    at org.apache.aries.jpa.container.impl.EntityManagerWrapper.persist(EntityManagerWrapper.java:177)[58:org.apache.aries.jpa.container:1.0.0]
    at ru.focusmedia.odp.server.datastore.jpa.repository.RepositoryImpl$36.run(RepositoryImpl.java:2167)[157:ru.focusmedia.odp.server.datastore.jpa:0.1.0]
    at ru.focusmedia.odp.server.datastore.api.CheckedRunnable.call(CheckedRunnable.java:13)[155:ru.focusmedia.odp.server.datastore.api:0.1.0]
    at ru.focusmedia.odp.server.datastore.api.CheckedRunnable.call(CheckedRunnable.java:1)[155:ru.focusmedia.odp.server.datastore.api:0.1.0]
    at ru.focusmedia.odp.server.datastore.jpa.repository.RepositoryImpl.transact(RepositoryImpl.java:879)[157:ru.focusmedia.odp.server.datastore.jpa:0.1.0]
    ... 52 more 
```

这是合法行为吗？

# android - 当我在android中使用图表引擎时，如何在饼图中为图例和标签设置不同的值

> ID：13657432
> 
> 赞同：3
> 
> 时间：2012-12-01T07:35:36.987
> 
> 标签：android, achartengine

嗨，我正在使用图表引擎在 android 中显示饼图。在我的代码中，我想在标签和区域上显示与图例上的那个值相对应的值。但我无法得到那个。请任何人帮助我。提前致谢。

我想要像下面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:11:20.900

在 AChartEngine 中无法显示带有与图例标签不同的值的饼图标签。

但是，您可以使用以下方法在每个切片的中间显示饼图切片值（在您的情况下为年龄）：

```
renderer.setDisplayChartValues(true); 
```

代码中存在一个错误，当标签未显示时阻止显示图表值。我刚刚在 SVN 中解决了这个问题。您可以根据[此](http://code.google.com/p/achartengine/source/checkout)页面签出代码并运行`ant dist`以构建包含此修复程序的最新 achartengine.jar 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T06:56:32.657

我也有同样的问题，但现在解决了。谢谢丹...

您可以使用

```
renderer.setDisplayValues(true); 
```

这会在饼图本身中显示 %of 分布。

# c++ - 为 Node 成员重载类中的 += 运算符

> ID：13657433
> 
> 赞同：0
> 
> 时间：2012-12-01T07:35:40.500
> 
> 标签：c++, operators, overloading, nodes

我试图在我的程序中重载 += 运算符。它由一个多项式类组成，该类包括一个 int 次数（多项式的最高次数）和一个 Node* Poly（指向节点的指针）

```
struct Node{ int coefficient;
             Node* next; }; 
```

那是我的节点结构，虽然我在多项式类中重载。

```
 Polynomial& Polynomial::operator +=(const Polynomial& rP){
    Polynomial copyRP(rP);
    poly->coefficient = poly->coefficient + copyRP.poly->coefficient;
    poly = poly->next; //if I take this and
    copyRP.poly = copyRP.poly->next; //this away, it runs fine
    //with it however the program compiles but doesnt work 
    return *this;
  } 
```

该节点包含向后的系数列表，如果这很重要的话。例如 3x^2+2x+5 在节点中存储为 5->2->3 并且度数为 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:53:10.820

试试这个：

```
struct polynomial {
    std::vector< int > coeffs;
    std::size_t degree() const { return coeffs.size(); }
};

polynomial &polynomial::operator+= ( polynomial &lhs, polynomial const &rhs ) {
    if ( lhs.degree() < rhs.degree() ) lhs.coeffs.resize( rhs.degree() );
    for ( std::size_t k = 0; k != rhs.degree(); ++ k ) {
        lhs.coeffs[ k ] += rhs.coeffs[ k ];
    }
    return lhs;
} 
```

没有链表，没有手动内存管理，您可以轻松地将其更改为另一种数字类型。

# c++ - 物体绕其侧面旋转

> ID：13657436
> 
> 赞同：0
> 
> 时间：2012-12-01T07:35:56.647
> 
> 标签：c++, opengl, 3d

我正在尝试在我的项目中使用对象创建一些旋转动画。

目前为了动画对象，我编写了一些补间函数，它们将参数作为`value from, value to, value time`和补间对象，`from Param`并`to Param`在给定时间内补间对象运动。但是，我需要创建一些如下所示的动画：

![在此处输入图像描述](../Images/cfdd3edfc125c6be50e4e38e91caac47.png)

对象必须围绕某一侧旋转补间。所以，如果按照这个算法去，就像：

```
for(int rotationAmount = 0;rotationAmount<=90;rotationAmount++){
glPushMatrix();
glRotatef(rotationAmount,1,0,0);
Rectangle(500,500,200,100);
glPopMatrix();
} 
```

我仍然没有得到所需的效果，因为 Rectangle 而不是围绕某个边旋转看起来像围绕某个大圆圈的圆周旋转并返回。真的欢迎在这里就如何实现上述目标提出一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:51:42.223

glRotatef 将当前矩阵乘以旋转矩阵。旋转矩阵围绕坐标原点旋转。您需要将 orign 转换到对象的一侧，执行旋转，然后平移回来。

```
point_type point_on_the_side;
for(int rotationAmount = 0;rotationAmount<=90;rotationAmount++){
    glPushMatrix();
    glTranslatef(-point_on_the_side.x, -point_on_the_side.y, -point_on_the_side.z);
    glRotatef(rotationAmount,1,0,0);
    glTranslatef(point_on_the_side.x, point_on_the_side.y, point_on_the_side.z);
    Rectangle(500,500,200,100);
    glPopMatrix();
} 
```

# sql-server-2008 - 如何重写此过程以减少代码长度？

> ID：13657444
> 
> 赞同：-2
> 
> 时间：2012-12-01T07:37:43.887
> 
> 标签：sql-server-2008, tsql

以下过程需要更多时间来执行。如何重写此代码以提高性能。请分享您的想法，我从过去 4 天开始就面临这个问题，但我无法解决它。

```
 with (
                 [identityColumn] [varchar] (10) ,FileClaimNo  int ,EntityIDCode Varchar(20),EntityTypeQualifier  Varchar(20),PreviousEntityTypeQualifier varchar(10),Qualifier varchar(2),LineItemNo int ,REFQualifier Varchar(20),REFQualifierValue varchar(50) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:57:46.533

在这里给出任何好的建议是相当棘手的——只是一大堆 T-SQL 代码，没有解释它应该做什么，没有表结构，没有关于索引的信息等.....

我可以提出的一些模糊的建议是：

1.  如果参数`@P_CMSProviderxml`和`@P_CMSQualifierxml`是 XML - 使它们成为类型`XML`（不是`NTEXT` [已**弃用**且不应再使用](http://msdn.microsoft.com/en-us/library/ms187993.aspx)）

2.  **在**开始时将 XML 解析为临时表或表变量- 不要在代码中执行五次不同的操作

3.  如果这个存储过程正在做五件事——它做的太多了。将其分成五个不同的存储过程，每个过程都做自己的**一件事**（并且**只做一件事**）。

4.  不要试图一次“解决”所有问题 - 尝试将问题分解成更小的块，识别问题，一次解决一个（例如（a）解析 XML，以及（b）正确定义更新等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:01:12.947

尝试更改`ntext`为`nvarchar(4000)`

如果仍然很慢，则将 showplan_all 设置为 on；检查哪个语句有更高的estimateio或estimatecpu

# php - 如何正确检查用户名是否被使用？

> ID：13657451
> 
> 赞同：3
> 
> 时间：2012-12-01T07:39:15.887
> 
> 标签：php, mysql

我正在使用 PHP/MySQL。检查用户名是否已被使用的最佳方法是什么？

现在我所做的就是执行一个选择语句来查看用户名是否已经被使用。如果选择返回一行，那么我停止并显示一条错误消息。如果选择没有返回任何内容，那么我插入新用户。

但是有没有更有效的方法？例如，我可以在用户名列上使用 UNIQUE，然后只执行一个插入语句（如果它已经被插入，则从插入中得到一个错误）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T07:48:19.713

您确实有一些其他线程会在您的 SELECT 确认用户不存在和您插入它的 INSERT 之间的短暂时刻插入您的用户名的风险。这称为[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。

看起来发生这种情况的可能性很小，但有一种说法：“[百万分之一是下周二。](http://blogs.msdn.com/b/larryosterman/archive/2004/03/30/104165.aspx) ”

是的，对用户名的唯一约束可以防止您插入重复的用户名。声明该约束。

有些文章会告诉你，一旦你有了一个 UNIQUE 约束，你就不必再做 SELECT 了。只需*尝试*INSERT，如果它冲突，则报告错误。

但是，我帮助一个站点从这种技术引起的问题中恢复过来。在他们的网站上，用户试图非常快速地创建新用户名，并在 INSERT 上导致了很多冲突。问题是[MySQL 会增加表的自动增量主键，即使 INSERT 被取消](http://dev.mysql.com/doc/refman/5.5/en/innodb-auto-increment-handling.html)。并且这些自动增量值永远不会被重用。所以结果是他们每成功插入 1000-1500 个 ID 号。当他们的 INT 主键达到 2 ^(31) -1 并且他们无法在表中创建另一行时，他们打电话给我！

他们使用的解决方案是首先尝试 SELECT，然后报告重复。然后，如果它看起来安全，请尝试 INSERT——但无论如何都要编写代码来处理与 UNIQUE 约束可能发生的冲突，因为竞争条件仍然可能发生。

# php - PHP Array Zeros 除了一，提取该值

> ID：13657452
> 
> 赞同：2
> 
> 时间：2012-12-01T07:39:29.600
> 
> 标签：php, arrays

我有一个值不时变化的数组。它通常看起来像这样：

```
Array ( [0] => 0 [1] => 0 [2] => 9876 [3] => 0 [4] => 0 [5] => 0 [6] => 0 [7] => 0 [8] => 0 [9] => 0 [10] => 0 [11] => 0 ) 
```

除 1 外，所有值均为 0（索引位置将更改）。如果多个值大于 0，我需要执行特定的命令。否则，如果只有一个值大于 0，我需要获取该值并将其传递给特定命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:46:48.770

创建一个仅包含非空值的新数组。[`array_filter`](http://php.net/array_filter)没有回调将返回所有不评估为的元素`FALSE`。：

```
$a = array(...);
$values = array_filter($a);

switch(count($values)) {
  case 0: echo 'All 0!'; break;
  case 1: specificCommandWithValue($values[0]); break;
  default: executeSpecificCommand(); break;
} 
```

如果你有 false-y 值，你想保留 ( `FALSE`, `NULL`, `'0'`, `''`)，传递一个回调来进行严格的值比较：`function($el) { return $el !== 0; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:41:16.250

尝试

```
$count  =0;
foreach($array as $item){

   if($item !=0){
      $count = $count+1;
    }
}
if($count > 1){

//execute a specific command
}elseif($count == 1){
  // take that value and pass it to a specific command
}else{
  //all value are zero 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T07:48:43.440

这是@NullPointer 的答案，但我添加了一个变量来保存“那个值”。

```
$count  =0;
$nonzero = null;
foreach($array as $item){

   if($item !=0){
      $count = $count+1;
      $nonzero = $item;
    }
}
if($count > 1){

//execute a specific command
}elseif($count == 1){
  specific_command($nonzero);
}else{
  //all value are zero 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T08:06:04.130

$array = '你的数组';

函数查找（$数组）{

```
 $count = 0;
 $needle = -1;                
 foreach($array as $item){
         if($item > 0){
               $count++;
               $needle = $item;
         } 
         if($count > 1)
                return -1; //error as number of non-zeroes greater than 1
 }
 if($count > 0)
      return $needle;  //returns the required single non-zero item
 return 0; // returns zero if nothing is found 
```

}

$return = 查找($array);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T08:32:02.420

试试这个代码。

```
<?PHP

$array = array(
"1" => "0",
"2" => "0",
"3" => "0",
"4" => "24",
"5" => "0");

$zero_plus_keys = 0;
$zero_plus_val  = array();

foreach($array as $key => $val)
{
    if($val > 0)
    {
        $zero_plus_keys++;
        $zero_plus_val = array($key,$val);
    }
}

if($zero_plus_keys == 1)
{
    echo "In array '".$zero_plus_val[0]."' key contains Greater than zero value. the value is = '".$zero_plus_val[1]."'";
}
elseif($zero_plus_keys > 1)
{
    echo "More keys Greater than zero(0)";
}
else
{
    echo "All keys contains zero(0)s only...";
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T08:33:47.523

只是为了好玩：P

```
$array = array_flip(array_flip($array));
sort($array);
if (count($array) > 2) moreThanOne();
else onlyOne($array[1]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-24T14:26:12.400

过滤数组，如果只有一种用途`current()`可以得到它：

```
if(count($n = array_filter($array)) == 1) {
    execute_command(current($n));
} else {
    execute_command();
} 
```

# css - CSS3中的鼠标悬停

> ID：13657453
> 
> 赞同：0
> 
> 时间：2012-12-01T07:39:32.127
> 
> 标签：css, animation, hover, css-transitions

有这个 CSS3 代码：

```
#box1
    {
    position: relative;
    width: 300px;
    border: 1px solid black;
    box-shadow:  -3px 8px 34px  #808080;
    border-radius: 20px;
    box-shadow: -8px 5px 5px #888888;
    right: 700px; 
    top:  -200px;
    height:  150px;
}

@-webkit-keyframes myfirst {
    0%   { right:700px; top:-200px;background: yellow;}
    50%  {background:blue; right:700px; top:200px;}
    100% { right:700px; top:-200px; background: yellow}
}

#stam {
    font-size: large;
    background: green;
    width: 100px;
    top: 400px;
    position: absolute;
}

#stam:hover ~ #box1 { -webkit-animation:myfirst 2s; } 
```

你可以在这里看到代码是如何工作的：http: [//jsfiddle.net/FLe4g/2/](http://jsfiddle.net/FLe4g/2/)

我的问题是：如何制作动画，所以当我将鼠标放在“stam”div 上时，动画将在动画的“50%”`( 50% {background:blue; right:700px; top:200px;})`处停止，并且只有当我将鼠标从“stam”div 移动时，动画才会继续? 我真的更喜欢使用 CSS3 而不是 js 的解决方案......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:30:12.960

对于后退动画，我使用了过渡，所以当你前进时使用动画帧，当你后退时使用过渡：

```
#box1
    {
    position: relative;
    width: 300px;
    border: 1px solid black;
    box-shadow:  -3px 8px 34px  #808080;
    border-radius: 20px;
    box-shadow: -8px 5px 5px #888888;
    right: 300px; 
    top:  -200px;
    height:  150px;
    -webkit-transition: all 2s;
}

@-webkit-keyframes myfirst {
    0%   { right:300px; top:-200px;background: yellow;}
    100%  {background:blue; right:500px; top:200px;}
}

#stam {
    font-size: large;
    background: green;
    width: 100px;
    top: 400px;
    position: absolute;
}

#stam:hover ~ #box1 { 
    -webkit-transition: all 0s;
    background:blue; right:500px; top:200px;
    -webkit-animation:myfirst 2s; 
    -webkit-animation-fill-mode: forwards; 
    }​ 
```

# java - Java 中的唯一 ID 代码

> ID：13657454
> 
> 赞同：0
> 
> 时间：2012-12-01T07:39:34.127
> 
> 标签：java, android

嗨，我想要你们的建议。

我想从当前时间戳创建一个 15 长度的密钥代码。代码应包含带有数字的小写和大写字符。任何人都可以建议我如何从当前时间戳创建一个 15 长度的唯一代码？在 servlet 端使用 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:47:21.563

鉴于您的限制，我可能会[创建一个 GUID](http://developer.android.com/reference/java/util/UUID.html)，附加或添加时间戳，并将其转换为 15 个字母的格式。GUID 是 32 个十六进制数字，因此有 32^16 (1.20892582x10 ^(24) ) 个可能值（尽管并非全部使用）。15 个带数字或大写或小写英文字母的字符（因此，每个数字有 62 个可能的值）为您提供 15^62 (8.272905461x10 ^(72) ) — 足够的空间。如果您可以将`+`和添加`/`到可能的字符列表中，则可以使用[Base64 编码](http://en.wikipedia.org/wiki/Base64)而不是自己做。

# winapi - 如何知道进程是否在 C++、WinAPI 中的 Windows 中运行？

> ID：13657455
> 
> 赞同：2
> 
> 时间：2012-12-01T07:39:42.723
> 
> 标签：winapi

如果我只知道 exe 文件名，如何在 Windows 程序中知道进程是否正在运行？有问题的进程是 64 位的 TeamSpeak3 ts3client_win64.exe 和 32 位的 ts3client_win32.exe。

我正在使用 C++

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:44:16.113

使用该[`CreateToolhelp32Snapshot`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx)函数创建当前进程表的快照，然后使用[`Process32First`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684834%28v=vs.85%29.aspx)和[`Process32Next`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684836%28v=vs.85%29.aspx)函数对快照进行迭代。您可以通过查看结构的`szExeName`字段来获取每个可执行文件的名称[`PROCESSENTRY32`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684839%28v=vs.85%29.aspx)。

有关如何使用这些函数的示例，请参阅[MSDN 示例。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686701%28v=vs.85%29.aspx)

这种方法的优点是，与任何[`EnumProcesses`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629)基于 - 的解决方案不同，它不会受到竞争条件的影响：`EnumProcesses`在您完成枚举进程之后但在您开始打开进程（或阅读我们的进程可执行文件名）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:05:22.307

您可以使用 、 和 的组合[`EnumProcesses`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629)（[`OpenProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320)或者[`GetModuleFileNameEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683198)，[`QueryFullProcessImageName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684919)对于 Vista 或更高版本）。MSDN 甚至有[一个例子](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682623)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T09:10:25.353

Windows NT 有几个用于枚举进程的 API。

1.  [枚举进程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629.aspx)
2.  [工具帮助](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489.aspx)
3.  [NtQuerySystemInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724509.aspx)（不鼓励）
4.  WMI 的[Win32_Process](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372.aspx)（远程工作）

# asp.net-mvc - Web中的反射和性能

> ID：13657457
> 
> 赞同：4
> 
> 时间：2012-12-01T07:39:48.777
> 
> 标签：asp.net-mvc, reflection

我们知道反射是一个相当昂贵的引擎。但尽管如此，ASP.NET MVC 充满了它。还有很多方法可以使用和实现其他基于反射的实践，例如 ORM、DTO 实体视图模型之间的不同映射、DI 框架、JSON 解析等等。
所以我想知道它们是否都会对性能产生如此大的影响，以至于强烈建议尽可能避免使用反射并找到其他解决方案，如脚手架等？执行服务器负载测试的工具是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T09:00:32.197

反射没有错。只需明智地使用它，也就是缓存结果，这样您就不必一遍又一遍地执行那些昂贵的调用。反射在 ASP.NET MVC 中被广泛使用。例如，当从路由中解析控制器和动作名称时，使用反射找到相应的方法来调用。除了一旦找到，结果就会被缓存，以便下次有人请求相同的控制器和动作名称时，从缓存中获取要调用的方法。

因此，如果您使用第三方框架，请检查文档/源代码是否使用反射以及是否缓存这些调用的结果。

如果你必须在你的代码中使用它，同样的规则适用 => 缓存它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T08:09:15.810

对于压力测试，这篇 SO 帖子提供了很多可能性：[Stress Testing ASP.Net application](https://stackoverflow.com/questions/836608/stress-testing-asp-net-application)。

* * *

我自己也思考过这个问题，得出以下结论：

*   大多数人不会花时间一遍又一遍地重新提交页面。考虑到访问实际网站所花费的时间，用户花费在最坏情况下包含一些 Ajax 调用的页面的阅读和消费时间是最少的。即使您的应用程序有 100 万并发用户，您通常也不必在任何给定时间处理一百万个请求。

*   Web 自然是基于字符串比较... HTTP 响应中没有类型，因此任何 Web 应用程序都被迫将这些类型的任务作为日常生活的事实来处理。字符串比较和动态对象越少越好，但它们的核心是不可避免的。

*   尽管通过字符串比较进行映射或动态类型检查之类的操作很慢，但使用 PHP 等非编译、弱类型语言构建的站点将包含更多此类操作。尽管与 C# 控制台应用程序相比，MVC 中可能出现的性能问题很多，但它仍然是 Web 域中许多其他解决方案的优越解决方案。

*   *任何*框架的使用都会产生与之相关的性能成本。使用 .NET 框架以 C# 构建的应用程序在所有意图和目的上都不会像用 C++ 编写的应用程序那样执行。然而，好处是更好的可靠性、更快的编码时间和更容易的测试等等。考虑到计算机的速度在过去十年或两年中是如何爆炸式增长的，我们已经开始接受在这里和那里多花几毫秒来换取这些好处（这是巨大的）。

鉴于这些观点，在开发 ASP.NET MVC 应用程序时，我不会避免诸如瘟疫之类的反射之类的事情，因为很明显它们可以对应用程序的运行方式产生相当积极的影响。它们是工具，如果使用得当，对许多应用程序都有很大的好处。

至于性能，我喜欢构建我能做到的最佳解决方案，然后返回并对其进行压力测试。也许我在 X 类中实现的反射毕竟不是性能问题？简而言之，我的第一个任务是构建一个伟大的架构，我的第二个任务是优化它以从中榨取每一滴性能。

# sql - 奇怪的 SQL Server 2012 IDENTITY 问题

> ID：13657461
> 
> 赞同：7
> 
> 时间：2012-12-01T07:40:05.913
> 
> 标签：sql, entity-framework, sql-server-2012-express

我以前从未见过这种情况，非常奇怪。

我有一个正在开发的本地 SQL Server 2012 Express 数据库。使用 TestDrive 插件运行一组简单的测试并使用 EF v5 访问数据库。

我刚刚运行了一个将记录插入数据库的测试。我在表中有 9 行从 id 1-9 开始。下一个插入和 ID 正好跳了 10000 ！！！！

Id 列是：

```
1, 2, 3, 4, 5, 6, 7, 8, 9, 10009 
```

我知道失败的插入也会增加 ID，但我可以保证 10,000 在测试运行之间的 5 秒内没有插入失败......

表结构非常简单，一堆列和一个自动递增，类型`bigint`（长）的标识列，没有 SP、触发器或任何其他程序化内容。

```
[Id] [bigint] IDENTITY(1,1) NOT NULL, 
```

很困惑，有没有人看到过这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:28:56.267

这篇[博文](http://www.sqlserver-training.com/sequence-breaks-gap-in-numbers-after-restart-sql-server-gap-between-numbers-after-restarting-server/-)有一些额外的细节。它看起来像在 2012 年，`identity`被实现为一个序列。默认情况下，一个序列有一个缓存。如果缓存丢失，您将丢失缓存中的序列值。

建议的解决方案是创建一个序列`no cache`：

```
CREATE SEQUENCE TEST_Sequence
    AS INT
    START WITH 1
    INCREMENT BY 1
    NO CACHE 
```

据我所见，身份列后面的序列是不可见的。您不能更改它的属性来禁用缓存。

要将其与 Entity Framework 一起使用，您可以将主键设置[`StoredGeneratedPattern`](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.storegeneratedpattern.aspx)为`Computed`. `instead of insert`然后您可以在触发器中生成身份服务器端：

```
if exists (select * from sys.sequences where name = 'Sequence1')
    drop sequence Sequence1
if exists (select * from sys.tables where name = 'Table1')
    drop table Table1
if exists (select * from sys.triggers where name = 'Trigger1')
    drop trigger Trigger1
go
create sequence Sequence1
    as int
    start with 1
    increment by 1
    no cache
go
create table Table1
    (
    id int primary key,
    col1 varchar(50)
    )
go
create trigger Trigger1
    on Table1
    instead of insert
as
insert  Table1
        (ID, col1)
select  next value for Sequence1
,       col1
from    inserted
go
insert Table1 (col1) values ('row1');
insert Table1 (col1) values ('row2');
insert Table1 (col1) values ('row3');

select  * 
from    Table1 
```

如果您找到更好的解决方案，请告诉我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:02:04.960

如果您在每次插入查询后调用“检查点”命令，它将解决您的问题。

有关详细信息，请阅读 SQL Server 中的检查点

# java - 附加的字符串未显示在 System.out.println

> ID：13657462
> 
> 赞同：0
> 
> 时间：2012-12-01T07:40:36.820
> 
> 标签：java, string, buffer, system.out

我正在尝试生成一行 10000 个随机数并将其存储在一个文件中。我继续在以空格分隔的行中添加新的随机数。但是经过几次迭代后，附加的字符串变为空（？），当我尝试使用 System.out.println 在控制台上打印该行时它没有显示，并且没有任何内容写入文件中。对于 n=10、n=100、n=1000，该代码工作得非常好。

在我的代码下面找到

```
import java.io.BufferedWriter;
import java.io.FileWriter;

public class RandomNumber {

    public static void main(String[] args) {

    try {

        int n = 10000;
        String line = ""; // Have tried StringBuilder too, doesn't help
        for (int i = 0; i < n; i++) {
            int temp = (int) Math.ceil((Math.random() * n));
            line = line+temp+" ";
            System.out.println(line);
        }
        FileWriter fstream = new FileWriter("input" + n + ".txt");
        BufferedWriter out = new BufferedWriter(fstream);
        out.write(line);
        out.close();
    } catch (Exception e) {
        System.err.println("Error: " + e.getMessage());
    }
    }
} 
```

编辑：我已经删除了用于 out.write 的 for 循环，这不是必需的。我在使用 String 数组时使用过它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:55:48.190

您正在创建 1000 个文件，而不是创建具有 1000 个随机数的单个文件，请检查此。请尝试运行它，它会有所帮助。

```
try {

    int n = 10;
    String line = "";
    for (int i = 0; i < n; i++) {
        int temp = (int) Math.ceil((Math.random() * n));
        line = line+temp+" ";
        System.out.println(line);
    }
    FileWriter fstream = new FileWriter("D:/workspace/StackOverflow/src/fileread/test.txt");
    BufferedWriter out = new BufferedWriter(fstream);
              out.write(line);

    out.close();
} catch (Exception e) {
    System.err.println("Error: " + e.getMessage());
} 
```

控制台输出：

```
4 
4 10 
4 10 7 
4 10 7 1 
4 10 7 1 4 
4 10 7 1 4 5 
4 10 7 1 4 5 1 
4 10 7 1 4 5 1 4 
4 10 7 1 4 5 1 4 8 
4 10 7 1 4 5 1 4 8 4 
```

test.txt——内容

```
4 10 7 1 4 5 1 4 8 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:08:45.693

**切勿**在循环内使用连接。`StringBuilder`以这种方式使用：

```
import java.io.BufferedWriter;
import java.io.FileWriter;

public class RandomNumber {

    public static void main(String[] args) {

    try {

        int n = 10000;
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < n; i++) {
            int temp = (int) Math.ceil((Math.random() * n));
            sb.append(temp).append(" ");
        }
        FileWriter fstream = new FileWriter("input" + n + ".txt");
        BufferedWriter out = new BufferedWriter(fstream);
        out.write(sb.toString());
        out.close();
    } catch (Exception e) {
        System.err.println("Error: " + e.getMessage());
    }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T08:19:59.830

试试这个

```
import java.io.BufferedWriter;
import java.io.FileWriter;

public class RandomNumber {

    public static void main(String[] args) {

    try {

        int n = 10000;
        String line = "";
        for (int i = 0; i < n; i++) {
            int temp = (int) Math.ceil((Math.random() * n));
            line = line+temp+" ";
            System.out.println(line);
        }

        System.out.println("file name is :: input" + n + ".txt");
        FileWriter fstream = new FileWriter("input" + n + ".txt");
        BufferedWriter out = new BufferedWriter(fstream);
        // till here you were correct.
        // you don't need the loop here...
        out.write(line);
        out.close();
    } catch (Exception e) {
        System.err.println("Error: " + e.getMessage());
    }
    }
} 
```

也看看[这里](http://www.mkyong.com/java/how-to-write-to-file-in-java-bufferedwriter-example/)。

* * *

## 编辑 1

由于您的程序在 n=10、n=100、n=1000 时运行良好，我建议您在 Eclipse 中增加堆大小。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-01T08:02:00.680

如果你只想要一个非常长的行，你应该在循环中编写，而不是将它存储在变量中。

我认为问题在于字符串太长（我得到了一个 48kb 的文件，下面的代码）以至于它内存不足。虽然奇怪的是它不会抛出 OutOfMemoryException 或类似的。

```
public static void main(String[] args) {

    try {

        int n = 10000;
        FileWriter fstream = new FileWriter("input" + n + ".txt");
        BufferedWriter out = new BufferedWriter(fstream);

        for (int i = 0; i < n; i++) {
            int temp = (int) Math.ceil((Math.random() * n));
            out.write(temp+" ");
            out.flush();
        }
        out.close();
    } catch (Exception e) {
        System.err.println("Error: " + e.getMessage());
    }
} 
```

# mysql - 数据已存储，但当数据库关闭/重新启动时，数据丢失

> ID：13657466
> 
> 赞同：2
> 
> 时间：2012-12-01T07:40:59.643
> 
> 标签：mysql, database, cluster-computing

我的数据库有问题。我使用mysql集群来操作它。Mysql集群有1个管理节点和3个数据&SQL节点。数据库由 haproxy 进行负载平衡，并且有 2 个负载平衡器由 keepalived 进行故障转移。这里的IP列表：

```
192.168.1.11: virtual ip for failover
192.168.1.12: load balancer master
192.168.1.13: load balancer backup
192.168.1.14: data & SQL node 1
192.168.1.15: data & SQL node 2
192.168.1.16: data & SQL node 3
192.168.1.17: management node 
```

问题是当 Web 服务器（php 网页）通过 192.168.1.11 连接到数据库或直接连接到数据库例如：192.168.1.14 数据被存储并且当与 heidiSQL 检查时数据也存储在数据库中，但是当我关闭或重新启动时出现问题数据库服务器，当重新启动它时，已经存储在数据库中的数据丢失了。我不知道问题是什么，所以我必须做什么？谢谢大家的关注:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T17:49:27.667

所有数据库通常不会自动提交您的数据。您的数据是临时存储的，通常之后，只有在您的数据被提交后，您的数据库才会真正进行更改。SQL 将要求您键入关键字 COMMIT。

# jquery - 如何在 blueimp 图像上传器中以逗号分隔获取上传图像的名称

> ID：13657474
> 
> 赞同：2
> 
> 时间：2012-12-01T07:41:40.603
> 
> 标签：jquery, jquery-plugins

我需要以逗号分隔的所有图像名称。Bcoz 我需要以逗号分隔的形式在 DB 中插入名称。

我正在尝试在 handle_file_upload() 函数中这样做

**$arrOfImgs = 数组($file->name); $comma_separated = implode(",", $arrOfImgs);**

并将其传入

**$file->upload_to_db = $this->add_img($comma_separated);**

但是越来越失败。

请帮忙..

```
protected function handle_file_upload($uploaded_file, $name, $size, $type, $error,

        $index = null, $content_range = null) {

        $file = new stdClass();

        $file->name = $this->trim_file_name($name, $type, $index, $content_range);

        $arrOfImgs = array($file->name);

        $comma_separated = implode(",", $arrOfImgs);

        $file->size = $this->fix_integer_overflow(intval($size));

        $file->type = $type;

        if ($this->validate($uploaded_file, $file, $error, $index)) {
            $this->handle_form_data($file, $index);
            $upload_dir = $this->get_upload_path();
            if (!is_dir($upload_dir)) {
                mkdir($upload_dir, $this->options['mkdir_mode'], true);
            }
            $file_path = $this->get_upload_path($file->name);
            $append_file = $content_range && is_file($file_path) &&
                $file->size > $this->get_file_size($file_path);
            if ($uploaded_file && is_uploaded_file($uploaded_file)) {
                // multipart/formdata uploads (POST method uploads)
                if ($append_file) {
                    file_put_contents(
                        $file_path,
                        fopen($uploaded_file, 'r'),
                        FILE_APPEND
                    );
                } else {
                    move_uploaded_file($uploaded_file, $file_path);
                }
            } else {
                // Non-multipart uploads (PUT method support)
                file_put_contents(
                    $file_path,
                    fopen('php://input', 'r'),
                    $append_file ? FILE_APPEND : 0
                );
            }
            $file_size = $this->get_file_size($file_path, $append_file);
            if ($file_size === $file->size) {
                if ($this->options['orient_image']) {
                    $this->orient_image($file_path);
                }
                $file->url = $this->get_download_url($file->name);
                foreach($this->options['image_versions'] as $version => $options) {
                    if ($this->create_scaled_image($file->name, $version, $options)) {
                        if (!empty($version)) {
                            $file->{$version.'_url'} = $this->get_download_url(
                                $file->name,
                                $version
                            );
                        } else {
                            $file_size = $this->get_file_size($file_path, true);
                        }
                    }
                }
            } else if (!$content_range && $this->options['discard_aborted_uploads']) {
                unlink($file_path);
                $file->error = 'abort';
            }

            $file->upload_to_db = $this->add_img($comma_separated);

            $file->size = $file_size;
            $this->set_file_delete_properties($file);
        }
        return $file;
    } 
```

# c# - 如何最小化并发数据库连接？

> ID：13657476
> 
> 赞同：2
> 
> 时间：2012-12-01T07:42:09.490
> 
> 标签：c#, asp.net, sql-server-2008, connection, database-connection

我的托管公司阻止了我的网站使用超过 15 个并发数据库连接。但是在我的代码中，我关闭了我打开的每一个连接。但是他们仍然说并发连接太多。并建议我应该更改我网站的源代码的解决方案。那么请告诉我有关此问题的解决方案？而且我的网站是动态的，所以将其设为静态的简单 HTML 旧日类型会有所不同吗？

另请注意，我在没有想到任何解决方案的情况下尝试了此操作，在每次之前`con.open()`，我添加了`con.Close()`，因此打开的任何其他连接都将被关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:55:01.907

首先要做的是检查何时打开连接 - 看看是否可以将其最小化。例如，你在不同的连接上做“n+1”？

如果你有一个**服务器**，这里的技术解决方案是一个信号量——例如，类似：

```
someSemaphore.TakeOne();
try {
    using(var conn = GetConnection()) {
        ...
    }
} finally {
    someSemaphore.Release();
} 
```

这将（例如，假设 someSemaphore 是共享的`static`）确保您一次只能进入该块“n”次。在您的情况下，您将创建具有 15 个空格的信号量：

```
static readonly Semaphore someSemaphore = new Semaphore(15,15); 
```

然而！建议注意：在某些情况下，您可能会遇到死锁：想象 2 个写得不好的线程，每个线程需要 9 个连接 - 线程 A 需要 7 个，线程 B 需要 8 个。它们都需要更多 - 并且都不会得到它们。因此，使用`WaitOne`超时很重要：

```
static void TakeConnection() {
     if(!someSemaphore.TakeOne(3000)) {
         throw new TimeoutException("Unable to reserve connection");
     }
}
static void ReleaseConnection() {
     someSemaphore.Release();
}
...
TakeConnection();
try {
    using(var conn = GetConnection()) {
        ...
    }
} finally {
    ReleaseConnection();
} 
```

也可以将其包装起来`IDisposable`以使使用更方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T07:45:50.783

更改托管公司。

严重地。

除非你经营一个可怜的小家庭博客。

您可以轻松地同时处理超过 15 个页面/请求。我总是对“失控的连接”保持警惕，但我认为 15 连接甚至不值得一提。这就像一家汽车租赁公司抱怨你开车超过 15 公里——这简直是一个非常低的限制。

在一个繁忙的网站上，您可以有 50、100 甚至 200 个打开的连接，因为您同时有那么多请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T07:54:18.777

这不是很明显，但即使您关心正确打开和关闭连接，您也必须查看特定的内容。

如果您对用于构建连接字符串的文本进行最小的更改，.net 将创建一个全新的连接，而不是使用已打开的连接（即使连接使用 MARS），因此以防万一，如果出现以下情况，请查找您的代码您正在即时创建连接字符串，而不是使用 Web 配置中的单个连接字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T08:08:22.713

我相信 SQL 连接是池化的。当您关闭一个时，您实际上只是将其返回到连接池。

您可以使用 SqlConnection.ClearPool(connection) 或 SqlConnection.ClearAllPools 来实际关闭连接，但这会影响您网站的性能。

此外，您可以使用连接字符串参数 Pooling=false 禁用池。还有 Max Pool Size（默认为 100），您可能希望将其设置为较小的数字。

这一切都可能有效，但我也建议您更换供应商....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T07:58:19.277

如果您只从数据库中获取数据，那么创建某种缓存并不是很困难。但如果有完整的 CRUD，那么更好的解决方案是更改托管服务提供商。

# jquery - 具有单个验证功能的多表单 jquery 验证

> ID：13657477
> 
> 赞同：0
> 
> 时间：2012-12-01T07:42:22.437
> 
> 标签：jquery, forms, jquery-validate

这是我的验证功能，当有一个表单时它工作正常，当单页中有多个表单时它不起作用。

```
<script>
    $(function() {
        $("form").validity(function() {
            $("#name").require();
        });    
    });    
</script> 
```

我的表格就像

```
<form action="#" method="post" id="firstform">
<input type="text" id="name">
</form>
<form action="#" method="post" id="secondform">
<input type="text" id="name_othername">
</form> 
```

谁能给我建议，如何调用第一个表单ID 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:41:19.230

您可以为两个名称字段提供相同的类，而不是 id，您可以按类调用元素。如果您调用特定表单，则只能验证该表单名称字段：

```
$("#firstform").validity(function() {
    $(this).find(".name_class").require();
}); 

<form action="#" method="post" id="firstform">
<input type="text" id="name" class="name_class">
</form>
<form action="#" method="post" id="secondform">
<input type="text" id="name_othername" class="name_class">
</form> 
```

# ruby-on-rails - 在rails中使用to_json时如何包含关联记录？

> ID：13657483
> 
> 赞同：0
> 
> 时间：2012-12-01T07:44:02.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, has-and-belongs-to-many

我是新来的轨道。我有两个模型用户和语言，我有语言模型中的语言列表。

```
class User < ActiveRecord::Base
 has_and_belongs_to_many :languages 
```

和

```
class Language < ActiveRecord::Base
 has_and_belongs_to_many :users 
```

我有两个问题：

*   如何将现有语言添加到用户的语言列表中？
*   如何将语言包含到用户的 json 表示中？

我没有任何形式，我使用 curl 发布和接收 json 作为响应，如下所示：

> curl -H 'Content-Type: application/json' -H 'Accept: application/json' -X GET htt://localhost:3000/profile.json -d "{ "auth_token" : "teafa52qsasTDGaahawa" }"

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:10:19.213

用于`@user.languages << @languages_to_add`在更新记录时创建连接表中所需的记录。

在您的控制器中使用`@user.to_json( include: :languages )`以在您的 JSON 响应中包含语言。

# css - html - 将页面拆分为所需的形状作为 div？

> ID：13657484
> 
> 赞同：6
> 
> 时间：2012-12-01T07:44:12.840
> 
> 标签：css, html, canvas

我正在尝试将页面拆分为不同的形状，如下图所示： ![所需的形状](../Images/a77feb2ef4408d5fd734789096b3b15f.png)

问题是我正在尝试将 div 创建为图像中的形状，以便我可以将内容放入其中，并通过更改 css 样式更改它们的颜色并使用 JavaScript 赋予它们效果，在网上搜索我确实遇到了一些网站，如[CSS创建 CSS 三角形的技巧](http://css-tricks.com/snippets/css/css-triangle/)，但这并不是我想要的，因为我不能将内容放在这样的 div 中，也不能得到我需要的形状，我想也许我可以用元素得到这样的结果，但我真的不是知道使用它是否合乎逻辑并且可以获得我想要的效果吗？

**有没有办法将 Html 页面划分为任何所需的形状？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:16:49.733

嗯，您可以使用 css3 转换（旋转）：

HTML：

```
<div class="shape1">
    <div class="shape1-content"> ... </div>
</div> 
```

CSS：

```
.shape1 {
    -webkit-transform: rotate(45deg);
}
.shape1-content {
    -webkit-transform: rotate(-45deg);
} 
```

当然，您应该应用其他样式（位置：绝对等）。

更新：

复制'n'粘贴此代码以查看实时示例：

```
<html>
    <head>
        <style>
            .wrapper {
                border: 1px solid #ff8888;
                height: 480px;
                left: 50%;
                margin: -240px 0 0 -320px;
                overflow: hidden;
                position: absolute;
                top: 50%;
                width:  640px;
            }
            .shape1 {
                -webkit-transform: rotate(15deg);
                   -moz-transform: rotate(15deg);

                background-color: #fff;
                border: 1px solid black;
                height: 50%;
                left: -25%;
                position: absolute;
                top: 70%;
                width: 150%;
            }
            .shape1-content {
                -webkit-transform: rotate(-15deg);
                   -moz-transform: rotate(-15deg);

                padding-left: 230px;
            }
            .shape2 {
                -webkit-transform: rotate(15deg);
                   -moz-transform: rotate(15deg);

                background-color: #fff;
                border: 1px solid #88ff88;
                bottom: 244px;
                height: 100%;
                position: absolute;
                right: 50%;
                width: 100%;
            }
            .shape2-content {
                -webkit-transform: rotate(-15deg);
                   -moz-transform: rotate(-15deg);

                bottom: 10px;
                position: absolute;
                right: 10px;
            }
            .shape3 {
                -webkit-transform: rotate(30deg);
                   -moz-transform: rotate(30deg);

                border: 1px solid #8888ff;
                bottom: 40%;
                height: 100%;
                position: absolute;
                right: 20%;
                width: 100%;
            }
            .shape3-content {
                -webkit-transform: rotate(-30deg);
                   -moz-transform: rotate(-30deg);

                   bottom: 50%;
                   position: absolute;
                   right: 10px;
            }
        </style>
    </head>
    <body>
        <div class="wrapper">
            <div class="shape3">
                    <div class="shape3-content">Hi there!</div>
            </div>
            <div class="shape1">
                <div class="shape1-content">Hi there!</div>
            </div>
            <div class="shape2">
                <div class="shape2-content">Hi there!</div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T23:43:51.453

一般来说，你不能用 CSS 做到这一点，直到这里提到的 CSS 形状和排除的东西在几年内被添加到浏览器中[http://corlan.org/2012/03/16/css-bleeding-edge-features/](http://corlan.org/2012/03/16/css-bleeding-edge-features/)

目前，基本的 CSS3 将允许您创建形状并旋转它们，但精度不高。您最好的选择可能是使用 SVG。

这是一个使用 SVG 从现有图像中制作拼图的示例：http: [//lavadip.com/experiments/jigsaw/](http://lavadip.com/experiments/jigsaw/)

更多信息可以在这里找到： [https ://developer.mozilla.org/en-US/docs/SVG/Tutorial](https://developer.mozilla.org/en-US/docs/SVG/Tutorial)

如前所述，您可以使用[http://raphaeljs.com/](http://raphaeljs.com/)之类的库来帮助创建 SVG 图形。

一个警告，尽管这样做可能会很痛苦：-p

# java - 显示输入对话框中的取消按钮

> ID：13657488
> 
> 赞同：1
> 
> 时间：2012-12-01T07:45:03.017
> 
> 标签：java, swing

我的面板上有几个按钮，每次单击它都会出现一个输入对话框。它有一个内置的取消按钮。现在，当我单击代码开头的取消按钮而不在对话框中输入数量时，它会显示“这是一个无效的”数字。此行仅在用户输入字母或符号时才会出现，而不是在按下取消时出现。我们能解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:59:53.333

首先，您需要一种方法来确定 a 是否`String`代表数字；下面的方法[`Double.valueOf()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29)用来决定。

```
private Double valueOf(String s) {
    try {
        return Double.valueOf(s);
    } catch (NumberFormatException e) {
        return null;
    }
} 
```

这是一个如何使用该方法的示例：

```
private void display() {
    String input = JOptionPane.showInputDialog(
        null, "Enter a number?", "Number", JOptionPane.QUESTION_MESSAGE);
    Double value = valueOf(input);
    JOptionPane.showMessageDialog(null, "The value " + input
        + " is " + (value != null ? "valid" : "invalid") + ".");
} 
```

另请参阅[*如何制作对话框*](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:19:41.130

> String Input = JOptionPane.showInputDialog(null,"输入数字？",
> "数字", JOptionPane.QUESTION_MESSAGE);
> if (Input.matches(("((-|\+)?[0-9]+(\.[0-9]+)?)+"))) { JOptionPane.showMessageDialog(null,"有效数字" ); } else{ JOptionPane.showMessageDialog(null,"这是一个无效的数字"); }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:06:31.870

尝试做，

```
String Input = JOptionPane.showInputDialog(null,"Enter the number?",
    "Number", JOptionPane.QUESTION_MESSAGE);        
if (Input.equals(""))
{
    JOptionPane.showMessageDialog(null,"This is an invalid number");
} 
```

以下链接对此进行了更好的解释：[*简单数据验证*](http://www-acad.sheridanc.on.ca/~jollymor/prog10082/dataValid.html)。

# android - FileReader 从下到上读取还是字符串缓冲区？

> ID：13657491
> 
> 赞同：0
> 
> 时间：2012-12-01T07:45:26.090
> 
> 标签：android, filereader, stringbuffer

这个文件保存（日期，时间，语音输入换行符（））我想知道如何将这个文件处理到文本视图中，以便它从底部到顶部读取它，所以我可以将最新的放在文本视图的顶部，谢谢您的时间

```
 wi =(TextView)findViewById(R.id.hes);
        try {
            BufferedReader inputReader = new BufferedReader(new FileReader("/data/data/jip.lam.ru/file"));
            String inputString;
            StringBuffer stringBuffer = new StringBuffer();                
            while ((inputString = inputReader.readLine()) != null) {
                stringBuffer.append(inputString + "\n");
            }
            wi.setText(stringBuffer.toString());
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:24:09.370

您可以实现一个堆栈。

```
 String inputString;
    Stack<String> readbuffer =new Stack<String>();
     while ((inputString = inputReader.readLine()) != null) 
     {
       readbuffer.push(inputString);
     } 
```

现在弹出堆栈，即 wi.setText(readbuffer.pop());

# oracle - Pl/Sql 中模式名称的占位符

> ID：13657492
> 
> 赞同：1
> 
> 时间：2012-12-01T07:45:34.260
> 
> 标签：oracle, plsql, plsqldeveloper

我有一个简单的`Pl/Sql`身体如下：

```
begin 
  ------------------- deletes -------------------------       
  delete from ticket.KC4ENTKEY where  KC2ENTID200 in ('ETICKET');

  ------------------- inserts -------------------------       
  insert into host.kc4achmap(kc4srl467,kc4hst468,kc4id455)
              values('AUTHENTICATION',1,'TICKET');
end; 
```

我可能会更改示例的架构名称，`ticket`架构可能会更改为`ticket_2`. 我的问题是：我可以为模式名称设置什么参数或占位符（用于删除硬编码模式的名称）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:24:38.583

您不能为架构名称（或表或列名称）设置占位符，因为 Oracle 在编译时会检查架构/表/列是否存在以及您是否有权访问它。

为了增加灵活性，您可以通过同义词或视图添加一个间接层：

```
CREATE SYNONYM my_kc4entkey FOR ticket.kc4entkey;
CREATE SYNONYM my_kc4achmap FOR host.kc4achmap; 
```

在您的代码中，您将引用同义词而不是完全限定表：

```
begin
  delete from my_kc4entkey where kc2entid200 in ('ETICKET');
  insert into my_kc4achmap(kc4srl467,kc4hst468,kc4id455) values('AUTHENTICATION',1,'TICKET'); 
end; 
```

如果您稍后需要更改架构名称，您只需要更改同义词并保持您的代码不变：

```
CREATE OR REPLACE SYNONYM my_kc4entkey FOR ticket2.kc4entkey; 
```

# oracle10g - 如何在 oracle DB 中再次重用未使用的列

> ID：13657497
> 
> 赞同：6
> 
> 时间：2012-12-01T07:46:13.260
> 
> 标签：oracle10g, sql-drop

我有一个包含 4 列、ID、NAME、AGE 和 COUNTRY 的表。一段时间以来，我已通过以下命令将我的 AGE 列设置为未使用

```
alter table Personal set unused column AGE; 
```

现在我想再次使用同一列 AGE，如何在 Oracle(10g) 中执行此操作。

并删除一列并将一列设置为未使用，这是最佳选择。请指导我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T09:06:26.520

您不能*重复*使用未使用的列。对该列唯一可能的操作是将其从表中删除。

但是您可以添加具有相同名称的新列，即使不删除未使用的列。

从[文档](http://docs.oracle.com/cd/B28359_01/server.111/b28310/tables006.htm#ADMIN11666)

> ALTER TABLE...DROP UNUSED COLUMNS 语句是唯一允许对未使用的列执行的操作。它从表中物理删除未使用的列并回收磁盘空间。
> 
> 在随后的 ALTER TABLE 语句中，指定了可选子句 CHECKPOINT。此子句导致在处理指定的行数后应用检查点，在本例中为 250。检查点减少了删除列操作期间累积的撤消日志量，以避免潜在的撤消空间耗尽。
> 
> ```
> ALTER TABLE hr.admin_emp DROP UNUSED COLUMNS CHECKPOINT 250; 
> ```

还有这个（强调我的）：

> **标记未使用的列**
> 
> 如果您担心从大表中的所有行中删除列数据所需的时间长度，您可以使用 ALTER TABLE...SET UNUSED 语句。该语句将一个或多个列标记为未使用，但实际上并未删除目标列数据或恢复这些列占用的磁盘空间。但是，标记为未使用的列不会显示在查询或数据字典视图中，**并且它的名称被删除，以便新列可以重用该名称**。列上定义的所有约束、索引和统计信息也将被删除。

# php - 为什么这个 json_encode() 不起作用

> ID：13657499
> 
> 赞同：0
> 
> 时间：2012-12-01T07:46:31.287
> 
> 标签：php, jquery, json, mysqli

为什么这种 json 编码格式不起作用。如果我把它写在所有括号之外。然后它可以工作，但只得到一行。请帮助

```
$sql=mysqli_query($database,"SELECT * FROM com  ORDER by time DESC");
while($row=mysqli_fetch_array($sql)){
        $mid=$row['id'];
        $text=$row['text'];

        if($text) {
            $response=array();

            $response['msg']=$text;
            $response['id']=$id;
            echo json_encode($response);
        }
}
    //$response=array();

    // $response['msg']=$text;
    // $response['id']=$mid;
    // echo json_encode($response); 
```

用于获得上述结果的 Jquery。

```
function com(id){
    $.post('load.php', {tocom:id},function(data) {
        var json = eval('(' + data + ')');
        if(json['msg'] != "") {
            var msg=json['msg'];
            var fro=json['id'];
            $("#msg).html(fro+msg);
        }
      });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:54:07.130

您不会给出一个 json 响应，而是给出与您在一段时间内进行迭代一样多的响应。

好的语法应该是：

PHP：

```
$sql=mysqli_query($database,"SELECT * FROM com  ORDER by time DESC");
$final_response = array();
while($row=mysqli_fetch_array($sql)){
    $mid=$row['id'];
    $text=$row['text'];

    if($text) {
        $response=array();
        $response['msg']=$text;
        $response['id']=$id;
        $final_response[] = $response;
    }

}
echo json_encode($final_response); 
```

JS：

```
function com(id){

    $.post('load.php', {tocom:id},function(data) {
        $("#msg").html('');
        var json = eval('(' + data + ')');
        $.each(json, function(i, row) {
           if(row['msg'] != "") {
               var msg=row['msg'];
               var fro=row['fro'];
               $("#msg").append(fro+msg);
           }
        });
    });

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T07:50:09.663

从 mysql 结果中读取第一个条目后，您将立即发布 json。这会产生一个 json 构造，它会终止您对查询客户端的回复。

相反，您必须首先将所有行收集到 php 中的数组中，然后将整个数组转换为 json 结构。

# objective-c - 预处理器指令问题

> ID：13657502
> 
> 赞同：0
> 
> 时间：2012-12-01T07:46:58.957
> 
> 标签：objective-c, ios, preprocessor-directive

我正在尝试在我的 ios 应用程序中包含 Google+ api 和foursquare api。编译时显示词法或预处理器问题，因为两者都在使用`#define DEBUG`编译时冲突的语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:00:30.210

从你的问题我不确定，但我可以感觉到，缺少一些代码部分......

所以你可以试试这个：

注释或删除这些行并再次编译。

或者它可以转换为

```
#ifdef DEBUG
  NSLog(@"log");
#endif 
```

编辑：

当您更改问题时，现在很清楚错误是什么。

`#define DEBUG`从任一文件中删除一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:43:01.247

或者要在代码中保存/更灵活，请执行以下操作：

```
#ifndef DEBUG
   #define DEBUG
#endif 
```

但这可能不是一个 100% 的好主意，因为它会影响您的所有构建配置。（可能不需要）

# jquery - 鼠标悬停时jQuery下拉菜单隐藏并在鼠标悬停到文本框时继续搜索

> ID：13657504
> 
> 赞同：1
> 
> 时间：2012-12-01T07:47:18.383
> 
> 标签：jquery, html, drop-down-menu

我有一个这样的 jquery 下拉列表：

```
$(document).ready(function() {
    $(".searchs").keyup(function() {
        var searchbox = $(this).val();
        var dataString = 'searchword=' + searchbox;
        if (searchbox == '') {
            $("#display").hide();
        }
        else {
            $.ajax({
                type: "POST",
                url: "searchs.php",
                data: dataString,
                cache: false,
                success: function(html) {
                    $("#display").html(html).show();
                }
            });
        }
        return false;
    });
});​ 
```

现在我想：

1.  当我将鼠标悬停在任何地方单击时隐藏下拉菜单。
2.  将鼠标移回搜索输入框后继续搜索。

这个案子有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:53:51.813

我相信事件可能会为您[`focus`](http://api.jquery.com/blur/)的[`blur`](http://api.jquery.com/focus/)案件派上用场。

```
var $display = $("#display");
$(".searchs").on({
  blur: function(){
    $display.hide();
  },
  focus: function(){
    $display.show();
  }
}); 
```

# python - Google App Engine 重定向到按钮单击时的用户登录

> ID：13657506
> 
> 赞同：3
> 
> 时间：2012-12-01T07:48:06.673
> 
> 标签：python, html, google-app-engine, redirect, hyperlink

我在 Google App Engine 中有一个 Python 脚本，它只是给用户一个简单的欢迎信息。如果用户已登录 Google，则会出现带有代码的个性化欢迎消息：

```
if users.get_current_user():
    self.response.out.write('Welcome ' + users.get_current_user()') 
```

我想要做的是，如果用户尚未登录，则可以按下一个按钮，将他们重定向到 Google 登录页面以登录到他们的帐户。

```
else:
    #redirect user to login page here 
```

我已经尝试了一些方法来做到这一点，但它们都不起作用。我试过了：

```
self.response.out.write('<form action="%s">
                         <input type="submit" value="Login to Google"></form>
                         ' % users.create_login_url('/') 
```

当按下按钮时没有任何反应，所以我尝试了：

```
self.response.out.write('<form action="%s">
                         <input type="submit" value="Login to Google"></form>
                         ' % self.redirect(users.create_login_url('/')) 
```

这只是在访问主页后立即将用户重定向到登录页面。

按下按钮时，有什么方法可以将用户重定向到 Google 登录页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:10:30.717

您缺少的是一个检查 url 并重定向用户的处理程序：

因此，对于表单操作，您必须将其更改为：

```
 signin_page = "/signin/"
    self.response.write('<form action="%s">
                         <input type="submit" value="Login to Google"></form>'
                         % signin_page) 
```

然后在处理程序中：

```
 class SignInHandler(webapp2.RequestHandler):
    def get(self):
        self.redirect(users.create_login_url(self.request.uri)) 
```

最后：

```
 application = webapp2.WSGIApplication([('/', IndexPageHandler),
                                        ('/signin/', SignInHandler),],) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:43:32.413

我不确定到底是什么不起作用-第三个代码块的末尾只缺少一个括号。这是您的示例的完整代码，可以正常工作：

```
import webapp2
from google.appengine.api import users

class MainHandler(webapp2.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if user:
            msg = ("Welcome, %s! (<a href=\"%s\">sign out</a>)" %
                   (user.nickname(), users.create_logout_url("/")))
        else:
            msg = ("<form action=\"%s\">"
                   "<input type=\"submit\" value=\"Login to Google\">"
                   "</form>" %
                   users.create_login_url("/"))
        self.response.out.write("<html><body>%s</body></html>" % msg)

app = webapp2.WSGIApplication([('/', MainHandler)], debug=True) 
```

**注意：**此处使用的表单并不是真正的表单，因为没有要填写的任何字段。考虑使用样式类似于按钮的链接。一个例子可以在[这里](https://stackoverflow.com/questions/11582286/form-method-link-or-a-whats-the-difference)找到。

# html - 如果我在 URL 的末尾使用链接关系标签（rel=next 等）有什么区别吗？

> ID：13657508
> 
> 赞同：0
> 
> 时间：2012-12-01T07:48:19.527
> 
> 标签：html

我想将 rel=next 添加到下一个链接，并将 rel=prev 添加到我博客主页上的上一个链接。但是我想知道如果我们将这些链接关系标签放在 URL 的末尾有什么区别，就像这样

```
<a href="http://www.example.com/page/2/" rel="next"> Next</a> 
```

这些天来，我发现大多数开发人员将链接关系标签放在 URL 的开头。例子;

```
<a rel="next" href="http://www.example.com/page/2/"> Next</a> 
```

这两种方法有什么区别吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:50:31.477

不，您可以以任何您喜欢的方式订购不同的 HTML 属性，并且不会改变任何内容。

# ruby-on-rails - 如何将 ruby 命令提示符插入到 ruby mine 中？

> ID：13657522
> 
> 赞同：4
> 
> 时间：2012-12-01T07:49:24.643
> 
> 标签：ruby-on-rails, ruby, windows, command-line, rubymine

早些时候，有人问过一个关于在 Windows 上将终端直接插入 Ruby Mine 的问题。它得到了回答，但只是在一定程度上。我了解如何使用设置在 Ruby 中打开 cmd.exe，但是如何让 ruby​​ 命令提示符打开？我的 cmd.exe 不适用于 ruby​​，我必须使用此路径，它不适用于前面给出的说明。

C:\Windows\System32\cmd.exe /E:ON /KC:\Ruby193\bin\setrbvars.bat

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:57:44.700

转到“工具”，然后“运行 Rails 控制台”

**“工具”>>“运行 Rails 控制台”**

# gwt - GWT 和闭包

> ID：13657523
> 
> 赞同：3
> 
> 时间：2012-12-01T07:49:25.560
> 
> 标签：gwt, closures

我在 javascript 中多次使用闭包概念。我是 GWT 的新手，我在某处读到无法在 GWT 中使用闭包。我的理解是错误的还是我可以使用它？有人可以给我一个在 GWT 中使用闭包的例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T13:02:19.307

Java 中的闭包等价物是本地类，它们可以是匿名的（就像 JS 中的匿名函数一样）。
Java 8 将为我们带来 lambda，但 GWT 还不支持 Java 7，所以 GWT 中的 lambda 不适合明天 ;-)

见[http://en.wikipedia.org/wiki/Closure_(computer_science)#Local_classes_.28Java.29](http://en.wikipedia.org/wiki/Closure_(computer_science)#Local_classes_.28Java.29)

# c++ - 我可以在 cplusplus 中使用 /usr/include/c++/4.7/ext/bitmap_allocator.h 中的 bitmap_allocator 吗？

> ID：13657528
> 
> 赞同：0
> 
> 时间：2012-12-01T07:50:28.203
> 
> 标签：c++, linux, gcc

我是 cplusplus 的新手，感谢您回答我的问题。

我现在正在尝试查找 std::allocator 以外的一些内存池分配器，并且我发现 ../version/ext/ 文件夹中有一些分配器。（我在 Linux 中，我不了解 windows。而且我正在使用 gnu 编译器 g++-4.7）

我在 GNU 上找到了一些解释： [http](http://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt04ch11.html) ://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt04ch11.html 但是如果我写__gnu_cxx::bitmap_allocator，仍然会有一个comile 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:04:00.850

这是我自己的错... %>_<%. 一个很傻的错= =。

我没有包含文件...

对于那些想知道如何使用它的人，提供的代码如下：

```
#include <iostream>
#include <vector>
#include <ext/bitmap_allocator.h>

int main()
{
    __gnu_cxx::bitmap_allocator<int> bit_alloc;
    std::vector<int, __gnu_cxx::bitmap_allocator<int> > v(bit_alloc);
    for(int i = 0; i < 10; ++i)
        v.push_back(i);
    for(auto i : v)
        std::cout << i << ' ';
    std::cout << std::endl;

    return 0;
}//main 
```

# c# - 在 Metro 应用程序中使用情节提要为线点设置动画

> ID：13657530
> 
> 赞同：0
> 
> 时间：2012-12-01T07:50:38.073
> 
> 标签：c#, xaml, windows-8, microsoft-metro, storyboard

如何在 Metro 应用程序中使用情节提要设置`Line.Y2`and属性。`Line.X2`

我试过在下面使用

```
Storyboard.SetTargetProperty(animation,"Line.Y2"); 
```

但这不起作用。

请给我任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:33:51.987

你有没有尝试过：

```
 Storyboard.SetTargetProperty(animation, new PropertyPath(Line.X2Property)); 
```

# php - 我无法动态显示表单

> ID：13657531
> 
> 赞同：-4
> 
> 时间：2012-12-01T07:50:38.950
> 
> 标签：php

当我尝试`<form> </form>`动态使用标签时，它不起作用。

示例代码：

```
<?php
   $i=1;
   while($i<4)
   {
       <form name="form'.$i.'" action="" method="post">
           <input type="submit" name="a'.$i.'" />
       </form>
       $i++;
   }
?> 
```

代码运行，但表单标记不适用于第一个按钮。它从第二个按钮开始工作。但我也需要第一个按钮。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:51:34.227

尝试

```
<?php
   $i=1;
   while($i<4)
   {  
       echo '<form name="form'.$i.'" action="" method="post">
       <input type="submit" name="a'.$i.'" >   </form>';
       $i++;
   }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:05:40.460

尝试这个

```
<?php
$i=1;
while($i<4)
{
?>

<form name="form_<?php echo $i; ?>" action="" method="post">
<input type="submit" name="a_<?php echo $i; ?>"/>
</form>
<?php
$i++;
echo "yes";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T07:56:33.133

您正在将 PHP 与 HTML 结合在一起。方法不止一种，但我个人喜欢following

```
<?php
    $i=1;
    while($i<4)
    {
?>

        <form name="form<?php echo $i; ?>" action="" method="post">
            <input type="submit" name="a<?php echo $i; ?>" />
        </form>

<?php
    $i++;
    }
?> 
```

我喜欢上述方法的原因是我不喜欢使用 echo 语句来编写 HTML，这更清楚，至少对我来说。

# jquery - 在一台服务器上全新安装 WordPress 3.4.2 并在另一台服务器上正常运行时出错

> ID：13657533
> 
> 赞同：0
> 
> 时间：2012-12-01T07:50:46.003
> 
> 标签：jquery, wordpress

我遇到了一个奇怪的错误，我在两台不同的服务器上安装了两次 WordPress 3.4.2 版（主机和域不同）。因为我在两台服务器上安装相同版本的 WordPress，但它在一台服务器上显示 JS 错误，如下面的屏幕截图所示

![错误控制台](../Images/166fe79103bfca466cb5990f18c393f4.png)

我比较了上面错误中显示的文件，发现有一些额外的斜线导致了问题，请参见下面的屏幕截图。

*   **来自 WP 实例的文件没有错误：**

![没有错误](../Images/d7219e41cc2380b5c5f7f6cf46d9e09d.png)

*   **来自有问题的 WP 实例的文件：**

![错误](../Images/c56e2909e2d446f25328567ff17686a0.png)

有人能告诉我为什么要添加一些额外的斜杠（那些会产生错误）吗？这是与服务器相关的问题、某些病毒或其他问题以及此问题的任何解决方案吗？

提前致谢！

# javascript - 当您单击或停止使用 Javascript 悬停时，如何使 CSS 悬停内容保持原位？

> ID：13657535
> 
> 赞同：11
> 
> 时间：2012-12-01T07:50:53.203
> 
> 标签：javascript, css, onclick, hover, mouseevent

我有一个我想实现的身体系统功能。当用户将鼠标悬停在身体​​部位时，它会突出显示并显示该特定身体部位的信息。我已经按照我想要的方式对 CSS 进行了编码，但是**我对 JavaScript 一无所知**，以便在单击正文部分或鼠标离开悬停状态时获取信息。

我已经搜索了论坛并发现了类似的问题，并且花了几个小时试图从其他人的 javascript 解决方案中找出自己的问题 - 我正处于需要寻求帮助的地步。

这是我根据自己想要的效果制作的 Flash 原型：

[http://inwavemedia.com/temp/proto/Main.html](http://inwavemedia.com/temp/proto/Main.html)

如果您想看看我现在拥有的内容，这里是实时 HTML：

[http://inwavemedia.com/temp/excretory.html](http://inwavemedia.com/temp/excretory.html)

这是我的代码：

```
<style type="text/css">
#bodysystem-excretory {
 width: 618px;
 height: 504px;
 background: url(excretory.png) no-repeat;
 margin: 10px auto; padding: 0;
 position: relative;
 border: 1px solid #999;
}
#bodysystem-excretory li {
    margin: 0;
    padding: 0;
    list-style: none;
    display: block;
    position: absolute;
}

#bodysystem-excretory a {
    display: block;
/*  text-indent: -9999px;*/
    text-decoration: none;
}

#esoph {
    left: 85px;
    top: 41px;
    width: 46px;
    height: 94px;
    z-index: 10;
}

#lungs {
    left: 76px;
    top: 84px;
    width: 84px;
    height: 68px;
    z-index: 20;
}

#bladder {
    left: 87px;
    top: 148px;
    width: 64px;
    height: 104px;
    z-index: 30;
}

#esoph a {
    height: 94px;
}

#lungs a {
    height: 67px;
}

#bladder a {
    height: 104px;
}

#esoph a:hover {
    background-image: url(excretory.png);
    background-repeat: no-repeat;
    background-position: -25px -561px;
}

#lungs a:hover {
    background-image: url(excretory.png);
    background-repeat: no-repeat;
    background-position: -105px -523px;
}

#bladder a:hover {
    background-image: url(excretory.png);
    background-repeat: no-repeat;
    background-position: -114px -618px;
}

.info span{ 
    display: none

}

.info{
    position:relative;
    z-index:1124;
    color:#000;
}

.info:hover{
    z-index:1125;

}

.info:hover span{
    display:block;
    position:absolute;
    top:-30px;
    left:155px;
    width:370px;
    color:#000;
    background-color:#FFFFFF;
}
</style>

</head>

<body>
<ul id="bodysystem-excretory">
  <li id="esoph">
    <a href="#" class="info"><span id="esoph-info"><h3>Esophagus</h3><p>This is esophagus information. This is esophagus information. This is esophagus information. This is esophagus information. This is esophagus information. This is esophagus information. This is esophagus information. </p></span></a>
  </li>
<li id="lungs"><a href="#" class="info"><span id="lungs-info"><h3>Lungs</h3></span></a></li>
<li id="bladder"><a href="#" class="info"><span id="bladder-info"><h3>Bladder</h3></span></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:08:09.857

我认为以前的任何一个答案都不能完全满足您的要求。这是[我的建议](http://jsfiddle.net/9RkjE/1/)。请注意，CSS 已更改，最后添加了 javascript。

```
<html>
<head><style type="text/css">
#bodysystem-excretory {
     width: 618px; height: 504px;
     background: url("excretory.png") no-repeat;
     margin: 10px auto; padding: 0;
     position: relative;
     border: 1px solid #999;
}
#bodysystem-excretory li {
    margin: 0; padding: 0;
    list-style: none;
    display: block;
    position: absolute;
}
#bodysystem-excretory a {
    display: block;
    /*  text-indent: -9999px;*/
    text-decoration: none;
}
#esoph {
    left: 85px; top: 41px;
    width: 46px; height: 94px;
    z-index: 10;
}
#lungs {
    left: 76px; top: 84px;
    width: 84px; height: 68px;
    z-index: 20;
}
#bladder {
    left: 87px; top: 148px;
    width: 64px; height: 104px;
    z-index: 30;
}
#esoph a {
    height: 94px;
}
#lungs a {
    height: 67px;
}
#bladder a {
    height: 104px;
}
#esoph:hover, #esoph.selected {
    background-image: url("excretory.png") no-repeat -25px -561px;
}
#lungs:hover, #lungs.selected {
    background-image: url("excretory.png") no-repeat -105px -523px;
}
#bladder:hover, #bladder.selected {
    background-image: url("excretory.png") no-repeat -114px -618px;
}
.info span{ 
    display: none
}
.info{
    position:relative;
    z-index:1124;
    color:#000;
}
.selected .info{
    z-index:1125;
}
.selected .info span {
    display:block; position:absolute;
    top:-30px; left:155px;
    width:370px;
    color:#000; background-color:#FFFFFF;
}​&lt;/style></head>
<body>
<ul id="bodysystem-excretory">
<li id="esoph">
<a href="#" class="info">
<span id="esoph-info"><h3>Esophagus</h3>
<p>
This is esophagus information. This is esophagus information. 
This is esophagus information. This is esophagus information.
This is esophagus information. This is esophagus information.
This is esophagus information. </p></span></a>
</li>
<li id="lungs"><a href="#" class="info">
<span id="lungs-info"><h3>Lungs</h3></span></a>        
</li>
<li id="bladder"><a href="#" class="info">
<span id="bladder-info"><h3>Bladder</h3>
</span></a></li>
</ul>​&lt;script type="text/javascript">
// Get the <li> elements as a list called 'parts'
var parts = 
    document.getElementById('bodysystem-excretory').getElementsByTagName('li');
function getClickFunction(part) {
    return function() {
// This is the function that will be called when one of the <li>s is clicked
        if (part.className == 'selected') {    // if the body part is already selected
            part.className = '';               // ... then deselect it
        }
        else {                                 // otherwise,
            // first deselect all of the body parts
            for (var i = 0; i < parts.length; i++) {
                parts[i].className = '';
            }
            // then select the one that's been clicked
            part.className = 'selected';
        }
    }
}
// Now, attach this function to all of the <li> elements representing body parts      
for (var i = 0; i < parts.length; i++) {
    parts[i].onclick = getClickFunction(parts[i]);
}​
</script></body></html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:39:57.763

以下是您需要做的必要更改：

```
<head>
    <title>Untitled Page</title>
    <style type="text/css">
        #bodysystem-excretory
        {
            width: 618px;
            height: 504px;
            background: url(excretory.png) no-repeat;
            margin: 10px auto;
            padding: 0;
            position: relative;
            border: 1px solid #999;
        }
        #bodysystem-excretory li
        {
            margin: 0;
            padding: 0;
            list-style: none;
            display: block;
            position: absolute;
        }

        #bodysystem-excretory a
        {
            display: block; /*  text-indent: -9999px;*/
            text-decoration: none;
        }

        #esoph
        {
            left: 85px;
            top: 41px;
            width: 46px;
            height: 94px;
            z-index: 10;
        }

        #lungs
        {
            left: 76px;
            top: 84px;
            width: 84px;
            height: 68px;
            z-index: 20;
        }

        #bladder
        {
            left: 87px;
            top: 148px;
            width: 64px;
            height: 104px;
            z-index: 30;
        }

        #esoph a
        {
            height: 94px;
        }

        #lungs a
        {
            height: 67px;
        }

        #bladder a
        {
            height: 104px;
        }

        #esoph a:hover
        {
            background-image: url(excretory.png);
            background-repeat: no-repeat;
            background-position: -25px -561px;
        }

        #lungs a:hover
        {
            background-image: url(excretory.png);
            background-repeat: no-repeat;
            background-position: -105px -523px;
        }

        #bladder a:hover
        {
            background-image: url(excretory.png);
            background-repeat: no-repeat;
            background-position: -114px -618px;
        }

        .info span
        {
            display: none;
        }

        .info
        {
            position: relative;
            z-index: 1000;
            color: #000;
        }

        #bodysystem-excretory li[selected='true'] .info
        {
            z-index:1200;
        }

        #bodysystem-excretory li[selected='true'] .info span
        {
            display: block;
            position: absolute;
            top: -30px;
            left: 155px;
            width: 370px;
            color: #000;
            background-color: #FFFFFF;
        }

        .info:hover
        {
            z-index: 1125;
        }

        .info:hover span
        {
            display: block;
            position: absolute;
            top: -30px;
            left: 155px;
            width: 370px;
            color: #000;
            background-color: #FFFFFF;
        }
    </style>
    <script type="text/javascript">
        function SelectOrgan(obj)
        {
            var parentObj = obj.parentNode;
            var organs = document.getElementById("bodysystem-excretory").getElementsByTagName("li");

            for (var i = 0, len = organs.length; i < len; i++)
            {
                organs[i].setAttribute("selected", "false");
            }

            parentObj.setAttribute("selected", "true");
        }
    </script>
</head>
<body>
    <ul id="bodysystem-excretory">
        <li id="esoph" selected="false"><a href="#" class="info" onclick="SelectOrgan(this)"><span id="esoph-info">
            <h3>
                Esophagus</h3>
            <p>
                This is esophagus information. This is esophagus information. This is esophagus
                information. This is esophagus information. This is esophagus information. This
                is esophagus information. This is esophagus information.
            </p>
        </span></a></li>
        <li id="lungs" selected="false"><a href="#" class="info" onclick="SelectOrgan(this)"><span id="lungs-info">
            <h3>
                Lungs</h3>
        </span></a></li>
        <li id="bladder" selected="false"><a href="#" class="info" onclick="SelectOrgan(this)"><span id="bladder-info">
            <h3>
                Bladder</h3>
        </span></a></li>
    </ul>
</body>
</html> 
```

请注意，每个器官都被分配了一个绝对位置，在空间中具有不同的位置。如果您将所有这些都保持相同的左侧、顶部、宽度和高度，那么您将实现您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:51:41.450

您需要在彼此对应的链接和容器上创建一组简单的标识符。

**JSFiddle：http:** [//jsfiddle.net/Y4Wtn](http://jsfiddle.net/Y4Wtn)

```
<style>
    .btn {font-weight:normal}
    .btn.active {font-weight:bold;}
    .pane {display:none;border:1px #ccc solid;padding:10px;}
    .pane.active {display:block;}
</style>
<script>
// insert jquery here
$(document).read(function(){

    $('.btn').click(function(){
        // grab the rel value of the the link that was clicked
        var thisRel = $(this).attr('rel');
        // remove active class from all .btn
        $('.btn').removeClass('active');
        // add active class to link that was clicked
        $(this).addClass('active');
        // remove all active classes from .pane
        $('.pane').removeClass('active');
        // add class active to pane with the same rel value clicked link
        $('.pane[rel="'+thisRel+'"]').addClass('active');         
    });

});
</script>
<ul>
    <li><a href="#1" class="btn active" rel="1">Item One</a></li>
    <li><a href="#2" class="btn" rel="2">Item Two</a></li>
    <li><a href="#3" class="btn" rel="3">Item Three</a></li>
</ul>

<div class="pane active" rel="1">Pane One</div>
<div class="pane" rel="2">Pane Two</div>
<div class="pane" rel="3">Pane Three</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T08:59:53.663

您可以添加一个点击事件，查看我们点击的内容，然后在点击时永久更改样式。然后，这将永久“揭示”新零件。

您的 HTML：

```
<li id="lungs" onclick="highlight(this.id)">
   <!--some stuff-->
</li> 
```

在 javascript 中（为简单起见，我将其放入`<script>`标签中，只需将此 + 您的其他案例添加到您的标题中）：

```
 <script> 
   function highlight(id) {
       var part = document.getElementById(id);
       switch(id){
          case "lungs":
             part.style.backgroundImage="url(excretory.png)";
             part.style.backgroundRepeat="no-repeat";
             part.style.backgroundPosition="-105px 523px";
             break;
          //rinse repeat for all cases, don't forget the : after your case and to add break; at the end of each line
          default:
             //do nothing, or something, whatever
    }
 </script> 
```

[您可以在此处](http://www.w3schools.com/js/js_switch.asp)了解有关 javascript switch 语句的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T10:41:51.580

# php - MongoDB 错误报告

> ID：13657536
> 
> 赞同：0
> 
> 时间：2012-12-01T07:50:56.213
> 
> 标签：php, mongodb, error-handling

保存操作 ( `$col->save($w);`) 后发生异常。但我只是得到以下信息：

```
Fatal error: in D:\......\x.php on line 41
MongoException: in D:\......\x.php on line 41 
```

如何获得更多信息的错误消息？是否有任何配置可以为 MongoDB 启用错误报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:27:30.267

To check if there was an error on the most recent db operation performed, you can use `MongoDB::lastError`.

```
var_dump($db->lastError()); 
```

* * *

**For your information**

If you run with driver version 1.3.0, `new Mongo` has been **DEPRECATED**. Relying on this feature is highly discouraged. Please use `MongoClient` instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:43:20.850

要检查您遇到的错误，您可以检查引发异常时收到的错误代码。[在 PHP driver for mongo](http://in2.php.net/manual/en/class.mongoexception.php)查看错误代码

# colors - IE9 链接级联顺序有问题？

> ID：13657543
> 
> 赞同：0
> 
> 时间：2012-12-01T07:52:11.433
> 
> 标签：colors, hyperlink, internet-explorer-9

好的，我有一个非常简单的问题。在 Chrome、Safari 和 Firefox 中，一切都很好。但在 IE9 中却不是这样。

我为几个不同的链接设置了 CSS 样式。

.header a:link {
颜色:#fff;
背景颜色：#f00;
}
.content a:link {
颜色:#00f;
文字装饰：下划线；
}
.nolinkcolor a:link {
颜色:#000;
背景颜色：fff；
}

这是使用最后一个 css 样式 .nolinkcolor 时的问题，它在 IE9 上根本不起作用，所有其他浏览器都可以正常工作。在 IE9 中，它基本上忽略 .nolinkcolor 并使用 .header 的样式

我只想知道这是否是已知问题以及是否有修复的调整？？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:18:33.357

请检查你的 div 喜欢`<a href="#" class="nolinkcolor">Your test</a>`。链接的父容器也很重要。如果它在其他容器内。你必须覆盖CSS。喜欢：

修改 CSS 如下：

```
body #parentContainerID or class a.nolinkcolor {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:16:06.790

```
.nolinkcolor a:link {
color:#000;
background-color:fff;
} 
```

确保将`#`字符包含在背景颜色中。

解决这个问题，我在 IE9 中没有看到任何其他问题： [JSFiddle 测试](http://jsfiddle.net/H2r6Y/3/)

# hadoop - Hadoop HDFS 和序列文件

> ID：13657548
> 
> 赞同：1
> 
> 时间：2012-12-01T07:53:33.683
> 
> 标签：hadoop, hdfs, sequencefile

我想到了一个更基本的概念级别的问题，HDFS和各种文件格式——序列文件（基于它的映射文件）、HAR文件有什么区别和关系？

我想答案是，HDFS是基础文件系统，我们可以把原始二进制文件上传到HDFS（不用序列文件、HAR文件等），也可以使用一些特殊设计的文件格式来写文件HDFS——类似序列文件（基于它的映射文件）格式，HAR文件格式。这是正确的理解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T10:26:38.080

**HDFS**是一个文件系统，不依赖于任何特定的文件格式。它是一个*分布式*文件系统，并抽象出有关文件实际保存在磁盘上的大多数内部细节​​（就像 NFS/FAT 一样）。它为我们提供了文件和目录结构的连续视图，但在内部，文件实际上被复制并存储在集群中各个节点的块中。

像序列文件这样的文件格式特别适合 map reduce 编程范式，因为它可以很容易地在数据节点之间拆分，从而实现并行处理。但是，HDFS 没有这样的偏好，它可以将任何文件格式分成块（即二进制/纯文本）并存储它。

# java - 循环中的 ArrayList 初始化错误

> ID：13657556
> 
> 赞同：1
> 
> 时间：2012-12-01T07:55:23.797
> 
> 标签：java, for-loop, arraylist, initialization

在 Android 中编码时，我需要一个 ArrayList of Points，我称之为 wormPt。我通过循环初始化它。

```
ArrayList<Point> wormPt = new ArrayList<Point>();
Point pt = new Point();
.
.
.
private void initializeWorm() {
    // TODO Auto-generated method stub
    pt.x = 220;
    pt.y = 300;
    for (int i = 0; i <= 5; i++) {
        wormPt.add(pt);
        Log.d("wormdebug", wormPt.toString());

        pt.x -= 5;
    }
    Log.d("wormdebug", wormPt.toString());
} 
```

我最后的 log.d 应该报告点数 (220,300) (215,300) (210,300) (205,300) (200,300) (195,300)

相反，我所有的分数都是 (190, 300)

这是我的日志数据

```
11-21 23:48:11.549: D/wormdebug(3273): [Point(220, 300)]
11-21 23:48:11.600: D/wormdebug(3273): [Point(215, 300), Point(215, 300)]
11-21 23:48:11.600: D/wormdebug(3273): [Point(210, 300), Point(210, 300), Point(210, 300)]
11-21 23:48:11.600: D/wormdebug(3273): [Point(205, 300), Point(205, 300), Point(205, 300), Point(205, 300)]
11-21 23:48:11.600: D/wormdebug(3273): [Point(200, 300), Point(200, 300), Point(200, 300), Point(200, 300), Point(200, 300)]
11-21 23:48:11.600: D/wormdebug(3273): [Point(195, 300), Point(195, 300), Point(195, 300), Point(195, 300), Point(195, 300), Point(195, 300)]
11-21 23:48:11.630: D/wormdebug(3273): [Point(190, 300), Point(190, 300), Point(190, 300), Point(190, 300), Point(190, 300), Point(190, 300)]
11-21 23:48:14.669: W/KeyCharacterMap(3273): No keyboard for id 0
11-21 23:48:14.679: W/KeyCharacterMap(3273): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

我试过 [Can't add element to ArrayList in for loop](https://stackoverflow.com/questions/8460455/cant-add-element-to-arraylist-in-for-loop)和其他人，但他们似乎没有同样的问题。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T07:58:11.413

问题是您包含对*同一对象*`ArrayList`的多个引用。您在循环中所做的只是添加相同的引用并改变对象。

 *如果您更改循环以在每次迭代中创建一个*新* `Point`循环，它将起作用：

```
int x = 220;
for (int i = 0; i <= 5; i++) {
    wormPt.add(new Point(x, 300));
    x -= 5;
} 
```

*了解变量*、*对象*和*引用*之间的区别非常重要。`pt`是一个变量。它的值是对`Point`对象的引用。除非您要求一个新对象，否则 Java 不会为您创建一个。例如：

```
Point a = new Point(10, 20);
Point b = a; // Copies the *reference*
a.x = 100;
System.out.println(b.x); // 100 
```

请注意，这并不是将 a 和 b*变量*相互关联——它只是赋予它们相同的值（相同的引用）。因此，您以后可以更改`a`为对不同的引用`Point`，而这不会改变`b`：

```
Point a = new Point(10, 20);
Point b = a; // Copies the *reference*
a.x = 100;
a = new Point(0, 0); // This doesn't affect b, or the object its value refers to
System.out.println(b.x); // 100 
```

在这种情况下，这有点像给 10 个不同的人一张写有您的家庭住址的纸。如果*其中一个*人访问该地址并将前门涂成绿色，然后另一个人访问该地址，他们将看到一个绿色的前门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:58:39.613

`new Point`每次添加时都必须创建`ArrayList`。相反，只有一个`Point`坐标在变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T08:04:34.357

这很简单。您正在将相同的对象添加到列表中......

您应该在循环的每次迭代中创建一个新对象，然后将其添加到列表中。

尝试类似：

```
wormPt.add(new Point(x, 300)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T08:27:55.923

该声明

`wormPt.add(pt);`

导致将相同的对象添加到 ArrayList 中。

您需要将不同的对象添加`Point`到arraylist。

为此，您可以使用
`new Point(x, y)`
，
也可以创建一个对象，例如
`Point p = new Point(x,y)`

然后将其添加到数组列表中。*

# objective-c - Objective-c：创建块函数

> ID：13657563
> 
> 赞同：0
> 
> 时间：2012-12-01T07:56:43.117
> 
> 标签：objective-c, objective-c-blocks

从一个私人库中，我正在使用这样的块函数，但不知道它们实际上是如何创建的。他们将如何返回我的班级并执行该块？

```
ImAnotherClass *sameObj = [[ImAnotherClass alloc] init];

[sameObj testFunctionWithBlock:^(BOOL success, NSError *error) 
{
    if(!error)
    NSLog(@"you'll only read this, once test function was done!");
}];

[sameObj release]; 
```

在这里，值得注意的是，一个`test`函数可能需要很长时间（以分钟为单位）来完成它的执行，但它会完美地打印块中的行！甚至我的函数也已经执行了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T08:15:54.263

```
//your class .h
 + (void) doSomething:(NSString *) string
                   successCallback:(void (^)(id successValue)) successCallback
         errorCallback:(void (^)( NSString *errorMsg)) errorCallback;

//your class.m
+ (void) doSomething:(NSString *) string
                   successCallback:(void (^)(id successValue)) successCallback
         errorCallback:(void (^)( NSString *errorMsg)) errorCallback {

   //do your work here
   //set your bool for error

    if(error) {
        errorCallback(<error value>);
    } else {

        successCallback(<value on success>);
    }
} 
```

制作你的对象并使用你不需要睡眠它不会让控制通过，直到块被执行

```
 [objYourClass  doSomething:(NSString *) string
                           successCallback:(void (^)(id successValue)) successCallback{
    //get your success value

    }
                 errorCallback:(void (^)( NSString *errorMsg)) errorCallback{
//get your error value
    }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:01:09.913

如果您想知道该功能是如何在内部实现的，它可能如下所示：

```
- (void) doSomethingWithCompletion: (dispatch_block_t) completion
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        sleep(10); // wait for ten seconds
        if (completion) {
            dispatch_async(dispatch_get_main_queue(), completion);
        }
    });
} 
```

# html - HTML5 三页布局栏目

> ID：13657565
> 
> 赞同：1
> 
> 时间：2012-12-01T07:56:53.743
> 
> 标签：html, css, layout

我几乎花了 4 个小时才达到这一点。我真的无法记下三列的布局。这是迄今为止我能做到的最好的，这是我的CSS：

```
#header {text-align: center;}

#container {
    width: 960px;
    margin: 0 auto;
     background-color: #FAFAFA;
     color: #003300;
     font-family: Arial, Helvetica, sans-serif;

}

#left {
    float: left;
    width: 150px;
}

#center { margin:0 210px 0 160px;

}

#right{
    float: right;
    width: 200px;
}

#footer { text-align: center;
    clear: both;
}

#left a {text-decoration: none;
         display: block;
         text-align: center;
         color: #FFFFCC;
         font-weight:bold;
         border: 3px outset #CCCCCC;
         padding: 5px;}

figure{}

#left a:link { background-color: #003366; }
#left a:visited { background-color: #48751A; }
#left a:hover {border: 3px inset #333333; }

#left ul { list-style-type: none;
          margin: 0;
          padding-left: 0; } 
```

这是我的项目的网站：

[http://younani.com/finalsite/finalindex.html](http://younani.com/finalsite/finalindex.html)

如您所见，左、中和右列未对齐。另外，有没有办法根据页面最大化或正常来适应网站？我是建立网站的新手。此外，正如您在“关于我们”页面中看到的那样，导航触及了中心栏，它们是否围绕着它？如果需要提供更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:02:14.487

您需要添加`float:left;`到您的`#center`div 中，它们会正确对齐。是的，您可以使用百分比而不是像素来制作它，以便容器是屏幕大小的百分比。

**编辑以显示 3 列布局**

这是一个通用的 3 列布局，当你开始添加自己的样式时，你需要调整一些东西，但它可以工作，它显示了我是如何聚集`#left, #center, #right`在一起的，并使用`cascade`CSS 的力量来覆盖以前的设置.

```
<!DOCTYPE html>

<html lang="en">

<head>

   <title>Younani Flower's</title>

   <meta charset="utf-8">

   <style>
        #container {
            width: 960px;
            margin: 0 auto;
        }

        #container div {
            border: 1px solid black;
        }

        #header {}

        #left,
        #center,
        #right {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px;
        }

        #center {
            width: 494px;
        } 

        .clear {
            clear: both;
        }

   </style>

</head>

<body>
    <div id="container" class="clearfix">

        <!-- Header -->
        <div id="header">
            <h1>Younani Flowers</h1>
        </div>

        <!-- Left Column -->
        <div id="left">
            <ul>
                <li><a href="finalindex.html">Home</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a href="financing.html">Ocassions</a></li>
                <li><a href="aboutus.html">About Us</a></li>
                <li><a href="contactus.html">Contact Us</a></li>
            </ul>
        </div>

        <!-- Center Column -->
        <div id="center">
            <p>Main content</p>
        </div>

        <!-- Right Column -->
        <div id="right">
            <p>Secondary Sidebar</p>
        </div>

        <!-- Footer -->
        <div id="footer" class="clear">     
            <p>&copy; Copyright "Younani" Michael Younani 2012<br /><a href="mailto:YounaniFlower@gmail.com">YounaniFlowers@gmail.com</a></p>
        </div>
    </div><!-- #container -->
</body>

</html> 
```

# ruby - 仅循环某些对象

> ID：13657567
> 
> 赞同：0
> 
> 时间：2012-12-01T07:57:06.330
> 
> 标签：ruby, arrays

我正在编写一个程序，该程序应该对比赛中的竞争者进行排名和排序。

```
# Defining class. Also sorts the array elements in ascending order.
class Dancer
attr_reader :couplenumber
attr_reader :scores
def initialize(couplenumber,scores)
@couplenumber=couplenumber
@scores=scores.sort
end 
end

# Opening file, and sorting into array. Also splits with ",".
results = File.open("danceresult.txt", "r+")
dancescores=[]
results.each do |result|
scores = result.split(',').map(&:to_i) 
couplenumber = scores.shift
dancescores << Dancer.new(couplenumber, scores)
end
dancescores.each do |dancers|
  dancers.scores
  # Prints to screen.
  puts "Couple No. #{dancers.couplenumber} got "\
       "a minimum score of #{dancers.scores[3]} or better. "\
       "Their sum is: #{dancers.scores[0..3].inject(:+)}"
end 
```

我希望总和`Their sum is: #{dancers.scores[0..3].inject(:+)}`只取最低分数最低的那些。所以如果我们有五个竞争者，其中两个最低得分为 2，另外三个最低得分为 4，那么“总和部分”应该只取最低得分为 2 的竞争者。是否可能没有重新编写所有代码，如果是这样，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:45:05.533

首先确定最低分数是多少：

```
min_score = dancescores.map{|d| d.scores[3]}.min 
```

然后在打印之前添加一个条件：

```
dancescores.each do |dancer|
  # Prints to screen if the couple has the min_score
  if dancer.scores[3] == min_score
    puts "Couple No. #{dancer.couplenumber} got "\
       "a minimum score of #{dancer.scores[3]} or better. "\
       "Their sum is: #{dancer.scores[0..3].inject(:+)}"
  end
end 
```

或者您可以使用`select`仅处理具有 min_score 的那些舞者，如下所示：

```
dancescores.select{|d| d[3] == min_score}.each do |dancer|
  puts "Couple No. #{dancer.couplenumber} got "\
     "a minimum score of #{dancer.scores[3]} or better. "\
     "Their sum is: #{dancer.scores[0..3].inject(:+)}"
end 
```

# session - HttpHead 请求是否会触发页面上的任何脚本？

> ID：13657568
> 
> 赞同：0
> 
> 时间：2012-12-01T07:57:18.653
> 
> 标签：session, cookies, scripting, google-analytics, http-head

标题基本概括了所有内容。我目前正在开发一个发送 HttpHead 请求并验证发回的状态代码的 android 项目。我正在访问的网站的某些部分需要会话数据，如果您没有活动会话，它会将您（状态 302）重定向到登录页面，否则它只会转到请求的页面（200）。所以这是我快速而肮脏的方式来判断我拥有的会话 cookie 是否有效，而无需下载整个页面的数据。我只是想知道这是否会影响网站的谷歌分析跟踪数据之类的东西，以免为他们产生虚假的页面浏览量。

干杯:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:04:07.523

[HTTP 规范告诉我们有关 HEAD 请求的信息：](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4)

> HEAD 方法与 GET 相同，只是服务器不能在响应中返回消息体。

如果没有消息正文，怎么会有任何脚本（谷歌分析或其他）来触发？*除了 HTTP 响应标头之外，实际上没有响应。*

# sql - 跨表行同步？

> ID：13657570
> 
> 赞同：0
> 
> 时间：2012-12-01T07:57:45.360
> 
> 标签：sql, database, sqlite, schema, storage

我不知道如何搜索这个，所以在这里。

我自己的术语是“同步”和“偏离”数据库模式。如果这一切有一个官方术语，我想知道它。

这可能看起来有点愚蠢，但我一直坚持我想去的方向。我是创建数据库模式的新手。我在 Java 应用程序上使用 SQLite，并使用单个 .db 文件在不同的表中包含不同类别的信息。所以第一个表包含accountID/username/password；也许下一个表是 accountID/firstname/lastname/email。随着新功能的实施，我计划在未来添加更多表格。

我在这里遇到问题的决定是......如果用户创建了一个基本帐户，但没有填写其他任何内容 - 我应该为其他表格创建一个空白行吗？或者我不应该添加一行，而是在他们为这些表输入数据时创建行（可能是几个月后）？我希望这是有道理的。

有什么优点/缺点？实施/编程？效率？等等

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:04:57.200

IMO，所有单值用户属性都应该驻留在一个表中，即用户表将包含以下列：

*   帐户ID
*   用户名
*   密码
*   名
*   姓
*   电子邮件

加入用户时，您可以将每个属性指定为强制或可选。可选属性将是数据库中的 NULLable 列。当用户为这些属性指定值时，您只需在表中更新它们。

展望未来，在添加新功能时，如果您碰巧遇到用户的单值属性，则需要更改 users 表并添加默认值为 null 的列。

如果向用户添加新属性的频率太高，那么您可以转向属性表模型，其中每一行将存储用户的一个附加属性。users 表和此 user_attrs 表之间将存在一对多的关系。HTH。

# php - 如何使用 Codeigniter 在 php 中回显包含 php 的链接？

> ID：13657573
> 
> 赞同：0
> 
> 时间：2012-12-01T07:58:14.813
> 
> 标签：php, codeigniter, xampp

所以我试图回显一个链接以调用函数以在 CodeIgniter 中加载视图。这是链接：

```
<a href='<?php echo base_url()."main/signup" ?>'>Sign Up!</a>

echo '<a href=\'<?php echo base_url()."main/login" ?>\'>Log In!</a>'; 
```

我正在运行 Acer Aspire 5920，

Ubuntu 12.04，

Xampp 1.8.1,

代码点火器 2.1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:53:47.647

从 href 之间删除 php 标签，如下所示：

```
echo '<a href="' . base_url() . 'main/login'">Log In!</a>'; 
```

祝你好运！

# oracle - 存储返回指定列的多个返回的选择查询的数据

> ID：13657579
> 
> 赞同：1
> 
> 时间：2012-12-01T07:58:51.757
> 
> 标签：oracle, oracle10g

我有一个返回多个值的选择查询。我必须将它存储在一个变量中并在游标创建的 where 子句中使用它。我的变量应该是什么类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T04:34:56.443

As stated earlier, you should combine the two queries (the query for CURSOR and the query to act as its WHERE clause) into a single query. However, if you must store data into variables before passing it to WHERE clause of CURSOR, you can define variable as follows:

Let's say your source table is TAB_SOURCE and you want to select columns COL1, COL2, and COL3 from it. Variable definition would be:

```
V_COL1 TAB_SOURCE.COL1%TYPE;
V_COL2 TAB_SOURCE.COL2%TYPE;
V_COL3 TAB_SOURCE.COL3%TYPE; 
```

This way, you do not need to write data types explicitly while defining variables. DBMS automatically picks data type of source columns and assigns it to respective variables.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:51:55.987

首先，您应该尽量不要存储它，因为将两个查询合并为一个会更容易和更有效。

除此之外，类型应该与您正在读取的列相同。

# c# - 为什么不找资源

> ID：13657580
> 
> 赞同：1
> 
> 时间：2012-12-01T07:58:54.997
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在上传图片：

```
[HttpPost]
public ActionResult Create(PlaceViewModel model)
{
    if (ModelState.IsValid)
    {
        string fileName = Guid.NewGuid().ToString() + ".jpg";
        string serverPath = Server.MapPath("~");
        string imagesPath = serverPath + "Content\\Uploads\\";
        string thumbPath = imagesPath + "Thumb\\";
        string fullPath = imagesPath + "Full\\";
        ImageModel.ResizeAndSave(thumbPath, fileName, model.ImageUploaded.InputStream, 100, true);
        ImageModel.ResizeAndSave(fullPath, fileName, model.ImageUploaded.InputStream, 600, true);

        model.Image = fileName;

        var place = new Place();
        model.ConvertToData(place);

        _placeRepository.Add(place);
        _placeRepository.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(model);
} 
```

文件上传并物理存在于磁盘中

我从 html 调用图像：

```
<img height="100px" src="/Content/Uploads/Thumb/833c4384-884d-4250-982c-d5df0fa875ef.jpg" width="100px"/> 
```

但是我没有看到这个图像。

如果我打电话`localhost:23354/Content/Uploads/Thumb/833c4384-884d-4250-982c-d5df0fa875ef.jpg`我有错误：

> 无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/Content/Uploads/Thumb/833c4384-884d-4250-982c-d5df0fa875ef.jpg

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:52:04.387

如果您在 IIS 中的虚拟目录中运行，则应预先指定虚拟目录。你不应该在你的视图中硬编码 url。始终使用助手：

```
<img height="100px" src="@Url.Content("~/Content/Uploads/Thumb/833c4384-884d-4250-982c-d5df0fa875ef.jpg")" width="100px"/> 
```

现在，当您在没有虚拟目录的情况下在本地运行时，助手将生成：

```
/Content/Uploads/Thumb/833c4384-884d-4250-982c-d5df0fa875ef.jpg 
```

当您在 IIS 中的虚拟目录中上传应用程序时，助手将再次生成正确的 url：

```
/AppName/Content/Uploads/Thumb/833c4384-884d-4250-982c-d5df0fa875ef.jpg 
```

如您所见，您永远不应该对 url 进行硬编码。同样代表您的 javascript 文件中的 url。在 ASP.NET MVC 应用程序中处理 url 时始终使用帮助程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:33:28.550

我松了。

图像保存`ImageModel.ResizeAndSave`并附加扩展名“.jpg”

```
newImage.Save(savePath + fileName + ".jpg", ImageFormat.Jpeg); 
```

原来文件是filename.jpg.jpeg

# cakephp - cakephp 通过按钮调用动作

> ID：13657582
> 
> 赞同：2
> 
> 时间：2012-12-01T07:59:06.137
> 
> 标签：cakephp, view, controller, action

我希望通过表单->按钮调用控制器的操作。我在网页中有以下内容：

*   搜索表格
*   带有 delte 选项的表作为 postLink
*   2 个按钮应该调用相同的操作 onclick。我的问题是，当我单击任何按钮时，不会触发发布请求。下面是我的代码：view.ctp

    echo $this->Form->create('Search', array('type' => 'file', 'url' => array('controller' => 'artists', 'action' => 'index', ), )); echo $this->Form->input('name'); echo $this->Form->end(array( 'label' => 'Search Artist', 'class' => 'btn btn-info controls' ));

    回声 $this->For....

    ```
    echo '' . $this->Form->postlink('',
                        array('action' => 'delete',
                            $row['Artist']['id']),
                        array('confirm' => 'Are you sure?')
                    ); 
    ```

    echo $this->Form->button('Featured', array('name' => 'submit', 'value' => 'Featured', 'type' => 'submit', 'url' => array( '控制器' => '艺术家', '动作' => '索引', ), ));

    echo $this->Form->button('Unfeatured', array('name' => 'submit', 'value' => 'Unfeatured', 'type' => 'submit', 'url' => array( '控制器' => '艺术家', '动作' => '索引', ), ));

控制器：

```
public function isFeatured() {
    if ($this->params->data['submit'] == 'Featured') {
        //code
    } else if($this->params->data['submit'] == 'Unfeatured') {
        //code
    }
    $this->redirect(array('action' => 'index'));
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:05:40.147

您的表单声明不会将操作指向控制器中的“isFeatured”函数。您应该将按钮重写为实际表单。按钮本身不提交。

```
echo $this->Form->create('Search', array('action'=>'isFeatured'));
echo $this->Form->hidden('featured', array('value'=>'1'));
echo $this->Form->end('Featured');

echo $this->Form->create('Search', array('action'=>'isFeatured'));
echo $this->Form->hidden('featured', array('value'=>'0'));
echo $this->Form->end('Not Featured'); 
```

控制器：

```
public function isFeatured() {
   if($this->request->data){
      if($this->request->data['Search']['featured'] == '1'){
         //..Set the artist as featured
      }
      if($this->request->data['Search']['featured'] == '0'){
         //..Set the artist as not featured
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-07T13:23:15.500

如果重定向不重要，您可以做一件事吗？只需进行 ajax 调用并传递单击按钮的值，然后根据需要从控制器重定向

# java - 使用 Spring 测试创建测试套件

> ID：13657584
> 
> 赞同：0
> 
> 时间：2012-12-01T07:59:14.797
> 
> 标签：java, spring, junit4, spring-test

在我的 Spring-Maven 项目中，我的单元测试继承自一个基类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:testDalApplicationContext.xml" })
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
@Transactional(value = "transactionManager")
public abstract class BaseRepositoryUnitTest {

} 
```

然后一个典型的单元测试看起来像：

```
public class UserRepositoryTest extends BaseRepositoryUnitTest {

@Autowired
UserRepository userRepository;

@Test
public void testFindUserByEmailAddress() {
 ...
}
} 
```

这种结构允许我：

*   将单个测试作为 Junit 测试运行（来自我的 Eclipse IDE）。
*   使用 Maven 构建运行我的所有测试。

如何从我的 Eclipse IDE 运行我的所有测试？我知道我应该创建一个测试套件，但由于某种原因，我似乎无法弄清楚如何使用这种结构。

顺便说一句 - 我正在使用 Junit 4.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:02:00.120

**在应用程序中运行所有 Junit 测试**

右键单击项目或包 > 运行方式 > Junit 测试

![在此处输入图像描述](../Images/eb4e079e46b0291a5486b4dae4f19f0e.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-03T07:54:41.403

mvn -Dtest=TestCircle 测试

[http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html](http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html)

另一种运行特定测试用例的方法，其中 TestCircle 是文件号，而 test 是方法名称。

# blackberry - 在黑莓中运行另一个应用程序的菜单项

> ID：13657585
> 
> 赞同：0
> 
> 时间：2012-12-01T07:59:30.710
> 
> 标签：blackberry, menu

我需要获取当前处于前台的屏幕菜单，然后获取其菜单项并运行其菜单项之一。我们可以通过编程方式做到这一点吗？我可以使用以下代码获取 ApplicationDescriptor 及其模块名称：

```
int moduleHandle = CodeModuleManager.getModuleHandle("module name");
ApplicationDescriptor[] apDesArr = CodeModuleManager.getApplicationDescriptors(moduleHandle); 

ApplicationDecriptor  apDes = apDesArr[0]; 
```

但是接下来我该怎么办。请帮忙。提前致谢。

**更新：**

我通过以下代码获取屏幕：

```
private static void runMenuItem(String menuItemText) {

  Screen screen = Ui.getUiEngine().getActiveScreen();

  Menu menu = screen.getMenu(0);

  for (int i = 0, cnt = menu.getSize(); i < cnt; i++)

    if(menu.getItem(i).toString().equalsIgnoreCase(menuItemText))

            menu.getItem(i).run();
} 
```

但是这段代码的第一行弹出了一个异常：No Application Instance。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:21:40.777

你目前的方法行不通。您无法访问应用程序上下文之外的其他屏幕。

您仍然可以尝试使用[事件注入](http://supportforums.blackberry.com/t5/Java-Development/Event-injection/ta-p/444735)。一个经过良好调整的键注入黑客可以完成这项工作（您可以注入一个菜单键按下将其打开，注入向下滚动到所需位置，最后注入一个拨轮单击以选择选项）。问题是这种方法不够可靠。例如，许多应用程序使用事件注入以编程方式关闭相机应用程序，但在 OS 6.0 上，有些模型无法使用。如果目标应用程序的新版本发布并且菜单项位置发生更改，则将无法正常工作。而且你有时需要`Thread.sleep`在每个注入的事件之间调用以使其工作，但这非常依赖于设备。

简而言之，您可以在某些模型或操作系统版本上进行实验性破解，但这不是让生产代码进入的东西。

# ios - iphone应用的OTA受限

> ID：13657586
> 
> 赞同：1
> 
> 时间：2012-12-01T07:59:50.963
> 
> 标签：ios

我们创建了一个 Appstore，用于在我们的企业内部分发应用程序。我们在此应用商店中使用 OTA 进行企业分发。在这里下载应用程序，我们使用如下链接：点击此处安装应用程序

现在我们有一个新要求，我们希望将给定用户的应用下载限制为 3 次。基本上，给定用户在 6 个月内不能从应用商店安装给定应用超过 3 次。我怎样才能做到这一点？

# java - MVC Spring 表单报错 Tomcat

> ID：13657599
> 
> 赞同：0
> 
> 时间：2012-12-01T08:02:26.580
> 
> 标签：java, forms, spring, tomcat, maven

尝试通过控制器打开此 jsp 页面时出现此错误：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /WEB-     INF/jsp/rate.jsp at line 12

9:  <body>
10:         <h1>Exchange Rate</h1>
11:         <form:form method="POST" action="/rate">
12:             <form:label path="CurrencyCodeFirst">From Currency:</form:label>
13:             <form:input path="CurrencyCodeFirst"></form:input>
14:             
15: 
```

# coldfusion - Coldfusion querynew() 将日期时间转换为时间戳，烦人

> ID：13657601
> 
> 赞同：3
> 
> 时间：2012-12-01T08:02:35.650
> 
> 标签：coldfusion

如果我运行查询：

```
<cfquery name="gGet" datasource="#application.datasource#">
   select dateuploaded from table
</cfquery> 
```

我得到了一个可爱的约会时间，如下所示：

```
2012-12-01 12:46:00 
```

但是，如果我创建一个新的查询对象并将日期时间插入其中

```
<cfset qReturn = queryNew("deployDate", "Date")>
<cfoutput query="qGet" startrow="1" maxrows="7">
    <cfset queryAddRow(qReturn)>
    <cfset querySetCell(qReturn,"deployDate",qGet.dateuploaded)>
</cfoutput> 
```

我得到了这个可怕的时间戳垃圾`{ts '2012-12-01 12:46:00'}`

我应该怎么做才能保留日期时间？

或者，我将如何将时间戳重新格式化为日期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:03:03.150

You are almost certainly worrying about nothing. You're simply looking at what the date/time object returns when its `toString` method is called, which ColdFusion uses to be able to output something on the screen (which needs to be string data). The various values you are looking at will all be completely valid date/time types, just different classes implement `toString` differently. Your code will be dealing with the object, not the string representation of its value, so this is a non-issue.

Sounds like yer just outputting a raw value from either the DB result or the constructed query without formatting it, thus meaning CF needs to convert it to a string via its default `toString` method, and as I say above the `toString` methods vary from one DateTime implementation to another (the class of the object from the DB is different from the one CF uses for its own date objects, hence the different `toString` implementations you're seeing). One should never do that if one *cares* about what is being output, as you are here. Always convert a DateTime object to a string yourself if you care about the format used to display it:

`<cfoutput>#gGet.dateuploaded[1].dateTimeFormat("yyyy-mm-dd HH:nn:ss")#</cfoutput>`

`<cfoutput>#qReturn.deployDate[1].dateTimeFormat("yyyy-mm-dd HH:nn:ss")#</cfoutput>` (respectively, based on the info you've provided us).

This will return & display the date object values in the format you specify, rather than leaving it to CF to use its defaults.

Only do this for *display*. For any date operations just leave the things as-is. You're only perceiving there to be something "wrong" here because you don't understand that dates in CFML are objects not just human-readable strings. CF isn't - however - confused by this ;-)

I discuss this with more clarify (and taking up more space) in this [article about date/time objects and their string representations](http://adamcameroncoldfusion.blogspot.co.uk/2012/12/what-you-see-is-not-necessarily-what.html), if you want to take a look.

# php - 将数据库值变成变量

> ID：13657604
> 
> 赞同：0
> 
> 时间：2012-12-01T08:02:58.207
> 
> 标签：php

我添加了一个测试代码。请检查它。

```
 $products_text_box['text_box'] = "test";
    $test = "demo" 
```

当我打印这个 echo $products_text_box['text_box']; 然后，它将显示输出测试。

但我想显示存储在 $test 变量中的输出演示，我必须将测试转换为 $test。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:20:23.343

一种方法是使用[eval](http://www.php.net/manual/en/function.eval.php)，但要注意：

eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

另一个构造变量名的例子： [example](http://www.wellho.net/mouth/483_Double-Dollars-in-PHP.html)

```
$test = "demo"
$products_text_box['text_box'] = "test";
echo $$products_text_box['text_box']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:25:19.827

我不鼓励使用 eval()。

你为什么想做这个。更具体地说明您想做什么。我可以为您提供替代方案

# jquery - 如何使整个 div 可翻转？

> ID：13657611
> 
> 赞同：0
> 
> 时间：2012-12-01T08:03:40.837
> 
> 标签：jquery

我正在使用 quickFlip，它非常棒，但我不知道如何让整个 div 翻转。用于翻转 div 的类在附加到实际 div 时不起作用，所以我尝试了 div 内的 ap 元素，高度和宽度设置为 100%，并将翻转类添加到其中，但现在我不能在里面嵌套标题。

关于如何使用 jQuery 使 div 可翻转的任何想法？

我当前的瓷砖 html 是这样的：

```
<div id="tile-wrap">
           <div class="size4 red fL i-projects"> 
        <h1>Project Portfolio</h1>
    </div>
            <div class="size4 orange fR i-interests">
        <h1>Career Interests</h1>
    </div>
    <div class="size4 purple fL i-resume">
        <h1>Resume</h1>
    </div>
    <div class="size4 green fR">
    </div>
    <div class="size4 x-l blue fL i-person">
        <h1>About Me</h1>
    </div>
     <div class="size4 yellow fR i-school">
        <h1>Education</h1>
    </div>
    <div id="contact" class="size2 black fL i-email">
        <h1 style="text-align:left">Contact</h1>
    </div>
  </div> 
```

我尝试使用 quickFlip 是这样，但我无法在其中获得任何标题或其他内容。

```
 <div id="tile-wrap">
    <div class="quickFlip">
         <div class="size4 red i-interests"> 
        <p class="quickFlipCta" style="height:100%;width:100%">
                <!-- this is not shown -->
                <h1>Project Portfolio</h1>
             </p>
         </div>
         <div class="size4 red">
          <p class="quickFlipCta" style="height:100%;width:100%"> 
              <h1>Provide Info Here</h1>
              <!-- this is not shown and niether is the heading above -->
              This might contain a list or something.
          </div>
    </div>
     </div> 
```

这使得整个图块可以翻转，但现在我不能有任何标题，我认为有很多东西不能嵌套在 ap 元素中，所以我也不能使用它们。

有什么解决办法吗？我想知道为什么**class="quickFlipCta"**在 div 上不起作用。如果是这样，那就更神奇了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:35:22.560

您应该尝试通过 CSS3 动画和 3d 变换来进行翻转。这更流畅，不需要像 jQuery 那么多的资源。

看看这些页面：

*   [http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)
*   [http://www.w3schools.com/css3/css3_3dtransforms.asp](http://www.w3schools.com/css3/css3_3dtransforms.asp)

# ios - 尝试解析由 iOS 项目的 RESTful Web APS 返回的 json 数组

> ID：13657613
> 
> 赞同：6
> 
> 时间：2012-12-01T08:03:47.717
> 
> 标签：ios, json, xcode, parsing

我正在尝试解析由 RESTful Web API 返回的 JSON 数组，该数组看起来类似于以下内容（使用 jsonviewer，json 作为数组中的一堆字典返回）：

```
[{
"date": "2011-03-21",
"meal": "BREAKFAST",
"category": "BREAKFAST BAKERY",
"recipe": "213012",
"name": "Aesops Bagels",
"portion": "1",
"unit": "each"}, 
```

我正在尝试获取“名称”信息，然后将其存储到 tableview 中。这是我用来完成此操作的代码：

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSArray *allDataArray = [NSJSONSerialization JSONObjectWithData:webData 
                                                            options:0 
                                                              error:nil];

    for (NSDictionary *diction in allDataArray) {
        NSDictionary *menuItem = [diction objectForKey:@"menuItem"];
        NSString *name = [menuItem objectForKey:@"name"];

        [array addObject:name];
    }

    [[self MyTableView]reloadData];
} 
```

我得到的错误是：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil”

所以我很确定在 for 循环上方的行中发生了错误，这导致数组尝试将其`nil`作为一个值。但是任何帮助弄清楚出了什么问题/如何成功解析这个 json 将不胜感激。我对 json、xcode 和 iOS 都很陌生，所以如果我做了任何特别愚蠢的事情，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:12:02.207

`menuItem`您的 JSON 示例中实际上没有调用项目。您的代码看起来就像是为解析 JSON 而编写的，如下所示：

```
[{ "menuItem" : { "name" : "Aesops Bagels",
                  …
                }
 },
] 
```

即，它在列表中的每个字典中都需要一个“menuItem”键。如果您实际上是在尝试解析您发布的代码段，我认为您只需要从此简化循环代码：

```
NSDictionary *menuItem = [diction objectForKey:@"menuItem"];
NSString *name = [menuItem objectForKey:@"name"]; 
```

到：

```
NSString *name = [diction objectForKey:@"name"]; 
```

在尝试将其添加到结果数组之前，您可能还需要确保名称不为零，以防万一您的数据有一个缺少名称的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:21:41.173

正如 ckhan 所说，您的 JSON 对象只是一个字典数组，没有任何对“menuitem”的引用。如果实际上您的 JSON 对象中没有“menuitem”条目（即假设您的问题中提供的 JSON 具有代表性），那么它只是：

```
for (NSDictionary *diction in allDataArray)
    [array addObject:[diction objectForKey:@"name"]]; 
```

或者

```
[allDataArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    [array addObject:obj[@"name"]];
}]; 
```

或者，更简单地说，制作`array`一个不可变的`NSArray`而不是 a`NSMutableArray`并使用以下内容：

```
NSArray *array = [allDataArray valueForKey:@"name"]; 
```

顺便说一句，如果您真的担心某些字典条目可能没有“名称”条目，而一行`valueForKey`处理该条目，则其他行将需要添加条件逻辑，例如：

```
for (NSDictionary *diction in allDataArray) {
    id value = diction[@"name"];
    if (value == nil)
        value = [NSNull null];
    [array addObject:value];
}; 
```

显然，我将 a 添加`NSNull`到数组中，以便您知道有一个没有名称的字典条目。你想如何处理这种情况（例如，添加一个 NSNull，简单地不添加任何内容等）取决于你，但希望这会给你这个想法。但我认为主要问题是“menuitem”参考，所以这可能没有实际意义。

# mongodb - 用 Mongo 存储时间长度的类型

> ID：13657616
> 
> 赞同：3
> 
> 时间：2012-12-01T08:03:55.833
> 
> 标签：mongodb, mongoid3

我应该使用什么类型来存储 MongoDB 的时间长度？

我需要存储声音数据的时间长度。所以时间戳类型似乎不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T13:06:20.617

您应该为此使用整数。

MongoDB 有两种[数据类型](http://docs.mongodb.org/manual/core/document/#bson-types)，特别是用于计时：[Date](http://docs.mongodb.org/manual/core/document/#date)和[Timestamp](http://docs.mongodb.org/manual/core/document/#timestamps)。但这些是为了代表一个特定的时间点。它们不适合表示持续时间（另外，时间戳仅供内部使用。不鼓励用户使用它）。

所以最好的办法是将持续时间转换为毫秒并将这个值存储在数据库中。

# asp.net - 使用 ASP.NET MVC 4 和 System.Web.Providers 向网站添加其他用户信息

> ID：13657620
> 
> 赞同：1
> 
> 时间：2012-12-01T08:04:01.000
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership

我已经使用 System.Web.Providers 设置了 ASP.NET MVC 4，现在我想添加更多用户信息，例如地址、生日等。

我还想将来自提供者的现有用户数据与帖子相关联，以便每个帖子都有来自提供者的作者。

我必须这样，当用户创建帖子时，关于用户的一切都必须（懒惰地）从选择该帖子中获得。

我可能正在考虑拥有一个包含`UserProfile`来自标准 MVC 模板项目（似乎与 HTTP 登录一起使用）和`aspnet_users`来自提供程序的类的 User 类，但我不确定如何去做。

这样做的常见方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:20:01.097

我会建议去`Providers`。这些在*ASP.NET*中可用很长时间，并且仍在使用。它们的实现对于两者（*WebForms*和*MVC*）都是相同的，所以我建议阅读关于它们的综合教程

*   [http://aspnet.4guysfromrolla.com/articles/120705-1.aspx](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)作者：Scott Mitchell

该`Profile`功能正是提供用户特定信息的地方。它可以很容易地扩展并表示扩展点到`Membership`. 我们正在使用我们的一个`Profile`类：

```
public class ProjectProfile : ProfileBase 
{
    // TODO custom properties 
} 
```

在 web.config 中配置

```
<profile defaultProvider="ProjectProfile" 
         inherits="MyLibrary.ProjectProfile, MyLibrary">
  <providers >
  <clear/>
  <add name="ProjectProfile" type="MyLibrary.ProjectProfileProvider, MyLibrary" />
  </providers>
</profile> 
```

所以，`System.Web.HttpContext.Current.Profile as ProjectProfile`有需要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:24:36.983

此[链接](http://www.asp.net/web-forms/tutorials/security/membership/storing-additional-user-information-cs)应为您提供实施 ProfileProvider 的所有信息

正如帖子中所建议的（他们使用第三个选项）以及在[这个答案](https://stackoverflow.com/a/1044531/394028)中，您应该考虑实现自己的逻辑以将配置文件绑定到当前活动用户

我使用配置文件类并扩展 MembershipUser'one 来实现我的类。这样我就可以用类似的方式访问它：

```
var user = Membership.GetUser();
var profile = user.Profile; 
```

# java - 我的布局中多个图像的翻译动画在我的 android 应用程序中被截断

> ID：13657623
> 
> 赞同：1
> 
> 时间：2012-12-01T08:04:19.120
> 
> 标签：java, android, android-animation

我的应用程序中有 3`horizontal linear layouts`张卡片。第一排4张牌，中间排4张牌，第三排4张牌。我只是想为卡片**移动到甲板上（中间布局）****设置动画**，我正在使用翻译来移动它们和.**`Animation``vertically``horizontally`**

 **动画运行正常，但图像（它们是按钮）在尝试移出自己的`linearlayout`. 我尝试将整个布局包装在 a 中`FrameLayout`，但这并没有帮助。请帮忙。我在`xml layout`下面有我的和代码片段谢谢

布局：

```
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background"
>     

<LinearLayout
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"

>    

<LinearLayout 
android:orientation="horizontal"
android:layout_gravity="center_horizontal"
android:layout_width="wrap_content"
android:layout_height="wrap_content">

<LinearLayout 
android:orientation="vertical"
android:layout_gravity="center_horizontal"
android:layout_width="wrap_content"
android:layout_height="wrap_content">

<Button android:id="@+id/cpu1" 
android:background="@drawable/card"
android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
/> 

<TextView
    android:id="@+id/cpu1count"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="visible"
            android:src="@drawable/card"
    >

</TextView>
</LinearLayout>
<ImageView
    android:id="@+id/blankc1"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

    <LinearLayout 
    android:orientation="vertical"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
<Button android:id="@+id/cpu2" 
android:background="@drawable/card"
android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
 /> 
 <TextView
    android:id="@+id/cpu2count"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="visible"
            android:src="@drawable/card"
    >

</TextView>
</LinearLayout>
<ImageView
    android:id="@+id/blankc2"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

    <LinearLayout 
    android:orientation="vertical"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<Button android:id="@+id/cpu3"
android:background="@drawable/card"
    android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
 />
<TextView
    android:id="@+id/cpu3count"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="visible"
            android:src="@drawable/card"
    >

</TextView>
</LinearLayout>
<ImageView
    android:id="@+id/blankc3"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

    <LinearLayout 
    android:orientation="vertical"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<Button android:id="@+id/cpu4"
android:background="@drawable/card"
   android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
 />
<TextView
    android:id="@+id/cpu4count"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="visible"
            android:src="@drawable/card"
    >

</TextView>
     </LinearLayout>
     <ImageView
    android:id="@+id/lock14"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

</LinearLayout>
<LinearLayout 
    android:orientation="horizontal"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <Button android:id="@+id/pile1" 
    android:background="@drawable/card"
android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
/> 
<ImageView
    android:id="@+id/lock14"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

<Button android:id="@+id/pile2" 
android:background="@drawable/card"
android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
 /> 
<ImageView
    android:id="@+id/lock15"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

</LinearLayout>
<LinearLayout 
    android:orientation="horizontal"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <LinearLayout 
    android:orientation="vertical"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <Button android:id="@+id/player1" 
    android:background="@drawable/card"
android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
/> 
<TextView
    android:id="@+id/p1count"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="visible"
            android:src="@drawable/card"
    >

</TextView>
     </LinearLayout>
<ImageView
    android:id="@+id/lock27"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

<LinearLayout 
    android:orientation="vertical"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<Button android:id="@+id/player2" 
android:background="@drawable/card"
android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
 /> 
 <TextView
    android:id="@+id/p2count"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="visible"
            android:src="@drawable/card"
    >

</TextView>
     </LinearLayout>
<ImageView
    android:id="@+id/lock28"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

    <LinearLayout 
    android:orientation="vertical"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<Button android:id="@+id/player3"
android:background="@drawable/card"
    android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
 />
<TextView
    android:id="@+id/p3count"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="visible"
            android:src="@drawable/card"
    >

</TextView>
     </LinearLayout>
<ImageView
    android:id="@+id/lock29"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

<LinearLayout 
    android:orientation="vertical"
    android:layout_gravity="center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<Button android:id="@+id/player4"
android:background="@drawable/card"
   android:layout_width="60dp" 
android:layout_height="79dp"
android:layout_gravity="center_vertical|center_horizontal" 
 />
<TextView
    android:id="@+id/p4count"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="visible"
            android:src="@drawable/card"
    >

</TextView>
     </LinearLayout>
<ImageView
    android:id="@+id/lock30"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_gravity="center_vertical|center_horizontal" 
            android:visibility="invisible"
            android:src="@drawable/card"
    >

</ImageView>

</LinearLayout>

</LinearLayout>

</LinearLayout> 
```

然后我在代码中为每个按钮设置动画（cpu1，显示顶行的第一张卡）：

```
public void animate_c1_2(){

    //animates player card#1 going to deck
            cpu1.setVisibility(View.VISIBLE);
            //FrameLayout cardimageblank = (FrameLayout) findViewById(R.id.graphics_holder);
            Animation animation = new TranslateAnimation(0, 200,0, 50);   

         animation.setDuration(500);
         animation.setFillEnabled(true);
         animation.setFillAfter(true);
         cpu1.startAnimation(animation);

         animation.setAnimationListener(new Animation.AnimationListener()         {   
               public void onAnimationEnd(Animation animation) { 
                   // set image resource to card value 
                   animation.setFillAfter(false);
                   //player1.setVisibility(View.INVISIBLE);

                   }             
               public void onAnimationRepeat(Animation animation) {         
                   // Do nothing!            
                   }              
               public void  onAnimationStart(Animation animation){                
                   // Do nothing!            
                   }         
               }); 

           } // end cpu1-2 anim 
```**

# java - 使用java在两个html标签之间查找html源代码

> ID：13657626
> 
> 赞同：0
> 
> 时间：2012-12-01T08:04:46.357
> 
> 标签：java, android

**通过 id 查找 html 元素**

在我的项目中，我想要这样的例子

```
<html>
<body>
<table >
<tr>
    <td>first column<br></td>

     <td>second column</td>
     <td>third column</td>
</tr>
</table>
</body>
</html> 
```

我想要标签之间的html源代码`<tr></tr>`。输出：

```
<td>first column</td>
<td>second column</td>
<td>third column </td> 
```

我已成功找到标记的值，但在我的项目中我想要 html 源代码。我正在使用 htmlcleaner 库来寻找价值。htmlcleaner 中是否有可用的库或方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:10:58.230

是的，您可以使用 jQuery 搜索源代码，然后操作或显示标签、id、类或属性。如果我不在手机上，我会给出语法，但我稍后会编辑。一个例子...

api.jquery.com/id-selector/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:15:19.843

使用 Java HTML 解析器

[http://htmlparser.sourceforge.net/](http://htmlparser.sourceforge.net/)

HTML Parser 是一个 Java 库，用于以线性或嵌套方式解析 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:24:10.197

您可以使用拆分方法

最初`originalString`是原始的`String`

```
 String strAfterFirstTrTag = originalString.split("<tr>");
  String[] partsAfterTrTag =  strAfterFirstTrTag.split("</tr>");
  String HtmlSource = partsAfterTrTag[0];
  //use HtmlSource

  originalString = partsAfterTrTag[1];
  strAfterFirstTrTag = null;
  partsAfterTrTag  = null;
  HtmlSource = null; 
```

您可以在此代码中循环以查找顺序标签..

# sql - 使用新条目更新列

> ID：13657629
> 
> 赞同：0
> 
> 时间：2012-12-01T08:05:17.933
> 
> 标签：sql, plsql, triggers, oracle11g

我创建了一个具有以下属性的表：

```
VendorAccount(
  Ven_AccountId, 
  Ven_RegNo,   
  Ven_TxDate,   
  Ven_Invoice_RefNo,    
  TotalAmount,
  Paid_ToVen ,    
  Balance
) 
```

在上表中，当我`Ven_Invoice_RefNo`从 POP up LOV 中选择时，它给了我`TotalAmount`另一个表中的值。我希望每当我在 `Paid_ToVen`列中输入值时，应该从`Total_Amount`as中减去该金额，`Balance`并且新的减去值应该显示`TotalBalance`在下一个条目的列中. 以下是该表的报告。 ![报告](../Images/36ebae9d9cc68db9ea8294169356722e.png)

`TotalAmount`我想要新条目中列中的更新值，即 2300 。是否有任何 Trigger 或 Query 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:58:27.853

您可以尝试`trigger`更新后。您将需要如下所示的逻辑。请根据您的表格使用正确的字段并尝试一下。

```
CREATE TRIGGER trg_totalBalance AFTER UPDATE ON vendoraccount
FOR EACH ROW
BEGIN
  DECLARE new_balance INT;
  DECLARE new_total INT;
  DECLARE new_paid INT;

   SELECT balance INTO old_balance, 
   total INTO old_total,
   paidtoven INTO new_paid 
   FROM vendoraccount
   WHERE ven_regno = new.ven_regno
   AND ven_invoice_refno = new.ven_invoice_refno;

   -- depending on your current balance update logic,
   --  you could wrap this update with an IF/ELSE
   -- IF XYZ THEN
   UPDATE vendoraccount SET totalamount = old_total + old_balance - new_paid,
   balance = totalamount - new_paid
   WHERE ven_regno = new.ven_regno
   AND ven_invoice_refno = new.ven_invoice_refno;
   -- END IF;
END; 
```

# c++ - CURLOPT_PROGRESSFUNCTION 这些参数是什么意思？

> ID：13657630
> 
> 赞同：0
> 
> 时间：2012-12-01T08:05:23.617
> 
> 标签：c++, libcurl

中`libcurl`，设置调用的函数中的参数是什么意思`CURLOPT_PROGRESSFUNCTION`？

```
int function(void *clientp, double dltotal, double dlnow, double ultotal, double ulnow); 
```

我知道这是一个蹩脚的问题，但网站似乎没有描述，或者我找不到:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:35:04.173

这个[例子](http://curl.haxx.se/libcurl/c/curlgtk.html)可能会有所帮助。总结一下：

```
int function(
  void *clientp,  // this is an unchanged pointer as set with CURLOPT_PROGRESSDATA
  double dltotal, // the total bytes to be downloaded (or 0 if not downloading)
  double dlnow,   // the current download bytecount (or 0 if not downloading)
  double ultotal, // the total bytes to be uploaded (or 0 if not uploading)
  double ulnow);  // the current upload bytecount (or 0 if not uploading) 
```

请参阅[CURLOPT_PROGRESSDATA](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPROGRESSDATA)了解`clientp`. 如果您从回调中返回 0 以外的任何值，则传输将被取消。

# ios - 如何在代码中复制 Core Data 托管对象

> ID：13657637
> 
> 赞同：0
> 
> 时间：2012-12-01T08:06:27.047
> 
> 标签：ios, xcode, core-data

我什至不确定我是否说得对，但我正在尝试复制用户创建的 coredata 对象实例并且很难弄清楚。

我有一个从`managedObjectContext`.

这是来自我的数据库中的一个测验，它有很多问题。

我在内存中有我的 Question 实例，名为 question1。我想将 question1 复制到一个名为 question2 的实例中。

```
Question *question2 = question1; 
```

有时有效，但有时也会崩溃（我知道这不是正确的做法）

我一直在搞乱 NSCopying 和`-(id)copyWithZone:(NSZone *)`区域，但我只是得到一个空白实例。

如果有人可以提供帮助，那将非常感谢！

这里有一些更详细的信息。

我有问题1，它是问题的一个实例。例如 question1.answer 将返回该问题的答案。

我想简单地将问题1复制到问题2。我不需要将 question2 存储在数据模型中，或者我只需要在循环中使用它然后释放。

基本上我想这样做：

```
Question *question2 = question1;
NSLog(@"%@", question2.answer) 
```

上述内容有时有效，但有时我会在 nslog 行上随机崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T08:50:34.020

您必须在托管对象上下文中创建一个新对象，然后复制所有属性和关系：

```
Question *question2 = [NSEntityDescription
                           insertNewObjectForEntityForName:@"Question"
                           inManagedObjectContext:context];
// Copy attributes:
question2.attr1 = question1.attr1;
question2.attr2 = question1.attr2;
// ...
// Copy relationships:
question2.rel1 = question1.rel1;
// ... 
```

这可以使用`NSEntityDescription`of`question1`和处理实体描述中的所有属性和关系来自动化，请参阅此问题的（很好的）答案：[如何复制或复制核心数据托管对象？](https://stackoverflow.com/questions/2730832/how-can-i-duplicate-or-copy-a-core-data-managed-object). 但请注意，该代码还复制了所有相关对象，这可能不是您想要的。

我认为如果没有太多的属性/关系，“手动”复制会更容易，您可以决定每个相关对象是否也必须复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:46:11.107

马丁的答案是正确的。您只能在托管对象上下文中实例化 NSManagedObject 子类。

在您的情况下，您说您不想保留复制的对象，您只想使用它。在这种情况下，有以下选择：

1.  在当前托管对象上下文中创建新对象，但不保存对象。
2.  创建一个新的托管对象上下文在此托管对象上下文中创建您的副本，并且在删除它时不要保存第二个 moc 的内容。
3.  创建一个不是 NSManagedObject 子类的自定义类。此类仅具有`Question`您要使用的类中的字段的副本。为这个接受`Question`对象的新类编写一个初始化程序。然后你可以在你的循环中使用这个新对象，而不用担心持久化它。

# c# - “@”之类的字符是什么类型以及如何转换为ASCII

> ID：13657641
> 
> 赞同：2
> 
> 时间：2012-12-01T08:07:14.627
> 
> 标签：c#

谁能告诉我`"&#64;"`这种字符的类型是什么。难道叫Unicode字符？

我也想拥有全套这种类型的字符，并且我想知道如何在 C# 中将它们转换为 ascii。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:12:21.470

序列

`&#64;`

是十进制值为 64 的字符的 HTML 编码，即`@`字符。

（请注意，如果您在没有反引号的情况下将该序列输入到您的问题中，它会被转换为 @）

您可以使用 unicode 表找出实际字符的含义。以下一个很方便，因为它还提供十进制值：

[http://www.ssec.wisc.edu/~tomw/java/unicode.html](http://www.ssec.wisc.edu/~tomw/java/unicode.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T08:13:30.630

`&#64;`是 HTML 编码吗？`@`它也被称为`HTML Entities`.

在 C# 中，您可以使用[httpUtilities](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)类对值进行解码和编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T08:14:13.843

所以在我编辑之前自动回答了你的问题 - 这是“@”字符的 HTML 编码。

```
var decoded = System.Web.HttpUtility.HtmlDecode("&#64;") 
```

# java - java：这个方法返回什么？

> ID：13657644
> 
> 赞同：1
> 
> 时间：2012-12-01T08:07:29.683
> 
> 标签：java

```
public class A extends B {
    private A(B b) {
        super(b);
    }

    public static A parse(string s) // question 1
    {
        B result = D.parse(s);

        return new A(result); // question 2
    }

} 
```

**问题 1：**我不明白这是什么类型的构造函数（？）。我认为常规构造函数看起来像`public A().`但是这个：

```
public static A parse(string s) 
```

我应该如何解释它？

**问题2：** `new A(result);` 这个“新”在退货时有什么作用？此方法是否返回并调用私有构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T08:09:54.813

问题1：根本不是*构造函数*，它只是一个创建对象的静态方法。

问题2：`new`用于调用类的构造函数。`new A(...)`调用`A`传入参数的构造函数。

因此，您所拥有的`A`是一个无法以正常方式实例化的类（因为构造函数是私有的），但是您*可以*通过调用从中获取实例`A.parse`。`parse`在这种情况下，通常称为“工厂”方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T08:11:31.537

它不是构造函数。这是一种静态方法。并且它的返回类型是A，所以它返回A。

```
return new A(result); 
```

相当于

```
A temp = new A(result);
return temp; 
```

它调用允许创建 A 的新实例的私有构造函数，然后返回这个新实例。

你有一个典型的工厂方法。就像`Integer.valueOf(String)`，例如。

# iphone - 限制应用程序的访问

> ID：13657650
> 
> 赞同：-2
> 
> 时间：2012-12-01T08:08:27.403
> 
> 标签：iphone, ios, iphone-sdk-3.0

我想创建一个在邮件帐户中执行某些任务的应用程序。用户将他的邮件帐户链接到应用程序。问题是：是否可以仅通过手机（应用程序安装和注册的手机）限制特定用户帐户的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:13:30.320

这个问题有点令人困惑。听起来您可能正在寻找钥匙串服务：[https ://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html](https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)

基本上，您的应用程序会将凭据和其他敏感信息存储在钥匙串中。一旦进入那里，该数据就会被加密，并且只能由您的应用程序访问。

# c++ - 首先将字符串移动最低有效位？

> ID：13657665
> 
> 赞同：1
> 
> 时间：2012-12-01T08:11:00.723
> 
> 标签：c++, string, bit-shift

我有一串 0 和 1，我想移动它们的位。例如，如果我的字符串具有以下内容：

00000011

我想把它变成

11000000

我有关于如何从无符号字符执行此操作的想法，但我不完全确定您是否可以对字符串使用位移位操作。可能有人知道如何使用字符串吗？这是无符号字符的代码。

```
unsigned char shift(unsigned char *bits)
{
  unsigned char sum = 0;
  for(int i = 7; i >= 0; i--)
  {
    sum += bits[i];
    sum <<= 1;
  }
  return sum;
} 
```

如果有人可以提供帮助，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:18:04.493

不，您不能对字符串使用位移运算符。

如果我正确理解了您的代码，那么您只是颠倒了位的顺序。如果输入是字符串，则只需反转字符串即可。

对于 C 和 C++ 配方，请参阅[如何在 C 或 C++ 中反转字符串？](https://stackoverflow.com/questions/198199/how-do-you-reverse-a-string-in-place-in-c-or-c)

# python - 无法使用 python django 导入 libgdal

> ID：13657673
> 
> 赞同：0
> 
> 时间：2012-12-01T08:12:33.547
> 
> 标签：python, django, gis, postgis

我收到 Django 的这个错误：

```
>>> import django.contrib.gis.gdal
>>> print django.contrib.gis.gdal.libgdal.gdal_full_version()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: 'module' object has no attribute 'libgdal' 
```

但我有这个：

```
$ locate libgdal

/usr/local/lib/python2.7/site-packages/django/contrib/gis/gdal/libgdal.py
/usr/local/lib/python2.7/site-packages/django/contrib/gis/gdal/libgdal.pyc
/usr/local/lib/python2.7/site-packages/django/contrib/gis/gdal/libgdal.pyo 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T10:30:15.023

在 python 中导入包不一定会自动导入其下的任何子包/模块。当你这样做`import django.contrib.gis.gdal`时，它`__init__.py`会在 gdal 目录中运行；这取决于该文件是否`import libgdal`可以通过`gdal`. 在这种特殊情况下，`gdal`导入（以及其他）`gdal_full_version`从`libgdal`自身开始起作用，但不是`libgdal`作为一个整体，所以你可以这样做：

```
>>> import django.contrib.gis.gdal
>>> print django.contrib.gis.gdal.gdal_full_version()
GDAL 1.6.3, released 2009/11/19 
```

或者要明确说明函数的实际定义位置，您可以执行以下操作：

```
>>> import django.contrib.gis.gdal.libgdal
>>> print django.contrib.gis.gdal.libgdal.gdal_full_version()
GDAL 1.6.3, released 2009/11/19 
```

# android - 在服务中使用哪个上下文？

> ID：13657676
> 
> 赞同：5
> 
> 时间：2012-12-01T08:12:50.817
> 
> 标签：android

我想在其他需要 Context 作为输入参数的类中调用方法，但我在服务中有 3 种可能性：

```
- getApplicationContext
- getBaseContext
- getApplication 
```

哪个用在`ScreenService`哪个`extends Service`

主要有什么不同。我前段时间读到使用getApplicationContext不好。真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T08:26:54.863

**应用程序上下文**附加到应用程序的生命周期，并且在应用程序的整个生命周期中始终相同。因此，如果您使用 Toast，则可以使用应用程序上下文甚至活动上下文（两者），因为可以从应用程序中的任何位置引发 Toast，并且不附加到窗口。

**Activity 上下文**附加到 Activity 的生命周期，如果 Activity 的 onDestroy 被引发，则可以将其销毁。

`getApplication()`虽然它引用了 Application 对象，但 Application 类扩展了 Context 类，因此它可以用来提供应用程序上下文。

`getApplicationContext()`提供应用程序上下文。

`getBaseContext()`提供活动上下文。

这取决于你为什么要使用上下文，

`getApplicationContext()`是最优选的方式，因为这个上下文一直存在到应用程序关闭。

`getBaseContext()`上下文可用于小部件和视图。

因此，在 toast 消息中或创建意图时，它们都具有相同的效果，即使使用`getApplicationContext()`是最正确的。Toast 接受任何类型的上下文，因为它没有附加任何类型的视图。它是一个通知。

# c++ - c ++映射不返回值

> ID：13657677
> 
> 赞同：-1
> 
> 时间：2012-12-01T08:13:19.543
> 
> 标签：c++, stl, map

为什么我的测试里面的地图没有返回它的值？这有什么问题？

```
class Test{ //Test.h
public:
  std::map< char*,  int> mm;

  Test();
  void set();
  int get( char*);
};

Test::Test(){ //Test.cpp
}

void Test::set(){
  mm["aaa"] = 24;
}

int Test::get( char* n){
  return mm[n];
}

int main(){ //main.cpp
   Test *test = new Test();
   test->set();

   //this returns 0 instead of 24
   printf("From Test: %d\n", test->get("aaa"));
   printf("From Test: %d\n", test->mm["aaa"]);

   delete test;

   //this map works
   std::map<char*, int> mm;
   mm["a"] = 54;

   printf("Local: %d\n", mm["a"]);

   return 0;
} 
```

需要额外的文字才能发布>.<

哎呀！您的问题无法提交，因为：

您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T08:17:27.020

它失败了，因为您使用 char* 指针作为键。对于两个文字地址将是不同的。要使地图正常工作，您必须使用其他一些已定义 operator< 的字符串类。例如，std::string。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T08:38:33.537

这个类型：

```
std::map< char*,  int>; 
```

说 key 是一个指针，它不是一个字符串。这意味着它是一个指针。为了更好地理解它，请考虑以下内容：

```
char* p1, *p2;
p1 = "abc";
p2=  "abc";

if (p1==p2) // THIS IS INVALID 
```

为什么最后一行无效？好吧，两者都是指针，并且指向某个内存位置，对吧？假设编译器不优化字符串常量，因此 和 的地址`"abc"` *会* `"abc"`不同。因此比较会失败。

你会说，你会使用`strcmp`, 代替。确切地！这就是重点，`map::find`不知道是否使用字符串比较例程！它只是比较两个指针，你会得到无效的结果。因此，最好使用字符串类 ( `std::string`)，或者将比较器传递给`map`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T09:50:44.520

//这将返回 0 而不是 24

printf("来自测试：%d\n", test->get("aaa"));

因为“aaa”的内存地址和你存储的map不同，

mm["aaa"] = 24 和 get("aaa") 不是同一个指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T16:01:07.843

不要使用指针值作为映射/哈希的键。密钥类型，也许你可以使用 std::string。

```
map<string, int> mm; // this would work. 
```

PS：

```
p1 = "abc";
p2=  "abc"; 
```

我认为，p1是否等于p2，很难说，这取决于编译器的实现。

# java - 执行 JAR 文件时出现 UnsatisfiedLinkError

> ID：13657681
> 
> 赞同：1
> 
> 时间：2012-12-01T08:13:49.880
> 
> 标签：java, eclipse

我一直在开发一些可以从 Eclipse 执行而没有任何问题的应用程序，一切都很好。但是当我创建一个可运行的 JAR 文件并执行它时，我收到以下消息：

```
Catched MalformedURLException: Could not open InputStream for URL 'rsrc:gluegen-
rt_3-natives-windows-i586.jar', while TempJarCache.bootstrapNativeLib() of jar:r
src:gluegen-rt_3-natives-windows-i586.jar!/ (rsrc: + gluegen-rt_3-natives-window
s-i586.jar)
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: no gluege
n-rt in java.library.path
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.loadLibrary0(Unknown Source)
        at java.lang.System.loadLibrary(Unknown Source)
        at com.jogamp.common.jvm.JNILibLoaderBase.loadLibraryInternal(JNILibLoad
erBase.java:454)
        at com.jogamp.common.jvm.JNILibLoaderBase.access$000(JNILibLoaderBase.ja
va:59)
        at com.jogamp.common.jvm.JNILibLoaderBase$DefaultAction.loadLibrary(JNIL
ibLoaderBase.java:90)
        at com.jogamp.common.jvm.JNILibLoaderBase.loadLibrary(JNILibLoaderBase.j
ava:328)
        at com.jogamp.common.os.DynamicLibraryBundle$GlueJNILibLoader.loadLibrar
y(DynamicLibraryBundle.java:390)
        at com.jogamp.common.os.Platform$2.run(Platform.java:249)
        at java.security.AccessController.doPrivileged(Native Method)
        at com.jogamp.common.os.Platform.loadGlueGenRTImpl(Platform.java:231)
        at com.jogamp.common.os.Platform.<clinit>(Platform.java:183)
        at javax.media.opengl.GLProfile.<clinit>(GLProfile.java:99)
        at org.jzy3d.global.Settings.<init>(Settings.java:12)
        at org.jzy3d.global.Settings.getInstance(Settings.java:21)
        at com.nda.fuzzy.views.SurfaceViewerFrame.<init>(SurfaceViewerFrame.java
:102)
        at com.nda.fuzzy.views.MainFrame$26.actionPerformed(MainFrame.java:579)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.AbstractButton.doClick(Unknown Source)
        at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source)
        at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(Unknown
Source)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$200(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)

C:\>java -jar destination.jar
╠рьфрэш
Catched MalformedURLException: Could not open InputStream for URL 'rsrc:gluegen-
rt_3-natives-windows-i586.jar', while TempJarCache.bootstrapNativeLib() of jar:r
src:gluegen-rt_3-natives-windows-i586.jar!/ (rsrc: + gluegen-rt_3-natives-window
s-i586.jar)
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: no gluege
n-rt in java.library.path
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.loadLibrary0(Unknown Source)
        at java.lang.System.loadLibrary(Unknown Source)
        at com.jogamp.common.jvm.JNILibLoaderBase.loadLibraryInternal(JNILibLoad
erBase.java:454)
        at com.jogamp.common.jvm.JNILibLoaderBase.access$000(JNILibLoaderBase.ja
va:59)
        at com.jogamp.common.jvm.JNILibLoaderBase$DefaultAction.loadLibrary(JNIL
ibLoaderBase.java:90)
        at com.jogamp.common.jvm.JNILibLoaderBase.loadLibrary(JNILibLoaderBase.j
ava:328)
        at com.jogamp.common.os.DynamicLibraryBundle$GlueJNILibLoader.loadLibrar
y(DynamicLibraryBundle.java:390)
        at com.jogamp.common.os.Platform$2.run(Platform.java:249)
        at java.security.AccessController.doPrivileged(Native Method)
        at com.jogamp.common.os.Platform.loadGlueGenRTImpl(Platform.java:231)
        at com.jogamp.common.os.Platform.<clinit>(Platform.java:183)
        at javax.media.opengl.GLProfile.<clinit>(GLProfile.java:99)
        at org.jzy3d.global.Settings.<init>(Settings.java:12)
        at org.jzy3d.global.Settings.getInstance(Settings.java:21)
        at com.nda.fuzzy.views.SurfaceViewerFrame.<init>(SurfaceViewerFrame.java
:102)
        at com.nda.fuzzy.views.MainFrame$26.actionPerformed(MainFrame.java:579)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.AbstractButton.doClick(Unknown Source)
        at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source)
        at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(Unknown
Source)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$200(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

但是，当我使用 WinRAR 将完成的 jar 文件解压缩到文件夹中时，我看到gluegen-rt.jar 在文件夹中并且有我的清单：

```
Manifest-Version: 1.0
Rsrc-Class-Path: ./ org.hamcrest.core_1.1.0.v20090501071000.jar JTatto
 o.jar jogl-all-natives-windows-amd64.jar gluegen-rt-natives-linux-arm
 v7hf.jar gluegen-rt_3.jar jogl-all-natives-linux-armv7hf_2.jar jgoodi
 es-forms-1.6.0.jar jogl-all-natives-windows-i586.jar jogl-all-natives
 -solaris-i586.jar gluegen-rt-natives-linux-armv7.jar org.jzy3d-0.9_2.
 jar swt.jar gluegen-rt-natives-macosx-universal_2.jar gluegen_2.jar j
 ogl-all-natives-linux-armv7_2.jar gluegen-rt-natives-windows-amd64_3.
 jar jogl-all-natives-windows-i586_3.jar gluegen-rt-natives-linux-amd6
 4_3.jar jogl-all-natives-solaris-amd64_2.jar swt-debug.jar swt_2.jar 
 applet-launcher_3.jar gluegen-rt-natives-solaris-amd64_3.jar jgoodies
 -looks-2.5.2.jar org.jzyio-0.1.jar jogl-all-natives-linux-armv7hf.jar
  gluegen-rt-natives-solaris-i586_2.jar gluegen-rt-natives-linux-armv7
 _2.jar swt_3.jar jogl-all-natives-linux-i586.jar gluegen-rt-natives-l
 inux-i586_3.jar jogl-all-natives-linux-armv7_3.jar gluegen-rt-natives
 -solaris-amd64.jar jogl-all-natives-macosx-universal_2.jar jogl-all-n
 atives-windows-amd64_3.jar applet-launcher.jar jogl-all-natives-windo
 ws-amd64_2.jar junit.jar org.convexhull.jar jogl-all-natives-linux-am
 d64_3.jar log4j-1.2.16.jar jogl-all-natives-macosx-universal.jar glue
 gen-rt-natives-macosx-universal_3.jar jogl-all-natives-linux-amd64.ja
 r jogl-all-natives-solaris-i586_3.jar gluegen-rt-natives-solaris-amd6
 4_2.jar opencsv-2.1_3.jar jogl-all-natives-solaris-amd64.jar gluegen-
 rt-natives-windows-i586.jar gluegen-rt-natives-solaris-i586.jar jogl-
 all_2.jar jogl-all-natives-linux-armv7.jar gluegen-rt-natives-linux-a
 rmv7hf_2.jar jogl-all-natives-windows-i586_2.jar gluegen-rt-natives-l
 inux-i586.jar gluegen-rt-natives-linux-i586_2.jar gluegen-rt-natives-
 windows-amd64.jar gluegen-rt-natives-windows-i586_2.jar applet-launch
 er_2.jar swt-debug_2.jar opencsv-2.1_2.jar commons-math-2.2.jar jogl-
 all-natives-solaris-i586_2.jar gluegen-rt-natives-linux-armv7_3.jar j
 ogl-all-natives-linux-i586_2.jar gluegen.jar jogl-all-natives-linux-i
 586_3.jar gluegen-rt-natives-windows-amd64_2.jar gluegen-rt-natives-l
 inux-amd64.jar opencsv-2.1.jar gluegen_3.jar gluegen-rt-natives-linux
 -armv7hf_3.jar jogl-all-natives-linux-amd64_2.jar jgoodies-common-1.4
 .0.jar jogl-all-natives-solaris-amd64_3.jar org.convexhull_3.jar glue
 gen-rt_2.jar org.convexhull_2.jar gluegen-rt-natives-solaris-i586_3.j
 ar gluegen-rt.jar jogl-all_3.jar jogl-all-natives-macosx-universal_3.
 jar gluegen-rt-natives-macosx-universal.jar gluegen-rt-natives-linux-
 amd64_2.jar org.jzy3d-0.9.jar jogl-all-natives-linux-armv7hf_3.jar jo
 gl-all.jar gluegen-rt-natives-windows-i586_3.jar
Class-Path: .
Rsrc-Main-Class: com.nda.fuzzy.Main
Main-Class: org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader 
```

错误在哪里？请不要给我任何教程链接，只是帮助我理解问题！

# java - 按钮不保存状态 onResume

> ID：13657686
> 
> 赞同：1
> 
> 时间：2012-12-01T08:14:46.177
> 
> 标签：java, android, eclipse, android-activity, onresume

我刚刚开始Android开发。我有一个非常简单的项目。我有一个按钮和一个文本视图。当我单击按钮时，textView 的文本会更改并且按钮被禁用。这部分工作正常。但是，如果我在手机上按主页（键盘上的 Escape）并返回我的应用程序，我希望按钮保持其状态（禁用状态）。但就我而言，每次我按下 home 键并返回我的应用程序时，都会启用 Button。这是代码

```
package com.mypack.textmanipulation;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.*;

public class MainActivity extends Activity {

    private Button btnChangeText;
    private boolean check;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btnChangeText = (Button)findViewById(R.id.btnChangeText);
        check = true;

        setButtonOnClickInterface();

    }

    @Override
    protected void onResume()
    {
        super.onResume();
        checkButtonIsEnabled();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void setButtonOnClickInterface()
    {

        btnChangeText.setOnClickListener(new View.OnClickListener() 
        {

            @Override
            public void onClick(View v) 
            {

                    // TODO Auto-generated method stub
                    TextView txtView = (TextView)findViewById(R.id.textView1);
                    txtView.setText("Text Changed");
                    btnChangeText.setEnabled(false);
                    check = false;
            }
        });

    }

    private void checkButtonIsEnabled()
    {
        if (check)
        {
            btnChangeText.setEnabled(true);

        }
        else
        {
            btnChangeText.setEnabled(false);
        }
    }

} 
```

欢迎提出建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:52:50.483

在您的项目中使用共享首选项来存储值[检查这个](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:13:22.423

好吧，刚刚找到了解决方案。我正在退出应用程序而不是暂停它。实际上我是按键盘上的 ESC 按钮返回主屏幕，这实际上相当于 Android 中的 BACK 按钮，在我的情况下，我想，应用程序正在退出，所以每次我再次点击应用程序图标时，onCreate事件被调用而不是 onResume。

键盘上的 BTW HOME 按钮充当 Android HOME 按钮。

# javascript - 拖动行为在 D3 中返回 NaN

> ID：13657687
> 
> 赞同：3
> 
> 时间：2012-12-01T08:14:51.423
> 
> 标签：javascript, svg, d3.js

我有这个代码：

```
 var stage = d3.select("body").append("svg");
  var points = [0, 50, 100, 150];
  var letters = "drag".split(",");
  var log = d3.select("#log");

  //drag behaviour, will bind later
    var drag = d3.behavior.drag()
      .origin(Object)
      .on("drag", dragmove);

  //append texts
    var texts = stage
        .selectAll("text")
        .data(letters)
        .enter()
            .append("text")
            .attr("font-family", "Arial")
            .attr("class", "word")
            .attr("x", function(d,i){return points[i]})
            .attr("y", 100)
            .text(function(d){return d})
            .call(drag);

    function dragmove() {
        log.text(
            "x: " + d3.event.x + ", " +
            "y: " + d3.event.y + ", " +
            "dx: " + d3.event.dx + ", " +
            "dy: " + d3.event.dy
            );
        d3.select(this).attr("x", d3.event.x);
    }​ 
```

但是，`d3.event.x`并且`d3.event.y`正在返回`NaN`。有趣的是，`d3.event.dx`并且`d3.event.dy`正在返回正确的值。我的代码有什么问题？

你可以在这里看到一个 jsfiddle：http: [//jsfiddle.net/UMwmr/](http://jsfiddle.net/UMwmr/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T10:59:12.657

这是因为`d3.event`中继到数据，如果您签入以下代码：

```
.attr("x", function(d,i){console.log(d);return points[i]}) 
```

你会发现 d 是文本，它不能有 x,y 属性。

解决方案是将每个字母作为对象（您还用“，”将它们分开，但我认为它应该是“”）所以这里的代码：

```
var stage = d3.select("body").append("svg");
var points = [0, 50, 100, 150];
var letters = "drag".split("").map(function(d, i) {
    return {
        text: d,
        x: points[i],
        y: 100
    }
});
var log = d3.select("#log");

//drag behaviour, will bind later
var drag = d3.behavior
    .drag()
    .origin(Object)
    .on("drag", dragmove);

//append texts
var texts = stage
    .selectAll("text")
    .data(letters)
    .enter()
       .append("text")
       .attr("font-family", "Arial")
       .attr("class", "word")
       .attr("x", function(d, i) {
            return d.x;
       })
       .attr("y", 100)
       .text(function(d) {
            return d.text;
           })
       .call(drag);

function dragmove(d) {
    log.text(
        "x: " + d3.event.x + ", " + 
        "y: " + d3.event.y + ", " + 
        "dx: " + d3.event.dx + ", " + 
        "dy: " + d3.event.dy);
    //set new position to the object
    d.x=d3.event.x;
    d3.select(this).attr("x", d3.event.x);
}​ 
```

和[小提琴](http://jsfiddle.net/oceog/UMwmr/3/)

# jquery - 从灯箱调用时，Magento 中的联系我们表格不起作用

> ID：13657689
> 
> 赞同：0
> 
> 时间：2012-12-01T08:15:21.713
> 
> 标签：jquery, lightbox, form-submit, magento-1.7, contact-form

我在 cms 页面中调用了联系表单，然后调用该 CMS 页面以显示联系我们页面。现在我需要在我的页面顶部显示一个链接，以便快速联系，这将在灯箱中打开页面。我已添加代码以在 breadcrumbs.phtml 文件中显示此链接。表单加载正常，但未提交。当我单击按钮时，没有任何反应。这是我用来在 div 标签中显示联系我们页面的代码。

```
<div id="lightbox-panel">
    <?php echo $this->getLayout()->createBlock('core/template')->setTemplate('contacts/formlite.phtml')->toHtml(); ?>
    <p align="center">
        <a id="close-panel" href="#">Close this window</a>
    </p>
</div><!-- /lightbox-panel --> 
```

这个 div 标签一开始是 display:none。单击联系人链接时，它会显示此 div 并回显来自该 div 的联系人块。谁能告诉我怎样才能使这个表格工作？这是联系表单的 html 和随后的提交按钮：

```
<form action="/contacts/index/post" id="contactForm" method="post">

<div class="buttons-set" style="margin-bottom:1em;">        
    <input type="text" name="hideit" id="hideit" value="" style="display:none !important;" />
    <button type="submit" title="<?php echo Mage::helper('contacts')->__('Submit') ?>" class="button btn-saveadd"><span><span><?php echo Mage::helper('contacts')->__('Submit') ?></span></span></button>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:17:11.427

我在索引控制器中添加了一个新操作，并从那里调用了新的联系表单块。在创建的新操作的布局句柄下的 XML 文件中添加了该新 phtml 文件的块。所以它看起来像这样

```
<contacts_index_quickcontact translate="label">
    <remove name="head" />
    <reference name="root">
        <action method="setTemplate"><template>page/empty.phtml</template></action>
    </reference>
    <reference name="content">          
        <block type="core/template" name="contactForm" template="contacts/formquick.phtml"/>
    </reference>
</contacts_index_quickcontact> 
```

希望它也对其他人有所帮助。

# c# - OpenGL Quad 仅与背景混合

> ID：13657690
> 
> 赞同：2
> 
> 时间：2012-12-01T08:15:24.413
> 
> 标签：c#, opengl, opentk

我已经为游戏设置了一个使用 OpenTK 和 OpenGL 的快速 2D 渲染系统。我已经使用以下方法设置了透明度：

```
GL.Enable(EnableCaps.Blend);
GL.BlendFunc(BlendingFactorSrc.One, BlendingFactorDest.OneMinusSrcAlpha); 
```

但是，每当我去绘制（纹理是一个加载了 System.Drawing 的 png 文件）时，它只会与我在绘制调用开始时清除的颜色混合：

![图像](../Images/564f7d68e2af93976b673133425bda3a.png)

*我刚刚切换到 MonoGame，因为它的 2D 渲染已经过充分测试*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:27:24.487

看起来你没有按正确的顺序绘制。要获得正确的混合，您需要从后到前对多边形进行排序，以便首先绘制“后面”的任何内容。

不过，根据那张图片，您最好只使用 alpha 测试而不是混合。Alpha 测试只是丢弃 alpha 小于阈值的像素。它比混合更便宜，并且您无需对对象进行排序即可使用它。仅当您想使用半透明对象（alpha 介于 0 和 1 之间）时才需要混合。

# actionscript-3 - 图片预加载百分比

> ID：13657691
> 
> 赞同：1
> 
> 时间：2012-12-01T08:15:33.413
> 
> 标签：actionscript-3, flash

我正在制作我的第一个 Flash 照片库，当我单击缩略图时，它应该以全尺寸打开图片并显示带有百分比的预加载器。这一切都在闪存下载模拟器上离线工作，但在线百分比不会显示。它有时会开始显示大约 100% 或根本不显示。画廊链接：[http](http://solarratko.netii.net/) ://solarratko.netii.net/ 下面是我班级的一些代码，用于加载全尺寸图像

```
public function kreni(f:String) //function that start when user click on thumbnail
    {
        URLrequest=new URLRequest(f); //URLrequest for image in full size
        dspLoader.load(URLrequest); //loading the image

        preloader.visible = true;//prelaoder that shows up is visible
        h.visible=true;//text area for percentage is visible
        dspLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, progres);//adding progress event
        dspLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, kraj);//adding complete event

    }
    public function progres(e:Event):void
    {
        var perc:Number = e.target.bytesLoaded / e.target.bytesTotal;//calculatin percentage
        h.text = Math.ceil(perc*100).toString();//displaying percentage wich is not working online or it start too late

    }
    public function kraj(e:Event):void
    {
        h.text="";
        preloader.visible = false;
        h.visible=false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:40:30.720

似乎对我来说工作正常。你有没有清空你的缓存。预加载器是否不显示且不加载图像？

如果您想强制预加载器运行，您可以为加载序列分配一个计时器，以检查加载的内容。加载时启动计时器，并确保百分比等于或大于在计时器回调中进行检查时显示的百分比 - 使用进度回调来加载字节。所以计时器可以是 0.5 秒，如果图像在缓存中，您会在图像加载之前看到一个快速预加载器。

*** 编辑 ***

```
public function kreni(f:String) //function that start when user click on thumbnail {

    preloader.visible = true;//prelaoder that shows up is visible
    h.visible=true;//text area for percentage is visible

    URLrequest=new URLRequest(f); //URLrequest for image in full size
    dspLoader.load(URLrequest); //loading the image

    dspLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, progres);//adding progress event
    dspLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, kraj);//adding complete event

} 
```

# android - 启动意图时未定义Android Intent构造函数

> ID：13657693
> 
> 赞同：2
> 
> 时间：2012-12-01T08:15:54.577
> 
> 标签：android, android-intent

我在创建意图导航到我的 android 应用程序中的不同活动时遇到了一些问题。当我创建意图函数时，它给了我一个错误说

```
The constructor Intent(new View.OnClickListener(){}, Class<MapItmeizedOverlay>) is undefined 
```

这是具有 startActivity 意图的 SelectOptions.java

```
btnLocation.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent2 = new Intent(this, MapItmeizedOverlay.class);
            startActivity(intent2);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T08:16:47.777

请写下面的代码

```
Intent intent2 = new Intent(Current_Activity.this, MapItmeizedOverlay.class);
startActivity(intent2); 
```

代替

```
Intent intent2 = new Intent(this, MapItmeizedOverlay.class);
startActivity(intent2); 
```

对于在任何视图单击上启动新活动，请使用当前活动上下文或应用程序上下文而不是视图上下文，因为 Intent 构造函数将当前上下文或应用程序上下文作为第一个参数

# javascript - JavaScript 数组和范围

> ID：13657694
> 
> 赞同：1
> 
> 时间：2012-12-01T08:15:56.230
> 
> 标签：javascript, arrays, scope

这一定很简单，但我在这方面已经太久了，我在任何地方都找不到相关的答案。

这很简单，真的。

当我的代码是这样的：

```
/* functionsAndStuff.js */
var x = [ [1,2], [3,4] ];
function doStuff(){
    var value = x[0][0];
    return value; //BROKEN
} 
```

什么都没发生。另一方面，这里的代码运行良好：

```
/* functionsAndStuff.js */
function doStuff(){
    var x = [ [1,2], [3,4] ];
    var value = x[0][0];
    return value; //returns 1
} 
```

doStuff() 函数将值返回给不同的页面 index.html。index.html 使用该函数来做自己的事情。

改变它并这样做使它工作：

```
/* index.html */
var x = [ [1,2], [3,4] ];

/* functionsAndStuff.js */
function doStuff(){
    var value = x[0][0];
    return value; //returns 1
} 
```

我想如果我只是在 index.html 中定义矩阵，我的问题就会消失......但这有点草率的解决方案。

我有另一个数组开始为空。然后通过拆分字符串填充该数组。该数组是完全可访问的。但我仍然无法访问 x 数组，它是手动填写的（即硬编码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:21:34.837

您列出的第一个功能可以正常工作，至少在 FF16 中是这样。

```
var x = [ [1,2], [3,4] ];
function doStuff(){
    var value = x[0][0];
    return value; //BROKEN
}

alert(doStuff()); //returns 1 
```

示例：http: [//jsfiddle.net/UD8Zs/](http://jsfiddle.net/UD8Zs/)

# ios - 在 MonoTouch 中解决核心蓝牙中的“CBConcreteCentralManager 未通电”

> ID：13657695
> 
> 赞同：1
> 
> 时间：2012-12-01T08:15:58.670
> 
> 标签：ios, xamarin.ios, bluetooth, core-bluetooth

目前正在尝试使蓝牙样本正常工作。

我使用这个示例作为参考 - [http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Listings/HeartRateMonitor_HeartRateMonitorAppDelegate_m.html#//apple_ref/doc/uid/DTS40011322-HeartRateMonitor_HeartRateMonitorAppDelegate_m-DontLinkElementID_4](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Listings/HeartRateMonitor_HeartRateMonitorAppDelegate_m.html#//apple_ref/doc/uid/DTS40011322-HeartRateMonitor_HeartRateMonitorAppDelegate_m-DontLinkElementID_4)

我的设备上启用了蓝牙。

我试过使用如下代码：

```
_manager = new CBCentralManager ();
_manager.DiscoveredPeripheral += HandleDiscoveredPeripheral;
_manager.ConnectedPeripheral += HandleConnectedPeripheral;
_manager.DisconnectedPeripheral += HandleDisconnectedPeripheral; 
```

我已经尝试编写自己的委托继承自 CBCentralManagerDelegate

但是当我调用 StartScan

```
 void StartScan ()
    {
        var spp = Guid.Parse("00001101-0000-1000-8000-00805f9b34fb");
        _manager.ScanForPeripherals(new [] { spp }, null);
    } 
```

然后我看到一个错误：

```
bluetooth1[1210:907] CoreBluetooth[WARNING] <CBConcreteCentralManager: 0x9beea0> is not powered on 
```

环顾四周寻找这个错误，我发现只有几个命中：

*   [是什么导致 iOS 中的 CBCentralManagerStateUnknown？](https://stackoverflow.com/questions/12518562/what-causes-cbcentralmanagerstateunknown-in-ios)
*   [http://www.zitao.org/wiki/development-log/le-zeng/2012-Nov-week1-devnote.html](http://www.zitao.org/wiki/development-log/le-zeng/2012-Nov-week1-devnote.html)

但这些都不是特别有用......

我尝试延迟开始直到状态改变：

```
 void HandleUpdatedState (object sender, EventArgs e)
    {
        // more to do here....
        Console.WriteLine("State updated " + e.ToString());

        switch (_manager.State) {
        case CBCentralManagerState.PoweredOn:
            _manager.DiscoveredPeripheral += HandleDiscoveredPeripheral;
            _manager.ConnectedPeripheral += HandleConnectedPeripheral;
            _manager.DisconnectedPeripheral += HandleDisconnectedPeripheral;
            StartScan();
            break;          
        case CBCentralManagerState.Unauthorized:
            break;          
        }
    } 
```

*   但这似乎从未被调用过。

我也尝试过运行 xcode 示例，但我今天不在力...

任何人都知道 CBConcreteCentralManager: 0x9beea0 is not power on 意味着什么以及如何在这里解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:13:56.487

答：为了在 MonoTouch 中解决这个问题，我必须使用不同的构造函数：

```
CBCentralManager(_delegate, MonoTouch.CoreFoundation.DispatchQueue.CurrentQueue) 
```

当我切换到它时，它开始工作......

# java - 将来自不同社交网络的朋友列表组合成一个列表的好算法？

> ID：13657696
> 
> 赞同：0
> 
> 时间：2012-12-01T08:16:04.507
> 
> 标签：java, algorithm, search, probability, fuzzy-search

在我的应用程序中，我有一个功能，用户可以连接到不同的社交网络以获取朋友列表。例如，您可以从linkedIn 和Facebook 获得您的朋友。

我想展示一个朋友列表，它是将来自不同社交网络的各种列表组合在一起的结果。问题是如何确定不同列表中的名字是否可能是同一个人？例如，Facebook 可能会说“Jim Smith”，Linked In 可能会说“Jim Smith, Phd”，我希望我的应用检测到他们是同一个人。

我已经查看了字符串的 Levenshtein 距离函数，但在考虑两个名称可能相同且置信度为 75% 之前，我不确定要设置什么阈值。

这是我正在考虑做的事情：

*   以小写形式进行所有比较
*   在计算 levenshtein 距离之前从被比较的两个名称中删除所有空格
*   将 levenshtien 距离转换为较短名称长度的百分比
*   如果百分比为 0，则完美匹配
*   如果百分比 < x 他们可能是相同的

我计划使用 apache commons StringUtils.getLevenshteinDistance() 进行 Leventstien 计算。

x 的好值是多少？10%、20%、30%……等等？这是一个很好的算法吗？我的数学技能很生疏，我不确定这是否可行。

有更好的方法吗？是否有一个标准库可以用于这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:22:42.330

我会选择一个自动算法来决定阈值：

1.  **创建（手动）一组示例**- 有些是等效的，有些不是。
2.  **使用各种阈值**运行您的算法。****
***   **选择最大化您的结果的阈值**。我会使用[F-Measure](http://en.wikipedia.org/wiki/Precision_and_recall#F-measure)，它考虑了[*精度*](http://en.wikipedia.org/wiki/Precision_and_recall#Precision)（你所说的“等效”确实是多少）和[*召回率*](http://en.wikipedia.org/wiki/Precision_and_recall#Recall)（有多少正确的被标记为这样）。*   **使用[统计工具](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)**来确定不同阈值之间是否存在统计显着性（这将帮助您了解是否需要更多示例或您的集合就可以了）。[在大多数情况下， Wilcoxon 测试](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)是它的事实标准。**

 *** * *

您可能要考虑的另一种选择是**[机器学习](http://en.wikipedia.org/wiki/Machine_learning)**[分类算法](http://en.wikipedia.org/wiki/Statistical_classification)领域。在这里，您想进行分类`(user1,user2)`，答案是`true`user1 是否与 user2 相同。
您可以使用相同的工具（统计测试和使用[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)）来估计这种方法的准确性。

（免责声明：虽然我认为自己是经验丰富的 ML 开发人员，但我从未尝试过用这种方法做这样的事情）。**

# python - 简单的赋值运算符在 Python 中变得复杂

> ID：13657704
> 
> 赞同：3
> 
> 时间：2012-12-01T08:16:58.707
> 
> 标签：python, operators, variable-assignment

我在 python 中声明了四个变量 [a=1,b=2,c=3,d=0] 并使用 ',' 和 '=' （简单赋值运算符）在一行代码中交换它们。

我有多个答案并且感到困惑。请帮我...

**情况1：**

```
a=1
b=2
c=3
d=0
a=a,b=b,c
print "a = " + str(a)
print "b = " + str(b)
print "c = " + str(c)
print "d = " + str(d) 
```

**案例 1 的输出：**

```
a = 2
b = 3
c = 3
d = 0 
```

**案例二：**

```
a=1
b=2
c=3
d=0
b=a,b=b,c
print "a = " + str(a)
print "b = " + str(b)
print "c = " + str(c)
print "d = " + str(d) 
```

**案例 2 的输出：**

```
a = 2
b = 3
c = 3
d = 0 
```

**案例3：**

```
a=1
b=2
c=3
d=0
c=a,b=b,c
print "a = " + str(a)
print "b = " + str(b)
print "c = " + str(c)
print "d = " + str(d) 
```

**案例 3 的输出：**

```
a = 2
b = 3
c = (2,3)
d = 0 
```

**案例4：**

```
a=1
b=2
c=3
d=0
d=a,b=b,c
print "a = " + str(a)
print "b = " + str(b)
print "c = " + str(c)
print "d = " + str(d) 
```

**案例 4 的输出：**

```
a = 2
b = 3
c = 3
d = (2,3) 
```

**困惑是：**

在 3 号和 4 号案例中，输出是正确的（如我所料）。但在 1 号和 2 号的情况下，a 的值为 2，b 的值为 3。我希望该值应该是 (2,3)。那么我的代码有什么问题？

*[我的 Python 版本是 2.7]*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T08:20:05.837

tl; dr：多个赋值（`=`一行上的多个语句）从左到右计算，而不是从右到左（在计算右侧表达式之后）。

使事情复杂化的是，您正在混合使用元组分配和“正常”分配。

元组赋值使用一个赋值运算符，因此要交换两个变量，请使用：

```
a, b = b, a 
```

右侧*必须*评估为与左侧有变量相同数量的元素的元组。你这样做，那很好。

现在，在您的示例中，您不仅在解包元组。当左侧只包含*一个*变量时，元组不会被解包，只是简单地赋值：

```
a, b = 1, 2
a = b, a 
```

变成`(2, 1)`.

当您在同一行上使用*多个作业时，乐趣就开始了。*这些是从左到右处理的。

因此，以下简单示例：

```
a = b = c = 1 
```

表示`a`变成`1`, then `b`, then `c`。

现在我们可以理解每种情况：

1.  `a=a,b=b,c`, 其中`a = 1`, `b = 2`, `c = 3`.

    这变成：评估`b, c`-> `(2, 3)`，然后将其分配给`a`-> `a = (2, 3)`。然后将其分配给`a, b`, 所以`a = 2`, `b = 3`。结果：`a = 2`, `b = 3`, `c = 3`.

2.  `b=a,b=b,c`, 其中`a = 1`, `b = 2`, `c = 3`.

    与之前的情况相同，但现在`b = (2, 3)`先设置，然后`b = 3`再设置，结果与情况 1 相同。

3.  `c=a,b=b,c`, 其中`a = 1`, `b = 2`, `c = 3`.

    右侧输入与案例 1\. 和 2\. 相同，但现在我们先设置`c = (2, 3)`. 最终结果符合预期，`a = 2`, `b = 3`, `c = (2, 3)`.

4.  `d=a,b=b,c`, 其中`a = 1`, `b = 2`, `c = 3`.

    与案例 3 相同。但现在我们`d`改为设置。没有惊喜。

在这里让您感到困惑的是，在评估右侧之后，分配是从左到右处理的，*而不是*从右到左处理的。

对于这样的情况，实际上最容易运行代码（包装在函数中），通过[`dis.dis()`函数](http://docs.python.org/2/library/dis.html#dis.dis)来​​反汇编 python 字节码：

```
>>> import dis
>>> def f(): a=a,b=b,c
... 
>>> dis.dis(f)
  1           0 LOAD_FAST                0 (b)
              3 LOAD_GLOBAL              0 (c)
              6 BUILD_TUPLE              2
              9 DUP_TOP             
             10 STORE_FAST               1 (a)
             13 UNPACK_SEQUENCE          2
             16 STORE_FAST               1 (a)
             19 STORE_FAST               0 (b)
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

这是第一种情况；注意在`BUILD_TUPLE`和`DUP_TOP`操作码之后（后者在堆栈上创建一个额外的副本以提供额外的分配），发生的第一件事是对 的`STORE_FAST`操作*`a`*，然后是一个`UNPACK_SEQUENCE`（元组分配操作码），然后将结果存储到`a`和`b`。

# php - 在 Wordpress 中按标签显示帖子

> ID：13657705
> 
> 赞同：0
> 
> 时间：2012-12-01T08:16:59.020
> 
> 标签：php, wordpress

我在 Wordpress 中有这个插件，我已经对其进行了大量修改。该插件的目的最初是显示您告诉它的任何类别的缩略图。截至目前，我已经完成的远不止这些。但无论如何，这是插件的简码..

```
[categorythumbnaillist 7] 
```

7 当然是类别 ID。该插件获取任何类别的帖子并使用以下代码对它们进行排序：

```
$myposts = get_posts( 'numberposts=-1&&category='.$listCatId[1].'&&orderby=
'.$categoryThumbnailList_OrderType.'&&order='.$categoryThumbnailList_Order ); 
```

现在，我希望插件仅在其中包含“新闻”标签时才显示帖子。所以我做了以下事情：

```
$args=array(
          'tag' => 'news',
          'showposts'=>5,
        );
$myposts = get_posts( $args ); 
```

如果其中有“新闻”标签，这将成功显示 5 个帖子。**但问题来了**……

我将在一页上多次使用这个插件。因此，当我使用上面列出的带有不同类别 ID 的简码时，插件不起作用，因为我没有将简码类别 ID 与 $myposts 代码链接。:(

我将在我的新闻类别、照片类别和音频类别中使用该插件。我希望它通过简码显示每个类别的缩略图（就像插件打算做的那样），但也只显示带有“新闻”标签的新闻帖子......仅用于新闻类别。我将如何组合我的两个代码以使其正常运行并仅显示带有“新闻”标签的新闻帖子，同时仍然正确显示其他类别的帖子......所有这些都通过插件应该做的短代码？所以例如......我会......

```
[categorythumbnaillist 3] (news category)
[categorythumbnaillist 5] (photos category)
[categorythumbnaillist 7] (audio category) 
```

我希望新闻只显示带有“新闻”标签的新闻帖子，照片显示照片类别帖子，音频显示音频类别帖子。再一次，我已经想出了如何做一个或另一个，我只是不知道如何让代码同时做这两个。

任何帮助将不胜感激！！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:23:41.250

请使用以下代码或插件

```
<?php
 $postslist = get_posts('numberposts=5&orderby=date&tag=heresthetag');
 foreach ($postslist as $post) :
    setup_postdata($post);
 ?>

 <?php $the_image = get_image(); ?>
    <div class="newspage" <?php if($the_image != "") { ?> style="min-height:5.00em;" <?php } ?>>
<?php if($the_image != "") {?>
        <div class="newspage-img"><a href="<?php the_permalink() ?>"><?php echo $the_image; ?></a>
        </div>
            <div class="newspage-content"><?php }  else {?><div class="newspage-content" style="padding-left:0;"><?php }?>
            <h3 id="post-<?php the_ID(); ?>"><a href="<?php the_permalink() ?>" rel="bookmark" title="Continue reading <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h3>
                <div class="entry">
                <?php the_excerpt() ?>
                <p><span class="read_more"><a href="<?php the_permalink(); ?>">Read more...</a></span> <span class="feedback"><?php comments_popup_link('0 Comments', '1 Comment', '% Comments'); ?></span></p>
                </div>
            </div>
    </div>
 <?php endforeach; ?> 
```

插件 - [http://wordpress.org/extend/plugins/posts-by-tag/](http://wordpress.org/extend/plugins/posts-by-tag/)

# python - before_request 我应该把我的蓝图放在哪里

> ID：13657711
> 
> 赞同：15
> 
> 时间：2012-12-01T08:18:08.323
> 
> 标签：python, flask

所以我有我的用户模块的请求前路由。但现在我也想从其他蓝图访问 g.users。我发现唯一的方法是将下面的代码复制到每个蓝图。

我尝试将它放在我的 app.py 中用于@app.before_request，但是由于您必须导入会话、g、用户，所以您遇到错误，然后您仍然会在其他地方收到 _requestglobal 错误。

```
@app.before_request
def before_request():
  g.user = None
  if 'user_id' in session:
    g.user = User.query.get(session['user_id']); 
```

最好的放置位置是什么？

我得到了很多：

```
AttributeError: '_RequestGlobals' object has no attribute 'user' 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-20T14:18:59.900

`Blueprint.before_request`在蓝图中的每个请求之前调用。如果您想在所有蓝图之前调用它，请使用[before_app_request](http://flask.pocoo.org/docs/api/#flask.Blueprint.before_app_request)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-27T12:20:48.617

这里有点晚了，但是：
这就是我所做
**的：使用蓝图变量来设置之前的请求**

```
myblueprint = Blueprint('myblueprint', __name__, template_folder="templates")

def before_myblueprint():
    #code here

myblueprint.before_request(before_myblueprint) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-13T23:57:27.000

我什至在这里，但随着约翰斯顿的回答增加，您也可以使用相同的`before_request`装饰器，例如：

```
bp_v1 = Blueprint('api_v1', __name__)

@bp_v1.before_request
def before_anything():
    pass 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-01T09:34:28.600

我认为您通过尝试在中启动用户做得很好`before_request`，问题是`g`对象在请求之前没有任何内容，因此您需要以不同的方式处理它。很可能从 cookie 中获取用户`before_request`，然后将其添加到会话中，从那里可能会添加到`g`. 我认为值得一看或使用 Flask-login。或者只是[阅读它的代码](https://github.com/maxcountryman/flask-login/blob/master/flask_login.py)，也许它会给你一些想法。

# java - 成功清理和构建后 JavaCV 无法运行

> ID：13657712
> 
> 赞同：4
> 
> 时间：2012-12-01T08:18:09.737
> 
> 标签：java, opencv, netbeans, executable-jar, javacv

我在 java 中完成了一个项目，即使用 javaCV 库的运动检测软件。当我从 netbeans 调试代码时，它可以正常工作。它检测运动并发出警报，发送邮件等。但是当我清理和构建代码时，获得的 .jar 文件没有加载网络摄像头。当我打开那个 .jar 文件时，它显示一个空白画布。我可以提供的另一个信息是，当我清理和构建时，o/p 会显示一些警告，例如不推荐使用的 API。

* * *

```
init:
deps-clean:
Created dir: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build
Updating property file: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build\built-clean.properties
Deleting directory C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build
clean:
init:
deps-jar:
Created dir: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build
Updating property file: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build\built-jar.properties
Created dir: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build\classes
Created dir: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build\empty
Created dir: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build\generated-sources\ap-source-output
Compiling 35 source files to C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build\classes
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:7: warning: String is internal proprietary API and may be removed in a future release
import com.sun.org.apache.xpath.internal.operations.String;
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:17: warning: AudioPlayer is internal proprietary API and may be removed in a future release
import sun.audio.AudioPlayer;
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:18: warning: AudioStream is internal proprietary API and may be removed in a future release
import sun.audio.AudioStream;
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\operation.java:12: warning: AudioStream is internal proprietary API and may be removed in a future release
import sun.audio.AudioStream;
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:32: warning: String is internal proprietary API and may be removed in a future release
    String t;
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:36: warning: String is internal proprietary API and may be removed in a future release
    static String user;
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:287: warning: AudioStream is internal proprietary API and may be removed in a future release
            AudioStream as = null;
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:300: warning: AudioStream is internal proprietary API and may be removed in a future release
                as = new AudioStream(in);
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:312: warning: AudioPlayer is internal proprietary API and may be removed in a future release
            AudioPlayer.player.start(as);
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\NewJFrame1.java:502: warning: String is internal proprietary API and may be removed in a future release
    public static void main(String args[]) {
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\operation.java:44: warning: AudioStream is internal proprietary API and may be removed in a future release
    AudioStream as;
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\operation.java:109: warning: AudioStream is internal proprietary API and may be removed in a future release
        as = new AudioStream(in);
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\operation.java:220: warning: AudioPlayer is internal proprietary API and may be removed in a future release
                        AudioPlayer.player.start(as);
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\operation.java:232: warning: AudioStream is internal proprietary API and may be removed in a future release
                        as = new AudioStream(in);
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\operation.java:281: warning: AudioPlayer is internal proprietary API and may be removed in a future release
            AudioPlayer.player.stop(as);
C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\src\projectlogin\operation.java:286: warning: AudioPlayer is internal proprietary API and may be removed in a future release
        AudioPlayer.player.stop(as);
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
16 warnings
Copying 15 files to C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build\classes
compile:
Created dir: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\dist
Copying 1 file to C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\build
Copy libraries to C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\dist\lib.
Building jar: C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\dist\projectlogin.jar
To run this application from the command line without Ant, try:
java -jar "C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\dist\projectlogin.jar"
jar:
BUILD SUCCESSFUL (total time: 7 seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:01:17.370

输出表明您应该从命令行运行它`java -jar "C:\Users\Anooj\Documents\NetBeansProjects\projectlogin\dist\projectlogin.jar`

如果从 dist 目录运行它，它将包含项目所需的库。我怀疑您正在尝试在没有关联库的情况下运行该项目。

# css - 如何配置 SASS 以输出速记十六进制颜色

> ID：13657714
> 
> 赞同：6
> 
> 时间：2012-12-01T08:18:13.540
> 
> 标签：css, configuration, colors, sass, shorthand

有没有办法让 SASS 或 Compass 给你一个缩短的十六进制颜色？例如，如果`#444`我在我的输出文件中键入它`#444444`，这对我来说并不是真正的优化帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T10:14:44.893

仅当输出样式设置为*压缩*时，才会优化颜色代码。

```
// style.scss
$primary-color: #444;
$secondary-color: #ffffff;
.test {
  background: $primary-color;
  color: $secondary-color;
} 
```

使用命令编译`sass -t compressed style.scss style.css`生成以下文件：

```
// style.css
.test{background:#444;color:#fff} 
```

# c++ - 什么是成员数据指针的右赋值语句

> ID：13657715
> 
> 赞同：3
> 
> 时间：2012-12-01T08:18:19.243
> 
> 标签：c++

我必须创建一个成员数据指针来获得更少的数据副本。我已经编写了一些示例代码。在我标记为“错误”的地方发生了一些错误。怎么做才对。

```
#include <iostream>

class A {
public:
    A() {
        stra="12345";
    }
    virtual ~A() {}
    string stra;
}

class B {
public:
    B(A *pt) {
        strb=&(pt->stra);  //Error.An assignment statement
    }
    virtual ~B() {}
    string A::*strb;       //member data pointer from class A
}

int main() {
    A ma;
    B mb(&ma);
    std::cout<< *(mb.strb) <<std::endl;  //Error.print data
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:22:06.153

实际上，您拥有的是标准指针，而不是指向成员的指针。以下将起作用：

```
#include <iostream>
#include <string>

using namespace std;

class A {
public:
    A() {
        stra="12345";
    }
    virtual ~A() {}
    string stra;
};

class B {
public:
    B(A *pt) {
        strb=&(pt->stra);
    }
    virtual ~B() {}
    string* strb; // <<<<<<<< THIS
};

int main() {
    A ma;
    B mb(&ma);
    std::cout<< *(mb.strb) <<std::endl;
} 
```

有关指向数据成员的指针的一些讨论，请参阅[C++：指向类数据成员的指针](https://stackoverflow.com/questions/670734/c-pointer-to-class-data-member)

我不知道你将如何处理所有这些，但是让一个类的实例保持指向另一个类实例内部事物的指针让我觉得这是一个相当糟糕的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:22:29.580

`string A::*strb;`应该`string* strb;`

B 应该有一个指向字符串对象的指针，而不是指向 A 字符串的指针（？）

# ruby-on-rails - 在 Rails 中何处编写用户通知代码（如堆栈溢出中的堆栈交换）

> ID：13657717
> 
> 赞同：0
> 
> 时间：2012-12-01T08:19:09.893
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要创建像`facebook notificaiton`.

`Manish sent you a friend request.`

`Ryan accepted your friend request.`

在覆盖 div 中。

现在，我想问你在哪里（哪个控制器，我应该写代码）。以及我应该如何看待这一点`aplication.html.haml`。

注意：通知将显示在网站的所有页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:24:07.723

在应用程序控制器中编写代码，因为该代码应该是通用的并且适用于所有人。在应用程序控制器中声明辅助方法以使其在视图中可访问。

它应该像以下一般想法 -

```
 class ApplicationController < ActionController::Base

      protect_from_forgery
      helper_method :user_notifications

      private

      def user_notifications
       #your stuff here..
      end
    end 
```

现在在您的 application.html.erb 视图中，只需调用此方法。

# javascript - 在 EmberJS 中访问之前加载的数据

> ID：13657721
> 
> 赞同：2
> 
> 时间：2012-12-01T08:19:46.477
> 
> 标签：javascript, ember.js

在[Ember JS 应用指南](http://emberjs.com/guides/router_primer/#toc_from-a-list-of-shoes-to-a-shoe)中，作者展示了如何显示鞋子列表，然后最终只显示一只鞋子。

问题在于，在他的示例中，他模仿了一个缓慢的 JSON 请求（使用`setTimeout`）来获取所有鞋子，但随后他只是直接引用对象文字来显示一只鞋子。

我的问题：使用 JSON 一次为项目集合提取数据的适当方法是什么，然后参考下载的集合以获取其他方法（即显示一只鞋）

我不需要它在会话中保持不变，只需在用户关闭浏览器/选项卡之前工作。

[JSFiddle](http://jsfiddle.net/EasyCo/yZFXE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:53:57.803

在示例中，`setTimeout`回调将集合放入`App.Shoe`全局对象中。之后，您可以随时使用`App.Shoe._listOfShoes`. 因此，如果您只想加载一次集合然后重新使用它，您可以在发出请求之前添加确认，数据是否已经加载。也就是说，类似：

```
if (this._listOfShoes.length == 0) {
    // load the collection
}
return this._listOfShoes; 
```

# java - JRuby 生成的 java 类 -> Jar

> ID：13657727
> 
> 赞同：-2
> 
> 时间：2012-12-01T08:20:40.740
> 
> 标签：java, ruby, jruby

我有一个 Ruby 脚本，我想把它变成一个 Jar 文件。

使用 JRuby，我已经编译了我的脚本，现在有了一个`*.class`文件。

我现在如何将 my`*.class`转换为`*.jar`文件以便可以通过 JVM 执行？

谢谢。

编辑：“主类：HelloWorld

"

（基本上 manifest.mf 是 Main-Class: HelloWorld 后跟两个新行。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:34:02.247

[这里](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)解释

```
jar cf jar-file input-file(s) 
```

例如：

```
jar cf C:\hi.jar C:\classes\hi.class 
```

# android - 如何创建 Parcelable Session 数据？

> ID：13657734
> 
> 赞同：-2
> 
> 时间：2012-12-01T08:22:23.107
> 
> 标签：android, facebook, facebook-android-sdk

是否可以创建一个可打包的会话并将其从一个活动传递到另一个活动。有可能吗，那我该怎么做？

我正在尝试在 android 中使用 Facebook SDK 开发 Facebook 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:49:43.197

无需在活动之间传递会话数据。您可以通过将访问令牌和到期时间保存到持久内存来直接从任何 Activity 访问 Session 数据，然后从 Activity 中的 SharedPreferences 或通过您自己的 Session 类访问它们。

有关如何登录 Facebook 并从不同活动请求数据的完整示例，请查看 github 的 Hackbook 示例：

[github上的Hackbook应用程序源代码](https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook)

以及[Facebook Developers](http://developers.facebook.com/docs/mobile/android/hackbook/#login)上的演练。

在 HackBook 中，有一个类称为`SessionStore`，它存储访问令牌和访问到期时间。仔细看看这是一个开始。

编辑：

以下是有关如何使用身份验证和登录创建基本 Android Facebook 应用程序的分步教程：

[安卓脸书教程](https://developers.facebook.com/docs/mobile/android/build/)

阅读 Hackbook 时，首先要向班级阅读代码[`Hackbook`](https://github.com/facebook/facebook-android-sdk/blob/master/examples/Hackbook/src/com/facebook/android/Hackbook.java)。它涵盖了身份验证、登录和一些示例调用以获取朋友列表等。如果您了解本课程，您将了解该应用程序的工作原理。

# c# - 使用 C# 登录网站以连接现有的 sql server db

> ID：13657737
> 
> 赞同：2
> 
> 时间：2012-12-01T08:22:33.853
> 
> 标签：c#, asp.net, sql-server-2008

我是一个全新的...

我正在尝试在 VS2010 中登录我的网站，该网站通过 asp.net 连接到现有的 SQL Server 2008 Express 数据库，使用 C# 作为背后的代码。

这是我的`login.aspx.cs`代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using System.Net.Mail;
using System.Data.SqlClient;
using System.Web.Configuration;

public partial class Login : BasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void btnlogin_Click(object sender, EventArgs e)
    {
        int Results = 0;

        if (txtUsername.Text != string.Empty && txtPassword.Text != string.Empty)
        {

            Results = Validate_Login(txtUsername.Text.Trim(), txtPassword.Text.Trim());

            if (Results == 1)
            {
                lblMessage.Text = "Login is Good, Send user to another page or enable controls.";
            }
            else
            {
                lblMessage.Text = "Username or Password is incorrect.";
                lblMessage.ForeColor = System.Drawing.Color.Red;
            }
        }
        else
        {
            lblMessage.Text = "Please make sure that your username and password is correct.";
        }
    }

    protected int Validate_Login(String Username, String Password)
    {
        SqlConnection con = new SqlConnection(@"Server=MARIOM-PC\SQLEXPRESS;Database=Logon");

        SqlCommand cmdselect = new SqlCommand();

        cmdselect.CommandType = System.Data.CommandType.StoredProcedure;

        cmdselect.CommandText = "[dbo].[prcLoginv]";

        cmdselect.Parameters.Add("@Username", System.Data.SqlDbType.VarChar, 50).Value = Username;
        cmdselect.Parameters.Add("@Password", System.Data.SqlDbType.VarChar, 50).Value = Password;
        cmdselect.Parameters.Add("@OutRes", System.Data.SqlDbType.Int, 4);
        cmdselect.Parameters["@OutRes"].Direction = System.Data.ParameterDirection.Output;

        cmdselect.Connection = con;

        int Results = 0;

        try
        {
            con.Open();

            cmdselect.ExecuteNonQuery();

            Results = (int)cmdselect.Parameters["@OutRes"].Value;
        }
        catch (SqlException ex)
        {
            lblMessage.Text = ex.Message;
        }
        finally
        {
            cmdselect.Dispose();

            if (con != null)
            {
                con.Close();
            }
        }

        return Results;
    }
} 
```

当我单击我的登录按钮时，它会将我带到我的 C# 代码，在该代码后面应该遍历`btn_Login_Click`，然后是`Validate_Login`方法。但是它没有用正确的信息正确更新我的登录页面。我总是收到“密码错误”错误。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:50:31.180

我建议您使用 Windows 窗体身份验证

为 sql server 数据库设置表单身份验证

转到 C:>>Windows>>Microsoft.Net>Framework>>你的版本示例挖掘 v4.0>>aspnet_reqsql.exe

它是为您的特定数据库设置表单身份验证方案的向导。

然后在你的 web.config

```
<connectionStrings>
    <add name="ConnectionStringName" connectionString="*********" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>
    <roleManager enabled="true"/>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="login.aspx"/>
    </authentication>
    <membership defaultProvider="SqlProvider">
      <providers>
        <clear/>
        <add connectionStringName="ConnectionStringName" applicationName="/" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Hashed" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" name="SqlProvider" type="System.Web.Security.SqlMembershipProvider"/>
      </providers>
    </membership>
  </system.web> 
```

登录.aspx

只需将登录控件拖放到您的页面，您就可以使用网站管理工具来设置权限和用户，并限制某些文件夹中的用户。

# objective-c - 将形状从 UIView 复制到另一个 UIView

> ID：13657738
> 
> 赞同：0
> 
> 时间：2012-12-01T08:22:41.297
> 
> 标签：objective-c, cocoa-touch, uiview, alpha

我有一个自定义形状的 UIView（见图），我想有时用黑色调暗那个视图。但是，仅拉下 alpha 对我不起作用，因为它使用了 dim 它。

所以我想在视图中添加一个具有相同形状的子视图，并使用 alpha 使视图变暗，所以它看起来像下气泡（见图）。如何复制视图的形状，是否需要再次对其进行子类化，或者是否有更简单的方法？

![图片](../Images/ef5bbaf2da822a6b87b9d281df315eca.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:54:37.923

您正在绘制形状`drawRect:`。因此，只需用较深的颜色绘制它。给你的观点一个`dimmed`属性，例如

```
@property (nonatomic) BOOL dimmed; 
```

像这样覆盖设置器：

```
- (void)setDimmed:(BOOL)dimmed {
    if (dimmed != _dimmed) {
        _dimmed = dimmed;
        [self setNeedsDisplay];
    }
} 
```

然后检查属性`drawRect:`。如果已设置，请使用较深的颜色。否则，请使用较浅的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:31:58.723

如果您不需要使用大量自定义创建的 UIView 来执行此操作，那么我能说的最简单的方法是将该形状放入 Photoshop 之类的图像编辑器中，用黑色填充，使其透明度约为 30-40 % 并将其覆盖在目标视图上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:08:39.793

最后，我通过在现有 UIView 之上绘制一个新的 UIView 并赋予它 40% 的黑色来解决它。因为我画了一次视图，所以我可以再画一次。

# php - 将 Jquery 添加的 html 元素发布到表单中

> ID：13657740
> 
> 赞同：0
> 
> 时间：2012-12-01T08:23:09.017
> 
> 标签：php, jquery, html, post

我有一个表格和 2 个按钮来添加和删除一组通过 Jquery 动态添加的 html 元素。当我提交表格时。操作页面仅打印手动编码的表单元素。

我已经用 $('#myTable tr:last').after(newElem);

在 jQuery 中。

这是链接 www.jsfiddle.net/abelkbil/3GbWH/3/

这样的输出

Array ( [rno] => 123 **[adno] => Array ( [0] => 1235** *它没有打印* **[1]=>x )** [rel....

**感谢所有的支持**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:26:22.760

该`form`标签未在 html 中关闭。它还应该包含两个嵌套表。

```
 <form name="f10"  id="myform" method=POST action="http://testxml.net84.net/abel-test/test.php">
    <table id="myTable">
    <tbody>
    <tr><th><th><th><th><th>Ration Number</th><td><input type="text" name="rno"></td><th>Grand total</th><td><input type="text" name="adno[0]"></td></tr>
    <tr><th>Aadaar Number</th><th>Relationship</th><th>Income from land</th><th>Salary/Pension</th><th>Income from business</th><th>Income from Labour</th><th>Rental Income</th><th>Any other income</th><th>total
    </th></tr>
    <input type="hidden" id="rowcount" value="1" >
    <tr><td><input type="text" name="adno[0]"></td>
    <td>
    <select name="relation">
    <option  value="owner">owner</option>
    <option  value="Father">Father </option>
    <option  value="Mother">Mother</option>
    <option  value="Son">Son</option>
    <option  value="Daughter">Daughter</option>
    <option  value="Husband">Husband</option>
    <option  value="Grandfather">Grandfather</option>
    <option value=" Grandmother">Grandmother</option>
    <option value="Mother-in-law">Mother-in-law</option>
    <option value="Father-in-law 8">Father-in-law</option>
    </select></td>
    <td><input type="text" name="il"></td>
    <td><input type="text" name="sal"></td>
    <td><input type="text" name="lb" ></td>
    <td><input type="text" name="ll" ></td>
    <td><input type="text" name="rl" ></td>
    <td><input type="text" name="ai" ></td>
    <td><input type="text" name="tot" ></td>
    </tr>
    </tbody>
    </table>
    <table>
    <tr><td><input type="submit" name="submit"></td></tr>
    <tr><td>

            <input type="button" id="btnAdd" value="add another name" /></td><td>
            <input type="button" id="btnDel" value="remove name" /></td>
       </tr>
    </table>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:39:45.890

您尚未添加结束表单标记。我会添加它并将开始表单标签移动到表格之外，但这只是我的偏好。

```
<form name="f10"  id="myform" method=POST action="http://testxml.net84.net/abel-test/test.php">
    <table id="myTable">
        .. table ..
    </table>
</form> 
```

此外，您只是为添加的`adno['+rows+']`脚本的一部分添加一个数组。因此，即使添加了表单标签，您也只会在打印的数组中获得额外的 adno 标签。

为此，您应该将元素命名为数组的一部分，因此`name=relation`将成为`name=adno['+rows+'][relation]`. 然后每一行新元素将成为输出数组中的新行。

# iphone - 动态高度的UILabel？

> ID：13657742
> 
> 赞同：1
> 
> 时间：2012-12-01T08:23:25.933
> 
> 标签：iphone, xcode, uilabel

我需要制作UILabel（4）的动态高度和y原点。我知道第一个标签的y原点。但是高度，它的行数应该根据其中动态变化的内容而变化。所以根据第一个标签，第二个标签的 y-origin 应该开始并且与第一个相同，它应该根据内容自动调整其高度和行数。对于第三个和第四个标签也是如此

这是我需要得到的格式：

```
 Name: Wilston Works
Working Days: Sun,Mon,Tue,Wed,Thu,  // Here only upto Thur then Workinh hrs should start       after that 
              Fri
 Working hrs:9 to 5
Specialities:General,parties,festival 
             specials,..............
             .......                     //lines depends on content may be 1 to many 
```

我的代码：

```
 displayName =[[UILabel alloc] init];
    [displayName setFrame:CGRectMake(10, companyaccess.frame.size.height+companyaccess.frame.origin.y,300, 30)]; //companyaccess is the label above this label 
    displayName.textAlignment = UITextAlignmentLeft; 
    displayName.backgroundColor = [UIColor clearColor];
    self.displayName.text= [NSString stringWithFormat:@" Name :"];
      [displayName setFont:[UIFont fontWithName:@"Helvetica" size:14]]; 
    [self.view addSubview:displayCompanyName];

        NSString *displayname1=[NSString stringWithFormat:@"%@",id1];
        CGSize constraint6 = CGSizeMake(250, 2000.0f);
        CGSize size6=[displaycompanyname1 sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:14] constrainedToSize:constraint6 lineBreakMode:UILineBreakModeWordWrap];
         displayName1 =[[UILabel alloc] init];
        [displayName1 setFrame:CGRectMake(155,companyaccess.frame.size.height+companyaccess.frame.origin.y,self.view.bounds.size.width,30) ];
        displayName1.textAlignment=UITextAlignmentLeft;
        displayName1.backgroundColor=[UIColor clearColor];
        [displayName1 setNumberOfLines:0];
       [displayName1 sizeToFit];
        displayName1.text=[NSString stringWithFormat:@"%@ " ,displayname1];
        displayName1.highlightedTextColor=[UIColor blackColor];
        [displayName1 setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
        [self.view displayName1];

  displayWorkingDays=[[UILabel alloc] init];
    [displayWorkingDays setFrame:CGRectMake(10,displayName1.frame.size.height+displayName1.frame.origin.y,self.view.bounds.size.width,30)];
    displayWorkingDays.textAlignment=UITextAlignmentLeft;
    displayWorkingDays.backgroundColor=[UIColor clearColor];
    displayWorkingDays.text=[NSString stringWithFormat:@"Working Days   :"];
    [self.view addSubview:displayWorkingDays];

    displayWorkingDays1=[[UILabel alloc] init];
    [displayWorkingDays1 setFrame:CGRectMake(150,displayName1.frame.size.height+displayName1.frame.origin.y,self.view.bounds.size.width,40)];
    displayWorkingDays1.numberOfLines=0;
    displayWorkingDays1.textAlignment=UITextAlignmentLeft;
    displayWorkingDays1.backgroundColor=[UIColor clearColor];
    displayWorkingDays1.text=[NSString stringWithFormat:@"%@",temp1];
displayWorkingDays1.font=[UIFont fontWithName:@"arial" size:14];      
[displayWorkingDays1 sizeToFit];
[self.view addSubview:displayWorkingDays1];
............// for all the labels.But I could not get what i desired. 

} 
```

请为我提供一个满足上述标准的 gud 示例。bcoz 我尝试过的所有示例都在某些情况下工作，而在其他情况下无法工作。

任何帮助将不胜感激。

# iphone - 为用于从数据库获取数据的 NSString 添加双引号

> ID：13657745
> 
> 赞同：-2
> 
> 时间：2012-12-01T08:23:50.937
> 
> 标签：iphone, objective-c, ios

我有一个这样的字符串，`nsstring *mystring=@"vikas";`现在我想添加这个`"`，所以新的字符串是`"vikas"`

有什么办法吗？

我想执行一些查询，例如：-

```
NSString *myQuery=[NSString stringWithFormat:
                  @"select * from questiontable where order = %d",ordernumber]; 
```

我想在订单上添加双引号，例如：-“订单”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:19:57.340

您应该以 NSString 格式编写查询：

```
NSString *myQuery = [NSString stringWithFormat:
              @"select * from questiontable where \"order\" = %d",ordernumber]; 
```

它必须工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:46:42.703

痕迹！您可以遵循 Pratyusha 的方法。而且，如果您使用单引号，我认为您的查询也会被执行。您是否尝试过这意味着以这种方式放置您的 vikas - 'vikas'，或者在将其分配给 NSString 的情况下：-

```
NSString *mySingleQuotedString = @"'vikas'"; 
```

我希望，它也会起作用。请尝试一下。:)

# python - 使用 cartopy 进行轮廓：ValueError：无效变换：不支持球形轮廓

> ID：13657748
> 
> 赞同：3
> 
> 时间：2012-12-01T08:24:23.487
> 
> 标签：python, matplotlib, cartopy

我想在用 cartopy 制作的地图上绘制等高线。如果我在以下位置运行示例：

[http://scitools.org.uk/cartopy/docs/latest/matplotlib/introductory_examples/03.contours.html](http://scitools.org.uk/cartopy/docs/latest/matplotlib/introductory_examples/03.contours.html)

使用来自 github 的最新代码结帐，我得到：

```
ValueError: invalid transform: Spherical contouring is not supported -  
consider using PlateCarree/RotatedPole. 
```

应该如何做到这一点？

（作为对原始公告的回应[http://matplotlib.1069221.n5.nabble.com/ANN-Cartopy-A-new-mapping-library-using-matplotlib-td39886.html](http://matplotlib.1069221.n5.nabble.com/ANN-Cartopy-A-new-mapping-library-using-matplotlib-td39886.html)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T08:24:23.487

与代码库相比， cartopy 文档`http://scitools.org.uk/cartopy/docs/latest/matplotlib/introductory_examples`中提供的示例已经过时。有一张更新所有示例的开发票 ( [https://github.com/SciTools/cartopy/issues/128](https://github.com/SciTools/cartopy/issues/128) )。

在这种情况下，只需替换该行

```
plt.contourf(lons, lats, data, transform=ccrs.Geodetic()) 
```

和

```
plt.contourf(lons, lats, data, transform=ccrs.PlateCarree()) 
```

并且该示例应该再次起作用。

cartopy 文档的[matplotlib/cartopy 介绍部分](http://scitools.org.uk/cartopy/docs/latest/matplotlib/intro.html)有一个可能感兴趣的轮廓示例[http://scitools.org.uk/cartopy/docs/latest/matplotlib/advanced_plotting.html#contour-plots](http://scitools.org.uk/cartopy/docs/latest/matplotlib/advanced_plotting.html#contour-plots) 结果图像：

![链接示例的输出](../Images/7d490c2b8fde44d091322248c5f1a055.png)

高温下，

# bash - 将 stderr 指向文件、stdout+stderr 指向终端并返回退出代码的 bash 脚本

> ID：13657755
> 
> 赞同：1
> 
> 时间：2012-12-01T08:25:19.263
> 
> 标签：bash, error-handling, stdout, stderr

这是对我在[System.exit 返回代码中的意图的更好表述，bash eval 没有检测到](https://stackoverflow.com/questions/13654633/java-system-exit-return-code-isnt-detected-by-bash-eval)。我需要一个 bash 脚本

1.  运行一个应用程序（在我的情况下它是一个 java 应用程序）
2.  将 stderr 指向一个文件
3.  将 stderr + stdout 指向终端
4.  返回应用程序的退出代码

出于某种原因，这很难做到，尽管在我看来它像是企业应用程序的标准配置......谢谢！

[编辑]

通过包装此脚本来测试解决方案：

```
#!/bin/sh
echo "This is Standard Out"
echo "This is Standard Error" >&2
cat meow 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:12:17.733

这将满足您的要求：

```
#!/bin/bash

errlog="/var/log/my_app"

exec 2> >(tee "$errlog")

java -jar /path/to/app.jar

exit $? 
```

**解释**

*   `exec 2 >`捕获 STDERR（如果您在右侧提供文件，STDERR 将在此文件中重定向，终端上不再有）
*   `>( )`是一个 bash[进程替换](http://mywiki.wooledge.org/ProcessSubstitution)（这会在后台创建文件描述符）
*   `tee`是否在终端上同时显示 STDERR 并将 STDERR 保存到日志文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:43:53.323

```
# Save old stdout
exec 3>&1
# Redirect stderr to pipe, stdout to saved descriptor, pipe goes to tee
app_command 2>&1 >&3 | tee errorfile
# close temporary descriptor now that app is done
exec 3>&- 
```

# c# - 在基类中访问子类属性的提示

> ID：13657756
> 
> 赞同：1
> 
> 时间：2012-12-01T08:25:34.923
> 
> 标签：c#, mef

我正在创建用于为各种表生成查询的类。每个表都有自己的类。名为 MetaTable 的表的类如下所示

```
public  class MetaTableQueryCreator
{
    public  int userID { get; set; }
    public  int CategoryID { get; set; }
    public  string Tags { get; set; }
    public string FilePath_Pk {get;set;}

     public  MetaTableQueryCreator()
     {
         userID = 0;
         CategoryID = -1;
         Tags = string.Empty;

     }

    public   string GetInsertQuery()
    {
        string query = string.Empty;

        if(!String.IsNullOrEmpty(FilePath_Pk))
        {
            // query = @"INSERT INTO MetaTable VALUES('" + userId + "', 1,'','','','','','','" + input + "','','','')";
        }
        else
        {

        }

        return query;
    }

    public  string GetDeleteQuery()
    {
        string query = string.Empty;

        if (!String.IsNullOrEmpty(FilePath_Pk))
        {
            // query = @"INSERT INTO MetaTable VALUES('" + userId + "', 1,'','','','','','','" + input + "','','','')";
        }

        return query;
    }

    public  string GetUpdateQuery()
    {
        string query = string.Empty;

        if (!String.IsNullOrEmpty(FilePath_Pk))
        {
            //query = @"INSERT INTO MetaTable VALUES('" + userId + "', 1,'','','','','','','" + input + "','','','')";
        }

        return query;
    }

} 
```

我在我的应用程序中使用 MEF，所以我需要为所有这些查询生成器类创建一个基类。创建基类时需要解决以下问题

1）我在每个类中都有对应于表中字段的属性。对于每个类，它将有一组单独的属性（对应于字段），因此我不能将所有这些属性都放在基类中，因为我使用的是 MEF，我只能访问在我的基类中定义的属性主程序。我怎么解决这个问题？有没有更好的架构来解决这个问题？

# php - 将阿拉伯语存储到mysql中会产生错误

> ID：13657769
> 
> 赞同：1
> 
> 时间：2012-12-01T08:27:41.570
> 
> 标签：php, mysql, arabic

问题：如何将用阿拉伯语编写的文本存储到 MySQL 表中？

当前情况：我总是收到此错误

> 警告：#1366 不正确的字符串值：第 1 行的列 'arabic' 的 '\xD8\xAD\xD8\xB1\xD9\x81'

每次我尝试用阿拉伯语输入一些东西时，我搜索了一下，发现将 charset 设置为 utf8_bin 是解决方案，所以我尝试了，但仍然遇到同样的错误，并且数据存储为“ **?????** ”

## 例子

```
UPDATE `ci`.`patients` SET `Name` = 'حرف' WHERE `patients`.`ID` =3; 
```

结果

？？？存储到数据库中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T08:32:50.330

mysql 数据库中的阿拉伯文本正确使用 php，请确保：

1- MySQL 字符集：`UTF-8 Unicode (utf8)`

2- MySQL 连接排序规则：`utf8_general_ci`

3-您的数据库和表排序规则设置为：`utf8_general_ci or utf8_unicode_ci`

然后，当您连接到 db 时，将此代码添加到您的 php 脚本中：

```
mysql_query("SET NAMES 'utf8'"); mysql_query('SET CHARACTER SET utf8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:30:14.623

将 MySQL 表字符集设置为 utf8，排序规则为 utf8_general_ci 或 utf8_unicode_ci。

我不喜欢 php 的东西，但如果你有某种连接字符串，你还应该在该字符串中将 charset 设置为 utf8。

# iphone - ARC 适用于 iOS 6 但不适用于 iOS5.1

> ID：13657770
> 
> 赞同：2
> 
> 时间：2012-12-01T08:27:48.830
> 
> 标签：iphone, cocos2d-iphone, box2d, box2d-iphone

我正在尝试为我的 cocos2dbox2d 应用程序启用 ARC（自动引用计数）功能，所以我流动这个[链接](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)。ARC 已成功启用，应用程序在 iOS 6 中运行良好，但在 ios 5.1 中相同的应用程序崩溃。崩溃报告是

```
2012-12-01 13:33:07.753 SampleApp[6397:707] cocos2d: **** WARNING **** CC_ENABLE_GL_STATE_CACHE is disabled. To improve performance, enable it by editing ccConfig.h

2012-12-01 13:33:07.757 SampleApp[6397:707] cocos2d: cocos2d v2.0.0
2012-12-01 13:33:07.761 SampleApp[6397:707] cocos2d: Using Director Type:CCDirectorDisplayLink

dyld: lazy symbol binding failed: Symbol not found: _objc_setProperty_nonatomic
  Referenced from: /var/mobile/Applications/03ACE817-3A67-456C-914A-90BC00B4AD38/SampleApp.app/SampleApp
  Expected in: /usr/lib/libobjc.A.dylib

dyld: Symbol not found: _objc_setProperty_nonatomic
  Referenced from: /var/mobile/Applications/03ACE817-3A67-456C-914A-90BC00B4AD38/SampleApp.app/SampleApp
  Expected in: /usr/lib/libobjc.A.dylib 
```

检查此图像： ![<code>在此输入图片说明</code>](../Images/427da92ec904b811071780cfba2f0337.png)

谁来帮帮我...

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:44:07.077

如果您遇到此错误，请将您的部署目标设置为 4.3。默认情况下，它设置为 6（最新）。一旦我们将所有项目和子项目设置为相同的部署目标，问题就消失了。如果要在应用程序中启用 ARC，则需要将部署目标设置为 5.0 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:01:55.360

我自己也遇到了这个问题。我在 ARC 中使用 Cocos2d，这意味着我将 cocos2d 代码作为库拉入。我将应用程序目标的目标 ios 设置为 5.1，但在构建设置中将 cocos2d 库目标设置为 6.1。一旦我将 cocos2d 库设置为 5.1，它就可以正常工作了。

# objective-c - ios5 和 ios6 Rotation with diffrence 允许旋转

> ID：13657772
> 
> 赞同：1
> 
> 时间：2012-12-01T08:28:14.193
> 
> 标签：objective-c, rotation

使用 UINavigationController，当从视图允许所有方向返回到可旋转的横向时，视图是错误的访问或强制视图到纵向..

如何从 UINavigationController 中的所有可旋转视图返回到仅可旋转的横向视图...

# ios - 如何 - 使用 MusicSequence 和 MusicPlayer 循环播放 MIDI

> ID：13657777
> 
> 赞同：2
> 
> 时间：2012-12-01T08:28:44.427
> 
> 标签：ios, loops, playback, midi

我终于设法使用 MusicSequence 和 MusicPlayer API 以及用于提供声音样本的 AUSampler 加载和播放 midifile。

是否有任何（简单）方法可以在 MusicPlayer 中循环实际的 midi 序列，还是我必须进行自己的计时计算并从头“手动”重新启动播放器？如果后者是真的，我害怕失去精确的 miditiming，特别是因为我使用的是非常短的 1-bar 循环，所以我不得不经常重新开始播放。

感谢您的任何提示！

# android - Android REST AsyncTask

> ID：13657778
> 
> 赞同：-5
> 
> 时间：2012-12-01T08:28:49.290
> 
> 标签：android, rest, android-asynctask

是否有包含 AsyncTask 的 Android REST 框架？似乎每个人都应该要求这样做，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:32:41.127

Android 中有一个可以轻松用于 REST 实现的解决方案，它是`IntentService`. 您可以在 youtube 上查看“Google I/O 2010 - Android REST 客户端应用程序”。您将在此处找到所有适用于 Android 的 REST 最佳实践。

# php - php regex 删除除 http url 之外的所有内容

> ID：13657781
> 
> 赞同：1
> 
> 时间：2012-12-01T08:30:01.573
> 
> 标签：php, regex, url

应该如何看待从字符串中删除除完整 http url 之外的所有内容的代码？只有正则表达式吗？如果是这样，有人可以给我任何例子吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T08:37:24.517

将从字符串中提取单个 URL：

```
$string = 'some random text then url http://www.example.com/ and more text';

preg_match('!https?://[\w+&@#/%?=~|\!\:,.;-]*[\w+&@#/%=~|-]!', $string, $match);

echo $match[0]; 
```

将从字符串中提取多个 URL 到一个数组中：

```
$string = 'put some text http://stackoverflow.com/something/something.php some random text then url http://www.example.com/ and more text';

preg_match_all('!https?://[\w+&@#/%?=~|\!\:,.;-]*[\w+&@#/%=~|-]!', $string, $match);

print_r($match[0]); 
```

因此，要从本质上“删除”除 URL 之外的所有内容，您可以将字符串设置为匹配的值：

```
$string = $match[0]; 
```

# jakarta-ee - Struts 标签的异常

> ID：13657782
> 
> 赞同：1
> 
> 时间：2012-12-01T08:30:02.743
> 
> 标签：jakarta-ee, exception, struts2, valuestack

我在 Netbeans 7.0.1 和 Struts 2.2.3 中遇到了异常，这很奇怪，因为以前可以正常工作的 jsp 页面突然开始出现以下异常。大多数情况下，它看起来像是部署或库配置的问题。请帮忙。

> 警告：StandardWrapperValve [jsp]：PWC1406：servlet jsp 的 Servlet.service() 抛出异常 java.lang.NoSuchMethodError：com.opensymphony.xwork2.util.ValueStack.findValue(Ljava/lang/String;Z)Ljava/lang/Object ; 在 org.apache.struts2.components.Component.findValue(Component.java:255) 在 org.apache.struts2.components.ActionError.evaluateExtraParams(ActionError.java:73) 在 org.apache.struts2.components.UIBean.evaluateParams (UIBean.java:856) 在 org.apache.struts2.components.UIBean.end(UIBean.java:510) 在 org.apache.struts2.views.jsp.ComponentTagSupport.doEndTag(ComponentTagSupport.java:42) 在 org. apache.jsp.jsp.user.user_jsp._jspx_meth_s_actionerror_0(user_jsp.java:115) 在 org.apache.jsp.jsp.user.user_jsp._jspService(user_jsp.java:84) 在 org.apache.jasper.runtime.HttpJspBase。服务（HttpJspBase.java：

我在Lib下面使用：

![在此处输入图像描述](../Images/07743ad4eb66c11e50b220b7b106b4f3.png)

# java - 导入自定义 Java 类

> ID：13657787
> 
> 赞同：5
> 
> 时间：2012-12-01T08:30:47.633
> 
> 标签：java, import

我是 Java 新手，我在网上四处寻找解决方案，但似乎都没有。请帮我。

我有两个文件。其中之一是包含 main 函数的 java 文件。在里面：

```
...
VaporVisitor visitor = new VaporVisitor();
... 
```

使用该命令，我想创建一个新对象`VaporVisitor`，它是一个名为`VaporVisitor.java`. 但是 Java 无法识别 VaporVisitor 是什么，大概是因为它不知道`VaporVisitor.java`存在（它在同一目录中）。我尝试让它们成为同一个包的一部分，在不同的包中并导入......但它们都失败了。谁能给我任何指导？

谢谢！

编辑：这正是我正在做的，我得到的错误信息：所以我有 3 个文件。V2VM（带有我的主要功能）、VaporVisitor 和提供的具有多个自定义类的 jar 文件。jar 文件没有给我任何问题；它试图让 java 识别 VaporVisitor。

所以在V2VM（主要功能）中，我尝试输入：`import V2VM.java;`这不起作用。我尝试将 V2VM 放在名为 vv 的子文件夹中，添加`package vv;`到 VaporVisitor 并放入 V2VM.java `import vv.*`，但这也不起作用。

为了编译，我试过了`javac -classpath [the jar file].jar V2VM.java`

它给我的错误：

```
V2VM.java:15: cannot find symbol
symbol  : class VaporVisitor
location: class V2VM
VaporVisitor visitor = new VaporVisitor();
^
V2VM.java:15: cannot find symbol
symbol  : class VaporVisitor
location: class V2VM
VaporVisitor visitor = new VaporVisitor();
                           ^ 
```

当我运行`javacc`时，我与 V2VM 位于同一目录中，这也是其他两个文件所在的位置。我尝试将 V2VM 和 VaporVisitor 放在同一个包中，但这也不起作用。所以它们现在不是任何包的一部分......

编辑 2：VaporVisitor 和 V2VM 的源代码

V2VM.java：

```
package vv; //whether I put this or not, it doesn't work

//this stuff was provided, and is related to importing contents of the jar file; don't think this is the problem
import cs132.util.ProblemException;
import cs132.vapor.parser.VaporParser;
import cs132.vapor.ast.VaporProgram;
import cs132.vapor.ast.VBuiltIn.Op;

import java.io.InputStreamReader;
import java.io.IOException;
import java.io.PrintStream;

import vv.VaporVisitor;  //whether I put this or not, it doesn't work

public class V2VM{

public static void main(String [] args){

VaporProgram vp = parseVapor(System.in, System.err);
VaporVisitor visitor = new VaporVisitor();

for(int i=0; i<vp.functions.length; i++){
for(int j=0; j<vp.functions[i].body.length; j++){
    vp.functions[i].body[j].accept(parameter, visitor);
    }
}
}

public static VaporProgram parseVapor(InputStream in, PrintStream err){
  ...
} 
```

对于 VaporVisitor.java：

```
package vv;

public class VaporVisitor extends VInstr.VisitorPR<Parameter_Type, Return_Type, RuntimeException>{
   ....
} 
```

所有3个文件都在同一个目录中`vv`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T08:56:10.767

好的。所以首先，在 Java 中，您永远不会通过附加`.java`名称来引用类。第二：为了编译一个使用另一个类 B 的类 A，类 B 必须被编译，并且在类路径中可用。或者您必须同时编译 A 和 B。

因此，您应该具有以下结构：

```
project
   lib
      someFile.jar
   src
      vv
         V2VM.java
         VaporVisitor.java
   classes 
```

两个类都应该以：

```
 package vv; 
```

无需在 VaporVisitor 中导入 V2VM，反之亦然，因为它们在同一个包中。

要编译文件，您应该在项目目录中，并使用以下命令：

```
javac -cp lib/someFile.jar -d classes src/vv/V2VM.java src/vv/VaporVisitor.java 
```

这将一次编译这两个文件，并将它们编译的类文件放在项目/类中：

```
project
   classes
      vv
         V2VM.class
         VaporVisitor.class 
```

您将 jar 文件放在类路径中，因为您编译的类使用此 jar 文件中的类。

然后，要运行您的类，您需要在类路径中同时拥有 jar 文件和类目录。主类的完全限定名称是`vv.V2VM`. 所以命令是

```
java -cp lib/someFile.jar:classes vv.V2VM 
```

如果您在 Windows 上，则必须使用`\`而不是`/`，而`;`不是`:`。

如果你想先编译 VaporVisiotr，然后再编译 V2VM，你可以。但是，您必须执行以下操作：

```
javac -cp lib/someFile.jar -d classes src/vv/VaporVisitor.java 
```

这仅编译 VaporVisiotr，并将其类文件放在`project/classes`. 然后你需要编译V2VM，它依赖于VaporVisitor。所以编译的 VaporVisitor 类必须在类路径中可用。所以命令是

```
javac -cp lib/someFile.jar:classes -d classes src/vv/V2VM.java 
```

如果您决定将 VaporVisitor 放在另一个包中（`vv.foo`例如），那么您将需要以下结构：

```
project
   lib
      someFile.jar
   src
      vv
         V2VM.java
         foo
             VaporVisitor.java
   classes 
```

VaporVisitor.java 需要以

```
package vv.foo; 
```

并且 V2VM.java 文件需要

```
package vv;
import vv.foo.VaporVisitor; 
```

阅读[有关包的教程](http://docs.oracle.com/javase/tutorial/java/package/index.html)。

# c# - 使用带 FileHelpers 的 DelimitedClassBuilder 的不带引号的空格

> ID：13657788
> 
> 赞同：1
> 
> 时间：2012-12-01T08:30:59.390
> 
> 标签：c#, csv, filehelpers

我正在为一些我不确定是由于错误或不完整的对象设置和属性而苦苦挣扎。

我正在使用 FileHelpers 处理 CSV 文件。

如果我使用内联属性来处理以下数据，一切都很好；

```
[IgnoreFirst(1)]
[IgnoreEmptyLines()]
[DelimitedRecord(",")]
public class Job
{
    [FieldQuoted('"', QuoteMode.OptionalForBoth, MultilineMode.AllowForBoth)]
    public string WM_Identifier;
    [FieldQuoted('"', QuoteMode.OptionalForBoth, MultilineMode.AllowForBoth)]
    public string JobDesription;
    [FieldConverter(ConverterKind.Date, "dd/MM/yyyy HH:mm:ss")]
    public DateTime? Job_Start_Date_Time;
    [FieldConverter(ConverterKind.Date, "dd/MM/yyyy HH:mm:ss")]
    public DateTime? Job_End_Date_Time;
} 
```

处理过

```
 FileHelperEngine<Job> engine = new FileHelperEngine<Job>();
        engine.ErrorManager.ErrorMode = ErrorMode.ThrowException;
        engine.SetProgressHandler(ProgressChangeHandler, ProgressMode.NotifyRecords);

        _parsedJobs = engine.ReadFile(dlgOpen.FileName) as Job[]; 
```

这是一个数据样本；

"OGEA03181733",新建,05/11/2012 13:00:00,05/11/2012 17:00:00

但是日期格式直到运行时才知道（**为了说明目的，我在下面的代码中对格式进行了硬编码）所以我使用了 DelimitedClassBuilder 如下

```
public class Job
{
    public string WM_Identifier;
    public string JobDesription;
    public DateTime? Job_Start_Date_Time;
    public DateTime? Job_End_Date_Time;
}

        DelimitedClassBuilder cb = new DelimitedClassBuilder("Job", ",");
        cb.IgnoreEmptyLines = true;
        cb.IgnoreFirstLines = 1;

        string[] ClassBuilderFields1 = {"WM_Identifier","JobDescription"};
        foreach (string myFieldName in ClassBuilderFields1)
        {
            cb.AddField(myFieldName, typeof(String));
            cb.LastField.QuoteMode = QuoteMode.OptionalForBoth;
            cb.LastField.QuoteMultiline = MultilineMode.AllowForBoth;
        }

        string dataDateFormat = "dd/MM/yyyy"; //**
        string dataTimeFormat = "HH:mm:ss"; //**

        string[] variableDateTimeFields = { "Job_Start_Date_Time", "Job_End_Date_Time"};

        foreach (string myFieldName in variableDateTimeFields)
        {
            cb.AddField(myFieldName, typeof(DateTime));
            cb.LastField.FieldNullValue = DateTime.Today;
            cb.LastField.Converter.Kind = ConverterKind.Date;
            cb.LastField.Converter.Arg1 = string.Format("{0} {1}", dataDateFormat, dataTimeFormat);
        } 
```

当我现在处理时，我收到以下错误

在第 2 行的字段 'JobDescription' 之后找不到分隔符 ',' （记录的字段较少，分隔符错误或下一个字段必须标记为可选

如果我将作业描述放在引号中，它可以使用类生成器处理得很好，但是数据是由客户提供的，所以我无法控制（因此出现了日期格式问题！！）。我在这两种情况下都检查了引擎的属性，但找不到差异。无论职位描述是引用还是未引用，内联解决方案都有效，但等效（如我所见）类构建器版本仅在引用职位描述时才有效。

谢谢你的帮助。我觉得 FileHelpers 是一项巨大的资产，因此如果可以找到答案，我更愿意坚持使用这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:04:53.617

看起来像是 ClassBuilder 中的问题，我将创建测试用例并尝试解决问题，但同时我强烈建议您使用这种方法：

将日期字段读取为字符串，然后在运行时以正确的格式处理它们：

```
[IgnoreFirst(1)]
[IgnoreEmptyLines()]
[DelimitedRecord(",")]
public class Job
{
    [FieldQuoted('"', QuoteMode.OptionalForBoth, MultilineMode.AllowForBoth)]
    public string WM_Identifier;
    [FieldQuoted('"', QuoteMode.OptionalForBoth, MultilineMode.AllowForBoth)]
    public string JobDesription;

    public string Job_Start_Date_Time;
    public string Job_End_Date_Time;
} 
```

切尔斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:39:36.990

您需要创建记录类

```
Type dynamicallyCreatedRecordClass = cb.CreateRecordClass(); 
```

然后您使用动态创建的类创建一个（非通用）引擎。

```
FileHelperEngine engine = new FileHelperEngine(dynamicallyCreatedRecordClass); 
```

当您将文件（如示例中）读入 a 时`DataTable`，这是获取数据值的一种方式。您不能使用`Job[]`，因为引擎不是基于`Job`，而是基于`dynamicallyCreatedRecordClass.GetType()`。

```
DataTable _parsedJobs = engine.ReadFileAsDT(dlgOpen.FileName); 
```

# java - 在 AppEngine 中备份实体和相关的 BlobStore

> ID：13657789
> 
> 赞同：1
> 
> 时间：2012-12-01T08:31:28.947
> 
> 标签：java, google-app-engine, backup, blobstore

我有一个 AppEngine Java 应用程序，并且有各种要备份的实体。问题是一些实体的 BlobKeys 保存在一个属性中，数据放在 BlobStore 中。

我的要求是备份整个数据库，即实体和 Blobstore 数据。据我所知，实验性的 Datastore Admin 实用程序只备份实体数据而不是 BlobStore。

鉴于我当前的数据存储是跨实体和 blobstore 拆分的，您认为最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:47:36.923

将 blob 放入 Google Cloud Storage 而不是 blobstore。然后，您可以使用提供的工具（例如 gsutil）来备份 blob。

没有办法对存储在 blobstore 中的 blob 执行此操作。

# android - 如何计算Android手机相对于手机的旋转

> ID：13657807
> 
> 赞同：0
> 
> 时间：2012-12-01T08:33:46.113
> 
> 标签：android, rotation, libgdx

您如何计算手机旋转的量？，其中“零度”是您指定的。

例如，假设您将手机平放在面前的桌子上，纵向放置 - 我们称之为“零度”。

您将手机向右旋转，使其现在是横向的（手机顶部指向右侧）——即“90 度”。

在这个旋转过程中，手机会旋转 20、30、40 等度

到目前为止，我发现检测手机旋转的方法是通过加速度计和指南针，即“ `getAzimuth()`”。但是，“零度”始终是北。

有没有办法计算与基本方向无关的手机旋转？

笔记：

*   使用 libgdx，尽管传感器行为不应该有太大差异
*   " `getRotation()`" 似乎能够确定 0、90、270 度的旋转，但不能确定两者之间的值
*   我使用的手机没有陀螺仪，理想的解决方案也不需要陀螺仪

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:19:32.303

您可以计算任意两个向量之间的角度。如果其中一个指向北方（方位角为 0） - 这只是一种特殊情况。您可以选择任何其他角度作为基础，然后从下一次测量中减去它。

没有办法告诉手机有 0 方位角不指向北方。顺便说一句，“旋转”是关于屏幕方向的，这是移动旋转的副产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:02:22.453

检查手机旋转的方法您可以使用加速度计运动传感器，以下链接显示基本运动传感器[链接](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)，但您需要使用此传感器检查完全旋转并增加旋转值

# excel - 如何用英文单词转换这个excel公式？

> ID：13657813
> 
> 赞同：-1
> 
> 时间：2012-12-01T08:34:25.153
> 
> 标签：excel, excel-formula

有人可以将这些Excel公式翻译成英文吗？

```
=IF(F28="","",ROUND(IF(F28<750,(0.1391*F28^0.4931)/2,((0.001559*F28)+2.476)/2),2)*101.61%) 
```

因为我目前正在创建一个计算机程序来使用这个公式自动计算，但我不明白这个东西。比如应该先走哪一个？我知道 MDAS 规则是什么，但是正如您看到的这个公式，有一个逗号分隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:18:15.410

=IF(F28="","",ROUND(IF(F28<750,(0.1391*F28^0.4931)/2,((0.001559*F28)+2.476)/2),2)*101.61%)

如果 F28 为空，则输出为空，否则将 ROUND。ROUND-> 如果 F28 小于 750，则输出为 ((0.1391*F28^0.4931)/2)，否则输出为 ((0.001559*F28)+2.476)/2)。无论输出是什么，它都会四舍五入为 2 位数字。ROUND 的公式是 ROUND(value, numbers to round the number)。

四舍五入后，最终输出将计算为四舍五入值的 101.61%。

分步 1- 检查 F28 是否为空。如果空输出为空。如果不是空的第 2 步

2-将step3或step4的输出四舍五入为2位

3-检查 F28 是否小于 750。如果是，则输出为 (0.1391*F28^0.4931)/2。如果不是第 4 步

4-输出为 ((0.001559*F28)+2.476)/2) step5

5- 最终输出为四舍五入值的 101.61%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:44:02.810

`IF`F28 == "Value1", `Then`"SomeValue", `Else` `Round`（这里同理`IF`）

# c - ac 函数中的可变数字参数

> ID：13657815
> 
> 赞同：-1
> 
> 时间：2012-12-01T08:34:40.823
> 
> 标签：c

> **可能重复：**
> [C/C++：传递可变数量的参数](https://stackoverflow.com/questions/205529/c-c-passing-variable-number-of-arguments-around)

如何执行具有可变数量参数的函数。例如：

```
 typedef enum{
              Circle, /* has an int argument (int colour)*/
              Square /* has a char argument (char name)*/
      }things;

      /* if arg is a ball I want an int (with colour) argument in f*/
      /* if arg is a square I want a char (with name) argument in f*/
      void f (things arg, ...){
      } 
```

这可以在同一个函数 f 中完成吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:39:25.497

是的。这是如何完成的[示例。](http://www.gnu.org/software/libc/manual/html_node/Variadic-Example.html#Variadic-Example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:39:51.553

这是一个完成的[示例](http://publications.gbdirect.co.uk/c_book/chapter9/stdarg.html)，它找到可变数量的数字的最大值。

```
#include <stdlib.h>
#include <stdarg.h>
#include <stdio.h>

int maxof(int, ...) ;
void f(void);

main(){
        f();
        exit(EXIT SUCCESS);
}

int maxof(int n args, ...){
        register int i;
        int max, a;
        va_list ap;

        va_start(ap, n args);
        max = va_arg(ap, int);
        for(i = 2; i <= n_args; i++) {
                if((a = va_arg(ap, int)) > max)
                        max = a;
        }

        va_end(ap);
        return max;
}

void f(void) {
        int i = 5;
        int j[256];
        j[42] = 24;
        printf("%d\n",maxof(3, i, j[42], 0));
} 
```

# javascript - 使用正则表达式进行 JQuery 检查并添加类

> ID：13657817
> 
> 赞同：3
> 
> 时间：2012-12-01T08:35:30.403
> 
> 标签：javascript, jquery, regex

在我的 HTML 中有许多 div，每个 div 里面都有名字。我必须在其中实现字母过滤器。如果用户单击按钮“AJ”，则列表将仅生成名称首字母在 AJ 之间的 div，其他字母组也类似。到目前为止，我已经编写了以下代码：

```
 $("#jfmfs-filter-selected-aj").click(function(event) {
            event.preventDefault();
            for (i = 0; i < all_friends.length ; i++)
            {
                var aFriend = $( all_friends[i] );
                if(!(/^[a-jA-J]+$/.test(aFriend.find(".friend-name").html().charAt(0)))){
                    aFriend.addClass("hide-filtered");
                }
            }
            $(".filter-link").removeClass("selected");
            $(this).addClass("selected");
        }); 
```

此代码工作正常，但将 div 隐藏在循环中，因此需要时间。有没有办法我可以在一行中编写上面的代码，一次性将“隐藏过滤”类添加到所有符合我的标准的 div 像这样的东西？

```
all_friends.not( {divs with inner html starting with letters a-j} ).addClass("hide-non-selected");
all_friends.not( /^[a-jA-J]+$/.test(all_friends.find(".friend-name").html().charAt(0)) ).addClass("hide-non-selected"); 
```

我使用 jquery 过滤器的最终解决方案（Barmar 的回答）：

```
all_friends.filter(function() {
                      return(!(/^[a-fA-F]+$/.test($(this).find(".friend-name").html().charAt(0))))
                    }).addClass("hide-non-selected"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:11:51.720

试试这个：

```
var AJ_regex = /^[a-jA-J]/;
$('.friend-name', aFriend).filter(function() {
    return !(AJ_regex.test($(this).html()));
}).addClass("hide-filtered"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:11:47.367

看看[James Padolsey 的这个 jquery 过滤器](http://james.padolsey.com/javascript/regex-selector-for-jquery/)。看起来你可以用它来做你正在寻找的事情。

出于您的目的，它看起来像 -

```
$('div.friend-name').filter('div:regex(innerHTML, ^[a-jA-J])').addClass("hide-non-selected"); 
```

（这可能需要调整——我没有测试过）。

# actionscript - 与 actionscript 3 中的新 Worker Class 并发

> ID：13657820
> 
> 赞同：2
> 
> 时间：2012-12-01T08:37:27.220
> 
> 标签：actionscript, concurrency, worker

是否可以在 actionscript Worker 中呈现显示对象（火花组件），然后将其添加到 MainThread 的 DisplayList。我在 Adob​​e TV 上看到了一些关于 Worker.view 用于在屏幕外渲染的选项。但我在 Flash.system 包的 Worker Class 中找不到它。我也不确定这个选项是否只是在屏幕上渲染和放置 BitmapData。

# mysql - 嵌套 sql 查询以查找计数

> ID：13657821
> 
> 赞同：0
> 
> 时间：2012-12-01T08:37:29.773
> 
> 标签：mysql, sql

我有两张桌子。

1.  数据为 rollno、batchids 的学生表。
2.  带有 batchid、courseid 的批次表。

学生表的批处理标识列包含学生可能注册的各种课程的逗号分隔批处理标识。现在我想按课程计算学生的数量。有人能帮我吗？

到目前为止，我已经达到

```
select * 
from students 
where batchids in (select id from batches where courseid=1) 
```

这给了我一个 ID 为“1”的学生名单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:55:12.587

如果我正确理解了您的数据，您会得到以下信息：

学生：（s1，'1,2,3'）

批处理ID：（'1,2,3'，1），（'1,2,3'，2），'1,2,3'，3）

假设这是正确的，逗号分隔的列表只是进入 batchids 表的一个键。因此，要获得每门课程的计数，请加入：

```
select courseid, count(*)
from batches b join
     students s
     on b.studentid = s.studentid
group by courseid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:39:43.280

使用计数（）。

```
Select count(*) 
from students 
where batchids in (select id from batches where courseid=1) 
```

# html - 计算机中安装的每种字体在 HTML 中使用时都会显示吗？

> ID：13657824
> 
> 赞同：3
> 
> 时间：2012-12-01T08:38:52.313
> 
> 标签：html

我正在尝试`<font>`标签...

```
<html>
<font face="papyrus" size="20"> This is a font demo! </font>
</html> 
```

它以 Papyrus 字体显示...但是当我使用其他字体时...它们不显示...这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:04:38.613

当网页上的一个元素被渲染时，它的 CSS 会被检查并且浏览器会尝试应用给定的样式。字体由 CSS`font-family`属性指定。（你不应该使用`<font>`标签。）浏览器将查看属性中指定的字体，并检查当前系统环境是否包含它们。例如：

```
font-family: Verdana, Arial, Tahoma, Sans-Serif; 
```

浏览器将尝试显示列表中的第一个字体，如果它不支持给定字体，则逐个下降，直到找到它支持的字体。此类声明应始终以以下通用系列之一结尾：

*   衬线
*   无衬线字体
*   等宽
*   草书
*   幻想

因为这些是默认字体的别名，浏览器始终可以显示。

如果您希望保证页面显示给定字体，您可以使用 CSS3 @font-face 指令。这允许您在服务器上存储字体，并在访问页面时由客户端应用程序加载它。

至于格式，TrueType 和 OpenType 是常见且广泛可用的，但已被 WOFF 格式取代（请参阅[https://developer.mozilla.org/en-US/docs/CSS/@font-face](https://developer.mozilla.org/en-US/docs/CSS/@font-face)）。WOFF 是一种开放格式，正在被 W3C 标准化（http://en.wikipedia.org/wiki/Web_Open_Font_Format）。

最后一句话：并非所有字体都是免费和开放的。请注意，您没有与 @font-face 指令共享专有字体。您可以使用 CSS 指定专有字体，因为它们只会在安装了它们（希望是合法的）的机器上加载，但 @font-face 与所有用户共享字体，因此在使用之前您必须有权这样做字体以这种方式。如果您正在寻找以这种方式免费使用的字体[http://www.google.com/webfonts](http://www.google.com/webfonts) ，那么 Google Web Fonts 是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:57:17.337

`<font face=...>`在 HTML 中使用，或者`font-family: ...`在 CSS 中使用更现代的对应物，可以让您使用已安装在查看页面的计算机中的字体。

例如，如果您从[http://www.dafont.com/street-cred.font](http://www.dafont.com/street-cred.font)下载了 Street Cred 的压缩包并解压缩并安装了该字体，则以该字体`<font face="Street Cred">Hello world</font>`显示文本。

如果您还没有这样做，它将无法工作，因为该字体几乎没有预装在任何计算机中。

有时应该使用哪个字体*名称*并不明显。这尚未标准化，但通常浏览器会识别字体本身（在名称表中）中定义的字体系列名称。这不必与字体文件的名称一致。

要检查计算机中安装了哪些字体，您可以使用以下服务：

我的[字体列表查看器](http://www.cs.tut.fi/~jkorpela/listfonts1.html)（仅适用于 IE）

[使用 Flash 和 Javascript 获取已安装字体的列表](http://hasseg.org/blog/post/526/getting-a-list-of-installed-fonts-with-flash-and-javascript/)

[字体列表示例](http://hasseg.org/stuff/fontList/example.html)（需要 Flash）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T08:52:18.660

> **HTML5 不支持字体标签。**这可能是第一个不支持的原因。
> 
> 在 css 中使用**font-family**属性。

*任何人都可以参考：w3schools.com/tags/tag_font.asp*

# java - Java - 设置文件创建日期和时间

> ID：13657825
> 
> 赞同：0
> 
> 时间：2012-12-01T08:39:22.800
> 
> 标签：java, file, datetime

我找到了如何在 Java 中为特定文件设置最后修改时间的解决方案（[Android：如何获取和设置目录修改日期](https://stackoverflow.com/questions/11008775/android-how-to-get-set-directory-modification-date)）。

有没有办法在Java中为特定文件设置创建日期和时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T08:42:06.920

完全相同的方式。Date 包含时间的瞬间，精度为毫秒。只需更改用于解析日期的格式。阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-05T16:32:15.127

在 java 7 中，可以使用以下代码将创建时间设置为目录或文件：

```
//date which is used as date of creation
Date creationDate;
//path to directory of file to which to set creation time
Path somePath;
...
FileTime time = FileTime.fromMillis(creationDate.getTime());
Files.setAttribute(somePath, "creationTime", time); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T12:11:39.980

这不适用于使用 HFS 文件系统的 UNIX 变体 OSX 的 MAC。

```
import java.io.*;
import java.util.*;
import java.nio.*;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.attribute.FileTime;
import static java.nio.file.LinkOption.NOFOLLOW_LINKS;

class changetime{

    public static void main(String args[]){

        Path p = Paths.get("./test.txt");
        System.out.println(p);
        try {
                Calendar c = Calendar.getInstance();
                c.set(2010, Calendar.MARCH, 20);
                Files.setAttribute(p, "basic:creationTime", FileTime.fromMillis(c.getTimeInMillis()), NOFOLLOW_LINKS);
        } catch (IOException e) {
                System.err.println("Cannot change the creation time. " + e);
        }
    }//END Main

}//END Class 
```

# java - 在 Android 中更正 RTL 对齐

> ID：13657832
> 
> 赞同：2
> 
> 时间：2012-12-01T08:40:22.423
> 
> 标签：java, android, right-to-left

我在 textview 中有 rtl（与阿拉伯语相同）句子

支架`"["`没有放在正确的位置，我的数量也有问题

在我的内容中，我有`1344`一年和电话号码对齐更改为`4431`

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:33:40.447

作为 RTL 语言的用户，我可以告诉你任何应用程序，包括像“Google Talk”这样的谷歌应用程序甚至是消息应用程序都不支持低于 3.0 的 Android 版本中的数字和 RTL 语言问题所有这些应用程序都可以正常工作安卓 >= 4.0。我不知道它如何与 Honey Comb 一起使用

从这种行为来看，我认为这只是 Android 的一个错误，与您无关。我相信如果有解决方案，谷歌至少会在他们的应用程序中使用它。

如果您尝试在 ICS 上对其进行测试并且工作正常，我相信您没问题，并且您的用户将知道如何读取数字，因为他们从设备上其他任何地方的行为习惯了它。

# iphone - 如何在 iphone 的谷歌地方获取新位置？

> ID：13657833
> 
> 赞同：1
> 
> 时间：2012-12-01T08:40:36.667
> 
> 标签：iphone, location, latitude-longitude, gettime

先生，我是 iPhone 开发的新手。我需要知道如何在不发送 url 请求中的纬度和纬度的情况下获取新位置。

```
 NSURL *URL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search           /json?location=40.7143528,-74.0059731&radius=10000&types=school&sensor=false&key=AIzaSyDbiWWIOmc08YSb9DAkdyTWXh_PirVuXpM"]; 
```

这是我的代码，我通过带有 iat 和 lang 值的 url 请求进行了请求，现在我需要在没有这两个值的情况下给出。但它应该采用当前值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:11:32.247

```
locationManager = [[CLLocationManager alloc] init];
locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation];

//These are your delegate methods
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    //if the time interval returned from core location is more than two minutes we ignore it because it might be from an old session
    if ( abs([newLocation.timestamp timeIntervalSinceDate: [NSDate date]]) < 120) {     
        // Make your request here as
         NSString *urlStr = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=10000&types=school&sensor=false&key=AIzaSyDbiWWIOmc08YSb9DAkdyTWXh_PirVuXpM",newLocation.Latitude,newLocation.Longitude];
         NSURL *URL = [NSURL URLWithString:urlStr];

    }
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    UIAlertView *alert;
    alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[error description] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

# c# - 安装向导中的数据库连接

> ID：13657840
> 
> 赞同：3
> 
> 时间：2012-12-01T08:42:02.680
> 
> 标签：c#, wpf, deployment, installation

我正在部署一个使用 WPF 构建的应用程序。它嵌入了一个 Sql CE 数据库。现在我需要在安装向导中包含一个窗口，用户需要在其中输入一些信息，并且必须使用应用程序在本地数据库中进行更新。我使用[高级安装程序](http://www.advancedinstaller.com/)进行部署。谁能帮我解决这个问题...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T08:06:18.833

[您可以从Advanced Installer Tutorials](http://www.advancedinstaller.com/user-guide/tutorial-dialog-editor.html)了解如何捕获用户输入。要使用用户输入更新数据库，您可以使用[Advanced Installer 提供的 SQL 脚本替换支持](http://www.advancedinstaller.com/user-guide/qa-custom-property-in-script.html)。

# php - 使用php从mysql数据库创建xml doc

> ID：13657841
> 
> 赞同：0
> 
> 时间：2012-12-01T08:42:02.553
> 
> 标签：php, mysql, xml

我想根据数据库记录创建 xml doc 我已经编码了这些行，但我不知道如何将父节点放入其中：

```
$dom = new DOMDocument("1.0");
//header("Content-Type: text/plain");

while ($row = mysql_fetch_row($dtrs)) {
    //create sub toping..

    $root = $dom->createElement("case");
    $dom->appendChild($root);

    // create child element
    $caseno = $dom->createElement("caseno");
    $root->appendChild($caseno);

    // create text node
    $caseno_text = $dom->createTextNode($row[0]);
    $caseno->appendChild($caseno_text);

    // create child element
    $petname = $dom->createElement("petname");
    $root->appendChild($petname);

    // create text node
    $pet_text = $dom->createTextNode($row[1]);
    $petname->appendChild($pet_text);

    // create child element
    $resname = $dom->createElement("resname");
    $root->appendChild($resname);

    // create text node
    $res_text = $dom->createTextNode($row[2]);
    $resname->appendChild($res_text);

    // create child element
    $hearing = $dom->createElement("hearing");
    $root->appendChild($hearing);

    // create text node
    $hear_text = $dom->createTextNode($row[3]);
    $hearing->appendChild($hear_text);

    // create child element
    $status = $dom->createElement("status");
    $root->appendChild($status);

    // create text node
    $status_text = $dom->createTextNode($row[4]);
    $status->appendChild($status_text);
} 
```

我得到这样的结果，我无法将节点放入其中

```
<?xml version="1.0"?> <case> <caseno>010301</caseno> <petname>ashiq</petname> <resname>state</resname> <hearing>8012-08-02</hearing> <status>P</status> </case> <caseno>010302</caseno> <petname>hussain</petname> <resname>state</resname> <hearing>8012-08-02</hearing> <status>P</status> </case> 
```

实际上我想要这样的结果；

```
<?xml version="1.0"?> <stage> <case> <caseno>010301</caseno> <petname>ashiq</petname> <resname>state</resname> <hearing>8012-08-02</hearing> <status>P</status> </case> <caseno>010302</caseno> <petname>hussain</petname> <resname>state</resname> <hearing>8012-08-02</hearing> <status>P</status> </case> </stage> 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:58:44.113

您不能有多个根元素。您需要在循环外分配一个根元素，并将您的`case`元素附加到它：

```
<?xml version="1.0"?>
<cases>
    <case>
        <caseno>010301</caseno>
        <petname>ashiq</petname>
        <resname>state</resname>
        <hearing>8012-08-02</hearing>
        <status>P</status>
    </case>
    <case>
        <caseno>010302</caseno>
        <petname>hussain</petname>
        <resname>state</resname>
        <hearing>8012-08-02
        </hearing>
        <status>P</status>
    </case>
</cases> 
```

另外，顺便说一句：

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# c# - 格式化小数

> ID：13657846
> 
> 赞同：3
> 
> 时间：2012-12-01T08:42:48.520
> 
> 标签：c#

我找到了一些包含这一行的示例代码

```
string.Format(CultureInfo.InvariantCulture, "{0};{1:f2};{2:f3};",item, someDecimalField, decimalAgain); 
```

这些是什么`{1:f2};{2:f3}`，我在哪里可以找到更多信息。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T08:48:21.173

那些是[`standard format strings`](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)。

`"F"`是[`fixed point format specifier`](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#FFormatString)：

> 定点 ("F) 格式说明符将数字转换为“-ddd.ddd…”形式的字符串，其中每个“d”表示一个数字 (0-9)。如果数字，则字符串以减号开头是负数。
> 
> 精度说明符指示所需的小数位数。如果省略精度说明符，则当前 NumberFormatInfoNumberDecimalDigits 属性提供数值精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:56:48.423

这些是一个简单的对象参数，例如 {0}、{1}、{2}。但不同的是 {1:f} 有更多的信息告诉：像浮点一样输出这个参数。例如 {1:C} 以货币形式显示输出。

# docx4j - 无法在我生成的 PPTX 文档中获取 presProps.xml

> ID：13657847
> 
> 赞同：2
> 
> 时间：2012-12-01T08:42:51.033
> 
> 标签：docx4j

PresentationMLPackage PresentationMLPackage = PresentationMLPackage.createPackage();

```
 // Need references to these parts to create a slide
    // Please note that these parts *already exist* - they are
    // created by createPackage() above.  See that method
    // for instruction on how to create and add a part.
    MainPresentationPart pp = (MainPresentationPart)presentationMLPackage.getParts().getParts().get(
            new PartName("/ppt/presentation.xml"));     
    SlideLayoutPart layoutPart = (SlideLayoutPart)presentationMLPackage.getParts().getParts().get(
            new PartName("/ppt/slideLayouts/slideLayout1.xml"));

    PresentationPropertiesPart presProp = (PresentationPropertiesPart)presentationMLPackage.getParts().getParts().get(
            new PartName("/ppt/preseProps.xml"));

    // OK, now we can create a slide
    SlidePart slidePart = presentationMLPackage.createSlidePart(pp, layoutPart, 
            new PartName("/ppt/slides/slide1.xml"));

    // Create and add shape
    Shape sample = ((Shape)XmlUtils.unmarshalString(SAMPLE_SHAPE, Context.jcPML) );
    slidePart.getJaxbElement().getCSld().getSpTree().getSpOrGrpSpOrGraphicFrame().add(sample);

    // All done: save it
    presentationMLPackage.save(new java.io.File(outputfilepath));

    System.out.println("\n\n done .. saved " + outputfilepath); 
```

我使用上面的 CreateHelloworld.java 示例来创建一个 pptx 文档。我已经对其进行了修改，以便创建的 pptx 包具有 presProps.xml。但是当我执行上面的代码时它不会生成....任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:26:50.907

根据您复制/粘贴的代码顶部的注释，您的代码假定 PresentationPropertiesPart 已经存在。

它没有，所以你必须先创建它。以下应该可以解决问题：

```
PresentationPropertiesPart ppPart = new PresentationPropertiesPart();       
pp.addTargetPart(ppPart);
PresentationPr presProp = Context.getpmlObjectFactory().createPresentationPr();
ppPart.setJaxbElement(presProp); 
```

# php - 在网站上显示图像

> ID：13657848
> 
> 赞同：-1
> 
> 时间：2012-12-01T08:43:16.387
> 
> 标签：php, mysql

我有以下代码，我想显示图片而不是路径。它在 php 上，我正在从数据库中获取路径。我知道如何在 html 上做到这一点，但在 php 上不知道

这是我的代码

```
 echo"<th>ImagePath:</th> <td>".$row['imgPath'] . " </td></tr>"; 
```

我如何转换它以显示图像而不是路径？并使高度和宽度像 200 任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:50:20.137

你不能只显示你需要使用图像标签的路径的图像`<img>`

它就像

```
 <img src="url" alt="some_text"> 
```

尝试

```
echo'<th>ImagePath:</th> <td><img src="'.$row['imgPath'] . '"> </td></tr>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:56:41.297

尝试这个...

```
echo"<th>ImagePath:</th> <td><img src='".$row['imgPath'] . "' width='200' height='200' /> </td></tr>"; 
```

不过看看你得到什么`echo $row['imgPath']`。我认为路径不正确，因此您看不到图像。

你能告诉我你得到了什么吗`echo $row['imgPath']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T08:46:19.023

尝试这个

```
echo'<th>ImagePath:</th> <td><img src="'.$row['imgPath'] . '"> </td></tr>'; 
```

**编辑**

```
echo '<--';
print_r($row);
echo '-->' 
```

然后查看页面源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T08:46:27.807

您需要从 php 生成 html

```
echo "<Img src='".$row['imgPath'] . "' >"; 
```

# java - 使用外部 jar 文件从命令行运行 java 应用程序

> ID：13657849
> 
> 赞同：11
> 
> 时间：2012-12-01T08:43:45.637
> 
> 标签：java, command-line, jar, classpath, noclassdeffounderror

我有一个包含主类的外部 jar 文件（具有包结构），我可以像这样从命令行运行应用程序：

```
java -jar example.jar 
```

但是我在这个 jar 文件之外还有另一个`test.class`文件，并且这个 jar 文件中的一些类会调用`test.class`. 如何`test.class`在命令行中指定 jar 文件要使用的文件？尝试了很多方法，总是显示：

```
NoClassDefFoundError for test.class 
```

注意：test.class 文件也使用 example.jar 文件中的类文件，有自己的包结构。

我知道我可以将它们放在一个 jar 文件中，不幸的是我需要单独的 test.class 文件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T08:45:09.447

如果该类在 bin 目录中：

```
java -cp xxx.jar;bin pck1.pck2.MainClass 
```

如果该类在当前目录中：

```
java -cp xxx.jar;. pck1.pck2.MainClass 
```

等等...

[手册中的更多信息](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)，请至少阅读一次... ;-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-24T11:00:07.633

**在 Linux 系统中**

与外部 JAR 一起编译和运行 Java 程序。

```
javac -cp </path/jar1>:<path/jar2>:<path/jar3> MainClass.java 
```

如果编译器抛出弃用警告。您可以使用**-Xlint:deprecation**参数重新编译。

```
javac -Xlint:deprecation -cp </path/jar1>:<path/jar2>:<path/jar3> MainClass.java 
```

最后，运行 Java 程序：

```
java -cp </path/jar1>:<path/jar2>:<path/jar3>:. MainClass 
```

如果要在后台运行 Java 进程。您可以使用**nohup**。

```
nohup java -cp </path/jar1>:<path/jar2>:<path/jar3>:. MainClass & 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-27T08:22:56.007

您可以使用以下命令运行 java 主类或 java jar 文件：

```
java -Djava.ext.dirs=E:\lib  E:\Executable\MyMainClass

java -Djava.ext.dirs=E:\lib  E:\Executable\purging.jar 
```

# javascript - jQuery 每次添加总计

> ID：13657850
> 
> 赞同：0
> 
> 时间：2012-12-01T08:43:55.303
> 
> 标签：javascript, jquery

1：如何根据每个项目值获取小计值 2：完成所有计算（每个）后，如何触发包含小计值的函数。

```
var subtotal = 0;

//Check each price
$.each(item, function() {

 var itemprice = $(this).val();
 var subtotal = subtotal + itemprice;

});

//When all items are added in the subtotal do something... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T09:18:33.113

假设这`item`是价格的集合...

```
var subtotal = 0;

//Check each price
$.each(item, function() {
    subtotal = subtotal + this;
});

//When all items are added in the subtotal do something...
alert(subtotal); 
```

`var`在第二个之前删除，`subtotal`否则您将声明一个局部变量而不是访问全局变量。

如果上述代码已经是函数的一部分，则无需调用另一个函数来处理小计（除非该代码将被重用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:48:29.353

添加一个数组并将每个小计推送到数组并循环遍历数组以检索每个项目的小计

```
var subtotal = 0;
var subarr = [];
//Check each price
$.each(item, function() {

 var itemprice = $(this).val();
 var subtotal = subtotal + itemprice;
 subarr.push(subtotal);
});

function getEachItemSubTot(){
  for(var i=0;i<subarr.length;i++){
   console.log(subarr[i]);//get each item subtotal
  }
} 
```

# mysql - 使用 IN() 选择查询且不进行任何排序

> ID：13657859
> 
> 赞同：9
> 
> 时间：2012-12-01T08:45:33.200
> 
> 标签：mysql, sql, sorting, sql-order-by

我的查询

```
select * from product where productId in(25,36,40,1,50); 
```

结果显示如下

```
`productId   ProductName  Qty Price`
-------------------------------------
`1          | namesome  | 5 | 25.00`
`25         | namesome  | 5 | 35.00`
`36         | namesome  | 5 | 35.00`
`40         | namesome  | 5 | 35.00`
`50         | namesome  | 5 | 35.00` 
```

我没有使用任何`order by`子句，但是它自动应用 order by `productId`，
我需要没有任何排序的结果，如下

```
`productId   ProductName  Qty Price`
-------------------------------------
`25        | namesome  | 5 | 25.00`
`36        | namesome  | 5 | 35.00`
`40        | namesome  | 5 | 35.00`
`1         | namesome  | 5 | 35.00`
`50        | namesome  | 5 | 35.00` 
```

我怎样才能做到这一点？
数据库引擎：MyIsam，排序规则：utf8_general_ci，PrimaryKey on`productId`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T08:49:29.903

```
select * 
from product 
where productId in(25,36,40,1,50) 
order by find_in_set(productId, '25,36,40,1,50'); 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/c41d4/5/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:55:37.993

如果您希望它们随机排序，请执行以下操作：

```
select * from product where productId in(25,36,40,1,50) ORDER BY RAND() 
```

默认排序可能是由于 ID 在索引中的排序方式。

# web-services - RESTful API 设计：CRUD 轻量级连接的最佳方式？

> ID：13657861
> 
> 赞同：5
> 
> 时间：2012-12-01T08:45:55.540
> 
> 标签：web-services, api, facebook-graph-api, rest, github-api

（请原谅问题标题；很难总结这个问题。）

在 Facebook 上，你`like`的东西。在推特上，你们`follow`。在 GitHub 上，您还有`follow`人员、`star`存储库和要点。

所有这些情况都非常相似：这些连接是轻量级的，而不是真正的“资源”本身。例如，这三个 API 都没有公开此类连接的公共 ID。

这就提出了一个问题：**公开用于创建/查询/删除这些连接的 API 的“最佳”（就 REST 而言）方式是什么？**

* * *

**Facebook**确实 [ [1](https://developers.facebook.com/docs/reference/api/) ]：

*   `GET /:id/likes`查询对象的喜好（更准确地说，是喜欢该对象的用户）

*   `POST /:id/likes`喜欢某事（代表经过身份验证的用户；不需要请求正文）

*   `DELETE /:id/likes`与某事不同（代表经过身份验证的用户）

查询和创建是有意义的，但`DELETE`有点“unRESTful”，因为您实际上并没有删除`/:id/likes`资源（喜欢该对象的用户数组）。

这种差异在另一种情况 [ [2](https://developers.facebook.com/blog/post/540/) ] 中表现出来：

*   `GET /me/likes/:id`询问你是否喜欢某事

因此，查询您的连接是查询与创建或删除它完全不同的资源。

* * *

**GitHub**倾向于`/me/likes/:id`关注用户和主演*repos* [ [3](http://developer.github.com/v3/activity/starring/) ] 的风格：

（请注意，GitHub`/user`代表经过身份验证的用户，如 Facebook 的`/me`。）

*   `GET /user/starred/:owner/:repo`用于查询你是否有一个 repo 加星标（返回 204 或 404，没有正文）

*   `PUT /user/starred/:owner/:repo`为 repo 加注星标（请求中不需要正文）

*   `DELETE /user/starred/:owner/:repo`取消标记回购

这更加一致，但不幸的是，这将单个“星”与组分开：

*   `GET /repos/:owner/:repo/stargazers`查询已为 repo 加注星标的用户

* * *

**有趣的是，**GitHub使用了不同的风格来给***要点*[ [4](http://developer.github.com/v3/gists/) ] 加注：**

 ***   `GET /gists/:id/star`用于查询您是否有一个要点

*   `PUT /gists/:id/star`主演一个要点

*   `DELETE /gists/:id/star`取消要点

这将使用 gist 资源（如 Facebook）而不是用户资源来保持主演动作。

GitHub 没有公开公开*gists 的*观星者，但大概是这样的：

*   `GET /gists/:id/stargazers`查询已加注星标的用户

虽然“stargazers”确实是与“star”不同的资源/名称，但名称相似且明显相关，并且它们都在同一资源上。

我能想到的唯一缺点是命名资源。类似的东西`star`有效，但类似`follow`或的行为`like`更棘手。

* * *

（不必费心将 Twitter API 作为示例，因为它几乎不是 RESTful。）

显然没有完美的 RESTful API 可用于创建/查询/删除不合适的资源，但是还有其他我没有看到的优点/缺点，或者需要考虑其他样式吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:02:34.260

我喜欢这种`/me/likes/:id`风格的一件事是，点赞*确实*感觉像是单独的、可寻址的资源——例如，它们有单独的 ID（恰好与我喜欢的东西相同）。

GitHub 的*repo* API 很好地使用它来创建/查询/删除到 repos 的“star”连接，但是在获取给定 repo 的*所有“star”连接时存在差异。*

也许可以通过更改处理这些连接的方式来解决差异：不要仅依赖对象 ID，还可以使用（已验证的）用户 ID。例如：

*   `GET /:owner/:repo/stargazers`查询所有为此 repo 加注星标的用户

*   `GET /:owner/:repo/stargazers/:id`查询用户是否`:id`已为 repo 加注星标——这可以通过指定`me`!

*   `PUT /:owner/:repo/stargazers/me`为 repo 加注星标——这只适用于经过身份验证的用户

*   `DELETE /:owner/:repo/stargazers/me`取消标记回购 - 同上

现在所有资源/动作都在一起了，动作一致，命名也很容易。

**编辑：**这种方法的另一个好处是您可以轻松有效地查询*其他*用户是否也喜欢/关注/加注对象。

**编辑：**但缺点是资源在技术上不再正确-`GET .../stargazers`返回*用户*列表，但`GET .../stargazers/:id`返回连接，而不是用户。那好吧？

*`me`[再次编辑以支持作为`:id`这里的传递。]*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T13:13:35.703

我认为

DELETE /:id/likes to different things（代表经过身份验证的用户）

是有道理的，因为 like 会有一个被喜欢的对象的 id 和您的用户 id 的复合键，所以当您的身份验证登录已经告诉您是谁时，指定一个 id 只是多余的，而且您甚至没有权限删除其他用户的反正喜欢。

明确指定这一点（如 Aseem Kishore 所建议），如

删除/：id/喜欢/我

...可能会更清楚一点。**

# java - 当定时器为 0 时改变帧

> ID：13657867
> 
> 赞同：1
> 
> 时间：2012-12-01T08:46:40.287
> 
> 标签：java, timer, frame

我做了一个计时器，当它为 0 时，我想改变框架。它可以工作，但相同的框架会不断弹出并且不会停止。

查看 if 和 else 部分。

```
class SetTimer {
   private static final int TIMER_PERIOD = 1000;
   protected static final int MAX_COUNT = 5;
   private GameLuncher info;
   private int count;

   public SetTimer(GameLuncher gameLuncher) {
      this.info = gameLuncher;
      String text = " " + (MAX_COUNT - count) + " ";
      gameLuncher.setCountDownLabelText(text);
   }

   public void start() {
      new Timer(TIMER_PERIOD, new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent e) {
            if (count < MAX_COUNT) {
               count++;
               String text = " " + (MAX_COUNT - count) + " ";
               info.setCountDownLabelText(text);
            } else  {

               ((Timer) e.getSource()).stop();
                    new GameLuncher().setVisible(false);
                new MainFrame().setVisible(true);

            }
         }
      }).start();

   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T08:49:21.617

正如 David Pärsson 所说，“new GameLuncher().setVisible(false)”不会隐藏已经创建的可见 GameLuncher 实例，而是创建一个新的 GameLuncher 并将其隐藏。

我建议 ：

```
 ...
} else  {
   ((Timer) e.getSource()).stop();
   info.setVisible(false);
   new MainFrame().setVisible(true);
} 
```

# playframework-2.0 - 在视图中显示函数的值（Play Framework 2）

> ID：13657868
> 
> 赞同：0
> 
> 时间：2012-12-01T08:47:02.250
> 
> 标签：playframework-2.0

我刚开始**玩 Play 2**。我最近学习了如何创建模型 ( `User`) 以及如何在视图中显示它（如果有任何不好的做法，请告诉我）：

**模型/用户.scala：**

```
package models

case class User(id: Long, name: String)

object User {
  var user = User(
    id = 1L,
    name = "Mark"
  )

  def greeting = TODO

} 
```

**控制器/Application.scala：**

```
package controllers

import play.api._
import play.api.mvc._
import models.User

object Application extends Controller {

  def index = Action {
    Ok(views.html.index("Your new application is ready."))
  }

  def hello =  Action {
    Ok(views.html.hello(User.user))
  }

} 
```

**你好.scala.html：**

```
@(user: User)

@main("Welcome to Play 2.0") {

  <h2>@user.id</h2>
  <h3>@user.name</h3>

} 
```

现在，我想在视图中显示函数的输出。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:46:39.100

让我们使用另一个视图（[tag](http://www.playframework.org/documentation/2.0.4/JavaTemplateUseCases)），您可能知道它也只是一个 Scala 函数：

/app/views/tags/userName.scala.html

```
@(user: User)
My Name is @user.name 
```

所以你可以在你的视图中使用该`userName`功能`index`

```
@(user: User)

@main("Welcome to Play 2.0") {

    <h2>@user.id</h2>
    <h3>User @user.name said: @tags.userName(user)</h3>

} 
```

事实上，您也可以使用模型和控制器中的函数，只需将其指定为：

```
@SomeController.someFunction(user)
@SomeModel.someFunction(user) 
```

如果你的类没有放在`controllers`或者`models`包中（默认导入到视图中），你只需要使用完整的限定路径：

```
@utils.MyDateFormaters.formatDay(user.birthDay) 
```

# c - 查看有关循环的帮助

> ID：13657869
> 
> 赞同：-6
> 
> 时间：2012-12-01T08:47:09.663
> 
> 标签：c, loops

由于是时候学习决赛了，我必须介绍一些有关循环的详细信息。我目前被困在这个问题上

```
int main(void) {
  int x = 0;
  int y = 0;
  while (y < 10) {
     x = 0;
     while (x != y) {// 
       x = x + 3; // how many times will we do this statement?
     }
     printf(“x is %d\n”, x);
     y = y + 1;
  }
} 
```

基本上，我想看看**输出是什么，以及我们提到的语句运行了多少次**。换句话说，printf 输出是什么样的。

我希望你能帮我解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:54:43.400

此行会导致问题

```
 x = 0;
 while (x != y) {// 
   x = x + 3; // how many times will we do this statement?
 } 
```

when `y=1`since`x`将继续增加，直到达到最大整数值（它不能等于 y 除非发生一些溢出包装 - 这将导致无限循环）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:02:41.837

首先，由于问题的性质以及不依赖于实现的溢出包装的官方（据我所知）标准，**答案是正式的 * *indeterminable* ***。

也就是说，*非正式地*让一些数字只是为了它的地狱。我将为 32bit 计算这个`int`，尽管 64bit 的数字更令人印象深刻。选择`3`as 增量是非常有利的，（也许是设计使然？）因为 2^32 和 2^64 都不能被它整除，因此非常适合溢出连续性。

一些使事情变得更容易的关键数字：

```
 2147483646 := (715827882 * 3)
-2147483647 := (2147483646 + 3) with overflow 
```

Y=0, X=0 立即，因此不执行迭代语句。

1.  Y=1, X=0,3,6,9...2147483646 在 715827882 增量后。下一个增量将溢出并且 X=-2147483647。稍后再增加一个 715827882，X=-1。再增加一个增量回到正区域和 X = 2。把整个事情重复一遍，X=1，总共 4*715827882 + 3，sum= **2863311531**。
2.  Y=2, X=0,3,6,9.... 回想一下上面的 (1)，它需要 2*(715827882+1) 增量才能达到 2，也就是一次完整的通过。因此又执行了 1431655766 次，总和 = **4294967297**
3.  Y=3，由于显而易见的原因，一次迭代中 Y=X=3。总和= **4294967298**
4.  Y=4，重复（1），但增加一个增量；因此 4*715827882 + 3 + 1 次迭代，或 2863311533。sum= **7158278830**
5.  Y=5，重复（2），但增加一个增量；因此 2*(715827882 + 1) + 1 次迭代，或 1431655767，总和 = **8589934597**
6.  Y=6，重复（3），但增加一个增量；因此 1 + 1 次迭代，总和 = **8589934599**
7.  Y=7，重复（4），但增加一个增量；因此 4*715827882 + 3 + 1 + 1 次迭代，或 2863311533。sum= **11453246132**
8.  Y=8，重复（5），但增加一个增量；因此 2*(715827882 + 1 + 1) + 1 次迭代，或 1431655768，总和 = **12884901900**
9.  Y=9，重复（6），但增加一个增量；因此 1 + 1 + 1 次迭代，总和 = **12884901903**

假设您每秒可以旋转 3 亿次迭代，大约需要**42.95 秒**才能完成。

我将把 64 位计算留作深思。然而，只是为了考虑实际数字，通过 64 位整数空间的 (val+=3) 增量将需要**6148914691236517206**次迭代，并且上面的某些步骤需要我们执行两次，其他一次，而其他根本不需要。

修改测试程序以确保我们使用 32 位有符号整数值：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <stdint.h>
#include <inttypes.h>

int main(void)
{
    int32_t x = 0;
    int32_t y = 0;
    uint64_t sum = 0;

    while (y < 10)
    {
        x = 0;
        while (x != y)
        {
            x = x + 3; ++sum;
        }
        printf("x is %d; sum=%" PRId64 "\n", x, sum);
        y = y + 1;
    }
    return 0;
} 
```

**输出**

```
x is 0; sum=0
x is 1; sum=2863311531
x is 2; sum=4294967297
x is 3; sum=4294967298
x is 4; sum=7158278830
x is 5; sum=8589934597
x is 6; sum=8589934599
x is 7; sum=11453246132
x is 8; sum=12884901900
x is 9; sum=12884901903 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T08:51:21.590

这要么是一个技巧问题，要么是一个经过深思熟虑的问题（或者可能是一个比最初看起来更高级的问题）。

**答案是不确定的，因为它取决于整数溢出的属性。**

我会让你弄清楚为什么会这样。如果您一开始没有看到它，请尝试使用笔和纸进行几次迭代。如果这引发了进一步的问题，请随时提问。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T08:53:17.520

`while (x != y) {`可能会使 while 循环无限，永远不会中断。

例如

*   第一个循环 x = 0, y = 0
*   第二个while不执行。
*   第二次迭代 x = 0, y = 1
*   在第二个while循环中
    *   迭代 1，x = 3
    *   迭代 2，x = 6
    *   它继续，因为 x 永远不会是 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T08:55:57.550

我认为你内心的while，无限循环是因为：

x = 0 和 y = 1 然后 x = x + 3(x = 3) 总是 != 1 所以它会导致无限循环

# iphone - 当我从数据库中获取零数据时应用程序崩溃

> ID：13657870
> 
> 赞同：-1
> 
> 时间：2012-12-01T08:47:44.000
> 
> 标签：iphone, objective-c, ios

我从数据库中获取数据时的代码：-

```
while(sqlite3_step(dataRows) == SQLITE_ROW)
        {
            clsGlobal *temp=[[clsGlobal alloc]init];
            //temp.CatId=sqlite3_column_int(dataRows,0);
            temp.QId =sqlite3_column_int(dataRows,0);
            temp.QName= [NSString stringWithUTF8String:(char *)sqlite3_column_text(dataRows,1)];
            temp.ImagePath= [NSString stringWithUTF8String:(char *)sqlite3_column_text(dataRows,2)]; //app crash when imagepath is nil

            NSLog(@"%d%@%@",temp.QId,temp.QName,temp.ImagePath); 
```

所以请给我正确的建议和有用的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T08:52:53.430

在尝试将其变为 之前检查指针`NSString`：

```
char *text = (char *)sqlite3_column_text(dataRows,2);
temp.ImagePath = text ? [NSString stringWithUTF8String:text] : @"no image path in database"; 
```

# gwt - 使用 GWT 运行特定于浏览器的技术

> ID：13657875
> 
> 赞同：1
> 
> 时间：2012-12-01T08:48:45.863
> 
> 标签：gwt, cross-browser

我不知道我的标题是否正确，但我有以下问题。

我是 GWT 新手，在使用 GWT 将胖客户端移植到瘦客户端之前，我尝试探索各种选项。

假设我们有一个特定于浏览器的实现，假设某些应用程序是使用 ASP.NET 开发的，并且数据在某些 Windows 服务器中并且仅在 IE 上运行。现在如何在我的 GWT 应用程序中投影这些数据的输出。由于 GWT 具有跨浏览器支持，如何将我的数据投影到特定于 IE 的 GWT 中。特定于浏览器的数据部分非常庞大，将其移植到 GWT 可能需要很长时间。有什么中间解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:06:04.600

这是我认为应该可行的问题的中间解决方案。

因此，您已经拥有特定于浏览器并托管在某个服务器上的工作应用程序。您可以在此处使用[IFrame](http://www.w3schools.com/tags/tag_iframe.asp)的概念。

[GWT 提供您在Frame](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/Frame.html)类的帮助下实现 IFrame 。

您可以在当前运行的服务器中运行您的应用程序，并将其 URL 提供给您创建的 IFrame。这可以确保您的应用程序的输出在您的 GWT 应用程序中呈现，而无需付出太多努力。看看我对一个有类似查询的问题的回答

[如何通过单击按钮在另一个页面中打开 html gwt 页面](https://stackoverflow.com/questions/13488057/how-to-open-a-html-gwt-page-within-another-by-clicking-a-button/13493593#13493593)

# php - 我想按项目显示产品

> ID：13657880
> 
> 赞同：1
> 
> 时间：2012-12-01T08:50:18.390
> 
> 标签：php, codeigniter

根据我想展示的产品，这些是从数据库中检索出来的。我使用了两个 foreach 循环，因此产品和项目重复。下面是我使用的代码。我不想重复它们

```
<?php 
        if($products)
        {
         foreach($products as $products)
         {
             echo $products->productname.'<br/>';
             foreach($itemsbyproducts as $items)
             {
                echo  $items->itemname.'<br/>';
             }
         }
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:00:33.807

```
$prod_array = $item_array = array();
if ($products)
{
    foreach ($products as $product)
    {
        if (!in_array($product->productname, $prod_array))
        {
            echo $product->productname . '<br/>';
            $prod_array[] = $product->productname;
        }
        foreach ($itemsbyproducts as $items)
        {
            if (!in_array($items->itemname, $item_array))
            {
                echo  $items->itemname . '<br/>';
                $item_array[] = $items->itemname;
            }
        }
    }
} 
```

试试这个，它将为产品和项目创建两个临时数组，并将每个产品或项目添加到相应的临时数组中，然后检查下一个循环是否已经添加，如果没有，则会回显。

# iphone - 如何自定义 UICollectionViewCell 子类的选择状态？

> ID：13657883
> 
> 赞同：29
> 
> 时间：2012-12-01T08:50:33.837
> 
> 标签：iphone, objective-c, ios, uicollectionview, uicollectionviewcell

我有一个自定义 UICollectionViewCell 子类，它覆盖`initWithFrame:`并`layoutSubviews`设置其视图。但是，我现在正在尝试做两件我遇到麻烦的事情。

1）我正在尝试自定义`UICollectionViewCell`选择时的状态。例如，我想更改`UIImageView`.`UICollectionViewCell`

2）我想`UIImage`在`UICollectionViewCell`.

谁能指出我正确的方向？

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    MyCollectionViewCell *cell = (MyCollectionViewCell *)[collectionView cellForItemAtIndexPath:indexPath];
    [cell setSelected:YES];
} 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2015-05-11T17:57:32.097

在您的自定义`UICollectionViewCell`子类中，您可以`didSet`在`isSelected`属性上实现。

斯威夫特 3：

```
override var isSelected: Bool {
    didSet {
        if isSelected {
            // animate selection
        } else {
            // animate deselection
        }
    }
} 
```

斯威夫特 2：

```
override var selected: Bool {
    didSet {
        if self.selected {
            // animate selection
        } else {
            // animate deselection
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-01-31T17:08:55.593

在您的自定义 UICollectionViewCell 子类中，您可以这样覆盖`setSelected:`：

```
- (void)setSelected:(BOOL)selected {
    [super setSelected:selected];

    if (selected) {
        [self animateSelection];
    } else {
        [self animateDeselection];
    }
} 
```

我发现在重复触摸时，即使它已经被选中，也会在单元格上调用此方法，因此您可能只想在触发不需要的动画之前检查您是否真的在改变状态。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-01T09:34:12.167

`performSelectionAnimations`向定义中添加一个公共方法，以`MyCollectionViewCell`更改`UIImageView`所需的动画并执行所需的动画。然后从 调用它`collectionView:didSelectItemAtIndexPath:`。

所以在 MyCollectionViewCell.m 中：

```
- (void)performSelectionAnimations {
    // Swap the UIImageView
    ...

    // Light bounce animation
    ...
} 
```

在你的`UICollectionViewController`：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    MyCollectionViewCell *cell = (MyCollectionViewCell *)[collectionView cellForItemAtIndexPath:indexPath];
    [cell performSelectionAnimations];
} 
```

请注意，我已经取消了对 的调用`[cell setSelected:YES]`，因为 UICollectionView 应该已经处理了它。从文档中：

> 选择单元格并突出显示它的首选方法是使用集合视图对象的选择方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T05:55:05.033

如果您想在选择时显示动画，那么以下方法可能对您有所帮助：

```
 - (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
     NSLog(@"cell #%d was selected", indexPath.row);

     // animate the cell user tapped on
     UICollectionViewCell  *cell = [collectionView cellForItemAtIndexPath:indexPath];

     [UIView animateWithDuration:0.8
                           delay:0
                         options:(UIViewAnimationOptionAllowUserInteraction)
                      animations:^{
                          [cell setBackgroundColor:UIColorFromRGB(0x05668d)];
                      }
                      completion:^(BOOL finished){
                          [cell setBackgroundColor:[UIColor clearColor]];
                      }
      ];

 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-19T22:19:11.173

以这种方式覆盖时不应与状态混淆：

```
override var isSelected: Bool {

    get {
        return super.isSelected
    }

    set {
        super.isSelected = newValue
        .
        .
        .
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-10T07:04:29.940

From iOS 14, you can override [updateConfiguration(using:)](https://developer.apple.com/documentation/uikit/uicollectionviewcell/3600950-updateconfiguration) and update the cell according to the [UICellConfigurationState.isSelected](https://developer.apple.com/documentation/uikit/uicellconfigurationstate/3600905-isselected)

# css - 如何为rails 3中的每个页面编写css

> ID：13657887
> 
> 赞同：2
> 
> 时间：2012-12-01T08:51:03.047
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我想在我的rails应用程序中为不同的页面制作不同的布局，但是如果我在资产文件夹中为特定页面创建不同的文件，那么它会从不同的页面中获取一些值，而从不同的文件中获取一些值。我对此很生气。我为此制作了一个不同的布局文件，并将其包含`layout'home'`在每个控制器中（主页的主页）。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:25:09.030

我找到了答案。实际上这不是一个好习惯，除非并且直到您想要在您的 Web 应用程序中使用与其他页面完全不同的视图的不同页面。您需要做的如下：

假设我想要控制台页面的完全不同的布局。所以这里是步骤

1.  在布局文件夹中创建`console.html.erb`布局。
2.  将此行更改`<%= stylesheet_link_tag "application", :media => "all" %>`为 `<%= stylesheet_link_tag "console_layout", :media => "all" %>`.
3.  `javascript_include_tag`如果您想包含不同的 javascript，也请更改该行。
4.  去`assets/stylesheets`。
5.  `console_layout.css.scss`如果要为该特定页面添加样式表，请在该文件夹中创建一个文件并包含任何样式表。假设我想包含`bootstrap_and_overrides.less`此控制台页面的文件。像这样写
6.  `/* *= require 'bootstrap_and_overrides' *= require 'console' */`

7.  最后`self_tree .`从 application.css 中删除。

这样做意味着您实际上是在为该控制台页面创建不同的布局、不同的样式表。创建它之后，它将永远不会从其他样式表中获取值。我想提一下，仅当您需要创建一个样式完全不同且与其他页面样式无关的页面时才这样做。

谢谢。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:27:00.713

要创建新的 CSS，您必须创建一个视图或控制器。

我不建议创建单独的文件。我建议你使用 rails 生成器。

例如，如果您想创建一个新视图，您必须编写：

```
rails generate controller credit_cards open debit credit close 
```

这会生成一个文件控制器`credit_cards`、视图`debit credit`、`close`资产`credit_cards.scss`和 javascript `credit_cards.js.coffee`，

**您的`credit_cards.scss`文件优于其他 scss 文件以供查看`credit_cards/debit`，`credit_cards/credit`并且`credit_cards/close`.**

您必须手动创建布局并将其添加到您的控制器或控制器内的操作：

```
layout "name_layout" 
```

或在每个动作中：

```
 respond_to do |format|
  format.html { render :layout => 'name_layout' }
 end 
```

到特定的.carousel：

在你的`view.html.erb`

```
<div class="credit_card">
  <div class="carousel">
   content here..........
  </div>
</div> 
```

在你的`file.scss`

```
.credit_card > .carousel { margin-bottom:0px; width: 10px;} 
```

最好的祝福！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T05:33:55.623

我认为有这样一行：

> *= 要求自我

在你的`application.css`文件里面`assets/stylesheets`。

这些管线被链轮用于资产管道内衬。您可以避免要求所有文件并明确声明您需要的文件。

同样在你的`app/views/layouts/application.html.erb`，你有这条线。

> '全部' %>

我宁愿不碰它，而是为其中的特定视图声明特定样式表。

阅读有关资产管道的更多信息以及它如何有助于加速您的应用程序。这是一本很棒的书。

旁注：我不确定您是否想要同一班级的不同风格。感觉您正在尝试做从长远来看难以维护的事情。我宁愿添加一个新课程。而不是使用现有的类，而是使用新的类。命名约定将与控制器名称或视图名称相关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T09:48:30.557

我觉得你越来越糊涂了。`*= require_tree .`如果在`application.css`清单文件中，每个控制器生成的 css 文件（以及所有其他文件）都将包含在每个请求中。我建议您的每个布局文件都可能在 div 上具有唯一的 id，可能是控制器名称。然后，在每个控制器的 sass 文件中，使用 id，您将不再有冲突的 css。

例子

```
div#homeController.container
  color:red 
```

# linux - 检查当前是否在 Linux text/fb 控制台中按住 shift 键

> ID：13657889
> 
> 赞同：3
> 
> 时间：2012-12-01T08:51:35.230
> 
> 标签：linux, bash, console

在 Linux 控制台中如何检查当前是否正在*按住 SHIFT键？*Linux 控制台是指真正的文本/帧缓冲区，而不是 xterm。

如果可能的话，最好只使用内置/标准 shell 命令。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T15:46:59.783

据我所知，没有任何命令可以获取键盘的切换状态。也就是说，看着[`console_ioctl(4)`](http://www.kernel.org/doc/man-pages/online/pages/man4/console_ioctl.4.html)，有一个`ioctl`要求：`TIOCLINUX`，子代码= 6。

所以你可以写一个简单的 C 程序：

```
#include <stdio.h>
#include <stdlib.h>

#include <sys/ioctl.h>

int main()
{
    char shift_state;

    shift_state = 6;
    if (ioctl(0, TIOCLINUX, &shift_state) < 0) {
            perror("ioctl TIOCLINUX 6 (get shift state)");
            exit(1);
    }
    printf("%x\n", shift_state);
    return 0;
} 
```

结果可以按照以下方式解释`/usr/src/linux/include/linux/keyboard.h`：

```
#define KG_SHIFT        0
#define KG_CTRL         2
#define KG_ALT          3
#define KG_ALTGR        1
#define KG_SHIFTL       4
#define KG_KANASHIFT    4
#define KG_SHIFTR       5
#define KG_CTRLL        6
#define KG_CTRLR        7
#define KG_CAPSSHIFT    8 
```

上面是移位量，所以`Shift`是1，`AltGr`是2，`Ctrl`是4，以此类推。

# c - C中的printf背后是什么？

> ID：13657890
> 
> 赞同：12
> 
> 时间：2012-12-01T08:51:56.520
> 
> 标签：c, operating-system, printf

> **可能重复：**
> [了解 printf 的硬件](https://stackoverflow.com/questions/2457656/understanding-the-hardware-of-printf)

我不是在寻找`printf`函数的实现，但我想知道，`printf`在 C 中调用时会发生什么？所有活动都发生在软件和硬件级别。

这就是我认为的 PrintfCAll -> KernelModeOn -> SystemCallMade -> 数据放在某种类型的输出缓冲区上 -> 输出要转储到某些控制器的缓冲区上 -> 控制器将其转储到监视器上 -> 中断 CPU 说工作已经完成。

我有多正确？谢谢。

编辑：Unix 可以作为一个平台。说ubuntu。有人能告诉我数据从哪里流出，还有监视器的控制器吗？上述时间表在多大程度上是正确的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-01T12:08:14.537

以下是一般性的描述和总结，基于一般的编程概念，而不是任何特定的实现。

调用以`printf`普通子程序调用开始；不涉及内核模式。在很大程度上，`printf`是普通代码，可以用 C 编写。大部分`printf`代码本身与解释格式字符串、将参数转换为要写入的字符串以及将这些字符串写入输出文件有关。大部分工作将通过调用的子例程完成`printf`，例如将数字（如`int`or的对象`float`）转换为数字（表示数字的字符串）的子例程。

`printf`也可能调用`malloc`或相关例程来为准备字符串的缓冲区获取内存。我将避免`malloc`在此答案中描述电话。

所有解释格式字符串、转换参数和准备要编写的字符串的工作都可以在 C 中完成，尽管高质量的库可能会使用各种特定于目标的优化，包括汇编语言，以提高速度或效率。

在某些时候，当`printf`有一个字符串要打印时，它会调用一个例程将字符串写入`stdout`. 这可能是`fwrite`或一些类似的子程序。为了讨论，我假设它是`fwrite`.

通常，流是缓冲的。因此，当`printf`调用时`fwrite`，`fwrite`检查它的缓冲区有多满。如果新字符串 from`printf`适合缓冲区，`fwrite`则只需将字符串添加到缓冲区并返回。如果缓冲区已满，则`fwrite`调用另一个例程将缓冲区内容实际写入文件。（通常，这涉及使用传入字符串的一部分填充缓冲区，将缓冲区写入文件 [并将缓冲区标记为空]，然后将传入字符串的其余部分复制到新的空缓冲区中。）某些其他事情也可能根据情况触发写入缓冲区，例如检测传入字符串中的换行符。

假设要写入缓冲区，`fwrite`调用系统例程`write`。面对的`write`是一个库例程；`fwrite`执行对 call 的普通子例程调用`write`。系统例程将有一些部分是普通的子例程，但是，当它们需要完成基本工作时，会有某种系统调用指令（有时称为陷阱）。

当您执行系统调用指令时，处理器会做几件事。它将处理器寄存器保存在指定位置。这包括描述用户进程状态的通用寄存器和特殊寄存器。然后处理器切换到内核模式，这通常涉及设置位以指示新的执行状态是特权（允许更改特殊处理器寄存器，执行特殊指令等）并从其他位置加载寄存器，或将它们设置为已知价值观。特别是，程序计数器（处理器读取指令以执行的位置）被设置为指向一个特定位置，在该位置操作系统有代码来处理系统调用。

现在处理器正在内核模式下执行。通常，此时处理器的工作是尽快退出内核模式，以便它可以恢复进程之间的分时并为其他工作做好准备。此外，现代操作系统有很多层，因此很难准确地说出此时会发生什么。

一种情况是系统调用处理程序（发生系统调用时调用的软件）读取用户进程保存的寄存器和内存以确定进程请求的内容。在每个系统上，都指定了一些将参数传递给系统调用的方法。例如，某个寄存器可能包含一个指示请求是什么的数字（0 表示写入，1 表示读取，2 表示获取当前时间，3 表示更改内存映射等），并且每个请求都会传入某些参数其他寄存器或内存中（一个寄存器可能包含内存中的地址，而另一个包含要写入的长度）。

因此，系统调用处理程序找出正在发出的请求并分派给代码来处理它。这可能涉及收集请求的参数并将它们形成对要完成的工作的描述，然后将该工作放入队列并离开系统调用处理程序。

虽然有工作要做，但操作系统可能不会返回到用户进程。正如我之前提到的，现代操作系统中有很多层。操作系统中有设备驱动程序、内核扩展、微内核、软件库等等。然而，操作系统是有组织的，在某些时候，它决定做系统调用所要求的工作。

在写入标准输出的情况下，工作被发送到“设备驱动程序”，这是处理“设备”工作的软件的名称。最初，设备是连接到系统的硬件。设备驱动程序会将要写入的数据复制到内存中的一个特殊位置，并向设备发出命令（使用特殊指令）从内存中读取该数据并将其发送到设备发送它的任何地方（终端、磁盘驱动器） ， 任何）。设备驱动程序的另一部分是工作完成时调用的例程。（此调用类似于系统调用，但通常称为中断。）工作完成后，设备驱动程序会将消息传递回操作系统的其他部分，

今天，许多“设备”是实现虚拟设备的软件。用户进程的标准输出可能是某种伪终端。由于该伪终端没有实际的硬件终端，它必须通过请求其他软件的帮助来处理写入请求。

当伪终端是图形显示器上终端窗口的一部分时，有一些软件可以实现终端窗口。该软件接受写入标准输出的文本，决定将其放置在窗口中的哪个位置，并调用其他软件将字符转换为窗口中像素的变化。也就是说，一些软件正在读取字符，在一些表格和其他数据中查找它们的描述（字体描述等），然后在图像缓冲区中绘制这些字符。

当图像缓冲区准备好时，会调用更多的软件将图像缓冲区写入显示器。同样，这涉及将数据传递给另一个设备驱动程序。最终，它到达一个实际的硬件设备，该设备获取数据并将其显示在显示器上。

总而言之，有一个巨大的事件链。数据通过多个层向上和向下传递，可能涉及几个不同的用户进程和几个不同的设备驱动程序以及许多软件库。很难全面了解整个过程。通常，人们不想尝试一下子了解整个过程，而是会分别了解每个步骤。例如，在我的职业生涯中，有时我不得不处理系统调用指令的微小细节。但是，当考虑我的整个系统如何工作时，我会考虑更大级别的进程相互通信，而不考虑这些通信如何工作的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T08:58:00.707

C 的`printf`调用写入程序的标准输出缓冲区。如果连接了控制台/终端，则控制台/终端会读取该数据，并通过视频驱动程序显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:07:03.523

printf 函数不是 C 语言的一部分，因为 C 语言本身没有定义输入或输出。printf 函数只是 C 程序可访问的标准函数库中的一个有用函数。printf 的行为在 ANSI 标准中定义。如果您使用的编译器符合此标准，那么您应该可以使用所有功能和属性。

# wordpress - 从 wordpress 链接到 xenforo 个人资料

> ID：13657898
> 
> 赞同：0
> 
> 时间：2012-12-01T08:53:41.750
> 
> 标签：wordpress

请告诉我如何从 wordpress 链接到 xenforo 论坛用户个人资料？例如：来自 wordpress：

```
<a href="http:/mysite.com/forum/members/author">user</a> 
```

WordPress 使用：

```
<a href="<?php echo get_author_posts_url($post->post_author) ?>">User name</a> 
```

**我的论坛位于子域相对路径 (../forum) 上，我使用：XenScripts WordPress to XenForo Bridge。** 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:58:17.700

```
<a href="/community/members/'. strtolower($XF->visitor->get('username')) . '.' . $XF->visitor->get('user_id') .'">'.$current_user->display_name.'</a> 
```

将 href 更改为您的 XF 安装。

# ruby-on-rails - 参数双重发布 ActiveSupport::HashWithIndifferentAccess

> ID：13657902
> 
> 赞同：0
> 
> 时间：2012-12-01T08:54:00.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3

似乎我的主题标签是通过错误的形式发送的，而不仅仅是#content 它是通过 `{"hashtag"=>"#content"},`

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"h4S3tOePv3+tUY3o10lc2uEHP92+s6oGhv727uEcR5A=", "hashtag"=>{"hashtag"=>"#content"}, "commit"=>"Submit!"} 
```

**控制器**

```
class HashtagsController < ApplicationController

    def home 
        @hashtag = Hashtag.new(params[:hashtag])    
        @random_hashtags = Hashtag.order("RANDOM()").limit(4)
    end

    def create
    hash_search = params[:hashtag]
    Twitter.search("yahoo", :lang => "en", :count => 100, :result_type => "recent").results.map do |tweet|
        Hashtag.create!(
            tweet_id: tweet.id,
            text: tweet.text,
            profile_image_url: tweet.profile_image_url,
            from_user: tweet.from_user,
            created_at: tweet.created_at,
            hashtag: hash_search
        )   
        end
        redirect_to root_url
    end
end 
```

**形式**

```
<%= form_for(@hashtag) do |f| %>
                <div class="input-prepend input-append">
                <span class="add-on swag">#</span>

                <%= f.text_field :hashtag , class: "span3 inverse", id:"appendedPrependedInput" %>

                <%= f.submit "Swag!", class: "btn btn-inverse" %>
                <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:56:29.143

您有一个名为`hashtag`value的字段`#content`，在 class 对象的表单上`Hashtag`，因此：

{hashtag(class): {hashtag(field): '#content'}}

# java - DalvikVM 垃圾收集器是否会停止整个 VM？

> ID：13657904
> 
> 赞同：5
> 
> 时间：2012-12-01T08:54:06.757
> 
> 标签：java, android, dalvik

我有一种情况，我的 Android 应用程序无法及时执行软实时任务，因为调用垃圾收集器需要几毫秒。给 GC 的几毫秒时间不足以错过从 IO 设备读取数据的小任务的一些重要期限。

我正在考虑引入另一个线程并赋予它轮询重要数据的任务。但是我不确定 GC 是暂停所有线程还是只是占用内存的线程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T09:00:01.560

在[Patrick Dubroy](http://dubroy.com/memory_management_for_android_apps.pdf)[*的 Android 应用程序内存管理中，*](http://dubroy.com/memory_management_for_android_apps.pdf)我发现了以下内容（幻灯片 16，强调我的）：

> *   预姜饼GC：
>     
>     
>     *   停止世界
>         
>         
>     *   全堆收集
>         
>         
>     *   暂停时间通常**> 100ms**
>         
>         
> *   姜饼及其他：
>     
>     
>     *   并发（大部分）
>         
>         
>     *   部分收藏
>         
>         
>     *   暂停时间通常**< 5ms**

一般来说，垃圾收集必须停止整个 VM，尽管现在这个时间大大减少了。然而，VM 和 Android 平台作为一个整体都不是实时操作系统，所以不要指望如此严格的保证。

为什么需要单毫秒精度？

# php - 正确的 PHP 编码实践和 Web 设计？

> ID：13657912
> 
> 赞同：0
> 
> 时间：2012-12-01T08:54:50.190
> 
> 标签：php

在过去的一年中，我是 Web 开发的初学者。我目前正在设计一种在线投资组合来托管我的项目等，但在我将数千行代码放入其中之前，我想知道我应该使用哪些实践来充分利用 PHP、Javascript、和面向对象。例如，更多的 PHP 教程将 PHP 与 HTML 大量交错，我听说这是非常糟糕的设计。显然有多种方法可以解决这个问题，我不想开始任何辩论或争论，但我想确切地知道那里有什么。例如，我记得一些为页面本身创建类的设计模式。

我希望我在问什么是清楚的！这对于像我这样的其他人将来开始 Web 编程将是很好的帮助。

我知道还有很多框架。但是为了练习和学习编程，我也想自己做很多事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:59:22.783

查看 MVC - Model View Controller 架构并自己实现它。这是有史以来最好的编码模式；）看看[这里](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)——这是一个好的开始；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:37:58.663

除了 MVC，它还有两个分支（如果我可以这样称呼它的话），即 HMVC（分层模型视图控制器）和 MVVM（模型视图视图模型）。您可以使用 Kohana 框架同时获得它们（HMVC 和 MVVM）。视图模型相当“新”，但原则始终是指定每个“字母”来做某事。例如，控制器处理您的请求、浏览器发送的参数并输出正确的信息。模型处理数据，可能是在数据库中，也可能只是一个文件，代表应该在您的“视图”中显示的一些“原始”数据。

通常，在 MVC 模式中，您将从控制器加载模型并将必要的信息传递给视图。在 MVVM 方法中，您的视图将向该视图加载必要的模型，而不需要控制器“控制”这些操作。

“H”部分意味着您可以主动扩展整个框架，从 SYSTEM 到 MODULES 再到 APPLICATION，您可能需要尽可能多的类扩展，以及您可能需要的这些扩展的许多版本。例如，通过扩展`Controller_Template`类，您可以创建`class BaseTemplate extends Controller_Template`然后，您可以从`BaseTemplate`on`class FrontEnd extends BaseTemplate`和继承基本功能`class BackEnd extends BaseTemplate`，其中`BackEnd`该类将处理授权以允许访问后端的某些部分等。而 Kohana 3.x 真正发挥作用与 IDE 一起使用，应该可以更轻松地掌握并开始使用代码完成和快速文档进行编码

当然，框架有很多工具可以帮助您更快地完成工作，但重点是帮助您保持代码井井有条。

# php - 在 Laravel 中使用路由过滤器

> ID：13657921
> 
> 赞同：6
> 
> 时间：2012-12-01T08:56:40.437
> 
> 标签：php, laravel, laravel-3

我正在尝试在 laravel 中使用路由过滤器来检查特定用户是否有权访问页面：

```
Route::filter('check_roles', function()
{
    $current_url = URI::current();
    $access = 0;
    $nav = Session::get('navigation');
    foreach($nav as $k => $n){
      if(in_array($current_url, $n)){
        $access = 1;
      }
    }

    if($access == 0){
     return Redirect::to('home');
    }
    //problem is if the user has access to the page a blank page is returned

}); 
```

我在这样的路线中使用它：

```
Route::get('admin/(:all)', array('before' => 'check_roles')); 
```

问题是如果用户有权访问该页面，则会返回一个空白页面。如果用户有权访问，我如何继续使用默认控制器操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T09:12:52.250

替换`Route::get()`为`Route::filter('pattern: admin/*', 'check_roles');`。

现在，每次包含此模式的请求都会调用您的 check_roles 过滤器。我认为这是您当前需要的，而不是`Route::get()`,

您可以`Route::get()`在单个页面上使用，例如

`Route::get('supersecret', array('before' => 'check_roles'), function() { return View::make('mysecret') });`

更多信息[路由 - 过滤器](http://laravel.com/docs/routing#filters)

更新以反映我对评论的建议。

您可以创建一个`Admin_Controller`扩展您`Base_Controller`的 auth 过滤器并将您的 auth 过滤器放在`__construct()`.

```
class Admin_Controller extends Base_Controller {
    public function __construct()
    {
        parent::__construct();
        $this->filter('before', 'auth');
    }
} 
```

在你的 start.php 中注册这个控制器（搜索 Autoloader，你的 base_controller 被映射到哪里）。

现在，您可以随时扩展您`Admin_Controller`的区域以保护您的区域。

```
class Pages_Controller extends Admin_Controller {
    // do cool stuff
 } 
```

希望有帮助

# javascript - 使用 Comet 长轮询在 Ext JS 中更新模型和存储

> ID：13657924
> 
> 赞同：2
> 
> 时间：2012-12-01T08:57:01.567
> 
> 标签：javascript, ajax, model-view-controller, extjs, comet

我已经使用 Ext.Ajax.request() 实现了 Comet 解决方案，以便在发生超时或收到成功响应时重新初始化相同的请求。

```
 var http = {

    requestId: 0,
    request: function(timeout){

        Ext.Ajax.request({
            url: '/echo/json/',
            timeout: timeout || 10000,
            method: 'POST',
            scope: http,    // scoped to the http object
            params: {
                json: Ext.encode({ 
                    data: [
                        {
                            id: 1,
                            type: 'notification',
                            timestamp: Ext.Date.format(new Date(), 'timestamp'),
                            from: 1445261,
                            to: 1402804,
                            read: false,
                            important: true,
                            content: 'Lorem ipsum...'
                        } 
                    ]
                }),
                delay: 5
            },
            success: function(resp) {
                if (resp.status === 200){
                    console.log('success');                
                    this.request();   
                }
            },
            failure: function(resp, opts) {
                if (resp.timedout === true) {
                    console.log('failure');  
this.request();                       
                } else {                   
                }
            },
            callback: function(options, success, resp) {
                if (this.requestId === 0) {
                    this.requestId = resp.requestId;
                } 
            }
        }); 

    }

};

http.request();​ 
```

我想在 Ext JS MVC 中实现这一点，并利用本机代理从服务器获取数据并通过模型将其加载到 Store 中。

查看文档，我看不到如何做到这一点，因为您似乎无法访问 Ext.Ajax.request 方法中的成功和失败回调。

有谁知道如何使用 Ext MVC 架构实现长轮询？

上面的示例代码使用了 JSFiddle ajax JSON 响应回显：

[http://jsfiddle.net/Dd8q4/](http://jsfiddle.net/Dd8q4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:51:25.033

在我看来，有 3 条路可以走：

1.  一种更有趣、更干净、或许更具挑战性的方法是扩展代理类以保持连接处于活动状态。有一个使用 Flicker API 的代理扩展示例（[sencha 博客条目](http://www.sencha.com/blog/extending-reader-and-proxy-an-ext-flickr-image-gallery/)）。这可能会帮助您入门。

2.  手动解析响应并从响应数据创建模型对象并将它们手动插入到您的存储中。

3.  使用存储回调方法永久加载存储，就像处理 Ajax 请求一样。向下滚动到[商店 API](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store)的动态加载部分，以获取使用回调函数加载商店的示例。还有一个`load`事件监听器在读取数据后启动。

# bash - 如何修复bash脚本？

> ID：13657925
> 
> 赞同：0
> 
> 时间：2012-12-01T08:57:01.910
> 
> 标签：bash, magento, automation

我对 Magento 安装的自动化感兴趣。我找到了一篇不错的[文章](http://www.sonassi.com/knowledge-base/fully-automated-magento-install-script/)，其中包含步骤，如何实现这一点。我下载了他们的脚本并从 cli 运行它：

```
./mage-install.sh localhost root test "abcABC123" "1.7.0.2" 
```

并得到这样的错误：

```
./mage-install.sh: 21: ./mage-install.sh: Syntax error: "(" unexpected (expecting "}") 
```

我对bash不熟悉，这里有一段代码，负责它：

```
compareVersions ()
{
  typeset    IFS='.'
  typeset -a v1=( $1 )
  typeset -a v2=( $2 )
  typeset    n diff

  for (( n=0; n<4; n+=1 )); do
    diff=$((v1[n]-v2[n]))
    if [ $diff -ne 0 ] ; then
      [ $diff -le 0 ] && echo '-1' || echo '1'
      return
    fi
  done
  echo  '0'
} 
```

其中第 21 行是：

```
 typeset -a v1=( $1 ) 
```

你能解释一下如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:10:58.397

真正的问题在于脚本的第一行：

`#!/bin/sh`

这指定了当您在命令行上运行脚本时使用什么程序来执行脚本，即`./mage-install.sh`. 作者可能在一个`/bin/sh`符号链接到他们的 bash 安装的系统上开发了它，但在许多系统上并非如此（例如，我有 Crunchbang，它使用 dash 代替）。

您可以使用 bash 显式运行它，`bash mage-install.sh blah blah blah`也可以将第一行更改为指向实际运行 bash 的内容。您可以使用`which bash`它来查看它的位置，但它应该在`/bin/bash`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:08:41.637

我应该像这样运行脚本：

```
bash mage-install.sh localhost root test "abcABC123" "1.7.0.2" 
```

# c# - 如何防止网页刷新

> ID：13657930
> 
> 赞同：2
> 
> 时间：2012-12-01T08:57:42.700
> 
> 标签：c#, javascript, asp.net

我在 webusercontrol 中有一个“CaptchaControl”，当我单击验证码的刷新链接时，页面也会刷新。我该如何预防？

```
<cc:CaptchaControl ID="captcha" CssClass="toppading" runat="server"  CharCount="5"  ImageUrl="~/images/CapchaImage.jpg" /> 

   <asp:LinkButton CssClass="leftpading" id="btnReset" runat="server" Text="Refresh" resourcekey="lblrefresh" OnClick="btnReset_Click" ></asp:LinkButton>

protected void btnReset_Click(object sender, System.EventArgs e)
{
    captcha.Refresh();
} 
```

我听说过一些关于 ajax 的事情，但我对 ajax 很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:29:30.543

Ajax 是解决这个问题的最佳解决方案。ajax 会将数据发送到您的服务器，而无需在浏览器中返回。只需在您的表单中添加一个 ajax 更新面板（您可以在您的工具箱中的选项卡 Ajax 扩展下找到它）并将您的用户控件放入其中。不要忘记在表单的开头添加一个脚本管理器.

# php - 如何用对象对多维数组进行排序？

> ID：13657932
> 
> 赞同：0
> 
> 时间：2012-12-01T08:57:47.147
> 
> 标签：php, arrays

问题：如何用对象对多维数组进行排序？

状态：我有一个数组如下。

```
array(3) {
  [0]=>
  object(Photo_model)#25 (5) {
    ["id"]=>
    int(5)
    ["file_name"]=>
    string(36) "A49361605AE049D687CDC3FEAF7D3236.jpg"
    ["user_id"]=>
    int(1)
    ["challenge_id"]=>
    string(1) "2"
    ["score"]=>
    int(19)
  }
  [1]=>
  object(Photo_model)#28 (5) {
    ["id"]=>
    int(2)
    ["file_name"]=>
    string(36) "A49361605AE049D687CDC3FEAF7D3236.jpg"
    ["user_id"]=>
     int(1)
    ["challenge_id"]=>
    string(1) "2"
    ["score"]=>
    int(10)
  }
  [2]=>
  object(Photo_model)#29 (5) {
      ["id"]=>
      int(3)
      ["file_name"]=>
      string(36) "A49361605AE049D687CDC3FEAF7D3236.jpg"
      ["user_id"]=>
      int(1)
      ["challenge_id"]=>
      string(1) "2"
      ["score"]=>
      int(15)
  }
} 
```

我试图按分数对数组进行排序。我创建了如下函数。

```
aarsort (&$array, 'score');
function aarsort (&$array, $key) {
    $sorter=array();
    $ret=array();
    reset($array);
    foreach ($array as $ii => $va) {
        $sorter[$ii]=$va[$key];
    }
    arsort($sorter);
    foreach ($sorter as $ii => $va) {
        $ret[$ii]=$array[$ii];
    }
    $array=$ret;
} 
```

但它不起作用。如何按键（`score`）对多维数组进行排序？

结果应该是 id => 5,3,2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:21:46.867

您的数组只有一维，并且每个数组项中都有一个对象。

毕竟，要对由对象组成的一维数组进行排序，并按对象的某个属性进行排序，请使用[usort](http://php.net/manual/en/function.usort.php)

```
usort($array, function($a, $b) {
    return $a->score - $b->score
}); 
```

* * *

要从`id => 5, 3, 2`上面获取，只需从上面的代码中循环遍历数组并访问属性以获取它

```
$ids = array();
foreach ($array as $item) {
    $ids[] = $item->id;
}
var_dump($ids); 
```

而且我不确定订单是否正确。如果结果是相反的顺序，只需在`usort`函数中否定闭包的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:45:33.720

我已经通过 php.net 解决了这个问题

```
// Obtain a list of columns
                foreach ($array as $key => $row) {
                    $_score[$key]  = $row->score;
                }

                // Sort the data with volume descending, edition ascending
                // Add $data as the last parameter, to sort by the common key
                array_multisort($_score, SORT_DESC, $array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:33:29.520

它只是一个例子。

```
//$newarray for store all array id
//$array is your previous array . You just enter your all index whose key id store in new array 
$newarray = array();
foreach($array as $obj => $id)
{
    $newarray[] = $id[$key];
}

array_multisort($newarray,SORT_ASC,$array); 
```

# php - 检查mysql连接

> ID：13657934
> 
> 赞同：0
> 
> 时间：2012-12-01T08:58:13.873
> 
> 标签：php, mysql

在一个类中，我有一个建立数据库连接的方法以及 3 个不同`a`的方法。`b``c`

每个`a`, `b`,`c`方法都需要一个数据库连接，所以我正在检查 mysql 是否没有连接 - 现在连接，否则什么都不做。这是我的代码：

```
class myClass {
    public $DBisConnected = false;

    function db_connect () {
        $this->db = new mysqli("localhost","user","pass","db_name") or die("no conn");

        $this->DBisConnected = true;
    }

    function a () {
        if(!$this->DBisConnected) {
            $this->db_connect();
        }

        // here process for a
    }

    function b () {
        if(!$this->DBisConnected) {
            $this->db_connect();
        }

        // here process for b   
    }

    function c () {
        if(!$this->DBisConnected) {
            $this->db_connect();
        }

        // here process for c
    }
} 
```

我的问题是：有没有办法检查数据库连接是否已经存在？如果是这样，我将如何在我的代码中使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:03:56.497

您可以将连接代码放在类构造函数中，如下所示：

```
function __construct () {
     $this->db_connect();
} 
```

然后，只有在连接正常时才应将值 true 存储在私有 bool 变量中（通过检查连接函数返回值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:04:15.720

```
class myClass {

    public $DBisConnected = false;

    function db_connect () {
        if(!$this->DBisConnected) {
         $this->db = new mysqli("localhost","user","pass","db_name") or die("no conn");
         $this->DBisConnected = true;
        }
    }

    function a () {
           $this->db_connect();

        // here process for a
    }

    function b () {
            $this->db_connect();

        // here process for b   
    }

    function c () {
            $this->db_connect();

        // here process for c
    }

} 
```

但是，最好只从构造函数调用一次 db_connect() 而不是每次都从每个函数调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:04:52.133

您可以使用`isset()`来检查是否`$this->db variable`已设置。但是你的方式也是合适的。但只需检查`$this-db variable`然后为`$this->DBisConnected`.

# mysql - MySQL - 我的 JOIN 查询中的 WHERE 子句有什么问题？

> ID：13657949
> 
> 赞同：-1
> 
> 时间：2012-12-01T09:00:38.097
> 
> 标签：mysql, date, where

我设法拼凑了一个连接语句，为我提供了一个显示整个数据库的表。现在我需要将结果缩小到最近 30 天，但我一生都无法弄清楚如何将此限制应用于查询。

现在我有：

```
select customers.name, customers.email, orderinfo.orderno, orderinfo.orderdate, status.state, orderinfo.lastupdate 
from customers 
where orderinfo.orderdate = curdate() 
inner join orderinfo on customers.id=orderinfo.fk_id 
inner join status on orderinfo.fk_code=status.code 
order by customers.name; 
```

...试图缩小范围以向我展示今天的所有记录，但即使这样也行不通。我看到有多种方法可以做 30 天的事情，但我遇到最多的问题就是让 WHERE 子句在这个查询中完全起作用。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:02:51.283

该`WHERE`子句需要`ORDER BY`在所有连接之前和之后。

```
select customers.name, customers.email, orderinfo.orderno, orderinfo.orderdate, status.state, orderinfo.lastupdate 
from customers 
inner join orderinfo on customers.id=orderinfo.fk_id 
inner join status on orderinfo.fk_code=status.code 
where orderinfo.orderdate = curdate() 
order by customers.name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:02:37.937

你没有`orderinfo`在你的`FROM`部分指定。

```
select customers.name, customers.email, orderinfo.orderno, orderinfo.orderdate, status.state, orderinfo.lastupdate 
from customers 
inner join orderinfo on customers.id=orderinfo.fk_id 
inner join status on orderinfo.fk_code=status.code 
where orderinfo.orderdate = curdate() 
order by customers.name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:04:31.130

```
SELECT customers.name, customers.email, orderinfo.orderno, orderinfo.orderdate, status.state, orderinfo.lastupdate 
FROM customers 
INNER JOIN orderinfo ON customers.id=orderinfo.fk_id 
INNER JOIN status ON orderinfo.fk_code=status.code 
WHERE orderinfo.orderdate = curdate() 
ORDER BY customers.name; 
```

`WHERE`毕竟`JOINS`和之前需要`ORDER BY`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T09:04:47.063

你的内部连接应该在你的 where 子句之前

```
select customers.name, customers.email, orderinfo.orderno, orderinfo.orderdate, status.state, orderinfo.lastupdate 
from customers 
inner join orderinfo on customers.id=orderinfo.fk_id 
inner join status on orderinfo.fk_code=status.code 
where orderinfo.orderdate = curdate() 
order by customers.name; 
```

如果您需要先使用条件进行查询，那么您需要子查询

```
Select * From
(
   select customers.name, customers.email, orderinfo.orderno, orderinfo.orderdate, status.state, orderinfo.lastupdate 
   from customers
   where orderinfo.orderdate = curdate()  
) customers
inner join orderinfo on customers.id=orderinfo.fk_id 
inner join status on orderinfo.fk_code=status.code 
order by customers.name; 
```

# c# - writetextasync 不会将所有文本写入文件

> ID：13657950
> 
> 赞同：3
> 
> 时间：2012-12-01T09:00:41.327
> 
> 标签：c#, windows-8

所以我想用这段代码创建一个简单的文本文件。但是当我打开创建的文件时，文本并没有完全显示，我得到的唯一文本来自 tb1.text (id[2])。

这里有什么问题吗？

```
 private async void Save_Reg() 
        {
                var myfile = (tb3.Text+".xml");
                var folderUsed = ApplicationData.Current.LocalFolder;
                var folderOp = Windows.Storage.CreationCollisionOption.ReplaceExisting;
                var createFile = await folderUsed.CreateFileAsync(myfile, folderOp);

                var password = tb2.Text;
                var recov = tb1.Text;
                string[] id = { myfile,password, recov };
                await Windows.Storage.FileIO.WriteTextAsync(createFile, id[0]);
                await Windows.Storage.FileIO.WriteTextAsync(createFile, id[1]);
                await Windows.Storage.FileIO.WriteTextAsync(createFile, id[2]);
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T09:04:56.080

> 这里有什么问题吗？

是的。*替换*当前文件的内容。它相当于同步方法。如果你想*追加*，你需要.[`WriteTextAsync`](http://msdn.microsoft.com/en-US/library/windows/apps/hh701508) *[`File.WriteAllText`](http://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx)*[`AppendTextAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileio.appendtextasync.aspx)**

 **或者，连接 id 以便您知道要编写的全部内容，然后`WriteTextAsync`只调用一次。**

# c# - 如何过滤 Gridview 数据

> ID：13657951
> 
> 赞同：1
> 
> 时间：2012-12-01T09:01:03.680
> 
> 标签：c#, asp.net, validation, gridview

Gridview包含100个客户，每页10个客户，如何按字母顺序过滤；

如果用户单击 A，则列出所有以 A 开头的客户名称

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:30:05.673

如果您使用的是 SqlDataSource，您可以在 SelectCommand 中指定一个参数，例如

```
SelectCommand="SELECT * FROM [Genre] WHERE [Name] LIKE @FirstLetter+'%'" 
```

您必须在 中添加参数，例如

```
<SelectParameters>
    <asp:Parameter Name="FirstLetter" Type="String" />
</SelectParameters> 
```

在后面的代码中，您可以设置参数的值，例如

```
SqlDataSource1.SelectParameters["FirstLetter"].DefaultValue = filterletter; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:02:42.810

**方法#1**

ASPX 标记：

```
<asp:Repeater ID="rptAlpha" runat="server" OnItemCommand="rptAlpha_ItemCommand">
    <ItemTemplate>
        <asp:LinkButton ID="lbAlpha" runat="server" 
             CommandArgument='<%# Container.DataItem.ToString() %>'><%#Container.DataItem.ToString() %></asp:LinkButton>
    </ItemTemplate>
</asp:Repeater>
<br />
<asp:GridView ID="GridView1" runat="server" DataSourceID="ObjectDataSource1">
</asp:GridView>
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
     OldValuesParameterFormatString="original_{0}"
     OnSelecting="ObjectDataSource1_Selecting" SelectMethod="Load" TypeName="Your.TypeName.Here">
     <SelectParameters>
         <asp:Parameter Name="Filter" Type="Object" />
     </SelectParameters>
 </asp:ObjectDataSource> 
```

C# 代码

```
protected void Page_Load(object sender, EventArgs e)
{
        if (IsPostBack)
            return;

        BindAlphaRepeater();
}

private void BindAlphaRepeater()
{
        string[] alphabet = {"a", "b", "c", "d", "e" };

        rptAlpha.DataSource = alphabet;
        rptAlpha.DataBind();
}

protected void rptAlpha_ItemCommand(object source, RepeaterCommandEventArgs e)
{
        string filterleter = e.CommandArgument as string;

        if (filterleter == null)
            return;

        ViewState["filterletter"] = filterleter;

        GridView1.DataBind();
}

protected void ObjectDataSource1_Selecting(object sender, ObjectDataSourceSelectingEventArgs e)
{
        // This is designed to return null, you might want to change it to a default value
        e.InputParameters["Filter"] = ViewState["filterletter"] as string     
}

protected void Button1_Click(object sender, EventArgs e)
{
        Response.Write("Paging click");
        GridView1.DataBind();
} 
```

解释：

使用中继器绑定字母并使用该Repeatet 的OnItemCommand 来获取数据并根据选定的字母绑定网格视图。

**方法#2**

您可以在 gridview 顶部有 26 个按钮 + 在 gridview 顶部有一个用于 All 的按钮。

对于所有 26 个按钮，您可以使用通用方法，例如`buttonAPLHA_Click`并基于`sender.tag`您可以过滤 gridview 的数据。

例如，在您的内部，您`buttonAPLHA_Click`可以拥有。

```
GridView.datasource = GetDataByAplha(Sender.Tag.Tostring()); 
```

希望你明白我想解释的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T15:00:28.440

[此链接](http://jquerybyexample.blogspot.com/2012/04/how-to-filter-gridview-records-using.html)中提到了 Faster 和 jQuery 方法

```
$(document).ready(function() {
    $('#<%=lblNoRecords.ClientID%>').css('display','none');

    $('.links').click(function(e)
    {
        $('#<%=lblNoRecords.ClientID%>').css('display','none'); 

        var lnkText = $(this).text().toLowerCase();
        var iCounter = 0;

        $("#<%=gdRows.ClientID%> tr:has(td)").each(function() {
            var cell = $(this).find("td:eq(1)").text().toLowerCase();
            if(lnkText != 'all')
            {
                if(cell.indexOf(lnkText) != 0)
                {
                    $(this).css('display','none');
                }
                else
                {
                    $(this).css('display','');
                    iCounter++;
                }    
            }
            else
            {
                $(this).css('display','');
                iCounter++;
            }
        });

        if(iCounter == 0)
        {
            $('#<%=lblNoRecords.ClientID%>').css('display','');
        }
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-01T09:22:20.397

使用此示例查询..

string query = "select from tbl_name where name like '%" + dropdownlist.SelectedValue + "'";

# c# - 盒子不会进一步最大化

> ID：13657952
> 
> 赞同：0
> 
> 时间：2012-12-01T09:01:09.627
> 
> 标签：c#

我有这个用 C# 编写的应用程序，即使代码强制指定大小，它也不会进一步最大化，窗口不跟随它。其他 Windows 应用程序遵循我指定的大小，但这个没有（一直在计算可能出错的地方，但它似乎是一个错误）。感谢stackoverflow

![在此处输入图像描述](../Images/5b286a850780536ea8105bb8e2c2b2a6.png)

如您所见，正在运行的窗口并未明确遵循代码的说明。显示的窗口应该比当前大小大得多。

# objective-c - IOS设备之间的Objective-C异步通信

> ID：13657954
> 
> 赞同：2
> 
> 时间：2012-12-01T09:01:28.547
> 
> 标签：objective-c, ios, xcode, asynchronous

有没有办法在 iPhone/IOS 设备之间执行异步通信？我一直在研究并认为 APN 可能会填补这一空白，但听起来我无法启动从 IOS 设备到另一个设备的 APN 推送，即使我可以也无法触发另一台设备上的“事件”只需根据我可以识别的 APN 推送。

对于不在 GameKit（即 wifi/蓝牙）范围内且不需要中间服务（城市飞艇、专用服务器等）的设备的 IOS 设备交互，是否有人有任何示例或一般建议，或者我需要第三个吗？方以触发和/或同步设备之间的这些交互？

抱歉，我没有任何代码或详细信息，因为这仍处于我的计划阶段。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T10:23:36.437

答案是：使用服务器端应用程序并让您的所有设备与该服务器通信。

如果您不想或无法托管应用程序，您可以使用基于 websocket 的云解决方案，例如[Pusher](http://pusher.com/)。然后，您可以订阅事件并发布带有数据的消息。

他们有一个 iOS 客户端库

[http://pusher.com/docs/client_libraries](http://pusher.com/docs/client_libraries)

PS：也看看[Parse](https://parse.com/)和[Stackmob](https://www.stackmob.com/)，我记得他们的路线图中有这种功能，但我不知道它是否可用..

希望这会有所帮助，文森特

# c++ - 在 C++ 中的向量/数组中存储不同类型的元素？

> ID：13657958
> 
> 赞同：0
> 
> 时间：2012-12-01T09:02:22.523
> 
> 标签：c++, interpreter, dynamic-languages, dynamic-typing

我正在尝试用 C++ 创建一个简单的动态语言解释器。我希望能够声明动态类型的数组，但我不确定如何将它们存储在 C++ 中的某个对象中。

在 Ruby/Python 中，我可以存储任何我想要的东西，但是在 C++ 中这样做的有效方法是什么？

（另外，如果有人有一个*简单*的开源词法分析器/解析器/解释器的链接，用于像 Ruby 这样的动态语言，我会很感激一个链接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:14:36.387

您将不得不根据您的语言语义推出一些自定义解决方案。例如，您可以使用`boost::any`来*存储*任何对象，但您将无法执行名称查找等操作。一些汇编程序的知识在这里很有用，因为您基本上是在模仿它。大多数人做的事情是这样的

```
struct Object {
    boost::any cppobject;
    std::unordered_map<std::string, std::function<void(boost::any&, std::vector<boost::any>&)> funcs;
};

std::vector<Object> stuff; 
```

当，在你的假设语言中，你有类似的东西

```
stuff[0].hi(); 
```

然后你可以把它转换成类似的东西

```
std::vector<boost::any> args;
// fill args
stuff.at(0).funcs["hi"](stuff.at(0).cppobject, args);
// now args holds the result 
```

很可能进一步优化这个方案，但不能进一步推广它，因为它已经是最通用的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:14:13.890

使用联合或动态分配通用基本类型的对象（并通过 dynamic_cast 或等效构造适当地向下转换它们）的替代方法是[boost::variant](http://www.boost.org/doc/libs/1_52_0/doc/html/variant.html)，它允许您编写如下代码：

```
typedef boost::variant<int, float, char, std::string> LangType;
std::vector<LangType> langObjects; 
```

如果您的设计允许这样的实现，那么它的优点是编译时安全，并且避免了使用堆、虚函数和多态向下转换所带来的任何惩罚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:04:54.287

动态语言存储通用对象的方式是通过指针，你可以在 C++ 中做同样的事情。存储指向您在 C++ 类中定义的通用“对象”的指针，这是一种有效的方法。

# openerp - 在 openERP 中留下审批层次结构

> ID：13657959
> 
> 赞同：2
> 
> 时间：2012-12-01T09:02:30.710
> 
> 标签：openerp

我是 openERP 新手，面临 HR 模块的问题。

我有这个结构

项目经理-团队负责人-开发人员

1.  团队负责人是开发人员的经理
2.  项目经理是团队负责人的经理。

因此，如果开发人员要求请假，则应将第一次请假请求发送给团队负责人（向团队负责人和项目经理发送邮件通知），一旦 TL 批准请假，然后自动将请求发送给项目经理进行二级审批。

在 openERP 6.1 中，除非且直到将 Team Leader 指定为不合适的 HR 经理，否则无法批准 Team Leader 的休假。

任何人有任何解决方案然后让我知道。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:02:49.437

选项1：

除了用户角色“配置”之外，我会隐藏所有管理员字段然后您可以建立正确的关系并根据您的需要触发工作流程。

选项 2：

xml 工作流程将由 def 处理。您可以覆盖它并在那里放置一个 if 语句。这将比上一个需要更长的时间。

如果您仍然需要帮助，请联系我

# javascript - AngularJS：基于 Google Maps API 的单元测试应用程序

> ID：13657965
> 
> 赞同：5
> 
> 时间：2012-12-01T09:03:17.420
> 
> 标签：javascript, google-maps, angularjs

我需要为大量使用 Google Maps API v3（计算距离、在地图中创建标记等）的 AngularJS 应用程序编写单元测试，并且我知道我应该以某种方式创建或模拟地图画布，以便我可以对使用 Google Maps 的函数进行单元测试API 并在该画布上创建标记，但我不知道该怎么做，而且我找不到任何关于如何基于 Google Maps API 对应用程序进行单元测试（最好使用 AngularJS/Jasmine）的好的教程/资源。

任何工作示例 - 即使是最简单的单元测试 - 将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:22:40.647

从您上面的评论看来，您可能需要以下信息（如果您不这样做，请忽略）：这是我必须给您的很多解释，如果我全部输入，这将相当于一本小说。因此，我只想给你链接很多文章，这些文章会比我向你解释每一篇文章做得更好。

Angular 是关于[依赖注入](http://docs.angularjs.org/guide/di)的。如果您正在进行任何单元测试，依赖注入*至关重要。*为了完整起见，我假设您不知道依赖注入是什么并提供一个快速解释（如果您已经知道，请原谅我）：依赖注入正在设计您的代码，以便可以通过“注入”任何外部依赖项争论。依赖项可以是它所在代码块之外的任何代码。这就是为什么在 Angular 中，您必须在控制器中包含 $scope，或者可能是 $http 或 $resource...，因为它们被*注入*到您的控制器中。在单元测试中，这允许您模拟这些对象并将它们传入，因此您可以以受控方式查看测试结果。

如果您要在控制器中使用一些外部代码（Google Maps API、Facebook API 等），您希望通过将其包装在[服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)中并将[其注入控制器来](http://docs.angularjs.org/guide/dev_guide.services.injecting_controllers)*注入*该代码。

此外，您可能希望为实际的地图片段[创建一个指令](http://docs.angularjs.org/guide/directive)，因为 DOM 操作（例如 Google Maps API 中的 new Map() 所做的）应该在指令中完成。然后你只需测试指令。有关测试指令的指导，我建议[在他们的 Github 存储库中查看 Angular 的指令测试作为示例](https://github.com/angular/angular.js/tree/master/test/ng/directive)。基本上你 $compile 指令，并测试操作它的结果。

# php - 在表中回显最大或最后一个更大的 id

> ID：13657972
> 
> 赞同：0
> 
> 时间：2012-12-01T09:04:44.723
> 
> 标签：php, mysqli

我想从表中获取最大 id。

如果我使用`mysqli_insert_id`，那么它会给出 0 值。请帮助或建议任何其他方法从表中获取最后/最大 id

```
$pre_id = $_POST['last_id'];
$sql = mysqli_query($db3->connection, "SELECT * FROM chat where  id=>_pre_id");
$id = mysqli_insert_id($db3->connection);
echo $id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:15:44.603

那是你想要的吗？

```
SELECT * FROM chat ORDER BY id DESC LIMIT 0,1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:17:50.430

试试这个查询

```
SELECT max(id) as maxid FROM chat 
```

# php - PHP - 在数组中使用标签而不是索引

> ID：13657978
> 
> 赞同：0
> 
> 时间：2012-12-01T09:04:55.410
> 
> 标签：php, mysql, sql

我正在使用类似这样的方法从数据库中获取一行

```
<?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
$row = mysql_fetch_row($result);

echo $row[0]; // 42
echo $row[1]; // the email value
?> 
```

此示例显示使用索引访问 $row，例如 $row[0]，但这是错误路径。我想像 $row['id'] 或 $row['email'] 那样做......这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T09:06:37.717

使用[`mysql_fetch_assoc`](http://php.net/manual/en/function.mysql-fetch-assoc.php)而不是 mysql_fetch_row：

```
$row = mysql_fetch_assoc($result); 
```

（这为您提供了“关联数组”，以便您可以按名称获取列。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:08:09.453

您可以使用`mysql_fetch_assoc()`而不是`mysql_fetch_row()`

# java - 任何 Javascript 都会阻止我的程序抓取此页面

> ID：13657982
> 
> 赞同：0
> 
> 时间：2012-12-01T09:06:08.190
> 
> 标签：java, javascript, html, web-crawler, jsoup

```
 Document doc = Jsoup.connect("http://www.utah.edu/").get();
    Elements lists = doc.select("ul");
    for (Element list: lists) {
        Elements li = list.select("li a");
        if (li.size() > 0) {
            ArrayList<String> anchors = new ArrayList<String>();
            for (Element e : li) {
                anchors.add(e.text());
            }
            System.out.println(anchors);
        }
    } 
```

我正在尝试从此[页面](http://www.utah.edu/)`ul`中获取标签呈现的所有 html 列表。但它失败了。我怀疑页面中有脚本阻止我的程序这样做。

**编辑**：为了让我的问题更简单，请考虑以下代码：

```
Document doc = Jsoup.connect("http://www.utah.edu/").get();
Elements lists = doc.select("ul");
System.out.println(lists.size()); 
```

输出：

```
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:03:13.743

一个可能的答案是，jsoup 发送的*User-Agent*标头使 utah.edu 认为它是机器人而不是浏览器。所以它返回其他页面内容。

在`org/jsoup/helper/HttpConnection.java`implemented`get()`中，默认情况下不发送*User-Agent*标头，除非另有说明。

因此，您需要使用`userAgent()`.

例如，伪造 Chrome：

```
String ua = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11";
Document doc = Jsoup.connect("http://www.utah.edu/").userAgent(ua).get(); 
```

# sql-server - MVC4 和 asp.net 教程不起作用

> ID：13657987
> 
> 赞同：1
> 
> 时间：2012-12-01T09:07:15.100
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-4

我在 mvc4 和数据库上关注了这个链接，但它对我不起作用。我不知道我是否遗漏了什么。我有 vs2010、MVC4 和 sql 2008（远程数据库）

[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-models-data-from-a-controller](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-models-data-from-a-controller)

如果我按照教程运行项目并测试我得到的数据库连接（我称之为视频）。现在，如果我不能按照 asp.net 网站上的教程进行操作，那么我真的担心 MVC 会很难使用。

自创建数据库以来，支持“videoDBContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 (http://go.microsoft.com/fwlink/?LinkId=238269)。

更新这里是代码

我刚刚做了一个类和连接字符串。对于远程数据库，我该怎么办？

```
public class video
{
    public int ID { get; set; }
    public string Title { get; set; }
    public DateTime ReleaseDate { get; set; }
    public string Genre { get; set; }
    public decimal Price { get; set; }
}

public class videoDBContext : DbContext
{
    public DbSet<video> videos { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:02:22.317

在 de global.asax.cs 中添加您的 Application_Start()

```
 Database.SetInitializer(new DropCreateDatabaseIfModelChanges<videoDBContext>()); 
```

[顺便提一句。类名（在 C# 中）应以大写字母开头。](http://msdn.microsoft.com/en-us/library/vstudio/ff926074.aspx)

# php - mysql_real_escape() 参数警告

> ID：13657989
> 
> 赞同：-3
> 
> 时间：2012-12-01T09:07:46.880
> 
> 标签：php, mysql

大家好，我正在创建自己的数据库类，但遇到了一个问题。这是我的数据库类

```
class Mysql {

    var $connect;

    function ConnectDB() {
        $this->connect = mysql_connect(SERVER, USER, PASS) or die(mysql_error());
        mysql_select_db(DB_NAME, $this->connect) or die(mysql_error());
    }

    function IsLogin() {
        if (isset($_SESSION['id']) && isset($_SESSION['rollno'])) {
            $id     = $_SESSION['id'];
            $rollno = $_SESSION['rollno'];
            $query  = "SELECT student_rollno FROM" . TABLE_USER . " WHERE student_email='$id'";
            $result = mysql_query($query, $this->connect);
            $row    = mysql_fetch_assoc($result);
            if (!$result || mysql_num_rows($query) < 1 || $row['student_rollno'] != $rollno) {
                return false;
            }
        }
        return true;
    }
}

;
$database = new Mysql; 
```

db 类由这两个和其他几个函数组成......该`IsLogin()`函数正在工作。问题是我已将其包含`class.page`在另一个脚本中，但是当我使用`mysql_real_escape_string($string, $database->connectDB());`它时说...

> 警告：mysql_real_escape_string() 期望参数 2 是资源，在第 25 行的 C:\xampp\htdocs\admin\input_validate.php 中给出 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:15:31.913

```
function ConnectDB() {
    $this->connect = mysql_connect(SERVER, USER, PASS) or die(mysql_error());
    mysql_select_db(DB_NAME, $this->connect) or die(mysql_error());
} 
```

应该是这样的：

```
function ConnectDB() {
    $this->connect = mysql_connect(SERVER, USER, PASS);
    if(!$this->connect){
        die(mysql_error());
    }
    $selectdb = mysql_select_db(DB_NAME, $this->connect);
    if(!$selectdb){
        die(mysql_error());
    }
    return $this->connect;
} 
```

基本上你缺少 return 语句，所以方法不返回 db 而是返回 null。

请考虑迁移到 mysqli 或 PDO，因为不再维护 mysql_*。

# java - Java邮政编码程序

> ID：13657991
> 
> 赞同：-1
> 
> 时间：2012-12-01T09:07:58.067
> 
> 标签：java, zipcode

我有一个家庭作业。我被要求制作一个从用户输入中获取邮政编码的程序。然后我将只使用第一个数字来确定位置。我的导师告诉我要使用的数据类型是 int。你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:10:03.310

您正在将字符与*整数*进行比较，因此目前您正在将它们与控制字符 U+0003 和 U+0004 进行比较 - 您希望将它们与代表数字的*字符进行比较：*

```
if (zipCode.charAt(0) <= '3')
...
if (zipCode.charAt(0) >= '4')
    if (zipCode.charAt(0) <= '6') 
```

（您也可以考虑使用 switch 语句......）

我不知道就邮政编码的含义而言这是否正确，但这是您的代码的直接问题。

# c# - @Ajax.BeginForm 请求/响应正常，但控制器不重定向

> ID：13657992
> 
> 赞同：1
> 
> 时间：2012-12-01T09:08:07.753
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-ajax

```
@using (Ajax.BeginForm("Login", "Account", "", 
            new AjaxOptions { HttpMethod = "POST" }, 
            new { id = "loginForm", name = "loginForm" }))
{
 ...
} 
```

此表单执行请求并收到响应 200 OK。调试我可以看到响应 html，但我没有被重定向。

如果我在不使用 html 的情况下手动执行此操作，则可以帮助我成功重定向到我需要的位置。

这是控制器：

```
//
    // POST: /Account/Login
    [HttpPost]        
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model)
    {
        MembershipProvider mp = Membership.Provider;
        bool isDigital = bool.Parse(Request.Form.GetValues("hasDigital")[0]);
        string certDBNumber;

        if (isDigital)
        {
            /*** Retira só o que enteressa do Certificado.Subject (CPF/CNPJ)*/
            string code = Request.Form.GetValues("code")[0];
            string[] dataArray = code.Split(',');
            string data = dataArray.Last();
            string[] numberArr = data.Split(':');
            string number = numberArr.Last();

            /*** Resgata chave do usuário no banco ***/
            using (tgpwebgedEntities context = new tgpwebgedEntities())
            {
                var userObj = from u in context.aspnet_Users 
                              where u.UserName == model.UserName 
                              select u.UserId;
                Guid userID = userObj.First();
                var obj = from u in context.sistema_UsersCertified 
                          where u.userID == userID select u.keyNumber;
                certDBNumber = obj.First();
            }

            //Verifica se usuário é credenciado
            if (number == certDBNumber) {
                FormsAuthentication.SetAuthCookie(model.UserName, false);
                return RedirectToAction("Index", "Home");                    
            }
        }//Login sem certificado digital
        else
        {
            if (ModelState.IsValid && 
                           mp.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, false);
                return RedirectToAction("Index", "Home");
            }
        }
        /*** Se chegou até aqui algo deu errado. Mostra denovo o form ***/
        ModelState.AddModelError("", "Username ou Password incorreto!.");
        return View(model);
    } 
```

为什么会有这种奇怪的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T09:25:55.463

由于这是一个 ajax 帖子，您无法重定向。一种选择是返回一个值，以便成功函数实现需要发生的重定向，然后发出

```
if( someReturnedFlag == true ){
 window.location = redirectionUrl;//http://www.stackoverflow.com
} 
```

或者，您可以制作重定向视图

重定向视图.cshtml

```
@{
 Layout = null;
}
<script type="text/javascript">
 window.location = "hardcodedurl";//or pass it in using @model
</script> 
```

然后从你的 ajax 帖子返回这个视图，它会重定向。

* * *

*编辑*

这比我预期的更受关注，所以我想我会用两个更完整的例子来改进这个答案。

* * *

**1：jQuery的ajax**

看法：

```
$.ajax({
        url: "@(Url.Action("TargetAction","TargetController"))",
        type: 'POST',
        data: $("#loginForm").serialize(),
        success: function (URL) {
         window.location = URL;
        }
}); 
```

控制器：

```
public class TargetController: Controller
[HttpPost]
public string TargetAction(ViewModel model)
{
 //use model (note that the serialized form was bound to the model)
 return "http://www.stackoverflow.com";
} 
```

* * *

**2：重定向视图.cshtml**

主要观点：

```
@{
 AjaxOptions ajaxOpts = new AjaxOptions
 {
    UpdateTargetId = "redirectWhenDone"
 };
}

@using (Ajax.BeginForm("TargetAction", ajaxOpts))
{
 ...
}
<div id="redirectWhenDone"></div> 
```

重定向视图.cshtml

```
@model string
@{
 Layout = null;
}
<script type="text/javascript">
 window.location = "@(Model)";
</script> 
```

控制器

```
[HttpPost]
public ActionResult TargetAction(ViewModel vm)
{
 //use ViewModel

 ...

 //it is important to use an object here for the string
 object url = "http://www.stackoverflow.com";
 //otherwise the View() method will consider the string a parent location and look
 //for the RedirectionView in the wrong place (basically using the wrong overload)
 return View("RedirectionView", url );
} 
```

# c# - 在c#中将两个一维数组组合成一个二维数组

> ID：13657994
> 
> 赞同：-2
> 
> 时间：2012-12-01T09:08:27.613
> 
> 标签：c#, arrays, multidimensional-array

我有两个一维数组。我想将这两个数组转换为单个二维数组。

我的代码是：

```
public Static void Main()
{
int[] arrayRow;
int[] arrayCol;
  for (int i = 0; i < row; i++)
  {
   for (int j = 0; j < column; j++)
     {
       int[,] myArray = new int[row,column];
       myArray[i,j] = arrayRow[i]; // not possible -- your suggestions           
     }
   }
for (int i = 0; i < row; i++)
  {
   for (int j = 0; j < column; j++)
     {
       Console.Write(myArray[i,j]);         
     }
   }
} 
```

我需要保存`arrayRow[]`并`arrayCol[]`在`myArray[,]`.

例如，

如果我们有`arrayRow[]={1,2,3}`然后`arrayCol[]={4,5,6}`myArray[,]={(1,4),(2,5),(3,6)}

注意：`arrayRow`和`arrayCol`可能有不同的长度。在这种情况下，没有对的元素应该存储在新的一维数组`result[]`中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T09:25:59.187

您的`arrayRow[]`and`arrayCol[]`将只是二维数组的两行（如果您不是指锯齿状的）。

所以将两个数组合并为一个的代码就是：

```
public static T[,] Union<T>(T[] first, T[] second) //where T : struct
{
    T[,] result = new T[2, Math.Max(first.Length, second.Length)];
    int firstArrayLength = first.Length * Marshal.SizeOf(typeof(T));
    Buffer.BlockCopy(first, 0, result, 0, firstArrayLength);
    Buffer.BlockCopy(second, 0, result, firstArrayLength, second.Length * Marshal.SizeOf(typeof(T)));
    return result;
} 
```

正如[已经提到](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/5d525b76-f5b6-4340-a899-c3c82570d2e1#4fd0199f-ca1a-40be-90b0-c5c31208e105)的那样，`BlockCopy`它比`for`循环更酷。

* * *

如果您**确实**意味着您需要一个锯齿状数组（如`int[][]`），那么解决方案将更加简单：

```
public static T[][] UnionJagged<T>(T[] first, T[] second)
{
    return new T[2][] { first, second };
} 
```

如果我们添加多个数组作为参数功能，这会变得更加简单：

```
public static T[][] UnionJagged<T>(params T[][] arrays)
{
    return arrays;
}

static void Main()
{
    int[] a = new int[] { 10, 2, 3 };
    int[] b = new int[] { -1, 2, -3 };
    int[] c = new int[] { 1, -2, 3 };
    int[][] jaggedThing = UnionJagged(a, b, c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:25:41.497

没有尝试过，我只是在猜测你想要完成什么，但它是：

```
int[] arrayRow;
int[] arrayCol;

int[,] myArray = new int[Math.Max(arrayRow.Length, arrayCol.Length), 2];

for (int i = 0; i < arrayRow.Length; i++)
  myArray[i, 0] = arrayRow[i];

for (int i = 0; i < arrayCol.Length; i++)
  myArray[i, 1] = arrayCol[i]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-28T23:18:29.510

更高性能/另一种方式：

```
public static void ConvertFlatArrayToMatrix(int[] array, int[,] matrix, int dimension) {
        for(int i = 0; i < array.Length; i++) {
            int r = Mathf.FloorToInt(i / dimension);
            int c = i % dimension;

            matrix[c,r] = array[i];
        }
    } 
```

这只会将结果推送到您传入的二维数组中。

请记住，我不是在这里检查长度或防止任何事情，这只是完成工作的概念和最低限度。

# com - 调试非托管回调问题

> ID：13657997
> 
> 赞同：1
> 
> 时间：2012-12-01T09:08:53.590
> 
> 标签：com, callback, reverse-engineering

在这里提前为问题的长度道歉。

我有一个封闭源代码和未记录的 COM 对象 - 一个非托管 DLL - 我正在尝试将其集成到用 C# 编写的 Windows 服务中。COM 对象封装了对服务需要与之交互的某些硬件的访问。

我无法获取该对象的接口文档或源代码。我所要做的就是对象本身、与 COM 对象交互的三个 [封闭源代码未记录] 客户端，以及大量特定领域的知识。

到目前为止，这是一个非常难以破解的难题——一个星期，而且还在继续。

我能够从注册表中获取对象的 CLSID——这允许我在服务中实例化它。

下一步是找到我需要使用的接口的 IID。我正在寻找的特定方法没有导出。我没有 PDB。似乎没有任何类型库信息，并且 OLE-COM 对象查看器拒绝打开 COM 对象。IDispatch 也没有实现，所以这是一个挖掘的问题。通过手动在二进制文件中搜索 GUID 并消除唯一和/或已知的 GUID，我最终成功地识别了两个 IID。在这一点上，我确信 IID 是正确的。

如果没有相应的方法信息，IID 显然是无用的。为此，我不得不求助于 IDA。将 GUID 的引用与我对硬件功能的了解和粗略的拆卸相关联，使我能够对接口的结构和用途做出一些有根据的猜测。

现在我正处于需要尝试使用接口与硬件交互的地步……这就是我卡住的地方。

从反汇编中，我知道我必须调用的第一个方法如下所示：

```
HRESULT __stdcall SetStateChangeCallback(LPVOID callback); 
```

回调签名看起来像这样：

```
HRESULT (__stdcall *callbackType)(LPVOID data1, LPVOID data2) 
```

这是我的服务代码：

```
[ComImport, System.Security.SuppressUnmanagedCodeSecurity,
 Guid(...),
 InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
private interface AccessInterface
{
  [PreserveSig]
  int SetStateChangeCallback(IntPtr callbackPtr);

  ...
}

[UnmanagedFunctionPointerAttribute(CallingConvention.StdCall)]
private delegate int OnStateChangeDelegate(IntPtr a, IntPtr b);

private int OnStateChange(IntPtr a, IntPtr b)
{
    Debug("***** State change triggered! *****");
}

private Guid _typeClsid = new Guid(...);
private Guid _interfaceIid = new Guid(...);
private object _comObj = null;
private AccessInterface _interface = null;
private OnStateChangeDelegate _stateChangeDelegate = null;
private IntPtr _functionPtr = IntPtr.Zero;

private void InitHardware()
{
    Type t = Type.GetTypeFromCLSID(_typeClsid);
    _comObj = Activator.CreateInstance(t);
    if (_comObj == null)
    {
        throw new NullReferenceException();
    }
    _interface = _comObj as AccessInterface;
    if (_interface == null)
    {
        throw new NullReferenceException();
    }
    _stateChangeDelegate = new OnStateChangeDelegate(OnStateChange);
    _functionPtr = Marshal.GetFunctionPointerForDelegate(_stateChangeDelegate);
    int hr = _interface.SetStateChangeCallBack(_functionPtr);
    // hr (HRESULT) == 0, indicating success
} 
```

现在，我可以成功运行此代码，但前提是我将 IntPtr.Zero 传递给 SetStateChangeCallBack()。如果我传递一个真实的引用，服务会在调用 SetStateChangeCallBack() 后的几秒钟内崩溃 - 大概是当 COM 对象第一次尝试调用回调时 - 异常代码为 0xc0000005。

故障偏移是一致的。在 IDA 和之前生成的反汇编的帮助下，我能够确定问题发生的区域：

```
06B04EF7 loc_6B04EF7:                            ; CODE XREF: 06B04F49j
06B04EF7 lea     eax, [esp+0Ch]
06B04EFB push    eax
06B04EFC mov     ecx, ebx
06B04EFE call    near ptr unk_6B06660
06B04F03 test    eax, eax
06B04F05 jl      short loc_6B04F4B
06B04F07 mov     esi, [esp+0Ch]
06B04F0B test    esi, esi
06B04F0D jz      short loc_6B04F45
06B04F0F push    36h
06B04F11 lea     ecx, [esp+18h]
06B04F15 push    0
06B04F17 push    ecx
06B04F18 call    near ptr unk_6B0F960
06B04F1D mov     edx, [esp+1Ch]
06B04F21 push    edx
06B04F22 lea     eax, [esp+24h]
06B04F26 push    esi
06B04F27 push    eax
06B04F28 call    near ptr unk_6B0F9E0
06B04F2D push    esi
06B04F2E call    near ptr unk_6B0C8D2
06B04F33 mov     eax, [edi+4]
06B04F36 mov     ecx, [eax]
06B04F38 add     esp, 1Ch
06B04F3B lea     edx, [esp+14h]
06B04F3F push    edx
06B04F40 push    eax
06B04F41 mov     eax, [ecx]                      ; Crash here!
06B04F43 call    eax
06B04F45
06B04F45 loc_6B04F45:                            ; CODE XREF: 06B04F0Dj
06B04F45 cmp     dword ptr [edi+28h], 0
06B04F49 jnz     short loc_6B04EF7
06B04F4B
06B04F4B loc_6B04F4B:                            ; CODE XREF: 06B04F05j
06B04F4B pop     esi
06B04F4C pop     ebx
06B04F4D pop     edi
06B04F4E add     esp, 40h
06B04F51 retn 
```

崩溃发生在偏移量 0x06B04F41（即“mov eax，[ecx]”）。

反汇编中的相应伪代码函数（注意上面的汇编程序从 do 循环开始）：

```
void __thiscall sub_10004EE0(int this)
{
  int v1; // edi@1
  void *v2; // esi@4
  void *v3; // [sp+4h] [bp-40h]@3
  int v4; // [sp+8h] [bp-3Ch]@5
  char v5; // [sp+Ch] [bp-38h]@5

  v1 = this;
  if ( *(_DWORD *)(this + 4) )
  {
    if ( *(_DWORD *)(this + 40) )
    {
      do
      {
        if ( sub_10006660(v1 + 12, (int)&v3) < 0 )
          break;
        v2 = v3;
        if ( v3 )
        {
          memset(&v5, 0, 0x36u);
          unknown_libname_44(&v5, v2, v4);
          j_j__free(v2);
          // Crash on this statement!
          (*(void (__stdcall **)(_DWORD, char *))**(void (__stdcall ****)(_DWORD, _DWORD))(v1 + 4))(
            *(_DWORD *)(v1 + 4),
            &v5);
        }
      }
      while ( *(_DWORD *)(v1 + 40) );
    }
  }
} 
```

我确信我没有正确地将函数指针传递给 COM 对象，但是如果我能弄清楚如何正确地做到这一点，我就会感到很困惑。我试过[按绝望的顺序！]：

*   _functionPtr
*   _functionPtr.ToPointer() [作为 void* 参数]
*   _functionPtr.ToInt32() [作为 int 参数]
*   _stateChangeDelegate [作为 OnStateChangeDelegate 参数]
*   OnStateChange [作为 OnStateChangeDelegate 参数]
*   为委托使用 CallingConvention.Cdecl
*   向变量和函数添加静态限定符
*   更改回调的签名（包括删除返回值、将参数更改为整数、修改参数个数）
*   添加间接级别 [通过将 _functionPtr.ToInt32() 存储在用 Marshal.AllocCoTaskMem() 分配的内存块中]

在某些情况下，这些更改会触发不同的崩溃位置……例如 ntdll 或 06B04F36 中的崩溃。在大多数情况下，崩溃如上所述 - 在 06B04F41。

当我将 IDA Pro 附加到进程时，看起来我的回调地址在 06B04F40 处进入 EAX，并且 COM 对象尝试使用的地址与该地址有一个固定的偏移量。例如：

EAX（正确地址）= 000A1392 ECX（使用地址）= 0A1378B8

ECX 的最后 4 位始终为 78B8。

再说一次，我认为我没有正确传递委托或函数指针，但我不知道该怎么做。我想该服务在 WOW64 环境中运行的事实也可能会产生影响。

我的问题：您建议我做什么来 (1) 获取有关问题的更多信息和/或 (2) 解决问题？

请记住，除了 C# 服务的完整代码之外，我无权访问任何源代码。我正在使用 IDA Pro 的免费版本，所以我似乎无法做任何比反转伪代码或附加到进程并捕获崩溃异常更有用的事情。无法在调试模式下从 VS 运行服务，所以我真的只有在那一侧登录......并不是说我认为这会很好，因为问题是在我没有可编译的非托管代码中触发/易于阅读的来源。也许我错了？

真诚感谢您的建议！

* * *

编辑：

好吧，又过了一天，我想如果我不能从 C# 中成功，我会尝试创建一个最小的 C++ 测试应用程序来完成服务必须做的事情......我成功了！

```
IAccessInterface : public IUnknown
{
  public:
      virtual HRESULT STDMETHODCALLTYPE SetCallback( 
          /* [in] */ LPVOID pCallBack) = 0;

      virtual HRESULT STDMETHODCALLTYPE SetDevice(
          /* [in] */ char* context1,
          /* [in] */ LPVOID context2,
          /* [in] */ LPVOID context3) = 0;

      virtual HRESULT STDMETHODCALLTYPE CloseDevice() = 0;
};

IAccessInterface* pInterface;

int __stdcall CallbackImpl(char* context, char* data)
{
  printf("Callback succeeded!\r\n");
  return 0;
}

void CleanUp(bool deviceOpen)
{
  if (pInterface != NULL)
  {
    if (deviceOpen)
    {
      pInterface->SetCallback(NULL);
      pInterface->CloseDevice();
    }
    pInterface->Release();
    pInterface = NULL;
  }
  CoUninitialize();
}

int _tmain(int argc, _TCHAR* argv[])
{
  GUID objClsid = GUID();
  GUID interfaceIid = GUID();

  CoInitialize(NULL);

  int hr = CoCreateInstance(objClsid, 0, 1, interfaceIid, (void**)&pInterface);
  if (!pInterface || !SUCCEEDED(hr))
  {
    CleanUp(false);
    return 1;
  }

  LPVOID ptr = &callbackImpl;
  LPVOID ptr2 = &ptr;
  hr = pInterface->SetCallback(&ptr2);
  if (!SUCCEEDED(hr))
  {
    CleanUp(false);
    return 1;
  }

  char* context1 = "a_device_identifier";
  hr = pInterface->SetDevice(context1, NULL, NULL);
  if (!SUCCEEDED(hr))
  {
    CleanUp(false);
  }

  Sleep(30000);  // give time for device to initialise and trigger callbacks (testing only)

  // clean up
  CleanUp(true);
  return 0;
} 
```

所以现在我只需要找到一种方法来用等效的 C# 复制以下三行：

```
LPVOID ptr = &CallbackImpl;
LPVOID ptr2 = &ptr;
hr = pInterface->SetCallback(&ptr2); 
```

似乎没有必要（甚至可疑）需要如此多的间接级别。可能我还没有完全理解反汇编。在这一点上，最重要的是它有效。

因此，欢迎任何关于如何从 C# 实现这一目标的评论！

# java - 在当前时间停止秒表

> ID：13657999
> 
> 赞同：0
> 
> 时间：2012-12-01T09:09:10.780
> 
> 标签：java, stopwatch

我想要做的是在这个已经存在的代码上添加一个停止功能。我想我可以实现一个停止功能，如果我将一个字符串输入放到哪里，如果我输入 s 表示停止，程序将在当前时间停止。因此，当我按 s 时，它的作用与在没有 if 语句的情况下运行一样

```
public class Stopwatch {

private final long t;

public Stopwatch()
{

    t=System.currentTimeMillis();

}

public double elapsedTime()
{

    return (System.currentTimeMillis() - t) / 1000.0;

}

public double stopping(double newton, double time, double totnewt, double tottime)
{
    double timeNewton = newton;
    double timeMath = time;
    double totalNewton = totnewt;
    double totalMath = tottime;

    StdOut.println(totalNewton/totalMath);
    StdOut.println(timeNewton/timeMath);

    return time;
}

public static void main(String[] args)
{
    System.out.println("Enter N:");
    int N = StdIn.readInt();

    double totalMath = 0.0;
    Stopwatch swMath = new Stopwatch();

    for (int i = 0; i < N; i++)
        totalMath += Math.sqrt(i);

    double timeMath = swMath.elapsedTime();

    double totalNewton = 0.0;
    Stopwatch swNewton = new Stopwatch();

    for (int i = 0; i < N; i++)
    totalNewton += Newton.sqrt(i);
    double timeNewton = swNewton.elapsedTime();

    String s = StdIn.readString();
    if (s == "s")
    {

        swMath.stopping(timeNewton, timeMath, totalNewton, totalMath);
        swNewton.stopping(timeNewton, timeMath, totalNewton, totalMath);
    }

    StdOut.println(totalNewton/totalMath);
    StdOut.println(timeNewton/timeMath);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:11:00.483

您的代码中有一个基本的 java 错误。

您不能使用 == 运算符比较字符串。

这只适用于数字（例如，浮点数、整数、双精度等）

在 if 条件中使用 s.equals("s")

```
if (s.equals("s"))
{
    swMath.stopping(timeNewton, timeMath, totalNewton, totalMath);
    swNewton.stopping(timeNewton, timeMath, totalNewton, totalMath);
} 
```

equals 是一个比较字符串的字符串函数