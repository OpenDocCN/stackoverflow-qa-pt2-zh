# StackOverflow 问答 14335000-14335999

# git - 找出我的回购克隆最后一次合并（推送）到原点的时间

> ID：14335002
> 
> 赞同：0
> 
> 时间：2013-01-15T09:51:57.610
> 
> 标签：git

我在我的机器上本地有一个 git 存储库克隆，我已经使用了几个星期，并且已经将我的工作一次合并到主 repo（“origin”）中。我可以在原点的日志中找到我的最后一次合并（当然），但我想知道是否有“正确”（和自动化）的方法来做到这一点 - 找出这个克隆最后一次被推送到原点是什么时候？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:57:26.753

您需要找到本地分支和原始分支的共同祖先。这可以使用`git merge-base`：

```
git merge-base master origin/master 
```

它返回一个提交哈希。

**工作原理**：如果您使用良好的 git 工作流程，则需要在推送之前使用最新的远程更改（使用`merge`或）更新本地分支。`rebase`在此之后，您的本地分支将指向包含您的工作的提交，并且推送到远程只是意味着使远程分支指向您的提交。

结果，远程存储库将始终包含您推送时的提交。

`git push -f`但是，如果其他人（或您，从另一个头）强制推送（ ）并删除您的提交，这将不起作用。除非在极少数情况下，否则应避免强制推送共享存储库。

# entity-framework - EF CodeFirst 映射两个级联删除关系

> ID：14335003
> 
> 赞同：1
> 
> 时间：2013-01-15T09:52:01.107
> 
> 标签：entity-framework, ef-code-first, one-to-one, cascading-deletes

我在处理可选的一对一和一对多关系时遇到了一些问题。启用其中 1 个可以正常工作，但同时启用这两个会导致“可能的循环级联异常”。

我有一个“客户”，它有多个“交付地址”和一个“访问地址”。所以对于地址，我有一个可选的 DeliverAddressForCustomer 和一个可选的 VisitAddressForCustomer。

结果如下表：

```
CREATE TABLE [dbo].[Customer]
(
    [Id] INT NOT NULL PRIMARY KEY IDENTITY
    [Name] NVARCHAR(50) NOT NULL,
)

CREATE TABLE [dbo].[Address]
(
    [Id] INT NOT NULL PRIMARY KEY IDENTITY, 
    [Street] NVARCHAR(50) NOT NULL,
    [DeliverAddressForCustomerId] INT NULL, 
    [VisitAddressForCustomer] INT NULL, 
    CONSTRAINT [FK_Address_Customer_DeliverAddressForCustomerId] FOREIGN KEY ([DeliverAddressForCustomerId]) REFERENCES [Customer]([Id]), 
    CONSTRAINT [FK_Address_Customer_VisitAddressForCustomerId] FOREIGN KEY ([VisitAddressForCustomerId]) REFERENCES [Customer]([Id])
) 
```

这适用于以下映射：

```
 this.ToTable("Address");
        this.Property(t => t.Id).HasColumnName("Id");
        this.Property(t => t.Postcode).HasColumnName("Postcode");
        this.Property(t => t.DeliverAddressForCustomerId).HasColumnName("DeliverAddressForCustomerId");

        // Relationships
        this.HasOptional(t => t.DeliverAddressForCustomer)
            .WithMany(t => t.DeliverAddresses)
            .HasForeignKey(d => d.DeliverAddressForCustomerId)
            .WillCascadeOnDelete(true);

        this.HasOptional(a => a.VisitAddressForCustomer)
            .WithOptionalDependent(k => k.VisitAddress)
            .Map(x => x.MapKey("VisitAddressForCustomerId"))
            .WillCascadeOnDelete(true); 
```

现在，如果我将两个 'WillCascadeOnDelete' 都设置为 true，它将与现有数据库一起使用，但如果我想创建数据库则不行......我收到以下异常消息：

> 在表 'Address' 上引入 FOREIGN KEY 约束 'FK_dbo.Address_dbo.Address_Customer_VisitAddressForCustomerId' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

但这对我来说没有意义，因为如果我删除了 deliveryAddress 或 visitAddress，客户应该在此设置中保持不变。所以不应该有循环级联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:51:14.373

消息说“可能导致循环*或多个级联路径*”。这是重要的最后一部分。SQL Server 不允许在一个表中使用多个 FK 约束进行级联删除。

顺便说一句，请注意，级联删除并没有规定如果你删除一个 应该发生什么`Address`，但如果你删除一个`Customer`.

另请参阅：[SQL Server 2008 - 多个级联 FK - 我需要触发器吗？](https://stackoverflow.com/questions/5100525/sql-server-2008-multiple-cascading-fks-do-i-need-a-trigger)

# asp.net-mvc - MVC 中的 TypeScript

> ID：14335004
> 
> 赞同：1
> 
> 时间：2013-01-15T09:52:01.670
> 
> 标签：asp.net-mvc, typescript

我正在使用 MVC4 构建一个网站。最近我读到了关于 TypeScript 的文章。它看起来非常好，但是我在 MVC 网站上找不到任何用处。我错过了什么吗？你用它吗？在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:56:42.167

TypeScript 是 JavaScript 的预编译器。因此，您只能使用 TypeScript 作为 JavaScript 的替代品（服务器端，例如 Node.js，或客户端，即在浏览器中）。

由于您可能正在使用 C# 编写 MVC4 代码，因此相对于 MVC4，TypeScript 对您毫无用处。

关于客户端，它有些不同。

我想你需要知道的要点是 TypeScript 不是（还）只是服务器上的另一种语言，你可以与 C# 交换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:55:49.540

我发现它对于在客户端构建具有大量逻辑的大型应用程序非常有用。这些接口有助于避免一些错误。它编译为 javascript，因此您可以使用它而不是 javascript。如果你只是写几行，我不会打扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:15:11.623

您可以直接在脚本包或 HTML 中从 TS 文件链接到生成的 javascript 文件。如果要自动链接到多个 JS 文件，请使用 require JS。这将使您不必链接到许多 js 文件。

# mysql - 将 LIMMYSQL.dll 从 MySql 复制到 Ruby bin 文件夹时出现 Rails 服务器错误

> ID：14335006
> 
> 赞同：1
> 
> 时间：2013-01-15T09:52:08.310
> 
> 标签：mysql, ruby-on-rails, ruby

我从 MySql 复制 LIMMYSQL.dll 并将其放在 Ruby bin 文件夹中，然后启动 rails 服务器，我得到以下错误。请帮我

```
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require': 193: %1 is not a valid Win32
application.   - c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so (LoadError)
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:2:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2.rb:9:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `block in require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler.rb:122:in `require'
        from d:/merlin_demo_app/demo_app/config/application.rb:7:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T20:45:26.763

我终于解决了这个问题！

我在 RVM 下重新安装了 Ruby 和 Rails。我正在使用 Ruby 版本 1.9.2-p136。

在rvm下重新安装后，这个错误仍然存​​在。

最后解决它的魔术命令是：

# scons - scons：如何根据时间戳提取档案

> ID：14335012
> 
> 赞同：1
> 
> 时间：2013-01-15T09:52:22.913
> 
> 标签：scons

我的项目使用外部包。这些包在 tarball 中分发，并且在更新 tarball 时提取它们的内容。

例如，我使用升压。对应的外部包是 boost.tar.bz2。这个包包含头文件和库。我想做的是在更新 tarball 时使用 scons 自动提取此存档的内容。

我可以通过使用“时间戳文件”的 Makefile 来实现这一点。当 tarball 比时间戳文件更新时，会自动提取存档：

```
all: external-packages

external-packages: boost xml2

boost: .boost-timestamp

xml2: .xml2-timestamp

.boost-timestamp: boost.tar.bz2
    @echo updating boost externals
    @tar xjf boost.tar.bz2
    @touch .boost-timestamp

.xml2-timestamp: xml2.tar.bz2
    @echo updating xml2 externals
    @tar xjf xml2.tar.bz2
    @touch .xml2-timestamp

clean:
    rm -rf .*-timestamp boost xml2 
```

我怎样才能用 scons 达到同样的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:28:01.303

我认为你最好的选择是看看[untar builder](http://scons.org/wiki/UnTarBuilder)。

在您的 site_scons 文件夹中添加构建器函数/发射器后，您的 scons 文件可能如下所示：

```
env = Environment()
env..Append(BUILDERS = {'UnTar' : unTarBuilder})

external_package = "packages/boost.tar.bz2"
archive = env.UnTar(source=external_package) 
```

但是，您应该注意 untar 构建器不会将目录带入发射器，因此不会在`clean`

这个构建器的重点是*发射器*，它将确保 SCons 知道它可以创建标头，因此只要有某些东西依赖于它们（有人包括它们），它就会在 tar 文件发生更改时启动 untar 构建器。

# iphone - 如何使用指向 Xcode 中其他 ViewController 的向下钻取表构建菜单

> ID：14335018
> 
> 赞同：0
> 
> 时间：2013-01-15T09:52:33.777
> 
> 标签：iphone, objective-c, xcode, drilldown

我是 Objective-C 的新手，我喜欢它，我正在为当地的消防员开发一个免费的应用程序。该应用程序并没有什么困难，但我的主菜单有一个大问题：我已经在我的应用程序的所有部分创建了一个表格内容，我正在尝试通过可以访问其他 ViewControllers 的方式实现向下钻取方法，但我真的不知道该怎么做，我搜索了很多，但我只找到了引用旧版本 Xcode 的零碎文档。我正在使用版本 4.5.2 和情节提要。

![在此处输入图像描述](../Images/7c20741855dfeb6d104f74bb67a98d3c.png)

这是菜单.h

```
 #import <UIKit/UIKit.h>

    @interface Menu : UITableViewController
    @property (nonatomic, retain) NSMutableArray *listaMenu; //questo sarà il mio array contentente le varie opzioni della tabella

    @end 
```

还有menu.m

```
#import "Menu.h"
#import "News.h"

@interface Menu ()

@end

@implementation Menu

@synthesize listaMenu; //creo i metodi getter e setter

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = @"Menu";

    //Elementi da visualizzare nella tabella
    listaMenu = [[NSMutableArray alloc] initWithObjects: @"News", @"Memebri", @"Calendario", @"Interventi", @"Galleria", @"Mezzi", @"Reclutamento",  nil];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //funzione in cui va inserito il numero di righe da visualizzare

    return [listaMenu count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = nil;

    cell =[tableView dequeueReusableCellWithIdentifier:@"PlistCell"];

    if(cell == nil){

        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"PlistCell"];
        [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    }

    cell.textLabel.text = [listaMenu objectAtIndex:indexPath.row];

    return cell;

}

// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath //Rende gli oggetti NON editabili
{
    // Return NO if you do not want the specified item to be editable.
    //return YES;
    return NO;

}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.

     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];

}

@end 
```

我希望我的问题得到很好的解释。

**非常感谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:12:45.367

您需要阅读`UISegue`- 这是处理从一个`UIViewController`控制器到另一个控制器的转换的对象。在 Interface Builder 中，您可以 Ctrl-Drag 在 a`UIButton`和所需的`UIViewController`. 这是segues最简单的用法。

如果您需要将数据传递到目标 UIViewController，那么您需要实现该`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`方法。在此方法中，您可以获得`segue.destinationViewController`然后发送您需要的任何数据。NB 目标视图控制器的视图尚未加载，因此如果您尝试`UIView`直接自定义 s，那么它们将不存在。尽管`[segue.destinationViewController view]`最好配置非 UI 属性并让视图控制器本身在`viewDidLoad`.

# ios - 如何制作可拉伸的自定义 UITablecell

> ID：14335019
> 
> 赞同：0
> 
> 时间：2013-01-15T09:52:36.010
> 
> 标签：ios, objective-c, xcode, uitableview, uiimageview

创建可拉伸的最佳方法是什么`UITableViewCell`？因此，例如，我想创建一个自定义`UITableViewCell`（我已经知道如何），但我现在不知道如何在图像周围创建自定义可拉伸边框

例如：

所以图像的高度大小不同（宽度相同）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:06:35.713

你需要使用`tableView:heightForRowAtIndexPath:`方法。它允许您为每一行设置高度。只需获取图像的高度并在`tableView:heightForRowAtIndexPath:`方法中返回它。

如果你想在上面的图片上做同样的事情，你还应该`UIImageView`在 Interface Builder 中设置边距并禁用行分隔符

# twitter-bootstrap - Bootstrap - 背景图像不起作用

> ID：14335032
> 
> 赞同：5
> 
> 时间：2013-01-15T09:53:02.807
> 
> 标签：twitter-bootstrap

我的 CSS 标记：

```
.rowbgi {
    background-image:url('img/gradient.png');
    background-color:#cccccc;
} 
```

我的 HTML 标记：

```
 <div class="span4 rowbgi">
      <img class="img-circle" data-src="holder.js/140x140">
      <h2>Heading</h2>
      <p>Stack Overflow</p>
      <p><a class="btn" href="#">View details </a></p>
    </div><!-- /.span4 --> 
```

我无法看到背景图像，但在背景中可以看到颜色。该图像在路径中可用。

有人可以告诉我我正在做的一些愚蠢的错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T16:07:32.150

没有人知道你在做什么，因为你没有展示它（例如使用 jsfiddle ;P），但我的第一个猜测是你有以下文件结构：

*   根目录中的 HTML 文件: `/index.html`,
*   css 目录中的 CSS 文件: `/css/style.css`,
*   中的图像`/img/gradient.png`。

现在，请注意从 HTML/CSS 链接的所有文件都有相对于它们的路径。因此，如果您将 CSS 保留在 中`/css`，那么 CSS 中的路径`img/xxx`将链接到`/css/img/xxx`. 如果我猜对了，这是您的情况，请将样式更改为：

```
background-image:url(/img/gradient.png); 
```

或者

```
background-image:url(../img/gradient.png); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T04:00:30.387

要使用 CSS 加载图像，您必须将图像文件保存在 CSS 文件夹中（如果使用外部样式表）。例如，如果您使用 url `image.jpg`，CSS 会在 CSS 文件夹中查找该文件。您的 CSS 标记告诉 CSS 在您的 CSS 文件夹内有一个名为的子文件`img`夹，但情况可能并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-14T11:57:44.137

将您的 png 文件转换为 jpg 并在 html 代码中打开 body 标记后粘贴同一行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-04T21:05:13.087

我也尝试使用图像路径格式，但图像根本没有出现。

但是当我将图像上传到我的服务器时，我假设这将适用于任何图像托管平台，如 Imgur，并使用完整路径，它可以工作。

所以，而不是使用：

```
background-image: url('img/gradient.png'); 
```

做：

```
background-image: url('https://example.com/img/gradient.png'); 
```

希望这可以帮助某人！

# c++ - 程序崩溃 - 如何读取 appcompat.txt？

> ID：14335034
> 
> 赞同：4
> 
> 时间：2013-01-15T09:53:10.827
> 
> 标签：c++, windows, visual-studio-2010, windows-7, crash-dumps

在我正在调试的程序崩溃后，我的 Temp 目录中留下了堆转储 *.mdmp 文件和 appcompat.txt。我了解 appcompat.txt 是一份错误报告。**有它的格式说明吗？**

我的 appcompat.txt 列出了许多 DLL。假设崩溃的原因可能仅来自列出的 DLL 之一，我是否正确？**我可以将调试工作限制在 appcompat.txt 中列出的 DLL 上吗？**

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:55:47.387

minidump 文件为诊断崩溃提供了更多信息：

*   安装[适用于 Windows 的调试工具](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDIQFjAA&url=http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx&ei=tF31UNSvL8qf0QWVwIDACw&usg=AFQjCNEA-iDfUSIoJxXKZtU1f3s3cIAaXA&sig2=_frzbkxNC-wxEE8RgLUrFA&bvm=bv.41018144,d.d2k)（如果您还没有的话）。
*   将符号路径变量设置`_NT_SYMBOL_PATH`为指向[Microsoft 符号服务器](http://support.microsoft.com/kb/311503)
*   运行`Windbg`并`File -> Open Crash Dump`找到您的`.dmp`or`.mdmp`文件
*   键入`!analyze -v`。

这将尝试隔离崩溃的位置。请注意，仅仅因为在特定 dll 中发生崩溃并不意味着错误所在的位置 - 这可能是因为从您的应用程序代码中传入了无效参数。分析应该有希望向您展示一个有意义的堆栈和一个错误代码，这应该有助于找出崩溃的实际原因。

# php - 文件附件和从文件中读取数据

> ID：14335035
> 
> 赞同：0
> 
> 时间：2013-01-15T09:53:10.393
> 
> 标签：php, file-upload

我有一个文件上传按钮和一个提交按钮。我想当我从这个文件上传上传一个 excel 文件时，应该读取并打印那个 excel 文件的数据。excel文件包含-名称-Dob-编号-

我正在使用这个 html 代码-

```
<html>
<body>
<form name="form" method="post">
<input type="file" name="cir" /><br />
<input type="submit" name="submit" value="submit" />
</form>
</body>
</html> 
```

什么是用于从 excel 文件打印数据的 php 代码，即 Name- Dob- Number-

# jsp - 使用ajax时在jsp中分页

> ID：14335036
> 
> 赞同：0
> 
> 时间：2013-01-15T09:53:12.503
> 
> 标签：jsp, jquery

我有一个 jsp 页面，我在其中放置了一个下拉列表，在选择任何客户端后，我正在以表格形式填充与该客户端相关的详细信息。我通过该页面上的 ajax 获得多行，现在我想放置下一个和前进按钮以添加分页以显示每页 10 行，例如，如果我得到 20 行，那么它应该分两页而不是全部 20 行. 这东西怎么做？有人有任何示例代码要分享吗？有什么想法可以分享吗？PS：我使用 sybase 作为数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:12:38.297

是否仍要从服务中检索全套数据并在浏览器中添加分页？

然后你可以使用一个 JQuery 插件： http: [//archive.plugins.jquery.com/project/pagination](http://archive.plugins.jquery.com/project/pagination)

# javascript - 提交事件在未检查验证或显示确认的情况下触发

> ID：14335040
> 
> 赞同：2
> 
> 时间：2013-01-15T09:53:28.060
> 
> 标签：javascript, jquery, html

我的页面在没有检查验证或显示警报的情况下立即提交。我相信提交会提前触发，但我的问题是我有多个表单吗？

我的问题是如何让提交工作，因为它应该在检查验证的地方工作，如果成功，显示确认？

我不得不发布我的整个代码，以便您可以看到代码的顺序，因为代码的顺序可能是我的失败：

```
 <script type="text/javascript">
    $(document).ready(function () {

        $('#sessionsDrop').change(function () {

            $('#targetdiv').hide();

            if ($(this).val() !== '') {
                var text = $(this).find('option:selected').text();
                var split = text.split(' - ');
                $('#currentId').val($(this).find('option:selected').val());
                $('#currentAssessment').val(split[0]);
                $('#currentDate').val(split[1]);
                $('#currentTime').val(split[2]);
            } else {
                $('#currentAssessment,#currentDate,#currentTime,#currentId').val('');
            }
        });

    });

    function validation(e) {

        var isDataValid = true;

        var moduleTextO = document.getElementById("modulesDrop");

        var errModuleMsgO = document.getElementById("moduleAlert");

        if (moduleTextO.value == "") {
            $('#targetdiv').hide();
            $('#assessmentForm').hide();
            $('#choiceForm').hide();
            $('#submitchoicebtn').hide();
            errModuleMsgO.innerHTML = "Please Select a Module";
            isDataValid = false;
        } else {
            errModuleMsgO.innerHTML = "";
        }

        if (isDataValid === false) {
            if (e.preventDefault) {
                e.preventDefault();
                e.stopPropagation(); //VERY important
            }
            e.returnValue = false;
            e.cancelBubble = true;
        }

        return isDataValid;

    }

    function choicevalidation() {

        var isDataValid = true;

        var currentAssesO = document.getElementById("currentAssessment");

        var currentAssesMsgO = document.getElementById("currentAlert");

        currentAssesMsgO.innerHTML = "";

        if (currentAssesO.value == "") {
            $('#targetdiv').hide();
            currentAssesMsgO.innerHTML = "Please Select an Assessment to edit from the Assessment Drop Down Menu";
            isDataValid = false;
        } else {
            currentAssesMsgO.innerHTML = "";
        }
        return isDataValid;

    }

    function showConfirm() {

        var examInput = document.getElementById('curentAssessment').value;
        var dateInput = document.getElementById('currentDate').value;
        var timeInput = document.getElementById('currentTime').value;

        if (choicevalidation()) {

            var confirmMsg = confirm("Are you sure you want to take the following Assessment:" + "\n" + "Exam: " + examInput + "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);

            if (confirmMsg == true) {
                submitform();
            }
        }
    }

    $('#choiceForm').on('submit', showConfirm);
</script>
 <h1>TAKE AN ASSESSMENT</h1> //FORM 1
<form action="assessmentchoice.php" method="post" onsubmit="return validation(event);">
    <table>
        <tr>
            <th>Module:
                <select name="modules" id="modulesDrop">
                    <option value="">Please Select</option>
                    <option value="CHI2513_Systems Strategy_1">CHI2513 - Systems Strategy</option>
                    <option value="CHT2220_Interactive Systems_4">CHT2220 - Interactive Systems</option>
                </select>
            </th>
        </tr>
    </table>
    <p>
        <input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit"
        />
    </p>
    <div id="moduleAlert"></div>
    <div id="targetdiv"></div>
</form>//FORM 2
<div id='lt-container'>
    <form action='assessmentchoice.php' method='post' id='assessmentForm'>
        <p id='warnings'></p>
        <p><strong>Selected Module:</strong> CHI2513 - Systems Strategy
            <input type='hidden'
            value='1'>
        </p>
        <p><strong>Assessments:</strong> 
            <select name="session" id="sessionsDrop">
                <option value="">Please Select</option>
                <option value='28'>LDREW - 09-01-2013 - 09:00</option>
                <option value='29'>BQNYF - 10-01-2013 - 10:00</option>
                <option value='22' disabled>WDFRK - 17-01-2013 - 09:00</option>
                <option value='26' disabled>POKUB1 - 25-01-2013 - 15:00</option>
            </select>
        </p>
    </form>
</div>
<div id='rt-container'>//FORM 3 (This is where when submitted it should show confirmation)
    <form
    id='choiceForm' action='assessment.php' method='post'>
        <p><strong>Chosen Assessment:</strong>
        </p>
        <table>
            <tr>
                <th></th>
                <td>
                    <input type='hidden' id='currentId' name='Idcurrent' readonly='readonly'
                    value='' />
                </td>
            </tr>
            <tr>
                <th>Assessment:</th>
                <td>
                    <input type='text' id='currentAssessment' name='Assessmentcurrent' readonly='readonly'
                    value='' />
                </td>
            </tr>
            <tr>
                <th>Date:</th>
                <td>
                    <input type='text' id='currentDate' name='Datecurrent' readonly='readonly'
                    value='' />
                </td>
            </tr>
            <tr>
                <th>Start Time:</th>
                <td>
                    <input type='text' id='currentTime' name='Timecurrent' readonly='readonly'
                    value='' />
                </td>
            </tr>
        </table>
        <div id='currentAlert'></div>
        <p id='submitchoicebtn'>
            <button id='choiceSubmit'>Choose Assessment</button>
        </p>
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:02:14.297

这是一个[演示](http://jsfiddle.net/algorhythm/48maR/1/)

尝试更改以下行：

```
function showConfirm() { /* your existing code */ } 
```

进入

```
function showConfirm(e) {
    e.preventDefault();

    /* your existing code */

    return false;
} 
```

您是否已经尝试过：

```
function showConfirm(e) {
    e.preventDefault();

    var examInput = document.getElementById('curentAssessment').value;
    var dateInput = document.getElementById('currentDate').value;
    var timeInput = document.getElementById('currentTime').value;

    if (choicevalidation()) {

        return confirm("Are you sure you want to take the following Assessment:" + "\n" + "Exam: " + examInput + "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);
    }
    return false;
}

$('#choiceSubmit').on('click', function(e) {
    if (showConfirm(e)) {
        $('#choiceForm').submit();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:57:41.873

您的表单没有嵌套，所以不应该是因为有多个。

尝试删除`validation`函数中的所有代码，使其仅返回 false：

```
function validation(e) {
  return false;
} 
```

如果这可行，您就会知道问题出在 JavaScript 而不是 HTML。从那里您可以添加越来越多的功能，直到您发现导致问题的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:24:06.083

我认为这条线`if ($(this).val() !== '') {`应该是这样的`if ($(this).val() != '') {`

也如另一个答案中所述，添加以下内容：`e.preventDefault();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:49:47.157

我会使用以下代码

```
$('#choiceSubmit').click(function(e) {
    e.preventDefault();
    var x = 0;
    if (showConfirm(e)) {
        $('#choiceForm').submit();
    }
}); 
```

您是否使用过萤火虫或检查器（chrome/ie）并逐步浏览了 javascript？在上述情况下，我会在`e.preventDefault()`方法中添加一个断点。如果遇到这个问题，那么问题出在 javascript 中。如果没有，那么 javascript 甚至没有绑定到提交按钮。

# jquery - reCaptcha的jquery验证

> ID：14335041
> 
> 赞同：0
> 
> 时间：2013-01-15T09:53:32.963
> 
> 标签：jquery, joomla, recaptcha

我在我的自定义组件中使用 joomla 中的默认 reCaptcha 插件。我在布局页面中添加了以下代码：

```
<?php
JPluginHelper::importPlugin('captcha');
$dispatcher = JDispatcher::getInstance();
$dispatcher->trigger('onInit','dynamic_recaptcha_1'); 
```

和 ...........................

```
<form ....................>
...............
<div id="dynamic_recaptcha_1"></div>
</form> 
```

我的 jquery 验证看起来像这样：

```
rules: {
dynamic_recaptcha_1: {
            required: true
        }
},
messages: {
                dynamic_recaptcha_1: {
              required: "Please enter the captcha value"
        }
} 
```

验证不会发生，我的意思是使用 jquery。我可以知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:49:11.293

我自己解决了这个问题。字段 id 不同，而不是**dynamic_recaptcha_1**。这是**recaptcha_response_field**

# regex - powershell -replace 只替换最后一个匹配

> ID：14335046
> 
> 赞同：0
> 
> 时间：2013-01-15T09:53:50.700
> 
> 标签：regex, powershell, replace

我需要这个正则表达式的帮助。我得到一个如下所示的字符串。我想要类似的东西

服务器名称：AdminServer RUNNING
服务器名称：ServicesServer1 RUNNING

```
$rv="xxx ServerName: AdminServer  RUNNING  xxxx ServerName: ServicesServer1  RUNNING xxx"
$rv -replace ".*(ServerName: [A-Za-z0-9]*.*[RUNNING|SHUTDOWN])",'$1'
ServerName: ServicesServer1  RUNNING xxx 
```

以我现在所拥有的，我只能得到最后一场比赛？

编辑：

```
$rv="xxx ServerName: AdminServer  RUNNING  xxxx ServerName: ServicesServer1  RUNNING 
$rv -replace ".*(ServerName: [A-Za-z0-9]*.*RUNNING|SHUTDOWN)",'$1' 
```

给

```
ServerName: ServicesServer1  RUNNING xxx 
```

不是

```
ServerName: AdminServer  RUNNING
ServerName: ServicesServer1  RUNNING 
```

EDIT2：原来我已经过度简化了。字符串看起来更像这样：

```
$rv='XXX rtification Authority - G3,OU=(c) 2008 GeoTrust Inc. - For authorized use only,O=GeoTrust Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.>
Successfully Connected to Node Manager.
ServerName: SasTTpcAdminServer

RUNNING

Successfully disconnected from Node Manager.
Connecting to Node Manager ...
Successfully Connected to Node Manager.
ServerName: XXXServicesServer1

RUNNING

Successfully disconnected from Node Manager.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:31:06.487

试试这个：

```
 [regex]::Matches($rv, "(ServerName: [A-Za-z0-9]*.*?(?:RUNNING|SHUTDOWN))") | select -expa value 
```

或者

```
($rv | select-string -Pattern "(ServerName: [A-Za-z0-9]*.*?(?:RUNNING|SHUTDOWN))" -AllMatches ).matches | select -expa value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:04:40.923

虽然这不一定是理想的方法，但在解决一些问题后它会“起作用”：

1.  `[RUNNING|SHUTDOWN]`是字符类，不是改写。切换到`(?:RUNNING|SHUTDOWN)`

2.  `.*`s*太贪心*了。改为使用`.*?`。

最终的：

```
$rv -replace ".*?(ServerName: [A-Za-z0-9]*.*?(?:RUNNING|SHUTDOWN))", '$1' 
```

请注意它与最后一位不匹配..但是，可能有更好的解决方案（请注意，这使用了前面讨论的修复和我自己的一些调整）：

```
$r = [regex]::matches($rv,"(ServerName:.*?\w+.*?(?:RUNNING|SHUTDOWN))")
$r[0].Value
# -> ServerName: AdminServer  RUNNING 
```

然后我们可以将捕获组值映射成更简单的东西：

```
$r | % { $_.Value }
# -> 
# ServerName: AdminServer  RUNNING
# ServerName: ServicesServer1  RUNNING 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:28:15.387

试试这个：

```
$rv -replace '[\s\S]*?(ServerName: \w+)[\s\S]*?((RUNNING|STOPPED).*\n)[\s\S]*?(?(?=ServerName)[\s\S]*?|.*$)', '$1 $2' 
```

对我来说很好。:)

# javascript - 通过 jQuery datepicker 将日期转换为 unix 时间戳

> ID：14335048
> 
> 赞同：2
> 
> 时间：2013-01-15T09:53:58.340
> 
> 标签：javascript, jquery, datepicker

我想检查输入的出生日期是否超过 18 岁。为此，我想将输入的日期转换为 unix 时间戳。我尝试使用：

```
$.datepicker.formatDate('@', $('#dob').val()); 
```

但它提供了三个额外的零，并且还提前了一天。就像“10/10/1967”一样，它返回：-70369200000，而它应该返回：-70329600。我应该如何改变它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T09:57:09.233

要从日期选择器中获取 Unix 时间，请使用：

```
$(el).datepicker('getDate') / 1000; 
```

但是，您还应该注意，`Date`对象的语义对于“负”日期没有很好的定义。

# visual-studio-2012 - Visual Studio 2012 差异查看器在什么情况下允许编辑源文件

> ID：14335052
> 
> 赞同：20
> 
> 时间：2013-01-15T09:54:17.247
> 
> 标签：visual-studio-2012

我没有继续使用 Winmerge 作为我选择的工具，而是决定使用 Visual Studio 2012 Premium 中内置的差异查看器，特别是考虑到它使用提供智能感知和 resharper 集成的编辑窗口。

但是，我注意到在一种解决方案中，我将本地文件与最新文件进行了比较，并且允许我编辑源文件。但是，在另一个存在于同一 TFS 2010 服务器但不同项目的解决方案中，并已签出到单独的工作区，我不允许编辑本地文件。

根据[Visual Studio 2012 帮助](http://msdn.microsoft.com/en-us/library/bb385990.aspx#sectionToggle1)（“4。出现 Diff 窗口。您可以继续在此窗口中对文件进行更改。”）如果文件是本地的，我应该能够编辑该文件。我还需要成为 Contributors TFS 组的成员（我实际上也是 Project Administrators 组的成员。）

我也尝试过从命令行运行比较，比如“tf Difference filename.cs”，并比较了两个本地文件，但它们仍然是只读的。

有人可以确认我需要满足哪些条件才能在差异查看器中编辑本地文件吗？

**更新：**我不确定我是如何错过这个的，但它似乎是无法在我的任何解决方案中编辑的 .aspx 文件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T01:45:18.680

如果您单击“合并”按钮而不是“比较文件”，您会得到一个稍微不同的差异窗口，可以让您编辑本地文件。另请参阅有关 aspx 文件的答案中的编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T16:53:17.020

您只能在 Diff 查看器中编辑某些文件类型。示例：您可以编辑 .cs，但不能编辑 .sql 文件。

# blender - 如何为搅拌机创建新的逻辑块？

> ID：14335058
> 
> 赞同：1
> 
> 时间：2013-01-15T09:54:47.950
> 
> 标签：blender

我正在考虑制作一个新的逻辑砖来贡献或 10，但需要获得从哪里开始的模板/想法，我想先制作一个 6dof 执行器和传感器，可以根据旋转目标或距离限制等触发，以及可以将 6dof 目标移除或更改为新位置或对象和位置的执行器，

我正在制作一款开源 3d 益智游戏，游戏中的广告有限，但需要为我和社区制作一些逻辑积木......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T08:44:07.443

我知道没有关于 BGE 游戏逻辑的编码教程，但这里有一些代码指针：

游戏逻辑部分主要在：

[https://svn.blender.org/svnroot/bf-blender/trunk/blender/source/gameengine/GameLogic/](https://svn.blender.org/svnroot/bf-blender/trunk/blender/source/gameengine/GameLogic/)

您将看到传感器实现了 ISensor 接口。浏览几个不同的传感器，看看它们是如何工作的。Blender 支持 NDOF 设备，因此 NDOF 事件已经存在（由我们的 GHOST 层处理：[https](https://svn.blender.org/svnroot/bf-blender/trunk/blender/intern/ghost/intern/GHOST_NDOFManager.h) ://svn.blender.org/svnroot/bf-blender/trunk/blender/intern/ghost/intern/GHOST_NDOFManager.h ）。您可以创建一个新的管理器，如鼠标管理器（请参阅不同管理器的 gamelogic 目录）。

有了这些信息，您应该可以开始了。仔细阅读现有代码，您将能够找到所需的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T07:03:59.207

您可以使用此提交[鼠标执行器提交](https://developer.blender.org/D559)作为模板来添加新执行器。

# ios - 如何使 tableViewCell 不接收幻灯片事件？

> ID：14335060
> 
> 赞同：0
> 
> 时间：2013-01-15T09:54:51.763
> 
> 标签：ios, events, uitableview, slide, editing

我想要一个 superView 响应幻灯片事件，但似乎 tableViewCell 会首先捕获此事件并使单元格进入编辑模式。有人有解决方案吗？

我使用 UITableViewController 作为 childViewController，我希望 parentViewController 响应幻灯片事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:27:15.107

我之前在 UITableViewCell 中添加了一个透明的 UIButton，它在 UITableViewCell 接收到触摸事件之前捕获了触摸事件，因此它也可能适用于滑动。只需将 UISwipeGesture 添加到按钮子视图即可调用您的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:23:10.000

如果您根本不希望表格视图单元格响应滑动，则向视图添加滑动手势。

```
 UISwipeGestureRecognizer * guesture = [[UISwipeGestureRecognizer alloc]initWithTarget: action:@selector()]; 
```

然后将其添加到您的视图中。

```
[self.view addGestureRecogniser:guesture];
[guesture release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:25:47.543

覆盖 tableView 委托方法

```
-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return  ([tableView isEditing]) ? UITableViewCellEditingStyleDelete : UITableViewCellEditingStyleNone;
} 
```

# c# - 使用搜索参数的自定义分页中的问题

> ID：14335067
> 
> 赞同：0
> 
> 时间：2013-01-15T09:55:11.053
> 
> 标签：c#, asp.net, .net

我有一个`web forms`只有一个 Web 表单的应用程序。作为 a 的一部分`custom paging`，我有`hyperlinks`一个网格视图下的每个索引页。这些超链接 url 位置指向同一页面，所需页面的索引号附加为`query string`.

```
string url = requestUrl;
int position = requestUrl.IndexOf('?');
if (position > 0)
{
         url = requestUrl.Substring(0, position);
}

string link = "<a  href='" + url + "?Index=[Index]&amp;Size=[Size]'><span class='page-numbers'>##Text##</span></a>"; 
```

每次单击特定页面的超链接时，将从数据库中检索数据。因此，我还需要将搜索参数传递给新索引的页面。我可以将它作为查询字符串传递。但挑战是在某些情况下参数内容长度可能超过查询字符串限制。

单击超链接时将搜索参数传递给新页面的最佳方法是什么？

注意：分页的简化示例可以参考[custom-paging-in-asp-net-web-application](https://codereview.stackexchange.com/questions/20510/custom-paging-in-asp-net-web-application)

注意：原则是不要使用超过 2000 个字符的 URL

**编辑**

根据答案，我使用的是 LinkBut​​tons 而不是 Hypelinks。 `LinkButton`可以做一个`Postback`。此外，我以分页逻辑位于`User Control`. 它不需要任何业务特定数据和搜索参数。这段代码可以在[https://codereview.stackexchange.com/questions/20510/custom-paging-in-asp-net-web-application看到](https://codereview.stackexchange.com/questions/20510/custom-paging-in-asp-net-web-application)

**参考文献**：

1.  [URL 的最大长度是多少？](http://www.boutell.com/newfaq/misc/urllength.html)
2.  [QueryString / GET / URL 参数的限制是什么](https://stackoverflow.com/questions/3091485/what-is-the-limit-on-querystring-get-url-parameters)
3.  [使用 ASP.NET GridView 自定义分页](http://www.codeproject.com/Articles/410733/Custom-paging-with-ASP-NET-GridView)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:35:55.837

由于您想导航到*同一页面*并只传递一些参数 - 而不是使用常规超链接，请使用**[LinkBut​​ton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)**它将在服务器端处理请求并刷新数据。

无论你想传递什么参数——你都可以放在**[隐藏字段](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx)**中。

使用此解决方案，您拥有`no need to use URLs`并且数据被**POST** -ed 回服务器（而不是**GET**方法，正如您所提到的，它有其局限性）

例如，在您的 aspx 页面中：

```
<asp:LinkButton runat="server" ID="lbNextPage" onclick="lbNextPage_Click" />
<asp:HiddenField runat="server" ID="hdnData" /> 
```

然后在你的代码后面：

```
protected void lbNextPage_Click(object sender, EventArgs e)
{
        string data = hdnData.Value;

        // Refresh data based on data
        GridView1.DataSource = <NEW DATATABLE>;
        GridView1.DataBind();
} 
```

当然，您可以使用要传递给超链接的任何参数来填充 hdnData。

# javascript - div 样式未定义 (Javascript)

> ID：14335071
> 
> 赞同：9
> 
> 时间：2013-01-15T09:55:26.260
> 
> 标签：javascript, html, styles

我在stackoverflow中找到了这个脚本。

```
 function showhide(id){
        if (document.getElementById) {
          var divid = document.getElementById(id);
          var divs = document.getElementsByClassName("hideable");
          for(var div in divs) {
             div.style.display = "none";
          }
          divid.style.display = "block";
        } 
        return false;
       }

<a href="#" onclick="showhide('features');" >features</a>
<a href="#" onclick="showhide('design');"  >design</a>
<a href="#" onclick="showhide('create');" >create</a>

<div class="hideable" id="features">Div 1</div>
<div class="hideable" id="design">Div 2</div>
<div class="hideable" id="create">Div 3</div> 
```

但它说， div.style 未定义。为什么？:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T10:01:42.883

你不应该为此使用 for-in 循环。

```
document.getElementsByClassName('someClass') 
```

返回一个[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，它不继承自`Array.prototype`，但在某些方面是相似的。就像名字所说的，它是一个节点列表。这意味着它有一个`length`属性，并且只能使用以下方式访问：

```
var myElements = document.getElementsByClassName('yourClass');
for (var i = 0, ii = myElements.length; i < ii; i++) {
    console.dir(myElements[i].style);
}; 
```

这里是你应该如何真正隐藏一个元素。

```
/**
 * Shows or hides an element from the page. Hiding the element is done by
 * setting the display property to "none", removing the element from the
 * rendering hierarchy so it takes up no space. To show the element, the default
 * inherited display property is restored (defined either in stylesheets or by
 * the browser's default style rules.)
 *
 * Caveat 1: if the inherited display property for the element is set to "none"
 * by the stylesheets, that is the property that will be restored by a call to
 * showElement(), effectively toggling the display between "none" and "none".
 *
 * Caveat 2: if the element display style is set inline (by setting either
 * element.style.display or a style attribute in the HTML), a call to
 * showElement will clear that setting and defer to the inherited style in the
 * stylesheet.
 * @param {Element} el Element to show or hide.
 * @param {*} display True to render the element in its default style,
 * false to disable rendering the element.
 */
var showElement = function(el, display) {
  el.style.display = display ? '' : 'none';
};

var myElement = document.getElementById('someID');
showElement(myElement, false);// it should now be hidden. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T09:58:36.807

```
for(var i = 0; i < divs.length; i++) {
         divs[i].style.display = "none";
      } 
```

编辑：for in 循环用于循环对象属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T09:59:29.787

代替

```
for(var div in divs) { 
```

和

```
for(var i=0; i<divs.length;i++) {
   var div = divs[i]; 
```

`divs`，[getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)的结果，实际上不是一个数组，而是一个 NodeList，一个类似数组的对象，您正在迭代它的属性，而不是它的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T20:21:39.617

在许多 webapps 不再支持 IE 的日子里，使用[`for ... of`循环](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)正是您当时所寻找的：

```
function showhide(id) {
  if (document.getElementById) {
    let divid = document.getElementById(id);
    let divs = document.getElementsByClassName("hideable");
    for (let div of divs) {
        div.style.display = "none";
    }
    divid.style.display = "block";
  }
  return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-19T19:27:21.697

在 javascript for(var div in divs) 中的行为不像 foreach。在这种情况下，'div' 是索引。所以元素应该是：divs[div]

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-15T09:58:00.997

确保`for-in`循环中的所有元素都是 DOM 元素。`for-in`用 a 过滤循环是一个好习惯`hasOwnProperty()`：

```
 for(var div in divs) {
           if (divs.hasOwnProperty(div)) {
               if (div && div.style) {
                   div.style.display = "none";
               }
           }
      } 
```

# android - 在 Nexus 4.2.1 上占用大量内存的应用程序

> ID：14335072
> 
> 赞同：1
> 
> 时间：2013-01-15T09:55:26.697
> 
> 标签：android, android-4.2-jelly-bean, google-nexus

在我的项目中，我使用一些可绘制对象来创建漂亮的 UI，但我遇到的一个奇怪问题是它在 Kindle Fire 上运行良好，2.3.4 版本正常并且仅占用 2.8397MB，但是当我在 nexus 4.2 中运行相同的应用程序时.1 设备占用 23.45678MB 到 30MB 并且运行速度非常慢，我认为问题出在可绘制对象上，因此为它们创建了 9 个补丁，但仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:23:50.330

在预蜂窝设备（如 2.3.4 Kindle Fire）上，位图存储在本机堆中，在分析 ddms 中的 dalvik 堆内存使用情况时不会**显示。**

*然而，这并不**意味着**它仍然不会计入堆限制。*

Honeycomb 和更高版本的设备将位图存储在 dalvik 堆中，这些位图将显示在 ddms 中。这应该可以解释为什么 Kindle Fire 的内存使用量要“少得多”。不是的，它只是看起来那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:44:04.650

`drawable`每个分辨率有不同的文件夹吗？如果是这样，这可能与您在不同文件夹中拥有的资源有关，因此您的 Nexus 上加载的可绘制对象比您的 kindle fire 上加载的要大得多（kindle fire 的分辨率为 1024x600，而 Nexus 7分辨率为 1280x800）

# java - 命名空间未绑定问题

> ID：14335074
> 
> 赞同：0
> 
> 时间：2013-01-15T09:55:35.620
> 
> 标签：java, xml, spring

我是 Spring Integration 和 XML 的新手。我创建了以下配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:si="http://www.springframework.org/schema/integration"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="

http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/integration
http://www.springframework.org/schema/integration/spring-integration-2.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="com.springProject.app"/>
<int:channel id="input"/>
<int:channel id="output">
    <int:queue capacity="10"/>
</int:channel>

<int:service-activator input-channel="input"
                       output-channel="output"
                       ref="messageHandler"/>
</beans> 
```

但是 IDE 给了我错误，告诉我“命名空间 'int' 未绑定”。有谁知道错误可能在哪里？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:57:16.037

当前集成 xmlns 绑定到前缀 si，将其更改为 int。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:int="http://www.springframework.org/schema/integration"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation=" 
```

**注意第四行的变化**

`int`或者，您可以更改所有以to为前缀的标签`si`，例如：

```
<si:channel id="input"/>
<si:channel id="output">
    <si:queue capacity="10"/>
</si:channel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T06:07:28.070

在 beans 标签 *xmlns:mvc="http://www.springframework.org/schema/mvc"*中添加下一个文本 ，并保存 xml 文件。

# gwt - 如何使用 GWT 创建反弹效果？

> ID：14335080
> 
> 赞同：1
> 
> 时间：2013-01-15T09:55:47.393
> 
> 标签：gwt

我知道许多使用 jQuery、jQueryUi 等向图像或 Div 添加反弹效果的方法。但是它有一种典型的 GWT 方式来向元素添加反弹效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:24:57.310

[GWT-FX](http://code.google.com/p/gwt-fx/)是一个 GWT 的效果库，它包含一些您可以使用的预构建[过渡效果。](http://code.google.com/p/gwt-fx/wiki/BasicUserGuide#Transitioning_Effects)

您还可以使用`jQuery`或`jQueryUi`在您的 GWT 应用程序中使用 JSNI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:14:06.710

出色地！！[我使用CSS3 动画](http://www.the-art-of-web.com/css/bouncing-ball-animation/#.US8tzmfDuno)解决它

# permissions - Typo3：一个编辑器/不同页面上的不同内容类型

> ID：14335081
> 
> 赞同：0
> 
> 时间：2013-01-15T09:55:47.857
> 
> 标签：permissions, typo3, typoscript

我正在处理 TYPO3 页面。配置编辑器。
在配置编辑器时，出现了一些问题！
编辑器应该能够在某些页面上插入不同的内容元素。

编辑器应在以下页面上添加这些内容类型。

> 首页 -> “常规文本元素”
> 新闻 -> “文本和图像”

谁能告诉我如何设置用户和组权限？
问候蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:08:39.313

知道了：

内容类型：“常规文本元素”

```
[usergroup = 1]
TCEFORM.tt_content.CType {
    removeItems = header, textpic, image, bullets, table, uploads, multimedia, 
    mailform, search, login, menu, shortcut, html, script, splash, div, list
}
[GLOBAL] 
```

内容类型：“文本和图像”

```
[usergroup = 1]
TCEFORM.tt_content.CType {
    removeItems = header, text, image, bullets, table, uploads, multimedia, 
    mailform, search, login, menu, shortcut, html, script, splash, div, list
}
[GLOBAL] 
```

# xamarin.android - 如何为 MonoDroid 项目设置应用程序图标？

> ID：14335092
> 
> 赞同：0
> 
> 时间：2013-01-15T09:56:28.297
> 
> 标签：xamarin.android

我正在为 Android 制作一个应用程序，使用模板我看到一个名为 Resources/Drawable/Icon.png 的文件夹

但是，如果您使用 Eclipse 创建本机应用程序，您会看到可以为不同的屏幕尺寸配置几种尺寸的图标。

我们如何在 MonoDroid 中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:18:57.293

Mono for Android 上的 Resource 文件夹正在模仿 Android 上的资源文件夹。因此，为了为不同大小的屏幕创建资源，您只需根据要放入其中的图标大小创建文件夹。

您的文件夹结构最终可能如下所示：

```
|- Resources
    |- Drawable
        Icon.png
    |- Drawable-ldpi
        Icon.png
    |- Drawable-mdpi
        Icon.png
    |- Drawable-hdpi
        Icon.png
    |- Drawable-xhdpi
        Icon.png 
```

并根据文件夹密度拥有不同大小的 Icon.png 文件。同样的原则也适用于布局。[您可以在支持多种屏幕尺寸](http://developer.android.com/guide/practices/screens_support.html)的 Android 文档中阅读更多相关信息。

# php - PHP Regex 识别数组表示中的键

> ID：14335095
> 
> 赞同：0
> 
> 时间：2013-01-15T09:56:38.307
> 
> 标签：php, regex, variables

我有这个字符串`authors[0][system:id]`，我需要一个返回的正则表达式：

```
array('authors', '0', 'system:id') 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:09:47.690

只需使用 PHP 的`preg_split()`，它返回一个元素数组，与 RegEx 类似`explode()`但使用 RegEx。

`[`在or上拆分字符串，`]`并删除提供的数组的最后一个元素（这是一个空字符串），`$tokens`.

编辑：另外，用 删除第三个元素`array_splice($array, int $offset, int $lenth)`，因为这个项目也是一个空字符串。

正则表达式`/[\[\]]/`只是意味着匹配任何`[`或`]`字符

```
$string = "authors[0][system:id]";
$tokens = preg_split("/[\]\[]/", $string);
array_pop($tokens);
array_splice($tokens, 2, 1);
//rest of your code using $tokens 
```

这是`$tokens`运行后的格式：

```
Array ( [0] => authors [1] => 0 [2] => system:id ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:24:02.437

采用最简单的方法，我们将匹配三个单独的部分。因此，首先我们要查找未包含在括号中的标记：

```
[a-z]+ 
```

然后我们会寻找括号和两者之间的值：

```
\[[^\]]+\] 
```

然后我们将重复第二步。

您还需要添加捕获组`()`以提取所需的实际值。

所以当你把它们放在一起时，你会得到类似的东西：

```
([a-z]+)\[([^\]]+)\]\[([^\]]+)\] 
```

然后可以使用该表达式，`preg_match()`并且您想要的值将被提取到传递给第三个参数的引用数组中（如[this](http://codepad.viper-7.com/xEjqEU)）。但是你会注意到上面的表达式是一个非常难以阅读的标点符号集合，而且结果数组上有一个我们不想要的额外元素 -`preg_match()`将整个匹配的字符串放在第一个索引中输出数组。我们很接近，但这并不理想。

但是，正如@AlienHoboken 正确指出并*几乎*正确实现的那样，更简单的解决方案是根据括号的位置拆分字符串。首先让我们看一下我们需要的表达式（或者至少是我会使用的那个）：

```
(?:\[|\])+ 
```

这会查找*至少出现一次*or`[`并将`]`该块用作拆分的分隔符。这似乎正是我们所需要的，除非我们运行它时会发现我们有一个小问题：

```
array('authors', '0', 'system:id', '') 
```

那个多余的空字符串是从哪里来的？好吧，输入字符串的最后一个字符与您的分隔符表达式匹配，因此它被视为拆分位置 - 结果是一个空字符串被附加到结果中。

当基于正则表达式进行拆分时，这是一个很常见的问题，幸运的是 PCRE 知道这一点并提供了一种简单的方法来避免它：`PREG_SPLIT_NO_EMPTY`标志。

所以当我们这样做时：

```
$str = 'authors[0][system:id]';
$expr = '/(?:\[|\])+/';
$result = preg_split($expr, $str, -1, PREG_SPLIT_NO_EMPTY);

print_r($result); 
```

...你会看到你想要的结果。

[看到它工作](http://codepad.viper-7.com/K11Ln0)

# jquery - 使用 load() 和 onLoad()

> ID：14335098
> 
> 赞同：0
> 
> 时间：2013-01-15T09:56:48.387
> 
> 标签：jquery, onload

我有几页具有相同的页眉和页脚。我想使用 jQuery 加载函数作为 -

```
$("#header").load("template.html  #template_h1");   
$("#footer").load("template.html  #template_f1"); 
```

我的问题：

*   这些页面已经包含一个带有 onload 功能的脚本，它将一些 span 标签转换为新格式。
*   我的页眉和页脚确实使用了这个需要转换的跨度标签。
*   我无法更改包含的脚本。
*   我希望我的`load()`函数在 onload 函数之前运行。

我试图让他们进去，`$(document).ready(function()`但为时已晚。页眉\页脚中的跨度标签不会被转换。

我可以使用哪个事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:11:22.467

也许你可以保留 onload 函数的引用，做你的事情，然后运行原始的 onload 函数。如果您将它放在正文标记内或将其作为脚本包含在生成初始加载的脚本之后，它应该可以按预期工作。

```
var oldOnLoad = window.onload;

window.onload = function() {
   oldOnLoad();
} 
```

**编辑**为了澄清，您需要`oldOnLoad`在页眉和页脚下载后调用。

```
var oldOnLoad = window.onload;
var headerComplete = false, footerComplete = false;

var callOldOnLoad = function() {
    if (headerComplete && footerComplete) {
        oldOnLoad();
    }
}

window.onload = function() {
    $("#header").load("template.html  #template_h1", function() {
        headerComplete = true;
        callOldOnLoad();
    });   
   $("#footer").load("template.html  #template_f1", function() {
        footerComplete = true;
        callOldOnLoad();
    });
} 
```

尚未对此进行测试，但您可能会遇到 DOM 在调用之前没有更新的问题`oldOnLoad`。所以你可能需要把它放在一个 setTimeout 中。

```
setTimeout(function() {oldOnLoad();}, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:01:33.207

`.load()`是异步的，因此无论您多早进行调用，您都不能依赖及时加载的元素。您必须进行`.load()`同步（即阻止页面直到请求完成），但这是一个糟糕的主意。

这不是模板 IMO 的好方法。此外，在页面看起来正确之前需要完成两个请求，您可能会显着减慢页面加载速度。

如果可能，请从服务器端包含这些模板部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T10:01:02.877

`<body>`只需在 HTML 中定义`header`and`footer`元素之后将代码放入其中。

例子：

```
<body>
    <div id="header">Foo</div>

    <script type="text/javascript">
        $("#header").load("template.html  #template_h1");
    </script>

    <!-- Other Content -->

    <div id="footer">Bar</div>

    <script type="text/javascript">
        $("#footer").load("template.html  #template_f1");
    </script>
</body> 
```

此外，您可以将 CSS 包含在文件末尾以在代码之后加载 CSS。

# jquery - 如何使用 CSS3 无限地为我的图像设置动画

> ID：14335101
> 
> 赞同：4
> 
> 时间：2013-01-15T09:57:00.530
> 
> 标签：jquery, css, animation, transform, transition

我有一个具有以下样式的图像：

```
<img src="images/head-tails.gif" class="graphs" /> 
```

```
.graphs {
    -webkit-transition: all 2s ease;
    -moz-transition: all 2s ease;
    -o-transition: all 2s ease;
    transition: all 2s ease;
    /* -webkit-animation:animated 5s infinite; */
    /* -moz-animation:animated 5s infinite; */
    /* -o-animation:animated 5s infinite; */
    /* animation:animated 5s infinite; */
}
.graphs:hover {
    -webkit-transform: rotateY(360deg);
    -moz-transform: rotateY(360deg);
    -o-transform: rotateY(360deg);
    transform: rotateY(360deg);
} 
```

因此，当我将鼠标悬停在图像上时，它会像硬币一样旋转 360 度。我想做的是当页面加载时，图像将无限地执行此动画（旋转），而无需将鼠标悬停在我的鼠标上。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:15:45.237

您可以为此使用**关键帧动画**。像这样写：

```
.graphs {
    -webkit-animation-iteration-count:infinite;
    -webkit-animation-timing-function:linear;
    -webkit-animation-name:orbit;
    -webkit-animation-duration:2s;
    -moz-animation-iteration-count:infinite;
    -moz-animation-timing-function:linear;
    -moz-animation-name:orbit;
    -moz-animation-duration:2s;
}
@-webkit-keyframes orbit { 
from { -webkit-transform:rotateY(0deg) } 
to { -webkit-transform:rotateY(360deg) } 
}
@-moz-keyframes orbit { 
from { -moz-transform:rotateY(0deg) } 
to { -moz-transform:rotateY(360deg) } 
} 
```

检查这个[http://jsfiddle.net/ktPev/1/](http://jsfiddle.net/ktPev/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:19:49.097

改用关键帧动画。取消注释注释代码并将其更改`animation-timing-function`为`linear`. 像这样`animation: animated 5s linear infinite;`。然后定义关键帧动画，例如像这样（我在我的例子中使用了-webkit-）：

```
@-webkit-keyframes animated {
        to { -webkit-transform: rotateY(360deg); }
} 
```

它应该工作！

这是一个[演示](http://jsfiddle.net/ccryz/4/)

# php - CakePHP 无法将文件保存到数据库 - “字段列表”中的未知列“数组”

> ID：14335106
> 
> 赞同：0
> 
> 时间：2013-01-15T09:57:10.113
> 
> 标签：php, sql, cakephp, upload, blob

我找到[了一个教程](http://cakebaker.42dh.com/2006/04/15/file-upload-with-cakephp/)，展示了如何上传文件并将其作为 blob 存储在数据库中。这是我的代码`FilesController`：

```
$zip_file=$this->data['File']['zip'];
$fileData = fread(fopen($zip_file['tmp_name'], "r"), $zip_file['size']);

$this->data['File']['zip'] = $fileData;

$this->File->save($this->data); 
```

**执行时出现此错误：**

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Array' in 'field list'
SQL Query: INSERT INTO `my_db`.`files` (`task_id`, `zip`) VALUES (5, Array) 
```

显然这是问题所在，因为 $zip 是一个数组。如何解决？

* * *

**调试：**

`var_dump($this->data['File']);`：

```
array (size=2)
   'task_id' => string '5' (length=1)
   'zip' => 
       array (size=5)
          'name' => string 'Vaja1.zip' (length=9)
          'type' => string 'application/x-zip-compressed' (length=28)
          'tmp_name' => string 'C:\wamp\tmp\php50B9.tmp' (length=23)
          'error' => int 0
          'size' => int 847624 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:37:39.010

好的，找到了[答案](https://stackoverflow.com/a/10204896/1181261)- 简而言之：

我不得不替换每一个`$this->data`，`$this->request->data`现在它可以工作了。

# java - 带 inJustDecodeBounds=true 的 OutOfMemory 解码图像

> ID：14335110
> 
> 赞同：1
> 
> 时间：2013-01-15T09:57:19.030
> 
> 标签：java, android, image, android-camera, out-of-memory

我不断收到 OutOfMemory 异常，试图在我的 Android 应用程序中解码来自相机的图像。有很多问题可以解决这个问题，但我的情况特别奇怪，因为即使只是试图获得`options.inJustDecodeBounds=true`.

这是启动相机的代码：

```
protected void takePicture() {
    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    File image = new File(IMAGE_PATH, "camera.jpg");
    takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(image));
    startActivityForResult(takePictureIntent, 0);
} 
```

下面是触发异常的代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK ) { 
        String rawImageName = new String(IMAGE_PATH + "/camera.jpg");

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(rawImageName); // The exception is thrown here
            .
            .
            .
    }
} 
```

我尝试使用非常高的采样率对图像进行解码，但仍然遇到相同的异常：

```
options.inSampleSize = 20;
options.inJustDecodeBounds = false;
options.inPreferredConfig = Bitmap.Config.RGB_565;
Bitmap photo = BitmapFactory.decodeFile(rawImageName); // Again the exception 
```

除此之外，应用程序似乎运行正常并且有足够的可用内存。我可以在图库应用程序中正确打开图像。将图像移动到其他目录没有帮助。任何想法可能导致它？使用 解码时可能导致异常的原因是什么`inJustDecodeBounds = true`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T10:02:03.023

您需要将选项传递给解码调用：

```
BitmapFactory.decodeFile(rawImageName, options); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:16:47.403

```
BitmapFactory.Options o2 = new BitmapFactory.Options();
o2.inSampleSize = 4; // 1/4
o2.inPurgeable = true;
Bitmap b=BitmapFactory.decodeFile(imagePath,o2); 
```

试试这个。并在使用后调整图像大小并使位图对象为空。调用`System.gc();`它不会调用 gc，但它会给出提示。也不要制作很多位图对象。重复使用相同的位图对象并在使用后使其为空。

# javascript - 如何使用自定义插件测试 iPhone PhoneGap 应用

> ID：14335111
> 
> 赞同：0
> 
> 时间：2013-01-15T09:57:19.983
> 
> 标签：javascript, iphone, ios, objective-c, cordova

我有一个使用 PhoneGap、HTML5 和插件（Java 代码）制作的 Android 应用程序。现在，我打算聘请一名开发人员来编写 iOS 插件。但是，我不知道如何测试 iOS 应用程序。我可以找到 iPhone，但不想购买新的 Mac 进行测试。我有什么选择，你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:00:32.013

[http://www.vsnomad.com/documentation/](http://www.vsnomad.com/documentation/)你可以试试这个，但它要花钱。您还需要创建一个密钥来签署应用程序。

# amazon-ec2 - Ubuntu 12.0.4 上的 MapR - EC2 上的磁盘设置

> ID：14335118
> 
> 赞同：0
> 
> 时间：2013-01-15T09:57:46.023
> 
> 标签：amazon-ec2, ubuntu-12.04, mapr

[我在链接](http://www.mapr.com/doc/display/MapR12/Setting+Up+Disks+for+MapR)中看到为 MapR 安装设置磁盘的这些步骤

> 要确定磁盘或分区是否可供 MapR 使用：
> 
> 运行命令 sudo lsof 以确定是否有任何进程已在使用磁盘或分区。
> 
> 运行 sudo fuser 应该没有输出，表示没有 > 进程访问特定磁盘或分区。
> 
> 不应安装磁盘或分区，如通过 mount ? 命令的输出检查。
> 
> 磁盘或分区不应在 /etc/fstab 文件中有条目。
> 
> 磁盘或分区应该可以被标准 Linux 工具访问，例如 mkfs。您应该能够使用类似 sudo mkfs.ext3 的命令成功格式化分区，因为这类似于 MapR 在安装期间执行的操作。如果 mkfs 无法访问和格式化分区，那么 MapR 很可能会遇到同样的问题。

我在亚马逊 EC2 实例上实现这一目标时遇到问题。我尝试过的步骤

> 1.  我创建了一个大型 EC2 实例。
> 2.  创建了与该实例关联的卷的快照
> 3.  从上面创建的快照中创建了一个 500 GB 的新卷

我不确定如何卸载这个新卷并使其可用于 MapR。我还在 /etc/fstab 中看到了这个新卷的条目。

有人可以提供逐步的方法来创建满足上述 MapR 标准的磁盘或分区吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:28:58.910

MapR 在原始磁盘上运行，例如直接在 /dev/sdb 上。使用 disksetup 命令将磁盘添加到 MapR。有关如何使用的信息，请参阅[http://mapr.com/doc/display/MapR/disksetup 。](http://mapr.com/doc/display/MapR/disksetup)

# c++ - 如何在运行时增加结构数组大小

> ID：14335127
> 
> 赞同：0
> 
> 时间：2013-01-15T09:58:13.980
> 
> 标签：c++, c

我有一个结构，并且希望在 SendMessage 函数调用时增加数组大小

```
struct MQStruct {
    wchar_t *serviceName; 
    int durability; 
    int msgType; 
    int msgHeader; 
    wchar_t *msgId; 
    wchar_t *payload; 
    int payloadSize; 
    int ttl; 
    int priority;
}MQStructObj[1];

int SendMessage(wchar_t *serviceName, int durability, int msgType, int msgHeader, wchar_t *msgId, wchar_t *payload, int payloadSize, int ttl, int priority) {

//Want to add one more array object and also preserve data of previous
MQStructObj[MAX+1]

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:00:25.227

在 C 语言中，您必须自己处理动态内存（即使用 分配数组，然后在停止使用时`malloc()`小心调用等），并可能用于增加分配。`free()``realloc()`

在 C++ 中，问题已经为您解决了，并且您拥有`std::vector`. 您可以调用`push_back`动态添加元素。

# jenkins - 即使在下游项目中，我如何才能在 Jenkins Job 中获得入门用户？

> ID：14335128
> 
> 赞同：3
> 
> 时间：2013-01-15T09:58:18.283
> 
> 标签：jenkins, jenkins-plugins

在 jenkins job shell 中，我想获取在 shell 中启动构建的用户，我该怎么做？

如果此作业由用户启动，则[Build User Vars 插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+User+Vars+Plugin)运行良好，而它由上游作业等其他人触发，但它不起作用。like 的`$BUILD_USER`值为空。

在该页面中查看作者“Gavriil”的评论

> 这不是错误。只有在用户启动构建的情况下才能识别构建用户。如果构建是由其他原因触发的，则由计时器或上游作业结束

虽然在工作控制台中，但实际上我可以看到用户信息

```
Started by upstream project "arctifact2slave" build number 16
originally caused by: 
Started by upstream project "create-vm" build number 5
originally caused by: 
Started by user larrycai 
```

有什么建议么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T12:12:08.543

我不确定您到底想达到什么目标，但按照我的理解，您可以执行以下操作。

*   将字符串参数添加到您的根作业。影响它的 BUILD_USER 变量值。IE：`${BUILD_USER}`

*   然后只需在“构建后操作 -> 在其他项目上触发参数化构建”部分中传递当前构建参数。

后续作业将能够读取该变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T13:41:52.833

在大多数情况下，这个问题似乎已经得到解答，但我想为那些在他们的机器上拥有多个 Jenkins 副本和其他产品的人添加一些有用的东西：

我有一些链接到 SVN 的 Jenkins 服务器，它们做的事情类似于你正在尝试做的事情。我有脚本保存在主 Jenkins 触发后提交挂钩时初始化提交的人的用户名。这样，无论您使用哪个 Job、Jenkins 或其他服务器，您都可以访问该信息。

# java - getResource 不加载图像

> ID：14335129
> 
> 赞同：-2
> 
> 时间：2013-01-15T09:58:19.863
> 
> 标签：java, getresource

图像“Pic.jpg”最初位于`"C:\Users\qwerty\Documents\NetBeansProjects\SelfTestX\src\Java\image"`.

它没有用。我继续阅读`getResource()`，它实际上是从 .class 文件的存储位置读取的。

所以，我复制了相同的图像并将其粘贴在`"C:\Users\qwerty\Documents\NetBeansProjects\SelfTestX\build\classes\Java\image"`

它也没有用。

任何帮助是极大的赞赏。

我在下面列出了基本代码。希望它足够短。

```
 public void setImage() throws IOException{
            URL img=getClass().getResource("image/Penguins3.jpg");
            BufferedImage bi=ImageIO.read(img);
            int w=bi.getWidth();
            int h=bi.getHeight();
            int count=0;
            for(int i=0;i<3;i++){
                for(int j=0;j<3;j++){
                    BufferedImage wi=bi.getSubimage(i*w/3,j*h/3, w/3, h/3);
                    Image sc=bi.getScaledInstance(puzpiece.getWidth()/3,

                   puzpiece.getHeight()/3, Image.SCALE_AREA_AVERAGING);
                    setupImage(count++,sc);
                }
            }
            }

            private void setupImage(int a,Image wi) {
            button[a]=new JButton(new ImageIcon(wi));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:09:24.467

如果您的项目没有单独的资源文件夹，请将 Pic.jpg 放入当前类的 java 文件 (.java) 所在的同一文件夹中（或源树结构中的适当子文件夹）。IDE 应该在预期的地方复制它，在大多数情况下默认情况下。

复杂的项目已经为资源配置了文件夹，但我认为情况并非如此。

# ruby-on-rails - 如果 user_signed_in? 放一些文字 - 设计

> ID：14335130
> 
> 赞同：0
> 
> 时间：2013-01-15T09:58:32.903
> 
> 标签：ruby-on-rails, devise, puts

我有这个想法，我希望“登录”在网页的上角显示`user_signed_in?`为真，但当`user_signed_in?`为假时，我希望它只简单地输入“登录”。

`user_signed_in?`是 Devise 的辅助方法。我认为。

我如何真正做到这一点。我试过这个：

```
<%= if user_signed_in? => true puts "Logged In" else puts "Login" %>
<% end %>
<% end %> 
```

但这不起作用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:05:28.860

您应该多研究一下 Ruby 语法（例如，[这里）。](http://zetcode.com/lang/rubytutorial/flowcontrol/)试试这个：

```
<% if user_signed_in? %>
  Logged In
<% else %>
  <%= link_to 'Login', ... %> # substitute the ... for whatever path goes to login
<% end %> 
```

请注意，<%= 部分仅在嵌入的 ruby​​ 将实际返回将由浏览器呈现的内容（也称为转换为 html）时使用。由于您的示例中所有嵌入的 ruby​​ 都只是控制流，因此不要使用 =，因为浏览器实际上不会看到任何它。但是，link_to 方法返回一个链接，这是实际渲染的内容，所以我们需要 =。

另请注意，由于这是一个视图文件——因此基本上是一个增强的 html 文件——你不需要像“登录”这样的原始内容的“放置”。实际上， puts 不会将内容带到浏览器，而是将内容带到 Rails 应用程序中 STDOUT 引导的任何位置（记录器？不确定）

# android - 使用本地化在 Android 中显示 Unicode 字符

> ID：14335138
> 
> 赞同：0
> 
> 时间：2013-01-15T09:58:46.200
> 
> 标签：android, unicode, localization, unicode-string

我正在编写一个简单的应用程序，我想将一些 Unicode 字符显示为单词，例如卡纳达语/印地语/德语或此类语言而不是英语。

我尝试将相应的字体放在 assets 文件夹中并将其设置为 textview，如下所示：

```
 TextView tv=(TextView)findViewById(R.id.textView1);
  Typeface font= Typeface.createFromAsset(getAssets(), "some_font.TTF");
  tv.setTypeface(font); 
```

但它没有用。还提到了其他一些示例，但我无法在我的应用程序中复制它。

谁能告诉我如何实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:07:36.967

查看[此](https://android.stackexchange.com/questions/25359/how-to-make-an-android-device-to-display-complex-rendering-of-indic-characters)链接。它详细解释了如何在应用程序中使用不同的语言字体。

泰米尔语 unicode 字体有很多问题，因为英语只有 26 个字符，但在泰米尔语中我们有超过 365 个字符（对不起，我不完全了解错误的历史）。请参阅此[链接](http://irukaveandiyathutha.blogspot.in/2012/04/easy-to-enable-tamil-fonts-in-android.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:50:25.063

通过这个示例，我可以完成 50% 的任务

[http://android.programmerguru.com/android-localization-at-runtime/](http://android.programmerguru.com/android-localization-at-runtime/)

但我仍然怀疑，假设如果手机不支持印地语或泰米尔语，如何添加字体以便显示这些语言。

我知道生根手机并放置字体有一个解决方案，但除此之外还有什么方法可以实现这一点吗？

# emacs - Yasnippet：如何扩展“或”而不是“-or”

> ID：14335142
> 
> 赞同：2
> 
> 时间：2013-01-15T09:58:57.250
> 
> 标签：emacs, yasnippet

标题说，是否可以改变 yasnippets 的行为，以便无法在“-or”上展开，但只能在“[newline]or”或“[tab]or”上展开？

我想要这个，因为我试图在可以扩展时自动扩展我的 yasnippets，并且只有在我编写变量名时才会发生冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:52:37.033

我在这里得到了解决方案：http: [//ergoemacs.org/emacs/emacs_tip_yasnippet_expand_whole_hyphenated_word.html](http://ergoemacs.org/emacs/emacs_tip_yasnippet_expand_whole_hyphenated_word.html)

有 variable `(defvar yas-key-syntaxes (list "w" "w_" "w_." "w_.()" "^ ")..)`，它控制各种扩展。`"w"`表示`"-or" 被扩展为单独的"or"。

如果

```
(setq yas-key-syntaxes '("w_" "w_." "w_.()" "^ ")) 
```

then`"-or"`仅扩展为复杂表达式`"<some>-or"`。但是`" or"`像往常一样被扩展。

所以，只有当有内容`"buffer-substring"`的文件时才会被扩展`buffer-substring.yasnippet`

```
# contributor: Xah Lee (XahLee.org)
# name: buffer-substring
# key: buffer-substring
# --
(buffer-substring START$0 END) 
```

但 with`"w"`关键字`"buffer-substring"`将扩展为`substring.yasnippet`.

`# key: bs`如果文件中有附加字符串，`buffer-substring.yasnippet`则`"buffer-substring"`根本不会扩展。（对于版本：0.8.0）

# json - jax-rs 方法参数作为 CDI bean

> ID：14335143
> 
> 赞同：0
> 
> 时间：2013-01-15T09:58:57.330
> 
> 标签：json, jax-rs, java-ee-6, cdi, bean-validation

我有如下简单的 JAX-RS bean：

```
@Path('/client')
class ClientResource {

    @POST
    public Response post(Client client) {
        ...
    }

} 
```

`Client`正在从 json 响应正文创建。是否可以让`Client`类成为 CDI 感知 bean？我希望能够做这样的事情：

```
class Client {

    @Inject
    private Validator validator;

    public String clientName;    

    public validate() {
       // use validator here
    }
} 
```

默认情况下，我得到`validator`空值，所以似乎客户端没有被管理。

我使用 JBoss 和 RESTEasy 作为 Jax-RS 实现。

**编辑**

我想我可以提供来自 JSON 的自定义映射器，但那时它似乎有很多样板代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:04:47.340

那应该工作得很好。bean val 可能不可用。尝试创建生产者或注入其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:56:10.850

您是否使用 JAXB 进行解组？我不熟悉 RESTEasy，虽然我看到它可以使用 JAXB，但我不知道这是否是唯一的选择。

如果您使用的是 JAXB，那么它[`Unmarshaller`](http://docs.oracle.com/javaee/6/api/javax/xml/bind/Unmarshaller.html)支持[Unmarshal Event Callbacks](http://docs.oracle.com/javaee/6/api/javax/xml/bind/Unmarshaller.html#unmarshalEventCallback)。它可以调用正在解组的对象上的方法，或者更好的是，调用单独的[事件侦听](http://docs.oracle.com/javaee/6/api/javax/xml/bind/Unmarshaller.Listener.html)器。您可以注册一个侦听器，该侦听器具有对 CDI 的引用[`BeanManager`](http://docs.oracle.com/javaee/6/api/javax/enterprise/inject/spi/BeanManager.html)（使用简单`@Inject`的 或通过 JNDI at 获得`java:comp/BeanManager`），并使用它来注入新解组的对象。

我绝不是 CDI 专家，但实验表明这似乎注入了一个已经创建的对象：

```
public class Injector<T> {

    private final BeanManager beanManager;
    private final InjectionTarget<T> injectionTarget;
    private final Bean<T> bean;

    public Injector(BeanManager beanManager, Class<T> cl) {
        this.beanManager = beanManager;
        injectionTarget = beanManager.createInjectionTarget(beanManager.createAnnotatedType(cl));
        bean = resolve(beanManager.getBeans(cl));
    }

    private Bean<T> resolve(Set<Bean<?>> beans) {
        @SuppressWarnings("unchecked")
        Bean<T> bean = (Bean<T>) beanManager.resolve(beans);
        return bean;
    }

    public CreationalContext<T> inject(T obj) {
        CreationalContext<T> creationalContext = beanManager.createCreationalContext(bean);
        injectionTarget.inject(obj, creationalContext);
        return creationalContext;
    }

} 
```

该代码采用某个类的现有实例并将依赖项注入其中。这是对 CDI 的有点不规则的使用，但它似乎有效（此外，我相信它是完全有效和支持的）。

请注意，调用代码需要保留返回的，并在对象完成后`CreationalContext`调用其方法。[`release`](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/spi/CreationalContext.html#release%28%29)

# python - 日期时间对象的算术

> ID：14335148
> 
> 赞同：2
> 
> 时间：2013-01-15T09:59:19.973
> 
> 标签：python

[http://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)

我使用 today 函数获取当前日期，如何对这个对象执行简单的算术运算，以便我可以将当​​前日期减少或增加 1 或 2（即昨天或前天）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:01:36.460

您可以执行以下操作

```
In [6]: import datetime

# Today
In [7]: datetime.datetime.now()
Out[7]: datetime.datetime(2013, 1, 15, 15, 31, 10, 760000)

# Tomorrow's date
In [8]: print datetime.datetime.now() + datetime.timedelta(days=1)
2013-01-16 15:31:15.336000

# Day after tomorrow's day
In [9]: print datetime.datetime.now() + datetime.timedelta(days=2)
2013-01-17 15:31:52.601000

# Yesterday's date
In [10]: print datetime.datetime.now() - datetime.timedelta(days=1)
2013-01-14 15:32:00.081000 
```

也适用于 datetime.datetime.today()

```
In [15]: datetime.datetime.today()
Out[15]: datetime.datetime(2013, 1, 15, 15, 34, 37, 55000)

In [16]: datetime.datetime.today() + datetime.timedelta(days=1)
Out[16]: datetime.datetime(2013, 1, 16, 15, 34, 47, 560000) 
```

# php - 奇怪的需要路径错误

> ID：14335151
> 
> 赞同：2
> 
> 时间：2013-01-15T09:59:23.820
> 
> 标签：php, namespaces

我的自动加载器功能遇到了一个非常奇怪的问题。

这是我的自动加载器功能，取自[PSR-0 标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)：

```
function __autoload($className) {

    $className = ltrim($className, '\\');
    $fileName = '';
    $namespace = '';
    $lastNsPos = strrpos($className, '\\');
    if ($lastNsPos) {
        $namespace = substr($className, 0, $lastNsPos);
        $className = substr($className, $lastNsPos + 1);
        $fileName = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;
    }
    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

    require dirname(__FILE__) . DIRECTORY_SEPARATOR . $fileName;
} 
```

我对该函数所做的唯一修改是将函数添加`dirname(__FILE__)`到`require`函数中，因为我将此函数保存在一个名为 的目录`includes`中，我的所有其他类都保存在该目录中。这段代码适用于我的另一个项目，所以我不太确定这里出了什么问题。

我有一个文件：`includes\SQL\Persistable.php`命名空间声明为`namespace SQL;`. 当自动加载器运行时，它给了我这个错误：

```
Warning: require(/home/user/public_html/phpProject/includes/Persistable.php): failed to open stream: No such file or directory in /home/user/public_html/phpProject/includes/config.php on line 52 
```

我知道那个*文件*不存在，但我不确定它为什么要加载它。它应该要求`/home/user/public_html/phpProject/includes/SQL/Persistable.php`. 但是，当我`require`像这样更改功能时（只是为了测试）：

```
require dirname(__FILE__) . DIRECTORY_SEPARATOR . ' ' . $fileName; 
```

我得到：

```
Warning: require(/home/user/public_html/phpProject/includes/ SQL/Persistable.php): failed to open stream: No such file or directory in /home/user/public_html/phpProject/includes/config.php on line 52 
```

我不确定为什么添加一个空格，或者实际上是除正斜杠之外的任何字符，会导致`require`函数包含`$fileName`. 我也试过：

```
echo dirname(__FILE__) . DIRECTORY_SEPARATOR . $fileName; 
```

其输出是：

```
/home/user/public_html/phpProject/includes/SQL/Persistable.php 
```

但是，它显然不是在`require`函数中那样解释的。为什么？

我也尝试过`__DIR__`，通过显式设置包含路径`set_include_path()`，将函数放在自己的单独文件中并包含该文件，并且`realname()`，它们都没有工作。正如我所说，**这段代码之前已经工作过**，所以我不确定为什么我现在要提出这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:19:07.850

有问题的语句是获取准备好的语句的结果：

```
$stmt->setFetchMode(\PDO::FETCH_CLASS | \PDO::FETCH_PROPS_LATE, 'Persistable'); 
```

将其更改为：

```
$stmt->setFetchMode(\PDO::FETCH_CLASS | \PDO::FETCH_PROPS_LATE, '\SQL\Persistable'); 
```

帮助解决了这个问题……但现在我遇到了 PDO 的问题，这是另一个问题。

# java - Chromedriver 缺少要点击的元素

> ID：14335154
> 
> 赞同：0
> 
> 时间：2013-01-15T09:59:40.077
> 
> 标签：java, selenium, selenium-chromedriver

Chromedriver 似乎缺少它应该点击的元素：

```
driver.findElement(By.cssSelector("html body div#colorbox div#cboxWrapper div div#cboxContent div#cboxClose")).click(); 
```

执行此行会引发“WebDriverException：元素在点 (xxxxx) 处不可点击，其他元素将收到点击。” 我尝试了 xpath、id、cssSelector 定位器 - 每个都抛出相同的异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T05:59:57.903

不是每个 div 都是可点击的。也许子节点上有一个跨度或按钮。那是可点击的。希望它可以帮助你。

```
<div>
<span id='test001'>it's clickable</span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T14:43:17.857

这是一个常见问题，有时可以通过确保元素在屏幕上来解决，例如使用`new Actions(driver).moveToElement(element).click().perform();`此处详细说明：[Debugging "Element is not clickable at point" error](https://stackoverflow.com/questions/11908249/debugging-element-is-not-clickable-at-point-error)，尽管它也不是万无一失的。

# java - GWT 将 div 添加到面板中

> ID：14335157
> 
> 赞同：0
> 
> 时间：2013-01-15T09:59:44.943
> 
> 标签：java, gwt, html

我的 html 项目中有一个 div gwt`<div id="myproject"></div>`如何将它添加到特定的垂直面板中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:15:32.273

使用此代码：

```
VerticalPanel verticalPanel = new VerticalPanel();

verticalPanel.add(RootPanel.get("myproject"));

RootPanel.get().add(verticalPanel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:34:58.407

您还可以使用[HtmlPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/HTMLPanel.html)

```
panel.add(new HtmlPanel("<div id=\"myproject\"></div>")); 
```

# ios - Passbook在附近时如何修改锁屏显示的内容

> ID：14335159
> 
> 赞同：2
> 
> 时间：2013-01-15T09:59:47.410
> 
> 标签：ios, passbook

当存折位置在附近时，我想修改锁定屏幕中显示的内容。目前它给了我一个标志，“附近”和应用程序名称。如何显示其他内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:21:17.597

您可以为位置警报自定义锁定屏幕消息的程度有所限制。格式将始终是第一行的图标`organizationName`（取自 pass.json 并以粗体显示），第二行是可自定义的消息。

消息的空间很小，这意味着超过 30 个字符左右的消息会用省略号 (...) 进行裁剪。

要指定消息文本，请使用数组`relevantText`中的键。`locations`

此示例取自“本周报价”通行证。

```
"locations": [{
    "latitude": 49.282742271408,
    "longitude": -123.11837009769,
    "relevantText": "Slide to see our latest deal at iDaburn"
}, {
    "latitude": 49.27581030326,
    "longitude": -123.12110917249,
    "relevantText": "Slide to see our latest deal at iDaburn"
}], 
```

Apple 的[存折包格式参考](https://developer.apple.com/library/ios/#documentation/UserExperience/Reference/PassKit_Bundle/Chapters/LowerLevel.html#//apple_ref/doc/uid/TP40012026-CH3-SW2)文档中有更多信息。

# c++ - 匿名 std::packaged_task

> ID：14335161
> 
> 赞同：4
> 
> 时间：2013-01-15T09:59:52.273
> 
> 标签：c++, thread-safety, packaged-task

我正在尝试围绕 Glib::Dispatcher 构建一些包装器，以将任何功能类型分派到调度程序中。我想要一些函数调度，可以将函数转移到 Glib 主循环中：

```
template<class Function, class ...Args>
std::future<typename std::result_of<Function(Args...)>::type>
dispatch(Function &&f, Args &&...args); 
```

这个函数将从 f(args) 创建一个打包的任务并返回它的未来：

```
std::packaged_task<typename std::result_of<Function(Args...)>::type()> task(f(args...));
return task.get_future(); 
```

我现在需要从这个任务中创建 a`std::packaged_task<void()>`以将它们放入一个 std::queue 中，以便连接到 Glib::Dispatcher 的函数可以执行它们。

我的问题是：如何分两步从 a 创建，以便我可以从第一个任务返回它的未来并将第二个任务放入类型队列`std::packaged_task<R()>`中？`std::packaged_task<void()>``std::queue<std::packaged_task<void()>>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:43:40.017

首先，要`std::packaged_task`使用给定的参数集调用特定函数，那么（a）您需要在将函数传递给之前将函数绑定到参数`std::packaged_task`，或者（b）您需要将参数传递给函数调用运算符`std::packaged_task`目的。在您的代码中，您将传递`f(args...)`给`std::packaged_task`构造函数，它将在那里调用该函数，然后将结果传递给构造函数，这可能不是您想要的，甚至可能无法编译。

其次，如果您在构造时绑定参数，那么您的`std::packaged_task`实例是一个不带参数并返回的可调用对象`void`，因此可以直接*移动*到`std::packaged_task<void()>`.

把这一切放在一起，我们得到：

```
std::queue<std::packaged_task<void()>> task_queue;

template<class Function, class ...Args>
std::future<typename std::result_of<Function(Args...)>::type>
dispatch(Function &&f, Args &&...args) {
    std::packaged_task<typename std::result_of<Function(Args...)>::type()> task(
        std::bind(f,args...));
    auto res=task.get_future();
    task_queue.push(std::packaged_task<void()>(std::move(task)));
    return res;
} 
```

# php - PHP 字符串模板

> ID：14335162
> 
> 赞同：0
> 
> 时间：2013-01-15T09:59:54.973
> 
> 标签：php, string, templates

你们中是否有人知道构建字符串模板的好方法，可以用相应的数据后缀填充？用于通信系统。

因此，所需的输出可能如下所示：

> 你好蝙蝠侠，你好吗？您的朋友超人、猫女和蜘蛛侠已经在使用我们的服务。您想试试我们的服务吗？

实际数据应该从数据库中提取，因此需要有一种通用的方法来处理这样的事情：

> 你好{用户名}，你好吗？{If:HasFriendsWhoUseTheService}您的朋友 {ListFriends} 已经在使用我们的服务。{EndIf} 您想试试我们的服务吗？

这意味着如果用户没有正在使用系统的朋友，则不应打印中间句子。

我刚刚构建了一个小型系统，能够适当地替换 {username} 或 {ListFriends} 等字段，但后来我意识到，还应该有一些 if 语句。

有人知道支持这些东西的图书馆或类似的东西吗？也许还有更多需要考虑，以获得最大的灵活性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:02:50.733

如果模板只能由受信任的人编辑，那么您应该简单地使用 PHP 本身：

```
Hello <?php echo $Username;?>, how are you doing?
<?php if ($ListFriends) : ?>
Your friends <?php echo $ListFriends;?> are already using our service.
<?php endif; ?>
Would you like to give our service a try? 
```

如果不允许模板作者拥有完整的编程能力是不可接受的，那么您可以研究像[Smarty这样的模板引擎（](http://www.smarty.net/)[这里](http://www.smarty.net/crash_course)的速成课程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:09:37.207

构建自定义解析器。您可以在此链接中查看 BBCode 解析器作为示例[http://forrst.com/posts/Simple_PHP_BBCode_Parser-N0z](http://forrst.com/posts/Simple_PHP_BBCode_Parser-N0z)据我了解，您的字符串模板将与`{Username}`, `{if:Condition}Content{/endif}`, ... 等标签一起使用，这与 BBCode 所做的相同.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:07:10.523

感谢您提供有用的答案！

我与相关经理进行了交谈，并细化了要求，以使其更容易。所以我最终只提供了简单的字段，如 {Username} 或 {Address}，因为没有简单的方法来创建通用系统。

无论如何感谢您的帮助！

# python - 使用 boto HTTPS 上传到 S3？

> ID：14335163
> 
> 赞同：2
> 
> 时间：2013-01-15T09:59:56.337
> 
> 标签：python, https, amazon-s3, boto

有一个类“ `boto.s3.connection`”，我可以在其中建立与 S3 的连接：

```
b = s3conection(aws_id, aws_secret_key)
b.get_bucket(bucket) 
```

有了这个，我可以清楚地使用`set_contents_from_filename`or `set_contents_from_file`。

还有另一个电话`build_post_form_args`。我可以在此处将连接类型设置为 HTTPS，但是如果我使用此调用而不是上一个调用，接下来该怎么办？

我无法弄清楚这一切是如何与`set_contents_from_filename`or相适应的`set_contents_from_file`。一个小提示将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:54:52.947

S3 服务提供了一项功能，允许您将文件从 HTML 表单直接上传到 S3 存储桶。[您可以在此处](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingHTTPPOST.html)找到有关此功能的更多详细信息。这`build_post_form_args`是一个帮助函数，用于创建必须放置在 HTML 表单中以允许直接上传到 S3 的签名 HTML 表单数据。

除非您对从浏览器中进行上传感兴趣，否则此功能并不是真正有用或相关的。

# java - 访问 servlet 返回 HTTP 状态 404

> ID：14335164
> 
> 赞同：0
> 
> 时间：2013-01-15T09:59:58.010
> 
> 标签：java, tomcat, servlets, http-status-code-404

我的 Web 应用程序有问题。我使用带有 glassfish 的 netbeans 作为默认 Web 服务器制作了我的应用程序。每当我编译并将程序部署到本地主机时，它都可以正常工作，但是当我尝试将其部署在具有 apache tomcat 7.xx 版本的远程 Web 服务器上时，每当程序访问 servlet 时，它都会返回 http 状态 404 错误。我检查了 servlet 映射，一切似乎都很好。这是我的 web.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<servlet>
    <servlet-name>mainservlet</servlet-name>
    <servlet-class>controller.MainServlet</servlet-class>
</servlet>
<servlet>
    <servlet-name>loginservlet</servlet-name>
    <servlet-class>controller.LoginServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>mainservlet</servlet-name>
    <url-pattern>/mainservlet</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>loginservlet</servlet-name>
    <url-pattern>/loginservlet</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

# javascript - OpenLayers 弹出窗口中的灯箱库

> ID：14335165
> 
> 赞同：4
> 
> 时间：2013-01-15T10:00:00.793
> 
> 标签：javascript, openlayers, openstreetmap, lightbox2

我目前正在设计一个广泛使用 openlayers 的网站。地图上放置了各种矢量标记，当用户单击标记时，会出现一个弹出窗口。在此弹出窗口中，有一些已为灯箱设置的图像。唯一的问题是，当单击缩略图时，图像会在新窗口中打开（即 Lightbox 没有对链接进行事件识别）。灯箱的 html 非常好，因为我已经在弹出窗口之外对其进行了测试。

我想让灯箱在弹出窗口中工作，任何帮助将不胜感激。这是我的代码：

**弹出窗口创建：**

```
function onFeatureSelect(feature) {
    selectedFeature = feature;
    popup = new OpenLayers.Popup.AnchoredBubble("PopUp", 
                    feature.geometry.getBounds().getCenterLonLat(),
                    null,
                    null,
                    null, true, onPopupClose);
    popup.setContentHTML('<div><a  href="large_image.png" rel="lightbox"><img src="thumb_image.png" /></a></div>');
    feature.popup = popup;

    map.addPopup(popup);
} 
```

**`Lightbox.js`关于点击收听的摘录：**

```
updateImageList: function() {   
    this.updateImageList = Prototype.emptyFunction;
    document.observe('click', (function(event){
        var target = event.findElement('a[rel^=lightbox]') || event.findElement('area[rel^=lightbox]');
        if (target) {
            event.stop();
            this.start(target);
        }
    }).bind(this));
}, 
```

谢谢阅读。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:32:34.443

虽然我从未解决过 Lightbox 的问题，但切换到[Lightbox2.js](http://lokeshdhakar.com/projects/lightbox2/)为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T08:54:13.447

对我来说，切换到 Lightbox2 不起作用，因为我的项目中目前没有 jquery ......所以这里是使用 Openlayers 2.13.1 启用它的步骤

首先手动初始化灯箱。body 标记中的给定 onload 函数似乎覆盖了 lightbox.js 中的标准初始化

```
function initMap() {
    // manually call the init function from lightbox.js
    if (initLightbox)
        initLightbox();
... 
```

下一步是手动将 onclick 功能添加到您的图像缩略图中。通常灯箱会为您执行此操作，但在单击功能符号后会动态加载弹出内容。图片链接应该是这样的

```
<a class="doc" href="/path_to_pic/util/docklein/sample.jpg" rel="lightbox"
            onclick="showLightbox(this); return false;">
    <img src="/path_to_pic/util/docpreview/sample.jpg"/>
</a> 
```

在此更改后，图像加载应该可以工作。不幸的是，图片显示在地图后面。一个简单的css改变解决了这个问题。

```
#overlay {
    z-index: 1100 ! important;
}

#lightbox {
    z-index: 1101 ! important;
} 
```

希望它可以帮助某人:-D

# java - 使用 unicode 字符读取原始文件

> ID：14335166
> 
> 赞同：1
> 
> 时间：2013-01-15T10:00:04.393
> 
> 标签：java, android, android-resources

我在**/res/raw** (R.raw.test) 文件夹中有一个文件，其内容如下：

> 这是一个 Tésêt

我想把它读成一个字符串。我目前的代码是：

```
public static String readRawTextFile(Context ctx, int resId) {
    InputStream inputStream = ctx.getResources().openRawResource(resId);

    InputStreamReader inputreader;
    try {
        inputreader = new InputStreamReader(inputStream, "UTF-8");
    } catch (UnsupportedEncodingException e1) {
        e1.printStackTrace();
        return null;
    }
    BufferedReader buffreader = new BufferedReader(inputreader);
    String line;
    StringBuilder text = new StringBuilder();

    try {
        while ((line = buffreader.readLine()) != null) {
            text.append(line);
            text.append('\n');
        }
    } catch (IOException e) {
        return null;
    }
    return text.toString();
} 
```

但是返回的字符串是：

> 这是一个T�t

我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:04:52.740

您的代码似乎没问题。返回的字符串也可以，只是您尝试在不支持的查看器中查看它`UTF-8`。我已经运行了您的代码，`groovyConsole`它可以识别 UNICODE 并且它`UTF-8`完美地显示了字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:09:09.933

首先需要确定文件/res/raw的编码

如果在 UNIX 上，您可以键入以下命令

```
file /res/raw 
```

然后在中指定正确的编码

```
inputreader = new InputStreamReader(inputStream, "UTF-8"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:19:42.733

嗨，我会尝试这样的事情：

```
StringBuilder str = new StringBuilder();
File file = new File("c:\\some_file.txt");
FileInputStream is = new FileInputStream(file);
Reader reader = new InputStreamReader(is, "UTF-8");
while(true){
    int ch = reader.read();
    if(ch < 0){
      break;
    }
    str.append((char)ch);
}
String myString = str.toString(); 
```

如果你想写只是使用`InputStreamWriter`并`FileOutputStream`设置正确的编码......它就像魅力......

我希望我能帮忙:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-13T13:02:16.123

我有一个文件，它也给了我一个类似于“这是一个 T�s�t”的输出，对我来说，将 charsetName 设置为 UTF-16 就可以了

# php - 以 html 形式更新 PHP

> ID：14335167
> 
> 赞同：0
> 
> 时间：2013-01-15T10:00:12.050
> 
> 标签：php

我正在尝试制作一个表格来更新数据库中的一行。所以我可以为帖子和类似的东西制作标题。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:11:36.203

**更新：**鉴于您提供的一小段代码，我将对我的答案进行一些小的更新。

您的问题非常笼统，但我会提供一些代码来帮助您入门。例如，如果您想更新帖子 #60 的标题。

## HTML

```
<form action='update.php' method='POST'>
    <label for='title'>Post title:</label>
    <input type='text' id='title' name='title' required>

    <label for='content'>Post body:</label>
    <textarea cols='80' rows='10' id='content' name='content'></textarea>

    <input type='hidden' name='postID' value='60'>
    <button type='submit'>Update</button>
</form> 
```

我假设每个帖子都有一个唯一的 ID，称为`id`. 这又是一个非常简单的例子。为了这个例子，我还假设您的数据库是 MySQL。我将在这里使用[PDO](http://php.net/manual/en/book.pdo.php) ，但如果您真的需要，请随意使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[mysql驱动程序。](http://php.net/manual/en/book.mysql.php)

## PHP (更新.php)

```
<?php

    // Define your MySQL credentials here
    define('DB_NAME', 'your database name');
    define('DB_HOST', 'localhost'); // usually it's localhost
    define('DB_PORT', 3306) // usually it's 3306
    define('DB_USER' 'username');
    define('DB_PASSWORD', 'password');

    // Check if your HTTP POST parameters are set
    if(!isset($_POST['title']) || !isset($_POST['content']) || !isset($_POST['id'])) {
        die('Missing POST parameters');
    }

    // Create a new PDO instance
    $db = new PDO("mysql:dbname=" . DB_NAME . ";host=" . DB_HOST . ";port=" . DB_PORT, DB_USER, DB_PASSWORD);

    $sql = 'UPDATE `text` SET `title` = :title, `content` = :content WHERE `id` = :id;';

    // Create a new PDOStatement by preparing it
    $statement = $db->prepare($sql);

    // Bind the values to the prepared statement
    // By doing this you don't have to worry about escaping them
    $statement->bindValue(':title', $_POST['title'], PDO::PARAM_STR);
    $statement->bindValue(':content', $_POST['content'], PDO::PARAM_STR);
    $statement->bindValue(':id', $_POST['postID'], PDO::PARAM_INT);

    // Execute the prepared statement
    $statement->execute();

    // Since we're doing an update, it is a good idea to check if the query succeeded.
    // rowCount() should return 1 here
    if($statement->rowCount()) {
        echo 'Post title updated.';
    }
?> 
```

有关更多信息，您可以查阅有关[UPDATE 查询的 MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/update.html)（或您的 RDBMS 的文档）。

希望这会让你开始！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:11:33.697

核心脚本文件

```
<?  
mysql_connect(); 
mysql_select_db("new"); 
$table = "test"; 
if($_SERVER['REQUEST_METHOD']=='POST') { //form handler part: 
  $name = mysql_real_escape_string($_POST['name']); 
  if ($id = intval($_POST['id'])) { 
    $query="UPDATE $table SET name='$name' WHERE id=$id"; 
  } else { 
    $query="INSERT INTO $table SET name='$name'"; 
  } 
  mysql_query($query) or trigger_error(mysql_error()." in ".$query); 
  header("Location: http://".$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']);  
  exit;  
}  
if (!isset($_GET['id'])) { //listing part: 
  $LIST=array(); 
  $query="SELECT * FROM $table";  
  $res=mysql_query($query); 
  while($row=mysql_fetch_assoc($res)) $LIST[]=$row; 
  include 'list.php'; 
} else { // form displaying part: 
  if ($id=intval($_GET['id'])) { 
    $query="SELECT * FROM $table WHERE id=$id";  
    $res=mysql_query($query); 
    $row=mysql_fetch_assoc($res); 
    foreach ($row as $k => $v) $row[$k]=htmlspecialchars($v); 
  } else { 
    $row['name']=''; 
    $row['id']=0; 
  } 
  include 'form.php'; 
}  
?> 
```

和 2 个模板文件：form.php

```
<form method="POST">
<input type="text" name="name" value="<?=$row['name']?>"><br>
<input type="hidden" name="id" value="<?=$row['id']?>">
<input type="submit"><br>
<a href="?">Return to the list</a>
</form> 
```

和 list.php

```
<a href="?id=0">Add item</a>
<? foreach ($LIST as $row): ?>
<li><a href="?id=<?=$row['id']?>"><?=$row['name']?></a>
<? endforeach ?> 
```

# xpath - 排版 if/else 最佳实践

> ID：14335169
> 
> 赞同：0
> 
> 时间：2013-01-15T10:00:18.653
> 
> 标签：xpath, typo3, typoscript

还有我和这个 Typoscript...

Project 常量中**可能**定义了 companyId，如果有 XML 则应过滤到它。

```
[$plugin.xml_path.companyId = '']
  plugin.xml_xpath.conf.xpath.path   = /jobs/job/company
[else]
  plugin.xml_xpath.conf.xpath.path   = /jobs/job/company[@id={$plugin.xml_path.companyId}]
[global] 
```

只要定义了 ID，此代码就可以工作，如果没有定义，我会得到一个仅带有标记的输出。

该公司有大约 10 个子公司，应该只显示与其相关的职位。但是在母公司的页面上（没有给出 ID 常数）应该列出所有工作。每个工作都与 1 个子公司相关。

我已经阅读过，`stdWrap.ifEmpty`但我不知道这对我的情况有何帮助？

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:30:12.230

你不需要那个`if`，你可以在一个小的 XPath 表达式中完成所有这些。

```
/jobs/job/company[@id={$plugin.xml_path.companyId} or @id="" or not(@id)] 
```

解释：

1.  `@id={$plugin.xml_path.companyId}`寻找具有匹配 ID 的公司
2.  `@id=""`查找 ID 为空的公司
3.  `not(@id)`寻找没有身份证的公司

我不确定2和3，所以我把两者都包括在内。根据需要删除。

* * *

更新到更具体的问题：

这也很容易做到。

```
/jobs/job/company[{$plugin.xml_path.companyId}="" or @id={$plugin.xml_path.companyId}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:46:53.323

请尝试以下排版：

```
plugin.xml_xpath.conf.xpath.path   = /jobs/job/company[@id={$plugin.xml_path.companyId}]
[globalVar = LIT: {$plugin.xml_xpath.conf.xpath.path} = ]
plugin.xml_xpath.conf.xpath.path   = /jobs/job/company
[end] 
```

如果“plugin.xml_xpath.conf.xpath.path”为空，则路径将替换为“/jobs/job/company”。

# php - 将 2 个变量与换行符组合并插入表中

> ID：14335176
> 
> 赞同：0
> 
> 时间：2013-01-15T10:00:55.260
> 
> 标签：php

有人可以告诉我我做错了什么吗？或者如果我走错路了？

我想连接来自 2 个文本区域的 2 个字符串并将它们插入到我表中的一列中。

这段代码来自发送消息页面，

**$msgfull**是用户希望发送的消息， **$msqquote**是用户正在回复的消息（显示在只读文本区域中）

```
$recipient= $_POST['sendto'];
$subjectmsg= $_POST['subject'];
$msgfull= $_POST['messagetext'];
$msgquote= $_POST['replyquote'];
$date = date('Y-m-d H:i:s');

$replyupdate = $msgfull."\n".$msgquote; 
```

我想将 $replyupdate 插入表中。

它的工作原理是这样的，但是，它并没有给我换行符，它只是把它全部放在一行中。

在查看消息页面上，我希望首先显示 $msgfull，然后显示一个换行符（或 2 个），然后显示 $msgquote（原始消息）。

有人可以建议吗？

注意：我知道我的 POST 数据存在安全问题，它们是我正在修改并慢慢删除所有 mysql 命令的旧脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:03:10.753

它应该是

```
$replyupdate = $msgfull."<br />".$msgquote; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:03:11.080

`nl2br`如果我没记错的话，有一个用于此目的的功能！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:04:41.470

在显示字符串时，使用`nl2br`将所有`\n`字符转换为的函数`<br />`

参考： http: [//php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:04:48.433

浏览器不显示`\n`换行符，因为它们仅用于构建 html，而不是生成的页面。这就是`<br>`标签的用途。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T10:05:09.710

您也可以应用 HTML 中断标记

```
$replyupdate = $msgfull."<br />".$msgquote; 
```

这将提供您所期望的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T10:05:25.350

如果要显示 HTML，则需要使用`<br>`而不是`\n`. 如果要将字符串存储在表中，则可以使用`nl2br`函数。

# c# - SSRS 报告中的 NULL 复选框

> ID：14335178
> 
> 赞同：0
> 
> 时间：2013-01-15T10:00:56.420
> 
> 标签：c#, .net, reporting-services, ssrs-2008

在 SSRS 报告中，如果我提到`Nullable`标签，`ReportParameter`它会自动创建一个带有文本的复选框`NULL`。那么有没有办法让复选框默认选中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:04:50.020

尝试将默认值设置为`=Nothing`，即 NULL。

甚至只是从下拉列表中指定它：

![在此处输入图像描述](../Images/52d691f82002e0903fc50cec971f93c9.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T10:50:09.780

只需将参数默认值设置为 'TRUE'

![在此处输入图像描述](../Images/d39eb8b033de8681e44ff04de8cbd7ee.png)

这将导致

![在此处输入图像描述](../Images/fdd7b647217b58c341d64e2203daa393.png)

# c - fork 调用不执行子代码

> ID：14335181
> 
> 赞同：1
> 
> 时间：2013-01-15T10:01:04.873
> 
> 标签：c, fork

这是我更新的代码片段

```
for (int i=0; i<30; i++){

        printf("Forking\n");

        tmpPid = fork();

        switch(tmpPid)

       {
         case -1:

            printf("Error");
            break;
         case 0:

          printf("Fork success for proc %d\n", i);
          //call some function
           _exit(0)
           break;

         default:

         printf("Fork succeed");
         //store the pid in a vector
          break;
    }
}

//iterate through the vector and wait on each process.
// waitpid(vectorList[i], &exitStatus, WNOHANG) 
```

几乎 15-18 个子进程的分叉工作正常。但是对于某些进程，子代码根本没有执行，子进程只是挂起。（即 fork() 仅返回子 ID，但不返回零）。如果我通过调用其他一些虚拟函数在 for 循环中购买更多时间，那么这个问题就不会出现。谁能告诉我什么问题？是否有必要在多个分叉之间设置延迟？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:56:27.417

如果父进程被杀死，那么子进程也将被杀死。所以我们需要通知父进程等到子进程完成它的工作。在您的程序中使用`wait`或。`waitpid`

`wait`将阻塞调用进程，直到其任何一个子进程终止。

`waitpid`将阻塞调用进程，直到第一个 agrument 中提到的子进程终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:55:43.467

我不确定该程序是否完成了它最初打算做的事情。

基本上

```
 for (i=0 ; i<N ; i++) {
      print("Forking\n");
      fork();
  } 
```

从头到尾推理`N == 30`。

*   for i == 29：*孩子*和*父母*结束*for*循环并死亡
*   对于 i == 28：*父母*仍然要做*29 ，**孩子*也是如此......

ETC...

将显示“分叉”，而不是显示 30 个“分叉” `2^0+2^1+2^2+...+2^29`。

即`2^N-1`或`2^30 - 1`，或`1,073,741,823`分叉。

根据您的操作系统，系统可能会抱怨并挂起，达到 ulimit / system / window / user / shell 限制。

也许

```
 for (i=0 ; i<N ; i++) {
      print("Forking\n");
      if (fork()) exit(0);
  } 
```

或者在片段中必须`default:`让`exit(0);`孩子*们*死去（可怕的话）会提供预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:40:57.900

在父进程死亡之前，一些子进程可能没有时间打印。

在结束父进程之前，您需要`wait`为子进程。

也可能存在多个子进程同时写入同一输出流的问题。（任何人都可以验证这是一个潜在的问题吗？）

# c# - 根据环境更改接口的实现

> ID：14335186
> 
> 赞同：1
> 
> 时间：2013-01-15T10:01:13.947
> 
> 标签：c#, dependency-injection, mono

我有一个使用接口`IBackend`与后端通信的应用程序。在生产环境中我希望使用类`ProdBackend : IBackend`作为接口的实现。在我希望使用的测试环境中`TestBackend : IBackend`。

应用程序被打包成一个 zip 文件，它必须独立于它是部署在 prod 环境还是 test 环境中。

如何使应用程序`IBackend`根据其部署的环境使用不同的实现？

我可以通过在两个环境中安装不同的 .dll 并将类命名相同来做到这一点吗？

**更新 11:12 - 15/1**：打包的应用程序不允许包含 prod 实现，即`ProdBackend : IBackend`. `ProdBackend : IBackend`所以应用程序在编译时并不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:07:58.693

根据您的设置，有很多方法可以做到这一点。我能想到这些：

1.  **机器名称：** 如果您知道测试服务器的服务器名称（或约定），您可以基于`Envirnoment.MachineName`.
2.  **插件：**如果您使用插件模型（通过构建一个包含 contains 的程序集`ProdBackend`，`TestBackend`您可以在部署应用程序时做出决定。您可以通过 IOC 容器用于连接依赖项的插件目录来做到这一点（或其他方式）。
3.  **配置：**您可以使用配置文件中的值来确定环境，然后使用该信息在两个实现之间进行选择。然后，在部署到 prod 环境时，您可以相应地调整配置文件 ( `app.config`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:13:45.180

提供具有相同接口的不同实现的不同 DLL 可以正常工作。

一个更优雅的解决方案是这样做，但添加一个服务定位器来提供您需要的实现。然后，您可以配置服务定位器以根据您运行的平台返回一个实现。

有很多服务定位器，但是一个简单的可以在 Mono 支持的所有平台上运行的服务定位器是[TinyIOC](https://github.com/grumpydev/TinyIoC)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:25:09.183

测试环境的全部意义在于让您尽可能合理地确定，当您将某些东西部署到生产环境时，它将正常工作。如果您有一组在测试中执行的代码和另一组在部署到生产时执行的代码，您将如何实现该目标？

从本质上讲，从代码角度来看，测试和生产之间的区别应该只是配置（不同的数据库连接，可能更详细的测试日志记录等）。否则，本质上，您是在将未经测试的代码部署到生产环境中，在我看来，这是为可能的灾难播下的种子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:49:30.090

有一个概念：[上下文绑定](https://github.com/ninject/ninject/wiki/Contextual-Binding)——几乎所有的依赖注入容器都实现了它。实际上，这意味着您可以将*条件*添加到绑定中。这是使用[ninject的示例](/questions/tagged/ninject "显示标记为“ninject”的问题")

### 定义“生产”环境条件

例如 by`Environment.MachineName`或任何其他适合您的方式：

```
private static readonly Func<bool> IsCurrentEnvironmentProduction = 
   () => Environment.MachineName == "Production.Server"; 
```

### 为不同的环境定义绑定

```
public static IKernel InitializeKernel() 
{ 
    var kernel = new StandardKernel();

    // binding for production
    kernel
        .Bind<IBackend>()
        .To<ProdBackend>()
        .When(request => IsCurrentEnvironmentProduction());

    // binding for test environment
    kernel
        .Bind<IBackend>()
        .To<TestBackend>()
        .When(request => !IsCurrentEnvironmentProduction());

    return kernel; 
} 
```

### 解析实例取决于环境

DI 容器将为您完成所有工作

```
var backend = kernel.Get<IBackend>(); 
```

完整样本可[在此处获得](https://gist.github.com/4538388)

## 关于 Mono 的备注

根据[Ninject 下载](http://www.ninject.org/download.html)，有一个 Mono 版本，但您也可以在其他 DI 容器中实现相同的功能

# ios - Urban Airship 和 AirshipConfig.plist

> ID：14335187
> 
> 赞同：7
> 
> 时间：2013-01-15T10:01:20.047
> 
> 标签：ios, plist, push, urbanairship.com

是否有可能让 XCode 根据构建目标为 iOS 配置 AirshipConfig.plist？Urban Airship 目前只支持 2 种配置，在 AirshipConfig.plist 中设置，但我想要 3 种或更多。如果可以根据目标切换配置文件，有没有人有经验？UA 是否要求文件具有上述名称？

UA 不提供超过 2 个配置的任何选项确实是一个缺点。UA 支持表示目前不可能，但我认为动态切换文件可能是一种选择。

问候金

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T09:39:08.150

我自己发现了。如果有人感兴趣：只需为每个配置创建子文件夹并将相应的 AirshipConfig.plist 放在那里。然后为配置创建不同的目标，并将正确文件的目标成员资格设置为该目标。就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:06:56.620

`airshipConfigOptions`这是我用来为我的三个目标生成的代码。目标在每个目标的构建设置中都有宏：{TARGET_A, TARGET_B, TARGET_C}：

```
- (void)urbanAirshipTakeoffWithLaunchOptions:(NSDictionary *)launchOptions {

    // Init Airship launch options
    NSMutableDictionary *takeOffOptions = [[NSMutableDictionary alloc] init];
    [takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

    // Build the Urban Airship TakeOffOptions

    // Create Airship singleton that's used to talk to Urban Airship servers.
    // Please populate AirshipConfig.plist with your info from http://go.urbanairship.com
    NSMutableDictionary *airshipConfigOptions = [[NSMutableDictionary alloc] init];

    /*
     * Set up the Push keys based on target
     */
    _uaApp = @"unknown";

    // iFlightBag TARGET_A
#ifdef TARGET_A
    NSLog(@"Appdelegate_Pad:didFinishLaunchingWithOptions - TARGET_A");
    [airshipConfigOptions setValue:@"xxx" forKey:@"DEVELOPMENT_APP_KEY"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"DEVELOPMENT_APP_SECRET"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"PRODUCTION_APP_KEY"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"PRODUCTION_APP_SECRET"];
    _uaApp = "@TARGET_A";
#endif

    // iFlightBag TARGET_B
#ifdef TARGET_B
    NSLog(@"Appdelegate_Pad:didFinishLaunchingWithOptions - TARGET_B");
    [airshipConfigOptions setValue:@"xxx" forKey:@"DEVELOPMENT_APP_KEY"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"DEVELOPMENT_APP_SECRET"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"PRODUCTION_APP_KEY"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"PRODUCTION_APP_SECRET"];
    _uaApp = @"TARGET_B";
#endif

    // iFlightBag 
#ifdef TARGET_C
    NSLog(@"Appdelegate_Pad:didFinishLaunchingWithOptions - TARGET_C");
    [airshipConfigOptions setValue:@"xxx" forKey:@"DEVELOPMENT_APP_KEY"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"DEVELOPMENT_APP_SECRET"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"PRODUCTION_APP_KEY"];
    [airshipConfigOptions setValue:@"xxx" forKey:@"PRODUCTION_APP_SECRET"];
    _uaApp = @"TARGET_C";
#endif

    // If CONFIGURATION_Debug is defined, then use the development servers, else use the production servers
#ifdef CONFIGURATION_Debug
    [airshipConfigOptions setValue:@"NO" forKey:@"APP_STORE_OR_AD_HOC_BUILD"];
    NSLog(@"Using Development Servers at Urban Airship");
    _uaApp = [_uaApp stringByAppendingString:@"_dev"];
#else
    [airshipConfigOptions setValue:@"YES" forKey:@"APP_STORE_OR_AD_HOC_BUILD"];
    NSLog(@"Using Production Servers at Urban Airship");
#endif

    // Erase stored user informaton - set in settings?
    if(self.getEraseUser) [airshipConfigOptions setValue:@"YES" forKey:@"DELETE_KEYCHAIN_CREDENTIALS"];

    // Set and start Urban Airship
    [takeOffOptions setValue:airshipConfigOptions forKey:UAirshipTakeOffOptionsAirshipConfigKey];
    [UAirship takeOff:takeOffOptions];

    // -----
    // Set up Urban Airship Inbox
    // Set up the list and message view controllers for the master and detail panels, respectively.

    // If the application gets an UAInbox message id on launch open it up immediately. Only works for the default inbox

    //Init the UI
    [UAInbox useCustomUI:[UAInboxUI class]];//sample UI implementation
    [UAInbox shared].pushHandler.delegate = [UAInboxUI shared];

    // If the application gets an UAInbox message id on launch open it up immediately.
    // Only works for the default inbox
    [UAInboxUI shared].inboxParentController = self.tabcontroller;
    [UAInboxPushHandler handleLaunchOptions:launchOptions];

    if ([[UAInbox shared].pushHandler hasLaunchMessage]) {
        [[[UAInbox shared] uiClass] loadLaunchMessage];
    }

    // Register for notifications
    [[UAPush shared] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                                         UIRemoteNotificationTypeSound |
                                                         UIRemoteNotificationTypeAlert)];
} 
```

# javascript - 使用 Javascript 将从 URL 获取的数据保存到磁盘

> ID：14335190
> 
> 赞同：0
> 
> 时间：2013-01-15T10:01:26.887
> 
> 标签：javascript, .net, file

我一直在谷歌搜索，我发现的只是将文件保存到本地磁盘的不同方法——其中大多数是“中级”或“高级”级别。

我的问题是，我正在尝试编写一个 javascript 函数来将来自链接的数据`http://localhost/Georg/api/stopareas/single/1035`以 Excel 或 XML 格式保存在本地磁盘上。我尝试使用的所有示例都没有太大帮助。

需要一些关于如何使用 JS 执行此操作的指示。

# javascript - 错误“未捕获的语法错误：意外的标识符”

> ID：14335191
> 
> 赞同：0
> 
> 时间：2013-01-15T10:01:28.543
> 
> 标签：javascript, jquery

我的代码中没有什么问题，我确定它什么都没有，但我找不到它。

有人可以帮助我吗？

我明白了：

> `Uncaught SyntaxError: Unexpected identifier`

```
$(document).ready(function(){
    $('#zone1').mouseover(function(){
        $('#cercle2-1').fadeIn(200);
    }
    $('#zone1').mouseout(function(){
        $('#cercle2-1').fadeOut(200);
    }
}); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:02:30.053

该代码缺少两个右括号来关闭函数调用。

```
 $(document).ready(function(){
      $('#zone1').mouseover(function(){
        $('#cercle2-1').fadeIn(200);
      }); //Need right paren and semi to finish statement
      $('#zone1').mouseout(function(){
        $('#cercle2-1').fadeOut(200);
      }); //Need right paren and semi to finish statement
  }); 
```

# sql - SELECT 中的 SQL Server 变量表

> ID：14335193
> 
> 赞同：0
> 
> 时间：2013-01-15T10:01:31.740
> 
> 标签：sql, sql-server-2008

无论如何我可以做类似的事情

无论如何我可以将变量放入 FROM 子句。像这样

```
SELECT * FROM myGetTableFunc(@tableName)

SELECT * FROM EXEC('SELECT * FROM ' + @tableName)

SELECT * INTO #myUndeclaredTable FROM @tableName 
```

我认为你说对了。

基本上，我将有一些具有共享公共列的表，例如排序键等。在存储过程中，我使用这些共享列来处理表并加入一些东西，然后返回它。

但目前我需要为每个表创建一个新的存储过程，因为我不能在 FROM 子句中使用变量。将整个事情变成动态 SQL 是我唯一的解决方案吗？

诸如此类的事情`OPENQUERY` `OPENROWSET`是不可能的。

我想到了类似的东西

```
EXEC ('SELECT * INTO #myTempTable FROM ' + @tableName)
SELECT * FROM #myTempTable 
```

但`#myTempTable`似乎不可见，即使我认为它具有整个会话的范围。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:10:37.163

尝试这个：

```
DECLARE @TableName AS VARCHAR(100)
SELECT @TableName = 'myTable'

EXECUTE ('SELECT * INTO #TEMP  FROM ' + @TableName +'; SELECT * FROM #TEMP;') 
```

这只是从这里拍摄的：

[TSQL 从动态 sql 中选择到 Temp 表](https://stackoverflow.com/questions/9534990/tsql-select-into-temp-table-from-dynamic-sql)

看看这里：

[动态创建#temp表，然后用于插入数据](https://stackoverflow.com/questions/2542730/dynamically-creating-the-temp-table-and-then-used-to-insert-the-data)

# amazon-web-services - AWS CloudSearch - 您可以添加的停用词和同义词的数量是否有限制？

> ID：14335205
> 
> 赞同：1
> 
> 时间：2013-01-15T10:02:17.233
> 
> 标签：amazon-web-services, amazon-cloudsearch

在 AWS CloudSearch 控制台的文本选项面板中，您可以通过文本字段输入将停用词、词干和同义词添加到搜索索引。我可以上传 471 个停用词，但不能再上传一个。当我尝试时，上传超时并报告以下javascript错误：

```
Uncaught TypeError: Cannot read property 'Error' of null in cs.201212282103.js 
```

我假设我已经达到了极限。这在任何地方都有记录吗？我也有很多我希望上传的同义词。同义词有限制吗？是否有另一种上传停用词、词干和同义词的方法 - 例如 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:29:53.500

是的，有限制，您可以在[http://docs.aws.amazon.com/cloudsearch/latest/developerguide/Limits.html上查看](http://docs.aws.amazon.com/cloudsearch/latest/developerguide/Limits.html)

```
Stemming dictionary size
The maximum size of a Amazon CloudSearch stemming dictionary is 500 KB.

Stopwords dictionary size
The maximum size of a Amazon CloudSearch stopwords dictionary is 10 KB.

Synonym dictionary size
The maximum size of a Amazon CloudSearch synonym dictionary is 100 KB. 
```

但我并没有确认你有限制问题，我只是在回答其他问题。就像您指出的那样，控制台可能是暂时的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-19T06:06:26.127

CloudSearch Console 有一个错误（显然 6 年后仍未修复）。幸运的是，您可以使用 AWS CLI 解决问题。

我在尝试添加一些新的同义​​词时遇到了这个问题。我担心我会遇到某种限制，因为我可以将相同的同义词添加到只有少数同义词的测试分析方案中。但是在阅读了埃弗顿的[回答](https://stackoverflow.com/a/14350489/2239183)后，我发现我的同义词词典远没有达到 100 KB 的限制。而且我怀疑 OP 也达到了限制（但是 javascript 在一定数量的数据后确实会失败，所以这是人为的限制）。

因此，我联系了 AWS Support，后者要求我尝试使用 AWS CLI 更新我的分析方案。这奏效了。这是要使用的命令：

```
aws cloudsearch define-analysis-scheme --domain-name <your-domain-name> --analysis-scheme file://path/to/file.json 
```

JSON 文件中的结构应如下所示：

```
{ 
  "AnalysisSchemeName": "<your-scheme-name>", 
  "AnalysisSchemeLanguage": "en", 
  "AnalysisOptions": {
    "AlgorithmicStemming": "none"|"minimal"|"light"|"full", 
    "JapaneseTokenizationDictionary": "",
    "Synonyms": "{\"aliases\":{\"baseball\":[\"sport\"],\"basketball\":[\"sport\"],\"football\":[\"sport\"],\"mexican\":[\"food\"],\"pepper\":[\"food\"],\"grill\":[\"food\"]},\"groups\":[[\"travel\",\"vacation\",\"relax\",\"trip\",\"getaway\"],[\"happy\",\"cheerful\",\"joy\",\"joyful\"]]}", 
    "StemmingDictionary": "{}", 
    "Stopwords": "[\"a\",\"an\"]"
  }
} 
```

我留下了一些同义词数据来展示如何为别名和组添加数据以及停用词的结构。

可以在[定义分析方案](https://docs.aws.amazon.com/cli/latest/reference/cloudsearch/define-analysis-scheme.html)的 AWS CLI 命令参考页面上找到更多详细信息。

# eclipse - 从 Eclipse 运行 Tomcat：如何添加虚拟主机？

> ID：14335209
> 
> 赞同：0
> 
> 时间：2013-01-15T10:02:22.940
> 
> 标签：eclipse, debugging, tomcat, testing

这是我的设置：

*   日蚀朱诺
*   Maven项目
*   Maven Tomcat 插件
*   带有调试配置的项目：“目标：tomcat：运行”

如果我调试我的应用程序，它可以完美运行

```
http://localhost:8080/app/ 
```

但我想在该服务器上添加应该可以访问的额外数据

```
http://localhost:8080/data/ 
```

我在哪里可以添加该数据目录？我是否必须将其添加到某些属性文件中才能充当虚拟主机？

我尝试添加这些目录，但都没有成功：

```
/workspace/app/target/tomcat/webapps/data/
/workspace/app/target/tomcat/work/localEngine/localhost/data/ 
```

感谢您的帮助，弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:18:46.037

您的应用程序上下文根是`/app`，在 Tomcat 中默认是您的战争的名称。`/src/main/webapp`Tomcat 会将文件夹下的内容映射到`/app`Tomcat 实例的上下文根目录中。您将需要部署另一个名为 data.war 的模块，以便它映射到`http://localhost:8080/data`.

或者，如果您希望它是同一个模块，您可以将服务器根设置为应用程序的上下文根，`server.xml`在 Tomcat 配置中进行编辑：

```
<Context path="" docBase="webapps/app" debug="0" reloadable="true">  
</Context> 
```

然后在应用程序中拥有您的文件夹结构，如下所示：

```
src/main/webapp
->app
-->Content of your original app, mapped to http://localhost:8080/app
->data
-->Content of data, mapped to http://localhost:8080/data 
```

# maven - 我的 proto 分支的正确 maven 版本是什么？

> ID：14335210
> 
> 赞同：1
> 
> 时间：2013-01-15T10:02:23.063
> 
> 标签：maven, versioning

在最近使用 maven3 构建的一个大型项目中，我们目前正在开发我们的 4.1-SNAPSHOT 分支，以便交付新的开发。但我需要创建一个开发一些实验性功能的第二个分支。在开发结束时做出决定后，这些可能会或可能不会被反向集成。
为此，我通常会创建一个名为“proto”的新分支。我也需要这个版本处于快照模式，我尝试选择一个兼容 Maven 的版本。
我查阅了 Maven 参考指南[http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-syntax.html](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-syntax.html)并得到了“4.1-proto-01-SNAPSHOT”。这是正确的还是我可能会导致无法预料的冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:08:25.333

多一点 Maven 将是“4.1.0-proto-01-SNAPSHOT”，否则没关系。

# actionscript-3 - AS3 AIR 为时间戳添加 24 小时

> ID：14335215
> 
> 赞同：0
> 
> 时间：2013-01-15T10:02:35.603
> 
> 标签：actionscript-3, air

我正在尝试将 24 小时添加到生成的时间戳中：

```
var date:Date = new Date();
var timeStamp:Number = date.time; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T10:14:49.433

您可以在时间戳中添加 24 小时（以毫秒为单位）

```
timeStamp += 60 * 60 * 24 * 1000; //24 hours in milliseconds 
```

# c# - 使用c#将上传到服务器的文件作为二进制字符串从javascript保存到文件

> ID：14335216
> 
> 赞同：0
> 
> 时间：2013-01-15T10:02:35.947
> 
> 标签：c#, javascript, asp.net, asp.net-mvc-3

我正在使用 js File API 并使用 FileReader 读取文件，如下所示：

```
var reader = new FileReader();
reader.onload = handleReaderLoad;
reader.readAsBinaryString(file); 
```

这是阅读器负载处理程序，我在其中获取文件内容并使用 jquery.ajax 调用将其发送到服务器：

```
function handleReaderLoad(evt) {
        fileToSend.Content = evt.target.result;

        $.ajax({
            url: '@Url.Action("Upload")',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ file: fileToSend }),
            success: function (result) {
                alert('success');
            }
        });
    } 
```

在服务器端我有：

```
[HttpPost]
        public string Upload(UploadedFile file)
        {
            // save file
            try
            {
                FileStream fs = new FileStream(@"c:\" + file.Name, FileMode.Create);
                BinaryWriter bw = new BinaryWriter(fs);
                bw.Write(Encoding.UTF8.GetBytes(file.Content));
            }
            catch (Exception) { }
            return null;
        } 
```

UploadedFile 是：

```
public class UploadedFile
    {
        public string Name { get; set; }
        public string Content { get; set; }
    } 
```

我设法保存文件，但内容不同。我知道它与编码有关，但我只是没有在服务器上获得相同的文件。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:14:48.963

您可以从上传的文件中读取所有内容，然后保存所有内容。
例如 ：-

```
 Stream fileStream = fileUpload.PostedFile.InputStream;
 StreamReader sr = new StreamReader(fileStream);
 string str=sr.ReadToEnd();
 StreamWriter sw = new StreamWriter(fs);// your FileStream :-
 sw.WriteLine(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:24:56.160

另一个解决方案可能是（我也在使用）。而不是使用 JSON 和 AJAX 组合。您可以编写 HTTPHandler 来上传文件，并可以使用 Ajax 调用它，就像您在代码中所做的那样。

它将允许您上传任何类型的文件，并且代码更改[最少](http://blogs.technet.com/b/sateesh-arveti/archive/2010/11/19/ajax-file-upload-using-jquery.aspx)

# ruby-on-rails-3 - 回形针文件大小验证错误消息

> ID：14335228
> 
> 赞同：3
> 
> 时间：2013-01-15T10:03:38.763
> 
> 标签：ruby-on-rails-3, paperclip, paperclip-validation

```
validates_attachment_size :image, :less_than => 5.megabytes 
```

给出错误信息

```
Image file size must be less than 5242880 Bytes 
```

这不是很用户友好..有没有办法让信息成为

```
Image file size must be less than 5 MB 
```

? 没有自己设置自定义消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:36:32.050

没有。您需要设置自定义消息以获取该格式。您可以从回形针源中看到它们将大小转换为[`human_size`](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/validators/attachment_size_validator.rb#L66).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-10T06:42:05.180

事实上，你可以。

我刚刚添加了一条消息。

```
validates_attachment_size :cover_image, :in => 0.megabytes..6.megabytes, :message => 'must be smaller than 6mb' 
```

我现在的错误是：“Cover_image 必须小于 6mb。”

（如果我可以更改“Cover_image”以使用户更友好，那就太好了。但仍然优于“Cover_image 文件大小必须小于 5242880 字节”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-13T11:29:09.067

您使用哪个版本的 gem？
我有同样的问题，将其更新到 4.2 解决了问题（该函数`human_size`现在使用该`ActiveSupport::NumberHelper.number_to_human_size`函数以使其可读）

# c# - 带有布尔条件的 Linq2Entites Count() 不能像“我认为它会”那样工作？

> ID：14335230
> 
> 赞同：4
> 
> 时间：2013-01-15T10:03:52.687
> 
> 标签：c#, linq, entity-framework-4, linq-to-entities

鉴于以下非常简单的 linq 语句

```
vm.VerifiedGroups = db.ReportGroups.Count(g => g.Verified); 
```

或者

```
vm.VerifiedGroups = db.ReportGroups.Count(g => g.Verified == true); 
```

bool在哪里`Verified`，我收到一个异常说 linq-2-entities 不支持？

错过了一些非常简单的事情 - 或者我应该从以下选项中选择一个：

```
a)
vm.VerifiedGroups = db.ReportGroups.Where(g => g.Verified).Count(); 
```

或者

```
b)
vm.VerifiedGroups = db.ReportGroups.ToList().Count(g => g.Verified); 
```

这两种方法都有效（我的列表只有 30-50 长，所以 ToList 不是问题）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T10:09:15.477

你没有错过任何东西。Linq to Entity 不支持使用谓词计数。请参阅 msdn 文章[支持和不支持的 LINQ 方法（LINQ to Entities）](http://msdn.microsoft.com/en-us/library/bb738550.aspx)

是的，您应该使用第一个选项，因为`ToList()`将执行查询并将所有实体带入内存：

```
vm.VerifiedGroups = db.ReportGroups.Where(g => g.Verified).Count(); 
```

即使你的表中没有很多记录`ReportGroups`——你为什么要做一些更慢、使用更多电脑、数据库和网络资源的事情？比较传输一个整数值与传输 50 个`ReportGroup`实体的所有字段、从创建 .net 对象`DataReader`（并保持打开的连接）、迭代创建的列表、对每个`DataReader`实体执行谓词方法。我认为转移一个整数值在这里获胜。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T10:06:09.440

我会选择第一个选项，因为*第一个选项不会带来所有记录*来计算计数。在第二个选项`ToList`中，方法将带来数据并对其应用计数。

```
vm.VerifiedGroups = db.ReportGroups.Where(g => g.Verified).Count(); 
```

# excel - Excel 过滤器 - 仅显示过滤器中的相关值

> ID：14335237
> 
> 赞同：2
> 
> 时间：2013-01-15T10:04:07.303
> 
> 标签：excel, pivot, pivot-table

假设我在 excel 数据透视表中有两个过滤器。

两者最初都会显示筛选列的选定范围内的所有值。

当我仅在过滤器 1 中选择几个值时，过滤器 2 仍会继续显示基础数据中所选范围内特定过滤器列中的所有值。

我想要做的是当在一个过滤器中选择某个值时，第二个过滤器会自动重新加载以仅显示与过滤器 1 中选择的值相关的值。

任何帮助或解决方法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-04T07:13:26.867

尝试在表格上单击鼠标右键并选择数据透视表选项，然后转到“数据”选项卡，然后在：每个字段要保留的项目数下选择“无”。我认为这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-10T16:45:24.510

添加切片器而不是普通的下拉过滤器可以解决此问题。因为在切片器中，不可用的选项是灰色的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-06T05:44:06.540

右键单击切片器，选择“切片器设置”选择“隐藏没有数据的项目”

# c# - 当鼠标悬停在应用栏中的按钮上时弹出菜单

> ID：14335239
> 
> 赞同：0
> 
> 时间：2013-01-15T10:04:15.073
> 
> 标签：c#, xaml, windows-8, popup, appbar

微软建议将所有命令放在底部的应用栏，当我的鼠标悬停在应用栏的按钮上时，我想显示一个详细命令的弹出菜单，鼠标从按钮上移开后，弹出菜单消失。找了半天还是没找到解决办法，有大神可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:30:10.080

您应该使用[上下文菜单控件](http://csell.net/2012/11/16/31-days-of-windows-8-day-16-context-menus/)

但 Windows 8 也是平板电脑和触控设备的系统，因此事件 OnMouseOver 不是好方法。更好地处理右键单击事件。

# javascript - 如何使用jquery清除父页面中的所有文本框字段

> ID：14335241
> 
> 赞同：4
> 
> 时间：2013-01-15T10:04:30.050
> 
> 标签：javascript, jquery

他们有什么方法可以使用 jquery 或 javascript 清除父表单中的所有文本框值。现在我正在使用清除每个字段

```
var parentDoc1 = window.opener.document;
parentDoc1.getElementById(id).value=""; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:21:37.767

要清除*所有*文本框，您可以使用以下命令：

```
$(parentDoc1).find('input[type=text]').val(''); 
```

如果某些文本框（例如，带有`mytextboxclass`类、带有`mytextboxid`id 等的文本框）不能被清理，那么您可以`:not`在选择器中使用以排除那些：

```
$(parentDoc1).find('input[type=text]:not(.mytextboxclass,#mytextboxid)').val(''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:08:40.997

你也可以这样使用

```
$('input:text').val(''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:06:15.200

在所有输入字段中使用`class`....

试试这个..

```
 $('input.className').val(''); 
```

[在这里](http://jsfiddle.net/9VxaD/1/)摆弄

或者

this 但这会将文档中所有输入字段的值设为空

```
$('input[type="text"]').val(''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:08:25.837

如何清除所有文本框：

```
$('input[type="text"]').val(''); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T10:08:41.187

这将清除所有带有 id 的父级文本区域的值`parent`。

```
$('#parent').children('textarea').val(''); 
```

这是一个例子[http://jsfiddle.net/Y2t7x/1/](http://jsfiddle.net/Y2t7x/1/)

重要的是该脚本仅清除与 直接同级的文本区域，而`#parent`不是嵌套区域。

如果您想重置父级兄弟姐妹之间的文本区域的值，您应该替换`children`为`find`.

如果您希望脚本使用文本输入，请使用：

```
$('#parent').children('input[type=text]').val(''); 
```

或者

```
$('#parent').find('input[type=text]').val(''); 
```

再次取决于您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T10:09:30.790

您想在其他选项卡/窗口中选择页面内容吗？还是您想获取父页面内容，因为您的上下文是您在 iframe 中？如果是最后一个，请不要使用

```
window.opener.document; 
```

改用以下

```
window.parent.document; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T10:10:35.047

如果你仍然使用 jQuery，你可以只使用 .reset() 而不是 .val('')。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-15T10:41:15.087

您还可以在父窗口上创建函数并从子窗口调用它。在子窗口中调用父函数如下。

```
<script>
function ClearFromChild(ARGS)
{
    window.opener.clearinparent(ARGS);
}
</script>
```

现在只需`clearinparent`在父窗口中声明函数即可。
干杯，

# iphone - social.framework 不包括类

> ID：14335243
> 
> 赞同：0
> 
> 时间：2013-01-15T10:04:36.007
> 
> 标签：iphone, xcode, ipad

我在“Link Binary With Libraries”中添加了 social.framework。在运行项目时，出现找不到“Social/SLRequest.h”文件的错误。我已经检查了项目层次结构中的 social.framework，但它不包含任何头类（Social.framework 为空）。请帮助我为什么 social.framework 是空的？

注意：Social.framework 在 Link Binary With Libraries 中不可用。我必须从“添加其他”选项中添加它。Social.framework 位于我的下载中，它包含那里的标头类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:09:07.873

使用 xcode 4.5 或更高版本。social.framework 从 iOS 6.0 开始可用。要使用社交框架 API，请将框架包括为

```
#import <Social/Social.h>
```

# php - jquery中header('Refresh: 2, blah.php')的等价物是什么

> ID：14335244
> 
> 赞同：0
> 
> 时间：2013-01-15T10:04:38.317
> 
> 标签：php, jquery

我想知道是否有等效的代码或 jquery 的任何功能应该替换`header('Refresh: 2, blah.php')`php

我试过`window.location.href = "blah.php"`但不能满足我的需求，..，我希望在单击链接后它应该暂停一段时间然后重定向，..，。有什么办法吗，谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:08:50.017

如果您的意思是暂停后重定向到某个页面，则类似于：

```
setTimeout(function() {
    window.location.href = 'http://www.somesite.com/somepage.php';
}, 1500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:07:42.227

如果要刷新当前页面，请使用`setTimeout()`：

```
$('#myLink').click(function(e) {
    e.preventDefault();
    setTimeout(function() {
        window.location.assign('blah.php');
    }, 2000);
}); 
```

# android - AndEngine revoluteJoint 示例需要说明

> ID：14335248
> 
> 赞同：0
> 
> 时间：2013-01-15T10:04:45.167
> 
> 标签：android, andengine

我想对 AndEngine revoluteJoint 示例进行一些说明。在下面的代码中，connectionLine 具有 x1,y1 和 x2,y2 相同的值。所以这应该创建一个点。为什么这样做？

```
final Line connectionLine = new Line(anchorFaceX + spriteWidth / 2, anchorFaceY +
spriteHeight / 2, anchorFaceX + spriteWidth / 2, anchorFaceY + spriteHeight / 2, 
this.getVertexBufferObjectManager()); 
```

下面的 setPosition 做了什么？它是否会变换线条以使其看起来在旋转？

```
this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(anchorFace, 
anchorBody, true, true){
@Override
public void onUpdate(final float pSecondsElapsed) {
super.onUpdate(pSecondsElapsed);
final Vector2 movingBodyWorldCenter = movingBody.getWorldCenter();
connectionLine.setPosition(connectionLine.getX1(), connectionLine.getY1(),   
 movingBodyWorldCenter.x * PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT, 
movingBodyWorldCenter.y * PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT);

}
}); 
```

我将不胜感激。我需要创建一条在身体移动时与身体刚性连接的线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:40:41.297

我能够将身体与在身体移动时保持连接的线连接起来，如下所示

```
// Join adjacent bodies
          if(i > 0) {
                 connectionLine[i] = new Line(centers[i][0],centers[i][1],centers[i-1][0],centers[i-1][1],lineWidth,this.getVertexBufferObjectManager());
                 connectionLine[i].setColor(0.0f,0.0f,1.0f);
                 this.mScene.attachChild(connectionLine[i]);     

          }

          // Join the first body with the last body
          if(i == 19){
              connectionLine[0] = new Line(centers[0][0],centers[0][1],centers[19][0],centers[19][1],lineWidth,this.getVertexBufferObjectManager());
              connectionLine[0].setColor(.0f,.0f,1.0f);
              this.mScene.attachChild(connectionLine[0]);   
          }

          // Update connection line so that the line moves along with the body
          this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(circle[i], circleBody[i], true, true) {
              @Override
                public void onUpdate(final float pSecondsElapsed) {
                    super.onUpdate(pSecondsElapsed);
                    for(int i=1;i < nBodies;i++) {
                        connectionLine[i].setPosition(circle[i].getX(),circle[i].getY(),circle[i-1].getX(),circle[i-1].getY());

                    }
                    connectionLine[0].setPosition(circle[0].getX(),circle[0].getY(),circle[19].getX(),circle[19].getY());
                }
          }       

        ); 
```

# mysql - 没有网络访问的本地 MySQL 连接（不提及端口）

> ID：14335250
> 
> 赞同：2
> 
> 时间：2013-01-15T10:04:47.203
> 
> 标签：mysql, database

我想以类似的方式访问本地 MySQL 文件，可以使用 SmallSQL 访问它。例如。

```
 String driver = "smallsql.server.SSDriver"; 
    String url = "jdbc:smallsql:C:\\Users\\user\\Desktop\\SQuirreL\\db";

    Class.forName(driver).newInstance();
    conn = DriverManager.getConnection(url);
    System.out.println("Connected to smallSQL database"); 
```

如您所见，我可以将我的 db 文件夹移动到本地计算机上的任何位置，我所要做的就是提及 db 文件夹的路径以与之连接。mysql中的类似实现，如下所示：

```
 try 
    {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        conn = DriverManager.getConnection(jdbc:mysql://localhost:3306/db?characterEncoding=UTF8&user=root&password=#$%^";);
        System.out.println("Connected to MySQL database");
    } 
```

所以我想知道是否有类似的方法来处理 MySQL 数据库，就像我们可以使用存储在 $path_to_myql/mysql/data/db 中的 SmallSQL 一样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:06:56.180

根据[文档](http://dev.mysql.com/doc/refman/5.1/en/connecting.html)，本地套接字连接仅适用于 Unix 系统（不适用于 Windows）。

更重要的是，您必须意识到 SmallSQL 与 SQLite 非常相似，因为它的整个数据库引擎只是一个由您的进程链接的库，这就是您可以直接在磁盘上打开和访问数据库的原因。

另一方面，MySQL 运行完全专用的服务器守护程序，它服务于多个客户端并完全控制其内部数据库文件。它可以在同一台物理机或远程主机上运行，​​您无法告诉它您的数据文件在哪里。

长话短说 - 你应该忍受它。MySQL 更复杂，但运行速度也比 SmallSQL 或 SQLite 快得多。

# php - 将PHP双引号转换为单引号

> ID：14335251
> 
> 赞同：1
> 
> 时间：2013-01-15T10:04:48.357
> 
> 标签：php, string, file-io

我正在创建一个 PHP 类，它可以将字符串数组写入文件，然后逐行读取。

我需要确保像 '\n' 这样的特殊字符按字面意思写入文件，而不是弄乱文件的格式。这似乎只在使用单引号字符串时才有效。

```
<?php
//EXAMPLE ONE - DOUBLE QUOTES ----------
$user_input = "This is the \n input.";
file_put_contents("input.txt", $user_input);
//OUTPUT
//
//This is the
// input.
//

//EXAMPLE TWO - SINGLE QUOTES ----------
$user_input = 'This is the \n input.';
file_put_contents("input.txt", $user_input);
//OUTPUT
//
//This is the \n input.
//
?> 
```

即使 $user_input 在双引号中，如何实现示例二的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:07:35.323

使用双引号时，反斜杠`\`字符会启用特殊用法，例如`\n`换行符（在文本内）。

要在文本中使用实际的反斜杠，需要添加两个：

```
$user_input = "This is the \\n input."; 
```

有关反斜杠用法的更多信息，请查看[文档](http://php.net/manual/en/language.types.string.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:08:10.680

### 不！你不能那样做。

从[手册](http://php.net/manual/en/language.types.string.php)：

> 如果字符串用双引号 (") 括起来，PHP 将为特殊字符解释更多的转义序列。

您需要使用另一种方法，例如添加双斜杠。

```
str_replace('\', '\\', $user_input); 
```

这将转义所有特殊字符。现在，如果有双引号，那么它将按照您需要的方式显示。

或者，您也可以这样做......打印输出时，您可以通过这种方式将特殊字符转义为它们的字符：

```
str_replace(array("\n", "\t"), array('\n', '\t'), $user_input); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:09:15.870

这是因为 \n 在这里被视为换行符，所以你转义了这个字符。将其更改为 \\n

```
str_replace("\n","\\n", $user_input); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:16:29.810

正确答案如下：

```
$user_input = str_replace (array("\n","\r"), " ", $user_input); 
```

它用一个似乎最方便替换的空格替换换行符（但可能会根据字符串的未来用途进行更改。比如说，如果你要在 HTML 中打印它，`'<br>'`会是更好的替换）

尽管引号与它无关。它们只是*PHP 语法*的一部分，在用户输入中没有任何特殊含义

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-16T12:05:36.833

```
$user_input = "This is the \n input." 
```

您必须使用`\`任何特殊字符。如果你想打印`text is 'abcd' here` 所以你必须写`\'abcd\'`来打印这个。

# eclipse - 使用 TEE 从 Eclipse 连接到 TFS 服务器时，“凭据不能为空”

> ID：14335259
> 
> 赞同：1
> 
> 时间：2013-01-15T10:05:06.837
> 
> 标签：eclipse, tfs, team-explorer-everywhere

我在使用 Team Explorer Everywhere 将我的 Eclipse 工作区连接到我的 TFS 服务器时经常遇到问题。

当我在“添加现有团队项目”对话框中选择我的服务器时，我得到一个标题为“连接失败”的对话框，上面写着“连接到服务器时出错：凭据不能为空”

它不会每次都发生，但肯定经常发生。在出现此错误的同时，我可以使用 Visual Studio 2010 成功连接到同一台服务器。

我在 Windows XP Professional x64 Edition SP2 上有带有 TFS 插件 11.0.0.201212121120 的 Eclipse Indigo SR2（内部版本 20120216-1857）。

我按照[http://blogs.msdn.com/b/davidmcg/archive/2007/05/25/chang-team-foundation-server-credentials.aspx](http://blogs.msdn.com/b/davidmcg/archive/2007/05/25/changing-team-foundation-server-credentials.aspx)中的说明确保没有任何不需要的缓存凭据（尽管我没有任何其他可以使用的凭据）。

这个错误是什么意思？我假设我的 Windows 凭据将用于连接到 TFS 服务器，并且可以证明这是有效的（总是使用 VS2010，有时使用 Eclipse/TEE）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:34:02.380

我一直有完全相同的问题。我的解决方案是清除 TFS 客户端客户端的缓存文件夹。它们位于：

C:\Documents and Settings\\Local Settings\Application Data\Microsoft\Team Foundation\3.0\Cache

删除该文件夹中的所有内容。您的机器上可能安装了多个版本。确保将它们全部清洗干净。
1.0/缓存
2.0/Cahce
等...

有时有效的解决方法是在 Eclipse 之前打开 Visual Studio。不知何故，当 VS 打开并通过 TFS 验证时，Eclipse 给出的错误更少。

这是我之前问过的一个类似问题。一个来自 TEE 开发团队的人回答了这个问题。我敢打赌它值得一看： [Eclipse 中的 Team Explorer Everywhere 警告](https://stackoverflow.com/questions/13766690/team-explorer-everywhere-warning-in-eclipse/13766782#comment19019820_13766782)

# android - 通过 android 应用程序预览相机

> ID：14335260
> 
> 赞同：0
> 
> 时间：2013-01-15T10:05:07.337
> 
> 标签：android

为了预览相机，我在下面编写了代码段。我无法获得任何预览。你能帮我解决问题吗？

我已经为我的应用程序配置了权限；

```
 <uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

我已经创建了表面位置

```
<SurfaceView
    android:id="@+id/cameraView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" /> 
```

我在下面编写了代码段来预览相机；

```
public class MainActivity extends Activity  {

SurfaceView surfaceView;
SurfaceHolder surfaceHolder;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        getWindow().setFormat(PixelFormat.UNKNOWN);
        surfaceView = (SurfaceView)findViewById(R.id.cameraView);
        surfaceHolder = surfaceView.getHolder();
}

 private void preview ( ) {

    try {
             camera.setPreviewDisplay(surfaceHolder);
             camera.startPreview();
    } catch ( IOException void_) {
        ;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:03:12.193

您可以使用..从相机捕获图像

1.  **意图**（打开默认相机并捕获图像）
2.  **Camera API**（获取图像预览，也可以自定义相机功能）

请阅读这篇文章逐步解决方案，我发现这很有帮助

[**Android 相机 API - 教程**](http://www.vogella.com/articles/AndroidCamera/article.html)

如果您在这方面有任何问题，请告诉我，我已经完成了

**编辑：**

您可以使用管理策略禁用相机

在这里查看[**官方文档**](http://developer.android.com/guide/topics/admin/device-admin.html)和示例代码，[**这篇**](http://marakana.com/s/post/1291/android_device_policy_administration_tutorial)文章也可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:12:28.930

在 4.0 之前，Google 提供的 Android SDK 除了替身动画外，不提供任何相机模拟。由于谷歌还没有提供一个有效的实现（甚至是一个可用的日期）。

有一些链接可以帮助您实现您的要求。请参考[这个](http://www.tomgibara.com/android/camera-source)和[这个](http://www.edumobile.org/android/android-tutorial/camera-preview-example-in-android-programming/)链接。

希望它可以帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:19:01.013

实现此类以进行相机预览，并在您的活动的 oncreate 方法中调用其构造函数。

```
 public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mSurfaceHolder;
    private Camera mCamera;

    @SuppressWarnings("deprecation")
    public CameraPreview(Context context, Camera camera) {
        super(context);
        this.mCamera = camera;
        this.mSurfaceHolder = this.getHolder();
        this.mSurfaceHolder.addCallback(this);
        this.mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder surfaceHolder) {
        try {
            mCamera.setPreviewDisplay(surfaceHolder);
            mCamera.startPreview();
        } catch (IOException e) {
            // left blank for now
        }
    }

    public void surfaceDestroyed(SurfaceHolder surfaceHolder) {
        mCamera.stopPreview();
        mCamera.release();
    }

    public void surfaceChanged(SurfaceHolder surfaceHolder, int format,
            int width, int height) {
        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(surfaceHolder);
            mCamera.startPreview();
        } catch (Exception e) {
            // intentionally left blank for a test
        }
    }
} 
```

# vim - 使用 Vim 时的脚本快捷方式

> ID：14335268
> 
> 赞同：2
> 
> 时间：2013-01-15T10:05:29.343
> 
> 标签：vim

我刚刚了解到我可以使用 :%!/path/to/script 在我的 vim 文本窗口上运行 perl 脚本有没有办法`set filter1 = /path/to/script`让我只需要输入`:%!filter1`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:14:54.480

您可以使用`cabbrev`这样创建命令行缩写：

```
:cabbrev filter1 /path/to/script 
```

如果您的类型`filter1`后跟一个空格，它将扩展为`/path/to/script`. `%!`如果你只在这个组合中使用它，你也可以将它放入缩写中。

显然，如果您经常使用此过滤器，则为此创建键绑定可能会更容易：

```
map ,f :%!/path/to/script<cr> 
```

这将映射`,f`到执行您的过滤器...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:21:47.287

您还可以将脚本放在`$PATH`.

该`scriptname`命令现在可供 vim（和其他程序）在命令行上使用。

```
:!scriptname<CR> 
```

显然，如果您经常使用该命令，您应该在`~/.vimrc`.

***编辑***

在 Mac OS X 上，所有终端模拟器默认使用登录 shell。这意味着，对于日常终端使用，定义别名、更改您的`$PATH`、设置 shell 变量或导出环境变量的正确位置实际上是`~/.bash_login`or `~/.profile`。在这种情况下，`~/.bashrc`是完全没用的。

但是 MacVim 默认不使用登录 shell。实际上，它甚至不使用交互式外壳。直接后果是，默认情况下，MacVim 能够看到环境变量 ( `export FOO='bar'`)，但看不到我们的别名 ( `alias foo='bar'`) 或 shell 变量 ( ) ，无论`BAZ='foo'`它们是设置在`~/.bash_login``~/.profile``~/.bashrc`

值得庆幸的是，我们只需要更改 Vim 中的一个选项，使其使用交互式 shell，从而查看定义的别名`~/.bashrc`：

```
:set shellcmdflag=-ic 
```

但是我们最终得到了两个配置文件：`~/.profile`和`~/.bashrc`. 第一个中定义的别名在所有终端会话中可用，但在 Vim 中不可用，第二个中定义的别名在 Vim 中可用，但在常规终端会话中不可见。

一种解决方案可能是将`-l`标志添加到上面的选项中，以使 MacVim 运行交互式登录 shell（从而利用我们在`~/.profile`.

另一个解决方案是`source ~/.profile`像`~/.bashrc`我几年前所做的那样。

但是，正如@ZyX 在他的评论中正确建议的那样，整个事情可能会变得混乱并且可能存在性能问题。

在我看来，在 Mac OS X 上，最好的做法可能是保留`shellcmdflag`其默认值，将您在日常终端使用中需要的任何别名/变量/函数放入`~/.profile`（不是`~/.bashrc`因为它不是默认执行），只需将您的自定义脚本放在您的`$PATH`.

# wordpress - 如何从wordpress中的标题链接到帖子？

> ID：14335269
> 
> 赞同：0
> 
> 时间：2013-01-15T10:05:30.297
> 
> 标签：wordpress, customizing

我正在显示来自特定类别的帖子，但我无法将他们的标题链接到他们所属的帖子。需要帮忙。

```
<?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args= array(
        'category_name' => 'nyheder', // Change these category SLUGS to suit your use.
        'paged' => $paged,
        'numberposts' => 1 
);
query_posts($args); ?>

<?php 
while ( have_posts() ) : the_post(); 
?>
<p class="colorWhitesmoke"><?php the_date(); ?></p>
<a href="<!--THIS IS WHERE I HAVE NO IDEA WHAT TO WRITE... i was trying the following, but didn't quite do the trick. --><?php get_permalink( $paged ); ?>">

<h3 class="colorWhitesmoke"><?php the_title(); ?></h3>
</a>
<div class="colorWhitesmoke"><?php the_excerpt(); ?></div>

<?php endwhile; 
the_bootstrap_content_nav();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:13:24.113

在 wordpress 的“循环”中，您可以简单地使用`echo get_permalink()`, 所以没有参数。或者，`the_permalink()`是一个自动回应这个的等价物。

您的代码将变为：

```
<a href="<?php the_permalink(); ?>"> ... </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:09:38.510

[the_permalink](http://codex.wordpress.org/Function_Reference/the_permalink)是您需要的...

# grails - 消除 URL 中的控制器和操作

> ID：14335271
> 
> 赞同：0
> 
> 时间：2013-01-15T10:05:43.593
> 
> 标签：grails

我有一些页面。一个是“我们是谁”页面（登录页面），有 3 个“注册”页面，每个页面询问不同的内容，还有一个“联系”页面，包含位置、电话、电子邮件等信息. 因此，当用户访问第二个注册页面时，URL 会显示“/controller/action”。我想消除 URL 中的控制器部分，如果操作在 URL 中命名为“reg3”，则它必须显示“registration3”，依此类推。

我已经读过它可以通过 URLMappings.groovy 文件实现，但我并不完全理解它是如何工作的。这是我的 URLMappings.groovy

```
static mappings = {
    "/$controller/$action?/$id?"{
        constraints {
            // apply constraints here
        }

            "/registro"
             {
                controller = "Registro"
                action = "registro_page"
             }
             "/registro2"
             {
                 controller = "Registro"
                 action = "reg2"
             }

             "/registro3"
             {
                 controller = "Registro"
                 action = "reg3"
             }
             "/contacto"
             {
                 controller = "Registro"
                 action = "contacto"
             }
             "/quienes_somos"
             {
                 controller = "Login"
                 action = "auth"
             }

    }
    "/registro" (controller:'Registro', action:'registro_page')
    "/registro2" (controller:'Registro', action:'reg2')
    "/registro3" (controller:'Registro', action:'reg3')
    "/contacto" (controller:'Registro', action:'contacto')
    "/quienes_somos" (controller:'Registro', action:'home')
    "/"(controller:'redirigir',action:"redirigir")
    "500"(view:'/error')

    "/login/$action"(controller: "login")
    "/logout/$action"(controller: "logout")
} 
```

正如我所说，我不确定我是否知道我在做什么......

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:15:13.243

您有许多逻辑错误，最明显的是

```
 "/registro"
         {
            controller = "Registro"
            action = "registro_page"
         } 
```

属于默认映射的块*内的块。*`"/$controller/$action?/$id?"`你应该从完全删除那些开始，只留下你

```
static mappings = {
    "/$controller/$action?/$id?"{
        constraints {
            // apply constraints here
        }
    }
    "/registro" (controller:'Registro', action:'registro_page')
    "/registro2" (controller:'Registro', action:'reg2')
    "/registro3" (controller:'Registro', action:'reg3')
    "/contacto" (controller:'Registro', action:'contacto')
    "/quienes_somos" (controller:'Registro', action:'home')
    "/"(controller:'redirigir',action:"redirigir")
    "500"(view:'/error')

    "/login/$action"(controller: "login")
    "/logout/$action"(controller: "logout")
} 
```

这现在应该可以工作了，至少可以让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:16:25.050

根据[文档](http://grails.org/doc/latest/guide/single.html#urlmappings)，您正在做的事情应该不会太远。

上半部分对我来说似乎是错误的，单线映射

```
"/registro" (controller:'Registro', action:'registro_page') 
```

应该足够了。

然后你必须照顾脚手架视图，他们不知道你的自定义 URL 映射并且仍然创建“旧”链接。您必须手动调整所有自动生成的链接。

# pseudocode - 拓扑排序伪代码

> ID：14335272
> 
> 赞同：1
> 
> 时间：2013-01-15T10:05:44.447
> 
> 标签：pseudocode, topological-sort

我有以下拓扑排序的伪代码

```
Repeat:
Find a vertex with no successor
Remove it from graph
Put It at beginning of list
Until graph is empty 
```

我的问题是，是否应该将其修改为“查找没有前任的顶点”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T20:15:25.097

是的，它应该。继任者没有意义，当然，除非您在执行拓扑排序之前反转了所有边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-18T19:54:42.190

拓扑排序是一种绘制所有边都向前（水平）的图形的方法。假设你有一个图 G（G 应该是一个 DAG）并且你想做一个拓扑图。拓扑排序的伪代码：重复：找到一个没有传入边的顶点删除G中的顶点和边将它放在列表的开头直到图为空

您还可以使用 DFS 进行拓扑排序。那就是在你的 G 上运行 DFS，每次完成一个顶点时，都会在拓扑排序列表的头部插入它的标识符。当 G 中的所有顶点都被发现时，完成的列表就是拓扑排序。该算法的时间复杂度与 (V + E) 的大 O 的 DFS 相同。

# asp.net - publish vs 2010 website to local iis

> ID：14335283
> 
> 赞同：0
> 
> 时间：2013-01-15T10:06:21.390
> 
> 标签：asp.net, publishing

I struggling on hours to accomplish this.
I have created a web site in **VS 2010.** Now I need to host this on my local IIS(My development PC) for the testing.

I created a web site on `inetmgr` and publish the web site using VS. Now I can access it. It is Fine.

But it is not functioning properly now.
I have a web form and once I submit it do some steps which I coded in my code behind and redirect to another page (This is what needs to be happen).

But now it is not happening.Once I click on the button it will reload the page.

In side the publish folder I can only see the `.aspx` files. Cannot find `.cs` files.

What is the wrong I did here.
Have I missed something? If you can plesae provide me some urls to compete step by step guidance.

**Edit**
Default.aspx.

```
 string filePathVal = ((TextBox)CustomerDataPanel.FindControl("FilePath")).Text;

        if (!File.Exists(filePathVal))
        {
            errorMsgPannel.Visible = true;
            return;
        }

        Response.Redirect("result.aspx?status=success", false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:29:06.390

Finally I Fixed my issue. But still have doubt why previous approach did not work. I used [Creating a Web Project as an IIS Virtual Root](http://msdn.microsoft.com/en-us/library/a1zz9df4%28v=vs.100%29.aspxs) this to fix my issue. :)

# python - Django URL：匹配固定数量的可选参数？

> ID：14335284
> 
> 赞同：0
> 
> 时间：2013-01-15T10:06:26.400
> 
> 标签：python, regex, django, django-urls

我想在我的 Django URL 调度程序中匹配以下形式的 URL：

```
 /(?P<location>\w+)-holidays/in-(?P<month>\w+)/to-(?P<top_price>\d+) 
```

复杂的一点是，我希望路径的三个独立元素中的任何一个都是可选的。所以我想匹配以下所有内容：

```
 /venice-holidays
 /venice-holidays/in-june/
 /venice-holidays/in-june/to-1000
 /venice-holidays/to-1000
 /in-june
 /in-june/to-1000
 /to-1000 
```

我可以用 Django URL 模式做到这一点吗？抱歉，如果这是重复的，我已经进行了一些搜索，但找不到确切的问题。

更新：我计划在视图中检查`location`等`month`是否有效，而不是在 URL 中为它们提供模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:28:39.277

我做过类似的事情，我这样解决了：

**网址.py：**

```
url(r'^(?P<location>[\w]+)/(?P<month>[\w]*)/?(?P<something>[\w]*)/?', ...), 
```

**视图.py：**

```
def course_list(request, location, month = None, something = None):

    if month:
        # do stuff 
```

您真的希望将“基本路径词”作为您的网址中的第一项。

如果你这样做：

```
url(r^(?P<location>[\w]*) ... ), 
```

这将几乎匹配所有网址

# mysql - Vb6 记录更新错误

> ID：14335287
> 
> 赞同：1
> 
> 时间：2013-01-15T10:06:39.310
> 
> 标签：mysql, ms-access, datagrid, vb6

在 vb6 中，包含以下值的表单，[这里是示例值的屏幕截图链接！](http://tinypic.com/r/j0bg4k/6)

我正在使用 Ms Access 2007，它包含一个名为“studentexamdetail”的表，其中包含

```
 heading(Admno,Semester,Subjectcode,Regular_Arrear,Fee) 
```

我的疑问是当我点击上面表格中的“保存”按钮时（见截图），然后录取号码，学期，所有主题代码，regular_arrear（我们可以手动编写）和费用应该保存在“studentexamdetail”表中，但它存储第一个只有当我使用这种方法时才有价值！

```
 rs2.Open "select * from studentexamdetail", con, 1, 3
    Do Until rs2.EOF
    rs2.AddNew
    rs2!AdmnNo = admno.Caption
    rs2!semester = semester.Caption
    rs2!Subjectcode = rs.Fields("Subjectcode")
    rs2!Regular_Arrear = "Regular"
    rs2!Fee = rs.Fields("Fee")
    rs2.Update
    rs2.MoveNext
    MsgBox "Record Saved!"
    Loop 
```

我应该进行哪些更改来存储所有值而不是仅存储第一个值？我需要的是，我在下面显示：

```
 Admno Semester Subjectcode Regular_Arrear Fee
    1471     V       RMSC1        Regular     440
    1471     V       RMSC3        Regular     440
    1471     V       RMSC2        Regular     320 
```

我只想像上面一样保存该表中的值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:53:46.167

该代码将新行添加到`rs2`记录集的末尾。然后它调用`.MoveNext`，它将记录集定位在`.EOF`。所以`Loop`条件是 then `True`，这意味着它不会循环。

看来您还有另一个记录集，`rs`. 也许那是您应该循环而不是`rs2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:05:12.763

我通过将“rs2.movenext”替换为“rs.movenext”解决了这个问题，你可以在上面的评论中看到 rs 记录集的值，我只是放置了另一段代码“rs2.close”

```
 Do Until rs.EOF
   rs3.Open "select * from studentexamdetail", con, 1, 3
   rs3.AddNew
   rs3!AdmnNo = admno.Caption
   rs3!semester = semester.Caption
   rs3!Subjectcode = rs.Fields("Subjectcode")
   rs3!Regular_Arrear = "Regular"
   rs3!Fee = rs.Fields("Fee")
   rs3.Update
   rs3.Close
   rs.MoveNext
   Loop
   MsgBox "Record Saved!" 
```

感谢上帝 ！

# java - 使用 JPA 2 在插入时获取自动生成的值

> ID：14335293
> 
> 赞同：1
> 
> 时间：2013-01-15T10:07:04.960
> 
> 标签：java, hibernate, orm, jpa-2.0

我正在使用 JPA 2 对我的应用程序中的一些实体进行建模。在某些模型中，有特定列的值在插入时填充。这种列的一个例子是：

```
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "timestamp", nullable = false, insertable = false, updatable = false)
private Calendar timestamp; 
```

现在我希望在保存时，列的生成值将自动填充，以便它可以从应用程序代码中获得。使用 Hibernate，我可以使用[`@Generated`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/Generated.html)注释，但是我想将 ORM 特定代码保留在我的应用程序之外，并且只使用本机 JPA。

仅使用本机 JPA 是否可行？

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T11:04:44.670

如果您想在 JPA 中保留此逻辑，我想生命[周期侦听](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/listeners.html)器可能会有所帮助。

# json - Visual Studio 2012 IDE 中的 JSON 编辑器（突出显示、折叠、验证）

> ID：14335294
> 
> 赞同：20
> 
> 时间：2013-01-15T10:07:15.423
> 
> 标签：json, visual-studio-2010, visual-studio-2012, editor

这很奇怪，但我一直在寻找没有可接受的结果来找到一个工具来突出显示、验证和折叠 JSON 文件数据以在 Visual Studio 中手动编辑。我什至还没有梦想过 IntelliSense。它是如此流行的格式，没有机会在 IDE 中编辑它？没有插件或本机支持。尝试将 scripteditor 连接到 json 没有效果。

我必须能够以方便的方式手动编辑 json 的最接近的事情是[http://jsoneditoronline.org/](http://jsoneditoronline.org/)的 Google Chrome 扩展，它允许我从本地磁盘打开和保存文件。

我还尝试搜索 Visual Studio 2010 的解决方案 - 但也找不到此版本的任何解决方案。

有人知道我如何在 VS IDE 中拥有此功能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T02:06:25.203

一种选择是使用 Visual Studio 2012 的[Text Highlighter](http://visualstudiogallery.msdn.microsoft.com/fd129629-a1a1-417c-ac80-c9ac7a67b968)扩展，它为以下文本格式提供语法高亮：

*   .json（也提供语法验证）
*   。蝙蝠
*   .cmd
*   .ini
*   。文本文件
*   。日志

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-15T14:49:06.720

**还有另一种可能的解决方法 - Visual Studio 的 Web Essentials 扩展。**

我有一个项目，我将我的数据作为 JSON 保存在文本文件中。我需要**保持良好的 JSON 格式**（没有多余或遗漏的逗号等），而且我需要能够在编辑器中**展开/折叠**JS 对象（节点）。

为此，我使用了 Visual Studio 扩展 - [**Web Essentials**](http://vswebessentials.com/)。您还可以通过 IDE 中的包管理器从 VS Gallery 安装它。这个扩展提供了我需要的功能。

我将我的 file.json 重命名为 file.js（之后 Web Essentials 开始将其重新识别为 JS 文件）。

**唯一的小技巧是添加一个伪变量 'var z =' 以使我的文件 JS 有效。**

![注意在 VS2012 中使用 Web Essentials 打开的 JSON 文件的展开/折叠区域](../Images/1a4ae23c5f41e9dee356b60c3853e29b.png)

最初我的 JSON 数据是：

```
{
    "company": "ABC Company",
    "employees":
    [
        { "firstName": "John", "lastName": "Doe" },
        { "firstName": "Anna", "lastName": "Smith" },
        { "firstName": "Peter", "lastName": "Jones" }
    ]
} 
```

添加**'var z ='**变量后：

```
var z = {
    "company": "ABC Company",
    "employees":
    [
        { "firstName": "John", "lastName": "Doe" },
        { "firstName": "Anna", "lastName": "Smith" },
        { "firstName": "Peter", "lastName": "Jones" }
    ]
}; 
```

当我在服务器端读取 JSON 文件时，我只需要**在将 JSON 内容发送到浏览器之前删除 'var z =' 前缀**。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-26T08:36:03.277

好消息！

在 **Visual Studio 2013 Update 2 的 CTP2 中**添加了一个[**新的 JSON 项目项和编辑器**](http://blogs.msdn.com/b/webdev/archive/2014/02/25/announcing-new-web-features-in-visual-studio-2013-update-2-ctp2.aspx)

![在此处输入图像描述](../Images/0b94a4c0ad4020cb064c99522476c083.png)

# facebook - 无法让行动获得批准，试图“规避”政策？

> ID：14335296
> 
> 赞同：1
> 
> 时间：2013-01-15T10:07:25.690
> 
> 标签：facebook, facebook-graph-api, policy

我正在尝试为我建立的网站提交操作。这是一个电视剧迷的聚集地，可以“签到”剧集，让其他人知道他们看过。我正在尝试通过 Open Graph 在 Facebook 上反映这些签到，过去两周我一直在努力让行动获得批准，至少可以说是令人沮丧的努力。

首先，我在自定义动作中使用了“watch”动词，但这样不行；然后，我重命名了 action `{name} checked in to {episode}`，并且有一个“语法问题”，我真的没有看到。现在我使用了默认的“watch”操作，最后一条拒绝消息由于缺乏清晰度而击败了他们：

```
Your action conflicts with section I.3 of the Platform Policies
(https://developers.facebook.com/policy/). You must not circumvent (or claim
to circumvent) our intended limitations on core Facebook features and functionality. 
```

还有其他网站与我试图实现的目标完全相同（例如[http://trakt.tv/](http://trakt.tv/)），所以我无法理解我是如何试图规避政策的，这显然不是我的目标。

你建议我如何解决这个问题？您对我如何获得批准的功能有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:23:38.930

您不能使用“签到”主要是因为它的内部 Facebook 操作，例如“评论、点赞等”。所以你需要以不同的方式命名那个动作

# android - Unity3D with AllJoyn：多人游戏同步

> ID：14335300
> 
> 赞同：1
> 
> 时间：2013-01-15T10:07:38.250
> 
> 标签：android, network-programming, unity3d, multiplayer, alljoyn

我正在使用 Unity 和 Android 的 AllJoyn 为两人开发一种 Pong-Game。该游戏使用 Unity 的内置物理功能。我是 Unity 网络编程的新手。作为切入点，我使用了 AllJoyn 的聊天示例。

我永久发送桨位置（x-Position 作为双值）。球的位置和速度在开始时发送，每次击球以保持比赛同步。

不幸的是，发送需要几秒钟（滞后）。以这种方式，球在更新位置和速度时跳跃。

如何获得与 AllJoyn 的最佳同步？如何加快信号的发送和接收？聊天示例代码作为多人游戏的入口点不是最优的吗？如果位置已发送，我目前正在研究更新功能。是否有其他解决方案可以知道其他球员何时发送包裹（球和桨位置）？AllJoyn 有什么技巧可以实现良好的多人同步？

我还尝试了完全由每个本地游戏实例控制的球的运动，并且仅依赖于跨设备更新的球拍位置。这里遇到了问题，因为桨位置的传输速度不够快。

你有一些提示给我，如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T20:57:10.563

您应该尝试以 30 FPS（每秒 30 个数据包）的速率发送非常少量的数据。如果您的游戏以 60 FPS 运行，您应该每 2 帧发送一次。

许多设备会因为网络速度（甚至是 WiFi）而滞后，并且数据将被底层系统缓冲或挂起。

我希望这对你有帮助。

# iphone - 带动画的计时器

> ID：14335306
> 
> 赞同：0
> 
> 时间：2013-01-15T10:08:00.843
> 
> 标签：iphone, ios6, nstimer

谁能给我看一些关于iOS倒数计时器动画的参考，我实现了计时器，我想制作一个像图像中的动画，这可能吗？

![在此处输入图像描述](../Images/5666a365cdc6285643303ca00b2c23dc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:16:20.930

您需要继承 UIView 并覆盖 drawInRect: 方法获取当前绘图上下文并绘制您想要的路径并填充路径。参考[Quatz Core 图纸](http://www.google.co.in/url?sa=t&rct=j&q=drawing%20using%20quatz%20core&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fgraphicsimaging%2Fconceptual%2Fdrawingwithquartz2d%2Fdq_layers%2Fdq_layers.html&ei=8Cv1UOadEsr_rAeKyYHIAg&usg=AFQjCNFo2pyYtE9SSLJG2YklO_vTCKLdhA&bvm=bv.41018144,d.bmk)

# tomcat - Tomcat 启动后 localhost 未解析，而是显示奇怪的 GlassFish 服务器消息

> ID：14335307
> 
> 赞同：0
> 
> 时间：2013-01-15T10:08:06.797
> 
> 标签：tomcat, glassfish

我试图在浏览器中找到*[http://localhost:8080](http://localhost:8080)*，但我收到消息服务器已使用 GlassFish 启动，我已停止它，事件卸载它重新启动 PC，但仍然收到以下消息。

从今天开始我就遇到了这个问题，我在上周五使用它并且它工作没有任何问题。

实际上似乎没有 GlassFish 服务器，但它伪装成服务器。

信息：

> Glass Fish Server 3.1.2
> 您的服务器现在正在运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:54:06.863

我解决了这个问题，它是如何将 index.html 用于玻璃鱼事件的，尽管它是 unistalled，其他我可以重新启动 tomcat 并且 calhost:8080/manager 工作正常。

# html - IE浏览器模式

> ID：14335311
> 
> 赞同：0
> 
> 时间：2013-01-15T10:08:18.280
> 
> 标签：html, internet-explorer

我知道以下标签可以更改浏览器模式：

```
<META http-equiv="X-UA-Compatible" content="IE=8" /> 
```

我把那个标签直接放在我的`<HEAD>`标签下面。您可以在以下代码段中看到它：

```
<HEAD runat="server">
    <META http-equiv="X-UA-Compatible" content="IE=8" /> 
```

我的问题是，当我加载页面时，javascript 小部件不起作用，可能是因为浏览器模式。

这是我让它手动工作的步骤：

我按 F12（开发人员工具打开），然后按 F5（请注意，我没有在开发人员工具窗口中做任何事情，我只是在窗口打开时刷新了页面）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T17:48:30.333

如果您强制页面进入 IE8 模式，则控制台 API（如 console.log）将丢失，因为 IE8 未提供它们。当您打开 F12 时，该工具会注入这些 API，然后当您刷新这些 API 时，页面就可以调用它们。

因此，很可能某些代码正在调用诸如 console.log 之类的东西（没有检测到它）并引发异常。但这只是一个猜测。

# android - 有效使用微调器

> ID：14335320
> 
> 赞同：0
> 
> 时间：2013-01-15T10:08:36.833
> 
> 标签：android

如何将微调器设置为标准尺寸？这意味着它不会更小或更大，具体取决于它当前显示的字符串。我希望它有一个固定的大小，如果它包含一个比它的大小更大的单词，则必须截断该单词（只显示可以适合的内容微调器）。谢谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:16:54.127

只需截断创建时传递给微调器的字符串数组。

伪它：

```
for each string,

   if string > 20 characters, 

   trim to 20 characters (or 17 + ...)

   add string to array.

add array to adapter of spinner. 
```

但我必须指出，微调器不是下拉菜单。android api 通常会在屏幕中间的可滚动“弹出窗口”中显示列表。并且按原样运行良好。如果你有很大的字符串，那么这可能是一个问题。虽然我似乎认为，它为你截断.. 试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:44:35.650

要根据多个屏幕提供宽度，您可以使用尺寸并设置宽度。假设你想离开微调按钮的区域，这样文本不应该覆盖它，你可以设置填充而不是修剪文本，还可以设置 marqee 效果，以便正确显示大文本。

**编辑 ：**

```
 <Spinner
                android:id="@+id/spntipode"
                android:layout_width="@dimen/spin_size"
                android:layout_height="wrap_content"
                android:layout_below="@+id/lbltipode"
                android:layout_marginLeft="10dip"
                android:layout_marginTop="5dip" 
                android:paddingLeft="5dip"
                android:paddingRight="30dip"
                android:background="@drawable/spinner_selector"
                />

          public View getView(int position, View convertView, ViewGroup parent) {
                View v = super.getView(position, convertView, parent);
                ((TextView)v).setEllipsize(TruncateAt.MARQUEE);
                return v;
            }

            public View getDropDownView(int position,  View convertView,  ViewGroup parent) {
                View v =super.getDropDownView(position, convertView, parent);
                ((TextView)v).setEllipsize(TruncateAt.MARQUEE);
                return v;
            } 
```

# .net - 如何覆盖 System.Web.Script.Services.ScriptMethod 的 json 序列化

> ID：14335321
> 
> 赞同：0
> 
> 时间：2013-01-15T10:08:37.440
> 
> 标签：.net, json, serialization, jsonserializer

覆盖类的序列化（序列化）的最佳实践方法是什么？

具体来说，我有键/值对集合。默认生成的 JSON 如下所示：

```
[{"Key":1,"Value":"A"},{"Key":2,"Value":"B"},{"Key":3,"Value":"C"},{"Key":4,"Value":"D"},{"Key":5,"Value":"E"},{"Key":6,"Value":"F"}] 
```

这是非常浪费的。

我想覆盖它以产生更像这样的东西： [{"1":"A":},{"2":"B":},{"3":"C":},{"4 ":"D":},{"5":"E":},{"6":"F":}]

这是长度减半的一个字节，并且在 javascript 端更易于使用。

实施`ISerliazable`似乎不起作用 - 我认为 json 序列化程序忽略了它

谷歌找到了我这个[http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/06/wcf-extensibility-serialization-callbacks.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/06/wcf-extensibility-serialization-callbacks.aspx) 但对我来说这看起来像是一种可怕的做事方式 - 肯定有必须是更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:42:27.830

好的，这是奇怪的事情。

我将我的收藏更改为 SortedList，它实际上给了我想要的 json。

所以这适用于我的具体示例，但我可以想象在其他情况下我可能想要覆盖序列化。

# licensing - 如何修改 SoundCloud 的功能

> ID：14335322
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:08:38.623
> 
> 标签：licensing, soundcloud

对于第三方开发者，是否允许修改 SoundCloud 的源代码，如果可以，具体流程是什么？如果没有，有没有办法向 SoundCloud 提出请求？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:12:30.103

此信息位于 Soundcloud 网站上...

[http://developers.soundcloud.com/](http://developers.soundcloud.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:58:17.050

SoundCloud，网站，不是开源的，所以你不能修改它。有各种开源库——github.com/soundcloud，对于这些库，您可以提出拉取请求并提供一些可能最终在库中进行的更改。

您可以尝试将您的功能请求提交给支持，您可以在此处找到详细信息 - help.soundcloud.com

# php - 如何在不删除 PHP 中文件的现有数组值的情况下在文本文件中编写另一组新数组？

> ID：14335326
> 
> 赞同：2
> 
> 时间：2013-01-15T10:08:46.490
> 
> 标签：php, arrays

我的输出是这样的

```
 B005CI62XY    Nike Men's Performance Moisture Wicking No Show Socks 6 Pair - Shoe Size: 8-12 - White
B008FZY5NU  Nike Men's Shox Turbo+ 13 Running Shoe
B008F9E7ZM  Nike Dual Fusion Women's Running Shoes 525752-001 Black/Fireberry/Silver
B006VXT4M0  Nike Free Run+ 2
B004PAR0N6  Nike Men's NIKE T-LITE VIII LEATHER 4E RUNNING SHOES
B005QA4X3O  Nike Mens Dual Fusion St 2 Neutral Runner Gray Sneaker
B004UTNLFS  Nike The Overplay VI Men's Basketball Shoe
B007T8HL9O  Nike Lady Free Run+ V3 Running Shoes
B004L7OH8O  Nike Men's Air Monarch IV Running
B007RJQQ7I  Nike Air Max+ 2012 Mens Running Shoes 487982-100
B004L0DAWA  Nike Women's Musique IV Dance Shoes
B004K4GNF8  Nike Men's Air Monarch IV Running
B004LBS6W8  NIKE Air Monarch IV (4E) MENS RUNNING SHOES
B0071AV6P0  Nike Air Max+ 2012 Mens Running Shoes 487982-001
B008MQ5CLQ  Nike Men's NIKE AIR VISI PRO III NBK BASKETBALL SHOES
B004TR0S8O  Nike Dri-Fit Elite Basketball Socks
B0070062M8  Nike Women's NIKE LUNARSWIFT+ 3 WMNS RUNNING SHOES
B007OX34FE  Nike Free Run+ 3 Mens Running Shoes 510642-002
B0070066R4  Nike Women's Revolution Running
B0021K13IU  Nike Men's NIKE AIR FORCE 1 '07 BASKETBALL SHOES
B004UTSMY8  Nike DART 9 Men's Running Shoe
B004ANFDU0  Nike Men's T-LITE VIII Leather Training Shoes
B003YY6RCE  Nike Men's T-Lite VIII Leather Running
B005CD4MUY  Nike Men's Performance Moisture Wicking No Show Socks 6 Pair - Shoe Size: 8-12 - Black
B007P4ZR0W  Nike Free Run+ 3 Mens Running Shoes 510642-706
B004YKIVVC  Nike Women's Dart 9 Running
B008FQCFV8  Nike Men's Dart 9 Running
B004RL0J9U  Nike Golf Men's Tech Essentials Web Belt
B0077QNU0W  Nike Women's NIKE FREE TR FIT 2 WMNS RUNNING SHOES
B003NZ0Y9G  Nike Dri-Fit Half-Cushion Crew Socks - 3 pack
B007IXAFFC  Nike Air Max Navigate LE Mens Running Shoes 456977-010
B0074SC7ZC  Nike Air Max+ 2012 Mens Running Shoes 487982-010
B003JK1UIE  Nike Men's NIKE CORTEZ BASIC NYLON '06 TRAINING SHOES
B0057FRVQY  Nike DART 9 LEATHER 443862-001 Black
B004PSS6WW  Nike Men's Crew Cut Moisture Management Socks 3 pack
B004RL0J9K  Nike Golf Mens Tech Essentials 3 Pack Belt Gift Set
B006YSPB9C  Nike Kids NIKE FREE RUN 2.0 (GS) RUNNING SHOES
B004LBWNYA  NIKE WMNS NIKE INITIATOR (WOMENS)
B007ZQG5FQ  Nike Lady Air Relentless 2 Running Shoes
B004IWW8OW  Nike 375833 Pro Bra
B007P4XKK6  Nike Free Run+ 3 Mens Running Shoes 510642-401
B006EPQ4SW  Nike One Size Fits All Web Belts : Black, Gray & Navy 3 Pack
B004LBSWI6  Nike Women's T-Lite VIII Leather Fitness
B0056IU79A  NIKE GTS '09 Canvas Sneakers Shoes White Mens
B00722V5DU  Nike Women's Free TR Twist SL
B003JK8N7A  Nike Men's NIKE CORTEZ BASIC LEATHER '06 CASUAL SHOES
B007V67N1K  Nike The Overplay VII Men's Basketball Shoe
B007ETEMWM  Nike Shox Calistra Womens Dance Pumps / Shoes - Black
B0060NPWIG  Nike Performance Athletic Crew Socks - 3 Pack White Size Large Men's shoe size 8-12 Made In USA
B0085ZD4WI  Nike Air Alvord 10
B005CD6JJG  Nike Men's Performance Moisture Wicking Crew Socks 6 Pack - Shoe Size: 8-12 Black
B007SOI26U  Nike Men's Dart 9 Running
B005844FQI  Nike Women' s Lunarglide+ 3
B007URIUTE  Nike Men's Air Relentless II Running
B007ZHLUUU  Nike Men's Air Relentless II Running
B004JVD1EI  NIKE 6.0 Mavrk Mens Shoes
B004KMC4FI  Nike Benassi Swoosh Men's Slide
B007P4VAI0  Nike Free Run+ 3 Mens Running Shoes 510642-600
B006ZBH7BS  Nike Men's Lunarfly+ 3 Running Training Shoes-Black/Gray/Blue/Green
B006T3FPMK  Nike Sweet Classic Leather
B0088CMY6U  Nike Men's NIKE MAVRK SKATE SHOES
B007W6O0AQ  Nike Air Max+ 2012 Womens Running Shoes White/Anthracite-Hot Punch-Pure Platinum 487679-103
B004LBIWA4  Nike T-Lite VIII Running Shoes White Womens
B00510KIKQ  Nike Men's Quarter Cut Moisture Management Socks 3 pack
B00785MBCU  Nike Air Max+ 2012 Mens Running Shoes 487982-104
B0071BQEII  Nike Women's NIKE FREE RUN+ 2 WMNS RUNNING SHOES
B004YKIZDG  Nike Dart 9 Men's Running Shoe
B004G83DHO  Nike Men's NIKE NIKE5 GATO LTR SOCCER INDOOR SHOES
B0072KINAU  Nike Lady Air Max+ 2012 Running Shoes
B0087G0XRE  Nike Women's Flex Trainer 2012 Running
B00767BA6S  Nike SCRAMBLER TR2 313388-072
B007Y8QL0E  Nike Air Max+ 2012 Mens Running Shoes 487982-008
B007C79DD4  Nike Free Run 2.0 GS Grey Blue Pink Flash 2012 Youth Running Shoes 477701-007
B009PQ6P2M  Nike Men's NIKE DART 9 RUNNING SHOES
B007ZTM97G  Nike Women's Zoom Vomero+ 7 Running
B003MBW6LK  Nike Men's NIKE SWEET CLASSIC LEATHER CASUAL SHOES
B008HORLC6  Nike Free Run+ 3 Men's Running Shoes
B007VCOJLG  Nike Free 4.0 V2 Dark Obsidian Blue Mens Running Shoes 511472-404
B004TN5O50  Nike Women's Musique IV Fitness
B008G1HON6  Nike Men's Shox Turbo+ 13 Running
B006U1URCE  Nike LunarEclipse+ 2
B003DKEW6M  Nike Golf Web Belt 3-Pack
B0035QSI2I  NIKE Cortez Basic Nylon (GS) Big Kid's Retro Sneaker
B005191WYI  Nike Kids' Dart 9 Running
B004LBT1NQ  Nike Air Monarch IV WIDE (4E) Mens 416355-001 Sneaker
B0065C9A0I  Nike Air Max 90 Mens Running Shoes
B0052SU5H8  Nike Brasilia 5 Medium Duffel Grip
B005HFAC6A  Nike Free Run+ 2 Women's Running Shoes Black White-Anthracite
B0073XDPTA  Nike Air Max+ 2012 Mens Running Shoes 487982-016
B00351Z7AY  Nike 269604 Pro-Core Men's Compression Shorts 6"
B009B1QA8K  Nike Free Run+ 3 Mens Running Shoes 510642-440
B007VFRFMI  Nike Free Run 3 (GS) Big Kids Running Shoes 512098-600
B0081V17PM  Nike Lunarfly 3 + Women's Running Shoes 510791 010 Grey
B0091HCGBY  Nike Women's Revolution Running
B0049P0YIU  Nike Pro Core Long Sleeve Compression Top
B008FR8FES  Nike Free Run+3 Womens Running Shoes 510643-401
B00767D71E  Nike Free Run+ 2 Mens Running Shoes 443815-012
B004LK2RHE  Nike Shox Air Lunar NZ Mens Running Shoes
B0082CTMIE  Nike Women's Flex Trainer 2
B003G7FWHU  Nike Men's NIKE CORTEZ BASIC LEATHER '06 CASUAL SHOES 
```

这是输出的代码：

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tester</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
</head>
<body>
<?php

$search = 'Nike';
$temp_search = $search;
$category = 'Shoes';
$flag = 0;
$page = 11;
$temp = '';

for($i=1;$i<=$page;$i++){
?>
<script type="text/javascript">
    $(function(){
        $.ajax({
            url: 'search.php',
            type: 'post',
            datatype: 'json',
            data: { search: '<?php echo $search; ?>', category: '<?php echo $category; ?>', page: '<?php echo $i; ?>' },
            success:function(data){
                $('#data').append(data);
            }
        });
    });
</script>
<?php
    if($i == 10){
        $i = 1;
        $flag++;
        $search = $temp_search.' '.$flag;
    }
    if($flag == 1){
        break;
    }
}
?>
<table id="data">

</table>

</body>
</html> 
```

这是处理并将值返回到索引页面的代码

```
//search.php
    <?php

include 'Amazon-ECS-PHP-Library-master/samples/sampleSettings.php';
require 'Amazon-ECS-PHP-Library-master/lib/AmazonECS.class.php';

$amazonEcs = new AmazonECS(AWS_API_KEY, AWS_API_SECRET_KEY, 'com', AWS_ASSOCIATE_TAG);
$amazonEcs->requestDelay(true);
$amazonEcs->associateTag(AWS_ASSOCIATE_TAG);

$response = $amazonEcs->responseGroup('Large')->category('Shoes')->page($_POST['page'])->search($_POST['search']);
$fh = fopen('log', 'w');
$array_item = unserialize(file_get_contents('log'));
foreach($response->Items->Item as $item){
    $array_item[] = array('ASIN'=>$item->ASIN, 'Title'=>$item->ItemAttributes->Title);
    echo '<tr><td>'.$item->ASIN.'</td><td>'.$item->ItemAttributes->Title.'</td></tr>';
}
fwrite($fh, serialize($array_item));
fclose($fh);
?> 
```

这是查看文本文件值的代码，仅用于检查目的

```
 <?php
var_dump(unserialize(file_get_contents('log')));
?> 
```

它的输出就是这样

```
 array (size=10)
  0 => 
    array (size=2)
      'ASIN' => string 'B005CI62XY' (length=10)
      'Title' => string 'Nike Men's Performance Moisture Wicking No Show Socks 6 Pair - Shoe Size: 8-12 - White' (length=86)
  1 => 
    array (size=2)
      'ASIN' => string 'B008FZY5NU' (length=10)
      'Title' => string 'Nike Men's Shox Turbo+ 13 Running Shoe' (length=38)
  2 => 
    array (size=2)
      'ASIN' => string 'B008F9E7ZM' (length=10)
      'Title' => string 'Nike Dual Fusion Women's Running Shoes 525752-001 Black/Fireberry/Silver' (length=72)
  3 => 
    array (size=2)
      'ASIN' => string 'B006VXT4M0' (length=10)
      'Title' => string 'Nike Free Run+ 2' (length=16)
  4 => 
    array (size=2)
      'ASIN' => string 'B004PAR0N6' (length=10)
      'Title' => string 'Nike Men's NIKE T-LITE VIII LEATHER 4E RUNNING SHOES' (length=52)
  5 => 
    array (size=2)
      'ASIN' => string 'B005QA4X3O' (length=10)
      'Title' => string 'Nike Mens Dual Fusion St 2 Neutral Runner Gray Sneaker' (length=54)
  6 => 
    array (size=2)
      'ASIN' => string 'B004UTNLFS' (length=10)
      'Title' => string 'Nike The Overplay VI Men's Basketball Shoe' (length=42)
  7 => 
    array (size=2)
      'ASIN' => string 'B007T8HL9O' (length=10)
      'Title' => string 'Nike Lady Free Run+ V3 Running Shoes' (length=36)
  8 => 
    array (size=2)
      'ASIN' => string 'B004L7OH8O' (length=10)
      'Title' => string 'Nike Men's Air Monarch IV Running' (length=33)
  9 => 
    array (size=2)
      'ASIN' => string 'B007RJQQ7I' (length=10)
      'Title' => string 'Nike Air Max+ 2012 Mens Running Shoes 487982-100' (length=48) 
```

因为我注意到存储的数组只是索引页面中的最后 10 个项目，所以我要发生的是索引页面中的所有项目都将保存在文本文件中，我不知道如何解决这个问题，任何人有任何建议或帮助我解决问题的建议将是一个很大的帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:18:32.790

在不关心文件锁定问题的情况下，您需要移动一些语句：

```
// removed the fopen() because file_get_contents() already opens the file for you
$array_item = unserialize(file_get_contents('log'));

// manipulate the array here
foreach($response->Items->Item as $item){
    $array_item[] = array('ASIN'=>$item->ASIN, 'Title'=>$item->ItemAttributes->Title);
    echo '<tr><td>'.$item->ASIN.'</td><td>'.$item->ItemAttributes->Title.'</td></tr>';
}

file_put_contents('log', serialize($array_item)); 
```

这就是你所需要的。

**更新**

您的代码执行 11 个 AJAX 请求（针对 11 个结果页面），每个请求调用 Amazon 来填充每个页面的结果；这是非常低效的，您应该只执行一次搜索，找出有多少页面，然后使用 Amazon API 本身一次性获取所有结果。

这样做将首先消除保留临时文件的需要，因为您`search.php`只需一次调用即可将所有结果返回给 JavaScript。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T10:14:01.513

我认为您需要以“附加”模式打开文件。

```
$fh = fopen('log', 'a'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T10:14:22.797

我认为您的答案可能是您为“fopen”设置的模式

[http://us3.php.net/manual/en/function.fopen.php](http://us3.php.net/manual/en/function.fopen.php)

你可以看到这个函数的第二个参数是模式。您将其命名为“w”，这意味着直接来自文档：

仅供写作；将文件指针放在文件的开头并将文件截断为零长度。如果该文件不存在，请尝试创建它。

这将每次覆盖您的文件。您很可能希望以“a”（即附加）模式打开文件。

仅供写作；将文件指针放在文件末尾。如果该文件不存在，请尝试创建它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-15T10:15:40.400

`$fh = fopen('log', 'w');`将其更改为`$fh = fopen('log', 'a');`

w - 将删除现有内容 a- 将保留内容并附加新内容

# cocos2d-iphone - Kobold2D 干净安装'clang：错误：没有这样的文件或目录'

> ID：14335329
> 
> 赞同：0
> 
> 时间：2013-01-15T10:08:54.767
> 
> 标签：cocos2d-iphone, xcode4.5, kobold2d

我刚刚安装了 Kobold2D，在能够使用“Hello-Kobold2D”项目模板进行初始构建之前遇到了错误。

```
clang: error: no such file or directory: '/Users/olivercooper/Kobold2D/Kobold2D-2.0.4/Kobold'
clang: error: no such file or directory: 'Test-1/../__Kobold2D__/libs/GoogleAdMobAdsSDK/libGoogleAdMobAds.a' 
```

我没有碰任何东西，实际上只是点击了“运行”。

我正在使用 Xcode 4.5.2、OS X 10.8。

我看过这个问题：*(* [Kobold2d) Clang Error after upgrade to xcode 4.5](https://stackoverflow.com/questions/12589782/kobold2d-clang-error-after-upgrading-to-xcode-4-5)但它没有回答这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T04:35:11.533

对于有问题的任何人，在我看来，如果您的项目名称中有空格（例如“Kobold2D Test-1”），它将无法构建。您只需要重新创建名称中没有空格的项目。

# c++ - 0xC0000005：访问冲突写入位置 c++ 数组

> ID：14335334
> 
> 赞同：0
> 
> 时间：2013-01-15T10:09:04.590
> 
> 标签：c++, arrays

我一直在使用 c++，由于某种原因，每次遇到循环中访问的数组时，它都会不断给我这个错误消息，例如：

```
int i2 = 0;
for(int n=0; n<sizeof(mapy); n++)
{   
  xybar[i2] = mapx[n] * mapy[n];//
  xbar_squared[i2] = mapx[n] * mapx[n];//
  i2++;
} 
```

我意识到不需要 i2 的原因是，因为当我检查值时，我意识到迭代器 n 已被替换为 2006 值而不是数组中的位置，导致它在下一次调用时失败，因为它超出范围，因为我的数组仅包含 500 条数据。我认为 i2 可能会解决这个问题，但它没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:12:06.263

我在此假设您的数组不是指针，例如它们是`sometype mapy[size]`而不是`sometype *mapy`。在这种情况下，`sizeof`运算符以字节为单位返回整个`mapy`数组的大小，而不是元素的数量。如果数组是大于 1 字节的任何类型（例如`int`、`float`、`double`等），则代码将访问数组末尾并因此出现访问冲突异常。您可以改为使用`sizeof(mapy)/sizeof(mapy[0])`来获取数组元素的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T10:13:55.857

`sizeof`是字节数，而不是数组的长度。如果`mapy`是一个普通指针，这个值在 32 位系统中可能是 4，在 64 位系统中可能是 8。如果这不是数组中元素的实际数量，则您的循环是错误的，并且如果您的数组中的元素较少，则说明您越界了。

如果`mapy`是一个实际的数组，它将是元素中数组的大小乘以每个元素的大小，所以除非元素是类型，否则`char`在这种情况下你肯定会越界。

我们也看不到 xybar 和 mapx 的定义位置，但如果这是 C++，您应该考虑使用`std::vector`而不是数组。

顺便说一句，根据元素数量“调整”数组大小的一种方法是：

```
template< typename T, size_t N > 
size_t arraySize( T (arr&)[N] )
{
    return N;
} 
```

# javascript - javascript: goto 语句

> ID：14335353
> 
> 赞同：0
> 
> 时间：2013-01-15T10:10:02.330
> 
> 标签：javascript

我有一个 for 循环，但在一种情况下，我想跳过一些步骤，以便使用`goto`语句......

```
for (var rows = 0; rows < result.data.length; rows++) {
  [lbl] topOfLoop:

  var row = result.data[rows]
  if (row[0] == "") {
    goto topOfLoop;
  }

  ----- // some code
} 
```

它不工作？谁能告诉我，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:10:54.187

> 我想跳过一些步骤，以便我使用 goto 语句...

使用[continue](http://msdn.microsoft.com/en-us/library/923ahwt1.aspx)语句而不是 goto

```
for (var rows = 0; rows < result.data.length; rows++) 
    {
        var row = result.data[rows]
        if (row[0] == "") 
        {
           continue;
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T10:11:34.253

很确定你想使用`continue;`：

```
for (var rows = 0; rows < result.data.length; rows++)  {
    var row = result.data[rows];
    if (row[0] == "") {
        continue;  
    }
    // some code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:11:32.843

在代码中使用[`continue`](http://msdn.microsoft.com/en-us/library/923ahwt1%28v=vs.80%29.aspx)语句；

> continue 语句将控制权传递给它出现的封闭迭代语句的下一次迭代。

它是跳转语句之一。

```
if (row[0] == "")
{
     continue;  
} 
```

# variables - 我想用base64编码将值传递给icewarp。Icewarp 需要解码脚本吗？

> ID：14335355
> 
> 赞同：0
> 
> 时间：2013-01-15T10:10:03.797
> 
> 标签：variables, base64

目前我的工作是在我们将值传递给icewarp webmail 时隐藏用户名和密码。以前的开发人员传递的值如下：

```
Header("refresh:0;url=http://sample-icewarp.com/webmail/index.html?!#$username:$password"); 
```

并将用户重定向到icewarp webmail，但用户名和密码会在地址栏上显示几秒钟。但是在慢速连接时，它给了足够的时间来阅读和记忆它。

我打算使用 base64 编码。但我很困惑，我是否也需要进行 icewarp 解码？

我不是编程专家，担任 IT 技术支持。这已经成为我工作的一部分。

从谷歌搜索，我发现了这个 base64 编码的示例代码：

```
$data = /* some data */;
$base64Data = base64_encode($data);
$urlData = urlencode($base64Data);
$htmlData = htmlspecialchars($urlData);
printf('<input type="hidden" value="%s" name="pass-it-on">', $htmlData); 
```

我如何编辑这个东西以使其重定向到icewarp webmail？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:19:34.750

为什么不使用外部登录（参见 icewarp/html/webmail/client/_external）？它将使用 RSA 登录 icewarp 的 AFAIK。或者单点登录...

# c++ - 是否可以将 C++ 共享库加载到 Mathematica 8.0？

> ID：14335356
> 
> 赞同：2
> 
> 时间：2013-01-15T10:10:04.320
> 
> 标签：c++, mathematica-8, mathlink

我正在尝试加载从 Mathematica 8.0 编译到共享库的 C++ 函数。我确实设法使用 MathLink 使用 C 函数，但 MathLink 似乎不支持 C++ 函数。所以我尝试创建一个共享库并通过LibraryLink加载它，但是LibraryFunctionLoad似乎无法加载C++函数。有没有人设法在 Mathematica 中使用 C++ 函数，如果是这样，必须采取哪些技巧才能使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:33:43.670

问题是`C++`代码使用了正在导出的符号的修饰。

这会将命名空间、类名、返回类型、名称和参数编码为导出符号的一部分。这意味着一个函数调用：

```
int hello(int x, int y, int z) 
```

导出为：

```
_Z5helloiii 
```

这是在 linux 上的 g++ 上完成的，windows 有不同的修改方案。

为了确保以与 C 兼容的方式导出函数，您将函数包装在`extern "C"`机制中，这会导致它以与 MathLink 兼容的形式导出

所以你在标题中使用以下内容：

```
#ifdef __cplusplus
extern "C" {
#endif

int hello(int x, int y, int z);

#ifdef __cplusplus
}
#endif 
```

只要您`#include`在实现中使用此标头`C++`，它就应该正确链接`MathLink`

# java - 将editText放在relativeLayout中的组件下方，但组件填满屏幕？

> ID：14335359
> 
> 赞同：0
> 
> 时间：2013-01-15T10:10:07.910
> 
> 标签：java, android, terminal, android-edittext, android-relativelayout

我有一个`linearLayout`，里面是一个`relativeLayout`，`relativeLayout`想要在`EditText`终端模拟器视图下方放置一个字段。但是，当我这样做时，什么都没有出现？我假设它在屏幕下方？！截图： http: [//i.imgur.com/USAns.png](http://i.imgur.com/USAns.png) 如何将它放在屏幕底部的下方？推高终端？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/MainLayout"
android:background="@drawable/wallpaper"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

   <LinearLayout android:id="@+id/topButtons" 
    android:layout_margin="4dip"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <Button android:id="@+id/deviceConnect"
        android:layout_margin="8dip"
        android:layout_weight="3"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:text="Connect"/>
    <LinearLayout android:orientation="vertical"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <LinearLayout android:orientation="horizontal"
            android:layout_margin="8dip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
            <TextView android:text="Connected Adapter:"
                android:layout_gravity="center_vertical"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <Spinner android:id="@+id/deviceSpinner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:drawSelectorOnTop="true"/>
            <TextView android:id="@+id/currentSettings" 
                android:layout_marginLeft="8dip"
                android:text="Current Settings: Not Connected"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"/>
        </LinearLayout>
        <LinearLayout android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Baud:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/baudSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Data:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/dataSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Parity:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/paritySpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Stop:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/stopSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
    <Button android:id="@+id/updateSettings"
        android:layout_margin="8dip"
        android:layout_weight="3"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:text="Update\nSettings"/>
</LinearLayout>

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

   <Button android:id="@+id/Command"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enable"/> 

   <Button android:id="@+id/Command2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Configure"
        android:layout_toRightOf="@+id/Command"/> 

   <Button android:id="@+id/Command3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Exit"
        android:layout_toRightOf="@+id/Command2"/> 

   <Button android:id="@+id/Command4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show Version"
        android:layout_toRightOf="@+id/Command3"/> 

   <Button android:id="@+id/Command5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show Run"
        android:layout_toRightOf="@+id/Command4"/> 

    <Button android:id="@+id/Command6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Backspace"
        android:layout_toRightOf="@+id/Command5"/> 

        <Button android:id="@+id/Command7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Backspace2"
        android:layout_below="@+id/Command"/> 

    <jackpal.androidterm.emulatorview.EmulatorView
    android:id="@+id/emulatorView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:layout_toRightOf="@+id/Command7"
    android:layout_below="@+id/Command" />

     <EditText
        android:id="@+id/term_entry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:imeOptions="actionNone|flagNoExtractUi"
        android:inputType="text|textImeMultiLine"
        android:layout_toRightOf="@+id/Command7"
        android:layout_below="@+id/emulatorView" />

     <Button
        android:id="@+id/term_entry_send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/entry_send"
        android:layout_toRightOf="@+id/term_entry" 
        android:layout_below="@+id/emulatorView"/>

    </RelativeLayout>  

</LinearLayout> 
```

# javascript - 在javascript中替换图像而不是添加到列表

> ID：14335366
> 
> 赞同：0
> 
> 时间：2013-01-15T10:10:57.577
> 
> 标签：javascript

我有一个脚本，允许用户上传图像并预览它们。这是一个非常基本的脚本，虽然我已经设法让它或多或少地完成我需要的所有事情，但我仍然坚持最后一件事。

就目前而言，一旦用户上传了一张图片，它就会显示，但如果他们上传另一张图片，它会同时显示两者，我希望新图片替换旧图片，因此只有一张可见。

我在 php 方面没有问题，问题在于脚本将新图像附加到列表并显示列表而不仅仅是新图像的部分，不幸的是，我的 javascript 知识目前非常有限。

这是脚本：

```
$(function(){
    var btnUpload=$('#upload');
    var status=$('#status');
    new AjaxUpload(btnUpload, {
        action: 'upload-file.php',
        name: 'uploadfile',
        onSubmit: function(file, ext){
             if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))){ 
                // extension is not allowed 
                status.text('Only JPG, PNG or GIF files are allowed');
                return false;
            }
            status.text('Uploading...');
        },
        onComplete: function(file, response){
            //On completion clear the status
            status.text('');
            //Add uploaded file to list
            if(response==="success"){
                $('<li></li>').appendTo('#files').html('<img src="upload/'+file+'" alt="" /><br />'+file);
            } else{
                $('<li></li>').appendTo('#files').text(file);
            }
        }
    });

}); 
```

图像显示在这里：

```
<ul id="files" ></ul> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:13:51.517

代替：

```
$('<li></li>').appendTo('#files') 
```

尝试：

```
$('<li></li>').appendTo($('#files').empty()) 
```

`#files`这将在添加新内容之前清空元素。

# html - 我可以缩放图像以超出其绑定的框吗？

> ID：14335367
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:10:58.520
> 
> 标签：html, css

我正在尝试`<img>`动态调整大小。有时我需要该图像超越它所绑定的框，但它似乎停止并扭曲。这可以做到吗？

```
<div>
 <img src='smjpg.jpg' />
</div>

div{
  width: 20px;
}
img{
  width: 100px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:14:34.163

只需使用 CSS 作为边界`div`。

```
#imgDiv {
    overflow:visible;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:54:17.380

如果您仍然希望父容器为其他元素增长，没有固定大小，请考虑使用`float`属性或`position: absolute`子元素。绝对定位将子元素从页面流中移除，因此父容器将看不到任何可展开的内容。浮动具有类似的视觉效果，只要溢出是可见的并且没有使用 clearfix，但是子元素确实会影响其兄弟元素的布局。这是一个演示： http: [//jsfiddle.net/lpd_/rd4HP/3/](http://jsfiddle.net/lpd_/rd4HP/3/)（尝试调整结果宽度）。

# android - 如何从 Android 中的特定号码中删除彩信？

> ID：14335376
> 
> 赞同：0
> 
> 时间：2013-01-15T10:11:32.340
> 
> 标签：android, mms

我想在android中删除特定电话号码的彩信。我该怎么做？我正在使用 content://mms-sms/conversations 来获取彩信列表，并尝试使用以下查询：

```
this.getContentResolver().delete(
                Uri.parse("content://mms-sms/conversations/" + ThreadId),
                "address=?", new String[] { "contact number" });` 
```

但它仅适用于短信，不适用于彩信。有人能告诉我我们能做些什么来删除特定的彩信吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:22:03.793

请查看以下详细教程链接，**了解 Android 中的读、写、删除和更新彩信**

[**Android 中的彩信。第 2 部分。使用 MMS 存储**](http://maximbogatov.wordpress.com/2011/08/15/mms-in-android-part-2-working-with-mms-storage/)

也试试这个

```
Uri msgUri = ContentUris.withAppendedId(Mms.Inbox.Content_Uri,"1");

SqliteWrapper.delete(this, getContentResolver(), msgUri, null, null); (or) getContentResolver().delete(msguri, null, null); 
```

[**参考**](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/BuQVDm7dTV0)

**编辑：**

这是方法语法

```
public static Uri withAppendedId (Uri contentUri, long id) 
```

**Uri**是内容提供者中的彩信收件箱存储url

例如 SMS Inbox Uri 是*“content://sms/inbox”*

另请阅读此页面以获取此处给出的 MMS 存储 Uri 信息

[**在收件箱 Android 中保存/创建彩信**](https://stackoverflow.com/questions/6097319/save-create-mms-in-inbox-android)

# c# - 可查询的基于 Web 的结果的设计

> ID：14335385
> 
> 赞同：1
> 
> 时间：2013-01-15T10:11:57.257
> 
> 标签：c#, wcf, iqueryable

我正在尝试完成类似 facebook 新闻源墙之类的事情，从整个数据集中加载 N 个结果，从最近的日期降序开始。当您单击“更多”时，它会在下面显示下一个 N，依此类推，直到您完成数据集。

我正在努力想出最好的设计来实现这一点。我一直被告知无状态 Web 服务是构建可扩展企业应用程序的唯一方法，这意味着据我了解，在第一次调用页面时将整个结果对象缓存在服务器端，并从中获取 N 个结果每个后续的 Web 服务调用都是否？

如果是这样的话，那么像 GetResults(int pageindex, int pagesize) 这样的东西会起作用....这就是我打算这样做的方式，但后来我意识到如果有人在两次通话之间添加了新的数据库记录，它就行不通了。例如，您从数据库中的 23 个墙馈送项目开始，并希望一次显示 10 个。

*   第一次调用，页面 1，页面大小 10 将返回结果 14-23（最近的在前）
*   然后有人添加了 2 个新帖子，所以你现在有 25 个在数据库中
*   第二次调用，第 2 页，页面大小 10 将返回结果 6-15，其中两个已在第一次调用中返回。

所以这种抵消方法不起作用，因为你不能保证底层数据集在调用之间保持不变。

我很困惑，我该如何做到这一点？

编辑：对不起，更多信息。为了避免查找大量数据表的问题，我考虑过在您第一次加载屏幕时使用该用户的最近几天数据预先填充“临时”表的选项，然后一次只读取一页的结果从该瞬态表中读取，使其读取速度更快，加载时间稍慢。然后，当您用完该数据时，将下一个周期（例如 2 周）带入瞬态表并继续阅读。

困难在于用户将“发布”项目，然后自动被匹配其搜索条件的用户拾取。例如，如果您的标准规定您想结识 25 到 32 岁且距离您 50 英里以内的人，那么当您加载新闻提要时，您希望它显示所有符合您标准的用户的帖子。有点像动态朋友列表。

我将如何实现这一点是在登录时，将运行一个存储的过程，它将通过选择所有用户并根据我在静态查找表中的年龄和位置标准（邮政编码距离）进行过滤来填充数据库中的瞬态表等），然后它将与您的条件匹配的用户列表保存到此临时表中，以便在您需要过滤帖子或搜索用户时使用。如果您更新首选项，它也会重新计算此值，但仅在您更新首选项或重新登录时。因此，在您下次登录之前，不会出现任何注册的新用户，我认为这很好。

然后，当需要显示您的新闻提要时，它所做的就是从数据库中检索符合您条件的用户 ID 列表，然后带回这些用户发布的所有 NewsFeedPosts。嘿 presto，动态新闻提要！

但显然这是动态生成的整个 NewsFeedPost 表的子集，因此每次用户单击“更多”时重新计算它是没有意义的，所以这就是我考虑实现它的方式。

表格 - NewsFeedCurrent、NewsFeedRecent、NewsFeedArchive 在当前表格中创建新帖子。每天晚上运行一个批处理作业，将所有数据从当前的 2 天前移动到最近的表，并将最近表中一周前的任何数据移动到存档表。

考虑到 90% 的时间，用户只会对最近 2 天的数据感兴趣。所以为了访问时间，保持桌子很小。另外 9% 的时间用户可能需要最近几周的数据。因此，将其单独保存在辅助表中。那么只有 1% 的时间用户需要超过一周的数据，所以将其保存在一个更大、更慢的存档表中，这会更慢，但通过保持当前和最近的表较小，可以提高性能。

因此，当您第一次点击新闻提要页面时，它将为您的帐户获取预先生成的用户列表，并拉出所有 NewsFeedCurrent 项目并将它们放在一个临时表中，例如您的用户 ID 下的 TempNewsFeed。然后，您只需为您的用户 id 拉回所有内容即可使用此结果集，您不感兴趣的项目不需要过滤，因为它们是预先过滤的。这将为页面加载增加一秒钟左右的时间，但会缩短获取结果时的响应时间。然后，当该数据用完时，它将再次使用符合您条件的用户列表从“最近”表中提取所有相关数据，将其添加到 TempNewsFeed 表中，从而允许您继续获取长达一周的数据。当那用尽时，它最终会转到存档表并使用用户 ID 列表，拉出与此匹配的所有数据并放入临时表中，允许您继续导航剩余数据。这将在填充存档数据时产生相当大的延迟，但如果您要返回一周，则在填充数据并显示“正在加载数据...”时，您将不得不等待 5-10 秒。但是，一旦完成，浏览历史数据将与最新数据一样快，因为它们都在瞬态表中。

如果您刷新屏幕或从另一个屏幕返回该屏幕，它会清除瞬态表并从当前表数据重新开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:26:00.623

希望我的回答有意义，做出正确的假设......

我会将新闻提要分为两个部分。第一个是传入的消息——它将由 AJAX 调用驱动。它一直在说“什么是新的？” 第二部分是旧新闻，用户可以通过向下滚动来懒惰地加载更多新闻。

**最新消息**

重要的一点是记下您页面上的最大新闻提要 ID。假设是 10000。当用户加载页面时，新闻提要 id 10000 是最新的新闻项目。

当使用 AJAX 更新新部分时，我们只需要问：“比 id 10000 更新什么？” 我们将这些项目加载到页面上。在我们加载它们之后，我们还会增加页面上的 id。例如，如果我们从 id 10000 开始并加载五个新的新闻项目，那么新的 id 将是 10005。下一个调用会问：“什么比 10005 更新？”

**较早的新闻项目**

较旧的部分将跟踪页面上最旧的新闻项目。让我们想象一下，他们回滚了一周的新闻。最小的新闻条目 ID 为 9000。当他们想要进一步向后滚动时，我们只需问：“什么比 9000 更早？”

然后的想法是在页面上维护最大新闻项 id 和最小新闻项 id，然后继续从该参考点加载。

# java - 如何降低两个列表算法中搜索的复杂性？

> ID：14335386
> 
> 赞同：4
> 
> 时间：2013-01-15T10:11:57.493
> 
> 标签：java, algorithm

我必须在两个列表中找到一些常见的项目。我**无法对其进行排序**，顺序很重要。必须找出有多少个元素`secondList`出现在`firstList`. 现在它如下所示：

```
int[] firstList;
int[] secondList;
int iterator=0;
for(int i:firstList){
 while(i <= secondList[iterator]/* two conditions more */){
       iterator++;
       //some actions
   }
} 
```

该算法的复杂度为**nxn**。我试图降低此操作的复杂性，但我不知道如何以不同的方式比较元素？有什么建议吗？

**编辑：** 示例：`A=5,4,3,2,3` `B=1,2,3` 我们寻找对`B[i],A[j]` 条件：何时

```
B[i] < A[j]
         j++ 
```

什么时候

```
B[i] >= A[j]
         return B[i],A[j-1] 
```

下一次遍历**A**到元素**j-1**的列表（意思是`for(int z=0;z<j-1;z++)`） *我不确定，我说清楚了吗？* **允许复制。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:16:26.957

我的方法是 - 将第一个数组中的所有元素放在 a 中`HashSet`，然后对第二个数组进行迭代。这将复杂性降低到两个数组的长度之和。它具有占用额外内存的缺点，但除非您使用更多内存，否则我认为您无法改进您的蛮力解决方案。

编辑：避免对此事进一步争议。如果允许在第一个数组中有重复项，并且您实际上关心第二个数组中的元素与第一个数组中的数组匹配多少次，请使用`HashMultiSet`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T10:17:23.703

*   将第一个列表的所有项目放在一个集合中
*   对于第二个列表的每个项目，测试它是否在集合中。

不到 nxn 解决！

**编辑请 fge :)**

您可以使用将项目作为键并将出现次数作为值的映射来代替集合。

然后对于第二个列表的每个项目，如果它存在于地图中，则在第一个列表中每次出现时执行一次您的操作（字典条目的值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:27:56.577

```
import java.util.*; 

int[] firstList;
int[] secondList;
int iterator=0;   

HashSet hs = new HashSet(Arrays.asList(firstList));
HashSet result = new HashSet();

while(i <= secondList.length){
  if (hs.contains( secondList[iterator]))  
  {
    result.add(secondList[iterator]);
  }   
 iterator++;
 } 
```

结果将包含所需的公共元素。算法复杂度 n

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T10:38:54.840

仅仅因为顺序很重要并不意味着您不能对任何一个列表（或两者）进行排序。这仅意味着您必须先复制，然后才能对任何内容进行排序。当然，复制需要额外的内存，排序需要额外的处理时间......但我猜所有优于 O(n^2) 的解决方案都需要额外的内存和处理时间（对于建议的 HashSet 解决方案也是如此 - 添加所有值到 HashSet 会花费额外的内存和处理时间）。

可以在 O(n * log n) 时间内对两个列表进行排序，一旦列表排序，则可以在 O(n) 时间内找到共同元素。它是否会比您的本机 O(n^2) 方法更快取决于列表的大小。最后，只有测试不同的方法才能告诉您哪种方法最快（并且这些测试应该使用最终代码中预期的实际列表大小）。

Big-O 符号不是告诉你任何关于*绝对速度*的符号，它只告诉你一些关于*相对速度的东西*. 例如，如果您有两种算法来计算输入元素集的值，一种是 O(1)，另一种是 O(n)，这并不意味着 O(1) 解决方案总是更快。这是对 Big-O 表示法的一个大误解！这仅意味着如果输入元素的数量增加一倍，O(1) 解决方案仍将需要大约。相同的时间，而 O(n) 解决方案将花费大约。时间是以前的两倍。所以毫无疑问，通过不断增加输入元素的数量，一定有一个点 O(1) 解决方案将变得比 O(n) 解决方案更快，但是对于非常小的一组元素，O( 1) 解决方案实际上可能比 O(n) 解决方案慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T10:29:56.440

好的，所以*如果第一个或第二个数组中没有重复项，则*此解决方案将起作用。由于问题没有说明，我们无法确定。

首先，`LinkedHashSet<Integer>`从第一个数组构建一个，`HashSet<Integer>`从第二个数组构建一个。

其次，仅在第一组中保留第二组中的元素。

第三，迭代第一组并继续：

```
// A LinkedHashSet retains insertion order
Set<Integer> first = LinkedHashSet<Integer>(Arrays.asList(firstArray));
// A HashSet does not but we don't care
Set<Integer> second = new HashSet<Integer>(Arrays.asList(secondArray));

// Retain in first only what is in second
first.retainAll(second);

// Iterate

for (int i: first)
    doSomething(); 
```

# php - 如何将此表复制并粘贴到另一个表？

> ID：14335387
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:12:02.617
> 
> 标签：php, mysql, pivot

我有一个这种结构的表

```
表格1
-------------------------------------------------- -------------------------
元ID | post_id | 元密钥 | 元值 |
-------------------------------------------------- -------------------------
1234 5 thumbnail_url http://www.domain/thumb.jpg
1235 5 swf_url http://www.domain/flash.swf
1236 5 描述 这是一个描述。
1237 6 thumbnail_url http://www.domain/thumb.jpg
1238 6 swf_url http://www.domain/flash.swf
1239 6 描述 这是一个描述。
-------------------------------------------------- -------------------------

```

和另一个具有这种结构的表

```
表#2
-------------------------------------------------- --
身份证 | post_title | 缩略图 | 瑞士法郎 | 描述
-------------------------------------------------- --
5 很棒的标题 NULL NULL NULL
6 堆栈溢出 NULL NULL NULL
-------------------------------------------------- --

```

我需要将表 1 中的元值复制并粘贴到表 2 WHERE post_id = ID。

任何有关查询外观的见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:15:07.817

```
UPDATE Table2 t2
INNER JOIN
(
   SELECT
     post_id, 
     MAX(CASE WHEN meta_key = 'thumbnail_url' THEN meta_value END) AS 'thumbnail', 
     MAX(CASE WHEN meta_key = 'swf_url' THEN meta_value END) AS 'swf',
     MAX(CASE WHEN meta_key = 'description' THEN meta_value END) AS 'description'
   FROM Table1
   GROUP BY post_id
) t1 ON t1.post_id = t2.id
SET t2.thumbnail = t1.thumbnail,
    t2.swf       = t1.swf,
    t2.description = t1.description; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/cdd4f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:18:47.593

这种类型的数据转换称为*枢轴*。MySQL 没有枢轴函数，因此您将使用带有`CASE`表达式的聚合函数。

此过程将行值转换为列。要选择这种格式的数据，您将使用：

```
select post_id,
  max(case when meta_key = 'thumbnail_url' then meta_value end) thumbnail,
  max(case when meta_key = 'swf_url' then meta_value end) swf_url,
  max(case when meta_key = 'description' then meta_value end) description
from table1 
-- where post_id = 1
group by post_id; 
```

然后到`UPDATE`表2：

```
update table2 t2
left join
(
  select post_id,
    max(case when meta_key = 'thumbnail_url' then meta_value end) thumbnail,
    max(case when meta_key = 'swf_url' then meta_value end) swf_url,
    max(case when meta_key = 'description' then meta_value end) description
  from table1 
  -- where post_id = 1
  group by post_id
) t1
  on t2.id = t1.post_id
set t2.thumbnail = t1.thumbnail,
    t2.swf = t1.swf_url,
    t2.description = t1.description; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/dc003/2)

# yii - 如何在 YII 中设置日志文件的最大大小？

> ID：14335388
> 
> 赞同：1
> 
> 时间：2013-01-15T10:12:04.843
> 
> 标签：yii

我可以看到 Yii[这里](http://www.yiiframework.com/doc/api/1.1/CFileLogRoute#setMaxLogFiles-detail)有 "setMaxLogFiles" 功能，但我不知道如何使用它。我认为您可以将其添加到 config/main.php 中，但似乎没有放置它的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:28:39.803

我认为它在您的配置文件中：

```
'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                array(
                    'class'=>'CFileLogRoute',
                    'levels'=>'trace, info',
                    'categories'=>'system.*',
                ),
                array(
                    'class'=>'CEmailLogRoute',
                    'levels'=>'error, warning',
                    'emails'=>'admin@example.com',
                ),
            ),
        ), 
```

您可以指定一些选项，例如文件大小或日志文件的最大数量：

```
array(
    'class'=>'CFileLogRoute',
    'levels'=>'trace, info',
    'categories'=>'system.*',
    'maxFileSize' => 99999,
    'maxLogFiles' => 1,
), 
```

资料来源：[关于日志的 Yii 指南](http://www.yiiframework.com/doc/guide/1.1/en/topics.logging#message-routing)

# c# - 取消单击链接上的请求 asp.net

> ID：14335389
> 
> 赞同：0
> 
> 时间：2013-01-15T10:12:05.150
> 
> 标签：c#, asp.net, .net-4.0, request-cancelling

我在网站（ASP.NET 4.0 C#）上有一个主页，每次访问时都会加载大量数据（基本上是仪表板）。这可能（取决于用户）需要一段时间来加载，所以我将每个部分分成更新面板并分别加载它们，以便用户可以看到它正在加载，而不仅仅是认为页面已冻结。然而，这带来了新的问题，因为如果用户不想等待并点击导航菜单（或链接）到不同的页面，他们必须等到页面完全加载后才能继续。

如果单击另一个链接并仅处理该链接，是否有停止页面请求加载数据的方法？

更多信息 - 我正在使用导航菜单所在的母版页，以及主页上的 ajax 更新面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:19:29.977

```
function cancelPostBack() {
  var prm = Sys.WebForms.PageRequestManager.getInstance();
  if (prm.get_isInAsyncPostBack()) {
   prm.abortPostBack();
  }
} 
```

将此函数附加到导航项的 onclick 事件，以确保在继续导航之前取消任何挂起的请求。

# mysql - MySQL打印函数内变量的值

> ID：14335390
> 
> 赞同：2
> 
> 时间：2013-01-15T10:12:05.573
> 
> 标签：mysql, function

我有一个 MySQL 函数。在这个函数内部，我想在它运行时打印变量的值。

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` FUNCTION
  `updateCompanyName`(companyName varchar(200)) RETURNS varchar(200)
  CHARSET latin1 BEGIN

  declare modifiedCompanyName varchar(200); 
  DECLARE keywordToRemove varchar(200); 

  DECLARE cur1 CURSOR FOR SELECT name FROM company_remove_keywords;

  select regex_replace('[^a-zA-Z 0-9]', "",companyName) into modifiedCompanyName;

  OPEN cur1;  
    read_loop: LOOP
      FETCH cur1 INTO keywordToRemove;
      select keywordToRemove;

      select replace_ci(modifiedCompanyName,
             concat(" ",keywordToRemove," ")," ") 
             into modifiedCompanyName;
      select replace_ci(modifiedCompanyName,
             concat(" ",keywordToRemove),"")
             into modifiedCompanyName;
    END LOOP;

  CLOSE cur1; 
  return modifiedCompanyName; 
END 
```

打印值的最佳方法是什么：`keywordToRemove`和`modifiedCompanyName`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:16:15.027

您可以创建表（或临时表）来存储调试信息，并将您需要的值插入到该表中。

[此外，您可以使用 GUI 工具 - Debugger for MySQL](http://www.devart.com/dbforge/mysql/studio/code-debugger.html)（试用试用版）轻松调试存储过程/函数/触发器。

# c# - 反应式扩展：匹配复杂的按键顺序

> ID：14335392
> 
> 赞同：3
> 
> 时间：2013-01-15T10:12:09.460
> 
> 标签：c#, system.reactive, keypress

我想要实现的是使用 Rx 处理一些复杂的按键和释放序列。我对 Rx 有一些经验，但这显然不足以满足我目前的工作，所以我在这里寻求帮助。

我的 WinForms 应用程序在后台运行，仅在系统托盘中可见。通过给定的键序列，我想激活其中一种形式。顺便说一句，要连接到全局按键，我正在使用一个不错的库[http://globalmousekeyhook.codeplex.com/](http://globalmousekeyhook.codeplex.com/)我能够接收每个按键按下和按键按下事件，并且当按键按下时，多个 KeyDown 事件是产生（具有标准键盘重复率）。

我要捕获的示例键序列之一是快速双 Ctrl + Insert 按键（例如按住 Ctrl 键并在给定时间段内按两次 Insert）。这是我目前在我的代码中的内容：

```
var keyDownSeq = Observable.FromEventPattern<KeyEventArgs>(m_KeyboardHookManager, "KeyDown");
var keyUpSeq = Observable.FromEventPattern<KeyEventArgs>(m_KeyboardHookManager, "KeyUp");

var ctrlDown = keyDownSeq.Where(ev => ev.EventArgs.KeyCode == Keys.LControlKey).Select(_ => true);
var ctrlUp = keyUpSeq.Where(ev => ev.EventArgs.KeyCode == Keys.LControlKey).Select(_ => false); 
```

但后来我被困住了。我的想法是我需要以某种方式跟踪 Ctrl 键是否按下。一种方法是为此创建一些全局变量，并在一些合并侦听器中更新它

```
Observable.Merge(ctrlDown, ctrlUp)                
    .Do(b => globabl_bool = b)
    .Subscribe(); 
```

但我认为它破坏了整个 Rx 方法。关于如何在保持 Rx 范式的同时实现这一目标的任何想法？

然后，当 Ctrl 按下时，我需要在给定时间内捕获两次 Insert 按下。我正在考虑使用缓冲区：

```
var insertUp = keyUpSeq.Where(ev => ev.EventArgs.KeyCode == Keys.Insert);
insertUp.Buffer(TimeSpan.FromSeconds(1), 2)
    .Do((buffer) => { if (buffer.Count == 2) Debug.WriteLine("happened"); })
    .Subscribe(); 
```

但是我不确定这是否是最有效的方式，因为 Buffer 会每隔一秒产生一次事件，即使没有按下任何键。有没有更好的办法？而且我还需要以某种方式将其与 Ctrl 结合起来。

所以再一次，我需要在 Ctrl 按下时跟踪两次 Insert 按下。我是否朝着正确的方向前进？

PS 另一种可能的方法是仅在 Ctrl 按下时订阅 Insert observable。不知道如何实现这一点。也许对此也有一些想法？

**编辑：**我发现的另一个问题是 Buffer 并不完全适合我的需要。问题在于 Buffer 每两秒产生一次样本，如果我的第一次按下属于第一个缓冲区，第二次属于下一个缓冲区，那么什么也不会发生。如何克服它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T04:03:31.973

首先，欢迎来到 Reactive Framework 的神奇魔力！:)

试试这个，它应该让你开始你所追求的 - 在线评论以描述正在发生的事情：

```
using(var hook = new KeyboardHookListener(new GlobalHooker()))
{
    hook.Enabled = true;
    var keyDownSeq = Observable.FromEventPattern<KeyEventArgs>(hook, "KeyDown");
    var keyUpSeq = Observable.FromEventPattern<KeyEventArgs>(hook, "KeyUp");    

    var ctrlPlus =
        // Start with a key press...
        from keyDown in keyDownSeq

        // and that key is the lctrl key...
        where keyDown.EventArgs.KeyCode == Keys.LControlKey

        from otherKeyDown in keyDownSeq
            // sample until we get a keyup of lctrl...
            .TakeUntil(keyUpSeq
                .Where(e => e.EventArgs.KeyCode == Keys.LControlKey))

            // but ignore the fact we're pressing lctrl down
            .Where(e => e.EventArgs.KeyCode != Keys.LControlKey)
        select otherKeyDown;

    using(var sub = ctrlPlus
           .Subscribe(e => Console.WriteLine("CTRL+" + e.EventArgs.KeyCode)))
    {
        Console.ReadLine();
    }
} 
```

现在这并不完全符合您的要求，但稍作调整，就可以轻松适应。关键位是组合 linq 查询`SelectMany`的顺序`from`子句中的隐式调用 - 因此，查询如下：

```
var alphamabits = 
    from keyA in keyDown.Where(e => e.EventArgs.KeyCode == Keys.A)
    from keyB in keyDown.Where(e => e.EventArgs.KeyCode == Keys.B)
    from keyC in keyDown.Where(e => e.EventArgs.KeyCode == Keys.C)
    from keyD in keyDown.Where(e => e.EventArgs.KeyCode == Keys.D)
    from keyE in keyDown.Where(e => e.EventArgs.KeyCode == Keys.E)
    from keyF in keyDown.Where(e => e.EventArgs.KeyCode == Keys.F)
    select new {keyA,keyB,keyC,keyD,keyE,keyF}; 
```

（非常）大致翻译为：

```
if A, then B, then C, then..., then F -> return one {a,b,c,d,e,f} 
```

有道理？

（好吧，既然你已经读到这里了……）

```
var ctrlinsins =
    from keyDown in keyDownSeq
    where keyDown.EventArgs.KeyCode == Keys.LControlKey
    from firstIns in keyDownSeq
      // optional; abort sequence if you leggo of left ctrl
      .TakeUntil(keyUpSeq.Where(e => e.EventArgs.KeyCode == Keys.LControlKey))
      .Where(e => e.EventArgs.KeyCode == Keys.Insert)
    from secondIns in keyDownSeq
      // optional; abort sequence if you leggo of left ctrl
      .TakeUntil(keyUpSeq.Where(e => e.EventArgs.KeyCode == Keys.LControlKey))
      .Where(e => e.EventArgs.KeyCode == Keys.Insert)
    select "Dude, it happened!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:18:27.420

好吧，我想出了一些解决方案。它有效，但有一些限制，我将进一步解释。一段时间内我不会接受答案，也许其他人会提供更好，更通用的方法来解决这个问题。无论如何，这是当前的解决方案：

```
private IDisposable SetupKeySequenceListener(Keys modifierKey, Keys doubleClickKey, TimeSpan doubleClickDelay, Action<Unit> actionHandler)
{
    var keyDownSeq = Observable.FromEventPattern<KeyEventArgs>(m_KeyboardHookManager, "KeyDown");
    var keyUpSeq = Observable.FromEventPattern<KeyEventArgs>(m_KeyboardHookManager, "KeyUp");

    var modifierIsPressed = Observable
        .Merge(keyDownSeq.Where(ev => (ev.EventArgs.KeyCode | modifierKey) == modifierKey).Select(_ => true),
               keyUpSeq.Where(ev => (ev.EventArgs.KeyCode | modifierKey) == modifierKey).Select(_ => false))
        .DistinctUntilChanged()
        .Do(b => Debug.WriteLine("Ctrl is pressed: " + b.ToString()));

    var mainKeyDoublePressed = Observable
        .TimeInterval(keyDownSeq.Where(ev => (ev.EventArgs.KeyCode | doubleClickKey) == doubleClickKey))
        .Select((val) => val.Interval)
        .Scan((ti1, ti2) => ti2)
        .Do(ti => Debug.WriteLine(ti.ToString()))
        .Select(ti => ti < doubleClickDelay)
        .Merge(keyUpSeq.Where(ev => (ev.EventArgs.KeyCode | doubleClickKey) == doubleClickKey).Select(_ => false))
        .Do(b => Debug.WriteLine("Insert double pressed: " + b.ToString()));

    return Observable.CombineLatest(modifierIsPressed, mainKeyDoublePressed)
        .ObserveOn(WindowsFormsSynchronizationContext.Current)
        .Where((list) => list.All(elem => elem))
        .Select(_ => Unit.Default)
        .Do(actionHandler)
        .Subscribe();
} 
```

用法：

```
var subscriptionHandler = SetupKeySequenceListener(
    Keys.LControlKey | Keys.RControlKey, 
    Keys.Insert | Keys.C, 
    TimeSpan.FromSeconds(0.5),
    _ => { WindowState = FormWindowState.Normal; Show(); Debug.WriteLine("IT HAPPENED"); }); 
```

让我解释一下这里发生了什么，也许它对某些人有用。我基本上设置了 3 个 Observable，一个用于修饰键 ( `modifierIsPressed`)，另一个用于在按下修饰键以激活序列 () 时需要双击的键，`mainKeyDoublePressed`最后一个用于首先组合两者。

第一个非常简单：只需将按键和释放转换为 bool（使用`Select`）。`DistinctUntilChanged`需要，因为如果用户按住某个键，则会生成多个事件。我在这个 observable 中得到的是一系列布尔值，表示修饰键是否关闭。

然后是最棘手的一个，处理主键的地方。让我们一步一步来：

1.  我用来用时间跨度`TimeInterval`替换*按键*（这很重要）事件
2.  然后我用函数得到*实际*`Select`的时间跨度（为下一步做准备）
3.  然后是最棘手的事情，`Scan`. 它所做的是从前一个序列（在我们的例子中为时间跨度）中获取每两个连续元素，并将它们作为两个参数传递给一个函数。该函数的输出（必须与参数的类型相同，时间跨度）被进一步传递。在我的例子中，这个函数做了非常简单的事情：只返回第二个参数。

为什么？是时候在这里记住我的实际任务了：抓住某个按钮的双击，这些按钮在时间上彼此足够接近（例如在我的示例中为半秒）。我的输入是一系列时间跨度，表示自上一个事件发生以来经过了多长时间。这就是为什么我需要等待两个事件：第一个事件通常足够长，因为它会告诉用户上次按下键的时间，可能是几分钟或更长时间。但是如果用户快速按键两次，那么第二次时间跨度会很小，因为它会区分最后两次快速按键之间的差异。

听起来很复杂，对吧？然后用一个简单的方式想一想：`Scan`总是结合**两个最新的事件**。这就是为什么它在这种情况下适合我的需求：我需要听**双击**。如果我需要连续等待 3 次按下，我会在这里不知所措。这就是为什么我称这种方法为有限的，并且仍然等待是否有人会提供更好和更通用的解决方案，以处理潜在的任何组合键。

无论如何，让我们继续解释：

4\. `Select(ti => ti < doubleClickDelay)`：这里我只是将序列从时间戳转换为布尔值，为足够快的连续事件传递 true，为不够快的事件传递 false。

5.这是另一个技巧：我正在将第 4 步的布尔序列合并到新的序列中，在那里我监听按键事件。还记得最初的序列一是根据按键事件构建的，对吧？所以在这里我基本上采用了与第一个可观察到的方法相同的方法：将 true 传递给 key down 并将 false 传递给 key up 。

然后它变得超级容易使用的`CombineLatest`函数，它从每个序列中获取最后的事件，并将它们作为列表进一步传递给`Where`函数，该函数检查它们是否都为真。这就是我实现目标的方式：现在我知道在按住修饰键的同时按下主键两次。合并主键向上​​事件可确保我清除状态，因此下一次按下修饰键不会触发序列。

所以我们开始吧，差不多就是这样。正如我之前所说，我会发布这个，但不会接受。我希望有人会插话并启发我。:)

提前致谢！

# c# - asp.net 下拉回发在 Firefox 上不起作用

> ID：14335395
> 
> 赞同：1
> 
> 时间：2013-01-15T10:12:30.063
> 
> 标签：c#, javascript, asp.net, firefox

我正在使用放置在 ajax 选项卡容器中的下拉列表。但即使我已将 autopostback 属性设置为 true，它也不会回发。这仅在 Firefox 中发生，而不在 IE 或 chrome 中发生。任何人都可以帮助我解决这个问题。我正在使用 ajax 工具包版本4.1.50731.0。

```
 <asp:TabContainer ID="TabContainer2" runat="server" Width="100%" CssClass="myTab"
    Height="2200px" ActiveTabIndex="0">
    <asp:TabPanel ID="TabPanel8" runat="server" HeaderText="Add Transaction">
        <ContentTemplate>
            <div>
                <table class="style1">

                    <tr>
                        <td class="style16">
                            &nbsp;
                        </td>
                        <td align="right" class="style15">
                            Select&#160;News Heading :&#160;&#160;
                        </td>
                        <td>
                            <asp:DropDownList ID="DropDownList1" runat="server" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged"
                                AutoPostBack="True" >
                            </asp:DropDownList>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator12" runat="server" ControlToValidate="DropDownList1"
                                ErrorMessage="Please Select News Heading" ValidationGroup="a" InitialValue="Select News Heading">*</asp:RequiredFieldValidator><asp:ValidatorCalloutExtender
                                    ID="RequiredFieldValidator12_ValidatorCalloutExtender" runat="server" Enabled="True"
                                    TargetControlID="RequiredFieldValidator12">
                                </asp:ValidatorCalloutExtender>
                            <asp:Label ID="Label3" runat="server"></asp:Label>
                        </td>
                        <td>
                            &#160;&#160;
                        </td>
                    </tr>
                    <tr>
                        <td class="style16">
                            &#160;&#160;
                        </td>
                        <td align="right" class="style15">
                            &#160;&#160;
                        </td>
                        <td>
                            &#160;&#160;
                        </td>
                        <td>
                            &#160;&#160;
                        </td>
                    </tr>
                    <tr>
                        <td class="style16">
                            &#160;&nbsp;
                        </td>
                        <td align="right" class="style15">
                            Select Sub Heading :&#160;
                        </td>
                        <td>
                            <asp:DropDownList ID="DropDownList2" runat="server" OnLoad="DropDownList2_Load">
                            </asp:DropDownList>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator14" runat="server" ControlToValidate="DropDownList2"
                                ErrorMessage="Please select sub heading" ValidationGroup="a" InitialValue="Select News Name">*</asp:RequiredFieldValidator><asp:ValidatorCalloutExtender
                                    ID="RequiredFieldValidator14_ValidatorCalloutExtender" runat="server" Enabled="True"
                                TargetControlID="RequiredFieldValidator14">
                            </asp:ValidatorCalloutExtender>
                        <asp:Label ID="Label4" runat="server"></asp:Label>
                    </td>
                    <td>
                        &#160;&nbsp;
                    </td>
                </tr>

            </ContentTemplate>
        </asp:TabPanel>
    </asp:TabContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:31:17.080

您似乎确实缺少内容模板中的结束`</table>`和`</div>`标记。

添加这些可以解决您的问题吗？

编辑

您的 javascript 控制台（例如 firefox 中的 firebug）是否给您任何 javascript 错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:45:14.293

我认为您的问题的解决方案是：

> 如果验证失败，则`DropDownList`不会回发，因此请通过禁用 Validators 尝试一次`DropDownList`。

需要注意的几点

1.  `RequiredFieldValidator`应该有`Display="None"`你正在使用`ValidatorCalloutExtender`
2.  穿上和`CausesValidation`_`DropDownList``RequiredFieldValidator`
3.  这将导致在服务器端自动触发验证。
4.  `Page.IsValid`在`SelectedIndexChanged`继续任何其他代码部分之前检查事件处理程序。

# javascript - 如何在jquery中重新绑定事件

> ID：14335400
> 
> 赞同：0
> 
> 时间：2013-01-15T10:13:03.573
> 
> 标签：javascript, jquery

我有一些附加在大量元素上的事件，例如 click、dblclick。要一次将 click 和 dblclick 事件与所有元素解除绑定，我在 jquery 中使用了它：

```
 $(document).unbind("click").unbind("dblclick"); 
```

现在我必须再次将这些事件重新绑定到所有元素。为此，我使用了：

```
 $(document).bind("click").bind("dblclick"); 
```

但这不起作用。事件不会重新绑定。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:15:58.823

```
$(document).bind("click").bind("dblclick"); 
```

我认为这不会绑定任何东西，您需要回调。

```
$(document).bind("click", onClick).bind("dblclick", onDbClick); 
```

* * *

此外，在这种情况下，您可能需要考虑使用[命名空间事件](http://docs.jquery.com/Namespaced_Events)：

```
$(document).bind("click.myclick", onClick) 
```

然后稍后仅解除绑定此事件，而使其他事件`click`保持不变。

```
$(document).unbind("click.myclick"); 
```

* * *

PS 现在认为使用新的[`on`](http://api.jquery.com/on/),[`off`](http://api.jquery.com/off/)方法进行绑定是更好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:17:28.150

解绑：

```
$(document).off("click", myFunction); 
```

绑定：

```
$(document).on("click", myFunction);

function myFunction() {
    alert('you clicked the document');
} 
```

jQuery [on()](http://api.jquery.com/on/)和[off()](http://api.jquery.com/off/)将是要走的路，并且在重新绑定时，必须再次传入该函数，您不能只是重新绑定并期望它知道要调用什么函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:31:28.393

正如@adeneo 建议的那样，最好的方法是命名回调函数。但有时您不知道处理程序何时被绑定（插件中的 f.ex），或者您可能使用以下方式添加了匿名回调：

```
$(document).click(function() {
    // anonymous
}); 
```

`$._data`然后您可以使用该对象恢复所有这些回调。这是一个适合您的功能：

```
function restoreHandlers(elem, type) {
  var orig = $._data(elem, 'events');
  if ( type in orig ) {
    return $.map(orig[type], function(o) {
      return o.handler;
    });
  } else return [];
} 
```

像这样使用它（在你解除绑定之前）：

```
var handlers = restoreHandlers(document, 'click'); 
```

然后解绑：

```
$(document).off('click'); 
```

然后重新绑定：

```
$.each(handlers, function(i, fn) {
    $(document).on('click', fn);
}); 
```

# backbone.js - 模型上的日期属性

> ID：14335407
> 
> 赞同：1
> 
> 时间：2013-01-15T10:13:27.760
> 
> 标签：backbone.js

有什么方法可以将 ISO 日期解析为 javascript-dates om Backbone 模型。假设一些 JSON 返回这样的模型数据：

```
 { prop1: "somevalue", date: "2011-05-11T18:30:00" } 
```

为了使这项工作成为约会，我想出了这个：

```
 var Model = exports.Model = Backbone.Model.extend({
        toJSON: function () {
            return _.extend(this.attributes, {
                date: new Date(this.attributes.date)
            });
        }
    }); 
```

这很好用，并且可以像这样编写模板标记：

```
 "<%=date.toLocaleDateString() %>" 
```

一切都很好，但不能以某种方式在 BackboneModel 原型上完成。这样我必须在每个日期类型的模型属性上编写这个实现 - 那不是很干

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T10:34:18.170

因为 JSON ISO8601 格式的日期只是字符串，所以没有神奇的方法来解析它们。您需要声明或检测应解析的字段。

声明很简单，只需在模型上定义一组日期字段并解析它们。

```
//declare dateFields on the model
var TestModel = Backbone.Model.extend({
  dateFields: [
    'createdDate',
    'updatedDate'
  ]
});

//override toJSON
Backbone.Model.prototype.toJSON = function() {
  return this._parseDates(this.attributes);
};

//hydrates string dates to Date objects
Backbone.Model.prototype._parseDates = function(attrs) {
  attrs = _.clone(attrs);
  if(!this.dateFields) { return attrs; }

  _.each(this.dateFieds, function(field) {
    attrs[field] = new Date(attrs[field]);
  });
  return atts;
}; 
```

这需要您告诉日期解析器要考虑哪些字段。由于您希望获得更自动的东西，另一种选择是尝试通过查看每个字符串值的形状来检测哪些字段是日期：

```
//hydrates string dates to Date objects
Backbone.Model.prototype._parseDates = function(attrs) {
  attrs = _.clone(attrs);
  var iso8601Pattern = /^[0-9][0-9][0-9][0-9](-[0-1][0-9](-[0-3][0-9](T[0-9][0-9](:[0-9][0-9](:[0-9][0-9])(\.[0-9][0-9][0-9]?)?)?)?)?)?Z$/;     

  _.each(attrs, function(value, key) {
    if(_.isString(value) && iso8601pattern.test(value)) {
      attrs[key] = new Date(value);
    }
  });
  return attrs;
}; 
```

这不需要您列出所有日期字段，但会增加解析的开销，因为它需要测试每个值以查看它是否看起来像一个日期。

# java - 固定线程池

> ID：14335410
> 
> 赞同：2
> 
> 时间：2013-01-15T10:13:35.107
> 
> 标签：java, eclipse, threadpool

我需要做的是使用大小为 3 的**FixedThreadPool**，然后使用它来打印 ThreadName，然后让它在指定的时间间隔内随机休眠一段时间，并在完成后打印它是清醒的。我需要一个线程一个线程地做，但我的输出是与所有 3 个线程一起出现的。

期望的输出：pool-1-thread-1 在 800 毫秒到 1000 毫秒之间随机进入睡眠状态

pool-1-thread-1 完成睡眠

pool-1-thread-2 在 800 毫秒和 1000 毫秒之间的随机时间间隔内进入睡眠状态

pool-1-thread-2 完成睡眠

pool-1-thread-3 在 800 毫秒和 1000 毫秒之间的随机时间间隔内进入睡眠状态

pool-1-thread-3 完成睡眠

我只需要使用 FixedThreadPool

```
import java.util.Random;
import java.util.concurrent.*;

class Sleep implements Runnable
{
 public void run()
  {
    Random ran = new Random();
    int randomnumber = ran.nextInt(1000-800+1)+800;
    System.out.print(Thread.currentThread().getName()+" ");
    System.out.println("Going to sleep for random amount of time interval between 800 ms and 1000ms");
    try
    {
        Thread.sleep(randomnumber);

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    System.out.println(Thread.currentThread().getName()+" done sleeping");
    Thread.yield();
 }
}

public class Ch6Ex3 
{
  public static void main(String[] args) 
   {
    ExecutorService exe = Executors.newFixedThreadPool(3);
    for(int i=0;i<3;i++)
    {
        exe.execute(new Sleep());
    }
    exe.shutdown();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:38:02.917

创建只有 1 个线程的线程池。如果您使用 3 个线程，则最多可以同时运行 3 个可运行线程，这不是您想要的。所以使用：

```
ExecutorService exe = Executors.newFixedThreadPool(1); 
```

实际上更好的选择是使用`newSingleThreadExecutor`，因为它明确表明它在任何给定时间只运行 1 个可运行对象：

```
ExecutorService exe = Executors.newSingleThreadExecutor(); 
```

在内部，这两种方法都`ThreadPoolExecutor`使用 1 个线程创建，因此它们之间仅在命名方面没有实际区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:17:03.487

如果您一个接一个地创建对象（在相同的毫秒内），它们可能在它们的 Random 实例中具有相同的种子 - 因此它们将休眠相同的时间。

来自 javadoc：

```
Creates a new random number generator. Its seed is initialized to a value based on the current time:
 public Random() { this(System.currentTimeMillis()); }
Two Random objects created within the same millisecond will have the same sequence of random numbers. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:20:37.960

除此之外，您的代码中存在问题。

```
Thread.yield(); 
```

是多余的。

如果您需要一个一个执行，则不需要线程池。您可以`Sleep#run`从`for`循环中调用创建不同的类实例`Sleep`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:26:43.573

如果你需要它来工作`FixedThreadPool`并且你想要 3 个单独的线程完成你的工作，你应该使用 Locks。像这样：第一个线程在入口处锁定你的锁，在出口处解锁。下一个线程将等待 Lock 释放并执行相同的操作。

在这里阅读更多：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)

# yii - 修改 Yii Portlet 布局

> ID：14335417
> 
> 赞同：0
> 
> 时间：2013-01-15T10:13:51.803
> 
> 标签：yii

是否可以修改 Yii Portlet 的布局？

在我的应用程序中，我想使用一个 Portlet 来允许用户管理某些控制器，而带有 htmlOptions 的 Portlet 似乎非常合适，但我想更改它使用的布局/视图。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:31:03.780

`HtmlOptions`让您向容器标签添加一些选项。

此小部件未使用视图。

如果要修改标题的呈现方式，则应覆盖方法`renderDecoration()`。它的默认代码是：

```
protected function renderDecoration() 
{ 
    if($this->title!==null) 
    { 
        echo "<div class=\"{$this->decorationCssClass}\">\n"; 
        echo "<div class=\"{$this->titleCssClass}\">{$this->title}</div>\n"; 
        echo "</div>\n"; 
    } 
} 
```

要自定义样式，您可以更改`contentCssClass`，`decorationCssClass`以及`titleCssClass`

然后要更改 Portlet 的内容，您必须覆盖`renderContent()`默认为空的方法。您还可以设置内容如下：

```
<?php $this->beginWidget('zii.widgets.CPortlet'); ?>
    ...insert content here...
<?php $this->endWidget(); ?> 
```

# ckeditor - CK 编辑器，使用 custom.css 在下拉列表中自动设置样式

> ID：14335419
> 
> 赞同：0
> 
> 时间：2013-01-15T10:13:56.063
> 
> 标签：ckeditor

我在使用 CK4 时遇到问题，并且无法在样式下拉列表中获取标题样式。

.css 应该由后端和前端共享，并使用#page 作为 css-id

有什么方法可以告诉下拉列表解析带有#page-prefix 的标题。

我正在使用

```
 CKEDITOR.config.bodyId = 'page'; 
```

和CSS

```
.cke_editable {
}

#page {
    /* works - editor area goes black..
    font-family:Arial;
    margin:10px;
    font-family:Arial;
    background-color:#000;
    font-size: 10px;
    color:#fff;

}

#page h1 {
   /* works in editor-area, but not dropdown */
    font-family: Verdana;
    color:#999;
}

.cke_editable h2 {
  /* same as h1.. */
    font-family:Arial;
    color:#f00;
    font-size:16px;
    background-color:#999;
}

h3 {
   /* work BOTH in editor and style shows in dropdown. */
    color:#0f0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:23:01.937

我猜您将要使用[stylesheetparser](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Styles#Stylesheet_Parser_Plugin)插件来解析其他选择器。此问题已在此处得到解答：[CKEditor - Stylesheet Parser - Valid Selectors](https://stackoverflow.com/questions/14224158/ckeditor-stylesheet-parser-valid-selectors/14225233#14225233)

这并不简单，但我相信你会设法做到这一点。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:20:47.277

问题是 CKEditor 没有将 bodyId 和/或 bodyClass 应用于样式组合：[http ://dev.ckeditor.com/ticket/7452](http://dev.ckeditor.com/ticket/7452)

如您所见，该错误是在大约两年前报告的，并且大部分时间都没有开发人员的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:08:59.960

我通过解析 css 实现了一个可行的解决方案，例如

```
 #page h1 {...} 
```

当连接到 CK 时：

```
['config']['css'] = 'parseMyCss.php?theFile=style.css 
```

并在 parseMyCss （简化）中：

```
$s = file_get_contents($theFile);
$s = str_replace('#page ','', $s);
header('content-type:text/css');
echo $s; 
```

# jquery - 在 jQuery Draggable 中多次重用函数

> ID：14335420
> 
> 赞同：0
> 
> 时间：2013-01-15T10:13:58.273
> 
> 标签：jquery, user-interface, jquery-ui-draggable, code-reuse

我正在使用 jQuery UI Draggable 并且我有多个用户可以拖动的点，每个点的顶部/左侧位置显示在下面的相应结果 div 中（这将显示每个点的原始起始位置，如果它从不移动，或者每个点的最终位置（如果移动）。HTML如下

```
<div id="container">
<div id="point1"></div>
<div id="point2"></div>
<div id="point3"></div> etc
</div>

<div id="result1"></div>
<div id="result2"></div>
<div id="result3"></div> etc 
```

我有以下代码，但为了提高效率，我需要使用下面的相同函数来显示每个点的结果。它目前可以很好地显示 point1/result1 的位置，但是对于如何调整它以显示 result2、result3 等而不是每次都简单地复制/粘贴函数，我已经大脑冻结了！

```
$(document).ready(function() {

var coord = function(element) {
element = $(element);
var top = element.position().top;
var left = element.position().left;
$('#result1').text('White box: Left: ' + left + 'px ' + 'Top: ' + top + 'px');
}

$('#point1').draggable({cursor: "move", cursorAt: { top: 5, left: 5 }, containment: "#container", scroll: false,
create: function() {
    coord('#point1');
},
start: function() {
    coord('#point1');
},
stop: function() {
    coord('#point1');
}
}); 
```

我知道我可能可以将子选择器用于容器内的所有点而不是#point1 div，但它上面的函数我想每次都重用（然后能够获取每个值并使用他们之后）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:43:23.733

我是 jQuery 的新手，但我一直在玩你最近在做什么。我通过为 DIV 分配一个类来解决这个问题。一个用于可拖动元素，一个用于可放置元素。然后，您可以简单地为类声明事件。

假设你有以下...

```
<div id="point1" class="point"></div>
...
<div id="result1" class="result"></div>

$( ".point" ).draggable();
$( ".result" ).droppable(); 
```

然后，您可以为每种行为相应地分配通用函数。

希望这会有所帮助。

# html - css transition on background image gradient

> ID：14335423
> 
> 赞同：13
> 
> 时间：2013-01-15T10:14:00.597
> 
> 标签：html, css, webkit, css-transitions

I have a background image in my css3 with image and gradient defined. I also want to have a transition when class changes from on_time -> too_late or vise versa.

I cannot get the transition on the gradient. Is this somehow supported in css3?

Thanks

```
div.too_late
{
    color: White;        
    background-image: url(../Content/images/uit_white.png), -webkit-linear-gradient(top, #feb233 0%, #f39801 100%);       

    -webkit-transition-property: background-image, color; 
    -webkit-transition-duration: 5s;    
}

div.on_time
{
    color: #222;        
    background-image: url(../Content/images/uit_black.png), -webkit-linear-gradient(top, yellow 0%, #99ff33 100%);    

    -webkit-transition-property: background-image, color; 
    -webkit-transition-duration: 5s;           
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T14:12:34.207

It's not possible to have transitions on background gradients. But you can have a look at this link to make it work with "hacks": [http://nimbupani.com/some-css-transition-hacks.html](http://nimbupani.com/some-css-transition-hacks.html)

You can also make it appear like it's changing by using the background-position shift: [http://sapphion.com/2011/10/css3-gradient-transition-with-background-position/](http://sapphion.com/2011/10/css3-gradient-transition-with-background-position/)

Here is a similar question with more links and information btw: [Use CSS3 transitions with gradient backgrounds](https://stackoverflow.com/questions/6542212/use-css3-transitions-with-gradient-backgrounds)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T16:09:49.417

> "Gradients don't support transitions yet (although the spec says they should). If you want a fade-in effect with a background gradient, you have to set an opacity on the container and transition the opacity."

Source: [Use CSS3 transitions with gradient backgrounds](https://stackoverflow.com/questions/6542212/use-css3-transitions-with-gradient-backgrounds)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T02:27:38.967

The property `background-image` is not supported

[http://www.w3.org/TR/css3-transitions/#animatable-css](http://www.w3.org/TR/css3-transitions/#animatable-css)

# php - 当元素id包含像_item5_xyz这样的下划线时，如何在javascript中更改html元素的值？

> ID：14335425
> 
> 赞同：0
> 
> 时间：2013-01-15T10:14:03.270
> 
> 标签：php, javascript, jquery, html

我想使用 javascript 更改 html 文本框的值。我尝试了 .value 但它不起作用。然后我更改不带下划线 id 的 id 并更改值并将 id 更改回原来的一个值与原始值相同没有变化。

```
<input id="_item1govt_id" class=" required-entry input-text required-entry input-text required-entry" type="text" value="1" name="address[1][govt_id]" style="display: none;">

echo "<script> function setFunc".$rs['entity_id']."(obj) 
        {

            var e = document.getElementById('_item".$rs['entity_id']."govt_id');
            e.id = 'ape".$rs['entity_id']."';

            e.value = obj.value;

            alert(e.value);

            e.id = '_item".$rs['entity_id']."govt_id';

        }

</script>         " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:18:06.987

您可以使用`document.getElementById("ID").value = "new value";`

即使您的 id 包含 _ 或数字，它也会起作用。

请检查您在 html 中的 id 和您在 javascript 中使用的 id 是否匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:21:14.573

如果要更改文本框的 html，则可以使用 javascript 如下完成
  `document.getElementById('textbox_id').innerHTML="New text"`；

有关更多信息，请在[此处](http://www.w3schools.com/jsref/prop_html_innerhtml.asp)查看基本信息。
我想它会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:30:54.863

像下面这样运行你的代码工作正常，你真的在​​任何地方调用过这个函数吗？

```
<input id="_item2govt_id" class=" required-entry input-text required-entry input-text required-entry" type="text" value="1" name="address[1][govt_id]" style="display: none;">
<?php
$rs = array('entity_id' => 2);
echo "<script> function setFunc" . $rs['entity_id'] . "(obj)
        {

            var e = document.getElementById('_item" . $rs['entity_id'] . "govt_id');
            e.id = 'ape" . $rs['entity_id'] . "';

            e.value = obj.value;

            alert(e.value);

            e.id = '_item" . $rs['entity_id'] . "govt_id';

        }
setFunc" . $rs['entity_id'] . "({value:\"test\"});

</script>"; 
```

注意在底部我调用了 setFunc2() 方法。

### 编辑

有关 php fiddle 工作示例，请参见此处：http: [//phpfiddle.org/main/code/7em-jwq](http://phpfiddle.org/main/code/7em-jwq)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T10:24:11.450

```
 $("#yourTextBoxIdName").val('newValue'); 
```

# javascript - Titanium Mobile 的 HTML 解析器

> ID：14335431
> 
> 赞同：2
> 
> 时间：2013-01-15T10:14:26.567
> 
> 标签：javascript, titanium-mobile, html-parser

我正在为 Appcelerator Titanium Mobile 寻找易于实现的模块（或函数），它可以解析 html 代码（剥离不需要的标签并清理代码）并只吐出内容。

我知道在移动开发中可以选择使用 webview，但它会增加额外的开销，消耗设备资源并减慢您的应用程序。所以这不是一个选择。

我还在官方 appcelerator 论坛上找到了这篇文章：http: [//developer.appcelerator.com/question/60731/what-is-the-best-way-to-parse-html](http://developer.appcelerator.com/question/60731/what-is-the-best-way-to-parse-html) 但它已经 2 岁了，我从来没有设法让它工作。

理想情况下，我正在寻找的解决方案将遵循 Titanium Mobile（和 nodejs）中使用的 commonjs 实践。

# delphi - IBDataset，如何/何时执行 RefreshSQL？

> ID：14335447
> 
> 赞同：2
> 
> 时间：2013-01-15T10:15:15.360
> 
> 标签：delphi, delphi-2010

我正在使用 Delphi 2010 IBDataset 组件。我的查询中有来自未包含在更新 sql 中的联接表的字段。所以我需要刷新我更新的行。执行此操作所需的 SQL 位于 IBDataset 的 updateSQL 属性中。

我如何以及何时调用此更新 SQL？我认为它必须在我提交更新后完成。

我以为我只需要调用 IBDataset.Update 但这没有效果。

# c++ - QVariant void 值没有被忽略，因为它应该被忽略

> ID：14335448
> 
> 赞同：0
> 
> 时间：2013-01-15T10:15:15.397
> 
> 标签：c++, qt, qt5

我无法理解 Q_OBJECT 子类的 QVariant 的行为（GVPalette* 继承自具有 Q_OBJECT 宏的 BasicItemNode）。编译器错误是

```
/qobject.h:471:   instantiated from ‘T qobject_cast(QObject*) [with T = GVPalette*]’
/qvariant.h:584:  instantiated from ‘static T QtPrivate::QVariantValueHelper<T>::object(const QVariant&) [with T = GVPalette*]’
/qvariant.h:100:  instantiated from ‘static ReturnType QtPrivate::ObjectInvoker<Derived, Argument, ReturnType>::invok
                  e(Argument)  [with Derived = QtPrivate::QVariantValueHelper<GVPalette*>, 
                  Argument = const QVariant&, ReturnType = GVPalette*]’
/qvariant.h:593:   instantiated from ‘T qvariant_cast(const QVariant&) [with T = GVPalette*]’
/CLSMetaType.cpp:50:   instantiated from here
/BasicItemNode.h:27: error: void value not ignored as it ought to be 
```

下面代码段中的第 2 行对应于 CLSMetaType.cpp:50 和第 6 行。对应于 BasicItemNode.h:27

```
CLSMetaType.cpp
if(variant.canConvert<GVPalette*>()) {
  1.//retVal = variant.value<GVPalette*>()->objectName();
  2\. GVPalette* gv = variant.value<GVPalette*>();
  3\. retVal = gv->objectName();
}

BasicItemNode.h
4\. class BasicItemNode : public QObject
5\. {
6\.   Q_OBJECT 
```

Qt5 - 开源版本 g++ - 4.6.3

# android - Android：如何为不同的android版本使用不同的主题？

> ID：14335453
> 
> 赞同：6
> 
> 时间：2013-01-15T10:15:27.203
> 
> 标签：android, themes, manifest

MinSDKVersion = 7 目标SDKVersion = 17

如果用户有 SDKVersion 11 或更高版本，我喜欢将主题设置为 Theme.Holo.Light。它在这里对我不起作用。当我在 3.1 设备上启动应用程序时，它只使用 Theme.Light：

![在此处输入图像描述](../Images/999b80e3d8323117001a6a1ac363b947.png)

当我在版本低于 3.1 的设备上运行此应用程序时也是如此

我的文件夹结构：

![在此处输入图像描述](../Images/b3c77cf2730eb8633b8306c6c579f1a7.png)

显现：

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/MyTheme" > 
```

价值观-v11：

```
<resources>

<!--
    Base application theme, dependent on API level. This theme is replaced
    by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-->
<style name="AppBaseTheme" parent="@android:style/Theme.Light">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="@android:style/Theme.Light">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style>

<style name="MyTheme" parent="@android:style/Theme.Holo.Light">
    <!-- Any customizations for your app running on devices with Theme.Holo here -->
</style> 
```

其他值文件夹：

```
<resources>

<!--
    Base application theme, dependent on API level. This theme is replaced
    by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-->
<style name="AppBaseTheme" parent="@android:style/Theme.Light">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="@android:style/Theme.Light">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style>

    <style name="MyTheme" parent="@android:style/Theme.Light">
    <!-- Any customizations for your app running on devices with Theme.Holo here -->
</style> 
```

我怎样才能正确使用它？

真诚的 Marco Seiz

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T10:21:56.813

为什么你的styles.xml 文件中有两次你的主题？

```
<style name="AppTheme" parent="@android:style/Theme.Light">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style>

<style name="MyTheme" parent="@android:style/Theme.Holo.Light">
    <!-- Any customizations for your app running on devices with Theme.Holo here -->
</style> 
```

删除不需要的（在本例中为 Theme.Light 主题）：

价值观-v11：

```
<style name="MyTheme" parent="@android:style/Theme.Holo.Light">
    <!-- Any customizations for your app running on devices with Theme.Holo here -->
</style> 
```

价值观：

```
<style name="MyTheme" parent="@android:style/Theme.Light">
    <!-- Any customizations for your app running on devices with Theme.Holo here -->
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:33:44.550

将@Ahmad 提供的解决方案放在他说的目录中名为*themes.xml的新文件中:-)*

如果您将使用多语言和多主题，您可以看看我几分钟前做过的类似问题......并得到了回答：

[同时多语言和多主题](https://stackoverflow.com/questions/14334498/multilanguage-and-multitheme-at-same-time/14334844#14334844)

# c# - 执行某些操作后显示通知图标上下文菜单

> ID：14335454
> 
> 赞同：0
> 
> 时间：2013-01-15T10:15:31.713
> 
> 标签：c#, .net, winforms, notification-area

我需要在执行某些操作后而不是在单击后立即显示通知图标上下文菜单的上下文菜单，以便左键和右键单击。

它非常适合左键单击：

```
sysTrayIcon.MouseClick += OnSysTrayClicked;

private static void OnSysTrayClicked(Object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        PerformActions();
        MethodInfo oMethodInfo = typeof(NotifyIcon).GetMethod("ShowContextMenu", BindingFlags.Instance | BindingFlags.NonPublic);
        oMethodInfo.Invoke(sysTrayIcon, null);
    }
} 
```

但是右键单击仍然会自动处理，并且`ContextMenuStrip`在右键单击时会显示关联。有没有办法用我的事件处理程序覆盖它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:37:59.377

有两种选择。

选项 A：不要将上下文菜单分配给 this.ContextMenuStrip。随时手动打开上下文菜单。请注意，strip.Top 和 strip.Left 必须是绝对屏幕坐标。

选项 B：如果鼠标右键，则取消分配 this.ContextMenuStrip OnMouseDown 并重新分配 OnMouseUp。请参阅此[示例](http://www.codeproject.com/Questions/111097/How-to-disable-the-pop-up-of-ContextMenuStrip)。

# c++ - C++ 中的 IF 循环行为

> ID：14335457
> 
> 赞同：2
> 
> 时间：2013-01-15T10:15:39.970
> 
> 标签：c++, loops, if-statement, max

我需要在图像中找到一个像素与其周围的 8 个像素相比是否具有最大值。

我不确定什么是最佳方式，所以我的想法是使用这样的 if 语句：

```
if(pixel > pixel1 && pixel > pixel2 && pixel > pixel3 && ... && pixel> pixel8) 
```

我的问题如下：如果它发现例如像素不大于像素1，它是否仍会检查语句的其余部分，或者因为它只是与，它会丢弃指令并继续前进？

如果答案是第一个，那么一直检查每个像素的计算量会很大，有人可以给我一个提示，告诉我如何更有效地解决这个简单的问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T10:17:01.353

这称为[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

> 仅当第一个参数不足以确定表达式的值时，才执行或评估第二个参数

* * *

由于条件是`&&`，它**不会进一步检查**`false`它是否在任何条件下得到 a 。

同样，如果条件是`||`，一旦找到 ，它将停止检查`true`。

* * *

顺便说一句，我不确定优先规则，因此为了安全起见，我会将每个条件括在括号中。

```
if((pixel > pixel1) && (pixel > pixel2) && ... 
```

编辑：[运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)规则似乎表明这种情况下的括号是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:18:04.600

不，它不会检查其余的语句。C++“短路”条件语句，`&&`如果第一个操作数为假，则忽略第二个操作数（`||`如果第二个操作数为真，则忽略第二个操作数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:19:33.247

C++ 中存在“短路”，这意味着当第一个条件满足时`if`，将不检查第二个条件。

例如，如果`pixel > pixel1`结果`false`以下条件将被忽略。

我向您推荐这个[“短路评估”](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T10:20:38.927

运算符`&&`和`||`是 C++（以及大多数其他语言）中的所谓“短路运算符”。这意味着一旦可以确定结果，评估将立即停止。对于`&&`，这意味着如果一个项是`false`，则其他项的评估将停止，因为答案是`false`，独立于其他项。相反，`||`这意味着如果一个术语是 ，其他术语的评估将停止`true`。另请参阅[此链接](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T10:21:00.460

不要把它想象成一个系列，而是一组表达式，所以`&&`只有左右两侧，并且是左侧关联的。

如果左侧对它进行评估，`false`则标准保证不评估右侧的内容。右侧甚至可能包含访问冲突（并且经常如此），例如检查左侧的指针是否非空，然后在右侧取消引用它。

你的操作是`O(N)`最坏的。如果你这样做一次，这是最佳方式，如果你要经常这样做，你最好找到像素的最大值，然后只检查那个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T11:14:17.727

虽然短路评估已在其他答案中进行了解释，但值得指出的是，两个像素的比较可能并非完全无关紧要。例如，您可能希望在将红色、绿色和蓝色像素值乘以加权因子后添加它们（因为人眼对某些颜色比其他颜色更敏感）......在这种情况下，如果您不保留被比较对象内部的整体像素值（从而为该值使用更多内存并以某种方式跟踪它何时失效，+ CPU 时间在必要时检查和重新生成它），那么您必须在每个期间执行此冗余计算在这些比较中。为避免这种情况，您可以 - 例如 - 添加“get_brightness()”

# android - 此应用程序遇到了 lua 错误

> ID：14335462
> 
> 赞同：0
> 
> 时间：2013-01-15T10:15:49.680
> 
> 标签：android, lua, coronasdk

当我为我的 android 构建时，我不断收到此错误。文件名是正确的大小写和所有，我不明白问题是什么。但是当我把这段代码拿出来时，它就可以工作了，所以它就在这里的某个地方。有任何想法吗？

```
local bg = display.newRect( 0, 0, display.contentWidth, display.contentHeight )
bg:setFillColor( 255 )  -- white

local group = self.view

  local imageObj = {"box.png","box.png","box.png","box.png","box.png"}

  slide=slideView.new(imageObj,nill,0,50)   

-- all objects must be added to group (e.g. self.view)
group:insert( bg )
group:insert( slide ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:53:35.653

再次检查 box.png 是否正常，顺便说一句，使用 nil 而不是 nill。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:55:26.890

“它在模拟器中有效但在设备上无效”有两个主要原因。一个是有大小写问题的文件名，另一个是模拟器不使用的 build.settings 文件中的错误。

slideView.new() 是否采用一组图像？

# ios - 根据 NSDictionary 键值将 NSArray 拆分为子数组

> ID：14335466
> 
> 赞同：4
> 
> 时间：2013-01-15T10:16:19.577
> 
> 标签：ios, nsmutablearray, nsdictionary, filtering, split

我们有一个应用程序调用 SOAP Web 服务并检索一长串 XML，然后应用程序将其解析为`NSArray`对象`NSDictionary`。包含一个出租公寓信息列表，`NSArray`每个信息都存储在一个`NSDictionary`.

整个列表可能包含 10 种不同类型的 Apartments（即 2-room、3-room），我们需要根据 Room-Type 将它们拆分`NSArray`成更小的 s，它在对象中具有键“roomType”。`NSArray``NSDictionary`

目前我们的算法是

1.  用于`[NSArray valueForKeyPath:@"@distinctUnionofObjects.room-type"]` 获取唯一房间类型值的列表。
2.  循环遍历唯一房间类型值的列表
3.  对于每个唯一的房间类型值，用于`NSPredicate`从原始列表中检索匹配的项目

我们的代码如下（为清楚起见重命名）：

```
NSArray *arrOriginal = ... ...; // Contains the Parsed XML list

NSMutableArray *marrApartmentsByRoomType = [NSMutableArray arrayWithCapacity:10];

NSMutableArray *arrRoomTypes = [arrOriginal valueForKeyPath:@"distinctUnionOfObjects.roomType"];

for(NSString *strRoomType in arrRoomTypes) {
  NSPredicate *predicateRoomType = [NSPredicate predicateWithFormat:@"roomType=%@", strRoomType];

  NSArray *arrApartmentsThatMatchRoomType = [arrOriginal filteredArrayUsingPredicate:predicateRoomType];  // TAKES A LONG TIME EACH LOOP-ROUND

  [marrApartmentsByRoomType addObject:arrApartmentsThatMatchRoomType];
} 
```

但是，第 3 步需要很长时间，因为原始列表可能包含大量（>100,000）项。似乎`NSPredicate`遍历每个键值的整个列表。有没有一种更有效的方法可以根据键将大的拆分`NSArray`成较小的 s ？`NSArray``NSDictionary`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:25:12.687

如果拆分数组的顺序不重要，我有一个解决方案：

```
NSArray *arrOriginal;
NSMutableDictionary *grouped = [[NSMutableDictionary alloc] initWithCapacity:arrOriginal.count];
for (NSDictionary *dict in arrOriginal) {
    id key = [dict valueForKey:@"roomType"];

    NSMutableArray *tmp = [grouped objectForKey:key];
    if (tmp == nil) {
        tmp = [[NSMutableArray alloc] init];
        [grouped setObject:tmp forKey:key];
    }
    [tmp addObject:dict];
}
NSMutableArray *marrApartmentsByRoomType = [grouped allValues]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T13:32:47.950

这是相当高效的

```
- (NSDictionary *)groupObjectsInArray:(NSArray *)array byKey:(id <NSCopying> (^)(id item))keyForItemBlock
{
    NSMutableDictionary *groupedItems = [NSMutableDictionary new];
    for (id item in array) {
        id <NSCopying> key = keyForItemBlock(item);
        NSParameterAssert(key);

        NSMutableArray *arrayForKey = groupedItems[key];
        if (arrayForKey == nil) {
            arrayForKey = [NSMutableArray new];
            groupedItems[key] = arrayForKey;
        }
        [arrayForKey addObject:item];
    }
    return groupedItems;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T04:43:41.650

改进@Jonathan 答案

1.  将数组转换为字典
2.  保持与原始数组相同的顺序

    ```
    //only to a take unique keys. (key order should be maintained)
    NSMutableArray *aMutableArray = [[NSMutableArray alloc]init];

    NSMutableDictionary *dictFromArray = [NSMutableDictionary dictionary];

    for (NSDictionary *eachDict in arrOriginal) {
    //Collecting all unique key in order of initial array
    NSString *eachKey = [eachDict objectForKey:@"roomType"];
    if (![aMutableArray containsObject:eachKey]) {
        [aMutableArray addObject:eachKey];
    }

    NSMutableArray *tmp = [grouped objectForKey:key];
    tmp  = [dictFromArray objectForKey:eachKey];

    if (!tmp) {
        tmp = [NSMutableArray array];
        [dictFromArray setObject:tmp forKey:eachKey];
    }
    [tmp addObject:eachDict];

    }

    //NSLog(@"dictFromArray %@",dictFromArray);
    //NSLog(@"Unique Keys :: %@",aMutableArray); 
    ```

    //**再次从字典转换为数组**...

    ```
    self.finalArray = [[NSMutableArray alloc]init];
    for (NSString *uniqueKey in aMutableArray) {
       NSDictionary *aUniqueKeyDict = @{@"groupKey":uniqueKey,@"featureValues":[dictFromArray objectForKey:uniqueKey]};
    [self.finalArray addObject:aUniqueKeyDict];
    } 
    ```

希望，当客户希望最终数组与输入数组的顺序相同时，它会有所帮助。

# python - Python 中缺少日志记录输出

> ID：14335472
> 
> 赞同：1
> 
> 时间：2013-01-15T10:16:35.677
> 
> 标签：python, logging

我对 Python 日志记录有疑问，我不确定问题是什么，因为昨天使用的同一行代码可以正常工作。

因此，例如，以下代码仅生成打印功能的输出，但不生成日志记录。

有任何想法吗？

```
import logging

if __name__ == '__main__':
    logging.basicConfig(level = logging.DEBUG)
    logging.info("Hello, World!")
    print "Hello, World!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:32:43.977

你可以试试这个替代方案：

```
>>> import logging
>>> logging.getLogger().setLevel(logging.INFO)
>>> logging.info("Hello, World!")
INFO:root:Hello, World! 
```

在这里，您将信息级别设置为根记录器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:20:24.463

为我工作：

```
>>> import logging
>>> logging.basicConfig(level = logging.DEBUG)
>>> logging.info("Hello, World!")
INFO:root:Hello, World! 
```

您的代码也可以在文件中使用：

```
INFO:root:Hello, World!
Hello, World! 
```

# c# - ASP.Net 中的 NullReferenceException 错误

> ID：14335473
> 
> 赞同：0
> 
> 时间：2013-01-15T10:16:36.613
> 
> 标签：c#, asp.net, class, oop, nullreferenceexception

在下面的代码中，我在使用方法时遇到`Null Reference Exception`错误。`"Names.Add(string)"`但是当我使用静态类或类的静态对象时，`NamedDB`它可以正常工作。任何人都可以解释对象实例在 ASP.Net Web 应用程序中是如何工作的吗？为什么我在静态对象工作正常时在非静态对象中出现错误？

```
public partial class _Default : System.Web.UI.Page
{

   NameDB Names; //Creating Object

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            Names = new NameDB();//Instantiation
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {

        Names.Add("dss");//Object Reference is null

        GridView1.DataSource = Names.GetName();
        GridView1.DataBind();
    }
}

    //NamedDB class

    public class NameDB
    {
        List<string> Names=new List<string>();

        public void Add(string item)
        {
            Names.Add(item);
        }

        public string Remove(string item)
        {

            Names.Remove(item);
            return item;
        }

        public List<string> GetName()
        {

            return Names;
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:18:03.283

您没有在回发之前实例化的全局对象实例。再次实例化对象`Button1_Click`

现在您会期望该集合在回发之间保存数据，但直到您将其存储在某个位置（如`database`、`files`、或用于数据`session`）之前您不会得到它。Session 和 ViewState 并不意味着存储这种类型的数据。`viewstate``cache`

```
protected void Button1_Click(object sender, EventArgs e)
{
    Names = new NameDB();//Instantiation
    Names.Add("dss");//Object Reference is null
    GridView1.DataSource = Names.GetName();
    GridView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:19:07.413

替换这个：

```
NameDB Names; //Creating Object 
```

这样

```
NameDB Names = new NameDB(); //Creating Object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:22:11.153

您可以执行以下任何操作

```
public partial class _Default : System.Web.UI.Page
{
   NameDB Names= new NameDB();//Creating Object
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
        }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {

        Names.Add("dss");

        GridView1.DataSource = Names.GetName();
        GridView1.DataBind();
    }
} 
```

或者

```
public partial class _Default : System.Web.UI.Page
{
   NameDB Names;//Creating Object
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
        }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        Names = new NameDB();//Instantiation
        Names.Add("dss");

        GridView1.DataSource = Names.GetName();
        GridView1.DataBind();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:35:44.800

问题是为每个请求重新创建页面对象。因此，每次调用都会重新初始化页面级字段。回发只是另一个请求！

如果要在请求之间保留值，则需要找到某种方法来存储这些值。一些选项是：

*   在真实的数据库中，需要一些工作，但您可以完全控制和完全持久化
*   在[Cache](http://msdn.microsoft.com/en-us/library/system.web.ui.page.cache.aspx)或[Application](http://msdn.microsoft.com/en-us/library/system.web.ui.page.application.aspx)中，用于应用程序范围的存储，其中每个访问者都获得相同的值，但在应用程序回收时这些值会丢失。
*   在[Session](http://msdn.microsoft.com/en-us/library/system.web.ui.page.session.aspx)中，用于用户特定的存储，只要会话没有超时（并且应用程序不会回收）
*   在[ViewState](http://msdn.microsoft.com/en-us/library/system.web.ui.control.viewstate.aspx)中，对于“回发特定”存储：这将通过回发到同一页面（特定于用户）来保留值，但当用户转到另一个页面时会丢失。

# sql - 运行测试时，Eclipselink 仅在 PARTITION 上给出 syntaxError

> ID：14335474
> 
> 赞同：0
> 
> 时间：2013-01-15T10:16:38.343
> 
> 标签：sql, oracle, jpa, junit, eclipselink

我在正常运行我的代码时工作正常的本机 SQL 查询遇到问题，但给了我：

```
[EL Warning]: 2013-01-15 10:24:04.462--UnitOfWork(2230747)--
Exception [EclipseLink-4002] (Eclipse Persistence Services - 
2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException

Internal Exception: java.sql.SQLSyntaxErrorException: Syntax error: Encountered
"PARTITION" at line 1, column 109.

Error Code: 30000
Call: SELECT COUNT(*) FROM (SELECT p.PRICE_ID, p.PRODUCT_ID, p.PRICE, 
p.TEXT, row_number() OVER (PARTITION BY p.PRODUCT_ID ORDER BY p.PRICE_DT DESC) rn, 
p.PRICE_DT FROM PRICE_T p LEFT JOIN STORE_T b ON p.STORE_ID = 
b.STORE_ID WHERE (p.CHAIN_ID = ? AND p.PRICE_TYPE = 'NORMAL') OR
(p.PRICE_TYPE = 'SOMETHINGELSE' AND b.OTHERSTORE_ID IN (1,2)) ) WHERE rn = 1
bind => [1 parameter bound]

Query: DataReadQuery(sql="SELECT COUNT(*) FROM (SELECT p.PRICE_ID, p.PRODUCT_ID, p.PRICE, 
p.TEXT, row_number() OVER (PARTITION BY p.PRODUCT_ID ORDER BY p.PRICE_DT DESC) rn, 
p.PRICE_DT FROM PRICE_T p LEFT JOIN STORE_T b ON p.STORE_ID = 
b.STORE_ID WHERE (p.CHAIN_ID = ? AND p.PRICE_TYPE = 'NORMAL') OR
(p.PRICE_TYPE = 'SOMETHINGELSE' AND b.OTHERSTORE_ID IN (1,2)) ) WHERE rn = 1") 
```

正常运行我的代码时，完全相同的查询完全没有给我带来麻烦。这是我的persistence.xmls：

persistence.xml（测试）

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="test-pu" transaction-type="RESOURCE_LOCAL">
            <!-- all entit-classes are here -->
    <exclude-unlisted-classes>false</exclude-unlisted-classes>  
    <properties>
        <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
        <property name="javax.persistence.jdbc.url" value="jdbc:derby:memory:test;create=true" />
        <property name="javax.persistence.jdbc.user" value="test" />
        <property name="javax.persistence.jdbc.password" value="test" />

         <!--  EclipseLink should create the database schema automatically --> 
        <property name="eclipselink.ddl-generation" value="create-tables" />
        <property name="eclipselink.ddl-generation.output-mode" value="database" />
        <property name="eclipselink.target-database" value="Derby"/>
    </properties>
</persistence-unit> 
```

persistence.xml（正常）

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="pu" transaction-type="JTA">
    <jta-data-source>mydatasource</jta-data-source>
            <!-- all entit-classes are here --> 
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
        <property name="eclipselink.query-results-cache" value="false"/>
        <!--
        <property name="eclipselink.logging.level" value="FINE"/>
        <property name="eclipselink.logging.parameters" value="true"/>
        <property name="eclipselink.logging.logger" value="DefaultLogger"/>
        -->
    </properties>
</persistence-unit> 
```

PriceRepositoryTest.java - testGetAmountOfPricesForChain1()

```
@Test
public void testGetAmountOfPricesForChain1() {
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("test-pu");
    EntityManager em = emf.createEntityManager();
    try {
        PriceRepository repository = new PriceRepositoryImpl(em);
        long amount = repository.getAmount(STORES_IN_CHAIN_1);
        assertEquals(PRICES_CHAIN_1.size(), amount);
    } finally {
        em.close();
    }
} 
```

我试过用谷歌搜索这个，但我没有找到任何东西。关于什么可能是错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:51:26.690

您正在连接到 Derby，而不是 Oracle 数据库。Derby 很可能不支持这种语法。

# python - 如何编写正则表达式以获取一个特定的函数参数

> ID：14335483
> 
> 赞同：0
> 
> 时间：2013-01-15T10:17:02.277
> 
> 标签：python, regex

我正在尝试编写一个 python 脚本来收集一个特定函数的参数。参数可以像这样在多行中：

```
str = "getParameters(['ABCD_1','ABCD_2',\
                       'ABCD_3','ABCD_4'])\ 
```

这已经有效：（它可以捕获'和'之间的每个单词）：

```
parameters = re.findall(r'\'[\w-]+\'', str)
for parameter in parameters:
   print parameter 
```

但我只希望在 getParameters 函数的情况下收集要收集的参数，这不起作用：

```
getparameters = re.findall(r'getParameters\(\[[\w-]+', str, re.X|re.DOTALL)
for line in getparameters:
    print line 
```

请建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:41:43.577

这是一个使用 ast 的示例，只是为了好玩。

```
import ast

module = ast.parse(
    """getParameters(['ABCD_1','ABCD_2',
                      'ABCD_3','ABCD_4'])""")

for item in module.body:
    if isinstance(item.value, ast.Call) and item.value.func.id == 'getParameters':
        parameters = [each.s for each in item.value.args[0].elts]

print parameters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:59:27.050

如果您固定使用 RegEx 并且您的函数只发生一次，您可以尝试：

```
re.findall('\'(\w+)\',?', re.search('(getParameters\(.+?\))', x, re.X|re.S).group(1), re.X|re.S) 
```

这并不理想，但它有效。我确信有更好的方法来做到这一点。

# c++ - 如何处理clang中的“退出时间析构函数”警告？

> ID：14335494
> 
> 赞同：50
> 
> 时间：2013-01-15T10:17:39.773
> 
> 标签：c++, c++11, warnings, clang, destructor

在我的 C++11 代码中，我在以下情况下收到 clang 警告“声明需要退出时析构函数”：

```
static const std::map<int, const someStruct> mymap = {
    {1, {
        "A",
        "B",
        "C"
    }},
    {2, {
        "D",
        "E",
        "F"
    }}
}; 
```

据我了解，谷歌需要一个“退出时间析构函数”来以一种确定的方式销毁 main() 和静态变量，以防止由于“已经发布的变量”而导致退出时崩溃。是对的吗？有人可以更好地解释吗？

另外：我该怎么办（我不想禁用警告）？上面的代码仅在一个线程的上下文中使用。

看起来这就是 Chromium 处理这些情况的方式；这也是我的情况的正确方法吗？

```
#define CR_DEFINE_STATIC_LOCAL(type, name, arguments) \
  static type& name = *new type arguments 
```

（来源：[https](https://chromium.googlesource.com/chromium/src/+/32352ad08ee673a4d43e8593ce988b224f6482d3/base/basictypes.h) ://chromium.googlesource.com/chromium/src/+/32352ad08ee673a4d43e8593ce988b224f6482d3/base/basictypes.h ）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-15T10:27:27.680

全局和函数静态对象将在您的应用程序退出时调用它们的析构函数。这些析构函数是“退出时间析构函数”。并以与它们构建时相反的顺序被调用。

正如您所说，如果其中一些析构函数接触到已经销毁的对象，您的程序可能会崩溃。此外，在退出时运行的析构函数会使程序退出速度变慢，并且大多数情况下它们对于程序的正确性不是必需的（因为当程序退出时，它无论如何都会释放其所有内存）。

警告只是指出您有将在退出时运行的析构函数。

您提出的修复将堆分配对象，这不会导致它在程序退出时自动销毁。对于您的情况，这可能已经足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-10T13:34:07.683

请参阅属性 no_destroy/always_destroy [https://clang.llvm.org/docs/AttributeReference.html](https://clang.llvm.org/docs/AttributeReference.html)

# android - 火狐安卓源代码

> ID：14335496
> 
> 赞同：17
> 
> 时间：2013-01-15T10:17:44.927
> 
> 标签：android, firefox

我最近看到了[Firefox for Android](http://www.mozilla.org/en-US/firefox/mobile/features/)的发布。Firefox 似乎有几个很棒的功能和性能改进。我想知道Android平台的源代码是否已经发布，如果发布了，我在哪里可以获得最新的源代码？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-15T10:24:48.540

它托管在此处的 mercurial 存储库中：

*   [http://hg.mozilla.org/mozilla-central/](http://hg.mozilla.org/mozilla-central/)
*   [https://github.com/mozilla/gecko-dev](https://github.com/mozilla/gecko-dev) (Git 镜像)

点击此处的 wiki 页面以获取有关构建和使用的说明：

*   [https://firefox-source-docs.mozilla.org/mobile/android/geckoview/contributor/geckoview-quick-start.html](https://firefox-source-docs.mozilla.org/mobile/android/geckoview/contributor/geckoview-quick-start.html)
*   [https://developer.mozilla.org/en-US/docs/Mozilla/Git](https://developer.mozilla.org/en-US/docs/Mozilla/Git)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T21:26:05.250

源代码存档的链接。它有桌面和移动 Firefox 的资源。

链接： http: [//ftp.mozilla.org/pub/firefox/releases/35.0/source/firefox-35.0.source.tar.bz2](http://ftp.mozilla.org/pub/firefox/releases/35.0/source/firefox-35.0.source.tar.bz2)

解包 => 手机/安卓

# jsf - 通过 SSO 登录 JSF/IceFaces3 应用程序

> ID：14335498
> 
> 赞同：1
> 
> 时间：2013-01-15T10:17:49.513
> 
> 标签：jsf, servlets, icefaces

我有一个 JSF/IceFaces3 应用程序正在运行。通过 SSO 登录后，此应用程序应在 Intranet 环境中运行。老板让我给他提供一个他可以调用的链接，例如：

http://companieserver/FancyApplcation/indexsso?name=[用户名]&psw=[用户密码]

作为一个新手，我创建了一个 servlet 并在 web.xml 中提到了它

```
<servlet>
    <description>SSO Login calling with given Parameters Managed
 AuthenticationService</description>
    <display-name>SsoLogin</display-name>
    <servlet-name>SsoLogin</servlet-name>
    <servlet-class>de.bws.bewerberverwaltung.security.SsoLogin</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>SsoLogin</servlet-name>
    <url-pattern>/indexsso</url-pattern>
  </servlet-mapping>
.... 
```

我想从这个 SsoLogin Servlet 重定向到 JSF/IceFaces3 应用程序。这是我的方法：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    FacesContext facesContext = getFacesContext(request, response);
    LoginBean loginBean = (LoginBean)getManagedBean("loginBean", facesContext);

    String login = request.getParameter("name");
    String psw = request.getParameter("psw");

    loginBean.setLogin(login);
    loginBean.setPassword(psw);

    String value = loginBean.login();

    System.out.println("SsoLogin result: " + value);
    request.getRequestDispatcher(value).forward(request, response);
} 
```

来自 loginBean 的值是我项目中的 customeroverview.xhtml 文件。

行为是服务器向我显示了一个白页。当我查看页面的源代码时，它看起来应该是。我还尝试发送具有相同结果的重定向。

也许这不是从 servlet 直接跳转到 JSF 应用程序的最佳方式，但显然它有效。

有什么提示可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:20:03.150

JSF 页面应该由`FacesServlet`. 为了让它运行，请求 URL 必须`<url-pattern>`与`FacesServlet`. 否则，JSF 组件将不会生成 HTML，并且您最终会得到一个包含一堆 JSF 标记而不是 HTML 元素的浏览器无法理解的响应。

您不想在登录后执行转发，而是执行重定向。所以你绝对应该使用`sendRedirect()`而不是`forward()`. 无论您传递给什么 URL `sendRedirect()`，它都必须`<url-pattern>`与`FacesServlet`. 如果是例如`*.jsf`，那么它最终应该是这样的：

```
response.sendRedirect(request.getContextPath() + "/home.jsf"); 
```

# java - 在 MOA 中添加分类器的过程 什么是通过添加 jar 或 java 文件重新编译它？

> ID：14335499
> 
> 赞同：0
> 
> 时间：2013-01-15T10:17:50.600
> 
> 标签：java, command-line, weka, data-mining, moa

我正在尝试仅使用 cmd 行添加 .java 文件，方法是使用 javac 编译，然后使用命令行 MOA（大规模在线分析）执行。但它在线程主 java.lang.noclassdeffounferror:moa/gui/GUI 中将错误显示为异常，所以我基本上需要有人向我展示如何添加分类器，你们是如何做到的，仅一步一步的过程，我不明白添加代码，因为我只想要过程而不是代码。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:30:48.213

如果您有 WEKA 的 JAR 文件，您可以从代码中调用分类器，包括类路径中的 JAR 文件。

这是一个例子：[http ://blog.irodata.com/2011/02/embedding-weka-in-java-application.html](http://blog.irodata.com/2011/02/embedding-weka-in-java-application.html)

# java - Java 匹配器。从一个序列中返回多个条目

> ID：14335500
> 
> 赞同：4
> 
> 时间：2013-01-15T10:17:53.740
> 
> 标签：java, regex

例如，我有以下正则表达式：`\d{2}`（2 位数字）。当我使用

```
 Matcher matcher = Pattern.compile("\\d{2}").matcher("123");
  matcher.find();
  String result = matcher.group(); 
```

在结果变量中，我只得到第一个条目，即`12`. 但我想获得所有可能的条目，即`12`和`23`.

如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T10:21:00.360

您需要在积极的前瞻中获得捕获组的帮助：

```
Matcher m = Pattern.compile("(?=(\\d{2}))").matcher("1234");
while (m.find()) System.out.println(m.group(1)); 
```

印刷

```
12
23
34 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:29:22.817

这不是正则表达式匹配的工作方式。匹配器从字符串的开头开始，每次找到匹配时，它都会从匹配*结束*后的字符继续查找 - 它不会给你重叠匹配。

如果您想查找任意正则表达式的重叠匹配而不需要使用前瞻和捕获组，您可以通过在每次匹配后重置匹配器的“区域”来做到这一点

```
Matcher matcher = Pattern.compile(theRegex).matcher(str);

// prevent ^ and $ from matching the beginning/end of the region when this is
// smaller than the whole string
matcher.useAnchoringBounds(false);
// allow lookaheads/behinds to look outside the current region
matcher.useTransparentBounds(true);

while(matcher.find()) {
  System.out.println(matcher.group());
  if(matcher.start() < str.length()) {
    // start looking again from the character after the _start_ of the previous
    // match, instead of the character following the _end_ of the match
    matcher.region(matcher.start() + 1, str.length());
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:23:26.413

像这样的东西

```
^(?=[1-3]{2}$)(?!.*(.).*\1).*$ 
```

[在这里](http://www.rubular.com/r/ClZkpeGiQs)测试和实验

# javascript - 显示带有动画的隐藏 div

> ID：14335501
> 
> 赞同：13
> 
> 时间：2013-01-15T10:17:54.607
> 
> 标签：javascript, animation, html, show-hide

我制作了这个脚本，它用正确的类打开一个 div 并关闭其他类。

```
function showhide(id) {
    if (document.getElementById) {
        var divid = document.getElementById(id);
        var divs = document.getElementsByClassName("hideable");
        for (var i = 0; i < divs.length; i = i + 1) {
            divs[i].style.display = "none";
        }
        divid.style.display = "block";
    }
    return false;
} 
```

是否可以制作一些动画，如淡出、缓出，而不是仅通过显示选项显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T10:34:15.857

你可以试试这个

```
function showhide(id) {
  if (document.getElementById) {
    var divid = document.getElementById(id);
    var divs = document.getElementsByClassName("hideable");
    for (var i = 0; i < divs.length; i = i + 1) {
      $(divs[i]).fadeOut("slow");
    }
    $(divid).fadeIn("slow");
  }
  return false;
} 
```

看看这个小提琴“ [http://jsfiddle.net/9jtd3/](http://jsfiddle.net/9jtd3/) ”

Jquery 库提供了更多技术，您也应该看看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-07T07:54:33.770

你可以使用`slideDown() and slidUp()`jQuery

```
$( document.body ).click(function () {
  if ( $( "div:first" ).is( ":hidden" ) ) {
    $( "div" ).slideDown( "slow" );
  } else {
    $( "div" ).slideUp("slow");
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-05T23:25:38.717

此示例将切换具有相同类名的多个元素。这个例子不需要jquery。

## HTML：

```
<button onclick="fadeInAndOut(this)" style="width:100%">Toggle 1</button>
<div class="accordianPanel acordianPanelHidden accordianPanelStyle">Panel 1</div>

<button onclick="fadeInAndOut(this)" style="width:100%">Toggle 2</button>
<div class="accordianPanel acordianPanelHidden accordianPanelStyle">Panel 2</div> 
```

## Javascript：

```
function fadeInAndOut(thz) {
  var elmt = thz.nextElementSibling;//Get the element that is below the button that
     //was just clicked

  elmt.classList.toggle("acordianPanelHidden");//Toggle the class which changes
    //attributes which triggers the `transition` CSS
} 
```

## CSS

```
.accordianPanel {
  opacity: 1;
  height:100%;
  transition: all 1s;
}

.accordianPanel.acordianPanelHidden {
  opacity: 0;
  height: 0px;
  visibility:hidden;/* This must be used or some strange things happen - 
   What happens is that even though the content of the panel is not shown 
   any buttons in the content can still be clicked -
   So basically there are invisible buttons that can accidently get clicked -
   if the visibility is not set to hidden - And the visibility doesn't need to be explicitly changed to visible
  from hidden in order to show the content
  because if visibility:hidden is not used then by default the content is 
  displayed -
 */
}

.acordianPanelShown {
  height: 100%;
  width: 100%;
  opacity: 1;
}

.accordianPanelStyle {
  background:red;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T10:46:29.890

If You are using Jquery then another way to do this is

```
 function showhide(id) {
      $(".hideable").fadeOut("slow");
      $("#" + id).fadeIn("slow");
    } 
```

Assuming "hideable" as className in your group of divs

Good luck.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T10:32:30.577

[这](http://www.switchonthecode.com/tutorials/javascript-tutorial-simple-fade-animation) 肯定会解决你的问题。

如果您在脚本中包含 jQuery 库，则可以直接使用 .fadeOut()。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-25T19:16:59.167

仅使用 CSS 就更容易了。

你上课

```
div {
 display:block;
 transition: all .2s ease-out;
}

.hidden {
 display:none;
} 
```

使用 javascript，您可以根据需要应用或删除隐藏的类。jQuery 动画库远非好用。它很笨重，并且为您的用户消耗资源。CSS 可与您的 GPU 一起使用，从而实现更流畅的动画。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-15T10:20:13.830

您可以使用[jQuery](http://jquery.com/)之类的库来做到这一点。

你肯定可以使用纯 javascript 来实现它，但这样做没有意义，因为 jQuery 是一个了不起的库。

[查看显示](http://api.jquery.com/show/)和[隐藏](http://api.jquery.com/hide/)的一些示例

# jquery - 使用 jquery 查找动态加载但附加 DOM 的图像的尺寸？

> ID：14335503
> 
> 赞同：3
> 
> 时间：2013-01-15T10:17:59.030
> 
> 标签：jquery, css, ajax, image, dimensions

我正在使用 ajax 动态加载图像的源，`s`这个源在哪里。我在 DOM 中创建了一个图像元素，在加载后为其分配此源，然后将其附加到一个`div`被调用的`imgwrapper`. 然后我尝试获取图像的尺寸，但它不起作用。我知道您无法获得动态加载的图像的尺寸，但即使在附加到 DOM 之后也无法获得？

我的代码如下：

```
//use ajax to get value of s (the image source)
img = document.createElement("img"); 
img.src = s; 
$('#imgwrapper').appendChild(img); 
console.log($('#imgwrapper').find('img').width()); 
```

这返回 0，而不是给我图像的宽度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:21:31.057

等到图片加载完毕

```
//use ajax to get value of s (the image source)
img = document.createElement("img"); 
img.onload = function() {
    console.log($('#imgwrapper').find('img').width());
};
img.src = s; 

$('#imgwrapper').append(img); 
```

**编辑**
正如@MattiasBuelens 提到的。没有`.appendChild()`jQuery 对象。那应该`.append()`是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:23:54.550

你可以试试这个：

```
img = document.createElement("img"); 
img.src = "http://placehold.it/350x150"; 
$('#imgwrapper').append(img); 
console.log($('#imgwrapper').find('img').width()); 
```

工作示例：http: [//jsbin.com/adajuh/1/](http://jsbin.com/adajuh/1/)

# c++ - 如何在无限循环中运行线程

> ID：14335504
> 
> 赞同：4
> 
> 时间：2013-01-15T10:18:00.097
> 
> 标签：c++, mfc

在我的一个项目中，我需要同时运行两个操作（打开和关闭操作）（即并行/同时）。我为各自的操作创建了两个线程，如下所示：

```
UINT MyThread1(LPVOID lParam)
{
 // code for Open Operation..
 // other stuffs...

 return(1);
}

UINT MyThread2(LPVOID lParam)
{
 //Code for Close Operation..
 //Other Stuffs..

return(1);
}

void CMyProject : OnbnClickedOpen()
{
   // Here am running OPen Operation Continously..
 while(1) {
 AfxBeginThread(MyThread1,0);
 }
 }

void CMyProject : onbnClickedClose()
{
  //Here am running Close Operation continously...
  while(1) {
  AfxBeginThread(MyThread2,0);
 }
} 
```

这里无法连续运行线程。我试过这样的替代方法：

```
void CMyProject : OnbnClickedOpen()
{
   while( 1 )
   {
     //Code for Open Operation..
   }
 }

void CMyProject : onbnClickedClose()
{
  while(1)
  {
    //Code for Close Operation..
  }
} 
```

有了这个，我可以连续运行打开操作或连续关闭操作，但不能同时运行两者。

请建议/指导我如何做到这一点..

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:21:44.873

将`while`循环移动到线程函数中：

```
UINT MyThread1(LPVOID lParam)
{
 // Here am running OPen Operation Continously..
 while(1) {
   // code for Open Operation..
   // other stuffs...
 }

 return(1);
}

UINT MyThread2(LPVOID lParam)
{
  //Here am running Close Operation continously...
  while(1) {
   //Code for Close Operation..
   //Other Stuffs..
  }

return(1);
}

void CMyProject : OnbnClickedOpen()
{
 AfxBeginThread(MyThread1,0);
}

void CMyProject : onbnClickedClose()
{
  AfxBeginThread(MyThread2,0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:21:49.100

问题是您`while(1)`在主线程本身中调用无限循环，而不是在这些单独的线程中。所以一旦你在主线程上进入这个无限，它将继续运行它而不执行任何其他代码。

您应该将无限循环移动到它们各自的线程中，将整个代码包装在 while 循环中将允许它无限运行，但与主线程分开。因此主线程的执行永远不会被阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:29:49.520

:*D，你错过了，一个无限循环可能会占用你的处理器并消耗你的计算机资源（RAM/mem/..）。后台工作人员是为某些特定的耗时任务而设计的，其工作就像一个无限循环。因为它一直在继续它的工作，您计算机的例如 PnP 设备可能无法在您的计算机中获得它们的位置；它们被击倒，您的计算机有时会自行冻结，直到正在运行的任务完成其工作。因此，后台线程必须包含 while 循环，而不是包含后台工作程序的 while 循环。

# android - Android Onclicking textView 的editText 没有小键盘。如何在单击textView 时获得小键盘？

> ID：14335511
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:18:17.423
> 
> 标签：android

我有一个文本视图。单击文本视图时，编辑文本会出现焦点。但是要获得小键盘，需要再次单击。

我希望当我单击 TextView 时，编辑文本应该与数字键盘一起出现，而无需再次单击 editText。不是通过 xml。但手动在 xml 中我已经将它作为 android:inputType="number" （文本视图在点击时不可见）

点击方法----case R.id.txtPhoneNo:

```
 hintPhoneNum.setVisibility(View.VISIBLE);
        phoneNum.setVisibility(View.GONE);
        edtPhoneNum.setVisibility(View.VISIBLE);
        edtPhoneNum.requestFocus();
        edtPhoneNum.setText(""); 
```

当editText获得焦点时如何强制获取小键盘？

正确答案是 InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); imm.toggleSoftInput(0, InputMethodManager.SHOW_IMPLICIT);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:23:02.540

为您的 EditText 添加以下 XML：

```
 android:inputType="number" 
```

**编辑**

尝试在您的 textView 设置为不可见后立即请求焦点：

```
yourTextView.setVisibility(View.INVISIBLE); //or View.GONE
yourEditText.requestFocus(); 
```

这应该立即显示键盘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:08:58.733

何时`TextView`显示或`touched`首先获取`focus`，当您`click`再次执行它时，它会执行`onClick()`，因此您必须处理 TextView 的焦点以实现您想要的。

# android - Android：使用数据库中的值设置微调器-但基本数组在字符串中

> ID：14335517
> 
> 赞同：0
> 
> 时间：2013-01-15T10:18:51.707
> 
> 标签：android

我对微调器的预设值来自字符串数组。

```
<string-array name="currencyArray">
    <item>INR</item>
    <item>USD</item>
    <item>EUR</item>
</string-array> 
```

我能够显示这个并保存它。我在“添加”的 SQLite DB 中添加一些值。更新时，我想获取值并显示在屏幕上。其中之一是微调器。

我试过这段代码

```
String myString = getIntent().getStringExtra("Currency");
System.out.println(myString);
ArrayAdapter myAdap = (ArrayAdapter) currencySpin.getAdapter();
int spinnerPosition = myAdap.getPosition(myString);
//set the default according to value
currencySpin.setSelection(spinnerPosition); 
```

sysout（第 2 行）实际上显示了来自数据库的正确值。但是微调器仍然显示初始值而不是 DB 值。我在这里想念什么？

我正在使用此代码在空屏幕中填充和读取微调器

```
// reading the spinner
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
    this,
    R.array.currencyArray, 
    android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
currencySpin.setAdapter(adapter);

currencySpin.setOnItemSelectedListener(this); 
```

更新代码

```
 String myString = getIntent().getStringExtra("Currency");
        System.out.println(myString);

        ArrayAdapter<CharSequence> adapter = ArrayAdapter
        .createFromResource(this, R.array.currencyArray,
                android.R.layout.simple_spinner_item);

        spinnerPosition = adapter.getPosition(myString);
        System.out.println(spinnerPosition);

        //set the default according to value
        currencySpin.setSelection(spinnerPosition); 
```

spinnerPosition 以正确的数字出现（根据我的数据从 0 变为 2），但 currencySpin （我的微调器）无法正确显示。我错过了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:03:29.777

我能够使用这个更新的代码来解决它。这适用于正在寻找此解决方案的其他任何人

```
 // reading the spinner
            ArrayAdapter<CharSequence> adapter = ArrayAdapter
                    .createFromResource(this, R.array.currencyArray,
                            android.R.layout.simple_spinner_item);
            adapter
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            currencySpin.setAdapter(adapter);

            currencySpin.setOnItemSelectedListener(this);

            spinnerPosition = 0;
            String myString = getIntent().getStringExtra("Currency");
            spinnerPosition = adapter.getPosition(myString);
            currencySpin.setSelection(spinnerPosition); 
```

# c# - 通过使用asp.net c#在数据库中输入值来生成UML模型

> ID：14335521
> 
> 赞同：0
> 
> 时间：2013-01-15T10:19:05.033
> 
> 标签：c#, asp.net, mysql, model, uml

我需要通过将所有数据存储在数据库中来生成一个 UML 活动模型，例如登录页面。我想存储形状的 x 和 y 轴及其后继和前任。我尝试了很多方法，但都没有得到满意的解决方案。任何人都可以为我提供有用的链接或工具，我可以使用它们开始构建应用程序。

# c# - 是否有涵盖变量范围的代码指标

> ID：14335523
> 
> 赞同：8
> 
> 时间：2013-01-15T10:19:08.613
> 
> 标签：c#, java, c++, static-analysis, metrics

在尝试了解某些​​遗留 C++ 和 C# 代码的维护难度以及向其中引入错误的风险时，有人建议衡量变量的范围有多广或有多窄会很有用。该代码使用了许多全局变量或范围广泛的变量，而本地变量会更好。一个常见的情况是发现这些变量用于 2 或 3 行代码，在它们被声明的几个范围级别。

我知道静态代码分析工具通常会尝试量化耦合和内聚，但有没有更具体的测量变量/数据范围的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:24:09.930

是的，这是静态分析的标准技术。这被称为变量活跃度分析。在[本书](https://rads.stackoverflow.com/amzn/click/com/3642084745)中，介绍的例子就是在做这样的分析。

来自[维基百科](http://en.wikipedia.org/wiki/Live_variable_analysis)关于它的文章：

> 在编译器理论中，实时变量分析（或简称为活性分析）是编译器执行的经典数据流分析，用于为每个程序点计算在下次写入之前可能潜在读取的变量，即在从每个程序点退出。
> 
> 简单地说：如果一个变量拥有一个未来可能需要的值，那么它就是活的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:25:30.693

我将专注于 OO 语言（Java、C#、C++）中的局部变量。我可以想到一些关于局部变量范围的措施。

**局部变量范围大小**
是局部变量可访问的语句数。这不应该太大，因为这表明方法太长。然而，方法语句计数可能是对此更充分的衡量标准。

**可访问局部变量计数**
是方法的每个语句的可访问局部变量的数量。这不应大于 3，因为它使选择在表达式中使用哪个局部变量变得更加困难。

**局部变量使用密度**
是访问局部变量的语句与可访问局部变量的语句的百分比。低值表明该方法不太连贯。

**局部变量的连贯修改计数**
是同一块内局部变量的修改次数。这表明多个局部变量属于一起。因此，它们应该形成自己的对象，从而增加连贯性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T17:10:11.257

您可以尝试[CppDepend](http://www.cppdepend.com)和它的 CQLinq 代码查询语言来检测仅由一种方法或一个类使用的一些全局变量。

```
from f in Fields where f.IsGlobal && f.MethodsUsingMe.Count()==1 select f 
```

# sandcastle - 在 SHFB 生成的 .chm 中包含 PDF 文件（Html 帮助文件 1）

> ID：14335525
> 
> 赞同：1
> 
> 时间：2013-01-15T10:19:20.143
> 
> 标签：sandcastle, helpfile, shfb

我需要在我的沙堡文档中包含一个 pdf 文件。用户应该能够通过在 .chm 文件中单击它来导航到 pdf。是否有可能做到这一点？我一直在搜索所有论坛都没有正确的答案。我尝试在 xml 注释中使用 href 标记并提供 pdf 文件的 url。但它会打开浏览器而不是 pdf 文件。有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:23:53.833

我有一个下载链接给你：
[http ://www.help-info.de/files_download/CHM-example_project.zip](http://www.help-info.de/files_download/CHM-example_project.zip)

这来自我的“HTMLhelp - 下载”部分（参见下面的链接），您将找到一个完整的 HH Workshop 项目，当然还有生成的 CHM 文件。
www.help-info.de/en/Help_Info_HTMLHelp/hh.htm

(1) 所以，请下载并保存到您的本地驱动器。
(2) 请解压，您会找到一个 CHM-example.chm 文件。
(3) 要打开此文件，请右键单击该文件，单击属性，然后单击取消阻止和确定
(4) 双击该文件并根据需要调整帮助窗口的大小
(5) 打开节点“HTMLHelp 示例”
(6 ) 在 TOC 中搜索“Link to PDF ..”并打开此主题
(7) 请注意主题本身包含特定信息。

因此，根据您的需要深入研究代码。当然，您必须在编辑后再次编译 CHM。

希望就是这样;-)

请注意，从 TOC 到“Volkswagen”有一些棘手的链接。您可能需要在此处更深入地研究代码。

* * *

Ulrich Kulle - Microsoft 帮助 MVP - (2007-2009) - [http://www.help-info.de](http://www.help-info.de)

# javascript - 从不同的文件创建 javascript 对象

> ID：14335526
> 
> 赞同：10
> 
> 时间：2013-01-15T10:19:24.270
> 
> 标签：javascript, class, object

我一直在尝试做javascript，但我希望它是“面向对象的”，所以我试图在不同的文件中创建不同的javascript类并尝试创建一个对象并在不同的文件中调用它的方法功能，但它似乎不起作用。

这是我到目前为止所拥有的：

## 人.js

```
function Person(name, age, gender)
{
    this.age = age;
    this.name = name;
    this.gender = gender;

    this.job;

    this.setJob = function(job)
    {
        this.job = job;
    }

    this.getAge = function()
    {
        return this.age;
    }

    this.getName = function()
    {
        return this.name;
    }

    this.getGender = function()
    {
        return this.gender;
    }
} 
```

## Job.js

```
function Job(title)
{
    this.title = title;
    this.description;

    this.setDescription = function(description)
    {
        this.description = description;
    }
} 
```

## main.js

```
function  main()
{
    var employee = new Person("Richard", 23, male);
    document.getElementById("mainBody").innerHTML = employee.getName();
} 
```

## 索引.html

```
<!DOCTYPE HTML>
<HTML>
<head>
    <title>javascript test</title>
    <script src="main.js" type="javascript"></script>
</head>
<body>
    <p id="mainBody"></p>
</body>
</HTML> 
```

任何帮助或建议将不胜感激。

非常感谢

编辑：非常感谢所有的答案和建议，但是，我已经包含了我所有的 javascript 文件，但它仍然无法正常工作......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T10:22:25.637

目前 JavaScript 还不够聪明，无法在没有帮助的情况下找到您的依赖项。

你需要：

```
<!DOCTYPE HTML>
<HTML>
<head>
    <title>javascript test</title>
    <script src="person.js" type="javascript"></script>
    <script src="Job.js" type="javascript"></script>
    <script src="main.js" type="javascript"></script>
</head>
<body>
    <p id="mainBody"></p>
</body>
</HTML> 
```

* * *

**笔记：**

如果您想要按需加载依赖项，那么您可以将[AMD](http://requirejs.org/docs/whyamd.html)（异步模块定义）与[requirejs](http://requirejs.org/)或其他东西一起使用。

使用 AMD，您可以定义如下内容：

```
define(['Job', 'person'], function (job, person) {
    //Define the module value by returning a value.
    return function () {};
}); 
```

define 方法接受两个参数：依赖项和定义模块的函数。加载所有依赖项后，它们将作为参数传递给模块定义所在的函数。

还要注意的一件事是，`Person`并且`Job`不是类。它们只是根据定义中的规则生成对象的函数（构造函数）。

* * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T10:21:51.263

文件不会自动加载，您需要将每个 .js 文件添加到带有脚本标签的文档中，并以正确的顺序添加，否则会出错。

您可能想查看[requirejs.org](http://requirejs.org)的依赖管理，这是最近最重要的事情，直到 ES6 成为主流。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T10:25:49.570

类方法应通过原型定义，以便它们接收“this”引用，如下所示：

```
Person.prototype.getGender = function()
{
  return this.gender;
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T10:23:30.203

您可以尝试首先包含第一个和第二个 javascript 文件。像：

```
<!DOCTYPE HTML>
<HTML>
<head>
    <title>javascript test</title>
    <script src="person.js" type="javascript"></script>
    <script src="Job.js" type="javascript"></script>
    <script src="main.js" type="javascript"></script>
</head>
<body>
    <p id="mainBody"></p>
</body>
</HTML> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T10:21:47.723

您需要返回由创建的对象`Person`，以便它构成`Person`原型的新实例。

```
return(this); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T10:24:31.707

我看到代码存在三个问题。

**该页面未导入正确的外部 Javascript 文件**

```
<head>
    <title>javascript test</title>
    <script src="job.js" type="javascript"></script>
    <script src="person.js" type="javascript"></script>
    <script src="main.js" type="javascript"></script>
</head> 
```

**男性需要是一个字符串文字**

当解释器`male`在`Person`构造函数中遇到它时，它会寻找一个它找不到的变量。

```
function  main()
{
    var employee = new Person("Richard", 23, "male");
    document.getElementById("mainBody").innerHTML = employee.getName();
} 
```

**代码应该调用主函数。**

如果不调用 main 函数，代码永远不会启动。

```
function  main()
{
    var employee = new Person("Richard", 23, "male");
    document.getElementById("mainBody").innerHTML = employee.getName();
}

main(); 
```

工作示例：http: [//jsfiddle.net/R7Ybn/](http://jsfiddle.net/R7Ybn/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T10:26:48.163

这不起作用，因为根据您的 HTML 代码，浏览器仅加载 main.js

```
<script src="main.js" type="javascript"></script> 
```

由于 Javascript 在浏览器中运行，而不是在其他文件所在的服务器上运行，因此浏览器将尝试执行 main.js 并失败，因为它无权访问其他文件中的类。如果您包含每个文件（确保每个文件都包含在它需要的文件之后），您应该会取得更大的成功。

例如：

```
<script src="Job.js" type="javascript"></script>
<script src="person.js" type="javascript"></script>
<script src="main.js" type="javascript"></script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-11T22:57:16.400

ES6：[https ://www.sitepoint.com/understanding-es6-modules/](https://www.sitepoint.com/understanding-es6-modules/)

自 2017 年夏季起在 Safari 中受支持，但在其他浏览器中不支持。在一年左右的时间里，Edge、Firefox、Chrome、Opera 和 safari 似乎都会支持它。所以记住了吗？

[https://caniuse.com/#feat=es6-module](https://caniuse.com/#feat=es6-module)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-05T15:28:49.077

我遇到了类似的问题，对我来说问题源于写作

"脚本 src="Person.js" 类型="javascript"

代替

"script src="Person.js" type="text/javascript" 在我的 index.html 文件中

希望这可以帮助，

# optimization - 用于优化的 Hopfield 神经网络

> ID：14335528
> 
> 赞同：1
> 
> 时间：2013-01-15T10:19:25.287
> 
> 标签：optimization, neural-network, scheduling

任何人都可以推荐好文章，或者给出一些提示来解决：“使用 Hopfield 神经网络最小化任务延迟加权和的标准的单处理器调度问题”。我开始使用 Hopfield 和 Tank 方法来设计它来解决这个调度问题（如 TSP）。但是我在提供正确的能量公式和正确的体重调整公式时遇到了问题。JJ Hopfield an Tank 在他们的工作中使用典型的 TSP 变量，我不知道如何更改它以匹配我的问题要求。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:10:48.843

**好的，我在Alexandre de Sousa Mendes**和**Luiz Manoel Aguilera**所写的论文中找到了所有必要的信息：**单机调度问题的 Hopfiled 神经网络方法**。您可以在那里找到正确设计神经网络以优化调度问题所需的所有信息（需要修改以实现能量公式和其他一些提示）。

# .htaccess - 将子目录重写为 index.html

> ID：14335532
> 
> 赞同：0
> 
> 时间：2013-01-15T10:19:36.743
> 
> 标签：.htaccess

我有一个子目录设置，里面有一个静态网站。

但是当我去 www.site.com/directory/ 它不显示索引页面时，只有 www.site.com/directory/index.html 有效。

.htaccess 有没有办法重写它？

我不能只转发所有网址，因为还有其他页面，如 www.site.com/directory/other.html 仍然需要工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:26:18.650

在 Apache 配置中，您应该启用`AllowOverride`，以便您可以在`.htaccess`. 在该文件中，您可以设置`DirectoryIndex`指令。

参见： http : [//httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryindex http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryindex)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:26:29.240

在里面`/directory/`放置一个带有指令的 .htaccess 文件就足够了：

```
DirectoryIndex index.html 
```

如果它仍然不起作用，则可能有其他服务器指令与之冲突。

# objective-c - 如何在同一标签上将阿拉伯文本设置为右侧，将英文文本设置为左侧

> ID：14335536
> 
> 赞同：3
> 
> 时间：2013-01-15T10:19:47.887
> 
> 标签：objective-c, layout, ios6, arabic, right-to-left

[我从我问的上一个问题](https://stackoverflow.com/questions/14301523/language-switcher-in-ios6)中学会了如何制作英语和阿拉伯语项目。

## [github上的同一个项目](https://github.com/j4n0/14301523)

现在我所做的是在这个项目中添加了一个标签并写了**"Welcome"**。

***问题是布局。***当我有英文文本时，它在左侧（显然），但是当阿拉伯文本出现时，它应该从右到左开始。但它只与左对齐。

知道如何处理这种情况吗？

下面是截图...

## 英语

![在此处输入图像描述](../Images/4260b2757f7d58db76d611ea06ae2f39.png)

## 阿拉伯

![在此处输入图像描述](../Images/8ad31fc2f1b5d33606f98dbf66cf66c7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:54:29.187

下面是我做的...

[**在项目文件夹（english.ttf & arabic.ttf）中添加了字体，如此处**](https://stackoverflow.com/questions/8223538/how-to-display-different-custom-arabic-fonts-in-iphone-application)所示。

添加（阿拉伯语）和`Localizable.strings`（英语）`"myFont"="ACS Zomorrod";``"myFont"="Armalite Rifle";`

然后让那些字体处于状态

```
NSString *myFont = localize(@"myFont");
NSString *cpFont = @"Armalite Rifle";
if ([myFont isEqualToString:cpFont]) {
    self.myLabel.textAlignment = NSTextAlignmentLeft; // this is for English
} else {
    self.myLabel.textAlignment = NSTextAlignmentRight; // this is for Arabic
} 
```

* * *

## 编辑 1

你也可以有`"myLang"="arabic";`& `"myLang"="english";`in`Localizable.strings`然后有代码

```
NSString *myLang = localize(@"myFont");
NSString *myActualLang = @"english";
if ([myLang isEqualToString:myActualLang]) {
    self.myLabel.textAlignment = NSTextAlignmentLeft; // this is for English
} else {
    self.myLabel.textAlignment = NSTextAlignmentRight; // this is for Arabic
} 
```

**我会更喜欢第二个选项而不是第一个选项，因为如果我明天更改字体，我将不得不`NSString *cpFont = @"Armalite Rifle";`在所有文件的行中进行更改。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:26:48.163

**条件 if-else**

检查您的字体并更改对齐方式。

或者，

为他们每个人制作两个标签，设置他们的左-右和右-左对齐，并通过检查语言在其中一个上显示文本。

# c# - 线程池极端性能滞后

> ID：14335538
> 
> 赞同：4
> 
> 时间：2013-01-15T10:19:52.157
> 
> 标签：c#, .net, multithreading, performance, threadpool

关于这个问题已经进行了很多讨论，但他们似乎无法解释我的特定问题。**使用 ThreadPool 而不是 Thread 类进行线程处理时，我遇到了严重的性能问题。**

细节：

我已经构建了一个 tcp 服务器，当 tcp 服务器接受一个新客户端时，它会生成一个新线程来处理该客户端。一切都相当简单，但是我的服务器处理许多并发客户端的时间太长了。大约 35 个简单的客户端只发送一个 2048 字节的缓冲区，接收它并关闭它，需要 30 秒。

经过多次停止后，我发现`ThreadPool.QueueUserWorkItem`最多需要 26 秒。我用它来产生新的线程来处理新的客户。更换`ThreadPool.QueueUserWorkItem`后`new Thread()`我的性能提高到不到一秒钟。

我很想解释一下为什么会这样。

**澄清：**

延迟与客户端代码无关，从调用 ThreadPool.QueueUserWorkItem 到启动 clientMsgHandler.HandleIncomingMsgs 20 秒可以过去。

延迟从第一个线程开始，实际上随着测试的继续略有改善。我对解决方案不太感兴趣，而对解释为什么会发生更感兴趣。客户端确实阻塞了，但时间很短。

服务器代码：

```
private void AddTcpClientMsgHandler(TcpClient tcpClient)
    {
        //lock so no addition of client and closure can occur concurrently
        Stopwatch watch = new Stopwatch();
        watch.Start();
        Monitor.Enter(this);
        int pWatchIdx =  watchIDX++;
        if (!isOpen)
            throw new ObjectDisposedException(ResourceAlreadyClosed);

        TcpClientMsgHandler clientMsgHandler = CreateClientHandler(tcpClient);                                         
        clientMsgHandlerManager.AddTcpClientMsgHandler(clientMsgHandler);
        //ThreadPool.QueueUserWorkItem(clientMsgHandler.HandleIncomingMsgs); takes 20 seconds to run
        Thread thread = new Thread(clientMsgHandler.HandleIncomingMsgs);
        thread.Start();
        watch.Stop();
        Monitor.Exit(this);
        Console.WriteLine(string.Format("Iteration {0} took {1} Client {2}", pWatchIdx.ToString(),watch.Elapsed, tcpClient.Client.RemoteEndPoint));

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:29:55.943

阻塞代码是线程池的敌人。从您发布的示例中，无法判断阻塞发生的位置，但我建议您查看代码路径以找出代码阻塞的位置。在调试器中运行您的服务器，直到它开始显示高延迟，然后中断执行并查看 VS 的线程面板。这将向您显示线程阻塞的位置。这很可能是在同步 IO 上。考虑用异步代码替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:34:00.460

ThreadPool.QueueUserWorkItem - 将执行的方法排队。该方法在线程池线程可用时执行。

*   ThreadPool 等待空闲线程。
*   当找到空闲线程时，ThreadPool 使用它来执行您的方法。

为什么线程池很慢？

*   在线程池中的线程用完之前，上述两个并不是真正的原因。
*   在 .NET 3.5 下有 2000 个工作线程和 1000 个 IO 完成端口线程。（在 4.0、4.5 中甚至更多）。检查[Jon Skeet 的](https://stackoverflow.com/questions/5236493/active-thread-number-in-thread-pool)答案（线程池中的活动线程号）。

[例如]

.Net 2.0 默认每个可用处理器有 25 个线程。这意味着如果您将 30 个任务排队，最后 5 个任务将必须等待线程从池中可用，然后才能执行。

解决方案 ：

**SetMinThreads()**使最小线程数为 30（对于 .Net 2.0）。这将提高性能，因为 ThreadPool 在需要时不会立即创建新线程；它只在特定的时间间隔内执行此操作。

注意：每个客户端使用一个线程不支持更多并发。

使用**异步套接字**- 这些是非阻塞套接字，除了您不必轮询：每当发生“有趣”的事情时，堆栈都会向程序发送一个特殊的窗口消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:24:28.643

在线程池中的前几个线程用完后，系统会在启动每个新线程池线程之前引入延迟（这不影响重用线程）。

您可以通过在启动任何线程之前将[ThreadPool.SetMinThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.setminthreads.aspx)设置为适当大的值来更改线程池线程的初始数量。但你不应该那样做！（所以你没有从我这里听到……；）

您应该研究一种减少线程数量的方法，而不是这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:35:23.777

我认为这取决于您在`clientMsgHandler.HandleIncomingMsgs()`方法中所做的事情。线程池必须仅用于非常短的处理。

此外，线程池的默认大小为每个可用处理器 25 个工作线程，请注意线程中的交叉锁。

[>> 托管线程池](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)

# actionscript-3 - 单击时排列两个影片剪辑的 z 顺序

> ID：14335540
> 
> 赞同：0
> 
> 时间：2013-01-15T10:20:03.280
> 
> 标签：actionscript-3

我有 2 层，每个层都有一个影片剪辑。

怎么可能将可点击的影片剪辑向前，而另一个向后？

我尝试了一些方法，但我没有任何运气。

如果不是太多代码并且有人有一点时间请帮我解决它。

再次感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:28:49.007

假设我们说 (zorder) 将两个影片剪辑都放在数组列表中，然后根据需要在某些事件上调用 Bringttofronthandler 或 sendtobackhandler。

```
 private function recalculateDepth():void
        {
            for (var i:int = 0; i < zorder.length; i++) 
            {
                zorder.getItemAt(i).depth = i;
            }
        }
        protected function bringToFrontHandler(event:Event):void
        { 

                zorder.removeItem(selectedItem);
                //set to top of array
                zorder.addItem(selectedItem);
                recalculateDepth();

        }
   protected function sendToBackHandler(event:Event):void
        {

                zorder.removeItem(selectedItem);
                //set to bottom of array
                zorder.addItemAt(selectedItem, 0);
                recalculateDepth();
            }
                    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:06:28.210

您应该检查这些链接以了解显示列表的概念。

[http://www.adobe.com/devnet/flash/quickstart/display_list_programming_as3.edu.html](http://www.adobe.com/devnet/flash/quickstart/display_list_programming_as3.edu.html)

[http://www.republicofcode.com/tutorials/flash/as3displaylist](http://www.republicofcode.com/tutorials/flash/as3displaylist)

[http://active.tutsplus.com/tutorials/actionscript/as3-101the-display-list/](http://active.tutsplus.com/tutorials/actionscript/as3-101the-display-list/)

所有这些都将帮助您了解您可以对屏幕上的各种对象执行的操作，包括您要求的交换功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:33:04.513

swapChildren() 或 swapChildrenAt();

```
this.swapChildren(mc1,mc2) 
```

或者

```
this.swapChildrenAt(0,1) 
```

# android - Android ListView 选项被保留

> ID：14335545
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:20:26.060
> 
> 标签：android, android-listview

我有一个活动作为**singleTop**

这是 oncreate() 的一部分

```
 ListView mainListView = (ListView) findViewById(R.id.order_item_list);
     mainListView.clearChoices();
     mainListView.requestLayout();

     listAdapter = new OrderItemAdapter(this,
            R.layout.list_item_order_item, OrderActivity.Order.OrderItems);

    mainListView.setAdapter(listAdapter);

    SparseBooleanArray checkedItems= mainListView.getCheckedItemPositions();
    Log.println(2, "s", Integer.toString(checkedItems.size() ));
} 
```

然后使用调试器checkedItems 为0。但是当我从操作中获取它时单击它，checkedItems 具有以前的值。再次使用调试器的引用似乎在同一个对象上。我能对这件事做些什么吗？因为它会导致很多问题。

```
@Override
    public boolean onOptionsItemSelected(MenuItem menuItem) {
        switch (menuItem.getItemId()) {
        case android.R.id.home:

            //finish();
            // NavUtils.navigateUpFromSameTask(this);
            confirmExit();
            return true;

        case R.id.delete_button:
            ListView mainListView = (ListView) findViewById(R.id.order_item_list);

            SparseBooleanArray checkedItems= mainListView.getCheckedItemPositions();
            boolean hasOld=false;
            break;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:51:18.707

问题似乎来自这里。

[https://github.com/android/platform_frameworks_base/blob/android-cts-2.3_r12/core/java/android/widget/ListView.java](https://github.com/android/platform_frameworks_base/blob/android-cts-2.3_r12/core/java/android/widget/ListView.java)

```
 @Override
        public Parcelable onSaveInstanceState() {
            Parcelable superState = super.onSaveInstanceState();
            return new SavedState(superState, mCheckStates, mCheckedIdStates);
        }

        @Override
        public void onRestoreInstanceState(Parcelable state) {
            SavedState ss = (SavedState) state;

            super.onRestoreInstanceState(ss.getSuperState());

            if (ss.checkState != null) {
               mCheckStates = ss.checkState;
            }

            if (ss.checkIdState != null) {
                mCheckedIdStates = ss.checkIdState;
            }
        } 
```

# couchdb - CouchDB 和过滤后的 _change 调用的版本

> ID：14335546
> 
> 赞同：1
> 
> 时间：2013-01-15T10:20:26.403
> 
> 标签：couchdb

在我的 couchDB 数据库中，我有一个过滤器，它只发出`doc.my_key == "value"`这样的文档：

```
{
  "id": "_design/test".
  "filters": {
    "value_only": "function(doc){return (doc['my_key'] == 'value');}"
  }
} 
```

当我写两个这样的文件时：

```
{
  "id": 1,
  "my_key": "cheeky"
}

{
  "id":2,
  "my_key": "value"
} 
```

然后 json at`/this_database/_changes?filter=test/value_only`读取：

```
{
  "results":[
    {"seq":2,"id":"2","changes":[{"rev":"1-463e18b34dfa529dd9b39981ad3293f4"}]},
  ],
  "last_seq":4
} 
```

这很酷。CouchDB 很酷。但是我现在像这样更新文档#2：

```
{
  "id":2,
  "my_key": "no longer value"
} 
```

过滤后的更改提要现在为空。我知道这是因为当文档更新时，该文档的先前 seq 编号会从更改提要中删除，但是是否有任何参数我可以传递/我可以进行配置编辑，以便返回最新发布的版本证件的身份证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:01:58.763

Suddenly, there is no such parameter for changes feed. The only way you may handle all changes events is to listen feed as continuous stream. However, even this case couldn't give you any warranty that received revision number will be available due to race condition with compaction operation.

The changes feed emits only leafs revisions and the winning ones if there was any conflicts(e.g. document has two "heads" with different leaf revision). For latter ones you may pass `?style=all_docs` query argument to retrieve all existed leafs for document.

For example:

```
+ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +
' Document with _id foo                                             '
'                                                                   '
' +-----------------+       +-------+       +-------+     +-------+ '
' |      1-abc      | ----> | 2-cde | ----> | 3-fgh | --> | 4-ijk | '
' +-----------------+       +-------+       +-------+     +-------+ '
'                             |                                     '
+ - - - - - - - - - - - -     |         - - - - - - - - - - - - - - +
                          '   |       '
                          '   |       '
                          '   v       '
                          ' +-------+ '
                          ' | 3-123 | '
                          ' +-------+ '
                          '           '
                          + - - - - - + 
```

The default behaviour (`style=main_only`) will yield the winning revision: `4-ijk`, while with `style=all_docs` the changes feed yields both `3-123` and `4-ijk` revisions for this document.

Not sure in, but I suppose that is optimized usage of database data structure and protection against conflicts with compaction which handles all non leafs revisions.

# jquery - 是否可以在 ajax 帖子中声明多个 url？

> ID：14335548
> 
> 赞同：0
> 
> 时间：2013-01-15T10:20:33.887
> 
> 标签：jquery

```
 Is there possible to add multiple url's in ajax post method?

 $.ajax({
            type: 'POST',
            url: root + "projects/partners?json",
            data:{key:$(this).val()}
            success: refreshMyModel,
            dataType: "json"
        }); 
```

在上面的 js 文件示例中，我想添加多个 url 而不是一个，所以这可以在多个 url 之间使用 ',' 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:30:01.837

不，不可能开箱即用，您必须进行多个 Ajax 调用，如果重要，您可以将它们链接在一起。

# c# - 使用 Twitter API 读取 Twitter 流

> ID：14335553
> 
> 赞同：1
> 
> 时间：2013-01-15T10:20:44.803
> 
> 标签：c#, api, twitter, http-streaming

我正在使用 c# 创建一个服务来读取特定哈希标签（例如[#ReformJO ）上](http://twitter.com/search/realtime?src=typd&q=reformjo)**的推文流（TimeLine）**，因此在阅读 twitter API 文档后，我使用的最有效方法是使用**[POST statuses/filter](http://dev.twitter.com/docs/api/1.1/post/statuses/filter)**

问题是我不知道从哪里开始我的代码。因此，如果有一种提示或使用示例来澄清这一点。

PS：我不是在寻找有结果的搜索方法，我需要的是这个标签的时间线阅读器，因为它可以随时扩展。

# python - 打印混乱

> ID：14335556
> 
> 赞同：5
> 
> 时间：2013-01-15T10:20:51.823
> 
> 标签：python, python-2.7

当我尝试打印“\20%”时，我是 python 新手

```
>>>"\20%" 
```

为什么外壳打印 '\x10%' 即显示

```
'\x10%' 
```

加入时也会发生同样的情况

```
>>>l = ['test','case']
>>>"\20%".join(l) 
```

表明

```
'test\x10%case' 
```

我正在使用 python 2.7.3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T10:26:11.887

`'\20'`是八进制文字，与`chr(2 * 8 + 0) == chr(16)`.

Python shell 默认显示的*不是*print 的输出，而是`repr`给定值的 esentation，即十六进制的`'\x10'`.

如果您想要字符串`\20%`，则必须转义反斜杠 ( `'\\20%'`) 或使用[原始字符串文字](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)( `r'\20%'`)。两者都将显示为

```
>>> r'\20%'
'\\20%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:27:44.017

`\20`是一个转义序列，它引用`DLE`十进制值为 16（`20`八进制，`10`十六进制）的 ASCII 字符。这样的字符被字符串函数打印为`\x10`十六进制转义符`repr`。

要指定文字`\20`，请加倍反斜杠 ( `"\\20"`) 或使用原始字符串 ( `r"\20"`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:47:45.223

二印`"\20%"`

如果直接打印会怎样：

```
>>> print '\20%'
%                       # some symbol not correctly display on this page 
```

并使用`r`

```
>>> print r'\20%'
\20%
>>> r'\20%'         # what r do.
'\\20%'
>>> print '\\20%'     
\20%
>>> 
```

前段时间我对字符串有同样的疑问，我问[**了一个问题**](https://stackoverflow.com/questions/13669682/in-context-of-python-raw-string)，你可能会发现有帮助

# java - 为什么 JUnit 中的 @Rule 注释字段必须是公开的？

> ID：14335558
> 
> 赞同：32
> 
> 时间：2013-01-15T10:20:52.247
> 
> 标签：java, junit, public, junit-rule

在 JUnit 测试用例中，注释的字段`@Rule`必须是公共的。它打破了常见的 Java 编码约定（所有类成员变量都不应该是公共的）。为什么 JUnit 需要这个？

文档`@Rule`：[https ://github.com/junit-team/junit/blob/master/src/main/java/org/junit/Rule.java](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/Rule.java)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-15T10:24:44.410

JUnit 运行器将需要以反射方式访问该字段以运行规则。如果该字段是私有的，则访问将抛出`IllegalAccessException`.

另一种选择是让运行者在运行规则之前将访问权限从私有修改为公共。但是，如果启用了安全管理器，这可能会导致问题。

如果您想避免在您的测试类中使用公共字段，您可以从 JUnit 4.11 中注释返回`Rule`with `@Rule`or的方法`@ClassRule`。

# css - 无论如何要让另一个 div 下的 div 可点击，就像阴影一样？

> ID：14335559
> 
> 赞同：2
> 
> 时间：2013-01-15T10:20:59.193
> 
> 标签：css, shadow, pseudo-element

所以......我为一个奇怪的问题创建了这个奇怪的解决方案：我需要带有直边的阴影，比如带有干净边的渐变而不是盒子阴影。

我使用 :after 元素将渐变附加到需要它的元素的底部（在示例中，这已被注释掉）。然后我尝试了一个负尺寸的嵌入阴影，它的工作方式相同。除了一个小细节之外，这些都完美地工作：我不能像使用阴影一样使用它，因为它覆盖的元素有时不可点击。

示例：[http ://codepen.io/syren/pen/jlcym](http://codepen.io/syren/pen/jlcym)

我已经排除了一些事情：

1）在下面的元素上使用 inset-shadows：它需要应用于原始元素，否则当事物移动时它不会像阴影一样起作用。如果我能弄清楚

2) 使用具有负散布或大小的盒子阴影：这可行，我会使用它，但它看起来不像设计师想要的那样。

3）Z-index：它很乱，因为它是一个非常动态的页面，所以我可以在某些地方使用它，但不能在其他地方使用它，因为将其视为阴影，至少在视觉上它应该覆盖所有内容。

所以，回顾一下，我希望它看起来与干净的边缘完全一样，我需要将它**附加到元素**而不是周围的元素，我真的希望它是一个纯 CSS 解决方案，就像伪元素。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:09:28.280

[http://codepen.io/anon/pen/cuJqG](http://codepen.io/anon/pen/cuJqG)

html:

```
<nav>
  <h1>I'm an Example Header</h1>
</nav>
<section>
  <h3>You can't click me because the shadow above is covering me!</h3> 
```

CSS：

```
nav{
  border-bottom:3px solid #000;
  position:relative;
}

h1{
  font-family: "Helvetica";
  text-transform:uppercase;
  margin: 20px 10px 10px;
}

h3{
  font-family: Helvetica, sans-serif;
  font-weight: 600;
  padding:10px;
  margin:0;
  cursor: pointer;
  width: 98.75%;
  color: white;
  background: #ff0000;
  box-shadow: inset 0 20px 40px -20px #000; 
} 
```

# javascript - IE9 Javascript 注入问题

> ID：14335569
> 
> 赞同：0
> 
> 时间：2013-01-15T10:21:32.420
> 
> 标签：javascript, internet-explorer-9, code-injection

我在**IE9**上遇到了一些 Javascript 注入问题（> 中高安全性）。在我的应用程序中，当用户想要将任何网页添加到他们的书签时，他们单击一个链接，然后将 Javascript 注入该页面，该注入的 javascript 会获取有关页面的所有详细信息并将用户重定向到我的网站。在 IE9 上，它似乎不适用于中高安全性。我怀疑这与**IE9 如何处理跨站点 javascript 注入**有关。但是，无法找到任何相关信息。

有人可以帮助或指导我一些相关信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:46:54.813

您可能会发现[这篇 TechNet 帖子](http://blogs.technet.com/b/steriley/archive/2008/09/16/internet-explorer-security-levels-compared.aspx?Redirected=true)很有用，尤其是“允许 Internet Explorer Web 浏览器控件的脚本”行。

显然，Internet Explorer 不允许脚本控制 Web 浏览器，除了中低和低安全级别。因此，除非将浏览器设置为这两个级别之一，否则您将无法重定向浏览器。

也许您可以向 DOM 添加某种通知并给他们一个指向您网站的链接，而不是重定向它们？

# spring-mvc - 在弹簧控制器中获取复选框值

> ID：14335570
> 
> 赞同：0
> 
> 时间：2013-01-15T10:21:42.437
> 
> 标签：spring-mvc

![在此处输入图像描述](../Images/327c31ef04bfdf1aa99c827928a81f8e.png)

嗨，我希望 spring 控制器中的多个标记复选框值在 spring 中执行多个删除任务，如何获取标记复选框的这些值，如图所示

这是显示部门详细信息列表的jsp页面，我已经给出了删除多个部门的复选框选项这是我的jsp页面

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>

<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script>
    function setAction(url) {

        if (url == 'FindByDepartmentID') {
            document.form.action = "/EmployeeWebSpring/department/FindByDepartmentId";

        }
        if (url == 'FindByDepartmentName') {
            document.form.action = "/EmployeeWebSpring/department/FindByDepartmentName";
        }

    }
    function showMe(it) {

        var hasChecked = false;
        var chks = document.getElementsByName('checked');
        var vis = '';

        for ( var i = 0; i < chks.length; i++) {
            if (chks[i].checked) {
                hasChecked = true;
                break;
            }
        }

        if (hasChecked == false) {
            vis = "none";
        } else {
            vis = "block";
        }

        document.getElementById(it).style.display = vis;

    }
</script>
</head>
<body>
    <form:form name="form" commandName="departmentForm" method="post">
        <c:if test="${requestScope.x}">
            <div id="div1">
                <center>
                    Department_ID:<br />
                    <form:errors path="departmentId" />
                    <br /> <br />
                    <form:input path="departmentId" />
                    <br /> <input type="submit" name="FindByDepartmentID"
                        value="FindByDepartmentID" id="FindByDepartmentID"
                        onclick="setAction(this.id)" />
                </center>
            </div>
        </c:if>
        <c:if test="${requestScope.y}">
            <div id="div2">

                Department_Name
                <form:input path="departmentName" />
                <input type="submit" name="method" value="FindByDepartmentName"
                    id="FindByDepartmentName" onclick="setAction(this.id)" /> <br />
                <font size=3>For Searching the employees by<b>Employee
                        Name</b><br />you can use % match all the records with the given
                    pattern
                </font><br /> <font size="2"> <i>e.g <b> for search by</b>EmployeeName<br />
                        matches alL the employees whose name starts with character <b>S</b></i></font>
            </div>
        </c:if>

        <c:if test="${departmentName}">
            <div>
                <fmt:message key="searchResult.header" />
                <br>
                <c:choose>
                    <c:when test="${empty requestScope.listDepartmentBO}">
                        <fmt:message key="searchResult.noresult" />
                    </c:when>
                    <c:otherwise>
                        <table border="2">
                            <tr>
                                <th width="118">Delete</th>
                                <th width="118">Department_ID</th>
                                <th width="118">Department_Name</th>
                                <th width="118">Department_Location</th>
                                <th width="118">detail_Link</th>
                            </tr>
                            <c:forEach var="departmentBO"
                                items="${requestScope.listDepartmentBO}">
                                <tr>
                                    <td><form:checkbox path="departmentId"
                                            value='${departmentBO.departmentId}' onclick="showMe('div1')" id="checked"/></td>

                                    <td>${departmentBO.departmentId}</td>

                                    <td>${departmentBO.departmentName}</td>

                                    <td>${departmentBO.departmentLocation}</td>
                                    <td><a
                                        href="javascript:loadId(${departmentBO.departmentId})"><font
                                            color="blue">Details</font></a></td>

                                </tr>
                            </c:forEach>
                        </table>
                    </c:otherwise>
                </c:choose>

                <br />
                <fmt:message key="searchResult.searchAgain" />
                <a href="/EmployeeWebSpring/search/searchspring"> <fmt:message
                        key="searchResult.click" />
                </a>

            </div>
        </c:if>
        <div id="div1"
            style="position: absolute; width: 600px; display: none;">
            <input type="submit" name="create" value="delete" align="middle"
                style="size: 100px" />
        </div>
    </form:form>
</body>
</html> 
```

这是我的控制器删除功能，现在它执行单个删除任务

包 com.nousinfo.tutorial.controllers；导入 java.util.Map；

```
import javax.validation.Valid;

import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.nousinfo.tutorial.model.DepartmentForm;
import com.nousinfo.tutorial.service.impl.DepartmentServiceImpl;
import com.nousinfo.tutorial.service.model.DepartmentBO;

@RequestMapping("departmentController")
public class DepartmentController {
    private DepartmentServiceImpl departmentServiceImpl;

    public DepartmentServiceImpl getDepartmentServiceImpl() {
        return departmentServiceImpl;
    }

    public void setDepartmentServiceImpl(
            DepartmentServiceImpl departmentServiceImpl) {
        this.departmentServiceImpl = departmentServiceImpl;
    }

    @RequestMapping(value = "/departmentForm", method = RequestMethod.GET)
    public String view(Model model) throws Exception {
        DepartmentForm departmentForm = new DepartmentForm();
        model.addAttribute("departmentForm", departmentForm);
        return "departmentForm";
    }

    @RequestMapping(value = "/createDepartment", method = RequestMethod.POST)
    public String createEmployee(@Valid DepartmentForm departmentForm,
            BindingResult bindingResult, Map<String, DepartmentForm> model)
            throws Exception {
        String form = null;
        if (bindingResult.hasErrors()) {
            return "departmentForm";
        }

        model.put("departmentForm", departmentForm);
        departmentForm.setUpdateStatus("A");
        if (departmentForm.getUpdateStatus().charAt(0) == 'A') {
            boolean flag = departmentServiceImpl
                    .actionDecider(convertDeptFormToDeptBO(departmentForm));
            if (flag == false)
                form = "DBError";
            else
                form = "Success";

        }
        return form;
    }

    @RequestMapping(value = "/deleteDepartment", method = RequestMethod.POST)
    public String deleteDepartment(
            @ModelAttribute("departmentForm") DepartmentForm departmentForm) {
        String form = null;
        departmentForm.setUpdateStatus("D");
        if (departmentForm.getUpdateStatus().charAt(0) == 'D') {
            boolean flag = departmentServiceImpl
                    .actionDecider(convertDeptFormToDeptBO(departmentForm));
            if (flag == false)
                form = "DBError";
            else
                form = "Success";

        }
        return form;
    }

    private DepartmentBO convertDeptFormToDeptBO(DepartmentForm departmentForm) {
        DepartmentBO departmentBO = new DepartmentBO();
        departmentBO
                .setUpdateStatus(departmentForm.getUpdateStatus().charAt(0));
        departmentBO.setDepartmentId(departmentForm.getDepartmentId());
        departmentBO.setDepartmentName(departmentForm.getDepartmentName());
        departmentBO.setDepartmentLocation(departmentForm
                .getDepartmentLocation());

        return departmentBO;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-19T17:49:43.900

您可以做的是在您的 jquery 循环中构建部门 ID 列表：

```
 for ( var i = 0; i < chks.length; i++) {
        if (chks[i].checked) {
            list.add(getDepartmentId());
        } 
```

然后通过 ajax 调用将其传递给您的控制器方法：

```
$.ajax({
  url: deleteDepartment,
  type: 'POST',
  data: list
  })
  .done(function() {
    console.log("success");
  }); 
```

在您的控制器方法中包含 ID 列表作为 requestParam：

```
deleteDepartment(@RequestParam List<String> list, @ModelAttribute("departmentForm") DepartmentForm departmentForm) 
```

并在您的控制器方法中执行查询以删除部门 ID 在您传入的列表中的所有记录。

# windows-phone-7 - 找到更好的控件来在电子书阅读器中显示书籍内容

> ID：14335581
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:22:09.720
> 
> 标签：windows-phone-7

我想创建一个电子书阅读器应用程序，我尝试使用控件RichTextBox显示一本书中的章节内容，而它无法显示整个章节，最后我被告知任何大小windows phone中的控件小于2048px，这导致RichTextBox中位于2048px（高度）之后的文本无法显示。所以，我需要找到另一个控件来做这样的事情。有什么建议吗？

此外，我希望控件可以满足以下要求：

1.  它可以自定义显示在其中的文本的字体大小、前景色（这可能是最简单的一个）
2.  它可以自定义背景图片。
3.  **它允许用户自由选择上面的文本进行复制**（这是 3 个中最重要的一个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:53:04.690

由于电子书本质上是一组 HTML 页面，因此您应该使用 Web 控件显示您的页面。

顺便说一句，自定义字体大小等绝不是微不足道的，因为您最终会试图弄清楚是否以及如何覆盖书中的 CSS 规则。

您可能想查看[http://openbookreader.codeplex.com/](http://openbookreader.codeplex.com/)，尽管它似乎已经有几年不活跃了。

# javascript - 异步悖论 BackboneJS

> ID：14335583
> 
> 赞同：0
> 
> 时间：2013-01-15T10:22:23.287
> 
> 标签：javascript, backbone.js, asynchronous

**我正在尝试什么**

在保存或删除我的表单时，会向用户弹出一个简单的通知

**我做了什么**

```
events :{
    '#save-button click' : 'onSaveBUttonClick',
    '#delete-button click' : 'onDeleteButtonClick'
};

onDeleteButtonClick = function(){

    //popup appears to confirm delete
    this.model.on('sync',function(model){ 
        model.off('sync');
        alert("project deleted"); 
    },this);
    this.model.destroy();
}

onSaveBUttonClick = function(){

    //popup appears to confirm delete
    this.model.on('sync',function(){ 
        model.off('sync');
        alert("project Saved"); 
    },this);
    this.model.save(); 
} 
```

**问题**

我单击删除按钮并说，选择，取消。这里`model.on('sync')`是绑定到模型的。

现在，当我单击 save 并确认时，将`model.on('sync')`调用两次（一次由删除按钮绑定，一次由保存按钮绑定）。

所以我首先删除了 2 个弹出窗口项目，然后保存了项目。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:52:17.077

您可以使用成功选项[`model.save`](http://backbonejs.org/#Model-save)和[`model.destroy`](http://backbonejs.org/#Model-destroy)

> **destroy** *model.destroy([options])*
> 通过将 HTTP DELETE 请求委托给 Backbone.sync 来销毁服务器上的模型。返回一个 jqXHR 对象，如果模型是新的，则返回 false。接受选项哈希中的成功和错误回调。
> 
> **save** *model.save([attributes], [options])*
> [...]
> save 接受选项哈希中的成功和错误回调。

你的方法可能看起来像

```
onDeleteButtonClick = function(){
    this.model.destroy({
        success: function() {
            alert("project deleted"); 
        }
    });
}

onSaveBUttonClick = function(){
    this.model.save(null, {
        success: function() {
            alert("project saved"); 
        }
    }); 
} 
```

# r - 将不规则网格转换为规则网格

> ID：14335585
> 
> 赞同：2
> 
> 时间：2013-01-15T10:22:26.633
> 
> 标签：r

我在不规则网格中有一组观察。我想将它们放在分辨率为 5 的常规网格中。这是一个示例：

```
d <- data.frame(x=runif(1e3, 0, 30), y=runif(1e3, 0, 30), z=runif(1e3, 0, 30))

 ## interpolate xy grid to change irregular grid to regular

 library(akima)

 d2 <- with(d,interp(x, y, z, xo=seq(0, 30, length = 500),
                  yo=seq(0, 30, length = 500), duplicate="mean")) 
```

我怎样才能`d2`上课`SpatialPixelDataFrame`？它有 3 个列、坐标和插值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:16:42.200

您可以使用这样的代码（感谢@hadley 的评论）：

```
d3 <- data.frame(x=d2$x[row(d2$z)],
                 y=d2$y[col(d2$z)],
                 z=as.vector(d2$z)) 
```

这里的想法是，R 中的矩阵只是一个向量，其中包含一些关于其维度的额外信息。该`as.vector`调用丢弃了该信息，将 500x500 矩阵转换为长度为 500*500=250000 的线性向量。下标运算符`[`的作用相同，因此虽然`row`最初`col`返回一个矩阵，但它也被视为线性向量。因此，总共有三个矩阵，将它们全部转换为具有相同顺序的线性向量，使用其中两个来索引`x`和`y`向量，并将结果组合成一个数据框。

* * *

我最初的解决方案没有使用`row`and `col`，而是`rep`制定`x`and`y`列。它有点难以理解和记住，但可能更有效，并为您提供一些对更困难的应用程序有用的洞察力。

```
d3 <- data.frame(x=rep(d2$x, times=500),
                 y=rep(d2$y, each=500),
                 z=as.vector(d2$z)) 
```

对于这个公式，您必须知道 R 中的矩阵以[列优先顺序](http://en.wikipedia.org/wiki/Column-major_order#Column-major_order)存储。因此，线性化向量的第二个元素是`d2$z[2,1]`，因此行号将在两个后续值之间变化，而列号对于整列将保持不变。因此，您希望将`x`向量作为一个整体重复，但要单独重复每个元素`y`。这就是这两个`rep`调用的作用。

# jquery - asp.net mvc jquery表单上传

> ID：14335587
> 
> 赞同：0
> 
> 时间：2013-01-15T10:22:35.930
> 
> 标签：jquery, asp.net-mvc, jquery-forms-plugin

我正在使用 jQuery 表单上传文件，但无法从控制器返回任何消息。我在下面做吗？

```
$(function() {
    $('#fileUploadForm').ajaxForm({               
        type: "POST",
        dataType: "json",             
        beforeSubmit: ShowRequest,
        success: SubmitSuccesful,
        error: AjaxError                               
    });                                    
});   

function ShowRequest(formData, jqForm, options) {
    var queryString = $.param(formData);
    return true;
}

function AjaxError() {
    $("#msgs").html("A file upload error occured.");
}

function SubmitSuccesful(responseText, statusText) {
    $("#fileUploadForm").unblock();
    $.growlUI(null, responseText.message);
} 
```

```
public FileUploadJsonResult AjaxPostTypeUpload(HttpPostedFileBase postedFile)
{
    try
    {
        string mess = string.Empty;          
        mess = "success";              
        return new FileUploadJsonResult { Data = new { message = mess }};
    }
    catch { throw; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:26:24.343

尝试只返回一个带有`success`参数的基本对象：

```
return new { message = "success" }; 
```

# coffeescript - 带有 erb 扩展名的咖啡脚本给出缺少模板错误

> ID：14335589
> 
> 赞同：4
> 
> 时间：2013-01-15T10:22:38.123
> 
> 标签：coffeescript, ruby-on-rails-3.2, erb

我正在使用导轨 3.2.11 和咖啡导轨 3.2.2。

在这里，我试图在文件**/app/views/my_files/create.js.coffee.erb中呈现咖啡脚本**

这是我的**控制器代码**的样子

```
class MyFilesController < ApplicationController    
  respond_to :js

  def create
  end

end 
```

在点击创建操作时，我得到**了缺少模板错误**。但是当我将文件**create.js.coffee.erb**重命名为**create.js.coffee**时，它​​工作正常。

我不明白**.erb 扩展名**超过 .coffee 有什么问题，在这种情况下，当模板已经存在时，为什么它会给出缺少模板的错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T09:48:54.087

将文件重命名为**create.js.coffee**

请参阅 [如何在 app/views 中渲染 new.js.coffee.erb？](https://stackoverflow.com/questions/7616097/how-to-render-new-js-coffee-erb-in-app-views)

刚遇到同样的问题...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T03:02:02.843

您尝试将咖啡脚本呈现为视图而不是将其用作资产是否有特殊原因？

.erb 是一个 ruby​​ 脚本文件，在编译时会生成一个 html 文件。.js.coffee 在编译时会生成一个 .js 文件。您应该将 .erb 与 create.html.erb 模板一起使用，该模板又使用您的 create.js.coffee。

```
<%= javascript_include_tag "create" %> 
```

这应该在您的 create.html.erb 中，将由您的 MyFilesController 中的 create 方法调用

# css - 为什么不是所有定义的类最终都出现在编译的 CSS 文件中，有什么原因吗？

> ID：14335597
> 
> 赞同：0
> 
> 时间：2013-01-15T10:23:11.987
> 
> 标签：css, sass, compass-sass, yeoman

我有一个 style.scss 文件，其中包含`@import "partials/module/all"`、包含和包含一个名为. 这个类不包含在编译的 CSS 文件中，但是 _buttons.scss 文件中的其他类。`partials/module/_all.scss``@import "buttons"``partials/module/_buttons.scss``btn--no-link`

奇怪的是，我正在使用 Yeoman 构建我的项目，当它为我构建临时构建时（当我保存 .scss 文件时），所有定义的类都包括在内 - 但是当我构建用于生产的构建时（使用command `yeoman build`），所提到的类，以及其他一些，在编译的 CSS 文件中都没有。

是否有一些命令行选项可能导致这种行为？似乎有点随机，除了每次都缺少相同的类。

# jquery - Jquery Isotope - 使项目始终扩展到相同的位置

> ID：14335604
> 
> 赞同：0
> 
> 时间：2013-01-15T10:23:39.487
> 
> 标签：jquery, jquery-isotope

我正在使用 jquery isotope 开发图像库，当用户单击图像的缩略图时，它将展开，如同位素示例 (http://isotope.metafizzy.co/demos/elements-complete .html)

我遇到的问题是我希望每个图像都展开到相同的位置，即总是展开到页面的最左上角，而不管点击的是什么缩略图。

我玩过，我可以通过添加以下代码使图像在左上角展开，但是当我这样做时，它会在一些缩略图图像的顶部展开。

```
$(this).css({"-webkit-transform": "translate3d(5px, 5px, 0px)"}); 
```

这是我到目前为止所拥有的...... [http://jsfiddle.net/supersav144/f33UW/](http://jsfiddle.net/supersav144/f33UW/)

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:26:53.737

Think the last line of the js might be causing the problem.. Try this.. haven't tested for various container sizes tho.. [http://jsfiddle.net/H5jYh/](http://jsfiddle.net/H5jYh/)

```
 $container
  // update sort data on changed items
  .isotope('updateSortData', $this )
  .isotope('updateSortData', $previousLargeItem )
  // trigger layout and sort
  .isotope('reLayout'); 
```

# ios5.1 - 无法在 ipad 上显示 rightBarButtonItem

> ID：14335605
> 
> 赞同：0
> 
> 时间：2013-01-15T10:23:44.230
> 
> 标签：ios5.1

这是我的代码：

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:vc];
UIBarButtonItem *anotherButton = [[UIBarButtonItem alloc] initWithTitle:@"RETURN" style:UIBarButtonItemStylePlain target:self action:@selector(refreshPropertyList:)];
navigationController.navigationItem.rightBarButtonItem = anotherButton;
[anotherButton release];       
[IpadAppDelegate.stackController presentModalViewController:navigationController animated:YES]; 
```

![在此处输入图像描述](../Images/dfc071cfdb50f0bab9294edffb75b536.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:28:25.850

我找出原因：

需要改变`navigationController.navigationItem.rightBarButtonItem = anotherButton;`

到：`self.navigationItem.rightBarButtonItem = anotherButton;`

# validation - JSF 在没有立即=真的情况下跳过所需验证

> ID：14335610
> 
> 赞同：48
> 
> 时间：2013-01-15T10:24:06.243
> 
> 标签：validation, jsf, lifecycle, immediate-attribute

我有多个表格，其中有必填字段和可选字段。

要*提交*这样的表单，我需要对要执行的 required-attribute 进行验证，这可以正常工作。要*取消*`immediate="true"`这样的表单，我使用上的属性`p:commandbutton`，这使得它的操作在**应用请求值**阶段发生，如下所述：[如何在单击特定按钮时跳过验证？](https://stackoverflow.com/questions/6062923/how-to-skip-validation-when-a-specific-button-is-clicked)

但是，对于大型表单，我想为用户提供一个保存按钮，以便他可以稍后继续。

为了仅保存当前状态，我还想忽略所需属性的验证。但是，使用`immediate="true"`不起作用，因为那时我的简单保存方法什么也没保存，因为 JSF 生命周期从未达到“UpdateModelValues”阶段。（根据[http://www.javacodegeeks.com/2012/01/jsf-and-immediate-attribute-command.html](http://www.javacodegeeks.com/2012/01/jsf-and-immediate-attribute-command.html)）

那么，如何绕过 required-check 但不跳过一半的生命周期呢？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-15T10:43:04.533

只要是表单的成员，每个 Button 都会在 Param-List 中创建一个条目。所以我简单地对“必需”参数应用了该条目是否存在的检查：

```
<h:form id="form" prependId="true">
...
<p:inputText id="someId"
    required="#{param['form:save']==null}" ... />
...
<p:commandButton id="save" value="Save" />
<p:commandButton id="submit" value="Submit" />
<p:commandButton id="cancel" value="Cancel" immediate="true" />
</h:form> 
```

当我单击“提交”时`param['form:save']`is `NULL`，然后将表达式转换`true`为执行验证。

当我单击“保存”时`param['form:save']`（`NOT NULL`但为空！），它解析为`false`因此忽略验证。（或者假设 JSF 认为它不是必填字段，因为表达式 beeing 被评估为`false`）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-29T16:48:37.527

这是一个很好的问题，也是一个非常有用的答案。这种方法省去了很多麻烦`immediate="true"`。

我想添加此信息（但还不允许发表评论）。您的代码示例似乎需要**JSF 2.0**或更高版本（纠正我）。如果您像我一样该死地使用 JSF 1.1/1.2，那么请考虑以下更改/添加：

```
<h:form id="form">
...
<p:inputText id="someId" required="#{!empty param['save']}" ... />
...
<p:commandButton id="save" value="Save" />
</h:form> 
```

*   JSF 1.1 中没有属性 prependId
*   因此在 param[...] 你必须只指定按钮 id
*   您使用的语法`="{true and ...}"`可能是错误的（否`#`）？
*   正如您从您自己的编辑历史中看到的那样，“null or not null”逻辑不是很直观:) 这就是为什么`!empty ...`当我偶然发现它时我立即喜欢它的原因。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-12T08:41:56.740

如果您想在单击按钮时跳过验证，则可以轻松地将参数添加到要跳过它的按钮。例子：

```
<p:commandButton value="button1" action="#{bean.action()}" >
   <f:param name="skipValidator" value="true"/>
</p:commandButton> 
```

然后在验证器中您可以读取此参数，如果为真则跳过它：

```
@FacesValidator("com.validators.MyValidator")
public class MyValidator implements Validator{

  public void validate(FacesContext ct, UIComponent co, Object obj) throws ValidatorException { 
    if(!continueValidation()){
      return;
    }
    // validation process
  }

protected boolean continueValidation() {
    String skipValidator= FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("skipValidator");
    if (skipValidator != null && skipValidator.equalsIgnoreCase("true")) {
      return false;
    }
    return true;
  } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-03T12:52:36.667

其他人建议的替代方法是使用自定义`BeanValidator`来验证表单，如果说，单击带有 id 保存的按钮。任何其他未隐式定义为执行验证的按钮都不会验证，而只是提交可用的数据。[在这里](http://www.springfuse.com/2011/12/15/skip-jsf-validation-depending-on-action.html)找到完整的干净的例子

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-04T10:31:04.933

对于这种情况，我使用[skipValidators （假设所有验证都被跳过）。](http://showcase.omnifaces.org/taghandlers/skipValidators)来自[omnifaces的代码](http://showcase.omnifaces.org)

```
<h:form>
  <h:dataTable value="#{bean.items}" var="item">
    <h:column>
        <h:inputText value="#{item.value}" required="true" />
    </h:column>
  </h:dataTable>
  <h:commandButton value="add new row" action="#{bean.add}">
    <o:skipValidators />
  </h:commandButton>
  <h:commandButton value="save all data" action="#{bean.save}" />
  <h:messages />
</h:form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-22T15:29:04.747

就我而言，我没有在参数中找到按钮的 clientId，但我 `param['javax.faces.source'] = buttonClientId`在 requestmap 中找到了它。该值将是单击按钮的 clientId。

# android - MySQL 登录和注册

> ID：14335615
> 
> 赞同：0
> 
> 时间：2013-01-15T10:24:19.920
> 
> 标签：android, login

我正在关注关于 Android 登录和注册的优秀教程[http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

我已经将代码实现到我自己的项目中，但我不断收到错误。因此，我决定尝试他的代码是否正常工作并且效果很好。经过几个小时的搜索出了什么问题，我决定复制他的代码并从那里开始。但即使只是将他的代码复制粘贴到我的项目中，我仍然会不断出错。

这是我的 logcat 错误，如果有人能指出我正确的方向，我会很高兴。

```
01-15 10:12:26.822: E/AndroidRuntime(1935): FATAL EXCEPTION: main
01-15 10:12:26.822: E/AndroidRuntime(1935): android.os.NetworkOnMainThreadException
01-15 10:12:26.822: E/AndroidRuntime(1935): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)                                        
01-15 10:12:26.822: E/AndroidRuntime(1935):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at libcore.io.IoBridge.connect(IoBridge.java:112)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at java.net.Socket.connect(Socket.java:842)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at com.example.androidbasic12.library.JSONParser.getJSONFromUrl(JSONParser.java:42)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at com.example.androidbasic12.library.UserFunctions.loginUser(UserFunctions.java:38)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at com.example.androidbasic12.MainActivity$1.onClick(MainActivity.java:57)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at android.view.View.performClick(View.java:4202)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at android.view.View$PerformClick.run(View.java:17340)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at android.os.Handler.handleCallback(Handler.java:725)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at android.os.Looper.loop(Looper.java:137)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at java.lang.reflect.Method.invokeNative(Native Method)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at java.lang.reflect.Method.invoke(Method.java:511)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-15 10:12:26.822: E/AndroidRuntime(1935):     at dalvik.system.NativeStart.main(Native Method)` 
```

JSONParser.class：

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);            
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:27:18.777

您正在主 UI 线程中执行网络操作。如果您的目标 SDK 是 11 (Honeycomb) 或更高版本，则会抛出 a `NetworkOnMainThreadException` ，因为此行为可能会阻塞 UI 并导致应用程序无响应。

您必须使用 AsyncTask 通过在其`doInBackground(..)`方法中加载数据来避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:28:20.643

你得到一个`NetworkOnMainThreadException`. 这意味着网络操作正在 UI 线程上完成。自 API 11 以来，这在 android 中是不允许的。

将网络操作移至后台[线程](http://developer.android.com/reference/java/lang/Thread.html)或改用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

本教程可能会有所帮助：

[http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)

# jquery - 修复 iOS 视口以防止“拖动”效果

> ID：14335618
> 
> 赞同：0
> 
> 时间：2013-01-15T10:24:26.967
> 
> 标签：jquery, ios, css

有没有办法在iOS（iPhone和iPad）中“修复”浏览器视口以防止滑动时的背景移动？屏幕将适合 1024x768 横向/纵向尺寸，因此根本不需要滚动..

我需要建立一个培训站点，该站点响应滑动操作来触发功能 - 但是移动的屏幕使这种效果看起来很糟糕！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:10:26.313

您可以尝试捕获并阻止`ontouchmove`整个文档的事件。

HTML：

```
<body ontouchmove="BlockElasticScroll(event);">
    <!-- CONTENT -->
</body> 
```

JS：

```
function BlockElasticScroll(event) {
    event.preventDefault();
} 
```

[您可以使用.on()](http://api.jquery.com/on/)轻松地将其重写为 jQuery，而不是绑定到本机 JS ：

```
$("body").on({
    ontouchmove : function(e) {
        e.preventDefault(); 
    }
}); 
```

（jQuery 代码未经测试）。

我不得不说这种方法在我上次检查时并不是坚如磐石，因为“有时”确实会发生滚动。

您还可以查看**[ScrollFix](https://github.com/joelambert/ScrollFix)**以创建全屏 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T15:19:09.427

如果您将容器/包装器 div(s)（或者甚至是主体，我还没有测试过）设置为`max-width: 100%;`它似乎可以缓解这个问题。

# python - 不同的python版本可以在同一台机器上共存吗

> ID：14335623
> 
> 赞同：0
> 
> 时间：2013-01-15T10:24:36.787
> 
> 标签：python

不同的python版本可以在同一台机器上共存吗

```
/usr/bin/python --version
Python 2.7.2+ 
```

我目前有上述版本，如何在本地为同一个 Ubuntu OS 用户安装最新的 python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:28:12.297

您可以使用内置的包管理器简单地安装最新版本的 Python。它不应覆盖现有版本。看看这张照片。它演示了[Mint Linux](http://www.linuxmint.com/)（基于[Ubuntu](http://www.ubuntu.com/)）可用的包，并表明可以使用默认包管理器安装这两个包。

![突触包管理器](../Images/8ffd73c2b40661a1ad071eecc27f7f17.png)

然后，您可以直接调用 Python3 来运行新版本。

例如

```
Python3 test.py 
```

您也可以对旧版本执行相同的操作。

```
Python2.7 test.py 
```

如果您想确保您的脚本运行的是正确的版本，您可以将以下 shebang 行添加到您的脚本中。

```
#!/usr/bin/env python3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:30:52.883

是的他们可以。很容易。

作为 Ubuntu 用户，您可以从`python3`或新的软件中心应用程序进行安装。这将为所有用户全局安装它。`apt``aptitude`

要安装您自己的自定义 Python 版本，首先要确保您有合适的构建环境可用。安装`build-essentials`.

下载你想玩的 Python 版本的源代码，然后解压。

运行 configure 并`./configure --prefix=/home/yourusername/python/2.xx`替换`xx`您需要的任何版本，然后运行 ​​normal `make`，然后运行`make install`​​.

现在，当你想使用这个自定义版本的 Python 或安装任何包时 - 你需要直接调用它：

像这样：

```
/home/yourusername/python/2.xx/bin/python setup.py install --prefix=/home/yourusername/python/2.xx 
```

如果这一切看起来有点多，您可以使用受和[`pythonbrew`](https://github.com/utahta/pythonbrew)启发的工具。它自动化了大部分任务，并允许在 Python 版本之间轻松切换。`rvm``brew`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:31:06.490

您可以在同一台机器上拥有多个版本的 python。您可以安装在不同的目录中（安装时配置）以保留多个版本。虽然“python”命令只会链接到一个版本，但您可以使用完整的命令运行，即 python2.7 或 python2.6。或者，如果您有可执行脚本，则可以定义要使用的版本

```
 #! /usr/bin/env python2.6 
```

或者

```
`#! /usr/bin/python2.6  # where ever it is installed`. 
```

作为可执行脚本的第一行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:29:08.537

至少对于我的安装来说，还有这个`python3`包。二进制文件具有相同的名称。

```
python3 --version
Python 3.2.3 
```

如果你的意思是共存，你可以同时安装，答案是肯定的。

如果您想要自定义安装，详细信息可能会很混乱，特别是如果您希望两个安装的版本使用相同的包（这对于许多人来说是完全不可能的，因为 ABI 已经改变）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T10:30:35.430

你可以看看这个。`RVM`ruby 的工具是否可以实现您正在寻找的东西`python`

[是否有与 Ruby 的“rvm”等效的 python？](https://stackoverflow.com/questions/2812471/is-there-a-python-equivalent-of-rubys-rvm)：

是的，它是[virtualenv](http://pypi.python.org/pypi/virtualenv)和[virtualenvwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)。

**更新：您可以使用 virtualenv** [burrito](https://github.com/brainsik/virtualenv-burrito)同时安装两者。

# android - 网页上某些缩放级别的边框

> ID：14335633
> 
> 赞同：4
> 
> 时间：2013-01-15T10:25:27.273
> 
> 标签：android, html, ios, css, webpage-rendering

我们的公司网站正在经历一些奇怪的恶作剧。当您在台式电脑或笔记本电脑上查看它时，它在任何浏览器上看起来都很好。但是，当您在移动设备上浏览网站时，您会在 iOS 上的 Safari 和 Android 上的 Chrome 和 Android 2.2 Stock Browser 中的页面元素周围看到这些边框。

在调查问题时，我注意到边框也出现在桌面/笔记本电脑上的 Chrome 上，但仅限于某些缩放级别：

100% 缩放：

![100％的](../Images/26963cc202a99547316fce6e1389731c.png)

110% 缩放：

![110%](../Images/c7e19bb32db94f5a6721fe05bb87a2fa.png)

奇怪的是，在不同的缩放级别中，线条并不一致：

![90%](../Images/1f614add65209a3a9962ff9388e88928.png)

这是在 90% 变焦下拍摄的。

所以澄清一下：我可以通过在笔记本电脑/台式机上放大 Google Chrome 来重现我在移动设备上看到的问题。但是当我在移动设备上加载网站时，我总是看到线条，无论缩放级别是多少。

整个网站通过表格进行布局（是的，我知道......它是很久以前作为 Typo3 中的模板构建的，虽然我们可以对其进行小幅更改，但重建整个模板不是一种选择。但这除了。）所以我认为这可能与表格上的 CSS 规则有关，但似乎没有任何问题。如果这是一个 CSS 问题，那么这些线条在不同的缩放级别上是不是一致的？这是模板的 CSS 文件：[Pastebin](http://pastebin.com/qhnEWVBi)

无论哪种方式，我们都对此感到困惑，不知道是什么导致了问题。如果有人遇到过这样的事情，我们将不胜感激。谢谢。

**编辑：** 刚刚在桌面上的 IE、Firefox 和 Safari 上进行了测试。无论缩放级别是多少，那里都没有边框。

**Edit2：** 根据网站的配色方案，缩放到 500%（桌面上的 Chrome）显示有些线条是蓝色的，有些是白色的，有些是灰色的。它们的长度也不相等，并且当我在网页上滚动时似乎会改变位置（即：向左/向右移动一点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:07:52.777

这听起来类似于[在 iPhone/iPad 上查看时网站上 div 之间的空间/间隙](https://stackoverflow.com/questions/3970787/space-gaps-between-divs-on-website-when-viewed-on-iphone-ipad)（“在 iPad 上，当以低于 100% 的比例查看网站时，有时会出现一些伪影。一个特别明显：1 像素线之间div，就像在您的网站上一样，在菜单下")

该答案的解决方案建议您：

*   禁用缩放（如果您设计用于查看特定尺寸）
*   在元素上有 1px 重叠（例如边距：-1px）

过去，重叠修复对我有用，尽管基于表格的布局可能更难。

# java - Jboss 7 没有创建持久化单元

> ID：14335634
> 
> 赞同：2
> 
> 时间：2013-01-15T10:25:28.107
> 
> 标签：java, spring, hibernate, jboss, persistence

我为我的应用程序使用 Jboss 7、hibernate 4.1.5 FINAL 和 Spring 3.1.2

```
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: Virtuoso] Unable to build EntityManagerFactory
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        ... 3 more

Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.service.jdbc.connections.spi.ConnectionProvider]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:186)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:150)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.buildJdbcConnectionAccess(JdbcServicesImpl.java:223)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:89)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2277)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2273)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1742)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
    ... 9 more

Caused by: org.hibernate.HibernateException: Could not instantiate connection provider [org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider]
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:192)
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.initiateService(ConnectionProviderInitiator.java:114)
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.initiateService(ConnectionProviderInitiator.java:54)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:69)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:176)
    ... 22 more
Caused by: java.lang.ClassCastException: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider cannot be cast to org.hibernate.service.jdbc.connections.spi.ConnectionProvider
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:189)
    ... 26 more 
```

**jboss-部署-结构.xml**

```
<jboss-deployment-structure>
  <deployment>
    <exclusions>
       <module name="org.hibernate"></module>
    </exclusions>

  </deployment>
</jboss-deployment-structure> 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="Virtuoso" transaction-type="RESOURCE_LOCAL" >

    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <non-jta-data-source>java:jboss/datasources/MySqlDS</non-jta-data-source>

    </persistence-unit> 
</persistence> 
```

我不知道我哪里出错了..我的持久单元没有开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:16:28.187

由于您尝试使用打包在应用程序中的 Hibernate 4.x，因此您应该[在 persistence.xml 配置文件](https://docs.jboss.org/author/display/AS71/JPA+Reference+Guide#JPAReferenceGuide-Persistenceunitproperties)`jboss.as.jpa.providerModule`中将属性设置为。`application`

你最好用[更新的版本](https://docs.jboss.org/author/display/AS71/JPA+Reference+Guide#JPAReferenceGuide-ReplacingthecurrentHibernate4.0.xjarswithanewerversion)替换 AS7 中的 Hibernate 4.0 模块。这样，您无需在应用程序中打包 JPA 提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:25:53.427

ejb3-persistence jar 存在于我的 lib 文件夹中，它与 mu hibernate jpa 2.0 jar 冲突。所以我添加了 pom.xml 中提供的范围。在那个类演员异常消失之后。

# meteor - 同一用户的多个登录提供程序？

> ID：14335635
> 
> 赞同：8
> 
> 时间：2013-01-15T10:25:29.910
> 
> 标签：meteor

我刚刚浏览了用户的 MongoDB 集合，它似乎允许单个用户有多个登录提供程序。在我看来，一切似乎都“在那里”：多种服务，不同的简历令牌......

但是目前是否有记录的方法可以将新的登录提供程序与现有用户“关联”？[我在官方文档](http://docs.meteor.com/#accounts_createuser)中找不到任何内容:(

或者在集合“模式”中是否有任何阻止这一点？以防万一，这里是使用“密码”登录服务查找单个用户的方式。

```
{
    "createdAt" : 123456,
    "services" : {
        "password" : {
            "srp" : {
                "identity" : "XXX",
                "salt" : "XXX",
                "verifier" : "XXX"
            }
        },
            "resume" : {
                "loginTokens" : [
                    {
                        "token" : "XXX",
                        "when" : 123456
                    }
                ]
            }
        },
   "emails" : [
        {
            "address" : "foo@example.org",
            "verified" : false
        }
   ],
   "_id" : "7f98645e-df24-4015-8075-2463c6c8cfc5"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T09:47:37.407

在当前版本的流星 (0.8.0.3) 中，无法开箱即用地使用多个登录提供程序。但是[atthmosphere 上有一个包允许这样做](http://atmospherejs.com/package/link-accounts)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:03:58.393

我没有对此进行测试，但据我所知，您可以使用密码登录用户，然后调用`Meteor.loginWithFacebook`，例如，在用户登录时。这应该将 Facebook 信息添加到当前用户的数据中。

# java - 上传 android 图像并在服务器上对其进行操作

> ID：14335636
> 
> 赞同：1
> 
> 时间：2013-01-15T10:25:33.750
> 
> 标签：java, android, webserver

我正在构建一个应用程序，该应用程序将 android 图像（由设备相机捕获）上传到服务器（servlet）。在服务器中，我需要将其作为 BufferdImage（或任何其他 java 类）进行处理。我的问题是 android 中的图像代表 Bitmap 对象，而 BufferdImage 在 android 中不受支持。相反的方向也是问题 - 我无法将位图对象发送到 servlet，因为 java 不支持位图对象。我想强调我需要在服务器端处理图像。

有谁知道我该如何解决这个问题？将图像上传到存储服务器，然后使用图像的 url 也是可以接受的答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:38:56.440

您可以使用它来获取图像数据：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bitmap.compress(CompressFormat.PNG, 0, baos);
byte[] imgData = baos.toByteArray(); 
```

然后使用 HTTPUrlConnection 或您正在使用的任何东西将 imgData 发送到服务器。然后服务器可以读取字节数据并用它构建一个 BufferedImage。

# c# - 使用 WMI 显示在远程计算机上运行的进程

> ID：14335637
> 
> 赞同：1
> 
> 时间：2013-01-15T10:25:36.803
> 
> 标签：c#, wmi, remote-server, wmi-service

我正在使用 WMI 来在远程机器上运行命令。目前，我知道它应该是，正在运行的进程没有显示在遥控器的屏幕上，我只有在打开任务管理器时才能看到它正在运行。

就像我说的，我知道没关系。

我的问题是：有没有办法克服这个问题并强制遥控器显示执行的过程？（例如，当我打开它时查看 calc 的 gui，或者显示记事本或 cmd 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:02:58.690

无法使用 WMI。三种可能的解决方法：

*   psexec（选项 -i）
*   计划任务（您使用 schtasks /create）
*   在旧系统中：在 /interactive

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:02:34.750

尝试使用 WQL ，wmi 查询语言并使用 Win32_Process 。它显示与任务管理器中相同的进程。我在 C++ 中做过（尽管代码有点困难）。

（PS如果你只想运行命令，那么这不适合你）

# javascript - 如何访问 iframe DOM？

> ID：14335638
> 
> 赞同：1
> 
> 时间：2013-01-15T10:25:39.777
> 
> 标签：javascript, jquery, dom, iframe

我只想访问 iframe 中的 DOM。我可以使用以下代码在 Chrome 控制台中显示整个 iframe 定义：

```
$('document').ready(function(){
var toto = window.parent.$("#compare_package")[0];
console.log(toto);
}); 
```

但我找不到访问“#document”内容的解决方案。我试过了 ：

```
var toto = window.parent.$("#compare_package")[0].contentDocument; 
```

或者 ：

```
var toto = window.parent.$("#compare_package")[0].contentWindow; 
```

但它不起作用。有人可以帮助我吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:32:22.910

它仅适用于同源策略

```
// you iframe
<iframe id="some" src=""></iframe>

// bind after iframe content is loaded
$("#some").contents().find('.item'); 
```

# python - 如何在 python 中读取站点 url/ 参数

> ID：14335639
> 
> 赞同：0
> 
> 时间：2013-01-15T10:25:44.733
> 
> 标签：python, flask

好的，所以我有一个 python 应用程序，例如`www.example.com`。假设我点击了一个 url，`www.exmaple.com/function1`那么是否可以`function1`在 python 应用程序中读取

这是我的python代码

```
import os
from flask import Flask

app = Flask(__name__)

@app.route('/')

def hello():
    return 'Hello World --  jay!'

@app.route('/fun')
def fun():
    return 'have func!'

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:07:26.120

尝试这个：

```
@app.route('/<func>')
def fun(func):
    return 'have func :' + func + "!" 
```

# objective-c - 这如何导致死锁（偶尔）以及我如何解决这个问题

> ID：14335640
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:25:47.057
> 
> 标签：objective-c, xcode4.5

```
@synchronized (self.class)     {
    fetchedObjects = [moc executeFetchRequest:request error:&error];
} 
```

moc 是一个 managedObjectContext

可以是主线程对应的moc。该 moc 是所有 MOC 的父级。

其他 moc 只是孩子。有时当孩子执行executeFetchRequest时，它也会让父moc执行相同的executeFetchRequest。

我经常看到的是

外主线程：

```
@synchronized (self.class)     {
    fetchedObjects = [moc executeFetchRequest:request error:&error]; //semaphore_wait_trap here
} 
```

在主线程上

```
@synchronized (self.class)     {//_psynch_mutexwait
    fetchedObjects = [moc executeFetchRequest:request error:&error];
} 
```

好吧...为什么会出现僵局？即使主线程上的 moc 对应于主线程，它根本没有被访问。它在@synchronized 处等待。那为什么要`fetchedObjects = [moc executeFetchRequest:request error:&error];`等呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:14:29.413

你不应该 @synchronize-ing 调用 executeFetchRequest：

> > > 该`executeFetchRequest:error:`方法本质上会根据硬件和工作负载适当地调整其行为。如有必要，Core Data 将创建额外的私有线程以优化获取性能。您不会为此目的创建后台线程来提高绝对获取速度。但是，在后台线程或队列中获取可能仍然是合适的，以防止应用程序的用户界面阻塞。这意味着，如果提取复杂或返回大量数据，您可以将控制权返回给用户并在结果到达时显示结果。
> > > 
> > > [核心数据编程指南：并发](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)

基本上，如果您要返回大量对象并处理它们，最好从私有队列上下文中执行此操作（因为您可以使用该私有队列上的返回对象并从主队列中处理它们）。

如果您有主队列上下文，请仅从主队列中使用它。

此外，子上下文通过将获取请求传递给其父级来执行获取请求。发生的事情（据我所知）是谓词在持久存储（SQL）上以及链中每个 MOC 中未保存的对象上进行评估。这意味着，如果您覆盖谓词中使用的 getter，它将在内存中那些未保存的对象上调用（而 SQL 谓词使用原始 DB 值进行比较）。您可以通过阻止子上下文的队列来死锁父上下文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T10:42:59.483

moc 持有自己的锁，所以你有一个锁中的锁 - 现在当 t1 到来时，他获得锁 1 但可能没有锁，因为有人已经在获取并且拥有 lock2 但那个被 t1 阻塞（它正在等待）

# java - 使用 log4j 进行 restlet 日志记录

> ID：14335644
> 
> 赞同：4
> 
> 时间：2013-01-15T10:25:50.307
> 
> 标签：java, log4j, restlet, slf4j

直到昨天，我还是 restlet 2.0.15 的快乐用户，当时他们似乎已经从他们的 Maven 存储库中停止了 2.0.x 版本，所以我不得不升级到 2.1.1。

在旧版本中，我使用 SLF4J 作为 Log4J 的桥梁，并且能够将 restlet 日志获取到基于 Log4J 的日志系统。这不再适用于 restlet 2.1.1。有什么想法我需要解决吗？

这是它的工作方式：

```
public static void initLogging() {
    // install the SL4J bridge such as the org.restlet logging messages to
    // be appended to Log4J too, from the default java.util.logging based
    // implementation
    SLF4JBridgeHandler.install();
    ...
    if (log4j != null) {
        DOMConfigurator.configure(log4j);
    }
    log = Logger.getLogger(SomeClass.class);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:46:35.163

本周末我们遇到了硬件故障，我们将逐步恢复 Maven 存储库中的 2.0.x 工件（最高版本 2.0.10 已经可用）。

然而，2.0 分支已经到了生命的尽头，所以升级到 2.1.1 绝对是个好主意。

据我所知，自 2.0 以来，SLF4J 扩展根本没有改变，只调整了日志级别并添加了 JULI 的编程控制。它可能破坏了某些东西。

你能在 GitHub 中输入问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:36:48.577

我发现它适用于 slf4j restlet 扩展和这一行：

```
System.setProperty("org.restlet.engine.loggerFacadeClass", "org.restlet.ext.slf4j.Slf4jLoggerFacade"); 
```

代替

```
SLF4JBridgeHandler.install(); 
```

# vb.net - SSIS 2005 - 使用脚本任务导入 excel 文件

> ID：14335645
> 
> 赞同：0
> 
> 时间：2013-01-15T10:25:51.483
> 
> 标签：vb.net, ssis

需要在 SSIS 2005 中使用脚本任务上传 excel 文件。有人可以帮忙，提供代码。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:44:33.543

我总是为此使用 OLEDB，最近我在这里用一个代码示例回答了这个问题......

[阅读 Excel 表格的最佳最快方法](https://stackoverflow.com/questions/14261655/best-fastest-way-to-read-an-excel-sheet-into-a-datatable/14262618)

我一直认为它是最好的方法，主要是因为使用带有 Excel 源的数据流任务不允许您更改 Excel 或验证其内容。

# android - 锁定问题

> ID：14335646
> 
> 赞同：1
> 
> 时间：2013-01-15T10:25:52.080
> 
> 标签：android

我想在按钮单击时锁定应用程序的屏幕

我已将代码编写为

```
public class MainActivity extends DeviceAdminReceiver{

public void makeTest()
{
    System.out.println("Entered Main Class");
}
public class Controller extends Activity {

static final int RESULT_ENABLE = 1;
Button powerOff;
int amountOfTime =20*1000;
Context context = this;
DevicePolicyManager mDPM;
ActivityManager mAM;
ComponentName mDeviceAdminSample;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    System.out.println("Enterd inner Class");
    mDPM = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
    mAM = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
    mDeviceAdminSample = new ComponentName( Controller.this,MainActivity.class);

    powerOff = (Button)findViewById(R.id.button1);
    powerOff.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
              System.out.println("Entered Button Click");
              mDPM.lockNow();

                Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
                intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,
                        mDeviceAdminSample);
                intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,
                        "Additional text explaining why this needs to be added.");
                startActivityForResult(intent, RESULT_ENABLE);

        }
    });

} 
```

它显示了 logcat 输出的某些错误

```
 01-15 15:51:12.043: E/AndroidRuntime(8148): FATAL EXCEPTION: main
 01-15 15:51:12.043: E/AndroidRuntime(8148): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.screenlock/com.example.screenlock.MainActivity}: java.lang.ClassCastException: com.example.screenlock.MainActivity cannot be cast to android.app.Activity
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2121)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.os.Handler.dispatchMessage(Handler.java:99)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.os.Looper.loop(Looper.java:156)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.app.ActivityThread.main(ActivityThread.java:4987)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at java.lang.reflect.Method.invokeNative(Native Method)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at java.lang.reflect.Method.invoke(Method.java:511)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at dalvik.system.NativeStart.main(Native Method)
 01-15 15:51:12.043: E/AndroidRuntime(8148): Caused by: java.lang.ClassCastException: com.example.screenlock.MainActivity cannot be cast to android.app.Activity
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2112)
 01-15 15:51:12.043: E/AndroidRuntime(8148):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:30:27.553

`DeviceAdminReceiver`延长`Activity`吗？如果不是，则日志表明这是您的问题。

编辑：正如可以看到[这里](http://developer.android.com/reference/android/app/admin/DeviceAdminReceiver.html) `DeviceAdminReceiver`是一个`BroadcastReciever`不是一个`Activity`。您的`MainActivity`类必须扩展`Activity`或子类，`Activity`以便系统可以运行它。

# php - 如果页面父级等于 ID（数字）？

> ID：14335648
> 
> 赞同：5
> 
> 时间：2013-01-15T10:26:01.987
> 
> 标签：php, wordpress

我有一个 if 语句正在检查页面的 ID，使用以下内容：

```
<?php if ( is_page(10) ) { ?> 
```

如果页面父级为 10，我该怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T10:30:20.200

尝试这样的事情

```
global $post;

if ($post->post_parent == 10) {
   echo "parent's id is 10";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-20T05:15:03.763

```
$id = wp_get_post_parent_id( get_the_id() ); 
```

现在`$id`有父页面ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:29:49.190

获取当前页面对象，然后获取其父 ID：

```
global $wp_query;

$currentPage = get_page($wp_query->get_queried_object_id());

if (is_page($currentPage['post_parent'])) {

} 
```

# java - 使用正确的凭据访问基于 REST 的 Web 服务时的响应代码 401

> ID：14335651
> 
> 赞同：0
> 
> 时间：2013-01-15T10:26:09.443
> 
> 标签：java, web-services, rest

访问 RESTful Web 服务时出现未经授权的错误。我的示例程序如下所示。

```
public static void main(String[] args){
        // Use apache commons-httpclient to create the request/response
        HttpClient client = new HttpClient();
        Credentials defaultcreds = new UsernamePasswordCredentials("aaa", "cdefg");
        client.getState().setCredentials(AuthScope.ANY, defaultcreds);

        GetMethod method = new GetMethod(
                "http://localhost:8080/userService/usersByID/1234");
        try {
            client.executeMethod(method);
            InputStream in = method.getResponseBodyAsStream();
            // Use dom4j to parse the response and print nicely to the output stream
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            StringBuilder out = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                out.append(line);
            }
            System.out.println(out.toString());
        } catch (IOException e) {
            e.printStackTrace();
        } 
    } 
```

我的凭据是正确的。我的 Web 服务将使用基本 Http 身份验证。

我对认证范围有疑问。

```
client.getState().setCredentials(AuthScope.ANY, defaultcreds); 
```

我的凭据是正确的。

任何人都可以帮助解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:30:42.793

首先通过浏览器检查您的网址并验证？？正如这里提到的

修复 401 错误 - 常规

```
Each Web Server manages user authentication in its own way. A security officer (e.g. a Web Master) at the site typically decides which users are allowed to access the URL. This person then uses Web server software to set up those users and their passwords. So if you need to access the URL (or you forgot your user ID or password), only the security officer at that site can help you. Refer any security issues direct to them.

If you think that the URL Web page *should* be accessible to all and sundry on the Internet, then a 401 message indicates a deeper problem. The first thing you can do is check your URL via a Web browser. This browser should be running on a computer to which you have never previously identified yourself in any way, and you should avoid authentication (passwords etc.) that you have used previously. Ideally all this should be done over a completely different Internet connection to any you have used before (e.g. a different ISP dial-up connection). In short, you are trying to get the same behaviour a total stranger would get if they surfed the Internet to the Web page.

If this type of browser check indicates no authority problems, then it is possible that the Web server (or surrounding systems) have been configured to disallow certain patterns of HTTP traffic. In other words, HTTP communication from a well-known Web browser is allowed, but automated communication from other systems is rejected with an 401 error code. This is unusual, but may indicate a very defensive security policy around the Web server. 
```

**手动修复**

从浏览器中点击 url 并记录 HTTP 流量（Headers,body）

运行 Java 客户端代码并记录 HTTP 流量（Headers,body）

分析并修复差异

# c# - ASP.Net 页面加载更新更新面板

> ID：14335657
> 
> 赞同：0
> 
> 时间：2013-01-15T10:26:21.043
> 
> 标签：c#, javascript, ajax, asp.net-mvc

我是 AJAX 的新手，想知道我是否以正确的方式处理事情。

我正在构建的页面实际上只是一个进度页面。即从页面加载调用一个进程，我向页面添加一条消息以显示结果，然后另一个进程运行，我为该进程的结果添加一条新消息等，最多 10 个进程可以按顺序运行并且有没有用户交互。我不想在每次更新消息后屏幕闪烁，所以我想到了 Ajax

我实现这一目标的方式似乎很奇怪......

*   `UpdatePanel`带有隐藏按钮的设置
*   在页面加载后创建`ClientScriptManager`代码以调用 Javascript 函数（第一次）
*   '单击' Javascript 函数中的按钮
*   `Button_Click`在方法后面的 C# 代码上执行第一个过程
*   使用`ClientScriptManager`c# 中`Invoke`的 Javascript 再次单击按钮
*   `Button_Click`在方法后面的 C# 代码上做下一个 Process

我宁愿在 C# 页面加载时启动进程并在`UpdatePanel`不闪烁的情况下更新它。！

* *** *这是我的最新代码，使用您的建议与睡眠线程模拟将要发生的过程，但它不会实时更新....即重新计算报价和存储数据在两条指令完成后出现。

```
 Literal literal1 = new Literal();
            literal1.Text = "Recalculating Quotation <br/>";
            literal1.ID = "Message1";
            updpnlSubmit.ContentTemplateContainer.Controls.Add(literal1);
            updpnlSubmit.Update();

            Thread.Sleep(10000);

            Literal literal2 = new Literal();
            literal2.Text = "Storing Data<br/>";
            literal2.ID = "Message2";
            updpnlSubmit.ContentTemplateContainer.Controls.Add(literal2);
            updpnlSubmit.Update(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:38:59.660

1.  将更新面板拖放到页面上并将其更新模式设置为有条件
2.  在更新面板中，为您的处理消息放置一个标签/文字控件
3.  在 pageLoad 事件中执行每个进程并显示一条状态消息，然后从代码隐藏更新您的 updatePanel，例如

4.  删除 UpdateProgress 以在处理时显示进度图像

    ```
     if (Process1())
      lblStatus.Text = " Process 1 completed.;
     UpdatePanel1.Update();

     // Do this for Process 2

     // Do this for Process 3 etc. 
    ```

我唯一的问题是，如果进程 2 依赖于进程 1 并且失败了怎么办？您必须自己管理回滚。同样，这只是原始的，但你明白了。

# c# - 自定义从 ListItemCollection 生成的列表视图中的控件名称

> ID：14335660
> 
> 赞同：0
> 
> 时间：2013-01-15T10:26:27.497
> 
> 标签：c#, wpf, wpf-controls

我有一个 ListView，它的表格中填写了我正在以编程方式创建和管理的 ListItemCollection。

我想检查哪些控件收到了任何类型的输入，目前我专注于任何类型的 TextInput。我不知道如何准确地找到该控件来自哪一列和哪一行（按名称或 ID，以最简单的为准）。

在通常的 Windows 窗体应用程序中，解决此问题的方法是以编程方式为每个控件分配一个唯一名称。用模板如`[control name]_[row]`，如`itemName_1`。

似乎无法修改由 ListItemCollection 生成的控件的名称。我还尝试使用 绑定控件`Path="x"`，但是 XAML 阻止使用带有 name 属性的绑定标记。

这个问题有什么好的解决方案，我可以以某种方式检测与哪个确切的控件交互，而无需搜索所有控件？

这是我现在拥有的（在图片中只创建了一行）： ![在此处输入图像描述](../Images/1791c2db1b62cec91951d04c9d997a34.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:52:35.593

这里的问题是您以 WinForms 方式使用 WPF。它不应该那样使用，所以你最终会做错综复杂和虚假的事情。

这是你应该做的：

假设我们正在处理一个包含订单详细信息的订单。

我们首先创建类来保存我们的数据

```
public class Order : INotifyPropertyChanged
{
   private readonly ObservableCollection<OrderDetail> m_details = new ...

   public ObservableCollection<OrderDetail> Details { get { return m_details; } }

   public decimal Total {
     get {
       decimal total = 0.0;
       foreach(var detail in m_details) total += detail.SubTotal;
       return total;
     }
   }
}

public class OrderDetail : INotifyPropertyChanged
{
   private readonly Order m_order;

   public OrderDetail(Order order) {
     m_order = order;
   }       

   private string m_name;
   public string Name
   {
     get { return m_name; }
     set {
       if(m_name != value) {
         m_name = value;
         RaisePropertyChanged("Name");
       }
     }
   }
   private int m_amount;
   public int Amount {
     get { return m_amount; }
     set {
       if(m_amount != value) {
         m_amount = value;
         RaisePropertyChanged("Amount");
         RaisePropertyChanged("SubTotal");
         m_order.RaisePropertyChanged("Total");
       }
     }
   }
   private decimal m_unitPrice;
   public decimal UnitPrice {
     get { return m_amount; }
     set {
       if(m_unitPrice!= value) {
         m_unitPrice = value;
         RaisePropertyChanged("UnitPrice");
         RaisePropertyChanged("SubTotal");
         m_order.RaisePropertyChanged("Total");
       }
     }
   }
   public decimal SubTotal { get { return Amount * UnitPrice; } }
} 
```

然后我们将创建一个视图来可视化和编辑我们的数据

```
...
<ListView ItemsSource="{Binding MyOrder}">
  <ListView.View>
    <GridView>
      <GridViewColumn>
        <GridViewColumn.CellTemplate>
          <DataTemplate>
            <TextBox Text="{Binding Name}"/>
          </DataTemplate>
        </GridViewColumn.CellTemplate>
      </GridViewColumn>
      ...
    </GridView>
  </ListView.View>
</ListView>
<StackPanel Orientation="Horizontal">
  <TextBlock Text="Total: "/>
  <Textblock Text="{Binding MyOrder.Total}"/>
</StackPanel>
... 
```

# java - Java：获取给定日期范围内每 3 个月的第一周的天数

> ID：14335667
> 
> 赞同：0
> 
> 时间：2013-01-15T10:26:47.623
> 
> 标签：java, date, calendar

例如：日期范围是从 2013 年 1 月 3 日到 2013 年 10 月 3 日。在上述范围内，获取每 3 个月第一周的所有工作日。结果将是这样的：

```
Thu Jan 03 00:00:00 ICT 2013
Fri Jan 04 00:00:00 ICT 2013
Sat Jan 05 00:00:00 ICT 2013
Sun Jan 06 00:00:00 ICT 2013
Mon Jan 07 00:00:00 ICT 2013
Mon Apr 01 00:00:00 ICT 2013
Tue Apr 02 00:00:00 ICT 2013
Wed Apr 03 00:00:00 ICT 2013
Thu Apr 04 00:00:00 ICT 2013
Fri Apr 05 00:00:00 ICT 2013
Sat Apr 06 00:00:00 ICT 2013
Sun Apr 07 00:00:00 ICT 2013
Mon Jul 01 00:00:00 ICT 2013
Tue Jul 02 00:00:00 ICT 2013
Wed Jul 03 00:00:00 ICT 2013
Thu Jul 04 00:00:00 ICT 2013
Fri Jul 05 00:00:00 ICT 2013
Sat Jul 06 00:00:00 ICT 2013
Sun Jul 07 00:00:00 ICT 2013
Tue Oct 01 00:00:00 ICT 2013
Wed Oct 02 00:00:00 ICT 2013 
```

我已经想出了一种方法，但是代码看起来很丑，所以我想知道是否有任何方法会更优雅？谢谢你的帮助，我真的很感激。

```
// set up the startCal and endCal
String fmtShowTime = "ddMMyy"; // TODO: move to configurations
SimpleDateFormat sdf = new SimpleDateFormat(fmtShowTime);
TimeZone defaultZone = TimeZone.getDefault();
sdf.setTimeZone(defaultZone);
String fromTime = "030113";
String toTime = "031013";
Date startDate = sdf.parse(fromTime);
Date endDate = sdf.parse(toTime);
Calendar startCal = Calendar.getInstance();
startCal.setTime(startDate);
Calendar endCal = Calendar.getInstance();
endCal.setTime(endDate);

// set up the condition for week and month
Integer week = Integer.parseInt("1"); // first week
Integer monthPeriod = Integer.parseInt("3"); // every 3 months
Integer counter = 0;

while (startCal.getTimeInMillis() < endCal.getTimeInMillis()) {
    if (startCal.get(Calendar.DAY_OF_WEEK_IN_MONTH) == week) {
        // check if the current day in loop is the day of first week in month
        if (monthPeriod == 1)  {
            // get for every month
            for (int i = 0; i < 7; i++) {
                    if (startCal.get(Calendar.DAY_OF_WEEK_IN_MONTH) != week || startCal.getTimeInMillis() == endCal.getTimeInMillis()) {
                        // break for case like Tuesday, January 8th (2nd Tuesday of January) or October 4th (range breached) 
                        break;
                    }
                    System.out.println(startCal.getTime());
                    // move 1 more day
                    startCal.add(Calendar.DAY_OF_MONTH, 1);
            }
        }
        else {
            counter++;
            if (counter % monthPeriod == 1) {
                // I used counter mod monthPeriod to check if 3 months has passed in the loop, 1%3 = 1, 4%3 = 1 and so on
                for (int i = 0; i < 7; i++) {
                    if (startCal.get(Calendar.DAY_OF_WEEK_IN_MONTH) != week || startCal.getTimeInMillis() == endCal.getTimeInMillis()) {
                        // break for case like Tuesday, January 8th (2nd Tuesday of January) or October 4th (range breached)  
                        break;
                    }
                    System.out.println(startCal.getTime());
                    // move 1 more day
                    startCal.add(Calendar.DAY_OF_MONTH, 1);
                }
            } else {
                //if it's the first week of a month but not 3 months has passed yet then I forward 7 days to pass the check for first week of the month
                startCal.add(Calendar.DAY_OF_MONTH, 7);
            }
        }
    }
    startCal.add(Calendar.DAY_OF_MONTH, 1);
} 
```

PS对不起，如果代码让你眼睛受伤，我知道这很糟糕:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:07:09.363

查看我的解决方案

```
 GregorianCalendar c1 = new GregorianCalendar(2013, 0, 3);
    GregorianCalendar c2 = new GregorianCalendar(2013, 9, 3);
    while (c1.before(c2)) {
        if (c1.get(Calendar.WEEK_OF_MONTH) == 1 && c1.get(Calendar.MONTH) % 3 == 0) {
            System.out.println(c1.getTime());
        }
        c1.add(Calendar.DAY_OF_MONTH, 1);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:32:04.883

目前还不清楚是否应该包括周末。但是，根据我对您的要求的最佳猜测，我认为这是可行的：

```
public class DateIntervalDayParser {

    // Test harness
    public static void main(final String[] args) throws Exception {
        final int monthInterval = 3;
        final int daysFromStartOfMonth = 7;

        final DateIntervalDayParser parser = new DateIntervalDayParser();
        final List<Date> allWeekdays = parser.getWeekdays(
                new GregorianCalendar(2013, 0, 15), new GregorianCalendar(2013, 9, 15), monthInterval, daysFromStartOfMonth);

        for (final Date weekday : allWeekdays) {
            System.out.println(weekday);
        }
    }

    private List<Date> getWeekdays(final Calendar start, final Calendar end, final int monthInterval, int daysFromStartOfMonth)
    {
        // Start result list
        final List<Date> allWeekdays = new ArrayList<Date>();

        adjustStart(start, daysFromStartOfMonth);

        // Continue until start time has passed end time
        while (isMonthBeforeOrEqual(start, end)) {
            addWeekdays(allWeekdays, start, daysFromStartOfMonth);

            // Add month interval
            // NOTE: always set day of month to 1st day of month after 1st month
            start.set(Calendar.DAY_OF_MONTH, 1);
            start.add(Calendar.MONTH, monthInterval);

            // If we are in the last month, set last day of month maximum to last
            // months day if it is less than a week from the start of the month
            if (start.get(Calendar.YEAR) == end.get(Calendar.YEAR)
                    && start.get(Calendar.MONTH) == end.get(Calendar.MONTH)
                    && end.get(Calendar.DAY_OF_MONTH) < daysFromStartOfMonth) {
                daysFromStartOfMonth = end.get(Calendar.DAY_OF_MONTH);
            }
        }

        return allWeekdays;
    }

    private void adjustStart(final Calendar start, int daysFromStartOfMonth) {
        // If day of month in 1st month has passed max days from start of month,
        // start from the start of the next month
        if (start.get(Calendar.DAY_OF_MONTH) > daysFromStartOfMonth) {
            start.set(Calendar.DAY_OF_MONTH, 1);
            start.add(Calendar.MONTH, 1);
        }
    }

    private boolean isMonthBeforeOrEqual(final Calendar start, final Calendar end) {
        boolean beforeOrEqual = false;
        final int startYear = start.get(Calendar.YEAR);
        final int endYear = end.get(Calendar.YEAR);
        if (startYear < endYear) {
            beforeOrEqual = true;
        } else if (startYear == endYear) {
            beforeOrEqual = start.get(Calendar.MONTH) <= end.get(Calendar.MONTH);
        }
        return beforeOrEqual;
    }

    private void addWeekdays(final List<Date> days, final Calendar calendar, final int daysFromStartOfMonth) {
        // Add dates until day of month is exceeded
        int dayOfMonth = calendar.get(Calendar.DAY_OF_MONTH);
        while (dayOfMonth <= daysFromStartOfMonth) {
            days.add(calendar.getTime());

            // Increment
            calendar.add(Calendar.DAY_OF_MONTH, 1);
            dayOfMonth++;
        }
    }
} 
```

在一般情况下。我鼓励你将你的逻辑分解成更小更易于管理的方法。您不仅可以更轻松地重用此类代码，而且还可以降低其复杂性，使维护更容易。

# php - 用php连接oracle数据库并执行sql？

> ID：14335668
> 
> 赞同：0
> 
> 时间：2013-01-15T10:26:57.253
> 
> 标签：php, sql, oracle

大家好，我正在尝试使用 php 连接到 oracle 数据库。我试过了，就像我用 mysql 做的一样。如何做到这一点：

```
$host="localhost";
$user="username";
$pass="password";
$db="database";

$link = mysql_connect($host, $user, $pass) or die ("Keine Verbindung zu der Datenbank moeglich.");

mysql_select_db($db, $link);

$sql = "SQL query goes here";

$result = mysql_query($sql); 
```

我怎样才能用 oracle 数据库做到这一点。我有以下连接细节 `sid, ip, port, username, password`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:31:46.677

简单的脚本：

```
$DB = '//1.2.3.4:1521/XE';
$DB_USER = 'user';
$DB_PASS = 'pass';
$DB_CHAR = 'AL32UTF8';

$conn = oci_connect($DB_USER, $DB_PASS, $DB, $DB_CHAR);
$statement = oci_parse($conn, 'select 1 from dual');
oci_execute($statement);
$row = oci_fetch_array($statement, OCI_ASSOC+OCI_RETURN_NULLS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:30:59.697

要连接 Oracle 数据库，不要使用 mysql 扩展（因为它是用于 MySQL）。您应该使用带有[OCI/Oracle 适配器](http://php.net/manual/en/ref.pdo-oci.php)的 PDO 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:31:33.127

您需要使用 PDO 连接到 Oracle，这里是关于使用 PDO 创建连接的[PHP 手册页](http://php.net/manual/en/pdo.construct.php)，给出的示例适用于 MySQL，但它适用于 Oracle。您需要确保 PDO:Oracle 扩展已安装并在您的 PHP 配置上运行。

# .net - EF4 DbContext：如何集中审核数据库读取

> ID：14335669
> 
> 赞同：0
> 
> 时间：2013-01-15T10:27:05.653
> 
> 标签：.net, entity-framework, dbcontext, audit

我知道我知道。为什么会有人想要这样做？该应用程序已经审核了对数据的更改，但现在企业也希望审核所有读取（我不得不说，没有令人信服的用户故事）。我已经给了他们所有反对的论据，但他们坚持。

那么 EF/DbContext 是否提供了一个扩展点，适用于拦截从数据库返回的所有记录并在审计跟踪中写入条目？还是有另一种明智的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:35:17.420

您可以使用[ObjectContext.ObjectMaterialized](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.objectmaterialized.aspx)。MSDN 片段：

> 在作为查询或加载操作的一部分从数据源中的数据创建新实体对象时发生。
> 
> 在对象上设置了所有标量、复杂和引用属性之后，但在加载集合之前引发此事件。如果对象上下文中存在具有相同键值的对象，实体框架将**不会重新创建该对象，也不会引发此事件**。

但这只会跟踪通过您的 EF 实现从 Db 读取的项目。

# java - 在 Spring Web Flow 2 中进行状态验证后，无效或丢弃历史记录不起作用

> ID：14335670
> 
> 赞同：3
> 
> 时间：2013-01-15T10:27:13.450
> 
> 标签：java, spring, spring-webflow, spring-webflow-2

我已经通过以下方式在我的流程中配置了回溯：

```
<view-state id="step1" model="step1Model" >
 <transition on="next" to="step2" history="invalidate">
 </transition>
</view-state>

<view-state id="step2" model="step2Model" >
 <transition on="next" to="xxxx" history="invalidate">
 </transition>
</view-state> 
```

此外，我正在使用实现模型验证方法的程序验证，方法与您在文档（[链接](http://static.springsource.org/spring-webflow/docs/2.3.1.RELEASE/reference/htmlsingle/spring-webflow-reference.html#view-validation-programmatic)）中阅读的方式相同。

当模型验证没有任何错误时，回溯配置正常工作，在这种情况下，如果您按下浏览器的后退按钮，流程将按照预期重新加载。

问题是当模型出现一些错误时，验证不会让您进入下一步，在这种情况下，如果您按下浏览器后退按钮，您会看到浏览器错误页面“文档已过期。此文档不再可用” .

对此有任何想法吗？

谢谢，杰拉尔多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:55:40.670

问题是您在每一步都使历史记录无效。如果您使用最终状态来清除历史记录会更好。

```
<view-state id="step1" model="step1Model" >
 <transition on="next" to="step2">
 </transition>
</view-state>

<view-state id="step2" model="step2Model" >
 <transition on="next" to="end">
 </transition>
</view-state>

<end-state id="end" /> 
```

# windows-phone-8 - 在 wp8 中向 Mapoverlay 添加自定义工具提示

> ID：14335678
> 
> 赞同：2
> 
> 时间：2013-01-15T10:27:34.233
> 
> 标签：windows-phone-8

我的 wp8 应用程序动态创建地图对象并添加与 MapOverlays 的协调。我需要每个位置的工具提示，以便能够显示地名并通过点击工具提示内的文本或按钮导航到网页。有一些使用静态图钉的示例，但我找不到使用 mapoverlay 完成此操作的示例。请你帮帮我。

```
Image pinIMG2 = new Image();
                pinIMG2.Source = new System.Windows.Media.Imaging.BitmapImage(new Uri("pin2.png", UriKind.Relative));
                pinIMG2.Stretch = System.Windows.Media.Stretch.None;

    MapOverlay myLocationOverlay = new MapOverlay();
                    myLocationOverlay.Content = pinIMG2;
                    myLocationOverlay.PositionOrigin = new Point(0.5, 0.5);
                    myLocationOverlay.GeoCoordinate = new GeoCoordinate(57.724611, 12.938945);

    MapLayer myLocationLayer = new MapLayer();
    myLocationLayer.Add(myLocationOverlay);
    MyMap.Layers.Add(myLocationLayer); 
```

# scala - 使用 Scala Manifest 动态实例化对象

> ID：14335680
> 
> 赞同：0
> 
> 时间：2013-01-15T10:27:42.427
> 
> 标签：scala, manifest

我想知道是否可以`object`使用`Manifest`. 我想在 MongoRecord 中解析 json，但要这样做，我必须了解传递的类型。

```
def getCompanion[T](implicit mf : Manifest[T])={
    if (mf <:< classOf[MongoRecord[C]]){
       Class[C].asInstanceOf[MongoRecord].setFieldsFromJSON(request.body.toString)
    }

} 
```

但我在编译过程中收到错误消息：

> 错误：对象类不是值 Class[C].asInstanceOf[MongoRecord].setFieldsFromJSON(request.body.toString)

这对我来说是一个困难的话题。也许这不可行，但我想知道是否可行？谢谢

# java - JFreeChart 中是否可以有两个（X 和 Y）CategoryAxes？

> ID：14335681
> 
> 赞同：1
> 
> 时间：2013-01-15T10:27:43.810
> 
> 标签：java, jfreechart

我正在 JFreeChart 中创建一个相关矩阵。我几乎完成了，只是两个轴都有数值（例如：1 到 20）。我使用 DefaultXYZDataset 和一个自定义的 BlockRenderer 以及一个重写的 PaintScale 类。值 z 本身由 ([1 到 20], [1 到 20]) 中 (x,y) 位置处的填充矩形的颜色表示。

是否可以用字符串（例如名称 [i]）替换 X 和 Y 上的轴标签？为此，我是否将 NumberAxes 更改为 CategoryAxes？两个轴都需要是分类的，因为我需要像（“ParameterA”，“ParameterB”）这样的坐标。我想那时我需要一个特殊的渲染器，并且必须修改整个代码。乍一看，这甚至是不可能的。我没有找到适合该任务的数据集。

或者我可以简单地更改某种刻度标签格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:46:59.890

[`SymbolAxis`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/SymbolAxis.html)，如图所示[，](https://stackoverflow.com/a/12839170/230513)是一个`NumberAxis`并且可能是一个合适的选择。

![图片](../Images/9d26eb3b22100a38253c5cb69e3b5fc4.png)

# objective-c - 如何在 didFinishLaunchingWithOptions 中测试 UILocalNotification

> ID：14335688
> 
> 赞同：7
> 
> 时间：2013-01-15T10:28:03.887
> 
> 标签：objective-c, debugging, uilocalnotification

我想测试当应用程序退出并且用户在通知中心点击通知以启动我的应用程序时我的应用程序的行为。`- didFinishLaunchingWithOptions`您可以检查密钥，`UILocalNotification *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];`但我该如何调试呢？

如果我开始在 Xcode 中运行应用程序，然后我退出应用程序，它将失去与 Xcode 的连接。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-23T10:59:55.687

如果您将 Xcode 方案设置为手动启动（编辑方案 > 运行 > 信息），那么您可以在安排好`UILocalNotification`.

然后，如果您再次运行您的应用程序，它不会启动，直到您从模拟器/设备启动它。

然后您可以等待通知触发并单击通知，然后启动您的应用程序（手动！）。这样你就可以`UILocalNotification`从`launchOptions``application:didFinishLaunchingWithOptions:`

请注意，对于调试，您可能希望`UILocalNotification`在未来安排大约 10 秒左右的日期，调试与时间相关的东西总是很痛苦。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:49:16.123

让您的应用程序在后台运行，连接到`xcode`调试**模式**，并让一个本地通知到达，然后转到通知中心并单击该通知并`didReceiveLocalNotification:`调用该函数。

应用程序完全关闭时到达本地通知的唯一区别是您必须在 didFinishLaunchingWithOptions 中编写代码（您可以复制粘贴为`didReceiveLocalNotification:`函数编写的相同代码）并且`didReceiveLocalNotification:`不会被调用。

希望这些信息对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:37:47.557

`didFinishLaunchingWithOptions:`在您启动应用程序之前，不会调用该方法。但是关闭您的应用程序不会使您的应用程序失去与 xcode 的连接，因为您的应用程序进入后台。

也许我错过了一些东西，但您实际上可以在您的设备中运行您的应用程序，然后按照您的意愿继续。

`didFinishLaunchingWithOptions:`如果日志仍然不起作用，您也可以尝试此代码。

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"options" message:[launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey] description] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    return YES; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:18:33.147

可能这是一个愚蠢的答案。:)

我通常在那里放一个**UIAlertView**。并根据本地通知在 alertview 中设置文本。

另一个是退出应用程序。将一些 NSLog 放在**applicationDidFinishLaunching**中。退出应用程序。转到**Xcode->Organiser**。**然后在“设备**”选项卡下选择您的设备。选择选项**控制台**。你可以在那里看到日志。

希望这可能会有所帮助。

# javascript - 点击事件不起作用

> ID：14335691
> 
> 赞同：1
> 
> 时间：2013-01-15T10:28:11.457
> 
> 标签：javascript, jquery, mediaelement.js, mediaelement

我正在使用 mediaelement.js 播放音频文件。我要做的是跟踪第一次按钮点击并将其发送到谷歌分析，然后替换元素类，这样第二次点击就不会发送到 GA。这是代码：

```
$(function () {
    $(".aud-not-played .mejs-play").click(function () {
        $('.aud-not-played').attr('class', 'aud-played');
        setTimeout("_gaq.push(['_trackEvent', 'Audio', 'Play', 'audtitle'])", 10000);
    })
}); 
```

和 HTML 代码：

```
<div class="aud-not-played">
  <div id="mep_0" class="mejs-container svg  mejs-audio " style="width: 600px; height: 30px;">
    <div class="mejs-inner">
      <div class="mejs-mediaelement">
        <audio src="http://users.skynet.be/fa046054/home/P22/track06.mp3" style="display: none;">

        </audio>
      </div>
      <div class="mejs-layers">
        <div class="mejs-poster mejs-layer" style="display: none; width: 600px; height: 30px;">
        </div>
      </div>
      <div class="mejs-controls">
        <div class="mejs-button mejs-playpause-button mejs-play">
          <button type="button" aria-controls="mep_0" title="Play/Pause">
          </button>
        </div>
      </div>
      <div class="mejs-clear">
      </div>
    </div>
  </div>
</div> 
```

出于某种原因，当我单击播放按钮时，代码没有执行。你知道可能是什么原因吗？谢谢

UPD：我用简单的 alert('Works!') 替换了 GA 代码，看看它是否有效：

```
$(function () {
    $(".aud-not-played .mejs-play").click(function () {
        alert('Works!');
        $('.aud-not-played').attr('class', 'aud-played');
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-05T23:49:42.407

我遇到了一个非常相似的问题，并找到了使用插件和以下功能的唯一解决方案。请注意，这必须在整页加载时运行，而不是页面就绪。

插件： [http ://weblog.west-wind.com/posts/2014/Oct/20/A-jquerywatch-Plugin-for-watching-CSS-styles-and-Attributes](http://weblog.west-wind.com/posts/2014/Oct/20/A-jquerywatch-Plugin-for-watching-CSS-styles-and-Attributes)

```
$(window).load(function() {
    // Monitor play buttons
    $(".mejs-playpause-button").watch({
        properties: "top,left,opacity,attr_class",
        // Callback function when a change is detected
        callback: function(data, i) {
            if($(this).hasClass('mejs-pause')) {
                setTimeout("_gaq.push(['_trackEvent', 'Audio', 'Play', 'audtitle'])", 10000);
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:05:50.410

```
$(document).on('click', '.aud-not-played .mejs-play', function () {

    if(!$(this).data('isClicked')) //if it the first click
        setTimeout("_gaq.push(['_trackEvent', 'Audio', 'Play', 'audtitle'])", 10000);

    $(this).data({ isClicked: true }); //store the click check in jquerys cache
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:07:35.037

使用jquery 的[live](http://api.jquery.com/live/)功能。

```
$(function () {
    $(".aud-not-played .mejs-play").live('click',function () {
        $('.aud-not-played').attr('class', 'aud-played');
        setTimeout("_gaq.push(['_trackEvent', 'Audio', 'Play', 'audtitle'])", 10000);
     })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T19:49:32.840

也许您需要以编程方式添加事件侦听器...

```
$('.mejs-playpause-button button[title="Play/Pause"]').on('click', function(e) {
//Do Whatever you want here        
console.log('addEventListener - playing') ;
}); 
```

# symfony - SonataUserBundle 覆盖模型

> ID：14335693
> 
> 赞同：0
> 
> 时间：2013-01-15T10:28:13.323
> 
> 标签：symfony, symfony-sonata

如何从 Model/User.php 中删除实体/模型中不需要的文件：facebook、twitter、bio、网站？

我尝试过度使用模型，但它不起作用。

我成功覆盖了实体，我添加了一些新属性，它可以工作，但想删除不需要的东西。

谢谢，再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:21:56.380

您可以创建自己的用户实体，它不会扩展 SonataUserBundle User.php 类。如果您使用 FOSUSerBundle：

```
class User extends FOS\UserBundle\Entity\User 
```

或者你可以默认扩展 Symfony 2 Security User.php 类。

接下来，您可以配置 SonataUserBundle 以使用您的用户实体：

```
sonata_user:
    class:
        user: MyBundle\Entity\User 
```

完整配置在这里：

[https://github.com/sonata-project/SonataUserBundle/blob/master/Resources/doc/reference/advanced_configuration.rst](https://github.com/sonata-project/SonataUserBundle/blob/master/Resources/doc/reference/advanced_configuration.rst)

如果您使用 SonataUserBundle 默认控制器来管理用户，您需要创建自己的 UserAdmin 类并配置奏鸣曲：

```
sonata_user:
    admin:                  # Admin Classes
        user:
            class:          MyBundle\Admin\UserAdmin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:37:10.410

事实上，我明白了。我必须扩展模型，而不是实体，它可以工作！！！我可以删除不需要的东西

# jquery - 将对象的方法绑定到事件的正确方法

> ID：14335696
> 
> 赞同：5
> 
> 时间：2013-01-15T10:28:19.503
> 
> 标签：jquery, this, jquery-events

这是使用 jQuery 在 JavaScript 中正确绑定和事件到对象方法的方法吗？

我已经设置了一些示例代码，但我关心的部分是注释后的两行“*这样可以吗？* ”

当然，由于回调是对象的方法，我需要*上下文*保持不变。

```
function MyPrototype(id) {

    this.id = id;
    this.sel = '#' + id;

    // *** IS THIS OK? ***
    $(this.sel).on('click', function(evt) {
        MyPrototype.prototype.mouseClick.call(this, evt); });
}

MyPrototype.prototype.mouseClick = function (evt) {

    // I want to use evt to get info about the event
    // I want use this to access properties and methods of the instance

    alert(this.id + ' was clicked');
}

myObject1 = new MyPrototype('myDiv1');
myObject2 = new MyPrototype('myDiv2'); 
```

此外，我可能会认为有必要将事件与特定功能解除绑定。

但是以下不起作用...

```
MyPrototype.prototype.unbindClick = function() {

    $(this.sel).off('click', function(evt) {
        MyPrototype.prototype.mouseClick.call(this, evt); });
}

myObject2.unbindClick(); 
```

请注意，我将一个内联函数作为事件处理程序传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:33:32.540

尝试[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)：

```
function MyPrototype(id) {
    this.id = id;
    this.sel = '#' + id;

    // using jQuery.proxy:
    $(this.sel).on('click', $.proxy(this.mouseClick, this));

    // or Function.bind:
    // $(this.sel).on('click', this.mouseClick.bind(this));

    // or writing it out:
    /*
    var self = this;
    $(this.sel).on('click', function () {
      return self.mouseClick.apply(self, arguments);
    });
    */
}

MyPrototype.prototype.mouseClick = function(evt) {

    // I want to use evt to get info about the event
    // I want use this to access properties and methods of the instance

    console.log(this.id + ' was clicked');
};

var myObject1 = new MyPrototype('myDiv1');
var myObject2 = new MyPrototype('myDiv2'); 
```

[http://jsbin.com/axokuz/1/](http://jsbin.com/axokuz/1/)

* * *

**关于问题的更新**：

如果要取消绑定单个事件处理程序，则需要与绑定时使用的完全相同的处理程序函数。否则整个事件将不受约束。您添加到问题中的解决方案也`$.proxy`无济于事。不过，有一些解决方案：

*   保留对绑定处理程序的引用并在解除绑定时使用它
*   使用[jQuery 的命名空间事件](http://docs.jquery.com/Namespaced_Events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:13:45.417

为了能够解除绑定特定的处理程序，必须将 jQuery 的代理对象从特定事件的特定元素保存到要在*解除绑定*时访问的对象的属性中。

像这样

```
function MyPrototype(id) {
    this.id = id;
    this.sel = '#' + id;
    this.handler = $.proxy(this.mouseClick, this);

    $(this.sel).on('click', this.handler);
};

MyPrototype.prototype.mouseClick = function(evt) {

    console.log(this.id + ' was clicked');
};

MyPrototype.prototype.unbindClick = function() {

    $(this.sel).off('click', this.handler);
}; 
```

# vb.net - 访问 SQL Server DB 的 VB.NET 应用程序上的 ClickOnce 性能

> ID：14335697
> 
> 赞同：0
> 
> 时间：2013-01-15T10:28:19.837
> 
> 标签：vb.net, performance, clickonce

我已将 60 KLOC Windows VB.NET 应用程序升级到 VS 2012 和 Windows 8。一切看起来都很好，除了我昨天将它部署到 ClickOnce 时。

如果表单使用绑定，则 ClickOnce 应用程序在第一次启动表单时加载每个表单的速度非常慢。如果表单不使用绑定（而是从数据库查询中选择数据），它们会正常加载。

最有趣的部分是，在 VS2012 中调试时，它们的加载时间不到 1 秒。从 ClickOnce 版本启动时，加载时间超过 60 秒。

如果我在 ClickOnce 应用程序中关闭这些表单之一并重新打开它，它们会在不到 1 秒的时间内正常加载。

第一次加载表单时，似乎 VS2012 中的 Binding 非常糟糕，但我更愿意认为我做错了什么。

关于这个问题的任何想法？

编辑 2013/01/18：

一天削减不必要的代码后，我已经找到了一个解决方案，它重现了缓慢并且没有不必要的代码，这样会更容易（我希望）找到其中不正常工作的地方。

ClickOnce 应用程序在这里：

[http://www.octet.it/Reproduce/](http://www.octet.it/Reproduce/)

源文件在这里：

[http://www.octet.it/Reproduce/Reproduce.zip](http://www.octet.it/Reproduce/Reproduce.zip)

我可以说缓慢不取决于：

1.  SQL Server（我已经删除了所有访问 SQL Server DB 的代码）。
2.  绑定（现在根本没有绑定）。
3.  开发环境：如果您从 VS2012 运行应用程序，它会按预期工作。

再现缓慢的说明：

*   在 Windows 8 机器上安装 ClickOnce 应用程序（我的是 x64，我没有要测试的 x86）。
*   启动任务管理器。
*   启动“复制”应用程序。
*   加载 MDI 表单后，点击 [Return] 键（这将触发 MDIChild 表单）。
*   查看任务管理器，它显示了“Reproduce”应用程序如何使您机器的一个 CPU 饱和并占用大约 650 MB 的 RAM。
*   大约 45-60 秒后，会出现一个 MDIChild 表单。
*   关闭 MDIChild 窗体。
*   再次点击 [Return] 并看到 MDIChild 几乎立即出现并且任务管理器显示没有 CPU 饱和或 RAM 增加

正如我所说，在 Win 8 之前，MDIChild（具有对各种表的绑定和 SQL 访问权限）大约在 2-3 秒内出现。

源文件看起来并不那么有趣：它们只会显示一个调用 MDIChild 表单的 MDIparent 表单，但如果你想做一些实验，我已经将它们包含在 .ZIP 文件中。

非常感谢您抽出宝贵的时间。

让我知道我能做些什么来解决这个问题。欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T03:39:53.590

你是如何编译应用程序的？您的目标是混合平台吗？尝试定位 x86。我有一个类似的问题，在我编译时通过定位 x86 解决了这个问题，除非你的应用程序中有一些疯狂的 x64 依赖项，否则它应该可以在你的 x64 机器上正常工作。请注意，这将更改 clickonce 清单，这很令人头疼，但我很好奇这是否能解决您的问题。

# haskell - 如何手动推断表达式的类型

> ID：14335704
> 
> 赞同：16
> 
> 时间：2013-01-15T10:28:43.987
> 
> 标签：haskell, types, type-inference, unification

给定 Haskell 函数：

```
head . filter fst 
```

现在的问题是如何手动“手动”查找类型。如果我让 Haskell 告诉我我得到的类型：

```
head . filter fst :: [(Bool, b)] -> (Bool, b) 
```

但我想了解它是如何工作的，仅使用定义如下的已使用函数的签名：

```
head :: [a] -> a
(.) :: (b -> c) -> (a -> b) -> a -> c
filter :: (a -> Bool) -> [a] -> [a]
fst :: (a, b) -> a 
```

*编辑：这么多很好的解释......选择最好的并不容易！*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-15T11:06:22.263

使用通常称为[统一](http://en.wikipedia.org/wiki/Unification_%28computer_science%29)的过程推断类型。Haskell 属于[Hindley-Milner](http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner)家族，这是它用来确定表达式类型的统一算法。

如果统一失败，则表达式为类型错误。

表达方式

```
head . filter fst 
```

通过。让我们手动进行统一，看看为什么我们得到了我们得到的。

让我们从`filter fst`：

```
filter :: (a -> Bool) -> [a] -> [a]
fst :: (a' , b') -> a'                -- using a', b' to prevent confusion 
```

`filter`需要一个`(a -> Bool)`，然后一个`[a]`给另一个`[a]`。在表达式 `filter fst`中，我们传递给类型为`filter`的参数。为此，类型*必须*与 的第一个参数的类型一致：`fst``(a', b') -> a'``fst` *`filter`*

 *```
(a -> Bool)  UNIFY?  ((a', b') -> a') 
```

该算法*统一*了两个类型表达式，并尝试*将*尽可能多的类型*变量*（例如`a`or `a'`）绑定到实际类型（例如`Bool`）。

只有这样才会`filter fst`导致有效的类型化表达式：

```
filter fst :: [a] -> [a] 
```

`a'`很明显`Bool`。所以类型*变量* `a'`解析为`Bool`. 并且`(a', b')`可以统一到`a`。所以 if `a`is`(a', b')`和`a'`is `Bool`， Then`a`就是`(Bool, b')`。

如果我们将不兼容的参数传递给`filter`，例如`42`(a `Num`)，则`Num a => a`with的统一`a -> Bool`将失败，因为这两个表达式永远无法统一为正确的类型表达式。

回到

```
filter fst :: [a] -> [a] 
```

这与`a`我们正在谈论的相同，因此我们将其替换为先前统一的结果：

```
filter fst :: [(Bool, b')] -> [(Bool, b')] 
```

下一点，

```
head . (filter fst) 
```

可以写成

```
(.) head (filter fst) 
```

所以拿`(.)`

```
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

所以为了统一成功，

1.  `head :: [a] -> a`必须统一`(b -> c)`
2.  `filter fst :: [(Bool, b')] -> [(Bool, b')]`必须统一`(a -> b)`

从 (2) 我们得到表达式中的 `a` **IS** )``b``(.) :: (b -> c) -> (a -> b) -> a -> c`

所以类型变量`a`和`c`表达式中的值很容易分辨，因为 (1) 给出了和`(.) head (filter fst) :: a -> c`之间的关系，即：是 的列表。正如我们所知，只能统一到`b``c``b``c``a``[(Bool, b')]``c``(Bool, b')`

如此`head . filter fst`成功地进行类型检查：

```
head . filter fst ::  [(Bool, b')] -> (Bool, b') 
```

**更新**

看看如何从不同点统一启动流程很有趣。我`filter fst`先选择，然后继续，`(.)`但是`head`正如其他示例所示，统一可以通过多种方式进行，与数学证明或定理推导可以通过多种方式完成的方式不同！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T10:58:20.257

`filter :: (a -> Bool) -> [a] -> [a]`接受一个函数`(a -> Bool)`，一个相同类型`a`的列表，还返回一个该类型的列表`a`。

在您的定义中，您使用`filter fst`with`fst :: (a,b) -> a`所以类型

```
filter (fst :: (Bool,b) -> Bool) :: [(Bool,b)] -> [(Bool,b)] 
```

被推断。接下来，您将结果`[(Bool,b)]`与`head :: [a] -> a`.

`(.) :: (b -> c) -> (a -> b) -> a -> c`是两个函数的组合，`func2 :: (b -> c)`并且`func1 :: (a -> b)`。在你的情况下，你有

```
func2 = head       ::               [ a      ]  -> a 
```

和

```
func1 = filter fst :: [(Bool,b)] -> [(Bool,b)] 
```

所以`head`这里接受`[(Bool,b)]`作为参数并`(Bool,b)`根据定义返回。最后你有：

```
head . filter fst :: [(Bool,b)] -> (Bool,b) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-15T11:36:14.683

让我们从`(.)`. 它的类型签名是

```
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

上面写着“给定一个来自`b`to`c`的函数，一个来自`a`to`b`和 an的函数`a`，我可以给你一个`b`”。我们想将它与`head`and 一起使用`filter fst`，所以`：

```
(.) :: (b -> c) -> (a -> b) -> a -> c
       ^^^^^^^^    ^^^^^^^^
         head     filter fst 
```

现在`head`，这是一个从某物数组到单个某物的函数。所以现在我们知道这`b`将是一个数组，并且`c`将成为该数组的一个元素。所以为了我们表达的目的，我们可以认为`(.)`有签名：

```
(.) :: ([d] -> d) -> (a -> [d]) -> a -> d -- Equation (1)
                     ^^^^^^^^^^
                     filter fst 
```

的签名`filter`是：

```
filter :: (e -> Bool) -> [e] -> [e] -- Equation (2)
          ^^^^^^^^^^^
              fst 
```

（请注意，我已更改类型变量的名称以避免与`a`我们已有的 s 混淆！）这表示“给定一个函数 from`e`到一个 Bool 和一个`e`s 的列表，我可以给你一个`e`s的列表”。该函数`fst` 具有签名：

```
fst :: (f, g) -> f 
```

说，“给定一对包含 an`f`和 a `g`，我可以给你一个`f`”。将其与等式 2 进行比较，我们知道这 `e`将是一对值，其中的第一个元素必须是 a `Bool`。所以在我们的表达式中，我们可以认为`filter` 有签名：

```
filter :: ((Bool, g) -> Bool) -> [(Bool, g)] -> [(Bool, g)] 
```

（我在这里所做的只是`e`用`(Bool, g)`等式 2 中的替换。）并且表达式`filter fst`具有以下类型：

```
filter fst :: [(Bool, g)] -> [(Bool, g)] 
```

回到等式 1，我们可以看到`(a -> [d])`must now `[(Bool, g)] -> [(Bool, g)]`、so `a`must be`[(Bool, g)]`和`d` must be `(Bool, g)`。所以在我们的表达式中，我们可以认为`(.)`有签名：

```
(.) :: ([(Bool, g)] -> (Bool, g)) -> ([(Bool, g)] -> [(Bool, g)]) -> [(Bool, g)] -> (Bool, g) 
```

总结一下：

```
(.) :: ([(Bool, g)] -> (Bool, g)) -> ([(Bool, g)] -> [(Bool, g)]) -> [(Bool, g)] -> (Bool, g)
       ^^^^^^^^^^^^^^^^^^^^^^^^^^    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                head                         filter fst
head :: [(Bool, g)] -> (Bool, g)
filter fst :: [(Bool, g)] -> [(Bool, g)] 
```

把它们放在一起：

```
head . filter fst :: [(Bool, g)] -> (Bool, g) 
```

这相当于你所拥有的，除了我用作`g`类型变量而不是`b`.

这可能听起来很复杂，因为我详细描述了它。然而，这种推理很快就会成为第二天性，你可以在脑海中做到这一点。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-28T08:35:25.873

^(（跳过*手动*推导）)

*找到`head . filter fst`==的类型`((.) head) (filter fst)`，给定*

```
head   :: [a] -> a
(.)    :: (b -> c) -> ((a -> b) -> (a -> c))
filter :: (a -> Bool) -> ([a] -> [a])
fst    :: (a, b) -> a 
```

这是通过一个小型 Prolog 程序*以纯机械方式实现的：*

```
type(head,    arrow(list(A)       , A)).                 %% -- known facts
type(compose, arrow(arrow(B, C)   , arrow(arrow(A, B), arrow(A, C)))).
type(filter,  arrow(arrow(A, bool), arrow(list(A)    , list(A)))).
type(fst,     arrow(pair(A, B)    , A)).

type([F, X], T):- type(F, arrow(A, T)), type(X, A).      %% -- application rule 
```

当在 Prolog 解释器中运行时，它会自动产生，

```
3 ?- type([[compose, head], [filter, fst]], T).
T = arrow(list(pair(bool, A)), pair(bool, A))       %% -- [(Bool,a)] -> (Bool,a) 
```

其中类型以纯语法方式表示为复合数据项。例如，在给定适当的定义的情况下，类型`[a] -> a`由 表示`arrow(list(A), A)`，可能与 Haskell 等效。`Arrow (List (Logvar "a")) (Logvar "a")``data`

仅使用了一个推理规则，即***应用程序***的推理规则，以及 Prolog 的***结构统一***，即如果*复合词*具有相同的形状并且它们的成分匹配，则它们匹配：*f(a [1] , a [2] , ... a [n] )*和*g (b [1] , b [2] , ... b [m] )*匹配当且仅当*f*与*g* , *n == m*且*a [i]*匹配 *b [i]*时，逻辑变量可以根据需要取任何值，但只能取*一次*（无法更改）。

```
4 ?- type([compose, head], T1).     %% -- (.) head   :: (a -> [b]) -> (a -> b)
T1 = arrow(arrow(A, list(B)), arrow(A, B))

5 ?- type([filter, fst], T2).       %% -- filter fst :: [(Bool,a)] -> [(Bool,a)]
T2 = arrow(list(pair(bool, A)), list(pair(bool, A))) 
```

* * *

***要以机械方式手动***执行类型推断，涉及将事物一个接一个地编写，注意侧面的等价性并执行替换，从而模仿 Prolog 的操作。我们可以将任何`->, (_,_), []`等纯粹视为句法标记，根本不了解它们的含义，并使用结构统一机械地执行该过程，这里只有一个[类型推断规则](https://en.wikipedia.org/wiki/Hindley%E2%80%93Milner_type_system#Typing_rules)，即。*应用*规则：（在和等价的情况下，将and**`(a -> b) c ⊢ b {a ~ c}`**的并列替换为, ）。一致地重命名逻辑变量以避免名称冲突很重要：`(a -> b)``c``b``a``c`

```
(.)  :: (b    -> c ) -> ((a -> b  ) -> (a -> c ))           b ~ [a1], 
head ::  [a1] -> a1                                         c ~ a1
(.) head ::              (a ->[a1]) -> (a -> c ) 
                         (a ->[c] ) -> (a -> c ) 
---------------------------------------------------------
filter :: (   a    -> Bool) -> ([a]        -> [a])          a ~ (a1,b), 
fst    ::  (a1, b) -> a1                                    Bool ~ a1
filter fst ::                   [(a1,b)]   -> [(a1,b)]  
                                [(Bool,b)] -> [(Bool,b)] 
---------------------------------------------------------
(.) head   :: (      a    -> [     c  ]) -> (a -> c)        a ~ [(Bool,b)]
filter fst ::  [(Bool,b)] -> [(Bool,b)]                     c ~ (Bool,b)
((.) head) (filter fst) ::                   a -> c      
                                    [(Bool,b)] -> (Bool,b) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-16T22:01:24.330

您可以通过许多复杂的统一步骤以“技术”方式执行此操作。或者你可以用“直觉”的方式来做，只是看着东西然后想“好吧，我在这里得到了什么？这是什么期待？” 等等。

好吧，`filter`需要一个函数和一个列表，并返回一个列表。`filter fst`指定了一个函数，但没有给出列表 - 所以我们仍在等待列表输入。`filter fst`获取一个列表并返回另一个列表也是如此。（顺便说一句，这是很常见的 Haskell 短语。）

接下来，`.`运算符将输出“管道”到`head`，它需要一个列表并返回该列表中的一个元素。（第一个，碰巧。）所以无论`filter`出现什么，`head`都会给你它的第一个元素。至此，我们可以得出结论

```
head . filter foobar :: [x] -> x 
```

但什么是`x`？好吧，`filter fst`适用`fst`于列表的每个元素（决定是保留它还是扔掉它）。所以`fst`必须适用于列表元素。并`fst`期望一个 2 元素元组，并返回该元组的第一个元素。现在`filter`期望`fst`返回 a `Bool`，这意味着元组的第一个元素必须是 a `Bool`。

综上所述，我们得出结论

```
head . filter fst :: [(Bool, y)] -> (Bool, y) 
```

是什么`y`？我们不知道。我们其实不在乎！上述功能将起作用。这就是我们的类型签名。

* * *

在更复杂的示例中，可能更难弄清楚发生了什么。（特别是当涉及到奇怪的类实例时！）但是对于像这样的小型实例，涉及常见的函数，你通常可以只是想“好的，这里有什么？那里有什么？这个函数期望什么？” 无需太多手动算法追踪即可直接找到答案。*

# java - 从字符串中获取除最后一个单词之外的每个单词的最简单方法

> ID：14335705
> 
> 赞同：7
> 
> 时间：2013-01-15T10:28:48.277
> 
> 标签：java, string

除了字符串中的最后一个单词之外，获取字符串中每个单词的最简单方法是什么？

到目前为止，我一直在使用以下代码来获得最后一句话：

```
String listOfWords = "This is a sentence";
String[] b = listOfWords.split("\\s+");
String lastWord = b[b.length - 1]; 
```

然后通过使用 remove 方法从字符串中删除最后一个单词来获取字符串的其余部分。

我不想使用该`remove`方法。有没有类似于上面这组代码的方法来获取没有最后一个单词和最后一个空格的字符串？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-15T10:33:05.460

像这样：

```
 String test = "This is a test";
    String firstWords = test.substring(0, test.lastIndexOf(" "));
    String lastWord = test.substring(test.lastIndexOf(" ") + 1); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T10:32:50.130

您可以获取 lastIndexOf 空白空间并使用如下子字符串：

```
String listOfWords = "This is a sentence";
int index = listOfWords.lastIndexOf(" ");
System.out.println(listOfWords.substring(0, index));
System.out.println(listOfWords.substring(index+1)); 
```

输出：

```
 This is a
        sentence 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T10:33:22.887

尝试`String.lastIndexOf`结合使用该方法`String.substring`。

```
String listOfWords = "This is a sentence";
String allButLast = listOfWords.substring(0, listOfWords.lastIndexOf(" ")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-15T10:33:40.257

我在您的代码中添加了一行。这里没有任何东西被删除。

```
String listOfWords = "This is a sentence";
String[] b = listOfWords.split("\\s+");
String lastWord = b[b.length - 1];
String rest = listOfWords.substring(0, listOfWords.indexOf(lastWord)).trim(); // Added
System.out.println(rest); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-15T10:38:25.693

这将满足您的需求：

```
.split("\\s+[^\\s]+$|\\s+") 
```

例如：

```
"This is a sentence".split("\\s+[^\\s]+$|\\s+"); 
```

回报：

```
[This, is, a] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-15T14:08:27.060

```
public class StringArray {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        String sentence = "this is a sentence";

        int index = sentence.lastIndexOf(" ");

        System.out.println(sentence.substring(0, index));

    }
} 
```

# sql-server - 在 Django 中使用 SQL Server 后端

> ID：14335707
> 
> 赞同：1
> 
> 时间：2013-01-15T10:28:48.980
> 
> 标签：sql-server, django, django-pyodbc

我正在尝试使用 django-pyodbc 版本连接到外部 SQL Server Express 数据库：[this github link](https://github.com/avidal/django-pyodbc)但是当我运行`manage.py shell`以检查是否可以执行 ORM 命令时，我不断收到此错误

```
Traceback (most recent call last):
File "manage.py", line 10, in <module>
  execute_from_command_line(sys.argv)
File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py", line   443, in execute_from_command_line
  utility.execute()
File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
  self.fetch_command(subcommand).run_from_argv(self.argv)
File "/usr/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
  self.execute(*args, **options.__dict__)
File "/usr/local/lib/python2.7/site-packages/django/core/management/base.py",line 232, in execute
  output = self.handle(*args, **options)
File "/usr/local/lib/python2.7/site-packages/django/core/management/base.py",line 371, in handle
  return self.handle_noargs(**options)
File "/usr/local/lib/python2.7/site-packages/django/core/management/commands/shell.py", line 45, in handle_noargs
  from django.db.models.loading import get_models
File "/usr/local/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
  backend = load_backend(connection.settings_dict['ENGINE'])
File "/usr/local/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
  return getattr(connections[DEFAULT_DB_ALIAS], item)
File "/usr/local/lib/python2.7/site-packages/django/db/utils.py", line 93, in __getitem__
  conn = backend.DatabaseWrapper(db, alias)
File "/usr/local/lib/python2.7/site-packages/sql_server/pyodbc/base.py", line 133, in __init__
  self.ops = DatabaseOperations(self)
File "/usr/local/lib/python2.7/site-packages/sql_server/pyodbc/operations.py", line 10, in __init__
  super(DatabaseOperations, self).__init__()
  TypeError: __init__() takes exactly 2 arguments (1 given) 
```

我的 settings.py 有这个：

```
DATABASES = {
    'default': {
       'ENGINE': 'sql_server.pyodbc',
       'NAME': 'DBName',
       'HOST': '192.168.29.1',
       'USER': 'user',
       'PASSWORD': 'pswd',
       'PORT': 1433,
    }
}

DATABASE_OPTIONS = {
    'driver': '/usr/local/lib/libtdsodbc.so',
    'dsn': 'FreeTDS',
    'extra_params': "TDS_VERSION=8.0"
} 
```

我完全不知道我应该做什么，所以欢迎所有想法。基本上我想要的是能够使用我制作的一个小应用程序与 SQL Server 数据库交互，同时能够使用普通的 DJango ORM 命令代替 pyodbc 连接字符串（顺便说一句，使用 pyodbc，我可以连接到SQL Server 数据库没有问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:16:40.813

[在我看来，您正在使用http://code.google.com/p/django-pyodbc/](http://code.google.com/p/django-pyodbc/)上的 django-pyodbc 的旧仓库

确保彻底卸载旧版本，然后重新安装

```
pip uninstall sql-server.pyodbc
pip install git+https://github.com/avidal/django-pyodbc.git 
```

# python - 有没有办法在 Python 中访问多重继承对象中的重写方法？

> ID：14335710
> 
> 赞同：3
> 
> 时间：2013-01-15T10:29:06.973
> 
> 标签：python, multiple-inheritance

我有以下 Python 代码。如何在不更改类定义的情况下让 c 返回 2？或者不同的说法。如何访问具有多重继承的对象中的重写方法？

```
class A(object):
    def foo(self):
        return 1

class B(object):
    def foo(self):
        return 2

class C(A, B):
    def __init__(self):
        A.__init__(self)
        B.__init__(self)

c = C()
c.foo() # Returns 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:01:24.480

就在问了这个问题之后，我在其他地方得到了答案，所以这里是：

```
import types
c.foo = types.MethodType(B.foo, c) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:29:20.393

您可以显式调用未绑定方法：

```
>> B.foo(c)
2 
```

# linux - 如何优雅地退出线程？

> ID：14335715
> 
> 赞同：0
> 
> 时间：2013-01-15T10:29:23.277
> 
> 标签：linux, multithreading

我正在尝试为 posix 线程分配一个例程。当它完成例程时，调用线程没有退出。每次，我都在创建一个新线程并在 while 循环中为新线程分配一个相同的例程。新线程仅创建 379 次，之后线程创建失败，状态 11 表示`PTHREAD_MAX_LIMIT`已达到。虽然在调用线程中我使用的是`pthread_exit(NULL)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:34:13.207

我认为您需要以“分离”模式创建线程，否则您需要将它们与主线程（创建线程的线程）“连接”。

有关详细信息，请参阅[本教程](https://computing.llnl.gov/tutorials/pthreads/#PthreadsAPI)。

# jquery - 使用 jquery 仅发送 json 数据而不期望任何返回

> ID：14335717
> 
> 赞同：0
> 
> 时间：2013-01-15T10:29:31.483
> 
> 标签：jquery, json, asp.net-mvc-3

**场景：**

在 jquery 中使用 json / Ajax 将搜索条件发送到服务器 .. ajax 调用应该简单地结束并且不期望任何返回（例如，只需发布​​ Json 数据并停止）..

**怎么了：**

正在发送数据，但 ajax 调用也正在接收返回的数据：

编码：

```
public ActionResult GetBasicSearchResults(BasicSearchCriteriaInfo basicSearchCriteria)
{
    List<BasicSearchResult> results = _client.GetBasicSearchResult(basicSearchCriteria).ToList();

    return View("BasicSearchResult",results);
} 
```

阿贾克斯调用：

```
$.ajax({
    url: url,
    type: 'post',
    data: JSON.stringify(basicSearchCriteria),
    dataType: 'json',
    contentType: 'application/json;',
    success: function () {
    }
}); 
```

应该根据`ActionResult`接收到的数据呈现一个新的视图，但是将数据发送回 Ajax 方法。请指导可能的方法。

主要目的是仅将数据作为 JSON 发送到服务器，而不是其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:45:20.507

感谢您的建议..已使用以下方法解决问题..

当服务器接收到数据时，它会对其进行处理并将其保存在**TempData**变量中，并将一个真正的布尔值作为 JSON 发送回 ajax 调用。

Ajax 调用（在接收到 true 时）然后请求一个新的 Action Method（使用 window.location）。然后，该操作方法使用**TempData**变量获取对象并发送到强类型视图以进行适当的处​​理..

再次感谢 ：）

# asp.net - 将 Windows 身份验证与 Active Directory 轻量级目录服务一起使用？

> ID：14335718
> 
> 赞同：1
> 
> 时间：2013-01-15T10:29:33.057
> 
> 标签：asp.net, adlds

我正在尝试在 ASP.net 应用程序中使用 AD 轻量级目录服务进行用户身份验证，并且不想使用表单身份验证。有什么方法可以使用 Windows 身份验证对其进行身份验证。

```
<authentication mode="Windows" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:14:59.307

你可以试试这个

[如何：在 ASP.NET 2.0 中使用 Windows 身份验证](http://msdn.microsoft.com/en-us/library/ff647405.aspx)

[如何：在 ASP.NET 2.0 中通过 Active Directory 使用表单身份验证](http://msdn.microsoft.com/en-us/library/ms998360.aspx)

编辑：这对我有用：

```
<!-- web.config -->
...
<system.web>
...     
    <compilation debug="true">
        <assemblies>
            <add assembly="System.DirectoryServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        </assemblies>
    </compilation>

    <authentication mode="Windows"/>
    <identity impersonate="true"/>

    <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
        <error statusCode="403" redirect="NoAccess.htm" />
        <error statusCode="404" redirect="FileNotFound.htm" />
    </customErrors>

    <roleManager enabled="true" defaultProvider="AspNetWindowsTokenRoleProvider"/>  

    <authorization>
        <deny users="?"/>
        <allow users="*"/>
    </authorization>
</system.web>
... 
```

然后在代码中

```
//page.cs
...
string userName = HttpContext.Current.User.Identity.Name;
... 
```

您应该能够使用例如[DirectoryEntry Class](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.aspx)做一些自定义代码，例如[Enumerating Users and Groups](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772126%28v=vs.85%29.aspx)。您可以在此处找到有关[使用 Active Directory 轻量级目录服务](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772138%28v=vs.85%29.aspx)的更多信息。

# php - Laravel 城市关系外键

> ID：14335723
> 
> 赞同：2
> 
> 时间：2013-01-15T10:29:49.513
> 
> 标签：php, orm, laravel, relation

我对laravel真的很陌生，我确定我做错了什么

我有 2 张桌子。`Cities`和`users_metadata`

我的城市表看起来像这样

```
id | City        |
1  | New York    |
1  | Los Angeles | 
```

用户元数据

```
user_id | firt name | last name | cities_id |
1       | Jonh      | Doe       |         2 | 
```

所以我的问题是当我创建一个关系时我得到了纽约，因为城市 ID 与用户 ID 匹配

城市模型

```
class City extends Eloquent 
{
    public static $table = "cities";

    public function profile()
    {
        return static::has_many('Profile');
    }
} 
```

轮廓模型

```
class Profile extends Eloquent 
{
    public static $timestamps = false;

    public static $table = "users_metadata";

    public static $key = "user_id";

    public function city()
    {
        return static::has_one('City');
    }
} 
```

错误

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'profile_id' in 'where clause'

SQL: SELECT * FROM `cities` WHERE `profile_id` = ? LIMIT 1

Bindings: array (
  0 => 1,
) 
```

如果我没有将 id 传递给拥有一个，我会收到以下错误

好的，我明白这一点。

所以我的问题是我能够以`cities_id`某种方式在我的匹配关系中传递外键吗？还是我做错了？有人可以给我一个基本的例子吗？

谢谢各位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T20:23:30.123

尝试这个：

城市模型

```
class City extends Eloquent 
{
    public static $table = "cities";
    public function profile()
} 
```

轮廓模型

```
class Profile extends Eloquent 
{
    public static $timestamps = false;
    public static $table = "users_metadata";
    public static $key = "user_id";
    public function city()
    {
        return static::belongs_to('City');
    }
} 
```

我遇到了同样的问题，认为我应该使用 has_one，但我需要使用 belongs_to。user1808639 可能不起作用，因为您在城市模型中仍然有一个“has_many”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:36:13.807

尝试这个：

```
class Profile extends Eloquent
{
    public function city()
    {
        return $this->belongs_to('City'); // city_id in the table
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:48:18.183

Laravel 有一种自动检测外键的方法。因此，对于您的数据库架构...此模型应该可以正常工作尝试以下操作

```
user_id | firt name | last name |   city_id | //city not cities
1       | Jonh      | Doe       |         2 | 
```

-

```
class Profile extends Eloquent 
{
    public static $timestamps = false;
    public static $table = "users_metadata";

    public function city()
    {
        return $this->has_one('City');
    }
} 
```

/

```
class City extends Eloquent 
{
    public static $timestamps = false;

    public function profiles()
    {
        return $this->has_many('Profile');
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:07:17.760

表行不应包含空格。所以重命名“原名” | “名字”中的“姓氏” | “姓”。SQL 错误告诉我，您正在以相反的方式调用模型，例如 City::find(1) 在这种情况下，Laravel 期望在“Cities”表中的配置文件的外键通常是“profile_id”。

我猜你正在寻找这样的东西：

```
$user_id = 1; 
$user = Profile::find($user_id);

echo $user->firstname." ".$user->lastname." lives in ".$user->city->city; 
```

# haskell - 如何将 ByteString 转换为 Int 并处理字节序？

> ID：14335725
> 
> 赞同：5
> 
> 时间：2013-01-15T10:29:55.017
> 
> 标签：haskell, endianness, bytestring

我需要在 Haskell 中读取二进制格式。格式相当简单：四个八位字节表示数据的长度，然后是数据。四个八位字节表示网络字节顺序中的整数。

如何将`ByteString`四个字节的 a 转换为整数？我想要一个直接转换（在 C 中，那将是`*(int*)&data`），而不是字典转换。另外，我将如何处理字节顺序？序列化的整数按网络字节顺序排列，但机器可能使用不同的字节顺序。

我尝试了谷歌搜索，但只有关于字典转换的结果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T10:37:34.500

[二进制包](http://hackage.haskell.org/packages/archive/binary/0.5.0.2/doc/html/Data-Binary-Get.html)包含从 ByteStrings 获取各种大小和字节序的整数类型的工具。

```
λ> :set -XOverloadedStrings
λ> import qualified Data.Binary.Get as B
λ> B.runGet B.getWord32be "\STX\SOH\SOH\SOH"
33620225
λ> B.runGet B.getWord32be "\STX\SOH\SOH\SOHtrailing characters are ignored"
33620225
λ> B.runGet B.getWord32be "\STX\SOH\SOH" -- remember to use `catch`:
*** Exception: Data.Binary.Get.runGet at position 0: not enough bytes
CallStack (from HasCallStack):
  error, called at libraries/binary/src/Data/Binary/Get.hs:351:5 in binary-0.8.5.1:Data.Binary.Get 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T10:35:54.673

我假设您可以使用折叠，然后使用其中一个`foldl`或`foldr`来确定您想要哪个字节序（我忘记了哪个字节序）。

```
foldl :: (a -> Word8 -> a) -> a -> ByteString -> a 
```

我认为这将适用于二元运算符：

```
foo :: Int -> Word8 -> Int
foo prev v = (prev * 256) + v 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T10:42:16.700

我只需提取前四个字节并使用[Data.Bits](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Bits.html)中的函数将它们合并为一个 32 位整数：

```
import qualified Data.ByteString.Char8 as B
import Data.Char (chr, ord)
import Data.Bits (shift, (.|.))
import Data.Int (Int32)

readInt :: B.ByteString -> Int32
readInt bs = (byte 0 `shift` 24)
             .|. (byte 1 `shift` 16)
             .|. (byte 2 `shift` 8)
             .|. byte 3
        where byte n = fromIntegral $ ord (bs `B.index` n)

sample = B.pack $ map chr [0x01, 0x02, 0x03, 0x04]
main = print $ readInt sample -- prints 16909060 
```

# r - 当假设不满足时，如何避免单根函数停止？

> ID：14335729
> 
> 赞同：2
> 
> 时间：2013-01-15T10:29:58.163
> 
> 标签：r

我有这个函数可以计算非周期性现金流的内部收益率。

```
xirr <- function(cf, t) {
    npv <- function(cf, t, r) sum(cf/((r)^(t/365.25)))
    irr <- uniroot(f=npv, interval=c(0,10), cf=cf, t=t, maxiter=100)$root - 1
    return(irr)
} 
```

问题是，如果现金流的回报率低于 -100%，则不满足该公式的数学假设。即使这些假设没有得到满足，我也需要该功能不停止（抛出错误）。发生这种情况时，我需要它返回 0 或其他内容。现在..

```
 mycashflow <- c(2000, 2000, 3000,4000, -10000)
 mydates <-as.integer( c(0,101,200,300,400))

 xirr(mycashflow, mydates) 
```

..它抛出错误：

`Error in uniroot(f = npv, interval = c(0, 10), cf = cf, t = t, maxiter = 100) : f.lower = f(lower) is NA`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:40:11.037

尝试捕获错误并直接返回：

```
xirr <- function(cf, t) {
    npv <- function(cf, t, r) sum(cf/((r)^(t/365.25)))
    tryCatch(
      irr <- uniroot(f=npv, interval=c(0,10), cf=cf, t=t, maxiter=100)$root - 1, 
      error=return(0)
    )
    return(irr)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:35:22.100

你可以试试：

```
irr <- NA  

try(irr <- uniroot(f=npv, interval=c(0,10), cf=cf, t=t, maxiter=100)$root - 1, silent=T)

if(is.na(irr)) irr <- 0 
```

如果 unirott 函数失败，它将尝试计算 irr 并将其分配为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T16:19:50.557

问题在于使用**uniroot**本身来查找 IRR。您将解决方案限制在 0% 和 1000% 的固定区间之间

如果您编写代码来查找 XIRR，而不是依靠内置函数来查找不规则现金流的内部收益率，那会更好

* * *

在阅读了 OP 的评论后，我正在编辑此回复以说明为什么您不需要指定下限和上限来定位根。

```
f(i) = 2000 + 2000(1+i)^-0.277 + 3000(1+i)^-0.548 + 4000(1+i)^-0.822 - 10000(1+i)^-1.096
f'(i) = - 553.425(1+i)^-1.277 - 1(1+i)^-1.548 - 3(1+i)^-1.822 + 10(1+i)^-2.096

i(N-1) ############## f(x) ############# f'(x) ############ i(N-1) - f(x)/f'(x)
0 ################### 1000 ############# 5473.97260274 #### -0.182682682683
-0.182682682683 #### -287.317250921 #### 9015.5263858 ##### -0.150813522899
-0.150813522899 #### -13.1104684396 ##### 8209.8448578 #### -0.149216602535
-0.149216602535 #### -0.0301760416678 ### 8172.09143372 ### -0.149212909962
-0.149212909962 #### -1.60673153005E-7 ## 8172.00440952 ### -0.149212909943

IRR = -14.921% 
```

如您所见，XIRR 计算不使用任何特定区间来定位或查找函数的根。

# r - 如何在 A 列中创建唯一的 R 并在 B 列中保留具有最大值的行

> ID：14335733
> 
> 赞同：4
> 
> 时间：2013-01-15T10:30:03.123
> 
> 标签：r, unique

我有一个包含几列（17）的data.frame。第 2 列有几行具有相同的值，我只想保留其中的一行，特别是第 17 列中具有最大值的行。

例如：

```
A    B
'a'  1
'a'  2
'a'  3
'b'  5
'b'  200

Would return
A    B
'a'  3
'b'  200 
```

（加上其余的列）

到目前为止，我一直在使用独特的功能，但我认为它会随机保留一个或只保留第一个出现的功能。

** 更新 ** 真实数据有 376000 行。我已经尝试过 data.table 和 ddply 建议，但它们需要永远。知道哪个最有效吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T10:51:06.443

使用包的解决方案`data.table`：

```
set.seed(42)
dat <- data.frame(A=c('a','a','a','b','b'),B=c(1,2,3,5,200),C=rnorm(5))
library(data.table)

dat <- as.data.table(dat)
dat[,.SD[which.max(B)],by=A]

   A   B         C
1: a   3 0.3631284
2: b 200 0.4042683 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T10:54:37.183

使用 R 基函数的不太优雅的解决方案

```
> ind <- with(dat, tapply(B, A, which.max)) # Using @Roland's data
> mysplit <- split(dat, dat$A)
> do.call(rbind, lapply(1:length(mysplit), function(i) mysplit[[i]][ind[i],]))
  A   B         C
3 a   3 0.3631284
5 b 200 0.4042683 
```

# c++ - 在 C++ 中的 char 数组末尾删除输入键值

> ID：14335735
> 
> 赞同：1
> 
> 时间：2013-01-15T10:30:05.777
> 
> 标签：c++, arrays, char

我有一个我想读入的文本文件中的名称列表，然后输出回另一个文本文件。IE：

```
101 Name 1
102 Name 2
103 Name 3 
```

对于代码：

```
int studentID;
char name[MAX];
while (infile >> studentID)
      {
        infile.getline (name, MAX);
        outfile << left << setw(10) << studentID;
        outfile << left << setw(20) << name;
        outfile << left << setw(10) << "SKIPPED WORD";
      } 
```

它会在文本文件的名称之后读入回车键，然后当我想输出另一个文本文件时它会转换回回车键，它看起来像这样。

```
101 Name 1
SKIPPED WORD
102 Name 2
SKIPPED WORD
103 Name 3
SkIPPED WORD 
```

这就是我要的

```
101 Name 1 SKIPPED WORD
102 Name 2 SKIPPED WORD
103 Name 3 SKIPPED WORD 
```

任何人都知道如何删除字符数组末尾的“输入”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:35:42.407

有几种方法可以解决这个问题，最简单的可能是你开始使用[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)而不是`istream::getline`. `std::getline`读取换行符，但不将其附加到字符串。

另一种解决方案是简单地检查读取字符串中的最后一个字符是否为换行符，然后将其更改为字符串终止符：

```
if (name[strlen(name) - 1] == '\n')
    name[strlen(name) - 1] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:36:04.283

代替`istream::getline`, 使用[std::getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)，它不会将结束换行符存储在字符串中（但会从流中删除它）。

```
#include <string>

int studentID;
while (infile >> studentID)
{
    std::string name;
    std::getline(infile, name);

    outfile << left << setw(10) << studentID;
    outfile << left << setw(20) << name;
    outfile << left << setw(10) << "SKIPPED WORD" << '\n';
} 
```

这样您就不再需要 MAX 并且可以拥有任意长的名称。

# screwturn - 如何在ScrewTurn wiki 中添加新用户？

> ID：14335736
> 
> 赞同：3
> 
> 时间：2013-01-15T10:30:07.663
> 
> 标签：screwturn

我们有一个使用ScrewTurn 的内部开发wiki 设置，但我正在努力完成最基本的任务，即添加新用户或编辑现有用户。这是由一位不再受雇于公司的前同事设置的，没有人有任何管理方面的经验。

根据[可用的信息，](http://www.screwturn.eu/Help.AdminUsers.ashx)这应该是一项非常简单的任务，但是在上一个链接中描述和描绘的“帐户”选项卡根本不存在于我们 wiki 的管理部分。

我们拥有的选项卡是管理员主页、用户组、Wiki 页面、类别、片段/模板、导航。路径、内容编辑、系统日志、提供程序和配置。

我们有 8 个注册用户，全部设置为管理员（在前端确认并已建立数据库），这些用户被设置为具有完全控制权。

那么我错过了什么？可以隐藏“帐户”部分吗？我们是否使用不同的版本（列出的版本是 3.0.5.600，它报告自己是最新的）？

在数据库中设置用户看起来很简单，但我希望能够使用前端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-16T14:53:48.313

选择用户组下的管理员并授予您的管理员完全控制权并取消选中“拒绝”下的不需要的限制。

如果您无法访问“用户组”选项卡，请尝试以超级管理员身份登录以验证您的管理员组的权限。

要以超级管理员身份登录，请将其添加到您的 web.config 下`<appSettings>`：

```
<add key="MasterPassword" value="YourSecretPasswordHere" /> 
```

然后使用用户**admin**和您设置的密码登录。

并确保在整理后删除该设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T18:01:30.477

管理菜单可能已修改。尝试直接进入页面 AdminUsers.aspx（类似于“ [http://yourwikidomain.com/AdminUsers.aspx](http://yourwikidomain.com/AdminUsers.aspx) ”）。

要修复菜单，请从网站 ( [http://www.screwturn.eu/Download.ashx](http://www.screwturn.eu/Download.ashx) ) 下载 Screwturn 安装文件并将“Admin.master”页面复制到您的站点。您可能想先比较它们以查看进行了哪些更改。

# android - ViewPager 片段不显示正确的数据

> ID：14335738
> 
> 赞同：2
> 
> 时间：2013-01-15T10:30:12.967
> 
> 标签：android, android-fragments, android-viewpager

我对 Fragments 和 ViewPager 很陌生。我正在使用 Jack Wharton 的 ActionBarSherlock 和 ViewPageIndicator。

我从一个标准的 Android MasterDetailFlow Activity 开始，并尝试修改它以在细节部分使用 ViewPager。

我正在使用标准的 DummyContent 来提供一些静态数据，但我已将 DummyItem 替换为我必须在此应用程序中使用的“调​​查”库。DummyContent 提供了一个公共静态 ArrayList，我用它来填充列表活动中的列表。在我在此列表中选择一项调查后，相应的问题应显示在视图寻呼机中。

这是托管问题片段的 QuestionActivity.java 的代码。

```
 public class QuestionActivity extends SherlockFragmentActivity {

    private QuestionsFragmentPagerAdapter mAdapter;
    private PageIndicator mIndicator;
    private ViewPager mPager;

    private String surveyName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.fragment_viewpager);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        surveyName = getIntent().getExtras().getString(ItemDetailFragment.ARG_SURVEY_NAME);

        mAdapter = new QuestionsFragmentPagerAdapter(getSupportFragmentManager(), DummyContent.mgr.getSurvey(surveyName).getQuestions());

        mPager = (ViewPager) findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (PageIndicator) findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
    }
} 
```

问题FragmentPagerAdapter.java

```
public class QuestionsFragmentPagerAdapter extends FragmentPagerAdapter {

    ArrayList<Question> questions;

    public QuestionsFragmentPagerAdapter(FragmentManager fm, List<Question> questions) {
        super(fm);

        this.questions = (ArrayList<Question>) questions;
    }

    @Override
    public Fragment getItem(int position) {

        Fragment f = QuestionFragment.newInstance(questions.get(position));
        return  f;
    }

    @Override
    public int getCount() {
        return questions.size();
    }
} 
```

QuestionFragment.java

```
public class QuestionFragment extends SherlockListFragment {

    protected enum QuestionType {
        FT, SC, MC;
    }

    public final static String ARG_QUESTION_QUESTION = "question_question";
    public final static String ARG_QUESTION_TYPE = "question_type";
    public final static String ARG_QUESTION_ANSWERINGOPTIONS = "question_answeringptions";

    private TextView lblQuestion;
    private EditText txtAnswer;
    private ListView listAnswers;

    private ArrayAdapter<String> listAdapter;

    private Question question;
    private int listLayout;

    /**
     * 
     * @param question
     * @return
     */
    public static QuestionFragment newInstance(Question question) {

        QuestionFragment fragment = new QuestionFragment();

        // Creates a Bundle with all informations available in the question obj.
        Bundle args = createBundleFromQuestion(question);

        fragment.setArguments(args);

        return fragment;
    }

    /**
     * 
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Creates the question object from the given arguments.
        // I know this isn't a good solution, i will implement the
        // Parcelable asap i have solved the current issues.
        // 
        createQuestionFromBundle(getArguments());

//      String questionXml = getArguments() != null ? getArguments().getString(ARG_QUESTION_XML) : null;
//      this.question = (Question) MyXmlSerializer.deserialize(questionXml, Question.class);
    }

    /**
     * Creates a the Question object form the Bundle.
     * @param extras
     */
    private void createQuestionFromBundle(Bundle extras) {
        // Think we don't need it here. The field question gets instantiated.
    }

    /**
     * 
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        return inflater.inflate(R.layout.answer_question, null);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        initWidgets();
        setCorrectLayout();
        initContent();
    }

    private void initContent() {
        String questionStr = question.getQuestion();
        lblQuestion.setText(questionStr);

        if(question instanceof FTQuestion) {

        } else if (question instanceof ClosedQuestion) {

            listAdapter = new ArrayAdapter<String>(getActivity(), listLayout);

            List<Answer> answeringOptions = question.getAnswers();
            for(Answer answer : answeringOptions) {
                listAdapter.add(answer.getAnswer());
            }

            listAnswers.setAdapter(listAdapter);
        }
    }

    /**
     * 
     */
    private void initWidgets() {
        listAnswers = getListView();
        lblQuestion = (TextView) getActivity().findViewById(R.id.lblQuestion);
        txtAnswer = (EditText) getActivity().findViewById(R.id.txtAnswer);
    }

    /**
     * Sets the FT/SC/MC layout
     */
    private void setCorrectLayout() {
        if(question instanceof FTQuestion) {
            setFtLayout();
        } else if (question instanceof SCQuestion) {
            setScLayout();
        } else if (question instanceof MCQuestion) {
            setMcLayout();
        }
    }

    /**
     * 
     */
    private void setFtLayout() {
        if(listAnswers.getVisibility()!=ListView.INVISIBLE && listAnswers.getVisibility()!=ListView.GONE) {
            listAnswers.setVisibility(ListView.GONE);
        }
    }

    /**
     * 
     */
    private void setScLayout() {
        listLayout = R.layout.answer_question_single_choice_list_row;
        listAnswers.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        if(txtAnswer.getVisibility() == TextView.VISIBLE) txtAnswer.setVisibility(TextView.GONE);
    }

    /**
     * 
     */
    private void setMcLayout() {
        listLayout = R.layout.answer_question_multiple_choice_list_row;
        listAnswers.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        if(txtAnswer.getVisibility() == TextView.VISIBLE) txtAnswer.setVisibility(TextView.GONE);
    }
} 
```

在列表中选择正确的调查工作正常，但现在显示的问题完全错误。

实际上现在应该有 3 页，包含 3 个不同的问题。在第一页上应该有一个带有问题的标签“Eine tolle FT Frage？” 在此标签下方是一个 EditText。在第二页上应该有一个带有问题“Eine tolle SC Frage？”的标签。并在带有回答选项的列表下方。在第三页应该有问题“Eine tolle MC Frage？” 以及下面的列表，其中包含与第二页相同的回答选项。

屏幕截图按以下顺序显示页面之间的转换：1 -> 2 -> 3 -> 2 -> 1 -> 2。

你可以看到，它并没有以我上面描述的方式出现。页面的内容在转换过程中也会发生变化。我相信 DummyContent 可能有问题，因为它是静态的？！

![第一页](../Images/f7327b6addf0beeac1b18579d0eda9a6.png) ![第二页](../Images/b2eae6bccac88fe8f313cb8110e0e6da.png) ![第三页](../Images/125185dc557c49a81405b5553a9b1766.png) ![回到第二页，现在出现一个问题文本](../Images/970bfa614940fc2b111da9c023fa79ce.png) ![回到第一页，现在没有问题文本了](../Images/5421c9f74dd2ca07a98573d56682474c.png) ![返回第二页，再次出现另一个问题文本](../Images/f170be7addde767a391da0ea534db690.png)

如果我创建一个只有一个问题的调查，一切正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:49:03.683

好的，我找到了答案：

我想在 onCreateView 回调中初始化使用的小部件。但后来我总是得到“java.lang.IllegalStateException：尚未创建内容视图”。仔细观察表明，这只是因为 getListView() 方法。

现在我将小部件的初始化切换到 onCreateView() 回调，但我留在 onActivityCreated() 中的 getListView()。

现在一切正常，片段显示正确！这就是它现在的样子：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.answer_question, null);

        lblQuestion = (TextView) v.findViewById(R.id.lblQuestion);
        txtAnswer = (EditText) v.findViewById(R.id.txtAnswer);

        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        listAnswers = getListView();
        setCorrectLayout();
        initContent();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:07:39.043

将 mIndicator.setOnPageChangeListener 添加到您的指标中。然后将 BroadCast 发送到当前页面。

```
 indicator.setOnPageChangeListener(new OnPageChangeListener()
    {   
        @Override
        public void onPageSelected(int page) {
            switch (page) {
            case 0:
                sendBroadcast(intent)// update your content.When broadcast come set correct layout.
                break;

            default:
                break;
            }
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {}

        @Override
        public void onPageScrollStateChanged(int arg0) {}
    }); 
```

实现片段的广播监听器。

将您的初始化方法（initWidgets()、initContent()）移动到 OnCreateView 方法

它应该有效

# android - Android - 在具有多个项目的布局中添加水平滚动

> ID：14335739
> 
> 赞同：1
> 
> 时间：2013-01-15T10:30:12.707
> 
> 标签：android, android-layout, horizontalscrollview

我想创建一个包含多个视图的布局。目前我有 3 个选项卡，其中一个我希望能够滚动包含两个文本视图和一个图像的布局的特定部分。我试过使用 ViewPager ， Horizo​​ntalScrollView 但我无法滚动我的这部分布局。这是我的布局设计

[部分图片][滚动查看]

[表格1]

[表2]

[tab1][tab2][tab3]

我为手势检测运行的代码

```
public class RegionView extends HorizontalScrollView implements View.OnTouchListener{
    private static final int SWIPE_MIN_DISTANCE = 5;
    private static final int SWIPE_THRESHOLD_VELOCITY = 300;
    private ArrayList<ArticleList> mItems= new ArrayList<ArticleList>();
    private GestureDetector mGestureDetector;
    private int mActiveFeature = 0;

    public RegionView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setItems();
        // TODO Auto-generated constructor stub
    }

    public RegionView(Context context) {
        super(context);
        internalWrapper = (HorizontalScrollView) findViewById(R.id.horizontalScrollView1);
        internalLayout = (LinearLayout) findViewById(R.id.regionll1);
        featureLayout = (LinearLayout) View.inflate(myContext,R.layout.regionview1,null);

        setItems();
    }

    public void setItems(){

        showToast("setItem Called");

        internalLayout.setOnTouchListener(gestureListener);

        for(int i = 0; i< mItems.size();i++){
            internalLayout.addView(featureLayout);
        }

        setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (mGestureDetector.onTouchEvent(event)) {
                    return true;
                }else if(event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL ){
                    int scrollX = getScrollX();
                    int featureWidth = v.getMeasuredWidth();
                    mActiveFeature = ((scrollX + (featureWidth/2))/featureWidth);
                    int scrollTo = mActiveFeature*featureWidth;
                    smoothScrollTo(scrollTo, 0);
                    return true;
                }else{
                    return false;
                }
            }
        });
        mGestureDetector = new GestureDetector(new MyGestureDetector());
    }

    class MyGestureDetector extends SimpleOnGestureListener {
        public boolean isRightToLeft = false;

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            try {

                if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    int featureWidth = getMeasuredWidth();
                    mActiveFeature = (mActiveFeature < (mItems.size() - 1))? mActiveFeature + 1:mItems.size() -1;
                    smoothScrollTo(mActiveFeature*featureWidth, 0);
                    isRightToLeft=true;
                    return true;
                }else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    int featureWidth = getMeasuredWidth();
                    mActiveFeature = (mActiveFeature > 0)? mActiveFeature - 1:0;
                    smoothScrollTo(mActiveFeature*featureWidth, 0);
                    showToast("Gesture on right swipe");
                    isRightToLeft=false;
                    return true;
                }
            } catch (Exception e) {
                Log.e("Fling", "There was an error processing the Fling event:" + e.getMessage());
            }
            return false;
        }
    }
} 
```

我的带有 tabhost 的 XML 文件，我已将代码分成两部分以显示我实现 Horizo​​ntalscroll 视图的位置

```
 <?xml version="1.0" encoding="utf-8"?>
  <TabHost
       xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:background="@drawable/main_bckground"
       >
    <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >
      <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >
        </RelativeLayout>   
        <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:background="@color/Orange"
                >
        </TabWidget>
             <FrameLayout
                   android:id="@android:id/tabcontent"
                       android:layout_width="match_parent"
                    android:layout_height="match_parent" >
            <!--First Tab-->
                <LinearLayout
                     xmlns:android="http://schemas.android.com/apk/res/android"
                     android:id="@+id/tabyourcity"
                     android:layout_width="fill_parent"
                     android:layout_height="match_parent"
                     android:paddingLeft="0dip"
                     android:paddingRight="0dip" >
            </LinearLayout>
               <!—Second Tab-->
               <LinearLayout
                     xmlns:android="http://schemas.android.com/apk/res/android"
                     android:id="@+id/tabnepal"
                     android:layout_width="match_parent"
                     android:layout_height="match_parent" >
            <LinearLayout
                    android:layout_width = "fill_parent"
                    android:layout_height = "wrap_content"
                    android:id = "@+id/nepalpageview"
                    android:orientation="vertical">
                 <RelativeLayout
                   android:orientation="vertical"
                           android:layout_width="fill_parent"
                           android:layout_height="wrap_content">
                      <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/loadContainernepal"
                android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                android:background="#414141"
                android:orientation="horizontal" >

    <TextView
                                android:id="@+id/loadingTextnepal"        
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="  Data is Loading...." 
                                android:textColor="#FFF"
 />                                                                                                                   <ProgressBar
                              android:id="@+id/progressBar2Nepal"
                              android:layout_width="25dip"
                              android:layout_height="25dip"
                  android:indeterminate="true"                                                        
                              android:visibility="visible"
                              android:layout_marginLeft="160dip"                        
                              style="@android:style/Widget.ProgressBar.Small"
                            />                                                                                                                         
                          </LinearLayout>
                        </RelativeLayout> 
                        <RelativeLayout
                            android:id="@+id/relativelayouttop"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >
                  <TextView
                       android:id="@+id/tv_sunrisetime"
                       android:layout_width="wrap_content"
                       android:layout_height="wrap_content"
                       android:layout_alignLeft="@+id/tv_sunrise"
                       android:layout_alignRight="@+id/tv_sunrise"
                       android:layout_below="@+id/tv_sunrise"
                       android:gravity="center"
                       android:text="rise time"
                       android:textColor="#ffffff" />
                  <TextView
                       android:id="@+id/tv_sunrise"
                       android:layout_width="wrap_content"
                       android:layout_height="wrap_content"
                       android:layout_alignParentLeft="true"
                       android:layout_below="@+id/img_SUNRISE"
                       android:layout_marginLeft="20dp"
                       android:gravity="center"
                       android:text="SUNRISE"
                      android:textAppearance="?android:attr/textAppearanceMedium"
                       android:textColor="@color/Orange"
                       android:textSize="18sp" >
                     </TextView>
                  <ImageView
                       android:id="@+id/img_SUNRISE"
                       android:layout_width="wrap_content"
                       android:layout_height="30dp"
                       android:layout_alignLeft="@+id/tv_sunrise"
                       android:layout_alignParentTop="true"
                       android:layout_alignRight="@+id/tv_sunrise"
                       android:paddingTop="5dp"
                       android:src="@drawable/sunriseicon" />
                 <TextView
                       android:id="@+id/TextView02"
                       android:layout_width="wrap_content"
                       android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/img_sunset"
                    android:layout_alignRight="@+id/img_sunset"
                    android:layout_below="@+id/img_sunset"
                    android:gravity="center"
                    android:text="SUNSET"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textColor="@color/Orange"
                    android:textSize="18sp" />
                   <TextView
                         android:id="@+id/tv_sunsettime"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/tv_sunrise"
                    android:layout_alignRight="@+id/tv_sunrise"
                    android:layout_below="@+id/TextView02"
                    android:gravity="center"
                    android:text="SET time"
                    android:textColor="#ffffff" />
                <ImageView
                    android:id="@+id/img_sunset"
                    android:layout_width="wrap_content"
                    android:layout_height="30dp"
                    android:layout_alignLeft="@+id/tv_sunrisetime"
                    android:layout_alignRight="@+id/tv_sunrisetime"
                    android:layout_below="@+id/tv_sunrisetime"
                    android:src="@drawable/sunseticon" />
                <RelativeLayout
                    android:layout_width="130dp"
                    android:layout_height="120dp"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="15dp"
                    android:gravity="right" >
                          <android.support.v4.view.ViewPager
                                 android:id="@+id/viewPager"
                                 android:layout_width="fill_parent" 
                                 android:layout_height="fill_parent"
                                 android:layout_alignParentBottom="true"
                                 android:layout_alignParentLeft="true"
                                 android:layout_alignParentRight="true"
                                 android:layout_alignParentTop="true" >
                <HorizontalScrollView
                    android:id="@+id/horizontalScrollView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" > 
```

当我在此布局中提供所有图像和文本字段时，代码工作正常，但由于我需要检查值，然后在滚动时将文本和图像放在这里，所以我在实现这个时遇到了问题

```
<!--   <LinearLayout
                                android:id="@+id/scroll_linearlayout "
                            android:layout_width="match_parent"
                                android:layout_height="match_parent"
                            android:orientation="horizontal" >
                        <LinearLayout
                                android:id="@+id/regionll1 "
                                android:layout_width="match_parent"
                                android:layout_height="match_parent"
                                android:orientation="vertical" >
                             <TextView
                                      android:id="@+id/tv_regionname"
                                      android:layout_width="130dp"
                                      android:layout_height="wrap_content"
                                      android:gravity="center"
                                      android:text="Hilly Region"
                                      android:textColor="#ffffff"
                                      android:textSize="18sp" />
                          <ImageView
                                   android:id="@+id/img_region"
                                   android:layout_width="wrap_content"
                                   android:layout_height="75dp"
                                    android:src="@drawable/iconsresized5" />
                             <TextView
                                    android:id="@+id/tv_regiontemp"
                                    android:layout_width="match_parent"
                                 android:layout_height="wrap_content"
                                            android:gravity="center"
        android:textColor="#ffffff" />
                        </LinearLayout> 
        <LinearLayout
                             android:id="@+id/regionll2 "
                             android:layout_width="match_parent"
                                        android:layout_height="match_parent"
                                        android:orientation="vertical" >
        </LinearLayout>
        <LinearLayout
                              android:id="@+id/regionll3 "
                              android:layout_width="match_parent"
                              android:layout_height="match_parent"
                              android:orientation="vertical" >
                        </LinearLayout> 
                          </LinearLayout> -->
                         </HorizontalScrollView>
        </android.support.v4.view.ViewPager>     
        </RelativeLayout>
                </RelativeLayout>
                <TableLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:paddingLeft="5dp"
                        android:paddingRight="5dp" >
                        <TableRow
                            android:id="@+id/tableRow1"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:layout_marginTop="20dp"
                            android:background="@color/Orange"
                            android:gravity="center" >
                            <ImageView
                          android:id="@+id/imageView1"
                             android:layout_width="25dp"
                             android:layout_height="20dp"
                          android:src="@drawable/rainfall_stastastics" />
                            <TextView
                                android:id="@+id/textView1"
                                android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:paddingLeft="5dp"
                             android:text="Rainfall Statistics"
                             android:textColor="#ffffff"
                             android:textSize="16sp" />
                       </TableRow>
           <TableRow
                           android:id="@+id/tableRow2"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                        android:background="@color/tbl_background" >
                        <ImageView
                           android:id="@+id/imageView3"
                           android:layout_width="4dp"
                            android:layout_height="wrap_content"
                            android:src="@drawable/bullet" />
                        <TextView
                            android:id="@+id/textView2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Total this month to date            "
                            android:textColor="#000000" />
                        <TextView
                            android:id="@+id/tv_totalrainfall"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:textColor="#000000" />
                    </TableRow>
                    <TableRow>
                                </TableRow>
                </TableLayout>
                        <TableLayout>
                        </TableLayout>
                 </LinearLayout>
               </LinearLayout>
                 </LinearLayout>
             </FrameLayout>
           </RelativeLayout>
        </TabHost> 
```

我想要一个滚动视图，就像我们通过 viewpager 使用 iphone 获得的那样

# c - 本地变量和寄存器变量可以声明为外部吗？

> ID：14335742
> 
> 赞同：13
> 
> 时间：2013-01-15T10:30:18.147
> 
> 标签：c, extern

我一直想知道是否可以在本地声明一个外部变量和一个寄存器变量。如果可以，将施加什么限制？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-06-19T07:52:32.010

**在某些情况下，局部变量可以声明为 extern**

让我们阅读[C99 N1256 标准草案](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)。

该标准将“局部变量”称为具有“块范围”。

6.7.1/5“存储类说明符”说：

> 具有块作用域的函数的标识符声明不应具有除 extern 之外的显式存储类说明符。

然后对于添加`extern`到局部变量的含义，6.2.2/4“标识符的链接”说：

> 对于在该标识符的先前声明可见的范围内使用存储类说明符 extern 声明的标识符，如果先前声明指定内部或外部链接，则后面声明的标识符的链接与链接相同在事先声明中指定。如果前面的声明不可见，或者前面的声明没有指定链接，则标识符具有外部链接。

让我们分解这些案例。

**没有事先声明**

```
void f() {
    extern int i;
} 
```

是相同的：

```
extern int i;
void f() {} 
```

除了声明仅在内部可见`f`。

这是因为`i`没有可见的先前声明。外部链接也是如此`i`（与全局变量相同的链接）。

**先前的声明指定没有链接**

```
int i;
void f() {
    extern int i;
} 
```

是相同的：

```
void f() {
    extern int i;
} 
```

因为先前的声明`int i`没有指定链接，因为第 6 段说：

> 以下标识符没有链接： 声明为对象或函数以外的任何标识符；声明为函数参数的标识符；没有存储类说明符 extern 声明的对象的块范围标识符。

**先前声明指定内部或外部链接**

```
extern int i;
void f() {
    extern int i;
} 
```

是相同的：

```
extern int i;
void f() {} 
```

和：

```
static int i;
void f() {
    extern int i;
} 
```

是相同的：

```
static int i;
void f() {} 
```

因为在这两种情况下，我们分别有一个先前可见的外部和内部 ( `static`) 链接声明。

**初始化本地外部**

无效的 C：

```
void f() {
    extern int i = 0;
} 
```

因为块范围声明有一个初始化。

有效 C：

```
extern int i = 0;
void f() {} 
```

但可以说是不好的风格，因为相当于较短：

```
int i = 0;
void f() {} 
```

因为 6.7.8 初始化说：

> 如果标识符的声明具有块范围，并且标识符具有外部或内部链接，则声明不应具有标识符的初始值设定项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-29T22:02:05.343

1.  局部变量可以声明为extern吗？

不可以。但是可以在`extern`本地声明一个全局变量。

```
// file1.c
int Count;

// file2.c
void foo(void) {
  extern int Count;
  Count++;
} 
```

2.  寄存器变量可以声明为外部吗？

不，变量可能不是`extern`and `register`。

> C11 dr 6.7.1 存储类说明符
> 1*存储类说明符：*
> `typedef`
> `extern`
> `static`
> `_Thread_local`
> `auto`
> `register`
> 约束
> 2 最多可以在声明的声明说明符中给出一个存储类说明符，除非它`_Thread_local`可能与`static`或`extern`一起出现

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T10:35:06.553

6.9 C99 状态的外部定义：

> 存储类说明符 auto 和 register 不应出现在外部声明的声明说明符中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T21:20:02.880

这句话`register variable`对我来说不是很清楚，所以我会大胆猜测一下 OP 真正好奇的是什么，并将原来的问题改写为：`Could local variables be declared with extern specifier?`，由以下片段说明：

```
int main() {
    extern int x; // Is this OK?
    return 0;
} 
```

答案是肯定的。

范围（可见性）和存储是两个独立且相互关联的概念。这里，`x`是一个局部变量（作用域），它只在这个块中可见。`extern`指示存储，这意味着这只是一个声明，此变量在其他地方定义。会推荐 C 标准以供明确参考。

至于省略的`register`部分，我假设 OP 是指一个带有`register`存储类说明符的变量，例如`register int x`. 那么，同时指定`register`和是非法`extern`的。

```
int main() {
    extern auto int x; // This is wrong.
    return 0;
} 
```

`At most, one storage-class specifier may be given in the declaration specifiers in a declaration, except that _Thread_local may appear with static or extern.`

对称的问题是：指定`auto`或`register`使用全局或外部变量是否有效，而这正是 Alexey Frunze 的答案。

```
auto int x; // This is wrong.
int main() {
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T10:32:33.540

您只能将全局变量定义为`extern`. 告诉编译器（和链接器）它是在别处定义的。

局部变量仅存在于局部范围内，因为它是在堆栈或寄存器中创建的。当执行不在范围内（不再）时，堆栈被展开（因此可用空间再次可用）或寄存器用于其他用途，并且变量不存在（不再存在）。

因此，定义一个本地外部将是“奇怪的”并且是不可能的（由于堆栈的使用）。

# visual-c++ - 为 Windows phone 8 C++/CX 创建 HTTP 请求

> ID：14335743
> 
> 赞同：2
> 
> 时间：2013-01-15T10:30:18.753
> 
> 标签：visual-c++, windows-phone-8

我需要使用 Windows Phone 8 C++/CX 创建简单的 HTTP 请求。我在哪里可以找到一个例子？

这个[http://msdn.microsoft.com/en-US/library/windowsphone/develop/jj662956(v=vs.105).aspx](http://msdn.microsoft.com/en-US/library/windowsphone/develop/jj662956(v=vs.105).aspx)文档说`IXMLHTTPRequest2`应该支持，但我不知道如何在我的项目中启用它。它只是一个标准的 Windows 手机 Direct3d 本机应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T10:02:35.747

Microsoft 的 IXMLHTTPRequest2 示例，在 windows phone 8 c++/cx
[http://msdn.microsoft.com/en-us/library/hh873181.aspx](http://msdn.microsoft.com/en-us/library/hh873181.aspx)

中为我工作 我需要做的唯一更改是 CreateStreamOverRandomAccessStream 未在WP8。

重写这个方法：

```
void HttpRequest::CreateMemoryStream(IStream **stream)
{
   auto randomAccessStream = ref new Windows::Storage::Streams::InMemoryRandomAccessStream();
   CheckHResult(CreateStreamOverRandomAccessStream(randomAccessStream, IID_PPV_ARGS(stream)));
} 
```

对此：

```
void HttpRequest::CreateMemoryStream(IStream** stream)
{   
    checkHResult(::CreateStreamOnHGlobal(0, TRUE, stream));
} 
```

# android - 如何修复多个屏幕尺寸的应用程序

> ID：14335746
> 
> 赞同：1
> 
> 时间：2013-01-15T10:30:25.160
> 
> 标签：android, android-layout, android-emulator

我已经在 2.2 版本中创建了一个应用程序，如果我在普通手机上运行它，它可以正常工作。但在平板电脑中它仍然可以正常工作，但标签、textveiw 和其他东西保持与手机相同的大小。

我已经使用了此代码，但它不起作用。

```
<supports-screens 
android:largeScreens="true" 
android:normalScreens="true" 
android:smallScreens="true" 
android:anyDensity="true" /> 
```

他们是否还有其他方法可以让我的应用程序在平板电脑上看起来也不错。

我的 xml 代码，我在表格布局中使用它

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent" 
    android:id="@+id/mainlayout"
    android:background="#ffffff" android:fadingEdge="horizontal|vertical" 
  >
    <RelativeLayout android:id="@+id/header_login"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#000000"
        android:gravity="center"
        android:orientation="horizontal" >

        <ImageView  android:id="@+id/login_left"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:paddingBottom="5px"
            android:paddingLeft="3px"
            android:paddingTop="5px"
            android:src="@drawable/sap_new" />
    </RelativeLayout>

 <ImageView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
          android:layout_gravity="center_horizontal"
         android:paddingTop="5dip"
            android:src="@drawable/login1" >
        </ImageView>
    <TableRow android:gravity="center" android:paddingTop="15px" android:layout_width="fill_parent">
         <TextView android:text="Username " android:layout_column="0" android:textColor="#000000" android:id="@+id/usrLbl"
            android:layout_width="wrap_content" android:gravity="right" />
        <TextView android:text="" android:layout_column="1"
            android:gravity="left" android:width="20dip" android:textColor="#FF0000" /> 
        <EditText android:id="@+id/sapuser" android:hint="Required"
            android:layout_column="2" android:width="150dip" android:paddingLeft="5dip"
             android:layout_marginRight="15dip" android:text="" android:singleLine="true" />
    </TableRow>
    <TableRow android:gravity="center"  android:layout_width="fill_parent">

        <TextView android:text="Password " android:layout_column="0" android:textColor="#000000"
             android:gravity="right" android:id="@+id/passLbl" />
        <TextView android:text="" android:layout_column="1"
            android:gravity="left" android:textColor="#FF0000" /> 
        <EditText android:id="@+id/password" android:hint="Required"
            android:paddingLeft="5dip" android:layout_column="2"
             android:password="true" android:text=""
            android:singleLine="true" android:layout_marginRight="15dip"   />
    </TableRow>

    <TableRow android:gravity="center"  android:layout_width="fill_parent">
    <TextView android:text="" android:layout_column="0"
             android:gravity="right"  />
        <TextView android:text="" android:layout_column="1"
            android:gravity="left" android:textColor="#FF0000" /> 
    <CheckBox
          android:id="@+id/ShowPassword"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:textSize="15dp"
          android:text="Show Password" android:textColor="#000000" android:background="@drawable/checkbox_background" android:button="@drawable/checkbox" /> 
    </TableRow>
    <TableRow android:gravity="center"  android:layout_width="fill_parent">
    <TextView android:text="" android:layout_column="0"
             android:gravity="right"  />
        <TextView android:text="" android:layout_column="1"
            android:gravity="left" android:textColor="#FF0000" /> 
    <CheckBox
          android:id="@+id/SavePassword"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:textSize="15dp"
          android:text="Save Password" android:textColor="#000000" android:background="@drawable/checkbox_background" android:button="@drawable/checkbox" /> 
    </TableRow>
    <LinearLayout android:paddingTop="10px" android:layout_width="fill_parent" android:gravity="center_horizontal">

            <Button android:layout_width="wrap_content" android:id="@+id/submit"
                android:layout_height="wrap_content" android:text="Login"
                android:gravity="center"  />

    </LinearLayout>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:14:02.543

不要在`px`. 使用`dp`.

检查官方[文档](http://developer.android.com/guide/practices/screens_support.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:24:10.217

您应该为移动设备创建 value/dimens.xml 文件，为平板电脑创建 value-sw600dp/dimes.xml 文件。接下来，您应该为布局中的每个项目写下不同的尺寸。像这样：

文件值/dimens.xml ：

```
<resources>
    <dimen name="sapuser_width">150dip</dimen>
</resources> 
```

文件值-sw600dp/dimens.xml

```
<resources>
    <dimen name="sapuser_width">300dip</dimen>
</resources> 
```

之后，您应该写下尺寸参考。例如

```
<EditText android:id="@+id/sapuser" android:hint="Required"
            android:layout_column="2" android:width="@dimen/sapuser_width" android:paddingLeft="5dip"
             android:layout_marginRight="15dip" android:text="" android:singleLine="true" /> 
```

请注意，对于 7 英寸和 10 英寸，您应该使用不同的值：

*   对于 7 英寸 - values-sw600dp
*   对于 10 英寸 - values-sw720dp

# amazon-web-services - AWS EC2 不断拒绝我的私有 SSH 2 密钥

> ID：14335748
> 
> 赞同：3
> 
> 时间：2013-01-15T10:30:28.360
> 
> 标签：amazon-web-services, amazon-ec2, rsa, ssh-keys, ec2-ami

已经在寻找解决方案，但似乎没有任何帮助，我正在做所有应该做的事情，我的实例不断向我返回消息“服务器拒绝我们的密钥”。

这是我一直在做的事情：

```
1) Create Instance;
2) Download the .pem key;
3) PuttyGen to transform it in a private .ppk (SSH-2 RSA);
4) Associate an Elastic IP to the Instance;
5) Connect through 22 with the correct auth key generated on the 3rd step;
6) Server asks for username, insert "ubuntu" (using 12.04.1 LTS);
7) Server returns "Server refused our key". 
```

尝试了一百次重启，尝试了 SSH-1 RSA，尝试了公钥而不是私钥，尝试了带密码的密钥，尝试了一切。

其他人正在经历这种情况？

**编辑：**

认为这可能是一个安全问题，如果有帮助，这是我的规则：

[http://i.stack.imgur.com/Y3I2s.png](http://i.stack.imgur.com/Y3I2s.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:42:41.160

刚遇到同样的问题。AWS 实例仅识别在实例创建期间指定的键。以后对密钥列表的所有更改都不会影响已创建的实例。

编辑：实际上，这里的问题是使用 Puttygen 错误地导出到 .ppk 文件。请参阅下面的评论。

# repository - 如何在 RQL 中使用地图属性（Oracle 的 ATG Web Commerce）

> ID：14335752
> 
> 赞同：0
> 
> 时间：2013-01-15T10:30:39.463
> 
> 标签：repository, atg

我们的项目使用 Oracle 的 ATG Web Commerce。而目前我们需要构造 RQL 查询来获取 SKU 的 tacticalTradeStatuses 包含特定状态并按状态值排序的产品。

我简要描述实体之间的关系： 产品项目描述符包含 SKU 列表。每个 SKU 都包含 map tacticalTradeStatuses（key - 战术贸易状态，value - sequense）

例如，如何获取 SKU 的 tacticalTradeStatuses 属性包含键“BEST_SELLER”并按与键“BEST_SELLER”关联的值排序的所有产品。

我们要选择要作为 RQL 参数传递的产品的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:23:21.993

我有两种方法可以做到这一点 1）首先创建一个查询，它根据映射键 BEST_SELLER 获取所有产品 2）现在将它传递给 foreach 液滴并添加排序属性。这有助于根据您的排序要求对结果进行排序，请参阅以下链接

[http://docs.oracle.com/cd/E23095_01/Platform.93/PageDevGuide/html/s1316foreach01.html](http://docs.oracle.com/cd/E23095_01/Platform.93/PageDevGuide/html/s1316foreach01.html) 我认为的 2 种方法是在 RQLStatement 中使用查询选项。它与每个中的排序属性相同

如果您提供一些很好的 XML 存储库结构..希望它对您有所帮助

# php - 为什么我的简单 ajax 代码不起作用？

> ID：14335753
> 
> 赞同：1
> 
> 时间：2013-01-15T10:30:39.997
> 
> 标签：php, javascript, ajax

谁能帮我理解为什么代码不起作用？

它不会将 div 中的文本更改为成员编写的文本。

提前为我的英语道歉，我的英语老师显然做得不好...... =/

第一页：

```
<script>
function showUser()
{
var str = document.forms["myForm"]["users"].value;
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","act2.php?q="+str,true);
xmlhttp.send();
}
</script>

<form name="myForm" onsubmit="return showUser()" method="post">
First name: <input type="text" name="users">
<input type="submit" value="Submit">
</form>

<div id="txtHint"><b>Person info will be listed here.</b></div> 
```

第二页（act2.php）：（*更正名称）*

```
<?php
$q=$_GET["q"];

echo "$q";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:34:47.390

此行中指定的文件

```
xmlhttp.open("GET","act2.php?q="+str,true); 
```

是**act2.php**，但根据您的帖子，您正在寻找**ajax2.php**，是这样吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:37:55.810

您只是忘记在 showUser 方法中“返回 false”，表单将在 Ajax 调用之前照常发布

**编辑：** 为了澄清，在 onsubmit 你有返回 showUser()，showUser 方法从不返回值，以阻止浏览器发布表单。此外，正如其他海报所建议的那样，您暗示 php 文件名为 ajax2.php，但代码实际上试图命中 act2.php。

此外，建议使用某种框架（jQuery 非常流行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:00:57.800

你的函数需要返回 false 以防止表单的默认操作，否则你的表单将被提交（这*是*默认操作）。

只需`return false`在代码末尾添加 a 即可。

```
function showUser(){

   // ...
   xmlhttp.send();

   // prevents the default action (the submit from your form)
   return false;

} 
```

或者：

```
<form name="myForm" onsubmit="showUser();return false;" method="post"> 
```

您也可以安全地删除 IE5/6 兼容代码。

```
if (window.XMLHttpRequest)
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  } 
```

简单地变成：

```
 var xmlhttp=new XMLHttpRequest(); 
```

前面`var`很重要，否则`xmlhttp`将成为全局对象的成员而不是作用域变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:34:54.997

只是为了展示如何用更少的痛苦和 jQuery 来做同样的事情。

```
<form name="myForm" action="/act2.php">
    <input type="text" name="q">
    <input type="submit">
</form>

<div id="txtHint"></div>

<script type="text/javascript">
    $(document)
        // Link handler for submiting form
        .on('submit', 'form[name="myForm"]', function(e) {
            // Preventing original form submition
            e.preventDefault();

            // Send all data from form, to url from form's action attribute (/act2.php) and set received data to div with id txtHint
            $.get($(this).attr('action'), $(this).serialize(), function(data, status, xhr) {
                $('#txtHint').html(data);
            });
        });
</script> 
```

# android - 如何在android中使用鼠标悬停文本查看器

> ID：14335754
> 
> 赞同：0
> 
> 时间：2013-01-15T10:30:42.670
> 
> 标签：android, textview, onmouseover

我有一个`TextView`必须显示长文本的地方。它必须显示在 2 行（文本的一部分）上，并且整个文本要显示在“鼠标悬停时”显示的气球中。我进行了搜索，但在 Android 中没有找到任何与此相关的内容。

谁能帮我 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:16:03.553

我找到了这个例子[https://github.com/lorensiuswlt/NewQuickAction3D](https://github.com/lorensiuswlt/NewQuickAction3D)它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:10:51.630

您可以使用子字符串来剪切文本，何时显示以及何时单击显示全部。并在 TextView 中设置 height=wrap_content。

例子：

```
textView.setText(myString.substring(0,100); //or something like this.

textView.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v) {
            textView.setText(myString);
        }

    }); 
```

在xml中：

```
 <TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="" /> 
```

我没有检查它，但我认为它会起作用，但要注意布局的大小。

# vba - 加快excel格式化vba代码？

> ID：14335757
> 
> 赞同：0
> 
> 时间：2013-01-15T10:30:46.840
> 
> 标签：vba, excel

我正在使用以下 vba 代码将文本字符串日期更改为 excel 中的实际日期，以便我可以将其用于逻辑比较等。

问题是我需要它来处理大约 4000 行并每周更新它，而且这段代码非常慢。

```
Sub Datechange()

Dim c As Range
    For Each c In Range("D2:D" & Range("D" & Rows.Count).End(xlUp).Row)
        c.Value = CDate(c.Value)
    Next c

End Sub 
```

有没有其他方法可以让我更快地做同样的事情？我假设它如此缓慢的部分原因是因为选择单个单元格和一遍又一遍地处理代码会产生开销，但我不知道如何以其他方式做到这一点？

底部的一些行也包含“未指定”字样，当代码到达这些单元格时，它会中断

> 运行时错误“13”：类型不匹配

有没有办法阻止这种情况的发生，以便以下代码可以完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T10:50:14.393

第一步是：

*   关闭屏幕更新
*   关闭计算
*   一次读取和写入范围

它可能看起来像下面的代码 - 最好包含一个错误处理程序，以避免在关闭屏幕更新或更改计算模式的情况下离开电子表格：

```
Sub Datechange()

    On Error GoTo error_handler

    Dim initialMode As Long

    initialMode = Application.Calculation 'save calculation mode
    Application.Calculation = xlCalculationManual 'turn calculation to manual
    Application.ScreenUpdating = False 'turn off screen updating

    Dim data As Variant
    Dim i As Long

    'copy range to an array
    data = Range("D2:D" & Range("D" & Rows.Count).End(xlUp).Row)

    For i = LBound(data, 1) To UBound(data, 1)
        'modify the array if the value looks like a date, else skip it
        If IsDate(data(i, 1)) Then data(i, 1) = CDate(data(i, 1))
    Next i

    'copy array back to range
    Range("D2:D" & Range("D" & Rows.Count).End(xlUp).Row) = data

exit_door:
    Application.ScreenUpdating = True 'turn screen updating on
    Application.Calculation = initialMode 'restore original calculation mode

    Exit Sub

error_handler:
    'if there is an error, let the user know
    MsgBox "Error encountered on line " & i + 1 & ": " & Err.Description
    Resume exit_door 'don't forget the exit door to restore the calculation mode
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:41:39.647

最好在一次“拉”中将值放入数组中，对数组进行操作并将其写回。这将规避昂贵的范围操作。

```
dim c as range
set c = Range("D2:D" & Range("D" & Rows.Count).End(xlUp).Row)

dim ArrValue() as Variant

set ArrValue = c.value 
```

下一步：遍历该数组，然后写回：

```
c.value = Arrvalue 
```

我没有时间测试代码，所以请自己更正，对不起。

# magento - Magento：将小部件工具添加到产品和类别所见即所得

> ID：14335763
> 
> 赞同：4
> 
> 时间：2013-01-15T10:31:03.257
> 
> 标签：magento, content-management-system, widget, wysiwyg

在 Magento CMS 页面的 WYSIWYG 编辑器上，有一个工具可以将 Magento 小部件添加到编辑器中。我希望这也可用于产品和类别描述的所见即所得。

我现在正在努力寻找编辑器的加载位置。任何人都可以让我知道我可能需要做什么，或者至少为我指明正确的方向吗？

提前致谢。

![在此处输入图像描述](../Images/5425ce4d29eb8818f001aba82d02c0d0.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-03T12:44:53.460

根据@David Manner的回答启用`add_widgets`并`add_variables`上课后`Mage_Adminhtml_Block_Catalog_Helper_Form_Wysiwyg_Content`，您可能会发现虽然这肯定会在所见即所得编辑器中启用这些功能并正常运行，但它只会在前端呈现原始小部件/变量代码（而不是适当的标记）。

您可以使用以下方法进行修复：-

导航`/app/design/frontend/package/theme/template/catalog/category/view.phtml`

寻找`<?php if($_description=$this->getCurrentCategory()->getDescription()): ?>`

在此行下方添加以下内容：-

```
<?php 
    $helper = Mage::helper('cms'); 
    $processor = $helper->getPageTemplateProcessor(); 
    $_description = $processor->filter($_description); 
?> 
```

这将在前端正确呈现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T16:10:32.477

在 Mage_Adminhtml_Block_Catalog_Helper_Form_Wysiwyg_Content 类下，配置数组“add_widgets”和“add_variables”中有两个标志。默认情况下，这两个都设置为 false。

然后将这些设置为 true 将在事件 cms_wysiwyg_config_prepare 上的 Mage_Widget_Model_Observer 类函数 prepareWidgetsPluginConfig 中捕获。

我建议重写 Mage_Adminhtml_Block_Catalog_Helper_Form_Wysiwyg_Content 以满足您的需求，但是将 add_widgets 和 add_variables 设置为 true 应该适用于类别和产品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-06T19:58:07.487

阅读所有答案后，我找到了优雅的解决方案。此解决方案仅重写一个 Block 类，不更改任何模板文件。

1.  重写 Mage_Adminhtml_Block_Catalog_Helper_Form_Wysiwyg_Content

    `<config> ... <global> <blocks> ... <adminhtml> <rewrite> <catalog_helper_form_wysiwyg_content>Agere_Wysiwyg_Block_Widget_Anywhere</catalog_helper_form_wysiwyg_content> </rewrite> </adminhtml> </blocks> ... </global> </config>`

2.  仅将配置数组“add_widgets”和“add_variables”中的两个标志更改为 true

    ```
    class Agere_Wysiwyg_Block_Widget_Anywhere extends Mage_Adminhtml_Block_Catalog_Helper_Form_Wysiwyg_Content {
        protected function _prepareForm() {
            //return parent::_prepareForm();
            $form = new Varien_Data_Form(array('id' => 'wysiwyg_edit_form', 'action' => $this->getData('action'), 'method' => 'post'));

            $config['document_base_url']     = $this->getData('store_media_url');
            $config['store_id']              = $this->getData('store_id');
            $config['add_variables']         = true;
            $config['add_widgets']           = true;
            $config['add_directives']        = true;
            $config['use_container']         = true;
            $config['container_class']       = 'hor-scroll';

            $form->addField($this->getData('editor_element_id'), 'editor', array(
                'name'      => 'content',
                'style'     => 'width:725px;height:460px',
                'required'  => true,
                'force_load' => true,
                'config'    => Mage::getSingleton('cms/wysiwyg_config')->getConfig($config)
            ));
            $this->setForm($form);

            return $this;
        }
    } 
    ```

3.  创建将处理来自类别或产品的内容的处理程序

    ```
    class Agere_Wysiwyg_Helper_Filter extends Mage_Core_Helper_Abstract {
        public function categoryAttribute($mainHelper, $result, $params) {
            return $this->process($result);
        }

        public function productAttribute($mainHelper, $result, $params) {
            return $this->process($result);
        }

        public function process($result) {
            /** @var Mage_Cms_Helper_Data $helperCms */
            $helperCms = Mage::helper('cms');
            $processor = $helperCms->getPageTemplateProcessor();

            return $processor->filter($result);
        }
    } 
    ```

4.  最后创建观察者，为所见即所得添加处理程序

    ```
    class Agere_Wysiwyg_Model_Observer extends Varien_Event_Observer {
        public function addWysiwygHandler(Varien_Event_Observer $observer) {
            /** @var Mage_Catalog_Helper_Output $_helperOutput */
            /** @var Agere_Wysiwyg_Helper_Filter $_helperFilter */
            $_helperOutput = Mage::helper('catalog/output');
            $_helperFilter = Mage::helper('agere_wysiwyg/filter');
            $_helperOutput->addHandler('categoryAttribute', $_helperFilter);
            $_helperOutput->addHandler('productAttribute', $_helperFilter);
        }
    } 
    ```

通过链接查看完整的代码快照[https://github.com/popovsergiy/magento-wysiwyg](https://github.com/popovsergiy/magento-wysiwyg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T14:04:22.610

认为更好的方法是创建一个新的观察者来监听同一事件，并使模块依赖于 Mage_Widget。然后我们的观察者将在 Mage_Widget 之后运行

# php - 如何在 cakephp 2.0 中加载插件文件

> ID：14335768
> 
> 赞同：1
> 
> 时间：2013-01-15T10:31:16.420
> 
> 标签：php, cakephp, cakephp-2.0

我正在为我的应用程序使用linkedin插件。对于 cakephp 1.3，它工作正常。我迁移到 cakephp 2.x。我了解您需要加载这样的插件

```
CakePlugin::load('Linkedin'); 
```

有效。但是在我的插件文件夹中，我有供应商文件夹。它是使用加载的

```
App::import('Vendor', 'Linkedin.oauth', array('file' => 'OAuth' . DS . 'oauth_consumer.php')); 
```

但它说找不到oauth_consumer。

我很感激任何帮助。

***更新 *** 我在我的应用程序中添加了linkedin[插件](https://github.com/inlet/CakePHP-LinkedIn)。我已经使用 CakePlugin::load('Linkedin'); 加载了我的插件。现在我得到错误

```
Fatal error: Call to a member function get() on a non-object in ....\Controller\Component\LinkedinComponent.php on line 95 
```

在 Linkedin 组件的第 95 行，这就是那里

```
 $consumer = $this->_createConsumer();
    $result = $this->Consumer->get($key, $secret, $this->apiPath . $path); 
```

它说在linkedincomponent上找不到get方法。但是get方法在oauth_consumer.php中。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:15:50.520

该插件未准备好 2.x。您必须自己升级它。

您可以很容易地通过查看文件夹和文件来了解这一点。在 2.x 中它会是

```
/Linkedin/Controller/Component/LinkedinComponent.php 
```

等（还要注意在 2.x 中很重要的大小写）

您很可能可以使用上述升级 shell 来做到这一点并使插件 2.x 兼容。

# javascript - Javascript url 404 错误

> ID：14335770
> 
> 赞同：0
> 
> 时间：2013-01-15T10:31:18.390
> 
> 标签：javascript, asp.net-mvc-4

我在加载网站时遇到问题。使用此代码：

```
$.ajax({
        type: "POST",
        //url: '@Url.Action("/TellFriendPopup")',
        url: '/Property/TellFriendPopup',

        data: { "SenderName": SenderName, "senderMail": senderMail, "receiverMail": receiverMail, "comments": comments, "urlLink": urlLink, "subjectId": subjectId },
    success: function (data) {
        $("#result").html("<ul><li>Name: " + data.nameret + "</li><li>Email: " + data.emailret + "</li><li>Message: " + data.messageret + "</li></ul>");

        $(".dialog").dialog("close");
    }, 
```

问题是我必须将代码移动到 JavaScript 文件，而不是 MVC4 视图，我可以在其中使用该`@Url.Action`方法。但它不适用于 JavaScript。它只是给了我这个错误`POST http://localhost:54717/Property/ContactPopup 404 (Not Found)`。如我所见，原因是它缺少全球化。因为网址应该看起来像这样 `http://localhost:54717/da/Property/ContactPopup`或 `http://localhost:54717/en/Property/ContactPopup`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:48:55.187

你可以`language`在`hidden`现场。

```
var language = document.getElementById('language`).value;

url: '/' + language + '/Property/TellFriendPopup' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:43:34.430

您可以获得路径名的第一个文件夹。只要那是每个页面上的语言代码。

```
var language = location.pathname.split("/")[1];

url: language + '/Property/TellFriendPopup' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:38:22.667

你可以尝试改变这个：`url: '/Property/TellFriendPopup',`

对此`url: '../Property/TellFriendPopup',`

# sql - SQL 多对多查询

> ID：14335775
> 
> 赞同：2
> 
> 时间：2013-01-15T10:31:36.250
> 
> 标签：sql, oracle, join, many-to-many

嘿，我正在尝试查询我的数据库表，这些表设置在与表之间的多对多关系中。这是有问题的表格的快速查询

```
 Homes ----<  Home_Feature  >---- Features 
```

我已经尝试创建下面的 sql 查询，但是有没有办法为每个家庭返回一行而不是这里返回的许多？或者我是否必须更改我的表结构以适应更好的解决方案？

```
 SELECT homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, features.feature_name
 FROM homes
 INNER JOIN home_feature
 ON homes.home_id = home_feature.home_id
 INNER JOIN features
 ON home_feature.feature_id = features.feature_id; 
```

查询的输出：

```
 Title     Feature   ....
 1  House A   Balcony    
 2  House A   Pool
 3  House A   Garage
 4  House B   Air-Con 
```

谢谢，任何帮助表示赞赏！

```
 ____________________EDIT__________________________ 
```

嘿，我非常感谢你们到目前为止所提供的帮助，并且想知道我是否可以在添加到此查询和从另一个表中选择列方面获得更多帮助。

当我只是在 SELECT 语句中添加另一个表的列和 FROM 子句中的表时，查询似乎不起作用？我使用的查询如下，但不起作用。再次感谢您的帮助。

```
SELECT homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, home_type.type_name,
    listagg(features.feature_name, ',') WITHIN GROUP (ORDER BY features.feature_name)  features
FROM homes, home_type
INNER JOIN home_feature
ON homes.home_id = home_feature.home_id
INNER JOIN features
ON home_feature.feature_id = features.feature_id
GROUP BY homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft; 
```

我收到此错误：

```
ORA-00904: "HOMES"."HOME_ID": invalid identifier
00904\. 00000 -  "%s: invalid identifier" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:00:14.973

Oracle 10g 版本：

```
SQL> SELECT homes.title, homes.living_room_count, homes.bedroom_count, homes.bathroom_count,
  2         wm_concat(features.feature_name) features
  3    FROM homes
  4         INNER JOIN home_feature
  5                 ON homes.home_id = home_feature.home_id
  6         INNER JOIN features
  7                 ON home_feature.feature_id = features.feature_id
  8   group by homes.title, homes.living_room_count, homes.bedroom_count, homes.bathroom_count;

TITLE   LIVING_ROOM_COUNT BEDROOM_COUNT BATHROOM_COUNT FEATURES
------- ----------------- ------------- -------------- ------------------------------
House A                 1             3              1 Balcony,Pool,Garage
House B                 1             2              2 Air-Con 
```

和 11g 我们可以使用[listagg](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)：

```
SQL> SELECT homes.title, homes.living_room_count, homes.bedroom_count, homes.bathroom_count,
  2         listagg(features.feature_name, ',') within group (order by features.feature_name)  features
  3    FROM homes
  4         INNER JOIN home_feature
  5                 ON homes.home_id = home_feature.home_id
  6         INNER JOIN features
  7                 ON home_feature.feature_id = features.feature_id
  8   group by homes.title, homes.living_room_count, homes.bedroom_count, homes.bathroom_count;

TITLE   LIVING_ROOM_COUNT BEDROOM_COUNT BATHROOM_COUNT FEATURES
------- ----------------- ------------- -------------- ------------------------------
House A                 1             3              1 Balcony,Garage,Pool
House B                 1             2              2 Air-Con 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:53:53.057

这取决于您使用的 RDBMS，例如对于 MySQL，您可以将[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)用于一行中的所有功能连接：

```
SELECT homes.home_id,
       max(homes.title), 
       max(homes.description), 
       max(homes.living_room_count), 
       max(homes.bedroom_count), 
       max(homes.bathroom_count),
       GROUP_CONCAT(features.feature_name) features
 FROM homes
 INNER JOIN home_feature
 ON homes.home_id = home_feature.home_id
 INNER JOIN features
 ON home_feature.feature_id = features.feature_id
 GROUP_BY homes.home_id 
```

在 ORACLE (11g r2) 中，您可以使用[LISTAGG](http://www.oracle-developer.net/display.php?id=515)

```
SELECT homes.home_id,
       max(homes.title), 
       max(homes.description), 
       max(homes.living_room_count), 
       max(homes.bedroom_count), 
       max(homes.bathroom_count),
       LISTAGG(features.feature_name,',') 
          WITHIN GROUP(order by features.feature_name) as features
 FROM homes
 INNER JOIN home_feature
 ON homes.home_id = home_feature.home_id
 INNER JOIN features
 ON home_feature.feature_id = features.feature_id
 GROUP_BY homes.home_id 
```

这也是[在 oracle 10 中模拟 GROUP_CONCAT 的另一种方法](http://explainextended.com/2009/04/05/group_concat-in-oracle-10g/)

# xamarin.android - 是否可以在 MonoDroid 中使用 HttpClient 类？

> ID：14335779
> 
> 赞同：2
> 
> 时间：2013-01-15T10:31:48.173
> 
> 标签：xamarin.android

我正在尝试在 MonoDroid 项目上使用 HttpClient 类，但它看起来像 System.Net.http 命名空间无效。

我尝试在项目中添加对 System.Net.http.dll 的引用，但它似乎在引用列表中不可用。

任何想法？

谢谢

![在此处输入图像描述](../Images/23e047df3082693bb17114b59ec08fce.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:42:19.070

HttpClient 是一个 .NET 4.5 类，在 Mono for Android 中尚不可用。Mono 本身在 3.0 版本中添加了对它的支持，但 Mono for Android 仍然基于 Mono 2.10。我知道 Xamarin 现在正在努力将适用于 Android 的 Mono（和 MonoTouch）更新到 Mono 3.0，但据我所知，还没有确定发布日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-05T09:22:51.887

我知道这是一个旧线程，但我刚刚看到 Xamarin 终于`System.Net.Http`在[Xamarin.Android 4.8](http://docs.xamarin.com/releases/android/xamarin.android_4/xamarin.android_4.8)中给出了，所以也想和你分享一下。

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T05:24:24.710

您不能使用`HttpClient`（还没有！），但您仍然可以使用该`System.Net.HttpWebRequest`对象，它确实`HttpClient`可以提供方便的包装器（尤其是在访问 Web API 控制器时）。

这是我正在处理的当前项目的示例（它使用的是 monodroid 端口`NewtonSoft.Json`，而不是标准端口`System.Runtime.Serialization.Json`）：

```
 private void AddARecord()
    {
        var cartesian = new Cartesian()
                            {
                                Description = "next item blah",
                                X = 5,
                                Y = 10,
                                Z = 15,
                            };

        string json = JsonConvert.SerializeObject(cartesian);

        var request = new HttpWebRequest(new Uri(_url)) {ContentType = "application/json", Method = "POST"};
        var sw = new StreamWriter(request.GetRequestStream(), System.Text.Encoding.ASCII);
        sw.Write(json);
        sw.Close();

        request.BeginGetResponse(ProcessJsonResponseForSingleResult, request);
    } 
```

...我正在点击的 Web API 控制器执行一些任意操作，保存我刚刚发送的对象，然后调整描述，以便我知道它有效。然后它将调整后的对象发回......

然后回调`ProcessJsonResponseForSingleResult`看起来像

```
 private void ProcessJsonResponseForSingleResult(IAsyncResult ar)
    {
        var request = (HttpWebRequest)ar.AsyncState;
        var response = request.EndGetResponse(ar);

        using (var outputStream = new StreamReader(response.GetResponseStream(), System.Text.Encoding.ASCII))
        {
            var jsonString = outputStream.ReadToEnd();
            Log.Info("PJRFSR", string.Format("JSON string: {0} - deserialising...", jsonString));
            var cartesian = JsonConvert.DeserializeObject<Cartesian>(jsonString);

            RunOnUiThread(() => UpdateUiTextView(cartesian.Description));
        }

    } 
```

是的，我知道，它使用我不再喜欢的 BeginAsync/EndAsync 模式，但如果你只需要完成某事，它确实有效。

# criteria-api - Spring-Data JPA：如何进行 jpa 条件查询

> ID：14335780
> 
> 赞同：1
> 
> 时间：2013-01-15T10:31:48.503
> 
> 标签：criteria-api, spring-data-jpa

鉴于这两个实体：

```
post         post_category
  - id         - post_id
  - title      - name
  - text 
```

我想使用 jpa 条件查询进行此查询：

```
select * from post
where post.id in (
  select post_id from post_category
  where name = '<category1>' and name = '<category2>' ... and name = '<categoryN>') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:30:21.410

查看您的查询草图，我认为它不会返回任何结果。我把它改成了意思`name in ('<category1>','<category2>', ...)`。这可能与您的情况不符。

这假定您已在您的类上正确设置映射以使 JPA 工作。例如

```
 class PostCategory {
        private String name;
        private Post post;
        ...
        @ManyToOne
        public Post getPost() {
            return post;
        }
        ... 
```

在这种情况下，您的 DAO 代码将类似于此（给定 List nameValues 对象）

```
 // Set up the subquery
    DetachedCriteria dc = DetachedCriteria.forClass(PostCategory.class)
        .setProjection(Projections.property("post.id"))
        .add(Restrictions.in("name", nameValues));

    Criteria crit = session.createCriteria(Post.class)
        .add(Subqueries.eqProperty("id", dc)); 
```

但是，如果您想要一个包含所有类别的 Post 对象列表，那么您需要为每个类别创建一个单独的 DetachedCriteria 实例，并将每个对象添加为 AND 的子查询。

# android - 如何根据它们的值更改列表项的背景颜色？

> ID：14335783
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:32:00.250
> 
> 标签：android, database, listview, user-interface, simplecursoradapter

我在数据库中有一个项目列表，其值为 0,1 或 2。我使用了一个 simplecursor 适配器和一个具有用于显示的列表视图的活动。现在我想更改每个项目的背景颜色以反映其值，即我希望值为 0 的项目的背景为绿色，值为 1 的项目为黄色，值为 2 的项目为红色。我该怎么做？我的适配器和活动当前具有黑色背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:37:09.077

您可以检查位置的值，`getView()`并为该索引行提供您想要的背景颜色。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T11:15:46.350

检查适配器的 getView() 内部，如下所示

```
if(item.getValue()==0)
   v.setBackgroundColor(Color.GREEN);
else if(item.getValue()==1)
    v.setBackgroundColor(Color.YELLOW);
else
    v.setBackgroundColor(Color.RED); 
```

`item`这是你的对象，`getValue()`你的值是 0、1、2。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T11:34:50.290

您需要为列表视图的单个列表项创建 XML 布局文件。然后创建一个适配器类。在其中膨胀该 xml 视图。并在 getView() 方法中的适配器内部检查您的逻辑。

这是我的适配器类 getView()..

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    ViewHolder holder;
      if (convertView == null) {

       convertView = mInflater.inflate(R.layout.home_list_item, null);
       holder = new ViewHolder();

       holder.mTxtContactName = (TextView) convertView.findViewById(R.id.txtContactName);
       holder.mTxtContactNumber = (TextView) convertView.findViewById(R.id.txtContactNumber);
       holder.mTxtContactAdd = (TextView) convertView.findViewById(R.id.txtContactAddress);
       holder.mImgCall = (ImageButton) convertView.findViewById(R.id.imgCall);
       holder.mImgSms = (ImageButton) convertView.findViewById(R.id.imgSms);

       convertView.setTag(holder);
      } else {
       holder = (ViewHolder) convertView.getTag();
      }

        holder.mTxtContactName.setText(list.get(position).getContactName());
        holder.mTxtContactNumber.setText(list.get(position).getContactNumber());
        holder.mTxtContactAdd.setText(list.get(position).getContactAdd());

        holder.mImgSms.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Log.d("con", "SMS");
                Intent smsIntent = new Intent(Intent.ACTION_SENDTO, Uri.parse("smsto:"+list.get(position).getContactNumber())); 
                context.startActivity(smsIntent);
            }
        });

        holder.mImgCall.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel://"+list.get(position).getContactNumber())); 
                context.startActivity(callIntent);
            }
        });

     return convertView;
     }

     static class ViewHolder {
      TextView mTxtContactName;
      TextView mTxtContactNumber;
      TextView mTxtContactAdd;
      ImageButton mImgCall;
      ImageButton mImgSms;
     } 
```

# wpf - 如何使用 NumericLabelProviderBase 类中的 UIElement[] CreateLabels 方法在绘图仪内的点中插入标签或文本

> ID：14335790
> 
> 赞同：0
> 
> 时间：2013-01-15T10:32:30.530
> 
> 标签：wpf, charts, wpf-controls, uielement, dynamic-data-display

我正在尝试覆盖 CreateLabels 以在绘图仪图表的特定点中插入标签或文本，但我需要以下帮助：1\. 参数 ( `ITicksInfo<double> ticksInfo`) 是什么意思，我应该向它发送什么 2\. 如何使用返回值将标签添加到已定义的轴，如 _stringaxis.LabelProvider

或者如果有更简单的方法可以在某个点添加文本，请告诉，

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:17:50.377

刚刚找到了在图表中添加漂亮标签的最简单方法。

```
CenteredTextMarker label = new CenteredTextMarker();
        label.Text = text;
//just dawing a line with one dot tall in the same position you want the label to be 

plotter.AddLineGraph(compositeDataSource1, 
                                 dptLine,
                                 label,
                                 new PenDescription(ComponentName)); 
```

我隐藏了传奇，并通过做我自己建立了一个定制的传奇

```
plotter.LegendVisible = false; 
```

# javascript - 从javascript中的文本获取尺寸

> ID：14335792
> 
> 赞同：0
> 
> 时间：2013-01-15T10:32:33.727
> 
> 标签：javascript

我有一个类似于此的字符串：

```
tumblr_mgn6mfe9aD1rbaz5bo1_500.jpg (JPEG Image, 500 × 705 pixels) 
```

我想剥离文本，直到获得值 500 和 705。我希望它们作为两个单独的值。我怎样才能在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:35:11.907

```
var match = /(\d+) × (\d+) pixels\)$/.exec('tumblr_mgn6mfe9aD1rbaz5bo1_500.jpg (JPEG Image, 500 × 705 pixels)') 
```

然后`match[1]`并且`match[2]`将包含您要查找的两个值（作为字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:37:27.827

以下是匹配维度的方法：

```
var result = (/(\d+)\s*(×|x)\s*(\d+)\s*pixels\)$/g).exec('tumblr_mgn6mfe9aD1rbaz5bo1_500.jpg (JPEG Image, 500 × 705 pixels)');
console.log(result[1]); //"500"
console.log(result[3]); //"705" 
```

# powershell - 将倒引号添加到 PowerShell 2.0 中的变量值

> ID：14335794
> 
> 赞同：2
> 
> 时间：2013-01-15T10:32:41.453
> 
> 标签：powershell

我想有一个变量值为“1/14/2013 10:00:00”（包括倒引号）。下面是代码：

```
$a = Get-Date
$b = $a.AddDays(-1)
$b = $b.ToShortDateString();
$StartTime = "10:00:00 PM"
$EndTime = "11:00:00 PM"
$before = $b + " " + $StartTime
$after = $b + " " + $EndTime 
```

经过进一步研究，我发现微软报告了一个问题。可以在[这里找到](http://connect.microsoft.com/PowerShell/feedback/details/376207/executing-commands-which-require-quotes-and-variables-is-practically-impossible#details)

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T16:37:22.747

如果您仍然需要在字符串中使用变量，则可以使用转义引号，例如：

```
PS> $before = "`"$b $EndTime`""
PS> $before
"1/14/2013 11:00:00 PM" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:02:38.443

如果您需要在字符串中包含双引号，请用单引号将字符串括起来`' '`。如果您需要单个问题，请用双引号将字符串括起来。前任。：

```
$StartTime = '"10:00:00 PM"' 
```

输出：

```
[13:00:38] PS-ADMIN > $StartTime
"10:00:00 PM" 
```

# c# - 在 C# Visual Studio 项目中嵌入 HTML 文件，然后使用 Internet Explorer 打开它

> ID：14335796
> 
> 赞同：1
> 
> 时间：2013-01-15T10:32:43.617
> 
> 标签：c#, .net, winforms

我想将 HTML 文件作为帮助文件嵌入到 Visual Studio 中的 C#.Net 项目中。

稍后我想通过单击 LinkLabel 来打开它。

不太清楚，首先如何将此文件添加到我的项目资源中，设置路径然后打开它。

它应该与发布的安装文件一起嵌入，以便用户安装应用程序后，他们将能够打开此嵌入文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:38:54.063

加载您的嵌入式页面可以通过[msdn](http://support.microsoft.com/kb/319292?wa=wsignin1.0)中的以下内容来实现：

```
try
{
   _assembly = Assembly.GetExecutingAssembly();
   _textStreamReader = new StreamReader(_assembly.GetManifestResourceStream("MYHTMLFile.html"));
}
catch
{
   MessageBox.Show("Error accessing resources!");
} 
```

该页面还详细介绍了嵌入的步骤。

在您的情况下（我认为），您必须在使用 IE 加载之前将流保存到磁盘。

# php - 你能给我一个跨域的例子吗

> ID：14335798
> 
> 赞同：0
> 
> 时间：2013-01-15T10:32:46.947
> 
> 标签：php, javascript, jquery, ajax, jsonp

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

例如，我有一个 2 域“ [http://domain1.com/info.php](http://domain1.com/info.php) ”，另一个是“ [http://domain2.com/script.html](http://domain2.com/script.html) ”

现在第一个域“ [http://domain1.com/info.php](http://domain1.com/info.php) ”正在像这样发布 json 编码数据

```
{
    "str_info": [
        {
            "str_name": "Mark",
            "str_age": "22"
        },
        {
            "str_name": "Aliza",
            "str_age": "52"
        }
    ]
} 
```

第二个域“ [http://domain2.com/script.html](http://domain2.com/script.html) ”所做的是检索和操作第一个域给出的数据。

我不知道如何连接和检索来自第一个域“ [http://domain1.com/info.php](http://domain1.com/info.php) ”的数据到脚本的第二个域。如果可能的话，你能告诉我如何使用 jsonp、jquery、ajax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:35:23.300

使用回调函数发送数据，例如

```
callback({
  "str_info":[{"str_name":"Mark","str_age":"22"},{"str_name":"Aliza","str_age":"52"}]
}); 
```

然后在接收数据的域上使用函数

```
<script>
    function callback(i){
    //maniputlate i (json data) here
    }
</script>
<script type="text/javascript" src="http://domain1.com/info.php"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:45:22.210

来自 jQuery.org

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。
> 
> 脚本和 JSONP 请求不受同源策略限制。

如果跨域工作，您可以使用一种名为[JSONP](http://en.wikipedia.org/wiki/JSONP) 的方法 ajax 请求添加一个参数`?callback=callbackname`，您的服务器会回答

```
callbackname
(
    {
        "str_info": [
            {
                "str_name": "Mark",
                "str_age": "22"
            },
            {
                "str_name": "Aliza",
                "str_age": "52"
            }
        ]
    }
); 
```

然后该函数在您的客户端上执行。您可以使用[jQuery](http://api.jquery.com/jQuery.getJSON/)非常简单地完成此操作

```
$.getJSON("http://domain1.com/info.php?callback=?", function(data) {
  alert("success");
}); 
```

在 PHP 中，你会像这样包装你的结果（简单示例）

```
echo $_GET['callback'], '(' , json_encode( $data ), ')'; 
```

# c# - 文件'src'在这里无效，因为它没有公开类型？

> ID：14335800
> 
> 赞同：1
> 
> 时间：2013-01-15T10:32:52.043
> 
> 标签：c#, asp.net, webserver

这是一个非常奇怪的错误。该网站将运行一段时间并突然停止并显示此错误消息：![错误](../Images/4ce40741217826427b6cdf186d88fa00.png)

当这个错误出现时，我所需要的就是将 web-application .dll 文件重命名为其他文件并将其恢复为原始名称！

请问有什么建议吗。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T18:58:52.457

如果您的页面的 ASCX 控件的 @Register 标记将 Src 设置为 .ascx.cs 文件而不是 .ascx 文件，您也会收到此错误。

也就是说，如果你有这个：

```
<%@ Register TagPrefix="myLib" TagName="myControl" Src="~/Controls/myControl.ascx.cs" %> 
```

...而不是这个：

```
<%@ Register TagPrefix="myLib" TagName="myControl" Src="~/Controls/myControl.ascx" %> 
```

当我遇到这个错误时，我只是从@Register 标记中删除了“.cs”并重新构建。问题解决了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T06:39:46.687

我无法解决这个问题，但是当我重新发布网络应用程序时，问题就解决了。

这可能是因为某些 Dll 文件已损坏。

# powerbuilder - Powerbuilder 中的 C# 结果窗口

> ID：14335802
> 
> 赞同：0
> 
> 时间：2013-01-15T10:32:58.353
> 
> 标签：powerbuilder

从我记事起，我就是一名 Powerbuilder。我喜欢使用 DataWindows 和 DataStores，所以我的技术确实依赖于此。因为我现在正在尝试学习 C#。我发现我可以使用 DataGrid 和 ListView。但是我使用DataGrid时的问题是我不能让它看起来像ListView，而ListView的问题是我不能按行和列单击它。我只能突出显示 A 列中的行。

有没有像 C# 一样的 DataWindow，我也可以做 dw.Filter() ，更新，插入，删除..等等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:29:13.370

我们也使用 DevExpress 控件（甚至在我们的 PB 应用程序中......），XtraGrid 非常强大，而且看起来非常漂亮，尤其是与 PB 的内置控件相比。不过，DevExpress 控件不是免费的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:52:24.870

看看 DevExpress 控件。我认为在 XtraTreeList 和 XtraGrid 之间你可以得到你想要的。您必须将它们绑定到外部数据源。他们没有像 DataWindow 那样内置。这些是 Windows 窗体控件。WPF 和其他平台也有类似的控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T18:28:43.690

我意识到这是一个老问题，但这个问题有一个非常明确的答案。不，.NET 框架中没有像数据窗口这样的功能。

与第四代控件的 DataWindow 相比，DataGrid 类似于第三代控件。

这就是在 .NET 中开发复杂的业务应用程序或比示例应用程序更复杂的应用程序要花费更多时间的原因。您确实可以选择购买 3rd 方工具，但您将拥有劣质产品，并且您需要支付现金。

Telerik 有一些不错的控件，但它们非常昂贵，并且有一点学习曲线，更不用说它们仍然无法与数据窗口进行比较。

# nunit - 在测试中抛出的断言不能在 nunit 中的 TestFinished 或 RunFinished 中捕获？

> ID：14335807
> 
> 赞同：0
> 
> 时间：2013-01-15T10:33:14.467
> 
> 标签：nunit

我编写了一个代码来断言一些值。我还扩展了 nunit 以便 public void TestFinished(TestResult result){}

在测试结束时运行。

但是，我对它的潜在用途感到困惑。我想 TestFinished 方法是用来写一些关于测试运行的有用数据。

但似乎没有办法在 TestFinished 方法中引用 Asserts 抛出的异常。

# java - Spring AOP 方面破坏了上下文

> ID：14335812
> 
> 赞同：0
> 
> 时间：2013-01-15T10:33:32.553
> 
> 标签：java, spring, aop, aspectj

我面临着一个非常奇怪的麻烦。我在我的应用程序中使用注释驱动的 AspectJ。当我尝试继续我的方法时，我在自动装配的字段上收到空指针。（在服务类中，我在拦截器中调用了哪些方法）。在使用 AspectJ 之前，spring 上下文工作得很好。我正在提供我的代码，也许我只是没有看到那个小错误:(花了太多时间找到它。:(

这里是 Aspect 类：

```
@Aspect
@Component
public class SomeInterceptor{

private static final Logger LOGGER = LoggerFactory.getLogger(SomeInterceptor.class);

@Autowired
@Qualifier("webServiceResponseFactory")
protected WebServiceResponseFactory responseFactory;

@Autowired
@Qualifier("configBean")
protected ConfigBean configBean;

public SomeServiceInterceptor () {
    LOGGER.info("Some service interceptor was created");
}

@Around("execution(public * pathToMyClassIsCorrect.*(..))")
public Object invoke(ProceedingJoinPoint pjp) throws Throwable {
    String securityTokenForMethod = pjp.getArgs()[0].toString();
    if (securityTokenForMethod != null) {
        LOGGER.info("Proceeding the securityTokenCheck before calling method "
                + pjp.getSignature().getName());
        if (validateAccessToken(securityTokenForMethod)) {
            return responseFactory
                    .buildFailedResponse("securityAccessToken is invalid for this request");
        }
    } else {
        throw new Throwable("There was an exception before calling method "
                + pjp.getSignature().getName());
    }

    try {
        LOGGER.info("Calling method " + pjp.getSignature().getName());
        Object methodToInvoke = pjp.proceed();
        LOGGER.info("Method " + pjp.getSignature().getName()
                + " was called successfully");
        return methodToInvoke;
    } catch (Throwable e) {
        LOGGER.info("Method " + pjp.getSignature().getName() + "threw an exception. ");
        boolean verboseError = Boolean.parseBoolean(pjp.getArgs()[1].toString());

        return responseFactory.buildErrorResponse(e, verboseError);
    }
}

} 
```

我的 app-context.xml 包含并启用了所有组件扫描包。

非常感谢任何帮助。

编辑

另外，在调用之后我收到这样的错误：

```
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container 
```

编辑 2.0：

只是尝试在没有方面的情况下启动服务，工作正常。所以问题确实是由拦截服务方法的方面引起的。:\

编辑 3.0：

我在构造函数中添加了一个记录器。所以，正如我所见，甚至没有创建对象。不知道可能是什么原因。

编辑 4.0：AspectJ 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE aspectj PUBLIC
    "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
<aspectj>
<weaver options="-verbose -showWeaveInfo -debug">
    <!-- only weave classes in our application-specific packages -->
    <include within="com.store.*"/>
    <include within="com.store.services.*"/>
</weaver>
<aspects>
    <!-- weave in just this aspect -->
    <aspect name="com.store.services.StoreServiceAspect"/>
</aspects>
</aspectj>

<weaver options="-verbose">
<include within="javax.*" />
<include within="org.aspectj.*" />
<include
    within="(!@NoWeave com.store.services.*) AND com.bsro.storewebsrv.services.*" />

<dump within="com.store.services.*" />
</weaver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:46:37.870

Your error-handling code is dangerously vulnerable:

```
LOGGER.info("Method " + pjp.getSignature().getName() + "threw an exception. ");
boolean verboseError = Boolean.parseBoolean(pjp.getArgs()[1].toString()); 
```

There is a number of opportunities for a new exception that masks the one you just caught. Make the exception handler bulletproof: don't parse anything and don't expose yourself to an NPE by calling methods on possibly-null values.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:07:25.817

我基于您的最后评论，这是 AspectJ 方面。

`@Autowired`不适用于 AspectJ 方面。解决方法是使用工厂方法`aspectOf`以这种方式注入您在方面所需的内容：

```
<bean class="SomeInterceptor" factory-method="aspectOf">
  <property name="webServiceResponseFactory" ref="..."/>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:14:25.513

找到了解决方案。问题是ltw 无法正常工作，因为Tomcat 的应用程序上下文中缺少“Loader”。因此，按照 Spring 中的 8.8.3 参考指南，几乎修复了它。由于上述原因，未找到“aspectOf”。每当编织失败时都会引发此错误。此外，由于编织错误，自动装配的字段变为空。

# python - 使用 super 制作管道？

> ID：14335817
> 
> 赞同：3
> 
> 时间：2013-01-15T10:33:46.257
> 
> 标签：python, super, boilerplate

我正在考虑如何使用`super`在 python 中制作管道。我必须对流进行一系列转换，我认为这样做的好方法是：

```
class MyBase(object):
    def transformData(self, x):
        return x

class FirstStage(MyBase):

    def transformData(self, x):
        y = super(FirstStage, self).transformData(x)
        return self.__transformation(y)

    def __transformation(self, x):
        return x * x

class SecondStage(FirstStage):

    def transformData(self, x):
        y = super(SecondStage, self).transformData(x)
        return self.__transformation(y)

    def __transformation(self, x):
        return x + 1 
```

它按我的预期工作，但有可能重复。如果我有 N 个阶段，我将有 N 个相同`transformData`的方法，我唯一改变的是当前类的名称。

有没有办法删除这个样板？我尝试了一些东西，但结果只向我证明我没有完全理解它是如何`super`工作的。

我想要的是只定义方法`__transformation`并自然地继承一个`transformData`将在 MRO 中上升的方法，调用该类的`transformData`方法，然后`__transformation`在结果上调用当前类。是否有可能或者我必须`transformData`为每个子类定义一个新的相同？

* * *

我同意这是实施管道的一种糟糕方式。这可以通过更简单（和更清晰）的方案来完成。我认为这是我可以对现有模型进行的最少修改，以便在不过多修改代码的情况下从现有类中获取管道。我同意这不是最好的方法。这将是一个诡计，应该避免诡计。我也认为它是一种更好地理解如何`super`工作的方式。

布欧特。出于好奇......是否可以在不`transformData`重复的情况下在上述方案中做到这一点？这是一个真正的疑问。是否有一种技巧可以以将其中的调用更改为在当前类上调用`transformData`的方式进行继承？`super`

这将是一个非常不清楚、难以理解、愚蠢的骗局。我知道。但有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:39:06.607

我不认为对管道使用继承是正确的方法。

相反，考虑这样的事情——这里有一个“简单”的例子和一个参数化的例子（一个使用`__call__`魔法方法的类，但返回一个封闭的函数也可以，或者甚至通过 'JITing' 一个`eval`）。

```
def two_power(x):
    return x * x

def add_one(x):
    return x + 1

class CustomTransform(object):
    def __init__(self, multiplier):
        self.multiplier = multiplier

    def __call__(self, value):
        return value * self.multiplier

def transform(data, pipeline):
    for datum in data:
        for transform in pipeline:
            datum = transform(datum)
        yield datum

pipe = (two_power, two_power, add_one, CustomTransform(1.25))
print list(transform([1, 2, 4, 8], pipe)) 
```

会输出

```
[2.5, 21.25, 321.25, 5121.25] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:52:56.010

问题是在这里使用继承在 OOP 方面相当奇怪。在定义类时，你真的需要定义整个转换链吗？

但是这里最好忘记OOP，任务不是OOP。只需定义转换函数：

```
def get_pipeline(*functions):
    def pipeline(x):
        for f in functions:
            x = f(x)
        return x
    return pipeline

p = get_pipeline(lambda x: x * 2, lambda x: x + 1)

print p(5) 
```

一个更短的版本在这里：

```
def get_pipeline(*fs):
    return lambda v: reduce(lambda x, f: f(x), fs, v)

p = get_pipeline(lambda x: x * 2, lambda x: x + 1)
print p(5) 
```

这是一个面向对象的解决方案。如果与前一个相比，它是相当笨拙的：

```
class Transform(object):
    def __init__(self, prev=None):
        self.prev_transform = prev

    def transformation(self, x):
        raise Exception("Not implemented")

    def transformData(self, x):
        if self.prev_transform:
            x = self.prev_transform.transformData(x)
        return self.transformation(x)

class TransformAdd1(Transform):
    def transformation(self, x):
        return x + 1

class TransformMul2(Transform):
    def transformation(self, x):
        return x * 2

t = TransformAdd1(TransformMul2())
print t.transformData(1) # 1 * 2 + 1 
```

# php - codeigniter db->select 自动处理 mysql 连接

> ID：14335819
> 
> 赞同：1
> 
> 时间：2013-01-15T10:33:48.160
> 
> 标签：php, mysql, codeigniter, activerecord, left-join

## 桌子

```
ID|owner_id|work_id|lorem|etc|
1 |00123   | 00213 |XXXXX|XXX|
2 |00124   | 00213 |XXXXX|XXX|

owner_id (fk) owners.id (owners[id,name,etc])

work_id (fk) work.id (work[id,name,etc]) 
```

问题是我可以设置`codeigniter`，当我

```
select(table.*,work.name as work,owners.name as owner) from table 
```

它会自动处理连接，因为该表已经包含 fk-ref ？或者我必须包括`join('owner','owner.id=table.owner_id)`？

实际上我想要的是，当我选择一个包含 fk 的表时，只需在 ref 表上传递列名，这个 fk 列就会被 ref 行中的一列替换，而不必担心在我的模块中为此创建特定函数每个查询。

**我目前的解决方案：**

是为每个包含关系的表创建一个视图，并用所需的 ref 值替换所有 fk 列，但是由于我有 6 个表，其中 5 个用 fk，我现在在 db 中有 6 个表和 5 个视图（11 个表），即对我来说真的很困惑，所以有什么更聪明的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:43:57.547

我认为您对 FK 是什么以及它在表格中的作用感到有些困惑。

FK 约束在数据存在时授予数据完整性并关联表中的数据。它不加入任何东西。

如果要跨相关表选择记录，可以使用

```
SELECT * FROM table1,table2 WHERE table1.K1 = table2.FK1 
```

或者

```
SELECT * FROM table1 JOIN table2 ON table1.K1 = table2.FK1 
```

是的，您需要告诉 CodeIgniter 进行这些查询

# django - 通过 URL 执行管理命令

> ID：14335822
> 
> 赞同：1
> 
> 时间：2013-01-15T10:34:00.737
> 
> 标签：django, scrapy

我有以下管理命令（website.py）

```
from __future__ import absolute_import
from django.core.management.base import BaseCommand

class Command(BaseCommand):

    def run_from_argv(self, argv):
        self._argv = argv
        self.execute()

    def handle(self, *args, **options):
        from scrapy.cmdline import execute
        execute(self._argv[1:]) 
```

我想通过 URL 执行这个命令：/crawl/update-now/ 视图是：

```
from django.core import management

def update_index(request):
    management.call_command('website', 'crawl spider') 
```

但它不起作用：

```
Command' object has no attribute '_argv' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:46:25.677

I think problem is that `run_from_argv` is internal Django method and called by django.core.management.ManagementUtility. And you should not implement it by yourself, self._argv is not set anywhere. Arguments are already available in handle().

And your approach has some disadvantages.

First of all, due to synchronous nature of Django, if your URL is "heavy" it can take a lot of time to get it and parse. Instead of it, I'm strongly recommend you to take a look at [Celery](http://pypi.python.org/pypi/django-celery). It is more "right" way to execute tasks from views and has no problems with performance.

# bash - 在没有 sudo 的 shell 脚本中执行单个命令

> ID：14335825
> 
> 赞同：13
> 
> 时间：2013-01-15T10:34:11.243
> 
> 标签：bash, homebrew, sudo

我有一个使用 sudo 运行的简单 shell 脚本，因为大多数脚本都需要它，但脚本中的命令之一是 Homebrew 安装，不能使用 sudo 执行。

所以，我的问题是当使用 sudo 执行 shell 脚本时，我如何以当前用户身份执行子命令，然后使用 sudo 继续脚本的其余部分。

再次提示用户输入他的密码并不实用，因为脚本需要很长时间才能执行，并且需要等待 5-10 分钟才能得到提示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T10:48:10.677

`sudo`最简单的方法是从脚本中运行子命令。要运行的用户 id 可以通过 $SUDO_USER 获得（查看输出`sudo env`）：

```
sudo -u $SUDO_USER ./exec_as_normal_user.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:47:51.217

使用实例化外壳

`sudo -u $USER_NAME bash`

并通过调用执行shell脚本，

./program.sh

# python - 限制用户只能查看网站的特定部分-Django

> ID：14335832
> 
> 赞同：1
> 
> 时间：2013-01-15T10:34:29.760
> 
> 标签：python, django, user-interface, django-views

我正在使用 Django，并且只需要某些“试用”用户来激活网站的某个部分——有什么想法可以有效地做到这一点吗？

我正在考虑给付费客户一个特定的 ID，并将其链接到网站的 URL 以获得许可。

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:30:43.580

我会使用这样的视图装饰器：

```
def paying_only(view):
    def _decorated(request, *args, **kwargs):
        if not is_paying(request.user):
            redirect('page_explaining_that_this_is_for_paying_users_only')
        return view(request, *args, **kwargs)
    return _decorated

@paying_only
def some_view(request):
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:58:08.443

我决定发布我的解决方案，我什至可能会得到一些反馈。我在设置中定义的某些路径上有一个中间件阻止请求/响应，首先是中间件：

```
import re
from django.conf import settings
from django.shortcuts import redirect

class InvitationRequired(object):

    def process_response(self, request, response):

        if not settings.CLOSED_BETA_ACTIVE:
            return response

        if (hasattr(request, 'user')
                and hasattr(request.user, 'is_authenticated')
                and request.user.is_authenticated()):
            return response
        elif (request.path in
                settings.CLOSED_BETA_INVITATION_MIDDLEWARE_EXCEPTED_URIS):
            return response
        elif response.status_code < 200 or response.status_code >= 300:
            return response
        else:
            for regex in \
                settings.CLOSED_BETA_INVITATION_MIDDLEWARE_EXCEPTED_PATTERNS:
                if re.compile(regex).match(request.path):
                    return response

        return redirect(settings.CLOSED_BETA_INVITATION_MIDDLEWARE_REDIRECT) 
```

在 settings.py 我有这样的东西：

```
CLOSED_BETA_ACTIVE = True

CLOSED_BETA_INVITATION_URL = '/invitation/'
CLOSED_BETA_INVITATION_MIDDLEWARE_REDIRECT = CLOSED_BETA_INVITATION_URL

CLOSED_BETA_INVITATION_MIDDLEWARE_EXCEPTED_PATTERNS = (
    r'^/api/v1/',
    r'^/static/',
    r'^/media/',
    r'^/admin/',
    r'^/registration/',
    r'^/',
) 
```

希望它很清楚，至少它可以给你一个不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:38:23.527

这是一个非常广泛的问题。一种解决方案是在每个用户上存储一个`trial`标志。在经过身份验证的请求中，检查`User.trial`您的控制器（可能还有视图）并有选择地允许/拒绝访问端点或有选择地呈现页面的某些部分。

如果您希望使用 Django 的内置功能，您可以将“试用”视为权限或用户组。

# ios - 如何知道视图层次结构中是否显示 UIActionSheet？

> ID：14335834
> 
> 赞同：1
> 
> 时间：2013-01-15T10:34:37.687
> 
> 标签：ios, objective-c, uiactionsheet

如何知道是否有`UIActionSheet`演出`View Hierarchy`？我也想参考一下`UIActionSheet`，有什么好主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T12:24:07.737

请注意，在 iOS6 上，您需要递归搜索才能找到 UIActionSheet，它现在不是 UIWindow 的直接子视图。

```
static UIView *actionSheet = nil;
-(void)findActionSheetInSubviewsOfView:(id)view
{
    if (actionSheet) {
        return;
    }
    if ([[view valueForKey:@"subviews"] count] != 0) {
        for (id subview in [view valueForKey:@"subviews"]) {
            if ([subview isKindOfClass:[UIActionSheet class]]) {
                actionSheet = subview;
            }
            else
                [self findActionSheetInSubviewsOfView:subview];
        }
    }
}

-(UIActionSheet*) actionSheetShowing {
    actionSheet = nil;
    for (UIWindow* window in [UIApplication sharedApplication].windows) {
        [self findActionSheetInSubviewsOfView:window];
    }

    if (actionSheet) {
        return (UIActionSheet*)actionSheet;
    }
    return nil;
} 
```

# android - 如何在 Android 中有效地绘制放大的像素艺术？

> ID：14335835
> 
> 赞同：3
> 
> 时间：2013-01-15T10:34:43.813
> 
> 标签：android, bitmap, pixel, memory-efficient

我正在制作一款包含大量像素艺术的游戏。我的游戏中的标准按钮约为 12x12 像素，并按比例放大了五倍以进行显示。根据屏幕的不同，所有字符也都放大了两倍。问题是，如果我将所有这些图像存储到放大的位图，我会在 Android 中遇到内存不足错误。如果我每次都尝试按比例放大它们进行绘图，那么游戏运行速度非常慢。

这就是我编写自己的 PixelArtBitmap 类的原因。它可以生成出色的图像并且只需要很少的内存，但是效率非常低，大大降低了我的 fps。它仍然比每次绘制位图都要快。这是课程：

```
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;

class PixelArtBitmap{
    private int[][] pixels = null;
    private boolean[][] visible = null;

    private float width = 0;
    private float height = 0;

    private float drawWidth = 0;
    private float drawHeight = 0;

    private int pixelsX = 0;
    private int pixelsY = 0;

    private static Paint boxPaint = new Paint();

    public PixelArtBitmap(Bitmap bitmap, float scale){
        boxPaint.setStrokeWidth(0);

        pixels = new int[bitmap.getWidth()][bitmap.getHeight()];
        visible = new boolean[bitmap.getWidth()][bitmap.getHeight()];

        pixelsX = bitmap.getWidth();
        pixelsY = bitmap.getHeight();

        //Utility is an another class of mine, providing information about the device
        drawWidth = scale * Utility.getScaleWidth();
        drawHeight = scale * Utility.getScaleHeight();

        width = pixelsX * drawWidth;
        height = pixelsY * drawHeight;

        for(int x = 0 ; x < bitmap.getWidth() ; x++){
            for(int y = 0 ; y < bitmap.getHeight() ; y++){
                pixels[x][y] = bitmap.getPixel(x,y);

                if(Color.alpha(pixels[x][y]) == 0) visible[x][y] = false;
                else visible[x][y] = true;
            }
        }

        bitmap.recycle();
        bitmap = null;
    }

    public void draw(float x, float y, Canvas canvas){
        for(int drawY = 0 ; drawY < pixelsY ; drawY++){
            for(int drawX = 0 ; drawX < pixelsX ; drawX++){
                if(visible[drawX][drawY]){
                    boxPaint.setColor(pixels[drawX][drawY]);
                    canvas.drawRect(x + drawWidth * drawX, y + drawHeight * drawY,
                            x + drawWidth * (drawX + 1), y + drawHeight * (drawY + 1), boxPaint);
                }
            }
        }
    }
} 
```

那么，我怎样才能让这门课更快，或者有没有完全不同的方法可以正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:52:01.450

除了创建一个新的更大尺寸的位图，您还可以使用以下方法将更小的位图直接绘制成新的尺寸；

```
Canvas.drawBitmap(Bitmap, null, dstRect, Paint); 
```

这种方法应该将原始位图的大小重新调整为`dstRect`大小，我很确定有一个设置可以选择最近邻过滤。这应该使您能够将较小的图像直接绘制成所需的大小，同时保留像素艺术的外观。

# facebook - 我可以让 Facebook 应用程序简单地链接到另一个页面吗？

> ID：14335836
> 
> 赞同：0
> 
> 时间：2013-01-15T10:34:45.780
> 
> 标签：facebook, hyperlink

我想尝试在我的书页中添加一个应用程序，以直接链接到亚马逊上的书页，或者（第二个最佳选择）链接到书的“在哪里购买这本书”的 Facebook 页面。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:40:19.443

这是一个链接到 PHP 脚本[的简单示例，您可以使用](http://blog.apnafundaz.com/2009/08/facebook-hello-world-application/)[元刷新](https://stackoverflow.com/questions/13546297/php-redirect-to-url-variable)在要链接的页面中刷新

# jquery - Event.type 在 Mozilla Firefox 中不起作用

> ID：14335838
> 
> 赞同：2
> 
> 时间：2013-01-15T10:34:52.527
> 
> 标签：jquery

通过引用此[**链接**](http://api.jquery.com/event.type/)，我采用了一个名为`Event.Type`my 的属性以`script`满足特定需求，并且它在`IE9`. 在那之后，在制作时`compatibility test`，我才知道它不起作用`Mozilla FireFox`。此外，它在 和 中没有任何`Google Chrome`问题`Safari`。

## [*演示*](http://jsfiddle.net/Kjk7a/)

有什么线索可以解决这个问题吗？或者是否有任何替代方法可以`Event.Type`在 jquery 中替代。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:48:53.430

在大多数常见浏览器中，该`event`对象是全局定义的，因此它在您的处理程序范围内可用`load`。但是，在 Firefox 中，该`event`对象不是全局定义的，并且`ReferenceError: event is not defined`会返回错误（`Ctrl+Shift+J`如果是 Firefox，则用于获取错误控制台）。

正如您对问题的评论所暗示的那样，最佳做法是将`event`对象传递给处理程序函数，如下所示：

```
$(document).ready(function() { 
    $(window).load(function(event){ alert(event.type); }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T07:44:39.133

这是我所做的；这个想法是将变量传递`event`给内部函数代码。例子

```
var load = function(){
        var output = document.getElementById('preview');
        output.src = URL.createObjectURL(event.target.files[0]);
} 
```

然后现在我听了这样的 oncHange 事件：

```
 //passing the event varible along inside ,,this might work on chorme 
 //without passing events but not in firefox and now fixed!!

$( "#uploadBtn" ).change(function(event) {
        var output = document.getElementById('preview');
        output.src = URL.createObjectURL(event.target.files[0]);
      }); 
```

# ios - 单击按钮时退出应用程序 - iOS

> ID：14335848
> 
> 赞同：35
> 
> 时间：2013-01-15T10:35:27.107
> 
> 标签：ios, xcode, click, exit

> **可能重复：**
> [在 iOS 4.0 中退出应用程序](https://stackoverflow.com/questions/3097244/exit-application-in-ios-4-0)

我有一个 AlertView，它显示一些文本和一个“确定”按钮。单击确定按钮时有什么方法可以退出应用程序？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-15T10:40:19.430

`exit(X)`，其中 X 是一个数字（根据文档）应该可以工作。但它不被 Apple 推荐，也不会被 AppStore 接受。为什么？由于这些准则（我的一个应用程序被拒绝）：

> 我们发现您的应用包含一个用于退出应用的 UI 控件。这不符合 App Store 审查指南所要求的 iOS 人机界面指南。
> 
> 请参阅随附的屏幕截图以供参考。
> 
> iOS 人机界面指南指定，
> 
> “随时准备停止当人们按下 Home 按钮打开不同的应用程序或使用设备功能（例如手机）时，iOS 应用程序会停止。特别是，人们不会点击应用程序关闭按钮或从菜单中选择退出。为了提供良好的停止体验，iOS 应用程序应该：
> 
> 尽快并尽可能多地保存用户数据，因为退出或终止通知可能随时到达。
> 
> 停止时保存当前状态，尽可能详细地保存，以便人们在再次启动应用程序时不会丢失上下文。例如，如果您的应用显示滚动数据，请保存当前滚动位置。”
> 
> **> 删除任何退出应用程序的机制是适当的。**

另外，如果您尝试隐藏该功能，用户会将其理解为崩溃。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-01-15T10:38:37.217

您可以使用 exit 方法退出 ios 应用程序：

```
exit(0); 
```

你应该说同样的警告信息并要求他退出

另一种方法是使用`[[NSThread mainThread] exit]`

**但是你不应该这样做**

根据 Apple 的说法，您的应用程序不应自行终止。由于用户没有点击 Home 按钮，因此任何返回到 Home 屏幕的操作都会给用户留下您的应用程序崩溃的印象。这是令人困惑的非标准行为，应该避免。

# javascript - JavaScript 错误（null 或不是对象）。仅在 IE 中

> ID：14335849
> 
> 赞同：0
> 
> 时间：2013-01-15T10:35:29.840
> 
> 标签：javascript, internet-explorer, error-handling

```
var rows = [];
        for (var id in topics) {
            var topic = g_favoriteTopics[topics[id].id];
            var $row = $("table#Favorites tr#topicTemplate").clone();
            alert(topic.title);
            $row.find("td.txtCol a").html(topic.title);
            var href = commonVariables.formAction +
                "?PARTITION_ID=" + commonVariables.partitionId + 
                "&CONFIGURATION=" +  commonVariables.configurationId + 
                "&CMD=DFAQ&DFAQ_TOPIC_ID=" + topic.id +
                "&DFAQ_TOPIC_TYPE=" + topic.type;
            $row.find("td.txtCol a").attr("href", href);
            $row.find("td.imgCol input").attr("topicId", topic.id);
            rows.push(topic.title.toLowerCase() + "<<<>>><tr topicId=" + topic.id + ">" + $row.html() + "</tr>");
        } 
```

警报窗口显示正确的主题标题（主题名称）。但是，在警报之后，我出现了 Javascript 错误（标题为空或不是对象）。它在 FF 和 chrome 中运行良好

# ios - IOS：在 UIWebView 中使用 UIMenuItemController 创建子菜单

> ID：14335850
> 
> 赞同：1
> 
> 时间：2013-01-15T10:35:35.047
> 
> 标签：ios, uiwebview, submenu, uimenuitem

我希望的行为是：

当我单击我的自定义 UIMenuItem 时，它会显示另一个可供选择的 UIMenuItems 列表。我已经以这种方式实施了。

```
@implementation CustomUIWebView{
    BOOL clickedShowSubMenu;
    NSArray *mainMenuItems;
    NSArray *subMenuItems;
}

-(id)initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if(self){
        UIMenuController *mc = [UIMenuController sharedMenuController];

        UIMenuItem *testSubMenu = [[UIMenuItem alloc] initWithTitle:@"TestSubMenu" action:@selector(testSubMenu:)];
        mainMenuItems = [NSArray arrayWithObjects:testSubMenu, nil];

        UIMenuItem *subItem1 = [[UIMenuItem alloc] initWithTitle:@"Item1" action:@selector(item1:)];
        UIMenuItem *subItem2 = [[UIMenuItem alloc] initWithTitle:@"Item2" action:@selector(item2:)];
        subMenuItems = [NSArray arrayWithObjects:subItem1, subItem2, nil];

        [mc setMenuItems:mainMenuItems];

        [NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onMenuItemDismissed:) name:UIMenuControllerDidHideMenuNotification object:nil];

        clickedShowSubMenu = NO;
    }
    return self;
}

- (void)testSubMenu:(id)sender{
    UIMenuController *mc = [UIMenuController sharedMenuController];
    [mc setMenuItems:subMenuItems];
    mc.menuVisible = YES; //from te doc, it say it would keep the menu not dismiss when this function end
    clickedShowSubMenu = YES;
}

- (void)item1:(id)sender{
}

- (void)item2:(id)sender{
}

- (void)onMenuItemDismissed:(id)sender{
    if(clickedShowSubMenu == YES){
        UIMenuController *mc = [UIMenuController sharedMenuController];
        [mc setMenuItems:mainMenuItems];
        clickedShowSubMenu = NO;
    }
}

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender{
    if(action == @selector(testSubMenu:))return YES;
    else if(action == @selector(item1:))return YES;
    else if(action == @selector(item2:))return YES;
    return NO;
}

@end 
```

当我选择长按某些文本并单击 时`Test Sub Menu`，它会起作用，它确实出现了“subMenu”：`Item1`并且出现`Item2`在相同的位置`Test Sub Menu`。

但是，问题是第二次及以后。我选择了其他文本并且`Test Sub Menu`正确显示，但是当我单击它时，它`Item1`显示`Item2`在它第一次出现的旧位置上。他们的立场从未改变。我不知道这是什么原因造成的。

**编辑** 好的。通过使用[如何获取 UIWebView 中选定文本的坐标（CGRect）？](https://stackoverflow.com/questions/7514648/how-to-get-coordinates-cgrect-for-the-selected-text-in-uiwebview/7725348#7725348)获取选择的矩形边界并`[mc setTargetRect:theRect inView:self];`在之前说`mc.menuVisible = YES;`

它工作并且子菜单显示与主菜单大致相同的位置。推荐吗？仍然有一点问题，当我突出显示整个段落时，主菜单显示在段落下方，但是，子菜单显示在段落上方。

# windows - 在 emacs 中，如何不作为 emacs 进程执行外部命令？

> ID：14335853
> 
> 赞同：1
> 
> 时间：2013-01-15T10:35:49.260
> 
> 标签：windows, emacs, windows-7, elisp

对于一些外部程序（不是全部），我希望程序在执行命令后在 Emacs 之外独立运行。换句话说，如果我关闭 Emacs，外部程序仍然可以运行。

PS：我的操作系统是windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:22:12.243

我认为`(w32-shell-execute "start" "myprog" "args")`应该做的伎俩。

# character-encoding - Monotouch 和 uialertview 不显示特殊字符 (æ,ø,å) 正确

> ID：14335855
> 
> 赞同：1
> 
> 时间：2013-01-15T10:35:55.027
> 
> 标签：character-encoding, xamarin.ios, uialertview

嘿伙计们，如果我在单声道触摸中执行此操作：

```
 var alert = new UIAlertView { Message = "Prøv igen" };

            alert.AddButton("Nej");
            alert.AddButton("Ja");

            alert.Clicked += (sender, e) =>
            {
                if (e.ButtonIndex == 0)
                {
                    //do nothing - go away
                }
                if (e.ButtonIndex == 1)
                {

                }
            };

            alert.Show(); 
```

Uialert 点不正确显示“Prøv igen”，但像这样“Pr[]v igen”。你有任何想法来解决这个问题 - 我应该创建一个具有特定编码的字符串吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:55:23.447

源文件的编码保存为西欧。我将 Visual Studio 的高级保存选项中的编码更改为 utf8，问题就消失了。

# perl - 如何诱导 Term::Readline 将 UTF8 标志设置为 readline 的结果之一？

> ID：14335858
> 
> 赞同：1
> 
> 时间：2013-01-15T10:36:04.813
> 
> 标签：perl, utf-8, readline

如何诱导[Term::Readline](http://search.cpan.org/perldoc?Term%3A%3AReadLine)将 UTF8 标志设置为结果之一`readline`？

```
#!/usr/local/bin/perl
use warnings FATAL => qw(all);
use strict;
use 5.10.1;
use utf8;
use open qw( :encoding(UTF-8) :std );
use Term::ReadLine;
use Devel::Peek;

my $term = Term::ReadLine->new( 'test', *STDIN, *STDOUT );
$term->ornaments( 0 );
my $char;

$char = $term->readline( 'Enter char: ' );
Dump $char;

print 'Enter char: ';
$char = <>;
chomp $char;
Dump $char; 
```

输出：

```
Enter char: ü                                                                                                                                                                                 
SV = PV(0x11ce4c0) at 0x1090078
REFCNT = 1
FLAGS = (PADMY,POK,pPOK)
PV = 0x14552c0 "\374"\0
CUR = 1
LEN = 16
Enter char: ü
SV = PV(0x11ce4c0) at 0x1090078
REFCNT = 1
FLAGS = (PADMY,POK,pPOK,UTF8)
PV = 0x14552c0 "\303\274"\0 [UTF8 "\x{fc}"]
CUR = 2
LEN = 16 
```

评论：

当我在`mysql`数据库中搜索时（`mysql_enable_utf8`启用）：

```
my $stmt = "SELECT * FROM $table WHERE City REGEXP ?";
say $stmt;

# my $term = Term::ReadLine->new( 'table_watch', *STDIN, *STDOUT );
# $term->ornaments( 0 ); 
# my $arg = $term->readline( 'Enter argument: ' ); # ü -> doesn't find 'München'

print "Enter argument: ";
my $arg = <>; # ü -> finds 'München'
chomp $arg; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:53:00.243

为什么？这两个字符串是等价的。这就像 0 存储为 IV 与存储为 UV。

好吧，您可能不得不处理有缺陷的 XS 代码。如果是这种情况，`utf8::upgrade($s)`并且`utf8::downgrade($s)`可以用于更改字符串在标量中的存储方式。

与编码和解码不同，`utf8::upgrade`不`utf8::downgrade`改变字符串，只改变它的存储方式。

```
$ perl -MDevel::Peek -E'
   $_="\xFC";
   utf8::downgrade($d=$_); Dump($d);
   utf8::upgrade($u=$_);   Dump($u);
   say $d eq $u ?1:0;
'
SV = PV(0x86875c) at 0x4a9214
  REFCNT = 1
  FLAGS = (POK,pPOK)
  PV = 0x8699b4 "\374"\0
  CUR = 1
  LEN = 12
SV = PV(0x868784) at 0x4a8f44
  REFCNT = 1
  FLAGS = (POK,pPOK,UTF8)
  PV = 0x869d14 "\303\274"\0 [UTF8 "\x{fc}"]
  CUR = 2
  LEN = 12
1 
```

# c++ - C++ 向量或队列在内存和速度方面构建大 Q

> ID：14335861
> 
> 赞同：9
> 
> 时间：2013-01-15T10:36:11.870
> 
> 标签：c++, performance, vector, queue

我正在构建一个大型消息队列并仅使用 PUSH 和 POP，这样可以更有效（向量或队列）以最大速度维护大数据

```
struct MQStruct {
    wchar_t *serviceName; 
    int durability; 
    int msgType; 
    int msgHeader; 
    wchar_t *msgId; 
    wchar_t *payload; 
    int payloadSize; 
    int ttl; 
    int priority;
}MQStructObj;

vector<MQStruct> MQvector;
queue<MQStruct> MSQ;

int SendMessage(wchar_t *serviceName, int durability, int msgType, int msgHeader, wchar_t *msgId, wchar_t *payload, int payloadSize, int ttl, int priority) {

MQStructObj.serviceName=serviceName;
MQStructObj.durability=durability;
MQStructObj.msgType=msgType;
MQStructObj.msgHeader=msgHeader;
MQStructObj.msgId=msgId;
MQStructObj.payload=payload;
MQStructObj.payloadSize=payloadSize;
MQStructObj.ttl=ttl;
MQStructObj.priority=priority;

    //Which one is better (Vector or Queue) in term of memory, speed and why

MSQ.push(MQStructObj);

    //OR

MQvector.push_back(MQStructObj);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T10:39:18.240

SO上有很多关于队列/向量/列表的讨论，您可以搜索和重用资源。简而言之：

*   用途`std::queue`：如果您需要在其开头和结尾处快速插入和删除；
*   `std::vector`如果您需要随机访问元素，请使用
*   当您需要从序列中间频繁插入和删除时`std::list`

**当您仅使用推送/弹出到容器时，`std::queue`这是一种方式而不是`std::vector`肯定的方式。**

您可以从以下网址获取更多详细信息：[http ://en.cppreference.com/w/cpp/container](http://en.cppreference.com/w/cpp/container)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T10:38:48.417

`std::vector`您无法有效地模拟队列 - 您只能从容器的一侧推送和弹出。如果您需要实现消息**队列**然后使用队列，这就是它的意思。

# php - 连接到数据库，包括“mysql_select”转换为 pdo

> ID：14335862
> 
> 赞同：4
> 
> 时间：2013-01-15T10:36:13.197
> 
> 标签：php, mysql, pdo

这是我到 sql server 的连接页面

```
<?php
$user="test";
$parola="test1";
$bazadate="test";  //Numele bazei de date sql//
$host="localhost"; //In general se foloseste localhost//
mysql_connect($host,$user,$parola);
@mysql_select_db($bazadate) or die( "Nu ma pot conecta la baza ta de date! <br/ > 
Sigur ai completat userul, parola si numele bazei de date?");
?> 
```

我已经尝试了向下代码，但我收到“未选择数据库”：

```
<?php
/* SQL connect PDO */
$dsn = 'mysql:dbname=test;host=localhost';
$user = 'test';
$password = 'test1';

try {
$dbh = new PDO($dsn, $user, $password);

} catch (PDOException $e) {
echo 'Conectare SQL nereusita: ' . $e->getMessage();
}
?> 
```

PDO 课程彻底杀死了我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:57:22.223

在

```
$dsn = 'mysql:dbname=test;host=localhost'; 
```

参数顺序错误

[**文档**](http://php.net/manual/en/pdo.connections.php)中的顺序是

```
$dbn = new PDO('mysql:host=$host;dbname=$bazadatet', $user, $parola); 
```

在哪里

```
$user="test";
$parola="test1";    //table
$bazadate="test";  //Numele bazei de date sql//
$host="localhost"; //In general se foloseste localhost// 
```

将顺序更改为`host & dbname`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-15T10:45:44.933

[http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

摘自：[是否有关于如何使用 PDO 的好教程？](https://stackoverflow.com/questions/1943069/are-there-good-tutorials-on-how-to-use-pdo)

# mysql - 如何从查询中选择第一行到 MySQL 中的过程变量中

> ID：14335863
> 
> 赞同：1
> 
> 时间：2013-01-15T10:36:15.513
> 
> 标签：mysql, stored-procedures

```
DECLARE topScorer INT default 0;

SELECT id INTO topScorer FROM game_player
WHERE game_player.score = (SELECT max(score) FROM game_player) 
```

一个不好的例子，但很容易由幼稚的编码产生......如果返回多行，它在我的测试中不起作用，我怎样才能将第一个返回的行放入变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:57:46.840

你只需要一个分数吗？

```
SELECT id 
  INTO topScorer 
  FROM game_player
 WHERE game_player.score = (   SELECT max(score) as maxScore 
                                 FROM game_player 
                                 ) LIMIT 1 
```

更新：Rufo 爵士是对的，上面的代码现已更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:59:36.253

用于`LIMIT x`确保您只接收`x`来自查询的行。

在这种情况下，您只想获取`1`行：

```
SELECT id 
  INTO topScorer 
  FROM game_player
 WHERE game_player.score = ( SELECT max(score) 
                               FROM game_player )
 LIMIT 1 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/e51a0/6)

作为一种可行的选择，您也可以使用它

```
 SELECT id 
    INTO topScorer 
    FROM game_player
ORDER BY score DESC
   LIMIT 1 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/e51a0/8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T13:39:59.050

在子查询中应用限制以仅从子查询中获取 1 个值

```
SELECT id 
  INTO topScorer 
  FROM game_player
 WHERE game_player.score = ( SELECT max(score) 
                               FROM game_player  LIMIT 1 ); 
```

或者从下面使用的子查询中获取多个值：

```
SELECT id 
  INTO topScorer 
  FROM game_player
 WHERE game_player.score in ( SELECT max(score) 
                               FROM game_player ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-28T06:03:58.040

1）在SP中声明变量：

```
declare @CourseID int 
set @CourseID = 0 
```

2）我们首先需要两个查询来为变量分配 ID，而内部查询则只选择前 1 个记录表单表。在第一个查询的 where 子句中，我们将 ID 与内部查询的结果进行比较：

```
SELECT @CourseID = ID FROM Course ID = ( Select Top 1 ID from Course ) 
```

3）现在检查变量值：

```
 if(@CourseID > 0 )
    Begin
           //This mean ID of first row is assigned to CourseID
    End
    Else 
    Begin
      //Can't found any record.
    End 
```

# joomla - 无法登录到 Joomla 1.7 管理员

> ID：14335871
> 
> 赞同：1
> 
> 时间：2013-01-15T10:36:59.937
> 
> 标签：joomla, joomla1.7

**更新：** 我检查了 phpMyAdmin 中的 prefix_users 表，我尝试登录的用户的`usertype`字段设置为`deprecated`

我在 Joomla 1.7 上运行一个站点，最近我注意到我无法登录到管理员面板。我收到此错误：

```
Username and password do not match or you do not have an account yet. 
```

我知道用户名和密码是正确的，因为我检查了`configuration.php`文件。我将`configuration.php`文件的权限设置为`0644`，并且我尝试设置

```
public $cookie_domain = 'mydomain.com';
public $cookie_path = ''; 
```

最初是这样，`public $cookie_domain = ''` 但这并没有改变任何东西。

我都试过`mydomain.com/administrator`了`www.mydomain.com/adminitrator`

我还尝试了私人浏览会话，以避免过去可能存储在我的计算机上的任何本地 cookie。

注意：登录失败后，我被重定向`mydomain.com/administrator`到`mydomain.com/administrator/index.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:29:53.533

**已解决：**将用户类型从更改`deprecated`为`Super Administrator`，然后我使用此[MD5 哈希生成器](http://www.miraclesalad.com/webtools/md5.php)更新密码。

我认为是因为加密错误...

# ios - 打开 GL ES 纹理渲染

> ID：14335873
> 
> 赞同：2
> 
> 时间：2013-01-15T10:37:02.097
> 
> 标签：ios, opengl-es

我目前正在学习 Open GL ES 以构建 iOS 应用程序。我正在尝试向我的模型添加纹理但没有成功。我从下载了一个示例项目

[关联](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)

并一直在研究它。我的问题是：当我不改变运行项目时，我得到以下信息：

![具有工作纹理的图像](../Images/1edba017a6cd8c55dcdfa3bda3e4aae7.png)

如您所见，它是一个带有纹理的基本立方体。我决定将 .png 文件更改为不同的图像。但是当我这样做时，我遇到了：

![图像不渲染纹理](../Images/98c9a24dd1ec733c1e8a94b532e1d0c5.png)

我不知道为什么我的 .png 文件没有渲染到立方体？

这是我的质地： ![我的质地](../Images/b4112f7f30f493e83b78f95c2fe7fa96.png)

和原件： ![原来的](../Images/1d769834a3bd576ae28cd4079dd0d1c9.png)

只是为了确认我没有收到任何错误，并且我没有对代码进行任何更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:05:50.927

如果您使用非二次幂纹理，则不能使用 mipmap，您需要正确设置过滤。

过滤：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
```

夹钳：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

但这有一个缺点，在 3D 对象上，如果距离太远，纹理质量会很差。因此，在这种情况下，请使用二次幂纹理并使用 mipmap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:20:07.020

对于这个特定的教程，您可以使用正方形、二维的幂的纹理来解决您的问题。您发布的是`135x134`，因此您需要将其转换为`128X128`or `256x256`。

有关相关讨论，请参阅此帖子：[iphone opengl es 2.0 non power of two](https://stackoverflow.com/questions/11620320/iphone-opengl-es-2-0-non-power-of-two)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:49:35.280

你是如何改变你的图像文件的？您是否只替换了文件夹中的文件或将其也包含在项目中？以防万一，您应该通过将文件拖入 XCode 并将其重命名为`tile_floor.png`，或将方法中的（纹理）图像文件名更改为纹理文件的名称，从而将文件包含在项目中`initWithFrame`。

如果这不起作用，则可能是两个图像文件中的颜色格式或每像素位数信息不同。

# c# - 网络服务和事件

> ID：14335874
> 
> 赞同：0
> 
> 时间：2013-01-15T10:37:04.197
> 
> 标签：c#, web-services, events, delegates, asmx

我不确定这是否可能，并且已经在网络上进行了一些快速搜索，但我认为不可能，但是就这样吧。

我有一个从数据库中检索项目列表的 Web 服务（老式 .asmx）。我希望我的客户端应用程序收到通知，如果有任何项目需要处理，而不是客户端应用程序每隔一段时间向 Web 服务发出请求。这可能吗？

我知道这可以通过 WCF（双工通信）实现，但是由于复杂性，我不能使用这种方法。

哎呀，我刚刚意识到我还需要 Web 服务来轮询自身或获取一些东西来异步调用它？不要认为这是一个很好的解决方案......

在此先感谢，奥南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:41:57.610

它要么是轮询（由客户端发起），要么是像 Exchange、Imap 等那样维护会话。经典的 .asmx 通信由客户端发起。因此它不提供任何事件。

您可以通过开发由客户端托管的回调服务来自己实现双工。然后，您的 Web 服务可以调用回调客户端。但是，您必须找到一个好的解决方案来注册和注销客户端到 Web 服务。

实际上，让数据库在每次轮询时调用项目并不是一个好主意。您可以将结果缓存在 Web 服务引用的逻辑层中。如果您更喜欢经典的 .asmx 方法，您可以创建一个 bool 方法来检查新数据是否在由逻辑实现的缓存中。这会降低性能影响，然后轮询服务器也不会那么糟糕。

# jquery - 如何使用jquery添加html标签

> ID：14335875
> 
> 赞同：1
> 
> 时间：2013-01-15T10:37:05.053
> 
> 标签：jquery, ajax

我已经使用它编写了以下函数我在 Html 中显示 ajax 响应

```
function loadData() {
        $.ajax({
            type: "post",
            url: "http://127.0.0.1/get_scroll_rec/",
            cache: false,               
            data:'',
            success: function(response){
                var obj = JSON.parse(response);
                try{
                    var str = '';
                    var items=[];   
                    $.each(obj[0], function(i,val){ 

                                                    //Here display code

                            items.push($('<div id="recent">').html(val.Title));
                            items.push($('<h1>').html(val.name));
                            items.push($('<p>').html(val.desciption));
                            items.push($('<div id="recent_created" class="recent_created">').html(val.added_on));
                    }); 

                    $('#recent_rightwrapper1').fadeOut('slow', function() {
                        $(this).append(str).fadeIn('slow').fadeIn(3000);
                        $('#recent_rightwrapper1').css({backgroundColor: ''});
                        $('#recent_rightwrapper1').append.apply($('#recent_rightwrapper1'), items);
                    }).css({backgroundColor: ''});

                }catch(e) {     
                    alert('Exception while request..');
                }       
            },
            error: function(){                      
                alert('Error while request..');
            }
         });

    }

}); 
```

如何在此显示区域代码中添加一些 HTMl 标签，例如（更改为添加的第一行“h1”标签，更改为添加的第二行“a”标签）想要在最后一行第 5 行添加没有数据的 div。

```
1> items.push($('<div id="recent"><h1>').html(val.Title));
2> items.push($('<h1><a href="" target="_blank">').html(val.name));
3> items.push($('<p>').html(val.desciption));
4> items.push($('<div id="recent_created" class="recent_created">').html(val.added_on));
5> items.push($('<div id="blank">') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:39:26.553

您可以通过 将子节点*附加*到现有元素[`append`](http://api.jquery.com/append/)。

```
$("#yourRoot").append($('<div id="blank">')); 
```

**编辑：**适用`append`于任何 jQuery 对象，也适用于您刚刚通过提供 HTML 文本创建的对象。因此，如果您想将空附加`div`到第一行中的元素，您只需执行以下操作：

```
var $firstLine = $('<div id="recent"><h1>').html(val.Title);
var $lastLine = $('<div id="blank">');
$firstLine.append($lastLine);
items.push($firstLine); 
```

# php - 使用 PHP 使用 POST 方法检索信息

> ID：14335878
> 
> 赞同：0
> 
> 时间：2013-01-15T10:37:25.573
> 
> 标签：php, forms, shopping-cart

我正在尝试将产品数量从 product.php 发送到 cart.php。

```
 <form id="form1" name="form1" method="POST" action="cart.php">
    <input type="hidden" name="pid" id="pid" value="<?php echo $id; ?>" />
    <!--<input type="text" name="qnty" id="qnty"/>-->
   <select name="qnty">
    <option></option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13</option><option>14</option><option>15</option><option>20</option><option>25</option><option>30</option><option>40</option><option>50</option><option>60</option><option>70</option><option>80</option><option>90</option><option>100</option><option>150</option><option>200</option><option>300</option></select>

    <input type="submit" name="button" id="button" value="Add to Shopping Cart" />
  </form> 
```

然后我尝试使用以下方法检索 cart.php 中 qnty 的值：

```
if(isset($_POST['qnty']) )
{
  $qnty = $_POST['qnty'];
}
echo $qnty 
```

但是我收到一个未定义的变量错误消息。当我将表单提交到 product.php 而不是 cart.php 时，它工作正常。有谁知道我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:55:26.323

在 if 循环内打印`$qnty`或在 if 循环之前声明`$qnty=0`。

在您的情况下，如果`qnty`未设置，它将给出 undefined variable `$qnty`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:41:36.963

这是因为你需要声明变量，否则它会像这样显示

```
Notice: Undefined variable: id in C:\xampp\htdocs\amazon\test.php on line 9 
```

# c# - SmtpServer.EnableSsl=true ;

> ID：14335882
> 
> 赞同：-2
> 
> 时间：2013-01-15T10:37:37.597
> 
> 标签：c#

我已经浏览了许多关于 SMTP 连接的示例代码。在那些中，大多数人 `SmtpServer.EnableSsl=true ;`只使用 gmail（我的观察）。此代码的范围或用途是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:40:49.870

从*MSDN*中查看*[`SmtpClient.EnableSsl`](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.enablessl.aspx)*；

> 指定 SmtpClient 是否使用安全套接字层 (SSL) 来加密连接。

* * *

> 如果 SmtpClient 使用 SSL，则为 true；否则为假。默认值为假。EnableSsl 属性指定是否使用 SSL 访问指定的 SMTP 邮件服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:41:22.607

来自 MSDN 上的`SmtpClient`类，`EnableSSl`属性：

*   指定 SmtpClient 是否使用安全套接字层 (SSL) 来加密连接。

[链接到 MSDN](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.enablessl.aspx)。

> 此属性的默认值也可以在机器或应用程序配置文件中设置。对 EnableSsl 属性所做的任何更改都会覆盖配置文件设置。
> 
> SmtpClient 类仅支持 RFC 3207 中定义的基于传输层安全的安全 SMTP 的 SMTP 服务扩展。在这种模式下，SMTP 会话在未加密的通道上开始，然后客户端向服务器发出 STARTTLS 命令以切换到使用 SSL 进行安全通信。有关详细信息，请参阅 Internet 工程任务组 (IETF) 发布的 RFC 3207。
> 
> 另一种连接方法是在发送任何协议命令之前预先建立 SSL 会话。此连接方法有时称为 SMTP/SSL、SMTP over SSL 或 SMTPS，默认情况下使用端口 465。当前不支持使用 SSL 的这种替代连接方法。
> 
> 您可以使用 ClientCertificates 指定应使用哪些客户端证书来建立 SSL 连接。ServerCertificateValidationCallback 允许您拒绝 SMTP 服务器提供的证书。SecurityProtocol 属性允许您指定要使用的 SSL 协议的版本。
> 
> **笔记：**
> 
> 如果 EnableSsl 属性设置为 true，并且 SMTP 邮件服务器未在对 EHLO 命令的响应中通告 STARTTLS，则对 Send 或 SendAsync 方法的调用将引发 SmtpException。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-15T10:40:40.550

[http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.enablessl.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.enablessl.aspx)

通过谷歌花了我两秒钟...

# java - 如何从命令提示符运行 TesNG xml 文件？（请详细说明）

> ID：14335887
> 
> 赞同：0
> 
> 时间：2013-01-15T10:37:52.767
> 
> 标签：java, testng, selenium-webdriver

我正在使用 java test-ng 框架在 selenium web-driver 中工作。我创建了 testng xml 文件来运行从 java 类组合的场景。如下所示。我从 Eclipse 成功运行了这个 xml 文件。谁能帮我如何从命令提示符运行它？（请详细解释）

```
 <?xml version="1.0" encoding="UTF-8"?>
    <suite name="Manual Lab Suite" parallel="false">
    <test name="Manual Lab Order Test" preserve-order="true">
    <classes>
    <class name="demoappln.html" preserve-order="true">  
    <methods preserve-order="true">  
    <include name="testHt"/> 
    </methods> 
    </class> 
    </classes>
    </test>
    </suite> 
```

**更新**

我在命令提示符下输入了以下行

```
java -Dtestng.test.classpath="C:\Documents and Settings\000278\.m2\repository\org\testng\testng\6.3.1;C:\Documents and Settings\000278\ATLAS\POC_Workspace\SampleProject\src\main\java\demoappln\NewFil‌​e;"org.testng.TestNG NewFile.xml 
```

但我收到以下错误 - java.lang.NoClassDefFoundError

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:45:15.393

[TestNG 文档](http://testng.org/doc/documentation-main.html#running-testng)详细解释了如何执行此操作。如果您不理解文档解释的某些方面，请随时提出更*具体*的问题。

* * *

> 它显示“找不到主类：NewFile.xml”

这意味着它试图将“NewFile.xml”解释为 Java 类的名称。问题是你之前缺少一个空格`org.testng.TestNG`，所以`java`认为这`org.testng.TestNG`是前面论点的一部分！事实上，`org.testng.TestNG`它的意思是

修复上述问题后，您的命令可能仍会失败。您可能没有`org.testng.TestNG`在 JVM 的初始类路径上。（这些`-Dtestng.test.classpath=...`东西不是设置 JVM 的初始类路径。而是设置 TestNG 理解的系统属性。）

如果现在失败说“找不到主类：org.testng.TestNG”，则需要将 TestNG JAR 文件添加到 JVM 类路径。

* * *

值得一提的是，您的错误是基本的 java 命令行语法内容。我建议您仔细阅读/重读`java`手册条目，密切注意命令行语法、`-D...`选项的含义以及如何设置 JVM 类路径。

# stream - 流式传输我屏幕的多个部分

> ID：14335891
> 
> 赞同：0
> 
> 时间：2013-01-15T10:38:06.927
> 
> 标签：stream, split, screen

有没有办法将我的屏幕分成 4 个流？

例如，我将屏幕分成 4 个相等的部分，所以我想在不同的频道上流式传输每个部分，我怎样才能得到这个？用什么工具？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:47:44.447

You can use 4 instances of [VLC Media Player](http://www.videolan.org/vlc/index.html) and configure them with those 2 tutorials:

*   [This one](http://grok.lsu.edu/article.aspx?articleid=14625) for streaming the desktop

*   [This one](http://forum.videolan.org/viewtopic.php?f=4&t=46971) for cropping the desktop

# authentication - 烧瓶登录机制来验证每个令牌我的调用

> ID：14335892
> 
> 赞同：7
> 
> 时间：2013-01-15T10:38:15.030
> 
> 标签：authentication, flask, auth-token, flask-login

嗨，我正在查看flask-login，它很好地处理了会话登录，这对于我可以访问会话的模板和视图很有用。

不过，我一直在想知道是否有办法可以发送 user_token 来授权通话。我查看了文档，对此非常模糊。它说我应该

*   在我的用户对象中实现 get_auth_token。
*   装饰一个可以加载用户令牌库的@user_loader 函数。

我虽然看过以下内容（如果我错了，请纠正我）

*   存储身份验证令牌的 Cookie 库有一种方法，我可以决定将令牌作为参数、正文或标头的一部分发送，而不必从 cookie 中获取它。
*   我不太确定如何使用身份验证令牌对呼叫进行身份验证。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T01:36:36.870

我有一种更好的方法，可以更好地满足我的需求。基本上，如果您查看flask-plugin的源代码，我会非常简单直接地扩展LoginManager，您会意识到有一个调用@before_request 有一个名为reload_user的方法，这就是我最终要做的

```
class CustomLoginManager(LoginManager):
    def reload_user(self):
        if request.headers.has_key('Authorization'):
            ctx = _request_ctx_stack.top
            ctx.user = User.get(token=request.headers['Authorization'])
            return
        super(CustomLoginManager,self).reload_user() 
```

如果在我的标题中我传递了一个授权密钥，那么我将尝试使用这个密钥而不是基于会话的方法来加载，当然我需要通过签署密钥来为这种方法添加更多的安全层，但总的来说这就是我需要。

谢谢大家。

顺便说一句，您可以覆盖一堆其他方法，我强烈建议您看一下插件源，这样您就可以更深入地了解它的作用 644 行代码值得一读

[https://github.com/maxcountryman/flask-login/blob/master/flask_login.py](https://github.com/maxcountryman/flask-login/blob/master/flask_login.py)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T16:34:00.407

似乎您想要 OAuth 之类的东西，而不是使用 Flask-Login。如果您不知道（引自 Wikipedia），OAuth 是一种利用令牌来代表资源所有者访问资源的协议。考虑让用户能够为您网站的某些部分提供代客钥匙。许多网站（例如 Google、Facebook 和 Twitter）使用 OAuth 对第三方客户端进行身份验证，以便访问某些用户资源。

目前，不太灵活但不太复杂的 OAuth 1.0a 和更灵活但更复杂的 OAuth 2.0 之间存在分歧。Python 中存在许多用于 OAuth 1.0a 的库，但用于 OAuth 2.0 的库较少。但是，如果稳定性不是目前最关心的问题，则可以选择用于 OAuth 2.0 的那些。

对于客户端，如果您使用 OAuth 1.0a，则可以使用[Flask-OAuth](https://github.com/mitsuhiko/flask-oauth/)，它由 Flask 创建者 Armin 维护，因此您可以放心，它不会死。对于提供者，有一个名为[Flask-OAuthProvider](https://github.com/ib-lundgren/flask-oauthprovider)的扩展，支持 OAuth 1.0a。如果您不介意自己集成它并需要 2.0 支持，[那么 pyoauth2](https://github.com/StartTheShift/pyoauth2)为您提供了客户端和提供者，尽管它看起来不太维护。

希望这可以帮助您探索一种使用身份验证令牌的可能途径，尽管不使用 Flask-Login。在我看来，除非他们理解协议，否则不应重新实现协议，因此即使您决定不使用它，我也建议您阅读有关 OAuth 的信息。上面有很多很棒的文章，比如[谷歌的这篇文章](https://developers.google.com/accounts/docs/OAuth2)和[这篇](https://developers.google.com/accounts/docs/OAuth)文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-26T20:38:09.500

作为一个更新，Flask-Login 现在有一个 'header_loader' 功能，可以与标准的 'user_loader' 结合使用。直接取自文档：

```
 @login_manager.header_loader
def load_user_from_header(header_val):
    if header_val.startswith('Basic '):
        header_val = header_val.replace('Basic ', '', 1)
    try:
        header_val = base64.b64decode(header_val)
    except TypeError:
        pass
    return User.query.filter_by(api_key=header_val).first() 
```

这是[Flask-Login 文档中该部分的链接](https://flask-login.readthedocs.org/en/latest/#login-using-authorization-header)

# android - 灰色瓷砖 Android 谷歌地图模拟器

> ID：14335897
> 
> 赞同：1
> 
> 时间：2013-01-15T10:38:26.907
> 
> 标签：android, maps, emulation, tiles

第一个问题。

当我在 android 模拟器中构建应用程序而不是显示谷歌地图时，它会显示空的灰色瓷砖。

我做过的事情：

*   我添加了 Google API SDK。
*   项目目标是 Android + Google APIs (Google APIs)。
*   我创建了一个带有目标 Google API 和 GPS 的新模拟器，并将 RAM 和最大 vm 应用程序堆增加到 512 和 48。
*   我删除了 debug.keystore 和 default.keyset 2000 次并重建密钥并发送给 Google 2000 次以上，但仍然无法正常工作。
*   我获取 SHA1 的命令如下：

    ./keytool.exe -list -v -keystore /home/q/my_name/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android

然后我得到 sha1 并粘贴到谷歌并添加一个分号和应用程序名称，所以：

```
E4:A ..... C38;com.example.myappname 
```

好的，那么我的代码：

主要活动：

```
package com.example.rest;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;

public class Rest extends MapActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rest);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_rest, menu);
        return true;
    }

    public void onProviderDisabled(String provider) {
        Intent intent = new Intent( android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(intent);
    }
} 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.rest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET"/>    
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="com.google.android.maps"/>

        <activity
            android:name=".Rest"
            android:label="@string/title_activity_rest" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="AIzaSyAdh38-k34RPi7aQ4ik6ExKKWI-wS-bDJA"
/>

</RelativeLayout> 
```

重要的事：

*   预建的地图应用程序 WORKS。
*   sdk 示例（com.example.android.apis.MapsDemo）不起作用，因为也显示灰色瓷砖。

有什么线索吗？问我关于我的问题你需要什么，我会回答。

（我已经编辑了应用程序名称和一些不显示有关我的名字的真实数据等内容。）

日志猫：

```
01-15 10:47:11.498: W/KeyCharacterMap(509): No keyboard for id 0
01-15 10:47:11.498: W/KeyCharacterMap(509): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
01-15 10:47:17.938: W/System.err(509): java.lang.IllegalStateException: Connection pool shut down.
01-15 10:47:18.068: W/System.err(509):  at org.apache.http.impl.conn.tsccm.ConnPoolByRoute.getEntryBlocking(ConnPoolByRoute.java:284)
01-15 10:47:18.068: W/System.err(509):  at org.apache.http.impl.conn.tsccm.ConnPoolByRoute$1.getPoolEntry(ConnPoolByRoute.java:238)
01-15 10:47:18.068: W/System.err(509):  at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager$1.getConnection(ThreadSafeClientConnManager.java:175)
01-15 10:47:18.068: W/System.err(509):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:325)
01-15 10:47:18.078: W/System.err(509):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-15 10:47:18.078: W/System.err(509):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-15 10:47:18.298: W/System.err(509):  at android_maps_conflict_avoidance.com.google.common.io.android.AndroidHttpClient.execute(AndroidHttpClient.java:246)
01-15 10:47:18.298: W/System.err(509):  at android_maps_conflict_avoidance.com.google.common.io.android.GoogleHttpClient.executeWithoutRewriting(GoogleHttpClient.java:129)
01-15 10:47:18.308: W/System.err(509):  at android_maps_conflict_avoidance.com.google.common.io.android.GoogleHttpClient.execute(GoogleHttpClient.java:189)
01-15 10:47:18.308: W/System.err(509):  at android_maps_conflict_avoidance.com.google.common.io.android.GoogleHttpClient.execute(GoogleHttpClient.java:242)
01-15 10:47:18.334: W/System.err(509):  at android_maps_conflict_avoidance.com.google.common.io.android.AndroidHttpConnectionFactory$AndroidGoogleHttpConnection.getResponse(AndroidHttpConnectionFactory.java:132)
01-15 10:47:18.334: W/System.err(509):  at android_maps_conflict_avoidance.com.google.common.io.android.AndroidHttpConnectionFactory$AndroidGoogleHttpConnection.openDataInputStream(AndroidHttpConnectionFactory.java:153)
01-15 10:47:18.348: W/System.err(509):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:922)
01-15 10:47:18.472: W/System.err(509):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
01-15 10:47:18.472: W/System.err(509):  at java.lang.Thread.run(Thread.java:1019)
01-15 10:47:19.038: W/MapActivity(509): Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@405e68e8
01-15 10:47:19.058: V/MapActivity(509): Recycling map object.
01-15 10:47:19.418: I/MapActivity(509): Handling network change notification:CONNECTED
01-15 10:47:19.418: E/MapActivity(509): Couldn't get connection factory client 
```

我在 Linux 上，但我使用的是位于 winxp 分区上的 keytool.exe。我不知道这是否会导致问题。但是 keytool.exe 给了我 sha1 没有问题，我只是提一下，以防它很重要。

编辑：**问题解决了！正确答案来自 FIDO**，只需向下滚动屏幕即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:49:34.537

您正在将 google map V2 的密钥用于 google map V1 项目。试试[这个](https://developers.google.com/maps/documentation/android/v1/mapkey)来获取谷歌地图 V1 的密钥

# volume-shadow-service - 如何在 vss 硬件提供商中实现 GetTargetLUNs？

> ID：14335901
> 
> 赞同：2
> 
> 时间：2013-01-15T10:38:44.780
> 
> 标签：volume-shadow-service

我正在为基于 ZFS 的 iSCSI 目标实现 VSS 硬件提供程序。我们已经实现了 AreLunSupported、precommitsnapshot 和 commitsnapshot 等功能，到目前为止它工作正常。但在此之后，它`VSS_E_NO_SNAPSHOTS_IMPORTED`在 LocateLun 方法中因“”错误而失败。而且我认为我们没有正确填写目标 LUN 信息。

我的问题是：

1.  如何查找目标 LUN 的序列号？我需要挂载新创建的快照然后获取序列号吗？

2.  我们是否还需要填写互连、存储标识符信息，或者我可以为这些传递 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-31T06:48:06.593

> 问：如何查找目标 LUN 的序列号？我需要挂载新创建的快照然后获取序列号吗？

不，此时您不应挂载快照。您应该使用带外机制直接与您的存储通信（我假设您的“基于 ZFS 的 iSCSI 目标”来自 NAS 盒），可能是 REST API 调用，以找出序列号快照。

让我详细说明一下*快照的序列号*：

1.  VSS 期望“卷影副本”是一个具体的真实卷，类似于主卷（在您的情况下是 iSCSI 目标）
2.  由于您使用的是 ZFS 快照，因此无需过多关注您的具体实现，您有 2 个选项来获取*具体 LUN*的序列号：

    一个。如果您的存储允许将 ZFS 快照目录公开为 iSCSI 目标，则创建该 iSCSI 目标并使用其 Page83 标识符

    湾。如果不是，请使用 ZFS 快照创建 ZFS 克隆并将其公开为 iSCSI 目标并使用其 Page83 标识符

> 问：我们是否还需要填写互连、存储标识符信息，或者我可以只为这些传递 NULL。

3.  出于所有实际目的，通常只需复制`VDS_LUN_INFORMATION`原始源 LUN 的字段并仅`m_szSerialNumber`使用目标 LUN 的字段编辑字段即可（假设产品 ID、供应商 ID 等都保持不变）

此链接详细解释了 VSS 硬件提供程序实现的预期内容：[https ://msdn.microsoft.com/en-us/library/windows/desktop/aa384600(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa384600(v=vs.85).aspx)

> 独特的第 83 页信息
> 
> 原始 LUN 和新创建的卷影副本 LUN 都必须在第 83 页数据中具有至少一个唯一存储标识符。至少一个类型为 1、2、3 或 8 且关联为 0 的 STORAGE_IDENTIFIER 在原始 LUN 和新创建的卷影副本 LUN 上必须是唯一的。

**额外的喋喋不休（答案在此结束）：**

现在，上面的#2(b) 可能会引起人们的注意，因为您提前创建了一个克隆并且它还没有被使用。这样做的原因是，需要执行上述步骤，`IVssHardwareSnapshotProvider::FillInLunInfo`并且稍后将*相同的`VDS_LUN_INFORMATION`内容*传递给`IVssHardwareSnapshotProvider::LocateLuns`（VSS 试图告诉您找到您之前告诉它是卷影副本 LUN 的 LUN）。因此，无论您将来是否使用克隆，都*必须*预先创建具体的 LUN（iSCSI 目标）。

对此的一线希望是：如果您确定 VSS 请求者的工作流程*永远不会挂载卷影副本*，那么您可以通过在`VDS_LUN_INFORMATION`during 中伪造一些（有效）信息来避免这种情况`IVssHardwareSnapshotProvider::FillInLunInfo`。为此，您必须创建一个“可传输”卷影副本（VSS 请求者使用这些`VSS_CTX_FILE_SHARE_BACKUP | VSS_VOLSNAP_ATTR_TRANSPORTABLE`标志）。这种卷影副本的唯一用例是对其执行硬件重新同步，其中 VSS 硬件提供程序实现该`IVssHardwareSnapshotProvider::ResyncLuns`方法并在其中执行 ZFS 快照回滚。

# python - Python 套接字中的连接被拒绝后出现无效参数

> ID：14335902
> 
> 赞同：1
> 
> 时间：2013-01-15T10:38:46.000
> 
> 标签：python, sockets

请参阅示例输出： [连接被拒绝](https://stackoverflow.com/questions/12394950/connection-refused)

我的问题是为什么对 s.connect() 的第一次调用会抛出“Connection Refused”，但第二次调用会抛出“Invalid Argument”。这就像第一次调用将套接字对象 s 置于某种错误状态。有没有办法重置它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:54:53.020

你这样称呼：

```
s.connect((gethostname(), 4444)) 
```

`gethostname()`涉及的不仅仅是连接到服务器。它初始化套接字的变量。

下次调用时`connect`，`s`已经有值了，但是无效。所以，你得到`Invalid argument`.

注意：`s.connect()`实际上调用`connect()`with`s`作为第一个参数，因为 connect 定义为`def connect(self, ...)`.

# android - 通过意图录制视频，录制视频的大小为0

> ID：14335903
> 
> 赞同：3
> 
> 时间：2013-01-15T10:38:46.697
> 
> 标签：android, video, android-intent

我已经使用 Intent 开发了视频录制应用程序。它在指定位置创建文件并存储，但在 sdcard 上显示 0 字节。会有什么问题？我正在设置将视频存储在 sdcard 上不同位置的路径

谢谢你。

```
public class RecordVideoActivity extends Activity{
    Button btn_NewVideoRec;
    Button btn_RecVideoList;
    ListView lstvwVideo;
    VideoView videoview;

    final static int REQUEST_VIDEO_CAPTURED = 1;
    Uri uriVideo = null; 
    Uri custLoc;
    File myRecFile;

    String pathtovideo;
    ArrayAdapter<String> videoadap;
    ArrayList<String> videolist;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.video_record_activity);

        btn_NewVideoRec = (Button)findViewById(R.id.btn_RecordNewVideo);
        btn_RecVideoList = (Button)findViewById(R.id.btn_RecordedVideoList);
        lstvwVideo = (ListView)findViewById(R.id.videolistview);
        videoview = (VideoView)findViewById(R.id.videoVw);
        btn_NewVideoRec.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
                Uri custLoc = getOutputVideoFileUri();
                //intent.putExtra(MediaStore.EXTRA_OUTPUT, custLoc);
                startActivityForResult(intent, REQUEST_VIDEO_CAPTURED);
            }
        });

        btn_RecVideoList.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                try{
                    System.out.println("path to video::"+pathtovideo);  
                    int lstindxofslash = pathtovideo.lastIndexOf("/");

                    System.out.println("last index of slash::"+lstindxofslash);
                    String pathofvdofldr = pathtovideo.substring(0,lstindxofslash);
                    System.out.println("path of video folder:"+pathofvdofldr);
                    File srcDir = new File(pathofvdofldr);
                    File dstDir = new File(Environment.getExternalStorageDirectory()+"/app");

                }catch (NullPointerException e) {
                    // TODO: handle exception
                    e.getStackTrace();
                }

                ListView videolw = (ListView)findViewById(R.id.videolistview);
                videolw.setVisibility(View.VISIBLE);

                videolist = getRecVideoFiles(Environment.getExternalStorageDirectory()+"/app/video");
                //videolist = getRecVideoFiles(Environment.getExternalStorageDirectory()+"/DCIM/Camera");
                //"Whatsapp/Media/WhatsApp Video/");
                videoadap = new ArrayAdapter<String>(RecordVideoActivity.this, android.R.layout.simple_list_item_1, videolist);
                videolw.setAdapter(videoadap);

                videolw.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> arg0, View arg1,
                            int pos, long arg3) {
                        // TODO Auto-generated method stub
                        Toast.makeText(getApplicationContext(), videolist.get(pos), Toast.LENGTH_SHORT).show();

                        videoview.setVisibility(View.VISIBLE);
                        btn_NewVideoRec.setVisibility(View.GONE);
                        btn_RecVideoList.setVisibility(View.GONE);
                        lstvwVideo.setVisibility(View.GONE);

                        MediaController mediaController = new MediaController(RecordVideoActivity.this);
                        mediaController.setAnchorView(videoview);
                        // Set video link (mp4 format )
                        Uri video = Uri.parse(videolist.get(pos));
                        videoview.setMediaController(mediaController);
                        videoview.setVideoURI(video);
                        videoview.start();

                    }
                });
            }

        });

    }

    public Uri getOutputVideoFileUri(){

        return Uri.fromFile(getOutPutVideoFile());

    }
    public File getOutPutVideoFile(){

        String videofolder = "/app/video";
        File videofldr = new File(Environment.getExternalStorageDirectory().toString()+videofolder);
        if (videofldr.isDirectory()) {
            myRecFile = new File(videofldr.getAbsolutePath()+"/"+System.currentTimeMillis()+".mp4");
            //myRecFile = audiofldr.toString()+"/"+System.currentTimeMillis()+".3gp";
            System.out.println("Path for existing folder::"+myRecFile);
        } else {
            videofldr.mkdir();
            System.out.println("path for created directory::"+myRecFile.getAbsolutePath());

            myRecFile = new File(videofldr.getAbsolutePath()+"/"+System.currentTimeMillis()+".mp4");
        }

        return myRecFile;

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        if(resultCode == RESULT_OK){
            if(requestCode == REQUEST_VIDEO_CAPTURED){
                //pathtovideo = getpathofVideo(data.getData());
                //System.out.println("pathv::"+pathtovideo);
                uriVideo = data.getData();
                //uriVideo = (Uri) data.getExtras().get(custLoc.toString());
                Toast.makeText(RecordVideoActivity.this,uriVideo.getPath(),Toast.LENGTH_LONG).show();
                System.out.println("UriVideoPath::"+uriVideo.getPath());

            }
        }else if(resultCode == RESULT_CANCELED){
            uriVideo = null;
            Toast.makeText(RecordVideoActivity.this, "Cancelled!",Toast.LENGTH_LONG).show();
        }

    }

        }

    private String getpathofVideo(Uri uriVideo) {
        // TODO Auto-generated method stub
        String[] proj = { MediaStore.Video.Media.DATA };
        Cursor cursor = managedQuery(uriVideo, proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    private ArrayList<String> getRecVideoFiles(String videorecpath) {
        // TODO Auto-generated method stub
        ArrayList<String> videofiles = new ArrayList<String>();
        File file = new File(videorecpath);
        file.mkdir();

        File[] f = file.listFiles();
        if (f.length == 0) {
            Toast.makeText(getApplicationContext(), "No Files!", Toast.LENGTH_SHORT).show();
        }else{
            for (int i = 0; i < f.length; i++) {
                System.out.println("from file.."+f[i].toString());
                videofiles.add(f[i].getName());
                System.out.println("from arraylist.."+videofiles.get(i).toString());
            }
        }
        return videofiles;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:28:56.343

而不是你的代码试试这个：首先录制视频后获取数据并将其写入特定位置。

```
Intent photoPickerIntent= new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
                  startActivityForResult(Intent.createChooser(photoPickerIntent,"Take Video"),TAKE_VIDEO); 
```

startActivityForResult 将是：

```
try
{
            AssetFileDescriptor videoAsset = getContentResolver().openAssetFileDescriptor(data.getData(), "r");
            FileInputStream fis = videoAsset.createInputStream();
            File root=new File(Environment.getExternalStorageDirectory(),"Directory");

              if (!root.exists()) {
                  root.mkdirs();
              }
              File file;

               file = new File(root,"test.mp4" );

              Uri uri=Uri.fromFile(file);

            FileOutputStream fos = new FileOutputStream(file);

            byte[] buf = new byte[1024];
            int len;
            while ((len = fis.read(buf)) > 0) {
                fos.write(buf, 0, len);
            }       
            fis.close();
            fos.close();

          } 
        catch (Exception e) 
        {
           e.printStackTrace();
        } 
```

# jquery - 获取调用函数的元素

> ID：14335911
> 
> 赞同：0
> 
> 时间：2013-01-15T10:39:09.017
> 
> 标签：jquery, function, parameter-passing

> **可能重复：**
> [你如何找出 JavaScript 中的调用者函数？](https://stackoverflow.com/questions/280389/how-do-you-find-out-the-caller-function-in-javascript)

我有以下代码：

```
JS:
function myfunc(mynumber){
   console.log(mynumber);
}

HTML:
<div onclick="myfunc(5);"></div> 
```

有没有办法使用 jQuery 来获取在`myfunc`函数内部被点击的元素的上下文，而不需要传递`this`或`$(this)`作为`onclick`属性中的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:41:23.517

```
<script>
  $( "div").bind("click", function( e ) {
    myfunc(mynumber)
  });
</script> 
```

或使用参数

```
$('div').bind("click", {  Param1: 2 }, function(event){
    alert(event.data.Param1);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:44:44.823

我会使用 jQuery 来实际绑定事件处理程序，这样`this`在该函数内部将引用触发事件的元素。您可以使用 HTML5`data-*`属性来存储要用于该特定元素的数字。

HTML

```
<div data-number="5">5</div>
<div data-number="26">26</div> 
```

jQuery

```
$(function() {
    $('div').on('click', function(e) {
        console.log($(this).data('number'));
        console.log(this);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:47:42.370

不确定这是否是您要求的。你可以调用一个函数

```
myfunc.call(params); 
```

现在在 myfunc 中，当您引用或使用 this 时，它指的是调用它的上下文或 DOM。

# sql-server - 微软空间数据地图

> ID：14335912
> 
> 赞同：1
> 
> 时间：2013-01-15T10:39:13.663
> 
> 标签：sql-server, bing-maps, spatial

1.  微软的空间数据使用什么样的地图？我听说空间数据是基于 GPS 的 x、y 坐标？

2.  是否可以将 Microsoft 的空间数据用于 Bing 的地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-18T12:00:34.667

必应地图中的必应空间数据服务以及必应地图中的所有其他地图控件和服务都使用十进制度数的球形墨卡托投影。GPS 设备使用 WGS84 项目系统，并在 Bing 地图中非常准确地对齐。

如果您询问的是 SQL Server 中的空间数据，SQL 支持大量的投影类型。SRID 值 4326，最常用于 GPS 数据和 Bing 地图。

# magento - 导入 url 重写为 magento

> ID：14335913
> 
> 赞同：1
> 
> 时间：2013-01-15T10:39:16.767
> 
> 标签：magento, url-rewriting, magento-1.7, http-status-code-301

我经常在构建一个新的 Magento 站点时达到目的，其中需要为旧站点上的所有项目创建 301 重写。有没有直接导入的方法？

通过 urlCreate() 类型的 Magento 函数以编程方式就可以了，因为这样我就可以循环浏览 csv。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:18:52.503

一般来说，坚持使用 Magento 的 ORM 与实体数据交互是一个好主意，因为可能有业务逻辑和存储逻辑都被烘焙到实体 ORM 堆栈中（这对于 EAV 实体是众所周知的）。但是，根据要输入的记录数量，直接到数据库的方法应该没问题，特别是如果它是一次性导入。这是因为 URL 重写是存储在[`core_url_rewrite`表（链接）](https://github.com/benmarks/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/sql/core_setup/install-1.6.0.0.php#L384)中的平面实体，并且表本身具有必要的存储逻辑作为其结构的一部分（主要是唯一的`request_path`+`store_id`和`core_store`表的 FK）。换句话说，在 ORM 层之外操作这些数据是可以的，因为逻辑是表定义本身的一部分。

除了这些信息之外，还可以加载一个`core/url_rewrite`集合，从 CSV 创建`core/url_rewrite`实例并添加它们，然后调用`save()`该集合，但请注意每个项目都是单独保存的。可以参考目录实体和客户的转换适配器，这就是数据流的工作方式。

# java - 如何从 JSONArray 中检索值

> ID：14335916
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:39:21.273
> 
> 标签：java, json

这是 JSONArray： String json = [{"1":"Kenny", "2":"Tom", "3":"Mosoti"}]; 现在我只想获取一个字符串数组，例如 Kenny、Tom、Mosoti

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:01:06.640

您可以使用任何 json 解析器来执行此操作，例如[Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)。

编写自己的解析器不是一个好选择，因为它容易出错。也不要重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:49:54.330

是的，你应该使用像杰克逊这样的主流库/框架，你可以在这里阅读更多关于它的信息：[http ://wiki.fasterxml.com/JacksonInFiveMinutes](http://wiki.fasterxml.com/JacksonInFiveMinutes)

一个基本的例子是这样的：

```
private static MailData unMarshallJson(String literalJson) throws JAXBException, IOException {
    Data data = null;
    ObjectMapper mapper = new ObjectMapper();
    data = mapper.readValue(literalJson, Data.class);

    return data;
} 
```

Data 类是对应于解析数据的类，请阅读我提供的链接以获取更多信息。

# php - 循环和条件的 Codeigniter 问题

> ID：14335917
> 
> 赞同：0
> 
> 时间：2013-01-15T10:39:21.843
> 
> 标签：php, codeigniter, loops, conditional-statements

我正在加载这样的视图

```
if($type == 'view'){
 // do something
}else if($type == 'insert'){
   // Here i am making a form
?>
    <select>  
    <?php 
        foreach($applications as $row)
        {
            ?>
            <option value = "<?php echo $row->id;?>">
                <?php echo $row->name;?>
            </option>  
       <?php } ?>
    </select>  
<?
}else{
    //do some thing else
} 
```

现在这是我遇到的错误：

**解析错误：语法错误，第 xx 行的 url 中出现意外的 T_ELSE**

奇怪的是，如果我注释掉循环 if 工作正常。问题是什么？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:53:04.550

它对我来说很好......再试一次

```
<?php

if($type == 'view'){
 // do something
}else if($type == 'insert'){
   // Here i am making a form
?>
<select>  
   <?
   foreach($applications as $row){
   ?><option value = "<?php echo $row->id;?>"><?php echo $row->name;?></option>  
   <?php
   }
   ?>
</select>  
<?
}else{
    //do some thing else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:58:47.830

也许你想要这样的代码：

```
<?php
if ($type == 'view')
{
    // do something
}
elseif ($type == 'insert')
{
    // Here i am making a form
?>
    <select>  
<?php
    foreach($applications as $row)
    {
?>
    <option value = "<?php echo $row->id;?>"><?php echo $row->name;?></option>
<?php
    }
?>
    </select>  
<?php
}
else
{
    //do some thing else
} 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:24:10.187

使用 switch，你有一个更优雅的代码编写方式，当然更快，尝试：

```
switch($type){
 case 'view':
  //do something
 break;

 case 'insert':
  echo '<select>';
     foreach($applications as $row){
      echo '<option value="'.$row->id.'">'.$row->name.'</option>';
     }
  echo '</select>';
 break;

 default:
  //do something else
 break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T13:51:28.070

您需要以**这样的方式使用 codeigniter 循环**：

```
<?php foreach ($applications as $row):?>
     <option value = "<?php echo $row->id; ?>">
                    <?php echo $row->name; ?>
                </option> 
    <?php endforeach;?> 
```

# c - Unix TCP 端口扫描器

> ID：14335922
> 
> 赞同：0
> 
> 时间：2013-01-15T10:39:37.683
> 
> 标签：c, unix, tcp, port-scanning

我有一个 TCP 端口扫描器，它扫描给定 IP 上所有打开的端口，并只返回打开的端口和在其上运行的服务的名称。为此，我创建了一个套接字，将其设置为非阻塞模式，`select()`如果端口超时，则表示端口关闭，否则打开。问题是我的 select() 总是超时，即使我尝试扫描打开的端口。我希望有人指出我的错误，我的逻辑不好吗？

```
#include <stdlib.h>
#include <iostream>
#include <cstdio>
#include <string.h>
#include <netdb.h>
#include <fcntl.h>
#include <assert.h>
#include <sys/time.h>
#include <errno.h>

using namespace std;
fd_set    working_set;
hostent *he;
char* protoc [2] = { "tcp","udpn" };
int port;
struct sockaddr_in servaddr;
int sendfd;
servent *srvport;
void set_nonblock(int socket) {
    int flags;
    flags = fcntl(socket,F_GETFL,0);
    assert(flags != -1);
    fcntl(socket, F_SETFL, flags | O_NONBLOCK);
}
void set_block(int socket) {
    int flags;
    flags = fcntl(socket,F_GETFL,0);
    assert(flags != -1);
    fcntl(socket, F_SETFL, flags | ~O_NONBLOCK);
}

int main( int argc, char* argv[] )
{

    struct timeval  timeout;
    timeout.tv_sec  = 1;
    timeout.tv_usec = 0;
    char* host = argv[1];
    char* pro = argv[2];
    int portlow  = atoi(argv[3]);
    int porthigh = atoi(argv[4]);

    fprintf(stderr, "n Scanning host=%s, protocol=%s, ports: %d -> %d   \n",
            host, pro, portlow, porthigh);

    if(strcmp(pro, protoc[0])==0)
        pro = protoc[0];
    else if (strcmp(pro, protoc[1])==0)
        pro = protoc[1];
    else
    {
        herror("n specify valid protocol - tcp or udpn");
        exit(-1);
    }

    if((he = gethostbyname(argv[1])) == NULL)
    {
        herror("n *** gethostbyname() failed ***n");
        exit(-1);
    }
    /*In case TCP protocol is selected for scan, app opens streaming socket

for every port to be scanned, tries to connect to it, and if successful

it displays information about service using struct servent.
*/

    if(strcmp(pro, protoc[0])==0) // tcp scan
    {
        for(port = portlow; port <= porthigh; port++)
        {
            // open stream socket
            if((sendfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
            {
                perror("*** socket(,SOCK_STREAM,) failed ***n");
                exit(-1);
            }
            set_nonblock(sendfd);
            bzero(&servaddr, sizeof(servaddr));

            servaddr.sin_family = AF_INET;
            servaddr.sin_port = htons(port);
            servaddr.sin_addr = *((struct in_addr *)he->h_addr);
            int res = connect(sendfd, (struct sockaddr *)&servaddr, sizeof(servaddr));
int ser;
            if (res < 0) {
                 if (errno == EINPROGRESS) {
                    timeout.tv_sec = 0;
                    timeout.tv_usec = 10;
                    FD_SET(sendfd, &working_set);

                    if ((ser=select(sendfd+1, NULL, &working_set, NULL, &timeout)) > 0) {
                          srvport = getservbyport(htons(port), protoc[0]);

                    }
                    else {
                       fprintf(stderr, "Timeout or error() %d\n",ser);
                       perror("select(): ");

                    }
                 }
                 else {
                    fprintf(stderr, "Error connecting %d - %s\n", errno, strerror(errno));
                 }
                 if(srvport != NULL)
                     printf("tport %d: %sn   \n ", port, srvport->s_name);
                 else if (ser=0)
                   close(sendfd);
                 fflush(stdout);
              }

            //set_block(sendfd);
        }//end of for()
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:44:09.230

这是相当多的代码。我没有运行它。然而，这：

```
if (ser=(select(sendfd, NULL, &working_set, NULL, &timeout)) > 0) { 
```

是错的。的第一个参数`select()`是“三个集合中任何一个中编号最高的文件描述符，加 1”（参见[手册页](http://linux.die.net/man/2/select)）。

此外，您应该像这样用括号括起来：

```
if ((ser = select(...)) > 0) { 
```

因为现在您将`>`运算符的结果分配给`ser`变量，这可能不是您所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:46:05.397

在使用 I/O 描述符集 working_set 之前，您需要确保清除它：

```
FD_ZERO(&working_set); 
```

# java - kSOAP XmlPullParserException

> ID：14335923
> 
> 赞同：3
> 
> 时间：2013-01-15T10:39:39.120
> 
> 标签：java, android, coldfusion, ksoap2

我在尝试使用 kSOAP2 在 Android 中使用 ColdFusion SOAP 服务时遇到问题。这是我的 java 代码，用于调用我在 ColdFusion 中编写的测试方法（它只返回一个字符串）：

```
private static final String NAMESPACE = "http://www.sub.tv/MyService.cfc?WSDL";
private static String URL = "http://www.sub.tv/MyService.cfc";
private static final String METHOD_NAME = "TestMethod";
private static final String SOAP_ACTION =  "http://www.sub.tv/MyService.cfc?method=TestMethod";

public void GetData() {

    SoapPrimitive resultstring = null;
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    PropertyInfo inputArgs = new PropertyInfo();
    inputArgs.setName("ID");
    inputArgs.setValue(1234);
    inputArgs.setType(Integer.class);
    request.addProperty(inputArgs);

    SoapSerializationEnvelope soapenvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    soapenvelope.dotNet = false;
    soapenvelope.setOutputSoapObject(request);    

    AndroidHttpTransport httptransport = new AndroidHttpTransport(URL);
    //httptransport.debug = true;

    try {
        httptransport.call(SOAP_ACTION, soapenvelope);
        resultstring = (SoapPrimitive) soapenvelope.getResponse();
    } catch (Exception e) {
        Log.d(DEBUG, e.getMessage());
    } 
} 
```

这是我编写的 ColdFusion 测试方法，它只返回一个字符串：

```
 <cfcomponent displayname="test_web_service" namespace="http://www.sub.tv">
            <cffunction name="TestMethod" returnType = "string" access="remote" description="Test Method">
                    <cfargument name="ID" type="numeric">
                    <cfreturn "hello" />
            </cffunction>
    </cfcomponent> 
```

执行上述 Java 代码时出现的错误如下：

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>@2:44 in java.io.InputStreamReader@40ff5440) 
```

我怀疑问题的原因可能是我在 SOAP_ACTION 中指定的 URL，但据我所知，这是调用 ColdFusion SOAP Web 服务方法的正确方法。在浏览器中执行该 URL 会返回预期结果。我尝试在该 URL 的查询字符串中排除方法调用，但我仍然得到相同的错误。

任何帮助将非常感激。

谢谢你的时间，

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:57:55.867

尝试删除显示名称和命名空间。我知道通过 CFML 公开 Web 服务时不需要这些。我还怀疑你有一个你没有看到的错误。请注意，在您的错误中，它具有：

org.xmlpull....（位置：START_TAG ***<html>*** @2:44 in java.io.InputStreamReader@40ff5440）

该 html 标记向我表明您的 Web 服务正在引发错误。当 CF 执行此操作时，它会输出 HTML。知道了，这里有一些建议。从浏览器：

1) 直接在浏览器中访问您的服务：http: [//www.sub.tv/MyService.cfc](http://www.sub.tv/MyService.cfc)。登录到 CF 管理员并确保您看到了 CFC 的文档。

2) 访问您的 WSDL：[http](http://www.sub.tv/MyService.cfc?wsdl) ://www.sub.tv/MyService.cfc?wsdl 。你应该看到你的各种功能暴露了。

3）访问您的测试功能：[http ://www.sub.tv/MyService.cfc?method=TestMethod&id=123](http://www.sub.tv/MyService.cfc?method=TestMethod&id=123)

实际上，由于 www.sub.tv 是公开的并且 MyService.cfc 可用，我为您测试了以上所有内容，看起来您的 CFC 很好并且没有抛出错误。

我对您的 CFC 进行了快速测试：

```
<cfset test = CreateObject("WebService", "http://www.sub.tv/MyService.cfc?WSDL") />

<cfdump var="#test.TestMethod(123)#" /> 
```

这会输出“hello”，如果您的 Web 服务正常运行，这就是您所期望的。这向我表明，您从 Android 调用它的方式存在问题。我没有在 Java 中使用 Web 服务做太多工作，所以我只能在这里提供帮助。

但是，我注意到您的 WSDL 将测试方法参数定义为 Double。这对于 CF 来说是正常的，因为数字类型可以保存任何类型的数字。但是，您上面的示例代码显示以下内容：

```
inputArgs.setType(Integer.class); 
```

尝试将其更改为 Double.class （或在 Java 中应为匹配参数类型的任何内容。

这就是我为你准备的一切。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:21:38.280

我怀疑问题是您正在通过 SOAP 调用 Web 服务，但响应不是预期的格式 (XML)。如果您查看从您的 Web 服务调用[http://www.sub.tv/MyService.cfc?method=TestMethod&id=123](http://www.sub.tv/MyService.cfc?method=TestMethod&id=123)生成的输出，您会看到：

```
<wddxPacket version='1.0'>
    <header/>
    <data>
        <string>hello</string>
    </data>
</wddxPacket> 
```

这是因为*默认情况下，ColdFusion 将除 XML 之外的所有返回类型（包括简单返回类型）序列化为 WDDX 格式...* [来自此处的 CFFunction 文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f5c.html)

尝试在 ColdFusion 函数中指定一个`returnType`XML，看看是否可行。您可能仍需要调整输出以获得`kSOAP`预期的结果。我不知道它想要的 XML 格式，但这应该可以帮助您入门。

改变你`CFFunction`的东西是这样的：

```
<cffunction name="TestMethod" returnType="xml" access="remote" description="Test Method">
    <cfargument name="ID" type="numeric">
    <cfset var xml = "">
    <cfxml variable="xml">
        <test>hello</test>
    </cfxml>
    <cfreturn xml>
</cffunction> 
```

# jquery - 关闭时的引导模式

> ID：14335925
> 
> 赞同：0
> 
> 时间：2013-01-15T10:39:42.240
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我正在使用 jquery ajax 检索成功的数据，并以引导模式输出主题。我想要做的是在模式关闭时绑定一个事件，但似乎不起作用。

```
 $(document).on('click', 'a#edit-button', function(e) {
           e.preventDefault();    
           var id = $(e.target).data('id');
           var url = 'edit.php?id=' + $(e.target).data('id');
           $.ajax({
               type: "POST",
               url: url,
               success: function(data)
               {
                   $('<div class="modal" id="myModal">' + data + '</div>').modal(); // show response from the php script.
               },
                error:function(){

                   alert('Error!');

                }
             } 
```

); });

```
 $('#myModal.modal').bind('hidden', function () {
      alert('TEST');
      //$('#example.table').dataTable().fnDraw();
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-06T07:44:19.707

```
$('#modelID')
    .on('hide.bs.modal', function () {
        console.log('hide');
    })
    .on('hidden.bs.modal', function () {
        console.log('hidden');
    })
    .on('show.bs.modal', function () {
        console.log('show');
    })
    .on('shown.bs.modal', function () {
        console.log('shown');
    }); 
```

# php - 根据登录者在 WordPress 导航中显示页面

> ID：14335927
> 
> 赞同：0
> 
> 时间：2013-01-15T10:39:49.167
> 
> 标签：php, wordpress

我了解我可以通过以下方式选择显示/隐藏已登录用户的页面：

```
<?
if ( is_user_logged_in() ) {
<li><a href="#">Link Title</a></li>
}
?> 
```

但是是否可以只向特定用户显示页面？例如，我希望 'John' 看到一个页面，而不是 'Bob'，所以我可以这样做：

```
<?
if ( is_John_logged_in() ) {
<li><a href="#">Link Title</a></li>
}
?> 
```

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:46:47.107

you can use the function [get_currentuserinfo();](http://codex.wordpress.org/Function_Reference/get_currentuserinfo) to retrieve information about the current logged user.

```
global $current_user;
  get_currentuserinfo();

  echo 'Username: ' . $current_user->user_login . "\n";
  echo 'User email: ' . $current_user->user_email . "\n";
  echo 'User first name: ' . $current_user->user_firstname . "\n";
  echo 'User last name: ' . $current_user->user_lastname . "\n";
  echo 'User display name: ' . $current_user->display_name . "\n";
  echo 'User ID: ' . $current_user->ID . "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:38:07.040

您也可以尝试[username_exists](http://codex.wordpress.org/Function_Reference/username_exists)，在这里您可以指定用户 ID 或昵称并相应地显示您的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:44:55.323

您可以使用`get_current_user_id`获取当前登录用户的 id。

如果为 0，则表示没有人登录。

这是一个数值（所以如果用户更改了他们的用户名，它仍然可以工作）

所以，举个例子：

```
<?
  if ( get_current_user_id() ==123 ) {
    <li><a href="#">Link Title</a></li>
  }
?> 
```

一种更易于维护的方法可能是基于角色（管理员、编辑器等）来做到这一点
，但是只是一个想法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:45:04.633

[get_currentuserinfo](http://codex.wordpress.org/Function_Reference/get_currentuserinfo)可以帮助您...它包含当前登录用户的所有信息...

喜欢

```
if ($current_user->user_login == 'reigel' ) {
    // do something...
} 
```

只需检查链接以获取更多信息..

# javascript - 如何在每个 JsonP 请求中发送用户令牌？

> ID：14335928
> 
> 赞同：0
> 
> 时间：2013-01-15T10:39:51.640
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2, jsonp

在我的 sencha touch 2.1 中，成功登录后，服务会发回一个令牌，该令牌必须存储并用于所有未来的服务调用。由于我正在处理远程 Web 服务，因此所有商店都使用 JsonP 代理来获取数据，这就是我想将令牌添加到所有此类调用的原因。由于 JsonP 不支持标头，因此我计划将此令牌添加为 url 参数，但我不确定如何为来自 app.js 的所有 JsonP 调用执行此操作。

在每个 AJAX 请求（Sencha Touch 2）中发现了 AJAX 调用的类似问题
[Send user details (session token)](https://stackoverflow.com/questions/12003655/send-user-details-session-token-within-every-ajax-requests-sencha-touch-2?answertab=votes#tab-top)

但由于 JsonP 不支持 'beforerequest' 事件和标题，我被卡住了。

是否有任何其他事件我可以监听/拦截来添加这个 url 参数？有没有办法编写具有此功能的基代理类？如果您知道如何执行此操作，请分享一些示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:22:27.553

好的，我找到了一种对我有用的方法。

我扩展了 JsonP 代理并在 buildUrl 方法中添加了缓存令牌，现在我在所有商店中都使用了这个代理。这是代码：

```
Ext.define('myshop.proxy.CustomJsonpProxy', {
  extend: 'Ext.data.proxy.JsonP',
  alias: 'proxy.customjsonpproxy',
  buildUrl: function(request) {
    var me      = this,
        url     = me.callParent(arguments);
    if(!Ext.isEmpty(loggedInUserToken)){
        url = Ext.urlAppend(url, "token="+loggedInUserToken);
    }
    return url;
  }
}); 
```

如果您知道其他更好的方法，请分享。

# openlayers - 如何替换 geoext.form.formpanel 中的协议

> ID：14335932
> 
> 赞同：0
> 
> 时间：2013-01-15T10:40:01.803
> 
> 标签：openlayers, javascript, extjs3

我一直在为此挠头，我想知道这是否可能。我想通过以下方式替换 GeoExt.form.FormPanel 的协议：

1.  为了呈现表单面板，我在表单面板之外将变量“proto”定义为 null (var proto = null)。
2.  然后“proto”进入formpanel（协议：proto）。
3.  在按钮的处理函数中定义了一个新变量“proto”。我想在窗体面板中替换这个新变量。

由于 extjs、geoext、openlayers 是 javascript 库，我已经尝试过诸如“eval”之类的东西，以使处理程序中的变量“proto”可以在窗体面板中访问，但到目前为止还没有运气。这是一个简化的示例来说明这一点：

```
var proto = null;

var formPanel = new GeoExt.form.FormPanel({
    protocol: proto,                # <--- replace with [1]
    items: [{
        xtype: "combo",
        id: "idcombo",
        etc...
    }, {
        xtype: "textfield",
        id: "idtext",
        etc...
    }],
    button:[{
        text: "search",
        handler: function() {
            formPanel.search();
            var combo = Ext.getCmp('idcombo').getValue();      # <--- this works and gets the value chosen in "xtype: combo"
            var proto: new OpenLayers.Protocol.HTTP({          # <--- [1] (ie. new variable "proto")
                url: "http://www.pub.pub/" + combo + "/somestuff/",    # <--- this works
                format: etc...
            })
        }
    }]
}) 
```

我怎么能这样做？感谢您的支持，在此先感谢您。

此致，

格里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:22:34.350

解决方案是只使用“protocol.options.url = newUrl;” 而不是protocol.destroy()；或者protocol.read();，完整的解释在[这里](https://stackoverflow.com/questions/14664759/how-can-i-overwrite-the-url-of-openlayers-protocol-http)

# jira - 默认情况下，jira 中的受让人=报告者

> ID：14335938
> 
> 赞同：2
> 
> 时间：2013-01-15T10:40:29.190
> 
> 标签：jira

每当我编辑子任务问题时，屏幕都会从报告字段中设置受让人的值。

例如：如果记者是 xxx 而受让人是 yyy 。当我编辑此子任务问题时，屏幕显示受让人=xxx。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:09:20.123

不知道为什么会发生这种情况，我试图重现它，但对我来说效果很好。

你有插件吗？任何自定义字段scipts？任何后功能脚本？

无论如何，您可以通过以下方式之一解决该问题：

1.  [按照此处](https://answers.atlassian.com/questions/66562/set-assignee-to-some-specific-user-in-post-function-script)的说明发布功能脚本
2.  像[Behaviors Plugin](https://marketplace.atlassian.com/plugins/com.onresolve.jira.plugin.Behaviours)或[Jira Scripting Suite这样的插件](https://marketplace.atlassian.com/plugins/com.quisapps.jira.jss)
3.  添加一个自定义文件，编辑它的描述并添加一个 jQuery 脚本来设置`assignee`选项

如果您需要任何帮助或对任何解决方案有疑问，请随时提出。

# java - 如何使用 Hibernate (EntityManager) 或 JPA 调用 Oracle 函数或过程

> ID：14335939
> 
> 赞同：13
> 
> 时间：2013-01-15T10:40:31.427
> 
> 标签：java, oracle, hibernate, jpa, sys-refcursor

我有一个返回 sys-refcursor 的 Oracle 函数，当我使用 Hibernate 调用此函数时，出现以下异常。

```
Hibernate: { ? = call my_function(?) }
 org.hibernate.exception.GenericJDBCException: could not execute query
javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not execute query
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1360)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1288)
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:313) 
```

我该如何解决这个问题？

**甲骨文功能**

```
create or replace 
FUNCTION my_function(p_val IN varchar2)
    RETURN SYS_REFCURSOR
  AS
    my_cursor SYS_REFCURSOR;
  BEGIN
    OPEN my_cursor FOR SELECT emp_name FROM employees
    WHERE lower(emp_name) like lower(p_val||'%');
    RETURN my_cursor;    
  END; 
```

**我的实体类**

```
@Entity
@javax.persistence.NamedNativeQuery(name = "getFunc", query = 
"{ ? = call my_function(:empName) }", 
 resultClass = Employee.class, hints = 
 { @javax.persistence.QueryHint(name = "org.hibernate.callable", value = "true") })
 @Table(name = "EMPLOYEES") 
```

**在 DAO 中**

```
 @Override
        public void findEmployees(QueryData data,
                String empName) {

        List query = (List) entityManager.createNamedQuery("getFunc")
                         .setParameter("empName", empName)
                         .getSingleResult();
                data.setResult(query);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-06T06:02:07.527

可以通过以下方式使用 EntityManager 调用 Oracle 函数或存储过程。

**对于 Oracle 函数**

创建一个以 sys_refcursor 作为返回类型的函数

```
CREATE OR REPLACE FUNCTION my_function
(p_val IN varchar2)
    RETURN SYS_REFCURSOR
  AS
    my_cursor SYS_REFCURSOR;
  BEGIN
    OPEN my_cursor FOR SELECT emp_name FROM employees
    WHERE lower(emp_name) like lower(p_val||'%');
    RETURN my_cursor;    
  END; 
```

在实体类中，定义函数为

```
@javax.persistence.NamedNativeQuery(name = "getFunc", query = "{? =  call
my_function(:empName) }", resultClass = Employee.class, hints = {
@javax.persistence.QueryHint(name = "org.hibernate.callable", value = "true") }) 
```

**对于 Oracle 存储过程**

`sys_refcursor`使用第一个 OUT 参数创建过程

```
CREATE OR REPLACE PROCEDURE myProcedure(p_cursor out sys_refcursor,
     p_val  in varchar2
)
 AS
BEGIN
     OPEN o_cursor FOR
          SELECT     emp_name 
             FROM     employees 
            WHERE     LOWER (emp_name) LIKE lower(p_val||'%'); 
```

在实体类中定义过程为

```
@javax.persistence.NamedNativeQuery(name = "getProc", query = "{ call
my_procedure(?,:empName) }", resultClass = Employee.class, hints = {
@javax.persistence.QueryHint(name = "org.hibernate.callable", value = "true") }) 
```

最后在 DAO 类中调用函数或过程为

```
Query query = entityManager.createNamedQuery("getFunc"); // if procedure then getProc 
query.setParameter("empName","smith"); 
query.getResultList(); 
```

谢谢

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-07T05:51:59.480

对于您的功能，

```
create or replace 
FUNCTION my_function(p_val IN varchar2)
    RETURN SYS_REFCURSOR
  AS
    my_cursor SYS_REFCURSOR;
  BEGIN
    OPEN my_cursor FOR SELECT emp_name FROM employees
    WHERE lower(emp_name) like lower(p_val||'%');
    RETURN my_cursor;    
  END; 
```

您可以定义以下内容`NamedNativeQuery`：

```
@NamedNativeQuery(
    name = "my_function",
    query = "{ ? = call my_function( ? ) }",
    callable = true,
    resultClass = String.class
) 
```

而且，您可以像这样调用查询：

```
List<String> employeeNames = entityManager
    .createNamedQuery("my_function")
    .setParameter(1, 1L)
    .getResultList(); 
```

对于存储过程：

```
CREATE OR REPLACE 
PROCEDURE my_procedure(p_val IN VARCHAR2, 
    my_cursor OUT SYS_REFCURSOR,
) 
AS
BEGIN
    OPEN my_cursor FOR
    SELECT emp_name FROM employees
    WHERE lower(emp_name) like lower(p_val||'%');
END; 
```

，您可以使用以下 JPA 2.1 查询：

```
StoredProcedureQuery query = entityManager
    .createStoredProcedureQuery("my_procedure")
    .registerStoredProcedureParameter(1, String.class, 
         ParameterMode.IN)
    .registerStoredProcedureParameter(2, Class.class, 
         ParameterMode.REF_CURSOR)
    .setParameter(1, 1L);

query.execute();

List<Object[]> result = query.getResultList(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-03T11:23:17.500

**程序：**

```
CREATE OR REPLACE PROCEDURE my_procedure(p_val IN VARCHAR2, 
  my_cursor OUT SYS_REFCURSOR) 
AS
BEGIN
  OPEN my_cursor FOR SELECT emp_name FROM employees 
      WHERE lower(emp_name) like lower(p_val||'%');
END; 
```

**替代解决方案：使用 sys_refcursor 作为 OUT 参数调用过程而不定义 @NamedNativeQuery**

```
StoredProcedureQuery query = entityManager.createStoredProcedureQuery("myProcedure");
    query.registerStoredProcedureParameter(1, void.class, ParameterMode.REF_CURSOR);
    query.registerStoredProcedureParameter(2, String.class, ParameterMode.IN);
    query.setParameter(2, "Umesh");
    List result = query.getResultList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T13:28:21.170

您似乎将 Oracle 函数与 Oracle 存储过程混淆了。

可以从 select 语句中调用函数 - 像您这样的用户定义函数的行为方式与内置函数（如 min() 和 max()）相同。它们不能像存储过程那样被外部“调用”调用。

有关函数的定义，请参见[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions231.htm#i1012049](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions231.htm#i1012049)。

您可能需要将函数重写为存储过程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T02:53:54.710

[据](https://blogs.oracle.com/arungupta/entry/jpa_2_1_early_draft)Oracle的 Arun Gupta所说，JPA 2.1 的早期草案声明将支持存储过程。

> 对存储过程的支持：为 Java Persistence 查询语言添加了对调用预定义数据库函数和用户定义数据库函数的支持。
> 
> 有不同的`EntityManager.createXXXStoredProcedureQuery`方法变体返回用于执行存储过程的 StoredProcedureQuery。就像 一样`@NamedQuery`，`@NamedStoredProcedureQuery`它指定并命名了一个存储过程、它的参数和它的结果类型。可以在实体或映射的超类上指定此注释。注释中指定的名称随后用于`EntityManager.createNamedStoredProcedureQuery`. IN、OUT 和 INOUT 参数可以设置并用于检索从过程传回的值。例如：

```
@Entity
@NamedStoredProcedureQuery(name="topGiftsStoredProcedure", procedureName="Top10Gifts")
public class Product {
 . . .
}

// In your client

StoredProcedreQuery query = EntityManager.createNamedStoredProcedureQuery("topGiftsStoredProcedure");
query.registerStoredProcedureParameter(1, String.class, ParameterMode.INOUT);
query.setParameter(1, "top10");
query.registerStoredProcedureParameter(2, Integer.class, ParameterMode.IN);
query.setParameter(2, 100);
// there are other setParameter methods for defining the temporal type of a parameter
. . .
query.execute();
String response = query.getOutputParameterValue(1); 
```

至于规范何时最终确定，或者 Hibernate 何时支持 JPA 2.1，我不能说。但这可能值得关注。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-08T06:37:12.580

以前的解决方案似乎不适用于 eclipselink。我在 JPA 下使用本机查询运行了这个

```
 List result = em.createNativeQuery("select YOURFUNCTION(?) from dual ")
                      .setParameter(1, ONEPARAMETER)
                      .getResultList(); 
```

# c# - OrderBy 异常“至少一个对象必须实现 IComparable”

> ID：14335943
> 
> 赞同：1
> 
> 时间：2013-01-15T10:40:40.740
> 
> 标签：c#, linq, sorting

我正在尝试对列表进行排序。

此行抛出异常： ;

```
List<DistanceInfo> ListedDuration = 
              Distances.OrderBy(o => o.Rows[0].Elements.OrderBy(e => e.Distance))
                       .ToList(); 
```

但是，这有效：

```
List<DistanceInfo> ListedDuration = 
              Distances.OrderBy(o => o.Rows[0].Elements[0].Distance)
                       .ToList(); 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T10:44:25.980

让我们看看：

```
List<DistanceInfo> ListedDuration = Distances.OrderBy(
    o => o.Rows[0].Elements.OrderBy(e => e.Distance)
).ToList(); 
```

我们订购的东西是：

```
o => o.Rows[0].Elements.OrderBy(e => e.Distance) 
```

也就是说；对于每个项目`o`，按距离排序的**顺序**`o.Rows[0].Elements.OrderBy(e => e.Distance)`对其进行排序。这没有多大意义。您如何比较两个*序列*，例如`{1,3,4}`to `{1,8}`？

但是，您可能会采用第*一个*距离或*最小*/*最大*距离：

```
List<DistanceInfo> ListedDuration = Distances.OrderBy(
    o => o.Rows[0].Elements[0].Distance
).ToList();

List<DistanceInfo> ListedDuration = Distances.OrderBy(
    o => o.Rows[0].Elements.Min(e => e.Distance)
).ToList();

List<DistanceInfo> ListedDuration = Distances.OrderBy(
    o => o.Rows[0].Elements.Max(e => e.Distance)
).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T09:50:29.360

让我们看看下面，对于这个问题，我尝试过使用两个顺序的相同查询，如下所示，对我有用

```
 List<DistanceInfo> ListedDuration = Distances.OrderBy(o => 
 o.Rows[0].Elements[0].Distance).OrderBy(o => o.Rows[0].Elements[0].Distance
 ).ToList(); 
```

# asp.net - WCF SOAP 错误类型不正确

> ID：14335945
> 
> 赞同：0
> 
> 时间：2013-01-15T10:40:49.303
> 
> 标签：asp.net, wcf, svcutil.exe, faultexception, soapfault

首先，这是我的设置：

*   .Net 4.0 ASP.Net 应用程序
*   WCF 服务，带有 basicHttpBinding (soap 1.1)
*   参考类是使用 svcutil 生成的，带有选项 /useSerializerForFaults; WSDL 定义所有操作，并提供指向 types.xsd 和 types_fault.xsd 文件的链接。仅供参考，WSD 和 XSD 文件对于许多应用程序都很常见，因此我无法修改它们（当然，除非存在一些重大的验证错误）

当我向客户端发送 SOAP 故障时，我的问题就出现了：对于故障详细信息，我无法访问代码中的正确类型，因此客户端无法处理此故障。

以下是 WSDL 的摘录，供您理解：

```
<wsdl:message name="CreateScheduledWorkRequest">
            <wsdl:part name="parameters" element="root:CreateScheduledWork"/>
    </wsdl:message>
    <wsdl:message name="CreateScheduledWorkResponse">
            <wsdl:part name="parameters" element="root:CreateScheduledWorkResponse"/>
    </wsdl:message>
    <wsdl:message name="CreateScheduledWorkFault">
            <wsdl:part name="parameters" element="root:CreateScheduledWorkFault"/>
    </wsdl:message>

<wsdl:portType name="ManageScheduledWorkScheduledWorkManagement">
<wsdl:operation name="CreateScheduledWork">
                    <wsdl:input name="CreateScheduledWorkRequest" message="intf:CreateScheduledWorkRequest"/>
                    <wsdl:output name="CreateScheduledWorkResponse" message="intf:CreateScheduledWorkResponse"/>
                    <wsdl:fault name="CreateScheduledWorkFault" message="intf:CreateScheduledWorkFault"/>
            </wsdl:operation>
</wsdl:portType>

<wsdl:binding name="ManageScheduledWorkScheduledWorkManagementBinding"   type="intf:ManageScheduledWorkScheduledWorkManagement">
            <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
            <wsdl:operation name="CreateScheduledWork">
                    <wsdlsoap:operation soapAction="http://www.orange.com/MACHX/Interfaces/ManageScheduledWork/ScheduledWorkManagement/v1/CreateScheduledWork"/>
                    <wsdl:input name="CreateScheduledWorkRequest">
                            <wsdlsoap:body use="literal"/>
                    </wsdl:input>
                    <wsdl:output name="CreateScheduledWorkResponse">
                            <wsdlsoap:body use="literal"/>
                    </wsdl:output>
                    <wsdl:fault name="CreateScheduledWorkFault">
                            <wsdlsoap:fault name="CreateScheduledWorkFault" use="literal"/>
                    </wsdl:fault>
            </wsdl:operation>
</wsdl:binding> 
```

例如，当我发回一个**响应**（没有发生错误）时，我可以使用**CreateScheduledWorkResponse**元素，并正确填写它；但是当发生**FaultException**时，我只能发回**CreateScheduledWorkFaultMessage**（而不是 CreateScheduledWorkFault）。并且客户端无法处理此标签...

换句话说，代码中没有 CreateScheduledWorkFault 类型。

--> 我怀疑**使用 svcutil 从 WSDL 和 XSD 生成代码时出现问题**，因为我无法访问代码中所需的类型。

我以这种方式使用 svcutil：

> svcutil /useSerializerForFaults CSW.wsdl CSW.xsd CSW_Fault.xsd

感谢您的帮助，如果您需要更多详细信息，请不要犹豫。

鲍里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:45:20.040

我的解决方案是直接修改生成类中的类型......这很糟糕，但在我的情况下，这是我唯一的选择（通常我不应该重新生成它，因为 WSDL 永远不会改变）。

现在我有另一个问题，但它与命名空间有关，所以我将为此提出一个新问题。

# java - 如何禁用 Jtree 的特定节点（包括子节点）

> ID：14335950
> 
> 赞同：1
> 
> 时间：2013-01-15T10:41:08.853
> 
> 标签：java, swing, nodes, jtree

如何禁用`JTree`. 我有一个树状结构。对于`Catalog`用户我想禁用所有`Orders`和`Accounts Nodes`（和`Sub Nodes`）。我搜索了很多但没有得到解决方案。非常感谢提前。

```
 ERP
    Catalog
      CatalogF1
        CatalogF11
        CatalogF12
          CatalogF121 

    Orders
      OrdersF1
        OrdersF11
        OrdersF12
          OrdersF121

    Accounts
      AccountsF1
        AccountsF11
        AccountsF12
          AccountsF121 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:51:07.737

该线程包含禁用`JTree`.

[http://www.coderanch.com/t/339551/GUI/java/disable-treenode-jtree](http://www.coderanch.com/t/339551/GUI/java/disable-treenode-jtree)

# c# - 如何在 WinForms WebBrowser 控件上加载内存中的图像

> ID：14335954
> 
> 赞同：1
> 
> 时间：2013-01-15T10:41:21.360
> 
> 标签：c#, winforms, browser, filestream, in-memory

我正在用 C# 开发一个 .NET 3.5 WinForms 项目，我想就直接从**内存中的源在****WebBrowser**控件中呈现图像的最佳方法提出意见？ 通过内存，我的意思是我有一组**Base64**编码字符串格式的图像，我希望将它们呈现在 WebBrowser 控件的嵌入页面上。

 ****我曾希望使用嵌入式[数据 URI](http://devio.wordpress.com/2011/01/13/embedding-images-in-html-using-c/)选项示例，但是这种方法[仅限](http://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support)于图像 < 32KB。

我希望可以将其转换为`System.Drawing.Image`实例并以某种方式在`src`html 标记中引用此图像，如下所示`<img src="<insert reference here?>" </img>`：这样的技术可行吗？

如果不可能做到这一点，那么我想知道在 windows 临时目录中创建文件并从那里引用的可行性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:47:28.000

Another approach is to set up a web server and to load the image via the localhost `<img src='http://localhost/img.jpg'>`. This prevents creating temporary images images on disk.

If you don't want to deal with a web server, simple image tiling combined with the mentioned data URI parameter would work. A single tile can be obtained by:

```
Rectangle region = new Rectangle(x, y, tileWidth, tileHeight);
Bitmap tile = sourceBitmap.Clone(region, sourceBitmap.Clone.PixelFormat); 
```

You just repeat the tile generation for varying parameters of `Rectangle region` until you have covered the complete source image. You might try out which `tileWidth` and `tileHeight` are appropriate to result in tiles with data size lower than 32kB.****

# java - SwingUtilities.windowForComponent(JFrame) 返回 null

> ID：14335963
> 
> 赞同：3
> 
> 时间：2013-01-15T10:41:55.153
> 
> 标签：java, swing, jframe, swingutilities

`frame`是`JFrame`我的 Swing 应用程序中唯一的。由于`JFrame`扩展`Window`，我从描述和方法名称中相信代码应该返回框架本身。

```
SwingUtilities.windowForComponent(frame) 
```

> public static Window windowForComponent(组件aComponent)
> 
> 返回组件的窗口

但它返回`null`，因为实现是这样的

```
 public static Window windowForComponent(Component c) {
    return getWindowAncestor(c);
 } 

 public static Window getWindowAncestor(Component c) {
    for(Container p = c.getParent(); p != null; p = p.getParent()) {
        if (p instanceof Window) {
            return (Window)p;
        }
    }
    return null;
 } 
```

您是否同意方法实现不精确？

**UPD：**我的意思是 JFrame 被传递给方法`windowForComponent`，`JFrame`扩展`Window`所以应该有额外的检查，比如

```
if (c instanceof Window) return (Window)c; //in windowForComponent 
```

**UPD2：**所以我必须实施

```
public static Window windowForComponent (Component c) {
    if (c instanceof Window) 
        return (Window)c;

    return SwingUtilities.windowForComponent(c);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:10:31.627

您可能会混淆*类*层次结构和*包含*层次结构。声明`JFrame extends Window`表示子类/超类关系，同时`getWindowAncestor()`检查两个`Container`实例的关系。请注意，它`JFrame`是 a[`top-level container`](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)和 的子类`Window`。

# .net - 如何在 VB.NET 中以编程方式将水晶报表导出为 PDF

> ID：14335966
> 
> 赞同：5
> 
> 时间：2013-01-15T10:42:02.730
> 
> 标签：.net, vb.net, crystal-reports

```
Imports CrystalDecisions.CrystalReports.Engine
Imports CrystalDecisions.Shared
Imports CrystalDecisions.Web
Imports CrystalDecisions.ReportSource
Imports CrystalDecisions.CrystalReports

Imports System.IO
Imports System.Net
Imports System.Net.Mail

Public Class Form1

Dim cryRpt As New ReportDocument

Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    cryRpt.Load("C:\Documents and Settings\Prs1\My Documents\Visual Studio 2008\Projects\myCR\myCR\cr.rpt")
    CrystalReportViewer1.ReportSource = cryRpt

    CrystalReportViewer1.Refresh()

    Try
        Dim CrExportOptions As ExportOptions
        Dim CrDiskFileDestinationOptions As New  _
        DiskFileDestinationOptions()
        Dim CrFormatTypeOptions As New PdfRtfWordFormatOptions()
        CrDiskFileDestinationOptions.DiskFileName = _
                                    "C:\crystalExport.pdf"
        CrExportOptions = cryRpt.ExportOptions
        With CrExportOptions
            .ExportDestinationType = ExportDestinationType.DiskFile
            .ExportFormatType = ExportFormatType.PortableDocFormat
            .DestinationOptions = CrDiskFileDestinationOptions
            .FormatOptions = CrFormatTypeOptions
        End With
        cryRpt.Export()
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try

End Sub 
```

结束类

我试过上面的代码。我的项目文件夹中有一个 Windows 窗体和一个 Crystal 报告文件 (cr.rpt)。我使用 Oracle 10G 作为数据库。但我收到一条错误消息，提示“登录失败”。（【错误说明】图片： http: [//pho.to/Zv6t](http://pho.to/Zv6t)）

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:47:57.840

终于从[这里找到了解决方案](https://stackoverflow.com/questions/12486925/crystal-reports-how-to-set-database-credentials)

唯一的事情是，我需要在运行时设置数据库凭据才能使 Crystal Report 正常工作。

```
cryRpt.SetDatabaseLogon("user", "password", "server", "database") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T09:55:43.597

导入 CrystalDecisions.CrystalReports.Engine

导入 CrystalDecisions.Shared

Dim rpt 作为新的 RptCashbill

```
 ''''''fill Report data''''''
  CType(rpt,ReportDocument).ExportToDisk(ExportFormatType.PortableDocFormat,"C:/Report.pdf") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T10:33:32.157

这个常见的问题只发生在从 VB 到 .Net 世界的旧版 CrystalReports 调用者身上。

没什么好担心的。请这样使用......

```
connectionInfo.DatabaseName = "MahendrenDataBase"

connectionInfo.ServerName ="SystemDSN";//Create a system dsn.

connectionInfo.UserID = "UID";

connectionInfo.Password="Pwd" 
```

# google-api - Api 控制台：为 Android 应用创建 OAuth 2.0 客户端 ID - 错误“发生意外错误。我们正在调查。”

> ID：14335969
> 
> 赞同：1
> 
> 时间：2013-01-15T10:42:19.917
> 
> 标签：google-api, google-drive-api, google-api-java-client

我们不小心删除了一个已为 API 项目中特定包名称/证书哈希创建的 OAuth 2.0 客户端 ID。现在尝试为该包名称/证书哈希重新创建此 OAuth 2.0 客户端 ID 时，我们收到错误“发生意外错误。我们正在调查它。”。有没有办法重新激活这种已删除的 OAuth 2.0 客户端 ID 或简单地重新创建它？

“意外删除”是因为我们遇到的问题是，为了测试和开发，我们使用了另一个谷歌账户，并想用我们用于发布的谷歌账户重新创建 OAuth 2.0 客户端 ID。但这些似乎是不可能的（得到同样的错误）。由于应用程序已经发布，因此无法使用其他包名称或证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:19:53.647

无法使用相同的包名称/哈希对创建另一个项目，但是您可以通过在页面左侧的下拉菜单中选择取消删除来恢复已删除的项目。

# sql - 组上的 MAX 返回具有相同日期但不同时间的多个值

> ID：14335971
> 
> 赞同：1
> 
> 时间：2013-01-15T10:42:26.590
> 
> 标签：sql, sql-server, sql-server-2005, max

我遵循了这个网站上关于从一组行中选择 MAX 的许多优秀建议。

我有一个历史文件，我只想要每个项目编号的最高日期和评论。我正在根据这些信息在 Boxi 宇宙中创建一个派生表。一切都很顺利，但是如果同一天有两个条目但时间不同，它们都会被返回。这会在后续报告中复制该条目。有没有办法让 MAX 命令下降到日期字段的时间级别？

数据库是 SQL Server 2005

------------- 用于派生表的Sql

```
Select
   Projectno, Comment, CreatedOn
from 
   ReportHistory
Where
   ReportHistory.ItemName=('ProjectCode1')
and
   CreatedOn in(Select max(CreatedOn) FROM ReportHistory group by Projectno) 
```

-------------------示例数据库

```
Projectno     Comment             Created on

1             Started             2013-01-04 11:04:00
2             Late                2013-01-06 11:22:00
3             Late                2013-01-07 11:06:00
1             On Time             2013-01-08 11:01:00   *these two both get selected*
1             Late                2013-01-08 12:05:00   *these two both get selected*
3             Back on schedule    2013-01-08 14:20:00
2             Still overdue       2013-01-09 09:01:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:46:48.597

`MAX`在`DATETIME`数据类型上显然要考虑时间，这不是您的查询有什么问题。问题是您不能确保 for 的最大值`CreatedOn`是正确的`ProjectNo`。您可以为此使用分析函数：

```
;WITH CTE AS
(
    SELECT  Projectno, 
            Comment, 
            CreatedOn,
            ROW_NUMBER() OVER(PARTITION BY ProjectNo ORDER BY CreatedOn DESC) RN
    FROM ReportHistory
    WHERE ReportHistory.ItemName = 'ProjectCode1'
)
SELECT Projectno, Comment, CreatedOn
FROM CTE
WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:30:13.183

查询是否没有相同日期的相同projectno：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/39996/11)**

```
SELECT h.Projectno,
       h.Comment,
       h.[Created on]
FROM ReportHistory h
WHERE h.[Created on] =(Select max(h2.[Created on])
                       FROM ReportHistory h2 
                       WHERE h2.Projectno = h.Projectno )
ORDER BY h.Projectno 
```

结果：

```
| PROJECTNO |          COMMENT |                     CREATED ON |
-----------------------------------------------------------------
|         1 |             Late | January, 08 2013 12:05:00+0000 |
|         2 |    Still overdue | January, 09 2013 09:01:00+0000 |
|         3 | Back on schedule | January, 08 2013 14:20:00+0000 | 
```

查询是否有相同日期的相同项目号：

```
SELECT h.Projectno,
       MAX(h.Comment) AS Comment,
       h.[Created on]
FROM ReportHistory h
WHERE h.[Created on] =(Select max(h2.[Created on])
                       FROM ReportHistory h2 
                       WHERE h2.Projectno = h.Projectno )
GROUP BY h.Projectno,
       h.[Created on]
ORDER BY h.Projectno 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:07:12.727

我认为当不同项目的日期相同时，您会收到副本。

例如。添加您的数据 (4, 'On Time', '2013-01-08 11:01:00') 然后结果将是[**SQLFiddle**](http://sqlfiddle.com/#!3/e0e727/1/0)

但是你需要这个结果[**SQLFiddle**](http://sqlfiddle.com/#!3/e0e727/2/0)

```
SELECT *
FROM ReportHistory t
WHERE t.ItemName=('ProjectCode1')
  AND EXISTS (
              SELECT 1
              FROM ReportHistory                              
              WHERE projectNo = t.projectNo
              GROUP BY projectNo
              HAVING MAX(CreatedOn) = t.CreatedOn
              ) 
```

# c# - 可枚举字符串列表中字符串的索引或位置

> ID：14335973
> 
> 赞同：1
> 
> 时间：2013-01-15T10:42:39.250
> 
> 标签：c#, .net, string, visual-studio-2010, .net-4.0

> **可能重复：**
> [如何获取 IEnumerable 中元素的索引？](https://stackoverflow.com/questions/1290603/how-to-get-the-index-of-an-element-in-an-ienumerable)

我有以下接受可枚举字符串列表的函数。

我遍历所有字符串，如果它的值等于“ `TestName`”（不区分大小写），我返回它的位置。

```
 int GetMyTestColumnPosition(IEnumerable<string> TitleNames)
    {
        foreach (var test in TitleNames)
        {
            if (string.Compare(test, "testname", stringComparison.CurrentCultureIgnoreCase) == 0)
            {
                // return TitleNames.IndexOf(test); does not work!
            }
        }
    } 
```

编辑：我将参数更改为“ `IList<string>`”，这有效！但，

1.  如何在可枚举的字符串列表中查找字符串的索引或位置？
2.  为什么 ienumerable 不支持 index ？（我们没有改变列表中的任何值，我们只是找出它的位置！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:45:36.910

好吧，由于 IEnumerables 用于枚举，因此它们没有 IndexOf 方法也就不足为奇了。如果需要，您可以创建扩展方法。

*但是*，既然您已经在枚举，那么再次计算索引有什么意义呢？做这样的事情：

```
int index = 0;
foreach(var test in TitleNames)
{
    if(...) return index;
    index++;
} 
```

想一想，这*就是*你想要的扩展方法：

```
public static int IndexOf(this IEnumerable<T> list, T item)
{
    int index = 0;
    foreach(var l in list)
    {
        if(l.Equals(item))
            return index;
        index++;
    }
    return -1;
 } 
```

只需记住添加对空值的检查，并可能提供一个可选的比较器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T10:45:53.787

您可以将重载中的索引传递给`Select`or `Where`：

```
var found = TitleNames
    .Select((str, index) => new { str, index })
    .Where(x => x.str.Equals("testname", StringComparison.CurrentCultureIgnoreCase))
    .FirstOrDefault();

if (found != null)
    return found.index;
return -1; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T10:45:33.567

来自 MSDN 关于[IList](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx)

> 表示可以通过索引单独访问的非通用对象集合。

`IEnumerable`是一个简单的枚举器，不支持索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:47:59.230

```
var item = 
    TitleNames.Select( (tn, index) => new{tn, index})
      .FirstOrDefault(x => 
        string.Equals(x.tn, 
                      "testname", 
                      StringComparison.CurrentCultureIgnoreCase));
return item==null ? -1 : item.index; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T10:51:27.510

`TitleNames`是`IEnumerable`，所以它不支持索引。

你不能依赖枚举：

```
int i = 0;
foreach(var test in TitleNames)
{
    i++;
} 
```

计算索引。

您可以构建自己的类，该类继承自`IEnumerable<T>`并在枚举时以随机顺序返回对象。

如果大多数具体的 .Net 类型通常是索引友好的，那么它就是纯粹的实现细节。

所以，回答你的问题：**你不能从`IEnumerable<T>`**. `IList<T>`如果您需要索引支持，请使用。

# java - 获取java war文件中的资源文件夹

> ID：14335977
> 
> 赞同：1
> 
> 时间：2013-01-15T10:42:57.763
> 
> 标签：java, file, file-io, war, keyczar

我正在创建一个使用 keyczar 进行加密的 REST Web 服务。我已经生成了公钥和私钥，并将它们放在 src/main/resources/RSA 下。

要实例化加密器，我需要将文件的位置传递给它，`Crypter crypterPrivate = new Crypter(PATH_RSA + "/private");`但是当我部署 war 文件时，我遇到了 RSA 文件夹位置的问题。

我已经尝试过一些我在谷歌上搜索过的东西，比如 InputStream，但情况并非如此，因为我不想传递任何文件，而是传递 RSA 文件夹位置。还尝试了几个不同`/WEB-INF/classes/RSA`的文件夹，例如（它位于war文件中）。

有小费吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:48:17.100

如果 keyczar 可以为其关键位置获取一个 URL，那么`this.getClass().getResource("/RSA/private")`将为您提供一个合适的 URL。如果它需要本机文件路径，那么您将不得不使用

```
ServletContext ctx = // ...
String pathToKey = ctx.getRealPath("/WEB-INF/classes/RSA/private"); 
```

究竟如何获得`ServletContext`取决于您的工具包。请注意，这仅在您部署 WAR 文件时在磁盘上展开时才有效，如果应用程序直接从压缩的 WAR 文件运行，则此方法无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:46:57.910

You can access this file via the classpath.

```
URL resourceUrl = URL.class.getResource("/WEB-INF/classes/RSA");
File resourceFile = new File(resourceUrl.toURI()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:55:39.797

我很确定 Keyczar 的 Java 版本不支持此功能，但我相信有人在他们的问题跟踪器中提交了一个小补丁来添加它：

[http://code.google.com/p/keyczar/issues/detail?id=55](http://code.google.com/p/keyczar/issues/detail?id=55)

```
KeyczarClassLoaderReader reader = new KeyczarClassLoaderReader(PATH_RSA + "/private");
Crypter crypterPrivate = new Crypter(reader); 
```

# mongodb - 在 mongodb 连接字符串中处理 @

> ID：14335978
> 
> 赞同：12
> 
> 时间：2013-01-15T10:42:57.723
> 
> 标签：mongodb, mongodb-.net-driver

我有连接字符串

```
<add key="MongoDBConnectionString" value="mongodb://user:password@123@127.0.0.1/?safe=true"/> 
```

密码是`password@123`如此主机正在解析 123@127.0.0.1，我如何处理凭据中的 @

**编辑** 我试图逃避它但仍然是同样的问题

```
 <add key="MongoDBConnectionString" value="mongodb://user:password&#64;123@127.0.0.1/?safe=true"/> 
```

**编辑** 感谢 alexjamesbrown 在为我工作后的帮助。

```
<add key="MongoDBConnectionString" value="mongodb://user:password%40123@127.0.0.1/?safe=true"/> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-15T11:00:33.740

我之前将此作为答案发布，但它已将其转换为评论...

将您的 @ 符号转义为`%40` （在您的密码字符串中。）

根据评论，我相信这将使用 C# 驱动程序工作，但在使用其他驱动程序时可能无法工作（例如 node.js 上的猫鼬）

# maven - IntelliJ：在构建某个工件之前，我如何运行某个 maven 目标？

> ID：14335984
> 
> 赞同：0
> 
> 时间：2013-01-15T10:43:10.190
> 
> 标签：maven, intellij-idea

所以，我知道如何在 make 之前/之后以及在运行/调试配置之前运行 maven 目标。甜的。

但是我想在构建某个工件之前运行一个 Maven 目标，并且找不到该选项。工件配置对话框允许运行 ant 目标，但我没有 ant 目标，只有 maven 目标。

那么，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:13:54.217

您在这里有 2 个选项：

1.  在 Artifact 预处理/后处理中提交除 Ant 之外还支持 Maven[的功能请求。](http://youtrack.jetbrains.net/issues/IDEA)
2.  使用它编写 Ant 任务`exec`将运行您的 Maven 目标并使用它。

# lua - 安装 luasocket 后 Luarocks 中断

> ID：14335986
> 
> 赞同：0
> 
> 时间：2013-01-15T10:43:18.830
> 
> 标签：lua, luasocket, luarocks

这里运行Arch Linux，lua版本为5.1，luarocks 2.0.12

运行后`luarocks install luasocket`我无法再安装任何软件包。我看到的错误信息是

```
Warning: Failed searching manifest: Failed loading manifest: Failed fetching manifest for http://www.luarocks.org/repositories/rocks - Error fetching file: Failed downloading http://www.luarocks.org/repositories/rocks/manifest - closed
Warning: Failed searching manifest: Failed loading manifest: Failed fetching manifest for http://luarocks.giga.puc-rio.br/ - Error fetching file: Failed downloading http://luarocks.giga.puc-rio.br/manifest - closed
Warning: Failed searching manifest: Failed loading manifest: Failed fetching manifest for http://luafr.org/luarocks/rocks - Error fetching file: Failed downloading http://luafr.org/luarocks/rocks/manifest - closed
... 
```

所以看起来像安装 luasocket 以某种方式破坏了 luarocks。我搜索了它，一个人似乎在 Windows 上遇到了类似的问题，他似乎通过删除 luasocket dll 解决了这个问题（嗯？）。

有没有其他人有这个问题？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:13:15.637

Luarocks 是用 Lua 编写的，并且使用的是 luasocket 本身，所以可能存在不兼容的问题。Luarocks 使用 luasocket 2.0.2。Luarocks 会以这种方式打破我觉得很奇怪。你可能想提交一个错误，或者至少联系[邮件列表](http://www.luarocks.org/en/Mailing_list)。

# c# - WP7 - 页面加载后播放媒体元素

> ID：14335987
> 
> 赞同：0
> 
> 时间：2013-01-15T10:43:24.247
> 
> 标签：c#, windows-phone-7, xaml, mediaelement

`MediaElement`我的 xaml 页面中有这个：

```
<MediaElement 
            x:Name="soundMenu" 
            Source="Sounds/menu.wav" 
            AutoPlay="False" MediaEnded="soundMenu_MediaEnded"/> 
```

我希望它在页面加载时播放（如背景音乐）：

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
     soundMenu.Play()
} 
```

它不起作用。当我单击某个按钮并尝试播放音乐时，它可以正常工作，但事实并非如此。这有什么问题？页面加载后如何播放声音？

Ps：我知道我必须检查用户是否在玩什么。我现在只想解决这个问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:07:49.710

MediaElement 需要一些时间来初始化。我猜在您的情况下，您尝试在加载声音文件之前开始播放。将 AutoPlay 设置为 true 或调用 MediaOpened 事件处理程序中的 Play 方法。

# android - 在 android 视图中显示大文本数据的最佳实践？

> ID：14335988
> 
> 赞同：11
> 
> 时间：2013-01-15T10:43:26.917
> 
> 标签：android

在我的应用程序的信息区域中，我想显示我的应用程序的简要说明。为此，我需要创建一个包含大量文本的视图。最好的做法是什么？实际上我创建了一个带有滚动视图的线性布局，在此我将添加我的文本，其中还应该包含一些变量值，例如我的应用程序版本。但是不知道有没有更好的办法呢？

这是我目前的方法：

```
 <LinearLayout
     android:id="@+id/information_content"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:layout_above="@id/bottom_footer"
     android:layout_below="@id/top_header"
     android:layout_marginLeft="@dimen/marginLeft"
     android:layout_alignParentRight="true"
     android:layout_weight="1"
     android:orientation="vertical" >

     <ScrollView
         android:id="@+id/scrollView1"
         android:layout_width="match_parent"
         android:layout_height="wrap_content" >

         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="match_parent" 
             android:orientation="vertical"
             >

             <EditText
                 android:id="@+id/info_text"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:ems="10"
                 android:inputType="textMultiLine"
                 android:text="Hallo das ist ein test!!!
                 dsf" />

         </LinearLayout>
     </ScrollView>

 </LinearLayout> 
```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-15T10:59:01.057

您可能正在寻找一个典型的“关于屏幕”，其中包含可以使用 HTML 格式化的简单可滚动文本。

首先，这是布局`/layout/about_layout.xml`。您不需要将视图包装在额外的 LinearLayout 中。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

  <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="12dp" >

    <TextView
      android:id="@+id/about_text_view"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content" />

  </RelativeLayout>

</ScrollView> 
```

之后，将以下内容添加到您的`/values/strings.xml`:

```
<string name="about_text">
  <![CDATA[ 
    Author: Your name<br/><br/>Your description text, changelog, licences etc... ]]>
</string> 
```

最后，使用你的布局`AboutActivity.java`，显示 HTML 格式的字符串，并用一些自动更新的信息来丰富它，比如你的版本号。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.about_layout);

    String versionName = "";
    try {
        PackageInfo pinfo = getPackageManager().getPackageInfo(getPackageName(), 0);
        versionName = pinfo.versionName;
    } catch (NameNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    TextView aboutTextView = (TextView) findViewById(R.id.about_text_view);

    aboutText = Html.fromHtml("<h1>Your App Name, Version " + versionName + "</h1>"
            + getString(R.string.about_text));
    aboutTextView.setText(aboutText);
} 
```

这就是我在应用程序中处理关于屏幕的方式。抱歉，这个答案可能有点过头了，但我认为这是一种普遍要求的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:50:29.593

没有标准的方式来显示大量文本。这取决于您希望它的外观。然而，很多开发人员会像你一样使用滚动视图。如果您只显示文本，您应该使用文本[视图](https://developer.android.com/reference/android/widget/TextView.html)而不是您拥有的编辑文本。

还有其他方法可以显示大量文本，例如[viewpager](https://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:52:05.107

当只有一个子 View 时，LinearLayouts 毫无用处。当我想显示大量文本时，我使用了这个 XML：

```
<!-- Display the record details in a scrolling text view. -->
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/[my drawable]"
    android:fillViewport="true"
    android:scrollbars="vertical" >

    <TextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/defaultDetail" />

</ScrollView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T10:55:55.777

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent">

     <ScrollView 
        android:id="@+id/ScrollView01"
      android:layout_height="150px" 
      android:layout_width="fill_parent">

       <TextView 
       android:id="@+id/TEXT_VIEW" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:text="This text view should act as header This text view should act as header This text view should act as header This text view should act as header This text view should act as header This text view should act as header This text view should act as header" />
     </ScrollView>
    <EditText
        android:id="@+id/EDIT_TEXT"
        android:layout_height="70px"
        android:layout_width="fill_parent"
        android:layout_alignParentBottom="true"
        android:maxHeight="70px"
    />

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T11:07:53.570

用这个

```
 <TextView
   android:id="@+id/text_view"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:singleLine="false"
   android:scrollbars="vertical"
   android:textColor="#000"
   >
  </TextView>

 TextView textView = (TextView)findViewById(R.id.text_view);
 textView.setMovementMethod(ScrollingMovementMethod.getInstance()); 
```

这是自动滚动文本视图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T10:54:28.913

你正在做的是完美的。无需更改。但是，如果只有一个 ScrollView 作为其子项，那么您最外层的 LinearLayout 就没有任何意义。除此之外，一切都正是它应该做的。

# macos - python 3.3没有包安装程序？

> ID：14335989
> 
> 赞同：2
> 
> 时间：2013-01-15T10:43:28.457
> 
> 标签：macos, python-3.x, pip, easy-install

我刚刚为 Mac OS 下载了安装的 python 3.3。我使用了[来自 python.org 的标准包](http://www.python.org/ftp/python/3.3.0/python-3.3.0-macosx10.6.dmg)

我在 python 3.3 中找不到包安装工具。没有 pip、easy_install、setuptools。看起来像一个引导问题：如何在没有包安装包的情况下安装包安装包？

我错过了一些明显的东西吗？还是我需要采取进一步的步骤才能获得软件包安装程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T13:15:43.337

[Distribute](http://pypi.python.org/pypi/distribute)提供了一个安装程序脚本，`distribute_setup.py`. 因此，在带有 curl 的 Unix-y 系统上，您可以使用以下命令：

```
curl -O http://python-distribute.org/distribute_setup.py
python3.3 distribute_setup.py
easy_install pip    # easy_install is part of distribute 
```

如果您没有 curl，请以另一种方式下载脚本并运行其他两个命令。

# android - 如何从相同的视图构建 TableLayout 5X5

> ID：14335992
> 
> 赞同：1
> 
> 时间：2013-01-15T10:43:50.290
> 
> 标签：android, android-layout, tablelayout

我想构建基于表格布局的通用 5X5 视图（所有视图都具有相同的宽度和高度），因为您可以看到我的代码不是通用的。该怎么办？我试图与填充父母和匹配父母一起玩......请帮忙。我希望 tableLaayout 的宽度和高度相等。

```
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/llMain"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:orientation="vertical"
tools:context=".MainActivity" >

<TableLayout
    android:id="@+id/tableBoard"
    android:layout_width="wrap_content"
    android:layout_height="313dp"
    android:layout_centerHorizontal="true" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_weight="1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <com.example.com.worfield.barak.Square
            android:id="@+id/view1"
            android:layout_width="60dp"
            android:layout_height=""
            android:layout_margin="1dp"

            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view2"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"                         
            android:background="@drawable/square" />
        <com.example.com.worfield.barak.Square
            android:id="@+id/view3"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"

            android:background="@drawable/square" />

       <com.example.com.worfield.barak.Square
           android:id="@+id/view4"
           android:layout_width="60dp"
           android:layout_height="60dp"
           android:layout_margin="1dp"

           android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view5"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"

            android:background="@drawable/square" />

    </TableRow>

    <TableRow
        android:layout_weight="1"
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <com.example.com.worfield.barak.Square
            android:id="@+id/view6"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:layout_weight="0.24"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view7"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view8"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

       <com.example.com.worfield.barak.Square
            android:id="@+id/view9"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view10"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />
    </TableRow>

    <TableRow
        android:layout_weight="1"
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <com.example.com.worfield.barak.Square
            android:id="@+id/view11"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view12"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view13"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view14"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

       <com.example.com.worfield.barak.Square
            android:id="@+id/view15"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />
    </TableRow>

    <TableRow
        android:layout_weight="1"
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <com.example.com.worfield.barak.Square
            android:id="@+id/view16"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view17"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

       <com.example.com.worfield.barak.Square
            android:id="@+id/view18"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view19"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view20"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />
    </TableRow>

    <TableRow
        android:layout_weight="1"
        android:id="@+id/tableRow5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <com.example.com.worfield.barak.Square
            android:id="@+id/view21"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

       <com.example.com.worfield.barak.Square
            android:id="@+id/view22"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

        <com.example.com.worfield.barak.Square
            android:id="@+id/view23"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />

       <com.example.com.worfield.barak.Square
            android:id="@+id/view24"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"

            android:background="@drawable/square" />

       <com.example.com.worfield.barak.Square
            android:id="@+id/view25"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_margin="1dp"
            android:background="@drawable/square" />
    </TableRow>
</TableLayout>

<Button
    android:id="@+id/bStart"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tableBoard"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="16dp"
    android:text="Do Something" />

<TextView
    android:id="@+id/tvError"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/bStart"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="18dp"
    android:text="TextView" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:03:28.523

创建一个只能是正方形的特殊视图。您应该相应地覆盖 onMeasure 方法。例如，您可以执行以下操作：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    //final int height = getMeasuredHeight();
    final int width = getMeasuredWidth();

    setMeasuredDimension(width, width);
} 
```

TableRow 是线性布局。因此，您可以使用 layout_weight 将 5 个子元素水平平均分布。为一行的所有子项设置 layout_width = "0" 和 layout_weight = "1"。测量时，每个孩子的宽度将是 tableRow 宽度的 1/5，孩子的高度将等于它的宽度。

```
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llMain"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <TableLayout
        android:id="@+id/tableBoard"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" >

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <com.kamagames.pokerist.Squire
                android:id="@+id/view25"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_margin="1dp"
                android:layout_weight="1"
                android:background="#00ff00" />

            <com.kamagames.pokerist.Squire
                android:id="@+id/view25"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_margin="1dp"
                android:layout_weight="1"
                android:background="#ff0000" />

            <com.kamagames.pokerist.Squire
                android:id="@+id/view25"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_margin="1dp"
                android:layout_weight="1"
                android:background="#0000ff" />

            <com.kamagames.pokerist.Squire
                android:id="@+id/view25"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_margin="1dp"
                android:layout_weight="1"
                android:background="#ffff00" />

            <com.kamagames.pokerist.Squire
                android:id="@+id/view25"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_margin="1dp"
                android:layout_weight="1"
                android:background="#00ffff" />
        </TableRow>
    </TableLayout>
</RelativeLayout> 
```

# google-oauth - 同一域名多次注册

> ID：14335993
> 
> 赞同：0
> 
> 时间：2013-01-15T10:43:51.227
> 
> 标签：google-oauth

我可以使用多个 Google 帐户注册一个域吗？我已经为我的域注册了电子邮件服务并成功验证了它。现在我想使用 Google-Oauth 服务，但忘记了我之前验证过的帐户详细信息。那么我现在可以使用另一个电子邮件帐户来执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:12:23.527

您能否详细说明您如何尝试“注册”OAuth？您是否尝试注册/许可第三方应用程序以供您的 Google Apps 域的所有用户使用，并且该应用程序需要 OAuth 才能访问用户数据？或者您是否正在尝试开发使用 OAuth 协议的应用程序并将其注册到 Google？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:33:22.633

无法将域注册到多个 Google Apps 帐户。您可以[重置管理员帐户的凭据，](http://support.google.com/a/bin/answer.py?hl=en&answer=33561)如果您不再有权访问辅助电子邮件帐户，这将涉及[使用 DNS 重新验证域。](http://support.google.com/a/bin/answer.py?hl=en&answer=33561#domainverify)

# ruby-on-rails-3 - Rails 中基于关联的排序和分页记录

> ID：14335995
> 
> 赞同：3
> 
> 时间：2013-01-15T10:43:58.537
> 
> 标签：ruby-on-rails-3, activerecord, associations

我在这里有两个相关的模型：

```
class Order < ActiveRecord::Base
  belongs_to :customer
  ...
end

class Customer < ActiveRecord::Base
  has_many :orders
end 
```

一个客户可以有多个订单，一个订单可以属于一个客户。问题是我正在显示一个列出的表格，其中显示以下字段值

```
ORDER ID| CUSTOMER NAME |... 
```

客户名称指的是客户 [：名称] - 我发现您可以使用 find 方法进行排序并像这样传入连接：

```
Order.find(:all, :joins => :customer, :order => 'customer.name asc') 
```

但是我需要在这里对结果进行分页，看来我不能做这样的事情 - 我在这里使用 Kaminari gem 进行分页：

```
Order.find(:all, :joins => :customer, :order => 'customer.name asc').page(5) 
# doesn't work throws an error nomethoderror on page 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:19:43.093

您应该使用“新的”Rails 3 查询界面：

```
Order.joins(:customer).order("customers.name asc").page(5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:07:38.353

你可以这样做：

```
Order.joins(:customer).select('orders.*, customers.name as customers_name').order('customers_name ASC').page(5) 
```

与 Kaminari 宝石一起为我工作。此外，您将对每个对象结果都有 customers_name 方法。
您可以在此处找到有关选择方法的更多信息[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:42:22.087

'page' 适用于 Kaminari，它不是 Order 的方法

```
orders = Order.joins(:customer).order("customers.name asc")

Kaminari.paginate_array(orders).page(page) 
```

# java - JScrollpane RowheaderView 行号

> ID：14335997
> 
> 赞同：2
> 
> 时间：2013-01-15T10:44:18.987
> 
> 标签：java, swing

> **可能重复：**
> [Netbeans 中 jtextpane 中的行号](https://stackoverflow.com/questions/8995431/line-numbers-in-jtextpane-in-netbeans)

我想实现行号。

```
 JTextpane linenumbers = new JTextPane("1\n2\n3\n4\n");
   // in my project I'm using a function to generate the String with the numbers.
   //I think that this is not important for my problem.

   JTextPane text = new JTextPane();
   JScrollPane scroll = new ScrollPane(text);

   scroll.setRowheaderView(linenumbers);

   // I'm adding my scroll to my extended JFrame-Class
   this.add(scroll, BorderLayout.CENTER); 
```

但我在行号和文本之间转换。我必须做什么才能将行文本和行编号放在一行中？

# javascript - 带有对象的 Angular UI select2 数组是否可能？

> ID：14335999
> 
> 赞同：2
> 
> 时间：2013-01-15T10:44:22.607
> 
> 标签：javascript, angularjs, jquery-select2, angular-ui

有没有一种简单的方法可以将选项作为数组中的对象？如下：

```
$scope.search.categories = [{id: '1',name: 'first'},{id: '2',name: 'last'}];

<select ui-select2 ng-model="search.categories" multiple style="width:300px" data-placeholder="select category">
  <option ng-repeat="category in search.categories" value="{{category}}">{{category.name}}</option>

</select> 
```

还是我完全错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:47:06.127

查看我整理的这个演示：http://plnkr.co/edit/gist: [4279651 ?p=preview](http://plnkr.co/edit/gist:4279651?p=preview)

如果您希望所选项目成为对象，请使用`<input>`

该演示向您展示了执行 uiSelect2 的 4 种不同方法