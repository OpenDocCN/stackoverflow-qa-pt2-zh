# StackOverflow 问答 13874000-13874999

# javascript - 从数据库获取值后使用java脚本修剪左边的空格

> ID：13874002
> 
> 赞同：0
> 
> 时间：2012-12-14T06:49:31.967
> 
> 标签：javascript

嗨，当值来自数据库时，我想通过 java 脚本修剪左侧空间，我使用 jsp 标签获取值并在输入字段中输入这些值。当值的开始出现一些空间时，我面临问题，然后在所有输入字段中甚至没有打印单个值

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script>
    function getValue() {
        <jsp:useBean id="ProjectBO"
    class="com.nousinfo.tutorial.employee.service.model.bo.EmployeeProjectBO"
    scope="request" />

        document.getElementById("empNumber").value = '<jsp:getProperty property="employeeNumber" name="ProjectBO"/>';

document.getElementById("projectCode").value = '<jsp:getProperty property="projectCode" name="ProjectBO"/>';
        document.getElementById("startDate").value = '<jsp:getProperty property="startDate" name="ProjectBO"/>';
        document.getElementById("endDate").value = '<jsp:getProperty property="endDate" name="ProjectBO"/>';
        document.getElementById("role").value = '<jsp:getProperty property="role" name="ProjectBO"/>';
    }
</script>
</head>
<body onload="getValue()">

    <form id="employee" action="ProjectUpdateServlet" method="post">

        <table width="1254" height="74" border="0" align="center">
            <tr>
                <td width="970" height="68" align="center" bgcolor="#99CCFF"><h2>
                        <span class="style1">Project Detail</span>
                    </h2></td>
                <td width="274" height="68" align="center" bgcolor="#FFFFFF"><img
                    src="/image/Emp.jpg" width="190" height="92" /></td>
            </tr>
        </table>
        <p>
            <br />
        </p>
        <hr size="1" width="786">
        <table width="786" border="0" align="center">
            <tr>
            <td><input type="hidden" name="updateStatusProject" value="M" /></td>

            </tr>
            <tr>

                <td width="298">Employee Number:</td>
                <td><input type="text" id="empNumber" name="employeeNumber" readonly="readonly" />
                </td>
            <tr>
                <td>Project_Code:</td>
                <td><input type="text" name="projectCode" id="projectCode"  readonly="readonly"/>
                </td>
            </tr>
            <tr>
                <td>Start_date</td>
                <td><input type="text" name="startDate" id="startDate" /></td>
            </tr>
            <tr>
                <td>End_date</td>
                <td><input type="text" name="endDate" id="endDate" /></td>
            </tr>
            <tr>
                <td>Role</td>
                <td><input type="text" name="role" id="role" /></td>
            </tr>
        </table>

        <p>&nbsp;</p>
        <br />
        <table width="200" border="0" align="center">
            <tr>

                <td><center>
                        <input type="submit" name="submit" value="Save" onclick="self.close()"/>

                    </center></td>

                <td><center>
                        <input type="button" name="cancle" value="Cancel"
                            onclick="self.close()">
                    </center></td>
            </tr>
        </table>
        <hr size="1" width="786">
        <p>&nbsp;</p>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:51:23.167

JavaScript`replace`可以接受搜索词的正则表达式，因此如果要删除前导空格：

```
str = str.replace(/^\s+/, ''); 
```

意思是“输入的`^`开始”，`\s`意思是“任何空白字符”，`+`意思是“前面的一个或多个”。所以总的来说，正则表达式的意思是“输入开头的空白字符”。我们将它们替换为`''`.

如果您想删除*尾随*空格，而不是`^`在开头，您将`$`在结尾处（`$`=“输入结束”）：

```
str = str.replace(/\s+$/, ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T06:53:04.817

```
String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g,"");
}
String.prototype.ltrim = function() {
    return this.replace(/^\s+/,"");
}
String.prototype.rtrim = function() {
    return this.replace(/\s+$/,"");
}

// example of using trim, ltrim, and rtrim
var myString = " hello my name is ";
alert("*"+myString.trim()+"*");
alert("*"+myString.ltrim()+"*");
alert("*"+myString.rtrim()+"*"); 
```

# red5 - red5 和 s3（我想自定义流媒体视频的路径）

> ID：13874005
> 
> 赞同：5
> 
> 时间：2012-12-14T06:49:53.417
> 
> 标签：red5

我在我的项目中使用*red5流式传输视频，并且可以播放本地系统中保存在默认文件夹“streams”中的视频。*

现在我想自定义路径并想从 S3 获取视频。我如何配置 red5 与 S3 一起工作。这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T00:44:58.780

我有使用 IStreamFilenameGenerator 的代码与 S3 一起工作；我现在警告你，它可能不适用于最新的 jets3 库，但你会通过查看源代码了解它的工作原理。使用 S3 时您必须了解的一个问题/问题是您不能即时“记录”到存储桶；您的 flv 文件只有在文件完成后才能传输到 S3；Application.class 中有一个示例上传调用。而 S3 中的“播放”将按预期工作。

我将 S3 代码添加到 red5-examples 存储库：[https ://github.com/Red5/red5-examples](https://github.com/Red5/red5-examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:49:44.747

搜索： [https ://stackoverflow.com/search?q=IStreamFilenameGenerator](https://stackoverflow.com/search?q=IStreamFilenameGenerator)

或[https://www.google.com.au/search?q=IStreamFilenameGenerator+example&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:de:official&client=firefox-a](https://www.google.com.au/search?q=IStreamFilenameGenerator+example&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:de:official&client=firefox-a)

您会发现一些如何修改路径的示例。

当然，您也可以简单地将一些驱动器安装到流文件夹中，或者我猜符号链接甚至可以工作。但它可能没有那么灵活，就像你可以使用 IStreamFilenameGenerator 来完成它并完全按照你想要的那样生成一些字符串。

塞巴斯蒂安

# svn - 团队合作有没有比SVN更好的解决方案？

> ID：13874007
> 
> 赞同：0
> 
> 时间：2012-12-14T06:50:00.640
> 
> 标签：svn

我们公司使用 Subversion 版本控制系统。这对组合工作很有好处，但是如果两个用户同时在同一个文件上工作，则系统在提交后会返回冲突。

我没有任何明确的解决方案来防止此类问题。

对于团队合作，有没有比 SVN 更好的解决方案？

PS：所有用户都使用相同的SVN服务器用户名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T06:58:46.633

没有 VCS 可以自动解决您的冲突，尽管有些会比其他的更好地合并。我认为对文件进行相同的更改顺序会导致任何 VCS 发生冲突。解决方案是让您的项目更加模块化，拥有更专注的开发人员领域，尝试将工作分解为较小的提交并更频繁地进行更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T06:52:33.947

[GitHub](https://github.com/)

但这是一个在线存储库

或比特 桶比特[桶](https://bitbucket.org/)

# performance - 使用 VARCHAR2 列调整查询

> ID：13874011
> 
> 赞同：0
> 
> 时间：2012-12-14T06:50:05.960
> 
> 标签：performance, oracle, oracle10g

有这个存储过程构建一个动态查询字符串然后执行它。sp 在开发和测试环境中运行*良好*，但客户公司的 DBA 已告知此查询对生产中的数据库造成了很大的影响。IT 部门已要求我们调整查询。到目前为止一切顺利，我们已经将几乎所有这些 sp 从动态构建查询字符串转移到执行非常快的单个大查询（与旧查询相比）。

我们发现（除其他外）sp 通过评估参数是否具有默认值或实际值来构建查询字符串的 where 子句，即

```
IF P_WORKFLOWSTATUS <> 0 THEN
    L_SQL := TRIM(L_SQL) || ' AND WORKFLOW.STATUS = ' || TO_CHAR(P_WORKFLOWSTATUS);
END IF; 
```

所以我们优化了这个行为

```
WHERE
    ...
    AND (WORKFLOW.STATUS = P_WORKFLOWSTATUS OR P_WORKFLOWSTATUS = 0) 
```

这种更改改进了影响数字列的查询，但我们发现 VARCHAR2 参数和列存在问题。当前的行为是

```
--CLIENT.CODE is a VARCHAR2(14) column and there is an unique index for this column.
--The data stored in this field is like 'N0002077123', 'E0006015987' and similar
IF NVL(P_CLIENT_CODE, '') <> '' THEN
    L_SQL := TRIM(L_SQL) || ' AND CLIENT.CODE = ''' || P_CLIENT_CODE || '''';
END IF; 
```

我们试图通过这样做将其更改为我们*优化*的查询版本

```
WHERE
    ...
    AND (CLIENT.CODE = P_CLIENT_CODE OR NVL(P_CLIENT_CODE, '') = '') 
```

但是这种变化使查询失去了性能。有没有办法优化这部分查询，或者我们应该将我们的大查询（再次）变成一个动态查询，只是为了评估是否`VARCHAR2`应该将这个参数添加到 where 子句中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:05:50.160

Oracle 将空字符串`''`视为 NULL。所以这个条件`NVL(P_CLIENT_CODE, '') = ''`并没有多大意义。此外，它总是错误的，因为这里我们正在检查 NULL 的相等性，这总是错误的。为此，您可能并且可能应该将查询的该部分重新编码为：

```
WHERE
    ...
    AND ( (CLIENT.CODE = P_CLIENT_CODE) OR (CLIENT IS NULL) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:13:46.197

我建议或将此 varchar2 参数移回动态，或使用以下内容：

```
WHERE
    ...
    AND CLIENT.CODE = nvl(P_CLIENT_CODE,CLIENT.CODE) 
```

并确保您在 client.code 上有索引。（或在 client.code 上分区的表，如果可能的话。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T07:29:07.600

当然，正如已经说过的，您需要执行正确的空值检查。

然而，诀窍是，两者之间的区别

```
AND (CLIENT.CODE = P_CLIENT_CODE OR NVL(P_CLIENT_CODE, '') = '') 
```

和

```
AND ( (CLIENT.CODE = P_CLIENT_CODE) OR (CLIENT IS NULL) ) 
```

仅其本身不太可能导致性能问题。我什至会说带有第二个子句的查询可能比第一个子句执行*得更差*，因为它将为更多行产生 true，从而为后续的连接/订单/文件管理器等产生更大的结果集。

我敢打赌，将此子句添加到您的查询中会以某种方式破坏其最佳执行计划。例如，具有过时的统计信息，优化器可能会做出次优决定来选择非选择性索引`client.code`而不是其他可用索引。

`explain plan`但是，如果不查看慢查询的实际执行计划（不是您通过命令获得的预期执行计划！）和您的表结构，就很难确定。

# c# - 获取所有字符串中任意单词的索引

> ID：13874018
> 
> 赞同：0
> 
> 时间：2012-12-14T06:50:41.810
> 
> 标签：c#

我有一个 String ，其中包含 Word 不止一次 .. 我想一个接一个地找到该单词的每次出现，并需要在 That 之后添加一些其他单词 ..

例子 -

```
<start>
<child1>
.
.
.
<start>
<child2>
.. 
```

等等 ..

我试过 。

```
int count = Regex.Matches(StrRemoveWrongData, @"<start>").Count; 
```

它让我数数，有任何事情我们可以一一进行。并在其下方添加新词..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:52:57.280

你可以简单地做：`StrRemoveWrongData = StrRemoveWrongData.Replace(@"<start>", newString);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T06:59:06.867

根据你的标题，获取所有索引；

```
 var indexList = Regex.Matches(StrRemoveWrongData, @"<start>").Cast<Match>()
                    .Select(m => m.Index)
                    .ToList(); 
```

如果您的替换算法比简单的字符串更复杂，您可以使用 Regex.Replace 的重载

```
int count = 1;
var newstr = Regex.Replace(StrRemoveWrongData, @"<start>", 
                       m => { 
                           //Do some work
                           return String.Format("<child{0}>",count++);
                       }
              ); 
```

# c# - 如何将 LinQ 表达式从 F# 传递到 C# 代码

> ID：13874032
> 
> 赞同：7
> 
> 时间：2012-12-14T06:51:55.460
> 
> 标签：c#, linq, f#

ReactiveUI 具有带有签名的方法，例如

```
public static ReactiveUI.ObservableAsPropertyHelper<TRet> 
  ObservableToProperty<TObj, TRet>(
    this TObj This, 
    System.IObservable<TRet> observable, 
    System.Linq.Expressions.Expression<System.Func<TObj, TRet>> property, 
    TRet initialValue = null, 
    System.Reactive.Concurrency.IScheduler scheduler = null
  ) 
```

在 F# 中，我将如何构造一个像

```
System.Linq.Expressions.Expression<System.Func<TObj, TRet>> property, 
```

在 C# 中，我会做类似的事情

```
this.ObservableAsPropertyHelper(
    observable,
    me => me.MyProperty
) 
```

**编辑**

我试过了

```
m.ObservableToProperty(this, value, fun me -> me.Property ) 
```

和

```
m.ObservableToProperty(this, 
            value, 
            new Linq.Expression.Expression(fun me -> me.Property ) 
```

但两者都不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T08:26:44.697

我不确定新的 F# 3 查询表达式是否对您有帮助，但旧的 PowerPack（仍然很好用！）有一个扩展方法`Expr.ToLinqExpression() : Expression`，可以将 F# 引用表达式（即`<@ fun me -> me.MyProperty @>`）编译成 LINQ 表达式。

**编辑：** 正如 Daniel 指出的那样，[QuotationToLambdaExpression](http://msdn.microsoft.com/en-us/library/hh324072.aspx)为 F# 3 完成了工作。

# java - 带有 RESTful JSON 服务、HTML5 和 jQuery ajax 的 Java Web 框架

> ID：13874034
> 
> 赞同：5
> 
> 时间：2012-12-14T06:52:08.873
> 
> 标签：java, jquery, json, html, rest

几乎是 2013 年，HTML5 时代。jQuery 是 web Javascript-ing 的事实标准。

此链接适用于 2010 年： [https ://stackoverflow.com/questions/3882082/rest-json-web-services-java-ee-framework](https://stackoverflow.com/questions/3882082/rest-json-web-services-java-ee-framework)

我正在寻找将通过 RESTful JSON Web 服务公开域类的**Java Web 框架。**然后将 [希望] 为这些域类生成 Web 表单。并使用 jQuery ajax 与服务器通信以发送/接收 JSON 数据并填充 HTML。

所有 Web UI 处理都应该在客户端浏览器中。服务器应该只传输**静态 HTML5 页面**。没有像 JSP 这样的服务器端处理。

更新。我必须澄清我的问题点不是用于创建 Web 服务的框架。（有很多像 Apache CXF、Spring MVC Web 服务）。它也与 jQuery 无关。但是**Java**框架将为客户端-服务器通信的样板编码节省时间。

Groovy 和 Scala 是很棒的东西，但它们不是 Java，而是 JVM 语言。（想象一下告诉你的队友“我们应该学习类似 Java 的语言，但要开始使用新框架。”）

底线：

**Java Web 框架**+**静态 HTML5 页面**+ JSON 交互

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:01:07.640

您是否尝试过探索 Spring 的域休息映射和 Grails 的 Scaffolding ？尝试探索这些链接以实现您的目标：

1.  [到 REST 端点的域映射](http://java.dzone.com/articles/restful-web-applications)
2.  [更多关于域休息反模式](http://www.jroller.com/rickard/entry/the_domain_model_as_rest)
3.  [使用脚手架使用域模型生成整个应用程序](http://grails.org/doc/latest/guide/scaffolding.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T07:11:17.737

您的权利几乎是 2013 年，为什么不使用[nodeJS](http://nodejs.org/)公开您的 Rest Web 服务！

如果您对 Java 很执着，那么可以将 Spring MVC 视为 Jax-RS 的替代方案。使用 Spring（以及 JSON marshall/unmarshall 的 Jackson），您可以执行以下操作：

```
@Controller
@RequestMapping("/resource")
public class ResourceController
{
    @Autowired
    private ResourceService resourceService;

    @RequestMapping(value="/{id}", method=RequestMethod.GET)
    public @ResponseBody Resource getResource(@PathVariable Integer id)
    {
        return resourceService.lookup(id);
    }
    ...
}

public class Resource
{
    @JsonProperty("id")
    private int id;
    @JsonProperty("resourceName")
    private String name;
    ...
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:21:09.783

我还没有找到任何可以处理静态 HTML5 和 JavaScript 创作的*Java Web 框架。*

对于服务器端，有 Apache CXF、Spring MVC 和许多其他支持 RESTful Web 服务的框架。

# tomcat6 - 任何并发用户如何使用tomcat 6

> ID：13874043
> 
> 赞同：1
> 
> 时间：2012-12-14T06:52:46.770
> 
> 标签：tomcat6

我已经创建了一个 web 应用程序，现在我需要在 tomcat 6 上部署我的动态 web 应用程序。我想知道一次可以有多少用户登录到我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:26:48.453

您的应用程序可以同时被任意数量的用户访问，唯一的条件是您的服务器可以计算多少请求。我的意思是可以创建线程，直到服务器内存可用。您可以参考此链接访问[http://www.tomcatexpert.com/ask-the-experts/simultaneous-users](http://www.tomcatexpert.com/ask-the-experts/simultaneous-users)。

# android - 如何浏览图像并保存在sqllite数据库中

> ID：13874052
> 
> 赞同：1
> 
> 时间：2012-12-14T06:53:09.953
> 
> 标签：android

这是我的源代码不是从 gellery 上传图像并保存在 sql lite 请帮助我做错了什么？我阅读了这个示例代码[http://androidhub4you.blogspot.com/2012/09/hello-friends-today-i-am-going-to-share.html](http://androidhub4you.blogspot.com/2012/09/hello-friends-today-i-am-going-to-share.html)是采用硬代码图像我在此代码中添加浏览按钮图片来自自己的选择和展示

```
 import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
 import android.os.Bundle;
import android.util.Log;
 import android.view.View;
 import android.widget.Button;
 import android.widget.ListView;

 public class SQLiteDemoActivity extends Activity {

final int SELECT_PHOTO = 0;
 ArrayList<Contact> imageArry = new ArrayList<Contact>();
 ContactImageAdapter adapter;
 Button BrowseButton;
  DataBaseHandler db;

/** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

  db = new DataBaseHandler(this);
 //get image from drawable
  //Bitmap image = BitmapFactory.decodeResource(getResources(),R.drawable.facebook);

 BrowseButton=(Button)findViewById(R.id.BrowseButton);

  BrowseButton.setOnClickListener(new View.OnClickListener() {

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
     // in onCreate or any event where your want the user to
    // select a file
    Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
    photoPickerIntent.setType("image/*");

    startActivityForResult(photoPickerIntent, SELECT_PHOTO);

 }
});

 }

 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent        
 imageReturnedIntent) {
  super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

   switch(requestCode) {
 case SELECT_PHOTO:
  if(resultCode == RESULT_OK){
Uri selectedImage = imageReturnedIntent.getData();

InputStream imageStream = null;
try {
    imageStream = getContentResolver().openInputStream(
            selectedImage);
} catch (FileNotFoundException e) {
    e.printStackTrace();
}

Bitmap bmp = BitmapFactory.decodeStream(imageStream);

ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte[] imageInByte = stream.toByteArray();

Log.d("Insert: ", "Inserting ..");
db.addContact(new Contact("FaceBook", imageInByte));
//display main List view bcard and contact name

//Reading all contacts from database
List<Contact> contacts = db.getAllContacts();
for (Contact cn : contacts) {
String log = "ID:" + cn.getID() + " Name: " + cn.getName()
+ " ,Image: " + cn.getImage();

//Writing Contacts to log
Log.d("Result: ", log);
//add contacts data in arrayList
imageArry.add(cn);

}
adapter = new ContactImageAdapter(this, R.layout.screen_list,
imageArry);
ListView dataList = (ListView) findViewById(R.id.list);
dataList.setAdapter(adapter);

try {
    stream.close();
    stream = null;
} catch (IOException e) {

    e.printStackTrace();
}

 //convert bitmap to byte

}
}
 }
  }

      private static final int DATABASE_VERSION = 1;

    //Database Name
   private static final String DATABASE_NAME = "imagedb";

   //Contacts table name
 private static final String TABLE_CONTACTS = "contacts";

 //Contacts Table Columns names
 private static final String KEY_ID = "id";
 private static final String KEY_NAME = "name";
private static final String KEY_IMAGE = "image";

  public DataBaseHandler(Context context) {
 super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

 //Creating Tables
  @Override
 public void onCreate(SQLiteDatabase db) {
 String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
 + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
  + KEY_IMAGE + " BLOB" + ")";
db.execSQL(CREATE_CONTACTS_TABLE);
    }

   //Upgrading database
   @Override
   public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   //Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

     //Create tables again
    onCreate(db);
     }

   /**
  * All CRUD(Create, Read, Update, Delete) Operations
    */

      public// Adding new contact
   void addContact(Contact contact) {
     SQLiteDatabase db = this.getWritableDatabase();

     ContentValues values = new ContentValues();
   values.put(KEY_NAME, contact._name); // Contact Name
    values.put(KEY_IMAGE, contact._image); // Contact Phone

     //Inserting Row
    db.insert(TABLE_CONTACTS, null, values);
      db.close(); // Closing database connection
      }

     //Getting single contact
    Contact getContact(int id) {
   SQLiteDatabase db = this.getReadableDatabase();

  Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
   KEY_NAME, KEY_IMAGE }, KEY_ID + "=?",
    new String[] { String.valueOf(id) }, null, null, null, null);
   if (cursor != null)
   cursor.moveToFirst();

   Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
   cursor.getString(1), cursor.getBlob(1));

 //return contact
     return contact;

    }

  //Getting All Contacts
     public List<Contact> getAllContacts() {
    List<Contact> contactList = new ArrayList<Contact>();
     //Select All Query
      String selectQuery = "SELECT * FROM contacts ORDER BY name";

     SQLiteDatabase db = this.getWritableDatabase();
     Cursor cursor = db.rawQuery(selectQuery, null);
     //looping through all rows and adding to list
      if (cursor.moveToFirst()) {
     do {
       Contact contact = new Contact();
     contact.setID(Integer.parseInt(cursor.getString(0)));
    contact.setName(cursor.getString(1));
    contact.setImage(cursor.getBlob(2));
    //Adding contact to list
      contactList.add(contact);
    } while (cursor.moveToNext());
     }
    //close inserting data from database
    db.close();
      //return contact list
       return contactList;

     }

     //Updating single contact
     public int updateContact(Contact contact) {
     SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
     values.put(KEY_NAME, contact.getName());
    values.put(KEY_IMAGE, contact.getImage());

   //updating row
    return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
    new String[] { String.valueOf(contact.getID()) });

   }

  //Deleting single contact
    public void deleteContact(Contact contact) {
  SQLiteDatabase db = this.getWritableDatabase();
   db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
    new String[] { String.valueOf(contact.getID()) });
     db.close();
    }

    //Getting contacts Count
     public int getContactsCount() {
   String countQuery = "SELECT * FROM " + TABLE_CONTACTS;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
  cursor.close();

    //return count
  return cursor.getCount();
    }
     }

    import android.view.LayoutInflater;
 import android.view.View;
import android.view.ViewGroup;
  import android.widget.ArrayAdapter;
 import android.widget.ImageView;
 import android.widget.TextView;

   public class ContactImageAdapter extends ArrayAdapter<Contact>{
Context context;
int layoutResourceId;
//BcardImage data[] = null;
 ArrayList<Contact> data=new ArrayList<Contact>();
 public ContactImageAdapter(Context context, int layoutResourceId, ArrayList<Contact>  
 data) {
 super(context, layoutResourceId, data);
   this.layoutResourceId = layoutResourceId;
 this.context = context;
   this.data = data;
   }

   @Override
 public View getView(int position, View convertView, ViewGroup parent) {
View row = convertView;
ImageHolder holder = null;
 if(row == null)
  {
  LayoutInflater inflater = ((Activity)context).getLayoutInflater();
  row = inflater.inflate(layoutResourceId, parent, false);
     holder = new ImageHolder();
 holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
 holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
     row.setTag(holder);
  }
else
    {
  holder = (ImageHolder)row.getTag();
    }
   Contact picture = data.get(position);
    holder.txtTitle.setText("facebook");
      //convert byte to bitmap take from contact class
   byte[] outImage=picture._image;
   ByteArrayInputStream imageStream = new ByteArrayInputStream(outImage);
  Bitmap theImage = BitmapFactory.decodeStream(imageStream);
   holder.imgIcon.setImageBitmap(theImage);
  return row;
 }
  static class ImageHolder
  {
  ImageView imgIcon;
   TextView txtTitle;
 }
    }

           public class Contact {

// private variables
int _id;
String _name;
byte[] _image;

// Empty constructor
public Contact() {

}

// constructor
public Contact(int keyId, String name, byte[] image) {
this._id = keyId;
this._name = name;
this._image = image;

}

// constructor
public Contact(String contactID, String name, byte[] image) {
this._name = name;
this._image = image;

}

// constructor
public Contact(String name, byte[] image) {
this._name = name;
this._image = image;
}

// getting ID
public int getID() {
return this._id;
}

// setting id
public void setID(int keyId) {
this._id = keyId;
}

// getting name
public String getName() {
return this._name;
}

// setting name
public void setName(String name) {
this._name = name;
}

// getting phone number
public byte[] getImage() {
return this._image;
}

// setting phone number
public void setImage(byte[] image) {
this._image = image;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T11:08:10.967

```
mdb=new MyDataBase(getApplicationContext());

b.setOnClickListener(new OnClickListener() {

 public void onClick(View v) {

// TODO Auto-generated method stub  
          Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
          photoPickerIntent.setType("image/*");
          startActivityForResult(photoPickerIntent, PICK_PHOTO_REQUEST_CODE);
           } });

 breg.setOnClickListener(new OnClickListener() {
   public void onClick(View v) {
// TODO Auto-generated method stub
db=mdb.getWritableDatabase();
ContentValues cv=new ContentValues();
         cv.put("image", img);
         db.insert("tableimage", null, cv);
         Toast.makeText(MainActivity.this, "inserted successfully", Toast.LENGTH_SHORT).show()  }
              });
    bselect.setOnClickListener(new OnClickListener() {

  public void onClick(View v) {
 // TODO Auto-generated method stub
 db=mdb.getWritableDatabase();
 String[] col={"image"};
            c=db.query("tableimage", col, null, null, null, null, null);

            if(c!=null){
                c.moveToFirst();
                do{
                    img=c.getBlob(c.getColumnIndex("image"));
                   }while(c.moveToNext());
            }
            Bitmap b1=BitmapFactory.decodeByteArray(img, 0, img.length);

             imge.setImageBitmap(b1)  } });
             }

     protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == PICK_PHOTO_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            Uri chosenImageUri = data.getData();
            selectedImagePath = getPath(chosenImageUri);  //for getting the image path
            image.setVisibility(View.VISIBLE);
             image.setImageURI(chosenImageUri);

            String[] filePathColumn = { MediaStore.Images.Media.DATA };
            System.out.println("reached......2");

            Cursor cursor = getContentResolver().query(chosenImageUri,
                             filePathColumn, null, null, null);
             cursor.moveToFirst();

             int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
             String filePath = cursor.getString(columnIndex);
             cursor.close();
             Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);

            // testimage.setImageBitmap(yourSelectedImage);
             ByteArrayOutputStream stream = new ByteArrayOutputStream();
             yourSelectedImage.compress(Bitmap.CompressFormat.PNG, 100, stream);
             img = stream.toByteArray();
             System.out.println("****************"+img.toString());

        }
    } 
```

}

```
 public String getPath(Uri uri) {
     String[] projection = { MediaStore.Images.Media.DATA };
     Cursor cursor = managedQuery(uri, projection, null, null, null);
     int column_index = cursor
             .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
     cursor.moveToFirst();
     return cursor.getString(column_index);
 } 
```

**我的数据库.java**

```
public class MyDataBase extends SQLiteOpenHelper{

 private static String dbname="images";
 private static int dbversion=2;

 public MyDataBase(Context context) {
    super(context, dbname, null, dbversion);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("create table tableimage(image blob);");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("drop table if exists tableimage");
    onCreate(db);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:44:16.157

```
Are you got any solution or not? I am owner of given above URL "Androidhub4you.com".
If you still stuck please try my idea just make a new activity and add button for take picture from camera or gallery what ever you want after that pass this image to next activity through Intent and get it some thing like that-

Intent intent=getIntent();
Bitmap photo = intent.getExtra("image");

and now use this bitmap to instead of below Bitmap image.

DataBaseHandler db = new DataBaseHandler(this);
// get image from drawable
Bitmap image = BitmapFactory.decodeResource(getResources(),
R.drawable.facebook); 

Here I can't post my blog url but you can search on my blog for camera/gallery code. Just merge two code. 
```

试试下面的链接希望它对你有帮助- [点击这里！](http://www.androidhub4you.com/2013/04/sqlite-example-in-android-add-image.html)

```
Thanks, 
```

# asp.net - iis cname 到子域，从请求中获取子域

> ID：13874053
> 
> 赞同：0
> 
> 时间：2012-12-14T06:53:19.390
> 
> 标签：asp.net, iis, azure, asp.net-mvc-4, cname

我真正想做的是建立一个名为site.com 的天蓝色站点。然后有数百个子域，例如 foo.site.com、bar.site.com、baz.site.com 等。我的 asp.net mvc 应用程序将提取子域，因为这将用作标识符。接下来我想让其他域 CNamed 到子域。例如 hello.othersite.com -> foo.site.com，这样浏览器仍然显示 hello.othersite.com 但我可以从请求中获取 foo 子域。

我不想配置任何这些，因为会有很多子域，基本上每个帐户一个。

这真的可能吗？

我已经尝试了一些测试，但我不是 100% 确定如何进行。我会不会：

1.  设置 site.com 以接受 *.site.com
2.  CNAME hello.othersite.com 到 foo.site.com（我想要屏蔽、转发等吗？）
3.  传入的 http 请求是否包含有关其 CNAMED 的子域 (foo) 的任何信息？

我希望这不是太模糊和摇摆不定，但对其合理性的一些确认将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:34:31.853

它不仅仅是 Azure，而是整个网络。

我认为不可能摆脱`hello.othersite.com`它在 DNS 中实际映射到`foo.site.com`. 这是因为您的实际 HTTP 请求看起来像

```
GET /index.html HTTP/1.1
(other headers)
host: hello.othersite.com 
```

您的 Web 服务器，无论它是什么，都不知道`hello.othersites.com`通过 CNAME 映射到`foo.site.com`. 您收到的请求是针对`hello.othersite.com`.

如果您进行转发，则用户将永远不会停留，`hello.othersite.com`而是会被重定向到`foo.site.com`. 我想这不是你想要的。

直接域屏蔽通常通过 iFrame 完成，这也不推荐。

我会做以下事情，因为目前没有其他想法：

1.  设置站点以接受`*.site.com`和`*.othersite.com`
2.  将通配符 CNAME 映射添加到我的 Azure 云服务，即`*.site.com`-> CNAME -> `my.cloudapp.net`。对于我想要的两个自定义域都是一样的。
3.  在我的应用程序中执行必要的检查以找出域映射 <-> 用户帐户。

# mfc - VS2008 中的 ON_WM_CTLCOLOR_REFLECT() 和 ON_WM_CTLCOLOR() 有什么区别？

> ID：13874055
> 
> 赞同：1
> 
> 时间：2012-12-14T06:53:24.960
> 
> 标签：mfc, windows-ce

问题是这样的：我在VS2005中写了一个windows应用程序，构建成功。然后我把它转移到VS2008，当我编译程序时，会有错误信息显示：error C4867: 'CGroupBox::CtlColor': function call missing argument list; 使用 '&CGroupBox::CtlColor' 创建一个指向成员的指针，消息映射如下：

```
BEGIN_MESSAGE_MAP(CGroupBox, CButton)
//{{AFX_MSG_MAP(CGroupBox)
ON_WM_PAINT()
ON_WM_CTLCOLOR_REFLECT()
//ON_WM_CTLCOLOR()
ON_WM_ERASEBKGND()
//}}AFX_MSG_MAP 
```

END_MESSAGE_MAP()

功能如下：

```
HBRUSH CGroupBox::CtlColor(CDC* pDC, UINT nCtlColor) 
{
GetParent()->Invalidate();
return NULL;
} 
```

但是如果我更改为 ON_WM_CTLCOLOR() ，我可以成功构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:01:57.620

错误消息是因为消息处理程序的签名与您使用的签名不匹配。在 MSDN 上查找 ON_WM_CTLCOLOR_REFLECT() 和 ON_WM_CTLCOLOR() 的签名以获得正确的签名。

至于您标题中的问题，某些控件通常会将其通知消息发送给其父级。这很不方便，因为每次您重新使用该控件时，都需要更改其父窗口。因此，MFC 具有“反射”支持，这基本上是一种说法，即“当您收到来自子控件的通知时，首先尝试将其弹回该控件以查看该控件是否知道如何处理它自己。”

阅读[https://web.archive.org/web/20101229015404/http://msdn.microsoft.com/en-us/library/eeah46xd(v=vs.80).aspx](https://web.archive.org/web/20101229015404/http://msdn.microsoft.com/en-us/library/eeah46xd(v=vs.80).aspx)上的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T13:10:41.907

我刚刚遇到了同样的问题，正如您从 Roel 提供的链接中看到的那样，原始海报确实具有正确的签名。

原来这是 MFC 本身的一个错误。在 afxmsg_.h 中找到 ON_WM_CTLCOLOR_REFLECT，您会注意到 CtlColor 前面缺少“&”。我猜旧的编译器并不介意。添加“&”使其成为“&CtlColor”并修复错误。

或者，如果您不喜欢更改官方标题，您可以在自己的代码中 #under ON_WM_CTLCOLOR_REFLECT 并再次正确定义它。

我注意到该文件中的许多其他（也许是全部？）反映的消息也有同样的问题。

# c# - 在 iTextSharp 中将 html 链接转换为 pdf

> ID：13874056
> 
> 赞同：1
> 
> 时间：2012-12-14T06:53:28.950
> 
> 标签：c#, itextsharp

我有 html 文件。我想用锚标签转换成 PDf。

当我转换为 PDF 时，发生了以下错误。

**“无法将'iTextSharp.text.html.simpleparser.CellWrapper'类型的对象转换为'iTextSharp.text.Paragraph'。”**

任何人都知道如何将带有超链接的html源转换为PDF？在页面中，我有内部链接，例如 href="#table1"。

谢谢。

# c# - DateTime.ToLongTimeString() 生成不同的字符串

> ID：13874057
> 
> 赞同：0
> 
> 时间：2012-12-14T06:53:32.880
> 
> 标签：c#, .net-4.5

我`DateTime.UtcNow.ToLongTimeString()`用来获取当前时间字符串。

但是它的行为很奇怪，有时它会像返回时间一样`3:10:00`，有时又像`03:10:00`（前导零）。为什么会发生这种情况？

我在应用程序启动时设定了一种文化

```
Thread.CurrentThread.CurrentCulture = new CultureInfo(...);
Thread.CurrentThread.CurrentUICulture = new CultureInfo(...); 
```

时间字符串的不同结果来自一个任务（从我现在可以看到的）。所以我创建了一个任务并`.Wait()`让它完成。在任务内部，时间以不同的方式转换为字符串。

**更新**

对于那些感兴趣的人，这是我发现的一些有用的阅读材料：

[有没有办法为整个应用程序设置文化？所有当前线程和新线程？](https://stackoverflow.com/questions/468791/setting-currentculture-and-currentuiculture-of-an-application)
[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:55:52.867

> 但是它的行为很奇怪，有时它会返回像 3:10:00 这样的时间，有时像 03:10:00（前导零）。

你没有说这发生*在哪里*——但如果你使用不同的文化，它肯定会发生。通常，如果没有前导零，我也希望看到一个 am/pm 指示符。

如果您想要一致的结果，请始终指定相同的文化（例如`CultureInfo.InvariantCulture`）。

当然，如果这一切都在同一个系统上而不改变文化设置，那就是另一回事了。

# android - android中的数据库连接

> ID：13874060
> 
> 赞同：0
> 
> 时间：2012-12-14T06:53:43.880
> 
> 标签：android, database, sqlite

我是 android 的新手，我上次在我的 android 应用程序中连接数据库，现在我在另一个项目中暗示它，但我收到了这些错误

```
 12-14 23:58:07.459: E/SQLiteLog(2171): (1) no such table: Quiz
    12-14 23:58:07.459: D/AndroidRuntime(2171): Shutting down VM
    12-14 23:58:07.459: W/dalvikvm(2171): threadid=1: thread exiting with                    uncaught               exception (group=0x40a13300)
    12-14 23:58:07.509: E/AndroidRuntime(2171): FATAL EXCEPTION: main
    12-14 23:58:07.509: E/AndroidRuntime(2171): java.lang.RuntimeException: Unable to         start activity   ComponentInfo{com.example.whowantto/com.example.whowantto.play}:       android.database.sqlite.SQLiteException: no such table: Quiz (code 1): , while compiling:   SELECT Question, OptionA, OptionB, OptionC, OptionD, CorrectAnswer FROM Quiz WHERE flag=0
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at android.os.Handler.dispatchMessage(Handler.java:99)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at android.os.Looper.loop(Looper.java:137)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at android.app.ActivityThread.main(ActivityThread.java:4745)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at java.lang.reflect.Method.invokeNative(Native Method)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at java.lang.reflect.Method.invoke(Method.java:511)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at dalvik.system.NativeStart.main(Native Method)
    12-14 23:58:07.509: E/AndroidRuntime(2171): Caused by: android.database.sqlite.SQLiteException: no such table: Quiz (code 1): , while compiling: SELECT Question, OptionA, OptionB, OptionC, OptionD, CorrectAnswer FROM Quiz WHERE flag=0
    12-14 23:58:07.509: E/AndroidRuntime(2171):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
  12-14 23:58:07.509: E/AndroidRuntime(2171):   at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1238)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at com.example.whowantto.play.GetQuestion(play.java:479)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at com.example.whowantto.play.onCreate(play.java:142)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.app.Activity.performCreate(Activity.java:5008)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
   12-14 23:58:07.509: E/AndroidRuntime(2171):  ... 11 more
   12-14 23:58:15.591: E/Trace(2195): error opening trace file: No such file or directory (2) 
```

我已经检查了测验表，它存在于我的数据库中。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:07:54.403

问题是您使用模式创建了数据库，然后使用不同的模式查询它。要解决此问题，您可以

1）删除数据库，然后使用正确的模式再次创建它。

2）或者您可以更改数据库的版本号，

3）或者您可以将查询更改为`SELECT * FROM Quiz WHERE flag = 0`将选择所有列（我不确定 Quiz 表是否存在，这可能是一个问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:08:24.780

更改您的数据库名称并运行它。有时您在数据库中插入额外的列意味着它会出现问题或检查您使用的查询。

光标 cur = DB.rawQuery("SELECT * FROM " + table_name, null);

希望这有用

# php - PHP AJAX Jquery - 文件下载问题

> ID：13874063
> 
> 赞同：1
> 
> 时间：2012-12-14T06:54:03.897
> 
> 标签：php, jquery, ajax, file, download

> **可能重复：**
> [通过 JQuery AJAX Post 下载不起作用](https://stackoverflow.com/questions/8357887/downloading-via-jquery-ajax-post-not-working)

filedownload.php 有以下片段。

```
$file = 'cut.png';
header("Content-Type: image/png");
header('Content-Disposition: attachment; filename="'.$file.'"');
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
readfile($file);
exit(); 
```

AJAX 调用

```
jQuery.post('filedownload.php',{            
  'file'  :  result  // not used for the time being                    
 }); 
```

`filedownload.php`我对该文件进行了ajax调用。它不允许用户下载文件。但如果我直接运行 php，它允许用户下载文件。可能是什么问题 ？

我想使用核心功能而不是使用 jQuery 插件。如果不可能，插件会很好。

鉴于我使用 ajax 因为页面无法刷新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:08:51.330

> 问题
> 
> 让我们以具有打开、保存、导入和导出功能的电子表格编辑器等生产力 Web 应用程序为例。打开和保存选项将涉及从数据库加载电子表格，而导入和导出处理用户机器上的本地文件。要实现导出行为，您可能会决定用户应该首先保存他们的电子表格，以便您将数据从后端导出到文件。但是让我们假设您希望允许用户在不保存数据的情况下导出他们的数据，也许是为了让他们可以选择在本地工作而无需在服务器上存储数据。为此，您需要将当前电子表格数据发送到后端并接收要下载的文件。不幸的是，这不能使用 Ajax 来处理，因为 Ajax 只能接收文本形式的响应。在要保存的数据相当长的情况下，这会带来相当大的问题。
> 
> 解决方法
> 
> 为了发出请求，您需要使用 GET 或 POST 发出常规（不是 Ajax）HTTP 请求。如果数据相当短，您可能会使用 GET 请求（可能只需将 Window.location 设置为导出 url），但由于浏览器对 GET 请求长度的限制不同，很可能需要 POST。以下插件允许您发出一个请求，该请求以与 jQuery 的本机 Ajax 函数类似的语法返回一个文件。

解决问题的jQuery代码

```
jQuery.download = function(url, data, method){
    //url and data options required
    if( url && data ){ 
        //data can be string of parameters or array/object
        data = typeof data == 'string' ? data : jQuery.param(data);
        //split params into form inputs
        var inputs = '';
        jQuery.each(data.split('&'), function(){ 
            var pair = this.split('=');
            inputs+='<input type="hidden" name="'+ pair[0] +'" value="'+ pair[1] +'" />'; 
        });
        //send request
        jQuery('<form action="'+ url +'" method="'+ (method||'post') +'">'+inputs+'</form>')
        .appendTo('body').submit().remove();
    };
}; 
```

如何打电话

```
$.download('filedownload.php','filename='+filename ); 
```

[***阅读更多***](http://www.filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/)

# java - 计算Excel表格一列中的行数（提供Java代码）

> ID：13874074
> 
> 赞同：3
> 
> 时间：2012-12-14T06:54:42.167
> 
> 标签：java, apache-poi

参考我之前的问题[如何使用 Java 计算 Excel 文档列中的行数，](https://stackoverflow.com/questions/13858846/how-to-calculate-number-of-rows-in-a-column-of-excel-document-using-java/13859097#comment19083376_13859097)我能够计算给定工作表中的总列数。现在一半的工作还没有完成**，因为我想计算特定列中的行数**。可能的解决方案可能是使用二维数组并存储列索引和总行数或使用地图等。我怎样才能做到这一点？这里提供了 Java 代码。我的演示文件得到了正确的计数（列数）。请根据需要修改/建议更改。

（编辑）：我使用 hasp map 来计算存储列索引作为键和行计数作为值，但它不起作用，可能是应用的逻辑错误。好吧，如果我想通过使用*Hash Map*来实现这一点，**我如何将特定列中的行数（迭代时）存储**为一个*值*

Java 代码：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.HashMap;
import java.util.Iterator;

import org.apache.poi.ss.formula.functions.Column;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class ExcelRead {
    static int colrange=1000;
    public static void main(String[] args) {
        HashMap hm=new HashMap();
        int count=0;
    try {
        FileInputStream file = new FileInputStream(new File("C:/Users/vinayakp/Desktop/Demo2.xlsx"));
        XSSFWorkbook workbook = new XSSFWorkbook(file);
        XSSFSheet sheet = workbook.getSheetAt(0);
        Iterator<Row> rowIterator = sheet.iterator();
        while(rowIterator.hasNext()) {
            Row row = rowIterator.next();
            Iterator<Cell> cellIterator = row.cellIterator();
            while(cellIterator.hasNext()) {
                Cell cell = cellIterator.next();
                switch(cell.getCellType()) {
                    case Cell.CELL_TYPE_BOOLEAN:
                        System.out.print(cell.getBooleanCellValue() + "\t\t");
                        break;
                    case Cell.CELL_TYPE_NUMERIC:
                        System.out.print(cell.getNumericCellValue() + "\t\t");
                        break;
                    case Cell.CELL_TYPE_STRING:
                        System.out.print(cell.getStringCellValue() + "\t\t");
                        break;
                }
            }
            System.out.println("");
        }

        for(Row r:sheet)
        {
            short minColIx=r.getFirstCellNum();
            short maxColIx=r.getLastCellNum();
            for(short colIx=minColIx;colIx<maxColIx;colIx++) {
                Cell c= r.getCell(colIx);
                if(c!=null) {
                    if(c.getCellType()== Cell.CELL_TYPE_STRING||c.getCellType() == Cell.CELL_TYPE_NUMERIC||c.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
                        count++; ---// can i use hashcode in here to get the key and value pair? key=column index value=total number of rows in that column
                            } 
                    }
                    else break;
                }
            }

        System.out.println("\nTotal Number of columns are:\t"+count);
        System.out.println(hm);
        file.close();    
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException ae) {
        ae.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T08:34:09.410

试试这个：

```
private void excelReader() {
    String data;
    try {
        InputStream is = new FileInputStream("Read.xlsx");
        Workbook wb = WorkbookFactory.create(is);
        Sheet sheet = wb.getSheetAt(0);
        Iterator rowIter = sheet.rowIterator();
        Row r = (Row)rowIter.next();
        short lastCellNum = r.getLastCellNum();
        int[] dataCount = new int[lastCellNum];
        int col = 0;
        rowIter = sheet.rowIterator();
        while(rowIter.hasNext()) {
            Iterator cellIter = ((Row)rowIter.next()).cellIterator();
            while(cellIter.hasNext()) {
                Cell cell = (Cell)cellIter.next();
                col = cell.getColumnIndex();
                dataCount[col] += 1;
                DataFormatter df = new DataFormatter();
                data = df.formatCellValue(cell);
                System.out.println("Data: " + data);
            }
        }
        is.close();
        for(int x = 0; x < dataCount.length; x++) {
            System.out.println("col " + x + ": " + dataCount[x]);
        }
    }
    catch(Exception e) {
        e.printStackTrace();
        return;
    }
} 
```

## 测试代码

我使用以下单元格数据创建了一个 xlsx 文件：

```
Col0    Col1    Col2    Col3    Col4
1       a       x       a       q
2       b       y       s       w
3       c       z       d       e
4       d               f       r
5       e                       t
                                y 
```

dataCount 数组的内容是这样的：

第 0 栏：6

第 1 栏：6

第 2 栏：4

第 3 栏：5

第 4 栏：7

右侧的数字计算每列包含数据的单元格数量，包括标题行。

如果要排除标题行，只需删除以下行：

rowIter = sheet.rowIterator();

就在while循环之前。

这是你想要的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:07:17.887

这会解决吗？

```
HSSFSheet mySheet = myWorkBook.getSheetAt(0);
                Iterator<Row> rowIter = mySheet.rowIterator();
                while (rowIter.hasNext()) {
                    HSSFRow myRow = (HSSFRow) rowIter.next();
                    Iterator<Cell> cellIter = myRow.cellIterator();
                    List<HSSFCell> cellStore = new ArrayList<HSSFCell>();
                    while (cellIter.hasNext()) {
                        HSSFCell myCell = (HSSFCell) cellIter.next();
                        rowCount++ //For myRow
                    }

                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T07:51:32.657

> 它给出了 excel 表中的数据总数，我的意思是还包括标题列名称。

据我了解，您想计算一列的行数，标题行除外。

如果是这种情况，您可以使用 Binu 提供的解决方案。只需修改它以跳过列名所在的行。

# jquery - jQuery UI 门户组件

> ID：13874081
> 
> 赞同：9
> 
> 时间：2012-12-14T06:55:08.400
> 
> 标签：jquery, html, css, jquery-ui

我正在尝试制作可拖动、可调整大小、可折叠、可关闭的面板，并且可以最大化和最小化，如下所示。

如果调整大小会溢出内容，我还想要滚动portlet 内容。当我设置`overflow:auto`滚动时，即使内容没有溢出。

```
.portlet {
    position: absolute;
    overflow:auto !important;
} 
```

您可以在此处查看我的代码和演示[面板代码](http://jsfiddle.net/jJJW7/70/)
任何帮助将不胜感激。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:22:31.430

我四处寻找，发现了这个教程[——用 jQuery UI 创建一个类似 Windows 的界面](http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-windows-like-interface-with-jquery-ui/)

这是[jsFiddle](http://jsfiddle.net/apaul34208/UXmRA/)和代码-

```
 var _init = $.ui.dialog.prototype._init;
    $.ui.dialog.prototype._init = function() {
        _init.apply(this, arguments);

        var dialog_element = this;
        var dialog_id = this.uiDialogTitlebar.next().attr('id');

        this.uiDialogTitlebar.append('<a href="#" id="' + dialog_id + 
        '-minbutton" class="ui-dialog-titlebar-minimize ui-corner-all">'+
        '<span class="ui-icon ui-icon-minusthick"></span></a>');

        $('#dialog_window_minimized_container').append(
            '<div class="dialog_window_minimized ui-widget ui-state-default ui-corner-all" id="' + 
            dialog_id + '_minimized">' + this.uiDialogTitlebar.find('.ui-dialog-title').text() + 
            '<span class="ui-icon ui-icon-newwin"></div>');

        $('#' + dialog_id + '-minbutton').hover(function() {
            $(this).addClass('ui-state-hover');
        }, function() {
            $(this).removeClass('ui-state-hover');
        }).click(function() {
            dialog_element.close();
            $('#' + dialog_id + '_minimized').show();
        });

        $('#' + dialog_id + '_minimized').click(function() {
            $(this).hide();
            dialog_element.open();
        });
    };

        $(document).ready(function() {
            $('#create_button').button().click(function() {
                var create_dialog = $('#dialog_window_1');
                var create_button = $(this);
                if( create_dialog.dialog('isOpen') ) {
                    create_button.button('option', 'label', 'Create a new Window');
                    create_dialog.dialog('close');
                } else {
                    create_button.button('option', 'label', 'Close Window');
                    create_dialog.dialog('open');
                }
            });

            $('#dialog_window_1').dialog({
                width: 'auto',
                height: 'auto',
                autoOpen : false,
                buttons: [
                    {
                        text: 'Create',
                        click: function() {
                            var div_count = $('.dialog_window').length + 1;
                            var div_id = 'dialog_window_' + div_count;
                            var div_title = $('#new_window_title').val();
                            var div_content = $('#new_window_content').val();
                            var buttons = new Array();
                            if( $('#alertbutton').is(':checked') ) {
                                buttons.push({
                                    text: 'ALERT',
                                    click: function() {
                                        alert('ALERTING from Dialog Widnow: ' + div_title);
                                    }
                                });
                            }

                            if( $('#closebutton').is(':checked') ) {
                                buttons.push({
                                    text: 'CLOSE',
                                    click: function() {
                                        $('#' + div_id).dialog('close');
                                    }
                                });
                            }

                            $('body').append('<div class="dialog_window" id="' + div_id + '">' + div_content + '</div>');

                            var dialog = $('#' + div_id).dialog({
                                width: 'auto',
                                height: 'auto',
                                title : div_title,
                                autoOpen : true,
                                buttons: buttons
                            });
                        }
                    }
                ]
            });
            $('#buttonlist').buttonset();
        });` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:40:51.850

将您的 css 代码更改为以下内容。

```
.portlet {
    position: absolute;
}
.portlet-content {
    overflow:auto !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T10:21:42.523

导致 jsFiddle 中滚动条的原因是`ui-resizable-handle`元素。

添加这些 CSS 语句应该删除滚动条，直到需要它们并且似乎不会影响拖动手柄的功能

```
.ui-resizable-s { bottom: 0 !important }
.ui-resizable-e { right: 0 !important } 
```

这是一个更新的[jsFiddle](http://jsfiddle.net/jJJW7/95/)

作为旁白。尽管如果您删除 jsFiddle HTML 区域中的 jquery 样式表链接，它们的行为似乎会更好，但删除它会改变它们的起始位置。所以我把它留在了期望它在你的实际代码中正确地为你工作。

# architecture - 同时获取和解码两条指令的含义

> ID：13874089
> 
> 赞同：0
> 
> 时间：2012-12-14T06:55:50.857
> 
> 标签：architecture, parallel-processing, pipeline, computer-architecture, instructions

通常每个周期一次提取和解码一条指令。

我想知道如果我们同时获取和解码 2 条指令会有什么影响。架构中需要更改的更改是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:33:59.147

每个周期一次获取和解码一条指令的想法通常是不正确的。

让我们把一些简单的事情排除在外。您可以拥有多个核心，并且这些核心各自独立运行。这是英特尔等增加每周期指令数 (IPC) 的主要方式。您还拥有同时多线程（intel speak 中的超线程），其中您有两个独立的线程在同一个核心上运行。这是过去十年增加 IPC 的另一种常见方式（Sun 的 Niagara 芯片有很多线程。）

好的，现在是您可能真正想要的答案。在单个执行线程中，大多数现代处理器每个周期可以获取和解码多条指令（这通常称为超标量）。几乎所有现代高性能处理器都这样做。例外是非常低功耗的处理器和那些显式牺牲单线程性能以提高吞吐量的处理器（Niagara，它使用大量线程）

现在进行架构更改（有无数种选择）。最大的细分是您是否拥有固定长度指令 (ARM) 或可变长度指令 (x86)。

使用固定长度的指令，您知道指令边界是什么，因此构建一个可以相对容易地获取每个时钟 8 条指令并解码所有指令的系统。通常，您的 fetch 宽度大于您的执行宽度，因为您将有分支指令并且 fetch 可能是对齐的，而分支可以让您到达任何地方。在这些系统中，最大的挑战是让分支预测器（实际上它是下一个指令块预测器）运行良好。

使用可变长度指令，这简直就是一个痛苦的世界。如今，在 x86 世界中，他们将这些可变长度的“宏”指令转换为（大部分）固定宽度的“微”指令。然后，您可以将这些微指令存储在一个特殊的缓存中（通常称为跟踪缓存）。如果对于特定地址，您在跟踪缓存中得到了命中，那么您不必解码宏指令，您可以简单地处理微指令。（跟踪缓存可以做更多事情，也可以在固定宽度的机器上使用，因为您可以玩重新对齐块之类的技巧，甚至可以将包括所采用分支的顺序指令序列组合在一起，因此称为“跟踪”）。即使使用这种跟踪缓存方法，如果您想获得高性能，您仍然需要尝试在每个周期获取多个宏指令。通常系统可以做一些事情，它们基本上使用预测器来指示指令边界可能是什么。

大多数真正复杂的东西只能在乱序处理器上找到，因为尝试在有序机器中并行执行两条以上指令通常没有多大意义，因为危险和依赖关系经常发生让任何事情变得更实用。

# hive - 蜂巢作业控制信息

> ID：13874094
> 
> 赞同：1
> 
> 时间：2012-12-14T06:56:11.743
> 
> 标签：hive

我们有一些我们运行的配置单元查询。我们想要捕获诸如查询运行多长时间之类的信息？选择了多少条记录等。任何简单的方法来捕获配置单元表中的信息？

# c++ - 模糊度平方根

> ID：13874096
> 
> 赞同：1
> 
> 时间：2012-12-14T06:56:33.547
> 
> 标签：c++, sqrt

> **可能重复：**
> [C++ 编译器错误：对重载函数的模糊调用](https://stackoverflow.com/questions/6233132/c-compiler-error-ambiguous-call-to-overloaded-function)

刚刚将一些代码从 pdf 复制到 C++builder XE2 和 Visual Studio Express 2012 中。两个编译器都给出了关于歧义的错误代码。我刚开始，所以我真的不知道该怎么做。也许我的教科书（pdf）现在已经过时了？它被称为“14 天学会 C++”。无论如何，这里是复制的代码。

```
#include <iostream.h>
#include <conio.h>
#include <math.h>
#include <stdio.h>
#pragma hdrstop
void getSqrRoot(char* buff, int x);
int main(int argc, char** argv)
{
int x;
char buff[30];
cout << “Enter a number: “;
cin >> x;
getSqrRoot(buff, x);
cout << buff;
getch();
}
void getSqrRoot(char* buff, int x)
{
sprintf(buff, “The sqaure root is: %f”, sqrt(x));
} 
```

我在 c++builder 中得到的错误代码是：

[BCC32 错误] SquareRoot.cpp(19): E2015 Ambiguity between 'std::sqrt(float) at c:\program files (x86)\embarcadero\rad studio\9.0\include\windows\crtl\math.h:266 ' 和 'std::sqrt(long double) 在 c:\program files (x86)\embarcadero\rad studio\9.0\include\windows\crtl\math.h:302' 完整的解析器上下文 SquareRoot.cpp(18)：解析： void getSqrRoot(char *,int)

附带说明一下，我的 pdf 手册中的引号与我键入的普通“”字符不同。这些“也与编译器不兼容。也许有人也知道这个问题的解决方法吗？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:50:30.820

像这样更改您的代码：

```
void getSqrRoot(char* buff, int x)
{
 sprintf(buff, “The sqaure root is: %f”, sqrt((float)x));
} 
```

因为平方根是重载的函数编译器没有机会从 int x 值隐式转换为 float 或 double 值，您需要直接进行。

```
Compiler: see sqrt(int) -> what to choose? sqrt(float)/sqrt(double) ?
Compiler: see sqrt((float)int) -> sqrt(float), ok!
Compeler: see sqrt((double)int) -> sqrt(double), ok! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:02:25.220

将您的 getSqrRoot 函数更改为以下

```
void getSqrRoot(char* buff, float x)
{ 
```

同样修复第一行中的声明。

发生这种情况是因为`std::sqrt`您使用哪个函数来获取平方根，可以采用 a`float`或 a`double`但您给了它 an`int`这会导致混淆，因为编译器现在不知道要调用哪个函数。

# java - 构建二维数组以绘制不同颜色的圆圈

> ID：13874100
> 
> 赞同：0
> 
> 时间：2012-12-14T06:57:05.490
> 
> 标签：java

下面的代码将随机生成不同颜色的圆圈。我需要能够通过圆圈的大小来指定圆圈的颜色，以便循环在不同的位置产生相同的圆圈图案。这需要使用二维数组来完成。我知道这可能并不难，但我似乎无法掌握这个概念。这是方向和我的代码。

谢谢！

设置一个 2-D、int colors[][] 数组，该数组有 6 行，每个圆圈一个，3 列，每个元素（红色、绿色、蓝色）一个要使用的颜色。在上面的显示中，颜色值是在程序开始时在 0 到 255 范围内随机生成的。然后对于每个直径[i]，颜色[i][0]、颜色[i][1] 和颜色[i][2] 用于 RGB 级别。

```
import java.io.*;
import java.util.*;
import java.awt.*;

public class Lab10 {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Scanner console=new Scanner (System.in);

        Random r = new Random();

        int [] color= new int [3];
        color[0]=r.nextInt(256);
        color[1]=r.nextInt(256);
        color[2]=r.nextInt(256);

        System.out.println("Please enter 6 integer values. The values should be in descending order and in the range 100 to 1.");
        int[] diameters=new int[6];
        int colors[][] = new int [6][3];
        for(int i=0; i<6; i++){
            diameters[i]=console.nextInt();//values entered
        }

        for (int i=0; i<diameters.length;  i++) {
            for (int j = 0;  j < color.length;  j++) {
              colors[i][j]=colors[i][j];
            }

        }

        int panelX = 400, panelY = 400;
        DrawingPanel panel = new DrawingPanel(panelX, panelY);
        panel.setBackground(Color.WHITE);

        Graphics g = panel.getGraphics();

        for (int i=0; i<10; i++){
            int centerX=r.nextInt(350);
            int centerY=r.nextInt(350);
            for(int value:diameters){
                g.setColor(new Color(r.nextInt(256),r.nextInt(256), r.nextInt(256)));
                g.fillOval(centerX - value , centerY - value, 2 * value, 2 * value);
            }
        }
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:49:58.870

暗示

为你打破概念。

`int color[6][3]`是你的阵列。

要随机生成颜色值，请创建一个类对象`Random`

```
Random random = new Random(); 
```

在颜色行上循环

```
for(int i=0;i<6;i++)
{
for(int j=0;j<3;j++)
color[i][j]= random.nextInt(255);
} 
```

现在画出直径 [i] 的圆圈，

参考`color[i][0],color[i][1],color[i][2]`它的RGB值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-22T11:07:05.047

因此，如果我做对了，您想随机绘制圆圈，并且您希望颜色取决于直径。

这是我对该问题的解决方案：[pastebin](http://pastebin.com/tVMsMsTr "圆圈画家")

另外，我试图展示如何在使用和不使用 java 8 的情况下完成它，所以不要对此感到困惑。

这是它的样子：

![截图](../Images/947158dc2b7fb8ff98a6de59895ec6ad.png)

# dashboard - 具有资源定义的 Puppet 仪表板

> ID：13874101
> 
> 赞同：2
> 
> 时间：2012-12-14T06:57:08.540
> 
> 标签：dashboard, puppet, configuration-management

我有一个 puppet 环境，我需要将可变数量的非常相似的对象添加到单个服务器。对象仅因名称和路径等属性而异，所有这些都可以从单个名称参数中推断出来。

这似乎是 puppet 资源定义的完美用途，因为可以将多个定义添加到单个服务器，并且可以从定义名称声明中获取它们的特定属性。

此设置对我来说效果很好，并且在多台服务器上启动和运行它没有任何问题。但是，我现在需要将其交给几乎没有脚本编写经验的操作部门，因此他们不太习惯从文件系统进行管理。

他们要求一个仪表板，所以我为他们设置了 puppet 仪表板。然而，在我设置仪表板之后，我发现它只支持向服务器添加类，而不支持定义。这对于 PuppetLabs 的人来说似乎是短视的，所以我只能认为我以错误的方式处理这个问题，并且必须有一个使用类的解决方案，从而可以将多个几乎相同的实体添加到单个节点。

我意识到我可以为每个实体创建一个类，但是有成百上千的潜在变化，所以这并不实用。

我还考虑了一个包装类，它在每个节点的基础上声明每个定义，但这似乎比它的价值要管理更多的工作。

任何有关与仪表板兼容的替代方法的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T15:13:47.003

要使仪表板等 ENC 以这种方式工作，您必须以节点变量的形式传入节点数据。请注意，[Hiera](http://docs.puppetlabs.com/hiera/1/)通常比普通节点变量更可取。

通常，您要提交的值是您的资源标题数组

```
$resources = [ "name1", "name2", ... ] 
```

然后使用（至少）一个使用此数据实例化您定义的类型的类对您的节点进行分类，例如

```
class my_resources {
    my_defined_type { $resources: }
} 
```

# vb.net - VB.NET 2010 转换错误

> ID：13874112
> 
> 赞同：0
> 
> 时间：2012-12-14T06:58:37.897
> 
> 标签：vb.net, vb.net-2010

我正在尝试将我继承的 VB.NET 2005 转换为 2010。现在，我在构建过程中遇到的大多数错误是：Sub XXX 或 Property XXX“具有多个具有相同签名的定义”。它们都在同一个名为 AssetsReport.Designer.vb 的文件中。但是，它们并不都是精确的副本。他们会改变一点，他们在不同的班级。

我使用过 ASP.NET，但那是从头开始编写的。我对如何在这里进行有点不知所措。

有问题的文件太大，无法在此处发布，但如果您想查看， 可以[在此处下载。](http://www.raventech2099.com/temp/AssetsReport.Designer.vb.txt)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:37:26.697

线索在您发布的代码的标题中：

`This code was generated by a tool.`

您需要在 Visual Studio 中重新创建数据集

看看[这篇文章](http://www.c-sharpcorner.com/uploadfile/4d56e1/how-to-create-a-strongly-typed-dataset/)如何做到这一点

# ruby - 为什么 irb -r 使 __FILE__ 成为绝对路径？

> ID：13874115
> 
> 赞同：1
> 
> 时间：2012-12-14T06:58:45.103
> 
> 标签：ruby, irb

foo.rb 是一个单行`puts __FILE__`

```
irb -r ./foo.rb 
```

给了我到 foo.rb 的绝对路径。如果我运行，这不是行为`ruby foo.rb`。为什么它发生在irb？

irb 0.9.6（09/06/30），红宝石 1.9.3p327

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:03:43.843

在 IRB 中发生这种情况的原因与如果您编写了一个以`bar.rb`以下内容命名的程序会发生这种情况的原因相同。

```
require './foo' 
```

你会发现像你一样使用带有 require 的 IRB 与调用带有 require 的 IRB 没有什么不同`bar.rb`。

从文档中：

> `__FILE__`-- 当前正在执行的文件的名称，包括相对于启动应用程序的目录（或当前目录，如果已更改）的路径。

所以这包括相对于应用程序启动目录的路径。谁知道irb或bar在哪里？当不清楚时，也会给出路径。

# c++ - C：pthread的性能，低于单线程

> ID：13874117
> 
> 赞同：1
> 
> 时间：2012-12-14T06:58:49.500
> 
> 标签：c++, vector, pthreads

我对我的代码的性能感到困惑，在处理单线程时它只使用 13 秒，但它会消耗 80 秒。我不知道向量是否一次只能由一个线程访问，如果是这样，我可能必须使用结构数组而不是向量来存储数据，有人可以帮忙吗？

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <vector>
#include <iterator>
#include <string>
#include <ctime>
#include <bangdb/database.h>
#include "SEQ.h"

#define NUM_THREADS 16

using namespace std;

typedef struct _thread_data_t {
    std::vector<FDT> *Query;
    unsigned long start;
    unsigned long end;
    connection* conn;
    int thread;
} thread_data_t;

void *thr_func(void *arg) {

    thread_data_t *data = (thread_data_t *)arg;
    std::vector<FDT> *Query = data->Query;
    unsigned long start = data->start;
    unsigned long end = data->end;
    connection* conn = data->conn;

    printf("thread %d started %lu -> %lu\n", data->thread, start, end);

    for (unsigned long i=start;i<=end ;i++ )
    {
        FDT *fout = conn->get(&((*Query).at(i)));
        if (fout == NULL)
        {
            //printf("%s\tNULL\n", s);

        }
        else
        {
            printf("Thread:%d\t%s\n", data->thread, fout->data);
        }
    }

    pthread_exit(NULL);
}

int main(int argc, char *argv[])
{

    if (argc<2)
    {
        printf("USAGE: ./seq <.txt>\n");
        printf("/home/rd/SCRIPTs/12X18610_L5_I052.R1.clean.code.seq\n");

        exit(-1);
    }
    printf("%s\n", argv[1]);

    vector<FDT> Query;

    FILE* fpin;
    if((fpin=fopen(argv[1],"r"))==NULL)  {
        printf("Can't open Input file %s\n", argv[1]);
        return -1; 
    }

    char *key = (char *)malloc(36);

    while (fscanf(fpin, "%s", key) != EOF)
    {
        SEQ * sequence = new SEQ(key);

        FDT *fk = new FDT( (void*)sequence, sizeof(*sequence) );

        Query.push_back(*fk);
    }

    unsigned long Querysize = (unsigned long)(Query.size());
    std::cout << "myvector stores " << Querysize << " numbers.\n";

    //create database, table and connection
    database* db = new database((char*)"berrydb");

    //get a table, a new one or existing one, walog tells if log is on or off
    table* tbl = db->gettable((char*)"hg19", JUSTOPEN);

    if(tbl == NULL)
    {
        printf("ERROR:table NULL error");
        exit(-1);
    }

    //get a new connection
    connection* conn = tbl->getconnection();
    if(conn == NULL)
    {
        printf("ERROR:connection NULL error");
        exit(-1);
    }

    cerr<<"begin querying...\n";

    time_t begin, end;
    double duration;
    begin = clock();

    unsigned long ThreadDealSize = Querysize/NUM_THREADS;
    cerr<<"Querysize:"<<ThreadDealSize<<endl;

    pthread_t thr[NUM_THREADS];
    int rc;

    thread_data_t thr_data[NUM_THREADS];

    for (int i=0;i<NUM_THREADS ;i++ )
    {
        unsigned long ThreadDealStart = ThreadDealSize*i;
        unsigned long ThreadDealEnd   = ThreadDealSize*(i+1) - 1;

        if (i == (NUM_THREADS-1) )
        {
            ThreadDealEnd = Querysize-1;
        }

        thr_data[i].conn = conn;
        thr_data[i].Query = &Query;
        thr_data[i].start = ThreadDealStart;
        thr_data[i].end = ThreadDealEnd;
        thr_data[i].thread = i;
    }

    for (int i=0;i<NUM_THREADS ;i++ )
    {
        if (rc = pthread_create(&thr[i], NULL, thr_func, &thr_data[i]))
        {
          fprintf(stderr, "error: pthread_create, rc: %d\n", rc);
          return EXIT_FAILURE;
        }
    }

    for (int i = 0; i < NUM_THREADS; ++i) {
        pthread_join(thr[i], NULL);
    }

    cerr<<"done\n"<<endl;
    end = clock();
    duration = double(end - begin) / CLOCKS_PER_SEC;
    cerr << "runtime:   " << duration << "\n" << endl;

    db->closedatabase(OPTIMISTIC);
    delete db;
    printf("Done\n");

  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:47:11.737

像标准库中的所有数据结构一样，方法`vector`是可重入的，但不是线程安全的。这意味着不同的实例可以被多个线程独立访问，但每个实例一次只能被一个线程访问，你必须确保它。但是由于每个线程都有单独的向量，所以这不是你的问题。

您的问题可能是`printf`. `printf`是线程安全的，这意味着您可以同时从任意数量的线程调用它，但代价是在内部被互斥。

程序线程部分的大部分工作都是在内部完成的`printf`。所以可能发生的情况是所有线程都已启动并迅速到达 ，`printf`除第一个之外的所有线程都将停止。当 printf 完成并释放互斥锁时，系统会考虑调度正在等待它的线程。它可能确实如此，因此会发生相当慢的上下文切换。并在每个 之后重复`printf`。

具体如何发生取决于正在使用的实际锁定原语，这取决于您的操作系统和标准库版本。系统每次应该只唤醒下一个睡眠者，但许多实现实际上唤醒了所有睡眠者。因此，除了`printf`s 主要以循环方式执行之外，每个都会导致一个上下文切换，还可能有相当多的额外虚假唤醒，其中线程刚刚发现锁被持有并重新进入睡眠状态。

因此，从中得到的教训是线程不会自动使事情变得更快。他们只在以下情况下提供帮助：

*   线程大部分时间都花在阻塞系统调用上。在诸如网络服务器之类的事物中，线程等待来自套接字的数据，而不是等待来自磁盘的响应数据，最后等待网络接受响应。在这种情况下，拥有许多线程会有所帮助，只要它们大多是独立的。
*   线程数与 CPU 线程数一样多。目前通常的数字是 4（四核或超线程双核）。更多的线程不能在物理上并行运行，因此它们不会提供任何收益并且会产生一些开销。因此16个线程是多余的。

当他们都操纵相同的对象时，他们从来没有帮助过，所以他们最终还是把大部分时间都花在了等待锁上。除了您锁定的任何您自己的对象之外，请记住输入和输出文件句柄也必须在内部锁定。

内存分配也需要在线程之间进行内部同步，但是现代分配器有单独的线程池来避免其中的大部分；如果默认分配器被证明对于许多线程来说太慢了，那么您可以使用一些专门的分配器。

# javascript - 如何从 iframe 窗口打开 Javascript 弹出窗口到父窗口

> ID：13874120
> 
> 赞同：0
> 
> 时间：2012-12-14T06:59:16.837
> 
> 标签：javascript, html, jsp

我正在**使用 javascript 在 jsp 中**工作。在这里，我在父窗口中使用了**iframe 。**当我单击 iframe 页面中的按钮时，弹出窗口将在 iframe 页面内打开。但我想在父窗口中显示弹出窗口？任何人帮助我。

iframe 在父窗口中看起来像：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:06:18.617

**利用：**

```
myFrame.contentWindow.open() 
```

# c# - 在 BackGroundWorker 中运行方法并显示 ProgressBar

> ID：13874122
> 
> 赞同：14
> 
> 时间：2012-12-14T06:59:27.847
> 
> 标签：c#, winforms, multithreading, progress-bar, backgroundworker

我想要的是当某些方法正在执行某些任务时 UI 保持自身处于活动状态，并且我想在进度条中显示工作的进度。

我有一个方法， a`BackGroundWorker`和 a `Progressbar`。我想在`BackGroundWorker`开始运行时调用该方法并显示进度。该方法包含一个循环。因此，它可以报告进度。

那么，可以做些什么呢？

```
private void Form1_Load(object sender, EventArgs e)
{
    // TODO: This line of code loads data into the 'dataSet1.TBLMARKET' table. You can move, or remove it, as needed.
    myBGWorker.WorkerReportsProgress = true;
}

private void myBGWorker_DoWork(object sender, DoWorkEventArgs e)
{
    parseFiles();
}

private void myBGWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    myProgressBar.Value = e.ProgressPercentage;
}

private void myBGWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    MessageBox.Show("Done");
}

private void parseButton_Click(object sender, EventArgs e)
{
    myBGWorker.RunWorkerAsync();
}

public void parseFiles()
{
  for()
  {
     //parsing
     myBGWorker.ReportProgress(...);
  }
} 
```

但它不起作用。`Progressbar`没有更新。`MessageBox`“完成”之后只显示了一个小的进展。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-14T07:37:00.260

而不是使用一种 ParseFiles 方法（应该依赖于 myBGWorker），而是使用解析一个文件的循环和方法。报告该循环中的进度百分比：

```
private void parseButton_Click(object sender, EventArgs e)
{
    parseButton.Enabled = false;
    myBGWorker.RunWorkerAsync();
}

private void myBGWorker_DoWork(object sender, DoWorkEventArgs e)
{
   for(int i = 0; i < filesCount; i++)
   {  
       ParseSingleFile(); // pass filename here
       int percentage = (i + 1) * 100 / filesCount;
       myBGWorker.ReportProgress(percentage);
   }
}

void myBGWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    myProgressBar.Value = e.ProgressPercentage;
}

void myBGWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    parseButton.Enabled = true;
    MessageBox.Show("Done");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:36:38.337

我很抱歉这个问题。实际上代码工作正常。它没有显示，`Progressbar`因为参数`myBGWorker.ReportProgress()`是分数而不是百分比。所以，它没有显示出来。带来不便敬请谅解。

版主可能会删除此线程。否则，它可以成为其他人的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T09:59:24.080

到。soham.m17 与发件人参数一起使用

```
private void myBGWorker_DoWork(object sender, DoWorkEventArgs e)
{
   var worker = sender as BackgroundWorker;
   for(int i = 0; i < filesCount; i++)
   {  
       ParseSingleFile(); // pass filename here
       int percentage = (i + 1) * 100 / filesCount;
       worker.ReportProgress(percentage);  // use not myBGWorker but worker from sender
   }
} 
```

# ios - iOS 崩溃追随者

> ID：13874126
> 
> 赞同：0
> 
> 时间：2012-12-14T07:00:36.090
> 
> 标签：ios, crash, callstack

是否可以在代码中完成一个函数（iOS Crash Follower），用于在应用程序崩溃时查找崩溃地址或获取调用堆栈中最后调用的函数？

有了这个功能，我们可以很方便的找到应用程序崩溃的地方，然后在控制台上显示崩溃信息，或者它可以收集崩溃信息，然后在移动网络工作时反馈给我们。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T01:59:50.810

[试试 BugHD](http://bughd.com "错误HD")，iOS OSX 和 Android 都支持，有非常详细的崩溃报告。

# php - JQuery/Ajax：错误处理

> ID：13874129
> 
> 赞同：1
> 
> 时间：2012-12-14T07:00:38.923
> 
> 标签：php, jquery, ajax

```
$.ajax({  
  type: 'POST',  
  url: 'doSomething.php',  
  data: $('#form').serialize(),
  dataType: "json",  
  success: function(data) {
    //Success Message
  },  
  error: function() {
   //Error Message          
  }  
}); 
```

我有一个表单输入到一个 PHP 页面，我在该页面上进行了错误检查。我的问题是我可以通过发送错误（数据数组）`error: function(data) {`还是仅针对 Ajax 未正确通过的实际错误？

如果是这种情况，我可以将错误数组发送到成功函数吗？

不知道该怎么做。

如果我可以将数据从我的 PHP 页面发送到错误函数，我什至不知道如何在 PHP 页面上发送数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:04:41.250

如果您这样做，您可以提出自己的错误：

```
$.ajax({  
  type: 'POST',  
  url: 'doSomething.php',  
  data: $('#form').serialize(),
  dataType: "json",  
  success: function(data) {
    //Success Message
  },  
  error: function(req, status, error) {
   alert(req.responseText);      
  }  
}); 
```

当您在应用程序中抛出异常时，它将被警告出来。例如，在 PHP 中你可以这样做：

```
throw new Exception("Something bad happened"); 
```

[您可以在此处](http://php.net/manual/en/language.exceptions.php)查看有关异常的更多信息

# sql - 将数据库从 SQL Server 2008 Express 传输到 SQL Server 2008

> ID：13874130
> 
> 赞同：0
> 
> 时间：2012-12-14T07:00:47.547
> 
> 标签：sql, sql-server-2008, sql-server-2008-express

任何人都知道一般做法将数据库从 SQL Server 2008 Express 转移到 SQL Server 2008（我不确定它是否是 r2），当我尝试`.mdf`从 Express 附加文件时，出现错误消息。

> *数据库无法打开，因为它是版本 661。此服务器支持版本 655 和更早版本。不支持降级路径。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:10:00.410

嗯，信息很明确：您尝试从 Express 附加的文件来自**较新版本**的 SQL Server

因此，您似乎确实拥有 SQL Server **2008 R2** Express，并且您**无法**将其附加到 SQL Server **2008**实例。没有办法，没有破解，没有解决方法，没有技巧，或者没有第三方工具来实现这一点 - 它只是无法完成 - 时期。

因此，您也需要将主实例升级到 SQL Server **2008 R2** - 或者您需要找到另一种方法（例如将结构和/或数据编写到`.SQL`文件中）将更改从一个实例移动到另一个实例 - 或使用第三方工具，如[Red-Gate SQL Compare](https://www.red-gate.com/products/sql-development/sql-compare/)，用于同步两个实例之间的更改。

# jquery - 使用 jquery 和 ajax 通过 js.erb 传递参数变量的 rails

> ID：13874132
> 
> 赞同：1
> 
> 时间：2012-12-14T07:00:48.800
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

试图获取一个通过 params[:hashtag] 传递到 create.js.erb 文件中的 AJAX 事件的变量。它似乎没有通过，因为它显示为空白。它也不会引发错误。

```
`$(".swag_text_field").val(<%= escape_javascript(@hashtag_scrubbed) %>)` 
```

**创建.js.erb**

```
$(".votes-in").html("<%= escape_javascript(render(:partial => 'shared/vote_tweets', :object => @random_hashtags)) %>")
$(".tag-history").html("<%= escape_javascript(render(:partial => 'shared/tag_history', :object => @vote_history)) %>")
$(".leaderboard-tag-history").html("<%= escape_javascript(render(:partial => 'shared/leaderboard', :object => @leaderboard)) %>")
$(".swag_text_field").val(<%= params[:hashtag] %>)
$(".footer-stats").html("<%= escape_javascript(render(:partial => 'shared/stats')) %>") 
```

**hashtag_controler.rb**

```
class HashtagsController < ApplicationController

    def cast_vote                                           #Voting in the middle of the page
    Hashtag.cast_vote(params[:cast_vote])                   #Tells which hashtag to vote for
    @vote_history = Hashlog.vote_history                    #updates the vote history on the bottom of the page
    @leaderboard = Hashtag.leaderboard_history_current      #updates the leaderboard on the right
        @cast_vote_hashtag = Hashtag.cast_vote_hashtag(params[:hashtag])
        respond_to do |format|
        format.html { redirect_to root_path }
        format.js
        end
    end 

    def home    
        @vote_history = Hashlog.vote_history
        @leaderboard = Hashtag.leaderboard_history
        # @trends_pull = Trend.trends_pull
        @trends_display = Trend.trends_display
    end

    def create 
        @stats_total = Hashtag.count 
        @stats_wins = Hashtag.sum(:wins)
        @stats_views = Hashtag.sum(:view_count)
        @stats_losers = (@stats_views - @stats_wins) 
        @vote_history = Hashlog.vote_history
        if signed_in?
            Hashtag.create_hashtag_signed_in(params[:hashtag])
        else
            Hashtag.create_hashtag_guest(params[:hashtag])
        end
        Hashlog.create_hashlog(params[:hashtag])
        @random_hashtag_pull = Hashtag.random_hashtags_pull
        @leaderboard = Hashtag.leaderboard_history_current
        respond_to do |format|
            format.html { redirect_to root_path }
            format.js
        end
    end
end 
```

**搜索.html.erb**

```
<%= form_tag hashtags_path, class: "search-form", remote: true do %>
            <div class="input-prepend input-append">
            <span class="add-on swag">#</span>

            <%= text_field_tag :hashtag, nil, onkeypress: "return isNumberKey(event)", class: "span4 swag_text_field", id:"appendedPrependedInput" %>

            <%= submit_tag "VS!", class: "btn add-on-right swag_button" %>
            <% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:16:07.703

替换`$(".swag_text_field").val(<%= params[:hashtag] %>)` 为

```
$(".swag_text_field").val("<%= params[:hashtag] %>"); 
```

# shell - AWK 脚本中的嵌套 getline

> ID：13874136
> 
> 赞同：0
> 
> 时间：2012-12-14T07:01:08.013
> 
> 标签：shell, unix, awk

请让我知道我们是否可以在 AWK 脚本中使用嵌套的 getline，例如：

```
while ( ("tail -f log" |& getline var0) > 0) {

    while ( ("ls" | getline ) > 0) {
    }
    close("ls")
    while ( ("date" | getline ) > 0) {
    }
    close("date")
}
    close("tail -f log") 
```

我们可以使用嵌套的 getline 功能的深度是多少？在嵌套的 getline 的任何级别都会有任何输出数据丢失吗？在实现这种风格时，我们应该确保哪些事情？

==================================================== =================================

更新===================更新==============更新============= =更新=======

**要求：**通过探测 QA box 和 webserver/services 日志和系统状态提供实时统计数据和错误。报告将按以下格式生成：

本地日期和时间 | 类别| 组件 | 健康）状况

**假设 -：** AWK 脚本将比 shell 脚本执行得更快，并具有使用其内置解析和其他功能的额外优势。

**实现：** - 主命令循环是 command0="tail -f -n 0 -s 5 ........."。此命令将启动一个无限循环，以提取 QA 框的服务/网络服务器的附加日志。. 请注意 -f、-s 和 -n 选项，它们可以将所有附加数据转储到日志中，在每次迭代后休眠 5 秒，然后在不从现有日志中打印任何默认内容的情况下开始。

每次迭代后，捕获并验证系统时间并在 10 秒间隔后执行各种操作系统资源命令（每次迭代之间睡眠 5 秒，处理尾部输出后 4 秒 - 假设处理所有尾部命令大约需要 1 秒，因此总共 10 秒）

我用于提取操作系统资源的各种命令是：

```
I.  command1="vmstat | nl | tr -s '\\t '"
II. command2="sar -W 0"
III.    command3="top -b -n 1 | nl | tr -s '\\t '"
IV. command4="ls -1 /tmp | grep EXIT" 
```

在脚本中搜索相应的命令（？）并通过脚本中的while循环来计算相应命令的输出处理。注意我使用'nl'命令来简化开发/编码

最终在盒子上存在 /tmp/EXIT 文件将使脚本在从盒子中删除后退出

下面是我的脚本 - 为了自我解释，我尽可能多地添加了评论：

```
#Useage - awk -f script.awk
BEGIN {
    command0="tail -f -n 0 -s 5 /x/web/webserver/*/logs/error_log /x/web/webserver/service/*/logs/log"
    command1="vmstat | nl | tr -s '\\t '"
    command2="sar -W 0"
    command3="top -b -n 1 | nl | tr -s '\\t '"
    command4="ls -1 /tmp | grep EXIT"
    format = "%a %b %e %H:%M:%S %Z %Y"
    split("", details)
    split("", fields)
    split("", data)
    split("", values)
    start_time=0

    printf "\n>%s:\n\n", command0 #dummy print for debuggng command being executed

    while ( (command0 |& getline var0) > 0) { #get the command output
        if (start_time == 0) #if block to reset the start_time variable
        {
                start_time = systime() + 4
        }
        if (var0 ~ /==>.*<==/) { #if block to extract the file name from the tail output - outputted in '==>FileName<==' format
                gsub(/[=><]/, "", var0)
                len = split(var0, name, "/")
                if(len == 7) {file = name[5]} else {file = name[6]}
        }
        if (len == 7 && var0 ~ /[Ee]rror|[Ee]xception|ORA|[Ff]atal/) {  #extract the logs error statements
                print strftime(format,systime()) " | Error Log | " file " | Error :" var0
        }
        if(systime() >= start_time) #check if curernt system time is greater than start_time as computed above
        {
                start_time = 0 #reset the start_time variable and now execute the system resource command
                printf "\n>%s:\n\n", command1
                while ( (command1 |& getline) > 0) { #process output of first command
                if($1 <= 1)
                        continue #not needed for processing skip this one
                if($1 == 2) #capture the fieds name and skip to next line
                {
                        for (i = 1; i <= NF; i++){fields[$i] = i;}
                        continue
                }
                if ($1 == 3) #store the command data output in data array
                        split($0, data);
                print strftime(format,systime()) " | System Resource | System | Time spent running non-kernel code :" data[fields["us"]]
                print strftime(format,systime()) " | System Resource | System | Time spent running kernel code :" data[fields["sy"]]
                print strftime(format,systime()) " | System Resource | System | Amount of memory swapped in from disk :" data[fields["si"]]
                print strftime(format,systime()) " | System Resource | System | Amount of memory swapped to disk :" data[fields["so"]]
                }
                close(command1)

                printf "\n>%s:\n\n", command2 #start processing second command
                while ( (command2 |& getline) > 0) {
                        if ($4 ~ /[0-9]+[\.][0-9]+/) #check for 4th positional value if its format is of "int.intint" format
                        {
                                if( $4 > 0.0) #dummy check now to print if page swapping
                                        print strftime(format,systime()) " | System Resource | Disk | Page rate is > 0.0 reads/second: " $4
                        }
                }
                close(command2)

                printf "\n>%s:\n\n", command3 # start processing command number 3
                while ( (command3 |& getline ) > 0) {
                        if($1 == 1 && $0 ~ /load average:/) #get the load average from the output if this is the first line
                        {
                                split($0, arr, ",")
                                print strftime(format,systime())" | System Resource | System |" arr[4]
                        }
                        if($1 > 7 && $1 <= 12) # print first top 5 process that are consuming most of the CPUs time
                        {
                                f=split($0, arr, " ")
                                if(f == 13)
                                        print strftime(format,systime())" | System Resource | System | CPU% "arr[10]" Process No: "arr[1] - 7" Name: "arr[13]
                        }
                }
                close(command3)
                printf "\n>%s:\n\n", command4 #process command number 4 to check presence of file
                while ( (command4 |& getline var4) > 0) {
                        system("rm -rf /tmp/EXIT")
                        exit 0 #if file is there then remove the file and exit this script execution
                }
                close(command4)
        }
    }
        close(command0)
} 
```

**输出 -：**

```
>tail -f -n 0 -s 5 /x/web/webserver/*/logs/error_log /x/web/webserver/service/*/logs/log:

>vmstat | nl | tr -s '\t ':

Sun Dec 16 23:05:12 PST 2012 | System Resource | System | Time spent running non-kernel code :9
Sun Dec 16 23:05:12 PST 2012 | System Resource | System | Time spent running kernel code :9
Sun Dec 16 23:05:12 PST 2012 | System Resource | System | Amount of memory swapped in from disk :0
Sun Dec 16 23:05:12 PST 2012 | System Resource | System | Amount of memory swapped to disk :2

>sar -W 0:

Sun Dec 16 23:05:12 PST 2012 | System Resource | Disk | Page rate is > 0.0 reads/second: 3.89

>top -b -n 1 | nl | tr -s '\t ':

Sun Dec 16 23:05:13 PST 2012 | System Resource | System | load average: 3.63
Sun Dec 16 23:05:13 PST 2012 | System Resource | System | CPU% 12.0 Process No: 1 Name: occworker
Sun Dec 16 23:05:13 PST 2012 | System Resource | System | CPU% 10.3 Process No: 2 Name: occworker
Sun Dec 16 23:05:13 PST 2012 | System Resource | System | CPU% 6.9 Process No: 3 Name: caldaemon
Sun Dec 16 23:05:13 PST 2012 | System Resource | System | CPU% 6.9 Process No: 4 Name: occmux
Sun Dec 16 23:05:13 PST 2012 | System Resource | System | CPU% 6.9 Process No: 5 Name: top

>ls -1 /tmp | grep EXIT: 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:43:14.007

这是我记得的关于以这种方式使用 getline 的第二篇文章。我上次提到这是错误的方法，但看起来你不相信我，所以让我再试一次。

您的问题是“我如何使用 awk 来执行带有 getline 的命令来读取它们的输出？” 就像问“我如何使用钻头切割玻璃？”。您可能会得到一个答案，告诉您将要钻孔的玻璃部分贴上胶带以避免破裂，这会回答您的问题，但更有用的答案可能是 - 不要那样做，使用玻璃切割机.

使用 awk 作为调用命令的 shell 是 100% 错误的方法。只需为正确的工作使用正确的工具。如果需要解析文本文件，请使用 awk。如果您需要操作文件或进程或调用命令，请使用 shell（或您的操作系统等效项）。

最后，请阅读[http://awk.freeshell.org/AllAboutGetline](http://awk.freeshell.org/AllAboutGetline)，在完全理解所有注意事项之前，不要考虑使用 getline。

编辑：这是一个 shell 脚本来执行您发布的 awk 脚本所做的事情：

```
tail -f log |
while IFS= read -r var0; do
    ls
    date
done 
```

看起来更简单？并不是说这样做有意义，但是如果您确实想这样做，那就是实现它的方法，而不是在 awk 中。

编辑：这是如何在 shell 中编写 awk 脚本的第一部分（在本例中为 bash），我没有热情为您翻译其余部分，我认为这向您展示了如何自己完成其余部分：

```
format = "%a %b %e %H:%M:%S %Z %Y"
start_time=0

tail -f -n 0 -s 5 /x/web/webserver/*/logs/error_log /x/web/webserver/service/*/logs/log |
while IFS= read -r line; do

    systime=$(date +"%s")

    #block to reset the start_time variable
    if ((start_time == 0)); then
        start_time=(( systime + 4 ))
    fi

    #block to extract the file name from the tail output - outputted in '==>FileName<==' format
    case $var0 in
        "==>"*"<==" )
            path="${var0%% <==}"
            path="${path##==> }"
            name=( ${path//\// } )
            len="${#name[@]}"
            if ((len == 7)); then
                file=name[4]
            else
                file=name[5]
            fi
            ;;
    esac

    if ((len == 7)); then
        case $var0 in
            [Ee]rror|[Ee]xception|ORA|[Ff]atal )    #extract the logs error statements
                printf "%s | Error Log | %s | Error :%s\n" "$(date +"$format")" "$file" "$var0"
                ;;
        esac
    fi

    #check if curernt system time is greater than start_time as computed above
    if (( systime >= start_time )); then

        start_time=0 #reset the start_time variable and now execute the system resource command
        .... 
```

请注意，这将比您的 awk 脚本执行得稍快一些，但这绝对无关紧要，因为您的 tail 在迭代之间需要 5 秒的休息时间。

另请注意，我上面所做的只是将您的 awk 脚本转换为 shell，这并不一定意味着它是从头开始编写此工具的最佳方式。

# delphi - 将 Assembler x86 CPU ID 代码移植到 AMD64

> ID：13874152
> 
> 赞同：6
> 
> 时间：2012-12-14T07:03:24.917
> 
> 标签：delphi, assembly, x86-64, delphi-xe3, basm

我有个问题。我有以下用 ASM 编写的 x86 delphi 代码。我需要将它移植到 AMD64 吗？

```
type
 TCPUID = array[1..4] of Longint;

function GetCID : TCPUID; assembler; register;
asm
  push  ebx
  push  edi
  mov   edi, eax
  mov   eax, 1
  dw    $A20F
  stosd
  mov   eax, ebx
  stosd
  mov   eax, ecx
  stosd
  mov   eax, edx
  stosd
  pop   edi
  pop   ebx
end; 
```

我从来没有在汇编中编程过，有人知道端口是什么或者我将如何改变它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T10:18:10.777

我不是 Win64 汇编大师，但下一个翻译对我有用（在 64 位自由帕斯卡上测试）：

```
program project1;

{$mode delphi}
{$asmmode intel}

type
 TCPUID = array[1..4] of Longint;

function GetCID: TCPUID;
asm
  push  rbx
  push  rdi
  mov   rdi, rcx
  mov   eax, 1
  cpuid
  mov   [rdi],eax
  add   rdi,4
  mov   [rdi],ebx
  add   rdi,4
  mov   [rdi],ecx
  add   rdi,4
  mov   [rdi],edx
  pop   rdi
  pop   rbx
end;

var ID: TCPUID;

begin
  ID:= GetCID;
  Writeln(ID[1], '-', ID[2], '-', ID[3], '-', ID[4]);
  Readln;
end. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T14:41:14.983

这是我的 x86 和 x64 版本：

```
function GetCPUID: TCPUID;
asm
{$IF Defined(CPUX86)}
  push  ebx
  push  edi
  mov   edi, eax
  mov   eax, 1
  xor   ecx,ecx
  cpuid
  mov   [edi+$0], eax
  mov   [edi+$4], ebx
  mov   [edi+$8], ecx
  mov   [edi+$c], edx
  pop   edi
  pop   ebx
{$ELSEIF Defined(CPUX64)}
  mov   r8, rbx
  mov   r9, rcx
  mov   eax, 1
  cpuid
  mov   [r9+$0], eax
  mov   [r9+$4], ebx
  mov   [r9+$8], ecx
  mov   [r9+$c], edx
  mov   rbx, r8
{$IFEND}
end; 
```

x64 的优点之一是有更多可用的寄存器，其中许多是易失的。所以我们可以利用这个暂存空间，完全避免接触主存。很明显，我们必须触摸主内存才能返回结果。

由于[RBX 是非易失性](http://msdn.microsoft.com/en-us/library/9z1stfyw.aspx)的，我们保留了它的价值。我们修改的所有其他寄存器都是易失的，因此我们不需要保留它们。我想不出任何方法来进一步简化这一点。

这可以很容易地扩展以允许输入`CPUID`作为参数传递：

```
function GetCPUID(ID: Integer): TCPUID;
asm
{$IF Defined(CPUX86)}
  push  ebx
  push  edi
  mov   edi, edx
  xor   ecx,ecx
  cpuid
  mov   [edi+$0], eax
  mov   [edi+$4], ebx
  mov   [edi+$8], ecx
  mov   [edi+$c], edx
  pop   edi
  pop   ebx
{$ELSEIF Defined(CPUX64)}
  mov   r8, rbx
  mov   r9, rcx
  mov   eax, edx
  cpuid
  mov   [r9+$0], eax
  mov   [r9+$4], ebx
  mov   [r9+$8], ecx
  mov   [r9+$c], edx
  mov   rbx, r8
{$ELSE}
  {$Message Fatal 'GetCPUID has not been implemented for this architecture.'}
{$IFEND}
end; 
```

这假定在 ECX 中传递的子叶值为 0。同样，如果您想通过它，这很容易：

```
function GetCPUID(Leaf, Subleaf: Integer): TCPUID;
asm
{$IF Defined(CPUX86)}
  push  ebx
  push  edi
  mov   edi, ecx
  mov   ecx, edx
  cpuid
  mov   [edi+$0], eax
  mov   [edi+$4], ebx
  mov   [edi+$8], ecx
  mov   [edi+$c], edx
  pop   edi
  pop   ebx
{$ELSEIF Defined(CPUX64)}
  mov   r9,rcx
  mov   ecx,r8d
  mov   r8,rbx
  mov   eax,edx
  cpuid
  mov   [r9+$0], eax
  mov   [r9+$4], ebx
  mov   [r9+$8], ecx
  mov   [r9+$c], edx
  mov   rbx, r8
{$ELSE}
  {$Message Fatal 'GetCPUID has not been implemented for this architecture.'}
{$IFEND}
end; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T09:26:31.680

我从未使用过 CPUID，所以我不确定它的作用。但从常识和维基百科（如果这些来源足够的话）我的建议是：

尝试
1）删除“汇编器”；关键字 - 已过时
1.1) 可选择删除“注册；” - 默认情况下，对于无参数功能几乎没有价值。维基百科也告诉这在 Win64 中没有影响。

2) 如果可能 - 将其改写为`procedure GetCID (out data: TCPUID);`. 如果需要功能 - 我宁愿`inline`在 Pascal 中制作包装器 - 只是为了保持定义简单明了。这对作者来说是一个很好的建议——保持非自动化的东西简单化，把语法糖自动化留给 Pascal，特别是当你没有经验并且任何不简单的技巧都会让你感到困惑并导致你输入损坏的代码时。亲吻原则。

3) 删除 push ebx/pop ebx
3.1) 我认为 push edi/popedi 也将被删除。但是为了安全起见-我将它们更改为`push rdi`和`pop rdi`

这篇文章没有说明应该保存或保留一些寄存器： [http ://en.wikipedia.org/wiki/X86_calling_conventions#x86-64_calling_conventions](http://en.wikipedia.org/wiki/X86_calling_conventions#x86-64_calling_conventions) [http://docwiki.embarcadero.com/RADStudio/XE3](http://docwiki.embarcadero.com/RADStudio/XE3/en/Assembly_Procedures_and_Functions)
也没有说明这一要求[/en/Assembly_Procedures_and_Functions](http://docwiki.embarcadero.com/RADStudio/XE3/en/Assembly_Procedures_and_Functions)

4) `mov edi, eax`-> `mov rdi, rcx`
4.1) 您可以在其后添加`cld`命令 next，作为额外的安全措施。但它应该过于谨慎和多余。

其余部分应该与 x64 与 x86 模式具有相同的 CPUID 约定相同 - 在[http://en.wikipedia.org/wiki/CPUID#EAX.3D1:_Processor_Info_and_Feature_Bits没有提及 x64 模式](http://en.wikipedia.org/wiki/CPUID#EAX.3D1:_Processor_Info_and_Feature_Bits)

总结起来应该是这样的

```
type
 TCPUID = packed array[1..4] of INT32;

function GetCID : TCPUID; inline;
begin
  GetCID_Implementation(Result);
end;

procedure GetCID_Implementation (out buffer: TCPUID);
asm
  mov   rdi, rcx  // mov edi, eax
  // RCX/EAX is Delphi/Windows pointer to 1st parameter
  // RDI/EDI is CPU pointer to output buffer

//  cld  - optionally, should not be needed
//  state of cld should be preserved by all other functions

  xor   eax, eax  // shorter way for eax := 1
  inc   eax

  dw    $A20F     // call CPUID(eax==1),
// output (according to wikipedia) is in eax,edx,ecx,ebx  32-bit registers

  stosd           // *( (INT32*)RDI )++ := eax
  mov   eax, ebx  // xchg eax, ebx would be shorter,on that
  stosd
  mov   eax, ecx  // but Delphi XE2 is broken with xchg eax
  stosd
  mov   eax, edx
  stosd
end; 
```

# node.js - 有没有办法忽略 Handlebars 模板中的 Handlebars 模板？

> ID：13874161
> 
> 赞同：5
> 
> 时间：2012-12-14T07:03:58.293
> 
> 标签：node.js, handlebars.js

我在服务器端节点应用程序中使用 Express + Handlebars，并且我想将客户端模板作为我正在呈现的页面的一部分发送到浏览器。

索引.html

```
<html>
<head>
  <title>{{title}}</title>
</head>
<body>
  <div>
    {{stuff}}    
  </div>
  <script id="more-template" type="text/x-handlebars-template">
    <div>{{more}}</div>
  </script>
</body> 
```

不幸的是，handlebars 试图在#more-template 脚本块中渲染这些东西。（这只是删除了，`{{more}}`因为它在服务器模板的上下文中未定义。

**有没有办法让它忽略脚本标签内的东西？**（以便客户端模板可以使用它）

我已经看到了这个问题：[Node.js with Handlebars.js on server and client](https://stackoverflow.com/questions/10037936/node-js-with-handlebars-js-on-server-and-client)，我宁愿只使用 1 个模板引擎。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-16T14:35:02.680

通常，当您的模板被编译两次时（例如，当您只是服务器端时）并且您想在第一次运行时忽略模板标签，您可以简单地通过附加反斜杠来告诉车把忽略它们：

```
{{variable1}} \{{variable2}} 
```

使用`variable1`set to编译`value1`并且`variable2`未定义时，您会得到：

```
value1 {{variable2}} 
```

（而不是将第二个标签替换为空字符串）。

使用`variable2`set to编译第二次运行时`value2`，您会得到：

```
value1 value2 
```

不是完美的解决方案（这将是 Handlebars 单独保留未定义变量的设置），但适用于我的特殊情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T18:49:09.297

所以我没有找到轻松忽略客户端模板的方法，但普遍的共识是预编译您的客户端模板。

1.  全球安装车把`npm install handlebars -g`
2.  预编译您的模板`handlebars client-template1.handlebars -f templates.js`
3.  包括 templates.js`<script src="templates.js"></script>`
4.  执行模板`var html = Handlebars.templates["client-template1"](context);`

额外信息
[在 Handlebars.js（jQuery Mobile 环境）中使用预编译模板](https://stackoverflow.com/questions/8659787/using-pre-compiled-templates-with-handlebars-js-jquery-mobile-environment)
[http://handlebarsjs.com/precompilation.html](http://handlebarsjs.com/precompilation.html)

# cocos2d-iphone - 无法创建 Box2D 主体，无法使用非凸多边形形状

> ID：13874162
> 
> 赞同：0
> 
> 时间：2012-12-14T07:03:57.830
> 
> 标签：cocos2d-iphone, polygon, box2d-iphone, concave, non-convex

我是使用 COcos2d IOS 的 Box2d 新手，并开始制作不同的简单实体，现在我在获取某些形状（即 mySprite.png）的顶点时遇到问题，例如不凸的不规则形状。如何将这些形状转换为凸形，以便它们的身体碰撞准确工作？

我是否必须将这些凹形分解成较小的凸形部分，这是一项繁重的任务，这是他们的任何简单方法或某种算法。

还请提供帮助材料链接

我将非常感谢您的帮助和关心。

问候阿比..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T23:01:23.670

如果您使用的是 flash，那么这个类是很好的解决方案：[http ://www.emanueleferonato.com/2011/09/12/create-non-convex-complex-shapes-with-box2d/](http://www.emanueleferonato.com/2011/09/12/create-non-convex-complex-shapes-with-box2d/)

我正在使用 box2dWeb，但我找不到比将凹面形状分解成更小的凸面部分，然后用“焊接接头”将所有这些部分连接起来更好的解决方案。

对我有很大帮助的免费工具是“box2d-editor”：[http ://code.google.com/p/box2d-editor/](http://code.google.com/p/box2d-editor/)

# vb.net - 在应用程序运行时保持 DateTime.Now.timeofday.tostring() 更新

> ID：13874164
> 
> 赞同：0
> 
> 时间：2012-12-14T07:04:03.037
> 
> 标签：vb.net, visual-studio-2010, datetime

这是我启动应用程序时的问题。例如在下午 3:00，我使用`DateTime.Now.timeofday.tostring()`并输出它，它调用下午 3:00，但是在等待 5 分钟（3:05）而不关闭应用程序后，我仍然得到相同的输出（3:00）。如何确保时间始终是最新的，而无需关闭应用程序。？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:26:28.297

要获取当前时间，您可以使用

`DateTime.Now.ToLongTimeString()`

或者

`DateTime.Now.ToShortTimeString()`

它将正确更新。

# asp.net - 表单提交后如何清除asp.net页面中的所有数据

> ID：13874165
> 
> 赞同：3
> 
> 时间：2012-12-14T07:04:14.267
> 
> 标签：asp.net, webforms

我编写了一个冗长的 asp.net 网络表单，其中包含大约 44 个控件。这些数据被保存到数据库中。我的问题是，表单提交后，我想清除 ViewState 中的所有数据，并且应该清除 webform 控件的内容。如果不手动（并且繁琐地）清除每个控件，怎么可能？

`ViewState.Clear()`不工作 `Page.EnableViewState = false`不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:18:43.130

如果您停留在同一页面上，则在客户端或从回发的代码隐藏中清除它会比重定向稍微好一些，因为您正在节省到服务器的行程，尽管这需要更多的工作。

此外，`Response.Redirect(url)`抛出一个`ThreadAbortionException`，这对性能有负面影响，所以如果你想去重定向路线，考虑`Response.Redirect(url, false)`.

**客户端选项：（**简单的方法）

```
<script>
        $(':input').each(function () {
            switch (this.type) {
                case 'password':
                case 'text':
                case 'select-multiple':
                case 'select-one':
                case 'textarea':
                    $(this).val('');
                    break;
                case 'checkbox':
                case 'radio':
                    this.checked = false;
                    break;
            }
        });
</script> 
```

*从[这篇文章](http://www.electrictoolbox.com/jquery-clear-form/)中窃取的代码。*

**服务器端选项：**

您可以遍历所有控件以清除它们。在处理表单的函数末尾，添加：

```
ClearForm(Page.Form.Controls); 
```

功能：

```
 public void ClearForm(ControlCollection controls)
    {
        foreach (Control c in controls)
        {
            if (c.GetType() == typeof(System.Web.UI.WebControls.TextBox))
            {
                System.Web.UI.WebControls.TextBox t = (System.Web.UI.WebControls.TextBox)c;
                t.Text = String.Empty;
            }
            //... test for other controls in your forms DDL, checkboxes, etc.

            if (c.Controls.Count > 0) ClearForm(c.Controls);
        }
    } 
```

循环通过控件和子控件经常出现，因此您可以编写一个扩展方法来执行此操作。类似于[我在这篇文章中所做的事情](https://stackoverflow.com/questions/13336839/asp-net-findcontrol-and-gridview-returning-null/13337066#13337066)（而是一个返回所有控件集合的函数）。我的项目中有一个扩展方法，称为 GetAllChildren()，因此上面的相同代码将像这样执行：

```
foreach (Control i in Page.Form.GetAllChildren())
{   
     if (i.GetType() == typeof(System.Web.UI.WebControls.TextBox))
     {
          System.Web.UI.WebControls.TextBox t = (System.Web.UI.WebControls.TextBox)i;
          t.Text = String.Empty;
     }
     // check other types
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T07:09:28.307

插入完成后，只需使用`Response.Redirect`从头重新加载相同的页面。

例如`Page.Response.Redirect(Page.Request.RawUrl)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-06T09:16:59.187

尝试这个

```
 public static void ClearFields(ControlCollection pageControls)
    {
        foreach (Control contl in pageControls)
        {
            string strCntName = (contl.GetType()).Name;

            switch (strCntName)
            {
                case "TextBox":
                    TextBox tbSource = (TextBox)contl;
                    tbSource.Text = "";
                    break;
                case "RadioButtonList":
                    RadioButtonList rblSource = (RadioButtonList)contl;
                    rblSource.SelectedIndex = -1;
                    break;
                case "DropDownList":
                    DropDownList ddlSource = (DropDownList)contl;
                    ddlSource.SelectedIndex = -1;
                    break;
                case "ListBox":
                    ListBox lbsource = (ListBox)contl;
                    lbsource.SelectedIndex = -1;
                    break;
            }
            ClearFields(contl.Controls);
        }
    }
    protected void btn_cancel_Click(object sender, EventArgs e)
    {
        ClearFields(Form.Controls);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-05T07:43:21.863

抱歉，由于我的声誉低下，我无法为 Omkar Hendre 的回答添加评论。代码很好，对于我的问题，我需要将 Page 放在 Form.Controls 之前。

```
ClearFields(Page.Form.Controls); 
```

顺便说一句，非常感谢你！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T21:14:42.383

我建议你不要玩 ViewState。它旨在正确匹配控件的状态。

相反，只需通过重定向或显式清除控件来更改控件的状态。

# ios - RestKit 是否支持长轮询，如果应用程序在后台运行我会怎么做

> ID：13874166
> 
> 赞同：0
> 
> 时间：2012-12-14T07:04:32.067
> 
> 标签：ios, restkit, long-polling

我用谷歌搜索了很多关于这个的讨论。我想开发一个使用访问 REST 服务的 iOS 程序，并且我想收到更新通知，所以我正在考虑长轮询。RestKit 是否处理这个问题？

另一个问题是如果我想在后台运行怎么办？似乎正确的做法是设置推送通知服务并通知用户打开应用程序以接收最新消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:12:36.217

只有使用音乐和位置等特殊 API 才能在后台执行工作，因此如果用户不使用您的应用程序，您甚至无法进行查询。

相反，您应该在 Web 服务上完成所有繁重的工作，并设置一个 APNS 服务器以在发生某些事情时通知用户。这样一来，它就不会耗尽用户的所有电量，也不会为此目的使用适当的技术。

如果您不想要所有繁重的设置，还有很多服务可以发送推送通知。看看[http://parse.com](http://parse.com)或[http://urbanairship.com/](http://urbanairship.com/)。

# mysql - 需要在mysql中准备一个ranklist

> ID：13874169
> 
> 赞同：2
> 
> 时间：2012-12-14T07:04:45.187
> 
> 标签：mysql, select

我有一张桌子，上面有学生的所有详细信息。我已经为此准备了一个排名程序。例如：

```
SELECT name, total_marks, @curRank := IF(@prevVal=total_marks, @curRank, @curRank+1) AS rank,
@prevVal:=total_marks
FROM marks, (
SELECT @curRank :=0, @prevVal:=null, @n:=1
) r
ORDER BY total_marks DESC ; 
```

在此声明中。我需要检查是否有任何学生具有相同的等级。如果是这样，那么我必须检查特定的主题标记并相应地对其进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:13:04.633

我认为你可以做这样的事情 -

```
SELECT rank, GROUP_CONCAT(name) FROM (
  -- your query goes here
  ...
  ...
  ...
) t
GROUP BY rank 
```

* * *

```
CREATE TABLE marks(
  name VARCHAR(20),
  z INT(10),
  y INT(10),
  total_marks INT(10),
  rank INT(10)
);

INSERT INTO marks (name, z, y, total_marks, rank) VALUES ('abc', 100, 50, 150, 1);
INSERT INTO marks (name, z, y, total_marks, rank) VALUES ('abc', 100, 50, 150, 2);
INSERT INTO marks (name, z, y, total_marks, rank) VALUES ('abc', 100, 50, 150, 3);

INSERT INTO marks (name, z, y, total_marks, rank) VALUES ('def', 100, 50, 150, 1); 
INSERT INTO marks (name, z, y, total_marks, rank) VALUES ('def', 100, 50, 150, 2); 

INSERT INTO marks (name, z, y, total_marks, rank) VALUES ('abcdef', 100, 50, 150, 1);
INSERT INTO marks (name, z, y, total_marks, rank) VALUES ('abcdef', 100, 50, 150, 2);
INSERT INTO marks (name, z, y, total_marks, rank) VALUES ('abcdef', 100, 50, 150, 3);

SELECT rank, GROUP_CONCAT(name) FROM (
  SELECT name, MAX(rank) rank FROM marks GROUP BY name) t
GROUP BY rank;

+------+--------------------+
| rank | GROUP_CONCAT(name) |
+------+--------------------+
|    2 | def                |
|    3 | abc,abcdef         |
+------+--------------------+ 
```

用户*abc*和*abcdef*具有相同的等级 (1,2,3)。用户*def*有不同的等级 (1,2)。

# php - 即使最后一次插入成功，mysql_insert_id() 也会返回 0

> ID：13874170
> 
> 赞同：-2
> 
> 时间：2012-12-14T07:04:47.500
> 
> 标签：php, mysql

```
$tSQL = "insert into events(title,start,end,allday,url,customerid) VALUES(\"" . $_POST['title'] . "\", FROM_UNIXTIME($epochstart), FROM_UNIXTIME($epochend), \"$allday\", \"$url\", \"$customerid\")";
$mysqli->multi_query($tSQL);
$lasterror = $mysqli->error;

$tSQL = "update events set url = \"details.php?\"" . mysql_insert_id() . " where idevents = \"$eventid\"";
$row = $mysqli->multi_query($tSQL);
$lasterror = $mysqli->error;

echo print_r($tSQL); 
```

我的插入语句确实插入了记录，但是 mysql_insert_id() 一直返回 0。不应该这样，因为该事件表中有一个自动递增的主键，并且运行良好。有关如何获取最后插入的 ID 的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:07:22.503

您的查询是通过 执行`mysqli`的，因此该`mysql`函数不会保存插入的 ID。相反，[使用`mysqli`版本](http://php.net/manual/en/mysqli.insert-id.php)：

```
$id = $mysqli->insert_id; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T07:08:27.137

因为你正在使用`mysqli`而不是`mysql`，

如果使用*程序样式*，只需替换`mysql_insert_id()`为`mysqli_insert_id()`

 *`$mysqli->insert_id`或者如果使用*面向对象的样式*，则将其替换为

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T07:07:02.190

由于您使用的是 mysqli 扩展，因此请更改

```
$tSQL = "update events set url = \"details.php?\"" . mysql_insert_id() . " where idevents = \"$eventid\""; 
```

到

```
$tSQL = "update events set url = \"details.php?\"" .$mysqli->insert_id. " where idevents = \"$eventid\""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T07:11:30.090

因为您使用`mysqli`的是`mysql`.

使用`mysqli->insert_id`代替`mysql->insert_id()`

```
$tSQL = "insert into events(title,start,end,allday,url,customerid) VALUES(\"" . $_POST['title'] . "\", FROM_UNIXTIME($epochstart), FROM_UNIXTIME($epochend), \"$allday\", \"$url\", \"$customerid\")";
    $mysqli->multi_query($tSQL);
    $lasterror = $mysqli->error;

    $lastInsId=$mysqli->insert_id();

    $tSQL = "update events set url = \"details.php?\"" . $lastInsId . " where idevents = \"$eventid\"";
    $row = $mysqli->multi_query($tSQL);
    $lasterror = $mysqli->error;

    echo print_r($tSQL); 
```**

# json - Blackberry 通过 Post 方法发送和接收数据

> ID：13874173
> 
> 赞同：-2
> 
> 时间：2012-12-14T07:05:04.527
> 
> 标签：json, post, blackberry, httpconnection

通过 POST 方法在服务器上发送数据。并接收 JSON 响应。黑莓 - 回答。快乐编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:05:04.527

```
StringBuffer postData = new StringBuffer();

            httpConn = (HttpConnection) Connector.open(URL);
            httpConn.setRequestMethod(HttpConnection.POST);

            postData.append("?username="+username);
            postData.append("&password="+pass);
            postData.append("&projectcode="+projectid);
            String encodedData = postData.toString();

            httpConn.setRequestProperty("Content-Language", "en-US");
            httpConn.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
            httpConn.setRequestProperty("Content-Length",(new Integer(encodedData.length())).toString());
            byte[] postDataByte = postData.toString().getBytes("UTF-8");

            OutputStream out = httpConn.openOutputStream(); 
            out.write(postDataByte);
            out.close();

            httpConn.getResponseCode();

            is = httpConn.openInputStream(); 

            StringBuffer buffer = new StringBuffer();
            int ch = 0;

            while (ch != -1) {
                ch = is.read();
                buffer.append((char) ch);
            }

            String json = buffer.toString();

            Dialog.alert("Received Json: "+json); 
```

# android - Android 数组适配器

> ID：13874177
> 
> 赞同：1
> 
> 时间：2012-12-14T07:05:15.650
> 
> 标签：android

在一个 Android 应用程序上工作，我从一个类似于“Item 1”、“Item 2”、“Item 3”的网站得到一个单行响应，我需要将一行转换为一个列表以在数组适配器中使用最简单的项目。任何帮助将不胜感激，谢谢。这是代码。

```
try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(webs,"iso-8859-1"),8);
    String[] names = new String[] {reader.readLine()};
    webs.close();
    setListAdapter (new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, names));
} catch(Exception e) {
    Log.e("Log_tag", "Error converting results"+e.toString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:10:11.113

也许这段代码会为你做：

```
String namesString = reader.readLine();
String [] names = namesString.split(", ");
//optional if you wish to remove the quotes
for (int i = 0; i < names.length; i++) {
   names[i] = names[i].substr(1, names[i].length() - 1);
}
//use it as you wish 
```

# c++ - 你可以在 C 编程中使用三个减号吗？这是什么意思？

> ID：13874179
> 
> 赞同：59
> 
> 时间：2012-12-14T07:05:35.557
> 
> 标签：c++, c

> **可能重复：**
> [为什么 a+++++b 在 C 中不起作用？](https://stackoverflow.com/questions/5341202/why-doesnt-ab-work-in-c)

我从 David Simon 的“An Embedded Software Primer”第 113 页得到了这个。

我在下面看到了这个声明：

```
iHoursTemp = iHoursTemp + iZoneNew ---iZoneOld; 
```

你真的可以在这条线上有三个减号吗？三减号是什么意思？

我相信这是一个 C 编程语句。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-12-14T07:12:41.227

它相当于：

```
iHoursTemp = iHoursTemp + (iZoneNew--) - iZoneOld; 
```

这符合**[最大咀嚼](http://en.wikipedia.org/wiki/Maximal_munch)**原则

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-12-14T07:22:48.113

正确的答案是（如 Rob 所说）如下：

```
iHoursTemp = iHoursTemp + (iZoneNew--) - iZoneOld; 
```

原因是这样而不是

```
iHoursTemp = iHoursTemp + iZoneNew - (--iZoneOld); 
```

是一种称为*最大咀嚼策略*的约定，它表示如果下一个标记有多个可能性，则使用（咬）具有最多字符的那个。这种情况下的可能性是`-`和`--`，`--`显然更长。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-14T07:11:02.950

根据[Draft C++11 (PDF)](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf) 2.5 Preprocessing tokens，第 3 条和[Draft C11 (PDF)](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf) 6.4 Lexical elements，第 4 条，编译器将可能的最长字符序列解析为下一个标记。

这意味着`---`将被解析为两个标记`--`和`-`，这给出

```
iHoursTemp = iHoursTemp + (iZoneNew--) - iZoneOld; 
```

这也表明，如果您不确定优先级或解析规则，请使用括号来阐明代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-14T07:07:54.030

等于

`iHoursTemp = iHoursTemp + (iZoneNew--) -iZoneOld;`

```
#include <stdio.h>

int main()
{

int iHoursTemp = 2, iZoneOld = 3, iZoneNew = 4;

//2+4 - 2 = 4
iHoursTemp = iHoursTemp + iZoneNew ---iZoneOld;
//2+(4--) -3 = 3   

printf("\n :%d \n", iHoursTemp);

return 0;

} 
```

在 gcc 中给我 3 个。

* * *

## 回答 #5

> 赞同：-9
> 
> 时间：2012-12-14T12:51:16.603

当然为什么不。这个说法

```
iHoursTemp = iHoursTemp + iZoneNew ---iZoneOld; 
```

相当于

```
iHoursTemp = iHoursTemp + iZoneNew -(--iZoneOld); //first decrement iZoneOld then perform rest of the arithmetic operation. 
```

有点脑筋急转弯，但写起来很有趣:-)

# php - 使用 php 嵌套数组列表使用 optgroup 制作下拉菜单

> ID：13874186
> 
> 赞同：1
> 
> 时间：2012-12-14T07:06:20.570
> 
> 标签：php, arrays, optgroup

我有这个嵌套数组，我想将其转换为下拉列表，但在输出时它只是向我显示带有选项的组合框（数组，数组，数组）

```
 <select name="pcity" id="pcity" multiple="multiple">

<?php
$pcitylist = array('Andaman and Nicobar' => array('North and Middle Andaman',
    'South Andaman', 'Nicobar'), 'Andhra Pradesh' => array('Adilabad', 'Anantapur',
    'Chittoor', 'East Godavari', 'Guntur', 'Hyderabad', 'Kadapa', 'Karimnagar',
    'Khammam', 'Krishna', 'Kurnool', 'Mahbubnagar', 'Medak', 'Nalgonda', 'Nellore',
    'Nizamabad', 'Prakasam', 'Rangareddi', 'Srikakulam', 'Vishakhapatnam',
    'Vizianagaram', 'Warangal', 'West Godavari'), 'Arunachal Pradesh' => array('Anjaw',
    'Changlang', 'East Kameng', 'Lohit', 'Lower Subansiri', 'Papum Pare', 'Tirap',
    'Dibang Valley', 'Upper Subansiri', 'West Kameng'));
foreach ($pcitylist as $pcitylist1) {
    echo '<option value="' . $pcitylist1 . '"' . (isset($_POST['pcity']) && $_POST['pcity'] ==
        $pcitylist1 ? ' selected' : '') . '>' . $pcitylist1 . '</option>';
}              

 ?>         
 </select> 
```

我希望它像这样显示

```
<select>
<optgroup>Andaman and Nicobar</optgroup>
<option>North and Middle Andaman</option>
<option>South Andaman</option>.....
</select> 
```

等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:43:20.283

```
foreach ($pcitylist as $key => $pcitylist1)
{
      echo '<optgroup label="'.$key.'">';
      foreach ($pcitylist1 as $finalCity) {
          echo '<option value="' . $finalCity . '"' . (isset($_POST['pcity']) && $_POST['pcity'] == $finalCity ? ' selected' : '') . '>' . $finalCity . '</option>';
      }   
      echo '</optgroup>';
} 
```

`$key`持有 optgroup 标签。这将适用于您的阵列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:13:06.067

它是一个多维数组...在您的 for 循环中再使用一个 for 循环，您将获得输出..

试试下面的..

```
foreach ($pcitylist as $key => $pcitylist1)
{ 
      foreach ($pcitylist1 as $finalCity) {
          echo '<option value="' . $finalCity . '"' . (isset($_POST['pcity']) && $_POST['pcity'] == $finalCity ? ' selected' : '') . '>'.$key . $finalCity . '</option>';
      }    
} 
```

# yii - YII 框架基础 URL 仅更改内页

> ID：13874187
> 
> 赞同：1
> 
> 时间：2012-12-14T07:06:46.140
> 
> 标签：yii

我对 YII 框架很陌生。

我的任务是将站点的所有内部链接都指向另一个域。在 YII 框架下开发的网站。无需指向主页，只需将内页指向另一个域。

示例：
域名 1 - www.myfirstdomain.com
域名 2 - www.myseconddomain.com

域名1中的内页必须指向域名2。

示例：
1 - www.myfirstdomain.com/reviews/ 必须指向 www.myseconddomain.com/reviews/
2 - www.myfirstdomain.com/prices/ 必须指向 www.myseconddomain.com/prices/

注意 - 我不想使用 .htaccess 的重写 URL

为此，我必须更改所有链接的 baseURL，我不知道如何更改它。

我必须尽快完成这项任务，请帮助我。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:16:46.830

> 注意 - 我不想使用 .htaccess 的重写 URL

为什么不？

这是最简单的解决方案。

域之间有什么区别？Yii 可以在任何域控制器上工作，如果相同的话。因为只有域名的变化。或者你有代码使用绝对路径？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:11:21.727

尝试将您的应用程序文件夹的名称从 myfirstdomain 更改为 myseconddomain ..

或者您可以尝试查看 protected->config->main.php 并查看那里是否有一个声明您网站名称的全局参数..

# iphone - 如何使用 MKMapView 显示 UIProgressView？

> ID：13874195
> 
> 赞同：0
> 
> 时间：2012-12-14T07:07:28.493
> 
> 标签：iphone, ios, ios6, mkmapview, uiprogressview

在我的应用程序中，我有纬度和经度值来显示 MKMapView 中的位置。在以前的版本中，我一直使用 UIActivityIndi​​cator，直到 Mapscreen 在 MKMapView 中加载。现在我想显示一个 UIProgressView 而不是 UIActivityIndi​​cator。

是否可以使用 MKMapView 显示进度？我搜索了很多，因此无法获得适当或相关的解决方案。

注意：我在 UIProgressView 中使用的是使用 NSURLConnection 上传和下载文件。我想知道地图加载部分的处理时间，那么只有我能显示进度吗？对。

有人请帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:21:57.587

不幸的是`MKMapView`，它本身并不支持这一点。

您可以检查[MKMapViewDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html)，并且没有这样的委托方法。只有当地图开始并完成加载数据时，您才能从中获得。

# android - android:errorMessageBackground 在 styles.xml 中找不到资源错误

> ID：13874197
> 
> 赞同：9
> 
> 时间：2012-12-14T07:07:37.913
> 
> 标签：android, android-widget, android-edittext

我正在进行`EditText` 验证并使用“ `setError`”来显示错误消息。

我的主要座右铭是将错误弹出窗口更改为我的应用程序设计。我使用了`"android:errorMessageBackground"`in 样式，但不幸的是我得到了`**No Resource found error**`。

使用过的基础 API：（`2.2`即使也尝试过`4.0.3`）不确定我们需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T14:06:12.630

这似乎是一个已知问题：[https ://code.google.com/p/android/issues/detail?id=55879](https://code.google.com/p/android/issues/detail?id=55879)

# windows - 将在线应用程序迁移到离线的最佳方法是什么

> ID：13874203
> 
> 赞同：0
> 
> 时间：2012-12-14T07:07:58.883
> 
> 标签：windows, web-applications, desktop-application, data-migration, offlineapps

我有一个基于某些信息库生成报告（并打印它们）的在线应用程序。现在我想制作一个离线应用程序，它提供相同的体验，并且存储库预加载到用户的计算机中。将此在线应用程序转换为离线应用程序的最佳方法是什么。我首先想到的是设置本地服务器和数据库。这确保了体验是一致的。但我对其他选项持开放态度，例如将数据存储在文件系统中，然后通过基于 flash/flex 的应用程序或 C# 或 Java 加载它。这个离线应用程序的目的是为互联网不可行的用户提供功能（报告生成）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T22:38:19.040

我不确定您问题的 Windows 方面，但如果我正在做一个基于 Web 的离线页面，我会查看 LocalStorage 数据库（尽管它确实有一些缺点），但还有其他选择，例如 WebSQL和索引数据库。

如果你有报告，当它们过时时它们还有价值吗？您是否需要存储这些报告的配置，还是只是只读的？

无耻的自我推销，我有一个专做数据库同步的项目，虽然没做，但已经接近了。[您可以在https://github.com/forbesmyester/SyncIt](https://github.com/forbesmyester/SyncIt)看到它（带有丑陋但非常实用的）演示

# javascript - 如何使用greasemonkey从一个选项卡中获取数据并将其粘贴到另一个选项卡

> ID：13874205
> 
> 赞同：3
> 
> 时间：2012-12-14T07:08:00.270
> 
> 标签：javascript, greasemonkey

我想从一个选项卡中打开的页面中获取一些数据，并将其粘贴到另一个浏览器选项卡中打开的另一个页面的文本区域中。如何使用 Javascript 和 Greasemonkey 做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T08:44:14.247

1.  在元数据块中设置两个域，以便在两个页面上激活脚本
2.  在两个网站中找到一个独特的元素，您可以从中检测您当前所在的页面。
3.  如果您在带有表格的页面上，请获取数据并将其放在`GM_setValue`商店中。如果需要，请使用 . 打开下一个网站`GM_openInTab`。
4.  如果检测到下一个网站，则检索存储的值`GM_getValue`并将其粘贴到 textarea 中。

尽管有必要在表格页面之后加载文本区域页面，但对 Greasemonkey 来说并不难。

**例子**

```
// @include       http://website1.com/*
// @include       http://website2.com/*
// @require       http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js

$(document).ready(function() {
    if( $("#divfromsite1").length )
    {
       GM_setValue("pastetext", $("#gettable").html() );
       GM_openInTab("http://website2.com/");
    }
    else
    {
       $("#pastetextarea").val( GM_getValue("pastetext","") );
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T07:21:29.237

这很难做到。这并非不可能，但确实相当困难。

跨文档消息传递是一种使用 JavaScript 将消息从一个页面传递到另一个页面的方式。这样做的第一个先决条件是文件必须具有相同的来源。这意味着它们必须来自同一域上的同一端口，并且必须共享相同的协议。当您将一个页面嵌套在`iframe`另一个页面中时，它的效果很好。在这种情况下，您可以执行以下操作：

1.  获取`window`嵌套页面的对象，为事件添加事件监听器`receiveMessage`。
2.  用于`window[name].postMessage(msg, url)`向另一个窗口发送消息。
3.  捕获`data`消息事件的属性，该属性将包含您发送的信息。

使您的案例变得困难的是您想要跨选项卡进行通信。我会说我没有跨标签执行 XDM 的经验，并且个人认为，如果您有一个跨多个标签运行的应用程序需要相互交互，那么您可能需要审查您的应用程序设计......用户可能不喜欢您在他们的浏览器中更改了他们可能无法立即看到并因此理解的内容。

无论如何，如果你想继续这样做，你需要看看不同的浏览器如何让你访问他们的标签。对于 Firefox，您可能想从这篇文章[Get window object from tab](https://stackoverflow.com/questions/12609753/get-window-object-from-tab)开始，而对于 Chrome，您可能想从这里开始[如果我有特定选项卡的 tabId，如何获取特定选项卡的窗口对象？](https://stackoverflow.com/questions/10822133/how-do-i-get-the-window-object-for-a-specific-tab-if-i-have-that-tabs-tabid).

* * *

鉴于问题已被编辑并添加了 Greasemonkey 的使用，这可能会或可能不会满足您的需求，不幸的是我在 Greasemonkey 方面的技能不够熟练，无法为您提供基于 GM 的解决方案。如果您在使用 XDM 的解决方案方面需要帮助，我将很乐意为您提供帮助。

# c# - 设置 SSL 与使用 DLL 进行身份验证登录

> ID：13874207
> 
> 赞同：0
> 
> 时间：2012-12-14T07:08:06.683
> 
> 标签：c#, asp.net, session, ssl, active-directory

目前，我们有以下情况：

1、有一个网络应用程序，当用户需要登录网络应用程序时，用户将提供他/她的帐户用户名和密码。

用户名和密码将通过 AD 使用以下代码进行身份验证：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using System.DirectoryServices;
using System.DirectoryServices.AccountManagement;

namespace Access
{
  public partial class Login : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, txtboxDomain.Text))
        {
            bool isValid = pc.ValidateCredentials(txtboxUsername.Text, txtboxPassword.Text);
            if (isValid == true)
            {
                lblLogin.Text = "VALID";
                Session["Person"] = txtboxUsername.Text;
                Session.Timeout = 1;
            }
            else
            {
                lblLogin.Text = "INVALID";
            }
        }
    }

  }
} 
```

但是，一位同事'A'提到上述方式根本不安全。

她提供的理由如下：

*   IIS 上没有 SSL 设置。
*   即使 IIS 没有 SSL 设置，至少使用 IT 部门的安全 DLL 文件来提供身份验证方法。

但是，另一位同事“B”对她的回答表示怀疑，他认为，由于代码将针对 Active Directory (AD) 进行身份验证，因此它肯定是安全的，因此无需在 Web 应用程序所在的 IIS 上设置 SSL托管。

此外，他告诉她，IT 部门的安全 DLL 文件可能不会提供额外的安全性，因为首先，它是封闭的，其次，他认为它只会减少对身份验证方法的编码需求。

那么，我可以知道我的同事 A 或我的同事 B 的正确程度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:02:11.627

为了证明 Wireshark 是您唯一需要的工具。

只需配置一个过滤器来捕获在端口 443 上发送到您的 Web 服务器的数据包，然后向下钻取它们。

首先发布没有 HTTPS 的表单（端口 80），然后比较两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:54:01.110

最安全的方法是使用集成的 Windows 身份验证，因此用户甚至不必输入密码。

在上面没有 SSL 的代码中，密码将从客户端的浏览器以明文形式发送到网络服务器。可以将明文用户名和密码发送到 Active Directory。如果您的上述配置加密了从网络服务器到 LDAP 服务器的连接（或仅使用 Wireshark 之类的数据包嗅探器），则您必须检查 .NET 文档以获取 pc.ValidateCredentials。

# javascript - Javascript 测试结果。谁能解释一下？

> ID：13874209
> 
> 赞同：-2
> 
> 时间：2012-12-14T07:08:12.567
> 
> 标签：javascript, jquery, testing, optimization

我最近正在写一篇关于在绑定事件处理程序之前检查 jquery 元素是否存在的博客文章，我做了一个快速的 jsfiddle [，你可以在这里看到](http://jsfiddle.net/atmd/ecMhG/4/)

我不明白的是，结果显示（使用 chrome 以微秒为单位进行测量）测试 2 比测试 1 快得多。

您将从 jsfiddle 中看到测试 2 在绑定点击事件之前检查匹配的存在

测试 1 是：

```
console.time('time_1');
    $('.yep').click(function() {
      alert('clicked');
    });
    console.timeEnd('time_1'); 
```

测试 1 只是试图绑定事件

测试 2：

```
console.time('time_2');
if ($('.yep').length) {
  $('.yep').click(function() {
    alert('clicked');
  });
}
console.timeEnd('time_2'); 
```

测试 2 在绑定之前检查元素是否存在。

我正在一些代码上运行这两位代码，87 我认为是“部分”元素，其中一个具有“是的”类

我真的不明白为什么第二个测试更快，因为它做更多的工作。

结果：

```
time_1: 0.856ms 
time_2: 0.146ms 
```

任何人都可以阐明并帮助困惑的开发人员。

谢谢

注意请不要回复在 jquery 中绑定点击事件的替代方法，.click 仅用作简单测试

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T07:12:10.317

这里发生的主要事情是，*第*一次查询选择器时，引擎必须比后续查询做更多的工作，这些查询有时可以被缓存。如果你[颠倒前两个测试](http://jsfiddle.net/ecMhG/6/)，你会发现先运行的往往是较慢的。

尽管如此，并且主要作为旁注，在测试 2 中，您查询 DOM**两次**，首先检查`length`，然后连接处理程序。如果查询被缓存，则无关紧要，但仍然只需执行一次：

```
console.time('time_x');
var yep = $('.yep');
if (yep.length) {
  yep.click(function() {
    alert('clicked');
  });
}
console.timeEnd('time_x'); 
```

但是请注意，调用`click`其中没有元素的 jQuery 集是无害的无操作（不是错误或任何东西），因此无需`length`检查，除非您*还*执行其他未显示的操作。

# java - 在 OBJECT 标记中，堆设置不起作用

> ID：13874210
> 
> 赞同：-1
> 
> 时间：2012-12-14T07:08:13.783
> 
> 标签：java, memory, applet, jvm

我们可以像这样设置 JVM 堆设置

```
<APPLET CODE="Main.class" WIDTH="800" HEIGHT="500">
<PARAM name="separate_jvm" value="true">
<PARAM name="java_arguments" value="-Xmx512M"> 
```

我们可以在`<OBJECT>`标签中这样做吗？它对我有用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:16:46.340

部署这个小程序的方法是使用[`deployJava.js`](http://download.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html). 一旦你有正确的参数和属性，它就会为任何浏览器加载它编写正确元素的正确形式。

# javascript - 绑定不起作用

> ID：13874214
> 
> 赞同：0
> 
> 时间：2012-12-14T07:08:24.613
> 
> 标签：javascript, ember.js

这是我在 stackoverflow 上的第一篇文章。

我是 ember.js 的新手，我一直在研究 ember.js。

我现在正在构建一个小应用程序来学习 ember.js，但是绑定不起作用。

请帮帮我！！

```
#------------------------Controller------------------------

App.ApplicationController = Ember.Controller.extend();

App.monstersController = Ember.ArrayProxy.create({

content:[],

//some code to add model instances to content...

counter: function(){
var content = this.get('content');
return content.get('length');
}.property('length')

});

#------------------------View------------------------

App.StatsView = Ember.View.extend({
counterBinding : 'App.monstersController.counter',

#------------------------HTML------------------------

<script type="text/x-handlebars" data-template-name="application">

//some code here

{{#view App.StatsView}}Counter: {{counter}}{{/view}}

//I'm expecting the length of content array in App.monstersController above.

//some code here

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:22:37.370

如果你想从视图中访问一个值，你需要通过`{{view.counter}}`.

但是，在您的情况下，您可能应该在视图上设置控制器，例如：

```
App.StatsView = Ember.View.extend({
  controllerBinding : 'App.monstersController'
}) 
```

一旦你掌握了窍门，我会考虑设置一个路由器来管理绑定控制器和视图。

# javascript - 将文本框 Jquery 自动完成组合框值更改为空白

> ID：13874217
> 
> 赞同：0
> 
> 时间：2012-12-14T07:08:45.963
> 
> 标签：javascript

我有两个下拉菜单，一个是 jquery 自动完成组合框，另一个是普通下拉菜单。如果组合框的选项值已经是，我必须将 jquery 自动完成组合框的选项值设置为空白 onchange of normal dropdown在javascript中选择。你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:18:03.200

在 Select 元素上调用 onChange 事件，编写一个 javascript 函数将自动文本框的值置空

```
Example :  
       $("#txtWeight").val() = ""; 
```

# objective-c - 如何释放从 ALAssetsLibrary 获取的 UIimage

> ID：13874221
> 
> 赞同：0
> 
> 时间：2012-12-14T07:08:56.543
> 
> 标签：objective-c, uiimage, release, alassetslibrary

我花了整整两周的时间来解决这个问题。太沮丧了！

以下 2 个函数是我用来从设备库中获取图像的函数。如果我多次使用“setImage”功能，我的 iOS 设备上的可用内存就会不断丢失。

我认为assetImage函数中的“ **[imageFromAsset initWithCGImage:[[myasset defaultRepresentation] fullScreenImage]];** ”会导致问题。

任何人都可以帮助我吗？任何线索或想法都会非常感激！请！

```
- (void)setImage:(NSURL *)imageURL{
UIImage *imageFromDeviceLibrary = [[UIImage alloc] init];
[[DevicePhotoControl sharedInstance] assetImage:[imageURL absoluteString] imageToStore:imageFromDeviceLibrary];    
UIImageView *fullImageView = [[UIImageView alloc] initWithImage:imageFromDeviceLibrary];
[imageFromDeviceLibrary release];
[self.view addSubview:fullImageView];
[fullImageView release];
}

- (void)assetImage:(NSString *)assetURL imageToStore:(UIImage *)imageFromAsset{
    // Handling exception case for when it doesn't have assets-library
if ([assetURL hasPrefix:@"assets-library:"] == NO) {
    assetURL = [NSString stringWithFormat:@"%@%@",@"assets-library:",assetURL];
}
__block BOOL busy = YES;

ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];
//get image data by URL
ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
{
    [imageFromAsset initWithCGImage:[[myasset defaultRepresentation] fullScreenImage]];
    busy = NO;
};
ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
{
    NSLog(@"Library Image Fetching Failed : %@",[myerror localizedDescription]);
    busy = NO;
};
[assetslibrary assetForURL:[NSURL URLWithString:assetURL]
               resultBlock:resultblock
              failureBlock:failureblock];

while (busy == YES) {
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:14:21.743

AssetLibrary 被释放的那一刻，所有的资产对象都将随之消失。

我建议您在应用程序委托中创建您的assetLibrary 以使其保持活动状态，并且仅在您从 ALAssetLibrary 收到更改通知 ALAssetsLibraryChangedNotification 时重置它

[这里](http://www.openradar.me/10484334)

它可能会帮助你。

# excel - 在声明为字符串的变量中键入不匹配 VBA 错误

> ID：13874229
> 
> 赞同：3
> 
> 时间：2012-12-14T07:09:54.377
> 
> 标签：excel, vba

下面的代码看不懂，求大神帮忙。

它不断返回针对变量 b 的类型不匹配错误。

```
Dim a As Integer
Dim b As String

a = InputBox("Input the number of items", "Total Number of Items.")
b = InputBox("Which Block?", "Total Number of Items.")

Do While b <> "a" Or "A" Or "B" Or "b"
        MsgBox ("Invalid Block. Try again, Input A or B")
        b = InputBox("Which Block?", "SELECT BLOCK.")
Loop
     If b = "a" Or "A" Then
        Me.ComboBox1.List = Worksheets("Sheet1").Range("a3:a39").Value
    Else
        Me.ComboBox2.List = Worksheets("Sheet2").Range("a3:a35").Value
    End If 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T07:43:59.360

您可以使用`Application.InputBox`强制文本输入`a`和数字输入`b`

使用`UCASE$`缩短您的测试

```
Dim a As Long
Dim b As String

a = Application.InputBox("Input the number of items", "Total Number of Items.", , , , , , 1)
b = Application.InputBox("Which Block?", "Total Number of Items.", , , , , 2)

Do While UCase$(b) <> "A" And UCase$(b) <> "B"
b = Application.InputBox("Which Block?", "Invalid Entry - Total Number of Items.", , , , , 2)
Loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:46:11.863

我认为这是一个逻辑缺陷。改变

`Do While UCase$(b) <> "A" or UCase$(b) <> "B"`

进入

`Do While UCase$(b) <> "A" AND UCase$(b) <> "B"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:05:10.337

问题是如何测试“b”变量。

错误的

```
Do While b <> "a" Or "A" Or "B" Or "b" 
```

对

```
Do While b <> "a" Or b <> "A" Or b <> "B" Or b <> "b" 
```

这同样适用于 if 子句

而不是

```
If b = "a" Or "A" Then 
```

采用

```
If b = "a" Or b = "A" Then 
```

**编辑：**

当您对 Do 循环使用正确的语法时，您的代码会因为您构造 While 条件的方式而进入无限循环。例如，如果 inputBox 检索到“B”，则它是“<>b”或“<>a”或...，因此它将再次进入循环。无论用户输入什么，它总是与任何其他条件不同。

**编辑2：**

请试试这个。它是否检索到相同的错误？

```
Sub TryThis()
    Dim a As Integer
    Dim b As String

    a = InputBox("Input the number of items", "Total Number of Items.")
    b = InputBox("Which Block?", "Total Number of Items.")

    Do While b <> "a" And b <> "A" And b <> "B" And b <> "b"
            MsgBox ("Invalid Block. Try again, Input A or B")
            b = InputBox("Which Block?", "SELECT BLOCK.")
    Loop

    Debug.Print "InputBox b Correctly filled"

    If b = "a" Or b = "A" Then
        Debug.Print "User Input A"
    Else
        Debug.Print "User Input: " & b
    End If
End Sub 
```

# php - 无法使用 php 将 android 应用程序与 mysql DB 连接

> ID：13874230
> 
> 赞同：0
> 
> 时间：2012-12-14T07:09:57.127
> 
> 标签：php, android, mysql, json

以下是我将 android 应用程序与 MySQL DB 连接起来的代码。当我在我的 android 手机上运行它时，它只显示一个纯屏幕。我的 logcat 中没有错误。当我使用浏览器运行它时，`"192.168.1.11/city.php"`我正在从数据库中提取城市。但是当我在我的 android 设备上运行它时，同样不起作用。请帮忙

安卓类：

```
 public class City extends ListActivity {

     JSONArray jArray;
     String result = null;
     InputStream is = null;
     StringBuilder sb=null;

     @Override
     public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
     //http post
     try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://192.168.1.11/city.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        }catch(Exception e){
        Log.e("log_tag", "Error in http connection"+e.toString());
        }
       //convert response to string
       try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");

        String line="0";
        while ((line = reader.readLine()) != null) {
                  sb.append(line + "\n");
        }
    is.close();
    result=sb.toString();
    }catch(Exception e){
          Log.e("log_tag", "Error converting result "+e.toString());
    }
   //paring data
   int ct_id;
   String ct_name;
   try{
  jArray = new JSONArray(result);
  JSONObject json_data=null;
  for(int i=0;i<jArray.length();i++){
         json_data = jArray.getJSONObject(i);
         ct_id=json_data.getInt("CITY_ID");
         ct_name=json_data.getString("CITY_NAME");
     }
  }
  catch(JSONException e1){
      Toast.makeText(getBaseContext(), "No City Found" ,Toast.LENGTH_LONG).show();
  } catch (ParseException e1) {
        e1.printStackTrace();
}
   }
    }
} 
```

activity_city.xml 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".City" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" /> 
```

php代码：

```
 <?php
 ob_start();
 $host="localhost"; // Host name 
 $username=""; // Mysql username 
 $password=""; // Mysql password 
 $db_name="test"; // Database name 
 $tbl_name="CITY"; // Table name 
 mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
 mysql_select_db("$db_name")or die("cannot select DB");
 $sql=mysql_query("select * from CITY");
 while($row=mysql_fetch_assoc($sql))
{
$output[]=$row;
print(json_encode($output));
}
mysql_close();
?> 
```

在我的 Android 清单文件中包含 INTERNET 权限。

我不知道我哪里出错了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:49:32.297

PHP 文件位于何处。在本地计算机或 Web 服务器上。

如果 PHP 文件位于本地计算机中，则无法从 android 应用程序访问它。

还要验证您是否已授予 android 应用程序的 Internet 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:39:58.380

1）你确定你的 localhost ip 是“ [http://192.168.1.11](http://192.168.1.11) ”吗？尝试放两个 / 像这样“ [http://192.168.1.11//city.php](http://192.168.1.11//city.php) ”

我已将此 IP 用于我的 xampp“ [http://10.0.2.2//Mobile/login2.php](http://10.0.2.2//Mobile/login2.php) ”或尝试使用 127.0.1.1 或 127.0.0.1

2）试试这个[链接](https://stackoverflow.com/questions/13245771/how-to-validate-the-user-login-credentials-in-android-using-php-mysql-with-the/13248082#13248082)。如果您在 java 或 php 代码中做错了什么，这将对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T07:21:27.443

确保您的手机与服务器位于同一网络中。

尝试移动

> 打印（json_encode（$输出））；

跳出循环

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T07:24:02.867

你的PHP代码需要改变..所以我改变了它并把它放回去..

```
<?php
     ob_start();
     $host="localhost"; // Host name              Changed
     $username="root"; // Mysql username          Changed
     $password=""; // Mysql password 
     $db_name="test"; // Database name 

     $tbl_name="CITY"; // Table name 
     mysql_connect($host, $username, $password)or die("cannot connect");          //Changed
     mysql_select_db($db_name)or die("cannot select DB");           //Changed
     $sql=mysql_query("select * from CITY");
     while($row=mysql_fetch_assoc($sql))
     {
          $output[]=$row;
          print(json_encode($output));
     }
     mysql_close();
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T08:16:23.697

当你想在手机上测试你的应用程序时，不要使用 localhost。您的手机无法访问本地主机上的 PHP 文件。

我是否可以建议在线托管您的 PHP 和 SQL 文件并继续测试。

# android - Android线程异常

> ID：13874238
> 
> 赞同：-2
> 
> 时间：2012-12-14T07:10:52.650
> 
> 标签：android

我在android中同时执行两个线程时遇到问题。通过一个线程处理要在一定时间间隔后执行的方法，而另一个线程试图处理几个按钮上的 onClick 响应，但问题是只有一个线程正在执行，即调用该方法的线程。请给我解决方案。感谢你在期待。

```
Thread th=new Thread(){

            @Override
            public void run(){
                try
                {
                    for (timer = 0; timer < 1000; timer++)
                    {
                        int waited = 0;
                        while(waited < splashTime)
                        {
                            Thread.sleep(100);
                            runOnUiThread(new Runnable() {
                                public void run() {
                                    try {
                                          ds.open();
                                          String               quotes=ds.getRandomQuote();
                                          textView.setText(quotes);
                                          ds.close();
                                        //textView.setText(num[timer]);

                                    }
                                    catch(Exception e)
                                    {
                                        e.printStackTrace();
                                    }
                                }
                            });
                            waited += 100;
                        }
                    }
                }catch (InterruptedException e) {
                }

            }
        };th.start 

private void quotes() {
    // TODO Auto-generated method stub
     for (timer = 0; timer < 1000; timer++)
     {
         int waited = 0;
         while(waited < splashTime)
         {
             try {
                  ds.open();
                  String quotes=ds.getRandomQuote();
                  textView.setText(quotes);
                  ds.close();

              }
              catch(Exception e)
              {
                  e.printStackTrace();
              }
         }
         waited+=100;
     }

}

private void getAllQuotesFromAssets() {
if(ds.getRandomQuotesList().size()==0)
{   
    new performBackgroundtask().execute();}

            }

Thread th1=new Thread()
{
  public void run()
  {  

public void myClickHandler(View view)
{

        switch (view.getId()) {

        case R.id.author_button:
            //Toast.makeText(getApplicationContext(), "author",Toast.LENGTH_SHORT).show();
            Intent intent = new Intent(this,AuthorList.class);
            startActivity(intent);
            break;

        case R.id.category_button:
            //Toast.makeText(getApplicationContext(), "category",Toast.LENGTH_SHORT).show();
            Intent intent1 = new Intent(this,CategoryList.class);
            startActivity(intent1);
            break;

        case R.id.fev_list_button:
            //Toast.makeText(getApplicationContext(), "fevourite",Toast.LENGTH_SHORT).show();
            Intent intent2 = new Intent(this,fev.class);
            startActivity(intent2);
            break;

        case R.id.random_button:
            //Toast.makeText(getApplicationContext(), "random",Toast.LENGTH_SHORT).show();
            Intent intent3 = new Intent(this,Random_quotes.class);
            startActivity(intent3);
            break;

        default:
            break;
        }
    }

};
th1.start;
   th.join; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:21:28.723

采用

```
Your_Current_activity.this.runOnUiThread(new Runnable() {
    public void run() {
        // your UI code here
    }); 
```

因为[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#q=%20runOnUiThread)是 Activity 类的方法而不是 Thread

# iphone - InApp 购买在 iPhone 5 设备中不起作用

> ID：13874239
> 
> 赞同：3
> 
> 时间：2012-12-14T07:10:55.167
> 
> 标签：iphone, objective-c, ios, in-app-purchase, iphone-5

我已经在我的应用中实现了应用内购买。它在 iPhone 4 设备上运行良好，适用于 iOS5 和 iOS6，但不适用于 iPhone 5 设备。

对于 iPhone 5，当我单击应用内购买时，会弹出购买产品的警报，但不要求输入用户名和密码。

关于哪个是问题的任何想法？任何帮助将不胜感激。

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:15:27.313

在 iPhone 5 中，如果您已经使用测试用户帐户登录了 iTunes 帐户，则它不会要求输入密码。

要禁用此功能：设置->常规->限制

并将“要求密码”设置为“立即”，它会要求您输入密码。

这可能会有所帮助，如果没有，请告诉我。

谢谢，

鹤芒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:55:04.247

可能在您的 iPhone 5 中，您已经提到了您的 Apple id，以便通过 appstore 进行其他购买。

您可以转到设置并注销您的Apple ID。我想，你应该得到弹出然后。:)

# c# - 比较 DateTime 值是否在特定时间“之间”

> ID：13874245
> 
> 赞同：2
> 
> 时间：2012-12-14T07:11:11.503
> 
> 标签：c#, datetime

如何比较当前时间与另一个时间..

```
System.DateTime.Now.Hour 
```

这是为了获取当前时间。我想要的是如果时间介于两者之间

```
7 AM                 to            02:59 PM  //Do something
03:00 PM             to            10:59 PM  //Do something
11:00 PM             to            06:59 AM  //Do something 
```

请给我任何想法..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T07:12:50.793

您可以使用 **[DateTime.TimeOfDay](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx)**属性将时间与当前时间进行比较。

```
TimeSpan startTime = new TimeSpan(7,0,0);
TimeSpan endTime = new TimeSpan(2, 59, 0);

if (DateTime.Now.TimeOfDay >= startTime &&
    DateTime.Now.TimeOfDay <= endTime)
{
    //in range
}
else
{
    //not in range. 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:19:08.193

您实际上可以对 DateTime 进行算术运算，它会返回一个时间跨度。

```
 DateTime d1 = new DateTime(2012, 12, 12, 5, 5, 5);
        DateTime d2 = DateTime.Now;
        TimeSpan ts = new TimeSpan();
        ts = d2 - d1; 
```

# algorithm - 设计和连接分区格式

> ID：13874249
> 
> 赞同：0
> 
> 时间：2012-12-14T07:11:28.043
> 
> 标签：algorithm, architecture, partitioning

这是一个我从未找到合适答案的主题，所以我想知道 Stack Overflow 的乐于助人的人是否能够回答这个问题。

首先：我不是要一个教程或任何东西，只是一个讨论，因为我在网上没有看到太多关于这个的信息。

基本上我想知道的是如何设计一种新型的分区格式，然后它如何能够与操作系统接口使用？更好的是，什么使一种分区格式比另一种更好？是性能/安全性、文件名/文件大小吗？或者还有更多？

这只是我一直想知道的事情。有朝一日，我很想涉足创建一个仅用于教育目的的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:41:44.390

好的，虽然问题很广泛，但我会尝试涉足它：

1.  假设我们谈论的是“文件系统”，而不是某些“原始”分区格式，例如交换格式等。
2.  文件系统应该能够从低级操作系统、BIOS、网络或自定义调用映射到用户应用程序可以使用的连贯文件和文件夹文件的名称。因此，在您的情况下，“分区格式”应该是将低级磁盘扇区和柱面及其内容呈现为文件和文件夹抽象的东西。
3.  在此过程中，如果您可以提供诸如更少碎片、冗余节点索引、日志以防止数据丢失、断电时的生存、解决坏扇区、冗余数据、硬件镜像等功能，那么它可以是被认为比不提供此类功能的另一个更好。如果您可以优化文件大小以匹配磁盘扇区和集群的使用，同时容纳非常小和非常大的文件，那将是一个加分项。
4.  对于任何非实验性使用，彻底的防弹安全和测试将被认为是必不可少的。
5.  要开始自己进行黑客攻击，请使用稍旧的文件系统之一，例如 ext2。您将需要相当多的构建/编译/内核技能才能开始，但没有什么大不了的。

# objective-c - 使用 NSSortDescriptor 对数字进行排序

> ID：13874256
> 
> 赞同：5
> 
> 时间：2012-12-14T07:12:16.520
> 
> 标签：objective-c, core-data, ios6, nsnumber, nssortdescriptor

我再次陷入另一个问题，但经过很长时间。

这次我有数据库（核心数据），其属性`numbers`包含整数，如 213879,123,4,345,56567 等。

我需要以类似于类似`alphabetically`顺序的升序获取数据。

我正在按照下面给出的方式这样做，

```
fetchRequest.sortDescriptors=[NSArray arrayWithObject:
      [NSSortDescriptor sortDescriptorWithKey:@"numbers" 
                                    ascending:YES 
                                     selector:@selector(compare:)]]; 
```

但不幸的是，它只比较每个数字的第 1 位，意味着如果有 2 个类似`123`and的数字`321`，它将与它们进行比较`1 (first digit of first number)`和`3 (first digit of second number)`排序。

当出现`123`和`111`（所有数字的第一个数字相同）时，它变得混乱。

如果我做错了什么或 SortDescriptor 以这种方式工作？我需要同样对数字进行升序排序的解决方案`123,133,213,451,516`。

**要记住的事情** 实际上，该属性`numbers`将包含数字多于 6 位的整数。例如`1234567,234568,235481`

感谢所有在期待中帮助我的人。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-27T08:32:41.613

试试这个：

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc]initWithKey:@"rank"  ascending:YES selector:@selector(localizedStandardCompare:)]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T07:19:26.993

看来您的属性是 type `NSString`。确保你做到了`NSNumber`，然后排序将按预期工作。

不需要`selector:@selector(compare:)`在您的排序描述符中，因为无论如何这是默认设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T04:40:31.667

```
[NSSortDescriptor sortDescriptorWithKey:@"self"
                              ascending:YES
                             comparator:^(id obj1, id obj2){
    return [(NSString*)obj1 compare:(NSString*)obj2
                            options:NSNumericSearch];
 }]; 
```

这对我来说很好用

# firefox - 从 Firefox 扩展调用 NPAPI 插件功能

> ID：13874259
> 
> 赞同：2
> 
> 时间：2012-12-14T07:12:33.147
> 
> 标签：firefox, npapi, browser-plugin

我已经编写了一个 NPAPI 插件，它实现了所需的所有逻辑，现在我正在编写一个扩展，预计将使用插件中提供的功能。这种架构让我有机会为 Mozilla Firefox 和 Google Chrome 编写相同的 C++ 代码。

在 Chrome 中，我通过将构造写入我的扩展拥有的单独文档来实例化插件中定义的对象`<embed ...>`（它自动提供给我的 Chrome 插件）。那行得通。在 C++ 代码中，我执行插件对象的构造函数中所需的所有工作。

我无法轻松地调整我的解决方案以在 Firefox 中使用它，因为扩展没有任何单独的文档支持，并且我的扩展无权写入任何已呈现的文档。

我最常见的主要问题是如何多次使用插件提供的功能，并在用户单击按钮或在下拉菜单中选择我的条目时将参数列表传递给我的本机函数（即使用参数应该在特定事件之后调用，而不仅仅是在任意时间）？

“补充”问题是：

如何在 Mozilla Firefox 中实例化插件？我在哪里可以获得将由 FF “解释”并且扩展能够写入的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:53:32.693

我自己不知道该怎么做，但这是一个开源的 firefox 扩展：[https ://github.com/kylehuff/webpg-firefox](https://github.com/kylehuff/webpg-firefox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T22:45:50.613

Your Firefox extension needs to make use of a "[browser overlay](https://developer.mozilla.org/en-US/docs/XUL_Overlays)". There are many types of overlays, for various parts of the browser, and they are loaded (overlay'ed) within the specified document, as defined in the [chrome.manifest](https://developer.mozilla.org/en-US/docs/Install_Manifests#unpack) file.

For example, the following applies an [overlay](https://developer.mozilla.org/en-US/docs/XUL_Overlays) to the "browser.xul" file (which is the main browser window)

```
overlay     chrome://browser/content/browser.xul            content/firefoxOverlay.xul 
```

Now, within that [overlay](https://developer.mozilla.org/en-US/docs/XUL_Overlays) file you can load your plugin object and call the methods provided by the plugin.

Here is an example XUL file which does nothing more than load the NPAPI plugin of the content-type "application/x-example-plugin", and assign the plugin object to the variable "myPlugin"

```
<script type="text/javascript">
    myPlugin = document.getElementById("myPlugin");
</script>
<?xml version="1.0" encoding="UTF-8"?>
<overlay id="myOverlay" xmlns:html="http://www.w3.org/1999/xhtml" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
    <script type="text/javascript">
        myPlugin = document.getElementById("myPlugin");
        alert(myPlugin.someFunction());
    </scrpit>
    <window id="main-window">
        <vbox collapsed="true">
            <html:object id="myPlugin" type="application/x-example-plugin" height="1" width="1" style="visibility:hidden;"></html:object>
        </vbox>
    </window>
</overlay> 
```

Some important things to note

1.  The "xmlns:html=..." declaration is critical, because the plugin object is being loaded in an html:object, and that declaration tells the XUL parser how to render the object.
2.  The id of the window ("main-window") is important, because that is how the XUL parser will overlay the item (within the "main" window)
3.  The object id ("myPlugin", in this example) is how you will reference the plugin object in via the JavaScript later.
4.  Because we are not showing content with our plugin, merely calling public methods provided by it, it is important to make the CSS visibility has "hidden", and the size to 1x1 pixels. Without doing this, you could end up with large blank spaces rendered in the browser UI. Additionally, it is important to use the CSS "visibility" property, *not* the "display" property. If you set the display property to "none", you will have issues with your plugin actually being initialized within the overlay.
5.  In your extension [install.rdf](https://developer.mozilla.org/en-US/docs/Install_Manifests#unpack) file, you must specify the "unpack" property as "true", i.e.: `<em:unpack>true</em:unpack>`

Once your overlay is loaded within the context of the browser XUL, and your plugin initialized within the main browser window, you can reference your plugin from within the scope of the main window by the variable you have assigned it to ("myPlugin" in this example).

I will not go into depth here on how to obtain the context of the [main window](https://developer.mozilla.org/en-US/docs/Working_with_windows_in_chrome_code#Accessing_the_elements_of_the_top-level_document_from_a_child_window) (see the links below), but you once you have a reference you can invoke the exposed methods from within [content scripts, sidebars, toolbars](https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages), etc.

Reference links -

*   [XUL Overlays](https://developer.mozilla.org/en-US/docs/XUL_Overlays)
*   [Install manifests (chrome.manifest)](https://developer.mozilla.org/en-US/docs/Install_Manifests#unpack)
*   [Working with windows in chrome code](https://developer.mozilla.org/en-US/docs/Working_with_windows_in_chrome_code#Accessing_the_elements_of_the_top-level_document_from_a_child_window)
*   [Interaction between privileged and non-privileged pages](https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages)
*   [Source files for one of my Firefox extensions using an NPAPI plugin](https://github.com/kylehuff/webpg-firefox)

# node.js - 猫鼬排序问题

> ID：13874261
> 
> 赞同：1
> 
> 时间：2012-12-14T07:12:42.377
> 
> 标签：node.js, mongodb, mongoose

我有一个收藏

```
var mycoll = new Schema({
    col1: { type: String,required: true,}
  , col2: {type: String} 
  , mydate: {type: Date, required: true, default: Date.now,index:1} 
  etcetc
}, { collection: 'info' }); 
```

我建立一个基于猫鼬的查询，如下所示

```
Info.statics.FindbyPage= function (callback, skip, limit) {

var infos = this.find();

infos.sort({ mydate: 1}).skip(skip).limit(limit);

res = infos.exec(callback)

} 
```

**问题是结果不是按 mydate 排序的，如果我删除限制并跳过内容，结果将全部加载，并且一旦我输入跳过和限制，结果就会很好地排序，但某些日期丢失了......**

有什么帮助吗？？？需要注意的一件事是我尝试了排序参数中的所有可能性

我正在使用猫鼬 v3

# php - Magento var 目录

> ID：13874269
> 
> 赞同：0
> 
> 时间：2012-12-14T07:13:12.850
> 
> 标签：php, zend-framework, magento

嗨，我在我的 magento 上遇到了这个错误

```
Unable to find writable var_dir

#0 /home/glasses/html/includes/src/Mage_Core_Model_Config_Options.php(66): Mage_Core_Model_Config_Options->getVarDir()
#1 /home/glasses/html/includes/src/Varien_Object.php(112): Mage_Core_Model_Config_Options->_construct()
#2 /home/glasses/html/includes/src/Mage_Core_Model_Config.php(200): Varien_Object->__construct(Array)
#3 /home/glasses/html/app/Mage.php(739): Mage_Core_Model_Config->__construct(Array)
#4 /home/glasses/html/app/Mage.php(678): Mage::_setConfigModel(Array)
#5 /home/glasses/html/index.php(71): Mage::run('', 'store')
#6 {main} 
```

目前我有 httpd web 服务器，并且我也发布`chmod -R 777 var/`了目录，但问题仍然存在。可以访问除首页以外的其他页面。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:03:00.250

Magento 下一步检查 tmp 目录：

```
$dir = $this->getSysTmpDir().DS.'magento'.DS.'var';
        if (!$this->createDirIfNotExists($dir)) {
            throw new Mage_Core_Exception('Unable to find writable var_dir');
        } 
```

如您所见，这段代码试图在系统 tmp 目录中创建临时目录。如果创建过程失败 - 它会引发错误。因此，首先，您应该检查系统根目录（/tmp）中是否存在“tmp”目录，并且 php 有足够的权限在那里创建/写入 magento tmp 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:30:55.050

目前在您的网站上我可以看到错误 - **cache_dir must be a directory**

要解决此问题 - 在 magento 安装的根目录中创建一个 tmp 目录，希望这能解决您的问题。

# java - Java Gui写入输出文件

> ID：13874270
> 
> 赞同：0
> 
> 时间：2012-12-14T07:13:17.857
> 
> 标签：java, swing, user-interface, input

我的程序显示它运行成功，但我的对话框不会出现。我是 Java 新手，我不确定我哪里出错了，有人可以帮忙吗？我正在尝试写入将存储用户输入的文件

```
/*

 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
    package database;

/**
 *
 *
 */

   import java.io.*;
   import java.awt.*;
   import java.awt.event.*;

    `enter code here`import javax.swing.*;

    `public class Database extends JFrame implements ActionListener{

        FlowLayout flow = new FlowLayout();

        JLabel fName = new JLabel("First Name");
        JTextField fName1 = new JTextField(15);

         JLabel blankSpaces1 = new JLabel("                             ");

         JLabel lName = new JLabel("Last Name");
         JTextField lName1 = new JTextField(15);
         JLabel blankSpaces2 = new JLabel("                                                       ");

         JLabel age = new JLabel("Age");
        JTextField age1 = new JTextField(3);
      JLabel blankSpaces3 = new JLabel("                 ");

         JLabel email = new JLabel("Email Address");
         JTextField email1 = new JTextField(30);
         JLabel blankSpaces4 = new JLabel("                 ");

         JLabel phone = new JLabel("Cell Phone Number");
         JTextField phone1 = new JTextField(10);
         JLabel blankSpaces5 = new JLabel("                 ");

         JLabel blankSpaces6 = new JLabel("                 ");

         JButton enter = new JButton("Enter");
         JButton reset = new JButton("Reset");
         JButton exitButton = new JButton("Exit");
         Container con = getContentPane();

        public void Database (){
           Database Dab = new Database();
           con.setLayout(flow);
          setTitle("Antwain's Database");

        Dab.setSize(800,300);
        setVisible(true);

            con.add(fName);
            con.add(blankSpaces1);
            con.add(fName1);
            con.add(blankSpaces1);
            con.add(lName);
            con.add(lName1);
            con.add(blankSpaces2);

            con.add(age);
            con.add(age1);
            con.add(blankSpaces3);

            con.add(email);
            con.add(email1);
            con.add(blankSpaces4);

            con.add(phone);
            con.add(phone1);
            con.add(blankSpaces5);

            con.add(blankSpaces6);
            con.add(blankSpaces2);

            con.add(enter);
            con.add(exitButton);
            con.add(reset); 

        enter.addActionListener(this);
        exitButton.addActionListener(this);
        reset.addActionListener(this);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }

            public void actionPerformed(ActionEvent e1){
          Object source = e1.getSource();

         if(source == enter){

            String fName = fName1.getText();
            String lName = lName1.getText();
            String age = age1.getText();
            String email = email1.getText();
            String phone = phone1.getText();

        }
        else
            if(source == reset){
            fName1.setText("");
            lName1.setText("");
            age1.setText("");
            email1.setText("");
            phone1.setText("");
    }
           else
              {
                // if the user clicks on the Exit button (source is Exit button)
                System.exit(0);
              } 

                   }

        public static void main(String[] args) {

           Database dab = new Database();

    }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:33:41.457

`new Database();`
调用一个空的构造函数，因为您没有定义任何构造函数。
更改`public void Database() {}`为`public Database()`
此外，您必须`Database Dab = new Database();`从构造函数中删除并将行更改`Dab.setSize(800,300);`为`setSize(800,300);`
您的代码将在您进行此更改时起作用，但您应该真正致力于您的编程风格和代码格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:32:40.530

你需要做的还有很多，修复你在代码中做错的事情。希望你能找出你的错误。

```
public class DataBaseFrame extends JFrame implements ActionListener {

    FlowLayout flow = new FlowLayout();
    JLabel fName = new JLabel("First Name");
    JTextField fName1 = new JTextField(15);
    JLabel blankSpaces1 = new JLabel("");
    JLabel lName = new JLabel("Last Name");
    JTextField lName1 = new JTextField(15);
    JLabel blankSpaces2 = new JLabel("");
    JLabel age = new JLabel("Age");
    JTextField age1 = new JTextField(3);
    JLabel blankSpaces3 = new JLabel("");
    JLabel email = new JLabel("Email Address");
    JTextField email1 = new JTextField(30);
    JLabel blankSpaces4 = new JLabel("");
    JLabel phone = new JLabel("Cell Phone Number");
    JTextField phone1 = new JTextField(10);
    JLabel blankSpaces5 = new JLabel("");
    JLabel blankSpaces6 = new JLabel("");
    JButton enter = new JButton("Enter");
    JButton reset = new JButton("Reset");
    JButton exitButton = new JButton("Exit");

    public DataBaseFrame() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("Antwain's Database");
        JPanel panel = new JPanel(new FlowLayout());
        panel.add(fName);
        panel.add(blankSpaces1);
        panel.add(fName1);
        panel.add(blankSpaces1);
        panel.add(lName);
        panel.add(lName1);
        panel.add(blankSpaces2);

        panel.add(age);
        panel.add(age1);
        panel.add(blankSpaces3);

        panel.add(email);
        panel.add(email1);
        panel.add(blankSpaces4);

        panel.add(phone);
        panel.add(phone1);
        panel.add(blankSpaces5);

        panel.add(blankSpaces6);
        panel.add(blankSpaces2);

        panel.add(enter);
        panel.add(exitButton);
        panel.add(reset);
        getContentPane().add(panel);
        enter.addActionListener(this);
        exitButton.addActionListener(this);
        reset.addActionListener(this);

    }

    public void actionPerformed(ActionEvent e1) {
        Object source = e1.getSource();

        if (source == enter) {

            String fName = fName1.getText();
            String lName = lName1.getText();
            String age = age1.getText();
            String email = email1.getText();
            String phone = phone1.getText();

        } else if (source == reset) {
            fName1.setText("");
            lName1.setText("");
            age1.setText("");
            email1.setText("");
            phone1.setText("");
        } else {
            // if the user clicks on the Exit button (source is Exit button)
            System.exit(0);
        }

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                DataBaseFrame dab = new DataBaseFrame();
                dab.setSize(800, 300);
                dab.setVisible(true);
            }
        });

    }
} 
```

# python - 学习 Z3py - 是否支持数组和循环

> ID：13874271
> 
> 赞同：5
> 
> 时间：2012-12-14T07:13:30.733
> 
> 标签：python, z3, smt

我正在浏览 Z3py，并且对如何在几个特定情况下使用 API 有疑问。下面的代码是我最终想使用 Z3 的简化版本。我的一些问题是： 1\. 有没有办法创建一个任意长的值数组，比如下面的变量“a”？2、可以通过Z3py循环访问数组的每个元素吗？3\. 是否可以将结果分配回原始变量或是否需要新变量？转换为 CNF 会自动添加唯一的 id 吗？（即 a += b）

总的来说，我不知道如何将 Z3py API 应用于以下算法，其中解决方案取决于“b”。感谢您提供任何帮助或提示，谢谢。

```
import sys
import struct

a = "\xff\x33\x01\x88\x02\x11\x03\x55"
b = sys.stdin.read(1) #a byte of user input - value 'a' is good
c = ''
d = ''

for x in range(len(a)):
    c +=  struct.pack( 'B', int(a[x].encode('hex'), 16)^int(b.encode('hex'), 16) )

print c.encode('hex')

second = '\x23\x23'
x = 0
while x < len(c):
    d += struct.pack( 'h', int(c[x:x+1].encode('hex'), 16)^int(second.encode('hex'), 16) )
    x += 2

print d.encode('hex')

if d == '\xbd\x23\x43\x23\x40\x23\x41\x23':
    print "Good"
else:
    print "Bad" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T04:54:35.990

我们可以通过编写一个生成 Z3 表达式的 Python 程序来实现这一点。我们在这个程序中使用 Python 循环和列表（我们也可以使用数组），但是这些列表包含 Z3“符号”表达式而不是 Python 值。结果列表`d`是包含 的 Z3 表达式列表`b`。然后，我们要求 Z3 找到一个`b`使得 的元素`d`与字符串中的字符“相等”的元素`'\xbd\x23\x43\x23\x40\x23\x41\x23'`。这是代码：

```
from z3 import *

def str2array(a):
    """
    Convert a string into a list of Z3 bit-vector values of size 8
    """
    return [ BitVecVal(int(a[x].encode('hex'), 16), 8) for x in range(len(a)) ]

a = str2array("\xff\x33\x01\x88\x02\x11\x03\x55")
# 'a' is a list of Z3 bitvector constants.
print "a:", a
# The elements of 'a' may look like Python integers but they are Z3 expressions.
# We can use the method sexpr() to get these values in SMT 2.0 syntax.
print [ a_i.sexpr() for a_i in a ]

# b is a Z3 symbolic variable.
b = BitVec('b', 8)

# We compute a list 'c' of Z3 expressions from 'a' and 'b'.
# We use Python list comprehensions but we can also use a for-loop.
c = [ a_i ^ b for a_i in a ] 

print "c:", c

second = '\x23\x23'
# We convert 'second' in a Z3 bit-vector value of size 16
second = BitVecVal(int(second.encode('hex'), 16), 16)
print "second:", second

# The Z3 operation Concat concatenates two or more bit-vector expressions.
d = []
x = 0
while x < len(c):
    # c[x] is a Bit-vector of size 8, second is a Bit-vector of size 16.
    # In Z3, we have to do the "casting" ourselves.
    # We use ZeroExt(8, c[x]) to convert c[x] into a Bit-vector of size 16,
    # by adding 0-bits.
    d.append(ZeroExt(8, c[x]) ^ second)
    x += 2
print "d:", d

goal = str2array('\xbd\x23\x43\x23\x40\x23\x41\x23')
print "goal:", goal
# Note that, len(goal) == 2*len(d)
# We can use Concat to concatenate adjacent elements.

# We want each element of d[i] == Concat(goal[2*i], goal[2*i+1])
# We can use Z3 to find the 'b' that will satisfy these constraints

s = Solver()
# 's' is a Z3 solver object
i = 0
while i < len(d):
    s.add(d[i] == Concat(goal[2*i+1], goal[2*i]))
    i += 1
print s
# Now, 's' contains a set of equational constraints.
print s.check()
print s.model() 
```

# jsp - java.lang.ClassNotFoundException：struts 1.2 中的 org.displaytag.tags.TableTagExtraInfo

> ID：13874276
> 
> 赞同：0
> 
> 时间：2012-12-14T07:14:11.933
> 
> 标签：jsp, struts

```
<%@ taglib uri="/WEB-INF/displaytag.tld" prefix="display" %>
<display:table id="data" name="sessionData.actorList" requestURI="/baseLife_processInsuredPhone.do" decorator="com.mccamish.web.appentry.base_life.displayTable.ActorDecorator" pagesize="6" >
        <display:column property="tvShow" title="TV Show" />
        <display:column property="userName" title="User Name" />
        <display:column property="emailId" title="Email Id" />
    </display:table> 
```

我已经在 J​​SP 中使用此代码来显示表格，但在显示此 JSP 页面之前，我得到了`java.lang.ClassNotFoundException: org.displaytag.tags.TableTagExtraInfo`异常，并且`ERROR ServletException in '/pages/appEntry/baseLife/HUF.jsp': org.displaytag.tags.TableTagExtraInfo org.apache.jasper.JasperException: Failed to load or instantiate TagExtraInfo class: org.displaytag.tags.TableTagExtraInfo` 我已经导入了这个错误，`displaytag-1.2.jar`但我仍然遇到了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:32:58.537

I have included jar files in class path but still don't why that exception was came. Then i have included jar files in WEB-INF/lib folder and my exception is resolved now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T05:30:51.723

确保相同的 jar 文件可用于部署程序集并且具有运行时可用性。

# php - 网络爬虫脚本不适用于日历事件

> ID：13874277
> 
> 赞同：3
> 
> 时间：2012-12-14T07:14:16.823
> 
> 标签：php, web-crawler

我写了一个网络爬虫脚本代码是：：

```
<?php
include_once('simple_html_dom.php');
$target_url = "http://jvlaunchcalendar.com/calendar/";
$html = new simple_html_dom();
$html->load_file($target_url);
$ret = $html->find('div[class=fc-event-inner'); 
//to print the caleder events similar code //works for other sites like flipcat.com
foreach($ret as $post)
{
    echo $post.'<br />';
}
echo $html;// to print the calender of jvlaunchcalendar.com site
?> 
```

此脚本适用于其他站点。[但我想要http://jvlaunchcalendar.com/calendar/](http://jvlaunchcalendar.com/calendar/)页面的所有日历事件，但这个脚本不显示任何事件给空日历。请帮我获取日历的事件。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:10:35.210

当您尝试时，`$html->load_file($target_url);`您会得到没有事件的空白页面，因为事件是用 ajax 加载的。

获取事件的简单解决方案：跟踪 ajax url 调用并加载它，而不是页面。（我检查过，它返回`json`数据，一切正常）。

但这并不好。其他方式 - 在 WordPress 中使用本机日历功能进行操作。

# google-app-engine - 如何将 Google App Engine 集成到现有的 Web 应用程序中？

> ID：13874287
> 
> 赞同：-2
> 
> 时间：2012-12-14T07:15:57.797
> 
> 标签：google-app-engine, web-applications

我是 Google App Engine 的新手，我有一个现有的 Web 应用程序，现在我需要将它与 Google App Engine 集成以达到 [https://developers.google.com/appengine/docs/java/mail/receiving](https://developers.google.com/appengine/docs/java/mail/receiving)的目的，怎么做那？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:59:09.893

一种方法是使用 RPC 服务编写您的 appengine 应用程序

[http://googleappengine.blogspot.com/2011/04/introducing-protorpc-for-writing-app.html](http://googleappengine.blogspot.com/2011/04/introducing-protorpc-for-writing-app.html)

# android - 如何让 TabHost 在每个 Activity 中显示？

> ID：13874291
> 
> 赞同：0
> 
> 时间：2012-12-14T07:16:07.343
> 
> 标签：android, android-tabhost

> **可能重复：**
> [从带有选项卡的其他 Activity 启动 Activity](https://stackoverflow.com/questions/13623350/start-activity-from-an-other-activity-with-tabs)

![在此处输入图像描述](../Images/bfce6376fda3b9587cbd87bc2830e3b3.png)![在此处输入图像描述](../Images/e81274145b487bc2d148717ea18b377a.png)

看下面两张图，我想点击“所有歌曲”图标，然后跳转到播放列表。但我不知道如何使用 TabHost 并在播放列表上显示？如何让 TabHost 在每个 Activity 中显示？

Activity的代码有TabHost：

```
/*package com.lxy.musicplayer.view;

import com.lxy.musicplayer.R;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Window;
import android.widget.TabHost;

public class BuddleTabHostActivity extends TabActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TabHost tab  = getTabHost();
//        LayoutInflater.from(this).inflate(R.layout.tabhost_layout, tab.getTabContentView(),true);

        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.tabhost_layout);

        addIntentActivity(tab, MainActivity.class, "all songs");
        addIntentActivity(tab, MainActivity.class, "Network songs ");
        addIntentActivity(tab, MainActivity.class, "my set");

        tab.setCurrentTab(0);

    }

    private void addIntentActivity(TabHost tab,Class c,String title){
        Intent intent = new Intent();
        intent.setClass(this, c);

        TabHost.TabSpec spec = tab.newTabSpec(title);
        spec.setIndicator(title);
        spec.setContent(intent);
        tab.addTab(spec);

    }

}
*/

package com.lxy.musicplayer.view;

import com.lxy.musicplayer.R;

import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.view.Window;
import android.widget.TabHost;

public class BuddleTabHostActivity extends TabActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.tabhost_layout);
        //get switching object
        TabHost tab=getTabHost();
        addIntentActivity(tab, MainActivity.class,"local");
        addIntentActivity(tab, PlayActivity.class,"favorite");
        addIntentActivity(tab, PlayListActivity.class,"online");
        addIntentActivity(tab, MainActivity.class,"setting");
        //executive tab default
        tab.setCurrentTab(0);
    }

    public void addIntentActivity(TabHost tab,Class<?> c,String str){
        Intent intent=new Intent();
        intent.setClass(this, c);
        //switching object and obtain tab
        TabHost.TabSpec spec=tab.newTabSpec(str);
        //set tab information
        //turn to the page display
        spec.setIndicator(str);
        spec.setContent(intent);
        //add tabs
        tab.addTab(spec);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:22:31.483

有两个选项可用 1.Activity Group 2.Fragment 我更喜欢你 Fragment 因为活动管理器在新版本中被 Fragment 取代。如果您想使用片段，请点击此[链接](https://nodeload.github.com/krishjlk/android-fragments-sample-example-tutorial/zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:24:43.000

请为此编写以下代码，它将解决您的问题。

ActivityStack.java

```
private Stack<String> stack;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (stack == null)
        stack = new Stack<String>();
    // start default activity
    push("FirstStackActivity", new Intent(this, Tab_SampleActivity.class));
}

@Override
public void finishFromChild(Activity child) {
    pop();
}

@Override
public void onBackPressed() {
    pop();
}

public void push(String id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        stack.push(id);
        setContentView(window.getDecorView());
    }
}

public void pop() {
    if (stack.size() == 1)
        finish();
    LocalActivityManager manager = getLocalActivityManager();
    manager.destroyActivity(stack.pop(), true);
    if (stack.size() > 0) {
        Intent lastIntent = manager.getActivity(stack.peek()).getIntent();
        Window newWindow = manager.startActivity(stack.peek(), lastIntent);
        setContentView(newWindow.getDecorView());
    }
} 
```

TabActivity.java

```
public class TabActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_screen);
        TabHost tabHost = getTabHost();
        Intent intent = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.home));
        spec.setContent(intent);

        tabHost.addTab(spec);

        Intent intent1 = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec1 = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.invoice));
        spec1.setContent(intent1);
        tabHost.addTab(spec1);

        tabHost.setCurrentTab(0);
    }
} 
```

第一活动.java

```
public class FirstActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("Tab Sample Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), SecondActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("SecondActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

SecondActivity.java

```
public class SecondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("First Stack Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), ThirdActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("ThirdActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

第三活动.java

```
public class ThirdActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

将以下 XML 文件添加到您的 res/layout 文件夹中。

1) tab_screen.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </RelativeLayout>

</TabHost> 
```

2) main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

AndroidManifest.xml:-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.tabsample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TabActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityStack"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SecondActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ThirdActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有关完整示例的更多信息，请参见下面的链接。

[TabActivity 中的多个 Android 活动](http://androidcodeexamples.blogspot.in/2012/08/multiple-android-activities-in.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T07:38:51.583

您需要创建一个 TabActivityGroup 来实现它。

从继承 TabActivity 的类中，调用下面给出的活动。

```
public class TabActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_screen);
        TabHost tabHost = getTabHost();
        Intent intent = new Intent().setClass(this, InterMediateActivity.class);
        TabHost.TabSpec spec = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.home));
        spec.setContent(intent);

        tabHost.addTab(spec);   

        tabHost.setCurrentTab(0);
    }
}

import android.content.Intent;
import android.os.Bundle;

public class InterMediateActivity extends TabActivityGroup{
    String TabID;
    String TabName;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        filterTabs(TabID);
    }
    private void filterTabs(String TabID)
    {

            Intent intent = new Intent(this, MainActivity.class);                       
            startChildActivity("ContentListing", intent);               

            //TabsUtil.setTabIndicator(specTab,"Wall", null, tabView);

            // TabID
    }

} 
```

从此活动中，您可以调用其他活动，如 filtertabs 函数所示。

# android - 传递图像 url 以创建新的联系人活动 android

> ID：13874292
> 
> 赞同：1
> 
> 时间：2012-12-14T07:16:13.827
> 
> 标签：android, android-contacts

嗨，我正在尝试使用预先填充的数据调用创建联系人表单并能够输入基本详细信息。我可以输入姓名、电子邮件、电话号码，但我无法加载联系人的缩略图。代码的相关部分是：

```
// Creates a new intent for sending to the device's contacts application
        Intent insertIntent = new Intent(ContactsContract.Intents.Insert.ACTION);

        // Sets the MIME type to the one expected by the insertion activity
        insertIntent.setType(ContactsContract.RawContacts.CONTENT_TYPE);

        /**
         * Added this extra for 4.0 device as on save the onActivityResult was
         * not getting invoked rather a new activity was invoked
         **/
        String INTENT_KEY_FINISH_ACTIVITY_ON_SAVE_COMPLETED = "finishActivityOnSaveCompleted";
        insertIntent.putExtra(INTENT_KEY_FINISH_ACTIVITY_ON_SAVE_COMPLETED,
                true);
        // Sets the new contact name
        insertIntent.putExtra(ContactsContract.Intents.Insert.NAME,
                "name");

        insertIntent.putExtra(ContactsContract.Intents.Insert.PHONE,
                (Utility.formatPhoneNumber(mCellNumber)));
        insertIntent.putExtra(ContactsContract.Intents.Insert.PHONE_TYPE,
                Phone.TYPE_MOBILE);
        insertIntent.putExtra(ContactsContract.Intents.Insert.SECONDARY_PHONE,
                (Utility.formatPhoneNumber(mOfficeNumber)));
        insertIntent.putExtra(
                ContactsContract.Intents.Insert.SECONDARY_PHONE_TYPE,
                Phone.TYPE_WORK);

        **insertIntent.putExtra(
                ContactsContract.Intents.ATTACH_IMAGE,getPhotoUrl());**

        // Send out the intent to start the device's contacts app in its add
        // contact activity.
        startActivityForResult(insertIntent,
                REQUEST_CODE_ADD_NEW_CONTACT); 
```

关于如何做到这一点的任何指针。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:45:20.853

我认为使用插入意图是实现这一目标的关键。

您正在使用

```
ContactsContract.Intents.ATTACH_IMAGE 
```

这解释了这一点，

```
Starts an Activity that lets the user pick a contact to attach an image to. After picking the contact it launches the image cropper in face detection mode.

Constant Value: "com.android.contacts.action.ATTACH_IMAGE" 
```

这是一个完整的示例，解释了您要查找的内容。

[使用联系人提供程序以编程方式添加带照片的联系人](http://wptrafficanalyzer.in/blog/programatically-adding-contacts-with-photo-using-contacts-provider-in-android-example/)

# jquery - jquery如何指定改变背景颜色的元素

> ID：13874293
> 
> 赞同：4
> 
> 时间：2012-12-14T07:16:18.413
> 
> 标签：jquery, html, css

我制作了一个简单的网站，其中有幻灯片。

图片幻灯片是自动的，在页面的右侧我有一个带有 6 个按钮的菜单。当我按下“button1”时，会出现“button1”的图片，当我点击“button2”时，会出现“button2”的图片等等。

我想做的事：

当我的幻灯片更改时，6 个按钮之一的背景颜色会发生变化，以表明正在显示的图片与该按钮有关。

例子：

```
Slideshow:
picture1 appears -----> button1 gets background color changed
picture2 appears -----> button2 gets background changed 
etc. 
```

我的代码：

```
$(".showcase-thumbnail-content").removeClass("active, passive"); 
$(".showcase-thumbnail-content").addClass("active"); 
```

这适用于所有按钮的颜色同时改变的问题，而不仅仅是一个。

所有按钮都在`div`with 类中，`showcase-thumbnail-content` 我曾考虑`div`为每个按钮创建一个单独的按钮，但我的主要问题是：

**当幻灯片上显示“picture1”时，如何使只有“button1”的背景颜色发生变化？**

我已经尝试过尽我所能，如果需要更多信息，请询问。

编辑：

由于页面上有很多代码，我不完全知道哪些部分在这里最相关，所以如果有的话1会花时间看看这里：

[http://showcase.awkwardgroup.com/index2.html](http://showcase.awkwardgroup.com/index2.html)

我正在使用演示 2，并进行了自己的修改。

进行了以下更改：

**CSS：**

```
.showcase-thumbnail-content {
    /* padding: 10px;
    text-align: center;
    padding-top: 25px; */

    background: #ededed;
    padding: 5px 15px;
    border: 1px solid #dcdcdc;
    border-radius: 6px;
    color: #777;
    text-decoration: none;
    font: bold 0.8em arial, sans-serif;
    width: 120px;
    font-size: 130%;
    cursor: hand;
    cursor: pointer;
}
            }
.showcase-thumbnail-content:hover {
    color:#F77B0F!Important;
}

.active {
    background: red;
} 
```

**html变化：**

**展示幻灯片：**

```
<div class="showcase-slide">
            <!-- Put the slide content in a div with the class .showcase-content. -->
            <div class="showcase-content">
                <img src="images/01.jpg" alt="01" />
            </div>
            <!-- Put the thumbnail content in a div with the class .showcase-thumbnail -->
            <div class="showcase-thumbnail">
                <!-- <img src="images/01.jpg" alt="01" width="140px" /> -->
                <!-- The div below with the class .showcase-thumbnail-caption contains the thumbnail caption. -->
                <p class="showcase-thumbnail-content">First</p>
                <!-- The div below with the class .showcase-thumbnail-cover is used for the thumbnails active state. -->
                <!-- <div class="showcase-thumbnail-cover"></div> -->
            </div>
            <!-- Put the caption content in a div with the class .showcase-caption -->
            <div class="showcase-caption">
                <h2>Be creative. Get Noticed!</h2>
            </div>
        </div> 
```

// 这对所有六个元素都完成（完全相同）

脚本代码与 demo2 中的相同，但我在上面显示了修改。

如果需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:22:56.977

[小提琴](http://jsfiddle.net/4K4FW/2/)中的例子。jquery脚本示例如下：

```
$(".button").click(function() {
  if ($(this).hasClass('active')==true)
  {
     $(this).removeClass("active"); 
     $(this).addClass("passive"); 
  }
  else
  {
    $(this).addClass("active"); 
    $(this).removeClass("passive"); 
  }
 });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:00:41.197

在朋友的帮助下，我解决了这个问题。

看来我错过了演示中的一些代码。

以下脚本在其中：

```
if (options.thumbnails)
                    {
                        i = 0;
                        showcase.find('.showcase-thumbnail').each(function()
                        {
                            var object = jQuery(this);
                            object.removeClass('active');
                            if (i === current_id) { object.addClass('active'); }
                            i++;
                        });
                    } 
```

在我的css中：

```
showcase-thumbnail.active p
        {
            color: blue;

        } 
```

希望这将在未来对其他人有所帮助！

# android - 使用 `info.position` 查找上下文菜单行视图

> ID：13874294
> 
> 赞同：0
> 
> 时间：2012-12-14T07:16:20.360
> 
> 标签：android, android-listview, contextmenu

我知道通过执行以下操作长按时需要在上下文菜单中找到一行：

```
 AdapterContextMenuInfo info = (AdapterContextMenuInfo) menuInfo;
        int position = info.position; 
```

在`onCreateContextMenu`

我怎样才能在这里实现它？我似乎只抓住了这个设置中的前两个。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {

    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.comments_context, menu);
    menu.setHeaderTitle("Available Actions");

    MenuItem Edit = menu.findItem(R.id.editComment);
    MenuItem Delete = menu.findItem(R.id.deleteComment);

    ReviewUser = ((TextView) v
            .findViewById(R.id.labelReviewCommentUser)).getText()
            .toString();

    ReviewComment = ((TextView) v
            .findViewById(R.id.labelReviewComment)).getText()
            .toString();

} 
```

我希望`ReviewUser`并`ReviewComment`根据用户单击的列表行被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:15:11.910

> 我怎样才能在这里实现它？我似乎只抓住了这个设置中的前两个。

`v`表示`View`为其构建上下文菜单的对象，在这种情况下，`ListView`不是您执行操作的行视图。你可能想要这样的东西：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.comments_context, menu);
    menu.setHeaderTitle("Available Actions");

    MenuItem Edit = menu.findItem(R.id.editComment);
    MenuItem Delete = menu.findItem(R.id.deleteComment);
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) menuInfo;
    int position = info.position;
    ListView lv = (ListView) v;
    int firstVisible = lv.getFirstVisiblePosition();
    View rowView = lv.getChildAt(position - firstVisible);
    ReviewUser = ((TextView) rowView.findViewById(R.id.labelReviewCommentUser))
            .getText().toString();
    ReviewComment = ((TextView) rowView.findViewById(R.id.labelReviewComment))
            .getText().toString();
} 
```

# asp.net-mvc - “无法打开数据库文件”（警告：宽错误）

> ID：13874295
> 
> 赞同：2
> 
> 时间：2012-12-14T07:16:28.477
> 
> 标签：asp.net-mvc, sqlite, asp.net-mvc-4, iis-7.5, system.data.sqlite

除了 IIS 上的“无法打开数据库文件”之外，我似乎无法从 SQLite 中得到任何东西。我确信 SQLite 的错误信息和 Oracle 的一样粗暴。

*   在 Visual Studio 2010/IIS Express 中预部署我可以读取和写入文件。
*   当我尝试使用部署到 IIS7.5 的同一个 VS2010 项目读取/写入它时，所有“创建”、“读取”和“写入”命令都失败了。
*   当我通过项目部署数据库文件并尝试读取它时，也会发生同样的情况。
*   我已将`Full control`App_Data 和数据库文件的访问权限授予以下用户：`IIS_IUSRS`、`IUSRS`、`DefaultAppPool`和`Everyone`.

我看过： [SQLite 问题“无法打开数据库文件”](https://stackoverflow.com/questions/7327460/sqlite-problem-unable-to-open-the-database-file)（该问题自动为用户消失）和许多其他类似问题，其中大部分通过更改权限解决，更改为可写目录（App_Data应该是可写的，不是吗？）或将相对路径更改为绝对路径（`|DataDirectory|`应该解析为）。

```
<connectionStrings>
    <add name="sqlite" connectionString="Data Source=|DataDirectory|\datatables.sqlite;Version=3;" />
</connectionStrings> 
```

我错过了什么吗？

```
<Error>
<Message>An error has occurred.</Message>
<ExceptionMessage>Unable to open the database file</ExceptionMessage>
<ExceptionType>System.Data.SQLite.SQLiteException</ExceptionType>
<StackTrace>
at System.Data.SQLite.SQLite3.Open(String strFilename, SQLiteConnectionFlags connectionFlags, SQLiteOpenFlagsEnum openFlags, Int32 maxPoolSize, Boolean usePool) at System.Data.SQLite.SQLiteConnection.Open() at AjaxSource.Models.Database.query(String sql, Dictionary`2 parameters) in D:\Tools\Dropbox\Projects\myprojects\AjaxSource\AjaxSource\Models\Database.cs:line 48 at AjaxSource.Models.aaDataModel..ctor() in D:\Tools\Dropbox\Projects\myprojects\AjaxSource\AjaxSource\Models\aaDataModel.cs:line 18 at AjaxSource.Controllers.API.TableDataController.Get() in D:\Tools\Dropbox\Projects\myprojects\AjaxSource\AjaxSource\Controllers\API\TableDataController.cs:line 15 at lambda_method(Closure , Object , Object[] ) at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters) at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments) at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
</StackTrace>
</Error> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-06T15:33:03.310

我在 IIS 中打开 Sqlite 数据库时遇到问题

> (0x80004005): 无法打开数据库文件 无法打开数据库文件

帮助我解决问题的是将应用程序池的“身份”更改为“本地系统”

应用程序池 -> DefaultAppPool（或您正在使用的其他池）-> 高级设置 -> 身份 -> LocalSystem

希望它会节省一些人的时间......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-22T05:56:08.180

我们以前在客户的机器上经常遇到这个问题，我对此做了很多调查，最后我们解决了。

首先，您需要确保您的应用程序具有对数据库文件以及包含数据库文件的文件夹的读/写访问权限。在大多数情况下，检查将解决问题；但我们不在这些幸运儿之列。

在我们的例子中，应用程序对数据库进行了非常高的并发访问，这很可能与数据库的日志模式有关，默认情况下通常是 DELETE。也就是说，一旦相应的事务提交或回滚，回滚日志就会被删除。在 **nix 系统上，没有错误；但在 Windows 系统上，这是另一回事，如下所示。在 Windows 系统上，问题可能发生在以下情况：

1.  日志文件（比如 A）由 SQLite 线程创建。
2.  另一个线程 P 试图打开 A。
3.  SQLite 已完成其事务，因此删除了日志文件 A。
4.  但是现在线程 P 有了 A 的句柄，所以 SQLite 进入了“Delete Pending”状态。
5.  SQLite 启动另一个事务并且必须重新创建日志文件（具有相同的名称）。
6.  Windows 报告 ERROR_DELETE_PENDING 错误（有关详细信息，请参阅此处：http: [//blogs.msdn.com/b/oldnewthing/archive/2007/11/09/6001644.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2007/11/09/6001644.aspx)）
7.  SQLite 报 SQLITE_CANTOPEN 错误（即“无法打开数据库文件”）。
8.  P最终释放文件句柄，A被删除。

一种解决方案是使用 PERSIST 或 TRUNCATE 日志模式而不是 DELETE。有关详细信息，请参见此处：[http ://www.sqlite.org/pragma.html#pragma_journal_mode](http://www.sqlite.org/pragma.html#pragma_journal_mode)

这样回滚日志（.-journal）就完全没有被删除，就可以解决你说的问题了。我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-17T11:38:30.893

好吧，我不知道这是否会回答您的问题，但就我而言，我遇到了一个虚拟错误，即当我将代码从命令行项目复制到 mvc 时，我给数据库文件提供了错误的 relatif URL。希望有人会发现这很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-08T17:27:10.347

这不是权限问题。问题是我没有像预期的那样检查`|DataDirectory|`实际解析为 AppData 目录。

在 IIS 7.5 服务器上，`|DataDirectory|`解析为`C:\inetpub\wwwroot\AjaxSource\App_Data`，但实际的 AppData 目录为`C:\inetpub\wwwroot\AjaxSource\bin\App_Data`.

我使用 Fiddler 捕获的错误从未提及任何路径，但暗示了权限问题。我有一个视图显示已解决的目录：

```
<h1>@AppDomain.CurrentDomain.GetData("DataDirectory")</h1> 
```

（奇怪的是，这[没有记录在案](http://msdn.microsoft.com/en-us/library/system.appdomain.getdata%28v=vs.100%29.aspx)）。

# javascript - 如何使用 JSON 在 jquery 控件中设置类型函数的属性？

> ID：13874296
> 
> 赞同：0
> 
> 时间：2012-12-14T07:16:38.983
> 
> 标签：javascript, jquery, asp.net, json, custom-controls

我有一个 jquery datepicker 控件。我想使用它来创建一个自定义的 ASP.net 控件。JQuery datepicker 有一个属性 beforeShow。该属性是函数类型。在 ASP.Net cotrol 中，我试图通过 JSonItem 使用字符串类型设置函数，如下所示：

```
StringBuilder strFunction = new StringBuilder();
            strFunction.AppendLine(@"function (input) { ");
            strFunction.AppendLine(@" setTimeout(function () { ");
            strFunction.Append(@" var buttonPane = $(""#" + ClientID);
            strFunction.Append(@""")");
            strFunction.AppendLine(@".datepicker(""widget"").find("".ui-datepicker-close"").click(function () {");
            strFunction.Append(@" $.datepicker.clearDate($(""#" + ClientID );
            strFunction.AppendLine(@"""));");
            strFunction.AppendLine(@" });");
            strFunction.AppendLine(@" }, 1);");
            strFunction.AppendLine("}"); 

textInput.Call("datepicker", Js.Json(
                Js.JsonItem("onSelect", Js.Function(delegate {
                    if (ValueSelected != null) {
                        var request = CreateMethodInvocationRequest("OnSelect");
                        request.Send();
                    }
                })
            ),
//This is the function type of property

Js.JsonItem("beforeShow",strFunction.ToString())

)); 
```

在这里，但我没有得到结果。抛出运行时 JScript 错误。如果我没有设置 beforeShow 属性，那么一切正常。但我需要这个属性。任何人都可以建议其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:57:54.367

根据您的需要使用以下选项而不是 beforeShow，

**渲染前渲染后渲染**

我们不能使用 beforeShow，因为它只有在与 show 方法一起使用时才会触发..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:20:27.670

我使用一个函数解决了这个问题，该函数返回将字符串解析为 JSExpression。

```
Js.JsonItem("beforeShow",strFunction.ToString()) 
```

# delphi - 为什么在 EnumProcesses 中参数 aProcesses 设置为 1024？

> ID：13874298
> 
> 赞同：2
> 
> 时间：2012-12-14T07:16:41.410
> 
> 标签：delphi, process, window

我使用 EnumProcesses 来获取进程，我只是发现所有示例集 aProcesses 等于 1024 或 1024*2

[delphi] 代码如下：

```
uses PsAPI;

var
  cbNeeded : DWORD;
  aProcesses : array[0..1024] of DWORD;
begin

  EnumProcesses(@aProcesses, sizeof(aProcesses), &cbNeeded);
  //use PID do something

end; 
```

所以我的问题是为什么将 aProcesses 设置为 1024，1024 是最大进程数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:20:27.957

假设 PsAPI 使用的是同名的 Win32 方法（[`EnumProcesses`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629%28v=vs.85%29.aspx)在 MSDN 中），1024 是尝试使用大于机器上一次运行的进程数的数字。如果您查看链接功能的备注，您会看到它说：

> 要确定枚举了多少进程，请将 pBytesReturned 值除以 sizeof(DWORD)。当缓冲区太小而无法存储所有进程标识符时，没有给出指示。因此，如果 pBytesReturned 等于 cb，请考虑使用更大的数组重试调用。

# mysql - MySQL：超过最大深度的外键约束

> ID：13874300
> 
> 赞同：12
> 
> 时间：2012-12-14T07:16:51.870
> 
> 标签：mysql, foreign-keys, sql-delete, cascading-deletes

我已经`MySQL Server 5.1.62`安装在生产服务器上。我每天都在监控 mysql 服务器的错误日志文件，突然我在错误日志文件中发现了以下错误。

> InnoDB：无法删除/更新具有超过最大深度 250 的级联外键约束的行
> 请删除过多的外键并重试

我有一个带有**主键的数据库结构 - 具有适当更新/删除操作的外键**关系，如果父表中的数据被应用程序或手动（后端）删除，我需要删除子表的数据。

我已经用谷歌搜索了这个问题，但我找不到合适的解决方案。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T18:01:35.413

模式的图片不是很有用，因为它没有显示任何级联声明。例如，如果删除应该从 tbl_indentmaster 级联到 tbl_tepdetails，但删除*不*应该从 tbl_tepdetails 级联到 tbl_tepnoting，那么我预计某些删除会失败。（但有不同的错误消息。）

如果存在导致这种*情况*的循环引用约束，我希望它部分是由从 tbl_indentmaster 到 tbl_tepdetails 的级联引用引起的。您可能想尝试删除该外键约束以进行测试。在 tset sserver 上执行此操作，而不是在生产服务器上。

如果这突然开始，并且您的数据库之前正常工作，我会首先考虑

*   从备份中恢复数据库，或
*   从备份中恢复模式，并重新加载当前数据，或者
*   检查当前版本并重建数据库。（你确实有[版本控制下的数据库模式](http://www.codinghorror.com/blog/2008/02/get-your-database-under-version-control.html)，不是吗？）

我假设您没有良好的备份，并且您的架构不受版本控制。

你是从一个好的数据库开始的吗？运行[mysqlcheck](http://dev.mysql.com/doc/refman/5.1/en/mysqlcheck.html)。仔细阅读该文档。`--repair`在您拥有经过测试的良好备份之前不要这样做。

假设你的数据库很好，级联删除*应该*在你的数据库中正常工作，并且你的谷歌技能很好，我认为你最好的*开始*是

*   在测试服务器上安装 MySQL 5.5 或 5.6，
*   将您的数据库加载到该测试服务器上，然后
*   看看您是否可以重现该特定错误。

要将数据库加载到测试服务器上，请使用[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)转储内容。不要在文件系统级别复制文件——其中一个或多个可能已损坏。

虽然这*可能*无法解决您的问题，但它*可能会*告诉您问题的确切位置。如果它工作正常，您就知道问题可能与服务器版本有关，并且可以通过版本升级来解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T07:22:41.280

看看这个链接 -[级联删除导致 "Got error -1 from storage engine"](http://bugs.mysql.com/bug.php?id=57255)。有一个建议。

此外，作为一种解决方案，您可以尝试在没有*ON DELETE CASCADE*选项的情况下执行此操作，只需使用从某些表中删除记录的[DELETE语句（](http://dev.mysql.com/doc/refman/5.5/en/delete.html)*多表语法*）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:59:47.050

我同意@Devart 和@Catcall 的原始答案，但我想在与 OP 交换一些评论后添加一些内容。

`DELETE`首先，我将模式图像表示减少为仅受`tbl_indentmaster`.

据我所知，此架构图中*没有*循环 FK 引用。

此外，OP 运行了以下查询：

```
DELETE FROM tbl_indentmaster WHERE indentId IN (1,2,3,4,5,6,...,150,151,155,156,....) 
```

要删除的行太多了。在进一步询问时，OP 声称该查询适用于`indentId`'s 的较小子集。

由此我认为我们可以采取两种可能性：

1.  MySQL 中有一个错误（极不可能但可能），它会导致`CASCADE DELETE`像您这样的大型查询失败。请注意，我建议可能存在一个*新*错误，*而不是*[已发布][2]。理想情况下，要删除的行数应该*无关紧要*。
2.  有一个特定`indentId`条目`tbl_indentmaster`导致整个查询失败。

我建议您首先尝试诊断问题，考虑到第 (2) 点是真正的罪魁祸首。您可以将`DELETE`查询分成更小的块并找到有问题的 id。

如果此脚本必须通过代码定期执行（在较大的应用程序中），那么您应该考虑在那里以较小的块执行查询（可能每个查询 15 个 id 是一个好的开始 IMO）。除了这样做之外，我还建议在日志文件中记录带有违规 id 的错误，以便您确切知道哪些条目失败了。

# vb.net - 如何更新库存数量

> ID：13874302
> 
> 赞同：0
> 
> 时间：2012-12-14T07:17:07.247
> 
> 标签：vb.net, ms-access

**VB.NET**

好吧，我使用 Access 作为包含五个表的数据库，即。供应商、采购订单、客户、销售订单、库存。

供应商：供应商 ID（PK）、姓名、联系人、电话、地址。

PurOrder：POID（PK），项目，数量，费率，总计

客户：CustID(PK)、姓名、电话、地址

SalesOrder: SOID(PK), Items, Quantity, Rate, Total

Stock: SItemID(PK), Items, Quantity, Rate, Total 我在 VB.NET Express 中使用数据库向导。我不需要为此编写代码。我单击数据源 > 添加数据库 > 将其拖到我的采购和销售表单中，它会自动创建添加、删除和保存以及导航按钮作为工具条。此外，我将采购订单表（例如）拖到 Datagrid 模式下的表单中，就是这样！现在，我可以将记录保存、删除和添加到我的数据库作为购买。

好吧，我可以输入和保存/更新采购和销售凭证，并检索客户/供应商 ID 报告并打印出来。

我唯一的问题是我不知道要在购买或销售时自动更新袜子数量该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:19:48.560

在许多其他主流数据库软件中，它们都支持Trigger，从而达到您的目的（自动更新购买计数）。考虑使用其他数据库软件，因为 MS Access 的性能不是很好。

要回答您的问题，您必须执行额外的查询来更新值。

# sql - 合并不同字段的数据

> ID：13874313
> 
> 赞同：0
> 
> 时间：2012-12-14T07:18:35.933
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [将行值合并到 CSV（又名 GROUP_CONCAT 用于 SQL Server）](https://stackoverflow.com/questions/7755815/merge-row-values-into-a-csv-a-k-a-group-concat-for-sql-server)

基本上有一些相同的数据具有一些不同的字段。我们的客户想要合并这种数据。我已经在下面展示了。

```
season_id | service_id | service_name | product_line | service_date
10-12/11  | PIM0768    | Hilton NYC   | H            | 2012-03-02
10-12/11  | PIM0954    | Hilton NYC   | AB1          | 2012-03-02 

season_id | service_id         | service_name | product_line | service_date
10-12/11  | PIM0768,PIM0954    | Hilton NYC   | H,AB1        | 2012-03-02 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:33:25.357

```
CREATE TABLE #tmp (season_id varchar(10), service_id Varchar(10), service_name varchar(30), product_line varchar(10), service_date datetime)

INSERT INTO #tmp  VALUES ('10-12/11','PIM0768','Hilton NYC','H','20120302')
INSERT INTO #tmp  VALUES ('10-12/11','PIM0954','Hilton NYC','ABC','20120302')

SELECT 
  season_id,
  cast(
  STUFF((
    SELECT ', '  +  service_id 
    FROM #tmp 
    WHERE (season_id = Results.season_id) 
    FOR XML PATH (''))
  ,1,2,'')as Varchar(max)) AS service_id
  ,service_name
  ,Cast(STUFF((
    SELECT ', ' + product_line
    FROM #tmp 
    WHERE (season_id = Results.season_id) 
    FOR XML PATH (''))
  ,1,2,'')as Varchar(max)) AS product_line
  ,service_date  
FROM #tmp Results
GROUP BY season_id,service_name,service_date

Drop table #tmp 
```

# c# - 如何在 WP8 上突出显示 LongListSelector 中的选定项目？

> ID：13874314
> 
> 赞同：8
> 
> 时间：2012-12-14T07:18:38.747
> 
> 标签：c#, xaml, windows-phone-8

如何在 Windows Phone 8 上突出显示新 LongListSelector 中的选定项目？如果我点击列表中的一个条目，实际上什么也没发生。我的列表只包含一个简单的字符串，它将通过 TextBlock 显示。但我想强调用户的选择。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T07:25:46.513

在我的例子中，我使用了一个`RadioButton`控件`DataTemplate`来`LongListSelectorItem`实现这一点。您将在左边框有一个已检查或未检查的标志。

在任何情况下，为所有单选按钮设置相同的组是很重要的，因此选择仅代表一个条目。

在`Content`或 你的里面`RadioButton`你可以把`TextBlock`绑定到`String`.

我目前不在家，但如果这不能解决您的问题，我会在我在家时为您提供一些代码；）

干得好：

```
<LongListSelector.ItemTemplate>
    <DataTemplate>
        <ContentControl HorizontalAlignment="Stretch" HorizontalContentAlignment="Left">
            <RadioButton HorizontalAlignment="Stretch" Margin="0,0,0,0" GroupName="A" Background="Black" >
                <StackPanel toolkit:TiltEffect.IsTiltEnabled="True">
                    <TextBlock Text="{Binding Path=XXX}" 
                               TextWrapping="Wrap"
                               Foreground="Black" 
                               Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                    <TextBlock Text="{Binding Path=XXXX}" 
                               TextWrapping="Wrap" 
                               Foreground="Black" 
                               Margin="14,-6,0,0" 
                               Style="{StaticResource PhoneTextSubtleStyle}"/>
                </StackPanel>
            </RadioButton>
        </ContentControl>
    </DataTemplate>
</LongListSelector.ItemTemplate> 
```

# html - 在单独的 div 中添加每个半 xml 子节点

> ID：13874318
> 
> 赞同：0
> 
> 时间：2012-12-14T07:19:00.650
> 
> 标签：html, xml, xslt

我有一个xml：

```
<sitemapnode>
<node id="1"/>
<node id="2"/>
<node id="3"/>
<node id="4"/>
<node id="5"/>
<node id="6"/>
<node id="7"/>
<node id="8"/>
</sitemapnode> 
```

我想把它转换成一个看起来像这样的html；

```
<div>
 <ul>
   <li>1</li>
   <li>2</li>
   <li>3</li>
   <li>4</li>
 </ul>
</div>
<div>
 <ul>
   <li>5</li>
   <li>6</li>
   <li>7</li>
   <li>8</li>
 </ul>
</div> 
```

如何遍历所有节点并分别为它们的每一半提供 div 和 uls？此外，如果节点数为奇数，则可以在前半部分节点数减半后进行上限。自 3 天以来，我一直在努力解决这个问题。并且还没有找到任何解决方案。求求求帮助...

这是实际的代码：

```
<xsl:template match="/">
<div>
<!-- The menu starts here. -->
    <ul class="nav" id="main-nav">
        <!-- Looping the sitemap nodes. -->
        <xsl:for-each select="siteMap/siteMapNode/siteMapNode">
            <!-- checking if the node is visible on top nav or not. -->     
            <xsl:if test="@isVisibleInTopnav = 'true'">
                <!-- Creating the L1 navigation. -->
                <li class="drop">
                    <a class="top_link">
                        <xsl:attribute name="href">
                            <xsl:value-of select="@url"/>
                        </xsl:attribute>
                        <span>
                            <xsl:value-of select="@topNavTitle"/>
                        </span>                 
                    </a>
                    <!-- Creating the L2 navigation, L3 navigations..... -->
                    <div class="nav-sub">
                        <div class="inner">
                            <xsl:call-template name="nested_levels">    
                            </xsl:call-template>
                        </div>
                    </div>
                </li>
            </xsl:if>
        </xsl:for-each>
    </ul>
</div>

</xsl:template>

<xsl:template name="nested_levels">
    <xsl:param name="nodeCount" select="count(siteMapNode)"/>
    <xsl:variable name="columns" select="ceiling($nodeCount div 2)"/>
    <xsl:if test="count(siteMapNode) > 0">
                    <xsl:for-each select="siteMapNode">
                            <xsl:if test="ceiling((position() - 1) div $columns) = (position() - 1) div $columns">  
                                <div class="row mod">
                                    <xsl:apply-templates select="self::node|following-sibling::node[position() &lt; $columns]" mode="list" />
                                </div>
                            </xsl:if>
                    </xsl:for-each>     
    </xsl:if>
 </xsl:template>

 <xsl:template match="node" mode="list">
        <div>   <span class="h1">                       
                                    <a>
                                        <xsl:attribute name="href">
                                            <xsl:value-of select="@url"/>
                                        </xsl:attribute>
                                        <xsl:value-of select="@topNavTitle"/>                               
                                    </a>
                                        </span>

        </div>
 </xsl:template> 
```

这是示例 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<siteMap>
    <siteMapNode url="/" isVisibleInTopnav="" isVisibleInRightnav="" isVisibleInSitemap="" topNavTitle="" rightNavTitle="" hasBlueBackground="" showChildNav="" locatorKey="">
        <siteMapNode url="/a/" isVisibleInTopnav="true" isVisibleInRightnav="false" isVisibleInSitemap="true" topNavTitle="Personal Banking" rightNavTitle="" hasBlueBackground="false" showChildNav="false" locatorKey="">
            <siteMapNode url="/a/b/" isVisibleInTopnav="true" isVisibleInRightnav="true" isVisibleInSitemap="true" topNavTitle="Checking" rightNavTitle="Checking Accounts" hasBlueBackground="false" showChildNav="false" locatorKey="">
                <siteMapNode url="/a/b/c/" isVisibleInTopnav="true" isVisibleInRightnav="true" isVisibleInSitemap="false" topNavTitle="Checking Accounts" rightNavTitle="Compare Checking Accounts" hasBlueBackground="false" showChildNav="false" locatorKey="" />
            </siteMapNode>
        </siteMapNode>
    </siteMapNode>
</siteMap> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:12:24.393

您不应该考虑迭代所有节点。您应该采取的方法是首先获得一半数字的计数，然后获得位于第 1 和第 5（或任何一半）位置的节点。

首先要获得一半节点的计数，您将创建一个变量

```
<xsl:variable name="number" select="ceiling(count(/*/node) div 2)" /> 
```

然后为了获得相关的起始**节点**元素，你会这样做

```
<xsl:apply-templates select="node[position() mod $number = 1]" /> 
```

然后，在这个模板中，你输出你的**ul**元素，然后输出当前元素和以下三个元素，如下所示：

```
<xsl:apply-templates 
     select="self::node|following-sibling::node[position() &lt; $number]" 
     mode="list" /> 
```

这将寻找两个节点的联合。**self::node**将匹配当前节点，**following-sibling::node[position() < $number]**匹配接下来的 3 个兄弟节点。请注意，在这种情况下，**位置**是相对于当前元素的。

注意**mode**的使用，否则你将有两个模板匹配**节点**元素，所以你需要一种方法来区分它们。如果没有**mode**元素和该模式的不同模板，**self::node**匹配将导致无限递归。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:variable name="number" select="ceiling(count(/*/node) div 2)" />

    <xsl:template match="/*">
        <div>
            <xsl:apply-templates select="node[position() mod $number = 1]" />
        </div>
    </xsl:template>

    <xsl:template match="node">
        <ul>
            <xsl:apply-templates select="self::node|following-sibling::node[position() &lt; $number]" mode="list" />
        </ul>
    </xsl:template>

    <xsl:template match="node" mode="list">
        <li><xsl:value-of select="@id" /></li>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<div>
   <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
   </ul>
   <ul>
      <li>5</li>
      <li>6</li>
      <li>7</li>
      <li>8</li>
   </ul>
</div> 
```

# c# - 在 C# 中解析 JSON 数据

> ID：13874322
> 
> 赞同：0
> 
> 时间：2012-12-14T07:19:10.333
> 
> 标签：c#, json

我有一个JSON数据如下

```
 {"id": "367501354973","from": {
  "name": "Bret Taylor",
  "id": "220439"   } 
```

由 IDictionary[String, Object] 的对象（结果）返回

***在我的 C# 代码中：***

我制作了一个**用于存储 JSON 值的类，**如下所示

```
public class SContent
{
    public string id { get; set; }
    public string from_name { get; set; }
    public string from_id { get; set; }
} 
```

**我的主要 C# 函数存储解析 JSON 数据并将值存储在类属性**中，如下所示：

```
List<object> data = (List<object>)result["data"];
            foreach (IDictionary<string, object> content in data)
            {
                SContent s = new SContent();

                    s.id = (string)content["id"];
                    s.from_name = (string)content["from.name"];
                    s.from_id = (string)content["from.id"];

            } 
```

*当我执行这段代码时，我得到一个异常说**系统找不到密钥“from.name”和“from.id”***

当我**评论**这两行时 (s.from_name = (string)content["from.name"];s.from_id = (string)content["from.id"];)**我的代码运行良好。**

**我认为我无法正确引用嵌套的 JSON 数据。**

**任何人都可以验证它，请告诉我如何在 C# 中引用 JSON 中的嵌套数据？**

**谢谢**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T07:53:16.450

我不确定您是如何解析 JSON 字符串的。您是否使用框架中的类进行反序列化？

您可以使用命名空间`JavaScriptSerializer`中定义的类`System.Web.Script.Serialization`（您可能需要添加对 System.Web.dll 的引用）

使用该类，您将编写如下代码：

```
public class SContent
{
    public string id { get; set; }
    public SFrom from { get; set; }
}

public class SFrom 
{
    public string name { get; set; }
    public string id { get; set; }
} 
```

然后反序列化看起来像这样：

```
var json = new JavaScriptSerializer();
var result = json.Deserialize<SContent>(/*...json text or stream...*/); 
```

请参阅MSDN 上的[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)。您可能还想查看[这个类似的问题](https://stackoverflow.com/questions/4109807/parsing-json-data-with-c-sharp?rq=1)。

# android - 我们如何在android中使用带有图像的自定义进度条

> ID：13874323
> 
> 赞同：1
> 
> 时间：2012-12-14T07:19:11.177
> 
> 标签：android, progress-bar

> **可能重复：**
> [Android 中的自定义进度条？](https://stackoverflow.com/questions/4581812/custom-progress-bar-in-android)

![在此处输入图像描述](../Images/c6989fc8d3d42ce54833bb348d0f3948.png)

我们如何使用带有进度条的图像，就像用红色矩形标记的桶图像一样。请为我提供一些自定义进度条的代码并在其中使用图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:08:52.690

如果你想设置随着进度移动的`thumb`图像，`progressBar`那么你可以像这样`seekBar`定义图像`thumb`

```
 <SeekBar
            android:id="@+id/seekBar1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:progress="50"
            android:thumb="@drawable/icon"
             /> 
```

# windows - 什么是装载机锁？

> ID：13874324
> 
> 赞同：6
> 
> 时间：2012-12-14T07:19:18.660
> 
> 标签：windows, multithreading, locking, deadlock

我正在处理线程并且有一个潜在的死锁问题。有人向我提到了装载机锁。

我在网上找不到太多信息。有人可以帮我解释一下，“什么是**装载机锁**”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T07:49:32.990

例如，查看这个问题：

[加载程序锁定错误](https://stackoverflow.com/questions/56642/loader-lock-error#56653)

> 加载器锁的一般思想：系统在`DllMain`锁内运行代码（如同步锁）。因此，在里面运行非平凡的代码`DllMain`是“要求死锁”

我提到的答案基于这篇文章：

[另一个不做任何可怕事情的原因`DllMain`：无意的僵局](https://devblogs.microsoft.com/oldnewthing/20040128-00/?p=40853)

> 您的 DllMain 函数在加载程序锁内运行，这是操作系统允许您在持有其内部锁之一的同时运行代码的少数情况之一。这意味着您必须格外小心，不要违反 ; 中的锁层次结构`DllMain`。否则，您要求陷入僵局。
> 
> 任何需要访问加载到进程中的 DLL 列表的函数都会使用加载器锁。这包括 和 之类的`GetModuleHandle`功能`GetModuleFileName`。如果您`DllMain`进入临界区或等待同步对象，并且该临界区或同步对象由某些代码拥有，而这些代码又在等待加载程序锁，则您只是创建了一个死锁：

```
// global variable
CRITICAL_SECTION g_csGlobal;

// some code somewhere
EnterCriticalSection(&g_csGlobal);
... GetModuleFileName(MyInstance, ..);
LeaveCriticalSection(&g_csGlobal);

BOOL WINAPI
DllMain(HINSTANCE hinstDLL, DWORD fdwReason,
        LPVOID lpvReserved)
{
  switch (fdwReason) {
  ...
  case DLL_THREAD_DETACH:
   EnterCriticalSection(&g_csGlobal);
   ...
  }
  ...
} 
```

请查看整篇文章以获得完整的理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-19T23:23:43.973

Loader 是指操作系统（模块）[加载器](https://en.wikipedia.org/wiki/Loader_(computing))。加载程序锁是加载程序用来同步调用[DllMain](https://docs.microsoft.com/en-us/windows/win32/dlls/dllmain)的系统锁。这样，加载程序确保 DLL 所需的初始化/清理任务以线程安全的方式执行。

该系统锁用于静态初始化、静态销毁和线程创建。它也由各种 Win32 API 共享。

[防止 Windows 应用程序挂起](https://docs.microsoft.com/en-us/windows/win32/win7appqual/preventing-hangs-in-windows-applications)

> (...) 操作系统有自己的内部进程特定的锁，有时会在您的代码执行时持有该锁。此锁在 DLL 加载到进程中时获得，因此称为“加载器锁”。DllMain 函数总是在加载程序锁下执行；(...)

> 调用某些 Win32 API 也可能代表您获取加载程序锁 - 函数如 LoadLibraryEx、GetModuleHandle，尤其是 CoCreateInstance

# dns - 多个子域具有相同 IP 的一个域

> ID：13874325
> 
> 赞同：-1
> 
> 时间：2012-12-14T07:19:19.117
> 
> 标签：dns, subdomain, bind

我有很多这样的子域：sub1.domain.dev, sub2.domain.dev ..., subn.domain.dev 我希望所有子域都转到一个 ip。

我认为，nedd 使用“绑定” dns，它是解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:50:36.103

`domain.dev`在区域文件中使用通配符条目：

```
* IN A 1.2.3.4 
```

这将为区域文件中未明确显示的所有名称设置 IP。

# mysql - 是否可以在 txt 文件中记录我过去一小时运行的 mysql 查询？

> ID：13874329
> 
> 赞同：0
> 
> 时间：2012-12-14T07:19:44.137
> 
> 标签：mysql, logging, xampp

我正在使用 mysql-xampp！！

我基本上想监视一个小时的所有查询，并将日志转储到文件中。

如何将我在过去一小时内输入的查询记录到文本文件中？

可能吗？

粘贴过去一小时使用过的查询。

```
SHOW CREATE TABLE `hr_test`.`auction`;
SHOW CREATE TABLE `hr_test`.`auction_log`;
SHOW CREATE TABLE `hr_test`.`error_log`;
SELECT  `timestamp`,  `username`,  `instance`,  `database_name`,  `error_stack` FROM `hr_test`.`error_log` LIMIT 1000;
SHOW CREATE TABLE `hr_test`.`error_log`;
SELECT `DEFAULT_COLLATION_NAME` FROM `information_schema`.`SCHEMATA` WHERE `SCHEMA_NAME`='information_schema';
SHOW TABLE STATUS FROM `information_schema`;
SHOW FUNCTION STATUS WHERE `Db`='information_schema';
SHOW PROCEDURE STATUS WHERE `Db`='information_schema';
SHOW TRIGGERS FROM `information_schema`;
SHOW EVENTS FROM `information_schema`;
SELECT `DEFAULT_COLLATION_NAME` FROM `information_schema`.`SCHEMATA` WHERE `SCHEMA_NAME`='performance_schema';
SHOW TABLE STATUS FROM `performance_schema`;
SHOW FUNCTION STATUS WHERE `Db`='performance_schema';
SHOW PROCEDURE STATUS WHERE `Db`='performance_schema';
SHOW TRIGGERS FROM `performance_schema`;
SHOW EVENTS FROM `performance_schema`;
/* SQL Error (1044): Access denied for user 'pma'@'192.168.1.69' to database 'performance_schema' */
SELECT `DEFAULT_COLLATION_NAME` FROM `information_schema`.`SCHEMATA` WHERE `SCHEMA_NAME`='phpmyadmin';
SHOW TABLE STATUS FROM `phpmyadmin`;
SHOW FUNCTION STATUS WHERE `Db`='phpmyadmin';
SHOW PROCEDURE STATUS WHERE `Db`='phpmyadmin';
SHOW TRIGGERS FROM `phpmyadmin`;
SHOW EVENTS FROM `phpmyadmin`;
USE `phpmyadmin`;
SHOW CREATE TABLE `phpmyadmin`.`pma_tracking`;
SELECT  `db_name`,  `table_name`,  `version`,  `date_created`,  `date_updated`,  LEFT(`schema_snapshot`, 256),  LEFT(`schema_sql`, 256),  LEFT(`data_sql`, 256),  `tracking`,  `tracking_active` FROM `phpmyadmin`.`pma_tracking` LIMIT 1000;
SHOW CREATE TABLE `phpmyadmin`.`pma_tracking`;
SELECT `DEFAULT_COLLATION_NAME` FROM `information_schema`.`SCHEMATA` WHERE `SCHEMA_NAME`='system_audit';
SHOW TABLE STATUS FROM `system_audit`;
SHOW FUNCTION STATUS WHERE `Db`='system_audit';
SHOW PROCEDURE STATUS WHERE `Db`='system_audit';
SHOW TRIGGERS FROM `system_audit`;
SHOW EVENTS FROM `system_audit`;
USE `system_audit`;
SHOW CREATE TABLE `system_audit`.`systeminformation`;
SELECT  `Machine_Name`,  `Serial_Number`,  `System_Manufacturer`,  `System_Model`,  `Motherboard_Manufacturer`,  `Motherboard_Model`,  `Chassis_Type`,  `System_Type`,  `Physical_Memory`,  `RAM_Capacity`,  `RAM_Slots`,  `BIOS_Description`,  `BIOS_Date`,  `CENTRAL PROCESSING UNIT (CPU)`,  `CPU_Type` FROM `system_audit`.`systeminformation` LIMIT 1000;
SHOW CREATE TABLE `system_audit`.`systeminformation`;
SELECT  `Machine_Name`,  `Serial_Number`,  `System_Manufacturer`,  `System_Model`,  `Motherboard_Manufacturer`,  `Motherboard_Model`,  `Chassis_Type`,  `System_Type`,  `Physical_Memory`,  `RAM_Capacity`,  `RAM_Slots`,  `BIOS_Description`,  `BIOS_Date`,  `CENTRAL PROCESSING UNIT (CPU)`,  `CPU_Type` FROM `system_audit`.`systeminformation` LIMIT 1000;
SHOW CREATE TABLE `system_audit`.`systeminformation`;
USE `phpmyadmin`;
SELECT `DEFAULT_COLLATION_NAME` FROM `information_schema`.`SCHEMATA` WHERE `SCHEMA_NAME`='mysql';
SHOW TABLE STATUS FROM `mysql`;
SHOW FUNCTION STATUS WHERE `Db`='mysql';
SHOW PROCEDURE STATUS WHERE `Db`='mysql';
SHOW TRIGGERS FROM `mysql`;
SHOW EVENTS FROM `mysql`;
USE `mysql`;
SHOW CREATE TABLE `mysql`.`time_zone_transition`;
SELECT  `Time_zone_id`,  `Transition_time`,  `Transition_type_id` FROM `mysql`.`time_zone_transition` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`time_zone_transition`;
SHOW TABLE STATUS LIKE 'time_zone_transition';
SHOW CREATE TABLE `mysql`.`time_zone_transition_type`;
SELECT  `Time_zone_id`,  `Transition_type_id`,  `Offset`,  `Is_DST`,  `Abbreviation` FROM `mysql`.`time_zone_transition_type` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`time_zone_transition_type`;
SHOW TABLE STATUS LIKE 'time_zone_transition_type';
SELECT  `Time_zone_id`,  `Transition_type_id`,  `Offset`,  `Is_DST`,  `Abbreviation` FROM `mysql`.`time_zone_transition_type` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`time_zone_transition_type`;
SHOW TABLE STATUS LIKE 'time_zone_transition_type';
SHOW CREATE TABLE `mysql`.`help_topic`;
SELECT  `help_topic_id`,  `name`,  `help_category_id`,  LEFT(`description`, 256),  LEFT(`example`, 256),  `url` FROM `mysql`.`help_topic` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`help_topic`;
SELECT  `help_topic_id`,  `name`,  `help_category_id`,  LEFT(`description`, 256),  LEFT(`example`, 256),  `url` FROM `mysql`.`help_topic` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`help_topic`;
SHOW CREATE TABLE `mysql`.`help_keyword`;
SELECT  `help_keyword_id`,  `name` FROM `mysql`.`help_keyword` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`help_keyword`;
SELECT  `help_keyword_id`,  `name` FROM `mysql`.`help_keyword` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`help_keyword`;
SHOW CREATE TABLE `mysql`.`help_category`;
SELECT  `help_category_id`,  `name`,  `parent_category_id`,  `url` FROM `mysql`.`help_category` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`help_category`;
SELECT  `help_category_id`,  `name`,  `parent_category_id`,  `url` FROM `mysql`.`help_category` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`help_category`;
SHOW CREATE TABLE `mysql`.`general_log`;
SELECT  `event_time`,  `user_host`,  `thread_id`,  `server_id`,  `command_type`,  `argument` FROM `mysql`.`general_log` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`general_log`;
SELECT  `event_time`,  `user_host`,  `thread_id`,  `server_id`,  `command_type`,  `argument` FROM `mysql`.`general_log` LIMIT 1000;
SHOW CREATE TABLE `mysql`.`general_log`;
SHOW VARIABLES LIKE '%log_file%';
/* 0 rows affected, 4 rows found. Duration for 1 query: 0.000 sec. */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:42:51.097

您可以启用[general_log](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)，重新启动服务器，一小时后将其禁用（因为它会影响性能并且文件可能会变大）并再次重新启动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:22:57.160

我相信[mysql历史文件](http://dev.mysql.com/doc/refman/5.0/en/mysql-history-file.html)是你要找的？`.mysql_history`在您的数据库用户主目录中查找。

要访问该`.mysql_history`文件，请运行此命令 - `cat ~/.mysql_history`。如果当前用户不是数据库用户，则需要 cd 进入数据库用户的主目录，然后运行`cat .mysql_history`​​.

您使用的是哪个操作系统，用于数据库？

# css - 设置元素覆盖宽度限制

> ID：13874332
> 
> 赞同：1
> 
> 时间：2012-12-14T07:20:09.360
> 
> 标签：css

我有一个**在 div 设置宽度为 %50**`hr`的元素。

 **```
hr {
  display: block;
  height: 1px;
  border: 0;
  border-top: 1px solid #C6C6C6;
  padding: 0;      
} 
```

hr 宽度继承它的 div 父宽度。

有没有办法设置 hr 宽度以适应所有屏幕省略其容器的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:54:28.003

您`max-width`对 div 设置了 a 并`%`在`HR`.

示例：http: [//jsfiddle.net/M59YP/](http://jsfiddle.net/M59YP/)**

# internet-explorer - 从 IE 向 Outlook 发送主题行时出现编码问题

> ID：13874334
> 
> 赞同：1
> 
> 时间：2012-12-14T07:20:58.767
> 
> 标签：internet-explorer, encoding, outlook

我们有一个包含文章的页面，如果您觉得有趣，可以邮寄给您的朋友。
所以我们在那里有一个小电子邮件按钮，其中包含新邮件的预设主题和正文：

```
mailto:?subject=redacted%E2%80%94redacted&body=whatever 
```

实际上`redacted—redacted`，当 mdash 正确就位时，这应该会出现，当我们在我们的系统上测试它时会这样做 - 一切正常。

但是一个客户抱怨它不能在 Internet Explorer 中运行。它在同一系统上的 Firefox 中运行良好，但 Internet Explorer 会打开 Outlook 并预先填充一个主题行，该主题行`redactedâ€”redacted`是该 UTF-8 字符的 Windows-1252 解释。

然而，页面上的编码设置为 UTF-8：
`<meta http-equiv="Content-type" content="text/html; charset=UTF-8">`

Webserver 标头没有指定可能会混淆浏览器的不同编码：

```
Connection:keep-alive
Content-Encoding:gzip
Content-Type:text/html
Date:Fri, 14 Dec 2012 08:27:02 GMT
Keep-Alive:timeout=20
Server:nginx/1.2.2
Transfer-Encoding:chunked 
```

问题可能来自哪里的任何提示？

# php - 未定义的属性：stdClass::$GetDataResult 错误消息

> ID：13874335
> 
> 赞同：0
> 
> 时间：2012-12-14T07:21:11.983
> 
> 标签：php, web-services, soap, soap-client, wsh

我正在使用 PHP Soap Client 函数使用此代码连接远程服务

```
try
{
    $result = $soapClient->GetData($parameters);
}
catch (SoapFault $fault)
{
    echo "Fault code: {$fault->faultcode}" . NEWLINE;
    echo "Fault string: {$fault->faultstring}" . NEWLINE;
    if ($soapClient != null)
    {
        $soapClient = null;
    }
    exit();
}
$soapClient = null; 
```

最后我调用了这个函数，

```
echo "Return value: {$result->GetDataResult}" . NEWLINE; 
```

但这对我不起作用，并收到这样的警告消息。

```
Notice: Undefined property: stdClass::$GetDataResult 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:58:17.903

您假设响应以具有“GetDataResult”属性的对象的形式出现。是什么让你这么想的？情况并非如此，这就是您收到此错误消息的原因。

转储 $result 的内容，看看你真正得到了什么。您还可以查看 WSDL 文件以了解服务承诺响应的内容。

# php - php中的全词替换

> ID：13874340
> 
> 赞同：0
> 
> 时间：2012-12-14T07:21:31.047
> 
> 标签：php, preg-replace

我想在 php 中替换整个单词。我从下面的链接中找到了一个代码 [PHP 字符串替换匹配整个单词](https://stackoverflow.com/questions/3426265/php-string-replace-match-whole-word)

我从上面的链接中获取了下面的代码示例。

```
$text = preg_replace('/\bHello\b/', 'NEW', $text); 
```

但这对我不起作用。我有一个字符串

```
3 OR ( 2 AND CreatedDate = LAST_N_DAYS:2 ) OR 4 
```

使用上面的代码替换 2 后，它变为

```
3 OR ( Name = 'LAST WEEK' AND CreatedDate = LAST_N_DAYS:Name = 'LAST WEEK' ) OR 4\. 
```

2 也替换了“LAST_N_DAYS:2”字符串。我只想单独更换 2 个。如果它与任何单词一起使用，则不应替换它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:44:07.643

用 NEW 替换 2：

```
$text = preg_replace('/\s2\s/',' NEW ',$test); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:50:17.963

如果您只想替换第一次出现，请添加限制：

```
// pattern, replacement, string, limit
$text = preg_replace('#2#U', 'NEW', $text, 1); 
```

或者你可以在下面使用：

```
$text = preg_replace('#2\s(AND)#', 'NEW $1', $text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:54:56.913

你可以简单地使用

```
str_replace('2', "Name = 'LAST WEEK'", $string); 
```

# android - 控制 listView 何时删除不可见视图？

> ID：13874343
> 
> 赞同：2
> 
> 时间：2012-12-14T07:21:41.360
> 
> 标签：android, listview, universal-image-loader

我发现 listView 回收它的视图太快了。

当我的 listView 滚动时，视图会从屏幕上掉下来立即被删除。

每个单元格（行）都有使用通用图像加载器加载的图像。
从屏幕上掉下来的视图在它们回到可见区域时必须重新加载图像。（它会在短时间内显示存根图像并加载正确的图像）。

我肯定需要保持视图回收行为，但我可以修改列表视图的行为，以便用户不会注意到不断重新加载图像吗？（也许我在缓存中保留了 2-3 倍的视图 # 比常规列表视图将）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:26:43.367

我可以建议您使用 ScrollView 而不是列表视图。ListView 旨在有效地显示大量数据，这就是您的屏幕外项目被破坏的原因。其中涉及滚动视图，一旦加载，您将能够上下滚动而无需重新创建屏幕外对象（因为它们不会被销毁）。

请参阅：http: [//developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

编辑：

如果您必须使用 listView，您可以在这里查看：[如何防止回收的 ListView 项目显示旧内容？](https://stackoverflow.com/questions/10158707/how-do-i-prevent-recycled-listview-items-from-showing-old-content)

有可能覆盖 listView 的 getView 方法并保留更多的项目不被破坏，而不是 listView 保留的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:44:11.280

不幸的是，ListView 和朋友的代码非常复杂，因为它的设计目的是在不提前知道高度的情况下滚动大小不均匀的项目。这使得除了默认行为之外的任何东西都很难运行。此外，您需要访问以轻松自定义行为的大多数方法都是隐藏的或私有的。尝试滚动自己的工作将是一项艰巨的工作（跨多个平台，滚动的细微之处，投掷，拖动，滚动，键盘焦点等）。

最好的解决方案可能是维护一个图像缓存，该缓存会在活动的视图位置周围延迟填充。不一定容易。但是尝试弄乱 ListView 更容易。

A very useful API for this is ListView.setRecyclerListener(AbsListView.RecyclerListener listener), which gives you a hook to track which images are actively displayed.

# php - 从 php 调用 python 并保存文件，

> ID：13874344
> 
> 赞同：0
> 
> 时间：2012-12-14T07:21:48.580
> 
> 标签：php, python, matplotlib, system

我试图从 bar.php 调用 python 代码

```
$cmd = "python foo.py";
system($cmd); 
```

它运行没有问题。但是， foo.py 应该在磁盘上保存一个文件。它不在那里。我以某种方式发现运行 Web 服务器的用户是 www-data。

我尝试使用用户 www-data $ php bar.php 从命令行运行 php 脚本它运行正常并保存了文件，因此用户 www-data 应该有权写入目录。

我注意到有人对“对其他用户没有帮助”进行了投票。但是，当您有一个 php 服务并且您有用其他语言（如 python）编写的代码时，知道这一点是必要的。

感谢所有建议。

我怀疑这是 b/c 我在 foo.py 的 python 代码中使用 Matplotlib，我有类似的代码

```
pl.scatter(data,...)
pl.plot(data,...)
pl.legend()
pl.save('path/to/bam.png') 
```

也许从网络调用时，它可以绘制图像。这可能吗？如果是这样，有没有办法解决它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:43:29.893

由于您提供的信息量，我只能推测，但我认为这是您的问题。您的 Python 脚本可能使用相对路径，这意味着它创建的文件将出现在您的工作目录中，或者相对于它。

为了确认这一点，并找出你的文件当前的去向，你可以在 python 中打印当前的工作目录：

```
import os
print os.getcwd() 
```

要修复它，请改用相对于 python 脚本的路径或绝对路径。例子：

```
import os
basedir = os.path.abspath(os.path.dirname(__file__))

file_path = os.path.join(basedir, 'my-file-name.txt') 
```

# javascript - 将元素附加到列表

> ID：13874345
> 
> 赞同：2
> 
> 时间：2012-12-14T07:21:49.547
> 
> 标签：javascript, jquery

我正在尝试将列表元素动态附加到现有列表中。

我在表格中有一个列表，

```
<ul id="test">
    <li class="testField">YYAAHOOOOOO<li>
</ul> 
```

我正在尝试使用 jQuery append 或之后向此列表添加一个额外的项目...

我所做的是：

```
$(".testField").after("<li class='testField'>TEST MESSENGER</li>"); 
```

使用 after 函数作为 append 不起作用，after 函数第一次工作正常，因为只有一个具有类名的元素`testField`，但是随着列表的增长，after 函数会将列表项添加到所有存在的元素中，

为了清楚起见，在第一次试验中，我将得到一个输出：

```
<ul id="test">
    <li class="testField">YYAAHOOOOOO<li>
    <li class='testField'>TEST MESSENGER</li>
</ul> 
```

例如，如果我现在尝试添加另一个元素`<li class='testField'>GOOGLE</li>`，输出将如下所示：

```
<ul id="test">
    <li class="testField">YYAAHOOOOOO<li>
    <li class='testField'>GOOGLE</li>
    <li class='testField'>TEST MESSENGER</li>
    <li class='testField'>GOOGLE</li>
</ul> 
```

我考虑过使用 id，但我也试图选择从列表中删除元素......所以如果我尝试附加到未定义的 id，它将返回错误。无论如何要找到列表中的第一个元素并将元素附加到第一个元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T07:24:30.003

尝试：

```
$(".testField:first").after("<li class='testField'>TEST MESSENGER</li>"); 
```

这将确保您仅在第一个元素之后追加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:47:06.717

或者，您可以在没有 jQuery 的情况下执行此操作：

```
var li = document.createElement('li');                       // Create a List item.
    li.setAttribute("class", "testfield");                   // Set the li's class
    li.addChild(document.createTextNode("Your Text Here!")); // Set the li's text
document.getElementById("test").addChild(li);                // Append the li to the list 
```

是的，它的代码略多一些，但这几乎是 jQuery 在幕后所做的。（也更快）

如果要`li`在列表中的第一个之后添加新的 ul，请将最后一行替换为：

```
var ul = document.getElementById("test");
if(ul.children.length > 1){              // If the list has 2 or more children (li's)
    ul.insertBefore(li, ul.children[1]); // Insert the new item before the second item in the list.
}else{
    document.getElementById("test").addChild(li); 
} 
```

现在，为什么我要发布需要更多代码的答案？
可以在 jQuery 中完成的任何事情都可以在原生 JS 中完成。我认为在 SO 上有多个不同的答案很好，特别是如果他们使用不同的技术来做同样的事情。这样，用户可以自己选择：short'n easy (jQuery)，或者如果他们不想使用该库，则选择本机代码。

# c++ - 横向归约操作的名称？

> ID：13874350
> 
> 赞同：1
> 
> 时间：2012-12-14T07:22:14.930
> 
> 标签：c++, function, naming

我目前正在为矢量化操作编写一个高度模板化的 C++ 助手类，我需要一个特定操作的名称。

我已经有 2 个函数，它们的名称非常常见，取自矢量语言：

*   `apply()`将函数应用于向量的每个元素
*   `reduce()`它对向量应用归约操作并返回一个标量

现在我想实现另一个函数，它是这两者的混合：它需要几个向量作为输入，并在每一行上应用归约操作，并返回一个向量。

为了说明这一点，我们有：

*   `apply(func, vec)`-> 返回`{func(vec[0]), func(vec[1]), ..., func(vec[n])}`
*   `reduce(func, vec)`-> 返回`func(vec[0], vec[1], ..., vec[n])`

和 ：

*   `something(func, vec1, vec2, ..., vecn)`-> 返回`{func(vec0[0], vec1[0], ..., vecn[0]), func(vec0[1], vec1[1], ..., vecn[1]), ..., func(vec0[n], vec1[n], ..., vecn[n])}`

这个函数的通用名称是什么（一个简单的动词，如 apply 或 reduce）（如果存在这样的函数，则与其他矢量语言兼容）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:34:02.590

也许是我从 Haskell 看到的 zip_with ？

# sql-server - 尽管通过存储过程插入第一行，但无法将第二行插入表中

> ID：13874351
> 
> 赞同：1
> 
> 时间：2012-12-14T07:22:17.677
> 
> 标签：sql-server, stored-procedures

它成功插入了第一行，但没有插入任何其他行，尽管第二行没有主键冲突

我的`aspx.cs`文件中的代码：

```
 outputParVal = sqlCmd.Parameters[outputParName].Value; 
```

`outparameter`在存储过程中是---“结果”

```
CREATE PROCEDURE [dbo].[RecruiterProfileInsert]  
  @CompanyId int,     
  @CompanyName varchar(200),    
  @EmailId   varchar(50) ,    
  @Password  varchar(20) ,    
  @ContactNumber varchar(15),    
  @Website  varchar(50),    
  @CompanyProfile varchar(2000),   
  @IsVerified bit,   
  @Result Tinyint OutPut  
  --@CreatedDate  datetime ,    
  --UpdatedDate datetime         
AS  
BEGIN        
    -- Insert statements for procedure here          
 --check whether @CompanyName already exist or not if exist then return           
IF EXISTS(SELECT Top 1 * FROM  RecruiterProfile WHERE @CompanyId = LTRIM(RTRIM(@CompanyId)))        
 BEGIN          
  SET @Result = 0-- Already Exists          
 END          
ELSE          
BEGIN              
 INSERT INTO RecruiterProfile        
(    
  CompanyId,    
  CompanyName,    
  EmailId ,    
  Password ,    
  ContactNumber,    
  Website ,    
  CompanyProfile ,  
  IsVerified,    
  CreatedDate    
)        
 VALUES        
(    
@CompanyId,    
@CompanyName,        
@EmailId ,         
@Password,      
@ContactNumber,          
@Website,       
@CompanyProfile,  
@IsVerified,          
GetDate()  
)        
set @Result =1     
 return                
 END   
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:32:29.843

这就是问题：

```
SELECT Top 1 * FROM  RecruiterProfile WHERE @CompanyId = LTRIM(RTRIM(@CompanyId)) 
```

这本质上是没有意义的。您正在将变量与自身进行比较。从其中一个参考文献中取出`@`标志。`CompanyId`在`RTrim`SQL Server 中是不必要的，并且`LTrim`也没有意义，因为后来的插入也没有`LTrim`，所以最终会出错。

此外，在`EXISTS`子句内部，TOP 没有任何意义，除非您使用 ORDER BY 并对最终结果进行处理。只是在子句`SELECT *`里面做。`EXISTS`

还有一件事：如果存在高并发并且用户可能会尝试同时插入相同的内容，那么您的查询仍然可能因重复键违规而失败。

# php - 用 HTML 标签替换字符串中的引号

> ID：13874369
> 
> 赞同：2
> 
> 时间：2012-12-14T07:24:03.213
> 
> 标签：php, string

我将以下字符串存储在 PHP 的变量中。

```
The words inside the quotes should be in '''bold'''. Like '''this''' and '''that''' 
```

这里使用三引号`'''`来表示单词应该显示为粗体。

`<strong>`用标签替换它的最有效方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T07:31:01.127

我会用类似的东西说[正则表达式：](http://php.net/manual/en/book.pcre.php)

`$new_string = preg_replace('/\'\'\'([^\']+)\'\'\'/', '<strong>$1</strong>', $string);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:22:11.640

即使[@atrepp](https://stackoverflow.com/users/1517028/atrepp)的答案是正确的，我最终还是使用了以下函数

```
function makeBold($string) {
    $quote = '&#39;&#39;&#39;';
    $count = substr_count($string, $quote);
    for ($i = 0; $i <= $count/2; $i++) {
        $string = preg_replace("/$quote/", '<strong>', $string, 1);
        $string = preg_replace("/$quote/", '</strong>', $string, 1);
    }
    return $string;
} 
```

因为

*   我的字符串实际上是编码形式（即）它有`&#39;`而不是`'`
*   `'`当要加粗的单词中有他的答案时，他的答案不起作用

# android - 安卓白盒测试

> ID：13874372
> 
> 赞同：0
> 
> 时间：2012-12-14T07:24:18.287
> 
> 标签：android, android-testing, white-box-testing, test-framework

我是新的 android 测试，有一段时间我正在使用 Android 测试框架来测试我的代码（在 ProviderTestCase2、AndroidTestCase、activityinstrumentationtestcase2 等的帮助下）我想知道还有哪些其他可用的开源框架（**严格来说是白框**） . 我遇到过**Robotium、Roboelectric、monkeyrunner、Calabash**）。哪个用于单元测试，测试android服务？我对上述用于黑盒测试的框架有了一个总体了解（如果我错了，请纠正我）。对于白盒测试**，哪个是最好的**测试框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:29:15.240

我更喜欢 robolectric，因为它可以在 PC 上轻松运行，并且在应用程序中测试逻辑非常有帮助。

Robotium 用于 ui 测试，在我看来，不值得花大量时间编写 ui 测试代码，因为 ui/需求总是在变化。

# android - 在 FrameLayout 上滑动图像视图和触发可触摸事件后，触摸事件保留在前一个区域

> ID：13874373
> 
> 赞同：1
> 
> 时间：2012-12-14T07:24:21.443
> 
> 标签：android, android-layout, android-framelayout

谁能帮我解决这个问题，我在设计中使用 FrameLayout，

我有三个图像 A、B 和 C，我需要像这样的设计 - 图像 B 应该在 A 后面，而 onTouch 图像 C 是图像 B 从 A 的背面向下滑动，它应该是可点击的。我完成了翻译动画，我使用 FrameLayout 来叠加图像。

**问题是，**

**1）** B图像是可点击的，即使它在A的背面，它也会被点击并运行它的onClick方法，即使它没有出现。所以它在背景上时不应该被点击。

**2）**当我触摸图像C时，B图像从A的背面SlideDown，但B的可点击区域没有从顶部移动，它仍保留在B之前最初放置的先前区域上SlideDown。

当单击图像 C 并且其可触摸区域也应该移动时，我需要从 A 的背面向上和向下滑动图像 B。

```
TranslateAnimation t =new TranslateAnimation(0, 0,0,35);
t.setDuration(400);
t.setFillAfter(true);   
t.setInterpolator(new LinearInterpolator());
menuSlideBgId.startAnimation(t);
inFram.startAnimation(t);ImageView shareMenuId = (ImageView) findViewById(R.id.bubbleMenu);
shareMenuId.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "bub", 5000).show();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:57:20.250

我使用了 ObjectAnimator 并解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:29:42.383

我认为您应该查看[how-to-disable-button-click](https://stackoverflow.com/questions/4204017/how-to-disable-button-click)这个示例适用于按钮，但您可以对 imageViews 执行相同操作，希望对您有所帮助。

# android - Android：列表视图/适配器中不再显示视图？

> ID：13874376
> 
> 赞同：1
> 
> 时间：2012-12-14T07:24:30.773
> 
> 标签：android, listview, baseadapter

我有一个列表视图来使用 CustomAdapter 填充数据，如下面的代码所示。

**1.) listview 行是可点击的，并且 onItemClick 我显示了两个按钮 retake/review。**

**2.）当我点击其他行时，前一行可见的按钮应该隐藏。**

**3.）当我滚动列表时，所有按钮都再次不可见，这不应该发生。**

**我已经达到了没有。1 通过这段代码，但我怎么能达到 2,3。我如何修改`getView()`适配器的方法或`onItemClick()`使事情正常工作。**

//使用适配器初始化列表视图

```
AttempListView.setAdapter(new AttemptedExcerciseAdapter(mAttempRecord,AttemptedExercise.this)); 
```

//一个不同的适配器类来放置值

公共类 AttemptedExcerciseAdapter 扩展 BaseAdapter{

```
HashMap<Integer, AttemptedRecord> mHashMap;
Context mContext;
LinearLayout mLLButton;

public AttemptedExcerciseAdapter() {
    // TODO Auto-generated constructor stub
}

public AttemptedExcerciseAdapter(HashMap<Integer, AttemptedRecord> mAttempRecord,Context mContext) {
    this.mHashMap = mAttempRecord;
    this.mContext=mContext;
}
@Override
public int getCount() {
    return mHashMap.size();
}
@Override
public Object getItem(int arg0) {
    return null;
}
@Override
public long getItemId(int arg0) {
    return 0;
}

@Override
public View getView(final int position, View convertView, ViewGroup arg2) {
    if (convertView == null) {
        @SuppressWarnings("static-access")
        LayoutInflater layoutInflater = (LayoutInflater) mContext.getSystemService(AttemptedExercise.LAYOUT_INFLATER_SERVICE);
        convertView = layoutInflater.inflate(R.layout.exerciselistlayout, null);
    }

    TextView attempChapter_name = (TextView) convertView.findViewById(R.id.TVchapterexercisechapterName);
    TextView attemptQues = (TextView) convertView.findViewById(R.id.tvexercisesuccessrate);
    TextView attemptSR = (TextView) convertView.findViewById(R.id.tvexerciseperquestiontime);

    Button ReviewButton = (Button) convertView.findViewById(R.id.ReviewButton);
    Button RetakeButton = (Button) convertView.findViewById(R.id.RetakeButton);
    LinearLayout mLLtext = (LinearLayout) convertView.findViewById(R.id.LLText);
    mLLButton = (LinearLayout) convertView.findViewById(R.id.LLButton);

    mLLButton.setVisibility(View.INVISIBLE);
    mLLtext.setVisibility(View.VISIBLE);
    System.out.println("data value is..."+position+mHashMap.get(position + 1).getChapter_name());

    attempChapter_name.setText(mHashMap.get(position+1).getChapter_name());
    attemptQues.setText(" " + mHashMap.get(position+1).getTimePerQues() + " sec/ques");
    attemptSR.setText(" " + mHashMap.get(position+1).getSuccess_rate() + " %");

    return convertView;
} 
```

}

//listview的item点击监听

公共类 ExcerciseItemClickListener 实现 OnItemClickListener {

```
 ArrayList<Integer> rowNo=new ArrayList<Integer>();

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

        System.out.println("click working..."+arg2);

        arg1.findViewById(R.id.LLButton).setVisibility(View.INVISIBLE);

        rowNo.clear();

        rowNo.add(arg2);

        if(rowNo.size()==1)
        {   
        AttemptedRecord mRecordExcerciseItem = mAttempRecord.get(arg2 + 1);

        final int chapter_id = mRecordExcerciseItem.getChapter_id();
        final int test_id = mRecordExcerciseItem.getTest_id();
        final int subject_id = mRecordExcerciseItem.getSubject_id();

        System.out.println("attempted  list size is..."+mAttempRecord.size());

            arg1.findViewById(R.id.LLText).setVisibility(View.INVISIBLE);
            arg1.findViewById(R.id.LLTake).setVisibility(View.INVISIBLE);
            arg1.findViewById(R.id.LLButton).setVisibility(View.VISIBLE);

            Button review=(Button) arg1.findViewById(R.id.ReviewButton);
            Button retake=(Button) arg1.findViewById(R.id.RetakeButton);

            review.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

                    DBHelper mDbHelper = new DBHelper(AttemptedExercise.this);
                    mDbHelper.createOrOpenDatabase("Dashboard");
                    Cursor chpater_exercise_Cursor = mDbHelper.rawQuery("select current_test_id from practice_test_summary where test_id="+test_id+" order by test_datetime desc limit 1");

                    chpater_exercise_Cursor.moveToFirst();

                    Long current_test_id =chpater_exercise_Cursor.getLong(0);
                    chpater_exercise_Cursor.close();

                    System.out.println("value of current test id is...."+current_test_id);

                    Intent reviewIntent = new Intent(AttemptedExercise.this, PracticeReview.class);
                    reviewIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_NO_HISTORY);
                    if (current_test_id > 0) {
                        reviewIntent.putExtra("current_test_id", current_test_id);
                        startActivity(reviewIntent);
                    }
                }
            });

            retake.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    System.out.println("test id value when test starts is... "+test_id);
                    Toast.makeText(AttemptedExercise.this, "chapter_id" + chapter_id + " course_id"  + " test_id" + test_id + " subject_id" + subject_id, Toast.LENGTH_LONG).show();
                    StartTest(4, subject_id, chapter_id, test_id);
                }
            });
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:34:02.490

在 getView 中，您隐藏了按钮和文本，这就是滚动时视图消失的原因。</p>

```
mLLButton.setVisibility(View.INVISIBLE);
mLLtext.setVisibility(View.VISIBLE); 
```

在您的点击监听器中，您应该记录所选行的位置，而在 getView 中，您需要根据视图的位置设置视图的可见性状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T07:41:28.133

如果您可以像这样添加`ClickListeners`列表`getView`

```
convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            curruntButtonClickPosition=position;
                            //Visible you button here
                            notifyDataSetChanged();
        }
    }); 
```

并且在`getView`

```
 if(curruntButtonClickPosition=position)
   //mLLButton visible
else
  //mLLButton  invisible 
```

在类中添加`curruntButtonClickPosition`全局变量`AttemptedExcerciseAdapter`并使用-1初始化。

# sql - 将日期格式 01-01-1990 转换为 01-jan-1990

> ID：13874378
> 
> 赞同：0
> 
> 时间：2012-12-14T07:24:35.547
> 
> 标签：sql, sql-server-2008

请帮我转换查询的日期格式。

我的查询

```
select pr.[Date], p.[Product]  
from tbl_ProTest p   
inner join tbl_Prod2 pr on P.[PID] = pr.[PID] 
```

在我的输出中，我得到了日期，`1990-01-01`但我的预期输出是`01-Jan-1990`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:29:41.347

尝试这个：

```
REPLACE(CONVERT(VARCHAR(15), pr.[Date], 106), ' ', '-') 
```

通过这种方式，日期被转换为`VARCHAR`并以所需的格式显示。更多关于`CONVERT`和支持的格式可以在**[这里找到](http://msdn.microsoft.com/en-us/library/ms187928.aspx)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T07:28:51.363

尝试这个...

```
select DATE_FORMAT(pr.[Date],'%d %b %y'),p.[Product] from tbl_ProTest p  
inner join tbl_Prod2  pr on P.[PID] = pr.[PID] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T08:24:58.680

你可以用这个

```
 mysql_select_db("datetime", $con);
     $result = mysql_query("SELECT * FROM datetime_test");
     while($row = mysql_fetch_array($result))
     {
     foreach( $row as $lists){

       echo "".date('M d Y',strtotime($lists['date']));

     }

     } 
```

# iphone - 下一行事件上的 UItextView 空间

> ID：13874381
> 
> 赞同：0
> 
> 时间：2012-12-14T07:24:51.150
> 
> 标签：iphone, objective-c, uitextview, uitextviewdelegate

我有带线条的 UITextView。在这里，我在 UITextView 中添加了文本，同时单击下一行按钮（返回/输入），文本在边距之前开始打印。但是文本应该在边距之后开始，所以我想在文本之前留出空间，当我输入时下一行事件。

**这是我下面的代码**

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{

  if ([text isEqualToString:@"\n"])
  {
     note.text=[note.text stringByAppendingString:@"           "];
  }
  NSLog(@"%@",text);
  return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:08:35.957

尝试这个：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{

  if ([text isEqualToString:@"\n"])
  {
     note.text=[note.text stringByAppendingString:@"\n           "];
     return NO;
  }
  NSLog(@"%@",text);
  return YES;
} 
```

# jquery - Jquery 日期时间选择器格式

> ID：13874384
> 
> 赞同：2
> 
> 时间：2012-12-14T07:25:29.423
> 
> 标签：jquery, jquery-ui

如何格式化日期和时间？我可以轻松地格式化时间和日期，但不能以组合格式设置日期和时间。我正在使用 Jquery 日期时间选择器插件

这是工作：

```
 $('.date').datetimepicker({
        timeFormat: 'hh:mm', 
        dateFormat: 'yy-mm-dd' //This does nothing and does not format the data 
    }); 
```

如何格式化这种格式的日期？

```
"`hh:mm:ss TT, DD, MM dd, yy"` 
```

输出将是

```
04:10:55 AM, Tuesday, March 27, 2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:46:21.790

尝试这个：

```
var date_obj = new Date();
date_obj_hours = date_obj.getHours();
date_obj_mins = date_obj.getMinutes();

if (date_obj_mins < 10) {
    date_obj_mins = "0" + date_obj_mins;
}

if (date_obj_hours > 11) {
    date_obj_hours = date_obj_hours - 12;
    date_obj_am_pm = " PM";
} else {
    date_obj_am_pm = " AM";
}

date_obj_time = "'" + date_obj_hours + ":" + date_obj_mins + date_obj_am_pm + "'";

$("#datepicker").datepicker({
    dateFormat: date_obj_time + ' , ' + $.datepicker.RFC_850
});​ 
```

PS 不完整，希望大家可以补充秒的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T06:28:45.070

你的格式应该是 'H:i:s A, l, F j, Y'

```
$('.date').datetimepicker({
    format:'H:i:s A, l, F j, Y'
}); 
```

# java - 使用 SSLSocket Java 创建应用程序

> ID：13874387
> 
> 赞同：14
> 
> 时间：2012-12-14T07:25:39.457
> 
> 标签：java, sockets, ssl, jsse

我想创建一个应用程序使用`SSLSocket`：客户端向`String`服务器发送一个，服务器将其大写`String`并发送回客户端进行显示。

## SSL服务器

```
public class SSLServer {
    public static void main(String args[]) throws Exception
    {
        try{
        //Creaet a SSLServersocket
        SSLServerSocketFactory factory=(SSLServerSocketFactory) SSLServerSocketFactory.getDefault();
        SSLServerSocket sslserversocket=(SSLServerSocket) factory.createServerSocket(1234);
        //Tạo 1 đối tượng Socket từ serversocket để lắng nghe và chấp nhận kết nối từ client
        SSLSocket sslsocket=(SSLSocket) sslserversocket.accept();
        //Tao cac luong de nhan va gui du lieu cua client
        DataInputStream is=new DataInputStream(sslsocket.getInputStream());
        PrintStream os=new PrintStream(sslsocket.getOutputStream());
        while(true)  //khi dang ket noi voi client
        {
            //Doc du lieu den
            String input=is.readUTF();
            String ketqua=input.toUpperCase();
            //Du lieu tra ve
            os.println(ketqua);
        }
        }
        catch(IOException e)
        {
           System.out.print(e);
        }
    }
} 
```

## SSL客户端

```
public class SSLClient {
    public static void main(String args[])
    {
        try
        {
        //Mo 1 client socket den server voi so cong va dia chi xac dinh
        SSLSocketFactory factory=(SSLSocketFactory) SSLSocketFactory.getDefault();
        SSLSocket sslsocket=(SSLSocket) factory.createSocket("127.0.0.1",1234);

        //Tao luong nhan va gui du lieu len server
        DataOutputStream os=new DataOutputStream(sslsocket.getOutputStream());
        DataInputStream is=new DataInputStream(sslsocket.getInputStream());

        //Gui du lieu len server
        String str="helloworld";
        os.writeBytes(str);

        //Nhan du lieu da qua xu li tu server ve
        String responseStr;
        if((responseStr=is.readUTF())!=null)
        {
            System.out.println(responseStr);
        }

        os.close();
        is.close();
        sslsocket.close();
        }
        catch(UnknownHostException e)
        {
             System.out.println(e.getMessage());
        }
        catch(IOException e)
        {
            System.out.println(e.getMessage());
        }
    }
} 
```

运行时`SSLServer`。它显示此错误：

```
javax.net.ssl.SSLException: No available certificate or key corresponds 
    to the SSL cipher suites which are enabled 
```

我已经搜索并做了一些方法，但是..你能帮帮我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-22T13:15:12.310

这将生成证书：

```
keytool -genkey -keystore yourKEYSTORE -keyalg RSA 
```

输入 yourPASSWORD 并使用 ssl 调试信息启动服务器（将 yourKEYSTORE 放入 SSLServer.class 目录）：

```
java -Djavax.net.ssl.keyStore=yourKEYSTORE -Djavax.net.ssl.keyStorePassword=yourPASSWORD -Djava.protocol.handler.pkgs=com.sun.net.ssl.internal.www.protocol -Djavax.net.debug=ssl SSLServer 
```

比启动您的客户端（将您的KEYSTORE 放入带有 SSLClient.class 的目录）：

```
java -Djavax.net.ssl.trustStore=yourKEYSTORE -Djavax.net.ssl.trustStorePassword=yourPASSWORD SSLClient 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-22T19:07:49.300

[@corVaroxid 的回答](https://stackoverflow.com/a/21283970/5318303)是正确的。但是如果你想以编程方式设置配置*以**避免全局设置***（像我一样），你可以像下面这样（**Kotlin**）：

```
val password = "yourPassword".toCharArray()

val keyStore = KeyStore.getInstance(File("yourKeystorePath.jks"), password)

val trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm())
trustManagerFactory.init(keyStore)

val keyManagerFactory = KeyManagerFactory.getInstance("NewSunX509")
keyManagerFactory.init(keyStore, password)

val context = SSLContext.getInstance("TLS") //"SSL" "TLS"
context.init(keyManagerFactory.keyManagers, trustManagerFactory.trustManagers, null)

val factory = context.serverSocketFactory

(factory.createServerSocket(LISTENING_PORT) as SSLServerSocket).use { serverSocket ->
    logger.trace("Listening on port: $LISTENING_PORT")

    // ...
} 
```

或在**Java**中：

```
final char[] password = "yourPassword".toCharArray();

final KeyStore keyStore = KeyStore.getInstance(new File("yourKeystorePath.jks"), password);

final TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
trustManagerFactory.init(keyStore);

final KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance("NewSunX509");
keyManagerFactory.init(keyStore, password);

final SSLContext context = SSLContext.getInstance("TLS");//"SSL" "TLS"
context.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);

final SSLServerSocketFactory factory = context.getServerSocketFactory();

try (SSLServerSocket serverSocket = ((SSLServerSocket) factory.createServerSocket(LISTENING_PORT))) { 
    logger.trace("Listening on port: " + LISTENING_PORT);

    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T07:54:52.023

检查您已安装的证书。确保他们支持您正在协商的密码套件。

# vb.net - 想要发送带有彩色文本的电子邮件

> ID：13874394
> 
> 赞同：0
> 
> 时间：2012-12-14T07:26:39.640
> 
> 标签：vb.net

我使用 vb.net 代码发送电子邮件。发送纯文本电子邮件没有问题，但我想使用一些格式（粗体、彩色文本等）。我正在将我的邮件正文写在 Richtextbox 中，但不知道如何进行格式设置。

我也想插入图片。请帮助解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:34:03.603

您基本上需要为要着色的元素制作一个带有 css 的 html 文件。您可以将此作为附件添加到电子邮件中，并将 mime-type 设置为 text/html。

对于图像，您可以将它们添加为 base64 编码的附件，并将其 Content-ID 作为 CID：在您的 html 代码中引用。

我在对这个线程的回答中写了更多关于这个的内容：
[发送电子邮件包含像 Outlook 一样的图像？](https://stackoverflow.com/questions/13133052/send-email-includes-image-like-outlook-does/13133137#13133137)

# jquery - 使用 jquery 显示隐藏 div 单选按钮列表

> ID：13874397
> 
> 赞同：0
> 
> 时间：2012-12-14T07:26:48.523
> 
> 标签：jquery, yii, radiobuttonlist

```
<td><?php echo $form->labelEx($model,'Is Scholarship?');?></td>
<td><?php echo $form->radioButtonList($model,'is_scholar',array(
                    'Yes'=>'Yes',
                    'No'=>'No',),
                     array('size'=>100,'class'=>'e'.$arrMF[8],'disabled'=>$isVerify,'uncheckValue'=>null)
    );?>
<td><?php echo $form->error($model,'is_scholar');?></td> 
```

我不知道该怎么做。我需要使用 jQuery。我会选择是或否。如果我选择是，一个 div 将是`display:block` 如果我选择否，一个 div 将是`display:none`，我将执行来自我的控制器的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:39:58.433

你可以这样做：

```
$('input[id="yes"]').change(function(){
    $('div').show();
});

$('input[id="no"]').change(function(){
    $('div').hide();
}); 
```

检查小提琴：http: **[//jsfiddle.net/5cRdU/](http://jsfiddle.net/5cRdU/)**

# asp.net - 将 stringbuilder 转换为 guid

> ID：13874400
> 
> 赞同：-1
> 
> 时间：2012-12-14T07:27:00.630
> 
> 标签：asp.net, vb.net

嗨，我在 stringbuilder 中有一些 guid，我想将这些值存储在 guid 数组中。

有人可以给我一个想法来转换它。我正在使用 vb.net

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:20:20.573

假设：您的指导实际上只是字符串。这可能会有所帮助：

```
Dim SB as new Stringbuilder = "GUID"
Dim GuidList as New List(Of Guid)

Dim myGUID as Guid
If GUID.tryparse(SB.tostring, myGuid)=true then
   Guidlist.add(myguid)
else
  'Handle the error here
end if 
```

将其包装在您的 Guid 上的循环中，我不知道您是如何存储它们的。备注：您可能需要使用 parsexact，请参阅文档： http: [//msdn.microsoft.com/en-us/library/system.guid.aspx](http://msdn.microsoft.com/en-us/library/system.guid.aspx) 我已经写出来了，所以代码可能无法编译.. .

# grails - 从一开始就阻止重定向

> ID：13874401
> 
> 赞同：0
> 
> 时间：2012-12-14T07:27:00.990
> 
> 标签：grails, redirect, controller, gsp

首次加载时，我在页面上遇到了一些自动重定向。

这些是我的代码：

```
def editUser = {
    if(params.account_expired != null )
    {
    String updateQuery = "UPDATE user SET expired='"+params.account_expired+"'"

    def update = sql.executeUpdate(updateQuery)
    redirect (action: listUser)
    [update:update]

    }

    else
    {

    }
 } 
```

所以发生的事情是，当页面加载时，它会自动重定向回 l​​istuser 页面。这实际上是一个 edituser 页面，我希望它一直留在那里，直到用户单击一个按钮。然后重定向到listuser。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:36:28.013

通常使用 POST 方法发送更新，使用 GET 方法显示表单（正如 W3C 建议的那样，默认情况下在 Grails 中使用）。所以你可以使用：

```
def editUser = {
  if (request.method == 'GET') {
     render(view: 'editUser')
  } else if (request.method == 'POST') {
     //.... current code
  }
} 
```

默认情况下，当您使用`<g:form`标签时，Grails 会创建 POST 表单，但如果您使用纯 HTML 标签，则应将 POST 方法指定为：

```
<form method="POST">

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:05:53.057

这正是你的代码应该做的，因为你已经执行了这个：

```
redirect (action: listUser) 
```

如果您希望它留在 editUser 页面中，则应将其删除。然后

```
[Query1:Query1] 
```

将使用传递的此参数呈现 editUser.gsp。

# fortran - 将字符串长度插入 fortran 格式说明符

> ID：13874404
> 
> 赞同：2
> 
> 时间：2012-12-14T07:27:11.863
> 
> 标签：fortran, gfortran

我正在尝试使用 gfortran 4.4.6 编译别人的 FORTRAN 代码。最初的编码器使用了 Compaq FORTRAN 之类的东西。

有问题的代码应该读取像“foo.txt”这样的文件名并创建一个名为“foo_c.txt”的新文件：

```
    file_label_end = SCAN(文件名, '.') - 1
    WRITE (output_filename,5) 文件名
    5 格式 (A<file_label_end>, '_c.txt' )

```

gfortran 抱怨字符说明符的左尖括号。也就是说，他有“A<（值为 3 的变量）>”，而不是“A3”。我找不到任何关于从变量中插入格式宽度的信息......这可能吗？如果没有，解决此问题的最佳方法是什么？

**更新：**

这似乎正在工作（编译）：

```
file_label_end = SCAN(par_filename, '.', .TRUE. ) + 1
output_filename = par_filename(1:file_label_end) // '_c.par' 
```

但我后来有一个类似的案例：

```
12 格式 (<n-1>F10.5)
...
READ(1,12) (cat_parm (blk,j), j = 1,n-1)
```

我试图通过创建一个格式字符串来解决这个问题：

```
写（fmt12，'（I0，A4）'）n-1，'F10.5'
!12 格式 (fmt12)
12 格式 (fmt=fmt12)
```

但是“fmt”中的“t”被标记为“格式字符串中需要非负宽度”的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:48:35.723

Fortran 编辑描述符的使用`<>`是非标准的，但已得到广泛实施。您当然可以从变量构建编辑描述符，标准方法是通过内部写入，如下所示（省略声明）：

```
format_string = ''
write(format_string,'(a1,i0,a6)') 'A', file_label_end,'''_c.txt''' ! WARNING I haven't tested this 
```

进而

```
write(output_filename,fmt=format_string) filename 
```

但在你的情况下，这不是完全必要的。你可以试试这个

```
file_label_end = SCAN(filename, '.') - 1
WRITE (output_filename,'(a)') filename(1:file_label_end)//'_c.txt' 
```

使用“a”编辑描述符省略宽度意味着将写入表达式中的所有字符。您可能要声明

```
character(len=*), allocatable :: output_filename 
```

如果你还没有这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:11:22.790

最简单的是使用现代的fortran

```
WRITE (output_filename,'(a)') trim(filename) // '_c.txt' 
```

否则，我会使用类似的内部写入将数字写入格式字符串。

# eclipse - 更新服务插件时如何防止核心插件重新启动..？

> ID：13874407
> 
> 赞同：-1
> 
> 时间：2012-12-14T07:27:21.357
> 
> 标签：eclipse, eclipse-plugin, osgi

通过在 OSGi 控制台中使用新插件的 URI 运行更新命令来更新服务插件时，如何防止核心插件重新启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:48:57.387

如果您仅通过将服务接口移动到单独的包中来更改所需的服务实现，那么您的“核心”包和服务实现包都将取决于服务接口（又名“服务 api”）包. 但是，您的核心捆绑包将不再依赖于服务实现捆绑包。然后，您可以在不中断核心包的情况下启动/停止/重新启动/更新服务实现包。

# javascript - JS中的分页

> ID：13874408
> 
> 赞同：0
> 
> 时间：2012-12-14T07:27:24.610
> 
> 标签：javascript, jquery

我需要在 JS 中调整这个分页

从这个示例中可以看出

[http://jsfiddle.net/jfm9y/](http://jsfiddle.net/jfm9y/)

```
pageSize = 3;
resultN = null;

showPage = function(page) {
    $(".content").hide();
    $(".content").each(function(n) {
        if (n >= pageSize * (page - 1) && n < pageSize * page)
            $(this).show();
    });        
}

showPage(1);

$("#pagin li a").click(function() {
    $("#pagin li a").removeClass("current");
    $(this).addClass("current");
    showPage(parseInt($(this).text()))

}); 
```

在第 1 页上，用户可以看到 div / 1 / 2 / 3 /

当用户单击第 2 页时，脚本显示 / 4 / 5 / 6 /

我需要更改此脚本，因此当用户单击第 2 页时，他会看到 / 2 / 3 / 4 /

当点击第 3 页时，他会看到 / 3 / 4 / 5 / 等等。

你能指出我正确的方向吗？

编辑 - 修订版（感谢 Kolink & dencey）

[http://jsfiddle.net/jfm9y/89/](http://jsfiddle.net/jfm9y/89/)

* * *

```
 var pageSize = 3;

var showPage = function(page) {
    $(".content").hide();
    $(".content").each(function(n) {
        if (n >= (page - 1) && n < (page - 1) + pageSize)
            $(this).show();
    });        
}

showPage(1);

$("#pagin li a").click(function() {
    $("#pagin li a").removeClass("current");
    $(this).addClass("current");
    showPage(parseInt($(this).text())) 
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:32:48.600

改变你`if`的`if(n>=page && n<page+pageSize)`

通过这种方式，您拥有：

第 1 页 => 第 1、2、3 格
第 2 页 => 第 2、3、4 格，
依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:41:25.490

试试这个示例[http://jsfiddle.net/jfm9y/89/](http://jsfiddle.net/jfm9y/89/)

```
var showPage = function(page) {
    $(".content").hide();
    $(".content").each(function(n) {
        if (n >= (page - 1) && n < (page - 1) + pageSize)
            $(this).show();
    });        
} 
```

# iphone - iOS 应用程序正在同步并安装在 ios6 中，但未安装在 ios 5 及更低版本中？

> ID：13874409
> 
> 赞同：1
> 
> 时间：2012-12-14T07:27:28.683
> 
> 标签：iphone, ios, ios5, ios6

我们开发了一个同时支持 iOS5 和 iOS6 的 iOS 应用程序。问题是ipa文件在iOS6中成功同步并安装，但在iOS5中没有安装。请分享您的建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:34:55.157

可能您的部署目标是 6.0。这就是它没有安装在 iOS 5 设备上的原因。

如果您需要在设备上安装应用程序，则应用程序的部署目标应小于或等于 iOS 设备的操作系统版本。

**将部署目标设置为 5.0。**

还要检查您是否将设备的 UDID 添加到配置文件中（如果您使用的是开发证书）

# delphi - 如何在 Delphi IDE 中探索 dcu 文件的符号？

> ID：13874411
> 
> 赞同：16
> 
> 时间：2012-12-14T07:27:40.763
> 
> 标签：delphi, toolsapi

我们知道 Dcu 文件的规格是一个秘密，每个版本都会更改。是否有**任何可能**的方法来探索 Delphi **IDE**中 dcu 文件中的符号？（而不是使用**DCU32INT**项目等反编译库。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:02:37.813

[这是使用 Delphi7 的尝试](http://www.fatetek.net/lessons/lesson41.shtml)，并且存在[Alexei Hmelnov 的 DCU32INT 实用程序](http://hmelnov.icc.ru/DCU/DCU32INT.txt)。*仅对*DCU 进行逆向工程可能很困难，但[检查可执行文件可能会有所帮助](http://delphi.about.com/od/devutilities/a/decompiling_2.htm)。[有人尝试过 IDA，这里](http://www.woodmann.com/forum/archive/index.php/t-4702.html)提到了 RedPlait 的“IDA Loader for Delphi/Builder 32-bit units (.DCU) with source” ，谷歌搜索我发现[了这个](http://www.openrce.org/downloads/details/13/IDA_DCU_Loader)。

# php - 如何根据该句子中的字符串匹配从段落中删除特定句子？

> ID：13874413
> 
> 赞同：-1
> 
> 时间：2012-12-14T07:27:42.643
> 
> 标签：php, string

例如我有以下段落

> 当您准备好完成采访时，请单击采访我。不用担心，在您参加完整的面试之前，您将有机会练习。工作截止日期为 2030 年 12 月 30 日，因此请确保届时您已回复我们。感谢您申请。

我需要删除包含“2030 年 12 月 30 日”的整个句子。

请提出解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:30:35.550

您可以通过多种方式执行此操作，但我只会使用此方法：

1.  爆炸你的弦`.`
2.  仔细检查你的价值观，只保留那些`December 30, 2030`不存在的价值观。

`.`但是如果你在一个句子里面有a ，这就会有问题。在这种情况下，您将需要考虑一种不同的方式来将您的句子彼此分开。

```
$string = "When you are ready to complete the interview, click Interview me . Don't worry, you will have a chance to practice before you take the full interview. The job closing date is December 30, 2030 so make sure you have your response back to us by then. Thanks for applying.";
$search = "December 30, 2030";

$sentences = explode( '.', $string );

$new_string = '';
foreach ( $sentences as $sentece )
{
    if ( !strpos( $sentece, $search ) )
        $new_string .= $sentece . '.';
} 
```

输出：

```
When you are ready to complete the interview, click Interview me . Don't worry, you will have a chance to practice before you take the full interview. Thanks for applying. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:31:03.090

为什么不先把它分解成句子呢？然后对每个句子运行测试，并且仅在测试告诉您应该包含它时才将其包含在输出中？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T07:30:26.867

一个简单的解决方案是替换

```
str_replace('December 30, 2030', '', 'When you are ready to complete the interview, click Interview me . Don't worry, you will have a chance to practice before you take the full interview. The job closing date is December 30, 2030 so make sure you have your response back to us by then. Thanks for applying'); 
```

这样您也可以使用当前日期更改它：

```
str_replace('December 30, 2030', date('l jS \of F Y h:i:s A'), 'When you are ready to complete the interview, click Interview me . Don't worry, you will have a chance to practice before you take the full interview. The job closing date is December 30, 2030 so make sure you have your response back to us by then. Thanks for applying'); 
```

# ios6 - NSXMLParser 在 iOS 6 中因 NSXMLParserNAMERequiredError 失败

> ID：13874415
> 
> 赞同：4
> 
> 时间：2012-12-14T07:28:06.317
> 
> 标签：ios6, nsxmlparser, nsxmlparsererrordomain

我仅在 iOS 6 中面临解析失败的问题。该代码适用于 iOS 6 的早期版本，但不适用于 iOS 6。我正在尝试将登录请求发送到服务器 url。我收到来自服务器的 xml 格式的响应。我正在使用 NSXMLParser 来解析响应。我能够在 iOS 3.x、iOS 4.x 和 iOS 5.x 中解析 xml，但在 iOS 6 中解析失败。

我正在使用这些行

```
NSXMLParser *m_parser = [[NSXMLParser alloc] initWithData:urlData]; 
[m_parser setDelegate:self];
BOOL parseFlag = [m_parser parse];//parsing failed in iOS 6 
```

在 iOS 6 中只`- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError`被调用。

我得到的错误是 NSXMLParserErrorDomain 错误 68。

详细的源代码如下。

```
-(IBAction)loginButtonPressed:(id)sender
{

         NSMutableString *urlString = [[@"someURL" mutableCopy] autorelease];
        [urlString appendString:@"loginAuthenticate"];
        [urlString appendFormat:@"?username=%@",m_username.text];
        [urlString appendFormat:@"&password=%@",pwd];
        NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

        NSString *postLength = [NSString stringWithFormat:@"%d", [urlString length]];

        NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
        [request setURL:url];
        [request setHTTPMethod:@"POST"]; 

        [request setValue:postLength forHTTPHeaderField:@"Content-Length"]; 
        [request setValue:@"text/xml; charset=utf-16" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:[urlString dataUsingEncoding:NSUTF16StringEncoding]];

        NSError *error; 
        NSURLResponse *response;
        NSData *urlData;
        urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

        NSString *responseXml = [[NSString alloc] initWithData:urlData encoding:NSUTF16StringEncoding];

        if (responseXml &&[responseXml length]>0) 
            {

             NSXMLParser    *m_parser = [[NSXMLParser alloc] initWithData:urlData]; 
            [m_parser setDelegate:self];

                    NSLog(@"urlData:%@",m_parser);
                    BOOL parseFlag = [m_parser parse];//parsing failed in iOS 6

                    if (parseFlag == 1)
                         NSLog(@"parseFlag = YES");//called if iOS version is less than iOS 6
                    else
                    {
                        NSLog(@"parseFlag = NO");//called if iOS version is iOS 6
                    }
                    .
                    .

        }

    // This delegate method is called in iOS 6 only
    - (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {

        NSLog(@"%@",@"parseErrorOccured");
        NSLog(@"parseError:%@",parseError);
        //error is NSXMLParserErrorDomain error 68
    } 
```

# java - java servelt 生成图像的临时 url

> ID：13874417
> 
> 赞同：0
> 
> 时间：2012-12-14T07:28:07.277
> 
> 标签：java, javascript, jakarta-ee, tomcat

我有一个 servlet，它**接受参数**并生成一个图像，其中包含用于在 html 页面中显示图像的用户名和其他用户信息。

我想提供一个**1-2 分钟的临时 URL**，以便这次可以再次打开它**而无需传递参数**

我想要一个 2-3 分钟的网址，之后就不需要了。我如何使用****使用服务器的图像缓存 ****或**任何其他**方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:25:48.680

让您的 servlet 以自动生成的名称（例如使用计数器：23.jpg）将图像保存在磁盘上的特定目录中，并为此 servlet 生成以下临时 URL `/tempImage/23.jpg`：.

将另一个名为 TempImageServlet 的 servlet 映射到 /tempImage/*。

当请求进入 TempImageServlet 时，提取用于调用 servlet 的 URL 中 /tempImage/ 之后的部分：这给出了要加载的文件名。从磁盘读取文件。如果其创建日期早于 2 分钟，则在响应中发送错误代码。否则，从磁盘读取文件并将其发送到 servlet 响应。

您可以让其中一个 servlet 定期扫描磁盘以查找旧文件并将其删除。

# java - 输入存储在 Arraylist 或 String 数组中？（新程序员）Java

> ID：13874420
> 
> 赞同：8
> 
> 时间：2012-12-14T07:28:22.320
> 
> 标签：java, arrays, arraylist

在我看来`ArrayList`，几乎在每种情况下都更容易使用，它非常通用。是否存在`String[]`用于存储输入数据的实例？如果有这种情况，一定有缺点`ArrayList`，那会是什么？

我脑海中唯一想到的就是各种`String`方法，例如，`substring()`和`split()`等。

编辑：StackOverflow 的新手也是如此。如果这是重新发布，我深表歉意。并感谢您的格式化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T05:48:51.790

简短的回答是：不要使用数组，总是使用数组列表。唯一的例外是，如果您绝对需要控制使用的内存量，或者您有一些只能`String[]`支持的特定性能限制。

不过，总的来说，数组在面向对象语言中使用起来很糟糕，而且几乎总是出于相同的原因：它们很容易破坏封装。例如：

```
public class ExampleArray {
  private final String[] strings;

  public ExampleArray(String... strings) { this.strings = strings; }
  public String[] getStrings() { return strings; }
} 
```

看看有什么问题吗？是的，你需要这样写`getStrings()`：

```
// ...
public String[] getStrings() { return Arrays.copy(strings); }
// ... 
```

否则，某些调用者可以获取您班级的内部数据并开始修改它。防止这种情况的唯一方法是每次调用者想要看到它时复制它。与正确的方法相反：

```
public class ExampleList {
  private final List<String> strings;

  // ...

  public List<String> getStrings() { return Collections.unmodifiableList(strings); }
} 
```

现在你不是在复制数据，你只是把它放在一个不允许更改的 API 后面。如果你使用 Guava`Immutable*`类，那就更好了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T07:30:31.620

当然，在某些情况下您想使用它`String[]`。例如，如果您提前知道列表的长度，并且列表可能很大。

使用的主要缺点`ArrayList`是随着列表的增长，必须重新分配数组，这不是自由操作。您可以通过使用[接受`initialCapacity`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#ArrayList%28int%29).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T07:32:26.070

1.  您可以在编译时初始化 Java 数组，例如：

    字符串数据[] = { "a", "b", "c" };

2.  在旧版本的 Java 中，也有类型安全的情况。ArrayList 元素必须转换为原始类型，而 Java 数组则类型安全。

3.  Java 数组是语言的一部分，您将无法更改它们。ArrayList 是 Java API 的一部分。如果您需要（但我*不*推荐），您可以替换您自己的库来实现 ArrayList 作业。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T07:30:50.653

ArrayList 是大小可动态增长的数组，而字符串数组或任何类型的数组的大小都是静态的。

显然，这种动态增长特性会产生一些成本，它会重新分配具有新大小的数组并将元素复制到其中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T07:31:45.800

查看stackoverflow中其他人提出的这些问题：

[Java 中的数组或列表。哪个更快？](https://stackoverflow.com/questions/716597/array-or-list-in-java-which-is-faster)

[Java 性能 - ArrayLists 与 Arrays 的大量快速读取](https://stackoverflow.com/questions/1182892/java-performance-arraylists-versus-arrays-for-lots-of-fast-reads)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-14T07:43:13.100

当数组用于保存某些值时，我想到的唯一情况是当有一种方法采用可变数量的参数时，例如：

```
void doSth(int i, String... strings){
 if(strings.length>0){
  //some stuff
 } 
```

否则，当需要使用数组时，我几乎不会故意制造一种情况。

# ruby-on-rails - Ruby - undefined method `extract_options!' : Array

> ID：13874423
> 
> 赞同：3
> 
> 时间：2012-12-14T07:28:38.353
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-4, tweetstream

While running following sample using [TweetStream](https://github.com/intridea/tweetstream) I am getting mentioned error.

**tweets.rb**

```
require 'tweetstream'

TweetStream.configure do |config|
  config.consumer_key       = '<CONSUMER KEY>'
  config.consumer_secret    = '<CONSUMER SECRET>'
  config.oauth_token        = '<OAUTH TOKEN>'
  config.oauth_token_secret = '<OAUTH TOKEN SECRET'
  config.auth_method        = :oauth
end

TweetStream::Client.new.track('ruby') do |status|
  puts "#{status.text}"
end 
```

**Error**

```
$ ruby tweets.rb 
/home/amit/.rvm/gems/ruby-1.9.3-p194/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:96:in `track': undefined method `extract_options!' for ["ruby"]:Array (NoMethodError)
        from tweets.rb:11:in `<main>'
    https://github.com/intridea/tweetstream 
```

Am I missing something?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T04:53:23.030

Here's another solution: opening up `Array` class and defining `extract_options!` method on it.

Add the following code :

```
class Array
  def extract_options!
    last.is_a?(::Hash) ? pop : {}
  end unless defined? Array.new.extract_options!
end 
```

to the beginning of the `tweets.rb` file or to a separate file (which would need to be required in the `tweets.rb` file).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T08:04:13.283

`extract_options!` is [ActiveSupport](http://apidock.com/rails/ActiveSupport/CoreExtensions/Array/ExtractOptions/extract_options!) method. If it's not rails app you need to install it and include into script.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-21T13:04:30.850

I am too late to answer but i think it'll be useful for ruby naive programmers like me.

To include ActiveSupport method like *extract_options!*, you need to include Active Support.

> require 'active_support'

And if you want to include ruby gems then include rubygems too.

> require 'rubygems'

# iphone - ABNewPersonViewController 在取消时删除联系人

> ID：13874430
> 
> 赞同：0
> 
> 时间：2012-12-14T07:29:26.347
> 
> 标签：iphone, ios, ipad

我正在使用一个`ABNewPersonViewController`来创建一个人。到目前为止一切正常。我确实设置了多值属性以及单个值。点击“添加”后，可以在地址簿中找到联系人。

但是编辑此联系人时出现问题。将联系人添加到地址簿后，我保存`addressbookID`，以便我能够识别联系人是否仍然保存在 AB 中。

因此，如果用户想再次导出联系人，我不会创建新的`ABPersonRecordRef`，而是使用我之前保存的 id 标识的现有联系人：

```
 ABRecordID recordId = [aContact.addressBookRecordId intValue];

    ABRecordRef personRecord = nil;
    if(recordId != 0) {
        personRecord = ABAddressBookGetPersonWithRecordID(addressBook, recordId);
        if(personRecord) {
            return personRecord;
        } else {
            personRecord = ABPersonCreate();
        }
    } else {
        personRecord = ABPersonCreate();
    }
    //set properties etc. 
```

现在的问题是，这只是第一次。如果用户在 中再次显示此人`ABNewPersonViewController`并点击取消，则该记录将在地址簿中删除。虽然之前保存的很好。

我尝试使用`ABUnknownPersonViewController`，但问题是 recordRef 上的属性似乎与`ABNewPersonViewController`.

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:09:58.170

虽然这个线程很旧，但它可能会帮助其他人。尝试覆盖取消事件，如此处所示。它对我有用。

```
- (void)showNewPersonViewController:(ABRecordRef)person
{
    //show new Person view controller
    ABNewPersonViewController *vcNewPerson = [[ABNewPersonViewController alloc] init];
    vcNewPerson.newPersonViewDelegate = self;
    vcNewPerson.displayedPerson = person;

    vcNewPerson.navigationItem.leftBarButtonItem  = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(onNewPersonCancelClick)];

    [self.navigationController pushViewController:vcNewPerson animated:YES];

    [vcNewPerson release];
}

- (void)onNewPersonCancelClick
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:17:51.120

这将对您有用：

[ABNewPersonViewController 可以用来编辑现有记录吗？](https://stackoverflow.com/questions/5988151/can-abnewpersonviewcontroller-be-used-to-edit-existing-records)

它涵盖了一个包含您确切问题的教程。

# mysql - 从以逗号分隔的电子邮件列表中查找特定电子邮件 电子邮件列表存储在一个表字段中

> ID：13874437
> 
> 赞同：0
> 
> 时间：2012-12-14T07:29:54.563
> 
> 标签：mysql

我有一张表，其中包含喜欢蔬菜的电子邮件列表，其中包含喜欢蔬菜的人的电子邮件 Likes_fruits 包含喜欢水果的人的电子邮件

创建查询

```
CREATE TABLE emailList
(
Likes_Vegetables varchar(50),
Likes_Fruits varchar(50),
Drinks varchar(50)
) 
```

插入查询

```
INSERT INTO emailList(Likes_Vegetables,Likes_Fruits,Drinks)
       VALUES("aaa@example.com,ff@example.com","bbb@example.com,dd@example.com,'ee@example.com'","hh@example.com,gg@example.com,cc@example.com") 
```

我想找到 ff@example.com 出现在哪个列表中。或者我想知道 ff@example.com 是在 like_vegetable 字段中还是 ff@example.com 在 like_fruits 字段中

对此有什么查询？

```
SELECT FIND_IN_SET("aaa@example.com",Likes_Vegetables) from emaillist 
```

我试过这个它给出输出1但对其他人来说它显示错误

```
SELECT FIND_IN_SET("ff@example.com",Likes_Vegetables) from emaillist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:38:56.663

你可以试试这个-

```
select * from emaillist where FIND_IN_SET("ff@gmail.com",Likes_Vegetables) 
```

# php - 如何使用数据库表头更新 csv 列名

> ID：13874441
> 
> 赞同：3
> 
> 时间：2012-12-14T07:30:29.123
> 
> 标签：php, mysql, import

过去几天我面临这个问题，现在很沮丧，因为我必须这样做。

我需要用数据库表头更新我的 CSV 文件列名。我的数据库表字段与 CSV 文件不同。现在的问题是，首先我想用数据库表头更新 CSV 文件的列名，然后将其数据与字段映射导入数据库。

请帮助我，我不知道如何解决这个问题。

这是我的 php 代码：

```
$file      = $_POST['fileName'];
$filename  = "../files/" . $file;
$list      = $_POST['str'];
$array_imp = implode(',', $list);
$array_exp = explode(',', $array_imp);
$fp        = fopen("../files/" . $file, "w");
$num       = count($fp);

for ($c = 0; $c < $num; $c++) {
    if ($fp[c] !== '') {
        fputcsv($fp, $array_exp);
    }
}

fclose($fp);

require_once("../csv/DataSource.php");
$path = "../files/test_mysql.csv";
$dbtable = $ext[0];

$csv = new File_CSV_DataSource;
        $csv->load($path);
        $csvData = $csv->connect();
        $res=''; 
        foreach($csvData  as $key)
        {  print_r($key[1]);
            $myKey ='';
            $myVal='';
            foreach($key as $k=>$v)
            { 
                $myKey .=$k.',';
                $myVal .="'".$v."',";

            }
            $myKey = substr($myKey, 0, -1);
            $myVal = substr($myVal, 0, -1); 
            $query="insert into tablename($myKey)values($myVal)";
            $res=  mysql_query($query); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:01:28.293

您有一个现有文件，其中第一行需要替换。

这里一般概述了这一点：

*   [用 PHP 覆盖文件中的行](https://stackoverflow.com/questions/235604/overwrite-line-in-file-with-php)

一些小解释（以及其他问题未涵盖的一些提示）。通常在这里使用两个文件更容易操作：

1.  现有文件（要从中复制）
2.  临时用于写入的新文件。

完成后，旧文件将被删除，新文件将重命名为旧文件的名称。

您的代码不起作用，因为您已经将新的第一行写入*旧*文件。当您关闭它时，这将切断文件的其余部分。

此外，您看起来对一些基本的 PHP 功能有误解，例如[`count`](http://php.net/count)在文件句柄上使用并不能帮助您获得行数。它只会返回 1。

这是您需要做的一步一步：

1.  打开要读取的现有文件。只需阅读它的第一行以推进文件指针 ( [`fgets`](http://php.net/fgets))
2.  打开一个要写入的新文件。将新标题写入其中（就像您已经成功完成的那样）。
3.  将第一个文件中的所有剩余数据复制到新的第二个文件中。PHP 有一个函数，它被称为[`stream_copy_to_stream`](http://php.net/stream_copy_to_stream).
4.  关闭这两个文件。

    > 现在检查新文件是否是您要查找的文件。当这一切正常时，您需要添加更多步骤：

5.  将原始文件重命名为新名称。这可以通过[`rename`](http://php.net/rename).

6.  将您写入的文件重命名为原始文件名。

如果需要，您可以删除在 5 中重命名的文件。 - 但前提是您不再需要它。

就是这样。我希望这是有帮助的。PHP 手册包含所有提到和链接的函数的示例代码。祝你好运。如果您不了解自己的代码，请先使用手册阅读。这减少了您可以引入错误的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:27:00.653

如果您设法插入表格标题，那么您就成功了一半。在我看来，您需要在标题之后附加数据，例如：

`$data = $headers;`

`if($fp[c]!=='')
{ $data .= fputcsv($fp, $array_exp); }`

注意点“。” 在 if 语句中的等于 '=' 之前。`$fp[c]`这将在标题后 添加无空白值。

# ssl - 在 Windows azure 中自定义 ssl

> ID：13874445
> 
> 赞同：0
> 
> 时间：2012-12-14T07:30:36.070
> 
> 标签：ssl, azure

我正在评估 appharbor 和 azure 框架或云应用程序。我在这个网址看到了一篇文章：http: [//blog.appharbor.com/2012/06/10/some-notes-on-the-recent-azure-launch](http://blog.appharbor.com/2012/06/10/some-notes-on-the-recent-azure-launch)，上面写着

> Azure 网站根本无法添加您自己的 SSL 证书。如果您的应用需要 SSL，您将不得不在 Azure 子域上运行并捎带他们的证书。

我在这里有点困惑，所以问题是：

1）这是否意味着如果我的应用程序托管在 azure 中，我无法为我的域（例如：www.mydomain.com）注册和使用 ssl 证书？如果这不能做到——这不是安全 Web 应用程序的一个相当基本的要求吗？为什么它没有在 azure 中实现？

2) Azure 文章谈论共享 ssl 证书。那么，如果我使用共享证书，用户会在证书详细信息中看到什么？他们会看到类似 myapplication.cloudapp.net 的内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:40:45.637

直到今天都是如此。但请注意，Azure 网站是一个**预览**功能，情况**确实会发生变化**。拥有 Azure 网站的自定义 SSL 证书是 Redmond 的团队绝对追求的目标（查看[此处](http://social.msdn.microsoft.com/Forums/pl-PL/windowsazurewebsitespreview/thread/0218204f-7be3-4586-bfdb-831cde6b7937)）。此外，请注意此限制仅对[Windows Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)有效。网站地址通常映射到 myapp.azurewebsites.net。

这不是[Windows Azure 云服务](https://www.windowsazure.com/en-us/home/scenarios/cloud-services/)（映射到 myapp.cloudapp.net）的情况。[您可以在此处](https://www.windowsazure.com/en-us/develop/net/common-tasks/enable-ssl/)和[此处](http://blogs.msdn.com/b/avkashchauhan/archive/2011/03/28/complete-solution-adding-ssl-certificate-with-windows-azure-application.aspx)查看一些文章并举例说明如何为 Azure 云服务配置自定义 SSL 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T08:16:54.307

Azure 网站现在确实支持 SSL 证书，可以购买或自带 SSL 证书。

有关配置，请参阅本文： [https ://azure.microsoft.com/nl-nl/documentation/articles/web-sites-configure-ssl-certificate/](https://azure.microsoft.com/nl-nl/documentation/articles/web-sites-configure-ssl-certificate/)

到目前为止，基本、标准和高级应用程序服务还提供免费 SNI 证书： [https ://azure.microsoft.com/en-us/updates/ssl-connection-pricing-changes/](https://azure.microsoft.com/en-us/updates/ssl-connection-pricing-changes/)

# java - 从 Java 恢复 MySQL 突然停止，没有任何消息并挂起

> ID：13874446
> 
> 赞同：0
> 
> 时间：2012-12-14T07:30:48.957
> 
> 标签：java, mysql, freeze, database-restore

我正在尝试从使用 mysqldump 生成的文件中恢复 MySQL 数据库。我使用包含恢复计划的每个查询的 ArrayList 来执行此操作，并使用 Statement 执行每个查询。

但有时，它会在进程的某个点停止（在不同的执行中可能会有所不同）。它不显示任何错误消息；它只是挂起（发生这种情况时，我需要重新启动 Mysql 服务）。

这是恢复的代码：

```
 ArrayList<String> sql;
    int res;

    FileSQLCommandManager fichero = null;
    try {
        if (pass == null)
            conectar(conn);
        else
            conectar(conn, pass);

        Statement st = null;
        st = conn.createStatement();     

        st.executeUpdate("SET FOREIGN_KEY_CHECKS=0");

        PreparedStatement stConstraints = null;

        String cadenaSQL = null;
        String cadenaSQLConstraints = null;
        String cadenaConstraints;
        ResultSet rs;
        boolean ejecutar = false;

        fichero = new FileSQLCommandManager(fic);

        fichero.open();

        sql = fichero.read();

        cadenaSQL = "";

        for (int i = 0; i < sql.size(); i++) {

            cadenaSQL = sql.get(i);
            ejecutar = true;

            if (ejecutar) {                    

                st = null;
                st = conn.createStatement();
                res = st.executeUpdate(cadenaSQL);
                if (res == Statement.EXECUTE_FAILED) {
                    System.out.println("HA FALLADO LA CONSULTA " + cadenaSQL);
                }

            }

        }
                st.executeUpdate("SET FOREIGN_KEY_CHECKS=1");
                st.close();
        fichero.close();

        commit();
        desconectar();
        fichero = null;
        return true;

    } catch (Exception ex) {
        ex.printStackTrace();
        rollback();
        desconectar();
        return false;
    }

} 
```

FileSQLCommandManager 是一个填充 ArrayList 的类。这行得通，ArrayList 内容没问题。它在任何查询的 executeUpdate 时停止（并非总是如此，有时它在使用相同的 SQL 文件时不会出现问题）。

首先，我禁用外键检查，因为它可以删除带有引用的表（表的重新创建顺序由 SQL 转储设置）。

有什么提示吗？

谢谢; 我对此很生气:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:34:02.590

你为什么要经历所有这些工作，当一个简单的`mysql < db_backup.dump`人会为你恢复整个事情时？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T12:15:58.347

这真的适用于恢复

```
 String comando = "C:\\MySQL\\bin\\mysql.exe  --host=localhost --port=3306 --user=root --password=123 < D:\\back.sql";
File f = new File("restore.bat");
FileOutputStream fos = new FileOutputStream(f);
fos.write(comando.getBytes());
fos.close();
Process run = Runtime.getRuntime().exec("cmd /C start restore.bat "); 
```

和备份

```
 DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd", Locale.forLanguageTag("ru"));
    java.util.Date currentDate = new java.util.Date();
    Process p = null;
    try {
        Runtime runtime = Runtime.getRuntime();
        p = runtime.exec("C:\\MySQL\\bin\\mysqldump.exe  --default-character-set=utf8 -uroot -p123 -c  -B shch2 -r " + "D:/" + dateFormat.format(currentDate) + "_backup" + ".sql"); 
```

//用您的 dbpass 和 dbname 更改 dbpass 和 dbname int processComplete = p.waitFor();

```
 if (processComplete == 0) {

            System.out.println("Backup created successfully!");

        } else {
            System.out.println("Could not create the backup");
        }

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

但您需要传达 mysql.exe 和 mysqldump.exe 的确切路径

# winapi - WinApi - 在编辑控件中将部分文本设置为不可编辑（半只读编辑框）

> ID：13874455
> 
> 赞同：2
> 
> 时间：2012-12-14T07:31:55.713
> 
> 标签：winapi, editcontrol

我有一个小问题。我想要一个 Edit 控件，其中包含一个文本（类似于：“ABC@”）。该字符串必须是不可编辑的，这样用户就不能删除它。用户应该只能在符号“@”之后键入文本。我知道如何在编辑框中使文本只读。我使用 EM_SETREADONLY 消息

```
//global variables
 #define ID_TEXTBOX 1
 static HWND hwndTextBox;

//in WndProc function
  case WM_CREATE:
    {

      hwndTextBox = CreateWindow(TEXT("EDIT"),TEXT("abc@"),WS_VISIBLE | WS_CHILD | WS_BORDER   ,70,100, 200,25,hWnd,(HMENU)ID_TEXTBOX,NULL,NULL);

      if(!hwndTextBox )
        {
            MessageBox(hWnd,"Failed","Failed",MB_OK);
            return FALSE;
        }

      SendMessage(hwndTextBox,EM_SETREADONLY,TRUE ,NULL);

      break;

    } 
```

但是代码使整个文本只读，当然不能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:30:38.623

这可能不是您要寻找的，但它可能只需要一点代码开销即可模仿所需的功能。

您可以子类化编辑控件，然后通过 WM_CHAR 消息捕获任何可能修改编辑框内容的用户输入。一旦您的程序接收到消息，您就会在编辑框中检测到当前选择（即插入符号位置），如果它位于前四个字符内的任何位置，则您根本不允许更改。这是一个有点粗略的方法，但它应该工作。

汇编中的示例，对不起，我对 C 语言不够精通，而 C 语言就是这样一个拖累：D

```
 invoke SetWindowLong,hEditBox,GWL_WNDPROC,offset EditProc
    mov DefEditProc,eax
    ...

EditProc proc hWnd:DWORD,uMsg:DWORD,wParam:DWORD,lParam:DWORD
    cmp uMsg,WM_CHAR
    je @WM_CHAR
    cmp uMsg,WM_KEYUP
    je @WM_KEYUP

@DEFAULT:
    invoke CallWindowProc,DefEditProc,hWnd,uMsg,wParam,lParam 
    ret
@EXIT:
    xor eax,eax
    ret

;=============
@WM_KEYUP:
    mov eax,wParam          ; you will need this if you want to process the delete key
    cmp ax,VK_DELETE
    je @VK_DELETE
    jmp @DEFAULT

;=============
@WM_CHAR:
    mov eax,wParam
    cmp ax,VK_BACK          ; this is for the backspace key
    je @BACKSPACE
    cmp ax,VK_0
    jb @EXIT                ; if null is returned, the char will not be passed to the edit box
    cmp ax,VK_9
    ja @EXIT
    jmp @NUMBER

;---
@VK_DELETE:
@NUMBER:
    invoke SendMessage,hWnd,EM_GETSEL,offset start,0        ; the caret position through text selection, we just need the starting position
    cmp start,3
    ja @DEFAULT     ; if the caret is placed somewhere past the 4th charater, allow user input
    jmp @EXIT

;---    
@BACKSPACE:
    invoke SendMessage,hWnd,EM_GETSEL,offset start,0
    cmp start,4
    ja @DEFAULT     ; since you're deleting one character to the left, you need to factor that in for backspace
    jmp @EXIT

EditProc endp 
```

非常简洁，希望你能明白它的要点。此示例仅允许数字 (0-9)、DEL 和 BACKSPACE 键通过。您可以扩展以满足您的需求。

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:12:28.500

使用 RichEdit 控件而不是 Edit 控件。使用该[`EM_SETCHARFORMAT`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774230.aspx)消息将单个字符或字符范围标记为“受保护”。使用该[`EM_SETEVENTMASK`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774238.aspx)消息注册[`EN_PROTECTED`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787981.aspx)来自 RichEdit 的通知。这样，如果用户出于任何原因尝试修改一个或多个受保护字符，RichEdit 将在允许修改之前征求您的许可。

# javascript - 如何在 Ember.js 中调用 jQuery 的 hide() 方法？

> ID：13874459
> 
> 赞同：3
> 
> 时间：2012-12-14T07:32:29.630
> 
> 标签：javascript, jquery, ember.js

我正在尝试使用 jQuery 方法隐藏一个对象`hide()`，但它不起作用。

我使用 console.log() 检查被调用函数中参数的值，所以我知道我做得不对。但是，我不知道如何使它工作......

这是我所拥有的：

```
#------------------------Model------------------------

App.Monster = Ember.Object.extend({

name: "",
hp: 0,
isDead : false,

isDeadChanged: function(target, value){
    App.monstersController.kill(target);
}.observes('isDead')

});

#------------------------Controller------------------------

App.monstersController = Ember.ArrayProxy.create({

content:[],

createMonster: function(name,hp){
    var monster = App.Monster.create({name:name});
    this.pushObject(monster);
},

kill: function(target){

    //I Want the selected object to hide by using Jquery hide method!!
    $('target').hide();

    this.removeObject(target);

},

#------------------------HTML FILE------------------------

{{#each App.monstersController contentBinding="App.monstersController.content" tagName="ul"}}
    <li>
        {{view Ember.Checkbox checkedBinding="isDead"}}
        <label for="" {{bindAttr class="isDead"}}>{{name}}</label>
    </li>
{{/each}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:52:09.190

通常将您的 DOM 脚本模式引入 Ember 是行不通的，因为 Ember 不是关于 DOM 操作，而是关于使用对象描述您的应用程序。应用程序的 DOM 表示将自动更新以反映其底层数据对象的状态。

Ember.View 使用该属性跟踪其可见性（及其子视图的可见性），`isVisible`并将为您处理切换它的 DOM 表示。您应该尝试揭示给定视图上下文的可见性的语义对象含义。例如，如果您决定不应该看到待办事项列表中的已完成项目，您可以：

```
{{#each item in controller}}
  {{view App.TodoItemView isVisibileBinding="item.isComplete"}} <a {{action kill item}}>Done!</a>
{{/each}} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T07:36:13.427

不要引用`target`。

```
kill: function(target){   
    //I Want the selected object to hide by using Jquery hide method!!
    $(target).hide();   
    this.removeObject(target);
}, 
```

`$('target')`寻找`<target>`元素。

# php - 使用 PDO 创建表单搜索

> ID：13874466
> 
> 赞同：0
> 
> 时间：2012-12-14T07:33:16.277
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [带有“WHERE…IN”查询的 PDO](https://stackoverflow.com/questions/2373562/pdo-with-where-in-queries)

在我的搜索表单中，有很多复选框和字段。
一些复选框属于该组。
示例组，城市。
像下面这样查询

```
SELECT id, city_id, area, city FROM an_objects  
                WHERE livedays > 0 AND type_id = :typeoffer AND rubric_id = :typerelaty 
                AND CASE 
                    WHEN :1r = '' THEN true 
                    ELSE city_id IN (:1r, :2r, :99r, :100r)
                END
                GROUP BY id ORDER BY date ASC 
```

在这个例子中，需要填写4个参数，也就是一百个。
但我想做

```
SELECT id, city_id, area, city FROM an_objects  
            WHERE livedays > 0 AND type_id = :typeoffer AND rubric_id = :typerelaty 
            AND CASE 
                WHEN :1r = '' THEN true 
                ELSE city_id IN (:arrCity)
            END
            GROUP BY id ORDER BY date ASC 
```

字符串形式如此

```
if(isset($param['city']))
{
    for($i=0; $i < 9; $i++)
    {
        if(isset($param['city'][$i]))
            $raion .= $param['city'][$i] . ",";
        else
            break;
    }
    $arrCity = substr($city, 0, -1);        
} 
```

我们将以下
**(:arrCity) 替换为 ("1,2,3,4,5,6")。** 这是作为单个字符串获得的，但是如何执行以下操作
**（：arrCity）（1,2,3,4,5,6）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:28:31.020

这是一个有趣的问题，它清楚地证明了 PDO 比旧的 mysql_* 使用起来更麻烦，并且没有为广泛的现实生活查询提供良好的安全性。

为了使这些任务更容易，数据库访问库应该允许两个主要的事情：

*   要在内部处理的复杂数据类型的附加占位符。
*   在任意查询部分处理占位符，而不是仅在整个查询中处理

并且 PDO 都失败了。
因此，程序员必须自己照顾它们。

因此，通过使用实现这些原则的库，代码将既短又安全：

```
if(isset($param['city']))
{
    $raion = $db->parse("AND (city_id IN (?a)", $param['city']);
}
//  you can add any number of such conditions making your search flexible
// the only thing you have to keep in mind: add a value ONLY via placeholder

$sql = "SELECT id, city_id, area, city FROM an_objects  
       WHERE livedays > 0 AND type_id = ?i AND rubric_id = ?i
       ?p
       GROUP BY id ORDER BY date ASC";
$data = $db->getAll($sql, $typeoffer, $typerelaty, $raion); 
```

是的，就这几行简洁易读的代码！

如果我误解了您的条件 - 请随时询问更多详细信息，提供构建查询的确切逻辑。我很乐意根据您的条件编写确切的代码，只是为了展示我正在谈论的库的强大功能。

# java - 编译目录中的所有 java 文件，也包括更深目录中的文件

> ID：13874470
> 
> 赞同：0
> 
> 时间：2012-12-14T07:33:30.780
> 
> 标签：java, javac

我正在使用`javac mypackage/*.java`，但我希望它还包括`.java`mypackage 文件夹中的文件夹中的文件，以及这些文件夹中的文件夹等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:35:31.623

在类 Unix 操作系统上，`find ./mypackage -name '*.java' | xargs javac`应该对您进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T20:18:24.957

您也可以创建一个 ant 或 maven 脚本来完成同样的事情。这些脚本将为您提供一种更易于管理的方式来构建和部署项目。有关 ant 的详细信息，请参见： [http](http://ant.apache.org/) ://ant.apache.org/用于 ant 和[http://maven.apache.org/guides/](http://maven.apache.org/guides/)用于 maven 脚本。

希望这可以帮助。

# javascript - 将 UTC 日期转换为 mm/dd/yyyy

> ID：13874480
> 
> 赞同：0
> 
> 时间：2012-12-14T07:34:04.273
> 
> 标签：javascript, date, datetime

我有一个 isoUtc 格式的日期，我想将其转换为 mm/dd/yyyy 格式。我尝试使用[此博客条目中给出的提示，](http://blog.stevenlevithan.com/archives/date-time-format)但我面临的问题是，如果我转换`2007-04-06T00:00Z`它会在用户时区不同时给出不同的日期。我希望它应该`04/06/2007`始终独立于用户时区。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:47:42.990

如果您始终采用不变的格式，您可以这样做：

```
var dateString = '2007-04-06T00:00Z',
    dateRegExp = /(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})/,
    match = dateString.match(dateRegExp),
    date;

if (match) {
  date = new Date(match[1], match[2] - 1, match[3], match[4], match[5]);

  console.log(date);
} 
```

[演示](http://jsbin.com/axufoj/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:54:04.947

```
var d = '2007-04-06T00:00Z';
var d2 = d.substring(5,7)+'/'+d.substring(8,10)+'/'+d.substring(0,4);
// outputs 04/06/2007 
```

# java - Eclipse Virgo 与 Apache Servicemix

> ID：13874481
> 
> 赞同：5
> 
> 时间：2012-12-14T07:34:09.687
> 
> 标签：java, osgi, apache-servicemix, eclipse-virgo

我是 OSGi 主题的新手，但尝试了解有关这项技术的一些知识。

经过一番研究，我找不到问题的答案：Eclipse Virgo 和 Apache ServiceMix 之间的真正区别是什么？

我自己做了什么来揭开这个谜团。我已经看过两者，首先我认为 Virgo 似乎类似于 OSGi 的 Web 服务器，而 ServiceMix 更像是总线。但是后来我看到 ServiceMix 附加了码头，我什至可以添加一个 Web 控制台功能来从浏览器管理 ServiceMix，所以我完全糊涂了。现在我不知道，也许 Virgo 和 ServiceMix 是同一种软件，但具有不同的捆绑包和生产者（类似于例如码头和 tomcat）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T22:56:29.747

Virgo 和 Apache Karaf 是 OSGi 运行时容器，两者都包含部署 Web 应用程序的功能，这些应用程序部署到底层 Web 容器。Apache ServiceMix 确实在 Karaf 之上提供了 ESB，因此 ServiceMix 实际上比 Virgo 做得更多。

# system.reactive - 使用 signalR 集线器时出现 Rx 未定义错误

> ID：13874482
> 
> 赞同：2
> 
> 时间：2012-12-14T07:34:19.180
> 
> 标签：system.reactive, signalr, signalr-hub

我正在尝试使用 signalR 集线器实现推送通知。我有一个示例代码，当我运行它时，我收到一条错误消息说 JavaScript 运行时错误：'Rx' is undefined

此错误出现在动态信号器/集线器文件中。我已经添加了所有必要的 Javascript 参考，即 jquery、signalR 和 signalr/hubs。

我错过了什么？

我的代码看起来像这样：

Global.asax 文件有这个

```
public class Global : System.Web.HttpApplication
    {

        protected void Application_Start(object sender, EventArgs e)
        {

            RouteTable.Routes.MapHubs("~/signalr");

        } 
```

我的 Hub 是这样定义的

```
 [HubName("HealthCheck")]
    public class MyConnectionClass : Hub
    {
        public static List<string> messages = new List<string>();

        public void GetServiceState()
        {
            Clients.updateMessages(messages);
        }

        public void UpdateServiceState()
        {
            messages.Add(DateTime.Now.ToString("dd/MM/yyyy HH:mm:ss"));

            Clients.updateMessages(messages);
        } 
```

我的客户在 javascript 中是这样的

```
 $(function () {
                // creates a proxy to the health check hub
                var healthCheckHub = $.connection.healthCheck;

                // handles the callback sent from the server
                healthCheckHub.updateMessages = function (data) {
                    $("li").remove();

                    $.each(data, function () {
                        $('#messages').append('<li>' + this + '</li>');
                    });
                };

                $("#trigger").click(function () {
                    healthCheckHub.server.updateServiceState();
                });

                // Start the connection and request current state
                $.connection.hub.start(function () {
                    healthCheckHub.server.getServiceState();
                });
            }); 
```

我还在客户端中添加了所有必要的 js 引用。我从[这里](http://blog.devscrum.net/2011/12/getting-started-with-signalr-in-asp-net-mvc/)挑选了这个样本 这够了吗还是我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:53:05.310

鉴于错误是关于未定义 Rx，我想知道您是否安装了错误的 NuGet 包。听起来您安装了[SignalR.Reactive](https://github.com/cburgdorf/SignalR.Reactive)。

我认为[这](http://nuget.org/packages/Microsoft.AspNet.SignalR)是你真正想要的包。（请注意，这是一个预发布版本，我认为软件包名称最近发生了变化，因此您所遵循的教程可能有点过时，这可能是造成混乱的原因。）

# objective-c - 从另一个类访问 ccsprite

> ID：13874485
> 
> 赞同：0
> 
> 时间：2012-12-14T07:34:43.707
> 
> 标签：objective-c, ios, cocos2d-iphone, ccsprite

在啊我这样写

```
@interface A
{
  CCSprite *loadingSprite;
}

- (void)getTag;

@property (nonatomic, retain) CCSprite *loadingSprite;

@end 
```

然后在实施中

```
@synthesize loadingSprite

- (id)init
{
 loadingSprite = [CCSprite spriteWithSpriteFrameName:@"loading-icon1.png"];
 [loadingSprite setTag:111];
 [self addChild:loadingSprite];
}

- (void)getTag
{
 NSLog(@"%@ tag %d",[loadingSprite getChildByTag:111] , [loadingSprite getChildByTag:111].tag)
} 
```

在另一个类上，Bm 我写访问方法 getTag

```
A *a = [[A alloc] init];
[a getTag]; 
```

但不幸的是，getTag 中的 NSLog 显示：

```
(null) tag 0 
```

如何从另一个类访问 ccsprite 的正确方法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:53:01.850

查看我的教程“在场景层次结构中访问其他 Cocos2D 节点的策略”： http: [//www.learn-cocos2d.com/2012/09/strategies-accessing-cocos2d-nodes-scene-hierarchy/](http://www.learn-cocos2d.com/2012/09/strategies-accessing-cocos2d-nodes-scene-hierarchy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:38:49.533

您正试图从精灵中按标签获取孩子。你想得到这个精灵。所以，如果你想使用`getChildByTag:`，使用

```
[self getChildByTag: tag]; 
```

代替

```
[yourSprite getChildByTag: tag]; 
```

当您将精灵添加到`self`. 您只能从其父级按标签获取子级。

哦，改变你的初始化方法。当您覆盖父级的初始化时，您应该首先调用父级的方法。

```
- (id) init
{
    self = [super init];

    if( self != nil )
    {
        // do your initialization here
    }

    return self
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:53:51.773

另一件事-您不必保留添加到类中的节点，因为 cocos2d 会在您使用时自动保留任何节点，`[self addChild:node]`并在您释放基本节点时释放，因此更好地使用`@property (nonatomic, assign) CCSprite *loadingSprite;`

您可以使用该属性从其他类访问节点 - 只需`a.loadingSprite`在您的示例中使用。毕竟，使用标签并不是访问节点的最佳解决方案，因为当您拥有大量节点和大量标签时，您可能很容易迷失在那里。

# c# - 转换 Double --> Decimal 不完全

> ID：13874488
> 
> 赞同：2
> 
> 时间：2012-12-14T07:35:10.577
> 
> 标签：c#

> **可能重复：**
> [C# 中的 Decimal、Float 和 Double 有什么区别？](https://stackoverflow.com/questions/618535/what-is-the-difference-between-decimal-float-and-double-in-c)

帮我。

我正在用 C# 开发一个应用程序。我在尝试：

```
DateTime dtm1 = new DateTime(2012, 11, 15, 11, 3, 0);
DateTime dtm2 = new DateTime(2012, 11, 15, 11, 3, 20);
TimeSpan timespan3 = dtm2 - dtm1;
decimal _Hour = Convert.ToDecimal(timespan3.TotalHours); 
```

什么时候做这样的输出如下：

```
 _Hour = 0.00555555555555556M 
```

而这不完全是，当使用是一种双倍输出时：

```
 double _Hour = timespan3.TotalHours;

 output: 0.0055555555555555549 
```

一个例子：

```
public decimal tinhDienTichHinhThang(decimal D1, decimal D2, decimal H)
        {
            //tính tổng 2 đáy
            decimal tong2Day = D1 + D2;
            //cộng vào nhân chiều cao :))
            tong2Day = tong2Day * H;

            //return diện tích
            return tong2Day / 2;
        }

DateTime dtm1 = new DateTime(2012, 11, 15, 11, 3, 0);
DateTime dtm2 = new DateTime(2012, 11, 15, 11, 3, 20);
TimeSpan timespan3 = dtm2 - dtm1;

///progress
///cal1: _Hour
///cal2: decimal D1 = 0.25
///cal3: decimal D2 = 5
///cal4: decimal D3 = 0.9

decimal test1 = (decimal test1 = Math.Round((D1 + tinhDienTichHinhThang(D2, 0, Convert.ToDecimal(timespan3.TotalHours))) * D3, 3, MidpointRounding.AwayFromZero); 
```

输出：test1 = 0.237

如果手动计算：

```
test1 =  Math.Round((0.25 + ((5+0)*timespan3.TotalHours/2))*0.9, 3, MidpointRounding.AwayFromZero); 
```

输出：test1 = 0.238（确切地说：0.2375）

注意：计算win XP 则准确：0.2375 但计算win 7 则不准确。

请解释一下我为什么和解决这个问题的问题的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:37:28.983

双精度数是浮点值。它们仍然被限制为 64 位精度，但它们有一个值和一个将值提升到的指数（本质上是科学记数法）。这就是为什么它们的范围比 int 或 long 多，但由于这个扩展的范围，它们不能表示该范围内的所有可能值。

小数的位数比双精度多，因此在转换值时，您只会看到双精度与小数相比精度较低的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:39:47.200

我不确定你的问题是什么。但是，如果您对十进制和双精度值的不同值有疑问，那是设计使然。默认情况下具有浮点数的数字不精确。

**更新：（在答案中回答您的问题）**

由于这个问题，您的答案中的第一个和第二个陈述不同：

原因

```
5M * Convert.ToDecimal(timespan3.TotalHours)/ 2M 
```

计算是十进制的，但以秒为单位：

```
5 * timespan3.TotalHours / 2 
```

计算是双倍的（因为 timespan3.TotalHours 是双倍的）。这意味着结果可能与第一个语句不同。但是在计算的时候，你将它转换为十进制，它会隐式地将值转换为十进制，这可以改变值。

在第三个语句中，您也有整数值计算，但 double 是浮点类型，因此它的值可以不同于第二个语句，其中定点类型十进制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:19:30.440

```
decimal test1 = (0.25M + 5M * Convert.ToDecimal(timespan3.TotalHours) / 2M) * 0.9M;

decimal test2 = (decimal)((0.25 + 5 * timespan3.TotalHours / 2) * 0.9);

double test3 = (0.25 + 5 * timespan3.TotalHours / 2) * 0.9; 
```

何时执行此操作时，它们的以下输出不一样。你能指导解决这个问题吗？

# xml - 使用atompub检索数据是不是错了

> ID：13874493
> 
> 赞同：0
> 
> 时间：2012-12-14T07:36:03.783
> 
> 标签：xml, windows-8, rss, xmlhttprequest, winjs

我正在使用 WinJS 为 Windows 8 构建一个 RSS 提要阅读器。

使用 atomPub 从请求中检索数据对我来说是错误的吗？我尝试让 htmlrequest 在我的 Windows 8 应用程序上工作，但是 Windows 8 HTML5 WinRT 应用程序：如何在 30 分钟内创建一个小型 RSS 阅读器，由 David Rousset 发表来自博客网站的 RSS 源数据。教程，最终对我不起作用。代码中使用 xhr 的部分。我插入我的网站。但应用程序在

`var items = rss.responseXML.querySelectorAll("item");`

我得到的错误是。“0x800a138f - JavaScript 运行时错误：无法获取未定义或空引用的属性 'querySelectorAll'”

我要下拉的链接是[http://store.steampowered.com/feeds/newreleases.xml](http://store.steampowered.com/feeds/newreleases.xml)

但是如果我将 atompub 与`client.retrieveFeedAsync(resourceUri).done(function (feed)`

它拉下来了，但是我在设计某些项目时遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:15:50.113

这没有错。AtomPub API 与主要设计用于使用 RSS 和 Atom 提要的[Syndication](http://msdn.microsoft.com/en-us/library/windows/apps/windows.web.syndication.aspx) API 共享许多组件。

可能您想用 SyndicationClient 更改 AtomPubClient。

```
var client = new Windows.Web.Syndication.SyndicationClient();
client.retrieveFeedAsync(resourceUri).done(
    function(feed){},
    function(error){}); 
```

此外，这里有一个[示例](http://code.msdn.microsoft.com/windowsapps/Syndication-sample-07ef6b0d)。

# java - 从项目外部检索时在 UI 上显示图像的问题

> ID：13874495
> 
> 赞同：0
> 
> 时间：2012-12-14T07:36:19.507
> 
> 标签：java, html, json

我有一个 Java 项目上传功能，它将图像上传到服务器位置 C:/temp，我希望在上传后立即在 UI 上显示相同的图像，但问题是当我将图像路径（C:/temp）传递到 JSON 时然后系统正在读取相对于项目的图像路径并收到错误 (NetworkError: 404 Not Found - http://localhost:8080/group/images/c:/temp/Jellyfish.jpg")，因为文件存在于 C 中:/temp。这可能是什么解决方案。请帮帮我？

谢谢， 安基特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:44:44.950

您需要一个 servlet 来读取文件`c:\temp`，并将读取的字节发送到 servlet 的响应输出流。您还需要将响应的内容类型设置为您发送的图像的 mime 类型（`image/png`例如），并将内容长度设置为文件中的字节数。

这是您必须传递给 JSON 对象的这个 servlet 的 URL。

# vb.net - 如何使用 VB.NET 比较 2 个 JSON 结构？

> ID：13874498
> 
> 赞同：0
> 
> 时间：2012-12-14T07:36:28.807
> 
> 标签：vb.net, json, compare

我是 JSON.NET 的新手。我正在尝试使用 VB.NET 比较 2 个 JSON 结构，例如

`{ "attrs":[ { "name":"_DB_ATTR_OSD_PARENT_", "column":"OsDeployerParent", "type":"Integer", "enumName":null }, { "name":"_DB_ATTR_SMALLICON_", "column":"CurrentSmallIcon", "type":"Enum" } ] }`

请有人可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:56:28.810

新代码

```
string jsonObjects = @"{ 'attrs':[ { 'name':'_DB_ATTR_OSD_PARENT_', 'column':'OsDeployerParent', 'type':'Integer', 'enumName':null }, { 'name':'_DB_ATTR_SMALLICON_', 'column':'CurrentSmallIcon', 'type':'Enum' } ] }";
    string jsonObjects2 = @"{ 'attrs':[ { 'name':'_DB_ATTR_OSD_PARENT_', 'column':'OsDeployerParent1', 'type':'Integer', 'enumName':null }, { 'name':'_DB_ATTR_SMALLICON_', 'column':'CurrentSmallIcon', 'type':'Enum' } ] }";
    System.Web.Script.Serialization.JavaScriptSerializer js = new System.Web.Script.Serialization.JavaScriptSerializer();
    var objects = js.Deserialize(jsonObjects, typeof(testObjects));
    var objects2 = js.Deserialize(jsonObjects2, typeof(testObjects));

    ObjectComparer2 cmp = new ObjectComparer2();

    testObjects deserializedObject = ((testObjects)objects);
    testObjects deserializedObject2 = ((testObjects)objects2);
    bool isObjectEquals = cmp.Equals(deserializedObject, deserializedObject2);
    Console.WriteLine(string.Format("Objects are {0}", isObjectEquals ? "Equals" : "Not Equals"));

Class ObjectComparer
Inherits EqualityComparer(Of testObject)
Public Overrides Function Equals(c1 As testObject, c2 As testObject) As Boolean
    If c1.name = c2.name AndAlso c1.column = c2.column AndAlso c1.enumName = c2.enumName AndAlso c1.type = c2.type Then
        Return True
    Else
        Return False
    End If
End Function

Public Overrides Function GetHashCode(c As testObject) As Integer
    Dim hash As Integer = 23
    If c.name IsNot Nothing Then
        hash = hash * 37 + c.name.GetHashCode()
    End If
    If c.column IsNot Nothing Then
        hash = hash * 37 + c.column.GetHashCode()
    End If
    If c.enumName IsNot Nothing Then
        hash = hash * 37 + c.enumName.GetHashCode()
    End If
    If c.type IsNot Nothing Then
        hash = hash * 37 + c.type.GetHashCode()
    End If
    Return hash
End Function 
```

结束类

类 ObjectComparer2 继承 EqualityComparer(Of testObjects) 公共覆盖函数 Equals(c1 As testObjects, c2 As testObjects) As Boolean Dim cmp As New ObjectComparer()

```
 For Each obj1 As testObject In c1.attrs
        If Not c2.attrs.Any(Function(x) cmp.Equals(x, obj1)) Then
            Return False
        End If
    Next
    Return True
End Function

Public Overrides Function GetHashCode(c As testObjects) As Integer
    Dim hash As Integer = 23
    For Each obj As testObject In c.attrs
        hash += obj.GetHashCode()
    Next
    Return hash
End Function 
```

结束类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:59:11.130

这是vb代码

> 要使用的类

```
Public Class testObjects
    Public attrs As List(Of testObject)
End Class
Public Class testObject
    Public name As String
    Public column As String
    Public type As String
    Public enumName As String

End Class 
```

> 备课比较

```
Class ObjectComparer
    Inherits EqualityComparer(Of testObject)
    Public Overrides Function Equals(c1 As testObject, c2 As testObject) As Boolean
        If c1.name = c2.name AndAlso c1.column = c2.column AndAlso c1.enumName = c2.enumName AndAlso c1.type = c2.type Then
            Return True
        Else
            Return False
        End If
    End Function

    Public Overrides Function GetHashCode(c As testObject) As Integer
        Dim hash As Integer = 23
        If c.name IsNot Nothing Then
            hash = hash * 37 + c.name.GetHashCode()
        End If
        If c.column IsNot Nothing Then
            hash = hash * 37 + c.column.GetHashCode()
        End If
        If c.enumName IsNot Nothing Then
            hash = hash * 37 + c.enumName.GetHashCode()
        End If
        If c.type IsNot Nothing Then
            hash = hash * 37 + c.type.GetHashCode()
        End If
        Return hash
    End Function
End Class 
```

> 操作从这里开始

```
Dim jsonObjects As String = "{ 'attrs':[ { 'name':'_DB_ATTR_OSD_PARENT_', 'column':'OsDeployerParent', 'type':'Integer', 'enumName':null }, { 'name':'_DB_ATTR_SMALLICON_', 'column':'CurrentSmallIcon', 'type':'Enum' } ] }"
Dim js As New System.Web.Script.Serialization.JavaScriptSerializer()
Dim objects = js.Deserialize(jsonObjects, GetType(testObjects))

Dim cmp As New ObjectComparer()

Dim deserializedObject As testObjects = DirectCast(objects, testObjects)

' this allows you to remove double entries
Dim distinctObjects = deserializedObject.attrs.Distinct(cmp).ToList()
Console.WriteLine(String.Format("duplicate objects count : {0}", (deserializedObject.attrs.Count - distinctObjects.Count).ToString()))

'If you want to compare if the following code can be used individually
Dim obj1 As testObject = DirectCast(objects, testObjects).attrs.First()
Dim obj2 As testObject = DirectCast(objects, testObjects).attrs.Skip(1).First()
Dim isObjectEquals As Boolean = cmp.Equals(obj1, obj2)

Console.WriteLine(String.Format("Objects are {0}", If(isObjectEquals, "Equals", "Not Equals"))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:54:19.170

> 要使用的类

```
public class testObjects
{
    public List<testObject> attrs;
}
public class testObject
{
    public string name;
    public string column;
    public string type;
    public string enumName;

} 
```

> 备课比较

```
class ObjectComparer : EqualityComparer<testObject>
{
    public override bool Equals(testObject c1, testObject c2)
    {
        if (c1.name == c2.name &&
            c1.column == c2.column &&
            c1.enumName == c2.enumName &&
            c1.type == c2.type)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    public override int GetHashCode(testObject c)
    {
        int hash = 23;
        if (c.name != null) hash = hash * 37 + c.name.GetHashCode();
        if (c.column != null) hash = hash * 37 + c.column.GetHashCode();
        if (c.enumName != null) hash = hash * 37 + c.enumName.GetHashCode();
        if (c.type != null) hash = hash * 37 + c.type.GetHashCode();
        return hash;
    }
} 
```

> 操作从这里开始

```
string jsonObjects = @"{ 'attrs':[ { 'name':'_DB_ATTR_OSD_PARENT_', 'column':'OsDeployerParent', 'type':'Integer', 'enumName':null }, { 'name':'_DB_ATTR_SMALLICON_', 'column':'CurrentSmallIcon', 'type':'Enum' } ] }";
        System.Web.Script.Serialization.JavaScriptSerializer js = new System.Web.Script.Serialization.JavaScriptSerializer();
        var objects = js.Deserialize(jsonObjects, typeof(testObjects));

        ObjectComparer cmp = new ObjectComparer();

        testObjects deserializedObject = ((testObjects)objects);

        // this allows you to remove double entries
        var distinctObjects = deserializedObject.attrs.Distinct(cmp).ToList();
        Console.WriteLine(string.Format("duplicate objects count : {0}", (deserializedObject.attrs.Count - distinctObjects.Count).ToString()));

        //If you want to compare if the following code can be used individually
        testObject obj1 = ((testObjects)objects).attrs.First();
        testObject obj2 = ((testObjects)objects).attrs.Skip(1).First();
        bool isObjectEquals = cmp.Equals(obj1, obj2);

        Console.WriteLine(string.Format("Objects are {0}", isObjectEquals ? "Equals" : "Not Equals")); 
```

# java - eclipse项目与maven的集成

> ID：13874502
> 
> 赞同：0
> 
> 时间：2012-12-14T07:36:45.540
> 
> 标签：java, maven, pom.xml

我在eclipse ide中导入了一个maven项目。当我在做

> mvn 干净安装

收到以下错误

> non-resolvable parent pom failure to find [http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)被缓存在本地存储库中，直到中央的更新间隔已经过去或强制更新并且'parent.relativePath'才会重新尝试解析' 指向没有本地 POM。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:58:56.877

Maven 找不到你的 pom 的父级。

你有两种方法来解决这个问题。

首先在您的父项目上运行 mvn clean install。或者确保`<relativePath>...</relativePath>`在子 pom.xml 中正确设置了父级。

如果您仍然有问题，请发布您的 pom，我们会看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T07:42:47.420

Eclipse is not able to find the setting.xml file from the default path of user Setting so their is two solution

1.  Add the settings.xml file in the default location which is shown in the Run COnfiguration e.g : [![enter image description here](../Images/5bd10771b9aaff81316afd5c0d1cc791.png)](https://i.stack.imgur.com/1Vy8X.png)

2.  Add the User setting path where your maven/conf/settings.xml is present.

NOTE : Add the D:/mavenRepo attribute with some location where you want your maven download and store the depedency mention in pom.xml. As you can see i create a folder with name mavenRepo in D:/ drive for this.

do the clean install and your project will start working hope so. [![enter image description here](../Images/199eaf06f8a173b41369596f5e1dda0c.png)](https://i.stack.imgur.com/dy4te.png)

# android - 在屏幕底部显示选项

> ID：13874507
> 
> 赞同：0
> 
> 时间：2012-12-14T07:37:26.470
> 
> 标签：android

我是这个 android 的新手。在我的应用程序中，当用户单击菜单按钮时，我想在屏幕底部显示 1 个选项（背景应保持为当前屏幕）。简单地说，如果用户单击菜单按钮作为就像弹出窗口 1 选项应该出现在屏幕底部。用户点击应该会发生一些动作。我不能为此放一些屏幕截图。

```
----------------------

                           ------------>Consider this is screen

---------------------
                           ------------>here the option should come.     
---------------------- 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:48:18.413

[菜单](http://developer.android.com/guide/topics/ui/menus.html)通常用于为应用程序提供额外的功能。

为了实现您的目标，您必须实现菜单，当您单击设备的菜单按钮时，该菜单将打开，如下所示。

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        MenuInflater inflater=getMenuInflater();
        inflater.inflate(R.menu.optionmenu, menu);

        return super.onCreateOptionsMenu(menu);
    } 
```

R.菜单#

```
<?xml version="1.0" encoding="utf-8"?>
<menu 
  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/Color" android:title="Color">
           <menu>
            <item android:id="@+id/RedColor" android:title="Red"/>
            <item android:id="@+id/GreenColor" android:title="Green"/>
        </menu>
   </item>

</menu> 
```

如果您想在单击选项菜单时执行任何操作，则必须覆盖`onOptionsItemSelected`以在单击菜单选项时执行操作，如下所示。

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        if(item.getItemId()==R.id.RedColor)
        {
            Toast.makeText(MenuOptionDemoActivity.this,"Red Color Selected" ,1000).show();
        }
        else if(item.getItemId()==R.id.GreenColor)
        {
            Toast.makeText(MenuOptionDemoActivity.this, "Green Color Selected", 1000).show();
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

在您的应用程序中实现菜单的清晰简单的[教程。](http://www.c-sharpcorner.com/UploadFile/88b6e5/option-menu-context-menu-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:47:50.893

可以这样做，但是解决方案太长了，我无法在此处发布，因此请点击指向创建菜单的教程的链接

*   [http://www.androidhive.info/2011/09/how-to-create-android-menus/](http://www.androidhive.info/2011/09/how-to-create-android-menus/)

就像本教程的简要概述一样 - 您首先要覆盖该`onCreateOptionsMenu`方法。在这你膨胀你的菜单。然后您覆盖该`onItemSelected`方法，在该方法中您按下一个开关来确定选择了哪个选项阶段，尽管在您的情况下它只会是一个项目。最后，您必须创建一个 XML 文件，其中包含菜单的所有选项。

# javascript - 如果我动态更改边距，则显示块正在添加滚动条

> ID：13874509
> 
> 赞同：0
> 
> 时间：2012-12-14T07:37:38.810
> 
> 标签：javascript

我创建了一个具有以下样式的 hr 标签

```
 hr{   
     /* margin:5%; */
     height:10px;
     display:block;
  }​ 
```

[这](http://jsfiddle.net/thKb8/4/)是小提琴它正确显示。占据屏幕的 100% 宽度。但是，如果我通过 JavaScript 控制台动态更改边距。它从屏幕溢出。如何根据边距进行自动调整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:11:54.957

代替：

```
document.getElementById('a').style.margin= "5%"; 
```

尝试这个：

```
document.getElementById('a').style.margin= "5px"; 
```

# html - 浮动变化

> ID：13874510
> 
> 赞同：1
> 
> 时间：2012-12-14T07:37:39.883
> 
> 标签：html, css, css-float

我有一个图标，点击它会将新的 div （列）添加到 div 容器中。问题是当新的 div（列）出现时，按钮不会右移。是否可以以某种方式`position:fixed`仅在 div 内添加？

这是我所拥有的几个屏幕

[![在此处输入图像描述](../Images/7673fcb767f1dac56a38f6ee843397a0.png)](https://i.stack.imgur.com/5NbxW.png)

[![在此处输入图像描述](../Images/24efe45c9dec1a7f2e44997e66c6a96a.png)](https://i.stack.imgur.com/YBbLy.png)

还有一些代码

```
 <div id="grid">
        <div id="add-col"></div>
        <div class="clear"></div>
        <div id="squares"></div>
    </div>

#grid{
    width:710px; 
    height: 470px;
    border:1px dotted #dddddd;
    display: none; 
    margin: 5px auto;
    padding: 5px;
    text-align:center;
    overflow: auto;
}

#add-col{
    margin:5px;
    float:right;
    background-image: url(images/table-add-column-icon.png);
    width: 32px;
    height: 32px;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:45:28.390

你的 CSS 看起来像这样：

```
#grid{
    width:710px; 
    height: 470px;
    border:1px dotted #dddddd;
    display: none; 
    margin: 5px auto;
    padding: 5px;
    text-align:center;
    overflow: auto;

    position:relative; //added

}

#add-col{
    margin:5px;

    background-image: url(images/table-add-column-icon.png);
    width: 32px;
    height: 32px;
    cursor: pointer;

    position:absolute; //added
    top:5px; //added
    right:5px; //added

} 
```

使用位置`absolute`，您可以将按钮放置在角落，而无需再次从该位置移动。

要使用您需要放置`position:relative;`到其父级的位置，否则它将在页面周围飞来飞去。

**注意：** `float`已从#add-col 中删除

# python - scrapy没有解析一些url字符

> ID：13874514
> 
> 赞同：0
> 
> 时间：2012-12-14T07:38:29.760
> 
> 标签：python, parsing, web-scraping, beautifulsoup

我在标签的href中有这个字符串 -

```
member.php?mode=&amp;g=user&start=100 
```

现在我的 BeautifulSoup 将其解析为 -

```
memberlist.php?mode=&g=user&start=100 
```

这没有给出所需的页面 -

这是什么`&amp;`，我该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:19:37.507

它是一个特殊的字符串，代表一个 & 字符，即“&”。

编辑：我刚刚尝试使用您的[其他 SO 问题](https://stackoverflow.com/questions/13874992/how-can-i-make-crawler-to-follow-to-parse-site-in-scrapy-using-basespider)中的代码重现此问题，并且它可以正常工作。

```
>>> from bs4 import BeautifulSoup
>>> html_doc = """
... <html><head><title>Test HTML page</title></head>
... <p class="title"><b>Test HTML page</b></p>
...
... <p class="links">Links:
... <a href="./member.php?mode=&amp;g=user&start=100">Next</a>
... </p>
... </html>
... """

>>> soup = BeautifulSoup(html_doc)
>>> mylinks = soup.find_all("a", text="Next")
>>> print mylinks
[<a href="./member.php?mode=&amp;g=user&amp;start=100">Next</a>] 
```

你用的是什么版本的美汤？

# jquery - 如果条件在 IE 中单独呈现为逗号，则 jquery 模板

> ID：13874518
> 
> 赞同：0
> 
> 时间：2012-12-14T07:39:11.957
> 
> 标签：jquery, html, jquery-templates

我真的很努力，有没有人知道为什么下面的语句在 IE 中被呈现为逗号

```
 {{if (true)}} 
```

与以下相同

```
{{/if }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:14:10.920

尝试使用`{{if true}}`

如果您使用的 observable 不在表达式中，那么 jQuery 模板会将其视为一个函数并将其作为函数调用以获取 observable 的值。如果它在表达式中，则不会发生这种情况。

[小提琴](http://jsfiddle.net/998XL/)

# php - PHP SoapClient 超时错误处理程序

> ID：13874521
> 
> 赞同：6
> 
> 时间：2012-12-14T07:39:41.420
> 
> 标签：php, soap-client

我正在调用一些 Web 服务，使用`SoapClient`. 我正在寻找一种机制，它可以帮助我在网络服务脱机或关闭时向用户显示一些错误。

因为我必须等待一段时间（15 秒）才能向用户显示任何错误。我正在像这样添加`connection_timeout`，`SoapClient`用于超时。

```
$this->client = new SoapClient($clienturl,array('trace' => 1,
'exceptions'=> 1,
'connection_timeout'=> 15));   //$clienturl is webservice url 
```

同样在页面的顶部，我添加了这一行，

```
ini_set("default_socket_timeout", 15); // 15 seconds 
```

在特定的超时间隔之后，我变得`SOAP-ERROR`像这样不同，

```
SOAP-ERROR: Parsing WSDL: Couldn't load from $clienturl 
```

因此，我正在寻找一个错误处理程序来处理这些`SOAP-ERROR`问题，以便以人类可读的格式向用户显示这些错误处理程序，例如“服务器已关闭，过一段时间再试一次”。或者有没有办法处理超时错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T08:42:37.170

你可以把它放在 try/catch 中

```
try {
    $time_start = microtime(true);
    $this->client = new SoapClient($clienturl,array('trace' => 1,
        'exceptions'=> 1,
        'connection_timeout'=> 15
    ));
} catch (Exception $e) {
    $time_request = (microtime(true)-$time_start);
    if(ini_get('default_socket_timeout') < $time_request) {
        //Timeout error!
    } else {
        //other error
        //$error = $e->getMessage();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:53:17.870

这就是我在 php 中用于soapClien 连接的内容

```
set_error_handler('error_handler');

function connectSoapClient($soap_client){
    while(true){
        if($soap_client['soap_url'] == ''){
            trigger_error("Soap url not found",E_USER_ERROR);
            sleep(60);
            continue;
        }
        try{
            $client = @new SoapClient($soap_client['soap_url'],array("trace" => 1,"exceptions" => true));
        }
        catch(Exception $e){
            trigger_error("Error occured while connection soap client<br />".$e->getMessage(),E_USER_ERROR);
            sleep(60);
            continue;
        }
        if($client){
            break;  
        }
    }
    return $client;
}

function error_handler($errno, $errstr, $errfile, $errline){
    if($errno == E_USER_ERROR){
        $error_time = date("d-m-Y H:i:s");
        $errstr .= "\n
            ############################### Error #########################################\n
            Error No: $errno 
            Error File: $errfile  
            Line No: $errline 
            Error Time : $error_time \n
            ##############################################################################
        ";
        mail($notify_to,$subject,$errstr);
    }
} 
```

# java - 第一次在 OSX 上编译 Java.jar。我的相对路径应该在哪里？

> ID：13874522
> 
> 赞同：0
> 
> 时间：2012-12-14T07:39:41.820
> 
> 标签：java, macos, sh, classnotfoundexception

我在 bash 和 sh shell 中运行以下命令：

```
#!/bin/sh
export GPU_USE_SYNC_OBJECTS=1
cd $(dirname ${0})
exec java -Xmx32m -cp target/libs/*:target/DiabloMiner.jar -Djava.awt.headless=true -Djava.library.path=target/libs/natives com.diablominer.DiabloMiner.DiabloMiner $@ 
```

我还得到以下输出

```
sh-3.2$ sudo ./Diablominer-osx.sh
Password:
Exception in thread "main" java.lang.NoClassDefFoundError: com/diablominer/DiabloMiner/DiabloMiner
Caused by: java.lang.ClassNotFoundException: com.diablominer.DiabloMiner.DiabloMiner
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
sh-3.2$ 
```

在我看来，它想查看目录中的文件，`com/diablominer/DiabloMiner/DiabloMiner`所以我将上面的 SH 文件移到了父目录中`.com/`，我得到了同样的错误。

GIT 源代码在[这里。](https://github.com/Diablo-D3/DiabloMiner/tree/master/src/main/java/com/diablominer)我正在 OSX Mountain Lion 上编译。

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:14:48.723

`*`尝试在该类路径中的前面放置一个反斜杠：

```
-cp target/libs/\*:target/DiabloMiner.jar 
```

星号需要从字面上进入`java`命令，而不是首先被外壳扩展。

# php - 防止垃圾邮件发送者在 Media Wiki 中创建帐户

> ID：13874527
> 
> 赞同：3
> 
> 时间：2012-12-14T07:40:18.757
> 
> 标签：php, mediawiki, captcha, wiki, spam

我最近在我的一个网站的子域中实施了 Media Wiki。排除 IIS 的一些问题，它进展得相当顺利。

但是，我现在收到很多“邮件传递失败”电子邮件，其中帐户已创建但电子邮件地址无法验证，换句话说，电子邮件地址不存在（我认为是垃圾邮件） .

我的问题很简单，是如何在“创建帐户”页面上实现某种安全性，无论是验证码还是其他东西？

我已经阅读了以下两页，但并没有真正说明如何/是否可以在此特定页面上进行。此外，页面上的说明确实与 Linux 相关，但我不同意的是，该站点所在的服务器是 Windows 并且正在运行 IIS。

[http://www.mediawiki.org/wiki/Anti-spam_features](http://www.mediawiki.org/wiki/Anti-spam_features)

[http://www.mediawiki.org/wiki/Manual:Combating_spam](http://www.mediawiki.org/wiki/Manual:Combating_spam)

非常感谢任何帮助

**更新**

我还研究了实现“Open ID”功能，但不太确定它是如何工作的，以及它是否会解决这个问题。同样，这些说明似乎只与 Linux 有关，如果有人可以阐明如何使用 Windows 和 IIS 实现这一点，请随时回答:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:27:32.993

根据您期望的合法用户数量，ConfirmAccount 扩展可能很有用 [http://www.mediawiki.org/wiki/Extension:ConfirmAccount](http://www.mediawiki.org/wiki/Extension:ConfirmAccount)

可能它不会阻止垃圾邮件发送者尝试订阅，但至少该帐户不会自动创建。

# java - AccessType.FIELD、AccessType.PROPERTY 和 @Access 的用途是什么

> ID：13874528
> 
> 赞同：65
> 
> 时间：2012-12-14T07:40:34.800
> 
> 标签：java, jpa-2.0, transient

我只想知道所有这些注释之间有什么区别。我们为什么要使用这些……意味着它们没有效果，尤其是字段级别和属性级别。

使用混合级别注释的目的是什么，例如：

```
@Entity
@Access(AccessType.FIELD)
class Employee {
    // why their is a field level access 
    private int id;

    // whats the purpose of transient here
    @Transient                               
    private String phnnumber;

    // why its a property level access
    @Access(AccessType.property)             
    public String getPhnnumber() {
        return "1234556";
    }

} 
```

这门课到底说了什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-14T08:16:18.490

默认情况下，访问类型由放置标识符注释 ( `@Id`) 的位置定义。如果你把它放在球场上——它会是[`AccessType.FIELD`](http://docs.oracle.com/javaee/6/api/javax/persistence/AccessType.html#FIELD)，如果你把它放在吸气剂上——它会是[`AccessType.PROPERTY`](http://docs.oracle.com/javaee/6/api/javax/persistence/AccessType.html#PROPERTY)。

有时您可能想要注释的不是字段而是属性（例如，因为您希望在 getter 中有一些任意逻辑，或者因为您更喜欢这种方式。）在这种情况下，您必须定义一个 getter 并将其注释为`AccessType.PROPERTY`.

据我记得，如果您指定任何一个实体字段/方法`AccessType.FIELD`或`AccessType.PROPERTY`在任何实体字段/方法上指定，则必须为整个类指定默认行为。这就是为什么您需要`AccessType.FIELD`在类级别上拥有（尽管这`AccessType.FIELD`是默认值。）

现在，如果您没有`@Transient`在`phnnumber`现场，JPA 将为您提供一个 3 列的表：

*   ID，
*   电话号码，
*   获取phn号码。

那是因为它将`AccessType.FIELD`用于所有实体字段（`id`和`phnnumber`），同时，它会`AccessType.PROPERTY`用于您的 getter（`getPhnnumber()`）。
您将以在数据库中映射两次的电话号码结束。

因此，`@Transient`注释是必需的——这意味着实体不会将**字段**的值存储在底层存储中，而是存储**getter**返回的值。

# mysql - 在 mySQL 中存储一个大数组

> ID：13874529
> 
> 赞同：0
> 
> 时间：2012-12-14T07:40:36.327
> 
> 标签：mysql, arrays, store

将大数组存储到 mySQL DB 的最佳方法是什么？

**第一个解决方案**

```
INSERT INTO `friendList` ( `userId` , `friendId` , `friendName` ) VALUES 
    ( '1', '3242343', 'bernd' ), 
    ( '1', '3242342', 'jusu' ); 
```

或使用 foreach

**第二种解决方案**

```
foreach (xxxx) {
     mysql_query("insert xxxx");
} 
```

第一个解决方案更好（更干净，对服务器来说不是那么繁琐，对吧？），但是如何创建这个插入命令呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:48:57.823

最快的方法是使用多重插入语法（如您所描述的），但这不是我向大多数人推荐的，除非性能真的很重要。您还需要注意不要超过最大查询大小（可以在服务器之间更改）。

但是，您可以使用准备好的语句（PDO 示例）来执行此操作，并且仍然可以获得合理的性能：

```
$db = new PDO($dsn, $user, $password, array(
    PDO::ATTR_EMULATE_PREPARES => false,
    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
));

$stmt = $db->prepare('INSERT INTO `friendList` ( `userId` , `friendId` , `friendName` ) VALUES (?, ?, ?)');

foreach ($data as $row) {
    $stmt->execute(array($row['id'], $row['friendid'], $row['friendname']));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:42:40.700

将所有数据存储在 csv 文件或文本文件中并使用[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.0/fr/load-data.html)

```
LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE 'file_name.txt'
[REPLACE | IGNORE]
INTO TABLE tbl_name
[FIELDS
    [TERMINATED BY '\t']
    [[OPTIONALLY] ENCLOSED BY '']
    [ESCAPED BY '\\' ]
]
[LINES 
    [STARTING BY '']    
    [TERMINATED BY '\n']
]
[IGNORE number LINES]
[(col_name,...)] 
```

# c++ - 使用抽象来制作翻译器

> ID：13874533
> 
> 赞同：4
> 
> 时间：2012-12-14T07:41:20.710
> 
> 标签：c++, abstract-class

给定

```
class Allocator {
  public:
   virtual char *allocate(unsigned int size)=0;
      // EFF: allocates a character buffer of size characters
    virtual void dispose(char *buf)=0;
      // REQ: buf was allocated by this allocator
      // EFF: release memory previously allocated.
};
class Translator {
  public:
    virtual char *operator()(const char *s, Allocator &a) = 0;
      // EFF: returns a translation of the C-string s as
      //      another C-string, where the translation 
      //      C-string is allocated by a.
}; 
```

假设您要实现以下内容：

```
void printTranslatedArgs(int argc, char *argv[], 
                         Translator &t, Allocator &a);
  // REQ: argc/argv are in the form of program arguments
  // EFF: prints the translated command line. 
```

我无法理解这是如何工作的，因为 allocate、dispose 和 operator 是纯虚拟的，所以它们各自的类实际上并没有定义这些函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:45:22.267

引用支持多态性。这意味着任何使用该函数的人`printTranslatedArgs`都需要使用基类调用它，`Translator`并`Allocator`实现所有虚函数。你不需要关心函数内部的具体类类型，调用它们就好像它们是任何其他成员函数一样，例如：

```
char *p = a.allocate(5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:16:42.450

这

```
void printTranslatedArgs(int argc, char *argv[], 
                         Translator &t, Allocator &a); 
```

意味着可以使用任何实现 Translator/Allocator 中方法的类。

IOW 可以说抽象类定义了一个契约（接口），派生类必须实现这些方法才能完成契约。

例如 MyTranslator 实现虚方法`char* operator()`

```
class MyTranslator : public Translator
{
public:
virtual char *operator()(const char *s, Allocator &a) { /*...*/ }
};

// omitted decl/def of MyAllocator

int main(int argc,char* argv[])
{
  MyTranslator foo;
  MyAllocator bar;
  printTranslatedArgs(argc,argv,foo,bar);
  ...
} 
```

# javascript - 使用 ruby 查询 Mongo 日期字段（由 js 日期设置）

> ID：13874539
> 
> 赞同：0
> 
> 时间：2012-12-14T07:41:36.793
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, mongodb

本质上，我有一个采用 mm-dd-yy 的表单，该值保存在数据库中（值 A）。

我在轨道上使用红宝石。我正在尝试在数据库中查询过期用户。

```
query.push(:expire_date => {:$lt => Time.parse(good_till).utc} ) 
```

我遇到的问题是我在 good_till 中传递的日期我可以使用这个 ruby​​ 命令转换为 UTC，但是现在我正在检查一个字符串的 UTC 值。

如何更改我的 js 代码以将值 A 保存为 UTC 字符串以使两者具有可比性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:19:09.100

我认为您的 :expire_field 声明不正确。好吧，这取决于您在 ruby​​ 的应用程序上使用的 mongo 框架。假设您使用的是 MongoID，您只需像这样声明您的模型：

```
class Invoice
  include Mongoid::Document
  field :expire_date, type: DateTime   
end 
```

# c# - mvc 3 视图中的异常 Model.Questions null

> ID：13874544
> 
> 赞同：0
> 
> 时间：2012-12-14T07:42:22.737
> 
> 标签：c#, asp.net-mvc-3

我正在研究 mvc - 3。我创建了一个寄存器模型和一个寄存器视图。

*注册视图：*

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "Correct the errors and try again.")
    <div>
        <fieldset>
            <legend>Account Information</legend>
            <div class="editor-label">
                @Html.LabelFor(m => m.UserName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.Email)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.Email)
                @Html.ValidationMessageFor(m => m.Email)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.ConfirmPassword)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.ConfirmPassword)
                @Html.ValidationMessageFor(m => m.ConfirmPassword)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.Question)
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(m => m.Question, new SelectList(Model.Questions))   
                @Html.HiddenFor(m => m.Questions)             
            </div> 
            <div class="editor-label">
                @Html.LabelFor(m => m.Answer)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.Answer)
                @Html.ValidationMessageFor(m => m.Answer)
            </div>
            <p>
                <input type="submit" value="Register" />
            </p>
        </fieldset>
    </div>
} 
```

*注册模型*

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [RegularExpression(@"^[a-z0-9_\+-]+(\.[a-z0-9_\+-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*\.([a-z]{2,4})$", ErrorMessage="Invalid email address")]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }

    [Display(Name = "Security question")]
    public string Question { get; set; }

    [Display(Name = "Security question")]
    public List<string> Questions { get; set; }

    [Display(Name = "Security answer")]
    public string Answer { get; set; }
} 
```

我的问题是，当我们将注册表单提交到服务器时，除了问题列表之外，所有数据都会发送到服务器。因此，如果验证失败，那么我得到的异常`Model.Questions`是空的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:46:32.740

您需要将列表序列化为隐藏的表单字段，或者确保在您之前重新加载列表`return View(model);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:04:26.607

看看我的例子，你就会明白它是如何工作的：

```
@{
    List<string> test = new List<string> { "111", "222", "333" };
}

<div id="test1">
     @Html.HiddenFor(x => test)
</div>

<div id="test2">
    @for (int i = 0; i < test.Count; i++)
    {
        @Html.HiddenFor(x => test[i])
    }
</div> 
```

将渲染：

```
<div id="test1">
    <input id="test" name="test" type="hidden" value="System.Collections.Generic.List`1[System.String]" />
</div>

<div id="test2">
    <input id="test_0_" name="test[0]" type="hidden" value="111" />
    <input id="test_1_" name="test[1]" type="hidden" value="222" />
    <input id="test_2_" name="test[2]" type="hidden" value="333" />
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T07:53:32.477

试试这个

```
public ActionResult SomeAction(RegisterModel model)
{
  if(ModelState.IsValid)
  {
    // perform the functionality when Mmodel is Valid

     return View(model);
  }

  // bind data to Question list if model is fail 
  model.Questions  = new List<String>(); 
  return View(model);
} 
```

注意：当您的模型验证失败时，您 需要在返回视图之前将数据绑定到**问题列表。**

# java - 谷歌服务帐号获取密钥

> ID：13874547
> 
> 赞同：1
> 
> 时间：2012-12-14T07:42:37.023
> 
> 标签：java, service, console, private-key

我想从 google api 控制台获取私钥。

我可以手动完成，但我想在 JAVA 中以编程方式完成。

以下参考使用私钥文件对 google apis 进行身份验证。

1)[通过 OAuth 2.0 使用服务帐户调用 v3 Google 日历 API 时出现“需要登录”401 未经授权的消息](https://stackoverflow.com/questions/10112939/login-required-401-unauthorized-message-when-calling-the-v3-google-calendar-ap)

2)[使用 Java API 使用服务帐户对 Google API 进行身份验证](https://stackoverflow.com/questions/11827817/authenticating-google-api-with-a-service-account-with-java-api)

一旦我从 google 控制台导出私钥文件，我将使用它进行身份验证，如上述链接中所述。

我在 JAVA 中使用带有 Oauth 2.0 的 google api 2.0 版。

# informatica-powercenter - 动态地将内置会话变量传递给工作流变量

> ID：13874551
> 
> 赞同：1
> 
> 时间：2012-12-14T07:43:07.907
> 
> 标签：informatica-powercenter, informatica

我想维护表中每个映射的审计信息，其中包含

```
workflow_name | start_time | end_time | source_success_rows | target_success_rows | error_record_count 
```

我可以通过使用`workflow variables`内置分配它们`session variables` 然后在会话中使用 prevariableAssignment 的属性将工作流变量分配给 audit_session 的映射变量来做到这一点

它工作正常，但问题是如果我想维护其他映射的审计，我必须再次创建整个过程。那么是否有任何可能使该过程自动化，以便它不需要再次重新创建整个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:36:10.283

您可能希望构建从 informatica 存储库读取的进程，其中提供完全相同的信息，尽管分布在不同的表中。

您将能够进行单个映射/查询，提取该信息，并提供给您的表...

# vbscript - 连接并更改 Active Directory - 使用 vbscript、windows 服务还是 javascript？

> ID：13874556
> 
> 赞同：0
> 
> 时间：2012-12-14T07:43:19.870
> 
> 标签：vbscript, windows-services, active-directory

我正在尝试连接到 Active Directory 以查找特定用户、编辑该用户的属性并保存更改。看起来像一个简单的任务，但我很难把这件事放在一起。

我试过使用 VBscript，虽然看起来可以，但我必须以明文形式添加管理员用户名和密码。这不是一个好主意。该脚本也由无权访问 Active Directory 的普通用户触发。因此，初始脚本需要触发以域管理员身份运行的第二个脚本。

不过有人给了我小费。创建脚本可以调用的网页或 Windows 服务。该服务或网页连接到 AD 并进行实际更改。我想一个 Windows 服务将是这样做的最干净的方式。

但我只有 Visual Studio Express，似乎无法用它创建 Windows 服务。初始脚本需要是 vbscript，因为它是从仅支持 vbscript 的软件运行的。

那么这里的理想解决方案是什么？第一个 vbscript 是否有可能收集它需要的数据，将这些数据作为参数传递给第二个 vbscript 以进行实际更改？如果我需要更新比我现在需要的更多的用户属性，vbscript 会更容易维护。

我们也使用 Sharepoint。也许我可以创建一个使用 javascript 收集从初始 vbscript 传递的数据并以这种方式连接到 AD 的 webpart？只是在这里集思广益以找到最合适的解决方案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:43:13.997

您需要在脚本中包含管理员的用户名和密码这一事实应该向您指出，您所要求的是通过默默无闻的安全性。在您的解决方案中的某处，将有一个硬编码的用户名和密码，或者一个无需授权客户端即可执行这些任务的程序。这些是我会不惜一切代价避免的安全漏洞。

话虽如此，该服务可能是最不容易受到攻击的。虽然 VS Express 没有模板，[但手动创建服务并不难](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/8b9207c8-4b59-4740-b6c3-c5fb1d8fea56/)。使用 WCF 进行通信。将服务作为[托管服务帐户](http://technet.microsoft.com/en-us/library/dd560633%28v=ws.10%29.aspx)运行，并仅授予该托管服务帐户执行其任务所需的权限。

# objective-c - Xcode 转换

> ID：13874559
> 
> 赞同：-3
> 
> 时间：2012-12-14T07:43:26.830
> 
> 标签：objective-c

我在将 nsstring 转换为 nsdate 时遇到了问题，任何人都可以帮我解决这个问题

如何在 Objective-c 中将此字符串“Mon, 10 Dec 2012 08:00:00 CST”转换为 NSDate

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:49:33.457

试试这个

```
NSString *dateString=@"Mon, 10 Dec 2012 08:00:00 CST";
NSDate *date=[NSDate dateWithNaturalLanguageString:dateString];

NSLog(@"Date is %@",date); 
```

输出：

```
Date is 2012-12-10 08:00:00 -0600 
```

# wordpress - 在包含 functions.php 之后在 wordpress 页面顶部添加空格

> ID：13874561
> 
> 赞同：0
> 
> 时间：2012-12-14T07:43:37.517
> 
> 标签：wordpress, function, space

在wordpress主题中粘贴functions.php后，在页面顶部添加空格！甚至清除内容functions.php但空间顶部

函数.php：

或为空

但删除此文件，从页面中删除空间

请帮忙 ！

包括功能：

![在此处输入图像描述](../Images/c5f4b78fe8fa349daa83af92b3abb125.png)

没有功能：

![在此处输入图像描述](../Images/8476d28b00f85b2557b05a316d098e4b.png)

功能内容：

![在此处输入图像描述](../Images/6effcba07d02ec3259635d830f87cd4a.png)

另一个截图：

![在此处输入图像描述](../Images/c3a20c474b611968ab0f9d336c389ebd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T05:47:11.417

我与 Django 模板系统有类似的东西，这是由于编码，考虑将文件的编码`UTF-8`从`UTF-8 without BOM`.

# vbscript - 使用 currentTstTest obj 为 VAPI-XP 测试添加参数

> ID：13874563
> 
> 赞同：0
> 
> 时间：2012-12-14T07:43:43.603
> 
> 标签：vbscript, hp-quality-center

我是 VBScript 的新手，目前我已经创建了一个新的 VAPI-XP 测试 > 测试计划，在创建 VAPI 测试之后，我使用测试参数选项卡向我的测试添加了参数现在在测试脚本 (VBSCRIPT) 选项卡下我需要获取添加参数

谁能帮我吗 ！！请

脚本

```
Sub Test_Main(Debug, CurrentTestSet, CurrentTSTest, CurrentRun)
On Error Resume Next
TDOutput.Clear
return = XTools.run("D:\ACoE RnD Team\Eclipse Workspace\SilkTest\InitScript.bat","Scenario1 TC1 Regression RunAllIterations 0 0 firefox 3.6 WINDOWS") 
```

我需要将我的测试参数带到 Xtools.run 来代替 Scenario1 、 TC1 、 Regression ...

我无法使用参数，因为它已被弃用，而且我不知道使用 TestParameterFactory 对象

//用于从测试脚本添加添加参数的示例 vbscript，但它不起作用

```
Set testParamsFactory = supportParamTest.TestParameterFactory
Set parameter = testParamsFactory.AddItem(Null)
parameter.Name = "name"
parameter.Description = "desc"
parameter.Post 
```

有人可以建议我使用 CurrentTSTest obj 获取参数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:48:59.000

你应该可以这样做：

```
 Set aParam = CurrentTSTest
  Set paramValueFct = aParam.ParameterValueFactory
  Set lst = paramValueFct.NewList("")

  For Each param In lst
        With param
          TDOutput.Print("Name: " & .Name & ", Value: " & .DefaultValue)
        End With
  Next 
```

不过，您的里程可能会因该 DefaultValue 的格式而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:26:04.320

成功`Default_Value`从测试参数选项卡中检索参数

```
Set SetTestParameter = TestFactory.Item(intTestID)
Set TestParamsFactory = SetTestParameter.TestParameterFactory
Set IterateparameterValue = TestParamsFactory.NewList("")

for each IterateParam in gobjIterateparameterValue
     ParamFieldDefaultValue = IterateParam.DefaultValue
     TDOutput.Print (ParamFieldDefaultValue)
 next 
```

有用！不使用 CurrentTSTest obj，只需传递当前测试 ID (intTestID) 即可访问参数选项卡

# java - 从特定方法调用时，JFrame 中的内容不显示

> ID：13874572
> 
> 赞同：1
> 
> 时间：2012-12-14T07:44:29.967
> 
> 标签：java, swing, concurrency, serversocket, event-dispatch-thread

JFrame WaitingFrame 中的内容未按预期显示。这本质上是我想要做的：

```
package org.brbcoffee.missinggui;

import java.net.*;
import java.io.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Main {
    public static KeynoteServer server;
    public static void main(String[] args){
        JFrame frame = new JFrame("SSCCE");
        JButton btn = new JButton("Test");
        btn.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent arg0) {
                connectToPhone();
            }
        });
        frame.add(btn);
        frame.pack();
        frame.setVisible(true);
    }
    public static void connectToPhone(){
        WaitingFrame wf = new WaitingFrame();
        wf.setVisible(true);
        server = new KeynoteServer();
        if (server.setup()){
            System.out.println("Server set up and connected");
        } else {
            System.out.println("Couldn't connect");
        }
        wf.dispose();
    }
}   

@SuppressWarnings("serial")
class WaitingFrame extends JFrame {
    public WaitingFrame(){
        setTitle("Waiting");
        this.setLocationByPlatform(true);

        JLabel label = new JLabel("Waiting for client..."); // This will never show
        JPanel content = new JPanel();          
        content.add(label);

        this.add(content);
        pack();
    }
}
class KeynoteServer{
    private int port = 55555;
    private ServerSocket server;
    private Socket clientSocket;

    public boolean setup() {
        try {
            server = new ServerSocket(55555);
            server.setSoTimeout(10000);
            clientSocket = server.accept();
        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
        return true;
    }
} 
```

当 setup() 被调用时，WaitingFrame 确实出现了，但是内容丢失了。我尝试了不同的图像格式，但它确实适用于其他方法和类，所以这无关紧要。有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:55:28.030

用于`SwingUtilities.invokeLater()/invokeAndWait()`显示您的框架，因为所有 GUI 都应从 EDT 更新。

# java - 根据给定的数字或字符串生成范围内的唯一数字

> ID：13874576
> 
> 赞同：1
> 
> 时间：2012-12-14T07:45:14.537
> 
> 标签：java, algorithm, random, sampling

我想要实现的是这样的事情，假设我们有一个包含一千个盒子的列表和一个包含 25 种颜色的列表，现在我们想为盒子分配颜色，这样颜色就来自给定的列表，每次我问将选择相同颜色的颜色框。多个盒子可以使用相同的颜色，但是无论我执行多少次算法，同一个盒子的颜色总是相同的。

我想我可以有一个 25 种颜色的列表和一个算法来根据盒子的名称或 id 创建一个唯一的数字（在 25 范围内）。

谁能帮我什么算法适合我？

**更新** 要求略有变化，现在我需要该范围内的五种独特颜色，并且颜色必须始终相同。假设我们以五个一组的方式排列盒子，每个盒子应该在 25 种颜色范围内获得唯一的颜色。并且算法应该始终为同一组提供相同的颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:49:24.170

```
box.getId().hashCode() % 25 
```

会给你一个 0 到 24（含）之间的数字。

请注意，由于您没有为框之间的颜色分布指定任何规则，因此以下算法也可以满足您的要求：

```
return 0; 
```

如果你想要一个良好的分布，然后遍历你的盒子，并填写一个`Map<String, Integer>`键是盒子 id 而值是颜色的地方：

```
Map<String, Integer> colorsByBoxId = new HashMap<String, Integer>();
int i = 0;
for (Box box : boxes) {
    int colorIndex = i % 25;
    i++;
    colorsByBoxId.put(box.getId(), colorIndex);
} 
```

然后每次你想得到一个盒子的颜色时都使用这个贴图。

或者简单地做同样的事情，然后`color`在 Box 类中添加一个字段。

# java - 抑制某些文件的特定检查样式规则的正确语法是什么？

> ID：13874582
> 
> 赞同：11
> 
> 时间：2012-12-14T07:45:34.827
> 
> 标签：java, checkstyle

我在我的**java项目中使用****Maven 3**和**Checkstyle 2.9.1** ，并且我有一个常见的 checkstyle 配置，我们也在其他几个项目中使用。为了避免将该配置文件复制和编辑到我自己的项目中，我使用**抑制文件**来禁用某些包（生成的代码）中的所有检查。

 ******现在我想禁止所有文件中的特定规则。**

这是我的抑制文件：

```
<?xml version="1.0"?>
<!DOCTYPE suppressions PUBLIC "-//Puppy Crawl//DTD Suppressions 1.1//EN" "http://www.puppycrawl.com/dtds/suppressions_1_1.dtd">
<suppressions>
    <suppress files="my[\\/]generated[\\/]code[\\/]package" checks="."/>
    <suppress files=".*\\.java$" checks="IndentationCheck"/>
    <suppress files=".*\\.java$" checks="LineLengthCheck"/>
    <suppress files=".*\\.java$" checks="ExplicitInitializationCheck"/>
    <suppress files=".*\\.java$" checks="MemberNameCheck"/>
</suppressions> 
```

这是我的POM：

```
...
<build>
    ...
    <plugins>
    ...
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <version>2.9.1</version>
            <configuration>
                <configLocation>${checkstyle.ruleset}</configLocation>
                <suppressionsLocation>${checkstyle.suppressions}</suppressionsLocation>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

然后我打电话

```
mvn checkstyle:checkstyle 
```

生成报告，但抑制的警告仍然存在。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T12:29:51.820

好的，我终于设法为我的 checkstyle 配置构建了一个工作抑制文件。

我*最初的问题*是正则表达式，所以`files=".*\\.java$"`我现在不是`files="."`用来禁止对所有文件的特殊检查。我还禁止对某些文件进行所有检查。

以下是我的抑制文件中的一些示例：

```
<?xml version="1.0"?> suppressions PUBLIC "-//Puppy Crawl//DTD Suppressions 1.1//EN" "http://www.puppycrawl.com/dtds/suppressions_1_1.dtd">
<suppressions>
    <!-- suppress certain checks on all files in a package -->
    <suppress files="my[\\/]super[\\/]package[\\/]name" checks="ModifierOrderCheck|NeedBracesCheck|MagicNumberCheck"/>
    <!-- suppress all checks on all files in a package -->
    <suppress files="another[\\/]super[\\/]package[\\/]of[\\/]mine" checks=".*"/>
    <!-- suppress certain checks on all files -->
    <suppress files="." checks="IndentationCheck"/>
    <suppress files="." checks="LineLengthCheck"/>
    <suppress files="." checks="ExplicitInitializationCheck"/>
    <suppress files="." checks="MemberNameCheck"/>
    <suppress files="." checks="FinalClassCheck"/>
</suppressions> 
```

如果您需要有关配置的**Maven**部分的帮助，请参阅@Mawia 的[答案](https://stackoverflow.com/a/13879272/834/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:05:14.420

这对我有用。

而不是做

```
<suppressionsLocation>${checkstyle.suppressions}</suppressionsLocation> 
```

我把它放在 ${checkstyle.ruleset} 中（我假设这是你检查样式的 xml 文件）

```
<module name="SuppressionFilter">
    <property name="file" value="${checkstyle.suppressions}" />
</module> 
```

我的 ${checkstyle.suppressions} 有

```
<suppressions>
    <suppress files="package-info.java" checks="[a-zA-Z0-9]*"/>
    <suppress files="SomeClass.java" checks="[a-zA-Z0-9]*"/>
</suppressions> 
```****

# android - android.graphics.Canvas 类的原生实现源码

> ID：13874583
> 
> 赞同：5
> 
> 时间：2012-12-14T07:45:38.257
> 
> 标签：android

我在哪里可以找到android.graphics.Canvas 类的**原生实现的源代码？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:05:54.403

我已经从[这里](http://source.android.com)下载了 android 源代码（不是 sdk 源代码） 。Canvas 的原生实现位于：frameworks\base\core\jni\android\graphics

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T17:43:10.737

或者，您可以直接在 Git 存储库中查看它，而无需下载整个源代码树：

[https://android.googlesource.com/platform/frameworks/base/+/master/core/jni/android/graphics/Canvas.cpp](https://android.googlesource.com/platform/frameworks/base/+/master/core/jni/android/graphics/Canvas.cpp)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-14T07:58:41.367

在这里你可以找到源代码：

[http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/](http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/)

但我不能保证这些来源是完整的

# facebook-graph-api - 跟踪 facebook 网络中的共享内容

> ID：13874584
> 
> 赞同：1
> 
> 时间：2012-12-14T07:45:45.207
> 
> 标签：facebook-graph-api, graph, social-networking

我对使用 facebook api 相当缺乏经验，想知道是否有任何方法可以获取一些共享内容在网络上的路径？我正在研究的一个场景是：假设我想跟踪特定文章的路径，是否可以在 api 的帮助下确定文章在网络上的来源以及文章所采用的后续路径通过用户共享跨网络？

任何帮助将不胜感激。

# java - 如何使电子邮件回复成为 Web 应用程序的 HttpRequestServlet？

> ID：13874589
> 
> 赞同：1
> 
> 时间：2012-12-14T07:46:04.627
> 
> 标签：java, spring, servlets

我有一个要求，我不知道如何开始。

**要求：**

该应用程序将使用与 support@mydomain.com 相同的“来自电子邮件地址”的电子邮件发送给客户端（使用 org.springframework.mail.javamail.JavaMailSender）。此外，电子邮件内容将包含一些隐藏信息，例如 client_id。如果客户端回复该电子邮件，我需要将其作为 HttpServletRequest 发送给 Servlet，以便我可以处理它。

编辑：这个网络应用程序没有谷歌应用引擎设置，但我的要求与[这个链接](https://developers.google.com/appengine/docs/java/mail/receiving)类似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:56:56.190

当有人回复您发送给他的邮件时，该邮件将发送到为您的域配置的 POP3 服务器。从这个 SMTP 服务器，您可以使用 Java 邮件 API 读取此邮件。您可以设置一个 Spring 计时器任务，每隔几秒就继续轮询此邮箱。

我会查看以下资源以了解如何从 POP3 服务器读取邮件 -

**使用 JavaMail API -**

[http://metoojava.wordpress.com/2010/03/21/java-code-to-receive-mail-using-javamailapi](http://metoojava.wordpress.com/2010/03/21/java-code-to-receive-mail-using-javamailapi/)

**使用弹簧 -**

[http://blog.solidcraft.eu/2011/04/read-emails-from-imap-with-spring.html](http://blog.solidcraft.eu/2011/04/read-emails-from-imap-with-spring.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:56:43.680

更好和流行的解决方案是在您的电子邮件中添加一个链接并要求用户单击它并明确要求不要回复此电子邮件（发件人地址可以是 noreply@domain.com）

要在电子邮件回复中获取 servlet 调用，您需要使用

[http://javamail.kenai.com/nonav/javadocs/com/sun/mail/pop3/package-summary.html](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/pop3/package-summary.html)

使用 POP 继续在您的回复地址（例如 support@domain.com）中轮询新电子邮件，并在新电子邮件到来时触发 httprequest(HttpClient? )。

在相关说明中，您可以使用回复电子邮件地址添加 user_id 和类似内容`+`，例如`support@domain.com`，`support+uid_21_catid_32@domain.com`并将发送到同一地址。+ 之后的所有内容都被忽略。但是您将在回复电子邮件事件中获得有关地址并决定谁是用户的信息。如果没有正确实施，这肯定是一个安全问题。

# c# - 在 windows phone 8 中选择多张照片

> ID：13874599
> 
> 赞同：0
> 
> 时间：2012-12-14T07:47:11.737
> 
> 标签：c#, xaml, windows-phone-8

如何在 WP8 中选择多张照片。我在演示中看到，这是可能的，但在 MSDN 中找不到任何与之相关的 SDK。

目前我正在使用 PhotoChooserTask 一次选择一张图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:54:21.717

我认为 WP API 不允许您一次选择多于一张照片。“多选”功能仅用于在图片应用程序中选择多张图片，用于快速共享或删除。

MSDN 文档对此非常清楚，PhotoChooserTask 用于一次只选择一张图片（http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.tasks.photochoosertask(v=vs .105).aspx)。我不知道以编程方式访问保存的照片的任何其他方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T06:54:06.520

你可以利用这个 WP8 库：

[https://multiphotochooser.codeplex.com/](https://multiphotochooser.codeplex.com/)

它的功能类似于 photochoosertask，但它能够一次返回多张图像。

![样本：](../Images/b7256ddf3439d47877861ce00aeadf57.png)

# actionscript-3 - Actionscript 3：控制另一帧上的影片剪辑

> ID：13874609
> 
> 赞同：0
> 
> 时间：2012-12-14T07:48:00.243
> 
> 标签：actionscript-3, movieclip

我在第三帧上有三个按钮，它们应该控制主时间轴第五帧上的影片剪辑。如何在不离开第三帧但影响第五帧的情况下控制该影片剪辑？具体来说，这是一款汽车游戏的汽车选择选项。如果单击 porsche_select 按钮，则主时间线第五帧上的影片剪辑将转到 porsche 的帧并停止。如果单击 ferrari_select 按钮，则它会转到放置在 ferrari 上的movieclip 帧，与兰博基尼相同。

```
porsche_select.addEventListener(MouseEvent.CLICK, clicked7);
function clicked7(e:MouseEvent):void
{
    MovieClip(5).auto.gotoAndStop(1);
} 
```

我有这个，但它会抛出此错误：TypeError：错误＃1034：类型强制失败：无法将 5 转换为 flash.display.MovieClip。

auto 是第 5 帧上的影片剪辑的实例名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:19:41.130

我不相信你可以按照你写的方式做到这一点......至少你不能把数字 5 变成一个电影剪辑，这就是错误所说的。

目前在时间轴上，直到您第一次进入第 5 帧，该影片剪辑还不会“存在”，因此无法真正访问它。

您可以执行您所描述的一种方法是，当您按下按钮时，您可以设置一个“汽车类型”变量，然后当您到达第 5 帧时，您可以使用它来做您需要做的事情。

或者另一种方法是让汽车影片剪辑存在于第 3 帧中，但它的第一帧为“空”，因此最初它不会真正显示。

# php - 使用 jQuery 隐藏/显示文本框

> ID：13874614
> 
> 赞同：0
> 
> 时间：2012-12-14T07:48:25.813
> 
> 标签：php, javascript, jquery

我是第一次使用jquery，所以请在这里帮助我。我搜索了很多，但没有找到我的问题的答案。我想要它，以便在分数值不为空时文本框可见，并且在分数值为空时隐藏文本框。得分值被插入到输入字段中。提前致谢。这是我当前的代码：

```
<script type="text/javascript">
            $(function() {
                $('#click').raty({
                    click: function(score) {
                        //alert(score);
                        }
                    });
                });
</script>

    <div class="inputs">
    <div id="click"></div>
<input type="text" name="type" id="type" style="display:none;" value="" />
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:58:48.453

假设你`score value`是一个数字，那么：

```
if(score === null || isNaN(score))
{
    $("#type").css('display', 'none');
}
else if(score !== null && !isNaN(score))
{
    $("#type").css('display', 'block');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:03:53.023

```
 <script type="text/javascript">
    $(document)bind('ready',function(){

    $('#click').bind('click',function(){
    var val = $('#type').val();
    if(val===null){
    //do something
    }
    else{
    //do something
    }

    })

});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:03:13.133

尝试使用，

```
$(document).ready(function() {
    $('#click').raty({
        click: function(score, evt) {
            if(score === null){
                $('#type').hide();
            }else{
                $('#type').val(score);
                $('#type').show();
            }
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T08:35:44.703

```
<script type="text/javascript">
        $(function() {
            $('#click').raty({
                click: function(score) 
                {
                    if(score = null)
                    {
                       $('#textbox1').css({ display: "none" });
                       }
                    }
                });
            });
</script> 
```

# c++ - Qt QNetworkAccessManager 或其他方法获取html状态码而不获取页面内容？

> ID：13874616
> 
> 赞同：0
> 
> 时间：2012-12-14T07:48:41.030
> 
> 标签：c++, qt, qnetworkaccessmanager

我今天需要获取网站的 html 状态代码，我只是对域进行简单的获取请求，然后我将状态代码作为响应的一部分，还有站点 index.html 内容。

```
pNetworkManager = new QNetworkAccessManager(this);
reply = pNetworkManager->get(request);
QVariant vStatusCodeV =  reply->attribute(QNetworkRequest::HttpStatusCodeAttribute);
    QVariant redirectionTarget = reply->attribute(QNetworkRequest::RedirectionTargetAttribute);

data=reply->readAll(); 
```

如果可以避免，我想避免最后一个功能，有没有办法只获得域状态码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:53:54.447

也许您可以发送 HEAD 请求而不是 GET 请求？

这不是 Qt / 客户端特定的解决方案，而是 HTTP 协议推荐的方法，当您不需要内容时，只是想获取请求通常会产生的标头，例如为了验证页面存在。

我想这可以通过使用[head() 方法的 QNetworkAccessManager 来完成](http://harmattan-dev.nokia.com/docs/library/html/qt4/qnetworkaccessmanager.html#head)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:50:31.350

我同意@shevron 的回答，但如果您正在与之通信的站点不够“聪明”来实现`HEAD`请求，您仍然可以避免`readAll()`调用。

```
QByteArray line = reply->readLine();  //< eg "HTTP/1.0 200 OK"
QList<QByteArray> chunks = line.split(' ');
QString statusCode = chunks[1]; 
```

那应该避免`readAll()`.

# c# - 关于运行 WCF 服务器和客户端的问题

> ID：13874617
> 
> 赞同：0
> 
> 时间：2012-12-14T07:48:50.927
> 
> 标签：c#, wcf

我是 WCF 的新手，仍在学习 WCF 的糖。我从不为生产环境开发任何 WCF 应用程序。很长一段时间以来，我一直在寻找一篇带有屏幕共享应用程序源代码的好文章，最后我找到了带有示例代码的文章。

bob cravens 先生开发了一个小型应用程序，用于在两台电脑之间共享屏幕，这是完全 WCF 保存的应用程序。我浏览了他们的代码并理解了一些东西，但我的意思还是很少的东西我不清楚。我需要在我的最后运行这个应用程序只是为了清除整个事情，比如服务器和客户端如何通信并相互发送屏幕截图。

当我尝试从示例代码运行此 wcf 服务器时，我发现它正在运行，但问题出在 wcf 客户端。当我尝试运行 wcf 客户端时，我收到错误消息。

错误是： - **HTTP 无法注册 URL [http://mypcip:myport/Rlc/Viewer/][1]。您的进程没有访问此命名空间的权限（请参阅）。**

当此行在 wcf 客户端执行并且行是

```
 Uri baseAddress = new Uri("http://mypcip:myport/Rlc/Viewer");
 _viewerService = new ServiceHost(typeof(ViewerService), baseAddress);
 _viewerService.Open(); 
```

当服务主机尝试打开并执行此行时，会发生错误。

```
_viewerService.Open(); 
```

我尝试将端口也从 1003 更改为 8080，但得到了同样的错误。我在那个网站上发布了这个问题，我从那里得到了这个代码但没有得到答案，还发现很多其他人也发布了同样的问题并且没有得到答案。

任何人都可以从那里下载源代码并尝试在最后运行这个应用程序，并且可以告诉我这个代码有什么问题，当我尝试在我的电脑上运行这个示例代码 wcf 客户端时导致错误。我尝试了很多来理解为什么客户给出错误但无法理解。

所以我的要求是请任何人下载源代码并首先运行服务器然后运行客户端编辑代码中的IP地址并且肯定会遇到错误。告诉我我需要在这段代码中更改什么，因此我可以在我的电脑上完美地运行这个应用程序。以调试模式浏览源代码对我来说是非常重要的工作，但我根本无法运行这个应用程序。所以请帮助我，因为我有问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:22:27.063

我曾经遇到过同样的问题。

错误消息告诉您的是，您需要**明确允许它**在配置的地址和端口上运行。

这将需要*管理权限。*

如何解决这个问题，取决于您实际尝试在哪个操作系统上运行该服务。

在**Windows XP**或**Server 2003**上运行时，您需要使用此模式在命令行中对其进行配置

```
httpcfg set urlacl /u {http://URL:Port/ | https://URL:Port/} /aACL 
```

如果您运行的是**Windows Vista、Windows Server 2008 R2**或**Windows 7**，则需要使用该`netsh.exe`工具：

```
netsh http add urlacl url=http://+:80/MyUri user=DOMAIN\user 
```

最后，您可能需要在**防火墙规则**中配置一个例外，以允许此服务在您配置的地址/端口上运行：[在 Windows 防火墙中打开一个端口](http://windows.microsoft.com/en-US/windows7/Open-a-port-in-Windows-Firewall)

我在这些 Microsoft 文章资源的帮助下解决了这个问题：

*   [Httpcfg 语法](http://technet.microsoft.com/en-us/library/cc781601%28WS.10%29.aspx)
*   [配置 HTTP 和 HTTPS](http://msdn.microsoft.com/de-de/library/ms733768.aspx)

# jquery - 单击其他任何地方时如何隐藏jquery ui菜单？

> ID：13874618
> 
> 赞同：7
> 
> 时间：2012-12-14T07:48:54.067
> 
> 标签：jquery, jquery-ui, onclicklistener, jquery-events, jquery-ui-menu

我正在尝试实现一个 jquery-ui 菜单，该菜单在单击对象时出现，但在单击菜单本身以外的任何位置时消失。

这是我到目前为止的代码：

```
$("div.item").click(function(e){
        $( "#menu" ).menu( );
        $("#menu").css("top",e.pageY);
        $("#menu").css("left",e.pageX);

       }); 
```

现在，如果在菜单本身以外的任何地方单击，我想隐藏和销毁菜单。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T07:50:57.807

您想使用 blur 事件，该事件在对象失去焦点时触发。点击其他东西会转移焦点。

```
$("#menu").blur(function () {
    // Your code here to either hide the menu (.toggle())
    // or remove it completely (.remove()).
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T19:37:03.440

只是为了上面的代码和评论（@death-relic0，@levi-botelho）

```
// create
$('#menu').blur(function() {
    $('#menu').hide();
});

// show
$('#menu').show().focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-30T22:39:07.663

我在使用 JQuery UI selectmenu 小部件时遇到了同样的问题，因为我没有导入 JQuery UI selectmenu css 文件，所以出现了问题。我选择不这样做是因为我想自己设置选择菜单的样式。

为了解决我添加`[aria-hidden="true"] { display: none; }`到我自己的 css 中的问题，我注意到这个 aria 属性在我尝试解决问题时`true`和之间切换。`false`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-07T08:49:03.177

从@Levi Botelho [Ans](https://stackoverflow.com/a/13874651/1509853)和@Ahmed-Anas 的评论中，我在第一次创建小部件时使其更具可重用性。像这样的东西：

```
const handleClickedOutside = function (e, ui) {
            var self = $(this);
            $("ui-selectmenu-menu").focus()
                .blur(function (event) {
                    self.selectmenu('close');
                });
        };

$("#first").selectmenu({
     change: ..,
     position: { .. },
     open: handleClickedOutside
});

$("#second").selectmenu({
     change: ..,
     position: { .. },
     open: handleClickedOutside
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-07T12:56:34.290

嗨，这是我们在 Oodles Technologies 中遵循的隐藏 jquery datepicker 的过程。

我们模态的基本结构将如下所示。

```
<button class="btn btn-info btn-lg" data-target="#myModal" data-toggle="modal" type="button">Open Modal</button> 
```

这是我们的基本 css，用于定义高度模式。

```
.modal-body {
    min-height: 500px;
    max-height: 500px;
    overflow: auto;
}

$(".modal-body").scroll(function(){
    $("#ui-datepicker-div").hide();
}); 
```

希望能帮助到你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-07T13:02:47.160

jQueryUI 1.9 版本中的 blur 事件似乎存在问题（在获取菜单项焦点时错误生成！）

我的解决方案：（#jQueryMenu 代表我的菜单的第一个基础，#ShowMenu 是一个允许我调用菜单的图像。）

```
$("#jQueryMenu")
    .menu()
    .hide()
    .blur( function () {
        $(this).hide();
    });

$("#ShowMenu")
    .click( function (){
        $(".jQueryMenu").show().focus();
    }); 
```

# android - 果冻豆上三星 S3 的显示指标不正确

> ID：13874625
> 
> 赞同：0
> 
> 时间：2012-12-14T07:49:23.090
> 
> 标签：android, screen, samsung-mobile

我的应用在 Jelly Bean 上的 S3 存在问题。DisplayMetrics 返回不正确的值 (360 x 640)。

这是我用来获取显示指标的代码。

```
DisplayMetrics dm = context.getResources().getDisplayMetrics(); 
```

我还确保我在 Manifest 中设置了 minSdkVersion 和 targetSdkVersion（我注意到注册了一个类似的问题，结果证明是一个 manifest 问题）

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="12" /> 
```

**请注意**，我在所有其他手机（据我所知）以及冰淇淋三明治上的 S3 上都获得了正确的指标。

有什么想法我可能会出错吗？我可以为这款手机制作一个特例，但我更愿意深入了解问题的根源。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:47:40.120

终于找到了答案。我的清单有：-

```
<supports-screens
    android:anyDensity="false"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    >
</supports-screens> 
```

我将其更改为：-

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    >
</supports-screens> 
```

现在工作正常:)

# mysql - 如何在 MySQL 上进行高级选择

> ID：13874636
> 
> 赞同：0
> 
> 时间：2012-12-14T07:49:48.740
> 
> 标签：mysql, database, select

我有表格类别，格式是这样的

```
|id|parent_id|name|  
|1 |0        |sport|  
|2 |0        |music|
|3 |1        |Stadium|
|4 |1        |Golf| 
|5 |2        |Theater|
|6 |2        |Cinema| 
```

**描述**

`parent_id = 0`是主要类别

`parent_id != 0`是子类别，主类别是 Parent_id

这是表用户

```
|id|name|category_id|
|1 |andrea|6        |
|2 |Michael | 5     |
|3 |Gorchuf | 1     | 
```

**问题**

选择包含在用户表上的类别并仅显示主要类别示例目标将是这样的

```
|id|name|total|
|1 |sport |1  |
|2 |music |2  | 
```

我正在尝试使用此查询

```
SELECT C.id C.name, count( U.category_id ) AS total
FROM categories C
LEFT JOIN users U ON ( U.category_id = C.id )
GROUP BY C.id
LIMIT 0 , 30 
```

但结果是包括子类别和主要类别

```
|id|name|total|
|1 |cinema |1 |
|2 |theater|1 |
|3 |sport  |1 | 
```

我怎样才能过滤那个唯一的主要类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:26:59.053

这将解决您的问题-

```
SELECT pc . * , (SELECT count( * ) FROM category  AS pc1 WHERE pc.id = pc1.parent_id) AS CNT
FROM `category` AS pc
WHERE `parent_id` =0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T18:15:46.080

询问：

**[SQLFiddle示例](http://sqlfiddle.com/#!2/4dc6c/18)**

```
SELECT c.id, c.name,
(SELECT  count(u.id)
 FROM users u
  LEFT JOIN categories c1
    ON u.category_id = c1.id
  WHERE CASE WHEN c1.parent_id = 0 
             THEN c1.id
             ELSE c1.parent_id 
        END = c.id) AS total
FROM categories c
WHERE c.parent_id = 0
GROUP BY c.id 
```

结果：

```
| ID |  NAME | TOTAL |
----------------------
|  1 | sport |     1 |
|  2 | music |     2 | 
```

# algorithm - 排序算法以保持排序位置编号更新

> ID：13874638
> 
> 赞同：6
> 
> 时间：2012-12-14T07:49:53.693
> 
> 标签：algorithm, sorting, language-agnostic, position

每隔一段时间，我必须处理用户可以手动排序的元素列表。

在大多数情况下，我尝试依赖使用订单敏感容器的模型，但这并不总是可行的，而是求助于向我的数据添加位置字段。这个位置字段是一个双精度类型，因此我总是可以计算两个数字之间的位置。然而，这并不理想，因为我担心会遇到一个极端情况，即我没有足够的数值精度来继续在两个数字之间插入。

我对保持头寸数字的最佳方法存有疑问。第一个想法是遍历所有行并在每次插入后给它们一个整数，例如：

在 2 和 3 之间删除一行之后：

```
1   2   2.5   3   4    5 
```

位置编号更新后：

```
1   2   3     4   5    6 
```

当然，如果我有大量条目，那可能会变得很重。不是专门在内存中，而是将所有新值存储回磁盘/数据库。我通常使用某种类型的 ORM 和移动软件。更新所有代码将从磁盘中取出每个对象并将它们设置为脏，从而重新验证我的数据模型的所有相关验证规则。

我也可以等到精度不足以计算两个位置之间的数字。但是，用户体验会很差，因为相同的操作将不再需要相同的时间。

我相信对于这些情况有一个标准算法，可以定期和持续地更新位置编号，或者**只是其中一些**。理想情况下，它应该是 O(log n)，在最坏情况和最好情况之间没有很大的时间差异。

老实说，我也认为任何必须用户/排序的东西，在最坏的情况下都不能增长到成为一个真正的问题。边缘情况似乎也极为罕见，如果我搜索推动*边界数字*的解决方案则更是如此。但是，我仍然相信这个问题有一个众所周知的标准解决方案，我不知道，我想了解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:16:02.753

第二次尝试。

考虑整个`position`值范围，比如 0 -> 1000

我们插入的第一个项目的位置应该是 500。我们的列表现在是：

```
(0) -> 500 -> (1000). 
```

如果您在第一个位置插入另一个项目，我们最终会得到：

```
(0) -> 250 -> 500 -> (1000). 
```

如果我们继续在第一个位置插入项目，我们会遇到问题，因为我们的范围不均衡，并且......等等......*平衡*？这听起来不像[二叉树](http://en.wikipedia.org/wiki/Binary_tree)问题！？

基本上，您将列表存储为二叉树。插入节点时，根据周围节点为其分配位置。当您的树变得不平衡时，您旋转节点以使其再次平衡并重新计算旋转节点的位置！

所以 ：

*   大多数时候，添加一个节点不需要改变其他节点的位置。
*   当需要平衡时，只会更改您的项目的一个子集。
*   这是*O(log n)*！

**编辑**

![算法解释](../Images/ae5357c3c881bd6ffcced04a993bab26.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:07:25.953

几天后没有有效的答案。这是我的理论：

这里真正的挑战是一个切实可行的解决方案。也许有一个数学上正确的解决方案，但是每天过去，似乎实现会非常复杂。一个好的解决方案不仅应该在数学上是正确的，而且还应该与问题的性质、遇到问题的机会低以及问题的轻微影响相平衡。就像用子弹杀死苍蝇一样无用，尽管非常有效。

我开始相信一个好的答案可能是：用正确的解决方案去地狱，让它像一行计算一样，并忍受两个元素排序可能失败的罕见情况。不值得增加复杂性并在这种挑剔的问题上投入时间或金钱，这种问题非常罕见，不会造成数据损坏，只是暂时的 UX 故障。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:12:22.370

如果用户实际上是手动对列表进行排序，那么真的有必要担心花费 O( *n* ) 来记录新订单吗？在任何情况下，仅将列表显示给用户都是O( *n )。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T08:15:02.450

这并不能真正回答问题，但......

当您谈到“向您的数据添加位置字段”时，我假设您的数据存储是一个关系数据库，并且您的数据具有某种标识符。

所以也许你可以通过在你的数据中添加一个和来实现一个[双向链表。](http://en.wikipedia.org/wiki/Doubly_linked_list)因此插入/移动/删除操作是*O(1)*。`previous_data_id``next_data_id`

 *从数据库加载这样的集合相当容易：

*   获取每个项目并将它们添加到地图中，并以它们的 id 作为键。
*   对于每个项目，将其与其上一个和下一个项目连接起来。
*   从第一项（`previous_data_id`未定义）开始，跟随链并将它们添加到列表中。*

# android - 如何更改 apk 的内部名称？

> ID：13874643
> 
> 赞同：0
> 
> 时间：2012-12-14T07:50:12.753
> 
> 标签：android, apk

我有一个我没有创建的 apk 文件，它的内部名称为`com.android.gallery3d`. 但是，它不是股票应用程序，而是具有字幕支持等的修改版本（2160p 播放器）。如何更改内部名称以使其不是`com.android.gallery3d`？它需要有所不同，因为我无法安装它，因为它与现有的系统应用程序冲突。我需要编辑清单并退出 apk 吗？我该怎么做呢？我可以访问基于 Windows 和 Ubuntu 的 Linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:03:52.593

打开包装，改变，重新包装和辞职。使用[apktool](http://code.google.com/p/android-apktool/)或类似工具。

# android - 如何从图像路径显示缩略图？

> ID：13874644
> 
> 赞同：0
> 
> 时间：2012-12-14T07:50:18.880
> 
> 标签：android, imageview, thumbnails, show

如何在 ImageView 中显示来自固定图像路径的缩略图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T08:27:55.740

您可以从图像路径创建图像缩略图：

```
public Bitmap getbitpam(String path){
    Bitmap imgthumBitmap=null;
     try    
     {

         final int THUMBNAIL_SIZE = 64;

         FileInputStream fis = new FileInputStream(path);
          imgthumBitmap = BitmapFactory.decodeStream(fis);

         imgthumBitmap = Bitmap.createScaledBitmap(imgthumBitmap,
                THUMBNAIL_SIZE, THUMBNAIL_SIZE, false);

        ByteArrayOutputStream bytearroutstream = new ByteArrayOutputStream(); 
        imgthumBitmap.compress(Bitmap.CompressFormat.JPEG, 100,bytearroutstream);

     }
     catch(Exception ex) {

     }
     return imgthumBitmap;
} 
```

在文件路径上调用此方法单击以在 ImageView 中显示图像缩略图

# iphone - 删除平面数组中的重复对象

> ID：13874649
> 
> 赞同：0
> 
> 时间：2012-12-14T07:50:55.407
> 
> 标签：iphone, ios, arrays

如何删除平面数组或json数组中的重复对象

我的数组是这样的

`<VideoList2: 0xac46bd0> (entity: VideoList2; id: 0xac64090 <x-coredata://7CD2EB96-C31D-4605-B7AB-13909C6B661B/VideoList2/p982> ; data: {\n Category = Featured;\n Duration = nil;\n image = \"http://files.stora.com/accounts/5053775f0f66021ac50/collection/506c59660023ae100039f/entries/50ae69c00f6602492f001b6f/fields/k509a2cbe0f6602b1/file.jpg\";\n videoLink = \"http://www.youtube.com/v/yf92pV?rel=0\";\n videoName = pamala;\n})",`

请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:55:37.407

您可以删除与其他数组相同的[NSMutableArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)对象

这是删除一个相同的对象

```
[yourAry removeObject:removingAry]; 
```

并删除所有相同的ary

```
[yourAry removeObject:removingAry]; 
```

有关更多详细信息，请阅读[NSMutableArray 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:06:36.017

如果要从同一数组中删除重复项：

```
NSMutableArray *mainArray=[[NSMutableArray alloc] initWithObjects:@"A",@"B",@"C",@"D",@"A",@"B", nil];

for (NSInteger start=[mainArray count]-1; start>=0; start--) {
    [mainArray removeObjectIdenticalTo:[mainArray objectAtIndex:start] inRange:NSMakeRange(0, start)];
}

NSLog(@"%@",mainArray); 
```

输出：

```
(
    C,
    D,
    A,
    B
) 
```

如果要删除不同数组中包含的相同对象。

```
NSMutableArray *mainArray=[[NSMutableArray alloc] initWithObjects:@"A",@"B",@"C",@"D", nil];
NSMutableArray *secArray=[[NSMutableArray alloc] initWithObjects:@"B",@"D", nil];

[mainArray removeObjectsInArray:secArray];

NSLog(@"%@",mainArray); 
```

输出：

```
(
    A,
    C
) 
```

# c++ - 以下结合擦除和删除的语法是什么意思？

> ID：13874654
> 
> 赞同：4
> 
> 时间：2012-12-14T07:51:02.577
> 
> 标签：c++, containers, erase

> **可能重复：**
> [擦除和删除之间的区别](https://stackoverflow.com/questions/799314/difference-between-erase-and-remove)

假设我有一个容器.... 以下是什么意思。

```
c.erase(remove(c.begin(),c.end(),99),c.end()); 
```

擦除和删除不一样吗？上面例子中erase和remove的具体作用是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T07:52:18.963

`99`它从容器中删除所有等于的元素`c`。

[`std::remove`](http://en.cppreference.com/w/cpp/io/c/remove)实际上并没有删除任何元素。它将所有感兴趣的元素移动到容器的第二部分，并返回一个迭代器，指示其中的第一部分。然后`erase`成员函数采用一个迭代器范围来实际从容器中删除元素。

请参阅[擦除删除习语](http://en.wikipedia.org/wiki/Erase-remove_idiom)。

# c# - 将计算属性添加到 wcf 客户端以进行绑定

> ID：13874655
> 
> 赞同：3
> 
> 时间：2012-12-14T07:51:18.837
> 
> 标签：c#, wpf, wcf

我已经导入了一个 wsdl，现在我拥有了所有的客户端类。我想为类添加一个额外的（计算的）属性以用于 wpf 绑定。我希望计算的属性与从服务器返回的属性（并基于）一起显示（在网格中）

对我来说，合乎逻辑的事情是创建一个部分类，与 wcf 生成的类相同的命名空间和类名，并将新的计算属性添加到这个部分类

```
 namespace TestClient.WSCompanySearch  //same namespace as the generated class from wsdl
    {
        public partial class Company  //same class returned by wsdl
        {
            public bool IsValid
            {
                get {

                    if ((this.CloseDate < DateTime.Now) || (this.Rooms == 0))
                    {
                        return false;
                    }
                    else
                    {
                        return true;
                    }
                }
            }                       
        }
    } 
```

这个额外的属性肯定存在，如果我对其进行编码，我可以看到它，但是当我绑定时，就好像自定义属性被忽略了一样。getter 中的断点没有被调用，因此表明它没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T12:07:47.583

有同样的问题，我必须添加一个私有 set 方法才能反序列化对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:24:49.050

我的方法最终是正确的。只是一个组合

1.  我的逻辑在新属性中不正确
2.  我需要关闭“只是我的代码”调试才能使新类中的断点正常工作。我猜 VS 认为它是生成代码的一部分并且不想调试它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:03:35.457

您可能能够通过对需要计算属性的列使用转换器来获得相同的结果。

# java - 如何在 JList 中找到一个项目并将其设置为选定值？

> ID：13874657
> 
> 赞同：1
> 
> 时间：2012-12-14T07:51:18.887
> 
> 标签：java, swing, jlist

当我更新 JList 时，我想在更新 JList 之前保留它的选择。更新 JList 时，它可以删除对象或添加对象。

这就是我现在所拥有的：

```
Object obj = list.getSelectedValue(); // This is line 47
list.clearSelection();
list.setListData(peerList);

if(obj != null)
{
   int selectedIndex = list.getNextMatch(obj.toString(), 0, Position.Bias.Forward);

   if(selectedIndex != -1)
      list.setSelectedIndex(selectedIndex);
   else
      list.clearSelection();
} 
```

但是有时，当添加或删除对象时，它会抛出异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 3 >= 3
    at java.util.Vector.elementAt(Unknown Source)
    at javax.swing.JList$5.getElementAt(Unknown Source)
    at javax.swing.JList.getSelectedValue(Unknown Source)
    at MyThread$1.run(MyThread.java:47) // I marked up top where line 47 is
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:55:34.337

在我看来，这似乎是一个并发问题。您是在事件调度线程 (EDT) 上更新选择索引并删除/添加元素，还是正在运行执行此操作的并发线程？您应该只更改选择或修改 EDT 上的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:20:47.477

我弄清楚我的问题是什么。`peerList`是一个向量，所以在此之前我从向量而不是 JList 中添加和删除元素，尽管我不知道这是否可能。因此，如果我从 Vector 中删除了一个对象，并在更新它之前要求从 JList 中获取所选值，它将无法找到它。`setListData`但在您使用和更新 JList之前，JList 仍会显示已删除的元素。

# mysql - 通过查询将值从一个表插入到另一个表

> ID：13874660
> 
> 赞同：1
> 
> 时间：2012-12-14T07:51:33.500
> 
> 标签：mysql, sql

我有两张桌子，如下所示

```
CREATE TABLE projectlist(ProjectId   INT NOT NULL PRIMARY KEY,
                         ProjectName VARCHAR(50),
                         Location    VARCHAR(50));

CREATE TABLE LocationList(LocaId INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
                          ProjectId INT,
                          Location    VARCHAR(50)); 
```

表中的数值如下

```
INSERT INTO projectlist(ProjectId, ProjectName)
                 VALUES(1, 'Project A'),
                       (2, 'Project B'),
                       (3, 'Project C'),
                       (4, 'Project D'),
                       (5, 'Project E'),
                       (6, 'Project F'),
                       (7, 'Project G'),
                       (8, 'Project H');

INSERT INTO LocationList(ProjectId, Location)
                  VALUES(1, 'Location A'),
                        (1, 'Location C'),
                        (2, 'Location C'),
                        (2, 'Location B'),
                        (2, 'Location A'),
                        (3, 'Location B'),
                        (4, 'Location C'),
                        (5, 'Location D'),
                        (6, 'Location A'),
                        (6, 'Location B'),
                        (7, 'Location B'),
                        (8, 'Location D'),
                        (8, 'Location A'); 
```

我想要一个插入查询，它将 First **LocationList.Location**插入到**projectlist.Location**中，用于他们各自与项目 ID 相关的项目。

所以运行查询后的表项目列表是

```
   项目名称 位置
    项目 A 地点 A
    项目 B 地点 C
    项目 C 地点 B
    项目 D 地点 C
    项目 E 位置 D
    项目 F 地点 A
    项目 G 地点 B
    项目 H 地点 D    

```

我尝试了一个 SQL 查询，它从 LocationList 表中获取第一个位置，如下所示。

```
 SELECT DISTINCT MNPCL.Location, MNP.ProjectId
   FROM LocationList MNPCL RIGHT OUTER JOIN
        projectlist MNP ON MNP.ProjectId = MNPCL.ProjectId                            
  GROUP BY MNP.ProjectName 
```

如何编写在项目列表位置执行插入的查询

谢谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:16:44.527

## 这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!2/d9a90/1)

```
update projectlist 
join 
(
select LocationList.ProjectID,LocationList.Location 
  from LocationList
join 
(select LocationList.ProjectID,min(LocaId) minLocaId 
    from LocationList 
    group by LocationList.ProjectID) l1
        on LocationList.LocaId=l1.minLocaID
 ) l2 on projectList.ProjectID=l2.ProjectID
SET ProjectList.Location=l2.Location 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:30:02.710

尝试：

```
UPDATE projectlist AS prj SET Location = 
(SELECT Location FROM LocationList AS lst WHERE lst.ProjectId = prjProjectId ORDER BY Location DESC LIMIT 1) 
```

由于您的项目在 LocationList 中有多个位置，并且您的 projectlist 表中只能有一个位置，因此您必须将结果集限制为一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:17:12.990

这将为您工作...

```
UPDATE projectlist AS prj SET Location = (
SELECT group_concat(locationlist.Location SEPARATOR ',') as loc FROM `locationlist` left join projectlist using (ProjectId) 
group by locationlist.ProjectId) 
```

# php - 用于匹配任何长度的所有重复子字符串的正则表达式

> ID：13874663
> 
> 赞同：3
> 
> 时间：2012-12-14T07:52:16.277
> 
> 标签：php, regex, duplicates, substring, pcre

假设我们有一个字符串： **“abcbcdcde”**

我想使用正则表达式识别在这个字符串中重复的所有子字符串（即没有暴力迭代循环）。

对于上述字符串，结果集将是： **{"b", "bc", "c", "cd", "d"}**

我必须承认，对于有我经验的人来说，我的正则表达式要生锈得多。我尝试使用反向引用，但这只会匹配*连续*的重复项。我需要匹配所有重复的，连续的或其他的。

换句话说，我想匹配出现 >= 第二次的任何字符。如果一个子字符串出现 5 次，那么我想捕获每个出现 2-5 次。有道理？

到目前为止，这是我可怜的尝试：

```
preg_match_all( '/(.+)(.*)\1+/', $string, $matches );  // Way off! 
```

我尝试过使用前瞻，但我只是在扼杀它。我在 PHP (PCRE) 中这样做，但问题或多或少与语言无关。我发现自己被这件事难住了，这有点尴尬。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T08:20:30.740

你的问题是递归......你知道吗，忘记递归！=p 它在 PHP 中不会很好地工作，没有它算法也很清晰。

```
 function find_repeating_sequences($s)
  {
    $res = array();
    while ($s) {
        $i = 1; $pat = $s[0];
        while (false !== strpos($s, $pat, $i)) {
            $res[$pat] = 1;
            // expand pattern and try again
            $pat .= $s[$i++];
        }
        // move the string forward
        $s = substr($s, 1);
    }
    return array_keys($res);
  } 
```

出于兴趣，我也用 PHP写了[Tim 的答案：](https://stackoverflow.com/a/13874927/1338292)

```
function find_repeating_sequences_re($s)
{
    $res = array();
    preg_match_all('/(?=(.+).*\1)/', $s, $matches);
    foreach ($matches[1] as $match) {
        $length = strlen($match);
        if ($length > 1) {
            for ($i = 0; $i < $length; ++$i) {
                for ($j = $i; $j < $length; ++$j) {
                    $res[substr($match, $i, $j - $i + 1)] = 1;
                }
            }
        } else {
            $res[$match] = 1;
        }
    }
    return array_keys($res);
} 
```

我让他们在一个 800 字节随机数据的小型基准测试中解决了这个问题：

```
$data = base64_encode(openssl_random_pseudo_bytes(600)); 
```

每个代码运行 10 轮并测量执行时间。结果？

```
Pure PHP      - 0.014s (10 runs)
PCRE          - 40.86s <-- ouch! 
```

当您查看 24k 字节（或实际上超过 1k 的任何内容）时，它会变得更奇怪：

```
Pure PHP      - 4.565s (10 runs)
PCRE          - 0.232s <-- WAT?! 
```

事实证明，正则表达式在 1k 个字符后失效，因此`$matches`数组为空。这些是我的 .ini 设置：

```
pcre.backtrack_limit => 1000000 => 1000000
pcre.recursion_limit => 100000 => 100000 
```

我不清楚只有 1k 个字符后如何达到回溯或递归限制。但即使这些设置以某种方式“固定”，结果仍然很明显，PCRE 似乎不是答案。

我想用 C 写这个会加快速度，但我不确定到什么程度。

**更新**

在[hakre 的回答的](https://stackoverflow.com/a/14002655/1338292)帮助下，我整理了一个改进版本，在优化以下内容后将性能提高了约 18%：

1.  移除`substr()`外循环中的调用以推进字符串指针；这是我以前的递归化身的遗留物。

2.  将部分结果用作正缓存以跳过`strpos()`内部循环内的调用。

在这里，它的所有荣耀（：

```
function find_repeating_sequences3($s)
{
    $res = array(); 
    $p   = 0;
    $len = strlen($s);

    while ($p != $len) {
        $pat = $s[$p]; $i = ++$p;
        while ($i != $len) {
            if (!isset($res[$pat])) {
                if (false === strpos($s, $pat, $i)) {
                    break;
                }
                $res[$pat] = 1;
            }
            // expand pattern and try again
            $pat .= $s[$i++];
        }
    }
    return array_keys($res);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:19:20.810

您无法在单个正则表达式中获得所需的结果，因为正则表达式将贪婪地匹配（查找`bc...bc`）或懒惰地匹配（查找`b...b`和`c...c`），但绝不会同时匹配两者。（在您的情况下，它确实找到了`c...c`，但只是因为`c`重复*了两次*。）

但是一旦你找到一个长度大于 1 的重复子串，从逻辑上讲，所有较小的“该子串的子串”也必须重复。如果您想让它们为您拼写出来，您需要单独执行此操作。

以你的例子（使用Python，因为我不知道PHP）：

```
>>> results = set(m.group(1) for m in re.finditer(r"(?=(.+).*\1)", "abcbcdcde"))
>>> results
{'d', 'cd', 'bc', 'c'} 
```

然后，您可以将以下函数应用于您的每个结果：

```
def substrings(s):
    return [s[start:stop] for start in range(len(s)-1) 
                          for stop in range(start+1, len(s)+1)] 
```

例如：

```
>>> substrings("123456")
['1', '12', '123', '1234', '12345', '123456', '2', '23', '234', '2345', '23456',
 '3', '34', '345', '3456', '4', '45', '456', '5', '56'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T07:57:43.743

我能得到的最接近的是`/(?=(.+).*\1)/`

前瞻的目的是允许多次匹配相同的字符（例如，`c`和`cd`）。但是，由于某种原因，它似乎没有得到`b`...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T12:00:57.437

有趣的问题。我基本上采用了[Jacks answer](https://stackoverflow.com/a/13874946/367456)中的功能，并尝试是否可以减少测试次数。

我第一次尝试只搜索一半的字符串，但结果证明`substr`每次创建要搜索的模式都太昂贵了。在 Jacks 中通过每次迭代附加一个字符来完成它的方式看起来要好得多。然后我确实没时间了，所以我无法进一步研究它。

然而，在寻找这样的替代实现时，我至少发现我想到的算法中的一些差异也可以应用于 Jacks 函数：

1.  由于搜索已经使用偏移量完成，因此无需在每次外部迭代中剪切字符串的开头。
2.  如果要寻找重复的主体的其余部分小于重复针，则不需要搜索针。
3.  如果已经搜索过针头，则无需再次搜索。

    > ***注意：***这是一个内存交易。如果你有很多重复，你会使用相似的记忆。但是，如果您的重复次数确实很少，那么此变体会比以前使用更多的内存。

功能：

```
function find_repeating_sequences($string) {
    $result = array();
    $start  = 0;
    $max    = strlen($string);
    while ($start < $max) {
        $pat = $string[$start];
        $i   = ++$start;
        while ($max - $i > 0) {
            $found = isset($result[$pat]) ? $result[$pat] : false !== strpos($string, $pat, $i);
            if (!$result[$pat] = $found) break;
            // expand pattern and try again
            $pat .= $string[$i++];
        }
    }
    return array_keys(array_filter($result));
} 
```

因此，只需将此视为对 Jacks 答案的补充。

# python - 如何在python的一个块中编写多个try语句？

> ID：13874666
> 
> 赞同：16
> 
> 时间：2012-12-14T07:52:40.657
> 
> 标签：python, exception, exception-handling

我想要做：

```
try:
    do()
except:
    do2()
except:
    do3()
except:
    do4() 
```

如果 do() 失败，则执行 do2()，如果 do2() 也失败，则执行 do3() 等等。

此致

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-14T08:11:07.393

如果您真的不关心异常，则可以循环案例直到成功：

```
for fn in (do, do2, do3, do4):
    try:
        fn()
        break
    except:
        continue 
```

这至少避免了必须为每个案例缩进一次。如果不同的函数需要不同的参数，您可以使用 functools.partial 在循环之前“准备”它们。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-14T08:13:43.567

我会`first()`为此编写一个快速包装函数。

**用法**：`value = first([f1, f2, f3, ..., fn], default='All failed')`

```
#!/usr/bin/env

def first(flist, default=None):

    """ Try each function in `flist` until one does not throw an exception, and
    return the return value of that function. If all functions throw exceptions,
    return `default` 

    Args: 
        flist - list of functions to try
        default - value to return if all functions fail

    Returns:
        return value of first function that does not throw exception, or
        `default` if all throw exceptions.

    TODO: Also accept a list of (f, (exceptions)) tuples, where f is the
    function as above and (exceptions) is a tuple of exceptions that f should
    expect. This allows you to still re-raise unexpected exceptions.
    """

    for f in flist:
        try:
            return f()
        except:
            continue
    else:
        return default

# Testing.

def f():
    raise TypeError

def g():
    raise IndexError

def h():
    return 1

# We skip two exception-throwing functions and return value of the last.
assert first([f, g, h]) == 1

assert first([f, g, f], default='monty') == 'monty' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-14T08:11:14.303

这似乎是一件很奇怪的事情，但我可能会遍历函数并在没有引发异常时中断：

```
for func in [do, do2, do3]:
    try:
        func()
    except Exception:
        pass
    else:
        break 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-18T23:09:28.577

这是我找到的最简单的方法，只需在前面的except下嵌入try即可。

```
try:
    do()
except:
    try:
        do2()
    except:
        do3() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T07:54:29.043

您应该指定每次尝试捕获的异常的类型。

```
try:
    do()
except TypeError: #for example first one - TypeError
    do_2()
except KeyError: #for example second one - KeyError
    do_3() 
```

等等。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-06-03T14:58:21.857

```
import sys

try:
    f = open('myfile.txt')
    s = f.readline()
    i = int(s.strip())
except OSError as err:
    print("OS error: {0}".format(err))
except ValueError:
    print("Could not convert data to an integer.")
except:
    print("Unexpected error:", sys.exc_info()[0])
    raise 
```

# sql-server - 返回 num 和 ordersource 串联的最大数量

> ID：13874671
> 
> 赞同：1
> 
> 时间：2012-12-14T07:53:17.537
> 
> 标签：sql-server, sql-server-2008, tsql

```
create table test(id int ,num numeric(10),[Ordersource] varchar(10)) 
insert into test (id,num,[Order])values(1,10,'s1'),(1,10,'s2'),(1,10,'s3'),(1,10,'s4'),(1,12,'s5'),(1,12,'s6'),(2,13,'s6') 
```

我想要输出格式是

```
id num ordersource
1 10   s1,s2,s3,s4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:19:17.530

希望这会有所帮助

```
Declare @test table (id int ,num numeric(10),[Order] varchar(10)) 
Insert into @test (id,num,[Order])
Values(1,10,'s1'),(1,10,'s2'),(1,10,'s3'),(1,10,'s4'),(1,12,'s5'),(1,12,'s6'),(2,13,'s6')

;With Cte As
(
    Select 
        X.* 
        ,rn=Dense_Rank()over(order by cnt desc)
    From (
    Select  
        id
        , num
        ,ordersource = Stuff((
            Select ',' + Cast([Order] As Varchar(Max))
            From @test t2 
            Where t1.id = t2.id and t1.num = t2.num
            For Xml Path('')
         ),1,1,'')
        ,cnt = count(num) over(partition by id, num)        
    From @test t1)X
)
Select distinct id, num,ordersource
From Cte
Where rn = 1 
```

![在此处输入图像描述](../Images/6ccaaf588bb1dcbae20f747eafd01457.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:28:04.690

另一种方法：

```
select id, num, left(s, len(s) - 1)
from (
    select distinct t2.id, t2.num, (
        select t1.O + ', ' as 'text()'
        from test t1
        where t1.id = t2.id and t1.num = t2.num
        order by t1.id, t1.num
        for xml path('')) s
    from test t2) temp
where
    id = 1
    and num = 10 
```

# android - 使用 Bitmap 时什么也得不到

> ID：13874672
> 
> 赞同：0
> 
> 时间：2012-12-14T07:53:20.017
> 
> 标签：android, listview, bitmap

我正在尝试在 ListView 上显示图像。代码片段：

```
private String[] movieURL = {"..","..",".."};

try {
          Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(movieURL[position]).getContent());
            holder.image.setImageBitmap(bitmap);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

这是 ViewHolder 类：

```
private static class ViewHolder {
    public TextView text1;
    public TextView text2;
    public ImageView image;
  } 
```

但它什么也没显示。我认为代码没问题。和堆栈跟踪：

```
12-14 07:50:54.975: D/dalvikvm(1865): GC_CONCURRENT freed 122K, 8% free 3082K/3324K, paused 4ms+28ms, total 123ms
12-14 07:50:55.175: D/dalvikvm(1865): GC_FOR_ALLOC freed 16K, 8% free 3178K/3424K, paused 40ms, total 51ms
12-14 07:50:55.195: I/dalvikvm-heap(1865): Grow heap (frag case) to 4.291MB for 1127536-byte allocation
12-14 07:50:55.286: D/dalvikvm(1865): GC_FOR_ALLOC freed <1K, 6% free 4278K/4528K, paused 84ms, total 86ms
12-14 07:50:55.395: D/dalvikvm(1865): GC_CONCURRENT freed <1K, 6% free 4279K/4528K, paused 10ms+20ms, total 118ms
12-14 07:50:55.547: W/Trace(1865): Unexpected value from nativeGetEnabledTags: 0
12-14 07:50:55.625: W/Trace(1865): Unexpected value from nativeGetEnabledTags: 0
12-14 07:50:55.685: W/Trace(1865): Unexpected value from nativeGetEnabledTags: 0
12-14 07:50:55.715: W/Trace(1865): Unexpected value from nativeGetEnabledTags: 0
12-14 07:50:55.815: W/Trace(1865): Unexpected value from nativeGetEnabledTags: 0
12-14 07:50:57.125: D/skia(1865): --- SkImageDecoder::Factory returned null
12-14 07:50:57.875: D/skia(1865): --- SkImageDecoder::Factory returned null
12-14 07:50:58.736: D/skia(1865): --- SkImageDecoder::Factory returned null
12-14 07:50:59.386: D/skia(1865): --- SkImageDecoder::Factory returned null
12-14 07:50:59.945: D/skia(1865): --- SkImageDecoder::Factory returned null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:03:59.150

试试这样

```
holder.image.setImageBitmap(BitmapFactory.decodeFile(movieurl
                .get(position))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:31:02.070

你确定`Bitmap`-object 不为空吗？做一些记录..

```
Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(movieURL[position]).getContent());

if(bitmap == null) {
    Log.i("Aha!", "The Bitmap was null all this time :)");
} 

holder.image.setImageBitmap(bitmap); 
```

如果您`Bitmap`为 null，请检查 URL 是否实际指向您尝试获取的资源。

另外，记得包括

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

在你的`AndroidManifest.xml`. 不这样做会给你一个`Bitmap`没有任何错误的空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:15:16.187

尝试下面的代码使用 AsyncTask 从 Web 下载图像并显示在 imageview 中，它将解决您的问题。

```
public class MainActivity extends Activity {

    ImageView mImgView1;
    static Bitmap bm;
    ProgressDialog pd;
    String imageUrl = "https://www.morroccomethod.com/components/com_virtuemart/shop_image/category/resized/Trial_Sizes_4e4ac3b0d3491_175x175.jpg";
    BitmapFactory.Options bmOptions;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mImgView1 = (ImageView) findViewById(R.id.mImgView1);
        pd = ProgressDialog.show(MainActivity.this, "Aguarde...",
                "Carregando...");
        new ImageDownload().execute("");
    }

    public class ImageDownload extends AsyncTask<String, Void, String> {

        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            bmOptions = new BitmapFactory.Options();
            bmOptions.inSampleSize = 1;
            loadBitmap(imageUrl, bmOptions);
            return imageUrl;
        }

        protected void onPostExecute(String imageUrl) {
            pd.dismiss();
            if (!imageUrl.equals("")) {
                mImgView1.setImageBitmap(bm);
            } else {
                Toast.makeText(MainActivity.this,
                        "Não foi possível obter resultados", Toast.LENGTH_LONG)
                        .show();
            }
        }

    }

    public static Bitmap loadBitmap(String URL, BitmapFactory.Options options) {
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bm = BitmapFactory.decodeStream(in, null, options);
            in.close();
        } catch (IOException e1) {
        }
        return bm;
    }

    private static InputStream OpenHttpConnection(String strURL)
            throws IOException {
        InputStream inputStream = null;
        URL url = new URL(strURL);
        URLConnection conn = url.openConnection();

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                inputStream = httpConn.getInputStream();
            }
        } catch (Exception ex) {
        }
        return inputStream;
    }
} 
```

# c++ - std::reference_wrapper 在容器中使用

> ID：13874673
> 
> 赞同：12
> 
> 时间：2012-12-14T07:53:21.973
> 
> 标签：c++, c++11, containers

如果可以的话，我会`*`从我的代码中删除所有原始指针，因为使用它们可能不是线程安全的，并且设计的意图也不清楚（可选值、所有权等）。然而，有时不使用指针并不容易。例如，我们倾向于在多态类型的容器中使用基类型的指针：

```
class A : noncopyable { ... };
class B : public A { ... };

std::vector<A*> v;
v.emplace_back(new B);

// temporary container for some operation
std::vector<A*> selected;
if(check())
   selected.emplace_back(v.front()); 
```

你对上面的代码有什么想说的吗？所有者是谁？是不是共享所有权？这就是为什么我们应该这样做的原因`v`：

```
std::vector<std::unique_ptr<A>> v;
v.emplace_back(make_unique<B>()); 
```

现在很明显，`v`拥有这些对象，但我仍然不喜欢它`selected`有一个原始指针，这使我的设计不直观。查看标准 C++ 库，我认为只有一种类型可以完成这项工作 - [std::reference_wrapper](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper)：

```
std::vector<std::unique_ptr<A>> v;
v.emplace_back(make_unique<B>());

// temporary container for some operation
std::vector<std::reference_wrapper<A>> selected;
if(check())
  selected.emplace_back(*v.front()); 
```

你觉得这段代码怎么样？这是一个好习惯吗？我知道这一点`std::ref()`以及`std::cref`主要使用模板的地方，但似乎在这里我们也可以使用它来清楚地说明我们的设计意图。我看到的唯一问题是我必须取消引用`std::reference_wrapper`，`get()`并且没有`operator*()`或`operator->()`内部有相同的接口，就像在容器中一样`unique_ptr`。我应该自己写类似的东西吗？或者也许可以在未来的 C++ 版本中为这种用例扩展 reference_wrapper？请分享您的反馈。

编辑：我更改了代码示例以更好地显示意图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T09:36:55.613

您已经提供了一个看起来不错的解决方案。我知道问题是“你感觉如何？”

我个人的感觉是，一方面需要在安全性和明确性与另一方面代码的简单性之间存在某种平衡。看起来您的解决方案可能将其推向安全性并过多地损害了简单性。每当我使用包含“弱引用”的容器时，我都会使用原始指针来表示这些。诚然，这可能会让人不太清楚对象的所有者是谁，但它也有一些优点：您不必研究什么是“reference_wrapper”，并且代码很清晰。如果您只是暂时使用它们（弱引用的容器）并且封装了这种用法，那么所有权问题应该是最小的。

但这只是个人喜好的问题，我猜。让我建议为同一目的使用不同的类型。前提是您有能力使用 Boost。对于“强”引用（拥有资源），您可以使用 Steve Watanabe 的[Type Erasure](http://steven_watanabe.users.sourceforge.net/type_erasure/libs/type_erasure/doc/html/index.html)库。它不需要显式使用自由存储内存，我想对于小型类型它可以完全摆脱使用堆内存（使用小缓冲区优化）。它最近已被 Boost 接受，尽管我认为尚未发布。

对于弱引用，考虑在 Boost.Optional 中使用“可选引用”：

```
int i = 0;
boost::optional<int&> oi = i; // note: int&
i = 2;
assert(*oi == 2); 
```

它与reference_wrapper 具有相同的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:21:06.977

我认为称它们为`shared_ptr`'s 在逻辑上没有错误。但是，查看[std::weak_ptr](http://en.cppreference.com/w/cpp/memory/weak_ptr)的定义：

> std::weak_ptr 是一个智能指针，它持有对 std::shared_ptr 管理的对象的非拥有（“弱”）引用。必须将其转换为 std::shared_ptr 才能访问引用的对象。

它可能是一个更好的候选人。至少当您通过指针摆弄时，`selected`您需要承担临时所有权。由于原始指针存储在共享指针中，因此使用弱指针会更安全。

# arrays - 数组中的fpdf单元格定位

> ID：13874678
> 
> 赞同：0
> 
> 时间：2012-12-14T07:53:46.630
> 
> 标签：arrays, fpdf, multiple-columns

我有一个名为 Array 的数组，它的元素：A、B、C、D、...、Z

我想使用 FPDF 生成一个 pdf，如下所示：

```
Elements in Array:   A | B | C
                     D | E | F
                     .........
                     X | Y | Z 
```

上面的代码仅显示单个列中的元素。我不知道如何让它按我的意愿显示。请帮忙。

```
$pdf->Cell('50','0','Elements in Array:',0,0,'L');
$pdf->Cell('50','0',' '.$Array[0],0,0,'L'); 
$pdf->Ln(5);
for($i=1;$i<=count($Array);$i++)
{
    $pdf->Cell('50','0','',0,0,'L');
    $pdf->Cell('50','0','  '.$Array[$i],0,0,'L');   
    $pdf->Ln(5);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T22:35:51.400

这是基本方法；你可以自己制定细节。

使用 $i += 3 代替 $i++，以便每次迭代处理数组的 3 个元素。然后，在每次迭代中，调用 Cell 3 次，三列各调用一次。如果你愿意，也可以画线。（您将用于 3 个元素的下标是 $i、$i + 1 和 $i + 2。）

每行 3 个单元格应位于 $y 处。在每次迭代中，将 $y 增加任何看起来效果最好的间距。

由于元素的总数不一定能被 3 整除，因此您必须测试 $i 以避免引用不存在的元素，然后跳出循环。

# configuration - gradle 的 buildSrc 文件夹的目的是什么？

> ID：13874680
> 
> 赞同：34
> 
> 时间：2012-12-14T07:53:59.050
> 
> 标签：configuration, structure, gradle

在 gradle 中，使用`buildSrc`文件作为顶层的目的是什么，而不仅仅是典型的 java 项目布局（src/main/java）？

如果我有一个布局

```
src
   main
      java 
```

或者

```
buildSrc
    src
       main
          java 
```

有什么区别（或这样做的原因）？它在多模块项目中更有用吗？即使对于一个多模块项目，我不能做类似的事情吗

```
proj1
  src

proj2
  src 
```

然后只有一个顶级 build.gradle （与`proj1`and处于同一级别`proj2`），它定义了项目中的通用设置？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-14T08:54:02.980

`buildSrc`是一个单独的*构建*，其目的是构建旨在用于主构建的*构建脚本*中的任何任务、插件或其他类，但不必在构建之间共享。（*）它不会可以将此类类构建为主构建的一部分，因为它们必须在主构建的构建脚本甚至可以编译/评估之前就存在，并且 Gradle 在它执行任何工作之前编译/评估所有构建脚本（配置与执行阶段） .

与将所有构建代码放入构建脚本相比，`buildSrc`它为您提供了一种开发构建代码的方法，更像是常规代码，作为可以测试的类，导入到您的 IDE 等。这是一种保持构建脚本简单和干燥的方法，即使对于更复杂的构建。

`buildSrc`在多项目构建中更常见，因为较大的构建更有可能实现自己的自定义任务和插件。

随着时间的推移，它将发展成为在单个 Gradle 调用`buildSrc`中执行多个依赖*构建的更通用的能力。*

(*) 跨构建共享类是可能的，但涉及更多。特别是，您需要将类发布到存储库，并且使用构建必须从那里显式导入它们，类似于在构建之间共享生产库时。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-07-13T03:00:28.680

> 在 gradle 中，使用 buildSrc 文件作为顶层文件的目的是什么，而不仅仅是典型的 java 项目布局（src/main/java）？

你绝对可以做到这一点。它被称为 gradle 中的[复合构建](https://docs.gradle.org/current/userguide/composite_builds.html)，但您必须告诉 Gradle[**包含**](https://docs.gradle.org/current/userguide/composite_builds.html#composite_build_intro)该文件夹中的任何构建。顶级文件夹的一个[独特属性](https://docs.gradle.org/current/userguide/organizing_gradle_projects.html#sec:build_sources)`buildSrc`是 gradle 自动将其视为包含的构建。

*请注意，即使`buildSrc`被视为复合构建，当您运行时，它在包含的构建列表中也不可见[`gradle.getIncludedBuilds()`](https://docs.gradle.org/current/javadoc/org/gradle/api/invocation/Gradle.html#getIncludedBuilds--)*。我相信原因是因为该列表是为您手动包含在[`settings.gradle`](https://docs.gradle.org/current/dsl/org.gradle.api.initialization.Settings.html).

为了让您也包含`src/main/java`为复合构建，您必须使用`--include-build`标志运行您的 gradle 脚本，然后是`src/main/java`. 对于包含的构建来说，这是一个不寻常的地方，但 gradle 不会抱怨。

> 然后只有一个顶级 build.gradle（与 proj1 和 proj2 处于同一级别），它定义了项目中的通用设置？

您可以拥有与您的, 和子项目`build.gradle`相同级别的顶层。这通常是大多数多项目项目的结构方式。`proj1``proj2`

* * *

正如已经强调的[另一个答案](https://stackoverflow.com/a/13875350/2089675)，该`buildSrc`项目的目的是创建自定义插件或任务*，这些插件或任务旨在*在您的构建中的不同项目之间本地共享。**这并不意味着您不能在顶级`build.gradle`**. 您可以这样做，但问题是您将无法在任何子项目中使用它。

*请记住，能够在 java/groovy 中导入某些内容需要该内容存在于正确的 java/groovy 文件（或 java 9+ 的模块）中。由于您`build.gradle`只是一个脚本，因此简单地从中导入插件或任务并不是任意的。*

正如我已经指出的，这是来自[Gradle 文档](https://docs.gradle.org/current/userguide/organizing_gradle_projects.html#sec:build_sources)，拥有目录的原因之一`buildSrc`是：

> 发现目录后，Gradle 会自动编译和测试此代码，**并将其放入构建脚本的类路径中**。

如您所见，它`buildSrc`充当构建过程的扩展，因为它可以为您项目的所有构建脚本添加额外的功能。

* * *

还有几点：

*   `dependencies`在您的项目中声明的任何`buildSrc/build.gradle`内容都对项目中的其他构建脚本可见。
*   您中的`buildscript`块`buildSrc/build.gradle`仅对其他人可见，`buildSrc/build.gradle`而没有其他内容。
*   中定义的任何插件类`buildSrc` [都可以](https://docs.gradle.org/current/userguide/custom_plugins.html#sec:packaging_a_plugin)在项目中的任何构建脚本中使用，并且不需要在`META-INF/gradle-plugins`.
*   `build.gradle`在主项目或任何子项目中定义的任何依赖项在`buildSrc`. 如果您记得这个文件夹被视为包含的构建（即外部），那么它为什么看不到包含它的项目的类路径应该是有道理的。

# c# - 如何在WPF中检查两个矩形是否相交

> ID：13874684
> 
> 赞同：3
> 
> 时间：2012-12-14T07:54:11.337
> 
> 标签：c#, wpf

我在 WPF 应用程序中有两个矩形。如何检查矩形是否相交？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T07:57:21.353

```
if (rectangle1.IntersectsWith(rectangle2))
{
   // Do something
} 
```

[Rect.IntersectWith](http://msdn.microsoft.com/en-us/library/system.windows.rect.intersectswith.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T07:59:31.163

[`Rect.IntersectsWith`](http://msdn.microsoft.com/en-us/library/system.windows.rect.intersectswith.aspx)可能是你要找的东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:00:13.820

试试这个`IntersectsWith`方法。

# android - 引用 UI 元素的活动字段

> ID：13874685
> 
> 赞同：0
> 
> 时间：2012-12-14T07:54:24.913
> 
> 标签：android, android-layout

每次需要时存储对布局元素的引用而不是 findViewById 会“更便宜”，但它不会阻止垃圾收集吗？我的假设是在 onStop 状态视图被破坏，至少 onSaveInstanceState 被调用。因此，在活动或片段中引用 UI 元素会阻止该元素被收集 - 对吗？

我错了还是应该坚持 findViewById 或尝试 weakreferences ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:52:29.817

如果要多次访问，我首选的方法是将视图引用存储在活动中。

我认为到处调用 findViewById 会使代码变得丑陋。

我不相信存储视图引用会影响 gc，因为您可以使用 Activity 访问所有 ui 元素，它们的引用已经被持有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:10:49.370

答案是：这取决于，

如果您要重复引用 UI，保存引用会更便宜。不是，那么您可以只使用 findViewById 几次。在正常情况下的大多数应用程序中，无论哪种方式都不会对性能产生太大影响，因为这些任务不是非常系统密集型的。所以我的最终答案是，在你的工作流程中做任何对你来说最舒服的事情，因为性能增益/损失几乎可以忽略不计（除非你这样做很多次）。

# ironpython - 托管 IronPython：导入包含自定义函数的文件

> ID：13874688
> 
> 赞同：2
> 
> 时间：2012-12-14T07:54:26.720
> 
> 标签：ironpython

**情况**

托管 IronPython 允许开发人员将参数设置到脚本中。每次创建 IPy 引擎对象时，我都会设置这样一个参数（ParamName），但是当我尝试导入使用我的自定义参数的 python 模块时，我得到一个异常消息“全局名称'ParamName'不是定义”。

**代码示例**

```
class PythonScriptingEngine
{
    private ScriptEngine pyEngine;
    private ScriptScope pyScope;

    public PythonScriptingEngine()
    {
        pyEngine = Python.CreateEngine();
        pyScope = pyEngine.CreateScope();
    }

    public object Run(string script)
    {
        ScriptSource source = pyEngine.CreateScriptSourceFromString(script);
        CompiledCode compiled = source.Compile();
        return compiled.Execute(pyScope);
    }

    public void SetParameter(string name, int value)
    {
        pyScope.SetVariable(name, value);
    }
}

// execution
var engine = new PythonScriptingEngine();
engine.SetParameter("ParamName", 10);
engine.Run(@"import SampleScriptWithParamName"); 
```

**问题**

这种情况有什么解决方法吗？如何导入使用自定义参数的 python 脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:59:28.240

正如西蒙指出的那样，问题是`ParamName`不在`SampleScriptWithParamName`. 实现这一点的一种方法是将其添加到内置变量集中，如下所示：

```
public void SetParameter(string name, int value)
{
    pyEngine.GetBuiltinModule().SetVariable(name, value);
} 
```

这应该使它在任何地方都可用，但我现在没有能力对其进行测试。

# iphone - Plist 中的凭据编辑（如果正确）

> ID：13874690
> 
> 赞同：1
> 
> 时间：2012-12-14T07:54:37.280
> 
> 标签：iphone, ios, plist

在 plist 中，我存储了凭据，我需要检查正确的凭据，如果正确的凭据匹配，则将密码字段替换为新的..为此我有 3 `UITextField`。A 表示新的电子邮件 ID，b 表示当前密码，c 表示新密码 ..if`a==b`表示`current password == email id`在 c 文本字段中输入的新密码应替换为 中的当前密码字段`plist` ![进入这里](../Images/4b59f0cffe6056d3ffdaf4d44ab344b0.png) 。

```
 - (void)authenticateCredentials {
NSMutableArray *plistArray = [NSMutableArray arrayWithArray:[self readFromPlist]];

for (int i = 0; i< [plistArray count]; i++)
{
    id object = [plistArray objectAtIndex:i];

    if ([object isKindOfClass:[NSDictionary class]]) {
        NSDictionary *objDict = (NSDictionary *)object;

        if ([[objDict objectForKey:@"pass"] isEqualToString:emailTextFeild.text] && [[objDict objectForKey:@"title"] isEqualToString:passwordTextFeild.text])
        {

            NSLog(@"Correct credentials");
            // what should be the condition to replace current password to new password
        }
        NSLog(@"INCorrect credentials");
    } else {
         NSLog(@"Error! Not a dictionary");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:10:25.377

如果您的 plist 是捆绑的，则您无法更改其中存储的值。因此，在进行任何更改之前将其复制到文档目录。

回答你的问题：

```
if([emailField.text isEqualToString:currntPwd.txt])
{
   NSMutableDictionary *newDict = [[NSMutableDictionary alloc] init];
  [newDict addEntriesFromDictionary:objDict];
  [newDict setObject:@"Midhun" forKey:@"pass"];
   NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                             NSUserDomainMask, YES);
   NSString *docDirectory = [paths objectAtIndex:0];
   NSString *plistPath = [docDirectory stringByAppendingPathComponent:@"yourPlist.plist"];
   [[NSFileManager defaultManager] removeItemAtPath:plistPath];
   [newDict writeToFile:plistPath atomically:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:09:39.917

检查这是否适合您。

```
- (void)authenticateCredentials {

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                                 NSUserDomainMask, YES);
    NSString *documentsDirectory = [documentPaths objectAtIndex:0];
    NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"XYZ.plist"];
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];
    NSArray *plistArray = [dict objectForKey:@"title"];

    NSMutableArray *plistUpdatedArray = [NSMutableArray arrayWithArray:plistArray];

    for (int i = 0; i< [plistArray count]; i++)
    {
        id object = [plistArray objectAtIndex:i];

        if ([object isKindOfClass:[NSDictionary class]]) {
            NSDictionary *objDict = (NSDictionary *)object;

            if ([[objDict objectForKey:@"pass"] isEqualToString:emailTextFeild.text] && [[objDict objectForKey:@"title"] isEqualToString:passwordTextFeild.text])
            {
                NSLog(@"Correct credentials");

                NSMutableDictionary *dict1 = [NSMutableDictionary dictionaryWithDictionary:objDict];
                [dict1 setObject:newPassword forKey:@"title"];

                [plistUpdatedArray replaceObjectAtIndex:i withObject:dict1];

                NSMutableDictionary *dict2 = [NSMutableDictionary dictionaryWithDictionary:dict];
                [dict2 setObject:plistUpdatedArray forKey:@"title"];
                [dict2 writeToFile:documentPlistPath atomically:YES];

                return;
            }
            NSLog(@"INCorrect credentials");
        } else {
             NSLog(@"Error! Not a dictionary");
        }
    }
} 
```

# android - 输入越南语字符会保存另一个字符

> ID：13874692
> 
> 赞同：1
> 
> 时间：2012-12-14T07:54:43.897
> 
> 标签：android, webview, special-characters

我正在将此 WebView 与表单一起使用。它保存了我使用平板电脑输入的数据（通过 PHP 和 MySQL）。我正在输入越南语字符（见黄色标签＃1），但是当我点击保存（回复）按钮时，保存了不同的字符（见黄色标签＃2）......

![在此处输入图像描述](../Images/c77eb8d022804cf2e54b8538c0f40bd5.png)

..当我使用我的电脑输入一条消息（越南）并保存它时，这些字符在电脑和安卓平板电脑上都显示得很好......

任何想法可能是什么问题？先谢谢了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-06T03:36:24.790

输入越南语时需要使用unicode编码 请在此处[输入越南语](https://vietnamesetyping.com/)在线并复制粘贴

# date - 在 SSRS 上本地化日期

> ID：13874695
> 
> 赞同：0
> 
> 时间：2012-12-14T07:55:08.237
> 
> 标签：date, reporting-services

我在日期字段上使用**d格式**

因此，当报告的语言为德语（**de**）时，2012 年 7 月 22 日显示为：

```
22.07.2012 
```

当我将报告的语言切换为英语（**en**）时，2012 年 7 月 22 日显示为：

```
7/22/2012 
```

如何使英文日期显示为**07/22/2012**？即无论月份是两位数还是一位数，日期都应显示为两位数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:40:56.993

您可以使用[自定义日期格式](http://msdn.microsoft.com/en-en/library/8kb3ddd4%28v=vs.90%29.aspx)，例如 MM/dd/yyyy。如果您只需要为英文报告自定义格式，那么您可以使用表达式`=IIf (User!Language = "en", "dd\mm\yyyy", "d")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:21:35.057

您可以在报告中使用以下表达式以 dd/mm/yyyy 格式显示日期。以下屏幕截图显示了修改和未修改表达式的日期时间。

**表达：**

```
=string.Format("{0:MM/dd/yy}",Fields!ModifiedDate.Value) 
```

**无需修改**

![无需修改](../Images/a225728a42e9ad862d7caf631a557388.png)

**有修改：** ![有修改](../Images/d6c75d2fafd65d01b81e93c8d5f336c4.png)

希望这可以帮助！

# sql-server - 创建 SQL Server 视图时可以指定列类型吗？

> ID：13874719
> 
> 赞同：16
> 
> 时间：2012-12-14T07:57:18.033
> 
> 标签：sql-server, tsql

为了强制执行更严格的类型安全并更容易检测错误，我想明确指定我的视图的列类型。

但是，虽然这有效：

```
CREATE VIEW [dbo].[myview] (
    [a],
    [b],
    [c]
)
AS
SELECT 'a1', 'b1', 'c1'; 
```

这失败了：

```
CREATE VIEW [dbo].[myview] (
    [a] nvarchar(32) NOT NULL,
    [b] nvarchar(32) NOT NULL,
    [c] nvarchar(32) NOT NULL
)
AS
SELECT 'a1', 'b1', 'c1'; 
```

这有正确的语法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-14T08:00:05.383

SQL Server 必须推断类型 - 但如果需要，您可以强制执行：

```
CREATE VIEW [dbo].[myview] (
    [a],
    [b],
    [c]
)
AS
SELECT
   CONVERT(nvarchar(32),'a1'),
   CONVERT(nvarchar(32),'b1'),
   CONVERT(nvarchar(32),'c1'); 
```

至于事物的 null/non-null 方面，SQL Server 必须再次推断这一点。如果你有一个你知道的列，`not null`但 SQL Server 得到它不正确，你可以将它包装在一个`ISNULL`带有非空第二个参数的语句中：

```
SELECT ISNULL(ColumnSQLServerThinksCanBeNull,'abc') 
```

然后它将将该列描述为`not null`。第二个值无关紧要（毕竟，这是关于我自己的断言，即该列永远不会为空），只要它与该列的类型兼容。

# maven - Maven在这个目录下没有发布POM

> ID：13874726
> 
> 赞同：3
> 
> 时间：2012-12-14T07:57:49.217
> 
> 标签：maven, maven-3, maven-release-plugin

我正在尝试`maven-release-plugin 2.3.2`在多模块 POM 上使用。(Maven 3.0.4)

`release:prepare`工作正常，但`release:perform`因此错误而失败

```
[INFO] org.apache.maven.lifecycle.MissingProjectException: The goal you specified 
requires a project to execute but there is no POM in this directory (...<workspace>/target
/checkout). Please verify you invoked Maven from the correct directory. 
```

现在父 POM 位于其中，`<workspace>/`但`<workspace>/target/checkout`没有 POM，因为该`target`目录是由插件创建的。我假设这里应该有一个 pom.xml 的副本，它应该由插件创建，这就是错误的原因。

我做错了什么？附上目录和 POM 结构。模块 1 和 2 都有各自`pom.xmls`的根目录。

* * *

![目录结构](../Images/f885be470accb04a9e1572f46e4bb5c5.png)

* * *

我查看了[maven 发布插件 git，pom 不在顶部](https://stackoverflow.com/questions/5558785/maven-release-plugin-git-and-the-poms-not-at-the-top)，[maven 生成 pom 文件](https://stackoverflow.com/questions/6704813/maven-generating-pom-file)，[Maven 3.0 的“mvn release:perform”不喜欢不在其 git repo 根目录中的 pom.xml目录](https://stackoverflow.com/questions/10694139/maven-3-0s-mvn-releaseperform-doesnt-like-a-pom-xml-that-isnt-in-its-git-r?rq=1). 它们没有帮助，因为我的 pom 已经位于 repo 的（SVN）根目录中，而插件正在寻找 POM 的这个目录只是临时的，所以我不能/不应该对其进行硬编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:40:55.603

修复它.. 父 POM 中标签中的错误路径。来自 khmarbaise 的评论让我认为 SVN=Jenkins workspace=path in 中的路径是它可以工作的唯一方式，它就是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T12:44:09.190

确保您没有在项目结构中提交目标文件夹，因为它在该文件夹中签出，因此无法找到 pom 文件。

我遇到了类似的问题。:)

# perl - 用 perl 错误编写 utf8？

> ID：13874730
> 
> 赞同：3
> 
> 时间：2012-12-14T07:58:29.670
> 
> 标签：perl, utf-8, output

我的问题很简单。我想用我的 Perl 脚本输出 UTF-8。此代码不起作用。

```
use utf8;
open(TROIS,">utf8.out.2.txt");
binmode(TROIS, ":utf8");
print TROIS "Hello\n"; 
```

输出文件不是 UTF-8 格式。（我的文件脚本是用 UTF-8 编码的）但是如果我在我`print`的 . 例子：

```
print TROIS "é\n"; 
```

我在 Windows 下使用 ActivePerl 5.10。可能是什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T09:14:54.197

你写的只是 ASCII 字符`Hello\n`。幸运的是，ASCII 仍然是完全有效的 UTF-8。但是，编辑器的自动检测很可能不会将 UTF-8 显示为编码，因为他们没有任何东西可以判断文件内容的编码。我猜你根本不知道文件编码是如何工作的。

文件的编码是一种属性，通常不存储在文件中或文件外部。许多编辑器只是根据他们运行的操作系统或环境设置（系统语言）假设某种编码，或者它们包括某种半智能自动检测（由于文件编码不能自动检测，这可能仍然失败）明确地检测到）。`binmode`这就是为什么当你用相应的 I/O 层读取文件时，你必须告诉 Perl 文件是用 UTF-8 编码的。

现在有一种方法可以标记文本文件的编码，如果所述编码是 UTF 系列 (UTF-8, UTF-16 LE and BE, UTF-32 LE and BE) 之一。这种方式称为[BOM（字节顺序标记）](http://en.wikipedia.org/wiki/Byte_order_mark)。但是，使用 BOM 生成文件的时候，UTF-8 还没有像今天这样广泛传播。它通常会带来比它解决的更多和不同的问题，尤其是由于编辑器和应用程序通常根本不支持 BOM。因此，现在应该避免使用 BOM。

当然，也有例外，其中文件格式包含某些说明文件编码的指令。XML 与它的`DOCTYPE`声明有关。但是，即使对于此类文件，您也必须识别文件是否以每个字符至少使用两个字节 (UTF-16/UTF-32) 的多字节编码进行编码，以便`DOCTYPE`解析第一名。这根本不简单；）

# android - 如何添加新字段以从 sql 数据库中保存和检索图像

> ID：13874733
> 
> 赞同：0
> 
> 时间：2012-12-14T07:58:43.477
> 
> 标签：android

我阅读[了本教程](http://androidhub4you.blogspot.com/2012/09/hello-friends-today-i-am-going-to-share.html)并对其进行了编辑并添加了 Blob 类型的新字段 Image 但我很困惑如何做到这一点我尝试但没有解决请帮助我如何做到这一点？如何在数据库中添加图像我的代码有什么问题我如何浏览和上传图像并保存在数据库中然后检索？请编辑我的代码我如何在我的代码中添加新的字段图像？

```
 public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;

 private EditText Donedate;
 private EditText Notes;
 private EditText Person;
 private  ImageView imageView1;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.Address);
      capEt = (EditText) findViewById(R.id.Stage);
      codeEt = (EditText) findViewById(R.id.Dueby);

      Donedate = (EditText) findViewById(R.id.Donedate);

      Notes = (EditText) findViewById(R.id.Notes);
      Person = (EditText) findViewById(R.id.Person);

      imageView1 = (ImageView) findViewById(R.id.imageView1);
      Button Browse = (Button) findViewById(R.id.Browse);

      Browse.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {               
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                intent.setType("image/*");
                startActivityForResult(intent, 0);
            }
        });        

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         Donedate.setText(extras.getString("Location"));  
         Notes.setText(extras.getString("Notes")); 
         Person.setText(extras.getString("Person")); 
         imageView1.setTag(extras.getString("Image"));
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString(),
                  Donedate.getText().toString(),
                  Notes.getText().toString(),
                  Person.getText().toString(), null

                  );
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString(), 
            Donedate.getText().toString(),
         Notes.getText().toString(),
          Person.getText().toString(), null

         );
      }
   }

   protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

       switch(requestCode) {
       case 0:
           if(resultCode == RESULT_OK){
               Uri selectedImage = imageReturnedIntent.getData();
               String[] filePathColumn = {MediaStore.Images.Media.DATA};

               Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
               cursor.moveToFirst();

               int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
               String filePath = cursor.getString(columnIndex); // file path of selected image
               cursor.close();
                       //  Convert file path into bitmap image using below line.
               Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);

                       // put  bitmapimage in your imageview
               imageView1.setImageBitmap(yourSelectedImage);
           }
       }
    }

}

             mport android.os.AsyncTask;
        import android.os.Bundle;
       import android.app.ListActivity;
   import android.content.Intent;
   import android.database.Cursor;
  import android.view.Menu;
  import android.view.MenuInflater;
 import android.view.MenuItem;
   import android.view.View;
  import android.widget.AdapterView;
   import android.widget.CursorAdapter;
  import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
   import android.widget.AdapterView.OnItemClickListener;

   public class CountryList extends ListActivity {

 public static final String ROW_ID = "row_id";
 private ListView conListView;
 private CursorAdapter conAdapter;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    conListView=getListView();
    conListView.setOnItemClickListener(viewConListener);

    // map each name to a TextView
    String[] from = new String[] { "name" };
    int[] to = new int[] { R.id.countryTextView };
    conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.country_list,  
        null, from, to);
    setListAdapter(conAdapter); // set adapter
 }

 @Override
 protected void onResume() 
 {
   super.onResume();  
   new GetContacts().execute((Object[]) null);
  } 

 @Override
 protected void onStop() 
 {
   Cursor cursor = conAdapter.getCursor();

   if (cursor != null) 
      cursor.deactivate();

   conAdapter.changeCursor(null);
   super.onStop();
}    

 private class GetContacts extends AsyncTask<Object, Object, Cursor> 
 {
   DatabaseConnector dbConnector = new DatabaseConnector(CountryList.this);

   @Override
   protected Cursor doInBackground(Object... params)
   {
      dbConnector.open();
      return dbConnector.getAllContacts(); 
   } 

   @Override
   protected void onPostExecute(Cursor result)
   {
      conAdapter.changeCursor(result); // set the adapter's Cursor
      dbConnector.close();
   } 
 } 

 @Override
 public boolean onCreateOptionsMenu(Menu menu) 
 {
   super.onCreateOptionsMenu(menu);
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.country_menu, menu);
   return true;
 }   

 @Override
 public boolean onOptionsItemSelected(MenuItem item) 
 {
    Intent addContact = new Intent(CountryList.this, AddEditCountry.class);
   startActivity(addContact);
   return super.onOptionsItemSelected(item);
 }

 OnItemClickListener viewConListener = new OnItemClickListener() 
 {
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
   {         
      Intent viewCon = new Intent(CountryList.this, ViewCountry.class);
      viewCon.putExtra(ROW_ID, arg3);
      startActivity(viewCon);
   }
 };    

 }

      import android.content.ContentValues;
    import android.content.Context;
import android.database.Cursor;
 import android.database.SQLException;
 import android.database.sqlite.SQLiteDatabase;

     public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String  
    LocationEd, String Notes, String Person,byte[] image) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("code", code);

              newCon.put("Location",LocationEd);
              newCon.put("Notes",Notes);
              newCon.put("Person",Person);
              newCon.put("Image", image);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String  
   cap,String code,String LocationEd, String Notes, String Person ,byte[] image) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("code", code);
              editCon.put("Location", LocationEd);
              editCon.put("Notes", Notes);
              editCon.put("Person", Person);
              editCon.put("Image", image);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id",  
       "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null,  
    null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
     }

        import android.content.Context;
    import android.database.sqlite.SQLiteDatabase;
     import android.database.sqlite.SQLiteDatabase.CursorFactory;
    import android.database.sqlite.SQLiteOpenHelper;

      public class DatabaseOpenHelper extends SQLiteOpenHelper {

public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key   
     autoincrement,name text,cap text,code text,Location double,Notes text,Person  
      text,Image Blob);";              
    db.execSQL(createQuery);        
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

   }

       public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 

   private TextView Locationlb; 
   private TextView Noteslb; 
   private TextView Personlb; 

   private  ImageView imageView2;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       codeTv = (TextView) findViewById(R.id.codeText);

       Locationlb = (TextView) findViewById(R.id.Location_lbl);

       Noteslb = (TextView) findViewById(R.id.Notes_lbl);
       Personlb = (TextView) findViewById(R.id.Person_lbl);

       imageView2= (ImageView) findViewById(R.id.imageView2);
          Button Browse2 = (Button) findViewById(R.id.Browse2);

          Browse2.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {               
                    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                    intent.setType("image/*");
                    startActivityForResult(intent, 0);
                }
            });        

   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");

         int LocationIndex = result.getColumnIndex("Location");
         int NotesIndex = result.getColumnIndex("Notes");
         int PersonIndex = result.getColumnIndex("Person");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         codeTv.setText(result.getString(codeIndex));
         Locationlb.setText(result.getString(LocationIndex));

         Noteslb.setText(result.getString(NotesIndex));
         Personlb.setText(result.getString(PersonIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());

            addEditContact.putExtra("Location", Locationlb.getText());

            addEditContact.putExtra("Notes", Noteslb.getText());

            addEditContact.putExtra("Person", Personlb.getText());

            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
    }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:20:27.327

我建议将图像的 URL 存储在数据库中，而不是将实际图像存储为 BLOB 格式，因为所有以 BLOB 格式存储在数据库中的图像都会消耗您的内存。

您可以稍后以延迟加载方式下载图像，并将它们缓存到 SD 卡中。你可以参考[这篇](https://stackoverflow.com/a/3068012/801437)文章。

祝你好运 ：）

# iphone - 启用通知

> ID：13874739
> 
> 赞同：0
> 
> 时间：2012-12-14T07:59:12.293
> 
> 标签：iphone, xcode4, push-notification, apple-push-notifications

我想在我的 iphone 应用程序中启用通知。因此，我在应用 ID 中进行了修改：

![在此处输入图像描述](../Images/81fb8061c72570a33abc50cc88c2d9f7.png)

之后，我再次生成开发和分发配置文件并安装在我的 xcode 中。

我的应用程序是一个基于选项卡的应用程序，第一个选项卡是 UITableViewController

我添加以下行：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

   return YES;
} 
```

所以，我想我应该将我的应用程序安装在我的 iphone 中的通知安装应用程序列表中，但事实并非如此。

我错过了一些步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:08:25.300

首先在应用委托中启用您的远程通知。见下文 ：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    // Let the device know we want to receive push notifications
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
        (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:10:59.217

是的。根据[this](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/cl/UIApplication)和[this](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)你应该`registerForRemoteNotificationTypes`在你的 中添加方法`didFinishLaunchingWithOptions`，它应该看起来像这样：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

    return YES;
} 
```

根据您注册的应用类型，您的应用将显示在通知部分，您可以打开和关闭不同的类型（声音、徽章、横幅）。

希望有帮助。

# html - 如何在没有javascript的情况下通过提交输入传递参数？

> ID：13874740
> 
> 赞同：3
> 
> 时间：2012-12-14T07:59:29.203
> 
> 标签：html, submit, forms

我有一个包含多个提交按钮的表单。如何传递提交表单的参数以找出已按下哪个提交？不允许使用 JavaScript。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T08:03:16.200

假设您有 2 个或更多这样的按钮：

```
<input type="submit" name="SubmitButtonOne" value="Button One"/>
<input type="submit" name="SubmitButtonTwo" value="Button Two"/> 
```

在提交的 (POST) 数据中检查按钮的名称。

例如，在 PHP 中，这将是：

```
if (isset($_POST['SubmitButtonOne'])){
    //Do something.
}elseif (isset($_POST['SubmitButtonTwo'])){
    //Do something.
} 
```

或者，检查提交的值：

```
<input type="submit" name="formSubmit" value="Button One"/>
<input type="submit" name="formSubmit" value="Button Two"/> 
```

```
switch ($_POST['formSubmit']) {
    case 'Button One':
        //Do something.
        break;
  case 'Button Two':
        //Do something else.
        break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:04:26.963

只有提交表单的按钮才会被发送到服务器。因此，只需创建多个具有不同名称的提交按钮，然后检查 POST 数据中存在哪个按钮。

# sql - 建议使用哪些语言将 Windows cli 的输出插入到 sqlite 表中？

> ID：13874742
> 
> 赞同：-1
> 
> 时间：2012-12-14T07:59:30.723
> 
> 标签：sql, windows, sqlite, windows-7, batch-file

我想递归遍历我的`C:\Songs`目录中以 .mp3 或 .flac （不区分大小写）结尾的所有文件，并将每个文件路径作为参数传递给从 Windows 命令提示符运行的二进制文件，该文件返回音频指纹的字符串表示.

然后我想在 2xn sqlite 表中插入一条记录，其中 n 是我拥有的歌曲数。这两个字段是文件路径和从 Windows 命令提示符运行的命令的输出。

我需要一些帮助才能开始。我可以`>>`将命令行输出到一个平面文件。我还可以将记录插入到 sqlite 数据库中。但是我不知道可以使用哪些语言将命令行的输出直接传递到 sqlite 表。您对语言有什么建议以及如何使用它们来实现预期目标？

另外 - 我使用的是 Windows 7，但我认为如果我使用另一个 Windows 操作系统，例程将是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:16:07.563

使用批处理脚本

```
@echo off
setlocal

pushd "C:\Songs"

REM Get the file count
for /f %%N in ('dir /b /a-d *.mp3 *.flac^|find /c /v ""') do set "cnt=%%N"
REM The file count is now in the cnt variable. I'll simply ECHO the value
echo File count = %cnt%

REM Process each file
for %%F in (*.mp3 *.flac) do (
  REM The file name is now in %%F variable

  REM Run your command - I'm assuming it only produces 1 line of output
  for /f "delims=" %%A in ('yourCommand yourArgs "%%F"') do (
    REM the command output is now in %%A

    REM Write your records. You will have to come up with the syntax here
    REM I'll simply echo the record to the screen
    echo "%%F", "%%A"
  )
)

popd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:44:18.287

您*可以*为此使用 Windows 批处理脚本。如果这是您想要采取的方法，@dbenham 的答案看起来是一个好的开始（我赞成这个答案）。

但是如果你想要真正的错误检查，或者你想随着时间的推移来增强它，我建议你使用真正的编程或脚本语言。有很多不错的选择。有多种方法可以使用 JavaScript 或 PHP。

就我个人而言，我用 Python 编写了这种类型的代码，并且对此非常满意。您可以[启动命令，读取它的标准输出等](http://docs.python.org/2/library/subprocess.html)。此外，它还支持内置的[sqlite 。](http://docs.python.org/2/library/sqlite3.html)

# python - 如何在 Python 中从串行捕获字符和换行符并打印到文件

> ID：13874743
> 
> 赞同：0
> 
> 时间：2012-12-14T07:59:52.437
> 
> 标签：python

我正在尝试在 python 脚本中捕获来自串行的数据。流以“#”结尾，流可以包含字母、数字、许多其他特殊字符和换行符。我想捕获所有字符并在完成后将它们放入一个文件中。但是，我不确定我的 re 是否正确。是

`re.match("[A-Za-z0-9,.$:<>&*=-]", char, re.DOTALL)`

要捕获所有字母、数字和`,.$:<>&*=-`字符以及换行符吗？我可以简单地添加遇到的每个字符，将它放在一个列表中，然后像这样编写列表 ta 文件：

```
while 1:
   # must handle 'exceptions' - IE blank data....
   try:
      if s.inWaiting():
         val = s.read(s.inWaiting())
         for char in val:
            if re.match("[A-Za-z0-9,.$:<>&=-]", char, re.DOTALL):
               chunk += char
               print char

            # handle end of stream
            #if char is '#':
            if re.match("#", char):
               f = open('./report', 'w')
               f.write(chunk)
               sys.exit() 
```

目前它正在抓住我所期望的一切，但它似乎没有抓住新行，因为结果文件不包含任何......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:15:11.497

即使您使用的是`re.DOTALL`，您的正则表达式实际上并没有使用点运算符。将第 7 行更改为以下内容应该可以按预期工作：

```
if re.match("[A-Za-z0-9,.$:<>&=-]|\n", char): 
```

适用于基于 *nix 和基于 PC 的换行编码，`\r`正则表达式将简单地忽略它。

# jquery - jQuery如何通过ajax加载多个页面部分

> ID：13874744
> 
> 赞同：0
> 
> 时间：2012-12-14T07:59:56.803
> 
> 标签：jquery, ajax, loading

我的页面显示了不同类别的多个表格，每个表格都是通过 ajax 加载的。

类别的数量可能会有所不同，但我知道在进行 ajax 调用之前会存在多少。我像这样同时展示它们：

```
$(function(){
    var categories = 3; // this is calculated dynamically
    var categoriesLoaded = 0;

    $('#categoryA').load('/getCategoryA', function(){categoriesLoaded++;checkLoadProgress();});
    $('#categoryB').load('/getCategoryB', function(){categoriesLoaded++;checkLoadProgress();});
    $('#categoryC').load('/getCategoryC', function(){categoriesLoaded++;checkLoadProgress();});

    function checkLoadProgress(){
        if(categoriesLoaded == categories){
            $('.spinner').hide();
            $('.categories').show();
        }
    }
}); 
```

这行得通，但我想从你那里知道这是否是实现这一目标的一种体面的方式。

我的目标是有一个加载栏（也许我已经有足够的信息），但我真的不喜欢我检查状态的方式，重复的功能。欢迎任何提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:24:26.773

我建议您进行一些更改（但通常我认为您的代码还不错）：

```
$(function(){
    var categories = 3; // this is calculated dynamically

    for(var categoriesLoaded = 0; categoriesLoaded < categories; categoriesLoaded++){
        var charCode = String.charCodeAt('A') + categoriesLoaded;
        var symbol= String.fromCharCode(charCode);
        $('#category'+ symbol).load('/getCategory' + symbol, function(){categoriesLoaded + 1;checkLoadProgress();});
    }

    function checkLoadProgress(){
        if(categoriesLoaded == categories){
            $('.spinner').hide();
            $('.categories').show();
        }
    }
}); 
```

但！checkLoadProgress() 只有在所有类别都加载并且它什么都不返回时才使用，这就是为什么看起来你可以写：

```
$(function(){
    var categories = 3; // this is calculated dynamically

    for(var categoriesLoaded = 0; categoriesLoaded < categories; categoriesLoaded++){
        var charCode = String.charCodeAt('A') + categoriesLoaded;
        var symbol = String.fromCharCode(charCode);
        $('#category'+ symbol).load('/getCategory' + symbol);
        //function() was deleted
    }

    $('.spinner').hide();
    $('.categories').show();
}); 
```

# javascript - JavaScript 元编程的动态参数？

> ID：13874747
> 
> 赞同：4
> 
> 时间：2012-12-14T08:00:14.570
> 
> 标签：javascript, dynamic, parameters, delegates, metaprogramming

我想将几个方法从一个 JavaScript-Object 委托给另一个。所以我考虑使用元编程来不将几种方法定义为委托。到目前为止，我最终使用了这种方法：

```
function delegate_to(_method, _obj) {
  return function(_args) { // One parameter, what's about multiple parameters?
    return _obj[_method](_args)
  }
} 
```

因此，作为示例代码，它应该如何工作：

```
var that = {}
var delegate = {}
that.foo = function(_message) { console.log("foo: " + _message) }
that.bar = function(_message) { console.log("bar: " + _message) }
that.baz = function(_message) { console.log("baz: " + _message) }

function delegate_to(_method, _obj) {
  return function(_args) { // One parameter, what's about multiple parameters?
    return _obj[_method](_args)
  }
}

['foo', 'bar', 'baz'].forEach(function(method) {
  delegate[method] = delegate_to(method, that)
})

delegate.foo('Hello JS') // foo: Hello JS
delegate.bar('Hello JS') // bar: Hello JS
delegate.baz('Hello JS') // baz: Hello JS 
```

代码确实有效，但是如果我想委托一个具有多个参数的方法怎么办？`n`参数呢？是否可以将代码更改为具有任意数量的参数？这是否在任何浏览器中运行？

问候，雷纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:04:41.927

试试这个：

```
function delegate_to(_method, _obj) {
  return function() {
    return _obj[_method].apply(_obj, [].slice.call(arguments))
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:17:46.703

函数具有称为“应用”的方法以将可变数量的参数作为数组传递。参考[MDC:Function.apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

您可以通过以下方式将传递给函数的所有参数转换为数组
`Array.prototype.slice.call(arguments, 0)`

使用这两个原则，我修改了您的代码以采用多个参数。请参阅 JSBin [http://jsbin.com/iwiwix/3/watch](http://jsbin.com/iwiwix/3/watch)

相关代码摘录：

```
delegate.foo('Hello JS', "from foo"); // foo: Hello JS

function delegate_to(_method, _obj) {
  return function() {
    var argArray =  Array.prototype.slice.call(arguments, 0);
    return _obj[_method].apply(_obj, argArray);
  };
}

that.foo = function() { console.log("foo: " + arguments[0] + ' ' + arguments[1]); }; 
```

# java - 放置在 JTable 单元格中的 JCheck 框不响应鼠标单击

> ID：13874748
> 
> 赞同：-1
> 
> 时间：2012-12-14T08:00:15.383
> 
> 标签：java, swing, jtable, jcheckbox

我是 Swings 的新手

可以请帮助我吗

**我有一个场景：** 我在第三列中放置`JCheck`了框，方法`JTable`是覆盖其列类以返回第三列的布尔值。

所以看起来好像我们在表格的第 3 列有复选框......最近我发现表格的列表选择事件仅基于复选框存在但不存在的“单元格焦点”被触发复选框本身。

即，如果焦点位于特定单元格（第 3 列），则切换单元格中的复选框不会触发事件....

我是不是错过了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:27:06.480

> 在其中，我通过覆盖其列类以返回第三列的布尔值，将 JCheck 框放在 JTable 的第三列中。

*   [请参阅 Oracles JTable 教程，以尝试教程中的代码示例](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   [布尔值表示 JTable 中的 JCheckBox](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

> 即，如果焦点位于特定单元格（第 3 列），则切换单元格中的复选框不会触发事件....
> 
> 我是不是错过了什么......

*   [必须覆盖 public boolean isCellEditable(int row, int col)](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

# javascript - 清除页面中的控件值而不从服务器 ASP.NET 回发

> ID：13874751
> 
> 赞同：0
> 
> 时间：2012-12-14T08:00:25.210
> 
> 标签：javascript, c#, asp.net, postback

我在有RequiredFieldValidators 的网页中有文本框。在这些控件的最底部是按钮*提交*和*清除* 每次我单击*提交*按钮时，它都会触发来自RequiredFieldValidators 的验证，这很好。我不想要的是当我单击*清除*按钮时，RequiredFieldValidators 也会被触发。这是我的清晰代码..

```
 txtFullName.Text = null;
    txtUserName.Text = null;
    txtPassword.Text = null;
    txtRetypePassword.Text = null;
    CheckList.Items.FindByText("Activated").Selected = false;
    CheckList.Items.FindByText("Suspended").Selected = false; 
```

我只想清除控件而不是每次单击*清除*按钮时验证它们。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:05:03.750

```
You should to set property CausesValidation="false" for your clear button 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:06:58.080

您应该在需要验证和提交按钮的控件上设置[ValidationGroup属性。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.validationgroup.aspx)清除按钮不应填充此属性。

根据您的标题，将此控件放在 UpdatePanel 中以防止可见的回发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T08:20:53.077

或者，您可以仅使用清除按钮的 OnClientClick 事件方法并仅通过 javascript 清除各种输入字段。这在理论上*应该*不会触发回发，因此也不会触发验证。

# python - 确定路径是否合法

> ID：13874752
> 
> 赞同：0
> 
> 时间：2012-12-14T08:00:29.597
> 
> 标签：python, security

如何检查用户提供的路径是否已清理？

我想确保它没有通配符或任何恶作剧。现在，我正在检查它是否没有*转义*正确的文件夹，所以：

```
if os.path.commonprefix([os.path.abspath(path),os.getcwd()]) != os.getcwd():
    # raise error etc.. 
```

但就像所有自己编写的安全检查代码一样，我希望它能够受到更好的审查！毕竟，它并没有说明该路径实际上是合法的。

然后我将使用该路径来*创建*资产等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:11:17.483

您可以使用[Werkzeug 的`secure_filename`](http://werkzeug.pocoo.org/docs/utils/#werkzeug.utils.secure_filename)：

> ### `werkzeug.utils.secure_filename(filename)`
> 
> 向它传递一个文件名，它将返回它的安全版本。然后可以将该文件名安全地存储在常规文件系统上并传递给`os.path.join()`. 返回的文件名是一个纯 ASCII 字符串，以实现最大的可移植性。
> 
> 在 Windows 系统上，该功能还确保文件不是以特殊设备文件之一命名的。
> 
> ```
> >>> secure_filename("My cool movie.mov")
> 'My_cool_movie.mov'
> >>> secure_filename("../../../etc/passwd")
> 'etc_passwd'
> >>> secure_filename(u'i contain cool \xfcml\xe4uts.txt')
> 'i_contain_cool_umlauts.txt' 
> ```

# sql - 使用两个表的引用更新一个表列时出错

> ID：13874758
> 
> 赞同：1
> 
> 时间：2012-12-14T08:00:59.597
> 
> 标签：sql, sql-server-ce

我正在尝试参考其他表来更新表中的列。有两个表，`nt_masterinstrument`和`SQLSymbol`（见屏幕 A）。中的描述`nt_masterinstrument`为空，我尝试从`SQLSymbol`. 屏幕 B 显示更新语句和错误。我正在使用 MS SQL Compact 查询分析器。

图片：

![两个表和更新语句](../Images/5861aec862ab6c93868f7f8792efc0d2.png)

简单来说：两个表，TblCust 和 TblTemp，如下所示：

TblCust CustCode CustName

```
 T01 
```

TblTemp TempCode TempName

```
 T01       Andy Skinner 
```

请帮助我编写一条更新语句以从 TblTemp 更新 CustName。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:29:03.420

试试这个代码：

```
update alias_tbl 
set alias_tbl.description=sqlsymbol.descrition
from nt_masterintrument alias_tbl  JOIN sqlsymbol
on nt_masterintrument.name=sqlsymbol.name
where /*filter condition*/ 
```

# drupal - hook_form 被调用两次

> ID：13874759
> 
> 赞同：0
> 
> 时间：2012-12-14T08:01:09.503
> 
> 标签：drupal, drupal-7

hook_form 被调用两次

```
/**
* Implements hook_form_alter().
*/
function MYMODULE_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'user_register_form') {
    $form_state['redirect'] = false;
    my_function();      
  }
} 
```

my_function() 调用两次，我只需要一次。

我读了这篇文章：

[https://drupal.stackexchange.com/questions/22881/hook-form-b​​eing-called-twice](https://drupal.stackexchange.com/questions/22881/hook-form-being-called-twice)

我尝试使用 $form_state['redirect'] = false 但对我不起作用。

有人知道任何干净的方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:06:07.950

在我看来，您应该在自己的提交功能中做任何事情。

通过将函数名称添加到 form_alter 中的提交数组来添加您自己的提交函数。

```
function MYMODULE_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'user_register_form') {
    $form['#submit'][] = 'MYMODULE_submit_function';    
  }
}

function MYMODULE_submit_function(&$form, &$form_state) {
  $form_state['redirect'] = false;
  my_function(); 
} 
```

# java - 用户在 JAVA 中使用 SMACK api 输入通知

> ID：13874760
> 
> 赞同：0
> 
> 时间：2012-12-14T08:01:26.087
> 
> 标签：java, smack

我正在尝试实现这个模块，其中显示用户在输入消息时正在输入。我是这个东西的新手，所以如果发现愚蠢的错误，请忽略。我查看了文档，这是我在代码中提出的：

```
import java.applet.Applet;

public class ChatBoard extends JFrame implements MessageListener {

    private static final long serialVersionUID = 1L;
    private JPanel contentPane;
    static String username, password;
    static XMPPConnection connection;
    private JTextField textField;
    static JLabel board = new JLabel("<html>");
    static Chat chat;
    String message;
    static String to;
    static boolean flag = true;
    ChatState status;

    public class typingStatus implements ChatStateListener {

        @Override
        public void processMessage(Chat arg0, Message arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void stateChanged(Chat arg0, ChatState arg1) {
            // TODO Auto-generated method stub
            System.out.println(arg0.getParticipant() + " is " + arg1.name());

        }

    }

    public void sendChat(String msg) {
        //send chat code

    }

    public ChatBoard(String user, String pass) {

        setVisible(true);
        username = user;
        password = pass;
        //JFrame Creation code
        textField.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void removeUpdate(DocumentEvent e) {
                // TODO Auto-generated method stub
                changeStatus();

            }

            @Override
            public void insertUpdate(DocumentEvent e) {
                // TODO Auto-generated method stub
                changeStatus();

            }

            private void changeStatus() {
                // TODO Auto-generated method stub
                if (textField.getText().isEmpty() == false) {
                    try {
                        ChatStateManager.getInstance(connection)
                                .setCurrentState(ChatState.composing, chat);
                    } catch (XMPPException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                } else {
                    try {
                        ChatStateManager.getInstance(connection)
                                .setCurrentState(ChatState.inactive, chat);
                    } catch (XMPPException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                }

            }

            @Override
            public void changedUpdate(DocumentEvent e) {
                // TODO Auto-generated method stub
                changeStatus();

            }
        });

        //JFrame creation code

        ConnectionConfiguration config = new ConnectionConfiguration(
                "prc.p1.im", 5222, "prc.p1.im");

        connection = new XMPPConnection(config);

        try {
            connection.connect();

        } catch (XMPPException e) {

            e.printStackTrace();
            System.out.println("Not Connected. Error :" + e.getMessage());
        }

        try {
            connection.login(username, password);

        } catch (XMPPException e) {

            flag = false;

            textField.setVisible(false);
            sendButton.setVisible(false);

            info.setText("Invalid Login!");

            welcomeLabel.setText("Invalid user!");

        }

        connection.getChatManager().addChatListener(new ChatManagerListener() {

            public void chatCreated(final Chat chat,
                    final boolean createdLocally) {

                chat.addMessageListener(new MessageListener() {

                    public void processMessage(Chat chat, final Message message) {
                        try {
                            SwingUtilities.invokeAndWait(new Runnable() {

                                @Override
                                public void run() {

                                    String sender = message.getFrom();
                                    if (username.compareTo("shraz") == 0)
                                        sender = "h";
                                    else
                                        sender = "t";

                                    if (message != null
                                            || message.getBody() != "")
                                        board.setText(board.getText()
                                                + "<br> <font color=red>"
                                                + sender
                                                + " </font>:<font color=black> "
                                                + message.getBody() + "</font>");
                                    URL url = getClass().getResource(
                                            "resource/ultrakill_ultimate.wav");
                                    AudioClip clip = Applet.newAudioClip(url);
                                    clip.play();
                                }
                            });
                        } catch (InvocationTargetException e) {

                            e.printStackTrace();
                        } catch (InterruptedException e) {

                            e.printStackTrace();
                        }

                    }

                });

            }

        });

    }

    @Override
    public void processMessage(Chat arg0, Message arg1) {

        //Displaying message code here

    }

} 
```

聊天双向进行。但是，在运行此代码时，每当我输入任何内容时都会出现以下异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Arguments cannot be null.
    at org.jivesoftware.smackx.ChatStateManager.setCurrentState(ChatStateManager.java:118)
    at ChatBoard$2.changeStatus(ChatBoard.java:165)
    at ChatBoard$2.insertUpdate(ChatBoard.java:156)
    at javax.swing.text.AbstractDocument.fireInsertUpdate(AbstractDocument.java:202)
    at javax.swing.text.AbstractDocument.handleInsertString(AbstractDocument.java:749)
    at javax.swing.text.AbstractDocument.insertString(AbstractDocument.java:708)
    at javax.swing.text.PlainDocument.insertString(PlainDocument.java:130)
    at javax.swing.text.AbstractDocument.replace(AbstractDocument.java:670)
    at javax.swing.text.JTextComponent.replaceSelection(JTextComponent.java:1379)
    at javax.swing.text.DefaultEditorKit$DefaultKeyTypedAction.actionPerformed(DefaultEditorKit.java:876)
    at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1661)
    at javax.swing.JComponent.processKeyBinding(JComponent.java:2879)
    at javax.swing.JComponent.processKeyBindings(JComponent.java:2926)
    at javax.swing.JComponent.processKeyEvent(JComponent.java:2842)
    at java.awt.Component.processEvent(Component.java:6281)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1908)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:752)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1017)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:889)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:717)
    at java.awt.Component.dispatchEventImpl(Component.java:4730)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

关于如何实现这个模块或我在做什么错误的任何评论？

第 165 行：

```
ChatStateManager.getInstance(connection).setCurrentState(ChatState.composing, chat); 
```

第 156 行：

```
public void insertUpdate(DocumentEvent e) {
                // TODO Auto-generated method stub
                changeStatus(); //<-line 156

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T08:33:22.010

您是否将以下提供程序添加到您的应用程序中？

```
ProviderManager pm = ProviderManager.getInstance();
pm.addExtensionProvider("active","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
pm.addExtensionProvider("composing","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider()); 
pm.addExtensionProvider("paused","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
pm.addExtensionProvider("inactive","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
pm.addExtensionProvider("gone","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider()); 
```

添加这些提供程序后，您将能够读取这些状态。

我建议您在首次连接远程服务器时添加和初始化这些提供程序。

希望这可能会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:06:43.820

该变量`chat`没有被初始化，因此是`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:04:57.360

MessageEventManager mem = new MessageEventManager(mConnection); mem.sendComposingNotification(mBuddyName, mMsgid);

# css - 停止继承特定的字体大小

> ID：13874761
> 
> 赞同：1
> 
> 时间：2012-12-14T08:01:43.407
> 
> 标签：css, lotus-notes

我正在使用 Lotus Domino 将文档显示为网页。

此页面使用一个 CSS 文件，该文件`font-size`对所有文本（`p`、`font`、`td`等）具有继承或相对关系。现在有一部分页面包含用户输入的 Lotus Notes 文档的富文本字段中的内容。这部分页面应该保留用户输入的文本的字体属性，如 font-size 和 font-family。但是，由于从 CSS 文件中继承了 font-size:inherit，用户输入的内容的 font-size 不会被保留。

我试图覆盖`font-size:inherit`但没有选项可以保留用户输入的属性。我无法从允许的值中进行选择，例如`bigger`, `em`, `px`，`%`因为任何这些都会改变`font-size`内容的。

您知道如何保留内容的字体大小并且不会基于 CSS 文件吗？请注意，我不可能不使用 CSS 文件，因为某些页面内容使用了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:40:37.217

假设您可以更改页面和 CSS 文件，您可以通过向元素添加 CSS 类而不是使用元素名称作为选择器（即 P、FONT 等）来解决这个问题。富文本字段的输出不会包含您添加的那些 CSS 类，因此不会受到影响。例如：

```
<style type="text/css">
.mystyle { font-weight: bold; }
.myfooter { font-size: 0.8 em; }
</style>

<P class="mystyle">Some text</P>

<!-- My Rich Text Box -->
<P>Some text entered by user</P>
<!-- End Rich Text Box -->

<P class="myfooter">Footer text</P> 
```

如果您想保留元素选择器，您也可以将富文本字段之外的所有内容包装在一个 div 中，然后为该 div 分配一个类并调整您的选择器。例如：

```
<style type="text/css">
#wrapper P { font-weight: bold; }
#wrapper A { text-decoration: none; }
</style>

<div id="wrapper">
    <P>Some text</P>
    <A href="www.stackoverflow.com">Stack Overflow</A>
</div>
<!-- My Rich Text Box unaffected by styles -->
<P>Some text entered by user</P>
<!-- End Rich Text Box --> 
```

# c# - C# 字符串到 RTF 性能

> ID：13874764
> 
> 赞同：2
> 
> 时间：2012-12-14T08:02:05.010
> 
> 标签：c#, string, performance, rtf

关于从字符串到 RTF 的转换，我遇到了一些性能问题。我的方法如下所示：

```
static string convert_to_plain(string rtf)
{
      RichTextBox temp = new RichTextBox();
      temp.Rtf = rtf;
      return temp.Text;
} 
```

顺便说一句，如果我使用这种方法，我的方法似乎是减慢大约 3 秒。我考虑过使用 String-Builder 或其他东西，但我认为它不会有帮助。顺便说一句，我已经尝试在程序启动时只初始化一次 RTF 对象，但这并没有改变。

那么有没有人知道如何提高该方法的性能？

谢谢！最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:46:28.567

这个库更快吗？这有很多不同的功能，也许你可以使用它

[http://www.codeproject.com/Articles/11306/NRTFTTree-A-class-library-for-RTF-processing-in-C](http://www.codeproject.com/Articles/11306/NRTFTree-A-class-library-for-RTF-processing-in-C)

# android - 如何获取 android 设备中所有浏览器访问的 url 列表？

> ID：13874766
> 
> 赞同：1
> 
> 时间：2012-12-14T08:02:10.440
> 
> 标签：android, cursor, browser

我知道以下代码有效，但仅适用于默认浏览器。

我想要设备中安装的所有浏览器。

```
Cursor mCur = managedQuery(Browser.BOOKMARKS_URI,
                            Browser.HISTORY_PROJECTION, null, null, null);

                    mCur.moveToFirst();
                    if (mCur.moveToFirst() && mCur.getCount() > 0) {
                        while (mCur.isAfterLast() == false) {

                            Log.v("titleIdx",
                                    mCur.getString(Browser.HISTORY_PROJECTION_TITLE_INDEX));
                            Log.v("urlIdx",
                                    mCur.getString(Browser.HISTORY_PROJECTION_URL_INDEX));
                            long dateTime = Long.parseLong(mCur
                                    .getString(Browser.HISTORY_PROJECTION_DATE_INDEX));
                            cal.setTimeInMillis(dateTime);
                            Log.i("Date", cal.getTime().toString());
                            mCur.moveToNext();

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:09:09.303

除非浏览器（Chrome 等）为此公开一个明确的接口，否则你不能。这也是一件好事。我不希望随机应用程序检查我在设备上访问过的内容。你想建立什么？我真诚地希望它不是间谍软件...

# javascript - 发送一个帖子 URL 并保存响应中的唯一密钥，并使用从第一个响应中收到的密钥发送 POST

> ID：13874767
> 
> 赞同：1
> 
> 时间：2012-12-14T08:02:11.393
> 
> 标签：javascript, post, response, httpresponse

我的知识非常有限，但我完全不知道如何开始这个或在编写脚本时使用什么命令，我希望它可以在 javascript 中完成，它将 POST 数据发送到第 3 方站点，它在那里回复使用该会话的密钥，我只想从响应中保存密钥，然后使用不同的表单发送新的 POST。

这可能吗？或者这比我认为的更难？

```
 $(document).ready(function(){

                ajaxKey = "b71bfa6a261744ce29d91d9ab5c918f5a2b9bdcd84836feb64703faa0549c1e0";

                $("#game_reload").live("click", function() {
                    $("#game_field_blank").css("background-color","yellow");
                    $(".game_field_container").slideToggle(900);

                }); 
```

编辑以添加通过 firebug 查看的 respose 中的代码片段，其中包括演示密钥

# ppp - LCP：在 ecos 上使用 GPRS 调制解调器发送配置请求超时

> ID：13874770
> 
> 赞同：3
> 
> 时间：2012-12-14T08:02:47.197
> 
> 标签：ppp

我正在使用 GPRS 调制解调器并想在 eCos 上通过 PPP 建立连接。但是无法拨号成功。这个调制解调器在 windows xp 上运行良好。“LCP：发送配置请求超时”的原因可能是什么？请提出建议。非常感谢！

我的聊天脚本如下

```
 "ABORT",        "NO CARRIER",
    "ABORT",        "ERROR",
    "ABORT",        "NO DIALTONE",
    "ABORT",        "BUSY",
    "ABORT",        "NO ANSWER",
    "",             "AT",
    "OK",           "ATS0=0",
    "OK",           "ATE0V1",                
    "OK",           "ATE1",          
    "OK",           "AT+CGDCONT=1,\"IP\",\"internet\"",        
    "OK",           "ATDT*99#",
    "CONNECT",      "\\d\\c",
    NULL 
```

日志如下。

```
SYSLOG 08: Using interface ppp0
SYSLOG 04: Connect: ppp0 <--> /dev/serial0
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfNak id=0x1 <auth chap 05>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfNak id=0x1 <auth chap 05>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfNak id=0x1 <auth chap 05>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfNak id=0x1 <auth chap 05>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfNak id=0x1 <auth chap 05>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: sent [LCP ConfReq id=0x1 <magic 0x37ad5204> <pcomp> <accomp>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 10: rcvd [LCP ConfReq id=0x1 <asyncmap 0xa0000> <auth pap> <pcomp> <accomp>]
SYSLOG 10: sent [LCP ConfRej id=0x1 <auth pap>]
SYSLOG 02: LCP: timeout sending Config-Requests
SYSLOG 04: Connection terminated, connected for 1 minutes 
```

# java - 正则表达式正好 n 或 m 次

> ID：13874777
> 
> 赞同：134
> 
> 时间：2012-12-14T08:03:31.740
> 
> 标签：java, php, regex

考虑以下正则表达式，其中`X`是*任何*正则表达式。

```
X{n}|X{m} 
```

此正则表达式将测试`X`发生的*确切* `n`时间或`m`时间。

是否有一个正则表达式量词可以`X`准确地测试某个事件`n`或`m`时间？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-12-14T08:10:58.373

没有一个量词表示“正好 m 或 n 次”。你这样做的方式很好。

另一种选择是：

```
X{m}(X{k})? 
```

其中`m < n`和`k`是 的值`n-m`。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-12-14T08:16:33.803

这是量词的完整列表（参考[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)）：

*   `?`, `??`- 0 或 1 次出现（`??`懒惰，`?`贪婪）
*   `*`, `*?`- 任意数量的出现
*   `+`, `+?`- 至少出现一次
*   `{n}`- 确切地`n`发生
*   `{n,m}`-`n`发生`m`，包容
*   `{n,m}?`-`n`发生`m`，懒惰
*   `{n,}`, `{n,}?`- 至少`n`发生

要获得“恰好 N 或 M”，您需要编写两次量化的正则表达式，除非 m,n 是特殊的：

*   `X{n,m}`如果`m = n+1`
*   `(?:X{n}){1,2}`如果`m = 2n`
*   ...

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-12-14T08:12:45.900

不，没有这样的量词。但我会对其进行重组`/X{m}(X{m-n})?/`以防止[回溯中出现问题](http://www.regular-expressions.info/catastrophic.html)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-07T16:03:10.090

TLDR；`(?<=[^x]|^)(x{n}|x{m})(?:[^x]|$)`

看起来你想要“xn 次”或“xm 次”，我认为正则表达式的直译是`(x{n}|x{m}).` 这样的[https://regex101.com/r/vH7yL5/1](https://regex101.com/r/vH7yL5/1)

或者，如果您可以拥有超过 m 个“x”的序列（假设 m > n），您可以添加 'following no "x"' 和 'followed by no "x"，转换`[^x](x{n}|x{m})[^x]`为假设你的“x”后面和之后总是有一个字符。正如你在这里看到的：[https ://regex101.com/r/bB2vH2/1](https://regex101.com/r/bB2vH2/1)

您可以将其更改为`(?:[^x]|^)(x{n}|x{m})(?:[^x]|$)`，翻译为“跟随没有'x'或跟随行开始”和“跟随没有'x'或跟随行结束”。但是，它仍然不会匹配两个序列，它们之间只有一个字符（因为第一个匹配需要一个字符，第二个需要一个字符），如您在此处看到的：[https ://regex101.com/r/ oC5oJ4/1](https://regex101.com/r/oC5oJ4/1)

最后，为了匹配一个字符的远距离匹配，您可以在“no 'x' after”上添加正向向前看 (?=) 或在“no 'x' before”上添加正向向后看 (?<=)，像这样：[https ://regex101.com/r/mC4uX3/1](https://regex101.com/r/mC4uX3/1)

```
(?<=[^x]|^)(x{n}|x{m})(?:[^x]|$) 
```

这样，您将只匹配您想要的确切数量的“x”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-23T14:02:47.013

很老的帖子，但我想贡献一些可能会有所帮助的东西。我已经完全按照问题中所述的方式进行了尝试，它确实有效，但有一个问题：数量的顺序很重要。考虑一下：

```
#[a-f0-9]{6}|#[a-f0-9]{3} 
```

这将找到所有出现的十六进制颜色代码（它们的长度为 3 位或 6 位）。但是当我像这样翻转它时

```
#[a-f0-9]{3}|#[a-f0-9]{6} 
```

它只会找到 3 位数字或 6 位数字的前 3 位数字。这确实是有道理的，Regex 专业人士可能会立即发现这一点，但对于许多人来说，这可能是一种特殊的行为。有一些高级的正则表达式功能可以避免这个陷阱，不管顺序如何，但并不是每个人都深入了解正则表达式模式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-08T12:13:23.427

看看 Enhardened 的回答，他们说倒数第二个表达式不会匹配它们之间只有一个字符的序列。有一种简单的方法可以在不使用前瞻/后视的情况下解决此问题，那就是将开始/结束字符替换为边界字符。这使您可以匹配包括开始/结束在内的单词边界。因此，适当的表达应该是：

`(?:[^x]|\b)(x{n}|x{m})(?:[^x]|\b)`

正如您在此处看到的：[https](https://regex101.com/r/oC5oJ4/2) ://regex101.com/r/oC5oJ4/2 。

# .net - Mysql UTF8 编码问题 - “不正确的字符串值”

> ID：13874795
> 
> 赞同：3
> 
> 时间：2012-12-14T08:05:15.280
> 
> 标签：.net, mysql

我正在使用带有 .Net 连接器（6.5.4）的 Mysql（5.5.27），当我尝试插入一些数据时，出现以下错误。

```
Incorrect string value: '\xF3\xB6\xA5\x89f'...' for column 'STACK_TRACE' at row 1 
```

我已经在堆栈溢出方面进行了足够多的搜索，并尝试遵循数据库、表和列的字符集和排序规则。

*   'utf8' 'utf8_general_ci'
*   'utf8' 'utf8_unicode_ci'
*   'utf8mb4' 'utf8mb4_general_ci'
*   'utf8mb4' 'utf8mb4_unicode_ci'

我在连接字符串中正确设置了 'charset=utf8'。

*   那个特定的 unicode 字符有什么问题吗？我无法控制数据，它是从很多安卓手机中收集的。
*   它是mysql错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T16:18:34.263

通过进行以下更改，我已经解决了它。

*   使用“;CharSet=utf8mb4;” 在连接字符串中。我之前错过了这个。我使用的是“utf8”。
*   将数据库的默认字符集、表的默认字符集和所有列的字符集设置为“utf8mb4”
*   将数据库的默认排序规则、表的默认排序规则和所有列的排序规则设置为“utf8mb4_unicode_ci”

正如@eggyal 提到的，列字符集和排序规则很重要，我已经设置了所有默认值，因此我以后不会更新所有新列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T08:31:16.800

字节序列`\xF3\xB6\xA5\x89`似乎是字符 U+F6949（私有使用字符）的有效 UTF-8 字节序列。请注意，此字符位于*补充平面*中，需要一个 4 字节的 UTF-8 序列来表示它。

[MySQL 文档 10.1.10](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode.html)*。[*Unicode Support*](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode.html)指出，在 MySQL 5.5.3 之前，字符集“utf8”仅支持“每个字符一到三个字节”。您使用的是 MySQL 5.5.27（感谢您指出），因此 MySQL 可以处理此字符——但您必须使用新的编码：“ `utf8mb4`，Unicode 字符集的 UTF-8 编码，每个字符使用一到四个字节” . 也使用`utf8mb4`排序规则的变体。此外，“需要使用 Unicode 与服务器通信的客户端应用程序应相应地设置客户端字符集；例如，通过发出`SET NAMES 'utf8'`语句。”*

 *不要忘记将列设置`utf8mb4`为。错误消息“列的字符串值不正确...”暗示这可能是您的问题。 [MySQL 错误报告 #30131 *"Incorrect string value" 错误 (1366) 时插入特殊字符*](http://bugs.mysql.com/bug.php?id=30131)似乎是类似的情况。最后的评论写道：“这个问题很容易解决。不要忘记不仅将数据库、表和排序规则设置为 utf8，而且还要设置列！这就是我遇到问题的原因。我用拉丁语创建了表，然后切换到 utf8，但忘了也改变列。”

[尝试通过 JDBC 将 UTF-8 插入 MySQL 时出现堆栈溢出问题*“字符串值不正确”？*](https://stackoverflow.com/questions/10957238/incorrect-string-value-when-trying-to-insert-utf-8-into-mysql-via-jdbc)似乎是关于类似的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:19:57.453

来自文档 -*名为 utf8 的字符集每个字符最多使用三个字节，并且仅包含 BMP 字符。从 MySQL 5.5.3 开始，utf8mb4 字符集每个字符最多使用四个字节，支持补充字符...*

[utf8mb4 字符集（4 字节 UTF-8 Unicode 编码）](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)

如果您需要使用 4 字节 UTF，则更改表字段 - 设置 utf8mb4 字符集，并设置连接 - `SET NAMES utf8mb4`.*

# highcharts - 高图配置

> ID：13874797
> 
> 赞同：0
> 
> 时间：2012-12-14T08:05:37.297
> 
> 标签：highcharts

我想通过 highcharts 精确地构建这种类型的图表。

请点击链接 -[像这张图](http://searchtopics.independent.ie/topic/Barack_Obama/timeline?date=2012-11-15)

我已经建立了一些东西 - [mygraph](http://jsfiddle.net/wbsCu/10/)

但我需要用不同的颜色填充整个列，x 轴标签将在悬停时显示。

```
$(function() {
  var chart = new Highcharts.Chart({
    chart: {
      renderTo: 'container',
      type: 'column',
      height: 400,
    },
    plotOptions: {
      column: {
        stacking: 'normal'
      }
    },
    tooltip: {
      //xDateFormat: '%Y-%m-%d',
      formatter: function() {
        return "Click to see all coverage from - " + Highcharts.dateFormat("%b %d", this.x)
      },
      positioner: function(boxWidth, boxHeight, point) {
        return {
          x: point.plotX,
          y: point.plotY
        };
      },
    },
    xAxis: {
      gridLineWidth: 0,
      type: 'datetime',
      dateTimeLabelFormats: {
        day: ' %b %e, %Y'
      }
    },
    yAxis: {
      gridLineWidth: 1,
      title: {
        text: ''
      },
      labels: {
        enabled: true
      }
    },
    legend: {
      enabled: false
    },

    series: [{
      data: [50, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
      pointStart: Date.UTC(2010, 0, 1),
      pointInterval: 24 * 3600 * 1000 // one day
    }],

  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="container" style="height: 400px; width: 500px"></div>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:14:40.427

您正在寻找禁用 x 轴标签并更改系列颜色。

您可以通过以下方式禁用 X 轴值

```
xAxis: {
    labels: {
              enabled:false
            }
        } 
```

在 Highcharts 中设置颜色的方法不止一种。一种方法是按顺序指定颜色。

```
 series: [{
        data: [50, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
        pointStart: Date.UTC(2010, 0, 1),
        pointInterval: 24 * 3600 * 1000 ,// one day,
        color:"#33333"
    }] 
```

[JSFiddle 演示](http://jsfiddle.net/wbsCu/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T16:30:39.727

只是为了好玩，原因是老主题，但很有趣。

选项一可能是创建一个堆叠柱形图并在其中一个系列上禁用工具提示......不是一个很好的，哈哈（请不要这样做）。一个更好的解决方案和足够接近的方法是为每个点创建 plotLines。

第一个问题是我们需要创建与列一样多的 plotLines。因此，我们不会在选项中执行此操作，而是在图表呈现后执行此操作并检查系列数据长度。

```
chart.series[0].data.length 
```

第二个问题是我们必须设置 plotLine 宽度，所以我们应该在之前检查一列的点宽度，以便将 plotLine 宽度设置为等于我们的列。

```
var plotWidth = chart.series[0].points[0].pointWidth; 
```

第三个问题是我们的图表是固定的，这没关系，但是如果我们的容器是响应式的，我们的图表和列的宽度会改变，但我们的 plotLines 的宽度不会。因此，我们可以将列宽设置为固定值，我们的 plotLines 也可以设置，或者更好的是，在窗口调整大小事件时更改我们的 plotLines 宽度。但我认为更快更清洁只需删除它们并再次生成。如果我们对所有图使用相同的 id（我知道这是错误的，但它很有效，嗯），我们不需要遍历数组，我们可以在一行中删除所有内容。

```
chart.xAxis[0].removePlotLine('plot-line'); 
```

一段重要的代码：

```
// add plotLines
function addPlotLines(chart, plotWidth) {           
    for(var i = 0; i<= chart.series[0].data.length; i++) {            
        chart.xAxis[0].addPlotLine({
                    color: 'rgba(124, 181, 236,.3)',
                    width: plotWidth,
                    value: Date.UTC(2010, 0, i),
                    dashStyle: 'solid',
                    id: 'plot-line' 
        });
    }
}

// remove PlotLines
function removePlotLines(chart) {
    chart.xAxis[0].removePlotLine('plot-line');
}

// add event resize
window.onresize = function() {
  removePlotLines(chart);
  var plotWidth = chart.series[0].points[0].pointWidth;
  addPlotLines(chart, plotWidth);
};

// initialize
var plotWidth = chart.series[0].points[0].pointWidth;
addPlotLines(chart, plotWidth); 
```

在这里，完整的代码和演示在[http://jsfiddle.net/wbsCu/14/](http://jsfiddle.net/wbsCu/14/)

并查看此处未涵盖的 show-label-on-point-hover 问题[Bold X-Axis Label on Point Hover in Highcharts Column Chart](https://stackoverflow.com/questions/17157873/bold-x-axis-label-on-point-hover-in-highcharts-column-chart)。

玩得开心！

# java - 实例变量还是静态变量？

> ID：13874802
> 
> 赞同：-1
> 
> 时间：2012-12-14T08:06:03.957
> 
> 标签：java, static-members

我有一个变量，我也想在 2 类中使用。我必须将其声明为静态变量吗？它可以是实例变量吗？

```
public class Text extends JFrame implements ActionListener{

JTextArea t;
String s;
} 
```

我想在另一个类中使用**s 。**我必须将其声明为静态变量吗？是否可以将其声明为实例变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T08:08:51.710

您不会根据变量的使用方式来决定变量是否为静态。如果它对所有`Text`实例都是通用的，那么它必须是静态的。如果每个 Text 实例都有自己的`s`（无论这个选择不当的名称实际上可能代表什么），那么它必须是一个实例变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T08:07:46.060

`I want to use s in another class`

如果 s 在整个应用程序中都具有相同的值，则继续使用 static。

相反，如果它真的是一个实例变量，您可能在其他类中有对 Text 的引用，并且在 Text.java 中有一个用于 s 的 getter 方法来访问它

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T08:07:48.327

您可以将其声明为实例变量并为`s`.

```
public String getValue() {
    return s;
} 
```

另请查看 JB Nizet 关于是否应将其声明为静态变量或实例变量的答案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-14T08:08:50.450

```
public class Text extends JFrame implements ActionListener{

public static JTextArea t;
String s;
}; 
```

以上将使 t 像这样可用：`Text.t`在类本身之外。如果它适用于您的情况或使用实例开始，您可能需要考虑继承，即：

```
public class Text extends JFrame implements ActionListener{   
     private JTextArea t;
     private String s;
     public JTextArea getTextArea() {
         return this.t;
     }
}; 
```

然后使用getter和setter来访问它们的值，这就是Java的做事方式。要使用上述内容，您现在需要在另一个类中创建一个实例：

```
public class otherClass {
private Text theInstance = new Text();
JTextArea theTextArea = theInstance.getTextArea();
}; 
```

**此外，停止命名变量 s 和 t。这是一种糟糕的编码方式。使用显式名称，以便轻松判断变量的用途/用途。**想象一下，几天后您想查看您的代码，您可能不记得代码中的内容`s`和`t`意图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T08:08:12.320

为 s 创建公共 getter 方法并在其他类中使用它。

# c# - 如何在 BeginInvoke 中执行 Thread.Sleep

> ID：13874808
> 
> 赞同：3
> 
> 时间：2012-12-14T08:06:49.973
> 
> 标签：c#, wpf, multithreading, dispatcher

我尝试使用以下代码更新**TextBox.Text**以显示从 1 到 10，内部时间为 1 秒。我不明白为什么整个 UI 在文本更新到 10 之前会休眠 10 秒，因为我认为**Thread.Sleep(1000)**应该属于**Dispatcher.BeginInvoke**创建的单独后台线程。

我的代码有什么问题？

```
Thread t1 = new Thread(new ThreadStart(
    delegate()
    {
        this.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
            new Action(delegate()
                {
                    for (int i = 1; i < 11; i++)
                    {
                        mytxt1.Text = "Counter is: " + i.ToString();
                        Thread.Sleep(1000);
                    }
                }));

    }));
t1.Start(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T08:12:25.437

您的代码创建新线程只是为了强制调度程序将您的操作同步回 UI 线程。我想您是由于从另一个线程`Dispatcher.BeginInvoke`更改导致的异常而添加的。`mytxt1.Text`试试这个：

```
Thread t1 = new Thread(new ThreadStart(
    delegate()
    {
        for (int i = 1; i < 11; i++)
        {        
            var counter = i; //for clouser it is important
            this.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
                new Action(delegate()
                {                    
                    mytxt1.Text = "Counter is: " + counter.ToString();                                         
                }));
           Thread.Sleep(1000);
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:09:49.323

设置文本的操作在 UI 线程上运行，这就是 UI 冻结的原因。

由于只有创建 UI 控件实例的线程（也称为 UI 线程）才能修改 UI 控件的属性，因此您必须运行在 UI 线程上设置文本的代码。这就是你正在做的事情。

您可以尝试的是让该代码在 Threading.Timer 中运行。

或者......使用你已经拥有的代码，你应该有这样的东西，它可能会工作：

```
Thread t1 = new Thread(new ThreadStart(
delegate()
{
    for (int i = 1; i < 11; i++)
    {
    this.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
        new Action(delegate()
            {                        
                    mytxt1.Text = "Counter is: " + i.ToString();                           

            }));
     Thread.Sleep(1000);
     }             
}));
t1.Start(); 
```

# javascript - 从字符串解析 HTML 元素属性 (RegExp)

> ID：13874812
> 
> 赞同：1
> 
> 时间：2012-12-14T08:07:10.853
> 
> 标签：javascript, html, regex

我只需要通过 RegExp 从给定字符串中获取所有属性和文本，如果可以使用一行 RegExp 那就太好了。我想从字符串中获取每个属性，如果它在 " 或 ' 或独立的。

*   属性：`value = "1" or value = '1' or value="1" or value='1' or value=1 or value=""`
*   属性：`readonly or disabled`

我试过了，但这对我不起作用。

```
var s = '<option value="1" data-foo="Foo" readonly>Value 1</option>', m
m = s.match(/<option ([^>]*)>(.*)<\/option>/)
console.log(m)
// gives ["<option value="1" data-...adonly>Value 1</option>", "value="1" data-foo="Foo" readonly", "Value 1"] 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:19:13.320

为什么不直接创建元素？

```
var s = '<option value="1" data-foo="Foo" readonly>Value 1</option>'​​​​​;

var test_element = document.createElement('div');
test_element.innerHTML = s;

var element = test_element.childNodes[0];
​var attributes = element.attributes;

for (var i = 0; i < attributes.length; i++) {
    var attribute = attributes[i];

    console.log(attribute.name, '=>', attribute.value);
}​ 
```

输出：

```
value => 1
data-foo => Foo
readonly => 
```

**演示：http: [//jsfiddle.net/mcRc4/](http://jsfiddle.net/mcRc4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:26:47.713

我相信以下正则表达式可以获取您想要的内容（好吧，看起来确实很丑，但是）

`s.match(/<option\s*([^\s\=]*)\s*\=*\s*([^\s\=]*)*\s*([^\s\=]*)\s*\=*\s*([^\s\=]*)*\s*([^\s\=]*)\s*\=*\s*([^\s\=]*)*>(.*)<\/option>/);`

对于`s = '<option value="1" data-foo="Foo" readonly>Value 1</option>'`，它返回：

```
[
  "<option value="1" data-foo="Foo" readonly>Value 1</option>", // s itlsef
  "value", // first attr
  ""1"", // value as written in s (with double quotes)
  "data-foo", // second attr
  ""Foo"", // value as written in s (with double quotes)
  "readonly", // third attr
  undefined, // no value specified for readonly, so undefined
  "Value 1" // the option text
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T02:54:05.247

实际上我需要这个来用更简单的方式处理“选项”元素，更简单的正则表达式。`innerHTML = append content`如果用于`select`元素，则 ie 的 Cos 不会附加。附加操作在下面的链接中提到，但不适用于选项元素。然后我找到了解决这个问题的方法。如果追加内容是选项或选项，则使用`handleOptionElements`，如果不使用`asyncInnerHTML`。

```
function append(el, child) {
    if (child.nodeType === 1 || child.nodeType === 3) {
        // Without clone, removes element if it is copied from document
        return el.appendChild(child.cloneNode(true));
    }

    content = trim(content);
    if (content.substring(0, 7) === "<option" && 
            content.substring(content.length - 7) === "option>") {
        handleOptionElements(content, el);
    } else {
        el.innerHTML = content;
    }

    return el;
} 
```

[http://james.padolsey.com/javascript/asynchronous-innerhtml/](http://james.padolsey.com/javascript/asynchronous-innerhtml/)
[为 innerHTML 设置大值时提高性能的方法](https://stackoverflow.com/questions/788614/ways-to-increase-performance-when-set-big-value-to-innerhtml/788661)

```
var re_standaloneAttributes = /^(select|disabl)ed$/i,
    re_optionSearch = /<option\s*([^>]*)>(.*?)<\/option>/gi,
    re_attributeSearch = /([^\s]*)=["'](.*?)["']|([\w\-]+)/g;

function handleOptionElements(content, targetElement) {
    var options = [], attributes = [],
         optionElement, optionElements = [], createOption;

    (""+ content).replace(re_optionSearch, function(src1, attr, text) {
        if (!src1) return;
        (""+ attr).replace(re_attributeSearch, function(src2, name, value) {
            if (!src2) return;
            name = name || src2;
            value = value || (value = re_standaloneAttributes.test(name) ? name : "");
            attributes.push({name: name, value: value});
        });
        options.push({text: text || "", attributes: attributes});
        // Reset attributes for each element
        attributes = [];
    });

    createOption = (function() {
        var option = document.createElement("option");
        return function() { return option.cloneNode(true) };
    })();

    forEach(options, function(option) {
        optionElement = createOption();
        // optionElement.text doesn't work on ie 7-8
        optionElement.textContent = optionElement.innerText = option.text;
        forEach(option.attributes, function(attribute) {
            optionElement.setAttribute(attribute.name, attribute.value);
        });

        if (targetElement !== undefined) {
            targetElement.appendChild(optionElement);
        } else {
            optionElements.push(optionElement);
        }
    });

    return optionElements;
} 
```

# php - 在 xml 文件中提取特定的 xml 子标签

> ID：13874815
> 
> 赞同：0
> 
> 时间：2012-12-14T08:07:30.620
> 
> 标签：php, javascript, xml

我有xml文件

```
<LicenceQueryReply>
<LicenceQueryData>
    <LicInfo>
            <_fileId>EA100000.XML</_fileId>
            <_downloadTime>20110405003231+0000</_downloadTime>
            <_startTime>20080325000000+0000</_startTime>
            <_endTime/>
            <_capacity>0</_capacity>
    </LicInfo>
    <LicFeatureInfo>

            <_featureCode>307</_featureCode>
            <_featureName>HSDPA PFRP Scheduler</_featureName>
            <_capacityCode>unused</_capacityCode>
            <_maxCapacity>0</_maxCapacity>
            <_basicCapacity>0</_basicCapacity>
            <_usedCapacity>0</_usedCapacity>
            <_featureStatus>on</_featureStatus>
    </LicFeatureInfo> 
```

从那个 xml 文件中，我只想提取一些特定的标签，比如 <_featurename>，只......到其他新的 xml 文件中......

我想用 php 或 javascript 来完成

# symfony - Symfony2 配置中的嵌套原型

> ID：13874822
> 
> 赞同：8
> 
> 时间：2012-12-14T08:08:18.140
> 
> 标签：symfony, configuration, yaml

使用 Symfony2 TreeBuilder，它可以为数组节点内的每个节点配置原型，例如支持类似的配置

```
foo:
    xxx: { foo: bar}
    yyy: { foo: bar} 
```

使用类似结构的任意数量的 xxx、yyy 等（任何值）节点

```
$rootNode
    ->arrayNode('foo')
    ->prototype('array')
        ->children()
            ->scalarNode('foo') 
```

我想在不引入另一个命名节点的情况下创建同一事物的另一个级别，例如支持类似的配置

```
foo:
    xxx:
        aaa: { foo: bar}
        bbb: { foo: bar}
    yyy:
        ccc: { foo: bar}
        ddd: { foo: bar} 
```

其中可以有任意数量的xxx、yyy等节点，每个节点可以包含任意数量的其他aaa、bbb等节点。

有什么办法可以做到这一点？在另一个原型调用`->prototype()`下直接`->children()`调用不起作用，因为原型似乎不支持嵌套原型。结果，我不得不硬编码 xxx 和 yyy 的特定值，从而限制了我正在编写的包的灵活性。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T14:43:24.557

在 symfony 2.2 中检查，嵌套工作。

不要`->children()`在嵌套之间使用`->prototype()`：

```
$rootNode->children()
   ->arrayNode('foo')
      ->prototype('array')
         ->prototype('array')
             ->children()
                ->scalarNode('foo'); 
```

# jquery - 如何在没有用户交互的情况下通过 ajax 触发 jquery“on”事件

> ID：13874830
> 
> 赞同：2
> 
> 时间：2012-12-14T08:08:56.343
> 
> 标签：jquery

我调用了一个远程 Web 服务，该服务返回一个项目列表，然后在网页上列出，1 分钟后发送一个新列表，我需要获取旧列表，找出哪些项目是新的，然后修改名单。

该过程中的第 2 步是生成所有当前列出的项目的列表，但是因为它们是通过 AJAX 加载的，所以我不能做一个简单的 $('#items').each(); 我需要使用“开启”功能。

on 函数使用事件，我似乎无法解决/找出如何让它“开启”......请求？我目前的做法似乎很荒谬：

```
$.ajax({
    url: url,
    success: function(data) {
        $('#items .item').on("click", function() {
            console.log("an item");
        });

        $('#items .item').trigger("click");
    }
}); 
```

我正在伪造“点击”事件，以便“打开”有一些东西可以听，但这似乎很奇怪。

在不伪造点击事件的情况下使用“on”与项目交互的正确方法是什么，或者伪造点击事件是唯一的方法？

* * *

编辑澄清：

步骤 1\. 使用 HTML 加载网页：

```
<div id="content">
    <div id="items">

    </div>
</div> 
```

第 2 步。 10 秒后，对 items.php 进行 AJAX 调用，它以项目的 JSON 表示进行响应，然后我使用 .each 将它们插入到页面中，如下所示：

```
$.each(data, function(key, value) {
    $('#content').append('<div class="item">'+value.title+'</div>');
}); 
```

所以现在看起来像

```
<div id="content">
    <div id="items">
        <div class="item">title</div>
        <div class="item">title</div>
    </div>
</div> 
```

第 3 步。 60 秒后，再次对 items.php 进行另一个 AJAX 调用，它以新项目的 JSON 表示形式响应。此时，我需要通过标题获取当前列出的项目（#items 中的每个 .item），并对新标题进行一些比较。

```
$('#items .item').each(function(){
    // doesn't work because the items aren't available 
}); 
```

我的谷歌搜索告诉我我需要使用“live”，它已被弃用，现在使用“on”代替它......

我需要一种方法来遍历先前加载的元素。

* * *

最终编辑：

问题不存在，看起来我打错了 div 的名称，匆忙中我认为问题是我以前经历过的：需要 on/live。许多以前的 Stack Overflow 问题都讨论了使用 Javascript 插入 HTML 进行实时/在线的必要性，但它似乎是专门针对**用户交互**的。Javascript 可以很好地与加载的项目进行交互，但是 jquery 不能在没有 live/on 的情况下对用户与这些项目的交互起作用。

我的错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:16:04.530

您可以使用设置超时功能触发它：

这将`fire the function after 3 seconds of wait`。

```
function myFunction(){
   $.ajax({
      url: url,
      success: function(data) {

           console.log(data);
      }
   });
}

setTimeout(function(){
    myFunction();
},3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:33:00.707

您可以尝试更改以下几行吗

```
 $('#items .item').on("click", function() {
        console.log("an item");
    }); 
```

至

```
 $(document).on("#items .item","click", function() {
        console.log("an item");
    }); 
```

# intellij-idea - 在 IDEAL intellij 中运行测试时，黄色条表示什么？

> ID：13874831
> 
> 赞同：2
> 
> 时间：2012-12-14T08:09:01.830
> 
> 标签：intellij-idea, testng

在 intellij IDEAL 中，所有测试均通过，但测试条为黄色。我正在使用TestNG。有人知道这是什么意思吗？

![在此处输入图像描述](../Images/8a8759999569f2fb5caf7a376c16c218.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:16:54.793

这意味着某些测试没有被 TestNG 执行（没有收到关于某些测试完成的消息）。看看你是否可以在 IDEA 12 中重现它。

如果问题仍然存在，请联系支持人员并提供示例以重现并指定您的 TestNG 版本。

# mysql - 如何使用 1 个数据库连接读取和另一个用于写入 WordPress MySQL？

> ID：13874836
> 
> 赞同：3
> 
> 时间：2012-12-14T08:09:27.027
> 
> 标签：mysql, wordpress, amazon-rds

我正在使用 Amazon RDS 实例来托管我所有 6 个 WordPress 网站的 MySQL 数据库。在最大站点的流量达到峰值的那一刻，RDS 实例的 CPU 利用率为 100% 超过一个小时。

我正在考虑通过读取活动来分配数据库服务器的负载。我网站的大部分流量来自未登录的用户。因此，我想将这些未登录的用户连接到只读副本 RDS 实例，为什么其余的连接到源 RDS 实例，即我正在使用的当前数据库连接。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T08:50:01.027

**扩展 Wordpress** 随着网站流量的增加，服务器上的负载也会增加。为了跟上您的速度，您有两种可能性：`scale up`- 增加盒子的大小 - 这 - 尤其是在 AWS 上 - 除了其他缺点（例如双向扩展的停机时间）之外，显然还有限制。

`scale out`：拆分流量，让多台机器完成工作。只需在您的流量增加超过阈值时添加一台机器，并在您的流量水平较低时移除电源。

可以在您的网络服务器或数据库服务器上进行常规设置的扩展。AWS 在这两个方面都可以为您提供帮助。由于数据库是常见的瓶颈，而这个问题实际上希望解决这个问题，我现在将讨论数据库扩展。

Amazon RDS（托管 MySQL SaaS）提供一键式解决方案来创建数据库的只读副本。在数据库世界中，只读副本称为复制从属。在您的主服务器上执行的每个修改查询都将在您的从机上自动重播。

您可以根据需要创建尽可能多的只读副本来为用户提供服务。现在是复杂的部分。我们正在谈论 READ 副本。这意味着，您不能简单地在所有实例上随机平衡查询。只有主服务器接受写入查询。

拆分查询类型和平均分配负载可以通过像 MySQL 代理这样的数据库代理来实现，这需要额外的机器。您的应用程序将与此代理通信，并且本身不需要任何更改。

尽管 Wordpress 不是为主从设置而设计的，并且本机不支持这一点，但我们都知道那里有很多博客流量很大。

幸运的是，有一个名为 HyperDB 的解决方案

[http://wordpress.org/extend/plugins/hyperdb/](http://wordpress.org/extend/plugins/hyperdb/)

这是一个 Wordpress 插件，它可以

> *   读写服务器（复制）
> *   可配置的读写优先级
> *   本地和远程数据中心
> *   专用和公共网络
> *   不同数据库/主机上的不同表
> *   智能写后主读取
> *   故障主机故障转移
> *   用于分析的高级统计信息

该插件将替换 Wordpress 中默认的数据库抽象层。它由 Wordpress 团队开发并积极使用。

只需下载并确保仔细遵循安装说明。

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:15:29.860

[首先按照此处的 Amazon 常见问题解答](http://aws.amazon.com/en/rds/faqs/#89)中的说明设置 RDS 只读副本。然后获取这台机器的客户端端点（参见 FAQ 中的下一个问题）。

我不确定较新版本的 Wordpress 是否支持您正在使用的开箱即用功能，但有一种方法可以检查当前用户是否已登录 Wordpress。[Wordpress](http://codex.wordpress.org/Function_Reference/is_user_logged_in)中有一个方法可以检查用户是否登录。如果在建立任何数据库连接之前提前调用此函数，如果遇到登录用户，则可以更改数据库连接。

# python - 在 ModelAdmin 的操作中添加弹出窗口

> ID：13874840
> 
> 赞同：1
> 
> 时间：2012-12-14T08:09:56.693
> 
> 标签：python, django

我在我的 model.Admin 中定义了一个自定义操作。

```
class ProjectAdmin(admin.ModelAdmin):
    list_display = ['ID','Name']
    actions = ['show_report']
    def show_report(self,request,queryset):
          # Popup a form
          # User input message
          # finish, go back to changlist form and finish the action.
    show_report.short_description = "Show report for selected Project" 
```

然后当我在项目更改列表表单中选择一个项目时，有一个项目“显示报告”，当用户选择并单击“开始”按钮时，我想弹出一个允许用户输入一些评论的表单。例如，用户单击此操作后，我想弹出一个对话框让用户输入一些消息，然后在弹出窗口中单击“确定”，然后完成该操作。有没有办法实现这个，谢谢。

**更新**也许有一种简单的方法可以做到这一点，在管理员中有一个删除确认页面。因此，如果我可以将我的操作与该页面集成，则可以自定义该页面。我想我一定会更好。谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:34:23.593

您可以使用中间页面[https://docs.djangoproject.com/en/1.4/ref/contrib/admin/actions/#actions-that-provide-intermediate-pages](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/actions/#actions-that-provide-intermediate-pages)来实现它，但它不是弹出窗口。

编辑：链接更新：[https ://docs.djangoproject.com/en/1.9/ref/contrib/admin/actions/#actions-that-provide-intermediate-pages](https://docs.djangoproject.com/en/1.9/ref/contrib/admin/actions/#actions-that-provide-intermediate-pages)

# sql - 添加新行时间戳列时的问题

> ID：13874841
> 
> 赞同：0
> 
> 时间：2012-12-14T08:10:00.930
> 
> 标签：sql, sql-server

我在 SQL Server 上有这张表，如果有人将特定的短信发送到特定号码，则会更新该表。

我所做的是我输入了一个新表，这是一个时间戳。现在，问题是，当添加新行时，我在时间戳值中得到了这个：

```
<binary data> 
```

为什么会这样？我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:23:47.417

如果要记录插入行的日期和时间，请使用具有默认约束的`datetime`（或者`datetime2`，如果使用 SQL Server 2008 或更高版本）列：

```
ALTER TABLE tab add time_added datetime2
ALTER TABLE tab add constraint DF_tab_time_added
    DEFAULT (CURRENT_TIMESTAMP) for time_added 
```

`timestamp`是 的（名字不好）同义词[`rowversion`](http://msdn.microsoft.com/en-us/library/ms182776.aspx)，它与实际的日期和时间没有关系：

> `timestamp`是`rowversion`数据类型的同义词
> 
> 数据类型只是一个递增的`rowversion`数字，不保留日期或时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:29:43.260

我们需要`datetime`为列使用数据类型，用于捕获当前/更新/插入日期或时间。

`TIMESTAMP`存储更新/插入的版本。

```
ALTER TABLE <TABLENAME>
ADD CONSTRAINT <CONSTRAINT_NAME> DEFAULT getdate() FOR <COLUMN_NAME> 
```

# delphi - 如何在 Lazarus 的 Win32/64 代码生成之间切换？

> ID：13874850
> 
> 赞同：6
> 
> 时间：2012-12-14T08:10:54.290
> 
> 标签：delphi, 32bit-64bit, freepascal, lazarus

我安装了 64 位 Lazarus 并想生成 32 位代码。当我尝试将目标操作系统设置为 Win32 时，我收到错误消息

> 编译器“C:\Programs\lazarus\fpc\2.6.0\bin\x86_64-win64\fpc.exe”不支持目标x86_64-win32

所以我想我需要下载并安装额外的 fpc 编译器来生成 Win32 代码，并以某种方式在 Lazarus IDE 中切换它们。

正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:15:10.500

您需要交叉编译器或简单地在 64 位 IDE 中编译（实用方法）。

CodeTyphon 有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T11:31:30.093

在 Lazarus 中有一种从 Win32 交叉编译到 Win64 的快速简便的方法。我假设您已经在 32 位版本的 Windows 上安装了 Lazarus 的副本。

1.  从 SourceForge 的 Free Pascal 页面下载 fpc-2.6.2.x86_64-win64.exe（或任何最新版本）。

2.  安装，当它要求一个目录时，给它你的 Lazaus FPC 目录和版本子目录。例如 C:\lazarus\fpc\2.6.2

3.  全部完成！:-)

在您的 Lazarus 项目中，您现在可以转到项目选项 -> 代码生成。

放：

目标操作系统 = Win64 目标 CPU 系列 = x84_64

单击确定，然后重新编译您的项目。您现在将拥有一个 64 位的 exe（或 dll）。

您可以随时在 32 位编译和 64 位编译之间来回切换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T14:44:00.093

交叉编译不是标准发行版（Lazarus 或 FPC）中“正常工作”的功能。您需要自己编译交叉编译器，尽管提供了一些但用于非常有限的主机-目标对，即：

*   i386-win32 到 x86_64-win64
*   i386-win32 到 arm-wince

在安装了交叉编译器（和交叉编译的标准单元）之后，您还需要交叉编译您使用的任何其他 3rd 方单元。幸运的是，如果它们是作为 Lazarus 包发布的，则不需要这样做，当您将项目编译到交叉目标时，Lazarus 会很乐意为您进行重新编译。

# python - python 'with' 语句及其在类中的使用

> ID：13874859
> 
> 赞同：3
> 
> 时间：2012-12-14T08:11:38.650
> 
> 标签：python, unit-testing, with-statement

我有一个使用套接字进行测试的 TestCase。即使在出现错误的情况下，您也应该始终关闭套接字，因此我创建了一个抽象套接字的上下文管理器类。

测试夹具如下所示，其中`MyClassToTest`要测试的实际类在内部使用套接字设备。

```
with SocketContextManager() as device:
    foo = MyClassToTest(device)
    # make tests with foo 
```

我想避免在每个测试夹具中重复这两行，但始终放在`setUp`. 但是我该怎么做呢？以下代码

```
def setUp(self):
    with SocketContextManager() as device:
        self.foo = MyClassToTest(device) 
```

不起作用，因为设备将在结束时关闭`setUp`。有没有办法像这样处理上下文管理器的实例化，还是我必须在每个测试夹具中重复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:15:04.557

根据拆解[的文档](http://docs.python.org/2/library/unittest.html#unittest.TestCase.tearDown)：

> 即使测试方法引发异常，也会调用此方法

因此，您可以在 中打开套接字`setUp`，然后在 中将其关闭`tearDown`。即使您的测试用例引发异常，套接字仍将关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:58:08.517

这是一个非常有趣的问题。正如 BrenBarn 指出的那样，unittest 框架不支持做你想做的事，但在我看来，没有什么特别的原因不能让你适应它。`setUp`/`tearDown`配对是其他没有生成器的语言的遗留物。

下面的代码定义了一个新的 'ContextTest' 类，它将 setUp 和 tearDown 方法合并到一个生成器中，该生成器既可以构建也可以销毁测试的上下文。您可以将您的`with`语句`context()`与任何其他样板一起放入方法中。

```
#!/usr/bin/python3.3
import unittest

class ContextTest(unittest.TestCase):
    """A unit test where setUp/tearDown are amalgamated into a
    single generator"""
    def context(self):
        """Put both setUp and tearDown code in this generator method
        with a single `yield` between"""
        yield

    def setUp(self):
        self.__context = self.context()
        next(self.__context)
    def tearDown(self):
        for _ in self.__context:
            raise RuntimeError("context method should only yield once")

from contextlib import closing
from urllib.request import urlopen

class MyTest(ContextTest):
    def context(self):
        with closing(urlopen('http://www.python.org')) as self.page:
            yield

    def testFoo(self):
        self.assertIsNotNone(self.page)

if __name__=='__main__':
    unittest.main() 
```

# java - Spring 声明式事务不工作（事务未提交）

> ID：13874860
> 
> 赞同：4
> 
> 时间：2012-12-14T08:11:52.993
> 
> 标签：java, spring, transactions

Spring 声明式事务不工作（未提交）。

# 弹簧配置

```
 <!-- DATASOURCE -->

   <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
      <property name="driverClassName" value="${jdbc.driver}"/>
      <property name="url" value="${jdbc.url}"/>
      <property name="username" value="${jdbc.user}"/>
      <property name="password" value="${jdbc.password}"/>
      <property name="initialSize" value="${dbcp.initialSize}"/>
      <property name="maxActive" value="${dbcp.maxActive}"/>
      <property name="maxIdle" value="${dbcp.maxIdle}"/>
      <property name="maxWait" value="${dbcp.maxWait}"/>
      <property name="poolPreparedStatements" value="${dbcp.poolPreparedStatements}"/>
      <property name="validationQuery" value="select 1 from dual"/>
      <property name="testOnBorrow" value="${dbcp.testOnBorrow}"/>
      <property name="maxOpenPreparedStatements" value="${dbcp.maxOpenPreparedStatements}"/>
      <property name="logAbandoned" value="${dbcp.logAbandoned}"/>
      <property name="removeAbandoned" value="${dbcp.removeAbandoned}"/>
      <property name="removeAbandonedTimeout" value="${dbcp.removeAbandonedTimeout}"/>
      **<property name="defaultAutoCommit" value="false"/>**
   </bean>

  <!-- IBATIS -->

    <bean id="sqlMapClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean">
        <property name="configLocations" value="classpath:/config/ibatis/sqlMapConfig.xml"/>
        <property name="dataSource" ref="dataSource"/>
    </bean>

    <bean id="sqlMapClientTemplate" class="org.springframework.orm.ibatis.SqlMapClientTemplate">
      <property name="sqlMapClient" ref="sqlMapClient"/>
    </bean>

  <!-- TRANSACTION -->

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"/>
    </bean>

   <tx:advice id="txAdvice" transaction-manager="transactionManager">
      <tx:attributes>
            <tx:method name="*" propagation="REQUIRED" isolation="READ_COMMITTED" timeout="10" read-only="false"/>
      </tx:attributes>
   </tx:advice>

    <aop:config>
        <aop:pointcut id="serviceMethods" expression="execution(public * com.store.web.front.service.*.*(..))"/>
        <aop:advisor advice-ref="txAdvice" pointcut-ref="serviceMethods"/>
    </aop:config> 
```

# 控制器 Bean

```
package com.store.web.front.controller;

    public interface TestTxControllerIF {
       public ModelAndView transaction();
    }

package com.store.web.front.controller;

    @Controller
    public class TestTxControllerImpl implements TestTxControllerIF {

        @Autowired
        protected TestTxServiceIF testService;

        Logger                    logger = Logger.getLogger(TestTxControllerIF.class);

        @Override
        @RequestMapping(value = "/test/tx.html")
        public ModelAndView transaction() {

            logger.info("# TestTxController.transaction() - " + testService);

            testService.transaction();
            return new ModelAndView("main");
        }
} 
```

# 服务豆

```
 package com.store.web.front.service;

        public interface TestTxServiceIF {
            public void transaction();
        }

    package com.store.web.front.service;

        @Service
        public class TestTxServiceImpl implements TestTxServiceIF {

            Logger logger = Logger.getLogger(TestTxServiceImpl.class);

            @Autowired
            protected TestDaoIF testDao;

            @Override
            public void transaction() {

                logger.info("# TestTxService.transaction()");

                Test test1 = new Test("111", "First");
                Test test2 = new Test("222", "Second");
                Test test3 = new Test("333", "Third");

                testDao.insertTest(test1);        
                logger.info("# Successfully inserted!!! - " + test1);

                testDao.insertTest(test2);        
                testDao.insertTest(test3);
            }
        } 
```

# 道豆

```
package com.store.web.front.dao;

    public interface TestDaoIF {
        public void insertTest(Test test);
    }

package com.store.web.front.dao;

    @Repository
    public class TestDaoImpl extends AbstractIBatisDao implements TestDaoIF {    

        Logger logger = Logger.getLogger(TestTxServiceImpl.class);

        @Override
        public void insertTest(Test test) {

            logger.info("# TestDao.insertTest()");

            template.insert("test.insertTest", test);
        }
    } 
```

# 结果与问题

部署并发送请求“/test/tx.html”后，事务执行没有问题，但没有持久化数据库记录。我想，交易没有提交。问题可能是什么？

# 日志

```
DEBUG> 11:02:10 - DispatcherServlet with name 'spring-dispatcher' processing request for [/test/tx.html] ☜ DispatcherServlet.java:781
DEBUG> 11:02:10 - Invoking request handler method: public org.springframework.web.servlet.ModelAndView com.store.web.front.controller.TestTxControllerImpl.transaction() ☜ HandlerMethodInvoker.java:134
INFO > 11:02:10 - # TestTxController.transaction() - com.store.web.front.service.TestTxServiceImpl@126cb1a ☜ TestTxControllerImpl.java:23
INFO > 11:02:10 - # TestTxService.transaction() ☜ TestTxServiceImpl.java:25
INFO > 11:02:10 - # TestDao.insertTest() ☜ TestDaoImpl.java:20
DEBUG> 11:02:10 - Opened SqlMapSession [com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl@1bc345a] for iBATIS operation ☜ SqlMapClientTemplate.java:177
DEBUG> 11:02:10 - Fetching JDBC Connection from DataSource ☜ DataSourceUtils.java:112
DEBUG> 11:02:10 - Obtained JDBC Connection [jdbc:oracle:thin:@localhost:1521:XE, UserName=STORE, Oracle JDBC driver] for iBATIS operation ☜ SqlMapClientTemplate.java:194
DEBUG> 11:02:10 - Returning JDBC Connection to DataSource ☜ DataSourceUtils.java:312
INFO > 11:02:10 - # Successfully inserted!!! - Test [id=111, name=First] ☜ TestTxServiceImpl.java:33 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T13:24:56.737

`BeanPostProcessor`bean 用s （在您的情况下可能是）用“AOP 东西”装饰`AspectJAwareAdvisorAutoProxyCreator`。这些后处理器 bean 是特定于**上下文实例的**。

如果您在**servlet 上下文**中配置 AOP，并且您的目标 bean 在**根上下文中**（反之亦然），那么这就是不应用切入点的原因。

常见的做法是将较低级别的 bean（服务和 DAO）与 AOP 配置一起放在**根上下文中，并在****servlet 上下文**中只保留 UI bean（MVC 的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:24:46.607

我找到了这个问题的原因。当 DispatcherServlet 加载事务声明文件时，事务控制成功。但是文件是由 ContextLoaderListener 加载的，事务控制不好。我不知道为什么会出现这种差异。你能给我解释一下吗？

# jquery - $(this).attr('img') 返回 null 或 [object Object] 不是值

> ID：13874861
> 
> 赞同：3
> 
> 时间：2012-12-14T08:11:57.347
> 
> 标签：jquery

这是我的问题。我正在我的网站中创建自己的图像弹出窗口。

这是弹出窗口之前的脚本

```
<script> clicked = $('#gatb-1').click(function() { 
  return this.getAttribute('imid') }); </script> 
```

*注意：*clicked*是全局变量

这是图片代码：

```
<?php foreach ($the_picture as $picture) : ?>
<a id="gatb-1" imid="http://somesite.com/img/image.jpg" class="glr">
<div class="picture">
<img src="http://somesite.com/img/image.jpg" width="340px">
</div>
</a>
<?php endforeach; ?> 
```

然后在图片代码下面调用弹出代码，这是弹出显示时的脚本：block

这是弹出的 div：

```
<div class="popup">
<script>
$(document).ready(function() { 
    $('#thmg').attr('src', clicked); }); 
</script>
<table>
<tr>
<td>left link</td>
<td><div class="picts"><img id="thmg" src="target here"></div></td>
<td>Right link</td>
</table>
</div> 
```

在弹出窗口之前我也尝试过这段代码，但它是一样的。总是返回 [object Object] 或返回 null

```
$(this).attr('imid') 
```

结果是这样的：

```
<img src="[object object]"> 
```

那么，我怎样才能传递属性？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:18:21.160

为我工作...

```
var img = $("#gatb-1").attr('img');
$("#thmg").attr('src', img); 
```

[http://jsfiddle.net/chovy/Srx55/](http://jsfiddle.net/chovy/Srx55/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:28:14.533

我认为你分配`$('#gatb-1')`给`clicked`而不是它的 img 属性。如果您要使用该代码（我不鼓励它），`$('#thmg').attr('src', clicked.attr('img'))`可能会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:28:46.377

尝试更换

```
<script> clicked = $('#gatb-1').click(function() { 
 return this.getAttribute('img') }); </script> 
```

到

```
 <script> $('#gatb-1').click(function() { 
 clicked = $(this).attr('img') }); </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T08:06:11.983

我找到了！它与错误代码或任何东西无关。只是因为`<script></script>`全球不同。这是因为我`<script></script>`在 1 个文件中有两个地方。

```
<script> 
 clicked = $('#gatb-1').click(function() { 
  return this.getAttribute('imid') }); 
</script> 
```

然后访问另一个变量 `<script></script>`是使它不起作用的变量。

```
<script>
$(document).ready( function() {
       $('#thmg').attr('src', clicked);
});
</script> 
```

所以，解决方案是，将所有 JQuery 合并为一个`<script></script>`。

```
<script>
$(document).ready( function(){
   $('#gatb-1').click( function(){
    var clicked = $(this).attr('imid');
    $('#thmg').attr('src', clicked);
});
});
</script> 
```

# javascript - 需要帮助处理 JQuery 中的嵌套元素

> ID：13874864
> 
> 赞同：0
> 
> 时间：2012-12-14T08:12:07.263
> 
> 标签：javascript, jquery

我正在编写一个脚本，该脚本旨在自动截断一定大小的块引用，并向它们添加“阅读更多”链接。问题是块引号是嵌套在彼此内部的，这让事情变得有点棘手。我的脚本可以很好地处理单级块引用，但是当遇到嵌套的块引用时，它最终会擦除比我想要的更多的信息。

我想做的是：

1.  检查父元素的子元素以找到父元素的第一个块引用子元素
2.  检查此块引用是否在其第一段中包含图像。如果是这样，请复制此块引用的第一段和第二段。如果没有，只需克隆第一段。
3.  检查并查看此块引用是否包含任何其他块引用。如果是这样，请克隆其所有后代块引号。
4.  将父块引用的克隆段落和所有克隆的块引用后代（如果适用）组合成一个变量（我们将其称为 cloneCon）。
5.  将父块引用的 html 替换为变量 cloneCon 的内容。
6.  将阅读更多链接附加到父块引用。

这是我现在正在使用的代码：

```
var post = $('#post_two_ifr').contents().find('#tinymce');
var markup = $('<body>').append(post.html()); // temporary container

markup.children('blockquote:first').each(function() {
    var original = $(this).prev('p').children('a').attr('href'); 
    var viz = '';
    if ($(this).children('p:first').find('img').length > 0) {
        var viz = $(this).children('p:lt(2)').clone();
    } else {
        var viz = $(this).children('p:first').clone();
    }

     $(this).html(viz).append('<p><a href="'+original+'" class="tumblr_blog">Read More</a></p>');
});

post.html(markup.html()); 
```

每个函数中的所有`markup.children`内容都是我遇到的问题。这是我正在使用的 HTML 的样子：

```
<p><a class="tumblr_blog" href="http://example.org">user#1</a>:</p>
<blockquote>
    <p><a class="tumblr_blog" href="http://example.org">user#2</a>:</p>
    <blockquote>
        <div>
            <p><img alt="image" height="340" src="" /></p>
            <p>consectetur adipiscing elit. Nullam sit amet velit nibh. Aliquam leo libero, pellentesque eget fringilla eget, pretium eu purus. Pellentesque a neque at arcu fermentum volutpat. In et dolor ligula, et aliquam odio. Sed sagittis fermentum massa, vel tempus neque adipiscing nec. Nunc posuere commodo orci, ac imperdiet odio malesuada eget. Aliquam pharetra pretium faucibus. Sed erat urna, laoreet quis ornare quis, fermentum quis lacus. Vestibulum a interdum nisi. Proin hendrerit orci non neque dignissim feugiat. Vivamus pretium pretium nunc, ut dapibus augue ullamcorper at. Suspendisse ac est vel velit vehicula accumsan quis vel turpis. Pellentesque eros velit, ullamcorper ac tempus sit amet, placerat quis magna. Sed ipsum nibh, convallis at tempor sit amet, vehicula vitae mauris. Aenean rutrum, lorem vitae suscipit tempor, libero lorem porta diam, a semper nulla erat in mi. Morbi leo lacus, placerat id hendrerit vitae, semper id tellus.</p>
            <p><a class="tumblr_blog" href="http://example.org">Read More</a></p>
        </div>
    </blockquote>
    <p>Lorem Ipsum Dolor.</p>
    <p>Consectetur Adipsing Elit.</p>
    <p>I used to wonder what friendship could be.</p>
</blockquote> 
```

谢谢您的帮助！

编辑：我明白了。我通过简单地告诉脚本克隆整个父块引用来简化我的执行，然后从父块引用中修剪出所需数量的子段落。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:17:05.770

我知道了。我通过告诉脚本完整地克隆父块引用，然后从父块引用中删除所需数量的子段落来简化我的执行。这样我就不需要检查是否有子块引用；它们是自动克隆的。

# java - 从 SQLite 插入和获取真实数据类型为连续插入获取 null？

> ID：13874870
> 
> 赞同：0
> 
> 时间：2012-12-14T08:12:57.397
> 
> 标签：java, android, arrays, sqlite, loops

我一直想知道，当我将相同的数据（Double 类型的数组）插入到 SOP（sys.out.println）上的同一个数据库/表中时，为什么我会得到“null（s）”，因为我没有设置任何约束。

我怀疑“空”进入我的桌子，但这怎么可能？我第一次插入一个值时它工作正常，但是一旦我尝试再次插入相同的值（第二次运行我的应用程序），我在 logcat 上得到 SOP 的输出为：

```
12-14 13:24:43.788: I/System.out(763): 28.0
12-14 13:24:43.788: I/System.out(763): null
12-14 13:24:43.797: I/System.out(763): The data was added successfully!
12-14 13:24:43.797: I/System.out(763): Data Totals = 2 
```

我的 DBAdapter.java 看起来像这样：

```
package com.profourth.line;

import java.util.Random;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
    int id = 0;
    public static final String KEY_PHID = "phID";
    public String KEY_LAT = "LATS";
    public String KEY_LON = "LONS";
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "PROdb";
    private static final String DATABASE_TABLE = "myPROmapData";
    private static final int DATABASE_VERSION = 2;

    private static final String DATABASE_CREATE = "create table myPROmapData (phID integer, LATS real, LONS real);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS myPROmapData");
            onCreate(db);
        }
    }

    // ---opens the database---
    public DBAdapter open() throws SQLException {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    // ---closes the database---
    public void close() {
        DBHelper.close();
    }

    // ---insert a title into the database---
    public long insertQuote(/* String Quote */) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_PHID, 100);
        initialValues.put(KEY_LAT, 28.00);
        initialValues.put(KEY_LON, 72.00);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    public int getAllEntries() {
        Cursor cursor = db.rawQuery("SELECT COUNT(LATS) FROM myPROmapData",
                null);
        if (cursor.moveToFirst()) {
            return cursor.getInt(0);
        }
        return cursor.getInt(0);

    }

    public Double[] Populate() {
        Double[] myLats;
        Double[] myLons;
        id = getAllEntries();
        /*
         * Random random = new Random(); int rand =
         * random.nextInt(getAllEntries()); if(rand == 0) ++rand;
         */
        Cursor cursor = db.rawQuery("SELECT LATS FROM myPROmapData", null);
        /*
         * if(cursor.moveToFirst()) { //return cursor.getString(0); } //return
         * cursor.getString(0); return myLats;
         */

        Double data[] = new Double[cursor.getCount()];

        if (cursor != null) {

            while (cursor.moveToNext()) {
                int j = 0;
                while (j < cursor.getColumnCount()) {
                    // data[j] = cursor.getString(j);
                    data[j] = cursor.getDouble(j);
                    j++;
                }

                cursor.moveToNext();
            }
            cursor.close();
        }
        return data;

    }

} 
```

我的活动看起来像：

```
package com.profourth.line;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;
import android.widget.Toast;

public class MapDataController extends Activity {

    DBAdapter db = new DBAdapter(this);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map_data_controller);

        /*MapDataHandler dbh = new MapDataHandler(this);                                       
        SQLiteDatabase db = dbh.getWritableDatabase(); 

        MapDataHandler handlemydata = new MapDataHandler(null);
        handlemydata.onCreate(db);
        handlemydata.AddRows();
        handlemydata.PopulateArr();
        db.close();*/

        db.open();
        long id = 0;
        db.insertQuote();
        id = db.getAllEntries();

        Double[] dta = null;
        dta = db.Populate();
        for(int z=0;z<(dta.length);z++)
        {
            System.out.println(dta[z]);
        }

        //Context context = getApplicationContext();
        CharSequence text = "The data was added successfully!\nData Totals = " + id;
        /*int duration = Toast.LENGTH_LONG;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();*/
        System.out.println(text);
        //Quote.setText("");
        db.close();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_map_data_controller, menu);
        return true;
    }

} 
```

任何帮助深表感谢。感谢阅读..已

**解决：** 这是我更新的 Populate() 方法：

```
public Double[] Populate() {
        Double[] myLats;
        Double[] myLons;
        //Double[] data = null;

        id = getAllEntries();
        /*
         * Random random = new Random(); int rand =
         * random.nextInt(getAllEntries()); if(rand == 0) ++rand;
         */
        int columnIndex = 0;
        Cursor cursor = db.rawQuery("SELECT LATS FROM myPROmapData", null);
        /*
         * if(cursor.moveToFirst()) { //return cursor.getString(0); } //return
         * cursor.getString(0); return myLats;
         */

        Double data[] = new Double[cursor.getCount()];
        if (cursor.moveToFirst())
        {                       
            for (int i = 0; i < cursor.getCount(); i++)
            {
                data[i] = cursor.getDouble(columnIndex);
                cursor.moveToNext();
            }           
        }
        cursor.close();
return data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:55:10.067

您的代码在循环中有两个`moveToNext()`调用，因此它每隔一秒读取一次值，并将数组的后半部分留空。

# android - 如何检查应用程序是否已安装到注册的电子邮件地址

> ID：13874871
> 
> 赞同：0
> 
> 时间：2012-12-14T08:13:01.943
> 
> 标签：android

我想检查应用程序是否由唯一用户安装。

有没有办法根据注册的电子邮件地址检查应用程序的先前版本是否已安装到 android 设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:15:58.637

除非您的应用程序需要激活等才能启动，并且您保留了一个用户电子邮件地址数据库。如果您试图控制盗版等，您可能需要查看[Android 许可](http://developer.android.com/google/play/licensing/index.html)(LVL)。它将与谷歌服务器检查当前用户实际购买了该应用程序。仅适用于付费应用。您可以对具有应用内计费的免费应用执行类似的操作。

# iphone - 如何在我的 Facebook 墙上同时发布图像数据和网站 URL

> ID：13874876
> 
> 赞同：1
> 
> 时间：2012-12-14T08:13:34.620
> 
> 标签：iphone, ios, xcode, facebook

谁能解释我如何发布图像数据，以显示将使用 FBGraph api 在我的 Facebook 墙上单击打开网站的网站的图像和网址？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:17:55.277

尝试这个 ：

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:image_url,@"source",image_url, @"link",nil];
    [facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T08:17:43.240

大家好，现在我可以使用 social.framework 将图像数据和 url 一起发布。

请在您的项目中添加 social.framework 并使用 ios6 继续执行以下代码。

if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

```
 SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        if (result == SLComposeViewControllerResultCancelled) {

            NSLog(@"ResultCancelled");

            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"There might be some problem in facebook posting please try agian later." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alert show];
            [alert release];

            self.view.userInteractionEnabled = YES;
            [loadingView removeFromSuperview];

        } else

        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"We have checked in successfully on facebook." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alert show];
            [alert release];

            NSLog(@"Success");

            self.view.userInteractionEnabled = YES;
            [loadingView removeFromSuperview];

        }

        [controller dismissViewControllerAnimated:YES completion:Nil];
        [self uploadMessageToTwitter];

    };

    controller.completionHandler =myBlock;

    [controller addURL:[NSURL URLWithString:@"https://itunes.apple.com/us/app/social-checkin/id504791401?mt=8"]];

    if (self.encoded_ImageData ==nil) {

        [controller addImage:[UIImage imageNamed:@"No_ImageFound.png"]];

    }
    else
    {

        [controller addImage:[UIImage imageWithData:self.encoded_ImageData]];

    }

    NSString *businessName;

    //Set business name string to be passed on facebook
    if (m_BusinessNameString == nil || [m_BusinessNameString isEqualToString:@""])
    {
        businessName = @"Business name not specified!";
    }
    else
    {
        businessName = [m_BusinessNameString uppercaseString];
    }

    NSString *nameString = [NSString stringWithFormat:@"CHECKED IN @"];

    //user has checked in with his friends if sc-merchant
    NSString *friendsString;

    if ([checkedFriendsNameArray count] > 0)
    {
        NSMutableString *checkedFriendsTempStr = [[NSMutableString alloc] init];

        for (NSMutableString *checkedStr in checkedFriendsNameArray)
        {

            [checkedFriendsTempStr appendString:[NSString stringWithFormat:@"%@,",checkedStr]];

            friendsString = [NSString stringWithFormat:@"WITH %@",checkedFriendsTempStr];
        }
    }
    else

    {
        friendsString = [NSString stringWithFormat:@"WITH NO FRIENDS"];

    }

    NSString *fname= [[NSUserDefaults standardUserDefaults] valueForKey:@"userfname"];
    NSString *lname= [[NSUserDefaults standardUserDefaults] valueForKey:@"userlname"];

    NSString *name=[fname stringByAppendingString:[NSString stringWithFormat:@"%@",lname]];

    NSString *main_TextString =[NSString stringWithFormat:@"%@ \n %@ %@ %@ %@",upperCaseStatusString,name,nameString,businessName,friendsString];

    [controller setInitialText:main_TextString];

    [self presentViewController:controller animated:YES completion:Nil];

}

else{

    NSLog(@"UnAvailable");
    self.view.userInteractionEnabled = YES;
    [loadingView removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T08:18:14.783

尝试像这样通过 fbgraph 发送图片：

```
- (IBAction)buttonClicked:(id)sender
{
    NSArray* permissions = [[NSArray alloc] initWithObjects:
                            @"publish_stream", nil];
    [facebook authorize:permissions delegate:self];
    [permissions release];

}
- (void)fbDidLogin
{
      NSString *filePath =yourpathToImage;
       NSData *videoData = [NSData dataWithContentsOfFile:filePath];
       NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   videoData, yourpathToImage,
                                   @"picture/jpeg", @"contentType",
                                   @"Video Test Title", @"title",
                                   @"Video Test Description", @"description",
                                   nil];
    [facebook requestWithGraphPath:@"me/photos"
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self];
 } 
```

# c# - 使用字典 > 或简单，单大合集 用于获取大型 List 集合

> ID：13874878
> 
> 赞同：0
> 
> 时间：2012-12-14T08:14:03.130
> 
> 标签：c#, list, dictionary, observablecollection

我当前的实现是我的集合中有大量对象。项目仅插入一次，即在启动时。

然后这个列表用于从中搜索和获取对象。

每个对象都被分配给具有`int`价值的特定类型。

例如，在 100 个冰淇淋对象的列表中，20 个属于香草类，25 个属于芒果等。类别具有唯一`int`标识符。

`Dictionary<int,List<ice-cream>>`我应该用更好的性能替换当前的实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:22:45.053

如果您可以为您确定用户将对数据执行搜索的程序有限的一组键，那么使用`Dictionary<..>`是一种方法。

很难提出一些真实的东西，因为数据收集的概念太模糊了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:54:06.317

除了性能（100 项是花生）；

我认为您的代码应该反映您的意图。如果您打算将这些对象视为一个列表，那么您应该有一个列表。但是当您基于 id 执行查找时，您应该有一个字典。

你应该把这个字典包装在一个（静态/单例）类中，而不是随意传递这个字典。特别是如果您需要线程安全。

# php - mysql插入php的结构

> ID：13874881
> 
> 赞同：0
> 
> 时间：2012-12-14T08:14:10.577
> 
> 标签：php, mysql

我有一个脚本，我试图用它来上传照片的 zip 文件。脚本应该按以下顺序执行这些操作：

1.  输入位置、日期、主题和要使用的目录名称的 4 个变量
2.  打开一个mysql连接
3.  处理 zip 文件 1) 上传 zip 文件 2) 解压缩文件 3) 将文件中的照片保存到指定目录 4) 将每张照片的 url 以及有关照片的一些其他信息保存到 mysql 数据库。
4.  关闭mysql连接
5.  确认一切正常。
6.  为用户提供上传另一个具有不同变量的单独 zip 文件的机会。

截至目前，我能够正确完成大部分工作。但是，我的代码结构有些问题，我不确定如何修改它。当我上传第一组时，它工作正常。但是，如果我尝试上传第二组，会发生一些事情。每次我尝试上传另一组照片时，到目前为止已上传的照片最终都会再次进入 mysql 数据库。

谁能告诉我如何纠正这个问题，以便将每个单独的图像插入数据库一次且仅一次？

```
<?php  // actual code for upload
$dirname = $_REQUEST['dirname'];
$taken = $_REQUEST['taken'];
$location = $_REQUEST['location'];
$subject = $_REQUEST['subject'];
$urldirectory = $_REQUEST['urldirectory'];

if(!(file_exists($dirname) && is_dir($dirname))) { // confirm that the directory exists, and that it is a directory
mkdir($dirname, 0777);
echo "the directory will be called ".$dirname;
} else {
echo "directory: " . $dirname;
} 

if($_FILES["zip_file"]["name"]) { // pull the nmae of the zip file from the upload
    $filename = $_FILES["zip_file"]["name"];
    $source = $_FILES["zip_file"]["tmp_name"];
    $type = $_FILES["zip_file"]["type"];

    $name = explode(".", $filename); //format the filename for a variable
    $accepted_types = array('application/zip', 'application/x-zip-compressed', 'multipart/x-zip', 'application/x-compressed');
    foreach($accepted_types as $mime_type) {
            if($mime_type == $type) {
                    $okay = true;
                    break;
            } 
    }

    $continue = strtolower($name[1]) == 'zip' ? true : false; // let user know if the zip file has not been uploaded
    if(!$continue) {
                $message = "The file you are trying to upload is not a .zip file. Please try again.";
    }
        $target_path = $dirname."/".$name; // get the $target_path variable to for the move_uploaded_file() function.

        if(move_uploaded_file($source, $target_path)) { // this block extracts the zip files and moves them to the $dirname directory

            $zip = new ZipArchive();
            $x = $zip->open($target_path);
            if ($x === true) {
                    $zip->extractTo($dirname."/"); 
                    $zip->close();
                    unlink($target_path);
            }

                    $message = "Your .zip file was uploaded and unpacked.";
                    //use glob to find all the files that have been unzipped into the directory, and then do a foreach loop that enters the image file locations into your mysql database
                    require_once 'connect.php';
                    echo '<html>'; 

                    echo '<html>'; 

                    $images = array(); // this clears the array by initializing between each reload of the page. Without this, each separate folder being uploaded would accumulate in the array and be uploaded multiple times. 
                    $images = scandir($dirname); //use scandir to find all the files that have been unzipped into the directory, and then do a foreach loop that enters the image file locations into your mysql database

                    foreach ($images as $value) {
                        if ($value!='.' && $value!='..' && $subjecttest=$subject) {
/*                                $url = trim($urldirectory)."/".trim($value);*/
                            echo '<img src="http://www.example.com/temp/' . $dirname . '/' . $value . '"< /img>';
                            $url = trim('http://www.example.com/temp/') . trim($dirname) . '/' . trim($value);
                            $insert_sql = "INSERT INTO pics (taken, location, subject, url) VALUES ('$taken', '$location', '$subject' , '$url');";

                                    if (mysql_query($insert_sql)) { 
                                                    echo "$value"." inserted successfully!";
                                            } else {        
                                                    echo "$value"." not inserted";
                                                    echo $insert_sql . '<BR>' . mysql_error();
                                            }

                                            } else {
                                                echo 'Please use unique info for each upload set'
                                            }

                                    unset($images); // destroys the $images variable, so it doesn't accumulate the next time you upload another folder. 
                                        }
                                        }
                            echo '</html>';

                                    } else {        
                    $message = "There was a problem with the upload. Please try again.";
            }
    }

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"        "http://www.w3.org/TR...nsitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>
<?php 
if($message) echo "<p>$message</p>";
if($taken) echo "<p>pictures taken on: " . $taken . "</p>";
if($subject) echo "<p>subject: " . $subject  . "</p>";
if($location) echo "<p>location: " . $location . "</p>";
?>
<form enctype="multipart/form-data" method="post" action="upload2.php"> 
    <label for="dirname">Directory to use?: </label> <input name="dirname" size="20" type="text" value="<?php echo $dirname; ?>" /><br />
<label for="taken">When was this taken?:</label> <input name="taken" size="20" type="text" value="<?php echo $dirname; ?>" /><br />
<label for="location">Where was this taken?</label> <input name="location" size="20" type="text" /><br />
<label for="subject">subject?</label> <input name="subject" size="20" type="text" /><br />
<input type=hidden name="urldirectory" value="<?php echo "http://www.example.com/temp/".'$dirname;' ?>" />
<label>Choose a zip file to upload: <input type="file" name="zip_file" /></label>
<br />
<input type="submit" name="submit" value="Upload" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:24:59.300

scandir 将获取目标目录中的所有文件，包括从当前 zip 文件中提取的新文件，以及使用其他提取文件上传的任何先前文件。您应该专门收集 zip 中文件的名称，并且只为它们插入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:27:13.913

我相信您的问题的根源在这里（我数第 53 和 54 行）：

```
$images = array(); // this clears the array by initializing between each reload of the page. Without this, each separate folder being uploaded would accumulate in the array and be uploaded multiple times. 
$images = scandir($dirname); //use scandir to find all the files that have been unzipped into the directory, and then do a foreach loop that enters the image file locations into your mysql database 
```

通过使用`scandir`，您不仅可以检索刚刚上传的图像，还可以检索*所有*以前上传的图像。相反，您可以直接从 zip 存档中读取文件名，方式类似于：

```
$new_names = array();
for ($i=0; $i<$zip->numFiles; $i++) {
    $new_names[] = $zip->getNameIndex($i);
} 
```

# javascript - 从 iframe 中打开 window.open 会擦除页面的内容

> ID：13874883
> 
> 赞同：-2
> 
> 时间：2012-12-14T08:14:58.587
> 
> 标签：javascript

我有一个带有 iframe 的网站。在 iframe 中，我有一个按钮，当单击该按钮时，它会打开一个指向指定 URL 的新浏览器窗口。好消息是——确实如此，坏消息是在启动页面上，所有内容都被删除了（我检查了它的源代码，只剩下结束正文和 html 标记）。环境是IE9。我不想截图一个按钮然后把它变成一个链接和img，我不应该在2012年这样做！！！

请帮忙！！

我正在使用的代码是：

```
<button onclick="window.open('admin.php')">ADMIN</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:26:29.067

我在表单中有按钮，将其从表单中删除，它就像果汁一样工作。

# android - IntelliJ IDEA 12 和 theme.xml 中的非标准项

> ID：13874888
> 
> 赞同：2
> 
> 时间：2012-12-14T08:15:13.457
> 
> 标签：android, intellij-idea

尝试用[这个](https://github.com/SimonVT/android-numberpicker/)库编译一个项目。IntelliJ IDEA 12 在themes.xml 中的非标准元素上显示错误并且不编译。

项目：

```
<style name="SampleTheme" parent="android:Theme.Holo">
    <item name="numberPickerUpButtonStyle">@style/NPWidget.Holo.ImageButton.NumberPickerUpButton</item>
    <item name="numberPickerDownButtonStyle">@style/NPWidget.Holo.ImageButton.NumberPickerDownButton</item>
    <item name="numberPickerInputTextStyle">@style/NPWidget.Holo.EditText.NumberPickerInputText</item>
    <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
</style> 
```

错误：

```
android-apt-compiler: [samples] /Users/max/work/libs/android-numberpicker/samples/res/values/themes.xml:5: error: Error: No resource found that matches the given name: attr 'numberPickerDownButtonStyle'.
android-apt-compiler: [samples] /Users/max/work/libs/android-numberpicker/samples/res/values/themes.xml:6: error: Error: No resource found that matches the given name: attr 'numberPickerInputTextStyle'.
android-apt-compiler: [samples] /Users/max/work/libs/android-numberpicker/samples/res/values/themes.xml:7: error: Error: No resource found that matches the given name: attr 'numberPickerStyle'.
android-apt-compiler: [samples] /Users/max/work/libs/android-numberpicker/samples/res/values/themes.xml:4: error: Error: No resource found that matches the given name: attr 'numberPickerUpButtonStyle'. 
```

如果您使用和其他库，也会出现此问题。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:38:15.903

请检查您是否为该项目使用了最新的 Android 平台。在[Module Dependencies](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)中应该有**4.0.x**或更高的平台版本：

![安卓平台](../Images/adfe7e80253e51304fd0f2b26c282868.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T14:23:32.667

*   您也应该将 android-calendarview 库（再次由 SimonVT）添加到 android-numberpicker 模块作为依赖项
*   将这些库作为依赖项添加到您的主模块。
*   将这些添加的项目标记为库项目
*   将此样式添加到您在项目中使用的样式.xml。（当然你也可以改变风格）

    ```
     <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:11:18.050

您需要在相同的样式文件中定义这些属性的类型，作为节点的子`resources`节点：

```
<attr name="numberPickerUpButtonStyle" format="reference" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T06:52:38.733

NumberPicker/DataPicker 模块应设置为 SDK4.2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-19T11:55:09.763

您的库项目可能被编译为应用程序项目。要更改此设置，请转到：

**文件 > 项目结构 > 构面 > [库名称] >**选中“库模块”。

# php - mysql db中的瑞典字符在调用php / html时导致空结果

> ID：13874907
> 
> 赞同：2
> 
> 时间：2012-12-14T08:16:46.897
> 
> 标签：php, mysql, special-characters

我有一个数据库设置为 utf-8 排序规则。它包含一个具有相同排序规则的表，该排序规则又包含一系列 utf-8 中的 varchar 变量。

当我尝试通过结果在我的 html 页面中使用 mysql 的输出时，结果为空。

我正在使用 PDO 使用 php 发出 sql 请求，字符集的元标记是：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

知道为什么包含**ä å ö**字符的值返回 null 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:15:37.343

尝试添加

```
 mysql_set_charset("UTF8"); 
```

连接到数据库并选择数据库后。在尝试将 mysql db 从 ISO Latin 1 转换为 UTF8 并添加该行后，我也遇到了类似的问题！

还要检查您的 php 文件是否使用 UTF8 编码保存

# c++ - 循环单链接列表，添加一个新节点并替换它

> ID：13874908
> 
> 赞同：1
> 
> 时间：2012-12-14T08:16:46.943
> 
> 标签：c++

我用过的编译器都不能调试它。我正在尝试在列表末尾添加一个新节点，然后显示它，它们没有显示任何类型的错误，两者都给出了发送不发送窗口的错误，我认为这可能是内存泄漏..请帮我

```
#include <iostream>
#include <conio.h>
using namespace std;

struct Node
{
    int data;
    Node *nextptr;
};

class CLLIST{

private:
    Node*firstptr;
    Node*lastptr;

public:
     CLLIST(){

     cout << "Constructor Called !";
      firstptr=lastptr=NULL;
}

 void insert_at_back(int val){
     cout << " \n \n I am in the insert at back function: ";
     Node*newptr;
     newptr = new Node;
     newptr->data=val;

     if(firstptr=NULL)//means list is empty
     {
         firstptr=newptr;

     }else{
         lastptr->nextptr=newptr;
     }

     lastptr=newptr;
     lastptr->nextptr=firstptr;
 }

 void display(){

     Node *temptr,*endptr;
     temptr = new Node;
     endptr = new Node;

     temptr=firstptr;
     endptr = NULL;
     while(temptr!=endptr){

         cout << "I am in the display Function: ";
         cout << firstptr->data << " ";
         firstptr=firstptr->nextptr;
         endptr=firstptr;}

         delete temptr;
         delete endptr;
     }

 };

 int main()
 {
 CLLIST obj1;

  obj1.insert_at_back(26);

  obj1.display();

 cout << " \n \n Done !";

getch();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:41:06.507

诱惑=第一点；endptr = NULL; 而（temptr！=endptr）{

```
 cout << "I am in the display Function: ";
     cout << firstptr->data << " ";
     firstptr=firstptr->nextptr;
     endptr=firstptr;}

     delete temptr;
     delete endptr;
 } 
```

您在 while 条件下将 tempptr 与 endptr 进行比较，但您永远不会重新分配 tempptr，因为在开始时 tempptr = firstptr，然后 firstptr 循环遍历列表，然后分配 endptr = firstptr，这意味着 tempptr 将始终等于 firstptr 并且endptr 和条件 temptr!=endptr 永远不会失败

代替

> firstptr=firstptr->nextptr；

利用

> tempptr = tempptr->nextptr；

您也可以使用 do { } while() 语句并在开始时初始化 endptr

# javascript - 存储购物车详细信息本地存储或服务器端 cookie 的最佳方式

> ID：13874912
> 
> 赞同：5
> 
> 时间：2012-12-14T08:17:25.560
> 
> 标签：javascript, cookies, local-storage, shopping-cart, client-side-scripting

我目前正在开发一个电子商务网站，该网站将拥有大约 500 件商品。我需要网站支持 IE8+、Firefox、chrome。

即使没有登录，该网站的用户也应该能够将商品添加到购物车。一旦他们登录，他们应该会在他们的购物车中看到他们在登录同一浏览器之前添加的商品。没有必要将浏览器中添加的购物车项目映射到用户帐户或通过用户登录的设备访问。

鉴于这些要求，存储购物车项目、本地存储或服务器端 HTTP cookie 的最佳方式是什么？还需要一些关于使用本地存储时可能出现的安全问题（如 xss ..）的输入，如果有的话

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T08:53:37.923

通常，实际的购物车内容不会存储在本地，而是服务器创建一个临时用户 ID，该用户 ID 的 cookie，然后将该用户 ID 的购物车内容存储在服务器端数据库中。这允许您使用与登录用户完全相同的服务器端代码（其中购物车内容基于登录的用户 ID 存储在服务器端），以便可以从任何浏览器访问购物车。唯一的区别是未登录用户被赋予一个临时用户 ID，而不是永久用户 ID。

如果用户在将东西放入购物车后登录或创建帐户，则购物车内容可以很容易地在服务器上分配给现在永久的用户 ID。

由于 cookie 在任何地方都可以互操作，这就解决了 IE8 的问题。由于 cookie 的大小有限，因此将购物车内容存储在服务器端数据库中并且仅将 cookie 用于临时用户 ID 也可以处理该问题。

# c# - Azure WCF 具有 https wsdl url，但端点 url 在 http

> ID：13874916
> 
> 赞同：1
> 
> 时间：2012-12-14T08:18:06.110
> 
> 标签：c#, azure, wcf-binding, sharepoint-designer

我正在尝试在 SPD 中访问 Azure WCF。http wsdl 和端点按预期工作，但 https wsdl 无法处理 https 端点。我打开了 wsdl，只能看到一个 http 端点。

谁能告诉我如何在 wsdl soap:address 位置有一个 https 端点？

在 SPD for ECT 中使用 https wsdl 和 http 端点我可以连接到 WCF 服务，但它不会生成树视图！

最后它会生成一个错误：“**由于内部错误，服务器无法处理请求。有关该错误的更多信息，请打开 IncludeExptionDetailsFaults...blah blah blah** ”，我很确定配置文件已经有 serviceDebug includeExceptionDetailInFaults="true" 行为

配置

```
 <system.web>
    <customErrors mode="Off" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpsGetEnabled="true" httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true" />
          <useRequestHeadersForMetadataAddress>
            <defaultPorts>
              <add scheme="http" port="80" />
              <add scheme="https" port="443" />
            </defaultPorts>
          </useRequestHeadersForMetadataAddress>
        </behavior>

      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <directoryBrowse enabled="true" />
  </system.webServer> 
```

csdef

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="SPO_LOB" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
  <WebRole name="SPO_LOB" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
          <Binding name="HttpsIn" endpointName="HttpsIn" />
        </Bindings>
      </Site>
    </Sites>
    <Certificates>
      <Certificate name="certsvc" storeLocation="LocalMachine"
          storeName="CA" />
    </Certificates>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="80" />
      <InputEndpoint name="HttpsIn" protocol="https" port="443" certificate="democloudsvc1" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
      <Import moduleName="RemoteAccess" />
      <Import moduleName="RemoteForwarder" />
    </Imports>
    <LocalResources>
      <LocalStorage name="SPO_LOB.svclog" sizeInMB="1000" cleanOnRoleRecycle="false" />
    </LocalResources>
  </WebRole>
</ServiceDefinition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:20:54.297

添加了 mex 绑定和端点现在在 https

```
<bindings>
      <basicHttpBinding>
        <binding name="SecureBasic" proxyAddress="http://localhost:80">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service name="SPO_LOB.Service1" behaviorConfiguration="SVCbehavior">
        <host>
          <baseAddresses>
            <add baseAddress="https://localhost:443"/>
          </baseAddresses>
        </host>
        <endpoint binding="basicHttpBinding" bindingConfiguration="SecureBasic" name="basicHttpSecure" contract="SPO_LOB.IService1" />
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors> 
```

现在剩下的问题是当我将 SPO BCS 连接到服务时，它会生成我上面提到的错误。即使在配置中将 IncludeExceptionDetailInFaults 设置为 true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:06:38.440

您的 mex 端点是如何在 web.config 的服务部分定义的。应该是这样的

请注意，绑定必须是“mexHttpsBinding” - (https)

# ruby-on-rails - Rails2 路由问题

> ID：13874919
> 
> 赞同：1
> 
> 时间：2012-12-14T08:18:26.080
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 2 应用程序中，我在路由中发现了一个安全漏洞。我正在使用 Rails 2.3.8。这是我的实现：

```
# routes.rb
map.connect 'sampleview', :controller => 'sample', :action => 'view' 
```

在某些情况下，我的 URL 类似于[http://example.com/sampleview?view_url=http://test.com?s=2&code=15](http://example.com/sampleview?view_url=http://test.com?s=2&code=15)

在这种情况下，我去了 test.com（这个 test.com 是我在我的应用程序中显示的另一个域）并且页面被放置在 iframe 标记中。

问题是假设如果我构建 url：

```
http://example.com/sampleview?view_url=http://www.google.com 
```

谷歌登陆页面被放置在我的应用程序中的 iframe 标记中。不是很好。

如果 URL [http://example.com/sampleview?view_url=http://www.google.com](http://example.com/sampleview?view_url=http://www.google.com)包含 test.com 以外的内容。我必须向用户提出信息。这在此处不是有效的 URL。

如何修改我的 routes.rb 以支持此解决方案或任何其他解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:44:20.410

我不确定您是否可以在 Rails 3.2 中执行此操作，因为 route 上的约束选项不存在。我建议您在控制器中实现这一点，最终使用`before_filter`. `ApplicationController`如果您必须在不同的控制器之间共享它，您可以将它放在。

更新：添加示例

```
class ApplicationController
  before_filter :check_view_url

  private

  def check_view_url
    if params[:view_url] && params[:view_url] !~ %r{^http://test.com}
      raise "Trying to access invalid website"
    end
  end

end 
```

# html - 子 div 未与父 div 内的另一个 div 对齐

> ID：13874921
> 
> 赞同：0
> 
> 时间：2012-12-14T08:19:00.557
> 
> 标签：html, css

我在让#divSocial 与#divNavMenu 对齐时遇到了一些麻烦。我试图向右浮动，但所做的只是垂直扩展父 div #divNavigation 并将这些社交图标移到另一行。这可能是一小段代码，但我已经对它进行了很长一段时间的模糊测试。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html itemscope itemtype="http://schema.org/Blog" xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<title>Tutorials Index Page</title>
<link href="../css/tutorialHelp.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div id="divHeaderContainer">
<div id="divHeader">
<div id="divLogo"></div>
<div id="divNavigtation">
<div id="divNavMenu">
<ul>
<li> <a href="../index.html">Home</a></li>
<li> <a href="../Tutorials/index.html">Tutorials</a>
<ul>
<li><a href="../Photoshop/index.html">Photoshop</a>
<li><a href="../Dreamweaver/index.html">Dreamweaver</a>
<li><a href="../Illustrator/index.html">Illustrator</a>
<li><a href="../Flash/index.html">Flash</a>
<li><a href="../InDesign/index.html">InDesign</a>
</ul>
</li>
<li><a href="../Articles/index.html">Articles</a></li>
<li><a href="../About/index.html">About</a></li>
<li><a href="../Contact/index.html">Contact</a></li>
</ul> <!-- end main UL -->
<br class="clearFloat" />
</div>
<div id="divSocial">
<a href="http://www.facebook.com/pages/Tutorialhelp/497024140318879" target="_blank"><img title="FacebookIcon" alt="FacebookIcon" src="../images/facebook.png" /></a>
<a href="https://twitter.com/Tutorial_Help" target="_blank"><img title="TwitterIco" alt="TwitterIcon" src="../images/twitter.png" /></a>
</div>
</div>
</div>
</div>
<div id="divContentContainer">
<div id="divWrapper">
<div id="divInnerWrapper">
<div id="divContent">
<div id="divBanner"></div>
<h2>Tutorials Index Page</h2>
<div id="divListing">
<header class="listing">
<div id="divListingLeft">
<a href="#" title="The Basics Of Photoshop">
<img width="200px" height="200px" src="images/photoshopBasicsImage.jpg" alt="PhotoshopBasicsImage" title="PhotoshopBasicsImage" />
</a>
<span class="metaWrapper">Photoshop</span>
<span class="metaWrapper">Beginner</span>
</div>
<div id="divListingRight">
<p class="tags">
<a href="#" title="Link to the Tutorials Page">Tutorials</a>
>>
<a href="#" title="Link to the Photoshop Page">Photoshop</a>
</p>
<div class="clearFloat"></div>
<p class="date">
Posted on: October 16, 2012 by James Owen
</p>
<h1><a href="#" title="The Basics Of Photoshop">The Basics Of Photoshop</a></h1>
<div id="synopsis"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam quis viverra lacus. Ut volutpat augue nec nulla sodales facilisis. Duis magna mauris, auctor a hendrerit vitae, adipiscing vel ante. Praesent risus elit, egestas a commodo non, suscipit id mauris. Ut ligula velit, tempor vel accumsan sed, sollicitudin quis sem. Integer nunc sem, feugiat non luctus ut, varius quis enim. Curabitur non odio id leo lobortis gravida acac arcu.</p></div>
</div>
<br class="clearFloat" /></header>
</header>
</div>
<div id="divListing">
<header class="listing">
<div id="divListingLeft">
<a href="#" title="Building A Basic Web Page In Dreamweaver">
<img width="200px" height="200px" src="images/dreamweaverBasicWebPageImage.jpg" alt="DreamweaverBasicWebPageImage" title="DreamweaverBasicWebPageImage" />
</a>
<span class="metaWrapper">Dreamweaver</span>
<span class="metaWrapper">Beginner</span>
</div>
<div id="divListingRight">
<p class="tags">
<a href="#" title="Link to the Tutorials Page">Tutorials</a>
>>
<a href="#" title="Link to the Photoshop Page">Dreamweaver</a>
</p>
<div class="clearFloat"></div>
<p class="date">
Posted on: October 16, 2012 by James Owen
</p>
<h1><a href="#" title="The Basics Of Photoshop">Building A Basic Web Page In Dreamweaver</a></h1>
<div id="synopsis"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam quis viverra lacus. Ut volutpat augue nec nulla sodales facilisis. Duis magna mauris, auctor a hendrerit vitae, adipiscing vel ante. Praesent risus elit, egestas a commodo non, suscipit id mauris. Ut ligula velit, tempor vel accumsan sed, sollicitudin quis sem. Integer nunc sem, feugiat non luctus ut, varius quis enim. Curabitur non odio id leo lobortis gravida acac arcu.</p></div>
</div>
<br class="clearFloat" /></header>
</header>
</div>
<div id="divListing">
<header class="listing">
<div id="divListingLeft">
<a href="#" title="Designing A Cartoon Environment">
<img width="200px" height="200px" src="images/flashCartoonEnvironmentImage.png" alt="FlashCartoonEnvironmentImage" title="FlashCartoonEnvironmentImage" />
</a>
<span class="metaWrapper">Flash</span>
<span class="metaWrapper">Beginner</span>
</div>
<div id="divListingRight">
<p class="tags">
<a href="#" title="Link to the Tutorials Page">Tutorials</a>
>>
<a href="#" title="Link to the Photoshop Page">Flash</a>
</p>
<div class="clearFloat"></div>
<p class="date">
Posted on: October 16, 2012 by James Owen
</p>
<h1><a href="#" title="The Basics Of Photoshop">Designing A Cartoon Environment</a></h1>
<div id="synopsis"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam quis viverra lacus. Ut volutpat augue nec nulla sodales facilisis. Duis magna mauris, auctor a hendrerit vitae, adipiscing vel ante. Praesent risus elit, egestas a commodo non, suscipit id mauris. Ut ligula velit, tempor vel accumsan sed, sollicitudin quis sem. Integer nunc sem, feugiat non luctus ut, varius quis enim. Curabitur non odio id leo lobortis gravida acac arcu.</p></div>
</div>
<br class="clearFloat" /></header>
</header>
</div>
<div id="divBottomBanner"></div>
</div>
<div id="divSidebar">
<div id="divInnerSideBar">
<div id="divAdWrapper">
<div class="adListing"><span>Advertise Here</span></div>
<div class="adListing"><span>Advertise Here</span></div>
<div class="adListing"><span>Advertise Here</span></div>
<div class="adListing"><span>Advertise Here</span></div> 
<br class="clearFloat" />  
</div>
<div id="divDonate">
<h3>Support This Web Site!</h3>
<span>Donate to help the cost of running this site.</span>
<script type="text/javascript"> 
function validateAmount(amount){
    if(amount.value.match( /^[0-9]+(\.([0-9]+))?$/)){
        return true;
    }else{
        alert('You must enter a valid donation.');
        amount.focus();
        return false;
    }
}
</script>
<form action="https://checkout.google.com/cws/v2/Donations/701849125270859/checkoutForm" id="BB_BuyButtonForm" method="post" name="BB_BuyButtonForm" onSubmit="return validateAmount(this.item_price_1)" target="_top">
    <input name="item_name_1" type="hidden" value="Donations for Site"/>
    <input name="item_description_1" type="hidden" value="Donate for the cost of running the site."/>
    <input name="item_quantity_1" type="hidden" value="1"/>
    <input name="item_currency_1" type="hidden" value="USD"/>
    <input name="item_is_modifiable_1" type="hidden" value="true"/>
    <input name="item_min_price_1" type="hidden" value="0.01"/>
    <input name="item_max_price_1" type="hidden" value="25000.0"/>
    <input name="_charset_" type="hidden" value="utf-8"/>
    <table align="center" cellpadding="5" cellspacing="0" width="1%">
        <tr>
            <td align="right" nowrap="nowrap" width="1%">&#x24; <input id="item_price_1" name="item_price_1" onfocus="this.style.color='black'; this.value='';" size="11" style="color:grey;" type="text" value="Enter Amount"/>
            </td>
            <td align="left" width="1%">
                <input alt="Donate" src="https://checkout.google.com/buttons/donateNow.gif?merchant_id=701849125270859&amp;w=115&amp;h=50&amp;style=trans&amp;variant=text&amp;loc=en_US" type="image"/>
            </td>
        </tr>
    </table>
</form>
</div>
<div id="divSpacer"></div>
<fb:like-box href="http://www.facebook.com/pages/Tutorialhelp/497024140318879" width="300" show_faces="true" stream="true" header="true"></fb:like-box>
<div class="clearFloat"></div>
</div>
</div>
<div class="clearFloat"></div>
</div>
</div>
</div>
</body>
</html>

@charset "utf-8";
/* CSS Document */

body{
    margin:0px;
    padding:0px;
    font-family:Verdana, Geneva, sans-serif;
    font-size:12px;
    color:#000;
    min-width:1300px;
    background-color:#83ACBC;
}

#divHeaderContainer{
    width:100%;
    height:200px;
    background-color:#CEDBD9;
    margin:0px auto;
}

#divHeader{
    width:1120px;
    height:200px;
    min-width:1120px;
    margin:0px auto;
    background-image: url(../images/backgroundImage_r1_c1_r1_c1.jpg);
    background-repeat: no-repeat;
    background-position: center bottom;
}

#divLogo{
    height:130px;
    background-image:url(../images/tutorialHelp.png);
    background-repeat: no-repeat;
    background-position: center;    

}

#divNavigation{
    height:32px;
    position:relative;
    background-color:#333;
    width:1120px;
}

#divNavMenu {
    width:900px;
    height:32px;
    margin-top: 7px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 10px;
}

#divNavMenu ul {
    margin:0;
    padding:0;
    line-height:30px;
}

#divNavMenu li {
    margin:0;
    padding:0;
    list-style:none;
    float:left;
    position:relative;
    background:#DCE4E3;
}

#divNavMenu ul li a {
    text-align:center;
    height:30px;
    width:148px;
    display:block;
    color:#000;
    font-family:Verdana, Geneva, sans-serif;
    text-decoration:none;
    border:1px solid #C5D1D0;
    font-size: 16px;
    font-weight: bold;
}

#divNavMenu ul ul {
    position:absolute;
    visibility:hidden;
    top:32px;
}

#divNavMenu ul li:hover ul {
    visibility:visible;
    z-index:9999; 
}

#divNavMenu li:hover {
   background:#83ACBC;
}

#divNavMenu ul li:hover ul li a:hover {
    color:#FFF;
    background:#9EBECB;
}

#divNavMenu a:hover {   
    color:#FFF;
} 

/* Contains the Float */

.clearFloat {
    clear:both; 
    margin:0;
    padding:0;
    height:0px;
    overflow:hidden;
}

/* IE7 Display Fix */  

#divNavMenu ul li {

    display: inline;     

}   

#divContentContainer{
    margin:0px auto;
    padding-bottom:50px;
    width:100%;
    background-image: url(../images/backgroundImage_r1_c1_r3_c1.jpg);
    background-repeat: no-repeat;
    background-position: center bottom;
}

#divWrapper{
    width:1120px;
    margin:0px auto;
    background-image: url(../images/backgroundImage_r1_c1_r2_c1.jpg);
    background-repeat: repeat-y;
    background-position: center;
}

#divInnerWrapper{
    margin:0px auto;
    width:1088px;
}

#divContent{
    width:738px;
    float:left;
    margin:0px auto;
}

#divBanner{
    width:700px;
    height:60px;
    margin:0px auto;
    padding-bottom:20px;
    background-color:#D3DCDA;
}

#divListing{
    padding:20px 20px 0px 18px;
    margin:15px 0px 0px 0px;
}

.listing{
    height:auto;
    background:none;
    border-bottom:solid 1px #B7B7B7;
}

#divListingLeft{
    width:200px;
    float:left;
    margin:0px 0px 20px 0px;
}

#divListingRight{
    width:480px;
    float:right;
}

.metaWrapper{
    font-family:Verdana, Geneva, sans-serif;
    display:block;
    width:200px;
    font-size:14px;
    text-align:center;
    font-weight:bold;
    color:#000;
}

.tags{
    font-style:italic;
}

.date{
    font-style:italic;
}

#divContent #divListing p{
    padding:0 20px 0px 10px;
}

#divContent #divListing h1{
    font-size:26px;
    color:#000;
    padding:0px 20px 0px 10px;
    margin:0px;
}

h1 a{
    font-style:normal;
    text-decoration:none;
    color:#000;
}

#divBottomBanner{
    width:700px;
    height:60px;
    margin:0px auto;
    padding-bottom:20px;
    margin-top:35px;
    background-color:#D3DCDA;
}

h2{
    font-weight:bold;
    font-size:24px;
    margin:30px 0px 0px 20px;
    padding-bottom:5px;
    border-bottom:solid 1px #B7B7B7;
    color: #FAA221;
}

#contactForm{
    padding:0px;
    display: block;
    height: auto;
    margin-top: 30px;
    margin-right: 160px;
    margin-bottom: 0px;
    margin-left: 0px;
    font-weight: bold;
}

#divSidebar{
    float:right;
    width:337px;
}

#divInnerSideBar{
    width:300px;
    margin:0px auto;
}

#divAdWrapper{
    width:260px;
    height:auto;
    margin:0px 0px 0px 23px;
}

.adListing{
    display:block;
    font-size:11px;
    background-color:#D3DCDA;
    color:#000;
    text-align:center;
    text-decoration:none;
    overflow:hidden;
    float:left;
    width:125px;
    height:125px;
    margin: 0px 4px 4px 0px;
}

.adListing span{
    font-weight:bold;
    display:block;
    margin:56px auto;
    color:#83ACBC;
}

#divSpacer{
    display:block;
    margin:15px 0px 0px 0px;
}

#divDonate{
    margin-top: 25px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
}

#divDonate h3{
    text-align:center;
    text-decoration:underline;
}

#divDonate span{
    text-align:center;
    font-weight:bold;
}

#divAboutBio{
    padding:20px 20px 0px 18px;
}

#divAboutBio ul li{
    font-weight:bold;
}

#divSocial{
    float:right;
    height:32px;
    width:100px;
    display:block;

} 
```

我已经添加了 HTML 和 CSS，希望您能看到代码中的问题所在。目标是让#divNavigation 在左侧有#divNavMenu，在右侧有#divSocial，但在相同的对齐方式上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:40:31.803

我看到了你的代码。在 div #divSidebar 中，您告诉 (float:right)，仅在分配 position:absolute 属性后，float 才会起作用。试试这个代码。

```
#divSidebar{
    width:337px;
    position:absolute;
    top:138px;
    right:175px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T11:34:26.410

将此添加到您的样式中

```
#divNavMenu {
display:inline-block;
vertical-align:top;
}
#divNavigation {
display:inline-block;
vertical-align:top;
} 
```

将#divNavMenu div 和#divNavigation div 显示为inline-block 比使用float 和clear 更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:28:46.070

添加`float:left;`到`#divNavMenu`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T08:30:32.227

试着把 float:left; 对于 divNavMenu 和 divSocial：

```
#divNavMenu{
    float:left;
    width:900px;
    height:32px;
    margin-top: 7px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 10px;
}

#divSocial{
    float:left;
    height:32px;
    width:100px;
    display:block;
} 
```

# iphone - 故事板标识符的代码完成

> ID：13874923
> 
> 赞同：0
> 
> 时间：2012-12-14T08:19:08.140
> 
> 标签：iphone, ios, xcode, cocoa-touch

将标识符名称从一个地方复制并粘贴到另一个地方很痛苦。有没有办法激活标识符的代码完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:26:00.700

据我所知，没有办法激活 Storyboard Identifiers 的代码完成，因为它们是 NSString 对象。但是，作为替代方案，您可以创建一个常量文件来容纳所有标识符，并且代码完成可以在常量上正常工作。

**示例**：

假设您有以下 StoryBoard 标识符：FirstViewController、SecondViewController 和 SomeSegue。

您可以创建一个名为 EXStoryBoardIdenfiers.h 的文件来容纳这些：

```
// 
// EXStoryBoardIdentifiers.h
// 
// Created by Example Programmer on 12/14/12.
// 

#define kStoryBoardIdentifierFirstViewController @"FirstViewController"
#define kStoryBoardIdentifierSecondViewController @"SecondViewController"
#define kStoryBoardIdentifierSomeSegue @"SomeSegue" 
```

然后只需在需要访问这些标识符的地方导入此文件即可完成代码。

# asp.net - 关于 IParameterInspector BeforeCall 返回值的一般建议

> ID：13874926
> 
> 赞同：0
> 
> 时间：2012-12-14T08:19:18.450
> 
> 标签：asp.net, wcf, .net-4.5, webmethod

我刚刚学习WCF WebMethods，并开始消化代码以插入`IParameterInspector`接口进行参数验证。

有人可以用最基本的术语告诉我`BeforeCall()`函数中返回对象的目的是什么吗？例如：

```
Public Function BeforeCall(operationName As String, inputs() As Object) **As Object** Implements IParameterInspector.BeforeCall

End Function 
```

通过基本测试，我意识到我可以从中返回一个对象，然后在参数`BeforeCall()`中变得可用。`AfterCall()` `correlationState`

我*假设*这个值不会从消费代码的其他任何地方返回？

有人可以提供一些基本示例，说明为什么程序员可能需要使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:38:49.550

你是对的，返回值只是[msdn 文档状态](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.beforecall.aspx)的一个correlationState 。

```
Return Value
Type: System.Object
The correlation state that is returned as the correlationState parameter in AfterCall. Return null if you do not intend to use correlation state. 
```

而且，如前所述，它仅用作`BeforeCall()`和之间严格的相关状态`AfterCall()`。

而且，关于基本示例，您可以使用它在那里实现您自己的关联业务逻辑。例如，您可能希望在调用后检索输入参数，这些输入参数之前存储在持久状态中，并基于它们执行一些自定义逻辑（记录或实际更改输出值）。

# sql - 删除选择中的最后一行

> ID：13874928
> 
> 赞同：4
> 
> 时间：2012-12-14T08:19:21.720
> 
> 标签：sql, oracle, select

如何从选定数据中删除最后一行。我需要对数据进行排序并对其进行排序。但最后一行从未使用过。也许有人知道一个例子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T08:24:44.543

你可以试试这个

```
with t as (select 1 field from dual
union all 
select 2 from dual)

select * from (
  select count(*) over(order by field desc) cnt, t.* from t
) 
where cnt != rownum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:53:47.797

如果您的类似[MySQL，请查看此问题：How to select all rows from a table EXCEPT the last one](https://stackoverflow.com/questions/315621/mysql-how-to-select-all-rows-from-a-table-except-the-last-one) and see this code there

```
SELECT * FROM TABLE WHERE ID != (SELECT MAX(ID) FROM TABLE) 
```

这里 "ID != (SELECT MAX(ID) FROM TABLE)" 这部分剪切了序列中编号最高的最后一行（为此，您必须声明一个整数字段（ID），它将是 auto_increment。该字段将给你MAX(ID)记录的最后一行的最大值)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T21:48:44.507

假设您有一些查询返回一定数量的行，您可以使用 COUNT(*) OVER () 来找出它返回的行数。要消除最后一行，您必须将查询推送到子查询中并过滤 ROWNUM ...

```
select ...
from   (select   count(*) over () total_rows,
                 ...
        from     ...
        where    ...
        order by ...)
where   rownum < total_rows 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T08:23:27.973

试试这样

```
select * from table
where rowid<>(select max(rowid) from table); 
```

或者

```
select * from table
minus
select * from table where rownum = (select count(*) from table) 
```

# php - PHP-需要第一个表中的前3个json数据和第二个表中的所有数据

> ID：13874935
> 
> 赞同：0
> 
> 时间：2012-12-14T08:19:53.570
> 
> 标签：php, javascript, jquery, mysql, json

我是 PHP 编程的初学者。我有一个代码，我需要获取第一个表中的前 3 个数据和下一个表中的所有数据。数据来自 db 作为 json。

以下是我的php文件

```
<?php 
    $host = "localhost"; 
    $user = "root"; 
    $pass = ""; 
    $database = "TMS_Sample"; 

    $linkID = mysql_connect($host, $user, $pass) or die("Could not connect to host."); 
    mysql_select_db($database, $linkID) or die("Could not find database."); 

    $result = mysql_query("SELECT * FROM Completed_Training");
    while ($row = mysql_fetch_assoc($result)) {
        $array[] = $row;
    }
    echo json_encode($array);
?> 
```

结果我得到以下json：

```
[{"Date":"2012-12- 04","Topic":"Collections","Trainer":"Prabhakaran.G","Status":"Invitation Sent"},{"Date":"2012-12-12","Topic":"Collections","Trainer":"Prabhakaran.G","Status":"Invitation Sent"},{"Date":"2012-12-07","Topic":"ffb","Trainer":"vcvxcv","Status":"cvxcv"},{"Date":"2012-12-08","Topic":"xcv","Trainer":"cvxcv","Status":"vxcv"},{"Date":"2012-12-09","Topic":"cvxcv","Trainer":"cvxcv","Status":"cvxcvxc"},{"Date":"2012-12-10","Topic":"xcv","Trainer":"vxcvxc","Status":"vxcv"},{"Date":"2012-12-11","Topic":"vv","Trainer":"vv","Status":"vxcv"},{"Date":"2012-12-12","Topic":"vv","Trainer":"vcv","Status":"cvxcv"},{"Date":"2012-12-13","Topic":"vv","Trainer":"cvxcv","Status":"cvv"},{"Date":"2012-12-14","Topic":"vxcv","Trainer":"vccv","Status":"xcvcv"},{"Date":"2012-12-14","Topic":"vcxvxc","Trainer":"cvxcv","Status":"cvxcv"},{"Date":"2012-12-15","Topic":"cvxcv","Trainer":"xcvxcv","Status":"xcvxcv"},{"Date":"2012-12-16","Topic":"sdasd","Trainer":"sdasd","Status":"dscxzc"},{"Date":"2012-12-16","Topic":"scxzcxzc","Trainer":"sdfscxzc","Status":"sadffcvzxc"},{"Date":"2012-12-17","Topic":"fxzcvxzc","Trainer":"zcvxzcz","Status":"xzcxzcxzcxz"},{"Date":"2012-12-18","Topic":"xzceafsdfv","Trainer":"vxvxv","Status":"xgsdfgvsd"},{"Date":"2012-12-12","Topic":"xcdvxvxcv","Trainer":"vxzdgvgSv","Status":"gbvsgv"},{"Date":"2012-12-27","Topic":"SDgvsdv","Trainer":"sdvsdv","Status":"sdgvsdv"},{"Date":"2012-12-11","Topic":"sdvsvd","Trainer":"sdvsdv","Status":"vdv"},{"Date":"2012-12-22","Topic":"dvsdv","Trainer":"vssdv","Status":"vsdvV"}] 
```

现在我需要在 html 表中显示这个 json 数据

我已经在 1 个表格中显示了所有数据。但我需要的是获取第一个表中的前 3 个数据和下一个表中的所有数据。

这是我的html代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script type="text/javascript" src="jquery182.js"></script>
        <script type="text/javascript" language="javascript">
            $(document).ready(function () {
                $.getJSON('CompletedTraining.php', null, function (data) {
                    var Completed_counter = 1;
                    if (data) {
                        if (Completed_counter <= 3) {
                            var table = '<table border="1">';
                            $.each(data, function (i, element) {
                                table += '<tr>';
                                table += '<td>' + element.Date + '</td>';
                                table += '<td>' + element.Topic + '</td>';
                                table += '<td>' + element.Trainer + '</td>';
                                table += '<td>' + element.Status + '</td>';
                                table += '</tr>';
                            });
                            table += '</table>';
                            $('#getname').html(table);
                        }

                        var table1 = '<table border="1">';
                        $.each(data, function (j, element1) {
                            table1 += '<tr>';
                            table1 += '<td>' + element1.Date + '</td>';
                            table1 += '<td>' + element1.Topic + '</td>';
                            table1 += '<td>' + element1.Trainer + '</td>';
                            table1 += '<td>' + element1.Status + '</td>';
                            table1 += '</tr>';
                        });
                        table1 += '</table>';
                        $('#getname1').html(table1);
                        Completed_counter = Completed_counter + 1;
                    } else {
                        alert("error");
                    }
                });
            });
        </script>
    </head>
    <body>
        <form name="index">
            <table id="getname" ></table>
            <table id="getname1" ></table>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:45:14.250

我让它尽可能简单..这样很容易理解..

无需循环数据两次...使用`$.each()`函数一次..并检查`$.each`函数内部的条件

这是小提琴..

[http://jsfiddle.net/yXB3W/4/](http://jsfiddle.net/yXB3W/4/)

**更新**

另一个小提琴..

[http://jsfiddle.net/yXB3W/7/](http://jsfiddle.net/yXB3W/7/)

你已经有了数据..所以你只需要检查`if(data)...`小提琴中的代码

# php - 从 PHP 中的父级上下文访问父级的覆盖方法

> ID：13874950
> 
> 赞同：13
> 
> 时间：2012-12-14T08:20:50.893
> 
> 标签：php, class

我有一个名为**ClassA**的绘图 PHP 类，它由许多其他绘图类扩展，例如**ClassB 。**

我需要继承的类来触发其父类的**Draw()**方法。但是，在我的特殊情况下，我不想直接调用这样的方法（例如：）`parent::Draw()`。我想要第三个函数（例如`parent::InvokeDraw()`：）从父上下文中调用我的绘图方法。

这里有一些代码来说明：

```
class ClassA
{
    function Draw()
    {

        /* Drawing code ... */

    }

    function InvokeDraw()
    {
        $this->Draw();
    }
}

class ClassB extends ClassA
{
    function Draw()
    {
        parent::InvokeDraw();

        /* Drawing code ... */

    }
} 
```

我面临的问题是**InvokeDraw()**不会调用父类的**Draw()**方法，而是扩展类自己的**Draw()**方法，从而导致无限循环。

尽管这个问题相当合乎逻辑，但我很难找到解决方法。如何完成这项任务？

## 想要的效果

![图表](../Images/5b8d6880400d3cd8e2ca05f1a14ead3f.png)

## 无限循环问题

![图表](../Images/0986de67e6babaf09e6e7c6a0f47dfba.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:18:37.000

从表面上看，继承就像合并代码一样。继承的方法是子类的一部分，就好像它们是该类的原生方法：

```
class A {

    public function foo() {
        echo 'foo';
    }

    public function bar() {
        echo 'bar';
    }

}

class B extends A { } 
```

出于所有意图和目的，这相当于编写：

```
class B {

    public function foo() {
        echo 'foo';
    }

    public function bar() {
        echo 'bar';
    }

} 
```

类`B`具有功能`foo`，`bar`就好像它们是其声明的一部分。

覆盖子类中的方法将一个特定的实现替换为另一个：

```
class B extends A {

    public function bar() {
        echo 'baz';
    }

} 
```

好像`B`是这样声明的：

```
class B {

    public function foo() {
        echo 'foo';
    }

    public function bar() {
        echo 'baz';
    }

} 
```

有一个例外：父方法的实现可以使用`parent`关键字获得。它不会改变执行代码的上下文，只是使用父方法的实现：

```
class B extends A {

    public function bar() {        public function bar() {
        parent::bar();      --->       echo 'bar';
    }                              }

} 
```

它在 的当前实例的相同上下文中工作`B`，它只是将父级的旧代码从以太中拉出来。

如果在父类的方法中调用另一个方法，它会在子类的上下文中执行，而不是在父类的上下文中。因为您还没有实例化父级，所以您正在处理一个子级。使用属性进行演示（与方法相同）：

```
class A {

    protected $value = 'bar';

    public function bar() {
        echo $this->value;
    }

}

class B extends A {

    protected $value = 'baz';

    public function bar() {
        parent::bar();     // outputs "baz"
        echo $this->value; // outputs "baz"
    }

} 
```

因此，您的问题没有解决方案。您不能在“父上下文”中调用方法。您可以在当前上下文中调用父级的代码，仅此而已。您正在创建的是一个简单的循环，因为代码是否被继承并不重要，它都在相同的上下文中工作。

您需要重新设计该类以不循环调用方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:36:35.770

这个是使用静态方法

```
<?php

class ClassA
{
    function Draw()
    {
        echo "DrawA";
        /* Drawing code ... */

    }

    function InvokeDraw()
    {
        self::Draw();
    }
}

class ClassB extends ClassA
{
    function Draw()
    {
        echo "DrawB";
        parent::InvokeDraw();

        /* Drawing code ... */

    }
}

echo "Begin:<br>";

$cb = new ClassB();
$cb->Draw(); 
```

请注意，我唯一更改的是`InvokeDraw()`方法并使用`self`它引用一个类，而不是像它一样的对象`$this`

输出：

```
Begin:
DrawBDrawA 
```

**编辑：** 为了回答您在下面的评论，我将简要说明您的代码如何工作以及该代码如何工作。

您的代码中会发生什么：

1.  我们创建`B`并开始使用它
2.  我们`B->Draw()`在`B`类 AND`B`对象中工作时调用。
3.  `B->Draw()``A::Invoke()`从类 A静态调用（这意味着类方法）**但**我们仍在使用`B`对象。
4.  静态调用`A::Invoke()`调用`$this->Draw();`，当我们当前使用`B`对象时，`$this`引用`ClassB`.
5.  在这里，我们开始循环。

上面的代码发生了什么：

1.  我们创建`B`并开始使用它
2.  我们`B->Draw()`在`B`类 AND`B`对象中工作时调用。
3.  `B->Draw()``A::Invoke`从类 A静态调用（这意味着类方法） ，**但**在您的代码中，我们仍在使用`B`对象。
4.  静态调用与`A::Invoke()`调用`self::Draw()`基本相同`ClassA::Draw()`，因为它是一个静态方法，所以我们不关心我们当前使用的对象是什么，我们调用`A`'`Draw()`方法。
5.  `A::Draw()`方法按照我们的需要执行。

我将在我的第二个答案中为代码提供相同的解释，它不使用静态调用：

1.  我们创建`B`并开始使用它
2.  我们`B->Draw()`在`B`类 AND`B`对象中工作时调用。
3.  `B->Draw()` **创建**`A`. _
4.  `B->Draw()`调用`A->Invoke()`，这意味着我们开始使用一个对象，它是类的实例，`A`而不是`B`像以前那样。

*在这一点上，我们完全忘记了`B`甚至存在并且只与`A`*

1.  `A->Invoke()`调用`$this->Draw()`这意味着我们正在调用`A->Draw()`，因为我们已经使用了类的实例`A`。
2.  `A->Draw()`按照我们的预期执行。

从可用性的角度来看，我们可以看到静态方法更好，因为我们可以定义一些静态属性，您可以在`A::Draw()`执行时使用它们。如果我们使用非静态方法，那么我们需要在方法的参数中传递我们需要的数据。

我希望这可以说清楚。上面的序列没有正确的术语，但它是故意写的，我认为这样更容易理解流程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T10:35:47.440

正如 deceze 所说，除非您重新设计课程，否则无法解决您的问题。

如果您使用的是 PHP 5.4，则可以使用[Traits](http://php.net/manual/en/language.oop5.traits.php)。

创建 2 个特征，每个特征都有自己的`Draw`功能。然后在父母身上使用一种特质，在孩子身上使用另一种特质。

然后，为了从子函数访问父函数，为父函数设置一个`InvokeDraw`别名`Draw`。

这是一个例子：

```
<?php

trait DrawingA
{
    function Draw()
    {
        echo 'I am the parent';
    }
}

trait DrawingB
{
    function Draw()
    {
        echo 'I am the child';
    }
}

class ClassA
{
    use DrawingA;
}

class ClassB extends ClassA
{
    use DrawingA, DrawingB {
        DrawingB::Draw insteadof DrawingA;
        DrawingA::Draw as InvokeDraw;
    }
}

$b = new ClassB();

echo 'Child: ',  $b->Draw(), PHP_EOL;
echo 'Parent: ', $b->InvokeDraw() . PHP_EOL;

/*
Outputs:

Child: I am the child
Parent: I am the parent

*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T08:52:07.840

我非常喜欢你的问题，所以我进行了一些研究，并尝试按照我的第一个答案做同样的事情，但没有静态调用：

```
<?php

class ClassA
{

    function Draw()
    {
        echo "DrawA";
        /* Drawing code ... */

    }

    function InvokeDraw()
    {
        $this->Draw();
    }
}

class ClassB extends ClassA
{

    function Draw()
    {
        echo "DrawB";
        $x = new parent;
        $x->InvokeDraw();

        /* Drawing code ... */

    }
}

echo "Begin:<br>";

$cb = new ClassB();
$cb->Draw(); 
```

输出：

```
Begin:
DrawBDrawA 
```

# objective-c - 视图应仅显示为纵向模式

> ID：13874953
> 
> 赞同：3
> 
> 时间：2012-12-14T08:20:58.193
> 
> 标签：objective-c, ios, uiinterfaceorientation

我有一个支持旋转到横向模式的视图控制器（VC1）。但是在下一个视图（VC2）中，我只想让它以纵向模式出现，我的意思是如果用户在横向模式下的 VC1 上并进入 VC2，那么它的视图会根据横向边界设置它们的框架。我不希望这样，我希望视图应该旋转 90 度，就像用户已经在 VC2 纵向模式下然后将设备上的方向更改为横向且 VC2 不支持自动旋转的情况一样。

我注意到只有当父视图控制器也不支持自动旋转时才会发生这种情况。如果父视图不支持自动旋转，则在横向模式下推送或呈现时，子视图将旋转 90 度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:06:10.190

我解决这个问题的方法是使整个项目仅显示为纵向，并且在我需要旋转的视图上，我将在 viewDidLoad 中设置一个 NSNotifier，如下所示。

```
NSNotificationCenter* nc = [NSNotificationCenter defaultCenter];
[nc addObserver:self selector:@selector(handleOrientationDidChange:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

然后我会像这样处理方向的变化：

```
-(void)handleOrientationDidChange:(NSNotification *)notification
{
UIDeviceOrientation interfaceOrientation = [[UIDevice currentDevice] orientation];

if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight)
{
    // Change view frame to fit landscape mode and rotate
} else {
    // Reset view frame to fit portrait mode and rotate back to orignal position
} 
```

我不知道这是否符合您的需求，但这是我如何处理 VC1 需要旋转但 VC2+ 不需要旋转的情况。

# php - javascript/ajax 下拉菜单在 IE 中不起作用

> ID：13874957
> 
> 赞同：0
> 
> 时间：2012-12-14T08:21:26.037
> 
> 标签：php, javascript, ajax, xmlhttprequest

我正在尝试根据类别选择列表中选择的内容将值添加到子类别的选择列表中。它似乎不适用于IE。任何人都可以提出这个问题吗？

我的代码在 firefox、Chrome、Opera 和 Safari 中正确工作，但在 IE7、8、9 中无效！

js代码：

```
<!-- Begin CHack For Ostan -->
function getOstan(str)
{
if (str.length==0)
  { 
  document.getElementById("SH_O").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("SH_O").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","listing.php?q="+str,true);
xmlhttp.send();
}
<!-- END -->
<!-- Begin CHack For City -->
function getSH_O(str)
{
if (str.length==0)
  { 
  document.getElementById("SH_C").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("SH_C").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","listing.php?z="+str,true);
xmlhttp.send();
}
<!-- END --> 
```

在法郎：

![在此处输入图像描述](../Images/847754d3bf333f02e7eac45c107da149.png)

如果 IE ：

![在此处输入图像描述](../Images/f81adb68a69cda63b0ee727037b46832.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:31:18.737

```
function getXHRequest() {
   try { return new XMLHttpRequest(); } catch(e) {}
   try { return new ActiveXObject("Msxml2.XMLHTTP"); } catch (e) {}
   alert("XMLHttpRequest not supported");
   return null;
 }

var xmlhttp = getXHRequest();
xmlhttp.open("GET","listing.php?z="+str,true);
xmlhttp.send(); 
```

但是，您应该考虑使用可以为您完成工作的库，例如 jQuery（经过测试、跨浏览器等）

```
$.ajax({url: "listing.php?z="+str}).done(function(data){
    $("SH_C").html(data);
}); 
```

# sql-server-2008 - 用于连接 3 个表的 sql 查询

> ID：13874960
> 
> 赞同：2
> 
> 时间：2012-12-14T08:21:41.730
> 
> 标签：sql-server-2008

表 A：用户名

表 B: accid userid accno

表c：loanid userid amt

嗨 frnds，我想从表 A 中获取客户的姓名，从表 B 中获取 accno 并且它们不包含在表 c 中。帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:57:07.450

```
SELECT a.name, b.accno
FROM a inner join b on b.userid = a.userid
where a.userid not in (select distinct userid from c) 
```

我认为这个查询怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:23:42.093

尝试：

```
SELECT a.name, b.accno
FROM tableA a 
JOIN tableB b on a.userid = b.userid
LEFT JOIN tableC c on a.userid = c.userid
WHERE c.userid IS NULL 
```

进行左连接并检查返回的值是否为空，检查表 c 中是否没有表 a 和表 b 中的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T08:25:28.050

**解决方案1：**

```
;with cte as
(Select a.name,b.accno,a.userid
from tableA a
join tableB b
on a.userid = b.userid)

select x.name,x.accno
from cte x 
where x.userid not in (select userid from tableC) 
```

**解决方案2：**

```
;with cte as
(Select a.name,b.accno,a.userid
from tableA a join tableB b 
on a.userid = b.userid)
select x.name,x.accno
from cte x 
where x.userid in(select c.userid 
                 from cte c 
                 except 
                 select tc.userid 
                from tableC tc) 
```

**解决方案 3**

```
;with cte as
(Select a.name,b.accno,a.userid
from tableA a join tableB b 
on a.userid = b.userid)

select x.name,x.accno
from cte x
left join tableC tc
on x.userid = tc.userid
where tc.userid is null 
```

# c++ - 文件中的 C++ 新行不起作用

> ID：13874964
> 
> 赞同：1
> 
> 时间：2012-12-14T08:22:16.150
> 
> 标签：c++

昨天我发布了一份关于必须使用 C++ 编写的新帐户程序的大合同。我的问题结束了，但我认为因为它有很多错误。通过当地 C++ 专家的大量工作和咨询，我修复了我们拥有的原始代码：

```
#include <accounting.h>
#include <stdio.h>

char *main()
{
    accounting bank = 100debits;
    bank = bank + 200debits;
    return printf("bal: %accounting\n", bank);
} 
```

我们定义的一些类的新版本运行良好，但唯一的问题是 C++ 无法将新行写入文件。下面的代码按原样工作，但如果我放回注释行，我没有输出到文件。

```
#include <stdlib.h> 
#include <stdio.h>
#include <cstring>
#define accounting float
#define print_accounting(x)  x "%0.2f"
#define debits * 1.0F
#define credits * -1.0F

int main()
{
    accounting bank = 100 debits;
    bank = bank + 200 debits;
    char my_bal[((unsigned short)-1)];
    sprintf(my_bal, print_accounting("bal:"), bank);
    char write_file[((unsigned short)-1)];
    write_file[NULL] = 0;
    strcat(write_file, "@echo ");
    strcat(write_file, my_bal);
//  strcat(write_file, "\n");  -- Wont work --
    strcat(write_file, " > c:\\SAP_replace\\bal.txt");
    system(write_file);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:26:43.403

`echo`将自动在文件末尾写入换行符。

如果你想要*两个*换行符，只需添加另一行类似于：

```
system ("echo. >>c:\SAP_replace\\bal.txt"); 
```

当前`system()`通话后。

或者，您可以抛弃生成另一个进程来执行输出的整个过时想法，而是使用`iostreams`来完成这项工作。这就是你*应该*在 C++ 中这样做的方式，例如：

```
#include <iostream>
#include <fstream>
int main (void) {
    float fval = 0.123f;
    std::ofstream os ("bal.txt");
    os << "bal: " << fval << '\n';
    os.close();
    return 0;
} 
```

输出：

```
bal: 0.123 
```

# sql-server-2008 - Sql中的不同行

> ID：13874965
> 
> 赞同：0
> 
> 时间：2012-12-14T08:22:35.123
> 
> 标签：sql-server-2008, distinct-values

以下是我的查询。此查询返回图像中显示的以下结果集![结果集](../Images/f9990fc2e6b3a6e789eef2f47bfffd43.png) 但我想要唯一的行。我怎样才能获得唯一的行？

```
Select
     distinct (tbl_Contract.ContractID),
     Tbl_Contract.KeyWinCountNumber,
     Tbl_Contract.ContractNumber,
     Tbl_Contract.ContractDate,
     Tbl_CountryFrom.CountryFromName,
     Tbl_CountryTo.CountryToName,
     tbl_Port.PortName,
     Tbl_Contract.Vans,
     Tbl_Contract.ContractID,
     Tbl_Item.ItemName,
     Tbl_Brand.BrandName,
     Tbl_Seller.SellerName,
     Tbl_Count.CountName,
     Tbl_Buyer.BuyerName

     from Tbl_Contract

     inner join Tbl_CountDetail
     on
     Tbl_CountDetail.ContractId = Tbl_Contract.ContractID
     inner join Tbl_Item
     on
     Tbl_Contract.ItemID = Tbl_Item.ItemID
     inner join Tbl_Brand
     on
     Tbl_Brand.BrandID = Tbl_Contract.ContractID
     inner join Tbl_Count
     on
     Tbl_CountDetail.CountId = Tbl_Count.CountID
     inner join Tbl_Seller 
     on
     Tbl_Seller.SellerID = Tbl_Contract.SellerID
     inner join Tbl_Buyer
     on
     Tbl_Buyer.BuyerID = Tbl_Contract.BuyerID
     inner join Tbl_CountryFrom
     on
     Tbl_CountryFrom.CountryFromID = Tbl_Contract.CountryFromID
     inner join Tbl_CountryTo
     on
     Tbl_CountryTo.CountryToID = Tbl_Contract.CountryToID
     inner join tbl_Port
     on
     tbl_Port.PortID = Tbl_Contract.PortID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:26:39.163

区别于`ContractId`?

您可以使用`ROW_NUMBER`并`PARTITION BY ContractId`仅选择每个组中的第一个：

```
WITH CTE AS
(
    SELECT C.*,
      ROW_NUMBER() OVER (PARTITION BY ContractId Order By ContractDate DESC)AS RN
    FROM Tbl_Contract C
)
SELECT * FROM CTE WHERE RN = 1 
```

请注意，您可以毫无问题地在 cte 中添加连接。为了提高可读性，我省略了它们。

# javascript - 复选框设置为单选按钮第二次单击故障

> ID：13874967
> 
> 赞同：1
> 
> 时间：2012-12-14T08:22:46.177
> 
> 标签：javascript, jquery, html

我创建了一个函数来将我的复选框设置为单选按钮，此外还可以取消选择它们。我遇到的问题是，当第二次单击同一个框时（不是快速双击），它什么也不做，就像它没有捕捉到事件一样。

它们以两个为倍数，共享名称。

```
checkbox name 1
checkbox2 name 1

checkbox3 name 2
checkbox4 name 2 .... 
```

这是我的功能，它运行良好，除了那个小故障。

```
$('#MyDiv').find('input[type="checkbox"]').click(function() {
    if (!$(this).is(':checked')) {
        $(this).prop('checked', false);
        return;
    }
    $('#MyDiv').find('input[type="checkbox"][name=' + $(this).attr('name') + ']').each(function() {
        $(this).prop('checked', false);
    });
    $(this).prop('checked', true);
}); 
```

html示例：

```
<div id="MyDiv">
    <div>
        <p>
            <input id="MyDivUsage_Yes" type="checkbox" name="MyDivUsage"  />
            <label for="MyDivUsage_Yes">Yes</label>
            <input id="MyDivUsage_No" type="checkbox" name="MyDivUsage" />
            <label for="MyDivUsage_No">No</label>
        </p>

    </div>
</div>​ 
```

出于某种原因，它不适用于 jsfiddle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:31:02.363

我猜它至少可以更有效：

```
$('#MyDiv').find('input[type="checkbox"]').on('click', function() {
    $('input[type="checkbox"][name="'+$(this).attr('name')+'"]').not(this).prop('checked', false);
});​ 
```

[**小提琴**](http://jsfiddle.net/4MVK5/1/)

或者更多的原生 JS：

```
$('input[type="checkbox"]', '#MyDiv').on('click', function() {
    var boxes = document.getElementsByName(this.name);
    for (var i=0; i<boxes.length; i++) {
        if (boxes[i] != this) boxes[i].checked = false;
    }
});​ 
```

[**小提琴**](http://jsfiddle.net/4MVK5/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:34:05.840

试试这个：

```
var checked = {};
    $('.desectable-radio').each(function (index) {
        checked[index] = this.checked;
        $(this).click(function () {
            if (checked[index])
                this.checked = false;
            for (var i in checked) {
                checked[i] = false;
            }
            checked[index] = this.checked;
        });
    }); 
```

小提琴：http: [//jsfiddle.net/dFDeX/1/](http://jsfiddle.net/dFDeX/1/)

# php - 正则表达式和重音

> ID：13874968
> 
> 赞同：4
> 
> 时间：2012-12-14T08:22:48.507
> 
> 标签：php, regex

我正在研究文字审查器。我有这段文字：

```
$str = "Je connais ce con de conémi". 
```

如果它是一个完整的单词，我想替换“con”，而不是另一个。

如果我这样做：

```
preg_replace("/\b(con)\b/i", "###", $str); 
```

结果是：

```
"Je connais ce ### de ###émi". 
```

Conémi 已被审查。这是因为 conémi 的“é”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:30:11.663

只需添加`u`正则表达式修饰符

```
preg_replace("/\b(con)\b/iu", "###", $str)
                          ^--- here it is 
```

或替代解决方案是使用 PCRE unicode 字符：

```
preg_replace("/(?<=\p{Z}|\p{P}|^)con(?=\p{Z}|\p{P}|$)/i", "###", $str); 
```

[http://ideone.com/cCoiNp](http://ideone.com/cCoiNp)

# linux - 为windows创建一个可执行的linux（例如LAMP）虚拟化？

> ID：13874969
> 
> 赞同：0
> 
> 时间：2012-12-14T08:22:53.093
> 
> 标签：linux, windows, webserver, executable, virtualization

我们正在为我们的一位客户在 TYPO3 Flow 中开发一个 Web 应用程序。通常，它应该在 Internet 上的 Web 服务器上运行，但也应该有 Windows 的离线版本。

我们的客户将在 Web 服务器上出售这个应用程序的两个版本，它与 Zend 一起编译/加密，因此他的客户无法更改代码或类似的东西。

我们对离线 Windows 应用程序的想法是，我们使用已安装的 apache 并可能使用预安装的浏览器创建一个可执行的 linux 虚拟化。所以用户只启动可执行文件，并且包将从浏览器指向 webapp 开始。

有什么解决方案吗，我认为类似于 VMWare ThinApp（但我认为这仅适用于 Windows 应用程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:44:17.353

或者，您可以构建一个基于 linux 发行版的可启动 USB 记忆棒，其中包含一些发行版（如 webconverger）的自定义版本，但用户必须重新启动才能使用它。

或者，您可以根据每个示例的 Turnkey Lamp Stack 自定义 Virtual Box 图像，但用户必须拥有 Virtual Box 的副本（这是免费的）。

您将如何处理数据持久性？

# iphone - 将 ios 本机与 phonegap 结合

> ID：13874972
> 
> 赞同：-7
> 
> 时间：2012-12-14T08:23:05.167
> 
> 标签：iphone, ios, cordova

我正在构建一个 ios 应用程序，因为我希望在 Instagram 应用程序中与 facebook、twitter 等共享一个页面。为此，我可以只在这个页面上使用 Phonegap 吗？我的其余页面都是原生 ios。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:16:14.703

看看在[iOS 上嵌入 Cordova WebView](http://docs.phonegap.com/en/2.2.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)。我还没有这样做，但它说您可以在项目中使用 Cordova 作为组件，因此您可以在任何时候调用 webview，而不是将其用作整个应用程序。

# linux - 作为 VM 自动重启 SLES11 SP1

> ID：13874974
> 
> 赞同：0
> 
> 时间：2012-12-14T08:23:19.157
> 
> 标签：linux, vmware, virtual-machine, suse

我有一个 SLES11 SP1（64 位）Linux 作为带有 VMWare Player 的 VM 安装。我试图将此 Linux 主机配置为在恐慌后自动重启。为此，我在 /etc/sysctl.conf 中添加了“kernel.panic=10”。重新启动后，当主机恐慌时，它不会自动重新启动。有人有想法吗？我也尝试在 ESXi 服务器上安装 SLES11 SP1（64 位），但结果相同。恐慌后我无法让它自动重启。我在另一个发行版（ubuntu 64bit）上尝试了相同的设置，但这些设置在这种情况下有效。如果我需要做其他设置，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:23:36.133

对于 ESXi 安装，您可以触发来宾虚拟机的自动重启，如下所示：转到配置部分 -> 虚拟机启动/关闭，然后您可以通过单击“属性”按钮添加虚拟机以进行自动启动，以便它重新启动自动地。您还可以为“自动启动”和“手动启动”定义“启动延迟”和“关机延迟”。

# c# - 按钮未在 asp.net 中触发

> ID：13874976
> 
> 赞同：0
> 
> 时间：2012-12-14T08:23:34.017
> 
> 标签：c#, asp.net, events

我在我的 asp.net 页面中没有触发按钮时遇到问题，我想知道是否有人可以让我看到这个问题。

首先你需要知道的是我使用 modalpopupexntender 来弹出面板，在最后一个面板上我开始动态地将控件添加到现有面板。

这是存在的面板，并且控件是动态添加的

```
<asp:ModalPopupExtender ID="ModalPopupExtender10" runat="server" TargetControlID="hndPage5" OkControlID="imgExitEdit1"
    PopupControlID="pnlReview" BackgroundCssClass="LoadingBackground" >
</asp:ModalPopupExtender>

<input type="hidden" runat="server" id="hndPage5" />
<asp:Panel runat="server" ID="pnlReview" CssClass="Modal450h450w" Height="300px">
    This is table
</asp:Panel> 
```

我开始从这段代码向上面的面板添加控件，这个事件也来自另一个带有按钮的 modalpopupextender：

```
protected void btnReview_Button_Click(object sender, EventArgs e)
    {
HtmlTable table = new HtmlTable();

        DataTable tblBillingAddress = Members.MemberBillingAddressSearch(MemberID);

        for (int i = 0; i < tblBillingAddress.Columns.Count; i++)
        {
            CreateRow(tblBillingAddress.Columns[i].ColumnName.ToString(), tblBillingAddress.Rows[0][tblBillingAddress.Columns[i].ColumnName].ToString(), table);
        }

        Button btn = (Button)sender;

        if (btn.ID == "btnIbanReview")
        {
            CreateRow("thing", thing.Text, table);
            CreateRow("other", other.Text, table);

        }
        else if (btn.ID == "btnrrTReview")
        {
            CreateRow("this", this.Text, table);              
        }

        Button btnBack = new Button();
        Button btnConfirm = new Button();

        btnBack.ID = "btnReviewClose";
        btnConfirm.ID = "btnReviewConfirm";

        btnBack.Text = "Back";
        btnConfirm.Text = "Confirm";

        btnBack.Click += new EventHandler(this.btnAdd_Close_Click);
        btnConfirm.Click += new EventHandler(this.btnConfirm_Click);

        HtmlTableCell cell1 = new HtmlTableCell();
        HtmlTableCell cell2 = new HtmlTableCell();
        cell1.Controls.Add(btnBack);
        cell2.Controls.Add(btnConfirm);
        HtmlTableRow rr = new HtmlTableRow();

        rr.Cells.Add(cell1);
        rr.Cells.Add(cell2);

        table.Rows.Add(rr);

        pnlReview.Controls.Add(table);
        pnlReview.Visible = true;
        ModalPopupExtender10.Show();
} 
```

这是 CreateRow() 方法：

```
private void CreateRow(string heading, string value, HtmlTable hTable)
    {
        HtmlTableRow row = new HtmlTableRow();
        HtmlTableCell cHeading = new HtmlTableCell();
        HtmlTableCell cValue = new HtmlTableCell();

        cHeading.InnerText = heading;
        cHeading.Style.Add("font-weight", "bold");
        row.Cells.Add(cHeading);                  
        cValue.InnerText = value;                
        row.Cells.Add(cValue);
        hTable.Rows.Add(row);            
    } 
```

这是我创建的事件：

```
void btnConfirm_Click(object sender, EventArgs e)
    {
        ModalPopupExtender10.Hide();
    } 
```

我尝试在 Page_Init()、Page_Onit() 和 Page_Load() 中创建按钮，稍后我在创建后添加控制面板。

任何帮助或视线将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:48:24.637

ModalPopupExtender 有一个属性 CancelcontrolID 或类似的东西......如果您要指定 TargetControlID，那么也指定 CancelControlID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:00:47.787

```
 <ajaxToolkit:UpdatePanel ID="UpdatePanel3" runat="server">
        <ContentTemplate>
            <asp:Button ID="fake2" runat="server" Style="display: none" />
            <Ajax:ModalPopupExtender ID="mpe_Mail" runat="server" BackgroundCssClass="modalBackground"
                TargetControlID="fake2" PopupControlID="pnl_Mail" CancelControlID="btn_Close">
            </Ajax:ModalPopupExtender>
            <asp:Panel ID="pnl_Mail" runat="server" Style="display: none;" CssClass="modalBackground1">
                <table width="350" border="0" align="center" cellpadding="0" cellspacing="0" style="background: #fff;">
                    <tr>
                        <div class="Lecture-Planform-headx">
                            <asp:Label ID="lbl_Employer" runat="server" />
                        </div>
                    </tr>
                    <tr>
                        <td align="center">
                            <div>
                                --This is table--
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div align="center">
                                <asp:Button ID="btn_Close" runat="server" CausesValidation="false" Text="Back" CssClass="activebutton2" OnClick="<--Add Your Function Hear-->" />
                            </div>
                        </td>
                    </tr>
                </table>
            </asp:Panel>
        </ContentTemplate>
    </ajaxToolkit:UpdatePanel> 
```

# c# - 如何安排重复任务以倒计时 Windows Phone 8 中的数字

> ID：13874981
> 
> 赞同：1
> 
> 时间：2012-12-14T08:23:56.570
> 
> 标签：c#, windows-phone, windows-phone-8

只要用户在一个特定的屏幕上，我只需要一个简单的任务就可以运行。在这个屏幕上有一个倒数计时器。

我调查了后台代理——但这似乎不是正确的方法。

基本上它应该是这样工作的：用户进入这一屏幕，按下开始，继续倒计时开始倒计时——每 30 秒更新一次是完全可以的。

我应该如何在 WP8 上执行此操作？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:35:00.860

wkempf 指出，您应该使用 DispatcherTimer。实际上创建非常简单。像这样的东西（你的xaml中有一个名为countText的TextBlock：

```
public partial class MainPage : PhoneApplicationPage
{
    private DispatcherTimer _timer;
    private int _countdown;

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        _countdown = 100;
        _timer = new DispatcherTimer();
        _timer.Interval = TimeSpan.FromSeconds(1);
        _timer.Tick += (s, e) => Tick();
        _timer.Start();
    }

    private void Tick()
    {
        _countdown--;

        if (_countdown == 0)
        {
            _timer.Stop();
        }

        countText.Text = _countdown.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:08:45.480

.NET 中有许多计时器。System.Windows.Threading.DispatcherTimer 可能是您想要的，但 System.Threading.Timer 也可能是您想要的。取决于您是要在后台还是在 UI 线程上运行周期性代码。

# c# - C# 中的日期时间 12 小时到 24 小时格式

> ID：13874983
> 
> 赞同：-2
> 
> 时间：2012-12-14T08:24:07.620
> 
> 标签：c#, sql

在 C# 中，我有一个非军事格式/12 小时的字符串，例如下午 1:50。我想把它转换成 13:50。如何在 C# 或 SQL 中实现这一点？我想为这个问题编写一个程序，但我想我可以在 C# 中找到一个函数。

sql 1:50 pm , 8:46 pm 中的简单 Varchar 列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:31:21.180

在 C# 中，您可以使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)格式字符串：

```
DateTime.ParseExact("1:50 PM", "h:mm tt", CultureInfo.InvariantCulture).ToString("HH:mm"); 
```

The default `ToString()` will give you your local representation (which might be AM/PM, too), so you need to use the explicit format string `"HH:mm"` to convert it to 24-hour format. Note that internally, the `DateTime` object doesn't care about AM/PM, this only comes into play when converting to a string, so in your debugger `DateTime` objects might still display as `"1:50 PM"` (depending on your locale).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:26:53.353

不确定，但试试这样

```
DateTime dt;
bool val= DateTime.TryParse("01:00 PM", out dt);
if(val)
dt.ToString("HH:mm"); 
```

如果这样做比尝试@Botz3000 回答中给出的文化选项更有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:27:42.010

使用 SQL SERVER 2008，您可以尝试类似

```
SELECT CAST('1:50 pm' AS TIME) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T08:27:44.577

如果你只是在谈论你已经拥有的日期的表示，你可以在里面使用不同的可用*DateTime*格式[来](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)`C#`欺骗它。

# asp.net - ASPxGridView EditForm 自定义

> ID：13874987
> 
> 赞同：0
> 
> 时间：2012-12-14T08:24:55.513
> 
> 标签：asp.net, devexpress, customization, edit, aspxgridview

我已经创建了一个 GridView，我想自定义编辑表单。我需要隐藏/删除或排列编辑中的项目。例如将文本框从左上角移动到右下角，或者从编辑表单中删除。

有可能的？

```
<EditForm>
            <div style="padding: 4px 4px 3px 4px">
                <dx:ASPxPageControl runat="server" ID="pageControl1" Width="100%" ActiveTabIndex="0">
                    <TabPages>
                        <dx:TabPage Text="Edit" Visible="true">
                            <ContentCollection>
                                <dx:ContentControl ID="ContentControl1" runat="server">
                                    <dx:ASPxGridViewTemplateReplacement ID="Edit" ViewStateMode="Enabled" ReplacementType="EditFormEditors"
                                        runat="server">
                                    </dx:ASPxGridViewTemplateReplacement>
                                    <div style="text-align: right; padding: 2px">
                                        <dx:ASPxGridViewTemplateReplacement ID="UpdateButton" ReplacementType="EditFormUpdateButton"
                                            runat="server">
                                        </dx:ASPxGridViewTemplateReplacement>
                                        <dx:ASPxGridViewTemplateReplacement ID="CancelButton" ReplacementType="EditFormCancelButton"
                                            runat="server">
                                        </dx:ASPxGridViewTemplateReplacement>
                                    </div>
                                </dx:ContentControl>
                            </ContentCollection>
                        </dx:TabPage>

                        <dx:TabPage Text="Edit2" Visible="true">
                            <ContentCollection>
                                <dx:ContentControl runat="server" SupportsDisabledAttribute="True">
                                </dx:ContentControl>
                            </ContentCollection>
                        </dx:TabPage>

                    </TabPages>
                </dx:ASPxPageControl>
        </EditForm> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:58:14.050

对的，这是可能的。这可以通过定义 ASPxGridView 的 EditFormTemplate 来完成。有两个演示项目展示了如何做到这一点：

[网格编辑 - 编辑表单模板](http://demos.devexpress.com/ASPxGridViewDemos/GridEditing/EditFormTemplate.aspx)

[网格编辑 - 双向绑定](http://demos.devexpress.com/ASPxGridViewDemos/GridEditing/TwoWayBinding.aspx)

这是帮助主题，它也可能对您有所帮助：

[GridViewTemplates.EditForm 属性](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewTemplates_EditFormtopic)

# c# - 如何在单元测试中强制 TryUpdateModel 返回 false

> ID：13874990
> 
> 赞同：0
> 
> 时间：2012-12-14T08:25:01.860
> 
> 标签：c#, asp.net-mvc, unit-testing, model

我需要在 asp.net mvc web 应用程序的单元测试中强制 TryUpdateModel 返回 false，但它总是返回 true。

我的控制器动作是：

```
public JsonResult SaveStep(string path, string title, string definitionOfDone, int limit, bool isNewStep)
{
    Step step = new Step();

    if (TryUpdateModel(step)){
        // code    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:29:31.920

只需在单元测试的*排列阶段*向模型状态添加一个错误：

```
_controllerUnderTest.ModelState.AddModelError("key", "error message"); 
```

`_controllerUnderTest.SaveStep`现在，当您在单元测试的*执行阶段*调用时，ModelState.IsValid 将返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T16:16:14.317

就我而言，我在确保 ModelState.IsValid 为真之后尝试调用 TryUpdateModel，因此向 ModelState 添加错误并没有帮助。在这种情况下，帮助我的是在视图模型中找到一个不可为空的字段，在安排单元测试时将该字段设置为 null，然后 TryUpdateModel 返回 false，即使 ModelState.IsValid 为单元测试返回 true。

# python - 使用 BaseSpider 编写爬虫以在 scrapy 中解析网站

> ID：13874992
> 
> 赞同：1
> 
> 时间：2012-12-14T08:25:11.563
> 
> 标签：python, scrapy

我对如何设计爬虫的架构感到困惑。

我有我有的搜索

1.  分页：要关注的下一页链接
2.  一页上的产品列表
3.  要抓取的单个链接以获取描述

我有以下代码：

```
def parse_page(self, response):
    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//ol[@id=\'result-set\']/li')
    items = []
    for site in sites[:2]:

        item = MyProduct()
        item['product'] = myfilter(site.select('h2/a').select("string()").extract())
        item['product_link'] = myfilter(site.select('dd[2]/').select("string()").extract())
        if  item['profile_link']:
                      request =  Request(urljoin('http://www.example.com', item['product_link']),
                      callback = self.parseItemDescription)

        request.meta['item'] = item
        return request

    soup = BeautifulSoup(response.body)
    mylinks= soup.find_all("a", text="Next")
    nextlink = mylinks[0].get('href')
    yield Request(urljoin(response.url, nextlink), callback=self.parse_page) 
```

问题是我有两个返回语句：一个 for `request`，一个 for `yield`。

在爬虫中，我不需要使用 last `yield`，所以一切正常，但`BaseSpider`我必须手动跟踪链接。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:46:29.933

作为初始阶段（并基于您对自己想要执行此操作的评论），我建议您查看[CrawlSpider 代码](https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/spiders/crawl.py)以了解如何实现其功能。

# c++ - 创建对象时出现“未定义的引用错误”

> ID：13874997
> 
> 赞同：0
> 
> 时间：2012-12-14T08:26:17.753
> 
> 标签：c++, heap, linker-errors, nodes

我的堆代码的第一部分：

```
Heap::Heap()
{
 MAX = 256;
 size = 0;
 data = new Hnode*[MAX];
} 
```

我的主要文件很简单：

```
#include <iostream>
#include <stdlib>
#include "heap.h"

int main()
{
 string encodedData = "abracadabra";
 Heap heap;
} 
```

当我调用创建堆时出现错误：未定义对 Heap::Heap 的引用，然后是我的析构函数：未定义对 Heap::~Heap() 的引用

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:49:22.133

假设您有类声明`heap.h`和定义`heap.cpp`

好像没有指定`heap.cpp`，因此链接器无法找到定义

尝试做`g++ main.cpp heap.cpp`

# c# - 找不到适合指定文化的任何资源

> ID：13874999
> 
> 赞同：2
> 
> 时间：2012-12-14T08:26:24.030
> 
> 标签：c#, resources, assemblies, embedded-resource, .net-assembly

我在它正在工作的其他系统中运行 QBSBM 项目。但不在我的。

我在 Google 中看到的链接很少。对于那里的建议，我做了一些更改，例如更改`BuildAction`设置`Embedded resource`和资源文件。并且`Access Modifier`也设置为`Public`（双击`.resx`文件打开文件，`Access Modifier`位于编辑器窗口顶部）。

找不到适合指定区域性或中性区域性的任何资源。确保在编译时`Manufacturing.Images.resources`正确嵌入或链接到程序集中。`QBSBM`或者所有需要的附属程序集都是可加载的并且是完全签名的。

谁能给我建议我该如何解决这个错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T07:31:34.393

您应该更改资源构建操作。为此，在解决方案资源管理器中，转到资源属性窗格并将构建操作从内容更改为嵌入式资源。