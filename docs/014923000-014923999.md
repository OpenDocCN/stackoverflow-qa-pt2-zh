# StackOverflow 问答 14923000-14923999

# javascript - 如何区分工厂对象和函数？

> ID：14923001
> 
> 赞同：1
> 
> 时间：2013-02-17T16:00:02.927
> 
> 标签：javascript

我了解到可以在 JavaScript（工厂函数）中创建对象的一种方法如下：

```
var newPerson=function(name){  
    var result = new Object();  
    result.name = name;  
    result.getName = function(){  
        return this.name;  
    };  
    return result;  
}; 

var personOne = newPerson("Diego");  
var personTwo = newPerson("Gangelo");  

console.log(personOne.getName()); // prints Diego  
console.log(personTwo.getName()); // prints Gangelo 
```

好吧，我在某个地方发现了一个函数可以创建如下：

```
var hello = new Function('alert("Hello, World!");'); 
```

那么，如果它们以相同的方式声明，我怎么能从函数中知道一个对象呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:02:21.547

> *“如果它们以相同的方式声明，我怎么能从函数中知道一个对象？”*

好吧...由于`Function`构造函数返回`function`对象，您可以简单地使用`typeof`它来测试它。

```
typeof hello === "function"; // true

typeof personOne === "function"; // false 
```

* * *

“工厂函数”只是您编写的返回新对象的函数的花哨术语。这是使用对象构造函数创建对象的另一种方法。

所以如果我想要一个创建新对象的函数，我可以使用一个函数作为构造函数，这需要我调用它`new`：

```
function MyObj() {
    this.foo = "bar"
}

var o = new MyObj(); 
```

* * *

或者我可以使用这个“工厂”模式：

```
function MyObj() {
    return {
        foo: "bar"
    }
}

var o2 = MyObj(); 
```

* * *

它们都创建了一个新对象，但第一种方法为您提供了一个额外的原型对象，您可以在不影响其他对象的情况下对其进行扩展。

这些方法都不是函数对象。

* * *

JavaScript 内置了用于创建原生对象和原语的构造函数。构造函数如：

*   `Function`
*   `Array`
*   `Object`
*   `RegExp`

...等等。

这些是内置在环境中的，可用于创建新的本机数据。但是 JS 也让你能够构建自己的构造函数。这就是我在上面的例子中所做的。

您自己的构造函数返回一个对象，但同样，它链接到一个干净的`prototype`对象，该对象可以扩展为从该构造函数创建的所有对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T16:04:36.217

如果有帮助，该行

```
var hello = new Function('alert("Hello, World!");'); 
```

本质上是一样的

```
var hello = function() { alert("Hello, World!"); }; 
```

...除了绑定方面的一些并发症。在实践中，几乎没有任何理由使用`new Function(...)`.

您可以使用几个选项来判断您正在处理的对象类型：

*   `typeof`提供了一个相当粗略的指示（在这种情况下，`"object"`vs `"function"`.）。

*   `Object.prototype.toString.call(whatever)`通过（对于规范定义的对象）为您提供更多信息，例如`[object Object]`or`[object Function]`或`[object Array]`.

更多在我的博客文章[*说什么？*](http://blog.niftysnippets.org/2010/09/say-what.html)它涉及弄清楚 JavaScript 中的内容（以及为什么您实际上很少需要这样做）。

# asp.net-mvc - 实体框架 - 代码优先 - 多个项目

> ID：14923004
> 
> 赞同：0
> 
> 时间：2013-02-17T16:00:26.437
> 
> 标签：asp.net-mvc, entity-framework-5

我有一个解决方案，其中包含三个项目：

```
ToDo.Web  
ToDo.Core  
ToDo.Data 
```

ToDo.Web 是我的启动项目，是一个 MVC 4 解决方案。
ToDo.Core 是一个类库解决方案，它包含我的所有类，如用户、任务等
。ToDo.Data 是我的数据存储库，包含我的 ToDoContext 模型。

我的 ToDoModel 模型如下所示：

```
namespace ToDo.Data
{
  public class ToDoModel : DbContext
  {
    public DbSet<Task> Tasks { get; set; }
    public DbSet<User> Users { get; set; }
  }
} 
```

我试图让项目在我本地安装的 SQL Server 2012 上创建我的数据库。所以在我的 web.config（在 ToDo.Web 项目中）我有以下连接字符串：

```
<add name="ToDo.Data.ToDoModel" connectionString="Data Source=XXX\YYY;Integrated Security=SSPI;initial catalog=ToDo" providerName="System.Data.SqlClient" /> 
```

然后我尝试从包管理器控制台执行以下命令：
Enable-Migrations -projectname ToDo.Data -StartUpProjectName ToDo.Web

该命令执行良好，没有错误。我可以在我的 ToDo.Data 项目中看到一个 Migrations 文件夹。但它只包含一个 Configuration.cs 文件，没有关于我的模型的信息。而且我也看不到在我的 SQL 服务器上创建的数据库。

我尝试创建一个简单的控制台应用程序，使用相同的连接字符串，它可以很好地工作。

我尝试在 ToDo.Data 项目中将连接字符串添加到我的 app.config 中，但没有成功。

谁能指导我正确的方向？

# dde - 我在哪里可以下载 DDESpy？

> ID：14923011
> 
> 赞同：5
> 
> 时间：2013-02-17T16:00:55.420
> 
> 标签：dde

我正在寻找旧的 DDESpy 工具。

有谁知道我在哪里可以下载它或类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T17:02:56.130

找到它： http: [//filedb.experts-exchange.com/incoming/2009/06_w26/153525/DDESPY.exe.txt](http://filedb.experts-exchange.com/incoming/2009/06_w26/153525/DDESPY.exe.txt) （重命名为exe，删除txt扩展名）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T16:21:54.640

它是 Visual Studio 6 的一部分，不能正式下载。您必须找到 VS6 的发行版。

[这个 MSDN 线程](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/7c51e728-b6a5-4862-a436-8beae33a60d1)讨论了用 Spy++ 替换它。

# javascript - 数组中的 JavaScript 字符串和对象

> ID：14923013
> 
> 赞同：1
> 
> 时间：2013-02-17T16:01:02.667
> 
> 标签：javascript, arrays, string, object

我正在尝试将一些 div 从初始位置动画到其他位置。

为此，我正在改编这个小提琴的代码：

[http://jsfiddle.net/c6UEm/27/](http://jsfiddle.net/c6UEm/27/)

我的代码是：

```
function animate(list, lft, top, callback) {

alert('list: '+list);

if (list.length === 0) {
    callback();
    return;
}
$el = list.shift();         // div ids
var lll = lft.shift();  // new value for left of this div (from lft array)
var ttt = top.shift();  // new value for top of this div (from top array)
$el.animate({"left": +lll+'px', "top": +ttt+'px'}, 1000, function () {
    animate(list, lft, top, callback);
});
} 
```

如果我将“列表”（div ids）硬编码如下；

```
    $('#TDA0mv'),$('#TDA1mv'),$('#TDA2mv'),$('#TDA3mv'),$('#TDA4mv'),$('#TDA5mv'),$( '#TDA6mv'),$('#TDA7mv'),$('#TDA8mv')

```

上面的警报会产生这种情况；

```
list: [object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object] 
```

根据需要工作。

如果我从隐藏字段中检索 id 并构建一个数组（甚至是一个然后拆分的字符串），我就有这个；

```
       $('#TDA0mv'),$('#TDA1mv'),$('#TDA2mv'),$('#TDA3mv'),$('#TDA4mv'),$('#TDA5mv'),$( '#TDA6mv'),$('#TDA7mv'),$('#TDA8mv')

```

在上述警报呼叫中是：

```
list:$('#TDA0mv'),$('#TDA1mv'),$('#TDA2mv'),$('#TDA3mv'),$('#TDA4mv'),$('#TDA5mv'),$('#TDA6mv'),$('#TDA7mv'),$('#TDA8mv') 
```

自然，这是行不通的。

有没有人知道为什么看似相同的数据对象如此不同？我怀疑这可能是 JSON 类型的事情，因为许多“类似”的查询都是这样回答的。但是，在这个方向上尝试了几件事后，我似乎仍然以字符串而不是“对象”结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:20:50.537

您没有解释如何传递 id，但您不能只使用`<input type="hidden" value="$('#id')" />`它，因为它将被解释为文本而不是 JQuery 对象。

你可以这样做：http: [//jsfiddle.net/c6UEm/28/](http://jsfiddle.net/c6UEm/28/)

```
<body>
  <div id="container">
    <div id="one" class="box"></div>
    <div id="two" class="box"></div>
    <div id="three" class="box"></div>
  </div>
    <!-- Create an input field-->
    <input type="hidden" id="list" value=""/>
</body>

$(document).ready(function () {
    //Assign id values
    $('#list').val('one,two,three');

    //Pass the list to your function
    animate($('#list').val().split(','), finished);
});

function finished() {
    $('body').append('Finished');
}

function animate(list, callback) {
    if (list.length === 0) {
        callback();
        return;
    }

    //Use id to use with JQuery
    $el = $('#' + list.shift());
    $el.animate({left: '+=200',top: '-=10'}, 1000, function () {
        animate(list, callback);
    });
} 
```

# google-app-engine - 对切 片或映射 GAE Go 中元素的重新排序或加扰顺序

> ID：14923017
> 
> 赞同：2
> 
> 时间：2013-02-17T16:01:21.923
> 
> 标签：google-app-engine, maps, go, slice

我有一个从数据存储区获取所有问题的代码：

```
queQ := datastore.NewQuery("Question")
questions := make([]questionData, 0)
    if keys, err := queQ.GetAll(c, &questions); err != nil {
                http.Error(w, err.Error(), http.StatusInternalServerError)
                return
        } 
```

我想以一种随机的方式一次显示这些问题。我想在 go(server) 中而不是在客户端中对问题切片进行重新排序。怎么可能打乱切片的顺序？我曾想过生成随机数，但我认为有一种简单的方法可以做到这一点。非常感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:19:39.820

在您的代码中，`keys`和`questions`是数据存储键和值的同步切片。因此，使用切片索引的随机序列来访问`questions`. 例如，要随机选择所有键和值切片，

```
package main

import (
    "fmt"
    "math/rand"
    "time"
)

type Key struct{}
type Value interface{}

func main() {
    keys := make([]*Key, 5)
    values := make([]Value, len(keys))
    rand.Seed(time.Now().Unix())
    for _, r := range rand.Perm(len(keys)) {
        k := keys[r]
        v := values[r]
        fmt.Println(r, k, v)
    }
} 
```

输出：

```
2 <nil> <nil>
3 <nil> <nil>
4 <nil> <nil>
0 <nil> <nil>
1 <nil> <nil> 
```

代码已修改为使用 rand.Perm 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:01:25.927

也许你可以使用包`math/rand`

```
randomQuestion:=questions[rand.Intn(len(questions)] 
```

# content-management-system - 什么是 Umbraco 后台，什么是 umbraco 后台扩展，它们是做什么的？

> ID：14923018
> 
> 赞同：4
> 
> 时间：2013-02-17T16:01:23.673
> 
> 标签：content-management-system, extension-methods, umbraco

什么是 Umbraco 后台，什么是 umbraco 后台扩展，它们是做什么的？

[http://our.umbraco.org/projects/backoffice-extensions?filter=free](http://our.umbraco.org/projects/backoffice-extensions?filter=free)

我正在尝试了解 Umbraco，并且将使用重要且流行的术语。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T16:40:17.457

umbraco 后台是您在[http://example.com/umbraco/](http://example.com/umbraco/)登录的区域。这是您管理站点、创建内容节点、管理用户等的地方。您还可以从这里管理您的模板和样式表。

后台扩展是其他用户扩展后台某些功能的软件包。这包括自定义数据类型（您添加到文档类型以在用户创建节点时从用户那里收集数据的内容），例如[Google Maps DataType](http://our.umbraco.org/projects/backoffice-extensions/google-maps-datatype)，或使后台办公室的生活更轻松的工具和实用程序，例如[FALM Housekeeping](http://our.umbraco.org/projects/backoffice-extensions/falm-housekeeping)。

**关于您的评论：**

可能有很多方法可以解决这个问题。

一个产品会有多个类别吗？如果没有，您可以创建一个类别文档类型，然后在每个类别节点下创建新的产品节点。您的宏将简单地列出所有护理节点。

否则，您可以在产品文档类型上放置一个数据类型，以允许您为其选择类别。多选列表框或复选框列表可能就足够了。如果客户端想要控制在这种情况下可用的类别，您可以使用[XPath CheckBoxList](http://ucomponents.codeplex.com/wikipage?title=XPathCheckBoxList&referringTitle=Documentation)。此方案的宏将简单地列出可用的类别，当您单击类别节点时，您将拥有另一个根据类别过滤产品的宏。

# javascript - 在 TideSDK 中创建文件

> ID：14923019
> 
> 赞同：2
> 
> 时间：2013-02-17T16:01:28.523
> 
> 标签：javascript, file, filesystems, tidesdk

我正在使用 TideSDK 创建一个应用程序，并且需要为项目创建文件。但是我找不到任何方法来创建文件。在 API 文档中，我看到了该函数`createDirectory()`。那会创建一个文件吗？如果没有，会怎样？

还是我以错误的方式解决这个问题？我应该将项目的数据存储在 SQLite 数据库中吗？我迷路了，请帮忙。

PS。如果有人知道关于 TideSDK 中文件系统的好教程，那将非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T01:50:23.013

```
//Doesnt have to exist yet.
var fileHandle = Ti.Filesystem.getFile('/path/to/file');
fileHandle.write('data'); 
```

您可以在此处查看实际使用示例：

[https://github.com/meeech/Shopify-Theme-Tool/blob/tidesdk-1.3/Resources/js/io.js#L101-L119](https://github.com/meeech/Shopify-Theme-Tool/blob/tidesdk-1.3/Resources/js/io.js#L101-L119)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T09:17:58.250

@meeech 的答案已被弃用，因为该方法已被 Filestream.write() 版本取代：1.1.0。现在应该通过以下方式完成：

```
var tmpFile = Ti.Filesystem.createTempFile();
var stream = Ti.Filesystem.getFileStream(tmpFile);
stream.open(Ti.Filesystem.MODE_WRITE);
stream.write("YOUR DATA");
stream.close(); 
```

# coffeescript - 尝试开发 CoffeeScript Singleton Fetcher

> ID：14923021
> 
> 赞同：3
> 
> 时间：2013-02-17T16:01:31.943
> 
> 标签：coffeescript, singleton

[我正在尝试基于CoffeeScript Cookbook](http://coffeescriptcookbook.com/chapters/design_patterns/singleton)中代表的想法开发 CoffeeScript Singleton Fetcher 。

该说明书描述了如何在 CoffeeScript 中实现一个单例类以及如何从全局命名空间中获取该类，如下所示：

```
root = exports ? this

# The publicly accessible Singleton fetcher
class root.Singleton
  _instance = undefined # Must be declared here to force the closure on the class
  @get: (args) -> # Must be a static method
    _instance ?= new _Singleton args

# The actual Singleton class
class _Singleton
  constructor: (@args) ->

  echo: ->
    @args

a = root.Singleton.get 'Hello A'
a.echo()
# => 'Hello A' 
```

**我正在努力开发的东西**

我正在尝试开发一种从 root.Singleton 对象中获取许多单例类的方法。像这样：

```
root = exports ? this 

# The publicly accessible Singleton fetcher
class root.Singleton
  _instance = undefined # Must be declared here to force the closure on the class
  @get: (args, name) -> # Must be a static method
    switch name
      when 'Singleton1' then _instance ?= new Singleton1 args
      when 'Singleton2' then _instance ?= new Singleton2 args
      else console.log 'ERROR: Singleton does not exist'

# The actual Singleton class
class Singleton1
  constructor: (@args) ->

  echo: ->
    console.log @args

class Singleton2
  constructor: (@args) ->

  echo: ->
    console.log @args

a = root.Singleton.get 'Hello A', 'Singleton1'
a.echo()
# => 'Hello A'

b = root.Singleton.get 'Hello B', 'Singleton2'
b.echo()
# => 'Hello B' 
```

目标是通过声明获得一个单例：

```
root.Singleton 'Constructor Args' 'Singleton name' 
```

**问题**

不幸的是，a.echo() 和 b.echo() 都打印了“Hello A”，它们都引用了同一个 Singleton。

**问题**

我哪里错了？我怎样才能像上面描述的那样开发一个简单的 Singleton fetcher？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:36:19.067

据我所见，您正在覆盖您的“单个”实例。因此，您至少需要一些容器来保存“许多”单例并稍后访问它们。

```
class root.Singleton
    @singletons = 
        Singleton1: Singleton1
        Singleton2: Singleton2
    @instances = {}
    @get: (name, args...) -> # Must be a static method
        @instances[name] ||= new @singletons[name] args... 
```

你所说的“fetcher”是一种工厂模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T08:57:28.093

感谢围绕`@args`/`args...`和单身人士的好例子。

只是对于像我这样的 CoffeeScript 新手，在这个例子中我们需要改变调用顺序（`args...`到最后）：

```
a = root.Singleton.get 'Singleton1', 'Hello A'
a.echo()
# => 'Hello A'

b = root.Singleton.get 'Singleton2', 'Hello B'
b.echo()
# => 'Hello B' 
```

# html - 右侧白色边框 (CSS)

> ID：14923022
> 
> 赞同：0
> 
> 时间：2013-02-17T16:01:34.577
> 
> 标签：html, css

我有以下CSS：

```
html, body{width:100%;margin:0;padding:0;} 
```

和

```
#wrap{margin: 0 auto;width:100%;} 
```

但是，当我加载页面时，我可以使用水平滚动条在浏览器右侧看到一个白色边框。我在我的身体和包裹周围添加了一个边框，它围绕着我的内容，但它不“包括”白色边框。这是为什么？我想删除这个烦人的错误。

编辑：我发现了问题。我有以下内容：

```
 <div class="section" id="home">
    <ul class="arrows">
        <li><a href="#test"><img class="arrows" src="/Content/arrows.png" alt="" /></a></li>
    </ul>
</div> 
```

我的 CSS 是：

```
#home ul.arrows{list-style-type:none;width:100%;position:absolute;bottom:40px;border:2px solid blue;}
#home img{width:34px;height:35px;display:none;border-style:none;} 
```

所以它占用了太多空间。如何在不使用宽​​度：100% 的情况下使图像居中？

# java - 在提供的字符串中查找各种子字符串

> ID：14923029
> 
> 赞同：0
> 
> 时间：2013-02-17T16:02:19.250
> 
> 标签：java, python, algorithm

我的面试问题得到了这个。给定一个字符串数组和一个字符串（干草堆），获取该字符串数组并找出数组中的每个字符串是否是干草堆的子字符串的最快算法是什么。我认为最快的算法是找到 haystack 的所有子字符串并将它们存储在一个集合中，然后检查数组中的每个字符串是否属于集合，但被告知这不是最快的方法。

然后，更难的问题：返回大海捞针中第一次出现子字符串的索引。由于我没有得到正确的第一部分，所以我在这一部分上苦苦挣扎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:05:48.410

听起来像是[Aho-Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)算法的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:34:23.177

[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)？我相信您既可以测试子字符串并获得它们的起始索引。

# cakephp - 在一个查询中保存许多 habtm 关联

> ID：14923031
> 
> 赞同：0
> 
> 时间：2013-02-17T16:02:38.750
> 
> 标签：cakephp

我有`User`模型和`Speciality`模型。`Speciality HABTM User`.

给定`speciality_id`和数组`user_id`我想将许多用户添加到给定的专业中。到目前为止，我尝试过：

```
foreach($users as $user_id) {
    $data[] = array(
        'Speciality' => array('id' => $this->Speciality->id),
        'User' => array('id' => $user_id),
    );
}
if(!empty($data)) {
    $this->Speciality->saveAll($data);
} 
```

但它只保存`specialities_users`表中的一行，而不是所有的关联......我的目标可以通过使用 (speciality_id,user_id) 对大插入到 specialities_users 表中来实现，但我想在 Cake 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:49:08.017

看我对这个问题的回答，基本一样。

您必须创建数组（不创建它会更新），检查它是否已经在数据库中 - 如果没有，请保存它。

看这里：

[Cakephp登录后将会话保存到数据库](https://stackoverflow.com/questions/14854806/cakephp-save-session-to-db-after-login)

# ruby-on-rails - 模型中控制器中的访问方法

> ID：14923034
> 
> 赞同：0
> 
> 时间：2013-02-17T16:03:04.310
> 
> 标签：ruby-on-rails, ruby, methods, model

刚开始使用 Rails，想知道如何访问我的模型中的方法。

在控制器中，我尝试以下操作： `@testString = Work.testMethod`

```
class Work < ActiveRecord::Base<br>
  def testMethod
    return "string from test method"
  end
end 
```

这会导致“WorksController#index 中的 NoMethodError”（未定义的方法）。我将不胜感激。

而且..为什么在脚手架“工作”时rails会在控制器名称后附加一个“s”？模型名称是 Work，控制器是：works_controller

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:06:02.950

使用`self`：

```
class Work < ActiveRecord::Base
   MY_MESSAGE = "ALL THE BEST"

   def self.testMethod
     return "string from test method"
   end
end 
```

`self`用于调用类级别的方法。现在您可以在任何地方调用它，如下所示：

```
Work.testMethod #=> "string from test method"
Work::MY_MESSAGE #=> "ALL THE BEST" 
```

如果您使用`instance_level`需要创建实例的方法，`class`那么您可以在对象上调用方法。但是模型实例是在您想要创建新记录时创建的，所以我更喜欢`self`在您不想创建记录时使用方法。

如果您有记录，您可以调用：

```
 class Work < ActiveRecord::Base
   def testMethod
     return "string from test method"
   end
end

work_record = Work.find(your_condition)
work_record.testMethod 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:09:46.947

您所说的概念是引入一种`class`方法。该方法需要在关键字`Work`的帮助下在类本身上定义。`self`

可以按如下方式完成：

```
class Work < ActiveRecord::Base
   def self.testMethod
     return "string from test method"
   end
end 
```

要回答您的第二个问题，Rails 是一个固执己见的框架，它强制采用复数您的控制器和表名称的模式。这确实是为了在语法上更正确。

如果您想调整复数形式，可以使用[Inflections](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html)来实现。

# java - 如何在操作完成之前隐藏按钮？素面

> ID：14923037
> 
> 赞同：3
> 
> 时间：2013-02-17T16:03:15.967
> 
> 标签：java, jsf, file-upload, primefaces

我目前有一个文件上传系统，目前我有一个按钮可以将用户带到下一页，但即使用户没有上传任何内容，这也是可见的，如果用户在上传任何内容之前按下它，危险就在这里它会抛出一个错误并且看起来很糟糕，所以我想要做的是隐藏这个按钮，直到文件上传成功，有什么想法吗？

```
<p:fileUpload widgetVar="upload" fileUploadListener="#{fileUploadController.handleFileUpload}"
                                  mode="advanced" 
                                  multiple="false" 
                                  update="messages"
                                  label="Select File"
                                  sizeLimit="100000000" 
                                  allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|txt|pdf|html)$/"
                                  auto="true"/> 
                    <!-- selected auto="true" this has been selected to prevent user error as was discovered 
                    when testing, some users pressed the upload button and wondered why nothing worked instead of
                    select file, now this stops this -->

                    <p:growl id="messages" showDetail="true"/>

                    Please press the button below once you have uploaded the file, to continue

                    <p:commandButton action="#{navigationBean.naviagtion}"   value="Next"  ajax="False"/> 
```

下一步操作的命令按钮是我希望在文件上传完成之前禁用的按钮

编辑 ：

```
<p:commandButton action="#{navigationBean.naviagtion}"   value="Next"  ajax="False" disabled="#{!fileUploadController.UploadComplete}"/> 
```

是我的命令按钮，它指向 fileUploadContoller，这是文件上传发生的地方等，

问题是当我运行应用程序时，我总是在页面加载时获得一个实时按钮

我在我的 fileUploadController 上添加了一个布尔值：

```
 public void handleFileUpload(FileUploadEvent event) {
        //System.out.println("DesintationPDF : " + destinationPDF);
        System.out.println("called handle file");
        System.out.println("Destination is : " + configProp.getProperty("destination"));

        FacesMessage msg = new FacesMessage("Succesful", event.getFile().getFileName() + " is uploaded."); //Displays to user on the webpage
        FacesContext.getCurrentInstance().addMessage(null, msg);

        try {
            copyFile(event.getFile().getFileName(), event.getFile().getInputstream());
        } catch (IOException e) {
//handle the exception
            e.printStackTrace();
        }

    }

    public boolean isUploadComplete() {
        return uploadComplete;
    }

    public void setUploadComplete(boolean uploadComplete) {
        this.uploadComplete = uploadComplete;
    } 
```

但仍然得到错误

编辑 2：

```
 <p:commandButton action="#{navigationBean.naviagtion}"   value="Next" disabled="#{!fileUploadController.uploadComplete}"/> 
```

控制台

```
INFO: Upload complete value before copy file false
INFO: upload complete value is : true 
```

所以它将值更改为true

但没有将按钮更改为活动

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T16:18:01.803

要在上传完成之前禁用按钮，只需将`disabled`属性绑定到 bean 中的属性。在我看来，禁用似乎比突然渲染它更直观。用户也将知道后台发生了一些事情。

```
 <p:commandButton action="#{navigationBean.naviagtion}" value="Next" disabled="#{bean.disable}" ajax="False"/> 
```

由于您使用 PrimeFaces，因此此解决方案是最简单的。只需替换`bean`为您的 bean 的名称。

编辑：

```
public class YourNavigationBean {

    private boolean uploadComplete; // <--- that's the property

    // ... your bean content, like constructors and stuff..
    // ...

    //a setter and a getter is needed, to here they are
    public boolean isUploadComplete() {
       return uploadComplete;
    }
    public void setUploadComplete(boolean uploadComplete) {
       this.uploadComplete = uploadComplete;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:09:07.480

使下一个按钮不可见。在开始时保持一个 flag = false，在成功上传文件后将 flag 设为 true。或在文件上传结束时使下一步按钮可见；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:16:51.763

ON 上传完成事件设置 display=block。

HTML

```
<form action="#" method="post">
    <input type="file" name="fileInput" id="fileInput" />
    <input type="submit" id="submitbutton" value="submit" style="display:none" />
</form>
<div id="result"></div> 
```

Javascript：

```
$(document).ready(
    function(){
        $('input:file').change(
            function(){
                if ($(this).val()) {
                   document.getElementById("submitbutton").style.display='block'; 
                } 
            }
            );
    }); 
```

现场演示：http: [//jsfiddle.net/E42XA/205/](http://jsfiddle.net/E42XA/205/)

# java - Java 7 复制文件例程完全失败

> ID：14923038
> 
> 赞同：-3
> 
> 时间：2013-02-17T16:03:16.583
> 
> 标签：java, html, file, copy, java-7

我已经从许多地方复制了被认为是使用 Java 7 将文件从 A 复制到 B 的正确脚本。我已经下载了 Java 7，并且在运行该页面时绝对没有任何反应。我正在做（或者可能没有做）一些非常基本但错误的事情。你能告诉我我需要什么吗？我正在使用这个脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0
Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="generator" content="CoffeeCup HTML Editor (www.coffeecup.com)" />
<meta name="created" content="Sun, 17 Feb 2013 15:50:39 GMT" />
<meta name="description" content="" />
<meta name="keywords" content="" />

  </head>
  <body>
<Script>
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.StandardCopyOption;

public class Copier {
 public static void main(String[] args) throws IOException {
     //Copy file /foo/x.txt to /bar directory
     String source = "C:/Users//Mike/test.txt";
     String target = "C:/Users/Mike/test1.txt";
     Copier.copyFile(source, target);
 }

    public static void copyFile(String source, String target) {
     try {
         Files.copy(new File(source).toPath(), new File(target).toPath(),
             StandardCopyOption.REPLACE_EXISTING);
     } catch (IOException e) {
         e.printStackTrace();
     }
 }
 }

 </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T16:15:23.693

```
<script>
(java code)
</script> 
```

你不能那样做。您必须使用编译代码`javac`然后运行它`java`。

这是一个例子：

```
cd C:/path/to/the/file/
javac TheFileName.java
java TheFileName 
```

**Java*不是*Javascript！**

# python - Python 中用于匹配 CSV 文件中的字符串的正则表达式

> ID：14923044
> 
> 赞同：0
> 
> 时间：2013-02-17T16:04:05.833
> 
> 标签：python, regex

我正在使用 Python 中的正则表达式。我想匹配插入数据库的 CSV 文件中的几行，该数据库以下划线开头和结尾。

我在我的 Python 脚本中使用了正则表达式来执行相同的操作，但它会将结果打印为“无”。这是我的代码，请告诉我我犯了什么错误：

```
reg = re.compile(r'^_.*_$',re.I)
imatch = reg.match(unicode(row[4], "utf8")) 
```

这`r'^_.*_$',re.I`是我的正则表达式，用于匹配以 _ 开头和结尾的行。`unicode(row[4], "utf8")`指定插入数据库的 CSV 文件中的行。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:29:24.040

```
import re
lines = [line.strip() for line in open('file.csv')]
for x in lines:
    match=re.search(r'^_.*_$',x)
    if match: print x 
```

我们必须剥离每一行，否则每一行都以 char '\n' 而不是 '_' 结尾，在这种情况下，正则表达式将与字符串不匹配。

文件.csv

```
_abdlfla_
sldjlfds_
_adlfdls
_132jdlfjflds_ 
```

输出

```
_abdlfla_
_132jdlfjflds_ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:35:57.030

您可以使用startwith 和endwith 函数而不是re。使用 re 的任何具体原因？

```
for l in open('test.csv'):
    l=l.strip()
    if l.startswith('_') and l.endswith('_'):
        print(l) 
```

# lua - 如何将图片设置为表格值？（爱2d）

> ID：14923048
> 
> 赞同：-1
> 
> 时间：2013-02-17T16:04:53.177
> 
> 标签：lua, love2d

我正在为 Love2d 中的游戏制作开始菜单。当然，我需要用于“开始游戏”和“退出游戏”的按钮。我知道如何为按钮使用文本，但我不知道如何使用实际图片。我以[本教程](http://www.youtube.com/watch?v=iQc7csvghrM&playnext=1&list=PL1E781C07DF94A786&feature=results_video)为基础。

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:09:58.537

您将希望将菜单图像加载到`love.load()`函数中并在函数中绘制它`love.draw()`。

例如，我创建了一个名为 menu.lua 的文件，其中保存了所有相关的菜单数据。menu.lua 开始`menu = {}`，它将创建一个名为`menu`. 然后，在 menu.lua 中：

```
function menu.load()
    menu.start.img = love.graphics.newImage("start.jpg") -- load start.jpg
    menu.exit.img = love.graphics.newImage("exit.jpg") -- load exit.jpg
end

function menu.draw()
    love.graphics.draw(menu.start.img,x,y) -- draw start.jpg at (x,y)
    love.graphics.draw(menu.exit.img,x,y) -- draw exit.jpg at (x,y)
end 
```

之后，您在 main.lua 文件中调用`menu.load()`和。`menu.draw()`

这就是您将图像加载到表格中并绘制它的方式。

[LOVE wiki](https://www.love2d.org/wiki/love)可以帮助您解决这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:27:59.867

首先，用于`img = love.graphics.newImage('filename_here.png')`将图像加载到变量`img`中。然后，使用`love.graphics.draw(img, 50, 50)`在坐标 50、50 处绘制该图像。确保只加载图像一次。如果你

# c++ - 令牌错误之前的预期 unqualified-id

> ID：14923049
> 
> 赞同：0
> 
> 时间：2013-02-17T16:04:55.403
> 
> 标签：c++

我从 C++ 开始，但我无法弄清楚。我有三个类，正在尝试实现一个队列。（不管它现在是否有效，我只需要修复这个错误）

```
#include <cstdlib>
#include <iostream>
#include "queue.h"

using namespace std;

int main(int argc, char** argv) {

    queue fronta();

    queue.add(10); // <- expected unqualified-id before ‘.’ token
} 
```

队列.h：

```
#ifndef QUEUE_H
#define QUEUE_H

#include "queueItem.h"

class queue {
private:
    queueItem* first;
    queueItem* last;

public:
    queue();
    void add(int number);
    int get(void);
    bool isEmpty();
};

#endif  /* QUEUE_H */ 
```

queueItem.h：

```
#ifndef QUEUEITEM_H
#define QUEUEITEM_H

class queueItem{
private:
    int value;
    queueItem* next;

public:
    queueItem(int value);

    int getValue();
    queueItem* getNext();
    void setNext(queueItem* next);
};

#endif  /* QUEUEITEM_H */ 
```

从我用谷歌搜索的内容来看，它通常与无关的分号、括号等有关。不过我什么也没找到

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:06:04.373

你不能调用`.add()`类类型`queue`，你需要在你创建的对象上调用它！在你的情况下，那将是`fronta.add(10);`.

此外，您的创建语法`fronta`是错误的。使用`queue fronta;`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T16:07:00.597

该行`queue fronta();`声明了一个函数，该函数返回一个类型的对象`queue`并且不接受任何参数。这可能不是您想要的。改为使用`queue fronta;`。

`add()`其次，您必须在 的*实例*上调用函数`queue`，而不是在类本身上调用函数（如果函数是`static`就是这种情况，但在这种情况下您将使用`::`而不是`.`）。所以：

```
queue.add(10); // ERROR!
fronta.add(10); // OK 
```

# android - 使用 scrollTo ListView 时不会刷新，但手动滚动时会刷新

> ID：14923055
> 
> 赞同：5
> 
> 时间：2013-02-17T16:05:17.353
> 
> 标签：android, android-listview

通过根据行号（在适配器的 getView() 中）设置文本框的颜色，我为 ListView 中的不同行设置了不同的颜色。现在，当我手动向上滚动 ListView 时，正确的颜色会显示在显示的底行中。但是当我使用 scrollTo 时，这不会发生，所有显示的行都具有相同的颜色（它们没有更新）。

有人遇到过这个问题吗？这似乎令人费解！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-22T16:58:32.583

`ListView#scrollTo`不滚动列表内容。（这是一种标准的 View 方法，根本不特定于列表：它会滚动 ListView 视图本身。）

相反，请尝试使用`ListView#setSelectionFromTop(0, int y)`滚动。

`ListView#scrollListBy(int y)`如果您正在为 KitKat 及更高版本编程，API 19+ 有一个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T06:38:47.897

在我们的项目`ListView#setSelectionFromTop(0, int y)`中没有任何影响。所以我们以兼容的方式破解了这个：

```
class Hacks {

static {
    Method trackMotionScroll = null;
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT) {
        try {
            trackMotionScroll = AbsListView.class
                    .getDeclaredMethod("trackMotionScroll", int.class, int.class);
            trackMotionScroll.setAccessible(true);
        } catch (NoSuchMethodException e) {
            Exceptions.crash(e);
        }
    }
    listViewTrackMotionScroll = trackMotionScroll;
}

public static void scrollListBy(ListView listView, int y) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
        listView.scrollListBy(y);
    } else {
        try {
            listViewTrackMotionScroll.invoke(listView, -y, -y);
        } catch (Exception e) {
            Exceptions.crash(e);
        }
    }
}
} 
```

# python - python pyc only modules 导致 ImportError: No module named

> ID：14923056
> 
> 赞同：1
> 
> 时间：2013-02-17T16:05:20.230
> 
> 标签：python, import, module, pyc

我有一个只有 .pyc 文件的文件夹“模块”（还有一个**init** .pyc）

```
module/
  __init__.pyc
  one.pyc
  two.pyc

test.py 
```

`test.py`包含导入行：

```
import module.one 
import module.two 
```

或者

```
from module import one
from module import two 
```

都会失败。只要

```
import module 
```

工作，但不能访问文件`one`和`two`

任何提示？

。F

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T16:06:15.653

我认为您不能导入“.pyc”文件。您需要将“.py”文件放在模块文件夹中。

# php - 用于替换撇号中的逗号和换行符的 PHP 正则表达式

> ID：14923064
> 
> 赞同：0
> 
> 时间：2013-02-17T16:06:06.697
> 
> 标签：php, regex

我需要编写一个正则表达式来查找撇号中的字符串并用空格替换换行符和逗号。我不擅长正则表达式。有人可以帮忙吗？我相信我正在使用 preg_replace 函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:00:11.323

这可以应用于所有*（分解的）*`newlines`变量，并且`commas`仅当变量中有双引号时才会替换：

```
$field=preg_replace('/(\r\n|\n|\,)+(?=.*")/gms',' ',$field); 
```

带引号示例的解释演示：[http ://regex101.com/r/bU2oX5](http://regex101.com/r/bU2oX5) *（将替换）*

不带引号的解释演示示例：[http ://regex101.com/r/iQ8yY9](http://regex101.com/r/iQ8yY9) *（不会替换）*

**选项 2**

先检查变量中是否有双引号：

```
if (strpos($field,'"')!==FALSE) $field=preg_replace('/(\r\n|\n|,)+/g',' ',$field); 
```

# mysql - 如何从联合结果中进行选择？

> ID：14923077
> 
> 赞同：2
> 
> 时间：2013-02-17T16:07:21.270
> 
> 标签：mysql

我有一个这样的 MySQL 脚本：

```
SELECT ... FROM ... WHERE ...
UNION ALL
SELECT ... FROM ... WHERE ... 
```

现在如何从联合结果中再次选择？

这不起作用：

```
SELECT * FROM (
    SELECT ... FROM ... WHERE ...
    UNION ALL
    SELECT ... FROM ... WHERE ...
); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T16:14:30.283

您需要为内部查询设置一个别名：

```
SELECT * FROM (
    SELECT ... FROM ... WHERE ...
    UNION ALL
    SELECT ... FROM ... WHERE ...
) as something; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:09:26.780

我想你在问这个：

```
 SELECT * FROM (
      SELECT ... FROM ... WHERE ...
      UNION ALL
      SELECT ... FROM ... WHERE ...
    )
    WHERE ... 
```

# java - HttpSocket 在我的 Android 设备上不起作用

> ID：14923078
> 
> 赞同：2
> 
> 时间：2013-02-17T16:07:33.080
> 
> 标签：java, android

以下代码应访问网站并读取 XML 并将其显示在布局上。在模拟器上运行正常时，不知何故无法在我的 Android 上运行。有人可以告诉我为什么它不起作用，我应该怎么做才能纠正它？

爪哇：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}
public void connect (View v){
    TextView mTextView = (TextView) findViewById(R.id.textView1);

        try {
            Socket mySocket = new Socket("www.ynet.co.il", 80);
            InputStream in = mySocket.getInputStream();
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));

            String line = "";
            String output = "";
            while ((line = reader.readLine()) != null) {
                output += line;
            }
            mTextView.setText(output);

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

}

public void good (View v){
        TextView mTextView = (TextView) findViewById(R.id.textView1);
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet("http://www.boi.org.il/currency.xml?curr=01");

        try {
            HttpResponse response = client.execute(request);
            HttpEntity entity = response.getEntity();
            InputStreamReader in = new InputStreamReader(entity.getContent());
            BufferedReader reader = new BufferedReader(in);

            String line = "";
            String output = "";
            while ((line = reader.readLine()) != null) {
                output += line;

                if (line.contains("RATE")) {
                    StringTokenizer tokens = new StringTokenizer(line,"><");
                    String token = tokens.nextToken();
                    String token1 = tokens.nextToken();
                    String token2 = tokens.nextToken();
                    mTextView.setText("The USD/ILS Rate is: "+token2);
                }
            }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

这是 LogCat：

```
02-17 17:55:39.165: D/dalvikvm(14064): Late-enabling CheckJNI
02-17 17:55:39.225: I/dalvikvm(14064): Turning on JNI app bug workarounds for target SDK version 10...
02-17 17:55:39.280: W/ActivityThread(14064): Application com.example.httpsocket can be debugged on port 8100...
02-17 17:55:40.905: D/AndroidRuntime(14064): Shutting down VM
02-17 17:55:40.905: W/dalvikvm(14064): threadid=1: thread exiting with uncaught exception (group=0x410ed2a0)
02-17 17:55:40.935: E/AndroidRuntime(14064): FATAL EXCEPTION: main
02-17 17:55:40.935: E/AndroidRuntime(14064): java.lang.IllegalStateException: Could not execute method of the activity
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.view.View$1.onClick(View.java:3691)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.view.View.performClick(View.java:4211)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.view.View$PerformClick.run(View.java:17267)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.os.Handler.handleCallback(Handler.java:615)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.os.Looper.loop(Looper.java:137)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at java.lang.reflect.Method.invokeNative(Native Method)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at java.lang.reflect.Method.invoke(Method.java:511)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at dalvik.system.NativeStart.main(Native Method)
02-17 17:55:40.935: E/AndroidRuntime(14064): Caused by: java.lang.reflect.InvocationTargetException
02-17 17:55:40.935: E/AndroidRuntime(14064):    at java.lang.reflect.Method.invokeNative(Native Method)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at java.lang.reflect.Method.invoke(Method.java:511)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.view.View$1.onClick(View.java:3686)
02-17 17:55:40.935: E/AndroidRuntime(14064):    ... 11 more
02-17 17:55:40.935: E/AndroidRuntime(14064): Caused by: android.os.NetworkOnMainThreadException
02-17 17:55:40.935: E/AndroidRuntime(14064):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-17 17:55:40.935: E/AndroidRuntime(14064):    at com.example.httpsocket.MainActivity.good(MainActivity.java:63)
02-17 17:55:40.935: E/AndroidRuntime(14064):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:10:38.350

当您尝试访问网络（即在主线程上打开 HttpConnection）`NetworkOnMainThreadException`时，在运行 android 的设备上会发生很好的情况。`API 11`

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

所以它可以在你的模拟器上运行，因为很可能它的 API 少于 11，并且你的设备有更新的 API。

要解决它，请使用`AsyncTask`网络连接或专用线程，[请参阅此问题](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

# html - 谷歌地图占据整个高度

> ID：14923080
> 
> 赞同：1
> 
> 时间：2013-02-17T16:07:46.287
> 
> 标签：html, css, web

这是我正在使用的代码，但我不明白我哪里出错了。地图应显示在页眉和页脚之间的全高，但它似乎实际上延伸到页眉和页脚下方。这是一个问题，因为它掩盖了谷歌的版权信息和部分控件。

[http://jsfiddle.net/GFcBU/9/](http://jsfiddle.net/GFcBU/9/)

谁能告诉我我哪里出错了？

```
html, body, #container { height: 100%; }
body { z-index:1; position:relative; }
body > #wrapper { height:100%; margin:0 auto; width:100%; }
body > #wrapper > #header { z-index:3; position:relative; height:45px; background:#ccc; }
body > #wrapper > #container { z-index:2; position:relative; height:auto; min-height:100%; background:#eee; margin-top:-45px; padding-top:45px; padding-bottom:25px; box-sizing:border-box; margin-bottom:-25px; }
body > #wrapper > #footer { height:25px; background:#333; color:#fff; z-index:3; position:relative; }

.left {float: left;}
.right {float: right;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:21:58.590

请尝试以下方法：

```
body > #wrapper > #container { 
  z-index:2; 
  position:absolute; 
  top: 45px; 
  bottom: 0; 
  height:auto; 
  background:#eee; 
  box-sizing:border-box; 
  margin-bottom: 25px; 
  width: 100%;
}

body > #wrapper > #footer { 
  height:25px; 
  background:#333; 
  color:#fff; 
  z-index:3; 
  position:absolute; 
  bottom: 0; 
  width: 100% 
} 
```

这是 jFiddle：http: [//jsfiddle.net/G3Pxy/](http://jsfiddle.net/G3Pxy/)

对于容器，我添加`position: absolute`了`top: 45px`和`bottom: 0`。当高度设置为自动时，它应该采用屏幕的剩余高度。`margin-bottom: 25px`您为页脚留出的空间。对于页脚，我只添加了`width: 100%`. 由于某种原因，页脚的宽度没有跨越屏幕的宽度，所以我不得不添加它。

# c# - MVC 4 Razor - 使用 DisplayFor 而不是 ID 从字典中显示名称

> ID：14923082
> 
> 赞同：1
> 
> 时间：2013-02-17T16:08:18.547
> 
> 标签：c#, razor, asp.net-mvc-4, displayfor

我正在使用 MVC4 Razor 来呈现一个简单的网页，并且想知道是否有一种简单的方法可以使用 DisplayFor 来呈现“已翻译”的值，而不是显示模型的 ID 值。

**模型：**

```
public class Property
{
    [Key]
    public int Rec_Id { get; set; }
    public string Name  { get; set; }
    public int TypeId  { get; set; }
}

public class Type
{
    public int TypeId  { get; set; }
    public string TypeName  { get; set; }
} 
```

**控制器：**

```
public ActionResult Index()
{
    PropertyContext db = new PropertyContext();
    Property model = db.Property.Find(94284);
    ViewBag.cmbType = db.Type.ToList();
    return View(model);
} 
```

**看法**

```
<div class="display-field">
    @Html.DisplayFor(ViewBag.Type => ViewBag.Type.Find(model.Type).TypeName)
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:14:45.477

我建议您使用视图模型，因为您的域模型不适合您需要显示类型名称的视图的要求：

```
public class MyViewModel
{
    public int RecId { get; set; }
    public string Name  { get; set; }
    public string TypeName { get; set; }
} 
```

然后让您的控制器操作通过执行 INNER JOIN 填充此视图模型并将其传递给视图：

```
public ActionResult Index()
{
    using (PropertyContext db = new PropertyContext())
    {
        var query = 
            from prop in db.Property.Find(94284)
            join type in db.Type on prop.TypeId equals type.TypeId
            select new MyViewModel
            {
                RecId = prop.Rec_Id,
                Name = prop.Name,
                TypeName = type.TypeName
            };

        var viewModel = query.FirstOrDefault();
        return View(viewMode);
    }
} 
```

最后，您的视图将被强输入到视图模型中，并且您将拥有要显示的所有必要信息：

```
@model MyViewModel
...
<div class="display-field">
    @Html.DisplayFor(model => model.TypeName)
</div> 
```

# django - Django 中的多个站点

> ID：14923083
> 
> 赞同：6
> 
> 时间：2013-02-17T16:08:21.067
> 
> 标签：django, apache, virtualhost

有谁知道如何向 Django 添加多个域。我已经尝试按照这里的指南[在单个 Django 项目下的多个站点](https://stackoverflow.com/questions/3369486/multiple-sites-under-single-django-project)没有运气。

我的配置看起来像这样

**设置**

/opt/django/project/settings.py

/opt/django/project/domain1_settings.py

**网址**

/opt/django/project/urls.py

/opt/django/project/domain1_urls.py

**wsgi**

/opt/django/project/domain1/domain1.wsgi

**阿帕奇**

/etc/httpd/conf.d/django.conf

```
<VirtualHost * >
  ServerName domain1.co.uk
  ServerAlias www.domain1.co.uk direct.domain1.co.uk
  WSGIDaemonProcess domain1 processes=5 python-path=/usr/bin/python threads=1
  WSGIScriptAlias / /opt/django/project/domain1/domain1.wsgi
  ErrorLog logs/domain1-error.log
  CustomLog logs/domain1-access.log common
</VirtualHost> 
```

当我重新启动 apache 时，我没有看到任何错误，但是当我转到该站点时，我被发送到在主 httpd.conf 中配置的（非 django）域。

谢谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T18:23:31.837

这个答案假设您希望有两个域名，每个域名都运行单独的 Django 项目，但托管在同一个 Apache 服务器上。如果不是这种情况，请完善您的问题！

首先，您需要`VirtualHost`在您的 apache conf 中输入两个条目（让我们调用您的站点`domain1.co.uk`和`domain2.co.uk`）

```
# Virtual hosts setup
NameVirtualHost *
<VirtualHost *>
    ServerName domain1.co.uk

    WSGIDaemonProcess APPLICATION_NAME processes=5 python-path=/opt/django/project/domain1:/home/USERNAME/webapps/APPLICATION_NAME/lib/python2.6     threads=1
    WSGIScriptAlias / /opt/django/project/domain1/domain1.wsgi
</VirtualHost>

<VirtualHost *>
    ServerName domain2.co.uk

    WSGIDaemonProcess APPLICATION_NAME_www processes=5 python-path=/opt/django/project/domain2:/home/USERNAME/webapps/APPLICATION_NAME/lib/python2.6 threads=1
    WSGIScriptAlias / /opt/django/project/domain2/domain2.wsgi
</VirtualHost> 
```

您还需要 2 个 wsgi 文件（在上面的 conf 中指出了两个）

```
/opt/django/project/domain1/domain1.wsgi
/opt/django/project/domain1/domain2.wsgi 
```

看起来像

```
import os
import sys
from django.core.handlers.wsgi import WSGIHandler

os.environ['DJANGO_SETTINGS_MODULE'] = 'project.settings' 
# or     project.domain1_settings
application = WSGIHandler() 
```

确保`settings.py`两个设置文件有差异`SITE_ID = 1`，或者`SITE_ID = 2`您指向正确的`urls.py`

```
ROOT_URLCONF = 'urls' 
```

或者

```
ROOT_URLCONF = 'domain1_urls' 
```

这个问题大部分来自个人经验和这篇[博](http://michal.karzynski.pl/blog/2010/10/19/run-multiple-websites-one-django-project/)文。您的项目目录和域名似乎有点混乱，我已尽力将它们放置在此处的正确位置，但您需要根据自己的目的进行调整。

**额外的**

如果您有两个站点从同一台服务器运行，则必须非常小心地保持项目目录、静态文件目录和设置文件等的一致性。从您的问题中，您说您的设置文件是`/opt/django/project/settings.py`并且 `/opt/django/project/domain1_settings.py`这看起来很令人困惑您有一个项目目录 ( `/opt/django/project`)。我强烈建议加强分离；正如我上面所描述的，也许将您的项目（`domain1`和`domain2`）设置在目录中

```
/opt/django/project/domain1/
/opt/django/project/domain2/ 
```

带有相应的设置文件

```
/opt/django/project/domain1/settings.py
/opt/django/project/domain2/settings.py 
```

等等。这应该可以更容易地发现哪里出了问题。

# java - 模拟可视化框架

> ID：14923085
> 
> 赞同：-2
> 
> 时间：2013-02-17T16:08:29.383
> 
> 标签：java, python, user-interface, simulation

我目前正在从事一项任务，更具体地说，是模拟在二维平面中移动的机器人。随着时间的推移，我必须**可视化**它们的运动，但我不太确定要使用哪个框架。

谁能给我推荐一个？最好是*Python*或*Java*。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:10:48.297

对于 Python，您可以使用[matplot](http://matplotlib.org/gallery.html)，并且图库为您提供了很多选择。您可能想要扩展您想要可视化的内容。

**编辑**

那么对于复杂的东西有 [处理](http://processing.org)，也许你想生产这样的东西？ [植绒](http://processing.org/learning/topics/flocking.html)

另一个工具是[http://nodebox.net/](http://nodebox.net/)，它使用 Python 创建有趣的图表信息图表。

# java - 在 HashMap 中的 String 的 ArrayList 中添加动态内容

> ID：14923086
> 
> 赞同：0
> 
> 时间：2013-02-17T16:08:36.557
> 
> 标签：java, arraylist, hashmap

我正在尝试用 Java 创建一个内容管理系统，我在其中插入章节名称并在章节内创建部分。我使用了以下数据结构：

```
static ArrayList<String> chapters = new ArrayList<String>();
static Map<String,ArrayList<String>> subsections = new HashMap<String,ArrayList<String>>(); 
```

现在，对于插入，我使用以下代码：

```
ArrayList<String> secname = new ArrayList<String>();
secname.add(textField.getText());
MyClass.subsections.put("Chapter", secname); 
```

问题是我得到了最后一个元素，其余的元素被覆盖了。但是，我不能在章节中使用固定的 ArrayList。我必须在运行时和从 GUI 中插入字符串。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:10:53.243

是的，您每次都创建一个新的*空数组列表。*您需要检索现有的（如果有）并添加到其中。就像是：

```
List<String> list = MyClass.subsections.get("Chapter");
if (list == null) {
    list = new ArrayList<String> ();
    MyClass.subsections.put("Chapter", list);
}
list.add(textField.getText()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:12:06.597

您必须首先从地图中获取包含子部分的 ArrayList：

```
ArrayList<String> section = subsections.get("Chapter"); 
```

然后仅当它不存在时才创建它：

```
if (section == null) {
    ArrayList<String> section = new ArrayList<String>();
    subsections.put("Chapter", section);
} 
```

然后在本节末尾附加您的文本：

```
section.add(textField.getText()); 
```

每次调用“put”时，您的代码都会替换索引“Chapter”处的 ArrayList，可能会删除该索引处先前保存的数据。

# visual-studio-2010 - 在仅运行一台计算机的 VS 2010 中制作 setup exe

> ID：14923101
> 
> 赞同：-2
> 
> 时间：2013-02-17T16:09:56.307
> 
> 标签：visual-studio-2010

我在 VS2010 中创建了一个项目，在 SQL-SERVER 2008 中创建了数据库。我想为应用程序进行设置

我想让它像安装在带有串行密钥的计算机上一样。安装后，未经我的许可，不能安装在其他电脑上。

我的意思是我想保护我的应用程序。我希望它需要计算机 IP 地址或其他任何 id 类型的东西。如果它不一样，那么它将不会安装或运行

请帮助我，我想这样做，但不知道怎么做？在VS2010 .help plz

我希望一张 cd 或安装程序只运行一台计算机。对于其他 comp，用户必须给我打电话并购买 cd 或 setup 。

plzzzz帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:58:29.393

朋友，

Visual Studio 不会提供您正在寻找的选项。

最好让您的应用程序设计，例如使用密码或序列号打开应用程序之类的选项。

不要向任何人透露密钥。当任何人尝试登录但未能登录时，请发送消息与您联系并提供您的联系方式。

希望这对你有帮助，

问候，

迪帕克

# php - html中的php代码还是php中的html？

> ID：14923105
> 
> 赞同：6
> 
> 时间：2013-02-17T16:10:08.163
> 
> 标签：php

我正在用 php 编写代码，但我对以下编码风格感到困惑：

```
<html>
   <head></head>
   <body>
    <?php echo 'Hello World'; ?>
    <div>This is another</div>
    <?php echo 'hello again'; ?>
   </body>
</html> 
```

或者

```
<?php
  echo '<html>
   <head></head>
   <body>
    Hello World
    <div>This is another</div>
    hello again
   </body>
 </html>';
?> 
```

而且，在复杂的编程中哪个更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T16:11:44.827

肯定是第一个。
看，你的 HTML 是

*   自然，
*   可以突出显示，
*   缩进
*   由编辑器自动检查语法错误。

这称为“PHP 模板”，是将业务逻辑与表示逻辑分离的最有用的方法（特殊模板语言除外）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T16:16:01.263

第一个在所有情况下都更好。为什么？仅仅是因为不需要转义任何字符，并且编辑器中有语法突出显示。它还使您的代码更具可读性（特别是如果您也在 HTML 中使用缩进）

此外，HTML 和 PHP 交错的能力是 PHP 的核心特性。它*应该*像这样使用。您甚至可以执行以下操作：

```
The programmer says 
<?php if(isGoodbye()){ ?>
goodbye
<?php }else{ ?>
hello
<?php }?>
world 
```

它使您的生活变得轻松，那么为什么不使用它呢？

# visual-studio - 无法使用 VS 2012 和 Opencv 2.4.2 构建 cvblobslib_v_8_3

> ID：14923107
> 
> 赞同：0
> 
> 时间：2013-02-17T16:10:10.010
> 
> 标签：visual-studio, opencv, cvblobslib

我正在尝试构建[cvBloblsLib](http://opencv.willowgarage.com/wiki/cvBlobsLib)，但到目前为止一直无法做到。

我试图按照说明进行操作，但我遗漏了一些东西。我是否需要在 cvBlobsLib 中包含 OpenCV2.4.2 的目录？如果我不明白

```
blobcontour.h(6) : fatal error C1083: Cannot open include file: 'cv,h': No such file or directory 
```

在原始 cvblobslib 文件 blobcontour.h 中

但是如果确实包含 opencv 包含目录，我会得到

```
h:\opencv2.4.2\include\opencv\cv.h(63): fatal error C1083: Cannot open include file: 'opencv2/opencv.hpp': No such file or directory 
```

这发生在原始的 cv.h 文件中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:45:24.723

如果您使用的是 2.4.2 中的预建库，

尝试将您的“附加包含”指向：h:\opencv2.4.2\build\include

而不是 h:\opencv2.4.2\include

（h:\opencv2.4.2\include 也可以，但是您必须*手动*添加 opencv2\include 和所有模块包含，例如 modules\core\include、modules\highgui\include 等. )

# window - 命运错误：找不到文件'sal.h'

> ID：14923108
> 
> 赞同：0
> 
> 时间：2013-02-17T16:10:21.180
> 
> 标签：window, directx, visual-c++

我是《Tricks of the 3D Game Programming》这本书的初学者。

但是 VC6.0 在我编译本书的源代码时显示 Cant find 'sal.h'。

我不知道如何解决这种问题。。

PS。我是一名中国学生，我的英语不是很好，所以请原谅我的语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:50:25.273

这是标准的 Windows 标头，您的包含路径一定有问题。

检查您的默认 C++ 包含文件路径（在工具->选项中。在对话框中，单击目录选项卡），它应该是

```
$(VCInstallDir)include;$(VCInstallDir)atlmfc\include;$(WindowsSdkDir)include;$(FrameworkSDKDir)\include 
```

# entity-framework - Linq to Entities 返回所有行

> ID：14923115
> 
> 赞同：2
> 
> 时间：2013-02-17T16:11:02.757
> 
> 标签：entity-framework, linq-to-entities, code-first

在我的 winform 应用程序中，我使用以下代码来查找用户：

```
 var findUser =
                userService.Find(
                    u => u.UserName == UserNameTextBox.Text.Trim() && u.Password == PasswordTextBox.Text.Trim() && u.IsActive); 
```

并在我的服务层中找到作为通用方法实现的方法：

```
public virtual TEntity Find(Func<TEntity, bool> predicate)
{
    return _tEntities.Where(predicate).FirstOrDefault();
} 
```

当我执行此操作时，会生成以下 sql 代码并将其发送到 sql server：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[FirstName] AS [FirstName], 
[Extent1].[LastName] AS [LastName], 
[Extent1].[UserName] AS [UserName], 
[Extent1].[Password] AS [Password], 
[Extent1].[IsAdmin] AS [IsAdmin], 
[Extent1].[IsActive] AS [IsActive], 
[Extent1].[RowVersion] AS [RowVersion]
FROM [dbo].[Users] AS [Extent1] 
```

有什么问题，我该如何修复主题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:45:38.873

该`Where`函数在多种类型上定义了多个重载作为扩展方法。

随着`Func<TEntity, bool> predicate`您调用[`Enumerable.Where`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)它评估您在客户端的过滤，这就是它不生成正确查询的原因。

你需要的是[`Queryable.Where`](http://msdn.microsoft.com/en-us/library/bb535040.aspx)接受一个`Expression<Func<TSource, bool>> predicate`

因此，将您`Find`的方法签名更改为：

```
public virtual TEntity Find(Expression<Func<TEntity, bool>> predicate)
{
    return _tEntities.Where(predicate).FirstOrDefault();
} 
```

# jquery - Jquery 列表选择变量

> ID：14923116
> 
> 赞同：0
> 
> 时间：2013-02-17T16:11:03.897
> 
> 标签：jquery, ajax, json, listview, jquery-mobile

我有这个 Jquery 列表元素与我用来自学编码的示例应用程序一起使用。我有各种值被渲染到列表中就好了。问题在于我试图找出用户选择的列表中的哪个项目，然后我可以返回数据库并将与该项目相关的所有信息拉到屏幕上。

到目前为止我尝试过的方法是这样的：

```
<script type="text/javascript">
    $(document).on('pagebeforeshow', '#index', function(){
        $("#list").empty();
        var url="http://localhost/test/login/json4.php";
        $.getJSON(url,function(json){
            //loop through deals
            $.each(json.deals,function(i,dat){
                $("#list").append("<li><a id='"+dat.dealid+"'><h1>"+dat.name+"</h1><p>"+dat.dname+"</p></a></li>");
                $(document).on('click', '#'+dat.dealid, function(event){  
                    if(event.handled !== true) // This will prevent event triggering more then once
                    {
                        listObject.itemID = $(this).attr('id'); 
                        $.mobile.changePage( "#index2", { transition: "slide"} );
                        event.handled = true;
                    }
                });            
            });
            $("#list").listview('refresh');
        });
    });

    $(document).on('pagebeforeshow', '#index2', function(){       
    $('#index2 [data-role="content"]').html('You have selected Link' + listObject.itemID);
     });

   var listObject = {
      itemID : null
   }    
</script> 
```

由所有列表项创建一个 Json 数组，并在屏幕上呈现。然后我设法做的是，当用户进行选择时，它会进入一个新页面（索引 2），并在索引 2 中说明与所选项目相关联的数据库字段 ID。

过去几天我一直在尝试找到一种方法，通过该方法我可以获取该 ID 号并将其带回数据库端，但我一直没有运气 - 当我添加新代码时它会破坏我的原始列表或者什么都没有发生！

如果有人可以帮助我，我将不胜感激！这似乎是我职位上的大多数人都应该学习的核心课程，所以如果有人想教从这里做什么，那就太棒了！

在此先感谢您的帮助！祝大家周末愉快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:46:23.223

你应该这样做：

```
$(document).on('pagebeforeshow', '#index', function(){
    $("#list").empty();
    var url="http://localhost/ce/json4.php";
    $.getJSON(url,function(json){
        //loop through deals                
        $.each(json.deals,function(i,dat){
            $("#list").append("<li><a id='"+dat.dealid+"' data-restaurantid=" + dat.restaurantid + " data-image=" + dat.image + "><h1>"+dat.name+"</h1><h6>"+dat.dname+"</h6><h5>"+dat.description+"</h5></a></li>");
            $(document).on('click', '#'+dat.dealid, function(event){  
                if(event.handled !== true) // This will prevent event triggering more then once
                {
                    dealObject.dealID = $(this).attr('id'); 
                    dealObject.dealName = $(this).find('h6').html();
                    dealObject.description = $(this).find('h5').html(); 

                    $.mobile.changePage( "offer.php", { transition: "slide"} );
                    event.handled = true;
                }
            });            
        });
        $("#list").listview('refresh');
    });
});

$(document).on('pagebeforeshow', '#index2', function(){       
    $('#index2 [data-role="content"]').find('input#desc').val(dealObject.description);
    $('#index2 [data-role="content"]').find('input#name').val(dealObject.dealName);
    $('#index2 [data-role="content"]').find('input#did').val(dealObject.dealID);

});

var dealObject = {
    dealID : null,
    dealName : null,
    description: null
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:15:28.363

您可以使用 localStorage 临时存储 itemID，并在下一页检索它。

```
localStorage['itemID'] = $(this).attr('id'); 
```

然后在#index2 中检索它：

```
itemID = localStorage['itemID']; 
```

# java - Java - 更改文本后获取 JTextArea 的大小

> ID：14923119
> 
> 赞同：2
> 
> 时间：2013-02-17T16:11:19.737
> 
> 标签：java, swing, resize, jtextarea

除了乘以行和列之外，Java 中还有什么方法可以在更改其文本后获得 JTextArea 的首选大小？

这是一个例子：

```
JTextArea a = new JTextArea("sooooooooooooooooooooooooooooooooooo long line"+
        "\nfoo\nboo\nbar\nmoo\nso\nlong\ntext");
Dimension p1 = a.getPreferredSize();
Dimension s1 = a.getSize();

a.append("some\nmore\ntext");
//a.recomputeSize(); I need something like this
Dimension p2 = a.getPreferredSize();
Dimension s2 = a.getSize();

System.out.println(p1); //[width=302,height=128]
System.out.println(s1); //[width=0,height=0]
System.out.println(p2); //[width=302,height=128]
System.out.println(s2); //[width=0,height=0] 
```

# postgresql - 为什么这个代码给了我一个例外太多的客户已经

> ID：14923120
> 
> 赞同：0
> 
> 时间：2013-02-17T16:11:22.550
> 
> 标签：postgresql, google-geocoder

我的任务是从我的数据库中选择地址并向地理编码 api 发出请求以获取地址的纬度、经度坐标。一旦我得到它，我应该将它们填充到 dsatabase

包 com.gismo;

```
import java.net.*;
import org.xml.sax.InputSource;
import org.w3c.dom.*;
import javax.xml.xpath.*;
import javax.xml.parsers.DocumentBuilderFactory;
import java.io.*;
import java.nio.*;

import java.io.IOException;
import java.net.URISyntaxException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPathExpressionException;
import org.xml.sax.SAXException;

public class TestCon {
    static String nodeString="";
    static String nody="";
    //static String[] nodeString={};
    static String elementValue = "";
    static Connection conn2 = null;

    private static final String GEOCODE_REQUEST_PREFIX = "http://maps.google.com/maps/api/geocode/xml";

    public String _xpath = null;
    public Document _xml = null;

    public static void main(String[] args) throws IOException,  URISyntaxException, ParserConfigurationException, SAXException, ClassNotFoundException 
    {
       for (int j=200;j<3000;j++)

        {
           Class.forName("org.postgresql.Driver");

        try 
        {
            conn2 = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/plovdivbizloca",
                    "postgres", "tan");
        }

        catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

        Statement mystmt = null;

        String selectQuery = "SELECT main_office_town, address FROM pl_biz where id="+j;

        try
        {
            mystmt = conn2.createStatement();
            ResultSet mysr = mystmt.executeQuery(selectQuery);

            ResultSetMetaData rsmd = mysr.getMetaData();
            int colCount = rsmd.getColumnCount();
            int numberrow = 0;
             elementValue="";
            while (mysr.next()) 
            {

                for (int i = 1; i <= colCount; i++) 
                {

                     elementValue += mysr.getString(i);
                    if (i < colCount)
                        elementValue += ",";
                }
                System.out.println(elementValue);

            }

         }
        catch (Exception ex) 
        {
        }
        // NEW GEOCODING;

        String inputQuery, resultXml, urlString, xPathString,xi = null;
        inputQuery = elementValue;

        urlString = GEOCODE_REQUEST_PREFIX + "?address=" + URLEncoder.encode(inputQuery, "UTF-8") + "&sensor=false";
        System.out.println(urlString);

        // Convert the string to a URL so we can parse it
        URL url = new URL(urlString);

        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        Document geocoderResultDocument = null;
        try 
        {
            // open the connection and get results as InputSource.
            conn.connect();
            InputSource geocoderResultInputSource = new InputSource(conn.getInputStream());

            // read result and parse into XML Document
            geocoderResultDocument = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(geocoderResultInputSource);
        } 
        finally 
        {
            conn.disconnect();
        }

        // Process the results
        xPathString = "//GeocodeResponse//location/lat";
        NodeList nodes = process(geocoderResultDocument, xPathString);
        System.out.println ("nodes" +nodes.getLength());

        // Print results
        for (int i = 0; i < nodes.getLength(); i++) 
        { 
           nodeString = nodes.item(i).getTextContent();
          // nodeString = nodes(i).getTextContent();
            System.out.print("cordinate:"  + nodeString);

        }
        xi = "//GeocodeResponse//location/lng";
        NodeList nodes2 = process(geocoderResultDocument, xi);
        System.out.println ("nodes length" + nodes2.getLength());
        for (int i = 0; i < nodes2.getLength(); i++) 
        { 
           nody = nodes2.item(i).getTextContent();
          // nodeString = nodes(i).getTextContent();
            System.out.println("cl:" + nody);

        }

        PreparedStatement pstmt = null;
        //console.writeln(nodeString);
        String insertQuery = "UPDATE pl_biz set long= '" + nody+ "' ,  lat= '"+nodeString+ "' where id="+j;

        try 
        {
            pstmt = conn2.prepareStatement(insertQuery);

            int rowss = pstmt.executeUpdate();
            System.out.println("rowss successfull:" +rowss);

        }

        catch (Exception ex) {

        }
        System.out.println("j:"+j);
        }

    }

    private void TestCon() {
    }

    public static NodeList process(Document xml, String xPathStrings)
            throws IOException {

        NodeList result = null;
        System.out.println(result);
        System.out.print("Geocode Processor 1.0\n");

        XPathFactory factory = XPathFactory.newInstance();

        XPath xpath = factory.newXPath();

        try {
            result = (NodeList) xpath.evaluate(xPathStrings, xml,
                    XPathConstants.NODESET);
        }
        catch (XPathExpressionException ex) {
            ex.printStackTrace();
        }
        System.out.println(result);
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:29:15.243

您是否尝试过`conn2.close()`在完成后显式调用`conn2`？

# javascript - 在 jQuery 动画中使用变量

> ID：14923121
> 
> 赞同：1
> 
> 时间：2013-02-17T16:11:29.200
> 
> 标签：javascript, jquery, html

我有一个函数，它通过在页面上移动来调用，并根据你在哪里发送你做一个不同的元素。

所以

```
function changeFrame() {
  $('#f2').stop(true,true).hide("blind", { direction: "vertical" }, 400);
 } 
```

效果很好，但我想即时更改目标 ID，所以我虽然可以使用变量调用函数并使用它，但它不起作用。

```
function changeFrame(requestedFrame) {
      $(requestedFrame).stop(true,true).hide("blind", { direction: "vertical" }, 400);
    } 
```

其他一切都一样，我用过我也试过这样：

```
 $('requestedFrame') 
```

最后，为了确保我正确地传递了变量，我就是这样做的

```
 alert(requestedFrame); 
```

示例*请求帧*字符串

```
f2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:20:40.903

jquery 中的 $() 接受对象.. 尝试调用如下函数：

```
changeFrame(this); 
```

然后在函数中使用这个'obj'变量：

```
function changeFrame(obj) {
$(obj).stop(true,true).hide("blind", { direction: "vertical" }, 400);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T16:21:40.787

很难说 requestedFrame 是什么，但如果它是一个字符串 id，那么你需要选择它：

```
$('#' + requestedFrame).stop(true,true).hide("blind", { direction: "vertical" }, 400); 
```

如果它已经是一个 jQuery 对象，那么您可以完全删除包装器：

```
requestedFrame.stop(true,true).hide("blind", { direction: "vertical" }, 400); 
```

# html - 带有 [white-space:no-wrap] 的 TD 没有按预期工作？

> ID：14923123
> 
> 赞同：4
> 
> 时间：2013-02-17T16:11:38.437
> 
> 标签：html, css, html-table

我有一张桌子：

![在此处输入图像描述](../Images/d809a991824970fe3e6d0fd44918f9f8.png)

请看正确的TD。

黄色 div 应该有它的高度（强制）。我需要垂直对齐`checkbox`+`SPAN`

所以我把它们都当作 :`float:left`和玩了`margin-top`。

但是当我减小浏览器宽度时，`SPAN`它会下降：

![在此处输入图像描述](../Images/8983082c55099d51d76f2232bf90cc31.png)

*我已经放了无包装。*

我不在乎文本 (td#2 ) 是否会被包装我只需要`check-box`+`span`将始终在一起。
而且我不能`width`在包装器 div 上使用 a ，因为`Yes`这里是英文的，但它是一个多语言网站。所以我需要文本适合其原始长度。

我该怎么做才能使这两个元素都不会被包装？

这是~~[jsbin](http://jsbin.com/oquniq/1/edit)~~。[**这里是**](http://jsbin.com/oquniq/8/edit)

```
td{
  border:solid 1px green;
}

.myCheck{
  float:left;
  margin-top:16px;
}

.mySpan{
  float:left;
  margin-top:12px;
}
```

```
<table style='width:100%;' cellspacing=0 cellpadding=0>
  <tr>
    <td>
      1
    </td>
    <td>Lorem ipsum dolor sit amet, consectetur adipisicing tempor incididunt ut labore et 
    </td>
    <td style='white-space:nowrap;'>
      <div style='white-space:nowrap; height:50px;background-color:yellow;float:left;'>
        <input type='checkbox' class='myCheck' />
        <span  class='mySpan'>Yes</span>
      </div>
    </td>

  </tr>
</table>
```

这是问题所在：

![在此处输入图像描述](../Images/97899d13ea9f3aabd642026c55a4a6a6.png)

在 Firefox 中它确实包装了它，但在 Chrome 中它没有（它应该是这样的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T17:17:05.463

试试这个：http: [//jsbin.com/oquuniq/26/edit](http://jsbin.com/oquniq/26/edit)

```
<td style='white-space:nowrap;'>
  <label>
    <input type='checkbox' />
    <span class='mySpan'>
      Yes
    </span>
  </label>
</td> 
```

并用于`position:relative`调整文本的垂直对齐

```
.mySpan
{
  position:relative;
  top:-2px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T16:16:05.890

规则的名称`nowrap`不是`no-wrap`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:35:13.043

换行的原因是元素单独向左浮动。

将复选框放在`<span>`（或最好是一个`<label>`元素）中，这将修复它。也不需要浮动元素 - 你可以做到`display: block;`。

```
<label  class='mySpan'>
    <input type='checkbox' class='myCheck' />
    Yes
</label> 
```

删除`.myCheck`样式并将`.mySpan`CSS 设置为：

```
.mySpan{
    display: block;
    margin-top: 12px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T16:35:48.337

我建议你在那个 td 里放一张桌子，这样它就不会换行了

```
<td style='white-space:no-wrap;'>

<table style='white-space:no-wrap;height:50px;background-color:yellow;'>

          <tr>
            <td> <label  class='mySpan'>Yes</label></td>
            <td><input type='checkbox' class='myCheck' /></td>

          </tr>
<table>

</td> 
```

PS：HTML是语义的，所以对于标签，使用标签元素，这对世界更好:)

# javascript - Node.js 的同步拼写检查

> ID：14923124
> 
> 赞同：0
> 
> 时间：2013-02-17T16:11:39.267
> 
> 标签：javascript, node.js, spell-checking

我正在尝试在 Node.js 中同步检查单个单词的拼写。我发现的所有库（拼写检查器、教师、拼写器……）都有异步调用，这对我不起作用。

这是我的代码的结构：

```
function mycheck(w) {
    spell.check(w, function(err, correct, suggestions) {
        if (correct) {
          return true;
        }
        else {
          return false;
        }
    });
} 
```

问题是，`mycheck`总是未定义的，因为`spell.check`是异步的。另外，我不能只做`mycheck`异步，因为这不适合我的程序的其余部分。

是否有另一种拼写检查（同步）或同步工作的方法？我可以使用某种“助手”包来使功能同步。

非常感谢！:D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T16:15:39.353

Node.JS 是一种异步语言，不要试图强迫它变得同步，而是让 mycheck 异步，并在无法再挽救之前调整应用程序的其余部分

# vb.net - 如何在vb.net中评估excel公式

> ID：14923133
> 
> 赞同：3
> 
> 时间：2013-02-17T16:12:47.453
> 
> 标签：vb.net, excel

在我看来，我有一个完全不同的情况。我正在尝试为我经常使用的基于 excel 的程序编写自定义函数。主要问题是您不能在拥有函数和返回评估公式方面重用代码。所以我有了以下想法。我可以使用参数从 excel 中提取数据，让 vb.net 将这些参数放在代码中，然后在 excel 中对其进行评估。所以让我举个例子。

此代码将存在于 excel 中称为“源代码”的定义名称中。 `="Width+{0}+Height+{1}"` 正如你所看到的，有两件事正在发生。
#1。我正在将整个公式设为字符串 #2。我正在为将要传入的两个参数插入一些“占位符”。

现在这两个参数也将放在定义的名称中 Cell B1（参数 1）`=1+1=2 (Cell can be evaluated in excel)` Cell C1（参数 2）`=10+10=20 (Cell can be evaluated in excel)`

现在这里是函数发生的地方。单元格 D1`=myformulaparsingfunction(Source_Code, Argument_1, Argument_2)`

在 vb.net 后端，我将拉入 source_code 字符串，然后使用参数解析占位符。所以我会得到这样的东西...... `="Width+2+Height+20"`

这就是我遇到问题的地方。当我解析公式时，它仍然是一个字符串。我需要有一种方法来告诉 excel 将此字符串作为公式进行评估。如果你们中的任何人知道这样做的方法，或者可能是实现我想要做的事情的替代方法，我愿意听取你的想法。希望以上内容写得足够清楚，以了解我要使用此代码的位置。提前致谢。

乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T17:10:10.413

你应该使用`Evaluate`你想要的方法。短样本：

```
Dim xlApp As Excel.Application
Set xlApp = New Excel.Application
xlApp.Visible = False
MsgBox xlApp.Evaluate("=5+(10+6)*100")
xlApp.Quit
Set xlApp = Nothing 
```

阅读更多：[http ://www.xtremevbtalk.com/archive/index.php/t-177848.html](http://www.xtremevbtalk.com/archive/index.php/t-177848.html)

# android - 运行时错误膨胀片段

> ID：14923135
> 
> 赞同：2
> 
> 时间：2013-02-17T16:12:52.430
> 
> 标签：android

**错误：** java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.todolist/com.example.todolist.ToDoListActivity}：android.view.InflateException：二进制 XML 文件第 6 行：膨胀类片段时出错

我知道以前有人问过这个问题，但我已经搜索过它们并且找不到解决方案。在应用程序启动几秒钟后我收到此错误而没有触摸任何东西，片段不加载然后它崩溃。

我有一个带有两个 Fragment 的 FragmentActivity 类（ListFragment 和 EditText）。我的最小 sdk 支持是 7，所以我正在使用支持库导入。

**这是 FragmentActivity 的代码：**

```
public class ToDoListActivity extends FragmentActivity
        implements NewItemFragment.OnNewItemAddedListener{

private ArrayList<String> todoItems;
private ArrayAdapter<String> aa;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_to_do_list);

    FragmentManager fm = getSupportFragmentManager();
    ToDoListFragment toDoListFragment = (ToDoListFragment)
            fm.findFragmentById(R.id.ToDoListFragment);

    aa = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1,
                        todoItems);

    toDoListFragment.setListAdapter(aa);

}

public void onNewItemAdded(String newItem){
    todoItems.add(newItem);
    aa.notifyDataSetChanged();

} 
```

**这是 FragmentActivity 的布局：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<fragment
    android:id="@+id/NewItemFragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:name="com.example.todolist.NewItemFragment"/>

<fragment
    android:id="@+id/ToDoListFragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:name="com.example.todolist.ToDoListFragment" />
</LinearLayout> 
```

**这是 EditText 片段代码：**

```
public class NewItemFragment extends Fragment {

private OnNewItemAddedListener onNewItemAddedListener;

public interface OnNewItemAddedListener {
    public void onNewItemAdded(String newItem);
}

@Override
public void onAttach(Activity activity) {
super.onAttach(activity);

try {
onNewItemAddedListener = (OnNewItemAddedListener)activity;
}catch (ClassCastException e) {
    throw new ClassCastException(activity.toString() +
            "must implement OnNewItemAddedListener");
    }
}

public View OnCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState){

    View view = inflater.inflate(R.layout.new_item_fragment, container
            , false);

    final EditText myEditText = (EditText)view.findViewById(R.id.myEditText);

    myEditText.setOnKeyListener(new View.OnKeyListener() {

        ...
    });
    return view;
} 
```

}

**这是 EditText 片段布局：**

```
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/addItemHint"
    android:contentDescription="@string/addItemContentDescription" /> 
```

**我的 ListFragment 类使用默认布局，所以我只创建了一个带有类声明的 .java 文件（类名与片段活动 XML 中写入的名称相同）**

**这是 LogCat 的剩余部分：**

```
02-17 17:33:25.135: E/AndroidRuntime(23262):    at      android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.os.Looper.loop(Looper.java:123)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.app.ActivityThread.main(ActivityThread.java:3691)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at java.lang.reflect.Method.invokeNative(Native Method)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at java.lang.reflect.Method.invoke(Method.java:507)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at dalvik.system.NativeStart.main(Native Method)
02-17 17:33:25.135: E/AndroidRuntime(23262): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class fragment
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:587)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.app.Activity.setContentView(Activity.java:1663)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at com.example.todolist.ToDoListActivity.onCreate(ToDoListActivity.java:18)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
02-17 17:33:25.135: E/AndroidRuntime(23262):    ... 11 more
02-17 17:33:25.135: E/AndroidRuntime(23262): Caused by: java.lang.IllegalStateException: Fragment com.example.todolist.NewItemFragment did not create a view.
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:303)
02-17 17:33:25.135: E/AndroidRuntime(23262):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:23:16.790

实际错误是`Fragment com.example.todolist.NewItemFragment did not create a view.`

发生这种情况是因为您有一个名为`OnCreateView`而不是`onCreateView`. 该方法应以小写字母开头。如果您将该方法标记为`@Override`它会显示此错误。

# ios - 在未来的日期范围内安排本地通知

> ID：14923136
> 
> 赞同：1
> 
> 时间：2013-02-17T16:12:59.100
> 
> 标签：ios, localnotification

```
- (void) scheduleGeneralNotificationFrequentlyWithItem:(ToDoItem *)item interval:(int)minutesBefore frequent:(NSCalendarUnit)frequentUnit{
    NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
    NSDateComponents *dateComps = [[NSDateComponents alloc] init];
    [dateComps setDay:item.day];
    [dateComps setMonth:item.month];
    [dateComps setYear:item.year];
    [dateComps setHour:item.hour];
    [dateComps setMinute:item.minute];
    NSDate *itemDate = [calendar dateFromComponents:dateComps];
    [dateComps release];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];

    if (localNotif == nil)
        return;
    localNotif.fireDate = [itemDate dateByAddingTimeInterval:-(minutesBefore*60)];
    localNotif.timeZone = [NSTimeZone defaultTimeZone];

    if (!item.eventName) {
        item.eventName = @"My event name";
    }
    localNotif.alertBody = item.alertBody;
    localNotif.alertAction = NSLocalizedString(@"Details", nil);

    localNotif.soundName = UILocalNotificationDefaultSoundName;
    localNotif.applicationIconBadgeNumber = 1;

    localNotif.userInfo = item.data; // some data
    localNotif.repeatInterval = frequentUnit; // here I put NSDayCalendarUnit
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
    [localNotif release];
    NSString *isDisableLocalPush = [Settings getSetting:kPraktijDisableLocalPushKey];
    if ([isDisableLocalPush isEqualToString:kJSONValueYes]) { //disable all notifications after added it
        [self disableAllLocationPushNotifications];
    }
} 
```

在上面的代码中，它将每天安排到 localNotif.fireDate ，对吗？

我想要实现的是：安排下个月到下个月的每一天的通知，例如：2013/march/01 到 2013/may/01 的每日通知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T15:43:02.990

不，它会从触发日期开始安排每日通知（直到您取消它）。

如果您想安排一个日期范围并且它不超过您可以一次设置的本地通知的限制（即 64，仍然少于您需要的 2 个月），我认为最好安排本地通知每天一个接一个。

只需从 NSDate 对象开始触发日期，安排本地通知而不重复间隔，将 NSDate 增加一天，然后重复安排本地通知，直到它到达范围的结束日期。

# java - Java - 在 getLegalMoves() 中找不到符号

> ID：14923137
> 
> 赞同：-3
> 
> 时间：2013-02-17T16:13:19.607
> 
> 标签：java, methods, tags, compiler-errors, symbols

我目前正在尝试编写一种`getLegalMoves()`方法来编写奥赛罗游戏。问题是，在`getLegalMoves()`方法中它一直说它找不到符号，即使我明确定义了它。这是代码：

```
public ArrayList <Location> getLegalMoves(String curColor)
{
    ArrayList<Location> legalmoves = new ArrayList<Location>();
    int i = 0;
        ArrayList<Location> occupied = board.getOccupiedLocations();
        ArrayList<Location> playeroccupied = new ArrayList<Location>();
        ArrayList<Location> occupiedopposite = new ArrayList<Location>();
        int b = 0;
        while(b < occupied.size())
        {
            if(board.get(occupied.get(b)).equals(curColor) == false)
                occupiedopposite.add(occupied.get(b));
            else
                playeroccupied.add(occupied.get(b));
            b++;
        }       

        int a = 0;
        while(occupiedopposite.size() > i)
        {
            Location location = occupiedopposite.get(i);
            while(board.getEmptyAdjacentLocations(location).size() > a)
            {
                ArrayList<Location> empty = (board.getEmptyAdjacentLocations(location));
                Location emptyspot = empty.get(a);
                int c = 0;
                while(playeroccupied.size() > c)
                {
                    int direction = (empty).getDirectionTowards(playeroccupied.get(c)); //this is the problem line, it can't find playerOccupied.get(c), I think
                    int d = 0;
                    Location checking = emptyspot.getAdjacentLocation(direction);
                    while(board.isValid(checking) && d != -1)
                    {
                        if(d == 0 && checking.equals("W"))
                            d = -1;
                        else if(checking.equals(null) || checking.equals("B"))
                        {
                            d++;
                            checking = checking.getAdjacentLocation(direction);
                        }
                        else if(checking.equals("W") && d != 0)
                            legalmoves.add(emptyspot);
                    }
                    c++;    
                }
                a++;
            }
            i++;
        }
    return legalmoves;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:16:43.127

`empty`是一个列表：

```
ArrayList<Location> empty 
```

而且列表没有`getDirectionTowards(...)`方法：

```
int direction = (empty).getDirectionTowards(playeroccupied.get(c)); 
```

因此，该代码无法编译是正常的（括号是不必要的）。也许你的意思是写：

```
int direction = emptyspot.getDirectionTowards(playeroccupied.get(c)); 
```

# android - 将 RoboFragment 与 FragmentManager 一起使用

> ID：14923142
> 
> 赞同：6
> 
> 时间：2013-02-17T16:14:01.420
> 
> 标签：android, android-fragments, fragment, roboguice

我一直在尝试使用 RoboGuice 和 Fragments，但没有成功。我有一个扩展的片段`RoboFragment`和一个扩展的活动，`RoboActivity`但似乎在.`RoboActivity``getFragmentManager``RoboFragment`

它看起来像`RoboFragment`extends`android.support.v4.app.Fragmentment`但`getFragmentManager`需要`android.app.Fragment`.

这是如何工作的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T16:29:56.250

与往常一样，我在发布后 10 分钟内解决了我们的问题（抱歉）！

我需要我的活动来扩展 RoboFragmentActivity，然后公开 getSupportFragmentManager 方法——它返回显然与 android.support.v4.app.Fragment 兼容的 android.support.v4.app.FragmentManager

马特

# git - 是否可以提交我做 git clone 的目录

> ID：14923145
> 
> 赞同：-2
> 
> 时间：2013-02-17T16:14:14.363
> 
> 标签：git, github

我有一个目录，里面全是我从 github 得到的东西`git clone`（不是子模块）。我试图将此目录放在 git hub 上，但我克隆的目录的任何内容都没有上传。repo 就在那里`https://github.com/statquant/.vim` 如果你看一下，`vim/bundle`你会看到我所说的所有目录，它们都是从其他目录中克隆出来的。我如何上传它们包含的内容？

我照常做

```
git init
git add . or git add -A
git commit -a -m "blah"
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:30:37.827

但我认为你*在*谈论子模块。听起来您正在尝试将其他一些 repo 克隆到您自己的 git 项目的子目录中。根据[git-scm 书](http://git-scm.com/book/en/Git-Tools-Submodules)，“Git 使用子模块解决了这个问题。子模块允许您将 Git 存储库保留为另一个 Git 存储库的子目录。” 子模块是您管理嵌入在其他存储库中的存储库并使它们保持最新的方式。

如果您只想将文件从另一个 repo 获取到您的 repo，并且您不关心历史记录或保持副本最新，只需将项目文件复制到您的项目中，省略 .git 目录，然后添加+像往常一样提交它们。那么它就不会是一个嵌套的 git repo。

# mysql - 从 XAMPP 导出 MySQL 数据库

> ID：14923150
> 
> 赞同：23
> 
> 时间：2013-02-17T16:14:37.090
> 
> 标签：mysql, xampp

我需要将我的网站与 MySQL 数据库一起发送。我已经在 XAMPP 中完成了网站和 MySQL 数据库，但不知道如何发送数据库。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-06-02T15:14:05.390

从 xampp 导出 MySQL 数据库

命令行：

1.  首先打开命令提示符
2.  句法：-

导入数据库：- `D:/xampp/mysql/bin/mysql – u root -p databasename < D:/test.sql (sql file name)`

导出数据库：- `D:/xampp/mysql/bin/mysqldump -u root -p databasename > D:/text.sql(sql file name)`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-17T16:20:06.410

你有两种可能的方法来做到这一点

*   通过命令行

> 备份：#mysqldump -u root -p[root_password] [database_name] > dumpfilename.sql
> 
> 恢复：# mysql -u root -p[root_password] [database_name] < dumpfilename.sql

*   或使用 phpmyadmin（通常与 XAMP 一起安装），或类似的东西并从浏览器中导出

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-14T16:51:29.447

MySQL 附带， [XAMPP](https://www.apachefriends.org/)[`mysqldump`](http://dev.mysql.com/doc/refman/5.7/en/mysqldump.html)也是如此。它用于[以 SQL 格式转储数据](https://dev.mysql.com/doc/refman/5.7/en/mysqldump-sql-format.html)，其最简单的设备可能是将所有数据库转储到一个 SQL 转储文件中，并在以下位置执行：`cmd.exe`

> **`mysqldump --all-databases > dump.sql`**

对于 XAMPP，您需要提供用户名`(-u root)`和数据库名称`(test)`：

> **`mysqldump -u=root test > xampp-test-db.sql`**

作为一个实际的详细示例：

> **`D:\xampp\mysql\bin> mysqldump.exe --user=root --password=pwd myDatabase > C:\myBackup.sql`**

请注意，它`mysqldump`具有[广泛而强大的选项](https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#idm139954507101696)，适用于各种备份应用程序。

由于它会生成 SQL 脚本，因此恢复很容易；请参阅[*重新加载 SQL 格式备份*](https://dev.mysql.com/doc/refman/5.7/en/reloading-sql-format-dumps.html)。

# c - C：malloc 似乎分配的比我请求的多（数组）

> ID：14923157
> 
> 赞同：1
> 
> 时间：2013-02-17T16:14:57.540
> 
> 标签：c, arrays, segmentation-fault, malloc

您好我有这个问题：为什么当我使用 malloc 为浮点数组分配内存时，它分配了我请求的更多空间？例如，在这段代码中，我试图分配一个十个“单元格”浮点数组，但如果我尝试访问其他单元格，它不会返回任何段错误错误：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

float *fk_array;

int main(int argc, char** argv){

    fk_array = (float *) malloc(10 * sizeof(float));
    int i;
    fk_array[9] = 2.23;
    fk_array[15] = 0.3;
    for(i = 0; i<20 ; i++)
        printf("%f\n",fk_array[i]);
    free(fk_array);

    return 1;
} 
```

它返回我：

```
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
2.230000
0.000000
0.000000
0.000000
0.000000
0.000000
0.300000
0.000000
0.000000
0.000000
0.000000 
```

我哪里错了？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T16:16:35.563

根据分配算法，分配的数量超过您的要求并非不可能。但是，访问该内存是*未定义的行为*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T16:25:04.417

调用 时`malloc`，可能会使用额外的空间来存储有关已分配块的元数据，例如其大小和有关其他已分配块的信息。有时，实现更喜欢以特定间隔分配块（例如，4 或 8 字节的倍数）。但是，您不应该依赖每次调用时保持一致的空间量`malloc`；仅使用您特别要求的内容，否则您可能会覆盖其他重要信息。

有关更多信息，请参阅以下问题的答案：

*   [free 和 malloc 在 C 中是如何工作的？](https://stackoverflow.com/questions/1957099/how-do-free-and-malloc-work-in-c)
*   [为什么 malloc 分配的字节数与请求的不同？](https://stackoverflow.com/questions/430163/why-does-malloc-allocate-a-different-number-of-bytes-than-requested)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T16:30:32.943

如果分配堆内存不属于地址必须在长、四边或其他边界上对齐的特定处理器规则，我不会感到惊讶。

因此，如果您请求 100 字节的堆空间，操作系统可能会返回比您请求的更多，以满足处理器的对齐要求。但是，访问超过 100 个字节被认为是未定义的，并且可能并且可能会导致许多您不想要的奇怪行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T17:25:21.313

[如果读取或写入位于错误的页面](http://en.wikipedia.org/wiki/Page_%28computer_memory%29)中，您只能得到分段错误。一页通常为 4KiB。

系统调用可能会保留比请求多一点的`malloc()`空间，它会在块之前保留几个字的内存用于记账，但是你的程序在访问时没有被杀死`fk_array[15]`并不意味着它没有在保留的块之外访问为了它。它可能确实如此，操作系统只是没有注意到它。如果您在分配 之后分配了另一个数组`fk_array`，您将有机会注意到它正在发生变化。

# javafx-2 - 从 javaFX 项目获取具有依赖关系的 jar 文件

> ID：14923165
> 
> 赞同：0
> 
> 时间：2013-02-17T16:15:29.383
> 
> 标签：javafx-2, javafx, netbeans-7

我正在尝试使用此 build.xml (NetBeans) 构建具有依赖关系的 jar 文件：

```
<?xml version="1.0" encoding="UTF-8"?><!-- You may freely edit this file. See commented blocks below for --><!-- some examples of how to customize the build. --><!-- (If you delete it and reopen the project it will be recreated.) --><!-- By default, only the Clean and Build commands use this build script. --><project name="TargetAppDesktop" default="default" basedir="." xmlns:fx="javafx:com.sun.javafx.tools.ant">
    <description>Builds, tests, and runs the project TargetAppDesktop.</description>
    <import file="nbproject/build-impl.xml"/>
    <!--

    There exist several targets which are by default empty and which can be 
    used for execution of your tasks. These targets are usually executed 
    before and after some main targets. Those of them relevant for JavaFX project are: 

      -pre-init:                 called before initialization of project properties
      -post-init:                called after initialization of project properties
      -pre-compile:              called before javac compilation
      -post-compile:             called after javac compilation
      -pre-compile-test:         called before javac compilation of JUnit tests
      -post-compile-test:        called after javac compilation of JUnit tests
      -pre-jfx-jar:              called before FX SDK specific <fx:jar> task
      -post-jfx-jar:             called after FX SDK specific <fx:jar> task
      -pre-jfx-deploy:           called before FX SDK specific <fx:deploy> task
      -post-jfx-deploy:          called after FX SDK specific <fx:deploy> task
      -post-clean:               called after cleaning build products

    (Targets beginning with '-' are not intended to be called on their own.)

    Example of inserting a HTML postprocessor after javaFX SDK deployment:

        <target name="-post-jfx-deploy">
            <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
            <property name="jfx.deployment.html" location="${jfx.deployment.dir}${file.separator}${jfx.deployment.base}.html"/>
            <custompostprocess>
                <fileset dir="${jfx.deployment.html}"/>
            </custompostprocess>
        </target>

    Example of calling an Ant task from JavaFX SDK. Note that access to JavaFX SDK Ant tasks must be
    initialized; to ensure this is done add the dependence on -check-jfx-sdk-version target:

        <target name="-post-jfx-jar" depends="-check-jfx-sdk-version">
            <echo message="Calling jar task from JavaFX SDK"/>
            <fx:jar ...>
                ...
            </fx:jar>
        </target>

    For more details about JavaFX SDK Ant tasks go to
    http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm

    For list of available properties check the files
    nbproject/build-impl.xml and nbproject/jfx-impl.xml.

    -->

<!--   Para  gerar um arquivo unico adicionar as linhas abaixo -->

    <target name="package-for-store" depends="jar">

        <!-- Change the value of this property to be the name of your JAR,
             minus the .jar extension. It should not have spaces.
             <property name="store.jar.name" value="MyJarName"/>
        -->
        <property name="store.jar.name" value="TargetAppDesktop"/>

        <!-- don't edit below this line -->

        <property name="store.dir" value="store"/>
        <property name="store.jar" value="${store.dir}/${store.jar.name}.jar"/>

        <echo message="Packaging ${application.title} into a single JAR at ${store.jar}"/>

        <delete dir="${store.dir}"/>
        <mkdir dir="${store.dir}"/>

        <jar destfile="${store.dir}/temp_final.jar" filesetmanifest="skip">
            <zipgroupfileset dir="dist" includes="*.jar"/>
            <zipgroupfileset dir="dist/lib" includes="*.jar"/>

            <manifest>
                <attribute name="Main-Class" value="${main.class}"/>
            </manifest>
        </jar>

        <zip destfile="${store.jar}">
            <zipfileset src="${store.dir}/temp_final.jar"
            excludes="META-INF/*.SF, META-INF/*.DSA, META-INF/*.RSA"/>
        </zip>

        <delete file="${store.dir}/temp_final.jar"/>

    </target>

    <!--> Fim do codigo para arquivo unico -->
</project> 
```

当我构建它时，一切似乎都很好，但是当我尝试打开我的 jar 文件时，我从 javaFX 启动器收到错误消息：

找不到应用程序类名称。

有人知道发生了什么吗？或者更简单的方法来获得这个罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-17T20:47:52.760

您将需要稍微更改清单。从你所拥有的：

```
<manifest>
     <attribute name="Main-Class" value="${main.class}"/>
</manifest> 
```

类似于：

```
 <manifest>
              <attribute name="Main-Class" value="${main.class}"/>
<!-- your javaFX version -->
              <attribute name="JavaFX-Version" value="2.2"/>
<!-- your main class -->
              <attribute name="JavaFX-Application-Class" value="package.MainClass"/>
<!-- your javaFx build path -->
              <attribute name="JavaFX-Class-Path" value="lib/Program.jar lib/Utils.jar lib/commons-codec-1.5
     .jar lib/commons-logging-1.1.jar lib/dom4j-1.6.1.jar lib/junit-4.10.j
     ar lib/poi-3.10-FINAL-20140208.jar lib/poi-excelant-3.10-FINAL-201402
     08.jar lib/poi-ooxml-3.10-FINAL-20140208.jar lib/poi-ooxml-schemas-3.
     10-FINAL-20140208.jar lib/poi-scratchpad-3.10-FINAL-20140208.jar lib/
     stax-api-1.0.1.jar lib/xmlbeans-2.3.0.jar"/>
             <attribute name="Permissions" value="sandbox"/>

    </manifest> 
```

我个人使用了上面的那个并且它有效，但是正如你所看到的，它具有我的项目所独有的东西。获取 javaFX 路径和版本的最简单方法是使用 7zip 或类似程序打开 dist 文件夹中的 jar，然后查看这些字段的清单中的内容。

# verilog - verilog 多维数组

> ID：14923177
> 
> 赞同：1
> 
> 时间：2013-02-17T16:17:09.197
> 
> 标签：verilog

如果 verilog 不允许在模块的端口列表中声明/传递多维数组，是否有解决方法？假设我有一个像数组 [27:0][64:0] 这样的数组。我们如何将它传递到模块中？（比如将其作为一维数组并在模块主体上进行一些反转）我认为唯一的方法是将它作为一维传递并做一些机制来引用，就像原来的多维一样。谢谢。我不久前研究过，该功能在 SystemVerilog 中可用，但在原始 Verilog 中不可用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:14:21.260

正如最初的评论者指出的那样，在 SystemVerilog 中明确支持您所要求的内容。您甚至可以通过模块边界传递结构。

但是，如果您坚持使用旧式 Verilog，那么做的方法就像您猜到的那样。将其展平成一维阵列并将其吹回模块内部。

在伪代码中

```
input [WIDTH * DEPTH - 1:0] in;

reg [WIDTH - 1:0] array [0:DEPTH - 1];

integer i;
for (i = 0; i < DEPTH; i = i + 1)
    array = in[i * WIDTH +: WIDTH]; 
```

在模块边界的另一侧使用类似的包装 for 循环。+: 语法很好，但是您甚至无法访问它，然后您可以相当容易地将其转换为显式边界。

# highcharts - 更改高图表中的顶部和左侧

> ID：14923179
> 
> 赞同：2
> 
> 时间：2013-02-17T16:17:46.323
> 
> 标签：highcharts

我有最新的 hightcharts`2.3.5`并且我在一页中有很多图表。

我试过了`marginTop`，`spacingTop`但他们似乎没有在渲染的 div 内移动图表。但是对于萤火虫，我注意到有`Top`哪些`Left` 是从脚本生成的，`highcharts.js`而从那些左侧和顶部我可以根据需要移动图表（这只是在萤火虫中）。但是没有关于如何更改顶部和左侧的设置highcharts API 或设置。

请问我怎样才能改变我拥有`Top`的`Left`每张图表。

任何其他信息让我知道，我会添加它。

编辑。

```
chart = new Highcharts.Chart({
        chart: {
            renderTo: 'wfa_b', type: 'line',width: 760,height:null,marginRight: 5,marginBottom: 24 , 
            marginTop:46}, 
```

感谢帮助

**编辑**

以其他方式，我有渲染 div 的背景，但我不希望这个背景完全适合图表，我想将图表定位在 div 的背景图像上我想要的位置，希望这清楚

[SQLFIDDLE](http://jsfiddle.net/FAWLa/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:30:22.570

```
var chart = new Highcharts.StockChart({

        chart: {
            renderTo: 'container',
            borderWidth: 2,
            marginLeft: 150,
            marginTop: 100
        },
        .
        .
        .
        .
    }); 
```

[演示](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/chart/marginleft/)

[参考](http://api.highcharts.com/highstock#chart.marginLeft)

**编辑**（评论后）：

正如 OP 所澄清的那样，他需要`marginLeft`并且本身，而不是图表区域。`marginTop``render div`

假设 你`div`有`id='container'`

```
#container { 
    padding: 20px;

} 
```

[演示](http://jsfiddle.net/FAWLa/3/)

**编辑2：（**评论后）：

OP 不想调整`padding`正在执行的图表的大小。

所以，用这个，

```
#container .highcharts-container {
   top: 100px !important;
   left: 100px !important;
} 
```

[演示](http://jsfiddle.net/FAWLa/8/)

# android - 如何为所有按钮添加一个通用监听器（无干扰）？

> ID：14923184
> 
> 赞同：8
> 
> 时间：2013-02-17T16:17:59.807
> 
> 标签：android

当您按下应用程序的任何按钮时，我会尝试播放声音。

将侦听器添加到应用程序中的所有按钮的次要侵入方式如何？

我可以添加覆盖（和扩展）Android 的通用监听器吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T16:36:55.243

您可以为所有按钮设置一个侦听器，也可以使用标签进行识别。

```
View.OnClickListener myClickLIstener= new View.OnClickListener() {
    public void onClick(View v) {
        String tag = (String) v.getTag();
        Log.e("","tag : "+tag)
       // your stuff
    }
}; 
```

设置监听器...

```
btn1.setOnClickListener(myClickLIstener);
btn1.setTag("btn1");
btn2.setOnClickListener(myClickLIstener);
btn2.setTag("btn2"); 
```

**编辑 ：**

你在找这样的...

```
class superTop implements View.OnClickListener {

        @Override
        public void onClick(View v) {
            Log.e("", "onClick superTop");
        }

    }

    class NewClick extends superTop implements View.OnClickListener {

        @Override
        public void onClick(View v) {
            Log.e("", "onClick NewClick");

            super.onClick(v);

        }

    }

    findViewById(R.id.button1).setOnClickListener(new NewClick()); 
```

您可以同时调用两个侦听器...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T16:25:26.973

要不就

```
class YourClass implements OnClickListener{
    buttonOne.setOnclickListener(this);
    buttonTwo.setOnclickListener(this);
    buttonThree.setOnclickListener(this);

    public void onClick(View v){
        //do your stuff;
    }
} 
```

或者，如果您愿意，请制作您的自定义 Button ：

```
Class Yourbutton extends Button implements Button.OnClickListener{
    public Yourbutton(Context c) {
        super(c);
    }
    public Yourbutton(Context c,AttributeSet s){
        super(c,s);
    }
    public void onClick(View v){
        //do your stuff;
    }
} 
```

所以现在您可以使用 Yorkbutton 作为通用按钮来完成通用工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T16:56:44.083

你可以先让你的类实现 OnClickListener

```
button1.setOnClickListener(this);
button2.setOnClickListener(this); 
```

在 onClick 方法中执行以下操作：

```
public void onClick(View view) {

    switch(view.getId()){

//here you need the id of the button i.e. its id in the xml file
    case R.id.button1:
        // do whatever you want button1 to do
        break;
    case R.id.button2:
        // do whatever you want button2 to do
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T16:21:59.670

您可以使用该`android:onClick`属性。为所有这些设置相同的 onClick 方法，如下所示：

```
<Button
[...]
android:onClick="handleButton"/>

<Button
[...]
android:onClick="handleButton"/> 
```

在你的java文件中：

```
public void handleButton(View v){
// do some stuff
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T16:23:44.677

像这样创建一键式侦听器，如果希望它们执行相同操作，请从所有按钮中调用它

```
View.OnClickListener yourClickListener = new View.OnClickListener() {
        public void onClick(View v) {
            //play the music
        }
    }; 
```

然后调用那个监听器

```
button1.setOnClickListener(yourClickListener);
button2.setOnClickListener(yourClickListener);
button3.setOnClickListener(yourClickListener); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-13T12:00:54.933

调用您想要工作的按钮的相同方法

```
<LinearLayout ...>
  <Button android:text="1" onClick="onButtonClicked" clickable="true" />
  <Button android:text="2" onClick="onButtonClicked" clickable="true" />
  <Button android:text="3" onClick="onButtonClicked" clickable="true" />
  <Button android:text="4" onClick="onButtonClicked" clickable="true" />
</LinearLayout> 
```

以上四个按钮有不同的文本，但 onClick 它们具有相同的方法，现在无需使用 findViewById 在 java 类中获取它们。

在显示布局的活动中，只需添加一个方法

```
public void onButtonClicked(View v){
     // do whatever needs to be done. For example:
     Toast.makeText(getApplicationContext(), ((Button) v).getText() + " clicked", Toast.LENGTH_SHORT).show(); 
} 
```

**第二种方法**

您无需为所有人​​重复相同的代码。您可以尝试一个通用的侦听器，例如：

```
private OnClickListener genericClickListener= new OnClickListener() { 
    public void Click(View v) {
            // do something
    } 
}; 
```

然后你所要做的就是注册所有三个按钮来使用这个genericClickListener。也就是说，里面`onCreate()`，

```
Button firstbtn  = (Button) findViewById(R.id.firstbtn); 
Button secondbtn = (Button) findViewById(R.id.secondbtn); 
Button thirdbtn  = (Button) findViewById(R.id.thirdbtn); 

firstbtn.setOnClickListener(genericClickListener);
secondbtn.setOnClickListener(genericClickListener);
thirdbtn.setOnClickListener(genericClickListener); 
```

**第三种方法**

创建一个函数/方法，所有按钮的**onClick**调用相同`Method/Function`。

# c - 使用 Windows GUI 输入十进制值并显示相应的十六进制值

> ID：14923188
> 
> 赞同：-1
> 
> 时间：2013-02-17T16:18:37.970
> 
> 标签：c, dev-c++

如何从 C 中的 windows API 设计中的文本框中检索输入的整数值以将它们转换为字符串，然后通过 C 中的静态标签以十六进制数字显示这些值。

代码：

```
 GetWindowText(hwndtext1, hexval, 256);

    for (i = sizeof(hexval); i >= 0; i--)
      {     
        buf[i] = atoll(hexval);

        ulltoa(buf[i], szBuffer, 16);
        SetWindowText(hwndStatic3, szBuffer);

        } 
```

--------编辑-------- 我希望能够根据十进制输入显示十六进制数字。因此，在我用 c 开发的 GUI 上，我可以在文本框中写入十进制数字，并且我想在单独的文本框中显示十进制的十六进制值。

- - - - - - -编辑 - - - - - - - - -

我稍微修复了代码，现在只显示十六进制数的最后一个字节。

例如。如果十进制输入是 2000.... 十六进制输出仅显示 d0。当正确的十六进制输出应该是 7d0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:55:58.657

此函数将整数值转换为 0x0 格式的十六进制字符串。第一个 int 是您的数字，第二个实际上需要一个 char（通常是 'a' 或 'A'）来确定 10 到 15 个字符。

```
char *dtox(int d, int c){
static char buf[80];
if (0==d)return "0x0";
int p=0;
c-=10;
if (0>d) { buf[p++]='-'; d=-d;}
buf[p++]='0';buf[p++]='x';
unsigned int i=1<<28;
while (i>d) i/=16;
while (0<i){
   ((d/i)>9) ? (buf[p++]=(c+(d/i))) : (buf[p++]=('0'+(d/i)));
   if (i<=d) d=d%i;
   i/=16;
}
buf[p]=0;
return buf;
} 
```

我只发布这个，因为 itoa 是一个非标准函数，真正的问题可能是传递你的函数所期望的 buf[256] （一个 char 值）而不是 buf （一个 char 数组，又名字符串）

# asp.net-mvc-3 - MVC3 中的弹出视图

> ID：14923189
> 
> 赞同：0
> 
> 时间：2013-02-17T16:18:48.580
> 
> 标签：asp.net-mvc-3

我想在 MVC3 中创建一个 popView 模型：

这是我的行动链接：

```
 @Html.ActionLink("Edit", "Edit", "Category", new { categoryId = Item.Id }, null) 
```

这也是相关的行动结果！

```
 public ActionResult Edit(Guid categoryId)
        {
            var category = _categoryService.GetCategory(categoryId);
            return View(category);
        }

        [HttpPost]
        public ActionResult Edit(CategoryViewModel categoryViewModel)
        {
            if(ModelState.IsValid)
            {
                _categoryService.UpdateCategory(categoryViewModel.Id);
            }
            return View();
        } 
```

我想打开这个页面（在弹出窗口中操作），我该怎么做？？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:24:17.970

将您的操作链接更改为：

```
@Html.ActionLink("Edit", "Edit", "Category", new { categoryId = Item.Id }, new { target="_blank" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:24:36.100

使用此示例可能有用：

```
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~Content/themes/base/jquery.ui.all.css") rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.js")" type="text/javascript"></script>
    </head> 
```

现在让我们深入了解模态弹出窗口工作所需的 jQuery 代码。

jQuery代码：

```
<script type="text/javascript">

$.ajaxSetup({ cache: false });

$(document).ready(function () {
    $(".openDialog").live("click", function (e) {
        e.preventDefault();

    $("<div></div>")
        .addClass("dialog")
        .attr("id", $(this)
        .attr("data-dialog-id"))
        .appendTo("body")
        .dialog({
        title: $(this).attr("data-dialog-title"),
        close: function () { $(this).remove(); },
        modal: true,
        height: 250,
        width: 400,
        left: 0

    })
    .load(this.href);
    });

    $(".close").live("click", function (e) {
        e.preventDefault();
        $(this).closest(".dialog").dialog("close");
    });
});
</script> 
```

在下面定义的 ActionLink 中，我们使用了以下 3 个属性，

*   `class`- 表示点击这个链接，执行上面写的jQuery
*   `data_dialog_id`
*   `data_dialog_title`– 用于显示 jQuery modal popup 的标题

剃刀代码

```
@Html.ActionLink("Open Jquery Modal Popup", "About", "Home",null,new {
@class = "openDialog",
data_dialog_id = "aboutDialog",
data_dialog_title = "About Us"
}) 
```

下面是“Home”控制器的“About”动作，当用户点击上面的 ActionLink 时会调用它。

控制器

```
public ActionResult About()
{
    return View();
} 
```

下面是上述 (About) 操作将显示的 About.cshtml 视图。请注意，我已将布局设置为空，这样我就不会出现重复的主模板。

`About.cshtml`看法

```
@{
    ViewBag.Title = "About Us";
    Layout = null;
}

<h2>About</h2>
<p>
Hello, this is a modal jquery popup !
</p>
<p><a href="javascript:void(0);" class="close">Close this Window</a></p> 
```

# asp.net - 如何配置 SQL Server 以使用带有 Windows 身份验证的 ASP.NET MVC？

> ID：14923191
> 
> 赞同：3
> 
> 时间：2013-02-17T16:18:54.497
> 
> 标签：asp.net, sql-server, asp.net-mvc, windows-server-2008, connection-string

这是我的连接字符串：

```
<add name="MyDb" providerName="System.Data.SqlClient" connectionString="Server=localhost;Data Source=.\MSSQLSERVER;Initial Catalog=MyDb;Integrated security=SSPI;" /> 
```

它在我的本地主机机器上工作得很好，但在我的服务器上，部署我的应用程序后，它不想工作，它给了我这个错误：

> [SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：25 - 连接字符串无效）]

当我更改连接字符串以使用帐户凭据 - sa 时，它连接得很好，所以我确切地知道这是 sql server 配置错误的问题。

**所以我的问题是：**我刚刚安装了 sql server 实例，如何配置它以允许我的 asp.net mvc 应用程序的 Windows 身份验证？

**编辑：**好吧，毕竟，我再次查看了我的连接字符串，并删除了 Data Source=.\MSSQLSERVER。它有帮助，现在一切正常，谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T17:46:16.317

如果您的应用程序在 IIS 的 DefaultAppPool 下运行，它使用“IIS APPPOOL\DefaultAppPool”帐户以集成模式访问 db。所以要在 SqlServer 中授予帐户：

1.  打开 sqlserver 实例
2.  展开安全性，选择“新登录”
3.  为登录名设置“IIS APPPOOL\DefaultAppPool”，从“用户映射”选项卡中为该帐户授予数据库访问权限。
4.  单击确定创建。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:26:11.477

查看[`following article on MSDN`](http://msdn.microsoft.com/en-us/library/ms188670.aspx)说明如何更改 SQL Server 的身份验证模式的说明。

您可以 SQL Server 管理工作室：

> 1.  在 SQL Server Management Studio 对象资源管理器中，右键单击服务器，然后单击“属性”。
> 2.  在“安全”页面的“服务器身份验证”下，选择新的服务器身份验证模式，然后单击“确定”。
> 3.  在 SQL Server Management Studio 对话框中，单击确定以确认重新启动 SQL Server 的要求。
> 4.  在对象资源管理器中，右键单击您的服务器，然后单击重新启动。如果 SQL Server 代理正在运行，它也必须重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:48:23.310

首先弄清楚您的网页在哪个 Windows 帐户下运行。例如，您可以打印以下值：

```
User.Identity.Name 
```

如果它是“NETWORK SERVICE”之类的仅限本地帐户，则必须更改帐户。如果您在 IIS 中运行，则该帐户是应用程序池的属性。

知道帐户后，您可以在 SQL Server 中授予该帐户登录权限。

# mysql - 获取具有相同查询的行数和受数量限制的行数

> ID：14923200
> 
> 赞同：2
> 
> 时间：2013-02-17T16:20:25.177
> 
> 标签：mysql, select, count

假设在表 A 中有很多行，列值为 a、b、c、d。

其中，我想要列值为“c”的 10 行，同时还计算列值为“c”的行总数。

我试过了：

```
select count(*),* from A where column like 'c'; (without limit)

select count(*),* from A where column like 'c' limit 10; 
```

这甚至可能吗？还是我必须发出两个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:23:57.840

```
SELECT n.*, AA.cnt 
FROM nei_product_background_category c
    INNER JOIN nei_backgrounds n ON n.background_id = c.background_id
    INNER JOIN ( 
        SELECT cc.product_id, COUNT(*) AS cnt 
        FROM nei_product_background_category cc
                    INNER JOIN nei_backgrounds nn ON nn.background_id = cc.background_id
        GROUP BY cc.product_id
    ) AA ON c.product_id = AA.product_id
WHERE
    c.product_id = 578
LIMIT 10 
```

# javascript - 使用 JavaScript 将所有元标记名称和值保存到对象

> ID：14923202
> 
> 赞同：0
> 
> 时间：2013-02-17T16:20:28.173
> 
> 标签：javascript

我需要读取特定页面上的所有元标记，并将每个元名称和内容值存储在将用于谷歌标签管理器的数据层数组中。

我想获取所有元标记，然后我希望能够相应地推送数组中的每个值。

我有以下代码，但如果我有 20-30 个元标记，我认为这不是最好的方法。我希望有人可以帮助我改进此代码！

```
<html>
<head>
    <title> test metas</title>
    <meta name="ABC" content="dummy"/>
    <meta name="DEF" content="dummy"/>
    <meta name="JHK" content="dummy"/>
</head>
<body>
<script type="text/javascript" charset="utf-8">

function GTMMeta(name) { 
   var metas = document.getElementsByTagName('meta'); 
   for (i=0; i<metas.length; i++) { 
      if (metas[i].getAttribute('name') == name) { 
         return metas[i].getAttribute('content'); 
      } 
   } 
    return '';
} 

  dataLayer = [{}];

if (GTMMeta('ABC') !=''){
    dataLayer.push({'cmsName': GTMMeta('ABC')})
 }; 
if (GTMMeta('DEF') !=''){
  dataLayer.push({'transactionTotal': GTMMeta('DEF')});
}  

if (GTMMeta('JHK') !=''){
  dataLayer.push({'market': GTMMeta('JHK')});
}  
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:27:51.070

也许直接形成数组？

```
dataLayer = [];
var metas = document.getElementsByTagName('meta'); 
for (i=0; i<metas.length; i++) { 
   d={}
   d[metas[i].getAttribute('name')]=metas[i].getAttribute('content')
   datalayer.push(d)
} 
```

如果您希望数组有一些别名而不是名称（并且只获取这些别名），请使用：

```
aliases={'ABC':'cmsName','DEF':'transactionTotal', 'JHK':'market'}
dataLayer = [];
var metas = document.getElementsByTagName('meta'); 
for (i=0; i<metas.length; i++) { 
   d={}
   d[aliases[metas[i].getAttribute('name')]]=metas[i].getAttribute('content')
   aliases[metas[i].getAttribute('name')] && datalayer.push(d)
} 
```

附注：没有必要有`dataLayer=[{}]`,`dataLayer=[]`就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T16:37:44.823

为了避免每次都查看`<meta>`，一种方法是将所有名称/内容对放入*Object*中。

```
var metaObj = {}, m = document.head.getElementsByTagName('meta'), i = m.length;
while (i--) { // looping down will result in the same behaviour as stopping @ 1st
    metaObj[m[i].name] = m[i].content;
} 
```

然后直接从你的对象中获取你想要的东西

```
if (metaObj['ABC']) {
    dataLayer.push({'cmsName': metaObj['ABC']});
} 
```

* * *

您也可以通过循环第二个*Object*来自动化这些，类似于[Manishearth所建议的](https://stackoverflow.com/a/14923268/1615483)

```
var metaInterest = {'ABC':'cmsName','DEF':'transactionTotal', 'JHK':'market'}, o;
for (i in metaInterest)
    if (metaInterest.hasOwnProperty(i) && metaObj[i])
        o = {}, o[metaInterest[i]] = metaObj[i], dataLayer.push(o); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:29:11.953

我确信你可以对这段代码做很多小的调整来提高性能，但是 20-30 个标签*并不是*很多。您可以使用`.content`on`metas[i]`代替，`.getAttribute`但它将是微优化，尤其是对于仅处理 20-30 个项目。

检查性能改进的最佳地点是[http://jsperf.com](http://jsperf.com)

# ruby-on-rails-3.1 - 更新？Rails3.1中的方法

> ID：14923210
> 
> 赞同：0
> 
> 时间：2013-02-17T16:21:40.957
> 
> 标签：ruby-on-rails-3.1, ruby-1.8.7

我正在将 rails3.0 应用程序升级到 rails3.1.10 我有模型

```
class User < ActiveRecord::Base
belongs_to :account

.....

def some_method
  return unless self.account.updated?
  .......
end

end 
```

但是`.updated?`方法似乎从 Rails3.1.10 中删除了有没有其他选择？我需要的是跟踪父对象是否已更改

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:27:44.037

我认为您可以使用[ActiveModel::Dirty](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)`changed?`的一部分的方法。

编辑：

如果您想在保存后跟踪记录更改，您可以尝试[TrackIt gem](https://github.com/erez-rabih/trackit)，它提供了您想要的功能。

# ios - decelerationRate 属性不起作用

> ID：14923211
> 
> 赞同：1
> 
> 时间：2013-02-17T16:21:51.707
> 
> 标签：ios, objective-c, uiscrollview

我正在开发一个在滚动视图中显示大量照片（大约 650 张照片）的应用程序，为了使这个应用程序运行顺畅，我在滚动视图中只添加了三个 UIImage，一个代表第一页，第二个代表当前页面第三个用于下一页，所以当用户第一次启动应用程序时，第一张图片将在中间页面加载，最后一张图片将在上一页加载，第二张图片将在下一页加载，当用户向右滚动，中间页面将加载第二张图片，上一页将加载第一张图片，下一页将加载第三张图片，依此类推..

但是当用户快速滚动时，滚动视图的边界会出现，阻止用户滚动到下一页，只会反弹。

我的问题是如何使滚动视图滚动得更快，以便该`-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView` 方法调用得更快

我尝试`decelerationRate`了如下代码所示的属性，但我没有发现任何区别！我用对了还是有什么问题？

提前致谢

```
- (void)viewDidLoad
{

    scrollView = [[ScrollView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
    scrollView.delegate = self;
    //scrollView.decelerationRate= UIScrollViewDecelerationRateFast;

    [self.view addSubview:scrollView];

    scrollView.contentSize = CGSizeMake(960, 416);

    pageZero = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
    pageOne = [[UIImageView alloc]initWithFrame:CGRectMake(320, 0, 320, 480)];
    pageTwo = [[UIImageView alloc]initWithFrame:CGRectMake(640, 0, 320, 480)];

    //set array that holds images to be shown
    for(int i = 0 ; i < 10 ; i++)
        [pages addObject:[NSString stringWithFormat:@"%i.png",i]];

//load photos
    [self loadPageWithId:0 onPage:1];
    [self loadPageWithId:2 onPage:0];
    [self loadPageWithId:1 onPage:2];

//add 3 UIImage objects to the scrollView
    [scrollView addSubview:pageZero];
    [scrollView addSubview:pageOne];
    [scrollView addSubview:pageTwo];

    //scroll to the middle page without animation
    [scrollView scrollRectToVisible:CGRectMake(320,0,320,416) animated:NO];

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc]initWithTarget:self    action:@selector(singleTap)];
    [self.scrollView addGestureRecognizer:singleTap];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T12:34:59.030

If you have a `UIScrollView` with `pagingEnabled = YES`, then setting the `decelerationRate` property will not have any effect on the speed of the paging (as you've found out).

To get around this, you will need to set `pagingEnabled = NO` and manually implement the paging functionality yourself. See [this question and answer](https://stackoverflow.com/questions/11561992/sensitivity-scroll-speed-of-uiscrollview-with-paging) for how to do this.

# ios - iOS评估用户的SSL自签名证书

> ID：14923216
> 
> 赞同：2
> 
> 时间：2013-02-17T16:22:07.243
> 
> 标签：ios, security, ssl, ssl-certificate

我正在创建一个通过 SSL 与多个主机（服务器）通信的 iOS 应用程序。

我们正在使用 SecTrustEvaluate 方法评估对等（主机）证书信任，如果证书不受信任（通常是自签名），我们希望向用户显示证书详细信息，其中包括颁发者、DN、颁发日期、到期日期等。 . 以便他决定是否要信任证书。

我没有找到任何方法（提取并显示所有相关证书字段），我成功从 DER 证书中读取的唯一属性是使用方法的主题摘要：SecCertificateCopySubjectSummary。

我们怎样才能做到这一点？

# html - 如何在没有 javascript 的情况下提交选择选项？

> ID：14923218
> 
> 赞同：1
> 
> 时间：2013-02-17T16:22:37.740
> 
> 标签：html, forms, html5-canvas

我有这个，但由于某些原因，seller_email 输入没有提交。让我知道出了什么问题，我该如何解决。当然没有javascript。

```
<form name="input" action="mail.php" method="post">
name: <input type="text" name="name"><br>
<select name="seller_email" form="input">
<option value='hello@example.com'>hello@example.com</option>
</select>
 Address: <input type="text" name="bank_address"><br>

<input type="submit" id="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:26:13.597

您不需要`form="input"`在您的选择框中。我也会远离命名表单之类的输入，这可能是一个保留字。

```
<form name="myForm" action="mail.php" method="post">
 name: <input type="text" name="name"><br>
 <select name="seller_email">
  <option value='hello@example.com'>hello@example.com</option>
 </select>
 Address: <input type="text" name="bank_address"><br>
 <input type="submit" id="submit" value="Submit">
</form> 
```

# php - 获取数百万外部标题和描述的最快方法是什么？

> ID：14923221
> 
> 赞同：-1
> 
> 时间：2013-02-17T16:22:51.050
> 
> 标签：php, curl, web-scraping

我有一个包含 URL、标题和描述列的 Mysql 表。有超过 600 万行，每个 URL 列都有一个来自网络的 url。我现在需要为表中的每个 url 添加标题和元描述。我通过下载 dmoz 数据库并从那里获取任何标题和描述来完成部分工作，但我仍然有几百万个 URL。我知道这将是一个漫长的过程，我正在努力找出最快的方法来解决它。

我有以下代码，它使用 CURL 从 url 获取 Title 和 Meta:Decription，但我不确定如何最好地利用 php 来尽快完成工作。我想我应该先将 url 导出到文本文件，所以我们将查找保存到数据库，但我不知道如何从那里开始。我有一台专用服务器（E3-1230V2 和 32 GB）专门用于这项工作，所以电源就在那里，问题是如何最好地使用它......

任何和所有的建议表示赞赏！

这是卷曲代码：

```
function get_info($url)
{
$ch = curl_init();

curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$data = curl_exec($ch);
curl_close($ch);

return $data;
}

$html = get_info($url);

$doc = new DOMDocument();
@$doc->loadHTML($html);
$nodes = $doc->getElementsByTagName('title');
$title = $nodes->item(0)->nodeValue;

$metas = $doc->getElementsByTagName('meta');

for ($i = 0; $i < $metas->length; $i++)
{
$meta = $metas->item($i);
if($meta->getAttribute('name') == 'description')
$description = $meta->getAttribute('content');

insert into table SET Title ='".$title."', Description = '".$description."' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:55:31.890

您是否考虑过销售网络抓取即服务的公司？除了每小时获取数万个 URL 之外，获取标题和元标记将是他们可以做的一些最简单的事情。搜索[作为服务的爬行](http://google.com/search?q=crawling+as+a+service)有一些与这些公司的链接，我希望他们能够更快地做到这一点，并且最终比你自己更便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:29:10.777

我认为大部分时间都花在通过 HTTP 与远程服务器的交互上，而不是与本地数据库的交互上，因此您可能可以通过在多个并行运行的进程之间分配工作来加快进程。然后，您需要根据需要运行尽可能多的进程以完全利用您的网络带宽。

# ruby-on-rails - 从 Rails 控制台访问数据库

> ID：14923222
> 
> 赞同：1
> 
> 时间：2013-02-17T16:23:05.437
> 
> 标签：ruby-on-rails, console

当我打开我的 rails 控制台，运行 ./script/console (script folder contains a console file) 时，我在控制台中输入 Users.find(:all) 并收到此消息

```
'NameError: uninitialized constant User
    from (irb):1
' 
```

每次在控制台中运行命令时，我都会收到类似的消息（知道我没有通过 irb 连接）。我用谷歌搜索了一下，看到堆栈上有一些类似的问题，但我没有得到任何满意的答案。有人有想法吗？

Eidt 1：我不知道它是否有用，但这里建议发布用户模型类

```
require "digest/sha1"
require_dependency "event"

class User < ActiveRecord::Base
  include UrlLinting
  include Gitorious::Authorization

  has_many :projects
  has_many :memberships, :dependent => :destroy
  has_many :groups, :through => :memberships
  has_many :repositories, :as => :owner, :conditions => ["kind != ?", Repository::KIND_WIKI],
    :dependent => :destroy
  has_many :cloneable_repositories, :class_name => "Repository",
     :conditions => ["kind != ?", Repository::KIND_TRACKING_REPO]
  has_many :committerships, :as => :committer, :dependent => :destroy
  has_many :commit_repositories, :through => :committerships, :source => :repository,
  :conditions => ["repositories.kind NOT IN (?)", Repository::KINDS_INTERNAL_REPO]
  has_many :ssh_keys, :order => "id desc", :dependent => :destroy
  has_many :comments
  has_many :email_aliases, :class_name => "Email", :dependent => :destroy
  has_many :events, :order => "events.created_at asc", :dependent => :destroy
  has_many :events_as_target, :class_name => "Event", :as => :target
  has_many :favorites, :dependent => :destroy
  has_many :feed_items, :foreign_key => "watcher_id"
  has_many :content_memberships, :as => :member

  # Virtual attribute for the unencrypted password
  attr_accessor :password, :current_password

  attr_protected :login, :is_admin, :password, :current_password

  # For new users we are a little more strict than for existing ones.
  USERNAME_FORMAT = /[a-z0-9\-_\.]+/i.freeze
  USERNAME_FORMAT_ON_CREATE = /[a-z0-9\-]+/.freeze
  validates_presence_of     :login, :email,               :if => :password_required?
  validates_format_of       :login, :with => /^#{USERNAME_FORMAT_ON_CREATE}$/i, :on => :create
  validates_format_of       :login, :with => /^#{USERNAME_FORMAT}$/i, :on => :update
  validates_format_of       :email, :with => Email::FORMAT
  validates_presence_of     :password,                   :if => :password_required?
  validates_presence_of     :password_confirmation,      :if => :password_required?
  validates_length_of       :password, :within => 4..40, :if => :password_required?
  validates_confirmation_of :password,                   :if => :password_required?
  validates_length_of       :login,    :within => 3..40
  validates_length_of       :email,    :within => 3..100
  validates_uniqueness_of   :login, :email, :case_sensitive => false
  validates_acceptance_of :terms_of_use, :on => :create, :allow_nil => false
  validates_format_of     :avatar_file_name, :with => /\.(jpe?g|gif|png|bmp|svg|ico)$/i, :allow_blank => true

  before_save :encrypt_password
  before_create :make_activation_code
  before_validation :lint_identity_url, :downcase_login
  after_save :expire_avatar_email_caches_if_avatar_was_changed
  after_destroy :expire_avatar_email_caches

  state_machine :aasm_state, :initial => :pending do
    state :terms_accepted

    event :accept_terms do
      transition :pending => :terms_accepted
    end

  end 
```

编辑 2：当我运行控制台时，我省略了一些错误消息（但控制台加载）

```
 /var/www/gitorious/config/environment.rb:25:RuntimeError: Your config/gitorious.yml does not have an entry for your current Rails environment. Please consult config/gitorious.sample.yml for instructions.
/usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/rails/backtrace_cleaner.rb:2:NameError: uninitialized constant ActiveSupport::BacktraceCleaner
/usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/console_with_helpers.rb:5:NameError: uninitialized constant ApplicationController 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-03T19:42:07.357

从错误中，我可以看到您从`irb`. 如果您想从 rails 控制台访问表，`irb`则应在命令行中键入：

```
rails console 
```

其次，如果你想从 users 表中获取所有记录，你应该使用：

```
User.all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:24:16.820

假设您的`User`模型定义如下： `app/models/user.rb`

```
class User < ActiveRecord::Base
  #Your things
end 
```

`User`不使用型号名称（即）`Users`：

```
User.find(:all) or User.all  # This will display all user records 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T18:42:54.933

这就是诀窍：我没有运行./script/console，而是运行

```
export RAILS_ENV=production && ./script/console 
```

# gwt - 从 GXT 中的小部件访问值

> ID：14923224
> 
> 赞同：0
> 
> 时间：2013-02-17T16:23:37.280
> 
> 标签：gwt, gwt2, gxt

我是 GWT 的 Sencha GXT 框架的新手，如何从生成`TextFields`的 GXT 中获取值以便将其发送到服务器？

```
import com.extjs.gxt.ui.client.widget.layout.FlowLayout;
import com.extjs.gxt.ui.client.widget.layout.FormData;
import com.extjs.gxt.ui.client.widget.layout.FormLayout;
public class Form extends LayoutContainer{
TextField<String> lastName = new TextField<String>();
    lastName.setFieldLabel("Last Name");
    fieldSet.add(lastName, formData); } 
```

在客户端，我如何从中获取输入的值`lastName` `TextField`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:50:58.157

采用`lastName.getValue();`

根据[GXT TextField api](http://dev.sencha.com/deploy/gxt-3.0.0/javadoc/gxt/com/sencha/gxt/widget/core/client/form/TextField.html)

# jquery - 使用 Jquery 检查必填字段验证器

> ID：14923225
> 
> 赞同：-2
> 
> 时间：2013-02-17T16:23:41.273
> 
> 标签：jquery, asp.net, validation

我有多个带有多个 asp.net 必需字段验证器的 div 容器。我想显示带有 Div Id 的摘要报告。

就像“'Div1' 中的某些字段为空白。“'Div2' 中的某些字段为空白。

“可以通过 Jquery 实现吗？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:33:02.787

```
var flag=true;
var summary=""
$('#div1 input:not([type=checkbox])').each(
    function(){
       if (this.value==""){
         flag=false
       }
    }
);
if(flag){
   summary+="Some fields are blank inside div1"
} 
```

对每个 div 重复此操作（手动或通过 for 循环）。

基本上，在每个 div 中，我都会选择所有输入字段，并一一检查它们是否为空。我排除了复选框，因为未选中的复选框并不意味着“空”

# scheme - 想在 Scheme48 中定义一条记录

> ID：14923226
> 
> 赞同：3
> 
> 时间：2013-02-17T16:23:44.147
> 
> 标签：scheme, scheme48

我在 scheme48 中尝试了一个定义记录类型的示例，但它似乎不起作用。怎么了？

```
(define-record-type circle
 (make-circle r)
 circle?
 (r get-radius)) 
```

给

```
Error: undefined variable
   circle
   (package user) 
```

我尝试了其他示例，得到了类似的结果。我什至直接从 scheme48 用户手册中尝试了一个示例。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:38:13.110

在[手册](http://s48.org/0.57/manual/s48manual_42.html)中说明 a`record`定义如下：

```
(define-record-type tag type-name
  (constructor-name field-tag ...)
  predicate-name
  (field-tag accessor-name [modifier-name])
  ...) 
```

因此，在您的示例中，似乎`type-name`缺少 。尝试这个：

```
(define-record-type circle :circle
  (make-circle r)
  circle?
  (r get-radius)) 
```

并且不要忘记先导入库：

```
,open define-record-types 
```

# c# - 带进度条的滑块

> ID：14923231
> 
> 赞同：0
> 
> 时间：2013-02-17T16:24:19.550
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我开发了一个从网络播放音频的 Windows Phone，并且我有 Slider(normal) 来显示音频 Position 的进度。

我想添加类似音频缓冲过程的进度。

我可以使滑块右（灰色）不可见吗？有任何构建控制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:44:12.717

> 您可以使用[ProgressBar](http://msdn.microsoft.com/en-us/library/system.windows.controls.progressbar.aspx)类向您的应用程序添加进度条。但是，如果您计划添加不确定的进度条，则使用 ProgressBar 会降低应用程序的性能。这是因为 ProgressBar 的当前实现在 UI 线程上运行不确定的进度条，而不是在合成器线程上。相反，您可以使用 CustomIndeterminateProgressBar 示例添加在合成器线程上运行的不确定进度条以获得更好的性能。本主题介绍示例的工作原理，以及如何使用它向应用程序添加不确定的进度条。

请看这篇[文章](http://msdn.microsoft.com/en-us/library/gg442303%28v=vs.92%29.aspx) 可见的折叠

# php - PHP 我可以用 call_user_func 调用不存在的函数吗

> ID：14923235
> 
> 赞同：1
> 
> 时间：2013-02-17T16:24:36.483
> 
> 标签：php, overloading

这就是我想要做的：我有一个对象

```
class TestObject {
      public function __call($name,$args){
        if($name == 'somemethod'){
          print "Yesssss!!!!!!";
        }
      }
} 
```

比在代码中我这样调用这个方法：

```
$obj = new TestObject()
$obj->somemethod()  // should work according to http://www.php.net/manual/en/language.oop5.overloading.php#object.call
call_user_func(array('myobject','somemethod')) // this does not work!!! 
```

有没有办法让最后一个例子工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:26:17.643

```
$obj_name = 'myobject';
$method_name = 'somemethod';
${$obj_name}->${$method->name()}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:27:04.330

您可以使用

```
call_user_func(array($obj,'somemethod')); 
```

或者

```
$method = 'somemethod';
$obj->$method(); 
```

# c++ - 如何在 C++ 中实现 2 路依赖注入？

> ID：14923236
> 
> 赞同：3
> 
> 时间：2013-02-17T16:24:37.957
> 
> 标签：c++, dependency-injection

我正在创建一个 MVC 应用程序，我需要 GUI 与控件对话（调用控件类中的方法），我需要控件与 GUI 对话（显示与模型更改相关的输出消息等数据）。因此，我需要 GUI 拥有对控件的引用（或指针），反之亦然。我想使用依赖注入建立这些关系。

任何一种双向 DI 的问题在于，在创建第一个对象之前，您不能将第一个对象传递给第二个对象，但是在创建时您不能将第二个对象传递给第一个对象。

如何实现这种 2 路 DI？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T16:39:38.507

依赖注入对于您所描述的工作来说只是错误的工具。

任何拥有控件集合的“GUI 对象”（例如对话框/窗口）都应该具有对每个控件的引用。在这种情况下，窗口“知道”它的控件，但相反的方向不应该是正确的，否则你会失去所述控件的一般性（甚至 [在某种程度上] 使用运行时依赖性计算）。

相反，控件应通过公开事件/信号将消息传递给“GUI 对象”。如果控件和 GUI 在不同的线程上运行，则控件的事件处理程序应该通知 GUI 调度程序（我不知道没有某种调度程序机制的 GUI 框架）。如果您告诉我们您正在开发什么 GUI 框架，我也许可以扩展答案以包含一个简短的示例。

编辑：由于您在 QT 上进行开发，我建议您从阅读[QML 中的 Signal 和 Handler 事件系统开始](http://doc.qt.digia.com/4.7-snapshot/qmlevents.html)。不幸的是，我对 QT 的适应不够，无法自己给你一个示例，但也许另一个用户可以。

# height - 高度 100% 浮动 div：自动父级

> ID：14923239
> 
> 赞同：3
> 
> 时间：2013-02-17T16:24:59.510
> 
> 标签：height, sticky-footer, css

我有一个带有粘性页脚的 CSS 布局。该网站的主要部分是一些侧边栏和一个内容框。但我似乎无法让上下文框或周围的 div 扩展到“100%”的高度。

如果内容框包含短文本，它不会跨越整个高度，如果它包含大量文本，则周围的 div 不会。

结果应该是内容框和浮动背景扩展到页脚正上方的页面底部的站点。

编辑：将“溢出：隐藏”添加到#inner 修复了背景不与长内容对齐的问题。但我仍然无法让#content div 扩展到整个页面高度。

[http://jsfiddle.net/s6yf3/](http://jsfiddle.net/s6yf3/)（维基百科的标志只是为了更好的可视化）

```
<div id="wrapper">
  <div id="inner">   
    <header>
      <a href="#">
        <img src="//upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png" alt="Logo" width=400 height=100 />
      </a>
      <nav>
        <ul>
          <li><a href="#">Menu1</a></li>
          <li><a href="#">Menu2</a></li>
        </ul>
      </nav>
    </header>
    <div id="content">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec libero vitae massa bibendum molestie ac non justo. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Praesent in dui arcu, nec ornare nibh.
    </div>
    <div id="sidebar">
      <div>Element</div>
      <div>Element</div>
      <div>Element</div>
    </div>
  </div>
</div>
<div id="footer">
  <p>Sticky Footer</p>
</div> 
```

```
body {
  margin:0;
  padding:0;
  background:#eee;
}

html,body {
  height:100%; 
}

#wrapper {
  width:400px;
  height: auto !important;
  height:100%;
  margin:0 auto;
  min-height:100%;
}

#inner {
  height: 100%;
  padding:0 0 55px 0;
  background-color: #ccc;
  background-image: url(//upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png);
  background-repeat: repeat-x;
  background-position: right bottom;
  overflow: hidden;
}

#inner p {
  margin:1em 1em 0;
  padding:.15em .25em;  
}

#inner header {
  margin: 0; 
  padding: 0;
  height: 160px;
}

#wrapper header nav ul {
  list-style-type: none;
  margin-top: 4px;
  padding-left: 240px;
  height: 46px !important;
  z-index: 999;
  position: absolute;
}

#wrapper header nav ul li {
  display: inline-block;
}

#wrapper header nav ul li a {
  font-size: 16px;
  font-weight: bold;
  color: #000;
  height: 40px !important;
  line-height: 40px;
  padding-left: 10px;
  padding-right: 10px;
  text-decoration: none;
  display: block;
}

#wrapper header nav ul li a:hover {
  background-color: #333 !important;
  color: #fff;
  z-index: 2;
}

#wrapper header nav ul li.active a {
  font-size: 18px;
  font-weight: bold;
  background-color: #333 !important;
  color: #fff;
  height: 46px !important;
  line-height: 46px;
  display: block !important;
  padding-left: 10px;
  padding-right: 10px;
  text-decoration: none;
}

#sidebar div {
  width: 100px;
  min-height: 60px;
  background-color: #ddd;
  margin-bottom: 20px;
}

#content {
  width: 250px;
  height: 100%;
  position: relative;
  float: right;
  background-color: #ddd;
}

#footer {
    width:400px;
    height:55px;
    margin:-55px auto 0;
    background:#222;
    overflow:hidden;
}

#footer p{
    margin:0;
    padding:.5em 0 0;
    font-weight:bold;
    text-align:center;
    color:#FFF;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:16:34.557

因为#inner 和#wrapper 的高度为100%，所以我将#footer 放在#inner 中，并从#inner 中移除了65px 的底部填充。

jFiddle：http: [//jsfiddle.net/rPGTq/](http://jsfiddle.net/rPGTq/)

```
<div id="wrapper">
  <div id="inner">   
    <header>
      ...
    </header>
    <div id="content">
      ...
    </div>
    <div id="sidebar">
      ...
    </div>
    <div id="footer">
      <p>Sticky Footer</p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:34:24.423

给`overflow:hidden;`包装器 div，`margin-left: -55px`从页脚中删除高度，它应该按预期运行。

更新的小提琴

[http://jsfiddle.net/Tnc4t/4/](http://jsfiddle.net/Tnc4t/4/)

# log4j - log4j 在 netbeans 7.0 中不起作用

> ID：14923244
> 
> 赞同：2
> 
> 时间：2013-02-17T16:25:32.153
> 
> 标签：log4j, netbeans-7, struts-1

我是 log4j 的新手并正在学习它。我想在我正在使用 netbeans IDE 7.0 版本（又使用 Glassfish 服务器）开发的 Web 应用程序中使用它

我已经在我的一个动作类中实例化并使用了一个记录器对象。我已将 log4j.properties 文件连同 web.xml 和 struts-config.xml 放在 WEB-INF 下

现在，当我运行应用程序时，出现以下错误： **严重：log4j:WARN 找不到记录器的附加程序（org.apache.struts.faces.application.ActionListenerImpl）。严重：log4j:WARN 请正确初始化 log4j 系统。严重：log4j:WARN 有关详细信息，请参阅[http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig)。**

我做了一些搜索，似乎这个错误是因为找不到我的 log4j.properties 文件。我看到几个帖子说需要将属性文件放在类路径中。我想这意味着 WEB-INF/classes 文件夹。但是，如果我想直接**通过 Netbeans**添加属性文件，我应该把它放在哪里？另外，我的 log4j.properties 文件中是否有可能导致找不到它？这是我的属性文件中的内容：

```
# configuring the root logger

log4j.rootlogger = DEBUG,FILE

# path of the logs folder

log = /logs

# configuring the file appender

log4j.appender.FILE = org.apache.log4j.FileAppender
log4j.appender.FILE.File = $(log)/test.log

# defining layout for the FileAppender

log4j.appender.File.Layout = org.apache.log4j.PatternLayout
log4j.appender.File.Layout.conversionPattern = %m%n 
```

最后，如果我有一个如上定义的属性文件，我还需要在我使用日志记录的类中使用 PropertyConfigurator.configure() 吗？

我正在竭尽全力试图找出为什么这不起作用。任何建议或解决方案都会非常有帮助。

# php - 无法在电子邮件中插入换行符

> ID：14923250
> 
> 赞同：-1
> 
> 时间：2013-02-17T16:26:14.307
> 
> 标签：php, email

我使用我自己的`send_mail`函数，似乎无法向它传递新行。

我尝试了[双引号修复](https://stackoverflow.com/questions/3073382/newline-not-working-in-php-mail)，但它似乎不起作用。调用我的函数时，这些新行可能会丢失？

功能：

```
abstract class util {
    ...
    static function send_email($to,$from,$subject,$message){
        $headers  = 'MIME-Version: 1.0' . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
        $headers .= 'To: '.$to.'' . "\r\n";
        $headers .= 'From: '.$from.'' . "\r\n";
        mail($to, $subject, $message, $headers);        
    }
    ...
} 
```

电话：

```
 $subject = "Your email activation for ". DOMAIN;
    $message = "Dear ".$this->name.", \r\n Welcome to ********. Click the link below to activate your account and get started. \r\n ".VERIFY_LINK."?code=".$this->code."&id=".$this->id;
    util::send_email($this->email, EMAIL_REGISTER, $subject, $message); 
```

然而电子邮件最终总是单行

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:27:40.227

使用`$message = nl2br($message)`函数将 \n 转换为换行符，因为您的电子邮件是 html 格式。`<br />`或者您可以使用标签而不是 \n 换行来编写您的消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:28:34.503

尝试使用`<br/>`标签而不是 /n？

# c++ - 修复 Allegro 5 中的图像失真

> ID：14923252
> 
> 赞同：1
> 
> 时间：2013-02-17T16:26:32.760
> 
> 标签：c++, graphics, allegro, allegro5

我在 Allegro 5 上遇到了一些关于其位图库的有趣行为。本质上，当我尝试加载同一图像的 bmp 或 png 时，默认情况下，该图像会经过某种抗锯齿或模糊过程，从而为我提供失真的图像。有没有办法解决这个问题，以便我可以逐个像素地渲染图像像素？

![截屏](../Images/5cf74b228ba3f3f00ec8f97ac5187993.png)

该图像是我的 allegro 渲染窗口的放大视图，以强调伪影，旁边还有一个小镀铬窗口，显示图像应该是什么样子。第一个图像是加载 png 的快板，第二个加载位图的快板，第三个是 chrome 窗口中的正确源图像，已被拖动到其他图像旁边。

[这个 pastebin](http://pastebin.com/f3A7KgWh)中的代码是 Allegro 5 的入门教程的样板。

我试过摆弄 allegro 的显示标志，搜索网络和这个网站，但找不到答案。如果细节很重要，我正在使用带有最新 mingw 和 allegro 5.0.8 的 netbeans。

感谢您的时间。

-德文

# stata - Outsheet 以创建逗号分隔的 .txt

> ID：14923255
> 
> 赞同：0
> 
> 时间：2013-02-17T16:26:49.967
> 
> 标签：stata

我在 Stata 中的变量采用以下形式：

```
 First Name: Allen
  Last Name: Von Schmidt
  Birth Year: 1965
  County: Cape May
  State: New Jersey

  First Name: Lee Roy
  Last Name: McBride
  Birth Year: 1967
  County: Cook
  State: Illinois 
```

我想超出它们以在 .txt 中创建逗号分隔的行：

```
 Allen,Von Schmidt,1965,Cape May, New Jersey
 Lee Roy,McBride,1967,Cook, Illinois 
```

我怎样才能使用 outsheet （或其他命令）来做到这一点？我需要先将数字变成字符串吗？我需要先为每个变量添加逗号吗？谢谢！

会像以下工作吗？

```
outsheet first last birth_year county state using FileName.txt, comma nolabel noquote 
```

如果我想做同样的事情但变量是“”分隔的，我会删除以前的stata代码中的noquote吗？

例如，假设我可能想要一个输出：

```
 "Allen","Von Schmidt","1965","Cape May","New Jersey" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:18:50.373

这看起来更像是您希望使用该`file`命令执行的一项工作，以完全控制写入文件的内容（特别是如果您有一些可能有问题的 ASCII 字符，例如重音符号，这些字符在名称中很常见）。详情请参阅`h file`。

我不确定我是否完全了解您的数据集中的内容以及格式，因此我将避免编写不适合您的设置的工作示例。但是，该`file`命令非常简单（您可以将其`outsheet`视为它的包装器）。

# java - 如何在启动页面设置会话值

> ID：14923259
> 
> 赞同：0
> 
> 时间：2013-02-17T16:26:59.107
> 
> 标签：java, jsp, jakarta-ee, servlets

我试图在我的启动页面或当我第一次访问我的 webapp 并在用户登录时更改它时设置会话值。这要怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:42:30.423

会话跟踪是使用以下任何一种方式完成的。

```
1.Using cookies (HttpSession)
2.Using URLrewriting
3.Hidden form fields 
```

我将只讨论第一个选项，因为它是最常见的。它使用[HttpSession](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)，这是一种可用于任何 Java EE 实现的更高级别的 API。

在登录/开始页面中，

```
HttpSession session = request.getSession();
session.setAttribute("username",username); 
```

在其他页面中，

```
if(session.getAttribute("username")==null)
{
//forward to login page.
} 
```

# java - 使用 if 语句将 JPanel 添加到框架

> ID：14923264
> 
> 赞同：0
> 
> 时间：2013-02-17T16:27:33.287
> 
> 标签：java, swing, if-statement, actionlistener, jmenuitem

我正在尝试通过单击 JMenuItem 将 JPanel 添加到我的框架中。我查看了过去的帖子，并尝试使用：

```
getContentPane().add(myJPanel)
revalidate();
repaint(); 
```

无济于事。我的 Game 类现在只是一个具有大小设置和背景颜色的构造函数。哦，抱歉代码乱七八糟，我已经删除了我的非工作原件并迅速完成了这项工作，以了解我尝试过的内容。任何建议将不胜感激。

```
package game;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class Main extends JFrame{

static boolean gameActive = false;
Game game;
JMenuBar menuBar;
JMenu file;
JMenuItem startGame;
JMenuItem checkScore;
JMenuItem closeGame;
int userScore;

public Main() {

    game = new Game();
    gameActive = false;

    //set JMenuBar
    menuBar = new JMenuBar();
    file = new JMenu("File");
    startGame = new JMenuItem("Start Game");
    checkScore = new JMenuItem("Check Score");
    closeGame = new JMenuItem("Close Game");
    menuBar.add(file);
    file.add(startGame);
    file.add(checkScore);
    file.add(closeGame);

    startGame.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            gameActive = true;
        }

    });

    if(gameActive == true){
        getContentPane().add(game);
        revalidate();
        repaint();
    }

    checkScore.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(checkScore, "your Score is " + userScore);

        }

    });

    closeGame.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            System.exit(0);
        }
    });

    setJMenuBar(menuBar);

    //JFrame Properties
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(400, 300);
    setLocationRelativeTo(null);
    setTitle("BattleGrounds");
    setResizable(false);
    setVisible(true);

}

   public static void main(String[] args){
       SwingUtilities.invokeLater(new Runnable(){
           public void run(){
                    new Main();
           }
       });
   }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:31:04.283

将您的语句移动到您的*内部，*`ActionListener`而不是将它们放在构造函数中：

```
startGame.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        gameActive = true;
        add(game);
        revalidate();
        repaint();
    }
}); 
```

请注意，`gameActive`检查对于当前代码是多余的。也`getContentPane().add(game)`可以简单地写成`add(game)`。

请注意，[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)是专门为管理此类功能而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:32:50.460

块内的代码`if`将永远不会被执行，因为`gameActive`在调用构造函数时为假

```
 if(gameActive == true){
    getContentPane().add(game);
    revalidate();
    repaint();
} 
```

单击时，您需要显示您的游戏活动`startGame`；**但是**您必须检查是否已`game`添加到您`contentPane`的菜单中，因此当用户多次单击菜单时，它不会`game`每次都添加新实例

```
startGame.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
       gameActive = true;
       if(game == null) {
          game = new Game(); // remove the game creation from the constructor
          getContentPane().add(game);           
       }
    }

}); 
```

# c# - 我的 Session 对象什么时候会死掉？

> ID：14923270
> 
> 赞同：1
> 
> 时间：2013-02-17T16:27:56.630
> 
> 标签：c#, asp.net, asp.net-mvc

我是学习 MVC 4(4.5) 的 asp.net 新手。当他的登录信息发布时，我运行以下代码将登录用户名存储在会话中

```
[Anonymous]
public ActionResult Login(LoginModel model)
{
    Session["Username"]=model.Username;
    ///something else
} 
```

在另一个文件中的某个地方我可以使用`Session["Username"]`. 好的，我对我目前的困惑的问题是什么时候该对象将被垃圾收集或销毁。

`session_start()`我知道在另一种脚本语言（如 PHP）中，我必须调用 `session_end()`所有需要使用此类似会话对象数据的文件。我在新创建的 MVC 4 项目中找不到相同的东西，但身份验证机制似乎在某处为我完成了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:35:29.727

> 何时该对象将被垃圾收集或销毁。

会话到期时。会话状态在您的 web.config 中使用[`<sessionState>`](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.100%29.aspx)节点进行配置。你可以看看[`following overview`](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)关于会话。默认情况下，ASP.NET 将会话数据存储在内存中。这意味着如果您的应用程序在网络场中运行，您将遇到问题，因为该网络场的不同节点可能*看不到*存储在其他节点上的值。如果要在这种情况下使用会话，则必须配置进程外会话状态，例如`StateServer`或`SqlServer`。默认会话状态模式的另一个问题`InProc`是，如果 IIS 决定回收您的应用程序，您可能会丢失存储在其中的数据。还有一个根本不使用会话或使用进程外会话存储的原因。

因此，例如，您可以为会话指定超时，如下所示：

```
<sessionState mode="InProc" timeout="20" /> 
```

默认值为 20 分钟。但是，这将再次取决于您使用的模式。

> 我知道在另一种脚本语言（如 PHP）中，我必须在需要使用这种类似会话对象数据的所有文件中调用 session_start() 和 session_end()。

无需担心 ASP.NET MVC 中的此类事情。

* * *

现在说了这么多，我建议你根本不要使用任何会话。ASP.NET 已经为您提供了跟踪经过身份验证的用户的必要机制。您可以使用[`Forms Authentication`](http://msdn.microsoft.com/en-us/library/ff647070.aspx)专为安全跟踪经过身份验证的用户而设计的。

因此，首先关闭 ASP.NET 会话：

```
<sessionState mode="Off" /> 
```

进而：

```
[Anonymous]
public ActionResult Login(LoginModel model)
{
    // TODO: check credentials, ...

    FormsAuthentication.SetAuthCookie(model.Username, false);
    //something else

    // finally redirect and inside the target controller action
    // you will be able to retrieve the authenticated user
    return RedirectToAction("SomeProtectedAction");
} 
```

然后您可以装饰受保护的控制器操作，这些操作只能由具有该`[Authorize]`属性的经过身份验证的用户访问，并在其中检索当前经过身份验证的用户：

```
[Authorize]
public ActionResult SomeProtectedAction()
{
    string username = User.Identity.Name;
    // something else ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:44:40.937

看看 Global.asax

从应用程序开始到会话，再到请求开始/结束等等，您都有各种事件......

但是请注意，不能保证调用“结束”方法。所以不要指望他们。

如果您决定使用会话，请不要像您在示例中那样使用字符串溢出它。为您的会话创建一个具有适当属性的类和一个 SessionManager 来处理它。从长远来看，它将对您有很大帮助。

# spring-mvc - 通过 Spring MVC 对移动客户端进行 RESTful 身份验证

> ID：14923272
> 
> 赞同：4
> 
> 时间：2013-02-17T16:28:29.450
> 
> 标签：spring-mvc, spring-security

我试图弄清楚保护我的 Spring MVC 控制器（仅使用 json）的最佳方法是什么。我已经关注了很多问题（例如[RESTful Authentication via Spring](https://stackoverflow.com/questions/10826293/restful-authentication-via-spring)）。我的问题虽然似乎是一个很常见的用例，但我没有找到具体的答案。

要求：

1.  所有通信均使用 json 从移动客户端 (Android/iPhone) 进行。
2.  用户可以使用 facebook 登录（使用 facebook sdk 进行客户端身份验证），这意味着没有密码可以发送到服务器。
3.  不需要基本身份验证，因为没有密码，我宁愿客户端悄悄登录。
4.  **重要**的是没有注册屏幕，因为我想减轻我的用户的压力，当用户登录（facebook/email）时，服务器会在数据库中动态创建一个用户，如果是 facebook，我不会问用户任何事情他已经在本地通过 facebook sdk 进行了身份验证，至于电子邮件，服务器要求用户输入他的密码，因为他可能会使用其他人的电子邮件。

我在实施第 4 步时特别挣扎，可能会使用 Spring Security，因为我的服务器无论如何都大量使用 Spring。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:11:24.647

我们在我们的一个 web 应用程序上做了类似于 #4 的事情。基本上，过程是：

1) 创建（或覆盖 FacebookApiAdapter）setConnectionVales 方法。

2) 从 Facebook 个人资料中获取电子邮件（或您用于内部用户名的任何内容）。

3）创建一个新的身份验证令牌：

```
 UsernamePasswordAuthenticationToken newAuth = new  UsernamePasswordAuthenticationToken(user, "yourrealm",authorities); 
```

其中用户与您的内部用户类型匹配，权限是一个集合（提示：只需使用新的 SimpleGrantedAuthority 添加字符串）

4) 在 SpringSecurityContext 中设置新的身份验证令牌：

```
SecurityContextHolder.getContext().setAuthentication(newAuth); 
```

然后，您可以使用正常的 Spring 安全设置通过 ROLE 保护事物，只要新令牌在其 GrantedAuthorities 集中具有该角色。

# android - 3g以上的android中的套接字编程

> ID：14923273
> 
> 赞同：2
> 
> 时间：2013-02-17T16:28:32.257
> 
> 标签：android, sockets, 3g

如果他们共享同一个网络，我已经设法通过 wifi 将信息从我的电脑发送到我的 android 手机。如果手机未连接到同一网络，即如果手机连接到 3g，是否可以以相同的方式将信息从我的电脑发送到我的手机。

在这种情况下，我必须使用什么 IP 地址？是不是更难了？有人可以告诉我/将我链接到一些关于此的网站吗？

谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:34:35.453

在这种情况下，您需要找到 Android 手机。您的 PC 不知道他的 IP 地址。

您可以使用 DynDNS 或类似服务在 DNS 中动态注册您的手机。然后在 PC 上使用 DynDNS 客户端获取手机的 ip。

另一种方法是 PC 知道 IP 地址。因此，Android 设备可以向它发送请求，PC 会记住 Android 的 IP，然后在向 Android 发送信息时使用它。这种方法有两个缺点，PC 可以在 NAT 之后（需要额外的管理工作），并且它可以有一个动态 IP。

如果你有一个网站，还有另一种方法。编写一个脚本（例如 devreg.php），它将客户端的 IP 存储在 db 或文件中，另一个脚本（devfind.php）将从 db/file 读取 IP 并将其作为响应发送。所以，Android 会首先向 devreg.php 发送请求，它会保存 IP。然后PC会请求devfind.php，它会发送Android的IP作为响应。

# arrays - 在 CL 的 dotimes 循环中使用 aref？

> ID：14923277
> 
> 赞同：1
> 
> 时间：2013-02-17T16:28:50.577
> 
> 标签：arrays, loops, lisp, common-lisp

我有一个维度为 '(3 3 2) 的数组，其名称为 test-array：

```
#3A(((0 0) (0 0.1) (0 0.3)) 
    ((1 0) (1 0.1) (1 0.3))
    ((2 0) (2 0.1) (2 0.3))) 
```

请注意，数组中最内部的列表（排名 2）是点坐标，所以通常数组是

```
#3A(((x0 y0) (x0 y1) (x0 y2)) 
    ((x1 y0) (x1 y1) (x1 y2))
    ((x2 y0) (x2 y1) (x2 y2))) 
```

现在我想使用这个数组中的元素来创建一个新数组。

在该数组的每一行（数组等级：0）上，我想从第一个 xy 坐标中减去第二个 xy 坐标，从第二个中减去第三个 xy 坐标。所以基本上我以参数形式寻找的结果是：

```
#3A(((x0-x0 y1-y0) (x0-x0 y2-y1)) 
    ((x1-x1 y1-y0) (x1-x1 y2-y1))
    ((x2-x2 y1-y0) (x2-x2 y2-y1)) 
```

是否有任何简单的直接函数或操作仅通过操作初始数组来做到这一点？

由于我不知道对此有任何直接操作，因此我只想从初始数组中制作一个列表`:initial-contents`作为新数组的列表。因此，这种方法的最初目标是获取初始内容列表，即：

```
 (((x0-x0 y1-y0) (x0-x0 y2-y1)) 
    ((x1-x1 y1-y0) (x1-x1 y2-y1))
    ((x2-x2 y1-y0) (x2-x2 y2-y1)) 
```

为此，我想到了一个使用`dotimes`两次的代码（外循环数是行数，内循环数是列数）：

```
(let ((result-1))
  (dotimes (n (array-dimension test-array 0) result-1)
    (setq result-1
      (append result-1
              (let ((result-2))
                (dotimes (m (1- (array-dimension test-array 1)) result-2)
                  (setq result-2
                    (append result-2 
                            (list (- (aref test-array n (1+ m) 0)
                                     (aref test-array n m 0))
                                  (- (aref test-array n (1+ m) 1)
                                     (aref test-array n m 1))))))))))) 
```

但这有一个问题，这也是问题的标题。显然，这种“参数化”方式（使用 n 和 m）为 CL 提供输入`aref`是不受欢迎的：`(aref test-array n m 0)`

为什么会出现这样的问题？你能想到在循环中使用 aref 的任何其他方法，或者用另一种方法制作 :initial-contents 列表吗？

请注意，这是我实际问题的一种相对简单的形式，因为我拥有的实际初始数组的尺寸为 (21 16 2) 并且所有 xy 坐标都彼此不同。

答案将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:02:21.507

正如我在评论中注意到的那样，返回其参数递增 1 的函数是`1+`, not `+1`（它不是函数名而是常量`1`）。

我认为没有必要在`:initial-contents`这里构造，因为它并不比构造目标数组并将其作为单独的步骤填充到循环中更容易。我就是这样做的：

```
(defparameter *test-array*
  #3A(((0 0) (0 0.1) (0 0.3)) 
      ((1 0) (1 0.1) (1 0.3))
      ((2 0) (2 0.1) (2 0.3))))

(destructuring-bind (rows cols axes) (array-dimensions *test-array*)
  (let ((result (make-array
                 (list rows (1- cols) axes)
                 :element-type (array-element-type *test-array*))))
    (dotimes (row rows result)
      (dotimes (col (1- cols))
        (dotimes (axis axes)
          (setf (aref result row col axis)
                (- (aref *test-array* row (1+ col) axis)
                   (aref *test-array* row col axis)))))))) 
```

我决定让这个例子尽可能简单。替代解决方案是可能的，例如，使用置换到数组的向量（这就是您使用序列函数处理多维数组片段的方式）。如果不是更复杂的情况，我更喜欢*这个*任务的简单方法 。

# php - RegEx 用于带错别字的全文搜索

> ID：14923285
> 
> 赞同：5
> 
> 时间：2013-02-17T16:29:25.580
> 
> 标签：php, regex, full-text-search, regex-group, levenshtein-distance

我有一个包含以下列的 MySQL 表：

```
City      Country  Continent
New York  States   Noth America
New York  Germany  Europe - considering there's one ;)
Paris     France   Europe 
```

如果我想找到有错字的“New Yokr”，使用 MySQL 存储函数很容易：

```
$querylev = "select City, Country, Continent FROM table 
            WHERE LEVENSHTEIN(`City`,'New Yokr') < 3" 
```

但是如果有两个纽约城市，用全文搜索你可以输入“纽约州”，你会得到你想要的结果。

所以问题是，我可以搜索“New Yokr Statse”并得到相同的结果吗？

是否有任何功能可以合并 levenshtein 和 fulltext 以形成一个多合一的解决方案，或者我应该在 MySQL 中创建一个连接 3 列的新列？

我知道还有其他解决方案，例如 lucene 或 Sphinx（还有 soundex、metaphone，但对此无效），但我认为对我来说可能很难实现它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-27T18:00:28.257

很好的问题，也是我们如何使用字符列表和正则表达式边界来设计查询和检索我们希望的数据的一个很好的例子。

根据我们可能想要的准确性和我们在数据库中拥有的数据，我们当然可以设计基于各种表达式的自定义查询，例如这个`New York State`具有各种类型的示例：

```
([new]+\s+[york]+\s+[stae]+) 
```

在这里，我们有三个字符列表，我们可以用其他可能的字母进行更新。

```
[new]
[york]
[stae] 
```

我们还在这里添加了两组`\s+`作为我们的边界以提高准确性。

### [演示](https://regex101.com/r/MAYGrk/1/)

这个片段只是展示了捕获组是如何工作的：

```
const regex = /([new]+\s+[york]+\s+[stae]+)/gmi;
const str = `Anything we wish to have before followed by a New York Statse then anything we wish to have after. Anything we wish to have before followed by a New  Yokr  State then anything we wish to have after. Anything we wish to have before followed by a New Yokr Stats then anything we wish to have after. Anything we wish to have before followed by a New York Statse then anything we wish to have after. `;
let m;

while ((m = regex.exec(str)) !== null) {
    // This is necessary to avoid infinite loops with zero-width matches
    if (m.index === regex.lastIndex) {
        regex.lastIndex++;
    }

    // The result can be accessed through the `m`-variable.
    m.forEach((match, groupIndex) => {
        console.log(`Found match, group ${groupIndex}: ${match}`);
    });
}
```

### PHP

```
$re = '/([new]+\s+[york]+\s+[stae]+)/mi';
$str = 'Anything we wish to have before followed by a New York Statse then anything we wish to have after. Anything we wish to have before followed by a New  Yokr  State then anything we wish to have after. Anything we wish to have before followed by a New Yokr Stats then anything we wish to have after. Anything we wish to have before followed by a New York Statse then anything we wish to have after. ';

preg_match_all($re, $str, $matches, PREG_SET_ORDER, 0);

// Print the entire match result
var_dump($matches); 
```

# sml - SML - 使用原始列表的元素构建一个新列表 - 错误：运算符和操作数不同意 [文字]

> ID：14923286
> 
> 赞同：0
> 
> 时间：2013-02-17T16:29:50.227
> 
> 标签：sml, smlnj

给定一个数字列表，我想创建一个新列表，其中索引`i` 处的元素是之前所有元素的总和`i-1`。

例如 ：

```
[1,4,6,9] ->  [1,5,11,20] 
```

我写了以下代码：

```
fun sum nil = 0 
| sum [x]=x 
| sum(x::rest)=(x+hd(rest))::sum(rest); 
```

但我得到了这个：

```
- fun sum nil = 0
= | sum [x]=x
= | sum(x::rest)=(x+hd(rest))::sum(rest);
stdIn:306.16-306.39 Error: operator and operand don't agree [literal]
  operator domain: int * int list
  operand:         int * int
  in expression:
    x + hd rest :: sum rest 
```

我可以看到递归规则`(x+hd(rest))::sum(rest);`是问题的原因，但我该如何解决呢？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T17:30:17.907

看看你的基本情况。您希望函数返回一个列表，因此基本案例应该返回列表。

```
fun sum []      = []
  | sum [x]     = [x]
  | sum (x::xs) = ... 
```

我替换`nil`为`[]`因为我更喜欢它 - 这并不重要。

另一件事 - 永远不要使用`hd`and`tl`运算符（有例外，但现在，不要使用）。当然，在你的函数中，它不会成为问题，因为你处理了它会出现的情况，但还有另一个原因。如果你这样做：

```
fun foo [] = ...
  | foo (x::y::xs) = ... 
```

SML 会*告诉*您模式匹配并不详尽，也就是说，您错过了一些模式，这意味着您在编译时而不是在运行时捕获错误。

这是您的功能的一个有效版本。

```
fun sum [] = []
  | sum [x] = [x]
  | sum (x::y::xs) = x::sum (x+y::xs) 
```

我将添加移到递归调用中，因为如果您作为第一件事添加，那么结果的第一个元素将是原始列表的前*两个*元素加在一起。

# oracle - 将外部表创建指令转换为 PLSQL 过程时出错

> ID：14923288
> 
> 赞同：1
> 
> 时间：2013-02-17T16:30:05.617
> 
> 标签：oracle, plsql

我在将单个外部表指令转换为 PLSQL 过程时遇到了一些问题。特别是，这是完美运行的外部表创建指令。

```
create table TMP_TBL (
  id VARCHAR2(10)
)
organization external (
  TYPE ORACLE_LOADER
  default directory DATA_DIR
  access parameters (
    RECORDS DELIMITED BY NEWLINE
    fields terminated by '|'
    missing field values are null
  )
  location ('test.txt')
)
reject limit unlimited; 
```

我正在尝试利用这个 PLSQL 过程来创建给定外部数据文件的表。这就是我从现在开始所做的事情，但是当我调用它时我仍然遇到了一些问题。

```
PROCEDURE CREATE_TMP_TBL(FILENAME VARCHAR2) IS
  BEGIN
    EXECUTE IMMEDIATE 'create table TMP_TBL (
      id VARCHAR2(10)
    )
    organization external (
      type oracle_loader
      default directory DATA_DIR
      access parameters (
        records delimited by newline
        fields terminated by ''|''
        missing field values are null
      )
      location ('''||FILENAME||''')
    )
    reject limit unlimited;';
  END CREATE_TMP_TBL; 
```

使用以下命令执行该过程：

```
exec pkg_load.CREATE_TMP_TBL('test.txt'); 
```

它给了我这个错误：

```
Error report:
ORA-00911: invalid character
ORA-06512: at "PKG_LOAD", line 43
ORA-06512: at line 1
00911\. 00000 -  "invalid character"
*Cause:    identifiers may not start with any ASCII character other than
           letters and numbers.  $#_ are also allowed after the first
           character.  Identifiers enclosed by doublequotes may contain
           any character other than a doublequote.  Alternative quotes
           (q'#...#') cannot use spaces, tabs, or carriage returns as
           delimiters.  For all other contexts, consult the SQL Language
           Reference Manual.
*Action: 
```

第 43 行是过程 CREATE_TMP_TBL 的“BEGIN”编号行。

信息：

```
Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - Production
PL/SQL Release 11.2.0.2.0 - Production
"CORE   11.2.0.2.0  Production"
TNS for Linux: Version 11.2.0.2.0 - Production
NLSRTL Version 11.2.0.2.0 - Production 
```

欢迎任何解决此问题的建议。感谢您的建议，

卡罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:36:40.330

从此处的语句末尾删除分号：

```
reject limit unlimited;'; 
```

即更改为

```
reject limit unlimited'; 
```

# php - 试图得到 box's within a form to insert the selected option to the database field First of all the form works. At the moment I have an upload form with around 10 fields on it. The form definetely works as it inserts any text inputs but when I select a

> ID：14923289
> 
> 赞同：0
> 
> 时间：2013-02-17T16:30:20.017
> 
> 标签：php, html, mysql, forms, selection

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:07:11.530

```
<select type="text" name="location" id="location"> 
```

应该

```
<select name="location" id="location"> 
```

在您的表单处理程序中执行此操作以查看返回的值数组

```
var_dump($_POST); 
```

让表单/html/PHP 按预期工作，然后添加 sql 语句等

```
echo $sql ; 
```

# actionscript-3 - Actionscript 3、如何在两个或多个类之间使用hitTestObject？

> ID：14923295
> 
> 赞同：0
> 
> 时间：2013-02-17T16:30:38.933
> 
> 标签：actionscript-3, flash-cs6

我正在尝试创建一个小的交互式拖放程序，它将检查放置位置是否是 fishBowl 类对象，或者将拖动的对象放在 fishBowl 对象中，或者如果它没有击中 fishBowl，将跳回原始创建的位置目的。

我遇到的问题是 if 语句无法将放置位置识别为类的对象，并且经过两天的不同编码方式后，我无法让它工作。

这是我的 J_Objects 类，其中子类来自：

```
package classes {
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.events.Event;
    import flash.display.MovieClip;

    public class J_Objects extends Sprite {
        private var xSpeed:int = 0;
        private var ySpeed:int = 2;
        private var topPadding:int = 250;
        private var drag:Boolean = false;
        private var tempSpeedX:int = xSpeed;
        private var tempSpeedY:int = ySpeed;

        public function J_Objects(_x:int, _y:int) {
            // constructor code
            this.x = _x;
            this.y = _y;
            this.buttonMode = true; //add hand cursor on mouse hover
            this.addEventListener(MouseEvent.MOUSE_DOWN, clickToDrag);
            this.addEventListener(MouseEvent.MOUSE_UP, releaseToDrop);
        }

        public function move():void {
            if (this.xSpeed <= -1) {
                    this.scaleX = -1;
                }
                else if (this.xSpeed >= 1) {
                    this.scaleX = 1;
                }
            //Check if at the left or right and change direction if so
            if ((this.x - this.width/2 <= 0) || (this.x + this.width/2 >= stage.stageWidth)) {
                this.xSpeed *= -1;
                //this.scaleX *= -1;

            }//Also check if that top or bottom and if so change direction
            else if ((this.y - this.topPadding - this.height/2 <= 0) ||  (this.y + this.height/2 >= stage.stageHeight)) {
            this.ySpeed *= -1;
            }
            this.x += this.xSpeed;
            this.y += this.ySpeed;
            }

            /* Drag and Drop
            Makes the specified symbol instance moveable with drag and drop.
            */
            public function clickToDrag(evt:MouseEvent):void
            {
                this.startDrag();
                pickedUp();
                xSpeed = 0;
                ySpeed = 0;

                //var dragEvent:Event = new Event('DRAG_OBJECT', true );
                //this.dispatchEvent(dragEvent);

            }

            public function releaseToDrop(evt:MouseEvent):void
            {
                this.stopDrag();

                //fishBowl.object();
                if (evt.currentTarget.hitTestObject(evt.target.name == "fishBowl")) {
                    trace("Fishbowl got hit");
                }
                else {
                    xSpeed = tempSpeedX;
                    ySpeed = tempSpeedY;
                    putDown();
                    trace("Dropped objects was: ", this.name);
                }
                /*if (evt.target.hitTestObject(evt.target.name) == fishBowl) {
                    trace("Fishbowl got hit");
                }
                else {
                    xSpeed = tempSpeedX;
                    ySpeed = tempSpeedY;
                    putDown();
                    trace("Dropped objects was: ", this.name);
                }*/

            }

            public function pickedUp():void {
                //var tempX:int = 0;
                //var tempY:int = 0;
                //tempX = this.x;
                //tempY = this.y;
                //this.x = 
            }

            public function putDown():void {
                //pickedUp();
                //this.x = tempX;
                //this.y = tempY;
            }

    }

} 
```

我在 if 语句中尝试了几种不同的方法，但我得到了：无法将布尔值更改为类，无法访问静态变量等。

这些是子对象的代码：

```
package classes {

    import flash.display.MovieClip;

    public class J_GoldFish extends J_Objects {
        var tempX:int = 0;
        var tempY:int = 0;

        public function J_GoldFish(_x:int, _y:int) {
            // constructor code
            super(_x, _y);
            tempX = _x;
            tempY = _y;
        }

        override public function putDown():void {
            this.x = tempX;
            this.y = tempY;
        }
    }

}

package classes {

    import flash.display.MovieClip;

    public class J_BlueFish extends J_Objects {
        var tempX:int = 0;
        var tempY:int = 0;

        public function J_BlueFish(_x:int, _y:int) {
            // constructor code
            super(_x, _y);
            tempX = _x;
            tempY = _y;
        }

        override public function putDown():void {
            this.x = tempX;
            this.y = tempY;
        }
    }

}

package classes {

    import flash.display.Sprite;

    public class J_FishBowl extends Sprite {

        public function J_FishBowl(_x:int, _y:int) {
            // constructor code
            this.x = _x;
            this.y = _y;
        }
    }

} 
```

然后是主类：

```
package  {
    import flash.display.Sprite;
    import classes.*;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class Main extends Sprite {
        private var goldFish:J_GoldFish;
        private var blueFish:J_BlueFish;
        private var bird:J_Bird;
        private var fishBowl:J_FishBowl;
        private var pass:String = "";

        public function Main() {
            // constructor code
            this.goldFish = new J_GoldFish(146.80, 372.75);
            this.blueFish = new J_BlueFish(59.95, 335.05);
            this.bird = new J_Bird(497.35, 48.45);
            this.fishBowl = new J_FishBowl(269.30, 319.50);
            this.fishBowl.name = "fishBowl";
            this.goldFish.name = "goldFish";
            this.blueFish.name = "blueFish";
            this.bird.name = "bird";
            addChild(this.fishBowl);
            addChild(this.goldFish);
            addChild(this.blueFish);
            addChild(this.bird);

            stage.addEventListener(Event.ENTER_FRAME, animate);
            //this.addEventListener(MouseEvent.MOUSE_OVER, sendObject);
            //stage.addEventListener('DRAG_OBJECT', stopAnimate);

        private function animate(evt:Event):void {
        //make the fish animate (move)
        this.goldFish.move();
        this.blueFish.move();
        this.bird.move();

        }

        private function stopAnimate(evt:Event):void {
            //var target:J_Objects = (evt.target as J_Objects); //definde the target incase I want to change properties         
            //stage.removeEventListener(Event.ENTER_FRAME, animate);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:36:05.367

你的问题实际上是双重的。

在以下代码行中：

`if (evt.currentTarget.hitTestObject(evt.target.name == "fishBowl"))`

您的括号在错误的位置，因此，您试图调用`hitTestObject`从评估派生的布尔值的方法`evt.target.name == "fishBowl"`

为了摆脱您的错误，您必须将其更改为：

`if (evt.currentTarget.hitTestObject(evt.target))`

然而，这并不能解决您的*主要*问题，事实上`target`（并且，取决于目标中包含的显示对象的类型，`currentTarget`）`evt`将是被丢弃的对象，因为它是已调度的对象MOUSE_UP 事件。

由于您试图找到放置了已放置对象的对象，因此您需要查看该`dropTarget`属性。

这是修正后的`releaseToDrop`函数：

```
public function releaseToDrop(evt:MouseEvent):void
{
    this.stopDrag();

    if (this.dropTarget && this.dropTarget.name == "fishBowl")
    {
        trace("Fishbowl got hit");
    }
    else 
    {
        xSpeed = tempSpeedX;
        ySpeed = tempSpeedY;
        putDown();
        trace("Dropped objects was: ", this.name);
    }
} 
```

# html - 将 HTML 最小化为一行

> ID：14923296
> 
> 赞同：2
> 
> 时间：2013-02-17T16:30:42.890
> 
> 标签：html, compression

我需要将此代码最小化为一行。

我正在使用 Adob​​e Edge，并且正在为一个文本框中的某些段落创建一些代码。如果您有兴趣，需要将代码加载到一个名为`document.compositionReady`.

最大的限制是通过 javascript 加载代码的方式不允许使用多行。

所以我已经手动完成了，这不是问题，它工作正常，但需要很长时间。我可以使用带有`format`命令的 Aptana studio 将代码解压缩恢复正常，问题是在开发过程中我经常不得不手动将这些代码压缩成一行，这既费时又让人分心。

所以我需要一个可以转动这个的手动工具：

```
<style media='screen' type='text/css'>
    .text {
        padding: 1px 1px 1px 1px;
        font-size: 12px;
    }
</style>

<!-- now for html -->

<div style='width:550px;' >
    <div style='float:left;font-size:1.2em;' class='text'>
        Title goes here
    </div>
    <div style='width:60px;float:left;' class='text'>
        <span style='font-size:0.8em;'>
            ®
        </span>
    </div>
    <div style='float:left' class='text'>
        Some paragraph text
    </div>
    <div style='float:left;padding-top:10px;' class='text'>
        <span style='font-style:italic;'>
            A footer to the paragraph
        </span>
    </div>
</div> 
```

进入这个：

```
<style media='screen' type='text/css'>.text {padding: 1px 1px 1px 1px;font-size:12px;}</style><!-- now for html --><div style='width:550px;' >  <div style='float:left;font-size:1.2em;' class='text'>MY BRILLIANCE</div><div style='width:60px;float:left;' class='text'>      <span style='font-size:0.8em;'>®</span> </div>  <div style='float:left' class='text'>       With release comes growth, through challenge comes wisdom, let us show you the way. </div>  <div style='float:left;padding-top:10px;' class='text'><span style='font-style:italic;'>Absolute Equal Acceptance through Thought, Conscience and Reunion.</span></div></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T16:34:24.307

好吧，谷歌可能是你的朋友。

[http://www.textfixer.com/html/compress-html-compression.php](http://www.textfixer.com/html/compress-html-compression.php)

```
<style media='screen' type='text/css'>
    .text {
        padding: 1px 1px 1px 1px;
        font-size: 12px;
    }
</style>

<!-- now for html -->

<div style='width:550px;' >
    <div style='float:left;font-size:1.2em;' class='text'>
        Title goes here
    </div>
    <div style='width:60px;float:left;' class='text'>
        <span style='font-size:0.8em;'>
            ®
        </span>
    </div>
    <div style='float:left' class='text'>
        Some paragraph text
    </div>
    <div style='float:left;padding-top:10px;' class='text'>
        <span style='font-style:italic;'>
            A footer to the paragraph
        </span>
    </div>
</div> 
```

变成

```
<style media='screen' type='text/css'> .text { padding: 1px 1px 1px 1px; font-size: 12px; }</style><!-- now for html --><div style='width:550px;' > <div style='float:left;font-size:1.2em;' class='text'> Title goes here </div> <div style='width:60px;float:left;' class='text'> <span style='font-size:0.8em;'> ® </span> </div> <div style='float:left' class='text'> Some paragraph text </div> <div style='float:left;padding-top:10px;' class='text'> <span style='font-style:italic;'> A footer to the paragraph </span> </div></div> 
```

或者，如果您想直接在桌面上进行压缩，您可以使用[Alentum](http://www.alentum.com/)、[HTML Compressor](http://html-compressor.en.softonic.com/)等软件...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T16:32:56.813

像`str_replace("\n", "", $text_to_be_compressed)`什么？

# mysql - Mysql 为每个用户单独的表。（用户每月输入数据，如果这些数据放在单独的表中）

> ID：14923297
> 
> 赞同：0
> 
> 时间：2013-02-17T16:30:52.147
> 
> 标签：mysql

我正在制作一个用户每月输入数据的网站，这些数据存储在 mysql 数据库中，带有日期键，因此可以按日期检索。浏览这些数据以便为每个用户创建一个单独的表时会更容易且更易于阅读，但是我很确定这样做是个坏主意。任何人都可以确认这一点并提供其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:38:52.777

你为什么想做这个？SQL 将为您过滤数据...例如获取当月的数据：

```
select col1, col2, col3 from tbl1 where date_format(date_col, '%m') = date_format(now(), '%m') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:38:24.007

那么一个新用户将是一个新表吗？

这个：

1.  暗示对您的 mysql 站点用户的 DDL 权限（CREATE TABLE）（除非您手动或通过某种 crontab 任务执行此操作）
2.  每当您想检索所有用户的数据或只知道用户列表时，如果不混合 mysql user_schema 表和常见的 dml 操作，它就无法轻松解析

确实，答案并不容易，也不是确定的，但理想情况下，作为“宗教”观点，我尽量避免在我的网站日常生活中进行模型操纵。将自己定位于元建模。

希望有帮助，

S。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:55:38.817

使用历史表可能有一个优势，主要是在出于性能原因这样做时。但是，一般来说，您不需要将当前月份的数据与上个月的数据分开，除非您计划拥有大量数据（大多数 RDBMS 可以轻松支持数百万条记录而不会影响性能）。 *我不建议仅出于演示目的拆分表格。*

您还必须考虑其他事情以及历史表。例如，您需要安排事件将数据从当前表移动到历史表。如果更改当前表，则还需要更改历史表。由于您将使用 UNION，因此查询所有数据可能会更麻烦一些。

在单个表上进行适当的表索引似乎更容易，如果需要，可以查看当前月份的数据。

但是，如果性能是一个问题，那么我同意将数据移动到历史表可能是有利的。

# php - 写入、读取和分解txt文件内容

> ID：14923298
> 
> 赞同：0
> 
> 时间：2013-02-17T16:30:57.787
> 
> 标签：php, explode

我有一个 textarea 和一个提交按钮，一旦我将内容写入 textarea 并按下按钮 - 它会将 textarea 内容写入 txt 文件，我需要帮助使用爆炸来格式化该内容。这是我用来将 textarea 内容写入 txt 文件的代码：

```
$tavalues = ($_POST['dname']); //dname is textarea field
$filename = "imones.txt";
$fp = fopen ($filename, "w");
if ($fp){
    fwrite($fp, $tavalues);
} 
fclose($fp); 
```

如您所见，它写入了 imones.txt 文件。现在我想读取该文件内容，对其进行格式化，并将格式化的内容写入另一个文件。我似乎不知道如何为explode编写多个分隔符。 *这是我如何将数据输入到textarea的示例*（所有逗号和东西都乱七八糟）：

```
example.com  example.com
 example.com, example.com
example.com 
```

*这是我希望它被格式化的方式*（基本上我想删除 ',' , '\n', '\r'）：

```
example.com
example.com
example.com 
```

..（所有链接都在一行中，不带空格，注意链接不一样不一样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:41:06.617

也许试试这个。它又快又脏。为了获得更好的解决方案，您**应该**尝试使用正则表达式！

```
$input = "exampleA.com  exampleB.com
 exampleC.com, exampleD.com
exampleE.com";
$tmp = explode(" ", $input);
$str = "";
$filename = "imones.txt";
$fp = fopen ($filename, "w");
if ($fp){
    for ($i = 0; $i < count($tmp); $i++) {
      if ($tmp[$i] != "") {
          $tmp[$i] = str_replace(",", "", $tmp[$i]);
          $tmp[$i] = trim($tmp[$i]);
          $str .= $tmp[$i]."\n";
      }
    }
fwrite($fp, $str);
} 
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:56:15.997

如何将所有爆炸字符转换为一个而不是由此爆炸？！

```
$expl = ';';
$content = file_get_contents('imones.txt');
$content = str_replace(',', $expl, $content);
$content = str_replace('\n', $expl, $content);
$content = str_replace('\r', $expl, $content);
$content = str_replace(' ', $expl, $content);
// ...

while (strpos($content, "$expl$expl") !== false) { // while $expl is found twice
    $content = str_replace("$expl$expl", $expl, $content); // remove this
}

$parts = explode($expl, $content);

// than join them
$formatted = implode("\n", $parts);
file_put_contents('somefile.txt', $formatted); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T16:49:15.477

试试PHP 的[preg_replace() 。](http://php.net/manual/en/function.preg-replace.php)

# ember.js - 访问 DS.Model 上属性的原始值

> ID：14923300
> 
> 赞同：0
> 
> 时间：2013-02-17T16:31:12.470
> 
> 标签：ember.js, ember-data

是否可以访问 Ember 数据中模型的原始属性值？考虑一个带有 H1 标题绑定到模型属性的 html 表单。现在，当属性更改时，标题也会更改。有点奇怪。我想绑定原始值并仅在成功提交后更新绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:11:50.907

在这种情况下，您需要绑定到您的另一个属性，`ObjectController`然后仅在需要时将这些更改推送到模型。

# javascript - 未捕获的类型错误：无法读取未定义的属性“msie” - jQuery 工具

> ID：14923301
> 
> 赞同：201
> 
> 时间：2013-02-17T16:31:25.043
> 
> 标签：javascript, jquery, jquery-tools

我在 Chrome 开发控制台中收到以下错误：

```
Uncaught TypeError: Cannot read property 'msie' of undefined 
```

我的理解是，这是因为`.browser`现在在 jQuery 中已弃用，但是我使用的是最新版本的 jQuery 工具，它仍然给出错误，我签入了`js`文件，它就在那里。

我怎样才能解决这个问题，所以它不会给出错误？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2013-06-06T21:59:38.377

您可以通过 AJ 查看此解决方案。这很简单，只需复制并粘贴以下代码行。

```
jQuery.browser = {};
(function () {
    jQuery.browser.msie = false;
    jQuery.browser.version = 0;
    if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
        jQuery.browser.msie = true;
        jQuery.browser.version = RegExp.$1;
    }
})(); 
```

**参考**：

*   ~~[用于旧版 IE 检测的 jQuery 1.9.x 上的 $.browser](http://n33.co/2013/03/23/browser-on-jquery-19x-for-legacy-ie-detection)~~

* * *

## 回答 #2

> 赞同：198
> 
> 时间：2013-02-17T16:50:07.243

自 jQuery 1.9 起，该`$.browser`方法已被删除。

> [**`jQuery.browser() removed`**](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)
> 
> 该`jQuery.browser()`方法自 jQuery 1.3 以来已被弃用，并在 1.9 中被删除。**如果需要，它可以作为 jQuery Migrate 插件的一部分使用。**我们建议将特征检测与 Modernizr 等库一起使用。
> 
> — [jQuery 核心 1.9 升级指南](http://jquery.com/upgrade-guide/1.9/)。

如升级指南中所述，您可以尝试使用[jQuery Migrate 插件](https://github.com/jquery/jquery-migrate/)来恢复此功能并让 jQuery 工具正常工作。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2014-07-03T12:42:41.097

在您的 jsp/js 文件中使用以下脚本标记：

```
<script src="http://code.jquery.com/jquery-1.9.0.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.js"></script> 
```

这肯定会奏效。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2016-08-30T11:06:56.480

我在 js 文件包含之后使用下面的代码，它现在可以工作了。

```
<script src="js/jquery-ui.min.js" type="text/javascript"></script>
<script type="text/javascript">
    jQuery.browser = {};
    (function () {
        jQuery.browser.msie = false;
        jQuery.browser.version = 0;
        if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
            jQuery.browser.msie = true;
            jQuery.browser.version = RegExp.$1;
        }
    })();
</script> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-06-28T05:42:01.780

我只是添加了

```
jQuery.browser = {
    msie: false,
    version: 0
}; 
```

在 jquery 脚本之后，因为我不再关心 IE。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-02-17T16:36:17.353

[这是 GitHub 上的 jQuery 工具错误](https://github.com/jquerytools/jquerytools/issues/928)。您可以尝试其中一个补丁。

*编辑*——在我看来，jQuery 工具并没有得到太多支持。除非我准备好自己接管支持，否则我个人不会开始依赖该库的新项目。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-02T20:28:43.083

因为我根本不打算支持旧的 MS IE 版本，所以我只是简单地将所有`browser.msie`对`false`. 我知道，这不是一个好的解决方案，但它对我有用。

（实际上，它们显示为`!browser.msie`，可以从条件中省略。）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-08-26T11:23:02.253

将您的 JS 替换为

```
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script> 
```

来源[链接](https://jqueryui.com/datepicker/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-25T04:52:42.913

看到这个问题主要是由于浏览器导航和版本属性引起的。为此，您必须在函数中添加以下代码：

```
/* solution to undefined msie */
jQuery.browser = {};
jQuery.browser.msie = false;
    jQuery.browser.version = 0;
    if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
        jQuery.browser.msie = true;
        jQuery.browser.version = RegExp.$1;
    }
/* solution to undefined msie */ 
```

例如，我在点击功能上使用它，请参阅：

```
 $(document).on('click', '.remove_add_test', function() {
    var product_id = $(this).data('id');
    var thisproduct = $(this);

    /* solution to undefined msie */
    jQuery.browser = {};
    jQuery.browser.msie = false;
        jQuery.browser.version = 0;
        if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
            jQuery.browser.msie = true;
            jQuery.browser.version = RegExp.$1;
        }
    /* solution to undefined msie */    

    jConfirm('Are you sure you want to delete record?', 'Remove Product', function(r) {
        if (r == true) {
            $.ajax({
                type: 'POST',
                url: 'scripts/ajax/index.php',
                data: {
                    method: 'removeproduct_fromcart',
                    id: product_id
                },
                dataType: 'json',
                success: function(data) {
                    if (data.RESULT == 0) {
                        $(".price span").text(data.totalprice);
                        $(thisproduct).closest('tr').remove();
                        $(".cart-number").text(data.productcount - 1);
                        $.growl.notice({
                            title: "Shopping Cart",
                            message: data.MSG
                        });
                       location.reload();
                        // window.location.href = 'https://www.youth-revisited.co.uk/payment.html';

                    }
                    // window.location.href = 'https://www.youth-revisited.co.uk/payment.html';
                }
            });
            // window.location.href = 'https://www.youth-revisited.co.uk/payment.html';

        } else {
            return false;
        }
    });
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-05T12:12:36.777

像打击一样使用

```
$(function (a) { 
```

. . . . .then 在您的函数中，您可以使用 msie 属性，例如

```
if (a.browser.msie) 
{
}
else 
{
   $(settings.current).after(Uploadelement);
} 
```

祝你好运

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-09T12:21:25.363

像打击一样使用

我使用这个命令并解决

> “未捕获的类型错误：无法读取未定义的属性‘msie’”错误

```
if (/1\.(0|1|2)\.(0|1|2)/.test($.fn.jquery) || /^1.1/.test($.fn.jquery)) {
    return;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-12-21T14:42:22.610

我在使用 JQuery 1.10 和 JQuery UI 1.8 时遇到了这个错误。我能够通过更新到最新的 JQuery UI 1.11.4 来解决这个错误。

## 从 Visual Studio 更新 JQuery UI 的步骤：

*   导航到项目或解决方案
*   右键单击：“管理 NuGet 包”
*   在左侧，单击“已安装的软件包”选项卡
*   查找“JQuery UI（组合库）”并单击更新
*   如果找到，选择它并单击更新
*   如果找不到，请在左侧的“在线 > nuget.org”选项卡中找到它，然后单击安装。如果 Jquery UI 版本老版本还存在，可以从项目中删除

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-04T02:26:38.363

如果您定义了两次 jQuery，那么您可能会收到此错误。例如，如果您正在使用 Primefaces（它已经包含 jQuery）并且您在其他地方定义它。

# java - 在java中从RGB转换为HSB

> ID：14923302
> 
> 赞同：-3
> 
> 时间：2013-02-17T16:31:39.823
> 
> 标签：java, rgb, bufferedimage, hsb

我试图找到图片中的平均颜色，并将颜色转换为 HSB。

我正在使用 bufferedImage 和 list 函数，并且在每个像素中发现了红色、绿色和蓝色。

谁能给我一些关于如何在 java 中转换为 HSB 的提示？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:56:42.627

使用`java.awt.Color.RGBtoHSB(int r, int g, int b, float[] hsbvals)`. [请参阅此处](http://docs.oracle.com/javase/8/docs/api/java/awt/Color.html#RGBtoHSB-int-int-int-float%3aA-)的javadoc 。

PS 如果您使用`p = bufferedImage.getRGB(x,y)`，请记住最低 8 位 ( `myPixel&0xff`) 对应于蓝色分量，因此您可以使用类似：`Color.RGBtoHSB((p>>16)&0xff, (p>>8)&0xff, p&0xff, hsbvals)`.

# regex - 如何编写正则表达式

> ID：14923303
> 
> 赞同：-2
> 
> 时间：2013-02-17T16:31:41.260
> 
> 标签：regex

我想用这种格式写一个两个字母和三个数字的表达式，例如。TT234

```
([A-Z]2+[0-9]+) 
```

以上是我写的，但我收到错误。任何人都可以对此发表评论吗？

让我重写我的问题，基本上我是在.htaccess中写一个重写url参数约束

```
RewriteEngine On # Turn on the rewriting engine 
RewriteRule ^test/(home|member|admin)/([A-Z]{2}[0-9]{3})/(xml|json)$ localhost/username/index.php?type=$1&id=$2&format=$3 [L] 
RewriteRule ^test/.*$ localhost/username/error.php [L] 
```

`xmlParseEntityRef: no name`现在，在我将正则表达式更改为`([A-Z]{2}[0-9]{3})`尽管它确实检查了参数后，我得到了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:33:32.993

正则表达式有不同的语法。以下是如何在 POSIX 扩展正则表达式中执行您需要的操作：

```
[A-Z]{2}[0-9]{3} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:35:46.700

您的正则表达式匹配一个大写 ASCII 字母，一个或多个“2”后跟至少一个数字。

例如：

> *   A2123456788990
> *   Z20

*   如果你想精确指定 2 个字母，那么你不应该使用量词`+`，你可以使用`{2}`.

*   如果你写一个“2”，那么它匹配一个文字“2”

*   数字相同，如果要匹配 3 位数字，请写 a`{3}`而不是`+`

*   根据您的风格和您调用的方法，您还需要**锚定**您的正则表达式，否则您将获得部分匹配。

    当您的文本仅包含此字符串时，您可以对字符串的开头和结尾执行此`^`操作`$`

    ```
    ^[A-Z]{2}[0-9]{3}$ 
    ```

    如果您想在较大的字符串中找到此模式，请使用**Wordboundaries**

    ```
    \b[A-Z]{2}[0-9]{3}\b 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:33:40.710

试试这样：

```
([A-Z]{2}[0-9]{3}) 
```

# visual-c++ - Gstreamer 与 Visual C++ express 2010 - 教程 1

> ID：14923306
> 
> 赞同：8
> 
> 时间：2013-02-17T16:31:51.170
> 
> 标签：visual-c++, gstreamer

我是 Gstreamer 新手，在编译 Gstreamer 的教程 1 时遇到问题。我正在使用带有 Visual c++ express 2010 的 Windows 7 64 位和 Gstreamer SDK 2012.11 32 位（[从此处下载](http://docs.gstreamer.com/display/GstSDK/Installing+on+Windows)）。这是代码：

```
#include "stdafx.h"
#include <gst/gst.h>

int main(int argc, char *argv[]) {
  GstElement *pipeline;
  GstBus *bus;
  GstMessage *msg;

  /* Initialize GStreamer */
  gst_init (&argc, &argv);

  /* Build the pipeline */
  pipeline = gst_parse_launch ("playbin2 uri=file://E:/test_1.MOV", NULL);

  /* Start playing */
  gst_element_set_state (pipeline, GST_STATE_PLAYING);

  /* Wait until error or EOS */
  bus = gst_element_get_bus (pipeline);
  msg = gst_bus_timed_pop_filtered (bus, GST_CLOCK_TIME_NONE, GST_MESSAGE_ERROR | GST_MESSAGE_EOS);

  /* Free resources */
  if (msg != NULL)
    gst_message_unref (msg);
  gst_object_unref (bus);
  gst_element_set_state (pipeline, GST_STATE_NULL);
  gst_object_unref (pipeline);
  return 0;
} 
```

**第一个错误：**

```
error C2664: 'gst_bus_timed_pop_filtered' : cannot convert parameter 3 from 'int' to 'GstMessageType' 
```

所以我刚刚从代码中删除了 GST_MESSAGE_ERROR。所以现在是：

```
msg = gst_bus_timed_pop_filtered (bus, GST_CLOCK_TIME_NONE, GST_MESSAGE_EOS); 
```

我对 Ubuntu 也有同样的问题。但在那之后，在 Ubuntu 中，我可以播放视频。

**第二个错误：** 但是对于 Windows，编译很好，但是当我尝试运行它时，我有那些错误：

```
GStreamer-CRITICAL **: gst_element_set_state: assertion 'GST_IS_ELEMENT <element>' failed
GStreamer-CRITICAL **: gst_element_get_bus: assertion 'GST_IS_ELEMENT <element>' failed
GStreamer-CRITICAL **: gst_bus_timed_pop_filtered: assertion 'GST_IS_BUS <bus>' failed
GStreamer-CRITICAL **: gst_object_unref: assertion 'object=!NULL' failed
GStreamer-CRITICAL **: gst_element_set_state: assertion 'GST_IS_ELEMENT <element>' failed
GStreamer-CRITICAL **: gst_object_unref: assertion 'object=!NULL' failed 
```

我真的不明白为什么它适用于 ubuntu 而不是 Windows。我真的不知道如何解决这个问题。请问你能帮帮我吗 ？

问候，

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-18T01:43:42.833

l**第一个错误**

可能代码被编译为 C++，这在枚举类型转换方面更加严格。尝试替换 `GST_MESSAGE_ERROR | GST_MESSAGE_EOS`：`(GstMessageType)(GST_MESSAGE_ERROR | GST_MESSAGE_EOS)`

**第二个错误**

这条线很有可能：

```
pipeline = gst_parse_launch ("playbin2 uri=file://E:/test_1.MOV", NULL); 
```

返回 NULL，其余错误都是由此产生的。为什么它可以返回NULL？有很多原因。也许您还没有安装带有“playbin2”的插件？试试这个：

*   将指向`GError`结构的指针作为第二个参数传递给`gst_parse_launch`（它有一个`message`可以给你一些提示的字段）
*   运行程序时作为命令行参数传递`--gst-debug-level=4`甚至更高。您将在控制台输出中看到许多信息，失败的原因将在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T06:18:06.970

我认为您使用的是 gstreamer 1.0，如果我没有错，请尝试使用

“playbin”而不是“palybin2”

“playbin2”从 gstreamer 1.0 重命名为“playbin”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T16:56:21.850

**第二个错误：**

我想为 Ubuntu 16.04 LTS 用户解释这一点。

要尝试[GStreamer 教程部分](https://gstreamer.freedesktop.org/documentation/tutorials/basic/hello-world.html)中的示例，您应该从这些存储库的源代码编译和安装：

```
gstreamer
gst-plugins-base
gst-plugins-good 
```

原因是用于示例的版本与我使用 apt 安装的版本不匹配（`playbin`丢失了）。

在从源代码编译之前，您还需要构建依赖`vorbis`项`vpx`和`souphttpsrc`插件（它们是提到的存储库的一部分）。您可以通过运行安装它们：

`apt install libvorbis-dev libsoup2.4-dev libvpx-dev`

要检查提到的插件是否包含在存储库构建中，请参见`./configure`输出。如果不是，您的系统上可能仍然缺少一些依赖项。输出会告诉你缺少什么。

之后，您应该成功编译并运行示例（您应该会看到视频播放）。

使用 GStreamer 修复初始安装问题的一般流程是（如已接受的答案中所述）使用`--gst-debug-level=4`，找出缺少的插件并安装它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-16T16:07:06.040

对于错误 1，如果您使用 c++ 进行编译，请使用： `gst_bus_timed_pop_filtered(bus, GST_CLOCK_TIME_NONE, static_cast<GstMessageType>(GST_MESSAGE_ERROR | GST_MESSAGE_EOS));` 而不是： `gst_bus_timed_pop_filtered (bus, GST_CLOCK_TIME_NONE, GST_MESSAGE_ERROR | GST_MESSAGE_EOS);`

# javascript - 链接中需要水平滚动

> ID：14923308
> 
> 赞同：-1
> 
> 时间：2013-02-17T16:32:04.733
> 
> 标签：javascript, html

我一直在尝试按照提供的[此链接](http://1uphost.in/des2/dreamsol/over2cloud/html/)实现水平滑动。实际上，我在此链接中使用了垂直缩放。我希望同样水平出现。有什么建议么？[网站截图](http://i.stack.imgur.com/nauNN.png)

如图所示，我希望页面在单击顶部的任何图块时向左滑动，依此类推。

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.reveal.js"></script>
<script type="text/javascript">
    $(function() {
        var $items = $('#vtab>ul>li');
        $items.mouseover(function() {
            $items.removeClass('selected');
            $(this).addClass('selected');

            var index = $items.index($(this));
            $('#vtab>div').hide().eq(index).show();
        }).eq(0).mouseover();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:39:25.843

您需要将正文的宽度设置为等于节数乘以每个节的宽度。（应该是相等的宽度）。例如，您有 5 个部分，每个部分的宽度为 4000 像素。因此body应该是4000 * 5, 20000px。然后将每个部分向左浮动，并隐藏水平滚动条。

**教程：[http ://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizo​​ntal-page-scrolling-with-jquery/](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)**

**演示：http: [//jsfiddle.net/LYxQ7/](http://jsfiddle.net/LYxQ7/)**

```
$(function() {
    $('ul.nav a').bind('click',function(event){
        var $anchor = $(this);
        $('html, body').stop().animate({
            scrollLeft: $($anchor.attr('href')).offset().left
        }, 1000);
        event.preventDefault();
    });
}); 
```

# jsp - JSP 会话中的 UTF-8 编码

> ID：14923309
> 
> 赞同：0
> 
> 时间：2013-02-17T16:32:21.553
> 
> 标签：jsp, session, servlets, encoding, utf-8

我的网络应用程序有编码问题。一开始我认为问题出在数据库编码上，但后来我调试了我的 servlet。如下： JSP 页面包含一个表单，其中用户传递一个带有波兰字符的单词，例如“Poniedziałek”，然后我正在调试接收此参数并将其传递给变量的我的 servlet。变量的结果是“PoniedziaÅek”。

我的 JSP 文件中的编码设置为 UTF-8

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8"> 
```

我还尝试使用在 servlet 中设置编码

```
request.setCharacterEncoding( "UTF-8" ); 
```

没有为我工作。什么会导致这个问题？

编辑：在 servlet 处读取的浏览器标头：标头名称：*主机*，标头值：*localhost:8080*
标头名称：*user-agent*，标头值：*Mozilla/5.0（Windows NT 6.1；WOW64；rv:18.0）Gecko/20100101 Firefox/18.0*
标题名称：*accept*，标题值：*text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8*
标题名称：*accept-language*，标题值：*pl,en-us;q=0.7 ,en;q=0.3*
Header Name: *accept-encoding* , Header Value: *gzip, deflate*
Header Name: *referer* , Header Value: *MY APP ADDRESS*
Header Name:*cookie*，标头值：*JSESSIONID=768FC60090233C4DBB9A2E55B4341D32*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:44:25.967

如果您使用的是 Tomcat，请查看
[http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#Common_Attributes](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#Common_Attributes)
[http://struts.apache.org/release/2.0.x/docs/ how-to-support-utf-8-uriencoding-with-tomcat.html](http://struts.apache.org/release/2.0.x/docs/how-to-support-utf-8-uriencoding-with-tomcat.html) [HttpServletRequest - setCharacterEncoding 似乎什么都不做](https://stackoverflow.com/questions/3278900/httpservletrequest-setcharacterencoding-seems-to-do-nothing/3279023#3279023)
[如何在我的 servlet 中处理 UTF-8 编码字符串](https://stackoverflow.com/questions/6453262/how-can-i-handle-utf-8-encoded-strings-in-my-servlet/6453434#6453434)

# jquery - JQuery Mobile 克隆页面

> ID：14923313
> 
> 赞同：2
> 
> 时间：2013-02-17T16:32:47.387
> 
> 标签：jquery, jquery-mobile, clone

我在克隆 jqm 页面时遇到问题。这是一个例子：

[http://jsfiddle.net/QZKBw/](http://jsfiddle.net/QZKBw/)

如您所见，克隆和修改页面不是问题：

```
 var newPage = $('#page-1').clone();
    newPage.prop('id', 'page-2');
    newPage.find('#header-1')
        .prop('id', 'header-2')
        .find('h1')
        .html('Page 2'); 
```

切换回第 1 页最终会出现两个活动页面。是jqm的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:52:10.093

这应该这样做：http: [//jsfiddle.net/Gajotres/Nc98p/](http://jsfiddle.net/Gajotres/Nc98p/)

```
$(function () {
    $('#clone-page').click(function () {
        if($('#page-2').length == 0){
            var newPage = $('#page-1').clone();
            newPage.prop('id', 'page-2');
            newPage.find('#header-1')
                .prop('id', 'header-2')
                .find('h1')
                .html('Page 2');
            newPage.find('#content-1')
                .prop('id', '#content-2')
                .html('<a href="#page-1" data-role="button"> to Page 1</a>');
            newPage.appendTo($.mobile.pageContainer);        
        }        
        $.mobile.changePage('#page-2');
    });
}); 
```

# macos - 限制 OSX /Darwin 中单个进程的内存使用

> ID：14923319
> 
> 赞同：2
> 
> 时间：2013-02-17T16:33:13.397
> 
> 标签：macos, memory-management, darwin, ulimit, setrlimit

我正在尝试修改一些 JNI 代码以限制进程可以消耗的内存量。这是我用来在 linux 和 osx 上测试 setRlimit 的代码。在 linux 中，它按预期工作，并且 buf 为空。

此代码将限制设置为 32 MB，然后尝试分配 64 MB 缓冲区，如果缓冲区为空，则 setrlimit 有效。

```
 #include <sys/time.h>
    #include <sys/resource.h>                                                     
    #include <stdio.h>                                                  
    #include <time.h>                                                   
    #include <stdlib.h>                                                  
    #include <unistd.h>                                                   
    #include <sys/resource.h>

    #define errExit(msg)     do { perror(msg); exit(EXIT_FAILURE); \
                                       } while (0)

       int main(int argc) {

        pid_t pid = getpid();

        struct rlimit current;
        struct rlimit *newp;

        int memLimit = 32 * 1024 * 1024;
        int result = getrlimit(RLIMIT_AS, &current);
        if (result != 0)
                errExit("Unable to get rlimit");

        current.rlim_cur = memLimit;
        current.rlim_max = memLimit;

        result = setrlimit(RLIMIT_AS, &current);
        if (result != 0)
                errExit("Unable to setrlimit");

        printf("Doing malloc \n");
        int memSize = 64 * 1024 * 1024;

        char *buf = malloc(memSize);

        if (buf == NULL) {
                printf("Your out of memory\n");
        } else {
                printf("Malloc successsful\n");
        }

        free(buf);
} 
```

在 linux 机器上这是我的结果

```
memtest]$ ./m200k                             
Doing malloc 
Your out of memory 
```

在 osx 10.8 上

```
./m200k 
Doing malloc 
Malloc successsful 
```

我的问题是，如果这在 osx 上不起作用，是否有办法在 darwin 内核中完成这项任务。手册页似乎都说它会起作用，但似乎没有这样做。我已经看到 launchctl 对限制内存有一些支持，但我的目标是在代码中添加这种能力。我也尝试使用 ulimit ，但这也不起作用，我很确定 ulimit 使用 setrlimit 来设置限制。当超过 setrlimit soft 或 hardlimit 时，我还能捕捉到信号吗？我一直找不到。

如果它也可以在 Windows 中完成，则可以加分。

感谢您的任何建议

**更新**
正如指出的那样，RLIMIT_AS 在手册页中明确定义，但被定义为 RLIMIT_RSS，因此如果参考文档，RLIMIT_RSS 和 RLIMIT_AS 在 OSX 上是可互换的。

osx 10.8 上的 /usr/include/sys/resource.h

```
#define RLIMIT_RSS      RLIMIT_AS       /* source compatibility alias */ 
```

测试了特洛伊木马对使用此处描述的 RLIMIT_DATA 的极好建议

```
 The RLIMIT_DATA limit specifies the maximum amount of bytes the process
 data segment can occupy. The data segment for a process is the area in which 
 dynamic memory is located (that is, memory allocated by malloc() in C, or in C++,
 with new()). If this limit is exceeded, calls to allocate new memory will fail. 
```

linux 和 osx 的结果是一样的，那就是 malloc 对两者都是成功的。

```
chinshaw@osx$ ./m200k 
Doing malloc 
Malloc successsful

chinshaw@redhat ./m200k
Doing malloc 
Malloc successsful 
```

# java - 数独求解器回溯

> ID：14923328
> 
> 赞同：2
> 
> 时间：2013-02-17T16:33:59.430
> 
> 标签：java, backtracking, sudoku

我正在浏览一些数独求解器，我正在寻找一个使用回溯的求解器，现在我找到了这段代码，但我不确定它是使用回溯还是其他算法？

帮助表示赞赏。

```
abstract class SudoKiller {
private SudokuBoard sb;    // Puzzle to solve;

public SudoKiller(SudokuBoard sb) {
    this.sb = sb;
}

private boolean check(int num, int row, int col) {
    int r = (row / sb.box_size) * sb.box_size;
    int c = (col / sb.box_size) * sb.box_size;

    for (int i = 0; i < sb.size; i++) {
        if (sb.getCell(row, i) == num ||
            sb.getCell(i, col) == num ||
            sb.getCell(r + (i % sb.box_size), c + (i / sb.box_size)) == num) {
            return false;
        }
    }
    return true;
}

public boolean guess(int row, int col) {
    int nextCol = (col + 1) % sb.size;
    int nextRow = (nextCol == 0) ? row + 1 : row;

    try {
        if (sb.getCell(row, col) != sb.EMPTY)
            return guess(nextRow, nextCol);
    }
    catch (ArrayIndexOutOfBoundsException e) {
            return true;
    }

    for (int i = 1; i <= sb.size; i++) {
        if (check(i, row, col)) {
            sb.setCell(i, row, col);
            if (guess(nextRow, nextCol)) {
                return true;
            }
        }
    }
    sb.setCell(sb.EMPTY, row, col);
    return false;
}
} 
```

如果这不是回溯，是否有一种简单的方法可以“转换”到它？

整个项目可以在[作者网站](http://www.kernel-panic.it/software/sudokiller/sudokiller.java.html)上找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:36:29.077

看起来它通过递归进行回溯。

在这里，我们向前迈进：

```
sb.setCell(i, row, col); 
```

在这里我们退后一步：

```
sb.setCell(sb.EMPTY, row, col); 
```

# c++ - 省略号的记号类别

> ID：14923330
> 
> 赞同：0
> 
> 时间：2013-02-17T16:34:03.230
> 
> 标签：c++, token, lexical-analysis, ellipsis

`...`分词后的 C++ 编程语言中省略号 ( ) 的分词类别是什么？我似乎找不到任何指定它是否是分隔符和运算符等的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:55:21.757

省略号在 C++11 8.3.5/3中*参数声明子句*的语法描述中进行了描述。

C++ 没有完整而详尽的形式语法，所以我认为要求“令牌类”是没有意义的：没有人声称 C++*有*令牌类。如果 C++ 程序符合标准中规定的规则，那么它就是格式良好的程序。

# sinatra - RMagick & Sinatra：发送图片以查看而不存储

> ID：14923331
> 
> 赞同：1
> 
> 时间：2013-02-17T16:34:04.590
> 
> 标签：sinatra, image, rmagick

目前我正在编写一个 Sinatra 应用程序，它从用户那里获取一些图片并返回一张新图片。

有一部分haml形式：

```
 %input{type:'file', name:'user_image'} 
```

还有来自处理程序的代码：（蒙太奇是另一张图片）

```
 source_userpic = params[:user_image][:tempfile]
  blob = File.open(source_userpic).read
  userpic = ImageList.new
  userpic.from_blob(blob)
  resized_img = userpic.scale(montage.columns,
                              montage.rows)
  resized_img.opacity = MaxRGB/3 
```

然后将两个图像“分层”合成并存储（不需要）

```
 final_picture = ImageList.new
  final_picture << montage.composite(resized_img, 0, 0, OverCompositeOp)

  final_picture.write("./public/uploads/#{DateTime.now}.jpg" # dirty (for example) 
```

接下来，我需要用ajax 显示一个final_picture。有两个明显的问题：首先，我不需要保存 final_picture - 它只是预览，其次，我必须编写代码以避免文件名冲突......

如何发送 final_picture 来查看？to_blob 方法？但接下来是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:33:51.090

我通过使用数据 URI 方案解决了这个问题。

```
require 'base64'

final_picture.format = "jpeg" # whatever
# Using a to_blob method to create a direct-to-memory version of the image.
# Then encode it to base64 string
data_uri = Base64.encode64(final_picture.to_blob).gsub(/\n/, "") 
@image_tag = '<img alt="preview" src="data:image/jpeg;base64,%s">' % data_uri

haml:'pages/preview' 
```

然后显示一张图片

```
= @image_tag 
```

不确定这是否是最佳解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:40:06.117

看看[Tempfile](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)，它应该为你处理文件名冲突。

然后你可以使用[这个问题的答案中](https://stackoverflow.com/questions/2203600/sinatra-whats-the-correct-way-to-serve-a-plain-old-file)的技术，使用[send_file](http://rubydoc.info/gems/sinatra/Sinatra/Helpers#send_file-instance_method)发送临时文件。

您必须记住临时文件不会持久化，因此如果您使用不同的请求和响应来提供文件，则必须小心管理该持久性。

# delphi - 将对象附加到已经存在的 ListItem？

> ID：14923332
> 
> 赞同：2
> 
> 时间：2013-02-17T16:34:08.107
> 
> 标签：delphi, listview, object, delphi-xe2, listitem

在 ListView 中，如何随时将对象附加到已经存在的 ListItem？（我知道我可以使用 将对象附加到 ListItem `AddItem`，但是我需要在创建 ListItem 后附加对象）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T16:36:31.360

您可以通过该[`TListItem.Data`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TListItem.Data)属性访问它。例如：

```
var
  ListItem: TListItem;
begin
  ListView1.AddItem('Item 1', nil);
  ...
  ListItem := ListView1.Items[0];
  ListItem.Data := Edit1;
  TEdit(ListItem.Data).Text := 'Updated text...';
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T17:41:55.430

您可以使用`Data`. `TListItem`这通常是一种快速简便的方法。唯一的小问题是您是否需要列表项来管理其关联数据的生命周期。在这种情况下，您必须实现一个`OnDeletion`事件处理程序以在节点被销毁时最终确定关联的数据。

另一种方法是使用`TListItem`. 首先定义你的子类：

```
type
  TMyListItem = class(TListItem)
  private
    FDateTime: TDateTime;
  public
    property DateTime: TDateTime read FDateTime write FDateTime;
  end; 
```

然后为列表视图的`OnCreateNodeClass`事件实现一个处理程序。这决定了列表视图实例化的列表项的实际类别。

```
procedure TForm1.ListView1CreateItemClass(Sender: TCustomListView; 
  var ItemClass: TListItemClass);
begin
  ItemClass := TMyListItem;
end; 
```

现在列表视图将创建 class 的项目`TMyListItem`。

因此，您可以像访问任何其他属性一样简单地访问列表项的`DateTime`属性。当然，这种方法可以扩展到存储更多信息。

唯一需要说明的一点是，列表视图控件仍会为您提供编译时类型为 is 的项目`TListItem`。所以你需要向上转换。

例如，假设您想在编辑项目时做某事。事件处理程序如下所示：

```
procedure ListView1Edited(Sender: TObject; Item: TListItem; var S: string); 
```

请注意，该项目作为 type 传递`TListItem`。所以你需要这样写：

```
procedure TForm1.ListView1Edited(Sender: TObject; Item: TListItem; 
  var S: string);
var
  MyItem: TMyListItem;
begin
  MyItem := Item as TMyListItem;
  if MyItem.DateTime ....
end; 
```

# internet-explorer - 隐藏在 Slider 后面的 IE 下拉导航菜单

> ID：14923334
> 
> 赞同：0
> 
> 时间：2013-02-17T16:34:08.180
> 
> 标签：internet-explorer

我正在使用购买的模板，并且无法解决给定代码的问题。只有在 Internet Explorer 中，我的下拉导航栏位于主页上的幻灯片放映之后，以及其他页面上的一些 img 元素之后。我尝试了其他建议，例如制作我的导航、`u`l、和`li`'s`z-index:10000`和我的滑块`z-index:-1`。还尝试了一些`z-index`无效的变量脚本。还有一些关于另一个线程的建议提到确保导航和滑块都是相对位置的，它们已经是......这个问题困扰着我并阻止我完成这个网站！这是唯一剩下的错误。

我的网址是 www.premieravc.com。

我知道关于这个问题有数百个线程，但是使用我购买的特定模板，我仍然没有找到解决方案。该模板是来自 4grafx 的 Quickr HTML Responsive，我还没有收到开发人员的回复。

请帮助，TJP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:00:57.467

我与你用于导航的 CSS 样式有关，它在 IE9 中运行良好，我看到你有一些 webkit 填充，试着把它拿走。

```
-webkit-margin-before: 1.67em;  
-webkit-margin-after: 1.67em;  
-webkit-margin-start: 0px;  
-webkit-margin-end: 0px; 
```

也很不错的网站:)

# mysql - 使用一个参数在 Rails 中搜索通配符多列

> ID：14923342
> 
> 赞同：1
> 
> 时间：2013-02-17T16:34:39.363
> 
> 标签：mysql, ruby-on-rails

使用 Rails 3.2。我有下表：

```
name                 address
=======================================
Hilton Hotel         New York, USA
Hilton Hotel         Paris, France
Mandarin Hotel       Chicago, USA
Le Meridien Hotel    New York, USA 
```

和以下查询：

```
term = "%#{params[:term]}%"
shops = Shop.limit(10).where("name LIKE ? OR address like ?", term, term) 
```

我的预期结果是这样的：

```
Search - "Hilton"
Result - "Hilton Hotel, New York, USA"; "Hilton Hotel, Paris, France"

Search - "Hilton USA"
Result - "Hilton Hotel, New York, USA"

Search - "New York"
Result - "Hilton Hotel, New York, USA"; "Le Meridien Hotel, New York, USA" 
```

我应该如何重写我的查询？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:45:24.317

你可以使用 MySQL 的 MATCH AGAINST。Rails 中没有直接支持，但您始终可以在 Rails 中使用自己的自定义查询

```
YourModel.find_by_sql("SELECT ... WHERE MATCH(...) AGAINST(...)") 
```

或者更多的 Rails 风格（没有测试过）：

```
YourModel.where("MATCH(...) AGAINST(...)") 
```

有关更多信息，请查看此处：[http ://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html)

**编辑：** 我会按空格、逗号、点等分割输入字符串，然后使用 MATCH AGAINST 来获得所有结果。所以如果你有这张桌子：

```
 col1 | col2
      -----------
row1: a c  | a
row2: a d  | b e
row3: b e  | a d
row4: b    | b c 
```

用户类型`a`作为输入。你应该做

```
MATCH(col1, col2) AGAINST ('a') 
```

这将返回：

```
row1: 'a c', 'a'
row2: 'a d', 'b e'
row3: 'b e', 'a d' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:01:11.867

我为此使用了另一种解决方法。

I create another column `for_autocomplete` and concatenate the `name` and `address` into it. Every time a record is created/updated, it will create/update `for_autocomplete` accordingly. Then I just search through the `for_autocomplete` column.

# c++ - 你会如何使用 Alexandrescu 的 Expected 具有无效功能？

> ID：14923346
> 
> 赞同：37
> 
> 时间：2013-02-17T16:34:48.223
> 
> 标签：c++, c++11, error-handling, runtime-error

所以我遇到了这个（恕我直言）使用返回值和异常的复合结构的非常好的想法 - `Expected<T>`。它克服了传统错误处理方法（异常、错误代码）的许多缺点。

请参阅[Andrei Alexandrescu 的演讲（C++ 中的系统错误处理）](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)及其[幻灯片](https://skydrive.live.com/?cid=f1b8ff18a2aec5c5&id=F1B8FF18A2AEC5C5!1158)。

异常和错误代码具有基本相同的使用场景，具有返回某些内容的函数和不返回某些内容的函数。`Expected<T>`另一方面，它似乎只针对返回值的函数。

所以，我的问题是：

*   你们有没有人`Expected<T>`在实践中尝试过？
*   您如何将这个习惯用法应用于不返回任何内容的函数（即 void 函数）？

**更新：**

我想我应该澄清我的问题。专业化是有道理的`Expected<void>`，但我对如何使用它更感兴趣——一致的使用习惯。实现本身是次要的（也很容易）。

例如，Alexandrescu 给出了这个例子（有点编辑）：

```
string s = readline();
auto x = parseInt(s).get(); // throw on error
auto y = parseInt(s); // won’t throw
if (!y.valid()) {
    // ...
} 
```

这段代码是“干净的”，它只是自然流动。我们需要价值——我们得到它。但是，`expected<void>`必须捕获返回的变量并对其执行一些操作（例如`.throwIfError()`或其他），这并不那么优雅。显然，`.get()`对 void 没有意义。

`toUpper(s)`那么，如果你有另一个函数，比如，它会就地修改字符串并且没有返回值，你的代码会是什么样子？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-17T16:52:17.893

尽管对于只关注 C-ish 语言的人来说它可能看起来很新鲜，但对于我们这些喜欢支持 sum 类型的语言的人来说，它不是。

例如，在 Haskell 中，您有：

```
data Maybe a = Nothing | Just a

data Either a b = Left a | Right b 
```

其中`|`读取*或*和第一个元素（`Nothing`, `Just`, `Left`, `Right`）只是一个“标签”。本质上 sum-types 只是有*区别的 unions*。

在这里，你会`Expected<T>`是这样的：`Either T Exception`具有`Expected<void>`类似于`Maybe Exception`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-17T17:41:10.110

> 你们中的任何人都尝试过预期吗？在实践中？

这很自然，甚至在我看到这个演讲之前我就使用了它。

> 您如何将这个习惯用法应用于不返回任何内容的函数（即 void 函数）？

幻灯片中呈现的表格有一些微妙的含义：

*   异常绑定到该值。
*   可以根据需要处理异常。
*   如果由于某些原因忽略了该值，则会抑制异常。

如果你有，这不成立`expected<void>`，因为没有人对这个`void`值感兴趣，所以总是忽略异常。我会强制这样做，因为我会强制从`expected<T>`Alexandrescus 类中读取，带有断言和显式`suppress`成员函数。出于充分的理由，不允许从析构函数中重新抛出异常，因此必须使用断言来完成。

```
template <typename T> struct expected;

#ifdef NDEBUG // no asserts
template <> class expected<void> {
  std::exception_ptr spam;
public:
  template <typename E>
  expected(E const& e) : spam(std::make_exception_ptr(e)) {}
  expected(expected&& o) : spam(std::move(o.spam)) {}
  expected() : spam() {}

  bool valid() const { return !spam; }
  void get() const { if (!valid()) std::rethrow_exception(spam); }
  void suppress() {}
};
#else // with asserts, check if return value is checked
      // if all assertions do succeed, the other code is also correct
      // note: do NOT write "assert(expected.valid());"
template <> class expected<void> {
  std::exception_ptr spam;
  mutable std::atomic_bool read; // threadsafe
public:
  template <typename E>
  expected(E const& e) : spam(std::make_exception_ptr(e)), read(false) {}
  expected(expected&& o) : spam(std::move(o.spam)), read(o.read.load()) {}
  expected() : spam(), read(false) {}

  bool valid() const { read=true; return !spam; }
  void get() const { if (!valid()) std::rethrow_exception(spam); }
  void suppress() { read=true; }

  ~expected() { assert(read); }
};
#endif

expected<void> calculate(int i)
{
  if (!i) return std::invalid_argument("i must be non-null");
  return {};
}

int main()
{
  calculate(0).suppress(); // suppressing must be explicit
  if (!calculate(1).valid())
    return 1;
  calculate(5); // assert fails
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T10:12:34.850

就像 Matthieu M. 所说的，这对 C++ 来说是相对较新的东西，但对于许多函数式语言来说并不是什么新鲜事。

我想在这里添加我的 2 美分：在我看来，可以在“程序与功能”方法中找到部分困难和差异。而且我想用Scala（因为我对Scala和C++都很熟悉，而且我觉得它有一个更接近的工具（Option）`Expected<T>`）来说明这种区别。

在 Scala 中，您有 Option[T]，它是 Some(t) 或 None。特别是，也可能有 Option[Unit]，它在道德上等价于`Expected<void>`.

在 Scala 中，使用模式非常相似，并且围绕 2 个函数构建：isDefined() 和 get()。但它也有一个“map()”功能。

我喜欢将“map”视为“isDefined + get”的功能等价物：

```
if (opt.isDefined)
   opt.get.doSomething 
```

变成

```
val res = opt.map(t => t.doSomething) 
```

将选项“传播”到结果

我认为在这里，以这种使用和组合选项的功能风格，可以回答您的问题：

> 那么，如果你有另一个函数，比如 toUpper(s)，它会就地修改字符串并且没有返回值，你的代码会是什么样子？

就个人而言，我不会修改字符串，或者至少我不会返回任何内容。我认为`Expected<T>`这是一个“功能性”概念，需要一个功能性模式才能正常工作： toUpper(s) 需要返回一个新字符串，或者在修改后返回自身：

```
auto s = toUpper(s);
s.get(); ... 
```

或者，使用类似 Scala 的地图

```
val finalS = toUpper(s).map(upperS => upperS.someOtherManipulation) 
```

如果您不想遵循功能路线，则可以使用 isDefined/valid 并以更程序化的方式编写代码：

```
auto s = toUpper(s);
if (s.valid())
    .... 
```

如果您遵循这条路线（可能是因为您需要），则需要说明“void vs. unit”的观点：从历史上看，void 不被视为一种类型，但“无类型”（void foo() 被视为类似于 Pascal程序）。单元（在函数式语言中使用）更多地被视为一种类型，意思是“计算”。所以返回一个 Option[Unit] 确实更有意义，被视为“一个可以选择做某事的计算”。在 中`Expected<void>`，void 具有类似的含义：当它按预期工作时（没有例外情况），计算就结束了（什么也不返回）。至少，海事组织！

因此，使用 Expected 或 Option[Unit] 可以被视为可能产生结果的计算，也可能不产生结果。将它们链接起来会很困难：

```
auto c1 = doSomething(s); //do something on s, either succeed or fail
if (c1.valid()) {
   auto c2 = doSomethingElse(s); //do something on s, either succeed or fail
   if (c2.valid()) { 
        ... 
```

不是很干净。

Scala 中的 Map 让它更干净一点

```
doSomething(s) //do something on s, either succeed or fail
   .map(_ => doSomethingElse(s) //do something on s, either succeed or fail
   .map(_ => ...) 
```

哪个更好，但仍远非理想。在这里，Maybe monad 显然赢了……但那是另一回事了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T06:21:30.673

自从看了这个视频后，我一直在思考同样的问题。到目前为止，我还没有找到任何令人信服的论据来支持 Expected，对我来说这看起来很荒谬，而且不利于清晰和干净。到目前为止，我提出了以下几点：

*   预期是好的，因为它具有值或异常，我们不会强制对每个可抛出的函数使用 try{}catch()。所以将它用于每个具有返回值的抛出函数
*   每个不抛出的函数都应该用`noexcept`. 每一个。
*   每个不返回任何内容且未标记为的函数`noexcept`都应由 try{}catch{} 包装

如果这些陈述成立，那么我们已经自我记录了易于使用的接口，只有一个缺点：如果不查看实现细节，我们不知道会抛出哪些异常。

预期会给代码带来一些开销，因为如果您在类实现的内部有一些异常（例如，在私有方法内部），那么您应该在接口方法中捕获它并返回预期。虽然我认为对于具有返回某些概念的方法来说这是可以容忍的，但我相信它会给设计上没有返回值的方法带来混乱和混乱。此外，对我来说，从不应该返回任何东西的东西中返回东西是很不自然的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-09T05:08:03.870

它应该通过编译器诊断来处理。许多编译器已经根据某些标准库结构的预期用途发出警告诊断。他们应该发出警告以忽略`expected<void>`.

# layout - 确定 Canvas 可以增长到的最大尺寸？

> ID：14923350
> 
> 赞同：1
> 
> 时间：2013-02-17T16:35:00.063
> 
> 标签：layout, canvas, javafx-2

我正在使用 BorderPane，其中右侧区域未使用。在中心区域，我有一个带有 Canvas 的 HBox 和另一个控件，例如一个 Button。我希望 Canvas 具有相同的宽度和高度，值为

```
Canvas width and height = minimum{maximum possible Canvas height, maximum possible Canvas width} 
```

（换句话说：画布应该是正方形）

我的问题是：如何确定 Canvas 可以增长到的最大宽度和最大高度？

这是我的 FXML：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<BorderPane id="BorderPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml">
  <bottom>
    <Label text="Bottom area" />
  </bottom>

  <center>
    <HBox>
      <children>
        <Canvas width="300" height="300" />
        <Button mnemonicParsing="false" text="some button next to the Canvas" />
      </children>
    </HBox>
  </center>

  <left>
    <Button mnemonicParsing="false" text="Left area"/>
  </left>

  <top>
    <MenuBar>
      <menus>
        <Menu mnemonicParsing="false" text="File">
          <items>
            <MenuItem mnemonicParsing="false" text="Close" />
          </items>
        </Menu>       

      </menus>
    </MenuBar>
  </top>

</BorderPane> 
```

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:38:21.403

我能看到的最简单的方法是：canvas.getwidth() 和 canvas.getHeight()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T08:26:09.270

在构建 GUI 之后，您必须手动添加画布，以便计算其大小：

```
public class YourController implements Initializable {

    @FXML HBox   mHBox; 
    @FXML Button mButton;

    @Override
    public void initialize(final URL paramURL, final ResourceBundle paramResourceBundle) {
        Platform.runLater(new Runnable() { public void run() {
            double w0 = mHBox.getWidth();
            double w1 = mButton.getWidth();
            double h0 = mHBox.getHeight();
            double size = Math.min(w0-w1, h0);
            Canvas canvas = new Canvas(size, size);
            mHBox.getChildren().add(0, canvas);
        }});
    }
} 
```

画布的问题是不可调整大小:(

# jquery - 对于ajax post，要传递的数据应该放在哪里？

> ID：14923351
> 
> 赞同：1
> 
> 时间：2013-02-17T16:35:12.780
> 
> 标签：jquery, model-view-controller

我正在使用自制的 MVC 框架。客户端将当前页面#、控制器名称、所需任务和任何相关数据传递给服务器。所有这些信息都可以在 URL 或 post 对象中。

我强烈怀疑要保存的数据应该存储在 post 对象中，并且可能也是任务，因为它仅适用于 post 数据。页码和控制器名称在 URL 中可能更有意义，因为我将收到具有相同页码和控制器的类似 get 请求。我在下面的示例中以这种方式显示它。

我应该在哪里找到要传递的信息，为什么？谢谢

```
$.post('index.php?page=123&controller=edit',{task:'saveSomething', data:'whatever'}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:40:49.670

如果要检索服务器上的现有资源，则应使用**GET** ，如果创建资源或修改现有资源，则应使用**POST 。**您应该阅读 HTTP 规范。

话虽如此，将所有数据放在**POST**对象中可能是最简单的。

前任。

```
var post_data = {
  page:123,
  controller:'edit',
  //other data
};

$.post('/url',post_data,function(response){/*callback function*/}); 
```

更进一步，您应该有一个*页面控制器*，其中包含页面 id 传递给的*编辑操作。*然后，您将在 url 部分中获得要访问的控制器和操作，以及 POST 数据中的资源 id。

根据您的应用程序的范围，您很可能应该使用可以为您处理此类事情的框架。这样，您的应用程序将保持一致的结构，并且 99% 的这些障碍已经被其他用户考虑过了。你可能想考虑使用类似 CodeIgniter、CakePHP、FuelPHP 等的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:38:07.337

我认为最好只使用一种方法，GET（url）或POST。

对我来说，POST 总是更好的方式。除非您特别想使用 URL 来传递数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:53:05.037

你的查询是对的。

我假设您希望参数在 $_GET`page`和$_POST 中可用`controller`。但是，问题似乎出在标题上，您无法通过此方法控制它。`task``data``Content-Type`

见[https://github.com/jquery/jquery/blob/1.4.2/src/ajax.js#L143](https://github.com/jquery/jquery/blob/1.4.2/src/ajax.js#L143) 神奇之处在于[https://github.com/jquery/jquery/blob/1.4.2/src/ ajax.js#L205](https://github.com/jquery/jquery/blob/1.4.2/src/ajax.js#L205)

*   选项 1：
    设置标题：
    `$.ajaxSettings['headers'] = [ 'Content-Type': 'application/form-www-url-encoded']`.
    只做一次。

*   选项 2：
    使用`$.ajax`

> ```
> $.ajax({
>     type: "POST",
>     headers: ['Content-Type': 'application/form-www-url-encoded'],
>     url: 'index.php?page=123&controller=edit',
>     data: {task:'saveSomething', data:'whatever'},
> }); 
> ```

# symfony - Symfony2 __toString() 错误

> ID：14923359
> 
> 赞同：6
> 
> 时间：2013-02-17T16:35:49.260
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我在将实体保存回我时遇到了这个错误：

```
Catchable Fatal Error: Method My\BusinessBundle\Entity\Type::__toString() 
must return a string value in
/var/www/MyBusiness0_1/vendor/doctrine/orm/lib/Doctrine/ORM/ORMInvalidArgumentException.php line 113 
```

奇怪的是方法__toString()是实体类型！

```
class Type
{
 //..

/**
 * @var string
 *
 * @ORM\Column(name="type", type="string", length=100)
 */
private $type;

/**
 * @ORM\OneToMany(targetEntity="MailTelCont", mappedBy="type")
 */
protected $mailTelContacts;

public function __construct()
{
    $this->mailTelContacts = new \Doctrine\Common\Collections\ArrayCollection();
}

public function __toString()
{
    return $this->getType();
}
//... 
```

另一个奇怪的事情是，如果我将 cascade ={"persist"} class MailTelCont 放在 ManyToOne 关系“type”上并不会显示这个错误，而是在 Type .. 中保存一个新字段。

MailTelCont 类

```
class MailTelCont
{
 //..
/**
 * @var string
 *
 * @ORM\Column(name="contact", type="string", length=100)
 */
private $contact;

/**
 * @ORM\ManyToOne(targetEntity="Type", inversedBy="mailTelContacts")
 * @ORM\JoinColumn(name="type_id", referencedColumnName="id")
 */
private $type;

/**
 * @ORM\ManyToOne(targetEntity="Anagrafica", inversedBy="mailTelContacts", cascade={"persist"})
 * @ORM\JoinColumn(name="anagrafica_id", referencedColumnName="id")
 * @Assert\Type(type="My\BusinessBundle\Entity\Anagrafica")
 */
private $anagrafica;

public function __toString()
{
    return $this->getContact();
} 
```

以这种方式调用嵌套的“AnagraficType”形式：

```
class TypeType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('type', 'entity', array(
                'class' => 'My\BusinessBundle\Entity\Type',
                'attr' => array('class' => 'conct'),
                'property' => 'type',
                'label' => 'Tipologia',
        ))
    ;
}
*****
class MailTelContType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('type', new TypeType())
        ->add('contact', 'text', array('label' => 'Contatto'))                
    ;
}
*****
class AnagraficaType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('mailTelContacts', 'collection', array('type' => new MailTelContType(), 
                'allow_add' => true,
                'allow_delete' => true,
                'prototype' => true,
                'by_reference' => false
            )) 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-17T16:48:46.120

我认为那些价值观就是`null`那时。你试过了吗：

```
public function __toString()
{
    return (string) $this->getType();
} 
```

和

```
public function __toString()
{
    return (string) $this->getContact();
} 
```

这样，当值`null`被转换为字符串时，你不应该得到这个异常。

# perl - 如何在 Perl 中链接 SSL 证书？

> ID：14923364
> 
> 赞同：1
> 
> 时间：2013-02-17T16:36:21.747
> 
> 标签：perl, ssl

Perl新手在这里。我需要将一个中间 CA x509 证书链接到我的客户端证书。

```
Net::SSLeay::set_cert_and_key($ctx, $crt, $key);
my $bio = Net::SSLeay::BIO_new_file("subca.crt", 'r');
my $x509 = Net::SSLeay::PEM_read_bio_X509($bio);
Net::SSLeay::CTX_add_extra_chain_cert($ctx, $x509)
    and die_if_ssl_error("CTX_add_extra_chain_cert"); # It dies here. 
```

证书为 pem 格式。任何人都可以帮忙吗？

编辑：我发现对“Net::SSLeay::PEM_read_bio_X509()”的调用返回 0，这是一个错误情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:04:32.343

这正是我想要的：

```
Net::SSLeay::CTX_use_RSAPrivateKey_file($ctx, $key, &Net::SSLeay::FILETYPE_PEM)
    and die_if_ssl_error("private key");
Net::SSLeay::CTX_use_certificate_chain_file($ctx, $crt)
    and die_if_ssl_error("CTX_use_certificate_chain_file"); 
```

$crt 包含 2 个证书，第一个是客户端证书，然后是中间证书。

# css - 为什么这不能正确对齐我的元素？

> ID：14923369
> 
> 赞同：0
> 
> 时间：2013-02-17T16:36:33.637
> 
> 标签：css, layout, html

```
<html>
<head>
<link rel="stylesheet" href="../static/styles/base.css" type="text/css" />
</head>
<body>
    <div id= "top-nav">
        <h1>Sitename</h1>
        <ul>
            <li><a href="#">Feed</a></li>
            <li><a href="#">Profile</a></li>
            <li><a href="#">Settings</a></li>
        </ul>
    </div>
</body>
</html> 
```

#

```
html,
body {
    height: 100%;
    width: 100%;
    padding: 0 0 0 0;
    margin: 0 0 0 0;
}

#top-nav{
background-color: Gray;
width: 100%;
height: 135px;
padding: 0 0 0 0;
margin: 0 0 0 0;
}

#top-nav h1{
    float: left;
    margin: inherit;
    padding-right: 700px;

}

#top-nav ul{
    float: left;
    bottom: 0;
}

#top-nav li{
    text-align: right;
    display: inline;
    padding-right: 5px;
} 
```

我希望我的布局是让 h1 在顶部导航 div 的中心垂直对齐，我希望 ul 在顶部导航底部的页面右侧。为什么我会得到意想不到的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:51:14.987

`padding-right: 700px`规则`#top-nav h1`是将元素推离`ul`位置。

像这样的东西应该工作：

```
html,
body {
    height: 100%;
    width: 100%;
    padding: 0; /* You can just have one 0 instead of "0 0 0 0". */
    margin: 0;
}

#top-nav {
    background-color: Gray;
    width: 100%;
    height: 135px;
}

#top-nav h1 {
    float: left;
    line-height: 135px; /* Set to the height of #top-nav */
    margin: 0;
}

#top-nav ul {
    float: right;
}

#top-nav li {
    text-align: right;
    display: inline;
    padding-right: 5px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:48:12.747

可能是因为你进入的空间

`<div id= "top-nav">`

在“id=”之后？

另外，不要使用`padding-right: 700px;`h1 元素，只需将`ul`元素浮动到右侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:55:22.587

对于您的导航位于顶部导航元素的底部，您可以使用绝对属性，因此它始终固定在底部。正如前面的答案所说，不要为 H1 使用一个浮点数。对于您的 h1 垂直对齐，您可以尝试不同的填充来获得您想要的（或者您可以使用 display:table ... 制作更复杂的脚手架）但更简单的是：

```
#top-nav h1{
        padding-top:30px;
        display:inline-block;
        width:auto;
        vertical-align:middle; 
}

#top-nav ul{
    position:absolute;
    top:100px;
    right:5px;
} 
```

它回答了吗？

编辑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T17:10:20.117

有几种方法可以实现你想要的。Fe，用于`h1`在 的中间垂直对齐`#top-nav`：

```
#top-nav h1 {
    ...
    line-height: 135px;
    margin: 0;
} 
```

并用于对齐`ul`底部`#top-nav`：

```
#top-nav {
    ...
    position: relative;
}
#top-nav ul {                           
    ...
    position: absolute;
    bottom: 0;
    right: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T17:14:52.330

您遇到问题是因为您错误地使用了布局元素。该`<ul>`元素用于无序列表，不适用于包含链接的菜单。此外，`float`强烈建议不要使用 using，因为它仅用于让文本环绕图像而不是用于布局。浮动必须被清除并且不能很好地跨浏览器工作。

这里的技巧是使用绝对定位并确保值是相对于容器的，所以你必须设置`#top-nav`div`position: relative`否则它的子元素将相对于第一个*定位*的父元素定位，这很可能是 body 元素在这种情况下。

这对我来说很好：http: [//jsfiddle.net/gc3EY/1/](http://jsfiddle.net/gc3EY/1/)

HTML：

```
<html>

    <head>
        <title>Test</title>
    </head>

    <body>
        <div id="top-nav">
             <h1>Sitename</h1>
        <span>
            <a href="#">Feed</a>
            <a href="#">Profile</a>
            <a href="#">Settings</a>
        </span>

        </div>
    </body>

</html> 
```

CSS：

```
body { margin: 0; padding: 0; overflow-x: hidden;}

div#top-nav span {
    position: absolute;
    bottom: 0px;
    padding: 0;
    margin: 0;
    text-align: right;
    width: 97%;
}
div#top-nav span a {
    padding: 0 2px;
}
div#top-nav {
    background-color: gray;
    width: 100%;
    height: 135px;
    margin: 0px;
    padding: 5px;
    position: relative;
}
div#top-nav h1 {
position: relative;
top: 0px;
    margin: 0;
    padding: 0;
} 
```

# c# - filewatcher 监视多个文件，但以不同方式处理它们

> ID：14923370
> 
> 赞同：1
> 
> 时间：2013-02-17T16:36:35.373
> 
> 标签：c#, filesystemwatcher

我需要在不同时间观看多个文件，有时同时观看。

我用这个作为测试：

```
namespace FilewatcherTest
{
  public partial class Form1 : Form
  {
    private System.IO.FileSystemWatcher FSWatcherTest;

    public Form1()
    {
      InitializeComponent();

      FSWatcherTest = new FileSystemWatcher();
      EventHandling();
      FSWatcherTest.Path = @"d:\tmp";
      FSWatcherTest.Filter = "file.txt";
      // Begin watching.
      FSWatcherTest.EnableRaisingEvents = true;
    }

    protected void EventHandling()
    {
      FSWatcherTest.Changed += FSWatcherTest_Changed;
      FSWatcherTest.Deleted += FSWatcherTest_Deleted;
      FSWatcherTest.Renamed += FSWatcherTest_Renamed;
      FSWatcherTest.Created += FSWatcherTest_Created;
    }

    private void FSWatcherTest_Changed(object sender, System.IO.FileSystemEventArgs e)
    {
      WriteToLog("File Changed");
    }

    private void FSWatcherTest_Created(object sender, System.IO.FileSystemEventArgs e)
    {
      WriteToLog("File Created");
    }

    private void FSWatcherTest_Deleted(object sender, System.IO.FileSystemEventArgs e)
    {
      WriteToLog("File Deleted");          
    }

    private void FSWatcherTest_Renamed(object sender, System.IO.RenamedEventArgs e)
    {
      WriteToLog("File Renamed");
    }

    private void WriteToLog(string message)
    {
      using (var sw = new StreamWriter(@"d:\tmp\service.log", true))
      {
        sw.WriteLine(string.Format("{0} {1}", DateTime.Now,message));
      }

    }

  }
} 
```

当然，一旦我有了一些东西，我就会改变硬编码的路径，因为这将进入我创建的服务。

我的问题是，我可以使用相同的文件观察器还是应该为每个文件使用一个唯一的？

如果我使用相同的文件，我怎么知道哪个文件引发了事件？

谢谢！！

**编辑抱歉，我以前没有使用过 filesystemwatcher，也不知道这很重要，但是文件将位于不同的目录中，并且文件类型不同。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:41:21.400

> 我可以使用相同的文件观察器还是应该为每个文件使用一个唯一的？

在您的情况下，我认为没有理由为您正在观看的每个文件创建一个新的 FileSystemWatcher 实例。是的，您可以使用相同的。您可以使用“*.txt”之类的过滤器或任何您需要观看一组文件的过滤器......

> 如果我使用相同的文件，我怎么知道哪个文件引发了事件？

有[`FileSystemEventArgs`](http://msdn.microsoft.com/en-us/library/40yayd7f.aspx)一个`Name`属性，它返回触发事件的文件的名称。例如：

```
private void FSWatcherTest_Created(object sender, System.IO.FileSystemEventArgs e)
{
   string fileName = e.Name; 
   WriteToLog("File Created: " + fileName);
} 
```

# tsql - TSQL 语法，将现有的“错误值”替换为以前的“正确值”

> ID：14923374
> 
> 赞同：0
> 
> 时间：2013-02-17T16:36:45.683
> 
> 标签：tsql

我有一个应用程序，它每小时在 MS SQL 数据库中输入一个条目。2 月 12 日的最后一个条目是零值，并显示在我的每周报告中。

我想要做的是从先前的计数中获取值并输入字段而不是零值。

有人可以就如何做到这一点提供一些建议，因为它超出了我的 TSQL 技能吗？

```
SELECT * FROM [dbo].[CountDetails]
WHERE [updateTime] < '2013-02.13'
AND [updateTime] > '2013-02.12'
AND ( DATEPART(hh,[updateTime])= '22' OR DATEPART(hh,[updateTime])= '23' ) 
```

![查询的 SQL 结果](../Images/13937b59924cb935c47f2af4c1ab2641.png)

注意：应用程序应该在午夜将计数归零，但在 2 月 12 日它发生得早，我知道为什么。

编辑：总共有 5 个 IP 地址和 6 个计数器，因为 192.168.168.11 有 2 个计数器。所以 2111 到 2116 是 22:58 时所有可用计数器的完整条目，而 2117 到 2122 是 23:58 时所有可用计数器的完整条目。我需要用 22:58 的相应值替换 23:58 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:37:20.410

在这里猜测，但更新加入`ipAddress`,`counterNumber`和`datetime`不包括小数秒，间隔一个小时（`SELECT`为了安全起见，先做部分）：

```
UPDATE b
SET count = a.count
-- SELECT *
FROM dbo.CountDetails a
JOIN dbo.CountDetails b ON a.ipAddress = b.ipAddress AND a.counterNumber = b.counterNumber
AND CONVERT(VARCHAR(20),b.updateTime,120) = CONVERT(VARCHAR(20),DATEADD(HOUR,1,a.updateTime),120) 
```

# java - 改变节点的值

> ID：14923375
> 
> 赞同：2
> 
> 时间：2013-02-17T16:36:51.737
> 
> 标签：java, swing, jtree

我有一个包含一些对象的 JTree

这些对象有一些字段，其中一个用于显示 jtree 中的节点。

我搜索了一种方法，当这个字段的值发生变化时，jtree 中的节点也会发生变化。

现在，如果我这样做，在 valueChanged 方法中：

```
tree.firePropertyChange(JTree.ROOT_VISIBLE_PROPERTY, !tree.isRootVisible(), tree.isRootVisible()); 
```

那工作......但我需要点击节点才能让它工作。

任何想法，当值更改时在 jtree 中进行修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T19:09:52.427

由于我没有看到整个代码，我有两个猜测：

1.  我想，您不会在 Swing-GUI-Thread 中更新整个内容，而是在其他地方更新。因此，GUI 具有来自线程的值，但不知道由于更改而更新 GUI。我猜，首先尝试在 AWTEventQUeue 中进行更新。Swing 实用程序。
2.  我想更新可能不合适，因为[DefaultTreeModel#nodeChanged(javax.swing.tree.TreeNode)](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeModel.html#nodeChanged%28javax.swing.tree.TreeNode%29)应该可以工作。更合适。

# jquery - 组合相似的 jQuery 语句

> ID：14923382
> 
> 赞同：0
> 
> 时间：2013-02-17T16:38:00.840
> 
> 标签：jquery

结合以下 jQuery 语句的最佳方式是什么——它们似乎都在做同样的事情，但正在处理不同的事件？

我希望通过这样做使我的代码更有效率。

```
 $(document).on('change click blur', '.roomFac', function () {
        var park = $("#park2").val();
        var lecturestyle = $("#lecture_style2").val();
        var roomstructure = $("#room_structure2").val();
        var groupsize = $("#groupSize2").val();
        var facilities = "";
        $('select[name*=roomFac]').each(function () {
            facilities += $(this).val();
            facilities += ",";
        });
        var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
            'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
            'facilities=' + facilities;
        $.ajax({
            type: "POST",
            url: "process_timetableMon2.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $('#mon').html(html);
            }
        });
    });

    // search - park2

    $("#park2").on("change click blur", function () {
        var park = $("#park2").val();
        var lecturestyle = $("#lecture_style2").val();
        var roomstructure = $("#room_structure2").val();
        var groupsize = $("#groupSize2").val();
        var facilities = "";
        $('select[name^=roomFac]').each(function () {
            facilities += $(this).val();
            facilities += ",";
        });
        facilities = substring(0, facilities.length - 1)
        var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
            'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
            'facilities=' + facilities;
        alert(dataString);
        $.ajax({
            type: "POST",
            url: "process_timetableMon2.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $('#mon').html(html);
            }
        });
    });

    // search - lecturestyle2

    $("#lecturestyle2").on("change click blur", function () {
        var park = $("#park2").val();
        var lecturestyle = $("#lecture_style2").val();
        var roomstructure = $("#room_structure2").val();
        var groupsize = $("#groupSize2").val();
            var facilities = $('#roomFac').val().join( ',' );
        var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
            'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
            'facilities=' + facilities;
        $.ajax({
            type: "POST",
            url: "process_timetableMon2.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $('#mon').html(html);
            }
        });
    });

    // search - room_structure2

    $("#room_structure2").on("change click blur", function () {
        var park = $("#park2").val();
        var lecturestyle = $("#lecture_style2").val();
        var roomstructure = $("#room_structure2").val();
        var groupsize = $("#groupSize2").val();
            var facilities = $('#roomFac').val().join( ',' );
        var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
            'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
            'facilities=' + facilities;
        $.ajax({
            type: "POST",
            url: "process_timetableMon2.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $('#mon').html(html);
            }
        });
    });

    // search - groupSize2

    $("#slider2").on("change click blur", function () {
        var park = $("#park2").val();
        var lecturestyle = $("#lecture_style2").val();
        var roomstructure = $("#room_structure2").val();
        var groupsize = $("#groupSize2").val();
                var facilities = $('#roomFac').val().join( ',' );
        var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
            'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
            'facilities=' + facilities;
        $.ajax({
            type: "POST",
            url: "process_timetableMon2.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $('#mon').html(html);
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:42:30.910

使用逗号：

```
$('#park2,#lecturestyle2,#roomstructure2,#slider2').add(document).on(/* blah blah blah*/) 
```

由于您无法`$('document')`输入`$('somestring')`表格，因此我将其附加到 jquery 列表中[`.add()`](http://api.jquery.com/add/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:45:16.140

创建一个函数并将其用作处理程序：

```
$(document).on('change click blur', '.roomFac', eventFunc);
$("#park2").on("change click blur", eventFunc);
$("#lecturestyle2").on("change click blur", eventFunc);
$("#room_structure2").on("change click blur", eventFunc);
$("#slider2").on("change click blur", eventFunc);

function eventFunc()
{
    var park = $("#park2").val();
    var lecturestyle = $("#lecture_style2").val();
    var roomstructure = $("#room_structure2").val();
    var groupsize = $("#groupSize2").val();
    var facilities = "";
    $('select[name*=roomFac]').each(function () {
        facilities += $(this).val();
        facilities += ",";
    });
    var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
        'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
        'facilities=' + facilities;
    $.ajax({
        type: "POST",
        url: "process_timetableMon2.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#mon').html(html);
        }
    });
} 
```

# entity-framework - 我可以避免实体中的外键属性吗？

> ID：14923383
> 
> 赞同：1
> 
> 时间：2013-02-17T16:38:03.390
> 
> 标签：entity-framework, ef-code-first

我有以下课程：

```
 public class Bicycle
    {
        public int BicycleId { get; set; }
        public DateTime YearOfManufacture { get; set; }
        public int BicycleManufactuerId { get; set; }
        public BicycleManufacturer BicycleManufacturer { get; set; }
    }

    public class BicycleManufacturer
    {
        public int BicycleManufacturerId { get; set; }
        public string Description { get; set; }
    } 
```

每个`Bicycle`必须有一个`BicycleManufacturer`(1:1)。可能有一些`BicycleManufacturer`与 any 无关`Bicycle`。大多数将与多个`Bicycle`实体相关联。

我有以下流畅的 API 代码来设置 FK 关系：

```
 modelBuilder.Entity<Bicycle>()
        .HasRequired(a => a.BicycleManufacturer)
        .WithMany()
        .HasForeignKey(u => u.BicycleManufactuerId); 
```

这一切似乎都很好。但是，我真的很想从实体中删除该`BicycleManufacturerId`属性。`Bicycle`它只是在那里建立FK关系。如果我删除此属性，有没有办法可以创建正确的 FK 关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:42:49.890

您可以删除该属性并使用映射：

```
modelBuilder.Entity<Bicycle>()
    .HasRequired(a => a.BicycleManufacturer)
    .WithMany()
    .Map(m => m.MapKey("BicycleManufactuerId")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:09:37.503

您也可以按照约定通过将另一侧的关系添加为集合来执行此操作。

```
public class Bicycle
    {
        public int BicycleId { get; set; }
        public DateTime YearOfManufacture { get; set; }
        public int BicycleManufactuerId { get; set; }
        public BicycleManufacturer BicycleManufacturer { get; set; }
    }

    public class BicycleManufacturer
    {
        public int BicycleManufacturerId { get; set; }

        public ICollection<Bicycle> Bicycles { get; set; }

        public string Description { get; set; }
    } 
```

# bash - 有没有办法在管道命令中捕获失败？

> ID：14923387
> 
> 赞同：3
> 
> 时间：2013-02-17T16:38:09.583
> 
> 标签：bash, shell, error-handling, pipe

这是我要实现的目标的示例：

```
#!/bin/bash
set -e    # abort if error
...
command1 2>&1 | command2
... 
```

而且我注意到有时会`command1`失败，但 command2 不会，并且 shell 脚本会愉快地继续......如果我不必在这里使用管道，那么`set -e`就足够了，但现在它不适用于那里的管道......

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T16:59:56.547

由于您使用的是bash，除了`set -e`您还可以添加`set -o pipefail`以获得您想要的结果......

# vb.net - 发生参照完整性约束违反 mvc4

> ID：14923396
> 
> 赞同：0
> 
> 时间：2013-02-17T16:39:20.223
> 
> 标签：vb.net, entity-framework, asp.net-web-api

我有这个课程：

```
Public Class Customer
      Public Property CustomerID As Integer
      Public Property CustomerName As String
      Public Property OrdersList As ICollection(Of Order)
End Class

Public Class Order
          Public Property OrderID As Integer
          Public Property CustomerID As Integer
          Public Property OrderTotal As Decimal
          Public Property OrderDetails As ICollection(Of OrderDetail)
          Public Property OrderCustomer As Customer
End Class

Public Class OrderDetail

    Public Property OrderDetailID As Integer
    Public Property OrderID As Integer
    Public Property ProductID As Integer
    Public Property Price As Decimal
    Public Property Quantity As Decimal
    Public Property LineTotal As Decimal

    Public Property OrderDetailOrder As Order
    Public Property OrderDetailProduct As Product

End Class

Public Class Product
    Public Property ProductID As Integer
    Public Property ProductName As String
    Public Property ProductPrice As Decimal
    Public Property OrderDetails As ICollection(Of OrderDetail)
End Class 
```

这就是 PUT 方法

```
Function PutOrder(ByVal id As Integer, ByVal order As Order) As HttpResponseMessage
        If ModelState.IsValid And id = order.OrderID Then
            db.Entry(order).State = EntityState.Modified
            Try
                db.SaveChanges()
            Catch ex As DbUpdateConcurrencyException
                 Return Request.CreateResponse(HttpStatusCode.NotFound)
            End Try
            Return Request.CreateResponse(HttpStatusCode.OK)
        Else
            Return Request.CreateResponse(HttpStatusCode.BadRequest)
        End If
End Function 
```

但是当执行时：**db.Entry(order).State = EntityState.Modified** 我有这个错误

发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:14:28.347

我认为这是解决方案

```
 Dim x = db.Orders.Include(Function(a) a.OrderDetails).Include(Function(o) o.OrderCustomer).FirstOrDefault
    db.Entry(x).CurrentValues.SetValues(order) 
```

谢谢你@Slauma，你的建议很有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:55:01.313

代表着

*   任何一个`order.CustomerID != order.OrderCustomer.CustomerID`
*   或`OrderDetail.OrderID != OrderDetail.OrderDetailOrder.OrderID`至少一个 OrderDetails
*   或`OrderDetail.ProductID != OrderDetail.OrderDetailProduct.ProductID`至少一个 OrderDetails

`order`在将 附加到上下文之前，您必须确保这些值相等。

# git - Git 将两个 git 存储库与历史记录合并

> ID：14923397
> 
> 赞同：1
> 
> 时间：2013-02-17T16:39:37.190
> 
> 标签：git

我有两个存储库：`project.git`它一直是我们项目的主存储库，然后我们启动了另一个名为的**空**git 存储库，`newproject.git`我们提取了可以从.`project.git``newproject.git`

我的问题是：**有没有办法合并`newproject.git`回`project.git`这样，历史/提交被附加在一起，就好像`newproject.git`从未退出一样。但是中的所有文件都`newproject.git`将替换中的内容`project.git`？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:06:10.540

您可以将 newproject.git 存储库作为另一个远程添加到 project.git。你有两个远程存储库：origin 和 newproject。

`git remote add newproject newproject.git`

或设置其他选项（如 -m）

`git help remote`

您可以从 origin/newproject 中提取

`git pull origin`

或者

`git pull newproject`

你只需要合并到你的原始主机并推送到原始（project.git）。

`git push origin master`

# select - 在选择动态中将 var js 发送到 django 视图

> ID：14923399
> 
> 赞同：0
> 
> 时间：2013-02-17T16:39:49.623
> 
> 标签：select, dynamic

我正在做选择依赖，在进行查询时遇到问题，这里是 js

```
function cargar_paises() {
$.getJSON('cargar_paises', {}, function (data) {
    $('#paises').empty();
    $('#paises').append('<option value="0">Seleccione ...</option>');
    $.each(data, function (id, desc) {
        var option = $('<option></option>', {value:(id+1), text:desc});
        $('#paises').append(option);
        });
    });
} 
```

和我的看法

```
def cargar_paises(request):
if request.is_ajax:

    pais = Pais.objects.all()
    paises = []

    for s in pais:
        aux = []
        id = s.pk
        aux.append(id)
        nombre = s.nombre
        aux.append(nombre)
        paises.append(aux)

    return HttpResponse(json.dumps(paises), mimetype='aplication/json') 
```

问题是当我打印select中的值并将id发送到另一个查询时，我取的值是select的索引而不是id_pais的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:44:05.137

尝试将 id 设置为：

```
var option = $('<option></option>', {value:(paises[0].aux.id+1), text:desc}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:56:05.500

您可以使用字典列表而不是列表列表更好地解决这个问题，即使使用 dJango `.values()`，但为了简单起见，您可以使用完全相同的方法，

```
function cargar_paises() {
$.getJSON('cargar_paises', {}, function (data) {
    $('#paises').empty();
    $('#paises').append('<option value="0">Seleccione ...</option>');
    $.each(data, function (item) {
        var option = $('<option></option>', {value:item.id, text:item.nombre});
        $('#paises').append(option);
        });
    });
} 
```

并且在视图中，

```
def cargar_paises(request):
    if request.is_ajax:

        pais = Pais.objects.all()
        paises = []

        for s in pais:
            aux = {}
            aux['id'] = s.pk
            aux['nombre'] = s.nombre
            paises.append(aux)

        return HttpResponse(json.dumps(paises), mimetype='aplication/json') 
```

请记住，您可以将 Python 字典映射到 Json 对象，并将 Python 列表映射到 Json 数组，另一个很好的提示是使用[django-dajaxice](http://www.dajaxproject.com/)它是一个非常好的工具来做你想做的事，无论如何从 dJango 中提取这种东西是好的.

**编辑**

我真的想了想，`.values()`在查询集中使用，你的视图，

```
def cargar_paises(request):
    if request.is_ajax:
        paises = Pais.objects.values('id', 'nombre')
        return HttpResponse(json.dumps(paises), mimetype='aplication/json') 
```

[你可以在这里](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)找到文档。

# java - HashMap的图片内容不会出现

> ID：14923400
> 
> 赞同：0
> 
> 时间：2013-02-17T16:39:56.863
> 
> 标签：java, android

所以我想出了这段代码

```
Map<Integer, Integer> images = new HashMap<Integer, Integer>();       
    images.put(1,R.drawable.a);     
    images.put(2,R.drawable.b);      
    images.put(3,R.drawable.c);

String[] abcd = {"a","b","c"};
    Integer count = 3;
    for(int inte = 0; inte==count;inte ++ ){
        if(strn.get(inte).equalsIgnoreCase(abcd[inte])){        
             image.setImageDrawable(getResources().getDrawable(images.get(inte)));          
        }
    } 
```

1.  使用整数键将图像从drawables放入hashmap
2.  我制作了一个数组 [] 来与用户输入进行比较，一个 for 循环来遍历 hashmap 的内容和
3.  如果条件为真，则显示图像。

这是我想要做的事情的洞察力，但是......现在我的问题是图像不会出现在我的代码之前。我认为我的问题有点类似于[遍历 hashtable](https://stackoverflow.com/questions/3871366/how-can-i-loop-thorugth-a-hashtable-keys-in-android)或[Can't See Contents](https://stackoverflow.com/questions/6036413/cant-see-the-contents-of-the-hashmap) and notice `Enumeration`，`Iterator`但无法将它们应用到我的代码中。有人可以指导我或任何建议都可以解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:50:15.337

改编自我[在这里](https://stackoverflow.com/questions/14914062/get-multiple-random-values-from-arraylist-hashmap/14914068#14914068)的回答：

改变

```
 for(int inte = 0; inte==count; inte++){
// start with inte beeing 0, execute while inte is 3 (count is 3)
// never true 
```

至

```
 for(int inte = 0; inte < count; inte++){
 // start with inte beeing 0, execute while inte is smaller than 3
 // true 3 times 
```

解释：

for 循环具有以下结构：

```
for (initialization; condition; update) 
```

`initialization`在循环开始之前执行一次。`condition`在循环的每次迭代之前检查并在每次迭代`update`之后执行。

你`initialization`是`int inte = 0;`（执行一次）。你的`condition`was `inte == count`，这是错误的，因为`inte`is`0`和`count`is `3`。所以条件是`false`，并且循环被跳过。

# c# - C# DNS.GetHostEntry() .. 网络编程新手

> ID：14923401
> 
> 赞同：0
> 
> 时间：2013-02-17T16:40:02.400
> 
> 标签：c#

我真的不熟悉 C#，自从我用这种语言编程已经好几年了。我将发布我拥有的代码，其中存在构建错误。这就是我想要做的，但我真的不知道如何进行。我碰壁了，真的不知道如何继续：

输入地址（作为字符串） 使用适当的函数解析地址 打印完整的主机信息

```
 using System;
using System.Collections.Generic;
using System.Text;
using System.Net;
using System.Net.Sockets;

namespace CSDNS
{
    class Program
    {
        static void PrintHostInfo(String host)
        {
            {
                IPHostEntry hostinfo;

                try
                {

                    hostinfo = Dns.GetHostEntry("www.sunybroome.edu"); // DNS Name Resolution

                    //
                    // The IP address is now in hostinfo structure
                    // Print out the contents of hostinfo structure
                    // in an easily readable form with labels. For
                    // example, the host name can be output using:

                    Console.WriteLine("Hostname = {0}\n", hostinfo.HostName);
                }

                catch
                {
                    // Print out the exception here...
                }

                try
                {
                    IPHostEntry hostInfo;

                    //Attempt to resolve DNS for given host or address
                    hostInfo = Dns.Resolve(host);

                    //Display the primary host name
                    Console.WriteLine("\tCanonical Name: " + hostInfo.HostName);

                    //Display list of IP addresses for this host
                    Console.Write("\tIP Addresses:  ");
                    foreach (IPAddress ipaddr in hostInfo.AddressList)
                    {
                        Console.Write(ipaddr.ToString() + " ");
                    }
                    Console.WriteLine();

                    //Display list of alias names for this host
                    Console.Write("\tAliases:       ");
                    foreach (String alias in hostInfo.Aliases)
                    {
                        Console.Write(alias + " ");
                    }
                    Console.WriteLine("\n");
                }
                catch (Exception)
                {
                    Console.WriteLine("\tUnable to resolve host: " + host + "\n");
                }
            }
        }

        static void Main(string[] args)
        {

            //Get and print local host info
            try
            {
                Console.WriteLine("Local Host:");
                String localHostName = Dns.GetHostName();
                Console.WriteLine("\tHost Name:      " + localHostName);

                PrintHostInfo(localHostName);
            }
            catch (Exception)
            {
                Console.WriteLine("Unable to resolve local host\n");
            }

            //Get and print info for hosts given on command line 
            foreach (String arg in args)
            {
                Console.WriteLine(arg + ":");
                PrintHostInfo(arg);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:32:24.193

您需要传入`host`该`Resolve`方法，而不是`hostInfo`（即包含您要解析的主机的字符串）：

```
hostInfo = Dns.Resolve(host); 
```

# c++ - MSVC 常量枚举类型

> ID：14923403
> 
> 赞同：5
> 
> 时间：2013-02-17T16:40:24.213
> 
> 标签：c++

```
const enum Alpha{
    X=9,
    Y=5,
    Z=2
}p;
int main(){
    enum Alpha a,b;
    a= X;
    b= Z;

    p = X;
    p = Y;

    printf("%d",a+b-p); 
    return 0; 
} 
```

为什么在 MSVC 编译器中允许 p = X 和 p = Y？此代码输出 6。不应该在初始化时分配一个 const 值，并且永远不要再分配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T16:48:16.210

这是编译器本身的一个错误。故事的结局。

实际上，您的小代码在编译器中显示了两个错误。第一个错误就在这里：

```
const enum Alpha{
    X=9,
    Y=5,
    Z=2
}p;    //declaration of p is ill-formed! 
```

的声明`p`格式不正确，因此编译器应拒绝此代码，因为`p`已声明`const`但未*初始化*。一个`const`标量（和 pod）类型必须被初始化才能形成良好的格式：

```
const Alpha q;      //ill-formed (same case is with p in your code)
const Alpha r = X;  //well-formed 
```

有关详细和广泛的解释，请参见：

*   [为什么 const 变量必须立即初始化？](https://stackoverflow.com/questions/8440381/why-do-const-variables-have-to-be-initialized-right-away)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:48:44.463

看起来确实是个bug。

首先，全局`const`对象必须在定义时进行初始化，*默认初始化*不是枚举类型的选项。根据 C++11 标准的第 8.5/6 段：

> 默认初始化 T 类型的对象意味着：
> 
> — 如果 T 是（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是非良构的）；
> 
> — 如果 T 是数组类型，则每个元素都是默认初始化的；
> 
> — 否则，不执行初始化。
> 
> **如果程序要求对 const 限定类型 T 的对象进行默认初始化，则 T 应是具有用户提供的默认构造函数的类类型**。

其次，`const`初始化后无法分配对象。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-17T16:58:47.127

编辑以匹配这是一个编译器错误的共识。

这是有效的，因为编译器错误地认为 p 是 type`Alpha`而不是`const Alpha`。如果您将其重写为

```
enum Alpha{....
} const p; 
```

编译器会正确地抱怨一个常量没有被初始化。

```
error C2734: 'p' : const object must be initialized if not extern
error C3892: 'p' : you cannot assign to a variable that is const 
```

如果分配常数，

```
enum Alpha{....
} const p = Y; 
```

并删除对 p 的分配，一切都按预期编译和工作。

# java - Facebook 活动图片的大小

> ID：14923405
> 
> 赞同：0
> 
> 时间：2013-02-17T16:40:47.330
> 
> 标签：java, android, facebook

我正在尝试使用适用于 Android 的 Facebook SDK 的请求来获取 facebook 事件的信息，但我得到了一个小图像。抓取过程如下：

```
params.putString("fields", "id,name,picture");
mAsyncRunner.request("me/events",params, new RequestListener() {..... 
```

但是 JPG 图像的链接非常小。有什么方法可以让这张图片有更好的分辨率吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:25:58.633

知道特定事件的 EVENT_ID 后，您可以将图形请求发送到“EVENT_ID/picture?type=SIZE”，其中 SIZE=small | 正常 | 大的。

# java - 为什么基于 Java TreeMap 的红黑树实现？

> ID：14923407
> 
> 赞同：13
> 
> 时间：2013-02-17T16:40:51.540
> 
> 标签：java, algorithm, binary-search-tree, avl-tree, red-black-tree

[维基百科关于 AVL 树的文章](http://en.wikipedia.org/wiki/AVL_tree)的第三段说：“因为 AVL 树更严格地平衡，所以对于查找密集型应用程序来说，它们比红黑树更快。”

那么，不应该使用 AVL 树而不是红黑树来实现[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)（因为对于基于散列的数据结构会有更多的查找密集型应用程序）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-17T16:43:18.923

红黑树更通用。它们在添加、删除和查找方面做得相对较好，但 AVL 树的查找速度更快，但添加/删除速度较慢。Java 的一般策略是提供最好的通用数据结构。这也是 Java 的默认 Array.sort(Object[] a) 实现是稳定的、自适应的、迭代合并排序而不是快速排序的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-20T23:13:39.937

从历史上看，旋转次数被认为非常重要，因此选择红黑树而不是 AVL，因为红黑树在随机插入时执行的旋转略少——每个插入的平均旋转为 0.6 对 0.7。

事后看来，AVL 树可能是更好的选择。您可以在此处查看 Java 中 AVL 和红黑树的性能比较： [https ://refactoringlightly.wordpress.com/2017/10/29/performance-of-avl-red-black-trees-in-java/](https://refactoringlightly.wordpress.com/2017/10/29/performance-of-avl-red-black-trees-in-java/)

对于随机插入，性能是相似的。使用顺序数据时，AVL 树的性能要好得多 - 30% 或更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:12:15.360

维基百科的文章是错误的（或者至少，没有支持引用来支持该声明）。确实，AVL 树的最坏情况高度（1.44 lg n）优于红黑 BST 的最坏情况高度（2 lg n），但这是最坏情况，可能没什么可做的具有真实世界的性能。

# html - 粘性页脚果园 CMS

> ID：14923414
> 
> 赞同：2
> 
> 时间：2013-02-17T16:42:04.717
> 
> 标签：html, css, orchardcms

我正在尝试应用粘性页脚，但在 Orchard 中实现此功能时遇到问题。

在以前的网站中，我成功应用了以下粘性页脚方法： [http ://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)

我只是无法在 Orchard 中使用粘性页脚，也找不到任何关于它的信息。

已经尝试删除所有现有的 CSS 以试图找出为什么它没有成功就无法工作。使用 firebug 检查 HTML 时也不会变得更明智。

使用的模板：基于自定义主题的主题机（结构方面未更改）。

**问题：**

区域填充`site.css`带来了这些奇怪的问题。但是我怎样才能保持这个填充，这样我就可以实现一个粘性页脚？

因为没有区域填充，所有区域的所有必要填充都消失了。

```
/* Zones */
.zone 
{
    padding: 10px;
} 
```

*还是有其他更适合 Orchard 的方法来实现粘性页脚？*

**旁注问题**

*@tag.StartElement 和 @tag.EndElement 的目的到底是什么？*

**CSS：（** 我的页脚高度正好是 40px）

```
html, body
{
  height: 100%;
}

#layout-wrapper { min-height: 100%; }

#layout-footer 
{
    position: relative;
    margin-top: -40px; /* negative value of footer height */
    clear:both;
    background-color: #030e27;
} 
```

**布局.cshmtl：**

```
@tag.StartElement
@if (Model.Header != null) 
{
    <header>
        <div id="layout-header" class="group">
            <div id="header">
                @Zone(Model.Header)
            </div>
        </div>
        <div id="layout-header-bottom"></div>
    </header>   

}

@if (Model.Navigation != null) 
{
    <div id="layout-navigation" class="group">
        <div id="navigation">
            @Zone(Model.Navigation)
        </div>
    </div>
}

@if (Model.Featured != null) {
<div id="layout-featured" class="group">
    @Zone(Model.Featured)
</div>
}
@if (Model.BeforeMain != null) {
<div id="layout-before-main" class="group">
    @Zone(Model.BeforeMain)
</div>
}

<div id="layout-main-container">
<div id="layout-main" class="group">
    @if (Model.AsideFirst != null) {
    <aside id="aside-first" class="aside-first group">
        @Zone(Model.AsideFirst)
    </aside>
    }
    <div id="layout-content" class="group">
        @if (Model.Messages != null) {
        <div id="messages">
            @Zone(Model.Messages)
        </div>
        }
        @if (Model.BeforeContent != null) {
        <div id="before-content">
            @Zone(Model.BeforeContent)
        </div>
        }
        @* the model content for the page is in the Content zone @ the default position (nothing, zero, zilch) *@
        @if (Model.Content != null) {
        <div id="content" class="group">
            @Zone(Model.Content)
        </div>
        }
        @if (Model.AfterContent != null) {
        <div id="after-content">
            @Zone(Model.AfterContent)
        </div>
        }
    </div>
    @if (Model.AsideSecond != null) {
    <aside id="aside-second" class="aside-second">
        @Zone(Model.AsideSecond)
    </aside>
    }
</div>
</div>

@if (Model.AfterMain != null) {
<div id="layout-after-main" class="group">
    @Zone(Model.AfterMain)
</div>
}
@if (Model.TripelFirst != null || Model.TripelSecond != null || Model.TripelThird != null) {
<div id="layout-tripel-container">
<div id="layout-tripel" class="group">@* as in beer *@
    @if (Model.TripelFirst != null) {
    <div id="tripel-first">
        @Zone(Model.TripelFirst)
    </div>
    }
    @if (Model.TripelSecond != null) {
    <div id="tripel-second">
        @Zone(Model.TripelSecond)
    </div>
    }
    @if (Model.TripelThird != null) {
    <div id="tripel-third">
        @Zone(Model.TripelThird)
    </div>
    }
</div>
</div>
}
@tag.EndElement
<div id="layout-footer" class="group">
    <footer id="footer">
        <div id="footer-quad" class="group">
            @if (Model.FooterQuadFirst != null) {
            <div id="footer-quad-first">
                @Zone(Model.FooterQuadFirst)
            </div>
            }
            @if (Model.FooterQuadSecond != null) {
            <div id="footer-quad-second">
                @Zone(Model.FooterQuadSecond)
            </div>
            }
            @if (Model.FooterQuadThird != null) {
            <div id="footer-quad-third">
                @Zone(Model.FooterQuadThird)
            </div>
            }
            @if (Model.FooterQuadFourth != null) {
            <div id="footer-quad-fourth">
                @Zone(Model.FooterQuadFourth)
            </div>
            }
        </div>
        @if(Model.Footer != null) {
        <div id="footer-sig" class="group">
            @Zone(Model.Footer)
        </div>
        }
    </footer>
</div> 
```

**更新**

Derk 的解决方案与删除以下 Orchard CSS 相结合似乎起到了作用：

```
/* Clearing Floats
***************************************************************/

.group:after 
{
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}

.zone:after, .widget-control:after /* .zone:after self clears every zone container - .widget-control:after self clears any floats used in a widget */
{
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

**更新 2**

而不是删除 clear floats css `changing content: "."`to`content: ""`似乎也具有相同的效果。

对此原因的解释将不胜感激，欢呼。

问候，泽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:03:38.807

**对于那个填充问题**，我鼓励你查看这个边界框方法。它将填充移动到 div 内部而不是外部。所以你不必在整个项目中计算填充和 div 宽度等。太有帮助了！

```
/* apply a natural box layout model to all elements */
* { 
    -moz-box-sizing: border-box; 
    -webkit-box-sizing: border-box; 
    box-sizing: border-box; 
} 
```

只需将它放在您的样式顶部！可能需要一些调整才能使网站恢复原状，但这将是值得的。

但现在：将其添加到您的 .zone 事物中：

```
.zone {
    -moz-box-sizing: border-box; 
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
    padding: 10px;
} 
```

您可以在此处阅读更多相关信息：[Paul Irish 谈论边界框](http://paulirish.com/2012/box-sizing-border-box-ftw/)

**对于页脚：**

看看这支笔：[加权页脚](http://codepen.io/sheriffderek/pen/DiewF)

您的代码中已经有 html 和 body - 但是您有某种包装器吗？

如果没有，您需要放入一个：

```
<div class="main-wrapper">

    <header></header>

    <section class="main-content"></section>

    <div class="footer-buffer">(BUFFER)</div>

</div> <!-- end .main-wrapper -->

<footer></footer> 
```

非常基本的结构在这里。所以检查它，或者类似的东西在你的主题上。

```
html, body {
  height: 100%;
}

.main-wrapper {
  min-height: 100%;
  height: auto !important; /* for IE 6 */
  height: 100%; /* for IE 6 */
  margin: 0 auto -4em;

  /* new addition */
  overflow: hidden;
}

footer, .footer-buffer {
  height: 4em;
} 
```

我会亲自把`width: 100%;`所有`float: left;`这些都放在上面......但你需要让它尽可能简单地找出问题所在。然后，您可能需要另一个 div，例如`.inner {max-width: 980px; margin: 0 auto;}`Inside each section 以使该标准列网站看起来。我会备份你的 CSS 文件并像你一样做更多的测试。

我希望这会有所帮助！我花了这么多小时和一天的时间来对抗那个粘页脚！

# javascript - 从 JavaScript 函数返回结果

> ID：14923419
> 
> 赞同：0
> 
> 时间：2013-02-17T16:43:11.383
> 
> 标签：javascript, function, kaltura

我对 JavaScript 相当陌生，希望有人能帮助我了解如何修改下面的函数，以便在调用时正确返回结果。该代码当前有效，并且一旦生成会话字符串，就会调用 handleResults 函数。我想做的是修改 generateSessionString 函数，以便它返回会话字符串而不是将其传递给 handleResults。任何人都可以就我如何做到这一点给我建议吗？

```
function generateSessionString(){
var cb = function (success, results){
        if(!success)
        alert(results);

        if(results.code && results.message){
        alert (results.message);
        return;
        }
        handleResults(results);

    };

    var config = new KalturaConfiguration(gPartnerID);
    config.serviceUrl = gServiceURL;
    var client = new KalturaClient(config);
    var partnerId = gPartnerID;
    var userId = gUserName;
    var password = gPassWord;
    var expiry = gExpiry;
    var privileges = gPrivileges;
    var result = client.user.login(cb, partnerId, userId, password, expiry, privileges);
    return result;
}

function handleResults(ks){
KalturaSessionString = ks;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T06:24:41.147

如果您喜欢以同步方式编写它（它仍然是异步代码），您可以尝试 promise（在此示例中我使用 jQuery）

```
 function generateSessionString(){
           var dfd = new jQuery.Deferred();
           var cb = function (success, results){
               if(!success)
                   dfd.fail(results);

               if(results.code && results.message){
                   dfd.fail (results.message);
                   return;
               }
               dfd.resolve(results);

           };

           var config = new KalturaConfiguration(gPartnerID);
           config.serviceUrl = gServiceURL;
           var client = new KalturaClient(config);
           var partnerId = gPartnerID;
           var userId = gUserName;
           var password = gPassWord;
           var expiry = gExpiry;
           var privileges = gPrivileges;
           client.user.login(cb, partnerId, userId, password, expiry, privileges);
           return dfd.promise();
       }

       $.when(generateSessionString()).then(
               function(session)
               {
                   alert(session);
               }
       ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T06:55:50.257

@Itay Kinnrot 的回答是对的。实际上，jQuery 的 on/trigger 是另一种解决方法，但 $.Deferred 更好。

如果您想了解更多信息，可以尝试了解 Pub/Sub 模式。推荐这篇文章：

[http://www.elijahmanor.com/2013/03/angry-birds-of-javascript-blue-bird.html](http://www.elijahmanor.com/2013/03/angry-birds-of-javascript-blue-bird.html)

# vba - 如何使用 vba 在 PowerPoint 中将 ActiveWindow.ViewType 更改为 ppViewThumbnails

> ID：14923421
> 
> 赞同：0
> 
> 时间：2013-02-17T16:43:24.387
> 
> 标签：vba, powerpoint, office-2007

```
ActiveWindow.ViewType = ppViewThumbnails 
```

上面的代码运行到以下错误消息：

```
"DocumentWindow (unknown member) : Invalid enumeration value." 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:01:10.007

您的问题非常简短……可以证明是一个给出公平答案的问题。但是，查看您的错误消息（感谢上帝，它就在那里）您可以检查以下内容：

> [当您尝试以编程方式查看 Microsoft PowerPoint 演示文稿的缩略图时，您可能会收到一条运行时错误消息。出现此问题的原因是 PowerPoint 并非旨在让您查看整个活动窗口中的缩略图。缩略图只能在幻灯片窗格左侧的缩略图窗格中查看。“症状”部分中描述的代码行尝试在整个活动窗口中显示缩略图。](http://support.microsoft.com/kb/278545)

上述知识库文章中给出了解决方法。如果您仍然卡住，请遵循并告诉我们：

> 要解决此问题，您需要测试以找出哪个窗格处于活动状态，然后激活缩略图窗格。

与其假设您的观点是`ppthumnails`，不如先尝试使用以下方法对其进行验证`IF`：

```
 With ActiveWindow
  If .ActivePane.ViewType <> ppViewThumbnails Then
        .Panes(1).Activate
        .ViewType = ppViewThumbnails
         CheckView = True
  Else
      CheckView = False
      End If
   End With 
```

# java - 通过反射确定类成员的类型

> ID：14923425
> 
> 赞同：1
> 
> 时间：2013-02-17T16:44:15.710
> 
> 标签：java, reflection, types, type-conversion

我使用以下代码来确定类成员类型，我已经看过所有的自省方法，但还没有完全弄清楚如何在我的代码中对字符串、BigDecimal、日期等类型执行此操作，您可以看到我检查了对于原始并调用处理它的方法。1\. 我想对字符串、BigDecimal、fieldTypeName、java.util.Date 等做同样的事情我应该怎么做？

1.  这种类型怎么称呼？

对于诸如 jobList 之类的泛型类型，我使用 genericType 处理程序...

```
Object newInstance = clsObj.getClass().newInstance();

                for (Field field : declaredFields) {

                    // Get member name & types

                    Class<?> fieldType = field.getType();
                    Type genericType = field.getGenericType();
                    String fieldTypeName = fieldType.getName();
                    String memberName = field.getName();

                    boolean primitive = field.getType().isPrimitive();
                    handlePrimtive(); 
```

> if (genericType instanceof ParameterizedType) {

这是课

```
@Entity
public class Person {
@Id
@GeneratedValue(strategy = GenerationType.TABLE)
private int id;
private String firstName;
private BigDecimal bigDecimal;
private java.util.Date myDate;
private List<Job> jobList = new ArrayList<Job>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:47:43.387

```
Class <?> type = field.getType ();
if (String.class.equals (type)) handleString ();
else if (Date.class.equals (type)) handleDate ();
... 
```

# git - bin 和 obj 目录不能忽略。也推不开

> ID：14923429
> 
> 赞同：2
> 
> 时间：2013-02-17T16:44:28.940
> 
> 标签：git

如果有人澄清为什么忽略

有时推动对我不起作用，我将不胜感激。

我对 git 有点陌生。

**这是提交屏幕**

![在此处输入图像描述](../Images/a705df99a5ec5692d2e973d3077c977e.png)

**这是 .ignorefile 内容**

```
*.obj
*.exe
*.pdb
*.user
*.aps
*.pch
*.vspscc
*_i.c
*_p.c
*.ncb
*.suo
*.tlb
*.tlh
*.bak
*.cache
*.ilk
*.log
[Bb]in
[Dd]ebug*/
[Rr]elease*/
_ReSharper*/
[Tt]est[Rr]esult*
***\bin**
***\obj**
*/bin/*
*/obj/* 
```

**推送问题，推送时卡住 git init bare 不能解决 **

![在此处输入图像描述](../Images/f0221b3a0af6b1a0ea81ad46c8f545d2.png)

![在此处输入图像描述](../Images/3be1081a4b24774cff40b4ead24ce417.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:09:00.147

如果您将文件提交到 git 存储库，则更改 .gitignore 不会忽略该文件。

如果您`git rm`使用 obj 和 bin 文件，并保持 .gitignore 文件原样`git commit`，git 将忽略这些文件。

# python - 如何在 Python 中动态分配泡菜名称？

> ID：14923431
> 
> 赞同：1
> 
> 时间：2013-02-17T16:44:46.450
> 
> 标签：python, pickle

我有一个循环，我想腌制所有输出。问题是我不能将我的变量分配为泡菜名称。我可能会用这个小例子说清楚：

```
lst = [a,d,e,g,h,j]
for i in lst:
    pickle.dump(i,open('xx.p','wb')) 
```

正如我之前所说，我想为`i`列表中的每个分配不同的名称。换句话说，我想将我的变量值分配为泡菜名称。（'ap' -> 第一个，'dp' -> 第二个，依此类推）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:48:38.990

如果您使用*两个*列表，一个用于您的对象，一个用于您想要命名的列表，您可以轻松地做到这一点：

```
lst = [a,d,e,g,h,j]
nm_lst = ['a', 'b', 'd', 'e', 'h', 'j']
for i,nm in zip(lst,nm_lst):
    pickle.dump(i,open('{0}.p'.format(nm),'wb')) 
```

或者您可以使用字典来执行此操作（如评论中所建议）

```
my_dict = {'a':a, 'b':b}
for key, val in my_dict.iteritems():
    pickle.dump(val,open('{0}.p'.format(key),'wb')) 
```

（如果您使用的是 python3，`iteritems`-> `items`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:54:49.510

您可以通过检查定义变量的环境来找到变量的名称。在这里，您有两个函数来探索这个想法，一个用于酸洗，一个用于解酸。

您需要将环境传递给酸洗函数以找出变量名称，创建一个将名称映射到变量的字典，并最终酸洗包含变量及其名称的字典。

`locals()`unpickling 函数将使用文件中的 unpickled 变量更新您传递给它的环境（通常）。

```
import pickle

def pickle_vars(fileName, env, *vs):
    d = dict([(x, env[x]) for v in vs for x in env if v is env[x]])
    with open(fileName, 'wb') as f:
        pickle.dump(d, f)

def unpickle_vars(fileName, env):
    with open(fileName, 'rb') as f:
        d = pickle.load(f)
        env.update(d)

def f():
    x = 10
    y = 20
    pickle_vars('vars', locals(), x, y)

f() 
unpickle_vars('vars', globals())
print x,y 
```

这是一个修改后的函数，用于在单独的文件中腌制每个变量，命名为带扩展名的变量`.p`：

```
def pickle_vars(fileName, env, *vs):
    d = [(x, env[x]) for v in vs for x in env if v is env[x]]
    for name, var in d:
        with open(name + '.p', 'wb') as f:
            pickle.dump(var, f) 
```

# c# - 哪种单例方法更好？

> ID：14923432
> 
> 赞同：0
> 
> 时间：2013-02-17T16:45:02.623
> 
> 标签：c#, design-patterns, singleton

我的程序使用命令行中传递的参数实例化一个对象。我需要能够使用这些参数实例化一个对象，但它应该只创建一次。我已经阅读了这些帖子[1](http://www.codeproject.com/Articles/4711/Incorporating-Parameterized-Construction-in-the-Si)和[2](https://stackoverflow.com/questions/4203634/singleton-with-parameters)，但我仍然不明白哪种方法更好：

```
1 - var myInstance = MyClass.Instance.Create("param1", "param2"); 
```

或者

```
2 - var myInstance = MyClass.Instance;
    myInstance.setParam1("param1");
    myInstance.setParam2("param2"); 
```

在第一种方法中，`Create`将为传递给的每对不同参数创建新实例。防止这种情况的唯一方法是在内部设置标志`Create`，该标志将返回创建的实例。

在第二种方法中，问题是如果构造函数`MyClass`将取决于`param1`and`param2`怎么办？

那么，你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:50:49.147

您也可以使用第一种方法：

```
MyClass.Instance.Create("param1", "param2") 
```

略有不同，这可能会使参数*不是*强制性的，如果需要，使用[Named Parameters](http://www.codeproject.com/Articles/73363/C-4-0-Named-And-Optional-Arguments)，比如：

```
MyClass.Instance.Create(param1 = "param1", param2 = "param2") 
```

因此，您可以完全避免使用参数（在调用期间）并使用声明中提供的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:04:24.270

ID：

*   `Config`使用带有参数的公共构造函数创建一个不可变类
*   创建一个`Config ParseCommandLine(string)`将命令行转换为`Config`对象的静态方法。

    由于这是一个纯函数（没有副作用，没有全局状态），因此很容易对其进行测试。

*   获取实际命令行并调用上述方法的静态方法`Config ParseCommandLine()`（有点难看，因为它访问全局可变状态）
*   最后用于`Config.SetInstance(ParseCommandLine())`支持`Instance`您的“单身人士”上的财产。这有点难看，但首先使用单例是难看的。

这个“单例”并没有真正强制要求只有一个配置，但它更像是一个默认实例。根据我的经验，很少需要真正的单例，即使是默认实例也是一种 hack。

你最终会得到这样的东西：

```
public class Config
{
    public string Param1{get;private set;}
    public int Param2(get;private set;}

    public Config(string param1, int param2)
    {
        Param1=param1;
        Param2=param2;
    }

    // take a string[] if you prefer to use Environment.GetCommandLineArgs
    public Config ParseCommandLine(string commandLine)
    {
        string param1=...;
        int param2=...;

        return new Config(param1:param1, param2:param2);
    }

    public Config ParseCommandLine()
    {
       return ParseCommandLine(Environment.CommandLine);
    }
} 
```

我还考虑将静态`Instance`属性扔掉，转而将配置注入需要它的对象。但是对于一个可能过度工程的小程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:34:13.370

在您的情况下，最好不要使用 Singleton。

单身人士的意图：

*   确保只创建一个类的一个实例。
*   提供对对象的全局访问点。

[http://www.oodesign.com/singleton-pattern.html](http://www.oodesign.com/singleton-pattern.html)

如果您需要确保只允许一个实例，请使用私有静态属性作为标志。

更新：

```
public class MyClass {

    private static boolean isAlreadyInitiated = false;

    public MyClass() {
        if(isAlreadyInitiated){
            throw new IllegalStateException("Only one instance allowed.");
        }
        isAlreadyInitiated = true;
    }
} 
```

# javascript - 在刚刚插入的 HTML 中找不到类 jQuery 的元素

> ID：14923441
> 
> 赞同：2
> 
> 时间：2013-02-17T16:46:18.637
> 
> 标签：javascript, jquery, backbone.js, underscore.js

```
render:function () {
    var self = this;
    $.ajax({url:'/db/list.json', dataType:'JSON'}).done(function (json) {
        var html = tmpl['video-list']({videos:json});
        self.$el.html(html);
    });

    console.log($('.video-thumb-box'));

    $.each($('.video-thumb-box'), function(){
        console.log(this);
        $(this).bind('mouseenter', function(){
            console.log($('.video-thumb-info', this));
        });
    });
} 
```

`tmpl['video-list']({videos:json})`是下划线模板并包含`DIV`s 中的项目列表这是示例返回

```
<div class="span3">
    <a href="#/video/123">
        <div class="video-thumb-box">
            <img class="video-thumb-img" src="test" alt="Video tumbnail">
            <div class="video-thumb-info hide">
                <img class="pull-right" width="16" height="16" src="/img/icons/namba.png">
                something
            </div>
        </div>
    </a>
</div>
<div class="span3">
    <a href="#/video/123">
        <div class="video-thumb-box">
            <img class="video-thumb-img" src="test" alt="Video tumbnail">
            <div class="video-thumb-info hide">
                <img class="pull-right" width="16" height="16" src="/img/icons/namba.png">
                something
            </div>
        </div>
    </a>
</div> 
```

为什么我找不到任何东西`$('.video-thumb-box')`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:49:16.900

你的每个循环都是向后的。

```
$('.video-thumb-box').each(function() {
    console.log(this);
    $(this).bind('mouseenter', function(){
        console.log($('.video-thumb-info', this));
    });
}); 
```

这是 jQuery `.each()` [API](http://api.jquery.com/each/)页面

# android - 如何使用 Android NDK 以正确的依赖顺序构建多个项目？

> ID：14923447
> 
> 赞同：5
> 
> 时间：2013-02-17T16:47:14.897
> 
> 标签：android, eclipse, android-ndk

我有一系列现有的库，需要在 Android 应用程序中重复使用。布局类似于：

> \Libraries\libOne
> \Libraries\libTwo [静态库]
> \Libraries\libThree
> \Applications\MyApplication\ [应用程序]

`libTwo`取决于`libOne`，`libThree`取决于`libTwo`。如何让构建系统以正确的顺序构建所有库？我正在尝试使用 Eclipse，但如有必要，我可以使用命令行。

所有这些库最终都会被 Java 应用程序引用（并使用 JNI 与它们交互）。关于如何设置 Android.mk / Application.mk 文件的任何线索？

我试过使用`BUILD_STATIC_LIBRARY`libTwo，但它实际上并没有输出任何文件！我期待一个`libTwo.a`文件，但没有任何东西被编译或构建。

我要在应用程序中编写一个 Android.mk 吗？还是每个项目的 Android.mk？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:59:05.087

*好的，现在我看到了您的编辑，这使得回答具体问题成为可能。*

如果您想使用 Android NDK 构建您的原生库，您的应用程序*必须*至少有一个文件。`Android.mk`不过，这不是一个要求。可以通过 Cmake，或带有“传统”makefile 的“独立工具链”，或使用 MS Visual Studio 插件，或任何其他方式来构建它。重要的是结果。结果是使用兼容编译器为仿生运行时构建的共享对象。

将库放在`${project_root}/libs/armeabi/`目录中（对于 ARM v6 兼容设备，x86、MIPS、arm v7a 的其他子目录）以允许 APK 构建器正确打包它，以允许应用程序安装程序解压正确的版本（与设备兼容）是很有意义的处理器）进入`/data/data/${package_name}/lib`设备上的目录，最后能够`System.loadLibrary(short_name)`从Java中使用它。但是也很有可能以`so`不同的方式打包文件，手动解包，然后从设备文件系统上的任何位置加载它（前提是您的应用程序有权写入和读取此文件）。

`${project_root}/jni`但是，如果我们过滤掉特殊情况，在目录中有一个 Android.mk 会更舒服。在`ndk-build`命令方面，每个库都是一个单独的 MODULE，但三个都可以定义在一个 Android.mk 文件中。另一方面，如果您的库是独立的（例如来自不同的第 3 方），您可能更愿意创建三个 Android.mk 文件。幸运的是，`ndk-build`它只是 gnu make 的一个包装器，并且`include`Android.mk 中的简单语句与任何其他 makefile 一样工作。

总之，您的案例可能包含在一个简单的`Applications/MyApplication/ [Application]/jni/Android.mk`文件中：

```
include ../../Libraries/libOne/Android.mk
include ../../Libraries/libTwo/Android.mk
include ../../Libraries/libThree/Android.mk 
```

我不知道你在 libOne 和 libTwo 之间有什么依赖关系，但是对于 libOne，文件`Libraries/libOne/Android.mk`看起来像

```
LOCAL_PATH = $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := libOne
LOCAL_SRC_FILES := first.c
include $(BUILD_STATIC_LIBRARY) 
```

和`Libraries/libThree/Android.mk`

```
LOCAL_PATH = $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := libThree
LOCAL_SRC_FILES := third.c
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../libOne $(LOCAL_PATH)/../libTwo
LOCAL_STATIC_LIBRARIES := libOne libTwo
include $(BUILD_SHARED_LIBRARY) 
```

您应该`ndk-build`从`Applications/MyApplication/ [Application]`目录运行 - 从命令提示符或通过 Eclipse ADT 插件。

**更新**同样可以用目录中的一个`Android.mk`文件来表示`jni`：

```
LOCAL_PATH = ../../Libraries/libOne
include $(CLEAR_VARS)
LOCAL_MODULE    := libOne
LOCAL_SRC_FILES := first.c
include $(BUILD_STATIC_LIBRARY)

LOCAL_PATH = ../../Libraries/libThree
include $(CLEAR_VARS)
LOCAL_MODULE    := libThree
LOCAL_SRC_FILES := third.c
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../libOne $(LOCAL_PATH)/../libTwo
LOCAL_STATIC_LIBRARIES := libOne libTwo
include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:10:53.437

项目的属性中有一个 android 部分，您可以在其中编辑库依赖项。只有在 libOne、libTwo 和 libThree 被标记为库时，才能在它们的属性面板中使用它。

# ruby - 如果重新创建文件，则自动重新打开文件以供读取

> ID：14923453
> 
> 赞同：-3
> 
> 时间：2013-02-17T16:47:49.847
> 
> 标签：ruby, file-io, tail

有一些（编译的而不是我的）程序**A**，当我启动它时，它每次都从头开始启动 .log 文件。我使用这种方法编写了程序**B**来处理这个日志：

```
File.open("qconsole.log") do |log|
    log.gets nil # I am interested only in new lines
    loop do
        next sleep 0.1 unless line = log.gets
        line.chomp!
        puts line
        # some code
    end
end 
```

例如，在 .log 文件中的两个新行之后，我看到以下输出：

```
 player1: i talk blabla
 player2: no way! 
```

但是当我退出并重新启动程序**A**时：

```
]\quit 
----- Server Shutdown -----
==== ShutdownGame ====
AAS shutdown.
---------------------------
----- CL_Shutdown -----
RE_Shutdown( 1 )
Shutting down OpenGL subsystem
...wglMakeCurrent( NULL, NULL ): success
...deleting GL context: success
...releasing DC: success
...destroying window
...shutting down QGL
...unloading OpenGL DLL
----------------------- 
```

此后，程序**B**似乎丢失了 .log 文件。它不再打印我的新行了。我想，它`nil`从`log.gets`.

那么我怎么知道我需要停止执行`log.gets`并重新打开 .log 文件呢？

升级版：Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:28:14.990

我目前的**肮脏**解决方案：

```
logfilesize = File.stat(logfile).size
log = File.open logfile
log.gets nil

loop do
    logfilesize = File.stat(logfile).size.tap{ |t|
        if t < logfilesize
            log.close
            log = File.open logfile
        end
    }
    next sleep 0.1 unless line = log.gets
    line.chomp!
    puts line
    # some code
end 
```

# java - stackoverflow 错误：在没有 % 或 / 运算符的情况下检查数字是偶数还是奇数

> ID：14923455
> 
> 赞同：2
> 
> 时间：2013-02-17T16:47:54.683
> 
> 标签：java

// 在没有 / 或 % 运算符的情况下检查数字是偶数还是奇数。

```
public class EvenOrOdd {

    public static int CheckEvenOrOdd(int num) {
        if (num > 2) {
            int number = num - 2;
            num = CheckEvenOrOdd(number);
        }
        return num;
    }

    public static void main(String[] args) {
        int num = CheckEvenOrOdd(5322221);
        if (num == 1) {
            System.out.println("Odd number");
        } else {
            System.out.println("Even number");
        }
    }

} 
```

我将堆栈大小定义为 200m 为 -xss200m 但如果数字大于 5322221，该程序会出现 OutOfMemory 错误和 StackOverflow 错误。

建议如何解决这个问题，找出数字是偶数还是奇数。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T16:53:21.963

您可以使用一个事实，即每个奇数在其二进制表示的末尾都有，`1`所以它看起来可以是 0 或 1。这是您可以使用二进制 AND 进行检查的方法 ->`???????1``?``&`

```
public static boolean isEven(int num) {
    return (num & 1) == 0;
} 
```

它是这样工作的：

对于奇数

```
 ????????1 -> any odd number
          000000001 -> one
AND       ---------
result    000000001 -> one 
```

对于偶数

```
 ????????0 -> any even number
          000000001 -> one
AND       ---------
result    000000000 -> zero 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T16:54:42.397

一两天前我问了一个类似的问题。看看这个帖子：[这个布尔返回是什么意思？](https://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean)

有效地，使用这个符号：

```
private static boolean isEven(int number)
{
    return (number & 1) == 0;
} 
```

& 是位运算符。可以在此处找到有关它们的更多信息：[按位运算符](http://www.roseindia.net/java/master-java/java-bitwise-and.shtml)

# javascript - 将孩子推送到“this”也会将其推送到孩子的孩子...（Javascript）

> ID：14923462
> 
> 赞同：0
> 
> 时间：2013-02-17T16:48:17.870
> 
> 标签：javascript, oop, closures, ecmascript-5

我在javascript中有一些实体/组件代码。大部分都完成了，但我遇到了这个非常奇怪的问题。我的实体有一个子数组，我在其中推送子元素，还有一些其他数组（componentsDictionary，将被重命名，别担心，它曾经是一个字典）用于它的组件。

现在，当我调用 this.childrens.push(obj) 时，它会在 this.childrens 和 obj.childrens 中推送对象......当我更新我的渲染树时导致我出现无限循环。

可能是 JS 中对闭包的真正奇怪处理的问题......

这是有问题的代码：

```
Entity.prototype = {
    childrens : [],
    componentsDictionary : [],
    sharedAttributes : {}, // This data is shared for all components
    debugName : "Entity Default Name",
    bubblee : null,

    Add : function(obj) {
        if (obj instanceof Entity) {
            alert(obj.debugName); // alerts "entity 0"
            alert(this.debugName); // alerts "root"

            alert(obj.childrens.length); // "alerts 0"
            this.childrens.push(obj);
            alert(obj.childrens.length); // "alerts 1"
            // how the f... !%!??!%11?
        }
        else if (obj instanceof IComponent) {
            this.componentsDictionary[obj.type].push(obj);
        }
        else {
            throw new Exceptions.IllegalAction("Attempted to add something else than an entity or a component to an entity.");
        }
    }, 
```

非常感谢！

网卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:53:47.170

因为您已将“childrens”数组放在原型对象上，所以它由“Entity”的每个实例共享。换句话说，只有一个数组。

如果您希望每个实例有一个单独的数组，请将其从原型中删除并添加

```
this.childrens = []; 
```

到“实体”构造函数。

# javascript - 执行函数与代码时的 Javascript 不同行为

> ID：14923463
> 
> 赞同：2
> 
> 时间：2013-02-17T16:48:21.030
> 
> 标签：javascript

我正在编写一个小型控制面板系统，其中一部分涉及到一些多窗口管理。我写了一个很好的课程，一切都很好，除非我试图关闭它。例如，我有这个功能：

```
var topwin = "something";
function closeTop() {
    for (var i = 0; i < links.length; i++) {
        if (links[i].fetch == topwin) {
            links[i].close();
            break;
        }
    }
} 
```

当我通过将函数粘贴到控制台来定义函数时，它可以正常工作并且行为正确。但是，只是与其他所有内容一起包含在 window.js 中，它不起作用：它行为不端并关闭所有窗口。伊达斯？

**编辑**：更多代码

```
this.close = function () {
    $("a[href='"+this.fetch+"']", "#windowlist").css({height: "0px", padding: '0px 20px', margin:'0px'});
    var me = this.me;
    var fetch = this.fetch;
        setTimeout(function() {
            me.remove();
            $("a[href='"+this.fetch+"']", "#windowlist").remove();
            deleteme = fetch;
            sendtotop(links[0].fetch);
            update();
        }, 300);
} 
```

-

```
function update () {
    thread = "";
    for (var i = 0; i < links.length; i++) {
        if (deleteme==links[i].fetch) {
            links.splice(i, 1);
            deleteme = null;
            i--;
            continue;
        }
        thread += '<li><a href="'+ links[i].fetch +'">'+ links[i].name +'<span>x</span></a></li>';
    }
    $("#windowlist").html(thread);
} 
```

# python - 如何返回属性的默认值？

> ID：14923465
> 
> 赞同：52
> 
> 时间：2013-02-17T16:48:25.707
> 
> 标签：python, reflection, attributes, default, void

我有一个对象`myobject`，它可能会返回`None`。如果它返回`None`，它不会返回一个属性`id`：

```
a = myobject.id 
```

因此，当 myobject 为 时`None`，上面的语句会导致`AttributeError`：

```
AttributeError: 'NoneType' object has no attribute 'id' 
```

如果`myobject`是无，那么我想`a`等于`None`。如何在一行语句中避免此异常，例如：

```
a = default(myobject.id, None) 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-02-17T16:52:59.650

您应该使用[`getattr`](http://docs.python.org/2/library/functions.html#getattr)包装器而不是直接检索`id`.

```
a = getattr(myobject, 'id', None) 
```

这就像说“我想`id`从对象中检索属性，但如果对象内部`myobject`没有属性，则改为返回。” 但它有效地做到了。`id``myobject``None`

一些对象还支持以下形式的`getattr`访问：

```
a = myobject.getattr('id', None) 
```

根据 OP 请求，['deep getattr'](http://pingfive.typepad.com/blog/2010/04/deep-getattr-python-function.html)：

```
def deepgetattr(obj, attr):
    """Recurses through an attribute chain to get the ultimate value."""
    return reduce(getattr, attr.split('.'), obj)
# usage: 
print deepgetattr(universe, 'galaxy.solarsystem.planet.name') 
```

简单解释：

[Reduce](http://docs.python.org/2/library/functions.html#reduce)就像一个就地递归函数。在这种情况下，它的作用是从`obj`(universe) 开始，然后递归地为您尝试访问 using 的每个属性深入了解`getattr`，所以在您的问题中，它会是这样的：

`a = getattr(getattr(myobject, 'id', None), 'number', None)`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-17T16:49:44.263

最简单的方法是使用三元运算符：

```
a = myobject.id if myobject is not None else None 
```

如果中间值为真，则三元运算符返回第一个表达式，否则返回后一个表达式。

请注意，您也可以使用异常以另一种方式执行此操作：

```
try:
    a = myobject.id
except AttributeError:
    a = None 
```

这符合 Pythonic 的理想，即请求宽恕比请求许可更容易——什么是最好的取决于具体情况。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-17T16:57:12.743

在我的对象类中，您可以覆盖

```
class Foo(object):
   def __getattribute__(self, name):
      if not name in self;
        return None;
      else:
        # Default behaviour
        return object.__getattribute__(self, name) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-30T18:38:37.113

如果您想解决类定义中的问题`myobject`（如[Black Diamond 的答案](https://stackoverflow.com/a/14923560/918015)），您可以简单地定义`__getattr__`为 return `None`：

```
class Myobject:
    def __getattr__(self, name):
        return None 
```

这是有效的，因为`__getattr__`仅在尝试访问不存在的属性时才调用，而`__getattribute__`无论属性的名称如何，总是首先调用。（另请参阅[此 SO 帖子](https://stackoverflow.com/a/2405617/918015)。）

尝试：

```
myobject = Myobject()
print myobject.id 
myobject.id = 7
print myobject.id 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-17T16:55:21.820

> 关于内置模块内置函数 getattr 的帮助：
> 
> ```
> getattr(...)
>     getattr(object, name[, default]) -> value 
> ```
> 
> 从对象中获取命名属性；getattr(x, 'y') 等价于 xy 给定默认参数时，当属性不存在时返回；没有它，在这种情况下会引发异常。

以下应该工作：

```
a = getattr(myobject, 'id', None) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-17T16:51:17.943

```
try:
    a = myobject.id
except AttributeError:
    a = None 
```

也可以工作并且更清晰，IMO

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-17T16:53:54.403

```
a=myobect.id if myobject else None 
```

# common-lisp - Common Lisp：将多个值连接成向量

> ID：14923467
> 
> 赞同：4
> 
> 时间：2013-02-17T16:48:28.317
> 
> 标签：common-lisp

我需要一个将多个值连接成（简单）向量的函数，类似于`(concatenate )`. 但是，与连接不同，它应该能够处理不是向量或序列的参数。

即它应该像这样工作：

```
(concat #(1 2) 3) => #(1 2 3)
(concat 1 2 3) => #(1 2 3)
(concat 1 #(2 3 4)) => #(1 2 3 4)
(concat #(1 2) 2 #(3 4 5)) => #(1 2 3 4 5) 
```

我怎样才能做到这一点？我想我已经忘记了一些使它成为可能的微不足道的 lisp 结构。

据我所知，连接不能做到这一点。而且我不太确定如何将它与宏一起使用（有`,@`将列表插入结果lisp形式的构造，但我不太确定在这种情况下如何区分非序列和序列）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T18:14:13.293

`reduce`另一个答复中的方法是时间**二次方**。

这是一个**线性**解决方案：

```
(defun my-concatenate (type &rest args)
  (apply #'concatenate type
         (mapcar (lambda (a) (if (typep a 'sequence) a (list a)))
                 args))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T19:16:00.000

由于我们可以计算序列的长度，我们可以分配结果序列，然后将元素复制到其中。

```
(defun concat (type &rest items)
  (let* ((len (loop for e in items
                    if (typep e 'sequence)
                    sum (length e)
                    else sum 1))
         (seq (make-sequence type len)))
    (loop with pos = 0
          for e in items
          if (typep e 'sequence)
          do (progn
               (setf (subseq seq pos) e)
               (incf pos (length e)))
          else
          do (progn
               (setf (elt seq pos) e)
               (incf pos)))
    seq))

CL-USER 17 > (concat 'string "abc" #\1 "def" #\2)
"abc1def2" 
```

以上适用于向量。列表版本留作练习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T17:42:32.123

```
defun my-concatenate (type &rest vectors)
  (reduce (lambda (a b)
            (concatenate
             type 
             (if (typep a 'sequence) a (list a))
             (if (typep b 'sequence) b (list b))))
          vectors)) 
```

你可以对你的论点[`reduce`](http://www.cs.cmu.edu/Groups/AI/html/cltl/clm/node143.html)进行一点修改。`#'concatenate`如果其中一个参数不是序列，只需将其转换为列表（即使使用简单向量和列表的混合参数，连接也有效）。

```
CL-USER> (my-concatenate 'list #(1 2 3) 3 #(3 5))
   (1 2 3 3 3 5)

CL-USER> (my-concatenate 'simple-vector #(1 2 3) 3 #(3 5))
   #(1 2 3 3 3 5)

CL-USER> (my-concatenate 'simple-vector 1 #(2 3) (list 4 5))
   #(1 2 3 4 5) 
```

**编辑：**好吧，您可能应该接受其他答案。

# psql - Postgres 没有查看正确的 pg_hba.conf 文件？

> ID：14923468
> 
> 赞同：0
> 
> 时间：2013-02-17T16:48:43.247
> 
> 标签：psql

我最近卸载了 postgres（不确定我是否做得正确。我使用自制软件卸载它并手动删除了`locate psql`终端中显示的任何内容。然后我安装了 postgres.app 并尝试运行它。但是它提示输入密码（即我不记得或什至不知道存在与否）即使我去了我找到的 pg_hba.conf 文件

```
Edmunds-MacBook-Pro:~ edmundmai$ locate pg_hba
/usr/share/postgresql/pg_hba.conf 
```

并将其更改为信任一切：

```
# TYPE  DATABASE        USER            CIDR-ADDRESS            METHOD

local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust 
```

我错过了什么吗？我无法让 psql 运行，因为它提示输入密码。如果可以修复它，我愿意卸载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-27T11:51:00.087

尝试重新启动服务器。仅编辑 pg_hba.conf 本身是不够的。

在带有 postgres 9.1 的 Ubuntu 上，以下内容对我有用

```
sudo /etc/init.d/postgresql restart 
```

有关更多信息[，请参阅 Ubuntu 帮助页面上的文档](https://help.ubuntu.com/community/PostgreSQL)

# vb.net - 动态更改文本框值？

> ID：14923471
> 
> 赞同：0
> 
> 时间：2013-02-17T16:48:51.103
> 
> 标签：vb.net, variables, dynamic

我有 7 个名为 lblSun、lblMon 等的文本框和 7 个名为 cmdSun、cmdMon 等的按钮。我想从查询中更改这些文本框和按钮的文本值。我试过`Me.Controls("cmd" & daysOfWeek(i)).Text`了，但它不起作用。

错误是对象引用未设置为对象的实例。

这是我的代码：

```
Public Sub loadSchedule()
    ' days of week
    Dim daysOfWeek(0 To 6) As String
    Dim i As Integer
    Dim var As String
    Dim ctrl As Control
    ' set up the days of the week
    daysOfWeek(0) = "Sun"
    daysOfWeek(1) = "Mon"
    daysOfWeek(2) = "Tue"
    daysOfWeek(3) = "Wed"
    daysOfWeek(4) = "Thu"
    daysOfWeek(5) = "Fri"
    daysOfWeek(6) = "Sat"
    ' connect to the db
    Dim con As OleDb.OleDbConnection = New OleDb.OleDbConnection(Form1.conString)
    con.Open()
    ' query stuff
    Dim query As String
    Dim cmd As New OleDb.OleDbCommand
    Dim rs As OleDb.OleDbDataReader
    ' loop
    For i = LBound(daysOfWeek) To UBound(daysOfWeek)
        ' set query
        query = "SELECT * FROM Schedule WHERE Employee=" & employee & " AND ScheduleDay='" & daysOfWeek(i) & "'"
        cmd = New OleDb.OleDbCommand(query, con)
        rs = cmd.ExecuteReader()
        ' var
        var = "cmd" & daysOfWeek(i)
        ' any results?
        If rs.HasRows = True Then
            ' get it
            rs.Read()
            ' show it baby
            'Controls("lbl" & daysOfWeek(i)).Text = rs.Item("TimeIn") & " - " & rs.Item("TimeOut")
            Me.Controls("cmd" & daysOfWeek(i) & "").Text = "Edit"
        Else
            ' show it baby
            Controls("lbl" & daysOfWeek(i)).Text = "RDO"
            Controls("cmd" & daysOfWeek(i)).Text = "New"
        End If
    Next
    ' close db
    con.Close()
End Sub 
```

谁能帮我？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:00:45.867

您正在尝试访问`Me.Controls`不存在的控件，因为按钮/文本框位于表格内。

你应该使用：

```
table.Controls("cmd" & daysOfWeek(i)).Text = "Edit" 
```

# java - 创建标记接口并序列化对象

> ID：14923473
> 
> 赞同：0
> 
> 时间：2013-02-17T16:49:02.073
> 
> 标签：java, marker-interfaces

我已经看到了像`serializable`decompiler 这样的标记接口以及像`objectInputStream`and类这样的类`objectOutputStream`。我的问题是我们可以创建自己的标记界面吗？

如果是，那么我想做一些特别的事情说我也想序列化对象相同的序列化机制，但通过我的接口。

我交叉检查的是，`objectOutputStream`他们正在检查以下运算符的实例`writeobject()`

```
 else if ((paramObject instanceof Serializable)) {
        writeOrdinaryObject(paramObject, localObjectStreamClass, paramBoolean);
 } 
```

请告诉我如何制作标记接口以及如何创建自己的类来实现我的标记接口并进行特殊的序列化处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:53:44.470

标记接口只是一个没有任何方法的普通接口：

```
public interface MyMarkerInterface {
} 
```

您可以像任何其他接口一样实现它：

```
public class MyClass implements MyMarkerInterface {
    ...
} 
```

也就是说，这不会改变此类实例的序列化方式。序列化机制不关心您的标记接口。它只检查对象是否可序列化（通过检查其类是否实现`java.io.Serializable`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:53:32.717

标记接口是没有定义任何方法或常量的任何接口，因此实现接口的唯一原因是以某种方式“标记”类。这样的接口可以像这样定义和使用：

```
// MyMarker.java
public interface MyMarker { /* just a marker */ }

// MyClass.java
public class MyClass implements MyMarker { ... } 
```

不过，这与序列化无关。

如果您需要对序列化进行自定义处理，您可以[按照 ObjectOutputStream 中的说明](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)在您的类中实现`readObject`和：`writeObject`

> 在序列化和反序列化过程中需要特殊处理的类必须实现具有这些确切签名的特殊方法：
> 
> ```
> private void readObject(java.io.ObjectInputStream stream)
>    throws IOException, ClassNotFoundException;
> private void writeObject(java.io.ObjectOutputStream stream)
>    throws IOException
> private void readObjectNoData()
>    throws ObjectStreamException; 
> ```
> 
> writeObject 方法负责为其特定类写入对象的状态，以便相应的 readObject 方法可以恢复它。该方法不需要关注属于对象的超类或子类的状态。通过使用 writeObject 方法或使用 DataOutput 支持的原始数据类型的方法将各个字段写入 ObjectOutputStream 来保存状态。

# android - 关于如何在向下滚动时将项目添加到列表视图的任何教程，同时显示进度项目？

> ID：14923474
> 
> 赞同：1
> 
> 时间：2013-02-17T16:49:04.410
> 
> 标签：android, listview

我有一个列表视图，其数据来自互联网。数据是一个列表，一个很长的列表，所以我想显示第一个，比如 10 个结果。如果用户向下滚动，我希望在底部出现一个进度条，同时我向服务器请求接下来的 10 个结果，然后删除进度条并添加新的 10 个项目。

我在 facebook 应用程序中看到了这种行为，你能给我指一个教程来做类似的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T17:05:11.527

首先，这是一个永无止境的 ListView 的教程： [Android 教程：动态加载更多项目到 ListView（永无止境的列表！）](http://mobile.dzone.com/news/android-tutorial-dynamicaly)

我在我的应用程序中使用了它，它完美无缺。

其次，本教程将教你如何从互联网上抓取数据并将其显示在 ListView 中：[Android Custom ListView with Image and Text](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

将两者结合在一起，你就得到了你需要的东西【前提是你有 Android 编程的基本知识。祝你好运 ;）]

# twitter-bootstrap - RTL 支持最新的 twitter-bootstrap 版本

> ID：14923479
> 
> 赞同：0
> 
> 时间：2013-02-17T16:49:50.860
> 
> 标签：twitter-bootstrap

有人知道这样的支持吗？我找到了 2 个包，但不是最新的引导程序版本。

这样的包存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:43:43.217

你可以让自己从右到左，

1.  首先将所有`left`内容更改为类似`stackoverflow`
2.  然后`right`改为`left`
3.  更改`stackoverflow`为`right`
4.  现在找到`margin:`and `padding:`，如果喜欢`margin:0 1px 0 5px`更改为`margin:0 5px 0 1px`

Java代码可能需要更改，我不知道

*   替换：ctr+H
*   查找：ctr+F
*   然后下一个发现：F3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T19:47:30.753

v3.0.0 和 v2.3.2 版本都完全转换为 RTL：[https ://github.com/MohammadYounes/RTL-bootstrap](https://github.com/MohammadYounes/RTL-bootstrap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T03:10:44.720

看一下这个 ..

[Twitter Bootstrap 3.0 RTL 支持](http://www.eyadio.com/post/2013/08/29/Twitter-Boostrap-version-3-with-RTL-support)

我测试了它，到目前为止它的工作原理..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T08:09:43.707

看看这个：[http ://rbootstrap.ir/](http://rbootstrap.ir/)

它是引导程序的 RTL 版本。

# svn - 如何将 Head 的未提交更改移动到分支，然后将 Head 重置为 SVN 中的原始状态？

> ID：14923485
> 
> 赞同：0
> 
> 时间：2013-02-17T16:50:28.273
> 
> 标签：svn

我创建了一个大型 OS 项目的本地副本。我只是涉足，所以我没有打扰分支。无论如何，我最终对源代码进行了一些更改并为其创建了一个扩展。现在我没有在我的本地提交任何东西（所以它在 Head 有修改）。我意识到我想将我的更改移动到一个分支，然后将 HEAD 重置为原始版本或来自其服务器的项目的当前状态。

如何将位于未提交阶段的 Head 的所有更改移动到分支以进行进一步修改？然后我想将 Head 重置为 premodif 状态或服务器的当前状态。一旦全部移动到位，我将针对项目中的当前 Head 创建一个适当的补丁。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:56:35.397

据我所知，svn 不是分布式系统，所以没有本地 HEAD 和远程 HEAD 的概念。相反，有一个规范的 HEAD，在 svn 用语中称为树干。

至于您的问题，您通过带有两个远程 URL的[复制命令](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html)创建了一个 svn 分支。然后事情会如你所愿地进行。

1.  复制我的工作复制我的工作复制备份
2.  从远程签出新版本
3.  使 myWorkingCopy 成为新分支的实例
4.  将 myWorkingCopyBackup 复制到 myWorkingCopy，替换除 .svn 目录之外的所有内容
5.  报到

您现在应该是黄金，您的更改已检查到您的新分支和原始树干

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:03:27.593

1.  选择“创建分支”
    *   作为分支源使用“HEAD”，“非工作副本”
    *   启用“切换到分支”复选框（在对话框底部）
2.  创建分支

现在您有了从主干创建的分支的工作副本，并且您的更改已准备好提交到该分支。没有修改后备箱。

# c# - LINQ 设计时编译错误

> ID：14923491
> 
> 赞同：1
> 
> 时间：2013-02-17T16:51:06.533
> 
> 标签：c#, linq-to-sql, entity-framework-4.3

有人可以告诉我以下查询的正确语法是什么吗？

我在以下位置从“equals”关键字开始出现设计时编译错误：

```
&& a.applicationid equals ga.applicationid 
```

出现以下错误：“查询正文必须以 select 子句或 group 子句结尾”

我理解错误的含义，但我看不到语法错误是什么......

```
public static List<ApplicationConfigurations> GetAppConfigs()
        {
            try
            {
                using (wmswebEntities DbContext = new wmswebEntities())
                {
                     IEnumerable<ApplicationConfigurations> myAppConfigs = new IEnumerable<ApplicationConfigurations>();

                     myAppConfigs = (from a in DbContext.ApplicationConfigurations
                                     join ga in DbContext.groupapplicationconfigurationslk on a.configurationid equals ga.configurationid
                                     && a.applicationid equals ga.applicationid
                                     join g in DbContext.Groups on g.groupnumber equals ga.groupnumber
                                     where a.ActiveFlag == true
                                        && ga.ActiveFlag == true
                                        && g.ActiveFlag == true
                                    select
                                        a.applicationconfigurations,
                                        g.groupnumber).ToList();

                    return myAppConfigs;
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:46:15.817

[这个问题](https://stackoverflow.com/questions/373541/how-to-do-joins-in-linq-on-multiple-fields-in-single-join)的答案很好地解释了为什么不能加入 LINQ 中的两个字段。它还建议您可以使用匿名类型进行连接，或者您可以简单地将其中一个条件移动到`where`子句中。他是我放在 LINQPad 中的一个快速示例，用于说明将 a`join`用于其中一个条件，将 a`where`用于另一个条件，以及`join`与匿名类型一起使用。

```
var applicationConfigs = new[] {
    new { ApplicationID = 1, ConfigurationID = 1, Name = "Application #1" },
    new { ApplicationID = 2, ConfigurationID = 1, Name = "Application #2" },
    new { ApplicationID = 3, ConfigurationID = 2, Name = "Application #3" },
    new { ApplicationID = 4, ConfigurationID = 2, Name = "Application #4" }
};
var groupApplicationConfigs = new[] {
    new { ApplicationID = 1, ConfigurationID = 1, Name = "Group App Config #1" },
    new { ApplicationID = 1, ConfigurationID = 1, Name = "Group App Config #2" },
    new { ApplicationID = 2, ConfigurationID = 1, Name = "Group App Config #3" },
    new { ApplicationID = 3, ConfigurationID = 1, Name = "Group App Config #4" }
};

//JOIN + WHERE
var q = from a in applicationConfigs
        join ga in groupApplicationConfigs 
            on a.ApplicationID equals ga.ApplicationID 
        where a.ConfigurationID == ga.ConfigurationID
        select a;
Console.WriteLine(q);

//ANONYMOUS TYPE
var r = from a in applicationConfigs
        join ga in groupApplicationConfigs 
            on new { a.ApplicationID, a.ConfigurationID } equals 
               new { ga.ApplicationID, ga.ConfigurationID }
        select a;
Console.WriteLine(r); 
```

# perl - Perl 类变量

> ID：14923496
> 
> 赞同：1
> 
> 时间：2013-02-17T16:51:33.843
> 
> 标签：perl

我似乎无法创建一个对该类全局且可用于该类的所有子例程的变量。

我看到了所有明显有效的例子，但我无法得到任何我做的工作。

代码：

```
my $test = new Player(8470598);

package Player;

use strict;
use warnings;
use Const::Fast;

$Player::URL = 'asdfasdasURL';
my $test3 = '33333333';
our $test4 = '44444444444';
const $Player::test0 => 'asdfasdas000';
const my $test1 => 'asdfasdas111';
const our $test2 => 'asdfasdas222';

sub new{
    print $Player::URL;
    print $Player::test0;
    print $test1;
    print $test2;
    print $test3;
    print $test4;
    return(bless({}, shift));
} 
```

输出：

```
Use of uninitialized value $Player::URL in print at D:\Text\Programming\Hockey\test.pl line 19.
Use of uninitialized value $Player::test0 in print at D:\Text\Programming\Hockey\test.pl line 20.
Use of uninitialized value $test1 in print at D:\Text\Programming\Hockey\test.pl line 21.
Use of uninitialized value $Player::test2 in print at D:\Text\Programming\Hockey\test.pl line 22.
Use of uninitialized value $test3 in print at D:\Text\Programming\Hockey\test.pl line 23.
Use of uninitialized value $Player::test4 in print at D:\Text\Programming\Hockey\test.pl line 24. 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T16:58:47.907

虽然整个代码将在执行之前编译，但可执行部分按顺序发生。特别是，您的 new() 调用发生在 Player 包中的任何分配或 const 调用之前。

将所有 Player 代码移动到 Player.pm 文件并调用它`use Player;`会导致它在 new 之前立即编译和执行，并按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:35:53.767

包级代码

```
my $test = new Player(8470598); 
```

在包级代码之前执行

```
$Player::URL = 'asdfasdasURL';
my $test3 = '33333333';
our $test4 = '44444444444';
const $Player::test0 => 'asdfasdas000';
const my $test1 => 'asdfasdas111';
const our $test2 => 'asdfasdas222'; 
```

因为它在文件中较早。

如果你想内联一个包，改变

```
use Player; 
```

至

```
BEGIN {
    package Player;

    ...

    $INC{"Player.pm"} = 1;
}

use Player;
my $test = Player->new(8470598); 
```

你有时可以偷工减料。在这种情况下，您可以同时剪切：

*   `BEGIN`不需要。
*   `$INC{"Player.pm"} = 1;`可以通过丢弃来丢弃`use Player;`。

# jquery - 显示 id 值

> ID：14923499
> 
> 赞同：1
> 
> 时间：2013-02-17T16:51:53.230
> 
> 标签：jquery, html

有人可以帮帮我吗，我正在尝试显示这些 id 所链接的值。这是我的 html 的一部分

```
<body>
<div id='what'></div>
<div id='when'></div>
<div id='where'></div>
</div>
</body> 
```

这是我的 j 查询

```
var details = {what:'fun and games',
               when:'Thursday',
               where:'Jeffs House'} 
```

所以基本上我希望显示这里的值^^。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:54:08.173

好吧，您可以遍历该对象的属性并设置相应的值：

```
var performance = {
    what: 'fun and games',
    when: 'Thursday',
    where: 'Jeffs House'
};

for (var key in performance) {
    if (performance.hasOwnProperty(key)) {
        $('#' + key).html(performance[key]);
    }
} 
```

这是一个[`live demo`](http://jsfiddle.net/hV5H4/).

# php - php 为什么发布后变量会丢失其值？

> ID：14923500
> 
> 赞同：-2
> 
> 时间：2013-02-17T16:52:00.643
> 
> 标签：php, variables, post, get

我遇到了变量问题。

页面加载后，我设置一个变量来存储“GET”值，如下所示：

```
$currentItemID = htmlspecialchars($_GET["id"]); 
```

这都很好。

然后我将 $currentItemID 的值加载到表单中，以便用户可以更新这些值。

一切都还好。

但是一旦用户提交表单，$currentItemID 的值就会丢失。

这意味着当我尝试更新 id = $currentItemID 的数据库时，它不知道要更新什么，因为 id 已丢失。更奇怪的是 sql 实际上是使用 ID 值执行的。

代码的精简版本如下：

```
<?php
//set current item ID
$currentItemID = htmlspecialchars($_GET["id"]);
echo"at start = $currentItemID";

// Setup defaults.
$error  = 0; //input errors
$up_error = 0; //title and description error counter - used to only show error message once.
$clean = array();
$clean_name = "";
$clean_description = "";
$clean_price = "";
$clean_pic = "";
$clean_status = "";
$clean_quantity = "";

//if all input is valid then...
if (isset($_POST['add'])) 
{
echo"inside post = $currentItemID";
    //clear error message
    $errmsg = '';

    // validate 'name': must consist of alphanumeric characters only.
    $_POST['name'] = isset($_POST['name']) ? $_POST['name'] : '';
    if(preg_match('/^[a-z\d\w\s+,._-]{1,20}$/i',$_POST['name']))
        {$clean_name = $_POST['name'];}
    else
        {$error++;$errmsg .= 'Invalid name. ';}

    //validate 'description': must consist of alphabet characters, numbers white space character or , . _ and -
    $_POST['description'] = isset($_POST['description']) ? $_POST['description'] : '';
    //thought i'ld add another ten characters to allow a bit more text.
    if(preg_match('/^[a-z\d\w\s,.]{1,90}$/i',$_POST['description'])) 
        {$clean_description = $_POST['description'];} 
    else{$error++; $errmsg .= 'Invalid description. ';}

    // validate 'price': must be number - with or without 2 decimal places.
    $_POST['price'] = isset($_POST['price']) ? $_POST['price'] : '';
    if(preg_match('/^\d+(\.\d{2})?$/',$_POST['price']))
        {$clean_price = $_POST['price'];}
    else
        {$error++; $errmsg .= 'Invalid price. ';}

    // validate 'pic': must consist of alphanumeric characters only.
    //$_POST['pic'] = isset($_POST['pic']) ? $_POST['pic'] : '';
    //if(preg_match('/\.(jpg|gif|jpeg)$/i',$_POST['pic']))
        //{$clean_price = $_POST['pic'];}
    //else
        //{$error++; $errmsg .= 'Invalid pic. ';}

    // validate 'quantity': must consist of numbers only.
    //$_POST['pic'] = isset($_POST['pic']) ? $_POST['pic'] : '';
    //if(preg_match('/\.(jpg|gif|jpeg)$/i',$_POST['pic']))
        //{
        $clean_quantity = $_POST['quantity'];
        //}
    //else
        //{$error++; $errmsg .= 'Invalid pic. ';}

    // validate 'status': must be one of the drop down options.
    $_POST['status'] = isset($_POST['status']) ? $_POST['status'] : '';
    if($_POST['status']=='available'||$_POST['status']=='unavailable'||$_POST['status']=='ebay'||$_POST['status']=='new')
        {$clean_status = $_POST['status'];}
    else
        {$error++; $errmsg .= 'Invalid status. ';}

    // validate 'catagory': must be one of the drop down options.
    /*
    $_POST['catagory'] = isset($_POST['catagory']) ? $_POST['catagory'] : '';
    if($_POST['catagory']=='cd'||$_POST['catagory']=='tshirt')
        {$clean_status = $_POST['catagory'];}
    else
        {$error++; $errmsg .= 'Invalid catagory. ';}*/
}

if (isset($_POST['add']) && ($error==0)) 
{                   

    // open connection
    $connection = mysql_connect($host, $user, $pass) or die ("Unable to connect!");
    // select database
    mysql_select_db($db) or die ("Unable to select database!");
    // create query
    $query = "UPDATE paulyout_pauly.products 
            SET
            name='$clean_name', description='$clean_description', 
            price='$clean_price', status='$clean_status', quantity='$clean_quantity'
            WHERE id='$currentItemID';";    

    // execute query
    mysql_query($query) or die ("Error in query: $query.".mysql_error());
    // close connection
    mysql_close($connection);
    echo"<p>Item succesfully updated.</p><a href=\"../\">Back to Control Panel</a>.</p>";
    echo(htmlspecialchars($_GET["id"]));
    echo"what is going on";
    echo"currentItemID = $currentItemID";
    echo"$currentItemID";

}

else //output error messages 
{if ($error>0) {echo "<p><strong>There were errors in your submission:</strong> $errmsg</p>\n";}

///////////////////get existing item details:
// open connection
$connection = mysql_connect($host, $user, $pass) or die ("Unable to connect!");
// select database
mysql_select_db($db) or die ("Unable to select database!");
// create query
$query = "SELECT id, name, description, price, pic, status, quantity FROM products where id = '$currentItemID';";

// execute query
$result = mysql_query($query) or die ("Error in query!");

//return results
$counter = 0;
if(mysql_num_rows($result) > 0) {
    while(list($db_id, $db_name, $db_description, $db_price, $db_pic, $db_status, $db_quantity) = mysql_fetch_row($result)){

            //render form
?>
<form enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" id="save"><fieldset>
<table id="site-form">
    <tr>
    <td class="one_of_three"><label>Item Name:&nbsp;&nbsp;</label></td>
    <td class="two_of_three"><input type="text" name="name" id="name" value="<?php echo"$db_name";?>"/></td>
    <td><label class="errors" id="nameError">&nbsp;</label></td>
    </tr>
    <tr>
    <td class="one_of_three"><label>Description:&nbsp;&nbsp;</label></td>
    <td class="two_of_three"><textarea rows="10" cols="30" name="description" id="description"><?php echo"$db_description";?></textarea></td>
    <td><label class="errors" id="descriptionError">&nbsp;</label></td>
    </tr>
    <tr>
    <td class="one_of_three"><label>Price(£):&nbsp;&nbsp;</label></td>
    <td class="two_of_three"><input type="text" name="price" id="price" value="<?php echo"$db_price";?>"/></td>
    <td><label class="errors" id="priceError">&nbsp;</label></td>
    </tr>
    <tr>
    <td class="one_of_three"><label>Quantity:&nbsp;&nbsp;</label></td>
    <td class="two_of_three"><input type="text" name="quantity" id="quantity" value="<?php echo"$db_quantity";?>"/></td>
    <td><label class="errors" id="quantityError">&nbsp;</label></td>
    </tr>
    <tr>
    <td class="one_of_three"><label>Picture:&nbsp;&nbsp;</label></td>
    <td class="two_of_three"><input type="file" name="userfile[]" id="pic"/></td>
    <td><label class="errors" id="picError">&nbsp;</label></td>
    </tr>
    <tr>
    <td class="one_of_three"><label>Status:&nbsp;&nbsp;</label></td>
    <td class="two_of_three">
        <select  name="status" id="status" value="">
        <option value="<?php echo"$db_status";?>"><?php echo(ucfirst(strtolower($db_status)));?></option>
        <option value="available">Available</option>
        <option value="new">New</option>
        </select>
    </td>
    <td><label class="errors" id="statusError">&nbsp;</label></td>
    </tr>
    <!--
    <tr>
    <td class="one_of_three"><label>Catagory:&nbsp;&nbsp;</label></td>
    <td class="two_of_three">
        <select  name="catagory" id="catagory">
        <option value="cd">CD</option>
        <option value="tshirt">T-Shirt</option>
        </select>
    </td>
    <td><label class="errors" id="statusError">&nbsp;</label></td>
    </tr>-->
    <tr>
        <td class="one_of_three">&nbsp;</td>
        <td class="two_of_three"><input name="add" id="save_button" type="submit" value="Add Item"/>&nbsp;&nbsp;<a href="../">Cancel</a>.</td>
        <td>&nbsp;</td>
    </tr>
</table>
</fieldset></form>
<?php

    }
}
else {echo "<p>Product not found.</p>";}//the item could not be found!!!

// free result set from memory
mysql_free_result($result);
// close connection
mysql_close($connection);
}
?>

<?php ob_end_flush()?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:57:39.270

您将表格张贴到`$_SERVER['PHP_SELF']`。这样 GET 参数在提交时被重置。您应该发布到`$_SERVER['PHP_SELF']."?id=".$currentItemID`。

或者

只需将操作字段留空

# php - 如何从下拉列表中检索值并将其插入数据库字段？

> ID：14923501
> 
> 赞同：0
> 
> 时间：2013-02-17T16:52:01.090
> 
> 标签：php, html, sql, selection, option

首先形式有效。

目前我有一个上传表单，上面有大约 10 个字段。该表单在插入任何文本输入时可以正常工作，但是当我从下面的下拉列表之一中选择一个选项时，它只会将一个空白字段插入数据库。

我真的不明白为什么要这样做，但是有人的贡献会很棒，因为我已经有几天了这个问题了。

我的问题是：如何在下拉列表中选择选项以插入数据库字段？

请参阅以下文件：

上传.html

```
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>test file upload</title>
<link rel="stylesheet" type="text/css" href="css/master.css"/>
</head>

<body>

<div id="wrapper">

<div class="uploadForm" align="center">

<form method="post" action="insert.php">

Heading:<br/><input name="heading" class="contentUpload" type="text" /><br/>

Text:<br/><input name="text" type="text"/><br/>

Frendly URL :<br/><input name="frendlyUrl" class="contentUpload" type="text" /><br/>

Location:<br/><select type="text" name="location" id="location">
                    <option value="Aberdeen">Aberdeen</option>
                    <option value="Aberdeenshire">Aberdeenshire</option>
                    <option value="Angus">Angus</option>
                    <option value="Argyll And Bute">Argyll &Aacute; Bute</option>
                    <option value="Clackmannanshire">Clackmannanshire</option>
                    <option value="Dumfries And Galloway">Dumfries &Aacute; Galloway</option>
                    <option value="Dundee">Dundee</option>
                    <option value="East Ayrshire">East Ayrshire</option>
                    <option value="East Dunbartonshire">East Dunbartonshire</option>
                    <option value="East Lothian">East Lothian</option>
                    <option value="East Renfrewshire">East Renfrewshire</option>
                    <option value="Edinburgh">Edinburgh</option>
                    <option value="Eilean Siar">Eilean Siar</option>
                    <option value="Falkirk">Falkirk</option>
                    <option value="Fife">Fife</option>
                    <option value="Glasgow">Glasgow</option>
                    <option value="Highlands">Highlands</option>
                    <option value="Inverclyde">Inverclyde</option>
                    <option value="Midlothian">Midlothian</option>
                    <option value="Moray">Moray</option>
                    <option value="North Ayrshire">North Ayrshire</option>
                    <option value="North Lanarkshire">North Lanarkshire</option>
                    <option value="Orkney">Orkney</option>
                    <option value="Perth And Kinross">Perth &Aacute; Kinross</option>
                    <option value="Renfrewshire">Renfrewshire</option>
                    <option value="Scottish Borders">Scottish Borders</option>
                    <option value="Shetland Islands">Shetland Islands</option>
                    <option value="South Ayrshire">South Ayrshire</option>
                    <option value="South Lanarkshire">South Lanarkshire</option>
                    <option value="Stirling">Stirling</option>
                    <option value="West Dunbartonshire">West Dunbartonshire</option>
                    <option value="West Lothian">West Lothian</option>
            </select>
<br/>

Age:<br/><input name="age" class="contentUpload" type="text" /><br/>

URL:<br/><input name="url" class="contentUpload" type="text" /><br/>

Image Name (example: abc.png):<br/><input name="imageName" class="contentUpload" type="text" /><br/>

Category:<br/><select type="text" name="category" id="category">
                    <option value="Financial">Financial</option>
                    <option value="Business And Administration">Business &Aacute; Administration</option>
                    <option value="Care">Care</option>
                    <option value="Construction">Construction</option>
                    <option value="Creative">Creative</option>
                    <option value="Energy">Energy</option>
                    <option value="Engineering">Engineering</option>
                    <option value="Food And Drink">Food &Aacute; Drink</option>
                    <option value="Hair And Beauty">Hair &Aacute; Beauty</option>
                    <option value="Hospitality">Hospitality</option>
                    <option value="IT">IT</option>
                    <option value="Landbased">Landbased</option>
                    <option value="Motor And Transport">Motor &Aacute; Transport</option>
                    <option value="Retail">Retail</option>
                    <option value="Scientific">Scientific</option>
                    <option value="Sport And Leisure">Sport &Aacute; Leisure</option>
                    <option value="Enterprise">Enterprise</option>
            </select>
<br/>

Type:<br/><input name="type" class="contentUpload" type="text" /><br/>

<input name="Submit" type="submit" value="submit" />

</form>

</div>

</div>

</body>

</html> 
```

插入.php

```
<?php
$con = mysql_connect("x","x","x");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("x", $con);

$sql="INSERT INTO podContent (url, heading, text, age, location, imageName, category, type, friendlyUrl)
VALUES
('$_POST[url]','$_POST[heading]','$_POST[text]','$_POST[age]','$_POST[location]','$_POST[imageName]','$_POST[category]','$_POST[type]','$_POST[friendlyUrl]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:07:23.910

尝试从您的选择标签中删除 type="text" 。

它不是一个有效的属性。

[http://www.w3schools.com/tags/tag_select.asp](http://www.w3schools.com/tags/tag_select.asp)

还要检查以确保您的数据库字段能够处理值的长度。

# javascript - 密码强度函数只返回一个值

> ID：14923502
> 
> 赞同：-1
> 
> 时间：2013-02-17T16:52:01.633
> 
> 标签：javascript, html, passwords

我是 Javascript 新手，我正在尝试编写密码强度函数。但是每次我输入密码时，它只返回一个值（“非常强”）。我完全糊涂了！！这是我的代码：

```
function pwd_Validation()
    {
        var strength = new Array();
        strength[0] = "Blank";
        strength[1] = "Very Weak";
        strength[2] = "Weak";
        strength[3] = "Medium";
        strength[4] = "Strong";
        strength[5] = "Very Strong";

        var password = document.getElementById('pwd')

        if (password.length < 1)
            var score = 1;

       else if (password.length < 4)
             score = 2

        else if (password.length >= 8 && password.value.match(/[a-z]/))
                 score = 3;

       else if (password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/))
                score = 4;

       else  (password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/) && password.value.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/))
                score = 5;

        document.getElementById('spnPwd').innerHTML = strength[score];

        if ( password.value = "")
            document.getElementById('spnPwd').innerHTML = strength[0];
            document.getElementById('spnPwd').style.color="#FF0000"

        if ( strength[score] == 1)
            document.getElementById('spnPwd').innerHTML = strength[1];
            document.getElementById('spnPwd').style.color="#FF0000"

        if ( strength[score] == 3)
            document.getElementById('spnPwd').innerHTML = strength[3];
            document.getElementById('spnPwd').style.color="#FFCC00"

        if ( strength[score] == 4)
            document.getElementById('spnPwd').innerHTML = strength[4];
            document.getElementById('spnPwd').style.color="#19D119"

         if ( strength[score] == 5)
            document.getElementById('spnPwd').innerHTML = strength[5];
            document.getElementById('spnPwd').style.color="#006600"

    } 
```

HTML 代码：

```
Password :   <input type="password" id="pwd" onblur="pwd_Validation()" />
                <span id="spnPwd" class="pwd_Strength" ></span><br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:55:05.947

最后一个`if`缺失，`else`因此解析如下：

```
...
else {
    (password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/) && password.value.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/))
}

score = 5; 
```

在控制结构中始终使用括号是一个好习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T17:18:02.687

有几个编码错误和逻辑错误。我建议进行此重写，以进行以下修复/改进：

1.  获取实际密码值并使用其长度而不是使用密码 DOM 元素的长度。
2.  处理长度在 4 到 7 之间的情况（您的逻辑跳过的情况）
3.  以正确的顺序对正则表达式测试进行排序，以便它实际上找到正确的分数
4.  更正了标点正则表达式
5.  修复else逻辑问题
6.  将颜色放入平行数组中。
7.  以更有效/更紧凑的方式声明力量弦。
8.  给你的分数一个默认值，这样它就可以保证有一个值。
9.  不要多次重复正则表达式测试
10.  使用`regex.test`它是因为它比`regex.match`您只想知道它是否匹配时更有效
11.  从数组中提取所需的颜色值，而不是`if`每个分数的语句
12.  只获取`spnPwd`一次 DOM 元素
13.  将数字正则表达式更改为`\d`
14.  为安全起见，在所有 if/else 语句中使用大括号

和建议的代码：

```
function pwd_Validation() {
    var strengths = ["Blank", "Very Weak", "Weak", "Medium", "Strong", "Very Strong"];
    var colors = ["#FF0000", "#FF0000", "#FFCC00", "#FFCC00", "#19D119", "#006600"];
    var score = 0;
    var regLower = /[a-z]/, regUpper = /[A-Z]/, regNumber = /\d/, regPunctuation = /[.,!@#$%^&*?_~\-£()]/;

    var password = document.getElementById('pwd').value;
    if (!password) {
        score = 0;
    } else if (password.length < 2) {
        score = 1;
    } else if (password.length < 4) {
        score = 2;
    } else if (password.length <= 7) {
        score = 3;
    } else {
        // length is >= 8 in here
        if (regLower.test(password) && regUpper.test(password) && regNumber.test(password)) {
            // if it also has punctuation, then it gets a 5, otherwise just a 4
            if (regPunctuation.test(password)) {
                score = 5;
            } else {
                score = 4;
            }
        } else {
            // if doesn't have upper, lower and numbers, then it gets a 3
            score = 3;
        }
    }
    var spanPwd = document.getElementById('spnPwd');
    spanPwd.innerHTML = strengths[score];
    spanPwd.style.color = colors[score];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T17:01:27.183

你保存到 var**分数**，然后你问**strength[score]**。 `if (strength[score] == 3)`

那么您在代码的第二部分中缺少一些 { } ！

在最后一部分你可以使用

```
switch(score) {
 case 1: ... break;

...
 default: ... break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T16:58:34.257

您忘记将密码字段转换为其值：

```
var password = document.getElementById('pwd') 
```

应该是 var password = document.getElementById('pwd').value

在您的原始情况下，`password.length`未定义，并且与它的所有比较都评估为假。（所以`else`执行final）

另外，你的最后一个`else`街区

```
 else  (password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/) && password.value.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/))
            score = 5; 
```

应该

```
 else  if(password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/) && password.value.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/))
            score = 5; 
```

除此之外，请在 ifs 中使用大括号。有这样的代码是不好的做法：

```
if(...)
 ...
else if(...)
 ...
else
 ... 
```

这个更好：

```
if(...){
 ...
}else if(...){
 ...
}else{
 ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T16:58:58.677

我已经通过[jsbeautifier.org](http://jsbeautifier.org/)推送了您的代码。这根据 javascript 解释器的实际运行方式重新缩进了您的代码。请注意您的 if 语句**没有**运行您认为的代码。

```
function pwd_Validation() {
    var strength = new Array();
    strength[0] = "Blank";
    strength[1] = "Very Weak";
    strength[2] = "Weak";
    strength[3] = "Medium";
    strength[4] = "Strong";
    strength[5] = "Very Strong";

    var password = document.getElementById('pwd')

    if (password.length < 1) var score = 1;
    else if (password.length < 4) score = 2
    else if (password.length >= 8 && password.value.match(/[a-z]/)) score = 3;
    else if (password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/)) score = 4;
    else(password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/) && password.value.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/))
    score = 5;

    document.getElementById('spnPwd').innerHTML = strength[score];

    if (password.value = "") document.getElementById('spnPwd').innerHTML = strength[0];
    document.getElementById('spnPwd').style.color = "#FF0000"

    if (strength[score] == 1) document.getElementById('spnPwd').innerHTML = strength[1];
    document.getElementById('spnPwd').style.color = "#FF0000"

    if (strength[score] == 3) document.getElementById('spnPwd').innerHTML = strength[3];
    document.getElementById('spnPwd').style.color = "#FFCC00"

    if (strength[score] == 4) document.getElementById('spnPwd').innerHTML = strength[4];
    document.getElementById('spnPwd').style.color = "#19D119"

    if (strength[score] == 5) document.getElementById('spnPwd').innerHTML = strength[5];
    document.getElementById('spnPwd').style.color = "#006600"    
} 
```

举一些具体的例子：

```
if (strength[score] == 5) document.getElementById('spnPwd').innerHTML = strength[5];
document.getElementById('spnPwd').style.color = "#006600" 
```

您可能打算这样：

```
if (strength[score] == 5) {
    document.getElementById('spnPwd').innerHTML = strength[5];
    document.getElementById('spnPwd').style.color = "#006600"
} 
```

还：

```
else(password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/) && password.value.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/))
score = 5; 
```

你可能的意思是：

```
else if (password.length >= 8 && password.value.match(/[a-z]/) && password.value.match(/[A-Z]/) && password.value.match(/[0-9]/) && password.value.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/)) {
    score = 5;
} 
```

* * *

您在代码中提到的实际问题是由于我退出的第二个条件。该行`score = 5`不是**任何**条件的一部分，并且将始终运行（出于上述原因）。这就是为什么您总是看到密码“非常强”的原因。

# ruby-on-rails - 在 ActiveRecord 中使用 first_or_create 的两种不同方式之间的区别

> ID：14923505
> 
> 赞同：3
> 
> 时间：2013-02-17T16:52:19.687
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我对 ActiveRecord 完全陌生，所以这可能是一个愚蠢的问题：我写的方法是这样的：

```
sample_organizations = [ '37 Signals', 'Fog Creek'] 
sample_organizations.each { |item|
    Organization.first_or_create(
        name: item,
        time_zone: 'Central'
    )
  } 
```

它没有用，我希望它会遍历我的组织数组并将它们全部插入数据库，但它只是插入了第一行。

然后有人建议像这样改变它并且这个工作，但我想知道是否有人可以解释第一种方法中的错误，以便我可以了解我在做什么/假设错误。

所以这个工作：

```
 sample_organizations = [ '37 Signals', 'Fog Creek'] 
    sample_organizations.each { |item|
    Organization.where(name: item).where(time_zone: 'Central').first_or_create
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T17:58:13.333

实际上，有两种方法：`find_or_create_by`添加一列并赋予一组属性。

因此，例如，您可以编写：

```
find_or_create_by_name('Willy', time_zone: 'UTC') 
```

第二个是`first_or_create`, 并且按照您的建议工作（您的第二个解决方案）（也请参阅[文档](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-first_or_create)）。

有人建议引入该`find_or_create`方法，该方法接受哈希，但结果是`first_or_create`. （见这里的[讨论](https://github.com/rails/rails/issues/2420)）。

请注意，两者在[相关的导轨指南](http://guides.rubyonrails.org/active_record_querying.html)中也得到了很好的解释。

[更新 2014-06-30] 请注意，当前符号已更改，我们现在应该写

```
Organization.find_or_create_by(name: '37 signals') do |organisation|
  organisation.time_zone = 'Central'
end 
```

它将尝试按名称查找组织，如果找不到，则使用块创建组织。注意：该块仅在组织不存在时执行！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T16:56:03.940

它应该如下所示：

```
sample_organizations.each { |item|
  Organization.find_or_create_by_name(item, time_zone: 'Central')
} 
```

# mongodb - MongoDB：如何通过子文档 ID 查找？

> ID：14923508
> 
> 赞同：9
> 
> 时间：2013-02-17T16:52:57.947
> 
> 标签：mongodb, mongoose

我试图在 MongoDB 中对彼此竞争的概念`games`进行`teams`建模`players`。

我有两个系列：`players`和`games`.

这就是文档的`games`外观。

```
{
    "_id": { "$oid": "1" },
    "teams": [
        {
            "players": [
                {
                    "player": { "$oid": "2" },
                    "score": 500,
                },
                {
                    "player": { "$oid": "3" },
                    "score": 550,
                }
            ]
        },
        {
            "players": [
                {
                    "player": { "$oid": "4" },
                    "score": 500,
                },
                {
                    "player": { "$oid": "5" },
                    "score": 550,
                }
            ]
        }
    ]
} 
```

任务如下：给定一个玩家 ID，我想找到该玩家参与的所有游戏。

我试过的：

```
db.games.find( { "teams.players.player._id": "2" } ) 
```

但是，这不会返回任何内容。

顺便说一句，我正在使用具有以下架构的 Mongoose：

```
playerSchema = Schema
    player: { type: Schema.ObjectId, ref: 'Player' }
    score: { type: Number }

teamSchema = Schema
    players: [ playerSchema ]

gameSchema = Schema
    teams: [ teamSchema ] 
```

使用以下 CoffeeScript 查询：

```
Game.find 'teams.players.player._id': playerId 
```

它不会返回任何玩家 ID 的结果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T01:33:23.553

在您的文档中：

```
"players": [
            {
                "player": { "$oid": "4" },
                "score": 500,
            },
            {
                "player": { "$oid": "5" },
                "score": 550,
            }
        ] 
```

`player`嵌入式集合中的字段`players`是一个 BSON Id（即它看起来像`ObjectId("4e208e070347a90001000008")`），所以我认为您应该像这样构造您的查询：

```
db.games.find( { "teams.players.player": ObjectId("2") } ) 
```

请注意，我已经放弃了`_id`-- 前提是在 mongo 控制台中工作，然后我怀疑 Coffee 查询将是相似的（删除`_id`部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T15:40:51.433

我使用您的反馈将这个示例限制在主客队。请记住，Mongo 不是关系数据库，使用关系通常表明关系数据库的思维方式。复制是关键。

我没有从游戏中引用特定的玩家文档，而是存储了玩家的名字。我认为这是一个不可变的唯一索引。给玩家一个游戏数组，其中包含他玩过的每个游戏的引用。这实际上很糟糕，因为我们必须再次查询并填充这个数组。最好也在这里存储一个名称，但是由于我不知道您的情况，我不确定游戏是否具有不可变的可表示名称。

这个基本想法必须通过错误检查（例如中间件）来改进，但我把它留给你。

```
// Schemas
var playerSchema = new Schema({
    name: {type: String, index: true, unique: true},
    games: {type: [Schema.ObjectId], ref: 'Game'}
});

var gameSchema = new Schema({
    homeTeam: [{player: {name: String}, score: Number}]
    awayTeam: [{player: {name: String}, score: Number}]
});

// Models
var Player = mongoose.model('Player', playerSchema);
var Team = mongoose.model('Team', teamSchema);
var Game = mongoose.model('Game', gameSchema);

// Middleware
gameSchema.post('save', function (game) {
    var addMatchToPlayer = function(name) {
        Player.findOne({name: name}, function(err, player) {
            if (!err && player && player.games.indexOf(game._id) === -1) {
                player.games.push(game._id);
                player.save();
            }
        });
    }
    for (var i = 0; i < game.homeTeam.length; i++) {
        addMatchToPlayer(game.homeTeam[i].name);
    }
    for (var i = 0; i < game.awayTeam.length; i++) {
        addMatchToPlayer(game.awayTeam[i].name);
    }
});

// Queries
Player.findOne({name: 'Roel van Uden'}).populate('games').exec(function (err, player) {
}); 
```

# c# - 指定依赖于另一个泛型类的泛型约束

> ID：14923510
> 
> 赞同：0
> 
> 时间：2013-02-17T16:53:02.937
> 
> 标签：c#, generics

我有以下几点：

```
// This part is fine
abstract class Attack {}

abstract class Unit<A> where A : Attack {}

class InstantAttack : Attack {}
class Infantry : Unit<InstantAttack> {}

// I'm lost here, on this part's syntax:
abstract class Controller<U> where U : Unit {}
// I want the above class to take any kind of Unit, but Unit is a generic class! 
```

以上不适用于`Controller`，因为`where U : Unit`不正确，因为`Unit`需要通用参数（如`Unit<InstantAttack>`）。我试过了：

```
abstract class Controller<U<A>> where U<A> : Unit<A> {} 
```

这当然没有用。这样做的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:59:35.050

要么像这样：

```
abstract class Controller<U, A> where U : Unit<A> {} 
```

或者像这样：

```
interface IUnit { }
abstract class Unit<A> : IUnit where A : Attack { }
abstract class Controller<U> where U : IUnit { } 
```

# javascript - 在服务器端设置自定义标头，并在客户端使用 JavaScript 检索其值

> ID：14923512
> 
> 赞同：0
> 
> 时间：2013-02-17T16:53:11.563
> 
> 标签：javascript, jquery, http-headers

是否可以将自定义标头设置为来自服务器端的 GET 响应的一部分，并在收到响应后在客户端使用 JavaScript/JQuery 检索其值？

如果是这样，在 JavaScript 中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:07:38.030

正如对您问题的评论中提到的那样，答案是否定的，不是直接的。

如果您确实需要这样做，作为一种解决方法，您可以在返回 HTML 时将值作为隐藏字段推送，如果返回 JSON 则作为响应的一部分等。

如果您绝对不可避免地需要这样做，您可以对所需页面创建一个单独的 HEAD XMLHTTPRequest，并从那里加载标题。

查看[Javascript 中的 Http 标头？](https://stackoverflow.com/questions/3215613/http-headers-in-javascript)

# c# - Web 浏览器控件不显示 HTMLTable 单元格边框

> ID：14923521
> 
> 赞同：0
> 
> 时间：2013-02-17T16:53:57.087
> 
> 标签：c#, webbrowser-control, html-table

我`webBrowserControl`在 C# 中使用时遇到了这个奇怪的问题（使用 VS 2005 和 VS 2012 进行了测试，因为我认为更高版本可以工作，但它没有）。

我有一个网页（asp.net），我在其中手动生成一些 HTMLtables，它工作正常，由于某些原因我想将页面转移到 Win Forms 应用程序（点击表单上的按钮将加载 URL，即本地宿主 aspx 页面，在表单上的 web 浏览器控件内）

但是当表格显示在网络浏览器中时，他们错过了一些单元格的边框我不知道为什么会这样，这是一个简单的 HTML 表格，我没有使用任何花哨的样式，只是简单的表格，`<td>`边框设置为 1像素。

所以问题是，网页在所有浏览器（IE、FF、Chrome）中都能完美显示，但在 webBrowser 控件内部，它隐藏了某些单元格的边框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:57:05.853

哦，我解决了，它可能对其他人有效，所以我分享它。

事实上，我正在用`.InnerText = " ";`值填充表格单元格，即一个空格，我将其更改为：`.InnerHtml = "&nbsp";`现在它工作正常

所以真正的问题是，在 win forms 应用程序中，网络浏览器隐藏了其中有空白区域的单元格边框，知道这一点很有趣，因为网络浏览器本身使用 IE 基础等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:01:27.290

这些是图像：首先是用于网络浏览器控制![在此处输入图像描述](../Images/3dbc21eff62b686d5d1d5ddff7aa1243.png)

![在此处输入图像描述](../Images/ad8e8b59e6900d766edf2065456d404b.png)

# linux - Linux fifo（命名管道）O_NONBLOCK 破坏管道

> ID：14923525
> 
> 赞同：0
> 
> 时间：2013-02-17T16:54:39.870
> 
> 标签：linux, posix, pipe, fifo

我一直在使用进程间通信在 C++ 中为 linux 编写一个小程序。我在尝试以非阻塞方式读取一个进程并使用另一个进程写入（阻塞）时遇到问题。问题看起来像这样，当父级尝试使用`O_NONBLOCK`(or `O_NDELAY`) 读取管道时，它从不读取单个字节，而当子级尝试在管道上写入时，它会失败并`SIGPIPE`发送损坏的管道信号。以下是代码示例：

```
// Parent process
mkfifo(PROC_COPROC, 0666);

int fd_co = open(PROC_COPROC, O_RDONLY | O_NDELAY);
char c;
int n;
fcntl(fd_co,F_SETFL,0); //fix it
while ((n = read(fd_co, &c, 1)) > 0)
{
    printf("%c", c);
}
close(fd_co);

// Child process
int fd = open(PROC_COPROC, O_WRONLY | O_APPEND);
if ( fd != -1 ) 
{
    write( fd , "message\n" , 8); //Fails here if flag not set
}
else
    printf("Ne peut pas ecrire sur le fifo\n");
close(fd); 
```

我终于找到了一种方法来解决这个问题，方法`fcntl(fd_co,F_SETFL,0);`是在非阻塞开放调用之后立即使用。

阅读[手册页](http://linux.die.net/man/2/fcntl)后，我找不到任何（简单）解释，如果我想读取非阻塞和写入阻塞，我为什么要重置文件描述符的标志。

有人有解释还是我做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:51:14.683

O_NDELAY 的“问题”是，当没有可用数据时， read 返回`-1`并将 errno 设置为。所以，你必须测试for和 errno`EAGAIN`的返回值，然后再读取。`read``-1`

您的“修复”只是重置 O_NDELAY，如果没有从 FIFO 中读取的内容，它会再次阻止读取。

也可以看看[`read`](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)

> **返回值**
> ... 出错时，返回 -1，并适当设置 errno。
> 
> **错误**
> **EAGAIN**文件描述符 fd 引用了一个不是套接字的文件，并且已被标记为非阻塞 (O_NONBLOCK)，读取将阻塞。
> **EAGAIN**或**EWOULDBLOCK**
> 文件描述符 fd 引用一个套接字并已被标记为非阻塞 (O_NONBLOCK)，读取将阻塞。POSIX.1-2001 允许在这种情况下返回任一错误，并且不要求这些常量具有相同的值，因此可移植应用程序应检查这两种可能性。

如果阻塞在您的情况下是一个问题，您也可以考虑使用[`select`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)，或者[`poll`](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)如@BasileStarynkevitch 建议的那样。

# iphone - 连接确实接收到数据返回 null 并使应用程序崩溃

> ID：14923530
> 
> 赞同：0
> 
> 时间：2013-02-17T16:54:58.150
> 
> 标签：iphone, ios, objective-c, web-services, ipad

我通过单击按钮调用服务器，连接`didReceiveData`返回 a`Null`并使应用程序崩溃。但是有一个条件来检查数据是否是`if`，在条件下再次启动服务器调用是执行此操作的最佳实践吗？`else``Null``if`

```
-(IBAction)btnClicked:(id)sender
{
    NSMutableURLRequest *storeRequest = [NSMutableURLRequest requestWithURL:url];

    [storeRequest setHTTPMethod:@"POST"];
    [storeRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [storeRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [storeRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [storeRequest setHTTPBody:postData];

    NSURLConnection *theConnection;

    theConnection =[[NSURLConnection alloc] initWithRequest:storeRequest delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data1
{
    if (data1==nil)
    {
        [self downloadDetails];//Restart the download
    }
    else
    {
        receivedData =[[NSMutableData alloc]init];

        [receivedData appendData:data1];
    }
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
NSError* error;
NSMutableArray* jsonArray = [NSJSONSerialization
                             JSONObjectWithData:receivedData
                             options:kNilOptions
                             error:&error];

[appDelegate.inboxArray addObjectsFromArray:jsonArray];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:03:41.857

在回答您关于是否应在失败时立即重新发起请求是一种好习惯的问题时，答案是否定的。如果您确实想重试，您应该：

*   只有在另一个请求有合理的成功机会时才这样做（例如，它没有因为完全缺乏网络连接而失败；只有在您的[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)类的实现告诉您网络连接已重新建立时，您才重试）；

*   采用“最大重试次数”逻辑来确保将重试次数限制在某个合理的范围内（例如，您不想用完用户的数据计划、担心设备性能、用户体验等）；

*   在重试之前延迟一些时间（例如，如果您的服务器因为请求不堪重负而没有响应，那么用源源不断的请求流来打击它也无济于事）；和

*   如果连接失败并且用户将应用程序返回到前台，则重新开始该过程（例如，常见情况是“哦，我忘记关闭飞行模式”，转到设置，将其关闭，然后返回应用程序，在哪一点，如果它还没有成功或者如果它已经过去了一定的时间（例如24小时），它应该自动重试。

就您的特定问题的细节而言，您应该向我们展示[`didFailWithError`](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSURLConnectionDelegate/connection%3adidFailWithError%3a)报告的内容。如果您仍然遇到问题，我还建议您在请求之前检查`postData`并`postLength`确保它们具有有效值。

顺便说一句，ctrahey 是正确的，您的`didReceiveData`. 流程一般是：

*   `NSMutableData`当你第一次创建`NSURLConnection`（或）时创建一个[`didReceiveResponse`](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSURLConnectionDataDelegate/connection%3adidReceiveResponse%3a)；

*   将数据附加到它[`didReceiveData`](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSURLConnectionDataDelegate/connection%3adidReceiveData%3a)，但对这些数据不做任何事情（除非你正在做一些基于流的操作，你不是）；

*   评估结果并采取行动[`connectionDidFinishLoading`](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSURLConnectionDataDelegate/connectionDidFinishLoading%3a)；和

*   确保您`didFailWithError`按照上面讨论的方式实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:14:38.900

receivedData 需要是一个实例变量，以便它具有在对委托方法的调用之间持续存在的存储持续时间。一种常见的模式是在它的 getter 中使用惰性实例化（使其成为“私有” `@property`）。

你现在拥有它的方式，如果你得到一个以上的块，你正在清除以前的块（实际上并没有让其他任何东西访问你的数据）。

我只能假设您正在适当地实现其他委托方法......

# tomcat - 是否可以使用 psi-probe 监控 2 个 tomcat 服务器？

> ID：14923533
> 
> 赞同：0
> 
> 时间：2013-02-17T16:55:07.400
> 
> 标签：tomcat, tomcat6, tomcat7, probe

是否可以使用 psi-probe 监控多个 tomcat 服务器？

如果没有，是否有任何其他开源工具可以这样做？

我们在 6 个不同的 tomcat 服务器中部署了我们的 Web 应用程序。我们使用 VIP 作为负载均衡器。基本上我想使用一个探针来监控所有这些 Web 应用程序实例的会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T21:24:51.990

是的，尝试使用 javamelody 开源项目。它有一个收集所有不同实例的 Web 应用程序，并提供一个 Web 应用程序控制台进行管理。

[http://code.google.com/p/javamelody/](http://code.google.com/p/javamelody/)

# c++ - 我可以将对象类转换为它实现的接口指针吗？

> ID：14923538
> 
> 赞同：5
> 
> 时间：2013-02-17T16:55:30.973
> 
> 标签：c++, interface, casting, cocos2d-x

我已经定义了一个如下的接口类。

```
class IRecyclableObject
{
public:
    virtual ~IRecyclableObject() {}

    virtual void recycle() = 0;
    virtual void dump() = 0;
    virtual int getRecycleTypeID() = 0;
}; 
```

以下是我的*CharacterAI*类，它继承了另一个类并实现了上面的接口类。它定义如下。

```
class CharacterAI : public harp::Character, public harp::IRecyclableObject
{
public:
    CharacterAI();
    virtual ~CharacterAI();

    ...

    // -- note these 3 virtual functions -- //
    virtual void recycle();
    virtual void dump();
    virtual int getRecycleTypeID();

    ...
}; 
```

接口中定义的这三个虚函数，我已经在*CharacterAI*类中正常实现了。那里没有什么花哨的东西。

是时候将它们与*ObjectPool*（自制）类一起使用了，其中可用对象的数据存储在

```
m_freeList 
```

使用*CCArray*类。

问题出现在以下代码中。

```
IRecyclableObject* ObjectPool::popFreeObjectAndAddToActiveListForType(int recycleTypeID)
{
    // search from free-list
    for(unsigned int i=0; i<m_freeList->count(); i++)
    {
        IRecyclableObject* obj = (IRecyclableObject*)m_freeList->objectAtIndex(i);
        CharacterAI *obj1 = (CharacterAI*)m_freeList->objectAtIndex(i);

        CCLog("recycleTypeID : %d %d %d", obj->getRecycleTypeID(), recycleTypeID, obj1->getRecycleTypeID());

        ...
    }
    return NULL;
} 
```

预期的结果是显示

```
recycleTypeID : 4 4 4 
```

但我得到了

```
recycleTypeID : 524241408 4 4 
```

第一个显然是垃圾，并且与每个循环随机不同。我试图在*CharacterAI类中实现的函数****getRecycleTypeID()***中放置一个断点，然后再返回。我发现只有

 *```
obj1->getRecycleTypeID() 
```

被称为但**不是**另一个。

通过关注*obj*变量，可以清楚地看到似乎不同的对象调用了该函数，原因可能来自将对象转换为接口类并使用 if 从那里它是错误的或某种类型。

那里发生了什么事？我可以将对象类型类转换为接口类指针（它实现）并正确调用接口类中定义的函数吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T17:11:09.743

> 我可以将对象类转换为它实现的接口指针吗？

是的。但这不是你的情况。函数`objectAtIndex()`返回一个指向 a 的指针`CCObject`，并且该类肯定*没有*实现该`IRecyclableObject`接口。

因此，粗暴的 C 风格`CCObject*`转换 to`IRecyclableObject*`将导致重新解释前一种对象的布局，就好像它是后一种类型的对象一样。这很糟糕，并导致**Undefined Behavior**。

您应该使用`dynamic_cast<>`将您的`CCobject*`转换为`IRecyclableObject*`：

```
IRecyclableObject* obj = dynamic_cast<IRecyclableObject*>(
    m_freeList->objectAtIndex(i)
    ); 
```

但是请注意，如果您只想将指针最终转换为 type 的对象，则甚至不需要这样做`CharacterAI`。只需直接将其转换为该类型：

```
CharacterAI* obj = dynamic_cast<CharacterAI*>(m_freeList->objectAtIndex(i)); 
```

`dynamic_cast<>`如果您尝试转换的指针指向的对象的运行时类型不是（等于或派生自）向下转换的目标类型，则返回空指针。因此，在不确定指向对象的具体类型的情况下，不要忘记在取消引用之前检查返回的指针是否为非空。*

# c# - Yield 如何在 ForEach 块中工作？

> ID：14923539
> 
> 赞同：2
> 
> 时间：2013-02-17T16:55:34.633
> 
> 标签：c#

Yield 如何在`foreach`如下所示的循环中工作？lstNumbers 是类型`List<int>`。

```
foreach (int i in lstNumbers)
{
    yield return i;
} 
```

它会在收到值时开始返回，还是在最后返回最终列表？

它与以下有何不同：

```
 foreach (int i in lstNumbers)
    {
        return i;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:57:52.307

在此示例中，它将一一返回所有值，但使用代码需要开始迭代结果集：

```
foreach (int i in lstNumbers)
{
    yield return i;
} 
```

看看下面的例子，它会`1, 2`在控制台上打印，`for`如果消费代码没有遍历可枚举，方法内的循环将永远不会结束：

```
using System;
using System.Collections.Generic;
using System.Linq;

class Program
{
    static void Main()
    {
        foreach (var item in Get().Take(2))
        {
            Console.WriteLine(item);
        }
    }

    static IEnumerable<int> Get()
    {
        foreach (var item in new[] { 1, 2, 3 })
        {
            yield return item;
        }
    }
} 
```

在这种情况下，您可能不需要产生任何东西，只需返回结果，因为您已经拥有它：

```
return lstNumbers; 
```

而在第二种情况下：

```
foreach (int i in lstNumbers)
{
    return i;
} 
```

您只是返回列表的第一个值，迭代立即中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:56:47.503

在第一种情况下，它只是`i`在调用时返回`return i`。

在调用者再次对​​函数调用迭代器后，它将跳转到下一次迭代。

举例说明：

```
int GetNextNumber() {
  foreach (int in in lstNumbers)
  {
     yield return in;  //returns on first hit
  }
} 
```

之后

```
foreach(var i in GetNextNumber()) {
     //process number got from the GetNextNumber()
     //on next iteration GetNextNumber() will be called again 
     // so the next number from lstNumbers will be returned
} 
```

这是处理长数据流的一种非常常见的方法，您可以按顺序选择其中的一部分，然后再请求另一个，依此类推。

相反，在第二种情况下，您将始终返回列表中的第一个元素，而永远不会跳转到其他元素。

# php - Joomla 密码被盗

> ID：14923542
> 
> 赞同：1
> 
> 时间：2013-02-17T16:55:44.513
> 
> 标签：php, mysql, joomla, joomla2.5

我的 Joomla 网站的管理员密码似乎被黑了。只有一个用户，管理员。我无法访问该帐户。我通过 _users 表中的 phpmyadmin 尝试了以下操作：

```
- admin  = 433903e0a9d6a712e00251e44d29bf87:UJ0b9J5fufL3FKfCc0TLsYJBh2PFULvT
- secret = d2064d358136996bd22421584a7cb33e:trd7TvKHx6dMeoMmBVxYmg0vuXEA4199 
```

但这似乎不起作用。我可以访问数据库和 CPanel。文章等中有很多数据，所以我无法删除数据库。版本是2.5

如何重置管理员用户的密码？

问候 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:24:28.300

尝试这个

```
Access you phpmyadmin -> go to #__users table choose your admin user name.
Then update your password with this
08af319cdddbcac8d2949042a416ac61:447pZnWzKdAQ81R9kX4xNiPfZTM5JOwE 
```

上面的加密值为123456的密码。

首先，您只需在数据库中更新密码，然后您就可以访问管理面板。在那里您可以更改您的管理员用户密码。用户->用户管理器->编辑

希望这会奏效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:00:15.613

你需要找到它散列/加密的代码（我从现在开始使用散列）你的密码。从那里您应该能够提取该代码并创建一个新的散列密码。就像是

```
var newpassword = 'mynewpassword';
var hashedpassword = hash(newpassword);//code from where you update your password 
```

然后将 hashedpassword 更新到您的数据库中。

# javascript - XHR 发布请求因 CORS 失败

> ID：14923543
> 
> 赞同：2
> 
> 时间：2013-02-17T16:55:43.993
> 
> 标签：javascript, xmlhttprequest, cors

我想从另一个域 test.example.com 访问 example.com。我已经设置了服务器 example.com 来响应带有 CORS 标头的标头（在 nginx.conf 中）：

```
 add_header Access-Control-Allow-Origin $http_origin;
     add_header Access-Control-Allow-Credentials true;
     add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
     add_header Access-Control-Allow-Headers "*"; 
```

如果我发送一个可以成功的 GET 请求，但是如果我发送一个 POST 请求将失败并出现此错误：

```
XMLHttpRequest cannot load http://example.com/path. Origin http://test.example.com is not allowed by Access-Control-Allow-Origin. 
```

如何使用 cors 进行发布请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:11:02.380

这取决于浏览器。某些浏览器不喜欢 Access-Control 中的通配符。尝试将发布请求的所有标头放入 Access-Control-Allow-Headers（例如来自 Access-Control-Request-Headers）。

另请注意，对于基本的 GET 请求，您通常不需要任何特定的服务器扩展 - 这可能是 GET 工作的解释（请参阅[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)）。

如果这不起作用：您能否向我们提供有关您使用的浏览器以及它提出的请求的更多详细信息。

# php - 如何获取当前用户在MYSQL中的第一个进程ID？

> ID：14923544
> 
> 赞同：0
> 
> 时间：2013-02-17T16:55:58.863
> 
> 标签：php, mysql, pid

我已经在 phpmyadmin 中尝试了 mysql 查询来获取 pid 并终止进程。下面列出的两个查询都可以工作，但是，它是通过 phpmyadmin GUI 实现的。如何**使用 PHP**获取第一个 pid，如何获取第一个 pid，以及如何检索它？例如：使用 mysql_fetch_array 并将其视为运行查询“select from...”？谢谢

```
Show processlist 

kill 'pid' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:15:44.570

如果您使用高于 5.1.7 的 MySQL 服务器，您可以使用单个 SQL 批处理来执行此操作：

```
SELECT @id := ID FROM INFORMATION_SCHEMA.PROCESSLIST LIMIT 1;
KILL @id; 
```

只需使用 PDO 或 mysqli 来运行批处理。

# svg - SVG 上的边框笔画变化

> ID：14923550
> 
> 赞同：0
> 
> 时间：2013-02-17T16:56:30.140
> 
> 标签：svg

![在此处输入图像描述](../Images/8f676d19e6320f992f22624d9f9e8d7b.png)

嗨，我想生成一个看起来像附加图像的 SVG。我遇到最多的问题是不同的笔划颜色——顶部较深，底部较浅。关于如何实施它的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:33:44.773

你想要一个线性渐变。这里有一个[示例](http://www.w3schools.com/svg/tryit.asp?filename=trysvg_linear2)，您必须为您的用例选择合适的颜色，但您可以尝试使用那里的界面。

# php - 将 php $score 发送到另一个页面

> ID：14923552
> 
> 赞同：0
> 
> 时间：2013-02-17T16:56:41.323
> 
> 标签：php, variables, post

我需要一些关于小型 php 脚本的帮助。我想将我的 $score 传递给另一个 URL。

访问者通过 html POST 表单提交测试后，将被带到计算并显示测试分数的页面：

```
<?php
$answer1= $_POST['answer1'];
$answer2= $_POST['answer2'];
$answer5= $_POST['answer5'];
$answer6= $_POST['answer6'];
$answer7= $_POST['answer7'];
$answer8= $_POST['answer8'];
$answer9= $_POST['answer9'];
$answer10= $_POST['answer10'];
$answer11= $_POST['answer11'];
$answer12= $_POST['answer12'];
$answer13= $_POST['answer13'];
$answer14= $_POST['answer14'];
$answer15= $_POST['answer15'];
$answer16= $_POST['answer16'];
$answer17= $_POST['answer17'];
$answer18= $_POST['answer18'];
$answer19= $_POST['answer19'];
$answer20= $_POST['answer20'];
$score = 0;

if ($answer1 == "A"){$score++;$score++;$score++;$score++;$score++;}
if ($answer1 == "B"){$score++;$score++;$score++;$score++;}

if ($answer5 == "A"){$score++;$score++;$score++;$score++;$score++;}

if ($answer6 == "A"){$score++;}
if ($answer6 == "B"){$score++;$score++;$score++;$score++;$score++;}

if ($answer7 == "A"){$score++;}
if ($answer7 == "B"){$score++;$score++;$score++;}
if ($answer7 == "C"){$score++;$score++;$score++;$score++;$score++;$score++;}

if ($answer8 == "A"){$score++;$score++;$score++;$score++;$score++;}
if ($answer8 == "B"){$score++;}
if ($answer8 == "C"){$score++;$score++;}

if ($answer9 == "B"){$score++;$score++;$score++;$score++;}
if ($answer9 == "C"){$score++;$score++;$score++;$score++;$score++;$score++;$score++;}
if ($answer9 == "D"){$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;}

if ($answer10 == "A"){$score++;$score++;$score++;}
if ($answer10 == "B"){$score++;$score++;$score++;$score++;$score++;$score++;}
if ($answer10 == "C"){$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;$score++;}

if ($answer11 == "A"){$score++;}
if ($answer11 == "B"){$score++;$score++;$score++;$score++;$score++;}
if ($answer11 == "C"){$score++;$score++;$score++;}

if ($answer12 == "B"){$score++;$score++;$score++;$score++;$score++;}
if ($answer12 == "C"){$score++;$score++;$score++;}

if ($answer13 == "A"){$score++;$score++;$score++;$score++;$score++;}
if ($answer13 == "B"){$score++;}

if ($answer14 == "A"){$score++;$score++;$score++;}
if ($answer14 == "B"){$score++;$score++;$score++;$score++;$score++;}
if ($answer14 == "C"){$score++;}

if ($answer15 == "A"){$score++;}
if ($answer15 == "C"){$score++;$score++;$score++;}
if ($answer15 == "D"){$score++;$score++;$score++;$score++;$score++;}

if ($answer16 == "B"){$score++;}
if ($answer16 == "C"){$score++;$score++;}
if ($answer16 == "D"){$score++;$score++;$score++;$score++;$score++;}

if ($answer17 == "B"){$score++;}
if ($answer17 == "C"){$score++;$score++;}
if ($answer17 == "D"){$score++;$score++;$score++;$score++;$score++;}

if ($answer18 == "B"){$score++;$score++;$score++;$score++;}
if ($answer18 == "C"){$score++;$score++;}
if ($answer18 == "E"){$score++;$score++;$score++;$score++;$score++;}
if ($answer18 == "F"){$score++;$score++;$score++;}

if ($answer19 == "B"){$score++;$score++;$score++;$score++;$score++;}
if ($answer20 == "A"){$score++;$score++;$score++;$score++;$score++;}

echo "$score";

?> 
```

在那个页面上， echo "$score"; 显示时，访问者必须单击此表单按钮才能激活服务：

```
<form name="form1" method="post" action="test.php">

<input name="pass" type="text" id="pass" />

<input type="submit" style="font-weight:bold" name="Submit" value="Aktiviraj!" />        </form> 
```

单击按钮后，他们将被带到另一个 .html 页面，**我实际上想要测试 echo "$score"; 再次显示。**基本上我希望页面 A 将 echo $ score 传递（发送）到页面 B，而不涉及过程中的 MySql 基础。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:00:30.387

```
<input name='answer[0]'/>
<input name='answer[1]'/>
<input name='answer[2]'/>
<input name='answer[3]'/>
<input name='answer[4]'/>

<?php
session_start();
$_SESSION['score'] = 0;
//If you aren't using a DB backend
$answers = array(
    0 => array("A"=>4,"B"=>1),
    1 => array("A"=>4,"B"=>1),
    2 => array("A"=>4,"B"=>2,"C"=>0),//and so on

);
foreach ($_POST['answer'] as $key => $value)
{
    $_SESSION['score'] += (int)$answers[$key][$value];
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:19:41.913

您应该使用[会话](http://php.net/sessions)在请求之间传输您的计算值。

# android - android - 从 xml 文件中获取保存的 X 和 Y 数组点？

> ID：14923557
> 
> 赞同：1
> 
> 时间：2013-02-17T16:56:53.283
> 
> 标签：android, xml, arrays, arraylist

我在屏幕上画了大约 130 个点。这点具有 X 和 Y 值（浮点值）。现在，我不知道如何获取 X 和 Y 值，或者我应该如何在 xml 文件中设置 x 和 y？

我是这样弄的。但这不起作用。例如第一点是：x: 100.340, y: 200.000

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <array name="myArray_0">
      <item>100.340,200.000</item>
      <item>350.450,400.900</item>
      <item>300.250,400.415</item>
      ...
   </array> 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:59:49.007

我以前遇到过和你类似的问题。我认为 Android 没有用于读取 res->values XML 文件中的键值对的工具。将 XML 文件保存在 assets 目录而不是 res-> values 目录中。然后，从您的活动中，读取资产文件夹中的 XML 文件。我认为以下代码有效。我没有测试它。如果它不起作用，请告诉我。

在您的资产文件夹中，您可以放置​​一个名为“myPoints”的 XML 文档。

```
<resources>
    <point Pointz="Point1">
        <item Xpoint="100.340"></item>
        <item Ypoint="200.000"></item>
    </point>
    <point Pointz="Point2">
        <item Xpoint="350.450"></item>
        <item Ypoint="400.900"></item>
    </point>
<end></end>
</resources> 
```

在您的活动中：

```
Double Xpoint, Ypoint;
int PointNum;

//Call the ReadXML() method somewhere in onCreate
private void ReadXML() {
        try {
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            GetXML_Handler doingWork = new GetXML_Handler();
            xr.setContentHandler(doingWork);
            InputSource Isource = new InputSource(this.getActivity().getAssets().open("myPoints.xml")); 
            xr.parse(Isource);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        }
    }

//This is a private class inside whatever Acitivity u are in.
private class GetXML_Handler extends DefaultHandler {
    boolean foundWord = false;
    int i = 0;
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
            if (localName.equals("point")) {
                foundWord = true;
                PointNum = attributes.getValue("Pointz"); //so PointNum will either be saved as "Point1" or "Point2"
            }
            } else if (foundWord == true && localName.equals("item")) {
                Xpoint = attributes.getValue(0);
                Ypoint = attributes.getValue(1);
            } else if (localName.equals("end")) {
                foundWord = false;              
            }
        } // End of startElement
}// End of Private Class GetXML_Handler 
```

* * *

如果您坚持将 XML 文件保存在 res-> values 文件夹中，您可以通过两种方式保存点：第一种方式是在 X 和 Y 点之间交替。

```
<string-array name="points">
        <item>100.340</item>  //X coordinate #1
        <item>200.000</item>  //Y coordinate #1
        <item>350.450</item>   //X coordinate #2
        <item>400.900</item>   //Y coordinate #2
</string-array> 
```

第二种方法是将其保存为 2 个数组。一个数组用于 X 坐标，1 个数组用于 Y 坐标。

```
<string-array name="Xpoints">
        <item>100.340</item>  //X coordinate #1
        <item>350.450</item>   //X coordinate #2
</string-array>
<string-array name="Ypoints">
        <item>200.000</item>  //Y coordinate #1
        <item>400.900</item>   //Y coordinate #2
</string-array> 
```

# php - 使用 wget 和 Windows Scheduler 运行 php 脚本

> ID：14923562
> 
> 赞同：2
> 
> 时间：2013-02-17T16:57:33.403
> 
> 标签：php, windows, command-line, localhost, wget

在我的笔记本电脑上，我安装了一个网络服务器并编写了一个脚本。通过在任何浏览器中访问脚本`http://localhost/test/search.php`使其正常运行：它搜索、下载和存储某些推文。

我现在想让脚本每 20 分钟自动运行一次，所以我`wget`在`C:\Program Files\GnuWin32\bin\wget.exe`. 然后，我使用以下操作（在“操作”选项卡上填写）创建了一个 Windows 任务：

```
Program/script:
"C:\Program Files\GnuWin32\bin\wget.exe"

Add arguments (optional): -O - -q -t 1 http://localhost/test/search.php 
```

正如预期的那样，每 20 分钟就会打开一个命令行来运行脚本。然而，什么也没有发生。脚本未初始化。我确信我的所有路径都是正确的。什么可能导致脚本没有被执行？命令行会在几毫秒内消失，所以我看不到它在说什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T05:09:40.247

您提到了两种途径`search.php`：一种是 with `/test`，另一种是 with `/ting`。确保您在浏览器和 wget 中使用相同的内容。

如果您请求一个不存在的页面，如果您提供`-q`. `-v`用or替换它，`--verbose`看看有什么问题。

```
c:\gnuwin32\bin\wget.exe -O - --verbose -t 1 http://localhost/test/search.php
--2013-02-25 23:42:03--  http://localhost/test/search.php
Resolving localhost... ::1, 127.0.0.1
Connecting to localhost|::1|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2013-02-25 23:42:03 ERROR 404: Not Found. 
```

当您让命令行工作时，您可以专注于使用任务调度程序运行它。

您可以以自己或任何其他帐户的身份运行任务。Using`LOCAL SERVICE`允许您在不提供密码的情况下运行它，即使您已注销。只需确保您选择的帐户具有 wget 所在目录的权限即可。

[其他人提到](https://stackoverflow.com/q/12964998/591064)您必须设置计划任务的路径，否则您将获得屏幕截图中显示的操作代码（2）。它还将确保 WIndows 找到`wget.exe`依赖项，即`libeay32.dll`和`libssl32.dll`.

![为您的计划任务设置工作目录](../Images/75ac44b4a4ed9b5ed5e4f25377e04d04.png).

最后，简化。从命令行运行 php。[上面的链接是一个](https://stackoverflow.com/q/12964998/591064)带有简单脚本的示例。

编写代码，以便您可以从命令行独立调用 search.php。无需在两者之间放置 HTTP 客户端和 Web 服务器。这里有[一堆](http://www.catswhocode.com/blog/10-code-snippets-to-interact-with-twitter)用于各种 Twitter 相关操作的示例脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:28:58.987

请创建一个 bat 文件，在其中提及所有命令，例如 Broncha 在评论中提到的命令，然后将其添加到 Windows 任务计划程序中。

```
task1.bat
-----------
cd c:\xampp\htdocs\test
php search.php 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:54:02.030

您应该从命令行测试您的脚本以了解它是否正常工作。只需运行它`cmd`来检查

```
"C:\Program Files\GnuWin32\bin\wget.exe" -O - -q -t 1 http://localhost/test/search.php 
```

任务调度程序有很多设置选项卡，检查历史选项卡以查看计划任务历史记录，您可以在其中检查最后几个运行时的退出代码。在历史中寻找这样的事件：

> 事件 ID：201 任务类别：操作已完成

检查其退出代码`action "C:\Program Files (x86)\GnuWin32\bin\wget.exe" with return code x`。如果它为零，那么它正在工作，任何其他整数都意味着错误。

请告诉您使用的是哪些窗口？还要发布上面提到的命令的输出，以便我可以确切地知道任务计划程序中的错误是什么。

# javascript - javascript 函数和 this 关键字，上下文

> ID：14923565
> 
> 赞同：2
> 
> 时间：2013-02-17T16:57:39.237
> 
> 标签：javascript, keyword

这是代码

```
obj = {
    a: 'some value';
    m: function(){
        alert(this.a);
    }
}

obj.m(); 
```

结果是`'some value'`。

听说 this 关键字是指带有 is 的函数的所有者`obj`。现在的问题是，上面代码中函数的所有者是`obj`为什么当函数拥有所有者时使用这个关键字很重要上面的代码应该以下列方式工作

```
obj = {
    a: 'some value';
    m: function(){
        alert(a);
    }
}

obj.m(); 
```

我知道哪个不起作用，但为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T16:59:20.017

`a`不在功能范围内`m`。

`a`是 object 的一个属性，`obj`仅在.`obj.a``this.a``obj`

由于在 的上下文中`obj.m()`执行，您可以使用内部函数访问。`m``a``a``this.a``m`

在 JavaScript 中，使用`this`是强制性的。

在 Java 或 C++ 等其他语言中，使用`this`是可选的。如果 Java / C++ 中没有局部变量，则`x`自动解析为，但 JavaScript 中没有。`this.x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-06T19:59:08.183

当你说哪个对象“拥有”一个函数时，我认为你有点困惑。“this”关键字就像一个变量，指向*调用*函数的任何对象。

例如，您可以编写如下函数：

> 函数 logThis(){ console.log(this.a); }

现在，您可以制作两个不同的对象：

> var objOne = { a: "我是存储在键 a 上的字符串", func: logThis }
> 
> var objTwo = { 函数：logThis }

请注意，这两个对象都有一个名为“func”的键，并且该键存储了“logThis”函数。这意味着 objOne.func 与 objTwo.func 相同；并且它们都与 logThis(){console.log(this.a)} 相同

现在，如果您调用 objOne.func()，它将记录“我是存储在键 a 处的字符串”调用 func 的对象是 objOne，这就是存储在 objOne.a 中的字符串

相比之下，如果您调用 objTwo.func()，您将得到“未定义”。那是因为 objTwo 是调用 func 的对象，而 objTwo 没有任何名为 a 的属性。

# pdf - 在golang中从html创建pdf

> ID：14923570
> 
> 赞同：36
> 
> 时间：2013-02-17T16:58:05.347
> 
> 标签：pdf, pdf-generation, go

如何从 Google Go 中的 HTML 输入创建 PDF 文件？如果还不可能，是否有任何旨在解决此问题的倡议？

我正在寻找像 php 中的 TCPDF 这样的解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-06-20T09:40:31.930

**gopdf**（[https://github.com/signintech/gopdf](https://github.com/signintech/gopdf)）呢？

看来您正在寻找。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-02-01T17:22:04.163

> 安装

`go get -u github.com/SebastiaanKlippert/go-wkhtmltopdf`

`go version go1.9.2 linux/amd64`

> 代码

```
 import (
        "fmt"
        "strings"
        wkhtml "github.com/SebastiaanKlippert/go-wkhtmltopdf"
    )  

      func main(){
                 pdfg, err :=  wkhtml.NewPDFGenerator()
               if err != nil{
                  return
              }
              htmlStr := `<html><body><h1 style="color:red;">This is an html
 from pdf to test color<h1><img src="http://api.qrserver.com/v1/create-qr-
code/?data=HelloWorld" alt="img" height="42" width="42"></img></body></html>`

              pdfg.AddPage(wkhtml.NewPageReader(strings.NewReader(htmlStr)))

              // Create PDF document in internal buffer
              err = pdfg.Create()
              if err != nil {
                  log.Fatal(err)
              }

               //Your Pdf Name
               err = pdfg.WriteFile("./Your_pdfname.pdf")
              if err != nil {
                  log.Fatal(err)
              }

              fmt.Println("Done")
        } 
```

上面的代码适用于在 golang 中使用适当的背景图像和嵌入式 Css 样式标签将 html 转换为 pdf

[检查回购](https://github.com/SebastiaanKlippert/go-wkhtmltopdf)

[请参阅拉取请求文档改进](https://github.com/SebastiaanKlippert/go-wkhtmltopdf/pull/12)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-24T06:21:14.160

还有这个包[wkhtmltopdf-go](https://github.com/jimmyw/wkhtmltopdf-go)，它使用 libwkhtmltox 库。我不确定它有多稳定。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-20T07:23:58.900

我不认为我理解你的要求。由于 HTML 是一种标记语言，它需要上下文来呈现（CSS 和屏幕大小）。我见过的现有实现通常在无头浏览器中打开页面并以这种方式创建 PDF。

就个人而言，我只会使用现有的包并从 Go 中取出。[这个](http://code.google.com/p/wkhtmltopdf/)看起来不错；甚至在[这个答案](https://stackoverflow.com/questions/3849441/html-to-pdf-with-webkit-transform)中推荐它。

如果你真的决定在 Go 中实现这一切，请查看[这个 WebKit 包装器](https://github.com/mattn/go-webkit)。我不确定你会用什么来生成 PDF，但至少这是一个开始。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-11T22:24:01.633

我正在创建一个替代库来以更简单的方式创建 PDF（[https://github.com/johnfercher/maroto](https://github.com/johnfercher/maroto)）。它使用**gofpdf**并有一个网格系统和一些组件，如*Bootstrap*。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-08-16T00:05:23.583

该功能`page.PrintToPDF()`效果很好。

这是一个将它与 chromedp ( `go get -u github.com/chromedp/chromedp`) 一起使用的示例：

```
import (
    "context"
    "fmt"
    "io/ioutil"
    "log"
    "net/http"
    "os"
    "time"

    "github.com/chromedp/cdproto/emulation"
    "github.com/chromedp/cdproto/page"
    "github.com/chromedp/chromedp"
)

func main() {
        taskCtx, cancel := chromedp.NewContext(
            context.Background(),
            chromedp.WithLogf(log.Printf),
        )
        defer cancel()
        var pdfBuffer []byte
        if err := chromedp.Run(taskCtx, pdfGrabber("https://www.wikipedia.org", "body", &pdfBuffer)); err != nil {
            log.Fatal(err)
        }
        if err := ioutil.WriteFile("coolsite.pdf", pdfBuffer, 0644); err != nil {
            log.Fatal(err)
        }
}

func pdfGrabber(url string, sel string, res *[]byte) chromedp.Tasks {

    start := time.Now()
    return chromedp.Tasks{
        emulation.SetUserAgentOverride("WebScraper 1.0"),
        chromedp.Navigate(url),
        // wait for footer element is visible (ie, page is loaded)
        // chromedp.ScrollIntoView(`footer`),
        chromedp.WaitVisible(`body`, chromedp.ByQuery),
        // chromedp.Text(`h1`, &res, chromedp.NodeVisible, chromedp.ByQuery),
        chromedp.ActionFunc(func(ctx context.Context) error {
            buf, _, err := page.PrintToPDF().WithPrintBackground(true).Do(ctx)
            if err != nil {
                return err
            }
            *res = buf
            //fmt.Printf("h1 contains: '%s'\n", res)
            fmt.Printf("\nTook: %f secs\n", time.Since(start).Seconds())
            return nil
        }),
    }
} 
```

上面将加载 wikipedia.org 在 chrome 中无头并等待 body 出现，然后将其保存为 pdf。

结果终端：

```
$ go run main.go
https://www.wikipedia.org
Scraping url now...

Took: 2.772797 secs 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-24T17:44:22.553

另一种选择是[雅典娜](https://github.com/arachnys/athenapdf)。它有一个用 Go 编写的微服务，也可以用作 CLI。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2021-04-17T15:02:18.410

另一个选项是[UniHTML](https://github.com/unidoc/unihtml)（基于容器的 API），它与[UniPDF](https://github.com/unidoc/unipdf)互操作，这对于创建基于 HTML 模板的 PDF 报告等很有用。

它在容器中使用了无头chrome引擎，因此呈现完美，并具有所有HTML功能。与 UniPDF 的结合带来了额外的优势，例如自动生成目录、大纲等。以及添加密码保护、添加 PDF 表单、数字签名等的能力。

要为磁盘上的 HTML 模板创建 PDF，可以通过以下方式完成：

```
package main

import (
    "fmt"
    "os"

    "github.com/unidoc/unihtml"
    "github.com/unidoc/unipdf/v3/common/license"
    "github.com/unidoc/unipdf/v3/creator"
)

func main() {
    // Set the UniDoc license.
    if err := license.SetMeteredKey("my api key goes here"); err != nil {
        fmt.Printf("Err: setting metered key failed: %v\n", err)
        os.Exit(1)
    }

    // Establish connection with the UniHTML Server.
    if err := unihtml.Connect(":8080"); err != nil {
        fmt.Printf("Err:  Connect failed: %v\n", err)
        os.Exit(1)
    }

    // Get new PDF Creator.
    c := creator.New()

    // AddTOC enables Table of Contents generation.
    c.AddTOC = true

    chapter := c.NewChapter("Points")

    // Read the content of the sample.html file and load it to the conversion.
    htmlDocument, err := unihtml.NewDocument("sample.html")
    if err != nil {
        fmt.Printf("Err: NewDocument failed: %v\n", err)
        os.Exit(1)
    }

    // Draw the html document file in the context of the creator.
    if err = chapter.Add(htmlDocument); err != nil {
        fmt.Printf("Err: Draw failed: %v\n", err)
        os.Exit(1)
    }

    if err = c.Draw(chapter); err != nil {
        fmt.Printf("Err: Draw failed: %v\n", err)
        os.Exit(1)
    }

    // Write the result file to PDF.
    if err = c.WriteToFile("sample.pdf"); err != nil {
        fmt.Printf("Err: %v\n", err)
        os.Exit(1)
    }
} 
```

我已经写了一篇 UniHTML [这里] 的介绍文章，如果需要更多信息 ( [https://www.unidoc.io/post/html-for-pdf-reports-in-go](https://www.unidoc.io/post/html-for-pdf-reports-in-go) )，它可能会很有用。

**披露**：我是 UniPDF 的原始开发者。

# c# - c#运算符重载用法

> ID：14923571
> 
> 赞同：1
> 
> 时间：2013-02-17T16:58:08.327
> 
> 标签：c#, overloading, operator-keyword

```
public static ListOfPeople operator +( ListOfPeople x, Person y)
    {
        ListOfPeople temp = new ListOfPeople(x);
        if(!temp.PeopleList.Contains(y))
        {
            temp.PeopleList.Add(y);
        }
        temp.SaveNeeded = true;
        return temp;
    } 
```

所以，我从来没有使用过运算符的重载功能，我试图弄清楚如何将我的类 (Person) 中的对象添加到我的 Collection 类 (ListOfPeople) 中。

ListOfPeople 包含一个属性`List<Person> PeopleList`；

我的困难在于如何在此方法中获取一个预先存在的 List 以添加一个新的 Person 。`ListOfPeople temp = new ListOfPeople(x);`

我在这一行有一个错误，因为我没有接受 ListOfPeople 参数的构造函数。如果我要成功，`ListOfPeople temp = new ListOfPeople();`那么 Temp 只会调用我的默认构造函数，我只是在其中创建一个新的空列表，并且这也不允许我添加到预先存在的列表中。

我只是不确定如何让“临时”实际引用我预先存在的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:07:06.257

使用如下：

```
public static ListOfPeople operator +( ListOfPeople x, Person y)
{
    ListOfPeople temp = x;
    if(!temp.PeopleList.Contains(y))
    {
        temp.PeopleList.Add(y);
    }
    temp.SaveNeeded = true;
    return temp;
}

public static ListOfPeople operator +( Person y, ListOfPeople x)
{
    ListOfPeople temp = x;
    if(!temp.PeopleList.Contains(y))
    {
        temp.PeopleList.Add(y);
    }
    temp.SaveNeeded = true;
    return temp;
} 
```

*   第一个允许您使用：`list = list + person`
*   2nd允许您使用：`list = person + list`

您可能还想重载`+=`运算符（非静态），以便您可以使用`list += person`

# 编辑

虽然我解决了提到的问题。但是，我同意其他人关于“+”操作数不可变的观点。

以下是对现有代码的更新（假设`ListOfPeople.PeopleList is List<Person>`）：

```
public static ListOfPeople operator +( ListOfPeople x, Person y)
{
    ListOfPeople temp = new ListOfPeople();
    temp.PeopleList.addRange(x);
    if(!temp.PeopleList.Contains(y))
    {
        temp.PeopleList.Add(y);
    }
    temp.SaveNeeded = true;
    return temp;
}

public static ListOfPeople operator +( Person y, ListOfPeople x)
{
    ListOfPeople temp = new ListOfPeople();
    temp.PeopleList.addRange(x);
    if(!temp.PeopleList.Contains(y))
    {
        temp.PeopleList.Add(y);
    }
    temp.SaveNeeded = true;
    return temp;
} 
```

# javascript - 在 click 函数条件语句中调用时函数值未定义

> ID：14923572
> 
> 赞同：0
> 
> 时间：2013-02-17T16:58:17.983
> 
> 标签：javascript, jquery, jquery-plugins

这是问题“<a href="https://stackoverflow.com/questions/14920322/jquery-output-to-console-sum-of-2-variables">jQuery output to console sum of 2 variables'的扩展.

我有以下功能：

```
function printSum() {
    console.log('Sum:' + (c.getBehaviour() + t.getBehaviour()));
} 
```

并希望根据`printSum()`click 函数中的值加载 HTML，如下所示：

```
$('#surname-help-label').click(function(e) {
    var helpText = $('#surname-help-text').html('loading&hellip;');

    if (printSum() >= 25) {
        helpText.load('help-text.html div:nth-of-type(2)');
    } else {
        helpText.load('help-text.html div:first');
        console.log('what do you get:' + printSum());
    };

    e.preventDefault();
}); 
```

我在该行中添加了`console.log('what do you get:' + printSum());`用于调试的目的，它返回的值`undefined`意味着该`else {}`块总是被调用。我该如何补救？

[完整代码 jsFiddle](http://jsfiddle.net/pf2PQ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:00:57.580

你没有重新调整任何东西。如果你不让你的函数返回你想要它返回的东西，那么它就不会返回你想要它返回的东西。

要让它返回想要你想要它返回，你需要让它返回你想要它返回的东西，这样它就会返回你想要它返回的东西，你就可以使用它返回的东西。

```
function printSum() {
    console.log('Sum:' + (c.getBehaviour() + t.getBehaviour()));
    return c.getBehaviour() + t.getBehaviour();
} 
```

[MDN`return`声明](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/return)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:08:54.460

您没有在 printsum 函数中返回任何内容。只需在 printsum 函数中的 console.log 之后写 return c.getbehaviour() + t.getbehaviour();

# php - 问题是设置 cron 作业

> ID：14923579
> 
> 赞同：0
> 
> 时间：2013-02-17T16:59:00.183
> 
> 标签：php, cron

我第一次尝试在我的 linux 服务器中设置 cron 作业。我想设置我的文件每 5 分钟运行一次。为此，我做了以下事情：

```
1\. login through cpanel
2\. Click Cron Jobs under Advance option.
3\. In Add New Cron Job, select every 5 minutes in Common Settings and in Command text box write down the code */5 * * * * wget http://www.forwardx.in/sri/test.php  > /dev/null 
4 Click on the Add New Cron Job button. 
```

但是我在 crontab 文件中收到类似“-”：1：bad 命令错误的错误，无法安装。

如何解决这个问题？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:01:51.737

我相信如果您从常用设置中选择时间，您只需要输入命令

`wget http://www.forwardx.in/sri/test.php`.

您也在输入时间安排。尝试省略计时部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:02:02.110

可能是 wget 未在路径中设置，因此请尝试使用完整路径。这应该是“/usr/bin/wget”而不是“wget”

# jquery - 向 jQuery Mobile 后退按钮添加 ID

> ID：14923580
> 
> 赞同：0
> 
> 时间：2013-02-17T16:59:03.277
> 
> 标签：jquery, jquery-mobile

我希望在 jQuery Mobile 中为自动生成的后退按钮添加一个 ID，以便我可以向其中添加自己的样式。

我想这可以通过在 DOM 中搜索任何带有“back”的 data-rel 然后附加一个 ID，例如“back-button”来完成，但是我似乎找不到正确的方法这个。

有人可以帮助我吗，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:13:18.380

你想要这样的东西：

现场 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/dgJzP/](http://jsfiddle.net/Gajotres/dgJzP/)

```
$(document).on('pagebeforeshow', '#second', function(){       
    $('[data-rel="back"]').attr('id','some-back-button');
    $('#some-back-button').find('span .ui-btn-text').html('Baaaaack');
}); 
```

# r - 使用 stata 打开使用 R 的`saveRDS`（序列化接口）保存的文件

> ID：14923581
> 
> 赞同：2
> 
> 时间：2013-02-17T16:59:17.473
> 
> 标签：r, stata

通常我更喜欢使用 保存我的 R 对象，`saveRDS`以便以后可以使用`df= readRDS(...)`. 有时我想在 stata 中做点什么。那么有没有办法打开`saveRDS`在stata中保存的文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T19:29:01.953

必须从 Stata 读取以 R 的二进制格式存储的变量，这表明您的数据管理策略不可靠。如果要读取多种格式的数据，则应使用非平台特定格式。这通常意味着基于文本的格式（[CSV](http://www.inside-r.org/r-doc/utils/read.table)或制表符分隔或[XML](http://www.inside-r.org/packages/cran/XML/docs/xmlTreeParse)或[JSON](http://www.inside-r.org/packages/cran/RJSONIO/docs/fromJSON)），或数据库，或记录良好的标准化二进制格式（[HDF5](http://master.bioconductor.org/packages/release/bioc/html/rhdf5.html)）。

要解决您的情况，您需要一个`resave`读取 RDS 文件并以新格式输出的函数。就像是

```
resave <- function(infile)
{
  x <- readRDS(infile)
  outfile <- sub("\\.rds$", "\\.csv", infile)
  write.csv(x, outfile)
} 
```

另一种可能的策略是根据需要转换文件`foreign::write.dta`。这在[StatLore 博客](https://statlore.wordpress.com/2013/01/21/how-to-call-r-from-stata/)上有所描述。如果您只是偶尔使用 Stata，这可能是一个更好的策略。

这个想法是你有一个重新保存文件的 R 代码批处理文件，然后你使用 Stata 的`shell`命令以批处理模式调用 R。

```
shell "<path to R>\R.exe" CMD BATCH resaveAsDta.R 
```

然后你可以`use`正常的 DTA 文件。

# python - 从 Celery 中的子任务访问父任务的参数

> ID：14923583
> 
> 赞同：2
> 
> 时间：2013-02-17T16:59:22.023
> 
> 标签：python, celery

是否可以从其子任务 Z 访问调用父任务 A 的参数？换句话说，当 Task Z 在链中被调用时，它能否以某种方式访问​​在 Task A 被触发时调用的参数*V ，**但该参数没有通过任务 A 和 Z 之间的任何中间节点传递*？如果是这样，怎么办？

使用带有 RabbitMQ 的 Celery 3.0 作为结果后端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:17:09.207

我将暂时用“不”来回答我自己的问题——希望比我更有知识的人会回来提供解决方案。

在仔细查看了 Celery 文档之后，我认为根本没有办法访问调用父任务的参数。根据[文档](http://docs.celeryproject.org/en/latest/userguide/tasks.html#states)：

> 在其生命周期中，任务将通过几种可能的状态进行转换，并且每个状态都可能附加任意元数据。当一个任务进入一个新状态时，之前的状态就会被遗忘。

任务可以处于以下状态之一：Pending、Started、Success、Failure、Retry 和 Revoked。对于我的场景，这里的关键似乎是 Success 状态。我想要做的是，对于给定的成功任务，找到（其中一个）父任务的 id，然后查看调用父任务的参数。但是，根据文档，SUCCESS 状态的任务将不包含此类数据（因为父任务本身已经成功，只要它产生了子任务）：

> SUCCESS 任务已成功执行。
> 
> metadata：result 包含任务的返回值。传播：是 准备好：是

换句话说，这里似乎有一个硬性限制。即使我可以找到我感兴趣的父任务的 ID，因为它已成功执行，根据定义，我将无法访问调用它的参数，因为它只包含返回值（不再是它的论据）。

# node.js - node.js 在执行'n'异步回调后执行函数

> ID：14923587
> 
> 赞同：5
> 
> 时间：2013-02-17T16:59:44.327
> 
> 标签：node.js, events, asynchronous, callback

*在执行“ n* ”异步函数 后，我不知道如何执行回调，例如：

```
var after4AsyncOperation = function(){
    //do something...
}
process.nextTick(function(){
    //do stuff
})
process.nextTick(function(){
    //do stuff
})
process.nextTick(function(){
    //do stuff
})
process.nextTick(function(){
    //do stuff
}) 
```

有没有一种方法可以`after4AsyncOperation`在 4 个异步函数之后执行，而不必在另一个函数中编写函数，例如：

```
 var after4AsyncOperation = function(){
    //do something...
}
process.nextTick(function(){
    //do stuff
    process.nextTick(function(){
        //do stuff
        process.nextTick(function(){
            //do stuff
            process.nextTick(function(){
                //do stuff
                after4Asyncoperation();
            })
        })
    })
}) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T18:35:26.073

我建议使用诸如[Caolan 的 Async 之](https://github.com/caolan/async)类的异步库。然后，您可以使用`async.parallel`、`async.series`或`async.auto`。 `auto`是最灵活的，但比其他的要慢一些；之间进行选择，`parallel`并且`series`需要有关您尝试执行的操作的更多信息-您的第一个示例将是并行操作，但您的第二个示例是串联的。

但是，如果您不想使用库，则可以编写自定义内容。我会这样做：

```
var numFuncs = 4;
var callback = function(){
  numFuncs--;
  if(numFuncs == 0) {
    after4AsyncOperation();
  }
}
var after4AsyncOperation = function(){
    //do something...
}
process.nextTick(function(){
    //do stuff
    callback();
})
process.nextTick(function(){
    //do stuff
    callback();
})
process.nextTick(function(){
    //do stuff
    callback();
})
process.nextTick(function(){
    //do stuff
    callback();
}) 
```

这通过从我们期望回调被调用的次数（ ）开始倒计时`numFuncs`并且仅`after4AsyncOperation`在我们被回调正确的次数时才调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T17:20:24.520

您可以利用具有此功能和许多其他不错功能的出色[异步库。](https://github.com/caolan/async)要具体完成您想要做的事情，您可以使用系列：

[https://github.com/caolan/async#series](https://github.com/caolan/async#series)

或并行：

[https://github.com/caolan/async#parallel](https://github.com/caolan/async#parallel)

两者的区别在于 series 一个接一个地运行所有的函数，而 parallel 同时运行所有的函数。在任何一种情况下，它们都完成后会有一个回调，这似乎是您想要完成的。

# objective-c - 在Objective-C中，我如何对除子类之外的所有人隐藏方法（不是属性）

> ID：14923589
> 
> 赞同：2
> 
> 时间：2013-02-17T16:59:57.290
> 
> 标签：objective-c

我正在寻找类似于`@protected`for 方法的东西。`@protected`似乎只适用于`@properties`（setter 和 getter）。有没有办法让常规方法也有类似的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T17:54:22.787

根据您的评论，我假设您正在谈论从编译器中隐藏。这确实是可能的，但可能有点麻烦。另一方面，从运行时隐藏是不可能的，如果有人**真的想**访问您的方法，他们会的。

要对编译器隐藏，您应该**在单独的头文件中**定义一个类扩展，如下所示：

```
#import "MyClass.h"

@interface MyClass ()

@property (nonatomic, strong) NSObject* protectedObject;
-(void) protectedMethod;

@end 
```

您可以调用标题 MyClass+Internal.h 如果您正在构建库，[请将标题可见性设置为私有](https://stackoverflow.com/questions/7439192/xcode-copy-headers-public-vs-private-vs-project/8016333)

现在你所要做的就是在子类实现文件中导入你的私有头文件（或者你可能想要在内部使用这些方法的任何地方）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:14:16.917

Objective-C 中没有每个方法的访问控制。

您可以将 API 拆分为多个类别，并将它们放入不同的头文件中，以实现某种咨询访问控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T17:52:16.680

我已经看到通过 .h 文件中的命名（而不是匿名）类别在野外实现了这一点：

```
//MyClass.h:

@interface MyClass : NSObject
  /*Public stuff...*/
@end

@interface MyClass (protected)
  /*Protected stuff...*/
@end 
```

但正如其他人所提到的，这个命名类别实际上只是提供一点提示的一种方式——它依赖于开发人员查看 .h 文件而不是文档。它没有做任何神奇的事情，也没有实现任何真正的访问控制。

同样关于 ObjC 中的受保护方法的主题，请记住 Cocoa 设置为支持组合和委托而不是继承。如果你发现自己工作太努力，你可能会逆流而上。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-17T17:03:46.703

> 您既不能声明受保护的方法*，也*不能声明私有的方法。如上所述，将方法声明为“私有”只是伪造，并不能真正阻止任何事情。Objective-C 的动态特性使得实现方法的访问控制成为不可能。（您可以通过大量修改编译器或运行时来做到这一点，但会严重影响速度，但由于明显的原因，这没有完成。）

来源：

[Objective-C 中的受保护方法](https://stackoverflow.com/questions/3725857/protected-methods-in-objective-c)

[http://objectmix.com/c/177901-methods-access-modifiers-objective-c.html](http://objectmix.com/c/177901-methods-access-modifiers-objective-c.html)

您显然可以通过一些变通方法来*模拟*此功能，但我怀疑这是一种好的风格。

# java - Spring Hibernate 事务开销

> ID：14923590
> 
> 赞同：2
> 
> 时间：2013-02-17T17:00:01.590
> 
> 标签：java, spring, hibernate, transactions

将 Hibernate 3 升级到 Hibernate 4 后，我被迫从基于 spring 的应用程序中删除 HibernateTemplate。为了使 Hibernate 会话可用，我必须使用比以前更一致的事务标记。这需要我向我的服务层添加事务建议，并密切关注执行只读数据库操作的后台线程。

我有两个数据源（我必须使用两个不同的数据库），第一个用于几乎每个应用程序请求，第二个仅用于特殊（例如 1000 个）请求。最简单的事情是使用方面将两种请求类型包装在两个数据库的事务中（我不必确定哪些请求需要哪些数据库），但我想知道其中涉及的开销。实际的数据库连接获取和事务逻辑（如提交等）是否推迟到执行实际查询？还是我的方法会导致很多（实际上未使用的）事务被启动和提交？

澄清一下，我有两个数据源、两个事务管理器、两个（相同的）“inServiceLayer”切入点的两个事务建议。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:42:33.497

您对“使用方面将两种请求类型包装在事务中”到底是什么意思？您的问题表明您的应用程序没有正确分层。您应该有某种数据访问层，其中事务逻辑以声明方式 ( `@Transactional`) 或编程方式 ( `TransactionTemplate`) 应用。这意味着未命中数据库的请求将永远不会打开事务。

**编辑：**
如果不能选择适当的分层，您肯定会产生事务处理的开销。Spring 中用于事务划分的标准工具没有实现您想要的这种“惰性/按需”事务初始化。证明这一点的最简单方法是在您使用的事务管理器上启用调试/跟踪级别日志记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:12:15.927

我首先没有考虑开销，我在这里看到的最大问题是您的方法存在根本缺陷。假设某些逻辑可以访问 DB-1 和 DB-2，并且在您提交到 DB-1 之后，当您尝试提交到 DB-2 时，发生了一些问题，需要滚动到 DB-2 的 txn返回，您将在 DB-1 和 DB-2 中获得不一致的数据，因为 DB-1 中的事务已经提交。

您的案例应该更好地利用分布式事务（我希望您的两个数据库都支持 XA），因此您在 Spring 切入点中只有 1 个（分布式）事务要处理。而且，我相信（虽然我不确定）正常的 XA 事务不会盲目地在所有资源中创建底层事务（即底层 txn 仅在需要时创建）。

因此，使用分布式 txn 将为您提供更正确、具体、可维护且（可能）资源浪费更少的实现。

进一步研究您的容器的相关设置。

# php - Backbone + RequireJS：使用 RequireJS 加载的 HTML 文件被解释为 JS 文件

> ID：14923592
> 
> 赞同：0
> 
> 时间：2013-02-17T17:00:15.940
> 
> 标签：php, javascript, apache, backbone.js, requirejs

我想推出 Backbone.js + Require.js。我可以很好地加载模块。但是当我尝试使用文本加载我的 .html 文件时！插件（text.js），我得到这些错误：

***资源解释为脚本，但使用 MIME 类型 text/html 传输：“ [https://host.net/templates/login.html](https://host.net/templates/login.html) ”。需要.js:1843***

***Uncaught SyntaxError: Unexpected token < login.html:1***

***未捕获的类型错误：无法调用未定义的 underscore.js:1130 的方法“替换”***

这是我正在使用的规格：

***浏览器***：铬

***服务器端***：带 Slim 的 PHP

***机器***：带有 bitnami AMI 的 AWS 微实例 // 这些东西附带了生产默认设置，因此 Apache 配置可能不正确，或者 php.ini 不正确。我只是不知道是什么。

**目录结构：**

```
/
   dev/    // Webroot: Behind basic_auth for dev reasons
       web/
           index.php    // Starts up the Slim router and PHP backend 
               app/
                   app.html    // The entry point for our SPA, data-main defined here
       js/   // At root for module accessibility in case of reuse
           apps/
           app/
               main.js  // Here we do require.config and bootstrapping
           app.js   
           router.js
           text.js
           modules/
               models/
                   login.js
               views/
                   login.js
           lib/
                   backbone/
                   backbone.js
               jquery/
                   jquery.js
               require/
               require.js
               underscore/
               underscore.js
       templates/   // Also at root for access to reuseable markup, such as login.html
        login.html 
```

**这是我认为相关的一些代码：**

*/js/apps/app/main.js*

```
requirejs.config({
 baseUrl: '/js/apps/app',

  shim: {
    'backbone' : {
      deps: ['underscore', 'jquery'],
      exports: 'Backbone'
    },
    'underscore' : {
      exports: '_'
    },
    'jquery' : {
      exports: '$'
    },
    'backbone.ajaxcommands' : {
      deps : ['backbone', 'underscore', 'jquery'],
    }
  },

  paths: {
    jquery:     'lib/jquery/jquery-1.9.1.min',
    underscore: 'lib/underscore/underscore',
    backbone:   'lib/backbone/backbone-min'
  },

  config: {
    text: {
      useXhr: function (url, protocol, hostname, port)
      {
        protocol = 'https';
  //      return true; 
      }
    }
  }
});
require(['app'],function(App){
    App.initialize(); 
    App.start(); 
  }
); 
```

*/js/apps/app/modules/views/login.js*

```
define([
  'backbone',
  'underscore',
  'modules/views/login',
  'text!/templates/login.html'
], function(Backbone, _, Login, loginTemplate){
  var LoginView = Backbone.View.extend({
    el: $("#login-form"),

    events: {
      "click #login": "login"
    },

    template: _.template(loginTemplate),

    initialize: function(){
      var self = this; 

      this.username = $("#username"); 
      this.password = $("#password"); 

      this.username.change(function(e){
        self.model.set({username: $(e.currentTarget).val()});
      }); 

      this.password.change(function(e){
        self.model.set({password: $(e.currentTarget).val()}); 
      });

    },

    login: function(){
      var user= this.model.get('username'); 
      var pword= this.model.get('password'); 
      if(this.model.save() == false)
      {
        console.log("We got issues loggin' in"); 
      }
      else
      {
        console.log("We should have cookies now"); 
      }
    }

    //render: function(){
    //  this.$el.append(this.template); 
    //}
  });
  return LoginView; 
}); 
```

*/templates/login.html*

```
`<div>hi</div>` 
```

**努力寻找解决方案：** 当我查看 Chrome 调试器时，在“网络”选项卡下，我看到确实已检索到 login.html，但 chrome 认为它是一个 JS 文件。

我使用断点单步执行代码，发现在 Require.js 1843 中，该行上的节点对象有一个名为“outerHtml”的属性，该属性等于带有一堆属性的“标签”。那么也许它正在将我的 html 包装在标签中？当我查看调试器网络选项卡中的预览选项卡时，我确实看到了标记。如果 login.html 具有有效的 js 代码，那么我不会收到语法错误。我仍然收到 underscore.js 错误，因为它是格式错误的 html。

我已经尝试过这些解决方案： [Chrome 说“资源解释为脚本，但使用 MIME 类型文本/纯文本传输。”，给出了什么？](https://stackoverflow.com/questions/3467404/chrome-says-resource-interpreted-as-script-but-transferred-with-mime-type-text)

移动项目下的 js/模板代码（使路径相对而不是绝对）。一切似乎都正常，但 text.js 会将 .js 附加到 login.html 的末尾，所以我得到了 404 未找到。这显然是因为跨域访问？

使用 require.config 的各种配置选项，包括设置 baseURL

不幸的是，我忘记了许多其他调整。这真是令人沮丧。

感谢您的时间。

**编辑：** 我已经放置了一个独立的，它表现出我在我的[驱动器](https://docs.google.com/folder/d/0BynHu_jfiEEAVV9JVWQ1ODFrZTg/edit?usp=sharing)上看到的相同行为。文件结构应为：

```
/
    index.html //This can actually be anywhere visible on the web
    so-js/
        ...
    so-templates/
        ... 
```

请注意，so-js/ 和 so-templates 在 webroot 中，索引文件可以在任何地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T00:47:42.930

问题是由这一行引起的：

```
 config: {
    text: {
      useXhr: function (url, protocol, hostname, port)
      {
        protocol = 'https';
      //  return true; 
      }
    }
  } 
```

它覆盖了 text! 的 useXhr 方法，该方法旨在返回一个布尔值以确定文本文件的 Javascript 版本是否可用。如果是，它将返回 false，否则返回 true。

因为您没有返回任何内容并且 undefined 是虚假的，所以这意味着它应该将其加载到 <script> 标记中，这就是您收到 MIME 类型警告和后续错误的原因。

如果删除整个配置属性，错误就会消失，并且 loginTemplate 会填充到 login.html 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:54:01.310

您也可以使用[grunt](http://gruntjs.com/)从 html 模板生成模块

像这样：

模板/hello.html

```
<div>hello world!</div> 
```

至

js/模板/hello.js

```
define('templates/hello', '<div>hello world!</div>') 
```

**咕噜任务配置：**

```
function converTemplate(srcDir){
    return function(){
        grunt.file.recurse(srcDir, function(abspath, rootdir, subdir, filename){
            if(/^.*\.html$/.test(filename)){
                if(subdir){
                    subdir = subdir.replace(/\\/g, '/');
                }

                var content = grunt.file.read(abspath),
                    targetPath = 'js/templates' + '/' + (subdir ? subdir + '/': '') + filename.replace('.html', '.js'),
                    moduleName = 'templates/' + (subdir ? subdir + '/': '') + filename.replace('.html', '');
                content = content.replace(/[ \t]*\r?\n[ \t]*/g, '');
                content = content.replace(/'/g, '\\\'');
                content = "define('"+moduleName+"', [], '"+content+"');";
                subdir && grunt.file.mkdir('js/templates/' + (subdir ? subdir + '/': ''));
                grunt.file.write(targetPath, content);
            }
        });
    };
}

grunt.registerTask('template', 'conver template', converTemplate('templates')); 
```

**目录结构：**

```
templates/
    hello.html
js/
    templates/
        hello.js 
```

# java - Java：使用 DataOutputStream 写入套接字变慢，然后停止

> ID：14923598
> 
> 赞同：0
> 
> 时间：2013-02-17T17:00:47.143
> 
> 标签：java, sockets, buffer, send

```
while (true) {
    loc = getLocationOnScreen();

    out.writeLong((long)loc.getX());
    out.writeLong((long)loc.getY());
    out.flush();

    i++;
    System.out.println(i);

} 
```

这段代码会愉快地运行大约 3 秒钟，然后变慢，然后停止。

`i`结束于约`16491`，永远不会继续增加。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:39:15.397

它变慢了，因为在接收端，在读取下一个值之前，您可能正在使用您发送的值执行长时间任务。所以对方读取数据的速率小于你向对方发送数据的速率。这会不断填充另一端的接收缓冲区并在发送端发送缓冲区。最终，当两个缓冲区都被完全填满时，数据的传输就会停止。

# objective-c - CALayer NSImage 内容没有选择正确的表示

> ID：14923601
> 
> 赞同：4
> 
> 时间：2013-02-17T17:01:02.563
> 
> 标签：objective-c, macos, core-animation, calayer, nsimage

我正在设置`NSImages`几个`CALayers`. 所有这些图像都有 4 次重复，**1x、2x、5x 和 10x**。当我设置 contentsScale 时，其中 3 个图像的缩放比例似乎很好，但我的视图改变时，`backingScaleFactor`其中一个似乎总是选择**1x**表示，无论我做什么。这是我登录到控制台的图像：

```
<NSImage 0x1019cea60 Size={20, 24} Reps=(
    "NSBitmapImageRep 0x101a0db60 Size={20, 24} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=20x24 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a0c8e0",
    "NSBitmapImageRep 0x101a0ec90 Size={20, 24} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=40x48 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a0dbd0",
    "NSBitmapImageRep 0x101a0fdb0 Size={20, 24} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=100x120 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a0ed00",
    "NSBitmapImageRep 0x101a10ef0 Size={20, 24} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=200x240 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a0fcb0"
)>
<NSImage 0x1001faa90 Size={28, 320} Reps=(
    "NSBitmapImageRep 0x101a06240 Size={28, 320} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=28x320 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a05230",
    "NSBitmapImageRep 0x101a07370 Size={28, 320} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=56x640 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a062d0",
    "NSBitmapImageRep 0x101a08490 Size={28, 320} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=140x1600 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a07400",
    "NSBitmapImageRep 0x101a095c0 Size={28, 320} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=280x3200 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a08390"
)>
<NSImage 0x10052e790 Size={28, 40} Reps=(
    "NSBitmapImageRep 0x101a01d10 Size={28, 40} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=28x40 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a005d0",
    "NSBitmapImageRep 0x101a02de0 Size={28, 40} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=56x80 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a01da0",
    "NSBitmapImageRep 0x101a03f00 Size={28, 40} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=140x200 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a02fa0",
    "NSBitmapImageRep 0x101a05080 Size={28, 40} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=280x400 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a040c0"
)>
<NSImage 0x101bbfc40 Size={28, 600} Reps=(
    "NSBitmapImageRep 0x101a0a760 Size={28, 600} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=28x600 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a094f0",
    "NSBitmapImageRep 0x101a0b890 Size={28, 600} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=56x1200 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a0a7f0",
    "NSBitmapImageRep 0x101a0ba60 Size={28, 600} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=140x3000 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a0ab10",
    "NSBitmapImageRep 0x101a0c9b0 Size={28, 600} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=280x6000 Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x101a0b920"
)> 
```

第三个 (28 x 40) 始终以 1x 绘制。这是我用来设置比例因子的代码：

```
- (void)viewDidChangeBackingProperties {
    [super viewDidChangeBackingProperties];
    self.layer.contentsScale       = self.window.backingScaleFactor;
    self.otherLayer.contentsScale  = self.window.backingScaleFactor;

    self.otherLayer.contents = self.image;
} 
```

我再次将图层内容设置为图像，因为在[这个问题](https://stackoverflow.com/questions/11188500/automatic-scaling-of-multipage-tiff-nsimage-in-a-calayer)中确定了`CALayer`选择绘制时间的最佳表示，`NSImage`并且需要再次设置。

我在所有图像上运行了新`-recommendedLayerContentsScale:`方法，当给定 2.0 时，它们都返回 2.0，除了没有正确缩放的图像。

编辑：我将损坏的图像写入一个文件，然后在另一个应用程序中打开一个新`NSImage`的 -`initWithContentsOfFile`在另一个应用程序中，我把它放在一个文件中`NSImageView`，问题仍然存在！它适用于其中一个正在工作的图像。显然，Apple 的图像选择代码有问题。

# visual-studio-2010 - 无法打开 .cd 文件

> ID：14923602
> 
> 赞同：3
> 
> 时间：2013-02-17T17:01:10.833
> 
> 标签：visual-studio-2010, class-diagram

我在 visula studio 2010 中创建了一个类图，并以 .cd 扩展名将其保存在桌面上。重新启动系统后，当我再次尝试打开文件时，出现此错误...“无法打开文件。类图只能添加到包含源代码的项目中”。

我尝试打开与之关联的项目，但由于在重新启动系统之前我没有编写源代码，所以每次我打开 .cd 扩展类图时，我都无法查看我创建的图表，而是我可以看到查看没有任何关联、方法或属性的图表。

我尝试用谷歌搜索它，但无法得到令人满意的解决方案。请帮助我查看文档的创建方式。我需要将此图包含在文档中。

# image - 我们可以在 TGIFImage delphi 组件中停止动画吗？

> ID：14923603
> 
> 赞同：1
> 
> 时间：2013-02-17T17:01:14.657
> 
> 标签：image, delphi, image-processing, delphi-7, vcl

有时我想用动画运行一次或两次 gif 图像，然后停止它，有可能这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:05:12.260

动画由控件的[`Animate`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Imaging.GIFImg.TGIFImage.Animate)属性`TGIFImage`控制。将其设置`True`为动画，并将其设置`False`为停止动画。

还有[`AnimateLoop`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Imaging.GIFImg.TGIFImage.AnimateLoop)物业。如果是这样，`True`那么动画将无限循环。否则它运行一次然后停止。如果你想运行一次动画然后设置`AnimateLoop`为`False`然后设置`Animate`为`True`。

最后你有这个[`OnLoop`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Imaging.GIFImg.TGIFImage.OnLoop)事件。每次循环动画循环回到开始时都会触发。因此，如果您想显示动画两次或更多次，则需要设置`AnimateLoop`为`True`然后计算`OnLoop`处理程序中的循环。

# css - CSS 两个 div 影响彼此的孩子

> ID：14923605
> 
> 赞同：1
> 
> 时间：2013-02-17T17:01:20.977
> 
> 标签：css

我的网站上有一个`.logo`div，其中包含`.icon`和`.text`. 它还包含`.links`，它位于实际徽标图像的下方，`.text`但不是实际徽标图像的一部分。两者`.icon`都有`.text`孩子`.image`，`.image-hover`我用它来制作背景图像淡入淡出效果（用于徽标）。

HTML：

```
<div class="logo">
    <div class="icon"><span class="image"></span><span class="image-hover"></span></div>
    <div class="text"><span class="image"></span><span class="image-hover"></span></div>
    <div class="links">Links</div>
</div> 
```

CSS：

```
.icon:hover .image {
    opacity: 0;
}
// opposite for .image-hover

.text:hover .image {
    opacity: 0;
}
// opposite for .image-hover 
```

问题是图标和文本是独立的，使它看起来相当难看。我不想`.links`影响（所以`.logo:hover`不能使用）。是否有可能产生`.icon:hover`影响`.text .image`，反之亦然？

[http://jsfiddle.net/7kj7G/](http://jsfiddle.net/7kj7G/)

**编辑** 我已经尝试过 JSW189 的建议。两者`.links`都在下面`.text`并且`.icon`高度相同。`.text`如果我尝试将它们包装起来，盒子只有`.icon`.

**编辑** 似乎 JSW189 的建议的问题只是 .icon 的 z-index 使盒子更小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:05:46.840

你可以换行`.icon`和 . `text`在另一个 div 中，并使用该 div 的`:hover`伪类。这样，`:hover`当用户将鼠标悬停在`.icon`或上时，所有样式都会出现`.text`。

HTML：

```
<div class="logo">
    <div class="wrap-icon-and-text">
        <div class="icon"><span class="image"></span><span class="image-hover"></span></div>
        <div class="text"><span class="image"></span><span class="image-hover"></span></div>
    </div>
    <div class="links">Links</div>
</div> 
```

CSS：

```
.wrap-icon-and-text:hover {
    /* styles here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:18:30.260

```
<div class="logo">
   <div class="icon"><span class="image"></span><span class="image-hover"></span></div>
   <div class="text"><span class="image"></span><span class="image-hover"></span></div>
   <div class="links">Links</div>
</div> 
```

选择器在悬停时影响`.icon .image`AND`.text .image`

```
.logo:hover .icon .image
{
    opacity: 0;
}

.logo:hover .text .image
{
    opacity: 0;
} 
```

# mysql - MySQL 按 IN 数组排序

> ID：14923609
> 
> 赞同：5
> 
> 时间：2013-02-17T17:01:40.260
> 
> 标签：mysql, sql

我有一个这样的 MySQL 脚本：`SELECT id, name FROM users WHERE id IN (6,4,34)`

IN(...) 数组中的序列非常重要。是否可以按照给定的顺序获取它们？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-17T17:10:27.547

您可以使用[MySQL`FIELD`功能](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)使其保持紧凑；

```
SELECT id, name 
FROM users 
WHERE id IN (6, 4, 34)
ORDER BY FIELD(id, 6, 4, 34); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T17:11:04.363

尝试

```
SELECT id, name FROM users WHERE id IN (6,4,34) order by FIELD(id,6,4,34) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T17:05:19.803

您可以在 ORDER BY 子句中使用任何表达式，包括“CASE”：

```
ORDER BY CASE id 
  WHEN 6 THEN 1 
  WHEN 4 THEN 2 
  WHEN 34 THEN 3 
END ASC 
```

如果您的列表来自应用程序编程层，您可以使用以下代码构建它（此处为 PHP）：

```
$sortVal = 1;
foreach($ids as $id_val) {
  $cases[] = sprintf('WHEN %i THEN %i', $id_val, $sortVal++);
}
$order_by = 'ORDER BY CASE id ' . implode($cases) . ' END ASC'; 
```

但是，我会提到约阿希姆的回答非常优雅:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-28T20:36:35.567

基于 Chris Trahey 回答的完整示例。

```
$ids = array("table1",  "table2", "table3");

$sortVal = 1;
foreach ($ids as $id_val) {
    $cases[] = sprintf("WHEN '%s' THEN %u ", $id_val, $sortVal++);
}    
$order_by = 'ORDER BY CASE `tableName` ' . implode($cases) . ' END ASC';    

$result = mysqli_query( $con, "
        SELECT DISTINCT tableName 
        FROM `table` 
        $order_by"); 
```

# svn - 当托管它的 Windows 服务器不再可用时，如何移动 Tortoise SVN 存储库

> ID：14923612
> 
> 赞同：2
> 
> 时间：2013-02-17T17:01:57.137
> 
> 标签：svn, tortoisesvn, visualsvn, visualsvn-server

我的开发项目使用 VisualSVN Server v 1.1 来管理我的 Tortoise SVN 存储库。托管它们的 Windows 服务器变得不可用，我被迫使用 ISP 的恢复应用程序将源数据拉到另一台服务器。我采取了以下步骤。

1.  将文件夹存储库和 svnrepos 从旧服务器复制到新服务器。

2.  我在新服务器上安装了 Visual SVN。安装时，我告诉应用程序有关存储库文件夹的信息，希望它能神奇地弄清楚发生了什么（关于魔法的有趣事情，因为我们都知道它不存在）。

3.  我更新了子域的 dns 以指向新服务器的 ip。

4.  现在，当我打开 visual svn 时，我确实看到了折叠、用户和组（这里有点神奇）。但不幸的是，所有存储库在打开时都显示错误“预期 FS 格式 '2'；找到格式 '3'”

所以问题是，如何在不破坏文件和文件夹的情况下修复混乱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:28:02.220

听起来[存储库的格式与](https://serverfault.com/questions/354855/subversion-how-to-tell-the-format-of-an-existing-repository)此版本的服务器所期望的不同。Subversion 基本上对存储库有两种不同的内部表示形式 - BDB（现在已弃用）和 FSFS（一段时间以来一直是现在存储库的默认值）。我怀疑旧服务器上的版本使用了 BDB，而您现在使用的服务器无法应对。

我建议最好的做法是首先尝试尽可能接近地复制旧服务器。您提到 VisualSVN 服务器 v1.1 - 这是您最初拥有的还是现在使用的？尝试安装您在旧服务器上运行的相同版本的 VisualSVN。如果这无法读取存储库格式，那么您可能需要安装一个额外的插件。如果原始服务器是不同的操作系统，则使用该操作系统设置机器（如果它是 linux 服务器，则尝试使用 linux 安装磁盘创建虚拟机）。

一旦你有一个可以识别数据格式的服务器实例，做一个[svnadmin 转储](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.dump.html)，它将以可移植格式创建 SVN 数据的备份。然后，您可以将服务器更新到最新版本的 SVN 或转移到将成为实际服务器的机器（例如，如果您必须使用 VM 来获取数据）。然后，您可以使用[svnadmin load](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.load.html)导入备份。

请注意，如果您设置了任何挂钩（例如 precommit 挂钩），那么这些挂钩不会保存在 中`svnadmin dump`，因此您需要手动复制这些挂钩。配置文件和权限数据也是如此。

# android - 在android中将声音加载到soundpool loader有限制吗？

> ID：14923618
> 
> 赞同：0
> 
> 时间：2013-02-17T17:02:37.703
> 
> 标签：android, soundpool

我创建了一个应用程序，它涉及从原始播放大约 500 个 ogg 文件（每个文件大约 20 到 30kb），声音在需要时被触发。我正在使用声音池。如果我向原始文件夹添加超过 475 个 ogg 文件的声音。将声音加载到声音池加载程序时，应用程序会死机。给出堆错误。还有其他媒体播放器或声音池的其他服务吗？？？

声音池是否有加载声音的限制？

让我知道 ！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-07T08:17:40.307

对于寻找这个问题的更多人，

尝试使用[asynctask](https://developer.android.com/reference/android/os/AsyncTask.html)加载声音。

使用 SoundPool 加载声音的示例：

```
private class LoadSound extends AsyncTask<Void, Integer, String> {

    protected void onPreExecute() {
        // something before starting to load sounds
    }

    protected String doInBackground(Void... arg0) {
        // actually loading sounds
        for (int i = 0; i < sounds.length; i++) {
            soundPoolId[i] = soundPool.load(context, soundResId, 1);
        }

        return "You are at PostExecute";
    }

    protected void onProgressUpdate(Integer... a) {
        // update ui like loaded # sounds
    }

    protected void onPostExecute(String result) {
        // something after loading all sounds
    }
} 
```

# c# - 每秒刷新一次文本框我想显示数字时钟（Windows 应用程序）

> ID：14923621
> 
> 赞同：1
> 
> 时间：2013-02-17T17:03:22.153
> 
> 标签：c#, xml, windows-phone-7, window

C# 代码

```
TextTime.Text = DateTime.Now.ToString(); 
```

想要每秒刷新这个文本框

或显示任何想法的数字时钟

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T17:10:58.087

您可以使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/ms615945(v=vs.95).aspx)：

```
var timer = new DispatcherTimer
{
    Interval = TimeSpan.FromSeconds(1.0)
};
timer.Tick += (o, e) =>
{
    TextTime.Text = DateTime.Now.ToString();
};
timer.Start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T17:07:13.707

最简单的方法是向您的应用程序添加一个计时器，并按如下所示进行操作：

表单加载：

```
private void Form1_Load(object sender, EventArgs e) {
   txtdate.Text = DateTime.Now.ToString(("dddd" + ("," + "MM-dd-yyyy")));
   Timer1.Interval = 1000;
   Timer1.Enabled = true;
} 
```

定时器滴答：

```
private void Timer1_Tick(object sender, EventArgs e) {
   txtTime.Text = DateTime.Now.ToString("HH:mm:ss");
} 
```

# ios - UIScrollView 滚动后 UITableView contentOffset 重置

> ID：14923622
> 
> 赞同：0
> 
> 时间：2013-02-17T17:03:24.130
> 
> 标签：ios, uitableview, uiscrollview

我有一个 UIScrollView，我想在我的 tableView 上方。我把它作为我的 tableview 的子视图 - 当它被添加时，tableview 使用 tableView 的 contentOffset 向下滚动到相关部分。当滚动视图滚动时，tableView 滚动回顶部。

我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:29:26.457

您必须将 UIScrollView 的实例添加为 tableView 单元格的子视图。例如

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

return 30;}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

if (indexPath.row == 15) {
    return 200;
}
return 44; }

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *cellIdentifier = @"Cell";

UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];

if (indexPath.row == 15) {

    UIScrollView *scroll = [[[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 200)] autorelease];
    scroll.backgroundColor = [UIColor greenColor];
    scroll.contentSize = CGSizeMake(self.view.frame.size.width, 500);
    [cell addSubview:scroll];
}

return cell; } 
```

然后可以在viewDidLoad中设置tableView的contentOffset

```
- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
self.tableView.contentOffset = CGPointMake(0, 400); } 
```

你也可以通过继承 UITableViewCell 来创建带有 scrollView 的自定义单元格。[在本教程](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)中了解如何自定义 tableView 单元格。

# php - 为什么我的闪信不显示？(蛋糕PHP 2.0)

> ID：14923624
> 
> 赞同：4
> 
> 时间：2013-02-17T17:03:38.790
> 
> 标签：php, cakephp, cakephp-2.0

在 AppController 中：

```
public $helpers=array("Session","Html","Form");
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'MainPages', 'action' => 'home'),
        'logoutRedirect' => array('controller' => 'MainPages', 'action' => 'front')
    )
); 
```

在 MainPagesController 中：

```
public function front()
{

    $this->Session->setFlash('Your stuff has been saved.');
    debug($this->Session->read('Message'));
    //etc... 
```

在默认布局中 (default.ctp)

```
<div id="content">
    <?php echo "Flash:" ?>
    <?php echo $this->Session->flash(); ?> 
```

正确的闪存消息显示在调试中，但不在视图中。我错过了什么？PS这不是因为？>之后的空间。

**编辑：我发现 CakePHP 出于某种原因在会话组件之前调用了会话助手。仍在试图弄清楚如何解决它。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-24T10:42:25.823

创建 Flash 消息的简单方法是在 app/view/element 目录中创建它们的 ctp 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:18:03.917

```
 My setflash works in this way..
    Keep this in the App controller

    function setFlash($message, $type = 'blue') {
           //what ever the color you need..
            $arr = array('red' => 'red', 'green' => 'green', 'yellow' => 'yellow', 'gray' => 'gray', 'blue' => 'blue');
            $this->Session->setFlash($message, 'default', compact('class'), $arr[$type]);
        }

    and then call it from the controller action where you need to make the flash message as below..

    $this -> setFlash("This is flash message","red");

    now you need to make the flash in the layout(if you are using) or in your ctp file..

    <?php echo $this->Session->flash() ?>
    <?php echo $this->Session->flash('red') ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:01:13.270

尝试

```
<div id="content">
    <?php echo "Flash:" ?>
    <?php echo $this->Session->flash('auth'); ?> 
    <?php echo $this->Session->flash(); ?> 
```

您需要`flash('auth')`在视图中定义才能看到`authentication session flash messages.`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-17T20:57:29.610

我认为这是因为您在这里有一个错误：

```
<?php echo "Flash:" ?> 
```

您缺少分号

```
<?php echo "Flash:"; ?> 
```

# data-structures - 动态集合中的后继和前继最坏情况运行时间

> ID：14923625
> 
> 赞同：0
> 
> 时间：2013-02-17T17:03:38.967
> 
> 标签：data-structures, clrs

以下动态集操作的渐近最坏情况运行时间是多少？

Successor(L,x) 用于未排序的单链和双链表

Predecessor(L,x) 用于未排序的双向链表

L：列表，x：指向条目的指针

（实际上这是本书问题10-1的一部分：“算法简介，第三版”，我搜索了答案，答案是O（n）但我找不到任何解释）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:26:42.743

对于“前任”和“继任者”，我想您的意思是按排序顺序。

这确实是 O(n)，因为您需要查看列表的每个元素才能找到它。

# .net - 带附件的 SOAP

> ID：14923627
> 
> 赞同：1
> 
> 时间：2013-02-17T17:03:46.777
> 
> 标签：.net, soap

我需要通过 HTTP Post 向第三方发送 SOAP（带附件）消息。需要自定义 SOAP Header 的内容并将附加数据作为附件发送。SOAP Header（具体是其中的子元素）和附件都需要签名并包含在 SOAP Header 中。没有可用的 WSDL，因此无法生成代理代码。

目前我能想到的唯一方法是从头开始有效地手动构建消息，即将 SOAP 标头的内容构建为一系列类（在 XSD.exe 的帮助下），添加签名，将其序列化为XML，将其插入到手动构建的 MIME 消息中，然后最后对附件执行类似的操作。虽然这将使我能够完全控制消息的内容，但感觉就像是一种非常冗长的方式来做一些 .NET 可能免费提供给我的事情。

所以我想我的问题是，有没有更好的方法来做到这一点？谁能给我一些关于从哪里开始的指示？我一直在研究 WCF，但我不相信它支持附件或自定义 SOAP 标头 - 这是正确的吗？

# entity-relationship - 符号的含义 - ER图

> ID：14923628
> 
> 赞同：0
> 
> 时间：2013-02-17T17:03:58.033
> 
> 标签：entity-relationship, er-diagrams

`#`, `*`, 和`o`对于实体关系图的含义是什么？

我猜`#`是主键，其他的呢？

```
Are there any other signs that are not shown here? 
```

![在此处输入图像描述](../Images/ba1a19fe4faff9bb78b0a01c318491ee.png)

# adapter - 如何配置 WSO2 ESB SAP 适配器

> ID：14923629
> 
> 赞同：0
> 
> 时间：2013-02-17T17:03:58.683
> 
> 标签：adapter, sap, wso2esb

我已经从这个链接检查了与 WSO2 ESB SAP Adapter 相关的信息：

[http://wso2.org/premium/summer-school-2011-session4-enterprise-integration-with-sap-and-wso2-esb](http://wso2.org/premium/summer-school-2011-session4-enterprise-integration-with-sap-and-wso2-esb)

这是我能找到的唯一信息吗？我在 WSO2 ESB 的官方文档中没有找到与它相关的任何内容......展示如何在 ESB 中配置此适配器的示例将非常有帮助！

提前致谢，

圣地亚哥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:37:36.917

您可以参考以下文档以获取有关 WSO2 ESB 与 SAP 集成的更多信息。

[http://docs.wso2.org/wiki/display/ESB460/Enterprise+Integration+with+SAP+and+WSO2+ESB](http://docs.wso2.org/wiki/display/ESB460/Enterprise+Integration+with+SAP+and+WSO2+ESB)

该文档是最近添加的，我希望您能够找到您正在寻找的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T12:30:48.773

WSO2 ESB 带有各种适配器来连接到各种不同的系统。这些适配器之一是 SAP 适配器。

WSO2 SAP 适配器具有完整的 iDOC 和实验性 BAPI 支持。它使用 SAP JCO 库作为底层框架与 SAP 进行通信。

安装适配器再简单不过了。它随 WSO2 ESB 和 WSO2 ESB 文档网站一起提供，从 WSO2 的角度描述了安装过程。

但是，安装过程不会指导您如何在 SAP 中找到所需的设置。

这就是这篇博文介入的地方。它实际上是三个系列中的第一个。我将首先带您完成 SAP 连接的设置。然后下一篇博文将介绍如何发送 iDOC，最后一篇博文将带您了解如何在 SAP 中调用 BAPI。

So, let’s start off with some SAP adapter knowledge. I’ll refer to the WSO2 ESB SAP adapter as ‘SA’ in the following guide.

The SA is capable to be used as a Client as well as a Server. To setup the SA as client to a SAP system you’ll need to setup a client-side configuration fle. This file should be named [SAP-GWHOST].dest and must be placed in the [WSO2_HOME]/repository/conf/sap folder. This folder does not exist per default so make sure you create it and provide enough access rights for the WSO2 user to read the files within it.

To setup the WSO2 as an idoc server you must create a configuration file named [SAP-GWHOST].server.

Let’s first handle the client configuration file. There might be some differences based on your SAP system but the following settings should cover a lot of installations. The screenshots are based on SAP ECC version 6.0

In the examples [here](http://www.yenlo.com/en/configuring-wso2-sap-adapter/) the SAP gateway is known as SAPSYS01.

# php - 空 preg_match 数组

> ID：14923634
> 
> 赞同：0
> 
> 时间：2013-02-17T17:04:29.053
> 
> 标签：php, arrays, preg-match

php。我正在尝试从这个 rss 提要中拆分结果，以便在我网站的不同区域使用，但我似乎得到的只是`Array ( ) Array ( ) Array ( ) Array ( ) Array ( ) Array ( ) Array ( )`

如果没有 preg_match 代码，它会返回这些结果

```
Tampa Bay 6 Florida 5 (FINAL - OT)
Ottawa 0 Toronto 3 (FINAL)
Philadelphia 1 Montreal 4 (FINAL)
New Jersey 1 NY Islanders 5 (FINAL)
Anaheim 3 Nashville 2 (FINAL - 2ND OT)
Columbus 3 Phoenix 5 (FINAL)
Colorado 4 Edmonton 6 (FINAL) 
```

正如你所知道的，我不能使用空格来拆分这些，因为某些团队名称有多个空格，所以我使用了这个

```
preg_match("/^(\D+)(\d+)(\D+)(\d+)\s*\((.*)\)$/", $string, $result);

print_r($result);

$first_team = 1;
$first_team_score = 2;
$second_team = 3;
$second_team_score = 4;
$final = 5; 
```

正如我上面所说，这将返回空白数组。这是我下面的整个文件。

```
<?

$sports = array(  
"NHL" => "xml feed here");  
$results = array();  
foreach ( $sports as $sport => $url ) {  
  //get the page pointed to by $url  
    $page = file_get_contents($url);  
    //grab all variables out of the page  
    preg_match_all("/&([^=]+)=([^&]+)/", urldecode($page), $foo);  
    //loop through all the variables on the page  
    foreach ( $foo[1] as $key => $value ) {  
      //debug output, you can delete this next line  
      //echo "{$value} = {$foo[2][$key]}\t<br />\n";  
    //this chain of IF/elseif statements is used to determine which pattern to use  
    //to strip out the correct data, since each sport seems to have its own format  
    //for the variables you'd "want"  
    if ( $sport == "NHL" && preg_match("/s_left\d+/", $value) ) {  
      $results[$sport][] = $foo[2][$key];  
    }   
    }    

}  

//calculate the sport with the most number of rows  
$limit = 0;  
foreach ( $results as $countMe ) {  
  $limit = max($limit, count($countMe));  
}  

//spit out the table with the right headers  
echo "<div id='content'>" . implode( array_keys($sports));  
//loop until you reach the max number of rows, printing out all the table rows you want  
for ( $p = 0; $p < $limit; $p++ ) {  

//echo "{$results[$sport]}";

if(isset($results[$sport][$p])){
echo $scores;
}

$string = $scores;
$result;

preg_match("/^(\D+)(\d+)(\D+)(\d+)\s*\((.*)\)$/", $string, $result);

print_r($result);

$first_team = 1;
$first_team_score = 2;
$second_team = 3;
$second_team_score = 4;
$final = 5; 

echo "{$result[$first_team]}";

//foreach ( array_keys($sports) as $sport ) {  
 //   $results[$sport][$p] = str_replace( '^', '', $results[$sport][$p] ); 
  //  echo "<div id='content1'>{$results[$sport][$p]}</div>";  

 // }  

}  

//kill the main div  

echo "</div>";   

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:35:51.183

首先你需要`preg_match_all`，因为你想“捕捉”每场比赛

其次，您需要正`m`则表达式中的修饰符，这意味着“多行”

[http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php) [http://www.php.net/manual/en/function.preg-match-all.php](http://www.php.net/manual/en/function.preg-match-all.php)

希望对您有所帮助...

```
<?

$string = "Tampa Bay 6 Florida 5 (FINAL - OT)
Ottawa 0 Toronto 3 (FINAL)
Philadelphia 1 Montreal 4 (FINAL)
New Jersey 1 NY Islanders 5 (FINAL)
Anaheim 3 Nashville 2 (FINAL - 2ND OT)
Columbus 3 Phoenix 5 (FINAL)
Colorado 4 Edmonton 6 (FINAL)";

preg_match_all("/^(\D+)(\d+)(\D+)(\d+)\s*\((.*)\)$/m", $string, $result);

echo "<pre>";

print_r($result); 
```

# javascript - YepNope - 等待加载依赖项

> ID：14923645
> 
> 赞同：2
> 
> 时间：2013-02-17T17:05:33.933
> 
> 标签：javascript, asp.net, asynchronous, master-pages, yepnope

在 ASP.NET 母版页中，我使用 YepNope 无条件地异步加载 jQuery（来自 Google CDN，具有本地回退）和网站所有页面上使用的一些脚本。在 MasterPage 中，我在结束正文标记之前创建了一个 ContentPlaceHolder（以及在加载所有页面上使用的那些的 YepNope 脚本下方），它用于单个页面上使用的脚本。由于 jQuery 应该在站点中的每个页面上都可用，因此不应在有特定脚本使用它的页面上单独加载它。

我遇到的问题是我无法在加载 jQuery 的 yepnope 脚本中使用回调或完成函数，因为这是在 MasterPage 上，这些是仅在该页面上使用或添加的单独页面脚本，但我需要能够延迟单个页面脚本的执行，直到 yepnope（出现在页面脚本上方）完成加载其中使用的任何依赖项（例如 jQuery）。

我能想到两个选择——

1-使页面上使用的脚本成为外部文件并使用语法加载该脚本-

```
yepnope('/url/to/your/script.js'); 
```

或者

```
yepnope({ load: '/url/to/your/script.js' }); 
```

我不确定我是否喜欢这个想法，因为它为几行 javascript 引入了额外的 HTTP 请求，不会在任何其他页面上使用。

2- 在另一个 yepnope 测试对象块中再次加载 jQuery，使用完整的函数包装页面脚本（在没有测试的情况下调用 complete 似乎会在加载之前的脚本之前立即执行该函数）并依赖于以下内容 -

> 我请求一个文件两次，它只加载一次？根据大众的需求，在 yepnope 1.5+ 中，我们添加了已经请求的脚本在第二次请求时不会重新执行的功能。当您处理不太复杂的服务器端模板系统并且您真正关心的是所有依赖项都可用时，这会很有帮助。

在页面中，我大概可以从 Google CDN 加载相同版本的 jQuery，基于上述内容实际上不会加载两次，然后在 yepnope 测试对象的完整函数调用的匿名函数中加载页面脚本。

从好的方面来说，这意味着页面不再依赖于从 MasterPage 加载的 jQuery，但不利的是（即使假设 YepNope 现在没有加载脚本两次）我们将加载多个版本的 jQuery MasterPage 中的版本被更改，以后页面中不会发生同样的情况。从维护的角度来看，我认为这不是一个好主意，尤其是在假设（我认为您应该始终这样做）另一个开发人员将是进行更改的人的情况下。

它似乎也不是特别优雅。

总的来说，我几乎肯定会使用第一个选项，但我想知道是否有办法延迟或推迟页面上的脚本直到异步加载完成，这不能作为 YepNope 测试对象加载资源的一部分来完成.

其他开发人员如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:05:34.597

我想出了这个作为我喜欢的解决方案。

在 MasterPage YepNope 测试对象中添加代码-

```
complete: function() {
                if (window.pageFunctions !== null && typeof (window.pageFunctions) === "function") {
                    window.pageFunctions();
                }
            } 
```

如果我想添加任何依赖于 MasterPage 中加载的依赖项的 JavaScript 代码或函数，我只需将它们包装在一个名为“pageFunctions”的函数中，如下所示 -

```
<script type="text/javascript">
    function pageFunctions() {
        $(document).ready(function () {
            ...
        });
    }
</script> 
```

我仍然对其他（可能更好）解决方案感兴趣，所以我将把这个问题留几天。

作为解决方案，我也很感激对此的评论。

# c# - WPF 命令-可以执行-重新验证

> ID：14923647
> 
> 赞同：0
> 
> 时间：2013-02-17T17:05:47.093
> 
> 标签：c#, wpf, command

我刚刚使用 wpf 编写了一个小游戏。我可以单击一个单元格矩阵。单击事件通过 DelegateCommand 工作。问题是 canexecute 方法没有被调用。我总是必须先点击窗口上的某个地方。我的命令类从来没有遇到过问题，因为我使用的是这个：

```
event EventHandler ICommand.CanExecuteChanged
{
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
} 
```

我还尝试调用 CommandManager.InvalidateRequerySuggested(); 但这也行不通。如果允许单击单元格的当前用户是我的电脑的本地用户（它是多人游戏），则单元格是可单击的。因此，在我从网络收到我现在是“当前玩家”的消息后，我调用了 InvalidateRequerySuggested。

```
private void SetTurn(TurnMessage message)
{
    CurrentPlayer = GetPlayer(message.PlayerID);
    System.Windows.Input.CommandManager.InvalidateRequerySuggested();
} 
```

这将产生以下影响：

```
 public bool HasTurn
    {
        get { return CurrentPlayer != null && CurrentPlayer.PlayerID == Player.PlayerID; }
    } 
```

我的命令可以执行如下所示：

```
private bool CanMatrixClick(Object param)
{
    return Main.PlayerViewModel.HasTurn;
} 
```

那么有没有人为这个问题提供干净简单的解决方案？我真的找不到任何我还没有尝试过的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:18:55.270

`DelegateCommand`拥有[`RaiseCanExecuteChanged()`](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.commands.delegatecommandbase.raisecanexecutechanged%28v=pandp.39%29.aspx)可以手动调用来触发`CanExecute`事件的方法 -

```
private void SetTurn(TurnMessage message)
{
    CurrentPlayer = GetPlayer(message.PlayerID);
    YourCommand.RaiseCanExecuteChanged();
} 
```

# ruby-on-rails - 避免在 mvc 中出现问题

> ID：14923648
> 
> 赞同：0
> 
> 时间：2013-02-17T17:05:47.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

我知道视图不应该对模型或控制器有任何了解，但我不确定如何避免它。

问题是我试图从控制器或模型中获取信息，然后才需要在我的视图中对其进行操作。

这里的代码

```
Model     
USER       LOCATION      ARTICLE
id         user_id       title
first      article_id    ...
last
... 
```

关系

```
user has many locations
article has many locations
location belongs to user
location belongs to article 
```

控制器

```
@userlocation = @user.locations 
```

看法

```
<% @userlocation.each do |event| %>
  ...
  <% evTitle = Article.find_by_id(event.article_id) %>
  <%= evTitle.title %>
<% end %> 
```

显然它不是最好的不确定如何在控制器中进行查询，并且 evTitle 没有正确报告为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:14:26.123

在控制器中，您可以这样做：

```
@userlocations = @user.locations
@locations_articles = Article.find_all_by_id(@userlocations.map(&:article_id).uniq) 
```

然后就可以`@locations_articles`在视图中使用了。避免`db queries`在视图中使用。

```
<% @locations_articles.each do |article| %>
    <%= article.title %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:18:32.633

您可以先在这里观看 rails cast 多种形式的剧集：-

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

并且首先您应该在模型中定义一个属性，以便以单视图形式访问信息。

def new @survey = Survey.new 3.times do question = @survey.questions.build 4.times { question.answers.build } end end

# c# - C# 使用 StreamReader 读取资源中的文本文件时出现 FileNotFound 异常

> ID：14923652
> 
> 赞同：-2
> 
> 时间：2013-02-17T17:06:03.323
> 
> 标签：c#, .net, winforms

```
using (SteamReader sr = new StreamReader("text.txt")) 
```

我还尝试不要将文本文件放在`.resx`文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T17:07:48.947

您正在使用的`StreamReader`构造函数期望文件存在于磁盘上。如果文件嵌入在您的程序集中，您可以使用该[`GetManifestResourceStream`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcestream.aspx)方法。

例如：

```
// Get the current assembly. If the file is embedded inside a different
// assembly you will need to get that assembly
var assembly = Assembly.GetExecutingAssembly();
using (var stream = assembly.GetManifestResourceStream("AssemblyName.test.txt"))
using (var sr = new StreamReader(stream))
{
    ...
} 
```

资源嵌入到程序集中的键取决于文件在层次结构中的位置。它总是以程序集名称为前缀，然后是任何可能的子文件夹（如果有的话）。

确保在其属性中将此文件`Build Action`设置为。`Embedded Resource`这里[`an article`](http://support.microsoft.com/kb/319292)有更多关于访问嵌入式资源的细节。

# java - 从服务器上的小程序连接到sql数据库，你使用localhost还是实际ip

> ID：14923654
> 
> 赞同：0
> 
> 时间：2013-02-17T17:06:12.893
> 
> 标签：java, mysql, applet, mysql-connector, connector-j

我正在尝试从 Java 小程序连接到我网站上的数据库。当我从 eclipse 中尝试时，它说通信链路出现故障，并且驱动程序没有收到来自服务器的任何数据包。那是因为只有实际服务器上的小程序才能连接到数据库吗？

所以我将它导出为一个 jar，我亲自签名并上传到我的网站。然后使用作为嵌入标签，我把它放在我的网页中。

```
<div id="blah">
<embed id="Math"
   type="application/x-java-applet"
   width="810" height="600" 
   archive="mathG.jar,mysql-connector-java-5.1.23-bin.jar"
   code="com.mathg.math.MathG"
   codebase="test"
   pluginspage="http://java.com/download/"/> 
```

这是将小程序放在网站上的正确方法吗？小程序出现并在网页上运行，但是当我按下按钮连接到数据库时，它说它无法连接。

我尝试在我的 java 代码中同时使用 localhost 和实际 ip 来尝试连接，但都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:08:29.430

优先放数据库服务器的IP地址；localhost 应该只用于快速和肮脏的本地测试。您不太可能在 localhost 上部署应用程序或数据库。

这是一个*非常*糟糕的主意。任何小程序都不应直接从 Internet 访问数据库。所有这些数据都暴露了。

一个更好的主意是在applet 和数据库之间放置一个servlet。通过将 servlet 暴露在 Internet 上来部署它；把数据库放在防火墙后面，只打开它到 servlet 的端口。让 servlet 处理身份验证、验证、绑定以及与数据库的交互。使用这种设计，用户会更好。

# avaudioplayer - ios，在麦克风录制音频时获取浮动电平麦克风 updateMesters

> ID：14923655
> 
> 赞同：0
> 
> 时间：2013-02-17T17:06:25.640
> 
> 标签：avaudioplayer, audio-recording, avaudiorecorder, avaudiosession

这是我现在录制的代码如何通过示例 UIlable 浮点数获取麦克风中的电平声音输入

我想我会使用这个功能，但我如何在 rec.h 和 rec.m 文件中使用它

**(void)updateMeters**

```
AVAudioSession * audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];
[audioSession setActive:YES error:nil];
NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
[recordSetting setValue :[NSNumber numberWithInt:kAudioFormatMPEG4AAC] forKey:AVFormatIDKey];
[recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
[recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];
recordedTmpName = [[NSString alloc] initWithFormat:@"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"aac"];
temporaryRecFile= [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent:recordedTmpName]];
recorder = [[ AVAudioRecorder alloc] initWithURL:temporaryRecFile settings:recordSetting error:nil];
[recorder setDelegate:self];
[recorder prepareToRecord];
[recorder record]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:23:05.500

在录制过程中，您必须定期调用 updateMeters，并通过 - (float)averagePowerForChannel:(NSUInteger)channelNumber 获取平均功率

```
[recorder setDelegate:self];
[recorder prepareToRecord];
recorder.meteringEnabled = YES;
[recorder record];
NSTimer* timer = [NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(handleTimer) userInfo:nil repeats:YES];

- (void) handleTimer
{
    [recorder updateMeters];
    label.text = [NSString stringWithFormat:@"lf",[recorder averagePowerForChannel:0]];
} 
```

要查看更多信息，您可以访问**[AVAudioRecorder 类参考](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html)**

# bash - 将图像目录转换为单个 PDF

> ID：14923657
> 
> 赞同：4
> 
> 时间：2013-02-17T17:06:45.093
> 
> 标签：bash, pdftk, imagemagick-convert

我有一个图像目录：

```
path/to/directory/
   image01.jpg
   image02.jpg
   ... 
```

并希望将其转换为单个 PDF 文件：

```
path/to/directory.pdf 
```

到目前为止，这是我设法编写的代码：

```
#!/bin/bash

echo Directory $1
out=$(echo $1 | sed 's|/$|.pdf|')
echo Output $out

mkdir tmp

for i in $(ls $1)
do
    # MAC hates sed with "I" (ignore case) - thanks SO for the perl solution!
    # I want to match "jpg, JPG, Jpg, ..."
    echo $1$i $(echo "tmp/$i" | perl -C -e 'use utf8;' -pe 's/jpg$/pdf/i')
    convert $1$i $(echo "tmp/$i" | perl -C -e 'use utf8;' -pe 's/jpg$/pdf/i')
done

pdftk tmp/*.pdf cat output $out
rm -rf tmp 
```

所以想法是用imagemagick把每张图片转换成pdf文件，然后用pdftk把它合并成一个文件。由于文件的命名，我不必为排序而烦恼。

由于我是这方面的新手，我相信可以做很多改进：

*   仅遍历目录中的图像文件（如果有一些 Readme.txt，...）
*   包括扩展名 png, jpeg, ...
*   使用尾随“/”并不优雅我管理
*   等等

但是，目前我的主要问题是，在某些情况下，我的目录和图像文件的名称中包含空格。然后 for 循环遍历文件名的子字符串，我想带有 convert 的行也会失败。我已经尝试了一些东西，但到目前为止还没有成功，希望有人能在这里帮助我。如果有人有想法来解决我上面列出的问题，我也会很高兴听到他们的声音。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T17:13:26.310

`convert`可以一口气做到这一点：

```
convert *.[jJ][pP][gG] output.pdf 
```

或者回答您的其他几个问题并替换您的脚本：

```
#!/bin/bash
shopt -s nullglob nocaseglob
convert "$1"/*.{png,jpg,jpeg} "${1%/}.pdf" 
```

将遍历第一个参数中的所有给定扩展，无论大小写如何，并写入`yourdir.pdf`. 它不会在空格上中断。

# regex - 负货币值的正则表达式？

> ID：14923662
> 
> 赞同：1
> 
> 时间：2013-02-17T17:07:23.260
> 
> 标签：regex, currency

我想要一个可以处理与金钱相关的数字的正则表达式。目前我正在使用这个：

`^\$?(?:\d+|\d{1,3}(?:,\d{3})*)(?:\.\d{1,2}){0,1}$`

我的测试集包括以下数字，我希望将其声明为有效。我还提到了每个数字，使用上述正则表达式验证时的验证结果是什么：

```
123456789012345 //valid
123456789012345.34 //valid

123,456,789,012,345 //valid
123,456,789,012,345.34 //valid

-123,456,789,012,345 //not valid
-123,456,789,012,345.34 //not valid 
```

它似乎适用于除负值之外的所有内容。

其次，它似乎`$`在一开始就对值起作用。是否可以将其修改为`USD$`在开始时接受，而不是仅接受`$`，以便以下数字有效？：

```
USD$123,456,789,012,345
USD$123,456,789,012,345.34 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:19:38.633

要同时匹配负数，并匹配`USD$` *而不是*，`$`您
可以`^\$?`将`^(?:USD\$)?-?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:20:37.187

实际上，这真的很容易：

```
^(?:(?:USD)?\$)?(?:-)?(?:\d+|\d{1,3}(?:,\d{3})*)(?:\.\d{1,2})?$ 
```

我已替换`\$?`为：

`(?:(?:USD)?\$)?`- 这匹配一个可选的 -`$`符号，可选地`USD`在它前面

并补充说：

`(?:-)?`- 这匹配`-`第一个数字之前的可选

最后，我还将 缩写`{0,1}`为`?`。这是同一件事。

[*正则表达式演示*](http://regexr.com?33q67)

如果您想消除一些混乱，根据 Bergi 的评论，您可以稍微简化一下：

```
^((USD)?\$)?-?(?:\d+|\d{1,3}(?:,\d{3})*)(?:\.\d{1,2})?$ 
```

我不想碰其他非捕获组。

# syntax-error - 运行我的 Python 代码时出现语法错误

> ID：14923664
> 
> 赞同：0
> 
> 时间：2013-02-17T17:07:28.260
> 
> 标签：syntax-error, python

刚开始作为初学者学习 Python，我发现它很有趣。但它给了我下面提到的奇怪错误。我正在从一本书中学习，那里的代码写成：

```
fish="basss"

if fish=="bass":
    print('super')
    else:
        print('bla') 
```

它给了我一个语法错误，我无法理解原因。我写的代码和书中写的一样。我在谷歌搜索，但找不到任何东西。我正在使用最新版本的 python，我在 Python shell 中输入了这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:09:31.640

Python 对缩进很敏感。您的代码应该像这样缩进：

```
fish="basss"

if fish=="bass":
    print('super')
else:
    print('bla') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:10:20.933

有一个缩进错误，你必须这样做，

```
fish="basss"

if fish=="bass":
    print('super')    
else:
    print('bla') 
```

Always else 块应该在`if`or`elif`语句的相同缩进级别下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T17:09:34.633

因为您的`else`块与您的块不对齐，请`if`尝试取消缩进`else`.

```
fish = "basss"

if fish == "bass":
    print('super')
else:
    print('bla') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T17:09:52.417

Python 通过缩进区分代码块。在代码中正确缩进非常重要。

```
if fish=="bass":
    print('super')
else:
    print('bla') 
```

`if`并且`else`必须处于相同的缩进级别。在每个条件中执行的所有语句都必须再次缩进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T17:11:55.573

您必须在多行上键入它。`if`and`else`语句不能在同一行。这会导致错误，因此必须在单独的行中键入它们。

# php - 带有内联脚本的 jquery.load() 页面重复脚本

> ID：14923665
> 
> 赞同：0
> 
> 时间：2013-02-17T17:07:29.867
> 
> 标签：php, javascript, jquery, jquery-ui

在我的网页上，我使用 $().load 将索引和其他 php 页面加载到索引内的 div 中。这些小页面有一些内联的 js 代码，比如

```
<script>
    $(document).ready($("#dialog").dialog());
</script> 
```

因此，在每次单击加载此页面的链接时，我都会在页面加载时弹出 +1。问题不在于此对话框，而是所有脚本，它们大量重复。是否有某种 $().on 函数，以便我可以委派这些构建器并在没有内联脚本的情况下离开加载的页面？还是有类似require_once的东西？

# windows-runtime - VLC 和 MJPEG 解码器流式传输（无效标头）

> ID：14923666
> 
> 赞同：2
> 
> 时间：2013-02-17T17:07:42.987
> 
> 标签：windows-runtime, video-streaming, vlc, mjpeg

我正在制作一个包含视频流的 WinRT 应用程序。现在我在 VLC 作为流服务器和客户端上的 MJPEGDecoder lib ( [http://mjpeg.codeplex.com/](http://mjpeg.codeplex.com/) ) 来解码视频。

但是在创建 HTTP 流并从客户端连接到它之后，MJPEGDecoder 说标头无效（它需要多部分流）。VLC 到 VLC 工作正常。

问题1：如何解决？

问题 2：为 WinRT 创建视频流的替代方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:35:02.900

弄清楚了。[在http://tumblr.martinml.com/post/2108887785/how-to-broadcast-a-mjpeg-stream-from-your-webcam-with](http://tumblr.martinml.com/post/2108887785/how-to-broadcast-a-mjpeg-stream-from-your-webcam-with)的帮助下

VLC 具有设置 mime 类型和边界的选项。来自链接的配置示例

```
:sout=#transcode{vcodec=MJPG,vb=400,width=640,height=480}
:duplicate{dst=std{access=http{mime=multipart/x-mixed-replace;
boundary=--7b3cc56e5f51db803f790dad720ed50a},mux=mpjpeg,dst=:1234/webcam.mjpg}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-27T00:14:19.573

只是为了进一步详细说明您的问题/答案。发布的答案仅链接到一个示例，但没有解释它，也没有示例本身。所以我想完成这个答案，以防其他人偶然发现它。

当您定义您的 vlc 流时，您忘记在您的问题中共享它，您很可能没有从访问参数 http 中指定任何选项，而是将 vlc 标准模块定义为这样。*（就像我遇到同样问题时所做的那样）*

```
standard{access=http,mux=mpjpeg,dst=< address >:< port >/< path >} 
```

您正在使用 VLC 创建通过 http 传递的 mjpeg 流。感谢[osgx](https://stackoverflow.com/users/196561/osgx)在[另一个问题](https://stackoverflow.com/questions/7294660/what-format-is-this-jpeg-stream-from-my-cheap-chinese-ip-webcam)中的回复，这里是描述[MPJEG over HTTP](http://en.wikipedia.org/wiki/Motion_JPEG#M-JPEG_over_HTTP)的维基百科链接。基本上：

> M-JPEG over HTTP 使用特殊的 mime 类型**multipart/x-mixed-replace**和参数**boundary=*** < 边界 > ***** 通知客户端，您将发送一系列由*< 边界分隔的 JPEG 图像>*。

适用于*<boundary>*的规则已由 [Gumbo](https://stackoverflow.com/users/53114/gumbo)在[这篇文章](https://stackoverflow.com/questions/4656287/what-rules-apply-to-mime-boundary)中说明，而其他一些准则（现在可能已被较新的准则淘汰）在 RFC2046 中定义

混合替换的媒体类型在[关于 MIME 的维基百科文章中进行了解释](http://en.wikipedia.org/wiki/MIME#Mixed-Replace)

由于您放置的示例包括通过 http 流式传输的媒体内容的 mime 定义，因此可以将其定义为带有 h​​ttp 访问定义的可选参数。

```
standard{access=http{mime=multipart/x-mixed-replace;boundary=--myboudary},mux=mpjpeg,dst=< address >:< port >/< path >} 
```

# node.js - 在其他功能中使用 i18n

> ID：14923668
> 
> 赞同：-2
> 
> 时间：2013-02-17T17:07:52.970
> 
> 标签：node.js, content-management-system, express, gallery

如何使用 i18 在 node.js 中为模板和路由器实现多语言我如何在其他功能中使用 i18n 来更改语言。i18n 只生成空文件 en.js es.js ...这是这样还是错了？

例子

//app.js

```
require(i18n):
require("./router" ); 
```

//路由器.js

```
export.example = function (){
    .
    .
    .
    req.session.error = __('You have error:  %s', error);
} 
```

500 类型错误：对象 # 没有方法 '__'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:58:46.693

使用带有 i18n 国际化的应用程序，最好只在最终模板中使用，这样更容易为其他语言编辑，而不必在我们的代码中搜索文本。

使用jade进行国际化如下

```
#{__('Hello')} 
```

[正如参考文献所说](https://github.com/mashpie/i18n-node)，我遵循了其他信息。

# android - 拆分时在类的对象上获取 NullPointerException

> ID：14923671
> 
> 赞同：0
> 
> 时间：2013-02-17T17:08:12.747
> 
> 标签：android

我有一个名为`TestApp`which extends的类`Activity`和另一个名为`SecondClass`which extends的类`TestApp`。在`TestApp`活动中，我有一个在按钮上设置文本的方法。当我从`TestApp`to移动`SecondClass`并调用`TestApp`from`SecondClass`获取`NullPointerException`按钮对象的方法时。为什么会这样？任何建议都将是可观的。这是我的第一个活动代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ok = (Button) findViewById(R.id.button1);
    cancel = (Button) findViewById(R.id.button2);
    setTextAgain();
}

protected void setTextAgain() {
    ok.setText("hi");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add(0, 0, 1, "1");
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case 0:
        SecondClass second = new SecondClass(this);
        second.initialize();
        break;
            }
    return super.onOptionsItemSelected(item);
} 
```

这是我的二等代码

```
public class SecondClass extends TestAppActivity{

Context l_context;

public SecondClass(TestAppActivity p_testAppActivity) {

    l_context = p_testAppActivity;

}

public void initialize() {

    setTextAgain();

} 
```

这是 logCat o/p

```
02-17 22:43:54.159: E/AndroidRuntime(1246): java.lang.NullPointerException
02-17 22:43:54.159: E/AndroidRuntime(1246):     at       
android.app.Activity.setContentView(Activity.java:1657)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at    
com.sachit.testApp.TestAppActivity.setTextAgain(TestAppActivity.java:25)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at
com.sachit.testApp.SecondClass.initialize(SecondClass.java:17)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at    
com.sachit.testApp.TestAppActivity.onOptionsItemSelected(TestAppActivity.java:46)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at   
android.app.Activity.onMenuItemSelected(Activity.java:2205)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at   
com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:748)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at   
com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at 
com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at  
com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at   
com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at    
android.view.View$PerformClick.run(View.java:9080)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at   
android.os.Handler.handleCallback(Handler.java:587)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at   
android.os.Handler.dispatchMessage(Handler.java:92)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at   
android.os.Looper.loop(Looper.java:123)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at 
android.app.ActivityThread.main(ActivityThread.java:3683)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at 
java.lang.reflect.Method.invokeNative(Native Method)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at   
java.lang.reflect.Method.invoke(Method.java:507)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-17 22:43:54.159: E/AndroidRuntime(1246):     at     
dalvik.system.NativeStart.main(Native Method) 
```

# ruby-on-rails - Ruby on rails：Cucumber w/Capybara 在 redirect_to 上转到 ApplicationController

> ID：14923672
> 
> 赞同：0
> 
> 时间：2013-02-17T17:08:23.723
> 
> 标签：ruby-on-rails, rest, cucumber

我正在尝试为重定向链接数据库设置 RESTful API。我在 cucumber 中设置了很多测试，其中一个是当用户在 /links/:id 上执行 GET 时。这应该将用户重定向到链接。它在浏览器中工作，但我在黄瓜中设置这个测试时遇到了一些麻烦。

```
Given /^The link id part of the URL matches an existing entry in the links table$/ do
 FactoryGirl.create(:users)
 FactoryGirl.create(:links, :OWNER_USERID => Users.first.id)
 Users.count.should==1
 Links.count.should==1
end

When /^you use GET on link$/ do
 visit link_path(Links.first.id)
end 
```

指定的 link_path 将我发送到此 show 方法：

```
def show
 redir=Links.find_by_id(params[:id])
 redirect_to redir.target, :status=>307
end 
```

问题只是黄瓜在抱怨我没有应用程序/索引模板的时候失败了。出于某种原因，它不会重定向我，而是转到我自己网站的 root_path。任何人都知道如何检查这种重定向是否真的有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:15:35.947

您是否尝试过在 RSpec 而不是 Cucumber 中对其进行测试？尝试这样的事情，看看它是否有效：

```
describe "testing links" do
  subject { page } 
  describe "use GET on link" do
    let(:links) { Links.first }
    before { get link_path(Links.first.id) }
    specify { response.should redirect_to("http://example.com") }
  end
end 
```

在进行测试之前，还要确保您的测试数据库是否正确配置和填充。

`rake db:migrate`和`rake db:test:prepare`

# javascript - 禁用 jQuery 中的元素

> ID：14923673
> 
> 赞同：0
> 
> 时间：2013-02-17T17:08:23.843
> 
> 标签：javascript, jquery

好的，所以我想单击一个项目，然后让该项目变得不可点击，并且不执行附加到它的 jQuery。我目前正在使用这个

```
$(clicked_id).prop('disabled', true); 
```

然而，这是行不通的。

任何帮助深表感谢！

编辑：

这是 HTML：

```
<img src="imgs/card.jpg" id="card0" name="card0"  onclick="getCard(this.id); "> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:13:56.537

`disabled`仅用于禁用输入元素（并且它不会改变对象的可点击性——只是不执行默认动画）。

要使其从对象中删除单击事件，请使用[`.off()`](http://api.jquery.com/off/)

```
 $(clicked_id).off('click') 
```

但这仅在通过 jquery 添加 onclick 时才有效

相反，您可以这样做：

```
$(clicked_id)[0].onclick=false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:54:24.170

还有另一种解决方案：

```
function getCard(objId){ 
  if( !($('#'+objId).attr('used') == '1') )
  {
    alert('Click is working for '+objId);
    // do something
    $('#'+objId).attr('used', '1');
  } 
} 
```

这是一个工作示例：

[http://jsfiddle.net/HqHut/](http://jsfiddle.net/HqHut/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T17:16:39.547

由于您的处理程序是作为属性分配的，因此您可以取消该事件处理程序的属性。

```
document.getElementById(clicked_id).onclick = null; 
```

`#`只需确保您在 ID 上没有前导。

* * *

或者我们这样的jQuery：

```
$(clicked_id).prop("onclick", null); 
```

* * *

或者您可以传递元素本身而不是传递 ID。

```
<img src="imgs/card.jpg" id="card0" name="card0"  onclick="getCard(this); "> 
```

然后更改您的函数，使其接收元素而不是元素的 ID。完成此操作后，您可以直接访问该元素。

```
elem.onclick = null; 
```

# java - Hibernate 和 PostgreSQL：我可以配置 GenerationType.IDENTITY，其中每个 id 列的默认值来自共享序列吗？

> ID：14923677
> 
> 赞同：0
> 
> 时间：2013-02-17T17:08:46.673
> 
> 标签：java, hibernate, hibernate-annotations

好吧，我不是 100% 确定我是否真的想要这个，但目前这似乎是个好主意。

我像这样配置我的实体：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private long id = 0; 
```

如果我让 Hibernate 生成表，结果是：

```
 id bigserial NOT NULL,
  CONSTRAINT test_pkey PRIMARY KEY (id) 
```

bigserial 又转换为具有默认值的 bigint：

```
nextval('test_id_seq'::regclass) 
```

现在没关系，但我目前正在考虑对所有表使用单个序列，并希望默认值为：

```
nextval('my_global_sequence'::regclass) 
```

也许我以后可以去手动调整默认值，但是你有什么想法我可以告诉hibernate自动定义这样的表吗？是否有一种方法可以推送我自己的创建表 sql 策略，该策略会为 id 列发出这样的代码（未经测试的 SQL 语法）：

```
id bigint NOT NULL DEFAULT = nextval('my_global_sequence'::regclass) 
```

请注意，我想坚持使用 IDENTITY 策略，因为我想避免任何“hi/lo 乘以分配大小缓存序列”的策略。有时我需要通过 pgAdmin 插入一些手动行，而不会冒与休眠发生任何 id 冲突的风险。所有其他策略对我来说似乎都是魔法（= 我不明白它们）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:29:19.843

我不知道如何用hibernate做到这一点。我当前的解决方案只是一个简单的旧 JDBC/SQL 逻辑，我在每次启动时执行。到目前为止，我对此感到非常高兴。

```
Connection connection = DriverManager.getConnection(dbUrl, dbUser, dbPassword);

String catalog = connection.getCatalog();
String schema = "public";

DatabaseMetaData databaseMetaData = connection.getMetaData();

ResultSet tablesResultSet = databaseMetaData.getTables(catalog, schema, null, new String[] { "TABLE" });

while(tablesResultSet.next())
{
  String tableName = tablesResultSet.getString("TABLE_NAME");

  LOGGER.info("updating table: '" + tableName + "', setting global sequence");

  // update primary keys to global sequence
  {
    //        LOGGER.info("setting global sequence for '" + tableName + "'.id");

    connection.createStatement().execute("ALTER TABLE \"" + tableName + "\" ALTER COLUMN id TYPE bigint;");
    connection.createStatement().execute("ALTER TABLE \"" + tableName + "\" ALTER COLUMN id SET NOT NULL;");
    connection.createStatement().execute("ALTER TABLE \"" + tableName + "\" ALTER COLUMN id SET DEFAULT nextval('my_global_sequence'::regclass)");
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T10:50:09.473

您可以在您的 id 上使用注释来确定您希望使用的序列生成器：

以您的代码为例：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@SequenceGenerator(name="my_global_sequence")
private long id = 0; 
```

有了这个注解，就很容易为每个实体或实体组配置特定的序列生成器，甚至在任何地方都使用相同的序列生成器。

需要注意的是，您必须为您拥有的每个实体定义该注释

# c# - 数组排序列表

> ID：14923680
> 
> 赞同：2
> 
> 时间：2013-02-17T17:08:56.927
> 
> 标签：c#, datagridview, c#-2.0

我有一个清单`<string[]>`。
添加的项目看起来像这样

`list.Add(new string[]{"1", "A", "333", "666", "16.02.2013 03:00"});`
`list.Add(new string[]{"2a", "A", "333", "666", "16.02.2013 03:00"});`
`list.Add(new string[]{"2", "A", "333", "666", "16.02.2013 03:00"});`
`list.Add(new string[]{"3a", "A", "333", "666", "16.02.2013 03:00"});`
`list.Add(new string[]{"3b", "A", "333", "666", "16.02.2013 03:00"});`
`list.Add(new string[]{"4", "A", "333", "666", "16.02.2013 03:00"});`
`list.Add(new string[]{"5", "A", "333", "666", "16.02.2013 03:00"});`
`list.Add(new string[]{"10", "A", "333", "666", "16.02.2013 03:00"});`
`list.Add(new string[]{"11", "A", "333", "666", "16.02.2013 03:00"});`

从文件中解析数据并将它们添加到列表后，我必须在 DataGridView 中显示所有数据，在将所有数据添加到 DataGridView 后，我想让用户能够通过单击列标题对其进行排序。

问题是，如果用户想要按第一列对行进行排序，它将像这样排序

```
1   A   333 666 16.02.2013 03:00
10  A   333 666 16.02.2013 03:00
11  A   333 666 16.02.2013 03:00
2   A   333 666 16.02.2013 03:00
2a  A   333 666 16.02.2013 03:00
3a  A   333 666 16.02.2013 03:00
3b  A   333 666 16.02.2013 03:00
4   A   333 666 16.02.2013 03:00
5   A   333 666 16.02.2013 03:00 
```

但正确的方法是：

```
1   A   333 666 16.02.2013 03:00
2   A   333 666 16.02.2013 03:00
2a  A   333 666 16.02.2013 03:00
3a  A   333 666 16.02.2013 03:00
3b  A   333 666 16.02.2013 03:00
4   A   333 666 16.02.2013 03:00
5   A   333 666 16.02.2013 03:00
10  A   333 666 16.02.2013 03:00
11  A   333 666 16.02.2013 03:00 
```

**如何使用自然排序按数组的特定索引对字符串数组列表进行排序？**
我不能使用 LINQ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:40:08.150

您正在寻找一种[自然的排序](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)。[网络上](http://code.google.com/p/csharp-natural-sort/)有[很多](http://www.codeproject.com/Articles/22517/Natural-Sort-Comparer) [实现](https://stackoverflow.com/questions/248603/natural-sort-order-in-c-sharp) ；我只是选择其中之一并将其复制到您的项目中。

现在，由于您想在 DataGridView 中排序，您需要附加到[`SortCompare`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.sortcompare.aspx)事件并在那里进行自定义排序。它看起来像这样：

```
private void dataGridView1_SortCompare(object sender, DataGridViewSortCompareEventArgs e)
{
    // Since you want a natural sort in the first column
    if (e.Column.Index == 0)
    {
        // Create an instance of your natural sort comparer here
        IComparer<string> comparer = new YourNaturalComparer()

        // Perform the sort
        e.SortResult = comparer.Compare(
            e.CellValue1.ToString(), e.CellValue2.ToString());

        // Signal that we handled the sorting for this column
        e.Handled = true;
    }
} 
```

# ms-access - 如何使用 sed 替换 MS Access 文件中的字符

> ID：14923681
> 
> 赞同：-2
> 
> 时间：2013-02-17T17:08:58.780
> 
> 标签：ms-access, sed

我在 Access 文件中有一个字符串，如下所示：

```
/bin/XXX/bla.XXX.bla 
```

我想使用 sed 将所有出现的 XXX 替换为该字符串中的 YYY。**g**标志本身不起作用可能是因为刺痛很复杂并且带有“/” 。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:52:24.710

用这个：

```
sed 's/XXX/YYY/g' 
```

`g`代表替换所有货币

因此，如果您有文件 myfile.txt，请执行以下操作：

```
sed 's/XXX/YYY/g' myfile.txt > mynewfile.txt 
```

# javascript - 你如何访问这个对象内部数组的长度？

> ID：14923683
> 
> 赞同：0
> 
> 时间：2013-02-17T17:09:13.453
> 
> 标签：javascript

我有一个看起来像这样的对象：

```
[ { _id: 507351805725f3457b000055,
    audioFiles: [ [Object], [Object] ] } ] 
```

我想访问 audioFiles 的长度属性，以便我可以遍历它的内容。但是我一直不确定或 1\. 有人可以告诉我正确的方法吗？

这是我到目前为止尝试过的（注意对象变量名为audios）。

```
audios.audioFiles.length
audios.length
audios[0].audioFiles.length 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:11:06.493

这是：

```
> audios[0].audioFiles.length
2 
```

您可以使用 Chrome 的 Web Inspector 或 Firefox 上的 Firebug 自行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:13:08.430

利用 `audios[0].audioFiles.length`

# r - 为泊松回归解释 glm 的输出

> ID：14923684
> 
> 赞同：1
> 
> 时间：2013-02-17T17:09:20.860
> 
> 标签：r, regression, glm, poisson

考虑以下：

```
foo = 1:10
bar = 2 * foo
glm(bar ~ foo, family=poisson) 
```

我得到结果

```
Coefficients:
(Intercept)          foo  
     1.1878       0.1929  

Degrees of Freedom: 9 Total (i.e. Null);  8 Residual
Null Deviance:      33.29 
Residual Deviance: 2.399    AIC: 47.06 
```

从[this page](http://www.jerrydallal.com/LHSP/Poisson.htm)的解释来看， foo 的系数似乎应该是`log(2)`，但事实并非如此。

更一般地说，我认为这个输出应该意味着`lambda = 1.187 + .1929 * foo`lambda 是泊松分布的参数，但这似乎与数据不符。

我应该如何解释这个回归的输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:14:54.360

泊松模型是乘法的。这就是说，作为某种平均过程的结果，顺序中增加 1（`foo`预测器中的增量）将与范围 seq(2, 20, by 2) 中相邻偶数的比率相关联) 即 exp(0.1929)。我不认为预测很好，但是当你查看可能的值时，还不错。

```
> exp(0.1929)
[1] 1.212762

> seq(4,20,by=2)/seq(2,18,by=2) 
[1] 2.000000 1.500000 1.333333 1.250000 1.200000 1.166667 1.142857 1.125000 1.111111 
> mean( (2:11)/(1:10) )
[1] 1.292897 
```

# java - Jets3t zipfile 上传，流被自动关闭

> ID：14923694
> 
> 赞同：0
> 
> 时间：2013-02-17T17:10:15.323
> 
> 标签：java, spring, grails, groovy, jets3t

我正在通过多部分网络表单上传压缩文件。我正在使用 groovy 和 grails 进行上传，但代码在 Java（带有 spring）中看起来也很相似......

```
def processUpload(){
    def uploadedFile = request.getFile('payload')
    String vloc = "";
    String filename = ""

    if(!uploadedFile.empty){
        InputStream is = uploadedFile.getInputStream()
        java.util.zip.ZipInputStream zis = new java.util.zip.ZipInputStream(is)
        def zipentry = zis.getNextEntry();
        while(zipentry!=null){
            println zipentry.getName()
            if( zipentry.getName().indexOf(".")>0){
                amazonS3Service.put (zis, zipentry.getName(), session.uid, ".zyx", zipentry.getSize())
            }
            zipentry = zis.getNextEntry()
        }           
    }
} 
```

如下`amazonS3Service.put`_

```
String put(inputstream, name, uid, ext, length)
{
    String mime = mimeExtensionMap[ext.toLowerCase()]
    S3Bucket bucket = makeBucket(uid)
    S3Object s3Obj = new S3Object()
    s3Obj.setAcl AccessControlList.REST_CANNED_PRIVATE
    s3Obj.setContentLength length
    s3Obj.setContentType mime
    s3Obj.setDataInputStream inputstream
    s3Obj.setKey name
    s3Obj.setBucketName bucket.getName()
    s3.putObject bucket, s3Obj
    return name
} 
```

似乎 s3.putObject 存储桶、s3Obj 方法正在关闭我的流，因为我收到了 streamClosed 异常。我需要从 zipfile 中获取 nextentry，因此不应关闭流！

我曾尝试将 byteArrayinputstream 与 zis.getBytes() 一起使用，但即使 getBytes() 也会关闭流！

我有哪些选择？

谢谢

# ios - 自上次 Xcode 更新以来的“直接比较字符串文字”警告

> ID：14923696
> 
> 赞同：4
> 
> 时间：2013-02-17T17:10:19.413
> 
> 标签：ios, nsstring, compiler-warnings

自从上次更新 Xcode（到 v4.6）以来，我收到了一堆以下警告：

```
"Direct comparison of string a literal has undefined behavior" 
```

这是通过这种方式将 NSString 属性与另一个字符串进行比较时：

```
if ([self.myString isEqualToString:@"Compare Me"]) { ... 
```

最初我比较过，`self.myString == @"Compare Me"`但有相同的警告。Xcode 建议`isEqual:`改用。

我想知道为什么我应该这样做。其他比较仍然有效，例如：

```
if ([segue.identifier isEqualToString:@"nextScreen"]) { // => NO WARNING HERE 
```

编辑：好的，对于不相信/downvoters 的任何人，请参阅此屏幕截图： ![在此处输入图像描述](../Images/2c32cab7d3dacc92c2439c052a465eff.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:31:32.500

有时 Xcode 会感到困惑并显示旧警告。我怀疑它显示了使用`==`. 清理构建，转到管理器窗口并删除该项目的派生数据，然后重新启动 Xcode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T18:16:17.860

基本上（根据this other [stackoverflow answer](https://stackoverflow.com/questions/16246462/fixing-direct-comparison-of-a-string-literal-has-undefined-behavior-automatica)，您应该将任何`==`字符串比较切换为使用`isEqual`or `isEqualToString`。

为了方便起见，我在 bignerdranch 的博客上发现了这篇[文章](http://blog.bignerdranch.com/334-isequal-vs-isequaltostring/)，说 和 之间没有区别（在可观察的人类世界中）`isEqual`，`isEqualToString`所以我个人使用`isEqual`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-17T17:16:14.463

当您使用“==”时，理论上（如在 C/C++ 中）它应该比较指针，而不是对象的值。

事实是 obj-c（我猜是编译器）会理解你真正想要的并在 isEqualToString 中转换它。但为了“安全”，最好使用 good 方法来比较两个字符串、两个数字等。

# java - 延迟递归回溯java

> ID：14923701
> 
> 赞同：1
> 
> 时间：2013-02-17T17:10:46.480
> 
> 标签：java, delay, backtracking

我发现这个数独求解器在尝试解决难题时使用回溯，为了更好地理解，我想延迟这个过程，以便分析回溯。但我真的不知道该怎么做。我尝试使用`Thread.sleep(100);`，但我真的不知道到底该把延迟放在哪里。

```
abstract class SudoKiller {
    private SudokuBoard sb;    // Puzzle to solve;

    public SudoKiller(SudokuBoard sb) {
        this.sb = sb;
    }

    private boolean check(int num, int row, int col) {
        int r = (row / sb.box_size) * sb.box_size;
        int c = (col / sb.box_size) * sb.box_size;

        for (int i = 0; i < sb.size; i++) {
            if (sb.getCell(row, i) == num ||
                    sb.getCell(i, col) == num ||
                    sb.getCell(r + (i % sb.box_size), c + (i / sb.box_size)) == num) {
                return false;
            }
        }
        return true;
    }

    public boolean guess(int row, int col) {
        int nextCol = (col + 1) % sb.size;
        int nextRow = (nextCol == 0) ? row + 1 : row;

        try {
            if (sb.getCell(row, col) != sb.EMPTY)
                return guess(nextRow, nextCol);
        }
        catch (ArrayIndexOutOfBoundsException e) {
            return true;
        }

        for (int i = 1; i <= sb.size; i++) {
            if (check(i, row, col)) {
                sb.setCell(i, row, col);
                if (guess(nextRow, nextCol)) {
                    return true;
                }
            }
        }
        sb.setCell(sb.EMPTY, row, col);
        return false;
    }
} 
```

整个项目可以在[作者网站](http://www.kernel-panic.it/software/sudokiller/sudokiller.java.html)上找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:14:42.907

这里怎么样：

```
sb.setCell(i, row, col);
Thread.sleep(100);
if (guess(nextRow, nextCol)) { 
```

注意`sleep`有一个异常需要处理（即使没有抛出），所以最简单的解决方案：

```
sb.setCell(i, row, col);
try { Thread.sleep(100); } catch(InterruptedException e) {}
if (guess(nextRow, nextCol)) { 
```

那是：

*   经过一个`set`和
*   在递归调用之前

上述任何一个或两个通常都是不错的候选者（取决于情况）。

你甚至可以把它放在**方法**`setCell`中。

# php - 无法使用 php SDK 重现 Graph Explorer 输出

> ID：14923708
> 
> 赞同：0
> 
> 时间：2013-02-17T17:11:17.047
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

当我在图形资源管理器中输入用户 ID 时，例如`/100005254861029`我获得了该用户的所有公共个人资料信息。我已将此帐户设置为用于测试目的，并将所有个人资料信息公开。屏幕：

![](../Images/b3b2215ee82c940fbca5389e366b6b46.png)

但是，当我在代码中执行相同的 API 调用时，`$search = $facebook->api('/100005254861029');`我得到的唯一输出是

```
Array ( [id] => 100005254861029 [name] => Simon Diamond [first_name] => Simon
[last_name] => Diamond [link] => http://www.facebook.com/simon.diamond.397 [username] =>
simon.diamond.397 [gender] => male [locale] => en_GB [updated_time] =>
2013-02-14T11:18:49+0000 )` 
```

同样，当我使用 Graph Explorer 中的下拉框并更改为我的应用程序时，尽管所有配置文件字段都是公共的，但我只能得到这个非常有限的回报。

在我的 PHP 代码中生成会话时，我尝试调试资源管理器提供的访问令牌并将完全相同的范围粘贴到“req_perms”数组中。

# iphone - 如何在触摸并按住期间动态更改 UIButton 标题

> ID：14923710
> 
> 赞同：3
> 
> 时间：2013-02-17T17:11:27.430
> 
> 标签：iphone, ios, uibutton

我正在按照[这个答案](https://stackoverflow.com/a/3284950/1506363)更改我的 UIButton 的标题。总而言之，这是我必须做的：

1.  当用户按下时，按钮的标题开始改变。

2.  按住触摸时，它应该每 1 秒更改一次，并且用户应该能够看到它。

3.  当用户触摸（停止触摸）时，按钮标题应固定为最后保持的值。

我使用[setTitle:forState 处理 1：](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-SW7)

我使用[setTitle:forState:](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-SW7)处理 2 。只要计时器在用户触摸后每 1 秒不断触发，这种情况就会一直发生。

我使用[titleForState](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-SW11)处理 3 。但是在这里我没有得到 2 中设置的值。有时当我得到正确的值时，仍然存在一个问题：触摸结束后，我仍然在 UI 中看到那个自定义 UIButton 上的旧标题，而不是我的那个使用 titleForState 阅读。（就此而言，即使 UIButton.textLabel.text 给出了错误的值）

1 - 我是否遵循正确的触摸和按住方法？（我的意思是使用描述的计时器方法来设置和读取 UIButton 标题）

2 - 如果是，我应该在我的代码中更改什么以读取正确的 UIButton 标题值？

编辑：

我摆脱了上面 3 中遇到的问题。问题的原因是：我`UIControlState`在阅读和写作时没有提供相同的组合。我假设如果您提供`UIControlStateNormal | UIControlStateHighlighted`用于编写​​标题然后`UIControlStateNormal`用于读取它，它应该返回当前的标题值，反之亦然。不幸的是，事实并非如此。我更改了我的应用程序逻辑，以便我每次都只需要使用其中一种状态。

然而，主要问题仍然存在（上面的 2） - 如何在 UIButton 仍处于突出显示状态时显示标题。触摸时标题完全不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:40:32.697

> 如何在 UIButton 仍处于突出显示状态时显示标题。触摸时标题完全不可见。

您的按钮是否配置为在触摸事件期间标题消失，而您的代码不会更改标题文本？那就是没有代码更改标题它仍然消失吗？

我认为您的按钮需要重新绘制，`[button setNeedsDisplay]`更改标题文本后尝试调用。

# c++ - 如何为我自己的集合类启用大括号括起来的初始化列表？

> ID：14923711
> 
> 赞同：4
> 
> 时间：2013-02-17T17:11:29.353
> 
> 标签：c++, collections, c++11, std, initializer-list

给定这个示例类：

```
template<typename T>
class ExampleContainer
{
private:        
  std::map<T, int> _objects;
  int _sum;

public:
  ExampleContainer()
    : _objects(), _sum(0)
  {
  }

  void Add(T obj, int add)
  {
    _objects[obj] = add; // yes this is bad, but it's an example.
    _sum += add;
  }
}; 
```

能够像这样使用它需要什么：

```
ExampleContainer<char*> _rarities =
{
  { "One", 600 },
  { "Two", 200 },
  { "Three", 50 },
  { "Four", 10 },
  { "Five", 1 },
}; 
```

我知道这一定是可能的，因为我已经可以像这样初始化 std::map 了。

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T17:17:42.520

`std::initializer_list`只需向您的类添加一个接受 an 的构造函数`ExampleContainer`：

```
ExampleContainer(std::initializer_list<typename std::map<T, int>::value_type> l)
    :
    _objects(l)
{
} 
```

每次使用花括号初始化对象时都会调用它，如下例所示：

```
ExampleContainer<char*> _rarities =
{
    ...
}; 
```

这样，花括号中的每个条目都将成为初始化列表的一个元素。

由于这里的初始化列表的基础类型是`std::map<T, int>::value_type`，该类型的临时对象将从您提供的值构造：

```
ExampleContainer<char*> _rarities =
{
    { "One", 600 },     // Each of these entires will cause the creation of
    { "Two", 200 },     // a temporary object of type:
    { "Three", 50 },    //     std::pair<char* const, int>
    { "Four", 10 },     // that will become an element of the initializer
    { "Five", 1 },      // list received by the constructor.
}; 
```

另请注意，从字符串文字到的转换在 C++03`char*`中已*弃用，在 C++11 中***无效**（字符串文字`char const[]`在 C++11 中具有类型）。因此，您可能希望为变量`_rarities`指定类型`ExampleContainer<char const*>`（C 数组类型衰减为指针类型）。

**更新：**

正如@LightnessRacesInOrbit 在评论中正确指出的那样，如果您不打算在容器中仅使用字符串文字，这种方法很危险（这是我从您的示例中假设的，但实际上没有任何暗示）。改用是一个更好的主意`std::string`（因此您应该声明`_rarities`为`ExampleContainer<std::string>`）。

# php - 首先显示匹配最多的结果

> ID：14923713
> 
> 赞同：0
> 
> 时间：2013-02-17T17:11:37.900
> 
> 标签：php, mysql

我需要 php 来首先显示数据库中结果最多的结果。

我有：

```
foreach($keywords as $key=>$keyword) {
      $where .= "`title` LIKE '%$keyword%'";
      if ($key != ($total_keywords - 1)) {
        $where .= " OR ";
      }
    }

$results = "SELECT * FROM topics WHERE $where"; 
```

所以如果有人在搜索

> 《如何生火》

它会显示

1.  如何开始火
2.  开火
3.  如何
4.  开始

换句话说，最匹配关键字的标题优先。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:20:37.543

我之前也遇到过类似的问题，全文搜索不是一个选项，虽然这是一种慢得多的方法，但它似乎很适合我的需求。基本上，`UNION`您的每个结果都像这样并用于`COUNT`计算结果的数量：

```
SELECT Title, COUNT(*) as cnt
FROM (
  SELECT * FROM Topics WHERE Title LIKE '%How%'
  UNION ALL
  SELECT * FROM Topics WHERE Title LIKE '%to%'
  UNION ALL
  SELECT * FROM Topics WHERE Title LIKE '%start%'
  UNION ALL
  SELECT * FROM Topics WHERE Title LIKE '%fire%'
  ) t
GROUP BY Title
ORDER BY 2 DESC 
```

这是[小提琴](http://www.sqlfiddle.com/#!2/e29ee/1)。

结果如下：

> ```
> TITLE              CNT
> How to start fire  4
> to fire start      3
> How to             2
> start              1 
> ```

# java - java单帧应用

> ID：14923714
> 
> 赞同：1
> 
> 时间：2013-02-17T17:11:41.497
> 
> 标签：java, swing, frame

我需要创建一个具有单个窗口且没有任何弹出窗口的应用程序。一切都使用相同的窗口，只改变内容。我将使用 swing 创建应用程序。

我读过[Java: single frame vs multiple frames](https://stackoverflow.com/questions/9363359/java-single-frame-vs-multiple-frames)但我认为这不符合我的要求，因为当应用程序增长时，它会变得更难维护。

我想要 MVC 设计。我正在考虑创建某种控制器堆栈，其中控制器将加载视图和模型。因此，当我需要返回时，只需弹出当前控制器并使用前一个控制器。我的设计可能是错误的，如果有人对如何实现此类应用程序有任何建议，请随时发表评论。

谢谢你的时间。

我已经尝试创建原型类，它可以容纳一堆容器以在它们之间切换。

```
public class WindowManager 
{
protected Stack<Container> frames;// contains frames stack to navigate
protected JFrame wnd; // frame to show

public WindowManager()
{
    this.frames = new Stack<>();
    this.wnd = new JFrame();
    wnd.setSize(640, 480);
    //wnd.setVisible(true);
}

public void addFrame(Container c)
{
    this.frames.push(this.wnd.getContentPane());
    this.wnd.setContentPane(c);
}

public WindowManager removeFrame()
{
    Container c = this.frames.pop();
    wnd.setContentPane(c);
    return this;
}

public void showWindow()
{
    wnd.setVisible(true);
} 
```

}

代替容器堆栈的是控制器堆栈，它将加载视图和模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:17:38.573

您可能应该创建多个`JPanel`对象并将它们放入`CardLayout`中，因此一次只能看到一页。请参见以下示例：

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.Box;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class CardLayoutExample extends JFrame
{
    public CardLayoutExample ()
    {
        setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        getContentPane ().setLayout (new CardLayout ());
        getContentPane ().add (new Fruits (), "Fruits");
        getContentPane ().add (new Seasons (), "Seasons");
        getContentPane ().add (new Colors (), "Colors");
        getContentPane ().add (new Towns (), "Towns");
    }

    public void switchTo (String page)
    {
        ((CardLayout)getContentPane ().getLayout ()).show (getContentPane (), page);
    }

    public static void main (String [] args)
    {
        SwingUtilities.invokeLater (new Runnable()
        {
            @Override
            public void run ()
            {
                CardLayoutExample example = new CardLayoutExample ();
                example.pack ();
                example.setVisible (true);
            }
        });
    }

    private class Colors extends JPanel
    {
        public Colors ()
        {
            Box box = Box.createHorizontalBox ();
            box.add (new JButton (new AbstractAction("Red")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Fruits");
                }
            }));
            box.add (Box.createHorizontalStrut (8));
            box.add (new JButton (new AbstractAction("Green")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Seasons");
                }
            }));
            box.add (Box.createHorizontalStrut (8));
            box.add (new JButton (new AbstractAction("Blue")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Towns");
                }
            }));

            setLayout (new BorderLayout ());
            add (box, BorderLayout.CENTER);
        }
    }

    private class Fruits extends JPanel
    {
        public Fruits ()
        {
            Box box = Box.createVerticalBox ();
            box.add (new JButton (new AbstractAction("Apple")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Colors");
                }
            }));
            box.add (Box.createVerticalStrut (8));
            box.add (new JButton (new AbstractAction("Orange")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Seasons");
                }
            }));
            box.add (Box.createVerticalStrut (8));
            box.add (new JButton (new AbstractAction("Pear")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Towns");
                }
            }));

            setLayout (new BorderLayout ());
            add (box, BorderLayout.CENTER);
        }
    }

    private class Seasons extends JPanel
    {
        public Seasons ()
        {
            Box box = Box.createHorizontalBox ();
            box.add (new JButton (new AbstractAction("Winter")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Colors");
                }
            }));
            box.add (Box.createHorizontalStrut (8));
            box.add (new JButton (new AbstractAction("Spring")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Fruits");
                }
            }));
            box.add (Box.createHorizontalStrut (8));
            box.add (new JButton (new AbstractAction("Summer")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Towns");
                }
            }));

            setLayout (new BorderLayout ());
            add (box, BorderLayout.CENTER);
        }
    }

    private class Towns extends JPanel
    {
        public Towns ()
        {
            Box box = Box.createVerticalBox ();
            box.add (new JButton (new AbstractAction("Moscow")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Colors");
                }
            }));
            box.add (Box.createVerticalStrut (8));
            box.add (new JButton (new AbstractAction("London")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Fruits");
                }
            }));
            box.add (Box.createVerticalStrut (8));
            box.add (new JButton (new AbstractAction("Tokyo")
            {
                @Override
                public void actionPerformed (ActionEvent e)
                {
                    switchTo ("Seasons");
                }
            }));

            setLayout (new BorderLayout ());
            add (box, BorderLayout.CENTER);
        }
    }
} 
```

# asp.net-mvc-4 - 找不到布局页面

> ID：14923718
> 
> 赞同：22
> 
> 时间：2013-02-17T17:11:53.873
> 
> 标签：asp.net-mvc-4

我收到错误：**在以下路径中找不到布局页面“_Layout”：“~/Views/Home/_Layout”。**

但布局页面位于此路径：“~/Views/Shared/_Layout”

有什么问题？

我刚开始这个项目，它看起来像这样：

控制器：

```
namespace Testing.Controllers
{
    public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            return View();
        }
    }
} 
```

索引视图：

```
@model dynamic

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}

<h2>title</h2> 
```

_ViewStart.cshtml：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

解决方案资源管理器：

![解决方案资源管理器：](../Images/c315d9309abf3d90eba860d7436ce505.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-17T17:13:57.117

确保在您的`~/Views/_ViewStart.cshtml`文件中设置了正确的路径：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

此外，如果在您的视图中您要覆盖布局，请确保为此布局指定正确的路径。除此之外，可能还有一些服务器端代码正在设置布局（例如自定义操作过滤器，或者`ViewResult`允许指定布局的重载，......）。

* * *

更新：

您似乎已经像这样设置了布局：

```
@{ 
    ViewBag.Title = "title"; 
    Layout = "_Layout"; 
} 
```

您需要将布局的位置指定为绝对路径：

```
@{ 
    ViewBag.Title = "title"; 
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

但更好的方法是在你的`Index`视图中去掉这个 Layout 设置：

```
@{ 
    ViewBag.Title = "title"; 
} 
```

现在`_ViewStart.cshtml`将使用您的值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-08T14:07:09.403

一旦我部署了我的服务，我就会出现同样的问题，但无法在本地复制。对我来说，问题是视图**没有**为其构建操作设置。所以错误是正确的，因为该文件在服务器上不存在，尽管它存在于存储库中。

解决此问题的解决方案：

1.  右键单击缺少的视图并打开*属性* [视图属性](https://i.stack.imgur.com/NTqpT.png)
2.  确保构建操作设置为*内容*
3.  更新 csproj 文件以匹配新的构建操作。[.csproj 文件](https://i.stack.imgur.com/YZla0.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-18T17:08:56.413

使用错误的波浪号也会产生此错误。

确保使用键盘上的波浪号“~”。

如果您从书中复制代码，波浪号可能是无效字符（请注意，Unicode 中有多个波浪号）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-26T15:43:59.937

在您的情况下，我看不到`_layout.cshtml`..您必须提供文件的正确路径`_layout.cshtml`..如果该文件存在于同一个视图文件夹中而`_ViewStart.cshtml`无需添加`.cshtml`部分。但是如果您从另一个文件夹中引用它，请确保添加`.cshtml`这样的部分`_layout.cshtml`..

所以你必须添加正确的路径`_layout.cshtml`。像下面

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-22T05:14:03.240

而不是这个

```
@{ 
    ViewBag.Title = "title"; 
    Layout = "_Layout"; 
} 
```

索引视图将是这样的

```
@{ 
    ViewBag.Title = "title"; 
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-12T10:24:31.747

也许你有一个 PartialView，现在你想在 ActionResult 方法中返回 View 而不是 PartialView。

# php - 根据PHP中另一个数组中的另一个值在一个数组中查找键

> ID：14923722
> 
> 赞同：1
> 
> 时间：2013-02-17T17:12:19.630
> 
> 标签：php, arrays

我从一个应用程序收到了这些数据。我的参数列表：

1.  catids = 1, 2, 3
2.  订阅 = 1, 1, 0 [ 0 = 保持订阅，1 = 按此顺序取消订阅 catids]
3.  appuser_id = XXX

现在我必须根据收到的数据更新我的订阅表。架构如下：

```
--cat_id--appuser_id
  1     |     10    |
  2     |     10    |
  3     |     10    |   
  4     |     20    |
  5     |     20    |
--------------------- 
```

那么考虑到查询性能，我怎样才能巧妙地做到这一点呢？我能想到的方法是：

1.  获取所有值为 1 的订阅。
2.  找出步骤 1 中找到的值的相应 catid。
3.  从表中删除这些条目。

我只能达到第 1 步。我想不出一种方法来匹配在步骤 1 中找到的条目与它们各自的 catid。

```
$cat = '1,2,3';
$subs = '1,1,0';

$catA = explode(',',$cat);
$subsA = explode(',',$subs);

$deleteSubList = array();
foreach($subsA as $v){
    if($v == 1){
        array_push($deleteSubList,$v);
    }
}

print_r($deleteSubList); 
```

这给了我`Array ( [0] => 1 [1] => 1 )`. 我怎么知道它属于`$catA`数组中的类别之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:22:11.260

您需要记住您的密钥：

```
foreach($subsA as $key => $v){
        if($v == 1){
            $deleteSublist[$key] = $v;
        }
    } 
```

然后 $deleteSublist 将是一个数组，其中包含数组的所有 id 作为键。

```
foreach($deleteSublist as $key => $value) {
   // Delete $cat[$key]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:31:17.360

```
$cat = '1,3,3';
$subs = '1,1,0';

$catA = explode(',', $cat);
$subsA = explode(',', $subs);

for ($i = 0; $i <= count($subsA); $i++) {
    if ($subsA[$i] == 1) {
        $deleteSubList[$catA[$i]] = $subsA[$i];
    }
}
print_r($deleteSubList); 
```

并删除：

```
foreach($deleteSubList as $key => $value) {
    mysql_query("DELETE FROM tbl WHERE cat_id = " . $key);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T17:42:49.990

这是一种更简单的方法

```
$deleteSubList = array_filter( array_combine( $catA, $subsA ) );

$sql = sprintf( "delete from table where cat_id in(%s) and appuser_id=%s", implode( ',' array_keys( $deleteSubList ) ), $appuser_id ); 
```

# java - DAO & BO（数据访问层）——架构

> ID：14923725
> 
> 赞同：18
> 
> 时间：2013-02-17T17:12:37.753
> 
> 标签：java, database, dao, layer

我对网上找到的一个例子有点困惑 - [spring & hibernate](http://www.mkyong.com/spring/maven-spring-hibernate-mysql-example/) (point `4\. Model & BO & DAO`)。有 Model、DAO 和 BO 类（+ DAO 和 BO 接口）。我不清楚的是，如果 DAO 和 BO 共享完全相同的功能，为什么它们会被分成不同的类（唯一的区别是 BO 有一个 DAO 设置器）。

作者仅解释了该模式：

> 有助于清楚地识别层以避免弄乱项目结构

但对我来说似乎过度设计（至少在这种情况下）。我知道这个例子很简单，但是这个类分离有什么用呢？有人可以提供一个例子吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-17T17:19:47.050

他们所谓的 BO 似乎是一种商业服务。DAO 的工作是包含与持久性相关的代码：插入、更新、查询数据库。

服务划分事务，包含业务逻辑，并且通常使用一个或多个 DAO 来实现此逻辑。对于某些用例，服务只是委托给 DAO。对于其他人，它调用一个或多个 DAO 的多个方法。

经典的例子是汇款服务：

```
public void transferMoney(Long sourceAccountId, Long targetAccountId, BigDecimal amount) {
    Account source = accountDAO.getById(sourceAccountId);
    Account target = accountDAO.getById(targetAccountId);
    if (source.getBalance().compareTo(amount) < 0) {
        throw new NotEnoughMoneyException();
    }
    source.decrementBalance(amount);
    target.incrementBalance(amount);
    auditDAO.insertTransaction(sourceAccountId, targetAccountId, amount);
    // other business logic
} 
```

# input - 从 FORTRAN90 中的 TXT 文件中读取复数数组和向量

> ID：14923726
> 
> 赞同：2
> 
> 时间：2013-02-17T17:12:37.607
> 
> 标签：input, text-files, fortran90, complex-numbers

我正在尝试在模块中编写一个子例程，我可以将其包含在各种代码中以从给定文件中读取数据。我有几个代码（数值算法）将从文件中读取数据。

该文件具有以下格式：

第一项：我的数据数组的行数和列数（例如 720）

第一个 n(=720) 个条目：矩阵 A 的整个第一行 第二个 n(=720) 个条目：矩阵 A 的整个第二行

等等

最后 n(=720) 个条目：向量 b 的所有 n 个条目

每个条目有两列，一列用于数字的 REAL 部分，另一列用于 COMPLEX 部分。

总之，一个示例基本输入文件：

```
 2
    -0.734192049E+00  0.711486186E+01
     0.274492957E+00  0.378855374E+01
     0.248391205E-01  0.412154039E+01
    -0.632557864E+00  0.195397735E+01
     0.289619736E+00  0.895562183E+00
    -0.284756160E+00 -0.892163111E+00 
```

其中第一个条目表示它是一个 2x2 矩阵和 2x1 向量前 4 行是矩阵 A 的四个条目（左列 Real，右列 Imag。）最后两行是向量 b 的两个条目（左列 Real ，右列 Imag。）我编写了以下代码来尝试实现它，但它只是输出错误的结果：

```
 n=           2
    A= (  0.0000000    , 1.08420217E-19) (-9.15983229E-16, 3.69024734E+19) ( 1.26116862E-43,  0.0000000    ) (  0.0000000    ,  0.0000000    )
    b= (  0.0000000    , 1.08420217E-19) (  0.0000000    , 1.08420217E-19) 
```

使用代码：

```
SUBROUTINE matrix_input(n,A,b) 
IMPLICIT NONE 
!
INTEGER, INTENT(OUT)                                  ::n !size of matrix to be read
COMPLEX, DIMENSION(:,:), INTENT(OUT), ALLOCATABLE     ::A !system matrix to be read
COMPLEX, DIMENSION(:), INTENT(OUT), ALLOCATABLE       ::b !RHS b vector to be read
DOUBLE PRECISION                                      ::A_Re,A_Im,b_Re,b_Im !
INTEGER                                               ::i,j
!----------------------------------------------------------   
! Subroutine outputs 'n'=size of matrix, 'A'=system matrix
! 'b'= RHS vector
!matrix194.txt
OPEN (UNIT = 24, FILE = "matrix_input_test.txt", STATUS="OLD", FORM="FORMATTED",     ACTION="READ")

!Read in size of matrix
READ(24,*) n  

ALLOCATE(A(n,n))
ALLOCATE(b(n))

!Read matrix A:
DO i=1,n
   DO j=1,n

    READ(24,*) A_Re, A_Im
    A(i,j)=CMPLX(A_Re,A_Im)

   END DO 
END DO 

!Read RHS vector b:
DO i=((n*n)+1),((n*n)+n)

   READ(24,*) b_Re, b_Im
   b(i)=CMPLX(b_Re,b_Im)

END DO 

CLOSE(UNIT=24)
DEALLOCATE(A,b)
END SUBROUTINE matrix_input 
```

**编辑：**根据 HPC Mark 的见解，我编辑了我的代码，这产生了正确的结果，但是如果有任何命令可能导致以后出现问题（例如，我将使用非常大的数组）我会非常感谢听到他们的消息！

```
 SUBROUTINE matrix_input(n,A,b) 
   IMPLICIT NONE 
   !
   INTEGER, INTENT(OUT)                                  ::n !size of matrix to be read
   COMPLEX, DIMENSION(:,:), INTENT(OUT), ALLOCATABLE     ::A !system matrix to be read
   COMPLEX, DIMENSION(:), INTENT(OUT), ALLOCATABLE       ::b !RHS b vector to be read
   !
   COMPLEX, DIMENSION(:), ALLOCATABLE                    ::temp,A_temp !temp vector of matrix A
   DOUBLE PRECISION                                      ::A_Re,A_Im,b_Re,b_Im 
   INTEGER                                               ::i,j,k
   !----------------------------------------------------------   
   ! Subroutine outputs 'n'=size of matrix, 'A'=system matrix
   ! 'b'= RHS vector
   !matrix194.txt
   OPEN (UNIT = 24, FILE = "matrix_input_test.txt", STATUS="OLD", FORM="FORMATTED", ACTION="READ")

   !Read in size of matrix
   READ(24,*) n  

   !Allocate arrays/vectors
   ALLOCATE(A(n,n))
   ALLOCATE(b(n))
   ALLOCATE(temp(n*n+n))
   ALLOCATE(A_temp(n*n))

   !Read matrix A & vector b: 
   !16 characters, 9 decimal places, exponent notation, 2 spaces
   DO i=1,(n*n)+n
       READ(24, FMT="(E16.9, 2X, E16.9)") A_Re, A_Im
       temp(i)=CMPLX(A_Re,A_Im)   
   END DO 

   !Select A:
   DO i=1,n*n
      A_temp(i)=temp(i)
   END DO 
   !Reshape
   A=RESHAPE(A_temp, (/n,n/))

   !Select b:
   k=0
   DO i=n*n+1,n*n+n
      k=k+1
      b(k)=temp(i)
   END DO 

   CLOSE(UNIT=24)
   !Do not deallocate A & b otherwise won't return anything properly
   DEALLOCATE(temp, A_temp)
   END SUBROUTINE matrix_input 
```

**编辑代码的结果：**

```
 n=           2
    A= (-0.73419207    ,  7.1148620    ) ( 0.27449295    ,  3.7885537    ) ( 0.24839121    ,  4.1215405    ) (-0.63255787    ,  1.9539773    )
    b= ( 0.28961974    , 0.89556217    ) (-0.28475615    ,-0.89216310    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:30:52.283

高性能标记已经确定了重大问题，其他一些说明......

*   您更新代码中的格式规范建议数字之间有两个空格。您的示例输入建议一个 - 请注意第二个数字上的（可选）前导符号！

*   `A`并且`b`是可分配的虚拟参数。这是 Fortran 2003 广泛支持且非常有用的功能。你已经远远超过了 Fortran 90！如果那是无意的，那么您将需要认真重新设计事物，否则...

*   超越 Fortran 90 是一件好事 - Fortran 95（这是所有当前主流 Fortran 编译器提供的最低标准支持级别 - Fortran 90 实际上已过时）和 Fortran 2003 通过扩展修复了 Fortran 90 中的严重缺陷 - 从 Fortran执行过程的 return 或 end 语句时，会自动释放 95 个本地可分配对象。因此，您最后的 deallocate 语句是无害的，但也是多余的。

*   您将每个复数的分量读入双精度（请注意，现代 Fortran 使用的常见源代码样式倾向于避免使用`DOUBLE PRECISION`类型说明符 - 它只是 的同义词`REAL(KIND(0.0D0))`）。然后将它们存储到默认（单精度）复数中。这是故意的吗？如果是这样，它无害但有点无意义/不一致，否则如果您打算以更高的精度存储输出数组中的实部和虚部，那么您需要适当地更改复数数组的声明。所有可用于的种类都`REAL`必须可用于`COMPLEX`，因此您的声明可以是`COMPLEX(KIND(0.0D0))`（通常您会将种类作为命名常量）。

*   在输入-输出列表中，一个复杂的标量变量代表两个有效项——实部后跟虚部。因此，您的双精度变量`A_Re`和`A_Im`等有点多余......`READ(24, FMT="(E16.9, 2X, E16.9)") temp(i)`这就是所需要的。

*   就个人而言，我不会打扰其他临时数组 - 一旦您知道输入数据的大小（第一行），将您的`A`和`B`数组分配到必要的大小并直接读取它们。在 io 列表中，数组按数组元素顺序扩展为其元素（第一个下标变化最快） - 这似乎是您的文件的排列方式。您可以将其与所谓的格式反转结合起来，以消除循环的需要。

*   从您的子例程返回后，可分配数组“知道”它们的形状 - 无需单独返回该信息。同样，无害但多余。

因此 - 我认为你的整个子程序可能看起来像：

```
! Read A and B in from a file that has... etc, etc...
! Assuming a module procedure, where the module already has IMPLICIT NONE.
SUBROUTINE matrix_input(A, b)
  ! Number of rows and columns of A, elements of B.
  INTEGER :: n
  ! Our output data.  
  COMPLEX(KIND(0.0D0)), INTENT(OUT), ALLOCATABLE :: A(:,:), b(:)
  ! Number of the logical unit for IO.  In F2008 this becomes a variable 
  ! and you use the NEWUNIT specifier.
  INTEGER, PARAMETER :: unit = 24
  ! The name of the file to read the data from.
  CHARACTER(*), PARAMETER :: filename = "matrix_input_test.txt"
  ! Format for the array and vector component of the data.
  CHARACTER(*), PARAMETER :: fmt = "(E16.9, 1X, E16.9)"
  !*****************************************************************************      
  ! Connect to the file for sequential formatted reading.
  OPEN(unit, FILE=filename, STATUS='OLD', ACTION='READ')
  READ (unit, *) n            ! Get array dimension.
  ALLOCATE(A(n,n), b(n))      ! Allocate result arrays.
  READ (unit, fmt) A          ! Read in A.
  READ (unit, fmt) b          ! Read in B.
  CLOSE (unit)                ! Clean up.
END SUBROUTINE matrix_input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:28:16.090

你的代码让我很困惑。 声明`SUBROUTINE matrix_input`数组`A`并`b`与`allocatable`. `intent(out)`就在`END SUBROUTINE`声明之前，您继续并取消分配它们。您希望子例程返回调用例程什么？

# java - 按下我的 JComponent 时触发 MouseListener，即使它是由 AffineTransform 转换的

> ID：14923727
> 
> 赞同：0
> 
> 时间：2013-02-17T17:12:54.740
> 
> 标签：java, swing, jcomponent, mouselistener, affinetransform

我正在尝试将 MouseListener 添加到我的自定义 JComponent。我只想在按下圆的边界时触发 MouseListener（JComponent 的绘画方法绘制一个圆）。我已经尝试使用下面的代码，但我无法让它工作（特别是在`mousePressed`方法中）。我该如何解决这个问题？

SSCCE：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.AffineTransform;
import java.awt.geom.Rectangle2D;
import javax.swing.JComponent;
import javax.swing.JFrame;

public class AffineTransformTest {

    private static TransformingCanvas canvas;

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        canvas = new AffineTransformTest.TransformingCanvas();
        TranslateHandler translater = new TranslateHandler();
        canvas.addMouseListener(translater);
        canvas.addMouseMotionListener(translater);
        canvas.addMouseWheelListener(new ScaleHandler());
        frame.setLayout(new BorderLayout());
        frame.getContentPane().add(canvas, BorderLayout.CENTER);
        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);
    }

    private static class TransformingCanvas extends JComponent {

        private double translateX;
        private double translateY;
        private double scale;

        TransformingCanvas() {
            translateX = 0;
            translateY = 0;
            scale = 1;
            setOpaque(true);
            setDoubleBuffered(true);
        }

        @Override
        public void paint(Graphics g) {

            AffineTransform tx = new AffineTransform();
            tx.translate(translateX, translateY);
            tx.scale(scale, scale);
            Graphics2D ourGraphics = (Graphics2D) g;
            ourGraphics.setColor(Color.WHITE);
            ourGraphics.fillRect(0, 0, getWidth(), getHeight());
            ourGraphics.setTransform(tx);
            ourGraphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                    RenderingHints.VALUE_ANTIALIAS_ON);
            ourGraphics.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
                    RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
            ourGraphics.setColor(Color.BLACK);
            ourGraphics.fillOval(50, 50, 50, 50);
        }
    }

    private static class TranslateHandler implements MouseListener,
            MouseMotionListener {

        private int lastOffsetX;
        private int lastOffsetY;

        public void mousePressed(MouseEvent e) {
            lastOffsetX = e.getX();
            lastOffsetY = e.getY();

            double width = canvas.scale * 50;
            double height = canvas.scale * 50;
            double x = (AffineTransformTest.canvas.getWidth() - width) / 2;
            double y = (AffineTransformTest.canvas.getHeight() - height) / 2;
            Rectangle2D.Double bounds = new Rectangle2D.Double(x, y, width, height);
            System.out.println(bounds + " " + e.getPoint());
            if (bounds.contains(e.getPoint())) {
                System.out.println("Click!");
            }
        }

        public void mouseDragged(MouseEvent e) {
            int newX = e.getX() - lastOffsetX;
            int newY = e.getY() - lastOffsetY;

            lastOffsetX += newX;
            lastOffsetY += newY;

            canvas.translateX += newX;
            canvas.translateY += newY;

            canvas.repaint();
        }

        public void mouseClicked(MouseEvent e) {
        }

        public void mouseEntered(MouseEvent e) {
        }

        public void mouseExited(MouseEvent e) {
        }

        public void mouseMoved(MouseEvent e) {
        }

        public void mouseReleased(MouseEvent e) {
        }
    }

    private static class ScaleHandler implements MouseWheelListener {

        public void mouseWheelMoved(MouseWheelEvent e) {
            if (e.getScrollType() == MouseWheelEvent.WHEEL_UNIT_SCROLL) {
                canvas.scale += (.1 * e.getWheelRotation());
                canvas.scale = Math.max(0.00001, canvas.scale);
                canvas.repaint();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T17:41:37.503

这是代码。一些快速说明，代码中仍有一些调试，并将对 LOGGER 对象的调用替换为 System.out.println()。

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.geom.AffineTransform;
import java.awt.geom.Area;
import java.awt.geom.Point2D;
import java.util.logging.Logger;

import javax.swing.JComponent;
import javax.swing.event.MouseInputListener;

public abstract class LCARSComponent extends JComponent implements MouseInputListener {

/**
 * A reference to the global Logger object.
 */
protected final static Logger LOGGER = Logger.getLogger(Logger.GLOBAL_LOGGER_NAME);

protected int x;
protected int y;
protected int w;
protected int h;

protected double scaleFactor = 1.0;

protected Area area;
protected Area scaledArea;
protected int style;

protected Color color;

protected AffineTransform renderingTransform;

protected ActionListener actionListener;

public LCARSComponent(Container parent, int x, int y, int w, int h, int style) {

    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;

    this.style = style;

    setBounds(x,y,w,h);

    addMouseListener(this);

}

@Override
protected void paintComponent(Graphics g) {

    /**
     * First, paint the background if the component is opaque. Required when 
     * JComponent is extended, and the paintCompnent() method is overridden.
     */
    if(isOpaque()) {
        g.setColor(getBackground());
        g.fillRect(0, 0, getWidth(), getHeight());
    }

    /**
     * Create a Graphics2D object so we can use Java 2D features.
     */
    Graphics2D g2d = (Graphics2D) g.create();

    /**
     * Set the anti aliasing rendering hint and the color to draw with.
     */
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setColor(color);

    scaleComponent();       

    /**
     * Draw the Area object of the LCARS component, and fill it.
     */
    g2d.draw(scaledArea);
    g2d.fill(scaledArea);

    g2d.drawRect(scaledArea.getBounds().x, scaledArea.getBounds().y, scaledArea.getBounds().width, scaledArea.getBounds().height);

    /**
     * Clean up when the method has completed by disposing the Graphics2D object that was created.
     */
    g2d.dispose();

}

protected void scaleComponent() {
    double sw = (double)getParent().getWidth() / (double)getParent().getPreferredSize().width;
    double sh = (double)getParent().getHeight() / (double)getParent().getPreferredSize().height;

    LOGGER.info("scaledWidth = " + sw);
    LOGGER.info("scaledHeight = " + sh);

    double scaleFactor;

    if(sh < sw) {
        scaleFactor = sh;
    }
    else {
        scaleFactor = sw;
    }

    LOGGER.info("scaleFactor = " + scaleFactor);

    if(scaleFactor != this.scaleFactor) {
        this.scaleFactor = scaleFactor;

        scaledArea = new Area(area);
        renderingTransform = new AffineTransform();
        renderingTransform.scale(scaleFactor, scaleFactor);
        scaledArea.transform(renderingTransform);           
    }

    setBounds((int)(this.x*scaleFactor), (int)(this.y*scaleFactor), this.getWidth(), this.getHeight());
}

public Point screenToComponent(Point pt) {

    if(renderingTransform == null) {
        Graphics2D g2d = (Graphics2D)(this.getParent().getGraphics());
        renderingTransform = g2d.getTransform();            
    }

    Point2D pt2d = renderingTransform.transform(pt,null);

    LOGGER.info("mouse click: " + pt.getX() + ", " + pt.getY() + "  --  " + pt2d.getX() + ", " + pt2d.getY());
    return new Point((int)Math.round(pt2d.getX()), (int)Math.round(pt2d.getY()));
}

public void setActionListener(ActionListener actionListener) {
    this.actionListener = actionListener;
}

@Override
public void mouseClicked(MouseEvent e) {

    Point pt = e.getPoint();
    LOGGER.info("mouseClicked: " + this.getName() + " - " + pt.getX() + ", " + pt.getY());

    if(area.contains(e.getPoint())) {

        if(actionListener != null) {
            actionListener.actionPerformed(new ActionEvent(e.getSource(), e.getID(), e.paramString()));
        }

        if(color.equals(Color.black))
            color = Color.blue;
        else
            color = Color.black;
        this.repaint();
    }
}

@Override
public void mousePressed(MouseEvent e) {
    // TODO Auto-generated method stub
    if(area.contains(e.getLocationOnScreen()))
        System.out.println("mousePressed()...");
}

@Override
public void mouseReleased(MouseEvent e) {
    // TODO Auto-generated method stub
    if(area.contains(e.getLocationOnScreen()))
        System.out.println("mouseReleased()...");
}

@Override
public void mouseEntered(MouseEvent e) {
    Point pt = e.getPoint();
    // TODO Auto-generated method stub
     System.out.println("mouseEntered()...");
    LOGGER.info("mouseEntered: " + this.getName() + " - " + pt.getX() + ", " + pt.getY());

}

@Override
public void mouseExited(MouseEvent e) {
    // TODO Auto-generated method stub
    Point pt = e.getPoint();
    System.out.println("mouseExited()...");
    LOGGER.info("mouseExited: " + pt.getX() + ", " + pt.getY());
}

@Override
public void mouseDragged(MouseEvent e) {
    // TODO Auto-generated method stub
    System.out.println("mouseDragged()...");
}

@Override
public void mouseMoved(MouseEvent e) {
    // TODO Auto-generated method stub
    System.out.println("mouseMoved()...");
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T15:28:43.283

两点：

首先，我将使用 Shape 或 Area 对象并使用其 .contains() 方法。Bounds 始终是围绕整个形状的 Rectangle。此外，当您可以简单地使用 JComponent 的 setBounds() 方法时，不确定为什么要创建边界矩形。

其次，可以转换 JComponent 的边界，但我还没有找到任何内置的东西来缩放它们。不过，您可以动态更改大小。我正在研究一个相同的问题。现在，我正在考虑在 JComponent 缩放时动态更改边界。我试图了解屏幕坐标和 JComponent 坐标之间的相关性。鼠标坐标似乎总是在未缩放的帧/屏幕坐标中（可能是我正在使用的全屏模式的产物。我见过的解决方案在 JPanel 中绘制所有内容并且不使用离散的 JComponents 来解决缩放问题。代码有点难以理解，而且不是特别模块化，但它确实有效。

无论如何，我相信它最终可以完成。这只是让数学正确的问题。完成后，我将发布可扩展 JComponent 扩展的代码并且它工作可靠。希望这有所帮助。

# php - 防止 Firefox 篡改数据

> ID：14923739
> 
> 赞同：1
> 
> 时间：2013-02-17T17:13:46.643
> 
> 标签：php, javascript, post, canvas

我正在开发一个带有高分列表的简单 javascript canvas pong 游戏，我想知道是否有任何方法可以在不使用 POST 或 GET 方法的情况下将分数存入数据库，因为高分列表已经被弄乱了由使用 Firefox 篡改数据插件的人创建。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:03:23.187

这是一篇讨论这个主题的博客文章。它更多地谈论使用 flash 而不是 javascript，但想法是相同的：

> [http://spalatnik.com/blog/2012/02/20/securing-php-flash-communication/](http://spalatnik.com/blog/2012/02/20/securing-php-flash-communication/)

注意：我写了那篇文章。无耻的插头。

编辑：固定链接

# proxy - OrientDB POJO 方法代理无法正常工作

> ID：14923748
> 
> 赞同：1
> 
> 时间：2013-02-17T17:14:42.847
> 
> 标签：proxy, pojo, orientdb

我正在使用 OrientDB 的 OObjectDatabaseTx 实现将我的 POJO 存储在数据库中。当我尝试使用 SQL commant 检索一些 POJO 时，我得到了结果集，但 POJO 的属性似乎为空（getters regurning null）。

我正确注册了我的课程

```
db.getEntityManager().registerEntityClass(MyUser.class); 
```

以下代码描述了我的问题：

```
 Map<String, String> params = new HashMap<String, String>();
    params.put("name", username);
    List<MyUser> users = db.command(
            new OSQLSynchQuery<MyUser>(
                  "select * from MyUser where "
                + "name = :name"))
                .execute(params);
    for (MyUser founduser : users) {

        ODocument doc = db.getRecordByUserObject(founduser, false);
        String pass = doc.field("pwd");

        assertEquals(pass != null, true); // passes
        assertEquals(founduser.getPwd() != null, true); // fails
    } 
```

如何让 getPwd 方法返回正确的值？

我现在使用的是 1.3.0 版本，这在之前已经有效（afaik 在 1.1.0 中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:07:26.700

你能看到 POJO 里面是否设置了“pwd”字段吗？

# php - mysql左连接9个表

> ID：14923751
> 
> 赞同：2
> 
> 时间：2013-02-17T17:14:57.707
> 
> 标签：php, mysql

所以情况是我有一个涉及 9 个表的查询，我需要编写它以便它返回所有记录，即使表中`impactid`是.`workorderstates``NULL`

在下面的查询之前，我注意到我没有得到所有“打开”的结果，因为最初我只是在表中的位置和情况`workorderstates.impactid = impactdefiniton.impactid`下这个条件不成立，因此消除了应该返回的记录，因为它们实际上是“开放的”。`impactid``NULL``workorderstates`

所以我在下面设计了这个查询，但每次运行它都不起作用。它将返回不唯一的表别名`workorder`。如果我对表使用别名，它只会在连接中的正确表上移动，因为它不是唯一的。任何人都可以在重组查询方面为我提供任何帮助以使其正常工作吗？我已经尝试了很多变体，有趣的是，第二个查询几乎可以工作，但它返回重复的记录（在这种情况下是四个相同的记录）

```
select workorder.workorderid, workorder.siteid, 
 FROM_UNIXTIME(workorder.CREATEDTIME/1000, '%m-%d-%Y %H:%i:%s') as createdate, 
 categoryname, IFNULL(workorderstates.impactid, "No Set") as impactid, 
 IFNULL(impactdefinition.name, "Not Set") as impactname, first_name,
 sdorganization.name, statusname, title 
from workorder,  statusdefinition, sitedefinition, sdorganization, 
 prioritydefinition, categorydefinition, sduser, aaauser, workorderstates 
left Join impactdefinition on workorderstates.impactid = impactdefinition.impactid  
left join workorder on workorder.workorderid = workorderstates.workorderid 
left join workorderstates on workorderstates.statusid = statusdefinition.statusid 
left join workorder on workorder.siteid = sitedefinition.siteid 
left join sitedefinition on sitedefinition.siteid = sdorganization.org_id  
left join workorderstates on workorderstates.categoryid = categorydefinition.categoryid
left join workorder on workorder.requesterid = sduser.userid 
left join sduser on sduser.userid = aaauser.user_id  
where statusname='Open' and workorder.createdtime >= '1352678400000' 
 and sdorganization.name='MAPL' 
order by workorder.workorderid 
```

几乎可以工作但很难看的查询（返回重复的记录）：

```
select workorder.workorderid, workorder.siteid, 
 FROM_UNIXTIME(workorder.CREATEDTIME/1000, '%m-%d-%Y %H:%i:%s') as createdate,  
 categoryname, IFNULL(workorderstates.impactid, "No Set") as impactid, 
 IFNULL(impactdefinition.name, "Not Set") as impactname, first_name, 
 sdorganization.name, statusname, title 
from workorder,  statusdefinition, sitedefinition, sdorganization, 
 prioritydefinition, categorydefinition, sduser, aaauser, workorderstates 
left Join impactdefinition on workorderstates.impactid = impactdefinition.impactid 
where workorder.workorderid = workorderstates.workorderid 
 and workorderstates.statusid = statusdefinition.statusid 
 and workorder.siteid = sitedefinition.siteid 
 and sitedefinition.siteid = sdorganization.org_id 
 and workorderstates.categoryid = categorydefinition.categoryid 
 and  workorder.requesterid = sduser.userid and sduser.userid = aaauser.user_id 
 and statusname='Open' and workorder.createdtime >= '1352678400000' 
and sdorganization.name='MAPL' 
order by workorder.workorderid 
```

关于如何让这个查询工作的任何想法？？？多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:36:22.320

我查看了您的查询，我认为您对 JOIN 以及如何编写它们有一些基本的误解。这就像你只是在随机猜测语法，这不是编写代码的方式。

我检查了您的查询并将其转换为 SQL-92 语法。我不得不对连接条件做出一些推论，所以我不能保证它对您的应用程序是正确的，但它更接近于合法查询。

只有我在您的示例中找不到加入您`prioritydefinition`表的任何条件。这可能是您重复行的原因。您正在生成所谓的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。

```
select workorder.workorderid, workorder.siteid, 
 FROM_UNIXTIME(workorder.CREATEDTIME/1000, '%m-%d-%Y %H:%i:%s') as createdate, 
 categoryname, IFNULL(workorderstates.impactid, "No Set") as impactid, 
 IFNULL(impactdefinition.name, "Not Set") as impactname, first_name,
 sdorganization.name, statusname, title 
from workorder
inner join statusdefinition on workorderstates.statusid = statusdefinition.statusid
inner join sitedefinition on workorder.siteid = sitedefinition.siteid
inner join sdorganization on sitedefinition.siteid = sdorganization.org_id
inner join prioritydefinition ...NO JOIN CONDITION FOUND...
inner join categorydefinition on workorderstates.categoryid = categorydefinition.categoryid
inner join sduser on workorder.requesterid = sduser.userid
inner join aaauser on sduser.userid = aaauser.user_id
inner join workorderstates on workorder.workorderid = workorderstates.workorderid
left Join impactdefinition on workorderstates.impactid = impactdefinition.impactid  
where statusname='Open' 
 and workorder.createdtime >= '1352678400000' 
 and sdorganization.name='MAPL' 
order by workorder.workorderid 
```

在编写更多 SQL 连接之前，您确实需要找一个了解您的应用程序并且知道如何编写 SQL 的人来指导您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:56:30.197

我也重新格式化了您的查询，但它在视觉上更具层次性，以显示从第一个（左侧）表到它从（右侧）表中获取详细信息的关系。正如比尔所提到的，你有一个额外的桌子没有做任何事情，因此你的笛卡尔积。

现在，如果您陷入困境并且没有其他人可以真正帮助，这里是 LEFT-JOIN 与 INNER-JOIN 的基本知识。左连接基本上说我想要左侧表中的每条记录（如我首先列出的那样），无论右侧是否有记录。如果有匹配，很好，没问题......但如果没有匹配，您的查询仍然会运行。

所以，我已经设置为所有 LEFT-JOIN。您可以根据需要更改那些您知道必须始终存在的人......例如“用户”输入工作订单。这样你就可以改变。希望这可以帮助你。另请查看我如何从工作订单状态嵌套到工作订单状态以及从工作订单状态中嵌套以获取相应的状态定义以及与工作订单状态表相关联的其他内容。其他的则与工单直接相关，因此属于那个等级。

最后一点...并非所有字段都是 table.field 引用（我将其更改为别名以提高可读性）。使您的所有字段合格，以便您和其他试图帮助或将来阅读您的代码的人知道该字段的来源，而不仅仅是猜测（它在其中一个表中）

```
select 
      WO.workorderid, 
      WO.siteid, 
      FROM_UNIXTIME(WO.CREATEDTIME/1000, '%m-%d-%Y %H:%i:%s') as createdate,  
      categoryname, 
      IFNULL(WOS.impactid, "No Set") as impactid, 
      IFNULL(ImpD.name, "Not Set") as impactname, first_name, 
      SDO.name, 
      statusname, 
      title 
   from 
      workorder WO
         LEFT JOIN workorderstates WOS
            ON WO.workorderid = WOS.workorderid 

            LEFT JOIN statusdefinition StatD
               ON WOS.statusid = StatD.statusid 

            LEFT JOIN categorydefinition CatD
               ON WOS.categoryid = CatD.categoryid 

            LEFT JOIN impactdefinition ImpD
               ON WOS.impactid = ImpD.impactid 

         LEFT JOIN sitedefinition SiteD
            ON WO.siteid = SiteD.siteid 

            LEFT JOIN sdorganization SDO
               ON SiteD.siteid = SDO.org_id 
              and SDO.name = 'MAPL' 

         LEFT JOIN sduser U
            ON WO.requesterid = U.userid 

            LEFT JOIN aaauser AU
               ON U.userid = AU.user_id

   where 
          statusname = 'Open' 
      and WO.createdtime >= '1352678400000' 
   order by 
      WO.workorderid 
```

# python - 如何在 mrjob 中更改 AWS accesskey 和 secretaccesskey 的环境变量

> ID：14923752
> 
> 赞同：1
> 
> 时间：2013-02-17T17:15:01.157
> 
> 标签：python, hadoop, amazon-ec2, mapreduce, mrjob

如何更改`$AWS_ACCESS_KEY_ID`和`$AWS_SECRET_ACCESS_KEY`在 mrjob 中输入我自己的 AWS 凭证？我在 Mac OS X 上使用终端。

[https://github.com/Yelp/mrjob](https://github.com/Yelp/mrjob)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:27:50.803

那么你有几种方法。您可以更改名为`AWS_ACCESS_KEY_ID`and的环境变量`AWS_SECRET_ACCESS_KEY`。`setenv`尽管我不是 Mac OS 专家，但您可能可以使用该命令执行此操作。

mrjob 的一个不错的功能是它还读取一个名为**mrjob.conf**的配置，并在默认位置查找它，例如您的主目录、/etc 目录和环境变量指向的目录`MRJOB_CONF`。这个配置是 YAML 格式，所以你应该有一个像下面这样的部分来设置你的密钥：

跑步者：emr：aws_access_key_id：XXXX aws_secret_access_key：YYYY ...

您可以在配置中设置更多参数，因此我建议您查看[示例配置](https://github.com/Yelp/mrjob/blob/master/mrjob.conf.example)以了解您可以在那里做什么。

我还读到，如果您在主目录或 /etc 目录下的**.boto文件中的 boto 配置中设置密钥，它会起作用，并且您可以添加以下行。**自己没有测试过，但也应该可以工作：

```
aws_access_key_id = XXXX
aws_secret_access_key = YYYY 
```

# python - python socket编程-如何使用下面的代码实现多线程？

> ID：14923759
> 
> 赞同：-1
> 
> 时间：2013-02-17T17:16:23.037
> 
> 标签：python, sockets

这是一个简单的服务器。当你打开浏览器输入服务器地址时，它会响应一个状态码和请求的html内容。

```
#import socket module
from socket import *
serverSocket = socket(AF_INET, SOCK_STREAM)

#Prepare a sever socket
serverSocket.bind((socket.gethostname(), 4501))#Fill in start
serverSocket.listen(5)#Fill in end

while True:
    #Establish the connection
    print 'Ready to serve...'
    connectionSocket, addr = serverSocket.accept()#Accepts a TCP client connection, waiting until connection arrives
    print 'Required connection', addr
    try:

        message = connectionSocket.recv(32)#Fill in start #Fill in end
        filename = message.split()[1]
        f = open(filename[1:])
        outputdata = f.read()#Fill in start #Fill in end

        #Send one HTTP header line into socket
        connectionSocket.send('HTTP/1.0 200 OK\r\n\r\n')#Fill in start

        #Send the content of the requested file to the client

        for i in range(0, len(outputdata)):
            connectionSocket.send(outputdata[i])

        connectionSocket.close() 

    except IOError:
        #Send response message for file not found
        connectionSocket.send('404 Not Found')#Fill in start
        #Fill in end

        #Close client socket
        connectionSocket.close()#Fill in start
        serverSocket.close()#Fill in end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:08:14.493

有很多方法可以做到这一点。这是使用工作线程池的一种方法：

```
import Queue
import threading

num_workers = 10
work_q = Queue.Queue()

def worker(work_q):
    while True:
        connection_socket = work_q.get()
        if connection_socket is None:
            break

        try:
            message = connectionSocket.recv()
            filename = message.split()[1]
            f = open(filename[1:])
            outputdata = f.read()
            connectionSocket.send('HTTP/1.0 200 OK\r\n\r\n')
            connectionSocket.send(outputdata)
        except IOError:
            connectionSocket.send('404 Not Found')
        finally:
            connectionSocket.close()

workers = []
for i in range(num_workers):
    t = threading.Thread(target=worker, args=(work_q,))
    t.start()
    workers.append(t)

while True:
    #Establish the connection
    print 'Ready to serve...'
    connectionSocket, addr = serverSocket.accept()
    print 'Required connection', addr
    work_q.put(connectionSocket) 
```

# actionscript-3 - AS3 - 尝试放置 5 行 5 个方格

> ID：14923761
> 
> 赞同：0
> 
> 时间：2013-02-17T17:16:40.300
> 
> 标签：actionscript-3, for-loop, addchild

这段代码旨在将一个名为 BasicGrid 的影片剪辑实例放置到我的舞台上 25 次，然后如果新影片剪辑的 X 坐标超过 128，它将开始将它们放置在新的一行上。

但由于某种原因，无论我尝试什么，我都无法让它工作，它所做的只是将 25 个方块放在完全相同的位置，任何建议/帮助将不胜感激，谢谢！

```
for (var i:uint; i <= 25; i++) {
    var newOpenGrid:BasicGrid = new BasicGrid();
    newOpenGrid.x + 32;
    if(newOpenGrid.x > 128) {
        newOpenGrid.x = 32;
        newOpenGrid.y += 32;
    }
    addChild(newOpenGrid);
    trace(this.numChildren);
    trace("X: " + newOpenGrid.x);
    trace("Y: " + newOpenGrid.y);
    trace("i: " + i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:00:45.593

您还可以使用嵌套的 for 循环：

```
var ySpace:uint = 32;
var xSpace:uint = 32;
var yStart:uint = 32;
var xStart:uint = 32;
for(var row:uint = 0; row < 5; row++) {
    for(var col:uint = 0; col < 5; col++) {
        var newOpenGrid:BasicGrid = new BasicGrid();
        newOpenGrid.x = xStart + col * xSpace;
        newOpenGrid.y = yStart + row * ySpace;
        addChild(newOpenGrid);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:32:14.033

解决了这个问题，我使用了变量来获取方块的旧 X 和 Y 值，这让新方块知道将自己放置在哪里，如果它需要开始新的一行，这里是修改后的代码。

```
for (var i:uint; i <= 24; i++) {

    var newOpenGrid:BasicGrid = new BasicGrid();
    var gridX:int;
    var gridY:int;
    newOpenGrid.x = gridX;
    newOpenGrid.x += 32;
    newOpenGrid.y = gridY;
    if(newOpenGrid.x > 160) {
        newOpenGrid.x = 32;
        newOpenGrid.y += 32;
    }
    addChild(newOpenGrid);
    gridX = newOpenGrid.x;
    gridY = newOpenGrid.y;
    trace(this.numChildren);
    trace("X: " + newOpenGrid.x);
    trace("Y: " + newOpenGrid.y);
    trace("i: " + i);
    }
} 
```

# java - 我怎样才能有一个由数组索引的数组：Java？

> ID：14923762
> 
> 赞同：0
> 
> 时间：2013-02-17T17:16:56.947
> 
> 标签：java, arrays, string, int

我正在尝试创建一个数组来收集学生，并为每个学生创建一个成绩数组。我的 int 计数将随着 while 循环或其他东西而增加。问题是我的学生数组出错。有替代方法吗？

```
static int count = 0;

static int[] Grades = new int[count];

static String[] Students =  new String[Grades[count]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:23:49.683

您可以创建一个包含姓名、年龄...等和成绩的数组/列表的学生类：

```
class Student {
  String name;
  String age;
  //...
  List<Integer> grades;

  //Getters & Setters of course
} 
```

您可以添加一个获取 {name:grades} 地图的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:24:10.033

这种设计将来会给您带来很多问题。如果你真的想坚持使用数组，请考虑二维数组。

一个更好和更干净的设计将是使用如下地图。

```
map<Student, List<Grades>>  studentGrades= new Hashmap <Student, List<Grades>>() ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T17:29:10.480

你可以有一个二维数组。类似于数组的数组，每个项目都包含一个完整的数组：

```
int[][] students = new int[num_of_students][] 
```

然后，您可以动态更改每个学生的每个数组的长度：

```
for (int i = 0; i < num_of_stuent; i++)
     students[i] = new int[i + 1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T17:42:30.130

怎么样：

```
Map<String, ArrayList<Integer>> map = new HashMap<String, ArrayList<Integer>>(); 
```

**加上：**

```
String student = "Bobby";
int mark = 85;
if (map.containsKey(student))
  map.get(student).add(mark);
else
{
  ArrayList<Integer> arr = new ArrayList<Integer>();
  arr.add(mark);
  map.put(student, arr);
} 
```

**显示：**

```
System.out.println(map); 
```

或者：

```
for (Entry<String, ArrayList<Integer>> entry: map.entrySet())
  System.out.println("Marks of " + entry.getKey() + " = " + entry.getValue()); 
```

**扩展功能以允许学生拥有更多属性：**

```
class Student
{
  ArrayList<Integer> marks;
  // ...
} 
```

宣言：

```
Map<String, Student> students = new HashMap<String, Student>(); 
```

# mysql - MySQL选择MAX唯一值

> ID：14923766
> 
> 赞同：0
> 
> 时间：2013-02-17T17:17:29.473
> 
> 标签：mysql, sql, distinct, max

我有一个 mysql 表，它显示了如下所示的 Sellers 表：

```
advertiseid[pk] | customerid[fk] | productsid[fk] | quantites_advertised | price_advertised
------------------------------------------------------------------------------------------
      1               2                2                4.00                 2.00 
      2               4                3                5.00                 2.50
      3               3                2                1.00                 1.00 
```

第一条记录意味着..这意味着客户 id 2 正在销售巧克力（产品 id 1），价格为 4KG's@ £2.00

我想选择每个产品 ID，以便查询显示不同产品的最小值：因此，该表将是：

```
advertiseid[pk] | customerid[fk] | productsid[fk] | quantites_advertised | price_advertised
    ------------------------------------------------------------------------------------------
          2               4                3                5.00                 2.50
          3               3                2                1.00                 1.00 
```

该查询输出产品 2 和 3 的最低价格，因为产品 3 是唯一价格最低的产品，而产品 2 4.00 和 1.00 之间的最小值为 1.00，因此输出。假设我有各种不同的产品，我怎么能实现这样的目标？我试过这个查询，但它不正确。：

```
select c.Fname p.ProductName, s.ProductID, s.Quantity, s.Price 
FROM sellers s, products p, customer c
WHERE s.Price = (select MIN(Price) FROM sellers WHERE 
p.ID=s.ProductID AND c.ID=s.cid); 
```

任何人都知道如何实现我的预期输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:24:03.973

您可以使用过滤器`inner join`：

```
select  *
from    YourTable yt
join    (
        select  productsid
        ,       min(price_advertised) as min_price_advertised
        from    YourTable
        group by
                productsid
        ) filter
on      filter.productsid = yt.productsid
        and filter.min_price_advertised = yt.price_advertised 
```

# amazon-web-services - Amazon RDS - 仅在需要时在线？

> ID：14923774
> 
> 赞同：41
> 
> 时间：2013-02-17T17:18:52.313
> 
> 标签：amazon-web-services, amazon-rds

我有一个关于 Amazon RDS 的问题。我每天只需要在线大约 2 个小时的数据库，但我正在处理一个大约 1gb 的大型数据库。

我有两个主要问题：

1.  我可以通过脚本自动使我的 RDS 数据库联机和脱机以节省资金吗？

2.  当我将 RDS 脱机以停止“工作时间”计数器运行并向我收费时，当我将其重新联机时，它是否仍具有相同的内容（即我的所有数据会保留在那里，还是必须是空白数据库？）。如果是这样，有什么办法可以解决这个问题，而不是每次都备份到 S3 并重新导入它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-17T21:38:25.380

如果您希望以编程方式执行此操作，

1.  [使用http://docs.aws.amazon.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-CopyDBSnapshot.html](http://docs.aws.amazon.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-CopyDBSnapshot.html)对 RDS 实例进行快照`rds-create-db-snapshot`

2.  [使用http://docs.aws.amazon.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-DeleteDBInstance.html](http://docs.aws.amazon.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-DeleteDBInstance.html)删除正在运行的实例`rds-delete-db-instance`

3.  [使用http://docs.aws.amazon.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-RestoreDBInstanceFromDBSnapshot.html](http://docs.aws.amazon.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-RestoreDBInstanceFromDBSnapshot.html)从快照还原数据库`rds-restore-db-instance-from-db-snapshot`

如果您希望手动执行此操作，您也可以从 AWS Web 控制台执行所有这些操作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-17T21:24:29.713

您可以使用 shell 脚本启动 EC2* 实例，所以我想您也可以使用 RDS。（请参阅[http://docs.aws.amazon.com/AmazonRDS....html](http://docs.aws.amazon.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-CreateDBInstance.html)）

但与 EC2* 不同的是，您不能在不“销毁”它的情况下“停止”一个 RDS 实例。您需要在终止数据库时创建数据库快照。您将在重新启动数据库时使用此数据库快照。

*EC2：弹性计算，租用虚拟服务器或服务器。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-10T20:40:56.577

这是一个将停止/启动/重启 RDS 实例的脚本

```
#!/bin/bash

# usage ./startStop.sh lhdevices start

INSTANCE="$1"
ACTION="$2"

# export vars to run RDS CLI
export JAVA_HOME=/usr;
export AWS_RDS_HOME=/home/mysql/RDSCli-1.15.001;
export PATH=$PATH:/home/mysql/RDSCli-1.15.001/bin;
export EC2_REGION=us-east-1;
export AWS_CREDENTIAL_FILE=/home/mysql/RDSCli-1.15.001/keysLightaria.txt;

if [ $# -ne 2 ]
then
echo "Usage: $0 {MySQL-Instance Name} {Action either start, stop or reboot}"
echo ""
exit 1
fi

shopt -s nocasematch

if [[ $ACTION == 'start' ]]
then
echo "This will $ACTION a MySQL Instance"  
rds-restore-db-instance-from-db-snapshot lhdevices 
--db-snapshot-identifier        dbStart --availability-zone us-east-1a     
--db-instance-class db.m1.small 

echo "Sleeping while instance is created"
sleep 10m
echo "waking..."

rds-modify-db-instance lhdevices --db-security-groups kfarrell

echo "Sleeping while instance is modified for security group name"
sleep 5m
echo "waking..."

elif [[ $ACTION == 'stop' ]]
then
echo "This will $ACTION a MySQL Instance" 

yes | rds-delete-db-snapshot dbStart

echo "Sleeping while deleting old snapshot "
sleep 10m

#rds-create-db-snapshot lhdevices --db-snapshot-identifier dbStart

# echo "Sleeping while creating new snapshot "
# sleep 10m
# echo "waking...."

#rds-delete-db-instance lhdevices --force --skip-final-snapshot 
rds-delete-db-instance lhdevices --force --final-db-snapshot-identifier dbStart

echo "Sleeping while instance is deleted"
sleep 10m
echo "waking...."

elif [[ $ACTION == 'reboot' ]]
then
echo "This will $ACTION a MySQL Instance" 
rds-reboot-db-instance lhdevices ;

echo "Sleeping while Instance is rebooted"
sleep 5m
echo "waking...."

else

echo "Did not recognize command: $ACTION"
echo "Usage: $0 {MySQL-Instance Name} {Action either start, stop or reboot}"

fi
shopt -u nocasematch 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-01T19:53:38.290

Amazon 最近更新了他们的 CLI 以包含一种启动和停止 RDS 实例的方法。 [stop-db-instance](http://docs.aws.amazon.com/cli/latest/reference/rds/start-db-instance.html)和[start-db-instance](http://docs.aws.amazon.com/cli/latest/reference/rds/stop-db-instance.html)详细说明了执行这些操作所需的步骤。

# c++ - OpenCV中的视频显示窗口大小不适合视频

> ID：14923777
> 
> 赞同：0
> 
> 时间：2013-02-17T17:19:00.793
> 
> 标签：c++, opencv, codeblocks

我在下面编写了以下代码以在 OpenCV 中显示视频。我已经很好地编译了它，但是当我运行它时，应该显示视频的窗口会打开，但它太小而无法实际查看视频是否正在播放。其他一切似乎都运行良好。宽度、高度和帧数按编码打印在命令行上。有谁知道问题是什么？一探究竟。

```
void info()
{
   cout << "This program will accept input video with fixed lengths and produce video textures" << endl;
}

int main(int argc, char *argv[])
{
  info();
  if(argc != 2)
  {
    cout << "Please enter more parameters" << endl;
    return -1;

  }

const string source = argv[1];

VideoCapture input_vid(source);
if(! input_vid.isOpened())
{
    cout << "Error: Could not find input video file" << source << endl;
    return -1;
}

Size S = Size((int) input_vid.get(CV_CAP_PROP_FRAME_WIDTH),    //Acquire size of input video
              (int) input_vid.get(CV_CAP_PROP_FRAME_HEIGHT));

cout << "Width: = " << S.width << " Height: = " << S.height << " Number of frames: " << input_vid.get(CV_CAP_PROP_FRAME_COUNT)<<endl;

const char* PLAY = "Video player";

namedWindow(PLAY, CV_WINDOW_AUTOSIZE);
//imshow(PLAY,100);
char c;
c = (char)cvWaitKey(27);
//if ( c == 27)break;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:17:28.083

另一个简单的调整可能是使用 CV_WINDOW_NORMAL 而不是 CV_WINDOW_AUTOSIZE

```
namedWindow(PLAY, CV_WINDOW_AUTOSIZE); 
```

它使您可以手动调整窗口大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:27:38.253

假设视频来自网络摄像头：

```
capture = CaptureFromCAM( 0 );
SetCaptureProperty(capture,CV_CAP_PROP_FRAME_HEIGHT, 640);
SetCaptureProperty(capture,CV_CAP_PROP_FRAME_WIDTH, 480); 
```

这将解决您的问题

# asp.net-mvc-4 - SQL 查询显示在视图中，而不是其结果

> ID：14923778
> 
> 赞同：0
> 
> 时间：2013-02-17T17:19:14.217
> 
> 标签：asp.net-mvc-4

在 HomeController.cs 我有以下片段

```
 public ActionResult Index()
    {
        var context = new DataClassesContext();
        var regionBoudaries = from boundaryDetails in context.RegionBoundaries
                              join boundaryID in context.Region_Boundaries on boundaryDetails.RegionBoundaryID equals boundaryID.BoundaryID
                              select new { boundaryDetails.lat, boundaryDetails.@long, boundaryID.RegionID };
        ViewData["RegionBoudaries"] = regionBoudaries;
        return View();
    } 
```

在我写的视图文件中

```
 <%= ViewData["RegionBoudaries"] %> 
```

我将整个 LINQ 查询翻译成 SQL 语言，而不是查询的结果。你能帮我得到查询的结果吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:21:14.463

当然你需要执行查询：

```
 ViewData["RegionBoudaries"] = regionBoudaries.ToList(); 
```

但据我所知，您正在使用一个匿名对象，这将使其难以在视图中访问。所以我建议你定义一个模型：

```
public class RegionViewModel
{
    public double Latitude { get; set; }
    public double Longitude { get; set; }
    public int RegionID { get; set; }
} 
```

然后调整您的查询：

```
var context = new DataClassesContext();
var regionBoudaries = 
    from boundaryDetails in context.RegionBoundaries
    join boundaryID in context.Region_Boundaries on boundaryDetails.RegionBoundaryID equals boundaryID.BoundaryID
    select new RegionViewModel
    {
        Latitude = boundaryDetails.lat, 
        Longitude = boundaryDetails.@long, 
        RegionID = boundaryID.RegionID 
    }; 
```

改进代码的下一步当然是摆脱这种`ViewData`废话并充分利用您定义的视图模型和视图中的强类型：

```
public ActionResult Index()
{
    using (var context = new DataClassesContext())
    {
        var regionBoudaries = 
            from boundaryDetails in context.RegionBoundaries
            join boundaryID in context.Region_Boundaries on boundaryDetails.RegionBoundaryID equals boundaryID.BoundaryID
            select new RegionViewModel
            {
                Latitude = boundaryDetails.lat, 
                Longitude = boundaryDetails.@long, 
                RegionID = boundaryID.RegionID 
            };
        return View(regionBoudaries.ToList());
    }
} 
```

现在您的视图将成为视图模型的强类型：

```
<%@ Page 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewPage<IEnumerable<RegionViewModel>>" 
%> 
```

现在你得到了强类型和智能感知：

```
<% foreach (var region in Model) { %>
    <div>
        Lat: <%: region.Latitude %>, Lon: <%: region.Longitude %>
    </div>
<% } %> 
```

# php - PHP：%-登录字符串？

> ID：14923779
> 
> 赞同：0
> 
> 时间：2013-02-17T17:19:14.237
> 
> 标签：php

我得到了一个 PHP 脚本，它使用数组来存储配置数据，例如`$config["maxPosts"] = 5;`.
一些设置需要作为字符串给出。在示例文件中，如下所示：

```
$config["welcomeMsg"] = "Welcome home, %name%"; 
```

在这种情况下是什么`%`意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:21:06.757

在这种情况下`%name%`，这只是一个占位符，稍后将在脚本中替换。

# paypal - PayPal 管理器中的错误 102

> ID：14923784
> 
> 赞同：0
> 
> 时间：2013-02-17T17:19:33.973
> 
> 标签：paypal

我正在寻找使用 PayPal 托管的网关页面来接受我正在开发的网站的付款（位于英国）

经过很多困难，我设法使用本指南设置了一个仅限测试的 Payflow 帐户：[https ://www.x.com/developers/community/blogs/pp_integrations_preston/testing-paypal-payflow-gateway](https://www.x.com/developers/community/blogs/pp_integrations_preston/testing-paypal-payflow-gateway)

但是当我登录并尝试将托管结帐设置更改为“测试”时，我得到：

```
"Error: 102 error content" 
```

并且不会更新任何设置。

我可以找到看到同样错误消息的其他人，但 PayPal 的文档没有在管理器中提到这个错误，而是说交易错误 102 是支付处理器不可用 - 所以我认为有可能就是这样。

我用来设置帐户的指南只链接到美国版的注册页面，所以我只是更改了链接所附查询字符串中的国家代码参数，这样我就可以使用英国地址，但支付处理器似乎都总部设在美国，我尝试了 2 个不同的（FDMS Nashville 和 WorldPay），但我都遇到了同样的错误。

我在尝试设置它时遇到了很多问题，我已经阅读了 3 天的各种指南和官方文档，甚至还没有打开我的 IDE——我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:05:11.220

您是否有可以提供的结帐链接，以便我们可以遍历并测试它并查看问题可能是什么？很难看出此时问题出在哪里，看不到您正在传递的内容，特别是在结帐期间生成错误的位置，并且不知道您的帐户是如何设置的。

# c++ - CCFiniteTimeAction::getDuration() 创建 CCSequence 时的 EXC_BAD_ACCESS

> ID：14923788
> 
> 赞同：0
> 
> 时间：2013-02-17T17:19:55.287
> 
> 标签：c++, cocos2d-iphone, ios-simulator, cocos2d-x

我能够在 iPhone 模拟器上运行此代码而不会出错。但是，当我在 iPhone 上运行它时，我收到了 EXC_BAD_ACCESS 错误。这是代码：

```
 CCAnimate * explosionAnimate = CCAnimate::create(explosionAnimation);
        CCCallFuncN * callFuncN = CCCallFuncN::create(this,callfuncN_selector(GameLayer::removeChildFromParent));
        CCFiniteTimeAction * explosionSequence = CCSequence::create(explosionAnimate, callFuncN);

        CCSprite * explosionSprite = CCSprite::createWithSpriteFrameName("explosion_frame_1");
        addChild(explosionSprite);

        explosionSprite->setPosition(point);
        explosionSprite->runAction(explosionSequence);
    }

    void GameLayer::removeChildFromParent(CCNode * child)
    {
        child->removeFromParent();
    } 
```

调用 CCSequence::create(...) 时会发生错误。通过 CCSequence::create(...) 调试

```
CCFiniteTimeAction* CCSequence::create(CCFiniteTimeAction *pAction1, va_list args)
{
    CCFiniteTimeAction *pNow;
    CCFiniteTimeAction *pPrev = pAction1;

    while (pAction1)
    {
        pNow = va_arg(args, CCFiniteTimeAction*);
        if (pNow)
        {
            pPrev = createWithTwoActions(pPrev, pNow);
        }
        else
        {
            break;
        }
    }

    return pPrev;
} 
```

我看到“createWithTwoActions”被调用了两次。这似乎不对。第二次调用“createWithTwoActions”。该错误发生在 CCFiniteTimeAction 中，特别是在 getDuration() 内联函数中：

```
inline float getDuration(void) { return m_fDuration; } 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:59:09.570

我可以通过调用 CCSequence::create() 来解决这个问题，例如：

```
CCSequence::create(explosionAnimate, callFuncN, NULL); 
```

代替：

```
CCSequence::create(explosionAnimate, callFuncN); 
```

我猜这与 CCFiniteAction 指针和 C++ 可变长度参数的性质有关。

# php - 超过日期时从 SQL 表中删除记录

> ID：14923789
> 
> 赞同：0
> 
> 时间：2013-02-17T17:19:59.980
> 
> 标签：php, sql

我目前正在开发一个系统来管理在学校报告的学生，但我遇到了一个绊脚石。在我的 SQL 表 ('onreport') 中有一个名为 'duration' 的字段，我希望删除存储在该行中存储的日期的任何记录，即报告已过期。

```
 <?php
    include('connect.php'); //connect to the database
    $today = new DateTime("now");
    $f_today=$today->format('Y-m-d');
    mysql_query('DELETE FROM onreport WHERE duration ==$f_today');
    //print('$f_today')
    ?> 
```

我意识到这可能不是最有效的方法，即使它确实有效，但我越来越绝望！我知道代码正在运行，因为包含注释掉的打印语句会以与表中格式相同的格式打印今天的正确日期。持续时间列是类型“日期”，在表格中显示为 yyyy-mm-dd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:33:37.270

似乎不是比较日期，而是比较字符串，这通常被认为是一种不好的做法。但是由于您没有发布您的数据库架构，因此很难说。

但是，如果您想删除今天之前发布的每个报告，您可以使用纯 SQL 查询，假设字段持续时间是 DATE 类型：

```
DELETE FROM onreport WHERE TIMESTAMPDIFF(DAY,CURDATE(),duration)>0 
```

此查询比较两个日期：CURDATE()，它是当前服务器时间与持续时间的值，并以天数返回结果。如果此值大于零，则删除该行。

# php - 具有 HABTM 关系的用户配置文件中的类似标签的技能

> ID：14923795
> 
> 赞同：0
> 
> 时间：2013-02-17T17:20:33.417
> 
> 标签：php, cakephp, has-and-belongs-to-many

在我正在构建的 Web 应用程序中，用户有一个个人资料，他们可以在其中列出他们的技能。我想要 StackOverflow 在发布帖子时具有的那种功能，您可以在其中将标签输入标签输入并选择已经存在的标签，如果它们不存在则创建它们。

目前，我在页面上出现了一个选择框，其中包含`id`用户当前技能的值。我通过这样做来实现这一目标：

```
// ProfilesController.php
$skills = $this->Profile->ProfilesSkill->find('list');

// edit.ctp
<?php echo $this->Form->input('Skill', array('value' => $skills)); ?> 
```

不过，我不知道如何进一步进步。首先，`name`应该显示技能的字段而不是他们的`id`，我对此感到困惑，因为根据 Cake 的约定，它会`name`默认使用该字段，即使它不是。其次，当我在我的个人资料中输入我的技能时，Cake 应该会自动在表格中输入所有必需的条目`profiles_skills`。我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:56:40.323

解决方案非常简单，尽管工作量很大。

首先，您需要一个标签系统。您可以自己构建一个（就像任何 habtm-relation 一样），或者使用像[https://github.com/CakeDC/tags这样的插件](https://github.com/CakeDC/tags)

对于第二部分，该功能称为“自动完成”。每次在表单字段中输入字母时，它基本上都是一个 ajax 调用。那里有很多教程，例如：[http ://blogfreakz.com/cakephp/cakephp-jquery-autocomplete-tutorial/](http://blogfreakz.com/cakephp/cakephp-jquery-autocomplete-tutorial/)

希望这会为您指明正确的方向

# codeigniter - 用谷歌登录总是征求用户同意

> ID：14923799
> 
> 赞同：7
> 
> 时间：2013-02-17T17:20:45.083
> 
> 标签：codeigniter, login, oauth-2.0, google-oauth

我的公司有一个内部网络应用程序，它使用谷歌身份验证系统登录。它在大多数情况下运行良好，他们可以通过 google 进行身份验证，同意我的应用程序访问基本用户详细信息，然后当他们返回我的应用程序时，我确实可以获取他们的用户详细信息。

问题是我认为一旦他们同意他们就不必每次都这样做。这是一个不正确的假设吗？就像现在一样，每次他们单击“使用 google 登录”时，他们都必须给予同意，而不是被重定向回我的应用程序。

我正在使用 PHP（codeigniter）和在 github 上找到的一个非常好的 Oauth 库（phil sturgeon 库的分支）。是否有一些我应该传递的参数，这样用户就不必每次都同意，在第一次之后？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T04:09:01.987

谷歌登录不需要每次都需要用户同意。如果您使用的是 OAuth2 登录程序，您应该能够在没有重新批准的情况下再次登录：[https ://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

但是，在某些情况下，自动批准可能会被禁用，随后每次登录都需要用户同意。

第一种也是最常见的情况是，如果您的应用程序明确要求 Google 每次都提示您同意。检查您的授权请求（您可能从示例或示例代码中复制）是否包含“prompt=consent”或较旧的非标准形式“approval_prompt=force”。删除这些参数（如果存在）可能会导致自动批准开始工作。

另一种情况是，如果您的重定向 URL 基于“localhost”或其他不属于全局 DNS 命名空间的 URL。在这种情况下，出于安全原因，Google 在用户计算机上的 accounts.google.com 域中设置了一个 cookie，以表明用户授权 _this_device_ 登录 localhost（或本地域）上的“foo”；如果 Google 找到 cookie，它只会自动批准不同意第二个请求。原因是“localhost”（或本地域，或其他不建立在全局 DNS 名称空间上的 URL）的含义是依赖于设备的，并且允许跨设备应用授权可能会带来安全风险。因此，如果您的公司已将浏览器配置为在退出时清除所有 cookie，*并且*您使用非绝对 URL，您可能会看到您的用户每次都必须同意。解决方案是将您的端点托管在 Internet 有效的主机名上（无需从 Intranet 外部访问该主机，只需该主机名需要在全球范围内有效），或者您需要将 accounts.google.com 从cookie 清除政策。

# linux - 如何在Linux中运行windows下编写的R代码？

> ID：14923800
> 
> 赞同：0
> 
> 时间：2013-02-17T17:20:48.090
> 
> 标签：linux, windows, r, correlation

由于数据量很大（10 GB），我必须使用我们单位的服务器运行它（以避免内存问题）。我只能在我的平台是 Linux 时使用服务器。我很感激任何关于我们如何在 Linux 平台下运行此代码的想法。

```
dir1 <- list.files("D:sdr", "*.bin", full.names = TRUE)
dir2 <- list.files("D:dsa", "*.img", full.names = TRUE)
file_tot<-array(dim=c(1440,720,664,2))
for(i in 1:length(dir1)){
file_tot[,,i,2] <- file_tot[,,i,2]*0.000030518594759971
file_tot[,,i,2][file_tot[,,i,2] ==  9999 ] <- NA 
                      }
 }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:09:45.587

多年来，我们中的许多人一直在为 Windows 和 Linux（以及 OS X ...）编写代码。构建自己的小辅助函数

```
isLinux <- function() unname(Sys.info()["sysname"]) == "Linux" 
```

对于 Windows 也是如此。然后以编程方式构建您的路径：

```
ourRootDir <- function() ifelse( isLinux(), "/opt/data/someThing", "D:/data") 
```

通过

```
datapath <- file.path( ourRootDir(), "project", "some", "where") 
```

之后，*所有实际的分析命令很可能无需更改即可移植*。

在 4200+ CRAN 包中，极少数并非在所有平台上都存在。

`save()`此外，通过一个系统写入的数据*可以加载到另一个*系统上，因为这是一种带压缩的二进制格式，您还可以节省大量时间。

# c# - 不应该在本地复制程序集

> ID：14923804
> 
> 赞同：5
> 
> 时间：2013-02-17T17:21:10.483
> 
> 标签：c#, visual-studio-2010

这是我的示例场景。我有一个控制台应用程序和一个类库 dll（称为 libraryA）。LibraryA dll 引用了 Oracle.DataAccess.dll 版本 4.112.2.0。Oracle DLL 在 GAC 中。LibraryA 中对 Oracle DLL 的引用是“Copy Local = false”。到目前为止，一切都很好。如果您构建 libraryA dll，则 Oracle.DataAccess.dll 不会*显示*在其输出目录中。好的。现在我在我的控制台应用程序中引用 libraryA dll。对 libraryA dll 的引用是“copy local = true”。现在，当我构建控制台应用程序时，Oracle.DataAcess.dll*确实*显示在控制台应用程序的输出目录中。但是，似乎唯一以这种方式运行的 DLL 是 Oracle dll。这是LibraryA的完整代码

```
public void Foo() {            
   Oracle.DataAccess.Client.OracleConnection c = new Oracle.DataAccess.Client.OracleConnection();
   WebMatrix.WebData.OAuthAccountData x = new WebMatrix.WebData.OAuthAccountData("asd", "asd");            
   DevExpress.Web.ASPxCallback.ASPxCallback cvv = new DevExpress.Web.ASPxCallback.ASPxCallback();
} 
```

WebMatrix 和 DevExpress 也像 Oracle DLL 一样在 GAC 中。但是，这些 DLL 都不会输出到输出目录，只有 Oracle dll。*为什么*？这里发生了什么事？

就此而言，您可以创建另一个类库，将其命名为 libraryB，不要将 libraryB 放入 GAC，从 LibraryA 引用 LibraryB 并设置 copy local = false。即使您这样做，libraryB 也不会复制到控制台应用程序的输出目录中。当然，在这种情况下，程序会因为找不到库 B 而崩溃，但至少 Visual Studio 尊重复制本地标志 = false。这个愚蠢的 Oracle DLL 有什么不同？

哦，还有一件事很有趣。如果在我的控制台应用程序中，我*明确*添加了对 Oracle.DataAccess.dll 的引用，并说 copy local = false，*那么*它不会显示在输出目录中。*在输出目录中没有*显示 DLL似乎有点搞笑，我必须实际*引用*它:)

*编辑*：

另一个线索。Oracle，为了折磨开发者，没有为 AnyCPU 构建一个 DLL。他们有一个 x86 和一个 x64 版本。就我而言，我引用的是 x86 版本并为 AnyCPU 构建。*但是，如果我为x86*构建（以匹配 oracle dll），那么 Oracle DLL*不是*复制到输出目录。在 AnyCPU 中构建时，MSBUILD 说：“警告 MSB3270：正在构建的项目“MSIL”的处理器架构与参考“Oracle.DataAccess，版本=4.112.2.0，文化=中性”的处理器架构不匹配， PublicKeyToken=89b483f429c47342, processorArchitecture=x86", "x86"。这种不匹配可能会导致运行时失败。请考虑通过配置管理器更改项目的目标处理器架构，以便在您的项目和参考之间对齐处理器架构，或者采取依赖于具有与您项目的目标处理器架构相匹配的处理器架构的参考。” 所以，看起来 Msbuild 最终决定，好吧，你有一个不匹配，*保证*你的应用程序会爆炸。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T17:26:15.287

通过不引用它，你让它使用隐式规则。好吧，这里的隐含默认值是“将其复制到本地”，因为**大多数**dll 不在 GAC 中。IDE 有一个疯狂的概念，即默认为“让它工作”，这意味着“假设它不会在 GAC 中”。

如果你想使用明确的规则，那么是的：你需要告诉它你想要什么。你这样做的方法是添加一个参考，然后设置你想要的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T14:21:45.480

在对我正在处理的解决方案中似乎存在相同问题进行大量调查后，我们发现此问题似乎是由 .NET 4.5 版本引入的新检查引起的，如此[处](https://stackoverflow.com/a/10196549/3486353)所述：在构建时，现在正在检查引用以确保它们的处理器类型与项目的处理器类型匹配。

虽然之前我们在构建日志中没有看到任何此类错误，但在受影响的机器上，我们现在看到一条消息，表明项目正在为 MSIL 构建并且 DLL 是为 x86 构建的 - 而不是为所有 CPU 构建可用的一个 DLL，第三方创建者为 x86 和 x64 提供了两个单独的 DLL，它们都在我们的 GAC 中。在引入此检查之前，系统将使用 GAC 中的 DLL 并选择适当的版本，但似乎在安装 .NET 4.5 后，构建过程确定 GAC 中的任何一个版本都不可接受，因此它正在引入本地副本。

我们无法确定禁用此行为的任何方法，因此我们的解决方案必须是添加一个构建后事件以删除本地副本，或者（如问题中所述）添加引用将问题 DLL 指向所有引用我们“库 A”的项目，然后将这些引用设置为“copy local = false”，这似乎也阻止了将非工作本地版本复制到输出中。

# php - PHP邮件功能 - 附件以文本形式出现

> ID：14923806
> 
> 赞同：0
> 
> 时间：2013-02-17T17:21:15.347
> 
> 标签：php

我知道有很多与 PHP 邮件功能相关的帖子。但说真的，我无法弄清楚下面的代码有什么问题：

```
$subject = "New article submitted.";
$message = "You've received this e-mail through your website's write an article form: \n";
$message .= "Name: {$data['username']} \n";
$message .= "E-mail: {$data['email']} \n";
$message .= "\nRegards,\nAakriti \n";
$headers = "From: {$data['name']} <{$data['email']}> \n";

// Boundary
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

// Add the headers for a file attachment
$headers .= "\nMIME-Version: 1.0\n" .
"Content-Type: multipart/mixed;\n" .
" boundary=\"{$mime_boundary}\"";

// Add a multipart boundary above the plain message
$message = "This is a multi-part message in MIME format.\n\n" .
"--{$mime_boundary}\n" .
"Content-Type: text/plain;\n charset=\"iso-8859-1\"\n" .
"Content-Transfer-Encoding: 7bit\n\n" .
$message . "\n\n" .
"--{$mime_boundary}\n";

// preparing attachments
for($i=0;$i < count($_FILES['articledata']['name']); $i++) {
// store the file information to variables for easier access
$tmp_name = $_FILES['articledata']['tmp_name'][$i];
$type = $_FILES['articledata']['type'][$i];
$name = $_FILES['articledata']['name'][$i];
$size = $_FILES['articledata']['size'][$i];

$file = fopen($tmp_name,"rb");
$attachment = fread($file,filesize($tmp_name));
fclose($file);
$attachment = chunk_split(base64_encode($attachment));
print_r($attachment);
//$attachment = chunk_split(base64_encode(file_get_contents($tmp_name)));

$message .= "Content-Type: {$type};\n" .
" name=\"{$name}\"\n" .
"Content-Transfer-Encoding: base64\n" .
"Content-Disposition: attachment;\n" .
" filename=\"{$name}\"\n\n" .
$attachment . "\n" .
"--{$mime_boundary}\n";
$message .=  "--\n\n";
}

$headers .= "Reply-To: <{$data['email']}>";

if (mail($recipient,$subject,$message,$headers)) {
echo "<p>Thank you! Your mail was successfully sent to the webmaster. Thank you for your time.</p>";
} else {
echo "<p>Sorry, there was an error and your mail was not sent. Please find an alternative method of contacting the webmaster.</p>";
} 
```

它只是没有按预期工作。附件是一些二进制文本。看看下面：

```
MIME-Version: 1.0
Content-Type: multipart/mixed;
boundary="==Multipart_Boundary_xf6a3dd3e1c0c1f9233b8c66ce2a73e3ex"Reply-To: <test03@gmail.com>

This is a multi-part message in MIME format.

--==Multipart_Boundary_xf6a3dd3e1c0c1f9233b8c66ce2a73e3ex
Content-Type: text/plain;
charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

You've received this e-mail through your website's write an article form:
Name: Johnson
E-mail: test@gmail.com

Regards,
Aakriti

--==Multipart_Boundary_xf6a3dd3e1c0c1f9233b8c66ce2a73e3ex
Content-Type: image/jpeg;
name="599307_322143481199958_2058932593_n.jpg"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
filename="599307_322143481199958_2058932593_n.jpg"

/9j/4AAQSkZJRgABAgAAAQABAAD//gAEKgD/4gIcSUNDX1BST0ZJTEUAAQEAAAIMbGNtcwIQAABt
bnRyUkdCIFhZWiAH3AABABkAAwApADlhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAApkZXNjAAAA/AAAAF5jcHJ0AAABXAAAAAt3dHB0AAABaAAAABRia3B0AAABfAAAABRyWFla
AAABkAAAABRnWFlaAAABpAAAABRiWFlaAAABuAAAABRyVFJDAAABzAAAAEBnVFJDAAABzAAAAEBi
VFJDAAABzAAAAEBkZXNjAAAAAAAAAANjMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0ZXh0AAAA
AEZCAABYWVogAAAAAAAA9tYAAQAAAADTLVhZWiAAAAAAAAADFgAAAzMAAAKkWFlaIAAAAAAAAG+i
AAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPY3VydgAAAAAA
AAAaAAAAywHJA2MFkghrC/YQPxVRGzQh8SmQMhg7kkYFUXdd7WtwegWJsZp8rGm/fdPD6TD////b
AEMABgQEBQQEBgUFBQYGBgcJDgkJCAgJEg0NCg4VEhYWFRIUFBcaIRwXGB8ZFBQdJx0fIiMlJSUW
HCksKCQrISQlJP/bAEMBBgYGCQgJEQkJESQYFBgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQk
JCQkJCQkJCQkJCQkJCQkJCQkJCQkJP/CABEIAS8B4AMAIgABEQECEQH/xAAbAAACAwEBAQAAAAAA
AAAAAAAABQIDBAEGB//EABgBAQEBAQEAAAAAAAAAAAAAAAABAgME/8QAGAEBAQEBAQAAAAAAAAAA
AAAAAAECAwT/2gAMAwAAARECEQAAAfqgAAAHAPOabh2Vwm7+QWo06vqZa9w57WxTTLsFDRJ 
```

更新：在打破我的脑袋几个小时后终于把它修好了..有几个问题：

1.  [正如asachanfbd](https://stackoverflow.com/users/1306063/asachanfbd) mime 边界所指出的那样，没有正确嵌套。

2.  这是一个很愚蠢的问题，但它是罪魁祸首——在下面的代码行处有额外的换行符：

    $message .= "\n问候，\nAakriti \n"; $headers = "来自：{$data['name']} <{$data['email']}> \n";

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:36:19.467

对你的问题没有太多的答案，但是

你可以看看[PHPMailer](http://phpmailer.worxware.com/)和它的[例子](http://phpmailer.worxware.com/index.php?pg=examplebmail)。

使用 PHPMailer 添加附件非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:49:30.720

在邮件中，mime 边界用于包围邮件的不同部分。在您的实现中，您没有将邮件正文包含在所需的 mime 类型中。还要记住，邮件的 mime 边界需要与整个邮件相同。

您可以使用这些函数集来轻松实现。

[http://pastebin.com/AbZjzYdv](http://pastebin.com/AbZjzYdv)

# javascript - 如何在 D3 中的“加载”事件上调用函数？

> ID：14923811
> 
> 赞同：1
> 
> 时间：2013-02-17T17:22:04.777
> 
> 标签：javascript, d3.js, dom-events

对我的 Javascript 经验不足表示歉意。我是一名 JavaScript 和 D3 新手，正在尝试改编[Mike Dewar 的 D3 入门一书中](http://shop.oreilly.com/product/0636920025429.do)的[地铁等待评估示例](https://github.com/mikedewar/getting_started_with_d3/blob/master/visualisations/subway_wait_assessment_UI.html)。

如给定的那样，示例加载时没有绘制任何地铁线——您必须单击其中一条来绘制它。我认为更改代码很简单，以便在可视化启动时，默认情况下已经绘制了其中一条线（例如“A”线）。

我可以通过从 Dewar 脚本中的 get_timeseries_data 函数内部复制和粘贴部分代码来做到这一点（它会进行一些检查并调用 draw_timeseries 函数）。但这似乎是错误的。编写函数的重点是我应该能够直接调用 get_timeseries_data 本身，不是吗？

由于 Dewar 的最终代码块使用 selection.on('click')，因此模仿它似乎是合乎逻辑的，但使用 .on('load') 代替：

```
d3.select('#Line_A_key')
  .on('load', get_timeseries_data); 
```

将此添加到脚本的末尾不起作用。它甚至没有在控制台中给出错误，所以我猜“加载”事件永远不会发生——为什么？

所以我想也许我可以直接调用 get_timeseries_data 函数而无需等待“加载”事件：

```
d3.select('#Line_A_key')
  .get_timeseries_data(); 
```

但这抱怨该对象没有方法“get_timeseries_data”。好的，这是真的，但引出了一个问题——我什么时候**可以**在 D3 中调用函数？

D3（还是全部是 JS？）似乎在某些情况下需要一个将数据和索引作为其参数的函数。我如何了解这些情况是什么？如果我已经有这种形式的函数，我是否也可以在这些情况之外调用它，或者我是否需要为其他情况编写一个全新的函数？

我无法通过浏览 D3 API 或几个在线教程中的任何一个来为自己回答这些问题，最不幸的是，也不是来自 Dewar 的书。我应该去哪里看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-28T11:15:40.023

#Line_A_key 可能未加载。所以你不能选择它...

```
d3.select(window).on("load", get_timeseries_data); 
```

# php - 显示从最小值到最大值的轴 - 计算比例和标签

> ID：14923812
> 
> 赞同：9
> 
> 时间：2013-02-17T17:22:09.073
> 
> 标签：php, algorithm, php-gd, axis-labels

编写例程以在水平轴上显示数据（使用 PHP gd2，但这不是重点）。

轴从`$min`to开始并在 处`$max`显示一个菱形`$result`，这样的图像将大约 300px 宽和 30px 高，如下所示：

[![例子](../Images/c2494511cdab6edde13bacadc0d5386a.png)](https://i.stack.imgur.com/fkcTH.png)
[（来源：[testwolke.de](http://www.testwolke.de/profile.png)）]

在上面的例子中，`$min=0`, `$max=3`, `$result=0.6`. 现在，我需要计算一个有意义的比例和标签，在上面的例子中，例如虚线在`0 .25 .50 .75 1 1.25 ... up to 3`，数字标签在`0 1 2 3`。

如果`$min=-200`和`$max=600`，虚线应该在`-200 -150 -100 -50 0 50 100 ... up to 600`，数字标签在`-200 -100 0 100 ... up to 600`。

和`$min=.02`，`$max=5.80`虚线在`.02 .5 1 1.5 2 2.5 ... 5.5 5.8`，数字在`.02 1 2 3 4 5 5.8`。

我尝试通过数组明确地告诉函数将虚线和数字放在哪里，但是，嘿，应该工作的是计算机，而不是我，对吧？！

那么，如何计算？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T13:34:34.210

算法（示例值`$min=-186`和`$max=+153`限制）：

1.  取这两个限制`$min`，`$max`如果你愿意，可以标记它们

2.  计算 和 之间的`$max`差`$min`：`$diff = $max - $min`
    `153 - (-186) = 339`

3.  计算差值的 10 次对数`$base10 = log($diff,10)` = 2,5302

4.  四舍五入：`$power = round($base10)`= 2。
    这是你作为基本单位的第十次方

5.  计算`$step`：
    `$base_unit = 10^$power`= 100；
    `$step = $base_unit / 2`; （如果你想要每个 2 个刻度`$base_unit`）。

6.  计算是否`$min`可以被 整除`$step`，如果不是，则取最接近的（向上取整）一个
    （如果`$step = 50`是`$loop_start = -150`）

7.  `for ($i=$loop_start; $i<=$max; $i++=$step){ // $i's are your ticks`

8.  结尾

我在 Excel 中对其进行了测试，结果非常好，您可能想要增加它的功能，

例如（在第 5 点中）`$step`首先计算`$diff`,
说并以可被 整除的方式进行`$step = $diff / 4`舍入；`$step``$base_unit``$step`

这将避免出现 (101;201) 四个刻度之间的情况，并且在 0 和 999 之间`$step=25`有 39 步。`$step=25`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T19:35:01.923

[ACM 算法 463](http://www.netlib.org/toms/463)提供了三个简单的函数来生成良好的轴刻度，输出 xminp、xmaxp 和 dist 用于刻度上的最小值和最大值以及刻度上刻度线之间的距离，给定`n`包含数据点`xmin`和的间隔请求`xmax`：

1.  `Scale1()`给出一个具有近似`n`间隔的线性标度，`dist`是 10 乘以 1、2 或 5 的整数幂.
2.  `Scale2()`给出具有精确`n`间隔的线性标度（xminp 和 xmaxp 之间的差距往往大于由 产生的差距`Scale1()`）.
3.  `Scale3()`给出一个对数刻度。

1973 年的原始论文在[这里](http://lists.gnu.org/archive/html/octave-bug-tracker/2011-09/pdfJd5VVqNUGE.pdf)在线，它提供了比上面链接的代码更多的解释。

该代码在 Fortran 中，但它只是一组算术计算，因此解释和转换为其他语言非常简单。我自己没有写过任何 PHP，但它看起来很像 C，所以你可能想从通过[f2c](http://www.netlib.org/f2c/)运行代码开始，这应该会给你一些接近 PHP 中可运行的东西。

有更复杂的函数可以提供更漂亮的比例（例如 中的那些`gnuplot`），但`Scale1()`可能会用最少的代码为您完成这项工作。

（这个答案建立在我对上一个问题[Graph axiscalibration in C++](https://stackoverflow.com/questions/14948693/graph-axis-calibration-in-c/14949049#14949049)的回答之上）

（编辑——我找到了`Scale1()`我在 Perl 中所做的实现）：

```
use strict;

sub scale1 ($$$) {
  # from TOMS 463
  # returns a suitable scale ($xMinp, $xMaxp, $dist), when called with 
  # the minimum and maximum x values, and an approximate number of intervals
  # to divide into. $dist is the size of each interval that results.
  # @vInt is an array of acceptable values for $dist.
  # @sqr is an array of geometric means of adjacent values of @vInt, which
  # is used as break points to determine which @vInt value to use.
  #
  my ($xMin, $xMax, $n) = @_;
  @vInt = {1, 2, 5, 10};
  @sqr = {1.414214, 3.162278, 7.071068 }
  if ($xMin > $xMax) {
    my ($tmp) = $xMin;
    $xMin = $xMax;
    $xMax = $tmp;
    }
  my ($del) = 0.0002;   # accounts for computer round-off
  my ($fn) = $n;
  # find approximate interval size $a
  my ($a) = ($xMax - $xMin) / $fn;
  my ($al) = log10($a);
  my ($nal) = int($al);
  if ($a < 1) {
    $nal = $nal - 1;
    }
  # $a is scaled into a variable named $b, between 1 and 10
  my ($b) = $a / 10^$nal;
  # the closest permissable value for $b is found)
  my ($i);
  for ($i = 0; $i < $_sqr; $i++) {
    if ($b < $sqr[$i]) last;
  }
  # the interval size is computed
  $dist = $vInt[$i] * 10^$nal;
  $fm1 = $xMin / $dist;
  $m1 = int($fm1);
  if ($fm1 < 0) $m1--;
  if (abs(($m1 + 1.0) - $fm1) < $del) $m1++;
  # the new minimum and maximum limits are found
  $xMinp = $dist * $m1;
  $fm2 = $xMax / $dist;
  $m2 = $fm2 + 1;
  if ($fm2 < -1) $m2--;
  if (abs ($fm2 + 1 - $m2) < $del) $m2--;
  $xMaxp = $dist * $m2;
  # adjust limits to account for round-off if necessary
  if ($xMinp > $xMin) $xMinp = $xMin;
  if ($xMaxp < $xMax) $xMaxp = $xMax;
  return ($xMinp, $xMaxp, $dist);
  }

sub scale1_Test {
  $par = (-3.1, 11.1, 5,
      5.2, 10.1, 5,
      -12000, -100, 9);
  print "xMin\txMax\tn\txMinp\txMaxp,dist\n";
  for ($i = 0; $i < $_par/3; $i++) {
    ($xMinp, $xMaxp, $dist) = scale1($par[3*$i+0], 
    $par[3*$i+1], $par[3*$i+2]);
    print "$par[3*$i+0]\t$par[3*$i+1]\t$par[3*$i+2]\t$xMinp\t$xMaxp,$dist\n";
    }
  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T17:55:59.920

我知道这不是您正在寻找的，但希望它能让您朝着正确的方向开始。

```
$min = -200;
$max = 600;
$difference = $max - $min;
$labels = 10;
$picture_width = 300;
/* Get units per label */
$difference_between = $difference / ($labels - 1);
$width_between = $picture_width / $labels;
/* Make the label array */
$label_arr = array();
$label_arr[] = array('label' => $min, 'x_pos' => 0);
/* Loop through the number of labels */
for($i = 1, $l = $labels; $i < $l; $i++) {
    $label = $min + ($difference_between * $i);
    $label_arr[] = array('label' => $label, 'x_pos' => $width_between * $i);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T08:57:54.047

一个简单的例子是`$increment = ($max-$min)/$scale`您可以将比例调整为增量缩放的变量。既然你按它划分，它应该随着你的最大值和最小值的变化而成比例地变化。之后，您将拥有如下功能：

```
$end = false;
while($end==false){
    $breakpoint = $last_value + $increment; // that's your current breakpoint
    if($breakpoint > $max){
        $end = true;
    } 
} 
```

至少这就是这个概念......如果你有问题，请告诉我。

# css - 不能在不弄乱容器高度的情况下将两个 div 放在一行中

> ID：14923814
> 
> 赞同：2
> 
> 时间：2013-02-17T17:22:12.553
> 
> 标签：css, html, height

我试图将 2 个 div 放在一行中，但是当我设法做到这一点时 - 主容器的高度未正确调整：

```
<div class="container">
    <div class="info">Text</div>
    <div class="controls">
        <button value="Accept">Accept</button>
        <button value="Decline">Decline</button>
    </div>
</div> 
```

CSS：

```
.container{
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px;
border:1px solid #800000;

margin: 8px;
height:auto;
}

.info{
display: inline-block;
vertical-align: middle;
text-align: center;
}

.controls{
border-top-right-radius: 3px;
border-bottom-right-radius: 3px;
width: 130px;
padding: 8px;
border-left: 1px solid #000;
background-color: #D4D0C8;
float: right;
}

button{
width:100%; // what ever you want it to be
} 
```

[jsfiddle](http://jsfiddle.net/76Raj/33/)

如何固定容器高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:27:33.210

这是基于浮动的布局的一个常见问题：容器不会拉伸以适应其浮动子项的高度。这个问题有两个简单的解决方案：

*   添加一个 div `clear:both`（正如 AliRiza 在另一个答案中推荐的那样）。
*   添加`overflow:auto`到容器中。

我提倡使用后一种方法，因为它不涉及仅仅为了演示而添加 HTML 元素。[在这里查看更多信息](http://www.quirksmode.org/css/clearing.html)。

它可以这样实现：

```
.container {
    overflow:auto;
} 
```

[JS 小提琴示例](http://jsfiddle.net/76Raj/35/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:24:45.277

`<div style="clear:both;"></div>`在容器 div 末尾添加

```
<div class="container">
    <div class="info">Text</div>
    <div class="controls">
        <button value="Accept">Accept</button>
        <button value="Decline">Decline</button>
    </div>
    <div style="clear:both;"></div>
</div> 
```

编辑[DEMO](http://jsfiddle.net/alirizaadiyahsi_44/76Raj/34/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:47:07.353

css

```
<style>
div{
width:100px;
height:100px;
display:inline-block;
border:1px solid #ccc;
vertical-align:top;
}
</style> 
```

html

```
<div>your div 1</div>
<div>Your div 2</div> 
```

垂直对齐是为了让它保持在顶部，如果你添加不同数量的文本和图像，因为它下降了哈哈

# php - 使用 XPath 从 XML 文件中提取图像 src

> ID：14923815
> 
> 赞同：0
> 
> 时间：2013-02-17T17:22:20.883
> 
> 标签：php, xml, xpath, xml-parsing

我有一个 XML 文件，如下所示：

```
<time>13:12</time>
    <date>02/15/13 </date>
    <image1 src="path/to/image.jpeg" height="180" width="144" style="border-color: #800000" border="1" /> 
```

我对所有常规节点（例如“时间”和“日期”）使用 xpath 没有问题，但我被困在使用什么表达式来提取“image1 src”。

如果我将 src 添加到它，这也不起作用。

```
$items = $xml->xpath('/*image1'); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:24:12.087

你可以试试这个：

```
$items = $xml->xpath('//image1/@src'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:10:35.037

你也可以试试这个逻辑。

```
set serveroutput on
Declare
xl clob := '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
<time>13:12</time>
<date>02/15/13 </date>
<image1 src="path/to/image.jpeg" height="180" width="144" style="border-color:#800000" border="1" />   
</soapenv:Body>
</soapenv:Envelope>';

v_parser Xmlparser.Parser;
v_doc    XMLDOM.DOMDocument;
v_nodeList      XMLDOM.DOMNodeList;
v_attribute    varchar2(300);

Begin
v_parser := Xmlparser.newParser;
xmlparser.setValidationMode(v_parser, TRUE);
Xmlparser.parseClob(v_parser, xl);

v_doc := Xmlparser.getDocument(v_parser);
v_nodeList  := xslprocessor.selectNodes(XMLDOM.makeNode(v_doc), '//image1');
v_attribute := XMLDOM.getAttribute((XMLDOM.makeElement(XMLDOM.item(v_nodeList, 0))), 'src');

dbms_output.put_line(v_attribute);
End; 
```

**输出：** 路径/到/image.jpeg

# c++ - 如何在回调过程中创建第二个窗口？Win32

> ID：14923816
> 
> 赞同：3
> 
> 时间：2013-02-17T17:22:46.703
> 
> 标签：c++, winapi, user-interface

如果我的第一个窗口中的对话框以某种方式返回，我正在尝试创建第二个窗口。不幸的是，如果我从第一个窗口的回调过程中调用 CreateWindowEx()，它不会识别第二个窗口的 HWND。我还尝试在 WinMain 中定义第一个窗口并使其在回调中可见，但它再次无法识别 HWND。我是在试图做错事，还是我只是错过了什么？

编辑：

```
#include "stdafx.h"
#include "md5.h"
#include "Coursework.h"
#include "accounts.h"

const char g_szClassName[] = "myMainWindow";
const char g_szLoggedInClass[] = "loggedInWindow";
#define IDC_CREATE_ACCOUNT 101
#define IDC_LOG_IN 110
MYSQL *conn;
static std::string strUserName;

BOOL CALLBACK CreateDlgProc(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam)
{
switch(Message)
{
    case WM_INITDIALOG:
    return TRUE;
    case WM_COMMAND: 
        switch (LOWORD(wParam))
        {
            case IDOK:
                {
                CreateAccount(hwnd);
                }
                break;
            case IDCANCEL:
                EndDialog(hwnd, IDCANCEL);
            break;
        }
    default:
        return FALSE;
}
}
BOOL CALLBACK LogInDlgProc(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam)
{
switch(Message)
{
    case WM_INITDIALOG:
    return TRUE;
    case WM_COMMAND:
        switch(LOWORD(wParam))
        {
        case IDCANCEL:
            EndDialog(hwnd, IDCANCEL);
        break;
        case IDOK:
            {
                if(bLogIn(hwnd, strUserName))
                {
                    EndDialog(hwnd, IDOK);

                }
            }
        break;
        }
        break;
    default:
        return FALSE;
}
}
LRESULT CALLBACK LoggedInProc (HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
switch(msg)
{
    case WM_CLOSE:
        DestroyWindow(hwnd);
        break;
    default:
        return DefWindowProc(hwnd, msg, wParam, lParam);
}
return 0;
}
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
switch(msg)
{
    case WM_CLOSE:
        PostQuitMessage(0);
    break;
    case WM_CREATE:
        {
        if (*mysql_error(conn))                                                                         //Checks if the connection succeeded, and
        {                                                                                               //exits the program if false.
            MessageBox(hwnd, "No connection to the server could be established.\r\nPlease contact your administrator.", "Error", MB_ICONERROR);
            exit(-1);
        }
        HWND hCreateButton = CreateWindowEx(NULL, "Button", "Create account", WS_TABSTOP|WS_VISIBLE|WS_CHILD|BS_DEFPUSHBUTTON, 500, 250, 120, 24, hwnd, (HMENU)IDC_CREATE_ACCOUNT, GetModuleHandle(NULL), NULL);
        HWND hLogInButton = CreateWindowEx(NULL, "Button", "Log in", WS_TABSTOP|WS_VISIBLE|WS_CHILD|BS_DEFPUSHBUTTON, 500, 210, 120, 24, hwnd, (HMENU)IDC_LOG_IN, GetModuleHandle(NULL), NULL);
        }
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
    break;
    case WM_COMMAND:
        switch (LOWORD(wParam))
        {
        case IDC_CREATE_ACCOUNT:
            {
            int ret = DialogBox(GetModuleHandle(NULL), MAKEINTRESOURCE(IDD_DIALOG1), hwnd, CreateDlgProc);
            if (ret == -1)
            {
                MessageBox(hwnd, "Dialog failed to appear", "Error", MB_OK | MB_ICONINFORMATION);
            }
            }
            break;
        case IDC_LOG_IN:
            {
            int ret = DialogBox(GetModuleHandle(NULL), MAKEINTRESOURCE(IDD_DIALOG2), hwnd, LogInDlgProc);
            if(ret == -1)
            {
                MessageBox(hwnd, "Dialog failed to appear", "Error", MB_OK | MB_ICONINFORMATION);
            }
            else if(ret == IDOK)
            {
                ShowWindow(hwnd, SW_HIDE);
            }
            }
        }
        break;
    default:
        return DefWindowProc(hwnd, msg, wParam, lParam);
}
return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int     nCmdShow)
{

WNDCLASSEX wc;
WNDCLASSEX wc2;
HWND hwnd;
HWND hLoggedIn;
MSG Msg;
conn = mysql_init(NULL);                                                                    //Initialises mySQL connection
mysql_real_connect(conn, "localhost", "root", "SecurityRules", "coursework", 0, NULL, 0);
//Registering the Window Class
wc.cbSize        = sizeof(WNDCLASSEX);
wc.style         = 0;
wc.lpfnWndProc   = WndProc;
wc.cbClsExtra    = 0;
wc.cbWndExtra    = 0;
wc.hInstance     = hInstance;
wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
wc.lpszMenuName  = NULL;
wc.lpszClassName = g_szClassName;
wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

//Registering the second Window Class
wc2.cbSize       = sizeof(WNDCLASSEX);
wc2.style         = 0;
wc2.lpfnWndProc   = LoggedInProc;
wc2.cbClsExtra    = 0;
wc2.cbWndExtra    = 0;
wc2.hInstance     = hInstance;
wc2.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
wc2.hCursor       = LoadCursor(NULL, IDC_ARROW);
wc2.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
wc2.lpszMenuName  = NULL;
wc2.lpszClassName = g_szLoggedInClass;
wc2.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

if(!RegisterClassEx(&wc))
{
    MessageBox(NULL, "Window Registration Failed!\r\nContact your administrator.", "Error!", MB_ICONEXCLAMATION | MB_OK);
    return 0;
}
if(!RegisterClassEx(&wc2))
{
    MessageBox(NULL, "Window Registration failed!\r\nContact your administrator.", "Error!", MB_ICONEXCLAMATION|MB_OK);
    return 0;
}
//Creating the main Window
hwnd = CreateWindowEx(WS_EX_CLIENTEDGE, g_szClassName, "Coursework", WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, 1080, 640, NULL, NULL, hInstance, NULL);
hLoggedIn = CreateWindowEx(WS_EX_CLIENTEDGE, g_szLoggedInClass, "Coursework", WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, 1080, 640, NULL, NULL, hInstance, NULL);
if(hwnd == NULL)
{
    MessageBox(NULL, "Window Creation Failed!\r\nContact your adminstrator.", "Error!", MB_ICONEXCLAMATION | MB_OK);
    return 0;
}

ShowWindow(hwnd, nCmdShow);
UpdateWindow(hwnd);

// The Message Loop
while(GetMessage(&Msg, NULL, 0, 0) > 0)
{
    TranslateMessage(&Msg);
    DispatchMessage(&Msg);
}
mysql_close(conn);
return Msg.wParam;
}
} 
```

编辑 2：Intellisense（我在 Visual Studio 中）声明“标识符 hLoggedIn 未定义”以及 nCmdShow。

# php - 使用 post 方法将数据发送到另一个站点

> ID：14923818
> 
> 赞同：1
> 
> 时间：2013-02-17T17:22:51.100
> 
> 标签：php, post, bots

我想使用 post 方法将一些变量发送到另一台服务器。我做了一个代码，它在我的本地主机上运行。但我不能让它在另一个网站上工作。

```
<form name='myform' action='#' method='POST'>
    <input type='hidden' name='intnumber' value='15'>
       <a id='Link' onclick='document.myform.submit()' href='#'>Go!</a>
</form> 
```

我想自动获取关键字到我的网站。我使用 Ubersuggest 网站手册，但手动添加关键字需要很长时间。所以，我想发送 ubersuggest.org 帖子表单来搜索关键字并使用 php bot 获取关键字。我为搜索部分准备了一个代码，它不起作用：

```
<form name='uberform' action='http://www.ubersuggest.org/' method='POST'>
    <input type='hidden' name='query' value='game'>
    <input type='hidden' name='language' value='English/UK'>
    <input type='hidden' name='source' value='web'>
       <a id='Link' onclick='document.uberform.submit()' href='#'>Go!</a>
</form> 
```

请帮助我更正此代码。注意：我只想个人使用这个网站，我不会赚取任何利润。而且我不想对这个站点进行攻击等，因为我喜欢它并且我使用它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:25:55.200

尝试使用[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)。不允许发布到其他域。

# java - 传递了错误的 URI，硬编码 URI 有效

> ID：14923819
> 
> 赞同：1
> 
> 时间：2013-02-17T17:22:59.460
> 
> 标签：java, android, uri, image

好的，所以在这段代码中，我试图获取我自动保存的文件的 URI，我想将它放入位图图像中。如您所见，当我对图片位置进行硬编码时，这一切都有效。但是当我使用注释代码时，它没有返回正确的 URI，我不知道为什么，因为它应该可以工作？

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == FOTO_NEMEN && resultCode == RESULT_OK)
    {
        final File file = temp;
        try {
            String urienzo = Environment.getExternalStorageDirectory().getAbsolutePath() + "/DCIM/100MEDIA/IMAG0191.jpg";
            Uri uri = Uri.parse(urienzo);
            //Uri uri = Uri.fromFile(file);
            //Bitmap foto2 = MediaStore.Images.Media.getBitmap(this.getContentResolver(), uri);
            Bitmap foto = BitmapFactory.decodeFile(urienzo);
            if (foto == null) {
                Toast.makeText(this, ":(", Toast.LENGTH_SHORT).show();
                return;
            } 
```

如果有人可以为我指出正确的方向，以便从我刚刚拍摄并保存的照片中找到正确的 URI（就像它拍摄最后一张照片一样），他们将成为救命稻草。

当我对其进行硬编码时，`uri.toSring()`返回

```
/storage/sdcard0/DCIM/100MEDIA/IMAG0191.jpg 
```

当我使用它时`Uri.fromFile(file);`它返回

`file:///data/data/gip.chillax/cache/tijdelijk-687168107.jpg`

所以这显然是不正确的

# debugging - Aptana Studio 3.3.1 是否支持调试 Python 3.3？

> ID：14923821
> 
> 赞同：2
> 
> 时间：2013-02-17T17:23:38.820
> 
> 标签：debugging, python-3.x, aptana, pydev

我正在使用带有 PyDev 2.7 的 Apatana Studio 3.3.1 并在 Python 3.3 中编写代码。

我通过在我的代码中设置断点并单击运行>调试来调试我的代码，但是代码并没有在断点处停止并且一直运行到最后。

在解释器 - Python 设置中，我在库 > 系统 PYTHONPATH 中包含以下内容：

C:\Python33\DLLs

C:\Python33\lib

C:\Python33

C:\Python33\lib\site-packages

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T07:56:55.647

您需要确保运行/调试配置使用正确的主模块，否则它将把当前的 windows 源文件作为主模块。如果该文件中没有可执行代码，即全局范围内没有任何内容，则该文件将简单地运行到完成。

# android - android 是否在 listview 中构建包含 imageview 和 textview

> ID：14923822
> 
> 赞同：0
> 
> 时间：2013-02-17T17:23:41.643
> 
> 标签：android, android-layout, android-listview, android-xml

我正在使用`simple_list_item_1`内置的listview，它的代码是：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:paddingLeft="6dip"
    android:minHeight="?android:attr/listPreferredItemHeight"
/> 
```

我这样使用它：

```
String functions[] = new String[] { "asdf", "asdfasdf",
            "asdf", "asdfasdfasdf" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, functions));
    } 
```

它工作得很好，但我问android是否有一个内置listview，它的每一行都包含一个imageview和一个textview，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:29:31.603

不，SDK 中没有带有 ImageView 和 TextView 的布局。
但是，您可以轻松地创建一个。您需要扩展 ArrayAdapter 并覆盖`getView()`。这是一个可以帮助您的基本[教程。](http://blog.sptechnolab.com/2011/02/01/android/android-custom-listview-items-and-adapters/)

您还可以使用[`android:drawable___`](https://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawableBottom)组合两个视图的属性之一。

# c++ - C++ 在无符号整数和有符号整数之间转换

> ID：14923825
> 
> 赞同：0
> 
> 时间：2013-02-17T17:23:55.580
> 
> 标签：c++

为什么下面这段代码先写B2，然后再写A1？它不应该写两个A1吗？C++ 中的隐式数据类型从有符号整数转换为无符号整数（层次结构更高）

```
short a=-5;
unsigned short b=-5u;
if(a==b)
    printf("A1");
else
    printf("B2");
// prints B2

int a2=-5;
unsigned int b2=-5u;
if(a2==b2)
    printf("A1");
else
    printf("B2");
return 0;

// prints A1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:34:52.370

将负符号整数类型转换为`unsigned`始终下溢并产生模运算。`unsigned int x = (unsigned int)-1`存储`UINT_MAX`到`x`.

[示例](http://ideone.com/xYSUKj)：

```
unsigned int x = (unsigned int) -1;
std::cout << x << std::endl;
x = (unsigned int) -5;
std::cout << x << std::endl; 
```

输出：

```
4294967295
4294967291 
```

请注意，两者`-1`和`-5`都已转换为极高的值，其差值也等于 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:39:05.860

对于给定的代码

```
short a=-5;
unsigned short b=-5u;
if(a==b)
    printf("A1");
else
    printf("B2"); 
```

对于`sizeof(short)`<的实现`sizeof(int)`，何时`a`提升为`int`您`-5`保留的值，而`b`提升为`int`您的时间为您保留 2 ^k - 5 个值，其中 k 是 an 中的值表示位数`unsigned short`。

所以，因为`int`它们是不同的，即使它们可能是相同`short`大小的位模式。

# jquery - 将 JQuery 函数的返回值传递给另一个函数？

> ID：14923835
> 
> 赞同：1
> 
> 时间：2013-02-17T17:24:44.630
> 
> 标签：jquery, validation

我正在开发一个表单验证器，当我在底部调用函数 submitcheck 时，没有满足 if 条件并且`$("#send").button("enable");`没有触发。我已经在没有 if 语句的情况下确认该函数确实被调用并且如果`$("#send").button("enable");`触发它按预期工作。我在这里做错了什么？

```
 function submitcheck() {
        if (firstnamecheck() & lastnamecheck() & phonenumbercheck() & emailaddresscheck() & customermessagecheck() == true) {
            $("#send").button("enable");
        }
    }

    $(".email").click(function() {
        $("#email-form").dialog("open");
    });

    $("#first-name").keyup(function(firstnamecheck) {
        if ($("#first-name").val().length >= 2) {
            $("#first-name-check").fadeIn(100);
            return true;
        }
        else if ($("#first-name").val().length < 2) {
            $("#first-name-check").fadeOut(100);
            return false;
        }
    });

    $("#last-name").keyup(function(lastnamecheck) {
        if ($("#last-name").val().length >= 2) {
            $("#last-name-check").fadeIn(100);
            return true;
        }
        else if ($("#last-name").val().length < 2) {
            $("#last-name-check").fadeOut(100);
            return false;
        }
    });

    $("#area-code, #phone-prefix, #phone-postfix").keyup(function(phonenumbercheck) {
        if ((($("#area-code").val().length == 3) && ($("#phone-prefix").val().length == 3) && ($("#phone-postfix").val().length == 4))) {
            $("#phone-number-check").fadeIn(100);
            return true;
        }
        else if ((($("#area-code").val().length < 3) && ($("#phone-prefix").val().length < 3) && ($("#phone-postfix").val().length < 4))) {
            $("#phone-number-check").fadeOut(100);
            return false;
        }
    });

    $("#email-address").keyup(function(emailaddresscheck) {
        if ($("#email-address").val().length >= 6) {
            $("#email-address-check").fadeIn(100);
            return true;
        }
        else if ($("#email-address").val().length <= 5) {
            $("#email-address-check").fadeOut(100);
            return false;
        }
    });

    $("#customer-message").keyup(function(customermessagecheck) {
        if ($("#customer-message").val().length >= 10) {
            $("#customer-message-check").fadeIn(100);
            return true;
        }
        else if ($("#customer-message").val().length <= 9) {
            $("#customer-message-check").fadeOut(100);
            return false;
        }
    });

    $("#customer-message").keyup(submitcheck); 
```

好的，谢谢你们，我明白了。我重写了脚本，使其具有单独的处理函数和单独的激活器。以下确实有效：

```
 function submitcheck() {
        if (firstnamecheck() && lastnamecheck() && phonenumbercheck() && emailaddresscheck() && customermessagecheck() === true) {
            $("#send").button("enable");
        }
    }

    function firstnamecheck() {
        if ($("#first-name").val().length >= 2) {
            $("#first-name-check").fadeIn(100);
            return true;
        }
        else if ($("#first-name").val().length < 2) {
            $("#first-name-check").fadeOut(100);
            return false;
        }
    }

    function lastnamecheck() {
        if ($("#last-name").val().length >= 2) {
            $("#last-name-check").fadeIn(100);
            return true;
        }
        else if ($("#last-name").val().length < 2) {
            $("#last-name-check").fadeOut(100);
            return false;
        }
    }

    function phonenumbercheck() {
        if ((($("#area-code").val().length == 3) && ($("#phone-prefix").val().length == 3) && ($("#phone-postfix").val().length == 4))) {
            $("#phone-number-check").fadeIn(100);
            return true;
        }
        else if ((($("#area-code").val().length < 3) && ($("#phone-prefix").val().length < 3) && ($("#phone-postfix").val().length < 4))) {
            $("#phone-number-check").fadeOut(100);
            return false;
        }
    }

    function emailaddresscheck() {
        if ($("#email-address").val().length >= 6) {
            $("#email-address-check").fadeIn(100);
            return true;
        }
        else if ($("#email-address").val().length <= 5) {
            $("#email-address-check").fadeOut(100);
            return false;
        }
    }

    function customermessagecheck() {
        if ($("#customer-message").val().length >= 10) {
            $("#customer-message-check").fadeIn(100);
            return true;
        }
        else if ($("#customer-message").val().length <= 9) {
            $("#customer-message-check").fadeOut(100);
            return false;
        }
    }

    $(".email").click(function() {
        $("#email-form").dialog("open");
    });

    $("#first-name").keyup(firstnamecheck);
    $("#last-name").keyup(lastnamecheck);
    $("#area-code, #phone-prefix, #phone-postfix").keyup(phonenumbercheck);
    $("#email-address").keyup(emailaddresscheck);
    $("#customer-message").keyup(customermessagecheck);

    $("#customer-message").keyup(submitcheck); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:52:45.577

你能试试这个吗，如果它有效，那么对你拥有的每个功能都做同样的事情。

```
function submitcheck() {
    if (firstnamecheck() && lastnamecheck() 
         && phonenumbercheck() && emailaddresscheck() 
         && customermessagecheck() === true) {
        $("#send").button("enable");
    }
}

$(".email").click(function() {
    $("#email-form").dialog("open");
});

function firstnamecheck() {
    if ($("#first-name").val().length >= 2) {
        $("#first-name-check").fadeIn(100);
        return true;
    }
    else if ($("#first-name").val().length < 2) {
        $("#first-name-check").fadeOut(100);
        return false;
    }
}

$("#first-name").keyup(firstnamecheck);

$("#customer-message").keyup(submitcheck); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-17T17:39:06.723

尝试使用这个：

```
firstnamecheck() == true & lastnamecheck() == true & phonenumbercheck() == true & emailaddresscheck() == true & customermessagecheck() == true 
```

代替

```
firstnamecheck() & lastnamecheck() & phonenumbercheck() & emailaddresscheck() & customermessagecheck() == true 
```

# coffeescript - CoffeeScript 获取函数代码

> ID：14923840
> 
> 赞同：3
> 
> 时间：2013-02-17T17:25:18.600
> 
> 标签：coffeescript

有没有办法获取函数的 CoffeeScript 代码，类似于 javascript 函数 toString() 方法？它将对文档生成很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:35:19.077

[Coffeescript Redux](https://github.com/michaelficarra/CoffeeScriptRedux) - 下一代 Coffee Script 编译器应该能够生成[源映射](http://edanhewitt.com/slurp/introduction-to-javascript-source-maps/)。

# spring-mvc - 我可以分离弹簧形式吗？

> ID：14923843
> 
> 赞同：0
> 
> 时间：2013-02-17T17:25:22.677
> 
> 标签：spring-mvc, tiles

我正在使用瓷砖、Spring MVC、Spring 表单标签。我想一步一步地制作一个表格。单击按钮时，显示来自另一个图块定义的更多输入。但是抛出异常找不到“既不是BindingResult也不是bean名称的普通目标对象”，看起来“更多输入”无法从先前的请求中获取绑定对象，对吗？

源代码：

```
<form:form action="/saveTicker.do" commandName="ticker" modelAttribute="ticker" method="post">
 ...
 <form:input path="name" id="name"/>
 <a href="#" class="btn" onclick="confirmTicker();">Confirm</a>
<div class="row" id="filelist">
</div>
</form> 
```

js

```
var confirmTicker=function(){
var ticker=$('input:text').val();
$.get("/confirmTicker.do",{ticker:ticker}).success(function(data){
    $('#filelist').html(data);
}); 
```

}

想要导入另一个文件

```
<table class="table ">
<c:forEach var="f" items="${fileList}">
    <tr>
        <td>
            <form:checkbox path="files" value="${f}"></form:checkbox>
        </td>
    </tr>
</c:forEach>
</table> 
```

错误是

```
Neither BindingResult nor plain target object for bean name 'files' available as request attribute 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:06:38.483

如果我没看错，那么您想要的是一个“向导”表单，其中用户通过一系列步骤从一个表单传递到下一个表单。首先，我相信 Spring Web Flow 是开箱即用的，但是，如果像我一样，您不能使用 Spring Web Flow，您可以手动执行此操作。

首先，您需要一个 Form Bean（读取 Command 对象），它具有来自所有表单的所有可能输入。

接下来，您将拥有一个接受 Form Bean 并返回正确步骤的 Controller 方法（这就是我所做的），或者您可以拥有多个方法……没关系。您将在处理程序方法上使用 @ModelAttribute 注释将 Form Bean 绑定到视图表单。此外，控制器顶部的 @SessionAttributes 注释将 Form Bean 设置为会话属性。确保@ModelAttribute、@SessionAttribute 和视图的名称都对应相同的属性名称。

最后，创建多个视图，每个视图都具有相同的 ，但每个视图都只包含您要在该点在 FormBean 上设置的部分。您不能使用 JSR 303，或者至少我不知道如何使用，因为您无法在步骤之间进行验证。您将不得不自己处理最后的验证。

# wpf - Qt程序员的xaml布局介绍

> ID：14923846
> 
> 赞同：0
> 
> 时间：2013-02-17T17:25:31.050
> 
> 标签：wpf, qt, xaml, layout

我习惯了 Qt 和它的 Qt Designer。

XAML 及其布局控件“grid”和“StackPanel”在某种程度上相似，但我仍然错过或找不到 Qt 中一些最常见的设计属性。由于我对 XAML 完全陌生，我想知道答案或更多可用文档。

例如，我想添加 2 个水平或垂直的元素（比如说按钮），它们的默认高度和最小高度和最小宽度。如果水平对齐，则应将它们推向左侧，而右侧的剩余侧应自由。这意味着如果窗口大小增加，按钮的大小不会增加。在 Qt 中，这是通过网格结合间隔来实现的（例如，请参见[本教程](http://thelins.se/learnqt/category/tutorial/)的示例）。

我的第一个 XAML 与我的预期相差甚远。的定义`RowDefinition`是从教程中复制的。但是我不明白它的含义...

```
<Window x:Class="SpectrumViewer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Spectrum Viewer" Height="350" Width="525">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />      
    </Grid.RowDefinitions>
    <StackPanel Orientation="Horizontal" Margin="8" VerticalAlignment="Top">
      <Button MinWidth="75" MaxHeight="23" Margin="10" HorizontalAlignment="Left" Width="100" Name="buttonTest">test</Button>
      <TextBox MinWidth="75" MaxHeight="23" Margin="10" HorizontalAlignment="Left" Width="150" Name="textBoxValue"/>
    </StackPanel>
    <StackPanel Orientation="Horizontal" Margin="8" >
      <Button MinWidth="75" MaxHeight="23" Margin="10" HorizontalAlignment="Left" Width="100" Name="button1">button 1</Button>
      <Button MinWidth="75" MaxHeight="23" Margin="10" HorizontalAlignment="Left" Width="100" Name="button2">button 2</Button>
    </StackPanel>
  </Grid>
</Window> 
```

下图显示元素被推到左侧，但彼此上方的两个堆叠面板没有被推到顶部。如果我将它们都设置为`VerticalAlignment="Top"`重叠，这也是错误的。 ![在此处输入图像描述](../Images/ef835a1d20a248f7bd411e1b65c04a3a.png)

如果我调整窗口大小，可以看到元素没有调整大小并且第二个`StackPanel`与第一个重叠：

![在此处输入图像描述](../Images/6cab9ca4c5b6e7c32dace48a0a9292bc.png)

相反，应将元素调整为最小宽度，并且应禁止进一步调整窗口大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:33:37.523

当您将两者都设置为时，两个堆栈面板重叠的第一个问题`VerticalAlignment`是`Top`因为由于您没有指定`Grid.Row`它们应该在哪个位置，所以默认情况下两者都在`Grid.Row = 0`. 指定行索引，它们不会重叠：

```
<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="8" VerticalAlignment="Top">
  ....
</StackPanel>
<StackPanel Grid.Row="1" Orientation="Horizontal" Margin="8" VerticalAlignment="Top">
  ....
</StackPanel> 
```

当达到按钮的最小大小时，窗口不会停止调整大小。您可以设置`MinWidth`of`Grid`并要求窗口停在那里：

```
<Window x:Class="SpectrumViewer.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Spectrum Viewer" Height="350" Width="525" 
MinWidth="{Binding RelativeSource={RelativeSource Self}, Path=Content.MinWidth}">
  <Grid MinWidth="350">
   .......
  </Grid>
</Window> 
```

或设置自身`MinWidth`的`Window`:)

# html - HTML5 应用程序缓存问题

> ID：14923848
> 
> 赞同：0
> 
> 时间：2013-02-17T17:25:44.723
> 
> 标签：html, google-chrome, offlineapps

Chrome 版本（在多功能框中输入 about:version）：24.0.1312.57 m 操作系统（Windows 7/8/Vista/XP、Mac、Linux、Android、iOS）：Windows 7 扩展程序（在多功能框中输入 Chrome:extensions）：无/全部禁用

我在使用 html5 应用程序缓存功能时遇到问题。一旦关闭窗口，我就会丢失应用程序和 web sql 的内容。如果我在同一台上，一切正常，但是当我关闭窗口并键入应该根据应用程序缓存选择文件的 url 时，它不起作用，并且当我通过开发人员工具检查时一切都是空的。

可能的问题是什么？

-sk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:28:45.223

您是否尝试过使用 HTML5 localStorage。即使您关闭浏览器，这也是持久的。

此外，请确保没有任何标头说明“无缓存”等。

# r - 在 qplot 中使用带有数据框符号的列名

> ID：14923850
> 
> 赞同：3
> 
> 时间：2013-02-17T17:25:55.457
> 
> 标签：r, dataframe, ggplot2

我有一个数据集，不幸的是，我的某些列标签`dataframe`包含符号（- 或 +）。这似乎并没有打扰`dataframe`，但是当我尝试用它来绘制它时`qplot`会抛出一个错误：

```
x <- 1:5
y <- x
names <- c("1+", "2-")

mydf <- data.frame(x, y)
colnames(mydf) <- names
mydf
qplot(1+, 2-, data = mydf) 
```

如果我用引号将列名括起来，它只会给我一个类别（或类似的东西，它会给我一个“1+”与“2-”的图，中间有一个点）。

可以轻松做到这一点吗？我查看了 aes_string 但不太了解它（至少不足以让它工作）。

提前致谢。

PS我已经在网上搜索了一个解决方案，但找不到任何可以帮助我解决这个问题的东西（这可能是由于我不理解的某些方面），所以我认为这可能是因为这是一个完全迟钝的命名方案我有：p。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:32:14.990

由于您有非标准列名，因此您需要在列引用中使用反引号 (`)。

例如：

```
mydf$`1+`
[1] 1 2 3 4 5 
```

所以，你的`qplot()`电话应该是这样的：

```
qplot(`1+`, `2-`, data = mydf) 
```

![在此处输入图像描述](../Images/45f2f8f7dd2248e28c4c05a59443181b.png)

* * *

您可以在`?Quotes`和`?names`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T17:43:13.860

如另一个答案所述，您有问题，因为您没有标准名称。避免`backticks`使用符号的解决方案是将 colnames 转换为标准形式。将名称转换为常规名称的另一个动机是，例如，您不能`backticks`在`lattice`情节中使用。使用`gsub`你可以这样做：

```
 gsub('(^[0-9]+)[+|-]+|[+|-]+','a\\1',c("1+", "2-","a--"))
[1] "a1" "a2" "aa" 
```

因此，将此应用于您的示例：

```
 colnames(mydf) <- gsub('(^[0-9]+)[+|-]+|[+|-]+','a\\1',colnames(mydf))
 qplot(a1,a2,data = mydf) 
```

**EIDT**

您可以使用`make.names`选项 unique =T

```
 make.names(c("10+", "20-",  "10-", "a30++"),unique=T)
[1] "X10."  "X20."  "X10..1" "a30.." 
```

如果你不喜欢 R 命名规则，这里有一个使用的自定义版本`gsubfn`

```
library(gsubfn)
gsubfn("[+|-]|^[0-9]+", 
function(x) switch(x,'+'= 'a','-' ='b',paste('x',x,sep='')),
c("10+", "20-",  "10-", "a30++"))
"x10a"  "x20b"  "x10b" "a30aa"    ## note x10b looks better than X10..1 
```

# java - 启动完成时自动启动应用程序android

> ID：14923851
> 
> 赞同：1
> 
> 时间：2013-02-17T17:25:55.153
> 
> 标签：java, android, boot

我已经阅读了很多关于这个主题的内容，但由于某种原因我无法完成这项工作。我的应用程序每 5 分钟记录一次用户的位置。当用户重新启动手机时，我无法自动启动应用程序。我能够每 5 分钟检查一次用户的位置，以便警报正常工作。

这是我的android清单文件

```
<receiver android:name=".AlarmBroadcastReceiver" ></receiver>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

和 AlarmBroadcastReceiver 公共类 AlarmBroadcastReceiver 扩展 BroadcastReceiver{

```
public void onReceive(Context context, Intent intent) {
    Log.d("LOG","I've been Called");} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T17:29:14.037

添加：

```
<intent-filter>
    <action android:name="android.intent.action.BOOT_COMPLETED" />
</intent-filter> 
```

到`<receiver>`清单中的元素。

# php - 用 php exec() 对 composer.phar 的问题做出反应

> ID：14923855
> 
> 赞同：3
> 
> 时间：2013-02-17T17:26:31.993
> 
> 标签：php, exec, command-line-interface

标题有点模糊，我相信。但是我的英语不好，所以我缺少一个更好的。

我目前正在编写一个工具，该工具也可以从源代码执行 composer.phar。

因此，当使用 composer.phar 安装一些东西时，它有时会提出问题并需要额外的输入，例如所需的格式或简单的 Y/N 问题。

当我使用 exec() 时，似乎无法对这些问题做出反应。

所以我想知道如何使用 PHP 实现这一点。

有任何想法吗？

**更新** 为了展示一个简单的例子，我这​​样做：

```
exec("php /Users/johannesklauss/Development/web/composer.phar create-project symfony/framework-standard-edition /Users/johannesklauss/Development/web/Symfony 2.1.x-dev"); 
```

这里的问题是，and 的作曲家询问它是否应该保留版本控制历史记录：

> 是否要删除现有的 VCS（.git、.svn..）历史记录？[是，n]？

所以我需要在控制台中输入`y`或输入。`n`但这对于 exec 是不可能的。所以我需要一些交互模式或什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:39:39.580

提醒一句：寻找可以发送给初始命令以“自动应答”的标志。您无法真正保证 composer.phar 会问什么问题或它会问他们的顺序。它应该被视为“黑客”，我们大脑中的正常反应应该在谨慎和上下文等情况下适用......

无论如何，我认为您需要的是[proc_open()](http://www.php.net/manual/en/function.proc-open.php)，它可以让您启动一个进程并访问它的标准输入和标准输出。请参阅该文档页面上的示例 #1 代码，它非常接近您可能需要的内容。

一旦您可以访问该进程的标准输入/标准输出资源，您就可以随意读取/写入它们。好消息是，这将让您“阅读”提示并至少仔细检查它是否在询问您期望它询问的内容（例如，如果您不认识提示，则抛出异常）

# jms - 如何在发送 JMS 消息或发送到特定服务器之前按消息类型进行过滤？

> ID：14923856
> 
> 赞同：1
> 
> 时间：2013-02-17T17:26:32.460
> 
> 标签：jms, activemq

假设 Active MQ 是代理，并且有 6 台服务器连接了 JMS 侦听器。

当发送一个主题时，所有六台服务器都将使用这些消息。

现在我希望一个特定的服务器只使用消息而不是使用选择器的所有六个，并且应该在发送 JMS 之前对其进行过滤。

如何在 JMS 中定义选择器，以便主题将由特定服务器而不是全部使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:14:12.653

您需要 JMS[消息选择器](http://docs.oracle.com/cd/E19798-01/821-1841/bncer/index.html)。发送前无需过滤，接收时即可。仅 ID 为“serv_5”的服务器接收消息的示例：

制片人：

```
...
Message message = session.createMessage();
message.setObjectProperty("server_id", "serv_5");
producer.send(message); 
```

消费者（MDB）：

```
@MessageDriven(mappedName="jms/YourQueue", activationConfig =  {
        @ActivationConfigProperty(propertyName = "acknowledgeMode",
                                  propertyValue = "Auto-acknowledge"),
        @ActivationConfigProperty(propertyName = "destinationType",
                                  propertyValue = "javax.jms.Queue"),
        @ActivationConfigProperty(
                                  propertyName="messageSelector",
                                  propertyValue="server_id = 'serv_5'")

    })
public class YourMessageBean implements MessageListener { .. 
```

# mysql - 3张表之间的MySQL关系

> ID：14923860
> 
> 赞同：0
> 
> 时间：2013-02-17T17:27:01.130
> 
> 标签：mysql, join

我有 3 个表：用户、日志、log_entries。一个用户有很多日志，一个日志有很多条目。它看起来像这样

![zzz](../Images/ea551f7af92978dd89cc874da57cccef.png)

假设有 100 个用户，每个用户有 1000 个日志，每个日志有 1000 个条目。这意味着 log_entries 表中将有 100 000 000 行，当我想从日期 x 检查日志时，它需要从 100 000 000 行中过滤我想要的数据。

请问这个的正确解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:30:46.313

你可以使用`INNER JOIN`and `CONCAT`：

```
SELECT * 
FROM Users U
  INNER JOIN Logs L ON U.UserId = L.UserId
  INNER JOIN Log_Entries LE ON 
     CONCAT(L.UserId,'|',L.Session_Start) = LE.UserIdSession_Start 
```

但是，我建议更改您的表结构——这很奇怪。至少，将 Log_Id 添加到 Logs 表中，并将该字段也包含在 Log_Entries 表中。

# node.js - 为 Node.js 正确安装 SQLite

> ID：14923861
> 
> 赞同：0
> 
> 时间：2013-02-17T17:27:18.790
> 
> 标签：node.js, ubuntu, sqlite, npm

我按照为 Node.js安装[SQLite的说明进行操作：](https://npmjs.org/package/sqlite3)

```
apt-get install sqlite3
apt-get install libsqlite3-dev
npm install sqlite3 
```

仍然，代码

```
var db = new require('sqlite3').verbose().Database('database.db'); 
```

导致错误消息：

```
./node: symbol lookup error: /root/together2/node_modules/sqlite3/lib/sqlite3_bindings.node: undefined symbol: _ZN2v814ObjectTemplate11SetAccessorENS_6HandleINS_6StringEEEPFNS1_INS_5ValueEEENS_5LocalIS2_EERKNS_12AccessorInfoEEPFvS7_NS6_IS4_EESA_ES5_NS_13AccessControlENS_17PropertyAttributeE 
```

该系统是：

```
cat /etc/lsb-release 
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=12.04
DISTRIB_CODENAME=precise
DISTRIB_DESCRIPTION="Ubuntu 12.04.2 LTS" 
```

谁能解释我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:58:57.220

在我看来，该错误表明您正在尝试使用与构建不同的 node.js 构建的 sqlite3 包，因此缺少符号。您应该根据您需要的 node.js 版本重新构建包。

# java - 在相对布局中显示 AChartEngine

> ID：14923870
> 
> 赞同：2
> 
> 时间：2013-02-17T17:28:29.827
> 
> 标签：java, android, android-layout, android-intent, achartengine

我将有一个具有两个或三个相对布局的页面。其中之一必须专门用于包含折线图。为了显示折线图，我使用 AChartEngine。我想知道相对布局如何容纳 AChartEngine？

如果不可能，请建议我解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:37:08.553

如果你想在 AchartEngine 中显示一个图形作为整个屏幕的一部分，你需要`GraphicalView`

```
 private GraphicalView mChartView;
    //...
    mChartView = ChartFactory.getLineChartView(this, mDataset, mRenderer);
    RelativeLayout rlLayout=...;
    rlLayout.addView(mChartView); 
```

# computer-science - 网络 - 位填充

> ID：14923873
> 
> 赞同：2
> 
> 时间：2013-02-17T17:28:57.097
> 
> 标签：computer-science

我有这个关于比特填充网络的问题。我对提供的答案有点困惑。请帮助我理解它。

**问题：**使用位填充时，单个位的丢失、插入或修改是否可能导致校验和未检测到错误？如果不是，为什么不呢？如果是这样，怎么做？校验和长度在这里起作用吗？

**答：**有可能。如果数据是 01111110 -> 011111010 如果第二个 0 因传输错误而丢失，则会收到 01111110，可以理解为帧结束。然后将帧结束之前的位解释为校验和。 **如果校验和为 4 位，则 24 位中有 1 次机会将这些随机位解释为有效校验和。校验和越长，这个错误发生的可能性就越小**

我不明白粗体部分。24 分之一的机会被解释为有效校验和是什么意思？如果有人可以为我澄清一下，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T23:30:09.767

很抱歉死灵的回应，但我有这个答案，以防有人在做作业时偶然发现这个问题：D

您提供的“24 分之一”的答案是错误的。长度为 4 的校验和实际上有 16 分之一 (2^4) 的机会有效。随着校验和长度的增加，这样的事件显然不太可能发生，因为校验和的长度增加一会降低一半的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:48:34.750

短校验和仅有助于识别具有少量错误的错误传输。例如：

-1 校验和位 + 数据字节将正确检测数据中的一位错误，但两位错误可能导致校验和被评估为正确。

-2 个校验和位（取决于实现）+ 数据字节可以识别任何数据位置的 2 个错误位。

-一旦达到每字节 4 位校验和（1/2 比率），您甚至可以纠正校验和和数据中的错误位（RAID 阵列使用此功能）

# python - Python初学者： 尝试导入程序时

> ID：14923878
> 
> 赞同：2
> 
> 时间：2013-02-17T17:29:06.067
> 
> 标签：python

这是我学习编程的第一天。我正在关注 Python Programming: An Introduction to Computer Science 2nd ed。由 John Zelle 撰写，到目前为止一切进展顺利。

唯一的麻烦是，当我尝试导入保存的程序时，我得到一个语法错误。我编写程序并在执行之前保存它，但是当我尝试导入它时，我得到了错误。我试着打开一个新的贝壳实例，但没有雪茄。我正在使用 OSX Lion 10.8 和 Python 2.7.3。任何帮助表示赞赏。这就是问题的样子：

```
>>> #File: chaos.py
>>> #A simple program illustrating chaotic behavior.
>>> def main():
    print "This program illustrates a chaotic function"
    x=input("Enter a number between 0 and 1: ")
    for i in range(10):
        x = 3.9 * x * (1-x)
        print x

>>> main()
This program illustrates a chaotic function
Enter a number between 0 and 1: .25
0.73125
0.76644140625
0.698135010439
0.82189581879
0.570894019197
0.955398748364
0.166186721954
0.540417912062
0.9686289303
0.118509010176
>>> import chaos

Traceback (most recent call last):
  File "<pyshell#47>", line 1, in <module>
    import chaos
  File "chaos.py", line 1
    Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43)
             ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:33:22.410

```
 File "chaos.py", line 1
    Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43)
             ^
SyntaxError: invalid syntax 
```

看起来你的`chaos.py`脚本的第一行有一行不是 python：

```
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
```

`#`应该通过以符号开头的行来删除或注释掉它。

* * *

要记住的一些提示：

*   在 Python 中，空格很重要——它们表示缩进级别。不要混合空格和制表符，以免 Python raise `IndentationError`s。
*   在文本或网页中，您可能会看到包含`>>>`或`...`指示 Python 提示或缩进级别的交互式会话的记录。如果将代码传输到脚本，则必须删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:34:02.280

我的猜测是您将终端的内容逐字复制到文件中。还有很多不应该存在的东西，包括*版本提示*。

该文件应该是这样的：

```
#File: chaos.py
#A simple program illustrating chaotic behavior.
def main():
    print "This program illustrates a chaotic function"
    x=input("Enter a number between 0 and 1: ")
    for i in range(10):
        x = 3.9 * x * (1-x)
        print x 
```

不`>>>`，不`...`，没有制表符，当然不要复制版本信息：

```
Python 2.7.3 (default, Dec 22 2012, 21:27:36) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information. 
```

# css - css 选择了很多 ids 类

> ID：14923883
> 
> 赞同：-4
> 
> 时间：2013-02-17T17:29:41.787
> 
> 标签：css, css-selectors

我想选择很多不同的 id 和 classes。例如：

```
<div id="a b c d" class="e f g h i j ">Red text</div>
#a.#b.#c.#d.e.f.g.h.i.j{color:red;} 
```

也试过：

```
#a#b#c#d.e.f.g.h.i.j{color:red;} 
```

JSFIDDLE：http: [//jsfiddle.net/vHvm9/](http://jsfiddle.net/vHvm9/)

这行不通。CSS不支持那么多选择还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:35:05.157

就 CSS 而言，您的第二个选择器`#a#b#c#d.e.f.g.h.i.j`是有效的，*理论上*您可以在 CSS 中匹配具有多个 ID 的元素。但这只有在 DOM 实际上允许一个元素首先拥有那么多 ID 时才有效。在 HTML 中，空格不会像分隔类名那样分隔 ID 名称。一个 HTML 元素最多只能有一个由`id`属性指定的 ID，并且该 ID 不应该包含空格（即使如果您提供如此糟糕的标记，浏览器也会很乐意接受它）。

您仍然可以通过其他方式将其他 ID 分配给单个元素（同样，如果 DOM 允许的话），但绝对没有实际理由这样做，除非您正在使用具有多个 ID 意味着某些东西的一些晦涩的标记语言。

所以，回答你的问题：你做错的是试图将多个 ID 分配给一个元素。只需分配一个 ID，其值中没有任何空格，然后按该 ID 进行选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T17:35:31.227

正如 Jan 指出的那样，单个元素在 HTML 或 XML 中不能有多个 ID。

但是，如果您会找到支持多个 ID 的宿主语言（用于 CSS），那么您应该使用正确的 CSS 选择器：

```
#a#b#c#d.e.f.g.h.i.j{color:red;} 
```

# java - 如何将字节 [] 传递给此函数

> ID：14923884
> 
> 赞同：2
> 
> 时间：2013-02-17T17:30:16.330
> 
> 标签：java

我有一个带有这个签名的函数：

```
void insert(T[] thearray); 
```

我有一个像这样的字节数组：

```
byte[] value = new byte[4096]; 
```

但是如果我这样调用函数：

cb.插入（值）；

我收到一个错误：

```
The method insert(Byte) in the type CircularBuffer<Byte> is not applicable for the arguments (byte[]) 
```

CircularBuffer 是具有插入方法的类。

我像这样实例化 CircularBuffer：

```
CircularBuffer<Byte> cb = new CircularBuffer<Byte>(4096); 
```

如何将值传递给这个插入函数？

需要明确的是，CircularBuffer 类的声明如下：

```
public class CircularBuffer<T>

public CircularBuffer(int size) //ctor 
```

如果您需要更多详细信息：

[https://codereview.stackexchange.com/questions/22826/circular-buffer-implementation-for-buffering-tcp-socket-messages](https://codereview.stackexchange.com/questions/22826/circular-buffer-implementation-for-buffering-tcp-socket-messages)

最后编辑我出于效率原因决定创建一个专门的 ByteCircularBuffer。- 使用字节。这个原始类型到对象类型的区域，例如字节 -> 字节是令人困惑的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T17:31:54.287

A`byte[]`不是`Byte[]`. 您需要先明确地将一个转换为另一个。

参见例如*[将包装器的 ArrayList 转换为相应的基元数组](https://stackoverflow.com/questions/6649100/cast-wrapper-array-to-corresponding-primitive-array)*以了解执行此操作的可能方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T17:35:21.350

`Byte`与 完全不同`byte`。要么将字节数组转换为字节数组（这需要大量时间和内存），要么编写新类`ByteCircularBuffer`（取`CircularBuffer<T>`并替换`T`为`byte`）。

# dde - 有没有办法让 DDESpy 显示完整的未截断消息？如果没有，我可以使用什么工具？

> ID：14923887
> 
> 赞同：0
> 
> 时间：2013-02-17T17:30:20.760
> 
> 标签：dde

使用 DDESpy 监视 DDE 消息时，我可以捕获我正在寻找的内容，但是 DDESpy 会截断它：

```
[1ff8:212781728] CB(Execute, fmt=0x0("?"), 39002100, c001("WWW_OpenURL") 0(""), 3d003b00, 0, 0)=3e004300
    Input data=
    22 00 68 00 74 00 74 00 70 00 3a 00 2f 00 2f 00    ".h.t.t.p.:././. 6e 00 65 00 77 00 73 00 2e 00 79 00 63 00 6f 00    n.e.w.s...y.c.o.
    ... 
```

现在，这真的很烦人，因为我真正追求的是输入数据末尾的参数（在....之后）

我怎么能得到这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:30:20.760

> DDEML API 的位置对于 DDE 监视应用程序很重要。Microsoft 的 DDEspy 和我们的 Dynamic Data Studio 使用 DDEML APPCLASS_MONITOR 工具。消息挂钩可以读取附加到 WM_DDE_xxx 消息的数据的内存句柄，但对于 32 位应用程序，句柄在其他进程空间中没有意义。32 位版本的 DDEML API 提取一些数据并将其传递给监控应用程序，但只有前 28 个字节。没有办法获得比这更多的东西。

显然这就是为什么我只看到前 28 个字节的原因。我想我运气不好。

资料来源：[http ://www.angelfire.com/biz/rhaminisys/ddeinfo.html](http://www.angelfire.com/biz/rhaminisys/ddeinfo.html)

# facebook - Joomla K2 项目 facebook 评论 通知作者 电子邮件

> ID：14923890
> 
> 赞同：0
> 
> 时间：2013-02-17T17:30:40.043
> 
> 标签：facebook, joomla2.5, facebook-comments, notify, joomla-k2

好的，所以这有点棘手，但是必须有一些方法可以使用 facebooks FB.event 来做到这一点？

设置和问题。

每个 K2 项目（页面）都有一个评论框。当对他们的条目发表评论时，需要通知该页面的作者

因此，当有人在 facebook 评论框中输入内容时，我想确保通过电子邮件通知特定作者已发表评论。我认为首先必须为每个作者创建某种变量，然后将其与他们的特定电子邮件联系起来。然后根据作者编写一些发送电子邮件的 FB.event 处理程序。

有没有人可以帮助我弄清楚如何做到这一点？

**编辑** 请 [从外部文件中点击此链接 PHP 变量？](https://stackoverflow.com/questions/14992143/php-variable-from-external-file) 有关此主题的完整解决方案以及我在这里尝试完成的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:39:57.060

我以前用过K2，也遇到过同样的问题。此自动通知功能将很快添加到 k2 核心中。

目前 可以使用[K2MULTINOTIFY来添加这个功能](http://k2joom.com/k2-extensions/itemlist/category/25-k2multinotify)

另请查看此 k2 论坛主题。可能会有所帮助。 [http://getk2.org/community/New-to-K2-Ask-here-first/130778-Notification-of-new-comments-by-email](http://getk2.org/community/New-to-K2-Ask-here-first/130778-Notification-of-new-comments-by-email)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:29:19.787

您需要使用 FB.Event.subscribe 并订阅 comment.create 事件。在触发该事件时，您可以调用 ajax 函数来发送电子邮件。

参考：http: [//developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# asp.net - 如何在 asp.net mvc 3 中获取 FilePathResult 文件的完整文件路径？

> ID：14923893
> 
> 赞同：0
> 
> 时间：2013-02-17T17:30:49.347
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, file

我想获取操作方法返回的文件的最后修改日期。我想我需要一个完整的文件路径。`FilePathResult`有财产`FileName`。

这个属性是返回完整的文件路径还是只是一个名称？如果是这样，我能否以某种方式获得该文件的完整路径？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:34:12.070

它返回文件的完整路径。例子：

```
[MyActionFilter]
public ActionResult Index()
{
    return File(Server.MapPath("~/web.config"), "text/xml");
} 
```

接着：

```
public class MyActionFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var fileResult = filterContext.Result as FilePathResult;
        if (fileResult != null)
        {
            // here you will get the full absolute path to the file,
            // for example c:\inetpub\wwwroot\MvcApplication1\web.config
            string fileName = fileResult.FileName;
        }
    }
} 
```

# c# - StreamReader 尝试读取 txt 文件时出现 FileNotFound 异常

> ID：14923896
> 
> 赞同：0
> 
> 时间：2013-02-17T17:31:08.047
> 
> 标签：c#, .net, winforms, io, streamreader

```
using (StreamReader sr = new StreamReader("gold.txt"))
        {

            text.Text = sr.ReadToEnd();
        } 
```

为什么我会收到此错误？我只是创建了文本文件并尝试制作一个新的 StreamReader 来读取 gold.txt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:02:40.960

如果您在 Visual Studio 的项目中有“gold.txt”，请确保属性“复制到输出目录”设置为“如果较新则复制”或“始终复制”。

希望这可以帮助。我在这一点上失败了很多很多次：P

此外，在阅读之前检查是否 File.Exists("gold.txt") 总是一个好主意。我也倾向于使用 File.OpenText 或类似的，因为我觉得它让你更明显地看到你正在使用一个文件。

记得关闭（）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:36:20.933

当您提供`StreamReader`非限定路径作为参数时，它将在应用程序的工作目录中查找文件。如果文件不在那里，您可能希望给它一个完全限定的路径，例如：

```
StreamReader sr = new StreamReader(@"C:\Path\To\gold.txt") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T02:09:06.273

您收到此错误的原因是系统无法根据您传递给 StreamReader 的路径找到文件。这可能是因为该文件不在应用程序默认查找的目录中。

正如已经建议使用完整路径或将文件放在正确的位置应该在短期内解决问题。但是，在某些时候，您可能希望要求用户像这样定位文件：

```
 OpenFileDialog openFileDialog = new OpenFileDialog();

        if (openFileDialog.ShowDialog() == DialogResult.OK)
        {
            string filePath = openFileDialog.FileName;

            using (StreamReader sr = new StreamReader(filePath))
            {
                text.Text = sr.ReadToEnd();
            }
        } 
```

# fix-protocol - FIX - 确定消息长度？

> ID：14923899
> 
> 赞同：1
> 
> 时间：2013-02-17T17:31:16.897
> 
> 标签：fix-protocol

在 FIX 中是什么决定了消息的长度？因为我已经阅读过如果消息超过其长度，它将以片段的形式发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:51:55.313

拆分大消息不是 FIX 协议的隐含部分。

一些交易对手可能会选择将数据拆分为多条消息，而不是发送大量消息，但他们并非必须这样做。根据我的经验，我看到交易对手发送的信息大得离谱。

如果消息被拆分，那是因为发送方选择以这种方式实施他们的系统。

# c# - 如何将标签放在另一个标签上

> ID：14923900
> 
> 赞同：1
> 
> 时间：2013-02-17T17:31:17.470
> 
> 标签：c#, .net, winforms, label, transparency

如何将标签放在另一个标签上，并且它们的文本同时显示？当我做这项工作时，一个标签会出现在另一个标签的顶部，并且上面标签的文本会显示出来。即使我选择 BackColor = Transparent 但它不起作用。见下图。这是两个标签，标签 1 位于标签 2 下，标签 1 的文本丢失。

![在此处输入图像描述](../Images/f74f01d2df64d1641da8260226e7fa40.png)

我想得到这个结果：

![在此处输入图像描述](../Images/4f1610eb8c757f903e63330c3d9d1154.png)

想象一下我有两个标签。一个是 24pt 字体大小，另一个是 8pt。当我使用较大的字体时，标签的框架比其他标签大。我不能让它们更近。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:41:22.600

你可以这样试试：

```
label.Parent = parent with background
label.BackColor = Color.Transparent
label.Location = location you want offset with parent 
```

以下是 C# 中转换后的代码：

```
using System.Windows.Forms;
using System.Drawing;
using System.ComponentModel;
public class TransparentLabel {

    public TransparentLabel() {
        //  This call is required by the designer.
        InitializeComponent();
        //  Add any initialization after the InitializeComponent() call.
        //  Add any initialization after the InitializeComponent() call.
        this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
        this.SetStyle(ControlStyles.Opaque, true);
        this.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        this.components = new System.ComponentModel.Container();
        RF = new RectangleF(0, 0, base.Width, base.Height);
        LabelForeColorBrush = new SolidBrush(base.ForeColor);
    }

    private StringFormat sFormat;

    private RectangleF RF;

    private SolidBrush LabelForeColorBrush = null;

    private void UpdateText() {
        try {
            sFormat = new StringFormat();
            int x = 0;
            int y = 0;
            // With...
            switch (TextAlignment) {
                case ContentAlignment.BottomCenter:
                    sFormat.Alignment = StringAlignment.Center;
                    sFormat.LineAlignment = StringAlignment.Far;
                    break;
                case ContentAlignment.BottomLeft:
                    sFormat.Alignment = StringAlignment.Near;
                    sFormat.LineAlignment = StringAlignment.Far;
                    break;
                case ContentAlignment.BottomRight:
                    sFormat.Alignment = StringAlignment.Far;
                    sFormat.LineAlignment = StringAlignment.Far;
                    break;
                case ContentAlignment.MiddleLeft:
                    sFormat.Alignment = StringAlignment.Near;
                    sFormat.LineAlignment = StringAlignment.Center;
                    break;
                case ContentAlignment.MiddleCenter:
                    sFormat.Alignment = StringAlignment.Center;
                    sFormat.LineAlignment = StringAlignment.Center;
                    break;
                case ContentAlignment.MiddleRight:
                    sFormat.Alignment = StringAlignment.Far;
                    sFormat.LineAlignment = StringAlignment.Center;
                    break;
                case ContentAlignment.TopCenter:
                    sFormat.Alignment = StringAlignment.Center;
                    sFormat.LineAlignment = StringAlignment.Near;
                    break;
                case ContentAlignment.TopLeft:
                    sFormat.Alignment = StringAlignment.Near;
                    sFormat.LineAlignment = StringAlignment.Near;
                    break;
                case ContentAlignment.TopRight:
                    sFormat.Alignment = StringAlignment.Far;
                    sFormat.LineAlignment = StringAlignment.Near;
                    break;
            }
            sFormat.FormatFlags = StringDirection;
            ResizeControl();
        }
        catch (Exception ex) {
        }
    }

    private void ResizeControl() {
        RF.Size = new Size(base.Size);
        Invalidate();
    }

    private StringFormatFlags _StringDirection = (StringFormatFlags.NoClip < Description("The Direction of the Text."));

    public StringFormatFlags StringDirection {
        get {
            return _StringDirection;
        }
        set {
            _StringDirection = value;
            UpdateText;
        }
    }

    private System.Drawing.ContentAlignment _TextAlignment = (ContentAlignment.MiddleCenter < Description("The Text Alignment that will appear on this control."));

    public System.Drawing.ContentAlignment TextAlignment {
        get {
            return _TextAlignment;
        }
        set {
            _TextAlignment = value;
            UpdateText();
        }
    }

    public override System.Drawing.Color ForeColor {
        get {
            return base.ForeColor;
        }
        set {
            base.ForeColor = value;
            LabelForeColorBrush = new SolidBrush(value);
        }
    }

    private string _Labeltext = ("TransparentLabel" < Description("The text to be displayed in supports with real transparency."));

    public string LabelText {
        get {
            return _Labeltext;
        }
        set {
            _Labeltext = value;
            Invalidate();
        }
    }

    [Browsable(false)]
    [EditorBrowsable(false)]
    public override System.Drawing.Color BackColor {
        get {
            return base.BackColor;
        }
        set {
            base.BackColor = value;
        }
    }

    protected override System.Windows.Forms.CreateParams CreateParams {
        get {
            CreateParams cp = base.CreateParams;
            cp.ExStyle = (cp.ExStyle | 32);
            return cp;
        }
    }

    protected override void OnPaint(System.Windows.Forms.PaintEventArgs e) {
        try {
            base.OnPaint(e);
            //  draw the text on the control
            e.Graphics.DrawString(LabelText, base.Font, LabelForeColorBrush, RF, sFormat);
            //  MyBase.OnPaint(e)
        }
        catch (Exception ex) {
        }
    }

    private void TransparentLabel_Resize(object sender, System.EventArgs e) {
        ResizeControl();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:02:51.893

这不是标签，但它应该让你得到你想要达到的目标：

```
public void Form1()
{
     Paint += Form1_Paint;
}

public void Form1_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.Clear(SystemColors.Control);
    DrawOverlappingLabels(e, *new point for label 1*, *new point for label 2*);
}

private void DrawOverlappingLabels(PaintEventArgs e, _
    Point positionLabel1, Point positionLabel2)
{
    var graphics = e.Graphics();
    var rectLabel1 = new Rectangle(new positionLabel1, new Size(150, 30));
    var rectLabel2 = new Rectangle(new positionLabel2, new Size(150, 30));

    graphics.DrawString("Label1", new Font(Font.FontFamily, 24f), _
        new SolidBrush(Color.Black), rectLabel1);

    graphics.DrawString("Label2", new Font(Font.FontFamily, 8f), _ 
        new SolidBrush(Color.Black), rectLabel2);
} 
```

定义第二个`Rectangle`来调整第二个“标签”的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T17:36:20.473

Winforms 标签不支持透明度。如果你想做到这一点，你需要创建自己的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T18:14:17.627

我不知道我的问题是否正确。但是标签阴影不是你想要的吗？

如果是这种情况，那么您应该查看此站点：[Label drop shadow](http://www.charlespetzold.com/etc/RealTimeDropShadow/)

使用小样本：

```
using System;
using System.Drawing;
using System.Windows.Forms;

class WinFormsDropShadow: Form
{
    public static void Main()
    {
        Application.Run(new WinFormsDropShadow());
    }
    public WinFormsDropShadow()
    {
        Text = "Windows Forms Drop Shadow";
        BackColor = Color.White;
        Size = new Size(640, 480);
    }
    protected override void OnPaint(PaintEventArgs args)
    {
        Graphics grfx = args.Graphics;
        Font fnt = new Font("Arial Black", 96);
        string str = "Shadow";

        grfx.DrawString(str, fnt, Brushes.Gray, grfx.DpiX / 12, grfx.DpiY / 12);
        grfx.DrawString(str, fnt, Brushes.Black, 0, 0);
    }
} 
```

# c - 如何从 Gambit 方案中的 C 函数返回符号？

> ID：14923901
> 
> 赞同：4
> 
> 时间：2013-02-17T17:31:22.530
> 
> 标签：c, scheme, ffi, gambit

我在 c-lambda 后面有一个 C 函数，它需要通过 select(2) 调用进行一些摸索，并决定返回一个方案符号，以指示它做了什么，以及是否发生了错误情况。文档中没有解释如何将命名符号作为 ___SCMOBJ （或更合适的）从 C 中获取，并且 wiki 似乎已经崩溃。从 gambit.h 中也不能立即看出是否有用于此目的的宏。

这可能开箱即用吗？我目前的解决方法是将可返回的符号作为参数传递给函数，但是我希望能够返回更大的符号集，这很快就会变得非常笨拙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:05:24.173

[我在 gambit-c mailing list 上](https://mercure.iro.umontreal.ca/pipermail/gambit-list/2013-February/006411.html)问了这个问题。主要有三个回应：

1.  [将字符串-> 符号导出到 C](https://mercure.iro.umontreal.ca/pipermail/gambit-list/2013-February/006413.html)
2.  [在调用 C 之前构建一个查找表](https://mercure.iro.umontreal.ca/pipermail/gambit-list/2013-February/006412.html)
3.  [升级策略](https://mercure.iro.umontreal.ca/pipermail/gambit-list/2013-February/006418.html)

我暂时选择 (1)，因为我想与 Debian Squeeze 的策略兼容，而且我*认为*性能影响不会很大。

# c++ - 多个线程的随机数

> ID：14923902
> 
> 赞同：24
> 
> 时间：2013-02-17T17:31:26.907
> 
> 标签：c++, multithreading, boost, random, mersenne-twister

# 问题

我打算为 Linux 编写一个 C++11 应用程序，它基于大约一百万个伪随机 32 位数字进行一些数值模拟（不是密码学）。为了加快速度，我想使用桌面 CPU 的所有内核在并行线程中执行模拟。我想使用[`mt19937`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/random/mt19937.html)boost 提供的 Mersenne Twister 作为 PRNG，我想出于性能原因，我应该每个线程都有一个这样的 PRNG。现在我不确定如何播种它们以避免在多个线程中生成相同的随机数子序列。

# 备择方案

以下是我到目前为止想到的替代方案：

1.  为每个线程独立播种 PRNG `/dev/urandom`。

    我有点担心系统熵池耗尽的情况，因为我不知道系统内部 PRNG 是如何运行的。`/dev/urandom`由于使用 Mersenne Twister 本身的事实，我是否会意外地获得准确识别 Mersenne Twister 连续状态的连续种子？可能与我对下一点的担忧密切相关。

2.  从第一个中播种一个 PRNG，`/dev/urandom`另一个从第一个中播种。

    基本上也是同样的问题：使用一个 PRNG 来播种另一个使用相同算法的 PRNG 是好还是坏？或者换句话说，从 a 中读取 625 个 32 位整数是否`mt19937`直接对应于`mt19937`生成器在这一代期间的任何时候的内部状态？

3.  从一开始就用非梅森信息播种其他人。

    由于使用相同的算法来生成随机数和生成初始种子感觉好像是个坏主意，所以我考虑引入一些不依赖于 Mersenne Twister 算法的元素。例如，我可以将线程 id 异或到初始种子向量的每个元素中。这会让事情变得更好吗？

4.  在线程之间共享一个 PRNG。

    这将确保只有一个序列具有 Mersenne Twister 的所有已知和理想特性。但是控制对该生成器的访问所需的锁定开销确实让我有些担心。由于我没有发现相反的证据，我假设我作为图书馆用户将负责防止对 PRNG 的并发访问。

5.  预先生成所有随机数。

    这将有一个线程预先生成所有需要的 1M 随机数，以便稍后由不同的线程使用。与整个应用程序相比，4M 的内存需求会很小。这种方法最让我担心的是随机数的生成本身并不是并发的。整个方法也不能很好地扩展。

# 问题

您会建议哪种方法，为什么？或者你有什么不同的建议？

你知道我的哪些担忧是有道理的，哪些仅仅是因为我对事情的实际运作缺乏洞察力吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T18:14:35.937

我会选择＃1，从urandom播种每个prng。这确保了状态是完全独立的（只要种子数据是独立的）。除非你有很多线程，否则通常会有很多可用的熵。此外，根据用于 /dev/urandom 的算法，您几乎可以肯定不需要担心它。

因此，您可能会使用以下内容来创建每个 prng：

```
#include <random>

std::mt19937 get_prng() {
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    return std::mt19937(seed);
} 
```

您应该验证您在配置下的`std::random_device`pull实现。`/dev/urandom`如果它默认使用 /dev/urandom ，那么通常你可以说`std::random_device("/dev/random")`是否要使用 /dev/random 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T17:47:42.083

您可以使用具有不同代数结构的 PRNG 来播种不同的 PRNG。例如，一些 MD5 哈希序列。

但是我会选择#5。如果它有效，那很好。如果没有，您仍然可以优化它。

关键是创建一个***好的***PRNG 比人们想象的要困难得多。对于线程应用程序来说，一个好的 PRNG 很可能还有待研究。

如果 CPU 的数量足够低，您可以跳过蛙跳。例如，如果您有 4 个核心，则使用相同的值初始化所有核心，但将核心 1 PRNG 提前 1、#2 和 #3 提前 3。然后在需要新数字时总是提前 4 步。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T17:44:50.893

我会使用一个实例来播种其他实例。我很确定你可以很容易地安全地做到这一点。

*   即使状态空间的微小变化也会导致下游相当大的变化——如果你能确保它们没有完全相同的起始空间（并且没有相同的状态前缀），我不会担心产生相同的数字。例如，仅使用值 1,2,3 为三个线程播种就可以正常工作 - 您甚至不需要为整个空间播种。另一个优势：通过使用清晰可预测的种子，您可以轻松地抹黑您正在挑选任何运行的想法（假设您正在尝试展示某些东西）。
*   以某种方式播种是微不足道的，这意味着由此产生的“孩子”是高度不相关的。只需以广度优先的方式进行迭代；即，如果你想播种 N x 623 个 int 值，不要按顺序播种 623 个值，而是选择第一个 N 并分发，然后是下一个 N 等等。即使播种机和孩子之间存在一些相关性，各种各样的孩子应该几乎不存在——这就是你所关心的。
*   我更喜欢一种尽可能允许确定性执行的算法，因此*取决于*urandom 没有吸引力。这使得调试更容易。
*   最后，很明显 - 测试。这些 PRNG 相当强大，但无论如何都要关注结果并根据您正在模拟的内容进行一些相关性测试。大多数问题应该是显而易见的——要么你播种不好并且有明显的重复子序列，要么你播种得很好，然后质量由 PRNG 限制决定。
*   对于最终执行，在完成测试后，您可以使用 urandom 为 623 个状态值中的第一个播种，以便安心和/或线程 ID。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-17T21:05:53.543

种子线 1 与 1，种子线 2 与 2，依此类推。

如果您需要 monte carlo，这将为您提供可重复的结果，易于跟踪和实施。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-17T17:44:28.853

请看以下论文：[伪随机数生成器](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/DC/dgene.pdf)的动态创建及其实现：[Dynamic Creator](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/DC/dc.html)。它解决了这个确切的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-23T03:26:51.320

如果您真的想在数学上正确，请使用 SFMT 算法作者提供的跳转函数。跳转功能保证两个不同 PRNG 流之间的最小序列数。

然而，实际上，一个 /dev/urandom 初始化就足够了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-17T17:41:03.227

我会说＃3是赢家。使用 processID 或 threadID 之类的东西为每个线程播种；虽然从技术上讲，您可能会重叠，但这种可能性极小。一旦你离开个位数，即使是连续的数字也不应该与种子相关（我不知道 Twister 算法，但我见过的最差的 PRNG 高于 7）。与大多数 PRNG 方程的范围相比，一百万个 PRNG 并不算多。

最后，您可以相当轻松地进行检查。检查每个线程生成的*最后一个*种子与每个其他线程中的所有数字。如果种子出现在线程中，则检查之前在每个线程中生成的数字；如果它们也匹配，那么您就会发生冲突，需要重新播种您的流并重试。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-13T11:36:00.943

有一个实现（和已发表的论文）专门涉及使用 Mersenne Twister 进行并行计算。它是由 MT 的原始作者编写的。他们将其称为“Dynamic Creator”，可以在这里找到：

[http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/DC/dc.html](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/DC/dc.html)

那将是研究您对 MT19937 的具体用法的好地方，尤其是那里的论文。

# ruby-on-rails - rspec 的并行测试执行无限期挂起

> ID：14923911
> 
> 赞同：7
> 
> 时间：2013-02-17T17:32:25.613
> 
> 标签：ruby-on-rails, rspec, webkit, capybara, parallel-testing

我正在通过 capybara-webkit 驱动程序上的 parallel_tests 运行我的规范。我有以下红宝石环境：

```
 ruby -v
 ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.4.2] 
```

在包含以下内容的 gemset 上运行 rvm（为了相关性而截断了 capybara、rails、rspec 和 parallel_tests。如果看到我的 gemset 的更大范围会有所帮助，请告诉我）：

```
 *** LOCAL GEMS ***

 ...
 capybara (1.1.2)
 parallel_tests (0.8.12)
 rails (3.2.11)
 rspec (2.11.0) 
```

当我在单个进程上运行我的测试服时`rake spec`，我的所有测试都会运行完成。但是，在运行 parallel_tests 时，会发生以下情况：

```
 8 processes for 220 specs, ~ 27 specs per process 
```

此后，这些进程最终将开始返回：

```
 Finished in 11 minutes 15.76 seconds
 Finished in 11 minutes 28.89 seconds 
```

但是，在前 6 个进程返回后，parallel_spec 将无限期挂起，永远不会终止，并且永远不会打印剩余 2 个进程的输出。

我在运行 OS X Lion 的 MacBook Pro 上，配备 2.4GHz Intel i7。

所以我的问题很简单：它为什么挂起，我如何调试它挂起的原因，以及如何阻止它挂起并允许 parallel_tests 运行完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T14:29:28.573

缺少有关您的 rspec 配置和库使用的一些信息，您可能会得到答案。也就是说，在为集成规范运行 rspec 时，我在多线程环境中看到了类似的行为。

[在https://github.com/grosser/parallel_tests/wiki](https://github.com/grosser/parallel_tests/wiki)上找到的建议在集成规范方面似乎具有误导性。试图依靠or的`transaction`策略保证会导致任何非阻塞数据库适配器的死锁。`DatabaseCleaner``use_transactional_fixtures`

Capybara 为集成规范启动了多个线程。当客户端和服务器线程尝试同时与相同的记录进行交互时，您通常会遇到超时或死锁。有时，死锁会导致您的套件运行永久挂起，直到它被手动终止。

我发现防止这种情况发生的最可靠的配置是共享`ActiveRecord`实例之间的连接和明智地使用`DatabaseCleaner`.

```
# integration_spec_helper.rb

RSpec.configure do |config|
  config.use_transactional_fixtures = false

  class ActiveRecord::Base
    class_attribute :shared_connection

    def self.connection
      self.shared_connection || retrieve_connection
    end
  end

  config.before do |example|
    ActiveRecord::Base.shared_connection = ActiveRecord::Base.connection

    if Capybara.current_driver == :webkit
      DatabaseCleaner.strategy = :deletion
    else
      DatabaseCleaner.strategy = :transaction
    end

    DatabaseCleaner.start
  end

  config.after do
    DatabaseCleaner.clean
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-30T15:39:12.337

为了调试您的 Parallel 规范执行被卡住的位置，您需要知道进程的行为方式。这意味着如果一个或多个进程卡住了，他们这样做的规范是什么。

为此，您需要对 rspec 配置进行一些修改：

```
# Allows to access hanging spec name and source
# Throw the following command in a terminal whenever a spec is hanging
# $ ps -ef | grep rspec
RSpec.configure do |config|
  config.around :each do |example|
    title  = example.metadata[:full_description]
    source =  example.metadata[:block].source_location.join ":"
    $0 = %{rspec #{source} "#{title}"}
    example.run
  end
end 
```

然后打开另一个终端并执行：

`ps -ef | grep "rspec /"`

最初它将显示几个过程，例如：

```
julian    7128  7073 93 10:10 pts/1    00:09:54 rspec /home/julian/Lenda/lenda/spec/models/disclosures/docusign/refinance_loan_estimate_form_spec.rb:17 "RefinanceLoanEstimateForm should be able to be generated from non-completed applications"
julian    7141  7073 93 10:10 pts/1    00:09:50 rspec /home/julian/Lenda/lenda/spec/models/disclosures/disclosure_document_spec.rb:14 "DisclosureDocument retrieves fields signed by a signer"
julian    7147  7073 94 10:10 pts/1    00:09:58 rspec /home/julian/Lenda/lenda/spec/controllers/api/v1/applications_controller_spec.rb:192 "Api::V1::ApplicationsController admin user GET #show with a valid application_id " 
```

您需要**监控这些过程**，直到它们不再发生变化。当它们完成时，它们会消失，所以最后，您可能只会卡住一两个进程，但这实际上取决于您的测试套件。

从那里您需要单独调试该测试以找到问题。

# .net - .NET 调用流程

> ID：14923912
> 
> 赞同：5
> 
> 时间：2013-02-17T17:32:44.893
> 
> 标签：.net, invoke, invokerequired

我一直看到/使用某种形式或方式的代码：

```
public void method1(Object sender, EventArgs args)
{
  if(dataGridView1.InvokeRequired)
    dataGridView1.Invoke(new EventHandler(method1), null);
  else
    // Do something to dataGridView1
} 
```

我的问题是......当我使用 GUI 线程时会发生什么`Invoke`？是否像中断一样，线程将立即执行`method1`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:38:36.190

> 是不是像打断一样...

一点都不。当线程忙于执行代码时，没有安全的方法来中断线程。这会导致一种特别讨厌的问题，称为“重入错误”。这是固件程序员在嵌入式系统上实现中断处理程序时要解决的错误。在[这个网页上](http://www.ganssle.com/articles/areentra.htm)的一些背景。

程序的UI线程以不同的方式解决了这个问题，它在[生产者-消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)的标准解决方案中扮演消费者的角色。成分是生产者向其发布消息的线程安全队列和消费者线程中的*调度程序循环*。它从队列中检索消息并执行与消息关联的消息处理程序。这通常被描述为“泵送消息循环”。生产者通常是操作系统，为用户按下键或移动鼠标等操作生成消息。但它可以是任何生成消息的代码，包括另一个线程。

Winforms 为这个方案添加了一个额外的队列，即调用队列。它存储您的代码创建的委托对象以及您提供的参数。Begin/Invoke 将一个条目添加到调用队列并 pinvokes PostMessage() 以让 UI 线程知道需要执行某些操作。

如果 UI 线程忙于执行代码，比如处理一个绘制事件，那么它就不会注意到这一点。它不会注意到发布的消息，直到它再次空闲，重新进入调度程序循环并调用 GetMessage()。或者它已经空闲，它会很快响应消息。它检索调用队列中的条目并执行委托目标。

在使用 Invoke 而不是 BeginInvoke 的情况下，它将调用队列条目中 ManualResetEvent 的 Set() 方法。您的线程正在等待哪个线程，然后它将继续执行。如果委托方法失败，那么此时引发的异常也将在线程中重新引发。

您可以从它的工作方式中得出一些基本结论：

*   您的线程恢复执行的速度完全取决于 UI 线程的繁忙程度
*   一般来说，您希望使用 BeginInvoke，因为这可以防止您的工作线程阻塞
*   Begin/Invoke 调用自动*序列化*，先进先出，无需额外加锁
*   但是，如果您使用 BeginInvoke，那么委托将在稍后运行，因此您必须确保您提供给委托目标方法的任何数据在它运行时仍然有效。这可能需要锁定
*   使用 Invoke 而不是 BeginInvoke 可能会导致死锁。当 UI 线程*不是*空闲但正在等待其他事情发生时，就会发生这种情况。当其他东西正在等待您的线程完成时，有保证的死锁。另一个支持 BeginInvoke 而不是 Invoke 的好理由
*   当您调用的速度快于 UI 线程执行委托目标的速度时，您将遇到问题。UI 线程永远赶不上，调用队列无限制地增长。很容易注意到这一点，UI 线程停止处理低优先级的任务。其中包括绘画，您的 UI 看起来会*冻结*
*   当您的线程尝试调用已处理的表单或控件时，您将遇到一个大问题。这通常发生在用户关闭您的窗口并且您也不能确保工作线程停止运行时。这通常会导致崩溃，ObjectDisposedException 是最常见的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:40:17.540

简单的答案是：method1 在当前线程（GUI 线程）中被调用。它非常类似于：

```
public void method1(Object sender, EventArgs args)
{
  if(dataGridView1.InvokeRequired)
    method1();
  else
    // Do something to dataGridView1
} 
```

除了它还执行已在编组器控件中排队的所有先前方法。

这里有一些细节反编译[`Control.Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)。

正如 MSDN 上所解释的，`Invoke`“向上搜索控件的父链，直到找到具有窗口句柄的控件或表单”。我们称之为“父”控件：`marshaler`。

然后，与委托一起`Invoke`调用以作为参数执行。`marshaler.MarshaledInvoke`

在`MarshaledInvoke`中，执行的第一个操作是检查当前线程（调用的线程是否`Invoke`与附加到窗口句柄的线程相同`marshaler`。它将结果存储到变量`syncSameThread`中。

它将新任务排入与`marshaler`.

然后，如果`syncSameThread`is`true`它调用 in `InvokeMarshaledCallbacks`which 在当前线程中执行当前控件的任务队列中的所有任务（这里是`marshaler`）。

# android - Android 按钮侦听器

> ID：14923918
> 
> 赞同：2
> 
> 时间：2013-02-17T17:33:50.883
> 
> 标签：android, layout, button, tablelayout, onclicklistener

我对这个 Android 应用程序相当陌生，并且有几个涉及 onclick 侦听器的问题。

现在，我在 ScrollView 中有一个表格，其中一列包含多个按钮。我的目标是达到一个点，我可以单击一个按钮，然后第二个表格会出现在第一个表格旁边（与第一个表格相同的布局），但有一组不同的按钮。有人可以指导我正确的方向。

如果您有任何问题，请告诉我。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation='vertical' >

 <ScrollView 
 android:layout_width="125dp" 
 android:layout_height="200dp"   >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableLayout android:id="@+id/table_right"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TableRow android:id="@+id/row_1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/Button_1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button 1"
                android:textSize="20dp" >   
             </Button>
           </TableRow>

         <TableRow android:id="@+id/row_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

                <Button android:id="@+id/Button_2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Button 2"
                    android:textSize="25dp" > 
                </Button>
            </TableRow>

         <TableRow android:id="@+id/row_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

                <Button android:id="@+id/Button_3"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Button 3"
                    android:textSize="25dp" > 
                </Button>
            </TableRow> 

         <TableRow android:id="@+id/row_4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

                <Button android:id="@+id/Button_4"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Button 4"
                    android:textSize="25dp" > 
                </Button>
            </TableRow>

          <TableRow android:id="@+id/row_5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

                <Button android:id="@+id/Button_5"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Button 5"
                    android:textSize="25dp" > 
                </Button>
            </TableRow>

          <TableRow android:id="@+id/row_6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

                <Button android:id="@+id/Button_6"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Button 6"
                    android:textSize="25dp" > 
                </Button>
            </TableRow>

    </TableLayout>  
        </LinearLayout> 
            </ScrollView>
            </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:42:25.857

在布局 XML 文件中，创建两个表...但将第二个表的可见性设置为“GONE”。GONE 的可见性意味着它甚至不会占用布局中的任何空间。

我假设您知道在按下按钮时如何执行一些代码（如果不知道，请查找 onclicklistener 或 android:onClick xml 快捷方式）。当按下相应的按钮时，将第二个表格的可见性设置为 VISIBLE，它就会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:24:46.327

要在可见和不可见之间切换表格，我建议您使用以下示例：-

```
 boolean visible = true;
        private void showHide() {

            if (visible) {
            if(table1.getVisibility() == View.Invisible ); { 
                 table1.setVisibility(View.Visible) 
            }   
            }else table1.setVisibility(View.Invisible);

            visible = !visible;
        } 
```

并在您的`button`. `setOnClickListener`现在添加`showHide();`，当你点击它会显示的按钮 `table1`，当你再次点击它会隐藏它。希望对你有所帮助。

# android - 加权 LinearLayouts 不支持圆形矩形背景吗？

> ID：14923919
> 
> 赞同：2
> 
> 时间：2013-02-17T17:33:58.507
> 
> 标签：android, android-linearlayout

我经历了一些尴尬的行为。下面的 LinearLayout 被分配了正确的背景，但是所有的角半径都被简单地忽略了。问题是为什么，我该如何解决？如果我设置它`android:background`，`TextView`它工作正常。

为什么我将 TextView 包装在 LinearLayout 中？我想为 TextView 的文本设置动画。只有文字，没有背景，所以我把它包装成一个LinearLayout。

```
<LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/summary_title_horizontal_last" >

            <TextView
                android:id="@+id/evaluation_highscore_title"
                style="@style/Summary.Title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/evaluation_highscore"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textStyle="bold" />
        </LinearLayout> 
```

`@drawable/summary_title_horizontal_last`：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:startColor="@color/summary_title_start"
        android:endColor="@color/summary_title_end"
        android:angle="270" />

    <corners android:bottomLeftRadius="@dimen/summary_box_radius"  />

</shape> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:13:14.750

您确定您`TextView`没有在实心角落绘制背景吗？你似乎没有填充`LinearLayout`来让孩子们远离角落，这样他们就不会重绘背景（虽然我不知道你的`Summary.Title`风格是什么——你可以在那里使用边距）。

Hierarchy Viewer 在这种情况下非常有用，因为您可以看到每个视图在不同背景下绘制的内容。

# javascript - Javascript中的类型方法

> ID：14923922
> 
> 赞同：1
> 
> 时间：2013-02-17T17:34:06.640
> 
> 标签：javascript

我在各种 JS 代码中遇到以下语句，其中首先声明一个函数，比如说“test”，然后声明如下使用：

类型：“测试”

请解释这个语句是什么意思，其中“test”是一个函数名。

下面的示例代码：

```
var MyFavoritesAjax = Class.create();
MyFavoritesAjax.prototype = Object.extendsObject(AbstractAjaxProcessor, {

    ajaxFunction_getFavorites : function() {

        var result = this.newItem("result");

        result.setAttribute("message", "returning all favorites");

        this._addFavorite("color", "blue");
        this._addFavorite("beer", "lager");
        this._addFavorite("pet", "dog");

    },

    _addFavorite : function(name, value) {
        var favs = this.newItem("favorite");
        favs.setAttribute("name", name);
        favs.setAttribute("value", value);
    },

    type : "MyFavoritesAjax"

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:40:36.320

鉴于您发布的内容，您有一个[标签语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)（带有标签），包括一个由唯一[字符串文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#String_literals)`type`组成的简单表达式[语句](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Statements)。您可以（并且应该）在其后添加一个分号。然而， `"test"`

```
type: "text"; 
```

没有多大意义，执行时既没有任何影响，标签也没有标识循环。

* * *

啊，您的代码示例对此更加了解。正如预期的那样，您有一个传递给函数的[对象文字：](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)`Object.extendsObject`

```
{
    type : "MyFavoritesAjax"
} 
```

这里，“ `type`”是属性名称，`"MyFavoritesAjax"`字符串是属性值。这个函数用它做什么，以及它在那个上下文中*意味着*什么，应该用那个函数记录下来。我不知道，它不是本地的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:02:42.113

现在您已经展示了其余的代码：

```
type : "MyFavoritesAjax" 
```

是传递给的对象的属性声明`Object.extendsObject()`。它在该对象上创建一个名为的属性，`"type"`并为其赋值`"MyFavoritesAjax"`。

这类似于同一对象上的其他属性`ajaxFunction_getFavorites`和`_addFavorite`，尽管它们将函数引用作为其值而不是字符串。

# c - C中带有指针点的结构的深拷贝

> ID：14923927
> 
> 赞同：5
> 
> 时间：2013-02-17T17:34:53.383
> 
> 标签：c, pointers, struct, deep-copy

我需要你的帮助！

我喜欢复制这样的结构：

```
typedef struct PackageObject_s {
  long  **vertex;          // vertices
  long    num_vertex;      // count of vertices
  long    objectType;      // 
  REAL    r;               // 
  long    bottom[3];       // bounding box bottom vector
  long    top[3];          // bounding box top vector
  long   *start;           // 
  REAL    coverage;        // 
} PackageObject __attribute__ ((aligned)); 
```

我这样尝试：

```
static inline void PackageObject_copy(PackageObject *dst, const PackageObject *src) {

  dst->num_vertex = src->num_vertex;
  dst->objectType = src->objectType;
  dst->r          = src->r;
  vec_assign3l(dst->bottom, src->bottom);
  vec_assign3l(dst->top,    src->top);

  // TODO copy **vertex ???

  dst->coverage   = src->coverage;
  dst->coverage   = src->coverage;
} 
```

我该如何解决这个问题？

预先感谢您的帮助！！

更新 - 我的深度复制解决方案`vertex`- 感谢所有帮助：

```
dst->vertex = (long *)malloc(dst->num_vertex * 3 * sizeof(long));
for (long i=0; i < src->num_vertex; i++) { 
  dst->vertex[i] = (long)malloc(3*sizeof(long)); 
  memcpy(dst->vertex[i],src->vertex[i],3 * sizeof(long)); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:40:03.907

原答案：

假设顶点指向一个顶点数组，并且每个顶点包含 3 个长整数 (x,y,z)：

```
dst->vertex = (long **)malloc(dst->num_vertex * 3 * sizeof(long);
memcpy(dst,src,dst->num_vertex * 3 * sizeof(long)); 
```

更新，因为我意识到这可能有效但不干净或特别安全正如我在评论中提到的那样，如果你有代码会更干净

```
typedef struct vertextag { 
  long x;
  long y;
  long z;
} vertex_type; 
```

然后做了： dst->vertex = (vertex_type *)malloc(dst->num_vertex * sizeof(vertex_type); memcpy(dst,src,dst->num_vertex * sizeof(vertex_type));

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:18:21.423

我将假设顶点不在对象之间共享。也就是说，它们属于所讨论的结构。

有两种主要情况需要考虑：

```
1\. Copying into a new object
2\. Copying into an existing object 
```

复制到新对象很简单。

```
1a. Allocate space for <num_vertex> pointers.
1b. Allocate space for each vertex.
2a. Copy <num_vertex> pointers from source to destination.
2b. Copy <num_vertex> vertices from source to destination. 
```

复制到现有对象与复制到新对象非常相似，只是您必须先执行以下操作。

```
0a. Loop through each element of <vertex> and free the vertex.
0b. Free the array of vertex pointers.
1\. Follow the steps for copying into a new object. 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T17:46:36.697

这取决于顶点数组是否应该属于您尝试复制的对象，或者它是否在多个对象之间共享。这两种方法都在实践中使用，具体取决于情况（如果可以单独更改复制对象的顶点，则*必须复制数组）。*您必须选择其中哪些对您正在开发的应用程序有意义。

如果数组可以被指向它们的对象共享，只需复制指针即可。

```
dst->vertex = src->vertex; 
```

如果每个对象都有自己的顶点（因此可以为复制的对象单独更改它们），那么您必须分配和复制数组以及存储指针的位置，并将指向该位置的指针设置到复制对象中。

```
long* vertexCopy = malloc(howmanybytes);
memcpy(vertexCopy, *src->vertex, howmanybytes);
long** holder = malloc(sizeof(void*));
holder[0] = vertexCopy;
dst->vertex = holder; 
```

# django - django url 不工作除了管理员

> ID：14923929
> 
> 赞同：1
> 
> 时间：2013-02-17T17:35:02.940
> 
> 标签：django, django-urls

嗨，伙计们，我的 django 应用程序 url 不起作用下面是我的项目 urls.py

```
 urlpatterns = patterns('',

           url(r'^admin/', include(admin.site.urls)),
            url(r'^', include('recipe.urls', namespace="recipe")),

    ) 
```

这是我的应用程序 urls.py

```
from django.conf.urls import patterns,url

urlpatterns = patterns('recipe.views',

    url(r'^$', 'index', name='index'),
    url(r'^create/recipe/$', 'create_recipe', name='create_recipe'),
    url(r'^create/ingredients/(?P<recipe_id>\d+)/$', 'create_ingredients', 
    name="create_ingredients"),
    url(r'^create/steps/(?P<recipe_id>\d+)/$', 'create_steps', 
    name="create_steps"),
     url(r'^view/recipe/(?P<recipe_id>\d+)/$', 'view_recipe', 
    name="view_recipe"),
) 
```

除了管理员工作正常之外，我无法获取索引页面和其他 url。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:47:11.650

在你的`settings.py`，找到并编辑这个 -

```
TEMPLATE_DIRS = (
    os.path.join(os.path.abspath(os.path.dirname(__file__)), "templates"),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:48:07.093

从问题评论看来，您在使用 Django 模板而不是 urlconfig 时遇到问题。这是 Django 模板的工作原理。在您`settings.py`定义的变量`TEMPLATES_DIRS`中，您指定 Django 将在其中查找模板的所有目录的元组。

假设您有以下内容`TEMPLATES_DIRS`：

```
TEMPLATES_DIRS = (
    '/absolute/path/to/foo',
    '/absolute/path/to/bar',
) 
```

然后，如果您查找模板`base.html`，Django 将在以下位置查找它，如果找到，将使用第一个位置：

```
/absolute/path/to/foo/base.html
/absolute/path/to/bar/base.html 
```

在您的情况下，您提到您将模板存储在 Django 的项目文件夹和应用程序的文件夹中。在这种情况下，您必须确保两个文件夹的定义`TEMPLATES_DIRS`如下：

```
TEMPLATES_DIRS = (
    '/absolute/path/to/project/templates',
    '/absolute/path/to/app/templates',
) 
```

然后在您的情况下，Django 将能够同时找到`base.html`和`index.html`。现在为了让事情变得更简单，您可以`PROJECT_PATH`在`settings.py`其中定义将存储项目路径的绝对路径，以便您可以轻松地将项目移动到不同的位置。我认为这可能是您的问题所在。在 Django >= 1.4 中，您具有以下项目结构：

```
/project         <= this should be your PROJECT_PATH
  /project       <= instead of this
    templates/
      base.html
    settings.py
  /recipe
    templates/
      index.html
    models.py 
```

考虑到这一点，尝试使用这样的东西：

```
PROJECT_PATH = os.path.abspath(os.path.join(__file__, '..', '..'))
PROJECT_NAME = os.path.basename(PROJECT_PATH)

TEMPLATES_DIRS = (
    os.path.join(PROJECT_PATH, PROJECT_NAME, 'templates'),
    os.path.join(PROJECT_PATH, 'recipe', 'templates')
) 
```

在上面的 PROJECT_PATH 中计算了项目的绝对路径。假设您`settings.py`位于`/some/path/project/project/settings.py`。然后按如下方式计算项目路径：

```
>>> # settings.py

>>> print __file__
/some/path/project/project/settings.py
>>> print os.path.join(__file__, '..', '..')
/some/path/project/project/settings.py/../../
>>> # now abspath normalizes the path two levels up
>>> print os.path.abspath(os.path.join(__file__, '..', '..'))
/some/path/project

>>> # now you figure out the project name so that you can get the project templates folder
>>> print os.path.basename(os.path.abspath(os.path.join(__file__, '..', '..')))
project

>>> print os.path.join(PROJECT_PATH, PROJECT_NAME, 'templates')
/some/path/project/project/templates
>>> print os.path.join(PROJECT_PATH, 'recipe', 'templates')
/some/path/project/recipe/templates 
```

# javascript - Chrome 将没有 Z 的 ISO 时间解释为 UTC；C# 问题

> ID：14923932
> 
> 赞同：11
> 
> 时间：2013-02-17T17:35:19.000
> 
> 标签：javascript, asp.net, datetime, utc

在 Chrome、FF 和 IE 上运行这个 jsfiddle：http: [//jsfiddle.net/E9gq9/7/ ，你会得到：](http://jsfiddle.net/E9gq9/7/)

铬合金：

[铬 http://images.devs-on.net/Image/vBTz86J0f4o8zlL3-Region.png](http://images.devs-on.net/Image/vBTz86J0f4o8zlL3-Region.png)

火狐：

[火狐 http://images.devs-on.net/Image/aNPxNPUpltyjVpSX-Region.png](http://images.devs-on.net/Image/aNPxNPUpltyjVpSX-Region.png)

IE：

[IE http://images.devs-on.net/Image/WXLM5Ev1Viq4ecFq-Region.png](http://images.devs-on.net/Image/WXLM5Ev1Viq4ecFq-Region.png)

苹果浏览器：

[Safari http://images.devs-on.net/Image/AEcyUouX04k2yIPo-Region.png](http://images.devs-on.net/Image/AEcyUouX04k2yIPo-Region.png)

[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)似乎没有说明应该如何解释没有尾随 Z 的字符串。

我们的服务器 (ASP.NET MVC4) 将 UTC 时间从我们的数据库中提取为`DateTime`s 并简单地将它们填充到 JSON 中。正如您所看到的，因此我们在浏览器上得到了不一致的结果。

我们应该在服务器端将 Z 附加到它们吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-17T17:42:52.903

> 我们应该在服务器端将 Z 附加到它们吗？

**TL；DR**是的，您可能应该这样做。

遗憾的是，在没有时区的情况下正确处理日期和日期/时间多年来一直在变化——无论是在规范方面，还是在 JavaScript 引擎对规范的遵守方面。

当这个答案最初是在 2013 年编写的时，[ES5](https://en.wikipedia.org/wiki/ISO_8601)规范（第一个为 JavaScript 定义了日期/时间格式，这意味着它是[ISO-8601](https://en.wikipedia.org/wiki/ISO_8601)的子集）很明确：没有时区 = UTC：

> 缺席时区偏移的值为“Z”。

但这与 ISO-8601 不一致，其中没有时区指示符意味着“本地时间”。一些实现从未实现 ES5 的含义，而是坚持使用 ISO-8601。

在[ES2015](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-date-time-string-format)（又名“ES6”）中，它被更改为匹配 ISO-8601：

> 如果不存在时区偏移量，则日期时间将被解释为本地时间。

**但是**，这会导致与现有代码的不兼容问题，尤其是对于仅日期形式的`2018-07-01`，因此在[ES2016](http://www.ecma-international.org/ecma-262/7.0/index.html#sec-date-time-string-format)中再次对其进行了更改：

> 当时区偏移不存在时，仅日期形式被解释为 UTC 时间，而日期时间形式被解释为本地时间。

So`new Date("2018-07-01")`被解析为 UTC，但`new Date("2018-07-01T00")`被解析为本地时间。

自 ES2017 和即将到来的 ES2018 以来，它一直保持一致；[这是当前编辑草稿的链接](https://tc39.github.io/ecma262/#sec-date-time-string-format)，它不再具有确切的文本，但仍然以相同的方式定义它（尽管恕我直言不太清楚）。

你可以在这里测试你当前的浏览器：

```
function test(val, expect) {
  var result = +val === +expect ? "Good" : "ERROR";
  console.log(val.toISOString(), expect.toISOString(), result);
}
test(new Date("2018-07-01"), new Date(Date.UTC(2018, 6, 1)));
test(new Date("2018-07-01T00:00:00"), new Date(2018, 6, 1));
```

截至 2021 年 9 月的状态：

*   现代版本的 Firefox、Chrome 和 Safari 都做到了这一点，包括 iOS 浏览器（目前都使用 Apple 的 JavaScriptCore JavaScript 引擎，因为 Apple 不会让他们使用自己的 JIT）
*   IE11 做对了（有趣的是）

~~截至 2018 年 4 月的状态：~~

~~*   IE11 做对了（有趣的是）*   Firefox 做对了*   Chrome 65（桌面，Android）做对了*   Chrome 64 (iOS v11.3) 获取日期/时间格式错误（解析为 UTC）~~
*   ~~v11.3 中的 iOS Safari 获取日期/时间格式错误（解析为 UTC）~~

奇怪的是，我在 v6.4（Chrome 64 中的 v8）和 v6​​.5（Chrome 65 中的 v8）之间修复的 v8 问题列表中找不到问题；我只能找到[这个](https://bugs.chromium.org/p/v8/issues/detail?id=4987&can=1&q=date%20parsing%20utc&colspec=ID%20Type%20Status%20Priority%20Owner%20Summary%20HW%20OS%20Component%20Stars)仍然存在但似乎已修复的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T23:09:00.957

归根结底，如果我的服务器始终以所有浏览器都能正确处理的格式发送客户端 DateTime 对象，我在此应用程序中面临的问题就可以解决。

这意味着最后必须有那个“Z”。原来 ASP.NET MVC4 Json 序列化程序基于 Json.NET，但默认情况下没有打开 Utc。的默认值`DateTimeZoneHandling`似乎是`RoundtripKind`，这不会输出带有 Z 的值，即使`DateTime.Kind == Utc`，这很烦人。

所以修复似乎是，将 Json.NET 处理时区的方式设置为`DateTimeZoneHandling.Utc`：

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
// Force Utc formatting ('Z' at end). 
json.SerializerSettings.DateTimeZoneHandling = DateTimeZoneHandling.Utc; 
```

现在，从我的服务器到浏览器的所有内容都被格式化为 ISO-8601，末尾带有“Z”。我测试过的所有浏览器都可以做正确的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-03T16:15:23.493

我遇到了这个问题，用本地时区解释日期比更改为“Z”更有意义，至少对于我的应用程序而言。我创建了此函数以在 ISO 日期中缺少本地时区信息时附加它。这可以用来代替 new Date()。部分来自这个答案： [How to ISO 8601 format a Date with Timezone Offset in JavaScript?](https://stackoverflow.com/questions/17415579/how-to-iso-8601-format-a-date-with-timezone-offset-in-javascript/17415677#17415677)

```
parseDate = function (/*String*/ d) {
    if (d.search(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/) == 0) {
        var pad = function (num) {
            norm = Math.abs(Math.floor(num));
            return (norm < 10 ? '0' : '') + norm;
        },
        tzo = -(new Date(d)).getTimezoneOffset(),
        sign = tzo >= 0 ? '+' : '-';
        return new Date(d + sign + pad(tzo / 60) + ':' + pad(tzo % 60));
    } else {
        return new Date(d);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-30T20:37:43.123

除了@tig 的答案（这正是我想要的）：

这是 .NetCore 1 的解决方案

```
services.AddMvc();
services.Configure<MvcJsonOptions>(o =>
{
    o.SerializerSettings.DateTimeZoneHandling = DateTimeZoneHandling.Utc;
}); 
```

或者

```
services.AddMvc().AddJsonOptions(o => o.SerializerSettings.DateTimeZoneHandling = DateTimeZoneHandling.Utc); 
```

对于 .NetCore 1.0.1

```
services
    .AddMvcCore()
    .AddJsonFormatters(o => o...); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-30T20:56:32.403

大卫哈蒙德的[答案](https://stackoverflow.com/a/19164106/279251)很棒，但并没有玩所有的把戏；所以这是一个修改版本：

*   允许日期/时间字符串中的小数部分
*   允许日期/时间字符串中的可选秒数
*   考虑跨越夏令时

```
appendTimezone = function (/*String*/ d) {
    // check for ISO 8601 date-time string (seconds and fractional part are optional)
    if (d.search(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(?::\d{2}(?:\.\d{1-3})?)?$/) == 0) {
        var pad = function (num) {
            norm = Math.abs(Math.floor(num));
            return (norm < 10 ? '0' : '') + norm;
        },
        tzo = -new Date(d).getTimezoneOffset(),
        sign = tzo >= 0 ? '+' : '-';

        var adjusted = d + sign + pad(tzo / 60) + ':' + pad(tzo % 60);

        // check whether timezone offsets are equal;
        // if not then the specified date is just within the hour when the clock
        // has been turned forward or back
        if (-new Date(adjusted).getTimezoneOffset() != tzo) {
            // re-adjust
            tzo -= 60;
            adjusted = d + sign + pad(tzo / 60) + ':' + pad(tzo % 60);
        }

        return adjusted;
    } else {
        return d;
    }
}

parseDate = function (/*String*/ d) {
    return new Date(appendTimezone(d));
} 
```

# windows - 是否可以覆盖 Windows 中的默认文件夹浏览器对话框？

> ID：14923934
> 
> 赞同：2
> 
> 时间：2013-02-17T17:35:27.923
> 
> 标签：windows, customization, folderbrowserdialog

一段时间以来，我不喜欢 Windows 中的默认文件夹浏览器对话框：

![Windows 中的默认文件夹浏览器对话框](../Images/5c45e594eef2dce85d53a37792746c5f.png)

当然，至少它有自动完成的文本框；但是，如果您严格使用树视图，则可能需要大量点击和滚动才能到达您想要的位置！

如果我能开发出更好的（符合我的口味）用户界面并**让它覆盖我系统的默认值**，那就太好了。也就是说，每当应用程序从我的系统上的 Windows 请求本机文件夹浏览器时，我希望能够定义我自己的此类控件，以便显示它而不是内置的。当然，如果他们愿意，我也可以/愿意将其提供给其他人以安装在他们的系统上。

Windows 是否提供 API 来覆盖此特定功能？也许通过外壳扩展或类似的东西？（我从来没有做过任何直接与操作系统交互的事情；所以我什至不知道从哪里开始寻找。）

基本上我在问这个操作系统级别的功能是否可以在 Windows 中配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T03:34:23.150

一个名为[FlashFolder](http://sourceforge.net/projects/flashfolder/)的应用程序似乎已经做到了这一点，并且有很多好评（这意味着它至少适用于某人）但在 Windows 8 上根本不适合我。如果你有早期版本的 Windows，也许你会有更多的运气。

# php - 通过没有 json_encode 的 AJAX 返回 PHP 数组

> ID：14923935
> 
> 赞同：1
> 
> 时间：2013-02-17T17:35:31.657
> 
> 标签：php, jquery, ajax, json

只是我遇到了一个小怪癖，我想我一定遗漏了一些东西，所以想澄清一下，以进一步了解我的代码发生了什么。

我通过 jQuery AJAX 发布一个表单，该表单由 PHP 处理，在 PHP 中我有一行

```
return $status; 
```

$status 是一个包含多个值的数组，即`$status['username'] = 'admin'`

AJAX 数据类型设置为“JSON”，但我没有`echo json_encode($status);`在我的 PHP 中使用，但一切仍在工作，我的 $status 数组在 AJAX 成功后由 jQuery 处理。为什么是这样？我认为 json_encode 是必需的，但似乎不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:11:51.037

抱歉，我犯了一个愚蠢的错误，我的函数确实返回了 $status，但它正在将它返回给另一个执行 json_encode 的函数。谜团解决了:) 谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:45:08.587

json_encode 使用但在你看到的这个函数之外

```
 return $status; 
```

为了理解它，您可以在浏览器中查看开发人员工具，然后找到 ajax 请求，查看内容响应。for find json_encode 搜索调用此函数的位置。

# java - p:commandbutton 与我要求的相反

> ID：14923937
> 
> 赞同：3
> 
> 时间：2013-02-17T17:35:31.857
> 
> 标签：java, jsf, primefaces

我一直在尝试禁用按钮，直到操作完成，然后这应该启用按钮

按钮的代码：

```
<p:commandButton action="#{navigationBean.naviagtion}"   value="Next" disabled="#{!fileUploadController.uploadComplete}"/> 
```

这是 bean FileUploadController 它是一个托管和视图范围的 bean

```
 private boolean uploadComplete;

            uploadComplete = false;
            System.out.println("Upload complete value before copy file " + uploadComplete);
            copyFile(event.getFile().getFileName(), event.getFile().getInputstream());

        } catch (IOException e) {
//handle the exception
            e.printStackTrace();
        }

    }

    public void copyFile(String fileName, InputStream in) throws IOException {
        try {
            uploadComplete = true;

//does things 

    public boolean isUploadComplete() {
        return uploadComplete;
    }

    public void setUploadComplete(boolean uploadComplete) {
        this.uploadComplete = uploadComplete;
    } 
```

在控制台中，我将其设置为每次 uploadComplete 从 false 更改为 true 时打印出来，我得到：

```
INFO: Upload complete value before copy file false
INFO: upload complete value is : true 
```

如您所见，值从 false 变为 true，问题是按钮永远不会再次激活，这是为什么呢？

这工作得很好，没有错误等，这只是按钮问题

编辑 ：

经过一些测试，我发现了这段代码：

```
<p:commandButton id="Nav" action="#{navigationBean.naviagtion}"   value="Next"  ajax="False" update ="Nav" disabled="#{fileUploadController.uploadComplete}"/> 
```

它使按钮在启动时生效，但是当我上传文件并单击按钮时，它会刷新页面然后变为禁用状态，这与我想要发生的事情完全相反，哈哈，那么这个动作怎么能被尊重？我曾尝试交换正确和错误的陈述，但这没有用，这从未使按钮禁用

我怎样才能翻转控件，使其与现在做的相反

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:54:20.083

在[我们最近一次谈话](https://stackoverflow.com/questions/14923037/how-to-hide-a-button-until-an-action-is-completed-primefaces/14923185#comment20942072_14923185)之后，我查看了[官方文档](http://primefaces.org/documentation.html)。
我发现，就像 Sujoy 评论的那样，`p:fileOupload`有一个属性`update`，它在上传完成后呈现一个组件。因此，您`Nav`通过添加`update="Nav"`到您的`<p:fileUpload>`. 这样你的按钮应该被正确地重新渲染。
另外，也许您应该切换`disabled="#{fileUploadController.uploadComplete}"/>`回`disabled="#{!fileUploadController.uploadComplete}"/>`if ，因此*不应*禁用`uploadComplete == true`该按钮。**您必须将更新放在上传组件中，而不是按钮本身！** 希望您的测试没有弄乱您的代码；）

# java - 当我们触摸错误的项目时如何更改布局？

> ID：14923940
> 
> 赞同：-1
> 
> 时间：2013-02-17T17:36:09.413
> 
> 标签：java, android, android-intent

我需要按以下方式运行此应用程序->：如果我触摸正确的项目，`score+=5`则更改为`gameover.xml`

我不知道如何将活动更改为另一个布局？

```
public boolean onTouchEvent(MotionEvent event) {
    int tx = (int) event.getX();
    int ty = (int) event.getY();

    int i = 0;
    for (Element element : mElements) {
        if ((element.getmX() < tx && tx < element.getmX()
                + element.getWidth())
                && (element.getmY() < ty && ty < element.getmY()
                        + element.getHeight())) {

            ***if (mGarbagType == element.getGtype()) {

                score += 5;
            }else score-=5;***
            Log.v("DustmanGame", "Touch on:" + element.getGtype()
                    + "Score : 5");

            mElements.remove(i);
            mElementNumber = mElements.size();

            mGarbagType = randomGarbage();

            break;
        }
        i++;
    }
    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:43:58.330

> 我不知道如何将活动更改为另一个布局

在您的`else {}`块中，只需启动一个新的 Activity即可在此 Activity`startActivity()`中使用`gameover.xml`或调用。`setContentView(R.layout.gameover)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:01:45.383

在您的 xml 中有不同的布局，使用 View.GONE 或 View.VISIBLE 取决于您的要求

# php - default.ctp 中的 CakePHP 脚本函数

> ID：14923941
> 
> 赞同：0
> 
> 时间：2013-02-17T17:36:11.773
> 
> 标签：php, html, cakephp

我如何将它放在我的 cakephp default.ctp 文件中？

我是 cakephp 的新手，因为我刚开始使用它。

```
 <script>
        $(function()
        {
          $('#slider-id').codaSlider();
        });
    </script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:16:18.927

尽管您的问题在当前状态下无法回答，但您应该看看 JsHelper，尤其是 Js->buffer()。这允许您在视图中附加脚本并在布局中一次全部输出。

[http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#working-with-buffered-scripts](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#working-with-buffered-scripts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:25:05.603

1.  `app/View/Layout/default.ctp`在您喜欢的代码编辑器中打开文件
2.  `<head>`在您的和之间添加以下内容`</head>`：

    > ```
    >  <script>
    >     $(function()
    >     {
    >       $('#slider-id').codaSlider();
    >     });
    >  </script></li> 
    > ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:35:21.707

在 CakePHP 2.x 中，现在有一些称为块的东西，块只是存储在内存中的输出块，直到它们被提取用于输出。

曾经有一个`$scripts_for_layout`变量可以让您将脚本放入其中，但现在我们使用`$this->fetch('scripts');`来获取 Html 所需的任何 JavaScript。

有几种方法可以使用[HtmlHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3ascriptBlock)`scripts`将 JavaScript 注入块中。

将其添加到块中，这可以在视图或布局中完成。只需在获取块之前运行此代码。

> $this->Html->scriptBlock("$('#slider-id').codaSlider();",array('inline'=>false));

在布局中输出脚本很容易。

> $this->fetch('scripts');

这种方法的优点是您可以从 CakePHP 中的多个位置添加 JavaScript，但它们将在布局中您想要的位置输出。

# javascript - 如何在 ember.js 中消除嵌套路由的歧义？

> ID：14923942
> 
> 赞同：6
> 
> 时间：2013-02-17T17:36:14.930
> 
> 标签：javascript, ember.js, ember-router

我有两个资源都具有相同的子资源：

```
App.Router.map(function() {
  this.resource('post', function() {
    this.resource('comments', function() {
      this.route('new');
    });
  });

  this.resource('product', function() {
    this.resource('comments', function() {
      this.route('new');
    });
  });
}); 
```

问题是 ember 路由器仅根据当前和父路由而不是整个层次结构来构建路由对象的名称。因此，它会尝试同时路由`/posts/:id/comments/new`和路由`/products/:id/comments/new`到`App.NewCommentRoute`对象。我能做些什么来解决这个问题？

这篇文章改编自[GitHub 问题](https://github.com/emberjs/ember.js/issues/2086)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:00:50.030

我将 James A. Rosen 的解决方案更进一步，它就像一种魅力。有点多余，但让事情变得更加直观：

```
App.Router.map(function() {
  this.resource('post', function() {
    this.resource('post.comments', { path: '/comments' }, function() {
      this.route('new');
    });
  });

  this.resource('product', function() {
    this.resource('product.comments', { path: '/comments' }, function() {
      this.route('new');
    });
  });
}); 
```

这现在允许您使用`transitionTo('product.comments.new')`或`App.register('route:product.comments.new', myRouteHandler)`按最初预期的方式使用。

如果您不手动注册路由处理程序，Ember 甚至会优雅地在`App.ProductCommentsNewRoute`

唯一的缺点是定义具有与父资源相同的根名称的子资源名称的冗余。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T17:36:14.930

指定路由时，路径默认为路由的名称，但您可以覆盖该行为。您可以通过在名称中添加更多信息来消除深层嵌套路由的歧义。有两种方法可以达到基本相同的结果：

```
App.Router.map(function() {
  this.resource('post', function() {
    this.resource('postComments', { path: '/comments' }, function() {
      this.route('new');
    });
  });

  this.resource('product', function() {
    this.resource('productComments', { path: '/comments' }, function() {
      this.route('new');
    });
  });
}); 
```

```
App.Router.map(function() {
  this.resource('post', function() {
    this.resource('comments', function() {
      this.route('newPost', { path: '/new' });
    });
  });

  this.resource('product', function() {
    this.resource('comments', function() {
      this.route('newPost', { path: '/new' });
    });
  });
}); 
```

在这两种情况下，路由器现在都会查找`App.NewPostCommentsPath`和`App.NewProductCommentsPath`。第一个优于第二个的优点是，如果你想在外部引用路由，它们看起来像“postComments.new”而不是“comments.newPost”。前者对我来说更好读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-04T14:48:38.330

两年过去了，Ember 有了很大的进步。

从 Ember 1.7 开始，路由也可以有子路由：http: [//emberjs.com/blog/2014/08/23/ember-1-7-0-released.html#toc_new-features](http://emberjs.com/blog/2014/08/23/ember-1-7-0-released.html#toc_new-features)。

所以我们可以将其重写为：

```
this.route('post', function() {
    this.route('comments', { path: '/comments' }, function() {
        this.route('new');
    });
});

this.route('product', function() {
    this.route('comments', { path: '/comments' }, function() {
        this.route('new');
    });
}); 
```

# c - C函数中的参数传递

> ID：14923948
> 
> 赞同：1
> 
> 时间：2013-02-17T17:36:31.683
> 
> 标签：c, function, parameter-passing

我有一个用 C 编写的函数

```
FindBeginKey(KeyListTraverser, BeginPage, BeginKey, key1); 
```

BeginKey 是函数调用之前的指针，我没有启动它，比如

```
BeginKey = NULL; 
```

在`FindBeginKey()`函数中，我分配`BeginKey`给另一个指针，并尝试在函数中打印出当前地址`BeginKey`，它工作正常。但是当代码从函数返回时，我尝试再次打印出地址`BeginKey`，它显示`0x0`.

为什么会发生这种情况，如果我想保留函数中分配的地址，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:41:20.810

据我了解，您调用的函数如下：

```
FindBeginKey(KeyListTraverser, BeginPage, BeginKey, key1); 
```

但是，当您尝试写入 BeginKey 地址时，您基本上是在传递一个指向 0x00 的指针。相反，您需要传递一个指向 BeginKey 的指针。

```
FindBeginKey(KeyListTraverser, BeginPage, &BeginKey, key1); 
```

如果这不是您的意思，那么发布代码示例肯定会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:41:22.857

要从函数中传递一个值，您必须*通过引用*而不是像 C 函数通常那样*通过值传递。*为此，请使参数成为指向要传递的类型的指针。`&`然后使用（地址操作数）将该值传递给调用。

例如

```
FindFoo(FOO** BeginKey); 
```

并称之为：

```
FindFoo(&BeginKey); 
```

并在函数中：

```
*BeginKey = 0xDEADC0DE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:21:49.253

我不知道现在所有的 C 参数传递规则是什么，所以这个答案可能有点过时了。根据构建应用程序和这些应用程序调用的库的常见做法，C 函数的返回将包含状态，因此函数的调用者可以根据状态代码做出决定。

如果您希望函数修改其输入参数，您可以通过引用传递这些参数`&my_val`，其中`int my_val;`. 并且您的函数必须像这样取消引用 my_val`*my_val`才能获得它的值。

此外，出于性能原因，地址（通过引用）可能更可取，这样您的应用程序就不会费心将参数的值复制到局部变量中。该序言代码由编译器生成。单个参数、char、int 等非常简单。

我已经习惯了 C++，以至于在 C++ 中通过引用传递不需要取消引用。编译器的代码会为您处理这些。

但是，请考虑将指针传递给结构。

```
struct my_struct  
{                    
  int iType;
  char szName[100];
} struct1;

struct my_struct *pStruct1 = &struct1; 
```

如果结构包含在初始化时填充一次然后在整个程序中引用的查找数据，则通过 value 传递指向结构的指针`pStruct1`。如果您正在编写一个函数来填充该结构或更改已经存在的数据，则按值传递指向该结构的指针。您仍然可以更改结构指针指向的内容。

另一方面，如果您正在编写一个函数来为指针分配内存，则传递指针的地址（指向指针的指针）`&pStruct1`，这样您的指针就会指向正确的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T17:43:51.193

如果要修改子程序中的参数，则应传递要修改的内容的指针。

```
void subroutine(int* x) {
   *x = 5;   // will modify the variable which x points to

   x = 5;  // INVALID! x is a pointer, not an integer
} 
```

# c# - Razor / SQL UPDATE [错误]：CS0103：当前上下文中不存在名称“bios”

> ID：14923949
> 
> 赞同：1
> 
> 时间：2013-02-17T17:36:37.703
> 
> 标签：c#, sql, razor, sql-update

我正在尝试使用新的用户定义输入来更新我的数据库。我已经在要更新的表中创建了一个列（bios）。将我的查询作为字符串，在尝试执行它时出现错误

> CS0103：当前上下文中不存在名称“bios”

相关代码和平贴如下：

```
 if(IsPost){
    userbio = @Request["Bio"];
    currentuser = @Request.Form["currentuser"];

    var db = Database.Open("ResearchA");
    var insertbio = "UPDATE usernameb SET bios = userbio WHERE username = currentuser";  //Update the table with 'userbio' when a username is selected.
    db.Execute(insertbio,bios);

    } 
```

有什么想法或建议吗？多谢 ：））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:43:39.773

您似乎正在使用一些`bios`未在任何地方定义的变量。

所以修复你的代码：

```
if(IsPost) {
    var userbio = Request["Bio"];
    var currentuser = Request.Form["currentuser"];
    var db = Database.Open("ResearchA");
    var insertbio = "UPDATE usernameb SET bios = @0 WHERE username = @1";
    db.Execute(insertbio, userbio, currentuser);
} 
```

同样将当前用户作为表单帖子的一部分传递看起来非常危险。

# android - Android SQLite 数据库列数据（字符串）借助列 ID 获取

> ID：14923950
> 
> 赞同：0
> 
> 时间：2013-02-17T17:36:47.993
> 
> 标签：android, android-sqlite

任何人都可以帮助我从 id(INTEGER PRIMARY KEY) 获取列数据。

我的代码如下：

```
String selectQUERY = " SELECT * FROM " + dbh.TABLE_CONTACTS.toString() +" WHERE "+ dbh.KEY_ID +"="+ "1";
Cursor cr = db.rawQuery(selectQUERY, null);
    if (cr.moveToFirst()) {
  do 
    {
    newArr.add(cr.getString(1));
    } while (cr.moveToNext());

}
for(int i=0;i<newArr.size();i++)
    {
        System.out.println("id pos :- "+newArr.get(i));
    } 
```

注意：- newArr 是一个字符串类型的 ArrayList。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:41:03.903

您没有提供太多细节，但看起来您可以使用：`cr.getLong(0)`

```
Cursor cr = db.rawQuery(selectQUERY, null);
while (cr.moveToNext()) {
    // Do something with cr.getLong(0) here
    newArr.add(cr.getString(1));
} 
```

# php - PHP PDO 不选择数据

> ID：14923952
> 
> 赞同：1
> 
> 时间：2013-02-17T17:37:08.977
> 
> 标签：php, pdo

当我在没有“准备”和“执行”的情况下获取数据时，代码工作正常。例子：

```
$this->db->query("select {$val} from {$table_name} where username={$username}")->fetch(); 
```

但是这段代码总是返回`False`：

```
$this->db->prepare("select :val from :table_name where username = :username")
->execute(array(':username'=>$username,':val'=>$val,':table_name'=>$this->table_name)); 
```

帮助！：（

谢谢您的回答。现在我的代码在这里：

```
$q=$this->db->prepare("select pass from nm_users where username = :username");
return $q->execute(array('username'=>$username)); 
```

返回值为`True`，但我无法从数据库中获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:44:27.353

不要尝试将 PDO 用作流畅的接口。你不能这样做：

```
$db->prepare()->execute(); 
```

原因是流式接口只有在*保证*函数返回一个在这种情况下具有执行方法的对象时才起作用。

但是 prepare() 返回`false`错误。该值`false`不是对象，也没有 execute() 方法。

您需要`false`在每次prepare() 和每次execute() 后检查：

```
$stmt = $this->db->prepare("select :val from :table_name where username = :username");
if ($stmt === false) {
  $err = $this->db->errorInfo();
  error_log($err[2]);
}
$result = $stmt->execute(array(':username'=>$username,':val'=>$val,':table_name'=>$this->table_name));
if ($result === false) {
  $err = $stmt->errorInfo();
  error_log($err[2]);
} 
```

如果你这样做，你会发现你的 prepare() 报告了一个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''user' where username = 'bill'' 附近使用正确的语法

原因是查询参数仅用于*常量值*。您不能将它们用于表名、列名、SQL 关键字、表达式、值列表等。

我推断这`:val`也意味着是一个动态列名，这也是不允许的。但在这种情况下，它不会导致错误，它只会用`$val`返回的每一行的值替换一个文字字符串。

换句话说，用参数替换表名是错误的，因为你不能像 `SELECT * FROM 'user'`（文字字符串，而不是表名）那样进行查询，这就是参数的作用。这只是无效的 SQL。

但是动态列名会进行类似的查询`SELECT 'val' FROM ...`，这是合法的，但不会从名为 val 的列中选择，它会选择文字字符串常量“val”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:52:41.480

不能为表名等设置参数，并且必须在**没有**冒号的数组中设置：

```
$dbSelect=$db->prepare("select aField from aTable where username = :username")
$dbSelect->execute(array('username' => $username)); 
```

用标准或类似的东西替换`aField`和。`aTable``str_replace`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T17:43:13.547

当您“准备”它时，表名必须包含在查询中，它不能作为其余参数动态添加。因此，您必须结合使用两种策略来完成查询：

```
$stmnt=sprintf('select %1$s from %2$s where username=:username',
               $val, $this->table_name);
if (FALSE===($query=$this->db->prepare($stmnt)))
    exit('Buggy statement: '.$stmnt);
$query->execute(array(':username'=>$username)); 
```

不幸的是，这也意味着您必须小心`$this->table_name`正确转义！

# python - Visual C++ 调试库命名约定

> ID：14923953
> 
> 赞同：2
> 
> 时间：2013-02-17T17:37:10.897
> 
> 标签：python, visual-c++, opencv

在 Visual C++ 8 中，我正在尝试构建最新的 OpenCV 版本。我正在使用 BUILD_ALL 目标，它尝试构建所有内容的调试和发布版本。我在尝试链接 opencv_python 应用程序时遇到链接错误。错误是链接器找不到 Python27_d.lib 库，这是预期的，因为我没有那个库，只有发布库。我不明白的是项目配置中需要的是发布库（没有_d），它是在生成的命令行上传递的内容。

如果正在构建调试版本，VS是否默认添加_d。有没有办法为给定的引用库选择性地关闭它？顺便说一句，该应用程序的发布版本构建良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T11:57:36.107

问题实际上出在 Python.h（尤其是 pyconfig.h）中，它指定了实际的 Python 库名称

[我相信]你不需要使用Python调试库，boost人已经处理过这个问题

请参阅 pyconfig.h 中的[Python 调试构建：](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/building.html#id19)

```
/* For an MSVC DLL, we can nominate the .lib files used by extensions */
#ifdef MS_COREDLL
#   ifndef Py_BUILD_CORE /* not building the core - must be an ext */
#       if defined(_MSC_VER)
            /* So MSVC users need not specify the .lib file in
            their Makefile (other compilers are generally
            taken care of by distutils.) */
#           ifdef _DEBUG
#               pragma comment(lib,"python27_d.lib")
#           else
#               pragma comment(lib,"python27.lib")
#           endif /* _DEBUG */
#       endif /* _MSC_VER */
#   endif /* Py_BUILD_CORE */
#endif /* MS_COREDLL */ 
```

在 boost 中，他们有一个用于 Python.h 的包装器 boost/python/detail/wrap_python.hpp，它处理所有 Windows 特定的东西（特别是允许您使用发布 Python 构建一个调试 dll ......也许你可以尝试使用而是（或通过代码；）

# ruby-on-rails - Rails: devise Tut

> ID：14923964
> 
> 赞同：1
> 
> 时间：2013-02-17T17:38:14.950
> 
> 标签：ruby-on-rails

I tried this: [http://blog.blazingcloud.net/2011/01/08/devise-authentication-in-rails-3/](http://blog.blazingcloud.net/2011/01/08/devise-authentication-in-rails-3/)

Where to add the dependencies as shown?

//sorry, I changed my question, after you answered! Sorry for this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:39:41.813

You don't need to set up any of them. That will happen automatically for you once you add devise.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:48:31.590

Bundler is mainly to manage your gem dependencies. so when you add devise to your Gemfile and run bundle install, it installs its run time dependencies as well. devise gem depends upon bcrypt-ruby,warden. [This](https://rubygems.org/gems/devise) link provides you details about the dependencies of devise gem.

# iphone - CKEditor 在文本区域点击时不关注 iOS

> ID：14923967
> 
> 赞同：6
> 
> 时间：2013-02-17T17:38:57.033
> 
> 标签：iphone, ipad, ios6, ckeditor, mobile-safari

在 iOS 6.1 Safari 上点击文本区域时，CKEditor 4.0.1 无法聚焦。这发生在 iphone 和 ipad（都运行 iOS 6.1）上。我最终可以通过点击它几次来让它集中。有时需要 5 次点击，有时需要 10 或 15 次。如果我单击粗体按钮，它会立即聚焦。有任何想法吗？有没有办法让我手动捕获点击事件，然后调用一些会聚焦编辑器的东西？我正在使用 jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:27:49.840

在 editor-test.css 中添加 和 元素将解决`height:100%;`此问题`HTML`。`BODY`最终代码将是这样的：

```
html {height:100%;}
body {
    font-family: "lucida grande",tahoma,verdana,arial,sans-serif;
    font-size: 12px; 
    line-height:1.4em;
    color: #333; 
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T19:45:33.337

我知道这是一个老问题，但我最近遇到了这个问题。

在`ckeditor`文件夹中我编辑了`contents.css`文件。（它为编辑器的内容设置样式）

在该`body`部分中，我添加了：

```
body 
{
    /* [other code is left as found] */

    /* Add the line below  */
    min-height: calc( 100% - 40px );
} 
```

这考虑了 config.js 中定义的不同自定义高度和`margin: 20px`声明（这似乎是默认值）。

# uiviewcontroller - 从 UITextField Xcode 调用的新视图控制器出现问题

> ID：14923975
> 
> 赞同：0
> 
> 时间：2013-02-17T17:39:32.527
> 
> 标签：uiviewcontroller, ios6, hyperlink

在我正在编写的当前应用程序中，我有一个 UITextField，其中包含一个链接。所以我想调用一个新的视图控制器而不是 Safari。我可以在 Safari 中打开它，但我不希望用户离开我的应用程序。我做了一些研究，正在做以下事情。

我创建了一个名为 MyApplication 的新文件，并将以下内容放在 .m 文件中以覆盖 openURL

```
#import "MyApplication.h"

@implementation MyApplication

- (BOOL)openURL:(NSURL *)url
{
if ([self handleOpenURL:url])
    return YES;
else
    return [super openURL:url];
}
- (BOOL)handleOpenURL:(NSURL *)url
{
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [mainStoryboard instantiateViewControllerWithIdentifier:@"71"];
[self presentViewController:vc animated:YES completion:nil];

return YES;
}

@end 
```

在 View Controller 下的属性检查器中，我将 Title 命名为 71。我还将情节提要 ID 和恢复 ID 命名为 71 以确保确定！如您所见，在 main.m 文件中，我已将第三个 nil 替换为 @"MyApplication"。

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, @"MyApplication", NSStringFromClass([AppDelegate class]));
}
} 
```

但是，应用程序无法构建，因为在方法 handleOpenURL 中我在线上遇到错误

```
 [self presentViewController:vc animated:YES completion:nil]; 
```

它说没有可见的@interface for 'MyApplication' 声明选择器'presentViewController:animated:completion:' 我看到的所有示例和问题都使用不推荐使用的方法presentModal，但Xcode 告诉我使用这个较新的方法presentViewController。那么有谁知道我做错了什么？我一定是错过了什么，但我终生无法找到。在此先感谢您对此事的任何见解！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:08:04.343

可能是你错过了：

```
#import <UIKit/UIKit.h> 
```

# php - 使用 PHP 和 MySQL 检查页面命中？

> ID：14923982
> 
> 赞同：0
> 
> 时间：2013-02-17T17:40:16.817
> 
> 标签：php, mysql, ip

说，我有一个包含新闻的文章页面（`example.com/article.php?id=1`），我想添加这个页面的数据（我在数据库中的数据名称是`pagehit`）。因此，对于访问此页面的每个唯一 IP 地址，`pagehit`数据库中的 都会加 1。

到目前为止，我已经知道使用K，我们可以得到客户端的IP地址。但是如何检查每个唯一的 ip，`pagehit`可以添加数据库中的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:44:47.837

为了检查一个唯一的 ip 是否访问过它，您还必须将每个唯一用户的 IP 地址存储在数据库中......或者，您可以为每个用户设置一个 cookie，然后增加计数器或不增加。

我建议使用现成的东西，比如谷歌分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:14:24.147

可能最容易解析已经具有类似信息的服务器日志，但我建议使用带有列的表访问

*   id - 自增
*   ip - 访问者的 IP 地址
*   id - 页面 id
*   添加您要收集的其他数据，例如时间等

每次访问时，插入一条带有类似于以下内容的 sql 语句的新记录：

```
INSERT INTO visits (ip, id) VALUES ($ip, $pageid); 
```

稍后，您可以查询统计信息

*   计算 ip 访问次数：SELECT count(ip);
*   统计每个页面的访问次数 select count(id);

您显然可以有更多花哨的查询，例如每个 ip 对每个页面的访问次数等，以及跟踪许多其他变量

# c - 我可以在我的 C 程序中将 OpenGL 用于图形吗？

> ID：14923986
> 
> 赞同：0
> 
> 时间：2013-02-17T17:40:28.327
> 
> 标签：c, opengl, header-files

我想使用一个库在我的 C 程序中制作一些形状。`gl.h`如果我安装它，我可以在我的 C 程序中使用它吗？它是兼容的还是为 C 以外的语言设计的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:57:00.743

您通常不*安装*gl.h。它只是图书馆的标题。库**-**实现应该已经由您的操作系统/驱动程序提供，例如在某些 .DLL 文件中。标**头**gl.h 可以只是#include'ed，以便您可以调用函数。

[您没有告诉我们您的操作系统，但每个都有教程，例如 Windows：查看http://nehe.gamedev.net/](http://nehe.gamedev.net/)右侧的教程

# c++ - C++ 重载输出运算符

> ID：14923987
> 
> 赞同：1
> 
> 时间：2013-02-17T17:40:34.417
> 
> 标签：c++, overloading, output

所以我正在编写我的 c++ 家庭作业，最后一部分是他希望我们用重载的输出/插入运算符替换格式化的输出方法（toString）。说实话，我不知道他的意思是什么。我搜索了一下，找到了使用重载插入运算符的示例代码，但似乎找不到如何将它合并到我的代码中。虽然我想我可能找错地方了。我的 toString 如下：

```
string Movie::toString() const {
    ostringstream oS;
    oS << "\n\n====================== Movie Information\n"
    << "\n             Movie Title:\t" << title << "  (" << releaseYear << ")"
    << "\n    US Rank & Box Office:\t" << usRank << "\t$" << usBoxOffice
    << "\nNon-US Rank & Box Office:\t" << nonUSRank << "\t$" << nonUSBoxOffice
    << "\n World Rank & Box Office:\t" << worldRank << "\t$" << worldBoxOffice
    << "\n";
    return oS.str();
} 
```

就像我提到的那样，我不确定“超载”是什么意思，所以如果由于某种原因这不足以让您直接帮助我解决问题，那么您能否通过替换给我简要说明他可能意味着什么具有重载输出运算符的当前输出。谢谢你

编辑：这是我的下一个问题。[https://stackoverflow.com/questions/14924621/c-overloaded-output-operator-cont](https://stackoverflow.com/questions/14924621/c-overloaded-output-operator-cont)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T17:48:15.333

重载一个函数意味着为其他函数提供同名但参数类型不同的函数。运算符也可以重载。许多运算符都有一个对应的可以重载的函数叫做`operator??`，`??`运算符本身在哪里。例如，如果您有两个对象`x`和`y`类类型`T`，则可以重载`operator+`。重载一个操作符可以让你为使用该类型的操作符赋予一些意义。所以现在你可以做`x + y`。

流插入运算符是`<<`. 这就是你在做的时候使用的东西`std::cin << "hello";`——它*插入*到流中。这个运算符也可以重载，就像`+`上面重载一样。调用需要重载的函数`operator<<`。

有两种方法可以重载二元运算符，例如`<<`（二元运算符，因为它需要两个操作数，一个在左侧，一个在右侧，`left << right`）。一种是使其成为 of 类型的成员，`left`并给它一个类型为 的参数`right`。另一种是使其成为具有两个参数的非成员函数，一个是 of 的类型，`left`另一个是 的类型`right`。由于您`left`will 的类型是`std::ostream`，因此您无法修改该类（因为它是由标准提供的），因此您必须使用选项二。

所以你的自由功能需要看起来像这样：

```
std::ostream& operator<<(std::ostream& os, const Movie& movie) {
  // Insert everything you want into `os`
  return os;
} 
```

现在，每当您在左侧使用 a 和在右侧`<<`使用a时，都会调用此函数。`std::ostream``Movie`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T17:44:48.037

我认为您的任务是编写一个重载的`operator <<`，它允许您将对象的字符串表示形式写入输出流：

```
std::ostream& operator <<(std::ostream& os, const Movie& movie) {
    os << "\n\n====================== Movie Information\n"
       << "\n             Movie Title:\t" << movie.title << "  (" << movie.releaseYear << ")"
       << "\n    US Rank & Box Office:\t" << movie.usRank << "\t$" << movie.usBoxOffice
       << "\nNon-US Rank & Box Office:\t" << movie.nonUSRank << "\t$" << movie.nonUSBoxOffice
       << "\n World Rank & Box Office:\t" << movie.worldRank << "\t$" << movie.worldBoxOffice
       << "\n";
    return os;
} 
```

您可以像使用内置类型一样使用此运算符：

```
Movie m;

// Do something with m

cout << m;      // Write m to the standard output 
```

# php - 如何通过 php 读取 JSON 响应

> ID：14923992
> 
> 赞同：1
> 
> 时间：2013-02-17T17:40:59.333
> 
> 标签：php

我收到了来自 Facebook 的 JSON 响应。如何检索`$id`&的值`$post_id`？

```
 $response = json_decode ( file_get_contents($graph_url) );
    $id = $response.id;
    $post_id = $response.post_id;    

        print_r( $response );   
        print_r( $id );
        print_r( $post_id ); 
```

输出：

```
stdClass Object ( [id] => 232160686920835 [post_id] => 231794566957447_232160693587501 ) 
```

没有输出`$id`& `$post_id` ... ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T17:42:10.833

您的对象语法错误。利用：

```
$id = $response->id;
$post_id = $response->post_id;    

print_r( $response );   
print_r( $id );
print_r( $post_id ); 
```

或者，如果您更喜欢使用数组，您可以将`true`其作为 json_decode 的第二个参数：

```
$response = json_decode ( file_get_contents($graph_url), true );
$id = $response['id'];
$post_id = $response['post_id'];    

print_r( $response );   
print_r( $id );
print_r( $post_id ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:45:10.020

在 PHP OOP 中

`->``.`在 Java 或其他语言中使用而不是like。

# iphone - UIImagePickerController 全屏

> ID：14923993
> 
> 赞同：1
> 
> 时间：2013-02-17T17:41:00.247
> 
> 标签：iphone, camera, picker

我正在使用 UIImagePickerController 在我的主视图中显示相机视图，并使用以下代码调用它：

```
self.picker = [[UIImagePickerController alloc] init];
self.picker.sourceType = UIImagePickerControllerSourceTypeCamera;
self.picker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
self.picker.showsCameraControls = NO; 
```

我的故事板中有一个自制的工具栏，用于管理一些相机的功能。发生的情况是，当应用程序加载时，相机似乎覆盖了我的工具栏，全屏显示并隐藏了我的按钮。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:40:32.330

[`UIImagePickerController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)全屏运行是正常的。您可以为该属性添加一个额外的覆盖视图以[`cameraOverlayView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/doc/uid/TP40007070-CH3-SW19)显示您自己的控件。

# iphone - 添加为子视图后，ScrollView 不会滚动

> ID：14923998
> 
> 赞同：0
> 
> 时间：2013-02-17T17:41:06.070
> 
> 标签：iphone, ios, objective-c, xcode

所以我通过按下段工具将 UIView 与 UIScrollView 添加到另一个视图中：

UIView.h

```
@interface gettingELORolesViewController : UIViewController{
    UIViewController *currentController;
    NSMutableArray *viewControllers;
}
- (IBAction)SegmentToggle:(UISegmentedControl *)sender;
@property (strong, nonatomic) IBOutlet UIView *containerView; 
```

UIView.m

```
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"Storyboard_iPhone"
                                                  bundle:nil];

 firstView *FirstView = [sb instantiateViewControllerWithIdentifier:@"firstOne"];
 secondView *SecondView = [sb instantiateViewControllerWithIdentifier:@"secondOne"];

 viewControllers = [NSMutableArray arrayWithObjects:FirstView,SecondView,nil];

 currentController = FirstView;

 [containerView addSubview:FirstView.view];//containerView = self.view 
```

然后取决于选择的段，它显示不同的视图：

```
- (IBAction)SegmentToggle:(UISegmentedControl *)sender {
    UIViewController *selectedView=nil;

    if (sender.selectedSegmentIndex==0) {
        selectedView= [viewControllers objectAtIndex:0]; // retrieve object at index 0 from viewControllers array

    }
    else if(sender.selectedSegmentIndex==1){    
        selectedView= [viewControllers objectAtIndex:1]; // retrieve object at index 1 from viewControllers array

    }

    [currentController.view removeFromSuperview]; // remove Current displaying view from superView
    currentController=selectedView; // make selected View to be the current View
    [containerView addSubview:selectedView.view]; // Add newly selected view on container View
} 
```

secondView 是 tableViewController，当我选择第二段时，一切都很好。当我选择第一个时，它会出现，但滚动不起作用，我不知道为什么。

firstView.m viewDidLoad 方法如下所示：

```
-(void)viewDidLoad{
    [super viewDidLoad];
    mainScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    [mainScrollView setContentSize:CGSizeMake(320, 600)];
    [mainScrollView setScrollEnabled:YES];
} 
```

在 storyBoard 中启用了分页。它与 firstView 的 .h 文件挂钩。请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:06:23.427

当你打电话时`-SegmentToggle:`，

*   您创建一个名为的局部变量`selectedView`
*   `selectedView`您根据选择的段分配视图控制器
*   方法结束，`selectedView`超出范围

简而言之，你什么也没做。您至少应该将当前视图层次结构中的视图替换为所选控制器的视图（并且可能将对所选控制器的引用存储在实例变量中以供以后查找？）

但是退后一步，看起来您正在尝试创建一个管理其他视图控制器的视图控制器。从 iOS 5 开始，现在有非常具体的规则。请观看[WWDC 2011 视频](https://developer.apple.com/videos/wwdc/2011/)，名为“[实现 UIViewController Containment](https://developer.apple.com/videos/wwdc/2011/includes/implementing-uiviewcontroller-containment.html) ”以获取更多信息和示例。