# StackOverflow 问答 13984000-13984999

# java - 访问 EntityManager 时出现 NullPointerException

> ID：13984000
> 
> 赞同：2
> 
> 时间：2012-12-21T03:48:14.223
> 
> 标签：java, spring, hibernate, nullpointerexception

我将 Hibernate4、Spring3 和 JSF2 用于小型应用程序，并将 Weblogic 10.3.6 用作应用程序服务器。

为了启用 JPA2，我在 commEnv.cmd 中添加了以下内容

```
@rem Enable JPA 2.0 functionality on WebLogic Server
set PRE_CLASSPATH=%BEA_HOME%\modules\javax.persistence_1.1.0.0_2-0.jar;
%BEA_HOME%\modules\com.oracle.jpa2support_1.0.0.0_2-1.jar 
```

当我运行我的应用程序时，我在下一行收到空指针异常。我该如何解决这个问题？

```
CriteriaBuilder cb = entityManager.getCriteriaBuilder(); 
```

我的 DAO

```
@Named
public class RequestDAOImpl implements RequestDAO {

protected EntityManager entityManager;

public void getRequest(RequestQueryData data){
        Map<String, String> filters = data.getFilters();
        int start = data.getStart();
        int end = data.getEnd();
        String sortField = data.getSortField();
        QuerySortOrder order = data.getOrder();

        CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery<Request> c = cb.createQuery(Request.class);
        Root<Request> emp = c.from(Request.class);
        c.select(emp);
                ...... other code 
```

应用程序上下文.xml

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
        <property name="scopes">
            <map>
                <entry key="view">
                    <bean class="org.primefaces.spring.scope.ViewScope" />
                </entry>
            </map>
        </property>
    </bean>
    <context:component-scan base-package="net.test" />
    <!-- Data Source Declaration -->
    <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass" value="oracle.jdbc" />
        <property name="jdbcUrl"
            value="jdbc:oracle:thin:@server:1521:ORCL" />
        <property name="user" value="scott" />
        <property name="password" value="tiger" />
        <property name="maxPoolSize" value="10" />
        <property name="maxStatements" value="0" />
        <property name="minPoolSize" value="5" />
    </bean>     
    <!-- Session Factory Declaration -->
    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.test.model.Request</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.query.factory_class">org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory
                </prop>
            </props>
        </property>
    </bean>
    <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager" />
    <!-- Transaction Manager is defined -->
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean> 
```

更新 1

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <!-- Spring view scope customized -->

    <bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
        <property name="scopes">
            <map>
                <entry key="view">
                    <bean class="org.primefaces.spring.scope.ViewScope" />
                </entry>
            </map>
        </property>
    </bean>
    <context:component-scan base-package="net.test" />
    <!-- Data Source Declaration -->
    <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass" value="oracle.jdbc" />
        <property name="jdbcUrl"
            value="jdbc:oracle:thin:@server:1521:ORCL" />
        <property name="user" value="scott" />
        <property name="password" value="tiger" />
        <property name="maxPoolSize" value="10" />
        <property name="maxStatements" value="0" />
        <property name="minPoolSize" value="5" />
    </bean>
      <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>
    <!-- JPA Entity Manager Factory -->
    <bean id="entityManagerFactory" 
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"> 
         <property name="dataSource" ref="DataSource" />
         <property name="packagesToScan" value="net.test.model" />
         <property name="jpaVendorAdapter">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">  
       </bean>
   </property>         
      </bean> 
      <bean id="defaultLobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler" />        
    <!-- Session Factory Declaration -->
    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.test.model.Request</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.query.factory_class">org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory
                </prop>
            </props>
        </property>
    </bean>
    <!-- Enable the configuration of transactional behavior based on annotations 
    <tx:annotation-driven transaction-manager="txManager" />-->
    <!-- Transaction Manager is defined 
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>-->

     <!-- Transaction Config -->
    <bean id="transactionManager"
          class="org.springframework.orm.jpa.JpaTransactionManager">
          <property name="entityManagerFactory" ref="entityManagerFactory" />
          </bean>   

          <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>         

    <tx:annotation-driven transaction-manager="transactionManager"/>  
    <tx:annotation-driven transaction-manager="txManager"/>             

     <context:annotation-config/>

    <bean id="hibernateStatisticsMBean" class="org.hibernate.jmx.StatisticsService">
        <property name="statisticsEnabled" value="true" />
        <property name="sessionFactory" value="#{entityManagerFactory.sessionFactory}" />
    </bean>
    <bean name="ehCacheManagerMBean"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" />

    <bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true" />
    </bean>

    <bean id="jmxExporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="server" ref="mbeanServer" />
        <property name="registrationBehaviorName" value="REGISTRATION_REPLACE_EXISTING"/>
        <property name="beans">
            <map>               
                <entry key="SpringBeans:name=hibernateStatisticsMBean" value-ref="hibernateStatisticsMBean" />
                <entry key="SpringBeans:name=ehCacheManagerMBean" value-ref="ehCacheManagerMBean" />
            </map>
        </property>
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T03:51:25.957

您的 EntityManager 似乎没有连接到您的 DAO。在您的 XML 中添加 或`@Autowired`ref 。`@PersistenceContext`请注意，要仅使用`@Autowired`，您必须将 EntityManager 指定为 bean。

另一种可能性：如果您的 DAO 也未指定为 bean（在 XML 中或使用各种`@Component`注释中的一个（可能`@Repository`），那么 Spring 也不知道将其连接起来。

更新：这里有几个不同的解决方案。不过，在这些之前，请确保您有

```
 <mvc:annotation-driven /> 
```

在您的一个 XML 中。这将启用 spring 注释，并为您节省很多编辑 XML 的麻烦。请注意，您还需要更新`<beans>`标记中的 xmlns 和 schemaLocation。

```
xmlns:mvc="http://www.springframework.org/schema/mvc" 
```

和

```
 http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd 
```

在架构位置。

看起来您现在正在指定一个`EntityManagerFactory`. 这是一个好的开始。您现在也可以指定一个`EntityManager`。

```
<bean id="entityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean> 
```

不过，我不能保证您的 XML 和`EntityManagerFactory`设置。你似乎有一个`</property>`漂浮在不知名的地方。

我不确定您如何访问您的 DAO。如果它已经是一个 bean 并且在组件扫描中，那么你很好。如果没有，请确保使用注释您的 DAO 类`@Repository`并确保其包在组件扫描中。当然，如果您还没有将它指定为 bean，这意味着您可能正在其他地方实例化它——这绝对不是您想要使用 DAO 的方式。如果是这种情况，我强烈建议阅读 Spring 的依赖注入。

现在你需要在你的`EntityManager`. 这可以通过两种方式完成。

第一种方法要求您在 XML 中将其指定为 bean。如果你已经这样做了，只需注释你的`EntityManager`字段。

```
@Autowired
protected EntityManager entityManager; 
```

或者，由于您在 XML 中指定了一个 DataSource，您应该能够通过使用`@PersistenceContext`并向其传递一个 ID 值来引用它。

```
@PersistenceContext(name="DataSource")
protected EntityManager entityManager; 
```

我从来没有真正使用过后一种方法，但我已经看到它这样做了。我通常`EntityManager`在 XML 中指定一个 bean 并使用`@Autowired`，如前一种方法中所述。

# android - 如何捕获或重新路由导航语音流

> ID：13984015
> 
> 赞同：1
> 
> 时间：2012-12-21T03:51:26.860
> 
> 标签：android, stream, bluetooth

使用蓝牙设备在 Android 上使用 Google Navigation 时出现问题。导航通过 A2DP 流发送转弯指示的音频。我有一个摩托罗拉 T605 蓝牙车载套件，它支持 HFP 和 A2DP。不过，我经常只听老式汽车收音机。在这种情况下，我从来没有听到转弯指示，因为我的实时 A2DP 流被发送到收音机 AUX 输入，但我正在收听收音机。我的应用程序具有向我读出 SMS 消息的功能。我已经设置好了，因此您可以选择要用于此的流。我更喜欢使用 AudioManager.STREAM_VOICE_CALL，因为它在 T605 上使用了一个专用的独立扬声器。

我研究了几种方法来处理这个问题：

1) 将通知重新路由到蓝牙 SCO 而不是 A2DP。我还没有资助一种方法来做到这一点。我可以通过这条路径发送我创建的 TTS 消息，并且效果很好（我的应用程序中内置了一个 SMS 阅读器）。我尝试激活 SCO，但转向指令流移动到手机内部扬声器，而不是我喜欢的语音呼叫流。

2) 捕获导航消息并将它们回显到 SCO 路径上。我找不到拦截或捕获导航流的方法。Google Navigation 是否使用 TTS 引擎或其自己的方法来创建语音输出？仅在文本字符串中获取方向会很棒，因为我可以轻松地将其发送到 TTS 引擎并将其路由到我想要的位置，就像使用 SMS 字符串一样。

您可以在此处查看我的应用源：[http ://code.google.com/p/a2dpvolume/](http://code.google.com/p/a2dpvolume/)

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:29:21.717

不幸的是，在将导航消息重新路由到 BT SCO 时，我认为您是 SOOL。我希望导航应用程序使用 TTS 或 NOTIFICATION 流类型来播放消息，并且这两种流类型都遵循 MEDIA 路由策略（对于 NOTIFICATION，在没有活动语音呼叫时至少通常是正确的）。

尽管行为由每个供应商决定，但我猜你会发现在大多数实现中遵循 MEDIA 路由策略的流永远不会路由到 BT SCO，除非在路由到的正在进行的语音呼叫期间英国电信SCO。

就路由而言，您可以做的最好的事情是强制路由到扬声器，或“除 A2DP 之外的任何东西”（如果连接了有线耳机，则表示有线耳机，否则表示扬声器）。

这是你可以做到的（我还没有验证这适用于那里的每部手机）：

```
Class audioSystemClass = Class.forName("android.media.AudioSystem");
Method setForceUse = audioSystemClass.getMethod("setForceUse",
    int.class,
    int.class);
// 1 == FOR_MEDIA, 10 == FORCE_NO_BT_A2DP (FORCE_SPEAKER would be 1).
setForceUse.invoke(null, 1, 10); 
```

# android - 如何通过adb尽可能快的抓屏？

> ID：13984017
> 
> 赞同：28
> 
> 时间：2012-12-21T03:51:55.113
> 
> 标签：android, adb

**最近，我写了一个PC客户端，可以使用adb**实时显示和控制我的android手机屏幕。我用猴子来控制设备，它工作正常。问题是如何抓取手机屏幕并流畅显示。

我想出的第一个解决方案是不断地抓取`framebuffer`通过`adb`（如 DDMS 的屏幕捕获功能）。现在当我这样做时，性能是相当不可接受的。从中捕获的帧速率低至`framebuffer`每秒 5 帧（帧大小为 800 * 480）。当我在手机上滑动时，我的程序看起来像是在打嗝。

我的程序是用 java 编写的，使用`ddmslib`to grab `framebuffer`。

补充：我发现将原始数据
编码为格式很慢，否则这将是传输压缩原始图像的快速方法。`framebuffer``.png`

如何将截屏速度提高到流畅的水平？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-08-29T18:54:40.500

```
adb shell screencap -p | perl -pe 's/\x0D\x0A/\x0A/g' > screen.png 
```

资源：

[http://blog.shvetsov.com/2013/02/grab-android-screenshot-to-computer-via.html](http://blog.shvetsov.com/2013/02/grab-android-screenshot-to-computer-via.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-21T05:43:19.283

你可以使用：

```
$ adb exec-out screencap -p > test.png 
```

### 更新

Android 11 引入了通过 wifi 进行调试并加快了速度

```
$ time adb exec-out screencap -p > test.png

real    0m0.661s
user    0m0.050s
sys 0m0.066s 
```

### 2021 年 9 月更新

使用[CulebraTester2](https://github.com/dtmilano/CulebraTester2-public)[的屏幕截图](https://github.com/dtmilano/CulebraTester2-public/blob/master/take-screenshot)，您可以获得更高的帧速率

```
./take-screenshot 

 Image in file:///tmp/culebra.zSSYZ6VG.png 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-24T06:06:44.607

如果缓慢的部分是原始到 png 的转换（`time adb shell screencap -p /sdcard/x.png`比`time adb shell screencap /sdcard/nonpng.raw`我在游戏中使用的速度要慢得多）并且 png 不是必需的，那么你可以像这里一样[https://github.com/sowcow/shot](https://github.com/sowcow/shot)。它将原始数据转换为简单的 ppm 格式，并在获取原始数据后使用 imagemagick 将 ppm 转换为 bmp，几乎没有开销

## 更新：

max_plenert 的这个 shell 脚本是一个更好的例子：

```
adb shell screencap /sdcard/mytmp/rock.raw
adb pull /sdcard/mytmp/rock.raw
adb shell rm /sdcard/mytmp/rock.raw

// remove the header
tail -c +13 rock.raw > rock.rgba

// extract width height and pixelformat:
hexdump -e '/4 "%d"' -s 0 -n 4 rock.raw
hexdump -e '/4 "%d"' -s 4 -n 4 rock.raw
hexdump -e '/4 "%d"' -s 8 -n 4 rock.raw

convert -size 480x800 -depth 8 rock.rgba rock.png 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-16T00:47:08.177

使用这种方法，我的应用程序继续以全帧率运行

```
adb pull /dev/graphics/fb0 
```

这将从帧缓冲区中提取原始数据。它似乎与屏幕的宽度相同，但高度被填充了。我设备上的帧缓冲区似乎是 RGBA8888 格式。要准确获得屏幕上显示的内容，您应该忽略 Alpha 通道。

请注意，这对我来说确实需要大约 0.8 秒的时间来下载（分辨率：480x854），但如果我在连续循环中下载它，它不会影响设备的帧速率。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-08-28T02:30:28.370

在我的 Mac 上的 .bash_profile 中：

```
function droidShot() {
  /full_path_to_droid_sdk/platform-tools/adb shell screencap -p | perl -pe 's/\x0D\x0A/\x0A/g' > $1.png
} 
```

用法：

```
droidshot whatever 
```

并且文件显示在whatever.png中

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-07T01:15:32.207

这是一个缓慢的解决方案，我相信这是您在基于 adb 的解决方案中可能找到的更快的方法，

```
# this line require a superuser privilege:
adb shell "su -c 'cat /dev/graphics/fb0 > /sdcard/capture.raw'"

adb pull /sdcard/capture.raw

ffmpeg -loglevel panic -f rawvideo -pix_fmt bgr32 -s 320x480 -i \ 
    capture.raw -vcodec png -vframes 1 capture.png; 
```

[![这是我的网络应用程序中的相同代码](../Images/eedb01eaca81154946d29a12fdd53951.png)](https://i.stack.imgur.com/Dtkai.jpg)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-24T18:41:38.727

来自[文档](https://developer.android.com/intl/es/tools/help/shell.html)：

## 截取设备屏幕截图

screencap 命令是一个 shell 实用程序，用于截取设备显示的屏幕截图。在 shell 中，语法是：

```
screencap <filename> 
```

要从命令行使用屏幕截图，请键入以下内容：

```
$ adb shell screencap /sdcard/screen.png 
```

这是一个示例屏幕截图会话，使用 adb shell 捕获屏幕截图并使用 pull 命令从设备下载文件：

```
$ adb shell
shell@ $ screencap /sdcard/screen.png
shell@ $ exit
$ adb pull /sdcard/screen.png 
```

# 录制设备屏幕

screenrecord 命令是一个 shell 实用程序，用于记录运行 Android 4.4（API 级别 19）及更高版本的设备的显示。该实用程序将屏幕活动记录到 MPEG-4 文件中。

```
Note: Audio is not recorded with the video file. 
```

开发人员可以使用此文件创建宣传或培训视频。在 shell 中，语法是：

```
screenrecord [options] <filename> 
```

要从命令行使用 screenrecord，请键入以下内容：

```
$ adb shell screenrecord /sdcard/demo.mp4 
```

按 Ctrl-C 停止屏幕录制，否则录制会在三分钟或**--time-limit**设置的时间限制时自动停止。

要开始录制您的设备屏幕，请运行 screenrecord 命令来录制视频。然后，运行 pull 命令将视频从设备下载到主机。这是一个示例录制会话：

```
$ adb shell
shell@ $ screenrecord --verbose /sdcard/demo.mp4
(press Ctrl-C to stop)
shell@ $ exit
$ adb pull /sdcard/demo.mp4 
```

screenrecord 实用程序可以以您请求的任何支持的分辨率和比特率进行录制，同时保留设备显示的纵横比。该实用程序默认以原始显示分辨率和方向记录，最长为三分钟。

使用 screenrecord 实用程序时应注意一些已知限制：

某些设备可能无法以其原始显示分辨率进行录制。如果遇到屏幕录制问题，请尝试使用较低的屏幕分辨率。不支持在录制过程中旋转屏幕。如果在录制过程中屏幕确实旋转，则部分屏幕会在录制过程中被截断。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-24T01:31:21.640

好吧，有些人说在 Perl 中有很多方法可以做一件事。:-) 无论如何，这个可能会表现得更好（因为没有正则表达式），并且可以解决 MS Windows 中 Cygwin 中的问题（其 Perl 定义`\n`为 CRLF）：

```
adb shell screencap -p | perl -pe 'BEGIN { $/="\cM\cJ"; $\="\cJ"; } chomp;' > screen-$(date +%Y%m%d_%H%M%S).png 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-11T13:33:42.960

我改进了@steveha 的解决方案：

创建一个 shell 脚本，说：' **android-screenshot** '，内容如下：

```
adb shell screencap -p | perl -pe 's/\x0D\x0A/\x0A/g' > screen-`date +%Y-%m-%d_%X`.png 
```

将此文件放在本地 bin 目录或您喜欢的任何其他*$PATH中。*

这将允许您在当前目录中保存带有时间戳的文件。

请记住使用以下命令使 shell 脚本可执行

```
chmod +x android-screenshot 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-02T16:58:45.090

Android 4.4有一个`screenrecord`程序

```
adb shell screenrecord /data/local/tmp/test-video.m4v
adb pull /data/local/tmp/test-video.m4v ~/test-video.m4v 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-04-14T12:47:42.357

adb shell screenrecord --bit-rate 8000000 --time-limit 30 /sdcard/example.mp4

您还可以更改比特率并更改视频持续时间。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-01-30T20:14:15.817

```
adb shell screencap /sdcard/screen.png && adb pull /sdcard/screen.png my_screen01.png 
```

# ruby - 如何单击以在 ruby 中使用 Selenium-webdriver 在新窗口中打开链接？

> ID：13984019
> 
> 赞同：1
> 
> 时间：2012-12-21T03:52:12.180
> 
> 标签：ruby, selenium-webdriver

所以我有一个在 Ruby 中使用 selenium-webdriver 的可点击链接列表：

```
users = driver.find_elements(:class, "username") 
```

当然，我可以点击它们。

```
users.first.click 
```

但这会在同一个窗口中打开它。我想在新窗口中打开它，加载窗口，然后关闭该窗口，这样我就不会丢失页面上其他链接的跟踪/上下文。我找不到如何做到这一点。我最接近的是

```
driver.execute_script("window.open('#{users.first}')") 
```

但这并没有从中提取链接，因为它只是要点击的目标，而不是 URL。所以我需要从元素中提取 URL，或者有其他方法来打开一个新窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:23:42.890

尝试添加一个选项，例如：`:target => "_blank"`

# objective-c - UITableView 设置选中行刷新控件

> ID：13984022
> 
> 赞同：4
> 
> 时间：2012-12-21T03:52:38.433
> 
> 标签：objective-c, ios, xcode

我想将`selected row`a设置`UITableView`为`refresh control`. 我这样做是因为我的顶部有一个[刷新控件](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIRefreshControl_class/Reference/Reference.html)`UITableView`，并且当我加载数据时（实际上它们并没有通过将其拉下而导致它），我希望它`activity indicator view`是可见的（这是`refresh control`）。

现在，我所做的就是将其设置`refresh control`为“刷新状态”（具有旋转活动指示器）。

```
[self.refreshControl beginRefreshing]; 
```

这很好用，但唯一的问题是，除非上拉，否则他们看不到它，因为它是第 1 行（索引 0）的默认值，所以它是隐藏的。

**注意：**在发生这种情况时，有 0 个项目（并且永远都是）`UITableView`。

例如，如果我去：

```
[self.tableView selectRowAtIndexPath:0 animated:YES scrollPosition:UITableViewScrollPositionTop]; 
```

它将所选项目的位置设置为第一行，但我想让它显示刷新控件，所以我想可能会这样做：

```
[self.tableView selectRowAtIndexPath:-1 animated:YES scrollPosition:UITableViewScrollPositionTop]; 
```

会工作（因为它是第一项下方的 1 个索引），但当然不会编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:05:15.757

因为 UITableView 是 UIScrollView 的子类，所以可以通过设置 tableView 的 contentOffset 来在第一行上方显示刷新控制器。例如，如果您的刷新控件的高度为 100，您可以将刷新控件动画化到视图中。

```
[self.tableView setContentOffset:CGPointMake(0, -100) animated:YES]; 
```

或者只是在没有任何动画的情况下显示它或实现您自己的动画：

```
self.tableView.contentOffest = CGPointMake(0, -100); 
```

刷新完成后，您可以将其设置回 0，并且您想要隐藏控件。

[文档链接在这里](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922-CH3-SW6)

# c# - 无法在 WCF 中发送更大的字节数组

> ID：13984027
> 
> 赞同：2
> 
> 时间：2012-12-21T03:52:47.207
> 
> 标签：c#, .net, wcf, bytearray

我有 WCF 服务，我正在发送以下数据合同

```
[DataContract]
public class Sample
{
    [DataMember]
    public int Type { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public string Value { get; set; }

    [DataMember]
    public byte[] ByteList { get; set; }
} 
```

但是随着字节数组大小的增加，客户端不接受数据。他们成功接收到其他消息。我尝试增加.config 中的大小。我还尝试在使用 DataContractSerializer 序列化后发送对象，但对我没有任何作用。我知道这是我这边的一些错误，但我无法弄清楚。请让我知道你的意见

```
<netTcpBinding>
    <binding name="tcpbinding" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
        transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
        hostNameComparisonMode="StrongWildcard" listenBacklog="10"
        maxBufferPoolSize="524288" maxBufferSize="2147483646" maxConnections="10"
        maxReceivedMessageSize="2147483646">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
          enabled="true" />
      <security mode="None">
        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign"/>
        <message clientCredentialType="Windows"/>
      </security>
    </binding>
  </netTcpBinding> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:31:06.610

Welcome to the wonderful world of WCF settings...

How large can the array be before you start losing messages (i.e. what is the largest array you can transfer successfully)?

From my experience, the setting relating to arrays is **maxArrayLength** (not maxItemsInObjectGraph, which deals with hierarchical data). Make sure this setting (and also **maxReceivedMessageSize**) is larger than any ByteList length in both server **and** client configurations.

WCF hides its error messages well, but you can set up tracing to find them. On the *server*, add this under the **configuration** node in the web.config file:

```
<system.diagnostics>
  <trace autoflush="true" />
  <sources>
    <source name="System.ServiceModel.MessageLogging">
      <listeners>
        <add name="messages"
            type="System.Diagnostics.XmlWriterTraceListener"
            initializeData="c:\logs\messages.svclog" />
      </listeners>
    </source>
    <source name="System.ServiceModel"
            switchValue="Warning, Critical, Error, Verbose"
            propagateActivity="true">
      <listeners>
        <add name="sdt"
            type="System.Diagnostics.XmlWriterTraceListener"
            initializeData= "c:\logs\service.svclog" />
      </listeners>
    </source>
  </sources>
</system.diagnostics>

<system.serviceModel>
  <diagnostics>
    <messageLogging
         logEntireMessage="true"
         logMalformedMessages="true"
         logMessagesAtServiceLevel="true"
         logMessagesAtTransportLevel="true"
         maxMessagesToLog="3000000"
         maxSizeOfMessageToLog="2000000"/>
  </diagnostics>
</system.serviceModel> 
```

**Note**

*   You must manually create the log files folder (here: c:\logs) on the server first.
*   With these settings, the log files (service.svclog in particular) grow huge very fast. Only turn on this kind of logging when you really need it.

**References**

*   [http://msdn.microsoft.com/en-us/library/ms730064.aspx](http://msdn.microsoft.com/en-us/library/ms730064.aspx)
*   [http://msdn.microsoft.com/en-us/library/ms732023.aspx](http://msdn.microsoft.com/en-us/library/ms732023.aspx)

*The latter also shows you how to open and read the log files. You should see at least one error message in service.svclog after you make a service call that doesn't return a message.*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:47:16.423

只需添加

```
<httpRuntime maxRequestLength="2048000" executionTimeout="3600" /> 
```

到你的配置。

如果那不能解决问题，请添加

```
<dataContractSerializer maxItemsInObjectGraph="2147483647"/> 
```

也像下面

```
<behaviors>
      <serviceBehaviors>        
        <behavior name="myNetTcpBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="myNetTcpEndPointBehaviour">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors> 
```

# .net - 将 CSS 类添加到 Html.BeginForm()

> ID：13984029
> 
> 赞同：87
> 
> 时间：2012-12-21T03:52:50.687
> 
> 标签：.net, css, forms, asp.net-mvc-4, html-helper

如何为以下情况添加类属性（仅使用 ReturnUrl）：

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl }))
{
} 
```

我想要这样的东西：

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl }, new { @class = "login-form" })) 
{
} 
```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-12-21T03:59:22.370

如果您提供控制器操作、名称和表单方法，则会出现重载。

```
@using (Html.BeginForm("ActionName", "ControllerName", 
            new { ReturnUrl = ViewBag.ReturnUrl }, 
            FormMethod.Post, new { @class="login-form" }))
{
  etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-02T09:08:31.507

```
Html.BeginForm("Index", "EIApplication", FormMethod.Post, new { enctype = "multipart/form-data", **@class = "nea-forms"** }) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-05-04T13:49:08.853

或者简单地使用 html ：

```
<form action="/ActionName/ControllerName" method="post" class="login-form">

</form> 
```

# filter - Mozilla Thunderbird 可以区分新消息和回复消息吗？

> ID：13984030
> 
> 赞同：-1
> 
> 时间：2012-12-21T03:52:51.687
> 
> 标签：filter, tags, thunderbird

Thunderbird 中是否有区分新消息和作为对先前消息的回复而发送给我的消息？这个问题可能相当于 Thunderbird 是否可以将主题行中包含 Re: 的消息发送到特定文件夹，因为对我而言，此类消息具有更高的回复优先级。

谢谢，香农

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:09:05.377

实际上，我找到了答案，而且非常简单。只需从菜单中选择工具|消息过滤器，然后创建一个过滤器，将主题行以 Re: 开头的任何消息显示到您可能想要的任何文件夹。

# python - Autodesk CSV 中的 csv.writer

> ID：13984033
> 
> 赞同：1
> 
> 时间：2012-12-21T03:53:25.337
> 
> 标签：python, csv, writer, autodesk

```
29 csvfile=desfile+"\spv1.csv" 
30 csv_writer = csv.writer(csvfile) 
```

我在 Python 中使用 AutodDesk CFD，这是我尝试将结果写入 csv 文件的部分。变量 desfile 是路径，我不断收到错误消息

文件“C:/Users/Carlos/Documents/Inventor/Prototype Velocity Profile/Extracting Summary Stats for Expanding Models.py”，第 30 行，在

```
csv_writer = csv.writer('csvfile') 
```

TypeError：参数 1 必须有一个“写”方法

我已经尝试使用编写器插入分隔符选项，但仍然无法正常工作。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T03:58:10.580

`csv.writer`需要一个类似文件的对象，而不是一个字符串......

尝试：

```
csv_writer = csv.writer(open(csvfile, 'wb')) 
```

# iphone - IOS 6 中的 UISrcollView

> ID：13984038
> 
> 赞同：1
> 
> 时间：2012-12-21T03:54:16.217
> 
> 标签：iphone, objective-c, ios6

`UIScrollView`我用一些图像创建了一个。然后我进行了触摸拖动`UIImageView`- 当我们触摸它时拖动到下一页。我曾经`viewDidAppear`滚动到结尾`UIScrollView`：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.scroll.contentSize = CGSizeMake(320, 1400);
} 
```

但是当我过去`Swipe Gesture Recognizer`拖回`UIScrollView`时，我无法像开始运行应用程序时那样滚动到底部。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T03:59:31.467

您必须明确告诉手势不要取消其内容视图的触摸。尝试这个：

```
[swipe setCancelsTouchesInView:NO]; 
```

如果这样做不行，请尝试使用 UIGestureRecognizerDelegate 方法`shouldRecognizeSimultaneouslyWithGestureRecognizer`：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

# java - 在 JFugue 中暂停音乐

> ID：13984039
> 
> 赞同：0
> 
> 时间：2012-12-21T03:54:40.827
> 
> 标签：java, multithreading, pausing-execution, jfugue

我正在开发一个通过多线程在后台播放音乐的程序，因为 GUI 否则会冻结。我对多线程（易失性、同步等）有基本的了解，但我想知道如何立即停止/暂停线程（即使进程正在处理）。我有音乐在后台循环播放，但是如果我将停止变量连接到循环中，则歌曲必须停止播放才能使音乐停止。所以我的问题仍然存在，从父线程有没有办法在歌曲中间立即暂停或终止音乐，因为我有音频要播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:20:14.170

首先，线程中的大多数循环应该类似于：

```
while(!isInterrupted()) {
    try {
       // do something (like play song)
    } catch (InterruptedException e) {
        interrupt();
    }
} 
```

如果循环内有阻塞调用（听起来像您的描述），它们可能允许中断（）。从线程外部调用 interrupt() 将中断阻塞调用并将您转储到 catch 块中。这最终会清除“中断”标志，因此您需要再次调用中断以退出循环。

根据您播放音乐的方式：

*   如果您使用具有“暂停”或“停止”方法来播放音乐的库，则可以使用它。看起来你正在使用 jFugue - 它的播放器有一个 pause() 方法 - 你试过调用它吗？
*   如果您正在做其他事情，则需要跟踪歌曲的位置并在线程上调用 interrupt()。如果要重新启动，则需要返回到跟踪的位置

请注意，如果要使用上述循环重新启动，则需要一个嵌套循环，例如：

```
while(true) {
    while(!isInterrupted()) {
        ...
    }
} 
```

如果您只有 !isInterrupted() 循环，则线程将完成，并且无法重新启动。

希望这可以帮助！

# masstransit - 大众运输消费者死亡 - Peek()

> ID：13984042
> 
> 赞同：5
> 
> 时间：2012-12-21T03:55:12.400
> 
> 标签：masstransit

我很好奇 MassTransit 消费者是否可以在实际检索 msg 之前 Peek() 一个 MSMQ 队列。

步骤/过程是什么：

1) 消息发送到队列

2) 消费者得到它并且必须进行数据库更新——大约需要 5 秒

3) 如果第一轮成功，消费者必须进行第二轮更新。

我的问题是，如果第一次数据库更新失败，消息留在队列中（即网络问题，无法到达数据库），我该如何处理。

目前，一旦它从队列中读取消息，它就会将其删除，然后如果数据库更新失败，它就会消失..

此外，我该如何处理电源故障——我的意思是，如果消费者的“工作”进行到一半，无论是什么（数据库更新或其他）并且电源消失等，我该如何重新运行该过程队列中的味精？可以说这项工作（无论如何在我目前的情况下）正在将新行推送到表中。我的意思是我可以编写代码来首先检查该行是否存在，如果它存在则删除消息，如果不存在则运行任务，但我怎样才能让它首先重新运行整个过程？

我已经读到我可以`Peek()`排队，然后运行任务，然后真正阅读队列味精并将其删除，但我一生无法弄清楚这是否适用于公共交通......有点迷失......

此外，我知道 Masstransit 有，`.RetryLater`但我是否在此过程中使用它？是 `Initially`--> `When`--> `Then` -->`.RetryLater`在传奇中吗？

任何指针都会被接受

最诚挚的问候罗宾

编辑

PS：我用的是saga....

```
Define(() =>
            {
                RemoveWhen(saga => saga.CurrentState == Completed);

                Initially(
                    When(NewAC)
                        .Then((saga, message) => saga.ProcessPSM(message),
                            InCaseOf<Exception>()
                               .TransitionTo(Problem)                                  
                                )
                        .Then((saga, message) => saga.PostProcessPSM())
                        .Complete()
                    );
                During(Problem,
                    When(Waiting)
                               // NOTE: THIS DOES NOT WORK!!!!
                        .RetryLater()
                    );
                }); 
```

RetryLater 抛出错误：“现有 saga 无法接受该消息”

我不确定我还能如何访问“RetryLater”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:21:52.380

MassTransit 抽象了底层队列的概念。所以 Peek 不是解决方案，但它确实有其他重试消息的方法。如果您只对处理错误和故障情况感兴趣，那么以下机制就足够了。

默认情况下，如果消费者抛出异常，消息将被重试 N 次：

*   其中 N 在总线上配置，默认为 5。它可以在总线初始化中使用 ServiceBusConfigurator 上的 SetDefaultRetryLimit 进行更改
*   其中重试意味着消息将被添加到队列的末尾

如果您想要更细粒度的错误处理方法，您可以实现 Context Consumer，捕获可恢复或瞬态异常并手动调用 RetryLater。据我了解，这可以做多少次没有限制。

```
public class RetryConsumer : Consumes<AwesomeMessage>.Context
{

    public void Consume(IConsumeContext<AwesomeMessage> message)
    {
        try
        {
            Console.WriteLine("This is Attempt " + message.RetryCount);
            // Do Something
        }
        catch (SomeTransientException e)
        {
            message.RetryLater();
        }
    }
} 
```

# playframework - 试图在 Play 中包含 GSON！2.0项目

> ID：13984046
> 
> 赞同：1
> 
> 时间：2012-12-21T03:55:44.997
> 
> 标签：playframework, playframework-2.0, gson, sbt

我已经添加`"com.google.gson" % "gson" % "2.2"`到我的 AppDependencies 但是当我运行播放更新时，我得到：

> [信息] 更新 {file:/Users/levinotik/Dev/scala/throw-away/myFirstApp/}myFirstApp... [警告] 未找到模块：com.google.gson#gson;2.1.0
> [警告] == ==本地：尝试[警告]
> /Users/levinotik/dev/scala/play-2.0.4/framework/../repository/local/com.google.gson/gson/2.1.0/ivys/ivy.xml [ warn] ==== Typesafe Releases Repository: 试过 [warn]
> [http://repo.typesafe.com/typesafe/releases/com/google/gson/gson/2.1.0/gson-2.1.0.pom](http://repo.typesafe.com/typesafe/releases/com/google/gson/gson/2.1.0/gson-2.1.0.pom) [warn] ==== 类型安全快照存储库：尝试 [警告]
> [http://repo.typesafe.com/typesafe/snapshots/com/google/gson/gson/2.1.0/gson-2.1.0.pom](http://repo.typesafe.com/typesafe/snapshots/com/google/gson/gson/2.1.0/gson-2.1.0.pom) [警告] == == scalajas repo: 试过 [warn]
> [http://scalajars.org/repository/com/google/gson/gson/2.1.0/gson-2.1.0.pom](http://scalajars.org/repository/com/google/gson/gson/2.1.0/gson-2.1.0.pom) [warn] ==== SecureSocial Repository: 试过 [警告]
> [http://securesocial.ws/repository/releases/com.google.gson/gson/2.1.0/ivys/ivy.xml](http://securesocial.ws/repository/releases/com.google.gson/gson/2.1.0/ivys/ivy.xml) [警告] ==== 公开：尝试 [警告]
> [http://repo1.maven。 org/maven2/com/google/gson/gson/2.1.0/gson-2.1.0.pom](http://repo1.maven.org/maven2/com/google/gson/gson/2.1.0/gson-2.1.0.pom) [警告] :::::::::::::::::::::::: :::::::::::::::::::::::
> [警告] :: 未解决的依赖关系 :: [警告] :::::::::::::::: :::::::::::::::::::::::::::::: [警告] :: com.google.gson#gson;2.1.0: 未找到 [警告] :::::::::::::::::::::::::::::::::::::::::::::: [错误] {file:/Users/levinotik/Dev/scala/throw-away/myFirstApp/}myFirstApp/*:update: sbt.ResolveException: unresolved dependency: com.google.gson#gson;2.1.0: not found [error]总时间：4 秒，2012 年 12 月 20 日晚上 10:53:52 完成

我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:05:25.617

您在 groupId 中输入了错误，它是“com.google.code.gson **”**：

```
"com.google.code.gson" % "gson" % "2.2" 
```

# php - PHP将用户添加到收藏夹系统？

> ID：13984047
> 
> 赞同：2
> 
> 时间：2012-12-21T03:55:47.503
> 
> 标签：php, mysql, favorites

我会尽量清楚。我是 php 和 mysql 的新手，所以我很抱歉，因为我可能还有很长的路要走，但我试图让我网站的用户点击另一个用户个人资料上的收藏按钮并拥有这个在 mysql 表中将用户设置为他们的收藏夹。

到目前为止，我已经设计了一个像这样的基本表：

```
 ID                 |             User_ID             |       Favorite_ID

ID Auto Incs by 1            Person Favouring User            User being favoured 
```

我只是想这样做，以便一旦在用户的配置文件上按下最喜欢的按钮，这就是一个 href 到 favorite.php，其中这个 echo 是 profile_id 和会话 id，并将两者存储在表中。

然后，这应该允许我设置一个查询，该查询将所有最喜欢的 id 提取到 user_id 为“x”的位置。

请有人告诉我我需要做什么。谢谢你。

这是我的按钮链接：

```
<a href="favorite.php?to=<?php echo "$profile_id"; ?>">+ Favorite</a> 
```

这是我正在使用的代码：

```
<?php ob_start(); ?>
  <?php 

// CONNECT TO THE DATABASE
    require('includes/_config/connection.php');
// LOAD FUNCTIONS
    require('includes/functions.php');
// GET IP ADDRESS
    $ip_address = $_SERVER['REMOTE_ADDR'];

?>
  <?php require_once("includes/sessionframe.php"); 
?>

  <?php

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];  
}

?> 
  <?php 
            $sql = "INSERT INTO ptb_favorites (id, user_id, favorite_id) VALUES (NULL, '".$_SESSION['user_id']."', '".$user_to_id."');";
            mysql_query($sql, $connection);

            echo "<div class=\"infobox2\">User has been added to your favorites.</div>";
            header('Location: http://localhost/ptb1/profile.php');      
?>
<?php ob_end_flush() ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:49:37.780

更改您的按钮链接

```
<a href="favorite.php?to=<?php echo "$profile_id"; ?>">+ Favorite</a> 
```

对此

```
<a href="favorite.php?to=<?php echo $profile_id; ?>">+ Favorite</a> 
```

# jquery - 如何从 .on('click'

> ID：13984049
> 
> 赞同：0
> 
> 时间：2012-12-21T03:55:53.837
> 
> 标签：jquery

我有以下设置：

```
$("#content-button-panel")
       .on('click', 'a:not(".folder")', function (event) {
           event.preventDefault();
           var $link = $(this);
           ServerFunctions.getContentAjax($link);
       }); 
```

我已经排除了任何带有“文件夹”类的链接。我怎样才能排除以下具有以“title-...”开头的类的链接？

```
<a class="title-x">xx</a>
<a class="title-123243234">yyy</a>
<a class="title-sadfdsaf">zzz</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:04:53.513

您的 html 没有具有类的锚元素`folder`，您可以使用`.not()`，例如

```
$("#content-button-panel > a").not(".folder").on('click', function (event) {
     event.preventDefault();
     var $link = $(this);
     alert($link);
}); 
```

或者

```
$("#content-button-panel").on('click', 'a:not(.folder)', function (event) {
 ... 
```

演示：[jsFiddle](http://jsfiddle.net/AgFgq/6/) 示例 html

```
<div id="content-button-panel">
    <a href="#" class="title-x">xx</a>
<a href="#" class="title-123243234">yyy</a>
<a href="#" class="title-sadfdsaf folder">zzz</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:07:16.153

实现此目的的另一种方法是使用选择器作为

```
$('#content-button-panel, a:not([class*="title-"], [class="folder"])')
       .on('click', function (event) {
           event.preventDefault();
           alert($(this));
       }); 
```

小提琴在[这里](http://jsfiddle.net/SptEL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T04:07:55.997

使用多个选择器，这将排除两个锚标记元素

```
 $("#content-button-panel")
       .on('click', 'a:not([class^="title-"]),a:not(".folder")', function (event) {
       event.preventDefault();
       var $link = $(this);
       ServerFunctions.getContentAjax($link);
   }); 
```

# java - 共享偏好的持久性

> ID：13984050
> 
> 赞同：1
> 
> 时间：2012-12-21T03:55:57.583
> 
> 标签：java, android, sharedpreferences

我有一个游戏，它使用共享偏好来记录用户的高分并将其显示在统计页面上。

我的问题->即使在用户退出应用程序后，这种共享偏好还会持续存在吗？我如何确保始终保留这些数据，共享首选项会这样做还是我需要使用其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:11:59.573

> 即使在用户退出应用程序后，这种共享偏好是否会持续存在？

是的！

> 我如何确保始终保留这些数据，共享首选项会这样做还是我需要使用其他东西？

[查看文档](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:52:07.093

请参阅下面的链接以获取共享偏好的完整信息，它将解决您的问题。

[Android 共享首选项](http://kpbird.blogspot.in/2011/04/android-indepth-sharedpreference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T04:15:00.163

是的，共享首选项会一直存储到应用程序被卸载或用户清除应用程序数据为止。

有关持久数据的不同方法的详细信息，请参阅[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)。

# ruby-on-rails-3 - 在第 5 章的布局链接部分添加页面时出错 (Michael Hartl)

> ID：13984054
> 
> 赞同：1
> 
> 时间：2012-12-21T03:56:34.330
> 
> 标签：ruby-on-rails-3, rspec-rails, railstutorial.org

我在 Michael Hartl 的 RoR 教程的第 5.3 节中，我在其中添加了一个联系页面。我跑了`$ bundle exec rspec spec/requests/static_pages_spec.rb`。我无法弄清楚错误。我在 spec/requests/static_pages_spec.rb 中进行了更改，并为联系页面添加了适当的路由、操作并编辑了联系页面的视图。这是输出：

```
Failures:

  1) Static Pages Contact page should have the h1 'Contact'
 Failure/Error: visit '/static_pages/contact'
 ActionView::Template::Error:
   /Users/themaktravels/rails_projects/happy_app/app/views/static_pages/contact.html.erb:1: syntax error, unexpected ',', expecting ')'
   ...putBuffer.new; provide (:title, 'Contact') 
   ...                               ^
   /Users/themaktravels/rails_projects/happy_app/app/views/static_pages/contact.html.erb:1: syntax error, unexpected ')', expecting keyword_end
   ...ew; provide (:title, 'Contact') 
   ...                               ^
 # <internal:prelude>:10:in `synchronize'
 # ./spec/requests/static_pages_spec.rb:56:in `block (3 levels) in <top (required)>'

  2) Static Pages Contact page should have the title 'Contact'
 Failure/Error: visit '/static_pages/contact'
 ActionView::Template::Error:
   /Users/themaktravels/rails_projects/happy_app/app/views/static_pages/contact.html.erb:1: syntax error, unexpected ',', expecting ')'
   ...putBuffer.new; provide (:title, 'Contact') 
   ...                               ^
   /Users/themaktravels/rails_projects/happy_app/app/views/static_pages/contact.html.erb:1: syntax error, unexpected ')', expecting keyword_end
   ...ew; provide (:title, 'Contact') 
   ...                               ^
 # <internal:prelude>:10:in `synchronize'
 # ./spec/requests/static_pages_spec.rb:61:in `block (3 levels) in <top (required)>'

Finished in 0.53514 seconds
9 examples, 2 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:55 # Static Pages Contact page should have the h1 'Contact'
rspec ./spec/requests/static_pages_spec.rb:60 # Static Pages Contact page should have the title 'Contact' 
```

在`static_pages_spec.rb`中，我有以下内容：

```
 describe "Contact page" do

     it "should have the h1 'Contact'" do
     visit '/static_pages/contact'
     page.should have_selector('h1', :text => 'Contact')
end

     it "should have the title 'Contact'" do
     visit '/static_pages/contact'
     page.should have_selector('title',
       :text => "Ruby on Rails Tutorial Happy App | Contact")
end 
```

在 RoR 教程中，这就是您被指示拥有的内容`static_pages_spec.rb`：

```
 describe "Contact page" do

     it "should have the h1 'Contact'" do
     visit '/static_pages/contact'
     page.should have_selector('h1', text: 'Contact')
  end

     it "should have the title 'Contact'" do
     visit '/static_pages/contact'
     page.should have_selector('title',
                text: "Ruby on Rails Tutorial Sample App | Contact")
  end 
```

我所做的唯一更改`static_pages_spec.rb`是 (1) 将“Sample App”改为“Happy App”，(2) 使用“text:”而不是“:text =>”，以便在`static_pages_spec.rb`. 故障排除时，我在两个“文本”版本之间切换并得到相同的结果。

关于我应该寻找什么来解决错误的任何建议？另外，我不确定如何阅读错误消息，即错误的第一部分是否显示正确的方法，反之亦然？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:25:06.130

您的提供线上似乎有不必要的空间。它应该是

```
<% provide(:title, 'Contact') %> 
```

不是

```
<% provide (:title, 'Contact') %> 
```

# python - HttpError 401 尝试通过 CloudStorage Pipeline 访问 BigQuery url

> ID：13984057
> 
> 赞同：1
> 
> 时间：2012-12-21T03:56:54.700
> 
> 标签：python, google-app-engine, google-bigquery, google-cloud-storage, google-api-python-client

这个问题本质上是我之前的问题的后续问题，您可以在[此处](https://stackoverflow.com/questions/13941416/unicodeencodeerror-for-google-app-engine-datastore-to-bigquery-process)找到。在处理了我遇到的编码错误之后，我遇到了一个新的 HttpError 401 问题。我的开发应用服务器日志的跟踪如下：

```
ERROR    2012-12-20 03:10:46,312 pipeline.py:2237] Generator main.CloudStorageToBigQuery(*([u'/gs/jibdancsvtest/Datastore Mapper main.streamdata-1582389642294FE5DBBCE-output'],), **{})#2d3dba4f4a5211e2bf0ac3cee1488e47 raised exception. HttpError: <HttpError 401 when requesting https://www.googleapis.com/bigquery/v2/projects/1093XXXXXXXXX/jobs?alt=json returned "Invalid Credentials">
Traceback (most recent call last):
  File "C:\Users\Tank\Documents\Aptana Studio 3 Workspace\jibdantest-bq\mapreduce\lib\pipeline\pipeline.py", line 2030, in evaluate
    self, pipeline_key, root_pipeline_key, caller_output)
  File "C:\Users\Tank\Documents\Aptana Studio 3 Workspace\jibdantest-bq\mapreduce\lib\pipeline\pipeline.py", line 1064, in _run_internal
    return self.run(*self.args, **self.kwargs)
  File "C:\Users\Tank\Documents\Aptana Studio 3 Workspace\jibdantest-bq\main.py", line 77, in run
    result.execute()
  File "C:\Users\Tank\Documents\Aptana Studio 3 Workspace\jibdantest-bq\oauth2client\util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\Tank\Documents\Aptana Studio 3 Workspace\jibdantest-bq\apiclient\http.py", line 678, in execute
    raise HttpError(resp, content, uri=self.uri)
HttpError: <HttpError 401 when requesting https://www.googleapis.com/bigquery/v2/projects/1093XXXXXXXXX/jobs?alt=json returned "Invalid Credentials"> 
```

我还以为我会从 url 发布 json 响应。这是那个json：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

如果您在 stackoverflow 上点击我上一个问题的链接，您会在我的 main.py 文件中找到运行所有内容的代码。但是如果我需要在这里重新发布它，我可以这样做。

所以，我认为这是一个 OAuth 问题，但我相信我已经正确设置了所有这些。对于我可以做/调查的其他事情的任何建议都会很棒。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:23:25.580

当您在本地开发服务器上运行时，您需要以不同的方式设置您的凭据：

首先，您需要设置本地凭据存储。[从这里使用](https://codereview.appspot.com/5362041/diff/1/samples/oauth2cmdline/get_refresh_token.py)get_refresh_token.py：https://codereview.appspot.com/5362041/diff/1/samples/oauth2cmdline/get_refresh_token.py

在您的 Google API 控制台上为 Web 应用程序设置一个客户端 ID，并将参数传递给上面的脚本（将在浏览器中启动以进行 OAuth2 身份验证）。这将创建一个带有凭据的本地文件，然后您可以将其传递给您的 API 客户端以获取经过身份验证的请求：

```
from oauth2client.client import Storage, Credentials
from oauth2client.appengine import AppAssertionCredentials

class FileStorage(Storage):
    def __init__(self, filepath):
        self._filepath = filepath

    def locked_get(self):
        with open(self._filepath, 'r') as f:
            json = f.read()
        credentials = Credentials.new_from_json(json)
        return credentials

if not os.environ.get('SERVER_SOFTWARE', '').startswith('Development'):
    credentials = AppAssertionCredentials(scope='https://www.googleapis.com/auth/bigquery')
else:
    filepath = #Path to credentials file here
    storage = FileStorage(filepath)
    credentials = storage.get() 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:29:39.483

您可能想检查您是否具有运行作业的正确权限。我们遇到了类似的问题，发现我们需要所有者权限才能运行这些作业。

希望能帮助到你！

# jquery - 如何让 Jquery 使用 Bootstrap UI 计算两个日期之间的百分比

> ID：13984058
> 
> 赞同：1
> 
> 时间：2012-12-21T03:56:57.553
> 
> 标签：jquery, date, twitter-bootstrap, progress-bar, percentage

我被困在 Jquery 中。我想要实现的是使用 Bootstrap 进度条并通过修改其样式使 Jquery 适应条的宽度。给定开始日期和结束日期，进度条会根据今天的日期计算完成百分比。

未通过结束日期时，它可以正常工作。但是当结束日期已经过去时会出现问题，它仍然应该说：100%，而不是继续计算超过 100%。如果有人可以看看它并改进我的数学，这可能会丢失一些东西。

这是我的 Jquery 代码：

```
var div_start = document.getElementById("StartDate");
var div_end   = document.getElementById("EndDate");
var start = new Date(div_start.innerHTML);
var end = new Date(div_end.innerHTML);
var today = new Date();

var total = end - start;
var progress = today - start;
var percent = Math.round(progress/ total * 100 ) + "%";
var div_per = document.getElementsByClassName('bar')[0];
div_per.style.width = percent;
div_per.innerHTML = percent; 
```

我已经把它放在[http://jsfiddle.net/CjeMD/4/](http://jsfiddle.net/CjeMD/4/)

# python - Pygame重启？

> ID：13984066
> 
> 赞同：4
> 
> 时间：2012-12-21T03:58:21.483
> 
> 标签：python, user-controls, while-loop, pygame

我让我的游戏在一段时间 True 循环中运行，我希望能够要求用户“再玩一次？” 我已经有了用于弹出文本的矩形代码，但我需要一种方法让用户单击矩形或按 y 表示是，然后代码再次运行它自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-12T06:16:29.513

在您的主程序循环中，`event.key`为您希望玩家按下以重新开始游戏的任何键创建一个新的 if 语句，然后`main()`在 if 语句中调用。这会将所有内容重置回方块 1。

在下面的示例中，我检测用户是否已经死亡并按下`R`键，然后重新启动`main()`。

```
# -------- Main Program Loop -----------
while not done:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            done = True

        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_LEFT:
                player.go_left()
            if event.key == pygame.K_RIGHT:
                player.go_right()
            if event.key == pygame.K_UP:
                player.jump()
            if event.key == pygame.K_SPACE:
                player.shoot()

            if event.key == pygame.K_r and not player.alive():
                main() 
```

在主循环的下方，我显示了一些文本，要求玩家按 R 键重生。

```
 if not player.alive():
            gameover = font.render("Press R to Respawn", False, (255, 255, 255))
            rect = gameover.get_rect()
            rect.center = screen.get_rect().center
            screen.blit(gameover, rect) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T04:01:45.280

拥有循环它自己的方法，从`main()`运行中调用它，当游戏结束并结束时，`main()`询问用户是否想再次玩，如果是这样，在将所有内容设置为默认值后调用主循环

或者

只需将再次询问的部分清除并重新初始化所有变量作为默认值，如果用户想再次播放则让循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T01:24:13.923

要判断用户是否点击了矩形，只需在鼠标位置设置一个 1×1 的矩形，然后当他们点击时，检查矩形是否碰撞。然后，就像 DeadChex 所说的那样，通过让它成为自己的函数来再次调用循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-07T08:48:17.977

运行这个我专门写的函数。随心所欲地调整它。如果玩家死了（*或发生任何使再次播放文本出现的情况*），您只需调用 play_again()

```
import pygame
pygame.init()

SCREEN_WIDTH = 600
SCREEN_HEIGHT = 400

screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
bigfont = pygame.font.Font(None, 80)
smallfont = pygame.font.Font(None, 45)

def play_again():
    text = bigfont.render('Play again?', 13, (0, 0, 0))
    textx = SCREEN_WIDTH / 2 - text.get_width() / 2
    texty = SCREEN_HEIGHT / 2 - text.get_height() / 2
    textx_size = text.get_width()
    texty_size = text.get_height()
    pygame.draw.rect(screen, (255, 255, 255), ((textx - 5, texty - 5),
                                               (textx_size + 10, texty_size +
                                                10)))

    screen.blit(text, (SCREEN_WIDTH / 2 - text.get_width() / 2,
                       SCREEN_HEIGHT / 2 - text.get_height() / 2))

    clock = pygame.time.Clock()
    pygame.display.flip()
    in_main_menu = True
    while in_main_menu:
        clock.tick(50)
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                in_main_menu = False
                pygame.display.quit()
                pygame.quit()
                quit()
            elif event.type == pygame.MOUSEBUTTONDOWN and event.button == 1:
                x, y = event.pos
                if x >= textx - 5 and x <= textx + textx_size + 5:
                    if y >= texty - 5 and y <= texty + texty_size + 5:
                        in_main_menu = False
                        break

play_again()

pygame.display.quit()
pygame.quit() 
```

我希望这是您正在寻找的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-03T02:35:19.013

我可以想到这一点：在代码的末尾放置这样的内容来询问用户是否想玩：

```
play_again = 1

while play_again:
    play_again = int(raw_input("Play again? 0=No, 1=Yes"))
    if play_again:
        main()
    else:
        break
        pygame.quit() 
```

在我的示例中，我将 a放在函数循环`True`的末尾，以便返回 allways ，这使得如果用户输入为，则可以在循环内部重复游戏并退出 if 。`while``main()``main()``True``play_again``1``0`

# android - 来自不同 AsyncTask 类的 Toogle ProgressBar 返回 NullPointerException

> ID：13984070
> 
> 赞同：1
> 
> 时间：2012-12-21T03:58:57.267
> 
> 标签：android, android-activity, android-asynctask, progress-bar

我想在 android 上做异步任务，我在不同的类上而不是在活动内部做。我的问题是当我想将 ProgressBar 可见性从 INVISIBLE 设置为 GONE 时，它返回 NullPointerException。我不明白为什么，这是我到目前为止的代码。

```
package com.ursabyte.boxi;

import android.os.AsyncTask;
import android.widget.ProgressBar;

public class SyncPercobaan extends AsyncTask<Object, Boolean, String> {

    AktifitasUtama ut;
    ManajemenFile mf;
    ProgressBar loading;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        ProgressBar loading = (ProgressBar) ut.findViewById(R.id.loading);
        loading.setVisibility(ProgressBar.VISIBLE);
    }

    @Override
    protected void onPostExecute(String response) {
        super.onPostExecute(response);
        ProgressBar loading = (ProgressBar) ut.findViewById(R.id.loading);
        loading.setVisibility(ProgressBar.GONE);
        ut.browseToRoot();
    }

    @Override
    protected String doInBackground(Object... params) {
        String dir_name = (String) params[0];
        ut = (AktifitasUtama) params[1];
        ManajemenFile mf = new ManajemenFile(ut);
        mf.retrieve_user_dir();
        return dir_name;
    }
} 
```

AktifitasUtama 是我的主要活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:05:37.230

这里

```
public class SyncPercobaan extends AsyncTask<Object, Boolean, String> {

    AktifitasUtama ut;  //<<--here 
```

这不是从 Activity 访问 Ui 元素到 Activity 类的正确方法，如您的情况`AsyncTask`

为了从非 Activity 类访问 UI 元素，创建非 Activity 的构造函数：

```
public class SyncPercobaan extends AsyncTask<Object, Boolean, String> {
Context context;
    SyncPercobaan(Context context){
      this.context=context;
    }
  //your code here 
```

现在`context`用于访问所有 UI 元素`AktifitasUtama`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:02:00.107

答案是 context.runOnUiThread。就我而言，ut.runOnUiThread。这是代码：

```
public class SyncPercobaan extends AsyncTask<Object, Boolean, String> {

    AktifitasUtama ut;
    ManajemenFile mf;
    ManajemenKoneksi mk;
    SessionManager session;
    DatabaseHandler dh;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(String response) {
        final String res = response; 
        super.onPostExecute(response);
        session = new SessionManager(ut);
        ut.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                ut.toogle_indicator(false);
                ut.display_toast(res);
            }
        });
        ut.browseToRoot();
    }

    @Override
    protected String doInBackground(Object... params) {
        String dir_name = (String) params[0];
        ut = (AktifitasUtama) params[1];
        session = new SessionManager(ut);
        mk = new ManajemenKoneksi(ut);
        if(mk.is_connected()){
            ut.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    ut.display_toast("Starting syncing...");
                    ut.toogle_indicator(true);
                }
            });     
            ManajemenFile mf = new ManajemenFile(ut);
            String result = mf.retrieve_user_dir(dir_name);
            if(result.equals("true")){
                return "Syncing completed...";
            } else {
                return result;
            }
        } else {
            return "Internet connection unavailable";
        }
    }

}

class Task extends TimerTask {
    AktifitasUtama au;
    String dir_name;
    Task(AktifitasUtama ut, String dir_name){
        au=ut;
        this.dir_name=dir_name;
    }

    public void run() {
        ManajemenFile mf = new ManajemenFile(au);
        mf.retrieve_user_dir(dir_name);
    }
} 
```

# php - 奇怪的行为 - 允许访问 domain.in/file/file

> ID：13984073
> 
> 赞同：2
> 
> 时间：2012-12-21T03:59:11.390
> 
> 标签：php, html

我在我的网站上观察到这种奇怪的行为。

我的网络服务器上有以下目录结构

```
root
login.php
contact.php
myaccount.php
.
. 
```

当我 `http://www.domain.in/contact.php` 按预期在 url 中键入地址时，我的contact.php 会呈现在屏幕上。但是当我尝试输入以下地址作为 url.. `http://www.domain.in/contact.php/myaccount.php`在这里我希望下面的事情会发生：

```
1)  a 404 page to be displayed
2)  a redirect to contact.php 
```

但是相反，页面`myaccount.php`被渲染，当然不是以我想要的方式呈现。

我基本上认为我是否可以使用 htacess 文件来防止这种情况，但我无法找出任何适用于这种情况的规则。

任何帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:35:22.653

忽略我的最后一个答案，没有完全阅读这个问题。

尝试将其添加到顶部`myaccount.php`

```
 <?php
 $host = $_SERVER['HTTP_HOST'];
 $self = $_SERVER['PHP_SELF'];
 $query = !empty($_SERVER['QUERY_STRING']) ? $_SERVER['QUERY_STRING'] : null;
 $url = !empty($query) ? "http://$host$self?$query" : "http://$host$self";
 $redirect = '<meta http-equiv="refresh" content="4;url=http://www.domain.in/contact.php">';
 if ($url=="http://www.domain.in/contact.php/myaccount.php") echo $redirect;
 // The Rest of the page here
 ?> 
```

# android - 为什么启用 NEON SIMDization 时 Android 会崩溃？信号 11 (SIGSEGV)，代码 1 (SEGV_MAPERR)

> ID：13984075
> 
> 赞同：0
> 
> 时间：2012-12-21T03:59:23.760
> 
> 标签：android, gcc, android-ndk, simd, neon

我正在对我的代码进行一些基于 NEON 的 SIMDization。没有 SIMDization 它工作得很好，但是在 makefile 中添加以下一行会导致它崩溃，

```
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
    LOCAL_ARM_NEON := true
endif 
```

有人可以通过启用 NEON 来帮助确定它为什么会崩溃，并且代码保持完全相同吗？

问候， Subhransu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:40:19.707

首先检查你的处理器特性，看看它是否真的有NEON，

> 并非所有基于 ARMv7 的 Android 设备都支持 NEON

您可以查看处理器数据表。

根据文件，这可能是您的源代码，

> 在您的 LOCAL_SRC_FILES 变量中列出源文件时，您现在可以选择使用 .neon 后缀来指示您希望使用 Neon 支持构建相应的源。例如：
> 
> LOCAL_SRC_FILES := foo.c.neon bar.c
> 
> 只会在 NEON 支持下构建“foo.c”。

对于构建，您的目标是 armeabi-v7a ABI 吗？你可以在你的 Android.mk 中检查它

```
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a) 
```

所以检查所有这些因素，看看是什么导致了崩溃

NDK 示例是一个很好的入门资源，请看一下。祝你好运

# algorithm - 循环遍历所有配置

> ID：13984080
> 
> 赞同：0
> 
> 时间：2012-12-21T03:59:56.457
> 
> 标签：algorithm, loops

我想不出一个好方法来做到这一点：

我想遍历加起来为 21 的 6 个数字的所有组合。这些数字必须大于 0 和整数。

例如：

```
 21 0 0 0 0 0 
 20 1 0 0 0 0 
 20 0 1 0 0 0 
 ...
 1 2 3 4 5 6
 etc... 
```

你们能给我一个线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:01:43.870

这个问题类似于 next_permutation 问题。[https://github.com/zwxxx/LeetCode/blob/master/Next_Permutation.cpp](https://github.com/zwxxx/LeetCode/blob/master/Next_Permutation.cpp)。我们可以通过修改如何获取下一个元素来解决这个问题。以下是示例代码。

```
#include <iostream>

using namespace std;

bool findNext(int *perm)
{
    if (perm[5] == 21) 
        return false;
    int i;
    for(i = 0; i < 6; i++)
        if (perm[i] != 0)
            break;
    perm[i+1]++;
    perm[i]--;
    if (i > 0) {
        int tmp = perm[i];
        perm[i] = perm[0];
        perm[0] = tmp;                                                                                                                                                                                                                    
    }   
    return true;
}

void printPerm(int *perm)
{
    for (int i = 0; i < 6; i++) {
        cout << perm[i] << " ";
    }   
    cout << endl;
}

int main()
{
    int n[6];
    n[0] = 21; 
    for (int i =1; i < 6; i++)
        n[i] = 0;
    printPerm(n);
    while (findNext(n)) {
        printPerm(n);
    }   
    printPerm(n);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T04:16:18.020

为第一个数字 A 选择一个数字，然后找出 5 个数字的组合有多少个组合加起来为 (21 - A) 等等，对于所有 4 的组合等等。1 个案例可以（最多）1 个组合。为了保持唯一性，您可以添加数字必须不增加的约束

所以它会是这样的：

```
findcombinations(sum, length, max) {

if(length == 1)
  return 1;
else {
   for(int i = 0; i <= sum && i <= max; i++)
       return findcombinations(sum - i; length -1; i)
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:24:11.243

我更喜欢下一个排列方法。或者您可以使用 6 个嵌套 for 循环的蛮力，这更易于实现。

这是从 ChengYi He 的帖子转换而来的 Next permutation 的 C# 版本

```
using System;
using System.Collections.Generic;
using System.Linq;

static class Extensions
{
    public static string GetString(this IEnumerable<int> arr)
    {
        return arr.Aggregate("", (a, b) => a + " " + b);
    }
}

class Program
{
    const int Sum = 21;
    const int Len = 6;

    static void Main(string[] args)
    {
        var result = new List<string>();
        Run(result);
        result.ForEach(Console.WriteLine);

        Console.WriteLine(string.Format("N: {0}\nPress a key to exit", 
            result.Count));
        Console.ReadKey();
    }

    static void Run(IList<string> result)
    {
        var n = new int[Len];
        n[0] = Sum;

        result.Add(n.GetString());
        while (FindNext(n))
        {
            result.Add(n.GetString());
        }
    }

    static bool FindNext(IList<int> perm)
    {
        if (perm.Last() == Sum)
        {
            return false;
        }

        int i;
        for (i = 0; i < Len; i++)
        {
            if (perm[i] != 0)
            {
                break;
            }
        }

        perm[i + 1]++;
        perm[i]--;
        if (i > 0)
        {
            int tmp = perm[i];
            perm[i] = perm[0];
            perm[0] = tmp;
        }
        return true;
    }
} 
```

蛮力版本在 C# 中是这样的

```
static void Main(string[] args)
{
    var result = new List<string>();
    for (int a = 0; a <= Sum; a++)
        for (int b = 0; b <= Sum; b++)
            for (int c = 0; c <= Sum; c++)
                for (int d = 0; d <= Sum; d++)
                    for (int e = 0; e <= Sum; e++)
                        for (int f = 0; f <= Sum; f++)                            
                            if(a+b+c+d+e+f==Sum)                                
                                result.Add(string.Format(
                                    "{0} {1} {2} {3} {4} {5}",
                                        a,b,c,d,e,f));

    result.ForEach(Console.WriteLine);                            
    Console.WriteLine(string.Format("N: {0}\nPress a key to exit",
                                    result.Count));
    Console.ReadKey();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T04:03:38.597

您将需要六个嵌套循环（或递归函数），并且一旦总和达到 21，您就应该`break`循环。

# dll - 打开街道地图 dll

> ID：13984081
> 
> 赞同：1
> 
> 时间：2012-12-21T04:00:04.497
> 
> 标签：dll, openstreetmap

我需要在桌面应用程序中显示 OpenStreetMaps。
有一些 .dll 可以做到吗？

我正在尝试帮助一位使用 C++ 写作的同事，因此 Java 工具不适合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:04:20.600

我不知道有一个 DLL，尽管存在一些开源桌面查看器，因此可能有可能将其中一个封装在 DLL 中或以其他方式从 C++ 应用程序与其通信：

[http://wiki.openstreetmap.org/wiki/Software/Desktop](http://wiki.openstreetmap.org/wiki/Software/Desktop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:46:13.277

您要显示 Web 地图还是矢量图？在任何情况下，[Maperitive](http://maperitive.net)的地图控件都可以嵌入到 3rd 方应用程序中，但您需要[商业许可](http://maperitive.net/docs/FAQ.html#Commercial%20use)。

免责声明：我是 Maperitive 的作者。

# flash - AS3 Flash 投影仪和舞台视频

> ID：13984082
> 
> 赞同：1
> 
> 时间：2012-12-21T04:00:06.850
> 
> 标签：flash

桌面 AIR 的缺点之一是当前不支持 Stage Video。

谁能告诉我 Stage Video 是否可以在全屏闪光灯投影仪中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:19:12.710

是的 - 它应该可以工作，它会缩放视频以适应，但保持纵横比，所以你会得到信箱或窗帘，这取决于视频和屏幕显示，除非你允许缩放。只需为回调添加如下代码：

```
 // Stretches video to fit
    this.stage.scaleMode = StageScaleMode.EXACT_FIT;

    // Crops video to fit - but fills the whole screen
    this.stage.scaleMode = StageScaleMode.NO_BORDER;

    // Shows video in true aspect ratio with no scaling or cropping
    this.stage.scaleMode = StageScaleMode.NONE;
    // and
    this.stage.scaleMode = StageScaleMode.SHOW_ALL;

    private function fsBtnClick(e:MouseEvent):void {
        this.stage.displayState=StageDisplayState.FULL_SCREEN;
    } 
```

# django - Django，模型字段定义的额外参数

> ID：13984083
> 
> 赞同：1
> 
> 时间：2012-12-21T04:00:29.940
> 
> 标签：django, arguments, field

我想为基类添加额外的参数以供以后使用，而无需在或类`model.Field`中再次定义字段的额外选项。`Form``ModelForm`

我可以添加额外的参数：

```
class Poll(models.Model):

    question = models.CharField(max_length=200,
                                extra= { 'widget': 'xw', 
                                         'admin_list_order': 3 })

    pub_date = models.DateTimeField('date published') 
```

我可以通过以下方式访问额外的 arg：

```
(InteractiveConsole)
>>> from polls.models import Poll
>>> Poll._meta.fields[1].extra
{'widget': 'xw', 'admin_list_order': 3}
>>> 
```

这是添加额外参数的合适的 Pythonic 方式吗？

```
from django.db import models

# save old __init__ function of Field class
__oInit = models.Field.__init__

# define a new one to accept 'extra' arg
def __xinit__(self, *args, **kwargs):

    #chek if extra arg exist
    if kwargs.has_key('extra'):
        self.extra = kwargs.pop('extra')

    #call real __init__ 
    __oInit(self, *args, **kwargs)

# replace init with new one
models.Field.__init__ = __xinit__ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:03:44.510

如果他们`extra`向字段添加参数，这可能会中断。*通常*不鼓励使用猴子补丁。`Field`您可以通过向基类添加方法来走更安全的路线：

```
def set_extra(self, **kwargs):
    self.extra = kwargs
    return self
models.Field.set_extra = set_extra 
```

然后像这样定义你的模型：

```
class Poll(models.Model):
    question = models.CharField(max_length=200).set_extra(
            widget='xw', admin_list_order=3) 
```

* * *

`has_key`被认为是*unpythonic*，检查密钥是否存在的首选方法是：

```
if 'extra' in kwargs:
    self.extra = kwargs.pop('extra') 
```

更多的*pythonic*只是尝试它并发现失败：

```
try:
    self.extra = kwargs.pop('extra')
except KeyError:
    pass 
```

# c# - 由于 SQL 字符串而重复值？

> ID：13984084
> 
> 赞同：7
> 
> 时间：2012-12-21T04:00:49.810
> 
> 标签：c#, mysql, sql, ado.net

我制作了自己的使用 INNER JOINS 的 SQL 字符串。这是我的功能：

```
string cmdstr = @"SELECT s.*, mdb.menu_name
                  FROM stocksdb s, recipelist rl
                  INNER JOIN menudb mdb  ON rl.menu_ID = mdb.menu_ID
                  WHERE rl.stock_ID = '" + stockID + "'";

var cmd = new MySqlCommand(cmdstr, db.mycon);
var dr = cmd.ExecuteReader();
while (dr.Read())
{
    var menuname = dr["menu_name"].ToString();

    stockIDTxtbox.Text = stockID;
    nameTxtBox.Text = dr["stock_name"].ToString();
    availableTxtbox.Text = dr["stock_quantity"].ToString();
    pricePerPieceTxtbox.Text = dr["stock_pricePerPiece"].ToString();
    limitTxtBox.Text = dr["stock_limit"].ToString());

    recipeList.Items.Add(new ListViewItem(new[] { menuname });
} 
```

现在的问题是，当我单击一个项目时，`stocksList ListView`会有`recipeList ListView`多个值。像 5 行左右的相同值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T04:04:54.450

缺少与stockdb 的连接。像这样的东西：

```
 SELECT s.*, mdb.menu_name 
   FROM stocksdb s

   INNRER JOIN recipelist rl 
   ON s.stock_ID= r1.stock_ID   <== this join was missing

   INNER JOIN menudb mdb 
   ON rl.menu_ID = mdb.menu_ID 
   WHERE rl.stock_ID = '" + stockID 
```

# iphone - 在 iOS 中显示内联脚注

> ID：13984085
> 
> 赞同：-1
> 
> 时间：2012-12-21T04:00:57.493
> 
> 标签：iphone, objective-c, ios, ipad, instapaper

我想知道在 iOS 中实现弹出链接和内联脚注的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T06:00:53.037

谢谢你喜欢我的东西。

这些弹出框/叠加层只是使用脚注内容的 HTML 片段创建的单独的 UIWebView。iPad 显示在 UIPopoverController 中，iPhone 显示在自定义视图中，该视图向上滑动到内容区域的顶部。

让它运作良好，特别是对于任意内容，需要*很多*小细节和技巧，其中大部分你不需要实现基本想法。

发布所有这些技巧将远远超出这个相当广泛的问题的范围。我对这些功能的实现至少是几千行代码，不是独立的或通用的，并且涉及 Obj-C、HTML、CSS 和 Javascript 之间的协作。但那是因为我非常关心让这些细节正确无误。在实践中，它几乎没有我希望的那么重要。

# objective-c - 为什么 objC 中没有 *ForKeyPath？

> ID：13984086
> 
> 赞同：0
> 
> 时间：2012-12-21T04:00:57.990
> 
> 标签：objective-c, nsdictionary

为什么会有 valueForKey: 和 intForKey:, stringForKey: 等。

但是有 valueForKeyPath: 而没有 intForKeyPath:、stringForKeyPath: 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:36:58.850

Apple`NSDictionary`不支持名为`intForKey:`或的消息`stringForKey:`。

也许您正在使用一些将这些消息添加到类别中的第三方库。您可以询问该库的作者，为什么她不包含消息的密钥路径版本。

也许你在想`NSUserDefaults`，不是`NSDictionary`。 `NSUserDefaults`了解`integerForKey:`和`stringForKey:`。 `NSUserDefaults`不适用于存储大型复杂结构。它旨在存储小而简单的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:05:58.013

您正在混合来自 2 个不同对象（实际上是 1 个对象和一个非正式协议）的方法名称：`NSUserDefaults`和[`NSKeyValueCoding`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003780)非正式协议。

`NSUserDefaults`已经存在很长时间了，而键值编码和键值观察仅在 OS X 10.3 之后才出现。

`NSUserDefaults`处理存储与属性列表兼容的对象（NSData、NSDate、NSString、NSArray 和 NSDictionary）以在应用程序启动之间保持持久性。应用程序通常需要存储非对象类型的值，如 BOOL 或 int，但仅支持对象，因此这些便捷方法（`intForKey:`、`boolForKey:`等）允许以更简洁的方式保存它们。例如下面这行代码

```
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:NO] forKey:MDFirstLaunchKey]; 
```

变成：

```
[[NSUserDefaults standardUserDefaults] setBool:NO forKey:MDFirstLaunchKey]; 
```

相应的“get”方法允许更简洁的代码获取非对象类型的值。

这些方法的另一个目的`NSUserDefaults`是验证对象类型。假设你在 key 下保存了一个`NSArray`of ，你误写了如下代码：`NSDictionary``MDClientsKey`

```
NSDictionary *client = [userDefaults objectForKey:MDClientsKey];
NSString *name = [client objectForKey:@"name"]; 
```

Objective-C 的动态特性意味着用户默认为该`objectForKey:`调用返回的对象不会`NSDictionary`像代码假设的那样是一个，而是一个`NSArray`. 下一行将尝试调用`objectForKey:`NSArray，这可能会引发 NSInvalidArgumentException 并导致应用程序崩溃。

如果您改为使用[`dictionaryForKey:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/dictionaryForKey%3a),`NSUserDefaults`会返回`nil`：

```
NSDictionary *client = [userDefaults dictionaryForKey:MDClientsKey];
NSString *name = [client objectForKey:@"name"]; 
```

随后的行将意味着您正在向 发送消息`nil`，这将被简单地忽略（换句话说，没有崩溃）。

另一方面，`valueForKey:`and`valueForKeyPath:`方法是`NSKeyValueCoding`非正式协议的一部分。它们基本上允许一个对象通过名称访问另一个实例变量，`NSString`而不是通过调用一个方法。这其中的一个关键部分是需要返回对象，而不是像 or 等​​原始类型`valueForKey:`。事实上，如果一个对象具有像 一样的原始类型的属性，调用将[自动包装](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/DataTypes.html#//apple_ref/doc/uid/20002171-184696-BCIIJJGE)它以返回一个. 因此，拥有扩展访问器并没有多大意义。`valueForKeyPath:``int``float``height``NSInteger``[object valueForKeyPath:@"height"]``NSNumber``*ForKeyPath:`

# iphone - 下载未完全完成时限制用户播放文件

> ID：13984087
> 
> 赞同：2
> 
> 时间：2012-12-21T04:01:00.520
> 
> 标签：iphone, ios, ios4, asihttprequest

我正在使用 ASIHTTPRequest 从服务器下载音频、视频和图像文件。

如果下载未完全完成，我想限制用户播放该文件。

有什么方法可以限制当前正在下载的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:47:49.197

您将必须创建一个“文件”模型并自己跟踪状态。您使用的库不提供文件状态的高级抽象。

如果您需要更具体的帮助，请告诉我们您现在如何处理文件。您的“其他选项卡视图”是否仅在文件系统/操作系统级别显示文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:14:00.033

> *   (void)requestFinished:(ASIHTTPRequest *)request

在此委托触发通知，下载完成时调用。让您的播放按钮隐藏，直到您收到来自请求完成委托的通知。希望它会有所帮助。

# java - 通过从系统更改日期，我们可以打破时间到期限制

> ID：13984093
> 
> 赞同：0
> 
> 时间：2012-12-21T04:01:50.690
> 
> 标签：java, jsp, date

我们有一个 web_app（在 java 中），我们将提供基于**credit 和 time limit**的访问客户端。

在客户端机器更改系统时间时，应用程序也仍然运行。

要求是如何使用互联网时间检查时间和日期？

我有客户端 IP

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:28:44.910

使用您的服务器时钟作为官方时间的来源。您可以在收到第一个客户请求时开始

# shell - VBA 代码错误“此对象不支持此属性或方法”上的 Cmd

> ID：13984094
> 
> 赞同：0
> 
> 时间：2012-12-21T04:02:03.203
> 
> 标签：shell, vba, excel, command-line, batch-file

在这里，我使用的代码我尝试运行 cmdline 来创建 txt 文件，然后将其导入到 excel 中，它一直在说“这个对象不支持这个属性或方法”

我不知道在哪里修复它我现在卡住了

```
Sub ImportTextFile()  
Dim rPaht As String
Dim rFileName As String
Dim rPaht1 As String
Dim rFileName1 As String

txtFpath = Sheet1.Range("a1").Value
Filesum = "type unixinv* > summary2.txt"

ChDrive "D"
RSP = Shell(Environ$("COMSPEC"), vbNormalFocus)

Application.Wait Now + TimeValue("00:00:03")
SendKeys "CD " & txtFpath & "{ENTER}", True

Application.Wait Now + TimeValue("00:00:04")
SendKeys Filesum & "{ENTER}", True

Application.Wait Now + TimeValue("00:00:04")
SendKeys "exit " & "{ENTER}", True

rPaht = Sheet1.Range("a1")
rFileName = Sheet1.Range("a2")
Sheet1.Cells.Clear
With Sheet4.QueryTables.Add(Connection:= _
    "TEXT;" & rPaht & "\" & rFileName & ".txt", Destination:=Sheet1.Range("$A$4"))
    .Name = Sheet1.Range("C8").Value
    .TextFilePlatform = 874
    .TextFileStartRow = 1
    .TextFileParseType = xlDelimited
    .TextFileOtherDelimiter = ":"
    .Refresh BackgroundQuery:=False
End With
Sheet1.Range("a1") = rPaht
Sheet1.Range("a2") = rFileName
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T12:26:04.520

`Sendkeys`非常不可靠。您正在尝试的内容可以轻松实现，而无需在打开命令窗口后将密钥发送到命令窗口。请参阅下面的代码。它减少了所有多余的代码。

在下面的示例中，我将演示如何在适用的情况下导出`DIR`到`summary2.txt`Change。

```
Sub ImportTextFile()
    Dim txtFpath As String, Filesum As String
    Dim RSP

    'Ex: txtFpath = "D:\MyFolder"
    txtFpath = Sheet1.Range("a1").Value

    Filesum = "cmd.exe /c Type " & txtFpath & "summary2.txt"

    RSP = Shell(Filesum, vbHide)

    rPaht = Sheet1.Range("a1")
    '
    '~~> Rest of your code
    '
End Sub 
```

# wso2 - 如何在 WSO2 MB 中为主题创建持久订阅者

> ID：13984096
> 
> 赞同：0
> 
> 时间：2012-12-21T04:02:13.147
> 
> 标签：wso2, jmx

我使用 WSO2 MB 2.0.1，我尝试将教程中提供的 JMS Java 订阅者扩展为持久订阅者。然后停止 jms 客户端并向主题发送一些消息。但是当我启动 jms 客户端时，它没有收到消息。

有人可以让我知道如何创建持久订阅者。我的要求是当 jms 订阅者上线时接收消息。

我的代码：public void subscribe(String topicName) {

```
 Properties initialContextProperties = new Properties();
    initialContextProperties.put("java.naming.factory.initial",
            "org.wso2.andes.jndi.PropertiesFileInitialContextFactory");
    String connectionString = "amqp://admin:admin@clientID/carbon?brokerlist='tcp://localhost:5672'";
    initialContextProperties.put("connectionfactory.qpidConnectionfactory", connectionString);
    initialContextProperties.put("topic.myWarning", "myWarning");

    try {
        InitialContext initialContext = new InitialContext(initialContextProperties);
        TopicConnectionFactory topicConnectionFactory =
                (TopicConnectionFactory) initialContext.lookup("qpidConnectionfactory");
        TopicConnection topicConnection = topicConnectionFactory.createTopicConnection();
        //topicConnection.setClientID("clientID");
        topicConnection.start();
        TopicSession topicSession =topicConnection.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);

        //Topic topic = topicSession.createTopic(topicName);
        Topic topic =(Topic) initialContext.lookup(topicName);
        TopicSubscriber topicSubscriber =
                topicSession.createDurableSubscriber(topic, "tom");
        TextMessage receivedMessage = (TextMessage)topicSubscriber.receive();
        System.out.println(receivedMessage);
       // topicSubscriber.setMessageListener(new JCOMessageListener(
        //        topicConnection, topicSession, topicSubscriber));

    } catch (NamingException e) {
        e.printStackTrace();
    } catch (JMSException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T08:54:20.447

该链接可能对您有所帮助，

使用 WSO2 ESB 4.6.0 到 WSO2 Message Broker 2.1.0 制作持久主题订阅 [http://abeykoon.blogspot.tw/2013/04/make-durable-topic-subscriptions-using.html](http://abeykoon.blogspot.tw/2013/04/make-durable-topic-subscriptions-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:20:45.543

您的 JMS 客户端完全有效。

WSO2 MB 2.0.1 中的持久主题订阅存在错误。我们已经在 WSO2 MB 2.1.1 版本中修复了该问题，该版本将于今天起一个月内发布。

谢谢。

# java - 仅从 HashMap 打印一个对象

> ID：13984101
> 
> 赞同：1
> 
> 时间：2012-12-21T04:02:51.113
> 
> 标签：java, object, printing, hashmap

我的代码如下所示：

```
public Flight{
String code;
char status;
char type;

   Flight(String code, char status, char type){
    this.code = code;
    this.status = status;
    this.type = type;
   }
 }

public Menu{
 Flight flight1 = new Flight("DL123",'A','D');
 Flight flight2 = new Flight("DL146",'A','I');
 flightMap.put("DL123", flight1)
 flightMap.put("DL146", flight2)
 }

  if(schedule.flightMap.containsKey(decision))
  {

  } 
```

如果用户输入 DL123 并且 containsKey 返回 true，我只想返回**flight1**的对象属性。我怎么能做到这一点？我尝试过覆盖 toString 但因为 toString 只能作为字符串返回，所以我不知道如何返回作为字符的状态和类型属性。

**请询问您是否需要更多信息！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:09:47.043

在类中定义`getter`方法`Flight`，然后：

```
 if(schedule.flightMap.containsKey(decision)){
   Fligth matchingFlight = schedule.flightMap.get(decision);
   String code = matchingFlight.getCode();
   char status = matchingFlight.getStatus();
   char type = matchingFlight.getType();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T04:10:33.887

航班航班 = schedule.flightMap.get(decision);

然后从飞行对象中，您可以检索所有值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T04:15:00.603

你需要的是

```
Flight flight = schedule.flightMap.get(decision); 
```

有了这些，您可以简单地访问对象，因为它们的可见性是默认的，就像这样

```
flight.code
flight.status 
```

但更合乎道德的方式是像这样定义所有变量的getter和setter

```
public void setCode(String code)
{
     this.code = code;
}
public String getCode()
{
    return this.code;
} 
```

这样你就可以使用这个来获取变量

```
String code = flight.getCode(); 
```

**另请参阅**

[为什么在 java 中使用 getter 和 setter](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T04:28:15.933

我试图解决你的问题并得出结论。请参见下面的代码。

```
package com.rais;

import java.util.HashMap;
import java.util.Map;

/**
 * @author Rais.Alam
 * @project Utils
 * @date Dec 21, 2012
 */

public class FlightClient
{
/**
 * @param args
 */
public static void main(String[] args)
{
    Map<String,Flight> flightMaps = new HashMap<String, Flight>();
    Flight flight1 = new Flight("DL123", "STATUS-1", "TYPE-1");
    Flight flight2 = new Flight("DL124", "STATUS-2", "TYPE-2");
    Flight flight3 = new Flight("DL125", "STATUS-3", "TYPE-3");

    flightMaps.put("DL123", flight1);
    flightMaps.put("DL124", flight2);
    flightMaps.put("DL125", flight3);

    System.out.println(getValue(flightMaps, "DL123"));

}

public static String getValue(Map<String,Flight> flightMaps, String key)    
{
    if(flightMaps !=null && flightMaps.containsKey(key))
    {
        return flightMaps.get(key).status;
    }
    else
    {
        throw new RuntimeException("Flight does not exists");
    }

    }
}

    class Flight
    {
    String code;
    String status;
    String type;
    /**
     * @param code
     * @param status
     * @param type
     */
    public Flight(String code, String status, String type)
    {
        super();
        this.code = code;
        this.status = status;
        this.type = type;
    }

} 
```

# c# - 将字符串转换为多级字典

> ID：13984102
> 
> 赞同：2
> 
> 时间：2012-12-21T04:03:01.640
> 
> 标签：c#, parsing, dictionary

我有一个看起来像的文本文件

```
tabs.main="******"
tabs.settings="******"

settings.setting1="******"
settings.setting2="******"
settings.setting3="******"
settings.setting4="******"

settings.setting5.title="******"
settings.setting5.settingoption1="******"
settings.setting5.settingoption2="******" 
```

我想做的就是把它解析成一个多层次的字典。例如，我有一个看起来像这样的根字典，`Dictionary<string, object>`其中我将拥有`Dictionary<string, object>`它们本身的选项卡和设置。以图形形式，我想要的是：

```
Dictionary<string, object>
   -> Dictionary<"tabs", object>
      -> Dictionary<"main", "*******">
      -> Dictionary<"settings", "*******">
   -> Dictionary<"settings", object>
      -> Dictionary<"setting1", "*******"> 
```

等等等等。这可能吗？如果是这样，有人可以给我一个正确方向的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:21:10.647

字典并不是真正旨在以这种方式保存您的数据。您可以创建类来表示您的文件并将数据加载到其中。根据您所展示的内容，这样的事情可能会奏效。

```
public class File
{
    private List<Setting> settings = new List<Setting>();
    public Tab Tab { get; set; }
    public List<Setting> Settings { get{ return settings; } }
}

public class Tab
{
    public string Main{ get; set;}
    public string Settings{ get; set;}
}

public class Setting
{
    private List<string> options = new List<string>();
    public string Value{ get; set; }
    public List<string> Options{ get{ return options;} }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T04:24:49.667

您将遇到的问题是您的某些键需要与值（可能是字符串）一起存储在字典中，其中一些键需要与字典一起存储。

在您的示例中，您列出了：

```
settings.setting5="******"
settings.setting5.settingoption1="******" 
```

这两条线相互矛盾。settings.settings5 将使键 settings5 在字典中存储一个值，但下一行期望 settings5 是其他值的字典。

您可以编写如下代码块：

```
var settings = new Dictionary<string, object>();
var lines = File.ReadAllLines("...");
foreach (var line in lines)
{
    var parts = line.Split(new char[] { '=' }, 2);
    if (parts.Length != 2) continue;

    var keys = parts[0].Split('.');
    var value = parts[1];

    var dict = settings;
    for (int i = 0; i < keys.Length - 1; i++)
    {
        if (!dict.ContainsKey(keys[i]))
            dict.Add(keys[i], new Dictionary<string, object>());
        dict = (Dictionary<string, object>)dict[keys[i]];
    }

    dict.Add(keys[keys.Length - 1], value);
} 
```

1.  它没有任何错误检查。
2.  您会发现它确实填充了您的对象。从中检索值很痛苦。因为您必须将每个结果转换为字符串或另一个字典。

无论哪种方式，您都会发现您很可能希望避免为此目的创建字典字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T04:29:11.980

请考虑使用字典以外的对象，但要回答您的问题。

请注意，此数据结构不允许字典和字符串值具有相同的键。

```
static Dictionary<string,object> Parse(string contents)
{
   var root = new Dictionary<string,object>();

   using (var rdr = new StringReader(contents))
   {
      string line;
      var equals = new [] {'='};
      while(null != (line = rdr.ReadLine()))
      {
         if(!string.IsNullOrEmpty(line))
         {
            var keyValue = line.Split(equals, 2);
            AddValue(root, keyValue[0], keyValue[1]);
         }
      }
   }

   return root;
}

static void AddValue(Dictionary<string,object> dict, string dottedKeys, string value)
{
   string [] keys = dottedKeys.Split('.');
   for(var i = 0; i < keys.Length - 1; i++)
   {
      var key = keys[i];
      dict = GetOrAdd(dict, key);
   }
   dict[keys[keys.Length - 1]] = value;
}

static Dictionary<string,object> GetOrAdd(Dictionary<string,object> parent, string key)
{
   object o;
   Dictionary<string,object> childDict;
   if(parent.TryGetValue(key, out o))
      childDict = (Dictionary<string,object>) o;  // This will throw when adding a dictionary to a value.
   else
      parent[key] = childDict = new Dictionary<string,object>();
   return childDict;
}

static string fileContents=@"
tabs.main=""******""
tabs.settings=""******""

settings.setting1=""******""
settings.setting2=""******""
settings.setting3=""******""
settings.setting4=""******""
settings.setting5=""******""

settings.setting6.settingoption1=""******""
settings.setting6.settingoption2=""******""
"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T04:39:13.483

实际上，我暂时自己最终设法纠正了一些代码，但是由于我讨厌浪费人们的时间来回答这个问题，因此我将 Jason 的问题标记为答案，因为这有点像我想出的，他帮助了我写我的代码！

```
Dictionary<string, object> _dic = new Dictionary<string, object>();
using(StreamReader reader = new StreamReader(file))
{
    string text;
    while ((text = reader.ReadLine()) != null)
    {
        if (text.Equals(String.Empty))
            continue;
        string line = text.Trim();
        string[] keyval = line.Split('=');
        string value = keyval[1].Trim('"');
        string[] keys = keyval[0].Split('.');
        Dictionary<string, object> prevDic = _dic;
        for (int i = 0; i < keys.Length; i++)
        {
            if (i + 1 != keys.Length)
            {
                Dictionary<string, object> temp = new Dictionary<string, object>();
                if (prevDic.ContainsKey(keys[i]))
                {
                    prevDic = prevDic[keys[i]] as Dictionary<string, object>; // Avoids exceptions when trying to cast the string value to a dictionary
                    continue;
                }
                else
                {
                    prevDic.Add(keys[i], temp);
                    prevDic = temp;
                }
            }
            else
            {
                prevDic.Add(keys[i], value);
            }
        }
    }
} 
```

感谢大家在这方面的帮助！

# jquery - 如何在 wordpress 插件中添加工具提示

> ID：13984104
> 
> 赞同：1
> 
> 时间：2012-12-21T04:03:29.977
> 
> 标签：jquery, html, css, wordpress

我正在尝试在 wordpress 插件中为自己添加额外的功能，但我不明白我该怎么做，我对 jQuery 不太擅长..

我正在尝试添加工具提示，但是如何，我不知道，请你们指导我。

我在脚本中添加了以下几行：

```
wp_enqueue_script( 'jquery_ui_tooltip', CHILD_URL . '/widgets/genesis-tabs/jquery-ui.js', false, '1.9.2' ); 
```

**和**

```
wp_register_style( 'jquery_ui_styles', CHILD_URL . '/widgets/genesis-tabs/jquery-ui.css' );
wp_enqueue_style( 'jquery_ui_styles' ); 
```

这些是插件的代码

```
<?php
add_action( 'wp_head', 'head_slideshow', 1 );
function head_slideshow() {
    // javascript
    wp_enqueue_script( 'tabs_script', CHILD_URL . '/widgets/genesis-tabs/tabs.js', array( 'jquery' ), '1.3.2' );
    wp_enqueue_script( 'jquery_ui_tooltip', CHILD_URL . '/widgets/genesis-tabs/jquery-ui.js', false, '1.9.2' );
    // styles
    wp_register_style( 'tabs_styles', CHILD_URL . '/widgets/genesis-tabs/style.css' );
    wp_register_style( 'jquery_ui_styles', CHILD_URL . '/widgets/genesis-tabs/jquery-ui.css' );
    wp_enqueue_style( 'tabs_styles' );
    wp_enqueue_style( 'jquery_ui_styles' );
}

add_action( 'widgets_init', 'TabsWidgetRegister' );
function TabsWidgetRegister() {
    register_widget( 'TabsWidget' );
}

class TabsWidget extends WP_Widget {

    function TabsWidget() {
        $widget_ops = array( 'classname' => 'tabs-widget', 'description' => __('Genesis - Home Featured') );
        $control_ops = array( 'width' => 300, 'height' => 250, 'id_base' => 'tabs-widget' );
        $this->WP_Widget( 'tabs-widget', __('Genesis - Home Featured'), $widget_ops, $control_ops );
    }

    function widget( $args, $instance ) {
        extract( $args );
        echo $before_widget;
    ?>

    <!-- .home-left -->
    <div class="carousel-slider-preview">
    <?php
        $args = array (
                    'post_type' => 'post',
                    'cat' => $instance['posts_cat'],
                    'showposts' => $instance['posts_num'],
                    'orderby' => $instance['orderby'],
                    'order' => $instance['order']
                );  
        $posts_list = new WP_Query($args);
        $i = 1;
        if($posts_list->have_posts()) : while($posts_list->have_posts()) : $posts_list->the_post();
    ?>
        <!-- .tab_content -->
        <div id="tab<?php echo $i; ?>" class="tab_content">
            <!-- .image -->
            <div class="image">
                <a href="#tab<?php echo $i; ?>"><?php genesis_image("format=html&size=Slider"); ?></a>
            </div>

            <!-- .text -->
            <div>

    <?php
            if ( !empty( $instance['show_byline'] ) && !empty( $instance['post_info'] ) ) :
                printf( '<p class="byline post-info">%s</p>', do_shortcode( esc_html( $instance['post_info'] ) ) );
            endif;

            if(!empty($instance['show_title'])) :
                printf( '<h2><a href="%s" title="%s">%s</a></h2>', get_permalink(), the_title_attribute('echo=0'), the_title_attribute('echo=0') );
            endif;

            if(!empty($instance['show_content'])) :
            if($instance['show_content'] == 'excerpt') :
                the_excerpt();
            elseif($instance['show_content'] == 'content-limit') :
                the_content_limit( (int)$instance['content_limit'], esc_html( $instance['more_text'] ) );
            else :
                the_content( esc_html( $instance['more_text'] ) );
            endif;
            endif;
    ?>
            </div>
            <!-- end .home_left_content -->
        </div>
        <!-- end .tab_content -->       

    <?php
            $i += 1;
            endwhile; 
            endif; 
    ?>
    </div>
    <!-- end .home-left -->

    <div class="clear"></div>

    <!-- .carousel-slider-thumbs -->
    <div class="carousel-slider-thumbs">
        <ul class="tabs">
        <?php
                $i = 1; 
                if($posts_list->have_posts()) : while($posts_list->have_posts()) : $posts_list->the_post();
        ?>
        <li><a href="#tab<?php echo $i; ?>"><?php genesis_image("format=html&size=Small"); ?></a></li>  
        <?php
            $i += 1;
            endwhile;
            endif;
        ?>
        </ul>
    </div>
    <!-- end .carousel-slider-thumbs -->

        <div class="clear"></div>
    <?php
        echo $after_widget;
    }

    function form( $instance ) {

        // ensure value exists
        // 'heading' => '',  ( Extended by Muzammil Hussain )
        $instance = wp_parse_args( (array)$instance, array(
            'heading' => 'Featured Area', 
            'title' => '',
            'show_title' => 0,
            'posts_cat' => '',
            'posts_num' => 0,
            'orderby' => '',
            'order' => '',
            'show_byline' => 0,
            'post_info' => '[post_date] ' . __('By', 'genesis') . ' [post_author_posts_link] [post_comments]',
            'show_content' => 'excerpt',
            'content_limit' => '',
            'more_text' => __('[Read More...]', 'genesis')
        ) );

        ?>

    <p>
        <label for="<?php echo $this->get_field_id( 'heading' ); ?>"><?php _e('Title:'); ?></label>
        <input type="text" id="<?php echo $this->get_field_id( 'heading' ); ?>" name="<?php echo $this->get_field_name( 'heading' ); ?>" value="<?php echo $instance['heading']; ?>" class="widefat" />
    </p>

    <p>
        <label for="<?php echo $this->get_field_id( 'posts_num' ); ?>"><?php _e('Number of Posts to Show:'); ?></label>
        <input class="widefat" type="text" id="<?php echo $this->get_field_id( 'posts_num' ); ?>" name="<?php echo $this->get_field_name( 'posts_num' ); ?>" value="<?php echo $instance['posts_num']; ?>" style="width:30px;" />
    </p>

    <p>
      <label for="<?php echo $this->get_field_id('orderby'); ?>"><?php _e('Order By'); ?>:</label>
      <select class="widefat" id="<?php echo $this->get_field_id('orderby'); ?>" name="<?php echo $this->get_field_name('orderby'); ?>">
        <option style="padding-right:10px;" value="date" <?php selected('date', $instance['orderby']); ?>><?php _e('Date'); ?></option>
        <option style="padding-right:10px;" value="title" <?php selected('title', $instance['orderby']); ?>><?php _e('Title'); ?></option>
        <option style="padding-right:10px;" value="parent" <?php selected('parent', $instance['orderby']); ?>><?php _e('Parent'); ?></option>
        <option style="padding-right:10px;" value="ID" <?php selected('ID', $instance['orderby']); ?>><?php _e('ID'); ?></option>
        <option style="padding-right:10px;" value="comment_count" <?php selected('comment_count', $instance['orderby']); ?>><?php _e('Comment Count'); ?></option>
        <option style="padding-right:10px;" value="rand" <?php selected('rand', $instance['orderby']); ?>><?php _e('Random'); ?></option>
      </select>
    </p>

        <p>
      <label for="<?php echo $this->get_field_id('order'); ?>"><?php _e('Sort Order'); ?>:</label>
      <select class="widefat" id="<?php echo $this->get_field_id('order'); ?>" name="<?php echo $this->get_field_name('order'); ?>">
        <option style="padding-right:10px;" value="DESC" <?php selected('DESC', $instance['order']); ?>><?php _e('Descending (3, 2, 1)'); ?></option>
        <option style="padding-right:10px;" value="ASC" <?php selected('ASC', $instance['order']); ?>><?php _e('Ascending (1, 2, 3)'); ?></option>
      </select>
    </p>

    <p>
        <input class="checkbox" id="<?php echo $this->get_field_id('show_title'); ?>" type="checkbox" name="<?php echo $this->get_field_name('show_title'); ?>" value="1" <?php checked(1, $instance['show_title']); ?>/> <label for="<?php echo $this->get_field_id('show_title'); ?>"><?php _e('Show Post Title', 'genesis'); ?></label>
        <br>    
        <input class="checkbox" id="<?php echo $this->get_field_id('show_byline'); ?>" type="checkbox" name="<?php echo $this->get_field_name('show_byline'); ?>" value="1" <?php checked(1, $instance['show_byline']); ?>/> <label for="<?php echo $this->get_field_id('show_byline'); ?>"><?php _e('Show Post Byline'); ?></label>
    </p>
    <p>
      <input type="text" id="<?php echo $this->get_field_id('post_info'); ?>" name="<?php echo $this->get_field_name('post_info'); ?>" value="<?php echo esc_attr($instance['post_info']); ?>" style="width: 99%;" />
    </p>

    <p>
      <label for="<?php echo $this->get_field_id( 'posts_cat' ); ?>"><?php _e('Category:'); ?></label>
        <?php wp_dropdown_categories(array('name' => $this->get_field_name('posts_cat'), 'selected' => $instance['posts_cat'], 'orderby' => 'Name' , 'hierarchical' => 1, 'show_option_all' => __("All Categories"), 'hide_empty' => '0')); ?>
        </p>

    <p>
      <label for="<?php echo $this->get_field_id('show_content'); ?>"><?php _e('Content Type', 'genesis'); ?>:</label>
      <select class="widefat" id="<?php echo $this->get_field_id('show_content'); ?>" name="<?php echo $this->get_field_name('show_content'); ?>">
        <option value="content" <?php selected('content' , $instance['show_content'] ); ?>><?php _e('Show Content', 'genesis'); ?></option>
        <option value="excerpt" <?php selected('excerpt' , $instance['show_content'] ); ?>><?php _e('Show Excerpt', 'genesis'); ?></option>
        <option value="content-limit" <?php selected('content-limit' , $instance['show_content'] ); ?>><?php _e('Show Content Limit', 'genesis'); ?></option>
        <option value="" <?php selected('' , $instance['show_content'] ); ?>><?php _e('No Content', 'genesis'); ?></option>
      </select>
      <br />
      <br />
      <label for="<?php echo $this->get_field_id('content_limit'); ?>"><?php _e('Limit content to', 'genesis'); ?></label> 
      <input class="widefat" type="text" id="<?php echo $this->get_field_id('image_alignment'); ?>" name="<?php echo $this->get_field_name('content_limit'); ?>" value="<?php echo esc_attr(intval($instance['content_limit'])); ?>" size="3" /> <?php _e('characters', 'genesis'); ?>
    </p>

        <p>
      <label for="<?php echo $this->get_field_id('more_text'); ?>"><?php _e('More Text (if applicable)', 'genesis'); ?>:</label>
      <input class="widefat" type="text" id="<?php echo $this->get_field_id('more_text'); ?>" name="<?php echo $this->get_field_name('more_text'); ?>" value="<?php echo esc_attr($instance['more_text']); ?>" />
    </p>

    <?php
    }
}

?> 
```

它的jQuery文件是：

```
var $jq=jQuery.noConflict();

$jq(document).ready(function(){
    $jq(".tab_content").hide();
    $jq("ul.tabs li:first").addClass("active").show();
    $jq(".tab_content:first").show();
    $jq("ul.tabs li").click(function(){
        $jq("ul.tabs li").removeClass("active");
        $jq(this).addClass("active");
        $jq(".tab_content").hide();

        var activeTab = $jq(this).find("a").attr("href");
        $jq(activeTab).fadeIn();

    return false
    })
}); 
```

当有人将鼠标悬停在选项卡小图像上时，我试图在工具提示中显示每个图像的描述，，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:56:22.940

如果您使用[jQuery UI](http://jqueryui.com/tooltip/)工具提示，我认为该功能就像将其添加到整个文档一样简单，并且它将使用任何元素的标题属性作为提示。在 jQuery 文件中，在后面添加这一行`$jq(document).ready(function(){`

```
 $jq(document).tooltip(); 
```

然后，只需确保任何图像都具有标题属性。

```
<img src="someimage.jpg" title="Here is a great image"> 
```

# actionscript-3 - Away 3d 中的滑动手势支持

> ID：13984110
> 
> 赞同：0
> 
> 时间：2012-12-21T04:04:27.223
> 
> 标签：actionscript-3, away3d

谁能指出任何可能有助于创建支持滑动手势的基本 Away 3d 应用程序的教程？我只想让用户通过滑动来旋转 3d 立方体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:11:11.423

我想你会使用这样的东西：

```
private var _cube:ObjectContainer3D;
private var _startTouchX:Number;

public function ThreeDimensionViewer(){
    _cube = new ObjectContainer3D(INSERT CUBE HERE);
    var cam:Camera3D = new Camera3D();
    var scene:Scene3D = new Scene3D();
    scene.addChild(cam);
    scene.addChild(_cube);
    var view:View3D = new View3D(scene, cam);

    view.addEventListener(TouchEvent.TOUCH_BEGIN,startTouch);
}
private function startTouch(e:TouchEvent):void {
    _startTouchX = e.stageX;
    view.removeEventListener(TouchEvent.TOUCH_BEGIN,startTouch);
    view.addEventListener(TouchEvent.TOUCH_MOVE,moveCube);
    view.addEventListener(TouchEvent.TOUCH_END,stopTouch);
}
private function moveCube(e:TouchEvent):void {
    _cube.rotateY = _startTouchX - e.stageX;
}
private function stopTouch(e:TouchEvent):void {
    view.addEventListener(TouchEvent.TOUCH_BEGIN,startTouch);
    view.removeEventListener(TouchEvent.TOUCH_MOVE,moveCube);
    view.removeEventListener(TouchEvent.TOUCH_END,stopTouch);
} 
```

很确定您会使用 TouchEvent (BEGIN, MOVE, END) 并像通常使用 MouseEvent 一样进行计算。我没有测试过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:20:01.397

Away3D 没有内置的手势支持。您将需要集成 Flash 的手势（很痛苦）或使用像[Gestouch这样的库](https://github.com/fljot/Gestouch)

# command-line - 使用命令行工具（freearc）批量提取弧文件？

> ID：13984111
> 
> 赞同：0
> 
> 时间：2012-12-21T04:04:28.267
> 
> 标签：command-line, automatic-ref-counting, extract, archive

我安装了 freearc 的命令行工具插件，并希望对 .arc 文件列表运行批量提取，并且每个文件都有自己的密码。我需要解决这些问题： 1）我使用什么 exe？2) 如何指定密码？3) 如何指定目标目录？4）如何指定覆盖现有文件？

由于我想要实际输入 CMD 的 FULL 命令，因此我希望您在回答中使用以下信息： 存档名称：E:\GAMES\TEST.arc 目标：E:\EXTRACTION\TEST 密码：测试123

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-20T01:19:00.147

arc x -o+ file.arc //this for extra in path c:\users\name_user

# php - 我怎样才能使这个复选框列表变成一个无序列表？

> ID：13984118
> 
> 赞同：1
> 
> 时间：2012-12-21T04:05:21.987
> 
> 标签：php, css, wordpress

我有一个非常简单的问题。我在一个带有标签的网站上创建了几个复选框，我希望它们都是垂直的。现在他们都挨着。我认为理想情况下，每个框都需要被视为一个有序列表，然后我可以使用 CSS 对其进行调整。

但是，在 Wordpress 中使用 PHP 代码时，我遇到了麻烦。

该页面可以在这里找到：[http ://www.expeditionersafaris.com/placecategory/all-safaris/?multi_city=15](http://www.expeditionersafaris.com/placecategory/all-safaris/?multi_city=15)

谢谢，

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:15:27.000

```
Just put the checkboxes inside <ul> tags
<ul>
<li><input type="checkbox" name="option1" value="opt1"> opt1</li>
<li><input type="checkbox" name="option2" value="opt2"> opt2</li>

</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:10:32.197

只需将复选框放在无序列表中：

```
<ul>
  <li><input ...></li>
  <li><input ...></li>
  <li><input ...></li>
</ul> 
```

这将为您提供一些不错的 SEO 友好代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T04:12:25.023

像这样将所有复选框放在`<li>`标签内

```
<ul>
   <li><input type='checkbox'></li>
   <li><input type='checkbox'></li>
   <li><input type='checkbox'></li>
</ul> 
```

# ms-access - WAN 上的错误 3078

> ID：13984120
> 
> 赞同：2
> 
> 时间：2012-12-21T04:05:35.187
> 
> 标签：ms-access, vb6, error-handling, jet, wan

在通过 WAN`VB6`访问数据库文件的应用程序中，由于网络连接问题`MDB`，偶尔会出现错误：`3078`

> 错误 3078：Microsoft Jet 数据库引擎找不到输入表或查询“table_name”。确保它存在并且其名称拼写正确。

应用程序应该如何处理这种错误？它应该只是显示一条消息建议用户稍后再试，还是应用程序应该再尝试几次数据库查询然后放弃？

VB6-MDB 应用程序中是否有办法在全局范围内处理此问题，而不必为应用程序中的每个查询编写一个特殊的错误处理程序？

# ruby - 线程和类

> ID：13984125
> 
> 赞同：-2
> 
> 时间：2012-12-21T04:06:07.743
> 
> 标签：ruby, multithreading, class

我是红宝石新手。我创建了一个名为 Station 的类，如下所示：

```
class Station

  def initialize()
    @no_crates = 5
    while(true)
      sleep(1)
      @no_crates = Integer(@no_crates) + 1
    end
  end

  def get_no_crates()
    return @no_crates
  end
end 
```

变量@no_crates 应该随着时间的推移而增加，所以我想在单独的线程中运行这些类。我怎样才能做到这一点，然后不时调用 get_no_crates() 函数来获取@no_crates？

我尝试了以下但ofcouse它不工作

```
st =  Thread.new{ Station.new()}
while(true)
  sleep(1)
  puts st.get_no_crates()
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T05:10:40.327

看到这个，试着理解你做错了什么。

```
class Station

  def initialize()
    @no_crates = 5
  end

  def run
    while(true)
      sleep(1)
      @no_crates = Integer(@no_crates) + 1
    end
  end

  def get_no_crates()
    return @no_crates
  end
end

station = Station.new
st =  Thread.new{ station.run }
while(true)
  sleep(1)
  puts station.get_no_crates()
end 
```

这是一个更好看的版本

```
class Station

  attr_reader :no_crates

  def initialize
    @no_crates = 5
  end

  def run
    loop do
      sleep 1
      @no_crates = @no_crates + 1
    end
  end
end

station = Station.new
st =  Thread.new{ station.run }
loop do
  sleep 1 
  puts station.no_crates
end 
```

# javascript - 验证gridview中选中的项目

> ID：13984127
> 
> 赞同：1
> 
> 时间：2012-12-21T04:06:52.207
> 
> 标签：javascript, asp.net, validation, gridview

我有 Gridview，其中一行中有两个文本框和一个复选框。并且我希望在选中该复选框时对两个文本框进行必填字段验证，否则我不需要验证。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" CssClass="grvStyle"
    Width="100%" OnRowDataBound="GridView1_RowDataBound">
    <EmptyDataTemplate>
        <asp:Label ID="lblnorow" runat="server" Text="Record not Found"></asp:Label>
    </EmptyDataTemplate>
    <Columns>
        <asp:TemplateField HeaderText="SrNo." ItemStyle-Width="30px" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:Label ID="lblsrno" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Dates" HeaderText="Dates">
            <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
            <ItemStyle HorizontalAlign="Center"></ItemStyle>
        </asp:BoundField>
        <asp:TemplateField HeaderText="Registration Closing Date">
            <ItemTemplate>
                <asp:TextBox ID="txtCloseDate" runat="server" CssClass="datepicker"></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator10" runat="server" ValidationGroup="VGrpSelect"
                    ControlToValidate="txtCloseDate" ErrorMessage="Registration Closing Date is required"
                    Display="none" SetFocusOnError="True">
                </asp:RequiredFieldValidator>
                <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="txtCloseDate"
                    Display="None" ErrorMessage="Invalid Registration Closing Date Format" SetFocusOnError="True"
                    ValidationGroup="VGrpSelect" ValidationExpression="([1-9]|0[1-9]|[12][0-9]|3[01])[- /.]([1-9]|0[1-9]|1[012])[- /.](19|20|30)\d\d">
                </asp:RegularExpressionValidator>
            </ItemTemplate>
            <HeaderStyle HorizontalAlign="Center" />
            <ItemStyle HorizontalAlign="Center" />
        </asp:TemplateField>
        <asp:TemplateField HeaderText="No of Pax">
            <ItemTemplate>
                <asp:TextBox ID="txtNoOfPax" runat="server" Width="50"></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server" ValidationGroup="VGrpSelect"
                    ControlToValidate="txtNoOfPax" ErrorMessage="No of Pax is required"
                    Display="none" SetFocusOnError="True">
                </asp:RequiredFieldValidator>
                <asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server" ValidationGroup="VGrpSelect"
                    SetFocusOnError="True" Display="None" ErrorMessage="No of Pax must have Numeric value"
                    ControlToValidate="txtNoOfPax" ValidationExpression="\d*">
                </asp:RegularExpressionValidator>
            </ItemTemplate>
            <HeaderStyle HorizontalAlign="Center" />
            <ItemStyle HorizontalAlign="Center" />
        </asp:TemplateField>
        <asp:TemplateField HeaderStyle-HorizontalAlign="Center" HeaderStyle-Width="60px"
            ItemStyle-HorizontalAlign="Center">
            <HeaderTemplate>
                Select<asp:CheckBox ID="chkHeaderSelect" runat="server" onclick="SetCheckBox(this)" />
            </HeaderTemplate>
            <ItemTemplate>
                <asp:CheckBox ID="chkSelect" runat="server" onclick="CheckCheckBox()" />
                <asp:HiddenField ID="hidf" runat="server" Value='<%# Eval("Dates") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
    <RowStyle CssClass="data-row" />
    <AlternatingRowStyle CssClass="alt-data-row" />
    <PagerStyle HorizontalAlign="Right" ForeColor="Black" />
</asp:GridView>

<script type="text/javascript">
    function GVal(chk, req) {
        if (chk.Checked == true) {
            req.Enabled = true;
        }
        else {
            req.Enabled = false;
        }
    }
</script> 
```

在gridview的rowdatabound事件中

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Label lblSrNo = (Label)e.Row.FindControl("lblSrNo");
        int srno = e.Row.DataItemIndex + 1;
        lblSrNo.Text = srno.ToString();

        CheckBox chkSelect = (CheckBox)e.Row.FindControl("chkSelect");
        TextBox txtCloseDate = (TextBox)e.Row.FindControl("txtCloseDate");
        RequiredFieldValidator required = (RequiredFieldValidator)e.Row.FindControl("RequiredFieldValidator10");
        chkSelect.Attributes.Add("onclick", "javascript:GVal(" + chkSelect.ClientID + "," + required.ClientID + ");");
    }
} 
```

我做了类似的事情，但它显示了所有行的验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:21:40.143

```
 function GVal(chk, req) {

        ValidatorEnable(document.getElementById(req),document.getElementById(chk).checked);

} 
```

您可以在此处找到更多详细信息 [ASP.NET 深度验证]：http: [//msdn.microsoft.com/en-us/library/aa479045.aspx](http://msdn.microsoft.com/en-us/library/aa479045.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:16:36.720

您可以使用自定义验证器和 javascript/jQuery。这可以通过服务器端每行注入。这个[SO post](https://stackoverflow.com/questions/2227443/control-names-in-a-custom-validator-net-client-side-validation)可能可以帮助你解决这个问题。

# python - 与 InitSpider 的scrapy登录问题

> ID：13984131
> 
> 赞同：1
> 
> 时间：2012-12-21T04:07:11.720
> 
> 标签：python, scrapy

我正在尝试使用`InitSpider`. 由于某种原因，`InitSpider`它总是无法登录。我的代码类似于以下帖子中的答案：

[在使用 Scrapy 进行身份验证时爬取 LinkedIn](https://stackoverflow.com/questions/10953991/crawling-linkedin-while-authenticated-with-scrapy)

我在日志中看到的响应是这样的：

```
2012-12-20 22:56:53-0500 [linked] DEBUG: Redirecting (302) to <GET https://example.com/> from <POST https://example.com/> 
```

使用上面帖子中的代码，我有相同`init_request`的`login`、 和`check_login_response`功能。我可以通过日志语句看到它到达了`login`函数，但它似乎永远不会到达`check_login_response`函数。

当我使用 重新实现代码`BaseSpider`并`FormRequest`在`parse`函数中执行时，我可以毫无问题地登录。是否有一个原因？还有什么我应该做的吗？为什么我会因为使用 登录而获得重定向`InitSpider`？

**[编辑]**

```
class DemoSpider(InitSpider):
    name = 'linked'
    login_page = # Login URL
    start_urls = # All other urls

    def init_request(self):
        #"""This function is called before crawling starts."""
        return Request(url=self.login_page, callback=self.login)

    def login(self, response):
        #"""Generate a login request."""
        return FormRequest.from_response(response, 
            formdata={'username': 'username', 'password': 'password'},
            callback=self.check_login_response)

    def check_login_response(self, response):
        #"""Check the response returned by a login request to see if we are successfully logged in."""
        if "Sign Out" in response.body:
            self.log("\n\n\nSuccessfully logged in. Let's start crawling!\n\n\n")
            # Now the crawling can begin..
            return self.initialized()
        else:
            self.log("\n\n\nFailed, Bad times :(\n\n\n")
            # Something went wrong, we couldn't log in, so nothing happens.

    def parse(self, response):
        self.log('got to the parse function') 
```

以上是我的蜘蛛代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:20:25.073

在为此苦苦挣扎后，我想通了，并在我的博客上发布了解决方案：

[http://tmblr.co/ZjkSZteCOTyH](http://tmblr.co/ZjkSZteCOTyH)

基本上我使用`BaseSpider`并覆盖了`start_requests`处理登录的方法。

# javascript - onmousedown 动态生成的 html 元素

> ID：13984136
> 
> 赞同：1
> 
> 时间：2012-12-21T04:07:52.623
> 
> 标签：javascript, jquery, html, xml, mousedown

我正在使用 jQuery.ajax 读取 XML 文件并将其呈现为 HTML。

下面的代码为 XML 中的每个数据记录生成一个按钮表：

```
$(xml).children('run').each(function() {
    var runname = $(this).children('name').text();

    buttonHtml = '<tr><td class="expbutton" id="runExpButton" onmousedown="myFunc(runname)">Click me</td></tr>';

    $('#Runs').append(buttonHtml);
});​ 
```

不难看出我想在这里实现什么。但显然它不起作用。

我的问题是如何在 jQuery 中实现这一点？如果我使用 .live 或 .on 方法，我将无法访问局部变量，例如“runname”。

**[编辑]**

尝试使用 jQuery.data()：

```
$(xml).children('run').each(function() {
    var runname = $(this).children('name').text();

    buttonHtml = '<tr><td class="expbutton" id="runExpButton" onmousedown="myFunc(runname)">Click me</td></tr>';
    $('#runExpButton').data('runname', runname);
    $('#Runs').append(buttonHtml);
});​

$('#runExpButton').live('click',function() {
    alert($(this).data("runname"));
}); 
```

它似乎不起作用？只有一个按钮具有正确的数据值。

因为所有按钮都有相同的 id，我怀疑 .data() 不适用于这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:12:41.123

我相信你正在寻找的是 jQuery [.data()](http://api.jquery.com/data/)

您可以存储 html 元素的数据，然后在单击该元素时拉入该数据。

一个例子是

```
$(xml).children('run').each(function(index) {
    var runname = $(this).children('name').text();
    buttonHtml = '<tr><td class="expbutton" id="runExpButton'+index+'">Click me</td></tr>';
    $('#Runs').append(buttonHtml);
    $('#runExpButton'+index).data('runname', runname);
});​

$(document).on('click', '.expbutton', function(){
     alert($(this).data('runname'));
}); 
```

我编辑了您的代码，为您要添加到表中的每个单元格添加唯一 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:25:42.663

您可以将 HTML 更改为类似

```
buttonHtml = '<tr><td class="expbutton" id="runExpButton" data-name="' + runname + '">Click me</td></tr>'; 
```

然后，正如 Blake 正确指出的那样，使用 $(element).data('name') 来获取该值。因此，将事件与 .live 绑定，读取数据名称，获利！

# mysql - Can I execute query using two databases in MySQL?

> ID：13984138
> 
> 赞同：0
> 
> 时间：2012-12-21T04:08:14.680
> 
> 标签：mysql, sql

I've never tried this but I'm currently considering database design and wanted to know if its possible to run SQL Queries against two separate MySQL Databases on the same or different Server/Cluster?

Also what are speed issues with these types of configurations (cross database)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:21:18.270

**Yes**, why not, you can use same query for different MySql Database, all you need is their authentication to access that particular database. I mean to say, the `username` and `password` for each database. Like in `php` we use these script to connect our database.

```
<?php
$hostname = 'localhost';  //server       
$dbname   = 'myphp';   //database
$username = 'root';             //username
$password = '';                 //password
mysql_connect($hostname, $username, $password) or DIE('Connection to host is failed, perhaps the service is down!');
mysql_select_db($dbname) or DIE('Database name is not available!');
?> 
```

So, you need to create different connection script and change them accordingly. As you see,in my connection script `hostname` is the server location (generally it is an IP address, where your server is), currently it is set to `localhost` (you can change it to 127.0.0.1), since my computer itself serve as a server. So, you need to change the server details only (if database, username and password are same for all).

Now, coming to next part of your question i.e. speed issue, so i would say, it depends on the server, how much time it takes to respond. There are many factors (like number of user, server respond time and etc) that affects the speed issue.

# java - 如何在android中获取正确的路径文件

> ID：13984140
> 
> 赞同：7
> 
> 时间：2012-12-21T04:09:15.640
> 
> 标签：java, android

我的代码如下::

```
Scanner sc = null;
try {
    sc = new Scanner(new File("assets/mainmenu/readSourceFile.txt"));
} catch (FileNotFoundException e1) {
    // TODO Auto-generated catch block
    System.out.println(e1.toString());
    e1.printStackTrace();
} 
```

然后，logcat 显示异常`java.io.FileNotFoundException`

如何找到我的文件？我试过了

`sc = new Scanner(new File("mainmenu/readSourceFile.txt"));`

但是，它仍然抛出`FilenotFoundException`

我的文件在文件夹 assets/mainmenu/readSourceFile.txt

我试过这个::

```
private InputStream is;
try {
        is = this.getResources().getAssets().open("mainmenu/readSourceFile.txt");
    } catch (IOException e) {
        e.toString();
    } 
```

我使用 getAssets 访问 android 中的资产文件。但是，如果我使用，我怎么能假设读取文本文件`InputStream`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:15:48.457

你试试这个......希望它会奏效

```
sc = new Scanner(new File("file:///android_asset/mainmenu/readSourceFile.txt"); 
```

编辑试试这个

```
AssetFileDescriptor descriptor = getAssets().openFd("mainmenu/readSourceFile.txt");
FileReader reader = new FileReader(descriptor.getFileDescriptor()); 
```

从这里复制 [资产文件夹路径](https://stackoverflow.com/questions/4789325/android-path-to-asset-txt-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:23:43.343

您无法访问`assets`Android 应用程序的文件夹，就好像它们是文件系统上的常规文件一样（提示：它们不是）。相反，您需要在活动/应用程序上下文中使用[`AssetManager`](http://developer.android.com/reference/android/content/res/AssetManager.html).Call`getAssets()`来获取`AssetManager`.

一旦你有了这个，你就可以使用`open("mainmenu/readSourceFile.txt")`来获得一个`InputStream`.

您现在可以`InputStream`像阅读其他任何内容一样阅读此内容。[Apache Commons IO](http://commons.apache.org/io/description.html)是一个用于处理输入和输出流的优秀库。根据您想要获取数据的方式，您可以尝试：

*   将整个文件读入一个字符串：

    ```
    try {
        String contents = IOUtils.toString(in);
    } finally {
        IOUtils.closeQuietly(in);
    } 
    ```

*   将整个文件读入字符串列表，每行一个：

    ```
    try {
        List<String> lines = IOUtils.readLines(in);
    } finally {
        IOUtils.closeQuietly(in);
    } 
    ```

*   一次遍历文件一行：

    ```
    try {
        LineIterator it = IOUtils.lineIterator(in, "UTF-8");
        while (it.hasNext()) {
            String line = it.nextLine();
            // do something with line
        }
    } finally {
        IOUtils.closeQuietly(in);
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T15:13:27.053

我遇到过同样的问题。我注意到该文件不应包含层次结构。如果将来有人遇到同样的问题，这对我有用。`

```
 InputStream is=null;

    try {
        is=activity.getAssets().open("fileInAssets.dat");
    } catch (IOException e1) {
        Log.e(TAG, "Erro while openning hosts file.");
        e1.printStackTrace();
    } 
```

`

# java - 如何在 Java 中将数组写入 OutputStream？

> ID：13984142
> 
> 赞同：7
> 
> 时间：2012-12-21T04:09:22.927
> 
> 标签：java, sockets, outputstream

我想发送多个随机值`Socket`。我认为数组是发送它们的最佳方式。但我不知道如何将数组写入 Socket `OutputStream`？

我的 Java 类：

导入 java.io.ByteArrayOutputStream；导入 java.io.IOException；导入 java.io.InputStream；导入 java.net.Socket；导入java.io.*；导入 java.util.Random；

```
public class NodeCommunicator {

    public static void main(String[] args) {
        try {
            Socket nodejs = new Socket("localhost", 8181);

            Random randomGenerator = new Random();
            for (int idx = 1; idx <= 1000; ++idx){
                Thread.sleep(500);
                int randomInt = randomGenerator.nextInt(35);
                sendMessage(nodejs, randomInt + " ");
                System.out.println(randomInt);
            }

            while(true){
                Thread.sleep(1000);
            }
        } catch (Exception e) {
            System.out.println("Connection terminated..Closing Java Client");
            System.out.println("Error :- "+e);
        }
    }

    public static void sendMessage(Socket s, String message) throws IOException {
        s.getOutputStream().write(message.getBytes("UTF-8"));
        s.getOutputStream().flush();
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T05:19:27.070

使用 java.io.DataOutputStream / DataInputStream 对，他们知道如何读取整数。以长度 + 随机数的数据包形式发送信息。

发件人

```
Socket sock = new Socket("localhost", 8181);
DataOutputStream out = new DataOutputStream(sock.getOutputStream());
out.writeInt(len);
for(int i = 0; i < len; i++) {
      out.writeInt(randomGenerator.nextInt(35))
... 
```

接收者

```
 DataInputStream in = new DataInputStream(sock.getInputStream());
 int len = in.readInt();
 for(int i = 0; i < len; i++) {
      int next = in.readInt();
 ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T05:41:21.633

Java 数组实际上是`Object`s 并且它们实现了`Serializable`接口。因此，您可以序列化您的数组，获取字节并通过套接字发送这些字节。这应该这样做：

```
public static void sendMessage(Socket s, int[] myMessageArray)
   throws IOException {
  ByteArrayOutputStream bs = new ByteArrayOutputStream();
  ObjectOutputStream os = new ObjectOutputStream(bs);
  os.writeObject(myMessageArray);
  byte[] messageArrayBytes = bs.toByteArray();
  s.getOutputStream().write(messageArrayBytes);
  s.getOutputStream().flush();
} 
```

真正巧妙的是，它不仅适用于任何对象，`int[]`而且适用于任何`Serializable`对象。

**编辑：** 再想一想，这更简单：

*发件人*：

```
public static void sendMessage(Socket s, int[] myMessageArray)
   throws IOException {
  OutputStream os = s.getOutputStream();  
  ObjectOutputStream oos = new ObjectOutputStream(os);  
  oos.writeObject(myMessageArray); 
} 
```

*接收器*：

```
public static int[] getMessage(Socket s)
   throws IOException {
  InputStream is = s.getInputStream();  
  ObjectInputStream ois = new ObjectInputStream(is);  
  int[] myMessageArray = (int[])ois.readObject(); 
  return myMessageArray;
} 
```

我也留下我的第一个答案（它也可以工作并且）它对于将对象写入 UDP`DatagramSockets`和`DatagramPackets`没有流的地方很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T04:24:47.883

我建议`int`使用一些分隔符简单地连接字符串中的值，例如`@@`，然后立即传输最终连接的字符串。在接收端，只需使用相同的分隔符拆分字符串即可`int[]`返回，例如：

```
 Random randomGenerator = new Random();
    StringBuilder numToSend = new StringBuilder("");
    numToSend.append(randomGenerator.nextInt(35));

    for (int idx = 2; idx <= 1000; ++idx){
        Thread.sleep(500);
        numToSend.append("@@").append(randomGenerator.nextInt(35));
    }
    String numsString = numToSend.toString();
    System.out.println(numsString);
    sendMessage(nodejs, numsString); 
```

在接收端，获取您的字符串并拆分为：

```
 Socket remotejs = new Socket("remotehost", 8181);
   BufferedReader in = new BufferedReader(
                               new InputStreamReader(remotejs.getInputStream()));
   String receivedNumString = in.readLine();
   String[] numstrings = receivedNumString.split("@@");
   int[] nums = new int[numstrings.length];
   int indx = 0;
   for(String numStr: numstrings){
     nums[indx++] = Integer.parseInt(numStr);
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T04:48:22.393

好吧，流是字节流，因此您必须将数据编码为字节序列，并在接收端对其进行解码。如何写入数据取决于您要如何对其进行编码。

由于从 0 到 34 的数字适合单个字节，因此这可以很简单：

```
outputStream.write(randomNumber); 
```

另一方面：

```
int randomNumber = inputStream.read(); 
```

当然，在每个字节之后刷新流并不是很有效（因为它会为每个字节生成一个网络数据包，并且每个网络数据包都包含数十个字节的标头和路由信息......）。如果性能很重要，您可能也需要使用 BufferedOutputStream。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T09:40:30.183

因此，您可以比较我编写的模板的替代格式，该模板允许您使用您希望使用的任何格式，或者比较替代方案。

```
abstract class DataSocket implements Closeable {
    private final Socket socket;
    protected final DataOutputStream out;
    protected final DataInputStream in;

    DataSocket(Socket socket) throws IOException {
        this.socket = socket;
        out = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));
        in = new DataInputStream(new BufferedInputStream(socket.getInputStream()));
    }

    public void writeInts(int[] ints) throws IOException {
        writeInt(ints.length);
        for (int i : ints)
            writeInt(i);
        endOfBlock();
    }

    protected abstract void writeInt(int i) throws IOException;

    protected abstract void endOfBlock() throws IOException;

    public int[] readInts() throws IOException {
        nextBlock();
        int len = readInt();
        int[] ret = new int[len];
        for (int i = 0; i < len; i++)
            ret[i] = readInt();
        return ret;
    }

    protected abstract void nextBlock() throws IOException;

    protected abstract int readInt() throws IOException;

    public void close() throws IOException {
        out.close();
        in.close();
        socket.close();
    }
} 
```

二进制格式，4 字节整数

```
class BinaryDataSocket extends DataSocket {
    BinaryDataSocket(Socket socket) throws IOException {
        super(socket);
    }

    @Override
    protected void writeInt(int i) throws IOException {
        out.writeInt(i);
    }

    @Override
    protected void endOfBlock() throws IOException {
        out.flush();
    }

    @Override
    protected void nextBlock() {
        // nothing
    }

    @Override
    protected int readInt() throws IOException {
        return in.readInt();
    }
} 
```

停止位编码的二进制，每 7 位一个字节。

```
class CompactBinaryDataSocket extends DataSocket {
    CompactBinaryDataSocket(Socket socket) throws IOException {
        super(socket);
    }

    @Override
    protected void writeInt(int i) throws IOException {
        // uses one byte per 7 bit set.
        long l = i & 0xFFFFFFFFL;
        while (l >= 0x80) {
            out.write((int) (l | 0x80));
            l >>>= 7;
        }
        out.write((int) l);
    }

    @Override
    protected void endOfBlock() throws IOException {
        out.flush();
    }

    @Override
    protected void nextBlock() {
        // nothing
    }

    @Override
    protected int readInt() throws IOException {
        long l = 0;
        int b, count = 0;
        while ((b = in.read()) >= 0x80) {
            l |= (b & 0x7f) << 7 * count++;
        }
        if (b < 0) throw new EOFException();
        l |= b << 7 * count;
        return (int) l;
    }
} 
```

最后用新行编码的文本。

```
class TextDataSocket extends DataSocket {
    TextDataSocket(Socket socket) throws IOException {
        super(socket);
    }

    private boolean outBlock = false;

    @Override
    protected void writeInt(int i) throws IOException {
        if (outBlock) out.write(' ');
        out.write(Integer.toString(i).getBytes());
        outBlock = true;
    }

    @Override
    protected void endOfBlock() throws IOException {
        out.write('\n');
        out.flush();
        outBlock = false;
    }

    private Scanner inLine = null;

    @Override
    protected void nextBlock() throws IOException {
        inLine = new Scanner(in.readLine());
    }

    @Override
    protected int readInt() throws IOException {
        return inLine.nextInt();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T04:27:56.917

如果您想向套接字发送多个随机值，请选择一种简单的格式并让双方都同意（发送方和接收方），例如，您可以简单地选择一个分隔符`;`并创建一个包含所有值的字符串然后发送

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-21T18:22:06.460

[Android Socket SERVER 示例](http://examples.javacodegeeks.com/android/core/socket-core/android-socket-example/ "Android 套接字示例")修改为接收整数数组而不是字符串：

```
...
class CommunicationThread implements Runnable {

    private ObjectInputStream input;

    public CommunicationThread(Socket clientSocket) {

        try {

            this.input = new ObjectInputStream(clientSocket.getInputStream());

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void run() {

        while (!Thread.currentThread().isInterrupted()) {

            try {

                int[] myMessageArray = (int[]) input.readObject();

                String read = null;
                read = String.format("%05X", myMessageArray[0] & 0x0FFFFF);
                int i = 1;
                do {
                    read = read + ", " + String.format("%05X", myMessageArray[i] & 0x0FFFFF);
                    i++;
                } while (i < myMessageArray.length);
                read = read + " (" + myMessageArray.length + " bytes)";

                updateConversationHandler.post(new updateUIThread(read));

            } catch (IOException e) {
                e.printStackTrace();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }
        }
    }
}
... 
```

# c# - 自定义按钮单击时的浏览器后退按钮页面状态

> ID：13984147
> 
> 赞同：0
> 
> 时间：2012-12-21T04:10:29.730
> 
> 标签：c#, asp.net, back-button, page-state

我有两页。在第一页上，用户选择一些过滤器并按搜索按钮，然后用户导航到第二页。在第二页上，用户将看到一个网格，他将在那里执行一些任务。

现在用户需要在不使用浏览器后退按钮的情况下单击一次返回到第一页。由于用户在第二页执行一些任务，这些任务会发生回发，用户无法通过单击浏览器后退按钮转到第一页。

用户还需要第一页的状态与他选择过滤器并按搜索时的状态相同。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:31:49.857

不幸的是，这没有魔术。您必须以编程方式记住返回 URL 以及返回时需要设置的任何页面状态。

为此目的，看到包含 UrlEncoded ReturnUrl 参数的查询字符串并不罕见。如果您可以设法获得恢复 URL 中状态所需的一切，那么您可以`Request.QueryString["ReturnUrl"]`在完成后简单地重定向回。

如果您想避免查询字符串，您要么需要将其发布，要么将所需的数据存储在与当前请求（如会话）分开的地方以供稍后检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:44:34.180

这可能会对您有所帮助，而不是完全按下后退按钮。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack) //check if the webpage is loaded for the first time.
        {
            ViewState["PreviousPage"] = 
        Request.UrlReferrer;//Saves the Previous page url in ViewState
        }
    }
    protected void btnBack_Click(object sender, EventArgs e)
    {
        if (ViewState["PreviousPage"] != null)  //Check if the ViewState 
                        //contains Previous page URL
        {
            Response.Redirect(ViewState["PreviousPage"].ToString());//Redirect to 
        //Previous page by retrieving the PreviousPage Url from ViewState.
        }
    } 
```

# c++ - 寻找两个向量之间角度的不同方法

> ID：13984154
> 
> 赞同：0
> 
> 时间：2012-12-21T04:11:28.140
> 
> 标签：c++, 2d

去年我在一所学校的 C++ 游戏开发课上学到，要找到两个向量之间的角度，可以使用以下方法：

vec2_t 定义为：`typedef float vec2_t[2];` vec[0] = x 和 vec[1] = y

```
float VectorAngle(vec2_t a, vec2_t b)
{
    vec2_t vUp;
    vec2_t vRight;
    vec2_t vDir;
    float dot, side, angle;

    VectorCopy(vUp, a);
    VectorNormalize(vUp);

    VectorInit(vRight, -vUp[1], vUp[0]);

    VectorCopy(vDir, b);
    VectorNormalize(vDir);

    dot = VectorDot(vUp, vDir);
    side = VectorDot(vRight, vDir);
    angle = acosf(dot);

    if(side < 0.0f)
        angle *= -1.0f;

    return angle;
} 
```

然后就在昨天，在寻找其他解决方案时，我发现您可以改用此方法：

```
float VectorAngle(vec2_t a, vec2_t b)
{
    return atan2f(b[1]-a[1], b[0]-a[0]);
} 
```

这似乎更容易实现......我的问题是，当第二种方法更简单时，为什么一种方法会优于第二种方法？

编辑：只是为了确保：如果向量 a 是 [100, 100] 并且向量 b 是 [300, 300] 那么方法 2 返回 0.78539819 弧度，这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:33:19.100

我觉得有用的一种方法：

```
 // cross product
        double y = (v1[0] * v2[1]) - (v2[0] * v1[1]);

        // dot product
        double x = (v1[0] * v2[0]) + (v1[1] * v2[1]);

        return atan2(y, x); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T05:53:56.677

第二种方法计算 b 和 a (ba) 的几何差向量，并返回这个差和 X 轴之间的角度，显然这个角度通常不等于 a 和 b 之间的角度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T04:30:35.583

将[acosf](http://www.publicsource.apple.com/source/Libm/Libm-315/Source/ARM/acosf.c)源代码与[atanf2f](http://svn.open64.net/svnroot/open64/trunk/osprey/libacml_mv/src/atan2f.c)源代码进行比较，以了解实现的差异。后者使用可能对某些系统不可行的表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:49:53.197

您可以使用复数进行二维矢量计算。复数的乘法可以看作是正旋转，除法是负旋转。我们想使用除法，因为它的作用是从另一个角度减去一个角度：

```
#include <complex>

int main() {
    using std::complex;
    using std::arg;

    complex<double> a, b;

    double angle = arg(a/b);

    return 0;
} 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 中打开 .rptproj？

> ID：13984155
> 
> 赞同：17
> 
> 时间：2012-12-21T04:11:28.917
> 
> 标签：visual-studio-2010, visual-studio, reporting-services, ssrs-2008, projects-and-solutions

我有一个包含一种`.rptproj`项目类型的 Visual Studio 2010 解决方案。我的一位同事能够很好地在 Visual Studio 2010 SP1 中打开该解决方案。我已经看到它工作了。但是，当我尝试这样做时，我得到

> “此版本的应用程序不支持此类项目”

我能够从 SQL Server Business Intelligence Studio 2008 打开解决方案就好了。

我们都有 VS2010 Ultimate SP1 和 SQL Server 2008 R2 Enterprise。两种产品的完整安装。当您转到他的帮助 - > Visual Studio 上的关于对话框时，它列出

*   SQL Server 分析服务
*   SQL Server 报告服务
*   和 SQL Server 集成服务

在我的 VS2010 上，这些不会显示，但它们会在我的 SQL Server BI Studio 关于对话框中显示。我尝试卸载所有内容并重新安装，但无济于事。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-19T04:03:59.273

我需要做的是从 SQL Server 2008 安装程序安装 Business Intelligence Development Studio（具体来说，我使用的是 2008 R2）。请参阅下面的屏幕截图。

这将 SSRS 的模板添加到 Visual Studio 2008。

注意，您必须安装 VS 2008 SP 1（至少对于 SQL Server 2008 R2）。

![在此处输入图像描述](../Images/4352e96fe111998fb13c9c3b4755e497.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T04:49:43.753

[SQL Server Data Tools](http://msdn.microsoft.com/en-us/library/hh272686%28v=vs.103%29.aspx)是 Visual Studio / SQL Server 的免费插件，支持报告项目，因此它可以满足您的需求。我只将它用于数据库项目而不是报告项目，所以我不确定它是否会成为这种情况下的解决方案，但试一试。当我们在 2010 年升级到 Visual Studio 2010 时，这并不存在，因此我们将报告转移到单独的 VS2008 解决方案中，因此这始终是一个（非理想）解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-22T06:08:02.747

事实证明，我的信息不完整。我的同事在他的机器上也安装了 SQL Server 2012。正是该 SQL 安装使 SQL Server XXX 服务出现在他的 Visual Studio 2010 安装中。

据我所知，SQL Server 2008 R2 安装将使旧版本的 Visual Studio 能够打开该 SQL 版本的 .rptproj 项目。也就是说，SQL 2008 R2 将允许 Visual Studio 2008 打开 SQL Server 2008 R2 .rptprojects，而 SQL Server 2012 提供打开 SQL Server 2008 R2 .rptprojects 的选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T08:47:44.953

补充一下，我可以按照这个问题中所示的以下步骤来做到这一点。现在您可以使用 Visual Studio 2010 来编辑报告。

[Visual Studio 2010 或 2012 是否支持 SSRS 报告？](https://stackoverflow.com/questions/14333459/is-there-any-inbuilt-localization-resources-support-in-ssrs-using-visual-studio)

# join - 合并标题略有不同的 csv 文件

> ID：13984156
> 
> 赞同：1
> 
> 时间：2012-12-21T04:11:41.323
> 
> 标签：join, csv, command-line

我有 2 个 CSV 文件。

一个标题看起来像：

```
header1,header2,header3,header4
a,b,c,d 
```

另一个标题看起来像：

```
header1,header3,header4,header5
e,f,g,h 
```

我希望输出为 CSV 文件：

```
header1,header2,header3,header4,header5
a,b,c,d,
e, ,f,g,h 
```

我更喜欢可以处理这种类型的合并的命令行实用程序（因为它都是由 Windows 中的批处理文件运行的），但我愿意接受任何解决方案。

如果标题相同，那么这将很容易，但由于标题略有不同，我已经碰壁了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:08:04.787

只要没有任何列值包含逗号，批处理文件就可以使用 FOR /F 轻松解析大多数 CSV 行。但是 FOR /F 解决方案可能会因缺失值而出错。您的 CSV 可能有连续的逗号，表示缺少值。但 FOR /F 将连续分隔符视为单个分隔符。这个问题可以批量解决，但我认为这不值得。

PowerShell 可能有一个很好的解析 CSV 的解决方案。我知道 .NET 有一个解析 CSV 的类，PowerShell 可以访问 .NET。但我真的不知道 PowerShell。

有可用于 Windows 的免费文本处理工具，例如 sed。但这需要下载。

我编写了一个易于使用的混合批处理/JScript 实用程序，名为 REPL.BAT，它可以对文本文件执行正则表达式搜索和替换。

假设您在第二个文件中的第一列的值中从来没有带引号的逗号，那么解决方案可以很简单：

```
@echo off
>new.csv (
  echo header1,header2,header3,header4,header5
  findstr /v /c:"header1,header2,header3,header4" file1.csv | repl "^(.*)$" "$1,"
  findstr /v /c:"header1,header3,header4,header5" file2.csv | repl "^([^,]*)," "$1, ,"
) 
```

这是启用上述解决方案的 REPL.BAT 实用程序。完整的文档内置在脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T17:24:00.747

我有一个[基于 Ruby 脚本的解决方案](https://stackoverflow.com/a/25085688/316700)，可以从控制台执行。

# ember.js - Ember.js 中的二维表

> ID：13984157
> 
> 赞同：3
> 
> 时间：2012-12-21T04:11:57.687
> 
> 标签：ember.js

我们正在通过构建一些“玩具应用程序”来评估 Ember.js（针对 Angular）的复杂应用程序。其中之一是在表格中呈现数据。

我已经浏览了无数的 SO 帖子、Ember 网站和其他网站，但找不到让它工作的关键。最接近的例子是在[xeqtit](http://www.xeqtit.com/blog/2012/05/creating-a-stock-ticker-table-using-ember-js-take-ii#.UNM4txzlV8M)和 this [fiddle](http://jsfiddle.net/L7MAp/)。

很卡。

关于如何设置的任何指示？几天来一直在阅读网络帖子，只是没有看到答案......

# 问题陈述

为了简化问题：想象一个路由器列表，每个路由器可以有可变数量的接口，这些接口有一个地址、状态等。

决赛桌看起来像：

```
__________________________________________________
Machine       |  Interfaces
rt1.rp.ps.com | UP | UP | UP | NG | UP | UP | NG |
rt2.rp.ps.com | UP | UP |                        |
rt3.rp.ps.com | UP | UP | UP |                   |
rt4.rp.ps.com | UP | UP | UP | NG | UP | UP | NG |
rt5.rp.ps.com | UP | UP | UP | NG |              |
-------------------------------------------------- 
```

注意可变的列数。

# 对象：

```
App.Machine = Ember.Object.extend(
{
    nickname: '',
    address: '',
    ifaces: []
});

App.Interface = Ember.Object.extend(
{
    num: '',
    status: '',
    address: ''
}); 
```

# 标记

```
 <script type="text/x-handlebars" data-template-name="machinelist">
        <p>List of Machines</p>
        <table>
            {{#each App.MachinelistController }}
                <tr>
                    <td>{{nickname}}</td>
                    <td>{{address}}</td>
                    <td>
                        <table>
                            {{#each p in App.MachinelistController.getInterfaces}}
                            <tr><td>{{p}}</td></tr>
                            {{/each}}
                        </table>
                    </td>
                </tr>
            {{/each}}
        </table>
    </script> 
```

# 控制器

控制器首先读取数据库以获取机器列表及其地址。然后它查询每台机器以获取接口列表。[我已经简化了代码以显示问题的核心......请原谅任何拼写错误]

```
App.MachinelistController = Ember.ArrayController.create(
{
    content: [],
    getInterfaces: function(x, y, z)
    {
        // This didn't work
        return this.getPath('interfaces.status');
    }.property('@each.read'),
    polling: false,
    machinePollTime: 5000,
    detailPollTime: 3000, 
```

机器列表是通过 PHP 从数据库中检索的。它使用 Machine 对象填充控制器的“内容”，但尚未填写接口的详细信息： fetch: function() { console.log('machine fetch'); 变种自我=这个；

```
 $.get("be/getDVStorList.php", function(data, textStatus)
        {
            self.set('content', []);
            var statusReport = jQuery.parseJSON(data);
            statusReport.machineList.forEach(function(v)
            {
                var machine = App.Machine.create(
                    {
                        nickname: v['machineName'],
                        address: v['machineIpAddr']
                    });
                self.pushObject( machine );
            })
        });
        if (self.polling)
            setTimeout( function() { self.fetch(); }, self.machinePollTime);
        return this;
    }, 
```

在一个单独的轮询循环中（仍在 ArrayController 中），对内容列表中的每台机器进行轮询以获取有关其接口的信息：

```
 fetchDetails: function ()
    {
        console.log("fetch details");
        var self = this;
        self.forEach(function(item, index, self)
        {
            console.log(item.get('address'));
            var addr = item.get('address');
            var base = "http://"+ addr; 
            var slug = "/cgi-bin/DvStorGetStatus.cgi?Recording=1&Playback=1&Structured=1";
            $.ajax(
            {
                url: base+slug,
                timeout: 10000,
                cache: false,
                success: buildMachineCallback(addr),
            });
        });

        if (self.polling)
            setTimeout( function () { self.fetchDetails(); }, self.detailPollTime);
        return true;

        function buildMachineCallback(addr)
        {
            return function(data, textStatus, jqXHR) { updateDetailsCallback(data, textStatus, jqXHR, addr); };
        }; 
```

当对每台机器的轮询返回时调用此函数。它将“接口”添加到数据结构中：

```
 // Update *data structure* based on return values in XML
        function updateDetailsCallback(data, textStatus, jqXHR, addr)
        {
            // might be more than one with this address
            var theMachines = self.filterProperty('address')

            var interfaceList = $(data).find('Interface');
            var interfaces = [];
            $(playInterfaceerList).each(function()
            {
                var anInterface = App.Interface.create();
                var num = $(this).find('InterfaceNum').text();
                anInterface.set('num',  num);
                anInterface.set('status',  $(this).find('InterfaceStatus').text());

                interfaces[num-1] = anInterface;
            })

            // update all machines sharing this IP address
            theMachines.forEach(function (m, idx, tm)
            {
                tm[idx].set('alias', $(data).find('Generic').find('Alias').text());
                tm[idx].set('health', $(data).find('Generic').find('SystemHealth').text());

                interfaces.forEach(function(p)
                {
                    tm[idx].get('ifaces').pushObject( App.Interface.create(p) );
                })
            });
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T09:35:38.190

有两种解决方案应该有效。

*   Ember-table，一个 Ember 插件：[http ://addepar.github.io/#/ember-table/overview](http://addepar.github.io/#/ember-table/overview)
*   jQuery-datatable，一个 jQuery 插件：[https ://datatables.net/](https://datatables.net/)

使用 jQuery 插件会更复杂，因为它不直接链接到 ember 渲染过程。

# wordpress - PHP 在 WordPress 主题中不断重复表格元素

> ID：13984159
> 
> 赞同：0
> 
> 时间：2012-12-21T04:12:03.240
> 
> 标签：wordpress, wordpress-theming, woothemes

我正在这个[测试网站](http://testbuzz.illinimedia.com)上工作，这是一个 WordPress 网站（使用 5.5 版）并使用[Canvas WooTheme](http://www.woothemes.com/products/canvas/)。它的首页应该显示今天的日历事件，这些事件由 WordPress 插件[Events Manager](http://wordpress.org/extend/plugins/events-manager/)提供。

我希望他们做的是显示，例如这个[事件页面](http://testbuzz.illinimedia.com/events/2012-12-22)（以及下面的屏幕截图 - 在[这个屏幕](https://docs.google.com/open?id=0B2UC67NQiW2yYjBQd213OVE4ZHc)截图中看到），确实如此。相反，下面的代码不知何故将模板的其余部分（包括侧边栏）吸进了表格中，继续将表格的行和列复制到自身中（从[这个屏幕截图](https://docs.google.com/open?id=0B2UC67NQiW2yc3hzdDJla1dKeUk)中可以看出）。

它射入 Firebug 的代码如下：

```
<table cellspacing="0" cellpadding="0" id="current-events"><tbody><tr><td class="startdate_cost_td">
      <span class="start_time"><table cellspacing="0" cellpadding="0" id="current-events"><tbody><tr>
        <td class="startdate_cost_td">
                <span class="start_time">12:00 AM</span><br>
            <span class="cost">Free</span>
        </td>
        <td class="event_image"> <img src="../../../wp-includes/images/default_img.jpg"></td>
        <td class="event_title">Sex Addicts Anonymous meeting<br>
            <i><span class="location_name">@ No location listed</span></i>
            <div id="read_more_wrapper">
            <img src="../../../wp-includes/images/little_pink_arrow.jpg"><a class="pink_link" href="http://testbuzz.illinimedia.com/events/sex-addicts-anonymous-meeting-90">READ MORE</a></div></td></tr>

<!--12:00 AM</span><br/><span class='cost'>Free</span></td><td class='event_image'><img src='../../../wp-includes/images/default_img.jpg' /></td><td class='event_title'><a href="http://testbuzz.illinimedia.com/events/sex-addicts-anonymous-meeting-90" title="Sex Addicts Anonymous meeting">Sex Addicts Anonymous meeting</a><br/><i><span class='location_name'>@No location listed</span></i><br />Mind, body, &amp; spirit<div id='read_more_wrapper'><img src='../../../wp-includes/images/little_pink_arrow.jpg' /><a href='http://testbuzz.illinimedia.com/events/sex-addicts-anonymous-meeting-90' class='pink_link'>READ MORE</a></td></tr></div><tr><td class='startdate_cost_td'>
      <span  class='start_time'>-->
<tr>
        <td class="startdate_cost_td">
                <span class="start_time">8:30 AM</span><br>
            <span class="cost">Free</span>
        </td>
        <td class="event_image"><img alt="&quot;Inside India&quot; with Larry Kanfer" src="http://testbuzz.illinimedia.com/wp-content/uploads/locations-pics/event-35214.jpg"> </td>
        <td class="event_title">“Inside India” with Larry Kanfer<br>
            <i><span class="location_name">@ Alice Campbell Alumni Center</span></i>
            <div id="read_more_wrapper">
            <img src="../../../wp-includes/images/little_pink_arrow.jpg"><a class="pink_link" href="http://testbuzz.illinimedia.com/events/inside-india-with-larry-kanfer-31">READ MORE</a></div></td></tr>

      ......more events similar to this......

<div class="fix"></div>
                                <div class="nav-entries">
                <a href="http://testbuzz.illinimedia.com/page/2"><span class="nav-prev icon fl">Older posts</span></a>                                <div class="fix"></div>
            </div>

                <!-- /#main -->

<div id="sidebar">

    <div class="widget widget_woo_search" id="woo_search-3"><div class="search_main">
    <form action="http://testbuzz.illinimedia.com/" class="searchform" method="get">
        <input type="text" onblur="if (this.value == '') {this.value = 'Search...';}" onfocus="if (this.value == 'Search...') {this.value = '';}" value="Search..." name="s" class="field s">
        <input type="image" name="submit" class="submit" alt="Search" src="http://testbuzz.illinimedia.com/wp-content/themes/canvas/images/ico-search.png">
            </form>    
    <div class="fix"></div>
</div>
       .... the rest of the content stuck .....

</span></td></tr></tbody></table> 
```

下面是我在子主题 template-magazine.php 中插入杂志模板的代码，这导致了问题：

```
 <?php
                $page = ( !empty($_REQUEST['page']) && is_numeric($_REQUEST['page']) )? $_REQUEST['page'] : 1;
  $args = array( 
               'limit' => 10,
               'scope' => 'today',
               'pagination' => 1
               );

if (isset($_REQUEST['c'])) {
$args['category'] = $_REQUEST['c'];
$args['scope'] = 'future';
}              

$args['offset'] = $args['limit'] * ($page-1);

$events = em_get_events_array($args);
$size = sizeof($events)-1;

echo "<h2 id='headding'class='title'>Today's Events</h2>";
echo "<table cellpadding='0' cellspacing='0' id='current-events' >";

for ($i=0;$i<$size;$i++) {
echo "<tr><td class='startdate_cost_td'>
      <span  class='start_time'>" . $events[$i][0] . 
      "</span><br/><span class='cost'>" . $events[$i][7] . 
      "</span></td><td class='event_image'>";

              if ($events[$i][8] == '') {
            echo "<img src='../../../wp-includes/images/default_img.jpg' />";       
            }
            else {
            echo $events[$i][9];
            }

echo  "</td><td class='event_title'>" . $events[$i][10] .
      "<br/><i><span class='location_name'>@". $events[$i][11] . 
      "</span></i><br />" .$events[$i][12] . 
      "<div id='read_more_wrapper'>" .
      "<img src='../../../wp-includes/images/little_pink_arrow.jpg' /><a href='" . $events[$i][13] . "' class='pink_link'>READ MORE</a></td></tr>" . 
      "</div>";
      } 

echo "</table>";
$last_index = count($events) - 1;
echo $events[$last_index][0];
?> 
```

通过删除代码本身，我确保上面的 PHP 代码是主要问题的原因。这似乎可以解决问题！当我尝试将此代码放在 template-magazine.php 文件的不同部分时，它重复了相同的结果。当我也将它移动到子主题中的 functions.php 文件时，它只是让其他所有内容进一步向下扩展并扩展到浏览器的整个宽度。如何摆脱代码中的循环，将所有的辅助内容都吸入正在创建的表中？

**更新：我使用 HTML 标记注释掉了上面的 PHP 代码，复制了事件并注释掉了我们希望在页面上显示的表格元素。下面是它的截图：[https](https://docs.google.com/open?id=0B2UC67NQiW2yalhMSGxra0FFWGM) ://docs.google.com/open?id=0B2UC67NQiW2yalhMSGxra0FFWGM和下图中显示的代码（我不想粘贴代码，因为它会'已经很久了：** ![注释掉表格元素，我希望它出现在屏幕上](../Images/dd05668273d0a7073118140e70efbda2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:54:08.800

最终它似乎正在阅读我在插件中创建的事件预览设置。我需要做的只是简单地创建一个 for 循环，读取该特定页面的每个事件，屏蔽上面的其余 PHP 代码。以下是用于读取事件的代码：

```
for ($i=0;$i<$size;$i++) {
    echo $events[$i][0];
} 
```

希望这对使用事件管理器插件的人有所帮助。

# .net - 在不包括 #if 调试部分的文件中搜索

> ID：13984165
> 
> 赞同：1
> 
> 时间：2012-12-21T04:12:32.867
> 
> 标签：.net, visual-studio-2010, visual-studio, search

有没有办法在文件（或解决方案）中查找但忽略 #if debug / #endif 部分之间的结果？

或者有没有一个很好的插件可以做这样的事情，或者一个简洁的解决方法？

# xslt - 通过“加入”元素创建 xsl 键

> ID：13984167
> 
> 赞同：4
> 
> 时间：2012-12-21T04:12:43.507
> 
> 标签：xslt, xslt-1.0

```
<t>
  <rendition xml:id="b">color: blue</rendition>
  <rendition xml:id="r">color: red</rendition>

  <tagUsage gi="p" render="b" />
  <tagUsage gi="emph" render="r" />
</t> 
```

如何基于 tagUsage 元素中的 @gi 创建一个 XSL 1.0 键到渲染元素中，将 rendition/@xml:id 加入 tagUsage/@render？就像是

```
<xsl:key name="rendition-by-tagName" 
         match="rendition" 
         use="//tagUsage[@xml:id of rendition = @render of tagUsage]/@gi" /> 
```

这样给定“p”，键将返回蓝色`rendition`；给定“emph”，键将返回红色`rendition`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T04:33:59.417

**使用**：

```
 <xsl:key name="kRendByUsageGi" match="rendition"
  use="../tagUsage[@render=current()/@xml:id]/@gi"/> 
```

**这是一个完整的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kRendByUsageGi" match="rendition"
  use="../tagUsage[@render=current()/@xml:id]/@gi"/>

 <xsl:template match="/">
  <xsl:copy-of select="key('kRendByUsageGi', 'p')/text()"/>
========
  <xsl:copy-of select="key('kRendByUsageGi', 'emph')/text()"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<t>
  <rendition xml:id="b">color: blue</rendition>
  <rendition xml:id="r">color: red</rendition>

  <tagUsage gi="p" render="b" />
  <tagUsage gi="emph" render="r" />
</t> 
```

**产生了想要的正确结果：**

```
color: blue
========
  color: red 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:40:48.450

我发现使用第二个 key() 的以下内容可与 xsltproc 一起使用，因此，如果那是您的目标处理器，这应该会有所帮助。但是，它不适用于撒克逊人。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name='kTagUsage' match='tagUsage' use='@render'/>
  <xsl:key name="kRendByUsageGi" match="rendition"
    use="key('kTagUsage', @xml:id)/@gi"/>

  <xsl:template match="/">
    <xsl:copy-of select="key('kRendByUsageGi', 'p')/text()"/>
    ========
    <xsl:copy-of select="key('kRendByUsageGi', 'emph')/text()"/>
  </xsl:template>
</xsl:stylesheet> 
```

# android - 与最终用户交流 Flurry 的最佳方式

> ID：13984168
> 
> 赞同：-1
> 
> 时间：2012-12-21T04:12:49.497
> 
> 标签：android, iphone, ios, flurry

如果这个问题不适合这个论坛，请提前道歉，但我试图找出告诉用户我的应用正在使用 Flurry 的最佳方式。是否有要求告诉用户他的设备正在发送数据以进行快速操作？大多数应用程序是谁“告诉”用户这个应用程序正在向 Flurry 服务器发送数据？它是最终用户许可协议的一部分吗？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:38:30.267

你应该做什么，大多数应用程序*做*什么可能有很大的不同。

我想大多数应用程序都有某种形式的分析，很少有人愿意告诉他们的用户。

更先进的应用程序（从社交角度来看）正在通过 EULA 通知其用户。我不能代表 Android，但在 iOS App Store 中，Apple 可以很容易地在您提交应用程序时将 EULA 添加到您的应用程序中。

事实上，根据最近和即将出台的法律，坦诚相待可能是最好的：http: [//www.lexology.com/library/detail.aspx? g=d2bfdafd-5164-439d-8b38-48bd13d71a71](http://www.lexology.com/library/detail.aspx?g=d2bfdafd-5164-439d-8b38-48bd13d71a71)

# javascript - 是否可以在运行时进行用户定义的 DOM 更改？

> ID：13984172
> 
> 赞同：4
> 
> 时间：2012-12-21T04:13:21.617
> 
> 标签：javascript

> **可能重复：**
> [javascript 对象，访问变量属性名称？](https://stackoverflow.com/questions/4255472/javascript-object-access-variable-property-name)

我在玩 JS，学习一些东西，我想知道一些事情......假设你有一个 function `aFunc()`，并且你接受一个 string `aFunc(val)`。该值是用户定义的，然后用于修改元素的 CSS。

**例如：**

```
function aFunc(val){
    document.getElementById('something').style.val = 'red';
} 
```

假设用户输入`borderColor`，它会以某种方式引用`borderColor`where `val`is。我不知道这如何或是否可能。

**编辑：** 请不要`eval()`:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T04:16:09.423

只需以此为基础：**[JSBIN- Demo on a Div](http://jsbin.com/uvobif/1/edit)**

```
var type = prompt("style");
var value = prompt("value");
document.body.style[type] = value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T04:19:58.867

JavaScript 中的每个对象都有一个被调用的方法，该方法[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)接受一个字符串值并返回一个布尔值。

```
var myObj = {
   name: "Josh"
};

myObj.hasOwnProperty("name") === true; //This is true 
```

您可以使用它来测试特定属性的存在，然后使用[Akhil Sekharan 的回答](https://stackoverflow.com/a/13984193/11702)中所述的方法来访问该属性。

# javascript - 用于支持 IE 8 和 IE 9 中的 CORS 的 Kendo UI 数据源自定义传输

> ID：13984173
> 
> 赞同：2
> 
> 时间：2012-12-21T04:13:36.830
> 
> 标签：javascript, jquery, asp.net-web-api, kendo-ui, cors

同源策略 (SOP) 阻止基于 Kendo jQuery 的控件对不同域上的 API（例如：ASP.NET WebAPI）执行 CRUD 操作。我们的 javascript 前端与通过 JSON 通信的 ASP.NET WebAPI 位于不同的域中。我们想用来绕过 SOP 限制的解决方案是实现跨域资源共享 (CORS)。但是 IE 版本 8 和 9 通过 XDomainRequest 而不是 XMLHttpRequest 支持 CORS。

George Durzi 编写了一个 JavaScript 传输函数，该函数使用 IE 的 XDomainRequest 对象，并为[这篇博客文章](http://georgedurzi.com/implementing-cross-browser-cors-support-for-asp-net-web-api/)中的所有其他调用者封装了 $.ajax() 。

我想通过在 Kendo UI 库中创建自定义传输将这个 javascript 传输功能合并到 Kendo UI 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:16:47.757

一种方法是通过包含[jquery.ieco​​rs.js](https://github.com/dkastner/jquery.iecors)来修补 jQuery 。这是一篇包含更多信息的博客文章：[http ://www.kendoui.c​​om/blogs/teamblog/posts/11-10-03/using_cors_with_all_modern_browsers.aspx](http://www.kendoui.com/blogs/teamblog/posts/11-10-03/using_cors_with_all_modern_browsers.aspx)

# graph - 如何从点列表中绘制图形？

> ID：13984176
> 
> 赞同：1
> 
> 时间：2012-12-21T04:14:01.380
> 
> 标签：graph, xna

在我最近的问题的[这个答案](https://stackoverflow.com/a/13902970/1306322)中，有一些绘制图表的代码，但我无法将其编辑为接受任何点列表作为参数的东西。

我希望绘图方法接受这些参数：

*   的列表`Vector2`，`Point`或者`VertexPositionColor`，我可以使用任何一个。
*   整个图的偏移量

这些可选要求将不胜感激：

*   可以覆盖`VertexPositionColor`的颜色并应用于所有点的颜色。
*   图形的大小，因此可以缩小或扩大，可以`Vector2`作为乘数，也可以`Point`作为目标大小。甚至可以将其与中的偏移量结合起来`Rectangle`。

如果可能的话，我想把它全部放在一个类中，这样图形可以彼此分开使用，每个都有自己的`Effect.world`矩阵等。

* * *

这是代码（由[Niko Drašković](https://stackoverflow.com/users/1020861/niko-draskovic)编写）：

```
Matrix worldMatrix;
Matrix viewMatrix;
Matrix projectionMatrix;
BasicEffect basicEffect;

VertexPositionColor[] pointList;
short[] lineListIndices;

protected override void Initialize()
{
    int n = 300;
    //GeneratePoints generates a random graph, implementation irrelevant
    pointList = new VertexPositionColor[n];
    for (int i = 0; i < n; i++)
        pointList[i] = new VertexPositionColor() { Position = new Vector3(i, (float)(Math.Sin((i / 15.0)) * height / 2.0 + height / 2.0 + minY), 0), Color = Color.Blue };

    //links the points into a list
    lineListIndices = new short[(n * 2) - 2];
    for (int i = 0; i < n - 1; i++)
    {
        lineListIndices[i * 2] = (short)(i);
        lineListIndices[(i * 2) + 1] = (short)(i + 1);
    }

    worldMatrix = Matrix.Identity;
    viewMatrix = Matrix.CreateLookAt(new Vector3(0.0f, 0.0f, 1.0f), Vector3.Zero, Vector3.Up);
    projectionMatrix = Matrix.CreateOrthographicOffCenter(0, (float)GraphicsDevice.Viewport.Width, (float)GraphicsDevice.Viewport.Height, 0, 1.0f, 1000.0f);

    basicEffect = new BasicEffect(graphics.GraphicsDevice);
    basicEffect.World = worldMatrix;
    basicEffect.View = viewMatrix;
    basicEffect.Projection = projectionMatrix;

    basicEffect.VertexColorEnabled = true; //important for color

    base.Initialize();
} 
```

以及绘制方法：

```
foreach (EffectPass pass in basicEffect.CurrentTechnique.Passes)
{
    pass.Apply();
    GraphicsDevice.DrawUserIndexedPrimitives<VertexPositionColor>(
        PrimitiveType.LineList,
        pointList,
        0,
        pointList.Length,
        lineListIndices,
        0,
        pointList.Length - 1
    );
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T17:32:27.960

`Graph`可以在[此处](http://pastebin.com/Bc5Lk4ap)找到执行请求的类。
[大约 200 行代码似乎太多，无法粘贴在这里。]

![在此处输入图像描述](../Images/bd20c6a4db1ae8020b9722b65629c47a.png)

通过将浮点数列表（可选地带有颜色）传递给它的方法`Graph`来绘制。`Draw(..)`

`Graph`属性是：

*   `Vector2 Position`-图表的**左下角**
*   `Point Size`- 图形的宽度 ( `.X`) 和高度 ( `.Y`)。在水平方向上，值将被分布以完全适合宽度。在垂直方向上，所有值都将用 缩放`Size.Y / MaxValue`。
*   `float MaxValue`- 将在图表顶部的值。所有*图表外的*值（大于`MaxValue`）都将设置为此值。
*   `GraphType Type`- 使用可能的值`GraphType.Line`和`GraphType.Fill`，确定图形是仅绘制线条还是底部填充。

[该图是用线列表](http://msdn.microsoft.com/en-us/library/bb196414%28v=xnagamestudio.40%29.aspx#ID4EBE)/[三角形带](http://msdn.microsoft.com/en-us/library/bb196414%28v=xnagamestudio.40%29.aspx#ID4E2BAC)绘制的。

# ipad - 带有输入字段的 UITableView - 如何在进入详细视图并返回时保留值

> ID：13984178
> 
> 赞同：0
> 
> 时间：2012-12-21T04:14:21.477
> 
> 标签：ipad, cocoa-touch, uitableview, input, uikit

有点恐慌，真的需要一些帮助！

我正在制作一个应用程序来填写表格。表单的布局是在 Web 服务器上创建的，然后 ipad 应用程序与之同步，复制表单数据库，然后在本地运行它。

一种类型的文本字段是 UITextView，用户可以通过直接写入字段或使用许多预定义文本之一（也在 Web 服务器上定义）来输入文本。

要使用预定义的文本，用户触摸/选择包含 UITextView 的表格单元，然后将类别选择器视图推送到屏幕上。在选择类别时，用户会获得一个文本列表，在选择文本后，用户会获得一个简单的 uitextview 以在插入之前对其进行编辑。使用保存按钮，然后用户将返回到现在添加所选文本的原始视图。

流程图：

```
 root view with input fields-> category picker -> text picker -> editor 
  /\                                                               |
   '------------------------------save text------------------------' 
```

**问题**是当任何其他视图加载时，所有其他输入字段都被清空！选定字段的值通过 prepareForSegue 传递，因此保留一个。

我有一个保存功能，可以将所有字段保存到数据库中。我试图在*prepareforsegue*调用中调用它，但它要么崩溃，要么什么都不做。

**问题：**我可以将保存功能放在哪里？我可以/应该用另一种方式吗？考虑将所有标签的值放在我的 appDelegate 内的字典中，而不是运行保存功能，但是每次编辑输入字段时我如何更新它？

另外-将类别选择器等放在某种弹出框/模态/弹出视图中而不是推送segue中会阻止清除值吗？我没有从这些观点中获得经验，有人可以给出一个好的起点吗？（也许是一个很好的教程而不是沉重的苹果文档：）

我*明天有一个截止日期*，还有很多事情要完成，所以我非常感谢任何帮助！

感谢您的时间！！/戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:14:49.747

我认为您的问题是由缺少模型引起的（就模型-视图-控制器模式而言）。代表您的表单数据的模型（例如，自定义对象、NSArray、NSDictionary）应该更新视图并且应该在prepareForSegue 中传递，而不是输入字段的值。

具体来说，创建一个维护最新数据的新属性。当用户对某些字段进行编辑或选择类别时，更新模型。然后，当您返回表单视图控制器时，使用 viewDidAppear 将输入字段更新为其最新值。

# c++ - 如果链接到未使用的库，可执行文件是否会以不同的方式构建？

> ID：13984180
> 
> 赞同：10
> 
> 时间：2012-12-21T04:14:34.810
> 
> 标签：c++, c++11, shared-libraries, static-libraries

除了更长的编译时间之外，链接未使用的库是否有任何缺点？

例如，通过以下两种方式之一编译的程序的可执行文件是否有任何区别：

```
g++ -o main main.cpp
g++ -o main main.cpp -llib1 -llib2 -llib3 -lmore 
```

*实际上不需要任何库文件来构建 main。

我相信这没有什么区别，因为文件大小相同，但我要求确认。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T04:44:06.357

这取决于。

1.  如果`liblib1.a`、`liblib2.a`和`liblib3.a`是静态库，并且没有使用其中的符号，那么就没有区别。

2.  如果`liblib1.so`、`liblib2.so`或`liblib3.so`是共享库，那么无论是否使用它们，它们都将在运行时加载。您可以使用链接器标志`--as-needed`来更改此行为，建议使用此标志。

要检查您的二进制文件在运行时直接加载哪些共享库，您可以在 ELF 系统上使用`readelf`.

```
$猫main.c
主函数（）
{
    返回0；
}
$ gcc main.c
$ readelf -d a.out | 需要 grep
 0x0000000000000001（需要）共享库：[libc.so.6]
$ gcc -lpng main.c
$ readelf -d a.out | 需要 grep
 0x0000000000000001（需要）共享库：[libpng12.so.0]
 0x0000000000000001（需要）共享库：[libc.so.6]

```

您可以在我的系统上看到，无论是否实际使用了来自它的符号的`-lpng`链接。链接器标志修复了这个问题`libpng12.so.0`：`--as-needed`

```
$ gcc -Wl,--根据需要 -lpng main.c
$ readelf -d a.out | 需要 grep
 0x0000000000000001（需要）共享库：[libc.so.6]

```

## 笔记

1.  该`--as-needed`标志必须在库**之前指定。**它只影响出现在它之后的库。所以`gcc -lpng -Wl,--as-needed`行不通。

2.  该`ldd`命令不仅列出了您的二进制文件直接链接的库，还列出了所有间接依赖项。这可能会根据这些库的编译方式而改变。只会`readelf`向您显示您的直接依赖关系，并且只会`ldd`向您显示间接依赖关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:45:51.787

这取决于您是链接静态库还是共享库。如果您正在链接静态库，那么可执行文件的大小会随着每次添加而增加。链接到共享库，不会大大增加可执行文件的大小，只是添加了库符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T04:46:34.123

绝对没错。不利的一面是其他人（或将来的您）会认为出于某种原因需要**这些库。**大多数人不会花时间减少程序的依赖关系，因此它们的列表会越来越多。

成本与编译代码无关，而与维护和移植程序有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:18:44.870

上面有一些非常好的答案。进一步的说明是“它真的有什么不同”。已经提到了维护成本（例如，当有人安装没有 Lib3 的新操作系统时出现问题，因此用户必须去某个地方找到 lib3 并安装它，因为 lib3 也需要 lib17，而您也不需要安装，它为用户增加了更多的工作）。

但是，当你加载二进制文件时，如果你链接到了实际上没有使用的共享库，系统仍然会去寻找那些库，如果它们不存在则拒绝加载——这会增加时间，并安装噩梦.

加载代码后，它应该没有额外的运行时损失。

话虽如此，有时还是有关于链接未使用库的论据。假设您的代码有一个选项 USE_FOO，其中 FOO 功能仅在构建时基于一些任意选择才包含（例如“这是在 Linux 内核 > 3.0 上”或“系统是否有精美的显卡”），而 FOO 使用 Lib1为了做这件事，它可以使构建系统（makefile 或类似文件）更简单地始终链接到 lib1，即使在未设置 USE_FOO 时您实际上并不需要它。

但总的来说，不要链接到不需要的库。它会导致更多的依赖关系，这绝不是一件好事。

# mysql - NoSQL 数据库设计

> ID：13984182
> 
> 赞同：1
> 
> 时间：2012-12-21T04:14:40.537
> 
> 标签：mysql, sql, database, web, nosql

我正在研究 SQL 和 NoSQL 数据库——即 MySQL 和 DynamoDB（都在 AWS）。

我正在构建一个约会/社交网络，我构建的演示一直在使用一个 MySQL 数据库，其中包含大约 50 个表用于数据的逻辑分离，然后使用 SQL 查询（通常带有连接）来提取所需的数据块以发送回浏览器。

我正在迁移到 AWS 并正在重建系统，并想知道是否有可能在 NoSQL 中 100% 编写这样的站点。我知道您不知道该网站的具体情况，但可以将其与任何其他约会/社交网络进行比较，例如 facebook（显然更多参与）或 Eharmony/Match Maker 等...

社交网站能否 100% 建立在 NoSQL 之上？或者 NoSQL 和 SQL 的混合会变得现实吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T04:45:18.783

如果没有更深入地了解您所追求的功能以及您将使用哪种语言编写网站，这是一个非常难以回答的问题。有许多不同类型的 NoSQL 解决方案。

像 Dynamo 和 Cassandra 这样的 NoSQL 数据库是*键值存储*。它们提供了一组与 MongoDB 和 RavenDB 等*文档数据库*非常不同的功能。还有很多其他类型。

就个人而言，我会非常乐意编写一个完全基于 RavenDB 的社交媒体网站。但那是因为我倾向于专注于领域驱动设计，并且喜欢用 .Net/C# 编写。它具有您需要的所有功能，例如查询索引、大数据作业的 map/reduce、全文搜索和空间距离邻近搜索。如果你想从 php 或 javascript 编程，你可以使用他们的 http/rest api，但是他们的 C# 客户端更容易使用。

不过，您的要求可能与我的不同。我鼓励您在选择一种之前尝试几种不同的 NoSQL 技术。您可能仍然会发现您需要一个 SQL（或 MySQL）数据库来处理您的 NoSQL 解决方案无法处理的某些事情。例如，不建议将 RavenDB 用于临时报告 - 许多人设置单独的 SQL Server 数据库并将数据从 Raven 复制到 SQL 中，以便他们可以为高级用户提供单独的报告数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T04:20:32.597

要记住的最重要的事情是大多数 noSQL 引擎（例如[Cassandra](http://cassandra.apache.org/)）不支持查询，因此这必须成为您设计中的一个因素（即，您在 SQL 中认为理所当然的许多事情，例如 JOIN 在 noSQL 解决方案中要困难得多） . 话虽如此，您绝对可以使用 noSQL 解决方案构建功能齐全的应用程序。我鼓励您查看许多供应商提供的资源，例如 Cassandra、MongoDB、Dyanamo 等。

# windows - 如何枚举Windows控制面板中的所有设置

> ID：13984183
> 
> 赞同：1
> 
> 时间：2012-12-21T04:14:49.200
> 
> 标签：windows, delphi, winapi, windows-shell

我发现当我在“搜索控制面板”中输入文字时，它可以找到一些控制惩罚设置。 ![在此处输入图像描述](../Images/e5f0506b4258926516783aa99b65ec14.png)

所以我想通过windows shell或其他方式枚举所有设置

```
var
  psfDeskTop: IShellFolder;
  psfControl: IShellFolder;

  pidControl: PITEMIDLIST;
  pidChild: PITEMIDLIST;
  pidAbsolute: PItemIdList;

  pEnumList: IEnumIDList;
  celtFetched: ULONG;

  FileInfo: SHFILEINFOW;

begin

  OleCheck(SHGetDesktopFolder(psfDeskTop));
  OleCheck(SHGetSpecialFolderLocation(0, CSIDL_CONTROLS, pidControl));
  OleCheck(psfDeskTop.BindToObject(pidControl, nil, IID_IShellFolder, psfControl));
  OleCheck(psfControl.EnumObjects(0, SHCONTF_NONFOLDERS or SHCONTF_INCLUDEHIDDEN or SHCONTF_FOLDERS, pEnumList));

  while pEnumList.Next(1, pidChild, celtFetched) = 0 do
  begin

    pidAbsolute := ConcatPIDLs(pidControl, pidChild);
    SHGetFileInfo(LPCTSTR(pidAbsolute), 0, FileInfo, SizeOf(FileInfo), SHGFI_PIDL
      or SHGFI_DISPLAYNAME);
   // SHGetFileInfo can get name and icon
   //Do something to save item name and icon

  end;
end; 
```

此代码无法获取特定设置，只需获取所有控制面板项。所以我找到了一个叫做[GodMode](http://en.wikipedia.org/wiki/Windows_Master_Control_Panel_shortcut)它可以在控制面板中显示所有设置

代码 ：

```
var
  psfDeskTop : ISHellFolder;
  psfGodeMode : ISHellFolder;
  pidGodMode : PITEMIDLIST;
  pidAbsolute : PITEMIDLIST;
  pidChild : PITEMIDLIST;
  pEnumList : IEnumIDList;
  cbEaten : ULONG;
  dwAttribute : ULONG;
  celtFetched: ULONG;

begin

  SHGetDesktopFolder(psfDeskTop);
   psfDeskTop.ParseDisplayName(0, nil,
    '::{ED7BA470-8E54-465E-825C-99712043E01C}', cbEaten, pidGodMode,
    dwAttribute);
  psfDeskTop.BindToObject(pidGodMode, nil, IID_IShellFolder,
    psfGodeMode);

  //Get error in this line  
  psfGodeMode.EnumObjects(0, SHCONTF_NONFOLDERS or SHCONTF_FOLDERS,
    pEnumList);

  while pEnumList.Next(0, pidChild, celtFetched) = 0 do
  begin
    //.... 
  end;

end; 
```

但它不起作用，所以我的问题是：有没有办法枚举 Windows 控制面板中的所有设置？

# javascript - 用于不同尺寸的单个图像的 jQuery 或 Javascript 图像查看器？

> ID：13984187
> 
> 赞同：-1
> 
> 时间：2012-12-21T04:15:10.557
> 
> 标签：javascript

我有一个图像。我想在一个小窗口中调整该图像的大小。如何通过使图像更大和更小的图像来拉伸窗口中的图像。

宽度和高度属性无法正常工作。我的意思是如何通过如下给出宽度和高度来拉伸图像；

```
width=300px;height=300px
again width=600px;height=600px;
and width=900px;height=900px;
and widht=1800px;height=1800px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:35:00.087

设置`auto`将保持与宽度的比率的高度。此外，HTML 属性不需要“px”单位，这适用于 CSS。

```
<img src="someimage.jpg" width="300" height="auto" alt="Some image">
<img src="someimage.jpg" width="600" height="auto" alt="Some image">
<img src="someimage.jpg" width="900" height="auto" alt="Some image">
<img src="someimage.jpg" width="1800" height="auto" alt="Some image"> 
```

您标记了这个 javascript。如果您想使用 JavaScript 更改大小，则需要先使用 id 引用图像，然后再更改属性。

```
<script>
  window.onload = function(){
    document.getElementById('testimg').width = 500;
  }
</script>

<img id="testimg" src="http://farm9.staticflickr.com/8426/7758832526_cc8f681e48.jpg" height="auto"> 
```

如果您希望图像随窗口变大或变小，例如在弹出窗口中，请将宽度设置为`100%`并将高度设置为`auto`。这将使图像符合其包含的元素。

# javascript - 9 之前的 IE 中不显示字符串的修剪

> ID：13984188
> 
> 赞同：0
> 
> 时间：2012-12-21T04:15:25.310
> 
> 标签：javascript, string, internet-explorer-8, trim

```
 {{if inventory.title.length > 38}}
            <p class="p1">
                {{>(inventory.title.substring(0, 38) + '...').trim()}}
            </p> 
```

如何更正此代码以在 IE9 之前的 IE 中显示。我继续得到以下

> 错误：对象不支持属性或方法“修剪”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:18:23.310

在 ECMAScript 5 之前，Trim 不是 String 的一部分。IE9 是第一个支持 ECMAScript 5 的浏览器。

虽然不建议修改基类的原型，
但如果您愿意，可以添加以下代码行以便 String.trim 在所有浏览器中工作。

```
 if (!String.prototype.trim) {
    String.prototype.trim = function() {
      return this.replace(/^\s+|\s+$/g, '');
    }
  } 
```

# mongodb - 由于未经授权的锁类型，无法连接到 mongodb

> ID：13984192
> 
> 赞同：0
> 
> 时间：2012-12-21T04:15:58.113
> 
> 标签：mongodb, jakarta-ee, jelastic

我正在尝试连接到部署在 jelastic 云中的 mongodb

如果我尝试使用 jelastic 的 mongodb 节点中已经提供的测试数据库 ..它工作正常。但是如果我创建自己的数据库并尝试访问其中创建的集合 ..我得到以下异常

```
com.mongodb.MongoException: unauthorized db:appdb lock type:-1 client:192.168.1.53 
```

为什么会发生这种情况？我该如何解决？

我正在从文件 mydb.cfg 中读取配置

```
host=mongodb-***.jelastic.servint.net
dbname=appdb
user=admin
password=***** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T06:11:58.117

在 Rock Mongo Web 界面中选择目标数据库并在配置面板中选择“更多”。这必须向您显示拥有 DB 权限的用户列表。 ![在此处输入图像描述](../Images/e2c8eceb04e7a6fe2bdc18928374264d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:26:11.423

您是否为自定义集合设置了用户和权限？尝试检查“身份验证”部分下的配置？

无论如何，据说管理员用户应该拥有所有数据库的权限。您可以尝试在[Jelastic 社区解决此问题](http://community.jelastic.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T11:37:56.823

连接到 mongodb 自定义命名数据库时，我遇到了同样的问题。为了成功连接，我为我的自定义命名数据库创建了一个用户。（我将提供的管理员用户及其密码添加到授权用户，如图所示）。

# c++ - 从文件中读取短

> ID：13984194
> 
> 赞同：3
> 
> 时间：2012-12-21T04:16:13.760
> 
> 标签：c++, file-io

我正在尝试从二进制文件中读取一个简短的内容，但我最终得到了很多 0

这是写函数

```
void AudioBuffer::WriteToFile(const string& strFilename)
{
  fstream fout(strFilename.c_str(), ios::out|ios::binary);
  short sample;
  for (VECTOR_SHORT_ITER iter = m_vectorSamples.begin(); iter !=  m_vectorSamples.end(); iter++)
  {
    sample = (short) *iter;
    fout.write((char *) &sample, sizeof(short));
  }
  fout.close();
} 
```

这就是我所拥有的阅读功能，我知道 atoi 可能会溢出

```
 void AudioBuffer::FileToBuffer(const string& strFilename)
  {
      fstream fin(strFilename.c_str(), ios::in|ios::binary);
      short iSample;
      char *temp = new char[sizeof(short)];

      cout<<"Samples Output"<<endl;
      while(!fin.eof())
      {
          fin.read(temp,sizeof(short));
          iSample = atoi(temp);
          cout<<iSample< " ";
          m_vectorSamples.push_back(iSample);
          *temp = NULL;
       }
      fin.close();
  } 
```

此外，通过执行 *temp = NULL 清除 char 指针不是最好的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:31:39.220

由于您只是将原始位写入文件，因此您希望以相同的方式读取，按以下顺序读取：

```
void AudioBuffer::FileToBuffer(const string& strFilename)
{
    ifstream fin(strFilename.c_str(), ios::in|ios::binary);
    short iSample;

    cout<<"Samples Output"<<endl;
    while(fin.read((char *)&iSample,sizeof(short)))
    {
        cout<<iSample<< " ";
        m_vectorSamples.push_back(iSample);
    }
} 
```

# twisted - IronPython 的 Twisted 库

> ID：13984200
> 
> 赞同：0
> 
> 时间：2012-12-21T04:16:59.763
> 
> 标签：twisted, ironpython

我计划将 Python 2.7 应用程序移植到 IronPython 2.7+

我在 2009 年看到它正在开发中……这完成了吗？

或者扭曲的库是否可以在 IronPython 上工作……有解决方法还是我现在应该停止？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:28:41.890

我怀疑 Twisted 不会在 IronPython 上进行一些重大工作。Twisted 相当复杂。但是，除非有人尝试，否则它永远不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:36:54.380

Twisted 尚未移植到 IronPython。通过查看 Twisted 的持续集成系统，您可以很好地了解 Twisted 支持哪些平台：[http ://buildbot.twistedmatrix.com/boxes-supported?branch=trunk&num_builds=10](http://buildbot.twistedmatrix.com/boxes-supported?branch=trunk&num_builds=10)

# html - 为什么子 div 会溢出其父 div？

> ID：13984201
> 
> 赞同：0
> 
> 时间：2012-12-21T04:17:00.813
> 
> 标签：html, css

我已经盯着这个有一段时间了，但无济于事我可以想出一个保持网站流动性的解决方案。

我要完成的工作是`#right-content`填充其父级内部的所有可用空间高度，即`#bottom-container`. 所以它保持流动性。

但是给它一个`min-height:100%`会使它溢出父母。

可以在以下链接中找到实时示例

[**现场示例**](http://alan-michael.com/clients/debra/index.html)

我试图完成的一个静态示例。

[**静态示例**](http://alan-michael.com/clients/debra/remix/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:12:39.200

尝试以下css `#mCSB_1`，

```
#mCSB_1
{
    position: relative;
    height: 500px;
    max-width: 100%;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:58:25.083

您需要在#left-content 上设置一个浮点数。将此添加到您的CSS：

```
#left-content {
float:left;
width:700px;
} 
```

并从 #right 内容中删除 inline-block ：

```
#right-content {
margin-left:750px;
display:block
min-width:250px;
} 
```

这将保持右侧容器的液体格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T06:02:57.877

你的 CSS 是一个主要问题

以下 CSS 来自您想要实现的 URL

```
#right-content {
display: inline-block;
width: 38%;
font-size: 14pt;
font-family: Verdana;
max-height: 600px;
vertical-align: top;
padding: 5px;
float: right;
margin-right: 25px;
overflow: hidden;
} 
```

并且遵循 CSS 是您所拥有的形式

```
#right-content {
display: inline-block;
width: 36%;
font-family: Verdana;
height: 99.99%;
vertical-align: top;
padding: 5px;
} 
```

希望这会给你一些线索来继续

**编辑 - 1**

CSS 的主要问题是最大高度。您需要为父 DIV 指定正确的高度。如果你想要基于分辨率的动态 CSS，你需要使用 JS 更新你的高度。提示检查这个

[jQuery屏幕分辨率高度调整](https://stackoverflow.com/questions/1271675/jquery-screen-resolution-height-adjustment)

# c++ - 用精神将日期时间字符串解析为 time_t 值

> ID：13984204
> 
> 赞同：2
> 
> 时间：2012-12-21T04:17:23.163
> 
> 标签：c++, parsing, boost-spirit

我需要将日期时间字符串解析`2012-12-21 12:10:35`为`time_t`使用`boost::spirit`. 这是我的代码片段：

```
tc_     =   lexeme[int_[phx::ref(tm_.tm_year)=(_1-1900)]>>'-'
                     >>int_[phx::ref(tm_.tm_mon)=(_1-1)]>>'-'
                    >>int_[phx::ref(tm_.tm_mday)=_1]>>+space
                    >>int_[phx::ref(tm_.tm_hour)=_1]>>':'
                     >>int_[phx::ref(tm_.tm_min)=_1]>>':'
                    >>int_[phx::ref(tm_.tm_sec)=_1]]    [_val = (long)mktime(&tm_)]; 
```

其中`tc_`是`qi`类型的规则：`qi::rule<Iterator, long(), Skipper>`，`tm_`是类型的成员变量`struct tm`。

代码编译，但不起作用。似乎`mktime()`根本没有被调用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T23:01:12.530

你可以在 c++ 11 vi 正则表达式中做到这一点。如果您的编译器足够新，这将是可移植的和标准的。

```
#include <iostream>
#include <string>
#include <regex>
using namespace std;

int main()
{
    std::regex txt_regex("([0-9]{4})[-]([0-9]{2})[-]([0-9]{2})[ ]([0-9]{2})([:])([0-9]{2})([:])([0-9]{2})");//  
    string strTmp;
    strTmp="2010-12-15 15:25:46";
    std::smatch match;
    std::regex_search( strTmp, match, txt_regex );

    if(regex_match(strTmp,txt_regex))
         cout<<"Ok"<<endl;
    else
    {
    cout<<"Invalid input"<<endl;
    return 0;
    }
    if ( match.empty() )
    {
         std::cout << "...no more matches" << std::endl;
         return 0;
    }
    for ( auto x : match )
    {
        std::cout << "found: " << x << std::endl;
    }
    string str = match.suffix().str();
    cout <<str <<std::endl;
    return 0; 
} 
```

有了这个，您可以显示要显示的字符串的不同部分，然后填充结构。

希望它有所帮助并像往常一样开放评论（如果有不清楚或不完整的地方）。

# jquery - Ajax POST 有时无法调用 ASP.NET MVC 控制器操作

> ID：13984205
> 
> 赞同：0
> 
> 时间：2012-12-21T04:17:39.380
> 
> 标签：jquery, ajax, asp.net-mvc

我正在开发一个基于 ASP.NET MVC 3 的应用程序，并在尝试对控制器操作之一执行 Ajax POST（通过 jQuery）时看到间歇性问题。有时，控制器动作被调用得很好，代码按预期执行，但其他时候，控制器动作永远不会被调用，浏览器基本上挂在那里，直到请求最终超时。

这令人沮丧，因为我们无法始终如一地重现问题。另一方面，它发生得足够频繁，以至于我们通常可以不费力气就让它发生。我可以在 Firebug 的“Net”选项卡中看到浏览器肯定会发出 POST 请求，而且我知道它访问了正确的 URL。我还没有做的一件事，但我在其他地方看到过建议，就是在中间设置 Fiddler 以查看请求的进展情况。但是假设它可以到达 Web 服务器 (IIS)，那么我在调试它的下一步应该是什么？我没有强大的 Windows/.NET/IIS 背景，因此我不确定从哪里开始寻找。

**更新：**

这是执行 POST 的 jQuery 代码：

```
var self = this;
var jsonData = foo.toJSONString();

$.ajax({
    type: 'POST',
    dataType: 'json',
    url: '/MyController/AddFoo',
    data: { foo: jsonData },
    success: function (data) {
        self.showSuccessfulSubmissionDialog();
    },
    error: function (xhr, textStatus, error) {
       self.showUnsuccessfulSubmissionDialog(xhr.responseText);
    }
}); 
```

这是控制器操作的 C# 代码：

```
[HttpPost]
[Authorize]
public JsonNetResult AddFoo(string foo)
{
    var fooObject = JsonConvert.DeserializeObject<Foo>(foo, SerializerSettings);
    try
    {
        // Do something with fooObject
    }
    catch (Exception ex)
    {
        var formattedString = ex.Message.Replace("\r\n", " ");
        return BuildErrorResult("An error occured writing data to the server: " +
            formattedString);
     }
     return BuildSuccessResult();
} 
```

一些小细节（尤其是变量名）已更改，但其要点如下所示。同样如前所述，在这种“中断”的情况下，Firebug 声称 POST 已执行，但我从未在控制器操作开始时到达断点；所以在途中的某个地方，球会掉下来。除了那些没有的时候，控制器动作执行没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:12:01.567

一种方法是使用“完成”而不是“成功”，当服务器返回 200 状态代码时会触发成功。每次请求完成时都会触发 Complete

```
$.ajax({
...
    complete: function(jqXHR, textStatus) {
       self.showUnsuccessfulSubmissionDialog(xhr.responseText);
    }
...
}); 
```

# apache - 是否可以在自己的服务器上安装 Shibboleth SP？

> ID：13984211
> 
> 赞同：0
> 
> 时间：2012-12-21T04:18:22.867
> 
> 标签：apache, iis, shibboleth

是否可以将 Shibboleth 服务提供程序 (SP) 安装在与 Web 应用程序不同的机器上？我将 SP 与 IIS 和我的 Web 应用程序放在同一台服务器上，我想将 SP 移到单独的服务器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:30:35.823

我看不出你的问题和答案之间有任何关系。答案是**肯定**的，您可以将 Shibboleth SP 安装在 IIS 以外的其他设备上

一般安装说明

*   [适用于 Windows 的 Apache](https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPWindowsApacheInstaller)（我相信您需要该操作系统的一些东西）
*   [所有 Windows 安装](https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPWindowsInstall)（包括 IIS 5、6、7 和 Apache）
*   [所有 Linux 教程](https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPLinuxInstall)（在子页面中查找您的系统）
*   [苹果电脑](https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPMacInstall)
*   [安装 Shibboleth 以保护 Java Servlet](https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPJavaInstall)

希望这将有助于任何其他知识寻求者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T03:09:56.650

看看如何将 SP 服务器与 Web 服务器分开。

我找到了这个[链接](https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPOneMany)。

根据这个网站，我们必须自己制作胶水，Shibboleth 不会为我们做这件事。

# android - 使用 json 字符串填充的 Android 列表视图 - UI 设计

> ID：13984213
> 
> 赞同：1
> 
> 时间：2012-12-21T04:18:33.763
> 
> 标签：android, android-layout, user-interface, android-listview

我想要一个由 json 填充并且看起来与图像相似的列表视图。

我以前使用过来自 android 的普通列表视图，但我不喜欢它的外观和感觉。

我的问题。他们是如何创建这些列表视图的？他们甚至是列表视图还是使用了其他东西？我只想为我的 json 内容提供一个不错的可滚动列表。

任何想法或建议将不胜感激。![在此处输入图像描述](../Images/34c30fda0fffe0b7f36b223977a5524e.png) 教程的链接也很棒。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:26:08.447

当然 listview 可以做到这一点。您可以为单元格定义一个布局 xml，然后在适配器的 getView 方法中，从布局 xml 中扩展单元格视图，然后根据您的数据配置单元格中的元素。

# c - 嵌入式 C：寄存器访问

> ID：13984214
> 
> 赞同：4
> 
> 时间：2012-12-21T04:18:34.000
> 
> 标签：c, compiler-construction, embedded, msp430, iar

假设我们想写地址 say `0xc000`，我们可以在 C 中定义一个宏为：

```
#define LCDCW1_ADDR       0xc000
#define READ_LCDCW1()     (*(volatile uint32_t *)LCDCW1_ADDR)
#define WRITE_LCDCW1(val) ((*(volatile uint32_t *)LCDCW1_ADDR) = (val)) 
```

我的问题是，当使用任何微控制器时，考虑一个示例 MSP430，P1OUT 寄存器地址为 0x0021。

但是当我们使用 P1OUT=0xFFFF; // 它为 P1OUT 分配一个值 0xFFFF。

我的问题是它如何写入该地址，例如在本例中为 0x0021。IDE 是 IAR。我在下面定义的头文件 msp430g2553.h 中找到：

```
#define P1OUT_              (0x0021u)  /* Port 1 Output */
DEFC(   P1OUT             , P1OUT_) 
```

我想它正在定义地址，但是要写入或读取的其他宏在哪里。

谁能解释一下 P1OUT 如何在该特定地址位置写入的流程？还要让我知道你在 0x0021u 中是什么意思？

谢谢

* * *

到目前为止，我发现的细节是：

在 msp430g2553.h

```
#ifdef __IAR_SYSTEMS_ICC__
#include "in430.h"
#pragma language=extended

#define DEFC(name, address) __no_init volatile unsigned char name @ address;
#define DEFW(name, address) __no_init volatile unsigned short name @ address;
#define DEFXC  volatile unsigned char
#define DEFXW  volatile unsigned short

#endif  /* __IAR_SYSTEMS_ICC__  */

#ifdef __IAR_SYSTEMS_ASM__
#define DEFC(name, address) sfrb name = address;
#define DEFW(name, address) sfrw name = address;

#endif /* __IAR_SYSTEMS_ASM__*/

#define P1OUT_              (0x0021u)  /* Port 1 Output */
DEFC(   P1OUT             , P1OUT_) 
```

io430g2553.h 说

```
__no_init volatile union
{
  unsigned char P1OUT;   /* Port 1 Output */

  struct
  {
    unsigned char P0              : 1; /*  */
    unsigned char P1              : 1; /*  */
    unsigned char P2              : 1; /*  */
    unsigned char P3              : 1; /*  */
    unsigned char P4              : 1; /*  */
    unsigned char P5              : 1; /*  */
    unsigned char P6              : 1; /*  */
    unsigned char P7              : 1; /*  */
  }P1OUT_bit;
} @0x0021; 
```

有人可以解释上述定义的作用吗？我在 MSP430 IAR C/C++ 编译器中找到的详细信息：

```
Example of using __write and __read
The code in the following examples use memory-mapped I/O to write to an LCD
display:
__no_init volatile unsigned char LCD_IO @ address;
size_t __write(int Handle, const unsigned char * Buf,
size_t Bufsize)
{
size_t nChars = 0;
/* Check for stdout and stderr
(only necessary if file descriptors are enabled.) */
if (Handle != 1 && Handle != 2)
{
return -1;
}
for (/*Empty */; Bufsize > 0; --Bufsize)
{
LCD_IO = * Buf++;
++nChars;
}
return nChars;
}
The code in the following example uses memory-mapped I/O to read from a keyboard:
__no_init volatile unsigned char KB_IO @ 0xD2;
size_t __read(int Handle, unsigned char *Buf, size_t BufSize)
{
size_t nChars = 0;
/* Check for stdin
(only necessary if FILE descriptors are enabled) */
if (Handle != 0)
{
return -1;
}
for (/*Empty*/; BufSize > 0; --BufSize)
{
unsigned char c = KB_IO;
if (c == 0)
break;
*Buf++ = c;
++nChars;
}
return nChars;
} 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:57:29.863

这是“编译器如何根据我编写的代码生成代码”，只有编译器编写者才能真正为您回答。

很明显，上面的代码中有几个非标准的C组件__no_init，@的使用等等。在我的阅读中，它告诉编译器“这是一个硬件端口，提供一个无符号字符，它的地址是0xd2”。编译器将生成正确类型的指令来读取和写入这样的端口 - 具体如何工作取决于编译器、编译器为其生成代码的处理器等。

P10out 结构定义位域，它是 C 标准的一部分。谷歌是你的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:49:27.760

间接运算符（一元`*`）返回与指针地址处的值等效的左值。

```
#define LCDCW1_ADDR       0xc000

void f()
{
     uint32_t a = *(volatile uint32_t *)LCDCW1_ADDR; //reading from LCDCW1_ADDR
     *(volatile uint32_t *)LCDCW1_ADDR = 0xffff;     //writing to LCDCW1_ADDR
     /*...*/
} 
```

基本上，编译器很聪明，可以看到，该`a = *addr;`表达式的意思是“从地址读取值`addr`并将其放入`a`。同时`*addr = 0xffff`将被解释为“将 0xffff 放入`addr`地址”

在您的情况下，您可以`READ_LCDCW1()`在赋值运算符的左侧和右侧使用宏。不需要单独的`WRITE_LCDCW1(val)`宏。我们可以将前面的代码改写为：

```
#define LCDCW1_ADDR       0xc000
#define LCDCW1     (*(volatile uint32_t *)LCDCW1_ADDR)

void g()
{
     uint32_t a = LCDCW1; //reading from LCDCW1_ADDR
     LCDCW1 = 0xffff;      //writing to LCDCW1_ADDR
     /*...*/
} 
```

`P1OUT`来自 IAR 的宏很可能以与上述相同的方式定义`LCDCW1`（如果您遵循`DEFC()`定义，您最终会找到类似的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T07:36:49.903

> 我的问题是，当使用任何微控制器时，请考虑一个示例 MSP430

您没有使用任何微控制器，您使用的是 MSP430。它有内存映射 IO（这对我们程序员来说非常好用）。内存映射会因设备而异。任何与地址相关的问题的答案都在您特定设备的用户指南中。TI 制作了非常好的用户指南。找到适合您特定设备的设备并仔细阅读。

> 我的问题是它如何写入该地址，例如在本例中为 0x0021。IDE 是 IAR。

编译器胶水代码。您的编译器供应商将为您提供必要的标头、宏和函数来写入您的设备地址。使用编译器供应商的代码，除非您可以绝对证明它不适合您的情况（使用 IAR，我假设 99.9% 它可以工作，您得到了您所支付的费用。可能使用全新的设备在实现中存在错误，但除非你能证明它，否则可能不会）。

> 还要让我知道你在 0x0021u 中是什么意思？

根据您发布的内容，这是端口 1 的基地址。看起来您可以控制端口 1 上的 8 个引脚。

```
#pragma language=extended 
```

从这一点开始，您必须假设将会发生各种“神奇”（也称为非标准 C）的事情。您可以推断出您认为编译器正在做什么（并且在大多数情况下是相当清楚的），但是这是实现定义的，这意味着只有 IAR 编译器支持接下来会发生的事情。查看编译器文档以了解特定的命令和含义。最值得注意的是 __no_init 和 @ 符号是非标准的。__no_init 不会在 C 启动时初始化变量（即在 main() 运行之前）。@ 看起来像是将提供给链接器的绝对地址指令（我在这里可能错了）。

```
__no_init volatile union
{
  unsigned char P1OUT;   /* Port 1 Output */

  struct
  {
    unsigned char P0              : 1; /*  */
    unsigned char P1              : 1; /*  */
    unsigned char P2              : 1; /*  */
    unsigned char P3              : 1; /*  */
    unsigned char P4              : 1; /*  */
    unsigned char P5              : 1; /*  */
    unsigned char P6              : 1; /*  */
    unsigned char P7              : 1; /*  */
  }P1OUT_bit;
} @0x0021; 
```

这定义了一种获取端口 1 字节特定位的方法。这使您可以操作 IO 引脚。有人会说 OMG 位域是可移植的，是实现定义的！是的，他们是对的，但 IAR 是实施者，所以在这种情况下，请相信他们会做正确的事。

最后一点，您可能只想使用定义的 IAR 宏。您为他们支付了很多钱（除非您使用的是免费的 kickstart 版本）。您可以专注于编写您的应用程序，而不是通过这种方式操作位。IAR 确实很好地标准化了它们的名称，因此您也可以在相关部分上使用相同的代码（或非常相似的代码）。如果您切换到不同的编译器，所有这些都会消失，您将不得不按照新编译器的方式进行操作。这种方法的优点和缺点，可能没有“正确”的答案。

# ios - 以编程方式将 UINavigationBar 与通过 Interface Builder 添加的其他控件对齐

> ID：13984216
> 
> 赞同：0
> 
> 时间：2012-12-21T04:19:07.773
> 
> 标签：ios, xcode

如果我将视图控制器推到 NavController 上，在设计此视图时有没有办法让控件正确排列？

这是我遇到的问题，我必须像这样对齐 TableView 和 MapView 才能让它在加载到导航控制器时正确显示：

![在此处输入图像描述](../Images/b5f0bd79c36f8acdf488c4cd26c41a58.png)

这似乎是错误的。如您所见，mapview 与编辑器中的 tableview 重叠，但是当它运行时它们正确排列。如果我将 mapview 提升到直接在 tableview 的顶部排列，则在运行时，两者之间会出现白色间隙。我意识到 NavBar 正在推动事情，或者这是我的猜测。

我可以设置实用程序中的任何内容来处理此问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:22:16.330

您可以手动告诉视图控制器在属性检查器的界面构建器中显示导航栏。

![在此处输入图像描述](../Images/70a5bd83991427bad5bc9a76f1eb3e17.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:42:02.220

选择您的视图，然后在 File Inspector 中，取消选中**Use Autolayout**。它可能会帮助你。

# git - 还是不能推送到github

> ID：13984227
> 
> 赞同：-6
> 
> 时间：2012-12-21T04:20:31.600
> 
> 标签：git, github

在我的上一篇文章（[无法推送到 git hub](https://stackoverflow.com/questions/13965622/cant-push-to-git-hub)）中，我说我正在开始 ch。2 在 Hartl 的 Ruby on Rails 教程中。我已经得到了ch中的所有东西。1 工作并按照 ch 中的规定完成了所有工作。2.但是当我尝试这样做时：

```
$ git push -u origin master 
```

我得到回应：

```
ERROR: repository not found
fatal: could not read from remote repository
Please make sure you have the correct access rights and that the repository exists. 
```

从那时起，我做了：

```
ssh -T git@github.com. 
```

回应是

```
Hi username! Your have successfully authenticated, etc. 
```

我也做过：

```
git remote -v. 
```

回应是

```
origin git@github.com:myusername/demo_app.git (fetch)
origin git@github.com:myusername/demo_app.git (push) 
```

在我看来，这表明一切正常，但我仍然收到相同的错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:26:17.107

来自您的推送命令的错误消息显示“找不到存储库”。这意味着您还没有在 github 上创建远程存储库。

转到[https://github.com/new](https://github.com/new)并创建一个名为`demo_app`.

# image - Kinetic.Image 配置cornerRadius 不起作用

> ID：13984228
> 
> 赞同：0
> 
> 时间：2012-12-21T04:20:45.997
> 
> 标签：image, kineticjs

我目前使用 KineticJS（版本：4.2.0）来做某事，但是当我想为动态图像对象设置角半径时，它似乎根本不起作用。有人有什么想法吗？我的代码是这样的：

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 901,
    height: 532,
});
var bg = new Kinetic.Layer(); // slot's shell
var bgObj = new Image();
bgObj.onload = function() {
    var item = new Kinetic.Image({
        x: 0,
        y: 0,
        width: 901,
        height: 532,
        image: bgObj,
        cornerRadius: 25
    });
    bg.add(item);
    stage.add(bg);
};
bgObj.src = "background.png"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:34:14.737

目前还没有为 Image 实现圆角半径。事实上，文档存在错误，因为只有 Rectangle 支持圆角。图像将很快支持圆角。

# vba - 如何为 VBA 应用程序创建产品密钥，以防止非法分发软件？

> ID：13984229
> 
> 赞同：7
> 
> 时间：2012-12-21T04:20:58.773
> 
> 标签：vba, excel

我正在开发一个 Excel VBA 应用程序。

我的公司想把它变成一种产品。此应用程序应该只能安装在一个系统上。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-21T06:10:38.643

这只是一个关于如何确保您的产品仅安装在一个系统上的基本示例。

逻辑：

1.  检索硬件 ID（例如：硬盘编号、CPU 编号等...）
2.  您还可以询问用户名和电子邮件地址
3.  加密上述信息以生成一个`Unique Code`（这是在应用程序中完成的）
4.  用户向您发送`Unique Code`（*通过电子邮件/在线激活/电话*）
5.  您向用户发送一个`Activation Id`基于`Unique Code`

**获取硬盘序列号和 CPU 编号的代码**

将此代码粘贴到类模块中（*不是我的代码。代码中提到的版权信息*）

```
Private Const VER_PLATFORM_WIN32S = 0
Private Const VER_PLATFORM_WIN32_WINDOWS = 1
Private Const VER_PLATFORM_WIN32_NT = 2

Private Const DFP_RECEIVE_DRIVE_DATA = &H7C088

Private Const FILE_SHARE_READ = &H1
Private Const FILE_SHARE_WRITE = &H2
Private Const GENERIC_READ = &H80000000
Private Const GENERIC_WRITE = &H40000000
Private Const OPEN_EXISTING = 3
Private Const CREATE_NEW = 1

Private Enum HDINFO
    HD_MODEL_NUMBER
    HD_SERIAL_NUMBER
    HD_FIRMWARE_REVISION
End Enum

Private Type OSVERSIONINFO
    dwOSVersionInfoSize As Long
    dwMajorVersion As Long
    dwMinorVersion As Long
    dwBuildNumber As Long
    dwPlatformId As Long
    szCSDVersion As String * 128
End Type

Private Type IDEREGS
    bFeaturesReg As Byte
    bSectorCountReg As Byte
    bSectorNumberReg As Byte
    bCylLowReg As Byte
    bCylHighReg As Byte
    bDriveHeadReg As Byte
    bCommandReg As Byte
    bReserved As Byte
End Type

Private Type SENDCMDINPARAMS
    cBufferSize As Long
    irDriveRegs As IDEREGS
    bDriveNumber As Byte
    bReserved(1 To 3) As Byte
    dwReserved(1 To 4) As Long
End Type

Private Type DRIVERSTATUS
    bDriveError As Byte
    bIDEStatus As Byte
    bReserved(1 To 2) As Byte
    dwReserved(1 To 2) As Long
End Type

Private Type SENDCMDOUTPARAMS
    cBufferSize As Long
    DStatus As DRIVERSTATUS
    bBuffer(1 To 512) As Byte
End Type

Private Declare Function GetVersionEx _
    Lib "kernel32" Alias "GetVersionExA" _
    (lpVersionInformation As OSVERSIONINFO) As Long

Private Declare Function CreateFile _
    Lib "kernel32" Alias "CreateFileA" _
    (ByVal lpFileName As String, _
    ByVal dwDesiredAccess As Long, _
    ByVal dwShareMode As Long, _
    ByVal lpSecurityAttributes As Long, _
    ByVal dwCreationDisposition As Long, _
    ByVal dwFlagsAndAttributes As Long, _
    ByVal hTemplateFile As Long) As Long

Private Declare Function CloseHandle _
    Lib "kernel32" _
    (ByVal hObject As Long) As Long

Private Declare Function DeviceIoControl _
    Lib "kernel32" _
    (ByVal hDevice As Long, _
    ByVal dwIoControlCode As Long, _
    lpInBuffer As Any, _
    ByVal nInBufferSize As Long, _
    lpOutBuffer As Any, _
    ByVal nOutBufferSize As Long, _
    lpBytesReturned As Long, _
    ByVal lpOverlapped As Long) As Long

Private Declare Sub ZeroMemory _
    Lib "kernel32" Alias "RtlZeroMemory" _
    (dest As Any, _
    ByVal numBytes As Long)

Private Declare Sub CopyMemory _
    Lib "kernel32" Alias "RtlMoveMemory" _
    (Destination As Any, _
    Source As Any, _
    ByVal Length As Long)

Private Declare Function GetLastError _
    Lib "kernel32" () As Long

Private mvarCurrentDrive As Byte
Private mvarPlatform As String

Public Property Get Copyright() As String
    Copyright = "HDSN Vrs. 1.00, (C) Antonio Giuliana, 2001-2003"
End Property

Public Function GetModelNumber() As String
    GetModelNumber = CmnGetHDData(HD_MODEL_NUMBER)
End Function

Public Function GetSerialNumber() As String
    GetSerialNumber = CmnGetHDData(HD_SERIAL_NUMBER)
End Function

Public Function GetFirmwareRevision() As String
    GetFirmwareRevision = CmnGetHDData(HD_FIRMWARE_REVISION)
End Function

Public Property Let CurrentDrive(ByVal vData As Byte)
    If vData < 0 Or vData > 3 Then
        Err.Raise 10000, , "Illegal drive number"   ' IDE drive 0..3
    End If
    mvarCurrentDrive = vData
End Property

Public Property Get CurrentDrive() As Byte
    CurrentDrive = mvarCurrentDrive
End Property

Public Property Get Platform() As String
    Platform = mvarPlatform
End Property

Private Sub Class_Initialize()
    Dim OS As OSVERSIONINFO

    OS.dwOSVersionInfoSize = Len(OS)
    Call GetVersionEx(OS)
    mvarPlatform = "Unk"
    Select Case OS.dwPlatformId
        Case Is = VER_PLATFORM_WIN32S
            mvarPlatform = "32S"
        Case Is = VER_PLATFORM_WIN32_WINDOWS
            If OS.dwMinorVersion = 0 Then
                mvarPlatform = "W95"
            Else
                mvarPlatform = "W98"
            End If
        Case Is = VER_PLATFORM_WIN32_NT
            mvarPlatform = "WNT"
    End Select
End Sub

Private Function CmnGetHDData(hdi As HDINFO) As String
    Dim bin As SENDCMDINPARAMS
    Dim bout As SENDCMDOUTPARAMS
    Dim hdh As Long
    Dim br As Long
    Dim ix As Long
    Dim hddfr As Long
    Dim hddln As Long
    Dim s As String

    Select Case hdi
        Case HD_MODEL_NUMBER
            hddfr = 55
            hddln = 40
        Case HD_SERIAL_NUMBER
            hddfr = 21
            hddln = 20
        Case HD_FIRMWARE_REVISION
            hddfr = 47
            hddln = 8
        Case Else
            Err.Raise 10001, "Illegal HD Data type"

    End Select

    Select Case mvarPlatform
        Case "WNT"
            hdh = CreateFile("\\.\PhysicalDrive" & mvarCurrentDrive, _
                GENERIC_READ + GENERIC_WRITE, FILE_SHARE_READ + FILE_SHARE_WRITE, _
                0, OPEN_EXISTING, 0, 0)
        Case "W95", "W98"
            hdh = CreateFile("\\.\Smartvsd", _
                0, 0, 0, CREATE_NEW, 0, 0)
        Case Else
            Err.Raise 10002, , "Illegal platform (only WNT, W98 or W95)"
    End Select
    If hdh = 0 Then
        Err.Raise 10003, , "Error on CreateFile"
    End If

    ZeroMemory bin, Len(bin)
    ZeroMemory bout, Len(bout)

    With bin
        .bDriveNumber = mvarCurrentDrive
        .cBufferSize = 512
        With .irDriveRegs
            If (mvarCurrentDrive And 1) Then
                .bDriveHeadReg = &HB0
            Else
                .bDriveHeadReg = &HA0
            End If
            .bCommandReg = &HEC
            .bSectorCountReg = 1
            .bSectorNumberReg = 1
        End With
    End With

    DeviceIoControl hdh, DFP_RECEIVE_DRIVE_DATA, _
                    bin, Len(bin), bout, Len(bout), br, 0

    s = ""
    For ix = hddfr To hddfr + hddln - 1 Step 2
        If bout.bBuffer(ix + 1) = 0 Then Exit For
        s = s & Chr(bout.bBuffer(ix + 1))
        If bout.bBuffer(ix) = 0 Then Exit For
        s = s & Chr(bout.bBuffer(ix))
    Next ix

    CloseHandle hdh

    CmnGetHDData = Trim(s)
End Function 
```

然后，您可以使用

```
'~~> Get the CPU No
CPU = GetWmiDeviceSingleValue("Win32_Processor", "ProcessorID")

'~~> Get the Hard Disk No
Dim h As HDSN

Set h = New HDSN

With h
    .CurrentDrive = 0
    HDNo = .GetSerialNumber
End With

Set h = Nothing 
```

获得此信息后，您可以将其与名字、姓氏和电子邮件地址合并以创建字符串。例如

```
strg = Trim(FirstName) & Chr(1) & Trim(LastName) & Chr(1) & _
       Trim(EmailAddress) & Chr(1) & Trim(CPU) & Chr(1) & Trim(HDNo) 
```

获得字符串后，您可以对其进行加密。这是加密它的另一个基本示例。您可以选择任何您想要的加密类型

```
For i = 1 To Len(strg)
    RandomNo = (Rnd * 100)
    tmp = tmp & Hex((Asc(Mid(strg, i, 1)) Xor RandomNo))
Next 
```

上面保存了加密的`tmp`字符串。

收到此字符串后，您必须对其进行解码并`Activation Id`在此基础上创建一个。您的应用程序应该能够接受`Activation Id`. 您还可以选择将此信息存储在注册表或数据文件中。

一个简单的注册窗口可能如下所示。

![在此处输入图像描述](../Images/68a2ae1de7b6fef1297f109308d4d10f.png)

希望这能让你开始！:)

**IMP**：虽然你可以锁定你的 VBA 项目，但它绝对不是 hack 证明。您可能想探索 VSTO 以创建执行上述操作的 DLL。

# php - jQuery Load 不会将内容加载到 div 中，而是重定向到其他页面。

> ID：13984232
> 
> 赞同：-1
> 
> 时间：2012-12-21T04:21:11.660
> 
> 标签：php, ajax, jquery

好的，所以我正在尝试使用 JQUERY LOAD 方法从另一个页面加载内容，以便在不刷新页面的情况下显示内容。我这样做了，但是当我点击下面从 PHP 生成的链接时，它仍然会将我重定向到另一个页面，而不是将内容加载到`<div class="panel">`

下面是我的代码

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title> MadScore, A Social Scoring Platform </title>
<link rel="stylesheet" type="text/css" href="css/madscore.css">
<link rel="stylesheet" type="text/css" href="css/skins/tango/skin.css" />
<script type="text/javascript" src="javascript/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="javascript/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="javascript/jquery.jcarousel.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel({
        scroll: 1, buttonNextHTML:"<div></div>", buttonPrevHTML:"<div></div>"
    });
});
</script>

//Here is where I made the Jquery call for the div below with class "panel" but it won't load ..

<scrip type="text/javascript">
$(document).ready(function(){
  $("profile").click(function(){
    $(".panel").load("this.href");
  });
});
</script>
</head>

<body>
<div class="sliding-panel">
<div class="container">
<ul id="mycarousel" class="jcarousel-skin-tango">
<li>

<li>
<div class="panel"> //panel supposed to be triggered by Jquery
<h1> People </h1>
<?php
 database_connect();
$query = "select * from People";
$result = $connection->query($query);
$row_count =$result->num_rows;

for($i = 1; $i <= $row_count; $i++)
  {
   $row = $result->fetch_assoc();
    echo "<a href='/profile.php?id=".$row['ID']."' id='profile'><img src ='../".$row['Picture']."' width='100' height='100' /> </a>";

  }

?>
</div>
</li>
<li>
<div class="panel">
<h1>Ballers</h1>
</div>
</li>
<li>
<div class="panel">
<h1>Movies</h1>
</div>
</li>
<li>
<div class="panel">
<h1> Talking heads</h1>
</div>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:22:53.453

错误很少，

```
1 Wrong spelling of script. scrip should be script
2 wrong syntax of id selector.  $("profile") should be  $("#profile")
3 loading constant string instread of current element href. load("this.href") should be 
  load(this.href) 
```

改变

```
<scrip type="text/javascript">
$(document).ready(function(){
  $("profile").click(function(){
    $(".panel").load("this.href");
  });
});
</script> 
```

至

```
<script type="text/javascript">
$(document).ready(function(){
  $("#profile").click(function(){
    $(".panel").load(this.href);
  });
});
</script> 
```

# php - 在codeigniter的钩子预控制器中获取请求的控制器

> ID：13984234
> 
> 赞同：1
> 
> 时间：2012-12-21T04:21:29.477
> 
> 标签：php, codeigniter, codeigniter-2, codeigniter-routing

我正在尝试制定一个简单的路由规则，只允许经过身份验证的用户访问某些控制器。

为此，我想运行 precontroller hook 并检查用户是否使用 ci session 登录。但是，我必须知道用户想要访问哪个控制器。我如何在钩子函数中知道这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:34:33.920

$this->router->fetch_class();

扩展 CI_Controller 这应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T04:48:09.240

我不认为钩子是你想要在这里实现的最佳实践

您可以尝试以下操作：您需要创建将扩展的中间控制器，而不是 CI_Controller 将进行身份验证检查并将用户重定向到正确的控制器

逐步阅读 jondavidjohn 创建的本教程

[http://jondavidjohn.com/blog/2011/01/scalable-login-system-for-codeigniter-ion_auth](http://jondavidjohn.com/blog/2011/01/scalable-login-system-for-codeigniter-ion_auth)

你应该能在 10 分钟后得到这个想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:45:35.407

您不能将身份验证放在控制器构造函数上吗？它会在项目实例化时被调用，您可以在那里进行检查。此外，您始终可以扩展 CI_Controller 并将逻辑放入其中，以便您可以在那里进行检查（并按照建议使用 this->router->fetch_class() ）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T15:17:53.653

在您的自动加载库类中扩展 CI_Controller。

像这样的东西：

```
class MyAuthLibrary extends CI_Controller {
    var $ci;

    function __construct() {

        $this->ci = &get_instance();
        $route = $this->ci->router->fetch_class();

        if( ($route !== 'login') && !$this->ci->session->userdata('email_address') ) {
            redirect('login');
        } 
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T16:57:23.277

如果你不想走扩展控制器路由，我可以在那里看到你的逻辑，那么你必须在这里使用原生 PHP，因为 CI 对象不存在于 pre_controller_hook 中。

因此，获取 URI，然后对其进行解析以找到控制器：

```
$uri = $_SERVER['REQUEST_URI'];
$segments = explode("/", $uri);

// if you're removing index.php from your urls, then
$controller = $segments[0];

// if you're not removing index.php
$controller = $segments[1]; 
```

# javascript - HTTP 状态 500 - 处理 JSP 页面时发生异常

> ID：13984235
> 
> 赞同：1
> 
> 时间：2012-12-21T04:21:29.910
> 
> 标签：javascript, jsp, nullpointerexception, tomcat7

我的 Tomcat7 部署发生了一些真正奇怪的事情。要么这样，要么我太累了。这里是瘦...

我有一个非常简单的 Tomcat7 webapp，我正在通过 Eclipse(Juno) 开发它。我的一个 JSP 文件包含一个表单。提交表单时，servlet 查询数据库并通过 session.setAttribute 将两个参数返回给同一个 jsp。

一切正常，但如果我开始使用 servlet，我会突然在 JSP 页面上收到 HTTP 500 错误。我能够解决它的唯一方法是经历一个奇怪的仪式，从 JSP 中删除所有与 Java 相关的内容，然后慢慢添加并刷新。我不知道这是 Tomcat 问题、Servlet 问题、Firefox 问题还是上述问题的某种组合。

为清楚起见，这里有一些代码片段：

JSP代码：

```
<html>
  ...
  <body>
    <script type='text/javascript'>
      var searchResults = '<%= ((String[][])session.getAttribute("searchResults")).length %>';
      var additionalResults = '<%= session.getAttribute("additionalResults") %>';
      ...
    </script>
    ...
  </body>
</html> 
```

Tomcat错误：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /test.jsp at line 32

30:   <body>
31:     <script type='text/javascript'>
32:         var searchResults = '<%= ((String[][])session.getAttribute("searchResults")).length %>';
33:         var additionalResults = '<%= session.getAttribute("additionalResults") %>';
34: 

Stacktrace:        
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.lang.NullPointerException
org.apache.jsp.test_jsp._jspService(test_jsp.java:93) 
```

我知道数据库正在返回正确的值，所以第 32 行不应该抛出异常或 NullPointer。第 93 行很简单：

```
<div id="wrapper"> 
```

当第 32 行被注释掉时，我什至得到 Tomcat 错误？！？！

为了尝试调试，我将脚本标记的内容简化为：

```
alert('<%= session.getAttribute("searchResults") %>'); 
```

并编辑了我的 servlet 以阅读：

```
public class MyServlet extends HttpServlet {

  protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String redirectedPage = "/test.jsp";
    request.getSession().setAttribute("searchResults", "Bob");
    RequestDispatcher reqDispatcher = getServletConfig().getServletContext().getRequestDispatcher(redirectedPage);
    reqDispatcher.forward(request,response);
  }
} 
```

但生成的弹出窗口显示“null”。我也尝试过多次以不同的顺序重新启动 MySQL 和 Tomcat。

所以我完全不知道发生了什么。任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:24:27.887

我忘了张贴这个答案。原来我正在关闭 JDBC 连接，所以 ResultSet 对象在它返回到 jsp 时无法访问。此后，我更新了该代码并将结果移出 ResultSet 对象并移入通过 HTTPRequest 对象传回的参数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:04:23.900

将此用于您的 jsp 代码

```
 if('<%= session.getAttribute("searchResults") %>' !="null")
          {
           var str = '<%= (String)session.getAttribute("searchResults") %>' 
           searchResults = str.length;
           alert(searchResults)

          } 
```

# android - 使用 match_parent 属性获取视图宽度？

> ID：13984238
> 
> 赞同：5
> 
> 时间：2012-12-21T04:22:04.003
> 
> 标签：android, view, width

我有一个`imageView`with `layout_width="match_parent"`。

在我的适配器上`getView()`，我想获得它的实际宽度，`imageView`但不知道如何。

我尝试使用`imageView.getWidth()`，但这返回 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:37:12.547

视图未附加到 中的父组`getView()`，因此尚未测量，因此宽度为零。我能想到的唯一方法是`parent.getWidth()`返回 ViewGroup 的宽度。这仅在您的视图不会放置在父视图中的另一个视图旁边时才有效。这通常是 的情况`ListView`，因此可能适用于您的情况。

# tags - 如何在 play-1.x 中定义“分隔符”标签而不修改 play 的源代码

> ID：13984247
> 
> 赞同：0
> 
> 时间：2012-12-21T04:22:59.777
> 
> 标签：tags, playframework-1.x

我想定义一个标签`separator`标签，它在`list`标签内，可以在项目之间添加分隔符。

示例代码是：

```
List<String> users = new ArrayList<String>();
users.add("Jeff");
users.add("Mike");

#{list users, as: 'user'}
    #{separator ' + ' /}
    <span>${user}</span>
#{/list} 
```

如果我不使用`separator`标签，代码将是：

```
#{list users, as: 'user'}
    ${user_isFirst ? '' : ' + '}
    <span>${user}</span>
#{/list} 
```

生成的 html 代码将是：

```
<span>Jeff</span> + <span>Mike</span> 
```

我尝试定义一个`fastTag`：

```
public static void _separator(Map<?, ?> args, Closure body, PrintWriter out, GroovyTemplate.ExecutableTemplate template, int fromLine) {
    Object value = args.get("arg");

    // TODO how to get the value of `as` defined in parent `list` tag?

    out.print(value);
} 
```

但问题是在这种情况下我无法获得标签中`as`定义的值`list`（即`user`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:12:30.997

您可以像这样在 groovy 中创建自定义列表标签

```
#{list items:_arg, as:'tmp'}

    %{
            attrs = [:]
            attrs.put(_as, tmp)
    }%

    #{ifnot tmp_isFirst}${_sep}#{/ifnot}
    #{doBody vars:attrs /}

#{/list} 
```

并像这样使用它

```
#{myList users, as:'user', sep:','}
    ${user}
#{/myList} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:07:11.543

您应该跟踪您的 FastTag 实现。我想你会在 args 映射中看到范围内的所有变量。这是凭记忆 - 所以，如果不是，对不起。

也就是说，我认为如果您复制 #{list} 的 Java 代码并添加一个新参数可能会更简单，例如

```
#{list users, as: 'user', separator: '+' } 
```

并处理那里的逻辑。从设计的角度来看，它似乎也更干净了——如果它是一个分隔符，你怎么能把它放在代码中你喜欢的任何地方（为什么不把它放在两次！）。

最后一个选择是查看 Groovy 或 Java 集合运算符。[http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html)

# php - 创建多个下拉菜单并获取值

> ID：13984251
> 
> 赞同：0
> 
> 时间：2012-12-21T04:24:01.783
> 
> 标签：php, html-select

我想创建一个基于数组的下拉列表，然后获取下拉列表的值。

所以基本上我有一个包含数字的数组，我想为该数组中的每个数字创建一个下拉列表，然后当我按下提交时，检索每个框的值。

例子

```
<select id="drop_64" name="drop_40">
    <option value="1">Value 1</option>
    <option value="2">Value 3</option>
    <option value="3">Value 4</option>
</select>
<select id="drop_12" name="drop_44">
    <option value="1">Value 1</option>
    <option value="2">Value 3</option>
    <option value="3">Value 4</option>
</select> 
```

然后获取每个框的值。唯一的问题是数组每次的大小都不一样，所以每次下拉的数量都不同。

我的数组是一个 $_SESSION 数组。例子：

```
["prod"]=>
array(3) {
  ["ids"]=>
  array(2) {
    [0]=>
    string(2) "40"
    [1]=>
    string(2) "44"
  }
  ["newid"]=>
  array(2) {
    [0]=>
    string(0) ""
    [1]=>
    string(0) ""
  }
  ["newqty"]=>
  array(2) {
    [0]=>
    string(0) ""
    [1]=>
    string(0) ""
  }
} 
```

因此，每个下拉框都会生成带有 ID 的

不确定我是否已经很好地解释了这一点，所以如果您需要更多信息，请告诉我

# android - INSTALL_FAILED_ACWF_INCOMPATIBLE 安装错误

> ID：13984254
> 
> 赞同：4
> 
> 时间：2012-12-21T04:24:18.337
> 
> 标签：android, eclipse, debugging, deployment

我对 eclipse 上的 android 开发非常陌生，我有一个带有**Android 2.3.3的****ZTE v856**，我正在尝试在我的设备上调试应用程序，但是当应用程序尝试安装时出现以下错误：

 **```
INSTALL_FAILED_ACWF_INCOMPATIBLE 
```

我试图在互联网上搜索错误但没有运气，有人知道发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T23:15:34.800

卸载一些大型应用程序，以释放您手机的内存。

为了解决这个问题，我已经在google上搜索了一个星期，我随机决定卸载一些应用程序。我有 10MB 的免费空间，我的应用程序有 600KB，但在卸载一些应用程序后，它可以工作了。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T12:57:29.843

卸载一些释放一些内存的应用程序通常会有所帮助。**

# jquery - JQuery Masonry 淡入动画

> ID：13984258
> 
> 赞同：3
> 
> 时间：2012-12-21T04:24:51.523
> 
> 标签：jquery, jquery-masonry

我想知道是否可以使用**Masonry Fade-In 动画而不是砖块飞入**。飞砖在某些计算机上的图形密集度很高，并且会降低用户体验，例如在我的 MacBook Air 上使用带有 CSS3 动画的 Google Chrome。我正在使用连续滚动，当砖块飞到位时滚动不流畅。

我认为如果砖块在它们已经处于正确位置且没有任何移动的情况下淡入可能会更好。

PS：我在任何地方都找不到解决方案，如果在这里找不到解决方案，我将自己修改 Masonry 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:59:47.003

我找到了一个可能的解决方案，但我没有得到它的工作：

[http://life.innove.it/index.php/2011/08/jquery-masonry-with-fade-effect/](http://life.innove.it/index.php/2011/08/jquery-masonry-with-fade-effect/)

# java - onActivityResult 崩溃

> ID：13984263
> 
> 赞同：2
> 
> 时间：2012-12-21T04:25:55.560
> 
> 标签：java, android, android-intent, switch-statement

我在使用 onActivityResult 时遇到问题，无法弄清楚以下代码崩溃的原因。

我的主要活动中有一个按钮，可以启动另一个活动以获得结果。

```
 //---Setting the button for choosing a message---
    btn3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            // startActivity(new Intent("kurt.steveboss.textChooserView")); 
            startActivityForResult(new Intent(
                    "kurt.steveboss.textChooserView"),
                    request_CodeText);
        }

    }); 
```

这带来了一个新的观点。在此视图中，当用户单击按钮时，EditText 中的一些文本被捕获并作为结果返回给 mainActivity。

```
 //---Setting the button for generating a random message---
    btn6.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {

            Intent data = new Intent();

            //Extract the message from the EditText 
            data.setData(Uri.parse(txtMessage.getText().toString()));
            setResult(RESULT_OK, data);

            //---closes the activity---
            finish();               
        }
    }); 
```

然后我的 mainActivity 中有一个 onReceive（这里有不止一个意图，这当然是监听“request_CodeText”的情况

```
 public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);

    switch(requestCode) {
    case request_CodeText:
        Uri uri = data.getData();
        final Button btn3 = (Button)findViewById(R.id.btnMessage);
            if(resultCode == RESULT_OK) {
            btn3.setText((String) uri.toString());
            }
            else if(resultCode == RESULT_CANCELED) {
                //no action
            }
        break;

    case request_CodeNumber:
        Uri uri2 = data.getData();
        Cursor c = null;
        try {
            c = getContentResolver().query(uri2, new String[]{
                    ContactsContract.CommonDataKinds.Phone.NUMBER,
                    ContactsContract.CommonDataKinds.Phone.TYPE,
                    ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME},
                    null, null, null);
            if (c!= null && c.moveToFirst()) {
                String number = c.getString(0);
                int type = c.getInt(1);
                String contactName = c.getString(2);
                showSelectedNumber(type, number, contactName);
            }
        } finally {
            if (c != null) {
                c.close();
            }
        }
    break;
    }
} 
```

这个 onActivityResult 在按钮 3 文本被更新的范围内起作用（所以它一直在工作）。但随后应用程序在 LogCat 中崩溃并显示以下内容

```
12-21 15:10:15.995: I/ActivityManager(2098): START {intent.toShortString} from pid 19907
12-21 15:10:16.000: I/power(2098): *** acquire_dvfs_lock : lockType : 1  freq : 1000000 
12-21 15:10:16.000: D/PowerManagerService(2098): acquireDVFSLockLocked : type : DVFS_MIN_LIMIT  frequency : 1000000  uid : 1000  pid : 2098  tag : ActivityManager
12-21 15:10:16.000: W/ActivityManager(2098): mDVFSLock.acquire()
12-21 15:10:16.010: W/InputDispatcher(2098): channel ~ Consumer closed input channel or an error occurred.  events=0x8
12-21 15:10:16.010: D/InputDispatcher(2098): [drainOutboundQueueLocked] initialize cntPair(sender-receiver)
12-21 15:10:16.010: E/InputDispatcher(2098): channel ~ Channel is unrecoverably broken and will be disposed!
12-21 15:10:16.085: D/dalvikvm(2098): GC_FOR_ALLOC freed 821K, 47% free 22959K/43079K, paused 82ms
12-21 15:10:16.090: I/dalvikvm-heap(2098): Grow heap (frag case) to 25.390MB for 2903056-byte allocation
12-21 15:10:16.175: D/dalvikvm(2098): GC_FOR_ALLOC freed 15K, 41% free 25779K/43079K, paused 65ms
12-21 15:10:16.190: W/InputDispatcher(2098): Attempted to unregister already unregistered input channel
12-21 15:10:16.190: I/SurfaceFlinger(1904): id=2501 Removed MainActivity idx=2 Map Size=4
12-21 15:10:16.190: I/SurfaceFlinger(1904): id=2501 Removed MainActivity idx=-2 Map Size=4
12-21 15:10:16.190: D/KeyguardViewMediator(2098): setHidden false
12-21 15:10:16.190: W/SignalStrength(2098): getGsmLevel=2
12-21 15:10:16.190: W/SignalStrength(2226): getGsmLevel=2
12-21 15:10:16.190: W/SignalStrength(2226): getLevel=2 (SignalStrength: 99 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 gsm|lte 2)
12-21 15:10:16.190: W/SignalStrength(2226): getGsmLevel=2
12-21 15:10:16.190: W/SignalStrength(2226): getLevel=2 (SignalStrength: 99 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 gsm|lte 2)
12-21 15:10:16.190: W/InputDispatcher(2098): channel ~ Consumer closed input channel or an error occurred.  events=0x8
12-21 15:10:16.190: E/InputDispatcher(2098): channel ~ Channel is unrecoverably broken and will be disposed!
12-21 15:10:16.190: W/InputDispatcher(2098): Attempted to unregister already unregistered input channel
12-21 15:10:16.190: I/WindowManager(2098): WINDOW DIED Window{420e4858 XXXX.XXXXXXXXX.XXXXXXXXXXXXXXXX/XXXX.XXXXXXXXX.XXXXXXXXXXXXXXXX.XXXXXXXXXXXX paused=false}
12-21 15:10:16.190: D/STATUSBAR-NetworkController(2226): onSignalStrengthsChanged signalStrength=SignalStrength: 99 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 gsm|lte 2 level=2
12-21 15:10:16.190: I/WindowManager(2098): WIN DEATH: Window{426389d0 XXXX.XXXXXXXXX.XXXXXXXXXXXXXXXX/XXXX.XXXXXXXXX.XXXXXXXXXXXXXXXX.XXXXXXXXXXXXXXX paused=false}
12-21 15:10:16.195: D/KeyguardViewMediator(2098): setHidden false
12-21 15:10:16.195: W/SignalStrength(2098): getLevel=2 (SignalStrength: 99 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 gsm|lte 2)
12-21 15:10:16.195: W/WindowManager(2098): Failed looking up window
12-21 15:10:16.195: W/WindowManager(2098): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@426977f0 does not exist
12-21 15:10:16.195: W/WindowManager(2098):  at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7807) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:39:57.210

这就是您应该如何开始其他活动的方式。

```
Intent intent = new Intent(yourclassname.this, textChooserView.class);
startActivityForResult( intent, request_CodeText); 
```

代替

```
 startActivityForResult(new Intent(
            "kurt.steveboss.textChooserView"),
            request_CodeText); 
```

而且在 ActivityResult 你应该检查 if`resultCode == RESULT_OK`和`data is different to null`. 这将帮助您摆脱空异常。

# ajax - 使用 AJAX 自动刷新页面

> ID：13984272
> 
> 赞同：-1
> 
> 时间：2012-12-21T04:28:07.813
> 
> 标签：ajax, model-view-controller, query-string

我已经实现了让我的页面每 20 秒自动刷新一次，但现在我想在另一个部分进行，但情况略有不同。

不同的是现在页面是使用ajax刷新的，所以URL中的查询字符串不会改变。在另一种情况下，查询字符串参数与自动发布时的控制器方法参数匹配，因此可以正常工作。

我想知道在发出 ajax 请求时是否有办法“人为地”更改 url，或者是否有人可以为我提供一个很好解释的解决方案来解决这个问题。我对 MVC 比较陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:41:50.140

您可以使用 Javascript 获取当前 URL，

```
var url = window.location.href; 
```

然后你可以在你的`refresh`函数中使用它。

# sql-server - 执行存储过程时出错

> ID：13984274
> 
> 赞同：0
> 
> 时间：2012-12-21T04:28:22.803
> 
> 标签：sql-server, stored-procedures

```
ALTER PROCEDURE [dbo].[SpFillAnswer] 
    @q_Id nvarchar(50)
AS
BEGIN
    --SET NOCOUNT ON;

    SELECT Answer, Date_Time, Name 
    FROM Answers, RegUsers
    WHERE Answers.Q_Id = @q_Id 
      AND RegUsers.UserId = (SELECT Answers.User_Id FROM Answers WHERE Answers.Q_Id = @q_Id);
END 
```

我有三个表`RegUsers`，`Answers`和`Questions`。

我必须同时从表中获取`Answer`和`Date_Time`从`Answers`表中获取我必须找出`User Name`发布答案的人，这是从`RegUsers`表中获取的。

为此，我尝试了以下代码，该代码针对子查询的 1 个结果正确运行。

但是当多个结果来自子查询时，它给了我一个错误：

```
(Select Answers.User_Id from Answers where Answers.Q_Id = @q_Id ) 
```

请帮助我，为我想要的结果建议另一个子查询。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:32:01.937

更改`=`为`IN`：

```
Select Answer, Date_Time, Name from 
Answers, RegUsers
where Answers.Q_Id = @q_Id 
and RegUsers.UserId IN (
   Select Answers.User_Id 
   from Answers 
   where Answers.Q_Id = @q_Id ); 
```

# android - 将文件保存在android中，因此用户无法读取

> ID：13984275
> 
> 赞同：4
> 
> 时间：2012-12-21T04:28:39.440
> 
> 标签：android, file, android-sdcard, android-resources, android-assets

我正在 android 中开发一个应用程序，它下载图像文件并将其用作应用程序资源。我想将文件保存在一个目录中，以便用户无法将其视为画廊中显示的媒体文件。我只需要知道我可以保存文件的特定目录，而用户将看不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:31:28.453

Android 会自动扫描外部存储上的所有文件夹以查找媒体文件。如果您不希望您的图像文件显示在图库中，也许您可​​以添加一些扩展名，例如“.myapp”，这样可以欺骗扫描仪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T04:38:39.077

[使用内部存储](http://developer.android.com/guide/topics/data/data-storage.html) 您可以将文件直接保存在设备的内部存储中。默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们（用户也不能）。当用户卸载您的应用程序时，这些文件将被删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T04:41:16.853

只需简单地应用您自己的逻辑。当你从互联网上读取文件是字节格式。然后直接进入sdcard。

这次只需更改读取文件的某个字节。并将此字节存储在某个地方，例如共享偏好，静态变量任何内容。当您读取文件并显示其他播放时，然后更改相同的字节并用 orignal 替换此字节。此调用加密和衰减。亲爱的，我为图像文件做的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T05:19:33.003

`.nomedia`只需在要从中排除的目录中添加一个名为`MediaScanner`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T04:34:39.957

另一种选择是将图像作为 BLOB 保存在数据库中。
有了这个，您可以 100% 确定只有您的应用程序可以访问它。

# sql - 显示季度可用的月份名称

> ID：13984277
> 
> 赞同：3
> 
> 时间：2012-12-21T04:28:47.407
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想显示季度中可用的月份名称。意味着我们一年有四个季度 1,2,3,4。我有以下查询。

```
select  datename(month,(DATEADD(QUARTER, DATEDIFF(QUARTER, 0, GETDATE()), 0)) ) 
```

输出是：十月

但是我应该如何修改这个查询，以便我应该得到输出：

> ```
> October
> November
> December 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:43:02.603

```
declare @quarter datetime
set @quarter = DATEADD(QUARTER, DATEDIFF(QUARTER, 0, GETDATE()), 0)

select datename(month, @quarter)
union all
select datename(month, (DATEADD(month, 1, @quarter) ) )
union all
select datename(month, (DATEADD(month, 2, @quarter) ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:44:00.077

尝试这个

```
DECLARE @d datetime = Dateadd(mm,0,getdate())
-- set @d = Dateadd(mm,-3,getdate())

;With Dates
AS
(
SELECT DATEADD(qq,DATEDIFF(qq,0,@d),0) AS StartDt,DATEPART(qq,@d) AS Qr
UNION ALL
SELECT DATEADD(mm,1,StartDt),DATEPART(qq,DATEADD(mm,1,StartDt+1)-1)
FROM Dates
WHERE DATEPART(qq,DATEADD(mm,1,StartDt+1)-1)  = DATEPART(qq,@d)
)
SELECT 
datename(month,StartDt) Mnth, Qr,StartDt
FROM Dates 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T04:58:15.007

```
SELECT DATENAME(m,DATEADD(qq, DATEDIFF(qq,0,getdate()), 0)) AS MonthsInQuarter
UNION ALL
SELECT DATENAME(m,DATEADD(mm,1,DATEADD(qq,DATEDIFF(qq,0,getdate()),0))) 
UNION ALL
SELECT DATENAME(m,DATEADD(mm,2,DATEADD(qq,DATEDIFF(qq,0,getdate()),0))) 
```

# asp.net - 更改 Session Id 是 Session Fixation 的最佳解决方案吗？为什么更改 Session ID 会引发 Session_End 事件？

> ID：13984279
> 
> 赞同：2
> 
> 时间：2012-12-21T04:29:15.457
> 
> 标签：asp.net, vb.net, security, session-cookies

在安全漏洞测试期间，我们的客户端在用户成功登录系统后请求应用程序更改会话 ID，特别是 ASP.NET_SessionID cookie 值。这可能会解决**会话固定**问题，当会话 ID 发生更改时会引发 session_end 事件并导致重新启动会话（系统），该会话将再次重定向到登录页面。有什么方法可以更改会话 ID 而不会导致这一切？

请建议任何解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-10T05:25:48.553

好问题。当人们谈论更改会话 ID 以防止会话固定时，他们通常会想到 Java 框架中发生的漏洞，其中知道 sessionId 足以接管会话。

但是，ASP.NET 是另一种野兽。ASP.NET 需要两个东西来接管会话：sessionId 和 ASPXAUTH cookie。如果你用谷歌搜索，你会发现仍然存在会话固定可能性的不合理说法，但我不相信，因为似乎没有人展示如何利用它们。我发现最接近它可以被利用的证据是[这个博客](http://blog.securityps.com/2013/06/session-fixation-forms-authentication.html)，这至少可以说是有见地的。该博客确实指出了 ASP.NET 中的一个糟糕的实现——该框架没有检查 sessionId 和 ASPXAUTH 是否绑定到同一个用户（除非开发人员明确添加了这个检查）。但它可以被利用吗？我可以想到如果开发人员做错了比会话固定更糟糕的漏洞利用的情况，它可能是可利用的，但除此之外，我对此表示怀疑。

绝对是一个需要更多研究的话题。我意识到我的回答来不及满足您的需求，但我想我还是会跟进。底线：登录后更改 sessionId 似乎并没有提供任何额外的保护。如果你的渗透测试者不这么认为，我会邀请他们向我解释。

# regex - 如何使用正则表达式匹配字符串中的前一个字符

> ID：13984283
> 
> 赞同：2
> 
> 时间：2012-12-21T04:30:14.927
> 
> 标签：regex, pattern-matching, preg-match

可以说我有这个字符串`Â§cHi there`

我想使用正则表达式进行匹配`Â§c`，以便提取消息。我希望它工作的方式是查找`§`然后匹配下一个**和**上一个字符。到目前为止，我可以通过这个表达式匹配下一个字符`[§].{1}`。

我的问题是如何匹配`Â`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:32:34.887

首先 match `.[§].`，然后取匹配的第一个和第三个字符。

注意：您的示例正则表达式`[§].{1}`与`[§].`

`.`匹配任何字符（有时换行符除外）

# bash - 解析 xml 并将数据放入 bash 数组

> ID：13984284
> 
> 赞同：1
> 
> 时间：2012-12-21T04:30:24.637
> 
> 标签：bash, shell, unix

我有以下xml。我想遍历每个节点并推送`<url>`

如果 == 1，则将值放入 bash 数组`<extern>`中。知道我应该如何处理这个问题吗？

```
<GraphXML>
      <graph isDirected="true">
        <node name="0">
          <label>font</label>
          <url>http://fonts.googleapis.com/css?</url>
          <data>
            <checktime>0.262211</checktime>
            <extern>1</extern>
          </data>
        </node>
        <node name="1">
          <label>logo</label>
          <url>http://example.com/example.png</url>
          <data>
            <dlsize>7545</dlsize>
            <checktime>0.280600</checktime>
            <extern>0</extern>
          </data>
        </node>
     </graph>
    </GraphXML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:56:53.230

使用 xmllint：

```
out=$(echo "cat /GraphXML/graph/node/url|/GraphXML/graph/node/data/extern" | \
        xmllint --shell input | sed 's/<[^>]*>//g;s/[-][-]*//g;s/\/[^>]*>//')
set $out
i=0
while [ $#  -gt 0 ] ; do
  url=$1
  shift
  extern=$1
  shift
  if [ $extern -eq 1 ]; then
    array[$i]=$url
    let i++
  fi  
done

echo ${array[*]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:42:29.100

使用 bash

```
#!/bin/bash
declare -a ARR
while read -r line; do
    if [[ "$line" =~ ^\<(url|extern)\>(.*)\</[^\>]*\>$ ]]; then
        if [ "${BASH_REMATCH[1]}" == "extern" ]; then
            (( ${BASH_REMATCH[2]} == 0 )) && unset ARR[${#ARR[@]}-1]
        else
            ARR+=("${BASH_REMATCH[2]}")
        fi
    fi
done < <(grep -oE '<(url|extern)>.*</(url|extern)>' file.xml)

echo "${ARR[@]}" 
```

**解释**

*   `grep -oE`- 使用扩展正则表达式`-E`匹配`url`或`extern`返回匹配`-o`
*   `done < <(`- 使用[流程替换](http://tldp.org/LDP/abs/html/process-sub.html)来`grep`输入`while`循环。
*   `while read -r line`- 读取一行直到`EOF`退出`while`。
*   `^\<(url|extern)\>(.*)\</[^\>]*\>$`- 匹配行并保存到`BASH_REMATCH`数组中。
*   `unset ARR[${#ARR[@]}-1]`- 如果 extern 属性值为 0，则删除数组中的最后一个元素。
*   `ARR+=(...)`- 向数组添加新元素的简写形式。

# c++ - 嵌套的 std::function

> ID：13984286
> 
> 赞同：4
> 
> 时间：2012-12-21T04:30:40.200
> 
> 标签：c++, c++11

是否可以`std::function`返回一个`std::function`并使用与其他 std::functions 递归的各种函数，比如函数的函数？换句话说，我想将一组函数折叠成一个函数。

例如离开基本教程

```
double genFunc(double x, std::function<double (double x)>f)
{
    double res = f(x);
    return res;
}

double square(double x){
    return x * x;
}

double dbl_sq(double x){
    return square(x * x);
} 
```

我如何修改它以允许嵌套`std::function<std::function>`调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:00:13.180

我不完全确定你在问什么，但我会试一试。

那么，您想要一个`std::function`嵌套的，但在一次调用中调用所有元素？这意味着你可以做几件事，但最简单的是，像这样：

```
std::function<double(double)> nest(const std::function<double(double)> functions[], const int count) {
    if (count == 1) {
        return functions[0];
    }

    return [=](double input) {
        return nest(functions + 1, count - 1)(functions[0](input));
    };
}

int main()
{
    static const auto sq = [](double input) {
        return input * input;
    };

    static const auto dbl_sq = [](double input) {
        return sq(input * input);
    };

    static const auto dbl = [](double input) {
        return input * 2;
    };

    static const std::function<double(double)> sqrt = ::sqrt;

    // now lets construct a 'nested lambda'
    static const std::function<double(double)> funcs[] = {
        sq, dbl, sqrt
    };

    static const std::function<double(double)> func = nest(funcs, 3);

    std::cout << func(4) << std::endl;  // 5.65685
    std::cout << ::sqrt((4 * 4) * 2) << std::endl; // 5.65685
} 
```

它只是将一组函数“折叠”成一个函数。

如果这不是您所要求的，那么请编辑您的原始问题，以更清楚地说明您希望完成什么。

# vb.net - Winforms Textbox 绑定到具有货币格式的 bindingsource 和 datagridview 未正确刷新

> ID：13984288
> 
> 赞同：0
> 
> 时间：2012-12-21T04:31:08.017
> 
> 标签：vb.net, winforms, bindingsource

我对使用 bindingsources 和 datagridviews（以及 VB .NET）进行编程有点陌生，所以这是我的问题/问题。

我正在用 VB 2010 编写一个应用程序，用户将在其中更新后端 SQL 2008 R2 服务器中的数据（他们不会添加或删除任何记录，也不会更新所有字段）。设计模式下的表单具有绑定源、数据集和数据的各种文本框以及表单底部的数据网格视图。

当表单加载时，会加载 DataAdapter，然后加载数据集。（省略连接代码，“text_table”是SQL server中的一个测试表。

```
frmDataAdapter = New SqlClient.SqlDataAdapter(SQL_Query, frmConnection)
frmConnection.Open()
frmDataAdapter.FillSchema(frmDataSet, SchemaType.Source, "test_table")
frmDataAdapter.Fill(frmDataSet, "test_table") 
```

我将 BindingSource 绑定到 DataSet ...

```
With frmBindingSource
    .DataMember = "test_table"
    .DataSource = frmDataSet
End With 
```

然后我将表单上的 DataGridView 绑定到 BindingSource ...

```
frmDataGridView.DataSource = frmBindingSource 
```

现在，在“test_table”数据库表中，一些字段是货币并且没有更新购买用户，所以我将它们绑定如下......

```
Me.Total_Amount.DataBindings.Add("Text", frmBindingSource, "Total", True, DataSourceUpdateMode.Never, vbNull, "c") 
```

现在问题来了...

用户使用 DataGridView 来移动没有问题的记录。我们遇到麻烦的地方是“总计”字段可以为“空”，如果用户在“总计”字段中点击“空”的记录，它不会在该字段的绑定文本框中空白，仅当存在“非 Null”值时才会更改。

因此，如果用户开始并且前三个记录在“总计”字段中有“空”，则该字段的文本框保持空白。如果第四条记录有值，则该字段的文本框将更改为该值，但如果他们返回记录，则该字段的文本框中的值不会为空，而是保留该值并将保留该值，直到找到不同的“非空”值。

但是，如果我像这样在绑定过程中删除格式......

```
Me.Total_Amount.DataBindings.Add("Text", frmBindingSource, "Total") 
```

一切都很完美。

我在这里做错了什么，我忽略了什么简单的事情忘记了，我该如何解决它，因为我真的很想在表格上正确格式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:44:02.097

找到问题的答案...（有助于在连续工作 13 小时后获得一些睡眠）

如果我更好地阅读文档，我会知道在我的数据绑定行中更改“vbNull”......

```
Me.Total_Amount.DataBindings.Add("Text", frmBindingSource, "Total", True, DataSourceUpdateMode.Never, vbNull, "c") 
```

只是 vbNullString...

```
Me.Total_Amount.DataBindings.Add("Text", frmBindingSource, "Total", True, DataSourceUpdateMode.Never, vbNullString, "c") 
```

因此，当检测到 DBNull 时，它将默认为“空白”（即 vbNullString），无需更改我的有效 SQL 查询。

# api - 从应用程序运行 Elastic Mapreduce Hive 查询

> ID：13984289
> 
> 赞同：0
> 
> 时间：2012-12-21T04:31:13.387
> 
> 标签：api, hive, elastic-map-reduce

我以交互模式在弹性 mapreduce 上运行 Hive：

./elastic-mapreduce --create --hive-interactive

在脚本模式下：

./elastic-mapreduce --create --hive-script --arg s3://mybucket/myfile.q

我希望在我自己的服务器上拥有一个应用程序（最好是 PHP、R 或 Python），能够启动弹性 mapreduce 集群并运行多个 Hive 命令，同时以可解析的形式获取它们的输出。

我知道启动集群可能需要一些时间，所以也许我的应用程序可能需要在单独的步骤中执行此操作并等待集群准备好。但是有没有办法做这样的事情，比如这个有点具体的假设例子：

1.  创建 Hive 表 customer_orders
2.  运行 Hive 查询“SELECT dt, count(*) FROM customer_orders GROUP BY dt”
3.  等待结果
4.  在 PHP 中解析结果
5.  运行 Hive 查询“SELECT MAX(id) FROM customer_orders”
6.  等待结果
7.  在 PHP 中解析结果...

有人对我如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:04:31.843

您可以使用[MRJOB](http://mrjob.readthedocs.org/en/latest/index.html)。它允许您在 Python 2.5+ 中编写 MapReduce 作业并在多个平台上运行它们。

另一种选择是[HiPy](http://code.google.com/a/apache-extras.org/p/hipy/)，它是一个很棒的项目，可能足以满足您的所有需求。HiPy 的目的是支持在 Python 中以编程方式构建 Hive 查询并更轻松地管理查询，包括使用转换脚本的查询。

> HiPy 可以在查询构建、转换脚本和后处理的单个脚本中进行分组。这有助于脚本的可追溯性、文档化和可重用性。一切都出现在一个地方，Python 注释可用于记录脚本。
> 
> Hive 查询是通过组合一些 Python 对象来构造的，这些对象表示诸如 Columns、Tables 和 Select 语句之类的东西。在此过程中，HiPy 会跟踪生成的查询输出的模式。
> 
> 转换脚本可以包含在 Python 脚本的主体中。HiPy 将负责向 Hive 提供脚本代码，以及数据与 Python 数据类型之间的序列化和反序列化。如果任何数据列包含 JSON，HiPy 也会负责将其转换为 Python 数据类型。

查看[文档](/a/apache-extras.org/p/hipy/wiki/Documentation)了解详细信息！

# java - 画布不绘制Android

> ID：13984293
> 
> 赞同：1
> 
> 时间：2012-12-21T04:31:52.200
> 
> 标签：java, android, android-canvas

我一直在尝试开始一个新项目，但当我开始时，我什么都做不了。在过去的几个小时里，我一直在查看代码并使用它，但我不记得上次它发生时我是如何解决这个问题的。

```
package org.waldev.canvascollisiontest;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.PixelFormat;
import android.os.Bundle;
import android.view.Menu;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CollisionTest extends Activity {
private Panel game;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    game = new Panel(this);
    setContentView(game);
}

public class Panel extends SurfaceView implements SurfaceHolder.Callback{
    Threads thread;

    public Panel(Context context) {
        super(context);
        thread = new Threads(this.getHolder(), this);
        setFocusable(true);
    }

    public void onDraw(Canvas c)
    {
        c.drawColor(Color.BLUE);
    }
    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub
    }

    //when the game starts, run the thread\
    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        holder.setFormat(PixelFormat.RGB_565);
        thread.setRunning(true);
        thread.start();
    }

    //if its destroyed, then destroy the thread
    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        boolean retry = true;
        thread.setRunning(false);
        while (retry) {
            try {
                thread.join();
                //                  bitmaps.recycleAll();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }

}
} 
```

和线程：

```
package org.waldev.canvascollisiontest;

import org.waldev.canvascollisiontest.CollisionTest.Panel;

import android.graphics.Canvas;
import android.view.SurfaceHolder;

public class Threads extends Thread{
SurfaceHolder surfaceHolder;
private Panel game;

private Canvas c;
private boolean isRunning = true;

// desired fps
private final static int    MAX_FPS = 24;
// maximum number of frames to be skipped
private final static int    MAX_FRAME_SKIPS = 0;
// the frame period
private final static int    FRAME_PERIOD = 1000 / MAX_FPS;  

public Threads(SurfaceHolder surfaceHolder, Panel panel){
    this.surfaceHolder = surfaceHolder;
    game = panel;
}

public void setRunning(boolean run){
    isRunning = run;
}

public boolean getRunning(){
    return isRunning();
}

public SurfaceHolder getSurface(){
    return surfaceHolder;
}

@Override
public void run() {
    Canvas canvas;

    long beginTime;     // the time when the cycle begun
    long timeDiff;      // the time it took for the cycle to execute
    int sleepTime;      // ms to sleep (<0 if we're behind)
    int framesSkipped;  // number of frames being skipped 
    boolean updated = false;

    sleepTime = 0;

    while (isRunning) {
        canvas = null;
        try {
            canvas = this.surfaceHolder.lockCanvas();
            synchronized (surfaceHolder) {
                beginTime = System.currentTimeMillis();
                framesSkipped = 0;
                if(canvas != null)
                {
                    game.onDraw(canvas);
                }
                timeDiff = System.currentTimeMillis() - beginTime;
                sleepTime = (int)(FRAME_PERIOD - timeDiff);

                if (sleepTime > 0) {
                    try {
                        Thread.sleep(sleepTime);
                    } catch (InterruptedException e) {}
                }
                else
                {
                    updated = false;
                }
            }
        } finally {
            // in case of an exception the surface is not left in
            // an inconsistent state
            if (canvas != null) {
                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }   // end finally
    }
}
public boolean isRunning() {
    return isRunning;
}
} 
```

我在那里扔了一些断点，它从来没有在 CollisionTest 中调用 surfaceCreated。我知道我在这里想念的东西一定很愚蠢，所以如果你看到它，请告诉我。谢谢！

威廉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:14:06.987

我得到它的工作，我忘了添加：

```
getHolder().addCallback(this); 
```

到面板的构造函数，这就是导致它不起作用的原因。谢谢！

# mysql - 如何使用触发器计算？

> ID：13984298
> 
> 赞同：1
> 
> 时间：2012-12-21T04:33:06.583
> 
> 标签：mysql

```
CREATE TABLE table_test_trigger (
  id INT(11) NOT NULL AUTO_INCREMENT,
  a INT(11) DEFAULT NULL,
  b INT(11) DEFAULT NULL,
  c INT(11) DEFAULT NULL,
  PRIMARY KEY (id)
);

DELIMITER $$

CREATE TRIGGER trigger1
    BEFORE INSERT
    ON table_test_trigger
    FOR EACH ROW
BEGIN
  SET NEW.c = NEW.a + NEW.b;
END
$$ 
```

我试过这段代码。

**错误：**

`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 6`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:54:49.610

尝试这个：

```
DELIMITER $$

CREATE
    /*!50017 DEFINER = 'root'@'%' */
    TRIGGER `trigger1` BEFORE INSERT ON `table_test_trigger` 
    FOR EACH ROW BEGIN
        SET NEW.c = NEW.a + NEW.b;
    END;
$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:12:28.793

它工作正常..触发器或表中没有错误。数据将被和平插入..！**可能是你在尝试的时候给了一些额外的空间**……看看吧

除此之外没有错误它很好......！（我在我的机器上试过它工作正常..！）

做一件事，只需将其整齐地放入记事本中，删除所有多余的空格或字符（如果有的话），然后将其粘贴到终端中，它可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T07:09:24.800

脚本是正确的。您的 MySQL 客户端可能不支持分隔符。您的触发器只有一个语句，因此您可以省略 BEGIN-END 子句和 DELIMITER 命令。

```
CREATE TABLE table_test_trigger (
  id INT(11) NOT NULL AUTO_INCREMENT,
  a INT(11) DEFAULT NULL,
  b INT(11) DEFAULT NULL,
  c INT(11) DEFAULT NULL,
  PRIMARY KEY (id)
);

CREATE TRIGGER trigger1
  BEFORE INSERT
  ON table_test_trigger
  FOR EACH ROW
SET NEW.c = NEW.a + NEW.b; 
```

# html - 浏览器连接链接而不是导航到它们

> ID：13984301
> 
> 赞同：0
> 
> 时间：2012-12-21T04:33:18.070
> 
> 标签：html, url, hyperlink

我正在使用 xampp 作为我的 Web 服务器构建一个 localhost 网站。我遇到的问题是，当我单击网页上的链接时，它无法导航到该链接。

当前网址：

> 本地主机/构建/索引/

HTML 链接：

```
<a href="localhost/builds/projects/30-11-11.php">30th November 2011</a> 
```

期待：

> 本地主机/构建/项目/30-11-11.php

现实：

> localhost/builds/index/ **localhost/builds/projects/30-11-11.php**

**笔记：**

我知道硬编码任何东西都不是一个好主意。我以前曾尝试使用 PHP 变量，但如果硬编码链接不起作用，我不希望软代码现在也能工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:37:21.487

链接工作正常。如果没有前导`/`，则链接相对于当前 URL。使用前导`/`，它是相对于域的。在该链接的 URL 开头添加 a`/`将使其按您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T04:37:56.913

如果 url 不以模式（如 http:// 或 https://）开头，浏览器将威胁它为相对并附加到当前目录。

# openid - OpenID 和 OAuth 术语列表

> ID：13984304
> 
> 赞同：2
> 
> 时间：2012-12-21T04:34:01.653
> 
> 标签：openid, twitter-oauth, facebook-oauth, google-oauth, yahoo-oauth

我想问一个**完整的 OpenId 和 OAuth 术语**。似乎有很多术语仅以相同的方式使用。例如，

*   客户端 ID 相当于 oauth_consumer_key（可能更多）。
*   另一件事是 OpenID，除了 OpenID 之外，正在使用的 URL 的术语是什么？

这些术语非常令人困惑，如果有某种专门用于此的词库，那将真的很有帮助。这会有所帮助，因为只要阅读一篇文章，我的大脑就会在搜索正确的术语时走遍全国。它暂停。然后想……等等，我想对了吗？

我说的是一般的 OpenId 和 OAuth：Google、Facebook、Yahoo、Twitter、StackExchange 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:52:11.200

除了搜索 google/wikipedia 之外，我不知道专门构建的词汇表。

您可能会被供应商特定的身份验证机制绊倒，例如不属于任何规范的 API 密钥。每个服务通常都有专有的和符合规范的东西的组合。

您可能会对 RFC 犹豫不决，但它们通常会尝试定义术语。

除了 RFC，没有通用术语。每个供应商都可以选择以他们选择的方式记录他们的服务。由于特定于它们的各种原因，不同的服务将其令牌称为不同的事物。掌握所涉及的角色及其运作方式比了解如何跨服务翻译术语要好。角色通常不会改变。

这是 OAuth 的东西

OAuth1 RFC [rfc5849](https://www.rfc-editor.org/rfc/rfc5849)

OAuth2 RFC [rfc6749](https://www.rfc-editor.org/rfc/rfc6749) [rfc6750](https://www.rfc-editor.org/rfc/rfc6750)

互联网安全词汇[rfc4949](https://www.rfc-editor.org/rfc/rfc4949)

# android - Android如何在画布上绘制xml中定义的形状

> ID：13984307
> 
> 赞同：2
> 
> 时间：2012-12-21T04:34:11.873
> 
> 标签：android, drawable, android-canvas

我在xml中定义了一条虚线：

```
<shape android:shape="line" >
    <stroke
        android:dashGap="2dp"
        android:dashWidth="2dp"
        android:width="1dp"
        android:color="#C69EA2" />
</shape> 
```

我将它作为可绘制对象加载并尝试在 EditText 的每一行下绘制它：

```
Rect r = mRect;
int baseline = getLineBounds( line , r);
drawable.setBounds(r.left, baseline + 1, r.right, baseline + 2);
divider.draw(canvas); 
```

但是，它只显示一条实线，而不是虚线。问题是什么 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:34:49.260

最后，我发现它受到硬加速的影响。所以只需关闭它，一切都会好起来的。

# javascript - JavaScript 中的双感叹号运算符和 Boolean() 有什么区别？

> ID：13984309
> 
> 赞同：3
> 
> 时间：2012-12-21T04:34:26.713
> 
> 标签：javascript

我知道这`!!variable`会将变量转换为布尔值，并且`Boolean()`根据 ecma262 规范，函数也将通过调用来执行类型转换`ToBoolean(value)`。

我的问题是：有什么区别？`!!`性能优于 Boolean() 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T04:38:15.247

它们是相同的，因为`!`运算符将`ToBoolean()`在内部调用其操作数，然后翻转该返回值，而`Boolean()`将`ToBoolean()`在内部调用其参数。

# html - 跨浏览器字体问题

> ID：13984316
> 
> 赞同：2
> 
> 时间：2012-12-21T04:35:23.760
> 
> 标签：html, internet-explorer-9

我在字体的跨浏览器兼容性方面遇到了一些问题。FireFox 和 Chrome 看起来几乎一样，在 FireFox 上可能更流畅一些，但在 IE9 上看起来更简洁更大胆？我已经使用字体的每个 CSS 值来尝试为每个浏览器设置默认值，但没有任何效果。任何想法 IE9 正在做什么来扭曲字体？我确实喜欢它在 IE9 中的外观，但我希望它在浏览器之间匹配。

![例子](../Images/8fb6d7295a5e9346e2fd67014c0b2199.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:37:21.617

字体渲染不仅取决于浏览器，还取决于操作系统。请参阅以下两篇文章，它们解释了差异以及如何使用 CSS 来克服它：

[http://css-tricks.com/font-rendering-differences-firefox-vs-ie-vs-safari/](http://css-tricks.com/font-rendering-differences-firefox-vs-ie-vs-safari/)

[http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:20:51.213

[这里](http://connect.microsoft.com/IE/feedback/details/598107/cleartype-is-always-used-even-when-disabled-in-ie-options-and-window-7)有很好的记录，IE9 忽略了操作系统范围的字体平滑设置（又名抗锯齿）。即使在 Windows 中禁用了字体平滑和 ClearType，IE 仍然显示抗锯齿字体，一些用户难以阅读，尤其是在小字体时。

微软说，

> Internet Explorer 9 利用 Windows DirectWrite 和 Direct2D API 使用亚像素 Microsoft ClearType 字体定位来呈现硬件加速文本。最近对 ClearType 的增强功能通过提高显示文本微小细节的清晰度来帮助提高液晶显示器 (LCD) 上文本的可读性。Internet Explorer 9 中子像素定位的实现对 Web 开发人员很有用，因为文本放置和换行符在不同用户的配置中保持不变

但是，有一些方法可以禁用此功能（[此处](https://stackoverflow.com/questions/5427315/disable-cleartype-text-anti-aliasing-in-ie9)提到），但它是一种客户端技术，您的代码无法控制它。

# python - 如何在函数链中向不可变类型的子类添加新参数？

> ID：13984318
> 
> 赞同：2
> 
> 时间：2012-12-21T04:35:57.210
> 
> 标签：python, inheritance, parameter-passing, immutability

我有一个继承自不可变类型的类，它使用`__new__`. 我如何将一个新参数添加到一个函数并优雅地将它传递给第二个函数，我知道它在执行链中？

```
class ImmutableClass(ImmutableType):
    def functionA(param1=None, param2=None):
        # Do some stuff
        stuff self.functionB(param2)
        # Do some more stuff
        return stuff

    def functionB(param2):
        # Do some stuff
        newObjects = [ImmutableClass() for x in range(len(param2))]
        stuff = self.functionC(newObjects)
        # Do some more stuff
        return stuff

    def functionC(param3=None):
        # Do some stuff
        return stuff

class SomeClass(ImmutableClass):
    def __new__(cls, *args, **kwargs):
        return ImmutableClass.__new__(SomeClass, *args, **kwargs)

    def functionA(self, newParameter=True):
        # How do I pass newParameter to functionC?
        return super(ImmutableClass, self).functionA(*args, **kwargs)

    def functionC(self, newParameter=True):
        # How do I get the parameter from functionA?
        if not newParameter:
            print 'Success!'
        return super(ImmutableClass, self).functionC(*args, **kwargs) 
```

我知道我可以将 **kwargs 添加到`ImmutableClass`链中的所有函数中，但这感觉有点混乱。这些函数的调用者可能会在很长一段时间内传递无效参数，然后才会出错，或者将标志传递给某个意外函数。我希望有一些我没有看到的明显解决方案。

我知道`ImmutableClass`有`functionA`呼叫`functionB`，然后呼叫`functionC`。但是，调用在`functionB`代码中间，所以我不能简单地预先/附加新调用。我不能使用成员变量（据我所知），因为`__new__`在调用的中途重新初始化它。我可以访问`ImmutableClass`'s 的源代码，但我不想更改它，因为`ImmutableClass`应该不知道`SomeClass`. `SomeClass`我曾考虑过使用全局变量，但如果部分开始第二次调用functionA，恐怕会做意想不到的事情。

# c# - 从文件中读取语法并存储在 C# 中的数组中

> ID：13984324
> 
> 赞同：-1
> 
> 时间：2012-12-21T04:36:48.740
> 
> 标签：c#, automata

还是 C# 的新手，所以要友好:)

```
S -> NP VP
S -> Aux NP VP
NP -> Proper-Noun
NP -> Nominal
Nominal -> Noun
Nominal -> Nominal Noun
Nominal -> Nominal PP
VP -> Verb NP
VP -> Verb NP PP
PP -> Preposition NP 
```

如何将这些产生式存储在数组中或以表格形式存储在列表中，如下面的 c# 中。以上产品是从文件中读取的。

```
Table Structure
terminals -> all non terminals after that specific terminal
S -> NP VP Aux NP VP VP
VP -> Verb NP Verb NP PP Verb PP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:52:51.937

这样的事情应该会有所帮助：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text.RegularExpressions;

class Production
{
   public string Name;
   public string[] Components;

   public static IEnumerable<Production> Parse(string contents)
   {
      var rdr = new System.IO.StringReader(contents);
      string line;
      var productions = new List<Production>();
      while(null != (line = rdr.ReadLine()))
      {
         if(string.IsNullOrEmpty(line))
            continue;
         productions.Add(ParseOne(line));
      }

      return productions;
   }

   public static Production ParseOne(string line)
   {
      var parts = line.Split(new [] {' '}, StringSplitOptions.RemoveEmptyEntries);
      return new Production{Name = parts[0], Components = parts.Skip(2).ToArray()};
   }

} 
```

您可以像这样使用 Production.Parse 方法：

```
static void Main()
{      
   var productions = Production.Parse(@"S -> NP VP
S -> Aux NP VP
NP -> Proper-Noun
NP -> Nominal
Nominal -> Noun
Nominal -> Nominal Noun
Nominal -> Nominal PP
VP -> Verb NP
VP -> Verb NP PP
PP -> Preposition NP");
   // Or from a file like this:
   productions = Production.Parse(File.ReadAllText("myProductions.txt));
} 
```

**编辑：**要加入制作，请考虑按名称[分组。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)

```
productions.GroupBy(p => p.Name, p => new Production{Name=p.Key, Components=p.SelectMany(x => x)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:09:30.977

这是一个演示 linq 解决方案。它不会进行任何类型的错误检查，它假定数据位于名为lines.txt 的输入文件中：

编辑：简化查询

```
static void Main(string[] args)
        {
            var lines = System.IO.File.ReadAllLines("lines.txt");

            var results = from line in lines
                     let tokens = line.Split(' ')
                     group tokens by tokens.First() into tokenGroup
                     select new
                     {
                         Terminal = tokenGroup.Key,
                         NonTerminals = tokenGroup.SelectMany(tokens => tokens.Skip(2))
                     };

            foreach (var line in results)
            {
                var sb = new StringBuilder(string.Format("{0} ->", line.Terminal));
                foreach (var nonTerminal in line.NonTerminals)
                {
                    sb.Append(string.Format(" {0}", nonTerminal));
                }
                Console.WriteLine(sb.ToString());
            }
        } 
```

# c# - 从我自己的控制台应用程序执行第 3 方 exe 的方法

> ID：13984325
> 
> 赞同：2
> 
> 时间：2012-12-21T04:36:51.733
> 
> 标签：c#, console-application, exe

如果我在哪里有可执行文件：（可执行文件不是 ac# 应用程序，它包含非托管代码，但代码相似）

```
// ConsoleApplication1.exe

class Program     
{
    static void Main()
    {
        while (true)
        {
            System.Console.WriteLine("Enter command");

            var input = System.Console.ReadLine();

            if (input == "a")
                SomeMethodA();
            else if (input == "b")
                SomeMethodB();
            else if (input == "exit")
                break;
            else
                System.Console.WriteLine("invalid command");
        }
    }

    private static void SomeMethodA()
    {
        System.Console.WriteLine("Executing method A");
    }

    private static void SomeMethodB()
    {
        System.Console.WriteLine("Executing method B");
    }
} 
```

**那我怎么`SomeMethodA()`能从c#执行呢？**

这是我到目前为止所做的

```
 Process p = new Process();

        var procStartInfo = new ProcessStartInfo(@"ConsoleApplication1.exe") 
        {
            UseShellExecute = false,
            RedirectStandardOutput = true,
        };

        p.StartInfo = procStartInfo;

        p.Start();

        StreamReader standardOutput = p.StandardOutput;

        var line = string.Empty;

        while ((line = standardOutput.ReadLine()) != null)
        {
            Console.WriteLine(line);

            // here If I send a then ENTER I will execute method A! 
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:07:24.070

如果您只是想传递“a”以便 SomeMethodA 执行，您可以这样做

```
 Process p = new Process();

    var procStartInfo = new ProcessStartInfo(@"ConsoleApplication1.exe") 
    {
        UseShellExecute = false,
        RedirectStandardOutput = true,
        RedirectStandardInput = true, //New Line
    };

    p.StartInfo = procStartInfo;

    p.Start();

    StreamReader standardOutput = p.StandardOutput;
    StreamWriter standardInput = p.StandardInput; //New Line

    var line = string.Empty;

    //We must write "a" to the other program before we wait for a answer or we will be waiting forever.
    standardInput.WriteLine("a"); //New Line

    while ((line = standardOutput.ReadLine()) != null)
    {
        Console.WriteLine(line);

        //You can replace "a" with `Console.ReadLine()` if you want to pass on the console input instead of sending "a" every time.
        standardInput.WriteLine("a"); //New Line
    } 
```

如果您想一起绕过输入过程，那将是一个更难的问题（如果该方法不是私有的，那会更容易），我将删除我的答案。

* * *

PS您应该将您的两个流阅读器包装在`using`语句中

```
using (StreamReader standardOutput = p.StandardOutput)
using (StreamWriter standardInput = p.StandardInput)
{
    var line = string.Empty;

    standardInput.WriteLine("a");

    while ((line = standardOutput.ReadLine()) != null)
    {
        Console.WriteLine(line);

        standardInput.WriteLine("a");
    }
} 
```

# nsrunloop - gnustep 运行循环

> ID：13984337
> 
> 赞同：0
> 
> 时间：2012-12-21T04:38:14.217
> 
> 标签：nsrunloop, gnustep

有谁告诉是 GNUstep NSRunLoop 扩展功能：

*   (void) addEvent: (void*)data type: (RunLoopEventType)type watcher: (id)watcher forMode: (NSString*)mode;

这种方法有效吗？如何设置参数数据？我设置了一个管道来读取文件描述，但它似乎不能正常工作。真的很难弄清楚这个问题，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:11:37.930

This method works. Please show more of your code.

eg. for reading, [[NSRunLoop currentRunLoop] addEvent: (void*)anFd type: ET_RDESC watcher: anObj // must implement receivedEvent:type:extra:forMode: forMode: NSDefaultRunLoopMode]; // rtfm

# javascript - 从鼠标位置获取地图纬度经度

> ID：13984338
> 
> 赞同：12
> 
> 时间：2012-12-21T04:38:13.450
> 
> 标签：javascript, google-maps, geolocation

我正在尝试将鼠标在谷歌地图上的位置转换为 LatLng 对象。我看到很多关于通过谷歌地图“点击”事件等获取位置的帖子，如下所示：

```
google.maps.event.addListener(map, 'click', function(event) {
  mouseLocation = event.latLng;
}); 
```

但是，这对我的目的不起作用，因为我不是在响应地图事件，而是在响应“tapHold”事件。在 tapHold 事件中，我想获取当前鼠标位置的纬度和经度。实际上，我可以看到像这样的函数在很多方面都非常有用，而不仅仅是一个 tapHold 事件。

我可以想到一些技巧，例如动态创建鼠标悬停事件，然后只让它触发一次并在从翻转事件中获取 LatLng 对象后将其删除，但是，对我来说似乎有点 hackish... 寻找更多优雅的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-12T23:55:48.247

```
google.maps.event.addListener(map, 'mousemove', function (event) {
              displayCoordinates(event.latLng);               
          });

function displayCoordinates(pnt) {

          var lat = pnt.lat();
          lat = lat.toFixed(4);
          var lng = pnt.lng();
          lng = lng.toFixed(4);
          console.log("Latitude: " + lat + "  Longitude: " + lng);
      } 
```

资料来源：[http ://seydahatipoglu.wordpress.com/2012/10/21/how-to-display-cursor-coordinates-in-google-map-javascript/](http://seydahatipoglu.wordpress.com/2012/10/21/how-to-display-cursor-coordinates-in-google-map-javascript/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-28T22:28:56.843

有几个用于处理像素的函数，要使用它们，您需要先访问投影。

从地图对象

```
map.getProjection().fromPointToLatLng(new google.maps.Point(x, y)) 
```

从覆盖对象：

```
overlay.getProjection().fromContainerPixelToLatLng(new google.maps.Point(x, y)); 
```

您也可以使用虚拟叠加层来执行此操作：

```
var overlay = new google.maps.OverlayView();
overlay.draw = function() {};
overlay.setMap(map); 
```

这是对文档的参考：[https ://developers.google.com/maps/documentation/javascript/reference#Projection](https://developers.google.com/maps/documentation/javascript/reference#Projection)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T11:03:48.677

如果不需要很精确的值，可以根据map的bounds自己计算（bias under 1%）：

```
 <!DOCTYPE html>
<html>
    <head>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
        <script>
            var map;

            function initialize() {
                var mapOptions = {
                    zoom: 12,
                    center: new google.maps.LatLng(33.397, -81.644),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                map = new google.maps.Map(document.getElementById('map_canvas'),
                    mapOptions
                );
                google.maps.event.addListener(map, 'click', function(event) {
                    document.getElementById('latMap').value = event.latLng.lat();
                    document.getElementById('lngMap').value = event.latLng.lng();
                });
            }
            function mapDivClicked (event) {
                var target = document.getElementById('map_canvas'),
                    posx = event.pageX - target.offsetLeft,
                    posy = event.pageY - target.offsetTop,
                    bounds = map.getBounds(),
                    neLatlng = bounds.getNorthEast(),
                    swLatlng = bounds.getSouthWest(),
                    startLat = neLatlng.lat(),
                    endLng = neLatlng.lng(),
                    endLat = swLatlng.lat(),
                    startLng = swLatlng.lng();

                document.getElementById('posX').value = posx;
                document.getElementById('posY').value = posy;
                document.getElementById('lat').value = startLat + ((posy/350) * (endLat - startLat));
                document.getElementById('lng').value = startLng + ((posx/500) * (endLng - startLng));
            }
            google.maps.event.addDomListener(window, 'load', initialize);
        </script>
    </head>
    <body>
        <div id="map_canvas" onclick="mapDivClicked(event);" style="height: 350px; width: 500px;"></div>
        x: <input id="posX" />
        y: <input id="posY" />
        lat: <input id="lat" />
        lng: <input id="lng" />
        <div />
        lat from map: <input id="latMap" />
        lng from map: <input id="lngMap" />
    </body>
</html> 
```

# c++ - 如何在 Visual Studio 中调试库的发布版本

> ID：13984344
> 
> 赞同：5
> 
> 时间：2012-12-21T04:38:48.037
> 
> 标签：c++, visual-studio-2010, visual-studio, debugging, mfc

我需要调试我的链接库的发布版本。我已经在[本文](http://msdn.microsoft.com/en-us/library/fsk896zz%28v=vs.100%29.aspx)之后的发布版本中生成了调试信息，但是如何对库项目执行相同的操作？请注意，库项目在上面的链接中创建调试信息的属性中没有链接页面。我正在使用VS2010。

我真正想要的是在调试库时让 TRACE 工作。我试图将库的调试版本与发布 exe 链接，但它会创建链接器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:52:41.260

> 我真正想要的是让 TRACE 工作......

你的意思是 MFC TRACE 宏？将消息写入调试器的调试/输出窗口的那个？

不幸的是，即使您确实修复了构建设置，以便最终的可执行文件包含静态库的调试信息，它也不会带回这些跟踪语句。TRACE 是一个宏，因此由编译器预处理器处理。当您在发布模式下编译时，该宏被重新定义为无操作。就像从源代码中删除了 TRACE 语句一样。

即使您确实解决了将调试符号添加到库和可执行文件的问题，它也不会带回这些跟踪语句。它们在编译阶段被删除。

那么该怎么办？事实证明，如果您深入研究这些宏，它们最终会调用 Win32 函数[OutputDebugString](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx)。此调用在 ms 库的调试和发布版本中都可用。所以......您可以用对 OutputDebugString 的显式调用来替换跟踪宏 - 使用它进行编码并不方便，但至少您将在发布模式下获得调试输出。

顺便说一句，几年前我终于放弃了所有这些宏，我们用[log4cplus](http://log4cplus.sourceforge.net)调用完全取代了它们。任何日志框架都会比跟踪宏更好 - 因为您真正需要跟踪的时间不是在调试时，而是在您的代码在生产中并且您无法在本地重现问题时。最好记录到客户可以发送给您的文件，然后依靠仅在调试器中有效的跟踪。无论如何要考虑的东西...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:14:41.837

静态库未链接，因此链接器选项不可用也就不足为奇了。你基本上只需要告诉编译器产生调试信息。从那里开始，创建库只不过是将一堆目标文件放在一个文件中。

所以基本上，只要告诉*编译器*产生调试信息，库就会包含调试信息。

# javascript - Jquery Ajax加载除某个div之外的整个页面

> ID：13984349
> 
> 赞同：2
> 
> 时间：2012-12-21T04:39:28.647
> 
> 标签：javascript, jquery, ajax, html

我正在编写一个在页脚有音频播放器的应用程序。每次我点击一个链接时，整个页面本身都会加载，因此音频播放器正在重新启动，我的问题是如何重新加载除某个 div 之外的整个页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:41:50.790

我相信这是不可能的。也许改变你的方法。仅重新加载要刷新的特定区域。事实上，这些区域可能包含在单个（并且可能很大）div 标签中。然后，您可以使用 jQuery ajax 更新该 div。为此，[加载](http://api.jquery.com/load/)是要走的路：

```
$('#result').load('ajax/test.html', function() {
  alert('Load was performed.');
}); 
```

**编辑：**

这是一个使用链接的更具体的示例（只是把它写在我的脑海中）：

```
<script type="text/javascript">
   $(function(){
      $("#myLink").click(function(event){
        $("#updateThisDiv").load($this.attr('href'), function(){
          alert('div updated!');
        });             
        return false; // or event.preventDefault();
      });
    });
</script> 
```

您的链接将如下所示：

```
<a href='pathTo/Page' id='myLink'>Link text</a>

...

<div id="updateThisDiv"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:49:20.663

所以你正在使用 jQuery ajax。即使您通过 ajax 重新加载整个 div，音频对象也保持不变。因此，您可以在对象的帮助下再次生成音频进度。

编辑：
如果您要重新加载页面，只是建议。
首先`currentTime`使用 ajax 将音频对象保存在会话甚至数据库中。当用户加载该音频时，从`currentTime`.
你可以这样做：

```
 yourAudioObject.addEventListener(
                    'timeupdate',
                    function() {
                     $.ajax ({
            type:'get',
            url:'your/path/?currenttime='+yourAudioObject.currentTime, 
            ...... 
```

# rest - glassfish 休息 WEB9031 异常

> ID：13984350
> 
> 赞同：4
> 
> 时间：2012-12-21T04:39:45.867
> 
> 标签：rest, glassfish-3

我在 Glassfish 3.1.2 上部署了一个 Rest Web 服务。我偶尔会得到一个特殊的例外。

```
[#|2012-12-20T10:48:33.796+0530|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=28;_ThreadName=Thread-2;|StandardWrapperValve[Jersey REST Service]: PWC1406: Servlet.service() for servlet Jersey REST Service threw exception
org.codehaus.jackson.map.JsonMappingException: WEB9031: WebappClassLoader unable to load resource [java.util.TimeZone], because it has not yet been started, or was already stopped (through reference chain: spreadsheet.Exceldatalist["globalContext"]->spreadsheet.GlobalContext["dateOfCreation"])
    at org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:218)
    at org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:183)
    at org.codehaus.jackson.map.ser.std.SerializerBase.wrapAndThrow(SerializerBase.java:140)
    at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:158)
    at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
    at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446)
    at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
    at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
    at org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:610)
    at org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:256)
    at org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:1604)
    at org.codehaus.jackson.jaxrs.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:558)
    at com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.writeTo(JacksonProviderProxy.java:160)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [java.util.TimeZone], because it has not yet been started, or was already stopped
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.codehaus.jackson.map.introspect.AnnotatedClass._addMemberMethods(AnnotatedClass.java:620)
    at org.codehaus.jackson.map.introspect.AnnotatedClass.resolveMemberMethods(AnnotatedClass.java:408)
    at org.codehaus.jackson.map.introspect.BasicClassIntrospector.classWithCreators(BasicClassIntrospector.java:185)
    at org.codehaus.jackson.map.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:157)
    at org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:96)
    at org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:16)
    at org.codehaus.jackson.map.SerializationConfig.introspect(SerializationConfig.java:974)
    at org.codehaus.jackson.map.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:251)
    at org.codehaus.jackson.map.ser.StdSerializerProvider._createUntypedSerializer(StdSerializerProvider.java:782)
    at org.codehaus.jackson.map.ser.StdSerializerProvider._createAndCacheUntypedSerializer(StdSerializerProvider.java:735)
    at org.codehaus.jackson.map.ser.StdSerializerProvider.findValueSerializer(StdSerializerProvider.java:344)
    at org.codehaus.jackson.map.ser.impl.PropertySerializerMap.findAndAddSerializer(PropertySerializerMap.java:39)
    at org.codehaus.jackson.map.ser.BeanPropertyWriter._findAndAddDynamic(BeanPropertyWriter.java:463)
    at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:441)
    at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150) 
```

我的 Web 服务在处理后在服务器上编组一个 xml。xml 包含在标签中设置的时间

```
GregorianCalendar gc = (GregorianCalendar) GregorianCalendar
            .getInstance();
globalContextObj.setDateOfCreation(DatatypeFactory.newInstance()
                        .newXMLGregorianCalendar(gc)); 
```

jaxb xml 对象是类的私有成员 var，将访问修饰符从 static 更改为 none 不会影响异常。我读到了`WEB9031`由类加载器无法加载 TimeZone 类库引起的异常。Glassfish 文档建议，在部署时，我们必须在控制台中提及公共库。但我没有公共图书馆。我认为异常中提到的 java.util.timezone 类正在被卸载或类似的东西。

如果有人有任何解决此问题的想法，请告诉我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T14:32:18.093

根据Oracle的说法，[WEB9031](http://docs.oracle.com/cd/E19798-01/821-1755/gjkmu/index.html)的原因和解决方法是：

> 原因：此问题通常表明 Web 应用程序的类加载器已被缓存，并且正在尝试让它加载资源，即使与该类加载器相关联的 Web 应用程序已被取消部署
> 
> 解决方案：确保与您的 Web 应用程序关联的类加载器没有被缓存并在您的 Web 应用程序的生命周期之后使用

由于您的问题似乎是零星的，因此听起来可能是缓存问题。`java.util.TimeZone`但就个人而言，我认为当 Glassfish 本身是 Java 应用程序的服务器时，没有必要要求 Glassfish 用户在 Glassfish 的类路径中放置一个标准 Java 类 ( )！从控制台启动域时提及包含的类的建议`java.util.TimeZone`可能只会起作用，因为它将库添加回类路径。

尝试停止并再次启动域以刷新缓存。

我面临着类似的问题，重新启动域似乎对我不起作用。我只是想我会建议你，因为听起来你没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T05:50:34.737

**执行以下步骤**。

1.  取消部署 glassfish 服务器中部署的所有应用程序。

2.  停止 glassfish 服务器。

3.  清除 glassfish 缓存。（**清除以下文件夹内容**）

    *   $GLASSFISH_HOME/glassfish/domains/domain1/generated/*

    *   $GLASSFISH_HOME/glassfish/domains/domain1/osgi-cache/*

    *   $GLASSFISH_HOME/glassfish/domains/domain1/applications/*

4.  现在重新启动 glassfish 服务器。

# magento - 在 Magento 中如何使用 REST 调用获取 JSONP 数据

> ID：13984353
> 
> 赞同：0
> 
> 时间：2012-12-21T04:40:19.283
> 
> 标签：magento, magento-1.4, magento-1.7, magento-1.5

我是magento的新手。我已经安装了所有东西，并且修改了客户和来宾的 REST 角色和属性。现在，当我以 XML 格式提供我的网址（如*http://192.168.1.101:8010/magento/api/rest/products ）时，我正在接收数据。*

为了以 JSONP 格式接收这个，我读到我们必须包含像 header ('Content-Type: application/javascript') 这样的标题；.. 但是，我们必须在哪个文件中包含此标头以及这些文件位于哪里？？？我不知道正确，但我认为我们必须将此标头包含在 magento 的 api 中。那些位于哪里？？？

请帮帮我..因为时间不多了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:33:45.840

请为 JSON 添加如下标头 Content-Type:application/json 。

# iphone - LLDB 和 GDB 调试器的区别

> ID：13984354
> 
> 赞同：12
> 
> 时间：2012-12-21T04:40:22.597
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [GDB 与 LLDB 调试器](https://stackoverflow.com/questions/9707883/gdb-vs-lldb-debuggers)

我想详细了解LLDB和GDB调试器的区别。到处都提到“LLDB 比 GDB 更快、内存效率更高”。我想知道它在什么意义上更快和内存效率更高。

1.  当我使用 LLDB 时，在调试区域的变量视图中，该特定类或视图控制器的成员变量不显示（计数）。并且当对象添加到本地数组时，对象不会显示在变量视图中，但会显示对象的数量（计数）。

    示例（在变量视图中）：

    arrayOfComments NSMutableArray * 0x068a6700 1 对象

    ->NSArray NSArray

    ->NSObject

2.  当我使用 GDB 时，在调试区域的变量视图中，会显示该特定类或视图控制器的成员变量。并且当对象被添加到本地数组时，对象以及计数显示在变量视图中。

    示例（在变量视图中）：

    arrayOfComments __NSArrayM * 0x68d7970 1 个对象

    ->0 Comment * 0x6804940（此处显示对象）

3.  我看到一篇文章说 LLDB 理解点语法。

    po self.property

    但是当我在 GDB 中使用它时，它甚至适用于“po self.property.previousProperty'sProperty”，但在 LLDB 中不起作用。那么现在 LLDB 如何理解点语法。

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T04:51:24.930

这取决于你的编译器。我建议将 lldb 调试器与“Apple LLVM 编译器 3.0”一起使用，并将 gdb 用于 GCC 风格（包括“LLVM GCC 4.2”）。

以下是我发现对调试有用的一些链接：

[http://lldb.llvm.org/tutorial.html](http://lldb.llvm.org/tutorial.html)

[http://www.corbinstreehouse.com/blog/2007/10/instruments-on-leopard-how-to-debug-those-random-crashes-in-your-cocoa-app/](http://www.corbinstreehouse.com/blog/2007/10/instruments-on-leopard-how-to-debug-those-random-crashes-in-your-cocoa-app/)

[http://www.markj.net/iphone-memory-debug-nszombie/](http://www.markj.net/iphone-memory-debug-nszombie/)

[http://www.cocoadev.com/index.pl?DebuggingAutorelease](http://www.cocoadev.com/index.pl?DebuggingAutorelease)

我认为这些链接可能会对您有所帮助

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-21T04:56:23.747

“LLDB 支持基本的命令行调试并且可以编写脚本”。LLDB 还支持多线程调试。因此 LLDB 比 GDB 调试器更快、更高效。

*在这里，我提出这个证明。*

启动一个没有参数的进程。

**广发银行**

(gdb) 运行

(gdb) r

* * *

**LLVM**

(lldb) 进程启动

(lldb) 运行

(lldb) r

你会得到一个确切的想法，如果你通过这个 [LLDB 调试器](http://lldb.llvm.org/lldb-gdb.html)

# python - PythonMagick 找不到我的 pdf 文件

> ID：13984357
> 
> 赞同：10
> 
> 时间：2012-12-21T04:41:01.700
> 
> 标签：python, windows, pdf, runtime-error, pythonmagick

[我已经从非官方 Windows 二进制文件](http://www.lfd.uci.edu/~gohlke/pythonlibs/)下载并安装了 PythonMagick for python 2.7, 64 bit Windows 7 。

我正在尝试运行此代码（Processor.py）

```
import PythonMagick

pdf = 'test.pdf'
p = PythonMagick.Image()    
p.density('600')
p.read(pdf)
p.write('doc.jpg') 
```

在此文件夹中（D:\Python Projects\Sheet Music Reader） ![D:\Python 项目\乐谱阅读器](../Images/b4f2b5aa09f3e16dc07cf6b0bc65c535.png)

但是，使用该相对 pdf 路径或`pdf = "D:\\Python Projects\\Sheet Music Reader"`会导致此错误；

```
Traceback (most recent call last):
  File "D:/Python Projects/Sheet Music Reader/Processor.py", line 6, in <module>
    p.read(pdf)  
RuntimeError: Magick: PostscriptDelegateFailed `D:\Python Projects\Sheet Music Reader\test.pdf':   
No such file or directory @ error/pdf.c/ReadPDFImage/664 
```

我只是不明白为什么它找不到我的 pdf；它与 python 脚本位于同一目录中。

是什么导致了这个错误，我该如何解决？
（我的印象是在 python 中将 pdf 转换为图像是一场噩梦）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-21T08:39:24.677

几天前我遇到了完全相同的问题。虽然从 .gif（或其他东西）转换为 .jpg 工作得很好，但从 .pdf 转换为 .jpg 会产生完全相同的错误。那是因为 ImageMagick 使用 Ghostscript 来阅读/转换 PDF。

[您可以通过安装Ghostscript](http://www.ghostscript.com/download/gsdnld.html)来解决问题（仅 32 位版本有效）。不要忘记将“C:\Program Files (x86)\gs\gs9.06\bin”添加到您的系统路径。

这是我如何让 PythonMagick 工作的分步指南：（
我在 Windows 7 64 位上使用 Python 2.7.3 32 位。）

1.  安装最新版本的[ImageMagick](http://www.imagemagick.org/download/binaries)（在撰写本文时为“ImageMagick-6.8.1-1-Q16-windows-dll.exe”。请注意，这是 32 位版本；64 位也适用于我）。
    **不要**忘记选中*“安装 C 和 C++ 的开发头文件和库”*选项。
2.  将“ **MAGICK_HOME** ”环境设置为 ImageMagick 的路径（对我来说`C:\Program Files (x86)\ImageMagick-6.8.1-Q16`）。
    如果还没有，则将此路径设置为您的系统范围路径的第一个位置。
3.  下载并安装 32 位版本的[GhostScript](http://www.ghostscript.com/download/gsdnld.html)（64 位将无法工作，即使您已经安装了 64 位版本的 ImageMagick）。在 ImageMagick 之后
    设置为您的系统范围路径。`C:\Program Files (x86)\gs\gs9.06\bin`
4.  检查您的设置是否有效。`convert some.pdf some.jpg`在命令行中尝试。如果它不起作用，那么您在第 1-3 点做错了。
5.  使用非官方二进制文件安装[PythonMagick](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pythonmagick)，而不是使用 easy_install 或 pip。
    （再次重申：我使用的是 32 位 Python 2.7.3 解释器，因此我使用了“PythonMagick-0.9.7.win32-py2.7.‌exe”。）
6.  启动 Python 命令行实用程序并尝试以下操作：

```
from PythonMagick import Image
im = Image()
im.read(r"C:\Path\To\Some.pdf")
im.write("some.jpg") 
```

多页 PDF 的附加示例：

```
import os
from pyPdf import PdfFileReader, PdfFileWriter
from tempfile import NamedTemporaryFile
from PythonMagick import Image

reader = PdfFileReader(open("some.pdf", "rb"))
for page_num in xrange(reader.getNumPages()):
    writer = PdfFileWriter()
    writer.addPage(reader.getPage(page_num))
    temp = NamedTemporaryFile(prefix=str(page_num), suffix=".pdf", delete=False)
    writer.write(temp)
    temp.close()

    im = Image()
    im.density("300") # DPI, for better quality
    im.read(temp.name)
    im.write("some_%d.jpg" % (page_num))

    os.remove(temp.name) 
```

这是我想到的那个问题的唯一解决方法。

# javascript - 如何在 xul 中创建自己的后退/前进按钮？

> ID：13984358
> 
> 赞同：1
> 
> 时间：2012-12-21T04:41:02.743
> 
> 标签：javascript, browser, firefox-addon, xul, xulrunner

试图在 xul 中创建我自己的后退/前进按钮。

我的代码：

```
<label value=" ❀ Back " id="back_button" style="-moz-border-radius: 20px; -webkit-border-radius: 20px; -khtml-border-radius: 20px; border-radius: 20px;background:#C93E1D; width:100px; color:white;" onclick="history.go(-1);"></label> 
```

还尝试了单击 xul 按钮的 history.back() onclick。但是什么也没发生。

```
<button label="back" oncommand="history.back();"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:23:06.820

这对我有用：

```
document.getElementById("main-browser").webNavigation.goBack(); 
```

# linux - 将 debian 移植到 leopord dm368

> ID：13984362
> 
> 赞同：0
> 
> 时间：2012-12-21T04:41:45.180
> 
> 标签：linux, linux-kernel, embedded-linux

我正在尝试在 leopord dm36X 上移植 debian linux 发行版。

有人已经移植了吗？如果是，请提供从哪里开始的指示..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:17:07.627

似乎内核已移植到[dm365](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/mach-davinci/dm365.c;h=b680c832e0ba87758f1f29aeb502109ce2699268;hb=b69f0859dc8e633c5d8c06845811588fe17e68b3)，还有用于 leopard 制造的基于[dm355](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/mach-davinci/board-dm355-leopard.c;h=2f88103c64595c1f68a3ad9f7ca026e0b8644741;hb=b69f0859dc8e633c5d8c06845811588fe17e68b3)的板的 BSP 和 TI 的[dm365 评估板](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/mach-davinci/board-dm365-evm.c;h=1b4a8adcfdc9f1f86f87079c8ab8b009e0bc105a;hb=b69f0859dc8e633c5d8c06845811588fe17e68b3)- 这些都可能是相关的，具体取决于 dm368 的不同程度。

我想这是起点，我还会查看 TI 的开发人员讨论板以获取任何公告。

# java - Java - 存储单个值和一条相应信息的最佳方式？

> ID：13984366
> 
> 赞同：2
> 
> 时间：2012-12-21T04:42:04.060
> 
> 标签：java, arrays, list, object

Java中存储一个值和关于该值的一条相应信息的最佳方式是什么？尽管使用起来可能很棒，但我觉得一个简单的 POJO 在这里有点矫枉过正。

问题如下：我有一个包含不同类型“权重”值的表单对象。其中一些权重可能需要在我的 JSP 页面上以**粗体**显示，而在其他时候则不需要。

表示此信息的一种方法是使用大小为 2 的数组，其中第一个值是权重，第二个值是“Y”或“N”来表示其**粗体**状态。

另一种选择是使用一个也包含两个值的列表。或使用枚举，或自定义类型的对象等。

从设计的角度来看，表示这种基本数据形式的最简洁、最有效的方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:44:20.410

为什么不使用 HashMap？使用权重作为键，值作为真或假。

```
Map<Double, Boolean> weight = new HashMap<Double, Boolean>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T04:56:12.207

使用重量很容易：取一个原始的双精度，如果你想用 NO 标记它，让它成为负数。

```
boolean no = weight < 0;
boolean yes = weight > 0;
double realWeight = Math.abs(weight); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T04:46:24.780

您是否考虑使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)？这使您可以将密钥/对集中的两条数据关联起来。例如，对于每个权重（一个 Double 值），您可以关联一个布尔值，说明它是否应该是粗体：

```
HashMap formData = new HashMap<Double, Boolean>();

formData.put(0.005, true);
formData.put(0.333, true);
formData.put(1.5, false);
formData.put(0.25, true); 
```

您可以像这样获取任何个人价值：

```
formData.get(0.005);      // returns 'true' 
```

或者您可以像这样遍历所有值：

```
Iterator it = formData.iterator();
while (it.hasNext()) {
    Double singleForm = (Double)it.next();
    System.out.println(singleForm.getKey() + " is " + singleForm.getValue());
} 
```

HashMap 是一种极其[快速](https://stackoverflow.com/questions/1055243/is-a-java-hashmap-really-o1)、[轻量级](https://stackoverflow.com/questions/1526596/memory-overhead-of-java-hashmap-compared-to-arraylist)的标准数据结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T04:49:41.137

使用`Collections`→ `Map`，类似这样的东西。

```
Map<String, String> dataMap1 = new HashMap<>();

Map<pojo, boolean> dataMap2 = new HashMap<>();
dataMap2.put(pojo1, true);
... 
```

键值对，将键存储为对象，将值存储为该对象的属性

参考：[集合 API](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)，[地图 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html)

# jquery - jquery 不正确的产品可用性结果

> ID：13984368
> 
> 赞同：0
> 
> 时间：2012-12-21T04:42:20.637
> 
> 标签：jquery

我制作了一个自定义产品可用性代码，用于检查产品尺寸（T 恤）是否可用。问题是即使尺码不可用，它也会显示默认选择的尺码，其价格+另一种尺码的价格，当我们单击该尺码不可用时，该尺码可用。例如。三种尺寸，中号，小号和大号。假设中号和大号可用，那么当我们点击小号时，它不应该显示任何价格，而是显示其中所有可用的价格。如果有更多尺寸（例如特小号），它会显示其价格，而其余尺寸的价格则不应该。虽然当所有尺寸都可用时它工作正常。我写的代码是谁能建议我哪里错了？

```
 $.fn.contentTabs = function(o){
        // default options
        var options = $.extend({
            activeClass:'active',
            addToParent:false,
            autoHeight:false,
            autoRotate:false,
            animSpeed:400,
            switchTime:3000,
            effect: 'none', // "fade", "slide"
            tabLinks:'a',
            event:'click'
        },o);

        return this.each(function(){
            var tabset = $(this);
            var tabLinks = tabset.find(options.tabLinks);
            var tabLinksParents = tabLinks.parent();
            var prevActiveLink = tabLinks.eq(0), currentTab, animating;
            var tabHolder;

            // init tabLinks
            tabLinks.each(function(){
                var link = $(this);
                var href = link.attr('href');
                var parent = link.parent();
                href = href.substr(href.lastIndexOf('#'));

                // get elements
                var tab = $(href);
                link.data('cparent', parent);
                link.data('ctab', tab);

// find tab holder
if(!tabHolder && tab.length > 0) {
   tabHolder = tab.parent();

}

                // show only active tab
                if((options.addToParent ? parent : link).hasClass(options.activeClass)) {
                    prevActiveLink = link; currentTab = tab;
                    tab.removeClass(tabHiddenClass).width("");
                    contentTabsEffect[options.effect].show({tab:tab, fast:true});
                } else {
                    contentTabsEffect[options.effect].hide({tab:tab, fast:true});
                    tab.width(tab.width()).addClass(tabHiddenClass);
                }

                // event handler
                link.bind(options.event, function(e){
                    if(link != prevActiveLink && !animating) {
                        switchTab(prevActiveLink, link);
                        prevActiveLink = link;
                    }
                    e.preventDefault();
                });
                if(options.event !== 'click') {
                    link.bind('click', function(e){
                        e.preventDefault();
                    });
                }
            });

            // tab switch function
            function switchTab(oldLink, newLink) {
                animating = true;
                var oldTab = oldLink.data('ctab');
                var newTab = newLink.data('ctab');
                currentTab = newTab;

                // refresh pagination links
                (options.addToParent ? tabLinksParents : tabLinks).removeClass(options.activeClass);
                (options.addToParent ? newLink.data('cparent') : newLink).addClass(options.activeClass);

                // hide old tab
                resizeHolder(oldTab, true);
                contentTabsEffect[options.effect].hide({
                    speed: options.animSpeed,
                    tab:oldTab,
                    complete: function() {
                        // show current tab
                        resizeHolder(newTab.removeClass(tabHiddenClass).width(''));
                        contentTabsEffect[options.effect].show({
                            speed: options.animSpeed,
                            tab:newTab,
                            complete: function() {
                                oldTab.width(oldTab.width()).addClass(tabHiddenClass);
                                animating = false;
                                resizeHolder(newTab, false);
                                autoRotate();
                            }
                        });
                    }
                });
            }

            // holder auto height
            function resizeHolder(block, state) {
                var curBlock = block && block.length ? block : currentTab;
                if(options.autoHeight && curBlock) {
                    tabHolder.stop();
                    if(state === false) {
                        tabHolder.css({height:''});
                    } else {
                        var origStyles = curBlock.attr('style');
                        curBlock.show().css({width:curBlock.width()});
                        var tabHeight = curBlock.outerHeight(true);
                        if(!origStyles) curBlock.removeAttr('style'); else curBlock.attr('style', origStyles);
                        if(state === true) {
                            tabHolder.css({height: tabHeight});
                        } else {
                            tabHolder.animate({height: tabHeight}, {duration: options.animSpeed});
                        }
                    }
                }
            }
            if(options.autoHeight) {
                $(window).bind('resize orientationchange', function(){
                    resizeHolder(currentTab, false);
                });
            }

            // autorotation handling
            var rotationTimer;
            function nextTab() {
                var activeItem = (options.addToParent ? tabLinksParents : tabLinks).filter('.' + options.activeClass);
                var activeIndex = (options.addToParent ? tabLinksParents : tabLinks).index(activeItem);
                var newLink = tabLinks.eq(activeIndex < tabLinks.length - 1 ? activeIndex + 1 : 0);
                prevActiveLink = tabLinks.eq(activeIndex);
                switchTab(prevActiveLink, newLink);
            }
            function autoRotate() {
                if(options.autoRotate && tabLinks.length > 1) {
                    clearTimeout(rotationTimer);
                    rotationTimer = setTimeout(nextTab, options.switchTime);
                }
            }
            autoRotate();
        });
    } 
```

# haskell - 使用管道从流中构建股票条数据——我如何获得多个深度？

> ID：13984369
> 
> 赞同：4
> 
> 时间：2012-12-21T04:42:26.120
> 
> 标签：haskell

目前我的数据如下所示：

```
3-150
2-151
4-152
5-154
7-154
1-155
9-155
6-156 
```

这只是人工的“tick”数据，第一个代表tick的值，第二个代表“午夜后的秒数”

因此，对于股票数据，我需要将这些数据分类为“条形”。那就是我需要在给定的时间内将所有的酒吧组合在一起。

一个例子是 4 秒小节。午夜后 0-3 秒的刻度将是 1 个小节，午夜后 4-7 秒将是另一个小节。

我有看起来像这样的导管/水槽，它将计算 1 个条形尺寸：

```
{-# LANGUAGE OverloadedStrings #-}

import Data.Maybe (isJust, fromJust)
import qualified Data.ByteString.Char8 as C
import Control.Applicative ((<$>), (<*>))

import Data.Conduit -- the core library
import qualified Data.Conduit.List as CL -- some list-like functions
import qualified Data.Conduit.Binary as CB -- bytes
import qualified Data.Conduit.Text as CT

data MyData = MyData Int Int
    deriving (Show)

binaryToData :: C.ByteString -> Maybe MyData
binaryToData bn = do
    let parts = C.split '-' bn
    case parts of
        (a:b:[]) -> MyData <$> (fst <$> (C.readInt a)) <*> (fst <$> (C.readInt b))
        _ -> Nothing

streamGenerator =
    CB.sourceFile "sample.txt" =$=
    CB.lines =$=
    CL.map binaryToData =$=
    CL.filter isJust =$=
    CL.map fromJust =$=
    CL.groupBy (\(MyData _ x) (MyData _ y) -> (x `quot` 4) == (y `quot` 4))

main :: IO ()
main = do
    mlines <- runResourceT $ streamGenerator $$ CL.consume
    print mlines 
```

但是，我需要同时关闭流中的多个酒吧信息。例如，对于每 2 秒的小节，我需要一个 4 秒的小节。如果被调用的 2 秒条位于 4 秒条的中间，我想输出前 4 秒条。

这就是我的意思：

标准柱（数字表示柱应包含的按午夜后的秒数计的刻度）：

```
2 second bar : 0-1, 2-3, 4-5, etc...
4 second bar : 0-3, 4-7, 8-11, etc...
combo: (0-1, null), (2-3, 0-3), (4-5, 0-3),  (6-7, 4-7), etc... 
```

因此，而不是我当前的 2 秒和 4 秒小节分组管道：

```
4 second bar : [[MyData 3 150,MyData 2 151],[MyData 4 152,MyData 5 154,MyData 7 154,MyData 1 155,MyData 9 155],[MyData 6 156]]
2 second bar : [[MyData 3 150,MyData 2 151],[MyData 4 152],[MyData 5 154,MyData 7 154,MyData 1 155,MyData 9 155],[MyData 6 156]] 
```

我想要这个管道流：

```
[([MyData 3 150,MyData 2 151], [MyData 3 150,MyData 2 151])
,([MyData 4 152], [MyData 3 150,MyData 2 151])
,([MyData 5 154,MyData 7 154,MyData 1 155,MyData 9 155], [MyData 4 152,MyData 5 154,MyData 7 154,MyData 1 155,MyData 9 155])
,([MyData 6 156],[MyData 4 152,MyData 5 154,MyData 7 154,MyData 1 155,MyData 9 155])] 
```

但是如果不做一些丑陋的事情，我似乎无法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:46:55.740

如果您不介意，我可以使用我的库来回答您的问题`pipes`，因为这就是我所接受的。`conduit`如果您愿意，可以将此解决方案翻译为。

解决此问题的干净解决方案需要推回，但`pipes`还没有推回，所以我继续实施它（我将在不久的将来作为扩展库包含在内）：

```
import Control.Monad
import Control.Proxy
import Control.Proxy.Trans.State

-- Pushback primitives, soon to be in a `pipes` library

require :: (Monad m, Proxy p) => a' -> StateP [a] p a' a b' b m a
require a' = StateP $ \s -> runIdentityP $ do
    case s of
        [] -> do
            a <- request a'
            return (a, s)
        a:as -> do
            return (a, as)

pushback :: (Monad m, Proxy p) => a -> StateP [a] p a' a b' b m ()
pushback a = StateP $ \as -> runIdentityP $ return ((), a:as)

evalPushback = evalStateK [] 
```

有了这些，解决方案很简单：

```
data MyData = MyData Int Int deriving (Eq, Show)

-- Consumes ticks up until the deadline or the end of input
-- Returns the list of all ticks before the deadline
ticksUntil
 :: (Monad m, Proxy p)
 => Int -> () -> Consumer (StateP [Maybe MyData] p) (Maybe MyData) m [MyData]
ticksUntil deadline () = go where
    go = do
        x <- require ()
        case x of
            Just m@(MyData _ time) ->
                if (time < deadline)
                then do
                    ms <- go
                    return (m:ms)
                else do
                    pushback x
                    return []
            Nothing -> return []

bars
 :: (Monad m, Proxy p)
 => () -> Pipe (StateP [Maybe MyData] p) (Maybe MyData) ([MyData], [MyData]) m r
bars () = loop1 2 [] where
    -- First half of a 4-second window
    loop1 deadline b4 = do
        b2 <- (ticksUntil deadline >-> unitU) ()
        respond (b2, b4)
        loop2 (deadline + 2) b2 b4

    -- Second half of a 4-second window
    loop2 deadline b2 b4 = do
        b2' <- (ticksUntil deadline >-> unitU) ()
        let b4' = b2 ++ b2'
        respond (b2', b4')
        loop1 (deadline + 2) b4'

sample :: [MyData]
sample = [
    MyData 3 150,
    MyData 2 151,
    MyData 4 152,
    MyData 5 154,
    MyData 7 154,
    MyData 1 155,
    MyData 9 155,
    MyData 6 156]

-- Use the same trick as conduit: Nothing signals termination
source :: (Monad m, Proxy p) => () -> Producer p (Maybe MyData) m ()
source () = runIdentityP $ do
    (fromListS sample >-> mapD Just) ()
    respond Nothing

main = runProxy $
     source                 -- feed sample data
 >-> evalPushback bars      -- group the data into bars
 >-> filterD (/= ([], []))  -- Ignore empty bars
 >-> printD                 -- print outgoing bars 
```

神奇在于`bars`功能。它只是在两种状态之间切换。 `loop1`是第一个状态，它期望在一组 4 个值中的第一个 2 个值，并且`loop2`是第二个状态，它期望第二个值 2 个值。

实现这一点最困难的部分不是编写代码，而是理解您的规范。不过幸运的是，我想我明白了你的意思，因为我的代码产生了与你的测试示例完全相同的行为：

```
>>> main
([MyData 3 150,MyData 2 151],[MyData 3 150,MyData 2 151])
([MyData 4 152],[MyData 3 150,MyData 2 151])
([MyData 5 154,MyData 7 154,MyData 1 155,MyData 9 155],[MyData 4 152,MyData 5 154,MyData 7 154,MyData 1 155,MyData 9 155])
([MyData 6 156],[MyData 4 152,MyData 5 154,MyData 7 154,MyData 1 155,MyData 9 155]) 
```

如果您对此感兴趣`pipes`，那么我建议您查看该[`pipes`库，尤其是](http://hackage.haskell.org/package/pipes)[Control.Proxy.Tutorial](http://hackage.haskell.org/packages/archive/pipes/3.0.0/doc/html/Control-Proxy-Tutorial.html)中的教程，其中解释了我在代码中使用的许多习语。

# sql - 获取结合日、月、年的最高日期

> ID：13984372
> 
> 赞同：0
> 
> 时间：2012-12-21T04:42:55.830
> 
> 标签：sql, tsql, sql-server-2008-r2

我正在开发一个游戏，其中我有一个名为的表`punishment` ，它具有以下架构

```
CREATE TABLE Punishment
(
  PunishmentId int identity(1,1) not null , 
  PunishmentDay int , 
  PunishmentMonth int , 
  PunishmentYear int ,
  GameId int 
) 
```

PunishmentDay ,PunishmentMonth ,PunishmentYear 是可以为零或空或任何数字的数字。

`GameId`可以在此表中重复，意味着我可以在同一场比赛中获得多次惩罚。

现在我的问题是我必须让`punishmentId`哪个用户得到最高的惩罚。

我尝试了以下方式但无法获得最大记录..

```
SELECT PunishmentId, DATEADD(DD,PunishmentDay,DATEADD(MM,PunishmentMonth,(DATEADD(YY,PunishmentYear,GETDATE()))))

   FROM Punishment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:21:49.577

You can use ROW_NUMBER() instead of a correlated subquery to find the max year/month/day. ROW_NUMBER() will allow you assign an incrementing row number based on an order by clause. You can then select only rows where that rownumber = 1\. Try something like this:

```
SELECT * FROM
( SELECT PunishmentId,PunishmentDay,PunishmentMonth,PunishmentYear, DATEADD(DD,PunishmentDay,DATEADD(MM,PunishmentMonth,(DATEADD(YY,PunishmentYear,GETDATE())))) TotalDays, ROW_NUMBER() OVER(PARTITION BY GameId ORDER BY PunishmentYear, PunishmentMonth, PunishmentDay DESC) RowNumber
FROM Punishment
WHERE GameId = @GameId 
) OrderedPunishment
WHERE RowNumber = 1 
```

Note: I haven't checked this for syntax, and I based the statement off your statement (pretty much ignored your nested dateadds, maybe there is a better way to do that too). I also only just now noticed your second table name ConvictCases_G... I didn't see that that is supposed to be Punishment.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:59:37.993

我已经通过以下 sql 解决了这个问题

```
SELECT PunishmentId,PunishmentDay,PunishmentMonth,PunishmentYear, DATEADD(DD,PunishmentDay,DATEADD(MM,PunishmentMonth,(DATEADD(YY,PunishmentYear,GETDATE()))))

FROM Punishment

WHERE GameId=@GameId  and 
DATEADD(DD,PunishmentDay,DATEADD(MM,PunishmentMonth,(DATEADD(YY,PunishmentYear,GETDATE())))) 
= (SELECT MAX(DATEADD(DD,PunishmentDay,DATEADD(MM,PunishmentMonth,(DATEADD(YY,PunishmentYear,GETDATE())))))   FROM Punishment where GameId=@GameId) 
```

但仍在等待是否有更好的解决方案..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:29:42.117

This should work

```
SELECT   TOP 1 PunishmentId
FROM    
(
SELECT  TOP 100 PERCENT
        PunishmentId ,
        SUM(PunishmentDay + PunishmentMonth*30 + PunishmentYear*360) AS MaxPunishment
FROM    @p
GROUP   BY  PunishmentId
ORDER   BY  SUM(PunishmentDay + PunishmentMonth*30 + PunishmentYear*360) DESC 
)
AS X 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T07:28:13.980

You could also use:

```
SELECT TOP 1 WITH TIES 
    PunishmentId,PunishmentDay,PunishmentMonth,PunishmentYear, 
    DATEADD(DD,PunishmentDay,DATEADD(MM,PunishmentMonth,(DATEADD(YY,PunishmentYear,GETDATE())))) AS PunishmentEndDate
FROM Punishment
WHERE GameId=@GameId
ORDER BY PunishmentEndDate DESC 
```

# php - 亚马逊产品广告 API PHP 仅显示产品图片

> ID：13984373
> 
> 赞同：0
> 
> 时间：2012-12-21T04:43:00.697
> 
> 标签：php, amazon

我正在尝试从 Amazon 运行一个 php 脚本以仅显示相机的图像。例如，我只想显示 Nikon D5100 相机或 Iphone。如何通过亚马逊产品广告 API 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T20:26:37.303

我认为他们有很多选择（语言）。

这是使用 PHP 执行此操作的链接：

[http://aws.amazon.com/code/Product-Advertising-API/4373](http://aws.amazon.com/code/Product-Advertising-API/4373)

# android - 如何制作适用于 Android 的曲面屏幕键盘

> ID：13984378
> 
> 赞同：31
> 
> 时间：2012-12-21T04:43:23.180
> 
> 标签：android, keyboard

我想为 Android 制作一个弯曲的屏幕键盘。我检查了软键盘，以及谷歌代码上的各种其他屏幕键盘。我发现没有一个键盘形状不是矩形。理想情况下，我想创建一个键盘，该键盘由分布在屏幕两侧的两个半圆上的键组成（即，想象一下将平板电脑放在两侧并能够用拇指敲击键）。

在我检查过的代码中，屏幕键盘被创建为视图（通常扩展 KeyboardView）并显示为屏幕底部的连续条。作为我的目标的近似值，我试图改变我在谷歌代码（dotdash-keyboard-android）上找到的代码，只在左下角绘制它的键，并使右下角保持透明。我已经能够覆盖 onMeasure 以影响视图的尺寸（见下文），但这似乎只会改变键的位置而不是容器的位置。换句话说，屏幕底部仍然有一个黑条。

```
//Located within KeyboardView
@Override public void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
    this.setMeasuredDimension(200, 200);
} 
```

我想做的甚至可能吗？有更正确的术语吗？有没有可以用作示例的项目？

我还尝试使用 this.setLayoutParams 设置视图的尺寸——但是，这些调用似乎没有效果。我也尝试使用 this.getParent 来访问父视图（如果甚至存在的话）并更改它的尺寸，但这种方法不起作用（或者，我只是做错了）。任何帮助将非常感激。

谢谢

更新：12/21/2012 - 我想我需要重写父类的 onDraw 方法。看[这里](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/inputmethodservice/KeyboardView.java.htm)，看起来 KeyboardView 的 onDraw 方法使用以下代码绘制到与屏幕大小相等的画布上：

```
final int width = Math.max(1, getWidth());
final int height = Math.max(1, getHeight());
mBuffer = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
mCanvas = new Canvas(mBuffer); 
```

我想我可以覆盖 onDraw 并在画布上绘制我想要的任何东西。

更新：2012 年 12 月 21 日-我已经覆盖了 onDraw，现在很明显，keyboardView 是我将其设置为 (200x200) 的尺寸。使用 Hierarchyview，我可以看到键盘视图位于 ID 为 InputArea 的框架布局内。所以，填满整个宽度的单杠就是这个framelayout。但是，我不是在创造它——它来自哪里，我怎样才能改变它的尺寸？

更新：2012 年 12 月 22 日 - 经过更多测试后，似乎键盘视图的行为（尺寸）部分取决于调用它的活动。在浏览器中，我得到了我一直在描述的行为：即使键盘的宽度小于屏幕。在日历应用程序中，键盘大小显示为我设置的大小（作为左下角的正方形），日历在其下方显示不变。因此，使用这种方法的大多数应用程序似乎不可能达到我的目标。另一种方法可能是让 IME 服务创建一个弹出窗口或对话框。一个问题是popupwindows需要一个父视图或锚点来附加，我不认为它' 可以从 IME 服务中找到最顶层的视图。也许我可以在当前活动上创建一个透明视图并将弹出窗口放在上面？

更新：2012 年 12 月 23 日 - 进展。我已经弄清楚如何从键盘 IME 显示弹出窗口。下一步是弄清楚如何使弹出窗口有点圆/有机。这是我完成的屏幕截图，然后是源代码。 ![键盘模拟器截图](../Images/277fb68dac6e9b5a8999c8617a2d04e6.png)

资源。以下方法在服务 IME 类中，由子（服务）视图的 onMeasure 方法调用，以便在绘制键盘的同时打开弹出窗口。我已将键盘的尺寸设置为 1x1，因此它不可见。日志语句可以帮助我弄清楚如何定位弹出窗口。

```
public void initiatePopupWindow()
{
    try {
        WindowManager wm = (WindowManager) this.getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();
        DisplayMetrics dm = new DisplayMetrics();
        display.getMetrics(dm);
        //display.getSize(p);

        Log.i("dotdashkeyboard","initiatePopupWindow (from IME service)");
        LayoutInflater inflater = (LayoutInflater) this.getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layoutLeft = inflater.inflate(R.layout.popup_layout_left,null);
        View layoutRight = inflater.inflate(R.layout.popup_layout_right, null);
        // create a 300px width and 470px height PopupWindow
        int popupHeight = 300;
        int popupWidth = 200;
        if (popUpLeft == null) popUpLeft = new PopupWindow(layoutLeft, popupWidth, popupHeight, false);
        if (popUpRight == null) popUpRight = new PopupWindow(layoutRight, popupWidth, popupHeight, false);

        int ypos = 0;
        int xposRight = 0;

        if (display.getRotation() == Surface.ROTATION_0) {
            ypos = -(dm.heightPixels / 2 + popupHeight/2);
            xposRight = (dm.widthPixels - popupWidth);
            Log.i("dotdashkeyboard","test rotation=normal");
        } else if (display.getRotation() == Surface.ROTATION_90) {
            ypos = -(dm.heightPixels / 2 + popupHeight/2)/2;
            xposRight = (dm.widthPixels - popupWidth)*2-popupWidth;
            Log.i("dotdashkeyboard","test rotation=90-degrees");
        } else {
            Log.i("dotdashkeyboard","test rotation=unknown=" + display.getRotation());
        }

        popUpLeft.showAtLocation(inputView, Gravity.NO_GRAVITY, 0, ypos);
        popUpRight.showAtLocation(inputView, Gravity.NO_GRAVITY, xposRight, ypos);

        Log.i("dotdashkeyboard","test created popup at ypos="+ypos  + " xposRight=" + xposRight);
        Log.i("dotdashkeyboard","test screenWidth=" + dm.widthPixels + " screenHeight=" + dm.heightPixels);

        Button cancelButton = (Button) layoutLeft.findViewById(R.id.popup_cancel_button);
        //cancelButton.setOnClickListener(inputView.cancel_button_click_listener);
        cancelButton.setOnClickListener(cancel_button_click_listener);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:50:32.610

你在这里似乎走在了正确的轨道上。正如您所指出的，大多数活动都会缩小其视图以为键盘窗口提供空间，因此如果您希望调用活动填满屏幕，您需要使用辅助窗口，例如 PopupWindow。您可以将主窗口的尺寸设置为 0x0。

你试过打电话`popUpLeft.setBackgroundDrawable(null)`/`popUpRight.setBackgroundDrawable(null)`吗？这应该删除半透明背景并仅显示您在顶部绘制的任何内容。

# hadoop - 使用或不使用 Hive 在 Amazon EMR 中处理日志

> ID：13984379
> 
> 赞同：0
> 
> 时间：2012-12-21T04:43:34.783
> 
> 标签：hadoop, hive, hadoop-streaming, emr

我的 EMR 集群中有很多日志文件，路径为“hdfs:///logs”。每个日志条目是多行，但有一个开始和结束标记来区分两个条目。现在，

1.  并非日志文件中的所有条目都有用
2.  有用的条目需要转换，输出需要存储在输出文件中，以便我以后可以有效地查询（使用 Hive）输出日志。

我有一个 python 脚本，它可以简单地获取一个日志文件并执行 a 部分。和 b。上面提到了，但我没有写任何映射器或减速器。

Hive 负责 Mappers 和 Reducers 的查询。请告诉我是否以及如何使用 python 脚本在所有日志上运行它并将输出保存在 'hdfs:///outputlogs' 中？

我是 Map Reduce 的新手，看过一些字数的例子，但它们都有一个输入文件。在哪里可以找到具有多个输入文件的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:22:42.223

在这里，我看到您有两个问题：

*   **有多个文件作为输入**

    如果您将多个文件作为输入传递，则相同的字数统计示例将起作用。实际上`folder name`，在您的情况下，您可以非常轻松地将 a 作为输入而不是文件名传递`hdfs:///logs`。

    您甚至可以传递逗号分隔的路径列表作为输入，而不是使用以下内容：

    `FileInputFormat.setInputPaths(conf, new Path(args[0]));`

    您可以使用以下内容：

    `FileInputFormat.setInputPaths(job, args[0]);`

    请注意，仅传递逗号分隔的列表`args[0]`就足够了。

*   **如何将您的逻辑转换为 mapreduce**

    这确实有一个陡峭的学习曲线，因为您需要从关键和价值方面进行思考。但我觉得你可以在映射器本身中拥有所有逻辑并拥有一个`IdentityReducer`，像这样：

    `conf.setReducerClass(IdentityReducer.class);`

    如果您花一些时间阅读以下位置的示例，您应该能够更好地做出这些决定：

    *   [hadoop-map-reduce-examples](http://code.google.com/p/hadoop-map-reduce-examples/) ( [http://hadoop-map-reduce-examples.googlecode.com/svn/trunk/hadoop-examples/src/](http://hadoop-map-reduce-examples.googlecode.com/svn/trunk/hadoop-examples/src/) )
    *   [http://developer.yahoo.com/hadoop/tutorial/module4.html](http://developer.yahoo.com/hadoop/tutorial/module4.html)
    *   [http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)
    *   [http://kickstarthadoop.blogspot.in/2011/04/word-count-hadoop-map-reduce-example.html](http://kickstarthadoop.blogspot.in/2011/04/word-count-hadoop-map-reduce-example.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:40:38.250

正如 Amar 所说，长期正确的做法是编写一个 MapReduce 作业来完成它。

但是，如果这是一次性的事情，并且数据不是太大，那么使用简单的 bash 脚本执行此操作可能是最简单/最容易的，因为您已经有了 python 脚本：

```
hadoop fs -text /logs/* > input.log
python myscript.py input.log output.log
hadoop fs -copyFromLocal output.log /outputlogs
rm -f input.log output.log 
```

如果这是一个重复的过程——你想要可靠和高效的东西——或者如果你只是想学习更好地使用 MapReduce，那么坚持使用 Amar 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T11:23:52.573

如果您已经编写了逻辑，并且您想使用 EMR 和/或 vanilla Hadoop 进行并行处理 - 您可以使用 Hadoop 流：[http](http://hadoop.apache.org/docs/r0.15.2/streaming.html) ://hadoop.apache.org/docs/r0.15.2/streaming.html 。简而言之 - 您的脚本将数据输入标准输入并输出到标准输出可以成为映射器。
因此，您将使用集群在 HDFS 中运行数据处理，而无需重新打包您的代码。

# azure - 错误字符串和窗口天蓝色后的未闭合引号

> ID：13984380
> 
> 赞同：1
> 
> 时间：2012-12-21T04:43:44.590
> 
> 标签：azure, azure-sql-database

我正在尝试在 Windows azure 中运行我的 SQL 脚本。我使用转换我的查询`SQLAzureMW v3.9.9.1 Release Binary`，当我尝试运行脚本时，我 `Unclosed quotation mark after the character string ...`在转换后的 sp 中出现错误。我的sp很好`MSSQL 2008`。

转换前我的 sp：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

    ALTER PROCEDURE [dbo].[EntryUpdate]

        @EntryID INT, 
        @Value NVARCHAR(100), 
        @Text NVARCHAR(150), 
        @CurrencyCode NVARCHAR(50),
        @DisplayLocale NVARCHAR(50),
        @Description NVARCHAR(500),
        @IsActive BIT,
        @UpdatedBy NVARCHAR(256),
        @Culture NVARCHAR(256)

    AS
    BEGIN
        UPDATE dbo.Lists
            SET 
                [Value] = @Value,
                [Text] = @Text,         
                [CurrencyCode]=@CurrencyCode,
                [DisplayLocale]=@DisplayLocale,
                [Description] = @Description,
                [IsActive]=@IsActive,
                [UpdatedBy] = @UpdatedBy,   
                [UpdatedOn] = GETDATE()
            WHERE   [EntryID] = @EntryID AND Culture=@Culture
    END 
```

用我的 sp 转换后的`SQLAzureMW v3.9.9.1 Release Binary`样子：

```
--Other Procedure
' 
END
GO
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[EntryUpdate]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [dbo].[EntryUpdate]

    @EntryID INT, 
    @Value NVARCHAR(100), 
    @Text NVARCHAR(150), 
    @CurrencyCode NVARCHAR(50),
    @DisplayLocale NVARCHAR(50),
    @Description NVARCHAR(500),
    @IsActive BIT,
    @UpdatedBy NVARCHAR(256),
    @Culture NVARCHAR(256)

AS
BEGIN
    UPDATE dbo.Lists
        SET 
            [Value] = @Value,
            [Text] = @Text,         
            [CurrencyCode]=@CurrencyCode,
            [DisplayLocale]=@DisplayLocale,
            [Description] = @Description,
            [IsActive]=@IsActive,
            [UpdatedBy] = @UpdatedBy,   
            [UpdatedOn] = GETDATE()
        WHERE   [EntryID] = @EntryID AND Culture=@Culture
END
' 
----Other Procedure 
```

我搜索但我找不到任何线索。关于这个错误的任何想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:27:53.483

```
CREATE PROCEDURE [dbo].[sp_ListEntryUpdate]

    @EntryID INT, 
    @Value NVARCHAR(100), 
    @Text NVARCHAR(150), 
    @CurrencyCode NVARCHAR(50),
    @DisplayLocale NVARCHAR(50),
    @Description NVARCHAR(500),
    @IsActive BIT,
    @UpdatedBy NVARCHAR(256),
    @Culture NVARCHAR(256)

AS
BEGIN
    UPDATE dbo.Lists
        SET 
            [Value] = @Value,
            [Text] = @Text,         
            [CurrencyCode]=@CurrencyCode,
            [DisplayLocale]=@DisplayLocale,
            [Description] = @Description,
            [IsActive]=@IsActive,
            [UpdatedBy] = @UpdatedBy,   
            [UpdatedOn] = GETDATE()
        WHERE   [EntryID] = @EntryID AND Culture=@Culture
END 
```

# java - 将使用 AWT 和 Swing 绘制电影的 Java 应用程序移植到服务器端

> ID：13984381
> 
> 赞同：7
> 
> 时间：2012-12-21T04:43:49.820
> 
> 标签：java, swing, awt

我正在处理一些使用 AWT 和 Swing 功能将动画输出写入桌面的代码。它使用 2D 图形绘制并以字体呈现文本。

此代码可以使用 Java Media Framework 将动画保存为电影文件。

我想将此代码移植到纯服务器端环境，以使用 Web UI。绘图代码既可以在 servlet 容器内运行，也可以在外部作为命令行程序运行。（或者我可以选择不使用 servlet 容器，而是使用从命令行运行 Java Web 服务器的新方法。）

我可以在不启动服务器上的 X Window 系统的情况下使用 AWT 和 Swing 绘图功能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T07:19:46.950

[*在 Java SE 平台中使用无头模式一*](http://www.oracle.com/technetwork/articles/javase/headless-136834.html)文概述了对此类应用程序施加的限制。

一个具体的例子[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)是广泛用于桌面和 servlet 上下文的图形程序。对于后者，[`ChartUtils`](https://www.jfree.org/jfreechart/javadoc/org/jfree/chart/ChartUtils.html)可以使用几种中的任何一种在无头环境中流式传输渲染的内容。

或者，尽管已弃用，但请考虑使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)来部署现有的 Swing 应用程序，例如[此处](http://www.jfree.org/jfreechart/samples.html)`JFreeChart`看到的演示。

附录：这个 Oracle 论坛[主题](https://forums.oracle.com/forums/thread.jspa?threadID=1280600)表明 Java 媒体框架确实可以抛出`HeadlessException`; 建议的解决方法是指定特定的系统属性值：

```
-Dawt.toolkit=sun.awt.HeadlessToolkit 
```

当模式不可用时，此`JFreeChart`论坛[主题](https://web.archive.org/web/20160323222859/http://www.jfree.org/phpBB2/viewtopic.php?t=1012)建议[`Xvfb`](http://en.wikipedia.org/wiki/Xvfb)或[`vnc`](http://en.wikipedia.org/wiki/Virtual_Network_Computing)作为替代方案。`headless`

# javascript - 为文本框输入设置占位符[type="password"]

> ID：13984382
> 
> 赞同：2
> 
> 时间：2012-12-21T04:43:51.860
> 
> 标签：javascript, jquery

我正在尝试为具有输入 [type="password"] 的文本框显示占位符文本（输入密码）。现在我正在尝试将*input[type="password"]*更改为 *input[type="text"]*以显示占位符，如果用户单击文本框，我再次将*input[type="text"]*更改为*输入[type="密码"]*。在这里它不起作用请检查脚本
我的**[jsfiddle 在这里](http://jsfiddle.net/sureshpattu/9HagB/3/)**

```
 function setupPasswordPlaceholder(thisEl)
    {
        if('' !== thisEl.attr("alt"))
        {
            if('' === thisEl.val())
            {
                thisEl.val(thisEl.attr("alt"));
                thisEl.removeAttr("type");
                thisEl.attr('type','text');
                thisEl.css({'font-weight':'normal','font-size':'10pt','color':'#999','font-family': '"lucida grande", tahoma, verdana, arial, sans-serif'});
            }
            thisEl.focus(function()
            {        
                if(thisEl.val() == thisEl.attr("alt")) 
                {
                    thisEl.val("");
                    thisEl.removeAttr("type");
                    thisEl.attr('type','password');
                    thisEl.css({'color': '#18A505','font-size': '10pt','font-weight':'normal'});
                }

        });

        thisEl.focusout(function()
        {        
            if('' === thisEl.val()) 
            {
                thisEl.val(thisEl.attr("alt"));
                thisEl.removeAttr("type");
                thisEl.attr('type','text');
                thisEl.css({'font-weight':'normal','font-size':'10pt','color':'#999','font-family': '"lucida grande", tahoma, verdana, arial, sans-serif'});
            }
        });
    }
}

$("input[type='password']").each(function(){
        setupPasswordPlaceholder($(this));
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:01:51.407

我见过的常见解决方案是使用标签或其他输入框在 IE 中显示“占位符”文本。

请看这个出色的答案：[https ://stackoverflow.com/a/7225820/988355](https://stackoverflow.com/a/7225820/988355)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:53:46.160

一个简单的代码更改可能适用于大多数浏览器（当然除了 IE6）。您正在使用 removeAttr 然后设置属性“类型”的属性，而不是使用这一行：

代替：

```
 thisEl.removeAttr("type");
  thisEl.attr('type','text'); 
```

和：

```
 thisEl.get(0).type = type; 
```

查看您更新的小提琴[http://jsfiddle.net/9HagB/7/](http://jsfiddle.net/9HagB/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T04:57:45.303

这是一个**[小提琴](http://jsfiddle.net/f5fYc)**

HTML：

```
 <input style="display: none; " id="fakepasscode" type="password" autocomplete="off">
    <input style="display: inline;" id="passcode" hint="password" type="text" autocomplete="off"> 
```

JavaScript：

```
var clearField = function() {
    if ($("#passcode").val() != "password") {
        $("#passcode").val("");
    }
}

var resetField = function() {
    if ($("#passcode").val().length == 0) $("#passcode").val("password");
}

var pwdFocus = function() {
    $("#passcode").hide();
    $("#fakepasscode").val("");
    $("#fakepasscode").show();
    $("#fakepasscode").focus();
}

var pwdBlur = function() {
    if ($("#fakepasscode").val() == "") {
        $("#fakepasscode").hide();
        $("#passcode").show();
    }
}

var setupHintField = function() {
    $("#passcode").unbind("focus blur change");
    $("#passcode").focus(function() {
        clearField();
    });
    $("#passcode").blur(function() {
        resetField();
    });
    $("#passcode").change(function() {
        resetField();
    });
    $("#passcode").show();
    $("#fakepasscode").hide();
}

$(document).ready(function() {
    $("#passcode").val($("#passcode").attr("hint"));
    setupHintField();
    $("#passcode").unbind("focus");
    $("#passcode").focus(function() {
        pwdFocus();
    });
    $("#fakepasscode").blur(function() {
        pwdBlur();
    });
});​ 
```

# html - 存储包含图像的 HTML5 画布

> ID：13984388
> 
> 赞同：0
> 
> 时间：2012-12-21T04:44:20.403
> 
> 标签：html, html5-canvas

如何使用 toDataURL 方法存储包含图像的画布？一切都适用于文本和绘图，但我不知道如何处理图像。任何帮助，将不胜感激。谢谢

我修改了我的问题如下：

这适用于直接从 .png 提取图像时。但是，当我调用 Google Charts API 时，即使图像在画布上正确呈现，toDataURL 也不起作用。Google Charts 返回一个 .png。有人有想法么？谢谢。

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" charset="utf-8">

function test() {
var c = document.getElementById("drawing-canvas");
var cxt = c.getContext("2d");

// This doesn't work.
//var imgsrc = 'http://chart.apis.google.com/chart?cht=tx&chf=bg,s,ffffff&chco=000000& 
chl=a';  

// This works
var imgsrc = 'chart.png'; 

var img = new Image();
img.src = imgsrc; 
cxt.drawImage(img,0,0);

}

function wr() {
var cc = document.getElementById("drawing-canvas");
var url = cc.toDataURL();
var newImg = document.createElement("img");
newImg.src = url;
document.body.appendChild(newImg);
}
</script>

</head>
<body onload = "test();">
<canvas id="drawing-canvas" width = "500px" height = "500px" style="background-color: 
#ffffff; border: 2px solid #000000;">
Your browser does not support the canvas element.
</canvas>
<input type = "button" value = "go" onclick = "wr();">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T22:45:07.070

首先，当我测试它时，您的图表甚至没有呈现在画布上。您需要等待图像加载。您的`chart.png`图片可能会在缓存后立即加载，但由 Google Charts API 生成的图片不会。这是你应该做的：

```
var img = new Image();
img.onload = function()
{
    cxt.drawImage(img,0,0);
}
img.src = imgsrc; 
```

除此之外，您必须`SECURITY_ERR`在浏览器的控制台中获得一个。这是因为[Canvas 安全模型不允许您导出来自外部 URL 的图像](http://dropshado.ws/post/1172959582/4-8-10-2-security-with-canvas-elements-html5)。您应该使用服务器端语言将 Google Charts 图像保存到您的服务器，然后从那里加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:12:53.763

HTML*画布*元素有一个名为 的方法`toDataURL`，该方法将返回代表画布的数据 URL 图像。您可以查看[MDN 上](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)的文档 API 。

具体来说，它说`toDataURL`：

> **toDataURL**（*在可选`DOMString`类型中，在任何 ...args 中*）
> 
> 返回`DOMString`
> 
> 返回一个 data: URL，其中包含由 type 指定的格式的图像表示（默认为 PNG）。
> 
> *   如果画布的高度或宽度为 0，则返回代表空字符串的“data:”。
>     
>     
> *   如果请求的类型不是image/png，并且返回值以data:image/png开头，则不支持请求的类型。
>     
>     
> *   Chrome 支持 image/webp 类型。
>     
>     
> *   如果请求的类型是image/jpeg或image/webp，那么第二个参数，如果它在0.0和1.0之间，则视为表示图像质量；如果第二个参数是其他参数，则使用图像质量的默认值。其他参数被忽略。

并提供有关如何使用它的示例：

```
 function test() {
     var canvas = document.getElementById("canvas");
     var url = canvas.toDataURL();

     var newImg = document.createElement("img");
     newImg.src = url;
     document.body.appendChild(newImg);
 } 
```

在这个例子中，我们使用 dataURL 作为`img`元素的源属性，但是你可以做任何你想做的事情（比如将它存储在某个地方，或者通过 ajax 调用将它发送到服务器）。

请注意，在画布上绘制所涉及的*大多数方法都是***绘制上下文**的方法（通过调用获得`getContext`），而此方法是**画布元素**之一。

# android - 当Android在后台被杀死后重新启动应用程序时

> ID：13984389
> 
> 赞同：0
> 
> 时间：2012-12-21T04:44:22.760
> 
> 标签：android, android-activity

最近我遇到了一个很难解决的问题。

我有一个 Activity A，它有一个带有片段的视图寻呼机。我正在从服务器加载数据并输入视图。从服务器接收到的数据存储在可以跨应用程序访问的单例类中。现在用户通过单例类移动到另一个使用服务器数据的活动 B。

现在，当用户按下主页并启动各种应用程序时，我的应用程序在后台被杀死。当我重新启动应用程序时，操作系统尝试使用其保存的状态再次加载活动 B（我在 onSaveInstance 中没有做任何事情），但单例类中的数据已经丢失并且应用程序崩溃。问题是我无法在此活动中再次获取服务器数据。我应该将整个数据保存在此活动的 onSaveInstance 中吗？不鼓励使用单例类来存储所有数据吗？

处理这种情况的理想方法是什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:03:20.297

数据有多敏感？在 Android 中，不建议使用骨架来移动数据（通过意图传递它？静态（请拒绝））。有人评论以太方式，您可能应该将数据存储到主存储器。除了实际将其写入文件之外，Android 还提供了一些选项。根据数据量及其结构，有几个选项。

1.  [ContentProvider](http://developer.android.com/reference/android/content/ContentProvider.html) & [ContentResolver](http://developer.android.com/reference/android/content/ContentResolver.html)，[基本概述](http://www.androiddesignpatterns.com/2012/06/content-resolvers-and-content-providers.html)。除非您计划让其他应用程序可以访问数据，否则我不建议这样做。
2.  [SQLite](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)。如果您有预先存在的 sql 知识或需要关系数据库的大量数据，那就太好了。
3.  [共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)。顾名思义，它通常用于存储用户状态数据，但也可以用于存储任何数据。我不建议在需要存储大量或复杂数据的情况下使用它。
4.  [文件](http://developer.android.com/reference/java/io/File.html). 好旧的 java 文件类，不需要解释。

对于我们的数据，我建议创建一个 DataStore 管理类来处理上述任何方法的 io，因此在引用数据时，您只需从该类中提取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T19:53:40.233

为避免此类情况，您应该与以下内容相关：

*   [长时间后从后台恢复时应用程序崩溃](https://stackoverflow.com/questions/15964411/app-crashes-when-restoring-from-background-after-a-long-time)
*   [http://www.developerphil.com/dont-store-data-in-the-application-object/](http://www.developerphil.com/dont-store-data-in-the-application-object/)

# java - 使用 HtmlUnit 抓取 Google Group 页面

> ID：13984395
> 
> 赞同：0
> 
> 时间：2012-12-21T04:44:47.813
> 
> 标签：java, ajax, web-scraping, htmlunit, google-groups

```
public static void main(String[] args) throws IOException, InterruptedException
    {
        WebClient webClient = new WebClient();

    WebRequest request = new WebRequest(new URL("https://groups.google.com/forum/?fromgroups#!forum/mobile-social-networking-nepal"));
    HtmlPage page = webClient.getPage(request);
    webClient.waitForBackgroundJavaScript(1000000);
    System.out.println(page.asXml());
    webClient.closeAllWindows();

    } 
```

我已经编写了上面的代码，用于抓取上述 URL 给出的 google 组页面，没有任何运气。我得到的是空的 div 和 span 元素。我已经尝试过使用其他 URL 并且工作正常，但使用 google 组页面它似乎不起作用。而且，甚至需要很长时间才能获得不受欢迎的输出。需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:54:08.653

如下实例化webclient，它对我有用：

```
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6); 
```

# r - 如何创建更准确的运行时间估计

> ID：13984403
> 
> 赞同：-2
> 
> 时间：2012-12-21T04:46:09.053
> 
> 标签：r, time, resources

在我的 R 程序中，我有一个主循环，可能需要相当长的时间才能完成。因此，我想创建一个警告对话框，提供比现在更准确的估计。目前在它调用的循环中

```
if (loopIteration == 1) {
    sampleTime1 <- sys.time();
}

if (loopIteration == 2) {
    sampleTime2 <- sys.time();
    timeEstimate <- loopLength*difftime(sampleTime2, sampleTime1);
    print(timeEstimate);
} 
```

不幸的是，这个估计有 75% 的误差。我怎样才能使它更准确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:23:50.363

您似乎正在使用另一个未命名包中的函数。基本函数中的函数名称是`system.time`，它报告的第三个元素是表达式执行的经过时间：

```
> system.time({for(i in 1:1000000) {NULL} })[3]
elapsed 
    0.2 
```

# backbone.js - 我可以使用多个 el（div、ul 或任何元素）在主干.js 中的单个视图/模型吗

> ID：13984404
> 
> 赞同：0
> 
> 时间：2012-12-21T04:46:19.167
> 
> 标签：backbone.js, underscore.js

我知道这对你们大多数人来说可能听起来很愚蠢，但我刚刚开始了解backbone.js。我想说的是，我们可以在视图中使用超过 1 个 el/元素（无论是 div、ul 还是任何元素）？更具体地说，当我们在视图/模型中定义 el 时，如下所示： el: '#some_id' 我可以在模型/视图中使用更多 el 吗？我们如何访问它们中的每一个？现在只有1个el，我们用它来指向那个特定的el，但是如果我们可以使用多个el怎么办？希望你们能明白我想说的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:51:58.397

最简单的方法可能是使用单个容器元素；您可以使用`this.$("childelement")`.

您还可以向视图类添加更多元素，或创建复合视图（[Marionette](https://github.com/marionettejs/backbone.marionette/blob/master/lib/backbone.marionette.js)有一些复合模式的示例）。Backbone 的优点之一是它*非常*简约，因为它对网站结构的限制很少。你真的可以以任何你喜欢的方式扩展/修改它。

的主要用途`View.el`是：

1.  连接事件。视图的`events`对象对`el`容器应用侦听器。
2.  `View.remove``el`从 DOM中移除。
3.  基本辅助方法`this.$el`和`this.$("selector")`访问 DOM 的基本辅助方法

这些都是您可以轻松覆盖或创建自己的实现的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:53:30.900

首先，模型对 el 的情况一无所知。

其次，一个视图实例只能附加到一个el。`this.$("#child")`它可以操作那个 ( )里面的元素。它可以操纵自身外部的元素，尽管这被认为是不好的风格。此外，您可以拥有该视图的多个实例，每个实例都连接到它自己的 el。

我希望这会有所帮助。

# c# - 如何制作一个返回弹丸经过的轨迹的方法？

> ID：13984408
> 
> 赞同：-1
> 
> 时间：2012-12-21T04:47:08.150
> 
> 标签：c#, methods, physics

我正在尝试制作一种方法，它将接收：弹丸的初始位置`Vector2`，它的初始动量`Vector2`，这两者应该改变的公式`?`，停止条件`?`，并返回 a `List<Vector2>`。

**编辑**：

显然我第一次不够清楚。我要的是解释如何编写该方法，以便它接受某些参数以及某种形式的方法，该方法可用于`Vector2`在我的情况下计算 a。

这是一个简化的情况，其结构类似于我的问题：

```
Vector2 Position = new Vector2(0, 0),
        Momentum = new Vector2(1, 1);

void Update()
{
    Position += Momentum;
}

bool CheckStoppingCondition()
{
    if (Position.X >= 10) return true;
    else return false;
}

void NormalExecution()
{
    if (!CheckStoppingCondition()) Update();
}

List<Vector2> CalculateTrajectory (Vector2 pos, Vector2 mom, ???)
{
    List<Vector2> graph = new List<Vector2>();
    ?
    return graph;
} 
```

CalculateTrajectory 方法应该是什么样的？

* * *

我在想我正在寻找的可能涉及代表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:21:13.017

你问的是编程问题还是物理问题？

如果是编程问题，请更准确地说明您要问的内容-就目前而言，这似乎很简单-只需使用某个时间步长值在循环中应用“更改公式”，直到满足“停止条件”，请参见[http://msdn.microsoft.com/en-us/library/ms173171(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173171(v=vs.80).aspx)了解如何将“更改公式”/“停止条件”传递给您的方法。

如果这是一个物理问题（“如何在给定初始条件的 X 秒后计算位置/动量”），请尝试[https://physics.stackexchange.com/](https://physics.stackexchange.com/)或查看例如[http://www.xinventions.com/main/ spud/motion_equ.htm](http://www.xinventions.com/main/spud/motion_equ.htm)

# activemq - ActiveMQ 版本与 jre 1.5 冲突

> ID：13984409
> 
> 赞同：2
> 
> 时间：2012-12-21T04:47:13.530
> 
> 标签：activemq, java

我正在使用在 jre 1.5 上运行的 Axway 服务器。所以它接受所有低于 1.6 的分类。但问题是我读 了[这个链接](http://activemq.apache.org/getting-started.html) ，我得到了这条线作为指南

> 环境：* Java Developer Kit (JDK) 1.4.x 或更高版本用于部署，1.5.x (Java 5) 用于编译/构建。从 AMQ 5.5.0 开始，您需要 JDK 1.6.0 才能**

这表示我可以将版本 5.5 以下的 ActiveMQs 用于 jre 1.5。

当我使用 ActiveMQ 5.4.3 时出现错误的类版本错误。请帮助我。

**这是出现此错误的行**

```
Object o = Class.forName("org.apache.activemq.ActiveMQConnectionFactory", 
                                    true,ConnFactory.class.getClassLoader())
                        .newInstance(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-11T15:29:00.663

在 maven 存储库中，基于 jdk 1.5 构建的 activemq 的最后一个版本是 5.4.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:48:12.710

您可以将 jar 解压缩为 zip 文件，然后查看文件夹内部并检查 META-INF 目录。MANIFEST.MF 文件将告诉您编译 jar 时使用的 jvm 版本。我刚刚拿到了 5.4.3 版本的 activemq jar，它说：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: chirino
**Build-Jdk: 1.6.0_26**
Specification-Title: ActiveMQ :: Jar Bundle
Specification-Version: 5.4.3
Specification-Vendor: The Apache Software Foundation
Implementation-Title: ActiveMQ :: Jar Bundle
Implementation-Version: 5.4.3
Implementation-Vendor-Id: org.apache.activemq
Implementation-Vendor: The Apache Software Foundation 
```

这清楚地表明它是用 1.6 jvm 构建的。可能需要下载源代码并在 1.5 上手动构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T02:02:53.580

**问题是由于新添加的 jar 的 jvm 配置文件条目。**

我不知道，我不负责，我无权执行任何与管理员相关的权限。

我将 jar 完全放在 CLASSPATH 中。所以所有类都可以访问它。

但问题是在 JVM 配置文件中我必须输入条目，我的意思是我必须在 axway 的 jvm.config 文件中给出带有 CLASSPATH 的 jar 的名称。虽然我将我的 jar 放在类路径中而没有在 jvm.config 中输入条目，它毫无价值。因为当 jvm 初始化时，它首先检查配置文件以添加 jar。

# android - 安卓应用在试用期内取消订阅后什么时候会出现“过期”状态

> ID：13984413
> 
> 赞同：9
> 
> 时间：2012-12-21T04:47:56.650
> 
> 标签：android, in-app-billing

我的 Android 应用程序中有一个“免费试用订阅”，购买订阅产品后，BillingService 将获得已购买状态。

但是，取消订阅后，BillingService 不会获得 Expired 状态。

但是，根据[Android Developer](http://developer.android.com/intl/zh-TW/google/play/billing/v2/billing_subscriptions.html#trials)，

> “如有必要，用户可以在试用期内随时取消订阅。在这种情况下，Google Play 会将订阅标记为立即过期，而不是等到试用期结束。”

但我的应用程序没有获得状态。

我想知道在试用期内取消订阅后，android 应用程序何时会获得“过期”状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T09:29:10.503

我也注意到了这一点。就我而言，购买状态仅在（7 天）试用期结束时发生变化，即使我在购买试用订阅后几分钟内取消了。

我目前正在等待另一个取消的试用期到期 - 现在已经 3 天了，购买状态仍然是 0（“购买成功”）。

**更新：** 所以看来您要么需要定期恢复交易（谷歌说你不应该这样做“因为性能影响”），或者你需要一个带有代码的网络服务器来使用服务器端 API [http：检查订阅详细信息： //developer.android.com/google/play/billing/v2/billing_subscriptions.html#play-dev-api](http://developer.android.com/google/play/billing/v2/billing_subscriptions.html#play-dev-api)。然后，您的应用程序将查询您的网络服务器，该服务器只会在到期日期到期时检查 Google 的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:55:42.900

我已经在非测试环境（即生产环境）中测试了这个案例。

在取消订阅大约 4 小时后，我收到了带有 EXPIRED 状态的 ACTION_PUR​​CHASE_STATE_CHANGED 通知。（购买后几分钟我取消了订阅。试用期为 7 天）

在 EXPIRED 通知返回“已拥有”几次后尝试重新购买订阅，之后我能够重新购买（没有试用期，如记录所示）。

我没有实现 Google 服务器 API，所以我不知道状态会是什么。但是，在商家网站上，订单和订单 CSV 下载将商品显示为已收费。

那么，自上一个答案以来发生了什么变化？

1.  生产环境与谷歌测试环境
2.  可能是谷歌错误修复

一旦我实现了谷歌服务器 API 查询，我将更新这个答案。

**更新：**

我已经实施了 Google Server API 检查，它正确显示订阅在购买后几分钟被取消。此 API 检查是在购买后 3 天完成的，在 7 天的试用期内。

我此时的结论是，试用期内的用户取消操作由 Google 正确处理。

# objective-c - 更改 CGPoint 数组中 CGPoint 值的最有效方法？

> ID：13984422
> 
> 赞同：1
> 
> 时间：2012-12-21T04:48:59.380
> 
> 标签：objective-c, nsmutablearray, nsarray

我构造了一个 CG Point 数组，如下所示：

```
NSMutableArray *_startPositions = [NSMutableArray array];
[_startPositions addObject:[NSValue valueWithCGPoint:CGPointMake(0.0, 0.0)]];
[_startPositions addObject:[NSValue valueWithCGPoint:CGPointMake(0.0, 0.0)]]; 
```

如何最有效地更改数组中点的 x 和 y 值？

如果我使用以下方法检索值：

```
CGPoint myPoint0 = [[_startPositions objectAtIndex:0] CGPointValue]; 
```

我拿回了这一点的副本。如何更改数组中 CGPoints 的 x 和 y 值？我可以在任何位置删除 CGPoint 并用正确的 x,y 值替换它，但是有没有更有效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:02:42.280

从文档：

> `NSValue`对象总是不可变的。

因此，您在这里唯一的选择是创建一个新的以在值更改`NSValue`时替换旧的。`CGPoint`如果您正在寻找一种更有效的方法来存储 的数组`CGPoints`，那么 C 数组是最简单、最快的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:12:10.940

使用 C 数组而不是 NSMutableArray。如果需要，请使用 C++ STL 集合类，例如 std::vector 或其他 C/C++ 集合库。这样，您可以在不调用任何 Obj-C 方法的情况下操作数组内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:33:51.543

我建议您创建自己的课程

。H

```
@interface MyPoint : NSObject {
    CGPoint point;
}
@property (nonatomic,assign) CGPoint point;
@end 
```

.m

```
@implementation MyPoint
@synthesize point;
@end 
```

然后将您的`MyPoint`对象添加到您的数组中。
改变它喜欢

```
MyPoint *myPoint = [_startPositions objectAtIndex:0];
myPoint.point = myPoint0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-11T04:57:49.630

如果您只更改 CGPoint 的 'x' 或 'y' 值`point`，则可以这样做：

`((CGPoint *)&point)->x += dx;`

或者

`((CGPoint *)&point)->y += dy;`

# python - python中的while循环给出语法错误

> ID：13984423
> 
> 赞同：0
> 
> 时间：2012-12-21T04:49:18.270
> 
> 标签：python, wlst

我对 python 很陌生，这是我正在尝试的第一个程序。该函数从标准输入中读取密码。

```
def getPassword() :
     passwordArray =[]
         while 1:
                 char = sys.stdin.read(1)
                 if char == '\\n':
                         break
                 passwordArray.append(char)
                 return passwordArray

print (username)
print (URL) 
```

收到此错误：

```
Problem invoking WLST - Traceback (innermost last):
  (no code object) at line 0
  File "/scratch/aime/work/stmp/wlstCommand.py", line 10
                 while 1: 
                 ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:52:48.830

您的缩进不正确。你`while`的缩进应该与它上面的行相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:56:46.997

Python 使用缩进来“分离”东西，而你需要在文件中使用相同类型的缩进。在您编写的代码中使用固定的缩进是一种很好的做法。您可能需要考虑一个制表符或四个空格（后者是 PEP8 样式指南中的建议）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T06:23:40.567

Python 是敏感的并且依赖于缩进。如果它抱怨“格式无效”，那比“无效语法”要好。

# java - 反序列化 ConcurrentHashMap 时出错：可能的 JVM 错误

> ID：13984424
> 
> 赞同：0
> 
> 时间：2012-12-21T04:49:20.043
> 
> 标签：java, serialization, jvm

我们有一个包含 ConcurrentHashMap 字段的可序列化类。几乎所有时候，此类的序列化/反序列化都能完美运行。但是，我们刚刚收到一个包含此类的序列化版本的文件，当我们尝试反序列化它时，我们收到如下错误消息：

```
Exception in thread "main" java.lang.NullPointerException
at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:262)
at java.util.concurrent.ConcurrentHashMap$Segment.put(ConcurrentHashMap.java:417)
at java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:883)
at java.util.concurrent.ConcurrentHashMap.readObject(ConcurrentHashMap.java:1278)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350) 
```

这可能是JVM错误吗？该错误完全发生在 jvm 类中。

# c++ - 通过传入 IDXGIAdapter 创建 DirectX10 交换链和设备

> ID：13984432
> 
> 赞同：0
> 
> 时间：2012-12-21T04:50:10.003
> 
> 标签：c++, direct3d

我正在尝试从 IDXGIAdapter 创建设备和交换链。我的所有代码都会成功，直到调用返回 DXGI_ERROR_INVALID_CALL 的 CreateSwapChain。

MSDN 说，当 DXGI_SWAP_CHAIN_DESC 为空或 IDXGISwapChain** 为空时，可能会返回 DXGI_ERROR_INVALID_CALL。

我不太确定“IDXGISwapChain ** 为空”是什么意思，因为它是输出（我猜是当你实际输入 NULL 时。

我的交换链被定义为...

```
IDXGISwapChain* m_pSwapChain; 
```

我的其他代码是...

```
IDXGIAdapter * pPrimaryAdapter = m_vAdapters.at(0); 

HRESULT hr = D3D10CreateDevice(pPrimaryAdapter,
                                D3D10_DRIVER_TYPE_HARDWARE,
                                NULL,
                                NULL,//D3D10_CREATE_DEVICE_SINGLETHREADED
                                D3D10_SDK_VERSION,
                                &m_pD3DDevice);

if(hr != S_OK)
{
    MessageBox(NULL, L"Error ###: Creation of Direct3D10 Device Failed", 0, 0);
    return false;
}

//m_pDXGIFactory->MakeWindowAssociation(hWnd, DXGI_MWA_NO_ALT_ENTER ); 
if(FAILED(m_pDXGIFactory->MakeWindowAssociation(hWnd, 0 )))
{
    MessageBox(0, L"Error ###: MakeWindowAssociation Failed", 0,0);
    return false;
}

IDXGIDevice * pDXGIDevice;
if(FAILED(m_pD3DDevice->QueryInterface(__uuidof(IDXGIDevice), (void **)&pDXGIDevice)))
{
    MessageBox(0, L"QueryInterface pDXGIDevice Failed", 0,0);
    return false;
}

DXGI_SWAP_CHAIN_DESC SwapChainDesc;

    SwapChainDesc.BufferCount = 1;
    SwapChainDesc.BufferDesc.Width = 800;
    SwapChainDesc.BufferDesc.Height = 600;
    SwapChainDesc.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    SwapChainDesc.BufferDesc.RefreshRate.Numerator = 60;
    SwapChainDesc.BufferDesc.RefreshRate.Denominator = 1;
    SwapChainDesc.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    SwapChainDesc.OutputWindow = hWnd;
    SwapChainDesc.SampleDesc.Count = 1;
    SwapChainDesc.SampleDesc.Quality = 0;
    SwapChainDesc.Windowed = TRUE;

hr = m_pDXGIFactory->CreateSwapChain(pDXGIDevice, &SwapChainDesc, &m_pSwapChain);

switch(hr)
{
case DXGI_ERROR_NOT_CURRENTLY_AVAILABLE:
    {
        MessageBox(NULL, L"CreateSwapChainFailure: DXGI_ERROR_NOT_CURRENTLY_AVAILABLE", 0,0);
        return false;
    }break;
case DXGI_ERROR_INVALID_CALL:
    {
        MessageBox(NULL, L"CreateSwapChainFailure: DXGI_ERROR_INVALID_CALL", 0, 0);
        return false;
    }break;

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:48:59.100

您是否尝试过`SwapChainDesc`在分配值之前将内存归零？您没有指定结构的所有值，因此除非将其归零，否则某些参数可能无效。

尝试：

```
DXGI_SWAP_CHAIN_DESC SwapChainDesc;
ZeroMemory(&SwapChainDesc, sizeof(SwapChainDesc));

SwapChainDesc.BufferCount = 1;
.... 
```

# c# - 将部分视图插入从数据库检索的布局中

> ID：13984433
> 
> 赞同：1
> 
> 时间：2012-12-21T04:50:16.930
> 
> 标签：c#, asp.net-mvc-3, entity-framework, razor, asp.net-mvc-4

我将用户可编辑的 HTML 布局存储在数据库中，但我想知道是否有办法在其中一些内容的中间呈现部分视图。

例如：

```
<div>
This is the header 
@Html.Action("WebsiteTemplate", "Page")
</div> 
```

我认为我可以将顶部和底部内容分成 2 个单独的列，但是有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:05:30.027

您需要使用从数据库中检索到的 Razor 内容进行解析。您可以为此目的使用[RazorEngine](http://razorengine.codeplex.com/)项目。它有一些限制（例如，`@Raw()`而不是 `@Html.Raw()`），但涵盖了许多场景。

# mysql - 如何在巨大的 MYSQL 数据库表中插入新列？

> ID：13984434
> 
> 赞同：8
> 
> 时间：2012-12-21T04:50:19.893
> 
> 标签：mysql, alter-table

我在 MYSQL 数据库中有这张表，它有大约 1000 万条记录/行。我想`column`在表中插入一个新的。然而，一个简单的插入列查询对我来说似乎并不适用。

这是我尝试过的， `ALTER TABLE contacts ADD processed INT(11);`

我等了大约5个小时，但什么也没发生。有没有办法在这么大的表中插入新列？

希望我对我的问题很清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T04:54:12.123

**如果是生产：**

您应该使用[pt-online-schema-change](http://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html)的`Percona Toolkit`.

> pt-online-schema-change 模拟 MySQL 在内部更改表的方式，但它适用于您希望更改的表的副本。这意味着原始表没有被锁定，客户端可以继续读取和更改其中的数据。
> 
> pt-online-schema-change 通过创建要更改的表的空副本、根据需要对其进行修改，然后将原始表中的行复制到新表中来工作。复制完成后，它会移开原始表并用新表替换它。默认情况下，它还会删除原始表。

或[Oak-online-alter-table](http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-online-alter-table.html)，它是`openark kit`

> Oak-online-alter-table 允许非阻塞的 ALTER TABLE 操作、表重建和创建表的幽灵。

更改表会更慢，但它不会锁定表。

**如果它不是生产**并且停机时间可以，请尝试以下方法：

```
CREATE TABLE contacts_tmp LIKE contacts;
ALTER TABLE contacts_tmp ADD COLUMN ADD processed INT UNSIGNED NOT NULL;
INSERT INTO contacts_tmp (contact_table_fields) SELECT * FROM contacts;
RENAME TABLE contacts_tmp TO contacts, contacts TO contacts_old;
DROP TABLE contacts_old; 
```

# git - git push 占用资源过多，被主机终止

> ID：13984435
> 
> 赞同：0
> 
> 时间：2012-12-21T04:50:29.317
> 
> 标签：git, resources, push

所以我现在正在为一个旧项目创建一个 repo。我总共有 4.5 个文件，所以需要一些时间。我在共享托管环境中，并且我的主机限制了占用过多内存时间过长的进程。显然，这个过程需要一段时间，并且不断被我的主机结束。

有没有一种方法可以让我轻松放弃一次提交的推送，这样我就不会受到速率限制？

这也是我的第一次提交，所以我无法恢复我添加的所有文件。否则我会一块一块地做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:44:09.230

与[ScottS](https://stackoverflow.com/users/51851/scotts)的[答案](https://stackoverflow.com/a/13984453/6309)相同，我将在本地创建 a [`bundle`](http://git-scm.com/docs/git-bundle)，以创建*一个*（巨型）文件。

FTP 单个文件比裸 git repo 的多个文件更不容易出错。（具体示例
请参见“[如何同步两个 git 存储库”）](https://stackoverflow.com/a/4860455/6309)

然后，您可以从远程端的该捆绑包中克隆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T04:52:29.307

我的第一个想法是在本地创建裸仓库并将其简单地通过 FTP 传输到服务器。那应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:11:07.667

如果您没有在一次提交中完成所有工作，则可以`git push`部分提交。

使用`git log`你可以“走”你的历史，检查一些提交并将它们推送到你的遥控器。让我们说：

```
$ git log --oneline master
$ git checkout abcabc123123 # 10th commit in history
$ git push origin HEAD:master
$ git checkout bcdef145325 # 30th commit in history
$ git push origin HEAD:master 
```

等等...

您的步骤必须进行多少次提交将是一个尝试和失败的任务 - 这取决于您的提交的大小。

如果您没有任何历史记录，也许您可​​以为每个文件/文件夹进行单独的提交（我认为按文件大小关联是个好主意），`push`如前所述，然后将所有提交压缩为一个：

```
$ git checkout master
$ git reset acbacbad142 # hash of first commit
$ git commit --ammend
$ git push -f origin master 
```

`reset`您在一次提交中使用+重新调整所有更改`commit --ammend`，然后`push -f`重写远程分支。文件（`blob`s，在 git 术语中）已经被上传（甚至`tree`会被上传），所以它不应该花费很多时间。当您重写历史时，请确保在您开始进行短推送和推送压缩提交之间的时间内没有人从远程克隆/获取，以避免冲突。

# html - IE样式表/条件注释不起作用

> ID：13984438
> 
> 赞同：7
> 
> 时间：2012-12-21T04:50:53.573
> 
> 标签：html, css, internet-explorer, conditional-comments

我试图让一个网站在 IE 中看起来更好，所以我决定使用条件注释。所以我用这个条件注释链接到样式表。

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="IEstyle.css" />
<![end if]--> 
```

这不起作用，它要么使用默认样式表，要么显示一个空白页面。所以然后我在某处读到评论是这样的。

```
<!--[if !IE]>-->
<link rel="stylesheet" type="text/css" href="IEstyle.css" />
<!--<![endif]--> 
```

所以我试过了，它和另一个完全一样，但`-->`显示在页面上。我对 html 还是有点陌生​​，任何帮助都会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T04:56:11.663

这是评论的正确格式：

```
<!--[if IE ]>
Special instructions for IE here
<![endif]--> 
```

这是一个非 IE 评论：

```
<!--[if !IE ]>
According to the conditional comment this is not IE
<![endif]--> 
```

来源：[http ://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

编辑：刚刚注意到他们的“不”示例是错误的。我已经纠正了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T05:05:25.210

你应该这样使用： 语法：

```
<!--[if IE 8]> = IE8
<!--[if lt IE 8]> = IE7 or below
<!--[if gte IE 8]> = greater than or equal to IE8

<!--[if IE 8]>
<style type="text/css">
    /* css for IE 8 */
</style>
<![endif]-->

<!--[if lt IE 8]>
    <link href="ie7.css" rel="stylesheet" type="text/css" />
<![endif]--> 
```

[参考链接 1](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)

[参考链接 2](https://stackoverflow.com/questions/3890740/are-there-any-ie9-css-hacks)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:01:25.360

同样，声明您想要拉出条件表的 IE 版本总是很好，例如，如果您想要 IE 9 和更低版本，则如下所述。

```
<!--[if lte IE 9]>
<link rel="stylesheet" type="text/css" href="IEstyle.css" />
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-24T06:18:53.950

IE10 中禁用了 HTML 条件注释。CSS 条件注释可用于在 IE10+ 中定位样式。
[https://www.mediacurrent.com/blog/pro-tip-how-write-conditional-css-ie10-and-11/](https://www.mediacurrent.com/blog/pro-tip-how-write-conditional-css-ie10-and-11/)

```
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
// IE10+ CSS here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-07T17:40:00.183

当面对这个问题时，我们选择了`<script type="module">`解决方案。更多细节[在这里](https://philipwalton.com/articles/deploying-es2015-code-in-production-today/)。

我们还想访问我们使用其他 ES5 脚本中的 ES6 代码设置的全局变量，以确定我们是否想做一些不同的事情。显然，在这种情况下，导出不起作用，但您可以将变量分配给`window.<something>`然后像访问任何其他变量一样访问它们。

只有运行 ES6 和支持模块的浏览器才能运行`type="module"`.

# facebook - 用图片搜索 FB 用户

> ID：13984439
> 
> 赞同：1
> 
> 时间：2012-12-21T04:50:55.910
> 
> 标签：facebook, facebook-graph-api, fb-graph

我想用头像搜索 FB 用户。我有一张照片，我想比较它并找到与他们的头像相匹配的人。

我已经尝试过 FBGraphapi 搜索部分，但它只有名称的搜索用户。有没有用图片搜索的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:56:36.470

我相信这是不支持的。也许使用谷歌的“按图片搜索”搜索。你有一张可能属于这张照片的 Facebook 用户列表吗？如果你这样做，你可以遍历它们并将它们与图像匹配`graph.facebook.com/{user_id}/picture`

# asp.net - ASP.NET Veracode 扫描问题

> ID：13984440
> 
> 赞同：4
> 
> 时间：2012-12-21T04:51:06.807
> 
> 标签：asp.net, veracode

我们的客户端使用 Veracode 扫描工具来扫描 ASP.NET 应用程序。除了以下问题，我们已经解决了许多缺陷。

```
Improper Neutralization of CRLF Sequences in HTTP Headers ('HTTP Response Splitting')
(CWE ID 113)(1 flaw) in the line  

HttpContext.Current.Response.AddHeader("Content-Disposition", contentDisposition); 
```

这是对应的代码：

```
public static void DownloadFile(string fileName, byte[] dByteData, bool isNoOpen = false)
        {

            byte[] fileContents = new byte[] { };
            string contentDisposition = string.Empty;
            fileContents = dByteData;
            if (string.IsNullOrWhiteSpace(fileName))
            {
                return;
            }
            fileName = fileName.Replace("\n", "").Replace("\r", "");
            string contentType = "application/*.".Replace("\n", "").Replace("\r", "");
            contentDisposition = "attachment; filename=\"" + HttpContext.Current.Server.UrlPathEncode(fileName) + "\"";//While Downloading file - file name comes with junk characters
            contentDisposition= contentDisposition.Replace("\n", "").Replace("\r", "");
            HttpContext.Current.Response.Buffer = true;
            HttpContext.Current.Response.Clear();
            HttpContext.Current.Response.ClearContent();
            HttpContext.Current.Response.ClearHeaders();
            HttpContext.Current.Response.Charset = "";
            HttpContext.Current.Response.ContentType = contentType;
            if (isNoOpen)
            {
                HttpContext.Current.Response.AddHeader("X-Download-Options", "noopen");
            }
            HttpContext.Current.Response.AddHeader("Content-Disposition", contentDisposition);
            HttpContext.Current.Response.AddHeader("Content-Length", fileContents.Length.ToString());
            HttpContext.Current.Response.BinaryWrite(fileContents.ToArray());

            HttpContext.Current.Response.End();
            HttpContext.Current.Response.Flush();
            HttpContext.Current.ApplicationInstance.CompleteRequest();
        } 
```

文件名或路径的外部控制 (CWE ID 73)

```
if (File.Exists(filePath))
            {
                File.Delete(filePath);
            } 
```

它显示错误`File.Delete`。我们已经尝试清理文件路径并且也使用过`Path.GetFullpath`，但只是徒劳无功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:12:40.607

很多时候，像 Veracode 这样的工具并不了解您已经清理了您的内容这一事实。它似乎缺少您的 Replace() 调用。我会将这一发现标记为误报并继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:48:21.013

您可以通过调用堆栈分析获得有关缺陷来源的更多详细信息（可在 Veracode 分析中心的应用程序构建扫描结果的 Triage 缺陷部分获得）。如果没有这些信息，一些 Veracode 缺陷的起源很难理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-23T18:59:02.240

对于文件名或路径的外部控制 (CWE ID 73)：

使用以下内容进行验证`filePath`：

```
public ValidatePath(string path) {
    var invalidPathCharacters = System.IO.Path.GetInvalidPathChars();
    foreach (var a in path)
    {
        if (invalidPathCharacters.Contains(a))
        {
            throw new Exception($"Character {a} is an invalid path character for path {path}");
        }
    }
} 
```

Veracode 在我们上次的扫描中很满意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T06:15:44.237

使用 veracode filepathcleanser 属性。见[https://help.veracode.com/reader/DGHxSJy3Gn3gtuSIN2jkRQ/CWbscOAsMPyIXqASkLRTnw](https://help.veracode.com/reader/DGHxSJy3Gn3gtuSIN2jkRQ/CWbscOAsMPyIXqASkLRTnw)

# drupal - 无需创建帐户即可使用密码保护 drupal 7 内容

> ID：13984443
> 
> 赞同：0
> 
> 时间：2012-12-21T04:51:16.393
> 
> 标签：drupal, drupal-7, drupal-modules

是否有密码保护drupal 网站内容但不为访问者创建帐户的模块。我只需要简化体验，这样用户只需输入一个预定义的密码，然后内容就会显示出来。

我确实看过，但找不到任何东西。

这就是我需要它来工作的方式。

我（管理员）创建一个密码（或多重密码），我可以将其提供给朋友/家人/客户，当他们访问我的网站以访问受保护的内容时，他们将输入该密码。需要简单，这些人不需要我的站点的 drupal 帐户。他们只是访问者，但对内容有额外的访问权限。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:21:22.307

此线程可能包含您的问题的解决方案：http: [//drupal.org/node/1126898](http://drupal.org/node/1126898) 此模块[http://drupal.org/project/nodeaccess_password](http://drupal.org/project/nodeaccess_password)似乎最符合您的要求。

# tabs - 在 VS2012 中显示 .cshtml 文件的完整路径或命名空间

> ID：13984445
> 
> 赞同：3
> 
> 时间：2012-12-21T04:51:20.433
> 
> 标签：tabs, visual-studio-2012

我在 VS 2012 中使用了很多 cshtml 文件，并且经常无法看到我正在处理的文件的路径或命名空间（每次都禁止鼠标悬停）。
我用谷歌搜索了很多，没有找到任何答案，而且似乎也没有 VS Extension 可以做到这一点。这是我的意思的截图（几个index.cshtml，不容易区分）：

![在此处输入图像描述](../Images/822188565e03e403c20094056d3b18ba.png)

无论是在像常规 CS 代码文件一样的单独工具栏中，还是作为选项卡标题本身都可以。有谁知道这方面的工具或设置？

# php - .aba 文件格式不理解

> ID：13984447
> 
> 赞同：1
> 
> 时间：2012-12-21T04:51:30.313
> 
> 标签：php, .net

您知道澳大利亚银行家协会 (.aba) 文件格式吗？它用于与 csv 文件非常相似的批处理事务。但是，我不明白的是，这些列是如何相互分离的。例如，在 csv 文件中，我们使用 like (,;) 等。我也没有找到示例文件。如果您还不知道，这里有一个链接可以帮助您快速帮助我。

[http://www.cemtexaba.com/aba-format/cemtex-aba-file-format-details.html](http://www.cemtexaba.com/aba-format/cemtex-aba-file-format-details.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-25T05:17:39.310

> 但是，我不明白的是，这些列是如何相互分离的。例如，在 csv 文件中，我们使用 like (,;) 等

它类似于 CSV，但它是一个由字符串和行组成的计划文本文件......

这里有一些现成的解决方案

Symfony 2 捆绑包 -> [https://github.com/latysh/aba-bundle](https://github.com/latysh/aba-bundle)

php 库 -> [https://github.com/simonblee/aba-file-generator](https://github.com/simonblee/aba-file-generator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:06:57.387

它看起来像一个简单的文件格式。与其将其视为使用某些符号分隔的 CSV 文件，不如将其视为字符串。

所以，如果你有一个 ABA 文件，那么你可以使用`fopen()`and来解析它`fread()`。

```
<?php
$fh = fopen('example.aba', 'rb');
$block1 = fread($fh, 1);
$block2 = fread($fh, 17);
$block3 = fread($fh, 2);
$block4 = fread($fh, 3);
// And so on... 
```

当然，也有一些机制来验证数据并确保文件没有损坏是有意义的，但这只是一个简单的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T08:19:36.317

我知道这是一个迟到的回复，但对于其他编码 ABA 文件格式的人来说， [http://www.cemtexaba.com/aba-format/](http://www.cemtexaba.com/aba-format/)有一个示例文件格式。

这个网站对每个字段都有很好的解释 [https://github.com/mjec/aba/blob/master/sample-with-comments.aba](https://github.com/mjec/aba/blob/master/sample-with-comments.aba)但不要将其称为您的单一事实来源。

正如 Sverri M. Olsen 所提到的，这些列没有专门用分隔符分隔，而是按照规范指定的长度。

# api - 通过 Foursquare 的 API 从一个类别中获取我的所有签到

> ID：13984448
> 
> 赞同：0
> 
> 时间：2012-12-21T04:51:29.783
> 
> 标签：api, foursquare

所以这就是我想要做的：我的网站上有一个空间，上面写着 X 杯咖啡。理想情况下，X 将替换为我在 Foursquare 上属于咖啡店类别的场所的签到次数。现在，我必须从我的网站后端手动更新号码。这工作量太大，我宁愿能够签到并让 Foursquare API 自动更新号码。这是否可能，如果可以，执行它的最简单方法是什么？

非常感谢您的建议和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:27:41.810

每当您在 Foursquare 上签到时，您都可以使用实时推送 API 来通知您的服务器。然后，您可以使用签到中的信息来更新您网站上的统计信息。

这是推送 API 的文档：[https ://developer.foursquare.com/overview/realtime](https://developer.foursquare.com/overview/realtime)

# r - vpPathFromVector(names) 中的错误：视口路径必须包含至少一个视口名称

> ID：13984449
> 
> 赞同：1
> 
> 时间：2012-12-21T04:51:35.613
> 
> 标签：r, ggplot2, ggmap

[交叉发布在 ggplot 的 Google 群组上](https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/e4_wYbwq1cY)：

以下`gglocator`（ggplot2）的可重现示例：

```
library(ggplot2)
library(ggmap)
df <- data.frame(xvar = 1:10, yvar = 1:10)
qplot(xvar, yvar, data = df) + annotate(geom = 'point', x = 3, y = 6)
gglocator(4) 
```

`openSUSE 11.4 (64 bit)`在以下情况下可以正常工作`sessionInfo()`：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C            
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8  
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8 
 [7] LC_PAPER=C                 LC_NAME=C               
 [9] LC_ADDRESS=C               LC_TELEPHONE=C          
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C     

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base   

other attached packages:
[1] ggmap_2.1     ggplot2_0.9.1

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.1     
 [5] labeling_0.1       MASS_7.3-18        memoise_0.1        munsell_0.3     
 [9] plyr_1.7.1         png_0.1-4          proto_0.3-9.2      RColorBrewer_1.0-5
[13] reshape2_1.2.1     RgoogleMaps_1.2.0  rjson_0.2.8        scales_0.2.1    
[17] stringr_0.6 
```

`Windows Vista`运行时，相同的代码会引发错误（如标题所示）`sessionInfo()`，如下所示：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252  
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                         
[5] LC_TIME=English_United States.1252   

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

**上的`ggplot2`版本`Windows`是`0.9.2`，上的版本`Linux`是`0.9.1`。**

这是一个已知的错误，还是我错过了一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:04:06.863

我可以在 Windows 上重现该问题。

事实上ìn的代码`gglocator`

```
 x <- x[grep("panel-", grid.ls(print = message)[[1]])] 
```

grep 找不到任何包含“面板-”的 grob。

当我删除 -

```
x[grep("panel", grid.ls(print = message)[[1]])]
[1] "panel.3-4-3-4"                    "panel.background.rect.5210"       "panel.grid.minor.y.polyline.5212" "panel.grid.minor.x.polyline.5214"
[5] "panel.grid.major.y.polyline.5216" "panel.grid.major.x.polyline.5218" "panel.border.zeroGrob.5207" 
```

对我来说，这没有理由在 linux 上工作。

# c - 文件名存储在数组中，需要遍历数组，根据 C 中每个单元格中存储的名称创建新文件

> ID：13984451
> 
> 赞同：0
> 
> 时间：2012-12-21T04:52:06.207
> 
> 标签：c, file

我有 80 多个文本文件，我正在使用`dirent.h`. 这是将它们放在一个数组中，我通过一个算法将它们每个都扔掉，该算法将每个文件的内容与该文件中的其他内容进行比较，并为我提供文件中相同事物的百分比。在执行此操作时，它将文件名存储在中`ArrayName[i]`，百分比存储在`ArrayPercent[i]`.

我很确定我知道如何将这些数组值打印到文件中，这不是问题，问题是使用变量作为文件名。我目前的想法是

```
fprintf(**DIRECTORY HERE**,"%s %d", ArrayPercent[i], ArrayName[i][]); 
```

第一次通过循环`ArrayName[0]`需要以 filename.txt 的形式进入 DIRECTORY HERE，而第二次通过`ArrayName[1]`需要以*filename1.txt*的形式进入那里以供参数考虑，以此类推`ArrayName`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:19:38.113

您可以使用以下方法创建多个 filename0.txt、filename1.txt 等：

```
for (i=0; i<n; i++) {
    char buf[32];
    sprintf(buf, "filename%d_%s_%d", i, ArrayName[i], ArrayPercentage[i]);
} 
```

# javascript - 在黑莓 phonegap 中禁用横向模式

> ID：13984452
> 
> 赞同：0
> 
> 时间：2012-12-21T04:52:16.973
> 
> 标签：javascript, cordova, blackberry-webworks

我正在使用 Phonegap 开发一个黑莓应用程序。在这种情况下，我如何禁用横向模式并只允许纵向模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T13:39:11.357

在您的配置文件中添加以下代码：-

```
<feature id="blackberry.app" >      
        <param name="orientation" value="portrait" />  
    </feature> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:03:03.567

更新配置文件并添加以下代码

```
 <preference name="orientation" value="portrait" /> 
```

详细来说，你可能会看

[http://cmer.uoguelph.ca/freshlabs/Lab5A.pdf](http://cmer.uoguelph.ca/freshlabs/Lab5A.pdf)

# java - 用Java构建数据结构

> ID：13984454
> 
> 赞同：0
> 
> 时间：2012-12-21T04:52:29.940
> 
> 标签：java, data-structures, map

我正在尝试构建一个 DTO 对象来将数据从数据层传送到视图层。

数据如下：

*   有 7 天（日期可以用作 Map 或任何其他数据结构中的键）
*   各个日期将包含多条记录。
*   每条记录都包含从多个表中获得的联系方式。
*   需要从结果表中的 3 行构造一条记录。即：一条记录​​可能会返回三行，除用户详细信息外，所有列的值都相同；其中包含 id、name 和 designation 等详细信息。

当我显示时，我需要在同一行显示他们的名字为经理和助理经理。

```
Data Layer
T01      25/12/2012   ABC             XYZ  Manager
T01      25/12/2012   ABC             IJK  Asst.manager
Display:
Date 1
TaskID Taskdeadline  TaskGivenBy  Task assigned to Manager Task Assigned toAsst.Manager 
T01      25/12/2012   ABC             XYZ                       IJK
T02       1/1/2013    BCE             WUV                       MNO 
```

我试过的解决方案：

```
Map<Date,Map<Position,Object>>
Map<25/12/2012,Map<(Manager,Object details),(Asst Manager,Object details)> 
```

然后重复它。但我想我正在存储重复的数据。我认为这不是一个理想的解决方案

# windows - php.ini 在哪里？

> ID：13984456
> 
> 赞同：21
> 
> 时间：2012-12-21T04:52:49.923
> 
> 标签：windows, php

> **可能重复：**
> [我如何在 xampp 服务器中编辑 php.ini 文件](https://stackoverflow.com/questions/6185319/how-do-i-edit-php-ini-file-in-xampp-server)

我运行了 phpinfo，它说它在 C:\Windows 中，但它不存在。它不在 php 文件夹中。我做了系统搜索，没有找到。

它藏在哪里？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-21T04:56:59.003

运行这段代码（我假设你的 php 正在运行，你不能只找到 php.ini 文件）

```
<?php

phpinfo();

?> 
```

并检查配置文件的位置：

![地点](../Images/25c1466359ed92f523166dcf3f294b2c.png)

# rdf - 如何在 OWL 中组合数据属性？

> ID：13984458
> 
> 赞同：0
> 
> 时间：2012-12-21T04:53:00.047
> 
> 标签：rdf, owl, semweb

说我有：

*   属性 1 是可选的
*   始终定义的 Property2

我想定义 TrueProperty 等于：

1.  如果 Property1 存在，则为 Property1
2.  Property2 否则

Property2 否则

我可以这样做吗？我可以在 OWL 中做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:21:58.967

你不能在 OWL 中这样做。OWL 并不是要谈论所写的东西，它谈论的是世界上真实的事物。您的数据集中未明确存在的事实可能是正确的。如果你给我发一份你没有提到你的街道地址的简历，我可以断定你是无家可归吗？

然而，有几种方法可以做你想做的事，而无需 OWL。带有 FILTER 的 SPARQL CONSTRUCT 查询，如果您可以推断 Property1 的某些值，则查询推理器，如果不能，则以编程方式添加 Property2。例如：

```
CONSTRUCT { ?s  <TruProperty>  ?o }
WHERE {
    { ?s  <Property1>  ?o }
   UNION
    { ?s  <Property2>  ?o
      FILTER NOT EXISTS { ?s  <Property1>  ?o }
    }
} 
```

# objective-c - 在 Objective C 上对字符串进行编码和解码

> ID：13984460
> 
> 赞同：1
> 
> 时间：2012-12-21T04:53:03.557
> 
> 标签：objective-c, encryption, encoding

我使用下面的代码对目标 C 上的字符串进行编码和解码。编码很好，我调试并看到当输入为@“1”时它会抛出一个哈希字符串。但是当我尝试解码这个哈希字符串时，它返回 nil。

请帮我。

```
+(NSString *)encrypt: (NSString*) input
{

    //Base64 Encoding

    char base64Result[32];
    size_t theResultLength = 32;
    Base64EncodeData(input, 20, base64Result, &theResultLength);
    NSData *theData = [NSData dataWithBytes:base64Result length:theResultLength];
    NSString *base64EncodedResult = [[NSString alloc] initWithData:theData encoding:NSUTF8StringEncoding];

    NSString* decryptedString = [self decrypt:base64EncodedResult];
    return [base64EncodedResult autorelease];
}
+ (NSString *) decrypt:(NSString*) input{

        Byte inputData[[input lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];//prepare a Byte[]
    [[input dataUsingEncoding:NSUTF8StringEncoding] getBytes:inputData];//get the pointer of the data
    size_t inputDataSize = (size_t)[input length];
    size_t outputDataSize = EstimateBas64DecodedDataSize(inputDataSize);//calculate the decoded data size
    Byte outputData[outputDataSize];//prepare a Byte[] for the decoded data
    Base64DecodeData(inputData, inputDataSize, outputData, &outputDataSize);//decode the data
    NSData *theData = [[NSData alloc] initWithBytes:outputData length:outputDataSize];//create a NSData object from the decoded data
    NSString *result = [[NSString alloc] initWithData:theData encoding:NSUTF8StringEncoding];
    return [result autorelease];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:06:19.333

在您的编码方法中，您必须将输入字符串转换为字节缓冲区并将其提供给`Base64EncodeData`：

```
NSData *inputData = [input dataUsingEncoding:NSUTF8StringEncoding];
Base64EncodeData([inputData bytes], [inputData length], base64Result, &theResultLength, NO); 
```

（`NSString *input`编码方法中的参数指向一个Objective-C结构，而不是一个C字符串。所以你的编码方法*似乎*有效。它编码*了一些东西*，但不是输入字符串。然后解码方法失败了

```
NSString *result = [[NSString alloc] initWithData:theData encoding:NSUTF8StringEncoding]; 
```

因为解码的数据不包含有效的 UTF-8。）

# python - Python pandas 重新采样原始数据中不存在的添加日期

> ID：13984461
> 
> 赞同：6
> 
> 时间：2012-12-21T04:53:12.307
> 
> 标签：python, pandas

我正在使用 pandas 将存储在 中的日内数据转换`data_m`为每日数据。出于某种原因`resample`，为日内数据中不存在的日期添加了行。例如，2000 年 1 月 8 日不在日内数据中，但每日数据包含该日期的一行，其值为 NaN。DatetimeIndex 具有比实际数据更多的条目。我做错什么了吗？

```
data_m.resample('D', how = mean).head()
Out[13]: 
           x
2000-01-04 8803.879581
2000-01-05 8765.036649
2000-01-06 8893.156250
2000-01-07 8780.037433
2000-01-08 NaN

data_m.resample('D', how = mean)
Out[14]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 4729 entries, 2000-01-04 00:00:00 to 2012-12-14 00:00:00
Freq: D
Data columns:
x    3241  non-null values
dtypes: float64(1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T05:14:38.780

你在做什么看起来是正确的，只是 pandas 给出了 NaN 作为空数组的平均值。

```
In [1]: Series().mean()
Out[1]: nan 
```

[`resample`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.resample.html?highlight=resample#pandas.DataFrame.resample)转换为固定的时间**间隔**，因此如果当天没有样本，您将获得 NaN。

大多数时候拥有 NaN 不是问题。如果是，我们可以使用`fill_method`（例如`'ffill'`），或者如果您真的想删除它们，您可以使用`dropna`（不推荐）：

```
data_m.resample('D', how = mean, fill_method='ffill')
data_m.resample('D', how = mean).dropna() 
```

* * *

更新：现代等价物似乎是：

```
In [21]: s.resample("D").mean().ffill()
Out[21]:
                      x
2000-01-04  8803.879581
2000-01-05  8765.036649
2000-01-06  8893.156250
2000-01-07  8780.037433
2000-01-08  8780.037433

In [22]: s.resample("D").mean().dropna()
Out[22]:
                      x
2000-01-04  8803.879581
2000-01-05  8765.036649
2000-01-06  8893.156250
2000-01-07  8780.037433 
```

请参阅[重新采样文档](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.resample.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:08:00.407

在 0.10.0 之前，pandas 用最右边的边缘标记重采样箱，对于每日重采样，它是第二天。从 0.10.0 开始，每日和更高频率的默认分箱行为已更改为`label='left', closed='left'`尽量减少这种混淆。有关更多信息，请参阅[http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#api-changes](http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#api-changes)。

# sql - 如何组合两个表以获得所需的结果

> ID：13984464
> 
> 赞同：0
> 
> 时间：2012-12-21T04:53:40.607
> 
> 标签：sql, sql-server, sql-server-2008

我有两个表设备和产品。设备表有列 id 和 device。和产品表有列 id 和 product。

***设备***表是

```
id     device

 1       a                 
 2       b                  
 3       b 
```

***产品***表是

```
id     product

 1       x     
 2       y        
 3       z       
 4       s 
```

我需要结果

```
 id     device

  1       a    
  2       b        
  3       b       
  4      null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:56:38.560

像这样的东西怎么样

```
SELECT  p.id,
        d.device
FROM    product p LEFT JOIN
        device d    ON  p.id = d.id 
```

另外，看看[SQL SERVER – Introduction to JOINs – Basic of JOINs](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:39:16.863

你应该试试这个加入

```
 select p.id,d.Device 
       from tblDevice d 
       right join tblProduct p
       on d.id=p.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T04:55:52.790

尝试这个

```
select p.id,d.device from products p outer join device d
 on d.id=p.id 
```

# php - 如何在不更改文件夹的情况下更改网址？

> ID：13984465
> 
> 赞同：3
> 
> 时间：2012-12-21T04:53:41.680
> 
> 标签：php, url-routing, smarty

我在我的网站中使用 MVC 框架。在我的网页 URL 文件扩展名中没有显示。我需要指定文件扩展名，如

```
www.legacy.com/women/tops.php 
```

但它只显示

```
www.legacy.com/women/tops/ 
```

出于 seo 的目的，我想更改带有扩展名的 url。但我无法更改文件夹或文件名。

我还有一个疑问。我的网页正在显示

```
www.legacy.com/women/tops/ 
```

像这样我想把它改成 www.legacy.com/women_tops.php/ 有可能吗？

谢谢

这是我用来将 URL 与控制器相关联的代码：

```
$arrCommands = array (
    'home' => "contents",
    'members' => "",        
);

if ( $arrCommands[$command1] == "*" )
{
    $includeFile = CONTROLLER_PATH . "/" . $command1 . "/" . $command2 . ".php";

    if ( !file_exists($includeFile) )
        $includeFile = CONTROLLER_PATH . "/" . $command1 . "/default.php";
}
    elseif ( !array_key_exists($command1, $arrCommands) )
    {
        $includeFile    =   CONTROLLER_PATH . "/contents/" . $command1 . ".php";
        if ( !file_exists($includeFile))
    Header( "Location: http://metroplots.ragedev/404_error/" );     
    }
else
{
    $includeFile = CONTROLLER_PATH . "/". $arrCommands[$command1] . "/" . $command1 . ".php";

    if ( !file_exists($includeFile) )
        $includeFile = CONTROLLER_PATH . "/contents/home.php";
}

include_once($includeFile); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T05:10:45.583

.htaccess 可以变魔术。可以重写任何你想要的东西，可能会变得混乱...... [http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

您还应该能够在应用程序本身中执行此操作。在大多数优秀的框架中，您可以使用自定义路由，[这里是 zend 示例](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:08:30.463

您正在寻找的技术称为**url 重写**

这个想法是获取一个给定的 url 并在服务器端重写它。许多软件使用这种方法来不通过获取参数来暴露逻辑......

例如 [http://domain.com/blog/2](http://domain.com/blog/2)

根据服务器，这个 url 实际上是：

[http://domain.com/index.php?cat=blog&page=2](http://domain.com/index.php?cat=blog&page=2)

在 linux/apache 服务器上是通过 modrewrite 实现的： [http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

在服务器上使用 .htaccess 文件来解释重写规则和路由 url。

microsoft iis 服务器有自己的风格（和语法），称为 url 重写： [http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

有一些工具可以为你做到这一点（这里是其中 6 个的概述） [http://webm.ag/2009/12/15/6-of-the-best-mod-rewrite-generators/](http://webm.ag/2009/12/15/6-of-the-best-mod-rewrite-generators/)

但我觉得大多数时候你最好的办法是手动创建你自己的。

这是我在我的网站上使用的一个示例：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L] 
```

基本上这个规则集会将所有流量重定向到 index.php

在我的 MVC 中，我有一个名为“url_logic”的通用控制器，它首先运行并查看 url 是什么。并根据它的逻辑创建必要的控制器来创建站点（即使它是 404 错误控制器）。

希望这可以帮助您入门！

此外，如果您使用的 Windows .htaccess 文件很难使用。我建议将它们命名为 htaccess.txt，然后在将它们上传到服务器时将它们重命名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:14:14.207

您必须在 htaccess 中添加以下 2 行

```
RewriteEngine On

RewriteRule ^women/tops /women_tops.php 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T01:19:22.007

创建一个 index.php 文件，该文件将作为默认文件读取以进行显示并将其重定向到您的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T05:46:52.523

你正在寻找的是 mod_rewrite mod_rewrite：

在 URL 中隐藏扩展名：

mod_rewrite 重写规则生成器将获取给它的动态 url，并生成正确的语法以放置在 .htaccess 文件中，以允许以可抓取的格式重写 url。apache 模块 mod_rewrite 将某种格式的 url 转换为另一种格式，在帮助对具有动态内容的站点进行索引方面非常有用。

**注意**：在 mod_rewrite 付诸行动之前，您应该在 apache 服务器中启用它。

```
Syntax: RewriteRule url-pattern url-new [[flag,...]]
Example: RewriteRule ^/foo/(.*)$ /bar/$1 [R,L] 
```

一些有用的链接-

网址：[http ://httpd.apache.org/docs/1.3/mod/mod_rewrite.html](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html)

网址：[http ://tomclegg.net/rewriterule](http://tomclegg.net/rewriterule)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T09:35:11.850

看看[这个](http://www.websiteoptimization.com/speed/tweak/rewrite/)网页。我想它可能会给你答案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T07:53:55.033

感谢每一位重播这个问题的人。

```
$xepWords = explode('_',$command1);
    if($xepWords[0] == 'women')
    {
        $includeFile = CONTROLLER_PATH .'/women/tops.php';
    } 
```

我在控制器操作中添加了这段代码现在它工作正常

# java - TableView JavaFX 中的上下文菜单可见性

> ID：13984466
> 
> 赞同：4
> 
> 时间：2012-12-21T04:53:57.827
> 
> 标签：java, contextmenu, tableview, javafx-2, javafx

我`TableView`在 JavaFX 中创建。我想`Context Menu`在tableView中右键单击鼠标显示。所以我在表上添加了一个 EventHandler，如下所示：

```
 TableView tableView=new TableView();

    EventHandler event = new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent me) {
            if (me.getButton() == MouseButton.SECONDARY) {
                tableView.getContextMenu().show(tableView, me.getSceneX(), me.getSceneY());
            }
        }
    };
    tableView.addEventHandler(MouseEvent.MOUSE_CLICKED, event); 
```

但我的问题是，`Context Menu`无论我右键单击表格的任何部分，都可以看到它。

我想这样做`Context Menu`应该只有在我单击`TableView`.

即我将如何在特定点获得 TableView 中的行号，这样我`Context Menu`应该只可见，如果我点击任何行`TableView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-14T23:14:34.037

我发现的最佳解决方案是检查 y 坐标是否超出列标题的范围，然后显式显示菜单。

```
ContextMenu visibleMenu = null;
tableView.setOnMouseClicked((MouseEvent e) -> {
    if (visibleMenu !=null) {
        visibleMenu.hide();
        visibleMenu = null;
    }
    if (e.getButton()==MouseButton.SECONDARY) {
        double columnHeaderHeight = tableView.lookup(".column-header-background").getBoundsInLocal().getHeight();
        if (e.getY()>columnHeaderHeight) {
            visibleMenu = getContextMenu(); // build on the fly or use a prebuild menu
            visibleMenu.show(tableView, e.getScreenX(), e.getScreenY());
        } else {
            // you could show a header specific context menu here
        }
    }
}); 
```

额外的好处是您可以使用上下文相关的项目动态构建上下文菜单（例如，仅在选择某种类型的单元格时才会出现），或者只是像 setContextMenu 那样重用预构建的上下文菜单，由您决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T11:17:14.747

可能是较老的问题。有一个解决方案，比如获取表格鼠标事件的目标并检查例如 TableCellSkin 类并将上下文菜单显示为，

```
table.addEventHandler(MouseEvent.MOUSE_CLICKED,
                new EventHandler<MouseEvent>() {

                    @Override
                    public void handle(MouseEvent e) {
                        if (e.getButton() == MouseButton.SECONDARY
                                && !isRowEmpty) {
                            EventTarget target = e.getTarget();
                            if (target instanceof TableCellSkin
                                    || ((Node) target).getParent() instanceof TableCellSkin) {
                                    // do your stuff. Context menu will be displayed by default
                            } else {
                                // hide the context menu when click event is outside table row
                                table.getContextMenu().hide();
                            }
                        }
                    }
                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:25:41.373

将上下文菜单添加到特定单元格，`CellFactory`而不是整个表。

例如使用[Oracle 教程](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)中的表：

```
 TableColumn firstNameCol = new TableColumn();
    firstNameCol.setText("First");
    firstNameCol.setCellValueFactory(new PropertyValueFactory("firstName"));
firstNameCol.setCellFactory(new Callback<TableColumn, TableCell>() {
    @Override
    public TableCell call(final TableColumn param) {

        final TableCell cell = new TableCell() {

            @Override
            public void updateItem(Object item, boolean empty) {
                super.updateItem(item, empty);
                if (empty) {
                    setText(null);
                } else {
                    if (isEditing()) {
                        setText(null);
                    } else {
                        setText(getItem().toString());
                        setGraphic(null);
                    }
                }
            }
        };
        // This way I will have context menu only for specific column
        cell.setContextMenu(ContextMenuBuilder.create().items(MenuItemBuilder.create().text("menu").build()).build());
        return cell;
    }
}); 
```

# javascript - 如何获取函数参数中选择的选项标签？

> ID：13984468
> 
> 赞同：0
> 
> 时间：2012-12-21T04:54:06.960
> 
> 标签：javascript, select, option, tagname

我的目标是动态设置选项标签的默认显示。
我想创建一个函数，并给它两个变量作为参数。像这样`function(para1, para2)`，第一个参数是选项标签，第二个是一个值。如果第一个参数的值或 id 等于第二个值，这个选项标签将被设置为默认显示。
我想知道括号中的第一个表达式怎么写。我用过`document.getElementsByTagName(option)`和其他的，但都错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:44:13.647

虽然我不确定你在看什么，但这是我对 jQuery 解决方案的最佳猜测
假设
para1 - 下拉列表的 id
para2 - 应该在 dropdwon 中选择的值

您可以使用[`.val`](http://docs.jquery.com/Attributes/val#val)

```
$("#tagId").val(desiredValue); 
```

在你的情况下，它会像

```
$("#para1").val(para2); 
```

在 JavaScript 中

```
var index;
var dd = document.getElementById('para1');
for (var i = 0; i < dd.options.length; i++) {
    if (dd.options[i].text === para1) {
          index =i;        
          break;
    }
}
dd.options[index].selected = true; 
```

# r - 可以在 xtable 中创建乳胶多列吗？

> ID：13984470
> 
> 赞同：36
> 
> 时间：2012-12-21T04:54:24.800
> 
> 标签：r, latex, knitr, xtable, r-markdown

我正在使用带有 R Markdown 和 knitr 的 xtable 来生成我用 \input{} 调用的 .tex 文件。效果很好，但我还没有想出如何创建像[这里](https://stackoverflow.com/questions/11950703/html-with-multicolumn-table-in-markdown-using-knitr)显示的那样的多列。有谁知道如何做到这一点？

到目前为止，我正在使用：

```
tbl <- xtable(data, align="l r r r r r")
colnames(tbl) <- c("Variable", 
                  "Mean", "Std Dev", 
                  "Mean", "Std Dev", 
                  "Difference")
caption(tbl) <- c("Table Title")
print(tbl, 
    include.rownames=FALSE,
    caption.placement="top",
    booktabs=TRUE,
    type="latex", 
    file="output.tex") 
```

我想在每个“平均值”和“标准差”（“治疗”和“控制”）上有一个不同的分组标题。

或者，有没有更好的方法来使用 R Markdown/knitr 自动生成表格？我不想手动编辑表格，因为报告需要自动生成。

**更新：** @agstudy：我是乳胶新手，但我认为这是我希望使用 xtable（或类似 xtable）自动生成的输出：

```
\begin{tabular}{lrrrrr}
  \toprule
      & \multicolumn{2}{c}{Treatment} & \multicolumn{2}{c}{Control} & \\
  \cmidrule(lr){2-3} \cmidrule(lr){4-5}
  Variable & Mean & Std Dev & Mean & Std Dev & Difference \\ 
  \midrule
  var1 & 1 & 2 & 3 & 4 & 5 \\ 
  \bottomrule
\end{tabular} 
```

**更新 2：** @Jonathan：我读了几遍才明白你的建议。我接受了你的建议，它奏效了。

在我现在使用的 R 降价块中：

```
tbl <- xtable(data)
print(tbl,
    only.contents=TRUE,
    include.rownames=FALSE,
    type="latex",
    digits(tbl) <- c(0,1,1,1,1,1),
    file="output/tblout.tex") 
```

然后在正文中，我使用：

```
\begin{tabular}{lddddd}
\toprule
    & \multicolumn{2}{c}{Treatment} & \multicolumn{2}{c}{Control} & \\
    \cmidrule(lr){2-3} \cmidrule(lr){4-5}
    Variable  &  \multicolumn{1}{r}{Mean}  &  \multicolumn{1}{r}{Std Dev}  &       \multicolumn{1}{r}{Mean}  &  \multicolumn{1}{r}{Std Dev}  &  \multicolumn{1}{r}{Difference}  \\
\midrule
\input{../output/tblout}
\bottomrule
\end{tabular} 
```

我会看看是否有人对本机 xtable（或其他包）解决方案有任何其他建议。否则，我会接受你的回答。谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-02-09T22:32:25.563

我认为`add.to.row`xtable 中的选项完美地实现了这一点。

这里的示例代码：

```
require(xtable)
age <- sample(c('30-50', '50-70', '70+'), 200, replace=T)
sex <- sample(c('Male', 'Female'), 200, replace=T)
val <- table(age, sex)
val <- rbind(val, formatC(prop.table(val)*100, format='f', digits=1))
val <- structure(val, dim=c(3, 4))
val <- rbind(c('n', '%'), val)
rownames(val) <- c('', sort(unique(age)))
val <- xtable(val)

addtorow <- list()
addtorow$pos <- list(0)
addtorow$command <- paste0(paste0('& \\multicolumn{2}{c}{', sort(unique(sex)), '}', collapse=''), '\\\\')

print(val, add.to.row=addtorow, include.colnames=F) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-21T06:03:50.167

假设表格的形式在运行中是相同的（即，只有数字在变化），我的建议是使用`only.contents`参数来`print.xtable`手动编码多列标题。据我所知`xtable`，它本身并不能做多列单元格。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-25T05:30:38.113

考虑使用[表格](http://cran.r-project.org/web/packages/tables/vignettes/tables.pdf)包。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-01T13:58:36.857

这是一个孩子的游戏[`kableExtra`包](http://haozhu233.github.io/kableExtra/awesome_table_in_pdf.pdf)。

```
\documentclass{article}
\usepackage{booktabs}
\begin{document}

<<setup, include=FALSE>>=
library(knitr)
opts_chunk$set(echo=FALSE)
library(kableExtra)
options(knitr.table.format = "latex")
mx <- matrix(1:6, ncol=3) 
rownames(mx) <- LETTERS[1:NROW(mx)] 
colnames(mx) <- sprintf("Col %s", LETTERS[1:NCOL(mx)])
@

<<results='asis'>>=
kable(mx, booktabs = TRUE, caption = "My table", align = "c") %>% 
  add_header_above(c(" ", "First"=2, "Second"=1)) %>% 
    kable_styling(latex_options = "hold_position")
@

<<results='asis'>>=
kable(mx, booktabs = TRUE, caption = "My other table", align = "c") %>% 
  add_header_above(c(" ", "First"=2, "Second"=1)) %>% 
    kable_styling(latex_options = "hold_position") %>% 
  group_rows("Nice!", 1, 2)
@

\end{document} 
```

[![在此处输入图像描述](../Images/f10f41ab8152c45a033fa9fb458badf1.png)](https://i.stack.imgur.com/P4jYQ.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-30T17:34:28.890

通常我正在做这样的事情：

```
tableLines <- print (xtable (mymatrix)) ## no file
multicolumns <- "& \\\\multicolumn{3}{c}{A} & \\\\multicolumn{3}{c}{B} \\\\\\\\"
tableLines <- sub ("\\\\toprule\\n", paste0 ("\\\\toprule\n", multicolumns, "\n"), tableLines) ## booktabs = TRUE
tableLines <- sub ("\\\\hline\\n",   paste0 ("\\\\hline\n",   multicolumns, "\n"), tableLines) ## booktabs = FALSE
writeLines (tableLines, con = "myfile") 
```

注意许多`\\\\`需要的。`sub`和`paste`命令中丢失了反斜杠。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-27T15:55:20.047

我的回答有点晚了，这与 ashkan 类似，但更通用，允许使用不同的参数。

首先，为什么要有新的答案？好吧，我需要一个没有表格环境的输出（我想在我的 tex 文档中而不是在我的 r 代码中写我的标题等），这`kableExtra`似乎没有提供（如果我错了，请纠正我）。但我也希望输入具有灵活性（即，有无线、不同的跨度等）。

结果是一个`construct_header()`为我们构造标题的函数。

首先是一个简短的例子：

```
library(xtable)
set.seed(123)
df <- matrix(round(rnorm(16), 2), ncol = 4) 
df <- cbind(paste("Var", 1:4), df)
colnames(df) <- c("Var", rep(c("X", "Y"), 2))
df
#      Var     X       Y       X       Y      
# [1,] "Var 1" "-0.56" "0.13"  "-0.69" "0.4"  
# [2,] "Var 2" "-0.23" "1.72"  "-0.45" "0.11" 
# [3,] "Var 3" "1.56"  "0.46"  "1.22"  "-0.56"
# [4,] "Var 4" "0.07"  "-1.27" "0.36"  "1.79" 

a_header <- construct_header(
  # the data.frame or matrix that should be plotted  
  df,
  # the labels of the groups that we want to insert
  grp_names = c("", "Group A", "Group B"), 
  # the number of columns each group spans
  span = c(1, 2, 2), 
  # the alignment of each group, can be a single character (lcr) or a vector
  align = "c"
)

print(xtable(df), add.to.row = a_header, include.rownames = F, hline.after = F)
# % latex table generated in R 3.4.2 by xtable 1.8-2 package
# % Fri Oct 27 16:39:44 2017
# \begin{table}[ht]
# \centering
# \begin{tabular}{lllll}
#   \hline
#   \multicolumn{1}{c}{} & \multicolumn{2}{c}{Group A} & \multicolumn{2}{c}{Group B} \\  \cmidrule(lr){2-3} \cmidrule(lr){4-5}
#   Var & X & Y & X & Y \\ 
#   \hline
#   Var 1 & -0.56 & 0.13 & -0.69 & 0.4 \\ 
#   Var 2 & -0.23 & 1.72 & -0.45 & 0.11 \\ 
#   Var 3 & 1.56 & 0.46 & 1.22 & -0.56 \\ 
#   Var 4 & 0.07 & -1.27 & 0.36 & 1.79 \\ 
#   \hline
# \end{tabular}
# \end{table} 
```

请注意，我们必须指定`hline.after = FALSE`（对我来说很重要，但这里省略了指定的可能性`floating = FALSE`）。

这导致了这个表（请注意，这种方法需要`booktabs`在 LaTeX 中加载包）：

[![桌子](../Images/859d7bb5a5bf043da171ee49dbb5c514.png)](https://i.stack.imgur.com/njct9.png)

您可以指定省略行`construct_header(..., draw_line = FALSE)`，对齐组，并让它们以不同的方式跨越，即

```
ugly_header <- construct_header(df, c("One", "Two", "Three"), c(2, 1, 2), c("l", "c", "r"))
print(xtable(df), add.to.row = ugly_header, include.rownames = F, hline.after = F) 
```

结果是： [![在此处输入图像描述](../Images/dca8fd82abf8f46ad3a018a92d22a3d2.png)](https://i.stack.imgur.com/gpDyz.png)

该函数的代码是这样的：

```
#' Constructs a header i.e., groups for an xtable
#'
#' @param df a data.frame or matrix
#' @param grp_names the names of the groups
#' @param span where the groups span
#' @param align the alignment of the groups, defaults to center
#' @param draw_line if the group-names should be underlined
#'
#' @return a list that can be given to the \code{add.to.row} argument of the of \code{print.xtable}
#' @export
#'
#' @examples
#' library(xtable)
#' mx <- matrix(rnorm(16), ncol = 4) 
#' mx <- cbind(paste("Var", 1:4), mx)
#' colnames(mx) <- c("Var", rep(c("X", "Y"), 2))
#' 
#' addtorow <- construct_header(mx, c("", "Group A", "Group B"), span = c(1, 2, 2), "c")
#' print(xtable(mx), add.to.row = addtorow, include.rownames = F, hline.after = F)
construct_header <- function(df, grp_names, span, align = "c", draw_line = T) {
  if (length(align) == 1) align <- rep(align, length(grp_names))
  if (!all.equal(length(grp_names), length(span), length(align)))
    stop("grp_names and span have to have the same length!")

  if (ncol(df) < sum(span)) stop("Span has to be less or equal to the number of columns of df") 

  header <- mapply(function(s, a, grp) sprintf("\\multicolumn{%i}{%s}{%s}", s, a, grp),
                   span, align, grp_names)
  header <- paste(header, collapse = " & ")
  header <- paste0(header, " \\\\")

  if (draw_line) {
    # where do we span the lines:
    min_vals <- c(1, 1 + cumsum(span)[1:(length(span) - 1)])
    max_vals <- cumsum(span)
    line <- ifelse(grp_names == "", "", 
                   sprintf("\\cmidrule(lr){%i-%i}", min_vals, max_vals))
    line <- paste(line[line != ""], collapse = " ")

    header <- paste0(header, "  ", line, "\n  ")
  }

  addtorow <- list(pos = list(-1, -1, nrow(df)),
                   command = c("\\hline\n  ", header, "\\hline\n  "))
  return(addtorow)
} 
```

# javascript - 使用 jquery /js 获取手指 x 轴位置

> ID：13984471
> 
> 赞同：1
> 
> 时间：2012-12-21T04:54:28.427
> 
> 标签：javascript, jquery, ipad, cocoa-touch

我想在 ipad 上获得 x 轴的手指位置。我将捕获 2 次，比较差异并找出用户是向右还是向左滚动。但是，我的代码只能捕获第一个 x 位置而不能捕获第二个，如何解决这个问题？谢谢

```
$('#all_pages').bind('scrollstart', function(event) {
var e = event.originalEvent;
var beforeX = e.targetTouches[0].pageX;
var afterX = 0;
setTimeout(function(){afterX = e.targetTouches[0].pageX},200);
alert(beforeX + ',' + afterX);
}); 
```

# java - 属性的 Java 字段隐藏

> ID：13984472
> 
> 赞同：4
> 
> 时间：2012-12-21T04:55:13.413
> 
> 标签：java, field

我刚开始学习Java，所以如果答案有些明显，请多多包涵。我做了一些研究，但无济于事。

据我了解，属性不会被覆盖，而只会隐藏字段。为了确定是使用超类还是子类中的属性，Java 会检查引用的类型。

然后我不明白这里的输出：

```
public class Super {
    String str = "I'm super!\n";

    public String toString() {
        return str;
    }
}

public class Sub extends Super {
    String str = "I'm sub.\n";
}

public class TestFH {
    public static void main(String[] args) {
        Sub s1 = new Sub();

        System.out.printf(s1.toString());
    }
} 
```

它给了我：

```
I'm super! 
```

我知道我可以通过方法覆盖轻松实现我想要的。我只是好奇引擎盖下发生了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T05:00:10.767

当您调用时`s1.toString()`，它会查找`toString()`仅在`Super`类中定义的方法，因此使用该方法作为超类方法在子类中可用。**您的超类方法`toString()`使用它自己的类变量`str`（在超类中初始化值）**作为方法的返回值，因此行为即输出为`I'm super!`.

如果您想获得输出，`I'm sub.\n`那么您需要重用与超类中相同的变量并将新的字符串值分配`I'm sub.\n`给它。最好的选择是使用构造函数：

```
 public class Super {
     String str = "I'm super!\n";

     public Super(String stringValue){
         this.str = stringValue;
     }

     public String toString() {
        return str;
     }
  }

  public class Sub extends Super {
     public Sub(){
       super("I'm sub.\n");
     }
  }

  public class TestFH {
    public static void main(String[] args) {
       Sub s1 = new Sub();
       System.out.printf(s1.toString());
    }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T05:06:55.097

你`str`在你的孩子班里隐藏（阴影）。由于您没有`toString()`在子类中覆盖，因此正在父类中进行调用，并且它会看到父类的`str`.

如果你这样做：

```
public class Sub extends Super {
    public Sub() {
        this.str = "I'm sub.\n";
    }
} 
```

它会输出你所期望的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T04:59:32.900

此调用使用超类：

```
Sub s1 = new Sub();
System.out.printf(s1.toString()); 
```

原因是**Sub 没有覆盖** `str`，它只是声明了另一个恰好具有相同名称的变量。换句话说， sub 只是将变量隐藏在`Super`（数据成员不是多态的）中。

如果它们的含义不同，你可以给它们起不同的名字。或者也许可以`Sub`使用 getter 方法访问（或修改）父级的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T05:02:46.723

您没有将字符串文字分配给`"I'm sub.\n"`共享的超类字段，而是创建了子类本地的字段并将其分配给该字段。

例如，

```
public class EncapsulationDemo {

    public static void main(String[] args){
        MySuperObject obj = new MySubObject();

        System.out.println(obj); // prints I'm sub.
    }

    private static class MySuperObject{
        String str = "I'm super."; // protected, can be accessed directly 
                                   // by subclasses

        @Override
        public String toString(){
            return str;
        }
    }

    private static class MySubObject extends MySuperObject{
        MySubObject(){
            super();
            str = "I'm sub."; // assign to superclass field
        }
    }
} 
```

有关详细信息，请参阅[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

# python - python字典难题

> ID：13984473
> 
> 赞同：7
> 
> 时间：2012-12-21T04:55:20.517
> 
> 标签：python, dictionary

在我输入的控制台上

```
>>> class S(str): pass
...
>>> a = 'hello'
>>> b = S('hello')
>>> d = {a:a, b:b}
>>> d
{'hello': 'hello'}
>>> type(d[a])
<class '__main__.S'>
>>> type(d[b])
<class '__main__.S'> 
```

起初我以为`d`只保留一对的原因是因为`hash(a)`和`hash(b)`返回相同的值，所以我尝试了：

```
>>> class A(object):
...     def __hash__(self):
...             return 0
... 
>>> class B(object):
...     def __hash__(self):
...             return 0
... 
>>> d = {A():A(),B():B()}
>>> d
{<__main__.A object at 0x101808b90>: <__main__.A object at 0x101808b10>, <__main__.B object at 0x101808d10>: <__main__.B object at 0x101808cd0>} 
```

现在我很困惑。为什么在第一个代码清单中`d`只保留了一对，但在第二个清单`d`中，尽管具有相同的哈希值，两个键都被保留了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T05:01:00.907

原始示例中的两个对象被折叠不是因为它们具有相同的哈希值，而是因为它们比较相等。字典键在*相等性*方面是唯一的，而不是散列。Python 要求任何两个比较相等的对象必须具有相同的哈希值（但不一定相反）。

在您的第一个示例中，这两个对象是相等的，因为它们都具有`str`相等行为。由于两个对象比较相等，因此它们被折叠为一个。在第二个示例中，它们的比较不相等。默认情况下，用户定义的类使用标识来表示相等 --- 也就是说，每个对象仅与自身比较相等。所以你的两个对象不相等。它们具有相同的哈希无关紧要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T05:01:54.330

哈希不能确定字典中的唯一键。在某些方面，散列函数是“实现细节”，因为它们确定字典内部如何存储其条目。a == b 意味着 hash(a) == hash(b)，但反之亦然。两个键还需要彼此相等（当应用 == 运算符时）才能被视为字典中的等效键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T04:59:40.433

如果您希望类型是可[散列](http://docs.python.org/2/glossary.html#term-hashable)的，那么[您还必须定义`__eq__()`](http://docs.python.org/2/reference/datamodel.html#object.__hash__). `str`定义`__eq__()`正确，但`A`不`B`正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T05:01:18.503

第一个和第二个对象的键不同。因为它们是对象，所以键是对象的一些可读等价物，而不是字符串。

# java - 用户如何仅通过长按来更改 textview 的值？

> ID：13984474
> 
> 赞同：1
> 
> 时间：2012-12-21T04:55:27.707
> 
> 标签：java, android

我正在创建一个应用程序来跟踪分数。分数显示在 TextView 中，当用户单击 TextView 时，分数会增加。这完美！但是，我想设置一个 onLongClickListener() 来编辑文本。因此，当用户执行 LongClick 时，我希望仅在屏幕上弹出一个数字编辑器，当用户单击 OK 或 Done 时，它​​将 TextView 值更新为用户输入的数量。

有人可以告诉我如何做到这一点吗？这是我的第一个真正的应用程序，所以我对如何实现这一点有点困惑，并且在 Google/Stackoverflow 上的所有搜索都没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:04:06.120

由于 TextView 是只读的，我过去所做的就是在同一个地方有一个 EditText 和一个 TextView。通过这种方式，当您想要进入和退出“编辑模式”时，您必须有代码来显示和隐藏两个视图。因此，在您的 onLongClick 事件中，您将隐藏 TextView 并显示 EditText。在 Enter 键上（在 EditText 上使用键侦听器）和当 EditText 失去焦点时（也有焦点侦听器），您将执行相反的操作。

另一部分是如何将输入限制为数字输入。看看这个： [https ://stackoverflow.com/a/7300516/53501](https://stackoverflow.com/a/7300516/53501)

至于当 EditText 失去焦点时该怎么办，我会提示用户确认或取消更改。我个人会为此使用 AlertDialog（通过 AlertDialog.Builder）。

阅读了这是您的第一个应用程序的评论后，如果您想澄清任何这些事情，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:04:19.647

你可以通过这种方式...

```
 text1.setOnLongClickListener(new OnLongClickListener()
 {  
        @Override
        public boolean onLongClick(View arg0)
        {
            text.setText("Your Text");
            return false;
        }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:01:15.687

首先创建您想要显示的视图（[请参阅此处如何操作](http://www.mkyong.com/android/android-custom-dialog-example/)）。构造对话框并在 onLongClickListener 内部 - 显示对话框。另外 - 为对话框内的按钮分配一个 onClickListener，它将输入应用于您的 TextView。

# objective-c - StoryBoard 处理继承的视图控制器

> ID：13984475
> 
> 赞同：22
> 
> 时间：2012-12-21T04:55:50.740
> 
> 标签：objective-c, storyboard

我是故事板的新手。我曾经使用代码制作我的视图。我有个问题。

我创建了一个视图控制器

```
@interface FunctionViewController : UIViewController 
```

我已经使用我的代码添加

1.  全屏按钮（alpha：0.5）
2.  中间的弹出式视图（不是全屏）

然后我创建了另一个 Viewcontroller

```
@interface PlayFunctionViewController : FunctionViewController 
```

并在弹出式视图上添加一些视图

我想通过使用情节提要重新创建这些东西。

如何使用界面构建器和情节提要构建这些，这样我就不需要在 FunctionViewController 的每个子类中布局全屏按钮和弹出式视图？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-11T06:24:47.583

您不能在情节提要的子类中继承超类的布局，即，如果您在情节提要的视图控制器中直观地布置元素并将它们连接到代码、该视图控制器的子类，甚至是相同的其他实例类，必须单独布局，并且不会自动填充或更新。

换句话说，在情节提要中，您必须手动布置和连接您添加到情节提要*的每个单独实例和子类中的所有界面元素。*这为您提供了灵活性，您可以在整个应用程序中重用同一类的多个实例并以不同的方式布局它们，但它不给您继承布局的能力。

如果您想在子类中继承布局，请在`viewDidLoad`超类中以编程方式进行布局，然后所有子类都将具有这些界面元素，即使您在情节提要中设计和布局它们（它们在故事板，但它们会在您构建和运行应用程序时出现）。

* * *

基本上，如果您想在一个类及其所有子类中拥有相同的界面元素，请以编程方式创建它们，它们将存在于所有实例和子类实例中，即使您在情节提要中创建和设计实例本身也是如此。

您可以混合使用代码和情节提要，因此您可以在情节提要中创建一些元素，但其他需要在代码中出现在所有实例和子类中的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T07:28:55.203

我遇到了类似的问题，虽然这很耗时，但创建一个委托并在多个视图控制器中重用它是一个更好的解决方案。虽然这超过了“继承”的全部意义。

# sphinx - ThinkinSphinx 查询不适用于具有四个条件的 sphinx_select

> ID：13984487
> 
> 赞同：0
> 
> 时间：2012-12-21T04:56:51.477
> 
> 标签：sphinx, thinking-sphinx

我正在尝试使用 ThinkingSphinx 返回开始日期在某个范围内或结束日期在同一范围内的记录，基本上是在此范围内开始或结束的任何记录。

为此，我根据[文档](http://pat.github.com/ts/en/common_issues.html#or_attributes)使用计算属性和 sphinx_select结合[本文](http://sphinxsearch.com/forum/view.html?id=3187)对日期范围的建议，如下所示（假设有两条记录，record_a 在范围之外开始，但在范围内结束，并且 record_b 开始并在范围内结束）：

```
with_display = "*, IF(start_at >= #{range_start.to_i}, 1, 0) + " + 
                  "IF(start_at <= #{range_end.to_i}, 1, 0) + " + 
                  "IF(end_at   >= #{range_start.to_i}, 10, 0) + " + 
                  "IF(end_at   <= #{range_end.to_i}, 10, 0) AS display"
{
  sphinx_select: with_display,
  with: {'display' =>  [2, 20, 22]},
}
=> [record_b] 
```

但是，如果我只使用 start_at 条件，我会得到一条记录，如果我只使用 end_at 条件，它会返回两条记录。

```
with_display = "*, IF(start_at >= #{range_start.to_i}, 1, 0) + " + 
                  "IF(start_at <= #{range_end.to_i}, 1, 0)  AS display" 
=> [record_b]

with_display = "*, IF(end_at >= #{range_start.to_i}, 10, 0) + " + 
                  "IF(end_at <= #{range_end.to_i}, 10, 0) AS display"
=> [record_a, record_b] 
```

如果我正确理解这一点，拥有所有四个条件，应该会返回 record_a 和 record_b，因为 record_a 的`display`值应该是 20，而 record_b 的值应该`display`是 22。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:43:39.703

考虑到我要处理的情况，我刚刚意识到我的数学是错误的：

*   record_a 将有`display`21
*   record_b 将有`display`22

我需要做的是将我的数组更改为：

```
{
  sphinx_select: with_display,
  with: {'display' =>  [12, 21, 22]},
} 
```

依次处理在范围内结束的记录 (21)、在范围内开始的记录 (12) 以及开始*和*结束在范围内的记录 (22)

# jquery - 为什么 jquery 中的 Razor 不能正常工作

> ID：13984490
> 
> 赞同：-3
> 
> 时间：2012-12-21T04:57:09.587
> 
> 标签：jquery, ajax, asp.net-mvc-3

我正在尝试在 jquery 中调用 mvc razor 元素，但它无法正常工作。这是一个例子![在此处输入图像描述](../Images/f7d7d2809d893f1a3ef289046dda13b6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T05:03:40.890

试试这个

```
 $.ajax({
                type: "POST",
                url: '@Url.Action("GetQuestionBy","Configuration")',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {QuestionType:'QuestionId',modelId:'@question.projectmdule.moduleId'}
                success: function (msg) {
                   alert(msg);
                }
            }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T05:04:38.750

你应该在这样的双引号内使用 razor`"@question.projectmdule.ProjectmoduleId"`

# linq-to-sql - 一台 SQL 服务器上具有相同表名的多个数据库。两个 Linq to SQL 类 - 歧义错误

> ID：13984496
> 
> 赞同：3
> 
> 时间：2012-12-21T04:57:46.563
> 
> 标签：linq-to-sql, datacontext

我正在尝试编写一个工具，它将跨多个数据库更新用户帐户凭据。这些数据库中的每一个基本上都支持同一应用程序的不同版本，因此每个数据库都具有相同的表名。我只对这些数据库中的一个名为 opususer 的表感兴趣。

我能够创建第一个 Linq to SQL 类并使用复选框列表创建选定项目的集合并将其发送到循环并更新用户凭据的方法。当我有一个 DataContext 时这很好用，但是当我向 SQL 类添加另一个 Linq 并尝试重新创建相同的东西时，除了在不同的数据库上我收到几个歧义错误和“成员被多次定义”错误。

我不明白 LinqToSQL 类指向一个完全不同的数据库，尽管表名是相同的，但是为什么这很重要，因为 datacontext 应该将它分开不？

我试过使用一个 DataContext 并添加一个别名，但我不确定这是否可以做到。我是 ASP.NET 的新手...

```
 if (DatabaseName == "clincomm_243x")
            {
                using (UserAccountDataContext Data = new UserAccountDataContext()) // database clincomm_243x
                {
                    string UserName = TextBoxUserName.Text.ToUpper();

                    opususer CheckUser = Data.opususers
                        .SingleOrDefault(opususer => opususer.username == UserName && opususer.active == true);
                    if (CheckUser == null || TextBoxUserName.Text.Length ==0)
                    {
                        TextBoxResult.Visible = true;
                        TextBoxResult.Text = "Username " + UserName + " does not exist. Please check and try again!";
                    }
                    else
                    {
                        TextBoxResult.Text = "";
                        TextBoxResult.Text = "User " + UserName + " has been found.";
                        TextBoxResult.Visible = true;
                        TextBoxResult.Visible = true;
                        TextBoxResult.Text += "\nAttempting to update user account details.....\n";

                        // Set the new values for the record returned
                        CheckUser.password = "03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4";
                        CheckUser.hashtype_code = "SHA-256";
                        CheckUser.unsuccessfullogons = 0;
                        CheckUser.active = true;
                        DateTime newPasswordExpiryDate = DateTime.Now.Date.AddYears(10);
                        CheckUser.passwordexpirationdate = newPasswordExpiryDate;
                        Data.SubmitChanges();

                        TextBoxResult.Text += "\nUser Account " + UserName + " has been successfully updated\n";
                        TextBoxResult.Text += "\nPassword has now been set to 1234 and will not expire until " + newPasswordExpiryDate;
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:05:01.220

即使您使用的是新的数据上下文，代表您的表的类也将驻留在同一个命名空间中 - 除非您指定不同的命名空间。尝试为每个 DataContexts 的“实体命名空间”属性提供唯一的命名空间。

# blackberry - 以编程方式连接到 BlackBerry 中的特定 wifi 网络

> ID：13984497
> 
> 赞同：1
> 
> 时间：2012-12-21T04:57:51.543
> 
> 标签：blackberry, wifi

我想使用 ssid 名称、密码和网络类型以编程方式连接特定的 wifi 网络。对于 Android，我找到了一个解决方案：[如何以编程方式连接到 Android 中的特定 Wi-Fi 网络？](https://stackoverflow.com/questions/8818290)
但对于黑莓，我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T00:05:56.880

如果您正在为 BlackBerry OS 5 或更高版本编程，您可以使用[HotspotClientRegistry](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/wlan/hotspot/HotspotClientRegistry.html)。

# c# - 在 MVC 4 中将 JSON 数据映射到模型并返回

> ID：13984498
> 
> 赞同：1
> 
> 时间：2012-12-21T04:57:52.980
> 
> 标签：c#, json, asp.net-mvc-4

请原谅我可能会做的任何说错话。我只是在学习 asp.net c#、OOP 和 MVC 4。

我在我的网站上使用 Annotator 插件，我正在尝试从数据库中存储和检索结果。当一个新的注解被创建时，它会向控制器发送这样的信息。

```
 {
      "text":"asdas sd a dasd as dasd",
      "ranges":
       [{
             "start":"/div/p[3]",
             "startOffset":195,
             "end":"/div/p[3]",
             "endOffset":532
       }],
       "quote":"Some quote that was selected.",
       "UserID":"1",
       "ProjectDocID":"1"
 } 
```

现在，我希望这样的事情能够将所有数据加载到一个不错的简单对象中。

```
 // GET: /Annotation/Create

    public ActionResult Create(Comment comment)
    {
        db.Comments.Add(comment);
        db.SaveChanges();
        return Json(comment);
    } 
```

我看起来像这样的模型（我正在改变它，但是它需要改变）。

```
public class Comment
{
    [Key]
    public int CommentID { get; set; }
    public int ProjectDocID { get; set; }
    public int UserID { get; set; }

    public string text { get; set; }
    public string Annotation { get; set; }
    public string quote { get; set; }
    public string start { get; set; }
    public string end { get; set; }
    public string startOffset { get; set; }
    public string endOffset { get; set; }
    public DateTime DateCreated { get; set; }

    public virtual ICollection<CommentVote> CommentVote { get; set; }
    public virtual ICollection<CommentReply> CommentReply { get; set; }

    public ProjectDoc ProjectDoc { get; set; }
    public virtual User User { get; set; } 
} 
```

我需要做什么才能从服务器获取数据并将其映射到模型。我还需要能够以顶部的格式将其发送回，以便插件在从控制器中的 Details 操作中请求它时理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:09:42.743

不确定这是否是正确的方法，但它可以让我将它存储在数据库中，这就是目前的全部。我更新了我的模型如下。

```
public class Comment
{
    [Key]
    public int CommentID { get; set; }
    public int ProjectDocID { get; set; }
    public int UserID { get; set; }
    public string text { get; set; }
    public string quote { get; set; }
    public DateTime DateCreated { get; set; }

    public virtual ICollection<CommentVote> CommentVote { get; set; }
    public virtual ICollection<CommentReply> CommentReply { get; set; }
    public ProjectDoc ProjectDoc { get; set; }
    public virtual User User { get; set; }
    public List<ranges> ranges { get; set; }
}
public class ranges {
    public int ID { get; set; }
    public string start { get; set; }
    public string end { get; set; }
    public string startOffset { get; set; }
    public string endOffset { get; set; }

} 
```

这与我使用 Ajax 发送到控制器的 JSON 对象相匹配。一旦它完全匹配上面的控制器动作就可以了。

# ios - 在我的服务器上上传 100 多张图片时收到内存警告和应用程序崩溃

> ID：13984499
> 
> 赞同：2
> 
> 时间：2012-12-21T04:57:53.907
> 
> 标签：ios, memory-leaks, didreceivememorywarning, memory-warning

我正在使用以下代码在服务器上上传 100 多张图片，并且在上传几张图片后收到内存警告。请帮助我..这是我在服务器上上传图片的代码：

```
-(void)uploadSingleFile
{
    if(!self.objWebServices.bSyncWasOn)
    {
        NSLog(@"STOP upload Single File RETURN");
        [self Call_SaveSyncedImageID];
        return;
    }
    SyncItem* item = [arrSelSyncItemIDS objectAtIndex:nSyncItemIndex];

    if(item.nType == SYNC_STATUS_NOT_SELECTED || item.nType == SYNC_STATUS_SYNC_DONE)
    {
        nSyncItemIndex = nSyncItemIndex + 1;
        if([arrSelSyncItemIDS count] > nSyncItemIndex)
        {
            NSLog(@"Called uploadSingleFile");
            [self uploadSingleFile];
            return;
        }
        else
        {
            //[self LoadImages:!bShowHideSyncImages];
            [SVProgressHUD dismiss];
            [BtnStopSync setTitle:@"Start sync" forState:UIControlStateNormal];
            self.objWebServices.bSyncWasOn = NO;
            self.objWebServices.isFileUpload = NO;

            if( [[NSUserDefaults standardUserDefaults] boolForKey:@"Notification_State"] ) // Setting Switch Bool
            {
                UIAlertView *Alert = [[UIAlertView alloc] initWithTitle:@"test" message:@"*** Sync completed successfully." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [Alert show];
            }
        }
    }
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSString *srtprefSessionId = [NSString stringWithFormat:@"%@",[prefs objectForKey:@"prefSessionId"]];

    BOOL isTrash = FALSE;   
    NSString *StrPath = @"/Pictures/";      //Change 
    ALAsset* temp = item.itemAsset;
    NSDate* assetDate = (NSDate*)[temp valueForProperty:@"ALAssetPropertyDate"];

    NSString* strID = @"";
    strID = [[temp valueForProperty:@"ALAssetPropertyURLs"] description];
    strID = [strID stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSString* strImageType = @"";
    if ([strID rangeOfString:@"jpg"].location != NSNotFound || [strID rangeOfString:@"JPG"].location != NSNotFound ){
        strImageType = @"jpg";
    }
    else if ([strID rangeOfString:@"png"].location != NSNotFound || [strID rangeOfString:@"PNG"].location != NSNotFound )
        strImageType = @"png";

    NSDateFormatter* df = [[NSDateFormatter alloc]init];
    [df setDateFormat:@"MM/dd/yyyy"];
    NSString *result = [df stringFromDate:assetDate];

    NSTimeInterval timeInterval = [assetDate timeIntervalSince1970];
    ALAssetRepresentation *rep = [temp defaultRepresentation];
    CGImageRef iref = [rep fullResolutionImage];
    StrPath = [StrPath stringByAppendingFormat:@"%d.%@",(int)timeInterval,strImageType];
    //UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];

    UIImage *image =[UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];
    //------------------ metadata -------------------------------------------------------
    NSDictionary *imageMetadata = [rep metadata];
    NSString *strOrt=[NSString stringWithFormat:@"%@",[imageMetadata valueForKey:@"Orientation"]];

    NSData *dataObj = nil;
    dataObj = UIImageJPEGRepresentation(image, 1.0);
    NSString* StrFileData = [Base64 encode:dataObj];
    NSString* strFileHash = [dataObj md5Test];

    NSMutableDictionary *DictRequest = [[NSMutableDictionary alloc]init];
    [DictRequest setObject:srtprefSessionId forKey:@"SessionId"];
    [DictRequest setObject:StrPath forKey:@"Path"];
    [DictRequest setValue:[NSNumber numberWithBool:isTrash] forKey:@"UploadDirectlyToTrashbin"];
    [DictRequest setObject:StrFileData forKey:@"FileData"];
    [DictRequest setObject:strFileHash forKey:@"FileHash"];
    [DictRequest setObject:result forKey:@"DateCreated"];

    BOOL isNULL = [self stringIsEmpty:strOrt];
    if(!isNULL)
    {
        //[DictRequest setObject:strOrt forKey:@"Orientation"];
    }

    NSString *jsonString = [DictRequest JSONRepresentation];
    NSString *strUrl=[NSString stringWithFormat:@"%@",FileUpload_URL];
    NSURL *url1=[NSURL URLWithString:strUrl];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url1];
    [request setTimeoutInterval:60.0];
    [request setHTTPMethod:@"POST"];
    NSData *postData = [jsonString dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];
    [request setHTTPBody:postData];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    if(theConnection)
        [self Set2Defaults];

    theConnection = [[NSURLConnection alloc]initWithRequest:request delegate:self];

    [SVProgressHUD dismiss];

    if(theConnection)
        webData = [NSMutableData data];
    else
        NSLog(@"Connection Failed !!!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:02:12.967

尝试这个：

```
-(void)uploadSingleFile
{
    @autoreleasepool
    {
    ...
    ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T01:31:00.293

设置`cachePolicy`避免缓存

> request.cachePolicy = NSURLRequestReloadIgnoringLocalCacheData

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T06:42:41.357

为什么需要这么多操作？？？？

```
NSData *dataObj = nil;
dataObj = UIImageJPEGRepresentation(image, 1.0);
NSString* StrFileData = [Base64 encode:dataObj];
NSString* strFileHash = [dataObj md5Test]; 
```

另外我建议你在发送之前压缩图像，因为 NSData 会很大。这可以从服务器端进行管理

发送前尝试压缩图像：

```
CGFloat compression = 0.9f;
NSData *imageData = UIImageJPEGRepresentation([item image], compression);
while ([imageData length] > 700000 && compression > 0.1) {
    // NSLog(@"Image size too big, compression more: current data size: %d bytes",[imageData length]);
    compression -= 0.1;
    imageData = UIImageJPEGRepresentation([item image], compression);

} 
```

# macos - Dock Tile 插件不起作用

> ID：13984500
> 
> 赞同：1
> 
> 时间：2012-12-21T04:57:56.430
> 
> 标签：macos, plugins, dock, tile, nsdocktile

我正在尝试创建一个停靠瓷砖插件。

*   我已经使用 Wrapper Extension 作为 docktileplugin 在我的项目中添加了一个新目标
*   我添加了一个使用方法实现 NSDockTilePlugIn 的类：

    ```
    -(void)setDockTile:(NSDockTile *)dockTile
    {
        NSLog(@"DOCK TILE PLUG-IN LOADED!");
    } 
    ```

*   我已在其 info.plist 中将此类设置为 Principal Class

*   我已将此新的 DockTile 目标设置为我的主应用程序的目标依赖项，并将其添加到“复制文件/目标：插件”构建阶段
*   我在主应用程序的 Info.plist 中将 NSDockTilePlugin 关键字设置为不带扩展名的 Dock Tile 目标的名称。

我遵循了文档，甚至下载了苹果提供的示例程序：http: [//developer.apple.com/library/mac/#samplecode/DockTile/Listings/DockTilePlugIn_DockTilePlugIn_m.html](http://developer.apple.com/library/mac/#samplecode/DockTile/Listings/DockTilePlugIn_DockTilePlugIn_m.html)

示例程序不起作用，但我至少得到一个控制台错误：

```
 12/20/12 8:29:49.217 PM com.apple.dock.extra: Could not load Dock Extra class from the bundle /Users/[MYNAME]/Downloads/DockTile/build/Release/DockTileApp.app//Contents/PlugIns/DockTile.docktileplugin 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:17:02.293

经过多次试验和错误，我发现您必须具有以下构建配置才能使您的 Dock tile 插件正常运行。

其他链接器标志：-ObjC
OS X 部署目标：10.6 或更高版本，取决于您当前的 OSX 版本
架构：标准（32/64 位 Intel）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-14T14:39:25.003

@gravityab 经过大量搜索后，我发现了一个未维护的版本，现在我已经对其进行了更新，为示例添加了另一个功能并将其放在 github 上 - [https://github.com/CartBlanche/MacDockTileSample](https://github.com/CartBlanche/MacDockTileSample)。如果有人发现我做错了什么，请随时 fork 或提交 PR。

# c# - 用于在 mvc3 razor databasefirst 中显示所有技能的复选框

> ID：13984501
> 
> 赞同：0
> 
> 时间：2012-12-21T04:58:02.793
> 
> 标签：c#, asp.net-mvc-3, sql-server-2008

我正在尝试在我的创建页面中显示选定的技能。我有数据库，我给出了模型的连接，但我得到了所有的技能，但是当我被选中时，那些没有保存的技能不知道是什么问题有人可以帮助我吗？查看代码是

```
<div class="editor-field">
        @{ 
   IEnumerable<SelectListItem> skill = ViewBag.skill;
   foreach (var item in skill)
   {
            @Html.CheckBox("Skills", false, new { value = item.Value });                                                             
            <input type="checkbox" name="skillsId" value="@item.Text" /> 
            <label>@item.Text</label>  
            @Html.ValidationMessageFor(model => model.Skills)
   }
        }
       </div> 
```

控制器代码是

```
int SId = Convert.ToInt32(emp.Skills);
var Sname = (from sn in db.TblSkills
            where sn.SkillsId == SId
            select sn.Skills).SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:44:13.510

你可以试试这段代码。它对你有帮助。

```
<%: Html.CheckBox("Skills", Model.Skills.HasValue ?  Model.Skills.Value : false)%> Skills 
```

# html - 在 html 上如何将 var 加一并保存

> ID：13984502
> 
> 赞同：1
> 
> 时间：2012-12-21T04:58:08.503
> 
> 标签：html

我学过网页设计，但我从来没有学过如何在网站上获取一个变量，每次有人点击它都会增加一个并保存它，这样下一个用户就会看到 var+1。

例如 facebook 喜欢是如何工作的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:02:05.460

这不是仅由 HTML 完成的简单任务。

您需要一个数据库来存储喜欢的数量。还应使用 PHP 和 Ajax 等其他技术。这篇[文章](https://stackoverflow.com/questions/9575049/how-to-create-a-facebook-style-like-system)给你一些关于如何实现这样一个系统的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:01:33.427

您需要服务器中的数据库，并使用 JavaScript 将 Ajax 查询 POST 到服务器，并且在页面请求时，您需要服务器端脚本语言（例如 PHP）来查询数据库以获取变量的值并生成 HTML具有该值的页面。用纯 HTML 是不可能的。

# ios - iOS 6 上“区域监控”的准确性

> ID：13984505
> 
> 赞同：3
> 
> 时间：2012-12-21T04:59:29.513
> 
> 标签：ios, location, ios-simulator, region, cllocation

我正在尝试制作一个基于位置的应用程序，该应用程序需要在打开后不断更新位置。我一直在寻找一种在应用程序关闭时将位置保留在后台的方法，但我发现这不是最好的方法，因为它会很快耗尽任何 iPhone 的电池电量。

长话短说，我发现“区域监控”是我理解的，它们与 Apple 用于其应用程序“提醒”的相同，也适用于位置。然后我使用该选项来测试我的应用程序，我意识到在模拟器中“从不”进入方法“didEnterRegion”，尽管它是正确创建的：

```
-(void) locationManager: (CLLocationManager *) manager didEnterRegion: (CLRegion *) region
 {
     NSLog (@ "entering the region");
     CLLocation * location1 = manager.location;
     CLLocation * location2 = [[CLLocation alloc] initWithLatitude: latitud.doubleValue longitude: longitud.doubleValue];
 } 
```

我终于意识到该方法被调用但只有当我离开大部分区域并回到该区域时，这表明它不起作用，因为我已经在那个位置（所有这些都在模拟器中），奇怪的事情是不是，模拟器的位置距离监控区域很远！这使我认为这是准确性问题，尽管创建半径为 50 或 100 米的区域正在传播 3 或 4 公里，所以我没用。

有没有人经历过这知道 iOS 6 模拟器是否有此错误或精度问题？我还没有开发者许可证来直接在我的 iPhone 上测试它，我还不想购买它，因为我的应用程序还远未完成，我感谢任何关于这个主题的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:59:31.490

我建议进行实际的地面测试。区域监控精度因测试位置而异。

第二种选择是使用区域监控来唤醒应用程序并启动标准位置服务。为此，您需要获得在后台运行应用程序的权限。苹果可能不会批准这一点。我们的应用程序使用这种方法被拒绝了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-14T03:28:23.720

DidEnterRegion 和 ExitRegion 不是很准确。大约 +, - 150m 精度。

但是 -(void) locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 非常准确。使用它来找出您的地区有坐标/当前位置

```
CLLocation *currentLocation = [locations lastObject];

 if ([self.ARegionYouSetBeforeHand containsCoordinate:currentLocation.coordinate])
{
 //you arrived at this region!!
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T06:35:55.803

区域监控（通常）与“重大位置变化”定位服务的工作基础相同。也就是说，它使用手机信号塔位置；Apple 建议您通常可以预期 1 公里左右的精度，但警告说实际精度会随您所在地区的手机信号塔的密度而变化。您可以在 Core Location 上的[WWDC 视频](http://developer.apple.com/videos/)中找到有关此主题的更多背景信息。

使用区域监控来（唤醒您的应用程序并）对用户的位置进行一般猜测，然后使用更高精度的模式`CLLocationManager`来获得更精确的修复，这可能是可行的——我没有尝试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T00:05:09.150

完成时，我意识到区域监控的准确性对于大多数用途来说已经足够了，但在模拟器中可能会很棘手，因为它没有 GPS 或手机硬件，无论如何，当我在我的设备中使用“区域监控”时，即使在模拟路线中也是如此该功能正常工作。

甚至为了更准确，我将 CLLocationManager 的方法“startUpdatingLocation”调用到方法“didEnterRegion”中，这对我来说很有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-09T07:41:27.480

我在 iPhone 5C 上使用蜂窝塔移动数据进行区域监控时遇到了同样的问题，禁用 WiFi，当我距离保持区域半径为 100.0 的监控点 1.95 公里时，我习惯于很快调用 didEnterRegion米。这还为时过早。

Apple 有一些阈值，由当前可用的硬件和定位技术决定。所以对我来说，它可能是大约 1800 米的早期价值。

我建议保持最小半径（例如 25.0 代表 500.0 区域）或者如果通知如此珍贵，请使用 didUpdateLocations 委托方法并确定您的区域并通知相同。

问候，考希克

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-30T13:54:10.287

**MK MapView 上的预定义 GPS 精度**

1.  kCLLocationAccuracyBestForNavigation – 使用
    由附加传感器数据增强的最高可能精度级别。

2.  kCLLocationAccuracyBest – 建议使用电池供电的设备的最高准确度级别。

3.  kCLLocationAccuracyNearestTenMeters - 精确到 10 米以内。

4.  CLLocationAccuracyHundredMeters – 精确到 100 米以内。

5.  kCLLocationAccuracyKilometer – 精确到一公里以内。

6.  kCLLocationAccuracyThreeKilometers – 精确到三
    公里以内。

**用法：**

```
var locationManager: CLLocationManager = CLLocationManager()

    //MapView Location
    locationManager.delegate = self
    locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters
    locationManager.requestWhenInUseAuthorization()
    locationManager.startUpdatingLocation()
    locationManager.startUpdatingHeading() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-07T19:05:29.437

我发现内置的区域监控不足以满足我的需求。如果您需要更高的准确度，请先适当设置准确度，然后您可以使用以下内容：

（使用与@coolcool1994 相同的方法，但更深入一点并使用 Swift 2.1。记得设置`CLLocationManager`及其委托（下面的函数将驻留），并开始接收位置更新）

```
var activeRegions = Set<String>()
var monitoredRegions = [
  CLCircularRegion(center: CLLocationCoordinate2D(latitude: 0.0, longitude: 0.0),
    radius: 300, identifier: "Region1"),
  CLCircularRegion(center: CLLocationCoordinate2D(latitude: 0.0, longitude: 0.0),
    radius: 300, identifier: "Region2")
]

func manuallyUpdateActiveRegionsFromLocation(location: CLLocation){
  // Optionally explicitly reject unwanted location updates
  // Setting the location manager delegate's desiredAccuracy should be enough
  let maxOldTime = 300 //5 minutes
  let minAccuracy = 300 //300 metres
  if abs(location.timestamp.timeIntervalSinceNow) > maxOldTime
    || location.horizontalAccuracy > minAccuracy {
      return
  }

  for monitoredRegion in monitoredRegions {
    if monitoredRegion.containsCoordinate(location.coordinate) {
      activeRegions.insert(monitoredRegion.identifier)
    } else {
      activeRegions.remove(monitoredRegion.identifier)
    }
  }

}

func locationManager(manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {
  if let location = locations.last {
    manuallyUpdateActiveRegionsFromLocation(location)
  }
} 
```

# actionscript-3 - 更好：Actionscript 中的 switch-case 或 if-else

> ID：13984506
> 
> 赞同：0
> 
> 时间：2012-12-21T04:59:31.343
> 
> 标签：actionscript-3, apache-flex, conditional, conditional-statements, flex4.5

    我做了一个使用太多条件语句的应用程序。所以每次我有两个选择。使用**switch-case**或**if-else**，然后我很想知道它们之间的哪一个可以让我更好地执行我的应用程序。我搜索了很多，但他们都给了我不同的技术。我想知道actionscript 3。有人想帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:17:11.523

我真的怀疑性能差异（如果有的话）是否足够重要，除非您正在谈论一些您正在运行数百万次的循环。

相反，我会使用提供更高可读性的那个——通常，如果您有超过 3 个条件（if-else-else），我发现 switch-case 语法更容易阅读和维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:49:39.913

Switch 绝对比 if/elseif/else 更可取。

它使您的代码更易于阅读并且通常比 if/else 执行得更好，因为 if/else 可能必须通过许多 if 直到它实际运行一些代码。Switch 将直接跳转到您的代码（有点）。

# java - dwr 仅向特定客户端发送数据

> ID：13984511
> 
> 赞同：0
> 
> 时间：2012-12-21T04:59:52.840
> 
> 标签：java, javascript, dwr

我已经尝试过 dwr 示例聊天应用程序，我认为下面的代码将数据发送到所有连接的客户端。

```
Collection pages = wctx.getScriptSessionsByPage(currentPage);
    for (Iterator it = pages.iterator(); it.hasNext();)
    {
        ScriptSession otherSession = (ScriptSession) it.next();
        otherSession.addScript(script);
    } 
```

如果我是莱特，我怎么能使用 JSESSIONID 仅将数据发送到特定客户端？一个简单的例子可能会有帮助。

谢谢并恭祝安康

# c# - 将数组发布到 C# Web 服务对象问题

> ID：13984513
> 
> 赞同：1
> 
> 时间：2012-12-21T05:00:25.243
> 
> 标签：c#, jquery, ajax, json, web-services

当我将表单数据发布到我的网络服务时，我遇到了问题。当我调试 Web 服务时，参数 messagepost 的计数为 1，但对象数据为空，但是当我查看请求中的对象时，我可以看到该对象已填充。我一直在寻找和绞尽脑汁一个小时，但看不到我让它工作。所以也许这里有人可以帮助我。

Javascript

```
function getEmptyLeg() {

        var chkTail = $("#elTail").is(':checked');
        var chkType = $("#elType").is(':checked');
        var chkNBAA = $("#chkNBAA").is(':checked');
        var chkCategory = $("#elCategory").is(':checked');

        var itineraryList = new Array();

        var itinerary = new Object();
        itinerary.Time = "";
        itinerary.Arrival = $("#elTo").val();
        itinerary.Departure = $("#elFrom").val();
        itinerary.ArrivalDate = getDate("#elEndDate");
        itinerary.DepartureDate = getDate("#elStartDate");
        itineraryList.push(itinerary);

        var messagepost = new Object();
        messagepost.Types = "";
        messagepost.Categories = "";
        messagepost.ShowTail = chkTail;
        messagepost.ShowType = chkType;
        messagepost.SendToNBAA = chkNBAA;
        messagepost.DirectoryAircraft = false;
        messagepost.ShowCategory = chkCategory;
        messagepost.Price = $("#elPrice").val();
        messagepost.NBAAEmail = $("#txtEmail").val();
        messagepost.MessageItinerary = itineraryList;
        messagepost.AircraftID = $("select#elAircraft").val();                       

        return messagepost;
    }

function saveMessage() {

        var options = "";
        var type = $("#hdfType").val();
        var userid = $('#<%= hdfUserID.ClientID %>').val();
        var message = $("#<%= txtMessage.ClientID %>").val();
        var timezone = $('#<%= hdfTimezone.ClientID %>').val();

        $('#<%= sltUsers.ClientID %> option:selected').each(function (i) {
            options += $(this).val() + ",";
        });

        var messagepost = new Array();
        messagepost.push(getEmptyLeg());

        $.ajax({
            type: "Post",
            async: false,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Resources/MessageWebService.asmx/SaveMessage",
            data: "{ 'message':'" + message + "',"
                    + "'options':'" + options + "',"
                    + "'url':'" + $(location).attr('href') + "',"
                    + "'userid':'" + userid + "',"
                    + "'messageid':'" + 0 + "',"
                    + "messagepost:" + JSON.stringify(messagepost) + ","
                    + "'postType':'" + type + "' }",
            success: function (data) {                            

                    $('#messages').prepend($(data.d).fadeIn('slow'));

                    growlMessage('Message was successfully');
                },
            error: function (data) {
                showError(data.responseText);
            }
        });
    } 
```

网络服务

```
[WebMethod]
public string SaveMessage(string message, string options, string url, string userid, string messageid, List<MessagePost> messagepost, string postType) {
} 
```

来自 chrome 的请求

```
{ 'message':'empty leg','options':'Public,','url':'http://localhost/portal/quote.aspx?qid=254','userid':'d2703dd0-c743-4995-ac93-5cfab7fa5205','messageid':'0',messagepost:[{"Types":"","Categories":"","ShowTail":true,"ShowType":true,"SendToNBAA":true,"DirectoryAircraft":false,"ShowCategory":true,"Price":"2500","NBAAEmail":"chad.neiro@avianis.com","MessageItinerary":[{"Time":"","Arrival":"KSAN","Departure":"ENNA","ArrivalDate":"12/21/2012","DepartureDate":"12/21/2012"}]}],'postType':'4' } 
```

留言帖类

```
public class MessagePost
{        
    Boolean ShowTail { get; set; }
    Boolean ShowType { get; set; }
    Boolean SendToNBAA { get; set; }
    Boolean ShowCategory { get; set; }
    Boolean DirectoryAircraft { get; set; }

    string Types { get; set; }
    string Price { get; set; }
    string NBAAEmail { get; set; }        
    string AircraftID { get; set; }
    string Categories { get; set; }

    List<MessageItinerary> ItineraryList { get; set; }
}

public class MessageItinerary
{
    string Time { get; set; }
    string Arrival { get; set; }
    string Departure { get; set; }
    string ArrivalDate { get; set; }
    string DepartureDate { get; set; }
    string Preference { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:25:48.633

就像 saarps 在评论中建议的那样，我也相信这与 JSON 和数据的反序列化有关。

我很早就放弃了 WebMethods 中的参数，而是从 Request 中检索数据。例如，以下代码：

```
[WebMethod]
public string SaveMessage(string message) {
    //Do something
} 
```

而是这样写：

```
[WebMethod]
public string SaveMessage() {
    string message = HttpContext.Current.Request.Form["message"];
    //Do something
} 
```

# .net - 文化特定的 DateTime 字符串在平台之间不一致 (2)

> ID：13984515
> 
> 赞同：0
> 
> 时间：2012-12-21T05:00:52.233
> 
> 标签：.net, datetime, currentculture

这类似于[这个问题](https://stackoverflow.com/questions/10113239/culture-specific-datetime-string-is-inconsistent-between-platforms)，因此标题。

即使文化相同，服务器上的日期输出也不同。开发机和服务器都在 Windows 中设置了相同的数据格式；美国英语）。我已将 ShortDateString 的日期格式修改为“yyyy-MM-dd”。此更改仅在开发机器上生效，服务器仍以原始 en-US 格式显示值。

在开发机器上，我所要做的就是重新启动 IIS 以获取日期格式的任何更改。然而，服务器非常不情愿和固执。

以下是两台机器的一些输出：

在我的 Windows 7 开发机器上：

```
Current Culture: en-US
Current UI Culture: sv-SE

Short date format: yyyy-MM-dd
Long date format: 'den 'd MMMM yyyy
UI short date format: yyyy-MM-dd
UI long date format: 'den 'd MMMM yyyy

Decimal number: 1234.5
DateTime.Now: 2013-02-21 19:08:47
DateTime.Now.ToShortDateString() : 2013-02-21 
```

在 Windows 2008 R2 服务器上：

```
Current Culture: en-US
Current UI Culture: sv-SE

Short date format: yyyy-MM-dd
Long date format: 'den 'd MMMM yyyy
UI short date format: yyyy-MM-dd
UI long date format: 'den 'd MMMM yyyy

Decimal number: 1234.5
DateTime.Now: 2/21/2013 7:08:49 PM
DateTime.Now.ToShortDateString() : 2/21/2013 
```

区域和语言下的所有设置都是相同的。有任何想法吗？

**更新** 用更多信息更新了问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T08:19:04.027

可能是因为在您的服务器上 IIS 在其他帐户（不是您自己的帐户）上运行，并且会忽略您的本地设置...可以解释问题吗？

# javascript - Javascript - 如何将变量分隔符用于拆分功能？

> ID：13984527
> 
> 赞同：0
> 
> 时间：2012-12-21T05:01:45.760
> 
> 标签：javascript, pattern-matching

我有一些使用 split 的函数，但我希望它`separator`是一个变量。`separator`将在几个地方使用，并且只需要更改一次变量而不是到处更改硬代码会很好。

但是，当然，它不起作用。该模式看起来是正确的，但`split`定义拆分的变量肯定有一些问题。

这是我在 Google Chrome 控制台中进行的一些测试。

```
separator = '|'; // separator to use
var pattern = '/\\' + separator + '\\s*/'; // define pattern
undefined
pattern;
"/\|\s*/"
// pattern is correct
// now define function with constant... variable version commented:
function split( val ) {
        //var pattern = '/\\' + separator + '\\s*/'; 
        return val.split( /\|\s*/ );
        //return val.split( pattern );
    }
undefined
split('asdf|jkl');
["asdf", "jkl"]
// function worked as expected
// now uncomment the variable portions:
function split( val ) {
        var pattern = '/\\' + separator + '\\s*/'; 
        //return val.split( /\|\s*/ );
        return val.split( pattern );
    }
undefined
split('asdf|jkl');
["asdf|jkl"]
// not as expected. string is not split into array 
```

我认为这与拆分功能有关。我怎样才能让它工作？请注意，我认为我需要这样做的唯一原因是因为我希望能够轻松更改`separator`. 如果不是这样，我可以硬编码所有可以工作的东西。

编辑：我不在乎它是否使用正则表达式。但它需要拆分字符串`separator`并确保值被修剪掉额外的空格。

另外，我在 jQuery UI 页面之后为我的代码建模以进行自动完成，[这里](http://jqueryui.com/autocomplete/#multiple-remote)。这是他们拥有的功能。我不知道他们为什么定义自己的`split`.

```
function split( val ) {
     return val.split( /,\s*/ );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:17:28.160

连接字符串，并使用它来创建新`RegExp`obj 的实例。

```
function split( val ) {
        var pattern = new RegExp('\\' + separator + '\\s*'); 
        return val.split( pattern );
} 
```

## 编辑

请注意，在这个特定示例中，String.prototype.split() 似乎没有任何值。

如果您想为某种类型的所有拆分设置限制，这将更有用：

```
function split( val ) {
        var pattern = new RegExp('\\' + separator + '\\s*'); 
        return val.split( pattern , 3);
} 
```

无需写：

```
strVar.split(pattern, 3); 
```

是的，该限制可以存储为变量并被引用，但是您必须在要使用它的每个函数的范围内公开该变量。

如果你想改变它，让它需要一个字符串数组来拆分呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:34:22.610

您可以在字符串或正则表达式上拆分，但不要将它们混合在一起-

```
var separator='|', val='Split | on | the | pipes';
val.split(RegExp('\\' + separator + '\\s*')).join('\n');

/*  returned value: (String)
Split 
on 
the 
pipes
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:06:22.607

请使用`split()`并且不要费力地制作自己的功能

[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

一个简单的例子

```
<p id="demo">Click the button to display the array values after the split.</p>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
var str="How are you doing today?";
var n=str.split(" ");
document.getElementById("demo").innerHTML=n;
}
</script> 
```

然后只需将模式放在`split()`参数上。确保转义您将放在参数上的任何字符，因为`split()`认为您输入了正则表达式。您的`|`分隔符是一个正则表达式特殊字符，您必须使用反斜杠对其进行转义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T06:01:27.907

最好的方法是只使用[String.split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)因为它可以通过使用字符串本身进行拆分。

但是，当您希望探索 RegEx 时，您需要确保在尝试拆分之前正确转义分隔符：

这是一个工作函数，其中分隔符可以是任何字符串：

```
function split(val, separator) {
  var separator = separator.replace(/([^\w\s])/g, '\\$1');
  return val.split(new RegExp(separator));
}

split("String|$Array|$Objects", "|$");
> Result ["String", "Array", "Objects"] 
```

# wordpress - 用于显示数据的 Wordpress 自定义字段

> ID：13984531
> 
> 赞同：0
> 
> 时间：2012-12-21T05:01:56.147
> 
> 标签：wordpress

在我的主题中，我有自定义字段“ext_url”。现在，如果我不添加“ext_url”自定义字段，我想获取帖子网址。

我试过

```
<?php if(get_post_meta($post->ID, 'ext_url', true)): ?>
<?php else : ?>
<?php the_permalink(); ?>
<?php endif; ?> 
```

当我不添加自定义字段时，它会显示帖子 URL。但是，当我添加自定义字段时，它显示为空白。任何解决方案？

更新：我找到了一个代码

```
<?php 
    $url = get_post_meta($post->ID, 'ext_url', true); 

    if ($url) {
        echo "<p><a href='$url'>External URL</a></p>";
    }
?> 
```

但是，它适用于显示自定义字段。我怎样才能在这里添加其他功能？对不起，我没有 PHP 经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:21:06.013

如果您希望它显示来自自定义字段的数据，您应该添加一行来回显结果。

```
<?php
$ext_url = get_post_meta( $post->ID, 'ext_url', true );

if ( $ext_url ) {
    echo $ext_url;
} else {
    the_permalink();
}
?> 
```

# php - 手动设置 $_FILES 数组并使用 move_uploaded_file 函数

> ID：13984536
> 
> 赞同：2
> 
> 时间：2012-12-21T05:02:28.943
> 
> 标签：php, file, upload

如果我不使用上传表单而只设置`$_FILES`数组，我就不能使用`move_uploaded_file()`保存功能：

```
move_uploaded_file($_FILES['uploaded']['tmp_name'], $target); //false 
```

这种骗术怎么弄！！！这意味着我想`$_FILES`手动设置，但我也想使用`move_uploaded_file()`功能。

可能吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:05:51.167

不，这是不可能的。取自**[手册](http://php.net/manual/en/reserved.variables.files.php)**

> `$_FILES`是一个“超全局”或自动全局变量。这仅仅意味着它在整个脚本的所有范围内都可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:11:42.643

不，这根本不可能，我们可以手动设置所有值`$_FILES`作为变量。但是对于移动文件`temp_name`很重要。

# magento - 以编程方式在 Quote 中添加捆绑产品的子产品

> ID：13984542
> 
> 赞同：0
> 
> 时间：2012-12-21T05:02:58.160
> 
> 标签：magento, magento-1.7, magento-1.4, magento-1.5, magento-1.6

我正在尝试以编程方式创建订单。它适用于简单的产品，但是当我尝试使用捆绑产品时，它不会添加子产品。

下面是代码

```
$quote = Mage::getModel('sales/quote')->setStoreId(Mage::app()->getStore('default')->getId());

$newProd = Mage::getModel('catalog/product')->load($sku);

$option= array(
        "bundle_option" => array(
        "35" => 66, 
        "36" => 67
        ),
        'qty' => 1
    );

$quote->addProduct($newProd, new Varien_Object($option)); 
```

请任何人有解决方案或我错在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:20:16.073

我认为您应该检查 Bundle-options 数组，因为在 Bundled 项目中有各种输入类型，例如单选框（需要一个输入）复选框（需要多个产品），同样有下拉选项和多项选择。

```
[bundle_option] => Array
    (
        [5] => 13
        [6] => Array
            (
                [0] => 23
            )

        [8] => Array
            (
                [0] => 37
            )

        [12] => Array
            (
                [0] => 56
            )

    )

[bundle_option_qty] => Array
    (
        [5] => 1
        [6] => Array
            (
                [23] => 1
            )

        [8] => Array
            (
                [37] => 1
            )

        [12] => Array
            (
                [56] => 1
            )

    ) 
```

这是一个捆绑产品选项，其中 [5] 是一个单选按钮，将有一个产品，[6]，[8] 是 checkox，其中可以有更多产品，依此类推。

同样，您必须保持产品数量，如上所示。

希望这会对你有所帮助。

# jquery - 如何在静态方法中绑定转发器

> ID：13984544
> 
> 赞同：1
> 
> 时间：2012-12-21T05:03:07.193
> 
> 标签：jquery, asp.net, repeater

我正在从客户端（aspx）传递一个参数，并且在.cs文件中我正在调用一个webmethod，我只能通过将其声明为静态来调用它，并且我无法在statix方法中绑定转发器..我该怎么做这..或告诉我任何其他方法来做到这一点。

这是调用webmethod的jquert代码

```
 function ShowPackageProduct(Id) {
        alert(Id);
        PageMethods.GetProductsInPackage(Id, function () {

        });

    } 
```

这是我的 .cs 代码

```
 public static void GetProductsInPackage(int PackageId)
    {
        Packages objpackage;
          try
        {
            objpackage = new Packages();
            objpackage.Package_id = PackageId;

            objpackage = objpackage.GetAllProductInPackage();
            //Repeater rpt = (Repeater)Page.FindControl("rptPackageDetails");
            //rpt.DataSource = objpackage;
            //rpt.DataBind();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:29:32.223

您可以通过在回发时绑定到转发器来解决此问题。

假设您将按钮定义为这样

```
<asp:Button runat="server" Text="TEST" ID="ShowAll" OnClick="ShowAll_Click"/> 
```

然后你在后面的代码中定义方法

```
protected void ShowAll_Click(object sender, EventArgs e)
        {
            //Bind to a repeater and other stuff

        } 
```

# c# - 使用会话禁用按钮

> ID：13984546
> 
> 赞同：0
> 
> 时间：2012-12-21T05:03:30.953
> 
> 标签：c#, asp.net, session, jqgrid

我有一个 jqgrid 和按钮图像列，看起来像这样：

按钮 | 样品1 | 红色
按钮 | 样品2 | 蓝色
按钮 | 样品3 | 红色
按钮 | 样品4 | 红色
按钮 | 样品5 | 蓝色
按钮 | 样品6 | 绿色

需要做的是：

如果用户的会话 ID 为红色 Session["Color"] = red;

那么所有不是红色的按钮都将被禁用。与其他颜色相同。

但如果会话颜色不存在。它只会隐藏该列

这是我的示例代码：

```
var sessionColor = '<%=Session["Color"]%>';
    if (sessionColor == 'red') { 
                    // code here
                    // hide button green and blue
                   }
                   if (sessionColor == 'green') {
                       // code here
                       // hide button red and blue
                   }
                   if (sessionColor == 'blue') {
                       // code here
                       // hide button gren and blue
                   }
                   else { //hide all button} 
```

问题：如果具有“红色”会话的用户将登录，我将如何禁用该按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:37:44.923

尝试按钮收集创意。请参阅下面的代码。

```
var sessionColor = Session["Color"].ToString();
                if (sessionColor == "red")
                {
                    var buttons = ButtonPanel.Controls.OfType<Button>();
                    foreach (var button in buttons)
                    {
                        if (button.BackColor == Color.Red)
                        {
                            button.Visible = true;
                        }
                        else
                        {
                            button.Visible = false;
                        }
                    }

                }
                else if (sessionColor == "green")
                {
                    var buttons = ButtonPanel.Controls.OfType<Button>();
                    foreach (var button in buttons)
                    {
                        if (button.BackColor == Color.Green)
                        {
                            button.Visible = true;
                        }
                        else
                        {
                            button.Visible = false;
                        }
                    }
                }
                else if (sessionColor == "blue")
                {
                    var buttons = ButtonPanel.Controls.OfType<Button>();
                    foreach (var button in buttons)
                    {
                        if (button.BackColor == Color.Blue)
                        {
                            button.Visible = true;
                        }
                        else
                        {
                            button.Visible = false;
                        }
                    }
                }
                else
                {
                    var buttons = ButtonPanel.Controls.OfType<Button>();
                    foreach (var button in buttons)
                    {
                        button.Visible = false;

                    }
                } 
```

# c# - 我将如何通过 WCF 管理来自服务的网格视图中的数据

> ID：13984547
> 
> 赞同：1
> 
> 时间：2012-12-21T05:03:36.993
> 
> 标签：c#, asp.net, wcf

我想创建一个从数据库中获取数据并在 GridView 的客户端页面上显示它们的服务，但是我有一个问题，我将如何通过 Grid View 中的数据表管理来自服务的数据，请帮助我。

以下是我的代码：

名称为“Service.svc”的服务页面

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.ServiceModel.Web;
using System.Text;
sing System.Data;
using System.Data.SqlClient;
using System.Web;
using System.Web.Configuration;
[ServiceContract(Namespace = "myService")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service
{
   static private string sqlConString
   {
       get { return WebConfigurationManager.ConnectionStrings["SQLConnectionString"].ConnectionString; }
    }
    SqlConnection conn = new SqlConnection(sqlConString);

    [OperationContract]
    public DataTable FatchJobProporties()
    {
        conn.Open();
        try
        {
            string selQuery = "SELECT [job_title],[job_company],[job_vacancies],[job_description] FROM [dbo].[tb_job]";

         SqlCommand cmd = new SqlCommand(selQuery, conn);
         SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();
            da.Fill(ds, "tb_Job");
            DataTable dt = ds.Tables["tb_Job"];
            return dt;
        }
        catch (Exception ex)
        {
            throw ex;
        }

       finally
        {
            conn.Close();
            conn.Dispose();
        }
}

[DataContract]
public class JobProporties
{
    string jobTitle = "my";
    string jobCompany = "my";
    string jobDec = "my";
    int jobVacant = 0;

    [DataMember]
    public string JobTitle
   {
        get { return jobTitle; }
        set { jobTitle = value; }
    }

    [DataMember]
    public string JobCompany
    {
        get { return jobCompany; }
        set { jobCompany = value; }
    }

   [DataMember]
    public int JobVacant
    {
        get { return jobVacant; }
        set { jobVacant = value; }
    }

    [DataMember]
    public string JobDec
    {
        get { return jobDec; }
        set { jobDec = value; }
    }
} 
```

此服务接收页面名称为“default.aspx”

```
![<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head runat="server">

    <title></title>

<script>

    function myFunc() {

        var proxy = new myService.Service();

        proxy.FatchJobProporties(onSuccess, onFail, null);

    }

    function onSuccess(result) {

        document.getElementById("tbDiv").innerHTML = result;

    }

    // This function is called if the service call fails

    function onFail() {

        alert("Fail to Fetch");
    }

</script>

</head>

<body>

    <form id="form1" runat="server">

    <div>

        <asp:ScriptManager ID="ScriptManager1" runat="server">

            <Services>

                <asp:ServiceReference Path="Service.svc" />

            </Services>

        </asp:ScriptManager>

        <input id="Button1" type="button" value="button" onclick="return myFunc();" />

        <div id="tbDiv">

        </div>

    </div>

    </form>

</body>

</html>][1] 
```

输出：整个数据在一行中；输出见图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:15:55.630

在返回类型中使用 List 类来返回多条记录。

试试这个代码。

```
[DataContract]
public class Customer
{
    [DataMember]
    public int CustomerID{ get; set; }    }

    [DataMember]
    public string CustomerName{ get; set; }    
}

public interface ICustomerService
{

   [OperationContract]
   List<Customer> GetAllCustomer();
}

public class CustomerService:ICustomerService
{

   List<Customer> GetAllCustomer()
   {
       List<Customer> customers = new List<Customer>();

       using(SqlConnection con = new SqlConnection("Database Connection String"))
       {
        con.Open();     
        using(SqlCommand cmd = new SqlCommand("Select * from Customer",con))
        {
            SqlDataReader dr = cmd.ExecuteReader();

            while(dr.Read())
            {
                Customer customer = new Customer();
                customer.CustomerID =Parse.Int(dr[0].ToString());
                customer.CustomerName =dr[1].ToString(); 
                customers.Add(customer);
            }
        }
       }
    return customers;
  }
} 
```

享受！！！！

谢谢CK Nitin (TinTin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:10:40.820

什么时候添加 WCF 的服务引用。你可以这样做

```
IList<Customer> customers = WCFServiceClientObject.GetAllCustomers()
myDataGrid.DataSource = customers;
MyDataGrid.DataBind(); 
```

谢谢

CK 尼丁 (TinTin)

# ruby-on-rails - Heroku 上的 Thin vs Unicorn

> ID：13984549
> 
> 赞同：34
> 
> 时间：2012-12-21T05:03:40.970
> 
> 标签：ruby-on-rails, heroku, thin, unicorn

只是想获得人们对使用 Unicorn vs Thin 作为 Rails 服务器的意见。我在网上找到的大多数文章/基准似乎都很不完整，所以最好有一个集中的地方来讨论它。

Unicron 是多进程服务器，而 Thin 是基于事件/非阻塞的服务器。基于事件的服务器很棒......如果您的代码是异步/非阻塞的 - vanilla rails 是阻塞的。因此，除非您使用非阻塞 Rails 库，否则我真的看不到使用 Thin 的优势。更糟糕的是，在非阻塞服务器中，如果您的 i/o 循环阻塞，您将阻塞整个循环，并且在阻塞调用返回之前无法处理更多请求。阻塞库会变慢！

为什么 Heroku 选择 Thin 作为他们的默认服务器（对于 cedar）？他们是聪明人，所以我相信他们是有原因的。

Bellow 是一个链接，建议用 4 个 Unicorn 工人替换 Thin - 这对我来说非常有意义。 [Heroku 上的 4 名 Unicron 工作人员](https://stackoverflow.com/questions/9792290/on-heroku-cedar-should-i-use-thin-or-unicorn)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-25T01:00:08.297

Thin 易于配置 - 不是最优的，但它只适用于 Heroku 环境。

独角兽可以更高效，但需要配置：多少工人？预加载应用程序？你选什么？

我已经发布了 Unicorn Heroku 应用程序，其中 worker 设置为 3、5 和 8 - 仅基于每个应用程序的大小 - 有多少代码、使用了多少内存以及你获得了多少流量来选择这个数字，你需要随着时间的推移进行监控，以确保您的号码正确，并且您的应用程序没有内存不足。

Preload false - 这将使您的应用程序启动速度变慢，但是当 Unicorn 重新启动工作人员时，这对于网络连接（memcache、postgres、mongo 等）来说“更安全”

Preload true - 这更好，但您需要在前叉代码和后叉代码中正确处理服务器重新连接。

Thin 没有开箱即用的这些问题，但您只能获得执行过程。

总结： 开箱即用地配置 Unicorn 以使其对所有人都有效（或完全）非常困难，而 Thin 可以通过更少的支持请求让人们运行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-13T04:49:23.710

最近（仅几个月前）[Phusion Passenger](https://www.phusionpassenger.com/)背后的人增加了对 Heroku 的支持。绝对这是您应该尝试的替代方案，看看是否符合您的需求。

即使使用 1 dyno 也非常快，响应时间的下降是显而易见的。一个简单的[Passenger Ruby Heroku Demo](https://github.com/phusion/passenger-ruby-heroku-demo)托管在github 上。

Heroku 上的乘客声称的主要好处是：

*   **通过 Nginx 加速静态资产**- 不要让您的 Ruby 应用程序提供静态资产，让 Nginx 为您做这件事，并为真正重要的任务卸载您的应用程序。Nginx 会做得更好。

*   **多个工作进程**- Phusion Passenger 不是在一个测功机上只运行一个工作程序，而是在一个测功机上运行多个工作程序，从而充分利用其资源并为您带来更多收益。这种方法类似于独角兽的。但与 Unicorn 不同的是，Phusion Passenger 会根据当前流量动态调整工作进程的数量，从而在不需要时释放资源。

*   **内存优化**- Phusion Passenger 使用的内存少于 Thin 和 Unicorn。它还支持与代码预加载相结合的写时复制虚拟内存，从而使您的应用程序在 Ruby 2.0 上运行时使用更少的内存。

*   **请求/响应缓冲**- 包含的 Nginx 缓冲请求和响应，从而保护您的应用免受慢速客户端（例如移动网络上的移动设备）的影响并提高性能。

*   **带外垃圾收集**- Ruby 的垃圾收集器很慢，但为什么要让访问者因响应时间长而烦恼呢？通过在正常的请求-响应周期之外运行垃圾收集来解决这个问题！这个概念最初是由 Unicorn 提出的，在此基础上进行了改进：Phusion Passenger 确保同时只有一个请求在运行带外垃圾收集，从而消除了 Unicorn 带外垃圾收集的所有问题。

*   **JRuby 支持**- Unicorn 是比 Thin 更好的选择，但它不支持 JRuby。Phusion 乘客可以。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-13T22:41:03.123

Heroku 不使用智能路由 - 无论 dyno 是否忙，它都会随机分配作业给 dyno。因此，如果您的测功机不能同时处理多个工作，即使您为许多其他免费的测功机付费，您也会得到延迟（可能是巨大的延迟）。“没错——如果你的应用需要 80 个 dynos 和智能路由器，它需要 4,000 个随机路由器。” [http://news.rapgenius.com/James-somers-herokus-ugly-secret-lyrics](http://news.rapgenius.com/James-somers-herokus-ugly-secret-lyrics)

Heroku 表示他们正在为此努力，他们的计划是让 Unicorn 的使用变得更容易。他们基本上说：“哎呀，几年来我们都没有注意到这是一个问题......现在我们看起来，这对 Thin 来说绝对是一个问题......所以我想你需要使用不同的程序而不是我们一直在推动的一个。” [http://news.rapgenius.com/Jesper-joergensen-routing-performance-update-lyrics](http://news.rapgenius.com/Jesper-joergensen-routing-performance-update-lyrics)

来自 Heroku 的官方解释（上面的第二个链接）：“事实上，Rails 还不可靠地支持并发请求处理。这使得 Rails 开发人员无法利用 Cedar 堆栈提供的额外并发功能，除非他们迁移到并发 Web像 Puma 或 Unicorn 这样的服务器。

使用 Thin 部署到 Cedar 的 Rails 应用程序很快就会出现请求队列问题。因为 Cedar 路由器不再代表应用程序进行任何排队，所以在 dyno 排队的请求必须等到单个 Rails 进程通过队列。许多客户都遇到了这个问题，我们未能采取行动并为他们提供更好的方法来在 Cedar 上部署 Rails 应用程序。”

同样令人感兴趣的是，他们的性能工具，包括 New Relic，并没有报告在 dyno 队列中花费的时间。 [http://news.rapgenius.com/Lemon-money-trees-rap-genius-response-to-heroku-lyrics](http://news.rapgenius.com/Lemon-money-trees-rap-genius-response-to-heroku-lyrics)

哎呀。

# javascript - iOS 将值返回给异步 javascript 调用

> ID：13984550
> 
> 赞同：3
> 
> 时间：2012-12-21T05:03:40.497
> 
> 标签：javascript, ios, uiwebview

下图是调用iOS和Android原生函数的js代码，这个函数是从另一个js方法调用的。由于这个函数的js调用是异步的。我们不能在iOS中返回任何值。但在Android中我们可以返回值没有任何问题。在 iOS 控件中等待直到我得到响应。实际上我们不应该修改这个函数调用，否则我们可以从调用者函数传递一个回调方法。请帮我解决这个问题

```
VestaPhoneBridge.IsAvailable = function(featureName)
{
  if(isAndroid()) {
    if(typeof VestaJavascriptInterface !== 'undefined')
    {
      return VestaJavascriptInterface.isAvailable(featureName);
    }
    return false;
  }
  else {                
    bridge.callHandler('initiateIsAvailableFunction',featureName,function(response)  {
      return response;
    })
  }    
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:25:00.783

我假设你在谈论这条线。

```
bridge.callHandler('initiateIsAvailableFunction',featureName,function(response)  {
  return response;
}) 
```

问题很可能是您的`return`. 只要异步请求完成，您作为回调传递的匿名函数就会被调用。这意味着它将被`callHandler`代码路径中的某些东西调用。

然后，您的函数将返回该函数，而不是该`VestaPhoneBridge.IsAvailable`函数。您的回调应该设置值并执行更改而不是返回值。

**例子**

```
function Foo(callback) {
  callback(); // 42 is returned here, but not assigned to anything!
}

function Bar() {
  var baz = Foo(function() { 
    // You want to return 42\. But here you are in a totally different function
    // scope! You are in the anonymous function's scope, not Bar, so you are not
    // returning anything to the caller of Bar().
    return 42; 
  }
  alert(baz); // Foo doesn't return anything, so this is undefined!
}

alert(Bar()); // This is also undefined, nothing was returned. 
```

# php - 如何将 PHP url 变量传递给 AJAX？

> ID：13984559
> 
> 赞同：1
> 
> 时间：2012-12-21T05:04:30.627
> 
> 标签：php, ajax, jquery

如何将 PHP URL 变量传递给 AJAX，以便在同一页面中加载页面内容？这是我正在尝试做的一个示例..例如，我正在尝试将“profile.php?id=”设置为 AJAX，以便加载页面内容..但是，我首先开始使用循环..我不知道这是否是正确的方法..

下面是代码

```
<div id="myDiv"><h2>Let AJAX change this text</h2></div>

<?php
require('../madscore/database/connect.php');
database_connect();
$query = "select * from Entertainers";
$result = $connection->query($query);
$row_count =$result->num_rows;

for($i = 1; $i <= $row_count; $i++)
  {
   $row = $result->fetch_assoc();
    //echo $i. "<br />";
   // echo $row['Name']."<br />";
   // echo $row['Profession']."<br />";
   // echo $row['Score']."<br />";

?>

<!DOCTYPE html>
<html>
<head>
<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","profile.php?id="<?php echo $row['ID'] ?>, true");
xmlhttp.send();
}
</script>

<?php  echo "<a href='/profile.php?id=".$row['ID']."' onclick='loadXMLDoc()'><img src ='../".$row['Picture']."' width='100' height='100' /> </a>"; } ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:06:55.930

改变这个——

```
xmlhttp.open("GET","profile.php?id="<?php echo $row['ID'] ?>, true"); 
```

对此——

```
xmlhttp.open("GET","profile.php?id=<?php echo $row['ID'] ?>", true); 
```

根据评论编辑 - 试试这个 -

```
myid = <?php echo $row['ID'] ?>; 

//myid = "<?php echo $row['ID'] ?>";  //Or this if its a string type 

xmlhttp.open("GET","profile.php?id="+myid, true); 
```

聊了这么久——

```
<?php  echo "<a href='/profile.php?id=".$row['ID']."' onclick='loadXMLDoc(".$row['ID'].")'><img src ='../".$row['Picture']."' width='100' height='100' /> </a>"; } ?> 
```

传递`$row['ID']`给您的 loadXMLDoc() 方法。

最终代码 ---

```
<div id="myDiv"><h2>Let AJAX change this text</h2></div>

<?php
require('../madscore/database/connect.php');
database_connect();
$query = "select * from Entertainers";
$result = $connection->query($query);
$row_count =$result->num_rows;

for($i = 1; $i <= $row_count; $i++)
  {
   $row = $result->fetch_assoc();      
?>

<!DOCTYPE html>
<html>
<head>
<script>
function loadXMLDoc( myid )
{
var xmlhttp;
var myloveid = id;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","profile.php?id="+myloveid, true");
xmlhttp.send();
}
</script>

<?php  echo "<a href='/profile.php?id=".$row['ID']."' onclick='loadXMLDoc(".$row['ID'].")'><img src ='../".$row['Picture']."' width='100' height='100' /> </a>"; } ?>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:30:04.890

替换这个

```
xmlhttp.open("GET","profile.php?id="<?php echo $row['ID'] ?>, true"); 
```

有了这个

```
xmlhttp.open("GET","profile.php?id=<?php echo $row['ID']; ?>, true"); 
```

`;`非常重要。
如果您不写它，那么它将不会回显该值。

# mysql - 如何转义mysql jdbc连接字符串中的特殊字符

> ID：13984567
> 
> 赞同：9
> 
> 时间：2012-12-21T05:05:36.710
> 
> 标签：mysql, jdbc, connection

我正在尝试连接到远程数据库。我确定远程数据库为我提供了所有权限。但是当我尝试通过`jdbc connection`. 我的密码包含，，`* and & symbol`我认为这是问题的原因`error`。但我不知道该怎么做`escape those characters`。请帮忙

```
java.sql.SQLException: Access denied for user 'myusername'@'myhost' (using password: YES)

"jdbc:mysql://myhost/mydb?user=myusername&password=my&password*" 
```

请帮忙

问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-12-16T09:51:31.210

JDBC 连接字符串采用 url 格式，因此您必须对所有参数使用 URL 编码值。在您的情况下，连接字符串应如下所示：

```
"jdbc:mysql://myhost/mydb?user=myusername&password=my%26password%2A" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-15T10:19:52.600

可以使用[URLEncoder ：](https://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html)

```
String connectionString = "jdbc:mysql://myhost/mydb?" + URLEncoder.encode("user=myusername&password=my&password*", "UTF-8"); 
```

# jquery - 除了其他选择器之外，还匹配 jquery 选择器中的页面标题

> ID：13984574
> 
> 赞同：1
> 
> 时间：2012-12-21T05:06:41.203
> 
> 标签：jquery

我有这个默认的 jQuery 选择器（一个 div 元素）来匹配一个特定的元素：

```
$('.myselectorid') 
```

然而，这个“myselectorid”出现在网站的不同页面中。我正在考虑是否可以将页面标题选择器添加到上述原始选择器，以便我可以仅在特定页面上执行我的 jQuery 实现（由页面标题指定）。

我还需要将它们全部组合为一个 jQuery 选择器。

我也知道要检索页面标题，它会是这样的：

```
$('html head title').text(); 
```

但是，我不确定如何将上述选择器与我的原始选择器组合为一个新选择器。例如，假设我希望它匹配标题为“这是我的页面标题”的页面上的选择器，我可以这样做吗？

```
$('.myselectorid[html head title="This is my page title"]') 
```

如果不是，我将如何做到这一点，以便所有这些都显示为一个组合选择器（不使用 .add 等）并且它也与页面标题匹配？

我不是 jQuery 选择器的专家，如果有人能分享一些关于这种方法的见解，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:11:52.250

我会在 body 标签中添加一个类，然后根据我所在的页面检查是否应该运行该代码。

```
if ($("body.className").length > 0) {
    // Place the logic pertaining to the page with the class
    //$('.myselectorid') code here
} 
```

请参阅此[问题](https://stackoverflow.com/questions/8410298/one-js-file-for-multiple-pages)以了解有关此方面的更多想法。

# jquery - 在 jquery 中创建所有部分 id 的数组

> ID：13984577
> 
> 赞同：0
> 
> 时间：2012-12-21T05:06:54.557
> 
> 标签：jquery

我正在构建一个涉及大量动画的网站。我需要在页面中创建一个包含所有部分 id 的数组。我真的不知道该怎么做，但很确定这是正确的方向。我首先只是想获得这些值：

```
 var $find = $('body').find('section[id]'); 
```

我试过提醒输出，我只是得到对象 Object? 有人可以让我朝着正确的方向前进。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:09:04.180

要创建你可以`array`使用`ids`jQuery [**map()**](http://api.jquery.com/jQuery.map/)

**[现场演示](http://jsfiddle.net/rzVe3/2/)**

```
ids = $('body').find('section').map(function() {
    return this.id;
})

$.each(ids, function(idx, el) {
    alert(el);
})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:10:07.080

你可以试试下面的代码

```
var IDs = [];
$('body').find("section").each(function(){ IDs.push(this.id); }); 
```

它将所有部分的 ID 放入 IDs 数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:10:16.637

这将创建一个包含所有 id 的数组。

```
var arr = $.map($("section[id]"), function(o, i){
    return o.id;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T05:20:34.483

您的问题包含答案本身。`var $find`已经是一个包含所有部分的 id 的对象。请参见以下代码：

```
​$sections = ​$("body").find("section");
$sections.each(function(){
    console.log($(this).attr("id"));
}); 
```

查看[**此**](http://jsfiddle.net/arvind07/RcVa5/1/)小提琴以获取更多信息。​</p>

# html - 跨所有浏览器的 CSS 对齐

> ID：13984580
> 
> 赞同：1
> 
> 时间：2012-12-21T05:07:20.987
> 
> 标签：html, css, internet-explorer, google-chrome, alignment

我在所有浏览器中对齐输入文本字段、密码文本字段和登录按钮时遇到问题。如果它适用于一种浏览器，则它不适用于另一种浏览器。有什么解决办法吗？

它在**谷歌浏览器中的工作原理：**

```
header #login_button
{
    padding: 8px;
    border-radius: 0px 6px 6px 0px;
    float: right;
    margin-top: 2px;
}

header input[type=submit]
{
    border: none;
    border-radius: 3px;
    padding: 4px 8px;
    font-weight: bold;
    font-size: 10px;
} 
```

它在**Internet Explorer中的工作原理**

```
header #login_button
{
    padding: 9px;
    border-radius: 0px 6px 6px 0px;
    float: right;
}

header input[type=submit]
{
    border: none;
    border-radius: 3px;
    padding: 4px 8px;
    font-weight: bold;
    font-size: 9px;
} 
```

以及它在**Firefox中的工作原理**

```
header #login_button
{
    padding: 7px;
    border-radius: 0px 6px 6px 0px;
    float: right;
}

header input[type=submit]
{
    border: none;
    border-radius: 3px;
    padding: 4px 8px;
    font-weight: bold;
    font-size: 9px;
} 
```

简单总结一下区别：

**铬要求：**

```
font-size:10px;
padding: 8px;
margin-top: 2px; 
```

**火狐需要：**

```
font-size: 9px;
padding: 7px; 
```

**IE 要求：**

```
font-size: 9px;
padding: 9px; 
```

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:49:53.587

我认为您不需要为不同的浏览器编写不同的样式。您可以使用类似`normalize.css`或`reset.css`来自以下任何内容的内容。这些 CSS 文件具有必要的样式和技巧，以使您的 html 在所有浏览器中看起来几乎完全相同。

[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

[http://www.cssreset.com/](http://www.cssreset.com/)

希望有帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-21T05:17:20.457

你应该这样使用：

我忘了提，复制并粘贴下面的行，里面和标签然后`.webkit`就可以了

```
 <pre>
    <script src="http://github.com/rafaelp/css_browser_selector/raw/master/css_browser_selector.js" type="text/javascript"></script>
    </pre> 
```

```
标题输入[类型=提交]{
    字体大小：10px；/* 标准 */
    font-size: 10px\9 /* IE 8 及以下*/
    填充：9px\9；/* IE 8 及以下 */
    *填充：15px\9；/* IE 7 及以下 */
    _padding: 16px\9; /* IE 6 */
}

```

**对于铬：**

```
.webkit 标头输入[type=submit] {
  字体大小：10px；
  填充：8px；
  边距顶部：2px；
}

```

[参考链接](http://rafael.adm.br/css_browser_selector/)

# java - 在android中将字符串转换为bigdecimal

> ID：13984581
> 
> 赞同：4
> 
> 时间：2012-12-21T05:07:22.497
> 
> 标签：java, android, string, converter, bigdecimal

嗨，我如何在 android 中将字符串转换为 bigdecimal。

这是我的第一个活动：

```
public class ViewCartActivity extends Activity {

String mGrandTotal;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewcartactivity);

    ListView mLstView1 = (ListView) findViewById(R.id.listView1);
    TextView mTxtViewGrandTotal = (TextView) findViewById(R.id.mTxtViewGrandTotalValue);
    Button mBtnSubmit = (Button) findViewById(R.id.mBtnSubmit);

    ViewCartAdapter mViewCartAdpt = new ViewCartAdapter(
            ViewCartActivity.this);

    mLstView1.setAdapter(mViewCartAdpt);

    if (Constants.mItem_Detail.size() > 0) {
        Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0)
                .get(SingleMenuItem.KEY_TOTAL));
        for (int i = 1; i < Constants.mItem_Detail.size(); i++) {
            mGTotal = mGTotal
                    + Double.parseDouble(Constants.mItem_Detail.get(i).get(
                            SingleMenuItem.KEY_TOTAL));
        }

        mGrandTotal = String.valueOf(mGTotal);
        mTxtViewGrandTotal.setText("$" + mGrandTotal);
    }

    mBtnSubmit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

             Intent i = new Intent(getApplicationContext(), CustomerLogin.class);
            i.putExtra("GrandTotal", mGrandTotal);
                startActivity(i);

        } 
```

CustomerLogin.java（下一个活动）：

```
 String mGrandTotal;
      /** Called when the activity is first created. */
       @Override
       public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.customer_login);
       Bundle b = getIntent().getExtras();

         String total = b.getString("GrandTotal");
         -----
       ------
           if(isUserValidated && isPasswordValidated)
              {
            String s= getIntent().getStringExtra(mGrandTotal);
                Intent intent = new Intent(CustomerLogin.this,PayPalIntegrationActivity.class);
                intent.putExtra(mGrandTotal, s);

           startActivity(intent);

              } 
```

PayPalIntegrationActivity.java（第三个活动）看起来像：

```
public class PayPalIntegrationActivity extends Activity implements OnClickListener {

 String mGrandTotal;
    private PayPal mPayPal;
   private CheckoutButton launchPayPalButton;

@Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_pay_pal_integration);
       -------
        ------
          @Override
    public void onClick(View v) {

            payWithPaypal();
        }

         private PayPalPayment  payWithPaypal() {
                PayPalPayment newPayment = new PayPalPayment();
                Intent in = getIntent();
                String total = in.getStringExtra(mGrandTotal);
                BigDecimal sPrice = new BigDecimal(total);

        newPayment.setSubtotal(sPrice);
        newPayment.setCurrencyType(Currency.getInstance(Locale.US)); 
```

我必须将总价值传递给我的 paypalintegration 活动。

但我的控制台窗口显示以下错误：

```
 12-21 05:52:09.571: E/AndroidRuntime(782): FATAL EXCEPTION: main
       12-21 05:52:09.571: E/AndroidRuntime(782): java.lang.NullPointerException
       12-21 05:52:09.571: E/AndroidRuntime(782):   at java.math.BigDecimal.<init>(BigDecimal.java:483)
      12-21 05:52:09.571: E/AndroidRuntime(782):    at com.ssmobileproductions.catalogue.PayPalIntegrationActivity.payWithPaypal(PayPalIntegrationActivity.java:74)
        12-21 05:52:09.571: E/AndroidRuntime(782):  at com.ssmobileproductions.catalogue.PayPalIntegrationActivity.onClick(PayPalIntegrationActivity.java:66)
      12-21 05:52:09.571: E/AndroidRuntime(782):    at android.view.View.performClick(View.java:2408) 
```

请帮助我。我的代码有什么问题。

`I wish to need the o/p`是：

mGrandTotal 值是从我的第一个活动传递到最后一个活动（paypalintegration 活动）

mGrandTotal 值设置为以下行： newPayment.setSubtotal(sPrice);

我该怎么办。请告诉我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T06:40:01.863

您不会因为将 String 转换为 Bigdecimal 而出现错误，因为对于相同的 **BigDecimal(String val)**有一个 Bigdecimal 的构造函数， 由于**total**具有**空**值并且无法转换为 BigDecimal，您会收到错误。你可以这样做

```
 String total="0.0";
      if(in.getStringExtra(mGrandTotal)!=null && !in.getStringExtra(mGrandTotal).isEmpty()){
            total=in.getStringExtra(mGrandTotal);
      }
       BigDecimal sPrice = new BigDecimal(total); 
```

希望这对你有用……！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:15:08.267

您收到错误是因为您试图将非数字字符串转换`total`为 BigDecimal 数字。将一些数值分配给`KEY_TOTAL`例如

```
 static final String KEY_TOTAL = "0.0";//some numeric value here 
```

# pygame - 在pygame中保存高分

> ID：13984582
> 
> 赞同：2
> 
> 时间：2012-12-21T05:07:25.507
> 
> 标签：pygame, save

我知道这是很多代码，但我真的需要帮助，只要用户继续玩（没有进入 sys.quit），高分就会保存并且可以用高分函数显示。我已经工作了几个小时，无法弄清楚这部分。请对这么多代码感到抱歉。还可以通过任何方式使其运行得更好或更顺畅。

```
import pygame, sys, random
from time import *
from pygame import *
from pygame.locals import *
scores=[]
name=[]
def playagain():
    print "Would you like to play again?"
    global playername
    choice=raw_input("Or do you want to see the current high scores: ")
    choice1=choice.lower()
    if choice=='yes' or choice=='y':
        playername=raw_input('Name:  ')
        main_loop(random.randint(3.0,6.0))
    elif choice=='high scores' or choice=='hs':
        highscores()
    elif choice=='no' or choice=='n' or choice=='goodbye' or choice=='bye' or choice=='exit' or choice=='quit':
        pygame.quit()
        sys.exit()       
def highscores():
    pygame.init()
    windowSurface = pygame.display.set_mode((500, 400), 0, 32)
    pygame.display.set_caption('Tic-toc!')
    WHITE = (255, 255, 255)
    BLUE = (0, 0, 255)
    RED=(255, 0, 0)
    GREEN=(0,255,0)
    basicFont = pygame.font.SysFont(None, 48)    
    global finaltime
    global scores
    global name
    global playername
    font = pygame.font.Font(None, 35)  # load the default font, size 50
    color = (255, 50, 0)
    if finaltime<=.01:
        finaltime=0.00
        scores.append(str(finaltime))
    else:
        scores.append(str(finaltime+.01))
    name.append(str(playername))            
    for i in range(len(scores)):
        score = scores[i]
        name= name[i]
        nameimage = font.render(name, True, color)
        namerect = nameimage.get_rect()
        namerect.left, namerect.y = 40, 100 + (i*(namerect.height + 20))
        windowSurface.blit(nameimage,namerect)
        scoreimage = font.render(score, True, color)
        scorerect = scoreimage.get_rect()
        scorerect.right, scorerect.y = 480, namerect.y
        windowSurface.blit(scoreimage, scorerect)
        for d in range(namerect.right + 25, scorerect.left-10, 25):
            pygame.draw.rect(scoreimage, color, pygame.Rect(d, scorerect.centery, 5, 5))
    pygame.display.update()
    sleep(7)
    pygame.quit()
    playagain()
def main_loop(timer):
    global playername
    playername=raw_input('Name:  ')
    global finaltime
    pygame.init()
    windowSurface = pygame.display.set_mode((500, 400), 0, 32)
    pygame.display.set_caption('Tic-toc!')
    WHITE = (255, 255, 255)
    BLUE = (0, 0, 255)
    RED=(255, 0, 0)
    GREEN=(0,255,0)
    basicFont = pygame.font.SysFont(None, 48)
    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
        timer-=.01
        if timer<=0.0099:
            timernew=0.00
            timer=0.00
            textnew=basicFont.render('0.00', True, WHITE, RED)
            textRectnew = textnew.get_rect()
            textRectnew.centerx = windowSurface.get_rect().centerx
            textRectnew.centery = windowSurface.get_rect().centery
            windowSurface.blit(textnew, textRect)
            pygame.display.update()
            break
        button1,button2,button3=pygame.mouse.get_pressed()
        text = basicFont.render(str(timer), True, WHITE, BLUE)
        textRect = text.get_rect()
        textRect.centerx = windowSurface.get_rect().centerx
        textRect.centery = windowSurface.get_rect().centery
        x,y=pygame.mouse.get_pos()
        if (x > textRect.left) and (x < textRect.right) and (y > textRect.top) and (y < textRect.bottom) and button1==1:
            text=basicFont.render(str(timer), True, WHITE, BLUE)
            finaltime=timer
            break
        sleep(.01)
        windowSurface.blit(text, textRect)
        pygame.display.update()
    pygame.quit()
    playagain()
    return
main_loop(random.randint(3.0,6.0)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:25:48.867

我对您的代码做了一些简单的修改。看看我添加的评论。这应该给你一个很好的起点。

```
import pygame, sys, random

from time import *
from pygame import *
from pygame.locals import *

# define colors at top level of the script
WHITE = (255, 255, 255)
BLUE  = (0  ,   0, 255)
RED   = (255,   0,   0)
GREEN = (0  , 255,   0)

# keep track of highscores
scores = []

def get_window_and_font():
    """Returns a tuple of a font and the surface of a newly created window"""
    pygame.init()
    pygame.display.set_caption('Tic-toc!')
    return pygame.font.SysFont(None, 48), pygame.display.set_mode((500, 400), 0, 32)

def playagain():
    """Returns if the player wants to play again"""
    print "Would you like to (p)lay again or (n)ot?"
    choice = raw_input("Or do you want to see the current (h)igh scores: ").lower()
    # use 'in' to check choices of fewer code
    if choice in ('yes', 'y', 'p', 'play', 'again'):
        return True
    elif choice in ('high scores', 'hs', 'h'):
        highscores()
        return True
    elif choice in ('no', 'n', 'goodbye', 'bye', 'exit', 'quit'):
        return False
    else:
        playagain()

def highscores():
    basicFont, windowSurface = get_window_and_font()

    # use enumerate to get the index of the sorted elements in our highscores
    # highscores are sorted by score, descending
    for i, (name, score) in enumerate(sorted(scores, key=lambda x: -x[1])):
        # use list comprehension to create a nice color effect in highscore :-)
        color = tuple([max(0, 255-i*x) for x in (15, 25, 40)])
        nameimage = basicFont.render(name, True, color)
        namerect = nameimage.get_rect()
        namerect.left, namerect.y = 40, 10 + (i*(namerect.height + 10))
        windowSurface.blit(nameimage,namerect)
        scoreimage = basicFont.render(str(score), True, color)
        scorerect = scoreimage.get_rect()
        scorerect.right, scorerect.y = 480, namerect.y
        windowSurface.blit(scoreimage, scorerect)
        for d in range(namerect.right + 25, scorerect.left-10, 25):
            pygame.draw.rect(scoreimage, color, pygame.Rect(d, scorerect.centery, 5, 5))

    pygame.display.update()
    # just check for MOUSEBUTTONUP and QUIT, using the filter argument of .get()
    while not any(pygame.event.get((MOUSEBUTTONUP, QUIT))):
        sleep(0.1)
    pygame.quit()

def play_game():
    """this function handles a round of the game and returns the playername and his score"""
    timer = random.randint(3.0,6.0)
    playername = raw_input('Name:  ')
    finaltime = 0
    basicFont, windowSurface = get_window_and_font()
    # keep running while no QUIT event is in the queue
    while not any(pygame.event.get(QUIT)):
        # clear the screen every tick
        windowSurface.fill((0,0,0))
        timer -= .01
        if timer <= 0.0099:
            textnew  = basicFont.render('0.00', True, WHITE, RED)
            textRectnew = textnew.get_rect()
            textRectnew.centerx = windowSurface.get_rect().centerx
            textRectnew.centery = windowSurface.get_rect().centery
            windowSurface.blit(textnew, textRect)
            pygame.display.update()
            break

        # we are only interested in button1, so discard the rest
        button1, _, _ = pygame.mouse.get_pressed()
        text = basicFont.render(str(timer), True, WHITE, BLUE)
        textRect = text.get_rect()
        textRect.centerx = windowSurface.get_rect().centerx
        textRect.centery = windowSurface.get_rect().centery

        # use collidepoint to check if mouse is above the rect
        # you could also use the MOUSEBUTTONUP event instead of mouse.get_pos()
        if button1 == 1 and textRect.collidepoint(pygame.mouse.get_pos()):
            text = basicFont.render(str(timer), True, WHITE, BLUE)
            finaltime = timer
            break

        sleep(.01)
        windowSurface.blit(text, textRect)
        pygame.display.update()

    pygame.quit()

    return playername, finaltime

def main():
    keep_playing = True
    while keep_playing:
        # play_game returns the playername and his score
        # store that in our highscore list
        scores.append((play_game()))
        # keep playing if the player wants to
        keep_playing = playagain()

# good habit to use the __name__ magic variable
if __name__ == '__main__':
    main() 
```

你根本不需要`global`。

我认为关闭并重新打开窗口以在 pygame 和 CLI 之间切换有点奇怪，但我在将相关代码移动到它自己的函数时保持你的那部分代码完整`get_window_and_font`。

您可能希望稍后将您的游戏划分为不同的场景，例如`title screen`、和`name entry screen`，但这超出了此答案的范围。`gameplay screen``highscore screen`

# arrays - MongoDB如何在给定的数组中插入带有_id的对象

> ID：13984584
> 
> 赞同：4
> 
> 时间：2012-12-21T05:07:53.033
> 
> 标签：arrays, mongodb, upsert, objectid

我的命令是这样的：

```
db.item.remove()    
db.item.update({_id:{$in:['A1','A2']}},{$inc:{count:1}},{multi: true, upsert: true}) 
```

我想要的结果应该是

```
db.item.find() -->
{_id: 'A1', count: 1}
{_id: 'A2', count: 1} 
```

但实际上是：

```
{_id: ObjectId(xxx), count: 1}
{_id: ObjectId(xxx), count: 1} 
```

似乎Upsert不能自动使用查询数组中的val作为新文档的_id，有没有办法达到我的目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:23:53.123

您一次只能更新一个文档，因此您需要将其拆分为两个`update`调用。

```
db.item.update({_id: 'A1'},{$inc:{count:1}},{upsert: true})
db.item.update({_id: 'A2'},{$inc:{count:1}},{upsert: true}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:13:36.107

这取决于文件是否已经存在。如果不这样做，那么您始终可以使用`BatchInsert`最新的 MongoDB 中已委托给该`insert`函数的哪个：http: [//docs.mongodb.org/manual/applications/create/#insert](http://docs.mongodb.org/manual/applications/create/#insert)

> 如果将文档数组传递给 insert() 方法，则 insert() 将批量插入到集合中。

因此，这可能是一种方法，但是您的文档非常小，您从一个命令中执行此操作的唯一真正好处是您可以获得一次往返，但您必须同时通过线路发送所有数据.

我还应该注意，在分片下批量插入更改，您可能应该考虑某些注意事项：http: [//docs.mongodb.org/manual/administration/sharding/#strategies-for-bulk-inserts-in- sharded-clusters](http://docs.mongodb.org/manual/administration/sharding/#strategies-for-bulk-inserts-in-sharded-clusters)由于批量插入可能对您的系统产生的性能影响。

但是，如果文档可能已经存在，那么 atm 唯一真正的方法就是像@JohnnyHK 所说的那样手动执行命令。我认为 MongoDB 中的任何其他工具`mongoimport`都不会在这里为您提供帮助，因为它们也可以进行批量插入。

# eclipse - Eclipse 代码辅助在 Ubuntu 12.04 中不起作用

> ID：13984595
> 
> 赞同：1
> 
> 时间：2012-12-21T05:09:35.373
> 
> 标签：eclipse, ubuntu, ubuntu-12.04, content-assist

我已经为所有类型选择了 Preferences -> Java -> Editor -> Content Assist。但我无法保存设置。当我重新启动 Eclipse 时，它​​将重置为 defaults.ie 取消选中 Java Type Proposal 和其他。

我已经在 eclipse 3.7.2、eclipse 4.2.1、eclipse-jee-indigo-SR2-linux-gtk 中对此进行了测试

我的 Java 版本 1.6.0_38

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:43:52.617

[在“无法在 Eclipse 中保存项目首选项](https://stackoverflow.com/questions/954248/cant-save-project-preferences-in-eclipse)”中，您有一些 Eclipse 设置未正确保存的潜在原因。
[该线程](http://www.myeclipseide.com/PNphpBB2-printview-t-28216-start-0.html)再次警告以管理员身份安装 Eclipse（即使最终，实际原因是错误的 Windows(!) 安装）。

但最安全的方法是创建一个*新*工作区并查看问题是否仍然存在，即，您能否将设置和首选项保存在该新工作区中）。

# bash - Bash 脚本：压缩文件夹并通过电子邮件发送

> ID：13984597
> 
> 赞同：0
> 
> 时间：2012-12-21T05:09:47.823
> 
> 标签：bash, email, cron, tar

我正在寻找一个 bash 脚本，我可以将它用于一个 cronjob，它将

1.  tar 一个文件夹： tar -czf foldername-TIMESTAMP.tar.gz ~/public_html/foldername
2.  通过电子邮件将其作为附件
3.  删除 tar.gz

我有需要的 mail、mailx、rm 和 tar 命令。

目的基本上是作为文件系统备份到我的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:17:48.343

我使用它是因为在 Centos 发行版中 mutt 通常不是默认的，而邮寄它是默认的。

```
FILENAME=foldername-$(date +%Y-%m-%d_%H_%M_%S).tar.gz; \
tar -czf $FILENAME ~/public_html/foldername; \
cat $FILENAME | uuencode binario | mail -s "Backup /public_html/foldername" some@email.you.like; \
rm -f $FILENAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:49:35.263

使用 mutt 你可以这样做：

```
FILENAME=foldername-$(date +%Y-%m-%d_%H_%M_%S).tar.gz
tar -czf $FILENAME ~/public_html/foldername
mutt -s "Some subject" -a $FILENAME some@email.you.like < preformatted_mail.txt 
```

# sql - 使用 SQL Server 查询检测层次结构中的循环

> ID：13984598
> 
> 赞同：1
> 
> 时间：2012-12-21T05:09:54.377
> 
> 标签：sql, sql-server, select, common-table-expression, table-per-hierarchy

> **可能重复：**
> [SQL - 检测父子关系中的循环](https://stackoverflow.com/questions/3230146/sql-detecting-loops-in-parent-child-relations)

我有一个包含 2 列的简单表格，`id`并且`parentid`：

```
id    |   parentid
------------------
2         1
3         2
4         3
1         4 
```

例如，在上表中，1 是 1 本身的子节点（1->2->3->4->1）。如何发现此类情况？

我需要一个额外的列吗？

# asp.net-mvc - 如何使输入字段仅允许使用 EF 和数据注释的数字？

> ID：13984602
> 
> 赞同：7
> 
> 时间：2012-12-21T05:10:22.983
> 
> 标签：asp.net-mvc, entity-framework, data-annotations

我试图弄清楚是否有办法确保使用数据注释和实体框架只允许数字输入。

我正在使用以下代码

```
[Required]
[DisplayName("Client No")]
[Column("client_no", TypeName = "smallint")]
public virtual Int16 Number { get; set; } 
```

我希望使用数字类显示它。

在一个地方我使用以下

```
<input type="number" name="searchClientNo" class="numericOnly" /><br /> 
```

但在我正在使用的输入表格中

```
@Html.EditorFor(m => m.Number, EditorTemplate.TextBox) 
```

我有一个带有以下代码的定制 EditorFor

```
<div class="editor-label">
    @Html.Label((ViewData.ModelMetadata.DisplayName??ViewData.ModelMetadata.PropertyName),
        new Dictionary<string, object>
            {
                { "for", ViewData.ModelMetadata.PropertyName }
            })
</div>
<div class="editor-field">
    @Html.TextBox("", (object)Model,
        new Dictionary<string, object>
            {
                { "id", ViewData.ModelMetadata.PropertyName },
                { "name", ViewData.ModelMetadata.PropertyName },
                { "class", "text-box single-line"},
                { "data-bind", "value: " + ViewData.ModelMetadata.PropertyName },
            })
    @Html.ValidationMessage(ViewData.ModelMetadata.PropertyName,
        new Dictionary<string, object>
            {
                { "data-valmsg-for", ViewData.ModelMetadata.PropertyName }
            })
</div> 
```

我想知道如何保持此代码不变，但仍使用仅数字文本框。我需要使用 UIHint 吗？

或者，是否可以让我现有的 EditorFor 更智能？

我发现这篇博文[http://robseder.wordpress.com/2012/06/01/uihint-displaytemplates-and-editortemplates-in-mvc/](http://robseder.wordpress.com/2012/06/01/uihint-displaytemplates-and-editortemplates-in-mvc/)但我已经在使用自定义 EditorFor。可能我需要添加一个新类型，比如 EditorTemplate.NumericTextBox 并添加另一个编辑器？这听起来可能有效，我明天要试试这个......

提前非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T10:38:00.483

您可以编写自定义编辑器模板`~/Views/Shared/EditorTemplates/NumberTemplate.cshtml`：

```
@Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { type = "number" }) 
```

然后用属性装饰你的视图模型`UIHint`属性：

```
[Required]
[DisplayName("Client No")]
[Column("client_no", TypeName = "smallint")]
[UIHint("NumberTemplate")]
public virtual Int16 Number { get; set; } 
```

在你的视野内：

```
@Html.EditorFor(x => x.Number) 
```

或者如果您不想`UIHint`在视图模型上使用该属性，您可以定义`EditorTemplate.NumericTextBox = "NumberTemplate"`然后：

```
@Html.EditorFor(m => m.Number, EditorTemplate.NumericTextBox) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:37:06.490

只想分享我的解决方案，以防它对某人有所帮助：

我的新编辑器：

```
<div class="editor-label">
    @Html.Label((ViewData.ModelMetadata.DisplayName??ViewData.ModelMetadata.PropertyName),
        new Dictionary<string, object>
            {                
                { "for", ViewData.ModelMetadata.PropertyName }
            })
</div>

<div class="editor-field">
   @if (ViewData.ModelMetadata.ModelType.IsNumeric())
   {
    @Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { type = "number", @class = "numericOnly"  })      
   }
    else
    {
     @Html.TextBox("", (object)Model,
        new Dictionary<string, object>
            {
                { "id", ViewData.ModelMetadata.PropertyName },
                { "name", ViewData.ModelMetadata.PropertyName },
                { "class", "text-box single-line"},
                { "data-bind", "value: " + ViewData.ModelMetadata.PropertyName },
            })
    }

     @Html.ValidationMessage(ViewData.ModelMetadata.PropertyName,
        new Dictionary<string, object>
            {
                { "data-valmsg-for", ViewData.ModelMetadata.PropertyName }
            })
</div> 
```

IsNumeric 扩展方法基于我在 C# MSDN 论坛中找到的代码，这是它的实现：

```
/// <summary>
/// Checks is the object is of numeric type 
        /// see http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/66a7dc8d-f276-4d45-8da4-f8d9857db52c/
/// </summary>
/// <param name="obj"></param>
/// <returns></returns>
        public static bool IsNumeric(object obj)
        {
            return (obj == null) ? false : IsNumeric(obj.GetType());
        }

        public static bool IsNumeric(this Type type)
        {
            if (type == null)
                return false;

            TypeCode typeCode = Type.GetTypeCode(type);

            switch (typeCode)
            {
                case TypeCode.Byte:
                case TypeCode.Decimal:
                case TypeCode.Double:
                case TypeCode.Int16:
                case TypeCode.Int32:
                case TypeCode.Int64:
                case TypeCode.SByte:
                case TypeCode.Single:
                case TypeCode.UInt16:
                case TypeCode.UInt32:
                case TypeCode.UInt64:
                    return true;
            }
            return false;
        } 
```

# c# - 串口读取字符串

> ID：13984603
> 
> 赞同：0
> 
> 时间：2012-12-21T05:10:30.273
> 
> 标签：c#, serial-port

我有一个读取称重机的串口应用程序。

```
 public void Read()
    {
        while (Puerto.BytesToRead > 0)
        {
            try
            {
                string inputData = Puerto.ReadExisting();
                dataReceived = inputData;
            }
            catch (TimeoutException) { }
        }
    } 
```

返回字符串是这样的

![称重机返回的数据](../Images/00ce290cb58eb7cb65ebf4494b2c21a4.png)

它还有其他额外的字符，我该如何解析或从中获取干净的数据？我只需要**0.52磅**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:07:31.323

这可能是任何事情 - 称重机中的错误、某种硬件问题或串行端口的配置问题。我怀疑是配置问题。确保所有设置都正确（波特率、握手、奇偶校验、停止位）。此外，尝试使用另一个程序连接到相同的串行端口设备（例如，请参阅[http://helpdeskgeek.com/windows-7/windows-7-hyperterminal/](http://helpdeskgeek.com/windows-7/windows-7-hyperterminal/)），看看您是否看到相同的垃圾数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:20:14.300

我不知道它是什么称重机以及上面的串口规格，但是，如果它对您来说也是黑匣子，请检查以下内容： - 检查您是否有解释 RS232 端口输出的技术规格 -用一个样本权重做几个（10 个？）样本，看看是否每次都传递字节数 - 如果你看到字节数是恒定的（除非 0.52lb 文本中的差异偶尔变为 0.5lb），重量后面的垃圾很可能是附加的二进制数据。- 如果没有，并且您每次都会看到带有精确偏移的权重（文本），您就可以抓取输出

这是完全的逆向工程，我建议遵循技术规范并进行更有洞察力的数据处理。

# javascript - 剑道 UI 上传器服务器端的返回语句是什么

> ID：13984606
> 
> 赞同：2
> 
> 时间：2012-12-21T05:10:49.273
> 
> 标签：javascript, asp.net, kendo-ui

我正在使用 Kendo UI 上传来上传单个/多个文件。我已经实现了它，

```
 <input name="file" id="files" type="file" />
 <script type="text/javascript">
        $(document).ready(function () {
            $("#files").kendoUpload({
                async: {
                    saveUrl: "/NewFile/upload",
                    autoUpload: false,
                },

            });
      });
</script> 
```

在控制器中，我给了喜欢，

```
public ActionResult upload(HttpPostedFileBase file)
 {
       //Code for saving in DB
       return???
 } 
```

我可以将记录保存在数据库中，但它显示为“重试”并显示未成功上传。所以你能告诉我我必须使用什么返回语句来显示正确的状态上传。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:36:46.147

您应该返回空响应：

```
 public ActionResult upload(HttpPostedFileBase file)
   {
       // Code to save in DB

       // Return an empty string to signify success
       return Content("");
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:31:00.977

在控制器中，我给了喜欢

```
public ActionResult upload(HttpPostedFileBase file)
 {
        var s = new { st = "successfully uploaded" };
       //Code for save in DB
       return json(s,JsonRequestBehavior.AllowGet);
 } 
```

# sql - 使用带有条件语句的数据库

> ID：13984607
> 
> 赞同：5
> 
> 时间：2012-12-21T05:10:59.713
> 
> 标签：sql, sql-server-2008

我需要在具有不同数据库名称但相同表和数据的 2 个不同服务器中执行脚本。为此，我尝试使用以下语句。

```
if (@@servername= 'srvrA')
    begin 
        use dbA
    end
else    
begin 
        use dbB
    end 
```

但是对于 srvrB，它说数据库 dbA 不存在。

有人可以帮我实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T23:25:53.850

另一种选择

*   添加链接服务器[sp_addlinkedserver](http://msdn.microsoft.com/en-us/library/ms190479%28v=sql.100%29.aspx)

*   登录本地实例和远程服务器[sp_addlinkedsrvlogin之间的映射](http://msdn.microsoft.com/en-us/library/ms189811%28v=sql.100%29.aspx)

就像是：

```
sp_addlinkedserver  
  @server= N'srvrA',
  @srvproduct= N'',
  @provider= N'SQLNCLI',
  @datasrc= N'srvrA';

sp_addlinkedsrvlogin
  @rmtsrvname = 'srvrA' ,
  @useself = 'FALSE' ,
  @locallogin = 'your_local_login' ,
  @rmtuser = 'your_remote_login' ,
  @rmtpassword = 'your_password' 
```

然后你的脚本看起来像

```
DECLARE @@srvname nvarchar(10) = 'srvrA'

IF (@@servername = @@srvname)
  BEGIN
    SELECT *
    FROM srvrA.dbA.your_schema.your_table
  END    
ELSE    
  BEGIN
    SELECT *
    FROM srvrB.dbB.your_schema.your_table
  END 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T06:54:51.247

如果启用 SQLCMD 模式，则可以实现目标。从 sql management studio 的 Query 菜单切换 SQLCMD 模式。然后以下脚本将起作用。

```
if (@@servername = 'srvrA')
    begin
        :setvar dbname dbA
        use $(dbname)
    end
else    
    begin
        :setvar dbname dbB
        use $(dbname)
    end 
```

# php - 致命错误：找不到类“CI_Controller”

> ID：13984609
> 
> 赞同：2
> 
> 时间：2012-12-21T05:11:31.833
> 
> 标签：php, codeigniter, fatal-error

我正在尝试运行一个项目，但出现以下错误。

```
Fatal error: Class 'CI_Controller' not found in E:\wampserver\www\NeoBook\application\controllers\usercp.php on line 2 
```

我检查了 SO 中的所有解决方案，但没有一个对我有用。我是 CodeIgniter 的新手，有人可以帮我解决这个问题吗？

如果您需要有关此问题的更多信息，请告诉我。

也在使用的时候

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

//Page is responding as `No direct script access allowed`

    class Usercp extends CI_Controller {

        public function __construct()
        {
            parent::__construct();
            include_once('member/library/Am/Lite.php'); 
            $this->is_logged_in();
            $this->load->model('model_facebook');
            $this->load->library('pagination');
            $this->load->library('Layouts');
            $this->load->model('model_user');
        }

    } 
```

这是代码。无论哪里使用 CI_Controller 类都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:35:31.800

您在 PHP 标记中使用 PHP 标记，请使用此（已删除 '

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

//Page is responding as `No direct script access allowed`
    class Usercp extends CI_Controller {

        public function __construct()
        {
            parent::__construct();
            include_once('member/library/Am/Lite.php'); 
            $this->is_logged_in();
            /// More of your code.
            $this->load->library('Layouts');
            $this->load->model('model_user');
        }

    } 
```

# php - 无法找出带有 RSS 提要的 for 循环

> ID：13984611
> 
> 赞同：2
> 
> 时间：2012-12-21T05:11:47.010
> 
> 标签：php, arrays, for-loop, rss

我正在尝试提取 RSS 提要，但我只想显示其中一项 - 一个随机数 - 而不是全部。我已经使用 for 循环设置了一个测试，但似乎无法让它工作。我来自 JS 背景。任何帮助或提示将不胜感激！

```
<?php

$url = "http://abc.net.au/bestof/bestofabc.xml";

$rss = simplexml_load_file($url);

if ($rss) {

    $items = $rss->channel->item;

    for ($i = 0; $i < count($items); $i++){

        if ($i == 2) {

            echo($items[$i]); // doesn't show anything
        }
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:20:56.370

我真的建议您使用[`xpath`](http://php.net/manual/en/simplexmlelement.xpath.php)从所有渠道加载所有项目，然后随机选择项目。这是示例代码，根据需要进行优化...

```
$url = "http://abc.net.au/bestof/bestofabc.xml";
$rss = @simplexml_load_file($url);
// get all the items in all channels
$items = $rss->xpath('//rss/channel/item');
// randomly dump one of the items from loaded list
$k = array_rand($items);
var_dump($items[$k]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:26:28.967

这里基本上有两个选项，为了便于使用，我首先将项目分配给它自己的变量：

```
$item = $items[$i]; 
```

然后是调试的两个选项：

```
var_dump($item);
echo $item->asXML(); 
```

第一行将创建一个`var_dump`，它是 PHP 的，在这种情况下甚至是 SimpleXML 特定的：

```
class SimpleXMLElement#193 (5) {
  public $title =>
  string(29) "Asylum seeker system overload"
  public $link =>
  string(29) "http://www.abc.net.au/bestof/"
  public $description =>
  class SimpleXMLElement#287 (0) {
  }
  public $pubDate =>
  string(31) "Thu, 22 Nov 2012 00:00:00 +1100"
  public $guid =>
  string(8) "s3638457"
} 
```

第二行将创建一些我敢打赌对你来说很常见的东西，即 XML 本身：

```
<item>
            <title>Asylum seeker system overload</title>
            <link>http://www.abc.net.au/bestof/</link>
            <description><![CDATA[
            <img style="float:right;" src="http://www.abc.net.au/common/images/news_asylum125.jpg" alt="Asylum seeker detainees (ABC News)">
            <p>The Australian government is preparing to allow thousands of asylum seekers to love in the community.</p>
            <ul>

                <li><a href="http://mpegmedia.abc.net.au/news/lateline/video/201211/LATc_FedNauru_2111_512k.mp4">Watch (4:23)</a></li><li><a href="http://www.abc.net.au/lateline/content/2012/s3638174.htm">More - Lateline</a></li>
            </ul>
            ]]></description>

            <pubDate>Thu, 22 Nov 2012 00:00:00 +1100</pubDate>
            <guid isPermaLink="false">s3638457</guid>
        </item> 
```

您没有看到任何输出：

```
echo $items[$i]; 
```

因为该`<item>`元素没有值，而只是子元素。例如

```
echo $items[$i]->title; 
```

将输出字符串：

```
Asylum seeker system overload 
```

我希望这会有所帮助并有所启发。您可以在此处找到[演示](http://codepad.viper-7.com/DPsAVp)，它还表明您可以使用`foreach`：

```
$i = 0;
foreach ($rss->channel->item as $item)
{
    if ($i++ == 2) {
        var_dump($item);
        echo $item->asXML(), "\n", $item->title;
    }
} 
```

# c++ - VS2012跳线

> ID：13984614
> 
> 赞同：0
> 
> 时间：2012-12-21T05:12:05.090
> 
> 标签：c++, qt, visual-studio-2012

我有这样的代码：

```
QVector<Point> legalMoves = field.getLegalMoves();
QVector<Cell> costs;
costs.reserve(legalMoves.size());
for (QVector<Point>::iterator i = legalMoves.begin(); i < legalMoves.end(); ++i)
    costs.push_back(checkCost(field, *i, player, -100, 100));
Cell cost;
if (player)  {
    QVector<Point>::iterator m1 = legalMoves.begin();
    QVector<Cell>::iterator m2 = costs.begin();
    QVector<Cell>::iterator j = costs.begin() + 1;
    for (QVector<Point>::iterator i = legalMoves.begin() + 1; i < legalMoves.end(); ++i, ++j)
        if (j->status > m2->status) {
            m1 = i;
            m2 = j;
        }
    cost=*m2;
}
else  {
    QVector<Point>::iterator m1 = legalMoves.begin();
    QVector<Cell>::iterator m2 = costs.begin();
    QVector<Cell>::iterator j = costs.begin() + 1;
    for (QVector<Point>::iterator i = legalMoves.begin() + 1; i < legalMoves.end(); ++i, ++j)
        if (j->status < m2->status) {
            m1 = i;
            m2 = j;
        }
    cost=*m2;
}
QVector<Point> moves;
QVector<Cell>::iterator j = costs.begin();
for (QVector<Point>::iterator i = legalMoves.begin(); i < legalMoves.end(); ++i, ++j)
    if (j->status == cost.status)
        moves.push_back(*i);
short index = qrand()%moves.size();
return moves[index]; 
```

}

当我调试它时，编译器只是在循环内跳过这部分：

```
if (j->status < m2->status) {
                m1 = i;
                m2 = j;
            } 
```

这意味着函数返回第一个点（或具有相同单元格值而不是最小值/最大值的任何其他点）。为什么会发生这种情况以及如何解决它？

# css - 当链接没有文件夹类或以标题开头的类时，如何创建 CSS 选择器来选择？

> ID：13984618
> 
> 赞同：0
> 
> 时间：2012-12-21T05:12:17.633
> 
> 标签：css

我正在尝试创建一个 CSS 选择器来选择没有以标题开头的类并且没有文件夹类的链接。这些是我得到的最接近的，但它们在 VS2012 中仍然给我一个语法错误。谁能建议我如何解决这个问题？

```
ul.arbo li > a:not(a[class^='title']),a:not(".folder"):hover span,

ul.arbo li > a:not([class*="title-"], [class="folder"]):hover span, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:46:48.340

好吧，从评论延伸：

尝试

```
a:not([class^="title"]):not(.folder) 
```

[JSFiddle 演示](http://jsfiddle.net/KwmUN/)

**编辑**：

按照@PavloMykhalov 的建议，如果您需要“类名以'title' 开头”而不是“类属性以'title' 开头”，再添加一个选择器：

```
a:not([class^="title"]):not([class*=" title"]):not(.folder) 
```

[更新了 jsfiddle deom](http://jsfiddle.net/KwmUN/1/)

# java - 通过过滤器设置 FacesMessage

> ID：13984621
> 
> 赞同：5
> 
> 时间：2012-12-21T05:12:34.577
> 
> 标签：java, jsf, message, servlet-filters

在我的 JSF 应用程序中，有一个`Filter`用于检查身份验证过程。当认证失败时，过滤器重定向到`login.xhtml`.

如何将 传递`FacesMessage`给我的登录页面`Filter`？

虽然，我在下面使用过，但不行。

```
FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, message, null)); 
```

AuthenticationFilter.java

```
public class AuthenticationFilter implements Filter  {
    private FilterConfig config;
    private ServletContext servletContext;

    public void init(FilterConfig filterConfig) {
        config = filterConfig;
        servletContext = config.getServletContext();
    }

    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;
        HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;
        HttpSession session = httpRequest.getSession();
        User user = (User) session.getAttribute(Constants.LOGIN_USER);
        if (user == null) {
            ...
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, message, null));

            String loginView = httpRequest.getContextPath() + Constants.LOGIN_PAGE;
            httpResponse.sendRedirect(loginView);
        } else if (!user.getRole().equals(Role.SYSTEM_ADMINISTRATOR)) {
            ....
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, message, null));

            String loginView = httpRequest.getContextPath() + Constants.LOGIN_PAGE;
            httpResponse.sendRedirect(loginView);
        } else {
            filterChain.doFilter(servletRequest, servletResponse);
        }
        servletContext.log("Exiting the filter");
    }

    public void destroy() {
        //Nothing to do.
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T05:22:26.867

`FacesContext`由`FacesServlet`. _ 当您在过滤器中时，它还没有被调用。过滤器在 servlet 之前运行。因此，您永远无法`FacesContext`使用过滤器。另外，faces 消息是请求范围的，所以重定向会使它们消失。

让它`login.xhtml`在 a 期间自行设置`<f:event type="preRenderView">`。最简单的方法是让过滤器将其暂时放在会话范围内。

```
session.setAttribute("message", message);
httpResponse.sendRedirect(loginView); 
```

然后，您在以下预渲染视图侦听器方法中将其从会话范围中删除`login.xhtml`：

```
String message = (String) externalContext.getSessionMap().remove("message");

if (message != null) {
    context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, message, null));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:33:38.307

我在尝试在 EJB 计时器中获取 FacesContext 时遇到了类似的问题。BalusC 在多个线程上指出不可能做到这一点。或者，您可以使用“ServletContextListener”，但 ScheduledExecutorService 没有像 EJB 计时器那样定义调度。

在任何情况下，他提出的一个建议是实际向由托管 bean 支持的 JSF 发出 Web 请求，以利用我想用计时器设置的应用程序范围 bean 上的方法。

我提到这一点，因为您似乎可以做类似的事情，您可以将参数传递给 JSF 页面，其中包含您想要的消息和用户 IP 地址或其他内容。该页面可以由一个请求范围的 bean 支持，该 bean 中注入了一个应用程序范围的 bean，该 bean 将这些 bean 存储在以 IP 作为键的映射中。然后，当用户被重定向到登录页面时，该页面可以在请求范围的 bean 上调用获取错误消息方法，并将相同的应用程序范围的 bean 注入其中，从而获取该 IP 或类似内容的错误消息。

无论如何，我确信 BalusC 的答案是足够的，比这更合适，但是他的“只是从 ejb 计时器发出请求”的建议对我来说非常适合在应用程序范围的 bean 上调度方法调用，我想我可能会带来在这里增加它的可能用途。

@BalusC 你对我所指的帖子有任何想法吗？我找不到它。

# multithreading - 多线程 udp 套接字编程

> ID：13984623
> 
> 赞同：0
> 
> 时间：2012-12-21T05:12:42.160
> 
> 标签：multithreading, udp

这是我的客户端和服务器的代码。

类 Client1 { Client1(int no) { 尝试 { 字符串消息；message="你好这是客户端"+no; byte[] b =message.getBytes(); DatagramPacket dp = new DatagramPacket(b, b.length,InetAddress.getLocalHost(),3700); DatagramSocket 发送者 = new DatagramSocket(); 发件人.send(dp); }catch (Exception e) { System.out.println("client shutdown"); } } }

然后我的服务器类是

类服务器1 {

```
int cnt=0;
String s1;
Server1()
{

    try {
            byte[] buffer = new byte[65536];
            DatagramPacket  incoming = new DatagramPacket(buffer, buffer.length);
            DatagramSocket  ds = new DatagramSocket(3700);
            ds.receive(incoming);
            byte[] data = incoming.getData();
            String s = new String(data, 0, incoming.getLength());
            System.out.println("Port" + incoming.getPort() + " on " + incoming.getAddress() + " sent this message:");

            System.out.println(s.toUpperCase());
            }

            catch (IOException e) 
            {
            System.err.println(e); 
            }
} 
```

}

然后我的可运行实现是

类 prothread 实现 Runnable {

```
//long time=0;
    //int portno;
    int flag=0; // this is to differentiate between a server and client
    private String capitalizedSentence;
prothread(long l)
{
    if(l==1)
        { // it is a server
            flag=1;
        }
        else
        {
            flag=(int) l;
        }
}

@Override
public void run(){
    // TODO Auto-generated method stub

        System.out.println("Starting thread");    
        if(flag==1)// Code for server
            {
           Server1 s=new Server1();

            }
            else   // code for client
            {                   
              Client1 c=new Client1(flag);

             }

    } 
```

}

最后部署这个客户端和服务器的类是

公共类 Samplepro31 {

```
public static void main(String[] args) {
    // First i'm going to create a server and then clients for it
        int i=1;
        int cnt=0;

         prothread[] p;
        Thread[] th;
        Random r =new Random();
         // Array has been declared 
        p=new prothread[10];// Memory allocated to it
        th= new Thread[1000];
        p[0]=new prothread(1);
        cnt=1;
        //p[0].setportno(cnt);
        th[0]=new Thread(p[0]);
        th[0].start();
        while(cnt<3)
        {

                p[cnt]=new prothread(cnt); 
                // here send the port number
                th[cnt]=new Thread(p[cnt]);
                //p[cnt1].setportno(cnt1);
                th[cnt].start();
                cnt++;
        }

  } 
```

}

所以我遇到的问题是一台服务器，一次只有一个客户端在运行，而不是 2 个客户端应该运行我得到的 o/p：

开始线程 开始线程 开始线程 在 clinet 的构造函数内部 2 java.net.BindException：地址已在使用中：无法绑定 HELLO THIS IS CLIENT 2

那么有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:31:12.753

不要将客户端绑定到任何特定端口。让实现选择一个可用的端口来绑定。

# android - Android Webview 中的 HTML 输入文件

> ID：13984627
> 
> 赞同：2
> 
> 时间：2012-12-21T05:13:03.997
> 
> 标签：android, html, jquery-mobile, webview

可以在android webview中使用html输入文件吗？如果不是，有什么解决方法？

```
<input type="file" name="file /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T05:19:41.003

WebView 默认不打开文件选择器。但是，有可能使这项工作。WebChromeClient 有隐藏方法 openFileBrowser，需要覆盖该方法才能弹出文件选择器，然后将结果返回给 WebView

**但我认为你可以修改一些东西，例如 onClick 事件会调用你通过 [addJavascriptInterface()][1] 注入的 Java 代码，此时你可以调出你想要的任何类型的“文件资源管理器” .**

[http://m0s-programming.blogspot.in/2011/02/file-upload-in-through-webview-on.html](http://m0s-programming.blogspot.in/2011/02/file-upload-in-through-webview-on.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-16T18:43:09.993

如果与这两个类一起使用 HTML 文件输入可以工作；webview 客户端和 webchrome 客户端。Webview 客户端处理以下检查页面加载模式的功能。例如，onpagestarted、onpagefinished 并且应该覆盖 url 加载，而 webchrome 客户端负责将文件从外部存储上传到 android 应用程序。

[http://whats-online.info/science-and-tutorials/18/Android-java-tutorial--Webview-file-upload-on-Facebook/](http://whats-online.info/science-and-tutorials/18/Android-java-tutorial--Webview-file-upload-on-Facebook/)

# ios - 视图快照不呈现

> ID：13984630
> 
> 赞同：1
> 
> 时间：2012-12-21T05:14:09.013
> 
> 标签：ios, uiimage

我正在尝试获取另一个控制器视图的快照以在动画中使用。我正在使用以下代码，但我只看到该视图的背景颜色，以及它的任何子视图（两个按钮、一个文本视图和一个标签）：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    FirstPageController *fpController = [self.storyboard instantiateViewControllerWithIdentifier:@"FirstPage"];
    UIGraphicsBeginImageContext(fpController.view.bounds.size);
    NSLog(@"%@",fpController.view.subviews);
    [fpController.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CGSize destinationSize = CGSizeMake(90, 122);

    UIGraphicsBeginImageContext(destinationSize);
    [viewImage drawInRect:CGRectMake(0,0,destinationSize.width,destinationSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    self.imageView2 = [[UIImageView alloc] initWithImage:newImage];
    self.imageView2.center = self.view.center;
    [self.view addSubview:self.imageView2];
     NSLog(@"%@",NSStringFromCGSize(self.imageView2.image.size));
} 
```

我已经记录了所有相关的东西，fpController、imageView、图像，所有的记录都正确。

**编辑后：**如果我切换到当前控制器的视图，它工作正常，所以我认为这与获取不在屏幕上的视图的快照有关。可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T05:34:10.410

希望对你有帮助：

```
 CGSize textcontent =CGSizeMake(width, height);
UIGraphicsBeginImageContext(textcontent);
if ([UIScreen instancesRespondToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2.0f)
{
    UIGraphicsBeginImageContextWithOptions(textcontent, YES, 1.0f);
}
else
{
    UIGraphicsBeginImageContext(textcontent);
}
    [image.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:27:08.287

```
UIGraphicsBeginImageContextWithOptions(fpController.view.bounds.size, NO, 0.0);

UIGraphicsBeginImageContextWithOptions(destinationSize, NO, 0.0); 
```

使用这两行代替`UIGraphicsBeginImageContext(fpController.view.bounds.size);`

```
 UIGraphicsBeginImageContext(destinationSize); respectively 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T07:05:23.770

我找到了一种方法来完成这项工作，尽管它看起来像一个 hack。我将要渲染的视图添加为视图的子视图，进行渲染，然后删除该视图。它从来没有在屏幕上看到过，所以在视觉上，它很好。我只是想知道是否有更好的方法。

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.fpController = [self.storyboard instantiateViewControllerWithIdentifier:@"FirstPage"];

    [self.view insertSubview:self.fpController.view belowSubview:self.view];

    UIGraphicsBeginImageContext(self.fpController.view.bounds.size);
    [self.fpController.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [self.fpController.view removeFromSuperview];

    self.imageView2 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 90, 122)];
    self.imageView2.image = viewImage;
    [self.pageView insertSubview:self.imageView2 belowSubview:self.imageView];
} 
```

# ruby-on-rails - rspec 和工厂女孩的测试错误

> ID：13984632
> 
> 赞同：0
> 
> 时间：2012-12-21T05:14:14.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot

我正在尝试在我的rails应用程序中使用工厂女孩生成的用户。目标是让他登录并检查他的编辑页面，但它不起作用。我得到的是

```
<top (required)>': undefined local variable or method `user' for #<Class:0x000001034caaa0> (NameError) 
```

这是被执行的代码

```
describe "edit" do
    let(:user) { FactoryGirl.create(:user) }

    describe "page" do
    # signin method in utilities
    before { visit signin_path }
    fill_in "Email",       with: user.email
    fill_in "Password",    with: user.password
    click_button "Sign in"           
    # end signin method in utilities
    before { visit edit_user_path(user) }

    it { should have_selector('h1', text: "Update your profile") }
    it { should have_selector('title', text: "Edit user") } 
    it { should have_link('change', href: 'htttp://gravatar.com/emails') }
    end

    describe "with invalid information" do 
      before { visit edit_user_path(user) }
      before { click_button "Save changes"}

      it { should have_content('error') }

    end

      describe "with valid information" do 
        before { visit edit_user_path(user) }
        let(:new_name)  { "New Name" }
        let(:new_email) { "new@example.com" }
        before do
          fill_in "Name",                     with: new_name
          fill_in "Email",                    with: new_email
          fill_in "Password",                 with: user.password
          fill_in "Confirm Password",         with: user.password

          click_button "Save changes"
        end

        it { should have_selector('title',  text: new_name) }
        it { should have_link('Sign out',   href: signout_path) }
        it { should have_selector('div.alert.alert-success') }
        specify { user.reload.name.should == new_name }
        specify { user.reload.email.should == new_email }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:15:53.523

您的`user`变量不能直接在`describe`块内使用。在`it`、或块（或其他几个）中`let`使用它。在这种情况下，我认为您的意思是它位于一个块内。`before``subject``before`

转这个：

```
describe "page" do
# signin method in utilities
before { visit signin_path }
fill_in "Email",       with: user.email
fill_in "Password",    with: user.password
click_button "Sign in"           
# end signin method in utilities
before { visit edit_user_path(user) }

it { should have_selector('h1', text: "Update your profile") }
it { should have_selector('title', text: "Edit user") } 
it { should have_link('change', href: 'htttp://gravatar.com/emails') }
end 
```

进入这个：

```
describe "page" do
  before do
    visit signin_path
    fill_in "Email",    with: user.email
    fill_in "Password", with: user.password
    click_button "Sign in"           
    visit edit_user_path(user)
  end

  it { should have_selector('h1', text: "Update your profile") }
  it { should have_selector('title', text: "Edit user") } 
  it { should have_link('change', href: 'htttp://gravatar.com/emails') }
end 
```

# forms - Symfony2 表单类型自定义

> ID：13984633
> 
> 赞同：1
> 
> 时间：2012-12-21T05:14:21.800
> 
> 标签：forms, symfony, entity

我需要这方面的帮助，因为即使在阅读和检查了我在互联网上找到的所有资源之后，我也无法自己弄清楚。

我有一个图像实体。它有 3 个映射属性。

1.  ID
2.  地点
3.  拇指位置

我有自定义 ImageSelectType 表单类型，它扩展了 AbstractType：

`buildForm`函数如下所示：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $em = $options['em'];

    $qb = $em->createQueryBuilder();
    $result = $qb->select('i')
            ->from('BloggerBlogBundle:Image', 'i')
            ->leftJoin('i.articles', 'a')
            ->where('a is NULL')
            ;

    $builder
        ->add('images', 'entity', array(
                'class' => 'BloggerBlogBundle:Image',
                'query_builder' => $result,
                                    'required' => true,
                                    'multiple' => false,
                                    'expanded' => true,
            )
        )
                        ->setAttribute('widget', 'imageSelect')
        ;
} 
```

因此，它会获取任何文章未使用的所有图像并用它们填充表单。使用这些选项，我得到单选按钮，如下所示：

```
<div id="image_images">
    <input type="radio" id="image_images_67" name="image[images]" required="required" value="67"><label for="image_images_67" class="required">c5252b4ffc9c50540218e25be1353b33aaa4ee05.png</label>
    <input type="radio" id="image_images_68" name="image[images]" required="required" value="68"><label for="image_images_68" class="required">fcfc7d7d05d63b1f55dff8cbff0bedeb3c917dfc.jpeg</label>
</div> 
```

我现在想要的是所有单选按钮都具有自定义 html5 数据属性，该属性`data-thumb="thumbnail/location.png"`将是`thumb_location`该单选按钮表示的图像对象的属性值。

我希望我足够清楚。如果需要更多信息，我会提供。我已经阅读了很多关于此的内容，但我认为我想象的事情比实际情况更复杂。有一次我只想说'哦，算了，我将手动渲染它'并使用：

```
{% for choice in form.vars.choices %}
    <input type="radio" data-thumb="{{choice.thumb_location}}" />
{% endfor %} 
```

但是我真的很想使用这个令人惊叹的框架提供的良好实践......有时对我来说似乎并不像他们应该的那样明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T00:00:33.920

不确定我是否理解这个问题，您想`data-thumb`直接在表单构建器中设置，对吗？

所以表单构建器包含主要功能（http://api.symfony.com/2.0/Symfony/Component/Form/FormBuilder.html），包括`setAttribute(string $name, string $value)`方法。

您可以执行以下操作：

```
setAttribute('data-thumb', $yourvalue); 
```

要在输入字段中应用这些属性，您需要在 twig 模板中设置属性：

```
 <input type="radio" {{ block('widget_attributes') }} /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:14:43.050

啊，我认为这与 FormType 一样与这个对象有关。所以在这种情况下，我看到了使用 buildView 方法设置变量的可能性。

```
 /**
 * {@inheritdoc}
 */
public function buildView(FormView $view, FormInterface $form, array $options)
{
     $view->vars['thumb'] = $options['thumb'];
} 
```

您可以在 ->add(x, x, array('thumb_location' => 'location')) （或 setDefaultOptions 方法）中设置此选项。

但现在我不敢说实话。因为您需要像这样在视图中设置：

```
<input data-thumb="{{ thumb }}" type="radio" id="blog_article_image_17" name="blog_article[image]" required="required" value="17"> 
```

这意味着你`<input data...`再次手工制作。

不确定在您的情况下这是否可行，但我认为为无线电输入字段定义第二个 FormType 会很好：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
   ...this is your current form builder....

   ->add('radio', MyRadioType());
} 
```

# c# - MySQL 数据库的正确日期时间格式是什么？

> ID：13984638
> 
> 赞同：4
> 
> 时间：2012-12-21T05:14:53.587
> 
> 标签：c#, mysql, sql, insert

我正在使用以下 SQL 字符串将此`DateTime`数据`'12/21/2012 1:13:58 PM'`插入我的 MySQL 数据库：

```
String Query = "INSERT INTO `restaurantdb`.`stocksdb` 
                  (`stock_ID`,`stock_dateUpdated`) 
                  VALUES ('@stockID' '@dateUpdated'); 
```

我收到此错误消息：

```
Incorrect datetime value: '12/21/2012 1:13:58 PM' for column 'stock_dateUpdated' at row 1 
```

那么`dateTime`输入 MySQL 数据库的正确格式/值是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T05:19:05.743

**问：**`DATETIME` MySQL 语句中文字的正确格式/值是什么？

**答：**`DATETIME`在 MySQL 中，文字的标准格式是：

```
 'YYYY-MM-DD HH:MI:SS' 
```

时间组件为 24 小时制（即，小时数字作为 00 到 23 之间的值提供）。

MySQL 提供了一个内置函数`STR_TO_DATE`，可以将各种格式的字符串转换为`DATE`数据`DATETIME`类型。

因此，作为替代方案，您还可以`DATETIME`通过调用该函数来指定 a 的值，如下所示：

```
STR_TO_DATE('12/21/2012 1:13:58 PM','%m/%d/%Y %h:%i:%s %p') 
```

因此，如果您的列表如下所示，您可以让 MySQL 在`INSERT`语句中为您进行转换：`VALUES`

```
... VALUES ('@stockID', STR_TO_DATE('@dateUpdated','%m/%d/%Y %h:%i:%s %p'); 
```

（我注意到您的`VALUES`列表中的两个文字之间缺少必需的逗号。）

* * *

MySQL 确实允许文字部分之间的分隔符有一定的自由度`DATETIME`，因此它们不是严格要求的。

[MySQL 5.5 参考手册。](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T05:18:53.640

我使用的是年月日，24小时制。在 PHP 中它是`date('Y-m-d H:i:s')`，我相信它对应`yyyy-MM-dd HH:mm:ss`于 C#/.NET。（时间部分是可选的，破折号也是。）

在文档中确认，[日期和时间文字](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-literals.html)：

> 日期和时间值可以用多种格式表示，例如带引号的字符串或数字，具体取决于值的确切类型和其他因素。例如，在 MySQL 需要日期的上下文中，它会将 '2015-07-21'、'20150721' 和 20150721 中的任何一个解释为日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:20:57.553

如评论中所述，您缺少`,`值中的分隔符。在插入之前最好`STR_TO_DATE`先将字符串转换为日期对象：

```
String Query = "INSERT INTO `restaurantdb`.`stocksdb` "+
                " (`stock_ID`,`stock_dateUpdated`) VALUES "+
               "('@stockID', STR_TO_DATE(@dateUpdated, '%m/%d/%Y %h:%i:%s %p'))"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T05:24:09.083

MySql DATETIME 格式为 YYYY-MM-DD HH:MM:SS - 请参阅此[页面](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

# c# - Xelement标签问题

> ID：13984641
> 
> 赞同：0
> 
> 时间：2012-12-21T05:15:28.250
> 
> 标签：c#, xml, xelement

`enter code here`嘿伙计们，当我尝试打开测试页面时，我遇到了 xelement 的问题，出现了一个未处理的异常，这是因为

* * *

标签与另一行中的关闭不匹配我尝试添加关闭标签，但错误发生在添加功能可以工作之前

测试页面[http://densetsu.org/PP2012/benchmark1.html](http://densetsu.org/PP2012/benchmark1.html)

那么有没有办法在不丢失标签效果的情况下通过标签问题
这是主要代码：

```
 XElement tree = XElement.Load(toolStripTextBox1.Text);  
             String s = tree.ToString();  
             textBox1.Text = String_dealer.addmissing(s); 
```

这是换弦器

```
 public static String addmissing(String txt)
    {
        if (txt.Contains("<br>") || (txt.Contains("</br>")))
        {
            txt.Replace("<br>", "<br></br>");
            txt.Replace("</br>", "<br></br>");
        }
        else if (txt.Contains("<hr>") || (txt.Contains("</hr>")))
        {
            txt.Replace("<hr>", "<hr> </hr>");
            txt.Replace("</hr>", "<hr> </hr>");
        }

        return txt;
    } 
```

和问题文本： System.Xml.dll 中发生“System.Xml.XmlException”类型的未处理异常

附加信息：第 8 行的“hr”开始标记与“br”的结束标记不匹配。第 9 行，第 10 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:49:48.540

使用来自网络请求的流阅读器，然后将流存储到字符串文件中，之后您可以将字符串传递给 sgml.reader，它将 html 转换为有效的 xml

# c++ - 更改 QMenu 内的 QAction 中的文本

> ID：13984643
> 
> 赞同：3
> 
> 时间：2012-12-21T05:15:35.963
> 
> 标签：c++, qt

我有一个 QMenu 对象，我向其中添加了几个带有特定文本的 QAction 对象。一切都很好，除了我想在运行时更改那些 QActions 的文本。我查看了 QMenu API 并没有找到任何方法来获取它们。我还尝试了 actions.at(x) 和其他一些东西。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:45:21.947

这实际上取决于您如何构建您的应用程序。在某些情况下，您可能会将`QAction`'s 保存为可以直接访问的成员。或者您可能只是保存并用's`QMenu`填充它。`QAction`无论哪种方式，一旦您采取行动，您只需调用`setText(QString)`它：

```
// init
menu = new QMenu(this);
...
menu->addAction("foo");

// later on
QAction *action = menu->actions().at(0); // access just the first QAction
action->setText("bar"); 
```

`QMenu`还允许您按位置查找操作`QPoint`。同样，这实际上取决于您将如何确定要更改的操作。

# asp.net - 带有存储过程 ASP.NET 的文本框搜索 Gridview

> ID：13984645
> 
> 赞同：0
> 
> 时间：2012-12-21T05:15:37.337
> 
> 标签：asp.net, gridview

我有存储过程sp_ItemFilter，但问题是当我在文本框中插入数据时，我按btnButton发送数据，gridview中未显示的变为空，我该如何解决这个问题？使用的代码。

```
 Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Cmd = New SqlCommand("sp_codefilter", Cnn)
    Cmd.CommandType = CommandType.StoredProcedure
    With Cmd.Parameters
        .Add("@codigo", SqlDbType.VarChar, 6).Value = TextBox1.Text
        Cnn.Open()
        Try
            Dim dv As New DataView
            Da = New SqlDataAdapter(Cmd)
            Ds = New DataSet
            GridView1.DataSource = Ds.Tables()
            GridView1.DataBind()
        Catch ex As Exception
            MsgBox(ex.Message)
        Finally
            Cnn.Close()
        End Try
    End With
End Sub
End Class 
```

感谢您阅读我的帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:25:55.820

尝试这个

```
Da = New SqlDataAdapter(Cmd)
Ds = New DataSet   //<---- this DataSet is empty and needs filling

Da.Fill(Ds);  //<------- You need to fill the DataSet here

GridView1.DataSource = Ds.Tables(0)
GridView1.DataBind() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:30:38.507

您需要填充数据集，设置选择命令，并将特定表绑定到 GridView：

```
Dim Cmd As New SqlCommand("sp_codefilter", Cnn)
Cmd.CommandType = CommandType.StoredProcedure
With Cmd.Parameters
    .Add("@codigo", SqlDbType.VarChar, 6).Value = TextBox1.Text
End With

Cnn.Open()
Try
    Dim dv As New DataView
    Da = New SqlDataAdapter()
    Ds = New DataSet
    Da.SelectCommand = Cmd
    Da.Fill(ds, "MyTable");
    GridView1.DataSource = Ds.Tables("MyTable")
    GridView1.DataBind()
Catch ex As Exception
    MsgBox(ex.Message)
Finally
    Cnn.Close()
End Try 
```

# ajax - Prime面临动态添加标签

> ID：13984649
> 
> 赞同：1
> 
> 时间：2012-12-21T05:16:34.223
> 
> 标签：ajax, jsf, tabs, primefaces

是否可以添加动态选项卡（不相关的选项卡）而无需使用素面重新加载页面。

我想做这样的事情

[http://blog.favrik.com/examples/tabs/](http://blog.favrik.com/examples/tabs/)

我们将有一个菜单栏，当单击菜单时，将创建一个动态选项卡。标签应该加载一个页面（xhtml），应该添加标签而不重新加载整个页面并且不依赖任何托管bean（因为我们试图最大程度地使用请求范围）

我已经看到了显示基于 bean 数据添加选项卡的示例。但在我的情况下，每个选项卡都是独立的（页面）

我已经从当前的 flex 应用程序中添加了一个示例图像，（试图将其迁移到 JSF）关于我正在尝试做的事情。每个选项卡就像一个独立的屏幕/xhtml 文件。服务器中没有保存视图状态。单击菜单项时，会添加一个带有新屏幕内容的新选项卡。在页面重新加载时选项卡将丢失（我们可以忍受它，因为我们试图成为无状态）

![示例图像](../Images/00d35e2276cac40dc13a74075344b23f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:02:40.863

您可能需要更详细地**说明**您将在选项卡中放置的内容，从而更加充实您的问题。但是试试这个：

1.  将您的客户端绑定`TabView`到支持 bean 中的一个实例。在 xhmtl 方面：

    ```
    <p:tabView id="myTabPanel" binding="#{myBackingBean.tabView}" /> 
    ```

    在后备豆中

    ```
    TabView tabView = new TabView();
    //getter and setter 
    ```

2.  在方法中实现下面的代码片段以将 a 添加`Tab`为`TabPanel`

    ```
    TabView tabView = new TabView();
    Tab newTab = new Tab();             //Create new Tab
    newTab.setTitle("Tab Title");       //Set a basic property
    tabView.getChildren().add(newTab);  //Add as a child of the TabView 
    ```

3.  使用 primefaces `RequestContext`ajax 更新视图以反映新选项卡

    ```
     RequestContext context = RequestContext.getCurrentInstance();  
      context.update("myTabPanel"); 
    ```

或者，就像 7SpecialGems 指出的那样，您可以简单地将您绑定`TabView`到一个支持 bean 列表，然后简单地向该列表添加一个新项目，`TabView`如上面 3\. 中所示使用 RequestContext 更新以反映更改

# ruby-on-rails - cron 作业失败并显示“未签出。请运行 `bundle install` (Bundler::GitError)”

> ID：13984651
> 
> 赞同：2
> 
> 时间：2012-12-21T05:17:19.953
> 
> 标签：ruby-on-rails, rake, bundler

我似乎有与这篇[文章](https://stackoverflow.com/questions/6648870/is-not-checked-out-bundle-install-does-not-fix-help)类似的问题，其中 Bundler 抱怨没有检出 gem。但是，我在使用 cron 作业运行 rake 任务时显示错误。（否则，该站点似乎使用 Phusion Passenger 在生产中部署良好，并且在命令行中调用 rake 任务时运行）

错误是：/usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/source.rb: `load_spec_files': git://github.com/moneill/Google-Maps-for-Rails.git (at modified_markers) is not checked out. Please run`571:in bundle install` (Bundler::GitError)

我尝试使用`bundle install --deployment` ；`bundle pack`其次是`bundle install --path vendor/cache`。

我没有尝试过的一件事是在本地编译 git 项目并将 gem 安装在`vendor/bundle`文件夹中。我没有为这个特定的服务器使用 RVM。

cron作业命令是 `cd /home/[dir]/[rails_app_folder]/ && RAILS_ENV=production /usr/local/bin/bundle exec rake [task] --trace`

谢谢！

# html - 谷歌如何跟踪 api 请求限制

> ID：13984654
> 
> 赞同：2
> 
> 时间：2012-12-21T05:17:51.280
> 
> 标签：html, ios, api

我正在制作一个移动应用程序，该应用程序将调用一个简单的 URL 驱动 API [Google Directions API](https://developers.google.com/maps/documentation/directions/)，api 使用限制说它每天最多可以执行 2500 个请求。它在 iOS 上。这种 API 不需要我的 API 密钥或任何东西，所以我看不到 2500 请求限制如何应用于这种类型的 API，除非它是同一台机器发出所有请求。

谷歌是否也可以跟踪 html 标头的一部分，该部分在应用程序的不同实例中是唯一的，无论 ip 或机器如何？

我希望这是有道理的。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T06:48:12.807

显然，谷歌以外的人无法最终回答这个问题，但*通常*如果没有 API 密钥，那么限制是每个 IP 地址。没有真正可靠的“在应用程序的不同实例中唯一的 html 标头”（我假设您的意思是 HTTP 标头）-除非您自己设置一些标头，否则我真的怀疑 iOS 是否会在每个 HTTP 中注入一些“应用程序 ID”要求。但是你真的应该就这个问题联系谷歌（他们的意思是每台设备每天 2500 次还是每个应用每天 2500 次），这可能更像是一个法律问题而不是技术问题（例如，如果你的应用变得流行，他们可能会遇到问题您违反了服务条款，即使他们没有检测到它的技术手段）。

# c# - 十进制中的奇迹.ToString()

> ID：13984655
> 
> 赞同：0
> 
> 时间：2012-12-21T05:18:37.493
> 
> 标签：c#, .net

这怎么可能？

```
decimal d = ePhrase.MaxPrice; //ePhrase.MaxPrice==3 - Entity (edmx) object from sql 2012 express data field is decimal (18,2)
string t = d.ToString(); //Why does t=="3,00"?
d = (decimal)3.00;
t = d.ToString(); //t=="3" 
```

问题是在一种情况下 t=="3,00"，而另一种情况下 t=="3"？这两种情况有什么区别？

谢谢大家：

```
decimal d = ePhrase.MaxPrice;
  string t = d.ToString();//t=="3.00"
  d  = 4.0000m;
  t = d.ToString();//t=="4.0000" 
```

问题是“d =（十进制）3.00” - 显然这不是真正的十进制

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T05:29:07.120

如果您希望将数字实数文字视为`decimal`，请使用后缀`m`或`M`

```
d = 3.00m;
t = d.ToString(); //t=="3" 
```

这里：

```
d = (decimal)3.00; 
```

不会将其视为，`decimal`但将被视为`double`

**注意：** *告诉`"m"`编译器将`3.00`视为小数，并且作为转换的一部分将在 originalValue 上发生隐式转换。*

有关更多信息，请参阅此内容：[C# 中的十进制](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.71%29.aspx)

# jquery - 如何在 jquery mobile 中向上滑动 data-role="content"

> ID：13984660
> 
> 赞同：2
> 
> 时间：2012-12-21T05:19:02.100
> 
> 标签：jquery, jquery-mobile

在这里，我的问题是我想为数据角色内容中的所有元素提供上滑效果。我可以使用两个不同的页面创建类似的效果。

```
<div data-role="page" id="firstpage" >
 </div>
 <div data-role="page" id="secondpage" >
    <div data-role="content"   id="projector">
    <ul>
    <li>test</li>
    <li>test</li>
    </ul>
    </div>
    </div>

$("#firstpage").live('pageinit', function (evt) {
     $.mobile.changePage("#secondpage", { transition : 'slideup'});

}); 
```

但是我怎样才能在一个页面中做到这一点？

```
<div data-role="page" id="firstpage" >
<div data-role="content"   id="projector">
<ul>
<li>test</li>
<li>test</li>
</ul>
</div>
</div>

$("#firstpage").live('pageinit', function (evt) {
      $('#projector').slideup(2000);

}); 
```

上面的代码没有给出预期的效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:29:37.350

我希望我能正确理解你的问题。你想对所有数据角色 div 应用上滑效果，那么你可以这样写

```
 <div data-role="page" >
    <div data-role="content"   id="projector">
    <ul>
    <li>test</li>
    <li>test</li>
    </ul>
    </div>
    </div>

    $("#firstpage").live('pageinit', function (evt) {
          $("div[data-role='content']").slideup(2000);

    }); 
```

[更多详细信息请查看此属性等于选择器 [name="value"] 帖子](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:47:06.630

## 解决方案

为 jQM 构建了 2 个漂亮的方法来启用滚动：

### $.mobile.silentScroll

例子：

```
//scroll to Y 100px
$.mobile.silentScroll(100); 
```

这将根据您的页面内容滚动，因此您无需定位页面。更多关于这种方法的信息可以在这里找到：http: [//jquerymobile.com/demos/1.0rc2/docs/api/methods.html](http://jquerymobile.com/demos/1.0rc2/docs/api/methods.html)

### 滚动顶部（值）

例子：

```
$("div.demo").scrollTop(300); 
```

这是从参考点出发的，您需要在某些页面元素上执行此操作。更多关于这个可以在这里找到：http: [//jquerymobile.com/demos/1.0a1/experiments/api-viewer/docs/scrollTop/index.html](http://jquerymobile.com/demos/1.0a1/experiments/api-viewer/docs/scrollTop/index.html)

## 更多信息

如果您想了解有关此主题的更多信息，请查看**[本文](http://www.gajotres.net/prevent-scroll-to-the-top-before-page-transition-in-jquery-mobile/)**，您还将找到工作示例。

# php - PHP无法在表格中显示表格

> ID：13984661
> 
> 赞同：1
> 
> 时间：2012-12-21T05:19:04.247
> 
> 标签：php, html

我一定错过了一些非常简单的东西，但我看不到它。我有一个函数可以生成一个简单的表单，该表单应该在表格中多次显示。每当我尝试在表格单元格中调用该函数时，由于某种原因，表格会显示在表格**上方。**

这是代码的简化版本：

**生成要多次显示的表单的php函数**

```
private function addTaskForm()
{
   // display add task form
   echo "<form method='post' action='#'>
           <select name='task'>
             <option value='1'>Clean</option>
             <option value='1'>Shop</option>
           </select>
           <input type='submit' name='btnSubmit'>
         </form>";
} 
```

**桌子**

```
echo "<table>
        <tr>
          <td>".addTaskForm()."</td> 
          <td>".addTaskForm()."</td>
          <td>".addTaskForm()."</td> 
          <td>".addTaskForm()."</td>
        </tr>
      </table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:21:02.063

您不需要在函数上回显，只需返回字符串，我相信您了解公共/私有/受保护函数

[**键盘**](http://codepad.org/1lw6vDbX)

* * *

**好读**

1.  [PHP：公共、私有、受保护](https://stackoverflow.com/questions/4361553/php-public-private-protected)
2.  [如需全面信息：可见性](http://php.net/manual/en/language.oop5.visibility.php)

# iphone - 使用 ios sdk 在个人 Facebook 墙上发帖并同时标记多个朋友..？

> ID：13984670
> 
> 赞同：1
> 
> 时间：2012-12-21T05:19:50.303
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在尝试在我的墙上发布一条消息，并希望在这篇文章中一次标记多个用户。我尝试了 FB 帖子[页面](https://developers.facebook.com/docs/reference/api/post/)上的各种选项，但无法做到。可能是我做得不对。任何帮助表示赞赏，这就是我的做法......

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"Test 2",@"message",
                               @"100004311843201,1039844409", @"to",
                               nil];
[self.appDelegate.facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

我也尝试过`message_tags`，但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:16:27.313

您需要使用 Open Graph 来标记带有消息的人。me/feed Graph API 端点不支持此功能。

提及标记 [https://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/](https://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/)

动作标记： [https ://developers.facebook.com/docs/technical-guides/opengraph/publish-action/](https://developers.facebook.com/docs/technical-guides/opengraph/publish-action/)

您可以查看最新的 Facebook SDK for iOS 随附的 Scrumptious 示例应用程序，了解如何执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-25T10:58:45.863

要在您的 fb 状态中标记朋友..您需要使用 FBFriendPickerViewController 的朋友的“facebook id”和使用 FBPlacePickerViewController 的“place id”。以下代码将为您提供帮助。

```
NSString *apiPath = nil;

apiPath = @"me/feed";

if(![self.selectedPlaceID isEqualToString:@""]) {

    [params setObject:_selectedPlaceID forKey:@"place"];

}

NSString *tag  = nil;
if(mSelectedFriends != nil){
    for (NSDictionary *user in mSelectedFriends) {
        tag = [[NSString alloc] initWithFormat:@"%@",[user objectForKey:@"id"] ];

        [tags addObject:tag];

    }

    NSString *friendIdsSeparation=[tags componentsJoinedByString:@","];
    NSString *friendIds = [[NSString alloc] initWithFormat:@"[%@]",friendIdsSeparation ];

    [params setObject:friendIds forKey:@"tags"];
}

FBRequest *request = [[[FBRequest alloc] initWithSession:_fbSession graphPath:apiPath parameters:params HTTPMethod:@"POST"] autorelease];

[request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    [SVProgressHUD dismiss];

    if (error) {
        NSLog(@"Error ===== %@",error.description);
        if (_delegate != nil) {
            [_delegate facebookConnectFail:error requestType:FBRequestTypePostOnWall];
        }else{
            NSLog(@"Error ===== %@",error.description);
        }

    }else{

        if (_delegate != nil) {
            [_delegate faceboookConnectSuccess:self requestType:FBRequestTypePostOnWall];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T16:25:19.357

如果您按照关于如何为 iOS 设置 Open Graph 的教程进行操作，那么如果您使用 FriendsPickerController，您可以执行以下操作：

```
// Create an action
id<FBOpenGraphAction> action = (id<FBOpenGraphAction>)[FBGraphObject graphObject];

//Iterate over selected friends
if ([friendPickerController.selection count] > 0) {
    NSMutableArray *temp = [NSMutableArray new];
    for (id<FBGraphUser> user in self.friendPickerController.selection) {
        NSLog(@"Friend selected: %@", user.name);
        [temp addObject:[NSString stringWithFormat:@"%@", user.id]];
    }
    [action setTags:temp];
} 
```

基本上，您可以在操作的“标签”属性上设置一组朋友的 ID

# django - 通过将相关数据与对象中的每个单独项目匹配来基于 Django 中的相关性进行文本搜索

> ID：13984674
> 
> 赞同：0
> 
> 时间：2012-12-21T05:20:25.950
> 
> 标签：django, relevance, text-search

```
class Org(models.Model):
    org_name = models.CharField(max_length=255)
    name = models.CharField(max_length=50)
    phone = models.CharField(max_length=50)
    email_id = models.EmailField()
    incorporation_date = models.DateTimeField()

    def __unicode__(self):
        return self.org_name 
```

手头数据 org_name、name、phone、email_id、incorporation_date... 如何使用我必须与模型中的数据进行比较并根据相关性显示结果的数据。

例子：

```
Apple, Steve, 000-000-0000, steveo@apple.com, 1979 
```

我应该能够将 Apple 与 org_name 中的数据、Steve 中的名称等进行比较，并使用 DJANGO 以相关性降序显示匹配的行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:03:41.040

您可以使用 SQL 编写一些东西，但正确的解决方案是使用全文搜索引擎。[Haystack](http://haystacksearch.org/)是一个很棒的软件包，可以让你快速解决这个问题。

# javascript - 如何使用修改后的值更新元素属性？

> ID：13984675
> 
> 赞同：1
> 
> 时间：2012-12-21T05:20:29.990
> 
> 标签：javascript, jquery, ajax

我正在使用 MachForm 并在其中使用定价功能时将其添加到 li 标签：

```
<li id="li_273" data-pricefield="text" data-pricevalue="8.48" > 
```

表单也有这个字段：

```
<input type="text" class="element text medium" id="element_273" name="element_273" size="30" value="" /> 
```

现在发生的事情是，表单已转换为 ajax 自动完成，这很好并且可以工作。但问题是第一个参考：

```
<li id="li_273" data-pricefield="text" data-pricevalue="8.48" > 
```

不会是所选项目的正确价格。所以我需要的是能够基于 onclick 函数重写该 data-pricevalue。在自动完成中，您可以像这样执行 onclick javascript 命令：

```
'onclick' => 'alert(\'You clicked on the '.$name.' fruit!\');', 
```

现在我有了其余的 javascript，它们应该允许我从 id 中获取 data-pricevalue（例如：id="li_273"），然后将其与输入文本框中的值相乘。最终目标是获取 data-pricevalue * 输入文本来更新屏幕上的总价值。但我不确定如何让数据价格值重新写入正确的价格。

# java - 带通道的检票口气氛示例

> ID：13984687
> 
> 赞同：12
> 
> 时间：2012-12-21T05:21:57.460
> 
> 标签：java, wicket

> 我刚刚看到 wicket 6.40 发布的新功能。我有兴趣查看气氛频道的示例代码。我在哪里可以找到此功能的示例？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T06:06:47.707

这是集成 Wicket 和 Atmosphere 的快速入门应用程序。

[https://github.com/papegaaij/wicket-atmosphere-quickstart](https://github.com/papegaaij/wicket-atmosphere-quickstart)

*   `atmosphere.xml`可以在下面找到`src/main/webapp/META-INF/`
*   `web.xml`在下面`src/main/webapp/WEB-INF/`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T12:02:34.940

这是一个最小的例子： [http ://examples7x.wicket.apache.org/atmosphere/?0](http://examples7x.wicket.apache.org/atmosphere/?0)

它类似于[*RJo*的链接](https://stackoverflow.com/a/14889178/199048)。此外：

*   有一个在线演示。
*   自定义对象被推送到`EventBus`，因此您会看到，只要是，一切都可能被传输`Serializable`。

概括：

*   实例`EventBus`在 中初始化`AtmosphereApplication.java`。
*   这`EventBus`用于`HomePage.java`推送消息。
*   `@Subscribe`中的注释`HomePage.java`用于接收消息。

# facebook - Rails - 将当前网址添加到 Facebook 评论 div href 的正确语法是什么？

> ID：13984688
> 
> 赞同：1
> 
> 时间：2012-12-21T05:22:07.443
> 
> 标签：facebook, ruby-on-rails-3.2

我已经尝试了所有我能想到的变体，将当前 url 路径添加到 facebook 评论 div 中的 href。为什么这不起作用？

```
<div class="fb-comments" data-href="<%= #{request.protocol}#{request.host_with_port}#{request.fullpath} %>" data-width="470" data-num-posts="2"></div> 
```

我也试过这个，但红宝石注入代码的结尾似乎以这种方式结束了 div：

```
<div class="fb-comments" data-href=<%= "#{request.protocol}#{request.host_with_port}#{request.fullpath}" %> data-width="470" data-num-posts="2"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T15:21:48.307

以另一种方式发布以防有人需要它，您在第一次尝试时就接近了，不需要 #{} 因为它已经在 <%= %> 内

这对我有用：

```
<div class="fb-comments" data-href="<%= request.protocol + request.host_with_port + request.fullpath %>" data-width="470" data-num-posts="10"></div> 
```

但是，我使用这种方法检索时遇到了一个小问题，`current_url`因为 URL 中的任何参数都会影响注释的附加位置

例如，将存储与我不想要的`http://localhost:3000/users/1?locale=en`不同的评论！`http://localhsot:3000/users/1?locale=ar`

所以，我发现使用`request.path`而不是`full_path`解决这个问题：

```
<div class="fb-comments" data-href="<%= request.protocol + request.host_with_port + request.path %>" data-width="470" data-num-posts="10"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:12:10.193

我需要使用转换原始 facebook 评论 div 的 content_tag：

```
<div class="fb-comments" data-href="http://example.com" data-width="470" data-num-posts="2"></div> 
```

进入这个：

```
<%= content_tag(:div, nil, :class => 'fb-comments', "data-href" => "#{request.protocol}#{request.host_with_port}#{request.fullpath}", "data-width" => '470', "data-num-posts" => "2"  ) %> 
```

# android - 如何将 XML 中的 CDATA 应用于 asp.net 中的 Web 服务？

> ID：13984689
> 
> 赞同：0
> 
> 时间：2012-12-21T05:22:14.717
> 
> 标签：android, asp.net, web-services, xml-parsing, ashx

如何在 asp.net 中的此类 Web 服务 XML 中应用 CDATA，如

```
<booktitle> data </booktitle> 
```

我有一些像“&”这样的符号，它们阻止我将其解析为 Android。

这是我的代码：

```
for (int iBookResponse = 0; iBookResponse < dataTable.Rows.Count; iBookResponse++)
                {
                    DataRow dataRow = dataTable.Rows[iBookResponse];

                    xmlResponse += "<Book>";
                    xmlResponse += "<BookID>" + dataRow["book_id"].ToString() + "</BookID>";
                    xmlResponse += "<BookCode>" + dataRow["book_code"].ToString() + "</BookCode>";
                    xmlResponse += "<BookTitle>" + dataRow["book_title"].ToString()+ "</BookTitle>";
                   xmlResponse += "</Book>";

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:17:18.947

只需添加`xmlResponse`并附加到它。所以你可以从`<![CDATA[``]]>``xmlResponse`

```
xmlResponse += "<![CDATA[<Book>"; 
```

并以

```
 xmlResponse += "</Book>]]>" 
```

以及介于两者之间的其他一切。

# hadoop - 如何使用 PIG 脚本合并两个文件？

> ID：13984693
> 
> 赞同：1
> 
> 时间：2012-12-21T05:22:41.657
> 
> 标签：hadoop, apache-pig

我有两个文件。我想按顺序合并它。如何使用 Pig/PigLatin 脚本来做到这一点？

```
f1.csv
1,aa
1,aa
1,ab
1,ac
2,bd
2,bd
2,bd
4,ab
4,bc

f2.csv
1,xxx
1,xxy
1,xyx
1,yxx
1,xyy
1,yyx
2,pqr
2,pq
2,pqrs
2,pqs
3,def 
```

我需要的输出是

```
1,aa,1,xxy
1,aa,1,xyx
1,ab,1,yxx
1,ac,1,xyy
2,bd,2,pqr
2,bd,2,pq
2,bd,2,pqrs 
```

谁能帮助我应该使用哪个加入以及如何获得它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-10T08:42:50.040

1）加载每个文件。

2）然后将它们联合在一起

[http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#UNION](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#UNION)

3) 存储新的联合别名。

PS 你可以设置 DEFAULT_PARALLEL 1；确保只输出一个文件。

# android - 使用适用于 android 的 phonegap 应用流式传输视频

> ID：13984694
> 
> 赞同：1
> 
> 时间：2012-12-21T05:22:50.423
> 
> 标签：android, cordova, jquery-mobile, video, streaming

我使用 phonegap、jquerymobile 和 html5 创建了一个应用程序。它包含视频流。页面的内容是动态的，其中包含 iframe。我在 android 4.1 上试了一下，效果很好。我无法在 android 2.2.1/2.3.3/2.3.6 版本中播放它。

我想在 android 设备 2.3 及更高版本中使用 iframe 观看视频。iframe 代码如下所示：

```
<iframe src="http://fast.wistia.com/embed/playlists/mqr7n354p2?autoAdvance=false&media_0_0%5BautoPlay%5D=false&media_0_0%5BcontrolsVisibleOnLoad%5D=false&version=v1&videoOptions%5BautoPlay%5D=false&videoOptions%5BvideoHeight%5D=180&videoOptions%5BvideoWidth%5D=320&videoOptions%5BvolumeControl%5D=true" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_playlist" name="wistia_playlist" width="320" height="180"></iframe> 
```

下面是您可以找到示例代码的链接。 [http://jsfiddle.net/maneeshn/vtP8e/1/](http://jsfiddle.net/maneeshn/vtP8e/1/)

# jsf - Primefaces lineChart - 限制 x-labels 的数量

> ID：13984696
> 
> 赞同：3
> 
> 时间：2012-12-21T05:23:04.963
> 
> 标签：jsf, primefaces, linechart

在一个 JSF 网页中，我通过 Primefaces 显示了一个折线图。每个点对应一个横坐标的日期和他的值。问题是当我开始显示太多点时，会打印所有 x-labels（日期）并且用户无法阅读它们。

有没有办法限制打印的标签数量以避免标签覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:45:15.393

Primefaces 轴标签由`ChartModel`支持它们确定。所以要管理你的情况

1.  将 中的条目限制为`LineChartModel`可管理的数量

2.  使用属性下的 it's`width`和`height`css 值来增加整个图表的大小`style`

3.  使用`max X`or`max Y`限制相应轴上显示的值

# jquery - 将输入 val() 设置为 prev().text()

> ID：13984697
> 
> 赞同：1
> 
> 时间：2012-12-21T05:23:06.197
> 
> 标签：jquery

```
<div class="parent">
    <span>nameValue</span>    <input type="text" value=""/>
    <span>addressValue</span> <input type="text" value=""/>
    <span>phoneValue</span>   <input type="text" value=""/>
    <span>emailValue</span>   <input type="text" value=""/>

     <div class="edit">Edit</div>
</div>

$(document).ready(function(){
    $('.edit').click(function(e){
        $(this).parent().find('input').val(v);   // something like var v = $(this).prev().text() ????? 
    });
}); 
```

我正在尝试将所有输入的值设置为其对应的 prev 元素的文本。但是我怎样才能访问它的 prev 元素？

输入元素没有`id`设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:26:50.837

```
$(this).closest(".parent").find("input").val(function() {
    return $(this).prev().text();
}); 
```

您也可以使用`.each`循环并使用`val()`它们中的每一个，但回调函数是更简洁的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:26:22.727

我要睡觉时没有测试它，但这应该对你有用。

```
$(this).parent().find("input").each(function(){
    $(this).val($(this).prev().html());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:28:12.250

```
$('.edit').click(function(e){
     $inputs = $(this).parent().find('input');
     $inputs.each(function(){
         var v = $(this).prev("span").text();
         $(this).val(v);                  
     });
});​ 
```

看到[这个小提琴](http://jsfiddle.net/arvind07/aN38D/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T05:30:40.120

```
$(document).ready(function(){
$('.edit').click(function(e){       
    var parent = $(this).parent();
    parent.children('span').each(function(){
            $(this).next().val($(this).text());
    });
}); 
```

});

是这样吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T05:31:38.507

```
$('.edit').click(function(e){
    $(this).closest(".parent").find("input[type='text']").each(function(){
        $(this).val($(this).prev().text());
    });
});​ 
```

# jquery - 显示两个搜索框和分页数据的数据表

> ID：13984698
> 
> 赞同：6
> 
> 时间：2012-12-21T05:23:11.267
> 
> 标签：jquery, datatables

我正在尝试将数据表集成到我的项目中。我的一张表有一个按钮来添加额外的行。我使用了[这里](http://www.datatables.net/forums/discussion/8485/add-row-of-inputs-to-match-datatypes/p1)显示的方法。添加一行并提交结果后，我最终得到了双数据表控件，如下所示：

![重复数据表控件](../Images/bc2f97e11f9ffc336798f278714ff37b.png)

**更新**

这是整个页面：

```
<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

            <title>Project name</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="shortcut icon" type="image/png" href="/static/images/favicon.ico" />

        <!-- For third-generation iPad with high-resolution Retina display: -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/images/apple-touch-icon-144x144-precomposed.png">
        <!-- For iPhone with high-resolution Retina display: -->
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/images/apple-touch-icon-114x114-precomposed.png">
        <!-- For first- and second-generation iPad: -->
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/images/apple-touch-icon-72x72-precomposed.png">
        <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
        <link rel="apple-touch-icon-precomposed" href="/static/images/apple-touch-icon-precomposed.png">

        <link rel="stylesheet" href="/static/css/bootstrap.min.css">

        <style>
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
        </style>
        <link rel="stylesheet" href="/static/css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="/static/css/main.css">
        <script src="/static/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>

<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="/">VBEnergyZone</a>
            <div class="nav-collapse">

<ul class="nav">

    <li><a href="/">Home</a></li>
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools<b class="caret"></b></a>
        <ul class="dropdown-menu">

        </ul>
    </li>

        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Administration<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a href="/core/customers/">Customers</a></li>
                <li><a href="/core/meters/">Meters</a></li>
                <li><a href="/core/price_requests/">Price requests</a></li>
                <li><a href="/core/suppliers/">Suppliers</a></li>
                <li><a href="/core/supplier_groups/">Supplier groups</a></li>
                <li><a href="/core/utilities/">Utilities</a></li>
            </ul>
        </li>

        <li><a href="/core/user_profiles/">User Profiles</a></li>
        <li><a href="/admin">Django Admin</a></li>

</ul>

<div class="pull-right">
    <ul class="nav">
        <li><a href="/about"><i class="icon-info-sign icon-white"></i> About</a></li>

            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-star"></i> eevenson<span class="caret"></span></a>

        <ul class="dropdown-menu">
            <li><a href="/core/user_profiles/eevenson/">Profile</a></li>
            <li><a href="/accounts/password_change/">Change password</a></li>
            <li><a href="/accounts/logout/">Log out</a></li>
        </ul>
    </ul>
</div>

            </div>
        </div>
    </div>
</div>

        <div class="container">
            <div class='messages'>

            </div>

    <h2>A Test Customer</h2>
    <h3>Customer</h3>
    <form action="" id="form" enctype="multipart/form-data" method="post">

<div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='NCQ15jA7erX5dAbx20Scr3gWxgaTn3Iq' /> </div><ul class='nav nav-tabs'><li class='active'><a class='tab' href='#tab0' data-toggle='tab'>Basic information</a></li><li><a class='tab' href='#tab1' data-toggle='tab'>Meters</a></li><li><a class='tab' href='#tab2' data-toggle='tab'>Emails</a></li><li><a class='tab' href='#tab3' data-toggle='tab'>Phone numbers</a></li><li><a class='tab' href='#tab4' data-toggle='tab'>Locations</a></li><li><a class='tab' href='#tab5' data-toggle='tab'>Documents</a></li><li><a class='tab' href='#tab6' data-toggle='tab'>Managers</a></li></ul></hr><div  
    class="tab-content" ><div  
    class="tab-pane active"  id="tab0"><div  
    class="row" ><div  
    class="span4" ><div id="div_id_name" class="control-group"><label for="id_name" class="control-label requiredField">
                Name<span class="asteriskField">*</span></label><div class="controls"><input name="name" value="A Test Customer" class="span4 textinput textInput" maxlength="128" type="text" id="id_name" /> </div></div><div id="div_id_legal_name" class="control-group"><label for="id_legal_name" class="control-label ">
                Legal name
            </label><div class="controls"><input id="id_legal_name" type="text" class="span4 textinput textInput" name="legal_name" maxlength="128" /> </div></div><div id="div_id_tags" class="control-group"><label for="id_tags" class="control-label ">
                Tags
            </label><div class="controls"><input id="id_tags" type="text" class="span4 tagwidget" name="tags" /> <p id="hint_id_tags" class="help-block">A comma-separated list of tags.</p></div></div></div><div  
    class="span4" ><div id="div_id_duns_number" class="control-group"><label for="id_duns_number" class="control-label ">
                Duns number
            </label><div class="controls"><input id="id_duns_number" type="text" class="span4 textinput textInput" name="duns_number" maxlength="9" /> </div></div><div id="div_id_taxpayer_id_number" class="control-group"><label for="id_taxpayer_id_number" class="control-label ">
                Taxpayer ID number
            </label><div class="controls"><input id="id_taxpayer_id_number" type="text" class="span4 textinput textInput" name="taxpayer_id_number" maxlength="9" /> </div></div><div id="div_id_customer_type" class="control-group"><label for="id_customer_type" class="control-label ">
                Customer type
            </label><div class="controls"><select id="id_customer_type" class="span4 select" name="customer_type"><option value="" selected="selected">---------</option><option value="MUNI">Munincipality</option><option value="SCDT">School District</option><option value="UNIV">University</option></select></div></div></div><div  
    class="span4" ><div id="div_id_active" class="control-group"><div class="controls"><label for="id_active" class="checkbox "><input id="id_active" checked="checked" type="checkbox" class="span4 checkboxinput" name="active" />
                        Active

                    </label></div></div></div></div></div><div  
    class="tab-pane"  id="tab1"><div  
    class="row" ><div  
    class="span4" ><div id="div_id_meter_textarea" class="control-group"><label for="id_meter_textarea" class="control-label ">
                List of meters
            </label><div class="controls"><textarea id="id_meter_textarea" rows="10" cols="40" name="meter_textarea" class="span4 textarea"></textarea><p id="hint_id_meter_textarea" class="help-block">Enter meter ESI IDs one per line.  Meters will become owned             by customer.  New meter ESI IDs will be created as necessary.              Duplicate ESI IDs will be ignored.  Meters owned by a             different customer will change ownership.</p></div></div></div><div  
    class="span4" ><div id="div_id_utility" class="control-group"><label for="id_utility" class="control-label ">
                Utility
            </label><div class="controls"><select id="id_utility" class="span4 select" name="utility"><option value="" selected="selected">---------</option></select></div></div></div><div  
    class="span4" ></div></div><fieldset><legend>Meters</legend><input type="hidden" name="meters-TOTAL_FORMS" value="0" id="id_meters-TOTAL_FORMS" /> <input type="hidden" name="meters-INITIAL_FORMS" value="0" id="id_meters-INITIAL_FORMS" /><input type="hidden" name="meters-MAX_NUM_FORMS" id="id_meters-MAX_NUM_FORMS" /> <table id="meters" class="formsetTable"><thead><tr><th>ESI ID</th><th>Utility</th><th class="vbNoSearchSort">Delete?</th></tr></thead><tbody></tbody></table></fieldset></hr></div><div  
    class="tab-pane"  id="tab2"><div  
    class="row" ><div  
    class="span4" ></div><div  
    class="span4" ></div><div  
    class="span4" ></div></div><fieldset><legend>Emails</legend><input type="hidden" name="emails-TOTAL_FORMS" value="1" id="id_emails-TOTAL_FORMS" /> <input type="hidden" name="emails-INITIAL_FORMS" value="0" id="id_emails-INITIAL_FORMS" /><input type="hidden" name="emails-MAX_NUM_FORMS" id="id_emails-MAX_NUM_FORMS" /> <table id="emails" class="formsetTable"><thead><tr><th>Email</th><th>Email type</th><th class="vbNoSearchSort">Delete?</th></tr></thead><tbody><tr class="row1"><td><input id="id_emails-0-email" type="text" name="emails-0-email" maxlength="75" /> </td><td><input id="id_emails-0-email_type" type="text" name="emails-0-email_type" maxlength="128" /> </td><td><input type="hidden" name="emails-0-id" id="id_emails-0-id" /> <input type="checkbox" name="emails-0-DELETE" id="id_emails-0-DELETE" /></td></tr></tbody><tfoot><tr style="display:none;" class="template"><td><input id="id_emails-NUM-email" type="text" name="emails-NUM-email" maxlength="75" /> </td><td><input id="id_emails-NUM-email_type" type="text" name="emails-NUM-email_type" maxlength="128" /> </td><td><input type="hidden" name="emails-NUM-id" id="id_emails-NUM-id" /> <input type="checkbox" name="emails-NUM-DELETE" id="id_emails-NUM-DELETE" /></td></tr></tfoot></table></fieldset></hr><input class='addEmail btn btn-primary' name="addRow" value="Add row" /> </div><div  
    class="tab-pane"  id="tab3"><div  
    class="row" ><div  
    class="span4" ></div><div  
    class="span4" ></div><div  
    class="span4" ></div></div></div><div  
    class="tab-pane"  id="tab4"><div  
    class="row" ><div  
    class="span4" ></div><div  
    class="span4" ></div><div  
    class="span4" ></div></div></div><div  
    class="tab-pane"  id="tab5"><div  
    class="row" ><div  
    class="span4" ></div><div  
    class="span4" ></div><div  
    class="span4" ></div></div></div><div  
    class="tab-pane"  id="tab6"><div  
    class="row" ><div  
    class="span4" ></div><div  
    class="span4" ></div><div  
    class="span4" ></div></div></div></div>

        <div class="btn-toolbar">
            <input class='btn btn-primary' type="submit" name="submit" value="Submit changes" />
            <a href="/core/customers/" class="btn btn-primary">Cancel</a>
        </div>
    </form>

                <hr/>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/static/js/vendor/jquery-1.8.3.min.js"><\/script>')</script>
        <script src="/static/js/vendor/bootstrap.min.js"></script>
        <script src="/static/js/main.js"></script>

    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">

    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>

    <script>    

    /* Create an array with the values of all the input boxes in a column */
    $.fn.dataTableExt.afnSortData['dom-text'] = function  ( oSettings, iColumn )
    {
        var aData = [];
        $( 'td:eq('+iColumn+') input:last', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
            aData.push( this.value );
        } );
        return aData;
    }

    /* Create an array with the values of all the select options in a column */
    $.fn.dataTableExt.afnSortData['dom-select'] = function  ( oSettings, iColumn )
    {
        var aData = [];
        $( 'td:eq('+iColumn+') select:last', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
            aData.push( $(this).val() );
        } );
        return aData;
    }

    /* Create an array with the values of all the checkboxes in a column */
    $.fn.dataTableExt.afnSortData['dom-checkbox'] = function  ( oSettings, iColumn )
    {
        var aData = [];
        $( 'td:eq('+iColumn+') input:last', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
            aData.push( this.checked==true ? "1" : "0" );
        } );
        return aData;
    }

        $(document).ready(function() {
            $('#meters').dataTable(
                {
                    "aoColumns": [
                        null,
                        null,
                        { "sSortDataType": "dom-checkbox" },
                    ],
                    "aoColumnDefs": [
                        { 
                            "aTargets":     ["vbNoSearchSort"],
                            "bSearchable":  false,
                            "bSortable":    false
                        }
                    ],
                    "bProcessing"   :true,
                    "bStateSave"    :true,
                    "sPaginationType": "full_numbers"
                }
            );

            $('#emails').dataTable(
                {
                    "aoColumns": [
                        { "sSortDataType": "dom-text" },
                        { "sSortDataType": "dom-text" },
                        { "sSortDataType": "dom-checkbox" },
                    ],
                    "aoColumnDefs": [
                        { 
                            "aTargets":     ["vbNoSearchSort"],
                            "bSearchable":  false,
                            "bSortable":    false
                        }
                    ],
                    "bProcessing"   :true,
                    "bStateSave"    :true,
                    "sPaginationType": "full_numbers"
                }
            );

        } );
    </script>

    <script>
    var emailsTable;
    var metersTable;

    $(document).ready(function() {
        $('#form').submit( function() {
            var sData = 
                emailsTable.$('input')
                .add(metersTable.$('input'))
                .add('input')
                .add('textarea')
                .add('select')
                .serialize();
            $.post('', sData, function(data){$('body').html(data); });
            // $.post('', sData, function(data){
            //  var messages = $('.messages', data);
            //  $('.messages').replaceWith(messages);
            // });
            return false;
        } );

        emailsTable = $('#emails').dataTable();
        metersTable = $('#meters').dataTable();
    } );

    $('.addEmail').click(function(){
        var type = 'emails'
        var total = $('#' + type).dataTable().fnSettings().fnRecordsTotal();
        var tableId = $('#'+ type).attr('id');
        var template = new Array();

        $('#'+tableId+' tfoot tr.template td')
        .clone()
        .each(function(){
            $(this).html($(this).html().replace(/NUM/g,total));
        })
        .each(function(){
            template.push($(this).html());
        });

        $('#'+tableId).dataTable().fnAddData(template);
        total++;
        $('#id_' + type + '-TOTAL_FORMS').val(total);

    });
    </script>

    </body>
</html> 
```

为什么在提交后向表#emails 添加行会导致重复的数据表控件？

出于某种原因，数据表将 div#emails_wrapper 嵌入到另一个 div#emails_wrapper 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T23:15:24.273

我在数据表上从艾伦那里得到了一些[有用的意见。](http://datatables.net/forums/discussion/13312/problem-getting-double-controls#Item_1)具体来说：

> $('body').html(数据);
> 
> 您正在重写整个 HTML 正文的树 - 因此，当您调用 $('#emails').dataTable() 时，DataTables 将检查该节点上是否已经有一个表（注意这是一个节点检查，而不是 ID 检查)，但是没有，因为你已经销毁它并重写了它。因此，旧表中的原始 HTML 仍然存在，并且 DataTables 添加了一个新表，因为它是一个新的 HTML 表元素。
> 
> 因此，您需要在重写整个树之前销毁表，或者最好不要重写整个树，只需操作要更新的位即可。

# linux - 停止和启动 EC2 实例后从 /mnt 目录中删除的数据

> ID：13984699
> 
> 赞同：1
> 
> 时间：2012-12-21T05:23:14.183
> 
> 标签：linux, amazon-web-services, amazon-ec2

停止和启动 EC2 实例后从 /mnt 目录中删除的数据

```
[root@localhost opt]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/xvda1            9.7G  1.4G  7.8G  15% /
none                  1.9G     0  1.9G   0% /dev/shm
/dev/xvdb             394G  199M  374G   1% /mnt 
```

我将我的数据放在 /mnt 中。我昨天停止了实例。今天启动实例后，我没有找到任何数据表 /mnt 。我有另一个来自 /opt 。

如何从 /mnt 恢复该数据。

如果 /mnt 是临时安装点。那么我该如何使用这些空间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-12T00:57:59.477

重新启动/重新启动会擦除临时存储是一个常见的误解 - 这是不正确的。

你可以自己试试看。

什么将是停止/启动-实际上取消配置您的VM，然后将其移动到另一台主机-这将擦除临时驱动器，然后在连接您的root ebs（至少）的情况下启动它。停止/启动和重新启动经常混为一谈——但在这里它们是非常不同的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T05:37:02.767

在 上`EC2`，`/mnt`目录被挂载到临时存储。

重启或实例停止/启动后，所有数据都将丢失。

请参考[这篇文章](https://stackoverflow.com/questions/11566223/what-data-is-stored-in-ephemeral-storage-of-amazon-ec2-instance)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:51:15.300

`/mnt`实际上应该只用于临时数据存储，如果需要重新启动实例，这并不重要。这实际上非常适合本地磁盘缓存、临时数据存储等，因为从 I/O 的角度来看，这种临时存储通常比 EBS 卷挂载性能更好。只需了解您应该只将非关键数据放在那里。

# php - 在我的 twitter 应用程序中为网站请求访问令牌时显示 401 错误

> ID：13984700
> 
> 赞同：0
> 
> 时间：2012-12-21T05:23:37.460
> 
> 标签：php, twitter, http-status-code-401

我正在开发我的第一个 twitter 应用程序。我设法获得 request_token，并在 twitter 登录后成功重定向。但我的问题是我无法获得显示 401 响应的访问令牌。

```
session_start();
require_once('tmhOAuth.php');

$connection = new tmhOAuth(array(
'consumer_key' => '****',
'consumer_secret' => '****'

 ));

$connection->request('POST',$connection->url('oauth/request_token',""),array('oauth_callback' =>"http://www.123.in/twitter/twitterin.php"));

$result=$connection->extract_params($connection->response['response']);
$_SESSION['oauth_token']=$result['oauth_token'];
$_SESSION['oauth_token_secret']=$result['oauth_token_secret'];
$url='https://api.twitter.com/oauth/authenticate?oauth_token='.$result['oauth_token'];
header("Location:". $url); 
```

上面的代码工作正常，但在重定向页面 twitter/twitterin.php

```
session_start();
require_once('tmhOAuth.php');

$connection = new tmhOAuth(array(
'consumer_key' => '****',
'consumer_secret' => '****'

 ));

$oauth_token=$_GET['oauth_token'];
$oauth_verifier=$_GET['oauth_verifier'];

 $connection->config["user_token"]=$_SESSION['oauth_token'];
 $connection->config["oauth_token_secret"]=$_SESSION['oauth_token_secret'];

$connection->request("POST", $connection-      >url("oauth/access_token",""),array("oauth_verifier"=>$oauth_verifier));
var_dump($connection->response); 
```

我收到 401 错误作为响应

///

```
array(7) {
  ["raw"]=>
   string(1030) "HTTP/1.1 401 Unauthorized
Date: Fri, 21 Dec 2012 06:24:19 GMT
Status: 401 Unauthorized
Last-Modified: Fri, 21 Dec 2012 06:24:19 GMT
 Cache-Control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0
X-Transaction: a661a742c22b99be
Content-Type: text/html; charset=utf-8
X-MID: 9a96b4c8e27ef14ac86e72706ccd42c44121b507
X-Frame-Options: SAMEORIGIN
X-Runtime: 0.01811
Pragma: no-cache
Expires: Tue, 31 Mar 1981 05:00:00 GMT
Set-Cookie: k=10.35.51.118.1356071059097811; path=/; expires=Fri, 28-Dec-12 06:24:19        GMT; domain=.twitter.com
Set-Cookie: guest_id=v1%3A13560710591072098; domain=.twitter.com; path=/; expires=Sun,   21-Dec-2014 18:24:19 GMT
Set-Cookie:    _twitter_sess=BAh7CCIKZmxhc2hJQzonQWN0aW9uQ29udHJvbGxlcjo6Rmxhc2g6OkZsYXNo%250ASGFzaHsABjoK     QHVzZWR7ADoHaWQiJThiOGE1OGQ3NTM4NTNlNTFmMmU1OGM3%250ANjliMDkxZjVkOg9jcmVhdGVkX2F0bCsIpD4ivDsB--c080621b27b01e102bd15dd85e14c984242127f8; domain=.twitter.com; path=/; HttpOnly
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 21 
```

服务器：tfe

```
 "
   ["headers"]=>
   array(18) {
    ["HTTP/1.1 401 Unauthorized"]=>
    string(0) ""
    ["Date"]=>
    string(29) "Fri, 21 Dec 2012 06:24:19 GMT"
    ["Status"]=>
    string(16) "401 Unauthorized"
    ["Last-Modified"]=>
    string(29) "Fri, 21 Dec 2012 06:24:19 GMT"
    ["Cache-Control"]=>
     string(62) "no-cache, no-store, must-revalidate, pre-check=0, post-check=0"
    ["X-Transaction"]=>
    string(16) "a661a742c22b99be"
    ["Content-Type"]=>
    string(24) "text/html; charset=utf-8"
    ["X-MID"]=>
    string(40) "9a96b4c8e27ef14ac86e72706ccd42c44121b507"
    ["X-Frame-Options"]=>
   string(10) "SAMEORIGIN"
    ["X-Runtime"]=> 
    string(7) "0.01811"
    ["Pragma"]=>
    string(8) "no-cache"
    ["Expires"]=>
   string(29) "Tue, 31 Mar 1981 05:00:00 GMT"
   ["Set-Cookie"]=>
   string(265)   "_twitter_sess=BAh7CCIKZmxhc2hJQzonQWN0aW9uQ29udHJvbGxlcjo6Rmxhc2g6OkZsYXNo%250ASGFzaHsABjo  KQHVzZWR7ADoHaWQiJThiOGE1OGQ3NTM4NTNlNTFmMmU1OGM3%250ANjliMDkxZjVkOg9jcmVhdGVkX2F0bCsIpD4ivDsB--c080621b27b01e102bd15dd85e14c984242127f8; domain=.twitter.com; path=/; HttpOnly"
    ["Vary"]=>
    string(15) "Accept-Encoding"
    ["Content-Encoding"]=>
   string(4) "gzip"
    ["Content-Length"]=>
    string(2) "21"
    ["Server"]=>
    string(3) "tfe"
    [""]=>
    string(0) ""
  }
  ["code"]=>
  int(401)
  ["response"]=>
   string(1) " "
   ["info"]=>
   array(22) {
    ["url"]=>
     string(42) "https://api.twitter.com/oauth/access_token"
     ["content_type"]=>
    string(24) "text/html; charset=utf-8"
    ["http_code"]=>
    int(401)
    ["header_size"]=>
    int(1029)
    ["request_size"]=>
    int(507)
    ["filetime"]=>
    int(-1)
    ["ssl_verify_result"]=>
    int(0)
    ["redirect_count"]=>
    int(0)
    ["total_time"]=>
    float(0.364576)
    ["namelookup_time"]=>
    float(0.002676)
    ["connect_time"]=>
    float(0.079689)
    ["pretransfer_time"]=>
    float(0.255704)
    ["size_upload"]=>
    float(0)
    ["size_download"]=>
    float(21)
    ["speed_download"]=>
    float(57)
    ["speed_upload"]=>
    float(0)
    ["download_content_length"]=>
    float(21)
    ["upload_content_length"]=>
    float(0)
    ["starttransfer_time"]=>
    float(0.364164)
    ["redirect_time"]=>
    float(0)
    ["certinfo"]=>
    array(0) {
    }
    ["request_header"]=>
    string(507) "POST /oauth/access_token HTTP/1.1
User-Agent: tmhOAuth 0.7.2+SSL - //github.com/themattharris/tmhOAuth
Host: api.twitter.com
Accept: */*
Accept-Encoding: deflate, gzip
Authorization: OAuth oauth_consumer_key="*****",
 oauth_nonce="****", oauth_signature="TzcIi0kOwhQ20xRMUQvYYl093B0%3D",         oauth_signature_method="HMAC-SHA1", oauth_timestamp="1356071058",     oauth_verifier="H2gFsotBlUPRBCdLu8ULpaV7fQVmSMGNmIaiWiYPERY", oauth_version="1.0"
Content-Length: 0 
```

" } ["error"]=> string(0) "" ["errno"]=> int(0) }

////

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:34:52.307

您是否确保您的 Twitter 应用程序在 OAuth 中具有读/写权限？这可能会导致“未经授权”的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:14:53.790

最后我得到了一些工作。这是会话变量中的问题。$_SESSION['oauth_token'] 和 $_SESSION['oauth_token_secret'] 而我使用了 $_SESSION['otoken'] 和 $_SESSION['osecret']。然后我开始工作了。

# apache-pig - Pig：在嵌套的 foreach 中获取索引

> ID：13984701
> 
> 赞同：1
> 
> 时间：2012-12-21T05:23:38.733
> 
> 标签：apache-pig

我有一个猪脚本，其代码如下：

```
scores = LOAD 'file' as (id:chararray, scoreid:chararray, score:int);
scoresGrouped = GROUP scores by id;
top10s = foreach scoresGrouped{
    sorted = order scores by score DESC;
    sorted10 = LIMIT sorted 10;
    GENERATE group as id, sorted10.scoreid as top10candidates;
}; 
```

它给了我一个像

```
 id1, {(scoreidA),(scoreidB),(scoreIdC)..(scoreIdFoo)} 
```

但是，我也希望包含项目的索引，所以我会得到类似的结果

```
 id1, {(scoreidA,1),(scoreidB,2),(scoreIdC,3)..(scoreIdFoo,10)} 
```

是否可以在嵌套的 foreach 中以某种方式包含索引，或者我必须编写自己的 UDF 以在之后添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:14:19.120

您将需要一个 UDF，其唯一参数是您要为其添加排名的排序包。我以前也有同样的需求。这是为您节省一点时间的 exec 函数：

```
public DataBag exec(Tuple b) throws IOException {
    try {
        DataBag bag = (DataBag) b.get(0);
        Iterator<Tuple> it = bag.iterator();
        while (it.hasNext()) {
            Tuple t = (Tuple)it.next();
            if (t != null && t.size() > 0 && t.get(0) != null) {
                t.append(n++);
            }
            newBag.add(t);
        }
    } catch (ExecException ee) {
        throw ee;
    } catch (Exception e) {
        int errCode = 2106;
        String msg = "Error while computing item number in " + this.getClass().getSimpleName();
        throw new ExecException(msg, errCode, PigException.BUG, e);           
    }

    return newBag;
} 
```

（计数器`n`被初始化为`exec`函数外部的类变量。）

您还可以实现[Accumulator 接口](http://ofps.oreilly.com/titles/9781449302641/writing_udfs.html)，即使您的整个包不适合内存，您也可以这样做。（ COUNT 内置函数就是这样做的。）只要确保`n = 1L;`在`cleanup()`方法和`return newBag;`in 中设置`getValue()`，其他一切都是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T14:26:51.517

对于包中的索引元素，您可以使用来自 LinkedIn 的[DataFu](http://data.linkedin.com/opensource/datafu)项目的[Enumerate UDF：](http://linkedin.github.com/datafu/docs/javadoc/datafu/pig/bags/Enumerate.html)

```
register '/path_to_jar/datafu-0.0.4.jar';
define Enumerate datafu.pig.bags.Enumerate('1');
scores = ...
...
result = foreach top10s generate id, Enumerate(top10candidates); 
```

# objective-c - 饼图的核心绘图轴集不起作用

> ID：13984708
> 
> 赞同：1
> 
> 时间：2012-12-21T05:24:13.373
> 
> 标签：objective-c, ios, core-plot, pie-chart

我正在尝试隐藏饼图的轴集，`graph.axisset = nil;`但它不起作用。有没有其他方法可以删除图形的默认轴集。

```
CPTXYGraph *graph = [[CPTXYGraph alloc]initWithFrame:self.hostingView.frame];
graph.borderColor = [CPTColor whiteColor].cgColor;
graph.paddingTop = 0.0f;
graph.paddingRight = 0.0f;
graph.paddingLeft = 0.0f;
graph.paddingBottom = 0.0f;
graph.axisSet = nil;
self.hostingView.hostedGraph = graph;

//Apply for theme to graph
self.graphTheme = [CPTTheme themeNamed:kCPTPlainWhiteTheme];
[graph applyTheme:self.graphTheme];
[graph release];
CPTPieChart *pieChart = [[CPTPieChart alloc]init];
pieChart.identifier = @"OverView";
pieChart.dataSource = self;
pieChart.sliceDirection = CPTPieDirectionClockwise;
pieChart.pieRadius = ((self.hostingView.frame.size.height  / 2) - 5);
pieChart.startAngle = M_PI;
CPTGraph *tempGraph = self.hostingView.hostedGraph;
[tempGraph addPlot:pieChart];
[pieChart release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:12:20.973

它是`graph.axisSet = nil;`（注意大写的“S”）。

不要`borderColor`在图表或任何其他 Core Plot 图层上设置 。始终使用 Core Plot 线条样式和填充属性来设置图形各个部分的外观。

# iphone - iPhone应用程序中的实时文本流

> ID：13984710
> 
> 赞同：1
> 
> 时间：2012-12-21T05:24:31.767
> 
> 标签：iphone, ios6, http-live-streaming

我想在我的应用程序中显示实时文本。我希望它不会中断并继续我的应用程序。

例如，如果有人写“你好”，那么我会从服务器得到“你好”。现在假设他们输入“早安”，那么我只会得到“早安”作为回应。只要我想要的下一个类型是什么。

我只想调用一个网络服务，然后我想从中获取实时数据。对此，iphone 端的逻辑应该是什么。

我搜索了很多文本直播，但我只得到 HLS。

我已经阅读了苹果文档，但我不明白如何使用它。

还有其他解决方案吗？或任何其他逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:55:36.347

看这个教程。。

[如何创建基于套接字的 iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

许多 iOS 应用程序使用 HTTP 与 Web 服务器通信，因为它简单、方便且得到很好的支持。在上面的教程中，您会看到代码以及有关它的演示。

希望这对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:29:27.887

查看[Web Sockets](http://en.wikipedia.org/wiki/WebSocket)，它们对这类事情非常有用。此外，[Pusher](http://pusher.com)是一个相当容易上手的 Web 套接字服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:42:29.817

以下链接为“教程：如何使用 Cocoa 类构建 iOS 聊天应用程序”之类的聊天应用程序源代码和 php 代码可在以下链接中找到

```
http://www.ibm.com/developerworks/library/x-ioschat/index.html 
```

# colors - Jqplot 饼图/甜甜圈图 seriesColors 数组未重用/重复

> ID：13984712
> 
> 赞同：0
> 
> 时间：2012-12-21T05:24:38.037
> 
> 标签：colors, jqplot, reusability, series, donut-chart

我正在使用 jqplot 绘制饼图和圆环图。我正在使用“seriesColors”为切片提供自定义颜色[http://www.jqplot.com/docs/files/jqplot-core-js.html#jqPlot.seriesColors](http://www.jqplot.com/docs/files/jqplot-core-js.html#jqPlot.seriesColors)

系列颜色：[“0571B0”、“#5E3C99”、“#008837”]

如果数据（要传递的数组值）只有三个值，那么它会正确显示颜色。但如果有超过 3 个值，它只会以黑色显示该切片。它不会从一开始就重复/重用颜色（如文档中所述）。

这里是：

```
var s2 = [['a', 8], ['b', 12], ['c', 6]];
var plot1 = $.jqplot('div_1', [s2], {
                title: 'Chart 1',

                seriesDefaults:{
                  renderer:$.jqplot.DonutRenderer ,
                  rendererOptions:{
                        startAngle: -90,
                        innerDiameter: 100,
                        showDataLabels: true,
                        dataLabels:'percent'
                     }
                    },
                    seriesColors: ["#0571B0", "#5E3C99", "#008837"],
                    highlighter: {
                        show: true
                    },
                    legend: { show:true, rendererOptions: {numberRows: 1}, location: 's', placement: 'outsideGrid'}
                }); 
```

但是如果我在数组中添加第 4 个值，颜色就不会被重用。即如果我将上面的数组修改为

```
var s2 = [['a', 8], ['b', 12], ['c', 6], ['d', 9]]; 
```

然后第 4 个切片 ('d') 以黑色显示。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:28:22.757

找到了解决办法。希望这可以帮助其他面临类似问题的人。

这是代码。

```
var dataValues = [['a', 8], ['b', 12], ['c', 6], ['d', 9], ['e', 14]];

//Define the seriesColors array..
var seriesColors = ["#0571B0", "#5E3C99", "#008837"];

var seriesColorsLength = seriesColors.length;
var donutChartSeriesColors = new Array();

//Prepare a new array which would be passe to the chart..
//This will handle even if there are more value than the seriesColors array..
for(var i = 0; i < dataValues.length; i++) {
donutChartSeriesColors[i] = seriesColors[(seriesColorsLength-1) % i];
}

var plot1 = $.jqplot('div_1', [dataValues ], {
            title: 'Chart 1',

            seriesDefaults:{
              renderer:$.jqplot.DonutRenderer ,
              rendererOptions:{
                    startAngle: -90,
                    innerDiameter: 100,
                    showDataLabels: true,
                    dataLabels:'percent'
                 }
                },
                seriesColors: donutChartSeries,
                highlighter: {
                    show: true
                }
}); 
```

# android - Soundpool：样品未准备好

> ID：13984723
> 
> 赞同：0
> 
> 时间：2012-12-21T05:26:12.033
> 
> 标签：android, gstreamer, soundpool

我已将 Android 中的默认媒体框架从 Stagefright 更改为 Gstreamer。这样做是为了使其对我们的项目具有灵活性。

但是当我运行一些 apk 时，应用程序的所有声音都在应用程序启动时播放，并且在显示来自 Soundpool 的错误“sample # not READY”之后它不会播放。例如，在 App Baby 钢琴中，当我启动应用程序时，会播放钢琴音节的声音，而当我在进入播放模式后实际点击钢琴时，它不会被播放。

我认为的问题是，当声音被加载到 Soundpool 中时，会创建 Gstreamer Mediaplayer 对象并播放它，并且它是在应用程序启动时完成的。

在它显示的日志中，Sample Channel Count(0) 超出范围。它发生在下面部分的 SoundPoool.cpp 文件中。

```
status_t Sample::doLoad() {
    uint32_t sampleRate;
    int numChannels;
    int format;
    sp<IMemory> p;
    LOGW("Start decode");
    if (mUrl) {
        p = MediaPlayer::decode(mUrl, &sampleRate, &numChannels, &format);
    } else {
        p = MediaPlayer::decode(mFd, mOffset, mLength, &sampleRate, &numChannels, &format);
        LOGW("close(%d)", mFd);
        ::close(mFd);
        mFd = -1;
    }
    if (p == 0) {
        LOGE("Unable to load sample: %s", mUrl);
        return -1;
    }
    LOGW("pointer = %p, size = %u, sampleRate = %u, numChannels = %d",
            p->pointer(), p->size(), sampleRate, numChannels);

    if (sampleRate > kMaxSampleRate) {
       LOGE("Sample rate (%u) out of range", sampleRate);
       return - 1;
    }

    if ((numChannels < 1) || (numChannels > 2)) {
        LOGE("Sample channel count (%d) out of range", numChannels);
        return - 1;
    }

    //_dumpBuffer(p->pointer(), p->size());
    uint8_t* q = static_cast<uint8_t*>(p->pointer()) + p->size() - 10;
    //_dumpBuffer(q, 10, 10, false);

    mData = p;
    mSize = p->size();
    mSampleRate = sampleRate;
    mNumChannels = numChannels;
    mFormat = format;
    mState = READY;
    return 0; } 
```

并且 MediaPlayerService 解码函数从下面的代码部分将所有值返回为 null

```
sp<IMemory> MediaPlayerService::decode(int fd, int64_t offset, int64_t length, uint32_t *pSampleRate, int* pNumChannels, int* pFormat)
{
    LOGD("decode(%d, %lld, %lld)", fd, offset, length);
    sp<MemoryBase> mem;
    sp<MediaPlayerBase> player;

    player_type playerType = getPlayerType(fd, offset, length);
    LOGD("player type = %d", playerType);

    // create the right type of player
    sp<AudioCache> cache = new AudioCache("decode_fd");
    player = android::createPlayer(playerType, cache.get(), cache->notify);
    if (player == NULL) goto Exit;
    if (player->hardwareOutput()) goto Exit;

    static_cast<MediaPlayerInterface*>(player.get())->setAudioSink(cache);

    // set data source
    if (player->setDataSource(fd, offset, length) != NO_ERROR) goto Exit;

    LOGD("prepare");
    player->prepareAsync();

    LOGD("wait for prepare");
    if (cache->wait() != NO_ERROR) goto Exit;

    LOGD("start");
    player->start();

    LOGD("wait for playback complete");
    if (cache->wait() != NO_ERROR) goto Exit;

    mem = new MemoryBase(cache->getHeap(), 0, cache->size());
    *pSampleRate = cache->sampleRate();//Nes
    *pNumChannels = cache->channelCount();
    *pFormat = cache->format();

    LOGD("return memory @ %p, sampleRate=%u, channelCount = %d, format = %d", mem->pointer(), *pSampleRate, *pNumChannels, *pFormat);

Exit:
    if (player != 0) player->reset();
    ::close(fd);
    return mem;
} 
```

该函数返回的采样率、通道等的值为 0。

在此之后，当播放样本时，它显示错误““样本#未就绪”

```
int SoundPool::play(int sampleID, float leftVolume, float rightVolume,
        int priority, int loop, float rate)
{
    LOGW("sampleID=%d, leftVolume=%f, rightVolume=%f, priority=%d, loop=%d, rate=%f",
            sampleID, leftVolume, rightVolume, priority, loop, rate);
    sp<Sample> sample;
    SoundChannel* channel;
    int channelID;

    // scope for lock
    {
        Mutex::Autolock lock(&mLock);

        // is sample ready?
        sample = findSample(sampleID);
        if ((sample == 0) || (sample->state() != Sample::READY)) {
            LOGW("  sample %d not READY", sampleID);
            return 0;
        }

        dump();

        // allocate a channel
        channel = allocateChannel(priority);

        // no channel allocated - return 0
        if (!channel) {
            LOGW("No channel allocated");
            return 0;
        }

        channelID = ++mNextChannelID;
    }

    LOGW("channel state = %d", channel->state());
    channel->play(sample, channelID, leftVolume, rightVolume, priority, loop, rate);
    return channelID;
} 
```

有没有解决这个问题的方法..请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:57:56.703

您也可以使用此方法

```
public void loadSound (String strSound, int stream) {
     boolean loaded = false;
     mSoundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
            @Override
            public void onLoadComplete(SoundPool soundPool, int sampleId,
                    int status) {
                mSoundPool.play(stream, streamVolume, streamVolume, 1, LOOP_1_TIME, 1f);
            }
        });
    try {
          stream= mSoundPool.load(aMan.openFd(strSound), 1);
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T21:03:34.890

我在 android 2.0 上遇到了同样的问题，并通过使用 .ogg 格式而不是 .mp3 格式来解决我使用的声音，正如[这里](https://groups.google.com/forum/#!topic/android-developers/hKJAp8P4vMI)提到的那样。我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:54:42.700

Sample not ready 通常表示它还没有被加载，即它还在加载中。（也许您切换到的框架可能会加载更长的时间。）

你应该订阅它`onLoadCompleteListener`，当你收到回调时，声音就可以播放了。在此之前，它将无法播放。

# wordpress - IE 9 和 8 Phorum/Wordpress 模板损坏

> ID：13984726
> 
> 赞同：0
> 
> 时间：2012-12-21T05:26:35.357
> 
> 标签：wordpress, internet-explorer-8, internet-explorer-9, forum

需要一位 IE 大师来帮助我弄清楚为什么这个网站在除 IE 之外的所有浏览器中都能运行（v10 看起来不错，但 9 和 8 坏了）。www.askanewyorker.com/phorum

它是 Phorum 轻量级模板，我在其中调用了 WP 加载文件，然后调用了 WP 函数：页眉、页脚、侧边栏。我几乎想知道这是否不是某种标题冲突、文件类型或类似的东西。加载了 css3 媒体 query.js 和 html5.js，但未修复网站的 Phorum 部分。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:03:29.807

好的，问题是我在头模板文件中调用了WP get头函数。我将它移到核心 php 文件中并修复了它。我只需要确保在更新 Phorum 时将代码放回原处，因为它不再被隔离在模板中。

# python - 我想帮助优化删除大查询集中匹配模型的代码

> ID：13984731
> 
> 赞同：0
> 
> 时间：2012-12-21T05:27:24.080
> 
> 标签：python, django

我有一段 django 代码，用于迭代模型的查询集并删除任何匹配的模型。查询集变大了，这些动作实际上设置为周期性任务，因此速度成为问题。

这是代码，如果有人愿意尝试帮助优化它！

```
# For the below code, "articles" are just django models

all_articles = [a reallly large list of articles]
newest_articles = [some large list of new articles]
unique_articles = []
for new_article in newest_articles:
    failed = False
    for old_article in all_articles:
        # is_similar is just a method which checks if two strings are
        # identical to a certain degree
        if is_similar(new_article.blurb, old_article.blurb, 0.9) 
            and is_similar(new_article.title, old_article.title, 0.92):
            failed = True
            break
    if not failed:
        unique_articles.append(new_article)
return unique_articles 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:59:59.460

解决此问题的一种方法可能是使用[Haystack维护内容的](http://haystacksearch.org/)[Solr](http://lucene.apache.org/solr/)索引，然后在 Solr 中搜索每篇文章的匹配项，然后将每篇文章的前几个匹配项提供给 is_similar 函数。不必搜索整个数据集来查找相似的文章会在性能上产生相当大的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:41:39.197

在 SQL 级别实现“模糊 DISTINCT”似乎没有任何有效的方法，所以我建议采用预计算路线。试图从一个小代码片段中猜测你的业务逻辑，所以这可能是不合理的，但听起来你只需要知道每篇新文章是否有旧的欺骗（由 is_similar 函数定义）。在这种情况下，一种可行的方法可能是`is_duplicate`在文章模型中添加一个字段，并在保存文章时在后台作业中重新计算它。例如（使用[芹菜](http://celeryproject.org/%20Celery)）：

```
@task
def recompute_similarity(article_id):
    article = Article.objects.get(id=article_id)
    article.is_duplicate = False
    for other in Article.objects.exclude(id=article_id):
        if is_similar(article.title, other.title) or is_similar(article.blurb, other.blurb):
            article.is_duplicate = True
            break
     article.save()

def on_article_save(sender, instance, created, raw, **kwargs):
    if not raw:
        recompute_similarity.delay(instance.id)

signals.post_save.connect(on_article_save, sender=Article) 
```

然后你原来的例程将减少到只是

```
Article.objects.filter(is_duplicate=False, ...recency condition) 
```

# escaping - 防止 PHP 解析字符串中的转义

> ID：13984740
> 
> 赞同：0
> 
> 时间：2012-12-21T05:29:02.250
> 
> 标签：escaping, tex

我打算在数据库中存储一堆用户提交的 TeX 方程。问题是，TeX 有`\right`...之类的东西，而 PHP 喜欢将 \r 视为换行符。

有没有办法抑制这种行为？我已经尝试过`addslashes`with `preg_replace`，`\r`但`\\r`都没有成功。

编辑：我期望得到的东西的一个例子：

```
\[\left( {\begin{array}{*{20}{c}}
  {{a_{11}}}&{{a_{12}}} \\ 
  {{a_{21}}}&{{a_{22}}} 
\end{array}} \right)\] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:31:50.597

> PHP 喜欢将 \r 视为换行符。

不，PHP 没有。
只需将这些方程式存储在数据库中通常的方式，应该没有问题。

您只需要遵循 2 条规则：

1.  让它成为真正的*用户提交*的数据，而不是硬编码在您的 PHP 文件中。
2.  当放入 SQL 查询时，数据必须为此正确格式化。有关详细信息，请参阅您的数据库手册。

# ios - NSStream vs. NSURLConnection 同时开启 TCP

> ID：13984743
> 
> 赞同：0
> 
> 时间：2012-12-21T05:29:09.440
> 
> 标签：ios, sockets, tcp, nsurlconnection, nsstream

我还是需要了解这些东西，反正NSStream或者NSURLConnection是否支持多开的TCP，比如说，

```
www.xyz.com port:4040
www.xyz.com port:5050
www.xyz.com port:5150 
```

这是唯一的一个主机。

两者中的哪一个可以支持同时打开 TCP 端口并将其保持打开一段时间的任务，如果没有，我可以使用任何现有的 iOS 类/方法来实现此行为。

我的最终目标是在给定时间创建多个 TCP 连接。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:30:51.093

是的..您可以使用 NSStream 和 CFSocket 创建到同一主机但不同端口的多个 TCP 连接...

# java - 包声明不起作用

> ID：13984747
> 
> 赞同：-1
> 
> 时间：2012-12-21T05:29:35.173
> 
> 标签：java, compilation

```
package com;

class Account {

    public double balance;

    public Account(double initBalance) {
       balance = initBalance;
    }
} 
```

Account.class 文件已生成，但它在同一文件夹中。未创建名为“com”的文件子文件夹。其实我试着直接编译。现在我可以看到在不指定根目录的情况下编译 java 文件夹是完全错误的。(-d.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:44:06.893

如果您从命令行编译代码，则可以使用以下命令自动创建与您的包对应的文件夹：-

```
javac -d . Account.java 
```

`com`这将在您所在的当前文件夹中创建一个文件夹，`Account.java`并将类文件自动移动到该文件夹​​。

请注意，您的`class files`. 您可以将`.java`文件放在任何地方。但除此之外，您对应的`.class`文件应该`package`在您的文件对应的文件夹内`.java`。

例如，请参阅以下目录结构：-

```
root --+ Account.java 
       |
       +-- com --Account.class  (com is the package folder) 
```

因此，您的`Account`班级的完全限定名称变为 - `com.Account`。

然后为了让`Account`其他类找到您的类，将类路径设置为`com`文件夹（**注意**： - 不要`com`在类路径中包含该文件夹）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:35:12.167

首先，包什么都不是，它是一个文件夹（非技术上）。所以请确保，您`.java`是在`com`文件夹/包中创建的。此外，`com`它不是任何文件夹/包的一部分。如果您正在使用 Netbeans 之类的 IDE，则**右键单击**package 和**New**然后**java class**。

**更新**

如果您没有使用任何 IDE，请检查您的**类路径**。如果`E:\data\fold\java1mods\Module2\excercise4\BankPrj\`是你的`class path`. 然后，创建`com`文件夹并`.java`在同一目录中创建文件，即`com`.

# networking - 测试 Openflow/SDN 控制器应用程序

> ID：13984751
> 
> 赞同：0
> 
> 时间：2012-12-21T05:30:00.897
> 
> 标签：networking, testing, network-programming, openflow

Openflow/SDN 网络使远程控制器能够管理网络设备的行为，即配置。他们可以转发指令集以动态更改网络配置。但是在您的 SDN 控制器应用程序中总是存在一些错误和故障的空间。我得到的是，我不得不煞费苦心地挖掘日志以找到导致我的控制器软件崩溃的一两个输入。控制器代码的最佳测试实践是什么，即流量模拟器、压力测试等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-13T09:34:52.393

Veryx PktBlaster 非常适合具有以下功能

1.模拟OpenFlow交换机版本的混合

2.固定负载和可变负载的吞吐量、延迟测量以及更多功能

参考：[http ://sdn.veryxtech.com](http://sdn.veryxtech.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:40:52.513

为什么不使用 Mininet 来测试您的控制器/应用程序。您可以指示 Mininet 不使用自己的控制器，而是使用在 localhost 上运行的控制器/应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T22:29:22.037

有一家名为 Ixia 的公司提供以太网测试软件和硬件。他们拥有全面的产品组合来测试 OpenFlow/SDN。他们也是 Openflow 行业机构的主席。

[http://www.ixiacom.com/solutions/sdn-openflow/index.php](http://www.ixiacom.com/solutions/sdn-openflow/index.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-19T04:27:45.043

您可以将遥控器与 mininet 一起使用。

例如，

1.  启动虚拟机，启动泛光灯控制器
2.  Floodlight 启动并运行后，您可以转到浏览器并输入如下 URL`http://192.168.110.2:8080/ui/index.html (Replace 192.168.110.2 with the proper inet address).`
3.  启动虚拟机，使用以下拓扑启动 mininet sudo mn --topo linear,2 --controller=remote, **ip=ip_floodlight_controller** ,port=6633

因此，现在您可以在 mininet 中模拟任何拓扑并测试控制器的错误和故障。

总之，您可以将任何其他控制器与 mininet 一起使用，模拟 mininet 中的任何拓扑并测试您的控制器在不同场景中的错误和故障。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-26T23:53:02.107

试试下面的链接，其中包含一个名为 OpenFlowTutorial 的教程。

**[http://archive.openflow.org/wk/index.php/OpenFlow_Tutorial](http://archive.openflow.org/wk/index.php/OpenFlow_Tutorial)**

它是 SDN 实施的最佳教程之一。它解释了设置 mininet、wireshark（用于监控）、可用的控制器 API、如何实现控制器等。

# python - Flask 应用程序单元测试断言错误

> ID：13984758
> 
> 赞同：6
> 
> 时间：2012-12-21T05:30:53.037
> 
> 标签：python, unit-testing, flask

我已经很长时间阅读了，但这是我第一次发帖。

好的，所以我正在尝试在 Flask 中对演示应用程序进行单元测试，但我不知道自己做错了什么。

这些是我在名为**manager.py**的文件中的“路线” ：

```
@app.route('/')
@app.route('/index')
def hello():
    return render_template('base.html')

@app.route('/hello/<username>')
def hello_username(username):
    return "Hello %s" % username 
```

第一条路线正在加载 base.html 模板呈现“hi”消息，该消息在单元测试中有效，但第二条路线出现断言错误。

这是我的测试文件**manage_test.py**：

```
class ManagerTestCase(unittest.TestCase):

    def setUp(self):
        self.app = app.test_client()

    def t_username(self, username):
        return self.app.post('/hello/<username>', follow_redirects=True)

    def test_username(self):
        rv = self.t_username('alberto')
        assert "Hello alberto" in rv.data

    def test_empty_db(self):
        rv = self.app.get('/')
        assert 'hi' in rv.data 
```

这是单元测试运行的输出：

```
.F
======================================================================
FAIL: test_username (tests.manage_tests.ManagerTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/albertogg/Dropbox/code/Python/flask-bootstrap/tests/manage_tests.py", line 15, in test_username
    assert "Hello alberto" in rv.data
AssertionError

----------------------------------------------------------------------
Ran 2 tests in 0.015s

FAILED (failures=1) 
```

我想知道你们是否可以帮助我！我做错了什么或错过了什么？

**编辑**

我这样做了，它正在工作

```
 class ManagerTestCase(unittest.TestCase):

```
 def setUp(self):
        self.app = app.test_client()

    def t_username(self, username):
        return self.app.get('/hello/%s' % (username), follow_redirects=True')
        # either that or the Advanced string formatting from the answer are working.

    def test_username(self):
        rv = self.t_username('alberto')
        assert "Hello alberto" in rv.data

    def test_empty_db(self):
        rv = self.app.get('/')
        assert 'hi' in rv.data 
``` 
            回答 #1

赞同：2

时间：2012-12-21T05:43:35.707

您应该将您的更改`hello_username`为以下内容：

```
@app.route('/hello/', methods=['POST'])
def hello_username():
    return "Hello %s" % request.form.get('username', 'nobody') 
```

确保`from flask import request`也。

还有一个例子，显示它工作：

```
> curl -X POST -i 'http://localhost:2000/hello/' -d "username=alberto"
HTTP/1.0 200 OK
Content-Type: text/html; charset=utf-8
Content-Length: 9
Server: Werkzeug/0.8.3 Python/2.7.2
Date: Fri, 21 Dec 2012 05:42:49 GMT

Hello alberto 
```

你的测试应该是这样的：

```
def test_username(self, username):
    return self.app.post('/hello', data={"username":username}) 
```

**编辑**

根据您的评论：

```
@app.route('/hello/<username>', methods=['POST'])
def hello_username(username):
    print request.args
    return "Hello %s" % username 
```

但是，我不知道你为什么要使用 POST，因为这本质上是一个没有任何 POST 正文的 POST。

```
> curl -X POST -i 'http://localhost:2000/hello/alberto'           
HTTP/1.0 200 OK
Content-Type: text/html; charset=utf-8
Content-Length: 13
Server: Werkzeug/0.8.3 Python/2.7.2
Date: Fri, 21 Dec 2012 06:29:25 GMT

Hello alberto 
```

在这种情况下，我会一起删除对 POST 数据的要求：

```
@app.route('/hello/<username>', methods=['POST'])
def hello_username(username):
    print request.args
    return "Hello %s" % username

> curl -i 'http://localhost:2000/hello/alberto'           
HTTP/1.0 200 OK
Content-Type: text/html; charset=utf-8
Content-Length: 13
Server: Werkzeug/0.8.3 Python/2.7.2
Date: Fri, 21 Dec 2012 06:31:10 GMT 
```

使用 GET 的测试将是

```
def test_username(self, username):
    return self.app.get('/hello/%s' % (username), follow_redirects=True) 
```

或者，假设你有 2.6+，

```
def test_username(self, username):
    return self.app.get('/hello/{username}'.format(username=username), follow_redirects=True) 
```

```

# c# - 动态设置表单上的控件文本

> ID：13984759
> 
> 赞同：0
> 
> 时间：2012-12-21T05:31:11.923
> 
> 标签：c#, winforms, controls

我有一个 WinForms 应用程序，我目前正在其中实现翻译引擎。到目前为止，我拥有的是一堆遵循以下语法的文本文档：

```
messages.manualupdate="There is a manual update available for ProgName.\n\nDo you want to update to version {0}.{1}.{2}{3}?"
messages.errorcopy="Clicking OK will copy the error so you can paste it elsewhere!"
messages.error="Error"
messages.notsupported.title="Unsupported client"
messages.notsupported.message="This version is no long supported. Please wait for an update." 
```

我有很多不同语言的，例如：

```
messages.manualupdate="é disponibile un'aggiornamento manuale del programma ProgName.\n\nVuoi aggiornare alla versione {0}.{1}.{2}{3}?"
messages.errorcopy="Cliccando OK eseguirete una copia degli errori visualizzati"
messages.error="Error"
messages.notsupported.title="Client non supportato"
messages.notsupported.message="Questa versione non è utilizzabile al momento. attendi il prossimo aggiornamento!" 
```

然后我将其解析为`DynamicObject`我可以访问的`language.messages.notsupported.error`. 我想知道的是我是否可以以某种方式链接表单上的所有控件以在创建时使用来自动态对象的变量。例如，我的表单上有一个按钮，我希望在其中包含文本“错误”。在表单显示之前，我将`language`变量设置为用户选择的语言，然后当表单显示时，它只是从`language`. 有没有办法在设计器中执行此操作，而不必编写在 Forms 构造函数中调用的方法，因为在我看来，将所有按钮文本设置为一个值然后全部更改它们有点浪费当表单加载时。我正在寻找一种绑定，但要控制 Text 参数。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:35:46.720

MSDN 有一个可能对您有用的字符串本地化演练[链接](http://msdn.microsoft.com/en-us/library/y99d1cd3%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:37:48.650

老实说，你试图避免的方法对我来说是最好的。我建议您为尝试设置文本的控件创建一个属性。在设置属性中，检查选择的语言并为您获取适当的文本。

```
public string Error
{
    set { _errorLabel.Text = value; }
}

private void SetText()
{
    if(EnglishSelected)
        Error = "English";
} 
```

关于浪费时间，好吧，我只是建议不要在设计器中设置任何东西，直接在加载表单中设置属性。但我想在这里再补充一点，任何方法都不会影响您的应用程序速度。首先是关于使您的应用程序可扩展和可维护，然后是关于使其快速。在设计器中设置逻辑事物始终是一种不好的做法。如果您的应用程序不是很小/很小，那么我建议您遵循一些设计模式，例如[MVP](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter)，并将所有这些逻辑的东西移到 Presenter 中。不是试图说教，只是建议。

是的，我们公司的一个团队正在处理应用程序的本地化部分。使用资源可能是这样做的更好方法。

希望能帮助到你。

# python - 使用 Reportlab Canvas-如何创建一个选项来打印从浏览器本身生成的 pdf？

> ID：13984761
> 
> 赞同：2
> 
> 时间：2012-12-21T05:31:27.540
> 
> 标签：python, pdf, http-headers, reportlab

这是使用 Reportlab 为我生成 pdf 的代码。

现在，它只在浏览器中显示 pdf，在 resonse.header ['Content-Disposition'] 中包含“附件”后，它会下载 pdf。

但我想要的是浏览器中提供的 rint 选项，它甚至允许您选择打印机。是否可以 ？

```
 data = "raghav"
       p = canvas.Canvas(self.response.out)
        p.drawString(50, 700, data)

        p.showPage()

        self.response.headers['Content-Type'] = 'application/pdf'
        self.response.headers['Content-Disposition'] = 'attachment;filename=testpdf.pdf'
        p.save() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:54:59.133

根据[http://blog.adlibre.org/2012/04/05/automatically-print-pdf-generated-reportlab/](http://blog.adlibre.org/2012/04/05/automatically-print-pdf-generated-reportlab/)您可以添加这两行以获得所需的结果：

```
from reportlab.pdfbase import pdfdoc
pdfdoc.PDFCatalog.OpenAction = '<</S/JavaScript/JS(this.print\({bUI:true,bSilent:false,bShrinkToFit:true}\);)>>' 
```

希望能帮助到你 ：）

# c# - 简单的 JSON.NET 序列化/反序列化示例

> ID：13984762
> 
> 赞同：1
> 
> 时间：2012-12-21T05:31:29.637
> 
> 标签：c#, json, serialization, json.net, drools

我已经在互联网上搜索了几个小时，试图找到一个非常简单的使用 C# 中的 JSON 调用进行序列化和反序列化的示例。在仔细浏览和拼凑之后，我想在我的网络服务中调用一个 JSON（POST 和 GET）函数（见下文）。

这是我能够拼凑起来的

这将是我的服务合同 (IExecWebservice.svc)

```
using System.ServiceModel;
using System.ServiceModel.Web;

namespace _27963199
{
    [ServiceContract]
    public interface IExecFunction
    {
        [WebGet(UriTemplate = "/{function}/{args}")]
        double CalcThis(string function, string args);
    }
} 
```

在我的主要代码中，我解析出用户请求 URI (IExecFunction.cs)

```
//user will send variables in REST URI http://myCalcServer/CalcThis/MethodA/10,20
using FunctionLibrary;
using System;
using System.Reflection;

namespace _27963199
{
    public class ExecFunctionService : IExecFunction
    {
        public double CalcThis(string function, string args)
        {
             Type t = typeof(Functions);
             MethodInfo[] libraryFunctions = t.GetMethods(BindingFlags.Static | BindingFlags.Public);
             string[] arguments = args.Split(',');

             //Missing piece of code where I split the URI for the JSON function that will POST the data object to be be calculated by the DROOLS/Rules Engine and the results passed back to the users web browser
...
         }
     }
} 
```

现在在我单独的函数类中，我会有这样的东西（Function.cs）

```
using System;
using newton.json;
using System.Net.Http;

namespace FunctionLibrary
{
    public static class Functions
    {
        public static double DoMathA(string url, string arg1, string arg2)
        {
            double d1;
            double d2;

            if (!double.TryParse(arg1, out d1) || !double.TryParse(arg2, out d2))
            {
                throw new ArgumentException("Arguments to function 'DoMathA' must be numeric.");
            }

            //Data Object Format "{'myData':{'Id':'5','var1':'10','var2':'90'}}"
            myCalcObject = "{'myData':{'Id':'5', & arg1 & :'10', & arg2 & :'90'}}"
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url); 
            request.Method = "POST"; 
            request.ContentType = "application/json; charset=utf-8"; 
            DataContractJsonSerializer ser = new DataContractJsonSerializer(data.GetType()); 
            MemoryStream ms = new MemoryStream(); 
            ser.WriteObject (myCalcObject)
            String json = Encoding.UTF8.GetString(ms.ToArray()); 
            StreamWriter writer = new StreamWriter(request.GetRequestStream()); 
            writer.Write(json); 
            writer.Close();
       }
}
...

//Missing piece of code where I want to return the results of the JSON PUT and GET to the calling webservice
//JSON output string looks like this {"YourResults":{"condition":"YourHairIsOnFire","alertlevel":100,"id":0}}
//return or parse (json) to XLMS on the users browser

 } 
```

我需要帮助填写空白，以便正确解析请求 URI 以传递到 JSON 函数，并将回复 JSON 字符串翻译回用户浏览器上的 xlms。有什么想法吗？

更新：我尝试让 JSON 部分作为独立的 C# 类工作，但在编译时出现“预期类...”错误。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web;
using System.Net.Http;
using System.Net;
using Newtonsoft.Json;

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(http://172.16.20.26:8080/myDrools/result); 
request.Method = "POST"; 
request.ContentType = "application/json; charset=utf-8"; 
DataContractJsonSerializer ser = new DataContractJsonSerializer(data.GetType()); 
MemoryStream ms = new MemoryStream(); 
ser.WriteObject ("{'myData':{'Id':'5','var1':'4.5','var2':'8.7'}}")
String json = Encoding.UTF8.GetString(ms.ToArray()); 
StreamWriter writer = new StreamWriter(request.GetRequestStream()); 
writer.Write(json); 
writer.Close(); 
```

我在这里做错了什么？如何从中获得 XMLS 输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-30T20:45:06.737

你有几个点点滴滴。如果你把它们粘在一起，它就可以工作。

### 服务接口

确保您的界面能够返回一个包含您希望返回的数据的对象。通过使字段可以为空，您可以改变结果的外观。

请注意将`ResponseFormat=WebMessageFormat.Json`json 作为返回的内容类型。

```
[ServiceContract]
public interface IExecFunction
{
    [WebGet(UriTemplate = "/{function}/{args}", ResponseFormat=WebMessageFormat.Json)]
    [OperationContract]
    Result CalcThis(string function, string args);
}

// the result class that actsd as an container
public class Result
{
    public Double DoubleResult { get; set; }
    public Int32 IntResult { get; set; }
    public string Message { get; set; }
} 
```

### 服务实施

服务实现涉及更多，因为它首先需要解析参数并将它们转换为适当的类型。完成后，它可以使用反射来找到合适的方法来调用。然后将返回的类型转换/投影到`Result`.

```
public class ExecFunctionService : IExecFunction
{
    // this is a GET  /fubar/1,2,3,4
    public Result CalcThis(string function, string args)
    {
        // function=fubar
        // args = 1,2,3,4
        var allargs = args.Split(',');

        // store each argument with their type
        var typeList = new List<Tuple<Type, object>>();
        // parsr to gind the best match
        foreach(var arg in allargs)
        {
            // convert each argument string
            // to a type that is supported
            int i;
            if (Int32.TryParse(arg, out i))
            {
                typeList.Add(new Tuple<Type,object>(typeof(Int32), i));
                continue;
            }
            double d;
            if (Double.TryParse(arg, 
                   NumberStyles.AllowDecimalPoint,
                   new CultureInfo("en-us"), 
                   out d))
            {
                typeList.Add(new Tuple<Type,object>(typeof(Double), d));
                continue;
            }
            // if all fails assume string
            typeList.Add(new Tuple<Type,object>(typeof(string), arg));
        }

        // find and call the correct method
        // notice that parameters and their type do matter
        // overloads of the same methodname with 
        // different types is supported
        // Functions is the static type with methods to call
        var method = typeof(Functions).GetMethod(
            function,
            BindingFlags.Static| BindingFlags.Public |BindingFlags.InvokeMethod,
            null, 
            typeList.Select(ty => ty.Item1).ToArray(), //all types
            null);
        var callresult = method.Invoke(
            null, 
            typeList.Select(ty => ty.Item2).ToArray()); // all values

        // shape the output in the form you need
        var result = new Result();
        if(callresult is double)
        {
            result.DoubleResult = (double) callresult;
        }
        if (callresult is int)
        {
            result.IntResult = (int)callresult;
        }
        if (callresult is string)
        {
            result.Message = (string)callresult;
        }

        return result;
    }
} 
```

### 您要调用的函数

这是一个包含所有可以从服务调用的方法的类。

```
// your calc functions go here
public static class Functions
{
    public static double DoMathA(double arg1, double arg2)
    {
        return arg1 / arg2;
    }

    public static double DoMathB(int number, double factor)
    {
        return number * factor;
    }

    public static int DoMathC(string somestring)
    {
        return somestring.GetHashCode();
    }
} 
```

### 它是什么样子的？

调用`http://localhost/service1.svc/DoMathC/fubar`将返回：

> `{"DoubleResult":0,"IntResult":418978654,"Message":null}`

并将`http://localhost/service1.svc/DoMathA/2.5,3.4`返回：

> `{"DoubleResult":0.73529411764705888,"IntResult":0,"Message":null}`

并将`http://localhost/service1.svc/DoMathB/4,3.5`返回：

> `{"DoubleResult":14,"IntResult":0,"Message":null}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-11T23:18:57.943

可以这样想：与其尝试将字符串粘合在一起，不如返回一个对象。该服务将为您处理字符串化。因此，创建一个具有匹配 JSON 对象的属性的类，然后将您的值设置到这些属性中，然后返回该对象。完毕。不要想太多

# c - 为什么我在实现单链表时在 C 中出现未定义的引用错误

> ID：13984765
> 
> 赞同：0
> 
> 时间：2012-12-21T05:32:09.083
> 
> 标签：c, compiler-errors

我收到这样的错误

```
$ gcc -o app llistdriver.c llistlib.c -Wall
 llistdriver.c:7: warning: return type defaults to `int'
 llistdriver.c: In function `printinsts':
 llistdriver.c:15: warning: control reaches end of non-void function
 llistlib.c: In function `insert':
 llistlib.c:25: warning: statement with no effect
 llistlib.c:41: warning: control reaches end of non-void function
 /tmp/ccqYmK3M.o:llistdriver.c:(.text+0x157): undefined reference to `_search'
 collect2: ld returned 1 exit status 
```

而且我无法弄清楚为什么我收到此错误消息已经编写了一个包含链接列表方法的库文件。

```
 int search( struct node *front, int val)// 
 {
     while(front != NULL)
    {
       if( front->modmark == val ) //this is to find the value 
       return 1;  // found it

    front=front->next;
    }
    return 0;  // Not found
  } 
```

我认为它抱怨主文件中的唯一引用

```
 case 5: 
                printf("please enter a search value?\n");
                scanf("%i",&mark);
                choice = search(first,mark);//here
                if (choice == -1)
                {

                    printf("the modmark was not found\n");
                }
                else 
                {   
                    printf("the first occurence of the mark is at the %i th index of the list",choice); 
                };
                    break; 
```

并且 first 和 mark 是这样定义的变量

```
 struct node *first;
              int mark = 0; 
```

对此的任何帮助将不胜感激我花了几个小时试图调试这个错误。编写 C 代码是我目前生活的祸根。

Ps 我已经检查了 llistlib.c 文件和 llistdriver.c 文件中包含的所有#include "llistlib.h"。

好吧，也许这会让它更清楚

// llistlib.c - 实现 listlib.h 文件中定义的函数的库 #include #include #include "llistlib.h"

```
void initialise(struct node **ps)
{

printf("initialise function\n");

*ps = NULL;   //initialise list to empty

}

int insert(struct node **fn)
{
printf("insert function\n");
struct node *newnode;
newnode =  (struct node*) malloc(sizeof (struct node)); //make new node and give it memory
if (newnode == NULL) //if fsiled return to the program saying it failed
    return -1;
if (*fn == NULL) // for the first of the list
{
    newnode -> next == NULL; // sets the next value to nothing
    printf("what mark do you want to enter\n");
    scanf("%i",&newnode -> modmark); // this gets the modmark
    *fn = newnode; //the head of the list is set to the new node
}
else
{
    newnode -> next = *fn; // sets the newnodes next value to the head node
    printf("what mark do you want to enter\n");
    scanf("%i",&newnode -> modmark); // gets the modmark
    *fn = newnode; // the head becomes the new node

    printf("%p %i",newnode,newnode->modmark); // just for debugging

}
 }

void traverse(struct node *ps)
{   

if (ps != NULL) // if the current node is null 
{
    printf("%p - %i\n",ps,ps -> modmark);
    traverse(ps -> next); 

}
else
{
    printf("your list is empty\n");
}
}

void delete(struct node **dn)
{
printf("delete function\n");
struct node *delnode;
delnode = *dn; //sets the head node so that it can be deleted later
if (delnode != NULL)
{
    *dn = delnode -> next; // sets the head to the next node
    free(delnode); //deletes the previous head node
}

}

void finish(struct node **ps) //this function goes through the list and removes all items
{
printf("finish function\n");
struct node *finishnode;
finishnode = *ps;
while (finishnode != NULL)
{
    *ps = finishnode -> next;
    free(finishnode);
    finishnode = *ps;
}

int search(struct node *front,int val)
{
 while(front != NULL)
 {
    if( front->modmark == val ) // Assuming struct node has val member which you are trying to compare to
       return 1;  // found it

    front=front->next;
 }
  return 0;  // Not found
}

} 
```

然后 llistdriver.c 文件是

```
#include <stdio.h>
#include <stdlib.h>
#include "llistlib.h"

printinsts()
{
printf("Enter:- \n");
printf("\t0 to exit\n");
printf("\t1 to initialise list\n");
printf("\t2 to insert item at front of list\n");
printf("\t3 to delete item from front of list\n");
printf("\t4 to traverse list\n");
printf("\t5 to search through the list\n");
}

int main()
{
int choice;
struct node *first;
int mark = 0;

printinsts();
scanf("%d",&choice);

while (1)
{
    switch (choice)
    {
        case 0 : finish(&first);
                    exit(0);
                    break;

        case 1 : initialise(&first);
                    break;

        case 2 : if (insert(&first)== -1)
                    {
                        printf("insert not successful");
                        choice = 0;
                     };
                    break;

        case 3 : delete(&first);
                    break;

        case 4 : traverse(first);
                     break;
        case 5: 
                printf("please enter a search value?\n");
                scanf("%i",&mark);
                choice = search(first,mark);
                if (choice == -1)
                {

                    printf("the modmark was not found\n");
                }
                else 
                {   
                    printf("the first occurence of the mark is at the %i th index of the list",choice); 
                };
                    break;

        default : printf("Invalid choice of %d \n", choice);

    };  // end of switch

    printinsts();
    scanf("%d", &choice);

}  // end of while

} 
```

头文件 llistlib.h 读取为

```
struct node {
int     modmark;
struct node *next;
 };

void initialise(struct node **ps);

int insert(struct node **fn);

void traverse(struct node *ps);

void delete(struct node **dn);

void finish(struct node **ps);

int search(struct node *front,int val); 
```

我还没有在任何代码中发现明显的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:43:07.907

只需`llistlib.h`在您的`llistlib.c`文件中包含以下内容：

`#include "llistlib.h"`

并使用以下命令进行编译：

`gcc -o app llistdriver.c llistlib.c`

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:16:08.410

第一个错误：

```
 llistdriver.c:7: warning: return type defaults to `int'
 llistdriver.c: In function `printinsts':
 llistdriver.c:15: warning: control reaches end of non-void function 
```

该函数如下所示：

```
printinsts() {} 
```

请给这个函数一个返回类型，如果它不是 void，则返回它。

第二：

```
llistlib.c: In function `insert':
llistlib.c:25: warning: statement with no effect 
```

那条线是：

```
newnode -> next == NULL; // sets the next value to nothing 
```

注释不正确，此行没有设置任何内容，因为它使用相等运算符，而不是赋值运算符。

（这部分是品味问题，但我不喜欢这样的注释，它们只是试图说明与代码本身相同的东西。在这样的情况下，它们会变得误导，正如您可能阅读并相信的那样，注释，而不是在查找错误时解析代码。）

然后：

```
llistlib.c:41: warning: control reaches end of non-void function 
```

这又是指：

```
int insert(struct node **fn)
{
printf("insert function\n");
struct node *newnode;
newnode =  (struct node*) malloc(sizeof (struct node)); //make new node and give it memory
if (newnode == NULL) //if fsiled return to the program saying it failed
    return -1;
...
} 
```

除了 -1 之外，这个函数没有返回值。无论发生什么，它都应该返回一些东西。

最后：

```
/tmp/ccqYmK3M.o:llistdriver.c:(.text+0x157): undefined reference to `_search' 
```

因为你从finish()的末尾错过了一个右大括号；

不要仅仅因为您的代码编译就忽略警告。仅仅修复错误是不够的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T07:42:50.353

您正在使用默认的 GCC 设置进行编译，即“大致遵循 C99 标准，然后添加非标准 GNU goo”。C99 标准以及当前的 C 标准不允许函数具有默认类型。这就是您使用 -Wall 收到警告的原因，返回类型必须是显式的。

`printinsts() {}`是无效的 C。您应该将其声明/定义为`void printinsts (void)`，仅此而已。

将来，请确保始终使用 -std=c99 或 -std=c11 进行编译，以确保您将代码编译为标准 C 语言而不是其他语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T07:46:11.283

您的`finish`函数缺少右大括号 {。并且`search`有一个额外的闭合支架。

# html - UIWebView 中的 HTML 格式化文本在格式化文本后显示一个栏

> ID：13984767
> 
> 赞同：0
> 
> 时间：2012-12-21T05:32:21.847
> 
> 标签：html, ios, css

这是我发送到 UIWebView 实例的 HTML 格式文本。

```
"This is my sample
<br>
question text." And
<br>
<a style="padding:2px; font-family:'Futura-CondensedExtraBold',Georgia,Serif; color:white; border:0px solid;border-radius:10px; background-image: -webkit-linear-gradient(bottom, rgb(102,184,24) 4%, rgb(197,228,71) 52%); ">"The sample</a>
<a style="padding:2px; font-family:'Futura-CondensedExtraBold',Georgia,Serif; color:white; border:0px solid;border-radius:10px; background-image: -webkit-linear-gradient(bottom, rgb(102,184,24) 4%, rgb(197,228,71) 52%); ">
<br>
<a style="padding:2px; font-family:'Futura-CondensedExtraBold',Georgia,Serif; color:white; border:0px solid;border-radius:10px; background-image: -webkit-linear-gradient(bottom, rgb(102,184,24) 4%, rgb(197,228,71) 52%); ">answer text goes</a>
<a style="padding:2px; font-family:'Futura-CondensedExtraBold',Georgia,Serif; color:white; border:0px solid;border-radius:10px; background-image: -webkit-linear-gradient(bottom, rgb(102,184,24) 4%, rgb(197,228,71) 52%); ">
<br>
<a style="padding:2px; font-family:'Futura-CondensedExtraBold',Georgia,Serif; color:white; border:0px solid;border-radius:10px; background-image: -webkit-linear-gradient(bottom, rgb(102,184,24) 4%, rgb(197,228,71) 52%); ">here"</a>. 
```

这是 UIWebView 中的输出图像。

[**在这里演示**](http://jsfiddle.net/mQWPs/)

![在此处输入图像描述](../Images/94345a2541ad140aec6c652a07cf4996.png)

我在 web 视图中的每个格式化行旁边看到一个相同颜色的垂直条。

我非常感谢有关此的任何提示/建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:48:51.370

因为您的代码有 2`<a>`不包含任何文本，甚至没有`</a>`结束标记（*语法错误*）。而你已经给`style="padding:2px"`了他们。所以它会在`<a>`标签内填充 2px 并显示背景颜色。

删除该 2 `<a>`，它将按您的意愿工作。

[**工作演示**](http://jsfiddle.net/BpEzZ/)

# asp.net-mvc - 如何在backbone.js 中维护应用程序状态？

> ID：13984769
> 
> 赞同：0
> 
> 时间：2012-12-21T05:32:38.780
> 
> 标签：asp.net-mvc, backbone.js

我们如何在 Backbone.js 中维护应用程序状态，因为我们在 asp.net 中有 Sessions 和 Application 变量。请指导我被困在这里。我知道我们在backbone.js 中有StateManager，但我认为它没有这个功能。请指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T05:39:45.827

请参考本教程...

[http://www.9lessons.info/2012/11/backbonejs-router-tutorial.html](http://www.9lessons.info/2012/11/backbonejs-router-tutorial.html)

# ruby-on-rails - 无法使用工厂女孩和 rspec 更新关联对象的属性

> ID：13984772
> 
> 赞同：2
> 
> 时间：2012-12-21T05:32:57.077
> 
> 标签：ruby-on-rails, ruby, rspec, factory-bot

所以，我有一个工厂生产一个有几个关联的用户。我不想为每种情况创建一个新工厂，而是创建对象并修改关联对象的一些属性。

```
let(:user) do
    user = FactoryGirl.create(:user_with_associations)
    user.associations.where(some_id: user.default_thing.id).first.some_attribute = Time.now
    user.save
    user
end 
```

但是如果我调用`puts user.associations.to_yaml`一个`it`块，它没有更新的属性`some_attribute = Time.now`。

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:16:31.987

几个建议...

首先，你似乎在*对抗*FactoryGirl 的力量。恕我直言，更好的方法是将您的自定义代码移动到工厂中，例如为您正在构建的任何内容定义一个 FactoryGirl 工厂。

例子：

```
 let(:user){ FactoryGirl.create(:user_with_time_now) } 
```

这真的是 FactoryGirl 恕我直言的重点。

其次，如果您使用 Rails 和 ActiveRecord，请查看 :inverse_of 的关联。这些告诉 ActiveRecord 关联应该循环回原始对象。

# gcc - GTK+ 代码演示 - 编译颜色选择器

> ID：13984773
> 
> 赞同：0
> 
> 时间：2012-12-21T05:33:20.653
> 
> 标签：gcc, gtk, gtk3

我发现 GTK+ 代码演示中的颜色选择器是一个非常好的颜色选择器。因此，我想将它用作独立的应用程序，而不必`gtk-demos`每次都运行。

我试图编译的示例代码是：

```
#include <gtk/gtk.h>

static GtkWidget *window = NULL;
static GtkWidget *da;
static GdkColor color;
static GtkWidget *frame;

/* Expose callback for the drawing area
 */
static gboolean
expose_event_callback (GtkWidget      *widget, 
                       GdkEventExpose *event, 
                       gpointer        data)
{
  GdkWindow *window = gtk_widget_get_window (widget);

  if (window)
    {
      GtkStyle *style;
      cairo_t *cr;

      style = gtk_widget_get_style (widget);

      cr = gdk_cairo_create (window);

      gdk_cairo_set_source_color (cr, &style->bg[GTK_STATE_NORMAL]);
      gdk_cairo_rectangle (cr, &event->area);
      cairo_fill (cr);

      cairo_destroy (cr);
    }

  return TRUE;
}

static void
change_color_callback (GtkWidget *button,
               gpointer   data)
{
  GtkWidget *dialog;
  GtkColorSelection *colorsel;
  gint response;

  dialog = gtk_color_selection_dialog_new ("Changing color");

  gtk_window_set_transient_for (GTK_WINDOW (dialog), GTK_WINDOW (window));

  colorsel = 
    GTK_COLOR_SELECTION (gtk_color_selection_dialog_get_color_selection (GTK_COLOR_SELECTION_DIALOG (dialog)));

  gtk_color_selection_set_previous_color (colorsel, &color);
  gtk_color_selection_set_current_color (colorsel, &color);
  gtk_color_selection_set_has_palette (colorsel, TRUE);

  response = gtk_dialog_run (GTK_DIALOG (dialog));

  if (response == GTK_RESPONSE_OK)
    {
      gtk_color_selection_get_current_color (colorsel,
                         &color);

      gtk_widget_modify_bg (da, GTK_STATE_NORMAL, &color);
    }

  gtk_widget_destroy (dialog);
}

GtkWidget *
do_colorsel (GtkWidget *do_widget)
{
  GtkWidget *vbox;
  GtkWidget *button;
  GtkWidget *alignment;

  if (!window)
    {
      color.red = 0;
      color.blue = 65535;
      color.green = 0;

      window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
      gtk_window_set_screen (GTK_WINDOW (window),
                 gtk_widget_get_screen (do_widget));
      gtk_window_set_title (GTK_WINDOW (window), "Color Selection");

      g_signal_connect (window, "destroy",
            G_CALLBACK (gtk_widget_destroyed), &window);

      gtk_container_set_border_width (GTK_CONTAINER (window), 8);

      vbox = gtk_vbox_new (FALSE, 8);
      gtk_container_set_border_width (GTK_CONTAINER (vbox), 8);
      gtk_container_add (GTK_CONTAINER (window), vbox);

      /*
       * Create the color swatch area
       */

      frame = gtk_frame_new (NULL);
      gtk_frame_set_shadow_type (GTK_FRAME (frame), GTK_SHADOW_IN);
      gtk_box_pack_start (GTK_BOX (vbox), frame, TRUE, TRUE, 0);

      da = gtk_drawing_area_new ();

      g_signal_connect (da, "expose_event",
            G_CALLBACK (expose_event_callback), NULL);

      /* set a minimum size */
      gtk_widget_set_size_request (da, 200, 200);
      /* set the color */
      gtk_widget_modify_bg (da, GTK_STATE_NORMAL, &color);

      gtk_container_add (GTK_CONTAINER (frame), da);

      alignment = gtk_alignment_new (1.0, 0.5, 0.0, 0.0);

      button = gtk_button_new_with_mnemonic ("_Change the above color");
      gtk_container_add (GTK_CONTAINER (alignment), button);

      gtk_box_pack_start (GTK_BOX (vbox), alignment, FALSE, FALSE, 0);

      g_signal_connect (button, "clicked",
            G_CALLBACK (change_color_callback), NULL);
    }

  if (!gtk_widget_get_visible (window))
    {
      gtk_widget_show_all (window);
    }
  else
    {
      gtk_widget_destroy (window);
      window = NULL;
    }

  return window;
} 
```

错误是：

```
[orschiro@thinkpad ~]$ gcc `pkg-config --cflags --libs gtk+-3.0` -o colorSelector colorSelector.ccolorSelector.c: In function ‘expose_event_callback’:
colorSelector.c:26:7: warning: ‘gdk_cairo_set_source_color’ is deprecated (declared at /usr/include/gtk-3.0/gdk/gdkcairo.h:58): Use 'gdk_cairo_set_source_rgba' instead [-Wdeprecated-declarations]
colorSelector.c: In function ‘change_color_callback’:
colorSelector.c:44:3: warning: ‘gtk_color_selection_dialog_new’ is deprecated (declared at /usr/include/gtk-3.0/gtk/deprecated/gtkcolorseldialog.h:73): Use 'gtk_color_chooser_dialog_new' instead [-Wdeprecated-declarations]
colorSelector.c:49:5: warning: ‘gtk_color_selection_dialog_get_color_selection’ is deprecated (declared at /usr/include/gtk-3.0/gtk/deprecated/gtkcolorseldialog.h:75): Use 'GtkColorChooser' instead [-Wdeprecated-declarations]
colorSelector.c:51:3: warning: ‘gtk_color_selection_set_previous_color’ is deprecated (declared at /usr/include/gtk-3.0/gtk/deprecated/gtkcolorsel.h:148) [-Wdeprecated-declarations]
colorSelector.c:52:3: warning: ‘gtk_color_selection_set_current_color’ is deprecated (declared at /usr/include/gtk-3.0/gtk/deprecated/gtkcolorsel.h:142): Use 'gtk_color_chooser_set_rgba' instead [-Wdeprecated-declarations]
colorSelector.c:53:3: warning: ‘gtk_color_selection_set_has_palette’ is deprecated (declared at /usr/include/gtk-3.0/gtk/deprecated/gtkcolorsel.h:100) [-Wdeprecated-declarations]
colorSelector.c:59:7: warning: ‘gtk_color_selection_get_current_color’ is deprecated (declared at /usr/include/gtk-3.0/gtk/deprecated/gtkcolorsel.h:145): Use 'gtk_color_chooser_get_rgba' instead [-Wdeprecated-declarations]
colorSelector.c: In function ‘do_colorsel’:
colorSelector.c:91:7: warning: ‘gtk_vbox_new’ is deprecated (declared at /usr/include/gtk-3.0/gtk/deprecated/gtkvbox.h:60): Use 'gtk_box_new' instead [-Wdeprecated-declarations]
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: error: ld returned 1 exit status 
```

已安装的软件包：

```
gtk2 2.24.14-1
gtk3 3.6.2-1
gcc-libs-multilib 4.7.2-2
gcc-multilib 4.7.2-2 
```

有人可以解释一下错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:07:15.550

您的源代码不完整，`main`功能缺失。gtk-demo 是有组织的，所以它有一个`main`调用一些子模块并以相同方式处理它们的单，而你错过了`main`.

另一个警告来自您尝试编译的此示例代码是为 GTK 2 完成的，并且您正在尝试针对 GTK 3 构建它。

您将在 GTK+ 存储库的[gtk-demo 目录中找到所有缺失的部分。](http://git.gnome.org/browse/gtk+/tree/demos/gtk-demo)

# sas - SAS：只保留价值最高的组，用于箱线图

> ID：13984777
> 
> 赞同：1
> 
> 时间：2012-12-21T05:33:43.453
> 
> 标签：sas

目前我在做箱形图时有很多“组”，结果是七个箱形图面板。

我想要一个面板，大约有 20 个箱形图（或“组”）。

因此，这将需要删除一堆组。

有没有办法自动做到这一点？

我想到的是：在一个数据步骤中，只保留前 20 个组，使用每个组的 Q3 值作为保留或删除的标准。

非常感谢任何编码帮助。

尼古拉斯·科尔马尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T03:30:28.987

您没有提供太多信息，但您可以按该值对数据进行排序，然后像这样保存前 20 个：

```
proc sort data=myGroups;
by q3;
run;

data myGroupsTop.
set myGroups(obs=20);
run; 
```

# php - 从一个选项卡导航到另一个选项卡

> ID：13984781
> 
> 赞同：3
> 
> 时间：2012-12-21T05:34:06.193
> 
> 标签：php, javascript, jquery, html

我确实有一个用 PHP 创建的页面。此页面包括一个菜单选项卡，该选项卡由称为 Dash、Project 的选项卡组成。破折号选项卡由显示其中一些数据的表格组成。场景就像我在破折号选项卡中单击表格的任何一行时一样导航到由简单表单组成的项目选项卡，并且破折号选项卡中的数据填充到项目选项卡中的表单。但我的问题是它仍然在同一个选项卡上，即 Dash。我希望在单击表中的表后破折号它必须显示项目选项卡，但它显示的是破折号选项卡内容。我猜它保持为活动状态，这就是它发生的原因。

```
<div class="tabbable">
    <ul class="nav nav-tabs">
        <li class="active">
            <a href="#dash" data-toggle="tab">Dash</a>
        </li>
        <li class="">
            <a href="#projects" data-toggle="tab">Projects</a>
        </li>
    </ul>
    <div class="tab-content" style="padding-bottom: 9px; border-bottom: 1px solid #ddd;">
        <div class="tab-pane active" id="dash">
            <?php include "dash.php"; ?>
        </div>
        <div class="tab-pane" id="projects">
            <?php include "project.php"; ?>
        </div>
    </div>
</div> 
```

导航的破折号选项卡的代码如下：

```
<tr>
    <td>
        <a href="#" data-bind="attr:{value:id,title:projname,href:root+'projects/project/'+id},text:projname">
    </td>
    <td data-bind="text:enddate"></td>
    <td data-bind="text:status"></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:38:31.573

试试下面的东西。

```
$('#tabbable').tabs('select', $('#projects'));
$('#tabbable').tabs('select', $('#dash')); 
```

# c# - 在rowDataBound事件asp.net c#中删除Gridview行

> ID：13984784
> 
> 赞同：1
> 
> 时间：2012-12-21T05:34:17.690
> 
> 标签：c#, asp.net, gridview, paging, rowdatabound

我有一个gridview，它检查事件的一些值。`rowDataBound`我想根据rowDataBound中检查的条件删除一些行。我尝试将所有控件放在面板中并隐藏该面板，即，

**尝试 1：**

```
protected void grdFeatured_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //some other codes here
        //IMPLEMENT FILTER ACCORDING TO ABOVE 'VIS' OUTPUT
        if (vis > 0)
        {
            Panel1.Visible = false;
        }
    }
} 
```

**问题 ：**

这会打乱分页，因为行是隐藏的，但会发生页数并显示剩余可见行的页码。

**尝试 2：**

```
protected void grdFeatured_RowDataBound(object sender, GridViewRowEventArgs e)
{
    GridViewRow gvr = e.Row;
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //some other codes here
        //IMPLEMENT FILTER ACCORDING TO ABOVE 'VIS' OUTPUT
        if (vis > 0)
        {
            gvr.Parent.Controls.RemoveAt(gvr.RowIndex);
        }
    }
} 
```

**问题 ：**

给出错误：

> ```
> Specified argument was out of the range of valid values.
> Parameter name: index at gvr.Parent.Controls.RemoveAt(gvr.RowIndex); 
> ```

不想编辑数据源，帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:59:26.483

```
if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if (somecondition)
            {
                e.Row.Visible = false;
            }
        } 
```

# javascript - JavaScript 防止在 body 元素上触摸移动，在其他元素上启用

> ID：13984788
> 
> 赞同：2
> 
> 时间：2012-12-21T05:35:04.417
> 
> 标签：javascript, events, default, event-propagation, touchmove

但很简单，我想阻止 body 元素上的 touchmove 事件，但为另一个元素启用它。我可以很好地禁用...但我不确定如何在其他地方重新启用它！

我想下面的理论上是有效的，因为`return true`它是相反的`preventDefault`，但它对我不起作用。可能是因为`$altNav`元素*在* `$bod`？

JS：

```
$bod.bind('touchmove', function(event){

    event.preventDefault();
});
$altNav.bind('touchmove', function(event){

    return true;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T06:10:38.797

我不确定你实际使用的是什么库，但我会假设 jQuery（如果你使用的不是 jQ，我也会在 browser-native-js 中发布相同的代码）

```
$bod.delegate('*', 'touchstart',function(e)
{
    if ($(this) !== $altNav)
    {
        e.preventDefault();
        //and /or
        return false;
    }
    //current event target is $altNav, handle accordingly
}); 
```

那应该照顾一切。此处的回调处理*所有*touchmove 事件，并在`preventDefault`每次在*除*`$altNav`.

在 std browser-js 中，此代码类似于：

```
document.body.addEventListener('touchmove',function(e)
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    //in case $altNav is a class:
    if (!target.className.match(/\baltNav\b/))
    {
        e.returnValue = false;
        e.cancelBubble = true;
        if (e.preventDefault)
        {
            e.preventDefault();
            e.stopPropagation();
        }
        return false;//or return e, doesn't matter
    }
    //target is a reference to an $altNav element here, e is the event object, go mad
},false); 
```

现在，如果`$altNav`是具有特定 id 的元素，只需将其替换为等等......祝`target.className.match()`你 好运，希望这会有所帮助`target.id === 'altNav'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T05:11:50.030

使用自定义 CSS 类并在文档处理程序中对其进行测试，例如：

```
<div>
    This div and its parents cannot be scrolled.
    <div class="touch-moveable">
        This div and its children can.
    </div>
</div> 
```

然后：

```
jQuery( document ).on( 'touchmove', function( ev )
{
    if (!jQuery( ev.target ).parents().hasClass( 'touch-moveable' ))
    {
         ev.preventDefault();
    }
}); 
```

[http://tinyurl.com/mo6vwrq](http://tinyurl.com/mo6vwrq)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T06:10:28.370

你可以添加一个参数，像这样

```
$bod.bind('touchmove', function(event,enable){
   if(enable){
       event.preventDefault();
   }

}); 
```

# c# - 如何检索xml节点的值？

> ID：13984791
> 
> 赞同：1
> 
> 时间：2012-12-21T05:35:20.730
> 
> 标签：c#, xml, linq

我有一个这样的xml文件：

```
<Contacts>
   <CommandID>
       ShowInstalledProducts
   </CommandID>
</Contacts> 
```

我需要遍历 xml 文件列表并检索`CommandId`（在这种情况下`ShowInstalledProducts`）的值，对于每个 ...

我对 xml 很陌生。有人可以帮助我吗？我正在尝试使用 Linq 来实现这一点。（不过也欢迎其他解决方案）

DirectoryInfo directoryInfo = new DirectoryInfo(@"T:\Commands"); FileInfo[] fileInfo = directoryInfo.GetFiles();

```
 foreach (FileInfo loop in fileInfo)
            {

                string doc = File.ReadAllText(loop.FullName);
                XmlDocument XMLDoc = new XmlDocument();
                XMLDoc.Load(doc);
                XMLDoc= stripDocumentNamespace(XMLDoc);
                //id = XMLDoc.Descendants("CommandID").First().Value;

            } 
```

这就是我到目前为止所做的，我正在阅读文件，并试图让后代产生。但是每个 xml 文件中有多个，我需要检索每个的值。卡在这里:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T05:53:55.333

**第 1 步：**转到[linqpad.net](http://www.linqpad.net/)并下载 Linqpad 应用程序。它是一个简单的编辑器，允许您编写、运行和使用 Linq 表达式。此外，它还有很多内置示例可供学习。（您可能必须`select Help --> Veiw samples`打开它）： ![在此处输入图像描述](../Images/35579c6f00ceef4223a9d2c7602a5c8e.png)

**第 2 步：**将以下代码粘贴到编辑器中，然后按 F5 运行它（但请确保`C# Statement(s)`在其上方选择“语言”！）。随心所欲地玩耍和调整它。

```
var bench = XElement.Parse(@"<Contacts>
                <Node>
                    Something
                </Node>
                <Node>
    Something else
                </Node>
                </Contacts>");

var listOfNodes = bench.Elements(); 
listOfNodes.Dump();

var content = listOfNodes.Select(x => x.Value); 
content.Dump(); 
```

这应该足以让你开始。享受！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:17:25.670

```
fileInfo.SelectMany(fi => XDocument
                           .Load(fi.FullName)
                              .Descendants("CommandID")
                                .Select(e=>e.Value)) 
```

This LINQ code should return the list of all CommandId values of all files.

# c#-4.0 - 任务并行库：应用程序产生多少线程？

> ID：13984792
> 
> 赞同：0
> 
> 时间：2012-12-21T05:35:23.717
> 
> 标签：c#-4.0, task-parallel-library

我们现在通过实现 Task.Factory.StartNew() 来使用任务并行库。有没有办法检查应用程序在执行任务时产生了多少线程？

目前我们正在开发环境中在双核处理器中运行该应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:22:21.923

除非您使用自定义调度程序或传递 TaskCreationOptions.LongRunning 选项，否则 TPL 在执行任务时不会产生任何线程。即便如此，由 TaskScheduler 决定如何处理长时间运行的任务。

TPL 将单个任务调度到一个线程池中，以供池中的线程执行。每个线程都有自己的队列，以减少多核机器中的冲突。如果线程太忙，框架会使用一些工作窃取魔法将任务分配给同一线程池中的空闲线程。

查看[tpl 如何使用 CLR 线程池](https://stackoverflow.com/questions/4534839/how-does-tpl-use-clr-thread-pool)以获取更多信息，以及[Daniel Moth](http://www.danielmoth.com/Blog/New-And-Improved-CLR-4-Thread-Pool-Engine.aspx)的这篇文章以获取有关工作窃取的详细信息。

# jsf - Java EE 中 CDI 技术的用途及其与 JSF 等 UI 技术和 EJB 等后端技术的关系

> ID：13984795
> 
> 赞同：4
> 
> 时间：2012-12-21T05:35:30.627
> 
> 标签：jsf, dependency-injection, ejb, cdi

这个问题直接来自我[这里](https://stackoverflow.com/questions/13967978/understanding-datacontrol-abstraction-in-adf-framework)的另一个问题。[该问题答案](https://stackoverflow.com/a/13977308/1527084)的最后一段提到了`CDI`技术。

你能解释一下这项技术的目的是什么。该技术与 JSF 和 EJB 有什么关系吗？我已经解决了这个[问题](https://stackoverflow.com/questions/13047807/why-use-cdi-in-java-ee)，但我还不清楚该技术的目的是什么。我特别想知道它与 EJB 和 JSF 等其他 Java EE 技术的匹配度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T10:51:15.020

添加到 Bozho 的正确答案：

CDI 是 JSF 托管 bean 的超集，而 JSF 最终将弃用他们自己的本地托管 bean 系统。在 JSF 2.2 中已经为此采取了步骤。

CDI 不是 EJB bean 的超集，但它们相互补充。CDI 不仅为 EJB bean 提供更高级的 DI，而且还能够为 EJB bean 提供范围（主要用于有状态 bean）。EJB 则提供 CDI 不提供的事务和安全服务等。与 JSF 托管 bean 一样，EJB bean 最终将合并到 CDI 组件模型中。Marina Vatkina（EJB 规范负责人）等人[强烈暗示](https://blogs.oracle.com/marina/entry/ejb_3_2_news)了这一点。

进一步阅读：

*   [CDI 和 EJB 如何比较？相互影响？](https://stackoverflow.com/questions/4684112/how-do-cdi-and-ejb-compare-interact/4705840#4705840)
*   [CDI，何时打破 EJB](http://blog.dblevins.com/2012/11/cdi-when-to-break-out-ejbs.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T05:44:20.410

首先，CDI 是一个依赖注入标准框架。它定义了对象获取依赖关系的方法，而不是通过实例化（`private FooDao dao = new FooDao()`），而是通过创建和管理实例的容器。您可以阅读有关依赖注入的更多信息（google/wiki）。

该标准定义了它如何与 JSF 和 EJB 一起工作。

*   您的 JSF 托管 bean 可以通过 CDI 定义，这样您就可以将服务注入托管 bean，并且 CDI 管理 JSF 托管 bean 的生命周期
*   EJB 还可以从 CDI 的高级依赖注入中受益（以前他们有自己的，功能较差的 DI）。

简而言之，CDI 绑定 JavaEE 中的所有组件，就像 spring 绑定它的所有组件一样，但 CDI 是一个标准。

# java-ee-6 - 用于定时器执行的 Apache Tomee 中的 EJB-3.1 @Startup 和 @Schedule 注释

> ID：13984802
> 
> 赞同：6
> 
> 时间：2012-12-21T05:36:09.020
> 
> 标签：java-ee-6, quartz-scheduler, ejb-3.1, schedule, apache-tomee

**我有以下代码可以在 Apache-tomee 上运行，我正在使用 eclipse 进行编码，并且我想在应用程序启动时使用 @Schedule 注释运行我的简单计划作业。**

```
@Startup
@Singleton
public class ScheduleEJB {
    private static int count = 0;
    @Schedule(second="*/10", minute="*", hour="*", info="MyTimer")
    public void execute() {
       System.out.println("its running count..."+count);
       count++;
    }
} 
```

**当我在 Tomee 上部署此代码时，它让我收到以下消息，并且无法在启动时自动运行我的 schedule 方法 execute()，因为此代码在 glassfish 中运行良好，但我不会在 jboss 的 glassfish 中使用它。**

2012 年 12 月 21 日上午 9:59:45 org.quartz.impl.StdSchedulerFactory 实例化
信息：使用 ThreadExecutor 的默认实现
2012 年 12 月 21 日上午 9:59:45 org.quartz.core.SchedulerSignalerImpl
信息：初始化调度程序信号器类型： org.quartz.core.SchedulerSignalerImpl 类
2012 年 12 月 21 日上午 9:59:45 org.quartz.core.QuartzScheduler
信息：Quartz Scheduler v.2.1.6 创建。
2012 年 12 月 21 日上午 9:59:45 org.quartz.simpl.RAMJobStore 初始化
信息：RAMJobStore 已初始化。
2012 年 12 月 21 日上午 9:59:45 org.quartz.core.QuartzScheduler 初始化
INFO：调度程序元数据：Quartz Scheduler (v2.1.6) 'OpenEJB-TimerService-Scheduler' with instanceId 'OpenEJB' ***Scheduler class: 'org. quartz.core.QuartzScheduler' - 在本地运行。*** ***没有开始。*** ***目前处于待机模式。*** ***执行的作业数：0*** ***使用线程池 'org.apache.openejb.core.timer.DefaultTimerThreadPoolAdapter' - 使用 0 个线程。*** ***使用作业存储 'org.quartz.simpl.RAMJobStore' - 它不支持持久性。******并且没有聚集。*** 2012 年 12 月 21 日上午 9:59:45 org.quartz.impl.StdSchedulerFactory 实例化 INFO：Quartz 调度程序“OpenEJB-TimerService-Scheduler”

2012 年 12 月 21 日上午 9:59:45 org.quartz.impl.StdSchedulerFactory 实例化
信息：Quartz 调度程序版本：2.1.6
2012 年 12 月 21 日上午 9:59:45 org.quartz.core.QuartzScheduler 开始
信息：调度程序 OpenEJB- TimerService-Scheduler_$_OpenEJB 已启动。
2012 年 12 月 21 日上午 9:59:45 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Created Ejb(deployment-id=ScheduleEJB, ejb-name=ScheduleEJB, container=My Singleton Container)
2012 年 12 月 21 日 9上午 59:45 org.apache.openejb.assembler.classic.Assembler createApplication
信息：已启动 Ejb（deployment-id=ScheduleEJB，ejb-name=ScheduleEJB，container=My Singleton Container）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:07:12.460

您是否已经看过 TomEE 示例页面？有一个类似的例子实际运行。

[http://openejb.apache.org/examples-trunk/schedule-methods/README.html](http://openejb.apache.org/examples-trunk/schedule-methods/README.html)

也许你可以试一试，看看你的实际有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T18:32:55.900

您的代码在 TomEE 的最新版本上运行良好。你的版本是什么？

# python - 在 PyQt4 中对 QTableView 项目进行排序的问题

> ID：13984803
> 
> 赞同：0
> 
> 时间：2012-12-21T05:36:11.453
> 
> 标签：python, pyqt4

我已经创建了一个 QTable 视图并将其连接到一个 QSqlTableModel 并且我正在显示从数据库检索的结果查询。在 QTable 视图中我启用了 sortEnabled 选项。所有预期的结果都在打印，但是如果我单击排序指示器，表中的整个数据都会被清空。任何人都可以建议我如何克服这个问题

这是结果表的快照。

![结果快照](../Images/1d29841ed9a544c658630c43fa241850.png)

这是按下排序指示器后结果表的快照。

![按下排序指示器后的结果](../Images/c824faadc192f9447b031217111b6ef7.png)

任何人都可以建议我如何克服这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:41:44.053

要弄清楚为什么 QTableView 的 setSortingEnabled 方法不起作用，原来 QAbstractItemModel 中的 sort 方法没有实现。所以你必须自己实现它。

一种解决方案是创建一个 QAbstract 视图。下面是一个[代码片段](http://pastebin.com/eFCN7Zzr)。

我不确定这是否是实现排序方法的最佳方式，但我找不到其他任何东西，这似乎对我有用。

# redirect - 将子域重定向到另一个域

> ID：13984804
> 
> 赞同：0
> 
> 时间：2012-12-21T05:36:20.213
> 
> 标签：redirect, subdomain

目前我正在使用 Windows 共享主机。我需要将我的子域重定向到一个新域（包括整个路径）。

例如，当用户访问[http://oldsubdomain.olddomain.com/page1/topic1](http://oldsubdomain.olddomain.com/page1/topic1)时，它会将用户重定向到[http://newdomain.com/page1/topic1](http://newdomain.com/page1/topic1)

这是我的服务提供商建议的方法

```
<script language="c#" runat="server">
private void Page_Load(object sender, System.EventArgs e)
{
Response.Status = "301 Moved Permanently";
Response.AddHeader("Location","http://www.new-url.com");
}
</script> 
```

但是这种方式似乎无法重定向整个 url。有什么建议么？谢谢

*更新

尝试使用如下 web.config 进行重定向，但仍然得到 500 内部错误，知道吗？

```
 <?xml version="1.0"?>
<configuration>
  <system.webServer>
    <rewrite>
      <rule name="CName to URL" stopProcessing="true">
        <match url=".*" />
        <conditions>
          <add input="{HTTP_HOST}" pattern="^(?!www)(.*)\.olddomain\.com$" />
        </conditions>
        <action type="Redirect" url="http://newdomain.com/{R:0}" />
      </rule>
    </rewrite>
  </system.webServer>
    <system.web>      
        <compilation debug="false" targetFramework="4.0" />
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:52:40.103

为什么不使用重定向方法？

```
private void Page_Load(object sender, System.EventArgs e)
{
   response.redirect("http://newdomain.com/page1/topic1");
} 
```

# c# - 列表对象的垃圾收集

> ID：13984805
> 
> 赞同：2
> 
> 时间：2012-12-21T05:36:30.010
> 
> 标签：c#, garbage-collection, red-gate-ants

我想问一下清理和处理List（Of Object）中收集的对象的效率是什么？

是不是通过调用 List.Clear() 方法会自动清理它收集的所有对象？

例如考虑下面的例子

```
public partial class Form1 : Form
{
    FontCollection m_fontCollection;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        m_fontCollection = new FontCollection();
        for (int i = 0; i < 5000; i++)
        {
            Font font = new Font("Arial", 23);

            FontImpl impl = new FontImpl(font, Color.Black);
            impl.AfterChange += 
                new FontImpl.AfterChangeHandler(impl_AfterChange);

            m_fontCollection.Add(impl);
        }

        m_fontCollection.Dispose();
        MessageBox.Show("TakeSnap");
    }

    void impl_AfterChange()
    {
        throw new NotImplementedException();
    }
}

public class FontCollection : IEnumerable, IDisposable
{
    IList<FontImpl> m_Implementation = new List<FontImpl>();

    internal void Add(FontImpl impl)
    {
        this.m_Implementation.Add(impl);
    }

    public IEnumerator GetEnumerator()
    {
        return this.m_Implementation.GetEnumerator();
    }

    public void Dispose()
    {
        m_Implementation.Clear();
        m_Implementation = null;
    }
}

public class FontImpl
{
    private Font m_Font;
    private Color m_color;

    public FontImpl(Font newFont, Color newColcor)
    {
        m_Font = newFont;
        m_color = newColcor;
    }

    public event AfterChangeHandler AfterChange;

    public delegate void AfterChangeHandler();
} 
```

当我运行上述应用程序 ANTS 内存分析器时，我可以看到内存泄漏 Font 和 FontFamily（我无法上传屏幕）以及如何删除这些泄漏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T05:39:32.953

通常，您不必担心垃圾收集以及何时发生。当一个对象的引用为零时，它就有资格进行 GC。

但是，您*应该*注意的是[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)对象。当你完成一个`IDisposable`对象时，你真的需要调用`Dispose()`它。如果对象位于函数的本地范围内，那么`using`块可以轻松完成：

```
using (var resource = new SomeIDisposable()) {
    // use resource

    // resource.Dispose() is automatically called, *even if* an exception
    // is thrown.
} 
```

您*可能*会通过以对象的“悬空引用”结束来导致内存泄漏，这会阻止它们被垃圾收集。最常见的原因是事件处理程序。当您订阅由 object 公开的事件时`A`，使用 object 上的事件处理程序`B`，`A`获取对以下内容的引用`B`：

```
class B {
    void hook_up_to(A a) {
        a.SomeEvent += Handler;     // `a` gets a reference to `this`
    }

    void Handler(object sender, EventArgs e) {
    }
}

class Program {
    private A _a = new A();

    static void SomeMethod() {
        var b = new B();

        b.hook_up_to(_a);    // _a now has a reference to b

        // b goes out of scope.
    }
} 
```

通常，当`b`超出范围时，它引用的对象将有资格进行垃圾回收。但是，在这种情况下，`b`连接到成员变量发布的事件`_a`，这导致`_a`获得对`b`. 现在有一个对 的突出引用`b`，它不可能¹清除，并且`b`不符合 GC 的条件。这是内存泄漏。

¹`b`在这种情况下，唯一的引用方式是`this`指针如果/当事件处理程序被触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:43:55.917

你不需要`IDisposable`在你的类上实现。通常，您的类需要实现的唯一时间`IDisposable`是它包含需要处理的*其他*类（例如数据库和网络连接以及非托管对象）。

在您的示例中，您可能需要考虑在中创建`m_fontCollection`一个*局部*变量`button1_Click`，因为您完全在该方法中创建和处理它。如果您将其设为本地，那么一旦`button1_Click`退出它将被垃圾收集......*前提*是没有对它的剩余引用（在这种情况下确实没有）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T06:00:14.450

清除只是从列表中删除所有内容。在您的情况下，您有一个 IDisposable 对象列表，您需要对列表中的所有项目调用 Dispose 。调用 Clear 不会这样做。

你的 FontImpl 应该实现 IDisposable 因为它管理一个 IDisposable 对象：

```
 public void Dispose() {
      if (m_Font != null) {
          m_Font.Dispose();
          m_Font = null;
      }
 } 
```

您的 FontCollection Dispose 应如下所示：

```
public void Dispose()
{
    foreach(FontImpl font in m_Implementation) {
        font.Dispose();
    }
    m_Implementation.Clear();
    m_Implementation = null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T06:00:19.820

在您展示的代码的情况下，您有`Font`实现的对象，`IDisposable`因此应该被处置。这些对象由您的`FontImpl`类管理，因此`FontImpl`应该实现`IDisposable`. 您的`FontCollection`类包含一个对象列表，`FontImpl`这些对象现在应该是一次性的，因此`FontCollection`需要实现`IDisposable`。

您应该阅读 IDisposable 模式（这个 SO 答案提供了一些很好的信息 - [https://stackoverflow.com/a/538238/416574](https://stackoverflow.com/a/538238/416574)）。

话虽这么说，从您提供的代码片段来看，您似乎没有从您`FontCollection`的类中获得任何东西来包装列表。除非您要对该类做其他事情，否则我只会有一个列表作为成员变量。这样，在`Dispose`您的表单方法中，您可以遍历您的列表并处理`FontImpl`对象。如果您想防止双重处理，那么只需在处理完所有内容后清空列表即可。

# collections - Ember 是否有可与 {{#collection}} 一起使用的 {{itemView}} 助手？

> ID：13984806
> 
> 赞同：1
> 
> 时间：2012-12-21T05:36:29.587
> 
> 标签：collections, ember.js, each

实际上，我正在寻找让 View 负责标记集合视图中的第一个或最后一个项目的方法，我发现了这个[How do I add a separator between elements between an {{#each}} loop except after最后一个元素？](https://stackoverflow.com/questions/10403003/how-do-i-add-a-separator-between-elements-in-an-each-loop-except-after-the) .但我不想在javascript中定义itemViewClass模板的attrs（例如classNames），我可以只使用{{itemView}}助手或其他东西来定义itemView模板吗？

```
{{#collection contentBinding="dataList" tagName="ol" classNames="list" itemViewClass="ItemView"}}
    {{#itemView classNames="item" classNamesBinding="isLastItem:last"}}
        item templates
    {{/itemView}}
{{/collection}} 
```

虽然，这可以通过其他方式解决，但我只想知道是否可以找到内置支持。而且我确实搜索了很长时间，只是找不到`Ember.Handlebars.collection`'s 的文档，它不在最新的 API 文档中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:19:16.453

从 Emberjs 的主版本开始，您可以尝试使用自定义 Handlebars “绑定”助手。它看起来像这样：

```
{{#each item in collection}}
    {{#isLastElement item}}
        template if last
    {{else}}
        template if not
    {{/isLastElement}}    

    both templates
{{/each}}

Ember.Handlebars.registerBoundHelper('islastElement', 
    function(item, options) {
     if(functionTellingIfThisIsLastElement(item))
          return options.fn(this);
     else
          return options.inverse(this);
    }
); 
```

这只是查看事物的另一种方式，使用**functionTellingIfThisIsLastElement**可以查看集合或项目中的属性。要访问该集合，您必须在此处更改一些内容，以获得良好的上下文 + 参数，具体取决于您的代码。

# .net - 我们如何配置应用程序在使用 Task.Factory.StartNew 时产生多少线程

> ID：13984808
> 
> 赞同：0
> 
> 时间：2012-12-21T05:36:55.573
> 
> 标签：.net, c#-4.0, task-parallel-library

有没有办法配置应用程序在使用 Task.Factory.StartNew 时产生多少线程？

*更新* 我只是在探索配置线程数的可能性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:26:55.213

您必须创建一个自定义调度程序，事实上[，MSDN 上有一篇文章如何显示这个特定案例](http://msdn.microsoft.com/en-us/library/ee789351.aspx)。

# qt4 - 如何在 Qt 中设置按钮上标签的字体大小？

> ID：13984811
> 
> 赞同：12
> 
> 时间：2012-12-21T05:37:06.093
> 
> 标签：qt4, qpushbutton

我正在使用此代码在大小为 16 的按钮上设置标签

```
ui->pushButton->setText(tr("<font size=16>Tank 1 \n %1%2C</font>").arg(szTemp).arg(degree)); 
```

但我得到了`<font size=16>Tank 1 005c</font>`按钮上写的输出。

如何设置字体大小？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T06:03:01.823

a 的文本值`QPushButton`不是“富文本”，因此它不会按预期解释您的 html。使用`setFont`小部件上的 设置字体大小，或通过样式表设置：

```
QFont font = ui->pushButton->font();
font.setPointSize(16);
ui->pushButton->setFont(font); 
```

样式表虽然功能更强大，但可能会更复杂一些，因为它会迫使您定义许多您现在正在重写的其他功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-07-26T09:56:14.807

你可以使用样式表

```
ui->pushButton->setStyleSheet("QPushButton{font-size: 12px;font-family: Arial;color: rgb(255, 255, 255);background-color: rgb(38,56,76);}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-27T01:15:34.063

在**PyQT5 中**：

```
from PyQt5.QtWidgets import QPushButton
from PyQt5.QtGui import QFont

# some code here

btn = QPushButton()
btn.setFont(QFont('Times', 20))

# some code here 
```

# android - 在应用程序启动时创建片段的新实例

> ID：13984812
> 
> 赞同：0
> 
> 时间：2012-12-21T05:37:15.580
> 
> 标签：android, fragment

我在容器布局中使用片段管理器在活动中加载了一个片段。在我的活动中，我启动了一项服务以连接到其他蓝牙设备并通过发送和接收某些数据与其进行通信。当应用程序打开并且服务连接到蓝牙设备时，一切正常。

但是当我点击返回按钮并重新打开我的应用程序时，虽然我的服务仍然连接到其他蓝牙设备，但我用来显示相同​​的片段显示它处于断开状态。在将文本设置为我的片段的子文本视图之前，我使用

> 片段.isVisible()

它返回错误（？）

所以，我想如果我没记错的话，每次我打开应用程序时，活动都会在我的原始片段上创建一个不同的片段实例。

这是我活动的 onCreate() ..

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_bt_dashboard);

    System.out.println("OnCreate() of BTDashboardActivity........");

    if (findViewById(R.id.fragmentContainer) != null) {

        if (savedInstanceState != null) {

            System.out.println("ListFragmetn allready exist...");
            return;
        }

        System.out.println("adding listfragment to view...");

        listFragment = new BTDashboardListFragment();

        listFragment.setArguments(getIntent().getExtras());

        getSupportFragmentManager().beginTransaction()
                .add(R.id.fragmentContainer, listFragment).commit();

    }
} 
```

**编辑**

这是活动 onStart() 的代码。

```
@Override
public void onStart() {
    super.onStart();
if (!mBluetoothAdapter.isEnabled()) {
    Intent enableIntent = new Intent(
                    BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableIntent,
                    Constants.REQUEST_ENABLE_BT);
        } else {
            if (mBluetoothService == null) {
                startBluetoothService();
                Log.d(TAG, "Chat service Started...@@@@@@@@@@@@");

                showDisconnectedUI();

            System.out.println("showing disconnceted status to the user..");

            } else {
                if (mBluetoothService.getState() == Constants.STATE_CONNECTED) {

                System.out.println("showing connection status to the user..");
                    showConnectedUI();

                } else {

            System.out.println("showing disconnceted status to the user..");
                    showDisconnectedUI();

                }
            }

        } 
```

}

这是将数据设置为片段的子视图的代码..

```
protected void handleResponse(String readMessage) {

    System.out.println("response from device: " + readMessage);

    if (readMessage != null) {

         if (listFragment != null && listFragment.isInLayout()) {
         System.out.println("List fragment is found...");

        System.out.println("Setting response text to listFragment...");

        if(listFragment.isVisible())   // prints not visible after reopening the app
            System.out.println("listFragment is visible ...");
        else
            System.out.println("listFragment is not visible..."); 

        listFragment.setResponseText(readMessage);

        }
              } 
```

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:06:30.607

使片段实例**静态**解决了我的问题。我知道这只是一种解决方法，但现在对我来说就像一个魅力..

# python - 限制一个方法只能通过另一个方法调用？

> ID：13984818
> 
> 赞同：0
> 
> 时间：2012-12-21T05:38:00.590
> 
> 标签：python, django, methods, call

说我有两种方法`first_method`，`second_method`如下所示。

```
def first_method(some_arg):
    """
    This is the method that calls the second_method
    """

    return second_method(some_arg[1], some_arg[2])

def second_method(arg1, arg2):
    """
    This method can only be called from the first_method
    or it will raise an error.
    """

    if (some condition):
        #Execute the second_method
    else:
        raise SomeError("You are not authorized to call me!") 
```

我如何检查（什么条件）第一种方法正在调用第二种方法并根据该方法处理该方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T05:49:55.700

为什么不在第一个方法中定义第二个方法，这样它就不会被直接调用。

例子：

```
def first_method(some_arg):
    """
    This is the method that calls the second_method
    """
    def second_method(arg1, arg2):
        """
        This method can only be called from the first_method
        hence defined here
        """

        #Execute the second_method

    return second_method(some_arg[1], some_arg[2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:45:02.040

[您可以查看检查模块](http://docs.python.org/2/library/inspect.html#the-interpreter-stack)中的一些堆栈函数。

但是，您正在做的事情可能是个坏主意。尝试强制执行此类事情根本不值得麻烦。只需记录不应该直接调用第二种方法，给它一个带有前导下划线（`_secret_second_method`或其他）的名称，然后如果有人直接调用它，那是他们自己的问题。

或者，只是不要将其设为单独的方法，而是将代码直接放入`first_method`. 如果它从不从一个地方调用，为什么你需要让它成为一个单独的函数？在这种情况下，它也可能是第一种方法的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:49:32.757

这是一个与 Django 无关的示例，说明如何获取调用方方法框架（该框架中有很多信息）：

```
import re, sys, thread

def s(string):
    if isinstance(string, unicode):
        t = str
    else:
        t = unicode
    def subst_variable(mo):
        name = mo.group(0)[2:-1]
        frame = sys._current_frames()[thread.get_ident()].f_back.f_back.f_back
        if name in frame.f_locals:
            value = t(frame.f_locals[name])
        elif name in frame.f_globals:
            value = t(frame.f_globals[name])
        else:
            raise StandardError('Unknown variable %s' % name)
        return value
    return re.sub('(#\{[a-zA-Z_][a-zA-Z0-9]*\})', subst_variable, string)

first = 'a'
second = 'b'
print s(u'My name is #{first} #{second}') 
```

基本上，您可以使用[`sys._current_frames()[thread.get_ident()]`](http://docs.python.org/2/library/sys.html#sys._current_frames)获取帧链表头（每个调用者的帧），然后查找您想要的任何运行时信息。

# emacs - 如何在 emacs 中输入这样的“点”或“星”？

> ID：13984819
> 
> 赞同：-1
> 
> 时间：2012-12-21T05:38:07.323
> 
> 标签：emacs, gnus

(setq gnus-sum-thread-tree-root "●") (setq gnus-sum-thread-tree-false-root "☆")

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:50:42.627

如果您知道他们的 Unicode 代码点或他们的官方 Unicode 名称，您可以使用`C-x 8 RET`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:54:06.740

开启 Egg 输入法（Mx toggle-input-method），通常绑定“C-\”。然后，输入“z！” 为“●”，“z6”为“☆”。

# .net - F# CSV 文件助手

> ID：13984823
> 
> 赞同：1
> 
> 时间：2012-12-21T05:38:34.647
> 
> 标签：.net, visual-studio-2010, csv, f#, filehelpers

我按照下面描述的步骤读取 csv 但在最后一行出现运行时错误。
(TypeInitializationException)
谁能告诉我这里出了什么问题？

[http://www.markstaples.com/2009/01/08/parsing-csv-files-in-f/](http://www.markstaples.com/2009/01/08/parsing-csv-files-in-f/)

```
module ReadCsv //-------------------------------------  
open System  
open FileHelpers  
[<DelimitedRecord(",")>]  
[<IgnoreFirst(1)>]  
type CsvRecord =  
    class  
       val field1 : string  
    end

type oneRow() =  
    class  
        [<DefaultValue>]  
        val mutable Str1: string  
        [<DefaultValue>]  
       val mutable Str2: string  
   end

let engine = new FileHelperEngine(typeof<CsvRecord>)  
let res = engine.ReadFile("C:/Users/Admin/Desktop/test.csv")  

module main //--------------------------------  
let downcast_Customer_Array = Array.map (fun (a:obj) -> a :?> ReadCsv.CsvRecord)  
let res_Customers = downcast_Customer_Array ReadCsv.res 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:27:46.927

John 的评论正常，您可能正在尝试读取一个不存在的文件。在 Windows 中，反斜杠用于路径分隔，而不是（正）斜杠。这些反斜杠需要在 F# 字符串文字中进行转义。您看到这种情况的原因`TypeInitializationException`是该代码是在加载类型时执行的。如果它在一个函数中，它会在被调用时执行，你会得到预期的异常。

有几种方法可以转义反斜杠，选择一种：

```
let res = engine.ReadFile("C:\\Users\\Admin\\Desktop\\test.csv")
let res = engine.ReadFile(@"C:\Users\Admin\Desktop\test.csv")
let res = engine.ReadFile("""C:\Users\Admin\Desktop\test.csv""") 
```

最后一个，三重引用，是 F# 3.0 的一部分。[http://blogs.msdn.com/b/fsharpteam/archive/2012/07/19/more-about-fsharp-3.0-language-features.aspx](http://blogs.msdn.com/b/fsharpteam/archive/2012/07/19/more-about-fsharp-3.0-language-features.aspx)

**编辑** 您的代码在类型初始化中运行的事实掩盖了您的真正错误。尝试以不同的方式构建代码：

```
module ReadCsv = //-------------------------------------  
   open System  
   open FileHelpers  

   [<DelimitedRecord(",")>]  
   [<IgnoreFirst(1)>]  
   type CsvRecord =  
       class  
          val field1 : string  
       end

   let read file = 
      let engine = new FileHelperEngine(typeof<CsvRecord>)  
      engine.ReadFile(file) 
      |> Array.map (fun row -> row :?> CsvRecord)

module Main = //--------------------------------  
    [<EntryPoint>]
    let main argv = 
       let results = ReadCsv.read "C:/Users/Admin/Desktop/test.csv"
       printfn "%A" results
       0 // return an integer exit code 
```

现在，`TypeInitializationException`我们得到的不是`BadUsageException`消息“记录类 CsvRecord 需要一个没有参数（公共或私有）的构造函数”。更有用！解决这个问题，代码按预期工作：

```
module ReadCsv = //-------------------------------------  
   open System  
   open FileHelpers  

   [<DelimitedRecord(",")>]  
   [<IgnoreFirst(1)>]  
   type CsvRecord() =  
       class  
          [<DefaultValue>]
          val mutable field1 : string  
       end

   let read file = 
      let engine = new FileHelperEngine(typeof<CsvRecord>)  
      engine.ReadFile(file) 
      |> Array.map (fun row -> row :?> CsvRecord)

module Main = //--------------------------------  
    [<EntryPoint>]
    let main argv = 
       let results = ReadCsv.read "C:/Users/Admin/Desktop/test.csv"
       results |> Seq.iter (fun r -> printfn "%s" r.field1)
       0 // return an integer exit code 
```

# java - 如何在 Jboss 系统上的我的包文件夹中独立执行类文件（包括 Main()）

> ID：13984830
> 
> 赞同：1
> 
> 时间：2012-12-21T05:39:49.900
> 
> 标签：java, jboss, main

我有一个部署在 Jboss 中的 java 项目。当jboss完全启动时，我必须在jboss启动时执行一个具有`main()`自动方法的类文件。这意味着 TESTManager 应该像一个独立的守护进程一样。我不知道如何在我的项目中自动执行它......

该类提供如下：

```
public class TESTMain {

    public static void main(String[] args) {
        try {
            TESTManager testManager = new TESTManager();
            testManager.start();
        } catch (Exception e) {
            e.printStackTrace();
        }   
    }
} 
```

# jasper-reports - ireport 生成具有不同外观和感觉的 pdf 和 html 报告？未以相同格式生成 Html 和 Pdf 报告

> ID：13984843
> 
> 赞同：1
> 
> 时间：2012-12-21T05:42:07.743
> 
> 标签：jasper-reports, report, reporting, ireport

我在我的 liferay 自定义 portlet 中使用 jasper 报告，我用 ireport 4.7.1 设计了我的报告，但我的问题是为什么用 html 和 pdf 生成的报告存在巨大差异。 html 格式和 pdf 格式..如何使从同一 jasper 文件生成的 html 和 pdf 报告相同.?我的意思是具有相同的外观和感觉..以下是我的 html 和 pdf 报告片段

```
HTML REPORT 
```

![HTML 报告](../Images/a17c565f60d08e57862b9bee93bd2b55.png)

```
PDF REPORT 
```

![PDF 报告](../Images/2059d206ee9a0290624b98936a4075a8.png)

以下是我的 jrxml 文件，我从中生成 .jasper，然后生成以上两个结果。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Campaign_Advertise_DateRange_Report" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isIgnorePagination="true">
    <property name="ireport.zoom" value="0.9090909090909098"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <subDataset name="Table Dataset 1"/>
    <field name="advertisename" class="java.lang.String"/>
    <field name="camp_name" class="java.lang.String"/>
    <field name="ad_location" class="java.lang.String"/>
    <field name="clicked" class="java.lang.Integer"/>
    <field name="impression" class="java.lang.Integer"/>
    <field name="filter_start_date" class="java.util.Date"/>
    <field name="filter_end_date" class="java.util.Date"/>
    <variable name="CamapignTotal" class="java.lang.Integer" resetType="Group" resetGroup="Campaign Name" calculation="Sum">
        <variableExpression><![CDATA[$F{impression}]]></variableExpression>
    </variable>
    <variable name="CampaignGrandTotal" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{impression}]]></variableExpression>
    </variable>
    <group name="Campaign Name">
        <groupExpression><![CDATA[$F{camp_name}]]></groupExpression>
        <groupFooter>
            <band height="21">
                <textField pattern="" isBlankWhenNull="true">
                    <reportElement style="table_TD" x="419" y="0" width="86" height="20"/>
                    <textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
                        <font isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$V{CamapignTotal}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement style="table_TD" x="346" y="0" width="73" height="20"/>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font isBold="true"/>
                    </textElement>
                    <text><![CDATA[Group Total :]]></text>
                </staticText>
            </band>
        </groupFooter>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="114">
            <staticText>
                <reportElement x="136" y="24" width="283" height="67"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="32" isUnderline="true"/>
                </textElement>
                <text><![CDATA[Campaign Reports]]></text>
            </staticText>
            <staticText>
                <reportElement x="0" y="2" width="30" height="20"/>
                <textElement>
                    <font fontName="Times New Roman" isBold="true"/>
                </textElement>
                <text><![CDATA[Date : ]]></text>
            </staticText>
            <textField pattern="MM/dd/yyyy">
                <reportElement x="30" y="2" width="100" height="20"/>
                <textElement textAlignment="Justified">
                    <font fontName="Times New Roman" isUnderline="true"/>
                </textElement>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="94" width="30" height="20"/>
                <textElement textAlignment="Right">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[From:]]></text>
            </staticText>
            <staticText>
                <reportElement x="136" y="94" width="19" height="20"/>
                <textElement textAlignment="Right">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[To:]]></text>
            </staticText>
            <textField>
                <reportElement x="30" y="94" width="96" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{filter_start_date}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="155" y="94" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{filter_end_date}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="419" y="94" width="131" height="20"/>
                <textElement textAlignment="Right">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Advertise Display Reports]]></text>
            </staticText>
            <image>
                <reportElement x="458" y="8" width="92" height="53"/>
                <imageExpression><![CDATA["D:\\Liferay\\liferay-plugins-sdk-6.1.1-ce-ga2-20120731132656558\\liferay-plugins-sdk-6.1.1\\portlets\\eMenuAdvertise-portlet\\docroot\\img\\eMenuLogo.png"]]></imageExpression>
            </image>
        </band>
    </title>
    <pageHeader>
        <band height="52">
            <staticText>
                <reportElement style="table_TD" mode="Transparent" x="0" y="31" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Times New Roman" size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Advertise Name]]></text>
            </staticText>
            <staticText>
                <reportElement style="table_TD" mode="Transparent" x="346" y="31" width="73" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Times New Roman" size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Clicked]]></text>
            </staticText>
            <staticText>
                <reportElement style="table_TD" mode="Transparent" x="250" y="31" width="96" height="20" isPrintInFirstWholeBand="true"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Times New Roman" size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[AD Location]]></text>
            </staticText>
            <staticText>
                <reportElement style="table_TD" mode="Transparent" x="100" y="31" width="150" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Times New Roman" size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Campaign Name]]></text>
            </staticText>
            <staticText>
                <reportElement style="table_TD" mode="Transparent" x="419" y="31" width="86" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Times New Roman" size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Impression]]></text>
            </staticText>
        </band>
    </pageHeader>
    <detail>
        <band height="21" splitType="Immediate">
            <textField>
                <reportElement style="table_TD" mode="Transparent" x="0" y="-1" width="100" height="22"/>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
                    <font fontName="Times New Roman"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{advertisename}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="table_TD" mode="Transparent" x="250" y="-1" width="96" height="22" backcolor="#FFFFFF"/>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
                    <font fontName="Times New Roman"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ad_location}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="table_TD" mode="Transparent" x="419" y="-1" width="86" height="22"/>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
                    <font fontName="Times New Roman"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{impression}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="table_TD" mode="Transparent" x="100" y="-1" width="150" height="22"/>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
                    <font fontName="Times New Roman"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{camp_name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="table_TD" mode="Transparent" x="346" y="-1" width="73" height="22"/>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
                    <font fontName="Times New Roman"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{clicked}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <lastPageFooter>
        <band height="50">
            <staticText>
                <reportElement style="table_TD" x="346" y="0" width="73" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Grand Total :]]></text>
            </staticText>
            <textField isBlankWhenNull="false">
                <reportElement style="table_TD" x="419" y="0" width="86" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{CampaignGrandTotal}]]></textFieldExpression>
            </textField>
        </band>
    </lastPageFooter>
</jasperReport> 
```

任何人都可以帮助我使两个报告的外观和感觉相同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:48:22.050

您报告中的问题似乎是细节带中元素的高度，它们是 22 像素，带是 21，它们的顶部属性也是 -1，我建议您使带更大（或您的控件更小）并将 Top 属性设置为 0 或任何正值。

# iphone - 如何为 NSPredicate 连接两个字符串，即名字和姓氏

> ID：13984846
> 
> 赞同：14
> 
> 时间：2012-12-21T05:42:24.327
> 
> 标签：iphone, objective-c, ios, nsstring, nspredicate

我有一个`Person`具有两个`NSString`属性的对象；`firstName and lastName`. 我目前正在使用`NSPredicate`这样的：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(firstName contains[cd] %@) OR (lastName contains[cd] %@)", searchText, searchText]; 
```

因此，例如，假设我正在搜索 name `"John Smith"`。如果我在我的搜索栏中输入`"Joh"`，那么`John Smith`将作为一个选项出现。这很好，但如果我输入`"John Sm"`它会变成空白。

我如何加入 firstName 和 lastName ，`predicate`所以如果我正在搜索`"John Sm"`then`John Smith`仍然会作为一个选项出现。

我希望这是有道理的。谢谢。

编辑：为了增加一点说明，我使用了`SearchDisplayController`委托方法：

```
-(void)filterContentForSearchText:(NSString *)searchText scope:(NSString *)scope; 
```

我正在使用`predicate`这样的：

```
newArray = [personObjectArray filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-21T06:31:03.310

试试这个，

```
NSString *text = @"John Smi";
NSString *searchText = [text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

NSArray *array = [searchText componentsSeparatedByString:@" "];
NSString *firstName = searchText;
NSString *lastName = searchText;
NSPredicate *predicate = nil;

if ([array count] > 1) {
    firstName = array[0];
    lastName = array[1];
    predicate = [NSPredicate predicateWithFormat:@"(firstName CONTAINS[cd] %@ AND lastName CONTAINS[cd] %@) OR (firstName CONTAINS[cd] %@ AND lastName CONTAINS[cd] %@)", firstName, lastName, lastName, firstName];
} else {
    predicate = [NSPredicate predicateWithFormat:@"firstName CONTAINS[cd] %@ OR lastName CONTAINS[cd] %@", firstName, lastName];
}

NSArray *filteredArray = [people filteredArrayUsingPredicate:predicate];
NSLog(@"%@", filteredArray); 
```

输出：

```
(
        {
        firstName = John;
        lastName = Smith;
    }
) 
```

这里的 text 代表搜索到的文本。上面的好处是，即使你通过`text = @"Smi Joh";`or`text = @"John ";`或`text = @" smi";`or `text = @"joh smi ";`，它仍然会显示上面的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-29T15:48:28.973

上面建议的解决方案不适用于包含两个以上单词的搜索字符串。这是 swift 中更彻底的实现。如果您的目标是跨姓名、电子邮件、电话号码等实现全文搜索，此解决方案还允许在记录上添加更多字段。在这种情况下，只需将 NSPredicate 更新为`OR newField CONTAINS[cd] %@`并确保在字符串替换列表。

```
let searchText = search.stringByTrimmingCharactersInSet(NSCharacterSet.whitespaceCharacterSet())
let words = searchText.componentsSeparatedByCharactersInSet(NSCharacterSet.whitespaceCharacterSet())
let predicates = words.map { NSPredicate(format: "firstName CONTAINS[cd] %@ OR lastName CONTAINS[cd] %@", $0,$0) }

let request = NSFetchRequest()
request.predicate = NSCompoundPredicate(type: NSCompoundPredicateType.AndPredicateType, subpredicates: predicates) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-03T17:14:47.003

您可以将字段连接成两个公共字段（firstLastName 和 lastFirstName）

```
- (NSString *)firstLastName {
      return [NSString stringWithFormat:@"%@ %@", self.firstName, self.lastName];
}

- (NSString *)lastFirstName {
      return [NSString stringWithFormat:@"%@ %@", self.lastName, self.firstName];
} 
```

然后使用 'contains[cd]' 过滤此字段

```
[NSPredicate predicateWithFormat:@"(firstLastName contains[cd] %@) OR (lastFirstName contains[cd] %@)" , self.searchBar.text, self.searchBar.text]; 
```

# internet-explorer - vbscript Internet Explorer 对象就绪状态未完成

> ID：13984848
> 
> 赞同：1
> 
> 时间：2012-12-21T05:42:49.750
> 
> 标签：internet-explorer, vbscript, readystate

我为我的无知道歉，但我对脚本的基本理解非常有限。无论如何，我必须回到山上寻求帮助，所以这是我的问题。

我有一个正在编写的脚本，它将使用“for”语句循环访问大约 500 个网站。在每个网站上，它将提取循环遍历（嵌套的“for”语句）大约 5 个网站所需的数据，以提取我正在寻找的信息。它似乎没有达到 500，而是在大约 6 个之后就陷入了寻找就绪状态。我已经更改了 500 的顺序，它似乎不是一个特定的网站。尽管运行了约 5 倍以上，它也没有卡在嵌套的“for”语句上。如您所见，程序和站点略有不同。剧本一直在打磨。当我去任务管理器并杀死 iexplore.exe 时，当我通过文本键盘运行它时会弹出以下消息。请注意，我在脚本的警报文本中突出显示了实际的行项目。

Microsoft VBScript 运行时错误：远程服务器计算机不存在或不可用：“ReadyState”

当我对此进行更多思考时，将不胜感激这里的任何想法。

```
myVars_s = "~500,comma,separated,strings"
myVars = split(myVars_s,",")
num_myVars = UBound(myVars)

For m = 0 to num_myVars

     theURL = "www.website.prefix.com/" & myVars(m)

     set ie = CreateObject("InternetExplorer.Application")
     ie.Navigate("http://" & theURL)
     Do until ie.ReadyState = 4         <---this is line called out by alarm text
         WScript.Sleep 100 
     Loop
     With ie.document
            set theTables = .all.tags("table")
            (find correct table and extract list of ~5 more strings = myStrings)

            myStrings_s = "~15,comma,separated,strings"
            myStrings = split(myStrings_s,",")
            num_myStrings = UBound(myStrings)

            For j = 0 to num_myStrings 
                myOtherURL = "www.anotherwebsite.prefix.com" & myStrings(j)

                set ie = createobject("internetexplorer.application")
                ie.navigate myOtherURL
                ie.visible = 1

                do until ie.readystate = 4
                    wscript.sleep 100
                loop

                text = ie.document.body.innerTEXT
                (use inStr(text) feature to extract the text I want)
                ie.quit
            Next

    ie.Quit
    End With

Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:57:36.643

我想你的内存用完了，`iexplorer.exe`你能在任务管理器中检查你有多少吗？在某些损坏的 Windows 系统中，您的 IE.Quit 将失败...

还要注意以下几点：

1.  for external loop 和 for inner loop 对 IE 对象使用不同的变量名 external loop: `ie`, inner loop:`ie2`

2.  您`ie.quit`在`with ie.document`块内使用，可能会导致问题？

3.  根据[这篇](https://stackoverflow.com/questions/3046177/why-does-internetexplorer-object-become-unresponsive)文章，您可以尝试删除循环`Sleep`内的语句`Do`

我通常会使用

```
Do While IE.Busy
Loop
Do While IE.readyState <> 4
Loop 
```

编辑：

对于 IE.Quit 无法杀死所有 iexplorer.exe，可能是由于[这个](http://blogs.msdn.com/b/askie/archive/2009/03/09/opening-a-new-tab-may-launch-a-new-process-with-internet-explorer-8-0.aspx)原因，为确保没有内存泄漏，您可以重新排列代码并使用 Google [VBA Kill IE中的方法强制杀死所有 IE 实例](https://www.google.com/search?q=vba%20kill%20ie&oq=vba%20kill%20ie&aqs=chrome.0.59j57l3j60l2.2034&sugexp=chrome,mod=16&sourceid=chrome&ie=UTF-8)

你应该像这样重新排列

```
for i = XXXX ' OUTER FOR LOOP
    set IE = 'outer URL
    with IE
        ' assgin the param. into variables
        start = IE. XXX
        end = IE.YYY  
    end with 
    IE.quit

    for j = start to end   ' INNER FOR LOOP
        set IE = ' inner url
        'loop inner IE
        with IE

        end with 
        IE.quit
    next j
next i 
```

# c# - 无法获得控制台输入模式 - 0x80070006

> ID：13984850
> 
> 赞同：0
> 
> 时间：2012-12-21T05:43:07.450
> 
> 标签：c#, handle, microsoft-bits

我正在使用 bitsadmin 下载网络中的文件。我创建了用于运行 bitsadmin 作业创建、addjob、resume 等的进程。应用程序在 windows 7 上运行良好，但是当我在 xp 机器上运行我的 exe 时出现异常

> BITSADMIN 2.0 版 [6.6.2600.2180]
> BITS 管理实用程序。
> (C) 版权所有 2000-2004 Microsoft Corp.
> 
> 无法获取控制台输入模式 - 0x80070006
> 句柄无效。

但是在 xp 机器上，当我使用命令提示符创建作业时，它可以工作。可能是什么问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:04:11.213

我得到了解决方案，而不是使用 bitsadmin 的过程，我使用“SharpBITS.Base”来下载文件。

# android - 适用于 Android 的 Chrome 无法正确显示 Google 网络字体

> ID：13984859
> 
> 赞同：7
> 
> 时间：2012-12-21T05:43:39.477
> 
> 标签：android, html, google-chrome, css

我重新创建了我在使用 CSS`font-family`和 Chrome for Android 时遇到的问题。Web 浏览器没有正确继承字体，而是使用备用字体。

[http://jsbin.com/iyifah/1/edit](http://jsbin.com/iyifah/1/edit)

这似乎是已在 Google ( [http://code.google.com/p/chromium/issues/detail?id=138257](http://code.google.com/p/chromium/issues/detail?id=138257) ) 上提出的错误。

添加`<meta name="viewport" content="width=device-width, initial-scale=1" />`到 HTML 应该可以解决问题，但这仅解决了第一个元素的设置字体的问题。

JS Bin 链接将有助于解释我在说什么。所以，如果有人有 Android 版 Chrome，请转到链接看看我在说什么！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:44:39.653

我对这个问题的解决方案是完全放弃 Google Webfonts，而是将字体下载到 Web 服务器并通过 CSS 调用它们，如下所示：

```
@font-face {
    font-family: 'Droid Sans';
    src: url('fonts/DroidSans-webfont.eot');
    src: url('fonts/DroidSans-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/DroidSans-webfont.woff') format('woff'),
         url('fonts/DroidSans-webfont.ttf') format('truetype'),
         url('../fonts/DroidSans-webfont.svg#DroidSansRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

谷歌的网络字体是开源的，所以我们应该可以毫无问题地找到字体的下载。

此解决方案适用于 Dolphin 和 Chrome for Android。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T10:51:12.830

我今天也注意到了这一点。不仅在我的 Nexus 7 (Android 4.2.2) 上，而且在朋友的 MacBook Pro 上的 MacOS X 的 Chrome 上。问题不大，因为我通常选择通过 fontsquirrel.com 转换我需要的字体，但是对于测试和原型设计，直接从 Google 集成字体要方便得多。

# c# - 如何在网格视图中创建一个新组并向其中添加项目？

> ID：13984868
> 
> 赞同：0
> 
> 时间：2012-12-21T05:44:26.810
> 
> 标签：c#, windows-8, winrt-xaml

```
// Create a new grid view, add content, 
GridView gridView1 = new GridView();
gridView1.Items.Add("Item 1");
gridView1.Items.Add("Item 2");

// Add the grid view to a parent container in the visual tree.
stackPanel1.Children.Add(gridView1); 
```

如何在 gridView1 中创建一个新组并向其中添加项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:02:09.963

您可以在网格视图中添加/删除组，并通过绑定数据源轻松管理它。当您更改数据源时，网格视图会自动刷新其内容。要获得基本的了解，请分析“新建项目”对话框的 Visual C# 部分下提供的 Grid App(XAML) 项目模板。

# android - 按下后退按钮时如何用片段A替换片段C？

> ID：13984871
> 
> 赞同：37
> 
> 时间：2012-12-21T05:44:50.880
> 
> 标签：android, android-fragments, back-stack, fragmenttransaction

我的场景：活动 1 由片段 A-> B-> C 组成。所有片段都使用以下代码添加：

```
 FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.replace(R.id.content, fragment, TAG);
        ft.addToBackStack(TAG);
        ft.commit(); 
```

现在，从片段C，我想直接返回片段A。因此，我`ft.addToBackStack(TAG)`在添加片段C时进行了评论。所以当我从CI按下返回按钮时，直接在屏幕上获取片段A。

但是，Fragment C 并没有被 A 取代。实际上，这两个 Fragment 都是可见的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-05T18:18:53.807

您需要做 2 件事 - 从 A->B 命名 FragmentTransaction，然后在包含活动中覆盖 onBackPressed() 以在 Fragment C 上调用[FragmentManager#popBackStack (String name, int flags)](http://developer.android.com/reference/android/app/FragmentManager.html#popBackStack%28java.lang.String,%20int%29)。示例：

从 A->B 过渡

```
getSupportFragmentManager()
  .beginTransaction()
  .replace(R.id.container, new FragmentB(), "FragmentB")
  .addToBackStack("A_B_TAG")
  .commit(); 
```

从 B->C 的转换将使用以“FragmentC”作为其标记的类似事务。

然后在您包含的 Activity 中覆盖 onBackPressed()：

```
@Override
public void onBackPressed() {
  if (getSupportFragmentManager().findFragmentByTag("FragmentC") != null) {
    // I'm viewing Fragment C
    getSupportFragmentManager().popBackStack("A_B_TAG",
      FragmentManager.POP_BACK_STACK_INCLUSIVE);
  } else {
    super.onBackPressed();
  }
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-27T15:51:02.703

**理论**

使用 中的[`addToBackStack(tag: String): FragmentTransaction`](http://developer.android.com/reference/android/app/FragmentTransaction.html#addToBackStack%28java.lang.String%29)方法`FragmentTransaction`来标记要返回的点。*此方法`FragmentTransaction`仅返回链能力的实例。*

然后[`popBackStackImmediate(tag: String, flag: int): void`](http://developer.android.com/reference/android/app/FragmentManager.html#popBackStackImmediate%28java.lang.String,%20int%29)使用`FragmentManager`. 标签是您之前指定的。该标志要么是`POP_BACK_STACK_INCLUSIVE`包含标记的事务的常量，要么是`0`。

**例子**

下面是一个带有以下布局的示例，该布局具有一个`FrameLayout`带有 id`content_frame`的片段被加载到的位置。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

<FrameLayout
    android:id="@+id/content_frame"
    android:layout_below="@id/textView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</RelativeLayout> 
```

下面的代码在用 id 替换布局元素的内容时通过片段类名标记片段`content_frame`。

```
public void loadFragment(final Fragment fragment) {

    // create a transaction for transition here
    final FragmentTransaction transaction = getSupportFragmentManager()
            .beginTransaction();

    // put the fragment in place
    transaction.replace(R.id.content_frame, fragment);

    // this is the part that will cause a fragment to be added to backstack,
    // this way we can return to it at any time using this tag
    transaction.addToBackStack(fragment.getClass().getName());

    transaction.commit();
} 
```

为了完成这个例子，一个方法允许您在加载时使用标签返回到完全相同的片段。

```
public void backToFragment(final Fragment fragment) {

    // go back to something that was added to the backstack
    getSupportFragmentManager().popBackStackImmediate(
            fragment.getClass().getName(), 0);
    // use 0 or the below constant as flag parameter
    // FragmentManager.POP_BACK_STACK_INCLUSIVE);

} 
```

*当真正实现这一点时，您可能希望在片段参数上添加一个空检查;-)。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-02T09:09:09.787

我就是这样做的。。

使用**FragmentA.java**和任何其他片段。

用它的类名替换你的片段作为标签：

```
private void showFragment(Fragment fragment){
        if(fragment != null){
            getSupportFragmentManager().beginTransaction().replace(R.id.container,fragment,fragment.getClass().getSimpleName()).commit();
        }
    } 
```

现在在 onBackPressed() 中：

```
@Override
    public void onBackPressed()
    {
if(getSupportFragmentManager().findFragmentByTag("FragmentA") == null)
            showFragment(new FragmentA());
        else
            super.onBackPressed();
    } 
```

# android - Android：如何使用 Graph API 从 facebook 日历中获取朋友的出生日期

> ID：13984873
> 
> 赞同：6
> 
> 时间：2012-12-21T05:45:03.553
> 
> 标签：android, facebook, facebook-graph-api

我正在开发需要所有朋友的出生日期的应用程序。一些人可以分享代码如何使用图形 API 获取所有朋友的出生日期。我正在使用以下代码：

```
// start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {

      // callback when session changes state
      @Override
      public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened()) {

          // make request to the 
            Request.executeMyFriendsRequestAsync(session, new Request.GraphUserListCallback() {

                @Override
                public void onCompleted(List<GraphUser> users, Response response) {
                    //Log.d("AL",""+users.size() + response.toString());
                    for (int i=0;i<users.size();i++){
                        Log.d("AL",""+users.get(i).toString());
                        welcome.setText("Done");
                    }

                }
            });
        }
      }
    }); 
```

这只是返回朋友的姓名和 ID。我必须在哪里设置权限才能获得朋友的生日？我是 facebook SDK 的新手。并使用 SDK v3。

图 api 正在返回以下 json 结果

```
{Response:  responseCode: 200, graphObject: GraphObject{graphObjectClass=GraphObject, state={"data":[{"id":"1580811776","name":"Jamal Abdul Nasir"},{"id":"1610349118","name":"Ahmed Nawaz"}],"paging":{"next":"https:\/\/graph.facebook.com\/100004790803061\/friends?format=json&access_token=AAABtTr8g5U4BANiJdCiBFxQeg0l1eqYYzmSWVM8G1UlyAhTtUrAsoEZAgU19dECXTE2nw7pHIz8bDb7OJGM4wAwzusOVZAQN8yaiYVsQZDZD&limit=5000&offset=5000&__after_id=1610349118"}}}, error: null, isFromCache:false} 
```

没有生日。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T01:52:11.973

首先定义您的回调，如果经过身份验证，您将在其中获得朋友和生日信息：

```
Session.StatusCallback statusCallback =  new Session.StatusCallback() {

  // callback when session changes state
  @Override
  public void call(Session session, SessionState state, Exception exception) {
    if (session.isOpened()) {
        // Private method, to be defined
        makeFriendsRequest();
    }
  }

}; 
```

然后，您可以打开会话并传入必要的“friends_birthday”权限请求：

```
Session session = new Session(this);
session.openForRead(new Session.OpenRequest(this)
                       .setCallback(statusCallback)
                       .setPermissions(Arrays.asList("friends_birthday"))); 
```

最后，这是您可以用来获取朋友信息（包括生日）的身份验证后方法：

```
private void makeFriendsRequest() {
    Request myFriendsRequest = Request.newMyFriendsRequest(Session.getActiveSession(), 
            new Request.GraphUserListCallback() {

        @Override
        public void onCompleted(List<GraphUser> users, Response response) {
            if (response.getError() == null) {
                // Handle response
            }

        }

    });
    // Add birthday to the list of info to get.
    Bundle requestParams = myFriendsRequest.getParameters();
    requestParams.putString("fields", "name,birthday");
    myFriendsRequest.setParameters(requestParams);
    myFriendsRequest.executeAsync();
} 
```

如果您正在寻找实现 Facebook 登录的不同方法，还可以查看与 SDK 捆绑的 SessionLoginSample 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:05:54.287

我想尝试使用这个：

```
URL url = "http://YOUR_QUERY_URL_WITH_PARAMS";
InputStream is = null;
URLConnection connection = url.openConnection();
String line;
StringBuilder builder = new StringBuilder();
BufferedReader reader = new BufferedReader(new InputStreamReader(                        connection.getInputStream()));
while ((line = reader.readLine()) != null) 
{
    builder.append(line);
}
String jSONString = builder.toString();
JSONObject jSONObject = new JSONObject(jSONString); 
```

然后把接收到的数据拿出来显示。

***注意：***我没有测试过这段代码，也没有安卓设备可以测试了，但应该会让你指向正确的方向。

# java - android中文本的适配器

> ID：13984875
> 
> 赞同：0
> 
> 时间：2012-12-21T05:45:21.493
> 
> 标签：java, android, gridview, adapter

我不想使用我从[Android Developer Site](http://developer.android.com/guide/topics/ui/layout/gridview.html "安卓开发网站")找到的这个示例中的图像，而是想在 gridView 中使用编辑文本。我会使用什么样的适配器？我什至需要适配器吗？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(HelloGridView.this, "" + position, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

* * *

好的，所以我尝试这样做，但它不起作用。它一直在崩溃。

#进口...

```
public class MainActivity extends Activity{

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_scout);

        GridView gridView = (GridView) findViewById(R.id.gridView);

        //final String[] letters = new String[]{"A", "B", "C", "D", "E", "F", "G", "H", "I"};

        //ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, letters);

        gridView.setAdapter(new ImageAdapter(this));

        gridView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                Toast.makeText(getApplicationContext(), ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
            }

        });

    }
} 
```

ImageAdapter.java

```
//used for adding Edit texts to the grid view in the main activity
#imports....

public class ImageAdapter extends BaseAdapter{

    Context context;

    public ImageAdapter(Context context)
    {
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View gridView;
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if(convertView == null)
        {
            gridView = new View(context);
            gridView = inflater.inflate(R.layout.grid_items, null);

            EditText editText = (EditText) gridView.findViewById(R.id.grid_item_edit_text);
        }
        gridView = (View)convertView;
        return gridView;
    }

    @Override
    public int getCount() {
        return 9;//only 9 pegs on the center rack
    }

    @Override
    public Object getItem(int position) {

        return null;
    }

    @Override
    public long getItemId(int position) {

        return 0;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:00:39.410

您需要一个自定义的 Gridview。换句话说，自定义适配器
本[教程](http://www.mkyong.com/android/android-gridview-example/)将为您提供帮助。

# python - 需要爬取 Python 建议

> ID：13984879
> 
> 赞同：0
> 
> 时间：2012-12-21T05:45:53.893
> 
> 标签：python, google-app-engine, screen-scraping, web-scraping, web-crawler

我需要从商业网站获取产品 ID。产品 ID 是 URL 末尾的数字系列。

例如：`http://example.com/sp/123170/`有产品 ID `123170`。

一些要求：

*   代码必须由 Python 编写
*   由于产品数量很大，我希望软件在由于某些原因停止后能够重新启动。
*   每天可以跑一次。
*   新产品每天都会更新/添加，因此软件需要能够处理它。如果可能的话，我很想使用谷歌应用引擎

请推荐我一些想法和开源代码来完成这项工作。我找到**了 scrapy.org**和**Beautifulsoup**。还请给我关于它们的建议，哪一个更适合这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:53:53.820

lxml.html 是目前 Python 最好的 html 解析器。将您的文档解析为 lxml，并使用 xpath 来定位您需要的数据。

[http://lxml.de/lxmlhtml.html#parsing-html](http://lxml.de/lxmlhtml.html#parsing-html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:54:30.497

对于定期调度，您可以在应用引擎中查找[cron 作业。](https://developers.google.com/appengine/docs/python/config/cron)

此外，Scrapy 是一个不错的网页抓取框架。您可以使用的其他替代方法是使用漂亮的汤和[请求 API](http://docs.python-requests.org/en/latest/api/)（支持身份验证和多线程下载）。

但我建议在你报废之前，看看那个商业网站是否提供了一些 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T06:53:59.857

您需要一个爬虫和一种在每个爬取会话之间保存数据的方法。

对于爬虫，我推荐`scrapy`. 在大多数情况下，它真的比自己滚动要好得多。如果使用`scrapy`，则不需要 BeautifulSoup，因为 Scrapy 使用`lxml`，在我看来，这是目前最好的 Html 解析器

要在会话之间保留数据，您可以将抓取的数据存储在数据库中，我更喜欢将[`sqlalchemy`](http://www.sqlalchemy.org/)其用于此目的，但这可能不适用于 App Engine。`sqlalchemy`支持很多数据库引擎，其中 sqlite3 是最容易设置的。

# c++ - C++ | 如何在函数结果中返回所有 PID？

> ID：13984880
> 
> 赞同：1
> 
> 时间：2012-12-21T05:46:04.733
> 
> 标签：c++, arrays, visual-c++, arraylist

我正在寻找从使用 C++ 的函数返回所有当前正在运行的进程 ID 的数组。

我正在使用以下函数枚举列表：

```
DWORD* xEnumProcs(){
    PROCESSENTRY32 pe32;
    HANDLE snapshot = NULL;
    DWORD pid[1024];
    DWORD* pointer;
    pointer = pid;
    int I = 0;

    snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
    if (snapshot != INVALID_HANDLE_VALUE) {
        pe32.dwSize = sizeof(PROCESSENTRY32);
        if (Process32First(snapshot, &pe32)) {
            do {
                pid[I] = pe32.th32ProcessID;
                I++;
            } while (Process32Next(snapshot, &pe32));
        }

        CloseHandle(snapshot);

    }

    return pointer;

} 
```

我不确定这是否正确完成。我正在尝试在另一个函数中使用这个数组，如下所示：

```
void HandleProcs(){
    DWORD* xNewProcs = xEnumProcs;
} 
```

这是我在最后一个函数正文中的一行收到的错误：

```
'initializing' : cannot convert from 'DWORD *(__cdecl *)(void)' to 'DWORD *'
1>          There is no context in which this conversion is possible 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:34:14.327

我想你已经得到了答案，但为了学习，在这里比较 C 版本：

```
#include <stdio.h>  // printf
#include <Windows.h>
#include <Tlhelp32.h>

DWORD *EnumProcs(size_t *n)
{
    DWORD *pids = NULL;
    HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
    *n = 0;
    if (snapshot != INVALID_HANDLE_VALUE)
    {
        PROCESSENTRY32 pe32 = { sizeof(pe32) };
        if (Process32First(snapshot, &pe32))
        {
            do { ++*n; } while (Process32Next(snapshot, &pe32));
            pids = calloc(*n, sizeof(pe32.th32ProcessID));
            *n = 0;
            Process32First(snapshot, &pe32);  // Maybe check return value
            do { pids[(*n)++] = pe32.th32ProcessID; }
            while (Process32Next(snapshot, &pe32));
        }
        CloseHandle(snapshot);
    }
    return pids;
}
int main()
{
    size_t i, n;
    DWORD *pids = EnumProcs(&n);
    for (i = 0; i < n; i++)
    { printf("%u\n", pids[i]); }
    free(pids);
} 
```

使用 C++ 版本：

```
#include <iostream>  // std::cout
#include <vector>  // std::vector, like List<T> in C# (or ArrayList<T> in Java)
#include <Windows.h>
#include <Tlhelp32.h>

std::vector<DWORD> EnumProcs()
{
    std::vector<DWORD> pids;
    HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
    if (snapshot != INVALID_HANDLE_VALUE)
    {
        PROCESSENTRY32 pe32 = { sizeof(PROCESSENTRY32) };
        if (Process32First(snapshot, &pe32))
        {
            do
            {
                pids.push_back(pe32.th32ProcessID);
            } while (Process32Next(snapshot, &pe32));
        }
        CloseHandle(snapshot);
    }
    return pids;
}
int main()
{
    std::vector<DWORD> pids = EnumProcs();
    for (size_t i = 0; i < pids.size(); i++)
    { std::cout << pids[i] << std::endl; }
} 
```

*注意 C++ 版本是如何完全不同的——并且不使用指针。*

尝试学习两种语言中的*一种**，*然后再学习另一种。

# iphone - 在本地 HTML 文件中加载图像 - UIWebView

> ID：13984886
> 
> 赞同：4
> 
> 时间：2012-12-21T05:46:55.843
> 
> 标签：iphone, objective-c, ios

我正在开发一个需要打开远程 html 文件并使用本地图像的 Iphone 应用程序。我找到了这个答案，这对我来说是完美的解决方案：

[带有本地图像文件的 iOS WebView 远程 html](https://stackoverflow.com/questions/5572258/ios-webview-remote-html-with-local-image-files)

但问题是，当我尝试加载更多图像时，此解决方案仅加载第一张图像，如下所示：

```
<html>
<body>
    <h1>we are loading a custom protocl</h1>
    <b>image?</b><br/>
    <img src="myapp://image1.png" />
<img src="myapp://image1.png" />
<img src="myapp://image2.png" />
<img src="myapp://image3.png" />
<body>
</html> 
```

该页面将正确显示第一张图像，但其他图像将显示第一张的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:07:32.183

为什么要使用自定义协议实现在 html 文件中加载本地图像？

您可以轻松地将 html 的根设置为以下内容：

```
[webView loadHTMLString:htmlString baseURL:[[NSBundle mainBundle] bundleURL]]; 
```

这将从您的包中加载所有图像文件。

或者，您可以使用 webview 委托覆盖加载调用，如下所示：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

并且完全自定义文件的加载方式和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T23:57:37.717

[您可以在带有本地图像文件的 iOS WebView 远程 html](https://stackoverflow.com/questions/5572258/ios-webview-remote-html-with-local-image-files)中使用相同的想法， 但是，为每个图像使用不同的自定义协议名称例如

```
<html>
<body>
    <h1>we are loading a custom protocl</h1>
    <b>image?</b><br/>
    <img src="myapp://image1.png" />
<img src="myapp1://image1.png" />
<img src="myapp2://image2.png" />
<img src="myapp3://image3.png" />
<body>
</html> 
```

然后询问方法中使用的协议名称`canInitWithRequest`，然后您就可以知道您将在`startLoading`方法中加载哪个图像。

注意：是一个类方法，因此您可以声明一个静态变量来保存方法`canInitWithRequest`中的图像文件名`canInitWithRequest`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T11:02:47.460

WKWebView 不允许直接从文件存储（文档目录）访问文件，要从文档目录访问文件，您必须使用`loadFileURL:allowingReadAccessToURL:`方法，下面是我的代码。

在 ViewDidLoad

```
//Get Document directory path
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsPath = [paths objectAtIndex:0]; //Get the docs directory

    //Get html from bundle and save it to document directory
    NSURL *url = [[NSBundle mainBundle] URLForResource: @"fileupload" withExtension: @"html"];
    NSData *data = [[NSData alloc] initWithContentsOfFile:[url path]];
    [data writeToFile:[documentsPath stringByAppendingPathComponent:@"fileupload.html"] atomically:YES];

    //Get image and save it to document directory
    UIImage *image = [UIImage imageNamed:@"yoga.png"];
    NSData *pngData = UIImagePNGRepresentation(image);
    filePath = [documentsPath stringByAppendingPathComponent:@"yoga.png"]; //Add the file name
    [pngData writeToFile:filePath atomically:YES]; //Write the file
    filePath = [self documentsPathForFileName:@"yoga.png"];
    NSLog(@"File path: %@", [self documentsPathForFileName:@"yoga.png"]);

    NSURL *fileurl = [NSURL fileURLWithPath:[documentsPath stringByAppendingPathComponent:@"fileupload.html"]];
    [webView loadFileURL:fileurl allowingReadAccessToURL:[NSURL fileURLWithPath:documentsPath]]; 
```

上面的代码将图像从包保存到文档目录，还保存了一个 html 文件（将使用 img 标签加载图像）。

在didFinishNavigation下面：

```
//Sending Path to javascript
    [webView evaluateJavaScript:[NSString stringWithFormat:@"upload('%@')", filePath] completionHandler:^(id _Nullable obj, NSError * _Nullable error) {
        NSLog(@"Java script called");
    }]; 
```

获取文件 url 的实用方法

```
- (NSString *)documentsPathForFileName:(NSString *)name
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *documentsPath = [paths objectAtIndex:0];

    NSURL *url = [NSURL fileURLWithPath:[documentsPath stringByAppendingPathComponent:name]];

    return [url absoluteString];
} 
```

最后是具有从 webview 获取路径和加载图像的方法的 HTML 文件

```
<html>
    <head><title>demo</title>
        <script>

            function upload(path)
            {
                alert(path);
                /*
                 var URI = "data:image/png;base64,"+path;
                 convertURIToImageData(URI).then(function(imageData) {
                 // Here you can use imageData
                 console.log(imageData);
                 });
                 */
                var img = document.createElement("IMG");
                img.src = path;//URI;
                img.border = 1;
                img.height = 750;
                img.width = 900;
                document.getElementById('imageDiv').appendChild(img);
            }

        function convertURIToImageData(URI) {
            return new Promise(function(resolve, reject) {
                               if (URI == null) return reject();
                               var canvas = document.createElement('canvas'),
                               context = canvas.getContext('2d'),
                               image = new Image();
                               image.addEventListener('load', function() {
                                                      canvas.width = image.width;
                                                      canvas.height = image.height;
                                                      context.drawImage(image, 0, 0, canvas.width, canvas.height);
                                                      resolve(context.getImageData(0, 0, canvas.width, canvas.height));
                                                      }, false);
                               image.src = URI;
                               });
        }
            </script>
    </head>
    <body>
        <p><h1>This is a Demo !!!</h1></p>
        <div id="imageDiv"></div>
    </body>
</html> 
```

以上方法是我发现从文档目录加载图像/文件的唯一方法。

您还可以以数据 url 的形式发送图像/文件并将其传递给 javascript 方法（已经用 html 文件编写），只需将图像转换为 NSData 并将基本编码转换为字符串，javascript 会将数据 url 转换为图像对象本身.

UIImage 到数据 URL 的转换：

```
UIImage *img = [UIImage imageNamed:@"yoga.png"];
NSData *data = UIImageJPEGRepresentation(img, 0.90);
data = [data base64EncodedDataWithOptions:0];
NSString *dataurl = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

干杯！！！

# google-cloud-messaging - HTTP 状态码：GCMDemo 中的 401

> ID：13984888
> 
> 赞同：9
> 
> 时间：2012-12-21T05:47:11.387
> 
> 标签：google-cloud-messaging, http-status-code-401

参考：http://developer.android.com/google/gcm/demo.html

尝试向我的 android 设备发送消息时出现服务器 401。

```
HTTP Status 500 - HTTP Status Code: 401

type Exception report

message HTTP Status Code: 401

description The server encountered an internal error (HTTP Status Code: 401) that        prevented it from fulfilling this request.

exception

com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401
com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:177)
com.google.android.gcm.server.Sender.send(Sender.java:121)
com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServ    let.java:83)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.29 logs. 
```

谁能告诉我如何解决？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-22T16:18:12.020

您应该查看 GCM 文档，其中解释了 GCM 响应： http: [//developer.android.com/google/gcm/gcm.html#response](http://developer.android.com/google/gcm/gcm.html#response)并排除 401 错误代码：http: [//developer.android。 com/google/gcm/gcm.html#auth_error](http://developer.android.com/google/gcm/gcm.html#auth_error)

文档中的描述：

> 身份验证错误 您尝试用于发送邮件的发件人帐户无法通过身份验证。可能的原因有：
> 
> 授权标头丢失或语法无效。
> 
> 作为密钥发送的项目编号无效。
> 
> 密钥有效但 GCM 服务已禁用。
> 
> 请求来自未在服务器密钥 IP 中列入白名单的服务器。

So I would check to make sure that you are setting you authorization header properly and that you Google Project number is properly setup with GCM and accepting your servers IP.

# java - 检查我的日历日期参数是当前日期

> ID：13984893
> 
> 赞同：4
> 
> 时间：2012-12-21T05:47:58.357
> 
> 标签：java, date

我只想找到日期参数是当前日期（yyyy-MM-dd），而不使用 simpledateformater 或任何日期到字符串转换，然后找到等于。

`specifiedDate=2012-12-20`
`currentDate=2012-12-21`

`specifiedDate == currentDate`

简单地说，我不希望在验证时不包含时间（即 HH:mm:S）

我试过类似的东西

```
public boolean isCurrentDate(Calendar date){
 Calendar currentDate = Calendar.getInstance().getTime();
 if (currentDate.getDate()==(date.getTime().getDate()) 
            && currentDate.getMonth()==(date.getTime().getMonth())  
            && currentDate.getYear()==(date.getTime().getYear()) )
 {
  return true;
 }

 return false;
} 
```

请提出更好的方法，或者是否有任何可用的库！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:50:35.317

如果你只想这样做，试试这个

**1) 使用字符串**

```
String s1 = new String("2012-01-27");
String s2 = new String("2011-01-28");
System.out.println(s1.compareTo(s2)); 
```

如果 s1 在字典上比 s2 “大”，那么结果将为 TRUE，这正是您所需要的。要获取更多信息，请阅读 javadoc 以了解 compareTo() 方法。

**2）使用乔达时间**

使用[Joda Time](http://joda-time.sourceforge.net/) lib 你可以实现如下

```
DateTime first = ...;
DateTime second = ...;

LocalDate firstDate = first.toLocalDate();
LocalDate secondDate = second.toLocalDate();

return firstDate.compareTo(secondDate); 
```

我更喜欢第二种选择

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T05:53:22.213

在比较之前将时间字段设置为 0 怎么样

```
currentDate.set(Calendar.HOUR_OF_DAY, 0);  
currentDate.set(Calendar.MINUTE, 0);  
currentDate.set(Calendar.SECOND, 0);  
currentDate.set(Calendar.MILLISECOND, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:51:55.333

您的最后一行`&& currentDate.getYear()==(date.getMonth()) )`似乎是比较年份和月份而不是年份和年份。这可能是你的问题吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T05:54:53.947

如果您使用日历

```
public static boolean isSameDay(Calendar cal1, Calendar cal2) {
            if (cal1 == null || cal2 == null) {
                throw new IllegalArgumentException("The dates must not be null");
            }
            return (cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                    cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                    cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR));
        }

public static boolean isToday(Calendar cal) {
        return isSameDay(cal, Calendar.getInstance());
    } 
```

如果您使用日期

```
public static boolean isSameDay(Date date1, Date date2) {
        if (date1 == null || date2 == null) {
            throw new IllegalArgumentException("The dates must not be null");
        }
        Calendar cal1 = Calendar.getInstance();
        cal1.setTime(date1);
        Calendar cal2 = Calendar.getInstance();
        cal2.setTime(date2);
        return isSameDay(cal1, cal2);
    }

 public static boolean isToday(Date date) {
        return isSameDay(date, Calendar.getInstance().getTime());
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T06:10:07.877

试试这个：

`currentDate.set(Calendar.DATE, 0);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-16T06:49:22.103

# 时区

您问题中的示例代码忽略了时区的关键问题。日期，即一天的开始和结束点，由时区定义。

java.util.Calendar 和 java.util.Date 都没有指定时区。它们代表 UTC/GMT 中的日期和时间。

因此，您需要应用与您的应用和数据的上下文相关的所需时区。这意味着您需要一个不错的日期时间库。除了 java.util.Date/Calendar、java.text.SimpleDateFormat 和它们的兄弟类之外的东西，因为它们是出了名的麻烦。使用[Joda-Time](http://www.joda.org/joda-time/)或与 Java 8 捆绑在一起的新[java.time.* 包](http://download.java.net/jdk8/docs/api/java/time/package-summary.html)（受 Joda-Time 启发，由 JSR 310 定义）。

注意使用方法`withTimeAtStartOfDay`。这是一天的第一刻。这通常是时间 00:00:00，但并非总是如此。夏令时 (DST) 或其他异常情况可能会产生不同的时间。该方法巧妙地处理了此类问题。

# 今天=时间跨度

从技术上讲，在使用日期时间值时，特定的“日期”实际上是一个时间跨度。定义该跨度的最常见且通常有用的方法是“半开”，其中开头是包含的，结尾是排除的。这意味着，对于当前日期，我们想要今天的第一刻（包括）到明天的第一刻（不包括）。然后我们询问目标日期时间是否在该范围内。

还有其他方法可以完成这项工作。我展示这种方法是因为它适用于“今天”问题之外的情况。

# 乔达时间

Joda-Time 提供了三个类来定义时间跨度：[Interval](http://www.joda.org/joda-time/apidocs/org/joda/time/Interval.html)、Period 和 Duration。

## 示例代码

设置我们的输入数据，一个日历对象。

```
// Create a Calendar object to simulate input.
java.util.Date date = DateTime.now().minusDays( 3 ).toDate();
java.util.Calendar cal = java.util.Calendar.getInstance();
cal.setTime( date ); 
```

将“今天”定义为一个时间跨度，并查看目标日期时间是否在该跨度内。

```
DateTimeZone timeZone = DateTimeZone.forID( "Asia/Kolkata" );
DateTime dateTimeInQuestion = new DateTime( cal.getTimeInMillis(), timeZone );
DateTime now = new DateTime( timeZone );

Interval today = new Interval( now.withTimeAtStartOfDay(), now.plusDays( 1 ).withTimeAtStartOfDay() );
boolean isDateTimeInQuestionInInterval = today.contains( dateTimeInQuestion ); 
```

转储到控制台...</p>

```
System.out.println( "cal: " + cal.getTime() );
System.out.println( "dateTimeInQuestion: " + dateTimeInQuestion );
System.out.println( "now: " + now );
System.out.println( "today: " + today );
System.out.println( "isDateTimeInQuestionInInterval: " + isDateTimeInQuestionInInterval ); 
```

运行时……</p>

```
cal: Wed Feb 12 22:46:04 PST 2014
dateTimeInQuestion: 2014-02-13T12:16:04.369+05:30
now: 2014-02-16T12:16:04.497+05:30
today: 2014-02-16T00:00:00.000+05:30/2014-02-17T00:00:00.000+05:30
isDateTimeInQuestionInInterval: false 
```

# php - 不可编辑的文本字段

> ID：13984896
> 
> 赞同：7
> 
> 时间：2012-12-21T05:48:13.250
> 
> 标签：php, yii, yii-events

我是新来的`YII`，我想知道是否可以将文本字段`YII`设为不可编辑。如果是这样，任何人都可以回答。我按照以下方式..

```
<?php echo $form->labelEx($model,'first_name'); ?>
    <?php echo $form->textField($model,'first_name',array('setEnabled' => false)); ?> 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T05:51:54.303

改用：[`readonly`_](http://www.w3.org/TR/html401/interact/forms.html#adef-readonly)

```
<?php echo $form->textField($model,'first_name',array('readonly' => true)); ?> 
```

* * *

为了不闪烁，去[`disabled`属性](http://www.w3.org/TR/html401/interact/forms.html#adef-disabled)：

```
<?php echo $form->textField($model,'first_name',array('disabled' => true)); ?> 
```

* * *

两者的行为不同，因此请务必检查一下。

# c# - 创建具有约束比例的可调整大小的 Button 控件网格的最佳方法（Silverlight.XAML，WinRT）

> ID：13984898
> 
> 赞同：3
> 
> 时间：2012-12-21T05:48:29.670
> 
> 标签：c#, silverlight, xaml, winrt-xaml

在 XAML/C# 中编写一个 WinRT 应用程序，我想要一个简单的方形按钮网格。按钮的数量目前是固定的，但是将来会随着我创建更多内容而添加更多。

必须处理所有 UI 调整大小（捕捉、填充、纵向等）和分辨率我遇到了 UIContainer 的问题（我使用的是`Grid`然后切换`WrapGrid`）只是自动调整按钮的大小，因为我不知道有任何方法来限制方面比例和方形按钮对我的 UI 很重要。

有没有办法限制按钮控件的宽度和高度的纵横比/比例？如果是这样，我假设它会创建一个自定义控件，但除了创建样式和数据模板之外，我真的只是超出了我的深度。

有关解决此问题的最佳方法的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:15:35.157

您可以创建一个简单的装饰器控件，该控件将覆盖`ArrangeOverride`并始终将其自身排列成一个正方形，如下所示：

```
public class SquareDecorator : ContentControl
{
    public SquareDecorator()
    {
        VerticalAlignment = VerticalAlignment.Stretch;
        HorizontalAlignment = HorizontalAlignment.Stretch;
        VerticalContentAlignment = VerticalAlignment.Stretch;
        HorizontalContentAlignment = HorizontalAlignment.Stretch;
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        var baseSize = base.MeasureOverride(availableSize);

        double sideLength = Math.Max(baseSize.Width, baseSize.Height);

        return new Size(sideLength, sideLength);
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        double sideLength = Math.Min(finalSize.Width, finalSize.Height);

        var result = base.ArrangeOverride(new Size(sideLength, sideLength));

        return result;
    }
} 
```

现在你可以用这个装饰器来包裹你的按钮：

```
<z:SquareDecorator>
    <Button Content="I'm Square"
            VerticalAlignment="Stretch"
            HorizontalAlignment="Stretch" />
</z:SquareDecorator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:46:50.637

我假设您不能只将高度和宽度设置为固定大小（在按钮本身或按钮的样式中）。

我尝试在 Silverlight 中这样做：

```
<Button Height={Binding ActualWidth, RelativeSource={RelativeSource Self}}/> 
```

但它不想工作。不知道为什么。它可能在 WinRT 中工作。

或者，您可以创建自定义面板来排列和调整按钮的大小。考虑到您的简单要求，应该不难。它只涉及实现两个功能和基本算术知识。[这是一个创建 UniformGrid 的示例](http://msdn.microsoft.com/en-us/library/cc903936%28v=vs.95%29.aspx)。

我不认为 UserControl 或派生自 Button 会是更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T11:39:38.887

这是我对 Pavlo 答案的看法。它比从 ContentControl 派生（必须使用 ControlTemplate，将其他元素添加到可视化树，并具有大量其他不需要的功能）更高效和优雅。我也相信它更正确，因为 MeasureOverride 返回正确的所需大小。

```
public class SquareDecorator : Panel
{
    protected override Size MeasureOverride(Size availableSize)
    {
        if( Children.Count == 0 )   return base.MeasureOverride(availableSize);
        if( Children.Count > 1 )    throw new ArgumentOutOfRangeException("SquareDecorator should have one child");

        Children[0].Measure(availableSize);
        var sideLength = Math.Max(Children[0].DesiredSize.Width, Children[0].DesiredSize.Height);
        return new Size(sideLength, sideLength);
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        if( Children.Count == 0 )   return base.ArrangeOverride(finalSize);
        if( Children.Count > 1 )    throw new ArgumentOutOfRangeException("SquareDecorator should have one child");

        double sideLength = Math.Min(finalSize.Width, finalSize.Height);
        Children[0].Arrange(new Rect(0, 0, sideLength, sideLength));
        return new Size(sideLength, sideLength);
    }
} 
```

以同样的方式使用它（Button 的 Horizo​​ntal/VerticalAlignment 必须是拉伸的，但这是默认设置。另请注意，如果将 SquareDecorator 的 Horizo​​ntal/VerticalAlignment 设置为非拉伸，您可以获得有用的效果。）：

```
<z:SquareDecorator>
   <Button Content="I'm Square"/>
</z:SquareDecorator> 
```

I would have derived from FrameworkElement, but it looks like neither Silverlight nor WinRT allow you to do that. (FrameworkElement is not sealed, but has no AddVisualChild method which makes it useless to derive from. Sigh, I hate .NET and/or Microsoft)

# matlab - 如何在matlab中强制选择一个选项？

> ID：13984900
> 
> 赞同：0
> 
> 时间：2012-12-21T05:48:33.130
> 
> 标签：matlab

首先很抱歉，如果问题没有很好地说明，因为我不知道如何准确地描述它。我的问题如下

让 k = menu('a','b','c');

如果 k > 0

> 程序继续

别的

> 终止程序并disp('please select an option')，再次弹出菜单功能供用户选择。

我该如何编程这种情况？感谢您提供一个想法的任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:18:55.410

要执行您所描述的操作，您可以使用 error()

```
if K <= 0
    error("Please select option")
end

%The rest of your code here: 
```

但是设置一个等待正确用户输入的while循环会更有意义：

```
 while k <= 0
        let k = menu('a', 'b', 'c') % I don't fully understand how you are setting k, but that bit goes here

        if k <= 0
            disp('please select an option');
        end
    end

% The rest of your code here 
```

# javascript - Jquery.html() 在 IE7 中不工作，但 innerHTML 在同一个地方工作

> ID：13984902
> 
> 赞同：5
> 
> 时间：2012-12-21T05:48:49.420
> 
> 标签：javascript, jquery, internet-explorer, browser

我实现了一项功能，其中 div 通过 ajax 响应填充，请检查以下代码以获得更清晰的信息：

```
jQuery.ajax({
    type: 'POST',
    url: url,
    dataType: 'json',
    data:data,
    success: function(jsonResp) {
        $('#formContainer').html(jsonResp.html);
    }
}); 
```

jquery`.html()`函数在 FF、crome、IE 8,9 中工作，但在 IE7 中没有按预期工作它没有填充给定的 html 响应，我在代码中进行了一些调试并检查是否有任何其他 div 具有相同的 ID，但有文档中只有一个 div 具有“formContainer”ID，之后当我使用`innerHTML`函数而不是`$.html()`函数时，它在 IE7 中正常工作，我无法弄清楚为什么`innerHTML`工作`$.html()`而不是。

如果有任何主要原因，我需要在应用程序中`$().html()`逐个替换函数。`innerHTML`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:05:58.450

[jQuery html 属性在 IE 中不起作用](https://stackoverflow.com/questions/412734/jquery-html-attribute-not-working-in-ie)

这个链接提供了无数种方法来做同样的事情。我们遇到了同样的问题，并找到了使用它的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:48:14.603

尝试

```
jQuery('#formContainer').html(jsonResp.html); 
```

安装在

```
$('#formContainer').html(jsonResp.html); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T06:23:44.993

尝试使用**append**而不是**html**方法，如本文所述[。](https://stackoverflow.com/questions/317095/how-do-i-add-options-to-a-dropdownlist-using-)

```
 $("#formContainer").empty();
  $("#formContainer").append(jsonResp.html); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T06:13:47.043

`empty()`和`append()`一起使用

```
$("#formContainer").empty();
$("#formContainer").append(jsonResp.html); 
```

# c# - 更改页面索引时维护 Gridview 标题

> ID：13984907
> 
> 赞同：-3
> 
> 时间：2012-12-21T05:49:19.383
> 
> 标签：c#, asp.net, gridview

正如我的问题所暗示的:)

我有一个gridview，它是一个类的列表<>上的数据源和数据绑定每次我更改我的网格页面时..标题丢失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T07:08:09.643

您可以在 GridView 的“RowCreated”处理程序中添加标题。

# database - 如何在 AppHarbor SQL 数据库上执行 SQL Server 作业？

> ID：13984911
> 
> 赞同：-1
> 
> 时间：2012-12-21T05:49:48.280
> 
> 标签：database, jobs, appharbor

如何在 AppHarbor 数据库上执行 SQL Server 作业？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:36:32.393

我得到了我之前发布的查询的答案。SQL 服务器作业在 AppHarbor 上作为后台工作者执行。过程很简单。1.创建一个windows作业（任何输出exe的项目）。2\. 将作业与 Quartz 集成以进行调度 3\. 上传到 AppHarbor。4\. 如果您已经在使用网络或后台工作人员，您可能需要额外订阅后台工作人员。

后台工作人员自动拾取 exe 并执行它。

问候， 钱达纳

# java - 我如何在服务器处理程序中打开新的客户端通道到其他地址

> ID：13984915
> 
> 赞同：0
> 
> 时间：2012-12-21T05:50:22.577
> 
> 标签：java, netty

我用网。在可能的应用程序中，我处理传入的数据包，但我需要在其他服务器中发送解析的数据包，并且应该返回处理包第三方服务器的结果的传入流；我如何在服务器 hadler 中打开新连接以将数据包发送到第三方服务器并读取结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:36:27.047

与使用 netty 编写客户端的方式相同。

Netty 客户端示例：[http ://static.netty.io/3.6/guide/#start.9](http://static.netty.io/3.6/guide/#start.9)

您需要使用`ClientBootstrap`来设置新的引导程序、创建管道工厂、处理程序等，等等。

老实说，这可能有点矫枉过正，除非你*真的*需要它是异步的，听起来你不需要。如果它只是您需要访问的 REST 服务或类似的东西，我只会使用格子旧的`HttpUrlConnection`并同步获取您需要的东西。

# sql - 将执行动态查询的结果插入表中

> ID：13984918
> 
> 赞同：7
> 
> 时间：2012-12-21T05:50:52.613
> 
> 标签：sql, sql-server, tsql

我有一个动态查询`@strQuery`，它在执行时会给出一个包含很多列的结果。我想将此动态查询的结果插入到临时表中。我这样做是因为我想对临时表执行一些过滤并获得所需的结果。

[在以前的线程HERE](https://stackoverflow.com/questions/662049/dynamic-sql-results-into-temp-table-in-sql-stored-procedure)上提出了一个类似的问题 ，其中首先创建了一个临时表，然后使用`INSERT INTO`.

由于列的列表很长，而且我不知道字段的数据类型，我想避免这一步。

```
select * into #tmh from
exec(@strQuery) 
```

**错误信息**

*关键字“exec”附近的语法不正确。*

这该怎么做 ？有可能以这种方式完成吗？如果不是，请指定其他替代方法以将执行动态查询的结果存储到表中。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T06:24:11.520

我以前遇到过这种情况，这就是我所做的：

```
DECLARE @strQuery nVarchar(100)

SET @strQuery='SELECT * into [tempdb].[dbo].[temptable] FROM YourTable'

EXECUTE sp_executesql @strQuery

SELECT * FROM [tempdb].[dbo].[temptable]

DROP TABLE [tempdb].[dbo].[temptable] 
```

它工作正常。不要问我为什么是 FQ 表名而不是#temptable。我不知道。这没用。我可以让它工作的唯一方法是使用 [tempdb].[dbo].[temptable]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:57:28.107

像这样进行

```
select t1.name,t1.lastname from(select * from table)t1. 
```

其中“select * from table”是您的动态查询。这将返回结果，您可以将其用作示例中给出的临时表 t1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T08:13:15.007

您可以在当前执行上下文中使用变量，由带有 OUTPUT 选项的动态 SQL 设置。下面的示例代码。

```
DECLARE @Amount AS MONEY
DECLARE   @SQL AS NVARCHAR(1000)
SET @Amount = NULL 
SET @SQL = ('SELECT @amt=100' )
EXECUTE   sp_executeSQL @SQL, N'@amt MONEY OUTPUT', @amt=@Amount OUTPUT
SELECT  @Amount 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T10:40:56.617

是的，您可以使用如下插入创建一个包含原始查询的新动态查询：

```
declare @strNewQuery varchar(max)
set @strNewQuery ='select * into #tmh from ('+@strQuery+') as t'
exec(@strNewQuery) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-02T13:11:02.560

我用它来解决 - 没有动态查询

这使用表变量来接收数据到过程

甚至可以对其应用连接

```
select * into #itemPhantom from @tbl_items_upload

select * from #itemPhantom

select #itemPhantom.itemreference from #itemPhantom  left join phantom on phantom.name=#itemPhantom.PhantomName 
```

# c# - 我如何使用 System.Data.Sql.SqlDataSourceEnumerator 类来了解可用的 sql 数据源...？

> ID：13984920
> 
> 赞同：2
> 
> 时间：2012-12-21T05:51:04.363
> 
> 标签：c#, asp.net, sql, sql-server

我如何使用**System.Data.Sql.SqlDataSourceEnumerator**类来了解可用的 sql 数据源...？因为当我创建到 sql server 的连接时，如果 sql server 没有准备好，我们会得到异常......所以首先我想知道 sql server 是否准备好接受请求......如何知道它......。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:24:10.227

因此，根据以下参考资料：

[http://social.msdn.microsoft.com/forums/en-US/sqlsmoanddmo/thread/49ba019f-e8b5-457c-80ea-fac5febb9d3d/](http://social.msdn.microsoft.com/forums/en-US/sqlsmoanddmo/thread/49ba019f-e8b5-457c-80ea-fac5febb9d3d/)

[http://connect.microsoft.com/SQLServer/feedback/details/146323/enumavailablesqlservers-or-sqldatasourceenumerator-incorrect-list-of-available-databases](http://connect.microsoft.com/SQLServer/feedback/details/146323/enumavailablesqlservers-or-sqldatasourceenumerator-incorrect-list-of-available-databases)

[http://blogs.msdn.com/b/sushilc/archive/2004/10/14/242395.aspx](http://blogs.msdn.com/b/sushilc/archive/2004/10/14/242395.aspx)

[http://sqlblogcasts.com/blogs/jonsayce/archive/2008/02/10/programatically-listing-sql-servers.aspx](http://sqlblogcasts.com/blogs/jonsayce/archive/2008/02/10/programatically-listing-sql-servers.aspx)

GetDataSources() 不是一个完美的方法，这意味着它可能不会在第一次尝试时列出所有可用的数据源。事实上，我发现它也没有列出你所有的本地资源。

出于我的目的，我在程序启动和需要获取可用资源列表之间有一段时间，无论是在网络上还是在本地。因此，我将代码放在一个线程中，该线程会永远收集所有来源。它在下面。**如果您取出 while 循环，您可以手动多次调用它。**

```
 private List<string> sqlInstances = new List<string>();
        private void collectInstances()
        {
            while (true)
            {
                System.Data.Sql.SqlDataSourceEnumerator instance = System.Data.Sql.SqlDataSourceEnumerator.Instance;
                System.Data.DataTable dataTable = instance.GetDataSources();
                foreach (DataRow row in dataTable.Rows)
                {
                    string instanceName = String.Format(@"{0}\{1}", row["ServerName"].ToString(), row["InstanceName"].ToString());

                    //Do not add the local instance, we will add it in the next section. Otherwise, duplicated!
                    if (!sqlInstances.Contains(instanceName) && !instanceName.Contains(Environment.MachineName))
                    {
                        sqlInstances.Add(instanceName);
                    }
                }

                /*
                 * For some reason, GetDataSources() does not get local instances. So using code from here to get them
                 * http://stackoverflow.com/questions/6824188/sqldatasourceenumerator-instance-getdatasources-does-not-locate-local-sql-serv
                 */
                List<string> lclInstances = GetLocalSqlServerInstanceNames();
                foreach (var lclInstance in lclInstances)
                {
                    string instanceName = String.Format(@"{0}\{1}", Environment.MachineName, lclInstance);
                    if (!sqlInstances.Contains(instanceName)) sqlInstances.Add(instanceName);
                }
                sqlInstances.Sort();
            }
        }

        //Got code from: http://stackoverflow.com/questions/6824188/sqldatasourceenumerator-instance-getdatasources-does-not-locate-local-sql-serv
        /// <summary>
        ///  get local sql server instance names from registry, search both WOW64 and WOW3264 hives
        /// </summary>
        /// <returns>a list of local sql server instance names</returns>
        public static List<string> GetLocalSqlServerInstanceNames()
        {
            RegistryValueDataReader registryValueDataReader = new RegistryValueDataReader();

            string[] instances64Bit = registryValueDataReader.ReadRegistryValueData(RegistryHive.Wow64,
                                                                                    Registry.LocalMachine,
                                                                                    @"SOFTWARE\Microsoft\Microsoft SQL Server",
                                                                                    "InstalledInstances");

            string[] instances32Bit = registryValueDataReader.ReadRegistryValueData(RegistryHive.Wow6432,
                                                                                    Registry.LocalMachine,
                                                                                    @"SOFTWARE\Microsoft\Microsoft SQL Server",
                                                                                    "InstalledInstances");

            //FormatLocalSqlInstanceNames(ref instances64Bit);
            //FormatLocalSqlInstanceNames(ref instances32Bit);

            List<string> localInstanceNames = new List<string>(instances64Bit);
            foreach (var item in instances32Bit)
            {
                if (!localInstanceNames.Contains(item)) localInstanceNames.Add(item);
            }

            //localInstanceNames = localInstanceNames.Union(instances32Bit).ToList();

            return localInstanceNames;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:38:06.310

GetDataSources() 可以帮助你，你试过了吗？

[SqlDataSourceEnumerator.GetDataSources 方法](http://msdn.microsoft.com/en-us/library/system.data.sql.sqldatasourceenumerator.getdatasources.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T04:16:58.637

目前 SqlDataSourceEnumerator 在 .NetCore 或 .Net5 中也不可用，虽然不是 SqlDataSourceEnumerator 的直接替代品，但您可以尝试使用 Udp 解决方案。

这个 repo 是针对 .Net5 的，但代码在 .NetCore 风格上应该可以正常工作。

[https://github.com/mrsquish/SqlBrowserClient](https://github.com/mrsquish/SqlBrowserClient)

# ruby-on-rails - 在 RoR 中添加额外的过滤器参数

> ID：13984921
> 
> 赞同：1
> 
> 时间：2012-12-21T05:51:07.350
> 
> 标签：ruby-on-rails, ruby

假设我在控制器中有一个方法：

```
 def my_find(is_published, count)
    items = Idea.where(published: is_published)
    #......
 end 
```

有时我想传递一些额外的过滤器参数

```
 def my_find(is_published, count, some_extra_filter = nil)
    items = Idea.where(published: is_published) #.where (some_extra_filter)
    #......
 end 
```

where`some_extra_filter`可以是`lambda`或只是一个普通的sql“where” `string`，它也可以是`nil`或“”。

那么我如何**连接** `.where(published: is_published)`以`where (some_extra_filter)`获得我需要的东西呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:11:50.013

这实际上很容易使用范围：

```
def my_find
  @items = Idea.scoped
  @items = @items.where(published: is_published) unless is_published.nil?
  @items = @items.where(other: other_param) if other_params < 10
  # etc, etc
end 
```

# iphone - 当我更改捆绑标识符时应用程序未运行

> ID：13984924
> 
> 赞同：0
> 
> 时间：2012-12-21T05:51:30.703
> 
> 标签：iphone, objective-c

我已更改应用程序的捆绑标识符。当我尝试运行它时，它只是成功构建而不运行。我试过重启模拟器。请提出一些解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:11:51.787

**当您在模拟器**上运行应用程序时， **Bundle Identifier**中的更改不会影响您的运行状态，更改只会影响您在**设备**上运行应用程序时的更改。

但要确定一件事，**Bundle Identifier**不能为空白，只需在其中输入一些内容即可。

# xml - SQL Server 中 XML 中的自闭合标记

> ID：13984925
> 
> 赞同：1
> 
> 时间：2012-12-21T05:51:31.053
> 
> 标签：xml, sql-server-2008

我正在使用 SQL 查询在 SQL Server 中以 XML 形式返回结果。我正在使用以下 SQL 查询-

```
SELECT '1' AS [Column1]
UNION
SELECT '2' AS [Column2]
UNION
SELECT '' AS [Column3]
FOR XML PATH('Test'), ROOT('Rows') 
```

结果 XML：

```
 <Rows>
    <Test>
      <Column1></Column1>
    </Test>
    <Test>
      <Column1>1</Column1>
    </Test>
    <Test>
      <Column1>2</Column1>
    </Test>
  </Rows> 
```

输出如下：

```
 <Rows>
    <Test>
      <Column1/>
    </Test>
    <Test>
      <Column1>1</Column1>
    </Test>
    <Test>
      <Column1>2</Column1>
    </Test>
  </Rows> 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:02:50.803

实际上，如果我们在 XML 内部，那么它将返回标签作为自关闭。请看下面的SQL代码：

```
DECLARE @TempData Table
(
Column1 NVARCHAR(250)
)
INSERT INTO @TempData values('Column1')
INSERT INTO @TempData values('Column2')
INSERT INTO @TempData values('')
SELECT
(
SELECT * FROM @TempData FOR XML PATH('Test'), Type
)
For XML PATH (''),
ROOT('Rows') 
```

输出：

```
<Rows>
  <Test>
    <Column1>Column1</Column1>
  </Test>
  <Test>
    <Column1>Column2</Column1>
  </Test>
  <Test>
    <Column1 />
  </Test>
</Rows> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:54:30.490

我认为结果是正确的，您正在选择一个空字符串尝试选择 null：

```
SELECT '1' AS [Column1]
UNION
SELECT '2' AS [Column2]
UNION
SELECT NULL AS [Column3]
FOR XML PATH('Test'), ROOT('Rows') 
```

结果：

```
<Rows>
  <Test />
  <Test>
    <Column1>1</Column1>
  </Test>
  <Test>
    <Column1>2</Column1>
  </Test>
</Rows> 
```

这甚至比你想要的要少得多。

* * *

因为您不喜欢也删除标签，请在此处尝试：

```
declare @output nvarchar(max)

declare @XML xml = '
  <Rows>
    <Test>
      <Column1></Column1>
    </Test>
    <Test>
      <Column1>1</Column1>
    </Test>
    <Test>
      <Column1>2</Column1>
    </Test>
  </Rows>'

set @output = replace(cast(@XML as nvarchar(max)), '<Column1></Column1>', '<Column1/>')

select @output 
```

抱歉对您的 xml 结果进行硬编码，我现在无法弄清楚如何将输出动态设置为 @XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-28T18:41:50.993

首先，正如@marc-s 在评论中提到的，根据 XML 规范，两种表示在语义上是等效的。

> 一个空元素的表示要么是一个开始标签紧跟一个结束标签，要么是一个空元素标签。

[http://www.w3.org/TR/REC-xml/#NT-content](http://www.w3.org/TR/REC-xml/#NT-content)

也可以看看：

[https://stackoverflow.com/a/2279530/2266979](https://stackoverflow.com/a/2279530/2266979)

在评论中，您澄清了自闭合标签表示涉及较少的字符。

这仅在使用 SQL Server 之外的 XML 时才重要，因为在服务器中它“以二进制格式在内部存储”（[https://technet.microsoft.com/en-US/library/ms345115(v=SQL.90 ).aspx](https://technet.microsoft.com/en-US/library/ms345115(v=SQL.90).aspx) )。

如果您在 SQL Server 之外使用 XML，这些字符很重要，您可能已将其转换为文本。但是，当您这样做时，SQL Server（无论如何是 2008 年）会自动使用自闭合标记。

例如：

```
SELECT CONVERT(varchar(max),CONVERT(xml,'<tag></tag>')); 
```

将返回：

```
<tag/> 
```

因此，您需要做的就是将最终结果转换为文本。

这假定您已键入 XML。如果您在`FOR XML PATH`没有指定`TYPE`关键字的情况下创建 XML，那么您实际上只是在生成看起来像 XML 的文本。

所以这：

```
SELECT CONVERT(varchar(max),(SELECT '' AS 'tag' FOR XML PATH(''))); 
```

将返回：

```
<tag></tag> 
```

如果您改为使用`TYPE`关键字：

```
SELECT CONVERT(varchar(max),(SELECT '' AS 'tag' FOR XML PATH(''), TYPE)); 
```

你会得到：

```
<tag/> 
```

# objective-c - 如何在 IOS 中使用 skpayment 为 MultipleProduct Id 发送请求

> ID：13984926
> 
> 赞同：0
> 
> 时间：2012-12-21T05:51:36.320
> 
> 标签：objective-c, in-app-purchase, payment-processing

在我的项目中，我有 5 个产品。所以我需要购买 3 件产品来发送这些特定产品 ID 的付款请求，我需要像下面这样循环吗？

```
for  (int i;i<[productsID's count];i++)
{
     skmutablepayment *payment =[skmutablepayment paymentwithproductidentifier:
                  [product objetatindex:i]];
} 
```

我知道我们需要使用数量属性，但我只需要为我选择的特定产品付款。如何将这些选定的 ID 传递给 skpayment？

# sql - 用于显示与给定用户名匹配的相关用户名的查询

> ID：13984930
> 
> 赞同：0
> 
> 时间：2012-12-21T05:51:57.390
> 
> 标签：sql, sql-server-2008, postgresql, postgresql-9.2

如果假设该人搜索用户名 - > johnny123 并且如果没有这样的用户名，那么我希望它返回一个与输入的用户名模式匹配的用户名列表，例如 johnny12345 、 johnnyboy 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:15:35.790

这将起作用：

```
SELECT * FROM tablename WHERE username like 'johnny%'; 
```

这将搜索所有以“johnny”开头的用户名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:52:15.950

这将为 johnny123 返回一个匹配项。否则，如果没有找到 johnny123，它将返回以 'johnny' 开头的所有内容。不优雅，但它符合您的描述。

使用下面的功能，你会去`select * from username.test('username');`

```
create function username.test(text)
  returns setof text as $$
  declare
    usr text;
  begin
    usr := (select username from tablename where v like $1);
  if (usr is not null)
    then
       return next usr;     
  else
    return query (select username from tablename where v like '' || $1 || '%'); 
  end if;
  return;
  end;
  $$ language 'plpgsql'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:55:12.567

试试这个：

```
select * from table_name
where username like '%johnny%'; 
```

这将返回用户名中包含 johnny 的所有行。例如，如果您的表包含以下三个用户名：

```
johnny123
123johnny
123johnny456 
```

所有行都将返回，因为它们的用户名中包含 johnny。

# c++ - 下载速度全面跳跃

> ID：13984931
> 
> 赞同：0
> 
> 时间：2012-12-21T05:52:00.977
> 
> 标签：c++, winapi, libcurl

我有一个使用 curl 从 ftp 下载文件的小程序。在 CURLOPT_PROGRESSFUNCTION 中传递的函数中，我进行了计算以了解下载速度，问题是下载速度到处跳跃，在 2mbps 的互联网连接上从 512kbps 到 8mbps。而且我无法确定这里出了什么问题。

**编辑：**我已更改代码以平均读数，curl 下载的问题是您无法预测何时调用 TraceProgress 函数，它可以在不到 1 秒的时间内再次调用，因此程序等待 5 次迭代注意降低读数，并在平均之前取 6 个这样的读数，我还考虑了自上次读数以来经过的时间（秒），因为我们不能保证 TraceProgress 函数将以相等的间隔被调用。

让我知道它现在是否更好看。

这是代码：

```
int minorCounter = 0;
int majorCounter = 0;

int minorCycle = 4;
int majorCycle = 5;

double blockDL[6];
double blockTime[6];

int TraceProgress( void *clientp, double dltotal, double dlnow, double ultotal, double ulnow )
{

  if ( minorCounter == minorCycle )
    {

            blockDL[majorCounter] = dlnow - oldDownloadNow;

            myTimer.Tick();
            blockTime[majorCounter] = myTimer.GetDurationInSecs();

            minorCounter = 0;

            if ( majorCounter == majorCycle )
            {
                double dl = 0;
                double tm = 0;

                for ( int i = 0; i < majorCycle ; i++ )
                {
                    dl += blockDL[i];
                    tm += blockTime[i];
                }

                dl = dl/(majorCycle+1);

                tm = tm/(majorCycle+1);

                double currentDownloadSpeed = dl / tm;

                /* download speed - divide by 1024 to get speed in kilobytes instead of bytes */
                double idownloadSpeed = currentDownloadSpeed / 1024;

                string post;
                if ( idownloadSpeed > 1024 )
                {
                       idownloadSpeed = idownloadSpeed / 1024;
                       post = " MB/s";
                }
                else
                {
                        post = " KB/s";
                }

                string downloadSpeed = DoubleToString( idownloadSpeed );

                size_t x = downloadSpeed.find( "." );
                downloadSpeed.erase( x+2 );

                downSize = "Download Speed:  " + downloadSpeed + post;
                SendMessage( hDownloadSpeedSTATIC, WM_SETTEXT, (WPARAM)0, (LPARAM)downSize.c_str() );

                majorCounter = 0;
            }
            else
            {
                majorCounter++;
            }

            oldDownloadNow = dlnow;
            myTimer.Start();
    }
    else
    {
            minorCounter++;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:34:41.653

您需要使用采样窗口和指数衰减或其他理智的东西。

如果一辆汽车每 30 分钟从装配线上下线，而你只取一个样品，那么可怕的事情就会发生。例如，如果您在汽车下线后立即采样，然后在 20 分钟后再次采样，您将在 20 分钟内看到零辆汽车，即每小时零辆汽车。如果您在一辆汽车下线之前和 31 分钟后再次取样，您将在 31 分钟内看到两辆汽车，即每小时 3.9 辆汽​​车。

这是一个简单的算法：

1.  保持一个计数和一个平均速度。从零开始它们。

2.  每秒更新一次。

3.  每一秒，首先将前一秒接收到的**字节**数添加到计数中。

4.  添加计数后，从计数中减去计数的 1/8。`count -= (count/8);`

5.  将平滑的平均速度（以 每秒**位数为单位）更新为当前计数。**`bits_per_sec = count;`.

要了解此算法为何有效，假设计数是恒定的。这意味着添加到计数中的数量必须等于减去的数量。这意味着计数必须是每秒添加的字节数的 8 倍，即每秒接收的位数。

# php - 从 sql 结果在 php 中创建一个可点击的链接

> ID：13984934
> 
> 赞同：0
> 
> 时间：2012-12-21T05:52:10.600
> 
> 标签：php

我正在尝试从 php 中的 mysql 结果可点击链接中获取结果。我是php新手，请帮忙。

```
<?php mysql_connect("localhost", "root", "pass") or die(mysql_error());
mysql_select_db("Branches") or die(mysql_error());
$data = mysql_query("SELECT * FROM items order by ID desc Limit 5") or die(mysql_error());
while ($info = mysql_fetch_array($data)) {
    echo $info['title'];
    echo " <br>";
    echo $info['descr'];
    echo "<br>";
    echo "<br>";
} ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:59:14.620

```
while ($info = mysql_fetch_array($data)) {
    echo '<a href="somefile.php?id='.$info['ID'].'">'.$info['title'].'</a>';
    echo " <br>";
    echo $info['descr'];
    echo "<br>";
    echo "<br>";
} 
```

然后在 中`somefile.php`，`$_GET`用来捕获id并显示结果

```
$id = $_GET['id'];
// pull info from db based on $id
$sql = mysql_query('SELECT * FROM items WHERE ID = "'.$id.'"');
.
.
.
. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:58:11.050

像这样使用锚标签

```
while ($info = mysql_fetch_array($data)) {
    echo "<a href =\"$info[title]\">".$info['title'];. "</a>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:58:41.243

`echo '<a href="php page which you want to display on click">$info['descr']</a>'`

# c# - 如何每秒保存 WebBrowser 页面 url 内容的图像？

> ID：13984939
> 
> 赞同：0
> 
> 时间：2012-12-21T05:52:40.360
> 
> 标签：c#

我使用这段代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Drawing.Imaging;
namespace DownloadFlashFiles
{
    public partial class Form1 : Form
    {
        int i = 0;
        public Form1()
        {
            InitializeComponent();
            GenerateScreenshot("http://www.nana10.co.il");

        }

        private void Form1_Load(object sender, EventArgs e)
        {
        }
        public Bitmap GenerateScreenshot(string url)
        {
            // This method gets a screenshot of the webpage
            // rendered at its full size (height and width)
            return GenerateScreenshot(url, -1, -1);
        }
        public Bitmap GenerateScreenshot(string url, int width, int height)
        {
            // Load the webpage into a WebBrowser control
            //WebBrowser wb = new WebBrowser();
            webBrowser1.ScrollBarsEnabled = false;
            webBrowser1.ScriptErrorsSuppressed = true;
            webBrowser1.Navigate(url);
            while (webBrowser1.ReadyState != WebBrowserReadyState.Complete) { Application.DoEvents(); }
            // Set the size of the WebBrowser control
            webBrowser1.Width = width;
            webBrowser1.Height = height;
            if (width == -1)
            {
                // Take Screenshot of the web pages full width
                webBrowser1.Width = webBrowser1.Document.Body.ScrollRectangle.Width;
            }
            if (height == -1)
            {
                // Take Screenshot of the web pages full height
                webBrowser1.Height = webBrowser1.Document.Body.ScrollRectangle.Height;
            }
            // Get a Bitmap representation of the webpage as it's rendered in the WebBrowser control
            Bitmap bitmap = new Bitmap(webBrowser1.Width, webBrowser1.Height);
            webBrowser1.DrawToBitmap(bitmap, new Rectangle(0, 0, webBrowser1.Width, webBrowser1.Height));
            //webBrowser1.Dispose();
            return bitmap;
        }
        private void timer1_Tick(object sender, EventArgs e)
        {
            i++;
            Bitmap thumbnail = GenerateScreenshot("http://www.nana10.co.il");
            thumbnail.Save(@"d:\test4\" + i.ToString("D6") + "bmp", ImageFormat.Bmp);
        }
        private void button1_Click(object sender, EventArgs e)
        {
            timer1.Start();
        }

    }
} 
```

问题是当我单击按钮时，我看到 WerBrowser 中的内容每秒加载一次，但它永远不会到达 timer1 滴答事件中的代码，因为它卡在这一行的 While 循环中：

`while (webBrowser1.ReadyState != WebBrowserReadyState.Complete) { Application.DoEvents(); }`

我想要的是每秒在网络浏览器中加载一个新内容，并且每秒将来自网络浏览器的新内容保存到硬盘上。

我是怎么做到的，因为它卡在了 While 循环中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T06:04:19.047

如果对您有帮助，请检查此链接，第一个链接可以满足您的要求

[http://www.codeproject.com/Articles/15211/Webpage-thumbnailer](http://www.codeproject.com/Articles/15211/Webpage-thumbnailer)

[http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/d9b69701-85ba-439c-9737-e36f78f65acf/](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/d9b69701-85ba-439c-9737-e36f78f65acf/)

# jquery - 如何在全日历中获取 dayClick 的所有事件名称

> ID：13984941
> 
> 赞同：-2
> 
> 时间：2012-12-21T05:53:15.537
> 
> 标签：jquery, cakephp, fullcalendar

在 Fullcalendar 中，我想在 dayClick: 函数上获取事件名称。

> 可选：真，
> 
> 选择助手：真，
> 
> dayClick：函数（calEvent，日期，allDay，jsEvent，view）{
> 
> > alert('事件：' + calEvent.title);
> > 
> > }

它在 eventClick 上工作

> > eventClick: function(calEvent, jsEvent, view) { alert('Event: ' + calEvent.title); }

但我想在 dayclick ![样本](../Images/6050c7a6e8c21ad601279967796a39a3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:07:17.900

在[FullCalendar](http://arshaw.com/fullcalendar/)中，[dayClick](http://arshaw.com/fullcalendar/docs/mouse/dayClick/)事件处理程序获取四个参数：

```
date, allDay, jsEvent, view 
```

您期望在开头有一个额外的参数：

```
calEvent, date, allDay, jsEvent, view 
```

然后与

```
alert('Event: ' + calEvent.title); 
```

您正在访问日期标题（事实证明没有）。

fullCalendar 插件似乎没有提供您想要的参数（可能是因为没有点击您可能感兴趣的标题的事件？）

Date 对象中似乎没有相关方法，但您可以获取所有事件并过滤它们：[http ://arshaw.com/fullcalendar/docs/event_data/clientEvents/](http://arshaw.com/fullcalendar/docs/event_data/clientEvents/)

# wpf - 在用户控件的加载事件中，另一个用户控件的控件在 WPF 中为空

> ID：13984953
> 
> 赞同：1
> 
> 时间：2012-12-21T05:53:56.363
> 
> 标签：wpf, user-controls, wpf-controls

我有用户控制权，比如说 UC1。在 UC1 中，我还有另外三个用户控件，比如说 UC2、UC3 和 UC4。

问题是当我从 UC4 加载事件中引用 UC2 的控件时，UC2 的引用控件为空。

可能吗？由于用户控件的创建顺序将是 UC1、UC2、UC3 和 UC4。

从技术上讲，当我指的是 UC4 的加载事件时，应该已经创建了 UC2 中的所有控件。但就我而言，它是空的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:34:30.483

问题可能与实例有关，因为在检查您是否创建了另一个这样的实例来检查其内容时。

在 UC4 中：

```
UC2 obj_uc2 = new UC2(); 
```

然后它会给你 null 因为它是一个新实例。为此，您必须获取活动的实例。

# c - 为什么在结构初始化期间使用点运算符？

> ID：13984957
> 
> 赞同：-2
> 
> 时间：2012-12-21T05:54:24.477
> 
> 标签：c, struct

> **可能重复：**
> [结构初始化程序中的点 (.) 是什么意思？](https://stackoverflow.com/questions/8047261/what-does-dot-mean-in-a-struct-initializer)
> [[ N ... M ] 在 C 聚合初始值设定项中是什么意思？](https://stackoverflow.com/questions/10071304/what-is-this-style-of-syntax-in-c)

```
struct confd_data_cbs    ssd_shdiag_callback = {
    .callpoint  = show_diag__callpointid_diag_cp,
    .get_object = ssd_common_get_object,
    .get_next   = ssd_common_get_next,
}; 
```

.callback、.get_object、.get_next？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T05:57:32.103

这些称为指定初始化程序（在 C99 中添加）。它们允许您根据成员名称而不是它们在结构中的位置来指定初始值设定项。如果您想初始化一些成员而不是其他成员（并且您不关心初始化的成员并不都在结构的末尾），这可能会很方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T06:00:50.010

这样做是为了清晰和未来的兼容性。

如果你有结构：

```
struct confd_data_cbs  {
    TypeA callpoint;
    TypeB get_object;
    TypeC get_next;
}; 
```

但在以后的某个时候，像这样改变定义：

```
struct confd_data_cbs  {
    TypeA callpoint;
    TypeD set_object;   /* New Field Added */
    TypeB get_object;
    TypeC get_next;
}; 
```

然后任何**未**指定字段名称的初始化程序将不再工作。
将`ssd_common_get_object`被分配给`set_object`，并且`get_next`由于字段的顺序更改，因此将保持未初始化！

当您指定字段名称时，您知道正确的字段正在初始化，即使字段的顺序或数量稍后发生变化。

# css - 使用 wp_list_categories 使用两级菜单布局在 Wordpress 侧边栏上显示子类别

> ID：13984958
> 
> 赞同：0
> 
> 时间：2012-12-21T05:54:28.890
> 
> 标签：css, wordpress

我有一个 jsfiddle.net/vanduzled/AgAwK/ 它原来是 wp_list_categories 的输出：

所以我在 wordpress 中有一个包含子类别的类别列表，我希望它显示在我的侧边栏中。我使用 wp_list_categories 但它显示的是这样的：

配件

*   子配件

生活用品

*   亚生活方式产品

这看起来不错，但我想让子项（即子附件）隐藏，当您将鼠标悬停在父项（即附件）上时，子项将出现在侧面，就像具有两级布局的正常垂直导航一样。

在我的小提琴中， .children 类是隐藏的，当您将鼠标悬停在父级上时，我将 inline-block 打开，但它不起作用。

我实际上正在使用 Foundation 框架，并且 Zurb 已经内置了一个导航菜单，但是我不能在动态插入菜单中使用它，就像使用自定义步行器一样，然后样式是必要的，因为在 Foundation 中，它们有一个我无法放入 wordpress 的 wp_list_category 函数中的额外类。

我不知道这是否可以用纯 css 或 js 来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:36:49.133

您可以从 A list Apart 中使用传统的 css 来执行此操作：

```
/* ASDIE NAV*/

ul.side-nav { display: block; list-style: none; margin: 0; padding: 17px 0; }
ul.side-nav li { display: block; list-style: none; }

.children{
  width: 200px;
  position: relative;
  z-index: 1;
  border-bottom: 1px solid #ccc;
}

ul.side-nav {
  margin: 0;
  padding: 0;
  list-style: none;
  width: 220px; /* Width of Menu Items */
  border-bottom: 1px solid #ccc;
  }

ul.side-nav li {
  position: relative;
  }

.side-nav li ul {
  position: absolute;
  left: 199px; /* Set 1px less than menu width */
  top: 0;
  display: none;
  }

/* Styles for Menu Items */
ul.side-nav li a {
  display: block;
  text-decoration: none;
  color: #777;
  background: #fff; /* IE6 Bug */
  padding: 5px;
  border: 1px solid #ccc;
  border-bottom: 0;
  }

/* Fix IE. Hide from IE Mac \*/
* html ul li { float: left; height: 1%; }
* html ul li a { height: 1%; }
/* End */

ul.side-nav li a:hover { color: #E2144A; background: #f9f9f9; } /* Hover Styles */

li ul.side-nav li a { padding: 2px 5px; } /* Sub Menu Styles */

ul.side-nav li:hover ul.children, ul.side-nav li.over ul.children { display: block; } /* The magic */

/* ASIDE !NAV */ 
```

# jquery - jQuery 中是否有使用 $.each 函数的条件循环

> ID：13984962
> 
> 赞同：-2
> 
> 时间：2012-12-21T05:54:45.497
> 
> 标签：jquery, loops

`$.each`我对 jQuery 的方法有疑问。下面是我的 ajax，它工作得很好：

```
$.ajax({
    url:'js/people-json.js',
    type:'post',
    dataType:'json',
    success:function(data){
        $.each(data.names, function(i, data) {
            console.log(data);
        });
    },
    error:function(err){
        console.log(err);
    }
}); 
```

该脚本运行良好，并为我提供了我想要获得的 JSON 结果。然而，这给了我结果，但这是我存储在外部 JS 文件中的一长串信息，其 JSON 格式如下所示：

```
{
"people": [
    {
        "name": "aaa",
        "age": 32,
        "email": "aaa@abc.xyz"
    },
    {
        "name": "bbb",
        "age": 21,
        "email": "bbb@abc.xyz"
    },
    {
        "name": "ccc",
        "age": 45,
        "email": "ccc@abc.xyz"
    },
    ..............lot of more here around 8000
  ]
} 
```

有没有办法以这种方式在jQuery中循环：

```
$.each(data.names<=200, function(i, data) {
    console.log(data);
}); 
```

或者这样：

```
$.each(data.names, function(i<=200, data) {
    console.log(data);
}); 
```

或者这个：

```
$.each(data.names, function(i, data<=200) {
    console.log(data);
}); 
```

我们可以在第一次加载时循环 200 个结果，然后单击一个按钮循环另一个 200，依此类推。

*注意：*我更喜欢 jQuery 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T05:57:51.917

直接回答你的问题，不。

`.each()`迭代集合中的所有项目。它不提供过滤选项。您只需像这样过滤自己，并为每次点击更改 if 语句中的值：

```
$.each(data, function(i, data) {
    if (i <= 200) {
        console.log(data);
    }
}); 
```

或者，如果`data`是一个数组，您可以提取前 200 个并迭代它们：

```
$.each(data.slice(0, 200), function(i, data) {
    console.log(data);
}); 
```

或者，如果`data`是一个数组，`for`循环会给你更多的灵活性：

```
for (var i = 0; i < 200; i++) {
    console.log(data[i]);
} 
```

如果您尝试每次点击执行 200 个项目，那么您需要详细说明您在做什么。您是否从 ajax 调用中获得所有结果？如果是这样，您不想每次都重新获取它们。只需存储所有结果并每次处理下一个 200。保留一个计数器变量，指示到目前为止您已经处理了多少。

```
var data = [...];
var dataIterationCnt = 0;

function getNextChunk(n) {
    var end = Math.min(dataIterationCnt + n, data.length)
    for (var i = dataIterationCnt; i < end; i++) {
        console.log(data[i]);
    }
    dataIterationCnt = i;
    return(dataIterationCnt < data.length);
}

// then in your code, you just call getNextChunk(200)
// until it returns null which means it has no more to iterate
var more = getNextChunk(200); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:33:15.213

坚持使用 jQuery，最简单的方法是遍历 中的所有项目`data.names`，直到批次中的最后一项，在批次开始之前拒绝这些项目。

```
var nameObj = {
    index: 0,
    batchSize: 200
};
function nextNamesBatch() {
    $.each(data.names, function(i, data) {
        if(i < nameObj.index) return true;//==continue
        if(i >= nameObj.index + nameObj.batchSize) return false;//==break
        console.log(data);
    });
    nameObj.index += nameObj.batchSize;
} 
```

是的，随着批次的进行，效率问题会越来越高，但我相信，对于中等大小的数组，开销将低于替代 jQuery 方法中的开销，即`data.names`在`$.each(...)`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-21T06:10:58.200

根据标签..或数据列表可以是这样的，请您尝试并告诉它是否有帮助..

```
$('li').each(function(index) {
    alert(index + ': ' + $(this).text());
}); 
```

请应用一些这样的逻辑并测试..

# java - 分别计算每种类型创建的对象

> ID：13984964
> 
> 赞同：2
> 
> 时间：2012-12-21T05:54:48.423
> 
> 标签：java, generics

```
class Node<E> {
     private E data;
     private Node<E> next;
     Node(E data, Node<E> next) {
         this.data = data;
         this.next = next;
     }
     // .. getter-setters
} 
```

为了统计创建了 Node 类的对象数量，我们可以在类中添加一个静态属性，并在创建新对象时递增它。

如何保持为每种类型创建的节点实例的计数？（例如，6 个节点实例是整数类型，4 个节点是浮点类型等）。

一种天真的方法可以是为每种类型添加静态变量（例如 IntCount、FloatCount），并根据传递给构造函数的数据实例对其进行递增。

```
class Node<E> {
    private E data;
    private Node<E> next;
    private static int GlobalCount;
    private static int IntCount, FloatCount;

    static {
        GlobalCount = IntCount = FloatCount = 0;
    }

    Node(E data, Node<E> next) {
        this.data = data;
        this.next = next;
        GlobalCount++;

        if(data instanceof Integer) 
            IntCount++;
        else if (data instanceof Float) 
            FloatCount++;
    }
} 
```

目前这将只跟踪整数和浮点数的计数。如果要跟踪的类型数量增加，上述修改将不是一个好的解决方案。

我想知道是否有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T05:57:33.930

你可以有以下`HashMap`

```
static HashMap<Class, Integer> refCount = new HashMap<Class, Integer>();

Node(E data, Node<E> next) 
{
    this.data = data;
    this.next = next;
    GlobalCount++;

    Class type = data.getClass();

    Integer countObj = refCount.get(type);
    int count = 1;
    if(countObj != null)
    {
        count = countObj.intValue();
        count++;
    }
    refCount.put(type, count); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T14:12:34.053

不要使计数器“静态”。

我的数据结构类...

```
public class LinkedList<T> {

private GenericNode<T> head;
private int size;    //Don't make this 'static'

public LinkedList(){
    this.head = null;
    size = 0;
}

public int size(){
    return size;
} 
```

我的应用类...

```
private static LinkedList<Flight> scheduledFlights;
private static LinkedList<Passenger> outboundPassengers;

public static void main(String[] args) {

    scheduledFlights = new LinkedList<Flight>();
    outboundPassengers = new LinkedList<Passenger>();

    scheduledFlights.add(new Flight("EI123", "Aer Lingus", "CDG"));
    scheduledFlights.add(new Flight("EI223", "Aer Lingus", "STN"));

    outboundPassengers.add(new Passenger("John", "LHR", "London"));
    outboundPassengers.add(new Passenger("Paul", "LHR", "London"));
    outboundPassengers.add(new Passenger("George", "LHR", "London"));
    outboundPassengers.add(new Passenger("Ringo", "LHR", "London"));

    System.out.println(scheduledFlights.size());
    System.out.println(outboundPassengers.size()); 
```

控制台输出...

```
2
4 
```

显示计数器特定于 LinkedList 的实例。

为什么...我很欣赏对于普通对象类中的计数器，您将使用静态计数器。“静态”计数器通常会在对象的所有实例中引用，因此所有增量或减量都会影响同一个计数器。

当您实例化任何类型的泛型类时，“静态”变量与 的实例相关联`GenericsClass`，而不是`GenericsClass<anytype>`. 因此，在我的情况下，a`static int size`将是所有 LinkedList 实例中的通用 int 变量，无论它是`LinkedList<Flight>`还是`LinkedList<Passenger>`。

因此，在使用基于泛型的数据结构时，使用常规实例变量作为计数器是正确的。

希望这可以帮助。

约翰

# fortran - Fortran，静态库的创建和简化（这里是新手）

> ID：13984971
> 
> 赞同：3
> 
> 时间：2012-12-21T05:55:37.050
> 
> 标签：fortran, static-libraries

我对 Fortran 有点陌生，但我开始在我一遍又一遍地使用的模块中收集很多函数和子例程。我一直在尝试构建自己的库，以便可以从我编写的新源代码中调用其中的一些函数和子例程。到目前为止，我已经能够让子例程工作，但不能让函数工作。我只是不知道如何在代码中调用函数。

这是一个例子。以下函数接受一个整数并返回单位矩阵。

```
module test
contains
function IDENTITY(rows) !RETURNS THE IDENTITY MATRIX                                 
    real, dimension(rows,rows)    :: IDENTITY                                        
    integer, intent(in)           :: rows                                      
    integer                       :: i, j                                                                  
    !f2py intent(in) rows                                                             
    !f2py intent(out) IDENTITY                                                        
    !f2py depend(rows) IDENTITY                                                       
    IDENTITY = ZEROS(rows,rows)                                                      
    do i = 1, rows                                                                   
        do j = 1, rows                                                               
            if (i == j) then                                                         
               IDENTITY(i,j) = 1                                                     
            endif                                                                    
        enddo                                                                        
    enddo                                                                            
end function IDENTITY
end module 
```

现在我将它编译成一个目标文件，然后将它归档到一个库中。然后我编写了一个小程序，我想在其中使用这个函数——这就是我想要避免的问题。我想我必须在我的源代码中放置一个 \use\ 语句，以便它使用该模块。然后我必须在编译时包含 .mod 的路径。但最终，我将有一整节的使用语句。我想避免做所有这些事情，只是让一切都变得美好而整洁。有办法吗？任何帮助都会很棒，

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T07:05:10.950

您可以将许多子例程和函数放入一个模块的包含部分。您不需要为每个单独的模块。通过为相关过程（子例程和函数）创建模块/文件来组织代码是有意义的。

图书馆是我曾经使用的一个很好的策略。在这个时代，我通常不理会图书馆。编译器太快了，我只用程序需要的模块编译文件。这取决于你的代码有多大。

您使用 call 语句调用子例程。您可以通过在诸如赋值语句之类的表达式中使用函数来调用函数：

```
x = sin (y)
matrix = identity (n) 
```

PS而不是：

```
do i = 1, rows
   do j = 1, rows
      if (i == j) then
         IDENTITY(i,j) = 1
      endif
   enddo
enddo 
```

为什么不：

```
do i = 1, rows
   IDENTITY(i,i) = 1
enddo 
```

你有一个函数 ZEROS 来归零你的矩阵吗？该语言将使用分配语句来做到这一点：

```
IDENTITY = 0.0 
```

# hadoop - pig load udf 用于从多个子目录加载文件

> ID：13984972
> 
> 赞同：2
> 
> 时间：2012-12-21T05:55:49.767
> 
> 标签：hadoop, user-defined-functions, apache-pig

我想在 pig 中编写一个自定义加载 udf 来从目录结构加载文件。

目录结构就像一个电子邮件目录。它有一个名为 maildir 的根目录。在其中我们有各个邮件持有者的子目录。在每个邮件帐户持有者目录中都有几个子目录，如收件箱、已发送、垃圾箱等。

例如：maildir/mailholdername1/inbox/1.txt maildir/mailholdername2/sent/1.txt

我只想从所有 mailerholdername 子目录中读取收件箱文件。

我无法理解：

1.  应该将什么作为参数传递给负载 udf
2.  应该如何解析整个目录结构，只读取相应的收件箱文件。

我想处理一个文件并执行一些数据提取并将其加载为一条记录。因此，如果有 10 个文件，我会得到一个有 10 条记录的关系此外，我想对这些收件箱文件进行一些操作并提取一些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:03:57.897

因为您有一个没有可变深度的已定义文件夹结构，所以我认为它就像传递以下模式作为您的输入路径一样简单：

```
A = LOAD 'maildir/*/inbox/1.txt' USING PigStorage('\t') AS (f1,f2,f3) 
```

您可能不需要为此创建自己的 UDF，PigLoader 应该能够处理它们，假设它们采用某种分隔格式（上面的示例假设 3 个字段，制表符分隔）。

如果每个收件箱中有多个 txt 文件，请使用`*.txt`而不是`1.txt`. 最后，如果 maildir 根目录不在您的用户主目录中，您应该使用文件夹的绝对路径，比如`/data/maildir/*/index/*.txt`

# jquery - 使用jquery检测母版页上服务器控件的ID

> ID：13984973
> 
> 赞同：0
> 
> 时间：2012-12-21T05:55:58.553
> 
> 标签：jquery, asp.net, master-pages, adrotator

`adrotator`我的Asp.net 母版页上有一个

```
<asp:AdRotator ID="adr" AdvertisementFile="~/Adrotator.xml" Width="180px" Height="200px"
                 runat="server" Target="_self" /> 
```

我正在使用以下 jquery 来旋转 ADS 。但是它无法检测到 Adrotator 控件的 id

```
 $(document).ready(function () {

            setInterval(function () {
            $("[id$='adr']").load(location.href + "[id$='adr']", "" + Math.random() + "");
        }, 5000);

    }); 
```

注意：我已经尝试过使用`$("[id$='adr']")`and`$('[id$=\'adr\']')`和`'#adr'`

![在此处输入图像描述](../Images/bfc54141ce2bbaff0407ac9b10586170.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:20:41.633

尝试

```
$("[id$='<%=adr.ClientID %>']") 
```

*   [有关详细信息，请参阅 ClientID 模式](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:27:18.103

我建议您检查广告轮播器生成的 html 源代码。这可以让您更深入地了解应该如何编写 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T06:29:16.303

或者你可以使用

```
<asp:AdRotator ID="adr" AdvertisementFile="~/Adrotator.xml" Width="180px" Height="200px"
             runat="server" Target="_self" CssClass="adr" /> 
```

和类选择器

```
$(".adr") 
```

或者你可以使用数据绑定

```
$("#<%# adr.ClientID %>") 
```

和

```
Databind(); 
```

在页面加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T07:45:19.850

尝试使用

```
 $('#<%=adr.ClientID%>').Load..... 
```

在 asp.net 代码中，使用此 id 选择器：`$("#<%= adr.ClientID %>").Load...;`对于服务器控件，因为客户端 id 可能会被 asp.net 基础结构更改

# javascript - 通过 jQuery 添加类

> ID：13984975
> 
> 赞同：2
> 
> 时间：2012-12-21T05:56:22.593
> 
> 标签：javascript, jquery, class

我有一个#myDiv 而且我希望在页面加载时，广告类`#myDiv`

EG 页面加载，`#myDiv.class`

我使用此代码，但它不起作用：

```
$('#sky').addClass(‘animate-in’); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:58:40.813

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:58:44.263

您需要使用`single`或加倍`quote`来包围您的班级。

改变

```
$('#sky').addClass(‘animate-in’); 
```

到

```
$('#sky').addClass('animate-in'); 
```

或者

```
$('#sky').addClass("animate-in"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:59:52.133

你可以这样做

```
$(function () {
   $('#sky').addClass('animate-in'); 
}); 
```

或者

```
$(function () {
    $('#sky').addClass("animate-in"); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T06:03:30.737

使用此代码

```
 <body onload='$("sky").addClass("animate-in")' > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T06:07:33.790

请检查 $("#sky") 中是否已经有任何类可用，如果你只想使用'animate-in'，

这个可以试试

```
$("#sky").attr('class','');

$("#sky").addClass('animate-in'); 
```

这样我们就可以知道，已经存在的东西被清除并添加一个新的

# jquery - jQuery 切换不透明度

> ID：13984978
> 
> 赞同：3
> 
> 时间：2012-12-21T05:56:56.863
> 
> 标签：jquery, toggle, opacity, fadeto

试图获得不透明度来切换。基本上，列表项设置为零不透明度，从而保持它们的高度。单击列表子类别头部时，空列表区域会下降到列表项的深度，然后不透明度应该切换以显示列表元素。再次单击子类别列表头时，列表项的不透明度会变回零，然后列表区域会折叠。需要为它们保留列表项，因此使用 opacity 方法而不是从 DOM 中删除它们的 hide、hideToggle 或类似函数。 [http://jsfiddle.net/hotdiggity/zn6cz/10/](http://jsfiddle.net/hotdiggity/zn6cz/10/)

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>jQuery Toggle Opacity</title>
    <script type="text" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
  </head>

  <body>
  <ul class="list">
      <li><a href="#">Subcategory</a></li>
      <li id="id-1" class="expandable"><a href="#">Subcategory - Click this one</a>
        <ul>
              <li>Sub menu item 1</li>
              <li>Sub menu item 2</li>
              <li>Sub menu item 3</li>
              <li>Sub menu item 4</li>
              <li>Sub menu item 5</li>
              <li>Sub menu item 6</li>
         </ul></li>
          <li><a href="#">Subcategory</a></li>
          <li><a href="#">Subcategory</a></li>
      </ul>
  </body>
  </html> 
```

查询...

```
​$(document).ready(function(){
    $('.list li.expandable ul').hide();
    $('.list li.expandable ul li').css({ opacity: 0 });;
    $('.expandable').click(function(){
        $('#id-1.expandable ul').slideToggle('slow');
//      $(this).toggleClass('toggle-arrow');
        $(this).toggle(function() {
//            $('.list li.expandable ul li').stop();
            $('.list li.expandable ul li').fadeTo(2000,1);
            return false;
              },
        function() {
//            $('.list li.expandable ul li').stop();
            $('.list li.expandable ul li').fadeTo(2000,0).delay(500);
            return false;
         }); 
        return false;
    });
}); 
```

​目前，不透明度切换因闪烁而出现故障。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T08:12:29.113

我更新了你的[jsfiddle](http://jsfiddle.net/beradrian/zn6cz/12/)。它解决了你的问题吗？

```
$(document).ready(function(){
$('.list li.expandable ul').hide();
$('.list li.expandable ul').css({ opacity: 0 });;
$('.expandable').click(function(){
    if ($(this).find("> UL").is(":visible")) {
        $(this).find("> UL").fadeTo(2000, 0, function() {
            $(this).slideToggle("slow");
        });
    } else {        
        $(this).find('> ul').slideToggle('slow', function() {
            $(this).fadeTo(2000, 1);
            //return false;
        });
    }
});
}); 
```

# java - 如何使用 GAE 在谷歌云存储中上传文件

> ID：13984979
> 
> 赞同：1
> 
> 时间：2012-12-21T05:57:01.850
> 
> 标签：java, google-app-engine, google-cloud-storage

在 GAE 中上传文件时，我可以使用如下代码，

```
 //here creating a blob store service
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
//here declaring the datastore service
   DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
//creating entity
   Entity emp = new Entity("Employee");
//set the property
   emp.setProperty("First Name", fname);
   emp.setProperty("Last Name", lname);
//storing the data in GAE
   datastore.put(Employee); 
```

现在，如果我需要在 Google 云存储中进行相同的文件上传，我可以设置存储桶并打开通道，如下所示，

```
//Creating file service
FileService fileService = FileServiceFactory.getFileService();

//setting bucket name,object name & type
GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
       .setBucket(BUCKETNAME)
       .setKey(FILENAME)
       .setMimeType("text/html")
       .setAcl("public_read")
       .addUserMetadata("myfield1", "my field value");

//creating the new writable file 
 AppEngineFile writableFile =fileService.createNewGSFile(optionsBuilder.build());
//opening the lock and writing channel
boolean lock = false;
FileWriteChannel writeChannel = fileService.openWriteChannel(writableFile, lock); 
```

在此之后，我不知道如何将文件存储在 Google 云存储中。我参考了这个开发者页面[谷歌云存储 Java API 概述](https://developers.google.com/appengine/docs/java/googlestorage/overview#Complete_Sample_App)，但它只显示读取和写入对象而不是上传文件。

请建议我在 Google 云存储中上传文件的想法。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:33:25.280

像这样的东西：

```
UploadOptions uploadOptions = UploadOptions.Builder.withGoogleStorageBucketName("bucket");
String uploadUrl = blobstoreService.createUploadUrl("/on_upload_success", uploadOptions)); 
```

然后发布到该网址。但是，然后在“/on_upload_success”处理程序中，您从 GS 获取文件的 BlobKey，而不是文件名（由于此错误[http://code.google.com/p/googleappengine/issues/detail?id=8337](http://code.google.com/p/googleappengine/issues/detail?id=8337)）。因此，您只能使用 blobkey 从 GAE 读取该数据。

# google-app-engine - 谷歌应用引擎，日期时间：计算时间长度

> ID：13984980
> 
> 赞同：0
> 
> 时间：2012-12-21T05:57:03.057
> 
> 标签：google-app-engine, datetime

关于时区，使用以下方法正确计算时间长度的最佳方法是什么：

```
timeLength = datetime.datetime(2012, 1, 1, 0, 0, 0) - datetime.datetime.now() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:05:35.503

看看这个链接[http://timezones.appspot.com/](http://timezones.appspot.com/)

```
datetime.fromtimestamp(raw_timestamp, utc) #might help 
```

以及蟒蛇：

```
from datetime import datetime
import pytz
import calendar 
calendar.timegm(pytz.timezone('Europe/Amsterdam').localize(datetime.strptime('2012-12-21 00:00:00', '%Y-%m-%d %H:%M:%S')).utctimetuple()) 
```

# php - 在 MySQL 中，如何只为给定列选择具有特定值的行？

> ID：13984981
> 
> 赞同：1
> 
> 时间：2012-12-21T05:57:05.100
> 
> 标签：php, mysql, sql

假设我有这张桌子：

```
|user_id | first_name | last_name |
----------------------------------|
| 0      |  joe       |  smith    |
| 1      |  bob       |  jones    |
| 2      |  joe       |  black    |
| 3      |  mary      |  jeane    |
| 4      |  peter     |  parker   | 
```

我将如何选择与 user_id's和`1`对应的行的内容？我想稍后使用这些行在列表中向用户显示它们的内容。`2``3`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T05:59:47.477

尝试这个：

```
select user_id,first_name,last_name 
from your_table_name 
where user_id in (1,2,3); 
```

替换`your_table_name`为实际的表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:48:29.147

将您想要作为输出的逗号分隔列名放在`select`关键字之后。
`in`子句用于在多个值之间进行选择。
因此，在您的情况下，查询看起来像这样：

```
select user_id, first_name, last_name
from table_name
where user_id in (1,2,3); 
```

# python - 将数据保存到 django 中的 ManyToManyField 错误？

> ID：13984988
> 
> 赞同：1
> 
> 时间：2012-12-21T05:57:51.933
> 
> 标签：python, django, many-to-many, add

这是模型

```
class Question(models.Model):
    question = models.CharField(max_length = 200)
    questionbody = models.TextField()
    author = models.ForeignKey(User)
    tags = models.ManyToManyField(Tag)
    timestamp = models.DateTimeField('question post date') 
```

这是 view.py

```
 stags = request.POST['tag']
    ltags = stags.split(',')
    q = Question(
        question = request.POST['question'],
        questionbody = request.POST['questionbody'],
        author = request.user,
        timestamp = datetime.datetime.now()
        )
    q.save();

    for i in ltags:
        # print i        ouyput:jquery

        # print type(i)  ouyput:unicode

        # s = Tag.objects.get(name=i)
        s = Tag.objects.get(name='jquery')

        q.tags.add(s) 
```

如您所见，“标签”输入采用“字符串，字符串”格式字符串，因此我将其更改为列表（ltags），

但是在for循环中，当我尝试添加标签时

```
s = Tag.objects.get(name=i) 
```

提问，有一个错误说

```
" Tag matching query does not exist ". 
```

但是当我使用 s = Tag.objects.get(name='jquery') 时，它可以工作。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:14:21.303

我的错，事实证明'i'确实包含一个尾随空格，再次抱歉

# certificate - Apple Push Notifications - 两个应用程序 ID 和一个服务器密钥

> ID：13984989
> 
> 赞同：2
> 
> 时间：2012-12-21T05:57:58.343
> 
> 标签：certificate, apple-push-notifications, push, pem, alerts

我正在尝试部署两个使用苹果推送通知的应用程序。两个应用程序都与同一个服务器应用程序通信。让我们假设一个是免费版本的应用程序，另一个是付费版本 - AppStore 上有两个不同的应用程序 ID。

我想在服务器上构建一个 PEM 密钥，可用于与两个不同的 App ID 通信。我已经成功地能够使用两个单独的 PEM 密钥并让它分别与应用程序对话，但我不想这样做，因为它更多的是维护问题。

我确定人们已经这样做了？有什么想法可以在后端组合两个私钥但让它与两个 App ID 对话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T02:17:38.903

恐怕这是不可能的。

Apple 使用证书来识别应用程序（通知接收者）。

您必须使用两个证书，建立两个连接。

# java - OOP：创建 utils 类或扩展公共基础对象？

> ID：13984996
> 
> 赞同：1
> 
> 时间：2012-12-21T05:58:27.553
> 
> 标签：java, oop

我有一堆相关的类，它们都实现了某个接口以不同的方式执行相同的功能。

任何一个类中大约 70% 的代码是唯一的，大约 30% 可以在 2 个或多个类之间重用。集合中大约有 30 个这样的类。

我只是无法决定什么更合乎逻辑：

> 创建一个包含所有可重用函数的大型基类，或者只创建一个包含常用函数的 utils 类。

这两种方法在我看来是一样的，但我是否有理由偏爱其中一种？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T06:04:14.080

**答案取决于您的方法的性质。** **当您想对无状态对象值（独立）**`Util`执行某些操作时，类/方法更有用，例如。重新迭代，当您将某些（有限）参数传递给方法并从该方法获得预期输出时，您可以考虑将该方法作为类方法。这就是原因，通常 util 方法被创建为类实例并且不与类实例相关联。**`getMaxOfArray(int[] array)``Util``static`**

 **如果这是行为，则使用`Util`该类。但是，如果您的方法严重依赖对象实例，那么最好将类层次结构与基类中定义的通用方法一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:08:23.783

您将需要识别具有通用功能的类，对它们进行分组并提取接口。

查看 @ 的最佳示例是管理 Java 集合的方式。

您可以拥有 1\. 接口层次结构 2\. 公共具体类之间共享的抽象类 3\. 实用程序类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T06:25:41.193

父类与其子类之间的关系应该是相当特殊的，子类“是”父类的更特殊的情况。您的常用功能是否适合这种思维方式？当您谈论“大基类”时，我怀疑不是，但鉴于您提供的信息，这只是一种预感。

如果辅助功能不适合这种关系，那么我会建议实用程序类。

请记住，尽管混合和匹配也可能是合适的，但这完全取决于每种方法的作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T06:03:48.430

如果有一些功能可以作为实用程序独立使用，我更喜欢 util 类，因为它易于测试并且可以在任何需要的地方使用而没有副作用，而不是进入层次结构或组合，除非它在逻辑上有意义**

# php - 标头位置 php 问题

> ID：13984997
> 
> 赞同：1
> 
> 时间：2012-12-21T05:58:38.987
> 
> 标签：php

这是我的代码，适用于本地主机并将我重定向到登录页面：

```
require("common.php"); 

unset($_SESSION['user']); 
 session_destroy(); 

header("Location: login.php"); 
```

但是当我将它上传到我的网络服务器时，不会发送标头。用户登录时未重定向到我的登录页面。但会话已经开始。

这是代码：

```
require("common.php"); 

$submitted_username = ''; 

if(!empty($_POST)) 
{ 

    $query = " 
        SELECT 
            id, 
            username, 
            password, 
            salt, 
            email 
        FROM users 
        WHERE 
            username = :username 
    "; 

    $query_params = array( 
        ':username' => $_POST['username'] 
    ); 

    try 
    { 

        $stmt = $db->prepare($query); 
        $result = $stmt->execute($query_params); 
    } 
    catch(PDOException $ex) 
    { 

        die("Failed to run query: " . $ex->getMessage()); 
    } 

    $login_ok = false; 

    $row = $stmt->fetch(); 
    if($row) 
    { 

        $check_password = hash('sha256', $_POST['password'] . $row['salt']); 
        for($round = 0; $round < 65536; $round++) 
        { 
            $check_password = hash('sha256', $check_password . $row['salt']); 
        } 

    if($check_password === $row['password'])
        { 
            $login_ok = true; 
        } 
      if($login_ok) 
    { 

        unset($row['salt']); 
        unset($row['password']); 

        $_SESSION['user'] = $row; 

     header("Location:form_menu.php"); 

    } 
    else 
    { 

        echo("<font color=red>Login Failed. Icorrect Password </font>"); 

        $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8'); 
    }

    }
} 
```

如何解决这个问题？我的网络服务器有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:04:46.873

您要求 session_destroy() 但您的代码中没有 session_start() ，除非它在您的 common.php 中。我总是确保我退出；在标头之后（“位置：xxx.php”）；

所以试试这个，改变这个：

```
<?php 

require("common.php"); 

unset($_SESSION['user']); 
 session_destroy(); 

header("Location: login.php"); 

?> 
```

对此：

```
<?php 
 session_start();

   require("common.php"); 

    unset($_SESSION['user']); 
    session_destroy(); 

    header("Location: login.php"); 
    exit;

?> 
```

然后在打开后将其添加到其他代码的顶部

```
session_start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:14:45.773

在页面顶部添加

```
 ob_start(); 
```

并在页面底部添加

```
 ob_end_flush(); 
```

我希望它会奏效。

PHP 中的 A`header`总是在任何输出发生之前运行，因此打开输出缓冲。