# StackOverflow 问答 14237000-14237999

# git - 协调在 git 存储库之外所做的更改

> ID：14237006
> 
> 赞同：4
> 
> 时间：2013-01-09T14:04:43.533
> 
> 标签：git

我已经`/tmp`在我的服务器上克隆了一个 git repo。然后我继续将 git repo 的内容复制到`/var/my-site`而不实际复制`.git`文件本身。这是几周前的事了。我已经对目录进行了几次更改，`/var/my-site`而不必担心`.git`在初始安装到`/var/my-site`.

几周后，远程 git 存储库更新了新功能，我想利用这些新功能而不会失去几周的工作。有什么方法可以更新源代码，`/var/my-site`而无需使用新功能精心编辑每个文件、拖放、剪切和粘贴等，并且仍然保持我以前的工作？

只是将`.git`文件夹从`/tmp`工作中移动`/var/my-site`，还是不像我想的那么容易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:13:19.313

你还有你做的克隆`/tmp`吗？如果是这样，您可以将文件从`/var/my-site`回复制到该克隆中，提交它们（因为这是您自己的存储库分支），然后合并远程存储库中的更改。这将为您提供一个包含所有远程更改和您的更改的最新分支。然后，您可以将其复制回`/var/my-site`.

如果您没有原始克隆，您可以尝试创建远程存储库的新克隆并将文件复制到其中，但生成的变更集可能会令人困惑。如果你有你最初制作的克隆，那就容易多了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:13:05.543

> 只是将 .git 文件夹从 /tmp 移动到 /var/my-site 工作，或者这不像我想的那么容易。

此时，该`my-site`目录将成为一个 git 存储库，您将能够：

*   提交您的更改，然后运行`git pull`以与远程合并。
*   或存储您的更改（`git stash`），运行拉取然后应用您的更改（`git stash pop`或`git stash apply`保留存储）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:21:16.120

`HEAD`较不麻烦的方法是在第一次克隆它时查找哪个提交是repo 的。然后，您可以将修改后的文件复制到当前分支指向此头的存储库中，提交您的更改并尝试与远程存储库的最后更新合并。

大致上，这看起来像这样：

```
git checkout -b temp
git reset --hard {OLDCOMMIT}
cp /var/my-site/* .
[commit changes]
git merge origin/master 
```

如果您很难找到原始提交 ID，您可以使用该`git reflog`命令提供您最后一次分支更改提示的历史记录。如果你是最近才拉的，而且有很多变化，你可以`HEAD`在拉之前找到旧的。

# c# - 带有特殊字符的子串

> ID：14237007
> 
> 赞同：1
> 
> 时间：2013-01-09T14:04:44.690
> 
> 标签：c#, asp.net, string, razor, substring

假设我有一个字符串：

```
string str = "09012013 Receipt 09012013 #12" 
```

我想做子字符串来返回“Receipt 09012013 #12”，我使用了子字符串：

```
var result = str.Substring(9); 
```

结果只有“收据 09012013”

我尝试使用其他特殊字符（％，§，$ ...），它有效，子字符串返回“Receipt 09012013 %12”，但使用＃和＆，子字符串仅返回“Receipt 09012013”​​。

有什么想法吗？谢谢。

**编辑**

我的代码：

```
new NaviListItem("renameBtn", "showwaitingscreen", "akte/renameakte?entityid=" + Request["parentid"] + "&aktenkurzbezeichnung=" + Model.Node.Header.Substring(Model.Node.Ordnungsnummer.Length+1), "umbenennen.png", Model.RenameVisible, "Umbenennen", "Umbenennen"), 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:08:20.943

结果`Substring`不取决于最后的字符：

```
string str = "09012013 Receipt 09012013 #12".Substring(9); 
```

产生`"Receipt 09012013 #12"`作为它的结果。

这很可能是一个显示问题：如果您要传递`Substring`某种支持 HTML 的显示机制的结果，`&`and`#`通常会被视为元字符，因此需要转义。

# mysql - MySQL导入csv文件以表格分隔

> ID：14237017
> 
> 赞同：0
> 
> 时间：2013-01-09T14:05:14.933
> 
> 标签：mysql, csv, import

我需要将一个`CSV`文件导入一个名为“colaints”的表中。该文件由表格分隔。我已经尝试过了：

```
load data local infile 'C:/Users/rocket/Documents/filipe ferminiano/processos/segmentacao/912013/coplaint.csv' 
into table crm_base.coplaints fields terminated by ' ' enclosed by '"'; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:36:55.723

您需要将其`\t`用作制表符分隔文件的字段终止符。

```
load data local infile 
'C:/Users/rocket/Documents/filipe ferminiano/processos/segmentacao/912013/coplaint.csv'
into table crm_base.coplaints fields terminated by '\t' enclosed by '"'; 
```

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# r - 使用 Roxygen 构建 R 包时的 S3 方法一致性警告

> ID：14237018
> 
> 赞同：33
> 
> 时间：2013-01-09T14:05:15.643
> 
> 标签：r, r-s3

我为使用 S3 类的函数创建了一个 roxygen 文件。我 roxygenize 然后构建并检查并收到警告：

```
* checking S3 generic/method consistency ... WARNING
common:
  function(word.list, ...)
common.list:
  function(word.list, overlap, equal.or)

See section 'Generic functions and methods' of the 'Writing R
Extensions' manual. 
```

所以我花时间研究：

[http://cran.r-project.org/doc/manuals/R-exts.html#Generic-functions-and-methods](http://cran.r-project.org/doc/manuals/R-exts.html#Generic-functions-and-methods) & [https://github.com/hadley/devtools/wiki/S3](https://github.com/hadley/devtools/wiki/S3)

但我无法弄清楚我在下面的文件中做错了什么。该功能按预期工作。
1）为什么会出现警告？2）我怎样才能让它消失？

```
#' Find Common Words Between Groups
#' 
#' Find common words between grouping variables (e.g. people).
#' 
#' @param word.list A list of names chacter vectors.
#' @param overlap Minimum/exact amount of overlap.
#' @param equal.or A character vector of c(\code{"equal"}, \code{"greater"}, 
#' \code{"more"}, \code{"less"}).
#' @param \dots In liu of word.list the user may input n number of character 
#' vectors.
#' @rdname common
#' @return Returns a dataframe of all words that match the criteria set by 
#' \code{overlap} and \code{equal.or}.
#' @export
#' @examples
#' a <- c("a", "cat", "dog", "the", "the")                                                              
#' b <- c("corn", "a", "chicken", "the")                                                                
#' d <- c("house", "feed", "a", "the", "chicken")                                                       
#' common(a, b, d, overlap=2)  
#' common(a, b, d, overlap=3)                                                                          
#'                                                                                                      
#' r <- list(a, b, d)  
#' common(r)                                                                                 
#' common(r, overlap=2)                                                                                            
common <-
function(word.list, ...){
    UseMethod("common")
}

#' @return \code{NULL}
#'
#' @rdname common
#' @method common list
#' @S3method common list
common.list <-
function(word.list, overlap = "all", equal.or = "more"){
    if(overlap=="all") {
        OL <- length(word.list) 
    } else {
        OL <- overlap
    }
    LIS <- sapply(word.list, unique)
    DF <- as.data.frame(table(unlist(LIS)), stringsAsFactors = FALSE)
    names(DF) <- c("word", "freq")
    DF <- DF[order(-DF$freq, DF$word), ]
    DF <- switch(equal.or,
        equal = DF[DF$freq == OL, ],
        greater = DF[DF$freq > (OL - 1), ],
        more = DF[DF$freq > (OL - 1), ],
        less = DF[DF$freq < (OL + 1), ])
    rownames(DF) <- 1:nrow(DF)
    return(DF)
}

#' @return \code{NULL}
#'
#' @rdname common
#' @method common default
#' @S3method common default  
common.default <-
    function(..., overlap = "all", equal.or = "equal"){
        LIS <- list(...)
        return(common.list(LIS, overlap, equal.or))
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-09T14:22:30.097

我认为这是因为方法必须具有与泛型相同的所有参数。所以添加`...`到 的论点`common.list()`。像这样：

```
common.list <- function(word.list, overlap = "all", equal.or = "more", ...) 
```

* * *

同样，`common.default()`应该有`word.list`作为论据。

# knockout.js - 淘汰复杂的视图模型问题

> ID：14237019
> 
> 赞同：1
> 
> 时间：2013-01-09T14:05:17.160
> 
> 标签：knockout.js

有人可以帮助解释我正在做的可能的根本错误。我需要能够拥有一个模型，该模型可以对一组对象进行分组，每个对象都有自己的一组绑定。

一个小提琴展示了我如何处理一个只有 1 个块的示例，但最后我想要多个块。

html

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"
type="text/javascript"></script>
<div class="productblock">
  <div class="product">
    <input class="binding" data-bind="value: amount" type="text" value="1">
  </div>
  <div class="product">
    <input class="binding" data-bind="value: amount" type="text" value="2">
  </div>
  <input class="discount" data-bind="value: discount" value="50">
</div>

</div>
  <span id="res" data-bind="text: result">result here </span> 
```

js

```
function ResultViewModel() {
  this.result = ko.computed(function () {
    return 1;
  });
}

function ProductViewModel(val) {
  this.amount = ko.observable(val+1);
  this.sum = function () {
    return this.amount();
  };
}

  var products = [];
function ProductBlockViewModel(block) {
  $.each($(block).find("div.product"), function (index, element) {
    var product = new ProductViewModel($(element).find("input").val());
    products.push(product);
    ko.applyBindings(product);
  });
  this.discount = ko.observable(22);

}
var productBlocks = [];
$.each($("div.productblock"), function (index, element) {
  console.log("a");
  var productBlock = new ProductBlockViewModel(element);
  productBlocks.push(productBlock);
  ko.applyBindings(productBlock, element);
  console.log("asdf");
}); 
```

ko.applyBindings(new ResultViewModel()); [http://jsfiddle.net/Todilo/DGUKu/2/](http://jsfiddle.net/Todilo/DGUKu/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:49:13.727

见演示：http: [//jsfiddle.net/DGUKu/7/](http://jsfiddle.net/DGUKu/7/)

我将重新构建您的代码以使其更清晰。

HTML：

```
<!-- ko foreach: productBlocks -->
<div class="productblock">
   <!-- ko foreach: productLines -->
  <div class="product">
    <input class="binding" data-bind="value: amount" type="text">
  </div>
  <!-- /ko -->
  <input class="r" data-bind="value: discount" value="50">
</div>
    <hr/>
<!-- /ko -->

<div>
<span id="res" data-bind="text: result"></span>
</div> 
```

JS：

```
function ProductModel (){
  this.amount = ko.observable(0);
  this.sum = function () {
    return this.amount();
  };
}

// product block contains multiple product line
function ProductBlockViewModel(productArray) {
  this.productLines = ko.observableArray(productArray);
  this.discount = ko.observable(50);
}

// your viewmodel for binding data
// should call applybindings only one
function ViewModel(){
  this.result = ko.observable(0);
  this.productBlocks = ko.observableArray([]);
}

var viewModel = new ViewModel();

// let assume you have 2 blocks:

// block 2 products
viewModel.productBlocks.push(new ProductBlockViewModel([
  new ProductModel(), new ProductModel()
]));

// block 3 products
viewModel.productBlocks.push(new ProductBlockViewModel([
  new ProductModel(), new ProductModel(), new ProductModel()
]));

// you can calculate your total result here
viewModel.result(100);

ko.applyBindings(viewModel); 
```

# qt - QTreeWidget 右键菜单

> ID：14237020
> 
> 赞同：11
> 
> 时间：2013-01-09T14:05:17.400
> 
> 标签：qt, popupmenu, qtreewidget

我环顾四周，似乎不仅树小部件存在问题，其他小部件也存在问题。但就我而言，我找到了一个解决方案，虽然是一个不完整的解决方案。我正在向我的树小部件添加操作，因此当您右键单击它时，会出现一个包含这些操作的弹出窗口。但是，当我将项目添加到我的树小部件并右键单击它们时，会出现相同的弹出窗口。我想做的是，当您右键单击树小部件时，会出现一个树小部件弹出菜单，当您右键单击项目时，会出现另一个相应的弹出菜单。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-04-07T12:12:50.993

首先，将 QTreeWidget 配置为响应（发射信号）鼠标右键：

```
treeWidget->setContextMenuPolicy(Qt::CustomContextMenu); 
```

其次，将信号与您的插槽“MainWindow::prepareMenu”连接：

```
connect(treeWidget,&QTreeWidget::customContextMenuRequested,this,&MainWindow::prepareMenu); 
```

三、在插槽中创建上下文菜单：

```
void MainWindow::prepareMenu( const QPoint & pos )
{
QTreeWidget *tree = treeWid;

QTreeWidgetItem *nd = tree->itemAt( pos );

qDebug()<<pos<<nd->text(0);

QAction *newAct = new QAction(QIcon(":/Resource/warning32.ico"), tr("&New"), this);
newAct->setStatusTip(tr("new sth"));
connect(newAct, SIGNAL(triggered()), this, SLOT(newDev()));

QMenu menu(this);
menu.addAction(newAct);

QPoint pt(pos);
menu.exec( tree->mapToGlobal(pos) );
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-09T14:17:56.453

首先，您应该将[上下文菜单策略](http://doc.qt.io/qt-5/qwidget.html#contextMenuPolicy-prop)设置为[`CustomContextMenu`](http://doc.qt.io/qt-5/qt.html#ContextMenuPolicy-enum)：

```
treeView->setContextMenuPolicy(Qt::CustomContextMenu); 
```

然后您可以连接到[`QWidget::customContextMenuRequested(const QPoint&)`](http://doc.qt.io/qt-5/qwidget.html#customContextMenuRequested)信号并显示您的上下文菜单。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-06-26T15:02:24.953

对于那些更喜欢使用设计师的人，这里有另一种方法：

### 1）将上下文菜单策略设置为自定义上下文菜单

通过代码：

```
ui->treeWidget->setContextMenuPolicy(Qt::CustomContextMenu); 
```

或使用图形设计器，单击树小部件并使用属性编辑器进行设置：

[![在此处输入图像描述](../Images/be42c6922acd35a3e6389556bd01ca5e.png)](https://i.stack.imgur.com/1RqKl.png)

### 2) 创建处理函数

在设计器中，右键单击 treeWidget 并选择“Go to Slot...”选项。将出现一个类似的窗口：

[![在此处输入图像描述](../Images/87adc0eeed80f77a7f1c7079e6b59cfd.png)](https://i.stack.imgur.com/SSile.png)

单击“CustomContextMenuRequested(QPoint)”选项。处理函数将被定义、声明并自动连接。

```
void MainWindow::on_treeWidget_customContextMenuRequested(const QPoint &pos)
{
  // this function will be called on right click
} 
```

这一步也可以通过自己定义和连接槽函数来完成。

### 3) 在上下文菜单上创建选项。

[![在此处输入图像描述](../Images/276b09e5d1df07dfd9ba0502161d6768.png)](https://i.stack.imgur.com/YRuO6.png)

转到操作编辑器选项卡（通常停靠在设计器的底部）。通过单击左上角的新按钮，在上下文菜单中添加您想要的操作。你会遇到这样的界面：

[![在此处输入图像描述](../Images/0f4ba0717238555982467acb1d3d6496.png)](https://i.stack.imgur.com/6Ejtm.png)

您可以（可选）为操作设置工具提示或图标，或使其可检查。您可以为复制操作创建一个快捷键，例如 Ctrl+C。

### 4）创建菜单并启动它

```
void MainWindow::on_treeWidget_customContextMenuRequested(const QPoint &pos)
{
    QMenu menu(this); // add menu items
    menu.addAction(ui->actionDelete);
    menu.addEdit(ui->actionDelete);
    ...

    ui->actionDelete->setData(QVariant(pos)); // if you will need the position data save it to the action

    menu.exec( ui->treeWidget->mapToGlobal(pos) );
} 
```

### 5) 为每个动作创建处理函数

就像在第 2 步中一样，创建插槽函数并手动连接它，或者右键单击一个动作，单击“转到插槽...”选项并选择触发（）插槽。

[![在此处输入图像描述](../Images/7d7833b22134cba143d14d0f29e294c8.png)](https://i.stack.imgur.com/CQuar.png)

### 6）最后，在槽函数中应用你的逻辑

```
void MainWindow::on_actionEdit_triggered()
{
    QTreeWidgetItem *clickedItem = ui->treeWidget->itemAt(ui->actionDelete->data().toPoint());

    // your logic
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T14:19:00.267

查看重载 QAbstractItemModel 并提供您自己的 OnContextMenuRequested。通过此功能，您可以让不同的项目创建不同的上下文菜单。

这是我的一个项目中的一些缩短的伪代码，可能会有所帮助：

```
void MyModel::OnContextMenuRequested(const QModelIndex& index, const QPoint& globalPos)
{
// find 'node' corresponding to 'index'

vector<pair<string,BaseNode*> > actions = node->GetActions(true);
if(actions.size()==0) return;

// the ptr list helps us delete the actions
boost::ptr_list<QObject> actionPtrList;
QList<QAction*> qtActions;
for(unsigned int i=0;i<actions.size();i++)
{
    QAction* act = new QAction(actions[i].first.c_str(),NULL);
    act->setData(qVariantFromValue(actions[i].second));
    actionPtrList.push_back(act);
    qtActions.append(act);
}

// create and show the context menu
QMenu *menu = new QMenu("Item actions",NULL);
actionPtrList.push_back(menu);
QAction* act = menu->exec(qtActions,globalPos);
if(act==NULL) return;

// act on the resulting action 'act'
} 
```

# javascript - 为什么在我的 javascript 中设置参数的默认值不起作用？

> ID：14237027
> 
> 赞同：0
> 
> 时间：2013-01-09T14:05:37.187
> 
> 标签：javascript, parameters, constructor

如果没有选项对象传递给我的构造函数，我想设置一个默认的“小”：

```
var Plan = function(options){
  this.name = options.name || 'small';
} 
```

但是当我这样做时：

```
var smallPlan = new Plan();

console.log(smallPlan.name); 
```

我明白了`Uncaught TypeError: Cannot read property 'name' of undefined`

我究竟做错了什么？这不是在 javascript 中设置默认参数值的惯用方式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T14:09:04.223

不要过度复杂地检查代码是否存在选项和名称，而是检查对象是否已定义，如果没有，请将其设置为空对象。

```
var Plan = function(options){
  options = options || {};
  this.name = options.name || 'small';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T14:07:39.927

`options`未定义。`options.name`如果`options`不存在，则无法访问。

如果您想检查的不仅仅是一个属性，我建议您这样做：

```
var Plan = function(options){
    // Set defaults
    this.name = 'foo';
    this.title = 'bar';
    this.something = 'even more stuff';
    if(options){ // If options exists, override defaults
       this.name = options.name || this.name;
       this.title = options.title || this.title;
       this.something = options.something || this.something;
    }
} 
```

否则，我会试试这个：

```
var Plan = function(options){
    this.name = options ? options.name || 'small' : `small`;
} 
```

这有点难看，但你必须检查是否`options`存在，如果`options`有一个`name`属性。

这是做什么的：

```
if(options){
    if(options.name){
        this.name = options.name;
    } else {
        this.name = 'small';
    }
} else {
    this.name = 'small';
} 
```

# scala - 为什么在 Scala 中允许使用未初始化的变量？

> ID：14237033
> 
> 赞同：10
> 
> 时间：2013-01-09T14:05:59.120
> 
> 标签：scala, jvm, forward-reference

> **可能重复：**
> [前向引用 - 为什么此代码编译？](https://stackoverflow.com/questions/7762838/scala-forward-references-why-does-this-code-compile)
> [Scala 和前向引用](https://stackoverflow.com/questions/12184997/scala-and-forward-references)

```
object Main extends App {
  val a = 4
  val b = a + c
  val c = 5
  println(b) // => 4
} 
```

这将打印**4**`c`显然是分配`0`时。和是价值观，所以它们不应该在一个时刻出现，在下一刻出现。在 Scala 中，它们应该是**不可变**的，对吧？`b``a``c``0``5`

 **我不应该至少得到某种警告吗？当然，在上面的例子中，你必须是一个白痴才能错过*它*，但在更复杂的情况下，很难说出它的顺序。

我当然知道我可以使用`lazy val b = ...`，但是如果我*认为*我已经把它按正确的顺序排列了怎么办，而我真的没有。根本没有收到任何警告，这不是很危险吗？这运行得很好！？*这*如何通过Scala IDE*和*编译器？是故意的吗？或者它是一个无法修复的错误？：/

:)**

# iphone - iphone中的导航相关问题

> ID：14237034
> 
> 赞同：0
> 
> 时间：2013-01-09T14:06:01.110
> 
> 标签：iphone

我正在一个屏幕（即firstScreen）到下一个屏幕（即secondFile）进行导航。我的代码在 firstFile.m 中是：

```
- (IBAction)onClick:(id)sender
{

secondFile* dest = [[secondFile alloc] initWithNibName:@" secondFile" bundle:nil];
[self.navigationController pushViewController:dest animated:YES];

NSString* uname = txtUserName.text;
NSLog(@"usr name is : %@",uname);

} 
```

第一屏.h

```
<UIKit/UIKit.h>

@interface nevigationViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIButton *btnNevigation;
@property (weak, nonatomic) IBOutlet UITextField *txtUserName;
- (IBAction)onClick:(id)sender;

@end 
```

问题是打印了日志但没有执行导航。拜托，你能告诉我上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:12:41.397

尝试这个 ：-

```
- (IBAction)onClick:(id)sender
{

secondFile* dest = [[secondFile alloc] initWithNibName:@"secondFile" bundle:nil];
[self.navigationController pushViewController:dest animated:YES];

NSString* uname = txtUserName.text;
NSLog(@"usr name is : %@",uname);

} 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:16:38.717

只需从**@“secondFile”**中 删除空间`secondFile* dest = [[secondFile alloc] initWithNibName:@" secondFile" bundle:nil];`

如果问题仍然存在并且您根本不需要navigationController，那么只需使用：

```
 secondFile *nextView = [[secondFile alloc]initWithNibName:@"secondFile" bundle:nil];
  [self presentModalViewController:nextView animated:YES]; 
```

# c# - 如果我以管理权限运行进程，弹出窗口触发器 c#

> ID：14237036
> 
> 赞同：2
> 
> 时间：2013-01-09T14:06:09.090
> 
> 标签：c#, cmd

因为我想`cmd`在进程中以管理权限运行，但弹出窗口甚至将其设置`WindowStyle`为隐藏。

```
 ProcessInfo = new ProcessStartInfo("cmd.exe", "/c " + @"cscript.exe DTCSECURITY.vbs");
 ProcessInfo.CreateNoWindow = true;.
 ProcessInfo.WindowStyle = ProcessWindowStyle.Hidden;

 // Here with i pass the privillage
 ProcessInfo.UserName = @"administrator";
 ProcessInfo.Password = StringToSecureString("password12$");    

 process = Process.Start(ProcessInfo);
 process.WaitForExit(); 
```

但是，如果我评论特权代码，则不会弹出闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:55:03.417

尝试设置`ProcessStartInfo.UseShellExecute`为`false`（它是`true`默认情况下）。

[ProcessStartInfo.CreateNoWindow 属性](http://msdn.microsoft.com/en-gb/library/system.diagnostics.processstartinfo.createnowindow.aspx)说：

> 如果 UseShellExecute 属性为 true 或 UserName 和 Password 属性不为 null，则忽略 CreateNoWindow 属性值并创建一个新窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:17:52.053

我认为你应该设置[`WorkingDirectory`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)属性。来自*MSDN*；

> 如果提供了 UserName 和 Password，则必须设置 WorkingDirectory 属性。如果未设置该属性，则默认工作目录为 %SYSTEMROOT%\system32。

* * *

> 如果 UserName 属性不为 null 或为空字符串，则 UseShellExecute 属性必须为 false，否则在调用 Process.Start(ProcessStartInfo) 方法时将引发 InvalidOperationException。

# javascript - 我想通过将鼠标悬停在 div 内的文本上来更改 div 高度

> ID：14237037
> 
> 赞同：0
> 
> 时间：2013-01-09T14:06:11.660
> 
> 标签：javascript, html, css, hover

我有一个名为的外部 div `Title`，其中有一个名为的`style="width=100%"` 内部 div`more`

所以我想通过悬停在内部 div 上来改变外部 div 的高度（平滑..使用过渡）

可以用css吗？？

我想要类似的东西

```
transition: height .4s;
-moz-transition: height .4s; 
-webkit-transition: height .4s; 
-o-transition: height .4s;  
-ms-transition: height .4s; 
```

我的标题 css 代码

```
#title{
    display:inline-block;
    background-color:#000;
    position:absolute;
    top:20px;
    left:20px;
    right:20px;
    margin:0px;
    padding:0px;
    height:42px;
    min-width:800px;
} 
```

我的更多CSS代码

```
#more{
    padding-left:10px;
    color:#999;
    text-decoration:underline;
    font-size:10px;
} 
```

以下所有代码均无效

*   `name:hover #title{height:200px}`
*   `name:hover + #title{height:200px}`
*   `name:hover ~ #title{height:200px}`
*   `name:hover > #title{height:200px}`

我可以通过 JavaScript 来实现吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:16:54.740

[如果不使用CSS Selectors Level 4 Draft](http://dev.w3.org/csswg/selectors4/)中引入的**[Subject Identifier](http://dev.w3.org/csswg/selectors4/#subject)** ，您无法在 css 中定位祖先元素，目前没有任何浏览器支持。

在更远的将来你可以写（感叹号是一个临时解决方案）：

```
!#Title name:hover{
    /* css stuff */
} 
```

但是，您可以执行以下操作之一：

`display:table`在您的div 上声明并像[此示例](http://jsfiddle.net/Y2RwB/1/)`#title`中那样为 div 设置动画。至少在铬中工作；）`#more`

或者你只是使用 javascript（或者可能是 jQuery），应用一个事件处理程序并直接修改高度`#title`或应用一个持有过渡效果的类。

# bash - Unix bash 切割和 grep

> ID：14237043
> 
> 赞同：5
> 
> 时间：2013-01-09T14:06:28.660
> 
> 标签：bash, unix, grep, cut

我有一个名为 db.txt 的文本文件。文件中的一些示例行如下所示：

> 哈利波特与魔法石：JK罗琳：21.95:100:200
> 
> 哈利波特与密室：JK罗琳：21.95:150:300
> 
> 指环王，魔戒：JRR 托尔金：32.00:500:500
> 
> 权力的游戏：乔治·RR·马丁：44.50:300:250

然后在我的脚本中，我有以下几行：

```
echo "Enter title:"
read TITLE

cut -d ":" -f 1 db.txt | grep -iw "$TITLE" | while read LINE
do
    STRING="`echo $LINE | cut -d ":" -f 1`,"
    STRING="$STRING `echo $LINE | cut -d ":" -f 2`, "
    STRING=" \$$STRING`echo $LINE | cut -d ":" -f 3`,"
    STRING=" $STRING`echo $LINE | cut -d ":" -f 4`,"
    STRING=" $STRING`echo $LINE | cut -d ":" -f 5`"
done 
```

有没有办法从 cut 中 grep 特定字段，然后将整行传递到 while 循环中？

例如，如果我输入“哈利波特”，它应该显示：

> 哈利波特与魔法石，JK 罗琳，21.95 美元、100 美元、200 美元
> 
> 哈利波特与密室，JK 罗琳，21.95 美元、150 美元、300 美元

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:22:36.517

如果你对 bash 的正则表达式匹配没问题（或者可以使用 shell 模式匹配） ，你可以在没有`cut`, 和没有的情况下执行此操作。`grep`

这个想法是逐行读取文件，然后将该行拆分为一个数组。一旦你得到了，做你想要的比较和输出。

这是该技术的演示：

```
#! /bin/bash
echo "Title:"
read title

# shopt -s nocasematch           # if you want case-insensitive matching

while read line ; do             # this read takes data from input.txt, see
                                 # end of loop
        IFS=: read -a parts <<< "$line"  # this splits the line on ":" into
                                         # an array called parts

        if [[ ${parts[0]} =~ $title ]] ; then  # regex matching
                printf "%s -- %s\n" "${parts[1]}" "${parts[2]}"
        fi
done < input.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T14:26:56.133

下一步是`grep`和。除非您必须使用（这是作业吗？）来执行此操作，否则会使事情变得容易得多：`cut``awk``bash``awk`

```
awk -F: '/harry potter/ { sub(/^/,"$",$(NF-2)); print }' IGNORECASE=1 OFS=", " db.txt 
```

测试输入：

```
Harry Potter and the Sorcerer's Stone:J.K. Rowling:21.95:100:200
Harry Potter and the Chamber of Secrets:J.K. Rowling:21.95:150:300
Lord of the Rings, The Fellowship of the Ring:J.R.R. Tolkien:32.00:500:500
A Game of Thrones:George R.R. Martin:44.50:300:250 
```

测试输出：

```
Harry Potter and the Sorcerer's Stone, J.K. Rowling, $21.95, 100, 200
Harry Potter and the Chamber of Secrets, J.K. Rowling, $21.95, 150, 300 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T14:31:04.637

```
read -p "Enter title: " TITLE
while IFS=: read title author price x y; do
    if [[ ${title,,} == *${TITLE,,}* ]]; then
        printf "%s, %s, $%s, %s, %s\n" "$title" "$author" "$price" "$x" "$y"
    fi
done < db.txt 
```

if 命令中的测试执行简单的全局匹配但不区分大小写，因此如果用户输入“potter”，它将匹配。

或者，使用 sed 更改分隔符：

```
read -p "Enter title: " TITLE
sed '/'"$TITLE"'/I!d; s/:/, /g' db.txt 
```

这意味着删除所有与 TITLE 不匹配的行，然后转换分隔符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T14:29:09.790

The easiest method of doing this is to look over the grep results

```
#!/bin/bash

read -p "Enter title: " TITLE

FILENAME="db.txt"
IFS=$'\n'
for LINE in `grep -iw  "Harry Potter" "$FILENAME"`; do
    echo $LINE | awk 'BEGIN { FS = ":" } ; { print $1, $2, $3, $4, $5 }'
done 
```

The IFS change changes the delimiter to a new line rather than a space and the FS in the awk command changes the delimiter to the : to allow access to the fields

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T14:59:01.867

我知道您没有指定它，但`awk`它可能是用于此任务的最佳工具。它将 cut、sed 和 grep 组合成一个方便易用的工具。嗯，方便的工具...

要了解`awk`，您必须了解以下几点：

*   awk 是一种编程语言。它内置了逻辑和变量。
*   awk 假设一个读取循环读取每一行。
*   awk 程序必须用花括号括起来。
*   不仅是花括号，而且 Awk 解析变量都以美元符号开头。因此，您需要将您的 awk 程序用单引号括起来以防止 shell 进入。
*   awk 根据*字段分隔符*自动解析每一行。默认字段分隔符是一个空格，但您可以通过`-f`参数更改它。
*   每个*字段*都有一个特殊的变量。第一个字段是`$1`，下一个字段是`$2`，依此类推。整行是`$0`。

这是您的 awk 声明：

```
awk -F: '{
    title =  $1
    author = $2
    price  = $3
    pages_read_until_i_got_bored=$4
    pages = $5
    print "I read " pages_read_until_i_gob_bored "pages out of " $pages " pages of " $title " by " $author "."
}' $file 
```

当然，整个事情也可以是一行：

```
 awk -F: '{ print "I read " $4 " pages " out of " $5 " of " $1 " by " $2 "." }' $file 
```

只是想强调 Awk 的*可编程*性以及如何使用它来进行这种类型的解析。

如果您的问题是如何输入这些信息并将其放入环境变量中，那么[Glenn Jackman 的](https://stackoverflow.com/a/14237481/368630)回答是最好的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T14:31:38.507

如果你可以使用`sed`这将是一个解决方案

```
 read -p "Enter title: " TITLE
  sed -n -e 's/^\([^:]\+:\)\{2\}/\0$/' -e 's/:/, /g' -e "/^$TITLE/Ip" db.txt 
```

简短说明它的作用

```
 -n tells sed not to print any lines
 -e 's/^\([^:]\+:\)\{2\}/\0$/' matches for the 2nd : and adds a $ after it
 -e 's/:/, /g' replaces all : with , and a following whitespace
 -e "/^$TITLE/Ip" tells sed to print all lines which start with $TITLE (that's the p) and I tells sed to match case-insensitive 
```

# php - 如何将数据从 MYSQL/PHP 发送到 Coldfusion 组件？

> ID：14237047
> 
> 赞同：0
> 
> 时间：2013-01-09T14:06:45.187
> 
> 标签：php, mysql, coldfusion

我正在尝试创建功能，以将 PHP 中的 MYSQL 查询生成的页面输出为 PDF 文件。

为此，我需要一种方法来包装放置在动态表中的数据并将其放置在标签之间，以便可以将其转换为干净的 PDF。

除了从 PHP 页面调用冷融合组件之外，我不确定从哪里开始，而不是像我最初设想的那样反过来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:38:25.270

我会从你的 php 脚本中提取动态内容，如下所示：

```
<CFDOCUMENT format="pdf" src="url-to-php-script.php" mimetype="text/html" filename="#expandpath("your.pdf")#" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:37:31.027

php调用Coldfusion组件的部分很容易完成。在 cfc 中，您将拥有功能。如果您将访问属性设置为远程，则该功能将作为 Web 服务提供。

```
<cffunction name="NameOfFunction" access="remote" returntype="something"> 
```

# windows - 从 Windows 服务记录输出数据的屏幕

> ID：14237048
> 
> 赞同：0
> 
> 时间：2013-01-09T14:06:47.137
> 
> 标签：windows, service, output

我们正在寻找某种允许我们显示一些纯文本的屏幕。此文本是 Windows 服务的输出。该服务是一个带有监控中心的网关，用于监听一些生命风险事件。

我们无法在服务器显示中显示这些事件，因为此服务器未登录。我们还需要，如果服务器重新启动或发生任何事情，数据在屏幕上仍然可见。

有人知道这样的设备吗？

我们现在正在使用一些 Epson LX-300 来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:22:01.550

如果您想要快速、便宜、不脏，SysInternals 调试视图 (dbgview) 将允许监视其他计算机；通过 OutputDebugString() 的任何输出都将显示在运行 dbgview 的计算机上。当然，这假设您对输出的发出方式有足够的控制权，而您没有指定。

希望这可以帮助 ：）

# java - 带有条形样式的 Android Activity 指示器

> ID：14237049
> 
> 赞同：0
> 
> 时间：2013-01-09T14:06:50.960
> 
> 标签：java, android, xml, android-layout

如何实现具有条形样式的活动指示器。根据以下文档[http://developer.android.com/design/building-blocks/progress.html](http://developer.android.com/design/building-blocks/progress.html) “活动指标用于不确定长度的操作。” 和“有两种样式可供选择：条形和圆形。每种都提供各种尺寸，包括 Holo Light 和 Holo Dark 主题。” 很好，但是我在哪里可以得到这样的例子……我真的尝试了很多，但找不到任何一个例子。简而言之，我只想使用以下活动指示器，如图所示。

![在此处输入图像描述](../Images/f05b256f6921e718c0e9a86a1907c2a3.png)

另外，我想在通知中使用此活动指示器，如上图所示，以显示一些进展，如果您可以根据我的场景指导或提供与我相同的示例，那么它会好得多，但至少指导我如何显示这个在我的布局中查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:43:30.457

经过进一步搜索，我终于找到了答案......

来自 xml

```
 <ProgressBar
    android:id="@+id/progressBar1"
    style="@android:style/Widget.Holo.ProgressBar.Horizontal"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:indeterminate="true" /> 
```

从java你可以简单地通过使用方法将模式设置为不确定

```
((ProgressBar) findViewById(R.id.progressBar1)).setIndeterminate(true); 
```

实际上，活动指示器的名称令人困惑，而我心中的其他困惑是进度条与活动指示器不同，但实际上两者是相同的……只是它们的模式不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:35:21.613

尝试这样的事情。

```
ProgressDialog progressBar = new ProgressDialog(v.getContext());
progressBar.setMessage("File downloading ...");
progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
progressBar.setProgress(0);
progressBar.setMax(100);
progressBar.show(); 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T15:42:42.263

你可以使用 Smmothprogressbar [github](https://github.com/castorflex/SmoothProgressBar)

它是根据您的要求

# c++ - 将数据从 C 进程传递到 C++ 进程

> ID：14237050
> 
> 赞同：7
> 
> 时间：2013-01-09T14:06:53.387
> 
> 标签：c++, c, shared-memory, interprocess

这是我第一次在这里发布问题，我通常会在存档中找到答案，但这次我被难住了。

我正在使用来自使用 Windows 驱动程序工具包的供应商的一些代码从操纵杆上获取数据。数据是一个有 6 个元素的数组形式（它是一个 6 自由度的鼠标）。

我已经编写了需要获取数据的代码，它是用 C++ 编写的……它大量使用标准库和向量，等等。似乎将标准库与 WDK 一起使用是一件令人头疼的事情，我花了几天时间试图开始工作但失败了。我的下一个想法是使用 boost::interprocess ，但出于同样的原因，这很难与 WDK 一起使用。

我想知道是否有办法在 C 进程和 C++ 进程之间共享内存。我想使用 C 程序将数组写入内存并从 C++ 程序中读取。它需要非常快地发生，并且应该有一种方法来确保我不会在写入过程中读取它（互斥体？）。

欢迎任何想法或建议。

*编辑* 我创建了一个 DLL，现在我只有一个 DLL，它有一个 getValues() 函数，我可以从我的 C++ 项目中调用它。我不得不使用 pimpl 成语来隐藏 c 的东西。谢谢你们的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:45:37.047

也许我错过了一些东西，但看起来您创建了一个检索操纵杆数据的过程。为了省点麻烦，请用评论中建议的 C DLL 替换该进程。然后，您的主 C++ 应用程序可以简单地调用该 DLL 中的函数来检索操纵杆数据，而无需担心锁定或进程间通信。

当然，如果确实需要两个进程，则需要使用 DLL 中的共享内存和进程级锁。需要共享内存是因为 DLL 被单独加载到每个进程的虚拟空间中；没有任何东西是共享的，因此需要共享内存。

# virtual-machine - Linux 上的虚拟机版本

> ID：14237052
> 
> 赞同：5
> 
> 时间：2013-01-09T14:06:57.147
> 
> 标签：virtual-machine, smalltalk, pharo, seaside

应该在 Linux 上为 Pharo/Seaside 使用哪个版本的 VM？
如果我没记错的话，apt-get 加载的（并在[seaside book](http://book.seaside.st/book/advanced/deployment/deployment-apache/install-vm)中引用）是 Squeak VM。
这应该比 Cog-VM 更受欢迎吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:51:45.487

[对于 Seaside，您可以从Seaside 网站](http://www.seaside.st/download/pharo)下载预编译的 Pharo 映像（它们被称为“一键体验”），这是运行映像的最简单方法。Seaside One-Click 中分发的 VM 是 CogVM。

在 Squeak 和 Pharo 世界中基本上有三个 VM：

*   StackVM：实现优化的闭包和上下文到堆栈的映射
*   CogVM：StacVM + JIT（即时编译）+ PIC（多态内联缓存）
*   CogVMMT：CogVM + 多线程

您可能还想尝试从 Pharo 网站检查最新的[CogVM for Linux 。](http://pharo.gforge.inria.fr/ci/vm/nbcog/linux/NBCog-linux-latest.zip)最新的在[开发者的网站上](http://www.mirandabanda.org/files/Cog/VM/)。

根据我的经验，我发现 CogVM 确实比 StackVM 快，尽管在处理大数据（读取和处理 2TB 的 CSV）或调试复杂流程方面不稳定。这并不意味着您不能运行大数据项目，只是**有时**可能会失败，具体取决于您要走多远。另一方面，StackVM 更成熟，是学习如何修改 VM 的最佳场所，因为 CogVM 的重点是优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T07:04:42.853

如果您在 Ubuntu 上，有一个易于使用的 PPA：[http ://www.pharo.org/pharo-download/ubuntu](http://www.pharo.org/pharo-download/ubuntu)

# css - 带有 2 列 div 的内联文本

> ID：14237054
> 
> 赞同：0
> 
> 时间：2013-01-09T14:07:10.110
> 
> 标签：css, html

我使用 div 替换 2 列的表。如果第一列文本太长，我无法很好地显示它们。例如：“口语”应与前第二列的“英语”内联，但不能与“贷款，牙科”内联。

```
#wrap {
 width:280px;
 margin:0 auto;
}
.left_col {
 float:left;
 width:30%;
}
.right_col {
float:right;
width:70%;
} 
```

[http://jsfiddle.net/HtyXP/](http://jsfiddle.net/HtyXP/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:11:23.307

这是因为您将宽度设置为 280px (#wrap)。`Medical, Education support, Loans, Dental`是一个很长的句子，它溢出了 70% 的`right_col`. 与`Language spoken`.

为了让一切看起来不错，你必须增加这个值。400px 的宽度应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:19:54.300

我看到解决这个问题的唯一方法是一张桌子，或者如果你想坚持使用 div 拼命这个：

```
<div id="wrap">
  <div class="row">  
    <div class="left_col">Industry:</div>
    <div class="right_col">Insurance</div>
  </div><div class="row">
    <div class="left_col">Co. Size:</div>
    <div class="right_col">201 - 500 Employees</div>
  </div><div class="row">
    <div class="left_col">Working Hours:</div>
    <div class="right_col">Regular hours, Mondays-Fridays</div>
  </div><div class="row">
    <div class="left_col">Benefits:</div>
    <div class="right_col">Medical, Education support, Loans, Dental</div>
  </div><div class="row">
    <div class="left_col">Spoken Language:</div>
    <div class="right_col">English</div>
  </div>
</div> 
```

# php - 将父级设置为空

> ID：14237057
> 
> 赞同：0
> 
> 时间：2013-01-09T14:07:20.163
> 
> 标签：php, arrays, unset

拜托，有人可以帮我吗？

如果该数组中的任何值为空，我想取消设置父数组键；

例如

```
array
(
    0 => array
    (
        'type' => 'Main'
        'phone' => '11 555-1423'
        'foo' => array(
            0 => (
                'bar' => ''
            )
         )

    )
    1 => array
    (
        'type' => 'Personal'
        'phone' => ''
        'foo' => array()
    )
) 
```

在这种情况下，我想取消设置 [0][foo] 和 [1]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:31:37.423

我认为这正是你想要的

```
function fclear(&$arr, $del){
    foreach($arr as $key=>&$val){
        if($val == '')
            return true;
        if(is_array($val)){
            $del = fclear($val, false);
                if($del == true)
                    unset($arr[$key]);
        }
    }
}

fclear($myarr,false); 
```

您可以查看[代码示例](http://phpfiddle.org/main/code/1xf-4v9)，运行它并查看结果。

# python - python gui中的utf-8编码

> ID：14237066
> 
> 赞同：2
> 
> 时间：2013-01-09T14:07:39.450
> 
> 标签：python, user-interface, encoding, utf-8, pyqt4

我有英语和匈牙利语的简单应用程序。所有可本地化都在单独的模块 -localizable.py 中，例如：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
...
...
if language == "hun":
    LOGIN_LABEL_USERNAME_STR                    = 'Felhasználó'
    LOGIN_LABEL_PASSWORD_STR                    = 'Jelszó'
elif language == "eng":    
    LOGIN_LABEL_USERNAME_STR                    = 'Username'
    LOGIN_LABEL_PASSWORD_STR                    = 'Password' 
```

但是当我在 loginDialog.py 中使用匈牙利语时：

```
import localizable
...
...
loginLayout.addRow(localizable.LOGIN_LABEL_USERNAME_STR, QtGui.QLineEdit())
loginLayout.addRow(localizable.LOGIN_LABEL_PASSWORD_STR, QtGui.QLineEdit())
... 
```

我得到 `FelhasznÃ¡lÃ³`and `JelszÃ³`而不是`Felhasználó`and `Jelszó`。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:11:51.870

为什么不在模块中使用`unicode`对象`localizable`，而不是没有编码的字节串？

```
if language == "hun":
    LOGIN_LABEL_USERNAME_STR                    = u'Felhasználó'
    LOGIN_LABEL_PASSWORD_STR                    = u'Jelszó' 
```

这对我有预期的效果。

您可能还需要考虑使用 Qt 提供的[内置函数](http://srinikom.github.com/pyside-docs/PySide/QtCore/QTranslator.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:37:34.460

发生这种情况是因为您的源文件是 UTF8 编码的，这意味着字符串在源代码文件中`Felhasználó`表示为字节。`46 65 6c 68 61 73 7a 6e c3 a1 6c c3 b3`如果您将这个字节数组打印出来，就好像它们是在 LATIN-1 编码中一样，您将得到`FelhasznÃ¡lÃ³`.

此外，您将这些 UTF-8 编码字节作为纯字符串传递给 Qt，这似乎假设它采用 LATIN-1 编码。这意味着不是假设字节`c3 b3`( `Ã³`) 是`ó`UTF8 中的代码，而是假设`c3`是普通的`Ã`并且`b3`是`³`LATIN1 的情况。

frb 的答案是这样做的正确方法，因为通过发送一个`unicode`字符串，您已经完成了所有的解释，并且不会为 Qt 留下任何歧义。

# html - 在图像上放置图像和链接

> ID：14237068
> 
> 赞同：0
> 
> 时间：2013-01-09T14:07:41.103
> 
> 标签：html, css, positioning, css-position

我有一个图像，我想在其上放置链接，可以是文本或图像。几乎所有维基百科的内容，例如（德国及其各州的地图）：[http://en.wikipedia.org/wiki/States_of_Germany](http://en.wikipedia.org/wiki/States_of_Germany) 早在 90 年代，我会使用`map`标签在图像上创建可点击的部分。

我在 Wikipedia 上查看了地图的源代码，并注意到绝对位置的所有状态。那么有没有一种简单的方法来实现这样的事情呢？还是我必须使用例如 Photoshop 来检查绝对位置并在 CSS/HTML 中对其进行硬编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:24:07.347

正如您已经注意到的那样，维基百科使用`<div>`位于图像上方的 - 元素。您需要以一种或另一种方式为要放置在图像顶部的文本提供（绝对）坐标。

您可以尝试摆弄以获得正确的坐标或使用（纽约）图像编辑应用程序在图像中准确找到所需的坐标。

维基百科使用这样的结构

HTML：

```
<div class="container">
  <img src="myImage.png" />
  <div class="text1">Text1</div>
  <div class="text2">Text2</div>
</div> 
```

CSS：

```
.text1 {
  position:absolute;
  left:50px;
  top:100px
}

.text2 {
  position:absolute;
  left:200px;
  top:50px
} 
```

（除了他们直接将 CSS 样式放在 HTML 元素中......）

有关工作示例，请参阅[此 jsFiddle 。](http://jsfiddle.net/veger/gakmb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:12:57.417

我猜你需要一个 HTML 地图（例如[http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)）加上一些 javascript 来包含它上面的文本。

请看下面的问题，它可能会帮助你：

[HTML，jQuery：在图像映射区域上显示文本](https://stackoverflow.com/questions/9015909/html-jquery-show-text-over-area-of-image-map)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:16:55.287

如果您在提到的链接中创建类似的东西，那么您必须指出这些位置。不是吗？`absolute positioning`在这种情况下很好。

但是，如果您的方案不需要您将这些链接放在图像上的确切位置，您可以尝试这样的事情。

CSS//////////

```
div.back{
    background:url('path/to/your/image.extension');
    width:/*width of the image*/;
    height:/*height of the image*/
} 
```

这`div`与类`back`将按照你想要的方式工作。然后将链接放在里面`div`，链接将显示在该图像的顶部。

看看这个[小提琴](http://jsfiddle.net/hEZBm/)。

# java - 在以下程序中检测和处理竞争条件

> ID：14237069
> 
> 赞同：3
> 
> 时间：2013-01-09T14:07:42.503
> 
> 标签：java, multithreading, synchronization, threadpool, race-condition

我是多线程的新手，想避免下面代码中发生的竞争条件。在 release() 方法中有一行 available.add(resource)，在 remove() 方法中有一行 available.remove(resource)。所以我的问题是如何同步“资源”变量以避免这种竞争条件？

```
 package threadpool;
    import java.util.concurrent.BlockingQueue;
    import java.util.concurrent.ConcurrentHashMap;
    import java.util.concurrent.ConcurrentMap;
    import java.util.concurrent.CountDownLatch;
    import java.util.concurrent.LinkedBlockingQueue;
    import java.util.concurrent.TimeUnit;

    public class ResourcePoolImpl<R> implements ResourcePool<R> {

    private static final String CLOSED_POOL_EXCEPTION = "Pool is closed,cannot aquire resource.";

    private static final String  RELEASE_EXCEPTION = "Unaquired resource, cannot release it.";

    private volatile boolean open = false;

    private final BlockingQueue<R> available = new LinkedBlockingQueue<R>();

    private final ConcurrentMap<R, CountDownLatch> aquired = new ConcurrentHashMap<R,  CountDownLatch>();

    public R acquire() throws InterruptedException {
    if ( !open ) { throw new IllegalStateException( CLOSED_POOL_EXCEPTION ); }
    final R resource = available.take();
    if ( resource != null ) {
        aquired.put( resource, new CountDownLatch( 1 ) );
    }
    return resource;
    }

   public R acquire( final long timeout, final TimeUnit timeUnit ) throws InterruptedException {
    if ( !open ) { throw new IllegalStateException( CLOSED_POOL_EXCEPTION ); }

    final R resource = available.poll( timeout, timeUnit );
    if ( resource != null ) {
        aquired.put( resource, new CountDownLatch( 1 ) );
    }
    return resource;
    }

    public boolean add( final R resource ) 
    {
    return available.add( resource );
    } 

    public void close() throws InterruptedException {
    open = false;
    for ( final CountDownLatch latch : aquired.values() ) {
        latch.await();
    }
    }

    public void closeNow() {
    open = false;
    }

    public boolean isOpen() {
    return open;
    }

    public void open() {
    open = true;
    }

    public void release( final R resource ) 
    {
    final CountDownLatch latch = aquired.get( resource );
    if ( latch == null ) { throw new IllegalArgumentException( RELEASE_EXCEPTION ); }
    available.add( resource );
    latch.countDown();
    }

    public boolean remove( final R resource ) throws InterruptedException 
    {   

    final CountDownLatch latch = aquired.get( resource );
    if ( latch != null ) {
        latch.await();
    }
    return available.remove( resource );
    }

    public boolean removeNow( final R resource ) {
    return available.remove( resource );
    }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:20:48.903

声明一个

```
final Object mutex = new Object(); 
```

并让所有对共享集合执行读/写操作的方法在执行操作之前获取互斥锁，或根据共享数据做出决策，在同步块中执行：

```
synchronized (mutex) {
     // .. guaranteed single-threaded access here
     //   (for instance, contents of aquire() or release(); 
     //      also add() or any other collection access)
} 
```

然后，您可以使用更简单的非并发集合类，因为在互斥保护区域内，不能有任何多线程访问。

并发集合只是将它们的访问封装在它们自己的内部互斥锁中——但正如您在评论中所解释的那样，问题在于，`aquired`并且`available`可能彼此独立地更新，您绝对不希望这样做。

因此：通过为所有关键区域访问声明和使用单个互斥体来简化代码。

# javascript - 在 angularjs 工厂中使用 setInterval

> ID：14237070
> 
> 赞同：21
> 
> 时间：2013-01-09T14:07:47.473
> 
> 标签：javascript, angularjs, javascript-framework

我正在尝试 angularjs 文档中给出的代码（在这里给出：http: [//jsfiddle.net/zGqB8/](http://jsfiddle.net/zGqB8/)）它只是实现了一个时间工厂并使用 $timeout 在每秒之后更新时间对象。

```
angular.module('timeApp', [])
.factory('time', function($timeout) {
    var time = {};

    (function tick () {
        time.now = new Date().toString();
        $timeout(tick, 1000);  // how to do it using setInterval() ?
    })();

    return time;
}); 
```

我将如何使用 setInterval() 函数而不是 $timeout() 来做到这一点？我知道需要使用`scope.$apply()`来进入角度执行上下文，但是在工厂函数中如何工作呢？我的意思是，在控制器中，我们有一个范围，但我们在工厂函数中没有范围？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-09T14:58:17.267

您可以`$timeout`用作间隔。

```
var myIntervalFunction = function() {
    cancelRefresh = $timeout(function myFunction() {
        // do something
        cancelRefresh = $timeout(myIntervalFunction, 60000);
    },60000);
}; 
```

如果视图被破坏，您可以通过监听来破坏它`$destroy`：

```
$scope.$on('$destroy', function(e) {
        $timeout.cancel(cancelRefresh);
}); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-08T16:29:09.540

**更新**

Angular 在 1.2 版中实现了 $interval 功能 - [http://docs.angularjs.org/api/ng.$interval](http://docs.angularjs.org/api/ng.%24interval)

* * *

下面的旧示例，请忽略，除非您使用的是早于 1.2 的版本。

Angular 中的 setInterval 实现 -

我创建了一个名为 timeFunctions 的工厂，它公开了 $setInterval 和 $clearInterval。

请注意，每当我需要在工厂中修改范围时，我都会将其传入。我不确定这是否符合做事的“Angular 方式”，但它运作良好。

```
app.factory('timeFunctions', [

  "$timeout",

  function timeFunctions($timeout) {
    var _intervals = {}, _intervalUID = 1;

    return {

      $setInterval: function(operation, interval, $scope) {
        var _internalId = _intervalUID++;

        _intervals[ _internalId ] = $timeout(function intervalOperation(){
            operation( $scope || undefined );
            _intervals[ _internalId ] = $timeout(intervalOperation, interval);
        }, interval);

        return _internalId;
      },

      $clearInterval: function(id) {
        return $timeout.cancel( _intervals[ id ] );
      }
    }
  }
]); 
```

示例用法：

```
app.controller('myController', [

  '$scope', 'timeFunctions',

  function myController($scope, timeFunctions) {

    $scope.startFeature = function() {

      // scrollTimeout will store the unique ID for the $setInterval instance
      return $scope.scrollTimeout = timeFunctions.$setInterval(scroll, 5000, $scope);

      // Function called on interval with scope available
      function scroll($scope) {
        console.log('scroll', $scope);
        $scope.currentPage++;

      }
    },

    $scope.stopFeature = function() {
      return timeFunctions.$clearInterval( $scope.scrollTimeout );
    }

  }
]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-13T10:38:11.810

你能调用一个普通的 JavaScript 方法，然后在该方法中用 $apply 包装 Angular 代码吗？

## 例子

```
timer = setInterval('Repeater()', 50);

var Repeater = function () {
  // Get Angular scope from a known DOM element
  var scope = angular.element(document.getElementById(elem)).scope();
  scope.$apply(function () {
    scope.SomeOtherFunction();
  });
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-18T11:00:22.553

最新的候选版本 (1.2.0 rc3) 具有[间隔](https://github.com/angular/angular.js/commit/2b5ce84fca7b41fca24707e163ec6af84bc12e83)支持。查看[更新日志](https://github.com/angular/angular.js/blob/master/CHANGELOG.md)

# windows - 提取的 .exe 设置的参数

> ID：14237073
> 
> 赞同：0
> 
> 时间：2013-01-09T14:07:59.090
> 
> 标签：windows, command-line, batch-file, installation

我有一个`SampleApp.exe`. 当我双击它时，它会将自身提取到一个文件夹中（假设是文件夹名称`SampleAppFolder`，是的，它确实要求提供文件夹路径）并从该文件夹中启动一个 Setup.exe（`Setup.exe`在 中提取`SampleAppFolder`）。我想以`SampleApp.exe`静音模式运行。所以我创建了一个批处理文件

```
"D:\Softwares\SampleApp.exe" /S /V" /quiet" 
```

一切都在 SampleAppFolder 中静默提取，但是当它从文件夹中触发 Setup.exe 时，我可以看到一个窗口。但我什至想在静默模式下运行这个 .exe。所以我想我也需要为此 setup.exe 传递一些参数。但我不确定如何。请问有什么指点吗？

在更多的事情上，我将上述查询更改为

```
"D:\Softwares\SampleApp.exe" /extract"C:\Users\MyName\Desktop\TestFiles123" /S /V" /quiet" 
```

我以为提取路径会改变，但什么也没发生，文件又被提取到默认位置。任何指针？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:54:29.387

尝试用 7-zip 打开它。它可以从大多数安装程序中提取文件，您可以选择在哪里提取它们（如果您只是在寻找几个，则可以选择提取它们的位置）。

[7-Zip 网站链接](http://www.7-zip.org/ "7-Zip 网站")

# android - 使用 Intent 通过相机拍照并将其保存在 android 的数据库中

> ID：14237076
> 
> 赞同：0
> 
> 时间：2013-01-09T14:08:20.690
> 
> 标签：android

我创建了一个启动相机意图拍照的活动。它运行正常并拍照，但问题是我无法将其存储在数据库中。任何建议或一些代码。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:20:28.960

用它来拍照。

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File file = new File(Environment.getExternalStorageDirectory(),"image.jpg");
        Uri inputFileUri = Uri.fromFile(file);
        System.out.println("outputFileUri in camera===>"+inputFileUri);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, inputFileUri);
        intent.putExtra("return-data", true);
        startActivityForResult(intent, 1); 
```

并在活动结果中使用其 uri。

```
 public void onActivityResult(int requestCode, int resultCode, Intent data)
     {
          Uri outputFileUri=data.getData();
          //here by using uri you can also saves image to sd card.
     } 
```

# web2py - web2py href 和 URL，给出错误的链接

> ID：14237077
> 
> 赞同：1
> 
> 时间：2013-01-09T14:08:25.607
> 
> 标签：web2py

在视图（对于功能“自动测试”）我有以下代码：

```
{{link = URL(c ='static', f = 'files', args = [result[key].file_name], host = config.HOST)}}
link = {{=link}}
|
<a href="{{link}}"> href_link </a> 
```

这是我在 html 页面中得到的：

```
link = https://example.com/dwt/static/files/pdf.pdf | href_link 
```

到目前为止，一切都很好。但在 href_link 后面有：

`https://example.com/dwt/test/autotest`

为什么将静态/文件/pdf.pdf 替换为测试/自动测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:02:10.500

应该是`{{=link}}`，不是`{{link}}`。后者实际上并没有向页面写入任何内容，因此 href 最终为空，因此浏览器默认为当前页面。

# javascript - 在 Node.JS 中输出用户时区时间戳的最佳方式

> ID：14237080
> 
> 赞同：2
> 
> 时间：2013-01-09T14:08:30.800
> 
> 标签：javascript, node.js, datetime, timezone, momentjs

我的应用正在记录某些用户事件以在 UI 中显示。时间戳作为日期存储在 Mongo 中，成为 JS Date 对象，时区信息与服务器的时区相关。

我正在使用[moment.js](http://momentjs.com/docs/)来格式化日期，但是由于我的用户在澳大利亚并且我的应用程序托管在[Heroku](http://www.heroku.com)上（服务器时区是 UTC），moment.js 有用输出的“本地”时间不是我的用户想看。

Moment.js 允许您在 UTC 和“本地”时间（在服务器上）之间切换，但似乎不允许您在不同时区的上下文中输出。

（更改服务器的时区并不能解决根本问题，对我的一些用户来说也是错误的。）

我尝试使用[节点时间库](https://github.com/TooTallNate/node-time)来更改日期的时区，如果我随后使用 Date.toString() 简单地输出时间戳，这确实有效，但如果日期由 Moment.js 包装，它会恢复为服务器的时区。

我可以通过计算用户本地时区和服务器本地时区之间的差异并在 Moment.js 格式化之前修改日期来解决解决方案，但我希望有（a）更优雅的解决方案，或者（b ) 一个很好的图书馆，可以做到这一点。

我也可以以 UTC 格式输出日期并让客户端库重新格式化它们，但我更希望有一个服务器端解决方案。

有没有人知道一个很好的解决方案，或者一个为 Node.JS 应用程序填补这个空白的库？对此是否有既定的最佳实践？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:33:52.820

我最终弄清楚了如何同时使用[node-time](https://github.com/TooTallNate/node-time)和[moment.js](http://momentjs.com)库来为此创建一个相对优雅的解决方案。

我创建了一个像这样的模块**moment_tz.js**：

```
var moment = require('moment'),
    time = require('time');

exports = module.exports = function(t,z) {
    var tz = new time.Date(0, z);
    return moment(t).add('minutes', t.getTimezoneOffset() - tz.getTimezoneOffset());
} 
```

它返回一个`moment`已使用两个时区之间的差异（以分钟为单位）进行更新的对象。

以下是我如何使用它来输出悉尼的当前时间：

```
moment_tz(new Date(), 'Australia/Sydney').format('Do MMM \'YY - h:mm:ss a') 
```

如果有人有更好的解决方案，请告诉我！

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-16T07:35:44.270

我知道它是一个旧帖子，但这可能会帮助 MomentJs 现在具有时区功能的人。

[http://momentjs.com/timezone/](http://momentjs.com/timezone/)

```
var time = moment.tz(new Date(), timezone_string) /* timezone_string = "Australia/Sydney" */
var timestring = time.format('D/MM/YYYY hh:mm A') 
```

希望这可以帮助。

# cocoa - 如何使用 Cocoa WebView 处理 HTML5 Web 通知？

> ID：14237086
> 
> 赞同：3
> 
> 时间：2013-01-09T14:08:53.167
> 
> 标签：cocoa, webkit, nsusernotification

我使用 Cocoa WebView 来显示发送 HTML5 Web 通知的网站。使用 Safari 浏览此页面时，我直接在 Mac OS X Mountain Lion 的通知中心收到用户通知。

如何通过实现自己的 WebView 来实现相同的行为？我没有看到任何与此功能相关的委托方法。

**编辑：**如果这可以帮助某人：

[https://github.com/jnordberg/irccloudapp/blob/master/NotificationProvider.m](https://github.com/jnordberg/irccloudapp/blob/master/NotificationProvider.m)

感谢 Johan Nordberg 分享这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:29:09.863

目前 OS X 上的 WebKit 中没有用于 Web 通知的公共 API。您应该[向 Apple 提交增强请求，](http://bugreport.apple.com/)要求公开该功能。但是，由于 WebKit 是开源的，您可以轻松地在 WebView 上找到与显示 Web 通知相关的[私有接口。](http://trac.webkit.org/browser/trunk/Source/WebKit/mac/WebView/WebViewPrivate.h?rev=140260#L721)与所有私有接口一样，它如有更改，恕不另行通知，并且不得在 App Store 的应用程序中使用。

# ruby-on-rails - 我应该如何使这个路由成为 RESTful？

> ID：14237094
> 
> 赞同：0
> 
> 时间：2013-01-09T14:09:54.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

出于 RESTful 的目的，我的路由是这样的：

**路线.rb**

```
match 'shops/:sort/:genre/:area', :to => 'shops#index' 
```

但是如果流派是空的呢？不会重定向到`example.com/shops/newest_first//california`?

我该如何解决这种路由和参数问题？谁能给我一个很好的例子？

**看法**

```
<%= form_tag shops_path, :method => :get do %>
    <%= select_tag :sort, options_from_collection_for_select(Sort.all, 'id', 'name', params[:sort]), :prompt => "Newest first" %>
    <%= select_tag :genre, options_from_collection_for_select(Genre.all, 'id', 'name', params[:genre]), :prompt => "all" %>
    <%= select_tag :area, options_from_collection_for_select(Area.all, 'id', 'name', params[:area]), :prompt => "all" %>
<% end %> 
```

**另一种观点**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:28:55.750

虽然 restful 路由是最直观和最传统的，但它并不总是符合我们的需求。

在您的情况下，我建议使用查询参数而不是严格的宁静路线。

`example.com/shops`将收到 3 个查询参数：和`sort`，因此 URL 可能看起来像`genre``area``example.com/shops?area=california&sort=newest_first`

在您的控制器的索引操作中，您可以通过以下方式查询这些参数是否存在：

```
def index
  if !params[:sort].blank?
    @shops = @shops.sort(params[:sort])
  end
  if !params[:area].blank?
    @shops = @shops.where(:area => params[:area])
  end
  .
  .
  .
end 
```

通过这种方式，您可以很好地防止控制器中缺少参数，但您仍然可以提供用户请求的任何数据。

附带说明：请务必检查`params`您使用的哈希是否仅包含您愿意接受的值。

# android - Android 中的图片库

> ID：14237097
> 
> 赞同：0
> 
> 时间：2013-01-09T14:10:01.073
> 
> 标签：android, image-gallery

我正在开发应用程序，我有以下任务。

1.  拍照（完成）
2.  获取详细信息（完成）
3.  保存在 SD 卡中（完成）
4.  保存所有详细信息和文件名（我保存在 SD 卡中的文件名）保存在数据库中（完成）
5.  如果没有可用的图库，则用户可以制作图库并将该图片保存在该图库中。
6.  如果已经存在画廊，用户可以获取新画廊，也可以将其保存在任何现有画廊中。

我已经完成了前 4 个任务，现在我希望该用户可以将图片保存在图库中。我不知道如何创建画廊以及如何保存它们。我是否必须将画廊保存在 SD 卡或数据库中...

# html - Dropdown UL 在 IE 中变得透明

> ID：14237098
> 
> 赞同：0
> 
> 时间：2013-01-09T14:10:05.003
> 
> 标签：html, css, internet-explorer, drop-down-menu, transparent

我制作了一个非常标准的 CSS 下拉菜单，但在 IE 中发生了一些奇怪的事情。

正如您在屏幕截图中看到的那样，它只显示阴影，元素内的所有内容都是透明的。我不在网站上的任何地方使用透明度，并且该元素在其他浏览器中显示正确。

![IE中的透明下拉菜单](../Images/d52295e504fb99327805d6fa37e0ac5a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:22:44.847

我想到了。当你给一个元素一个微软渐变过滤器时，它会隐藏 div 之外的子元素。当我删除那段代码时，一切正常。

附带说明一下，它还可以防止边界半径在 IE 中工作

问题代码：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#fafafa',GradientType=0 ); /* IE6-9 */ 
```

# vb6 - 做while条件vb6

> ID：14237099
> 
> 赞同：3
> 
> 时间：2013-01-09T14:10:04.613
> 
> 标签：vb6, while-loop

我有一个小的 vb6 程序：

```
Private Sub Form_Load()
    Dim varTemp As Variant
    Dim string1 As String

    Dim x As Integer
    x = 0

    dialog.Filter = "toate fisierele(*.*) | *.*"
    dialog.Flags = cdlOFNAllowMultiselect Or cdlOFNLongNames Or cdlOFNExplorer

    'open the window to select files
    dialog.ShowOpen

    varTemp = Split(dialog.FileName, vbNullChar)

    Do While (varTemp(x) <> "")

    string1 = varTemp(x)
    x = x + 1

    Loop

    Unload Form1
    End

End Sub 
```

我希望 Do While 循环直到它到达 varTemp 的末尾。但是，当我从对话框中选择两个文件并用 x = 3 命中“Do While”时，我得到“运行时错误'9'：下标超出范围”。“Do While”循环必须在什么条件下循环直到 varTemp 结束？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:15:22.513

您可以改用它：

```
Do While x <= UBound(varTemp) 
```

由于`varTemp`将是一个数组，因此它将循环直到您点击数组中的最后一个元素。

如果用户取消选择并且`varTemp`为空，您可以在循环之前检查空字符串，如下所示：

```
If varTemp <> vbNullString Then 
    Do While x <= UBound(varTemp)

        string1 = varTemp(x)
        x = x + 1

    Loop
End If 
```

# iphone - 当应用程序进入前台时，MPMoviePlayerController 缓冲时间丢失

> ID：14237105
> 
> 赞同：0
> 
> 时间：2013-01-09T14:10:23.203
> 
> 标签：iphone, ios, objective-c, mpmovieplayercontroller

我正在缓冲 m3u8 格式的视频，我将此 url 设置为 MPMovieplayerController 的 contenturl

我正在运行一个每 0.3 秒运行一次的后台线程，我用它来检查缓冲和播放的持续时间并相应地执行检查

```
if(!mPlaybackProgressTimer)
    mPlaybackProgressTimer = [[NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(didPlayback:) userInfo:nil repeats:YES] retain]; 
```

在 didplayback 中

..

```
- (void)didPlayback:(id)sender {

    NSTimeInterval totalDuration = [mVideoPlayerController duration];

    NSTimeInterval playbackTime = [mVideoPlayerController currentPlaybackTime];
    float playbackProgress = 0.0;

   if(playbackTime > 0.0 && totalDuration > 0.0)
       playbackProgress = playbackTime / totalDuration;

   mPercentWatched = round(100 * playbackProgress);

   NSTimeInterval bufferedTime = [mVideoPlayerController playableDuration];
   float bufferProgress = 0.0;

   if(playbackTime > 0.0 && totalDuration > 0.0)
       bufferProgress = bufferedTime / totalDuration;

   [self setProgress:bufferProgress forProgressType:eProgressTypeBuffer];
   [self setProgress:playbackProgress forProgressType:eProgressTypePlay];
} 
```

问题是，如果我按下主页按钮然后回到应用程序，*缓冲*时间将丢失，即数据必须再次缓冲..有没有办法克服这个问题..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:26:45.250

这是设计使然，无论如何都不能改变。

# php - PHP readdir() 错误 500 无限循环

> ID：14237107
> 
> 赞同：0
> 
> 时间：2013-01-09T14:10:29.177
> 
> 标签：php, phpmyadmin, php-ini

我有一个可以在我付费的服务器上运行的脚本。但是，当我尝试在 localhost 下安装相同的代码时，我会在无限循环中收到此错误。

> PHP 警告：readdir() 期望参数 1 是资源。

我环顾四周，有人说这是文件夹访问，但它在远程服务器上工作，而不是在读写访问为 100% 的本地主机上工作。

这可能是由 php.ini 中的设置触发的吗？

我的意思是，除此之外，我看不到任何其他会触发这种情况的东西。

这是错误指向的代码。但我不认为是代码，因为它可以在一台服务器上运行，但不能在另一台服务器上运行。更正我现在已经在 hostgator 上加载了这段代码，它在我的安全注册服务器上也可以正常工作。两者都工作正常。只有 localhost 收到此错误。

```
 $upgraded_folder_path = $CFG['site']['project_path'] . "languages/" . $CFG['lang']['default'] . "/" . strtolower($value) . "/" . $upgraded_folder_name;
            if (!is_dir($upgraded_folder_path) && !($handle = opendir($upgraded_folder_path)))
                {
                while (false !== ($file = readdir($handle)))
                    {
                    if ($file == "." || $file == "..")
                        {
                        continue;
                        }
                    $file_name = $upgraded_folder_path . "/" . $file;
                    if (is_file($file_name))
                        {
                        require_once($file_name);
                        }
                    }
                closedir($handle);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:13:04.863

您`readdir()`仅在它是**无效**资源时调用，即 - 当它无法打开目录时：

```
 if (!is_dir($upgraded_folder_path) && !($handle = opendir($upgraded_folder_path))) 
```

您只能读取现有目录*和*可以打开的目录。如果您`!`从该语句中的两个条件中`if`删除，它应该可以正常工作。尽管如此，您还需要确保该目录存在*并且*您的用户有权从中读取。

# php - 使用 XAMPP 在 MAC OS 10.6 上设置 php pecl-svn 的任何简单方法？

> ID：14237108
> 
> 赞同：0
> 
> 时间：2013-01-09T14:10:29.307
> 
> 标签：php, svn, xampp, osx-snow-leopard, pecl

我正在尝试使用 php 中的 svn 并尝试过这个到目前为止没有任何成功:(

（尝试安装[pecl svn](http://pecl.php.net/package/svn)扩展）

```
sudo /Applications/XAMPP/xamppfiles/bin/pecl install svn 
```

我为以下选择自动检测：

```
Please provide the prefix of Subversion installation [autodetect] : 
Please provide the prefix of the APR installation used with Subversion [autodetect] : 
```

该命令的最后输出是：

```
Build process completed successfully
Installing '/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/svn.so'
install ok: channel://pecl.php.net/svn-1.0.2
Extension svn enabled in php.ini 
```

服务器重新启动并测试一个简单的功能给我这个错误：

```
Fatal error: Call to undefined function svn_log() 
```

phpinfo 也没有列出 svn 扩展名，我在 apache 错误日志中看到以下内容：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/svn.so' - dlopen(/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/svn.so, 9): no suitable image found.  Did find:\n\t/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/svn.so: mach-o, but wrong architecture in Unknown on line 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:38:09.043

谷歌搜索后，我[找到](http://benbuckman.net/tech/12/01/how-install-xhprof-osx-snow-leopard-or-lion-and-xampp)了解决这个问题的方法：

1) 下载最新的 svn pecl 扩展，解压到 svn-1.0.1 和`cd`svn-1.0.1

2) 执行命令`sudo phpize`

2）执行：`sudo MACOSX_DEPLOYMENT_TARGET=10.6 CFLAGS='-O3 -fno-common -arch i386 -arch x86_64' LDFLAGS='-O3 -arch i386 -arch x86_64' CXXFLAGS='-O3 -fno-common -arch i386 -arch x86_64' ./configure --with-php-config=/Applications/XAMPP/xamppfiles/bin/php-config-5.3.1`

3)`sudo make`

4)`sudo make install`

```
Installing shared extensions:     /Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/ 
```

完毕 ！现在看来 svn 扩展程序已和平加载

但是我现在仍然知道为什么 pecl install 命令无法编译它

# rfid - 计算到 RFID 标签的距离？

> ID：14237110
> 
> 赞同：18
> 
> 时间：2013-01-09T14:10:33.860
> 
> 标签：rfid

使用标签阅读器读取长距离无源 RFID 标签时，是否可以计算/估计其物理距离？例如，确定书架中书籍的顺序，或判断一个物体是近还是远。

如果答案是“否 - 不符合标准”，是否可以构建具有此功能的阅读器？（我想实现这一点的唯一方法是非常精确地测量呼叫和响应之间的时间）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-30T14:24:35.390

这是可能的，但最终精度在多大程度上取决于很多因素：阅读器和标签的性能、软件的质量以及您愿意为此类软件投资的资源（包括时间和研发人员）。

主要有两种方法可以实现：第一种依赖于获取RSSI，这基本上是信号强度。使用该指标的主要困难在于，信号强度取决于许多可能影响它的因素，例如信号需要通过木柜或墙壁时的反射、标签的质量等。

第二个是使用接收到查询响应的时间（标签之间的到达时间差）。鉴于您知道光束的速度，您可以在给定非常精确的计时器的情况下估计距离。这里的问题是这也受到很多因素的影响：标签需要完成一个周期的平均时间（您应该知道，并且对于使用的每个标签都应该是相同的），未精确构建的计时器精度出于这些目的。

自然地，应该使用两者的组合来实现最大精度，并且依赖这些算法通过三角测量和三边测量提供 RTLS（实时定位系统）应用程序的公司实际上都在使用两者。

有关更多信息，您可以查看：RTLS、RSSI、TDOA、三边测量（和多边测量）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T21:27:04.913

有可能的。据我了解以下公司（我没有在那里工作，我只是碰巧认识一年前在那里工作的人）：

[http://www.lambda4.com/](http://www.lambda4.com/)

正在研究这样的技术。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T21:18:12.260

如果您只有一个阅读器，这可能是不可能的；但是，如果您有多个接收器并且视线相当清晰，则可以通过查看信号强度来“估计”距离。但这并不是微不足道的，因为天线设计的原因是 RFID 标签辐射的功率不是各向同性的（即在所有方向上不均匀）。如果你有三个接收器和一个统一的射频源，你可以解决距离问题，但是当你加入天线方向图和信号路径衰减和多方等其他因素时，它变得非常困难——尤其是当有多个设备时附近。

这至少部分是因为 RFID 没有设计有有助于优化定位的输出模式，例如频率啁啾、短功率突发或其他调制特征，这些特征允许估计信号从源到接收器的飞行时间和背部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-30T05:36:45.717

查找到 RFID 标签的距离的一般公式是 Ploss = 20⋅log[ (4 π ⋅ d) /λ]

在 UHF RFID 的情况下，从阅读器到无源标签的间隙或距离的计算公式为 Pgap = 22.6(dB)+ Patt，其中 22.6dB 是近场功率（λ =c/f ≈ 35cm），其中f 是频率操作，Patt 是**功率衰减器的幅度**

```
 22.6+Patt = 20⋅log[(4 π ⋅ d)/λ], 
```

在自由空间中，通过使用上面的公式，可以得到到 RFID 标签的近似距离。

# java - .Net 等效于 Java 类型的 Class<>？

> ID：14237113
> 
> 赞同：15
> 
> 时间：2013-01-09T14:10:49.580
> 
> 标签：java, .net, generics, casting

我是一个 .NET 人，所以让我首先声明我对一些 Java 概念的理解——如果我错了，请纠正我。

Java 泛型支持*有界通配符*的概念：

```
class GenericClass< ? extends IInterface> { ... } 
```

...这类似于 .NET`where`限制：

```
class GenericClass<T> where T: IInterface { ... } 
```

Java的[`Class`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)类描述了一种类型，*大致*相当于.NET[`Type`](http://msdn.microsoft.com/en-us/library/system.type%28v=vs.100%29.aspx)类

到现在为止还挺好。但是我找不到与 Java 通用类型足够接近的等价物，`Class<T>`其中 T 是有界通配符。这基本上对 表示的类型施加了限制`Class`。

让我举一个Java的例子。

```
String custSortclassName = GetClassName(); //only known at runtime, 
                                           // e.g. it can come from a config file
Class<? extends IExternalSort> customClass 
    = Class.forName("MyExternalSort")
        .asSubclass(IExternalSort.class);  //this checks for correctness

IExternalSort impl = customClass.newInstance(); //look ma', no casting! 
```

我可以在 .NET 中获得的最接近的是这样的：

```
String custSortclassName = GetClassName(); //only known at runtime, 
                                           // e.g. it can come from a config file

Assembly assy = GetAssembly();             //unimportant 

Type customClass = assy.GetType(custSortclassName);
if(!customClass.IsSubclassOf(typeof(IExternalSort))){
    throw new InvalidOperationException(...);
}
IExternalSort impl = (IExternalSort)Activator.CreateInstance(customClass); 
```

Java 版本对我来说看起来更干净。有没有办法改进 .NET 对应物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T19:57:33.397

使用扩展方法和自定义包装类[`System.Type`](http://msdn.microsoft.com/en-us/library/system.type.aspx)，您可以非常接近 Java 语法。

***注意：*** [`Type.IsSubclassOf`](http://msdn.microsoft.com/en-us/library/system.type.issubclassof.aspx)不能用于测试类型是否实现接口 - 请参阅 MSDN 上的链接文档。可以[`Type.IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)改用 - 请参阅下面的代码。

```
using System;

class Type<T>
{
    readonly Type type;

    public Type(Type type)
    {
        // Check for the subtyping relation
        if (!typeof(T).IsAssignableFrom(type))
            throw new ArgumentException("The passed type must be a subtype of " + typeof(T).Name, "type");

        this.type = type;
    }

    public Type UnderlyingType
    {
        get { return this.type; }
    }
}

static class TypeExtensions
{
    public static Type<T> AsSubclass<T>(this System.Type type)
    {
        return new Type<T>(type);
    }
}

// This class can be expanded if needed
static class TypeWrapperExtensions
{
    public static T CreateInstance<T>(this Type<T> type)
    {
        return (T)Activator.CreateInstance(type.UnderlyingType);
    }
} 
```

# 使用界面变化的进一步改进

*（仅应在评估性能后在生产代码中使用。可以通过使用（并发！）缓存字典来改进`ConcurrentDictionary<System.Type, IType<object>`）*

使用[`Covariant type parameters`](http://msdn.microsoft.com/en-us/library/dd233059.aspx)C# 4.0 引入的一项功能和实现的附加类型`interface IType<out T>`，`Type<T>`可以使以下操作成为可能：

```
// IExternalSortExtended is a fictional interface derived from IExternalSort
IType<IExternalSortExtended> extendedSort = ...
IType<IExternalSort> externalSort = extendedSort; // No casting here, too. 
```

甚至可以这样做：

```
using System;

interface IType<out T>
{
    Type UnderlyingType { get; }
}

static class TypeExtensions
{
    private class Type<T> : IType<T>
    {
        public Type UnderlyingType
        {
            get { return typeof(T); }
        }
    }

    public static IType<T> AsSubclass<T>(this System.Type type)
    {
        return (IType<T>)Activator.CreateInstance(
           typeof(Type<>).MakeGenericType(type)
        );
    }
}

static class TypeWrapperExtensions
{
    public static T CreateInstance<T>(this IType<T> type)
    {
        return (T)Activator.CreateInstance(type.UnderlyingType);
    }
} 
```

这样就可以（明确地）在不相关的接口之间进行转换`InterfaceA`，`InterfaceB`例如：

```
var x = typeof(ConcreteAB).AsSubclass<InterfaceA>();
var y = (IType<InterfaceB>)x; 
```

但这有点违背了练习的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:12:10.857

C# 泛型是声明点变化，类型参数的变化是固定的。

Java 是使用点变体，所以一旦我们有了声明`List<E>`，我们可以通过 3 种方式使用它

```
List<Number>           // invariant, read/write
List<+Number>          // covariant, read only
List<-NUmber>          // contravariant, write only 
```

这两种方法各有利弊。使用站点方法显然更强大，尽管它以对程序员来说太难而闻名。我认为它实际上很容易掌握

```
List<Integer> integers = ...;
List<+Number> numbers = integers;  // covariant 
```

不幸的是，Java 发明了一种绝对可怕的语法，

```
List<? extends Number>    //  i.e. List<+Number> 
```

一旦您的代码具有其中的几个，它就会变得非常难看。你必须学会​​克服它。

现在，在声明站点阵营中，我们如何在同一个类上实现 3 个方差？通过拥有更多类型 - a `ReadOnlyList<out E>`、 a`WriteOnlyList<in E>`和 a`List<E>`扩展两者。这还不错，有人可能会说这是一个更好的设计。但是如果有更多的类型参数，它可能会变得丑陋。如果一个类的设计者没有预料到它会被多变地使用，那么类的用户就没有办法多变地使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:19:58.917

您可以使用“as”运算符获得一个更漂亮的版本：

```
String custSortclassName = GetClassName();
Assembly assy = GetAssembly();
Type customClass = assy.GetType(custSortclassName);

IExternalSort impl = Activator.CreateInstance(customClass) as IExternalSort;
if(impl==null) throw new InvalidOperationException(...); 
```

但是在这里我在检查它的类型之前创建实例，这对你来说可能是个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T03:01:29.397

您可以尝试编写如下扩展方法：

```
 static class TypeExtension
    {
        public static I NewInstanceOf<I>(this Type t) 
            where  I: class 
        {
            I instance = Activator.CreateInstance(t) as I;
            if (instance == null)
                throw new InvalidOperationException();
            return instance;
        }
    } 
```

然后可以通过以下方式使用它：

```
String custSortclassName = GetClassName(); //only known at runtime, 
                                           // e.g. it can come from a config file

Assembly assy = GetAssembly();
Type customClass = assy.GetType(custSortclassName);            

IExternalSort impl = customClass.NewInstanceOf<IExternalSort>(); 
```

# php - 在 DomXML 和 PHP 中按属性值获取节点

> ID：14237114
> 
> 赞同：0
> 
> 时间：2013-01-09T14:10:51.207
> 
> 标签：php, xml

我正在尝试选择一个特定节点以稍后编辑其内容和属性，但我无法选择一个`notice`节点（请参阅下面的 PHP 代码）。

**XML 文档**

```
<?xml version="1.0" encoding="UTF-8"?>
<notices lastID="0001">
    <!--
    <notice id="0000" endDate="31-12-2025">
        Content of the notice.
    </notice>
    -->
    <notice id="0001" endDate="13-01-2013" active="1">
        One amazing notice.
    </notice>

</notices> 
```

该`$id`值为“0001”（*字符串*）。

**PHP**

```
$document = new DOMDocument;
$document = dom_import_simplexml($this->xml);

$notices= $document->getElementsByTagName('notice');
#var_dump($notices);

foreach($notices as $element)
{
    if($element->getAttribute('id') == $id)
    {
        $notice = $element;
        var_dump($notice); //Returns absolutely nothing (I guess the if returns false).
    }
}

$notice->removeAttribute("endDate");
$notice->setAttribute("endDate",$endDate); 
```

每次我落入`if`声明中，我的`$notice`回报都没有。
我尝试使用 xpath 查询（`//notice[@id="{$id}"]`）没有任何成功。

澄清一下，我的问题`$element->getAttribute('id')`似乎不起作用。

* * *

我也尝试过**SimpleXML**：

**PHP**

```
$document = new DOMDocument;
$document = simplexml_import_dom($this->xml);

$notice = "";

foreach($document->notices->children() as $element)
{
    $attributes = $element->attributes();
    if($attributes['id'] == $id)
    {
        $notice= $element;
        var_dump($notice);
    }
}
$avis->removeAttribute("endDate");
$avis->setAttribute("endDate",$endDate); 
```

SimpleXML 给了我以下信息：`Node no longer exists`在下面一行：

`foreach($document->notices->children() as $element)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:22:33.400

我终于明白了。

**PHP**

```
$document = simplexml_import_dom($this->xml);
$notice = "";

$xpathResults = $document->xpath('//notice');

foreach($xpathResults as $element)
{
    $elementID = $element->id[0];
    $domXML = dom_import_simplexml($element);

    if((string) $noticeID == $id)
    {
        $notice = $domXML;

    }
} 
```

# java - Eclipse“Android设备选择器” - 目标列中所有设备前面的红十字

> ID：14237115
> 
> 赞同：5
> 
> 时间：2013-01-09T14:10:54.597
> 
> 标签：java, android

当我在加载**android 设备选择器**时运行我的 android 开发项目（使用 eclipse）时，它会显示我正在运行的模拟器和设备，后面跟着一个红十字，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/a2ce0548f0ab47f2411741cf9fd72fc7.png)

但是当我选择设备并运行时，它会安装它并正常运行。

在清单文件中，我包含以下内容。

```
<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="15" /> 
```

只是为了测试，我创建了另一个新的测试应用程序项目，并在创建新项目时选择了具有相同值的**minSdkVersion**和**targetSdkVersion 。**所以在清单文件中两者都是相同的。

```
<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="15" /> 
```

但问题是当我运行新的测试应用程序时，它会以正确的方式显示设备和正在运行的模拟器，并带有绿色勾号，如下所示。它还显示了“**启动新的 Android 虚拟设备**”部分下可用的设备列表。对此有点困惑，并试图解决这个问题。以前有没有人经历过这种情况。感谢任何帮助完成这项工作。提前致谢..！！！

![在此处输入图像描述](../Images/d250796c56c7400a97ce06e57a21fbc2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:14:33.807

以相同的顺序尝试这些并更新结果：

1.  运行`adb kill-server`并`adb start-server`查看是否可以修复它。
2.  让 Eclipse 运行您的模拟器，而不是手动运行它。
3.  使用旧版本的 SDK 重新创建您的 AVD 并查看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:58:44.100

1.  尝试重新启动eclipse，有时eclipse在加载正确的libs目录时会出现问题
2.  检查`project.properties`目标是配置的文件，它应该是

> 安卓15`

也尝试从 android 菜单修复项目属性

# c# - 在 #if #endif 指令之间切换

> ID：14237120
> 
> 赞同：1
> 
> 时间：2013-01-09T14:11:01.290
> 
> 标签：c#, visual-studio, silverlight, plugins, resharper

我有一个指令#if Silverlight，该指令中的源代码仅在类的引用（链接）中起作用。那些在真正的课堂上，源代码看起来是灰色的。

是否存在一种在程序集类之间热切换的方法（重新锐化或插件）？现在，我需要关闭课程并从另一个位置重新打开它，这很不方便

![在此处输入图像描述](../Images/27bb209b6ceff3653e4eef89f2a02b3d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:45:52.787

像调试和发布一样，您可以制作（复制）您自己的配置。在每个配置中，您都可以定义自定义指令。
只需定义您自己的指令？
然后很容易在配置之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:25:23.597

没有直接的方法；正如您所说，您需要关闭课程并打开链接的课程。

# perl - 在 MediaWiki API 中使用带有反向链接的最新更改

> ID：14237122
> 
> 赞同：1
> 
> 时间：2013-01-09T14:11:16.297
> 
> 标签：perl, mediawiki, mediawiki-api

我正在使用[`backlinks`](http://www.mediawiki.org/wiki/API%3aBacklinks)API 查询获取页面列表，但我只想要在特定时间段内编辑过的页面。我试图通过使用来做到这一点[`recentchanges`](http://www.mediawiki.org/wiki/API%3aRecentchanges)，但正如您将在代码中看到的那样，我没有得到我想要的。

这是我正在使用的代码：

```
my $redir = $medWik->list ( {
    action => 'query',
    list => 'backlinks ', #| recentchanges', #here it cuts everything
    #list => 'recentchanges', # here it froze ther program after 1 loop
    bltitle => $articletitle,
    blredirect, 
    bllimit=> 'max',
    blfilterredir => 'redirects', 
    list => recentchanges, # here it isnt cutting anything.
    rcstart => $StartDate, #previously defined
    rcend => $EndDate, #previously defined
    rcdir => 'newer',
    rctype => 'edit | new | log', 
} ) 
```

有人对如何获得我想要的结果有任何想法吗？

版本：

*   媒体维基 1.17.0
*   PHP 5.3.5 (apache2handler)
*   MySQL 5.5.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:33:31.897

我修复了它，我使用了 2 种方法而不是 1 种方法，通过反向链接我得到了页面名称，并且我用这些名称搜索以获得日期，`for`然后`if`我得到了我想要的页面。

# xpages - XPages SSJS 将选项添加到组合

> ID：14237123
> 
> 赞同：0
> 
> 时间：2013-01-09T14:11:19.340
> 
> 标签：xpages, xpages-ssjs

在 SSJS 中，我在视图中循环浏览文档，我想为每个文档的隐藏组合添加一个新选项，一旦完成，然后显示该隐藏组合。

我尝试使用 value|string 构建一个数组并将其添加到 中`getComponent("apm").setValue(myArray)`，但没有运气，我如何抓住组合并使其可见，因为`dojo.byId("#{id:apm}").setRendered(true);`给出了关于找不到 dojo 的错误，所以我需要包含一些东西吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:33:41.247

*   将您的数组添加到 viewScope var。
*   在您的组合中，添加一个公式值并将其指向 viewScope。
*   构建阵列后，请确保刷新组合。您可以根据 viewScope var 是否存在来设置渲染属性。

# iphone - UITabBarController 从标签中删除控制器更多

> ID：14237126
> 
> 赞同：0
> 
> 时间：2013-01-09T14:11:34.843
> 
> 标签：iphone, ios, objective-c

我有 6 个选项卡，我需要从选项卡“更多”中删除一些控制器 ![在此处输入图像描述](../Images/e7d88b5f91f2859e7ad869ff66ae4a8e.png)

当我在“更多”选项卡上选择一些控制器时`NSLog navigationConroller.viewControllers`，`UINavigationController`有空`UIViewController`

```
NSMutableArray *controllers = (NSMutableArray *) delegate.tabBarController.viewControllers;
    for (UINavigationController *item in controllers) {

        NSLog(@"show %@",item.viewControllers);
    } 
```

![在此处输入图像描述](../Images/f6f2dafce3bca7a65260281c7e2aa3d9.png)

如果我删除`UIViewController`我在“更多”选项卡上选择的选项卡，我有黑屏

![在此处输入图像描述](../Images/320c4e88f798ddf1d89515c613ac90bb.png)

# java - PostgreSQL 自定义类型 + Hibernate 映射

> ID：14237130
> 
> 赞同：4
> 
> 时间：2013-01-09T14:11:43.220
> 
> 标签：java, hibernate, postgresql, mapping

我正在使用 PostgreSQL (9.1) 和 Hibernate (4.1.4)。我想将我的自定义 PostgreSQL 类型映射到 Hibernate 中的对象。

我在 PostgreSQL 中创建了这样的类型：

```
create type nill_int as (value int8, nill varchar(100)); 
```

现在我想在 Hibernate 上映射这种类型：

```
package my;

import java.io.Serializable;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import org.apache.commons.lang.ObjectUtils;
import org.hibernate.HibernateException;
import org.hibernate.engine.spi.SessionImplementor;
import org.hibernate.type.IntegerType;
import org.hibernate.type.StringType;
import org.hibernate.type.Type;
import org.hibernate.usertype.CompositeUserType;

public class PGNillableIntegerType implements CompositeUserType {

    @Override
    public String[] getPropertyNames() {
        return new String[] {"value","nill"};
    }

    @Override
    public Type[] getPropertyTypes() {
        return new Type[] {IntegerType.INSTANCE, StringType.INSTANCE};
    }

    @Override
    public Object getPropertyValue(Object component, int property)
            throws HibernateException {
        if( component == null ) {
            return null;
        }

        final NillableInteger nillable = (NillableInteger)component;
        switch (property) {
            case 0: {
                return nillable.getValue();
            }
            case 1: {
                return nillable.getNill();
            }
            default: {
                throw new HibernateException("Invalid property index [" + property + "]");
            }
        }
    }

    @Override
    public void setPropertyValue(Object component, int property, Object value)
            throws HibernateException {
        if(component == null)
            return;

        final NillableInteger nillable = (NillableInteger) component;
        switch (property) {
            case 0: {
                nillable.setValue((Integer)value);
                break;
            }
            case 1: {
                nillable.setNill((String)value);
                break;
            }
            default: { 
                throw new HibernateException("Invalid property index [" + property + "]");
            }
        }
    }

    @Override
    public Object nullSafeGet(ResultSet rs, String[] names,
            SessionImplementor session, Object owner)
            throws HibernateException, SQLException {

        assert names.length == 2;
        Integer value = (Integer) IntegerType.INSTANCE.get(rs, names[0], session);
        String nill = (String) StringType.INSTANCE.get(rs, names[1], session);

        return new NillableInteger(value, nill);
    }

    @Override
    public void nullSafeSet(PreparedStatement st, Object value, int index,
            SessionImplementor session) throws HibernateException, SQLException {
        if(value == null) {
            IntegerType.INSTANCE.set(st, null, index, session);
            StringType.INSTANCE.set(st, null, index + 1, session);
        } else {
            final NillableInteger nillable = (NillableInteger)value;
            IntegerType.INSTANCE.set(st, nillable.getValue(), index, session);
            StringType.INSTANCE.set(st, nillable.getNill(), index + 1, session);
        }
    }

    @Override
    public Class returnedClass() {
        return NillableInteger.class;
    }

    @Override
    public boolean equals(Object x, Object y) throws HibernateException {
        return ObjectUtils.equals(x, y);
    }

    @Override
    public int hashCode(Object x) throws HibernateException {
        assert (x != null);
        return x.hashCode();
    }

    @Override
    public Object deepCopy(Object value) throws HibernateException {
        return value;
    }

    @Override
    public boolean isMutable() {
        return false;
    }

    @Override
    public Serializable disassemble(Object value, SessionImplementor session)
            throws HibernateException {
        return (Serializable) value;
    }

    @Override
    public Object assemble(Serializable cached, SessionImplementor session,
            Object owner) throws HibernateException {
        return cached;
    }

    @Override
    public Object replace(Object original, Object target,
            SessionImplementor session, Object owner) throws HibernateException {
        return original;
    }

} 
```

并在我的实体中使用它：

```
package my;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.TableGenerator;

import org.hibernate.annotations.Type;

@Entity
@Table(name = "test_test")
public class TestObj {

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE, generator = "IdGenerator")
    @TableGenerator(
        name = "IdGenerator",
        pkColumnValue = "test",
        table="SeqTable",
        allocationSize=1, initialValue=1)
    private Long id;

    private String test;

    @Type(type = "my.PGNillableIntegerType")
    @Column(columnDefinition = "nill_int")
//  @Columns(columns = {
//          @Column(name = "val"),
//          @Column(name = "reason")
//  })
    private NillableInteger nill;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getTest() {
        return test;
    }

    public void setTest(String test) {
        this.test = test;
    }

    public NillableInteger getNill() {
        return nill;
    }

    public void setNill(NillableInteger nill) {
        this.nill = nill;
    }

} 
```

`NillableInteger`看起来像这样：

```
package my;

import javax.persistence.Column;
import javax.persistence.Entity;

public class NillableInteger {

    private Integer value;
    private String nill;

    public NillableInteger() {

    }

    public NillableInteger(String str) {
        str = str.substring(1,str.length()-1);
        String[] splitted = str.split(",");
        value = Integer.parseInt(splitted[0]);
        nill = splitted[1];
    }

    public NillableInteger(Integer value, String nill) {
        this.value = value;
        this.nill = nill;
    }

    @Override
    public String toString() {
        return "(" + value + "," + nill + ")";
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((nill == null) ? 0 : nill.hashCode());
        result = prime * result + ((value == null) ? 0 : value.hashCode());
        return result;
    }
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        NillableInteger other = (NillableInteger) obj;
        if (nill == null) {
            if (other.nill != null)
                return false;
        } else if (!nill.equals(other.nill))
            return false;
        if (value == null) {
            if (other.value != null)
                return false;
        } else if (!value.equals(other.value))
            return false;
        return true;
    }

    public String getNill() {
        return nill;
    }
    public void setNill(String nill) {
        this.nill = nill;
    }
    public Integer getValue() {
        return value;
    }
    public void setValue(Integer value) {
        this.value = value;
    }

} 
```

此配置引发如下内容：

```
org.hibernate.MappingException: property mapping has wrong number of columns: my.TestObj.nill type: my.PGNillableIntegerType 
```

当我使用`@Columns`注释而不是. `@Column`_ 我想要实现的是，表中将有一列具有类型（创建的自定义 PostgreSQL 类型），Java 对象将如上所示。 有任何想法吗？ 谢谢， 阿雷克`TestObj``test_test``TestObj``integer``character varying(255)``nill_int`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:39:52.883

好的，这就是我为实现上述目标所做的工作：我已将类型更改为如下所示：

```
package my;

import java.io.Serializable;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;

import org.hibernate.HibernateException;
import org.hibernate.engine.spi.SessionImplementor;
import org.hibernate.usertype.UserType;

public class PGNillableIntegerType implements UserType {

    @Override
    public int[] sqlTypes() {
        return new int[] { Types.OTHER };
    }

    @Override
    public Class returnedClass() {
        return NillableInteger.class;
    }

    @Override
    public Object nullSafeGet(ResultSet rs, String[] names,
            SessionImplementor session, Object owner)
            throws HibernateException, SQLException {

        return new NillableInteger(rs.getString(names[0]));
    }

    @Override
    public void nullSafeSet(PreparedStatement st, Object value, int index,
            SessionImplementor session) throws HibernateException, SQLException {
        if(value == null) {
            st.setObject(index, null, Types.OTHER);
        } else {
            final NillableInteger nillable = (NillableInteger)value;
            st.setObject(index, nillable.toString(), Types.OTHER);
//          IntegerType.INSTANCE.set(st, nillable.getValue(), index, session);
//          StringType.INSTANCE.set(st, nillable.getNill(), index + 1, session);
        }
    }

    @Override
    public Object replace(Object original, Object target, Object owner)
            throws HibernateException {
        return original;
    }

    public Object assemble(Serializable cached, Object owner)
            throws HibernateException {
        return cached;
    }

    public Object deepCopy(Object value) throws HibernateException {
        return value;
    }

    public Serializable disassemble(Object value) throws HibernateException {
        return (Serializable) value;
    }

    public boolean equals(Object arg0, Object arg1) throws HibernateException {
        return arg0.equals(arg1);
    }

    public int hashCode(Object object) throws HibernateException {
        return object.hashCode();
    }

    public boolean isMutable() {
        return false;
    }

} 
```

现在您可以使用`@Column`PostgreSQL 输入`columnDefinition`. 不幸的是，问题是查询休眠（经过一些搜索 - 我认为唯一的方法是使用这样的 SQL 查询[-](https://forum.hibernate.org/viewtopic.php?t=933883)如果有人知道如何使用 HQL 或标准来做到这一点，那就太好了......）。

# sql - 根据用户输入构成 WHERE 子句的常见做法是什么

> ID：14237134
> 
> 赞同：1
> 
> 时间：2013-01-09T14:11:53.283
> 
> 标签：sql, oracle, client-side, where-clause

如果我们获取一个数据库表，我们可以查询所有行，或者我们可以选择对其应用过滤器。过滤器可以根据用户输入而变化。在选项很少的情况下，我们可以为这几个特定条件指定不同的查询。但是，如果用户可能会或可能不会指定很多选项，那么上述方法就不会派上用场。我知道，我可以根据用户输入组成过滤器并将其作为字符串作为参数发送到相应的存储过程，使用该过滤器构建查询，最后在 EXECUTE IMMEDIATE 的帮助下执行查询字符串（在 Oracle 的情况下）。不知道为什么，但我真的不喜欢这种查询构建方式。我认为这样我就可以为 SQL 注入器敞开大门。此外，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:15:31.520

使用数据库参数而不是尝试引用您的文字是前进的方向。

这将保护您免受 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:19:21.490

解决此问题的常用方法是构建表示查询条件的*表达式树*，将它们转换为*参数化*SQL（以避免 SQL 注入风险），将参数值绑定到生成的 SQL，并针对目标数据库执行生成的查询。

确切的方法取决于您的客户端编程框架：.NET 有*Entity Framework*和*LINQ2SQL*，它们都支持表达式树；Java有Hibernate和JPA等等。我已经看到了几种不同的框架用于构建可定制的查询，并取得了很大的成功。在这些框架不可用的情况下，您可以推出自己的框架，尽管这需要更多的工作。

# php - 如何在里面使用foreach << 我有以下代码，其中包含用于发送表单的变量和文本 inisde。我的问题是我无法弄清楚如何在该文本中执行 php，例如 foreach 函数。 $somearray; $variable = << <end 0="" 1="" 2="" 3="" 4="" 885="" hello="" world="" foreach($somearray="" as="" $v){echo="" $v}="" this="" does="" not="" w="" 问问题="" 2013-01-09t14:12:06.960="" 次="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我有以下代码，其中包含用于发送表单的变量和文本="" inisde。我的问题是我无法弄清楚如何在该文本中执行="" php，例如="" foreach="" 函数。="" $somearray;="" $variable="<<<END" work="" of="" course="" in="" my="" case.="" end;="" 你的帮助将不胜感激。谢谢你="" <<<end&end;是使用引号的同义词，只是少用了100\"次。您不能在字符串中执行代码，而是需要连接结果。="" 你想要做的基本上是这样的：="" ;="" 当你真的很可能想要这个时：="" ($somearray="" $v)="" .="$v;" phpformsfor-loopforeach="" 回答="" answer="" 于="" 2013-01-09t14:16:06.650="" <<<语法是多行字符串格式。块内的所有内容都是字符串的一部分。您不能在其中包含任何="" php="" 代码。="" 如果您需要在其中有一个循环块，则需要在<<<块之前生成该字符串作为变量，并以这种方式将其包含在字符串中。="" $ins="" foreach($myarray="" $val)="" {$ins="" ;}="" {$ins}="" （我还要注意，在您给出的简单示例中，foreach()可以很容易地使用implode()）="" 2013-01-09t14:33:23.530="" related="" algorithm="" -="" 矩阵中的路径数="" c#="" 如何检测当前用户的审核日志？="" windows="" 从="" iis="" 的命令行列出所有托管网站="" ios="" ios推送风格segue过渡="" kohana="" 引导错误="" 在日期时间函数中获取错误信息="" c++="" 间接运算符的="" 标准描述是否保证不会优化内存写入？="" haskell="" 如果列表只有="" true="" 值，则使用="" foldl="" 返回="" true，否则返回="" false="" 将标头身份验证信息传递给="" wsdl="" ubuntu="" gstreamer="" opencv="" 边缘检测="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：14237136
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, forms, for-loop, foreach

我有以下代码，其中包含用于发送表单的变量和文本 inisde。我的问题是我无法弄清楚如何在该文本中执行 php，例如 foreach 函数。

```
$somearray;

$variable = <<<END

Hello world foreach($somearray as $v){echo $v} //this does not work of course in my case.

END; 
```

你的帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:16:06.650

`<<<END`&`END;`是使用引号的同义词，只是少用了100`\"`次。您不能在字符串中执行代码，而是需要连接结果。

你想要做的基本上是这样的：

```
$variable = "foreach($somearray as $v) echo $v;"; 
```

当你真的很可能想要这个时：

```
$variable = "";
foreach ($somearray as $v) $variable .= $v; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:33:23.530

`<<<`语法是多行字符串格式。块内的所有内容都是字符串的一部分。您不能在其中包含任何 PHP 代码。

如果您需要在其中有一个循环块，则需要在`<<<`块之前生成该字符串作为变量，并以这种方式将其包含在字符串中。

```
$ins = '';
foreach($myarray as $val) {$ins .= "blah, {$val}, etc, ";}

$variable = <<<END
    Hello world {$ins}
END; 
```

（我还要注意，在您给出的简单示例中，`foreach()`可以很容易地使用`implode()`）</end>

# grails - grails (gorm) 集包含并保留重复项

> ID：14237140
> 
> 赞同：3
> 
> 时间：2013-01-09T14:12:20.413
> 
> 标签：grails, grails-orm

我现在不太明白我的代码中发生了什么。据我了解，groovy 集不包含重复项。但是，我在一组中看到重复项，并且还看到重复项保存到数据库中。虽然从数据库中检索时，重复项不在集合中。

我有两个类（为简洁起见删除了一些属性）：

```
class EntityType {
    static hasMany = [attributes: Attribute]
}

class Attribute {
    String keyname
} 
```

在我的服务中，我传入一个属性的 jsonarray，这些属性使用`type.addToAttributes(attr)`. 如果我多次执行相同的调用，则会将重复项添加到 Set。并且在持久化时，重复项会被持久化。但是，当我从数据库中检索 Set 时，检索到的 Set 没有任何重复。所以最终结果是除了用不必要的数据填充数据库表之外，它似乎没有任何伤害。

我对 Sets 缺少什么？

编辑：这是我刚刚注意到的一些奇怪的事情。不会为所有属性创建重复项。仅创建 n-1 个副本。遍历属性 jsonarry 时，第一个属性不重复，但之后的每个属性都是重复的。所以如果我的数组是 {a:1,b:2,c:3} 它只会创建 b 和 c 的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:07:31.943

我想通了。我最终不得不像这样覆盖`int hashCode()`and`boolean equals(Object o)`方法：

```
@Override
int hashCode() {
    return keyname.hashCode() + id.hashCode()
}

@Override
boolean equals(Object o) {
    Attribute other = o as Attribute
    return keyname.equals(other.keyname) && id.equals(other.id)
} 
```

虽然我不太喜欢这样，因为如果我添加新属性，它会强制我更新这些方法，但它现在可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:34:40.790

我同意 aiolos 的观点，最明显的原因是您有多个同名的属性。

您可以防止这种情况使键名唯一

```
class Attribute {
    String keyname

    static constraints = {
        keyname unique:true
    }
} 
```

# macos - Mac OS X 上的 XDG_RUNTIME_DIR

> ID：14237142
> 
> 赞同：5
> 
> 时间：2013-01-09T14:12:23.600
> 
> 标签：macos

Mac OS X 是否实施[XDG 基本目录规范](http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html)？如果不是，那么 $XDG_RUNTIME_DIR 的等价物是什么？我帮助维护的应用程序需要一个临时目录，可以在其中放置和执行二进制（即可执行）文件。所以这个目录最好对用户来说是唯一的，并且必须保证允许文件设置可执行位（如果 Mac OS X 使用的文件系统上存在这样的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-26T03:06:22.680

[根据规范](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html#variables)：

> $XDG_RUNTIME_DIR 定义相对于用户特定的非必要运行时文件和其他文件对象（如套接字、命名管道等）应该存储的基本目录。该目录必须由用户拥有，并且他必须是唯一拥有对该目录的读写权限的人。它的 Unix 访问模式必须是 0700。

没有给出太多其他指导。我相信这意味着你可以把它放在你的`$HOME`. `$XDG_CACHE_HOME`我认为，如果权限正确且数据类似于缓存，则没有太多理由与您的不同。

# java - 为什么我的变量为空？

> ID：14237149
> 
> 赞同：-2
> 
> 时间：2013-01-09T14:12:47.640
> 
> 标签：java, xml, parsing

我这样做

```
 package file;

    import java.io.IOException;

    import org.apache.log4j.Logger;
    import org.xml.sax.Attributes;
    import org.xml.sax.ContentHandler;
    import org.xml.sax.Locator;
    import org.xml.sax.SAXException;
    import org.xml.sax.XMLReader;
    import org.xml.sax.helpers.LocatorImpl;
    import org.xml.sax.helpers.XMLReaderFactory;

    public class GetNatureSax implements ContentHandler {

        private final static Logger _logger = Logger.getLogger(GetNatureSax.class.getName());
        private boolean isCurrentElement = false;
        private Locator locator;
        private String _parameterValue = null;

        public GetNatureSax() {
            super();
            locator = new LocatorImpl();
        }

        public String getValeurParametre() {
            return _parameterValue;
        }

        public void setDocumentLocator(Locator value) {
            locator = value;
        }

        public void startDocument() throws SAXException {}

        public void endDocument() throws SAXException {}

        public void startPrefixMapping(String prefix, String URI) throws SAXException {

        }

        public void endPrefixMapping(String prefix) throws SAXException {}

        public void startElement(String nameSpaceURI, String localName, String rawName, Attributes attributs)
        throws SAXException {
            if (localName.equals("Nature")) {
                isCurrentElement = true;
            }
        }

        public void endElement(String nameSpaceURI, String localName, String rawName) throws SAXException {

            if (localName.equals("Nature")) {
                isCurrentElement = false;
            }
        }

        public void characters(char[] ch, int start, int end) throws SAXException {
            if (isCurrentElement) {
                _parameterValue = new String(ch, start, end);
            }
        }

        public void ignorableWhitespace(char[] ch, int start, int end) throws SAXException {
            System.out.println("espaces inutiles rencontres : ..." + new String(ch, start, end) + "...");
        }

        public void processingInstruction(String target, String data) throws SAXException {
            System.out.println("Instruction de fonctionnement : " + target);
            System.out.println("  dont les arguments sont : " + data);
        }

        public void skippedEntity(String arg0) throws SAXException {}

        public void parseFichier(String i_fichierATraiter) {
            XMLReader saxReader;
            try {

                saxReader = XMLReaderFactory.createXMLReader("org.apache.xerces.parsers.SAXParser");
                saxReader.setContentHandler(new GetNatureSax());
                saxReader.parse(i_fichierATraiter);
                System.out.println(_parameterValue);
            } catch (SAXException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } 
```

我的 XML：

```
...
<Reference>
  <Nature>ACHAT</Nature> 
  <Statut>2</Statut> 
  <Type-Gest>RE</Type-Gest> 
  <Gest>RE_ELECTRA</Gest> 
  <Type-Res>D</Type-Res> 
  <Nb-h>24</Nb-h> 
</Reference>
... 
```

为什么当它执行这一行

> System.out.println(_parameterValue);

我的变量为空，在我调试之前我的变量不为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:28:24.670

因为你实例化了一个 new`GetNatureSax`并将它交给了`SaxReader`has a `Content Handler`。

因此，当解析结束时，是新`GetNatureSax`实例已被修改并`_parameterValue`设置了字段，而不是**当前实例*(this)***。

只需像这样修改您的`parseFichier`方法：

```
saxReader = XMLReaderFactory.createXMLReader("org.apache.xerces.parsers.SAXParser");
saxReader.setContentHandler(this);  // here
saxReader.parse(i_fichierATraiter);
System.out.println("Found: " + getValeurParametre()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:31:46.493

使用我的调试器，我可以看到您正在使用两个 GetNatureSax

```
 saxReader.setContentHandler(new GetNatureSax()); 
```

这将创建第二个 GetNatureSax 对象，在该对象中设置值。

将其更改为

```
 saxReader.setContentHandler(this); 
```

解决了这个问题。

# multi-tenant - 支持多租户的简单 php 框架

> ID：14237154
> 
> 赞同：4
> 
> 时间：2013-01-09T14:13:00.397
> 
> 标签：multi-tenant

我正在寻找一个基于 PHP 的框架，它准备好具有以下功能 1\. 带有登录/注销的简单仪表板 2\. 多个 DB，每个 db 代表一个客户端 只是基本框架。3.简单的注册支持

用例：我从 github 下载并部署在服务器上 - 假设服务器都配置了 dns 和其他东西。

我通过注册创建了一个用户 - 创建了一个新的数据库并在服务器上创建了租户文件夹

然后我可以访问

租户1.stckovawesm.com

租户2.stckovawesm.com

每个连接到不同的数据库。假设：*.stckovaeawesm.com 映射到我托管框架的服务器。

我知道有支持该框架的代码点火器、Zend 和 Symphony。我正在寻找一个可以使用的库/框架。一个 shell 代码，它可以用 min 来解决问题。配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:58:19.583

我终于设法使用 Laravel 框架完成了一些工作，并托管在 github 上，供人们帮助和改进。任何人都想参与并帮助分叉并让我知道，以便我可以合作。 [https://github.com/sseshachala/laravel-multi-tenant](https://github.com/sseshachala/laravel-multi-tenant)

# android - 未调用 FacebookOperationCanceledException

> ID：14237157
> 
> 赞同：1
> 
> 时间：2013-01-09T14:13:04.870
> 
> 标签：android, facebook, facebook-android-sdk, android-facebook

我正在调用登录 Facebook 的授权方法。

但是，如果用户通过以下两种方式之一取消登录：按下 x 或按下后退按钮，则调用 onFacebookError 回调而不是 onCancel。

为什么会这样？这是正常的 Facebook 行为吗？

如果是这样，如果用户取消了登录过程，我该如何捕捉？

在查看 Facebook 代码时，我可以看到，为了调用 onCancel 回调，Facebook 的异常应该是 FacebookOperationCanceledException。

我正在使用 Facebook android sdk v3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:18:50.283

这是一个错误，请在此处报告[https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)

我现在能想到的唯一解决方法是查看 onFacebookError 方法中的错误消息，并过滤“用户取消登录”。信息。

# macos - NSViewController 中是否有 viewcontroller 包含的概念

> ID：14237159
> 
> 赞同：2
> 
> 时间：2013-01-09T14:13:06.267
> 
> 标签：macos

在iOS中，你有一个View Containment的概念，在OSX中有这样的东西吗？

基本上我想创建多个 nsviewcontroller 每个管理一个特定的视图。我有一个左侧有菜单的 MasterViewController（如 iTunes），每次用户单击左侧的项目时，它都会加载正确的 nsviewcontroller 以显示它的视图。

任何实现我需要的技巧都值得赞赏

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T13:43:29.620

As of OSX 10.10 there is, watch [Storyboards and Controllers on OS X](https://developer.apple.com/videos/wwdc/2014/).

* * *

Comment.

NSViewController did basically nothing (other that load NIBs) for years, I'm glad to see that it finally got from attention. Certain people in the Cocoa crowd here have a snotty attitude about the view controller programming style; I've asked questions like this before and had the "are you a iOS newbie coming to Cocoa" response. That's something that I never understood, it's a great model for containment, and reuse.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T18:06:57.270

OS X 和 iOS 之间的主要区别在于，在 iOS 设备上，您只有一个“窗口”。在 OS X 上，有些桌面可以包含许多可以同时查看和交互的窗口。

一般来说，听起来您正在尝试创建一个 NSWindow，其中包含一个单列 NSTableView 用于左侧的选择列表，以及其他一些将在右侧显示选择的详细信息的视图。通常将它们放置在垂直的 NSSplitView 中，以便用户可以调整它们的相对宽度，但它们也可以独立存在，作为窗口主视图中的两个单独的子视图。

您通常使用 NSArrayController 来管理列表内容并跟踪选择了哪个特定项目。对于右侧的详细视图，您将使用带有 NSControl 子视图的单个 NSView，这些子视图显示绑定到数组控制器的选定对象的值。

如果您的对象之间的数据结构不同，请根据特定选定对象所代表的不同类型数据的需要交换或显示/隐藏各种子视图。您可以使用“Conditionally Sets Hidden”绑定选项来自动隐藏没有适用键值的控件。

或者，如果您的列表中有固定数量的对象并且它们的结构彼此完全不同，那么您可能希望使用具有单独选项卡的 NSTabView 表格，其中每个对象都有自己的自定义视图。观察列表中的选择何时发生变化，并相应地选择适当的选项卡。

# html - 选择 CSS 中的上一个元素

> ID：14237160
> 
> 赞同：0
> 
> 时间：2013-01-09T14:13:06.307
> 
> 标签：html, css

> **可能重复：**
> [CSS 上一个兄弟选择器](https://stackoverflow.com/questions/1817792/css-previous-sibling-selector)

我正在探索 CSS3，我只能用纯 HTML/CSS3 做所有事情，但遇到了一个我找不到解决方案的小问题。

我有几个`<div>`s的风格`float:left;`。当我将鼠标悬停在第一个上时，我想将一些 CSS 应用于第二个。很简单，我只是使用`div.div1:hover + div`，一切都很好。但是反过来呢？如果我将鼠标悬停在第二个`<div>`，如何将一些 CSS 应用到第一个`<div>`？

我可以使用任何 CSS，我并不关心浏览器的兼容性，我只想探索纯 CSS3 能走多远。

# ajax - 如何知道来自ajax后端的数据类型？

> ID：14237167
> 
> 赞同：0
> 
> 时间：2013-01-09T13:40:20.337
> 
> 标签：ajax

在前端工作，我们永远不会知道后端语言，所以我怎么知道来自后端的数据是 in`json`还是 in`text`或者 in`html`还是 in `xml`。我们没有权限或访问后端语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:45:24.960

有些语言在第一行或第二行声明了这一点……你为什么不直接阅读前几行或代码？

许多语言将允许您解析 XML，将其包装在 catch 中并不理想，但它会起作用。但是，您忽略了说明您使用的语言。

但是，可能值得商定一种格式，例如 XML，然后您可以对其进行反序列化？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:17:36.720

您可以签`Content-Type`入`Response Headers`以了解响应数据类型。

# ruby - 选项在 homesource 中是什么意思？

> ID：14237170
> 
> 赞同：0
> 
> 时间：2013-01-09T14:13:28.967
> 
> 标签：ruby, macos, homebrew

当我跑`brew edit ejabberd`

```
require 'formula'

class Ejabberd < Formula
  homepage 'http://www.ejabberd.im'
  url "http://www.process-one.net/downloads/ejabberd/2.1.11/ejabberd-2.1.11.tgz"
  md5 'a70b040c4e7602f47718c8afe8780d50'

  depends_on "openssl" if MacOS.leopard?
  depends_on "erlang"

  def options
    [
      ['--odbc', "Build with ODBC support."],
      ['--32-bit', "Build 32-bit only."]
    ]
  end

  def install
    ENV['TARGET_DIR'] = ENV['DESTDIR'] = "#{lib}/ejabberd/erlang/lib/ejabberd-#{version}"
    ENV['MAN_DIR'] = man
    ENV['SBIN_DIR'] = sbin

    if ARGV.build_32_bit?
      %w{ CFLAGS LDFLAGS }.each do |compiler_flag|
        ENV.remove compiler_flag, "-arch x86_64"
        ENV.append compiler_flag, "-arch i386"
      end
    end

    cd "src" do
      args = ["--prefix=#{prefix}",
              "--sysconfdir=#{etc}",
              "--localstatedir=#{var}"]

      if MacOS.leopard?
        openssl = Formula.factory('openssl')
        args << "--with-openssl=#{openssl.prefix}"
      end

      args << "--enable-odbc" if ARGV.include? '--odbc'

      system "./configure", *args
      system "make"
      system "make install"
    end

    (etc+"ejabberd").mkpath
    (var+"lib/ejabberd").mkpath
    (var+"spool/ejabberd").mkpath
  end

  def caveats; <<-EOS.undent
    If you face nodedown problems, concat your machine name to:
      /private/etc/hosts
    after 'localhost'.
    EOS
  end
end 
```

我想知道选项方法用于？它会附加`--odbc`和`--32-bit`吗`./configure`？

```
 def options
    [
      ['--odbc', "Build with ODBC support."],
      ['--32-bit', "Build 32-bit only."]
    ]
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:49:44.997

不; 它发出信号，`--odbc`并且`--32-bit`是您可以传递给`brew install`命令本身的选项。

在脚本的更下方，它说`if ARGV.build_32_bit?`和`if ARGV.include? '--odbc'`，它会检查您是否通过了其中一个选项，并相应地修改其构建过程。

我相信`brew install`不再使用指示命令行选项可用性和检查命令行选项的特定方式。但我不在我的 Mac 上检查当前程序是什么。

# ruby - 如何在 ruby 项目中播放视频文件？

> ID：14237178
> 
> 赞同：2
> 
> 时间：2013-01-09T14:13:57.530
> 
> 标签：ruby, video-streaming, jruby

我找到了一个 rvideo 库，但手册非常小，有一天我正在学习 ruby​​。我需要在窗口中播放视频。我是怎么做到的？有可能导致视频播放器来自 ruby​​ 代码吗？或有任何其他方式完成我的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:46:36.920

好的，我要做的第一件事是安装[RVM](https://rvm.io/rvm/install/)并按照说明告诉您需要安装哪些其他软件包，您收到的错误是因为您没有安装 build-essential。每个 rvm 你需要安装

> rvm 要求...
> 
> # 对于 Ruby / Ruby HEAD（MRI、Rubinius 和 REE），安装以下内容：
> 
> ruby: /usr/bin/apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool 野牛颠覆 pkgconfig

在 RVM 与您需要的软件包一起安装后，继续安装您需要的风味或 Ruby。

不幸的是，Rubuto 不是学习 Android API 的替代品，您需要的 revelevent API 在这里[http://developer.android.com/guide/topics/media/mediaplayer.html](http://developer.android.com/guide/topics/media/mediaplayer.html)您只需要进行正确的 API 调用以及您的 Rubuto/JRUBY 项目中的参考资料

# wpf - mvvm 计算字段

> ID：14237180
> 
> 赞同：0
> 
> 时间：2013-01-09T14:14:09.750
> 
> 标签：wpf, wcf, mvvm-light

我正在将 MVVM 轻工具包用于与 wcf 服务器对话的 wpf 应用程序。

wcf 服务器返回一个 Person 对象（代理对象）。这个人对象有几个字段，名字、姓氏等。我的视图模型调用了 web 服务，然后得到了这个模型的返回。我的视图绑定到 viewmodel 的模型，并且字段正确绑定到每个 ui 文本框。

阴凉处，系统运行良好。

模型上的两个字段是 DateOfBirth 和 NationalIDNumber（仅供参考：在南非，您可以从 ID 号得出一个人的出生日期）

因此，在用户输入或更新 NationalIdNumber（如果可用）之后，我也希望确定 DOB。

但是 DOB 仍然必须映射到从 WCF 服务返回的初始字段，所以我不能用转换器将它绑定到 NationalIdNumber。它需要保持绑定到 wcf 代理的 DOB 字段，以便它可以持久化回来。

我应该如何最好地实施这个？

如果这是一个非 mvvm 项目，我只会在 IDNumber 文本字段上放置一个事件，以便如果它失去焦点，请尝试从中计算一个 dob（如果其中的文本是垃圾，则可能并不总是可能）然后覆盖该值Dob 文本框。

我正在考虑只调整 Person 对象 NationalIdNumber 设置器，但这将在我更新 web 服务引用的那一刻被删除

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:31:36.867

您可以在视图模型中拥有 Person 属性：

*视图模型：*

```
public class PersonViewModel : INotifyPropertyChanged
{
    Person person = new Person();
    public Person Person
    {
        get
        {
            return person;
        }
        set
        {
            person = value;
            NotifyPropertyChanged("Person");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

*看法：*

```
<TextBox Text="{Binding Person.NationalIDNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                 Height="23" HorizontalAlignment="Left" Margin="128,98,0,0" 
                 Name="textBox1" VerticalAlignment="Top" Width="120" /> 
```

因此，每当您更新 Person 的属性时，都会调用 Person 的 setter。

...

**编辑：**

使用 MvvmLight：

*视图模型：*

```
public class PersonViewModel : ViewModelBase
{
    Person person = new Person();
    public Person Person
    {
        get
        {
            return person;
        }
        set
        {
            person = value;
            RaisePropertyChanged("Person");
        }
    }
} 
```

*看法：*

```
<TextBox Text="{Binding Person.NationalIDNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                 Height="23" HorizontalAlignment="Left" Margin="128,98,0,0" 
                 Name="textBox1" VerticalAlignment="Top" Width="120" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:47:36.240

```
 public class PropertyHelpersViewModel : INotifyPropertyChanged
    {
        private string text;
        public string Text
        {
            get { return text; }
            set
            {
                if(text != value)
                {
                    text = value;
                    RaisePropertyChanged("Text");
                }
            }
        }

        protected void RaisePropertyChanged(string propertyName)
        {
            var handlers = PropertyChanged;
            if(handlers != null)
                handlers(this, new PropertyChangedEventArgs(propertyName));
        }

        public event PropertyChangedEventHandler PropertyChanged;
    } 
```

# ios - 这 15 个苹果 mach o 链接器错误是什么意思

> ID：14237187
> 
> 赞同：3
> 
> 时间：2013-01-09T14:14:34.277
> 
> 标签：ios, linker-errors

![这里有很多错误...](../Images/ba516d6c0c3b6eb7760b1027159cb511.png)

还有这个：

```
Ld /Users/davidraijmakers/Library/Developer/Xcode/DerivedData/Scanner-bbwbbvayxxnrhwdsgbkvibplofyw/Build/Products/Debug-iphoneos/Scanner.app/Scanner normal armv7
    cd /Users/davidraijmakers/Documents/xcodezooi/Scanner
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/davidraijmakers/Library/Developer/Xcode/DerivedData/Scanner-bbwbbvayxxnrhwdsgbkvibplofyw/Build/Products/Debug-iphoneos -L/Users/davidraijmakers/Documents/xcodezooi/Scanner/Scanner/ScanditSDK -F/Users/davidraijmakers/Library/Developer/Xcode/DerivedData/Scanner-bbwbbvayxxnrhwdsgbkvibplofyw/Build/Products/Debug-iphoneos -filelist /Users/davidraijmakers/Library/Developer/Xcode/DerivedData/Scanner-bbwbbvayxxnrhwdsgbkvibplofyw/Build/Intermediates/Scanner.build/Debug-iphoneos/Scanner.build/Objects-normal/armv7/Scanner.LinkFileList -dead_strip -fobjc-link-runtime -stdlib=libc++ -miphoneos-version-min=6.0 -liconv -lz -framework CoreVideo -framework AudioToolbox -framework AVFoundation -framework CoreMedia -framework QuartzCore -framework SystemConfiguration -framework UIKit -framework Foundation -framework CoreGraphics -lscanditsdk-iphone-2.2.5 -o /Users/davidraijmakers/Library/Developer/Xcode/DerivedData/Scanner-bbwbbvayxxnrhwdsgbkvibplofyw/Build/Products/Debug-iphoneos/Scanner.app/Scanner

Undefined symbols for architecture armv7:
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<<<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
      l1348 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1486 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1585 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1600 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1602 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1655 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&)", referenced from:
      l1241 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::ios_base::Init::Init()", referenced from:
      l1670 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1671 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1672 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1673 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1674 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1675 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1676 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      ...
  "std::__throw_length_error(char const*)", referenced from:
      std::vector<zxing::Ref<zxing::datamatrix::Version>, std::allocator<zxing::Ref<zxing::datamatrix::Version> > >::_M_insert_aux(__gnu_cxx::__normal_iterator<zxing::Ref<zxing::datamatrix::Version>*, std::vector<zxing::Ref<zxing::datamatrix::Version>, std::allocator<zxing::Ref<zxing::datamatrix::Version> > > >, zxing::Ref<zxing::datamatrix::Version> const&) in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      std::vector<zxing::datamatrix::ECB*, std::allocator<zxing::datamatrix::ECB*> >::_M_insert_aux(__gnu_cxx::__normal_iterator<zxing::datamatrix::ECB**, std::vector<zxing::datamatrix::ECB*, std::allocator<zxing::datamatrix::ECB*> > >, zxing::datamatrix::ECB* const&) in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      std::vector<zxing::Ref<zxing::qrcode::QRCodeVersion>, std::allocator<zxing::Ref<zxing::qrcode::QRCodeVersion> > >::_M_insert_aux(__gnu_cxx::__normal_iterator<zxing::Ref<zxing::qrcode::QRCodeVersion>*, std::vector<zxing::Ref<zxing::qrcode::QRCodeVersion>, std::allocator<zxing::Ref<zxing::qrcode::QRCodeVersion> > > >, zxing::Ref<zxing::qrcode::QRCodeVersion> const&) in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      std::vector<zxing::qrcode::ECB*, std::allocator<zxing::qrcode::ECB*> >::_M_insert_aux(__gnu_cxx::__normal_iterator<zxing::qrcode::ECB**, std::vector<zxing::qrcode::ECB*, std::allocator<zxing::qrcode::ECB*> > >, zxing::qrcode::ECB* const&) in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      std::vector<zxing::Ref<zxing::qrcode::DataMask>, std::allocator<zxing::Ref<zxing::qrcode::DataMask> > >::_M_insert_aux(__gnu_cxx::__normal_iterator<zxing::Ref<zxing::qrcode::DataMask>*, std::vector<zxing::Ref<zxing::qrcode::DataMask>, std::allocator<zxing::Ref<zxing::qrcode::DataMask> > > >, zxing::Ref<zxing::qrcode::DataMask> const&) in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      std::vector<zxing::qrcode::AlignmentPattern*, std::allocator<zxing::qrcode::AlignmentPattern*> >::_M_insert_aux(__gnu_cxx::__normal_iterator<zxing::qrcode::AlignmentPattern**, std::vector<zxing::qrcode::AlignmentPattern*, std::allocator<zxing::qrcode::AlignmentPattern*> > >, zxing::qrcode::AlignmentPattern* const&) in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      std::vector<zxing::Ref<zxing::qrcode::FinderPattern>, std::allocator<zxing::Ref<zxing::qrcode::FinderPattern> > >::_M_insert_aux(__gnu_cxx::__normal_iterator<zxing::Ref<zxing::qrcode::FinderPattern>*, std::vector<zxing::Ref<zxing::qrcode::FinderPattern>, std::allocator<zxing::Ref<zxing::qrcode::FinderPattern> > > >, zxing::Ref<zxing::qrcode::FinderPattern> const&) in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      ...
  "std::string::append(char const*, unsigned long)", referenced from:
      l1598 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::string::_Rep::_S_empty_rep_storage", referenced from:
      l1604 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, int)", referenced from:
      l1481 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1482 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1483 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1484 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1485 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()", referenced from:
      l1243 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1244 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1245 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1348 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1477 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1585 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1600 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      ...
  "std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >::basic_ostringstream(std::_Ios_Openmode)", referenced from:
      l1348 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1480 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1585 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1600 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1602 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1655 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::ios_base::Init::~Init()", referenced from:
      l1670 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1671 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1672 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1673 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1674 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1675 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1676 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      ...
  "std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::str() const", referenced from:
      l1348 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1480 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1585 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1600 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1602 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1655 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&)", referenced from:
      l1378 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      zxing::Exception::Exception(zxing::Exception const&) in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >::~basic_ostringstream()", referenced from:
      l1348 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1480 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1585 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1600 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1602 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1655 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
  "std::ostream::operator<<(int)", referenced from:
      l1348 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1481 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1482 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1483 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1585 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1600 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      l1602 in libscanditsdk-iphone-2.2.5.a(mirasense.o)
      ...
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

也许与armv7有关。我该如何正确设置。在模拟器上运行良好

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T15:19:49.670

这可能与 XCode 没有使用正确的 C++ 标准库有关。要解决此问题，请单击您的项目，转到构建设置下的项目目标，搜索名为“C++ 标准库”的设置。将其设置为 libstdc++ 或 Compiler Default，不应将其设置为 libc++。

您需要这样做，因为 Scandit SDK 当前尚未与最近引入 XCode 的新 C++ 11 标准库一起运行。在不久的将来，版本将使用 C++ 11 编译器进行编译，并使用现在在 XCode 中设置为默认值的 std 库运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T05:39:40.173

我最近使用 Scandit SDK 的 3.0.0-RC1 版本遇到了这个问题。对我来说，问题来自没有链接到 libc++.dylib 库。（构建阶段 -> 将二进制文件与库链接）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:57:11.677

您没有链接到 C++ 标准库。将您的代码编译为 C++（或 Objective-C++，如果需要），链接器将自动合并该库。

# android - Tesseract 致命信号 11（SIGSEGV 错误

> ID：14237188
> 
> 赞同：3
> 
> 时间：2013-01-09T14:14:41.077
> 
> 标签：android, bitmap, ocr, tesseract

我在可能的 android 应用程序中有一个错误：致命信号 11 (SIGSEGV)。
在跟踪错误之后，我发现它发生在可能代码的这一点上：
代码

```
TessBaseAPI baseApi = new TessBaseAPI();
    baseApi.setDebug(true);
    baseApi.init(DATA_PATH, lang);
    baseApi.setImage(bitmap);

            //the error happened here
    String recognizedText = baseApi.getUTF8Text();

    baseApi.end(); 
```

在调用此方法之前我要做的事情：
1 - 拍照
2 - 用大小裁剪它`x = 500`3 `y = 100`
- 将其保存为`Uri`变量`_path`4
- 将其解码`bitmap`为`options.inSampleSize = 2;`

因此，如果有人对此错误有所了解，请发表评论。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:26:57.907

我做到了....问题出在`eng.trainedat`处理识别操作的文件上，我从 Tesseract 项目站点下载了另一个文件，问题就消失了。

谢谢你的帮助

# javascript - 如何在 Knockout 中重新绑定具有不可观察对象的元素？

> ID：14237192
> 
> 赞同：0
> 
> 时间：2013-01-09T14:14:51.443
> 
> 标签：javascript, knockout.js

如何在 Knockout 中重新绑定具有不可观察对象的元素？假设我有

```
<ul data-bind="attr:{ }, foreach: items"><li><a rel="external" data-bind="attr: { href: full }" ><img data-bind="attr: { src: thumb, alt: caption }" /></a></li></ul> 
```

我可以正确绑定这个，

```
{
"items":[
                    { "full": "Content\/ImageGallery\/full\/20120502_180612_Josh_Wave_Pint.jpg", "thumb": "content\/imagegallery\/thumb\/20120502_180612_Josh_Wave_Pint.jpg", "caption": "Picture" },
                    {"full":"Content\/ImageGallery\/full\/20130109_173902.jpg","thumb":"content\/imagegallery\/thumb\/20130109_173902.jpg","caption":"Picture"},
                    { "full": "Content\/ImageGallery\/full\/20130107_193641.jpg", "thumb": "content\/imagegallery\/thumb\/20130107_193641.jpg", "caption": "Picture" }
                    ] } 
```

但是如何重新绑定呢？这不起作用，

```
ko.applyBindings(updatedJsonObject, $element[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:53:23.037

如果您无法使您的数组成为 observableArray，那么您的主要选择是将整个结构放置在 observable 中，例如：

```
var myStructure = ko.observable();

//update myStructure with new data
myStructure({[...]}); 
```

然后，你会像这样绑定它：

```
<div data-bind="with: myStructure">
    <ul data-bind="attr:{ }, foreach: items"><li><a rel="external" data-bind="attr: { href: full }" ><img data-bind="attr: { src: thumb, alt: caption }" /></a></li></ul>
</div> 
```

现在，即使数组不可观察，每当您更新`myStructure`（这是可观察的）时，整个部分都将重新渲染。

# mysql - 从表中选择日期在今天之后的行

> ID：14237198
> 
> 赞同：0
> 
> 时间：2013-01-09T14:15:06.543
> 
> 标签：mysql

我的 MySQL 数据库中有一个表，其中包含以下字段：

`id, client, date`

类型是：

`id -> int(20) unsigned, client -> varchar(100), date -> varchar(20)`

作为数据示例：

`'234', 'John Doe', '08/13'`

`'112', 'Joanna Doe', '08/12'`

我想选择今天日期之后的所有记录为 mm/YY (09/13) 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:23:14.437

您可以使用 MySQL 的 str_to_date 函数。

```
select * from table where str_to_date(date,'%m/%Y') > sysdate; 
```

**编辑：**

例子：

```
select date from mytable where str_to_date(date,'%m/%Y') > str_date('01/13','%m/%Y'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:27:47.670

```
select *
from yourtable
where
  (year(curdate()) % 1000 < substring_index(date, '/', -1))
  or
  (year(curdate()) % 1000 = substring_index(date, '/', -1)
   and month(curdate()) < substring_index(date, '/', 1)) 
```

# android - 在 MapFragment 中显示自定义地图

> ID：14237199
> 
> 赞同：0
> 
> 时间：2013-01-09T14:15:13.013
> 
> 标签：android, android-mapview

最近，[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)已经发布，引入`MapFragment`. 这似乎是一个整洁的功能。但是，我想知道是否可以使用 a`MapView`来`MapFragment`显示自定义地图，而不是让 Google Play 服务加载地图。

查看文档[`MapFragment`](http://developer.android.com/reference/com/google/android/gms/maps/MapFragment.html)，我找不到任何允许附加自定义的方法`MapView`。此外，您似乎永远无法替换[`GoogleMap`](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html).`MapFragment`

对我来说，这似乎是为了能够使用自定义地图，您不能使用新的地图 API。我会感谢更多知识渊博的人在这个问题上的投入。

编辑：如果有人可以添加 android-mapfragment 标签，我将不胜感激，从而创建它。完成此操作后，请随意删除此编辑。

# bash - 源 bash 脚本到另一个

> ID：14237207
> 
> 赞同：7
> 
> 时间：2013-01-09T14:15:36.780
> 
> 标签：bash, shell

> **可能重复：**
> [bash 脚本获取自身完整路径的可靠方法？](https://stackoverflow.com/questions/4774054/reliable-way-for-a-bash-script-to-get-the-full-path-to-itself)

我有 bash 脚本`test.sh`，它通过以下几行使用另一个`search.sh`脚本中的函数：

```
source ../scripts/search.sh
<call some functions from search.sh> 
```

这两个脚本都位于 git 存储库中。`search.sh`在`<git_root>/scripts/`目录中，`test.sh`位于同一目录中（但一般来说，可以位于`<git_root>`目录内的任何位置 - 我的意思是我不能依赖以下`source search.sh`方法）。

当我从一切正常调用`test.sh`脚本时`<git_root>/scripts/`，但只要我更改当前工作目录`test.sh`就会失败：

```
cd <git_root>/scripts/
./test.sh         //OK
cd ..
./scripts/test.sh //FAILS
./scripts/test.sh: line 1: ../scripts/search.sh: No file or directory ... 
```

因此我所拥有的：

1.  `search.sh`脚本到`<git_root>`目录的相对路径

**我想要什么：**能够`test.sh`从内部任何地方运行`<git_root>`而不会出错。

**PS：**无法使用永久绝对路径，`search.sh`因为 git 存储库可以克隆到任何位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:23:46.670

如果两个脚本都在同一个目录中，那么如果你得到运行脚本所在的目录，你可以使用它作为调用另一个脚本的目录：

```
# Get the directory this script is in
pushd `dirname $0` > /dev/null
SCRIPTPATH=`pwd -P`
popd > /dev/null

# Now use that directory to call the other script
source $SCRIPTPATH/search.sh 
```

取自问题的已接受答案，我将此问题标记为重复：[https ://stackoverflow.com/a/4774063/440558](https://stackoverflow.com/a/4774063/440558)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:53:23.910

你可以这样做：

```
# Get path the Git repo
GIT_ROOT=`git rev-parse --show-toplevel`

# Load the search functions
source $GIT_ROOT/scripts/search.sh 
```

[如何获取 Git 根目录](https://stackoverflow.com/questions/957928/is-there-a-way-to-get-the-git-root-directory-in-one-command)！

或者像[@Joachim Pileborg 所说](https://stackoverflow.com/a/14237355/1390306)的那样，但你必须注意你必须知道这个到另一个脚本的路径；

```
# Call the other script
source $SCRIPTPATH/../scripts/search.sh
```

```
# Or if it is in another path
source $SCRIPTPATH/../scripts/seachers/search.sh
```

Apache Tomcat 脚本使用这种方法：

```
# resolve links - $0 may be a softlink
PRG="$0"

while [ -h "$PRG" ] ; do
  ls=`ls -ld "$PRG"`
  link=`expr "$ls" : '.*-> \(.*\)$'`
  if expr "$link" : '/.*' > /dev/null; then
    PRG="$link"
  else
    PRG=`dirname "$PRG"`/"$link"
  fi
done

PRGDIR=`dirname "$PRG"` 
```

无论如何，您必须将此代码段放在使用其他脚本的所有脚本上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:08:43.460

有没有办法识别这个 Git 存储库位置？环境变量集？您可以`PATH`在脚本本身中设置以包含 Git 存储库：

```
 PATH="$GIT_REPO_LOCATION/scripts:$PATH"
 . search.sh 
```

脚本完成后，您`PATH`将恢复到其旧值，并且`$GIT_REPO_LOCATION/scripts`不再是`PATH`.

问题是找到这个位置开始。我想你可以在你的脚本中做这样的事情：

```
GIT_LOCATION=$(find $HOME -name "search.sh" | head -1)
GIT_SCRIPT_DIR=$(dirname $GIT_LOCATION)
PATH="$GIT_SCRIPT_DIR:$PATH"
. search.sh 
```

顺便说一句，既然`$PATH`设置好了，我可以通过`search.sh`而不是`./search.sh`你在脚本目录中时必须做的调用脚本，并且你`PATH`没有包括`.`哪个是当前目录（并且 PATH 不应该包括`.`，因为它是一个安全漏洞）。

另请注意，您也可以搜索`.git`目录，这可能是您正在寻找的 Git 存储库：

```
GIT_LOCATION=$(find $HOME -name ".git" -type d | head -1)
PATH="$GIT_LOCATION:$PATH"
. search.sh 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:42:01.367

对于那些不想使用 git 的功能来查找父目录的人。如果你可以确定你总是在 git 目录中运行脚本，你可以使用这样的东西：

```
git_root=""
while /bin/true ; do
    if [[ "$(pwd)" == "$HOME" ]] || [[ "$(pwd)" == "/" ]] ; then
        break
    fi

    if [[ -d ".git" ]] ; then
        git_root="$(pwd)"
        break
    fi

    cd ..
done 
```

我没有对此进行测试，但它只会循环返回，直到它到达您的主目录或 / 并且它会查看`.git`每个父目录中是否有一个目录。如果有，它会设置`git_root`变量并且它会爆发。如果它没有找到，`git_root`将只是一个空字符串。然后你可以这样做：

```
if [[ -n "$git_root" ]] ; then
    . ${git_root}/scripts/search.sh
fi 
```

IHTH

# ios - RestKit RKManagedObjectRequestOperation 预期

> ID：14237216
> 
> 赞同：1
> 
> 时间：2013-01-09T14:15:55.273
> 
> 标签：ios, objective-c, networking, core-data, restkit

首先，我尝试在不使用核心数据的情况下实现 restKit。一切正常。但现在我也想在其中实现核心数据。我创建了一个单独的类，将所有核心数据和映射内容放入其中。

我在里面做了一个init函数，看起来像这样。

```
-(API *)init{

self = [super init];

if (self != nil){

    NSURL *baseURL = [NSURL URLWithString:@"http://virtuele-receptie.preview.sanmax.be"];

    AFHTTPClient* client = [[AFHTTPClient alloc] initWithBaseURL:baseURL];

    [client setDefaultHeader:@"Accept" value:RKMIMETypeJSON];

    objectManager = [RKObjectManager managerWithBaseURL:baseURL];

    _managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];

    managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:_managedObjectModel];

    objectManager.managedObjectStore = managedObjectStore;

}

return self; 
```

}

然后我有一个函数 mapLogin，它将我的 json 映射到核心数据实体中。我在这个方法中唯一改变的是从

```
RKObjectMapping *dataMapping = [RKObjectMapping mappingForClass:[Data class]]; 
```

至

```
 RKEntityMapping* dataMapping = [RKEntityMapping mappingForEntityForName:@"Data" inManagedObjectStore:managedObjectStore]; 
```

现在，当我跑步时，我会得到一个巨大的日志。但我认为最重要的是这些。

**日志**

```
W restkit:RKObjectManager.m:488 Asked to create an `RKManagedObjectRequestOperation` object, but managedObjectStore is nil.

CoreData: error: Failed to call designated initializer on NSManagedObject class 'Data' 

Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<Data 0x1fd0b390> valueForUndefinedKey:]: the entity (null) is not key value coding-compliant for the key "status".' 
```

**编辑** 好的，我在初始化 RKObjectManager 后放置了 managedObjectstore。

```
 objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];
        objectManager.managedObjectStore = managedObjectStore; 
```

但现在我收到以下错误。

```
** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: self.managedObjectContext' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:52:09.477

创建托管对象存储后，请执行以下操作：

```
[managedObjectStore createPersistentStoreCoordinator];
NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"RKTwitter.sqlite"];
NSString *seedPath = [[NSBundle mainBundle] pathForResource:@"RKSeedDatabase" ofType:@"sqlite"];
NSError *error;
NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:seedPath withConfiguration:nil options:nil error:&error];
NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error);

// Create the managed object contexts
[managedObjectStore createManagedObjectContexts]; 
```

# visual-c++ - 使用opencv进行双阈值

> ID：14237221
> 
> 赞同：3
> 
> 时间：2013-01-09T14:16:08.360
> 
> 标签：visual-c++, image-processing, opencv, threshold

我正在使用带有 opencv 库的 Visual C++ 编写代码。我可以对灰度图像（如带通）进行双阈值处理吗？例如，我想将 100 到 176 之间的所有级别设置为 MaxValue，并将所有剩余值设置为零。opencv可以吗？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T15:06:03.560

您可以使用[`inRange`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#inrange)：

```
cv::inRange(src, cv::Scalar(100), cv::Scalar(176), dst); 
```

# css - 单行类

> ID：14237222
> 
> 赞同：3
> 
> 时间：2013-01-09T14:16:10.167
> 
> 标签：css

一位同事刚刚将此添加到我们的项目中。

```
<ol class="numbered-list list-inside" start="1"> 
```

```
.numbered-list
{
    list-style-type: decimal;
}
.list-inside
{
    list-style-position: inside;
} 
```

我在这里遗漏了什么还是这和内联 CSS 一样糟糕？我该如何向我的同事解释这一点？

**编辑**也许我的问题被误解了。不应该是这样的吗？

```
<ol class="info-list" start="1"> 
```

```
.info-list
{
    list-style-type: decimal;
    list-style-position: inside;
} 
```

我要说明的是，类名仅代表它们应用的规则。因此，如果您想更改列表的表示形式，则必须更改 HTML（或更改 CSS，以便最终得到一个与其包含的规则相反的类名）。

**另一个编辑**也许这将进一步帮助您理解我的问题。

```
<p class="red">Hello</p> 
```

```
.red
{
    color: red;
} 
```

现在，您要将文本更改为绿色。看到问题了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:20:53.943

如果这些类在您的项目的其余部分中单独使用，那没关系。如果不需要分离这些样式，那么这样的解决方案可能是不合时宜的。很多时候，如果它们用于不同的目的，您会向一个元素添加多个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:54:22.747

一篇[文章](http://css-tricks.com/semantic-class-names/)证实了我对这种风格的怀疑。最相关的例子是这个：

```
<div class="hyphenate"></div> 
```

> **没有语义的。**试图指定内部内容的行为，而不是描述它实际上是什么。

# c++ - C/C++ mangle 以特定方式导出

> ID：14237231
> 
> 赞同：0
> 
> 时间：2013-01-09T14:16:45.310
> 
> 标签：c++, c, windows, dll

由于特定需要，我需要创建一个 DLL，它导出以特定方式命名的函数，它也被破坏了。

```
?drawGdi@stop@234@@Z 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:04:38.140

你可以这样做，但你必须编写一个 DEF 文件。

# 富.h：

```
extern "C" declspec(dllexport) void foo(int); 
```

# foo.def：

```
EXPORTS
    ?drawGdi@stop@234@@Z=_foo 
```

（`_foo`是函数的导出名称）。

当然，请记住在链接 DLL 时指定 DEF 文件。

有关详细信息，请参阅[有关 DEF 文件的文档](http://msdn.microsoft.com/en-us/library/hyx1zcd3.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:18:54.517

你不能像例如声明你的函数吗

```
 class myclass;
 extern "C" void my_function(int,myclass&); 
```

然后它应该被导出为`my_function`（至少在 Posix 系统上；我想在 Windows 上是一样的，但我不知道）。

如果使用 GCC 编译，您可以使用[Asm Labels](http://gcc.gnu.org/onlinedocs/gcc/Asm-Labels.html)。那么汇编程序可以接受的任何名称都应该是可以的。

在具有 ELF 可执行文件的 Linux 上，您可能无法像 David Schwartz 建议的那样简单地编辑二进制文件（因为这可能会破坏 ELF 中用于符号的一些哈希表）。

# javascript - 纯javascript中等效的jquery函数

> ID：14237233
> 
> 赞同：5
> 
> 时间：2013-01-09T14:16:51.247
> 
> 标签：javascript, jquery

我正在寻找一个文档，其中包含所有 jQuery 函数及其在浏览器本机提供的 API 中的等价物。

有时我只需要一个特定的 jQuery 函数（`.detach()`, `.insertAfter()`, `.on()`, ...），我只为此加载 jQuery。

我想停止我对 jQuery 的依赖，一个 jQuery 到非库的翻译器会对我有很大帮助（我想很多人）。

网络上的某个地方有这样的东西吗？

## 编辑 ：

我找到了：http: [//youmightnotneedjquery.com/](http://youmightnotneedjquery.com/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:24:27.987

您只有在获得 jQuery 对象 $(SELECTOR) 后才调用这些 jQuery 函数。如果您说您不需要 jQuery 选择器代码，而只需要（可能）采用 HTML DOM 元素的函数，则必须从 jQuery 源代码（[http://code.jquery.com/jquery- latest.js](http://code.jquery.com/jquery-latest.js)），具有依赖关系以及大小和复杂性，这可能是一个痛苦的过程。

JS等价物：

.detach - .removeChild

```
var par = elm.parentNode;
par.removeChild(elm); 
```

.insertAfter - .insertBefore[如何在不使用库的情况下在 JavaScript 中插入 After()？](https://stackoverflow.com/questions/4793604/how-to-do-insert-after-in-javascript-without-using-a-library)

```
function insertAfter(referenceNode, newNode) {
    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
} 
```

.on - addEventListener / attachEvent

```
if(elm.addEventListener)
    elm.addEventListener(EVENT_NAME, function() {}, false);
else
    elm.attachEvent('on' + EVENT_NAME, function() {}); 
```

现在，如果您想绑定事件，以便处理程序具有对特定对象的 THIS 引用...

```
function bind( scope, fn ) {
    return function () {
        fn.apply( scope, arguments );
    };
}
if(elm.addEventListener)
    elm.addEventListener(EVENT_NAME, bind(SCOPE_OBJECT, function(){}), false);
else
    elm.attachEvent('on' + EVENT_NAME, bind(SCOPE_OBJECT, function(){})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:23:19.017

如果您也在寻找相同的遗留支持，那么不，由于许多原因，没有这样的事情，例如：

1.  jQuery 在内部重用了它的许多方法，因此您将很难找到单个独立的 api 调用。
2.  jQuery 经常运行多个支持检查浏览器是否本机支持一个方法，然后再为旧支持应用回退。你也需要这样做。

但是，您*可以*通过在 github 上浏览源代码来提取单个方法并做出正确的 vanilla 实现：[https](https://github.com/jquery/jquery) ://github.com/jquery/jquery ，但这会非常耗时。

也就是说，许多 dom 操作非常简单，以至于您一开始就不需要 jQuery，例如添加一个类：

```
elem.className += 'class' 
```

但是对 jQuery 进行逆向工程并不是摆脱 jQuery 依赖的明智方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:18:53.860

也许您正在寻找 jQuery 源代码？

[http://docs.jquery.com/Source_Code](http://docs.jquery.com/Source_Code)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:25:08.110

我从来没有见过一个。JQuery 处理了许多浏览器差异，因此要编写通常在 JQuery 中使用简单命令编写的内容，可能需要在普通的旧 JavaScript 中编写更多代码。

考虑到这一点，我认为您希望摆脱对 jQuery 的依赖并了解更多有关 JavaScript 原生方法的信息，这是令人钦佩的。

查看[JQuery 背后的代码](http://code.jquery.com/jquery-latest.js)可能有助于您入门。否则，当您有特定问题时，为什么不回到这个网站。我相信这里的人可以告诉你关于`.detach()`, `.insertAfter()`,`.on()`等的信息，但每个人可能都需要一个单独的问题和一些关于你首先要做什么的解释。

希望这会有所帮助（或至少是令人鼓舞的）。

# ios - iOS - UIView。使用 drawRect 进行数据检索有什么限制？

> ID：14237240
> 
> 赞同：0
> 
> 时间：2013-01-09T14:17:04.973
> 
> 标签：ios, nsurlconnection, objective-c-blocks, drawrect, nsurlconnectiondelegate

对于我的 iOS 应用程序，我正在实现一个几乎存在但不完全存在的“惰性”数据加载方案。因此，我重写了我的`UIView`子类`drawRect`方法：

被覆盖的`drawRect`方法

```
CGContextRef context = UIGraphicsGetCurrentContext();

[self.featureSource featuresForInterval:interval completionHandler:^(NSData *data) {

    // Create list of features from retrieved data
    FeatureList *features = [[[FeatureList alloc] initWithData:data] autorelease];

    // Render features
    [self.currentRenderer renderInContext:context rect:rect featureList:featureList;
}]; 
```

一个绘制红色的简单渲染器：

```
// A trivial renderer that paints red
- (void)renderInContext:(CGContextRef)context rect:(CGRect)rect featureList:(FeatureList *) featureList {

    [[UIColor redColor] setFill];
    UIRectFill(rect);

} 
```

特征检索方法...

```
- (void)featuresForInterval:(FeatureInterval *)interval completionHandler:(void (^)(NSData *))completionHandler 
```

`NSURLConnection`... 使用的异步委托方法回调从云端检索数据。在数据完成方法中，`- (void)connectionDidFinishLoading:(NSURLConnection *)connection`我调用`completionHandler`上面显示的方法来进行实际渲染。

问题。这成功地检索了数据，但是当调用渲染方法时没有绘制任何内容。我在控制台上收到以下消息：

```
2013-01-08 21:02:34.417 IGV[49732:f803] -[URLDataLoader connection:didReceiveResponse:] [Line 248] data 0
2013-01-08 21:02:34.417 IGV[49732:f803] -[URLDataLoader connection:didReceiveData:] [Line 260] data 998
2013-01-08 21:02:34.419 IGV[49732:f803] -[URLDataLoader connection:didReceiveData:] [Line 260] data 2446
2013-01-08 21:02:34.423 IGV[49732:f803] -[URLDataLoader connection:didReceiveData:] [Line 260] data 3845
2013-01-08 21:02:34.424 IGV[49732:f803] -[URLDataLoader connectionDidFinishLoading:] [Line 275] data 3845
Jan  8 21:02:34 new-host-5.home IGV[49732] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Jan  8 21:02:34 new-host-5.home IGV[49732] <Error>: CGContextGetCompositeOperation: invalid context 0x0
Jan  8 21:02:34 new-host-5.home IGV[49732] <Error>: CGContextSetCompositeOperation: invalid context 0x0
Jan  8 21:02:34 new-host-5.home IGV[49732] <Error>: CGContextFillRects: invalid context 0x0 
```

有人可以帮助我了解这里发生了什么。

谢谢，
道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:20:03.407

您需要调用`[yourView setNeedsDisplay]`以使其呈现。`CGContextRef`iOS在运行循环期间为您设置 ，以便在您调用`UIGraphicsGetCurrentContext()`. 调用`[yourView setNeedsDisplay]`将启动该过程，您无需`drawRect`直接调用。

您可能想阅读[本文](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html)以了解有关机制的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:21:54.207

问题是您的请求是异步的。这意味着 drawRect: 在请求完成之前完成。
考虑在您的视图类上创建一个属性/变量并实现 drawRect: 如下所示：

```
if(self.features) {
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.currentRenderer renderInContext:context rect:rect featureList:featureList;
} else {
    [self.featureSource featuresForInterval:interval completionHandler:^(NSData *data) {

        // Create list of features from retrieved data
        self.features = [[[FeatureList alloc] initWithData:data] autorelease];
        [self setNeedsDisplay];
    }];
} 
```

# python - 在南亚编号系统中使用正则表达式逗号分隔大数

> ID：14237241
> 
> 赞同：7
> 
> 时间：2013-01-09T14:17:05.413
> 
> 标签：python, regex, comma

我试图找到一个正则表达式来根据[南亚编号系统](http://en.wikipedia.org/wiki/Indian_numbering_system)用逗号分隔一个大数字。

几个例子：

*   `1,000,000`（阿拉伯语）是`10,00,000`（印度/印度教/南亚）
*   `1,000,000,000`（阿拉伯语）是`100,00,00,000`（印度/H/SA）。

逗号模式每 7 个数字重复一次。例如， `1,00,00,000,00,00,000`。

从 Friedl 的 Mastering Regular Expressions 一书中，我有以下阿拉伯编号系统的正则表达式：

```
r'(?<=\d)(?=(\d{3})+(?!\d))' 
```

对于印度编号系统，我提出了以下表达式，但它不适用于超过 8 位的数字：

```
r'(?<=\d)(?=(((\d{2}){0,2}\d{3})(?=\b)))' 
```

使用上述模式，我得到`100000000,00,00,000`.

我正在使用 Python`re`模块 ( `re.sub()`)。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T15:08:23.577

我知道蒂姆已经回答了您提出的问题，但是假设您从数字而不是字符串开始，您是否考虑过是否需要正则表达式？如果您使用的机器支持印度语言环境，那么您可以只使用语言环境模块：

```
>>> import locale
>>> locale.setlocale(locale.LC_NUMERIC, "en_IN")
'en_IN'
>>> locale.format("%d", 10000000, grouping=True)
'1,00,00,000' 
```

该解释器会话是从 Ubuntu 系统复制的，但请注意，Windows 系统可能不支持合适的语言环境（至少我的不支持），因此虽然这在某些方面是一个“更清洁”的解决方案，但取决于您的环境，它可能或可能无法使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T14:34:51.760

试试这个：

```
(?<=\d)(?=(\d{2}){0,2}\d{3}(\d{7})*(?!\d)) 
```

例如：

```
>>> import re
>>> inp = ["1" + "0"*i for i in range(20)]
>>> [re.sub(r"(?<=\d)(?=(\d{2}){0,2}\d{3}(\d{7})*(?!\d))", ",", i) 
     for i in inp]
['1', '10', '100', '1,000', '10,000', '1,00,000', '10,00,000', '1,00,00,000', 
 '10,00,00,000', '100,00,00,000', '1,000,00,00,000', '10,000,00,00,000', 
 '1,00,000,00,00,000', '10,00,000,00,00,000', '1,00,00,000,00,00,000', 
 '10,00,00,000,00,00,000', '100,00,00,000,00,00,000', 
 '1,000,00,00,000,00,00,000', '10,000,00,00,000,00,00,000',
 '1,00,000,00,00,000,00,00,000'] 
```

作为评论的正则表达式：

```
result = re.sub(
    r"""(?x)       # Enable verbose mode (comments)
    (?<=\d)        # Assert that we're not at the start of the number.
    (?=            # Assert that it's possible to match:
     (\d{2}){0,2}  # 0, 2 or 4 digits,
     \d{3}         # followed by 3 digits,
     (\d{7})*      # followed by 0, 7, 14, 21 ... digits,
     (?!\d)        # and no more digits after that.
    )              # End of lookahead assertion.""", 
    ",", subject) 
```

# html - 如何强制 li 元素水平滚动，并且应该能够使用 css 在一行中容纳所有 li 元素

> ID：14237249
> 
> 赞同：1
> 
> 时间：2013-01-09T14:17:17.657
> 
> 标签：html, css

我正在尝试将 li 元素的默认滚动从垂直更改为水平。我能够做到这一点，但它作为一行中的元素列表出现，然后是它下面的另一个元素列表。但我希望所有列表都在一行中，而不管 li 元素的数量如何。

HTML 中的代码：

```
<div class="imageGallery">
       <ul>
           <li><img src="img01.png"/></li>
           <li><img src="img02.png"/></li>
           <li><img src="img03.png"/></li>
           <li><img src="img04.png"/></li>
           .....
           .....
       </ul>
</div> 
```

CSS：

```
.imageGallery {
    overflow-x: scroll;
        overflow-y: hidden;

}   
        ul {
        width: 1500px;
        margin: 0;
        padding: 0;
    } 
```

输出以水平滚动条的形式出现，其中包含一行中的图像列表，然后是其下方的元素列表，依此类推。我怎样才能使它全部进入单行？

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:36:59.260

如果我理解得很好，您希望所有 li 元素都保持在一行中。把它放在你的 CSS 中

```
.imageGallery ul{
    white-space: nowrap
} 
.imageGallery li{ 
    display:inline-block 
} 
```

# php - AJAX，从服务器获取答案并在停止 php 的功能工作后

> ID：14237253
> 
> 赞同：0
> 
> 时间：2013-01-09T14:17:23.933
> 
> 标签：php, jquery, ajax

在我在服务器上打印数据之后，使用 jquery AJAX 在服务器上发送数据：

php代码：

```
function someFunc () 
    echo json_encode("some");
} 
```

并在 js 中获取此数据：

```
$.ajax({
   // here code for send
   success: function (htm) {
            htm = JSON.parse(htm);
            alert(htm);
        }
    }); 
```

这行得通，但是当我需要从服务器获取 asnwer 并且停止 php 函数工作后，在 js 中我没有获取数据，也就是说，这不起作用

```
function someFunc () 
    echo json_encode("some");
    return false;
} 
```

没有`return false;`作品。请告诉为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:21:47.437

您应该只 exit() 而不是返回 false。

# jaxb - 在 xml 中隐藏一个只有在解组时才能检索到的值

> ID：14237255
> 
> 赞同：3
> 
> 时间：2013-01-09T14:17:30.160
> 
> 标签：jaxb, jaxb2

是否可以在 XML 中隐藏一个值，以便只有在解组时才能检索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:33:07.880

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果您使用 MOXy 作为您的 JAXB 提供程序，以下是一些用于实现此用例的选项。要将 MOXy 用作您的 JAXB 提供程序，您需要包含一个`jaxb.properties`与您的域模型在同一包中命名的文件，其中包含以下条目：

**选项1 -`XmlAdapter`**

An`XmlAdapter`可用于在封送操作期间清空属性值。虽然`XmlAdapter`是标准 JAXB 类，但从`marshal`方法返回 null 会导致在使用 JAXB 参考实现时发生异常。

***字符串适配器***

```
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class StringAdapter extends XmlAdapter<String, String> {

    @Override
    public String marshal(String string) throws Exception {
        return null;
    }

    @Override
    public String unmarshal(String string) throws Exception {
        return string;
    }

} 
```

***人***

```
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement(name="Person")
public class Person {

    String password;

    @XmlJavaTypeAdapter(StringAdapter.class)
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

***选项 #2 - 没有吸气剂的二传手***

当 MOXy 用作 JAXB 提供程序时，如果您的属性带有带注释的 setter 而没有 getter，则 MOXy 会将其视为只读属性。

```
import javax.xml.bind.annotation.*;

@XmlRootElement(name="Person")
public class Person {

    String password;

    @XmlElement
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

**选项 #3 - MOXy 的`@XmlReadOnly`扩展**

MOXy 的`@XmlReadOnly`扩展也可用于将属性标记为只读。

```
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlReadOnly;

@XmlRootElement(name="Person")
public class Person {

    String password;

    @XmlReadOnly
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

**演示代码**

***输入.xml***

```
<Person>
    <password> some password </password>
</Person> 
```

****演示****

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Person.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14231799/input.xml");
        Person person = (Person) unmarshaller.unmarshal(xml);

        System.out.println(person.password);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(person, System.out);
    }

} 
```

***输出***

```
 some password 
<?xml version="1.0" encoding="UTF-8"?>
<Person/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:53:52.177

以下方法可用于任何[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现。

**演示**

A`Marshaller.Listener`可用于在编组对象之前清空一个值，然后再将其恢复。

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Person.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14231799/input.xml");
        Person person = (Person) unmarshaller.unmarshal(xml);

        System.out.println(person.password);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setListener(new Marshaller.Listener() {

            private String password;

            @Override
            public void afterMarshal(Object object) {
                if(object instanceof Person) {
                    Person person = (Person) object;
                    person.setPassword(password);
                    password = null;
                }
            }

            @Override
            public void beforeMarshal(Object object) {
                if(object instanceof Person) {
                    Person person = (Person) object;
                    password = person.getPassword();
                    person.setPassword(null);
                }
            }
        });
        marshaller.marshal(person, System.out);

        System.out.println(person.password);
    }

} 
```

**输入.xml**

```
<Person>
    <password> some password </password>
</Person> 
```

**输出**

```
 some password 
<?xml version="1.0" encoding="UTF-8"?>
<Person/>
 some password 
```

# xml - 如何填写在线表格并在 R 中返回结果

> ID：14237257
> 
> 赞同：10
> 
> 时间：2013-01-09T14:17:35.807
> 
> 标签：xml, r, forms, web-scraping, rselenium

有没有人从 R 远程填写过网络表格？

我想用我的分数在 R 中做一些射箭统计。有一个非常方便的网页，为您提供分类和障碍[http://www.archersmate.co.uk/](http://www.archersmate.co.uk/)，我自然希望将其包含在我的统计表中。

是否可以远程填写此表格并将结果返回给 R？？？

否则，我将不得不自己获取所有障碍表并将它们放入数据库中。

**更新：我们已将问题缩小到事实，即表单提交按钮是用 javascript 编写的。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-24T00:41:01.820

您可以使用该`RSelenium`软件包来填写和提交 Web 表单并检索结果。

以下利用[RSelenium](https://github.com/ropensci/RSelenium)的代码将下载示例输入的数据（男性，18 岁以下，长弓，布里斯托尔 V，500）：

```
library(RSelenium)

# Start Selenium Server --------------------------------------------------------

checkForServer()
startServer()
remDrv <- remoteDriver()
remDrv$open()

# Simulate browser session and fill out form -----------------------------------

remDrv$navigate('http://www.archersmate.co.uk/')
remDrv$findElement(using = "xpath", "//input[@value = 'Male']")$clickElement()
Sys.sleep(2) 
remDrv$findElement(using = "xpath", "//select[@id = 'drpAge']/option[@value = 'Under 18']")$clickElement()
remDrv$findElement(using = "xpath", "//input[@value ='Longbow']")$clickElement() 
remDrv$findElement(using = "xpath", "//select[@id = 'rnd']/option[@value = 'Bristol V']")$clickElement()
remDrv$findElement(using = "xpath", "//input[@id ='scr']")$sendKeysToElement(list('5', '0', '0'))
remDrv$findElement(using = "xpath", "//input[@id = 'cmdCalc']")$clickElement()

# Retrieve and download results injecting javascript ---------------------------

Sys.sleep(2)
clsf <- remDrv$executeScript(script = 'return $("#txtClass").val();', args = list())[[1]]
hndcp <- remDrv$executeScript(script = 'return $("#txtHandicap").val();', args = list())[[1]]

remDrv$quit()
remDrv$closeServer() 
```

默认浏览器`RSelenium`是 Firefox。但是，`RSelenium`甚至支持使用`PhantomJS`. 为了利用`PhanomJS`你只需要

*   [下载 PhantomJS](http://phantomjs.org/download.html)并将其放在用户路径中
*   替换开头和结尾的代码片段，如下所述

默认浏览（如上图）：

```
checkForServer()
startServer()
remDrv <- remoteDriver()

...

remDrv$quit()
remDrv$closeServer() 
```

无头浏览：

```
pJS <- phantom()
remDrv <- remoteDriver(browserName = 'phantomjs')

...

remDrv$close()
pJS$stop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T17:10:31.250

这可能对您没有帮助，因为我正在寻找类似问题的答案，但是查看您想要抓取的 URL，要填写的表单实际上是 HTML 表单，您可以通过以下方式获取描述：

```
url <- "http://www.archersmate.co.uk/"
forms <- getHTMLFormDescription(url) 
```

另请查看 omegahat.org 上的“RHTMLForms”包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T13:25:16.173

这在 RCurl 中是做不到的，因为表单会触发 ajax 事件，所以 postForm 函数是不够的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T18:00:24.157

你可能想看看 Rcurl's `postForm` [here](http://svitsrv25.epfl.ch/R-doc/library/RCurl/html/postForm.html)和 theres also a nice tutorial [here](http://rfunction.com/archives/1816)

# android - 添加新项目时调用 Requery 后，带有 CursorAdapter 的 Android ListView 滚动位置不正确

> ID：14237260
> 
> 赞同：7
> 
> 时间：2013-01-09T14:17:51.990
> 
> 标签：android, android-listview, xamarin.android, android-cursoradapter

场景如下：我有一个简单的 ListView 显示 twitter 提要。我有一个从 sqlite 获取推文的 CursorAdapter。当我在光标上调用 requery() 时，我希望将获取已添加到数据库中的新推文。这一切都很好，发生这种情况后，新项目甚至在 ListView 中可见。

问题是滚动位置似乎是根据项目位置偏移量保存的。因此，假设我的 ListView 中的第一个可见位置是 4。当我重新查询并将 2 个新项目添加到列表顶部时，ListView 将第一个可见项目滚动位置保持为 4，但是由于列表中有两个新项目，我现在在位置 4 看到了与刷新之前不同的项目。此图说明了之前和之后： ![在此处输入图像描述](../Images/d8abd0bbff9673fd0e706c8082088008.png)

注意之前，**Tweet D**是第一个可见项目，之后，**Tweet B**现在成为第一个可见项目。

我的问题是，如何在调用重新查询时根据光标位置保持相同的滚动位置，以便在此示例中，**Tweet D**仍然是重新查询后的第一个可见项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:46:21.707

我在我的一个项目中遇到了类似的问题。这是我解决它的方法。虽然情况并不完全相同。希望能帮助到你。

在更新列表之前，请以这种方式保存滚动位置 -

```
int position = getListView().getFirstVisiblePosition();
View v = getListView().getChildAt(0);
int top = v == null ? 0 : v.getTop(); 
```

然后在更新列表后，您将知道添加了多少项目。所以你可以打电话

```
yourlistview.setSelectionFromTop(position + <number of items added>, top); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:32:12.873

我的建议是跟踪列表中的项目数量。一旦您知道这一点，作为更新的一部分，您可以添加旧计数和新计数之间的差异。

伪代码

on_update

```
 offset+= (list_view.length() - list_size)
  list_size = list_view.length() 
```

# ajax - wordpress 中的 $.ajax - 速度慢且不缓存

> ID：14237262
> 
> 赞同：0
> 
> 时间：2013-01-09T14:17:59.637
> 
> 标签：ajax, performance, wordpress, caching, response

我在使用与 wordpress 和 ajax 相关的脚本时遇到问题。我认为它的加载速度非常慢，如果我点击点击的链接，它需要完全相同的时间（不是缓存）

我正在做的是，在其他页面中加载 single.php。每次单击链接帖子时，该帖子都会通过 div 中的 Ajax 加载。

```
jQuery.ajax({
        'url':post_link,
        'type':'POST',
        'beforeSend': function(){
            jQuery(".container").html('<img src="ajax-loader.gif" />');
        },
        'success':function(results){
            // some functions
        }
}); 
```

任何想法这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:25:03.453

**HTTP POST**指令不被缓存；如果要进行缓存，则需要使用**HTTP GET/HEAD 。**

至于为什么它“慢”，您提供的信息不足以继续。

# android-layout - Android TextView 以编程方式遵循 XML

> ID：14237268
> 
> 赞同：1
> 
> 时间：2013-01-09T14:18:21.797
> 
> 标签：android-layout, textview, android-xml, android

我目前有这个xml：

```
<TextView android:id="@+id/dummy"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:gravity="center"
android:text="@string/test"
android:textStyle="bold" /> 
```

我试图将其转换为 java 版本，以便我可以设置字体：

```
setContentView(R.layout.activity_main);

// the get the activity_main layout (getContentView method does not exist?)
FrameLayout layout = (FrameLayout) findViewById(android.R.id.content);

final TextView textView = new TextView(context);
textView.setId(R.id.dummy);

FrameLayout.LayoutParams contentLayout = new FrameLayout.LayoutParams(
    LayoutParams.MATCH_PARENT,
    LayoutParams.MATCH_PARENT);
contentLayout.gravity = Gravity.CENTER;
textView.setText(R.string.test);

Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/arial.ttf");
textView.setTypeface(tf);

layout.addView(textView, contentLayout); 
```

我遇到的问题是重力不起作用或 match_parent。文本最终位于右上角，而不是像在 xml 版本上那样位于中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:34:10.647

在XML 中，您正在*设置*`TextView`. 在代码中，您正在设置 TextView 的*布局*重力。

要复制您在 XML 中所做的事情，请更改以下行：

```
contentLayout.gravity = Gravity.CENTER; 
```

到：

```
textView.setGravity(Gravity.CENTER); 
```

如果您的 XML 有`android:layout_gravity="center"`，`android:gravity="center"`那么您的代码将按原样匹配。

# c# - C#编码转换

> ID：14237269
> 
> 赞同：1
> 
> 时间：2013-01-09T14:18:27.857
> 
> 标签：c#, encoding

我在 C++ 中有一个加密例程，我将它翻译成 C#：

**例子：**

```
public void main()
{
    string myPwd = "ÖFÖæ6";
    string pwdCoded = XEncrypt.EncryptData_Patch_x_Net(myPwd);
    //Result OK: ÖFÖæ–6
}

public static string EncryptData_Patch_x_Net(string Data)
{
    byte[] bytes = new byte[Data.Length];

    for (int n = 0; n < Data.Length; n++)
    {
        bytes[n] = (byte)Data[n];
    }

    System.Text.Encoding MyEncoding = System.Text.Encoding.Default;
    String MyResult = MyEncoding.GetString(bytes);
    return MyResult;
} 
```

我需要制作使其转换为的逆例程：

**`ÖFÖæ–6`**to **`ÖFÖæ6`**（注意左边的字符串中有一个破折号）

我做了最后一个功能，但错误地执行了编码

```
public static string DecryptData_Patch_x_Net(string Data)
{
    byte[] bytes = new byte[Data.Length];

    for (int n = 0; n < Data.Length; n++)
    {
        bytes[n] = (byte)Data[n];
    }

    System.Text.Encoding MyEncoding = System.Text.Encoding.GetEncoding(1252);
    String MyResult = MyEncoding.GetString(bytes);
    return MyResult;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:50:12.833

这不是加密，您正在严重复杂化它的实际情况。

```
Encoding iso88591 = Encoding.GetEncoding(28591);
Encoding w1252 = Encoding.GetEncoding(1252);

//
string pwd = "ÖFÖæ\u00966"; //The SPA control character will not survice a Stackoverflow post
                            //So I use \u0096 to represent it

string result = w1252.GetString(iso88591.GetBytes(pwd)); //"ÖFÖæ–6"

string original = iso88591.GetString(w1252.GetBytes(result)); //"ÖFÖæ6" with the hidden control character before 6

Console.WriteLine(result == "ÖFÖæ–6"); //True
Console.WriteLine(original == "ÖFÖæ\u00966"); //True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:13:06.870

Your misnamed `...Encrypt...` function makes a fundamental error. You take a `string`, which treat as a `char[]` (thats fine), then explicitly cast each `char` to a `byte`. That is a narrowing conversion. You'll lose any of the high bits and the ability to round trip more unusual `char`s. If you look at [this question](https://stackoverflow.com/questions/472906/net-string-to-byte-array-c-sharp) it should help to understand.

You could use this function to get the bytes without loss of information,

```
static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

The byte array will round trip on systems that share endianess.

* * *

As Esailija states, becuase its simple and it will explicitly return little endian results, you're better off calling

```
byte[] Encoding.Unicode.GetBytes(string) 
```

[To achieve the same.](http://msdn.microsoft.com/en-us/library/ds4kkd55.aspx)

# php - MySQL更新数据库时出错

> ID：14237271
> 
> 赞同：-2
> 
> 时间：2013-01-09T14:18:38.667
> 
> 标签：php, mysql

```
$column = "`0907001`='0',`0907002`='0',`0907003`='0',`0907004`='0',`0907005`='0'";
$date="01/01/2013";   
$sql_cmd = "UPDATE `$database`.`$table` SET ($column) WHERE `$table`.`Date` = '$date'";
if(!mysql_query($sql_cmd)) {
  die('inside AddUserToDataBase Error: ' . mysql_error());                      
} 
```

在这里我得到一个错误错误是

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(`0907001`='0',`0907002`='0',`0907003`='0',`0907004`='0',`0907005`='0') WHERE `C' at line 1 
```

请帮助....我该如何解决这个问题........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:21:17.437

只需在查询中删除`(` `)`周围`$columns`：

```
$sql_cmd = "UPDATE `$database`.`$table` SET $column WHERE `$table`.`Date` = '$date'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:20:48.547

删除列周围的括号。代替：

`UPDATE TABLE table SET (column = value)`

它应该是

`UPDATE TABLE table SET column = value`

# javascript - 如果仅选中一个复选框，如何向前跳过一步并设置一个值

> ID：14237274
> 
> 赞同：4
> 
> 时间：2013-01-09T14:18:43.020
> 
> 标签：javascript, jquery, html

我目前正在创建一个使用步骤的捐赠表格。为了一步一步地移动，我正在使用 jQuery（特别是以下函数）：

```
function showNextStep(currentStep) {
    $("#step" + currentStep).slideToggle("slow", function () {
        if (currentStep === 1) {
            //figure out what kind of donation they are making
            var chosenDonationType = $("[name=donationType]").val();
            //show the apppropriate slide
            switch (chosenDonationType) {
            case "oneTimeGift":
                currentStep += 1;
                $("#makingAOneTimeGift").show();
                $("#step" + currentStep).slideToggle("slow");
                break;
            case "recurringDonation":
                currentStep += 1;
                $("#makingARecurringGift").show();
                $("#step" + currentStep).slideToggle("slow");
                break;
                //if somehow they changed it to something else, ignore them and return false.
            default:
                return false;
                //break; not needed due to return
            }//end switch
        } else {
            currentStep += 1;
            $("#step" + currentStep).slideToggle("slow");
        }
    });
} 
```

我也有一份用户可以捐赠的资金清单。之后的步骤 (id="step4") 用于分配。如果用户只选择一个复选框，我想跳过该步骤并将相应的输入值设置为 100。抓住的是，我不知道如何遍历复选框数组（我假设使用 [name=list-item]）并发现只选择了一个，确定哪个，然后跳过下一步下一步和将相应分配框的值设置为 100。执行此操作的性能有效方法是什么？

复选框使用以下样式：

```
<label class="checkbox">
    <input type="checkbox" id="showGoodMenGoodCitizensAllocation" name="list-items[]" value="Good_Men_Good_Citizens" />
    Good Men, Good Citizens Scholarship
</label>
<label class="checkbox">
    <input type="checkbox" id="showClassof2012Allocation" name="list-items[]" value="Class_Of_2012" />
    Class of 2012 Scholarship <abbr title="In Honor Of">IHO</abbr> Mr. Jason M. Ferguson &rsquo;96
</label>
<label class="checkbox">
    <input type="checkbox" id="showClassof2011Allocation" name="list-items[]" value="Class_Of_2011" />
    Class of 2011 Scholarship <abbr title="In Honor Of">IHO</abbr> Ms. Anita Garland
</label> 
```

分配输入如下：

```
<div id="GoodMenGoodCitizensAllocation" class="input-append hiddenByDefault">
    <input type="number" name="Good_Men_Good_Citizens-Allocation" min="0" max="100" value="0" />
    <span class="add-on">&#37; to the Good Men, Good Citizens Scholarship</span>
</div>
<div id="ClassOf2012Allocation" class="input-append hiddenByDefault">
    <input type="number" name="Class_Of_2012-Allocation" min="0" max="100" value="0" />
    <span class="add-on">&#37; to the Class of 2012 Scholarship <abbr title="In Honor Of">IHO</abbr> Mr. Jason M. Ferguson &rsquo;96</span>
</div>
<div id="ClassOf2011Allocation" class="input-append hiddenByDefault">
    <input type="number" name="Class_Of_2011-Allocation" min="0" max="100" value="0" />
    <span class="add-on">&#37; to the Class of 2011 Scholarship <abbr title="In Honor Of">IHO</abbr> Ms. Anita Garland</span>
</div> 
```

完整页面代码： http: [//pastebin.com/yFv2day1](http://pastebin.com/yFv2day1)

对于当前使用的完整 javascript 代码：http: [//pastebin.com/P0YVRuqY](http://pastebin.com/P0YVRuqY)

我正在使用的资源：

*   PHP
*   jQuery 1.8.3
*   推特引导

提前感谢大家的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:25:02.620

遍历一组复选框并找出选中的复选框：

```
$("#YOUR-FORM input[type=checkbox]").each(function (i, e) {

    if ($(e).attr("checked") == "checked") {
        // This checkbox is checked... do some stuff
    } else {
        // Not checked...ignore
    }

}); 
```

为了跳过这一步，我需要看更长的时间，但这应该让你开始......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:30:15.170

试试这个片段：

```
var $chck = $("#step3 :checkbox:checked");
if ($chck.length === 1) {
  var selectedVal = $chck.val();//do whatever you want with that
  currentStep += 2;
} else 
  currentStep++;  

$("#step" + currentStep).slideToggle("slow"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:33:14.670

这是我在单击按钮时运行的示例：

```
$(function () {
  $('#evaluate').click(function () {
    var checked = $('input[name="list-items[]"]:checked');
    if (checked.length == 1) {
      alert('one checked: ' + checked.val());
    } else {
      var vals = [];
      checked.each(function () {
        vals.push($(this).val());
      });
      alert(checked.length + " boxes checked: " + vals);
      }
    })
  }); 
```

[jsfiddle 示例](http://jsfiddle.net/tVt2A/)

# xml - XML 的 XSD 验证：找不到元素的声明

> ID：14237275
> 
> 赞同：2
> 
> 时间：2013-01-09T14:18:46.953
> 
> 标签：xml, xsd

我一直在通过 xsd 进行 XML 验证，但我还是新手。我尝试验证此 xml，但它向我弹出此错误：*cvc-elt.1：找不到元素“客户”的声明。[5]*

```
<?xml version="1.0"?>

<customers xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://w3schools.com requested_customer.xsd">

 <customer name="Vladimir Putin" address="St. Petersburg, wadim street 23, Russia"/>
</customers> 
```

和 XSD

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <xs:element name="customers">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="customer">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="name"/>
                <xs:attribute type="xs:string" name="address"/>
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:43:18.287

首先，您的 XML 不为其内容使用 XML 名称空间，因此要在没有目标名称空间的情况下引用 XSD 的文件位置，您应该改用[xsi:noNamespaceSchemaLocation](http://msdn.microsoft.com/en-us/library/ms256139.aspx)属性。

其次，您必须确保验证程序知道 XSD 文件的位置，并且可以访问该位置。

您的 XML/XSD 组合是完全有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:00:44.893

此外，如果您的意图是允许多个 inside `customer`，`customers`您将需要更改：

```
 <xs:element name="customer"> 
```

到：

```
 <xs:element name="customer" maxOccurs="unbounded"> 
```

当然，`maxOccurs`也可以是有限值，例如`100`。`maxOccurs`（和`minOccurs`）都默认为`1`（[见](http://www.w3schools.com/schema/schema_complex_indicators.asp)）。`minOccurs`也可以`0`。

# java - 从 java 代码运行 mysqldump 不会转储触发器

> ID：14237280
> 
> 赞同：0
> 
> 时间：2013-01-09T14:19:09.353
> 
> 标签：java, triggers, backup, mysqldump

这就是我从java制作mysql转储的方式

```
public static boolean mysqlDump(String destination){
File back=new File("tempsdfsdf.fdr");
Runtime rt = Runtime.getRuntime();
FileWriter fw=null; 
try { 
    fw = new FileWriter(back); 
} 
catch (IOException ex) {
    return false;
} 
Process child; 
try {
    child = rt.exec("mysqldump -h"+generals.DATABASE_SERVER+" -u"+DATABASE_USER+" -p"+DATABASE_PASS+" --single-transaction --routines databasename -r"+destination);
    InputStream in = child.getInputStream(); 
    InputStreamReader xx = new InputStreamReader(in,"utf8"); 
    char[] chars=new char[1024]; 
    int ibyte=0; 
    while((ibyte=xx.read(chars))>0) 
    { 
    fw.write(chars); 
    } 
    fw.close(); 
    Utils.deleteFile(back);
} catch (IOException ex) {
    Logger.getLogger(FRMTestare.class.getName()).log(Level.SEVERE, null, ex);
    return false;
}
return true; 
```

}

转储文件是“目标”，但我必须模拟将 InputStream() 写入文件以确保在威胁结束时完全创建“目标”文件，以便我可以在另一个威胁中压缩它。无论如何这并不重要！我的问题是为什么当我在 cmd 中运行命令时会转储触发器，但是当我使用 Runtime.exec 运行相同的命令时，触发器不会被转储。对不起，代码一团糟，但我整天把它改成转储触发器。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:34:21.223

如果 mysqldump 的参数在您在两个不同的环境中运行时相同，则差异必须在您使用的用户的权限上。

检查命令以哪个用户身份运行（通过在 mysqldumps 运行时在另一个窗口中使用 SHOW PROCESSLIST），这应该显示差异并指出解决方案的方法：更改用户或更改您正在使用的用户的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T19:39:45.557

您明确使用的方式`--routines`也相同 try `--triggers`。您可能会看到差异，因为在您的 shell 中发现和处理各种默认文件的方式与在 JDK 中不同。可能不值得努力追踪它。显式`--triggers`应该工作。

# vba - Microsoft Word 2007 通过下拉菜单显示/隐藏表格

> ID：14237282
> 
> 赞同：0
> 
> 时间：2013-01-09T14:19:13.953
> 
> 标签：vba, ms-word

我遇到了一个找不到答案的问题。我想在 Word 2007 中显示/隐藏表格。如果用户单击下拉列表。有些表格在打印时应该隐藏，有些表格在打印时应该可见。我想我需要使用VBA？

设想：

我有表：a，b，c，d

当用户选择：b,d

表 a、c 打印时应隐藏。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:24:25.733

在第一次谷歌搜索时发现[了这个](http://computer-programming-forum.com/1-vba/c499073e6801ec48.htm "这")。

结果代码：

```
ActiveDocument.Tables(1).Range.Font.Hidden = True
ActiveDocument.Tables(3).Range.Font.Hidden = True 
```

是的，您将不得不使用 vba ...我不确定集合表是基于 0 还是基于 1，您只需要看一下

# java - ColdFusion 没有捕捉到 NoClassDefFoundError

> ID：14237283
> 
> 赞同：6
> 
> 时间：2013-01-09T14:19:14.517
> 
> 标签：java, coldfusion, coldfusion-8

我正在使用 ColdFusion 8。我想`NoClassDefFoundError`在 ColdFusion 中捕获异常，但是我不能……它仍然失败并在 exception.log 文件中记录错误。这是我尝试过的。

```
<cftry>
    <cfset myJavaObject.myMethod()>
    <cfcatch type="any">
        <cfdump var="#cfcatch #">
    </cfcatch>
    <cfcatch type="java.lang.Throwable">
        Horrible exception.
        <cfdump var="#cfcatch #">
    </cfcatch>
</cftry> 
```

但这不起作用。你能告诉我怎么做吗？我需要在特定位置而不是在`OnError`Application.cfc 的函数中捕获此错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T18:01:29.873

现在我喝了更多的咖啡，我认为[cfcatch](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7ec5.html)无法捕捉到`NoClassDefFoundError`. 根据文档，它只处理[Exceptions](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html)：

> *异常*是破坏 ColdFusion 页面中正常指令流的事件，例如数据库操作失败、缺少包含文件和开发人员指定的事件。

`NoClassDefFoundError`是一个[错误](http://docs.oracle.com/javase/6/docs/api/java/lang/Error.html)。

> 错误表示合理的应用程序不应尝试捕获的严重问题

听起来好像`cfcatch`只是为了处理正常的“可恢复”问题而设计的。一旦你获得了`NoClassDefFoundError`. 这是一个严重的错误，你无法克服它（在正常情况下）。您最多只能显示错误消息并退出。

[`Application.onError`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d4a.html)似乎可以处理未捕获的错误，例如`NoClassDefFoundError`，以及异常。所以我认为你能做的最好的就是实施`onError`并让它显示一个错误页面。

```
 <!---- test code --->
    <cfset myJavaObject = createObject("java", "path.to.MyClass") />
    <cfset myJavaObject.myMethod() />

    <!---- Application.cfc --->
    <cfcomponent>
         .... settings ...
         <cffunction name="onError" returnType="void"> 
             <cfargument name="Exception" required="true" /> 
             <cfargument name="EventName" type="string" required="true" /> 
             <h1>onError Test</h1>
             <cfdump var="#Exception#" />
         </cffunction>
    </cfcomponent>

    // test class
    public class MyClass {
        public void myMethod() {
            throw new NoClassDefFoundError ("Testing...");
        }
    } 
```

* * *

**更新**

> Any 类型包括 Java 对象类型 java.lang.Exception 的所有错误。它不包括 java.lang.Throwable 错误。要捕获 Throwable 错误，请在 cfcatch 标记类型属性中指定 java.lang.Throwable

尽管文档说了什么，`Throwable`但在我的任何测试（或您的测试）中捕获都不起作用。这强烈表明行为或文档中存在错误。无论哪种方式，它都*不像*宣传的那样工作，因此如上所述，我知道的唯一替代方法是使用通用错误处理程序。如果您出于某种原因必须坚持使用 Application.cfm 文件，请尝试使用[`<cferror type="exception" ...>`](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_d-e_11.html)

**（荒谬）测试用例：**

```
<cftry>
   <cfset myJavaObject = createObject("java", "path.to.MyClass")>
   <cfset myJavaObject.myMethod()>
   <cfcatch type="java.lang.NoClassDefFoundError">
      CAUGHT java.lang.NoClassDefFoundError
   </cfcatch>
   <cfcatch type="java.lang.LinkageError">
      CAUGHT java.lang.LinkageError
   </cfcatch>
   <cfcatch type="java.lang.Error">
      CAUGHT java.lang.Error
   </cfcatch>
   <cfcatch type="java.lang.Throwable">
      CAUGHT java.lang.Throwable 
   </cfcatch>
   <cfcatch type="any">
      CAUGHT ANY
   </cfcatch>
   <cfcatch>
      CAUGHT
   </cfcatch>
</cftry> 
```

# nhibernate - NHibernate - 过滤的多对多关系返回空记录

> ID：14237285
> 
> 赞同：1
> 
> 时间：2013-01-09T14:19:20.830
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有两个通过多对多关系连接的实体（工作和位置）。最近我们在 Location 实体上实现了软删除逻辑，然后在作业映射上添加了一个过滤器，如下所示：

```
HasManyToMany(x => x.Locations)
.Table("JobLocation")
.ParentKeyColumn("JobId")
.ChildKeyColumn("LocationId")
.ApplyChildFilter<ExcludeDeletedFilter>("IsDeleted = :condition")
.Cascade.None(); 
```

多对多关系的查询如下所示

```
select ... 
from Job job
left outer join JobLocation jl
on jl.JobId = job.Id
left outer join Location loc
on loc.Id = jl.LocationId and IsDeleted = 0 
```

问题是，现在，当获取具有一些已删除位置的作业时，作业实体上的 Locations 集合包含每个已删除位置的空条目。

当通过多对多关系获取这些软删除记录时，处理这些软删除记录的最佳方法是什么。（对于一对多来说，这个过滤器做得很好）

我应该考虑其他哪些选择来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:56:56.167

列表中的项目与索引相关联。当使用列表样式映射持久化时，这些索引将被保留（列表通常不会突然重新排列自己）。

如果过滤一些项目，为了使可见项目有稳定的位置，那么隐藏元素必须有空项目。

考虑使用不同的映射，例如集合、袋子或地图。

# c# - SignerSign 错误 - 没有为商店或对象指定提供者

> ID：14237289
> 
> 赞同：1
> 
> 时间：2013-01-09T14:19:46.180
> 
> 标签：c#, .net, sign, signtool

我正在开发 ac# .net 3.5 应用程序（编译到 anycpu）

我需要签署一个可执行文件。我尝试使用[此处](https://stackoverflow.com/questions/6357759/has-anyone-got-any-code-to-call-signersignex-from-c)的代码进行一些修改。我没有在商店中搜索证书，而是从 pfx 文件中加载了它：

```
 var cert = new X509Certificate2("myCert.pfx", "pass"); 
```

并像这样更改方法符号：

```
 public static void Sign(string appPath, X509Certificate2 cert)
    {
        var pSignerCert = IntPtr.Zero;
        var pSubjectInfo = IntPtr.Zero;
        var pSignatureInfo = IntPtr.Zero;
        var pProviderInfo = IntPtr.Zero;

        pSignerCert = CreateSignerCert(cert);
        pSubjectInfo = CreateSignerSubjectInfo(appPath);
        pSignatureInfo = CreateSignerSignatureInfo();
        pProviderInfo = GetProviderInfo(cert);

           var hResult = NativeMethods.SignerSign(
                pSubjectInfo,
                pSignerCert,
                pSignatureInfo,
                pProviderInfo,
                null,
                IntPtr.Zero,
                IntPtr.Zero
                );

        Console.WriteLine(hResult);
    } 
```

然后我得到这样的提供者信息：

```
 private static IntPtr GetProviderInfo(X509Certificate2 cert)
    {
        if (cert == null || !cert.HasPrivateKey)
        {
            return IntPtr.Zero;
        }

        var key = cert.PublicKey.Key as ICspAsymmetricAlgorithm;
        if (key == null)
        {
            return IntPtr.Zero;
        }

        var providerInfo = new SignerProviderInfo
                               {
                                   cbSize = (uint)Marshal.SizeOf(typeof(SignerProviderInfo)),
                                   pwszProviderName = "Microsoft Enhanced Cryptographic Provider v1.0",
                                   dwProviderType = 0x1,
                                   // PROV_RSA_FULL
                                   dwKeySpec = 0x0,
                                   dwPvkChoice = 0x2, //PVK_TYPE_KEYCONTAINER
                                   providerUnion = new SignerProviderInfo.ProviderInfoUnion
                                                       {
                                                           pwszKeyContainer = key.CspKeyContainerInfo.KeyContainerName
                                                       },
                               };
        var pProviderInfo = Marshal.AllocHGlobal(Marshal.SizeOf(providerInfo));
        Marshal.StructureToPtr(providerInfo, pProviderInfo, false);

        return pProviderInfo;
    } 
```

问题是在某些机器上它工作得很好，但在其他一些机器上我收到以下错误：错误代码 0x80092006 - 没有为商店或对象指定提供程序。

我尝试将 SignTool.exe 与相同的 pfx 文件一起使用，它工作正常。

我试图调查可能导致此行为的原因，但我找不到任何有关此错误正在发生的提示。

有谁知道为什么会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T16:09:07.880

提供者信息应该像这样填写：

```
// get private key information
ICspAsymmetricAlgorithm key = (ICspAsymmetricAlgorithm)certificate.PrivateKey;
const int PVK_TYPE_KEYCONTAINER = 2;

var providerInfo = new SignerProviderInfo
{
   cbSize = (uint)Marshal.SizeOf(typeof(SignerProviderInfo)),
   pwszProviderName = key.CspKeyContainerInfo.ProviderName,
   dwProviderType = (uint)key.CspKeyContainerInfo.ProviderType,
   dwPvkChoice = PVK_TYPE_KEYCONTAINER,
   providerUnion = new SignerProviderInfo.ProviderInfoUnion
   {
       pwszKeyContainer = key.CspKeyContainerInfo.KeyContainerName
   },
}; 
```

# regex - MS Word + VBA + RegExp：获取匹配的页码

> ID：14237292
> 
> 赞同：1
> 
> 时间：2013-01-09T14:19:58.273
> 
> 标签：regex, ms-word, page-numbering

那可能吗？可能不是？然后我怎样才能找到匹配的所有确切出现和相应的页码？

编辑：

我的正则表达式工作正常。我需要的是每场比赛都得到它出现的所有页面。

例子：

```
regex = \b\d{3}\b

123 appears on page 1,4,20
243 appear on page 3,5,7
523 appears on page 9 
```

我如何获得该信息（匹配发生的所有页面？）

这是为了自动创建某种索引。

编辑2：

我有一个基本的工作版本，片段：

```
Set Matches = regExp.Execute(ActiveDocument.range.Text)

For Each Match In Matches    
    Set range = ActiveDocument.range(Match.FirstIndex, Match.FirstIndex + Len(Match.Value))    
    page = range.Information(wdActiveEndAdjustedPageNumber) 
```

问题是 Match.FirstIndex 并不总是指向 ActiveDocument.range 中匹配的第一个字符。Word 表把这搞砸了，因为 ActiveDocument.range.Text 包含不在文本中的字符，它们代表表中的某些内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:35:45.847

我认为这可能更适合超级用户。

问题的答案是“是”。

```
Selection.Information(wdActiveEndAdjustedPageNumber) 
```

VBA 中的上述属性将为您提供选择的页码。

此外，[VBA 可以做一些正则表达式的工作](http://www.regular-expressions.info/vbscript.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T13:40:09.017

结果证明这相当复杂，我不能说我的解决方案是否适用于任何文档。主要问题如问题所示，无法使用 RegexMatch.FirstIndex 来确定实际匹配是否在 MS Word 文档中。这是因为正则表达式匹配是在 range.Text 属性（字符串）上完成的，并且该字符串仅包含与范围对象不同数量的字符，因此索引不匹配。

所以我的解决方案是针对每个匹配项，我在整个文档中为该匹配项进行查找。find 方法给出了一个 Range 对象，从中可以确定正确的页面。

在我的特殊情况下，匹配可能是相同的东西，也可能是不同的值。示例：`343`在我的情况下将与`Prefix-343`. 第二个问题是必须对匹配项进行排序，例如`123`，`324`无论哪个匹配项首先出现在文档中。

如果您需要排序功能，您还需要以下“模块”：

排序字典功能：

[http://www.cpearson.com/excel/CollectionsAndDictionaries.htm](http://www.cpearson.com/excel/CollectionsAndDictionaries.htm)

模块“modQSortInPlace”：

[http://www.cpearson.com/Zips/modQSortInPlace.zip](http://www.cpearson.com/Zips/modQSortInPlace.zip)

如果不需要排序，则不需要它们，但需要`SortDictionary Dict, True`从我的代码中删除相应的函数调用。

现在到我的代码。您可以删除某些部分，尤其是格式化部分。这是针对我的情况的。另外，如果您的匹配是“独特的”，例如。不是前缀，因此您也可以简化代码。您将需要参考“Microsoft 脚本库”。

```
Option Explicit

Sub ExtractRNumbers()

    Dim Dict As Scripting.Dictionary
    Set Dict = CreateObject("Scripting.dictionary")

    Dim regExp, Match, Matches
    Dim rNumber As String
    Dim range As range

    Set regExp = CreateObject("VBScript.RegExp")
    regExp.Pattern = "\b(R-)?\d{2}-\d{4,5}(-\d)?\b"
    regExp.IgnoreCase = False
    regExp.Global = True

    ' determine main section, only extract R-Numbers from main section
    ' and not the Table of contents as example
    ' main section = section with most characters

    Dim section As section
    Dim maxSectionSize As Long
    Dim sectionSize As Long
    Dim sectionIndex As Integer
    Dim currentIndex As Integer
    maxSectionSize = 0
    currentIndex = 1
    For Each section In ActiveDocument.Sections
        sectionSize = Len(section.range.text)
        If sectionSize > maxSectionSize Then
            maxSectionSize = sectionSize
            sectionIndex = currentIndex
        End If
        currentIndex = currentIndex + 1
    Next

    Set Matches = regExp.Execute(ActiveDocument.Sections(sectionIndex).range.text)

    For Each Match In Matches

        ' If the Document contains Tables, ActiveDocument.range.Text will contain
        ' BEL charachters (chr(7)) that probably define the table structure. The issue
        ' is that then Match.FirstIndex does not point to the actual first charachter
        ' of a Match in the Document.
        ' Also there are other things (unknwon) that lead to the same issue, eg.
        ' Match.FirstIndex can not be used to find the actual "matching word" within the
        ' document. Because of that below commented apporach does not work on a generic document

        '   Set range = ActiveDocument.range(Match.FirstIndex, Match.FirstIndex + Len(Match.Value))
        '   page = range.Information(wdActiveEndAdjustedPageNumber)

        ' Maybe there is a simpler solution but this works more or less
        ' the exception beign tables again. see http://support.microsoft.com/kb/274003

        ' After a match is found the whole document is searched using the find method.
        ' For each find result the page number is put into an array (if it is not in the array yet)
        ' Then the match is formatted properly.
        ' After formatting, it is checked if the match was previously already found
        '
        '   If not, we add a new entry to the dictionary (key = formatted match, value = array of page numbers)
        '
        '   If match was already found before (but potentially in a different format! eg R-87-1000 vs 87-1000 as example),
        '   all additional pages are added to the already found pages.

        Set range = ActiveDocument.Sections(sectionIndex).range
        With range.Find
            .text = Match.Value
            .MatchWholeWord = True
            .MatchCase = True
            .Wrap = wdFindStop
        End With

        Dim page As Variant
        Dim pages() As Integer
        Dim index As Integer
        index = 0
        ReDim pages(0)

        Do While range.Find.Execute() = True
            page = range.Information(wdActiveEndAdjustedPageNumber)
            If Not IsInArray(page, pages) Then
                ReDim Preserve pages(index)
                pages(index) = page
                index = index + 1
            End If
        Loop

        ' FORMAT TO PROPER R-NUMBER: This is specific to my case
        rNumber = Match.Value
        If Not rNumber Like "R-*" Then
         rNumber = "R-" & rNumber
        End If
        ' remove possible batch number as r-number
        If Len(rNumber) > 11 Then
            rNumber = Left(rNumber, Len(rNumber) - 2)
        End If
        ' END FORMAT

        If Not Dict.Exists(rNumber) Then
            Dict.Add rNumber, pages
        Else
            Dim existingPages() As Integer
            existingPages = Dict(rNumber)
            For Each page In pages
                If Not IsInArray(page, existingPages) Then
                    ' add additonal pages. this means that the previous match
                    ' was formatted different, eg R-87-1000 vs 87-1000 as example
                    ReDim Preserve existingPages(UBound(existingPages) + 1)
                    existingPages(UBound(existingPages)) = page
                    Dict(rNumber) = existingPages
                End If
            Next
        End If

    Next
    'sort dictionary by key (R-Number)
    SortDictionary Dict, True
    Dim fso
    Set fso = CreateObject("Scripting.FileSystemObject")

    Dim stream
    ' Create a TextStream.
    Set stream = fso.CreateTextFile(ActiveDocument.Path & "\" & ActiveDocument.Name & "-rNumbers.txt", True)

    Dim key As Variant
    Dim output As String
    Dim i As Integer
    For Each key In Dict.Keys()
        output = key & vbTab
        pages = Dict(key)
        For i = LBound(pages) To UBound(pages)
            output = output & pages(i) & ", "
        Next
        output = Left(output, Len(output) - 2)
        stream.WriteLine output        
    Next
    Set Dict = Nothing
    stream.Close
End Sub

Private Function IsInArray(page As Variant, pages As Variant) As Boolean
    Dim i As Integer
    IsInArray = False
    For i = LBound(pages) To UBound(pages)
        If pages(i) = page Then
            IsInArray = True
            Exit For
        End If
    Next
End Function 
```

# javascript - Javascript 未从三星 Galaxy Android 平板电脑读取正确的高度

> ID：14237294
> 
> 赞同：1
> 
> 时间：2013-01-09T14:20:08.207
> 
> 标签：javascript, android-browser

我正在尝试使用 javascript 读取窗口大小，这适用于我测试过的每个平台，除了 Android。我正在根据这个数字调整 div 的大小，这样每个 div 都会填满屏幕。在 android 上，第一页看起来不错，但是一旦你向下滚动，它看起来就像在没有地址栏高度的情况下测量了高度。所以我最终得到了 50px 短的页面，已经显示了下一页。

这是我用来获取平台高度和宽度的代码：

```
app.tab1.sections.fitScreen = function(){
    var w = $(window).outerWidth(),
        h = $(window).outerHeight();

    //Fit all page-containers
    $('#tab1 .page-container').width(w).height( h );

    //Fit the first one(includes the header)
    $('#tab1 #page_1').height( h - ( $('#p-header').outerHeight() + $('#product-navigation').outerHeight() ) );
} 
```

此屏幕截图说明了该问题： [http ://www.imgjoe.com/x/export03.png](http://www.imgjoe.com/x/export03.png)

# oracle - 为什么在 0 行的情况下，Oracle 中的删除也比选择需要更多的时间？

> ID：14237296
> 
> 赞同：1
> 
> 时间：2013-01-09T14:20:10.663
> 
> 标签：oracle, temp, segment

我运行简单的查询：

```
 select * from tableA where fk in (select pk from tableB where column='somevalue') 
```

它返回 0 行并花费时间接近 20 秒但是当我运行时：

```
 delete from tableA where fk in (select pk from tableB where column='somevalue') 
```

它需要将近 3 分钟的时间并产生错误：无法扩展临时段！但这是无稽之谈：删除查询不会删除任何内容！如何解决这个问题？

# python - 分数形式的谐波级数

> ID：14237297
> 
> 赞同：-4
> 
> 时间：2013-01-09T14:20:17.493
> 
> 标签：python, math

有谁知道如何在 python中编写[谐波级数？](http://en.wikipedia.org/wiki/Harmonic_series_(mathematics))

```
H(n) = 1 + 1/2 + 1/3 + ... + 1/n 
```

注意：我们不允许从预定义的模块导入。输出必须是分数形式（最低项）答案的分子和分母。

哦，对不起。我只是一个初学者。我很抱歉。所以这是我这个谐波系列的代码。

```
n = input("Enter n:")  

def harmonic(n):  
    a=1  
    b=1  
    for d in range(2, n+1):  
            a = a*d+b  
            b = b*d  
            return (a,b)  
            x == max(a,b)%min(a, b)  
            if x == 0:  
                y=min(a,b)  
                return y  
            else:  
                y=min(a,b)/x  
                return y  
            a=a/y  
            b=b/y  
            return (a,b)  
print harmonic(n) 
```

怎么了？无论我输入什么，输出总是（3,2）..怎么了？？:(请帮忙..谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:54:29.670

如果没有模块，您要做的就是自己实现分数加法。此外，要获得最低限度的结果，您需要实现/获取一个`gcd`函数。

当你这样做`a/b + c/d`时，结果（没有标准化）是`(ad+bc)/bd`。在调和级数中，请注意其中一个分子（`c`在这种情况下）每次都是 1，因此结果将是`(ad+b)/bd`。

因此，调用序列中`a`的当前分子、`b`当前分母和`d`下一个分母。伪代码将类似于以下内容。`n`是输入整数。

1.  `a`← 1 { 将从`1/1`}开始
2.  `b`← 1
3.  对于`d`[2.. `n`] { From `1/2`to中的所有`1/n`内容，请执行以下操作}
    1.  `a`←`a*d + b`
    2.  `b`←`b*d`
    3.  `x`← `gcd(a,b)`{ 标准化从这里开始 }
    4.  `a`←`a/x`
    5.  `b`←`b/x`
4.  输出 ( `a`, `b`)

# rubygems - 宝石安装

> ID：14237298
> 
> 赞同：0
> 
> 时间：2013-01-09T14:20:21.400
> 
> 标签：rubygems

当我尝试安装 gemcrack 时，我收到以下消息

```
"Irb<main>:001:0> gem install crack
Name Error: undefined local variable or method ‘crack’ for main: Object
From <irb> :1
From C:/Ruby193/bin/irb:12:in ‘&lt;main>’ " 
```

我是一个新学习者，因为我不知道任何编程知识而感到无助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:04:18.680

你正在 irb 中尝试这个。从 irb 退出，然后在 cmd 中正常运行命令“gem install crack”。

# mysql - firebird db 如何处理用户身份验证？

> ID：14237309
> 
> 赞同：1
> 
> 时间：2013-01-09T14:21:04.437
> 
> 标签：mysql, database, authentication, firebird

我有一个 fdb 文件，我想从中恢复数据。也许有问题或者我不明白它是如何工作的，但我的印象是用户身份验证是由服务器处理的。我在我的机器中加载了 fdb 文件，我可以看到表结构，但是当我尝试浏览表时它会抛出“无效密码”消息。

最终我想将数据导出到另一个 mysql 服务器。因此，如果有一条捷径可以到达那里，那就太好了。

我在 Mysql 和 Sqlite 方面更流利，所以也许有一个我不明白的基本 firebird 概念。

Firebird 服务器版本：Windows 上的 2.5.2 我使用 FlameRobin 0.9.2 浏览数据库

我不断得到`Your user name and password are not defined`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:16:40.137

使用默认密码`masterkey`和用户`SYSDBA`
使用firebird，密码在服务器上而不是在数据库中

# symfony - Avoid Symfony2 redirection, where is this handled?

> ID：14237311
> 
> 赞同：0
> 
> 时间：2013-01-09T14:21:13.920
> 
> 标签：symfony

Im trying to understand a webapp that is working fine if the user is logged, but if im trying to access the same page without being logged, the framework automatically redirects me to the login page, I cant find where is the redirection instruction on the code.

The url is like: **mysite.com/app-dev.php/ajax/socialbox?url=some_data**

The main routing file:

```
done_punctis_ajax:
    resource: "@DonePunctisBundle/Resources/config/routing/ajax.yml"
    prefix:   /ajax 
```

The ajax.yml file:

```
done_punctis_ajax_track_url:
    pattern: /socialbox
    defaults: { _controller: DonePunctisBundle:Ajax:socialbox }
    requirements:
        _method: GET
    options:
        expose: true 
```

And the controller im calling is simple as:

```
<?php
namespace Done\PunctisBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

use Done\PunctisBundle\Entity\User;
use Done\PunctisBundle\Entity\VerificationCode;

class AjaxController extends Controller
{
    public function socialboxAction() {
    die("HEY");
}
} ?> 
```

So as you can see i have no instruction in there to handle a redirection, where is this happening, i must say that im working with an app made by somebody else, so i have no idea where to look for the redirection routine. Thanks for any help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:25:33.200

This is possible that you must be logged for this route path, defined in your app/config/security.yml file, check this [documentation](http://symfony.com/doc/current/book/security.html#securing-specific-url-patterns) ! It can explain why you don't see a redirection in the action.

If you are not logged, you can't access the URL and you are redirect to the login page !

# knockout.js - 如何将 DOM 元素绑定到 KnockoutJS 中的特定对象？

> ID：14237314
> 
> 赞同：5
> 
> 时间：2013-01-09T14:21:19.020
> 
> 标签：knockout.js

我有一个可观察的数组，绑定到 contenteditable div 列表。我有一个“添加”按钮。单击时，我将一个对象添加到数组中，并希望将焦点放在相应的 div 上。

```
<ul id='list' data-bind="foreach: array">
  <li>
    <div contenteditable="true" data-bind="text: $data.text"></div>
  </li>
</ul>
<div id="add">+</div> 
```

javascript

```
var viewModel = {
  array: ko.observableArray([])
};

ko.applyBindings(viewModel, document.getElementById('list'));

document.getElementById('add').onclick = function (evt) {
  var newObject = {text : ''};
  viewModel.array.push(newObject);
  // give focus to the newly created div
}; 
```

可以获得具有 DOM 元素的可观察数据`ko.dataFor(dom)`。如何通过数据获取 DOM？

[http://jsfiddle.net/5rxdZ/](http://jsfiddle.net/5rxdZ/)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:32:56.730

您无法从数据本身获取 DOM 元素。不过，在这种情况下，您可以使用`hasfocus`绑定将焦点移至新元素。此处的文档：http: [//knockoutjs.com/documentation/hasfocus-binding.html](http://knockoutjs.com/documentation/hasfocus-binding.html)

即使只是放置`hasfocus: true`一个新元素也可以解决问题。

否则，如果您不希望将焦点应用于最初呈现的元素，则可以为新创建的元素传入一个标志，例如：

```
<ul id='list' data-bind="foreach: array">
  <li>
    <div contenteditable="true" data-bind="hasfocus: $data.focused, text: $data.text"></div>
  </li>
</ul>
<div id="add">+</div> 
```

查看模型：

```
var newObject = {text : '', focused: true};
viewModel.array.push(newObject); 
```

示例：http: [//jsfiddle.net/rniemeyer/jnHK8/](http://jsfiddle.net/rniemeyer/jnHK8/)

# hibernate - 在内存数据库中休眠

> ID：14237316
> 
> 赞同：1
> 
> 时间：2013-01-09T14:21:27.320
> 
> 标签：hibernate

我正在尝试为休眠 DAO 编写单元测试，如果我使用 postgres 方言创建 test-applicationContext，那么我是否需要安装 postgres 来运行测试？有没有更好的方法来做到这一点而不必安装数据库来运行测试用例？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:51:14.483

您可以使用也可以作为内存数据库运行的[H2数据库。](http://www.h2database.com/html/main.html)查看[此博客](http://boplicity.nl/confluence/display/Java/Unit+testing+JPA+-+Hibernate+components+with+in-memory+H2+database)以获取快速示例。

# php - 找到主题标签

> ID：14237317
> 
> 赞同：2
> 
> 时间：2013-01-09T14:21:29.847
> 
> 标签：php

我有一个包含文本的字符串，并且在几个地方会有一个 twitter 风格的标签。我想找到它们并创建一个单独的变量，其中所有变量都用空格分隔。我还想将原始字符串中的所有主题标签转换为链接。例子：

```
$string = "Hello. This is a #hashtag and this is yet another #hashtag. This is #another #example." 
```

功能后：

```
$string_f = "Hello this is a <a href='#'>#hashtag</a> and this is yet another <a href='#'>#hashtag</a>. This is <a href='#'>another</a> <a href='#'>example</a>";

$tags = '#hashtag #another #example'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:26:46.280

要查找所有哈希标记，请使用正则表达式 and [`preg_match_all()`](http://php.net/preg_match_all)，并使用 进行替换[`preg_replace()`](http://php.net/preg_replace)：

```
$regex = '/(#[A-Za-z-]+)/';
preg_match_all( $regex, $string, $matches);
$string_f = preg_replace( $regex, "<a href='#'>$1</a>", $string); 
```

然后所有标签都在一个数组中`$matches[1]`：

```
$tags_array = $matches[1]; 
```

[`implode()`](http://php.net/implode)然后，使用and将其转换为以空格分隔的列表[`array_unique()`](http://php.net/array_unique)：

```
$tags = implode( ' ', array_unique( $tags_array)); 
```

你完成了。您可以从[这个演示](http://viper-7.com/z7b9AG)中看到，`$tags`并且`$string_f`是：

```
"#hashtag #another #example"
"Hello. This is a <a href='#'>#hashtag</a> and this is yet another <a href='#'>#hashtag</a>. This is <a href='#'>#another</a> <a href='#'>#example</a>." 
```

对于主题标签中的其他字符（例如，数字），请`$regex`适当修改。

**编辑：**但是，如果您使用和闭包，这可以提高效率，[`preg_replace_callback()`](http://php.net/preg_replace_callback)因此您只需执行一次正则表达式，如下所示：

```
$tags_array = array();
$string_f = preg_replace_callback( '/(#[A-Za-z-]+)/', function( $match) use( &$tags_array) { 
    $tags_array[] = $match[1];
    return "<a href='#'>" . $match[1] . "</a>";
}, $string);
$tags = implode( ' ', array_unique( $tags_array)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:26:25.507

一个漂亮的正则表达式怎么样？

```
preg_match_all("/#[\w\d]+/", $string, $matches, PREG_SET_ORDER);
unset($matches[0]);
$tags = implode(" ", $matches); 
```

# yii - CButtonColumn，CGridView 中的可见性嵌套异常

> ID：14237318
> 
> 赞同：1
> 
> 时间：2013-01-09T14:21:34.647
> 
> 标签：yii, yii-components, cgridview, cbuttoncolumn

我目前在我的 CGridView 中创建了一个 CButtonColumn 来显示相关模型的几个选项。像这样

```
'buttons' => array(
            'publish' => array(
                'label' => 'Publish',
                'visible' => '(isset($data->deutsch))?true:false;',
                'imageUrl' => Yii::app()->request->baseUrl . '/images/publish.png',
                'click' => "function(){
   ...
return false;
}
...
            ), 
```

其中“deutsch”是 HAS_ONE 关系的名称，我基本上想创建一个可见的异常，首先检查记录是否存在，然后检查该记录中的字段！所以我尝试实现一个嵌套的 if 语句：

```
'visible' => 'if(isset($data->deutsch)){if($data->deutsch->in_something==1){true;}false;} ', 
```

但不幸的是它没有工作。我应该只创建一个函数并调用它还是有更简单的方法来做到这一点？在过去的 2 个小时里，我一直在解决这个问题......

非常感谢任何帮助、提示或建议 :) 感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:45:31.760

```
'visible'=>'(isset($data->deutsch) && $data->deutsch->in_something==1)?true:false;' 
```

应该为你工作，我刚刚在我的一个项目的类似数据集上测试了这个。

# informatica-powercenter - 转换以根据单独表中的值选择数据表

> ID：14237319
> 
> 赞同：1
> 
> 时间：2013-01-09T14:21:42.313
> 
> 标签：informatica-powercenter, informatica

我有三个表（Oracle 源），我们称它们为表 1、2 和 3。

我想检查表 1 中的布尔字段，如果是 TI，只需要表 2 中的数据，如果是 F，我只需要表 3。

哪种转换最有效，我将如何实施它？

我正在试验过滤器、Java 和表达式转换，但如果表达式是逐行检查的，那么表达式在每一行上运行似乎有点过头了，而不是只检查一次并使用合适的表。

表 2 和表 3 都有一个同名字段，根据条件，我希望该字段仅用于其中一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:31:07.403

创建类似于下图的映射：

```
src_TABLE2 --> sq_TABLE2 --|
                           |--> union --> (further processing)
src_TABLE3 --> sq_TABLE3 --| 
```

并在源限定符中使用以下`Source Filter`条件^(* ：)

```
-- for sq_TABLE2
'T' = ( SELECT FLAG FROM TABLE1 )

-- for sq_TABLE3
'F' = ( SELECT FLAG FROM TABLE1 ) 
```

映射中有两个源表，联合转换会合并来自这两个管道的数据。但是，由于任何给定时间的过滤条件，数据将仅从源表之一中检索。

[*`Source Filter`是源限定符的“*属性”选项卡上的一个属性。*您在此处设置的条件将附加到发送到数据库`WHERE`的语句的子句中。`SELECT`]

# layout - Joomla：创建一个跨越多个位置的模块

> ID：14237322
> 
> 赞同：0
> 
> 时间：2013-01-09T14:21:46.273
> 
> 标签：layout, joomla, module, html

我在 sabraso.be 的网站目前显示了几个模块，有点像：

```
[::MODULE 1::][::MODULE 2::][::MODULE 3::][::MODULE 4::]
[::MODULE 1::][::MODULE 2::][::MODULE 3::][::MODULE 4::] 
```

但是，我想更改此布局，使包含横向格式图像的模块 2 跨越位置 2 和 3。之后，模块 3 也应拉伸到模块 2 的宽度并位于其正下方。像这样：

```
[::MODULE 1::][::::::::::MODULE 2::::::::][::MODULE 4::]
[::MODULE 1::][::::::::::MODULE 3::::::::][::MODULE 4::] 
```

在我真正去挖掘模板文件之前，我应该从哪里开始呢？我注意到某些模块会自动拉伸以填充剩余空间，但我似乎无法找到发生这种情况的时间和条件。

现在我已经阅读了关于 Stackoverflow 的一个答案，但我不太确定如何处理它。

# video - 如何下载此视频？

> ID：14237324
> 
> 赞同：0
> 
> 时间：2013-01-09T14:21:49.053
> 
> 标签：video

我女儿在当地电视新闻上，我想下载视频以永久保存：

[http://www.wlns.com/story/20524251/early-flu-season-hits-michigan-hard](http://www.wlns.com/story/20524251/early-flu-season-hits-michigan-hard)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:36:08.420

那么首先你需要感谢我：3

我不得不：

1.  解码并查看所有闪存变量。
2.  对 javascript 文件进行去混淆处理。
3.  搜索一些 asp/xml 文件。
4.  不，差不多就是这样……

**网址的**

*   [http://wlns.videodownload.worldnow.com/WLNS_20130107182005470AC.mp4](http://wlns.videodownload.worldnow.com/WLNS_20130107182005470AC.mp4)
*   [http://wlns.videodownload.worldnow.com/WLNS_20130107182005470AB.flv](http://wlns.videodownload.worldnow.com/WLNS_20130107182005470AB.flv)
*   [http://wlns.videodownload.worldnow.com/WLNS_20130107182005470AE.3gp](http://wlns.videodownload.worldnow.com/WLNS_20130107182005470AE.3gp)

# android - 在 Android 上使用 AudioRecord 的最小音量阈值

> ID：14237328
> 
> 赞同：0
> 
> 时间：2013-01-09T14:21:55.423
> 
> 标签：android, audio-recording, android-audiorecord

我正在创建一个像会说话的汤姆这样的应用程序。我是`AudioRecorder`用来录音的。我只有基本的 Android，没有 Sound Touch。我面临的问题是我只需要录制高于某个音量的音频。

该声明：

```
if (recorder.getState() == AudioRecord.STATE_INITIALIZED)
{
    return recorder;
} 
```

即使是低音量，录音机也会被初始化，即使我停止说话并且背景中有非常低的声音，它也会继续录音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:04:56.793

您可以`AudioRecord`连续运行并以相对接近的间隔进行电平检查（RMS 或您喜欢的任何测量）。一旦声级超过您所需的阈值，请保存缓冲区数据，直到它在给定的时间内降至停止阈值以下，否则将数据丢弃。

# java - 通过 ant 构建脚本将命令行参数传递给 Java

> ID：14237329
> 
> 赞同：10
> 
> 时间：2013-01-09T14:22:10.367
> 
> 标签：java, ant, command-line-arguments

在运行以下命令时：

```
ant targetname -Dk1=v1 -Dk2=v2 
```

`java`我希望将命令行参数传递给`java whatever -Dk1=v1 -Dk2=v2`.

我需要使用`System.getProperty`或从 Java 代码访问这些参数`System.getenv`。

我需要在我的 ant 构建脚本中写什么来实现这一点？

还是我应该完全采取其他方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-09T14:42:50.517

我不确定您希望如何传递这些值，但有几种机制：

*   用于`<sysproperty>`传递您需要设置的系统属性：
*   用于`<arg>`将命令行参数传递给 Java 类
*   用于`<jvmarg>`将参数传递给您的 Java 命令本身
*   如果你 fork 你的 Java 任务，你也可以设置环境变量。如果您不分叉 Java 任务，这些将被忽略

这个：

```
 $ foo=bar; java -Xlingc com.example.foo.bar -Dsys1=fu -Dsys2=barfu -arg1 -arg2 bar 
```

变成：

```
<java classname="com.example.foo.bar"
    fork="true">
    <env key="foo" value="bar"/>
    <sysproperty key="sys1" value="fu"/>
    <sysproperty key="sys2" value="barfu"/>
    <jvmarg value="-Xlingc"/>
    <arg value="-arg1"/>
    <arg value="-arg2"/>
    <arg value="bar"/>
</java> 
```

希望这个例子有帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T14:32:49.500

在 Ant 脚本中不好，但我做了如下的事情：

```
<target name="execute">
    <echo> Running MyClass ......... </echo>
    <java classname="pkg.MyClass" classpathref="libs">          
        <arg value="val1" /> <!-- command line args -->
        <arg value="val2" />
        <arg value="val3" />
        <env key="k1" value="v1" /> <!-- set environmental value -->
    </java>     
</target> 
```

如果您使用的是 Eclipse，您将在 java 标签下的弹出窗口中获得建议。我还有一些像：`<sysproperty/>, <syspropertyset></syspropertyset>, <jvmarg/>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T14:33:15.403

在任务中使用嵌套`<arg>`元素：`<java>`

```
<java classname="test.Main">
     <arg value="${k1}"/>
     <arg value="${k2}"/>
     <classpath>
       <pathelement location="dist/test.jar"/>
       <pathelement path="${java.class.path}"/>
     </classpath>
   </java> 
```

# java - 公式操作算法

> ID：14237330
> 
> 赞同：1
> 
> 时间：2013-01-09T14:22:11.570
> 
> 标签：java, algorithm, formula

我想制作一个程序，当给定一个公式时，它可以操纵公式以使任何值（或者在同时公式的情况下，一个共同值）成为公式的主题。

例如，如果给出：

```
a + b = c
d + b = c 
```

因此，程序应该说：

```
b = c - a, d = c - b    etc. 
```

当我将原始公式作为输入时，我不确定java是否可以自动执行此操作。我对求解方程并获得每个变量的结果并不感兴趣，我只是对返回一个操纵公式感兴趣。

请让我知道我是否需要为此制定算法，如果需要，我将如何去做。另外，如果您可能有任何有用的链接，请发布它们。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:26:19.793

看看[JavaCC](http://en.wikipedia.org/wiki/JavaCC)。起初有点令人生畏，但它是处理此类事情的正确工具。另外，已经有一些您正在尝试实现的[示例。](http://userpages.umbc.edu/~vick/431/Lectures/Spring06/3_LexicalAnalysis/3_Tools/2_JavaCC_Example.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:30:20.003

I read a book called `Fluid Concepts and Creative Analogies` by Douglas Hofstadter that talked about this sort of algebraic manipulations that would automatically rewrite equations in other ways attempting to join equations to other equations an infinite (yet restricted) number of ways given rules. It was an attempt to prove yet unproven theorems/proofs by brute force.

[http://en.wikipedia.org/wiki/Fluid_Concepts_and_Creative_Analogies](http://en.wikipedia.org/wiki/Fluid_Concepts_and_Creative_Analogies)

Douglas Hofstadter's Numbo program attempts to do what you want. He doesn't give you the source, only describes how it works in detail.

It sounds like you want a program to do what highschool students do when they solve algebraic problems to move from a position where you know something, modifying it and combining it with other equations, to prove something previously unknown. It takes a strong Artificial intelligence to do this. The part of your brain that does this is the Neo Cortex, which does science, and it's operating principle is as of yet not understood.

If you want something that will do what college students do when they manipulate equations in calculus, you'll have to build a fairly strong artificial intelligence.

[http://en.wikipedia.org/wiki/Neocortex](http://en.wikipedia.org/wiki/Neocortex)

When we can do whole-brain emulation of a human neo cortex, I will post the answer here.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:37:35.327

不知道你到底在追求什么，但这个问题在它的一般问题中很难。很难。

事实上，给定一组“公式”（公理）和演绎规则（数学等价运算），**我们无法推断给定公式是否正确**。这个问题其实是[*不可判定*](http://en.wikipedia.org/wiki/Undecidable_problem)的。

这个问题首先由 Hilbert 作为[Entscheidungsproblem解决](http://en.wikipedia.org/wiki/Entscheidungsproblem)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T14:51:14.387

是的，你需要写一些算法来做这种计算机代数。至少

*   一个解析器来解释输入
*   将解析的操作数（'a'、'b'、...）和运算符（'+'、'='）关联起来的代数模型
*   实施任何适当的规则以支持您希望进行的操作

# javascript - Disqus 脚本格式不正确

> ID：14237331
> 
> 赞同：0
> 
> 时间：2013-01-09T14:22:26.083
> 
> 标签：javascript

Blogger 一直告诉我脚本格式不正确，我尝试在 firebug 中对其进行测试，但似乎没有发现问题。帮忙

```
 <script type='text/javascript'>
    (function() {
        var links = document.getElementsByTagName('a');
        var query = '?';
        for(var i = 0; i < links.length; i++) {
            if(links[i].href.indexOf('#disqus_thread') >= 0) {
                query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
            }
        }
        document.write('<script type="text/javascript" src="http://disqus.com/forums/hi-tech/get_num_replies.js' + query + '"></' + 'script>');
    })();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:23:55.937

请参阅[XHTML 的 HTML 兼容性指南](http://www.w3.org/TR/xhtml-media-types/#C_4)。

将您的 JS 移动到外部脚本文件，或将其包装在 CDATA 块中。

# c# - C# WPF 字母数字单元格返回空

> ID：14237333
> 
> 赞同：0
> 
> 时间：2013-01-09T14:22:31.573
> 
> 标签：c#, wpf, datagrid, cell, string

我想在编辑行时从 DataGrid 更新 MySql 中的一些数据。问题是包含字母和数字字符的单元格在我得到它们时返回空值。

我使用以下代码：

```
TextBlock txt = dgwDataMain.Columns[dgwDataMain.Columns.IndexOf(col)].GetCellContent(dgwDataMain.Items[e.Row.GetIndex()]) as TextBlock;
value += col.Header + "<&p>" + txt.Text + "</s&p>"; 
```

列是动态生成的：

```
foreach (Fields field in fields)
                {
                    DataGridTextColumn column = new DataGridTextColumn();
                    column.Header = field.name;
                    column.Binding = new Binding(field.name) { Mode = BindingMode.TwoWay };
                    dgwDataMain.Columns.Add(column);
                } 
```

# c# - 波形趋势分析/模式识别

> ID：14237334
> 
> 赞同：0
> 
> 时间：2013-01-09T14:22:35.693
> 
> 标签：c#, visual-studio-2010, pattern-recognition, trending

我在这个问题上吸引了你更聪明的头脑！

这是我第一次涉足模式识别/趋势分析，基本上我希望能够区分波形（基本上是线图）。

例如，原始图将表示“正常”，第二张图几乎相同，但在图的最后 30% 期间具有更高的图，第二张图将被称为“坏图”。
我想要实现的是让程序知道“正常”和“坏图”的样子，然后在此之后看到并区分两者的任何其他波形，在这个例子中，如果第三个波形完全一样原始但接近最后的 30% 增加了，但没有“坏图”那么多，它会认为这是朝着“坏图”发展的趋势。

我在想也许切片图然后区分或生成规则等，但不知道如何实现这一点。

有哪些技术可以为我指明正确的方向，如果可能的话，代码示例等将是一个奖励。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:33:50.250

我不是这方面的专家，但您可以考虑使用[傅立叶变换](http://en.wikipedia.org/wiki/Fourier_transform)对波形进行定性比较吗？

这里有一篇关于使用 C# 和各种库进行[快速傅立叶变换](http://en.wikipedia.org/wiki/Fast_Fourier_transform)的 SO 文章：-

*   [C# 中快速傅里叶变换 (FFT) 的实现](https://stackoverflow.com/questions/170394/fast-fourier-transform-in-c-sharp)

# mysql - 在 MySQL 5 中查看 + 左连接返回错误 1054

> ID：14237337
> 
> 赞同：0
> 
> 时间：2013-01-09T14:22:59.233
> 
> 标签：mysql, sql, view, firebird

我在 MySQL 5.5 中写一个视图。我的代码如下：

```
 DROP VIEW IF EXISTS vw_lancamentos;
  CREATE VIEW vw_lancamentos AS
  SELECT
    l.id,
    l.data_hora_lancamento,
    l.valor,
    l.descricao,
    l.veiculo_id,
    l.plano_conta_id,
    pc.id,
    pc.master_id,
    pc.descricao,
    pc.tipo_movimento
  FROM
    lancamentos l, plano_de_contas pc
  LEFT JOIN
    plano_de_contas on (l.plano_conta_id = pc.id); 
```

当我尝试编译上面的代码时，服务器返回此错误： **错误代码：1054。“on 子句”中的未知列“l.plano_conta_id”**

我怎样才能让它工作？我以前使用过 Firebird，我可以看到它与 MySQL 完全不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:41:01.080

您的`JOIN`语法错误，并且您有两列同名。如果您想同时返回两者`l.id`，`pc.id`那么您将需要为这两个区分它们的字段提供别名：

```
CREATE VIEW vw_lancamentos AS
  SELECT
    l.id as l_id,  --  add alias
    l.data_hora_lancamento,
    l.valor,
    l.descricao,
    l.veiculo_id,
    l.plano_conta_id,
    pc.id as pc_id, --  add alias
    pc.master_id,
    pc.descricao,
    pc.tipo_movimento
  FROM lancamentos l
  LEFT JOIN plano_de_contas pc
     on l.plano_conta_id = pc.id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:30:43.863

Please try this...sorry igonore my comment, I just noticed how you are doing the `LEFT JOIN`. The way arrange the join Syntax is wrong...

```
....

 FROM lancamentos l
 LEFT JOIN
 plano_de_contas pc on (l.plano_conta_id = pc.id); 
```

EDIT AS PER OP'S COMMENT:

in your select query you are selecting thtese...both the same... so to recorrect the reasoning, you need to add alias to one.

```
 l.id,
    pc.id as pcid, 
```

EDIT:

*   **[SQLFIDDLE DEMO](http://sqlfiddle.com/#!2/8fd33/1)** : it's sufficient to provide alias to one column out of the two that has the same name/duplicate name...

# c - feof(FILE *) 内置函数中的分段错误

> ID：14237342
> 
> 赞同：0
> 
> 时间：2013-01-09T14:23:10.000
> 
> 标签：c, pointers, gcc, segmentation-fault, file-pointer

```
void suffix_strip(FILE *fp)
{
    FILE *fp1;
    char word[20],ch;
    int len;
    int i=0,j;
    fp1=fopen("sstrip.txt","a+");
    while(!feof(fp))
    {
        ch=fgetc(fp);
        if(ch!='\n' && ch!='\0' && ch!=' ' && ch!='.')
        {
            word[i]=ch;
            i++;
        }
        else
        {
            word[i]='\0';
            i=0;
            len=strlen(word);
            if(len>3)
            {
                if(word[len-3]=='i' && word[len-2]=='n' && word[len-1]=='g')
                {
                    word[len-3]='\0';
                }
                else if(word[len-2]=='e' && word[len-1]=='d')
                {
                    word[len-2]='\0';
                }

                fputs(word,fp1);

                if(count==0)
                {
                    in[count]->freq=1;
                    strcpy(in[count]->word,word);
                    count++;
                }
                else
                {
                    for(j=0;j<count;j++)
                    {
                        if(strcmp(in[j]->word,word)==0)
                        {
                            in[j]->freq++;
                            goto x1;
                        }
                    }
                    in[count]->freq=1;
                    strcpy(in[count]->word,word);
                    count++;
                    x1:
                        printf("");

                }
                fputc(' ',fp1);
            }
            else
            {
                fputs(word,fp1);
                if(count==0)
                    {
                    in[count]->freq=1;
                    strcpy(in[count]->word,word);
                    count++;
                }
                else
                {
                for(j=0;j<count;j++)
                {
                    if(strcmp(in[j]->word,word)==0)
                    {
                        in[j]->freq++;
                        goto x2;
                    }
                }
                in[count]->freq=1;
                strcpy(in[count]->word,word);
                count++;
                x2:
                    printf("");

            }
            fputc(' ',fp1);
        }

    }

    }
    display(); 
```

}

/*

在上面的函数中，当我进入 While 循环检查条件时

而（！feof（fp））

运行 MinGW GCC 的 DevC++ IDE 会引发分段错误，但在 VC++ 6.0 上运行相同的代码时，代码运行成功，没有任何错误。可能是什么问题？？？是因为我将文件指针作为参数传递吗？？？GCC 编译器的 EOF 表示还有一些其他约定？？？如果是因为参数传递，那么使用相同的参数传递方式（即传递文件指针）解决它的正确方法可能是什么？*/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:45:49.910

1.  确保文件打开成功。也许你正在传递`NULL`给`feof()`.
2.  `feof()`在进行 I/O 之前不要调用，*只有*在 I/O 失败时才调用它。
3.  `fgetc()`返回一个`int`，*而不是*一个`char`。这是因为它也可以返回`EOF`不是字符的特殊值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T09:42:14.943

应该是`word[]`溢出了。如果要截断单词，请更改

```
 word[i]=ch;
            i++; 
```

至

```
 if (i < sizeof word - 1) word[i++] = ch; 
```

.

# session - Weblogic 中的主要辅助服务器

> ID：14237346
> 
> 赞同：1
> 
> 时间：2013-01-09T14:23:21.090
> 
> 标签：session, weblogic, load-balancing

我在属于单个集群的 6 个 weblogic 实例之前有 apache 代理 Web 服务器。

对于访问我的应用程序的客户端，Apache 的访问日志显示以下登录

```
/Replica/AddServlet;jsessionid=PvqTQtYfKLrzBHtT1dpcJX5WhryRgpTGBvMJ8pLbpJnSDR5p0K65!1647512983!-1661904304!1357731903334 HTTP/1.1" 200 284 
```

对于此客户端请求，我如何确定哪六个是主要的，哪个是辅助 weblogic 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:53:41.463

# objective-c - 如何在objective-c中创建自己的属性？

> ID：14237350
> 
> 赞同：1
> 
> 时间：2013-01-09T14:23:34.367
> 
> 标签：objective-c, properties, attributes

我在想如何制作自己的属性，例如：

```
@property(retain,nonatomic,'myAttribute') int numberOfWheels

@property('unique',nonatomic) NSString productCode 
```

但是当我尝试从 Xcode 中获得帮助时，按下命令按钮或选项按钮没有任何反应

我正在查看此页面和许多其他页面，但没有人问如何制作自己的属性，大多数人只是询问如何使用属性属性或它们之间的区别

我不知道是否可以创建一个新属性，但如果它是真的，有人可以帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:25:08.253

这样做的唯一方法是直接修改编译器以添加此功能。我不知道你会从哪里开始这样做，除了指向[http://llvm.org](http://llvm.org)并说“祝你好运”。

# google-apps-script - 如何在 Google 电子表格的命名范围内引用当前电子表格？

> ID：14237351
> 
> 赞同：2
> 
> 时间：2013-01-09T14:23:35.663
> 
> 标签：google-apps-script, google-docs, google-sheets

在同一个文档（工作簿）中，每当我创建命名范围时，我都会有类似的东西，`Sheet1!A1`但它总是引用`Sheet1`. 有什么方法可以让我参考**当前**的电子表格吗？

如果我目前在`this!A1`或如果我在.`Sheet1!A1``Sheet1``Sheet200!A1``Sheet200`

目的是在工作簿的所有电子表格中重用相同的公式（已经有命名的间隔）。我发现这个全局和固定参考相当愚蠢。这样我总是必须为每个电子表格重新创建我的公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:58:10.880

命名范围是指特定工作表上的特定单元格范围 - 我认为这种情况不会很快发生变化。

但是这里有一个自定义函数，您可以将其放入电子表格的脚本中，该函数将为您“本地化”范围。此代码也可[在此 Gist](https://gist.github.com/4661225)中下载。

```
/*
 * Return a string with the A1 notation for the given range, with
 * the sheet reference removed. To use in spreadsheet functions,
 * enclose with INDIRECT().
 *
 * Example: 
 *   =index(INDIRECT(localizeNamedRange(NamedRange1)),12,4)
 *
 * @param {string} rangeName  The name of an existing range in the
 *                        active spreadsheet. It does not matter which
 *                        sheet the range was defined for.
 *
 * @return {string}       The cell range from the provided rangeName,
 *                        in A1 notation.
 */
function localizeNamedRange( rangeName ) {
  var sheet = SpreadsheetApp.getActiveSpreadsheet();

  // Get range by name
  var origRange = sheet.getRangeByName(rangeName);

  // Get notation for the range, without sheet reference.
  var notation = "";
  if (origRange !== null) {
    notation = origRange.getA1Notation();
  }

  // Return range in A1 notation
  debugger;   // pause to examine if running in debugger
  return ( notation );
} 
```

这是一个例子。NamedRange1 已定义为“Sheet1!A10:A22”。如果我们放入`=localizeNamedRange(NamedRange1)`一个单元格，它将返回`A10:A22`，而不引用`Sheet1`。那是一个字符串，所以如果我们想在需要一个范围的公式中使用它，我们需要转换它 - 并且这样做，我们使用内置函数`INDIRECT()`。

在 Sheet1 上，我们在单元格 A3 中有一个公式，用于计算 NamedRange1 的平均值。以下是如何定义该公式以使其可本地化：

```
(A3) =AVERAGE(INDIRECT(localizeNamedRange(NamedRange1)); 
```

If you now copy Sheet1 into a new Sheet2, you'll find that the formula still works, and that it performs its calculations on the data on Sheet2, even though the Named Range refers to Sheet1.

# database - 将一个值与自身作为盐进行散列

> ID：14237353
> 
> 赞同：1
> 
> 时间：2013-01-09T14:23:43.480
> 
> 标签：database, hash, salt, sha512

我正在开发一个应用程序，用户可以在其中搜索已经使用其电子邮件注册的其他用户。但是因为我不希望人们以明文形式向我发送他们整个通讯录的地址，所以我正在考虑一些 SHA512 魔法：

客户端将每封电子邮件附加到自己：

```
hash = sha512(email + email) 
```

注册新用户时，服务器也在做同样的事情。（一旦注册了电子邮件，我会将其存储为纯文本以及散列以用于数据库查找和帐户恢复等）

请注意，这并不重要。我只是想确保您无法通过简单的谷歌哈希或基于 sha512 工作原理的数学计算来检查这些电子邮件。以防我的数据库被泄露。

这应该完成这项工作（还是与简单的 sha512 哈希相比完全没用？）。还是有更好的方法来获得这个？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:01:56.030

与简单的哈希相比，这毫无用处。

# javascript - 使用 CodeMirror 进行带有行号的独立语法高亮显示

> ID：14237361
> 
> 赞同：2
> 
> 时间：2013-01-09T14:24:12.443
> 
> 标签：javascript, syntax-highlighting, codemirror

我使用 CodeMirror V. 3 进行独立语法高亮（我项目的其他部分也使用 CodeMirror 编辑器，所以我不想使用其他独立语法高亮库，如`google-code-prettify`）。

我使用[CodeMirror: Mode Runner Demo](http://codemirror.net/demo/runmode.html)`lib/runmode.js`中描述的脚本来突出显示-tag 中的代码。这工作正常。现在我想在代码左侧添加*行号，就像在 CodeMirror 编辑器中一样。*`<pre>`

 *（`CodeMirror.runMode`有一个`options`论点，但这似乎只适用于 tabsize。知道如何将行号添加到我的代码中（如在 google-code-prettify css-class 中`linenums`）？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:58:39.257

我会像这样破解 Mode Runner

```
 CodeMirror.runMode = function(string, modespec, callback, options) {
  var mode = CodeMirror.getMode(CodeMirror.defaults, modespec);
   var lineNumber = 1; // Line number
   if (callback.nodeType == 1) {
    var tabSize = (options && options.tabSize) || CodeMirror.defaults.tabSize;
    var node = callback, col = 0;
    node.innerHTML = "";
    callback = function(text, style) {

      if (text == "\n") {

      lineNumber++ ; //increment line number
      var lineNum = document.createTextNode(lineNumber); // 

      node.appendChild(document.createElement("br"));

      node.appendChild(lineNum); // append
        col = 0;
        return;
      }
      var content = "";
      // replace tabs
      for (var pos = 0;;) {
      var lineNum = document.createTextNode(lineNumber + " ")
        var idx = text.indexOf("\t", pos);
        if (idx == -1) {
          content += text.slice(pos);
          col += text.length - pos;

          break;
        } else {
          col += idx - pos;
          content += text.slice(pos, idx);
          var size = tabSize - col % tabSize;
          col += size;
          for (var i = 0; i < size; ++i) content += " ";
          pos = idx + 1;

        }
      }

      if (style) {
        var sp = node.appendChild(document.createElement("span"));
        sp.className = "cm-" + style.replace(/ +/g, " cm-");
        sp.appendChild(document.createTextNode(content));
      } else {
        node.appendChild(document.createTextNode(content));
      }
    };
  }

  var lines = CodeMirror.splitLines(string), state = CodeMirror.startState(mode);
  for (var i = 0, e = lines.length; i < e; ++i) {
    if (i) callback("\n");
    var stream = new CodeMirror.StringStream(lines[i]);
    while (!stream.eol()) {
      var style = mode.token(stream, state);
      callback(stream.current(), style, i, stream.start);
      stream.start = stream.pos;
    }
  }
// add the first line
 var outputDiv = document.getElementById("output");
  var firstLine = document.createTextNode("1 ");
  outputDiv.insertBefore(firstLine, outputDiv.firstChild);
}; 
```*

# wcf - Microsoft.Data.Services.Client 是否缓存数据？

> ID：14237362
> 
> 赞同：2
> 
> 时间：2013-01-09T14:24:18.923
> 
> 标签：wcf, caching, odata, wcf-data-services

我们使用的是 Microsoft WCF 数据服务的 System.Data.Services.Client（我猜是第 4 版）。当我们更新到 5.2 版本（Microsoft.Data.Services.Client dll）时，似乎在新版本的 WCF 数据服务中插入了一些缓存机制。

因为当我们通过浏览器查询数据服务（OData）时，会返回新数据，但是当我们在我们的 UI 项目中添加服务引用并使用该引用（代理）来检索数据时，只有 10 分钟左右的新数据将显示。

通过重置 IIS (iisreset.exe) 可以获得新数据，这可能意味着 UI 项目中的某处应该有缓存。

我们没有在代码中做一些特别的事情，而是在最简单的状态下使用 OData 服务引用：

```
public List<Customer> GetCustomers()
{
    CustomersODataModel customersData = new CustomersODataModel("Url");
    return customersData.ToList();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:16:56.060

考虑在 DataService 对象中禁用客户端缓存，看看是否有帮助。我遇到了同样的问题，将 dataService.MergeOption 设置为 MergeOption = MergeOption.OverwriteChanges 有助于保持数据服务在每次更改时刷新对象并获取。

# sql - 示例 sql 产品数据

> ID：14237363
> 
> 赞同：2
> 
> 时间：2013-01-09T14:24:22.153
> 
> 标签：sql, product

寻找开源数据范围。需要一系列具有变化的产品，例如书籍、鞋子、帽子、cd、dvd、狗玩具，你懂的，随机产品。

还需要用于sql数据库。

有人对我可以在哪里找到此类数据有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:31:36.247

尝试搜索 Northwind 数据库示例。Microsoft 还为我们提供了一些免费的数据库设置供我们练习。你可以从他们的网站下载这些。

# c# - 在 Windows 8 应用程序中通过手指触摸滚动列表框的问题

> ID：14237370
> 
> 赞同：2
> 
> 时间：2013-01-09T14:24:42.253
> 
> 标签：c#, windows-8, visual-studio-2012, microsoft-metro, winrt-xaml

我开发了一个 Windows 8 应用程序，其中我在 ListBox 控件中显示了一个新闻区。对于新闻项目，我使用模板。一条新闻有不同的大小。项目的大小将在 LayoutUpdate 事件之后设置。如果我用手指 Tuuch 滚动列表，则会出现闪烁效果。这些发生是因为我随后适应的项目数量。当我使用恒定大小时，闪烁效果没有问题。当我用鼠标滚动列表时没有问题。是否有可能更喜欢这种闪烁效果？每个人都有类似的问题并为我提供独奏吗？

我的模板：

```
<UserControl
    x:Class="components.NewsItemRenderer"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="150"
    d:DesignWidth="560" >

    <Canvas x:Name="rootCanvas"
            Width="560"
            Height="150">

        <TextBlock x:Name="lbl_title"
                   Width="480"
                   Canvas.Left="15"
                   Canvas.Top="35"
                   MaxHeight="50"
                   SizeChanged="lbl_description_SizeChanged"
                   LayoutUpdated="lbl_title_LayoutUpdated"
                   Style="{StaticResource LabelTitle}"
                   Text="{Binding Path=message.title}"/>

        <TextBlock x:Name="lbl_description"
                   Canvas.Left="15"
                   Canvas.Top="55"
                   Width="480"
                   SizeChanged="lbl_description_SizeChanged" 
                   Style="{StaticResource LabelDescription}"
                   Text="{Binding Path=message.description}"/>

    </Canvas>
</UserControl>  

private void lbl_description_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            lbl_description.SetValue(Canvas.TopProperty, lbl_title.ActualHeight + 45);
            double _height = lbl_subject.ActualHeight + lbl_title.ActualHeight + lbl_description.ActualHeight + 40;
            this.Height = _height;
            rootCanvas.Height = _height;
        } 
```

我的控制：

```
<ListBox x:Name="viewBox"
     Visibility="Visible"
     Background="{x:Null}"
     Foreground="{x:Null}"
     Width="580"
     Height="580"
     BorderThickness="0"
     ItemsSource="{Binding Source={StaticResource newsMessages}}"
     ItemTemplate="{StaticResource newsTemplate}"
     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
     ItemContainerStyle="{StaticResource NoSelectListBoxItemStyle}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T17:23:25.950

是的。

执行此操作的最简单方法是在 XAML 中使用 IncrementalUpdateBehavior。

> 参考： http: [//marcominerva.wordpress.com/2014/01/15/using-incrementalupdatebehavior-to-incrementally-show-data-in-listviewbase-controls/](http://marcominerva.wordpress.com/2014/01/15/using-incrementalupdatebehavior-to-incrementally-show-data-in-listviewbase-controls/)
> 
> 参考：http: [//blogs.msdn.com/b/hanxia/archive/2013/11/04/incremental-update-item-data-for-listviewbased-controls-in-windows-8-1.aspx](http://blogs.msdn.com/b/hanxia/archive/2013/11/04/incremental-update-item-data-for-listviewbased-controls-in-windows-8-1.aspx)

这基本上允许您识别 DataTemplate 中应在滚动时首先显示的部分。像这样切割 UI 可以让 XAML 更快地绘制并减少闪烁。

说了这么多，我也想说一下。有时由于我们显示的数据量很大，我们需要在数据模板的复杂性上做出妥协。那可能是你的情况。

祝你好运！

# gwt - 带有 CheckBoxes 的 GWT CellTable 获取所有选定的框

> ID：14237372
> 
> 赞同：3
> 
> 时间：2013-01-09T14:24:44.163
> 
> 标签：gwt, celltable, gwt-celltable

我的 GWT Projekt 中有一个 CellTable，每行都有一个 CheckBox。不知何故，我需要遍历 cellTable 中的所有行，并需要检查每行的 CheckBox 是否被选中。

我不知道该怎么做，也找不到任何可以说明如何的东西。

```
private Column<Article, Boolean> showPinColumn = new Column<Article, Boolean>(new CheckboxCell()) {
    public Boolean getValue(Article object) {
        return false;
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:22:32.077

第 1 步 - 您应该修复 showPinColumn 代码并使用 FieldUpdater 来实际更新对象。

```
final CheckboxCell cbCell = new CheckboxCell();
Column<Article, Boolean> cbColumn = new Column<Article, Boolean>(cbCell) {
    @Override
    public Boolean getValue(Article object) {
        System.out.println("method getValue() - " + object.id + " - " + object.checked);
        return object.checked;
    }
};

cbColumn.setFieldUpdater(new FieldUpdater<Fieldupdater.Article, Boolean>() {
    @Override
    public void update(int index, Article object, Boolean value) {
        System.out.println("method update() - " + object.id + " - " + value);
    }
}); 
```

第 2 步 - 您应该只遍历您设置到单元格表中的“列表”中的每个项目，并检查文章中的布尔属性。

# iis-7.5 - IIS 具有不同主机头的多个 HTTPS 网站

> ID：14237375
> 
> 赞同：0
> 
> 时间：2013-01-09T14:24:55.773
> 
> 标签：iis-7.5, windows-server-2008

到目前为止，我已经做到了这一点并撞到了一堵砖墙。我在 IIS**的一台服务器上设置了 4 个网站：**

1.  **默认网站**(myserver.mydomain.com) D:\websites\default\

2.  **苹果**(apple.mydomain.com) D:\websites\apple\

3.  **橙色**(orange.mydomain.com) D:\websites\orange\

4.  **梨**(orange.mydomain.com) D:\websites\pear\

我已经按照[本指南](http://www.sslshopper.com/article-ssl-host-headers-in-iis-7.html)使用命令行配置了站点绑定，现在看起来我想要它。当我做**appcmd list sites**它返回以下内容：

```
SITE "Default Web Site" (id:1,bindings:net.tcp/808:*,net.pipe/*,net.msmq/localhost,msmq.formatname/localhost,https/*:443:,state:Started)
SITE "apple" (id:2,bindings:https/*:443:apple.syfire.gov.uk,state:Started)
SITE "orange" (id:3,bindings:https/*:443:orange.syfire.gov.uk,state:Started)
SITE "pear" (id:4,bindings:https/*:443:pear.syfire.gov.uk,state:Started) 
```

结果：

*   `Server Error in Application "DEFAULT WEB SITE" HTTP Error 403.14 - Forbidden The Web server is configured to not list the contents of this directory.`尽管配置了默认文档 (index.html)，“myserver.mydomain.com”仍会返回错误。**编辑**：如果我切换目录浏览**，**它会显示 D:\websites\default\ 的内容（应该如此），我可以导航到*index.html*，但是当它关​​闭时，它似乎无法找到文件本身。

*   “apple.mydomain.com”工作正常，并显示存储在`D:\websites\apple\`.

*   "orange.mydomain.com" 和 "pear.mydomain.com" 返回错误`Server not found`(Firefox), `Internet Explorer cannot display the webpage`(IE)。

我确定我错过了对这次行动至关重要的一些事情！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T14:38:28.560

尝试将 * 替换为您正在收听的 IP 地址。这就是我曾经得到的类似于在 Windows 2003 上的 IIS 6 中工作的东西。

# regex - 如何使用正则表达式匹配 TCL 中的括号

> ID：14237376
> 
> 赞同：3
> 
> 时间：2013-01-09T14:24:55.663
> 
> 标签：regex, tcl, expect

我有一个关于使用正则表达式匹配 TCL 中的括号的问题。

例如我有一个这样的字符串：

```
yes, it is (true, and it is fine). 
```

我就是想配这部分`yes, it is (true`，怎么配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:47:15.783

您可以按照@bobah 的建议将括号括在字符类中，

```
yes, it is [(]true 
```

但更常见的是逃避它：

```
yes, it is \(true 
```

但是，如果您要逃避它，请确保您了解必须执行以下操作：

```
regexp -- "yes, it is \\(true" $subject 
```

或这个：

```
regexp -- {yes, it is \(true} $subject 
```

# javascript - 使用函数在 javascript 中创建对象与使用 new 运算符一样好

> ID：14237379
> 
> 赞同：0
> 
> 时间：2013-01-09T14:25:02.557
> 
> 标签：javascript

我一直在使用以下模板在 javascript 中创建对象。

```
function FileSpec(directory, filename){
  var object = {};
  object.full_path = function(){
    return directory + '/' + filename;
  }
  return object;
}

var filespec = FileSpec('tmp', 'index.html'); 
```

使用上述实现与使用原型和新实现相比有什么特别的缺点吗？

```
function FileSpec(directory, filename){
  this.directory = directory;
  this.filename = filename;
}

FileSpec.prototype.full_path = function(){
  return this.directory + '/' + this.filename
}

var filespec = new FileSpec('tmp', 'index.html'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:29:42.147

1.  您不能使用1 有效地使用`instanceof`运算符或[`Object.isPrototypeOf()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/isPrototypeOf)，但可以使用 #2。

    ```
    filespace instanceof FileSpec; // false with 1, true with 2
    Filespec.isPrototypeOf(filespace); //false with 1, true with 2 
    ```

2.  使用`prototype`继承时，原型成员（方法等）仅在原型上定义一次。在 #1 中，您要在每个实例上定义一组新成员，这会占用更多内存。

    ```
    var ar = [];

    for (var i=0;i<10000000;i++) {
        ar.push(FileSpec('tmp', 'index.html'));
    }

    // check memory usage, cry. 
    ```

    相比：

    ```
    var ar = [];

    for (var i=0;i<10000000;i++) {
        ar.push(new FileSpec('tmp', 'index.html'));
    }

    // check memory usage. 
    ```

# extjs - 销毁 ExtJS 中的上下文菜单？

> ID：14237388
> 
> 赞同：2
> 
> 时间：2013-01-09T14:25:47.670
> 
> 标签：extjs, extjs4.1

我注意到每次我打开和关闭（通过单击菜单项或单击菜单外的某个区域）上下文菜单（`Ext.menu.Menu`）时，`<div>`s 不会从 DOM 中删除，它们会以某种方式变得不可见。

如何改变这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:40:33.773

你可以试试这个来破坏整个组件 -

```
listeners: {
     hide:function(menu, opt){
    Ext.destroy(menu);
     }
} 
```

但是您必须创建`Ext.menu.Menu`，下次单击菜单按钮时。

# java - 谷歌地图安卓只显示白屏

> ID：14237390
> 
> 赞同：5
> 
> 时间：2013-01-09T14:25:49.493
> 
> 标签：java, android, xml, google-maps

我完成了添加谷歌地图 api 的程序，但我收到了这个错误。对不起语言不好。

```
09 12:20:55.359: W/dalvikvm(5918): Unable to resolve superclass of Lmaps/a/du; (406)
01-09 12:20:55.359: W/dalvikvm(5918): Link of class 'Lmaps/a/du;' failed
01-09 12:20:55.359: W/dalvikvm(5918): Unable to resolve superclass of Lmaps/a/ej; (2358)
01-09 12:20:55.359: W/dalvikvm(5918): Link of class 'Lmaps/a/ej;' failed
01-09 12:20:55.359: W/dalvikvm(5918): Unable to resolve superclass of Lmaps/j/k; (2374)
01-09 12:20:55.359: W/dalvikvm(5918): Link of class 'Lmaps/j/k;' failed
01-09 12:20:55.359: E/dalvikvm(5918): Could not find class 'maps.j.k', referenced from method maps.y.ae.a
01-09 12:20:55.359: W/dalvikvm(5918): VFY: unable to resolve new-instance 3566 (Lmaps/j/k;) in Lmaps/y/ae; 
```

这里是 manifest.xml

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.READ_PHONE_STATE" />
 <uses-permission android:name="com.comparto.piso.permission.MAPS_RECEIVE" />
 <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

 <permission
        android:name="com.comparto.piso.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

       <application
              ........ >
            <uses-library android:name="com.google.android.maps" />
   <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="api key" />
    ......
    ..... 
```

在java代码中我扩展了FragmentActivity，这里是onCreate代码

```
GooglePlayServicesUtil
                .isGooglePlayServicesAvailable(getApplicationContext());

        GoogleMap map = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();
        if (map != null) {
            map.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        } 
```

这里是布局 xml

```
 <fragment
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/map"
                android:layout_width="fill_parent"
                android:layout_height="300px"
                class="com.google.android.gms.maps.SupportMapFragment" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T01:00:33.000

如果您的设备与 Google 地图库使用的 API 级别不同，则 logcat 中来自 Dalvik 的所有“无法解析超类 xxxx”和“类 xxxx 的链接失败”都是正常的。

您应该使用以下命令检查您是否遇到授权失败：

```
adb logcat | grep Maps 
```

如果你看到这样的东西：

```
E/Google Maps Android API(): Authorization failure. 
```

那么这意味着您没有在清单中提供正确的 API 密钥。再次在您的[Google API 控制台](https://code.google.com/apis/console)（在**API 访问**部分）中检查您是否[按照指南中的说明](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key)添加了正确的指纹和包名称对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:22:53.800

在没有可用 Google Play API 的设备上运行时，通常会出现该错误消息。你打电话[`isGooglePlayServicesAvailable()`](https://developer.android.com/reference/com/google/android/gms/common/GooglePlayServicesUtil.html#isGooglePlayServicesAvailable%28android.content.Context%29)，但你没有检查返回值。`ConnectionResult.SUCCESS`在继续之前，您应该检查以确保它返回。如果出现其他一些错误代码，您可以通过 提示它们升级/安装`getErrorDialog()`，例如 --

```
int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
switch (resultCode) {
   case ConnectionResult.SUCCESS: // proceed
      break;
    case ConnectionResult.SERVICE_MISSING:
    case ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED:
    case ConnectionResult.SERVICE_DISABLED:
          Dialog dialog = GooglePlayServicesUtil.getErrorDialog(resultCode, this, 1);
          dialog.show();
 } 
```

根据 Google 的说法，Google Play 服务 API 需要“物理开发设备”，因此它们不受模拟器的官方支持。因此，如果您在模拟器上运行，几乎可以肯定您缺少所需的服务。人们报告说让它在模拟器中工作，但我自己没有尝试过。如果您想在模拟器上安装 Google Play，您可以在[这篇文章](https://stackoverflow.com/q/13691943)中查看答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-01T18:48:50.733

经过一番研究后，我遇到了同样的白屏问题，我发现我忘记从开发人员控制台启用地图 APi，如下图所示：-

我希望你可能有同样的问题，它会有所帮助：-

[![在控制台上启用地图 api](../Images/a36f87bfe3a9463e3810bcfa984f70a6.png)](https://i.stack.imgur.com/vc3n4.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-25T09:03:36.403

也许您的 Eclipse 的 SHA1 密钥已更改（例如：您可能已删除 Windows 主文件夹中的 .android 文件夹），因此这就是身份验证错误的原因。您必须删除您的密钥并使用 Eclipse 的新 SHA1 创建新密钥。 ![在此处输入图像描述](../Images/1c1b62e4900b57db2f42c736a932155d.png)

在此处重新生成新密钥并在几分钟后重新加载此页面，它将更新新密钥： [https ://console.developers.google.com/project/watchful-net-796/apiui/credential](https://console.developers.google.com/project/watchful-net-796/apiui/credential)

记住！毕竟，您必须复制新密钥来显示和重建您的项目。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-25T09:10:05.880

您缺少 api 密钥

```
 <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="api key" /> 
```

**在 value 参数中输入 api_key**

而且`google playService`版本也不见了。添加

```
<meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" /> 
```

到`manifest`内部`<application`标签

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T14:17:34.853

如果您在布局 xml 中使用“class="com.google.android.gms.maps.SupportMapFragment"，那么您现在在 manifest.xml 中使用 Android 3.0 或更低版本的 android:minSdkVersion。

然后在下面查看我的链接站点，这有助于您了解在您的设备上运行 Google 地图之前应该安装和设置的内容。此链接非常简单，您将获得想要在您的设备上显示谷歌地图的操作。

[我的链接网站 ===> 点击这里](http://wptrafficanalyzer.in/blog/showing-current-location-in-google-maps-using-api-v2-with-supportmapfragment/)

# spring - 在spring webflow中从一个页面导航到另一个页面

> ID：14237393
> 
> 赞同：0
> 
> 时间：2013-01-09T14:26:00.757
> 
> 标签：spring, spring-webflow

任何人都可以举一个简单的例子让spring webflow使用按钮从一个页面导航到另一个页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:39:33.067

你需要更具体一点。但是，如果您只想从一个页面导航到另一个页面，就 Webflow 而言，您可以在同一流程中执行此操作：

这 2 个页面将是 2 `view-state`，通过单击一个按钮，您想要触发一个事件，该事件将您从一个页面转换到另一个页面。

```
<view-state id="viewState1" view="viewPage1.html">
    <transition on="nextPage" to="viewState2"/>
</view-state>

<view-state id="viewState2" view="viewPage2.html">
    <transition on="previousPage" to="viewState1"/>
</view-state> 
```

在您的网页中，您只需要一个像这样的提交按钮：
第 1 页：

```
<input type="submit" name="_eventId_nextPage" value="Next Page"/> 
```

第2页：

```
<input type="submit" name="_eventId_previousPage" value="Previous Page"/> 
```

我强烈建议您阅读文档和一些教程，因为有很多方法可以做到这一点

# php - 仅在某些连接上出现 400 错误

> ID：14237395
> 
> 赞同：1
> 
> 时间：2013-01-09T14:26:16.083
> 
> 标签：php, python, http-headers, sublimetext2

我正在创建一个 SublimeText 2 插件，将数据发布到我运行的服务器。我在火车上使用手机作为 WiFi 热点编写了基础知识，一切正常。然后，当我回到家时，无论我尝试发布什么内容，我的服务器都会收到 400 Bad Request 响应。我把我的笔记本电脑放回我的个人热点，错误就消失了。以下是详细信息：

本例中的“客户端”是 Sublime Text 2。如果您还不知道，他们的插件是用 Python 编写的，我使用 urllib、urllib2 和 httplib 来处理请求。这是发出请求的相关 Python：

```
params = urllib.urlencode({'title': 'ST2 Note', 'content': data, 'user': user, 'pass': pswd})

headers = {"Content-type": "application/x-www-form-urlencoded", "Accept": "text/plain"}

conn = httplib.HTTPConnection("staging.myserver.me:80")

conn.request("POST", "staging.myserver.me/st2", params, headers)

response = conn.getresponse()

data2 = response.read()

print data2

conn.close() 
```

上面的代码发送一个 POST 请求就好了。如果我在某个连接上，我的服务器肯定会理解它，因为我将它设置为只是回显我在 POST 数据中发送的内容。该请求是针对 PHP（Codeigniter）应用程序的一部分发出的，是的，我已经专门设置了它，以便针对这个特定的 URL 关闭 CSRF 保护，所以我知道这不是问题。PHP 代码本身相当无趣，但我将其设置为回显服务器标头，这就是当我从有效的连接发出请求时它发送的内容：

```
Host: staging.myserver.me
Accept-Encoding: identity
Content-Length: 56
Content-type: application/x-www-form-urlencoded
Accept: text/plain
Via: HTTP/1.1 akrmspsrvz9ts212.wnsnet.attws.com 
```

为什么服务器理解来自某些连接的请求而不理解其他连接的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:39:16.970

看起来我让它工作了。我知道还有其他人有我的问题，所以这就是发生的事情......

出于我对 Python/HTTP1.1 新手太了解的原因，有时在其前面没有“http://”的计划主机名会*起作用*。必须与 ISP 以及它们如何路由流量有关，不确定。所以修复是修改这一行：

```
conn.request("POST", "staging.myserver.me/st2", params, headers) 
```

上面的行引起了问题。但是把它改成这样：

```
conn.request("POST", "http://staging.myserver.me/st2", params, headers) 
```

让它立即工作！我希望这可以帮助某人。有时，400 个错误几乎和 500 个错误一样神秘。

# c++ - 如何使用 STL 映射？

> ID：14237404
> 
> 赞同：1
> 
> 时间：2013-01-09T14:26:52.927
> 
> 标签：c++, memory-management, maps

我有一个私人领域

```
std::map<std::string, std::multiset<GraphObject*>>* the_Map; 
```

如何为其分配内存并插入 GraphObject？我必须使用 new 运算符吗？

```
the_Map = new map<string,multiset<GraphObject*>>; 
```

我怎样才能插入一个新的 GraphObject？它是数据结构的一部分，我真的需要一个指向地图的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:41:10.300

为什么要存储 a `::std:multiset`of`GraphObject *`有点晦涩，但让我们继续吧。

这是一个文档确实可以轻松回答的答案，但是对于 StackOverflow 来说毫无疑问太愚蠢了，所以...

```
 the_Map = new map<string,multiset<GraphObject*>>; 
```

这确实是您为地图分配内存的方式。对周围的事物有简单的指针通常不是一个好主意，但你坚持，这就是你的做法。这意味着您也必须`delete`在某个时候记住它。而且您必须确保保存指针的类的复制构造做正确的事情（并且说正确的事情将相当复杂）。

你现在有一个有趣的问题。您`multiset`在每个地图条目中存储 a 。幸运的是，当访问以前未知的键时，该多重集将自动创建并初始化为空。OTOH，您使用裸指针意味着您有异常安全问题。如果在此过程中的任何地方抛出异常，则可能会泄漏内存。所以你必须捕捉任何异常并清理你的对象：

```
 GraphObject *tmp = new GraphObject;
 try {
     (*the_Map)[key].insert(tmp);
 } catch (...) {
     delete tmp;
     throw;
 } 
```

您的问题是如此基本的事实使我质疑您关于需要使用指针的断言。而且我真的想知道您是否宁愿拥有 a`multimap`而不是`map`from `string`-> `multiset`。但是，您坚持数据结构的一般形式。所以上面是你如何使用它。

我还要说，这种数据结构大量使用裸指针是一个非常糟糕的主意。您必须编写一个非常复杂的函数来正确解构或复制整个混乱。

**编辑**：*叹息*凌晨 4 点对我自己永远不会创建的数据结构进行编码导致我编写了一些非常愚蠢的代码。现在的版本好多了。虽然[这个答案](https://stackoverflow.com/a/14237995/167958)真的比我的好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:56:54.487

> 如何为其分配内存并插入 GraphObject？

它根本不想成为指针；只需使地图本身成为类的成员，内存分配就会自动发生。

正确插入一个对象是相当繁琐的，因为你也在那里存储指针。如果它不需要是一个指针，那么存储对象会让你的生活更轻松。如果它确实必须是一个指针（例如，因为`GraphObject`是一个多态基类），我建议存储智能指针：`std::unique_ptr`，`std::tr1::shared_ptr`或者`boost::shared_ptr`如果你被困在过去。

如果你真的，真的因为某些疯狂的原因需要使用原始指针，那么最接近异常安全插入的可能是：

```
GraphObject * object = new Whatever(...);
try {
    the_Map[key].insert(object);
} catch(...) {
    delete object;
    throw;
} 
```

或者如果您不关心插入失败时内存泄漏的可能性：

```
the_Map[key].insert(new Whatever(...)); 
```

删除时也不要忘记删除每个对象；这不会自动发生。

> 我真的需要一个指向地图的指针。

不，你没有。但是，如果您真的相信自己做到了，并且想忽略每个人的建议，那么您将需要一张实际的地图来指向。我建议您将此地图设为该类的成员，以便自动管理其生命周期。

如果你真的想让维护代码的人生活困难，那么我想你可以分配一个`new`. 在这种情况下，请记住在完成后将其删除；可能在类析构函数中。如果你这样做了，记住[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)并实现或删除复制构造函数和复制赋值运算符，因为默认实现会做错事。

# scala - 在 scala 中扩展部分实现的部分函数

> ID：14237405
> 
> 赞同：6
> 
> 时间：2013-01-09T14:26:54.770
> 
> 标签：scala, akka, actor, traits, partialfunction

我在这里使用 Akka 演员库。演员库定义了一个部分函数“接收”，扩展“演员”的演员必须实现它来处理各种消息。我正在为我的应用程序创建一个特征层次结构，其中特征“clockActor”扩展了 Actor，“MasterClock”和“SubClock”扩展了“clockActor”。我希望将时钟的通用功能添加到“时钟”特征的接收功能中，但是如何在主时钟和子时钟特征的接收功能中添加额外的功能？

简而言之，我需要一种将额外的 case 语句添加到偏函数的方法。想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T15:47:51.310

正如已经建议的那样，您可以轻松地`PartialFunctions`使用`orElse`

```
trait ClockActor {

    def commonOp = {
        case ... => ...
    }

}

class MasterClock extends Actor with ClockActor {

    def receive = commonOp orElse masterOp

    def masterOp = {
        case ... =>  ...
    }

}

class SubClock extends Actor with ClockActor {

    def receive = commonOp orElse subOp

    def subOp = {
        case ... =>  ...
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:38:48.653

想到的一件事是做这样的事情：

```
trait ClockActor {
  def pf:PartialFunction[String, Boolean] = {
    case "a" => true
    case v if(_pf.isDefinedAt(v)) => _pf.apply(v)
  }

  def _pf:PartialFunction[String, Boolean] = Map.empty
}

object MasterClock extends ClockActor {

  override def _pf:PartialFunction[String, Boolean] = {
    case "b" => false
  }

  println(pf("a"))
  println(pf("b"))

} 
```

这将输出：

```
scala> MasterClock
true
false 
```

值`true`来自于 Trait 的偏函数中的定义`ClockActor`，`false`来自于 Object `MasterClock`。

# c# - .net 谷歌分析 v3.0 和 oauth 2.0

> ID：14237410
> 
> 赞同：0
> 
> 时间：2013-01-09T14:27:04.590
> 
> 标签：c#, .net, google-analytics

这是我尝试做的事情，我从我们的数据库中获得了一个带有登录页面的网页，其中包含凭据，然后一旦登录，它应该将您重定向到您应该在图表中看到数据的主页。

问题是我使用了 gdata v2.4，但每次我想发出请求时，我都必须再次设置凭据，然后使用 oauth 2.0 的 v3.0 它说我们不再需要通过访问令牌进行此操作。

我设法让它工作，但问题是如果用户被要求使用 gmail 帐户登录，并且电子邮件和密码与请求的配置文件 ID 不匹配，它会给出 403 错误（禁止访问）这是代码。我尝试使用服务帐户没有机会，有人知道这是什么问题吗？

```
 log4net.Config.XmlConfigurator.Configure();
    //string Scope = AnalyticsService.Scopes.Analytics.ToString().ToLower();
    //string scopeUrl = "https://www.google.com/analytics/feeds/" + Scope;
    string Scope = "https://www.google.com/analytics/feeds/";
    const string ServiceAccountId = "xxxxxxxxxxx.apps.googleusercontent.com";
    const string ServiceAccountUser = "xxxxxxxxxxx@developer.gserviceaccount.com";
    string key = string.Empty;
    foreach (string keyname in Directory.GetFiles(Server.MapPath("/"), "*.p12", SearchOption.AllDirectories))
    {
        key = keyname;
    }

    AssertionFlowClient client = new AssertionFlowClient(
        GoogleAuthenticationServer.Description, new X509Certificate2(key, "notasecret", X509KeyStorageFlags.Exportable))
    {
     Scope = Scope,   
        ServiceAccountId = ServiceAccountUser//,ServiceAccountUser = ServiceAccountUser
    };
      WebServerClient myWebServerClient = new WebServerClient(GoogleAuthenticationServer.Description);
    myWebServerClient.ClientIdentifier = this.ClientID;
    myWebServerClient.ClientSecret = this.ClientSecret;
    OAuth2Authenticator<WebServerClient> authenticator = new OAuth2Authenticator<WebServerClient>(myWebServerClient, GetAuthorization);

    AnalyticsService service = new AnalyticsService(authenticator);
    string profileId = Session["_ProfileID"].ToString() ;
    string startDate = StartDate;
    string endDate = EndDate;
    string metrics = "ga:visits";
    DataResource.GaResource.GetRequest request = service.Data.Ga.Get(profileId, startDate, endDate, metrics);
    request.Dimensions = "ga:date";
    request.StartIndex = 1;
    request.MaxResults = 500;
    GaData data = request.Fetch();
    return data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:58:31.260

不要再打扰了，我通过离线访问得到了它。感谢您显示支持

# c# - 在 MVVM 架构中将项目绑定到 silverlight 组合框

> ID：14237418
> 
> 赞同：1
> 
> 时间：2013-01-09T14:27:26.543
> 
> 标签：c#, wpf, silverlight, mvvm

我在实体类中创建一个属性，如下所示

```
public class Myclass
{
private string _Selecteditem;
public string SelectedItem
{
get{return _Selecteditem;}
set{_Seleteditem = value;
}
} 
```

在 xaml 页面中，我正在绑定 Combobox，如下所示

```
<ComboBox Name="cmbCountry" Grid.Column="14" Grid.Row="0" Width="150" SelectedItem="{Binding SelectedCountry,Mode=TwoWay}" >
                <ComboBoxItem Tag="--Select--" Content="--Select--"/>
                <ComboBoxItem Tag="US" Content="US" />
                <ComboBoxItem Tag="CA" Content="CA" />
                <ComboBox.SelectedIndex>0</ComboBox.SelectedIndex>
            </ComboBox> 
```

我想将此选定项目添加到模型类中的查询字符串中，我正在尝试如下

```
Myclass myclass = new MyClass();     
QueryString.Add("SeletedItem", Convert.ToString(myclass.SelectedItem.Value)); 
```

在这里，我将 SelectedItem 值作为 System.Web.ComboItem 获取，但如果我选择“US”作为下拉列表，我需要获取“US”。如何获得价值请可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:32:38.577

不要在 xaml 代码中声明组合框项，而是`ObservableCollection`在模型中将它们声明为 an。然后将此属性绑定到`Items`xaml 中组合框的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:37:19.290

采用 `QueryString.Add("SeletedItem",(myclass.SelectedItem.Value as System.Windows.Controls.ComboBoxItem).Content.ToString());`

# scala - 如何在 sbt 中命令执行测试？

> ID：14237420
> 
> 赞同：2
> 
> 时间：2013-01-09T14:27:29.107
> 
> 标签：scala, sbt

请建议如何控制 sbt 中测试/规范执行顺序的最佳方法？

[maven-sirefire-plugin 中](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#runOrder)是否有类似 runOrder 的选项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:06:22.503

当然，对于并行执行，它不能清楚地完成，但对于顺序执行是可以解决的：

```
parallelExecution in test := false

testGrouping <<= definedTests in Test map { tests =>
  tests.map { test =>
    import Tests._
    new Group(
      name = test.name,
      tests = Seq(test),
      runPolicy = InProcess)
  }.sortWith(_.name < _.name)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:32:13.017

不，[不是并行执行](https://groups.google.com/d/msg/simple-build-tool/4SlL7pjDL3Y/cw_c0i9Chg0J)。[您可以通过添加`sequential`](https://stackoverflow.com/a/8030910/47978)到其声明的开头来要求测试类按顺序运行其案例。

# oop - OO中的用户权限设计：嵌入式方法与程序执行控制

> ID：14237425
> 
> 赞同：1
> 
> 时间：2013-01-09T14:27:54.673
> 
> 标签：oop, design-patterns

从现在开始，我对这个问题感到很困惑。

比如说，我必须设计一个 OO 系统，其中管理员将是唯一可以注册大学新生的用户。现在，我（显然）有系统的其他用户。我应该如何控制这些权限仅在用户是管理员时才适用？

我有两种可能性：将这些角色作为函数嵌入到与`Admin`class 通信的`Student`类中，或者只是控制新学生在程序执行中的注册，例如：

```
if(user_type() == 'a') register_student(); // a type means an admin user

else cout << "Access denied";

... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T17:17:09.630

有几种 OO 方法可以做到这一点：

```
if( user->has_permission( REGISTER_STUDENT ) ) {
  register_student();
} 
```

这是询问用户实例是否有权注册学生。其他方式：

```
 if( user->in_role( ROLE_ADMIN ) ) {
   register_student();
 } 
```

我对代码的问题是它公开了有关如何确定管理员角色的内部细节。这封信`a`最终将失去上下文，对于新维护者的地位变得毫无意义；然而，常量`ROLE_ADMIN`/`REGISTER_STUDENT`阐明了代码的意图，而不需要额外的注释。

执行注册并不是`User`类或类的真正责任。a注册自己`Admin`确实有意义：`Student`

```
 if( user->in_role( ROLE_ADMIN ) ) {
   student->register();
 } 
```

我希望在`Controller`课堂上看到这段代码。该类`Controller`将能够检查用户界面对象以确定：

*   当前选择了哪个学生
*   用户从界面中选择了什么选项
*   用户是什么角色

您可以实现以下内容：

```
if( user->is_admin() ) {
  student->register();
} 
```

虽然代码非常清晰，但灵活性较低，因为您可能希望保留以下可能性：

```
if( controller->can_execute( user, action ) ) {
  action->execute();
}
else {
  controller->execute_error( user, action );
} 
```

这提供了一个更加灵活的系统，可以将角色动态分配给操作。例如，您可以将方法映射`student->register()`到`ROLE_ADMIN`. 这将整个应用程序中的所有安全约束保持在一个位置，从而大大简化了维护。

还可以进一步简化：

```
controller->execute( user, action ); 
```

然后执行方法将类似于：

```
void execute( User user, Action action ) {
  if( can_execute( user, action ) ) {
    action->execute();
  }
  else {
    error( user, action );
  }
}

bool can_execute( User user, Action action ) {
  return user->is_in_role( action->get_role() );
} 
```

`cout`现在抽象了如何显示权限错误（对话框与 ）的实现细节。此外，错误消息可以更全面，例如：

```
"User registration is restricted to the administrator role." 
```

编码为以下字符串：

```
"%s is restricted to the %s role." 
```

控制器类可以自动替换`%s`。

# java - DeflaterOutputStream：写入超出流的末尾

> ID：14237426
> 
> 赞同：3
> 
> 时间：2013-01-09T14:28:02.023
> 
> 标签：java

deflaterstream 处理了“超出流结束写入”错误。我跟踪了错误，它显示流显然已经完成。但是，在我的功能开始时，将流创建为全新的，并且不要在最后调用关闭或完成..

错误：

```
SEVERE: null
java.io.IOException: write beyond end of stream
    at java.util.zip.DeflaterOutputStream.write(DeflaterOutputStream.java:102)
    at evidence.SaveStateManager.saveIncremental(SaveStateManager.java:82) 
```

代码：

```
public static void saveIncremental(int textureId, int layer, int shot) {
    try {
        bOut = new FileOutputStream("saves/p-" + layer + "-" + shot + ".gz");
        gzipOut = new DeflaterOutputStream (bOut, deflater);

        glPushAttrib(GL_ALL_ATTRIB_BITS);

        glBindTexture(GL_TEXTURE_2D, textureId);

        int bpp = 4; 
        ByteBuffer buffer = BufferUtils.createByteBuffer(SAVE_WIDTH * SAVE_HEIGHT * bpp);
        glGetTexImage(GL_TEXTURE_2D, 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer );

        byte[] bytes = new byte[1024];
        while (buffer.hasRemaining()) {
            int len = Math.min(buffer.remaining(), bytes.length);
            buffer.get(bytes, 0, len);
            try {
                gzipOut.write(bytes, 0, len);
            } catch (IOException ex) {
                Logger.getLogger(SaveStateManager.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

        glBindTexture(GL_TEXTURE_2D, 0);
        glPopAttrib();

        gzipOut.finish();
        gzipOut.close();
        bOut.close();
    } catch (Exception ex) {
        Logger.getLogger(SaveStateManager.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T14:33:51.973

Deflator 是有状态的，你正在重用它。

```
gzipOut = new DeflaterOutputStream (bOut, deflater); 
```

来自 DeflaterOutputStream 的来源

```
public void write(byte[] b, int off, int len) throws IOException {
    if (def.finished()) {
        throw new IOException("write beyond end of stream"); 
```

# jquery - 如何使用jquery动态更改子文本

> ID：14237430
> 
> 赞同：0
> 
> 时间：2013-01-09T14:28:15.233
> 
> 标签：jquery

我正在使用 jquery mouseenter/leave 来尝试更改容器内的（当前悬停的）文本而不更改任何其他子元素。

我在一个实时的 3rd 方网站上使用它——这意味着我无法控制 HTML 代码，这给了我以下问题：

*   我不知道父容器中有多少子元素
*   HTML 标签（父标签和子标签）可以是任何东西，从 LI、IMG、A、SPAN、H1 等
*   我需要更改的文本的位置从第一个到最后一个以及介于两者之间的任何内容都会有所不同

我尝试了以下方法（nameX 和 indexX 用于标识当前元素 - 我不能单独使用“this”，因为我需要在其他地方使用实际值）：

```
$("a,img,p").mouseenter(function (event) {
   nameX = this.tagName;
   indexX = $(nameX).index(this);
   $(''+nameX+':eq('+indexX+')').text("hello");
});

<ul>
  <li>
     <a href="">bullet 1  
        <img src="http://bit.ly/ZqJ1DL"  width="229" height="129"/>
     </a><br>  
     <a href="">bullet 2  
     </a><br>  
     <a href="">bullet 3
     </a><br>
     general text
  </li>
</ul> 
```

当我使用上述内容时 - 将鼠标悬停在项目符号 2 或项目符号 3 上时它确实有效。

但是，它不适用于项目符号 1 - 这里 JS 替换了父级的所有内容，包括图像 - 我只希望它替换 TEXT 并单独保留图像（和任何其他子级），无论位置如何文本。

在此处查看示例[FIDDLE](http://jsfiddle.net/stevepitman/esauq/1/)

[编辑：上面的 HTML 是示例代码 - 它可以是任何东西，因为它将是我悬停在上面的第 3 方网站的代码 - 因此请仅评论 JQuery 代码 - 谢谢，史蒂夫]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:17:26.953

我不确定这是否已经得到回答，但是：

```
$("a,p").mouseenter(function (event) {  
  nameX = this.tagName;
  indexX = $(nameX).index(this);
  runningText = $(''+nameX+':eq('+indexX+')').text();
  runningText = runningText.replace(/\W/g, ' ');
  while (runningText.charAt(runningText.length-1) == " ") {
    runningText = runningText.substr(0, runningText.length-1);
  }
  newText = "hello";
  newHTML = $(this).html();
  newHTML = newHTML.replace(runningText, newText);
  $(this).html(newHTML);  
}); 
```

[http://jsfiddle.net/esauq/36/](http://jsfiddle.net/esauq/36/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:49:37.110

此脚本选择锚点内的所有 DOM 元素，以便在更改文本时替换它们：

```
$("a").mouseenter(function (event) {
  nameX = this.tagName;
  indexX = $(nameX).index(this);

  var elem = $('' + nameX + ':eq(' + indexX + ')');  
  var internals = $("*", elem);  
  elem.html("")
      .append(internals)
      .append("hello");
}); 
```

[http://jsfiddle.net/vvtgQ/](http://jsfiddle.net/vvtgQ/)

这是一个使用 jQuery.contents() 仅适用于 :text 元素的版本：

```
$("a").mouseenter(function (event) {
  nameX = this.tagName;
  indexX = $(nameX).index(this);

  var elem = $('' + nameX + ':eq(' + indexX + ')');
  elem.contents().each(function(index, item) {    
    if(item.nodeType == 3)
    {
      item.nodeValue = "hello";
    }
  });
}); 
```

[http://jsfiddle.net/eYSXp/](http://jsfiddle.net/eYSXp/)

# javascript - Knockout Js Dropdown 未加载来自 WebAPi 服务的值

> ID：14237434
> 
> 赞同：0
> 
> 时间：2013-01-09T14:28:22.627
> 
> 标签：javascript, asp.net-mvc-4, knockout.js, asp.net-web-api, html.dropdownlistfor

Knockout Js Dropdown 未加载来自 WebAPi 服务的值

代码如下，请帮助我。

这是对下拉的淘汰js调用

```
<select data-bind="options: menus, optionsText: 'text', optionsValue: 'pk_smartMenuID',  optionsCaption: 'Choose...'"></select> 
```

网络 API 调用

```
 // GET api/SmartMenu
    public IEnumerable<SmartMenu> GetSmartMenus()
    {
        var smartmenus = _db.SmartMenus.Include(s => s.ParentSmartMenu);
        return smartmenus.AsEnumerable();
    } 
```

这是联系 web api 服务器调用的视图模型（脚本）

```
@section Scripts { 
@Scripts.Render("~/bundles/jqueryval") 
@Scripts.Render("~/bundles/knockout") 

<script type="text/javascript">
    function MenuViewModel() {
        var self = this;
        var baseUri = '@ViewBag.ApiUrl';
        self.menus = ko.observableArray([]);
        self.selectedMenu = ko.observable();

        self.addMenu = function(formElement) {
          // If valid, post the serialized form data to the web api 
          $(formElement).validate();
          if ($(formElement).valid()) {
            $.post(baseUri, $(formElement).serialize(), null, "json")
            .done(function(o) { self.menus.push(o); });
          }
        };

        $.getJSON(baseUri, self.menus);
      }

      $(document).ready(function() {
        ko.applyBindings(new MenuViewModel());
      });
</script> 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:57:27.070

由于 json 数据在 Linkedlist 中需要迭代，我在[http://knockoutjs.com/documentation/json-data.html中得到了答案](http://knockoutjs.com/documentation/json-data.html)

# javascript - 录制后停止 jRecorder 播放

> ID：14237437
> 
> 赞同：0
> 
> 时间：2013-01-09T14:28:31.477
> 
> 标签：javascript, jquery, flash, jrecorder

我已经使用 jRecorder 有一段时间了，考虑到它的轻量级，它非常好。

现在，我有一个案例，我需要阻止 jRecorder 在录制后播放录制的音频。我已经尝试了 jRecorder 中的几乎所有功能，并且文档不是*很好*。

任何人都遇到并解决了这个问题？

这是代码，实际上只是标准的 jRecorder 东西。

```
$.jRecorder({
    'swf_path': '/scripts/jrecorder1.1/jRecorder.swf',
    'host': host,
    'callback_started_recording': function() {
        $('.audio-recorder').addClass('recording');
    },
    'callback_finished_recording': function() {
        $('.audio-recorder').removeClass('recording');
    },
    'callback_stopped_recording': function() {
        $.jRecorder.sendData();
        $('.audio-recorder').removeClass('recording');
    },
    'callback_error_recording': function() {
        $('.audio-recorder').removeClass('recording');
    },
    'callback_activityTime': function(time) {
    },
    'callback_activityLevel': function(level) {
    },
    'callback_finished_sending': function(response) {
    }
}, $('.audio-recorder .audio-recorder-singleton')); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T14:35:22.160

经过一天的几乎所有尝试，我终于找到了解决方案。我想我会把它完整地发布在这里，因为 jRecorder 网站上有很多关于如何做到这一点的评论，但他们没有得到答复。

为此，您需要执行以下操作：

1.  转到[https://github.com/sythoos/jRecorder](https://github.com/sythoos/jRecorder)并下载flash-fla 文件夹中的**所有内容。**确保与本地计算机上的 flash-fla 文件夹结构的文件夹完全匹配**。**

2.  一旦你完成了，如果你还没有得到它，你将需要下载 Flash。我使用免费的 30 天试用版来执行此操作，您也可以这样做。

3.  打开您现在应该在本地目录中拥有的 Main.as 文件并删除第 160 行，如下所示：

    ```
    private function recordComplete(e:Event):void
    {
        //fileReference.save(recorder.output, "recording.wav");

        //finalize_recording();

        preview_recording(); <----- **DELETE THIS**

    } 
    ```

4.  现在，您需要在 Flash 中打开 AudioRecorderCS4-1.0.fla 文件并导出影片（文件 -> 导出 -> 导出影片）。

5.  导出后（并命名以便您可以找到它），在项目中引用/包含您的新 SWF 并更改`swfPath`您的 jRecorder 参数以匹配新的 SWF，瞧！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-04T15:13:59.447

您可以从此处下载旧版本的 jRecorder.swf 文件[jRecorder.swf 无需预览](https://github.com/sythoos/jRecorder/blob/dee290facfbf904778576c0ca98473281d033e73/javascript/jRecorder.swf) ，因此您无需重新编译 fla 文件。

点击 Raw 按钮下载它。这个版本没有函数 jSendFileToServer 所以你应该在你的 jRecorder.js 文件中把它注释掉。WAV 文件将在录制停止后立即提交到服务器。

# javascript - javascript选择字符串的一部分

> ID：14237439
> 
> 赞同：0
> 
> 时间：2013-01-09T14:28:47.123
> 
> 标签：javascript

我有以下 HTML：

```
<li class="workorder" id="workorder_7"> 
```

我想在一些javascript中使用_之后的数字。在这种情况下，我需要整数 7

我该怎么做？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:30:51.793

There are multiple ways to do that: regular expressions, substring matching, and others. One of the easiest is to just use `split` to break the string into an array, and grab the last array element:

```
var str_id = "workorder_7";
var id = str_id.split('_')[1]; 
```

You can also use `.pop` as suggested by VisioN to get the last element from the array. Then it would work with a string with any number of underscores, provided the numeric id is the last one:

```
var str_id = "main_workorder_7";
var id = str_id.split('_').pop(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:31:52.110

另一种方法是使用`substring`：

```
var str_id = "workorder_7";
var id = str_id.substring(str_id.indexOf('_') + 1); 
```

如果要获取*最后一个*下划线后面的内容，可以使用：

```
var str_id = "work_order_id_7";
var id = str_id.substring(str_id.lastIndexOf('_') + 1); 
```

# iphone - Access UIView inside UIScrollView correctly

> ID：14237440
> 
> 赞同：1
> 
> 时间：2013-01-09T14:28:46.203
> 
> 标签：iphone, uiview, uiscrollview

I've this code:

```
int i=0;
for (UIView *view in [self subviews]) {
   //NSLog(@"index %d - i %d",index,i);
   if (i==index) {
      NSLog(@"index %d - i %d",index,i);
      [view setAlpha:0.3];
      [view setUserInteractionEnabled:NO];
   }
   i++;
} 
```

"index" is a variable used to select the view to modify.

The problem is that nothing happen, instead if I run this code:

```
for (UIView *view in [self subviews]) {
    [view setAlpha:0.3];
    [view setUserInteractionEnabled:NO];
} 
```

every view will be modify obviously, but i need the first code :)

ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:39:31.153

设置滚动视图中所有子视图的标签，然后将所选视图的标签传递给索引变量，希望它是一个整数**。**

```
 for(int i = 1; i <=4; i++){

  UIView *myView =  [UIView......]; // set your view
  myView.tag  = i;
  [your_scrollView addSubview:myView];
} 
```

然后你可以像下面这样。

```
for (UIView *view in [your_scrollView subviews])
{
  if (view.tag == index) 
  {
  [view setAlpha:0.3];
  [view setUserInteractionEnabled:NO];
  }
} 
```

或者有一种简单的方法来获取视图 **[your_scrollView viewWithTag:index]**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:30:32.470

Try this code :-

```
for (UIView *view in [scrollView subviews]) {
        [view setAlpha:0.3];
        [view setUserInteractionEnabled:NO];
    } 
```

Hope it works

# ruby-on-rails-3.2 - Accessing request object in an initializer in rails

> ID：14237441
> 
> 赞同：3
> 
> 时间：2013-01-09T14:28:47.110
> 
> 标签：ruby-on-rails-3.2

How can I access the `request` object in a rails initializer?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:33:42.767

AFAIK 这是不可能的。

每个发送到服务器的请求都会生成一个请求对象，因此在您初始化 Rails 应用程序时它不存在。

我会惊讶地看到一个答案另有说明，但这对我来说没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T13:30:04.477

我参加了一个hackhands会议并得到了这个问题的答案。

在您的 application.rb 文件中，您可以定义变量并设置它们的值

```
config.heroku_worker_count = 0 
```

然后，您可以使用以下语法访问和操作 app 范围内的变量，例如在模型中：

```
Rails.application.config.heroku_worker_count = 1 
```

这会保留价值观，这就是我想要一个对象的原因。但是，正如公认的答案所述，使用如下调用是不可行的：

```
config.heroku_worker_count = MyModel.new 
```

# xcode - Modify MotionGraphs sample code

> ID：14237445
> 
> 赞同：0
> 
> 时间：2013-01-09T14:29:02.017
> 
> 标签：xcode, file, accelerometer, sensors

I want to save accelerometer or sensor values to a filetext through MotionGraphs. When deviceMotion is activated, it is used the next code:

```
if ([mManager isDeviceMotionAvailable] == YES) {

    [mManager setDeviceMotionUpdateInterval:updateInterval];

    [mManager startDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue] withHandler:^(CMDeviceMotion *deviceMotion, NSError *error) {

        // attitude

        [[weakSelf.graphViews objectAtIndex:kDeviceMotionGraphTypeAttitude] addX:deviceMotion.attitude.roll y:deviceMotion.attitude.pitch z:deviceMotion.attitude.yaw];

        //rotationRate

        [[weakSelf.graphViews objectAtIndex:kDeviceMotionGraphTypeRotationRate] addX:deviceMotion.rotationRate.x y:deviceMotion.rotationRate.y z:deviceMotion.rotationRate.z];

        // gravity

        [[weakSelf.graphViews objectAtIndex:kDeviceMotionGraphTypeGravity] addX:deviceMotion.gravity.x y:deviceMotion.gravity.y z:deviceMotion.gravity.z];

        // userAcceleration

        [[weakSelf.graphViews objectAtIndex:kDeviceMotionGraphTypeUserAcceleration] addX:deviceMotion.userAcceleration.x y:deviceMotion.userAcceleration.y z:deviceMotion.userAcceleration.z]; 
```

I think that a queue is being used and I want to introduce an implementation for saving from this queue to a filetext.

How will it be possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:15:22.457

你的代码是这样的：

```
NSMutableArray *sensorData;
//[sensorData removeAllObjects];

if ([mManager isDeviceMotionAvailable] == YES) {
    [mManager setDeviceMotionUpdateInterval:updateInterval];
    [mManager startDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue] withHandler:^(CMDeviceMotion *deviceMotion, NSError *error) {
        NSString *strSensorData = [NSString stringWithFormat:@"%.6f %.6f %.6f %.6f %.6f %.6f %.6f %.6f %.6f %.6f %.6f %.6f %.6f", deviceMotion.timestamp, deviceMotion.attitude.roll, deviceMotion.attitude.pitch, deviceMotion.attitude.yaw, deviceMotion.rotationRate.x, deviceMotion.rotationRate.y, deviceMotion.rotationRate.z, deviceMotion.gravity.x, deviceMotion.gravity.y, deviceMotion.gravity.z, deviceMotion.userAcceleration.x, deviceMotion.userAcceleration.y, deviceMotion.userAcceleration.z];
        [sensorData addObject:strSensorData];
        //...
}

- (void)stopUpdates
{
    CMMotionManager *mManager = [(APLAppDelegate *)[[UIApplication sharedApplication] delegate] sharedManager];

    if ([mManager isDeviceMotionActive] == YES) {
        [mManager stopDeviceMotionUpdates];
    }

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex: 0];
    NSString *docFile = [docDir stringByAppendingPathComponent: @"sensordata.txt"];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if (![fileManager fileExistsAtPath:docDir])
        [fileManager createFileAtPath:docDir
                             contents:nil
                           attributes:nil];
    //[sensorData writeToFile:docFile atomically:YES];
    [sensorData.description writeToFile:docFile atomically:YES encoding:NSUTF8StringEncoding error:nil];
} 
```

希望这可以帮助！

# molehill - adobe molehill android setting

> ID：14237446
> 
> 赞同：0
> 
> 时间：2013-01-09T14:29:05.330
> 
> 标签：molehill

Using Flash Builder 4.6 & SDK 4.6 Away3d and Starling Interoperation device - samsung galuxy s3

debugging on device, its run well. install exported apk on the device, its just white background.

[app name]_app.xml file setting is

```
<renderMode>direct</renderMode>

    <!-- Whether or not to pan when a soft keyboard is raised or lowered (either "pan" or "none").  Optional.  Defaults "pan." -->
    <!-- <softKeyboardBehavior></softKeyboardBehavior> -->
<autoOrients>false</autoOrients>
    <fullScreen>true</fullScreen>
    <visible>true</visible>
    <softKeyboardBehavior>none</softKeyboardBehavior> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:01:54.800

解决了。

只需使用最新的 Air sdk。

[http://www.flashdeveloper.co/post/10985842021/overlay-adobe-air-32-in-flash-builder-46](http://www.flashdeveloper.co/post/10985842021/overlay-adobe-air-32-in-flash-builder-46)

# elasticsearch - 保持 id 顺序如查询

> ID：14237450
> 
> 赞同：5
> 
> 时间：2013-01-09T14:29:14.113
> 
> 标签：elasticsearch, tire

我正在使用 elasticsearch 来获取 id 到某些值的映射，但我必须按照 id 的顺序来保持结果的顺序。

例子：

```
 def term_mapping(ids)
    ids = ids.split(',')
    self.search do |s|
      s.filter :terms, id: ids
    end
  end

  res = term_mapping("4,2,3,1") 
```

结果集合应包含 ID 顺序为 4、2、3、1... 的对象

你知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:49:55.723

如果您需要使用搜索，您可以在将 id 发送到 elasticsearch 之前对它们进行排序并检索按 id 排序的结果，或者您可以创建一个自定义排序脚本，该脚本将返回当前文档在 id 数组中的位置。然而，一个更简单和更快的解决方案是简单地使用[Multi-Get](http://www.elasticsearch.org/guide/reference/api/multi-get.html)而不是搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-06T19:47:00.300

一种选择是使用[Multi GET API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-multi-get.html)。如果这对您不起作用，另一种解决方案是在您从 es 检索结果后对结果进行排序。在 python 中，可以这样做：

```
doc_ids = ["123", "333", "456"]  # We want to keep this order
order = {v: i for i, v in enumerate(doc_ids)} 
es_results = [{"_id": "333"}, {"_id": "456"}, {"_id": "123"}]
results = sorted(es_results, key=lambda x: order[x['_id']])
# Results:
# [{'_id': '123'}, {'_id': '333'}, {'_id': '456'}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-02T09:01:45.080

可能这个问题已经解决了，但是有人会帮助这个答案

我们可以将`pinned_query`用于 ES。不需要循环进行排序

```
**qs = {
      "size" => drug_ids.count,
      "query" => {
        "pinned" => {
          "ids" => drug_ids,
          "organic" => {
              "terms": {
                "id": drug_ids
              }
          }
        }
      }
    }** 
```

它将保持输入的顺序

# php - Wrong relative path in css on cdn

> ID：14237455
> 
> 赞同：2
> 
> 时间：2013-01-09T14:29:33.003
> 
> 标签：php, html, css, cdn

I have a project on domain **example.com** all css files for this project are getting from **cdn.example.com** in this css files I used only relative paths e.g.

```
 background:url(../../images/colorbox/loading.gif) no-repeat center center; 
```

Due to [this](https://stackoverflow.com/questions/2718532/is-a-relative-path-in-a-css-file-relative-to-the-css-file) path for images should be **cdn.example.com/../../images/....**

But all images are loading from **example.com/...** not **cdn**. Is there any advices, For loading images from cdn?

# ios - Multi dimension Lookup Table

> ID：14237457
> 
> 赞同：1
> 
> 时间：2013-01-09T14:29:40.447
> 
> 标签：ios, objective-c, lookup

I need to define a large amount of data to be stored within an app and used as a lookup table. For instance, I have an array of manufacturer names, each with a mfg code. Each manufacturer can make different products, each with their own code as well.

A,7 could be deciphered to mean

```
Manufacturer: Apple(A)
Product: MacMini(7) 
```

I see several ways of defining this, but I'm not sure which would be best.

Option 1) #define these constants in a separate header file such as:

```
#define MFG_APPLE @"A"
#define MFG_DELL  @"B"

#define PRODUCT_MAC_MINI 7
#define PRODUCT_INSPIRON 2 
```

Option 2) create a dictionary object filled with dictionary objects to allow me to index through them easier.

Option 3) use core data to create a database of these mfgs and products and relationships.

*If option 2 or 3 is suggested, are there easy ways to pre-populate these data structures instead of hard-coding them to populate during program startup?*

Option 4) Create a web service to tie this back to a server, where the data can be updated more often. A JSON query will send the mfg and product codes to the server, where it can respond with the mfg and product names.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:14:39.330

您应该考虑以下几点：如果数据库随应用程序一起提供，则每次必须更新数据库时，您都必须为应用程序发布更新。所以问题是，您需要多久更新一次数据？如果每隔几个月或一年更新一次数据库就可以了，那么将数据库与您的应用程序一起发布可能是一种选择，如果您需要每月甚至每周更新一次，您绝对应该将数据库托管在某处网络；在如此短的时间间隔内发布更新不是一个可行的选择。

您应该考虑的另一件事：如果数据库仅作为 Web 服务存在，并且每次查找都需要对服务器进行 JSON 调用，那么如果用户离线（目前没有任何网络访问权限）就无法执行查找原因）。此外，每次查找都会消耗用户流量，因此如果用户有每月限制，但每天需要执行大量查找，使用您的应用程序可能会很快导致他超过每月限制，导致他没有任何互联网服务（或非常节流一个）最后。

根据我的经验，最好在线托管这样的数据库，但如果可能的话，将其缓存以供离线访问。该应用程序本身附带一个数据库副本，该副本在您构建应用程序以进行分发的当天是最新的。每次启动应用程序时，如果应用程序永远不会退出，可能每天一次，它会向 Web 服务器查询数据库的当前“版本”。如果此版本比应用程序附带的版本更新，它会尝试将此数据库的副本下载到其本地缓存，然后切换到缓存副本以供将来查找。如果缓存的副本丢失（系统可能随时刷新缓存），则必须重新下载。同时，它可以使用已经过时的出厂数据库，但总比没有好。如果无法下载（例如设备上没有足够的可用空间），

所以基本上你的应用程序将有一个如下的工作流程：

1.  开始
2.  是否存在本地缓存副本？如果没有转到 6。
3.  本地缓存的副本是最新的吗？如果没有转到 5。
4.  使用本地缓存副本执行查找。转到 12。
5.  删除过时的缓存副本。转到 1。
6.  发货的数据库是最新的吗？如果没有转到 8。
7.  使用随附的数据库执行查找。转到 12。
8.  下载更新的数据库。
9.  下载成功了吗？如果是，则转到 4。
10.  用户当前在线？如果没有转到 7。
11.  使用 JSON Web 服务执行查找。转到 12。
12.  结尾

如果您将来只向数据库添加更多条目，而现有条目永远不会改变，那么还有另一个更好的选择：您只有两个数据库。一个随应用程序一起提供，一个只包含上次应用程序发布后的更新（添加的新条目）。这大大减少了需要下载和缓存的数据量。在这种情况下，您的应用程序必须始终执行两次查找，一次在交付的数据库中（始终首先执行），如果没有找到，则在下载的缓存副本中，其中不包含已在交付的数据库中找到的条目（或直接在线，如果没有可用的缓存副本，但用户当前可以访问 Internet）。每次发布应用程序的新更新时，它都会获得数据库的新完整副本，

用于下载的更新数据库甚至可以由服务器动态创建，这当然是最好的选择。例如，在发布应用程序后，您将 3 个供应商和 30 个产品添加到数据库中，并且每个供应商和产品都有一个唯一的 ID（随着添加的每个新条目严格增加），然后应用程序可以告诉服务器它是最高的供应商知道 ID 为 X，最高产品的 ID 为 Y，在这种情况下，服务器会发送一个更新数据库，其中包含 ID 高于 X 和 Y 的所有供应商和产品。

所有这些决定都会影响要使用的数据库格式。一般来说，这听起来很像 CoreData 的工作，但是如果您想要动态更新数据库，更新应该以不同的格式（JSON、XML、CVS 或其他服务器可以轻松生成的格式）交付并通过以下方式转换为 CoreData下载完成后的应用程序，因为在服务器上动态生成CoreData数据库相当困难，绝对不推荐。

# javascript - XQuery：在 javascript 函数中使用 XQuery 数据？

> ID：14237460
> 
> 赞同：0
> 
> 时间：2013-01-09T14:29:50.693
> 
> 标签：javascript, maps, xquery

我的问题如下。我在我的 xquery 文件顶部声明了一个包含一些位置的序列：

```
xquery version "1.0";
declare option exist:serialize "method=xhtml media-type=text/html";
let $locations := //location
return 
```

然后我有一个 javascript 代码，`<head>`它使用 Google Maps API 显示地图。我想知道的是如何`$locations`在我的 javascript 函数中使用我的 xquery 变量在我的地图上显示标记？

我使用了来自[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/simple_example.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/simple_example.html)的代码：

```
<script type="text/javascript">
<!--
function initialize() {
    var center = new google.maps.LatLng(43.700,7.267);

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom:12,
      center: center,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var markers = [];
    for (var i = 0; i < 100; i++) {
      var dataPhoto = data.photos[i];
      var latLng = new google.maps.LatLng(dataPhoto.latitude,
          dataPhoto.longitude);
      var marker = new google.maps.Marker({
        position: latLng
      });
      markers.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers);
  }
  google.maps.event.addDomListener(window, 'load', initialize);
-->
</script> 
```

当然在我的 html 源代码中：

```
<html>
   <div id="map-container"><div id="map"></div></div>
<html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:46:57.700

您需要对大括号进行转义，以便 XQuery 处理器不会将它们视为 XQuery。要转义花括号，只需重复它。代替：

```
function initialize() { 
```

... 采用：

```
function initialize() {{ 
```

或者，您可以通过在与 XQuery 分开的 .js 文件中引用它来保持您的 javascript 完整/未修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:43:05.717

如果您使用的是 Zorba，可以为您的 JS 代码序列化 JSON 值：

```
let $obj := { "data": [1, 2, 3]}
return <script>
  var data = {serialize($obj, ())};
</script> 
```

[你可以在http://www.zorba-xquery.com/html/demo#+Ic0lo+4mIEhji0Z0GujBQ==](http://www.zorba-xquery.com/html/demo#+Ic0lo+4mIEhji0Z0GujBQ==)上看到这个例子

# iphone - Is it possible to create a copy-on-write copy of a file on an iOS device?

> ID：14237463
> 
> 赞同：1
> 
> 时间：2013-01-09T14:29:56.027
> 
> 标签：iphone, ios, ipad, hfs+

I need to copy a file that will be modified later on an iOS device. For performance reasons, it would be great if this would work copy-on-write, i.e. the file is not really duplicated, and only modified blocks of the copy are written later.

As pointed out in the comments, this probably has to be supported by the file system (HFS+?). A link is not sufficient, since both the old (A) and new (B) file name will point to the same file, and if I modify A, B will also change.

A "lazy" copy also would not help, since on first write the whole file would still need to be copied.

I was thinking more about a solution like the one described by @Hot Licks that would start with A and B using the same blocks on disk, and when I write to file B, only the modified blocks would be stored on disk, while identical parts in A and B go on using the same blocks on disk.

Is this possible on iOS?

Regards, Jochen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:35:15.950

没有内置机制可以有效地进行文件的部分复制，但是如果您要复制文件并对内容进行内部更改，那么最有效的机制就是 mmap。您将文件映射到内存并就地修改它。更改会自动写回文件，而无需分段重写文件。

```
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <sys/mman.h>

struct stat astat;
int fd = open("filename", O_RDWR);
if ((fd != -1) && (fstat(fd, &astat) != -1)) {
    char *data = mmap(0, astat.st_size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
    if (data != MAP_FAILED) {
        self.data_ptr = data;
        self.data_size = astat.st_size;
    }
    close(fd);
} 
```

完成文件后，使用 munmap 将映射释放回操作系统：

```
munmap(self.data_ptr, self.data_size); 
```

通常的警告适用于修改共享资源。

# c - 在 C 中打印二维指针数组后继续崩溃

> ID：14237464
> 
> 赞同：0
> 
> 时间：2013-01-09T14:29:57.023
> 
> 标签：c

在下面的代码中，我在最后一个 for 循环之后一直崩溃。我无法通过使用 Netbeans 进行调试来弄清楚。for 循环有效，并打印出我想要打印的内容，但随后程序崩溃而不是成功终止。你能帮忙吗（我知道gets，我会尽快尝试fgets）？

代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main()
{
    char *str,**string,buffer[50],temp[2];
    int i,j,size,counter;
    size=1;

    string=(char**) calloc(size,sizeof(char*));
    for (i=0; i<size; i++) string[i]=(char*)malloc(50*sizeof(char));

    printf("\nGimme strings, terminate input with x");
    i=0;
    gets(string[i]);
    temp[0]=120;//x
    temp[1]='\0';
    size=2;
    while(strcmp(string[i],temp)!=0)
    {
        string=realloc(string,size*sizeof(char**));
        i++;
        string[i]=malloc(50*sizeof(char));
        gets(string[i]);
        size++;
        counter++;
    }
    for(i=0; i<=counter; i++) printf("\n%s",string[i]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:32:54.397

`counter`未在 `while`循环前初始化为 0

并使用

```
string=realloc(string,size*sizeof(char*)); 
```

代替

```
string=realloc(string,size*sizeof(char**)); 
```

你能否详细描述你打算做什么，因为在你的代码中你正在分配指针数组，然后你为数组中的每个指针分配内存，然后你删除了几乎数组， `realloc(string,2*sizeof(char**));`这将删除几乎数组并只保留前 2 个指针。因此，您将丢失指向已分配内存的指针，因此您无法再释放它们：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:34:14.940

1.  计数器应在 while 循环之前设置为零。默认情况下它不设置为零。

2.  for 查找中的循环应排除`counter`：

    `for(i=0; i<counter; i++) printf("\n%s",string[i]);`

3.  通过调用释放所有动态分配的内存`free`。

# r - how to change line length on Rterm.exe

> ID：14237467
> 
> 赞同：8
> 
> 时间：2013-01-09T14:30:08.863
> 
> 标签：r, cmd, rgui, rterm

I am using `R 2.15.2` on `windows XP`.

I was used to use `Rgui.exe` but it was lacking the UNIX standards I like to use like `CTRL+R <=>backward research` and `CTRL+U <=>erase line` ...

If I missed something please tell me !

Then I tried `Rterm.exe` (which looks identical to `R.exe` to me) which has all those nice features. I found how to tune it right clicking on the top of the window to set height-width (it is like tuning the window you get from `cmd.exe`).

The problem is that now I cannot see on the window more than `75` characters, with a `$` at the end: like this:

`R) ppppppppppppppppppppppppppppppppppppppppppppppppppppppppppppppppppppppppppp$`

Not sure if it is a `R` option of a `windows` one, but if I set `options("width"=180)` I can see `data.frame` on the full width of the window...

Not sure what is happening, can I modify this?

# We still do not know the answer to that one, so I guess 50 pts goes to Oscar de León... good for him to bad for me...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:09:55.100

可悲的是，它似乎是内置的。

[尝试打印长字符串](https://stat.ethz.ch/pipermail/r-help/2000-January/009935.html)时，R 曾经出现过问题。显然，它首先在 Rterm 和其他版本的 R 中修复，然后在 Rgui 中修复。

当 Rgui 被修复时，可能是通过不同的方式，因为这个问题可以在 Rgui 中修复，但不能在 R 的其他 Windows 版本中修复。您可以在[Rgui](https://stat.ethz.ch/pipermail/r-help/2003-November/042645.html)和（稍后）[Rterm](https://stat.ethz.ch/pipermail/r-help/2009-December/221567.html)中更改控制台的输出宽度。

提示是另一个故事。它实际上与输出空间不同，因此使用不同的选项进行控制；但是，这只适用于 Rgui。为此，请`pgcolumns=180`在. 这会修改 Rgui 控制台内部寻呼机的宽度，并有效地使您能够在每个输入提示符下键入多达 180 个字符。`Rconsole``[R HOME]\etc\`

可能有一种方法可以将该行为整合到 Rterm 中，也许[Duncan Murdoch](https://stat.ethz.ch/pipermail/r-devel/2010-November/059257.html)可以为您指明正确的方向（或证明我完全错了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T01:13:17.580

我不太确定要求的是什么。如果需要`RTerm.exe`显示长行的结尾（并将光标定位在那里），请使用`CTRL`- `E`。您可以使用`CTRL`-回到行首`A`。可以根据需要反复来回走动，直到线路用完为止`ENTER`。

的控制字符`readline`似乎处于活动状态，例如`CTRL`-`P`向后滚动一个命令`CTRL`-`N`如果您点击`CTRL`-`P`太多次，则从历史记录中调出“下一个”命令。`up`（这些与/`down arrow`键的行为相同。）有关其他预期行为，请参见[链接。](http://tiswww.case.edu/php/chet/readline/readline.html)`readline`

在我的机器上`alt`-`f`和`alt`- `b`（应该是`meta`-`f`和`meta`- `b`）本身并没有通过文字向前或向后移动，但是`ESC`-`b`和`ESC`-`f`在超出控制台宽度并且 $ 标记在右侧或留下的范围有更多的材料需要考虑。

如果您想换行显示行，那么您需要考虑替代或添加`readline`: [link](http://nileshk.com/2009/05/08/rlwrap.html)，但这是一个未经测试的建议，仅仅是搜索的结果：“readline wrap display”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:14:50.810

该命令应该是`options(width = 180)`（不带引号`width`），但是当您在 Windows shell 中运行 Rterm 时，它不会考虑对此值的更改；它只打印与控制台一样宽的输出。

使用 R 的最佳方式是（几乎总是）使用 IDE。如果您想要UNIXy，请尝试使用 emacs + [ESS](http://ess.r-project.org/)或众多 vim 插件之一（[R.vim](http://www.vim.org/scripts/script.php?script_id=1048)、[vim-R](http://www.vim.org/scripts/script.php?script_id=2628)、[VIM:r-plugin ）。](http://www.lepem.ufc.br/jaa/r-plugin.html)

# tfs - 当我部署时，mht 文件不会被复制

> ID：14237470
> 
> 赞同：1
> 
> 时间：2013-01-09T14:30:19.067
> 
> 标签：tfs

当我部署我的项目时，带有 mht 扩展名的帮助文件不会与项目的其余部分一起复制到放置文件夹中。为什么会这样，我该如何解决？我正在使用 tfs 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T15:46:26.827

我不知道问题是如何引起的，但我发现修复它的方法是编辑 .prog 文件。已`<ItemGroup>`更正如下；

```
<Content Include="Views\Leaver\ConfirmSubmission.cshtml" />
<Content Include="Help\Help.mht" />
<!--<None Include="Help\Help.mht">
  <CopyToOutputDirectory>Always</CopyToOutputDirectory>
</None>--> 
```

所以我用上面的行替换了注释掉的代码，即`<Content Include="Help\Help.mht" />` 现在它可以工作了。

# zend-framework2 - ZF2 Capturing HeadStyle Helper

> ID：14237475
> 
> 赞同：0
> 
> 时间：2013-01-09T14:30:32.887
> 
> 标签：zend-framework2

I have used the following codes in my app.

```
<?php $this->headStyle()->captureStart() ?>
body {
    background-color: <?php echo $this->bgColor ?>;
}
<?php $this->headStyle()->captureEnd() ?> 
```

I'm getting this error in my view script.

Fatal error: Call to a member function captureStart() on a non-object.

What's wrong?

# vbscript - VBScript to click buttons

> ID：14237480
> 
> 赞同：0
> 
> 时间：2013-01-09T14:31:03.330
> 
> 标签：vbscript

I am trying to write a program in VBScript to automate tasks that I do in Internet Explorer. I need to click a series of buttons and textboxes and I was wondering if someone could give me a hint on how to get VBScript to click them for me?

At the moment I am just telling my program to click "tab" to get to the button I want and click "enter" - which makes the program really slow. I also need to enter data into a series of textboxes and click a button that will add another textbox for me to enter information in.

Any guidance would be greatly appreciated.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-31T02:55:16.770

右键单击您想要在 VBscript 中单击的按钮。单击`Inspect Element`。

查找按钮的元素 ID。

使 VBscript 单击按钮，如下例所示：

```
Document.getElementById("IDGOESHERE").Click 
```

# java - 下载文件时文件名中的“,”

> ID：14237482
> 
> 赞同：1
> 
> 时间：2013-01-09T14:31:04.257
> 
> 标签：java, spring, servlets, response

我正在从控制器下载文件。这没用。这是因为文件名中的“，”。如果我从名称中删除“，”，它将起作用。是否有任何解决方法。我应该做 String.replace("," "")。肯定有更好的办法？

```
response.setHeader("Content-Disposition", "inline; filename=" + "abbbbababbaababba.4.1.2013,aakdfhfdf.xlsx"); 
```

完整方法

```
@RequestMapping(value = "/newsimage/{newsImageId} ", method = RequestMethod.GET)
public void getImage(HttpServletRequest request, HttpServletResponse response, @PathVariable long newsImageId) {

    NewsImage newsImage = newsImageService.findById(newsImageId);
    String fileName = newsImage.getFileName();
        response.setHeader("Content-Disposition", "inline; filename=" + "abbbbababbaababba.4.1.2013,aakdfhfdf.xlsx");
    response.setContentType(newsImage.getContentType());
    // response.setHeader("Content-Disposition", "attachment;filename=" + newsImage.getFileName());

    OutputStream out;
    try {
        out = response.getOutputStream();
        out.write(newsImage.getData());
        out.flush();
    } catch (IOException e) {
        logger.error(e.getMessage());
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:34:39.037

您需要引用文件名，否则它会被解释为 header 属性的一部分。

```
response.setHeader("Content-Disposition", 
    "inline; filename=\"" + "abbbbababbaababba.4.1.2013,aakdfhfdf.xlsx" + "\""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:34:42.803

有[保留字符和单词](http://en.wikipedia.org/wiki/Filename#Reserved_characters_and_words)，但“，”不是其中之一。我仍然会避免使用“，”（替换为“-”）。还， '。' 不应用于后缀以外的任何内容。

If you really really want to use ',' you should quote the entire file name, not because of operating system (or file system) restrictions but because of HTTP headers.

# sql - Sql 查询以确定何时达到阈值

> ID：14237492
> 
> 赞同：1
> 
> 时间：2013-01-09T14:31:39.037
> 
> 标签：sql, sql-server-2008

我有一个有趣的 SQL 问题，不胜感激。

我有一个包含列的表：

```
DateAdded
Score
Team 
```

用户将输入他们自己的分数，但它们不一定是有序的（如果他们每天不使用系统，有些可能会过时）。

团队中每个成员的分数相加，首先达到阈值分数的团队获胜。

我想要一个查询，它会告诉我哪个团队首先达到阈值以及在什么日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:36:54.957

您需要的是累积总和。而且，SQL Server 2008 不支持它。好消息，SQL Server 2012 可以。

因此，您可以使用相关子查询来执行此操作：

```
select team, min(dateadded) as FirstPastThreshold
from (select dateadded, score, team,
             (select sum(score) from t t2 where t2.team = t.team and t2.dateadded <= t.dateadded) as cumulativescore
      from t
     ) t
where cumulativescore>= @threshhold
group by team 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:14:46.877

我想，这就是你想要达到的。

```
SELECT TOP 1 T1.Dateadded, T1.Team FROM Table1 T1
 JOIN Table1 T2
  ON T1.Team = T2.Team
    and T1.Dateadded >= T2.Dateadded
GROUP BY T1.Dateadded, T1.Team
HAVING SUM(T2.Score) >= @Threshold
ORDER BY T1.Dateadded 
```

[SQL小提琴](http://sqlfiddle.com/#!3/5bdf8/2/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:36:45.343

您可以[`DENSE_RANK`](http://msdn.microsoft.com/en-us/library/ms173825.aspx)用来确定达到阈值的最佳/第一团队。

```
WITH CTE AS
(
  SELECT 
    DateAdded, Score, Team,
    DENSE_RANK() OVER (Order By DateAdded ASC, Score DESC) AS Rank
  FROM dbo.TableName
  WHERE
    Score >= Threshold
)
SELECT 
  DateAdded, Score, Team
FROM CTE
WHERE
  Rank = 1 
```

请注意，这可以返回多个团队。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:37:18.047

您可以添加名为 currentThresholdScore 的第四列。每当插入新记录时， currentThresholdScore 列将是该记录的值 Score 加上已插入的任何先前记录。然后检查 currentThresholdScore 是否超过发送邮件等的阈值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T14:50:58.070

您可以使用子查询来解决此问题。只需在查询中添加一列，列出当前分数加上过去分数的总和，然后按日期查找超过阈值的第一条记录

[Sql 小提琴](http://sqlfiddle.com/#!6/d9645/3)

```
Use tempdb
Create Table Scoring (DateAdded DateTime, Score INT, Team INT)
INSERT Scoring SELECT GetDate(), 100, 1
INSERT Scoring SELECT GetDate()+1, 150, 1
INSERT Scoring SELECT GetDate()+1, 50, 2
INSERT Scoring SELECT GetDate()+2, 75, 2
INSERT Scoring SELECT GetDate()-10, 75, 2

DECLARE @Threshhold INT
SET @Threshhold = 125

-- Table which includes a cumulative score
;WITH tbl AS 
(
SELECT 
    Team, 
    DateAdded, 
    Score, 
    -- This column calculates the current score + the sum of past scores
    IsNull((SELECT Sum(t2.Score) CumScore FROM Scoring t2 WHERE t2.Team = t.Team AND t2.DateAdded < t.DateAdded),0) 
    + Score AS  CumScore
FROM Scoring t
)

-- Find first record > threshold
SELECT TOP 1 * FROM tbl
WHERE CumScore >= @Threshhold
ORDER BY DateAdded ASC 
```

# jquery - 页面加载时如何实现jReject

> ID：14237497
> 
> 赞同：0
> 
> 时间：2013-01-09T14:31:48.423
> 
> 标签：jquery

我想在页面加载后加载[jReject脚本。](https://github.com/TurnWheel/jReject)在默认的 jReject 脚本中，它适用于单击，我希望在页面加载时使用它。应该做出哪些改变来实现这一目标？我应该把 $(function() { $.reject(); });

这是我在标题中的脚本：

```
$(function() {
    // Handle external links
    $('a[rel="external"]').click(function() {
        var href = $(this).attr('href');

        // Send external link event to Google Analaytics
        try {
            _gaq.push(['_trackEvent','External Links', href.split(/\/+/g)[1], href]);
        } catch (e) {};

        window.open(href,'jr_'+Math.round(Math.random()*11));
        return false;
    });

    // Handle displaying of option links
    $('em.option').css({
        cursor: 'pointer',
        fontSize: '1.1em',
        color: '#333',
        letterSpacing: '1px',
        borderBottom: '1px dashed #BBB'
    }).click(function() {
        var self = $(this);
        var opt = $.trim(self.text());

        $('ol.dp-c:first').children('li').children('span').each(function() {
            var self = $(this);
            var text = self.text();
            var srch = opt+':';

            // If found, highlight and jump window to position on page
            if (text.search(srch) !== -1) {
                self.css('color','red');
                window.location.hash = '#c-'+opt;
                window.scrollTo(0,self[0].offsetTop);
            }
        });
    });

    /* Demo Codes */

    $('#demo3').click(function() {
        $.reject({
            reject: { all: true }, // Reject all renderers for demo
            header: 'Your browser is not supported here', // Header Text
            paragraph1: 'You are currently using an unsupported browser', // Paragraph 1
            paragraph2: 'Please install one of the many optional browsers below to proceed',
            closeMessage: 'Close this window at your own demise!' // Message below close window link
        }); // Customized Text

        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:39:48.397

就在您的 OP 中链接的底部：

负载运行（默认选项）：

```
$(function() { $.reject(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:39:52.323

来自文档：

> 加载时运行（默认选项）： $(function() { $.reject(); });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T05:19:52.513

转你的代码

```
$('#demo3').click(function() {
    $.reject({
        reject: { all: true }, // Reject all renderers for demo
        header: 'Your browser is not supported here', // Header Text
        paragraph1: 'You are currently using an unsupported browser', // Paragraph 1
        paragraph2: 'Please install one of the many optional browsers below to proceed',
        closeMessage: 'Close this window at your own demise!' // Message below close window link
    }); 
    return false;
}); 
```

进入

```
$.reject({
        reject: { all: true }, // Reject all renderers for demo
        header: 'Your browser is not supported here', // Header Text
        paragraph1: 'You are currently using an unsupported browser', // Paragraph 1
        paragraph2: 'Please install one of the many optional browsers below to proceed',
        closeMessage: 'Close this window at your own demise!' // Message below close window link
    }); 
```

# java - JEE6 @ApplicationScoped bean 和并发

> ID：14237499
> 
> 赞同：24
> 
> 时间：2013-01-09T14:31:57.013
> 
> 标签：java, jakarta-ee, concurrency, cdi

我需要编写一个 bean 来作为它被访问次数的计数器。

我正在考虑使用这样的`@ApplicationScoped`bean`AtomicInteger`

```
@ApplicationScoped
class VisitsCounter {

    private AtomicInteger counter;

    @PostConstruct
    public void construct() {
        counter = new AtomicInteger(0);
    }

    public int visited() {
        return counter.incrementAndGet();
    }
} 
```

我的问题是：同时考虑多个请求可以吗？还是我需要玩`@ConcurrencyManagement`和`@Lock`注释？我想这`Atomic*`应该可以解决问题，但我不确定。

当我将线程安全集合作为字段时，同样适用吗？例如说我有

```
@ApplicationScoped
class ValuesHolder {

    private List<String> values;

    @PostConstruct
    public void construct() {
        values = Collections.synchronizedList(new LinkedList<String>());
    }

    public void insert(String value) {
        values.add(value);
    }

    public String remove(String value) {
        return values.remove(value);
    }
} 
```

这些操作真的是线程安全的吗？

据说在修改bean的状态时应该使用并发注释和锁，但是如果我的列表已经照顾了线程安全怎么办？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-10T12:44:26.053

在 CDI 中，您没有并发管理，因此`@ApplicationScoped`只需声明注入对象的基数（即指示注入引擎只创建 bean 的一个实例并在所有应用程序中使用它）。它不会在 EJB 中转换您的 bean，也不会强制执行任何并发约束。

因此，虽然示例中的操作本质上是线程安全的，但由于`AtomicInteger`和 同步列表，通常情况并非如此。

一般来说，您可以：

*   通过标准并发原语手动同步列表访问（正如您所做的那样）

*   或者使用`javax.ejb.Singleton`注解，它指示应用服务器管理并发。这会将您的 bean 转换为 EJB，并且默认情况下强制执行`@ConcurrencyManagement(ConcurrencyManagementType.CONTAINER)`和`@Lock(LockType.WRITE)`.

顺便说一句，`@ConcurrencyManagement`并且 `@Lock`仅在单例会话 bean 上可用。

# php - 将数据从表复制到表：验证 mysql 查询

> ID：14237501
> 
> 赞同：0
> 
> 时间：2013-01-09T14:31:58.853
> 
> 标签：php, mysql, validation, copy

我将如何验证此查询？目前，我得到了一些遗漏，其中一行没有被复制，所以我需要一种防弹方法来检查和纠正。询问：

```
$query = "
SELECT * 
FROM $UID
";

$result = mysql_query($query)or die(mysql_error());  

while ($row = mysql_fetch_assoc($result))  {

$q = $row['QID'];
$a = $row['answer'];
$c = $row['comment'];

$query = "
INSERT INTO a (UID, QID, answer, comment)
VALUES ('$UID', '$q', '$a', '$c')
";

mysql_query ($query)or die(mysql_error());
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:39:26.213

您可以在单个查询中执行此操作。

```
INSERT INTO a (UID, QID, answer, comment) 
    SELECT '$UID', QID, answer, comment FROM `$UID` 
```

由于它是一个**原子操作**，所有数据将一次性复制。但是，您仍然可以使用[mysql_info](http://php.net/mysql_info)函数进行验证。它会给出如下输出。

```
Records: 23 Duplicates: 0 Warnings: 0 
```

这里 Duplicate 是由于重复键而丢弃的行数。如果两者`Duplicates`都是`Warning`你`0`可以说查询成功。

# c++ - 定义掩码的最佳方法

> ID：14237503
> 
> 赞同：1
> 
> 时间：2013-01-09T14:32:01.160
> 
> 标签：c++, binary, mask

我写了一个函数，它应该从`unsigned int`延迟的位集合中提取。我想为此使用掩码。我不确定定义此类掩码的最佳方法是什么。例如，我需要提取位 6:14。所以我需要将掩码定义为 `111111111 << 6`. 我的问题是我不能使用 boost 或类似的东西，标准 c/c++ 不知道使用二进制数。可以做的是使用 111111111 作为 2^10-1。我不确定 - 这是最好的（最优雅的）解决方案。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:34:04.607

大多数人在表示掩码时使用十六进制，例如0xFF、0x0A等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:42:23.313

让我们先尝试制作一堆。

二进制 N 个 1 的序列的一个特性是，就像十进制的 9 序列一样，如果向其中添加 1，则会得到一个 1 后跟 N 个 0。我们可以使用相反的情况，如果你从一个 1 中减去一个，然后是 N 个零，那么你会得到一个由 N 个 1 组成的序列，来实现这一点。

一个后跟 N 个零的 1 只是右移 N 个位置。

```
template <typename Uint>
Uint zigamorph(int n) { // http://catb.org/jargon/html/Z/zigamorph.html
    return 1 << n - 1; // same as 2^n - 1 :)
} 
```

有了任何长度的 zigamorphs，您现在可以通过使用按位与轻松地从任何值中获取所需的位。

```
template <typename Uint>
Uint mask_bits(Uint value, int first_bit, int last_bit) { // both inclusive?
    return value & zigamorph<Uint>(last_bit-first_bit+1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:37:32.143

您可以访问标准库吗？如果是这样，我会尝试`std::bitset`

[这](http://www.cplusplus.com/reference/bitset/bitset/)是它的文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T15:13:35.600

只需使用`0x1FF << 6`（如果需要`111111111 << 6`）或`0x3FF << 6`（如果需要 2^10-1 << 6）。这比你的二进制文件要清楚得多。正如 Jerry Coffin 指出的那样，您可以使用 2^10 轻松获得 2^10 `1 << 10`，但我不相信这比仅使用十六进制更清晰。（就此而言，在某些情况下，`0x7FC00`可能非常清楚。它的优点是您可以直观地看到单词中位的确切位置，并且如果您有十六进制转储，则更容易将它们挑选出来。）

# configuration - nginx + php-fpm 配置。服务器停顿

> ID：14237507
> 
> 赞同：0
> 
> 时间：2013-01-09T14:32:14.560
> 
> 标签：configuration, nginx, php

运行一个每天有 140 000 次页面浏览量的服务器（分析）。每个 php-fpm 进程大约需要 10-12M。
服务器有 10G 内存，mysql 有 1.2G-1.6G

配置如下所示：

```
nginx

user  nginx;
worker_processes  4;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  /var/log/nginx/access.log  main;
     access_log off;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  10;

    client_max_body_size 20M;

        server_tokens off;

    include /etc/nginx/conf.d/*.conf;
} 
```

像这样的php-fpm：

```
listen = 127.0.0.1:9000
listen.allowed_clients = 127.0.0.1
user = webadmin
group = webadmin
pm = dynamic
pm.max_children = 900
pm.start_servers = 900
pm.min_spare_servers = 200
pm.max_spare_servers = 900
pm.max_requests = 500
chdir = / 
```

通常，服务器可以在 500 个同时用户的情况下正常运行（同样，实时谷歌分析用于获得此估计值）但有时会在用户不是很多（75-100 个同时用户）时停止。

配置由我信任的 ISP 完成，但我仍然想知道配置是否有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:09:04.750

我并不是说这是最好的设置，但它对我们有用。

我用我们的 nginx 设置更新的一些东西是：

worker_connections ，我相信浏览器会为每个请求打开两个连接，因此从技术**上讲**，每个请求您没有 1024 个可用连接，而您有 512 个，因此可能会将其更改为 2048。

我还将**错误日志**文件参数更改为“info”，仅当您考虑写入时间以保持 I/O 较低时，所以我将其从“warn”更改为“info”。

如果您想保留**访问日志**，可能会缩小它添加的日志整体。

可能值得查看您的主 nginx.conf 以及您可能有配置被此文件覆盖并设置回默认值。

我只是从我经历的一个大列表中做了两件小事，但是这篇文章很棒 -[链接](http://blog.martinfjordvald.com/2011/04/optimizing-nginx-for-high-traffic-loads/)

# c# - MaxStringContentLength 最大大小

> ID：14237510
> 
> 赞同：0
> 
> 时间：2013-01-09T14:32:21.127
> 
> 标签：c#, maxstringcontentlength

当我试图在我的网络服务上传递一个最大的环时，我收到了这条消息。

“格式化程序在尝试反序列化消息时引发异常：反序列化操作'SetPropertyValue'的请求消息正文时出错。读取XML数据时已超出最大字符串内容长度配额（8192）。此配额可以通过更改来增加创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性。第 174 行，位置 19。

客户端配置文件上有我的服务绑定：

```
 <binding name="BasicHttpBinding_IParamSvc" closeTimeout="00:01:00"
         openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
         allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
         maxBufferSize="63400320" maxBufferPoolSize="524288" maxReceivedMessageSize="63400320"
         messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
         useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Basic" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding> 
```

我也已经设置了客户端值。

有什么想法可以解决我的问题吗？

谢谢你。

# python - 如何在gdb中的python函数上设置断点

> ID：14237513
> 
> 赞同：6
> 
> 时间：2013-01-09T14:32:32.750
> 
> 标签：python, debugging, gdb, cpython

我有时使用 gdb 来调试 python 脚本（当然是 CPython）。它通常用于调试核心转储（以及当它涉及 c 扩展模块时）。

一个基本问题是如何在 gdb 中的 python 函数上设置断点。假设我有一个带有函数 foo 的 python 脚本，我想在调用 foo 后立即中断。我想设置一个条件断点`PyEval_EvalFrameEx`可能会起作用，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:31:42.753

使用您建议的技术，这可行（尽管它并不漂亮）：

```
break PyEval_EvalFrameEx if (strcmp((((PyStringObject *)(f->f_code->co_name))->ob_sval), "foo") == 0) 
```

这里，f 是一个 PyFrameObject。您可能还需要检查`f->f_code->co_filename`以确保您拥有正确的文件。请注意，这确实会大大减慢程序的速度，因为您会经常中断和比较。

GDB 7 有一些很好的帮助宏来处理 CPython，但我不熟悉它们。可能有更好的方法来完成你正在寻找的那些。

# list - 很难删除 Lisp 中的每个第 n 个元素？

> ID：14237514
> 
> 赞同：0
> 
> 时间：2013-01-09T14:32:34.227
> 
> 标签：list, lisp

想学lisp，想每隔n个删一次。我只设法删除了第一个（第 n 个）元素

```
(defun delete-nth (n list)
(if (zerop n)
(cdr list)
(let ((cons (nthcdr (1- n) list)))
  (if cons
    (setf (cdr cons) (cddr cons))
    cons)))) 
```

我想删除下一个等

我也试过这个：

```
(defun remove-nth (list n)
(remove-if (constantly t) list :start n :end (+ 1 n))) 
```

不知道如何重新开始

我在想的是连接，但我不知道如何跟踪我的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:23:42.103

从 1 计数（更改为 0 是微不足道的）：

```
(defun remove-every-nth (n list)
  (loop for element in list
        for index from 1
        unless (zerop (rem index n))
          collect element)) 
```

另外：请正确缩进您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:15:24.387

做同样事情的另一种方法：

```
(defun remove-all-nth (list period)
   (remove-if
    (let ((iterator 0))
      (lambda (x)
        (declare (ignore x))
        (= 0 (mod (incf iterator) period)))) list))
(remove-all-nth '(1 2 3 4 5 6 7 8 9 0) 3)
; (1 2 4 5 7 8 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:36:31.713

也许这里有一个更学术的递归解决方案：

```
(defun delete-nth (n list)
  (labels ((rec (i list)
             (cond ((null list) nil)
                   ((= i 1) (rec n (cdr list)))
                   (t (cons (car list) (rec (1- i) (cdr list)))))))
    (rec n list))) 
```

但在现实生活中，我会使用上面的循环选项。

# android - 减少 Spinner 项目之间的空白

> ID：14237517
> 
> 赞同：1
> 
> 时间：2013-01-09T14:32:40.333
> 
> 标签：android, android-spinner

我想减少我的`Spinner`.
我在互联网上查找了一些东西，但我似乎找不到它。
我尝试了什么？老实说，没什么，我真的找不到任何东西。
我尝试更改 Spinner 的填充，但这（当然）会影响 Spinner 本身，而不是其中的项目。

正如您在下面看到的，项目之间的空白区域非常大。如何减少这种情况？

这是在 Android 2.3.3 上

![在此处输入图像描述](../Images/1268341ec3ba4e2740126dbd9027e9aa.png)

但是，在 Android 4.0+ 上，空间已经好很多了：
![在此处输入图像描述](../Images/df1e841f3d81d5ebca8ed6823d424ca2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:50:57.510

您可以编写自定义 Spinner Adapter 并覆盖 getView/getDropDownView 以编写您自己的视图。这是一些 可能有帮助的[示例代码。](https://github.com/ravivyas84/AndroidSpinnerHint)

# ant - 如何通过 ANT 脚本提取 .rar 文件

> ID：14237524
> 
> 赞同：1
> 
> 时间：2013-01-09T14:33:00.913
> 
> 标签：ant

如何`.rar`通过 ANT 脚本和多个文件提取文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:39:38.650

我认为 ant 或 Java 中没有任何本机来处理 RAR 文件。也许你可以[从这里](http://home.gna.org/unrar/)`<exec>`unrar 命令？

# php - 如何在 magento 后端添加自定义侧边栏？

> ID：14237535
> 
> 赞同：0
> 
> 时间：2013-01-09T14:33:25.970
> 
> 标签：php, magento

我为后端创建了一个自定义模块。现在我需要为我的自定义模块配置一个管理模板。

我可以在 magento 中为前端创建一个新模板。但我仍然不明白，如何为管理端创建一个新主题。

此外，我还为我的新管理主题设计了自己的页眉、页脚和侧边栏（左右）。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:10:38.673

请参阅 Incho 的以下链接。他们有一个出色的模块解决方案来创建自定义管理主题，而不会破坏默认主题。它也非常简单。它也是升级证明。我用它在产品列表中添加了更多属性选择。

[http://inhoo.net/ecommerce/magento/custom-admin-theme-in-magento/](http://inchoo.net/ecommerce/magento/custom-admin-theme-in-magento/)

然后，您只需在 /var/www/app/design/adminhtml/default/NAMEOFYOURTHEME 中创建您的主题

您也可以通过添加 /var/www/skin/adminhtml/default/NAMEOFYOURTHEME/custom.css （位于默认主题中，因此覆盖它）来进行 css 调整

# mysql - MySql-我什么时候应该使用锁

> ID：14237543
> 
> 赞同：1
> 
> 时间：2013-01-09T14:34:02.440
> 
> 标签：mysql, locking

我有一个包含`gifts_count`和`user_id`字段的用户表

我应该在下一条语句中添加锁吗（它可能来自许多线程）？

```
update users set gifts_count = gifts_count + 1 where users.user_id = user_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:36:46.777

您最好的选择是使用[事务](http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-transactions.html)而不是显式表锁定。

示例会话如下所示：

```
START TRANSACTION;
UPDATE `users` SET `gifts_count` = `gifts_count` + 1 WHERE `users`.`user_id` = user_id;
COMMIT; 
```

如果需要（取决于您在做什么），您还可以在查询和 . 之间进行一些完整性检查`COMMIT`，如果出现问题，您可以随时使用`ROLLBACK`.

* * *

如果您想在更新时阻止对特定行的读取（如果使用`InnoDB`行级锁定），您可以在最后运行`SELECT`查询`LOCK IN SHARE MODE`，如下所示：

```
SELECT * FROM `users` `users`.`user_id` = user_id LOCK IN SHARE MODE; 
```

该查询将挂起，直到您的事务被`COMMIT`ed 或`ROLLBACK`'d。

# python - python count 单词出现的次数

> ID：14237544
> 
> 赞同：-3
> 
> 时间：2013-01-09T14:34:03.460
> 
> 标签：python

在下面的字符串中，我想计算第一个 \tCart 之前出现的单词数并忽略字符串的其余部分，我们该怎么做

```
 str1="hi\thello\thow\tare\tyou\tCart\tagain\tCart"
 output expected:5
 str1.count() ????? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:35:00.040

```
len(str1.split('\tCart')[0].split()) 
```

这将执行以下操作：

*   拆分 text 上的字符串`\tCart`，并且只取结果的第一个元素；这是选项卡 + 购物车*之前的所有内容。*
*   在空格上拆分之前的部分`\tCart`（`\t`是一个制表符，也就是空格）
*   该拆分的长度是单词的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:36:37.420

试试这个 - `len(str1.split('\tCart')[0].split())`。

# machine-learning - 训练决策树

> ID：14237546
> 
> 赞同：-1
> 
> 时间：2013-01-09T14:34:10.337
> 
> 标签：machine-learning

我正在尝试开始使用机器学习。

我有一些训练数据表示图像中数字的像素值，我正在尝试从中训练决策树。什么是开始的好方法？我应该考虑哪些工具（相关文档的指针会有所帮助）？

我还想在数据上训练一个随机森林来比较性能与决策树。任何指导都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:41:12.860

最好的入门方法可能是[Weka](http://www.cs.waikato.ac.nz/ml/weka/)。除了提供随机森林分类器和几个决策树（在许多其他算法中）的实现之外，它还提供了用于处理和可视化数据的工具。它带有一个相对易于使用的 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:30:21.573

随机森林使用树木，所以我可能会建议您先让树木工作。一旦您了解了所有关于树木的知识，您就可以阅读有关森林的信息，这将非常简单。但是，您应该从尝试学习机器学习开始，而不仅仅是跳入图书馆。我将首先了解如何使用最大化熵的方法在布尔特征上使用决策树（简单得多）。一旦你充分理解了该算法，可以在一个小数据集上手动运行它，请阅读如何在真正有价值的特征上使用决策树。然后去图书馆看看。

# batch-file - 批处理脚本 - 对目录中的每个文件运行命令

> ID：14237548
> 
> 赞同：50
> 
> 时间：2013-01-09T14:34:12.117
> 
> 标签：batch-file, cmd, foreach, ssconvert

我需要将一些 xls 文件转换为 xlsx 文件。通过将此命令运行到 cmd 提示符（Windows）中，我可以成功地将一个 xls 文件转换为 xlsx：

```
ssconvert inputFileName.xls outputFileName.xlsx 
```

（ssconvert 是一个 Gnumeric 的命令行实用程序，可以在不同的电子表格文件格式之间进行转换）

我想编写一个批处理文件，指定目录中的 FOR EACH 文件运行我上面写的命令，使用当前文件名作为输入和输出文件名。

例如，如果我有这组文件：

```
c:\directory\file1.xls
c:\directory\file2.xls
c:\directory\file3.xls 
```

输出应该是

```
c:\directory\file1.xlsx
c:\directory\file2.xlsx
c:\directory\file3.xlsx 
```

所以批处理伪代码应该是这样的

```
directory = c:\directory\
for (fileName in directory)
    ssconvert fileName.xls fileName.xlsx 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-09T14:43:29.840

```
for /r %%v in (*.xls) do ssconvert "%%v" "%%vx" 
```

有几个人要求我解释这一点，所以：

第1部分：`for /r %%v in (*.xls)`

`xls`这部分返回当前目录中具有扩展名的文件数组。`%%`可能看起来有点好奇。这基本上是`%`%PATH% 或 %TEMP% 中使用的命令行中的特殊字符。要在批处理文件中使用它，我们需要像这样转义它：`%%PATH%%`或`%%TEMP%%`. 在这种情况下，我们只是转义临时变量`v`，它将保存我们的文件名数组。

我们使用`/r`开关递归搜索文件，因此子文件夹中的任何匹配文件也将被定位。

第2部分：`do ssconvert "%%v" "%%vx"`

第二部分是每个匹配文件名将执行一次的内容，因此如果当前文件夹中存在以下文件：

`c:\temp\mySheet.xls, c:\temp\mySheet_yesterday.xls, c:\temp\mySheet_20160902.xls`

将执行以下命令：

`ssconvert "c:\temp\mySheet.xls" "c:\temp\mySheet.xlsx" ssconvert "c:\temp\mySheet_yesterday.xls" "c:\temp\mySheet_yesterday.xlsx" ssconvert "c:\temp\mySheet_20160902.xls" "c:\temp\mySheet_20160902.xlsx"`

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-09T15:04:24.257

实际上，从 Windows Vista 开始，这很容易。微软添加命令[FORFILES](http://technet.microsoft.com/de-de/library/cc753551%28v=ws.10%29.aspx)

在你的情况下

```
forfiles /p c:\directory /m *.xls /c "cmd /c ssconvert @file @fname.xlsx" 
```

这个命令唯一奇怪的地方是 forfiles 会自动在@file 和@fname 周围添加双引号。但无论如何它应该可以工作

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-09T14:42:40.773

你可以运行这样的东西（将下面的代码粘贴到 .bat 中，或者如果你希望它以交互方式运行，请替换`%%`by `%`：

```
for %%i in (c:\directory\*.xls) do ssconvert %%i %%i.xlsx 
```

如果您可以运行 powershell，它将是：

```
Get-ChildItem -Path c:\directory -filter *.xls | foreach {ssconvert $($_.FullName) $($_.baseName).xlsx } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-10T05:27:49.970

我正在做类似的事情来编译目录中的所有 c 文件。
迭代不同目录中的文件试试这个。

```
set codedirectory=C:\Users\code
for /r  %codedirectory% %%i in (*.c) do 
( some GCC commands ) 
```

# javascript - 在从 HTML 代码调用的 JavaScript 函数中使用 $scope 变量 - AngularJS

> ID：14237551
> 
> 赞同：1
> 
> 时间：2013-01-09T14:34:25.363
> 
> 标签：javascript, html, function, scope, angularjs

我正在使用 Angular，我试图让 $scope 在 JavaScript 函数中使用它。这是一个例子：

我有一个类似这样的 html 标签：

```
<a id="doSomething" onclick="javascript: doSomething(this);">Do Something</a>
<div ng-show="flag">Click!</div> 
```

和一个类似这样的 JavaScript 函数：

```
function doSomething(obj) {
    //$scope.flag = true;
    return true;
} 
```

我想要的是在这个函数中使用 $scope 。我还没有找到注入它的方法。问题是我必须使用这种方式来调用函数。你有什么解决办法吗？我会很感激！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:12:59.900

如果你真的必须......这里是如何：

HTML：

```
<a onclick="doThing(this);">Do it!</a> 
```

JS：

```
function doThing(el) {
  var $scope = angular.element(el).scope();
  $scope.thing = newVal;
  $scope.$apply(); //tell angular to check dirty bindings again
} 
```

确保阅读 angular.element 的文档：[http](http://docs.angularjs.org/api/angular.element) ://docs.angularjs.org/api/angular.element 对于 scope.$apply：[http](http://docs.angularjs.org/api/ng) ://docs.angularjs.org/api/ng .$rootScope。范围#$apply

但是，您的用例是什么？可能有更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T12:30:51.703

你也可以内联：

JS：

```
$scope.doThis = function(str){
     alert(str);
     $scope.$apply();
} 
```

HTML：

```
<button onclick="angular.element(this).scope().doThis('TEST');"></button> 
```

警告 - 范围嵌套可能会影响结果，但如果角度代码在父级控制中，则可以正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T18:08:01.867

这与@Andy 的答案相同，但我提到它以防人们想了解如何从事件中获取 $scope 而不是`this`：

HTML：

```
<a onclick="doThing(event);">Do it!</a> 
```

JS：

```
function doThing(ev) {
  var $scope = angular.element(ev.srcElement).scope();          
  $scope.flag = true;
  $scope.$apply(); //tell angular to check dirty bindings again
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:00:03.293

您应该为此调用 angular ng-click，然后从那里传递范围。

这是我为您创建的示例。[http://plnkr.co/edit/UDLJYuZhR4yfiocSPjKJ](http://plnkr.co/edit/UDLJYuZhR4yfiocSPjKJ)

如果它解决了您的问题，请将其标记为答案。

# sencha-touch - 通过 Sencha Application 2.1 捕获图像，无需使用 Phonegap

> ID：14237561
> 
> 赞同：0
> 
> 时间：2013-01-09T14:34:48.887
> 
> 标签：sencha-touch, sencha-touch-2.1

我想从我的 SenchaTouch 2.1 应用程序中捕获一张照片并希望显示在视图上。我不想使用 Phone Gap 只想通过我的 Sencha 应用程序访问相机。请分享一些足以满足上述需求的代码，或者一些非常有用的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:21:39.613

您是否查看过 Ext.device.Camera 类的 Sencha Touch API 文档？

*   [http://docs.sencha.com/touch/2-1/#!/api/Ext.device.Camera](http://docs.sencha.com/touch/2-1/#!/api/Ext.device.Camera)

# mysql - rails if 语句，如果没有找到记录

> ID：14237569
> 
> 赞同：0
> 
> 时间：2013-01-09T14:35:09.683
> 
> 标签：mysql, ruby-on-rails, if-statement, haml

我正在尝试创建一个 if 语句，以便如果没有找到记录，则会显示一条默认消息。我目前有这个：

```
- if @n == nil || @n ==""
  welcome
- else
  - @n.each do |n|      
    = n.name
    = raw " - "
    = n.company 
```

但它忽略了第一行，只在必要时显示记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:37:36.420

```
 - if @n.blank?
      welcome
    - else
      - @n.each do |n|      
        = n.name
        = raw " - "
        = n.company 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:37:23.423

尝试查询实例变量是否为空白？：

```
- if @n.blank? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:39:24.933

如果在一个方法中

```
if @object.blank?
 #whatever you want to happen
else
 #whatever you want to happen 
```

如果在一个块中

```
<% if @object.blank? %><%= #foo %>
<% else %>
<%= #bar %>
<% end %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:56:58.593

我认为 @n 应该是一个对象数组，而不是一个字符串，所以你应该检查它是否为空：

```
if @n == nil || @n == [] 
```

如果您使用的是rails（因此是activesupport）.blank？（由其他人建议）适用于所有这些情况

```
nil.blank? #=> true
"".blank? #=> true
[].blank? #=> true 
```

# android - 使用 AccountManager 令牌进行 IMAP/SMTP 身份验证

> ID：14237572
> 
> 赞同：6
> 
> 时间：2013-01-09T14:35:24.613
> 
> 标签：android, oauth, smtp, gmail, imap

我正在尝试使用从 Android 的 AccountManager 收到的令牌而不是使用用户名和密码来实现一个简单的 IMAP/SMTP gmail 客户端。我正在尝试使用“邮件”作为 getAuthToken() 的 authTokenType 参数。

Google 提供了这个带有 oauth2 的 SMTP/IMAP 示例 [http://code.google.com/p/google-mail-oauth2-tools/source/browse/#svn%2Ftrunk%2Fjava%2Fcom%2Fgoogle%2Fcode%2Fsamples%2Foauth2](http://code.google.com/p/google-mail-oauth2-tools/source/browse/#svn%2Ftrunk%2Fjava%2Fcom%2Fgoogle%2Fcode%2Fsamples%2Foauth2) [http://code.google.com/p/google-mail-oauth2-tools/wiki/JavaSampleCode](http://code.google.com/p/google-mail-oauth2-tools/wiki/JavaSampleCode)

但它适用于java。在我的 Android 项目中使用它时缺少一些导入（关于 SASL）。为了解决它们，我使用这个库[http://code.google.com/p/asmack/](http://code.google.com/p/asmack/)

该示例编译但我注意到运行时出现问题

```
10-04 10:05:44.715: I/System.out(1226): DEBUG: setDebug: JavaMail version 1.4.1
10-04 10:05:44.750: I/System.out(1226): DEBUG: mail.imap.fetchsize: 16384
10-04 10:05:44.750: I/System.out(1226): DEBUG: enable SASL
10-04 10:05:44.750: I/System.out(1226): DEBUG: SASL mechanisms allowed: XOAUTH2
10-04 10:05:46.137: I/System.out(1226): * OK Gimap ready for requests from 84.221.66.29 o42if871216eef.60
10-04 10:05:46.137: I/System.out(1226): A0 CAPABILITY
10-04 10:05:46.805: I/System.out(1226): * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY SASL-IR AUTH=XOAUTH AUTH=XOAUTH2
10-04 10:05:46.805: I/System.out(1226): A0 OK Thats all she wrote! o42if871216eef.60
10-04 10:05:46.805: I/System.out(1226): IMAP DEBUG: AUTH: XOAUTH
10-04 10:05:46.805: I/System.out(1226): IMAP DEBUG: AUTH: XOAUTH2
10-04 10:05:46.813: I/System.out(1226): DEBUG: protocolConnect login, host=imap.gmail.com, user=xxx.xxx@gmail.com, password=<non-null>
10-04 10:05:46.813: I/dalvikvm(1226): Could not find method javax.security.sasl.Sasl.createSaslClient, referenced from method com.sun.mail.imap.protocol.IMAPSaslAuthenticator.authenticate
10-04 10:05:46.813: W/dalvikvm(1226): VFY: unable to resolve static method 44358: Ljavax/security/sasl/Sasl;.createSaslClient ([Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/Map;Ljavax/security/auth/callback/CallbackHandler;)Ljavax/security/sasl/SaslClient;
10-04 10:05:46.813: D/dalvikvm(1226): VFY: replacing opcode 0x77 at 0x0050
10-04 10:05:46.813: W/dalvikvm(1226): VFY: unable to resolve exception class 5975 (Ljavax/security/sasl/SaslException;)
10-04 10:05:46.813: W/dalvikvm(1226): VFY: unable to find exception handler at addr 0x83
10-04 10:05:46.844: W/dalvikvm(1226): VFY:  rejected Lcom/sun/mail/imap/protocol/IMAPSaslAuthenticator;.authenticate ([Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Z
10-04 10:05:46.844: W/dalvikvm(1226): VFY:  rejecting opcode 0x0d at 0x0083
10-04 10:05:46.844: W/dalvikvm(1226): VFY:  rejected Lcom/sun/mail/imap/protocol/IMAPSaslAuthenticator;.authenticate ([Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Z
10-04 10:05:46.844: W/dalvikvm(1226): Verifier rejected class Lcom/sun/mail/imap/protocol/IMAPSaslAuthenticator;
10-04 10:05:46.844: I/System.out(1226): IMAP DEBUG: Can't load SASL authenticator: java.lang.ClassNotFoundException: com.sun.mail.imap.protocol.IMAPSaslAuthenticator
10-04 10:05:46.844: I/System.out(1226): A1 LOGIN xxx.xxx@gmail.com anonymous
10-04 10:05:48.137: I/System.out(1226): A1 NO [AUTHENTICATIONFAILED] Invalid credentials (Failure)
10-04 10:05:48.164: W/System.err(1226): javax.mail.AuthenticationFailedException: [AUTHENTICATIONFAILED] Invalid credentials (Failure)
10-04 10:05:48.176: W/System.err(1226):         at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:566)
10-04 10:05:48.176: W/System.err(1226):         at javax.mail.Service.connect(Service.java:288)
10-04 10:05:48.176: W/System.err(1226):         at xxx.xxx.xxx.OAuth2Authenticator.connectToImap(OAuth2Authenticator.java:111)
10-04 10:05:48.180: W/System.err(1226):         at xxx.xxx.xxx.OAuth2Authenticator.initialize(OAuth2Authenticator.java:60)
10-04 10:05:48.180: W/System.err(1226):         at xxx.xxx.xxx.TR_Incoming.onTimeout(TR_Incoming.java:106)
10-04 10:05:48.180: W/System.err(1226):         at xxx.xxx.xxx.AlarmThread$1.handleMessage(AlarmThread.java:80)
10-04 10:05:48.180: W/System.err(1226):         at android.os.Handler.dispatchMessage(Handler.java:99)
10-04 10:05:48.180: W/System.err(1226):         at android.os.Looper.loop(Looper.java:137)
10-04 10:05:48.180: W/System.err(1226):         at xxx.xxx.xxx.AlarmThread.run(AlarmThread.java:94) 
```

似乎 asmack 使用 org.apache.harmony.javax.security.* 而不是 javax.security.*

有人遇到过这个问题吗？Google 在他们的示例中似乎没有考虑这种可能性，但我认为这应该是用户的共同特征。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T20:00:45.667

为了将 ASMACK Authenticator 与 JavaMail 一起使用，我创建了一个可用的库的补丁版本：http: [//www.mannaz.at/codebase/imap-ssl-mail-android/](http://www.mannaz.at/codebase/imap-ssl-mail-android/)

它基于[http://code.google.com/p/javamail-android/](http://code.google.com/p/javamail-android/)但支持 ASMACK SASSL 身份验证器。

JAR 文件中缺少此类。只需将其添加到您的源代码中：

```
package com.falott.ingresss.util;
public class Log {
    public static boolean loggingEnabled(){
       return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:36:56.043

从日志来看，您似乎混淆了 java6 和 java7 文件。你能分享你的类路径细节吗？

另一种可能性是您没有正确的凭据，登录或密码不正确。

我已经尝试过你所拥有的，它已经奏效了，应该是直截了当的。

# facebook - 用于查看页面发布展示次数的 FQL 查询

> ID：14237573
> 
> 赞同：3
> 
> 时间：2013-01-09T14:35:25.660
> 
> 标签：facebook, facebook-graph-api, facebook-fql

基本上，我要做的是从我和管理员为和拥有的页面获取发布印象，并且来自 Graph API 浏览器有权查看见解。然而，当我运行这个：

```
SELECT metric, value FROM insights WHERE object_id=10151215628833061 AND metric='post_impressions' AND end_time=end_time_date('2012-12-7') AND period=0 
```

我已将对象 id 设置为等于帖子 id 并将期间设置为 0，这是生命周期但没有成功。

我得到的只是这个：

```
{
 "data": [
 ]
} 
```

无法弄清楚这有什么问题，有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:42:28.173

您的帖子是昨天创建的，但您要求的是一个月前的指标。那个帖子当时不存在，所以没有什么可以返回的。

将您的查询更改为：

```
SELECT metric, value FROM insights WHERE object_id= '82346848060_10151215911933061' AND
   metric='post_impressions' AND period=0 
```

您想引用对象 ID，以防您查询的帖子包含下划线。

# asp.net - ASP.NET reCaptcha CustomTranslations 内联语法

> ID：14237577
> 
> 赞同：0
> 
> 时间：2013-01-09T14:35:49.373
> 
> 标签：asp.net, json, dictionary, recaptcha

我们应该对 Dictionary 属性使用什么内联语法？

`<recaptcha:RecaptchaControl ID="recap" CustomTranslations="string, string" Runat="server"/>`

我知道这可以通过编程来实现，但我希望不要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:41:56.450

经过一天的挣扎，我正在通过 Json .NET 框架使用反序列化方法来自定义 reCaptcha。

使用 System.Web.Script.Serialization；

[Category("Appearance")]
[DefaultValue(null)]
public string CustomTranslations
{ }
`get { return new JavaScriptSerializer().Serialize((object)this.customTranslations); }
set { this.customTranslations = new JavaScriptSerializer().Deserialize<Dictionary<string, string>>(String.Concat("{", value, "}")); }`

# android - java.net.SocketException 权限被拒绝

> ID：14237578
> 
> 赞同：1
> 
> 时间：2013-01-09T14:35:54.333
> 
> 标签：android, sockets

大家好，我正在尝试使用以下代码阅读网站的内容

```
public class Add extends MenuActivity {

    Button submit;
    EditText editText;
    private WebView webView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add);

        String contents = urlToString("http://www.vogella.com");

        submit = (Button) findViewById(R.id.button1);
        editText = (EditText) findViewById(R.id.editText1);
//        String addUrl = editText.getText().toString();
        submit.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v)
            {
                Log.d("Submit"," Pressed");
                Log.d("EditText",editText.getText().toString());
            }

        });

    }

    private String urlToString(String address) {
        HttpURLConnection con = null;
        URL url;
        InputStream is = null;
        try {
            url = new URL(address);
            con = (HttpURLConnection) url.openConnection();
            con.setReadTimeout(10000);
            con.setConnectTimeout(15000);
            con.setRequestMethod("GET");
            con.connect();
            is = con.getInputStream();
        } catch (IOException e) {
            e.printStackTrace();
        }

        BufferedReader reader = null;
        StringBuilder sb = new StringBuilder();
        try {
            reader = new BufferedReader(new InputStreamReader(is));
            String line = "";
            while ((line = reader.readLine()) != null) {
                sb.append(line);
                Log.d("HTTP", line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (reader != null) {
                try {
                    reader.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (is != null) {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        return sb.toString();
    }

} 
```

但是我收到以下错误，我不知道如何解决。

```
01-09 14:27:54.405: W/System.err(637): java.net.SocketException: Permission denied
01-09 14:27:54.416: W/System.err(637):  at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocketImpl(Native Method)
01-09 14:27:54.416: W/System.err(637):  at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocket(OSNetworkSystem.java:186)
01-09 14:27:54.416: W/System.err(637):  at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:265)
01-09 14:27:54.416: W/System.err(637):  at java.net.Socket.checkClosedAndCreate(Socket.java:873)
01-09 14:27:54.461: W/System.err(637):  at java.net.Socket.connect(Socket.java:1020)
01-09 14:27:54.461: W/System.err(637):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
01-09 14:27:54.461: W/System.err(637):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
01-09 14:27:54.461: W/System.err(637):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
01-09 14:27:54.461: W/System.err(637):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
01-09 14:27:54.466: W/System.err(637):  at uk.ac.tees.L1087591.Add.urlToString(Add.java:74)
01-09 14:27:54.466: W/System.err(637):  at uk.ac.tees.L1087591.Add.onCreate(Add.java:33)
01-09 14:27:54.466: W/System.err(637):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-09 14:27:54.466: W/System.err(637):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-09 14:27:54.466: W/System.err(637):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-09 14:27:54.466: W/System.err(637):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-09 14:27:54.466: W/System.err(637):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-09 14:27:54.466: W/System.err(637):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 14:27:54.466: W/System.err(637):  at android.os.Looper.loop(Looper.java:123)
01-09 14:27:54.466: W/System.err(637):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-09 14:27:54.466: W/System.err(637):  at java.lang.reflect.Method.invokeNative(Native Method)
01-09 14:27:54.466: W/System.err(637):  at java.lang.reflect.Method.invoke(Method.java:521)
01-09 14:27:54.476: W/System.err(637):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-09 14:27:54.476: W/System.err(637):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-09 14:27:54.476: W/System.err(637):  at dalvik.system.NativeStart.main(Native Method) 
```

如果您有任何想法，请不要害羞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:39:00.413

我认为你必须使用

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:38:38.080

我猜你错过了清单文件的这个权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:04:50.550

我在 AndroidManifest.xml 文件中也有这一行

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# php - 回复链接 wordpress 不起作用

> ID：14237583
> 
> 赞同：-1
> 
> 时间：2013-01-09T14:36:12.520
> 
> 标签：php, html, css, wordpress, hyperlink

我试图在我的comments.php 表单上添加一个回复链接，但它不起作用。它只会刷新我的页面！

我正在使用的代码如下：

```
<div class= replay_text">
<font size="-1"><strong><a href="<?php comment_reply_link( array ( 'reply_text' => 'Replay alt="Reply">' ) ); ?>">Reply</a></strong></font></div> 
```

谁来帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:06:13.250

[http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/comment-template.php#L1371](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/comment-template.php#L1371)

检查应该如何使用comment_reply_link。使用它作为锚源并不是最好的主意，而且我见过更糟糕的情况，但你不会接受任何事情。

而是在锚目标中像这样在其他 html 元素之间使用它：

```
<?php comment_reply_link(array_merge( $args, array('add_below' => $add_below, 'depth' => $depth, 'max_depth' => $args['max_depth']))) ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:42:06.707

我不太了解php，但我认为问题在于您忘记打开`"`而您在php上说`reply_text`而不是`replay_text`。这是正确的：

```
<div class= "reply_text">
<font size="-1"><strong><a href="<?php comment_reply_link( array ( 'reply_text' => 'Replay alt="Reply">' ) ); ?>">Reply</a></strong></font></div> 
```

# parsing - 在 StandardTokenParsers 中使用正则表达式

> ID：14237586
> 
> 赞同：3
> 
> 时间：2013-01-09T14:36:21.330
> 
> 标签：parsing, scala

我正在尝试在基于 StandardTokenParsers 的解析器中使用正则表达式。为此，我将 StdLexical 子类化如下：

```
class CustomLexical extends StdLexical{
  def regex(r: Regex): Parser[String] = new Parser[String] {
    def apply(in:Input) = r.findPrefixMatchOf(in.source.subSequence(in.offset, in.source.length)) match {
      case Some(matched) => Success(in.source.subSequence(in.offset, in.offset + matched.end).toString,
        in.drop(matched.end))
      case None => Failure("string matching regex `" + r + "' expected but " + in.first + " found", in)
    }
  }

  override def token: Parser[Token] =
    (   regex("[a-zA-Z]:\\\\[\\w\\\\?]* | /[\\w/]*".r)     ^^ { StringLit(_) }
      | identChar ~ rep( identChar | digit )               ^^ { case first ~ rest => processIdent(first :: rest mkString "") }
      | ... 
```

但是我对如何定义一个利用这一点的解析器有点困惑。我有一个解析器定义为：

```
def mTargetFolder: Parser[String] = "TargetFolder" ~> "=" ~> mFilePath 
```

这应该用于识别有效的文件路径。我当时试过：

```
def mFilePath: Parser[String] = "[a-zA-Z]:\\\\[\\w\\\\?]* | /[\\w/]*".r 
```

但这显然是不对的。我收到一个错误：

```
scala: type mismatch;
 found   : scala.util.matching.Regex
 required: McfpDSL.this.Parser[String]
    def mFilePath: Parser[String] = "[a-zA-Z]:\\\\[\\w\\\\?]* | /[\\w/]*".r
                                                                          ^ 
```

在我的 StdLexical 子类上使用扩展的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:44:47.563

如果您真的想使用基于标记的解析并重用 StdLexical，我建议更新“TargetFolder”的语法，以便等号后面的值是正确的字符串文字。或者换句话说，使它的路径应该用引号括起来。从那时起，您不再需要扩展 StdLexical。

然后是将正则表达式转换为解析器的问题。Scala 已经`RegexParsers`为此提供了（将正则表达式隐式转换为 a `Parser[String]`），但不幸的是，这不是您想要的，因为它在您处理令牌流时处理`Char`( `type Elem = Char`in ) 流。`RegexParsers`所以我们确实必须定义我们自己的从 Regex 到的转换`Parser[String]`（但在句法级别而不是词法级别，或者换句话说在令牌解析器中）。

```
import scala.util.parsing.combinator.syntactical._
import scala.util.matching.Regex
import scala.util.parsing.input._

object MyParser extends StandardTokenParsers {
  import lexical.StringLit
  def regexStringLit(r: Regex): Parser[String] = acceptMatch( 
    "string literal matching regex " + r, 
    { case StringLit( s ) if r.unapplySeq(s).isDefined => s }
  )
  lexical.delimiters += "="
  lexical.reserved += "TargetFolder"
  lazy val mTargetFolder: Parser[String] = "TargetFolder" ~> "=" ~> mFilePath
  lazy val mFilePath: Parser[String] = regexStringLit("([a-zA-Z]:\\\\[\\w\\\\?]*)|(/[\\w/]*)".r)  
  def parseTargetFolder( s: String ) = { mTargetFolder( new lexical.Scanner( s ) ) }
} 
```

例子：

```
scala> MyParser.parseTargetFolder("""TargetFolder = "c:\Dir1\Dir2" """)
res12: MyParser.ParseResult[String] = [1.31] parsed: c:\Dir1\Dir2

scala> MyParser.parseTargetFolder("""TargetFolder = "/Dir1/Dir2" """)
res13: MyParser.ParseResult[String] = [1.29] parsed: /Dir1/Dir2

scala> MyParser.parseTargetFolder("""TargetFolder = "Hello world" """)
res14: MyParser.ParseResult[String] =
[1.16] failure: identifier matching regex ([a-zA-Z]:\\[\w\\?]*)|(/[\w/]*) expected
TargetFolder = "Hello world"
           ^ 
```

请注意，这里还修复了您的“目标文件夹”正则表达式，您缺少两个替代方案周围的括号，以及不需要的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:35:18.740

`regex`当您想`Parser[String]`从 a中获取 a 时，只需调用您的函数`Regex`：

```
def p: Parser[String] = regex("".r) 
```

或者`regex`隐式让编译器为你自动调用它：

```
implicit def regex(r: Regex): Parser[String] = ...
// =>
def p: Parser[String] = "".r 
```

# django - 在 Django 管理员中有一种方法可以在顶部而不是侧面有一个列表过滤器

> ID：14237591
> 
> 赞同：0
> 
> 时间：2013-01-09T14:36:40.993
> 
> 标签：django, admin

我想过滤一些只有几个可能值的列，只有几个值，侧面过滤器浪费了我需要的大量屏幕空间来存储数据。所以我想知道是否有某种方法可以在日期选择器旁边的顶部栏中设置过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:42:26.537

如果您愿意，您实际上是在谈论修改 django 管理模板行为。为此，您需要在自己的 django 应用程序中创建一个管理模板，并且您可以更改模板的呈现方式...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:13:06.510

考虑使用[Grappelli](http://www.grappelliproject.com/)。这是一个非常流行的 django 应用程序，它修改了管理界面和过滤器部分（弹出而不是固定在右侧）

# algorithm - 图中两个给定节点之间给定长度的所有路径

> ID：14237593
> 
> 赞同：0
> 
> 时间：2013-01-09T14:36:45.643
> 
> 标签：algorithm, graph

我遇到了这个问题：

[http://www.iarcs.org.in/inoi/contests/oct2005/Advanced-2.php](http://www.iarcs.org.in/inoi/contests/oct2005/Advanced-2.php)

问题基本上是关于图表的。您将获得一个最多包含 70 个节点的图和一个邻接矩阵，该矩阵告诉您两个节点之间存在多少条边。每条边都是双向的。

现在问题要求您找出任意两个节点 N1 和 N2 之间固定长度 N 的不同路径的数量。路径可以有重复。即，路径可以通过已经包含的节点。

最简单的算法是运行广度优先搜索并检查有多少 N2 出现在第 N 层，BFS 树以 N1 为根。但这行不通。

怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T14:41:09.247

这个问题的解决方案很简单——将邻接矩阵提高到 N 次方，答案将位于`(N1, N2)`每对 N1 和 N2 的单元格中——基本图论。

您还可以利用矩阵的[二进制求幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)来更快地计算答案。

要了解上述算法**为何**有效，请尝试写下求幂的前几个步骤。您会注意到，在每次迭代中，矩阵都保存具有从 1 到 N 的给定固定长度的路径。如果您写下在执行矩阵乘法时如何计算单元格，您应该也会看到为什么会这样。

**注意：关于如何计算长度为**固定长度的所有路径还有一个非常酷的 hack -只需在起始顶点添加一个“循环”，从而使其可以从自身访问。

# android - 通过 Internet 安全地发送和接收数据包

> ID：14237597
> 
> 赞同：0
> 
> 时间：2013-01-09T14:36:53.127
> 
> 标签：android, network-programming, raspberry-pi

我对任何类型的网络编程都是新手，在开始之前想得到一些建议。

我想在家里运行一个服务器（Raspberry Pi），我希望能够联系它来运行特定的程序/脚本并触发我家庭网络上的其他事件（WoL、家庭自动化等）

我希望能够独立于平台联系它 - 即主要来自 Android 和 Windows，也许是 iOS 和 Linux。

我想要某种安全性，因为我不希望其他人能够联系我的 RPi 并对其进行操作。

是否有某种标准接口用于此类事情？我正在考虑运行 Apache，但我想我会先检查是否有更多针对性的解决方案可用。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:08:58.340

我的建议是安全套接字外壳（ssh）。它已经安装在 RPi AFAIK 下，但您可能想要生成一个公钥/私钥对，并且只允许使用该密钥对登录到您的服务器（即禁用密码验证）。*还将允许的用户*限制为您一个人。不要以 root 身份执行此操作；而是创建一些 setuid 脚本来在服务器中执行任何仅限管理员的任务，并限制对这些脚本的访问控制。

避免不断尝试破解的另一个技巧：将端口从 22 移动到 422（这可以使用您的互联网路由器的 NAT 配置来完成）。

您可能可以使用[libssh](http://www.libssh.org/)，但是对于某些客户端平台，您可能可以使用 shell 脚本实现。

# c# - 通过接口应用自定义验证器

> ID：14237600
> 
> 赞同：2
> 
> 时间：2013-01-09T14:36:58.013
> 
> 标签：c#, validation, enterprise-library, validation-application-bl

假设我有一个界面：

```
public interface ISomeInterface
{
    bool SomeBool { get; set; }

    string ValueIfSomeBool { get; set; }
} 
```

我有许多实现它的类。IE

```
public class ClassA : ISomeInterface
{
    #region Implementation of ISomeInterface

    public bool SomeBool { get; set; }

    public string ValueIfSomeBool { get; set; }

    #endregion

    [NotNullValidator]
    public string SomeOtherClassASpecificProp { get; set; }
} 
```

而且我在自定义验证器中对此接口的属性有一个验证逻辑，如下所示：

```
public class SomeInterfaceValidator : Validator<ISomeInterface>
{
    public SomeInterfaceValidator (string tag)
        : base(string.Empty, tag)
    {
    }

    protected override string DefaultMessageTemplate
    {
        get { throw new NotImplementedException(); }
    }

    protected override void DoValidate(ISomeInterface objectToValidate, object currentTarget, string key, ValidationResults validationResults)
    {
        if (objectToValidate.SomeBool && 
            string.IsNullOrEmpty(objectToValidate.ValIfSomeBool))
        {
            validationResults.AddResult(new ValidationResult("ValIfSomeBool cannot be null or empty when SomeBool is TRUE", currentTarget, key, string.Empty, null));
        }

        if (!objectToValidate.SomeBool && 
            !string.IsNullOrEmpty(objectToValidate.ValIfSomeBool))
        {
            validationResults.AddResult(new ValidationResult("ValIfSomeBool must be null when SomeBool is FALSE", currentTarget, key, string.Empty, null));
        }
    }
} 
```

我有一个属性来应用我装饰 ISomeInterface 的这个验证器。

```
[AttributeUsage(AttributeTargets.Interface)]
internal class SomeInterfaceValidatorAttribute : ValidatorAttribute
{
    protected override Validator DoCreateValidator(Type targetType)
    {
        return new SomeInterfaceValidator(this.Tag);
    }
} 
```

当我调用 Validation.Validate 时，它​​似乎没有触发 SomeInterfaceValidator 中的验证。它执行特定于 ClassA 的验证，而不是 ISomeInterface 接口的验证。

我怎样才能让它工作？

**编辑：** 我找到了一种让它工作的方法，那就是进行 SelfValidation，我将其转换为 ISomeInterface 并像这样进行验证。这就足够了，但仍然让问题悬而未决，看看是否有其他方法可以实现这一点。

```
 [SelfValidation]
    public void DoValidate(ValidationResults results)
    {
        results.AddAllResults(Validation.Validate((ISomeInterface)this));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:17:46.987

这是验证应用程序块的限制。这是一篇[文章，描述了如何为 VAB 添加 Validator 继承](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=73)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:11:52.020

验证接口的一种方法是使用`ValidationFactory`为接口创建验证器，而不是使用`Validator.Validate()`静态外观或`CreateValidator()`基于具体类型。例如，考虑到您的方法，这应该可以工作：

```
var validator = ValidationFactory.CreateValidator<ISomeInterface>();
ValidationResults validationResults = validator.Validate(someInterfaceInstance); 
```

# linux - 出现 SQL 错误：ORA-28576：丢失与外部过程代理的 RPC 连接

> ID：14237603
> 
> 赞同：1
> 
> 时间：2013-01-09T14:37:14.753
> 
> 标签：linux, oracle

我在尝试执行外部过程时收到“SQL 错误：ORA-28576：丢失与外部过程代理的 RPC 连接”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:49:38.997

您需要使用`SQLNET.INBOUND_CONNECT_TIMEOUT`选项，尝试增加超时值默认为 60 秒。

# android - 图片未出现在图库中

> ID：14237604
> 
> 赞同：0
> 
> 时间：2013-01-09T14:37:16.280
> 
> 标签：android, android-camera

我正在使用此代码从相机拍摄照片

```
Intent intent    = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);   
File storagePath = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM) + "/Camera/"); 

if(!storagePath.isDirectory()){   
  storagePath.mkdirs(); 
}

File myImage = new File(storagePath,
Long.toString(System.currentTimeMillis()) + ".jpg"); 
Uri fromURI=Uri.fromFile(myImage); 
intent.putExtra(MediaStore.EXTRA_OUTPUT, fromURI);
startActivityForResult(intent,PulseConstants.CAMERA_REQUEST_CODE); 
```

图像以给定的文件名正确存储在手机的“我的文件”文件夹中......但是当我打开手机的图库时，这个图像没有出现？？

如果我做错了什么，请告诉我？？

TIA，维杰拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:09:13.570

这可能与 Android 媒体扫描仪不会不断索引手机上的文件有关。过去，我在保存图像后立即调用以下函数来通知 MediaScanner：

```
private void scanMedia(File file) {
    Uri uri = Uri.fromFile(file);
    Intent scanFileIntent = new Intent(
        Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, uri);
        sendBroadcast(scanFileIntent);
} 
```

希望这有效！

# php - 如何使用 CakePhp 克隆/复制 sql 记录？

> ID：14237606
> 
> 赞同：6
> 
> 时间：2013-01-09T14:37:17.807
> 
> 标签：php, cakephp, cakephp-2.0, clone, record

如何使用 CakePhp 克隆/复制 sql 记录？是否有本地方式或者我需要*找到*我的记录然后*保存*它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T14:39:01.633

您需要使用查找和保存功能。

```
$record = $this->Model->findById(1);
$record['Model']['id'] = NULL;
$this->Model->save($record); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T14:39:11.520

本身没有本机“复制”命令。但是在创建/保存之后的查找/读取操作应该可以工作。

```
$row = $this->Model->findById(1);
$this->Model->create(); // Create a new record
$this->Model->save($row); // And save it 
```

将复制 id 为 1 的行。

# c# - 使用 LINQ 断言数组的所有成员都是等效的？

> ID：14237609
> 
> 赞同：3
> 
> 时间：2013-01-09T14:37:20.127
> 
> 标签：c#, linq

我想写一小段测试代码来提醒我某些集合是等价的，即简单、自包含、易于阅读和面向 LINQ Lambda（以实现个人学习目标）。

这是我想出的：

```
var e = new IEnumerable<int> [] {
                                    Enumerable.Range(100, 4).ToArray(), 
                                    new int[] { 100, 101, 102, 103 },
                                    new [] { 100, 101, 102, 103 },
                                    Enumerable.Range(100, 4).ToList(), 
                                    new List<int> { 100, 101, 102, 103 }
                                };

var permutations = e.SelectMany(s => e, ( lhs, rhs ) => new { lhs,  rhs })
                    .Where( x => !x.lhs.Equals ( x.rhs ) ); 

foreach (var item in permutations)
{
    Assert.That( item.lhs, Is.EqualTo( item.rhs ) );
} 
```

*   Q1。是否有一个“简单”的改变来产生 10 对组合（我目前有 20 对排列）？“简单”是指使用现有的 LINQ 运算符，而不是说编写递归扩展方法。

*   Q2。有没有更好的方法在上下文中断言“数组的所有成员都是等效的”？

* * *

至于Q1，这似乎给了我右手边（rhs），但我如何“携带”（或重新加入）“原始”给我左手边（lhs）？：

```
var r = e.SelectMany(( e1, i ) => e.Skip( i + 1 )); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:59:03.583

这将起作用

```
var leftHandSide = inputSequence.First();
var rightHandSideList = inputSequence.Skip(1);

rightHandSideList.All(s => s.SequenceEqual(leftHandSide)); 
```

基本上我们取第一个元素，并将剩余的元素与这个元素进行比较。在这里，我假设顺序很重要。还假设列表至少有 2 个元素。

# c# - 通过测验理解 C# 中的嵌套泛型类

> ID：14237621
> 
> 赞同：60
> 
> 时间：2013-01-09T14:37:52.253
> 
> 标签：c#, generics, inheritance, nested

在与一位同事谈论 C# 时，他向我展示了一些 C# 代码，我必须预测其输出。这首先看起来很简单，但事实并非如此。我真的不明白为什么 C# 会这样。

编码：

```
public class A<T1>
{
    public T1 a;

    public class B<T2> : A<T2>
    {
        public T1 b;

        public class C<T3> : B<T3>
        {
            public T1 c;
        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        A<int>.B<char>.C<bool> o = new A<int>.B<char>.C<bool>();

        Console.WriteLine(o.a.GetType());
        Console.WriteLine(o.b.GetType());
        Console.WriteLine(o.c.GetType());

        Console.ReadKey();
    }
} 
```

输出是：

```
System.Boolean
System.Char
System.Int32 
```

如果我错了，请纠正我，但我知道这`o.a`是 bool 类型，因为`C<T3>`继承自`B<T3>`和`B<T2>`继承自`A<T2>`. 而且我也可以稍微理解它`o.c`是 int 类型，因为它的类型`c`是`T1`从外部类中获得的（我认为）。

当我试图弄清楚为什么`o.b`是 char 类型时，我的脑袋几乎要爆炸了。谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-09T15:26:18.877

这是一个古老的谜题，而且相当困难。当我把它给安德斯本人时，他第一次没有得到正确的答案！

我认为您的同事给您的版本来自 Cyrus 的博客：

[http://blogs.msdn.com/b/cyrusn/archive/2005/08/01/446431.aspx](http://blogs.msdn.com/b/cyrusn/archive/2005/08/01/446431.aspx)

我的博客上有一个稍微简单的版本。

[http://blogs.msdn.com/b/ericlippert/archive/2007/07/27/an-inheritance-puzzle-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/07/27/an-inheritance-puzzle-part-one.aspx)

我的版本的解决方案在这里：

[http://blogs.msdn.com/b/ericlippert/archive/2007/07/30/an-inheritance-puzzle-part-two.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/07/30/an-inheritance-puzzle-part-two.aspx)

简而言之，令人困惑的行为的原因是，当您的名称同时存在于外部类和基类中时，基类“获胜”。也就是说，如果您有：

```
public class B
{
  public class X {}
} 
public class P
{
  public class X
  {
    public class D : B
    {
      public class N : X {}
    }
  }
} 
```

然后`P.X.D.N`继承自`B.X`，而不是继承自`P.X`。这个谜题以这样一种方式使嵌套的泛型类型可以通过“外部”和“基本”搜索路径命名相同的声明，但由于泛型构造，它们在每个路径中具有*不同的含义。*

无论如何，请阅读博客文章上的解释，如果仍然不清楚，请提出更具体的问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T14:57:24.213

好吧，我的第一个答案是错误的。嵌套很重要：

in `o.b.GetType()`b 是周围类的成员，它被实例化为`B<char>`它继承自`A<char>`它反过来使 T1 等于 char。不太清楚的是以下内容（手动实例化`A_int.B_char.C_bool`）：

```
public class A_bool
{
    public bool a;

    public class B_bool : A_bool
    {
        public bool b;
    }
}

public class A_char
{
    public char a;

    public class B_bool : A_bool
    {
        public char b;
    }
}

public class A_int
{
    public int a;

    public class B_char : A_char
    {
        public int b;

        public class C_bool : A_char.B_bool
        {
            public int c;
        }
    }
} 
```

这里`C_bool`也可以从 A_bool.B_bool 派生，对吗？但既然我们嵌套在`A_char`其中，那就是首选。

# c - C 中的加密 hmac 结果比 C# 短

> ID：14237622
> 
> 赞同：2
> 
> 时间：2013-01-09T14:37:54.883
> 
> 标签：c, hmac, sha256

有时您必须实现 C 代码和加密，所以我的 hmac256 或 sha2_hmac 实现的 C 代码实现存在问题：

```
unsigned char key[19] = { "abcdef" };
size_t keylen = 18;
unsigned char input[64] = {"123456789"}; 
size_t ilen = 63;         
unsigned char output[32];
int is224 = 0;

sha2_hmac(key, keylen, input, ilen, output, is224);

char result[64] = {};
char result2[64] = {};

for(int j = 0; j < 32; j++) {
        sprintf(result, "%X", output[j]);
        strcat(result2, result);
} 
```

但是当我将它与 C# 代码进行比较时，结果太短了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:40:06.333

您必须`sprintf()`像这样调整函数调用：

```
sprintf(result, "%02X", output[j]); 
```

# gcc - 具有未定义数量的参数的 MASK(...) 宏（在 C 中）

> ID：14237625
> 
> 赞同：1
> 
> 时间：2013-01-09T14:38:06.673
> 
> 标签：gcc, c-preprocessor

（抱歉英语不好。）

我需要这样的宏`MASK`：

*   `MASK(a)`扩展到`(1<<(a))`
*   `MASK(a,b)`扩展到`(1<<(a) | 1<<(b))`
*   `MASK(a,b,c)`扩展到`(1<<(a) | 1<<(b) | 1<<(c))`
*   等等

是否可以在 C 预处理器中定义这样的宏？也许可以帮助一些 GCC 扩展？或者也许可以`MASK(x)`使用单个参数来实现，例如`MASK((a,b))`扩展为`(1<<(a) | 1<<(b))`等。

**添加。**我对实现`MASK`为函数不感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:28:05.510

是的，假设一个几乎完全符合 C99 的预处理器，例如 GNU CPP（GCC/G++ 所使用的），这是可能的，无需任何扩展。

这里有一些使用出色的[Order](http://rosettacode.org/wiki/Order)库的不同解决方案。您需要添加`#include <order/interpreter.h>`才能使用它们。

只有一个`#define`：

```
#define MASK(...) (ORDER_PP(8seq_for_each_with_delimiter( \
    8fn(8N, 8print((1<<) 8tuple(8N))), \
    8emit(8quote(|)), \
    8tuple_to_seq(8quote((__VA_ARGS__)))))) 
```

对于编译器速度和可维护性：

```
#define GEN_MASK(x) 1<<(x)
#define ORDER_PP_DEF_8mask ORDER_PP_FN(8fn(8N, \
    8emit(8quote(GEN_MASK),8tuple(8N))))
#define MASK(...) (ORDER_PP(\
    8seq_for_each_with_delimiter(8mask, 8emit(8quote(|)), \
    8tuple_to_seq(8quote((__VA_ARGS__)))))) 
```

对类似问题使用泛化：

```
#define MAP_DELIMITED(f,d, ...) ORDER_PP(\
    8seq_for_each_with_delimiter(f, \
    8emit(8quote(d)), \
    8tuple_to_seq(8quote((__VA_ARGS__)))))
#define MASK(...) (MAP_DELIMITED( \
    8fn(8N, 8print((1<<) 8tuple(8N))), \
    |, \
    __VA_ARGS__)) 
```

Order 实际上在预处理器中实现了一种高级函数式语言，允许使用比您想象的要复杂得多的宏。上述链接中的 repo 包含许多示例和文档的来源。

# ember.js - 使用新的 Ember RouterV2，如何立即从索引状态重定向到另一个状态？

> ID：14237628
> 
> 赞同：2
> 
> 时间：2013-01-09T14:38:13.313
> 
> 标签：ember.js, ember-router

到目前为止我所拥有的：

```
App = Ember.Application.create({
    LOG_TRANSITIONS: true
});

App.Router.map(function(match){
    match('/').to('application');
    match('/edit').to('edit');
});

App.ApplicationRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('edit');
    },
    events: {
        startEdit: function( context ){
            this.transitionTo( 'edit' );
        }
    }
})

App.EditRoute = Ember.Route.extend({
    init: function(){
        this._super()
        console.log('EditRoute')
    },
}); 
```

车把：

```
<script type="text/x-handlebars" data-template-name = 'application'>
    Hello World
    {{ outlet main }} 
</script>

<script type="text/x-handlebars" data-template-name = 'edit'>
    <div class = 'edit-background'> Edit State: {{ title }} </div>
</script> 
```

我有四个问题：

1.  当我打开应用程序时，它只保留在主页中，redirectTo 挂钩是否会立即将您重定向到另一个状态？

2.  此外，我`AplicationRoute`根据此处的建议将这些事件散列在：[How to programmatically transition between routes using Ember.js' new Router](https://stackoverflow.com/questions/14186092/how-to-programmatically-transition-between-routes-using-ember-js-new-router)。但是我通读了答案，但仍然不确定您应该如何使用它。

3.  如何在控制台上测试路由器？在您可以通过调用命令在状态之间导航之前`transitionTo`，我现在该怎么办？

4.  出于某种奇怪的原因，我的应用程序模板似乎被渲染了两次，因为那里有两个“Hello World”，当尝试添加如下内容时：`<li>{{#linkTo edit}}edit{{/linkTo}}</li>`

我收到此错误：

```
'Uncaught TypeError: Cannot read property 'container' of undefined   --  ember.js:2223' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:50:08.230

这是您在应用程序启动时最初加载 editView/route/template 的方式：

# 路由器

```
App.Router.map(function(match){
  match('/').to('application',function(match){
    match('/').to('edit')
  })
}) 
```

# 应用程序模板

```
<script type="text/x-handlebars" data-template-name="application">
    {{outlet}}
</script> 
```

# 编辑模板

```
<script type="text/x-handlebars" data-template-name="edit">
    I am embedded! 
</script> 
```

# 编辑路线

```
EditRoute = Ember.Route.extend({
  renderTemplates:function () {
      this.render('edit', {
      into:'application'
   });
}) 
```

# javascript - 什么是 String 或它来自哪里？

> ID：14237637
> 
> 赞同：0
> 
> 时间：2013-01-09T14:38:39.953
> 
> 标签：javascript, d3.js

在试图理解 d3 时，我看到了这条线`.text(String);`。我无法理解 String 应该是什么。我想它可能是一个空字符串（不），一个方法（我在 api 参考中没有看到）并思考它可能是什么。

我在下面评论了它并得到了预期的结果。我不明白什么是 String 以及它为什么起作用。有了这条线，我的 3 个方形框有文本（它是稍后将表示的数据的内部值），而注释掉它没有。

[演示](http://jsfiddle.net/qBcD2/1/)

html

```
<div class='chart' id='chart-10'/>
<script src="http://d3js.org/d3.v3.min.js"></script> 
```

JS：

```
 var w = 360;
    var h = 180;
  var svg = d3.select("#chart-10").append("svg")
      .attr("width", w)
      .attr("height", h);

  var g = svg.selectAll(".data")
      .data([50,150,250])
    .enter().append("g")
      .attr("class", "data")
      .attr("transform", function(d, i) { return "translate(" + 20 * (i + 1) + ",20)"; });

  g.append("circle")
      .attr("class", "little")
      .attr("r", 1e-6);

  g.append("rect")
      .attr("x", -10)
      .attr("y", -10)
      .attr("width", 20)
      .attr("height", 20)
      .style("fill", "lightgreen")
      .style("stroke", "green");

  g.append("text")
      .attr("dy", ".35em")
      .attr("text-anchor", "middle")
;//      .text(String);

    g.attr("transform", function(d, i) { return "translate(" + 20 * (i + 1) + ",20)"; });
    g.select("rect").style("opacity", 1);
    g.select("circle").attr("r", 1e-6);

    var t = g.transition().duration(750);
    t.attr("transform", function(d, i) { return "translate(" + d + ",90)"; });
    t.select("circle").attr("r", Math.sqrt);
    t.select("rect").style("opacity", 1e-6); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:41:17.250

它看起来像[`String`构造函数](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String)。根据[d3 文档](https://github.com/mbostock/d3/wiki/Selections#wiki-text)，正如马特指出的那样：

> 如果 value 是一个函数，则为每个选定元素（按顺序）评估该函数，传递当前数据`d`和当前索引`i`，并将 this 上下文作为当前 DOM 元素。然后使用该函数的返回值来设置每个元素的文本内容。

所以，你之前设置`g.data`了`[50,150,250]`几行。每个数字都由构造函数转换为 String 对象`String`，返回并用作 DOM 节点的文本值。

# c# - 如何从 Access 数据集/数据库中填充组合框

> ID：14237639
> 
> 赞同：0
> 
> 时间：2013-01-09T14:38:44.477
> 
> 标签：c#, combobox, dataset

我在接下来要从我目前拥有的数据集中填充组合框的事情上遇到了难题。我的数据库被称为“PID2db.mdb”，表被称为“客户”

```
 string strCon = Properties.Settings.Default.PID2dbConnectionString;
        OleDbConnection conn = new OleDbConnection(strCon);
        try {
            conn.Open();
            string strSql = "Select forename,surname from customer where [customerID] ='" + txtName.Text + "'";
             OleDbDataAdapter adapter = new OleDbDataAdapter(new OleDbCommand(strSql, conn));
            DataSet ds = new DataSet();
            adapter.Fill(ds);
            cboName.DataSource = ds.Tables[0];
            cboName.DisplayMember = "forename";
            cboName.ValueMember = "surname";
        }
        finally {
            conn.Close();
        }
    } 
```

任何帮助表示赞赏，谢谢

编辑：添加了新的代码段

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:53:31.910

假设您有一个表格：

1.  名为 cboName 的组合框
2.  名为 txtName 的文本框

试试这个 ：

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            LoadCustomerOnCombo();
        }

        private void LoadCustomerOnCombo()
        {
            string strCon = Settings.Default.PID2dbConnectionString;

            try
            {
                using (OleDbConnection conn = new OleDbConnection(strCon))
                {
                    conn.Open();
                    string strSql = "SELECT forename &\" \" & surname AS FullName, surname FROM customer"; //WHERE [customerID] ='" + txtName.Text + "'";
                    OleDbDataAdapter adapter = new OleDbDataAdapter(new OleDbCommand(strSql, conn));
                    DataSet ds = new DataSet();
                    adapter.Fill(ds);
                    cboName.DataSource = ds.Tables[0];
                    cboName.DisplayMember = "FullName";
                    cboName.ValueMember = "surname";
                }     
            }
            catch (Exception ex)
            {
                txtName.Text = ex.Message;
                Console.WriteLine(ex.Message);
            }
        }
    } 
```

如果有效，请告诉我在哪里，现在留下评论，否则有任何错误，你会在文本框中看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:42:42.363

您需要创建一个新的 DataSet，用 Data 填充它，最后设置 ComboBox 的[DataSource](http://msdn.microsoft.com/en-us/library/x8160f6f.aspx)、[DisplayMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember)和[ValueMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember)属性。这是代码：

```
using System.Data.OleDb;

            string strCon = Properties.Settings.Default.PID2dbConnectionString;
            OleDbConnection conn = new OleDbConnection(strCon);
            try {
                conn.Open();
                string strSql = "Select forename,surname from customer where customer id ='" + txtName.Text + "'";
                OleDbDataAdapter adapter = new OleDbDataAdapter(new OleDbCommand(strSql, conn);
                DataSet ds = new DataSet();
                adapter.Fill(ds);
                comboBox1.DataSource = ds.Tables[0];
                comboBox1.DisplayMember = "forename";
                comboBox1.ValueMember = "surname";
            }
            finally {
                conn.Close();
            } 
```

# ruby-on-rails - Rails 3 能够导入/导出到 Microsoft Access 或从 Microsoft Access 导入/导出？

> ID：14237644
> 
> 赞同：2
> 
> 时间：2013-01-09T14:39:12.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ms-access

这个问题已经在这里问过了，但已经有一段时间了。有谁知道 Rails 是否支持 Microsoft Access？我需要每隔几周导入和导出数据，并且真的很想避免导出/导入 csv 文件。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-30T15:57:19.200

值得注意的是，`mdb`Ruby 有一颗宝石。它需要安装[mdbtools](http://sourceforge.net/projects/mdbtools/)。

添加到您的 Gemfile：

```
gem 'mdb' 
```

用法非常简单，表基本上是哈希列表：

```
require 'mdb'

database = Mdb.open('workshops_handouts_inactive_database.mdb')
table = database[:MainData]
results = table.select { |rec| rec[:"Schedule Type"] == "MU1" }
puts results.first

{:"Container Number"=>"17", :Location=>"1f6", :Department=>"tx", ... 
```

不过，我认为 MS Access 不存在 ActiveRecord 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:55:27.633

win32OLE 类允许您从 Microsoft Acess 检索数据，您可以在此处找到文档 [http://www.ruby-doc.org/stdlib-1.9.3/libdoc/win32ole/rdoc/WIN32OLE.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/win32ole/rdoc/WIN32OLE.html)

# javascript - pjscrape 延迟 btw 刮擦：怎么样？

> ID：14237647
> 
> 赞同：1
> 
> 时间：2013-01-09T14:39:15.757
> 
> 标签：javascript, jquery

我正在使用 pjscrape 来抓取大量页面。

我面临的问题是，服务器通常会在经过一定数量的迭代连接并在短时间内阻止您。

我发现在页面抓取与其后续之间创建一些延迟的唯一方法是使用准备功能，即

```
pjs.addSuite({
    // single URL or array
    url: urls,
    ready: function() {
        return $('#MY_LAST_DIV').length > 0;
    },
    // single function or array, evaluated in the client
    scraper: function() {
        //...SCRAPING CODE...
    }
}); 
```

pjscrape 超时功能似乎可以处理其他问题（我参考以下）

```
pjs.config({ 
    ...
    timeoutInterval: 20000,
    timeoutLimit: 20000
}); 
```

有没有办法在刮擦之间建立间隔？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:38:37.597

查看源代码，目前没有机制可以在抓取它们之前等待一段时间但是添加一个应该不难。这是一个原型补丁（未经测试，只是在这里给出一个想法）

```
38a39
>             delayBetweenRuns: 0,
639c640,642
<                             s.scrape(url, scrapers, complete);
---
>                             window.setTimeout(function() {
>                                 s.scrape(url, scrapers, complete);
>                             },config.delayBetweenRuns); 
```

它只是简单地`setTimout`使用默认定义为 0 的 timout 来包装 scrape 调用。第一行是添加的配置键

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T13:05:26.840

这是一个更hackier的方法，它使用了 ready 方法

```
ready: function() {
        if(!window.wait){
            window.wait = true;
            setTimeout(function(){window.wait = false;}, 3000);
    }
        return !window.wait;
    } 
```

# database - 在 Access 中，如何创建一种方法来从一个表中创建大约 152 个不同的文件？

> ID：14237648
> 
> 赞同：1
> 
> 时间：2013-01-09T14:39:15.303
> 
> 标签：database, ms-access

我有一张桌子，里面有大约 1500 名学生和他们的老师。现有教师152人。教师拥有的集体学生就是他们的案例量。我想输出一个 Excel 文件来显示他们的案件量。如果我这样做是蛮力的，那将是一件容易的事。但是，有没有一种方法可以设置它，以便 Access 可以循环并为每位教师制作一个 excel 文件。除了我的学生表之外，我还有一个包含所有教师的教师表。我还为它们每个人分配了一个数字，以便循环可以通过它们计数。我了解我想做的事情的结构，我只是不知道最好的方法……或者说实话，哈哈。无论哪种方式，我下面的内容基本上都是表格中的内容。表名是学生和教师。

```
Students
 Student_Number Student_Name   Teacher_Number

Teachers
 Teacher_Number   Teacher_Name 
```

这基本上就是我在这里所拥有的。我确实意识到，对于正常情况，使用名称作为连接字段是一个可怕的决定。但是，这不会比这两个字段大，而且我每年都必须从头开始，所以我不认为重复名称会出现任何问题，因为我们今年没有任何问题。基本上，这些表不会改变，所以我不必担心更新。基本上，对于这个小东西，我不担心规范化等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:08:19.263

遍历教师表并将字符串分配给现有查询。

```
 Dim qdf As QueryDef
 Dim rs As DAO.Recordset

 ''Make sure you have a query that can be overwritten called OutputStudents
 ''or this will not work. You can create a query in VBA and do the checks 
 ''as to whether a query by that name exists, but this is simpler
 Set qdf = CurrentDB.Querydefs("OutputStudents")
 Set rs = CurrentDB.OpenRecordset("Teachers")

 Do While Not rs.EOF
    ''Set the sql of a query called OutputStudents (see above)
    qdf.SQL = "SELECT * FROM Students WHERE Teacher_Number=" & rs!Teacher_Number

    ''Output to Excel
    DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel8, _
       qdf.Name, "Z:\docs\" _
       & Teacher_Number & ".xls", True
    rs.MoveNext
Loop 
```

或者那里。

# android - 如何在使用 BaseAdapter Android 进行搜索时防止重复数据

> ID：14237649
> 
> 赞同：0
> 
> 时间：2013-01-09T14:39:17.273
> 
> 标签：android, filter, baseadapter

我正在尝试从`CustomListView`实现`Filterable`中搜索`BaseAdapter`，但它提供了重复的搜索数据..

```
 @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
         // Here myList contains Original data
        return new MyFilter(myList);
    }

private class MyFilter extends Filter {

    List<ListModel> myValues;

    public MyFilter(List<ListModel> list) {
        // TODO Auto-generated constructor stub
        myValues = new ArrayList<ListModel>(list);
    }

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        // TODO Auto-generated method stub

        FilterResults results = new FilterResults();

        List<ListModel> temp = new ArrayList<ListModel>();

        if (TextUtils.isEmpty(constraint)) {

            if (temp.size() > 0)
                temp.clear();
            temp.addAll(myValues);
        }

        else {
            for (ListModel model : myValues) {

                if (model.getNames().toLowerCase.contains(constraint.toString().toLowerCase()))
                    temp.add(model);
            }

        }
        results.values = temp;
        results.count = temp.size();

        return results;
    }

      @SuppressWarnings("unchecked")
      @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results) {
        // TODO Auto-generated method stub

        if (results != null && results.count > 0) {

            myList.clear();
            myList.addAll((List<ListModel>) results.values);

        } else
            myList.addAll(myValues);

        mAdapter.notifyDataSetChanged();

    }
} 
```

我没有找到我犯错的地方，搜索工作完美，但它向我的自定义列表视图添加了更多数据..

**例子**

假设我搜索“印度”，然后它将整个列表视图数据添加为“印度”。如果我的列表视图包含 10 行的大小，则它与“印度”组成 20 行

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:32:36.147

最后我能够解决我自己的问题..

这里有几件事解决了我的问题..

```
 @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub

        return new MyFilter();
    }

    private class MyFilter extends Filter {

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        // TODO Auto-generated method stub

        FilterResults results = new FilterResults();

        List<ListModel> temp = new ArrayList<ListModel>();

        if (TextUtils.isEmpty(constraint)) {

            if (temp.size() > 0)
                temp.clear();
            // I have created new List from old myList before search begins
            temp.addAll(newList);
        }
        else
        {
            // newList 
            for (ListModel model : newList)
            {
                if(model.getNames().toLowerCase.contains(constraint.toString().toLowerCase()))
                    temp.add(model);
            }

        }
        results.values = temp;
        results.count = temp.size();

        return results;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results) {
        // TODO Auto-generated method stub

              myList.clear();

        if (results != null && results.count > 0)         
            myList.addAll((List<ListModel>) results.values);
        else
            myList.addAll(myList);

        mAdapter.notifyDataSetChanged();

    }
} //updated code 
```

# php - PHP 显示脚本中使用的内部函数

> ID：14237660
> 
> 赞同：2
> 
> 时间：2013-01-09T14:39:41.927
> 
> 标签：php, function

有没有办法找出脚本中使用了哪些内部 PHP 函数？

```
<?php
        echo "Hi";
        $x = substr("hello",3); 
```

目标是得到：echo, substr

get_defined_functions 显示所有全局可用，但我如何才能在脚本中只找到使用的？

解析文件不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:46:24.357

您可以使用 XDebug 分析器查看脚本中执行了哪些函数以及执行了多少次。但它会收集所有功能执行（系统和自定义），我不记得它是否可以以某种方式过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:43:29.710

我并不是要打破你的泡沫，但解析可能是你最好的选择。您不会在 eval'd 代码中捕获函数调用 -`eval`等`call_user_func`。

我很好奇你为什么要这样做。你能描述一下你的用例吗？

# php - PHP Easy mysql 查询 if 语句

> ID：14237661
> 
> 赞同：0
> 
> 时间：2013-01-09T14:39:45.530
> 
> 标签：php, mysql, if-statement, row

我的代码：

```
mysql_connect(SQL_SERVER, SQL_USER, SQL_PASS);
mysql_select_db(SQL_DB);
$result = mysql_query("SELECT id FROM ".TB_PREFIX."users WHERE tribe = '2'");
if (!$result) {
die("Tribe Error");
} 
```

在此代码中，所有用户部落都会出错。但我只希望'2'部落出错。这段代码有什么问题？

谢谢你。

编辑：请编辑我的代码有什么问题，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:51:22.177

我为你找到了这个：http: [//php.net/manual/en/mysqli.query.php](http://php.net/manual/en/mysqli.query.php)

在这里你可以学习如何使用mysqli

下面的代码，你可以自己修改

编辑：这不是正确的方法，但试试这个

```
mysql_connect(SQL_SERVER, SQL_USER, SQL_PASS);
mysql_select_db(SQL_DB);
$result = mysql_query("SELECT id FROM ".TB_PREFIX."users WHERE tribe = 2");
$fetch = mysql_fetch_assoc($result);
if (count($fetch)<1) {
if (!$result) {
die("Tribe Error");
}
else{
var_dump($fetch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:42:10.323

您正在检查查询是否返回错误，而不是查询是否返回 1（或更多...）行，这可能是您想要的。返回 0 行的查询仍然是有效查询。

除此之外，您应该切换到 PDO（或 mysqli）并使用绑定变量准备语句。

在 PDO 中，您可能可以获得返回的行数[`rowCount()`](http://php.net/manual/en/pdostatement.rowcount.php)，请查看手册以获取有关如何将代码重写为 PDO 的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:31:12.433

[PHP官方网站上的Mysqli](http://php.net/manual/en/mysqli.query.php)

修改下面提到的代码以适合您的应用程序

```
mysql_connect(SQL_SERVER, SQL_USER, SQL_PASS);
mysql_select_db(SQL_DB);
$result = mysql_query("SELECT id FROM ".TB_PREFIX."users WHERE tribe = 2") or die(mysql_error());
$fetch = mysql_num_rows($result);
if ($fetch > 0) {
    while($dets = mysql_fetch_assoc($result)){
        //displaying all info about current record
        var_dump($dets);
    }
}
else
    echo "No records"; 
```

# google-app-engine - Gae 连接到第 3 方服务

> ID：14237663
> 
> 赞同：1
> 
> 时间：2013-01-09T14:39:51.453
> 
> 标签：google-app-engine, rabbitmq, couchbase

gae 是否可以连接到其他服务，例如rabbitmq、couchbase 或任何其他可能已设置的第三方系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:43:57.170

是的，但目前只能通过 HTTP 请求。请参阅[URL 获取 Java API](https://developers.google.com/appengine/docs/java/urlfetch/http://)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:44:39.860

如果他们接受使用 HTTP 方法的连接，例如 POST、GET，那么是的。

否则没有。套接字尚不可用，但您可以注册一个测试版。

# eclipse-plugin - 通过来自 Eclipse 的插件进行明文连接时出错

> ID：14237665
> 
> 赞同：1
> 
> 时间：2013-01-09T14:39:52.433
> 
> 标签：eclipse-plugin, clearcase

我已经在 Eclipse 上成功安装了 Rational clear case client 7.1.2 插件，但是在连接到它时出现以下错误：

错误 ：-

```
The server cannot be contacted.  Please contact your system administrator.; 
nested exception is: 
    java.lang.ClassCastException: org.apache.axis.attachments.AttachmentsImpl cannot be cast to org.apache.axis.attachments.Attachments 
```

有人可以建议如何解决此错误消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:44:53.007

[错误 295161](https://bugs.eclipse.org/bugs/show_bug.cgi?id=295161)表明存在类加载问题。

但是，如果插件安装正确，我在尝试使用具有 CCRC 访问权限（ClearCase 远程控制）的插件时看到此错误，而不是完整的*本地*ClearCase 安装。

[技术说明 swg21373322](http://www-01.ibm.com/support/docview.wss?uid=swg21373322)详细介绍了其他原因：

![错误](../Images/e06b3df915d81058a8f98040c7cbf14b.png)

*   一种可能的原因是`C:\Program Files\IBM\RationalSDLC\common`系统路径环境变量太低了。
    => 检查
*   WAS 服务器上的内存分配问题。
    => 与您的管理员一起查看
*   如果用户不使用完整且正确的团队 URL，也会发生此错误。例如，如果用户输入`http://myserver`或`http://myserver:12080`。
    => 检查
*   由于缺陷 APAR PK91671 也可能发生此错误。
*   没有 ClearCase 许可证。ClearCase 许可证可能未在许可证服务器主机上正确设置。
*   如果服务器启用了区域映射并且用户区域映射文件具有限制性权限或被错误地放置在具有限制性权限的目录中，则可能会发生这种情况。
*   如果尝试登录的远程用户无法写入 CCRC 临时目录，也会发生这种情况。
*   安装的客户端版本可能与 CM 服务器版本不兼容。
    （我认为这里不是这种情况）

* * *

这个[其他 IBM 帮助页面](https://www.ibm.com/developerworks/mydeveloperworks/blogs/qualitymanagement/entry/one_stop_for_ccrc_integration_with_rft29?lang=en)提到[了技术说明 swg21500584](http://www-01.ibm.com/support/docview.wss?uid=swg21500584)：

您可能需要检查您的代理：

![Eclipse 代理](../Images/249815fd28aa1c2ae47609004f244c73.png)

> Eclipse 用户会注意到，在最新版本的 Eclipse（3.4 和更高版本）中，默认情况下有一个活动提供程序设置为 Native。以上是 Eclipse 在没有代理的网络上的默认安装。
> 
> Native 和 Direct 是 Active Providers 的选择。
> 下面是关于 Eclipse 3.6 的描述（例如，像 3.5 这样的版本是相同的）对于该首选项值：
> 
> "指定打开连接时要使用的设置配置文件。
> 
> *   选择直接提供程序会导致在不使用代理服务器的情况下打开所有连接。
> *   选择 Manual 会导致使用 Eclipse 中定义的设置。
> 
> 在某些平台上还有一个可用的 Native 提供程序，选择这个会导致使用在操作系统中发现的设置。”

# matlab - 如何退出matlab gui

> ID：14237669
> 
> 赞同：1
> 
> 时间：2013-01-09T14:40:08.820
> 
> 标签：matlab, user-interface, quit

我的 matlab gui 中有这个回调，由 menu->Programm->quit 执行。

然而，把手是空的。

```
function menuProgramQuit_Callback(hObject, eventdata, handles)
% hObject    handle to menuProgramQuit (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
close(handles.figure1); 
```

因此，我想知道如何退出 matlab gui，或者为什么在我的代码中，handles 结构为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:42:54.330

你几乎明白了。试试这个（[来源](http://www.mathworks.com/matlabcentral/newsreader/view_thread/252128)）：

```
close(handles.gui) 
```

# javascript - 必应地图信息框，带有 html 视图

> ID：14237671
> 
> 赞同：0
> 
> 时间：2013-01-09T14:40:21.527
> 
> 标签：javascript, html, asp.net-mvc-4, bing-maps

是否可以在 ASP.Net MVC 4 中加载 _PartialView。我不认为可以将其与内容一起加载

```
var defaultInfobox = new Microsoft.Maps.Infobox(map.getCenter(), infoboxOptions );    
 map.entities.push(defaultInfobox);
 defaultInfobox.setHtmlContent('<div id="infoboxText" style="background-color:White; border-style:solid;border-width:medium; border-color:DarkOrange; min-height:100px;width:240px;"><b id="infoboxTitle" style="position:absolute; top:10px; left:10px; width:220px;">myTitle</b><a id="infoboxDescription" style="position:absolute; top:30px; left:10px; width:220px;">Description</a></div>'); 
```

但我没有找到任何使用 cshtml 视图的示例。

更新：

```
 var pushpinOptions = { icon: '../images/BingMap/discussion-icon-ny.png', width: 30, height: 40 };
                    var latLon = new Microsoft.Maps.Location(location.latitude, location.longitude);
                    var pin = new Microsoft.Maps.Pushpin(latLon, pushpinOptions);
                    pin.Title = name;//usually title of the infobox
                    pin.Description = set; //information you want to display in the infobox
                    pinLayer.push(pin);//add pushpin to pinLayer
                    Microsoft.Maps.Events.addHandler(pin, 'click', displayInfobox); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:13:44.773

1.  步骤：将您的 html 放在局部视图中
2.  步骤：安装和集成 JavaScriptModel ( [http://jsm.codeplex.com](http://jsm.codeplex.com) )
3.  步骤：您需要在 Controller Base 中使用以下方法：

    ```
    public string RenderPartialViewAsString(string partialViewName, object model = null)
    {
        if (partialViewName == null)
            throw new ArgumentNullException("partialViewName");

        ViewDataDictionary viewData = new ViewDataDictionary(model);

        using (StringWriter writer = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, partialViewName);

            if (viewResult == null || viewResult.View == null)
                throw new InvalidOperationException(string.Format("Could not find partial view with name '{0}'", partialViewName));

            ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, viewData, TempData, writer);
            viewResult.View.Render(viewContext, writer);

            return Regex.Replace(writer.ToString(), @"[\t\n\r]", string.Empty, RegexOptions.Compiled);
        }
    } 
    ```

4.  步骤：现在您可以随时向 javascript 变量添加部分视图。例如，您可以在控制器操作中编写：

    ```
    this.AddJavaScriptVariables("MyJavaScriptVariable", RenderPartialViewAsString("MyBingPartialView")); 
    ```

5.  步骤：编辑您的 js.file：

    ```
    defaultInfobox.setHtmlContent(MyJavaScriptVariable); 
    ```

# github - 如何使用Web界面删除github中的文件

> ID：14237674
> 
> 赞同：35
> 
> 时间：2013-01-09T14:40:40.647
> 
> 标签：github

标题几乎就是问题。我知道，`git rm file`但这不是我要找的。**我正在寻找一种仅**使用浏览器删除 github 存储库中的文件和文件夹的方法。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-09T15:11:04.713

这（还没有？）可通过 Web 界面使用。

由于 GitHub 添加了**[文件编辑](https://github.com/blog/905-edit-like-an-ace)**，然后是**[文件创建](https://github.com/blog/1327-creating-files-on-github)**功能，因此提出这样的功能*可能*是有意义的。这样做的推荐渠道是发送电子邮件至**support@github.com**。

## 更新

现在**[可以](https://github.com/blog/1545-deleting-files-on-github)**通过 Web 界面删除文件。

![截屏](../Images/82ce642950c163b9b2329c6d658f8d9c.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-09-08T14:43:59.213

删除文件夹中的所有文件。如果文件夹中不再有文件，则会自动删除文件夹。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-11-24T10:43:38.813

您不能使用浏览器删除文件夹，但可以使用桌面应用程序。将 repo 克隆到一个目录，删除那里的文件夹，然后使用应用程序提交更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-19T17:18:19.050

目前无法使用 Web UI 选择多个文件进行删除。

与此同时，GitHub 推荐编辑或删除多个文件的方式是使用本地存储库。然后，您将能够删除本地克隆中的文件，将该更改提交到本地存储库，然后将该更改推送到 GitHub 上的远程存储库。

> 执行此操作的步骤是：
> 
> *   在命令行中，导航到您的本地存储库。
>     
>     
> *   确保您在默认分支中：
>     
>     
>     
>     ```
>      git checkout master 
>     ```
>     
>     
> *   该`rm -r`命令将递归删除您的文件夹：
>     
>     
>     
>     ```
>      git rm -r folder-name 
>     ```
>     
>     
> *   提交更改：
>     
>     
>     
>     ```
>      git commit -m "Remove duplicated directory" 
>     ```
>     
>     
> *   将更改推送到您的远程存储库：
>     
>     
>     
>     ```
>      git push origin master 
>     ```

我希望这有帮助！

# git - 与 Git 混淆。我应该将我的更改推送到我克隆的仓库吗？

> ID：14237683
> 
> 赞同：0
> 
> 时间：2013-01-09T14:41:09.173
> 
> 标签：git, version-control

我想我可能根本没有理解 Git 方法。我需要知道我这样做是对的：
所以我已经将一个 git 存储库克隆到我的本地机器中，以便我可以通过添加一些代码、调试等来做出贡献，ETC。

所以我将此错误处理添加到项目中的一个文件中，并将其提交到我的本地仓库中。
我应该做一个：

```
 **git push remote master** 
```

以便在服务器上提交更改？
我通过执行以下操作设置了我的遥控器：

```
git remote add origin git@/the/actual/project/repository/at/gitHub 
```

我不想弄乱这个项目，请指导我完成这个，我是 Git 概念的新手。

谢谢迪潘卡_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:48:13.657

这听起来对我来说是正确的。

如果您想真正确定：分叉您克隆的原始存储库，在本地克隆它并在分叉副本上测试您的 git push 命令 - 而不是原始存储库。

编辑：甚至更简单，只需制作一个超级简单的公共回购并在其上测试您的推/拉命令。

伟大的 git 引用拯救了我（让我们面对现实吧 - Git 比 SVN 难得多）

[http://gitimmersion.com/](http://gitimmersion.com/)

[http://try.github.com/levels/1/challenges/1](http://try.github.com/levels/1/challenges/1)

[http://think-like-a-git.net/——](http://think-like-a-git.net/)关于“4 岁及以上的 Git”的视频确实帮助我理解了它，并且仍然是我最喜欢的资源。

# html - 在引导程序中禁用控件

> ID：14237686
> 
> 赞同：52
> 
> 时间：2013-01-09T14:41:11.167
> 
> 标签：html, twitter-bootstrap

我在我的应用程序中使用 Bootstrap css 和 js。不小心我点击了一个禁用的下拉列表，发现它正在打开下拉列表。我已经在元素`readonly`的属性中做到了：`select`

```
<select id="xxx" name="xxx" class="input-medium" readonly> 
```

我也试过设置`readonly="true"`，但还是一样。

但是，如果您不使用 jQuery.datepicker，文本框控件可以正常工作。

当我们使用引导程序时，是否有一种特殊的方法可以使下拉控件只读？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-01-09T14:58:47.727

不，Bootstrap 没有引入禁用下拉菜单的特殊注意事项。

```
<select id="xxx" name="xxx" class="input-medium" disabled> 
```

或者

```
<select id="xxx" name="xxx" class="input-medium" disabled="disabled"> 
```

将工作。我更喜欢给属性值（如第二种形式；在 XHTML 中，属性必须有一个值），但 HTML 规范说：

> 元素上存在布尔属性表示真值，不存在该属性表示假值。

（来自[http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#boolean-attribute](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#boolean-attribute)）

只读和禁用之间的主要区别：*

禁用属性

*   禁用的表单元素的值不会传递给处理器方法。W3C 称这是一个成功的元素。（这类似于未选中的表单复选框。）
*   某些浏览器可能会覆盖或为禁用的表单元素提供默认样式。（灰色或浮雕文本）Internet Explorer 5.5 对此特别讨厌。
*   禁用的表单元素不会获得焦点。
*   在选项卡导航中跳过禁用的表单元素。

只读属性

*   并非所有表单元素都具有只读属性。最值得注意的是`<SELECT>`，`<OPTION>`, 和`<BUTTON>`元素没有只读属性（尽管它们都有禁用属性）
*   浏览器不提供表单元素只读的默认覆盖视觉反馈
*   带有只读属性集的表单元素将被传递给表单处理器。
*   只读表单元素可以接收焦点
*   只读表单元素包含在选项卡式导航中。

[*-来自http://kreotekdev.wordpress.com/2007/11/08/disabled-vs-readonly-form-fields/](http://kreotekdev.wordpress.com/2007/11/08/disabled-vs-readonly-form-fields/)的公然剽窃

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-09T14:42:56.860

尝试

```
$('#xxx').attr('disabled', true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T14:44:40.587

尝试

```
<select id="xxx" name="xxx" class="input-medium" disabled> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-21T16:16:58.620

请记住，对于 jQuery 1.6+，您应该使用该`.prop()`函数。

```
$("input").prop('disabled', true);

$("input").prop('disabled', false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-19T12:43:53.840

```
<select id="message_tag">
<optgroup>
<option>
....
....
</option>
</optgroup> 
```

在这里，我只是为“选择”元素删除了引导 css。使用以下 CSS 代码。

```
#message_tag_chzn{
display: none;
}

 #message_tag{
  display: inline !important;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-27T13:29:20.187

你也可以使用“只读”

```
<select id="xxx" name="xxx" class="input-medium" readonly> 
```

# jquery - 在knockout.js applyBindings（）之后Jquery选择器不起作用

> ID：14237689
> 
> 赞同：2
> 
> 时间：2013-01-09T14:41:19.613
> 
> 标签：jquery, knockout.js

我有几个表单输入：

```
<input data-bind="value:someKOObservable" /> 
```

我想在数据绑定事件之后使用 Jquery 选择器访问这些。我有以下代码：

```
$(document).ready(function () {
    ko.applyBindings(new ViewModel());
    console.log("Found " + $("input").length + "  inputs.");

}); 
```

出于某种原因，这找不到任何输入字段，但如果我删除了 applyBindings，那么它会找到所有输入字段。

如何在 ko.applyBindings() 之后使用 Jquery 选择这些输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:28:03.507

我在使用“with”绑定时也看到过这种情况。删除 with 绑定应该可以修复它。

处理此问题的另一种方法是创建自定义绑定。一旦准备好进行 DOM 处理，它将收到一个更新调用。

```
 ko.bindingHandlers.myCustomBinding = {
    update: function(element, valueAccessor) {
   //I'm ready to update DOM
    } }; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-11T17:21:25.180

使用 jquery 委托。[你可以在这里](http://api.jquery.com/delegate/)找到更多信息

# c# - 如何在代码c#中在iis 5.1中添加新的应用程序池？

> ID：14237693
> 
> 赞同：2
> 
> 时间：2013-01-09T14:41:34.743
> 
> 标签：c#, windows-xp, application-pool, iis-5, directoryentry

我正在尝试在 IIS 5.1 上添加网站

当我尝试使用下面的函数为我的新站点创建应用程序池时，出现了这个奇怪的错误**“system.directoryNotFound Exception ... in CreateAppPool”**

最奇怪的是，在**带有IIS7的PC windows 7上创建应用程序池功能完美，但在带有ISS5.1** 的windows XP上却没有。以下路径**“IIS：//localhost/W3SVC/AppPools”**在IIS5.1上有所不同？

```
public static CreateAppPool(string name)
        {
            string machineName = System.Environment.GetEnvironmentVariable("COMPUTERNAME");
            DirectoryEntry Service = new DirectoryEntry("IIS://"+machineName+"/W3SVC/AppPools");

            // create new app pool
            DirectoryEntry appPool = Service.Children.Add(name, "IIsApplicationPool");
            appPool.CommitChanges();
            Service.CommitChanges();

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:47:38.573

您不能在 IIS 5 中创建应用程序池，但您可以在默认网站下创建一个新的虚拟目录并使其成为应用程序。

# bash - 如何重新排列 shell 脚本的输出

> ID：14237694
> 
> 赞同：-1
> 
> 时间：2013-01-09T14:41:49.850
> 
> 标签：bash

给定以下 shell 脚本，如何重新排列输出以插入新行？

```
#!/bin/bash

echo -e $1 ` date ` 
```

我尝试了 -e 开关，但无济于事。

我的意思是如果我输入：`./script.sh "`ls -la`"`我会得到以下输出：

```
total 4732 drwxr-xr-x 4 root root 4096 2013-01-09 15:32 . drwx------ 28 root root 4096 2013-01-09 15:32 .. -rw-r--r-- 1 root root 484063 2013-01-06 05:22 Blackhat-europe-09-Damele-SQLInjection-whitepaper.pdf -rwxrwxrwx 1 root root 3787587 2013-01-06 05:10 FoxitReader-1.1.0.tar.bz2 -r-------- 1 root root 127693 2013-01-03 22:55 HackYeah-SQL-Injection.pdf drwxr-xr-x 2 root root 4096 2013-01-05 21:47 Inst_DVWA -rw-r--r-- 1 root root 3223 2012-12-22 00:47 nmap-O -rw-r--r-- 1 root root 284 2013-01-06 07:31 payload_dvwa.txt -rwxrwxrwx 1 root root 30 2013-01-09 11:18 script (copy).sh -rwxrwxrwx 1 root root 33 2013-01-09 15:32 script.sh -rw-r--r-- 1 root root 395493 2013-01-06 05:03 SQLmap_README.pdf -rwxrwxrwx 1 root root 705 2013-01-07 15:22 start_dvwa.sh -rw-r--r-- 1 root root 834 2013-01-06 07:31 Unsaved Document 1.txt drwxr-xr-x 2 root root 4096 2012-12-19 18:47 ZAP_certificate Wed Jan 9 15:32:55 CET 2013 
```

我想得到类似这样的输出：

```
total 4732
drwxr-xr-x  4 root root    4096 2013-01-09 15:32 .
drwx------ 28 root root    4096 2013-01-09 15:32 ..
-rw-r--r--  1 root root  484063 2013-01-06 05:22 Blackhat-europe-09-Damele-SQLInjection-whitepaper.pdf
-rwxrwxrwx  1 root root 3787587 2013-01-06 05:10 FoxitReader-1.1.0.tar.bz2
-r--------  1 root root  127693 2013-01-03 22:55 HackYeah-SQL-Injection.pdf
drwxr-xr-x  2 root root    4096 2013-01-05 21:47 Inst_DVWA
-rw-r--r--  1 root root    3223 2012-12-22 00:47 nmap-O 
-rw-r--r--  1 root root     284 2013-01-06 07:31 payload_dvwa.txt
-rwxrwxrwx  1 root root      30 2013-01-09 11:18 script (copy).sh
-rwxrwxrwx  1 root root      33 2013-01-09 15:32 script.sh
-rw-r--r--  1 root root  395493 2013-01-06 05:03 SQLmap_README.pdf
-rwxrwxrwx  1 root root     705 2013-01-07 15:22 start_dvwa.sh
-rw-r--r--  1 root root     834 2013-01-06 07:31 Unsaved Document 1.txt
drwxr-xr-x  2 root root    4096 2012-12-19 18:47 ZAP_certificate 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:36:23.190

尝试

```
#!/bin/bash
$*
date 
```

我不确定如何`./script "ls -la"`改进，`ls -la; date`但我想你有你的理由。

不过，作为一项重要的可用性改进，我更喜欢`./script ls -la`不带引号；只需切换`"$@"`. `$*`然后，除其他外，将带引号的字符串作为参数传递也将起作用。例如，`./script perl -le 'print 0x12, "foo"'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:55:49.633

尝试

```
echo -e "`$1`\n`date`" 
```

引号应保留换行符。

# javascript - 如何在每次重新加载时重新排列 div 顺序？

> ID：14237696
> 
> 赞同：0
> 
> 时间：2013-01-09T14:41:59.533
> 
> 标签：javascript, jquery

有没有办法重新排列 div 顺序？更确切地说我怎么能从

```
<div id="1"></div>
<div id="2"></div>
<div id="3"></div>
<div id="4"></div> 
```

这

```
<div id="3"></div>
<div id="1"></div>
<div id="4"></div>
<div id="2"></div> 
```

或每次重新加载时的任何其他订单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:01:08.973

像这样简单

```
$("#parent").html($("#parent").children().sort(function() { return 0.5 - Math.random() })); 
```

这是工作示例[http://jsfiddle.net/CPQXw/1/](http://jsfiddle.net/CPQXw/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:52:29.797

看到这个：http: [//jsfiddle.net/KfY4u/](http://jsfiddle.net/KfY4u/)

```
$("div.container div").sort(function(){
    return Math.random()*10 > 5 ? 1 : -1;
}).each(function(){
    var $t = $(this);
    $t.appendTo( $t.parent() );   
}); 
```

这适用于任意数量的`div`标签

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T14:57:54.687

另一个片段：

[http://jsfiddle.net/t8gU7/](http://jsfiddle.net/t8gU7/)

```
var $divs = $('#container div');
for(var j, x, i = $divs.length; i; j = parseInt(Math.random() * i), x = $divs[--i], $divs[i] = $divs[j], $divs[j] = x);
$('body').append($divs); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T14:55:49.100

像这样的东西？

```
var ids = [], max = 4, i = 0, rand = 0;

while(i < max){
    do{
      rand = Math.floor(Math.random() * max); 
    } while(ids.indexOf(rand) < 0)
    ids.push(rand);
    i++;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T14:56:51.617

我将假设您有一个带有顺序的数组，如下所示： var order = [3, 1, 4, 2]; 现在，我假设你的 div 有一个容器 div，如下所示：

```
<div id="container">
  <div id="1"></div>
  <div id="2"></div>
  <div id="3"></div>
  <div id="4"></div>
</div> 
```

你应该如何进行：从头到尾遍历数组，并将每个具有相应 id 的 div 前置到“容器”div：

```
$(document).ready(function() {
  var order = [3, 1, 4, 2];

  for(var i=order.length-1; i>=0; i--) {
    $('#container').prepend($('#'+order[i]));
  }
}); 
```

享受！

编辑：我对这个问题的理解是如何重新排列 div 而不是如何生成新的随机顺序！抱歉，如果我错过了重点，但这就是您在问题中提出的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-20T09:21:42.913

```
<body>
  <div id="1">1</div>
  <div id="2">2</div>
  <div id="3">3</div>
  <div id="4">4</div>
</body> 
```

Vanilla Javascript ES6 是完成这项任务的最佳选择。实现基于提供的 HTML 结构。

```
let divs = document.querySelectorAll("div");
let randomDiv = Array.from(divs).sort(()=>{return 0.5 - Math.random();});
document.body.innerHTML="";
randomDiv.map((x)=>{document.body.innerHTML+=`<div 
id=${x.id}>${x.textContent}</div>`   
}); 
```

# virtualbox - 如何使用 USB 调制解调器将 VirtualBox 连接到互联网

> ID：14237700
> 
> 赞同：4
> 
> 时间：2013-01-09T14:42:12.797
> 
> 标签：virtualbox, wireless, usb-drive

我正在尝试使用 VirtualBox 来模拟​​ android 设备。但是我需要连接到互联网，这样我才能使用我在 VirtualBox 中创建的虚拟机的 IP 地址来连接 Eclipse (adb)。

但是，由于我使用的是 USB 调制解调器，因此当我选择使用 Bridged Adopter 时不会出现无线连接。唯一登记的连接是本地连接。我尝试了以下方法，但无济于事：

1.  使用 NAT 而不是桥接采用者
2.  尝试与 VirtualBox 共享连接。我无法共享，因为网络连接属性中缺少共享选项卡（我尝试了几个选项来启用共享选项卡，但也无济于事。我使用的是 Windows 7 Starter Edition）。
3.  尝试完全关闭防火墙，以确保没有任何内容被阻止。

那么，是否有另一种方法可以使用 USB 调制解调器将 VirtualBox 连接到互联网而不共享连接？如果没有，如何启用共享选项卡？

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-07T06:16:39.437

无需共享调制解调器连接，只需创建一个 VirtualBox Host Only Adapter 并将其配置为 DHCP 模式。您已正确使用 NAT 进行 VirtualBox 网络配置。只需连接你的 USB 调制解调器，这样你的 VirtualBox 就可以连接到互联网了。我刚试了兄弟。这是我的配置，请查看下面的链接

[https://www.dropbox.com/s/solc8sx9gtrawl4/Snapshot_2013-12-07_131209.png](https://www.dropbox.com/s/solc8sx9gtrawl4/Snapshot_2013-12-07_131209.png)

# c++ - 以编程方式确保随机调色板充满活力且与背景不同

> ID：14237702
> 
> 赞同：2
> 
> 时间：2013-01-09T14:42:18.790
> 
> 标签：c++, qt, user-interface, colors

好的，我有一个 Qt GUI 应用程序，我决定在其中随机生成调色板（允许我根据数据的唯一 ID 区分显示的数据）。

我使用的算法是这样的：

```
void Palette::generatePalette(quint32 seed, bool dark) {
    sfmt_t sfmt;
    sfmt_init_gen_rand(&sfmt, seed);
    quint32 i;
    qreal hue;
    QColor col;

    qreal lightness = 0.75;
    qreal saturation = 0.6;

    if (dark) {
        lightness = 0.5;
        saturation = 0.8;
    }

    for (i = 0; i < numberOfColors; i++) {
        hue = sfmt_genrand_res53(&sfmt);
        hue += 0.618033988749895;
        hue = fmod(hue, 1.0);
        col = QColor::fromHslF(hue, saturation, lightness);
        palette.append(col);
    }
} 
```

在大多数情况下，这给了我很好的柔和色彩，在灰色背景下非常明显。但是，偶尔会出现不易与背景区分的黄色。

我想知道的是，是否可以以编程方式将背景颜色与生成的颜色进行比较，如果它太难以区分，然后丢弃并重新生成颜色。

我在谷歌上四处寻找答案，但我找不到答案。我通常也不是 GUI 程序员，所以我不经常以这种方式处理颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:07:21.917

有几种[颜色距离/差异方法](http://en.wikipedia.org/wiki/Color_difference)。

对于您的应用程序（因为您不需要很高的精度），您可以使用[欧几里德距离](http://en.wikipedia.org/wiki/Euclidean_distance)（或颜色度量空间中的另一个规范），如果此距离低于阈值，您将放弃颜色。

```
double colorRGBEuclideanDistance(const QColor& c1, const QColor& c2)
{
    return sqrt(pow(c1.red()-c2.red(), 2) +
                pow(c1.green()-c2.green(), 2) +
                pow(c1.blue()-c2.blue(), 2));
} 
```

# algorithm - 枚举无向/未加权图的节点集

> ID：14237707
> 
> 赞同：1
> 
> 时间：2013-01-09T14:42:28.193
> 
> 标签：algorithm, graph, path, enumeration

在无向和无权图上，如何枚举所有长度为 1,2,..,n 的连接节点组（n 是用户定义的值）？

这个问题与这个问题[相似](https://stackoverflow.com/questions/5671486/enumerating-all-paths-in-a-tree)；有这个区别：对于n = 3；我还需要找到路径：ABC 和 CEF。

如果 n 为 4，则路径还应包括：

A B C D

ABCE

ABCF

ACEF

我想这是一个类似的问题；“所有对 - 所有路径”，其中每条路径最多可以包含 n 个节点。您还可以告诉方法计算复杂度吗？

我的想法是我需要同时使用DFS和BFS，但我不确定这是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:48:13.910

您基本上可以将 DFS 与一个额外的变量一起使用，该变量通过 的递归传递`length`，在每次迭代时都会减少。停止条件将是这个额外变量达到 0 时。

类似于以下内容：

```
DFS(source,length,path):
   print path //this is always done, because we want all paths up to n
   if (length == 0): //stop clause
      return
   for each (source,u) is an edge:
       path.append(u)
       DFS(u,length-1,path)
       path.removeLast() //clean up environment 
```

另一个（效率较低，但可能更优雅）是进行[迭代深化 DFS](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)，长度=1,2,...,n （并将打印仅放在停止子句中）

# node.js - 网页抓取：当使用 Mikeal 的 node.js 请求模块时，接近 15% 的结果是部分下载

> ID：14237709
> 
> 赞同：1
> 
> 时间：2013-01-09T14:42:35.063
> 
> 标签：node.js, web-scraping

我正在抓取灵感库并使用 Mikeal 的`request`node.js 库将图像下载到磁盘。问题是一堆图像，主要是在下载会话开始时，最终会部分或全部下载。如下图所示（按 排序的文件夹`Date Modified`）。在前 17 张图片之后，其余的下载正常，如您所见，从第 3 行第 4 列开始。

![部分下载](../Images/f0496fcf40baf46c23c525bc219907b5.png)

这是我正在使用的 node.js/request 代码的相关部分：

```
// images is an array of URLs to .jpg images
for( var i = 0, len = images.length ; i < len ; i++ ) {
    request.get( images[i] ).pipe( fs.createWriteStream(destinationFilename) )
} 
```

我正在使用`request`从存储在数组中的 URL 获取图像数据`images`并将其通过管道传输到`stream`将其写入磁盘的 a。大多数情况下，这可以正常工作，但有 1% 到 15% 的下载最终是部分下载。

我尝试使用对象的`drain`事件`stream`来获取`bytesWritten`并与它进行比较，`bytesTotal`但这种方法并没有让我到任何地方。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:52:35.290

Without seeing your entire script, I'd guess that your process is terminating before all of your requests have finished. You might try, as previously suggested, the async library, but you can accomplish this faster by taking full advantage of asynchronous requests with an [event emitter solution](https://stackoverflow.com/questions/13907495/how-to-ensure-that-a-statement-gets-executed-after-a-loop-completes/13920464).

Hope this helps!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:50:07.960

使用[异步](https://npmjs.org/package/async)。您必须使用 async.queue 并以有限的并行度发送请求。您的代码正在做的是尝试同时产生`images.length`多个请求。Node.js 是非 I/O 阻塞的。因此，您需要对产生的事件数量进行一些控制。Async 是您需要的软件包。

# java - 如何从 Spring Security 中的默认过滤器堆栈中删除一个过滤器？

> ID：14237715
> 
> 赞同：5
> 
> 时间：2013-01-09T14:42:46.883
> 
> 标签：java, spring, spring-security

我必须从 Spring Security 堆栈中排除一个默认过滤器。所以所有过滤器都应该像往常一样工作。似乎我找到了这样做的方法，制作自定义 FilterChainProxy：

```
public class CustomFilterChainProxy extends FilterChainProxy {

Logger LOGGER = Logger.getLogger(CustomFilterChainProxy.class);

public CustomFilterChainProxy() {
    super();
    LOGGER.debug("Run custom filter proxy");
    LOGGER.debug("String filters: " + this.toString());
}

public CustomFilterChainProxy(SecurityFilterChain chain) {
    super(chain);
    LOGGER.debug("Run custom filter proxy with chains");
}
} 
```

如您所见，它具有获取过滤器列表的构造函数，因此我将能够根据需要从链中删除一个过滤器，其余的将照常工作。但是我不能为这样的构造函数在安全配置中制作 bean。如果我使用

```
<bean id="filterChainProxy" class="com.pkg.CustomFilterChainProxy"> 
```

它当然是使用默认构造函数构建对象。好的，我尝试使用一些过滤器列表制作 bean：

```
<bean id="filterChainProxy" class="ru.olekstra.backoffice.util.CustomFilterChainProxy">
<constructor-arg>
    <list>
        <sec:filter-chain pattern="/**" 
        filters="BasicUserApprovalFilter" />
    </list>
</constructor-arg>
</bean> 
```

但这不会编译，因为 BasicUserApprovalFilter 是未知 bean。那么如何从默认过滤器堆栈中排除一个过滤器呢？如果我使用自定义过滤器链代理的方式是一个不错的决定，那么如何使用默认过滤器链创建 bean？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T18:57:11.593

如果您提供有关要删除的过滤器及其原因的更多详细信息，这可能会有所帮助。

如果您愿意，可以`BeanPostProcessor`在创建过滤器链后使用 a 来修改它。在默认命名空间配置中，您可以为`<http>`元素创建的过滤器链命名：

```
<http name="myFilterChain">
   ... 
```

`SecurityFilterChain`这将注册一个具有此名称的类型的 bean 。`FilterChainProxy`是从这些列表中创建的。

后处理器看起来像：

```
public class SecurityFilterChainPostProcessor implements BeanPostProcessor {

    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {

        if (beanName.equals("myFilterChain")) {
            DefaultSecurityFilterChain fc = (DefaultSecurityFilterChain)bean;
            List<Filter> filters = fc.getFilters();

            // Modify the filter list as you choose here.                
            List<Filter> newFilters = ...

            return new DefaultSecurityFilterChain(fc.getRequestMatcher(), newFilters);
        }

        return bean;
    }

    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }
} 
```

然后只需在您的应用程序上下文中注册此 bean 的实例，其余的将由 Spring 完成。这样您就可以避免将所有 Spring Security 基础设施过滤器定义为单独的 bean。

## 更新

这是一个[真实示例](https://github.com/cloudfoundry/uaa/blob/master/common/src/main/java/org/cloudfoundry/identity/uaa/security/web/SecurityFilterChainPostProcessor.java)及其[配置](https://github.com/cloudfoundry/uaa/blob/master/uaa/src/main/webapp/WEB-INF/spring-servlet.xml#L27)的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:53:38.813

您可以通过SpringSecurity 配置中**的 filter-chain-map**标签定义自己的过滤器链：

```
<bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
    <security:filter-chain-map>
       <sec:filter-chain pattern="/**"
            filters="
        ConcurrentSessionFilterAdmin, 
        securityContextPersistenceFilter, 
        logoutFilterAdmin, 
        .....
        anonymousAuthenticationFilter, 
        sessionManagementFilterAdmin, 
        exceptionTranslationFilter, 
        filterSecurityInterceptorAdmin,
        MonitoringFilter"/> 
    </security:filter-chain-map>
</bean> 
```

# web-services - 将 Web 服务请求重定向到另一个地址

> ID：14237724
> 
> 赞同：1
> 
> 时间：2013-01-09T14:43:13.977
> 
> 标签：web-services, spring

我在上下文`Spring WS`中处理所有类型的请求：`spring-ws-servlet.xml`

```
 <servlet-mapping>
        <servlet-name>spring-ws</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping> 
```

有没有办法创建一个策略，将特定请求重定向到我想要的地址？例如，当有人请求地址时，`localhost:8080/MyProject/someofrequest.asmx`我`web.xml`会将这个请求重定向到`localhost:8080/MyProject/HandleMessage`??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:35:00.153

一个解决方案是创建一个非常简单的 servlet，它将带有模式的请求重定向`*.asmx`到您的`/HandleMessage`操作：

```
<servlet>
    <servlet-name>redirect</servlet-name>
    <servlet-class>com.x.RedirectServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>redirect</servlet-name>
    <url-pattern>*.asmx</url-pattern>
</servlet-mapping> 
```

小服务程序代码：

```
public class RedirectServlet extends HttpServlet{
        public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException{
              response.sendRedirect("http://localhost:8080/MyProject/HandleMessage");
        }
} 
```

# struts - 检查struts html标签中的单选按钮默认值

> ID：14237731
> 
> 赞同：7
> 
> 时间：2013-01-09T14:43:28.373
> 
> 标签：struts, struts-1

如何在struts html标签中设置默认选中的单选按钮？

```
<html:radio name="RegisterForm" property="Group"  value="<%=Contant.Male%>"/><label>Male</label><BR>
<html:radio name="RegisterForm" property="Group" value="<%=Contant.Female%>"/><label>Female</label> 
```

在这里，我必须将男性设置为默认值。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T15:16:59.050

只需让您的控制器在调度到视图之前在表单中设置相应的属性：

```
form.setGroup(Constant.Male); 
```

# c++ - glCheckFramebufferStatus 在集成显卡上返回零

> ID：14237734
> 
> 赞同：0
> 
> 时间：2013-01-09T14:43:37.607
> 
> 标签：c++, opengl, fbo

我正在编写一个 2D OpenGL 引擎，并且我最近包含了一个帧缓冲区包装类，用于在运行时生成纹理图集。在我在笔记本电脑的集成显卡上对其进行测试之前，它工作得非常好，性能也得到了很大的提升。

显然，在集成显卡上运行时 glCheckFramebufferStatus 返回零。不，它不会返回 GL_FRAMEBUFFER_UNSUPPORTED。它返回零。我真的不认为我的集成显卡不支持帧缓冲区，因为它们不是那么旧。我还尝试延迟帧缓冲区的初始化以在主 GLUT 循环中执行此操作，但它没有解决问题。我也尝试使用 framebufferEXT 而不是 framebuffer，但没有任何改变。如果我忽略该错误，当我尝试绘制帧缓冲区的纹理时它不会绘制任何内容。另外：如果视频卡不支持帧缓冲区并且我绝对需要它们，我应该回退什么？

这是我的帧缓冲区类的代码：

帧缓冲区.hpp：

```
#pragma once

#include "sprite.hpp"

namespace core
{
    class framebuffer
    {
    public:
        framebuffer();
        virtual ~framebuffer();
        bool initialized();
        void initialize(int width, int height);
        int width();
        int height();
        sprite *getframe();
        void begin();
        void end();

    protected:
        GLubyte *pixels;
        int w, h;
        GLuint id, tex;
        sprite frame;
    };
} 
```

帧缓冲区.cpp：

```
#include "framebuffer.hpp"
#include <iostream>
#include <cmath>

namespace core
{
    framebuffer::framebuffer()
        : pixels(NULL), w(0), h(0)
    {
        // empty
    }

    framebuffer::~framebuffer()
    {
        glDeleteFramebuffers(1, &id);

        if (pixels)
        {
            // TODO: convert to smart pointer once everything works ok
            delete [] pixels;
            pixels = NULL;
        }
    }

    bool framebuffer::initialized()
    {
        return w != 0 && h != 0;
    }

    void framebuffer::initialize(int width, int height)
    {
        w = width;
        h = height;
        //std::cout << "framebuffer.initialize: w = " << w << "\nh = " << h << std::endl;
    }

    int framebuffer::width()
    {
        return w;
    }

    int framebuffer::height()
    {
        return h;
    }

    sprite *framebuffer::getframe()
    {
        GLuint oldtex;

        glBindFramebuffer(GL_FRAMEBUFFER, id);
        glEnable(GL_TEXTURE_RECTANGLE_ARB);
        glGetIntegerv(GL_TEXTURE_RECTANGLE_ARB, reinterpret_cast<GLint *>(&oldtex)); // store old bound texture
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, tex); // bind framebuffer texture
        glGetTexImage(GL_TEXTURE_RECTANGLE_ARB, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixels); // get framebuffer pixels
        frame.fromtexture(tex, GL_RGBA, w, h, GL_RGBA, pixels); // create a sprite object from raw pixels
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, oldtex); // re-bind the old texture
        glDisable(GL_TEXTURE_RECTANGLE_ARB);
        glBindFramebuffer(GL_FRAMEBUFFER, 0);

        return &frame;
    }

    void framebuffer::begin() // call this to start drawing to the framebuffer
    {
        if (!pixels)
        {
            GLenum result;

            // initialize the frame buffer if it isn't already

            glGenTextures(1, &tex); // generate the texture that will store the frame

            glEnable(GL_TEXTURE_RECTANGLE_ARB);
            glBindTexture(GL_TEXTURE_RECTANGLE_ARB, tex);

            // reserve video memory for the framebuffer image
            pixels = new GLubyte[w * h * 4];
            glTexImage2D(GL_TEXTURE_RECTANGLE_ARB, 0, GL_RGBA, w, h, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixels);
            glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
            glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

            glGenFramebuffers(1, &id); // create frame buffer
            glBindFramebuffer(GL_FRAMEBUFFER, id);

            // assign the texture to the framebuffer
            glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_RECTANGLE_ARB, tex, 0);

            result = glCheckFramebufferStatus(GL_FRAMEBUFFER);

            if (result != GL_FRAMEBUFFER_COMPLETE)
            {
                if (result == GL_FRAMEBUFFER_UNSUPPORTED)
                {
                    // todo: handle errors as exceptions and cleanup everything gracefully
                    std::cout << "framebuffer.begin: your video card doesn't seem to support framebuffers" << std::endl;
                    exit(0);
                }

                std::cout << "framebuffer.begin: failed to initialize framebuffer | error " << result << std::endl;
                exit(0);
            }

            glDisable(GL_TEXTURE_RECTANGLE_ARB);
        }

        glBindFramebuffer(GL_FRAMEBUFFER, id); // bind the framebuffer
        glPushAttrib(GL_VIEWPORT_BIT | GL_ENABLE_BIT);
        glViewport(0, 0, w, h); // adjust viewport to the fbo's size
        glLoadIdentity(); // reset modelview matrix

        glMatrixMode(GL_PROJECTION);
        glPushMatrix(); // store the non-flipped matrix
        glLoadIdentity();
        glOrtho(0, w, 0, h, -1, 1); // stupid fbo's flipping stuff upside down

        glMatrixMode(GL_MODELVIEW);
        glEnable(GL_BLEND);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    }

    void framebuffer::end() // call this to stop drawing to the framebuffer
    {
        glPopAttrib();
        glBindFramebuffer(GL_FRAMEBUFFER, 0);
        glMatrixMode(GL_PROJECTION);
        glPopMatrix(); // restore old matrix
        glMatrixMode(GL_MODELVIEW);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:55:06.823

来自官方文档：

"如果绑定到目标的帧缓冲区完整，则返回值为GL_FRAMEBUFFER_COMPLETE。否则，返回值确定如下：

...

此外，如果发生错误，则返回零。”

所以你有它，发生了错误。也许 glGetError 有其他信息。

如果不支持帧缓冲区并且您想将其用于渲染到纹理，您可以查看是否支持 pbuffers，否则为 glReadPixels？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:01:13.513

我假设目标显卡可能不支持 GL_TEXTURE_RECTANGLE_ARB。在这种情况下，您可能必须切换到 2 的幂纹理。

# android - 单个布局中有多个 MvxBindableListView？

> ID：14237735
> 
> 赞同：0
> 
> 时间：2013-01-09T14:43:41.820
> 
> 标签：android, xamarin.android, mvvmcross

我一直试图在我的布局中放置 3 个 MvxBindableListView 小部件，但没有成功。有没有办法做到这一点，以便每个 MvxBindableListView 完全显示而无需内部滚动，并且我的“页面”可以滚动。这是布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:local="http://schemas.android.com/apk/res/MyCurrentProject.Client.UI"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            local:MvxBind="{}" />
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:textAppearance="?android:attr/textAppearanceLarge"
            local:MvxBind="{}" />
        <Mvx.MvxBindableListView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:clickable="false"
            local:MvxBind="{}" />
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:textAppearance="?android:attr/textAppearanceLarge"
            local:MvxBind="{}" />
        <Mvx.MvxBindableListView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:clickable="false"
            local:MvxBind="{}" />
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:textAppearance="?android:attr/textAppearanceLarge"
            local:MvxBind="{}" />
        <Mvx.MvxBindableListView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:clickable="false"
            local:MvxBind="{}" />
    </LinearLayout>
</LinearLayout> 
```

此处绑定为空，但可以正常工作。列表具有可变数量的元素，因此固定高度是不可能的......

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:47:06.733

看看`MvxBindableLinearLayout`——但显然，如果您完整地显示一个或多个长列表，您可能会使用大量额外资源（内存、图形对象等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:52:30.180

您可以使用一个技巧让您的列表增长，然后将它们放在滚动视图中。请参阅下面的代码。您可以像使用常规 MvxBindableListView 一样使用它。

```
public class BindableExpandableHeightListView : MvxBindableListView
{
   public BindableExpandableHeightListView(Context context, IAttributeSet attrs) : base(context, attrs) { }

   public BindableExpandableHeightListView(Context context, IAttributeSet attrs, MvxBindableListAdapter adapter) : base(context, attrs, adapter) { }

   private bool _isExpanded = true;

    protected override void OnMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        if (_isExpanded)
        {
            int expandSpec = MeasureSpec.MakeMeasureSpec(int.MaxValue >> 2, MeasureSpecMode.AtMost);
            base.OnMeasure(widthMeasureSpec, expandSpec);

            ViewGroup.LayoutParams layoutParams = LayoutParameters;
            layoutParams.Height = MeasuredHeight;
        }
        else
        {
            base.OnMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }

} 
```

# sql-server-2008 - 自动为一堆表创建视图

> ID：14237740
> 
> 赞同：0
> 
> 时间：2013-01-09T14:44:11.527
> 
> 标签：sql-server-2008, tsql

我正在寻找一种方法来`1:1`为一堆表自动创建每个表的视图。由于我需要查看大量表，因此手动创建它们会很耗时。

完美的场景将是一个查询，*`create view`*为一次给定的每个表创建查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:53:19.847

这应该可以解决当前数据库的问题。它仍然是动态 SQL，但是……请注意，它不会检查视图是否已经存在。您可以`WHERE`向游标查询添加子句以限制表 -`WHERE t.name = '...'`或`WHERE t.name IN ('...','....')`.

```
DECLARE @TableName sysname
DECLARE @ColumnCount INT
DECLARE @ColumnID INT
DECLARE @SelectColumn NVARCHAR(500)
DECLARE @sql NVARCHAR(max) = ''

DECLARE QUERYINFO CURSOR FOR
    SELECT
        t.name AS TableName,
        ccount.ColumnCount,
        c.column_id AS ColumnID,
        CASE WHEN c.column_id <> ccount.ColumnCount
                THEN c.name + ', '
             ELSE c.name
             END AS SelectColumn
    FROM sys.tables t
    INNER JOIN sys.columns c ON t.object_id=c.object_id
    INNER JOIN (
        SELECT object_id,COUNT(*) AS ColumnCount
        FROM sys.columns
        GROUP BY object_id
    ) ccount ON t.object_id = ccount.object_id
    ORDER BY t.Name,c.column_id

OPEN QUERYINFO
FETCH NEXT FROM QUERYINFO INTO @TableName,@ColumnCount,@ColumnID,@SelectColumn
WHILE @@FETCH_STATUS = 0
BEGIN
    IF @ColumnID = 1
    BEGIN
        SET @sql = 'CREATE VIEW v_' + @TableName + ' AS SELECT ' + @SelectColumn
    END
    ELSE
    BEGIN
        SET @sql = @sql + @SelectColumn
    END  

    IF @ColumnID = @ColumnCount
    BEGIN
        SET @sql = @sql + ' FROM ' + @TableName
        EXEC sys.sp_executesql @sql
        SET @sql = ''
    END 

    FETCH NEXT FROM QUERYINFO INTO @TableName,@ColumnCount,@ColumnID,@SelectColumn
END

CLOSE QUERYINFO
DEALLOCATE QUERYINFO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T16:35:00.617

我知道这有点过时，但您可以使用带有递归 CTE 的临时表将 sys.columns 和 sys.tables 中的列串在一起，然后在不使用过程或游标的情况下构建视图。这是一个例子。这个只选择一个object_id，但您可以为数据库中的所有表运行它。唯一的问题可能是您的表是否大于 100 列。我认为 CTE 的默认深度是 100 个递归连接。

```
SELECT t.name AS TableName
        , ccount.ROW_COUNT
        , c.column_id AS ROW_RANK
        , c.name as COL

INTO #VT_TEMP

FROM sys.tables t  INNER JOIN sys.columns c 
ON t.object_id=c.object_id

INNER JOIN (  SELECT  object_id
                    , COUNT(*) AS ROW_COUNT
               FROM sys.columns
               GROUP BY object_id
    ) ccount 
ON t.object_id = ccount.object_id
WHERE t.OBJECT_ID = 245575913
ORDER BY t.Name, c.COLUMN_ID
;

WITH MYVIEW_CTE  ( T_NAME, R_COUNT, R_RANK, TXT )

AS 
  (
    SELECT TABLENAME
         , ROW_COUNT
         , ROW_RANK
         , CAST(COL AS VARCHAR(MAX))

    FROM #VT_TEMP 
    WHERE ROW_RANK = 1

    UNION ALL

    SELECT  V.TABLENAME
          , V.ROW_COUNT 
          , V.ROW_RANK
          , CAST(TXT  + ', ' +  V.COL AS VARCHAR(MAX)) 

    FROM #VT_TEMP V INNER JOIN MYVIEW_CTE C
    ON  V.TABLENAME = T_NAME
    AND V.ROW_RANK = R_RANK + 1
 )  

 SELECT CC.T_NAME
        ,CC.TXT
        , 'CREATE VIEW V_' + CC.T_NAME + ' AS SELECT ' + CC.TXT + ' FROM dbo.' + CC.T_NAME + ' ;' as DDL_View
 FROM MYVIEW_CTE CC INNER JOIN (

 SELECT T_NAME, MAX(R_RANK) AS MX_CNT
 FROM MYVIEW_CTE C
 GROUP BY T_NAME
 ) SC
 ON CC.T_NAME = SC.T_NAME
 AND CC.R_RANK = SC.MX_CNT 
```

# java - Java MessageFormat - 替换索引处的值

> ID：14237741
> 
> 赞同：1
> 
> 时间：2013-01-09T14:44:12.807
> 
> 标签：java, messageformat

我有一个这样的字符串：

```
{0}/suhdp run -command "suhilb" -input /sufiles/{1} -output /seismicdata/mr_files/{2}/ -cwproot {3} 
```

需要先替换第 0 和第 3 索引处的值。稍后，第一个和第二个索引将被替换（在已经部分格式化的字符串上）并最终使用。

我玩了一下[ChoiceFormat](http://docs.oracle.com/javase/6/docs/api/java/text/ChoiceFormat.html)但无法使用[MessageFormat](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)类来实现我想要的。

欢迎任何指点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:56:54.533

由于您不会一次填写所有值，因此建议您使用构建器：

```
public class MessageBuilder
{
    private final String fmt;
    private final Object[] args;

    public MessageBuilder(final String fmt, final int nrArgs)
    {
        this.fmt = fmt;
        args = new Object[nrArgs];
    }

    public MessageBuilder addArgument(final Object arg, final int index)
    {
        if (index < 0 || index >= args.length)
            throw new IllegalArgumentException("illegal index " + index);
        args[index] = arg;
        return this;
    }

    public String build()
    {
        return MessageFormat.format(fmt, args);
    }
} 
```

这样你就可以做到：

```
final MessageBuilder msgBuilder = new MessageBuilder("{0}/suhdp run -command \"suhilb\" -input /sufiles/{1} -output /seismicdata/mr_files/{2}/ -cwproot {3}", 4)
    .addArgument(arg0, 0).addArgument(arg3, 3);

// later on:
msgBuilder.addArgument(arg1, 1).addArgument(arg2, 2);
// print result
System.out.println(msgBuilder.build()); 
```

这段代码可能缺少一些错误检查等，而且远非最佳，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:48:37.513

如果您确定特定字符串`{somethinig}`没有在您的字符串中使用（似乎是这种情况），为什么不保持字符串原样并使用[`String.replace`](http://javarevisited.blogspot.de/2011/12/java-string-replace-example-tutorial.html)它来将其更改为您以后拥有的任何值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:57:04.517

这有帮助吗？

最初会引用应在第二阶段替换的占位符。

```
public static void main(String[] args) {
    final String partialResult = MessageFormat.format("{0} '{0}' '{1}' {1}", "zero", "three");
    System.out.println(partialResult);
    final String finalResult = MessageFormat.format(partialResult, "one", "two");
    System.out.println(finalResult);
} 
```

然后您的格式字符串变为：

```
{0}/suhdp run -command "suhilb" -input /sufiles/'{0}' -output /seismicdata/mr_files/'{1}'/ -cwproot {1} 
```

# python - pandas.read_csv() 空（默认）值的奇怪行为

> ID：14237749
> 
> 赞同：2
> 
> 时间：2013-01-09T14:44:49.013
> 
> 标签：python, csv, pandas

我有以下输入 trans.csv 文件：

```
Date,Currenncy,Symbol,Type,Units,UnitPrice,Cost,Tax
2012-03-14,USD,AAPL,BUY,1000
2012-05-12,USD,SBUX,SELL,500 
```

UnitPrice、Cost 和 Tax 字段是可选的。如果未指定它们，我希望 DataFrame 单元格中出现 NaN。

我阅读了 csv 文件：

```
t = pandas.read_csv('trans.csv', parse_dates=True, index_col=0) 
```

并得到以下结果：

```
 Currenncy Symbol  Type  Units   UnitPrice       Cost       Tax
Date                                                                     
2012-03-14       USD   AAPL   BUY   1000  2012-05-12  012-05-12  12-05-12
2012-02-05       USD   SBUX  SELL    500         NaN        NaN       NaN 
```

为什么第一行没有 NaN 并且日期重复？为未指定的字段获取 NaN 的任何解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:54:11.847

您的 CSV 文件格式不正确。我在 Pandas 0.10 中得到了与您相同的答案，虽然我承认这确实非常非常奇怪，但您不应该向它提供格式错误的数据。

```
Date,Currenncy,Symbol,Type,Units,UnitPrice,Cost,Tax
2012-03-14,USD,AAPL,BUY,1000,,,
2012-05-12,USD,SBUX,SELL,500,,, 
```

返回预期的

```
>>> import pandas as pd
>>> t = pd.read_csv('pandas_test', parse_dates=True, index_col=0)
>>> t
           Currenncy Symbol  Type  Units  UnitPrice  Cost  Tax
Date                                                          
2012-03-14       USD   AAPL   BUY   1000        NaN   NaN  NaN
2012-05-12       USD   SBUX  SELL    500        NaN   NaN  NaN 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:15:59.760

这是一种可以处理更多情况的方法（当 , 等中有一些数据时`UnitCost`）`Cost`。

```
In [1]: df = pd.read_csv('trans.csv', header=None)

In [2]: df.columns = df.ix[0]

In [3]: df[1:].set_index('Date')
Out[3]: 
           Currenncy Symbol  Type Units UnitPrice Cost  Tax
Date                                                       
2012-03-14       USD   AAPL   BUY  1000       NaN  NaN  NaN
2012-05-12       USD   SBUX  SELL   500       NaN  NaN  NaN
2012-05-12       USD   SBUX  SELL   500       NaN  NaN  NaN 
```

值得注意的是，这些列的 dtype 将是`object`.

*但是，我认为这应该被抓住，[`to_csv`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.to_csv.html)所以我[在 github 上发布了一个问题](https://github.com/pydata/pandas/issues/2668)。*

# mysql - 加载数据文件

> ID：14237750
> 
> 赞同：0
> 
> 时间：2013-01-09T14:44:48.920
> 
> 标签：mysql

我有一个名为*id、password*和*name*`class`的 3 个字段的表。

 **在这里，该表填充了 2 列*id*和*password*。`name column`我想`load data infile`在`MySql`.

请给我一个想法，使用上述表格的命令仅从`name column`表格的第一行插入。`load data infile``class`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:02:41.947

我的文件.txt：

```
john
"Betty Sue"
Felix
"Santa Claus" 
```

询问：

```
LOAD DATA INFILE 'myfile.txt' 
  FIELDS OPTIONALLY ENCLOSED BY '"'
INTO TABLE class(name); 
```**

# wysiwyg - 我在哪里可以获得 Google Blogger 的所见即所得编辑器？

> ID：14237753
> 
> 赞同：-1
> 
> 时间：2013-01-09T14:45:00.920
> 
> 标签：wysiwyg, blogger

我正在开发一个 Windows 8 博客应用程序，我搜索了不同的 WYSIWYG 编辑器，但没有一个像博客文章编辑器那样好和干净，为了完成这个项目，我需要博客文章编辑器源代码。谁能告诉我在哪里得到它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:56:24.897

我不认为 Blogger 是开源的，您可能必须使用替代方案。

我之前使用过的一个不错的选择是 CKEditor，但这里没有提到一些：

[WSYIWYG 文本区域编辑器的 CKEditor 替代品](https://stackoverflow.com/questions/12719241/alternatives-to-ckeditor-for-wsyiwyg-text-area-editor)

# sql - T-SQL 和 WHERE LIKE %Parameter% 子句

> ID：14237755
> 
> 赞同：94
> 
> 时间：2013-01-09T14:45:03.693
> 
> 标签：sql, sql-server-2008, tsql

我试图编写一个使用 WHERE LIKE '%text%' 子句的语句，但是当我尝试使用文本参数时没有收到结果。例如，这有效：

```
SELECT Employee WHERE LastName LIKE '%ning%' 
```

这将返回用户 Flenning、Manning、Ningle 等。但此语句不会：

```
DECLARE @LastName varchar(max)
SET @LastName = 'ning'
SELECT Employee WHERE LastName LIKE '%@LastName%' 
```

未找到结果。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-01-09T14:46:03.747

它应该是：

```
...
WHERE LastName LIKE '%' + @LastName + '%'; 
```

代替：

```
...
WHERE LastName LIKE '%@LastName%' 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-02T14:50:31.617

正确的答案是，因为`'%'`-sign 是搜索表达式的一部分，所以它应该是 VALUE 的一部分，因此无论您设置`@LastName`什么（无论是来自编程语言还是来自 TSQL），都应该将其设置为`'%' + [userinput] + '%'`

或者，在您的示例中：

```
DECLARE @LastName varchar(max)
SET @LastName = 'ning'
SELECT Employee WHERE LastName LIKE '%' + @LastName + '%' 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-07-31T07:19:40.363

你可以试试这个，用过的**CONCAT**

```
WHERE LastName LIKE Concat('%',@LastName,'%') 
```

# javascript - JS/JQ 中一个简单的“丢失 $this”范围问题 .. 解释一下？

> ID：14237758
> 
> 赞同：0
> 
> 时间：2013-01-09T14:45:13.833
> 
> 标签：javascript, jquery

我正在尝试提高我的 JS 技能，并且我已经将一堆代码重写为命名空间对象文字（我认为。）但是现在我遇到了一个与“this”相关的问题。帮我理解？

这是缩写代码。

```
var MYAPP = {

    init: function(){
        $(document).on("click",".showLove", MYAPP.showLove);
    },
    showLove: function(){
         var thisId = MYAPP.findId();
         $.post(//// do AJAXy stuff using thisId);
    },
    findId: function(){
        var thisClass = $(this).attr('class');
        var thisIdPos = thisClass.indexOf("id-")+3;
        var thisId = thisClass.substr(thisIdPos, 3);
        return thisId;
    }
} 
```

所以我相信你可能看到了这个问题。在 findId 函数中 $this 是未定义的，我得到一个错误。早些时候，我在 showLove 中有 findId 逻辑，一切正常。我将 findId 逻辑移到它自己的方法中，因为它在几个不同的地方使用。

所以让我问这个 -> 为什么 $(this) 指向 'showLove' 中的正确元素 .. 但不在 'findId' 中？由于从“showLove”内部调用“findId”，它不应该访问相同的变量，包括$（this）吗？这是我的第一个“自我=这个”情况吗？

我知道这是一个基本问题，但如果有人可以帮助我理解，我会......呃......'showLove'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:47:44.237

如果你想保留这个，你需要做

```
MYAPP.findId.call(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:48:39.420

`this`在 showLove 来自它的实例化`$(document).on("click",".showLove", MYAPP.showLove);`

`var thisId = MYAPP.findId(this);`// 传递给函数

`findId: function(thisPassed){`并以该名称引用它

至少是一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:48:41.973

您正在传递`MYAPP.showLove`给 jQuery 并说“将此函数作为单击处理程序附加到文档”。

当您执行此操作时，会`MYAPP.showLove` *忘记*它已附加到`MYAPP`，因为您只传递了*function*，而没有引用命名空间。

因此，当`showLove`作为点击处理程序执行时，`this`不再是`MYAPP`. 通常，当你从一个对象中分离一个函数时，`this`就会变成要么`window`或`undefined`（ES5）。但是，jQuery 决定`this`应该是`.showLove`被点击的元素，使用`call()`或`apply()`。

但是，当您调用`MYAPP.findId()`时`showLove`，`this`仍设置为`MYAPP`; 因为那`findId`是附加的（您正在调用方法*）* `MYAPP`。

要解决这个问题（没有双关语），您可以将值传递`this`给`findId`（首选，IMO），或使用`call()`/ `apply()`。

```
var MYAPP = {

    init: function(){
        $(document).on("click",".showLove", MYAPP.showLove);
    },
    showLove: function(){
         var thisId = MYAPP.findId(this);
         $.post(//// do AJAXy stuff using thisId);
    },
    findId: function(which){
        var thisClass = $(which).attr('class');
        var thisIdPos = thisClass.indexOf("id-")+3;
        var thisId = thisClass.substr(thisIdPos, 3);
        return thisId;
    }
} 
```

或者：

```
var MYAPP = {

    init: function(){
        $(document).on("click",".showLove", MYAPP.showLove);
    },
    showLove: function(){
         var thisId = MYAPP.findId().call(this);
         $.post(//// do AJAXy stuff using thisId);
    },
    findId: function(){
        var thisClass = $(this).attr('class');
        var thisIdPos = thisClass.indexOf("id-")+3;
        var thisId = thisClass.substr(thisIdPos, 3);
        return thisId;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T14:52:53.050

我认为问题在于您如何调用**findId**函数。每当你这样做：

```
MYAPP.findId() 
```

您正在静态引用该函数，该函数将在没有对象上下文的情况下执行。如果要保留该上下文，则需要像这样调用它：

```
MYAPP.findId.call(this) 
```

通过这样做，您在 findId 中的**this**变量将绑定到您作为参数传递给调用函数的任何对象（在这种情况下，当前的**this**，因此您保留该引用）

另一方面：我建议你看看 underscore.js 的绑定函数，它是一个非常有用的助手！

# delphi - DWScript：如何在调用后获得结果

> ID：14237759
> 
> 赞同：6
> 
> 时间：2013-01-09T14:45:16.657
> 
> 标签：delphi, dwscript

好吧，我对 DWScript 完全陌生。现在我对它的能力很着迷，但是尽管我阅读了随附的 wiki 中的所有页面以及此处的问题/答案，但在从 Delphi 调用函数后，我仍然找不到提取结果的方法，如下所示：

```
 func := m_dwsExec.info.Func[funcname];
  func.call(params); 
```

然后我被困住了：`exec.result.toString`什么也没给我。只要我看到我`Result`在 exec 对象中没有，这就是为什么从脚本堆栈中清除项目时结果被删除和丢失的原因。请告诉我完成这个简单任务的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T15:26:06.080

编辑：

正如 Eric Grange 在下面的评论中所说，最佳实践是这样的：

```
 func := m_dwsExec.info.Func[funcname];
  info := func.call(params);
  funcresult := info.ValueAsString; //or Value, ValueAsInteger, etc. 
```

原答案：

好吧，我找到了答案——缺失的结果位于`data`返回`IInfo`对象的属性中：

```
 func := m_dwsExec.info.Func[funcname];
  info := func.call(params);
  funcresult := info.data[0] 
```

# c# - 现有 COM 参考或添加新参考时出错

> ID：14237766
> 
> 赞同：5
> 
> 时间：2013-01-09T14:45:44.947
> 
> 标签：c#, visual-studio-2010, reference, assemblies

让我先说我不熟悉 COM 引用，并且我在 Windows 7 64 位机器上使用 VS2010。今天早上，我从 TFS 中删除了一个现有项目。然后我尝试构建项目并收到此错误：

> 找不到类型或命名空间名称“validatecom”（您是否缺少 using 指令或程序集引用？）

我得到这个警告：

> 无法获取类型库“d0b51ccc-aa31-47a1-b3ff-b8ed71c522a1”1.0 版的文件路径。图书馆未注册。（来自 HRESULT 的异常：0x8002801D (TYPE_E_LIBNOTREGISTERED)）

当我检查引用时，果然，我在解决方案中唯一的 COM 引用中看到了黄色感叹号。经过一些徒劳的测试，我决定尝试添加一个新的 COM 引用。

添加参考 -> COM 选项卡 -> 随机 M$ 库

这会产生一个带有黄色感叹号的新引用。我尝试构建项目以查看是否出现相同的错误。这次我收到此错误：

> 遇到了 GUID 为“23d736f1-acbc-11d3-b0e8-00104bff2710”的程序集的多个版本。尝试预导入这些程序集之一。

我得到这个警告：

> 找不到类型库“ADODB”的包装程序集。

我不知道这两个错误是否相关。如果不是，那么解决第一个肯定优先于最后一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:44:18.153

要检查的另一件事是您的 COM 库是否已在 Windows 的注册表中注册，您可以这样做：

> %windir%\system32\regsvr32 YourComLibrary.dll

接下来，您需要创建一个互操作 .NET DLL，该 DLL 包含您尝试在 C# 项目中引用的 COM 库。执行此操作的方法是运行**类型库导入器**实用程序（使用 Visual Studio 2010 命令提示符）：

> tlbimp.exe YourComLibrary.dll /out:YourWrappedComLibrary.dll

至于 ADODB 参考，您可能需要参考**Primary Interop Assembly for ADO (ADODB)**。这可以在您的机器上的以下位置找到。添加对此的引用，您应该会很好。

> C:\Program Files (x86)\Microsoft.NET\Primary Interop Assemblies\adodb.dll

希望以上内容可以帮助您。自从我弄乱COM以来已经太久了……记忆可能有点模糊。享受！

# c++ - 建议 C 正则表达式扫描器（流阅读器）

> ID：14237772
> 
> 赞同：1
> 
> 时间：2013-01-09T14:45:55.827
> 
> 标签：c++, c, regex, parsing

我正在寻找一个 C/C++ 中的正则表达式库，它不提供通用 API regex(string, pattern)，而是允许构造一个有限状态机（基于模式），我只想调用

```
fsm = create_fsm();
add_pattern(fsm, "foo", hookFoo);
add_pattern(fsm, "bar", hookBar);
compile_fsm(fsm);
while ((c = fgetc(file) != EOF) {
   next_char(fsm, c);
} 
```

如果模式匹配，hookFoo(match start, match end) 会被调用吗？或类似的东西，这只是概念。我想在很长很长的行中搜索多个正则表达式。理想情况下，如果它也可以反向填充以进行向后搜索。由于表达式仅在运行时已知，Flex（或类似的解析器生成器）不是一个选项。

**编辑：** 虽然我已将 lexertl 标记为正确答案，但它似乎不是我想要的。它需要返回流；我不想使用内存来记住过去（除了恒定大小，例如记住最后一个字符）。想象一下，当我调用 ++iterator 时，所有其他迭代器都应该失效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:18:01.287

看起来[lexertl](http://www.benhanson.net/lexertl.html)对您的要求有很长的路要走。它支持在运行时添加正则表达式和“可重新启动”词法分析器。它会为每个公认的“规则”给你一个令牌。

[boost::spirit::lex](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/lex.html)使用 lexertl 作为默认实现，它添加了语义操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:10:08.847

`#include<regex.h>`您可以使用like提供的函数开发自己的函数`regcomp`，并且`regexec`

例子

```
int  match_patterns(char *pch,char *pattern)
{
    regex_t             *regex;
    regmatch_t          *result;
    int                 err_no = 0;
    int                 start = 0;

    regex = (regex_t *) calloc(1,sizeof(regex_t));
    if((err_no = regcomp(regex, pattern, REG_EXTENDED)) != 0)
    {
        size_t          length;
        char            *buffer;
        length = regerror (err_no, regex, NULL, 0);
        buffer = malloc(length);
        regerror (err_no, regex, buffer, length);
        free(buffer);
        regfree(regex);
        return -1; //error
    }
    result = (regmatch_t *) calloc(1,sizeof(regmatch_t));
    if(result == NULL)
    {
        return -1; //error
    }
    while(regexec(regex, pch+start, 1, result, 0) == 0)
    {
        start +=result->rm_eo;
    }
    regfree(regex);
    free(regex);
    if((result->rm_so == 0)&&(result->rm_eo == strlen(pch)))
    {
        return 0; //OK
    }
    return -1; //error
} 
```

`pch`如果字符串与正则表达式模式匹配，此函数将返回 0，`pattern`否则返回 -1。

例子

```
int main()
{
    if (match_patterns("1234.abc", "[0-9]+.[a-d]+")==0)
        printf("OK!\n");
    else
        printf("NOK!\n");

} 
```

在`match_patterns()`这种情况下将返回 0

如果您使用此功能，请不要忘记添加以下 iclude：

```
#include<regex.h>
#include<string.h> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-06T20:43:37.777

有来自 Intel 的 hyperscan 库。它提供了 api 来搜索数据流中的多个正则表达式。请参阅[http://intel.github.io/hyperscan/dev-reference/runtime.html#streaming-mode](http://intel.github.io/hyperscan/dev-reference/runtime.html#streaming-mode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T22:15:30.407

经过一番谷歌搜索后，我发现了 RE2 库[http://code.google.com/p/re2/](http://code.google.com/p/re2/) - 这表明它是一种快速的实现（速度与 grep 或 awk 相当），并在背景中有正确的理论并且可以提供内存限制。RE2::FindAndConsume 似乎是正确的 API。

**编辑：**不（再次）。FindAndConsume 只在一个字符串中找到增量匹配，但不允许传递数据流的多个块 :( 顺便说一下，当找到匹配时，机器会返回查看匹配实际开始的位置（尽管这不是那么大问题，因为它不应该在前向搜索期间这样做，例如**lexertl**所做的。

# java - Android 拖动/动画

> ID：14237777
> 
> 赞同：0
> 
> 时间：2013-01-09T14:46:13.143
> 
> 标签：java, android

我想制作一个页面，您可以在其中拖动图像（并播放一些动画）

所以我正在做某事（我认为这并不理想 - 所以我需要你的帮助）：

我的代码：

```
ButtonIMG = BitmapFactory.decodeResource(getResources(), R.drawable.ButtonIMG );
Canvas c = null;
while (true) {
    if (!holder.getSurface().isValid()) {
        continue;
    }
    if (gifCounter<10){
        animataion = BitmapFactory.decodeResource(getResources(), R.drawable.animataion1);
        gifCounter++;
    }
    if (gifCounter<20 && gifCounter>=10){
        animataion = BitmapFactory.decodeResource(getResources(), R.drawable.animataion2);
        gifCounter++;
    }
    if (gifCounter<30 && gifCounter>=20){
        animataion = BitmapFactory.decodeResource(getResources(), R.drawable.animataion3);
        gifCounter++;
    }
    if (gifCounter>=30){
        gifCounter=0;
    }
    c = holder.lockCanvas();
    c.drawARGB(255, 220, 220, 220);
    c.drawBitmap(ButtonIMG, x, y, null);
    c.drawBitmap(animataion, 100, 100, null);
} 
```

. . .

```
public boolean onTouch(View v, MotionEvent me){
    switch (me.getAction()) {
        case MotionEvent.ACTION_DOWN:
            x = me.getX();
            y = me.getY();
            break;
    }
} 
```

# iphone - 如何将 NSArray 存储在辅助存储上？

> ID：14237782
> 
> 赞同：1
> 
> 时间：2013-01-09T14:46:33.707
> 
> 标签：iphone, ios, nsarray

我是 iOS 新手，我想将 NSArray 中的值存储到辅助存储中，以便我以后可以访问它，该数组是来自 Web 服务的大响应，我想解析并显示它，解析数组不是有效的并存储在sqlite DB中，我想要另一种方法来保存该数组，可能在文本文件中，这样我就无法从文本文件中检索数据并通过我的解析函数解析它。我们能做到吗？

请给我建议

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:50:58.620

要将数组保存到文本文件，您可以使用该方法`– writeToFile:atomically:`，有关更多信息，请参阅该函数的文档[。](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/writeToFile%3aatomically%3a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:16:59.980

要从 NSUserDefaults 中检索“yourArray”.. 您可以在控制器中编写：

```
-(id) initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if (self) {

        yourArray = [[NSMutableArray alloc] init];
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

        if (! [defaults objectForKey: [NSString stringWithFormat:@"sample"]])
        {
            //if nothing saved
            //... do whatever you want

            //Use this array if there is nothing saved
            NSLog(@"no saved array");
            NSArray *modelArray1 = @[@"New York", @"London", @"Paris"];
            yourArray=[modelArray1 mutableCopy];
        }
        else{
            NSLog(@"existing array");
            NSData *myDecodedObject = [defaults objectForKey: [NSString stringWithFormat:@"sample"]];
            yourArray =[NSKeyedUnarchiver unarchiveObjectWithData: myDecodedObject];
            NSLog(@"decode array init=%u", yourArray.count);
        }
            }
    return self;
} 
```

为了节省..

```
-(void)saving
{
    NSUserDefaults *userDefault=[NSUserDefaults standardUserDefaults];
    NSData *myEncodedObject = [NSKeyedArchiver archivedDataWithRootObject:yourArray];
    [userDefault setObject:myEncodedObject forKey:[NSString stringWithFormat:@"sample"]];
    [userDefault synchronize];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:49:49.870

最好的选择是`[NSArray writeToFile:atomically:]`数组是否包含简单对象。要获取数组，请使用 NSArray 的`arrayWithContentsOfFile:`（创建并返回一个数组，其中包含由给定路径指定的文件的内容。+ (id)arrayWithContentsOfFile:(NSString *)aPath)

# regex - 如何排除正则表达式中的结束字符

> ID：14237783
> 
> 赞同：1
> 
> 时间：2013-01-09T14:46:35.250
> 
> 标签：regex, regex-negation

我有这个问题：来自这个`<html>`标签的列表：

```
<td class="pthtdd"><a target="_blank" href="http://address.info">address.info</a>
<td class="pthtdd"><a target="_blank" href="http://address1.com">address1.com</a>
<td class="pthtdd"><a target="_blank" href="http://address2.de">address2.de</a>
<td class="pthtdd"><a target="_blank" href="http://address3.co.uk/">address3.co.uk</a> 
```

我只想用正则表达式选择`http://address.info`或`address1.com`或`address2.de ecc`。我已经写了这个正则表达式：`http:.{1,}?"`但`"`最后有。我可以选择所有没有`"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:49:29.837

你可以试试这个：

`http:[^"]+`

`[^"]`将匹配任何字符，但`"`.

# sql-server - 在存储过程 [MSSQL] 中查找和替换值

> ID：14237784
> 
> 赞同：-2
> 
> 时间：2013-01-09T14:46:49.527
> 
> 标签：sql-server, stored-procedures

我有一个临时表`#temp321`，其中包含如下信息：

```
id|sourceFields|DestinationFields
---------------------------------
1 |c2          |c102
-------------------------
2 | c4         |c104
----------------------- 
```

我也有一个where子句到一个变量中`@where_value`，比如：

```
c1='v11' and c2='v22' and c3='v33' and c4='v44' 
```

现在我只需要将目的地字段信息放入 @where_value 。

@where_value 的预期结果是：`c102='v22' and c104='v44'`

我怎么能得到它。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:01:33.487

```
Select @Var=@Var + CAST(DestinationFields as Varchar(30))+'='+ dbo.F_GetValue4Key(@where_value,sourceFields) +' AND '
from #temp321

Select @Var= SubString(@var,1,LEN(@var)-4) 
```

假设您的 Wherestring 看起来像：

```
Select @where_value ='c1=''v11'' and c2=''v22'' and c3=''v33'' and c4=''v44''' 
```

使用这个功能

```
Create Function F_GetValue4Key(@p varchar(2000),@k varchar(2000)) Returns Varchar(50) as
begin
  Declare @Result Varchar(50)
  Declare @pos int
  Declare @pos1 int
  Declare @pos2 int
  Select @pos=CHARINDEX( @k+'=',@p)
  Select @pos1=CHARINDEX( '''',@p,@pos)
  Select @pos2=CHARINDEX( '''',@p,@pos1+1)

  Select @Result=SUBSTRING(@p,@pos1,@pos2-@pos1+1)
  Return @Result
end 
```

# ios - 适用于 iOS 的 SDL 库

> ID：14237786
> 
> 赞同：2
> 
> 时间：2013-01-09T14:47:00.740
> 
> 标签：ios, sdl, sdl-2

我正在尝试将 SDL 2 用于 iOS 应用程序。我正在构建 libSDL2.a 并将其添加到我的项目中。此外，我将所有标题添加到应用程序项目中。对于初始化，我使用下一个代码：

```
/* initialize SDL */ 
if (SDL_Init(SDL_INIT_VIDEO) < 0) { 
        fatalError("Could not initialize SDL"); 
} 
window = SDL_CreateWindow(NULL, 0, 0, m_curScreenResolutions.deviceScreenResolution.size.height, 
                              m_curScreenResolutions.deviceScreenResolution.size.width, 
                              SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN | 
                              SDL_WINDOW_BORDERLESS); 

    renderer = SDL_CreateRenderer(window, -1, 0); 
```

然后为了绘制我的图像，我使用下一个代码：

```
struct displayImage 
{ 
    float x, y;                
    SDL_Texture *texture; 
    long width, height; 

}; 

SDL_Rect srcRect; 
    SDL_Rect dstRect; 

    for (int i = 0; i < [m_imagesForDisplaying count]; i++) 
    { 
        NSValue *value = [m_imagesForDisplaying objectAtIndex:i]; 
        displayImage preImage; 
        [value getValue:&preImage]; 

        srcRect.x = 0; 
        srcRect.y = 0; 
        srcRect.w = preImage.width; 
        srcRect.h = preImage.height; 

        dstRect.w = preImage.width; 
        dstRect.h = preImage.height; 
        dstRect.x = preImage.x; 
        dstRect.y = preImage.y; 
        SDL_RenderCopy(inputRenderer, preImage.texture, &srcRect, &dstRect); 
    } 
    /* update screen */ 
    SDL_RenderPresent(inputRenderer); 
```

图片绘制得很完美，但在绘制后我看不到任何 iOS 原生对象（`UIView`,`UIButton`等），没有应用程序 UI，即使我以编程方式添加这些对象也是如此。我尝试在创建 SDL 的窗口 + 渲染器后添加 UIKit 控件。例如，对于添加 UIKit 控件，`UIView`我使用下一个代码：

```
UIView* newView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)]; 
newView.backgroundColor = [UIColor yellowColor]; 
[self.view addSubView:newView]; 
```

哪里 self 是 UIViewController。

然后我尝试`UIWindow`从`SDL_SysWMinfo`代码中获取：

```
// Retrieve SDL's root UIViewController (iOS only!) 
// This function is completely NOT guaranteed to work in the future. 
// Use it at your own risk! 
UIViewController * GetSDLViewController(SDL_Window * sdlWindow) 
{ 
    SDL_SysWMinfo systemWindowInfo; 
    SDL_VERSION(&systemWindowInfo.version); 
    if ( ! SDL_GetWindowWMInfo(sdlWindow, &systemWindowInfo)) { 
        // consider doing some kind of error handling here 
        return nil; 
    } 
    UIWindow * appWindow = systemWindowInfo.info.uikit.window; 
    UIViewController * rootViewController = appWindow.rootViewController; 
    return rootViewController; 
} 
```

但是当我尝试初始化时`SDL_SysWMinfo`我有一个嵌套问题： [https ://docs.google.com/open?id=0B1IEde1HB7cUSVE1NGpVNDRHTUU](https://docs.google.com/open?id=0B1IEde1HB7cUSVE1NGpVNDRHTUU)

有人有什么想法吗？

# python - Python 2.7 - 检查单元素元组列表中的二元组中的第一个元素

> ID：14237789
> 
> 赞同：2
> 
> 时间：2013-01-09T14:47:06.707
> 
> 标签：python, python-2.7

我有两个元组列表。

第一个列表有包含两个元素的元组：

```
list_a = [('a','apple'), ('b','banana'), ('c','cherry')] 
```

第二个列表包含只有一个元素的元组：

```
list_b = [('d',), ('e',), ('a',)] 
```

我需要删除 list_a 中的元组，其中元组的第一个元素包含在 list_b 中。所以目标是 list_a 被渲染：

```
list_a = [('b','banana'), ('c','cherry')] 
```

我试过了：

```
for la in list_a:
   if la[0] in list_b:
      list_a.remove(la) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T14:48:38.577

您不能从正在循环的列表中删除元素。改用列表推导：

```
list_a = [la for la in list_a if la[:1] not in list_b] 
```

请注意，我们`la[:1]`使用（单个元素）元组进行测试；`la[0]`只是单个字符串。

如果您必须经常这样做，请考虑使用 set for`list_b`代替：

```
set_b = set(list_b) 
```

集合中的查找需要恒定的时间，而列表成员资格测试的线性时间。

# ruby - Rails 3.2.9 中的 Rails 控制台命令错误

> ID：14237793
> 
> 赞同：0
> 
> 时间：2013-01-09T14:47:14.390
> 
> 标签：ruby, ruby-on-rails-3.2

我有 Rails 3.2.9 和 Ruby1.9.3p327，当我尝试运行命令“rails console”时，它返回以下错误：

```
/home/humberto/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/irb/completion.rb:9:in      `require': cannot load such file -- readline (LoadError) 
```

所有有关此错误的帖子都提出了卸载和重新安装 ruby​​ 的解决方案，但这对我不起作用。有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:11:14.003

安装 libreadline6 libreadline6-dev 库。在 ubuntu 上使用：`sudo apt-get install libreadline6 libreadline6-dev` 然后重新安装 ruby​​。我建议`rvm cleanup all`在重新安装 ruby​​ 之前运行。以防万一。

另请查看带有工作答案的类似问题。[在 ubuntu 上使用 rvm 安装 ruby​​ 1.9.3](https://stackoverflow.com/questions/8920574/install-ruby-1-9-3-using-rvm-on-ubuntu)

# javascript - addHitRegion 任何工作示例？

> ID：14237794
> 
> 赞同：0
> 
> 时间：2013-01-09T14:47:17.267
> 
> 标签：javascript, html5-canvas

在画布上使用 addHitRegion 进行点击检测无法找到或创建任何工作示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:51:10.443

好像这个功能还没有实现。但是，我发现有用的链接可以做同样的事情。

[http://shifteleven.com/articles/2012/01/08/mouse-clicks-for-html5-cavas-entities-via-paths](http://shifteleven.com/articles/2012/01/08/mouse-clicks-for-html5-cavas-entities-via-paths)

# python - 停止异步作业执行

> ID：14237797
> 
> 赞同：0
> 
> 时间：2013-01-09T14:47:23.610
> 
> 标签：python, multithreading, asynchronous

我有一个使用该`multiprocessing`模块的虚拟进程（=线程）池。在这个池中，我异步调用了一个函数`process_job()`。该函数`process_job`创建另一个进程池，使用这个新池做一些事情，等到新池中的虚拟进程完成然后返回。

`process_job()`现在，如果用户愿意，我希望能够停止执行。一个想法是在“新”池上使用[终止函数。](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.terminate)不幸的是，为了这样做，我必须将这个“新”池暴露给环境，以便调用终止。还有其他更干净的解决方案吗？

# jquery - 这个 jquery 每个都是闭包吗？如果是这样，我该如何解决这个问题？

> ID：14237798
> 
> 赞同：0
> 
> 时间：2013-01-09T14:47:29.217
> 
> 标签：jquery

我正在制作动态表单，而用户从我的选择选项中选择菜单。在他们从我的选择元素中选择选项后，我会生成一个包含所需元素的表单。一切正常。

完成后，我将 from 发送到另一个函数进行验证。在验证函数中，我使用`$.each`函数从表单中获取元素。

问题是我第一次得到“安慰”表格一次，第二次我“安慰”新表格两次（但形式相同），当我发送第 3 表格以运行并放入每个循环到控制台时，我得到了 3 次相同的第三种形式的安慰......

我不想安慰或检查第一个表格为 1 次，第二个表格为 2 次，3 次到 3 次处理。

我该如何解决这个问题？

我在遇到问题的地方放置了一些功能。如果需要完整的功能让我提供。

```
var validateForm = function(form){
     console.log('hi')
     var  submit = form.find(':submit'),
          text = form.find(':text'),
          select = form.find('select'),
          checkBox = form.find('checkbox'),
          file = form.find(':file'),
          textarea = form.find('textarea');

          console.log(form.length);

     form.on('click', function(event){

          console.log(event.target);

          for(i=0;i<form.length;i++){
               console.log($(this),i);     
          }
          return false;
     })
} 
```

第二次或这样的循环控制台（2次）：

```
<input id="salesSubmit" type="submit" value="Send" name="salesSubmit">
ecomNation.js (line 16)

Object[fieldset]0

ecomNation.js (line 19)
<input id="salesSubmit" type="submit" value="Send" name="salesSubmit">
ecomNation.js (line 16)

Object[fieldset] 0 
```

这里有什么问题？我怎样才能解决这个问题？

我的整个功能（99%）在这里：

```
var validateForm = function(form){
     console.log('hi')
     var  submit = form.find(':submit'),
          text = form.find(':text'),
          select = form.find('select'),
          checkBox = form.find(':checkbox'),
          file = form.find(':file'),
          textarea = form.find('textarea');

          console.log(form.length);

          form.on('click', function(event){

      console.log(event.target);

      for(i=0;i<form.length;i++){
           console.log($(this),i);     
      }
      return false;
 })

}

var enquireyForm = function(option,form){

     var  contactForm = $('#contactForm'),
          fieldSet = contactForm.find('fieldset:last'),
          postUrl = '';

     var generateForm = function(fields){

          var optionalForm = "";

          $.each(fields, function(i,field){
               optionalForm += field.label ? "<label>"+field.label+"</label>" : '',
               optionalForm += field.type === 'text' ? '<input id='+field.id+' name='+field.name+' type=text>' :
                               field.type === 'textarea' ? '<textarea id='+field.id+' name='+field.name+' ></textarea>' :
                               field.type === 'checkbox' ? '<input id='+field.id+' name='+field.name+'  type=checkbox>' :
                               field.type === 'submit' ? '<input id='+field.id+' name='+field.name+'  value='+field.value+' type=submit>' :
                               field.type === 'file' ? '<input id='+field.id+' name='+field.name+' type=file>':'';
               optionalForm += field.note ? "<span>"+field.note+"</span>" : '';

               postUrl = field.url ? field.url : '';

          })
          contactForm.attr('action',postUrl);
          return optionalForm;
     }

     option.on('change',function(){
          fieldSet.empty();
          if(this.selectedIndex !== 0){
               validateForm(fieldSet.append(generateForm(form[$(this).val()])));
          }
     })

} 
```

我的 HTML 生成表单：

```
<form id="contactForm" action="" method="post">
    <legend>Inquiry Form</legend>
    <fieldset>
        <label>Type of Inquiry*</label>
        <select id='enquiry'>
            <option selected='selected' value=''>Please select</option>
            <option value='general'>General</option>
            <option value='sales'>Sales</option>
            <option value='careers'>Careers</option>
        </select>
    </fieldset>
    <fieldset><!-- selected form fields goes here --></fieldset>
</form> 
```

# java - 使用 CXF 测试 Web 服务连接性

> ID：14237799
> 
> 赞同：2
> 
> 时间：2013-01-09T14:47:30.623
> 
> 标签：java, web-services, connection, cxf

我有一个通过 Swing 客户端使用的 CXF Web 服务。首先，我创建一个`JaxWsProxyFactoryBean`，然后创建 JAX WS 代理。此时，我想测试客户端是否可以正确地向 Web 服务发送消息。我知道 HTTP 是一种无状态协议，因此它在其层不使用任何连接。到目前为止，我一直使用 Web 服务定义的 ping() 方法，以便客户端测试连接性。

这样做的正确方法是什么？我不认为向 API 添加虚拟方法只是为了测试连接性是最好的解决方案。通过代理是否有 CXF 方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:21:26.827

你有几个选项可以这样做：

1.  我假设您的 Web 服务是 SOAP Web 服务，那么您可以针对 WSDL 文档发出 HTTP HEAD 请求。
2.  在 Web 服务中实现一个特殊的“ping”操作 (SOAP)。（可能你已经有了）

如果您选择第一个选项 - 发出 HTTP HEAD 请求，您可以使用以下代码来实现：

```
public static boolean exists(String webServiceUrl){
    try {
        HttpURLConnection.setFollowRedirects(false);
        HttpURLConnection connection = (HttpURLConnection) new URL(webServiceUrl).openConnection();
        connection.setRequestMethod("HEAD");
        return connection.getResponseCode() == HttpURLConnection.HTTP_OK;
    } catch (Exception e) {      
        return false;
    }
} 
```

如果您要对 Web 服务执行 HEAD 请求，这意味着该 Web 服务是可访问的。

# .htaccess - .htaccess 重定向到“https://www”

> ID：14237805
> 
> 赞同：1
> 
> 时间：2013-01-09T14:47:52.083
> 
> 标签：.htaccess, redirect, ssl, web

我正在寻找一个 .htaccess 配置，它将所有请求重定向到我的站点到`https://www`.

那么用户是否访问：

```
www.example.com
http://example.com
http://www.example.com
https://example.com 
```

他们总是会在：

```
https://www.example.com 
```

这是我目前在 .htaccess 文件中使用的内容，但是如果用户访问它，它不会重定向：

```
www.example.com 
```

这是我当前的文件内容：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example\.com [NC]
RewriteRule (.*) https://www.example.com/$1 [R=301,L] 
```

我已经尝试过 Stack Overflow 上提供的各种解决方案，但它们似乎都没有按预期工作，通常会导致重定向循环。希望有人会比我更好地理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:52:04.737

您的正则表达式`^example\.com`不匹配`www.example.com`。你可能想要类似`(^|\.)example\.com`or的东西`(^|\.)example\.com($|:)`。

**编辑**：

为了防止重定向循环添加

```
RewriteCond %{HTTPS} off 
```

在重写规则之前。

另请参阅[http://wiki.apache.org/httpd/RewriteHTTPToHTTPS](http://wiki.apache.org/httpd/RewriteHTTPToHTTPS)（他们使用`!=on`而不是`off`）和[http://wiki.apache.org/httpd/RedirectSSL](http://wiki.apache.org/httpd/RedirectSSL)

# ruby-on-rails - Ruby on Rails 中的模糊渲染错误

> ID：14237808
> 
> 赞同：1
> 
> 时间：2013-01-09T14:47:56.660
> 
> 标签：ruby-on-rails, ruby, mongrel

我正在开发一个用 Ruby 自定义编写的小型 CMS，该网站使用 Mongrel 运行。不幸的是，我对 Ruby 一点也不熟悉。网站的一部分最近停止工作（与任何更新无关，所以我不确定是什么原因）

检查 rails 日志中的“production.log”显示以下内容：

> ActionView::TemplateError (undefined method `name' for nil:NilClass) on line #25 of app/views/static/frontpage.rhtml: 22: <% Tabloid.find(:all, :limit => 4, :order = >'date DESC').each do |tabloid|%> 23: 24: <%= link_to tabloid.title, :controller => 'tabloid', :action => 'show', :id => tabloid.id % > 25:
> 
> <%= tabloid.date.strftime("%d of %B, %Y") %> By: <%= Profile.find(:first, :conditions => [ "user_id = ?", tabloid.user_id]) .name %> <%= Profile.find(:first, :conditions => [ "user_id = ?", tabloid.user_id]).surname %>
> 
> 26:
> 
> <%= RedCloth.new(truncate(tabloid.texto, 250)).to_html %>
> 
> 27: <% if tabloid.texto.size > 250 %> 28:
> 
> <%= link_to "阅读更多 >", :controller => 'tabloid', :action => 'show', :id => tabloid.id %>
> 
> ```
> app/views/static/frontpage.rhtml:25
> app/views/static/frontpage.rhtml:22:in `each'
> app/views/static/frontpage.rhtml:22
> /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_view/renderable.rb:39:in 
> ```
> 
> `send' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_view/renderable.rb:39:in` 渲染'/usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_view/template.rb:73:in `render_template' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_view/base.rb:256:in` 渲染'/usr/local/rubygems/gems/gems/actionpack-2.2.2/lib /action_view/base.rb:367:in `_render_with_layout' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_view/base.rb:254:in` render' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_controller/base.rb:1174:in `render_for_file' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_controller/base.rb:896:in` render_without_benchmark' /usr/local/rubygems/gems /gems/actionpack-2.2.2/lib/action_controller/benchmarking.rb:51:in `render' /usr/local/rubygems/gems/gems/activesupport-2.2.2/lib/active_support/core_ext/benchmark.rb:8:in` realtime' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_controller/benchmarking.rb:51:in `render' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_controller/base.rb:868:in` render_without_benchmark' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_controller/benchmarking.rb:51:in `render' /usr/local/rubygems/gems/gems/activesupport-2.2.2/lib/active_support/core_ext/benchmark.rb:8:in` realtime' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib /action_controller/benchmarking.rb:51： 在`render' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_controller/dispatcher.rb:122:in` dispatch' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_controller/dispatcher.rb:132:in `dispatch_cgi' /usr/local/rubygems/gems/gems/actionpack-2.2.2/lib/action_controller/dispatcher.rb:39:in` dispatch' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib /mongrel/rails.rb:76:in `process' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel/rails.rb:74:in` synchronize' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel/rails.rb:74:in `process' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel.rb:159:in`process_client' /usr/local/rubygems/gems /gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel.rb:158:in`process_client' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel.rb:285:in`initialize' /usr /local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel/configurator.rb:282:in` run' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel/configurator.rb ：281： `each' /usr/local/rubygems/gems/gems/mongrel-1.1.5/lib/mongrel/configurator.rb:281:in` 运行中'

等等。 Mongrel 日志实际上已经有一段时间没有更新了。关于问题是什么或我应该在哪里继续挖掘的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:52:28.980

`Profile.find(:first, :conditions => [ "user_id = ?", tabloid.user_id])`查询返回`nil`，因此他无法`name`对其执行

# php - paypal链式支付ipn不返回通知

> ID：14237809
> 
> 赞同：0
> 
> 时间：2013-01-09T14:47:58.037
> 
> 标签：php, paypal

我正在使用以下代码进行 PayPal 链式付款

```
require_once ("paypalplatform.php");
$amount=100;
$amt1=($amount * 10 )/100;
$amt2=$amount-$amt1;

$actionType         = "PAY";
$cancelUrl          = "http://test.com/test";

$returnUrl          = "http://test.com/test";
$currencyCode               = "USD";

$receiverEmailArray = array(
        'a***********_per@gmail.com',
        'a***********_biz@gmail.com'
        );

$receiverAmountArray = array(
        $amt1,
        $amt2
        );

$receiverPrimaryArray = array();

$receiverInvoiceIdArray = array(
        '1',
        '2'
        );

$senderEmail                    = "a************_per@gmail.com";        
$feesPayer                  = "";
$ipnNotificationUrl             = "http://test.com/paypal/buynow.php";
$memo                       = "";       
$pin                        = "agalameex";      
$preapprovalKey                 = "";       
$reverseAllParallelPaymentsOnError          = "";   
$trackingId                 = generateTrackingID();
$resArray = CallPay ($actionType, $cancelUrl, $returnUrl, $currencyCode, $receiverEmailArray,
                        $receiverAmountArray, $receiverPrimaryArray, $receiverInvoiceIdArray,
                        $feesPayer, $ipnNotificationUrl, $memo, $pin, $preapprovalKey,
                        $reverseAllParallelPaymentsOnError, $senderEmail, $trackingId
);

$ack = strtoupper($resArray["responseEnvelope.ack"]);
if($ack=="SUCCESS")
{
    if ("" == $preapprovalKey)
    {
        // redirect for web approval flow
        $cmd = "cmd=_ap-payment&paykey=" . urldecode($resArray["payKey"]);
        RedirectToPayPal ( $cmd );
    }
    else
    {
        // payKey is the key that you can use to identify the result from this Pay call
        $payKey = urldecode($resArray["payKey"]);
        // paymentExecStatus is the status of the payment
        $paymentExecStatus = urldecode($resArray["paymentExecStatus"]);
    }
} 
else  
{
    //Display a user friendly Error on the page using any of the following error information returned by PayPal
    //TODO - There can be more than 1 error, so check for "error(1).errorId", then "error(2).errorId", and so on until you find no more errors.
    $ErrorCode = urldecode($resArray["error(0).errorId"]);
    $ErrorMsg = urldecode($resArray["error(0).message"]);
    $ErrorDomain = urldecode($resArray["error(0).domain"]);
    $ErrorSeverity = urldecode($resArray["error(0).severity"]);
    $ErrorCategory = urldecode($resArray["error(0).category"]);

echo "Preapproval API call failed. ";
echo "Detailed Error Message: " . $ErrorMsg;
echo "Error Code: " . $ErrorCode;
echo "Error Severity: " . $ErrorSeverity;
echo "Error Domain: " . $ErrorDomain;
echo "Error Category: " . $ErrorCategory; 
```

}

在上面的代码中，除了返回通知 ($ipnNotificationUrl) 之外，一切都运行良好。付款完成后，我没有收到来自 $ipnNotificationUrl 的任何通知。任何机构都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:28:51.627

检查您在 PayPal 中的 IPN 历史记录。如果它显示除了 200 响应代码之外的任何内容，您就知道您的 IPN 侦听器有问题。

您可以检查您的 Web 服务器日志，以确切了解在命中脚本时发生的错误。

或者，您可以设置一个简单的 HTML 表单，其中包含与您期望从 PayPal 获得的内容相匹配的隐藏字段。然后你可以在浏览器中提交它，这样你就可以在屏幕上看到结果。

请记住，以这种方式进行测试会导致来自 PayPal 的响应无效，因为 IPN 数据并非来自他们的服务器，但您可以针对测试目的进行相应调整，修复您的问题，然后您会很好去。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T14:50:40.193

调试提示：在 PayPal 后端检查您的 IPN 配置。用一个简单的脚本替换您的脚本，该脚本只显示调用它的时间和输入。

# c - 使用指针等于两个数组的函数

> ID：14237814
> 
> 赞同：1
> 
> 时间：2013-01-09T14:48:10.193
> 
> 标签：c, pointers

我必须编写一个函数来执行您在下面阅读的内容，但是使用指针（所以我必须删除“i”和运算符 []）...所以初始声明将类似于 `void match (int *a, int *a, int n)`，但是我该如何处理不使用“i”而增加？谢谢 ：）

```
void match (int a[], int b[], int n) {
int i;
for (i = 0; i < n; i++)
a[i] = b[i];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:50:48.653

这在 C 中称为“分配”。

使用它更容易`memcpy()`，这是复制内存块的标准方法：

```
memcpy(a, b, n * sizeof *a); 
```

如果做不到这一点，您当然可以使用指针算术，或者接受指针但在函数本身中使用数组表示法：

```
void assign(int *a, const int *b, int n)
{
  int i;

  for(i = 0; i < n; ++i)
    a[i] = b[i];
} 
```

请注意源指针`b`是如何标记为 的`const`，以表明它是一个只读参数。

使用指针算术，它会是这样的：

```
void assign(int *a, const int *b, int n)
{
  const int *end = b + n;
  while(b < end)
   *a++ = *b++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:51:52.877

干得好：

```
while (n > 0) {
    n--;
    *a++ = *b++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:51:16.777

```
void match (int *a, int *b, int n) {
    int *c;
    c = a;
    while ((a-c)<n) {
        *a=*b;
        a++; b++;
    }
} 
```

我建议将您的函数名称更改为`copy`而不是`match`. 因为`match`意味着您要比较数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:50:56.557

指针运算：

```
int* pa = NULL;
for (pa = a; pa != a + n; pa++)
{
  *pa;
} 
```

上面的循环`pa`依次指向 a 的每个成员，并取消引用它。

这也有助于记住`a[i] = *(a+i)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T14:52:02.177

您可以增加指针本身：

```
void copy(int *a, int *b, size_t sz)
{
    int *p = a;
    while (p - a < sz) {
        *p++ = *b++;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T14:52:43.697

您可以增加一个指针，它是 C 指针算法的一部分。假设`i`是一个指向数组元素的`++i`指针，是指向数组下一个元素的指针。编译器自动找到指向元素的大小（查看指针的类型）并将指针增加正确的偏移量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T15:17:12.227

在 C 中实现 memcpy 的最常见（以我的经验）和最有效的方法是：

```
void my_memcpy (void* s1, const void* s2, size_t n)
{
  uint8_t*       u_s1 = s1;
  const uint8_t* u_s2 = s2;

  while(n != 0)
  {
    *u_s1 = *u_s2;

    u_s1++;
    u_s2++;  
    n--;
  }
} 
```

Please note that `n != 0` is absolutely essential, you cannot use `n > 0` or the code will crash and burn when n is of type size_t, rather than int.

# entity-framework - 更新实体需要在 ef 中重新建立关系？

> ID：14237816
> 
> 赞同：0
> 
> 时间：2013-01-09T14:48:11.583
> 
> 标签：entity-framework, unit-of-work

我在我的应用程序中使用 ef 4.1，我有如下实体：

```
public partial class Role
    {
        [Key]
        public int Id { get; set; }

        [StringLength(20)]
        [Required()]
        public string RoleTitle { get; set; }

        public virtual ICollection<User> Users { get; set; }
    }

    public partial class User
        {
            [Key]
            [DatabaseGenerated(DatabaseGeneratedOption.None)]
            public long UserId { get; set; }

            [StringLength(20)]
            [Required()]
            public string UserName { get; set; }

            public bool Status { get; set; }

            [Required()]
            public virtual Role Role { get; set; }
    } 
```

是不是每次我想更新用户实体的某些字段时，比如状态，我应该重新设置它是关系？因为当我只想更新状态字段并保存更改（[我使用工作单元](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)）时，它会抛出并说“角色字段是必需的。”...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:13:25.753

不，你不必重新建立它的关系。您也不应该将`Required`注释放在虚拟属性上。您应该将它放在 Role 表的 ForeignKey ID 字段中。我相信您会收到错误消息，因为它从来没有首先在 User 类上正确设置角色，这就是为什么您必须不断重新制作它的原因。

为了说明，您的 User 类应如下所示：

```
 public partial class User
    {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.None)]
        public long UserId { get; set; }

        [StringLength(20)]
        [Required]
        public string UserName { get; set; }

        [Required, ForeignKey("Role")]
        public int RoleID { get; set; }

        public bool Status { get; set; }

        public virtual Role Role { get; set; }
    } 
```

# java - 特定的 Java 泛型数组创建

> ID：14237820
> 
> 赞同：0
> 
> 时间：2013-01-09T14:48:22.067
> 
> 标签：java

> **可能重复：**
> [Java 1.6：创建 List<T> 数组](https://stackoverflow.com/questions/5662394/java-1-6-creating-an-array-of-listt)

如何在 Java 中初始化这个数组。

```
Vector<Integer>[] c; 
```

我已经尝试过：

```
Vector<Vector<Integer>[]> a = new Vector<Vector<Integer>[]>();
Vector<Integer>[] c = (Vector<Integer>[])a.toArray(); 
```

出现以下错误：

> 线程“main”中的异常 java.lang.ClassCastException: [Ljava.lang.Object; 不能转换为 [Ljava.util.Vector; 在 app.Program.main(Program.java:38) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl .java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

编辑：

我的问题是我是一个接收泛型数组“T[] args”参数的类的客户端，在我的情况下，T 是一个泛型类型，例如 Vector，谢谢

我是 Java 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:55:07.867

我不认为你可以创建一个泛型数组。看一下这个。[Java 1.6：创建 List<T> 数组](https://stackoverflow.com/questions/5662394/java-1-6-creating-an-array-of-listt)

这是因为类型信息在运行时不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:56:09.290

如果可以避免，我不会使用 Vector。它在 Java 1.2 (1998) 中被 ArrayList 取代

```
List<List<Integer>[]> a = new ArrayList<List<Integer>[]>();
List<Integer>[] c = (List<Integer>[]) a.toArray(new List[a.size()]); 
```

`toArray()`仅返回`Object[]`不能向下转换为特定数组类型的 a。

顺便说一句，如果效率是一个问题，我会避免在集合中使用整数。你可以用 trove 代替。`TIntArrayList`是一个包装器`int[]`

```
List<TIntArrayList> a = new ArrayList<>();
TIntArrayList[] c = a.toArray(new TIntArrayList[a.size()]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:00:30.060

您可以删除通用声明

```
Vector[] c = new Vector[10]; 
```

或者用另一个向量或列表类型替换数组

```
List<Vector<Integer>> list = new ArrayList<Vector<Integer>>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T14:57:13.957

这是一个向量数组：

```
 Vector<Integer>[] c = new Vector[2];
    c[0] = new Vector<Integer>();
    c[0] = new Vector<Object>(); // <- compiletime error
    c[0].add(new Integer(0)); 
```

我们无法创建“通用数组”。但是上面的行创建了一个包含*大小*向量的数组。并且每个数组槽都可以保存对参数化的引用`Vector`。

我们看到，即使数组本身不是泛型的，变量 c 也被声明为泛型类型，这迫使我们只将`Vector<Integer>`实例放入数组。

因此，如果我们忽略一些警告，我们可以将其他向量添加到数组中......

```
 Vector[] b = c;                    // <- warning
    Vector<Double>[] a = b;            // <- warning
    a[1] = new Vector<Double>();       // <- the array itself allows that
    a[1].add(new Double(0));

    for (Vector<Integer> vector : c) {
        Integer value = vector.get(0); // <- BOOM! (on second iteration)
    } 
```

# mysql - 我应该用来从数据库中提取的 MySQL 代码是什么？

> ID：14237821
> 
> 赞同：1
> 
> 时间：2013-01-09T14:48:27.347
> 
> 标签：mysql

我在 MySQL 中有两行，因此：

```
第 1 行：123456 | 333333 | 222222
第 2 行：123456 | 000000 | 000000
```

我想检查“123456”，这是我从上一页表单中输入的数据，并插入到Row2中，是否可以在我在MySQL中预设的数据的Row1中找到它。

我应该用来从数据库中提取的 MySQL 代码是什么？

以下是我的代码：

```
SELECT ROW1,ROW2 FROM table WHERE ROW2 limit 0,1";
$result = mysql_query($sql);
$row = mysql_fetch_row($result);
if ($row[1]=$row[2])
{
echo 'the number you input is valid';
}
else
{
echo 'the number you input is not valid';
echo '<meta http-equiv=REFRESH CONTENT=2;url=index.php>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:49:53.290

和

```
if ($row[1]=$row[2]) 
```

你做了一个 var 分配

尝试这个

```
if ($row[1]==$row[2]) 
```

或者如果您比较类型和值

```
if ($row[1]===$row[2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:00:28.700

首先，`mysql_fetch_row()`返回一个从零开始的数组，所以第一个字段是 in `$row[0]`，第二个是 in `$row[1]`。

其次，使用双等号比较运算符`==`来测试是否相等：

```
if ($row[0]==$row[1]) 
```

最后，该`mysql_*`库已弃用，建议升级到 PDO 或 MySQLi。

# c# - 更新值

> ID：14237823
> 
> 赞同：1
> 
> 时间：2013-01-09T14:48:37.487
> 
> 标签：c#, sql, sql-server-2008

我有一个数据表，我想通过向所有收入低于 30 000 的人额外增加 5000 来更新员工工资。

这就是我所做的，甚至认为实际更新没有发生任何错误。

也许是建议？

```
 string connectionString = "Data Source=.\\SQLEXPRESS;Initial Catalog=lrmg;Integrated Security=True;";

        using (sqlConnect = new SqlConnection(connectionString))
        {
            sqlConnect.Open();

            SqlCommand cmd = sqlConnect.CreateCommand();

            cmd.CommandText = "UPDATE [Employee] SET [Salary] += 5000 WHERE [Salary] < 30000";

            cmd.ExecuteNonQuery();

            sqlConnect.Close();
        }

        labMessage.Text = "The update was processed"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:50:42.020

然后尝试`< 30.000`价值:-)

```
cmd.CommandText = "UPDATE [Employee] SET [Salary] = [Salary] + 5000 WHERE [Salary] < 30000"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:49:37.933

小错字，你说它是 30000，你有 3000..

```
cmd.CommandText = "UPDATE [Employee] SET [Salary] += 5000 WHERE [Salary] < 30000"; 
```

自我注意，+= 现在是 5 年前的有效运算符^^

# haskell - 在haskell中使用forall量词进行谓词？

> ID：14237827
> 
> 赞同：1
> 
> 时间：2013-01-09T14:48:41.493
> 
> 标签：haskell, typeclass, forall, multiparameter

我想编写接受类型值的函数，该函数具有多参数类型类的实例以及*每种*类型。像这样的东西（`test`函数签名是非法的）：

```
class Test a b

test :: forall a. (forall b. Test a b) => a -> a 
```

有没有办法表达这种限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:09:18.437

根据您要实现的目标，可能会有更好的解决方案。

但是你所问的也是可能的，使用[约束](http://hackage.haskell.org/package/constraints)包。

```
{-# LANGUAGE FlexibleContexts, ConstraintKinds, MultiParamTypeClasses #-}

import Data.Constraint.Forall

class Test a b

test :: Forall (Test a) => a -> a
test = undefined 
```

# java - 代码风格：“隐藏”数据类型（Java）

> ID：14237831
> 
> 赞同：2
> 
> 时间：2013-01-09T14:48:59.907
> 
> 标签：java, types, conventions

我正在研究一组代表音符、小节、节奏等的类。当然，我必须处理最好用分数表示的拍号（如 4/4、3/4 等）。

我想知道什么是更好的风格。让 Bar 的构造函数包含一个分数对象或仅两个整数作为时间签名。

```
public Bar(Fraction timeSignature) {
    this.timeSignature = timeSignature;
} 
```

或者：

```
public Bar (int num, int den) {
    timeSignature = new Fraction(num, den);
} 
```

我的意思是……我可以两者兼得，但我应该在申请中选择哪一个？有没有“更好”的风格？

谢谢你的想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:51:29.877

就个人而言，我会采用第一种方法。如果你知道你需要/想要一个 Fraction 对象，为什么 Bar 不直接接受它？调用 Bar 类的人需要以任何一种方式理解 Fraction（将整数传递给您），所以它更简洁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T14:53:24.870

我会使用第一个并在分数类中提供一个工厂方法，以便能够调用类似的东西：

```
new Bar(Fraction.of(4, 4)); 
```

两全其美;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T15:35:37.530

首先，简单的 API 很好，是的，但是如果您稍后扩展构造函数以获取更多参数（例如 BPM），使用原语而不是对象会使调用代码更难理解。IE：

```
Bar myBar = new Bar(4, 4) // Okay
Bar myBar = new Bar(4, 4, 120) // ??
Bar myBar = new Bar(new TimeSignature(4, 4), 120) // Much clearer 
```

如有疑问，明确的更好。

其次，我想说*不要*将拍号存储在`Fraction`对象中——虽然它们通常被写成分数，但拍号不是。3/4 和 6/8 相当于分数，但它们是不同的拍号，因此会产生不同的声音。 `TimeSignature`在您的程序域内，它需要自定义类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T15:59:30.487

您可能需要考虑将时间签名设为枚举，以防止用户输入错误。由于您可能有一组有限的拍号（2/4、6/8、4/4），您可以通过执行以下操作来控制用户创建的拍号：

```
//example
new Bar(TimeSignature.DUPLE_2_2)

public enum TimeSignature{

DUPLE_2_2(2,2), QUADRUPLE_2_4(2,4), TRIPLE_3_4(3,4);

private final int numerator;
private final int denominator;

private TimeSignature(int numerator, int denominator) {
this.numerator = numerator;
this.denominator = denominator;
}

} 
```

祝你好运

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T14:58:53.493

与每个设计问题一样，这取决于。在这种情况下，您应该考虑如何使用您的类。

一般来说，我更喜欢更简单的 API。比较一下：

```
Bar myBar = new Bar(4, 4); 
```

对此：

```
Bar myBar = new Bar(new Fraction(4,4)); 
```

后一种选择更明确（这很好），但如果你用文字参数实例化很多条，可能会变得乏味。另一方面，如果您的代码无论如何都需要处理分数，那么第一种语法可能会更好。

要考虑的另一个方面是引入新类的开销`Fraction`。创建一个额外的类只是为了存储两个`int`s 意味着很多开销而很少使用。但是，如果`Fraction`还提供其他服务（例如分数化简），则该类将获得其存在的权利。

# apache - OpenSSL 在 csr 文件中生成未知的电子邮件地址？

> ID：14237833
> 
> 赞同：-1
> 
> 时间：2013-01-09T14:49:07.280
> 
> 标签：apache, ubuntu, ssl, openssl

我在 ubuntu 上使用 OpenSSL 生成一个 CSR 文件，我将把它粘贴到 SSL 证书提供程序。当我粘贴代码时，我看到一个未知的电子邮件地址可供选择，但不是我在创建 csr 期间输入的电子邮件地址。OpenSSL 从哪里获得此电子邮件地址，例如 postmaster@mydomain.com、admin@mydomain.com。

我使用的命令是： sudo openssl req -out csr.csr -new -newkey rsa:2048 -nodes -keyout private.key

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:57:27.247

关键是大多数证书颁发机构（“证书提供者”）忽略来自 CSR 本身的电子邮件地址，因为它是用户提供的输入，因此不可信。

在申请过程中提供给您的电子邮件地址是

1.  来自您为其申请证书的域的 Admin-C WHOIS 记录
2.  假设大多数域通常存在一些标准地址（postmaster@、admin@、..）

CA 这样做是为了防止欺诈并确保只有有权访问该域的人才能为其购买证书。

你无法改变这一点。你可以：

*   在您的域上配置一个显示的电子邮件地址并从那里获取确认电子邮件
*   或者，如果可能，更改您的 Admin-C 记录电子邮件地址（这需要一段时间）

# jquery - 如何通过使用 jquery 进行搜索来隐藏所有字段

> ID：14237834
> 
> 赞同：-2
> 
> 时间：2013-01-09T14:49:08.113
> 
> 标签：jquery, html

我需要使用 jquery 进行搜索，我有一个：
输入带有此 id 的文本`idTextSearch`：

```
<input id="idTextSearch" name="name" type="text" style="width:70%;"  > 
```

具有此 id 的输入按钮`idButtonSearch`：

```
<input id="idButtonSearch" type="button" value="Search" onclick="searching()" class="alt_btn"> 
```

和一个`<ul class="toggle" id="idUl">`不同的`<li value="thisIsAValue">`

现在，我需要创建我的`searching()`，此函数将隐藏所有与此输入文本不同的元素字段`$("#idTextSearch").val()`并仅显示一个具有相同值的字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:54:44.030

下次，请发布您为解决问题所做的尝试。在这种情况下，我会给您答案，因为它很简单，但我们是来*帮助*您的，而不是为*您编写所有代码*。

请注意，从`value`技术上讲，该属性在元素上不存在`li`，您应该在它前面加上`data`. 例如：

```
<li data-value="thisIsAValue"> 
```

和 javascript/jQuery:

```
$('#idButtonSearch').on('click', function(e) {
    e.preventDefault();

    $('#idUl li').hide().each(function() {
        if ( $(this).data('value') === $('#idTextSearch').val() ) {
            $(this).show();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:54:38.283

```
function searching() {
    var val = $('#idTextSearch').val();
    $('#idUl li').each(function() {
        var v = $(this).prop('value');
        if(v == val) {
            $(this).show();
        } else {
            $(this).hide();
        }
    });
} 
```

# android - Android 停止 FragmentTransaction 动画

> ID：14237835
> 
> 赞同：5
> 
> 时间：2013-01-09T14:49:10.010
> 
> 标签：android, animation, fragment

关于在如下调用替换时如何停止淡入淡出动画的任何想法？

```
 FragmentManager     fm          = activity.getFragmentManager();
    FragmentTransaction transaction = fm.beginTransaction();

    transaction.replace(Id,Fragment,Tag); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:55:17.313

简单的：

```
 transaction.setCustomAnimations(0,0); 
```

您还可以使用此方法通过传递对`R.anim.`资源的引用来设置所需的任何自定义动画。

# callback - ACS 审查回调

> ID：14237838
> 
> 赞同：1
> 
> 时间：2013-01-09T14:49:17.100
> 
> 标签：callback, comments, appcelerator, acs, review

我有一个 Appcelerator 问题。

新的 ACS 评论是否有某种回调？一种方法是让应用程序每 x 秒刷新一次。但这会很快使用太多资源。想象一下 10 个人使用它 10 分钟，自动刷新设置为 10 秒。这将相当于 10x6x10 = 600 次 API 调用！而且那只是10个人10分钟，如果他们在线1个月呢？

因此，只有在有**新**评论时才通知的回调在这里会有很大帮助。

实际上有没有一种我错过的方法或其他解决方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:38:16.450

一种可能的解决方案是通过推送通知？

# ruby-on-rails - 是否可以使用资源丰富的路线来做到这一点？

> ID：14237839
> 
> 赞同：1
> 
> 时间：2013-01-09T14:49:18.587
> 
> 标签：ruby-on-rails, routing

在我的模型中有属于一个地方的住宿。使用[friendly_id](https://github.com/norman/friendly_id)，我的资源丰富的路线将如下所示：

```
/localities
/localities/:locality-name
/accommodations
/accommodations/:accommodation-name 
```

问题是我希望住宿详细信息 URL 如下所示：

```
/accommodations/:locality-name/:accommodation-name 
```

并且还有一个用于住宿的位置过滤器：

```
/accommodations/:locality-name 
```

当然，我可以将以下内容添加到`routes.rb`：

```
resources :localities do
  resources :accommodations
end 
```

...这将导致：

```
/localities/:locality-name
/localities/:locality-name/accommodations
/localities/:locality-name/accommodations/:accommodation-name 
```

但我希望从住宿开始，`/accommodations`而不是嵌套在地区之下。

我得到的最接近的是将上面的内容修改为：

```
resources :localities, :path => 'accommodations' do
  resources :accommodations, :path => '', :except => :index
end 
```

这可以满足我的要求，但会颠倒过来，弄乱我的资源。此外，我可以添加`resources :localities, :path => 'localities'`，但随后会同时出现和`routes.rb`的位置索引视图。我希望这些 URL 可以作为它们所代表的东西的某种门户。`/localities``/accommodations`

那么，我应该放弃资源丰富的路线吗？或者有解决办法吗？

谢谢。

# c++ - 提交后选择的智能单元测试

> ID：14237848
> 
> 赞同：0
> 
> 时间：2013-01-09T14:49:50.563
> 
> 标签：c++, linux, unit-testing, testing, code-coverage

我正在寻找可以解决以下问题的工具：

我们完整的单元测试套件需要数小时才能完成。因此，当程序员提交代码时，他会在几个小时后得到测试结果。我们想要实现的是缩短查找简单错误的时间。这可以通过智能选择几个单元测试来完成，这些单元测试将在提交之前/之后运行。当然，我们不想随机选择这个单元测试——我们希望单元测试更有可能发现错误。

无需额外软件即可解决此问题的想法：为每个单独的单元测试进行代码覆盖。知道哪个文件被哪个单元测试“触及”，如果用户更改了这些文件中的任何一个，我们就可以选择这个单元测试。这个解决方案有明显的缺点——我们必须为每个单元测试手动存储和更新覆盖文件的列表。

我想知道，是否有任何工具可以帮助选择要运行的测试？项目使用 C++ 并在 Linux 下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:43:53.343

在[*《有效地使用遗留代码》*](https://rads.stackoverflow.com/amzn/click/com/0131177052)中，Michael Feathers 写道，一个需要 10 毫秒的单元测试是一个缓慢的单元测试。您必须根除缓慢的测试。不要根据覆盖范围猜测来破解子集跑步者，这最终会出错并咬你*。*

请记住单元测试和集成测试之间的区别。单元测试不涉及文件系统，不通过网络交谈，也不与数据库通信：这些是集成测试。是的，集成测试通常更容易编写，但这有力地表明您的软件可以更好地考虑因素——而且幸运的是，更容易测试。

我怀疑您的集成测试需要这么长时间。将它们移到单独的套件中，该套件的运行频率低于每次签到时运行的频率，例如每晚。

# r - 按组“递归”查找第一行/最后一行

> ID：14237852
> 
> 赞同：1
> 
> 时间：2013-01-09T14:49:55.150
> 
> 标签：r, data.table

我试图找到一种按组查找第一行和最后一行的有效方法。

```
R) ex=data.table(state=c("az","fl","fl","fl","fl","fl","oh"),city=c("TU","MI","MI","MI","MI","MI","MI"),code=c(85730,33133,33133,33133,33146,33146,45056))
R) ex
   state city  code
1:    az   TU 85730           
2:    fl   MI 33133           
3:    fl   MI 33133           
4:    fl   MI 33133           
5:    fl   MI 33146           
6:    fl   MI 33146           
7:    oh   MI 45056 
```

我想找到组中每个变量的第一个和最后一个

```
R) ex
   state city  code first.state last.state first.city last.city first.code last.code
1:    az   TU 85730           1          1          1         1          1         1
2:    fl   MI 33133           1          0          1         0          1         0
3:    fl   MI 33133           0          0          0         0          0         0
4:    fl   MI 33133           0          0          0         0          0         1
5:    fl   MI 33146           0          0          0         0          1         0
6:    fl   MI 33146           0          1          0         1          0         1
7:    oh   MI 45056           1          1          1         1          1         1 
```

据我所知`data.table`，这样的事情不容易帮助，因为`by="state,city,code"`会看`4`三胞胎。

我知道的唯一方法是在 by="state,city,code" 中查找 first/last.code，然后在 by="state,city" 中查找 first/last.city。

* * *

这就是我的意思：

```
applyAll <- function(DT, by){
    f<- function(n, vec){ return(vec[1:n]) }
    by <- lapply(1:length(by), FUN=f, by)
    out <- Reduce(f=firstLast, init=DT, x=by)
    return(out)
}
firstLast <- function(DT, by){
    addNames <- paste(c("first", "last"),by[length(by)], sep=".")
    DT[DT[,list(IDX=.I[1]), by=by]$IDX, addNames[1]:=1]
    DT[DT[,list(IDX=.I[.N]), by=by]$IDX, addNames[2]:=1]
    return(DT);
} 
```

结果：`applyAll(ex,c("state","city","code"))`但是这会使 NUMEROUS 副本`DT`，然后我的问题是，是否有一些计划或已经存在，以至于我们无法按组获得第一个/最后一个。`SAS`（这对于or `kdb`or来说是相当普通的`SQL`）

在`SAS`：

```
data DT;
    set ex;
    by state city code;
    if first.code then firstcode=1;
    if last.code then lastcode=1;
    if first.city then firstcity=1;
    if last.city then lastcity=1;
    if first.state then firststate=1;
    if last.state then laststate=1;
run; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T19:23:51.527

如果这是问题：

> 对于一组列（x，y，z），我想添加一个整数列，标记每个组的第一项的位置`by="x"`，`by="x,y"`和`by="x,y,z"`（三个新列）。每个新列的第一行将始终为 1，因为它始终是第一组的第一项。我还想添加另外 3 列，按相同的 3 个分组中的每一个标记最后一项。不过，我可能有不止 3 个分组，那么编程可能吗？

那么怎么样：

```
ex=data.table(state=c("az","fl","fl","fl","fl","fl","oh"),
              city=c("TU","MI","MI","MI","MI","MI","MI"),
              code=c(85730,33133,33133,33133,33146,33146,45056))
ex
   state city  code
1:    az   TU 85730
2:    fl   MI 33133
3:    fl   MI 33133
4:    fl   MI 33133
5:    fl   MI 33146
6:    fl   MI 33146
7:    oh   MI 45056

cols = c("state","city","code")
for (i in seq_along(cols)) {
  ex[,paste0("f.",cols[i]):=c(1L,rep(0L,.N-1L)),by=eval(head(cols,i))] # first
  ex[,paste0("l.",cols[i]):=c(rep(0L,.N-1L),1L),by=eval(head(cols,i))] # last
}
ex
   state city  code f.state l.state f.city l.city f.code l.code
1:    az   TU 85730       1       1      1      1      1      1
2:    fl   MI 33133       1       0      1      0      1      0
3:    fl   MI 33133       0       0      0      0      0      0
4:    fl   MI 33133       0       0      0      0      0      1
5:    fl   MI 33146       0       0      0      0      1      0
6:    fl   MI 33146       0       1      0      1      0      1
7:    oh   MI 45056       1       1      1      1      1      1 
```

但正如@Roland 评论的那样，可能有更好的方法来实现您的最终目标。

并且，根据要求，这应该是使用`.I`and的更快解决方案`.N`：

```
cols = c("state","city","code")
for (i in seq_along(cols)) {
  w = ex[,list(f=.I[1],l=.I[.N]),by=eval(head(cols,i))]
  ex[,paste0(c("f.","l."),cols[i]):=0L]  # add the two 0 columns
  ex[w$f,paste0("f.",cols[i]):=1L]       # mark the firsts
  ex[w$l,paste0("l.",cols[i]):=1L]       # mark the lasts
} 
```

它应该更快，因为每列只进行一次分组，并且与第一个解决方案不同，没有创建许多小向量（没有调用`c()`或为每个组调用）。`rep()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:02:01.233

尚不完全清楚您想要什么，但您当然可以在索引中有多个列：

```
ex[, list(first=head(code, 1), last=tail(code, 1)), by=c("state", "city")]
   state city first  last
1:    az   TU 85730 85730
2:    fl   MI 33133 33146
3:    oh   MI 45056 45056 
```

* * *

您可以像这样在您的组中自动执行此操作：

```
by <- c("state", "city", "code")
byList <- lapply(seq_along(by), function(i)by[sequence(i)])
lapply(byList, 
       function(i) ex[, list(first=head(code, 1), last=tail(code, 1)), by=i] )

[[1]]
   state first  last
1:    az 85730 85730
2:    fl 33133 33146
3:    oh 45056 45056

[[2]]
   state city first  last
1:    az   TU 85730 85730
2:    fl   MI 33133 33146
3:    oh   MI 45056 45056

[[3]]
   state city  code first  last
1:    az   TU 85730 85730 85730
2:    fl   MI 33133 33133 33133
3:    fl   MI 33146 33146 33146
4:    oh   MI 45056 45056 45056 
```

# mongodb - 令人兴奋的例子展示了 Dart 如何与其他人很好地合作？

> ID：14237860
> 
> 赞同：1
> 
> 时间：2013-01-09T14:50:17.717
> 
> 标签：mongodb, jquery-plugins, twitter-bootstrap, flot, dart

我正在看 Dart，我想知道是否有示例展示如何创建一个漂亮的 webapp（想想 Bootstrap、Foundation 等），它依赖于第三方库（例如 jquery-ui、bootstrap 插件、flot 等）和一些动态样本数据（mongodb，...）？

我确实浏览了一下，但我正在寻找比[http://dart-lang.github.com/js-interop/example](http://dart-lang.github.com/js-interop/example)或 ToDo 应用程序更有说服力的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:07:07.200

最重要的 URL 是[http://www.dartlang.org/samples/](http://www.dartlang.org/samples/)和[https://code.google.com/p/dart/source/browse/branches/bleeding_edge/dart/samples/](https://code.google.com/p/dart/source/browse/branches/bleeding_edge/dart/samples/)。我们希望在接下来的几个月里有更多的全栈演示，比如“Agile Web Development with Rails”中的书店示例。但是，现在，我们真正专注于富客户端 Web 应用程序开发（例如我们的 Web UI 框架及其版本的 TodoMVC 示例）。

# java - 如何在 Spring 3 中使用 Velocity 工具获取 VelocityEngine

> ID：14237862
> 
> 赞同：2
> 
> 时间：2013-01-09T14:50:31.293
> 
> 标签：java, spring, velocity

如何在 Spring 3 中使用 Velocity 工具获取 VelocityEngine？我需要控制器中的一个方法来处理模板 Velocity，但需要有可用于初始化 Spring 3 的 Velocity 工具。现在我正在这样做。

弹簧配置：

```
<bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
        <property name="resourceLoaderPath" value="/WEB-INF/velocity/"/>        
        <property name="velocityProperties">
            <props>
                <prop key="input.encoding">UTF-8</prop>
                <prop key="output.encoding">UTF-8</prop>                
            </props>
        </property>                 
    </bean>

 <bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver">
        <property name="cache" value="false"/>
        <property name="prefix" value=""/>
        <property name="suffix" value=".html"/>        
        <property name="contentType" value="text/html; charset=UTF-8"/>     
        <property name="toolboxConfigLocation" value="/WEB-INF/velocity/config/toolbox.xml"/>
        <property name="viewClass" value="my.tools.VelocityToolsView"/> 
    </bean> 
```

在控制器类中：

```
@Autowired
private VelocityConfigurer configurer;

private VelocityEngine velocityEngine;

private ToolContext toolContext;

@PostConstruct
public void init() {                    

        velocityEngine = configurer.getVelocityEngine();

        ToolManager toolManager = new ToolManager();
        toolManager.configure("fuulPath/WEB-INF/velocity/config/toolbox.xml");
        toolContext = toolManager.createContext();

} 
```

在方法：

```
 VelocityContext velocityContext = new VelocityContext(map, toolContext);                
    StringWriter writer = new StringWriter();        
    velocityEngine.mergeTemplate("myTeplate.html", "UTF-8", velocityContext, writer);        
    String templateString = writer.toString(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T17:48:10.187

当您不使用 Spring 配置时，上述获取速度的方法很好。当您使用 Spring 时，您不需要这么复杂。

在你的 spring.xml 中定义这个 bean

```
<bean id="velocityEngine"
        class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
    <property name="velocityProperties">
        <value>
            resource.loader=class
            class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
        </value>
    </property>
</bean> 
```

并在你的java类Autowire这个bean

```
@Component
public class Sample {

    private VelocityEngine velocityEngine;

    public VelocityEngine getVelocityEngine() {
        return velocityEngine;
    }

    @Autowired
    @Required
    public void setVelocityEngine(VelocityEngine velocityEngine) {
        this.velocityEngine = velocityEngine;
    }

    public String getSomething(Object variable) {
        Map model = new HashMap();
        model.put("variable",variable);

        return VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, "/templates/sometemp.vm", model);
    }   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T18:15:29.680

在 Spring 3 中有一种更简单的方法

将 toolbox.xml 添加到 WEB-INF/velocity

```
<?xml version="1.0" encoding="UTF-8"?>
<toolbox>
<xhtml>true</xhtml>
<tool>
    <key>date</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.DateTool</class>
    <parameter name="format" value="dd/MM/yyyy" />
</tool>
<tool>
    <key>display</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.DisplayTool</class>
</tool>
<tool>
    <key>math</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.MathTool</class>
</tool>
<tool>
    <key>iter</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.IteratorTool</class>
</tool>
<tool>
    <key>sort</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.SortTool</class>
</tool>
<tool>
  <key>esc</key>
  <scope>application</scope>
  <class>org.apache.velocity.tools.generic.EscapeTool</class>
</tool>
</toolbox> 
```

然后将此路径添加到您的 APPNAME-servlet.xml 文件中

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver" p:cache="false" p:order="1">
  <property name="prefix" value="/com/aol/dragon/template/"/>
  <property name="suffix" value=".vm"/>
  <property name="toolboxConfigLocation" value="/WEB-INF/velocity/toolbox.xml" />
</bean> 
```

然后更新你的 pom.xml 依赖

```
<dependency>
<groupId>org.apache.velocity</groupId>
<artifactId>velocity-tools</artifactId>
<version>2.0</version>
</dependency> 
```

保存、更新项目并运行服务器。您现在应该能够使用 vm 中的所有工具。

# jquery - Jquery 1.8.3 不能同时为两个插件工作

> ID：14237863
> 
> 赞同：0
> 
> 时间：2013-01-09T14:50:33.047
> 
> 标签：jquery, html

所以我在我的 html 网站上运行了两个插件，一个是音乐播放器，另一个是灯箱，

[链接在这里](http://aceaccentuating.com/trial/)

两者都使用 Jquery 1.8.3

现在，如果包含在第 203 行中，Lightbox 可以工作，而音乐播放器则不能。

如果包含在第 65 行，则音乐播放器可以工作，而 Ligtbox 则不能。

我不知道为什么会发生这种情况或如何解决它，我仍在学习，因此将不胜感激！

该链接在第 65 行包含 Jquery，因此目前音乐播放器可以正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:35:02.507

在此页面上：[http](http://aceaccentuating.com/trial/light.html) ://aceaccentuating.com/trial/light.html您的 jquery 包含太低 - 这意味着在您包含库的上方使用 jquery 的任何内容都将不起作用。

在此页面上：[http](http://aceaccentuating.com/trial/) ://aceaccentuating.com/trial/您在第 267 行有某种类型错误 -

```
var $container  = $('.am-container'), 
```

给出以下错误：

```
TypeError: $ is not a function 
```

这意味着它在您的许多文件之一中尚未定义 jquery - 请参阅：[TypeError: $ is not a function when calling jQuery function](https://stackoverflow.com/questions/12343714/typeerror-is-not-a-function-when-calling-jquery-function)

# android - 用于帮助提供上下文的 Android 翻译工具

> ID：14237867
> 
> 赞同：4
> 
> 时间：2013-01-09T14:50:39.153
> 
> 标签：android, translation, android-xml, android-resources

有谁知道任何可以帮助翻译人员翻译字符串资源的工具？这可以帮助提供字符串存在的上下文吗？

我们通常将[字符串资源](http://developer.android.com/guide/topics/resources/string-resource.html)发送出去进行翻译，并且经常被质疑字符串的上下文。这样的工具将极大地缓解这些问题，同时也证明了在应用程序中提供字符串捕获以验证它们已被正确翻译的无价之宝。

总而言之，是否有一个工具可以：

*   捕获活动、通知等的屏幕截图
*   切换语言

到目前为止，我还没有找到任何东西，并且正在考虑使用 robotsium 来实现自动化，但是如果已经存在某些东西，我宁愿使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:56:21.773

这不是一个完美的解决方案，但我们在字符串资源中添加了注释，其中包括

*   上下文的简要说明
*   UI元素的类型
*   资源的最大长度

例如

```
 <!-- This is displayed on the app preferences screen. -->
 <!-- Label [25] -->
 <string name="preferences_server_name">Server Name</string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:53:55.977

是的。

如果您有 4.0 > 设备，您只需直接在它们上单击屏幕截图（因设备而异，但在 nexus 上例如是 power+vol.down）。

自 1.0 以来存在的其他方式是通过 Eclipse 插件。在其上找到“设备”视图，选择运行您的应用程序的设备，右上角有一个相机按钮，可以拍摄屏幕截图并将它们直接带到您的 PC 上。

# x++ - 表查询不一致

> ID：14237871
> 
> 赞同：0
> 
> 时间：2013-01-09T14:50:45.000
> 
> 标签：x++, dynamics-ax-2012

我有一种方法可以从表***MyConfiguration***中检索配置详细信息。当前使用的代码是：

```
Query query;
QueryRun queryRun;
QueryBuildDataSource qbds;
MyConfiguration config;
int rowCount;

query = new Query();
qbds = query.addDataSource(tableNum(MyConfiguration));
queryRun = new QueryRun(query);
rowCount = SysQuery::countTotal(queryRun); 
```

该表有 0 或 1 行；如果有配置设置或使用默认设置，则有一个**if语句说明使用什么过程。**

*问题*

尽管表中有一行，但查询间歇性地返回 0 行。

* * *

## 更新

感谢大卫的输入，我简化了代码：

```
MyConfiguration config;

select firstOnly useSettings, firstField, secondField from config;

// This wasn't included in the original example, but demonstrates how it's used.
if(config){
    // These variables are defined in classDeclaration
    useCustom = config.useSettings;
    first = config.firstField;
    second = config.secondField;
}
else
{
     // No custom configuration, use defaults.
     useCustom = 0;
} 
```

此代码位于调用主要方法以查找要使用的配置时调用的方法中。

当我在开发环境中运行我的测试方法时，所有测试都通过了（正在为每个测试读取配置）。但是，当从按钮的***单击***事件调用主要方法时，*选择*不会返回任何内容（我已经在调试器中检查了这一点）。这会导致应用程序使用默认值而不是配置值运行。如果我手动，在调试器中，将执行移到如果第二个*选择*也不返回任何值。

测试和表单都以相同的方式执行方法，但从*select*语句中得到不同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:56:09.877

您的代码看起来正确。但是，以下可能更容易使用和调试

```
MyConfiguration config;
int rowCount;
;
select firstonly config;
if(config)
{
  //Record exists
}
else
{
  //Record does not exist
} 
```

# c++ - googletest：是否可以选择单个测试夹具/案例？

> ID：14237873
> 
> 赞同：1
> 
> 时间：2013-01-09T14:50:50.773
> 
> 标签：c++, unit-testing, testing, googletest

我使用[googletest](http://code.google.com/p/googletest/wiki/Primer)进行 C++ 单元测试。我已经定义了多个派生自 的类`::testing::Test`，每个类都有多个使用`TEST_F`.

我用

```
int main(int argc, char **argv) {

    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();

} 
```

调试时，我想专注于特定的测试用例。是否可以只运行特定的`Test`或`TEST_F`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:58:37.143

`--gtest_filter`在为调试会话调用可执行文件时，您可以使用 gtests 命令行选项。@see[运行测试的子集](https://stackoverflow.com/a/7208148/1713859)

# javascript - 使用 ringojs 制作新应用

> ID：14237883
> 
> 赞同：0
> 
> 时间：2013-01-09T14:51:17.453
> 
> 标签：javascript, ringojs

您能否推荐任何关于 ringojs 的 pf 资源（教程、免费电子书、付费电子书等）。官网和 github 文档仅用于设置目的，请勿粘贴[ringojs.org](http://www.ringojs.org/)和[github](https://github.com/ringo/)链接。提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-07T22:17:26.187

这是我为高中初级编程课写的简短介绍。它并不广泛，但足以让某人有一个基本的开始。该文档（请参阅 oberhamsi 的链接）非常适合有经验的开发人员，但新手程序员有时需要更多解释。

**我如何用 RingoJS 编写程序？**

RingoJS 使用*模块*来提供功能，例如从键盘读取数据、打印到屏幕、读写文件，甚至网络操作。您可以通过调用`require()`具有模块名称的函数来在程序中使用模块。这是一个简单的 helloWorld.js 示例：

```
var system = require("system");
system.stdout.writeLine("hello, world"); 
```

这很容易。或者，如果您要在屏幕上写入大量信息，您可以通过直接声明对 stdout 的引用来节省一些输入，如下所示：

```
var stdout = require("system").stdout;
stdout.writeLine("hello, world"); 
```

第二个程序和第一个程序做同样的事情。每种方法都有好处，因此请选择最适合您的程序的方法。当然，您可以像这样进一步自定义代码：

```
var print = require("system").stdout.writeLine;
print("hello, world"); 
```

这是 JavaScript。让你的想象力翱翔。你可以这样做。

**如何使用 RingoJS 从键盘读取数据？**

系统模块提供了一个名为 的对象`stdin`，它允许您的程序读取键盘输入。您可以将它与系统`stdout`对象一起使用来编写执行控制台 I/O 的程序。这是一个名为 helloName.js 的示例程序，它询问用户他们的姓名，然后打招呼：

```
var main = function()
{
    "use strict";
    var stdout = require("system").stdout;
    var stdin = require("system").stdin;
    stdout.write( "What is your name? " );
    var name = stdin.readLine();
    stdout.writeLine( "Hello, " + name );
}(); 
```

**数字输入呢？**

该函数`stdin.readLine()`返回一个字符串。您可以通过调用 JavaScript 函数将字符串转换为整数`parseInt()`。还有一个函数`parseFloat()`可以将字符串转换为浮点数值变量。试试这个名为 squared.js 的程序，它使用`parseInt()`：

```
var main = function() {
    "use strict";
    var stdout = require("system").stdout;
    var stdin = require("system").stdin;
    stdout.write( "Enter an integer: " );
    var n = parseInt( stdin.readLine() );
    stdout.writeLine( "n squared is " + (n*n) );
}(); 
```

**我可以从一行中读取多个输入值吗？**

绝对地！JavaScript String 类有一个调用方法`split()`来完成这项工作。以下示例程序使用 JavaScript 正则表达式将字符串拆分为标记数组。使用正则表达式的好处是即使数字之间有多个空格它也可以工作。正则表达式是一个高级主题，因此如果您不了解 split 命令的该部分是如何工作的，请不要惊慌。只需将此示例隐藏起来，以便在您想从单行输入中读取两条或更多条信息时使用它。

```
var main = function() {
    "use strict";
    var stdout = require("system").stdout;
    var stdin = require("system").stdin;
    stdout.write( "Enter rectangle height and width: " );
    var line = stdin.readLine();
    var tokens = line.split(/\s+/);
    var height = parseInt(tokens[0]);
    var width = parseInt(tokens[1]);
    stdout.writeLine( "The area of a " + height + " by " + width + " rectangle is " + (height*width) );
}(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:51:52.137

有一个网络应用教程：[http](http://ringojs.org/tutorial/) ://ringojs.org/tutorial/文档部分比你想象的要多[http://ringojs.org/documentation](http://ringojs.org/documentation)

# javascript - Facebook Api 呼叫就绪

> ID：14237887
> 
> 赞同：0
> 
> 时间：2013-01-09T14:51:27.663
> 
> 标签：javascript, facebook, facebook-graph-api

我在 Javascript 中遇到同步问题。代码如下。当我调用以获得共同的朋友时，虽然我的函数仍在通过 API 回调填充数组，但打印`"Quite a bunch: 0"`发生**在** 打印之前 -`console.log(friendID +" -> " + mutualfriends.data.length);`

我知道这一定是一个回调/异步问题，但我不知道如何处理它。我填充数组是有原因的 - 需要为下一部分填充它。

代码：

```
function getMutualFriends(friendID)
{
  //console.log(response.data[i].id);
  try{

           FB.api('/me/mutualfriends/'+friendID, function(mutualfriends) {
             //console.log(mutualfriends);
             //console.log(mutualfriends.data.length);

             console.log(friendID +" -> " + mutualfriends.data.length);
             mutualFriendsList.push([friendID,mutualfriends.data.length]);
           });
    }
  catch(err){
    console.log('error caught: ' +err);
  }

}

function getFriendsList()
{
  FB.getLoginStatus(function(response){   
    FB.api('/me/friends', function(response) {

         for(i=0; i<response.data.length;i++)
         {
           var friendID = response.data[i].id;
           console.log(friendID);
           friendsList.push(friendID);
         }

         console.log('Interesting, we gathered: '+friendsList.length+' friends,');

         console.log('lets check mutual friends now');

        for(j=0; j<friendsList.length;j++)
        {
          getMutualFriends(friendsList[j]);
        }

        console.log('Quite a bunch: ' + mutualFriendsList.length);

        });//friends
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:06:18.187

您可能希望将“后置条件”代码转换为回调。

所以你现在有：

```
for(j=0; j<friendsList.length;j++)
{
  getMutualFriends(friendsList[j]);
}

console.log('Quite a bunch: ' + mutualFriendsList.length); 
```

你会想要这样的东西：

```
for(j=0; j<friendsList.length;j++)
{
  getMutualFriends(friendsList[j], function(mutualFriendsList) {
    console.log('Quite a bunch: ' + mutualFriendsList.length);
  });
} 
```

当你像这样设置它时，你的`getMutualFriends`函数一旦得到结果就可以调用回调：

```
function getMutualFriends(friendID, callback)
{
   FB.api('/me/mutualfriends/'+friendID, function(mutualfriends) {
     mutualFriendsList.push([friendID,mutualfriends.data.length]);
     callback(mutualFriendsList);
   });
} 
```

这将为每次调用`getMutualFriends`. 如果您希望回调只为**所有**朋友触发一次，您需要进一步扩展这个概念。

**更新**：

您可以将上述“每个朋友”回调与@RGDev 的条件结合起来检测最后一个朋友：

```
for(j=0; j<friendsList.length;j++)
{
  getMutualFriends(friendsList[j], function(mutualFriendsList) {
    if (mutualFriendsList.length == friendsList.length) {
      console.log('Quite a bunch: ' + mutualFriendsList.length);
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:02:08.277

getMutualFriends 正在自己进行异步调用（通过调用 FB.api），因此在完成之前您无法打印 mutex加工）。

你不能依赖那个集合是异步的吗？我不知道你在做什么，但也许（如果你在屏幕上绘制它的例子）你可以在每次 FB.api('/me/mutualfriends/' 的回调时重绘该组件+friendID, ...) 完成。

过去我遇到过类似的问题，我通过使用一个主干.js 的集合而不是一个简单的 javascript 数组来解决它。然后我将一个侦听器绑定到集合的添加事件，并在每次向其中添加对象时打印朋友的数量。

祝你好运，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:06:09.620

您可以使用一个while 循环来等待mutualFriendsList.length 等于friendsList.length。这意味着所有 ajax 函数的返回函数都已实现。

它看起来像：

```
while(mutualFriendsList.length != friendsList.length)
{
console.log("Still Waiting");

 }
console.log('done')
// do your data processing 
```

有点不雅，但它应该工作

# python - 在 Python 中从 MS Word 文档中提取标题

> ID：14237888
> 
> 赞同：5
> 
> 时间：2013-01-09T14:51:27.063
> 
> 标签：python, ms-word

我有一个MS Word文档包含一些文本和标题，我想提取标题，我为win32安装了Python，但我不知道使用哪种方法，似乎python for windows的帮助文档没有列出功能对象这个词。以下面的代码为例

```
import win32com.client as win32
word = win32.Dispatch("Word.Application")
word.Visible = 0
word.Documents.Open("MyDocument")
doc = word.ActiveDocument 
```

我怎么知道word object的所有功能？我在帮助文档中没有找到任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:06:44.567

Word 对象模型可以在[这里](http://msdn.microsoft.com/en-us/library/bb244515%28v=office.12%29.aspx)找到。您的`doc`对象将包含这些属性，并且您可以使用它们来执行所需的操作（请注意，我没有在 Word 中使用此功能，因此我对对象模型的了解很少）。例如，如果您想阅读文档中的所有单词，您可以这样做：

```
for word in doc.Words:
    print word 
```

你会得到所有的单词。这些`word`项目中的每一个都是一个`Word`对象（[在此处](http://msdn.microsoft.com/en-us/library/bb258018%28v=office.12%29.aspx)参考），因此您可以在迭代期间访问这些属性。就您而言，这是获得样式的方法：

```
for word in doc.Words:
    print word.Style 
```

在具有单个标题 1 和普通文本的示例文档上，将打印：

```
Heading 1
Heading 1
Heading 1
Heading 1
Heading 1
Normal
Normal
Normal
Normal
Normal 
```

要将标题组合在一起，您可以使用`itertools.groupby`. 正如下面的代码注释中所解释的，您需要引用`str()`对象本身的 ，因为 using`word.Style`返回的实例不会与相同样式的其他实例正确组合：

```
from itertools import groupby
import win32com.client as win32

# All the same as yours
word = win32.Dispatch("Word.Application")
word.Visible = 0
word.Documents.Open("testdoc.doc")
doc = word.ActiveDocument

# Here we use itertools.groupby (without sorting anything) to
# find groups of words that share the same heading (note it picks
# up newlines). The tricky/confusing thing here is that you can't
# just group on the Style itself - you have to group on the str(). 
# There was some other interesting behavior, but I have zero 
# experience with COMObjects so I'll leave it there :)
# All of these comments for two lines of code :)
for heading, grp_wrds in groupby(doc.Words, key=lambda x: str(x.Style)):
  print heading, ''.join(str(word) for word in grp_wrds) 
```

这输出：

```
Heading 1 Here is some text

Normal 
No header 
```

如果你用`join`列表推导替换，你会得到下面的（你可以看到换行符）：

```
Heading 1 ['Here ', 'is ', 'some ', 'text', '\r']
Normal ['\r', 'No ', 'header', '\r', '\r'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-22T10:37:03.070

将 word 转换为 docx 并使用 python docx 模块

```
from docx import Document

file = 'test.docx'
document = Document(file)

for paragraph in document.paragraphs:
    if paragraph.style.name == 'Heading 1':
        print(paragraph.text) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T14:59:31.990

您还可以使用 Google Drive SDK 将 Word 文档转换为更有用的内容，例如 HTML，您可以在其中轻松提取标题。

[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

# php - PHP 函数和变量存储在数据库中的字符串中

> ID：14237891
> 
> 赞同：2
> 
> 时间：2013-01-09T14:51:37.157
> 
> 标签：php, string, function, eval

我需要将数据存储在数据库中，当我从数据库中获取数据时，我需要字符串中的函数和变量这样计算。

例子

```
$str = "<p>Dear {$this->name},</p>" 
```

然后我将它存储在数据库中，当我检索字符串并运行它时

```
eval("\$detail= \"$detail\";"); 
```

然后变量被填充名称。这正是我所需要的并且工作正常。

问题是我想以这个变量作为参数运行一个函数。

例子。我想`ucwords`变量。

我努力了：

```
$str = "<p>Dear {ucwords($this->name)},</p>"  //just echoed {ucword(->name)},
$str = "<p>Dear {ucwords($this->name)},</p>"  //Fatal error: Function name must be a string, 
```

我是否朝着正确的方向前进？这是可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:56:57.403

您不需要将 PHP 代码保存在数据库中。这是一种不好的做法，也可能导致安全漏洞。

而是像这样存储在数据库字符串中：

```
<p>Dear [name],</p> 
```

当你检索它时，你可以这样做：

```
$stringFromDb = str_replace("[name]", $this->name, $stringFromDb); 
```

或者

```
$stringFromDb = str_replace("[name]", ucwords($this->name), $stringFromDb); 
```

其他常见的方法是使用`sprintf`. 因此，您需要将`%s`值作为占位符存储在数据库字符串中。

例子：

```
<p>Dear %s,</p> 
```

并替换为

```
$stringFromDb = sprintf($stringFromDb, ucwords($this->name)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:26:19.553

您似乎正在寻找一种简单的模板语言。

自从我编写 PHP 以来已经有很长一段时间了（我突然想起了为什么......），但这是我突然想到的。

它应该支持对象 ( `$a->name`) 和数组 ( `$a["name"]`) 作为输入对象。

您可以在`$valid_filters`.

```
$valid_filters = array("title" => "ucfirst", "upper" => "strtoupper");

function _apply_template_helper($match) {
  global $_apply_template_data, $valid_filters;
  $var = $match[1];
  $filter = $valid_filters[trim($match[2], ':')];
  $value = is_array($_apply_template_data) ? $_apply_template_data[$var] : $_apply_template_data->$var;
  if($filter && !empty($value)) $value = call_user_func($filter, $value);
  return !empty($value) ? $value : $match[0];
}

function apply_template($template, $data) {
  global $_apply_template_data;
  $_apply_template_data = $data;
  $result = preg_replace_callback('/\{\{(.+?)(:.+?)?\}\}/', "_apply_template_helper", $template);
  $_apply_template_data = null;
  return $result;
} 
```

如何使用它：

```
$template = "Hello {{name:title}}, you have been selected to win {{amount}}, {{salutation:upper}}";
echo apply_template($template, array("name"=>"john", "amount" => '$500,000', "salutation" => "congratulations")); 
```

结果：

> 你好，约翰，你被选中赢得 500,000 美元，恭喜

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:11:46.153

我找到了以下作品，

如果我在类本身中包含该函数，则可以使用以下代码调用它

```
<p>Dear {\$this->properCase(\$this->rl_account->name)},</p> 
```

但是我希望现在能够做到这一点，而无需让数据库拥有 Alex Amiryan 之前提到的代码。

# android - SDK更新失败

> ID：14237893
> 
> 赞同：5
> 
> 时间：2013-01-09T07:06:09.387
> 
> 标签：android, windows, sdk

我无法在我的 Windows 机器上更新 Android SDK 工具版本 21.0.1。安装时，此日志显示：

```
 Installing Android SDK Tools, revision 21.0.1
  Failed to rename directory E:\android-sdks\tools to E:\android-sdks\temp\ToolPackage.old01.
  [find_lock] Directory locked by cmd.exe;java.exe
  Done. Nothing was installed. 
```

如何将 SDK 更新到最新版本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:19:24.103

Android SDK 更新成功。这个工作.. [检查这里](http://code.google.com/p/android/issues/detail?id=4410#c38)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:16:36.827

我经历过这个。只需按照步骤。关闭日食（如果打开）。

*   转到 android-sdk 文件夹
*   使用 tools-copy2 （或任何东西）复制工具文件夹并粘贴到同一位置
*   只需从 tools-copy2 启动更新
*   你将能够更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:35:54.710

关闭 ADT，但离开 Android SDK Manager 并单击重新启动或重播

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:19:48.287

我 99% 确定您确实遇到了 UAC 问题。在多种已知情况下，Windows Vista 或 7（可能是 8）将允许创建新文件，但会静默阻止修改，并在您尝试时返回“文件锁定”错误消息。

尝试暂时禁用 UAC（请记住，您必须重新启动才能使其生效）并在禁用 UAC 的情况下运行更新程序。如果失败，请更进一步，确保从具有管理权限的命令提示符启动更新程序。

我认为根本原因与安装程序产生另一个进程/线程/应用程序有关，该进程/线程/应用程序由于某种原因不继承父级的管理员权限，并且以导致 Windows 静默阻止操作而不是为您提供特权提升提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T10:00:38.653

我在更新 android SDK 平台工具时遇到问题。我所做的是以管理员身份运行 SDK 管理器并重新加载包。之后，当我更新时，它工作正常！

# java - 当两个页面都在 HTTPS 协议中时，从一个页面到另一个页面时，是否总是发送请求标头“referer”

> ID：14237900
> 
> 赞同：0
> 
> 时间：2013-01-09T14:51:52.150
> 
> 标签：java, https

`"referer"` `request.getHeader("referer")`当两个页面都属于HTTPS协议时，称为as的请求标头总是从一个页面发送到另一个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:22:14.900

至少在正常浏览下，是的。http-referrer 标头由浏览器发送，与 SSL 无关。不过，我不确定在浏览器的“隐私”模式下浏览时会发生什么。它可能因浏览器/版本而异。

# magento - 具有自定义属性的分层导航

> ID：14237903
> 
> 赞同：0
> 
> 时间：2013-01-09T14:52:03.807
> 
> 标签：magento

我们有一个分层导航（[截图](http://cl.ly/image/1V2b2W0a2Y29)），允许我们的用户按类别、价格和颜色进行过滤。类别和价格工作得很好，因为它们默认为 Magento。尝试按颜色（自定义属性）过滤时会出现问题。

它抛出一个异常。我能够追踪堆栈跟踪，但我无法理解它。想知道是否有人可以帮助我指出正确的方向。追踪：[https ://gist.github.com/4490917](https://gist.github.com/4490917)

我们正在使用 Magento Enterprise v1.12.0.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:03:48.637

**app/Mage/Catalog/Model/Resource/Layer/Filter/Attribute.php**有问题

 **用以下替换你的类，它的问题应该得到解决。

```
class Mage_Catalog_Model_Resource_Layer_Filter_Attribute extends Mage_Core_Model_Resource_Db_Abstract
{
/**
 * Initialize connection and define main table name
 *
 */
protected function _construct()
{
    $this->_init('catalog/product_index_eav', 'entity_id');
}

/**
 * Apply attribute filter to product collection
 *
 * @param Mage_Catalog_Model_Layer_Filter_Attribute $filter
 * @param int $value
 * @return Mage_Catalog_Model_Resource_Layer_Filter_Attribute
 */
public function applyFilterToCollection($filter, $value)
{

    $filterSingleton = FilterSingleton::singleton();

    if (!isset($filterSingleton->return)) {

        $collection = $filter->getLayer()->getProductCollection();
        $attribute  = $filter->getAttributeModel();
        $connection = $this->_getReadAdapter();
        $tableAlias = $attribute->getAttributeCode() . '_idx';
        $conditions = array(
            "{$tableAlias}.entity_id = e.entity_id",
            $connection->quoteInto("{$tableAlias}.attribute_id = ?", $attribute->getAttributeId()),
            $connection->quoteInto("{$tableAlias}.store_id = ?", $collection->getStoreId()),
            $connection->quoteInto("{$tableAlias}.value = ?", $value)
        );

        $collection->getSelect()->join(
            array($tableAlias => $this->getMainTable()),
            join(' AND ', $conditions),
            array()
        );

        $filterSingleton->return = $this;

        return $this;

    } else {
        return $filterSingleton->return;
    }
}

/**
 * Retrieve array with products counts per attribute option
 *
 * @param Mage_Catalog_Model_Layer_Filter_Attribute $filter
 * @return array
 */
public function getCount($filter)
{
    // clone select from collection with filters
    $select = clone $filter->getLayer()->getProductCollection()->getSelect();
    // reset columns, order and limitation conditions
    $select->reset(Zend_Db_Select::COLUMNS);
    $select->reset(Zend_Db_Select::ORDER);
    $select->reset(Zend_Db_Select::LIMIT_COUNT);
    $select->reset(Zend_Db_Select::LIMIT_OFFSET);

    $connection = $this->_getReadAdapter();
    $attribute  = $filter->getAttributeModel();
    $tableAlias = sprintf('%s_idx', $attribute->getAttributeCode());
    $conditions = array(
        "{$tableAlias}.entity_id = e.entity_id",
        $connection->quoteInto("{$tableAlias}.attribute_id = ?", $attribute->getAttributeId()),
        $connection->quoteInto("{$tableAlias}.store_id = ?", $filter->getStoreId()),
    );

    $select
        ->join(
            array($tableAlias => $this->getMainTable()),
            join(' AND ', $conditions),
            array('value', 'count' => new Zend_Db_Expr("COUNT({$tableAlias}.entity_id)")))
        ->group("{$tableAlias}.value");

    return $connection->fetchPairs($select);
    }
}
class FilterSingleton {

static private $instance;

public $return = null;

    private function __construct() {

}

static public function singleton() {
     if (!isset(self::$instance)) {
        $c = __CLASS__;
        self::$instance = new $c;
    }

    return self::$instance;
}
} 
```

[http://aceph.tumblr.com/post/21851233473/magento-you-cannot-define-a-correlation-name](http://aceph.tumblr.com/post/21851233473/magento-you-cannot-define-a-correlation-name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T21:12:03.197

您可以简单地从布局中删除 enterprisesearch 块，例如下面的 catalogsearch.xml：

```
 <catalogsearch_result_index translate="label">
    ...
        <reference name="left">
            <remove name="enterprisesearch.leftnav"/>
        </reference>
        <reference name="right">
            <block type="catalogsearch/layer" name="catalogsearch.rightnav" before="-" template="catalog/layer/view.phtml"/>
        </reference>
    ...
    </catalogsearch_result_index> 
```

发生错误是因为它们是两个块在布局中做同样的事情。默认情况下，企业搜索在那里。**

# python - 每天自动下载

> ID：14237907
> 
> 赞同：0
> 
> 时间：2013-01-09T14:52:13.177
> 
> 标签：python, python-2.7, download

在我尝试编写脚本之前，我想知道一个程序是否已经存在。

每天我都会下载openstreetmap数据。这些文件每天都会使用命名约定“xxx.osc.gz”进行更新，文件会被 1 up'd ex。“001”到“002”。

我只能找到帮助镜像或安排下载的程序（osmosis，或 wget）。我不希望每天都使用整个数据库，只需要最新的文件。

任何建议或指向正确方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:15:02.327

有一个带有最新变更集的 YAML 文件。记录您的最新下载，然后`urlretrieve`在该范围内使用。

```
import os, urllib, yaml

os_url = "http://planet.openstreetmap.org/replication/"
base_dir = "./"

try:
    with open('download.log', 'r') as f:
        last_set = int(f.readlines()[-1].strip())
except:
    last_set = int(raw_input("Enter latest set:"))

stream = urllib.urlopen(os_url+"changesets/state.yaml")
latest_set = yaml.load(stream)['sequence']

for seq in range(last_set+1,latest_set+1):
    changeset_dir = "changesets/000/%03d/"%(seq/1000)
    changeset_file = "%03d.osm.gz"%(seq%1000)
    remote_file = os_url + changeset_dir + changeset_file
    local_dir = base_dir + changeset_dir
    local_file = local_dir + changeset_file

    if not os.path.exists(local_dir):
        os.makedirs(local_dir)

    try:
        with open(local_file) as f: pass
        print "Already downloaded",seq
    except:
        urllib.urlretrieve(remote_file, local_file)
        print "Downloaded changeset",seq

print "Up-to-date"

with open('download.log', 'a') as f:
    f.write('%s\n'%latest_set) 
```

# visual-c++ - 在 Visual C++ 中将 System::String^ 转换为 int32

> ID：14237912
> 
> 赞同：1
> 
> 时间：2013-01-09T14:52:36.563
> 
> 标签：visual-c++, datagridview, casting

我有`dataGridView`，我需要检查`dataGridView->Rows[j]->Cells[i]->Value`。如果它 >0 做一些工作，否则 - 什么也不做。我试过了

```
int x =  Int32::Parse(dataGridView1->Rows[j]->Cells[i]->Value->ToString());
if(x > 0 )count++; 
```

但有格式异常，输入字符串的格式不正确。

```
int x =  Convert::ToInt32(dataGridView1->Rows[j]->Cells[i]->Value->ToString()); 
```

还有格式异常，输入字符串的格式不正确。

```
int x = safe_cast<int>(dataGridView1->Rows[j]->Cells[i]->Value); 
```

InvalidCast 异常，指定的强制转换无效。

我做错了什么？

更新：正确的方法是

```
double x =  Convert::ToDouble(dataGridView1->Rows[j]->Cells[i]->Value); 
```

# tcp - Windows 8 中的 TCP 连接问题

> ID：14237913
> 
> 赞同：1
> 
> 时间：2013-01-09T14:52:39.270
> 
> 标签：tcp, windows-8, connection, installation

我有一个小 DLL，可以连接到 Windows 平台上的假脱机程序。它将函数挂钩`StartDocPrinter`，结果每次打印作业命中假脱机程序时都会调用我的 DLL。此 DLL 在 Windows 8 之前的所有平台上都能正常工作。

该 DLL 还能够挂接到 Windows 8 假脱机程序。

DLL 与可以在本地计算机或远程服务器上运行的服务建立 TCP/IP 连接。

问题是：

在 Windows 8 上，有两个“桌面”，即本机 Metro 桌面和一个类似 Windows 7 的桌面。

如果服务在同一台机器上运行，并且我从类似 Windows 7 的桌面提交打印作业，则打印作业进入后台处理程序，调用 DLL 并能够连接到服务，但如果我从 Metro 提交打印作业桌面（例如从 Internet Explorer 中选择打印），打印作业进入假脱机程序，调用 DLL 但**无法**连接到服务并收到`10060 TCP/IP errorcode`. 如果该服务位于远程服务器上，则从两个桌面提交打印作业都可以正常工作。

在本地运行服务时，我尝试同时使用这两者`127.0.0.1`，并且机器拥有自己的 IPV4 地址，但是从 Metro 桌面提交打印时结果是相同的。我试图禁用防火墙，但这并不能解决问题。

有谁知道什么可能导致这种行为？

# c++ - 在 Ubuntu 上使用 GLFW 设置 OpenGL NetBeans 项目

> ID：14237915
> 
> 赞同：3
> 
> 时间：2013-01-09T14:52:43.603
> 
> 标签：c++, opengl, ubuntu, netbeans

我正在尝试在 Ubuntu 上设置 OpenGL 开发环境。我安装了所有库，包括 GLFW，因为我不想使用 GLUT。GLEW 库也已安装。我试图在 NetBeans 中设置它。我从未使用过它之前和现在我得到：

**运行此简单代码时未定义对“glfwInit”** 错误的引用：

```
#include <stdio.h>
#include <cstdlib>
#include <iostream>
#include <GL/glew.h>
#include <GL/glfw.h>
#include "glm.hpp"
using namespace std;
using namespace glm;

int main(int argc, char** argv) {

 /*      init GLFW         */
    if(!glfwInit()){

        fprintf(stderr,"failed to init GLFW");

     }
    return 0;
} 
```

我确定这是与链接器相关的问题。所以我将 libglfw.a 添加到 Linker->Libraries 中，然后出现更多错误，如下所示：

make[2]: 进入目录`/home/sasmaster/NetBeansProjects/OpenGLDemo' mkdir -p dist/Debug/GNU-Linux-x86 g++ -o dist/Debug/GNU-Linux-x86/opengldemo build/Debug/GNU-Linux-x86/main.o /usr/lib/libglfw.a /usr/lib/libglfw.a(window.o): In function`glfwOpenWindow': /usr/lib/libglfw.a(x11_init.o): 在函数`_glfwPlatformInit': /usr/lib/libglfw.a(x11_init.o): In function`_glfwPlatformInit': /usr/lib/libglfw.a(x11_init.o): 在函数`_glfwPlatformInit': /usr/lib/libglfw.a(x11_init.o): In function`_glfwPlatformInit': /usr /lib/libglfw.a(x11_init.o)：在函数`_glfwPlatformTerminate': /usr/lib/libglfw.a(x11_init.o): In function`_glfwPlatformTerminate'中：/usr/lib/libglfw.a(x11_window.o)：在函数`translateKey': /usr/lib/libglfw.a(x11_window.o): In function`translateKey'中：/usr/lib/libglfw.a(x11_window.o)：在函数`translateKey': /usr/lib/libglfw.a(x11_window.o): In function`translateChar' 中：......................................

我还应该链接或安装什么？

**更新：** 据说应该添加 LIBRARIES='-pthread -lglfw -lGL -lX11 -lGLU -lXxf86vm' 但是我应该在哪里添加那些 NetBeans 属性[？](http://sourceforge.net/projects/dark-oberon/forums/forum/227592/topic/1337724)我也尝试放入 MakeFile 和“链接器选项”，但没有任何帮助。

**Update1** 使用以下命令手动编译 main.cpp：

```
**g++ main.cpp  -o Game -lglfw -lGL -lGLU -lX11 -lpthread -lXxf86vm -lm** 
```

编译正常。如何通过 NetBeans 链接所有这些库？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:33:52.427

我想出了解决方案。对于那些感兴趣的人：Openg Project properties.Then **"Linker"** -> **"Libraries"**。在库对话框中：单击**“添加选项”** -> **“其他选项”**。在文本字段中插入这些参数：

**-lGLEW -lglfw -lGL -lGLU -lX11 -lpthread -lXxf86vm -lm**

我猜只有在使用旧的 OpenGL 版本时才需要 lGLU。

# java - 测试多层感知器

> ID：14237916
> 
> 赞同：0
> 
> 时间：2013-01-09T14:52:44.953
> 
> 标签：java, neural-network

我对神经网络很陌生，我仍在尝试理解这些概念。我见过不同编程语言的 MLP 实现。根据我所阅读的内容，目标是找到使输出符合预期的权重。

如果我已经拥有训练网络的权重怎么办？我如何利用这些权重来测试网络？假设我有新的测试集输入，我如何使用经过训练的网络从训练集中查找匹配项？（我正在做图像识别）有可用的库，但我至少想知道事情是如何工作的。我已经阅读并浏览了一些，但似乎找不到测试方法在哪里。

我正在阅读有关 MLP 的文章，但我仍然缺乏知识。我非常想了解这部分。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:03:36.647

这个想法是使用训练集进行监督学习。网络学习（权重）（例如通过反向传播）以正确分类训练集。

当您向网络提供新输入时，希望学习的权重能够对新输入进行正确分类。

# jquery - 如何使用 jQuery 仅获取 HTML 表格中的可见元素？

> ID：14237927
> 
> 赞同：3
> 
> 时间：2013-01-09T14:53:32.823
> 
> 标签：jquery, jquery-selectors, html-table

我有以下问题：我有一个表格，其中每一行都有一些可见的单元格，而有些则不可见。像这样的东西：

```
<table>
  <thead>
  </thead>
  <tbody>
    <tr>
      <td id='cell_a1'>A</td>
      <td id='cell_b1' style='display:none'>B</td>
    </tr>
    <tr>
      <td id='cell_a2'>C</td>
      <td id='cell_b2' style='display:none'>D</td>
    </tr>
  </tbody>
</table>` 
```

而且我只需要使用 .html() 方法检索表的可见内容，就像上面的表一样：

```
<table>
  <thead>
  </thead>
  <tbody>
    <tr>
      <td id='cell_a1'>A</td>
    </tr>
    <tr>
      <td id='cell_a2'>C</td>
    </tr>
  </tbody>
</table>` 
```

我尝试使用可见选择器，但我可能以错误的方式使用它，因为我无法使其工作。无论如何，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T14:54:08.700

要获取所有可见元素，您可以使用具有以下语法[的 :visible 选择器：](http://api.jquery.com/visible-selector/)

```
$('td:visible') 
```

但这不会让您获得所有表的 html，就好像它不包含隐藏元素一样。

为此，您可以暂时复制表格并删除不可见的单元格：

```
var t = $('table').clone();
t.appendTo(document.body);
t.find('td').not(':visible').remove();
var html = t.html();
t.remove(); 
```

[演示](http://jsfiddle.net/5aWym/)（打开控制台）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:12:43.020

This is late I know, but since I like learning ... ;-)

At [jQuery :visible Selector](http://api.jquery.com/visible-selector/), there's a nice example.

HTML:

```
<table>
...
</table>

<div id="output"></div> 
```

JS:

```
var t = $('table').clone();
$('td', t).filter(function() { return $(this).css('display') == 'none'; }).remove();
var html = t.html();
$('#output').text(html); // This shows the HTML code 
```

See [JSFiddle](http://jsfiddle.net/cZrXJ/3/)

# entity-framework - EF：正确的一对零/一关系

> ID：14237929
> 
> 赞同：2
> 
> 时间：2013-01-09T14:53:45.547
> 
> 标签：entity-framework, ef-code-first

我有`User`可能有零或一`Profile`。`Profile`从代码的角度来看，如果我可以访问它应该更方便`User`（因为我会更频繁地访问用户信息而不是其配置文件），但这与 EF Code First 冲突：

```
class User
{
    public int Id { get; set; }
    [ForeignKey("Id")]
    public virtual Profile Profile { get; set; }
}
class Profile
{
    public int Id { get; set; }
} 
```

`User`这放在 DbContext 中，将创建表，如果没有`Profile`在 => bad 之前创建，我无法创建表，因为这`User`是显而易见的原则。最简单的（对于愚蠢的我）解决方案很明显：

```
class User
{
    public int Id { get; set; }
}
class Profile
{
    public int Id { get; set; }
    [ForeignKey("Id")]
    public virtual User User { get; set; }
} 
```

这给了我更多预期的数据库行为。

但是......我觉得这个解决方案不是最好的方法。例如，我无法使用延迟加载通过所有配置文件访问所有用户。所以问题是“如何正确设置一对零/一关系（通过 DataAnnotation 和 FluentAPI）？” 换句话说，“如何正确设置“一`User`对零/一`Profile`”的关系？

可能我完全想错了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:10:57.083

编辑：

在解决方案中添加了删除时的级联。

尝试这个

```
public class User
{
    public int Id { get; set; }

    public int? UserProfileId { get; set; }
    public virtual UserProfile Profile { get; set; }
}

public class UserProfile
{
    public int Id { get; set; }

    public int UserId { get; set; }
    public virtual User User { get; set; }
} 
```

和

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().HasOptional(x => x.Profile).WithRequired(x => x.User).WillCascadeOnDelete(true);

        base.OnModelCreating(modelBuilder);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:47:12.900

Thanks to Drauka. His proposal led me to the solution:

```
class User
{
    public int Id { get; set; }
    [ForeignKey("Id")]
    public virtual Profile Profile { get; set; }
}
class Profile
{
    public int Id { get; set; }
    [Required, ForeignKey("Id")]
    public virtual User User { get; set; }
} 
```

So the trick is done by `Required` which marks that the entity, where it is defined, is dependent while the other one is principal. And it saves one collumn in both tables (for foreign key id).

Just one problem remained: how to ensure `Profile` is deleted in cascade when deleting `User`?

# ruby-on-rails - Rails 控制器 Def 在保存时创建重定向到 URL

> ID：14237933
> 
> 赞同：0
> 
> 时间：2013-01-09T14:53:59.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, simple-form

```
def create
  @purchase = Purchase.new(params[:purchase])

  if session[:purchase_id] != @purchase.save
    redirect_to(@purchase, :notice => "Thank you. You good lookin person you.")
  end
end 
```

我正在尝试

A - 重定向到 URL 或其他控制器路径，或

B - 刷新他们从（new_purchases_path）订购的表格并闪烁：通知用户他们的购买成功。当我尝试添加一个 Url（那将是一个感谢消息页面）时，我得到了语法错误。此代码将用户重定向到索引列表（他们无法访问）

如果我取出`def create`，它默认会闪烁一个通知并向他们显示他们完成的表格。我正在使用 simple_form，但我不确定如何覆盖这些默认值。关于至少重定向到 url 的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:02:15.693

例子：

A - 重定向到 URL 或其他控制器路径

```
 redirect_to :action => "show", :id => 5
  redirect_to "http://www.rubyonrails.org"
  redirect_to  new_purchases_path
  redirect_to  purchases_url
  redirect_to :back 
```

B - 刷新他们订购的表格（new_purchases_path）

```
 render :action => "new" 
```

编辑：

这是一个带有闪存消息的一般示例：

```
if @foo.save
  redirect_to foos_path, :notice => "Foo saved"
else
  flash[:notice] = "Some errors occured"
  render :action => "new"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:01:37.503

这是我今天制作的创建方法的示例

```
def create
 @book = Book.new(params[:book])
 if @book.save
  redirect_to searchbook_path, notice: 'Book was successfully saved'
 else
render :action => 'results'
end 
```

结尾

所以在你的情况下你可以试试这个

```
def create
@purchase = Purchase.new(params[:purchase])
if @purchase.save
 redirect_to purchase_path, :notice 'Thanks for your purchase'
else
render :action => 'new'
end
end 
```

这是假设你有一个购买和新的路径......虽然如果你能让我们知道你遇到了什么错误会有所帮助

# c# - 我想在 web 项目中添加一个类来创建一些 PDF

> ID：14237935
> 
> 赞同：0
> 
> 时间：2013-01-09T14:54:00.700
> 
> 标签：c#, silverlight, wcf-ria-services

我一生都无法弄清楚如何使我正在创建的课程对客户可见。我有以下课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.IO;
using iTextSharp.text;
using iTextSharp.text.pdf;
using System.ServiceModel.DomainServices.Hosting;
using System.ServiceModel.DomainServices.EntityFramework;
using System.ServiceModel.DomainServices.Server;
using System.ServiceModel;

namespace Test1.Web
{
    [EnableClientAccess]
    public class CreatePDF  
    {

        public string paragraph { get; set; }
        public CreatePDF()
        { }

        public void GoGoGadgetPDF()
        {
            var document = new Document();
            string path = HttpContext.Current.Server.MapPath("PDFs");
            PdfWriter.GetInstance(document, new FileStream(path + "/document.pdf", FileMode.Create));
            document.Open();
            document.Add(new Paragraph(paragraph));
            document.Close();
        }
    }
} 
```

我将类直接放在文件夹结构中的Web项目下方，即

*   测试1.Web
    *   参考
    *   ClientBin（文件夹）
    *   模型（文件夹）
    *   创建PDF.cs
    *   身份验证.cs

我可以访问模型文件夹和 Authentication.cs 类中的 DomainService 类。但不是 CreatePDF。

任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:47:57.580

我找到了自己的答案。我的 RIA 服务与 PDF 创建无关。我添加了一个 WCF 服务并改用它。

# codesmith - 未找到 CodeSmith.Data 参考

> ID：14237940
> 
> 赞同：0
> 
> 时间：2013-01-09T14:54:09.677
> 
> 标签：codesmith

我正在使用 CodeSmith 工具生成代码。但是我错误地删除了 Reference CodeSmith.Data 现在我找不到它，或者必须在哪里添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:15:09.670

如果您使用 CodeSmith 生成器项目文件 (.csp) 重新生成代码，则将读取引用。否则，可以在 Templates Common\v4.0 文件夹中找到该引用。

# javascript - 获取动态生成的 DOM 元素的 onclick 方法

> ID：14237944
> 
> 赞同：0
> 
> 时间：2013-01-09T14:54:19.093
> 
> 标签：javascript, dom

我正在使用 onclick 方法向我的页面动态添加图像，如下所示：

```
var image = document.createElement("img");
image.src = "image.png";
image.onclick = function(){
    doSomething();
}

parent.appendChild(image); 
```

这一切都很好。但是，我想**用 onclick 方法**保存（通过 PHP 脚本）生成的 HTML 。我试过使用 parent.innerHTML，但是当它返回图像时，onclick 不存在。

我越来越：

```
...<img src="image.png" />... 
```

当我想要的是类似的东西时：

```
...<img src="image.png" onclick="doSomething()" />... 
```

有人可以帮我弄清楚如何实现这一目标吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:08:32.157

那是不可能的。一个活函数实例不能以其所有范围环境和其他内部或公共属性进行序列化。你只能得到它的代码，做类似的事情

```
image.setAttribute(
  "onclick",
  image.onclick.toString().replace(/^function\s*([^)]*)\s*\{?|\}$|\n/g, "")
);
return image.outerHTML; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:57:10.077

`<script>`如果您在标签或外部文件中的元素属性之外编写脚本，它将永远不会在 HTML 中复制。据我所知，您正在寻找的东西是不可能的。

如果您将 onclick 函数直接写入 HTML，然后将其提取出来，那么这将起作用。

# sql - 将csv文件导入表

> ID：14237945
> 
> 赞同：0
> 
> 时间：2013-01-09T14:54:20.460
> 
> 标签：sql, sql-server, sql-server-2005, csv

我正在尝试使用向导将 csv 文件导入到 sql server 2005 中的表中。但是当我导入文件时总是给我这个错误：

> 执行（错误）消息错误 0xc02020a1：数据流任务 1：数据转换失败。列“第 15 列”的数据转换返回状态值 4 和状态文本“文本被截断或一个或多个字符在目标代码页中不匹配。”。（SQL Server 导入和导出向导）
> 
> 错误 0xc020902a：数据流任务 1：“输出列“列 15”(70)”由于发生截断而失败，并且“输出列“列 15”(70)”上的截断行处置指定截断失败。指定组件的指定对象发生截断错误。（SQL Server 导入和导出向导）
> 
> 错误 0xc0202092：数据流任务 1：处理数据行 1 上的文件“C:\PEP_ENTITIES_71.csv”时出错。（SQL Server 导入和导出向导）
> 
> 错误 0xc0047038：数据流任务 1：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“源 - PEP_ENTITIES_71_csv”(1) 上的 PrimeOutput 方法返回错误代码 0xC0202092。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。（SQL Server 导入和导出向导）

我做错了什么？该文件是从查询中导出的，然后我删除所有记录并尝试导入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:59:12.663

平面文件导入任务将默认长度为`VARCHAR(50)`. 您需要转到平面文件连接页面的高级属性并手动更改长度以匹配目标表。还应该有一个“建议类型”选项，它可能与您正在使用的元数据匹配，但它会从文件中抽取行样本，因此它可能不如手动设置类型那么准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:56:52.787

可能是您尝试从 CSV 导入数据，该数据对于您要导入的字段来说太大了。也许您需要增加 SQL 表中字段的大小？

您是否尝试过从 CSV 导入一个非常小的数据行来查看是否有效？如果是这样，则工作表其余部分中某处的数据过大可能是问题所在。

# windows-services - ActiveMQ 作为服务启动错误

> ID：14237947
> 
> 赞同：1
> 
> 时间：2013-01-09T14:54:23.403
> 
> 标签：windows-services, jms, activemq

我使用 commons-deamon 在 Windows 2008 64 位服务器上安装了 ActiveMQ 作为服务。

当我尝试启动服务时，出现此错误：

```
ACTIVEMQ_HOME: C:\apache-activemq-5.7.0
ACTIVEMQ_BASE: C:\apache-activemq-5.7.0
ACTIVEMQ_CONF: C:\apache-activemq-5.7.0\conf
ACTIVEMQ_DATA: C:\apache-activemq-5.7.0\data
Loading message broker from: xbean:activemq.xml
INFO | Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$1@17494c8: startup date   [Wed Jan 09 16:45:52 IST 2013]; root of context hierarchy
ERROR | Failed to load: class path resource [activemq.xml], reason: Could not load    properties; nested exception is java.io.FileNotFoundException: ${activemq.conf}\credentials.properties (The system cannot find the path specified)
org.springframework.beans.factory.BeanInitializationException: Could not load   properties; nested exception is java.io.FileNotFoundException: ${activemq.conf} \credentials.properties (The system cannot find the path specified) 
```

好像找不到文件

> ACTIVEMQ_HOME\conf\credentials.properties

但该文件确实存在于我的文件夹中。

我需要手动定义环境变量或类似的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:20:23.823

v5.7.0 存档中缺少一些文件。您可以简单地从旧版本中复制它们。请参阅：[此问题的 Jira 问题](https://issues.apache.org/jira/browse/AMQ-4098)

# git - Git正在复制代码

> ID：14237950
> 
> 赞同：1
> 
> 时间：2013-01-09T14:54:31.787
> 
> 标签：git, merge, commit, duplication, cherry-pick

我们刚刚从 Subversion 切换到 Git。

今天早上出现的问题是，我们从一个分支中挑选了一个提交到 master 中，这样 maser 就会有一个错误修复。然后我们将master合并回分支。

当我们尝试编译时，所有来自精心挑选的提交的添加都在代码中出现了两次。

精心挑选的提交包括添加几行代码，最终在代码中出现两次。幸运的是，它们是完整的函数，因此会引发编译器错误。

从来没有发生过冲突。

我们如何避免这种情况。这是一个大问题。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:58:26.407

从 Git 的角度来看，cherry-pick 是一种不同的提交。即，当您合并回来时，您将*在最初应用的基础上合并回一个新提交*。

也就是说，您使用 hash 创建了一个提交`ABC`。你挑选它，创建一个新的 commit `DEF`。然后合并回来`DEF`与 一起应用`ABC`。

在上面，我可能希望您只需在 master 上执行提交（例如），然后将其挑选到您的分支。

[这篇博文](http://sleeplessgeek.blogspot.com/2011/03/using-git-cherry-pick.html)有更多信息。

> 请注意，它会在 master 分支上创建一个新的提交。如果在 master 上运行“git log”，您将看到相同提交消息的不同哈希。为什么？
> 
> 这是因为 Git 如何对提交进行建模。提交是整个存储库的完整快照，给定提交的哈希反映了整个目录中每个文件的状态——它是所有哈希的哈希。
> 
> 很明显，由于主分支没有来自功能分支的所有提交，因此在应用错误修复时它的完整快照将生成与错误修复时功能分支的完整快照不同的哈希值应用在那里。因此，不同的哈希。
> 
> 但是，当您确实将功能分支合并到主分支时，这无关紧要；您进行错误修复的单个文件的哈希值将相同，因为它们的内容将相同，因此该文件的主文件将没有任何更新。

[这篇博文](http://davitenio.wordpress.com/2008/09/27/git-merge-after-git-cherry-pick-avoiding-duplicate-commits/)详细介绍了类似的情况以及如何使用`git rebase`来避免此类问题。

# google-apps-script - GoogleScript 电子表格自定义函数处理一系列单元格并获取它们的值

> ID：14237952
> 
> 赞同：0
> 
> 时间：2013-01-09T14:54:40.537
> 
> 标签：google-apps-script, spreadsheet

我有一个包含一些数据的 Goggle 电子表格，我想编写一个自定义函数以在工作表中使用，它接受一系列单元格和一个分隔符，获取每个单元格值，将其按分隔符拆分，并计算总数。

```
For example
Column A has the following values in rows 1-3: {"Sheep","Sheep,Dog","Cat"}
My function would be called like this: =CountDelimitedValues(A1:A3;",");
It should return the value: 4 (1+2+1) 
```

我遇到的问题是在我的自定义脚本中出现错误，例如

> “TypeError：无法从绵羊类型获取函数 GetValues”

这是我当前的脚本：

```
function CountArrayList(arrayList, delimiter) {
  var count = 0;
  //for (i=0; i<array.length; i++)
  //{
    //count += array[i].split(delimiter).length;
  //}

  var newArray = arrayList.GetValues();
  return newArray.ToString();

  //return count;
} 
```

我知道参数 arraylist 正在从电子表格接收对象数组，但是我不知道如何从这些对象中获取值，或者将它们转换为字符串。

或者我可能会以错误的方式解决这个问题？我有另一个脚本，它从两个字符之间的单元格中提取文本，这对于单个单元格来说很好。一系列不同的细胞是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:46:00.207

这是您可以在不使用脚本但使用普通旧公式的情况下实现的目标：

`=SUM(ARRAYFORMULA(LEN(A1:A3)-LEN(SUBSTITUTE(A1:A3; ","; "")) + 1))`

信用在这里：[https ://webapps.stackexchange.com/q/37744/29140](https://webapps.stackexchange.com/q/37744/29140)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:55:41.787

像这样的工作：

```
function CountArrayList(arrayList) {
return arrayList.toString().split(',').length
} 
```

这还不够吗？

编辑 Oooops，对不起，我忘记了用户定义的分隔符，所以像这样

```
function CountArrayList(arrayList,del) {
return arrayList.toString().split(del).length
} 
```

用法 ：`=CountArrayList(A1:C1;",")`

注意：在上面的示例中，使用“，”以外的其他分隔符会很危险，因为`toString()`使用逗号连接数组元素...如果您确实需要这样做，请尝试使用正则表达式将逗号更改为您使用的内容并应用对此的分歧。

试试这样：

```
function CountArrayList(arrayList,del) {
return arrayList.toString().replace(/,/g,del).split(del).length
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:24:44.390

我的另一个解决方案是我需要隐式转换数组中的对象作为字符串传递。

例如，此函数接受单元格数组，并将其内容输出为以 del 作为分隔符的字符串（类似于 String.Split() 函数）。请注意 TrimString 函数，它被传递给数组的一个元素。

```
function ArrayToString(array,del) {
  var string = "";

  for (i=0; i < array.length; i++) {
    if (array[i] != null) {
      var trimmedString = TrimString(array[i]);
      if (trimmedString != "") {
        if (string.length > 0) {
          string += del;
        }

        string += trimmedString;
      }
    }
  }

  return string;
} 
```

下面是 TrimString 函数。

```
function TrimString(string) {
  var value = "";
  if (string != "" && string != null) {
    var newString = "";
    newString += string;

    var frontStringTrimmed = newString.replace(/^\s*/,"");
    var backStringTrimmed = frontStringTrimmed.replace(/\s*$/,"");
    value = backStringTrimmed;
  }
  return value;
} 
```

我发现这段代码抛出了一个 TypeError ，除非我包含了 newString 变量的声明，并向其中添加了数组元素对象，隐式地将数组元素对象转换为字符串。否则无法调用 replace() 函数。

# java - await() 在播放 1.2.5

> ID：14237954
> 
> 赞同：0
> 
> 时间：2013-01-09T14:54:52.797
> 
> 标签：java, playframework, playframework-1.x, promise

我正在使用 play 1.2.5，并且我正在对 REST 服务进行异步调用。

为此，我创建了一个 Promise 对象，然后将此 Promise 对象作为参数提供给 await() 方法。await() 方法返回给我一个 httpResponse 对象。

它工作正常，然后 REST 服务返回响应。但是如果 REST 服务没有响应（可能是因为 REST 服务已关闭），那么我在 httpResponse 中得到一个空值。但是需要一些时间才能得到回复。

我可以配置等待其余服务响应承诺的时间吗？如果不是，那么默认等待时间是多少？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:29:41.600

如果您使用 play WS lib，您在 WSRequest 对象上有一个 timeout 方法，您可以在其中定义在没有响应的情况下调用返回之前所花费的时间（以秒为单位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:44:11.680

WSRequest 上有一个超时调用。

```
WS.WSRequest wsReq = WS.url("http://whatever");
wsReq.timeout("1min");

... 
```

当你做 a`postAsync()`时，你会得到一个承诺。您还可以调用`promise.onRedeem()`添加处理程序来处理错误等。您可以使用它来捕获超时异常。

# outlook - Outlook 加载项 - 在运行时/从代码中启用/禁用按钮

> ID：14237957
> 
> 赞同：1
> 
> 时间：2013-01-09T14:55:00.317
> 
> 标签：outlook, vsto, add-in

**初始情况：**

我们正在使用基于 Framework 4.0、VSTO、DevExpress WinForm 控件的 VS.NET 2010 为 Outlook 2010 开发 C# 插件。在 Designer 中，我们有一个带有 RibbonTab 的 Ribbon，然后是 RibbonGroup，然后是 RibbonButton。我们正在使用此 Outlook 加载项中的 WebServices。

**客观的：**

我们需要在 WebService 可用/不可用时启用/禁用 RibbonButtons（来自/退出代码）

我们找到了以下链接：

**链接**

功能区对象模型概述： http: [//msdn.microsoft.com/en-us/library/bb608623.aspx](http://msdn.microsoft.com/en-us/library/bb608623.aspx) 功能区概述：http: [//msdn.microsoft.com/en-us/library/bb386097.aspx](http://msdn.microsoft.com/en-us/library/bb386097.aspx) 演练：更新运行时功能区上的控件： [//msdn.microsoft.com/en-us/library/bb608628.aspx](http://msdn.microsoft.com/en-us/library/bb608628.aspx)

经过数小时试图弄清楚如何实现这一点，我们决定在 SO 上发布/询问这个问题。有人有示例代码吗？我们尝试了 IRibbonExtensibility 和 CreateRibbonExtensibilityObject => 我们添加了 RibbonTab、Group 和 Button 并添加了对 Click 事件的订阅 => 事件被触发但未处理（在 button_Click(...) => System.Diagnostics.Debugger.Break () 没有破坏代码执行)

谢谢！

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:21:20.200

您需要以相当频繁的速率使功能区无效，以刷新每个选项卡/按钮的可见性。您可以通过订阅 Click 事件（如您所做的那样）然后调用`RibbonObject.Invalidate();`. 然后`getEnabled="yourTestFunction"`为每个按钮添加一个参数，`public bool yourTestFunction(Office.IRibbonControl control)`（在 Ribbon.cs 文件中定义）返回 Web 服务是否可用。

**请记住，如果 Web 服务已关闭，每次单击都可能会在您在 Web 服务检查中设置的超时时间内挂起您的应用程序**

**编辑：**
刚刚意识到 _Click 事件未映射到 Excel COM 库中，因此每次更改单元格选择时都会运行一些代码（不像每次单击那样频繁，但希望足够好）。

`ThisAddIn.cs`：

```
public static Excel.Application e_application;
public static Office.IRibbonUI e_ribbon;
    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        e_application = this.Application;
        e_application.SheetSelectionChange += new Excel.AppEvents_SheetSelectionChangeEventHandler(e_application_SheetSelectionChange);
    }

    void e_application_SheetSelectionChange(object Sh, Excel.Range Target)
    {
        e_ribbon.Invalidate();
    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
        e_application.SheetSelectionChange -= new Excel.AppEvents_SheetSelectionChangeEventHandler(e_application_SheetSelectionChange);
        e_application = null;
    } 
```

`Ribbon1.cs`：

```
public void Ribbon_Load(Office.IRibbonUI ribbonUI)
{
    this.ribbon = ribbonUI;
    ThisAddIn.e_ribbon = ribbonUI; //Add this line
} 
```

和

```
 public bool getEnabledTest(Office.IRibbonControl control)
    {
        //Whatever you use to test your Web Service
        //return false;
    } 
```

`Ribbon1.xml`：

```
 <button id="WebService" label="Use The Web Service" onAction="executeWebService" getEnabled="getEnabledTest" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:33:02.930

以下标题为[向 Office Fluent 用户界面添加自定义动态菜单的](http://msdn.microsoft.com/en-us/library/office/bb462634%28v=office.12%29.aspx)文章将为您指明正确的方向。

下面是一个动态创建的菜单示例，您可以修改教程以满足您的特定需求。

![动态创建的菜单示例](../Images/61ccfeeb5987fea3e13caabe4564b688.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T12:10:29.497

好的，谢谢你的提示。最后我像这样解决了它：

我声明了一个静态功能区对象，例如：

```
public static RibbonIet ribbon {get; set; } 
```

在功能区的加载事件中，我分配功能区（此），如：

```
Session.Common.ribbon = this; 
```

现在我可以像控制 RibbonButton 一样：

```
Session.Common.ribbon.buttonCreateIncident.Enabled = true; 
```

由于 webService 调用在单独的线程中运行，我不得不使用 MethodInvoker 来更改启用/禁用按钮。它是这样的：

```
If (InvokeRequired)
{
Invoke(new MethodInvoker(() => Session.Common.ribbon.buttonCreateIncident.Enabled = true));
} 
```

也许这对其他人有帮助。

# sql - SQL/服务器连接和安全

> ID：14237960
> 
> 赞同：1
> 
> 时间：2013-01-09T14:55:07.167
> 
> 标签：sql, database, security, connection

我正在开始一个项目（实际上，准确地说是两个）并使用 SQL 数据库。我是新的 SQL，但对我现在正在尝试做出的一个决定感到好奇。

一个项目是我们制作的东西的内部跟踪系统，另一个是我正在制作的小游戏。我预计第一个有 1 到 10 个并发连接，不知道但可以梦想第二个有三到四位数的连接。

我对 SQL 安全性和性能很好奇，在阅读资料时，这个问题不是我找到的解决方案：如果我想要安全和快速，让用户在服务器上登录是否更好，并让服务器访问您的 SQL 数据库，还是给每个用户一个 SQL 连接更好（我假设从服务器建立此连接以防止人们通过在游戏中窥探窃取您的登录信息）？

基本上，我是否应该在服务器上编写访问数据库的脚本，并通过只让服务器写入我的 SQL 数据库来将并发连接保持在最低限度（这是我假设我应该为我的游戏做的事情，因为它将有一些持久的在线stats），还是我应该从客户端直接连接到数据库（我看到大多数教程都是这样做的，我认为这对业务方来说更容易接受）？

阅读它，但这还没有被覆盖。我自己会倾向于第一个，因为通过服务器处理每个连接请求并通过服务器返回信息听起来更安全，但我见过的大多数应用程序都在做第二个，而且我所读的内容都没有谈论/或者。PS：是的，我知道我需要查找更多内容，并且我会为安全性和性能做一些事情，我现在只是对这个问题感到好奇。谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:03:46.890

你最终要做的是配置一个连接池，这是你想要分发给用户的最大并发连接数，它还允许连接被“重用”到一个点。现在就直接连接到数据库的客户端而言，永远不要这样做。您要做的是配置一个非特权用户帐户，该帐户仅对您的数据库具有读取权限，这将是检索数据并将其传递给客户端的帐户。关键是这个只读帐户不能写入数据库，因此它可以最大限度地减少数据损坏的可能性。

现在您需要做的是让您的应用程序连接到服务或某种类型的接口，这些接口将过滤掉不适当的数据，例如攻击（SQL 注入），一旦这些数据被清理，您就可以将其传递给您的数据层。一旦进入数据层，您将打开一个连接并将干净+安全的数据推送到您的数据库中。交易提交后，读者帐户将能够检索它。

因此，回顾一下，您至少需要两 (2) 个数据库帐户。一个是只读的，这是给用户的，一个是用来做工作的，它隐藏在你的应用程序中，不能被外部访问。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T15:03:43.940

服务器是处理 SQL 查询的服务器。客户端不应访问 SQL 数据库。

# javascript - video.js .src() 函数无法识别

> ID：14237964
> 
> 赞同：2
> 
> 时间：2013-01-09T14:55:20.643
> 
> 标签：javascript, html, video, video.js

这是我的代码的一部分：

```
var myPlayer = document.getElementById("example_video_1");
        if (content=="play()") {
                $('title').html("screen:"+content);
            myPlayer.play();
        }
        if (content=="pause()") {
                $('title').html("screen:"+content);
            myPlayer.pause();
        }
        if (content.indexOf("src(")!=-1) {
            var videoMP4 = content.replace("src(","").replace(")","");
            myPlayer.src({type: "video/mp4", src:videoMP4});
            // {type: "video/webm", src:videoMP4.replace(".mp4", ".webm")},
            //  {type: "video/ogg", src:videoMP4.replace(".mp4", ".ogv")}
            // ]
            myPlayer.play();
        } 
```

暂停功能和播放功能按预期工作。但是由于某种原因，当代码到达

```
myPlayer.src({type: "video/mp4", src:videoMP4}); 
```

我的控制台出现错误：

```
Uncaught TypeError: Property 'src' of object #<HTMLVideoElement> is not a function 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T14:59:39.603

`var myPlayer = document.getElementById("example_video_1");`

返回一个标准的 HTML`video`元素。你需要使用：

`var myPlayer = _V_("example_video_1");`

获取 VideoJS 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:59:50.237

更改源和类型，如：

```
myPlayer.setAttribute("src", videoMP4);
myPlayer.setAttribute("type", "video/mp4");
myPlayer.load();  # Force video refresh... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:59:44.237

src 是一个“DOMString”，而不是一个函数。

请参阅[https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement)

> 反映 src HTML 属性，包含要使用的媒体资源的 URL。Gecko 实现了可用于流的类似功能：mozSrcObject。

myPlayer.src = videoMP4;

如果你想指定多个（类型化的）源，你需要创建 DOM 元素作为 myPlayer 的子元素。

# mysql - 在 MySQL 上搜索多对多表

> ID：14237966
> 
> 赞同：0
> 
> 时间：2013-01-09T14:55:27.500
> 
> 标签：mysql, sql, select, many-to-many

我有以下表格，我想对其进行搜索：

```
Table A
+----+----------------------------+
| ID | description                |
+----+----------------------------+
|  0 | horse going bad            |
|  1 | Older Years of Resolutions |
|  2 | The knockknock pirate      |
|  3 | The Wish list              |
|  4 | list that's no list        |
+----+----------------------------+

table TAGS
+----+------------+
| ID | tag        |
+----+------------+
|  0 | list       |
|  1 | knockknock |
+----+------------+

table TAGLINKS
+-------+--------+
| TAGID | JOKEID |
+-------+--------+
|   0   |    2   |
|   0   |    3   |
+-------+--------+ 
```

当我进行此搜索时：

```
select A.* from tags
   join taglinks on tagid=tags.id
   join A on A.id=jokeid
where tag in ('list','knockknock') 
```

给我 A 中的所有条目，它们的标签（或两者）中包含“list”或“knockknock”（2,3）。我正在寻找的是从表 A 中获取条目的查询，这些条目连接到 BOTH list 和 knockknock 标记（仅限 2 个）。

我还通过在表 A 的描述中直接搜索来合并这些数据，这是需要考虑的事情。

现在我有：

```
select A.* from tags
   join taglinks on tagid=tags.id
   join A on A.id=jokeid
where tag in ('list','knockknock') 

UNION

select * from A where locate('list',description) and locate('knockknock',description) 
```

但我也从表 A 中得到 3 个，我只想要 2 个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:58:19.913

为确保所有人都有这两个标签`'list', 'knockknock'`，您应该添加`GROUP BY`子句`HAVING`：

```
...
WHERE tag in ('list', 'knockknock')
GROUP BY tag
HAVING COUNT(tag) = 2) 
```

就像是：

```
SELECT A.* 
FROM tags
INNER JOIN taglinks ON tagid = tags.id
INNER JOIN A on A.id=jokeid
WHERE id IN (SELECT id
             FROM tags
             WHERE tag in ('list', 'knockknock')
             GROUP BY tag
             HAVING COUNT(tag) = 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:07:17.213

这是一个将标签视为一个集合并查找该集合的属性的示例。我喜欢使用 SQL 的聚合函数，特别是`having`子句来解决这个问题。

```
select A.*
from tags join
     taglinks
     on tagid=tags.id join
     A on A.id=jokeid
group by A.id
having max(tag = 'list') = 1 and
       max(tag = 'knockknock') = 1 
```

（注意：这使用了两个 MySQL 特定的语法约定。`group by`仅在 id 列上；其余是“隐藏列”。并且，表达式`tag = 'list'`被视为真实值，因此`case`不需要完整的语句。）

顺便说一句，将其切换到一个或另一个标签很容易：

```
select A.*
from tags join
     taglinks
     on tagid=tags.id join
     A on A.id=jokeid
group by A.id
having max(tag = 'list') = 1 or
       max(tag = 'knockknock') = 1 
```

# mysql - 如何选择与一列中的值匹配而在 MySql 中的另一列中不匹配的记录？

> ID：14237969
> 
> 赞同：0
> 
> 时间：2013-01-09T14:55:41.767
> 
> 标签：mysql, optimization, join

我正在尝试选择相同但具有不同 Networks 值的 MerchantID，例如：

```
ID   MerchantID   Network 
1    1            A 
2    1            A 
3    2            B 
4    2            C 
5    3            D 
6    3            D 
```

在这种情况下，我希望查询返回“2”（因为它是唯一具有不同网络的 MerchantID）。

到目前为止，我有以下查询：

```
SELECT   a.MerchantID
FROM     table a
JOIN   table b
ON  a.ID = b.ID
AND a.Network <> b.Network
AND a.MerchantID = b.MerchantID 
GROUP BY a.MerchantID 
```

事情是表有大约 43,000 条记录，并且该查询需要很多时间（甚至无法获得结果）。

有没有*更好*的方法呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:57:12.350

尝试这个：

```
SELECT MerchantID
FROM yourtable
GROUP BY MerchantID
HAVING COUNT(Distinct Network)>1 
```

这应该更快，使用`<>`条件的连接（通常）更慢。

# c# - c# 中的 TVN_SELCHANGING 消息

> ID：14237970
> 
> 赞同：0
> 
> 时间：2013-01-09T14:55:47.460
> 
> 标签：c#, .net, treeview, window-messages

我正在尝试从 TreeView 中捕获 TVN_SELCHANGING 消息。我知道还有 BeforeSelect 事件，但我想了解为什么我无法捕捉到消息……</p>

我在 msdn 上[读过 TVN_SELCHANG(ED)(ING)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773544(v=vs.85).aspx) LParam 是一个指向[NMTREEVIEW](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773411(v=vs.85).aspx)结构的指针。此外，代码以 WM_NOTIFY 消息的形式发送。

所以我试图实现它：（ [这对我有帮助）](https://stackoverflow.com/questions/10618041/handling-windows-notifications-in-derived-c-sharp-user-control)

```
public partial class TreeviewEx : TreeView
{
    [StructLayout(LayoutKind.Sequential)]
    public struct POINT
    {
        public int X;
        public int Y;
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct TVITEM
    {
        public uint mask;
        public IntPtr hItem;
        public uint state;
        public uint stateMask;
        public IntPtr pszText;
        public int cchTextMax;
        public int iImage;
        public int iSelectedImage;
        public int cChildren;
        public IntPtr lParam;
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct NMHDR
    {
        public IntPtr hwndFrom;
        public IntPtr idFrom;
        public int code;
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct NMTREEVIEW
    {
        public NMHDR hdr;
        public int action;
        public TVITEM itemOld;
        public TVITEM itemNew;
        public POINT ptDrag;
    }

    private const int TVN_FIRST = -400;
    private const int TVN_SELCHANGINGA = (TVN_FIRST - 1);
    private const int TVN_SELCHANGINGW = (TVN_FIRST - 50);
    private const int TVN_SELCHANGEDA = (TVN_FIRST - 2);
    private const int TVN_SELCHANGEDW = (TVN_FIRST - 51);

    private const int WM_NOTIFY = 0x004e;

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_NOTIFY)
        {
            var notify = (NMTREEVIEW)Marshal.PtrToStructure(m.LParam, typeof(NMTREEVIEW));
            if (notify.action == TVN_SELCHANGINGA)
            {
                MessageBox.Show("changing");
            }
        }
        base.WndProc(ref m);
    } 
```

我已经尝试了所有操作，但它们似乎都不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:26:38.413

对，这行不通。它背后有很多历史，本机 Windows 控件旨在用于 C 程序。使用 Petzold 的“Programming Windows”样式编码，您可以将窗口的自定义逻辑放在窗口过程中。并且只是按原样使用了像 TreeView 这样的控件。因此，这些控件将它们的通知消息发送到*父*窗口。因为那是你放置代码的地方。

这与现代 GUI 代码的编写方式不太兼容。特别是继承控件以赋予其新行为的概念。就像您对 TreeViewEx 类所做的那样。你真的很想先在你自己的课堂上收到这些通知。所以你可以用 OnBeforeSelect() 做一些有趣的事情来自定义控件的行为。现在将此消息发送给父级是一个很大的问题，控件不应该知道其父级的实现。

Winforms 修复了这个问题，它将消息从父窗口**反射**回原始窗口。更改消息是必要的，因此完全清楚它是反射消息。它通过向消息编号 WM_REFLECT 添加一个常量来实现，该值可以硬编码为 0x2000。所以像这样修复它：

```
private const int WM_REFLECT = 0x2000;

protected override void WndProc(ref Message m) {
    if (m.Msg == WM_REFLECT + WM_NOTIFY) {
        var nmhdr = (NMHDR)Marshal.PtrToStructure(m.LParam, typeof(NMHDR));
        if (nmhdr.code == TVN_SELCHANGINGW) {
           var notify = (NMTREEVIEW)Marshal.PtrToStructure(m.LParam, typeof(NMTREEVIEW));
           // etc..
        }
    }
    base.WndProc(ref m);
} 
```

# java - 如何避免命令行上的 Java 系统属性？

> ID：14237975
> 
> 赞同：0
> 
> 时间：2013-01-09T14:55:53.907
> 
> 标签：java, command-line, properties, system

我有一个 Java 程序，它使用`user.home`系统属性来获取用户主目录。该程序不应允许`user.home`命令行上的属性。如果用户从命令行为 user.home (java -Duser.home) 传递了错误的目录，那么我的程序将有安全漏洞。

那么如何从命令行限制 user.home 并且它只能通过程序使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:59:54.200

无法保证`user.home`设置正确。

`user.home``$HOME`如果不直接传递给 JVM，则从环境变量初始化。

无法阻止用户修改自己的环境。

# android - CursorIndexOutOfBoundsException 无法解决

> ID：14237977
> 
> 赞同：0
> 
> 时间：2013-01-09T14:55:55.853
> 
> 标签：android, android-cursor

我的光标索引超出范围“请求的索引 0：大小为 0”。它只是一个用户注册和登录应用程序。当没有匹配用户名和密码的用户时，我的应用程序将崩溃。

下面是代码：

**MainActivity.java**

```
final SUSQLiteHelper dbhelper = new SUSQLiteHelper(this);

LoginData login = dbhelper.readOneUser(loginuname.getText().toString(), loginpwd.getText().toString());

                if(login.getUname().toString().equals(loginuname.getText().toString()) && 
                        login.getPwd().toString().equals(loginpwd.getText().toString()))
                {
                    Toast.makeText(getApplicationContext(), "Login Successfull. Welcome " + login.getUname().toUpperCase() +" !".toString(), 
                            Toast.LENGTH_LONG).show();
                }
                else if(login.getUname().toString().equals(loginuname.getText().toString()) && 
                            !login.getPwd().toString().equals(loginpwd.getText().toString()))
                {                       
                    Toast.makeText(getApplicationContext(), "Login Failed. Incorrect password !", 
                            Toast.LENGTH_LONG).show();                      
                }
                else
                    Toast.makeText(getApplicationContext(), "Login Failed. User doesn't exist !", 
                            Toast.LENGTH_LONG).show(); //it never goes here if no username is found in the table 
```

**SUSQLiteHelper.java**

```
 public LoginData readOneUser(String uname, String pwd)
{
    SQLiteDatabase loginUserDB = this.getReadableDatabase();
    LoginData newLogin = null;
    Cursor cursor = loginUserDB.query(TABLE_NAME, new String[]{TABLE_ROW_UNAME, TABLE_ROW_EMAIL, TABLE_ROW_PWD}, TABLE_ROW_UNAME + "=?",
            new String[]{String.valueOf(uname)}, null, null, null);

    if(cursor.moveToFirst())
    {
        newLogin = new LoginData(cursor.getString(0), cursor.getString(1), cursor.getString(2));
    }
    cursor.close();
    loginUserDB.close();
    return newLogin;
} 
```

**登录数据.java**

此类具有 Uname、Pwd、Email 字段的 getter 和 setter 方法以及将这些字段作为参数的构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:18:46.060

在函数 readOneUser() 中，检查：

```
if(cursor.moveToFirst() && !cursor.isAfterLast()) {
     //
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:19:55.430

`CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0`

这意味着`cursor.moveToFirst() returns false`和`Cursor is empty`。因此，尝试添加用于检查光标是否为空的代码段，并取决于修改您的逻辑。

```
public LoginData readOneUser(String uname, String pwd)
{
 SQLiteDatabase loginUserDB = this.getReadableDatabase();
 LoginData newLogin = null;
 Cursor cursor = loginUserDB.query(TABLE_NAME, new String[]{TABLE_ROW_UNAME, TABLE_ROW_EMAIL,TABLE_ROW_PWD}, TABLE_ROW_UNAME + "=?",new String[]{String.valueOf(uname)}, null, null, null);

  if(cursor!=null) //Check whether cursor is null or not
  {
   if(cursor.moveToFirst())
   {
     newLogin = new LoginData(cursor.getString(0), cursor.getString(1), cursor.getString(2));
   }
  }
cursor.close();
loginUserDB.close();
return newLogin;
 } 
```

* * *

```
 LoginData login = dbhelper.readOneUser(loginuname.getText().toString(), loginpwd.getText().toString());
  if(login!=null)
   {
     //check for incorrect username or password
    }
  else
   {
     //Notify that no Username available with these Username
   } 
```

# java - ListView 项目 state_selected 在真实设备上丢失

> ID：14237978
> 
> 赞同：3
> 
> 时间：2013-01-09T14:56:05.173
> 
> 标签：java, android, android-listview, samsung-mobile

我对三星手机上的简单 ListView 有疑问。

我以编程方式创建了一个新的 ListView。这些项目是简单的 TextView。我在列表视图中放置了一个监听器：

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            view.setSelected(true);
        }
    }); 
```

`TextView`（即 listView 的项目）使用 a作为`ColorStateList`textColor（按下-->绿色；选择-->蓝色；默认-->红色）。

在模拟器上，一切都很好：默认情况下项目是红色的，当我按下一个时它变成绿色，当我松开它时它变成蓝色。如果我选择另一个项目：之前选择的变回红色，新选择的变蓝。

在我的三星设备上：默认情况下，项目是红色的，当我按下一个时它变成绿色，当我松开它时它再次变成红色（即未选中）。

~~这似乎是三星 ListView 实现中的一个错误~~（它是一个自定义实现，没有源代码很难跟踪）。

**编辑**：不是错误，而是由于触摸模式而略有不同的行为（请参阅已接受答案中的链接）

**您对如何解决此~~错误/~~行为有任何想法吗？**

附加限制：我不能使用*xml 选择器*，因为我收到的颜色只能在运行时使用。

我的设备是 Samsung GT-B5330 ，API 15。（但我希望它出现在大多数三星设备上）

这是完整的（可编译的）代码

```
import android.R;
import android.app.Activity;
import android.content.res.ColorStateList;
import android.database.DataSetObserver;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class TestActivity extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    RelativeLayout rootLayout = new RelativeLayout(this);
    setContentView(rootLayout);

    //create listView
    ListView listView = new ListView(this);
    listView.setAdapter(new MyListAdapter());
    listView.setDivider(null);
    listView.setDividerHeight(0);
    listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    listView.setItemsCanFocus(false);
    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            view.setSelected(true);
        }
    });
    listView.setBackgroundColor(Color.WHITE);

    //positionning listView
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(100,200);
    lp.setMargins(50,50,10,10);
    rootLayout.addView(listView, lp);
}

private class MyListAdapter implements ListAdapter{

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ColorStateList colorStateList = new ColorStateList(
                new int[][]{
                        new int[]{R.attr.state_pressed},
                        new int[]{R.attr.state_selected},
                        new int[]{-R.attr.state_selected},
                },
                new int[]{
                        Color.GREEN,
                        Color.BLUE,
                        Color.RED});
        TextView textView = new TextView(parent.getContext());
        textView.setText("Item " + position);
        textView.setTextColor(colorStateList);
        return textView;
    }

    @Override
    public boolean areAllItemsEnabled() {
        return true;
    }

    @Override
    public boolean isEnabled(int position) {
        return true;
    }

    @Override
    public void registerDataSetObserver(DataSetObserver observer) {
    }

    @Override
    public void unregisterDataSetObserver(DataSetObserver observer) {
    }

    @Override
    public int getCount() {
        return 10;
    }

    @Override
    public Object getItem(int position) {
        return "data "+position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public int getItemViewType(int position) {
        return position;
    }

    @Override
    public int getViewTypeCount() {
        return getCount();
    }

    @Override
    public boolean isEmpty() {
        return getCount()>0;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:16:25.217

我手头没有三星设备（Galaxy Nexus 不算，它有普通的 Android 并且在你的示例中工作得很好）所以我无法测试我的假设，但似乎 ListView 在它之后删除了项目的选定状态已被释放。您可以使用 HierarchyViewer 检查它（如果您的手机没有root，请使用 Romain Guy 的[ViewServer ）。](https://github.com/romainguy/ViewServer)

由于 TouchMode，依赖具有触摸屏的选择是危险的（请参阅[http://android-developers.blogspot.ru/2008/12/touch-mode.html](http://android-developers.blogspot.ru/2008/12/touch-mode.html)）。简而言之：当用户与触摸屏交互时，您没有选择（或焦点，顺便说一句）的概念。模拟器通常有方向键，所以它的行为可能略有不同。

所以我对你的建议是使用`state_checked`而不是`state_selected`. Android 有[CheckedTextView](http://developer.android.com/reference/android/widget/CheckedTextView.html)可能会有所帮助。只需调用 ListView 的`setItemChecked`. 该解决方案还具有在配置更改之间保持选中项位置以及在按下其他项（如果`CHOICE_MODE_SINGLE`使用）时自动取消选中先前选中项的良好属性。

如果它不可接受并且您需要坚持，`state_selected`那么您可以将 TextView 包装到 LinearLayout 中，它应该可以防止选择消失。但是不要忘记 ListView 在离开屏幕时会为其他列表项重用相同的视图，因此您需要跟踪适配器中的选择状态以正确设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:46:47.967

我可以确认，我只在三星设备（Nexus、S3、Note2）上遇到过类似的错误。Listview 项目具有默认背景颜色，因此在我的情况下为黑色。但随机它变成红色。如果我将 listviewitem backgroundcolor 显式设置为黑色，则不会遇到该错误。老实说，我不知道如何解决您的情况，但是定义所有状态的颜色可能会对您有所帮助。

# ios - 选择 UIPickerView 选择的 UITableView 内的对象

> ID：14237988
> 
> 赞同：1
> 
> 时间：2013-01-09T14:56:40.030
> 
> 标签：ios, objective-c, xcode, uitableview, uipickerview

这是一个非常广泛的问题，而不是针对单个问题的具体问题。如果您不想帮助其中之一，这里是您的警告！

我有一个*带有**`pickerWheel`*. 在这个选择器上，我想要一份 Cargo 船东的名单。当我按下`OK`按钮时，我希望`UITableView`由该所有者拥有的船填充。不多，大约5艘。我希望与`tableView`选择器处于同一视图中。

当我按下列表中的一艘船时，我想被引导到另一个视图，在那里我可以从另一个视图添加可变数字，例如运输负载等。

我知道如何制作和填充以及从选择器中提取数据，我不知道如何使用这些数据以某种方式填充表格，我不知道如何使用表格上的对象将我链接到我所在的视图可以根据发送者设置不同的值。

我不擅长编程，所以带有代码的完整解决方案会很棒！:)

**编辑：我到目前为止的代码**

```
.h file
#import <UIKit/UIKit.h>
#import "StartupViewController.h"

@interface CargoViewController : UIViewController

@property(strong,nonatomic) IBOutlet UILabel *testLabel; //label I use to test stuff instead of LOG
@property(strong,nonatomic) IBOutlet UIButton *findOwner; //button to summon pickerWheel
@property(strong,nonatomic) IBOutlet UIButton *findShip; //Button to confirm selection in picker and unhide tableView
@property(strong,nonatomic) NSArray *boatOwners; //Array for boat owners.
@property(strong,nonatomic) NSMutableArray *boatsForOwner; //My idea was that when you select a owner, i have a if-else series, so say i select "Bob", I code to add his boats to the array. Does this work? IDK
@property(strong,nonatomic) IBOutlet UITableView *boatsTableView; //Table view
-(IBAction)findOwnerButtonPressed:(id)sender;
-(IBAction)findShipButtonPressed:(id)sender;
@property(strong, nonatomic) IBOutlet UIPickerView *shipOwners; //ship owner picker wheel

@end 
```

.m 文件：

```
 #import "CargoViewController.h"

@interface CargoViewController ()

@end

@implementation CargoViewController
@synthesize testLabel, findOwner, findShip,shipOwners, boatsTableView;
@synthesize boatsForOwner, boatOwners;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
[self getDataFromDensity ];

boatOwners = @[@"owner1", @"owner2", @"owner3"]; 

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
-(void) getDataFromDensity
{
NSString *getData = [[NSUserDefaults standardUserDefaults]
                     objectForKey:@"globalMathString"]; //Gets a number from another view, wanted to use in the information about boat view later on. 
testLabel.text = getData;
[boatsForOwner setValue:@"5" forKey:getData];
}
-(IBAction)findOwnerButtonPressed:(id)sender
{
findShip.hidden = NO;
shipOwners.hidden = NO;

boatsTableView.hidden = YES;
}
-(IBAction)findShipButtonPressed:(id)sender
{
shipOwners.hidden = YES;
findShip.hidden = YES;
boatsTableView.hidden = NO;

}
#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
return 1;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
return [boatOwners count];
}
- (NSString *)pickerView:(UIPickerView *)pickerView
         titleForRow:(NSInteger)row
        forComponent:(NSInteger)component
{
return [boatOwners objectAtIndex:row];
}

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{
NSString *boatsFromOwner = [boatOwners objectAtIndex:[shipOwners selectedRowInComponent:0]];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:07:01.197

在伪思维中，我认为你需要这样的东西。

```
cargoshipOwner.h // Class that holds all details for a cargoship owner. 
```

该类可能有一个属性

```
NSMutableArray *listOfCurrentlyOwnedShips; 
```

其中充满：

```
cargoShip.h // CargoShip class.

NSInteger carriageLoad;
UIColor *shipColor;
NSString *model;
NSString *name; 
```

听起来你想用填充填充你的pickerview，`NSMutableArray`当`cargoshipOwners`你选择一个时，你想传递对象的属性`listOfCurrentlyOwnedShips`并填充`UITableView`

当您运行该对象时，您可以轻松地将对象推送到 a`detailView`并对其进行`cargoship`操作。

一旦你`UITableViewDelegate`正确设置了你的和它的功能，你的`.m`文件中应该有以下功能。

您需要使用该函数`cellForRowAtIndexPath:`来绘制单元格，示例如下所示：

```
-(UItableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexpath
{

    // Create a cell with 300 width and 80 height.
    UITableViewCell *cell = [[UITableViewCell alloc] initWithFrame:CGRectmake(0,0,300,80)]; 

    // Create a label.
    UILabel *lblCargoShipOwner = [[UILabel alloc] initWithFrame:CGRectMake(10,12,200,20)];
    lblCargoShipOwner.tag = 1;
    lblCargoShipOwner.textColor = [UIColor blackColor];
    lblCargoShipOwner.backGroundColor = [UIColor clearColor];    

    // Add it to your cell.
    [cell.contentView addSubView:lblCargoShipOwner];

    // Get the label.
    UILabel *textLabel = (UILabel *)[cell viewWithtag:1];

    // Add the owner's name to the label.
    textLabel.text = [[listOfCargoShipOwners objectAtIndex:indexPath.row]sName];

    // important to note is that listOfCargoShipOwners is your datasource.
} 
```

填充后，您可以点击一个单元格并指定在示例`UITableView`中发生的情况：`tableView:didSelectRowAtIndexPath:`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexpath *)indexPath
{

    // Push the owner's list of ships to a UITableViewController

    DetailViewController *dvc = [[DetailViewController alloc] initWithStyle:UITableViewStylePlain andCargoShipList: [[listOfCargoShipOwners objectAtindex:indexPath.row]listOfCurrentlyOwnedShips]];

} 
```

**免责声明：**这是在没有任何形式的 IDE 的情况下编写的，因此它可能根本编译也可能不编译。这也只是一个示例，代码本身可能会也可能不会针对您的特定问题进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:16:08.333

**两个提示：**

**1.**如果你实现了[UITableViewDelegate 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)，那么当用户在表格视图中选择一行时你会得到通知：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

因此，您可以相应地更改视图的内容，然后将该视图推送到您的[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)中。

**2.**检查[UITableViewDataSource 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)，了解如何将内容放入表格视图中。

# android - ListView 的标题视图在配置更改时被破坏

> ID：14237990
> 
> 赞同：3
> 
> 时间：2013-01-09T14:56:46.873
> 
> 标签：android, android-listview, android-fragments, android-orientation

我有一个`ListFragment`使用标题视图的。标头的内容和列表的内容都是从后台任务中获取的。为了不重新获取有关配置更改的数据，我正在调用`setRetainInstance`并保留片段上的数据。

当配置更改时，视图会重新创建，因此它会删除我之前填充的标题视图。由于现在我已经有了数据，我应该将标题视图重新添加到列表中。

不幸的是，当我尝试这样做时......繁荣！

```
java.lang.IllegalStateException: Cannot add header view to list -- setAdapter 
has already been called. 
```

显然，即使视图被销毁并`onCreateView`再次调用，列表的适配器也已设置（或状态被保留），因此无法再次添加标题视图。

如何在`ListView`不重新创建方向更改片段的情况下保留 's 标题或重绘它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T02:23:58.820

这是预期的行为，请查看[此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/widget/ListView.java#ListView.addHeaderView%28android.view.View%2Cjava.lang.Object%2Cboolean%29)的 Android 源代码以获取有关 API 17 的指导，但实际上任何人都可以这样做。相关部分是：

> 添加一个固定视图以显示在列表顶部。如果 addHeaderView 被多次调用，视图将按照添加的顺序出现。如果需要，使用此调用添加的视图可以成为焦点。注意：在调用 setAdapter 之前调用它。这样 ListView 就可以将提供的光标与一个也将考虑页眉和页脚视图的光标包装起来。

```
public void addHeaderView(View v, Object data, boolean isSelectable) {

    if (mAdapter != null && ! (mAdapter instanceof HeaderViewListAdapter)) {
        throw new IllegalStateException(
            "Cannot add header view to list -- setAdapter has already been" +
            "called.");  // Edit: SK9 wrapped this.
    }

    FixedViewInfo info = new FixedViewInfo();
    info.view = v;
    info.data = data;
    info.isSelectable = isSelectable;
    mHeaderViewInfos.add(info);

    // in the case of re-adding a header view, or adding one later on,
    // we need to notify the observer
    if (mAdapter != null && mDataSetObserver != null) {
        mDataSetObserver.onChanged();
    }
} 
```

当您再次添加标头并引发异常时，适配器不为空。要解决您的问题，以下几行就可以了：

```
setListAdapter(null);
getListView().addHeaderView(mHeader);
setListAdapter(new MyAdapter(getActivity(), items)); 
```

我什至不会将此归类为解决方法。我遇到了同样的问题，这对我有用。

显然页脚的处理方式非常不同，请参见[此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/widget/ListView.java#ListView.addFooterView%28android.view.View,java.lang.Object,boolean%29)：

```
public void addFooterView(View v, Object data, boolean isSelectable) {

    // NOTE: do not enforce the adapter being null here, since unlike in
    // addHeaderView, it was never enforced here, and so existing apps are
    // relying on being able to add a footer and then calling setAdapter to
    // force creation of the HeaderViewListAdapter wrapper

    FixedViewInfo info = new FixedViewInfo();
    info.view = v;
    info.data = data;
    info.isSelectable = isSelectable;
    mFooterViewInfos.add(info);

    // in the case of re-adding a footer view, or adding one later on,
    // we need to notify the observer
    if (mAdapter != null && mDataSetObserver != null) {
        mDataSetObserver.onChanged();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:02:44.900

这是一个已知问题，但您可以像这样解决它：

在设置适配器之前添加标题并删除他

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:34:15.087

是的，这是一个已知问题，但可以通过适当的方法避免。似乎存在与您的问题类似的解决方案。
这些人找到了一种解决方法：[在 ListView 中的 OnItemClick 中的 setSelected](https://stackoverflow.com/questions/4800415/android-setselected-in-onitemclick-in-listview "ListView 中的 OnItemClick 中的 setSelected")
希望它有所帮助；）

# sql-server - SQL Server 查询表值参数的短路 EXISTS 语句

> ID：14237991
> 
> 赞同：2
> 
> 时间：2013-01-09T14:56:48.823
> 
> 标签：sql-server, tsql, query-optimization, where-clause, table-valued-parameters

我使用存储过程：

在我的 WHERE 子句中，我使用短路 (OR) 来加速执行，因为查询优化器知道我的大部分输入都默认为 Null。这使我的查询灵活快速。

我在 WHERE 子句中添加了一个表值参数。报告的执行时间从 150 毫秒增加到 450 毫秒，从 70,000 到 200,000。

```
...
WHERE
    --Integer value parameters
    AND ((@hID is Null) OR (h.ID = @hID))
    AND ((@dID is Null) OR (d.ID = @dID))
    AND ((@mID is NULL) OR (m.ID = @mID))
    --New table value parameter 
    --Execute, Processing time and read's increased. 
    --No additional JOIN added.
    AND (NOT EXISTS (SELECT Null FROM @rIDs) OR r.ID IN (SELECT r FROM @rIDs)) 
```

请问如何短路不存在或加快此查询？在执行查询之前，我尝试添加一个 BIT 值并检查行是否在表值参数中。我发现的唯一方法是有两个查询并在另一个上执行一个。如果我必须修改一大堆查询或将多个表值参数添加到组合中，那就不好了。

提前致谢。

**编辑：**

表值参数对比：

```
 AND (NOT EXISTS (SELECT Null FROM @rIDs) OR r.ID IN (SELECT r FROM @rIDs)) 
```

和整数参数：

```
 AND ((@rID) OR (r.ID = @rID)) 
```

使用 TVP 在 0 行和 Integer 参数为空进行编译后显示出相似的执行速度。我假设查询优化器在正确的庄园中短路，而我之前的比较是不正确的。执行计划将上述成本分为 55% 和 45%，这是可以接受的。尽管 TVP 中有更多行时拆分不会改变，但生成报告的时间会增加，因为必须从磁盘读取更多页面。有趣的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:10:13.790

看起来您正在使用表变量。如果您使用临时表并索引您用于条件的列（在您的示例中为 r），您将避免表扫描。然而，这使它成为一个多步骤的过程，但它们的回报可能是巨大的。

为了更具体地解决您的问题，您可以将示例的最后一行更改为 AND EXISTS (SELECT r FROM @rIDs WHERE r = r.ID AND NOT r IS NULL)

如果您可以发布执行计划，我可以给您一个更好的答案。单击显示估计的执行计划，右键单击执行计划并选择将执行计划另存为...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:02:14.927

```
if exists (select * from @rIDs)
    begin
    .... -- query with TVP
    end
else
    begin
    .... -- query without TVP
    end 
```

这允许为每个查询单独执行计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-10T11:58:51.637

您可以在要查询的表（左侧）和您的 TVP 之间尝试 LEFT JOIN。

# android - 从派生类获取数据到父类

> ID：14237994
> 
> 赞同：0
> 
> 时间：2013-01-09T14:56:52.067
> 
> 标签：android, android-intent

我有自己的类，它扩展了 Activity。我还有另一堂课，它扩展了我的第一堂课。如何从头等舱的二等舱获取数据？这是更好理解的模式：class1 扩展了 Activity，class2 扩展了 class1。现在我想从 class1 中获取一些来自 class2 的数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:58:45.527

您可以在类 1（父级）中设置一个属性并从类 2 分配它

```
 class A {
      protected int a;
 }

 class B extends A {

      void method() {
           a = 1;
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:45:27.793

You can get data from derived class upstream into parent class by overriding the getter:

```
abstract class A {
  protected abstract int getX();

  void doThis() {
    int x = getX(); 
  }
}

class B extends A {
 @Override
 protected int getX() { return 17; };
} 
```

This is useful if the derived class must provide some values as there are no reasonable defaults. The class that fails to do this (does not implement the abstract getter method) simply will not compile, and the error message will be the clear hint that should be done. With assignable inner fields, most you can do is to check already at runtime.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:04:36.640

```
class A {
private int x = 5;

protected int getX() {
    return x;
}

protected void setX(int x) {
    this.x = x;
}

public void print() {
    // getX() is used such that 
    // subclass overriding getX() can be reflected in print();
    System.out.println(getX());
   }
}

class B extends A {
public B() {

}

public static void main(String[] args) {
    B b = new B();
    b.setX(10);
    b.print();
}
} 
```

# c# - SQL Inner Join with IN 语句的 Linq 等效语句

> ID：14237998
> 
> 赞同：1
> 
> 时间：2013-01-09T14:56:57.443
> 
> 标签：c#, linq, linq-to-sql

```
CREATE TABLE PersonTask
(
PersonId INT NOT NULL,
WeekId INT NOT NULL,
WeekDaysTaskId INT,
WeekEndTaskId INT
)
GO
CREATE TABLE Task
(
Id INT PRIMARY KEY,
[Description] VARCHAR(250) NOT NULL
)
GO
INSERT INTO Task(Id, [Description]) VALUES(1, 'Task-01')
INSERT INTO Task(Id, [Description]) VALUES(2, 'Task-02')
INSERT INTO Task(Id, [Description]) VALUES(3, 'Task-03')
GO
INSERT INTO PersonTask(PersonId, WeekId, WeekDaysTaskId, WeekEndTaskId) VALUES(1, 1, NULL, 1)
INSERT INTO PersonTask(PersonId, WeekId, WeekDaysTaskId, WeekEndTaskId) VALUES(1, 2, 2, NULL)
INSERT INTO PersonTask(PersonId, WeekId, WeekDaysTaskId, WeekEndTaskId) VALUES(1, 3, 3, 3)
GO

SELECT 
        PT.PersonId, 
        WeekId,
        'Not on Bench' as [Status]
    FROM PersonTask AS PT
    INNER JOIN Task AS T ON T.Id IN (PT.WeekDaysTaskId, PT.WeekEndTaskId)
    WHERE WeekId = 3/*Param-1*/ and PersonId = 1/*Param-2*/ 
```

我正在尝试编写与上述 T-sql 语句等效的 linq 查询，但徒劳无功。有人可以帮助使用 C# Linq 查询来获取上述 T-SQL 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:24:11.953

必须类似于（前提是您有 personTaskQueryable 和 taskQueryable）：

```
from pt in personTaskQueryable
from t in taskQueryable
where (t.Id == pt.WeekDaysTaskId || t.Id == pt.WeekEndTaskId)
    && pt.WeekId == 3 && pt.PersonId == 1
select new { pt.PersonId, pt.WeekId, Status = "Not on Bench" } 
```

我没有尝试，因为我直接在答案文本框中进行编码，但 Linq 文档说你不能用“join”运算符做这样的事情，因为它只支持 equijoins。

解决方案是首先构建笛卡尔积并从那里限制结果集。