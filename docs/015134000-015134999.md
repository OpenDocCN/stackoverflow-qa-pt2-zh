# StackOverflow 问答 15134000-15134999

# python - matplotlib 中的彩色线框图

> ID：15134004
> 
> 赞同：20
> 
> 时间：2013-02-28T11:11:53.130
> 
> 标签：python, colors, matplotlib, wireframe

我正在尝试根据 z 值为线框图着色。我在互联网上找不到任何代码示例。

这是一个具有我想要的颜色的曲面图和一个我无法获得线条颜色的线框图的示例：

```
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt

# some numbers for the data
P=12000 #W
Q=1     #kg/s
DT=3    #K
cp=4169.32  #J/kgK

dDT=np.logspace(-2,0,20,endpoint=True)
dQ=Q*np.logspace(-3,-1,20,endpoint=True)

# the plotting data
m1,m2=np.meshgrid(dDT,dQ)
err=cp*np.sqrt((m1*Q)**2+(m2*DT)**2)/P

# the wiremesh plot that i need fixed
fig=plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot_wireframe(m1, m2, err, color=err/err.max(),cmap='jet')
ax.set_xlabel('dDT')
ax.set_ylabel('DQ')
ax.set_zlabel('relative error')

# the surface plot that has the colors i want
fig = plt.figure()
ax = fig.gca(projection='3d')

surf = ax.plot_surface(m1, m2, err,rstride=1,  cstride=1, cmap=cm.jet,
    linewidth=0.1, antialiased=False)

fig.colorbar(surf, shrink=0.5, aspect=5)

ax.set_xlabel('dDT')
ax.set_ylabel('DQ')
ax.set_zlabel('relative error')
plt.show() 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2017-07-05T23:34:21.030

使用 plot_wireframe 时，每条线只能有一种颜色。相反，您可以使用 plot_surface。要让 plot_surface 设置边缘颜色，您需要给它 facecolors。然后您可以将 facecolors 的 alpha 设置为零。

```
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt
from matplotlib import cm

X, Y, Z = axes3d.get_test_data(0.2)

# Normalize to [0,1]
norm = plt.Normalize(Z.min(), Z.max())
colors = cm.viridis(norm(Z))
rcount, ccount, _ = colors.shape

fig = plt.figure()
ax = fig.gca(projection='3d')
surf = ax.plot_surface(X, Y, Z, rcount=rcount, ccount=ccount,
                       facecolors=colors, shade=False)
surf.set_facecolor((0,0,0,0))
plt.show() 
```

[![彩色线框](../Images/39c2c5629ff06781a6c7ab8d710b447b.png)](https://i.stack.imgur.com/VQhjl.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T23:23:10.897

根据一个也不起作用的变量，我在为圆圈着色和调整大小时遇到​​了类似的问题。所以我的解决方法是对变量的值进行 bin 处理并循环遍历这些 bin。我屏蔽了数据，使得数组`mask`只包含该 bin 中值的数据。

```
ax.plot_wireframe(mask[i], ..., color="red")
ax.plot_wireframe(mask[i], ..., color="blue") 
etc. 
```

我知道它不是很优雅，但就我而言，它完成了工作；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T20:54:26.883

也许您需要`plot_surface`改用？

```
import matplotlib.pylab as plt
from matplotlib import cm 
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure(figsize=(8, 8))
ax = fig.gca(projection='3d')

t = np.linspace(-3, 2, 31)
s = np.linspace(-3, 2, 31)

T, S = np.meshgrid(t, s)

ax.plot_surface(T * T, sqrt2 * T * S, S * S, cmap=cm.jet, rstride=1, cstride=1)

ax.set_xlabel('$t^2$')
ax.set_ylabel('$\sqrt{2} s t$')
ax.set_zlabel('$s^2$')

ax.set_title('line $s = t$ in $\cal F$')

plt.show() 
```

![在此处输入图像描述](../Images/7e577d969804c0eca5762f0499b77aa8.png)

# php - 从 url 下载文件并验证文件已完全下载

> ID：15134006
> 
> 赞同：1
> 
> 时间：2013-02-28T11:11:54.893
> 
> 标签：php, file, curl, file-io, download

我正在尝试从网站下载一个大的 csv 文件。我已经看到使用 file_get_contents 和 file_put_contents 的建议，但由于文件大小，我选择使用 cURL 及其文件句柄选项，因此数据直接进入文件而不是 PHP 内存。

但是，我似乎遇到了一个奇怪的错误，即整个文件并不总是下载，而且我不确定如何在不使用响应标头的情况下验证整个文件是否已下载，我不确定在使用时如何访问cURL 的文件句柄选项。

这就是我现在用来获取文件的东西。

```
 $ch = curl_init('*FILE_TO_GET*');
    $fp = fopen('*WHERE_TO_FILE*', 'wb');
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_exec($ch);
    curl_close($ch);
    fclose($fp); 
```

这些文件目前约为 3.8 MB，但它有可能变得更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:11:01.597

在不知道要下载的文件大小的情况下，无法确定它是否已完全下载。

因此，您需要获取文件的标头信息。文件头通常很小，考虑到您正在下载一个大文件，这是值得的。标头将具有文件大小以及其他一些信息。

由于您之前没有尝试过获取标题，请尝试这个简洁的小功能，它可以在[Php Remote File Size 确定文件大小，而无需下载文件](https://stackoverflow.com/questions/2602612/php-remote-file-size-without-downloading-file)。

那里的示例详细说明了如何下载标题和提取大小信息。然后您可以简单地将此值与下载的文件大小和中提琴进行比较。

# c# - 在预先存在的 BinaryExpression 中更改 ConstantExpression 的值

> ID：15134009
> 
> 赞同：6
> 
> 时间：2013-02-28T11:12:06.520
> 
> 标签：c#, performance, linq, expression-trees

我有一些代码生成表达式作为数据库读取中的“where”语句传递，我正在尝试加快速度。

下面的示例使用 where 语句将表的 PK 与传入的值匹配：

```
private Expression MakeWhereForPK(int id)
{
    var paramExp = Expression.Parameter(typeof(Brand),"b");

    //Expression to get value from the entity
    var leftExp = Expression.Property(paramExp,"ID");

    //Expression to state the value to match (from the passed in variable)
    var rightExp = Expression.Constant(id,typeof(int));

    //Expression to compare the two
    var whereExp = Expression.Equal(leftExp,rightExp);

    return Expression.Lambda<Func<Brand,bool>>(whereExp,paramExp);
} 
```

以上是对问题的简化 - 真实的内容包括获取表以查询并找到其 PK 等的代码。它实际上与您通常在代码中可能执行的操作相同：

```
ctx.Brands.Where(b => b.ID = id); 
```

这工作正常，但是，在进行测试以优化事物时，我发现它相当慢 - 执行上述 1000000 次大约需要 25 秒。如果我省略上面的最后一行会更好（但显然它没有用！），所以它似乎是 Expression.Lamba 花费了大约 2/3 的时间，但其余的也不是很好。

如果所有查询都将同时发生，我可以将其转换为`IN`样式表达式并生成一次，但不幸的是这是不可能的，所以我希望保存上面的大部分生成，并重用生成的表达式，但传入不同的值`id`。

请注意，由于这将被传递给 Linq，因此我无法将表达式编译为具有可以在调用时传递的整数参数 - 它必须保留为表达式树。

因此，出于进行计时练习的目的，以下可能是一个简单的版本：

```
Expression<Func<Brand,bool>> savedExp;

private Expression MakeWhereForPKWithCache(int id)
{
    if (savedExp == null)
    {
        savedExp = MakeWhereForPK(id);
    }
    else
    {
        var body = (BinaryExpression)savedExp.Body;
        var rightExp = (ConstantExpression)body.Right;

        //At this point, value is readonly, so is there some otherway to "inject" id, 
        //and save on compilation?
        rightExp.Value = id;
    }

    return savedExp;
} 
```

我如何重新使用表达式，只是使用不同的 id 值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T21:53:07.543

您可以使用表达式树不必只包含简单常量的事实，它还可以包含访问的属性。因此，您要做的是创建一个访问某个属性值的单个表达式，并且每次只更改该属性，而不是表达式树。

就像是：

```
class ExpressionHolder
{
    public int Value { get; set; }

    public Expression<Func<Brand, bool>> Expr { get; private set; }

    public ExpressionHolder()
    {
        Expr = MakeWhereForPK();
    }

    private Expression<Func<Brand, bool>> MakeWhereForPK()
    {
        var paramExp = Expression.Parameter(typeof(Brand), "b");

        var leftExp = Expression.Property(paramExp, "ID");

        var rightExp = Expression.Property(Expression.Constant(this), "Value");

        var whereExp = Expression.Equal(leftExp, rightExp);

        return Expression.Lambda<Func<Brand, bool>>(whereExp, paramExp);
    }
} 
```

这比您的代码快大约 500 倍：使用丹尼斯的测量代码，我得到以下结果：

```
Make expression: 00:00:02.9869921
Replace constant expression: 00:00:02.3332857
Set property: 00:00:00.0056485 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T12:19:29.853

你不能改变表达式树——它们是不可变的。但是您可以通过创建自己的访问者来替换常量表达式：

```
class MyVisitor : ExpressionVisitor
{
    private readonly ConstantExpression newIdExpression;

    public MyVisitor(int newId)
    {
        this.newIdExpression = Expression.Constant(newId);
    }

    public Expression ReplaceId(Expression sourceExpression)
    {
        return Visit(sourceExpression);
    }

    protected override Expression VisitConstant(ConstantExpression node)
    {
        return newIdExpression;
    }
} 
```

用法：

```
 var expr = MakeWhereForPK(0); // p => p.ID == 0
            var visitor = new MyVisitor(1);
            var newExpr = visitor.ReplaceId(expr); p => p.ID == 1 
```

请注意，这会复制现有树。~~，我还没有测试这个性能。我不确定，这是否会更快。~~

这段代码：

```
 // warming up
            var visitor = new MyVisitor(1);
            var expr = MakeWhereForPK(0);
            visitor.ReplaceId(MakeWhereForPK(0));

            var sw = new System.Diagnostics.Stopwatch();
            sw.Start();

            for (var i = 0; i < 1000000; i++)
            {
                MakeWhereForPK(i);
            }

            sw.Stop();
            Console.WriteLine("Make expression: {0}", sw.Elapsed);

            sw.Restart();

            for (var i = 0; i < 1000000; i++)
            {
                visitor.Visit(expr);
            }

            sw.Stop();
            Console.WriteLine("Replace constant expression: {0}", sw.Elapsed);

            Console.WriteLine("Done."); 
```

在我的机器上产生这些结果：

> 制作表达式：00:00:04.1714254
> 替换常量表达式：00:00:02.3644953
> 完成。

看起来访问者比创建新表达式更快。

# php - Valums ajax-upload 一次上传多个文件

> ID：15134012
> 
> 赞同：1
> 
> 时间：2013-02-28T11:12:16.320
> 
> 标签：php, javascript, jquery, valums-file-uploader, fine-uploader

我在使用 valuems ajax-upload 创建多个上传时遇到问题，用户可以一次选择多个文件而不是一次选择一个文件。

```
<div id="fileUpload">
    <input type="file" />
    <input type="file" />
</div> 
```

Javascript

```
var ajaxup = new AjaxUpload('fileUpload', {
    action: 'index.php/s3/S3/uploadFile',
    autoSubmit: false,
    name: 'userfile',
    responseType: 'text/html',
    onSubmit: function(file , ext) {
        // send params
    }
    onComplete: function (file, response) {
        // display success message
    } 
```

php输出

```
print_r($_FILES);
Array
(
[userfile] => Array
    (
        [name] => filename.ext
        [type] => application/pdf
        [tmp_name] => path/to/temp.ext
        [error] => 0
        [size] => 616700
    )

) 
```

我已经挖了一段时间，但没有运气。有没有人都这样做过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:21:08.593

AjaxUpload 已经成为一个死去的、无人维护的库 2 年多了。在文件上传存储库中寻找替换。

# java - JBoss AS 7 中的战争部署

> ID：15134020
> 
> 赞同：3
> 
> 时间：2013-02-28T11:12:42.220
> 
> 标签：java, jboss, jboss7.x, war

我看到当我`standalone/deployments`在 JBoss AS 7 中部署一个 war 文件时，它在 tmp/vfs/temp* 中被爆炸了。现在我想将这条路径（战争爆发的地方）从 /tmp/vfs 配置到我选择的某个特定文件夹，并且想将我选择的名称也提供给这场战争的爆炸文件夹。我用谷歌搜索了很多，但没有得到任何答案。

您能否告诉我在哪里进行更改，以便我可以实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T04:33:00.003

部署被解压到一个由 JBoss VFS 处理的虚拟文件系统 VFS。

也许它会对某些价值做出反应。检查此来源：[https ://github.com/jbossas/jboss-vfs/blob/922c3db1fb823a585dbb24477f0e03585b2558d3/src/main/java/org/jboss/vfs/TempFileProvider.java](https://github.com/jbossas/jboss-vfs/blob/922c3db1fb823a585dbb24477f0e03585b2558d3/src/main/java/org/jboss/vfs/TempFileProvider.java)

```
public final class TempFileProvider implements Closeable {

private static final Logger log = Logger.getLogger(TempFileProvider.class);
private static final String JBOSS_TMP_DIR_PROPERTY = "jboss.server.temp.dir";
private static final String JVM_TMP_DIR_PROPERTY = "java.io.tmpdir";
private static final File TMP_ROOT;
private static final int RETRIES = 10;
private final AtomicBoolean open = new AtomicBoolean(true);

static {
    String configTmpDir = System.getProperty(JBOSS_TMP_DIR_PROPERTY);
    if (configTmpDir == null)
        configTmpDir = System.getProperty(JVM_TMP_DIR_PROPERTY);
    try {
        TMP_ROOT = new File(configTmpDir, "vfs");
        TMP_ROOT.mkdirs();
    }
    catch (Exception e) {
        throw new RuntimeException("Can't set up temp file provider", e);
    }
} 
```

此外，在 AS 5 中，这是使用描述符
[配置 VFS 根目录的方式： 在 jboss-classloading.xml 中配置 VFS 类加载器](https://community.jboss.org/thread/167968)
它适用于 JBoss AS 5，但理论上可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:56:17.030

如果您需要控制应用程序的目录名称，您可以将其作为展开目录放在部署目录中。
只需确保创建标记文件 .dodeploy 或更改部署扫描仪配置：

```
auto-deploy-exploded="true" 
```

# gwt - 如何在 GWT 中禁用菜单栏

> ID：15134026
> 
> 赞同：2
> 
> 时间：2013-02-28T11:12:56.000
> 
> 标签：gwt, gwt2

我的应用程序中有一个 MenuBar，需要根据某些条件禁用它。setEnabled(boolean) 方法在 GWT MenuBar 上不可用，因此没有直接的方法可以满足此要求。

例如：如果您查看`NestedAnchor.setEnabled(boolean enabled)`它会禁用该小部件上的事件并添加样式。我想在未触发单击事件以显示弹出窗口的 MenuBar 上执行相同的行为。

还尝试使用jquery添加`disabled`attr，仍然没有成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:30:48.943

菜单栏是菜单项的容器。容器不支持禁用属性。所以 yohu 必须手动遍历菜单项列表以禁用它们中的每一个。下面的代码片段通过向菜单栏添加 setEnable 方法来做到这一点 -

```
MenuBar menuBar = new MenuBar()
{
         public void setEnable(boolean enableFl)
         {
              for( MenuItem item : getItems() )
              {
                    item.setEnable( enableFl );
              }
         }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:22:12.600

你可以让你的菜单栏不可见

```
menuBar.setVisible(false); 
```

当您想要启用菜单栏时，然后 menuBar.setVisible(true);

或者

如果要禁用样式，请在 .css 文件中添加 styleDisable 并将样式设置为

```
menuBar.setStyleName(styleDisable); 
```

`then check style`

```
if(menuBar.getStyleName().equals("styleDisable")){

// write code here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:52:38.417

这将达到目的：`menuBar.unsinkEvents(Event.MOUSEEVENTS | Event.ONCLICK | Event.FOCUSEVENTS | Event.KEYEVENTS);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:27:54.910

您可以使用以下Api

```
DOM.setElementPropertyBoolean(menubar.getElement(), "disabled", !enabled); 
```

# django - 我应该如何处理保存外键？

> ID：15134029
> 
> 赞同：0
> 
> 时间：2013-02-28T11:13:09.787
> 
> 标签：django, foreign-keys

我有两个模型`Order`和`OrderItem`.

```
class OrderItem(SmartModel):
    shopping_id = models.CharField(max_length=50,db_index=True)
    quantity = models.IntegerField(default=0)
    item = models.ForeignKey(Item)
    order = models.ForeignKey(Order) 
```

这就是创建和保存`OrderItem`对象的方式

```
if not item_in_orders:
        # creat and save a new order item
        anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID) 
        try:
            order= Order.objects.get(pk=order_id)
        except:
            order = Order.objects.create(created_by=anon_user,modified_by=anon_user)

        oi=OrderItem.objects.create(order=order,shopping_id=_shopping_id(request),
                                          quantity=quantity,
                                          item=i,
                                          created_by=anon_user,
                                          modified_by=anon_user)
        oi.save() 
```

现在我应该提到`OrderItem`上面的对象是在`Order`对象之前创建的。

```
class Order(SmartModel):
    email = models.EmailField(max_length=50,help_text="Needed as alternative")
    mobile = PhoneNumberField(max_length=20,default='+2507####')
    billing_name= models.CharField(max_length=50)
    billing_address= models.CharField(max_length=50)    
    billing_city = models.CharField(max_length=50) 
```

两个模型都是 ModelForms 并且经过很好的验证，除了创建两个模型时，数据库中的两行是为`Order`. 我怀疑未填充的第一行是在创建 OrderItem 时由此代码创建的。

```
order = Order.objects.create(created_by=anon_user,modified_by=anon_user)

            oi=OrderItem.objects.create(order=order,shopping_id=_shopping_id(request),
                                              quantity=quantity,
                                              item=i,
                                              created_by=anon_user,
                                              modified_by=anon_user)
            oi.save() 
```

第二行是在我保存`Order`对象时创建的，很好。

请记住，`OrderItem`之前创建`Order`的，后者是前者中的外键字段。

我对我的 django 应用程序的要求是在`Order`给定客户（在我的情况下）之前创建一个订单项。欢迎任何其他想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:21:48.630

好的如你所说

请记住，OrderItem 是在 Order 之前创建的，而后者是前者中的外键字段。

那么在这种情况下，你应该设计你的模型

```
class OrderItem(SmartModel):
    shopping_id = models.CharField(max_length=50,db_index=True)
    quantity = models.IntegerField(default=0)
    item = models.ForeignKey(Item)
    order = models.ForeignKey(Order,blank=True,null = True) 
```

在这里，我给你如何`Foreign key`在表格中保存价值

在查询中

```
order = Order.objects.create(created_by=anon_user,modified_by=anon_user)

            oi=OrderItem.objects.create(order=order,shopping_id=_shopping_id(request),
                                              quantity=quantity,
                                              item=i,
                                              created_by=anon_user,
                                              modified_by=anon_user)
            oi.save() 
```

我不知道是什么`i` 但是如果你要保存外键那么`i` 我必须实例`Item`

我只是假设一个简单的示例，假设如果您`itemname` 首先获取 from 表单，则必须在`Item` table 中过滤它。

喜欢 `getitem = Item.objects.get(name= itemname)`

然后你可以保存你的外键，比如

```
order = Order.objects.create(created_by=anon_user,modified_by=anon_user)

            oi=OrderItem.objects.create(order=order,shopping_id=_shopping_id(request),
                                              quantity=quantity,
                                              item=getitem,
                                              created_by=anon_user,
                                              modified_by=anon_user)
            oi.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:29:25.020

看起来你是

1.  创建一个空白订单以使用 OrderItem 保存（以满足外键）
2.  在创建 OrderItem 后创建另一个完全填充的 Order（因为您提到 Order 是在 OrderItem 之后创建的）。我假设，这没有显示在上面的代码中。

这就是您看到创建了两个 Order 实例的原因。

您可以使用电子邮件、地址等订单信息更新您在步骤 1 中创建的订单并保存，而不是第二次创建新订单（步骤 2）。

**编辑：添加了详细的操作方法...**

在您的代码中，您将创建第二个订单。不要在那里创建新订单，而是使用对第 1 步中创建的订单的引用（您发布的代码中的订单变量），一旦可用，使用电子邮件和地址信息对其进行更新，然后对其调用 save()。这将更新数据库中的订单，而不是创建新实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:29:31.407

```
order = Order.object.create(
    created_by=anon_user, 
    modified_by=anon_user
    )

OrderItem.object.create(
    order = order, 
    shopping_id = _shopping_id(request),
    quantity=quantity,
    item=i,
    created_by=anon_user,
    modified_by=anon_user
    )

//To access the order after saving the above info
//For example:

order.email = 'anyone@gmail.com'
order.save() 
```

# c# - 二进制流“0”不包含有效的 BinaryHeader

> ID：15134031
> 
> 赞同：1
> 
> 时间：2013-02-28T11:13:21.023
> 
> 标签：c#, wpf, memorystream

我有服务器和客户端应用程序，它们通过 NetworkStream 进行通信。在服务器上，我二进制序列化一个对象并通过 NetworkStream 发送它，它在客户端上读取并反序列化。但它会抛出错误：二进制流“0”不包含有效的 BinaryHeader。可能的原因是无效的流或序列化和反序列化之间的对象版本更改。首先我检查了 NetworkStream 的长度，在发送序列化对象后，服务器和客户端上的长度是一样的。然后我添加一个对客户端的服务器引用并使用 Server.SaveData 来确保我在反序列化时具有完全相同的类。

然后我尝试序列化和反序列化服务器上​​的相同对象，下面的代码完美运行。

```
stream.Read(buffer, 0, total);
network_stream.Write(buffer, 0, total);

network_stream.Read(buffer, 0, total);
stream.Position = 0;
stream.Write(buffer, 0, total);

SaveData savedata = (SaveData)formatter.Deserialize(stream); 
```

这是来自服务器的完整代码：

```
Stream stream = new MemoryStream();
IFormatter formatter = new BinaryFormatter();

current_state.saveData(map, red, blu);
formatter.Serialize(stream, current_state);

int total = (int)stream.Length;
byte[] buffer = new byte[total];

writer.WriteLine(total.ToString());
writer.Flush();

stream.Read(buffer, 0, total);
network_stream.Write(buffer, 0, total);

stream.Close(); 
```

和客户端：

```
Stream stream = new MemoryStream();
IFormatter formatter = new BinaryFormatter();

while (reader.Peek() == '\0') { reader.Read(); } //solved the problem, idkw
int total = Convert.ToInt32(reader.ReadLine().ToString());
byte[] buffer = new byte[total];

network_stream.Read(buffer, 0, total);
stream.Position = 0;
stream.Write(buffer, 0, total);
stream.Position = 0;

Console.Write(stream.Length.ToString());

Server.SaveData current_state = (Server.SaveData)formatter.Deserialize(stream); //here is the problem

stream.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:10:09.923

为什么不直接将数据序列化/反序列化到`NetworkStream`（没有中间`MemoryStream`）？

一个小例子。

假设，服务器和客户端使用一个数据结构进行交换（在您的情况下，数据结构是`current_state`）。

```
[Serializable]
public class UserData : ISerializable
{
    public string Text { get; private set; }
    public int Number { get; private set; }

    public UserData(string text, int number)
    {
        Text = text;
        Number = number;
    }

    protected UserData(SerializationInfo info, StreamingContext context)
    {
        Text = info.GetString("Text");
        Number = info.GetInt32("Number");
    }

    void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("Text", Text);
        info.AddValue("Number", Number);
    }
} 
```

发送数据结构（例如从客户端）：

```
using (var networkStream = tcpClient.GetStream())
{
    var userData = new UserData("Hello.", 9);

    var binaryFormatter = new BinaryFormatter();
    binaryFormatter.Serialize(networkStream, userData);
} 
```

接收数据结构（例如服务器端）：

```
var binaryFormatter = new BinaryFormatter();
using (var networkStream = tcpClient.GetStream())
{
    while (networkStream.DataAvailable)
    {
        var receivedData = (UserData)binaryFormatter.Deserialize(networkStream);
    }
} 
```

# css - 用于在 Firefox 上滚动背景中断的条件 CSS

> ID：15134035
> 
> 赞同：0
> 
> 时间：2013-02-28T11:13:28.780
> 
> 标签：css, firefox

注意：这不是家庭作业，它只是一个展示我的作业的网站。

我正在使用这个不错的提示： [http ://css-tricks.com/3d-parralax-background-effect/](http://css-tricks.com/3d-parralax-background-effect/)

为我的大学游戏项目添加滚动星域。

[http://asteroids.chrisloughnane.net/](http://asteroids.chrisloughnane.net/)

当然，我的讲师使用的是 Firefox，所以他回复我说它不起作用。

它在 Chrome Safari IE9 中运行良好

我想要一些有条件的 CSS

一种。只需将我选择的背景放在 Firefox 上

或者

湾。在 Firefox 中实现滚动字段

我在这里和网上搜索，找不到任何东西。

蒂亚

导致问题的 CSS 是：

```
@-webkit-keyframes STAR-MOVE {
    from {
        left: 0;
        top: 0;
    }
    to { 
        left: -10000px;
        top: -2000px;
    }
}

#background {
    background: black url(../images/background.png) repeat 5% 5%;
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 100;

    -webkit-animation-name: STAR-MOVE;
    -webkit-animation-duration: 200s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
}

#midground {
    background: url(../images/midground.png) repeat 20% 20%;
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 200;

    -webkit-animation-name: STAR-MOVE;
    -webkit-animation-duration: 150s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
}

#foreground {
    background: url(../images/foreground.png) repeat 35% 35%;
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 300;

    -webkit-animation-name: STAR-MOVE;
    -webkit-animation-duration: 100s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
} 
```

解决方案：

```
-moz-animation-name:mymove;
-moz-animation-duration:150s;
-moz-animation-timing-function: linear;
-moz-animation-iteration-count: infinite; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:19:31.017

看起来firefox正在使用自己的前缀`-moz-animation-name`等。

[http://www.w3schools.com/cssref/css3_pr_animation-name.asp](http://www.w3schools.com/cssref/css3_pr_animation-name.asp)

希望这会奏效。

# kml - bing v6 kml 导入鸟瞰图

> ID：15134037
> 
> 赞同：0
> 
> 时间：2013-02-28T11:13:30.927
> 
> 标签：kml, bing-maps

我正在尝试使用自定义 KML 文件以鸟瞰模式实现 Bing 地图。我正在使用 Bing v6，因为它内置了 KML 导入功能，但我遇到了问题。

这是我实际实现的示例：http://alturl.com/w78mw [链接断开]

地图会加载 KML，但不会像预期的那样切换到鸟瞰图。

如果我手动切换，由于某种原因我无法缩小，这与任何类型的错误有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:02:59.767

**API参考：**

您可以使用方法的完整原型`ImportShapeLayerData`在加载元素后使用回调并设置样式，请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/bb429606.aspx](http://msdn.microsoft.com/en-us/library/bb429606.aspx)

您可以使用属性 SetBestMapView（方法的最后一个参数）自动设置视图或自行设置。

**例子：**

这是您的代码中的一个示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>Bing Maps KML</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?
v=6.3"></script>

    <script type="text/javascript">
        var map = null;

        function GetMap() {
            map = new VEMap('myMap');
            map.SetCredentials("YOURKEY");

            map.LoadMap();
            map.SetMapMode(VEMapMode.Mode2D);

            map.SetZoomLevel(1);

            func_addGrid();

        }

        function func_addGrid() {
            var atlasGrid = new VEShapeLayer();
            var atlasShape = new VEShapeSourceSpecification(VEDataType.ImportXML,
                     "http://www.mediacode.pt/directions.kml", atlasGrid);
            map.ImportShapeLayerData(atlasShape, function () {
                map.SetMapStyle(VEMapStyle.Birdseye);
            }, true);
        }

    </script>
</head>
<body onload="GetMap();">
    <div id='myMap' style="position: relative; width: 600px; height: 400px;"></div>
</body>
</html> 
```

# security - AngularJS 应用程序的安全性

> ID：15134039
> 
> 赞同：3
> 
> 时间：2013-02-28T11:13:37.873
> 
> 标签：security, rest, angularjs

*免责声明：我不是真正的[开发人员](http://github.com/yacoob)，我只是喜欢不时编写一些代码*:)

最近我大致了解了 AngularJS 和浏览器端 MVC 框架，并决定使用它。大多数 Angular 文档都没有详细讨论服务器端的事情，这让用户可以自由选择。在阅读了 Angular 的`$resource`服务之后，我了解了像 MongoDB 和 CouchDB 这样的数据库，它们自己公开了一个 RESTful 接口。这带来了一个明显的问题——你如何保护这些东西？

在“传统”的 Web 应用程序中，服务器端会有一个层，负责对用户进行身份验证并授权他们访问数据。一旦完成，服务器端代码将使用固定的凭据集（相同，无论 webapp 用户身份如何）与底层数据存储（例如 RDBMS）对话。我当然可以复制这个模型并编写一些 CRUD 代码，这些代码将公开一个 REST 接口并表现类似。如果我想使用`$resource`，我需要将 webapp 用户绑定到一些*db*用户吗？我不能使用一组通用的凭据，因为它们在代码中是可见的——看起来它正在编写一个中间层，或者将一组用户绑定到另一组。

我很好奇这个问题通常是如何解决的——正如你所看到的，我有一些想法。由于我缺乏经验，我只是对这里的最佳实践感到好奇 :) 一般来说，这可能是一个更广泛的问题：鉴于您不应该信任客户端运行的代码，您如何处理事情像表单验证和其他类似“授权”的逻辑？

**tl;dr**：您如何保护 RESTful 数据库访问？您如何保护您的应用程序逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:20:12.823

通常，您的前端将与之通信的 RESTful API 将是您自己的实现。它将对用户进行身份验证和授权，并在将数据存储到数据库之前对其进行验证。

一些表单验证可以在客户端完成，但我更喜欢在后端进行数据验证，而不是仅仅信任客户端数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:46:36.473

简短的回答可能是一个 cookie。

当用户进行身份验证时，您将其中一些身份验证详细信息放入 cookie。它可能只是一个会话 ID 或更有意义的东西。不管它是什么，一定要加密它。然后，当发送 REST 请求时，cookie 会随请求一起传递。

服务器端 Web 过滤器将拦截请求，确保请求经过身份验证和授权，然后在一切正常的情况下继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T14:06:12.203

如果我理解正确的问题，答案是：首先你应该这样做是为了保护你的后端休息电话。设置服务器安全后，您应该保护您的 ui 页面，但对于知道如何在 chrome 中使用开发工具的人来说，这并不是真正的安全措施绑定控制器和 ui 页面，还解析器来检查访问。简而言之，您可以执行以下操作：

```
.service("AuthService", function() {
  var data = {};
  data.checkAuth = function() {return true;}
  return data;
})

.when("/news", {
    templateUrl: "newsView.html",
    controller: "newsController",
    resolve: {
        checkAuth: function(AuthService){
            return AuthService.checkAuth();
        }
    }
})

controller("newsController", function ($scope, checkAuth) {
    $scope.isAuthenticated = checkAuth;
}); 
```

希望能帮助到你。

# html - 限制用户查看 HTML 的源代码

> ID：15134043
> 
> 赞同：1
> 
> 时间：2013-02-28T11:13:46.610
> 
> 标签：html, security

有什么方法可以限制用户查看 HTML 页面的页面源或替代方式来加密 HTML 页面的所有数据，专门用于 HTML 表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:17:50.813

没有办法。您可以要求 JavaScript 保护右键单击，但使用 F12（我的意思是在大多数浏览器中）您可以访问它。没有办法，老实说，您没有理由保护您的 HTML，因为您的 HTML 中没有任何关键内容。

也许在你的 JavaScript 中。在这里你可以做一些事情。对不起，我希望你必须做点什么。缩小和丑化你的脚本（uglifyjs、雅虎编译器、谷歌闭包编译器等...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:15:58.617

您可以禁用右键单击/上下文菜单，但用户仍然可以通过菜单访问源代码。据我所知，没有办法隐藏 HTML。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T11:16:58.753

您可以尝试使用几种方法（例如使用 javascript）或尝试混淆源代码，但最重要的是您将无法保护您的 html，因为它最终将以“纯文本”形式交付给客户端的浏览器，以便向他显示实际页面。大多数所谓的“保护”措施都可以被任何现代浏览器的内置工具绕过......所以从本质上讲，不，你不能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T11:15:16.157

这是不可能的。您已经将 HTML 和 javascript 发送到用户的浏览器。

如果他愿意，他将能够看到它，如果它是通过他的浏览器的功能或其他机制而不是你可以做的任何事情。

正如评论中指出的那样，*如果您不希望用户看到某些内容，请不要将其发送给他*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T11:16:43.873

如果您对源进行加密，那么用户和浏览器将无法再读取内容，这意味着任何人都无法查看它。如果您确实使用脚本对其进行加密，那么搜索引擎将根本无法索引您的页面

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-28T11:20:49.593

您无法隐藏 HTML，但实际上，如果您真的很在意，您可以使用 Javascript 加密内容。

显然，如果 Javascript 可以解密它，那么任何有足够时间的人都可以解密它，但它会阻止普通外行。

[http://javascript.about.com/library/blencrypt.htm](http://javascript.about.com/library/blencrypt.htm)

# java - STS 的 Web App lib jar 删除问题

> ID：15134045
> 
> 赞同：1
> 
> 时间：2013-02-28T11:14:00.167
> 
> 标签：java, sts-springsourcetoolsuite

我正在使用 STS 3.1，我无法从 STS 或文件系统中删除未使用的 jar，除非我关闭 STS 并从文件系统中删除。

一旦我启动 Web 应用程序，就会出现问题。然后，即使我停止服务器，我也无法删除任何 jar。我尝试从类路径中删除 WebApp 库，但无法删除 jar。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:23:13.430

发生这种情况是因为当应用程序打开文件时，Windows 会锁定文件以供删除。我不知道哪个应用程序正在锁定它，因为它没有被 STS 或您的服务器直接使用。但是，我知道[unlocker](http://www.emptyloop.com/unlocker/)，您可以使用它来删除被应用程序锁定的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:48:13.793

这似乎是日食的错误。

这是一个与 Eclipse 站点中的错误类似的问题。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=101360](https://bugs.eclipse.org/bugs/show_bug.cgi?id=101360)

# php - PHP is_dir：特殊字符的奇怪行为

> ID：15134046
> 
> 赞同：3
> 
> 时间：2013-02-28T11:14:05.233
> 
> 标签：php, character-encoding

我对带有特殊字符的 is_dir 有一个奇怪的行为：äöüàéè。

如果首先编写特殊字符（例如'à tést'、'école wat'），则代码可以正常工作（检测文件夹）。

但是如果除特殊字符之外的任何字符都写在特殊字符之前（例如'tést'、'the école'），那么它就不起作用了。

这是我正在使用的代码。我试图强制转换文本以使其工作，但它不会。

```
if ( is_dir(iconv("UTF-8", "ISO-8859-1", "{$text}")) ){ //Do Something } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:02:39.400

尝试使用 mb_convert_encoding。

```
if ( is_dir(mb_convert_encoding( "{$text}", "ISO-8859-1", "UTF-8" )) ){ //Do Something } 
```

$text 而不是 "{$text}" 我猜也应该这样做

作为最后的建议，请查看此评论； [http://www.php.net/manual/en/function.mb-convert-encoding.php#85752](http://www.php.net/manual/en/function.mb-convert-encoding.php#85752)

# asp.net-mvc - Issues with injection in Ninject

> ID：15134047
> 
> 赞同：1
> 
> 时间：2013-02-28T11:14:06.407
> 
> 标签：asp.net-mvc, ninject

I am kind of stuck here so please some clarification will be needed

I have the following Binding in Ninject

```
 public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Load(Assembly.GetExecutingAssembly());
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {

        kernel.Bind(typeof(IRepository<>)).To(typeof(Repository<>));
        // kernel.Bind(typeof(Repositories.IContentRepository)).To(typeof(Repositories.ContentRepository));
        kernel.Bind(typeof(IUnitOfWork)).To(typeof(UnitOfWork));

        kernel.Bind(typeof(DbContext)).To(typeof(UsersContext));
        kernel.Bind<DbContextAdapter>().ToMethod(x => { return new DbContextAdapter(kernel.Get<DbContext>()); }).InRequestScope();
        kernel.Bind<IObjectSetFactory>().ToMethod(c => { return kernel.Get<DbContextAdapter>(); });
        kernel.Bind<IObjectContext>().ToMethod(c => { return kernel.Get<DbContextAdapter>(); });
        kernel.Bind(typeof(IPhoneNumberFormatter)).To(typeof(NigerianPhoneNumberFormatter)).InRequestScope();
        kernel.Bind(typeof(ISMSCostCalculator)).To(typeof(SMSCostCalculatorImpl));
        kernel.Bind(typeof(IMessageSender)).To(typeof(SMSMessageSenderImpl));
        kernel.Bind(typeof(IFileHandler)).To(typeof(TextFileHandler)).Named("TextFileHandler");
        kernel.Bind(typeof(IFileHandler)).To(typeof(BulkContactExcelFileHandler)).Named("ExcelFileHandler");
        kernel.Bind(typeof(IFileHandler)).To(typeof(CSVFileHandler)).Named("CSVFileHandler");

    }        
} 
```

And then the following Concrete Implementation of one of the interfaces mentioned above.

```
 public class UserService
{
    private readonly IRepository<UserProfile> _userRepo;
    private readonly IUnitOfWork _unitOfWork;

    [Inject]
    public UserService(IRepository<UserProfile> userrepo, IUnitOfWork unitOfWork)
    {
        _userRepo = userrepo;
        _unitOfWork = unitOfWork;
    }

    public UserProfile Find(String username)
    {
        return _userRepo.Find(i => i.UserName.Equals(username, StringComparison.CurrentCultureIgnoreCase)).FirstOrDefault();

    }
} 
```

In my controller. I try to the user the latter service Like this

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                using (IKernel kernel = new StandardKernel())
                {
                    var userservice = kernel.Get<UserService>();
                    //do something with the service
                    WebSecurity.CreateUserAndAccount(model.UserName, model.Password, propertyValues: new { FirstName = model.FirstName, LastName = model.LastName, PhoneNumber = model.PhoneNumber });
                    //TODO add logic to auto populate the users sms account
                    WebSecurity.Login(model.UserName, model.Password);
                    return RedirectToAction("Index", "Home");
                }
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

and I get the following error

```
Error activating IRepository{UserProfile}
No matching bindings are available, and the type is not self-bindable.Activation path:
 2) Injection of dependency IRepository{UserProfile} into parameter userrepo of     constructor of type UserService
 1) Request for UserService

Suggestions:
 1) Ensure that you have defined a binding for IRepository{UserProfile}.
 2) If the binding was defined in a module, ensure that the module has been loaded into     the kernel.
 3) Ensure you have not accidentally created more than one kernel.
 4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
 5) If you are using automatic module loading, ensure the search path and filters are correct. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:40:11.207

You are resolving `UserService` on a new Kernel instance without any configuration. Hence the Exception is exactly the expected behavior.

Do constructor injection of `UserService` into your controller instead.

# asp.net-mvc - 如何在包含数组的多提交表单中插入项目

> ID：15134050
> 
> 赞同：0
> 
> 时间：2013-02-28T11:14:07.937
> 
> 标签：asp.net-mvc, entity-framework

我想通过一次提交将数据插入到几个表中。问题是表中的 2 个应该是一些项目（烹饪步骤，配方的成分）这 2 个表中的项目的数量是未知的，所以我将使用相同的 ajax 或任何脚本 Lib。但问题在于插入数据库（db.add & db.save）他的 2 个表中的每一个都有一对多的关系（一个配方很多......）

```
[HttpPost]
public ActionResult Create(Recipe recipe, Category category, Ingredient ingredient ,  intrusion [] intrusion )
{

  int UserNumber = (int)Membership.GetUser().ProviderUserKey;
  recipe.UserId = UserNumber;
  recipe.AddedDate = DateTime.Now;
  //intrusion  intrusion [] =new List<intrusion>  ;

  //var entity=new intrusion();
  //TryUpdateModel(entity ,new[] {"intrusion.IntrusionStep","intrusionId"});

  if (ModelState.IsValid)
  {
  //   var results = db.intrusion.Add(entity);
    db.category.Add(category);
    db.recipe.Add(recipe);
    db.ingerdient.Add(ingredient);
    db.intrusion.Add(intrusion);
    db.SaveChanges();

    return RedirectToAction("Index");
  }

  return View(recipe);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:53:37.547

您收到该错误是因为您正在传递一组`intrusion`记录，但仍在尝试使用`db.intrusion.Add(intrusion);`来添加它们。你不能那样做。`.Add()`只允许你一次做一个（这解释了你的错误信息——放入整个数组是无效的）。

如果您实际上正在添加多个入侵对象，您实际上应该`foreach`在该数组上执行如下循环：

```
foreach(var i in intrusion)
{
  db.intrusion.Add(i);
} 
```

就您在评论中提到的错误而言。至于一对多的问题（**你不是很清楚**），确保“多”实体上的导航属性指向“一”实体，并确保“ “一个”实体上的“许多”实体添加了对“许多”实体的引用。EF 应该在这一点上处理其余的事情。

如果有什么我错过的，请告诉我。

# android - Android获取浏览器地址

> ID：15134055
> 
> 赞同：1
> 
> 时间：2013-02-28T11:14:19.670
> 
> 标签：android, android-browser, android-broadcast, android-internet

有没有办法从用户尝试使用某些侦听器或其他东西打开的浏览器获取地址，如果该地址在数据库中并且该地址被禁止，请停止在用户的浏览器中加载该地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:25:54.957

Android 是 Linux 操作系统的一种风格，您想要做的实际上是创建防火墙。为了允许在 Linux 中创建防火墙，提供了[Netfilter](http://en.wikipedia.org/wiki/Netfilter)：

> Netfilter 是 Linux 内核中的一组钩子，允许内核模块向网络堆栈注册回调函数

然而，为了提供更简单的接口来创建防火墙，Linux 风格通常实现[iptables](http://en.wikipedia.org/wiki/Iptables)（本质上是 Netfilter 之上的另一层）。

> iptables 是 Linux 内核防火墙提供的表（实现为不同的 Netfilter 模块）以及它存储的链和规则。目前不同的内核模块和程序用于不同的协议；iptables 适用于 IPv4，ip6tables 适用于 IPv6，arptables 适用于 ARP，ebtables 适用于以太网帧。

在 linux 中，您基本上创建 iptable 链以允许访问网站以及阻止传入连接。

但

我不知道 iptables 是在 Android 中实现的。您将不得不深入研究 Android 内核的源代码。其次，您需要对手机具有root访问权限。

就个人而言，如果 iptables/netfilter 没有在 Android 内核中实现，我会考虑这样做。是的，工作量很大，但为什么要重新发明轮子呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:18:19.073

如果您构建类似浏览器的应用程序，那么您可以控制它。您可以阻止或报告页面已打开等。否则，这是不可能的！

# asp.net - 结合IN和Where查询SQL

> ID：15134056
> 
> 赞同：1
> 
> 时间：2013-02-28T11:14:21.807
> 
> 标签：asp.net, sql

```
 StrSqlLines = "Select * From dbo.SqlDtaToCreate WHERE DtaLineAccountToDebit = '" + Straccref + "' and DtaLineCode IN('" + joined + "')"; 
```

执行此查询时出现错误

```
Conversion failed when converting the varchar value '116743,116744,116745' to data type int. 
```

但是查询在 SQL 中运行良好

```
select * from SqlDtaToCreate where DtaLineAccountToDebit='123.567U' and DtaLineCode IN('116745','116746','116747') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:16:57.590

## 第一的：

**这可能是 SQL 注入的一个坏案例！使用准备好的语句（或至少适当的转义）！**

## 第二：

您的直接问题是`'`正确包含 IN 子句：

```
 StrSqlLines = "Select * " +
               "From dbo.SqlDtaToCreate "
               " WHERE DtaLineAccountToDebit = '" + Straccref + "' " + 
               " and DtaLineCode IN(" + joined + ")"; //notice missing ' characters 
```

由字符包围的任何内容`'`都被视为单个字符串。SQL server 试图将这个字符串解析为一个数字，但由于它无法解析，因此报告了错误。

## 第三：

使用数字数据时，永远，*永远，永远*（我有没有提到**过**？）使用文本数据来比较它——这实际上会影响性能。（在这个规模上，当然这并不重要，但记住这一点可以节省很多不必要的性能分析和调试......）

因此，虽然此查询实际上有效：

```
select * from SqlDtaToCreate where DtaLineAccountToDebit='123.567U' and DtaLineCode IN('116745','116746','116747') 
```

它对提供的数据进行隐式转换，因此正确的方法是：

```
select * from SqlDtaToCreate where DtaLineAccountToDebit='123.567U' and DtaLineCode IN(116745,116746,116747) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:16:40.800

`'`注意`joined`变量中缺少。

'116743,116744,116745'

'116745','116746','116747'

理想情况下，由于您正在比较 INT，您所需要的只是

116743,116744,116745

并阅读有关[sql injection](http://en.wikipedia.org/wiki/SQL_injection)的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:17:20.987

它是对加入术语的转换，在您的情况下，数据库服务器似乎可以转换引号中包含的数字，但不能超过用逗号分隔的数字：

```
'116743,116744,116745' 
```

到 ：

```
'116745','116746','116747' 
```

尝试重新格式化加入以用引号分隔数字。或从 sql statament 中删除引号，这样您就可以得到`IN(" + joined + ")"`：`IN('" + joined + "')"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:17:32.430

请注意，您的两个查询不相同。程序化的在整个数字组周围加上单引号，而您的 SQL 测试在每个数字周围加上单引号。

不过，您可能可以完全省略引号：

```
StrSqlLines = "Select * From dbo.SqlDtaToCreate WHERE DtaLineAccountToDebit = '" 
   + Straccref + "' and DtaLineCode IN(" + joined + ")"; 
```

# clojure - 如何判断一个字符是否是 Clojure 中的 ASCII 大写字母

> ID：15134063
> 
> 赞同：14
> 
> 时间：2013-02-28T11:14:36.160
> 
> 标签：clojure, ascii

我有一个这样的序列：

```
(\$ \# \A \( \* \& \9 \8 \7 \Z \f) 
```

我想过滤掉其中的大写 ASCII 字母，如 \A 和 \Z

我试图在标准库中查找，但没有运气。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-28T11:25:17.440

使用以下

```
(filter #(Character/isUpperCase %) `(\$ \# \A \( \* \& \9 \8 \7 \Z \f)) 
```

结果 ：`(\A \Z)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-24T16:41:58.153

我的解决方案：

```
(filter (set (map char (range 65 91))) 
       '(\$ \# \A \( \* \& \9 \8 \7 \Z \f)) 
```

回报：

```
'(\A \Z) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-17T17:34:52.600

或者你也可以使用`re-seq`和正则表达式：

`((fn [x] (seq (apply str (re-seq #"[A-Z]" (apply str x))))) '(\$ \# \A \( \* \& \9 \8 \7 \Z \f))`

这也返回`(\A \Z)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T16:06:45.030

这更冗长，但您也可以定义自己的函数来执行此操作：

```
(defn cap-detector [x]
     (loop [res []
            arg (apply str x)]
        (cond (empty? arg) (filter (fn [x] (Character/isLetter x)) res)
              :else (if (= (clojure.string/upper-case (first arg)) (str (first arg)))
                    (recur (conj res (first arg)) (rest arg))
                    (recur res (rest arg)))))) 
```

并使用您的字符序列调用 the`cap-detector`将为您提供所需的内容：

```
(cap-detector '(\$ \# \A \( \* \& \9 \8 \7 \Z \f))
; => (\A \Z) 
```

# c# - 如何编写水晶报表显示年份范围的公式？

> ID：15134066
> 
> 赞同：0
> 
> 时间：2013-02-28T11:14:52.720
> 
> 标签：c#, winforms, crystal-reports

嗨，我是水晶报表和 c# 应用程序的新手，实际上我想显示年份范围，就像给定的 2012-2013 2013-2014 2014-2015 ......所以我已经通过显示这样的年份来完成 2012 2013 2014 2014 ..

为此，我使用了这样的公式 toText (year(CurrentDate)) + "-" + toText (year(CurrentDate) + 1) 但是当我保存并关闭它时显示错误，比如这个选择部分必须在一个布尔变量中，比如这种类型的错误来了，所以请帮我解决这个错误谢谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:09:58.370

`toText (CurrentDate,"yyyy") + "-" + toText(DateAdd("yyyy",1,CurrentDate),"yyyy")`

# ruby-on-rails-3 - Rails Active Record 连接查询

> ID：15134070
> 
> 赞同：0
> 
> 时间：2013-02-28T11:15:05.487
> 
> 标签：ruby-on-rails-3, activerecord

帮助我解决下一个问题：

我有桌子`brands`和桌子`products`( `has_many - belongs_to association`)

在表格产品中，我有字段“ `Rank`”。

我想显示其产品总排名的前 5 个品牌 - 最大

我试着：

```
Brand.joins(:products).order('products.rank DESC').limit(10).uniq! 
```

但这不正确-那不是产品的总和。排名...

**如何使用产品排名的总和**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:35:58.903

你很接近，但你错过了分组和对分组对象执行总和：

```
Brand.joins(:products).group("brands.id").order('SUM(products.rank) DESC').limit(5) 
```

# asp.net-mvc - 如何使用 Ajax get 将整数值数组发送到 Action？

> ID：15134071
> 
> 赞同：0
> 
> 时间：2013-02-28T11:15:09.647
> 
> 标签：asp.net-mvc, jquery

我的操作接受一个整数值数组：

```
public ActionResult ActionName(int firstParamId, int secondParamId, int[] contactIds) 
```

我正在使用以下代码，但未发送选定的整数数组。

```
function btnSend_onclick() {

            var firstParamId = 1;
            var secondParamId= 2;
            var selectedContactIds = [];

            $('#ContactsListContainer input:checked').each(function() {
                selectedContactIds.push($(this).val());
            });

            var params = {
                firstParamId : firstParamId ,
                secondParamId: secondParamId,
                contactIds: selectedContactIds
            };

            $.get('/ControllerName/ActionName', JSON.stringify(params))
                .done(function(data, status) {
                    alert("Data: " + data + "\nStatus: " + status);
                })
                .fail(function(data) {
                    debugger;
                    alert(data.responseText);
                });
        } 
```

我收到每个参数的以下错误：

```
 The parameters dictionary contains a null entry for parameter 'firstParamId' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult Actionname(Int32, Int32, Int32[])' 
in 'AppNamespace.MvcUI.Controllers.ControllerName'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter.<br>Parameter name: parameters 
```

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:21:58.983

```
 try this , 

     var param={
      contactIds:[]
     };

        while pushing do param.contactIds.push(...);

       $.get('/ControllerName/ActionName',
        {                   
                "param":  JSON.stringify(param)
        })
        .done(function(data, status) {
                alert("Data: " + data + "\nStatus: " + status);
        })
        .fail(function (data, status) {
                 alert("Data: " + data + "\nStatus: " + status);
        }); 
```

这里有一个全局变量，我创建了数组，然后我推送了该数组中的所有值。然后在发送时使用 JSON.stringify(param)。它对我有用。

在行动中，

```
String param = (String) request.getParameter("param");
 JSONObject searchCriteriaJSONObj = (JSONObject) JSONSerializer.toJSON(param);

 String paramStr = searchCriteriaJSONObj.getString("contactIds");
 List<JSONObject> skillsJSONObj = (List<JSONObject>) JSONArray.fromObject(paramStr); 
```

它在 struts2 中，在 struts1 中您可能需要使用插件进行 jSON 转换

# javascript - Javascript布尔if语句不起作用

> ID：15134074
> 
> 赞同：0
> 
> 时间：2013-02-28T11:15:20.443
> 
> 标签：javascript, jquery

我正在尝试为面板设置动画以从页面顶部进出。不幸的是，我的 if 语句不起作用。这是我的代码：

```
var panelShown = false;
$(document).ready(function(){
    $('#nav_arrow').click(function(){
        panelShown = true;
        $('#nav_panel').animate({top: '0px'}, 1000, function(){});
        $('#nav_bar');
    });
    if(panelShown == true){//originally written as if(panelShown){
        $(document).click(function(){
            panelShown = false;
            $('#nav_panel').animate({top: '-200px'}, 1000, function(){});
        });
    }
}); 
```

第一部分工作正常，面板动画下来。但我永远无法进入 if 语句。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:19:45.933

它真的永远不会被调用，因为`ready`它会被调用`false`。

尝试这个：

```
var panelShown = false;
$(document).ready(function(){
    $('#nav_arrow').click(function(){  
        $('#nav_panel').animate({top: (panelShown ?'-200px' : '0px')}, 1000, function(){});
        panelShown = !panelShown;
    });
}); 
```

# rest - RESTful 方法进行用户身份验证

> ID：15134075
> 
> 赞同：1
> 
> 时间：2013-02-28T11:15:21.467
> 
> 标签：rest

我正在编写一个简单的身份验证服务，并且对通过用户名和密码方案获取用户的最佳方法感到好奇。

例如

/users?username=foo&password=bar

目前，它只返回用户的表示，相当于

/用户/{id}

然后返回 200

但是我在想，如果我做到了，我可以更多地利用缓存，所以第一个请求只返回一个带有位置标头的 303 到 /users/10

这样，我可以有效地将调用结果缓存在 /users/10 中，但不能缓存 /users?username=foo&password=bar，因为这不适合缓存。

对我来说感觉更像是“HTTP”，但显然它需要对客户端进行另一个 HTTP 调用；哪种方法是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T15:16:17.710

快速查看有关保护（身份验证） REST 调用的最佳实践是个好​​主意。这个旧的stackoverflow讨论线程是一个值得一看的好地方：

[保护 REST API/Web 服务的最佳实践](https://stackoverflow.com/questions/7551/best-practices-for-securing-a-rest-api-web-service)

# javascript - 如何添加到`date`四天？

> ID：15134077
> 
> 赞同：0
> 
> 时间：2013-02-28T11:15:24.057
> 
> 标签：javascript, jquery

```
 var $date = $('#field').val();
 date = get_date_from_string($date);
 alert(date); //Sun Feb 10 2013 00:00:00 GMT+0100 (CET) 
```

如何增加`date`四天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:18:12.000

尝试这个

```
var today= new Date();
today.setDate(today.getDate() + 4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:06:34.187

请尝试使用此代码。

```
var today = new Date();
var newDay = new Date(today.setDate(today.getDate()+4)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:18:09.390

使用以下功能

```
var $date = $('#field').val();
newdate = addDays1($date,4)
alert(newdate);

      function addDays1(date1,days)
             {  
                 var date = date1;  
                 var d  = date.substring(0,2);  
                 var m = date.substring(3,5);
                 var y  = date.substring(6,10); 
                 var tdays=parseFloat(d)+parseInt(days);

                 while(tdays!=0)    
                    {
                        var dmax = caldays(m,y);
                        if(dmax>=tdays)     
                        { 
                            var day = tdays;
                            tdays =0;       
                        }       
                        else        
                        { 
                            var day =parseInt(tdays)-parseInt(dmax);            
                            var tdays= day;                     
                            var Month = ((m*10)/10)+1;                      
                            var dmax = caldays(Month,y);
                            if(Month>12)            
                            {               
                                m =parseInt(Month)-12;              
                                day = days;             
                                y = parseInt(y)+1;              
                                if(days<dmax)               
                                tdays=0;            
                            }           
                            else                
                            m =parseInt(Month);             
                                y = parseInt(y);                
                                day = tdays;                
                            if(day<=dmax)               
                                 tdays=0;               
                        }    
                        }       
                        if(tdays==0)    
                        {                
                        if(day<10)                
                         {          
                            day="0"+day;         
                         }       
                         if(m<10)                
                          {                 
                              m=(m*10)/10;          
                              m="0"+m;                  
                          }              
                           var str=day+"/"+m+"/"+y;                
                            return str;             
           }    
         } 
```

# java - 无法在 Java 中正确拆分字符串

> ID：15134079
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:15:30.503
> 
> 标签：java, regex, string, split, pattern-matching

我有像`(x == y), (t != s), (a = b + c)`. 现在，我需要得到左边的字母`x`,和右边的字母, `t`, , 。`a``y``s``b``c`

为此，我正在执行以下操作：

```
while(//{condition}){
  eqn = stmnt.split("=");
  getVars(eqn[0])); // first while round should return x, then t, and so on. 
  getVars(eqn[0])); // first while round should return y, then s, then b, c.
}

private static ArrayList<String> getVars(String str){
    ArrayList<String> variables = new ArrayList<String>();
    Pattern pattern = Pattern.compile("([a-zA-Z]+)");
      Matcher matcher = pattern.matcher(str);
      while (matcher.find())
      {
          variables.add(matcher.group());
      }
      return variables;
} 
```

现在，此代码适用于 (a = b + c) 等方程。对于前两个方程，它只返回左侧变量 (x, t)，而不返回右侧变量 (y, s)。

我在这里做错了什么？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:17:07.837

对于初学者：-第二个`getVars(eqn[0]));`必须是`getVars(eqn[1]));`

```
while(//{condition}){
  eqn = stmnt.split("=");
  getVars(eqn[0])); // first while round should return x, then t, and so on. 
  getVars(eqn[1])); // first while round should return y, then s, then b, c.
} 
```

# php - PHP 过滤器和安全风险

> ID：15134085
> 
> 赞同：0
> 
> 时间：2013-02-28T11:15:44.717
> 
> 标签：php, security, filter, drupal-7

我想和我一起创建几个 PHP 块，因为管理员只能编辑

来自[http://drupal.org/node/1046700](http://drupal.org/node/1046700)：

> 重要提示：启用 PHP 过滤器模块时需要考虑安全问题。PHP 输入过滤器引入了恶意用户使用恶意脚本攻击您的网站的可能性。您应该只向您信任的人授予使用 PHP 过滤器的权限。此外，请确保您授予权限的人是称职的 PHP 编码人员，因为格式错误的代码可能会破坏您的网站并使其完全停止运行。为这个模块（和其他潜在危险的角色）创建一个单独的角色是个好主意，比如“开发者”或“网站管理员”，与可能是 Drupal 专家但不是专家编码员的“管理员”不同，因此您可以授予它只适用于那些满足这些标准的人。

这是否意味着存在来自外部攻击的风险，或者我是否可以添加仅供我使用的 PHP 块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:52:06.503

与您相关的部分如下：

> 您应该只向您信任的人授予使用 PHP 过滤器的权限。

编写代码时总是存在将站点暴露于可能的攻击的风险，实际上 Drupal 安全团队的任务是向模块维护人员报告安全漏洞以修复它们。
使用 PHP 过滤器，更直接的风险是使用它的用户可以访问任何数据库表。有人很容易更改用户帐户的密码、更改节点的所有权等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:33:16.607

他们只是确保您知道如果您只授予任何人使用 PHP 代码文本格式的权限，您可能会遇到麻烦。他们还警告说，如果您弄乱了 PHP，它可能会弄乱网站，这与您上传不正确的 PHP 脚本没有什么不同。

在人员 -> 权限中，有一个权限“使用 PHP 代码文本格式”。确保只有您信任使用 PHP 的角色才能访问它。如果您使用用户 1 来管理您的块，只需将其保留为没有其他具有该权限的角色。用户 1 拥有一切权限。

我还建议使用不同的管理主题，以减轻 PHP 错误阻止您访问管理面板的可能性。

# java - 拆分 ANTLR3 语法（制作复合语法）会导致整体 NFA/DFA 状态减少吗？

> ID：15134087
> 
> 赞同：1
> 
> 时间：2013-02-28T11:15:50.050
> 
> 标签：java, antlr3

我在使用 ANLTR3 生成解析器时遇到了 OutOfMemoryError，堆空间似乎主要填充有 NFA/DFA 状态（准确地说是 org.antlr.analysis.NFAConfiguration 对象）。

假如说：

*   通过重写语法规则不能大大减少前瞻预测所需的状态总数（实际上：这将是另一个问题）
*   增加堆空间不是一种选择（因为已经使用了很多并且语法只有其估计大小的 60%）

可以拆分语法帮助，因为：

*   DFA/NFA 状态的总数可能会以某种方式减少（真的不要指望这个）
*   或者每个语法的 DFA/NFA 状态的数量会更少，并且一旦生成了一个语法，它的 DFA/NFA 状态就会被丢弃？

# replace - 撇号和/或单引号问题

> ID：15134088
> 
> 赞同：0
> 
> 时间：2013-02-28T11:15:54.840
> 
> 标签：replace, textarea, apostrophe

我正在使用 ImageMagick，并且正在显示的段落在出现撇号的地方停止。奇怪的是 ' 有效，但 ' 无效。（抱歉，我不确定 ´ 撇号的技术术语。

当我意识到并非所有用户都直接在 textarea 框中输入内容时，我开始注意到不一致的行为。它们也是从 Word 文件中粘贴的。

我尝试了addlashes，因为我读到要显示带有撇号的单词，您必须先将其转义，但这不起作用。

我唯一能想到的是，如果有人知道如何将 ' 替换为 '，我可以通过这种方式进行转换。

我相信它们可能被称为“智能撇号”与“直撇号”。我希望有另一种方式，但到目前为止，“智能”版本似乎是 Imagemagick 显示文本的唯一方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:28:29.200

实际上，如果您不使用所见即所得（所见即所得），您总是会遇到来自 Microsoft 应用程序的 Word 字符的问题。

我猜有两种解决方案。

1) 下载所见即所得（ckeditor 或 tyniMCE）

2）当用户使用此提交 textarea 转换时：

```
function clean_msword_string($string) {

  $search = array(chr(145), 
               chr(146), 
               chr(147), 
               chr(148), 
               chr(151),
               chr(156)); 

  $replace = array("'", 
                "'", 
                '"', 
                '"', 
                '-',
                'œ'); 

return str_replace($search, $replace, $string); 

} 
```

# image - FB 调试器说我的 og:image 应该更大，即使它很大

> ID：15134090
> 
> 赞同：29
> 
> 时间：2013-02-28T11:15:56.070
> 
> 标签：image, facebook, debugging, facebook-graph-api, image-size

[查看使用 Facebook 调试器调试文章的结果](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.brunstad.org%2Fen%2Fchristian-life%2Fa-changed-man)。

它提出了这个警告：

> og：图像应该更大。提供 og:image 不够大。请使用至少 200x200，最好是 1500x1500 的图片。

但是如果你打开下面“og:image”字段中显示的图像，你可以清楚地看到图像足够大——700x350 px。

当我在我的墙上发布文章时，这会导致 Facebook 选择随机图像。

知道为什么会这样吗？

**编辑：**问题可能是由我的 CMS 重定向图像的 url 引起的吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-11-07T06:50:20.297

尝试添加这个：

```
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" /> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-21T17:16:28.407

首先，您需要上传超过 200 x 200 的图像（例如我上传的最大尺寸为 1500 x 1500）。有人说图片的宽高应该是一样的大小。我从来没有机会检查它是否正确。

更新图像大小后问题仍然存在，您需要向 og: image 链接添加某些参数，以使 Facebook 调试器更新图像的缓存。

例如：

```
<meta property="og:image" content="http://bri.ge/img/brige1.png?t=12345?"> 
```

这是参数：?t=12345?

等待大约 5 分钟，问题将得到解决。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-28T15:59:37.200

这是由于我的 CMS 系统重定向了图像的 URL。所以正确的图像出现在 Facebook 调试器中，但 FB 可能在重定向发生之前寻找图像大小，然后它还没有大小。

所以我告诉我的 CMS 不要重定向我的图片的 URL。其工作原理取决于您使用的 CMS 类型。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-19T14:38:56.377

我有

```
<meta property="og:type" content="website" /> 
```

在元标记中。

删除了该行并且它起作用了，因此当前标签如下所示：

```
 <meta property="og:title" content="PUT TITLE HERE" />   
    <meta property="og:url" content="http://www.example.com" />
    <meta property="og:image" content="http://www.example.com/images/myimage.jpg"/> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-30T20:36:22.953

有点晚了，但我在 Photoshop 中创建了一个新的开放图形图像后遇到了这个问题。这没有任何意义，因为在调试器中它仍然显示找到的图像，即 359x379。不过，它仍然抱怨它小于 200x200。

我没有尝试更改任何其他标题标签，因为我不认为这是问题所在。

相反，我再次打开 Photoshop 并再次保存图像。我将它保存为 85% 质量的 JPG 格式——不同之处在于我使用了“渐进式”而不是“优化”。这立即解决了问题，尽管我不肯定“优化”设置是问题所在。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-27T17:37:06.153

另一个可能导致此问题的问题是在文件名中使用 # 等字符。

尽管浏览器会正确显示它们，但 facebook 会给出一个错误，指出 img 太小，而事实上它无法读取它。

因此，请确保您的图像文件名仅使用标准字符 A 到 z、_、-、0-9

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-08T22:13:36.877

如果有人仍然遇到这个问题，即使 facebook 的**刮刀**正确刮取尺寸 >= 200x200 的图像，请等待一个小时，然后去喝咖啡。回来再次调试，应该没问题。facebook 需要时间来更新其存储的图形数据。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-03T06:02:29.207

我刚刚遇到了这个问题，并尝试另存为质量稍低的 JPEG，正如另一个回答者所建议的那样。一旦我引用了它并在调试器页面上再次尝试，Facebook 再次告诉我，我的图像太小了，它会使用**旧**图像，这意味着它第一次抱怨的图像。

所以我只是再次提交了相同的 URL，它就不再抱怨了。基本上它是一个调试。尝试刷新调试，看看它是否没有为您修复它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-19T09:07:30.193

像@Maria 建议的那样定义 og:image:width 和 og:image:height 参数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-06T10:34:22.520

当我遇到 Scraped URL 时，我注意到的是，facebook 无法看到与帖子中相同大小的图片。比如把Debug里比较小的图片的url复制过来，粘贴到浏览器中，确实图片很小。现在，转到您的帖子，从您的帖子中复制网址图片，然后粘贴到相同或任何浏览器中。现在图片的尺寸很大。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-02T18:26:53.347

如果图像 url 是 https:// 并且 Facebook 在读取您的 SSL 证书时遇到问题，它将产生这个相当无用的错误消息。要进行测试，请查看图像的 http:// 网址是否有效。如果是这样，您的 CA 证书可能需要一些调整。尝试谷歌搜索“Curl 错误：SSL_CACERT SSL 证书问题：无法获取本地颁发者证书”

注意：即使您的页面使用 https 协议显示没有问题，Facebook 也会深入挖掘以确认您的身份。我认为这是相对较新的。考虑到他们整个假新闻的崩溃，我不会太沮丧。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-07-04T09:24:09.483

您网站的 robots.txt 文件可能会限制 Facebook 爬虫访问您的网站。当 Facebook 机器人抓取它时，它看不到文件。将图像上传到您网站的根目录。

200x200 像素规则很重要，使用 400x400 可以通过压缩获得更好的图像质量。使用 png 和 jpeg 图像进行测试。

# javascript - JQuery Count 数据属性不等于某个数量的类的数量

> ID：15134093
> 
> 赞同：0
> 
> 时间：2013-02-28T11:16:11.933
> 
> 标签：javascript, jquery

我有一些代码循环创建行如下

```
<div class='link' data-job_id='123456'>
    <div class='holder'>
        <img class=q1 src='first_image.jpg' data-status='1' data-image='1' alt='first_image' />
        <img class=q1 src='second_image.jpg' data-status='4' data-image='2' alt='second_image' />
    </div>//end holder
</div>//end link
<div class='link' data-job_id='456789'>
    <div class='holder'>
        <img class=q1 src='first_image.jpg' data-status='2' data-image='1' alt='first_image' />
        <img class=q1 src='second_image.jpg' data-status='7' data-image='2' alt='second_image' />
    </div>//end holder
</div>//end link
....etc (this has been greatly simplified) 
```

我遇到的问题是计算不等于 4 且值为 2的`link`类的数量。`data-status``data-image`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:18:36.913

```
var links = $('.link q1').filter(function() {
    return $(this).data('status') != '4' && $(this).data('image') == '2';
}).length; 
```

# c# - 获取泛型类型的特定类型版本

> ID：15134095
> 
> 赞同：1
> 
> 时间：2013-02-28T11:16:17.880
> 
> 标签：c#, c#-4.0

我有一个通用的存储库类。

```
public class Repository<TEntity> where TEntity : class
{
    public virtual TEntity Create()
    {
        // Create implementation.
    }
    public virtual bool Add(TEntity entity)
    {
        // Add implementation.
    }
    public virtual bool Delete(TEntity entity)
    {
        // Delete implementation.
    }
    public virtual int SaveChanges()
    {
        // Save changes implementation.
    }
} 
```

我有几种与行为不完全匹配的类型，主要是针对`Create`方法，所以我想做一个具体的实现。

就像是：

```
public class SpecificEntityRepository : Repository<SpecificEntity>
{
    public override SpecificEntity Create()
    {
        // Other create implementation.
    }
} 
```

有没有一种方法可以让一个人`Repository<SpecificEntity>`用来返回 的方法的值`SpecificEntityRepository`，例如在参数类型等于时在`SpecificEntityRepository`构造函数中返回？`Repository<>``SpecificEntity`

我正在寻找一种通用的方法来做到这一点。在我的项目的最终版本中可能有多达 200 个特定的存储库，其中 95% 的功能是通用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:25:38.953

如果您想阻止人们创建一个`Repository<SpecificEntity>`，您可以创建`Repository`构造函数`protected`并只允许通过工厂方法创建实例。

例如：

```
public class Repository<TEntity> where TEntity : class
{
    private static readonly Dictionary<Type, Func<object>> specificRepositories =
        new Dictionary<Type, Func<object>>
        {
            { typeof(SpecificEntity), () => new SpecificRepository() }
        };

    protected Repository() {}

    public static Repository<T> Create<T>() where T : class
    {
        var entityType = typeof(T);
        if (specificRepositories.ContainsKey(entityType)) {
            return (Repository<T>)specificRepositories[entityType]();
        }
        else {
            return new Repository<T>();
        }
    }

    // default implementations omitted
} 
```

我将基于实体类型的存储库实例的解析基于 a，`Dictionary`因为这样更便于维护，但如果我们只讨论几个特定的​​存储库类型，您可以使用`if`/`else if`代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:25:45.623

一旦调用了特定的构造函数，就无法更改对象的类。
但是您可以使用工厂方法而不是直接调用实际的构造函数：

```
public static Repository<T> CreateRepository<T>() {
    if (typeof(T) == typeof(SpecificEntity)) {
        return new SpecificEntityRepository();
    }
    return new Repository<T>();
} 
```

为了确保它被使用，你应该保护实际的构造函数。

# jquery - 基于选择框值的文本框验证的最佳实践是什么

> ID：15134097
> 
> 赞同：1
> 
> 时间：2013-02-28T11:16:20.993
> 
> 标签：jquery, jquery-validate

我有一个基于选择框值的选择框，我需要检查文本框是否强制。我已经完成了 jQuery 验证，但我的问题是我从数据库中获取了选择框的值，我将名称作为值，id 作为选择框的键。我有选择框

```
<select name="selectBox1" class="default textbox-select" tabindex="2">
 <option value="">Select</option>
 <option value="1">A</option>
 <option value="2">B</option>
 <option value="3">C</option>
 </select>

<input type="text" name="email" class="textbox-cont-regular"/> 
```

如果我选择值 B 意味着只有电子邮件文本框应该是强制性的。我已经根据硬代码值 2 编写验证。这是最佳实践还是改进我自己的任何想法。因为任何人更改 db 中的值意味着我的验证将不起作用？或者我应该根据文本（“B”）编写验证。哪个是最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:36:29.957

为了将来证明，您可以拥有这样的数据库结构。

```
Value Text IsMandatory
----------------------
1     A    false     
2     B    true
3     C    false 
```

然后使用您的服务器端标记代码生成（php/asp.net 等），您可以生成一些像这样的 html

```
<select id="selectBox1" name="selectBox1">
 <option value="">Select</option>
 <option value="1">A</option>
 <option value="2" data-mandatory="true">B</option>
 <option value="3">C</option>
</select> 
```

然后你可以指定你的规则

```
rules : {
 email : {
  required: "#selectBox1 option[data-mandatory]:selected"
 }
} 
```

使用这种结构，您可以更改数据库中的 id 值或文本，而无需触摸您的标记或验证代码。您还可以更改使文本框成为必需的值的数量，或将它们全部设为可选等。

[小提琴在这里演示这种方法](http://jsfiddle.net/baMVw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:33:18.910

为您的验证选择不会改变的标准，这样您将来就不会遇到问题。所以在这种情况下，如果那不会改变，我建议你使用 text 选项

# javascript - 无法将自定义 JS 包含到 Wordpress

> ID：15134109
> 
> 赞同：1
> 
> 时间：2013-02-28T11:16:56.737
> 
> 标签：javascript, wordpress, import

我的 Wordpress 页面加载（使用 jQuery `load()`）另一个页面，我希望主页已经包含所有需要的 .js 文件，其中一些是手工制作的。

当我尝试正常添加它们时：

```
<script src="http://10.0.0.158:8082/js/myScript.js"></script> 
```

*有时*有效，有时无效。70％的时间不起作用，我只需要几个F5来临时使它起作用。

我的页面在其中加载了很多其他页面（总是使用 jQuery 的`load()`），但如果在普通的 php 页面中导入，它可以正常工作。

Wordpress 只是把它搞砸了。

所以我google了很多，似乎我不能只通过html标签导入脚本，我需要使用wordpress的php函数`wp_enqueue_script`，文档在这里：[http ://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

使用该文档和本指南中的信息： [http ://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/](http://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/)

我做了这个功能：

```
<?php
        function customScriptInit() {
    if (!is_admin()) {
        echo"look! i'm working!";

        wp_deregister_script('jquery');
        wp_register_script('jquery', 'http://10.0.0.158:8082/js/JQuery.min.js', false, '1.8.3', true);
        wp_enqueue_script('jquery');

        wp_enqueue_script('jqueryUi', 'http://10.0.0.158:8082/js/jquery-ui-1.9.2.min.js', array('jquery'), '1.0', true);
        wp_enqueue_script('cookie', 'http://10.0.0.158:8082/js/cookie.js', array('jquery'), '1.0', true);
        wp_enqueue_script('json2', 'http://10.0.0.158:8082/js/json2.js', array('jquery'), '1.0', true);
        wp_enqueue_script('easing', 'http://10.0.0.158:8082/js/easing.min.js', array('jquery'), '1.0', true);
    }
    }
add_action('wp_enqueue_scripts', 'customScriptInit');
?> 
```

我放置了一个 echo 命令以确保它运行良好（是的，我现在可以在我的页面中看到该消息）。

但是现在..看起来根本没有加载 js，我从 javascript 控制台收到了这个错误：

```
Uncaught ReferenceError: jQuery is not defined 
```

如果我删除关于 jQuery 注销并再次注册的 3 行，我得到了 jQuery 工作，但不是我导入的脚本，通常带有 cookie 的 js 错误：

```
Can't read cookie: TypeError: Object function (e,t){return new v.fn.init(e,t,n)} has no method 'cookie' 
```

我怎样才能正确地将这些 js 文件导入我的页面？

我知道使用 Wordpress 最好使用“jQuery”而不是“$”，我只是将它们全部转换为这个结果，使用“$”最终一团糟！

编辑：用这段代码解决

```
<?php
function customScriptInit() {
    if (!is_admin()) {

        wp_register_script( 'my-jqueryUi', ABSPATH . '/js/jquery-ui-1.9.2.min.js');
        wp_register_script( 'my-cookie', ABSPATH . '/js/cookie.js');
        wp_register_script( 'my-json2', ABSPATH . '/js/json2.js');
        wp_register_script( 'my-easing', ABSPATH . '/js/easing.min.js');

        wp_enqueue_script( 'my-jqueryUi');
        wp_enqueue_script( 'my-cookie');
        wp_enqueue_script( 'my-json2');
        wp_enqueue_script( 'my-easing');
        }
    }
add_action('wp_enqueue_scripts', 'customScriptInit');
?> 
```

感谢 adeneo 的良好实践分割！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:34:57.357

您不应该加载您自己的 jQuery 版本，因为您很可能最终会在您的站点上使用多个版本的 jQuery。只需在其他脚本中设置 jQuery 和 jQueryUI，wordpress 就会自动加载 jQuery：

```
function customScriptInit() {
    if (!is_admin()) {
       $depends_on = array('jquery', 'jquery-ui-core', 'jquery-ui-sortable');

        wp_enqueue_script('cookie', ABSPATH . '/js/cookie.js', $depends_on);
        wp_enqueue_script('json2',  ABSPATH . '/js/json2.js', $depends_on);
        wp_enqueue_script('easing', ABSPATH . '/js/easing.min.js', $depends_on);
    }
}

add_action('wp_enqueue_scripts', 'customScriptInit'); 
```

并为 URL 使用 WP 变量之一，不要对它们进行硬编码。对于你通常会做的插件：

```
plugins_url('/js/cookie.js', __FILE__) 
```

获得正确的网址等。

另外请注意，在 wordpress 中，您需要单独加载 jQuery UI 的每个部分，具体取决于您的需要，这一切都在[Codex](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)中进行了解释！

在 Wordpress 中，您不需要使用 jQuery 更改所有的美元符号，您只需将其包装在一个无冲突的包装器中，如下所示：

```
jQuery(document).ready(function($) {
    // $() will work just fine as an alias for jQuery() inside of this function
}); 
```

在里面，你会`$`像往常一样使用，让事情变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:04:04.763

解决了之前注册js文件的问题

```
<?php
function customScriptInit() {
    if (!is_admin()) {

        wp_register_script( 'my-jqueryUi', ABSPATH . '/js/jquery-ui-1.9.2.min.js');
        wp_register_script( 'my-cookie', ABSPATH . '/js/cookie.js');
        wp_register_script( 'my-json2', ABSPATH . '/js/json2.js');
        wp_register_script( 'my-easing', ABSPATH . '/js/easing.min.js');

        wp_enqueue_script( 'my-jqueryUi');
        wp_enqueue_script( 'my-cookie');
        wp_enqueue_script( 'my-json2');
        wp_enqueue_script( 'my-easing');
        }
    }
add_action('wp_enqueue_scripts', 'customScriptInit');
?> 
```

# c# - 以编程方式从 Brushes 类中获取画笔？

> ID：15134113
> 
> 赞同：5
> 
> 时间：2013-02-28T11:17:00.547
> 
> 标签：c#, brush, brushes

我有一个属性，允许将已知颜色的字符串名称发送到我的控件。该属性仅接受正确的已知颜色名称，例如“红色”或“蓝色”

```
 private KnownColor _UseColor = KnownColor.Red;

    /// <summary>
    /// Gets or sets the name of the colour
    /// </summary>
    public string ColorName
    {
        get
        {
            return this._UseColor.ToString();
        }
        set
        {
            if (Enum.IsDefined(typeof(KnownColor), value))
                this._UseColour = (KnownColor)Enum.Parse(typeof(KnownColor), value);
        }
    } 
```

我想要做的是使用这个枚举从.NET中的静态[Brushes](http://msdn.microsoft.com/en-us/library/system.drawing.brushes.aspx)类中`_UseColour`选择一个现有的画笔，就像这样

```
Brush sysBrush = Brushes.FromKnownColor(this._UseColor);
e.Graphics.FillRectangle(sysBrush, 0, 0, 10, 10); 
```

而不是在像这样绘制控件时创建新画笔

```
using (SolidBrush brsh = new SolidBrush(Color.FromKnownColor(this._UseColor)))
    e.Graphics.FillRectangle(brsh, 0, 0, 10, 10); 
```

有谁知道这是否可能，或者我每次都必须创建一个新画笔？

`Brushes.FromKnownColor`不是`Brushes`类中的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:21:39.200

为什么不创建一次画笔并将其缓存以备后用？

在您的主要课程中：

```
private KnownColor _UseColor = KnownColor.Red;

/// <summary>
/// Gets or sets the name of the colour
/// </summary>
public string ColorName
{
    get
    {
        return this._UseColor.ToString();
    }
    set
    {
        if (Enum.IsDefined(typeof(KnownColor), value))
            this._UseColour = (KnownColor)Enum.Parse(typeof(KnownColor), value);
    }
}

private Dictionary<string, Brush> _knownBrushes = new Dictionary<string, Brush>();

public Brush ColorBrush
{
    get
    {
        if (!_knownBrushes.ContainsKey(_UseColor)) {
            _knownBrushes[_UseColor] = new SolidBrush(Color.FromKnownColor(this._UseColor));
        }

        return _knownBrushes[_UseColor];
    }
} 
```

然后像..一样使用它

```
e.Graphics.FillRectangle(ColorBrush, 0, 0, 10, 10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:25:05.503

## 反思法

```
var properties = typeof (Brushes).GetProperties();
var property = properties.FirstOrDefault(p => p.Name == "Red");
var brush = property.GetValue(null, null); // Contains Brushes.Red 
```

* * *

## 你的情况

场地：

```
PropertyInfo[] _properties = typeof (Brushes).GetProperties(); 
```

### 静态方法

```
static Brush GetKnownBrush(string knownColorName)
{
    var property = _properties.FirstOrDefault(p => p.Name == knownColorName);
    var brush = property.GetValue(null, null);
    return brush;
} 
```

用法：

```
var knownBrush = GetKnownBrush(ColorName); 
```

### 实例属性

```
Brush KnownBrush
{
    get
    {
        var property = _properties.FirstOrDefault(p => p.Name == ColorName);
        var brush = property.GetValue(null, null);
        return brush;
    }
} 
```

用法：

```
var knownBrush = KnownBrush; 
```

* * *

您还可以将经常使用的画笔存储在字典中，以避免反射动作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:25:10.217

如果您想要一个可以通过颜色查找画笔的解决方案，即使该颜色可能没有已知名称，您也可以创建一个使用该颜色的字典：

```
void Main()
{
    var brush = KnownBrush(Color.FromArgb(255, 0, 0));
    brush.Dump();
}

private static Dictionary<Tuple<byte, byte, byte, byte>, SolidBrush> _KnownBrushes;
public static SolidBrush KnownBrush(Color color)
{
    if (_KnownBrushes == null)
    {
        _KnownBrushes = new Dictionary<Tuple<byte, byte, byte, byte>, SolidBrush>();
        foreach (var propertyInfo in typeof(Brushes).GetProperties())
        {
            if (propertyInfo.PropertyType == typeof(Brush))
            {
                var brush = propertyInfo.GetValue(null) as SolidBrush; // not a typo
                if (brush != null)
                    _KnownBrushes[Tuple.Create(brush.Color.R, brush.Color.G, brush.Color.B, brush.Color.A)] = brush;
            }
        }
    }

    SolidBrush result;
    _KnownBrushes.TryGetValue(Tuple.Create(color.R, color.G, color.B, color.A), out result);
    return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T12:19:44.120

其他答案很复杂。这是一个将字符串“purple”转换为纯色画笔的单行代码：

```
new SolidColorBrush((Color)ColorConverter.ConvertFromString("purple")) 
```

记住`using System.Windows.Media;`

# c# - 停止在查询中执行的代码

> ID：15134117
> 
> 赞同：1
> 
> 时间：2013-02-28T11:17:09.130
> 
> 标签：c#, asp.net, linq-to-sql

我正在检查重复项，它发现它们并且 If(isDuplicate) 一切正常。但是代码继续执行所有提交，因为我没有告诉它停止。我该怎么做？停止并抛出它确实但未提交的错误面板？

```
_db.tbl_Localities.InsertOnSubmit(locality);

bool isDuplicate = _db.tbl_Localities
                    .Any(x => x.Locality == txt_Locality.Text);
if (isDuplicate)
{
    pnl_Message.Visible = true;
    lbl_message.Text = " Duplicate entry!";
    txt_Locality.Text = "";
}

// Save
// ====
_db.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:19:25.287

您应该处理`else`部分条件，或者如果您的程序出现意外情况，则引发异常：

```
_db.tbl_Localities.InsertOnSubmit(locality);

bool isDuplicate = _db.tbl_Localities
                    .Any(x => x.Locality == txt_Locality.Text);
if (isDuplicate)
{
    pnl_Message.Visible = true;
    lbl_message.Text = " Duplicate entry!";
    txt_Locality.Text = "";
}
else
{
    // Save
    // ====
    _db.SubmitChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:19:32.207

`return;`在 if 语句中使用。

# php - 路径如何在 Yii 上运行

> ID：15134125
> 
> 赞同：1
> 
> 时间：2013-02-28T11:17:28.507
> 
> 标签：php, url, path, yii

Yii 上的路径如何工作？例如下面的代码是地方

```
/webapp/views/project/view.php:

<?php $this->widget('zii.widgets.CListView', array(
'dataProvider'=>$issueDataProvider,
'itemView'=>'/issue/_view',
)); ?> 
```

我的结构：

```
/webapp
 /component
   /controller.php
 /controllers
   /ProjectControllers
 /views
   /project/view
   /issue/_view 
```

我的问题是如何

```
'itemView'=>'/issue/_view' 
```

作品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:34:02.063

[你可以在这里](http://www.yiiframework.com/doc/api/1.1/CController#getViewFile-detail)找到描述。

> ...基于以下标准的相应视图文件：
> 
> *   模块内的绝对视图：视图名称以单斜杠“/”开头。在这种情况下，将在当前活动模块的视图路径下搜索视图。如果没有活动模块，则将在应用程序的视图路径下搜索视图。
> *   应用程序中的绝对视图：视图名称以双斜杠“//”开头。在这种情况下，将在应用程序的视图路径下搜索视图。此语法从 1.1.3 版开始可用。
> *   别名视图：视图名称包含点并引用路径别名。视图文件是通过调用 YiiBase::getPathOfAlias() 来确定的。请注意，别名视图不能被主题化，因为它们可以引用位于任意位置的视图文件。
> *   相对观点：否则。将在当前活动控制器的视图路径下搜索相对视图。

# c++ - 如何配置 NetBeans 以静态链接 MinGW C++ 库？

> ID：15134126
> 
> 赞同：1
> 
> 时间：2013-02-28T11:17:29.143
> 
> 标签：c++, netbeans, mingw

我已经构建了一个可执行文件（.exe），但是当我运行它时，会弹出一个窗口，上面写着

> 程序无法启动，因为您的计算机中缺少 libgcc_s_dw2-1.dll。尝试重新安装程序以解决此问题。

我可以配置 Netbeans 以将该文件包含到 .exe 文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:25:32.183

你可以。

在 Netbeans 中，右键单击 Projects 窗口中的项目节点，然后单击**Properties**。单击**构建**>**链接器**节点。在**Compilation Line**类别下，有一个名为**Additional options**的字段。现在输入以下行：

```
-static-libgcc -static-libstdc++ 
```

单击**确定**。现在它起作用了。

*请注意，您的文件比在没有库的情况下编译时要大得多。如果您（尚未）计划分发可执行文件，那么设置 PATH 环境变量可能是更好的选择。有关更多详细信息，请参阅[程序无法启动，因为缺少 libgcc_s_dw2-1.dll](https://stackoverflow.com/questions/4702732/the-program-cant-start-because-libgcc-s-dw2-1-dll-is-missing)。*

# ios - 何时在类别 .m 文件或头 .h 文件中声明某些内容？

> ID：15134128
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:17:33.873
> 
> 标签：ios, objective-c, scope, objective-c-category, variable-declaration

众所周知，通常我们习惯于在类头文件（.h）中声明我们的类实例变量、属性、方法声明。

但是我们可以在 .m 文件中使用空白类别做同样的事情。

所以我的问题是：什么应该在 .h 文件中声明，什么应该在 .m 文件中声明 - 为什么？

问候， Mrunal

**新编辑：**

大家好，

如果您在 developer.apple.com 上参考新添加的 Apple 示例 - 他们现在在 .m 文件本身中声明他们的 IBOutlets 和 IBActions 以及属性声明。但是我们可以通过在类私有成员部分的 .h 文件中声明这些引用来实现相同的目的。

那他们为什么要在 .m 文件中声明它们并作为属性，知道吗？

-Mrunal

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:51:01.687

> 但是我们可以在 .m 文件中使用空白类别做同样的事情。

继续上课。

通常，如果要公开，您选择在标头中声明某些内容——任何客户端都可以使用它。其他所有内容（您的内部结构）通常都应该在课程延续中进行。

我赞成封装——这是我的方法：

> 变量

属于类延续或`@implementation`。例外非常非常罕见。

> 特性

通常属于实践中的类延续。如果您想让子类能够覆盖这些或使这些成为公共接口的一部分，那么您可以在类声明（头文件）中声明它们。

> 方法声明

在类延续中比在类声明中更多。同样，如果它打算被任何客户端使用，它将属于类声明。通常，您甚至不需要在类延续（或类声明）中声明——如果它是私有的，那么单独定义就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:42:05.730

基本上，在头文件 (.h) 中声明公共 API，而在实现文件 (.m) 中声明私有 API。

[Objective-C 中的可见性](http://codingafterschool.blogspot.com.br/2010/11/visibility-in-objective-c.html)

[你也可以在这里找到答案](https://stackoverflow.com/questions/3967187/difference-between-interface-definition-in-h-and-m-file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:53:57.190

通常您希望在 .m 文件中使用空白类别来声明私有属性。

```
// APXCustomButton.m file
@interface APXCustomButton ()

@property (nonatomic, strong) UIColor *stateBackgroundColor;

@end

// Use the property in implementation (the same .m file)
@implementation APXCustomButton

- (void)setStyle:(APXButtonStyle)aStyle
{
    UIColor *theStyleColor = ...;
    self.stateBackgroundColor = theStyleColor;
}

@end 
```

如果您尝试访问在 .m 文件之外的黑色类别中声明的属性，您将收到未声明的属性编译器错误：

```
- (void)createButton
{
    APXCustomButton *theCustomButton = [[APXCustomButton alloc] init];
    theCustomButton.stateBackgroundColor = [UIColor greenColor]; // undeclared property error
} 
```

在大多数情况下，如果您想在没有子类化的情况下向现有类添加新方法/属性，那么您需要在 .h 文件中声明类别并在 .m 文件中实现声明的方法

```
// APXSafeArray.h file
@interface NSArray (APXSafeArray)

- (id)com_APX_objectAtIndex:(NSInteger)anIndex;

@end

// APXSafeArray.m file
@implementation NSArray

- (id)com_APX_objectAtIndex:(NSInteger)anIndex
{
    id theResultObject = nil;
    if ((anIndex >= 0) && (anIndex < [self count]))
    {
        theResultObject = [self objectAtIndex:anIndex];
    }

    return theResultObject;
}

@end 
```

现在，您可以在导入“APXSafeArray.h”的任何地方使用“com_APX_objectAtIndex:”方法。

```
#import "APXSafeArray.h"

...

@property (nonatomic, strong) APXSafeArray *entities;

- (void)didRequestEntityAtIndex:(NSInteger)anIndex
{
    APXEntity *theREquestedEntity = [self.entities com_APX_objectAtIndex:anIndex];
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:34:08.117

这主要取决于你。

该`.h`文件就像您的课程的描述。
只在`.h`文件中放入从类外部可见的真正重要的内容是明智的，尤其是在您与其他开发人员一起工作时。

它将帮助他们更容易地理解他们可以使用哪些方法/属性/变量，而不是列出他们不使用的东西的完整列表。

# c++ - 将任何指针传递给用于删除的函数

> ID：15134132
> 
> 赞同：1
> 
> 时间：2013-02-28T11:17:38.130
> 
> 标签：c++, pointers

我想创建一个函数，该函数将接受指向类实例的指针作为参数，然后将其删除。问题是我事先不知道它将删除什么。基本上我需要的是这样的：

```
void Foo(pointer* generic_pointer){
  //Some code here
  delete generic_pointer;
  //Some more code here
} 
```

我想过使用 void* 但这显然是非常糟糕的编码，并导致混乱。

注意：我有一个基本上是循环的对象，当它结束时，我需要创建另一个（不同类的）对象，这也是一个循环，然后删除原始对象。使用 delete this 我无法启动所需的循环，所以我想我可以从第二个对象中删除它，但它可能从任何类型的对象开始，所以这是我唯一能想到的。关于如何做的任何其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:21:32.353

这是不可能的。运算符使用数据的`delete`类型来推断要调用的析构函数。如果类型是`void*`，它就不能推断出任何合理的东西。您可能想查看智能指针主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:20:18.033

这是非常糟糕的，强制转换`void*`和传递会丢失所有类型信息，并且您最终会以比程序编译速度更快的速度进入 undefinedbehaviorland。

只需按照老式的方式进行操作并调用`delete`. 我看不出打电话`Foo(something)`过来有什么好处`delete something`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:56:40.217

已经说过的智能指针。让智能指针代替你管理内存。尝试实现您自己的智能指针（仅适用于教育目的的您）。在互联网上你可以找到很多不同的想法和实现。

附言

> 我想过使用 void* 但这显然是非常糟糕的编码，并导致混乱。

你听起来像一个十字军）））*C++中不仅有黑白。*简单地说，有很多可能会错误地使用某些东西。实际上，为了看起来优雅，有些事情确实需要使用 void* 来实现，您应该在实现时对用户隐藏它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T11:19:43.640

模板？

```
template<typename T>
void Foo<T>(T* p) {
  delete p;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-28T11:21:23.557

您可以使用模板来实现这一点

```
template <class T>
void Foo(T* pointer){
//do your stuff
delete T;
} 
```

当然，这可能并不适用于所有情况。

见[这里](http://www.cplusplus.com/doc/tutorial/templates/)。

# android - 如何使用 Universal-Image-Loader 在 ImageView 上绘制新图层

> ID：15134136
> 
> 赞同：2
> 
> 时间：2013-02-28T11:17:52.400
> 
> 标签：android, android-imageview, android-gridview, ondraw, universal-image-loader

我们在项目中使用通用图像加载器（[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)）。我们使用它在 gridview 上加载图像。但是，我们希望在所有图像上添加新的透明层和文字描述。当我们重写 onDraw 方法时，我们有这个层，但它只有在我们滚动 gridview 时才可见。

是否可以使用这个库在 ImageView 上绘制新图层？我们注意到，对于大于 14 的新 android 设备，代码按预期工作，但不能在模拟器上，也不能在以前版本的系统上。

产品视图.java

```
public class ProductView extends ImageView {
    private Product product;
    private Paint p = new Paint();
    private Context context;

    public ProductView(Context context, Product product) {
        super(context);
        setScaleType(ScaleType.FIT_CENTER);
        setAdjustViewBounds(true);
        setId(product.getProductId());
        setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 300));
        this.product = product;
        this.context = context;
    }

    @Override
    protected void onDraw (Canvas canvas) {
        super.onDraw(canvas);
        Integer width = (int)canvas.getWidth();
        Integer height = (int)canvas.getHeight();

        p.setColor(Color.BLACK);
        p.setAlpha(80);
        canvas.drawRect(0, (int)(height*0.73), width, height, p);
        p.setAlpha(100);
        p.setColor(Color.WHITE);
        p.setTextSize(16);
        p.setFakeBoldText(true);
        StaticLayout layout = new StaticLayout(product.getProductName(), new TextPaint(p), width-10,
                                        Layout.Alignment.ALIGN_NORMAL,(float)1.0, (float)0.0,
                                        true);
        canvas.translate(5, (int)(height*0.73));
        layout.draw(canvas);
        canvas.restore();
    }
} 
```

ImageGridActivity.java

```
public class ImageGridActivity extends Activity implements SlideMenuInterface.OnSlideMenuItemClickListener {
[...]

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        [...]
        GridView gridView = (GridView) findViewById(R.id.gridviewAC);
        gridView.setAdapter(new ImageGridUniwersalAdapter(this, imageLoader, products.productList, options));
        gridView.setOnScrollListener(new PauseOnScrollListener(imageLoader, true, true));
    }
[...]   
} 
```

ImageGridUniwersalAdapter.java

```
public class ImageGridUniwersalAdapter extends BaseAdapter {
    private DisplayImageOptions options;
    private final List<Product> products;
    public ImageLoader imageLoader;
    private Context context;

    public ImageGridUniwersalAdapter(Context context, ImageLoader imageLoader, List<Product> products, DisplayImageOptions options){
        this.options = options;
        this.products = products;
        this.imageLoader = imageLoader;
        this.context = context;
    }

    [...]

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Product tmpProd = products.get(position);

        ProductView pv = new ProductView(this.context, tmpProd);
        imageLoader.displayImage(
                SettingsHelper.SERVERURL+tmpProd.getImgThumbUri(),
                pv,
                options);

        return pv;
    }
} 
```

grid_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/gridviewAC"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:gravity="center"
          android:horizontalSpacing="4dip"
          android:numColumns="2"
          android:stretchMode="columnWidth"
          android:verticalSpacing="4dip"
          android:padding="4dip" /> 
```

# android - W/CursorWrapperInner(8375)：光标在没有事先关闭的情况下完成（）

> ID：15134143
> 
> 赞同：2
> 
> 时间：2013-02-28T11:18:12.370
> 
> 标签：android, resolver

我厌倦了这个问题，实际上不知道问题出在哪里，下面是我的代码：

```
private void readSMS() throws IOException {
    // TODO Auto-generated method stub
    Log.d("Read SMS","Called");
    ContentResolver cr = context.getContentResolver();
    Uri uri = Uri.parse("content://sms/inbox");
    StringBuilder smsBackup = new StringBuilder(); 
    Cursor messagesCursor = cr.query(uri, new String[] { "_id","address","body","person"}, null,null, null);
    smsBackup.append("SMS Back UP (Total Message(s)::"+messagesCursor.getCount()+") \n\n");

    String name = null;
    if(messagesCursor.getCount() > 0){
        while(messagesCursor.moveToNext()){
            name = null;
            name = getName(messagesCursor.getString(messagesCursor.getColumnIndex("address")));

            if(name==null)
                name = "Sender : " + messagesCursor.getString(messagesCursor.getColumnIndex("address"));

            smsBackup.append("Sender : "+name +"\n"+  "Message : "+messagesCursor.getString(messagesCursor.getColumnIndex("body")) + "\n\n");
        }
    }

    Log.d("InSMS Lenght","::"+smsBackup.toString().length());
} 
```

这是日志猫消息：W/CursorWrapperInner(8375): Cursor finalized without prior close()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T17:19:22.533

这可能是旧的，但这就是原因。

不要在这里抛出异常：

```
readSMS() throws IOException 
```

而是像这样包装在一个 try catch 块中：

```
try{
    ContentResolver cr = context.getContentResolver();
    Uri uri = Uri.parse("content://sms/inbox");
    StringBuilder smsBackup = new StringBuilder(); 
    Cursor messagesCursor = cr.query(uri, new String[] { "_id","address","body","person"}, null,null, null);
    smsBackup.append("SMS Back UP (Total Message(s)::"+messagesCursor.getCount()+") \n\n");

    String name = null;
    if(messagesCursor.getCount() > 0){
        while(messagesCursor.moveToNext()){
            name = null;
            name = getName(messagesCursor.getString(messagesCursor.getColumnIndex("address")));

            if(name==null)
                name = "Sender : " + messagesCursor.getString(messagesCursor.getColumnIndex("address"));

            smsBackup.append("Sender : "+name +"\n"+  "Message : "+messagesCursor.getString(messagesCursor.getColumnIndex("body")) + "\n\n");
        }
    }
 messagesCursor.close();
}catch(IOException e){
//handle here, if not log it
}finally{
//can also close here if you want, need to wrap in another try block and check for null
} 
```

似乎问题是在`close()`可以调用之前捕获了ioexception。然后在该点抛出该方法并且永远不会调用该方法。我可能是错的，我只是快速浏览了一下。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:37:51.567

完成处理后，您应该关闭该`Cursor`对象。

# exception - 为什么方法内部的异常应该在方法本身而不是外部处理？

> ID：15134144
> 
> 赞同：-5
> 
> 时间：2013-02-28T11:18:15.233
> 
> 标签：exception, exception-handling, java

考虑一个在其主体中引发异常的 method()。考虑以下场景：
场景 1：

```
{
  //..
  // ..
  method();    //Exception handled inside the method
  //..
  //..
} 
```

在这种情况下，应该在 method() 本身内处理异常。

还要考虑这一点：
场景 2：

```
{
   //..
   //..
   try{
      method();   //Exception not handled with-in the method
      }
    catch(){}
   //..
   // ..
} 
```

为什么不允许出现场景 2 之类的情况？即为什么强制在方法内处理异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:20:50.947

您可以在您的方法中添加`throws`子句并使其抛出一个`exception`可以处理的 ，如**情况 2**中所述。所以它是允许的，像这样： -

```
void method() throws Exception{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:26:03.853

这两种情况都是允许的。Java 施加的限制（如果这是正确的术语）是*必须*在某处处理异常。

在第一种情况下，被调用的方法自己处理异常——因此调用方法中不需要 try-catch。

第二种情况是有效的——但前提是`method()`包含`throws`声明以指示必须在其他地方处理异常。

```
void method() throws Exception
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:29:21.580

这是允许的！使用如下

```
public void method() throws ClassNotFoundException { 
```

捕获 ClassNotFoundException。（在大多数情况下，您不应该`Exception`像其他简化的海报一样扔裸露的 ）

无论是在里面聊天还是在外面聊天都是软件设计。没有经验法则。我的经验是，捕捉外部导致代码不那么复杂，可以更好地进行单元测试。

寻找设计模式“最后一道防线”：这意味着在你最顶级的类中，例如在 main() 中有一个 `catch (Exception ex) {`

当没有其他方法捕获它时捕获它。在这种情况下，您可以记录异常并（尝试）安全地关闭系统。这是最后一道防线。注意： spmetimes 也有意义`catch(Throweable th)`，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:25:58.553

TL；DR：除非您真的有意，否则切勿捕获[InterruptedException 。](http://docs.oracle.com/javase/6/docs/api/java/lang/InterruptedException.html)它几乎总是需要被抛出。

这个伟大的问题实际上是一个非常重要的设计决策。做到这一点很困难，而在整个团队中做到这一点则更加困难。问题的答案在于您的实施。错误是否需要立即显示给用户？您有从故障中恢复的辅助方法吗？异常是致命事件吗？

请帮自己一个忙，永远不要编写空的异常处理程序。当出现问题时，您会很高兴在其中放入 log.debug 语句。除此之外：了解每个异常的含义并以最优雅的方式对其做出响应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T11:21:53.633

如果您使用 senario-2 处理异常，则无法将异常映射到实际异常。即您不能按照块中的代码说明它。所以请针对现场自身处理异常，以便具体说明为什么会发生异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T11:23:04.830

如上所述，我们的想法是早投晚收。总体而言，您希望通过简单地使逻辑“流动”来最小化抛出的异常。但是总有一些情况很难处理，或者代码混淆太多，所以确保用户了解使用某些方法的风险并相应地处理它们是值得的。

# localization - 向 Dojo 小部件添加新语言环境

> ID：15134150
> 
> 赞同：0
> 
> 时间：2013-02-28T11:18:28.240
> 
> 标签：localization, internationalization, dojo

我使用 DojoX Enhanced Grid 小部件，它带有内置的几种语言（区域设置）的翻译：参见[http://svn.dojotoolkit.org/src/tags/release-1.6.1rc2/dojox/grid/enhanced/nls /](http://svn.dojotoolkit.org/src/tags/release-1.6.1rc2/dojox/grid/enhanced/nls/)

如果我想添加一个新的语言环境（比如说 cn（中文）或 ru（俄语）），我该怎么做？

如果我在本地托管 Dojo，那将相当简单（我只需在 dojox/grid/enhanced/nls/ 目录下为我选择的语言环境添加一个文件夹并在那里提供翻译），但就我而言，我有从 CDN 加载的道场。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:41:10.863

这很容易。在加载 dojo.js**之前**，您可以通过 dojo 配置对象配置许多全局属性（包括语言环境） 。[http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/](http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:02:10.773

发现中文的正确语言环境代码是 zh，而不是 cn。dojox/grid 已经支持中文和俄文。

我认为没有在本地托管道场的情况下添加新语言（比如印地语或拉丁语）的方法。即使使用本地托管的 dojo，为该语言环境添加一个新文件夹也不是一件容易的事。还有一些我不知道的事情要做。

# java - 拥有匿名实现的 ActionListener？（忙光标）

> ID：15134160
> 
> 赞同：1
> 
> 时间：2013-02-28T11:19:09.107
> 
> 标签：java, swing, cursor, actionlistener, anonymous-class

ActionListeners（具有匿名实现）通常添加如下：

```
someobject.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent ae){
        ...
    }
}); 
```

但我想在每个“actionPerformed”事件之前和之后执行我自己的代码。因此，假设我在自己的类中实现了 ActionListener 接口，例如：

```
public class MyOwnActionListener implements ActionListener{
    public void actionPerformed(final ActionEvent ae) {
        // own code
            super.actionPerformed(ae); // I know, this makes no sense, cause ActionListener is an interface
        // own code
    }
} 
```

我希望能够做类似的事情：

```
someobject.addActionListener(new MyOwnActionListener(){
    public void actionPerformed(ActionEvent ae){
        ...
    }
}); 
```

在我的班级中，`actionPerformed`应该执行匿名内的代码而不是`super.actionPerformed(ae);`. 我知道，我不能为 MyOwnActionListener 提供匿名实现，因为它是一个类而不是一个接口，而且它`super.actionPerformed(ae);`不起作用，因为我想调用继承类的方法，而不是超类 - 但怎么能我重新设计了我的代码以尽可能少地更改 ActionListener 的匿名实现？

背景：我正在尝试在一个非常庞大的 java 项目（有很多匿名 ActionListener）上实现忙碌光标管理。因此，如果我必须将自己的代码（更改光标）添加到每个匿名用户`actionPerformed()`，我会发疯的。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:50:01.947

尝试;

```
public abstract class MyOwnActionListener implements ActionListener{
    @Override
    public void actionPerformed(final ActionEvent ae) {
        // own code
        doActionPerformed(ae); 
        // own code
    }

    protected abstract void doActionPerformed(ActionEvent ae);
} 
```

然后在子类中实现 doActionPerformed。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:05:12.477

如果您使用游标，请将其放在 finally 中。否则，如果出现问题，您将被困在沙漏上。

```
@Override
public void actionPerformed(ActionEvent e) {
    try {
        doBefore(e);
        delegate.actionPerformed(e);
    }finally {
        doAfter(e);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:05:44.607

你可以实现一个包装器动作/监听器

```
public WrapperAction extends AbstractAction {

    private Action delegate;

    public WrapperAction(Action delegate) {
       this.delegate = delegate;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        doBefore(e)
        delegate.actionPerformed(e);
        doAfter(e);
    }

    protected void doBefore(ActionEvent e) {
      ...
    }

    protected void doAfter(ActionEvent e) {
      ...
    }
} 
```

注意：对于不完整的操作，它必须将其值（如启用、名称...）报告为委托的值，并监听委托属性的更改并根据需要通知其监听器。

# dependency-injection - Autofac错误：实例注册只能支持SingleInstance()共享

> ID：15134163
> 
> 赞同：3
> 
> 时间：2013-02-28T11:19:22.447
> 
> 标签：dependency-injection, autofac

当我尝试使用 autofac 注册我的课程时，我收到以下错误：“实例注册 'GetAllDivisionsCommand' 只能支持 SingleInstance() 共享”。

我不明白为什么会出现此错误，但假设这与具有用于缓存的静态成员变量的类有关，因为这是该类的唯一不同之处。我将任何其他类注册为 SingleInstance 或 InstancePerDependency 都没有任何问题。

本质上，该类用于从数据库中检索很少更改的部门列表，并缓存结果。每次运行命令时，它首先检查数据库上的更改，如果检测到更改，则重新运行查询；如果不是，则返回缓存列表。

所以我试图用 Autofac 将 GetAllDivisionsCommand 注册为 IGetAllDivisionsCommand。IGetAllDivisionsCommand 本身实现了 IInjectableCommand，它只是一个标记接口，以及 ICachedListCommand。具体的命令类继承自静态成员变量所在的抽象基类 CachedListCommand。

有谁知道什么会导致这个错误信息？SingleInstance 对我不起作用，因为我不能继续重用同一个会话。

代码：

```
Type commandType = typeof(IInjectedCommand);
        Type aCommandType = typeof(GetAllDivisions);

        var commands =
            from t in aCommandType.Assembly.GetExportedTypes()
            where t.Namespace == aCommandType.Namespace
                  && t.IsClass
                  && !t.IsAbstract
                  && (commandType.IsAssignableFrom(t))
            let iface = t.GetInterfaces().FirstOrDefault(x => "I" + t.Name == x.Name)
            select new { Command = t, Interface = iface };

        foreach (var cmd in commands)
        {
            builder.RegisterInstance(cmd.Command).As(cmd.Interface).InstancePerLifetimeScope();
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T13:59:35.850

`RegisterInstace`顾名思义是用于[注册实例](https://code.google.com/p/autofac/wiki/ComponentCreation)而不是类型。

你需要的是`RegisterType`：

```
foreach (var cmd in commands)
{
    builder.RegisterType(cmd.Command).As(cmd.Interface).InstancePerLifetimeScope();
} 
```

顺便说一句，使用[Autofac 扫描](https://code.google.com/p/autofac/wiki/Scanning)功能，您的注册码大致相同：

```
builder
    .RegisterAssemblyTypes(aCommandType.Assembly)
    .AssignableTo<IInjectedCommand>()
    .InNamespace(aCommandType.Namespace)
    .AsImplementedInterfaces()
    .InstancePerLifetimeScope(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-16T11:38:20.340

就我而言，我确实想要 RegisterInstance，因为我实际上有一个想要注册的实例。我有 builder.RegisterInstance(myInstance).InstancePerDependency();

InstancePerDependency 的文档内容如下：

> 配置组件，以便每个依赖组件或对 Resolve() 的调用都获得一个新的、唯一的实例（默认值。）

仔细检查后，使用“每个依赖项的实例”注册实例是不可能的，因为如果实际上注册了 1 个实例，则 Autofac 不可能在每次调用 Resolve 时返回一个新实例。

所以，就我而言，解决方案是这样的。

```
builder.RegisterInstance(myInstance).SingleInstance(); 
```

Autofac 异常可能用更清楚的措辞来解释这个问题。

# c++ - 从 QString* 到 QString& 的转换

> ID：15134175
> 
> 赞同：2
> 
> 时间：2013-02-28T11:19:42.350
> 
> 标签：c++, pointers, reference, implicit, qstring

我对使用指针和引用感到困惑，我遇到了一个小问题。

我有一个功能：

```
bool myObject::isFlag( QString &pArgument) const { } 
```

我正在使用它：

```
QStringList::const_iterator myQStringList.begin();

[...] && !isFlag( QString( *(myVar + 1))) 
```

我收到了一个错误

```
QString( *(myVar + 1))) 
```

它指定没有找到匹配的函数。

但是我很确定这应该很好......你碰巧知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:28:07.533

在这次通话中

```
isFlag( QString( *(myVar + 1))) 
```

争论是暂时的`QString`。您不能将非常量引用绑定到临时对象，您需要更改`isFlag`以获取 const 引用：

```
bool myObject::isFlag( const QString &pArgument) const { 
```

如果你不能使用`const`引用，那么你应该创建一个`QString`，然后将它传递给函数：

```
QString qs( *(myVar + 1));
isFlag(qs); 
```

以上所有假设 a`QString`可以由 构建`*(myvar +1)`，这又是一个临时的。

# time - UML 序列图中的时间会下降吗？

> ID：15134178
> 
> 赞同：1
> 
> 时间：2013-02-28T11:19:46.367
> 
> 标签：time, uml, sequence-diagram

我相信在任何 UML 序列图中，时间都会向下（向右），例如：

2013

2014

2015

2016 年

所以末端将在底部和（可选）在右侧。事实是这样吗？问的原因是我想验证经理确实想要与 UML 序列图相反的内容，即经理明确表示在这种情况下他更喜欢首先说明最新更新的时间序列，例如

2016 年

2015

2014

2013

这与UML相反。我不介意任何一种方式，但我不愿意为同一程序同时保留 2 个标准。所以我要问的是，说我的经理确实想要与 UML 序列图相反的方式是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:56:21.037

你是对的：在序列图中，时间被理解为从上到下。如果您想更改它并让时间从下往上流逝，则必须将泳道的标签放在按钮上，否则如果在序列期间发生泳道创建问题（即一条消息创建一个新对象）有自己的泳道）。

类似地，活动图被理解为用从上到下或从左到右移动的时间来表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T08:59:21.023

根据UML的定义，时间是向下的，但是个体生命线的时间是相互独立的。这意味着，在两条生命线上从顶部放置在同一位置的点（发生）不必同时发生！请参阅 UML 上层结构中交互的跟踪定义。

# html - 在没有文字的浮动元素上总是有宽度

> ID：15134183
> 
> 赞同：0
> 
> 时间：2013-02-28T11:20:09.040
> 
> 标签：html, css, width

考虑一下：

```
<style>
a
{
    float:left;
    width:200px;
    text-align:center;
}
</style>
<div>
    <a>First</a>
    <a>Second</a>
    <a>Third</a>
</div> 
```

这完美地工作，并且每个`<a>`都有正确的宽度。但是当我从其中一个中删除文本时`<a>`，宽度会丢失，而不是 600px 宽度，我有 400px。

我应该怎么做才能使 3`<a>`具有固定宽度且没有文本？

我在我的应用程序中经常使用 jQuery，并且这些锚点中的文本发生了变化。

我找到了一种通过用 替换文本来解决此问题的方法`\xA0`，但我仍然可以单击它，并且我希望它被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:23:24.207

这是因为元素以 no 结束，没有`height`任何内容。解决方法是指定一个高度：

```
a {
    float:left;
    width:200px;
    text-align:center;
    height:20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:24:04.280

您应该应用`display: inline-block`这些锚以防止它们占用更少的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:24:40.787

你只需要添加`display:block;`

一个标签是默认的`display:inline;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:31:59.023

您可以使用 display:block 作为样式标签。这是我的看法。 [http://jsfiddle.net/DkL6F/](http://jsfiddle.net/DkL6F/)

```
 <div>
                <a style="background:#FF433F;">&nbsp;&nbsp;</a>
                <a style="background:#F1F33F;">&nbsp;&nbsp;</a>
                   <a style="background:#F1B33F;">&nbsp;&nbsp;</a>
            </div>

                  a
            {
                 float:left;
                width:200px;
                 text-align:center;
           display:block;

                } 
```

# powershell - 将输出存储到字典中

> ID：15134184
> 
> 赞同：1
> 
> 时间：2013-02-28T11:20:09.810
> 
> 标签：powershell

我想遍历补丁脚本中的文件夹，找到 DBChangesMain 和 ContentLbl 的每个迭代结果并将其存储到字典或哈希表中，然后打印出结果我该怎么做？

到目前为止我有

```
$patchscripts = Get-Item "F:\folder\trunk\Source\Database\Patch Scripts" 

foreach ($folders in Get-childitem $patchscripts -recurse -include *.sql )
{        
    if ($folders -like "*DBChangesMain*")
    {   

    }
    if ($folders -like "*ContentLbl*")
    {       

    }      
}

 Write-Host $DbChanges
 Write-Host $contentlbl 
```

如果你有更好的方法，请告诉我，干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:29:57.030

我想在您的评论之后，我宁愿走以下路线：

```
$patchscripts = 'F:\folder\trunk\Source\Database\Patch Scripts'
$dbChangesMain = Get-ChildItem $patchScripts -Rec -Inc *DBChangesMain*.sql
$contentLbl = Get-ChildItem $patchScripts -Rec -Inc *ContentLbl*.sql 
```

之后，您只需拥有两个包含 SQL 文件匹配名称的数组。

# php - 我想使用 PHP 在目录中搜索多个文件并开始通过 HTTP 下载它们

> ID：15134185
> 
> 赞同：1
> 
> 时间：2013-02-28T11:20:09.953
> 
> 标签：php, file, directory, transfer

刚开始，我是一个 PHP 菜鸟。

我有一个托管我的文件的 Apache 服务器。我有一台只能指向一个 PHP 文件的设备。我需要它做的是让我的 PHP 文件以我要下载的文件的名称读取，并将其指向它存储的目录。目前，我让它指向一个文件，但我需要它能够指向多个文件。这在PHP中可能吗？

这是我到目前为止所拥有的：

```
<?php 
$file_name = 'file.img';
$size = filesize($file_name);
$file_url = 'http://192.168.0.5/' . $file_name;
header("Content-length: $size");
header("Content-Type: text/plain");
header("Content-Transfer-Encoding: binary");
header("Content-disposition: attachment; filename=\"".$file_name."\"");
readfile($file_url);?> 
```

编辑：我要输入以下载文件的命令足够接近如下：

```
cmd=download+-a+$$.img+altimage
cmd=download+-a+$$.conf+altconfig 
```

下载目录是 .php 文件。我对如何做到这一点的其他建议持开放态度。

Edit2：这是一个确切的示例 URL：

```
 myserver.com/cgi-bin/va/cmd?hdl+fullconfig.ini+altconfig 
```

hdl 是一个预定义的函数，它指向下载目录，以便从服务器下载文件，所以你的意思的布局并不完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:54:13.203

我很难理解您到底要做什么，但我想您希望用户能够下载多个文件。如果这是正确的，这是实现此目的的一种方法：

您可以让 PHP 使用[ZIP 扩展名](http://www.php.net/manual/en/book.zip.php)创建一个 ZIP 存档。为了让它工作，你必须在你的 php.ini 中加载扩展 php_zip.dll。

```
$ZIP = new ZipArchive();

// Use the current time as the filename to prevent two users to use the same file
$ZIPName = microtime().".zip";

// Create a new ZIP file
$ZIP->open($ZIPName, ZIPARCHIVE::CREATE);

// Loop through all files - $Files needs to be an array with the names of the files you want to add, including the paths
// basename() will prevent the creation of folders inside the ZIP
foreach ($Files as $File) {
    $ZIP->addFile($File, basename($File));
}

// Close the archive
$ZIP->close();

// Send the archive to the browser
readfile($ZIPName); 
```

我希望这就是你要找的。

# bash - 在提示用户输入的脚本中使用 grep

> ID：15134186
> 
> 赞同：0
> 
> 时间：2013-02-28T11:20:10.303
> 
> 标签：bash, ksh

我编写了一个 shell 脚本，它要求从标准输入中输入一些用户名和密码。输入用户名和密码后，将根据脚本中传递的参数输出一个输出。

假设我的脚本名称是**XYZ.ksh。**

现在我的问题是这些脚本的用户想要使用这些脚本与其他 shell 命令（如*grep、less、more、wc 等）结合使用。*

通常是的，他们可以使用

```
XYZ.ksh | grep abc 
```

但就我而言，由于 XYZ 提示输入用户名和密码，我们无法使用“|” 在那之前。它永远阻塞。

我只是想知道如何实现功能。

**我尝试了什么我尝试** 从用户那里输入“更多命令”，其中用户输入诸如“| grep abc”之类的东西，但是当我在我的脚本中使用这个输入时它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T19:49:05.880

一种不太理想的可能性是将提示显示为`stderr`而不是`stdout`.

```
echo -n "Username:" >/dev/stderr 
```

更好的解决方案是检查`stdin`外壳。如果它是终端，则打开它进行写入并重定向到该文件。不幸的是，我不确定如何在 bash 或 ksh 中做到这一点。也许像

```
echo -n "Username:" >/dev/tty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:52:37.607

这类问题通常有多种解决方案，但没有一个是完美的：

*   从标准输入读取密码。这使得在管道中使用脚本变得非常困难。处理更改密码的命令使用此方法：`passwd`，`smbpasswd`
*   在命令行参数中提供用户名和密码。此解决方案适用于在管道中使用脚本，但任何人都可以查看命令行，例如使用`ps -ef`。这被`mysql`, `htpasswd`, `sqlplus`, ...使用
*   将未加密的用户名和密码存储在用户主目录的文件中。此解决方案适用于在管道中使用脚本，但脚本必须检查文件是否对其他用户可见或可修改。这是由`mysql`
*   将私钥存储在本地文件中，将公钥存储在远程文件中，如 SSH 使用的那样。您必须具备良好的加密知识才能正确执行此操作（或依赖 SSH），但它非常适合在管道中使用，甚至在不同机器上创建管道！
*   不处理密码，假设用户登录了系统，就有权运行程序。您可以仅将执行权限授予一组，以过滤谁可以使用该程序。这被`sqlplus`Oracle、VirtualBox、某些 Linux 发行版上的游戏使用，...

我最喜欢的解决方案是最后一个，因为在安全性方面，该系统肯定比我可以编写的任何程序都要好。

如果密码用于登录其他服务，那么我可能会选择包含密码的私人文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T20:08:04.987

您可以使用（我假设您正在使用脚本读取用户名和密码`read`）

```
(
    read -p "user:" USER
    read -p "pass:" PASS
) < /dev/tty > /dev/tty 
```

你就可以跑了

```
$ cmd | XYZ.ksh 
```

但是，我同意其他答案：只是不要要求用户和密码，并为脚本提供正确的权限以允许访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:33:58.273

像这样使用`<<<`：

```
XYZ.ksh <<< "your inputs" | grep abc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T12:51:09.997

在您的脚本中，您可以测试 stdout 是否连接到终端：

```
if [[ -t 1 ]] 
```

这样，如果输出不进入控制台，您可以取消提示。或者，使用“更多命令”解决方案，运行连接到命名管道的命令。

# android - Qemu，除以零，mxcsr 寄存器

> ID：15134189
> 
> 赞同：11
> 
> 时间：2013-02-28T11:20:16.693
> 
> 标签：android, c, floating-point, qemu, kvm

使用以下代码，我遇到了一个有趣的情况：

```
 static void DivideByZero() {
      // volatile to prevent compiler optimizations.
      volatile float zero = 0.0f;
      volatile float result __attribute__((unused)) = 123.0f / zero;
    }
  DivideByZero();
  int raised = fetestexcept(FE_DIVBYZERO | FE_OVERFLOW);
  ASSERT_TRUE((raised & FE_DIVBYZERO) != 0); 
```

当我在`KVM`支持下运行我的 qemu 设备时，我得到了以下结果：

> ```
>  FE_DIVBYZERO !=0; //and it's ok 
> ```

但是当我在没有`KVM`支持的情况下运行相同的源时：

> ```
>  FE_DIVBYZERO ==0; //and it's not ok 
> ```

据我了解这种情况，它发生了，因为在`mxcsr`寄存器位（由零除）未设置。但我不明白为什么没有设置这个位。有任何想法吗？

**更新** ：基于 qemu
的模拟器也发生了同样的情况。`android`

```
emulator -avd test -qemu 
```

返回：FE_DIVBYZERO !=0;

```
emulator -avd test -qemu -disable-kvm 
```

返回：FE_DIVBYZERO ==0；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:13:21.730

该`MXCSR`寄存器在 [英特尔® 64 和 IA-32 架构软件开发人员手册中进行了描述](http://download.intel.com/products/processor/manual/253665.pdf)

在现代 x86 处理器上，编译器将浮点运算映射为`scalar`SIMD，使用与`vector (SSE)`指令相同的资源。

该`MXCSR`寄存器控制浮点指令`scalar`和`vector (SSE)`浮点指令的操作。我在下面包含了描述 MXCSR 的相关部分。 `MXCSR[9]`是除零掩码，如果清零 (0)，则 CPU 将在检测到除零时引发异常。当您在虚拟机中运行时，异常被“虚拟化”，它们由“管理程序”处理，在您的情况下为[KVM](http://en.wikipedia.org/wiki/Kernel-based_Virtual_Machine)。然后管理程序决定是否将异常反映回来宾虚拟机。我的理论是清除除零掩码，引发异常，KVM 和/或 QEMU 正在清除指示发生除零异常的标志`MXCSR[2]`并恢复您的虚拟机。因此，这很可能是 KVM/QEMU 中的一个错误。

您可以在 之前发出[**fegetexcept()**](http://linux.die.net/man/3/fegetexcept)`DivideByZero()`以查明除零异常是否被屏蔽 (1) 或不 (0)。如果它没有被屏蔽，那么你可以使用[**fedisableexcept()**](http://linux.die.net/man/3/fedisableexcept)来屏蔽它。

![MXCSR 控制/状态寄存器](../Images/e190cda4b549640ed0ade99525cefa1e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:44:34.683

当 QEMU 作为软件仿真工作时。

## 来自[http://qemu.weilnetz.de/qemu-tech.html#intro_005fx86_005femulation](http://qemu.weilnetz.de/qemu-tech.html#intro_005fx86_005femulation)。

2.8 异常支持

当遇到除零等异常时使用 longjmp()。

主机 SIGSEGV 和 SIGBUS 信号处理程序用于获取无效的内存访问。通过重新翻译相应的基本块并查看主机程序计数器在异常点的位置来找到模拟程序计数器。

## 虚拟 CPU 无法检索确切的 EFLAGS 寄存器，因为在某些情况下，由于条件代码优化，它没有被计算。这不是一个大问题，因为模拟代码在任何情况下仍然可以重新启动。

看起来 FPU 状态也丢失了，指示什么是 FPU 异常的位 - 在您的情况下除以零/无效参数也丢失了。并且 QEMU 无法正确模拟 fetestexcept。因此结果。

当 QEMU 使用硬件虚拟化 - KVM 工作时，浮点异常得到正确处理 - 所以测试是正确的。

-- 编辑：其他可能性是异常模式的初始化方式不同：您可以尝试添加它以通过零异常启用 div。费用除外（FE_INVALID | FE_DIVBYZERO | FE_OVERFLOW）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T03:53:10.543

我不确定逻辑，但 QEMU 是软件实现，KVM 是硬件支持。因此，可能在软件实现中，由于浮点计算错误或存储浮点值而未设置该位。

# opencv - 如何计算opencv中凸包的伸长率？

> ID：15134190
> 
> 赞同：0
> 
> 时间：2013-02-28T11:20:16.303
> 
> 标签：opencv, computer-vision, convex-hull, feature-extraction

我找到了这种基于图像矩计算伸长率的方法

```
#ELONGATION
def elongation(m):
    x = m['mu20'] + m['mu02']
    y = 4 * m['mu11']**2 + (m['mu20'] - m['mu02'])**2
    return (x + y**0.5) / (x - y**0.5)

mom = cv2.moments(unicocnt, 1)    
elongation = elongation(mom) 
```

如何计算凸壳的伸长率？

```
hull = cv2.convexHull(unicocnt) 
```

其中 'unicocnt' 是通过查找轮廓获取的轮廓。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:28:25.023

默认情况下，convexHull 输出一个点索引向量。您必须将 returnPoints 参数设置为 1 以输出一个点向量，然后您可以将其传递给 cv2.moments。

# java - Java - 将值添加到二维数组以及如何查看数组？

> ID：15134193
> 
> 赞同：2
> 
> 时间：2013-02-28T11:20:19.390
> 
> 标签：java, android, arrays, multidimensional-array

我有一个数组（Arr）。我用值填充 points1 和 points2。

```
public class Arr {
    float pointX;
    float pointY;
    boolean yesNo;
    String text; 
}

public Arr points1[];
public Arr points2[];   

points1 = new Arr[100];
for (int i = 0; i < 100; i++) points1[i]= new Arr();    

for (int j = 0; j < 100; j++) {
    points1[j].pointX = getFloat;
    points1[j].pointY = getFloat;
    points1[j].yesNo = getBoolean;
    points1[j].text = getText;
}   

points2 = new Arr[100];
for (int x = 0; x < 100; x++) points2[x]= new Arr();    

for (int y = 0; y < 100; y++) {
    points2[y].pointX = getFloat;
    points2[y].pointY = getFloat;
    points2[y].yesNo = getBoolean;
    points2[y].text = getText;
} 
```

这行得通，但是，当我有五个或更多（points1，points2，points3 ...）时，我该如何制作“public Arr points[][]”？然后使用 points[0][22].pointX 或 points[1][10].text 填充并获取值？

以及如何在 PHP 中看到像 var_dump 这样的 points[][] 数组？如何列出数组？var_dump 示例：

```
array(3) {
  [0]=>
  int(1)
  [1]=>
  int(2)
  [2]=>
  array(3) {
    [0]=>
    string(1) "a"
    [1]=>
    string(1) "b"
    [2]=>
    string(1) "c"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:49:59.503

这是一个工作示例

```
package com.stackoverflow.q15134193;

public class Test1 {
    public static Arr[][] points;
    static float getFloat = 1;
    static boolean getBoolean = true;
    static String getText = "hi";

    public static void main(String[] args) {

        points = new Arr[100][];
        for (int i = 0; i < points.length; i++) {
            points[i] = new Arr[100];
            for (int j = 0; j < points[i].length; j++)
                points[i][j] = new Arr();
        }

        for (int i = 0; i < points.length; i++) {
            for (int j = 0; j < points[i].length; j++) {
                points[i][j].pointX = getFloat;
                points[i][j].pointY = getFloat;
                points[i][j].yesNo = getBoolean;
                points[i][j].text = getText;
            }
        }

        for (int i = 0; i < points.length; i++)
            for (int j = 0; j < points[i].length; j++)
                System.out.println("X: " + points[i][j].pointX + " Y: " 
                        + points[i][j].pointY + " YesNo: " 
                        + points[i][j].yesNo 
                        + " text: "+ points[i][j].text);
    }
}

class Arr {
    public float pointX;
    public float pointY;
    public boolean yesNo;
    public String text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:25:35.077

我不完全清楚您要实现的目标，但 Java 不是 PHP。Java 有一组广泛的集合，与简单的数组相比，它可以为您提供更好的覆盖范围。

由于我不完全确定您要做什么，因此我无法真正告诉您哪些集合可以完成这项工作，但是您可以阅读 Maps 和 ArrayList 之类的内容。

例如，您可以制作一个 'Arr's like 的 ArrayList

```
ArrayList<Arr> list = new ArrayList<Arr>(); 
```

同样`ArrayList<Arr, Arr>`，如果您想将对象 Arr 与用于查找它的键一起存储，您可以这样做，或者开始使用 Maps。

一旦你使用了一个 Java 集合，打印这些最清晰的方法就是循环它，比如

```
for(Arr a : list){
  Log.d("my_tag", "My list contains"+a.toString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:29:28.210

您可以使用[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html).

```
ArrayList<Arr> points = new ArrayList<Arr>(); 
```

现在，访问索引如下：

```
points.get(22).pointX OR points.get(10).text 
```

尝试打印 arraylist `points`，以查看字符串输出附近的内容：

```
System.out.println(points); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:30:16.253

你需要在你的类 Arr 中实现一个 toString() 方法，然后调用

```
Log.i("mytag", Arrays.toString(points1)); 
```

正如这里所解释的，[如何在 logcat for android 中查看数组](https://stackoverflow.com/a/9068689/2119061)

# python - 如何跳过初始化函数的第一个返回值？- Python

> ID：15134194
> 
> 赞同：0
> 
> 时间：2013-02-28T11:20:25.663
> 
> 标签：python, function, initialization, return

通常我只需`thing`要从函数返回的第二个；例如下面的代码，我想获取`.txt`文件列表并获取不带扩展名的文件名：

```
import os, glob
indir = "/home/alvas/whatever/"
for infile in glob.glob(os.path.join(indir,'*'):
  PATH, FILENAME = os.path.split(infile)
  FILENAME.rstrip(".txt") 
```

而不是这样做：

```
PATH, FILENAME = os.path.split(infile) 
```

我也可以这样做：

```
FILENAME = os.path.split(infile)[1] 
```

**还有其他方法吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:22:53.240

一种惯用的方法是做

```
_, FILENAME = os.path.split(infile) 
```

使用约定`_`是您要丢弃或忽略的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:23:40.540

这个怎么样：

```
_, filename = os.path.split(infile) 
```

# mysql - 如何从 MySQL 中的两个不同表中删除重复的字段

> ID：15134195
> 
> 赞同：0
> 
> 时间：2013-02-28T11:20:26.317
> 
> 标签：mysql, sql, delete-row

想象一下，你有两张桌子。

表格栏：

```
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| name  | varchar(255) | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+ 
```

表 foo：

```
+------------------+--------------+------+-----+---------+-------+
| Field            | Type         | Null | Key | Default | Extra |
+------------------+--------------+------+-----+---------+-------+
| name_alternative | varchar(255) | YES  |     | NULL    |       |
+------------------+--------------+------+-----+---------+-------+ 
```

并且您想从表中删除与表中的字段`bar`具有相同`name`值的行`name_alternative``foo`

我可以使用以下查询：

```
DELETE FROM foo WHERE name IN (SELECT name_alternative FROM bar); 
```

但这需要很长时间才能在两个表中执行大量记录。

所以我想知道这个查询是否有更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:31:23.307

除了@dan1{4} 答案之外，我的猜测是它需要很长时间，因为`bar(name)`.

您不需要涵盖整个 255 个字符的索引，具体取决于您的字符串，即如果很多行的第一个字符不同，则在几个字符上创建一个索引

```
CREATE INDEX indexname ON bar(name(8)) 
```

`8`是您可能要细化的建议值。该索引将帮助 mysql 定位与*foo.namealternative匹配的每个**条形*行

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:23:49.500

这是另一种可行的方式，我认为它会更有效：

```
DELETE FROM bar
    USING foo, bar
    WHERE name_alternative = name 
```

这是一个[有效的 SQLFiddle 示例](http://www.sqlfiddle.com/#!2/ea1db/1)。

[请参阅删除文档](http://dev.mysql.com/doc/refman/5.0/en/delete.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:30:24.753

```
delete from bar
using (
    select foo.name_alternative
    from 
        bar
        inner join
        foo on bar.name = foo.name_alternative
) s
where bar.name = s.name_alternative 
```*

# operating-system - 抢先调度算法

> ID：15134196
> 
> 赞同：1
> 
> 时间：2013-02-28T11:20:31.723
> 
> 标签：operating-system

可以将具有优先级的先到先服务算法描述为抢先调度算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-23T12:30:08.197

绝对没有。最初的先到先服务是一种非抢占式调度策略。我不知道该算法是否有任何替代/修订可以实现为抢占式 FCFS。您可以在 Abraham Silberschatz 等人的“操作系统概念”中找到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:13:52.007

传统上*，先到先服务算法*用于批量调度。

在大多数情况下，不存在纯粹的“抢占式调度”形式，但抢占式调度与其他策略如循环、最短作业优先等混合在一起。所以是的，可能会有*先到先服务算法*与抢占式调度一起使用的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-28T03:47:36.583

FCFS 不考虑优先级。如果您需要考虑优先级，那么您必须使用优先级调度；这是FCFS的扩展版本。那么它就变成了一种抢占式调度方法。

# c# - 如何组合在 SQL 2005 中返回两个结果的存储过程的结果？

> ID：15134197
> 
> 赞同：0
> 
> 时间：2013-02-28T11:20:33.117
> 
> 标签：c#, sql-server-2005

嘿，我在存储过程中很新，我有类似的程序

```
ALTER procedure [dbo].[list_of_employee]
(
  @employee_id int
 )
 as 
begin 
select *from project_employee_rel PE
inner join employee_details E on E.employee_id=PE.employee_id
inner join project_details P on P.project_id=PE.project_id 
where PE.employee_id=@employee_id

select * from employee_details 
where employee_id=@employee_id
end 
```

它分别返回两个结果我想要这样的结果'如果第一个查询返回空行或 null 然后第二个查询被执行否则不请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:32:22.840

尝试这个

```
ALTER procedure [dbo].[list_of_employee]
(
  @employee_id int
)
as 
BEGIN
  DECLARE @Count int
  SET @Count = select COUNT(PRIMARYKEY COLUMN) from project_employee_rel PE
    inner join employee_details E on E.employee_id=PE.employee_id
    inner join project_details P on P.project_id=PE.project_id 
    where PE.employee_id=@employee_id
  IF (@Count>0)
   BEGIN
      select *from project_employee_rel PE
       inner join employee_details E on E.employee_id=PE.employee_id
       inner join project_details P on P.project_id=PE.project_id 
       where PE.employee_id=@employee_id
   END

  ELSE
   BEGIN
       select * from employee_details 
       where employee_id=@employee_id
   END
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:28:05.653

```
IF Check Count of your first query
  return result set
ELSE 
  return other result set
END 
```

# visual-studio - 基于具有给定扩展名的所有文件在 Visual Studio 中生成代码

> ID：15134198
> 
> 赞同：1
> 
> 时间：2013-02-28T11:20:34.957
> 
> 标签：visual-studio, code-generation, t4, visual-studio-extensions

我有以下任务：在 Visual Studio 中创建一个可视化编辑器（不是今天问题的核心），生成一个自定义格式的文本文件。然后，此文件将用作生成 C# 代码的代码的输入。为此，我一直在研究：

*   T4
*   Visual Studio 扩展
*   Visual Studio 项目模板
*   Visual Studio 项目模板

我觉得解决方案就在某个地方，但我不太清楚如何最好地做到这一点。正如我所看到的，主要问题是以某种方式自动为所有具有给定扩展名的文件生成代码。有谁知道有关如何执行此操作的任何教程或说明？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T06:37:28.470

要将代码生成器与给定扩展名的所有文件自动关联，您需要

*   创建 Visual Studio 包
*   实现自定义[IVsSingleFileGenerator](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.shell.interop.ivssinglefilegenerator.aspx)。最简单的选择是[继承 BaseTemplatedCodeGenerator](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.texttemplating.vshost.basetemplatedcodegenerator.aspx)并覆盖其 GenerateCode 方法以提供您自己的 T4 模板作为“inputFileContent”。
*   使用[ProvideCodeGeneratorAttribute](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.texttemplating.vshost.providecodegeneratorattribute.aspx)注册生成器。
*   使用[ProvideCodeGeneratorExtensionAttribute](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.texttemplating.vshost.providecodegeneratorextensionattribute.aspx)将生成器与文件扩展名相关联。
*   使用您的包和生成器创建 VSIX，并让您的用户安装它。

# javascript - 如何在 NodeJS 中拆分和修改字符串？

> ID：15134199
> 
> 赞同：54
> 
> 时间：2013-02-28T11:20:37.230
> 
> 标签：javascript, node.js

我有一个字符串：

```
var str = "123, 124, 234,252"; 
```

我想在拆分后解析每个项目并增加 1。所以我将拥有：

```
var arr = [124, 125, 235, 253 ]; 
```

我怎样才能在 NodeJS 中做到这一点？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-02-28T11:34:48.117

用途`split`及`map`作用：

```
var str = "123, 124, 234,252";
var arr = str.split(",");
arr = arr.map(function (val) { return +val + 1; }); 
```

注意`+val`- 字符串被转换为一个数字。

或更短：

```
var str = "123, 124, 234,252";
var arr = str.split(",").map(function (val) { return +val + 1; }); 
```

### 编辑 2015.07.29

今天我建议**不要**使用`+`运算符将​​变量转换为数字。相反，我会使用更明确但也更易读的`Number`调用：

```
var str = "123, 124, 234,252";
var arr = str.split(",").map(function (val) {
  return Number(val) + 1;
});
console.log(arr);
```

### 编辑 2017.03.09

ECMAScript 2015 引入了*箭头函数*，因此可以使用它来使代码更简洁：

```
var str = "123, 124, 234,252";
var arr = str.split(",").map(val => Number(val) + 1);
console.log(arr);
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T11:23:10.373

```
var str = "123, 124, 234,252";
var arr = str.split(",");
for(var i=0;i<arr.length;i++) {
    arr[i] = ++arr[i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T05:42:04.007

如果您正在使用 lodash 并且想要一个太可爱的自己的好单线：

```
_.map(_.words('123, 124, 234,252'), _.add.bind(1, 1)); 
```

由于 lodash 强大的解析能力，它出奇的健壮。

如果您想要一个也可以清除字符串中的非数字字符（并且更容易理解......而且不是那么可爱）：

```
_.chain('123, 124, 234,252, n301')
   .replace(/[^\d,]/g, '')
   .words()
   .map(_.partial(_.add, 1))
   .value(); 
```

*2017年编辑*：

我不再推荐我以前的解决方案。除了矫枉过正并且在没有第三方库的情况下已经很容易做到之外，它还使用了_.chain，它[有各种各样的问题](https://medium.com/making-internets/why-using-chain-is-a-mistake-9bc1f80d51ba)。这是我现在推荐的解决方案：

```
const str = '123, 124, 234,252';
const arr = str.split(',').map(n => parseInt(n, 10) + 1); 
```

我的旧答案仍然正确，所以我将它留作记录，但现在没有必要使用它。

# python-2.7 - 指南针不适用于 pyScss 1.1.5

> ID：15134201
> 
> 赞同：0
> 
> 时间：2013-02-28T11:20:41.370
> 
> 标签：python-2.7, sass, compass-sass

我使用 Python 2.7、pyScss 1.15 和 Compass 0.12.2，但 Compass 不起作用，有人可以建议如何让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:40:29.760

你不需要 pyScss 的指南针。只需运行“python pyScss -mscss”即可查看工作目录的更改并将 .scss（或 .sass）编译为 .css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T15:22:50.837

不确定这是否对任何人有帮助，但 pyScss 中宣传的“指南针”支持非常有限，为 Compass 编写的项目*不适*用于 pyScss。我无法找到更完整的 Compass 端口到 pyScss（或任何替代方案），因此解决方案是回到 Compass & Ruby。

从pyScss 文档中[引用：](http://pyscss.readthedocs.org/en/latest/syntax.html#compass-support)

> 支持 Compass 0.11 的任意横截面：
> 
> *   数学函数：sin、cos、tan、round、ceil、floor、pi、e
> *   图片：图片网址、图片宽度、图片高度...
> *   嵌入（内联）图像：inline-image

# iphone - iOS 旧代码版本在重新安装后仍保留在手机上

> ID：15134205
> 
> 赞同：1
> 
> 时间：2013-02-28T11:20:51.947
> 
> 标签：iphone, ios, xcode

我有一个奇怪的问题，即使我卸载了我正在开发的应用程序，代码仍保留在手机上。

我的手机上有这个应用程序的旧版本，并且正在修复代码中的一些错误。在 Xcode 中，当我在手机上运行它时，一切顺利，我得到了控制台输出，除了代码版本之外，其他所有版本都是以前的版本，而不是 Xcode 中的当前代码！

模拟器都运行完美，总是采用当前代码并安装它（在 5.0 和 6.1 模拟器中）。它只发生在我的 iPhone 4S 上。

我已经尝试了从添加 NSLog() 输出到完全删除文件内容的所有方法——iPhone 根本不在乎。一切都说加载，很棒，但它不是真的。

为什么会发生这种情况，我怎么能让它消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:23:55.460

卸载应用程序 > 重启你的 iPhone > 使用干净的构建安装新应用程序

# mysql - SQL 生日查询

> ID：15134206
> 
> 赞同：0
> 
> 时间：2013-02-28T11:20:55.560
> 
> 标签：mysql

嘿，我是 SQL 的初学者，但我正在尝试编写一个查询以提取所有记录，如果它在接下来的 7 天内有人生日，并查看了其他线程的答案，但我无法适应它们到我的设置。

```
 SELECT *
    FROM `QG04c`
    WHERE month( `dob` ) = month( now( ) )
    AND day( `dob` )
    BETWEEN day( now( ) )
    AND day( now( ) ) +7
    AND `Primary Unit?` =1 
```

目前，这会将所有生日在 7 天内的人都排除在外，但我认为它无法应对月末情景和年终等情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:31:17.330

假设这是 MySQL，您可以使用[DAYOFYEAR](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_dayofyear)函数来获取生日发生在一年中的哪一天。简单的场景是从 1 月 1 日到 12 月 25 日，其中提前 7 天是同一年。为此，您可以使用：

```
SELECT  *
FROM    `QG04c`
WHERE   DAYOFYEAR(DOB) - DAYOFYEAR(CURDATE()) BETWEEN 0 AND 7; 
```

但是，当今天在 12 月 25 日至 12 月 31 日之间时，您需要考虑生日在 1 月 1 日至 6 日之间。为此，您需要：

```
SELECT  *
FROM    `QG04c`
WHERE   DAYOFYEAR(CURDATE() + INTERVAL 7 DAY) < 7
AND     DAYOFYEAR(DOB) < DAYOFYEAR(CURDATE() + INTERVAL 7 DAY); 
```

那么这只是结合这两种情况的问题：

```
SELECT  *
FROM    `QG04c`
WHERE   DAYOFYEAR(DOB) - DAYOFYEAR(CURDATE()) BETWEEN 0 AND 7
OR  (   DAYOFYEAR(CURDATE() + INTERVAL 7 DAY) < 7
    AND DAYOFYEAR(DOB) < DAYOFYEAR(CURDATE() + INTERVAL 7 DAY)
    ); 
```

**[SQL Fiddle 上的示例](http://www.sqlfiddle.com/#!2/335d5/15)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:27:54.820

```
select * from tablename WHERE [ColumnName] BETWEEN DATEADD(DAY, +7, @YourDate) AND @YourDate and Primary Unit = 1 (If you have and condition put add here) 
```

谢谢 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:28:02.573

如果你不分解一天应该很容易？

```
WHERE `dob` BETWEEN now() AND now() +7 
```

# r - 如何使用 R 计算高阶统计中的四阶累积量？

> ID：15134214
> 
> 赞同：2
> 
> 时间：2013-02-28T11:21:08.717
> 
> 标签：r, statistics

谁能让我知道如何使用 R 中的滑动窗口计算四阶累积量。

样本数据如下：

```
-644691181
-121187080
353422690
417492115
-504192375
420646272
-47480551
260350503
2151074145
1251550732
788874753
540183268
396739715
948170766
-1433091907
-148444555
-840182654
-893652578
-1738734435
-1431476210
24974246
93873803
-324033231
479813749 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:28:58.440

不太确定，但我会尝试一下。`all.cumulants`包[**时刻**](http://cran.r-project.org/web/packages/moments/moments.pdf)有一个可用的功能。请在使用此示例之前阅读它。

```
require(moments)
all.cumulants(all.moments(x, order.max=4))
# [1] 0.000000e+00 0.000000e+00 7.663353e+17 3.842980e+25 8.177093e+34 
```

all.cumulants 将 n=0 到 k 的时刻作为输入。由于您需要四阶累积量，我怀疑您必须计算原始矩到四阶，然后计算`all.cumulants`. 这听起来对吗？如果没有，请发表评论，我将删除我的答案。

# objective-c - 用 Core Animation 替换子视图

> ID：15134219
> 
> 赞同：1
> 
> 时间：2013-02-28T11:21:26.160
> 
> 标签：objective-c, macos, cocoa, animation, core-animation

**Core Animation**中的动画代理工作得很好，但是如果您尝试为视图的框架设置动画，动画可能会变得不干净。帧率很差，这就是我的意思。我的动画视图有很多子视图，这就是动画变得更糟的原因。

我找到了有关如何使用**Core Animation**执行此操作的教程：
[http ://www.cimgf.com/2008/03/03/core-animation-tutorial-wizard-dialog-with-transitions/](http://www.cimgf.com/2008/03/03/core-animation-tutorial-wizard-dialog-with-transitions/)

但是，如果您运行示例代码，您会看到动画也有一个不透明动画，而且看起来很奇怪。所以我想制作一个自定义动画。

如果有人可以为我提供这个问题的解决方案，那就太好了。
或者给我一些适当的资源，我可以做一些研究。

我需要来自and的`ease-in-out`动画。**就像Sparrow** 中的 mail-tableview 一样。`bottom to top``top to bottom`

# openmp - 混合：集群上的 OpenMPI + OpenMP

> ID：15134222
> 
> 赞同：2
> 
> 时间：2013-02-28T11:21:32.783
> 
> 标签：openmp, openmpi, hybrid

我用数值求解一些常微分方程。

我有一个非常简单（概念上）但很长的计算。有一个很长的数组（~2M 单元），对于每个单元，我需要执行数值积分。此过程应重复 1000 次。通过使用 OpenMP 并行性和一台 24 核机器，这需要大约一周的时间（这是不可接受的）。

我有一个由 20 台此类（24 核）机器组成的集群，并考虑混合实现。我想使用 MPI 来传递这 20 个节点，并在每个节点上使用常规的 OpenMP 并行性。

基本上，我需要将我很长的数组拆分为 20(nodes)X24(proccs) 个工作单元。

有没有更好的实施或更好的想法的建议？我已经阅读了很多关于这个主题的内容并且我有印象，有时这种混合实现并不一定会带来真正的加速。

也许我应该创建一个“工人池”并用我的阵列或其他东西“喂养”他们。

欢迎任何建议和有用的链接！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:48:17.980

如果您的计算像您所指出的那样令人尴尬地并行，您应该期望通过将负载分散到所有 20 台机器上来获得良好的加速。`good`我的意思是`close to 20`，我的`close to 20`意思是你实际得到的任何数字，这让你认为努力是值得的。

您提出的混合解决方案当然是可行的，如果您实施它，您应该会获得很好的加速。

混合 MPI+OpenMP 程序的一种替代方案是作业脚本（用您最喜欢的脚本语言编写），它简单地将您的大型阵列分成 20 个部分并启动 20 个作业，每台机器上运行一个程序实例。当他们都完成后，准​​备另一个脚本来重新组合结果。这将完全避免编写任何 MPI 代码。

如果您的计算机安装了 Grid Engine，您可能可以编写一个作业提交脚本来将您的工作作为一个*阵列作业*提交，并让 Grid Engine 负责将工作分配给各个机器/任务。我希望其他工作管理系统也有类似的设施，但我不熟悉它们。

另一种选择是全 MPI 代码，即完全删除 OpenMP 并修改您的代码以使用它在运行时发现可用的任何处理器。同样，如果您的程序需要很少或不需要进程间通信，您应该获得良好的加速。

在共享内存计算机上使用 MPI 有时（在性能方面）比 OpenMP 更好，有时更差。麻烦的是，很难确定哪种方法更适合特定架构上的特定程序，包括 RAM 和缓存、互连和总线以及所有其他要考虑的变量。

我忽略的一个因素是程序的负载平衡，主要是因为您没有提供要考虑的数据。如果您将非常大的数据集分成 20 个相同大小的部分，您最终会得到 20 个相同持续时间的作业吗？如果不是这样，并且如果您知道工作时间如何随投入而变化，那么您可能会做一些更复杂的事情来拆分工作，而不是简单地将您的工作分成这 20 个相等的部分。例如，您可以将其切成 2000 等份，然后一次将它们送至机器执行。在这种情况下，您在负载平衡中获得的收益可能会因作业管理的时间成本而丢失。你付你的钱，你做出选择。

从您的问题陈述中，我不会根据预期的性能来决定采用哪种解决方案，因为我希望任何方法在性能方面都能达到相同的水平，但要及时开发一个可行的解决方案。

# mysql - Mysql 查询成 CSV 和一个字段拆分

> ID：15134226
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:21:51.820
> 
> 标签：mysql, csv, split

我有这段代码，但它有问题：

```
SELECT email, realname INTO OUTFILE "c:/mydata.csv"
SUBSTRING_INDEX(SUBSTRING_INDEX(realname, ' ', 1), ' ', -1) as firstname,
SUBSTRING_INDEX(SUBSTRING_INDEX(realname, ' ', 2), ' ', -1) as lastname,
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY "\n"
FROM mytable; 
```

我只选择电子邮件和实名字段，并在遇到空格时将实名拆分为 2 个字段！

错误：

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SUBSTRING_INDEX(SUBSTRING_INDEX(realname, ' ', 1), ' ', -1) as firstname, SUBST' at line 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:58:06.780

`INTO OUTFILE`必须在最后。

```
SELECT email, realname 
SUBSTRING_INDEX(SUBSTRING_INDEX(realname, ' ', 1), ' ', -1) as firstname,
SUBSTRING_INDEX(SUBSTRING_INDEX(realname, ' ', 2), ' ', -1) as lastname,
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY "\n"
FROM mytable
INTO OUTFILE "c:/mydata.csv"; 
```

[见手动输入。](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# arrays - 两个数组之间的最小变化

> ID：15134230
> 
> 赞同：9
> 
> 时间：2013-02-28T11:21:58.767
> 
> 标签：arrays, algorithm, diff

我试图在更新表格数据时仅应用最少数量的更改（它是一个 iOS 应用程序，表格视图`UITableView`当然是，但我认为这与这里无关）。这些更改包括添加新项目、删除旧项目以及**将一些现有项目移动到不同位置而不更新其内容**。我知道关于 SO 也有类似的问题，但其中大多数只考虑添加和删除，现有问题要么被忽略，要么只是重新加载。

大多数移动涉及不超过几个现有元素，表格最多可以有 500 个元素。

数组中的项目是唯一的。

通过从旧数组中的项集中减去新数组中的项集，我可以轻松地获得添加的项。而相反的操作将产生一组已删除的项目。

所以问题归结为找到具有相同元素的两个数组之间的最小差异。

```
[one, two, three, four]
[one, three, four, two] 
```

区分这些数组应该只是从索引 1 移动到 3。

该算法不知道是否只有一个这样的举动。改变也可以是：

```
[one, two, three, four, five]
[one, four, five, three, two] 
```

这应该导致将索引 1 移动到 4 和 2 到 3，而不是将 3 和 4 两个索引向左移动，因为这可能会导致移动 300 个项目，而实际上更改应该要简单得多。**就将视觉变化应用于视图而言，就是这样。**这可能需要重新计算单元高度或执行大量动画和其他相关操作。我想避开他们。举个例子 - 将一个项目标记为收藏，这会导致将该项目移动到列表顶部或 300 个项目大约需要 400 毫秒。那是因为使用我目前使用的算法，例如 100 个项目向上移动一个索引，一个移动到索引 0，其他 199 个保持不变。如果我取消标记它，一个项目会向下移动 100 个索引，这很好，但这是完美的，但非常罕见的案例。

我尝试在旧数组中查找项目的索引，检查它是否在新数组中更改。如果有变化，我将项目从新索引移动到旧索引，记录相反的变化并比较数组，直到元素顺序相等。但这有时会导致移动实际上未更改的大量项目，具体取决于这些项目的位置。

## 所以问题是：我能做什么？

任何想法或指示？也许是修改后的 Levenshtein 距离算法？未修改的可以为此工作吗？如果是这样，我可能不得不以一种或另一种形式实现它。

* * *

橡皮鸭说：

考虑找到所有未更改的项目序列并移动所有其他项目。这可能是正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:35:34.667

我有一个想法，不知道它是否可行.. 只是我的两分钱。如果您要在数组项上实现类似于最长公共子序列的算法，怎么样。

这个想法是找到保持初始序列的大数据“子字符串”，最大的在前。一旦你覆盖了“长序列”中项目的某个阈值百分比，就应用一个更简单的算法来解决剩余的问题。

对不起，有点含糊，这只是一个建议。希望你能解决你的问题。

# javascript - JQuery 灯箱 Draggable Image inside

> ID：15134232
> 
> 赞同：1
> 
> 时间：2013-02-28T11:22:00.127
> 
> 标签：javascript, jquery, css, html

我正在尝试执行一些操作，即在灯箱之类的东西中查看大图像，但分辨率很高，比如说 1200x1600 或更大，我的想法是查看绝对宽度和高度为 800x600 的灯箱，并且图像将是可拖动的/Moveable inside 我认为这是可能的，但是有没有现成的 Jquery 插件可以解决这个问题？或者，如果我要制作自己的自定义灯箱，您能否给我一个关于如何使其可在 Div 内拖动的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:04:55.650

一个小脚本将执行此操作。请阅读[这篇文章](https://stackoverflow.com/q/4016004/630321)。我创建了一个小[小提琴](http://jsfiddle.net/dtmdY/)来尝试这个，它工作得很好。它可以很容易地包含在您的自定义灯箱中。以下是稍加修改的原始代码

```
<script type='text/javascript' src="scripts/jquery-1.9.1.js"></script>
<script type="text/javascript" src="scripts/jquery-ui.js"></script>

<script type="text/javascript">

    $(document).ready(function() {

        $("img").draggable({ containment: [-500, -422, 0, 0], scroll: false });

    });

</script>

<style type="text/css">
    div {
        width:500px; 
        height:423px; 
        position:relative; 
        overflow:hidden;
    }
</style> 
```

HTML 是：

```
<div>
        <img src="http://megapack.ca/wp-content/uploads/2012/06/High-Resolution-Wallpapers-2.jpg" width="1000" height="845" alt="Map" />
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:46:45.880

试试 JQ Zoom，正如我在评论中提到的[http://www.mind-projects.it/projects/jqzoom/](http://www.mind-projects.it/projects/jqzoom/)

如果 JQZoom 不符合您的需求，您也可以查看更多插件

[http://www.tripwiremagazine.com/2012/12/jquery-image-zoom.html](http://www.tripwiremagazine.com/2012/12/jquery-image-zoom.html)

# html - 单个页面上有多个 Google+ 分享按钮

> ID：15134235
> 
> 赞同：1
> 
> 时间：2013-02-28T11:22:10.203
> 
> 标签：html, google-plus, sharing

我想要一个有两个不同按钮的网站，用于在 google+ 上共享。这两个必须有不同的摘要文本。我已经设置了这样的元描述：

```
<meta property="og:title" content="TITLE">
<meta property="og:description" content="CONTENT">
<meta property="og:image" content="IMAGE_URL">
<meta property="og:url" content="URL"> 
```

但是通过这样的设置，两个按钮共享相同的文本、图像等。有没有办法在共享链接中更改这些设置？ *我不想要 +1 按钮。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:08:02.043

您可以在同一页面上有多个共享按钮。共享按钮不必出现在您正在共享的页面上。[`data-href`如果您使用属性](https://developers.google.com/+/web/share/#script-parameters)（HTML5 模式）或`href`（<g:plus /> 模式），共享按钮可以单独拥有不同的 URL 。

您要做的是指向不同的 URL，这些 URL 可以为给定的上下文提供适当的[代码段数据](https://developers.google.com/+/web/snippet/)。如果您使用的是服务器端语言，例如 PHP，这很容易，您可以拥有`myfile.php?page=page1`然后`myfile.php?page=page2`为这两种情况自定义输出。如果您有没有服务器端控制的静态内容，您可能必须使用两个单独的页面。如果您需要访问者最终访问相同的目标页面，您可以使用重定向将他们推送到正确的页面，当他们点击链接时。

也就是说，您可能需要[查看 Google+ 开发者政策](https://developers.google.com/+/policies)，以确保您尝试执行的操作是允许的并且不会误导用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:27:11.790

**在要显示 google 分享按钮的地方添加下面的 div**

```
<g:plus action="share" href="Your Url" annotation="none"></g:plus> 
```

**添加此脚本**

```
<script type="text/javascript">
    function pageLoad() {
        window.___gcfg = {
            lang: 'en-US'
        };

        (function () {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })(); 
```

此代码也将在转发器中使用完整。

# macos - 在 kext 上使用 libpcap.dylib

> ID：15134241
> 
> 赞同：0
> 
> 时间：2013-02-28T11:22:20.903
> 
> 标签：macos, pcap, kernel-extension

我正在为 OS X 编写一个 kext 驱动程序，并且想使用库中的函数`libpcap.dylib`。Libpcap.dylib 位于 OS X 上的 /usr/lib 中。它可以从内核空间使用吗？如何使用 Xcode 从 kext 中使用 libpcap.dylib？

我设法编译——（-lpcap 作为链接选项出现）但是：

*   链接器发出警告`"unexpected dylib"`。很明显，它以某种方式放错了位置。
*   kextload 无法解析 libpcap 依赖项。
*   kextlibs 仅显示我通过 OsBundleLibraries 包含的库，表明我的 dylib 被忽略。

我知道类似的问题[Linking Dylibs in Kexts?](https://stackoverflow.com/questions/4189397/linking-dylibs-in-kexts) 但想知道是否有人在 kext 上使用过 libpcap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:31:25.800

正如在Kexts 中[链接 Dylibs 中所述？](https://stackoverflow.com/questions/4189397/linking-dylibs-in-kexts)，无法通过内核扩展将 dylib 加载到内核中。

您没有提及您要实现的目标是什么，因此很难知道哪些替代方案与您相关。我建议阅读 [Network Kernel Extensions][1]，看看是否可以使用其中一种技术来代替 pcap。或者，您可以使用用户空间程序中的 pcap 并通过内核扩展与它进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:30:21.053

WinPcap 具有用户态组件和内核模式组件，因为 Windows 内核不提供必要的内核模式组件。

在 UN*X 系统上——例如，在 OS X 上——内核模式组件是操作系统的一部分，而 libpcap 只包含用户模式代码。

在 *BSD 和 OS X 中，WinPcap 的内核模式代码的等价物是 BPF，您将无法从 kext 中使用它。此外，BPF 没有等同于 send-queue 的东西来同步传输数据包——你可以发送数据包，但这只是立即将数据包注入网络堆栈——所以既不使用你的 kext 中的 libpcap，也不使用来自你的原始 BPF您的 kext 将帮助您满足您的时间需求。

# crm - 如何在opentaps中同时删除多个活动？

> ID：15134244
> 
> 赞同：0
> 
> 时间：2013-02-28T11:22:26.270
> 
> 标签：crm, ofbiz

我试图在 opentaps 中同时删除多个活动，所以我将 ListPendingActivities 表单更改为多表单并添加了复选框。但是，当我提交/删除（或尝试）表单时，我收到了缺少 workEffortId 的错误消息。我的印象是每个选定的行都会调用该服务，并假设每行中的所有值都传递给该服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:17:53.747

我的错。我已将从“每行”删除按钮调用的服务复制到表单的目标中，而不是调用调用该服务的请求。

# apache - Htaccess / Mod重写，当IP与我的不同时重定向到登录页面

> ID：15134245
> 
> 赞同：0
> 
> 时间：2013-02-28T11:22:27.497
> 
> 标签：apache, .htaccess, mod-rewrite

当 IP 与我的 IP 不同且用户尚未在 /landing 上且请求不是 /landing 的图片时，我想将所有请求重定向到 /landing。

我试过了，但没有运气，我不知道为什么：

```
Options +FollowSymlinks
RewriteEngine On

# LANDING PAGE FOR IP DIFFERENT THAN MINE
RewriteCond %{REMOTE_ADDR} !=22.22.22.22
RewriteCond %{REQUEST_URI} !=/landing/index.php
RewriteCond %{REQUEST_URI} !=/landing/^.*\.(gif|jpe?g|png)$
RewriteRule .* /landing/index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:01:07.080

尝试这个

```
RewriteCond %{REMOTE_ADDR} ^(22\.22\.22\.22)$
RewriteRule ^/* http://www.domain.com/landing/index.php [L] 
```

查看此[链接](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)了解详细信息（阻止特定 IP 地址部分）

您可以通过添加感叹号来否定条件

```
RewriteCond %{REMOTE_ADDR} !^22\.22\.22\.22$ 
```

如果它仍然不起作用，请尝试在对重写进行故障排除时打开日志记录。（第 9 级将为您提供最详细的日志记录）

```
RewriteEngine On 
RewriteLog /tmp/log.txt
RewriteLogLevel 9 
```

这将记录 Apache 在通过 mod_rewrite 搅动您的请求时所采取的每一步。

# php - 在PHP中将二进制转换为PNG？

> ID：15134246
> 
> 赞同：0
> 
> 时间：2013-02-28T11:22:30.967
> 
> 标签：php, image, feed

我从提要接收文件，它是二进制格式。

此代码将在屏幕上显示图像

```
header("Content-type: image/png");
print $image; 
```

但是，我尝试了许多不同的方法来保存 .png，例如 imagepng() 但似乎没有任何效果

二进制提要的开始很长，但开始是......

```
‰PNG  IHDR,,ö"€IDATxÚì½w”×uîÉ²¯,K²_²×{Ë^~ÿ½ûîµ˜)‹T°¨kI¤ˆ<9çäLd$E*X™ T@™ÈÌ`òôL§ÊÕÕ©r>oŸsº{¢|%‚âëZß*zª{zºëWßÞ'ì3U¶ÊVÙ®ë6§òT¶ÊV°²U¶ „•­²U¶ „•­²U ¬l•­²U ¬l•­ae«l•­á»nÿ@U¶ÊVð¹Ù[ÂÊVðOŽYÙÍ÷ý ¸W ß¾*—Te«@ø{¨Þd+'°´áÿéòÃ€Ê|Ð› 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:25:03.073

用于`imagecreatefromstring()`获取图像资源，然后您可以使用`imagepng()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:25:11.507

假设浏览器在第一个示例中显示图像，只需将其调整为文件下载：

```
<?php
  header('Content-Description: File Transfer');
  header('Content-Type: image/png');
  header('Content-Disposition: attachment; filename=Image.png');
  header('Content-Transfer-Encoding: binary');
  header('Expires: 0');
  header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
  header('Pragma: public');
  header('Content-Length: ' . strlen($image));
  ob_clean();  // Just in case you have output buffers enabled
  flush();
  print $image; 
```

# java - 在 android 应用程序中读取一个 10mb 的大文本文件

> ID：15134248
> 
> 赞同：1
> 
> 时间：2013-02-28T11:22:48.050
> 
> 标签：java, android, split, compression, text-files

我正在开发一个从文本文件中读取单词的字典应用程序，但文本文件的大小为 10mb，因此由于内存限制，我无法在模拟器或设备上运行它。

那么这个问题的解决方案是什么？我可以在压缩时从 zip 中读取文本文件，还是将其拆分为 10 个单独的文本文件，每个文件 1mb 更好？

以下是当前读取文本文件的代码，我需要对代码进行哪些更改？

```
private synchronized void loadWords(Resources resources) throws IOException {
        if (mLoaded) return;

        Log.d("dict", "loading words");
        InputStream inputStream = resources.openRawResource(R.raw.definitions);
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

        try {
            String line;
            while((line = reader.readLine()) != null) {
                String[] strings = TextUtils.split(line, ":");
                if (strings.length < 2) continue;
                addWord(strings[0].trim(), strings[1].trim());
            }
        } finally {
            reader.close();
        }
        mLoaded = true;
    }

public synchronized List<Word> getAllMatches(Resources resources) throws IOException {
        List<Word> list = new ArrayList<Word>();
        InputStream inputStream = resources.openRawResource(R.raw.definitions);
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

        try {
            String line;
            while((line = reader.readLine()) != null) {
                String[] strings = TextUtils.split(line, ":");
                if (strings.length < 2) continue;
                Word word = new Word(strings[0].trim(), strings[1].trim());
                list.add(word);
            }
        } finally {
            reader.close();
        }

        return list;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:57:56.923

可以使用**gzip**单个文件压缩（“big-text.txt.gz”），并使用 GZipInputStream。

相同的字符串应该在内存中保存一次。需要时，在传递字符串之前，您可以搜索它：

```
Map<String, String> sharedStrings = new HashMap<>();

String share(String s) {
    String sToo = sharedStrings.get(s);
    if (sToo == null) {
        sToo = s;
        sharedStrings.put(s, s);
    }
    return sToo;
} 
```

*使用数据库的建议也是一个很好的建议。*

# android - 为我的格式解析 android 中的 json webservices

> ID：15134253
> 
> 赞同：-4
> 
> 时间：2013-02-28T11:22:54.790
> 
> 标签：android, json

我正在开发一个简单的登录应用程序。我的 JSON Web 服务返回用户名。这是 JSON 代码的格式：

```
[{"demologin":{"username":"demoname","id":100}}] 
```

这是我的代码：

```
private class LongRunningGetIO extends AsyncTask <Void, Void, String> {

    protected String getASCIIContentFromEntity(HttpEntity entity) throws IllegalStateException, IOException {
       InputStream in = entity.getContent();
         StringBuffer out = new StringBuffer();
         int n = 1;
         while (n>0) {
             byte[] b = new byte[4096];
             n =  in.read(b);
             if (n>0) out.append(new String(b, 0, n));
         }
         return out.toString();
    }

    protected String doInBackground(Void... params) {
         HttpClient httpClient = new DefaultHttpClient();
         HttpContext localContext = new BasicHttpContext();

         username=txtUserName.getText().toString();
         password=txtPassword.getText().toString();

         String url="MY URL HERE";
         HttpGet httpGet = new HttpGet(url);

         String text = null;
         String result = null;
         String webusername=null;
         int webuserid;
         ArrayList<String> desc=new ArrayList<String>();

         try {

               HttpResponse response = httpClient.execute(httpGet, localContext);
               HttpEntity entity = response.getEntity();
               text = getASCIIContentFromEntity(entity);

                   JSONArray ja = new JSONArray(text) ;
                   // ITERATE THROUGH AND RETRIEVE CLUB FIELDS
                                int n = ja.length();
                                for (int i = 0; i < n; i++) {
                                    // GET INDIVIDUAL JSON OBJECT FROM JSON ARRAY
                                 JSONObject jo = ja.getJSONObject(i);

                                 webusername= jo.getString("demologin");
                                 webuserid= jo.getInt("id");

                                }
         } catch (Exception e) {

                   e.getLocalizedMessage();
                   }    
         return webusername; 
    }   
    protected void onPostExecute(String results) {
        if (results!=null) {

            String sendusername=results;
            Intent inte=new Intent(Login.this,FrontPage.class);
            inte.putExtra("displayusername", sendusername);
            startActivity(inte);

        }
        else
            Toast.makeText(getApplicationContext(), "Invalid user", Toast.LENGTH_LONG).show();

        }
} 
```

这里的问题是我不知道如何将用户名转换为字符串并通过网络传递。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:29:16.567

我认为这篇文章会对您有所帮助，这里的字符串操作是在从 wsdl 返回的字符串上完成的，您可以使用相同的字符串拆分函数来拆分您的结果 [处理由 Web 服务返回的数组](http://amalan008.blog.com/2013/02/07/how-to-process-an-array-returned-by-a-wsdl-android/)

# android - Android - 如何使用 Android 资产打包工具？

> ID：15134258
> 
> 赞同：4
> 
> 时间：2013-02-28T11:23:10.157
> 
> 标签：android, aapt

我想在编译我的 android 应用程序时`aapt.exe`停止压缩我的文件。`database.db`我运行终端（Mac OS）并输入：

```
aapt -0 db 
```

它抛出错误：

```
ERROR: Unknown command '-0'
Android Asset Packaging Tool 
```

我正在使用 android sdk v20.0.1。我犯了什么错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-29T16:02:54.853

## AFAIK：

*   此工具允许您查看、创建和更新与 Zip 兼容的档案（zip、jar、apk）。它还可以将资源编译成二进制资产。

*   aapt 即Android Asset Packaging Tool 在SDK tools/ 工具目录下可以查看、创建、更新ZIP 格式的文件附件（zip、jar、apk）。资源文件也可以编译成二进制文件。

*   虽然您可能不会经常直接使用 aapt，但构建脚本和 IDE 插件可以利用此工具打包构成 Android 应用程序的 apk 文件。

*   尽管你可能不直接使用 aapt 工具，但是构建脚本和 IDE 插件会使用这个工具打包的 apk 文件构成一个 Android 应用程序。

## 供参考：

*   **Linux 或 Mac OS X：**

    *   打开终端，进入工具/目录，
    *   运行命令。/ 适应症
*   **视窗：**

    *   打开命令提示符并转到工具/目录，
    *   执行命令 aapt.exe

## aapt 命令：

*   点击[这里](http://z987987.blogspot.in/2011/12/aapt-android-asset-packaging-tool.html)学习 aapt 命令

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-21T19:42:51.140

> **aapt 是一个通用的 Android 资产打包工具，可用作：**

**"aapt list" -**列出 ZIP、JAR 或 APK 文件的内容。
**“aapt dump” -**从 APK 文件中转储特定信息。
**"aapt package" -**打包 Android 资源。
**"aapt remove" -**从 ZIP、JAR 或 APK 文件中删除文件。
**"aapt add" -**将文件添加到 ZIP、JAR 或 APK 文件中。
**"aapt crunch" - 处理**PNG 文件。

# java - java itext捕获空异常pdf文本提取

> ID：15134264
> 
> 赞同：0
> 
> 时间：2013-02-28T11:23:30.467
> 
> 标签：java, nullpointerexception, try-catch, itext

使用以下代码使用 itext 5.3.4 提取文本表单 pdf 时：

```
try {
    reader = new PdfReader(thepdffilename);
} catch (IOException e) {
    openok=false;
}

if (openok==true){
    int numberOfPages = reader.getNumberOfPages();
    PdfReaderContentParser parser = new PdfReaderContentParser(reader);
    for (int page = 1; page <= numberOfPages; page++){
        try {
              SimpleTextExtractionStrategy strategy = parser.processContent(page, new SimpleTextExtractionStrategy());              
            content = content + strategy.getResultantText();
        } catch (Throwable t) { 
            crap=true;
            break;
        }
    }
    reader.close();
} 
```

然而，有时 GooglePlay 崩溃和 ANR 报告 itext 中存在 NP 异常。

```
java.lang.NullPointerException in com.itextpdf.text.pdf.PdfReader$PageRefs.readPages at 
com.itextpdf.text.pdf.PdfReader$PageRefs.readPages(PdfReader.java:3382) at 
com.itextpdf.text.pdf.PdfReader$PageRefs.<init>(PdfReader.java:3350) at com.itextpdf.text.pdf.PdfReader$PageRefs.<init>(PdfReader.java:3328) at 
com.itextpdf.text.pdf.PdfReader.readPages(PdfReader.java:1003) at com.itextpdf.text.pdf.PdfReader.readPdf(PdfReader.java:530) at 
com.itextpdf.text.pdf.PdfReader.<init>(PdfReader.java:170) at 
com.itextpdf.text.pdf.PdfReader.<init>(PdfReader.java:159) 
```

第 3382 行的 5.3.4 源代码为：

[http://grepcode.com/file/repo1.maven.org/maven2/com.itextpdf/itextpdf/5.3.4/com/itextpdf/text/pdf/PdfReader.java?av=f](http://grepcode.com/file/repo1.maven.org/maven2/com.itextpdf/itextpdf/5.3.4/com/itextpdf/text/pdf/PdfReader.java?av=f)

```
3374    void  readPages() throws IOException {
3375      if (refsn != null)
3376           return;
3377        refsp = null;
3378            refsn = new ArrayList<PRIndirectReference>();
3379            pageInh = new ArrayList<PdfDictionary>();
3380            iteratePages((PRIndirectReference)reader.catalog.get(PdfName.PAGES));
3381            pageInh = null;
3382            reader.rootPages.put(PdfName.COUNT, new PdfNumber(refsn.size()));
3383        }
3384
3385    void  reReadPages() throws IOException {
3386            refsn = null;
3387            readPages();
3388    } 
```

因此，当某些 pdf 文件提取其文本时出现问题，并且可能永远不会对可能发生这种情况的原因进行排序，因为我没有相关的 pdf。

我需要的是一种捕获 NP 异常的方法，这样我的应用程序就不会崩溃。

我试过了

```
} catch (Exception e) { 
```

并作为最后的手段尝试捕获任何异常

```
} catch (Throwable t) { 
```

有谁知道如何捕获这个特定的 itext 错误？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:57:40.363

如果我对您的理解正确，您已经通过文档页面在循环中尝试捕获该 NPE：

```
for (int page = 1; page <= numberOfPages; page++){
    try {
        SimpleTextExtractionStrategy strategy =
            parser.processContent(page, new SimpleTextExtractionStrategy());              
        content = content + strategy.getResultantText();
    } catch (Throwable t) { 
        crap=true;
        break;
    }
} 
```

但是，如果您仔细查看您的异常...

```
java.lang.NullPointerException in com.itextpdf.text.pdf.PdfReader$PageRefs.readPages at 
com.itextpdf.text.pdf.PdfReader$PageRefs.readPages(PdfReader.java:3382) at 
[...]
com.itextpdf.text.pdf.PdfReader.<init>(PdfReader.java:159) 
```

您会看到异常已经发生在 PdfReader 构造 ( `PdfReader.<init>`) 中。因此，您必须在构建 PdfReader 的地方已经捕获 NPE：

```
try {
    reader = new PdfReader(thepdffilename);
} catch (IOException e) {
    openok=false;
} catch (NullPointerException npe) { // !!
    openok=false;                    // !!
} 
```

或者如果你不想冒险

```
try {
    reader = new PdfReader(thepdffilename);
} catch (Throwable t) {              // !!
    openok=false;
} 
```

如果您也有其他代码位置，其中`PdfReader`构建了 a，您可能也希望强化它们。

@BrunoLowagie 这个 NPE 最好转换为标记的异常，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:30:32.893

这很难看，但如果你真的想抓住它，试着抓住 RuntimeException

# c# - 在 Global.asax 中检索会话

> ID：15134265
> 
> 赞同：1
> 
> 时间：2013-02-28T11:23:33.957
> 
> 标签：c#, asp.net, session

这是我得到的错误“会话状态在此上下文中不可用。”

只是一个业余程序员，我如何在 Global.asax 中检索 Session

这是我在 Global.asax 中的代码

```
public class Global : System.Web.HttpApplication
{
    protected void FormsAuthentication_OnAuthenticate(Object sender, FormsAuthenticationEventArgs e)
    {
        if (FormsAuthentication.CookiesSupported == true)
        {
            if (Request.Cookies[FormsAuthentication.FormsCookieName] != null)
            {
                try
                {            
                    string Email = FormsAuthentication.Decrypt(Request.Cookies[FormsAuthentication.FormsCookieName].Value).Name;
                    string Roles = LoginVerification.GetUserRoles(Email);
                    string DisplayName = (string)Session["DisplayName"];
                    e.User = new System.Security.Principal.GenericPrincipal(
                    new System.Security.Principal.GenericIdentity(DisplayName, "Forms"), Roles.Split(';'));
                }
                catch (Exception)
                {

                }
            }
        }
    }

    protected void Application_Start(object sender, EventArgs e)
    {

    }

    protected void Session_Start(object sender, EventArgs e)
    {

    }

    protected void Application_BeginRequest(object sender, EventArgs e)
    {

    }

    protected void Application_AuthenticateRequest(object sender, EventArgs e)
    {

    }

    protected void Application_Error(object sender, EventArgs e)
    {

    }

    protected void Session_End(object sender, EventArgs e)
    {

    }

    protected void Application_End(object sender, EventArgs e)
    {

    }
} 
```

提前感谢您回答我的问题！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:05:17.437

我猜这段代码应该在 AcquireRequestState 事件处理程序中，而不是 AuthenticateRequest 事件处理程序中。

会话应该在这个阶段可用

见[https://stackoverflow.com/a/9501213/1236044](https://stackoverflow.com/a/9501213/1236044)

# java - 流控制异常

> ID：15134271
> 
> 赞同：2
> 
> 时间：2013-02-28T11:23:55.007
> 
> 标签：java, exception, runtime

当我运行以下代码时，有两个结果。

```
 package scjp;

    public class ExceptionTest {

        public static void main(String[] args) {
            ExceptionTest test = new ExceptionTest();
            test.method1();
        }

        public void method1() {
            try {
                System.out.println("Try Block");

                if (!true) {
                    return;
                } else {
                    throw new RuntimeException();
                }
            }finally {
                System.out.println("Finally Block");
            }
        }
    } 
```

一个结果是

```
Try Block
Exception in thread "main" java.lang.RuntimeException
    at scjp.ExceptionTest.method1(ExceptionTest.java:17)
    at scjp.ExceptionTest.main(ExceptionTest.java:7)
Finally Block 
```

和另一个，

```
Try Block
Finally Block
Exception in thread "main" java.lang.RuntimeException
    at scjp.ExceptionTest.method1(ExceptionTest.java:17)
    at scjp.ExceptionTest.main(ExceptionTest.java:7) 
```

每次我运行上述代码时，答案都会发生变化。据我了解，它应该始终是相同的结果。你能帮我什么吗？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:28:42.323

系统错误输出流（上面的堆栈跟踪，可能在您的控制台中以红色显示）与系统输出流（您的`System.out.println()`语句）不同。因此，错误消息可能与正常的控制台输出不同步，因为两个流都写入控制台，但彼此独立。区别如下：

```
System.out.println("Some text"); 
```

打印到输出流

```
System.err.println("Error occurred!"); 
```

打印到错误流

输出到同一个控制台时，两者可能会混合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:31:59.003

异常堆栈跟踪未打印在相同的输出流上（它打印在 System.err 上）并且 System.err 和 System.out 不同步。

要始终获得相同的输出，您可以在 System.err 而不是 System.out 上打印消息。

# ruby-on-rails - 创建新项目时Ruby on rails openssl错误

> ID：15134282
> 
> 赞同：0
> 
> 时间：2013-02-28T11:24:27.767
> 
> 标签：ruby-on-rails, ruby, rubygems

我是 Ruby 的新手，我一直在通过 lynda.com ruby​​ on rails 基本程序。

我正在使用带有 ruby​​ 2.0 和 rails 3.2.12 的 windows7

但是，在创建 ruby​​ 项目时，我收到此错误。

```
 run  bundle install
E:/Ruby200/lib/ruby/2.0.0/net/http.rb:917:in `connect': SSL_connect returned=1 e
rrno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL
::SSL::SSLError)
        from E:/Ruby200/lib/ruby/2.0.0/net/http.rb:917:in `block in connect'
        from E:/Ruby200/lib/ruby/2.0.0/timeout.rb:51:in `timeout'
        from E:/Ruby200/lib/ruby/2.0.0/net/http.rb:917:in `connect'
        from E:/Ruby200/lib/ruby/2.0.0/net/http.rb:861:in `do_start'
        from E:/Ruby200/lib/ruby/2.0.0/net/http.rb:856:in `start'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendo
r/net/http/persistent.rb:628:in `start'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendo
r/net/http/persistent.rb:570:in `connection_for'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendo
r/net/http/persistent.rb:930:in `request'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/fetch
er.rb:195:in `fetch'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/fetch
er.rb:169:in `use_api'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:223:in `block in remote_specs'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:223:in `select'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:223:in `remote_specs'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:162:in `fetch_specs'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:66:in `specs'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:192:in `block (2 levels) in index'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:189:in `each'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:189:in `block in index'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/index
.rb:9:in `build'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:185:in `index'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:179:in `resolve'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:114:in `specs'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:109:in `resolve_remotely!'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/insta
ller.rb:83:in `run'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/insta
ller.rb:14:in `install'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/cli.r
b:247:in `install'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendo
r/thor/task.rb:27:in `run'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendo
r/thor/invocation.rb:120:in `invoke_task'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendo
r/thor.rb:344:in `dispatch'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendo
r/thor/base.rb:434:in `start'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/bin/bundle:20:in
`block in <main>'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/frien
dly_errors.rb:4:in `with_friendly_errors'
        from E:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/bin/bundle:20:in
`<main>'
        Unfortunately, a fatal error has occurred. Please see the Bundler
        troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
```

有谁可以帮我离开这里吗。我想学习 Rails，但我不知道这是什么或如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:39:24.517

此处描述的此错误：http: [//amitkazmirsky.com/2013/01/03/installing-rails-with-mysql-on-windows-8](http://amitkazmirsky.com/2013/01/03/installing-rails-with-mysql-on-windows-8) 实际上存在具有不同解决方案的证书问题，试试这个：

修复 SSL 问题

“OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed”</p>

1.  下载[http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)到“C:\RailsInstaller\”</p>

2.  按WindowsKey+'x'然后'y'（系统），选择左侧的“高级系统设置”。

3.  您在高级选项卡中。按底部的“环境变量”按钮。

4.  在“系统变量”部分，添加一个新的变量名称“SSL_CERT_FILE”，值“C:\RailsInstaller\cacert.pem”</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:31:45.870

如果您查看 Rails 生成的 Gemfile，您会看到它通过 SSL 连接到 ruby​​gems。

`source 'https://rubygems.org'`

只需将此行更改为

`source 'http://rubygems.org'`

从长远来看，这对于部署系统来说不是一个好主意，但它可以让您在问题得到解决的同时启动并运行。

# ninject - ServiceStack - 使用 Ninject 代替 Funq

> ID：15134286
> 
> 赞同：1
> 
> 时间：2013-02-28T11:24:39.303
> 
> 标签：ninject, servicestack

我正在尝试将 ServiceStack 与 Ninject 而不是 Funq 一起使用。我有以下内容：

```
public interface IContainerAdapter
{
    T Resolve<T>();
    T TryResolve<T>();
}

public class NinjectIocAdapter : IContainerAdapter
{
    private readonly IKernel kernel;

    public NinjectIocAdapter(IKernel kernel)
    {
        this.kernel = kernel;
    }

    public T Resolve<T>()
    {
        return this.kernel.Get<T>();
    }

    public T TryResolve<T>()
    {
        return this.kernel.TryGet<T>();
    }
} 
```

然后在我的配置方法中：

```
public override void Configure(Funq.Container container)
{
    //Set JSON web services to return idiomatic JSON camelCase properties
    ServiceStack.Text.JsConfig.EmitCamelCaseNames = true;

    IKernel kernel = new StandardKernel();
    container.Adapter = new NinjectIocAdapter(kernel);

    //Set MVC to use the same Funq IOC as ServiceStack
    //ControllerBuilder.Current.SetControllerFactory(new FunqControllerFactory(container));
} 
```

但我收到以下错误：

`Cannot implicitly convert type 'NinjectIocAdapter' to 'ServiceStack.Configuration.IContainerAdapter'.`

我也不确定是否必须取消注释将 MVC 设置为使用 Funq IoC 的行？我已将其注释掉，因为我将使用 Ninject。那是对的吗？

我假设一旦这一切正常。我可以简单地在里面注册任何依赖项：

```
private static void RegisterServices(IKernel kernel)
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:27:45.527

该代码与[文档](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)完全匹配，但有一个细微差别。

你必须使用`ServiceStack.Configuration.IContainerAdapter`而不是你自己的`IContainerAdapter` .

删除你的实现，添加一个引用`ServiceStack.Configuration`，你应该没问题。

# symfony - Symfony2 的 parameters.ini 上的秘密用法

> ID：15134289
> 
> 赞同：6
> 
> 时间：2013-02-28T11:24:54.353
> 
> 标签：symfony, security, captcha

我目前正在使用 Symfony2 进行企业项目。

我们的项目有一些不同的形式用于联系客户与他们在不同领域的供应商，我们需要保护他们免受垃圾邮件的侵害。

`7f820ab290c78aacb2...`我（我们）听说 parameters.ini 中设置的秘密字母数字代码可以完成这项工作（这个看起来像对他们必须输入的字符感到愤怒。

所以问题是，SECRET 代码是否真的可以保护表单免受垃圾邮件发送者的侵害？

如果没有，任何人都知道在不使用 Captcha 等视觉验证系统的情况下保护表单吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:29:11.667

这是为了生成[csrf-token](http://en.wikipedia.org/wiki/Cross-Site_Request_Forgery)。它并不能真正防止垃圾邮件，但会使机器人自动提交表单变得更加困难。

# android - 使用意图的图像捕获应用程序仅保存当前图片..以前的图片每次都丢失

> ID：15134292
> 
> 赞同：1
> 
> 时间：2013-02-28T11:25:03.170
> 
> 标签：android, android-camera, android-camera-intent

我正在开发一个应用程序来捕获图像并将其保存到 sd 卡..但是每次它保存当前文件并删除以前的文件时，我都使用了这个[示例](http://developer.android.com/guide/topics/media/camera.html#intents) **代码：**

//打开按钮点击

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); 
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); 
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

//对于结果

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            // Image captured and saved to fileUri specified in the Intent

            Toast.makeText(this, "Image saved to:\n" + data.getData(),
                    Toast.LENGTH_LONG).show();

        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }
    } 
```

//保存文件

```
 private static Uri getOutputMediaFileUri(int type){
   return Uri.fromFile(getOutputMediaFile(type));
     }

     private static File getOutputMediaFile(int type){

File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
          Environment.DIRECTORY_PICTURES), "MyCameraApp");
if (! mediaStorageDir.exists()){
    if (! mediaStorageDir.mkdirs()){
        Log.d("MyCameraApp", "failed to create directory");
        return null;
    }
}

String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date(type));
File mediaFile;
if (type == MEDIA_TYPE_IMAGE){
    mediaFile = new File(mediaStorageDir.getPath() + File.separator +
    "IMG_"+ timeStamp + ".jpg");
} else {
    return null;
}

return mediaFile;
 } 
```

**日志猫**

```
 02-28 17:12:49.606: E/AndroidRuntime(4791): FATAL EXCEPTION: main
02-28 17:12:49.606: E/AndroidRuntime(4791): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=null} to activity {com.example.captureimage/com.example.captureimage.MainActivity}: java.lang.NullPointerException
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.app.ActivityThread.access$1100(ActivityThread.java:123)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.os.Looper.loop(Looper.java:137)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at java.lang.reflect.Method.invokeNative(Native Method)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at java.lang.reflect.Method.invoke(Method.java:511)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at dalvik.system.NativeStart.main(Native Method)
02-28 17:12:49.606: E/AndroidRuntime(4791): Caused by: java.lang.NullPointerException
02-28 17:12:49.606: E/AndroidRuntime(4791):     at com.example.captureimage.MainActivity.onActivityResult(MainActivity.java:140)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.app.Activity.dispatchActivityResult(Activity.java:4676)
02-28 17:12:49.606: E/AndroidRuntime(4791):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2976) 
```

它在这条线上：

```
 Toast.makeText(this, "Image saved to:\n" + data.getData(),
                    Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:59:29.493

您的时间戳始终相同。你正在覆盖你以前的图片。

你应该试试：

`String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(Calendar.getInstance().getTime());`

如果您传递`intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);`给相机意图，您还必须考虑这一点。相机不会返回意图，因此`data.getData();`onActivityResult 将引发 nullPointerException。如果需要，您应该保存您指定的输出文件的路径以供以后使用。

# python - 多进程限制进程

> ID：15134300
> 
> 赞同：0
> 
> 时间：2013-02-28T11:25:17.440
> 
> 标签：python

使用这个非常简单的示例，我如何每次将进程限制为 5 个，而不是同时处理所有 90 个？

```
import multiprocessing

def worker(num):
    """thread worker function"""
    print 'Worker:', num
    return

if __name__ == '__main__':
    jobs = []
    for i in range(90):
        p = multiprocessing.Process(target=worker, args=(i,))
        jobs.append(p)
        p.start() 
```

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:29:03.280

检查文档：[http ://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers](http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers)

解决方案是创建一个由 5 个工作人员组成的池（在您的情况下），并使用该池来处理您的每个请求。

如果您对 Python 相当陌生并且需要介绍线程和进程，我认为这个演示文稿相当不错： [http ://www.slideshare.net/pvergain/multiprocessing-with-python-presentation](http://www.slideshare.net/pvergain/multiprocessing-with-python-presentation)

通读一遍，你会学到一些东西，最后你会得到一个关于池使用的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:58:47.980

`multiprocessing.Pool` 是你需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:02:00.240

这是您的任务的示例，其中包含线程和 5 个线程长的队列：

```
#!/usr/bin/env python
import threading, Queue

class ThreadedWorker(threading.Thread):
        jobQueue = Queue.Queue()

        def run( self ):
                while True:
                        num = ThreadedWorker.jobQueue.get()

                        """thread worker function"""
                        print 'Worker:', num

                        ThreadedWorker.jobQueue.task_done()

class MainClass(ThreadedWorker):
        def __init__( self ):
                self.maxThreads = 5
                self.startTest()

        def startTest( self ):
                meine_threads = [ThreadedWorker() for i in range( self.maxThreads )]

                for thread in meine_threads:
                        thread.setDaemon(True)
                        thread.start()

                for i in range(90):
                        ThreadedWorker.jobQueue.put( i )

                ThreadedWorker.jobQueue.join()

mc = MainClass() 
```

# javascript - 简单页面崩溃浏览器

> ID：15134302
> 
> 赞同：0
> 
> 时间：2013-02-28T11:25:21.887
> 
> 标签：javascript, html, jquery-mobile

我有一个使用 JQuery Mobile 构建的简单列表视图。它在桌面上运行良好，但是当您在 iPhone（4S 运行 6.1）上的 Safari 或 Chrome 上运行它时，它会使浏览器崩溃。

我已经把链接放在 jsbin - [http://jsbin.com/efehip/1](http://jsbin.com/efehip/1)

导致崩溃的原因可能是什么？Desktop 上的控制台中没有错误。我看不到任何错误配对的标签或任何其他可能导致此问题的标签。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:02:10.087

这是一个很长的列表，可能需要加载太多内存（尽管这听起来很奇怪）。您可以尝试对其进行分页，使其仅加载部分数据。不过，这可能需要服务器端脚本。

# java - 如何在java中使用excel从column1和column 3中获取单元格值并将map作为键值对放入

> ID：15134304
> 
> 赞同：0
> 
> 时间：2013-02-28T11:25:25.790
> 
> 标签：java

我已阅读工作表 1 列并放入具有 [星期日、星期一、星期二、星期三、星期四、星期五] 的数组列表。

```
Id   Apps           Remarks
------------------------------------------------------------
1    laucher        Sunday will be holiday.
2    ninja          Monday prevails ground.
3    car            kamal act in Wednesday movie.
4    angrybird      Cyclone form may be on Thursday.
5    zedge          Keeps going to temple every Friday.
6    skype          We wen movie to AGS on Saturday. 
```

这是一个三列的excel文件，分别是id、apps和remarks。我需要从*column1*中获取单元格值，并从*column3*中获取相应的值，例如

```
1 Sunday will be holiday.
2 Monday prevails ground. 
etc... 
```

`Map`然后将其存储为使用 Java的键值对。现在将 map contains 的值与上面的数组列表值（忽略大小写）进行比较。如何用 Java 编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:31:18.710

试试*Apache POI*，这是处理 excel 文件的绝佳工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:27:44.427

您可以使用[JExcelApi](http://jexcelapi.sourceforge.net/)读取 Java 中的 excel 文件。请参阅[本教程](http://www.vogella.com/articles/JavaExcel/article.html)。

# jquery - jQuery Validation - 在无效时隐藏元素

> ID：15134307
> 
> 赞同：0
> 
> 时间：2013-02-28T11:25:35.247
> 
> 标签：jquery, jquery-validate

我正在使用 jquery 验证来验证表单。我试图适应设计师的突发奇想，但事实证明这相当棘手。基本上，设计者希望每个强制输入的蓝色文本“必需*”。如果未完成强制输入，则蓝色文本应变为红色文本，即仅颜色更改而文本保持不变。

![](../Images/8f411e074d74ea0fa7dcebc9a6da2ac6.png)

我已将蓝色文本放在“强制”类的标签中

```
<label class="mandatory">required*</label> 
```

我还将所有 jquery 验证所需的消息设置为与上面标签中相同的“必需*”文本。计划是隐藏蓝色标签并在未验证时显示错误标签。

这是我觉得我做的事情有点愚蠢的地方 - 在错误放置和成功中，我正在运行以下代码：

```
errorPlacement: function (error, element) {
  element.siblings(".mandatory").hide();
  error.insertBefore(element.prev());
},
success: function (element) {
  element.siblings("label.errorMessage").remove();
  element.siblings(".mandatory").show();
} 
```

但是，当提交表单时，这一切都可以正常工作 - 蓝色标签被成功隐藏，错误标签被放置在正确的位置。

如果用户将文本添加到错误输入之一，则上面的“成功功能”将正确执行，错误标签被隐藏，而蓝色标签可见。

如果用户从他刚刚添加文本的同一输入中删除文本，则输入将单独验证并显示错误标签，**这就是问题所在......错误放置代码似乎没有再次执行，现在我有蓝色和红色标签可见。**

![](../Images/70849e8fe5fc1f6d71d0f8f4c9410ab7.png)

任何人都知道我可以做些什么来在再次验证输入时隐藏蓝色标签 - 顺便说一句，如果再次提交表单，那么一切都很好吗？

干杯

翅膀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:50:03.847

我不相信当字段通过验证时显示错误消息是可能的。插件内部是在字段通过验证时隐藏所有标签的代码。我看到您可能只是在尝试模拟效果。

如果您想解决这个问题，我将提供一些见解，最终可能会带您找到解决方案。

查看`highlight`和`unhighlight`回调。这些补充功能是为显示通过/失败图标等而设计的。

他们在这里使用默认代码：

```
 highlight: function (element, errorClass, validClass) {
        if (element.type === "radio") {
            this.findByName(element.name).addClass(errorClass).removeClass(validClass);
        } else {
            $(element).addClass(errorClass).removeClass(validClass);
        }
    },
    unhighlight: function (element, errorClass, validClass) {
        if (element.type === "radio") {
            this.findByName(element.name).removeClass(errorClass).addClass(validClass);
        } else {
            $(element).removeClass(errorClass).addClass(validClass);
        }
    }, 
```

这是默认`errorPlacement`回调：

```
 errorPlacement: function (error, element) {
        error.insertAfter(element);
    }, 
```

`success`回调没有默认值，但根据文档，您可以在成功时使用它在标签中放置文本。

```
 success: function (label) {
        label.removeClass('error').addClass('valid').text('ok')
    }, 
```

由于`error`and是 & 元素的`valid`默认 CSS ，您也许可以像这样利用它们的颜色......`class``label`

```
label.valid {
    color: #00f;
}

label.error {
    color: #f00;
} 
```

这是一个可用于测试的 jsFiddle：http: [//jsfiddle.net/7TPvP/](http://jsfiddle.net/7TPvP/)

这是所有回调函数和选项的文档：http: [//docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

**关于您的代码的一些注释：**

引用操作：

> “错误放置代码似乎没有再次执行，现在我可以看到蓝色和红色标签。”

那是因为实际的`label`（由插件为错误创建的）已经放置了一次。无需再次放置。如果您希望某些东西不断地开和关，请查看`highlight`和`unhighlight`回调函数。

* * *

**编辑**：

这是非常接近您想要的东西。您仍然需要稍微调整一下...

**演示：http: [//jsfiddle.net/2mwfG/](http://jsfiddle.net/2mwfG/)**

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // other options and rules,
        highlight: function (element, errorClass, validClass) {
            if (element.type === "radio") {
                this.findByName(element.name).addClass(errorClass).removeClass(validClass);
            } else {
                $(element).addClass(errorClass).removeClass(validClass);
                $(element).prev('.mandatory').hide(); // <-- added this
            }
        },
        unhighlight: function (element, errorClass, validClass) {
            if (element.type === "radio") {
                this.findByName(element.name).removeClass(errorClass).addClass(validClass);
            } else {
                $(element).removeClass(errorClass).addClass(validClass);
                $(element).prev('.mandatory').show();  // <-- added this
            }
        },
        errorPlacement: function (error, element) {
            error.insertAfter(element);
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:08:36.853

我没有太多使用 jQuery 验证，但我想我知道你在做什么，我有一个建议让它更容易，它也可以解决你遇到的问题......而不是隐藏和显示 2错误或成功的不同标签为什么不只使用一个标签并根据验证结果打开和关闭“错误”类？像这样的东西可能会奏效：

```
errorPlacement: function (error, element) {
  element.siblings(".mandatory").addClass('error');
},
success: function (element) {
  element.siblings(".mandatory").removeClass('error');
} 
```

由于“强制”css 规则，您的标签默认为蓝色，您可以为“错误”类编写样式，使其在应用该类时变为红色。这样，您就不会在添加和删除标签时摸索，您只会拥有一个只是切换状态的标签。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:45:18.580

也许与其将错误消息删除并插入到 DOM 中，您可以一直将它放在那里，并像您为强制性消息所做的那样显示或隐藏它？

因此，将其包含在您的 html 中，但将其隐藏。

```
<span class="errorMessage" style="display: none;">* required</span> 
```

然后您可以使用当前代码显示或隐藏它：

```
errorPlacement: function (error, element) {
  element.siblings(".mandatory").hide();
  element.siblings(".errorMessage")show();
},
success: function (element) {
  element.siblings(".errorMessage").hide();
  element.siblings(".mandatory").show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T21:07:29.503

首先 - 你说 errorPlacement 回调似乎没有再次执行。它没有。它在插件的生命周期中每个字段只执行一次。也就是说，一旦它生成了 errorLabel 并将其放置在页面中，它的工作就完成了。

[您可以按照此答案](https://stackoverflow.com/a/4044251/678338)中的说明手动输入错误标签

```
<label for="name" class="error" generated="true">your message here</label> 
```

但是，当字段有效时，插件会删除标签的内部文本。

然后试试这个，我已经将错误消息隐藏在 data- 属性中，并在成功回调中检索它（如果存在）。

```
<input name="one" id="one" class="required" />
<label data-message="* this is required" for="one" class="error valid"></label> 
```

脚本在下面[小提琴在这里](http://jsfiddle.net/vR23w/1/)

```
$(function () {

    $('label[data-message]').each(function () {
        $(this).html($(this).data("message"));
    });

    $("form").validate({
        success: function (label) {
            if (label.data("message")) {
                label.addClass("valid").text(label.data("message"));
            } else {
                label.text("");
            }
        },
        submitHandler: function () {
            alert('form is ok');
        }
    });
}); 
```

# python - 如何在 python 中不转义字符串函数参数

> ID：15134310
> 
> 赞同：0
> 
> 时间：2013-02-28T11:25:39.207
> 
> 标签：python, function, parameters, escaping, os.path

长话短说。我有这个功能：

```
def save_screenshot(self, file_destination, picture_format = None)
    file_path_name, file_extension = os.path.splitext(file_destination)
    file_path, file_name = os.path.split(file_path_name)
    (...) 
```

现在，我这样调用函数：

```
save_screenshot("C:\Temp\picture.jpg", "JPG") 
```

我知道如何在 python 中不转义字符串（在“os.path.join”的帮助下），但是如果字符串是函数参数，我不知道该怎么做。如果我写“C:\\Temp\\picture.jpg”或“C:/Temp/picture.jpg”，该函数可以正常工作（在 Windows 上）。

如果您有一些建议，那就太好了。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:45:09.517

如前所述，您可以使用：

原始字符串 r" 字符串 "

```
save_screenshot(r"C:\Temp\picture.jpg", "JPG") 
```

也应该可以使用 """ 字符串 """

```
save_screenshot("""C:\Temp\picture.jpg""", "JPG") 
```

也许我也可以参考 Stack 上的这个答案： [what-exactly-do-u-and-rstring-flags..](https://stackoverflow.com/questions/2081640/what-exactly-do-u-and-rstring-flags-in-python-and-what-are-raw-string-litte)

这基本上解释了如何使用原始字符串文字来忽略从字符串中的反斜杠派生的转义序列（主要用于正则表达式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:01:50.563

我认为您的问题不是使用 os.path 而不是转义/转义字符串。
这个功能会更好吗？

```
def save_screenshot(self, file_destination, picture_format = None):
    file_name = os.path.basename(file_destination)
    path = os.path.dirname(file_destination)
    base, ext = os.path.splitext(file_name)
    e = ext if picture_format is None else '.%s' % picture_format.lower()
    to_path = os.path.join(path, base + e)
    print(to_path) 
```

# python - Python - 内存使用

> ID：15134311
> 
> 赞同：0
> 
> 时间：2013-02-28T11:25:41.317
> 
> 标签：python

我是一名计算机工程师学生，我开始使用 Python。现在，我的任务是创建一个矩阵，但规模非常大。我该如何处理它以减少内存？我做了一些搜索并找到了“内存处理程序”，但我不能确定处理程序是否可以用于此。或者 Python 库中是否有任何模块？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:28:23.417

您应该研究 numpy 和 scipy。它们是位于内存块之上的相对较薄的层，通常对于矩阵类型的计算非常有效。如果您的矩阵很大但很稀疏（即大多数元素为 0），请查看[scipy's sparse matrices](http://docs.scipy.org/doc/scipy/reference/sparse.html)。

# android - 将 Long 值格式化为日期字符串？

> ID：15134313
> 
> 赞同：0
> 
> 时间：2013-02-28T11:25:44.233
> 
> 标签：android, date, string-formatting, android-date

我正在开发一个应用程序，在该应用程序中我必须将长值转换为日期字符串并显示。为了达到我使用以下功能的目的，但它返回的日期`70's and 80's`显然不合适。我正在使用以下功能：

```
public static String convertDateFromLongToCompleteString(long date) {
    Date d = new Date(date * 1000);
    SimpleDateFormat dateformat = new SimpleDateFormat("dd/MM/yyyy hh:mm a");
    String formattedDateFromLong = dateformat.format(d);
    return formattedDateFromLong;
} 
```

long 值很简单`System.currentTimeMillis()`，当我必须向用户展示它时，我必须格式化我使用上述函数的那个​​。我检查了系统和设备的日期、它们的区域和时间，一切都很好。请更新为什么会出现此问题以及如何获得确切日期。谢谢！

**编辑**

我也试过不乘以 1000，它给了我 1970 年的时间和日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:27:53.987

如果您`long date`是简单`System.currentTimeMillis()`的，则`1000`不需要乘以。

`Date d = new Date(date);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:29:30.153

替换 `Date d = new Date(date * 1000);`为`Date d = new Date(date);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:35:48.807

如果您仅使用上述方法`System.currentTimeMillis()`，则可以不带任何参数调用`Date`构造函数，它将为您提供`Date`引用当前日期和时间的对象。这将是解决您的问题的更简单方法。希望这可以帮助。

# javascript - 从函数返回 json 对象

> ID：15134321
> 
> 赞同：1
> 
> 时间：2013-02-28T11:26:05.710
> 
> 标签：javascript, jquery, ajax, json

我正在尝试从函数返回一个 json 对象并将其用作以下代码，但它不起作用。它有什么问题？

```
var x = [ "EditFileName" , "dosometing" ];
c_loadAjax.apply(this,x).done(function(json){
    alert(json.error);
});
function c_loadAjax( post , option ){
    $.ajax({
        type:"POST",
        url:"/includes/Ajax.php",
        data:{post:post,option:option},
        error:function(result){
            return '{"error":"Error"}';
        },
        success:function(result){
            return jQuery.parseJSON(result);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:40:13.717

尝试使用 return 关键字

```
var x = [ "EditFileName" , "dosometing" ];
c_loadAjax.apply(this,x).done(function(json){
    alert(json.error);
});
function c_loadAjax( post , option ){
    return $.ajax({
        type:"POST",
        url:"/includes/Ajax.php",
        data:{post:post,option:option},
        error:function(result){
            return '{"error":"Error"}';
        },
        success:function(result){
            return jQuery.parseJSON(result);
        }
    });
} 
```

# php - Chrome 不想接受 $Ajax、$.Get、.load() 或我尝试的任何其他内容

> ID：15134323
> 
> 赞同：0
> 
> 时间：2013-02-28T11:26:06.180
> 
> 标签：php, javascript, jquery, ajax, google-chrome

我在我正在构建的一个小页面上对 Chrome 和一个 Ajax 请求做了一个正确的噩梦。当谈到 Javascript/jQuery 时我很好，但这让我发疯。

基本上我有页面[http://www.neuralnode.com/STARMAN/](http://www.neuralnode.com/STARMAN/)（警告，这似乎有时会使 Chrome 崩溃）并且它适用于大多数版本的 Firefox 和 IE 9+ 但每当我在 chrome 上尝试它时它不会完全可以工作，那么如果您将其放置太久，Chrome 就会崩溃。我不知道出了什么问题，我已经到处搜索了。让我解释一下代码：

我们有两个基本页面，index.php 和 viewer.php。index.php 使用多种方法加载 viewer.php，目前`$.ajax`我也尝试过。`$.get``.load()`

为清楚起见，这是删除了所有其他 Javascript 功能的完整代码。在实时站点中，除了 ajax 加载之外的所有代码都被注释掉了。

索引.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>StarViewer V1</title>
<style type="text/css">
<!--
html {
    width:100%;
    height:100%;
}
body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    background-color: #666;
    width:100%;
    height:100%;
    overflow:hidden;
}
#controls {
    position: absolute;
    left: 50%;
    margin-left:-450px;
    top: 0px;
    background-color: #333;
    width: 900px;
    height: 100px;
    font-family: Arial, Helvetica, sans-serif;
    color: #CCC;
    font-size: 12px;
    z-index: 999999;
    opacity: 90%;
    border: 2px solid;
    border-radius: 5px;
    -moz-border-radius: 5px; /* Old Firefox */
    box-shadow: 3px 3px 3px #3E3E3E;
    margin-top: 20px;
}
#container {
    width: 100%;
    height: 100%;
    background-image: url(img/bkg_full.gif);
}
#bigcontainer {
    height: 100%;
    width: 100%;
    overflow: scroll;
    position: relative;
    z-index: 1;
}
.navigation {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 8px;
}
-->
</style></head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script language="javascript" type="application/javascript">
$(document).ready(function() {

    function navigation(typ){
        var Top = $('#bigcontainer').scrollTop();
        var Left = $('#bigcontainer').scrollLeft();

        var zoomspeed = $("#Speed").val();
        var speed = parseFloat(zoomspeed);

        if(typ == 'LEFT UP') {
            NewLeft = Left - speed;
            NewTop = Top - speed;
        } else if (typ == 'UP') {
            NewLeft = Left;
            NewTop = Top - speed;
        } else if (typ == 'RIGHT UP') {
            NewLeft = Left + speed;
            NewTop = Top - speed;
        } else if (typ == 'RIGHT') {
            NewLeft = Left + speed;
            NewTop = Top;
        } else if (typ == 'RIGHT DN') {
            NewLeft = Left + speed;
            NewTop = Top + speed;
        } else if (typ == 'DN') {
            NewLeft = Left;
            NewTop = Top + speed;
        } else if (typ == 'LEFT DN') {
            NewLeft = Left - speed;
            NewTop = Top + speed;
        } else if (typ == 'LEFT') {
            NewLeft = Left - speed;
            NewTop = Top;
        } else if (typ == '+') {
            NewLeft = 12100;
            NewTop = 4400;
        }

        $('#bigcontainer').animate({ scrollTop: NewTop, scrollLeft: NewLeft}, 300 );
        //$('#bigcontainer').animate({ }, 500 );

        return false;  
    };
    var currlevel = $("#currzoom").attr("value");

    function LoadDataIntoDiv(data) {
        $('#bigcontainer').html(data);
        navigation('+');
    }
        $.ajax({
              url: "viewer.php",
              data: {
                    zoom:'-250'
                    }, 
              method: 'POST',
              datatype: 'html',
              async: true,
              success: function(html) {
                  LoadDataIntoDiv(html)
                  },
              error: function(XMLHttpRequest, textStatus, errorThrown) {
                   alert(textStatus+" - "+errorThrown);
                  }
         });

    /*$('#bigcontainer').load('', function() {
        navigation('+');
    });*/

});

//?
</script>
<body>
<div id="container">
<div id="controls">
  <table width="100%" border="0" cellspacing="2" cellpadding="2">
    <tr>
      <td width="39%" align="center"><div id="zoommenu">Zoom [ <span class="item" title="-250">200%</span> | <span class="item" title="-110">150%</span> | <span class="item" title="-10">100%</span> | <span class="item" title="40">50%</span> | <span class="item" title="75">25%</span> | <span class="item" title="90">10%</span> ]</div></td>
      <td width="15%" align="center">Selected Locations</td>
      <td width="14%" align="right"><label>
        <input type="button" name="lu" class="navigation" value="LEFT UP"/>
      </label></td>
      <td width="6%" align="center"><label>
        <input type="button" name="up" class="navigation" value="UP"/>
      </label></td>
      <td width="9%" align="left"><label>
        <input type="button" name="ru" class="navigation" value="RIGHT UP" />
      </label></td>
      <td width="17%">Curr H 
        <label>
          <input name="CurrHPos" type="text" id="CurrHPos" size="7" />
        </label></td>
    </tr>
    <tr>
      <td align="right">From:
        <input name="starsearch" type="text" id="starsearch" size="45" />
        <input name="currzoom" type="hidden" id="currzoom" value="-250" /></td>
      <td align="center"><div id="searchreturn"></div></td>
      <td align="right"><label>
        <input type="submit" name="LEFT" id="LEFT" class="navigation" value="LEFT" />
      </label></td>
      <td align="center"><label>
        <input type="submit" name="CENTER" id="CENTER" class="navigation" value="+" />
      </label></td>
      <td align="left"><label>
        <input type="submit" name="RIGHT" id="RIGHT" class="navigation" value="RIGHT" />
      </label></td>
      <td>Curr V   
        <label>
           <input name="CurrVPos" type="text" id="CurrVPos" size="7" />
        </label></td>
    </tr>
    <tr>
      <td align="right">To:<input name="starsearch2" type="text" id="starsearch2" size="45" /></td>
      <td align="center"><div id="searchreturn2"></div></td>
      <td align="right"><label>
        <input type="button" name="ld" class="navigation" value="LEFT DN" />
      </label></td>
      <td align="center"><label>
        <input type="button" name="dn" class="navigation" value="DN" />
      </label></td>
      <td align="left"><label>
        <input type="button" name="rd" class="navigation" value="RIGHT DN" />
      </label></td>
      <td>Scroll Speed: 
        <label>
          <input name="Speed" type="text" id="Speed" value="300" size="7" />
        </label></td>
    </tr>
  </table>
</div>
<div id="bigcontainer"></div>
</div>
</body>
</html> 
```

和 viewer.php - 它是一个相当长的 foreach 循环，一般来说它的代码很混乱，但这不应该影响任何东西，因为它在其他两个主要浏览器中工作 - 我确实计划稍后整理它，只需要把这个想出来（解决;计算出;弄明白...

```
<?php
include 'database.class.php';
$database = new DatabaseConnector;
$Query = "SELECT * FROM startrekplanets";
$current = $database->ExecuteQuery($Query,"SELECT");
$zoomlevel=$_POST['zoom'];
?>
<style type="text/css">
<!--
body {
    background-color: #000;
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
.roundedname {

}
.roundedname span {
    font-family: "Arial Black", Gadget, sans-serif;
    color: #FFF;
    opacity:0.9; /* Transparent Background 50% */
    display: inline-block;
    width: 150px;
}
#planetinformation {
    overflow: hidden;
    position: absolute;
    z-index: 888888888;
    width: 185px;
    background-color: #005BCC;
    border: 2px solid;
    border-radius: 5px;
    -moz-border-radius: 5px; /* Old Firefox */
    box-shadow: 3px 3px 3px #3E3E3E;
}
#planetinformation .ItemTitle{
    font-family: Arial, Helvetica, sans-serif;
    font-size: 18px;
    font-weight: bold;
    color: #F60;
    padding: 3px;
    margin: 0px;
}
#planetinformation td {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: normal;
    color: #000;
    padding: 0px;
}
-->
</style>

<script language="javascript" type="application/javascript">

$(document).ready(function() {

    $("#planetinformation").hide();     

    $(".planetaryobject").click(function () {
        var planid = $(this).attr("title");
        $.ajax({
                type: "POST",
                url: "starquery.php",
                data: "sstring="+planid+"&currzoom="+<?php echo $zoomlevel; ?>,
                success: function(html) {
                    var SortedVars = new Object;
                    var SplitVars = html.split(',');
                    SortedVars = CollectVars(SplitVars);
                    $('#planetinformation').show('slow', function() {
                        $("#planetinformation").css("margin-top", SortedVars.V+40);
                        $("#planetinformation").css("margin-left", SortedVars.H+40);
                        $('#planetinformation').show('slow', function() {
                            $("#planetinformation .ItemTitle").html(SortedVars.Name);
                            $("#planetinformation .ItemQuadrant").html(SortedVars.Quadrant);
                            $("#planetinformation .ItemGrid").html(SortedVars.Grid);
                            $("#planetinformation .ItemCords").html(SortedVars.HCord+'/'+SortedVars.VCord);
                            $("#planetinformation .ItemStatus").html(SortedVars.Status);
                            $("#planetinformation .ItemOwnership").html(SortedVars.Zoned);
                            if (SortedVars.WikiLink) {
                                var formattedlink = '<a href="'+SortedVars.WikiLink+'">Link!</a>';
                                $("#planetinformation .ItemLink").html(formattedlink);
                            }else{
                                $("#planetinformation .ItemLink").html('');
                            }
                        });
                    });

                },
                complete: function (html) {

                }
            });
    });

    function CollectVars(varsin) {
        var ReturnVars = new Object;
        ReturnVars.H = parseFloat(varsin[0]);
        ReturnVars.V = parseFloat(varsin[1]);
        ReturnVars.IdName = varsin[2];
        ReturnVars.Name = varsin[3];
        ReturnVars.Special = varsin[4];
        ReturnVars.NewW = parseFloat(varsin[5]);
        ReturnVars.NewH = parseFloat(varsin[6]);
        ReturnVars.Col = varsin[7];
        ReturnVars.Done = varsin[8];
        ReturnVars.Quadrant = varsin[9];
        ReturnVars.Grid = varsin[10];
        ReturnVars.HCord = parseFloat(varsin[11]);
        ReturnVars.VCord = parseFloat(varsin[12]);
        ReturnVars.Status = varsin[13];
        ReturnVars.Zoned = varsin[14];
        ReturnVars.WikiLink = varsin[15];
        ReturnVars.ItemImage = varsin[16];
        ReturnVars.ImageH = parseFloat(varsin[17]);
        ReturnVars.ImageV = parseFloat(varsin[18]);
        return ReturnVars;
    }

});
</script>
<?php
$z=1;
foreach($current as $key=>&$val) { 
if(empty($zoomlevel)) {
    $zoomlevel = -250;  
}
$minusH = ($val['Three'] / 100) * $zoomlevel;
$minusV = ($val['Four'] / 100) * $zoomlevel;
$H = $val['Three'] - $minusH;
$V = $val['Four'] - $minusV;
if(empty($val['Col'])) {
    $colo = 'FFFFFF';
}else{
    $colo = $val['Col'];
}

if($zoomlevel == '-250') {
    $fold = 'zoom200/';
    $Vsize = 47;
    $HSize = 47;
    $textsize = 14;
}elseif($zoomlevel == '-110') {
    $fold = 'zoom150/';
    $Vsize = 30;
    $HSize = 30;
    $textsize = 12;
}elseif($zoomlevel == '-10') {
    $fold = 'zoom100/';
    $Vsize = 22;
    $HSize = 22;
    $textsize = 10;
}elseif($zoomlevel == '40') {
    $fold = 'zoom50/';
    $Vsize = 15;
    $HSize = 15;
    $textsize = 8;
}elseif($zoomlevel == '75') {
    $fold = 'zoom25/';
    $Vsize = 8;
    $HSize = 8; 
    $textsize = 7;
}elseif($zoomlevel == '90') {
    $fold = 'zoom10/';
    $Vsize = 4;
    $HSize = 4;
    $textsize = 5;
}
$z++;
if($val['Special'] == 1) {
    $HSize = $val['NewH'];
    $Vsize = $val['NewW'];
    $H = $H - ($val['NewW'] / 1.5);
    $V = $V - ($val['NewH'] / 1.5);
    $op = 'opacity:0.4; filter:alpha(opacity=40);';
}else{
    $op = '';   
}
$CurrName = str_replace(' ','',str_replace('(','',str_replace(')','',$val['Name'])));
?>
<div class="planetaryobject" title="<?php echo $val['Id']; ?>" style="margin-left:<?php echo $H; ?>px; margin-top:<?php echo $V; ?>px; width:<?php echo $Vsize; ?>px; height:<?php echo $HSize; ?>px; position: absolute; z-index: <?php echo $z;  $z++; ?>; <?php echo $op; ?> background-image: url(img/<?php echo $fold.$colo; ?>);" id="<?php echo $CurrName; ?>"></div>
<?php
if($val['Special'] == 1) {
    $H = $H+($HSize/2);
    $V = $V + 50;
}else{
    $H = $H+10;
    $V = $V-15;
}
?>
<div style="margin-left:<?php echo $H; ?>px; margin-top:<?php echo $V; ?>px; position: absolute; z-index: <?php echo $z; ?>; font-size: <?php echo $textsize; ?>px; font-family: Arial, Helvetica, sans-serif;"><div class="roundedname"><span><?php echo $val['Name']; ?></span></div></div>

<?php } ?>

<div id="planetinformation">
<table width="100%" border="0" cellspacing="1" cellpadding="0">
  <tr>
    <td colspan="2"><h1 class="ItemTitle">Title</h1></td>
    </tr>
  <tr>
    <td width="48%">Quadrant:</td>
    <td width="52%" class="ItemQuadrant">&nbsp;</td>
  </tr>
  <tr>
    <td>Grid:</td>
    <td class="ItemGrid">&nbsp;</td>
  </tr>
  <tr>
    <td>Cordinates:</td>
    <td class="ItemCords">&nbsp;</td>
  </tr>
  <tr>
    <td>Status:</td>
    <td class="ItemStatus">&nbsp;</td>
  </tr>
  <tr>
    <td>Ownership:</td>
    <td class="ItemOwnership">&nbsp;</td>
  </tr>
  <tr>
    <td>Link:</td>
    <td class="ItemLink">&nbsp;</td>
  </tr>
</table>

</div> 
```

在我对此的有限了解中，我从来没有遇到过这样的问题，即浏览器在我看到萤火虫对此有何评论之前就崩溃了。任何人都可以帮助我了解这里可能发生的事情。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-28T14:03:17.497

jQuery 支持谷歌浏览器。看来您的 jQuery 没有加载。

您的 jQuery 脚本 URL 似乎拼写错误。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

试试这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

# spring - PetClinic 示例是否违反单一责任原则

> ID：15134324
> 
> 赞同：1
> 
> 时间：2013-02-28T11:26:06.783
> 
> 标签：spring, oop, design-patterns, single-responsibility-principle

我只是好奇加上更好地理解 SRP，petclinic spring mvc 示例有一个很大的 Clinic inetraface，其中包含所有者、宠物和访问的方法。

另一方面，SRP 说“一个类（这里是 Clinic/inetrface 本身的实现类）应该完成**一项定义的任务**。那么，Clinicinetrface 应该被分成 3 个接口？或者我把 SPR/petclinic 的例子弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:34:35.667

假设您指的是 SpringSource [PetClinic 示例](http://static.springsource.org/docs/petclinic.html)；文档说：

> PetClinic 的高级业务/持久性 API 是 org.springframework.samples.petclinic.Clinic 接口。PetClinic 中的每个持久性策略都是 Clinic 接口的不同实现。

并且还提到：

> 由于 PetClinic 应用程序都是关于数据库访问的，并且除此之外应用程序中几乎没有业务逻辑，因此主要业务和持久层 API 没有分离。虽然这种设计技术不应该用于具有更复杂业务逻辑的应用程序，但在这里它是可以接受的，因为所有与持久性无关的业务规则都已在业务对象中实现并且没有泄漏到持久层中。设计中最重要的方面是业务层和持久层完全独立于表示层。

最后根据其[原始定义](http://www.butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)，SRP 说

> 一个班级应该有一个，而且只有一个改变的理由。

所以在某种程度上设计与 SRP 是一致的，因为 Clinic 接口封装了应用程序的持久性 API，并且它的实现只会因为所使用的持久性策略/技术的底层变化而改变。另一方面，正如它所提到的，这是一个非常简单的示例，您猜对了，在更复杂的应用程序中，持久性/数据访问层很可能会被实体拆分：通常您最终会拥有一个每个主要实体的 DAO，因此在 PetClinic 中类似于 OwnerDAO、PetDAO、VisitDAO。

# mysql - MySQL：uuid_short 是如何生成的？

> ID：15134326
> 
> 赞同：1
> 
> 时间：2013-02-28T11:26:08.723
> 
> 标签：mysql

我有 MySQL 5.5.24。Сalling uuid_short() 几次我只得到一个递增的值：

```
mysql> select uuid_short();
+-------------------+
| uuid_short()      |
+-------------------+
| 22851044396498953 |
+-------------------+
1 row in set (0.00 sec)

mysql> select uuid_short();
+-------------------+
| uuid_short()      |
+-------------------+
| 22851044396498954 |
+-------------------+
1 row in set (0.00 sec) 
```

但是[手册](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid-short)说：

```
The UUID_SHORT() return value is constructed this way:
  (server_id & 255) << 56
+ (server_startup_time_in_seconds << 24)
+ incremented_variable++; 
```

似乎“server_startup_time_in_seconds”或“server_id”都没有变化。（我更改了`@@global.server_id`系统变量，但没有效果）。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:22:55.090

在我看来，该函数确实返回了指定的内容。服务器 ID 和启动时间是服务器特定的值，并且（通常）只要服务器正在运行就不会改变。短 UUID 的最不重要部分是一个递增的值。所以我假设在服务器启动后为 UUID 创建一个种子，采用左移的服务器 id 和左移的启动时间。该值在每次创建 UUID 时递增并返回。这解释了为什么更改 @@global.server_id 变量没有效果。

# sql - 使用 R 函数 lapply 和 read.sql.csv

> ID：15134327
> 
> 赞同：2
> 
> 时间：2013-02-28T11:26:08.583
> 
> 标签：sql, r, csv, lapply

我正在尝试使用如下列表打开多个 csv 文件；

```
filenames <- list.files("temp", pattern="*.csv", full.names=TRUE) 
```

我找到了使用 lapply 和 read.csv 打开临时目录中所有文件的示例，但我知道我需要从文件中提取哪些数据，所以为了节省阅读时间，我想使用 SQL 扩展名；

```
somefile = read.csv.sql("temp/somefile.csv", sql="select * from file ",eol="\n") 
```

但是，我无法将这两个功能组合到一个命令中，这样我就可以读取应用相同 sql 查询的目录中的所有文件。

有没有人成功做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:50:41.187

如果您想要每个文件中的数据框列表（假设您的工作目录包含 .csv 文件）：

```
files <- list.files(".", pattern="*.csv")
df.list <- sapply(filenames, read.csv.sql,sql="select * from file ",eol="\n",simplify=F) 
```

或者，如果您希望将它们全部组合在一起：

```
df <- ldply(filenames, read.csv.sql,sql="select * from file ",eol="\n") 
```

# persistence - 重启后 wso2 等待循环不起作用

> ID：15134331
> 
> 赞同：2
> 
> 时间：2013-02-28T11:26:16.783
> 
> 标签：persistence, wso2, bpel

我在连接到 Postgresql 9 DB 的 WSO2 BPS 3.0.0 上的 bpel 进程中开发了一个池逻辑。它看起来像这样：

```
<bpel:repeatUntil name="RepeatUntilIncidentCompleted">
<bpel:sequence name="CheckIncidentStatus">
    <bpel:wait name="Wait">
        <bpel:for expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA['PT1M']]></bpel:for>
    </bpel:wait>
    <!-- invoke a service, copy status to a vStatus variable -->
</bpel:sequence>
<bpel:condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[$vStatus=36]]></bpel:condition> 
```

我创建了一个流程实例，这个循环运行良好。后来我重新启动了 WSO2 BPS 服务器。在重新启动的那一刻，流程实例处于循环中，但重新启动后循环不再运行。该过程在碳控制台中被标记为活动。

我在 deploy.xml 中添加了 in-memory=false 属性，但没有帮助。

我可能错过了一些配置，但这样的循环也可能存在持久性问题（可能在 Apache ODE 中）。

有谁知道这个问题的解决方案？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:51:32.510

我发现：
1\. 您放入 wso2 bpel 进程的所有睡眠操作都在 ode_job 表中表示。属性 ts 包含唤醒时间。
2\. bps 服务器重启后，所有延迟的睡眠操作都不再继续（当唤醒时间 < 当前时间 - 偏移量时，睡眠操作被延迟）。
3\. 重启 bps 服务器后，所有非延迟睡眠操作都正常继续。

现在让我们这样说：
- 您有一个在等待操作中等待的 bpel 流程实例。唤醒时间是 X。
- 您停止 bps 服务器，并在 X 之后重新启动它。
因为 2\. 重新启动后流程实例将不会继续。这包括我之前描述的循环。

我对这个问题的解决方法：
每次重新启动 wso2 bps 服务器时，我都会在数据库上执行一个 sql 脚本，更新睡眠操作的唤醒属性（ode_job 表中的 ts 列）。起床时间设置在不久的将来。

我不知道你是否可以通过配置更改 2\. / 3\. 行为。我找不到任何关于它的文档。这里需要一些代码分析。更糟糕的是，wso2 使用它自己的 apache ode 分支，因此您不能只更新 apache ode 库。

我怀疑 2\. 中描述的行为可能有两个原因：
- 延迟睡眠操作被删除
- 延迟睡眠操作在重新启动后立即执行，但尚未加载进程定义。

# javascript - CSS中的字体大小不起作用

> ID：15134333
> 
> 赞同：0
> 
> 时间：2013-02-28T11:26:21.333
> 
> 标签：javascript, jquery, css

我正在尝试指定位于 JQuery Mobile 应用程序页面 (chart1) 的页脚中的按钮文本的大小。该类名为“footer-button”，并在下面的代码中设置样式。不管我指定什么样的值（px、em 或 pt），文本大小似乎都没有改变。有任何想法吗？

```
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<style>

    .ui-page { background: #2f2d2d;}

    .footerBar{
        min-height: 80px;
    }

    .footer-button{
        min-height: 80px;
        font-size: 20;
        word-wrap: normal;
    }

</style>

</head>

<body>
<!-- code for the main page -->
<div data-role="page" data-theme="b" id="main-page">
    <div data-role="header" data-position="fixed">
       <h1>Data Collector</h1>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-inset="true">
            <li data-role="list-divider">Collected Data Available:</li>
            <li><a href="#chart1" id="btn1" data-transition="slide">Car</a></li>
            <li><a href="#">Other 2</a></li>
            <li><a href="#">Other 3</a></li>
            <li><a href="#">Other 4</a></li>
        </ul>
    </div>
    <div data-role="footer" data-position="fixed">
        <h4>&#169 KLH</h4>
    </div>
</div>

<!-- code for the chart 1 page -->
<div data-role="page" data-theme="b" id="chart1">
    <div data-role="header" data-tap-toggle="true" class="headerBar">
       <a href="#main-page" data-icon="arrow-l" data-iconpos="left" data-transition="slide" data-direction="reverse">Back</a>
        <h1>Car Crashes</h1>
    </div>
    <div data-role="content"  data-position="fixed">
        <div id="containerYear"></div>
    </div>
    <div data-role="footer" data-position="fixed" class="footerBar">
        <div data-role="navbar">
            <ul>
                <li><a href="#chart1" data-role="tab" class="ui-btn-active footer-button">Last 12 Months</a></li>
                <li><a href="#chart2" data-role="tab" class="footer-button">Last 30 Days</a></li>
                <li><a href="#chart3" data-role="tab" class="footer-button">Last 7 Days</a></li>
            </ul>
        </div>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:31:30.310

您需要针对此类 .ui-btn-text

所以...

```
.footer-button .ui-btn-text {
    font-size: 20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:38:26.793

如果您使用 Chrome 检查源代码，您会看到 JQuery Mobile 添加了一些干预类。

长话短说：这行得通

```
.footer-button .ui-btn-text {
    min-height: 80px;
    font-size: 50px;
    word-wrap: normal; 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T11:28:39.750

将单位后缀（“px”）添加到字体大小，如下所示：

```
.footer-button{
        min-height: 80px;
        font-size: 20px;
        word-wrap: normal;
    } 
```

# ios - 从 UITableView 加载 UIWebView 仅第一次有效

> ID：15134335
> 
> 赞同：0
> 
> 时间：2013-02-28T11:26:24.360
> 
> 标签：ios, cocoa-touch, uiwebview, rubymotion

我正在使用带有[提升](https://github.com/clearsightstudio/ProMotion)框架的 ruby​​motion 来开发我的第一个 iOS 应用程序。我有一个表格视图（在导航控制器内），点击表格单元格会打开带有加载本地 html 文件的 web 视图的新屏幕。问题是 Web 视图仅在我第一次加载时显示。当我返回（导航控制器）并再次点击任何单元格时，它会打开新屏幕，但不会显示 Web 视图。Web 视图委托方法被触发，因此它加载它，但我只看到黑屏（带导航栏）。

这是带有 Web 视图的屏幕的代码：

```
class XXXDetailScreen < ProMotion::Screen

  attr_accessor :screen_title

  def on_load
    XXXDetailScreen.title = self.screen_title

    @web_view = add_element UIWebView.alloc.initWithFrame(self.view.bounds)
    @web_view.delegate = self
    @web_view.scrollView.scrollEnabled = false
    @web_view.scrollView.bounces = false

    @web_view.loadRequest(NSURLRequest.requestWithURL(NSURL.fileURLWithPath(NSBundle.mainBundle.pathForResource('index', ofType: 'html', inDirectory: 'html'))))
  end

  def webView(inWeb, shouldStartLoadWithRequest: inRequest, navigationType: inType)
    true
  end
end 
```

上面的屏幕使用以下代码打开：

```
def tableView(tableView, didSelectRowAtIndexPath: indexPath)
    tableView.deselectRowAtIndexPath(indexPath, animated: true)

    open GalleryDetailScreen.new(screen_title: @data[indexPath.row][:title]), hide_tab_bar: true
end 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:12:52.887

我是 ProMotion 的创建者之一。通常最好使用该`will_appear`方法来设置视图元素，因为 on_load 通常会过早触发而无法获得正确的视图`bounds`。但是，如果您确实将其加载到其中，则`will_appear`需要确保只实例化一次 Web 视图（`will_appear`每次切换到该屏幕时都会触发）。

我将演示：

```
class XXXDetailScreen < ProMotion::Screen

  attr_accessor :screen_title

  def on_load
    XXXDetailScreen.title = self.screen_title
  end

  def will_appear
    add_element draw_web_view
  end

  def draw_web_view
    @web_view ||= begin
      v = UIWebView.alloc.initWithFrame(self.view.bounds)
      v.delegate = self
      v.scrollView.scrollEnabled = false
      v.scrollView.bounces = false

      v.loadRequest(NSURLRequest.requestWithURL(NSURL.fileURLWithPath(NSBundle.mainBundle.pathForResource('index', ofType: 'html', inDirectory: 'html'))))
      v
    end
  end

  def webView(inWeb, shouldStartLoadWithRequest: inRequest, navigationType: inType)
    true
  end
end 
```

* * *

作为旁注，您真的不需要`:screen_title`访问器。只需在加载时执行此操作：

```
open GalleryDetailScreen.new(title: @data[indexPath.row][:title]), hide_tab_bar: true 
```

# parsing - 如何使用php在自己的ini配置文件中添加更新和删除配置？

> ID：15134336
> 
> 赞同：0
> 
> 时间：2013-02-28T11:26:30.777
> 
> 标签：parsing, php, ini

我创建了自己的自定义 config.ini 文件，我想在其中包含一组配置，用户可以使用现有配置添加新的 ini 配置，他们可以从 ini 文件中删除特定配置。

[section_one] 测试 = abc

[section_two] and_so=on

......等。目前我可以使用 parse_ini_file() 函数解析ini配置并获取数组格式。我需要根据用户请求更新现有配置。如果有人有任何想法，请发表。

在此先感谢，桑乔伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:36:00.447

你可以这样做。一个样品

// 传递要更新的数组

```
function update_config($myConfig) {
  $myConfig = json_encode($myConfig);
  $fp = fopen('my_config.ini', 'a');
  fwrite($fp, $myConfig);
  return 'success';
} 
```

// 需要时更新配置

```
$myConfig = array();
$myConfig['section_1'] = "a";
$myConfig['section_2'] = "b";
$myConfig['section_3'] = "c";
echo update_config($myConfig) 
```

# java - 登录后 JSF 2.0 重定向到 index.jsf

> ID：15134340
> 
> 赞同：3
> 
> 时间：2013-02-28T11:26:40.403
> 
> 标签：java, jsf-2, jboss6.x, jaas

我们有一个基于 JSF (2.0) 的 Web 应用程序，在 JBoss 6.1 上运行。我们在 JAAS 中使用基于 FORM 的身份验证。

一些用户将“admin/editUser.jsf”之类的链接添加到他们的书签中。如果用户直接访问此页面（不使用应用程序内的导航），此页面将无法正常工作。

问题是：有没有办法在登录后将用户重定向到 index.jsf 页面，独立于请求的 url？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T13:08:06.103

那是不可能的。

如果您使用的是 Servlet 3.0（Tomcat 7 / Glassfish 3 / JBoss 6 / 等），那么最好的办法是使用编程登录`HttpServletRequest#login()`而不是 JAAS 表单。

所以，而不是

```
<form action="j_security_check" method="post">
    ...
    <input type="submit" />
</form> 
```

利用

```
<h:form>
    ...
    <h:commandButton value="Login" action="#{bean.login}" />
</h:form> 
```

和

```
public String login() {
    // ...

    request.login(username, password);

    // ...

    return "index.jsf?faces-redirect=true";
} 
```

### 也可以看看：

*   [使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)（第 2 部分）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T11:48:20.893

您可以使用导航规则，在提交登录表单后重定向用户，这是一个示例： [http ://www.mkyong.com/jsf2/jsf-form-action-navigation-rule-example/](http://www.mkyong.com/jsf2/jsf-form-action-navigation-rule-example/)

# javascript - 有什么方法可以阻止 ExpressJS 为静态资源发送 Set-Cookie 标头？

> ID：15134341
> 
> 赞同：1
> 
> 时间：2013-02-28T11:26:54.857
> 
> 标签：javascript, cookies, express

我有一个问题，Chrome 没有发送带有某些请求的 cookie（图像 - 可能是由于我如何通过 JavaScript 加载它们）。它们有很多，Express 正在为它们中的每一个创建一个单独的会话。这意味着单个页面加载可以设置 50 个左右的会话。

是否有停止静态资源请求在 Express 3 中设置新会话的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:29:54.660

尝试将提供静态资源的中间件移到会话中间件之前：

```
// static first
app.use(express.static(...));

// sessions after
app.use(express.session(...)); 
```

# facebook - FB.ui 发送发送对话框

> ID：15134354
> 
> 赞同：0
> 
> 时间：2013-02-28T11:28:04.353
> 
> 标签：facebook, facebook-graph-api

我有一个 iframe，其中包含如下所示的链接：

```
<a href="javascript:void(0)" onclick="FB.ui({method: 'send', picture: pic, name: name, description : description , to: [xxxxxxxxxx],link:'http://link.com'}, function(response) {if (response) {alert('cool!')}})>Click me</a> 
```

关于如何使 FB.ui 发送对话框不在 iframe 中而是在父窗口中弹出的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:12:34.000

FB.ui 有一个“显示模式”，将其设置为您想要的。有关更多详细信息，请查看 [http://developers.facebook.com/docs/reference/dialogs/#display](http://developers.facebook.com/docs/reference/dialogs/#display)

# java - 在 MS-SQL 中存储字节数组

> ID：15134357
> 
> 赞同：2
> 
> 时间：2013-02-28T11:28:07.880
> 
> 标签：java, sql-server

我在从 ms sql 数据库恢复字节数组时遇到问题，有人可以帮我吗？

我有一个名为***sec***的表的数据库，它有两个属性**'ID_uzivatele' - varchar(20)**和**'salt' - varbinary(50)**。我想将 a 存储`byte[] salt`在此表中，然后将其恢复回`byte[] receivedSalt`，但如果我比较两个字节数组，它不等于：

```
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class test {
    public static void main(String[] args) {
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection conn = DriverManager.getConnection("jdbc:odbc:JavaProject");

            byte[] salt = generateSalt();

            PreparedStatement insert = conn.prepareStatement("INSERT INTO sec VALUES ('id001', ?)");
            insert.setBytes(1, salt);
            insert.executeUpdate();
            insert.close();
            System.out.println("values are succesfully inserted to database");

            Statement select = conn.createStatement();
            ResultSet rs = select.executeQuery("SELECT salt FROM sec WHERE ID_uzivatele = 'id001'");
            rs = select.getResultSet();

            try {
                while (rs.next()) {
                    byte[] receivedSalt = rs.getBytes("salt");
                    if (salt.equals(receivedSalt)) System.out.println("match");
                    else System.out.println("no match");
                }
            }
            finally {
                rs.close();
                select.close();
            }

        } catch (ClassNotFoundException | SQLException | NoSuchAlgorithmException e) {
            e.printStackTrace();
        }
    }

    public static byte[] generateSalt() throws NoSuchAlgorithmException {
        // VERY important to use SecureRandom instead of just Random
        SecureRandom random = SecureRandom.getInstance("SHA1PRNG");

        // Generate a 8 byte (64 bit) salt as recommended by RSA PKCS5
        byte[] salt = new byte[8];
        random.nextBytes(salt);

        return salt;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:53:23.320

好的，我明白了，我使用了错误的比较方法：

`if (salt.equals(receivedSalt)) System.out.println("match");`

所以它适用于这个：

`if (Arrays.equals(salt, receivedSalt)) System.out.println("match");`

# java - 从 URLConnection 的 getInputStream() 访问第二次 - > 504 异常

> ID：15134359
> 
> 赞同：1
> 
> 时间：2013-02-28T11:28:09.850
> 
> 标签：java, jsp, url, httpurlconnection

访问第二次从 URLConnection 获取输入流时出现 504 异常。当我在访问特定 url 时重新启动我的系统时，它运行良好，但是在第二次访问时它会引发错误。

笔记 ：

```
Using Tomcat 6, Java, JSP 
```

代码如下：

```
 OutputStream outStream = null;
    URLConnection uCon = null;

    InputStream is = null;
    try {
        URL Url;
        byte[] buf;
        int ByteRead, ByteWritten = 0;
        Url = new URL("www.sample.com/download/file.xml");
        outStream = new BufferedOutputStream(new FileOutputStream("/home/temp/myfile.xml"));

        uCon = Url.openConnection();
        is = uCon.getInputStream();
        buf = new byte[size];
        while ((ByteRead = is.read(buf)) != -1) {
            outStream.write(buf, 0, ByteRead);
            ByteWritten += ByteRead;
        }
        System.out.println("Downloaded Successfully.");
        is.close();
        outStream.close();
    } catch (Exception e) {
        System.out.println("Required File is not there  "+e.getMessage());            
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:14:04.483

一旦你阅读了流，你就已经阅读了流。您不能多次重新读取流，而不调用`mark()`和`reset()`方法，并且`InputStream`您正在使用的类的实现应该首先支持这一点。

除此之外：

*   您的 try-catch 语句需要：
    *   要捕获正确的异常，而不仅仅是 throw `Exception`，而是 -- `IOException`、`URLException`或任何相关的（如果您删除`catch (Exception e)`块，您的 IDE 会为您推荐/修复此问题）。
    *   `finally`检查流是否不为空并关闭它们的块。
*   你的方法应该抛出一个 IOException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:44:04.763

也许您没有以正确的方式关闭输入流或输出流。始终使用

```
finally { 
    is.close(); 
    outputStream.close()
} 
```

# jquery - jquery 更新验证码

> ID：15134360
> 
> 赞同：0
> 
> 时间：2013-02-28T11:28:13.693
> 
> 标签：jquery, asp.net-mvc, razor

我试图用 js 和 ASP.NET MVC3 razor 更新验证码。我找到了这个解决方案：查看：

```
<div id ="CaptchaDiv"> <img alt="Captcha" id="Captchaimg" src="@Url.Action("GetCaptcha")" style="" /></div>  <input type="button"  value="Refresh" onclick=" return GetCaptcha()" /> 
```

控制器：

```
public ActionResult GetCaptcha ()
        {
            FileContentResult img = null;
            int res = 0;
            MemoryStream mem = Metods.CaptchaImage( out res);
            Session["Captcha"] = res;
          img = this.File(mem.GetBuffer(), "image/Jpeg");
            return img;
        } 
```

JS：

```
function GetCaptcha()
 {
     $('Captchaimg').attr('src', '/Account/GetCaptcha?' + new Date().getTime());
 } 
```

但是：它不起作用。JS 运行成功。但控制器动作不运行。怎么了？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:35:52.520

我认为您的选择器`$('Captchaimg')`一定是错误的。如果你使用 id，它应该是`$('#Captchaimg')`.

还有什么会触发这个动作？我会使用：

```
$('#Captchaimg').click(function(){
    $(this).attr('src', '/Account/GetCaptcha?' + new Date().getTime());
}); 
```

而且我会将id更改为小写。

# java - 如何只为他的父母制作 JDialog onTop？

> ID：15134361
> 
> 赞同：4
> 
> 时间：2013-02-28T11:28:16.717
> 
> 标签：java, swing, modal-dialog, jdialog

可以说，我们有几个`JFrame`窗口同时可见，并且每个窗口都会`JDialog`出现。当我们的窗口处于级联模式和对话框`setAlwaysOnTop`时，`true`所有对话框都将在最后一个窗口中可见。

我只想将 Dialog 组件与其所有者相关联，这样当您在 Frames 之间切换时，您只会在顶部看到一个对话框，并且在单击框架时不会丢失此对话框。

对话框有这样的构造函数：

```
setAlwaysOnTop(true);
setModal(false); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:02:12.397

```
How to make JDialog onTop only for his parent? 
```

*   [setParent 在构造函数中正确](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Dialog,%20boolean%29)

*   必须使用 `setModalityType`fe`ModalityType.DOCUMENT_MODAL` `ModalityType.APPLICATION_MODAL`而不是`setModal`

*   `setModal``intialized`对/ `is parent for`this的容器有效`JDialog`

*   不要使用多个`JFrame`，`JDialog`而是使用，将此容器重用于另一个操作

例如

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SuperConstructor extends JFrame {

    private static final long serialVersionUID = 1L;

    public SuperConstructor() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setPreferredSize(new Dimension(300, 300));
        setTitle("Super constructor");
        Container cp = getContentPane();
        JButton b = new JButton("Show dialog");
        b.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent evt) {
                FirstDialog firstDialog = new FirstDialog(SuperConstructor.this);
            }
        });
        cp.add(b, BorderLayout.SOUTH);
        JButton bClose = new JButton("Close");
        bClose.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent evt) {
                System.exit(0);
            }
        });
        add(bClose, BorderLayout.NORTH);
        pack();
        setVisible(true);
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                SuperConstructor superConstructor = new SuperConstructor();
            }
        });
    }

    private class FirstDialog extends JDialog {

        private static final long serialVersionUID = 1L;

        FirstDialog(final Frame parent) {
            super(parent, "FirstDialog");
            setPreferredSize(new Dimension(200, 200));
            setLocationRelativeTo(parent);
            setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            JButton bNext = new JButton("Show next dialog");
            bNext.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    SecondDialog secondDialog = new SecondDialog(parent, false);
                }
            });
            add(bNext, BorderLayout.NORTH);
            JButton bClose = new JButton("Close");
            bClose.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    setVisible(false);
                }
            });
            add(bClose, BorderLayout.SOUTH);
            pack();
            setVisible(true);
        }
    }
    private int i;

    private class SecondDialog extends JDialog {

        private static final long serialVersionUID = 1L;

        SecondDialog(final Frame parent, boolean modal) {
            //super(parent); // Makes this dialog unfocusable as long as FirstDialog is visible
            setPreferredSize(new Dimension(200, 200));
            setLocation(300, 50);
            setModal(modal);
            setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            setTitle("SecondDialog " + (i++));
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            JButton bClose = new JButton("Close");
            bClose.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    setVisible(false);
                }
            });
            add(bClose, BorderLayout.SOUTH);
            pack();
            setVisible(true);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:22:56.837

在[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html)`JDialog`中，构造函数之一`JDialog(Dialog owner, boolean modal)`意味着您可以创建一个对话框并指定父容器以及模态。在 modal 部分，将其设置为 true 意味着此对话框将是模态的，并且在显示对话框时您无法访问父窗口。

但同样，您可以使用该`setModal()`方法来完成相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T13:02:52.657

我设法解决了这个问题，构建了一个可以完成这项工作的焦点侦听器。然后，您可以将此侦听器设置为您希望对话框在关闭之前始终可见的窗口。这对我有用：

```
public class WindowFocusListenerDialogFocus implements WindowFocusListener {
    private JFrame _dialogFrame;

    public WindowFocusListenerDialogFocus(JFrame dialogFrame) {
        _dialogFrame = dialogFrame;
    }

    @Override
    public void windowLostFocus(WindowEvent e) {
        System.out.println("Focus lost!");
    }

    @Override
    public void windowGainedFocus(WindowEvent e) {
        System.out.println("Focus gained!");
        _dialogFrame.toFront();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T13:21:08.277

只需设置`Model`true 和 Just 设置`Relativelocation(parent);`，不要`setontop(true)`用于 JDialog。

然后如果你重新打开那个时间，你每次都会得到对话框。但是当你拖动父框架时会有所不同。

# html - 嵌套 div，每个 div 都有图像，并排显示图像

> ID：15134362
> 
> 赞同：0
> 
> 时间：2013-02-28T11:28:16.647
> 
> 标签：html, css

使用嵌套 div，每个 div 都有一个背景图像，我希望图像并排

我试图把星星并排。这是我的 html & css 代码

```
<body>
  <div class="rate-stars">

    <div class"star" id="s5"><pre> </pre>
        <div class"star" id="s4"><pre> </pre>
            <div class"star" id="s3"><pre> </pre>
                <div class"star" id="s2"><pre> </pre>
                    <div class"star" id="s1"><pre> </pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
       </div>

</body>
</html> 
```

我的 CSS：

```
.star
{
background-image: url("star-off.png");
float: left;
border: 0px;
width: 20px;
height: 20px;
margin: 0px;
padding: 20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:43:01.113

[演示](http://jsfiddle.net/wNVBS/)

你的第一个问题是你`=`在所有的课堂作业中都错过了：

```
 <div class"star"
          ^ missing = 
```

修复了这些，这个 CSS 会做到：

```
.star
{
    background-image: url("star-off.png");
    background-repeat:no-repeat;
    width: 20px;
    height: 20px;
    margin-left:25px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:36:36.943

您可以执行以下操作：

HTML 可以写成：

```
<div id="rate-stars">

<img id="star1" src="img/star1.png">
    <img id="star2" src="img/star2.png">

</div> 
```

CSS：

```
 #star1 {
      left: 20px;
      position: absolute;
      top: 100px;
     }
    #star2 {
      left: 60px;
      position: absolute;
      top: 100px;
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:37:11.013

试试这个 CSS

```
.star
{
background-image: url("star-off.png") no-repeat top left;
border: 0px;
padding-left: 20px;
height: 20px;
margin: 0px;
} 
```

# msbuild - heatdirectory 目录 动态

> ID：15134363
> 
> 赞同：1
> 
> 时间：2013-02-28T11:28:16.500
> 
> 标签：msbuild, wix

我想向我的 in添加一个`HeatDirecotry`任务，但我需要 Directory 属性 - 源路径 - 将是一个变量 - 一个预处理器变量，所以我可以动态地提供它。`wixproj``Visual Studio`

谁能告诉我该怎么做？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:15:44.520

尝试以下卸载您的项目，然后在 .wixproj 文件中添加以下代码

```
 <Target Name="BeforeBuild">
         <HeatDirectory DirectoryRefId="INSTALLFOLDER" 
                        OutputFile="Source.wxs" 
                        Directory="C:\Users\aaa\Desktop\ComponentsFiles" 
                       SuppressRootDirectory="true" 
                      ToolPath="$(WixToolPath)" AutogenerateGuids="true" 
                   ComponentGroupName="SourceComponentGroup" 
                   PreprocessorVariable="var.SourcePath">                             
           </HeatDirectory>
         </Target> 
```

然后重新加载项目。在项目属性 SourcePath=C:\Users\aaa\Desktop\ComponentsFiles 的 buils 标记内为预处理器变量添加以下文件

# makefile - makefile 中间规则特定

> ID：15134369
> 
> 赞同：1
> 
> 时间：2013-02-28T11:28:24.567
> 
> 标签：makefile

一个makefile通过一个中间文件从另一个文件生成一个文件并自动删除中间文件：

```
.INTERMEDIATE $(B_FILES)

%.b : %.a
    a_to_b $<

%.c : %.b
    b_to_c $<

all: $(A_FILES) 
```

以上是一个简化的示例——它生成一个 .c 文件并删除中间的 .b 文件。如果专门制作，可以生成并保留中间 .b 文件：

```
$ make my_file.b 
```

但是，通过添加规则来生成中间文件：

```
b_files: $(B_FILES) 
```

可以制作所有中间文件：

```
$ make b_files 
```

但是，make 在生成 .b 文件后会删除它们，因为它们被列为中间文件。使用此特定目标时，是否可以防止 make 删除它们？

我认为答案需要在 b_files 规则中重新定义 .INTERMEDIATE 但我不确定是否可以在特定规则中重新定义目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:07:16.377

尝试使用**.PRECIOUS**或**.SECONDARY**代替，如此[处](https://stackoverflow.com/questions/5426934/why-this-makefile-removes-my-goal)所述。如果您需要有条件地执行此操作，您可以使用**MAKECMDGOALS**来检查特殊目标：

```
ifeq ($(MAKECMDGOALS),b_files)
  .SECONDARY: $(B_FILES)
endif 
```

# iphone - 将 Web 应用程序添加到主屏幕

> ID：15134375
> 
> 赞同：6
> 
> 时间：2013-02-28T11:28:36.927
> 
> 标签：iphone, ios, ipad, web-applications

我有一个位于 www.xclo.mobi 的网络应用程序

我注意到，在查看其他 IOS 网络应用程序时，他们有一个指向浏览器菜单的图像，告诉人们在他们的设备上安装网络应用程序，一旦用户查看该页面就会出现。

图片通常显示：*“在您的设备上安装此网络应用程序：点击箭头，然后点击**‘添加到主屏幕’** ”*

![示例图片](../Images/beb7aa1cfbc9555ebc06f285414e897a.png)

有人可以告诉我如何添加这个吗？为了得到这个，我需要在我的 IOS 主页中添加什么代码？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:46:55.917

我刚刚对答案进行了建议的编辑，告诉我它不再起作用了。首先，建议的编辑用于编辑答案，如果它不起作用并且您知道如何修复它，请发送更新的修复，如果您不知道如何修复它，请发表评论并提供更多信息，而不仅仅是“它不起作用”。

有一个新的 add2home 版本 [http://cubiq.org/add-to-homescreen-goes-3](http://cubiq.org/add-to-homescreen-goes-3)

源代码在这里： [https ://github.com/cubiq/add-to-homescreen](https://github.com/cubiq/add-to-homescreen)

新版本的基本用法

```
<head>
<title>Add To Home</title>
...
<link rel="stylesheet" type="text/css" href="../../style/addtohomescreen.css">
<script src="../../src/addtohomescreen.js"></script>
<script>
addToHomescreen();
</script>
</head> 
```

使用此脚本[Cubiq 添加到主屏幕](http://cubiq.org/add-to-home-screen)

用法，将文件 add2home.js 和 add2home.css 复制到您拥有 ipad.html 的文件夹中，然后编辑您的文件`<head>`以包含以下内容：

```
<head> 
<link rel="stylesheet" href="add2home.css"> 
<script type="application/javascript" src="add2home.js"></script> 
</head> 
```

# android - Android以特定顺序膨胀列表视图

> ID：15134378
> 
> 赞同：0
> 
> 时间：2013-02-28T11:28:41.230
> 
> 标签：android, android-listview

设想-

```
itemnaem  A
itemnaem  A
itemnaem  B
itemnaem B
itemnaem  B
itemnaem  C
.
.
.
itemnaem  c 
```

我有一个包含 50 个项目的数组列表。在这 50 件物品中，10 件属于 A 类，20 件属于 B 类，其余属于 C 类。

我想膨胀一个列表视图，其中所有类型 A 的项目首先出现，然后是 B 类型，然后是 C 类型。

从数组列表中，我能够将项目分成 3 个不同的列表 A、B 和 C。

但我面临按顺序显示它们的问题。

```
if(aList!=null && aList.size()>0 && countA!=0){
                holder.txt.setText(aList.get(position));    
                holder.img.setImageResource(R.drawable.icnA);   
                    countA--;           
            }
            else {
                        if(countA==0 && bList!=null && bList.size()>0 && countB!=0){                        
                        holder.txt.setText(bList.get(position-aList.size()));
                        holder.img.setImageResource(R.drawable.icnB);
                        countB--;
                        }
                    else{
                        if(countA==0 && countB==0 && arr!=null && arr.size()>0){
                                holder.txt.setText(c.get(position-aList.size()-bList.size()));
                                }
                    }
            } 
```

`countA`是 A `countB`的列表大小 是 B 的列表大小

在我使用过的适配器的 getcount 方法中

```
public int getCount() {
        return c.size()+AList.size()+BList.size();

    } 
```

a list 和 b list 的问题它工作正常，但在 c list 中它给出了一个索引超出范围的异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:46:35.643

我想我已经找到了你需要的东西。在我向您展示的这个特定示例中，您需要为 sectionItem 和 EntryItem 实现单独的适配器。

假设您知道如何处理适配器和 ListItems（使用您自己的 item.xml 自定义），[这是一个关于如何制作部分和条目的完整教程。（解决方案 #2）](http://bartinger.at/listview-with-sectionsseparators/)

在本教程中，还给出了 xml 布局的代码，但您可以为部分和条目项制作自己的自定义布局。它非常简单明了。

所以它会像这样脱落： ![在此处输入图像描述](../Images/3cbb6dcd43797a53f692b5583b66c41c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:06:31.643

终于找到解决办法了......

创建 linekedHashSet D

```
D.addAll(a);
D.addAll(b);
D.addAll(c); 
```

数组列表 E

```
E.addAll(D); 
```

并使用 d 来扩充列表。保持顺序:)

# javascript - 使用 $(this).scrollWidth 获取实际宽度非常慢

> ID：15134381
> 
> 赞同：4
> 
> 时间：2013-02-28T11:28:49.510
> 
> 标签：javascript, jquery, performance, scroll

我正在休耕

```
$('.Row .Cell .Text').each(function (index, item) {
                if (this.scrollWidth > $(this).parent().width())
                    $(this).next().show();

                else $(this).next().hide();
}); 
```

当我没有分配 $('.Row .Cell .Text') 时，一切都很好。但是如果我分配了行和单元格，则上面的代码尤其是

```
this.scrollWidth 
```

需要分配时间。

知道我怎样才能得到同样的东西但更快吗？

添加了一个小提琴[jsFiddle](http://jsfiddle.net/Ovi123/nYSDy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:06:41.123

似乎大部分性能影响实际上来自于此：

$(this).next().hide();

起初，我认为您可能会因为 jquery 如何处理由元素之间的空格创建的额外文本节点而受到性能影响，所以我尝试了：

this.nextSibling.nextSibling.style.display = 'none';

这并没有真正帮助问题，所以似乎简单地在这么多元素上设置样式非常慢。为了解决这个问题，您可以考虑将默认样式设置为您期望的最常见情况，然后只对其他情况作出反应。对于您发布的小提琴示例，这将导致：

CSS：

```
.Icons {
  display: none;
} 
```

新JS：

```
$('.Row .Cell .Text').each(function (index, item) {
                if (this.scrollWidth > $(this).parent().width())
                    $(this).next().show();
}); 
```

附录：事实证明，为所有这些元素添加一个类要快一点，所以你可以这样做[http://jsfiddle.net/XuhaT/1/](http://jsfiddle.net/XuhaT/1/)：

CSS：

```
#vTable {
    width:800px;
}
.Icon {
    display: none;
}
.visible.Icon {
    display: block;
} 
```

JS：

```
$("#countOfItems").html($('#vTable .Row ').length);
var startDate = new Date();
$('.Row .Cell .Text ').each(function (index, item) {
    if (this.scrollWidth > $(this).parent().width()) $(this).next().addClass('visible');
});
var endDate = new Date();

$("#claculationTime").html(endDate - startDate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T17:07:33.947

我猜你正试图隐藏`.Icon`if `.Text`width > `.Cell`。见下面的方法，

我尝试使用`filter`.

**CSS**

```
/*set overflow for .Text - This lets you calculate the actual width of .Text*/
.Text { overflow: hidden; } 

/* Hide .Icon by default and show only if .Text width < .Cell width*/
.Cell .Icon { display: none; } 
```

**JS**

```
$('.Row .Cell .Text').filter(function (i, el) {    
    return el.scrollWidth <= this.parentNode.scrollWidth; //Thanks @nicoabie
}).next().show(); 
```

**演示：http:** [//jsfiddle.net/nYSDy/4/](http://jsfiddle.net/nYSDy/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T17:48:39.943

您可以使用此比较器将 Brandon 的回答速度提高大约 6 倍

```
if (this.scrollWidth > this.parentNode.scrollWidth) 
```

希望能帮助到你！

# iphone - 如何扩展 MKPointAnnotation 并向其添加属性

> ID：15134382
> 
> 赞同：0
> 
> 时间：2013-02-28T11:28:50.077
> 
> 标签：iphone, ios, mkmapview, mapkit

我正在尝试扩展 MKPointAnnotation 并为名为 dealLink 的 NSString 添加一个属性。

我以为我设置正确，但我现在收到此错误：

```
 Property 'dealLink' not found on object of type 'MKPointAnnotation *' 
```

这是我在名为 MapOffersViewController.m 的视图控制器中的代码：

```
#pragma mark - Populate Map
- (void)populateMap:(MKMapView*)map withDeals:(NSArray*) deals
{
    NSLog(@"Deals " );
    for (NSDictionary *currentDeal in deals) {
        CLLocationCoordinate2D  ctrpoint;
        ctrpoint.latitude = [[[currentDeal objectForKey:@"coords"] objectForKey:@"lat"] doubleValue];
        ctrpoint.longitude =[[[currentDeal objectForKey:@"coords"] objectForKey:@"lng"] doubleValue];

        MKPointAnnotation  *dealAnnotation   = [[MKPointAnnotation  alloc] init];

        dealAnnotation.coordinate = ctrpoint;
        dealAnnotation.title = [currentDeal objectForKey:@"vendor"];
        **dealAnnotation.dealLink = [currentDeal objectForKey:@"link"];**

        NSDictionary *currDict = @{
        @"EUR": @"€",
        @"GBP": @"₤",
        @"USD": @"$",
        @"BRL": @"R$"
        };

        NSString *currName = [currentDeal objectForKey:@"currency"];
        NSString *currency = [currDict objectForKey:currName];

        dealAnnotation.subtitle = [NSString stringWithFormat:@"%@%i",currency,[[currentDeal objectForKey:@"price"] integerValue ]];

        NSLog(@"current deal id is %@",[currentDeal objectForKey:@"id"]);

        [map setDelegate:self];
        [map addAnnotation:dealAnnotation];
    }
} 
```

我正在导入这个名为 MapAnnotation.h 的类：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MapAnnotation : MKPointAnnotation
{
    NSString *title;
    NSString *subtitle;
    NSString *dealLink;
    CLLocationCoordinate2D coordinate;
}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic, retain) NSString *dealLink;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithTitle:(NSString *)ttl subTitle:(NSString *)subttl dealLink:(NSString *)dealLnk andCoordinate:(CLLocationCoordinate2D)c2d;

@end 
```

它是.m：

```
#import "MapAnnotation.h"

@implementation MapAnnotation

@synthesize title,subtitle,dealLink,coordinate;

- (id)initWithTitle:(NSString *)ttl subTitle:(NSString *)subttl dealLink:(NSString *)dealLnk andCoordinate:(CLLocationCoordinate2D)c2d {
    title = ttl;
    subtitle = subttl;
    dealLink = dealLnk;
    coordinate = c2d;

    return self;
}

@end 
```

谢谢你的帮助

我在下面使用了克雷格的答案和这个附加代码来让它工作：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {

    NSLog(@"callout tapped from del method %@", dealUrl);

   [[UIApplication sharedApplication] openURL:[NSURL URLWithString:dealUrl]];

}

- (void)mapView:(MKMapView *)mapView1 didSelectAnnotationView:(MKAnnotationView *)mapView2
{
    MapAnnotation *annotation = mapView2.annotation;
    NSString *temp = annotation.dealLink;

    dealUrl = temp;

 //   NSLog(@"temp is %@", temp);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:53:19.067

您正在创建一个 MKPointAnnotation 并尝试访问仅在 MapAnnotations 上的 dealLink。您需要创建一个 MapAnnotation

```
....
ctrpoint.longitude =[[[currentDeal objectForKey:@"coords"] objectForKey:@"lng"] doubleValue];

MapAnnotation  *dealAnnotation   = [[MapAnnotation  alloc] init];

dealAnnotation.coordinate = ctrpoint;
.... 
```

# msbuild - 未为项目设置 OutputPath 属性

> ID：15134384
> 
> 赞同：90
> 
> 时间：2013-02-28T11:28:54.867
> 
> 标签：msbuild, jenkins

构建我的 Jenkins/MSBuild 解决方案给了我这个错误

```
c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(483,9): error : 
The OutputPath property is not set for project '<projectname>.csproj'.  Please check to
make sure that you have specified a valid combination of Configuration and Platform 
for this project.  Configuration='Latest'  Platform='AnyCPU'.  You may be seeing this 
message because you are trying to build a project without a solution file, and have
specified a non-default Configuration or Platform that doesn't exist for this project. 
[C:\<path>\<projectname>.csproj] 
```

有任何想法吗？

**编辑**

我的 .csproj 文件中有这个

```
 <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Latest|AnyCPU'">
    <OutputPath>bin\Latest\</OutputPath>
  </PropertyGroup> 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2017-07-25T14:04:59.377

我已经弄清楚它是如何工作的（不改变 VS2013/2015 中的 sln/csproj 属性）。

1.  如果要构建 .sln 文件：
    1.  `/p:ConfigurationPlatforms=Release /p:Platform="Any CPU"`
2.  如果要构建 .csproj 文件：
    1.  `/p:Configuration=Release /p:Platform=AnyCPU`
        1.  注意`"Any CPU"`vs`AnyCPU`
3.  检查代码分析、fxcop、测试覆盖率（NCover）目标以及 MSBUILD 是否应正确定位。在我的情况下：
    1.  `C:\Windows\Microsoft.NET\Framework64\v4.0.30319` 但它可能会有所不同，因为您可以看到微软提供了 6 个 cmd 选项来构建代码库::AMD（带有交叉 plt、x86 和 x64 选项）和 Windows（交叉、x86、x64）以及默认情况下发生代码开发时JIT（可以是 PreJIT ngen.exe、econoJIT）

我认为使用 power shell + msbuild 可以处理更多的故障排除。可能对某人有帮助...

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-02-28T11:51:47.300

在文本编辑器中打开你的 csproj，看看你是否有一个属性组部分，应该看起来像这样：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Latest|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Latest\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
  </PropertyGroup> 
```

你有“最新”的构建配置吗？如果没有将上述部分添加到 csproj。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-04-20T12:59:19.660

正如 perlyking 所提到的，而不是编辑 csproj XML 以下对我有用。这是我使用的步骤。

1.  打开项目属性。
2.  选择构建选项卡。
3.  在输出部分下，检查是否设置了输出路径。（如果没有设置一个，保存项目，它应该可以工作）。
4.  如果已设置，请单击输出路径的“浏览...”按钮。
5.  当文件夹选择对话框打开时，在文件浏览器中向上导航一级，然后重新选择输出文件夹并单击“选择文件夹”按钮。
6.  保存项目属性，它应该可以工作。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-10-08T17:53:50.217

为了补充@James所说的，我发现如果我查看VS2013中的项目编译属性，*则*指定了构建输出路径。但是当我`.csproj`直接检查文件时，`OutputPath`相关构建配置的元素丢失了。因此，在 VS 中，我只是简单地对输出路径进行了小幅编辑，然后将其保存，然后将值踢到项目文件中，然后我就可以构建了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-19T16:21:40.297

当我遇到此错误时，我正在使用 MSBuild 构建多个 .sln 文件，并且还添加了一个新步骤来构建 .csproj 文件。

@Saurabh 的[回答](https://stackoverflow.com/a/45305693/4450733)突出了问题的根源。但是，在修复它时，添加`/p:Platform=AnyCPU`到 MSBuild Arguments 部分并没有修复它。我实际上需要在构建步骤中更新平台值。

所有其他构建步骤都使用`$(BuildPlatform)`变量值（恰好是“任何 cpu”，其中有一个空格）。

（如果我一直在构建多个 .csproj 文件，我可能会为 AnyCPU 平台创建第二个变量。）

[![Visual Studio 构建步骤的屏幕截图](../Images/e6d074879162a29542ca9039faa6574e.png)](https://i.stack.imgur.com/V8ZUk.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-11T21:14:28.883

仅在发布 Web 项目时出现此错误。在设置发布配置文件时，我错误地选择了错误的构建配置。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-20T10:53:57.953

在我的情况下，发生此错误是因为输出文件夹包含一个点以使其相对于当前目录。通过删除点解决了问题。

违规行为`Build output path`是：

`.\bin\Output`

通过将其更改为解决了该问题

`bin\Output`

构建输出路径可以在项目属性的选项卡中找到，每个和`Build`的组合都有不同的路径。`Configuration``Platform`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-11T07:39:04.037

我有同样的问题。我已经使用命令行更新了我的 Windows 平台。目前我已更新到 windows@5.0.0 版本。然后你需要搜索文件名“SQLite3.UWP.vcxproj”。尝试将“v141”更改为“v140”。目前我正在使用 Visual Studio 2015 专业版。如果是 Visual Studio 2017，则无需更改 SQLite3.UWP.vcxproj 文件中的版本。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-12-20T17:26:06.600

刚刚在 MSBuild 中遇到了一些服务结构的问题。

第一步是右键单击每个受影响的项目并拉出它们的属性，选择构建选项卡，然后将平台目标设置为 x64。

第二步是进入配置管理器并将每个项目设置为也使用 x64 进行调试和发布。

这是针对 VS2017 项目的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-17T18:55:18.557

此错误具有误导性，可能是由其他问题引起的。检查整个消息：

```
The OutputPath property is not set for project 'myproject'.  Please check to make sure that you have specified a valid combination of Configuration and Platform for this project.  Configuration='myconfig'  Platform='AnyCPU'.  This error may also appear if some other project is trying to follow a project-to-project reference to this project, this project has been unloaded or is not included in the solution, and the referencing project does not build using the same or an equivalent Configuration or Platform. 
```

我的构建配置在 csproj 中缺少此节点：

```
<PlatformTarget>AnyCPU</PlatformTarget> 
```

尽管在下拉列表中说 AnyCPU 是选定的平台，但实际的 xml 并不存在。添加它修复了项目与它所引用的其他项目之间的不匹配。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-25T18:01:04.723

我在几个项目中遇到了同样的问题。向项目添加新配置后，PropertyGroup 被添加到项目文件的最后。

在所有其他配置 PropertyGroup 解决了问题之后，将 PropertyGroup 移动到右侧。

我希望这有帮助。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-24T17:31:45.513

我有一个稍微不寻常的 SLN/CSPROJ 文件排列：

我有项目文件：

*   A.csproj，配置为“Dev”和“Production”
*   B.csproj，配置为“Dev”和“Production”
*   C.csproj，A 和 B 使用的“通用”库，配置为“Dev”和“Production”

我有 SLN 文件：

*   AC.sln，配置为“Production”——jenkins 使用它来构建项目 A 和公共库
*   BC.sln，配置为“Production”——jenkins 使用它来构建项目 B 和公共库
*   ABC.sln，配置为“Dev” - VS 中的开发人员使用它来编写新代码，而不必不断打开不同的解决方案（这个答案是 55 项目解决方案的简化视图）

我对公共库进行了编辑并引入了对项目 A 的依赖。AC.sln 仍然会在 jenkins 中构建，但 BC.sln 给出了一个错误消息：

> 未为项目“A.csproj”设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='调试'平台='AnyCPU'。

最初令人费解是因为我们在任何项目中甚至都没有 Debug 配置；在文件中查找`Debug|`出现 0 次点击

人类开发人员在 VS 中使用的 ABC.sln 也可以正常构建。构建 BC.sln 给出了 A.dll 未找到的错误

当 C 依赖于 A 的循环不可解​​决问题被移除后，一切又开始工作了

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-09-20T20:15:21.017

对我来说，答案是修复**Build > Configuration Manager**中的所有项目。

如果您有一些名称或平台与解决方案配置不匹配的项目，您应该更改它以使它们都匹配。

[![在此处输入图像描述](../Images/99cee233c3e8474903355fcca93a628e.png)](https://i.stack.imgur.com/frumk.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-25T23:28:11.750

如果环境变量存在（就像在 HP 笔记本电脑上发生的那样）并且 MSBuild 的目标包含对另一个 Visual Studio 项目的引用，则会出现该项目的*OutputPath 属性未设置*错误消息。`Platform`

重命名平台环境变量后，我的构建现在可以工作了。

似乎该参数已`/p:Platform="Any CPU"`应用于目标解决方案，但并未“结转”到引用的项目。在我的例子中，错误消息表明引用的项目正在使用环境变量`Platform=MCD`。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-10-15T14:28:35.613

我有两个项目配置，`Debug`和`Release`. 使用`Release`构建时，它会抛出此错误。我发现的问题是，在`csproj`文件中，`Debug`配置靠近顶部，而`Release`配置一直在底部。

手动移动`Release`构建正下方的`Debug`构建修复它。

我假设我在设置构建配置时做错了什么，因为这感觉不像是我应该手动调整的东西。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-04T21:36:47.073

编辑项目的属性：确保“配置属性->常规->输出目录”不为空。注意，这里不叫 OutputPath。您可能可以从中间目录复制值。

# html - 如何对齐 3 个 div 左中右？

> ID：15134389
> 
> 赞同：9
> 
> 时间：2013-02-28T11:29:02.600
> 
> 标签：html, css

如何在无需定义显式大小的情况下将 3 个 div 对齐在一行中左中右？

左应与左边缘对齐，右边缘与右边缘对齐。

以下不起作用：

```
<div style="float: left;">
    left
</div>
<div style="float: right;">
    right
</div>
<div style="margin: 0 auto;">
    center
</div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T11:39:11.770

添加一个包装器`div`并给出`text-align:center`

**CSS**

```
.wrap{
        text-align:center
    } 
```

**HTML**

```
<div class="wrap">
<div class="left">
    left
</div>
<div class="right">
    right
</div>
<div class="center">
    center sdv dg sdb sdfbh sdfhfdhh h dfh
</div>
    </div> 
```

**[演示](http://jsfiddle.net/66fCm/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:33:21.967

```
<div style="width:100%;margin:0 auto; padding: 0">
     <div style=" float:left;width:32%;border: thin solid black">
         left
     </div>
     <div style=" float:left;width:32%;border: thin solid black">
         center
     </div>
     <div style=" float:left;width:32%;border: thin solid black">
          right 
     </div>
 </div>
 <div style="clear:both">
 </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T11:38:10.070

下面是一个如何通过以正确的顺序放置浮动来执行此操作的示例。

[jsFiddle 示例](http://jsfiddle.net/27hGs/4/)

```
<div class="square" style="float: left;">left</div>
<div class="square" style="float: right;">right</div>
<div class="square" style="margin:0 auto  !important;">center</div>

.square {
width:50px;
height:50px;
background-color:#ff0000;
text-align:center;
border: 1px solid #000;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:41:16.390

尝试这个

**CSS**

```
div{width:33%;} 
```

**HTML**

```
<div style="float: left;border:1px solid red;">
    left
</div>
<div style="float: right;border:1px solid green;">
    right
</div>
<div style="margin: 0 auto;border:1px solid blue;">
    center
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T11:45:12.810

在不了解内容和布局模式的情况下，实际上是不可能做到的。但作为一个起点，你可以试试这个：

HTML：

```
<div class="clearfix holder">
    <div class="column left">
        Some Contents Here...
    </div>
    <div class="column middle">
        Some Contents Here...
    </div>
    <div class="column right">
        Some Contents Here...
    </div>
</div> 
```

CSS：

```
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}
.clearfix:after {
    clear: both;
}
.clearfix {
    *zoom: 1;
}
.holder{
    text-align:center;
}
.column{
    display:inline-block;
    *display:inline;
    *zoom:1;
    width:auto;
}
.left{
    background-color:#ff0;
    float:left;
}
.middle{
    background-color:#f0f;
    margin:0 auto;
}
.right{
    background-color:#0ff;
    float:right;
} 
```

[演示](http://jsfiddle.net/7kH4u/)

# php - 是否可以在另一个中使用一个 php 扩展的功能？

> ID：15134390
> 
> 赞同：2
> 
> 时间：2013-02-28T11:29:02.500
> 
> 标签：php, c++

我想做一个 php C++ 扩展。是否可以在我的 PHP C++ 扩展中使用 redis 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:48:53.507

是的，您可以通过调用[`zend_call_method_with_0_params`](http://lxr.php.net/xref/PHP_TRUNK/Zend/zend_interfaces.h#43),[`zend_call_method_with_1_params`](http://lxr.php.net/xref/PHP_TRUNK/Zend/zend_interfaces.h#46)或[`zend_call_method_with_2_params`](http://lxr.php.net/xref/PHP_TRUNK/Zend/zend_interfaces.h#49)宏来调用 php 方法。例如，像这样：

```
zend_call_method_with_2_params(&this, ZF_G(ce_exception_ptr)->parent, NULL, ZEND_CONSTRUCTOR_FUNC_NAME, &parent_return_value, msg_zval, code_zval TSRMLS_CC); 
```

如果您需要调用具有超过 2 个参数的函数，请参阅我的问题：[zend_call_method_with_N_params](https://stackoverflow.com/questions/8586996/zend-call-method-with-n-params)

# android - Android + 如何中断 handler(run()) 的循环

> ID：15134392
> 
> 赞同：1
> 
> 时间：2013-02-28T11:29:03.850
> 
> 标签：android, handler

我有4节课，

1.  第一活动
2.  播放_1
3.  播放_2
4.  播放_3

onClick 中的一个按钮`FirstActivty`，我会随机进入剩下的三个活动。例如，在下面的代码中，我来到`Play3.class`...我已将 then 处理程序设置为运行 3 秒。我的问题是在`run()`3 秒的时间内，如果我点击`backButton`，它会转到`FirstActivity.class`3 秒后`run()`，它会再次进入随机循环（`Play_1`, `Play_2`, `Play_3`）。现在，我想永久转到`FirstActivity.class`仅当我单击 时`backButton`。我应该怎么办？

（注意：在完成`run()`三秒的时间后，我很高兴回到主屏幕。但是，在那段`run()`时间里，我只想中断循环并返回主屏幕。）

```
class listener implements OnClickListener {

    @Override
    public void onClick(final View v) {

        switch (v.getId()) {
            case R.id.play3_image1:
                bt1.setVisibility(View.GONE);
                bt2.setVisibility(View.GONE);
                bt3.setVisibility(View.GONE);
                bt4.setVisibility(View.GONE);
                bt5.setVisibility(View.GONE);
                bt6.setVisibility(View.VISIBLE);

                try {
                    new Handler().postDelayed(new Runnable() {

                        @Override
                        public void run() {
                            Random rand = new Random();
                            int x = rand.nextInt(3) + 1;

                            Intent intent = new Intent();

                            switch (x) {
                                case 1:
                                    intent.setClass(v.getContext(), Play_1.class);
                                    break;
                                case 2:
                                    intent.setClass(v.getContext(), Play_2.class);
                                    break;
                                case 3:
                                    intent.setClass(v.getContext(), Play_3.class);
                                    break;
                                default:
                                    break;
                            }
                            startActivity(intent);
                        }
                    }, 3000);
                } catch (Exception e) { e.printStackTrace(); }
            }

        @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {

            if(keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0 ){
                Intent i = new Intent(Play_3.this,Example.class);
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
            return super.onKeyDown(keyCode, event);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:57:49.357

Handler 对象提供了其他可以帮助您的 post 方法：

*   `postAtFrontOfQueue(Runnable r)`您可以发布一个可在下一个循环中执行的可运行文件。
*   `removeCallbacksAndMessages(Object token)`您可以删除给定的可运行文件或消息，或者使用参数`null`清除处理队列。

使用这些实用程序，您应该能够非常轻松地处理您的状态通道。

注意：由于您使用的是主线程循环器，因此不应在处理程序对象上调用 getLooper().quit()，因为这会停止您的应用程序（如果没有完全崩溃）。

# ios - 使用 FacebookSDK 从异步块返回值的方法

> ID：15134394
> 
> 赞同：3
> 
> 时间：2013-02-28T11:29:08.717
> 
> 标签：ios, objective-c, xcode, facebook-ios-sdk, xcode4.6

我想要做的是 Facebook iOS SDK 的 Facebook 包装器。基本上这个想法是我的 ViewController 除了显示 ex 什么都不做。我的朋友将通过一个简单的电话获得，例如

```
self.friends = [FacebookWrapper myFriends];
[self.tableView reloadData]; 
```

我的包装器 myFriends 方法应该是这样的

```
+ (NSArray *)myFriends
{
   __block NSArray *friends = nil;
   [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    if(FB_ISSESSIONOPENWITHSTATE(status)) {
    [FBRequestConnection startForMyFriendsWithCompletionHandler:^(FBRequestConnection *connection, id data, NSError *error) {
       CFRunLoopStop(CFRunLoopGetCurrent());
        if(error) {
            return;
        }
        NSArray *friendsData = (NSArray *)[data data];
        NSMutableArray *fbFriends = [NSMutableArray array];
        for(id friendData in friendsData) {
            Friend *friend = [Friend friendWithDictionary:friendData];
            fbFriends addObject:friend];
        }
        friends = [NSArray arrayWithArray:fbFriends];
    }];
    CFRunLoopRun();
    }
  }];
  return friends;
} 
```

问题在于 openActiveSessionWithReadPermissions 和 startForMyFriendsWithCompletionHandler 是异步块，因此该方法在块完成其任务之前返回。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:59:50.637

我过去创建了一个类似的包装器，我的方法是在调用我的包装器方法时传递一个“完成块”；一旦所有异步调用完成运行，就会触发这个完成块，它会接收您的方法在同步场景中返回的任何数据（在您的情况下，是朋友数组）。

举例说明-您可以将“myFriends”方法重新定义为：

`+ (void)myFriendsWithCompletionBlock:(void (^)(NSArray *friends))completionBlock;`

然后在实现中，就在该`friends = [NSArray arrayWithArray:fbFriends];`行之后，您将添加以下内容：

```
if (completionBlock != nil) {
    completionBlock(friends);
} 
```

...并删除最后的`return`语句。

最后，在您的视图控制器（或任何使用该方法的对象上，您将执行以下操作：

```
[FacebookWrapper myFriendsWithCompletionBlock:^(NSArray *friends){
    // do what you need to do with the friends array
}]; 
```

当然，这仍然是异步的——但是没有办法，因为这就是 Facebook SDK 的构建方式（而且，公平地说，这可能是最好的方法——等待请求完成同步会很糟糕！）

编辑：我注意到你也从包装方法返回，以防它失败；在这种情况下，您不会返回，而是执行以下操作：

```
if (completionBlock != nil) {
    completionBlock(nil);
} 
```

这将导致`friends`数组`nil`在您的完成块被调用时出现 - 然后您可以在那里处理该错误，但似乎适合您。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:37:34.853

如果你正在调度一个异步块，你可以`UIViewController`通过回调它来与你的子类进行通信：

```
[self someSelectorWithCallbackData:stuffWhichYouWantToGiveBack]; 
```

这将调用`self`以被块捕获，因此将按预期工作。从相关方法中，您可以根据需要刷新视图/重新加载 tableview/跳舞。

根据上下文，您可能需要`__block`范围`self`，例如

```
__block UIViewController *bsself = self; 
```

但是，如果您执行后者，请小心避免保留循环（构建和分析工具非常擅长指出这一点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-27T00:28:37.527

认为您需要使用协议@class Webservice；

```
@protocol WebserviceDelegate
@optional

-(void)webservice:(Webservice *)webservice didFetchPosts:(NSArray *)posts;
-(void)webservice:(Webservice *)webservice didFetchComments:(NSArray *)comments forPostID:(NSString *)postID launchComments:(BOOL)launch;
-(void)webservice:(Webservice *)webservice didLoginWithUser:(User *)user;
-(void)webservice:(Webservice *)webservice didVoteWithSuccess:(BOOL)success forObject:(id)object direction:(BOOL)up;

@end

@interface Webservice : NSObject {
    __weak id <WebserviceDelegate> delegate;
}
//Delegate
@property (weak) id <WebserviceDelegate> delegate;

-(void)getHomepage {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        NSURLResponse *response;
        NSError *error;

        // Create the URL Request
        NSMutableURLRequest *request = [Webservice NewGetRequestForURL:[NSURL URLWithString:@"https://www.hnsearch.com/bigrss"]];

        // Start the request
        NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

        //Handle response
        //Callback to main thread
        if (responseData) {
            NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSStringEncodingConversionAllowLossy];

            if (responseString.length > 0) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self parseIDsAndGrabPosts:responseString];
                });
            }
            else {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [delegate webservice:self didFetchPosts:nil];
                });

            }
        }
        else {
            dispatch_async(dispatch_get_main_queue(), ^{
                [delegate webservice:self didFetchPosts:nil];
            });
        }

    });
}

-(void)parseIDsAndGrabPosts:(NSString *)parseString {
    // Parse String and grab IDs
    NSMutableArray *items = [@[] mutableCopy];
    NSArray *itemIDs = [parseString componentsSeparatedByString:@"<hnsearch_id>"];
    for (int xx = 1; xx < itemIDs.count; xx++) {
        NSString *idSubString = itemIDs[xx];
        [items addObject:[idSubString substringWithRange:NSMakeRange(0, 13)]];
    }

    // Send IDs back to HNSearch for Posts
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        NSURLResponse *response;
        NSError *error;

        // Create Request String
        NSString *requestString = @"http://api.thriftdb.com/api.hnsearch.com/items/_bulk/get_multi?ids=";
        for (NSString *item in items) {
            requestString = [requestString stringByAppendingString:[NSString stringWithFormat:@"%@,", item]];
        }

        // Create the URL Request
        NSMutableURLRequest *request = [Webservice NewGetRequestForURL:[NSURL URLWithString:requestString]];

        // Start the request
        NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

        //Handle response
        //Callback to main thread
        if (responseData) {
            NSArray *responseArray = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingAllowFragments error:&error];

            if (responseArray) {
                NSMutableArray *postArray = [@[] mutableCopy];
                for (NSDictionary *dict in responseArray) {
                    [postArray addObject:[Post postFromDictionary:dict]];
                }

                NSArray *orderedPostArray = [self orderPosts:postArray byItemIDs:items];

                dispatch_async(dispatch_get_main_queue(), ^{
                    [delegate webservice:self didFetchPosts:orderedPostArray];

                    // Update Karma for User
                    if ([HNSingleton sharedHNSingleton].User) {
                        [self reloadUserFromURLString:[NSString stringWithFormat:@"https://news.ycombinator.com/user?id=%@", [HNSingleton sharedHNSingleton].User.Username]];
                    }
                });
            }
            else {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [delegate webservice:self didFetchPosts:nil];
                });

            }
        }
        else {
            dispatch_async(dispatch_get_main_queue(), ^{
                [delegate webservice:self didFetchPosts:nil];
            });
        }

    });
} 
```

# java - 请求发送成功，但没有回复。

> ID：15134395
> 
> 赞同：1
> 
> 时间：2013-02-28T11:29:11.780
> 
> 标签：java, jquery, spring, rest, post

我正在使用 jquery Ajax 向 java Restful Webservice 发送一个发布请求。请求已成功提交，但未返回任何响应。

jQuery代码

```
$.ajax({           
    type: "POST",
    url: "http://127.0.0.1:8080/Sampleprj/getData",
    data: "{\"result\": \"Hello\"}",
    crossDomain: true, 
    dataType: "json",
    success: function( data, textStatus, jqXHR) {
    },
    error: function(jqXHR, textStatus, errorThrown){    
    },
    beforeSend: function(jqXHR, settings){ 
    },
    complete: function(jqXHR, textStatus){
    }
}); 
```

Java代码：-

```
@RequestMapping(method=RequestMethod.POST, value="/getData")
public @ResponseBody String getRequest(@RequestBody String data) {
    System.out.println(data);
    return "{\"result\": \"Hello\"}";
} 
```

来自 jquery 的数据已成功打印到控制台，但没有数据返回到 jquery。它正在进入错误功能并在firebug控制台中显示200 OK状态而没有任何响应。

# mysql - MySQL获取子查询值

> ID：15134416
> 
> 赞同：0
> 
> 时间：2013-02-28T11:29:52.047
> 
> 标签：mysql

我正在尝试计算质心点的距离，这是通过标签总数和标签出现的瞬间时间总和计算得出的。这就是 (tc_sum/cnt) 的概念。
但是，子查询上的 SELECT 不允许我获得质心点，因为尚未计算“中心”，所以我无法获得“距离”。
有什么帮助吗？

```
SELECT cnt, tc_sum, ROUND(tc_sum/cnt) as centr, distance
FROM (
    SELECT SUM(timecode) as tc_sum, count(timecode) as cnt, ABS( centr - '".$timecode."' ) AS distance
    FROM dados d
    WHERE tag = 'donald'
    AND filename = 'donald.mp4'
    AND group_id = '1'
    ) d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:36:10.673

尝试

```
SELECT cnt, tc_sum, ROUND(tc_sum/cnt) as centr, distance
FROM (
SELECT SUM(timecode) as tc_sum, count(timecode) as cnt, ABS( ROUND(tc_sum/cnt)- '".$timecode."' ) AS  distance
FROM dados d
WHERE tag = 'donald'
AND filename = 'donald.mp4'
AND group_id = '1'
) d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:38:27.260

```
SELECT 
 SUM(timecode) as tc_sum, 
 SUM(timecode) as cnt, 
 ABS( SUM(timecode) / SUM(timecode) - '".$timecode."' ) AS distance, 
 ROUND(SUM(timecode) / SUM(timecode)) AS centr
FROM dados d
WHERE tag = 'donald'
 AND filename = 'donald.mp4'
 AND group_id = '1' 
```

查询逐行运行，您不能以这种方式引用别名。您必须再次“重新计算”它们。“重新计算”不是正确的词，因为结果并没有真正计算多次。优化器会处理它只计算一次。但是只有在查询运行后才知道别名。恐怕我的英语太烂了，无法很好地解释它:)

# php - PHP 在 Windows 机器上安装 SSH2

> ID：15134421
> 
> 赞同：19
> 
> 时间：2013-02-28T11:29:59.840
> 
> 标签：php, windows, apache, dll, libssh2

我正在尝试将其安装[在](http://www.php.net/manual/en/book.ssh2.php)`Windows+Apache`机器上。文档说 SSH2 需要`OpenSSL`和`libssh2`库。我在我的`php.ini`文件中添加了这一行：

```
extension=php_openssl.dll
extension=php_ssh2.dll 
```

并重新启动了 Apache，但它仍然无法正常工作（`Fatal error: Call to undefined function ssh2_connect()`）。

谁能解释我如何安装此服务？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-10T10:39:39.610

我是这样做的：

1.  [从这个位置](http://windows.php.net/downloads/pecl/releases/ssh2/0.12/)下载 Win32 SSH2 PECL 扩展 （选择合适的版本）；

2.  提取档案的内容并：

    *   放置`php_ssh2.dll`和`php_ssh2.pdb`文件`ext`夹中的文件（例如`C:\php\ext`）；
    *   将文件复制`libssh2.dll`到`C:\Windows\system32`和（如果你有 Win64）`C:\Windows\SysWOW64`文件夹；
3.  运行以下命令来注册 DLL：

    ```
    C:\> regsvr32 libssh2.dll 
    ```

4.  重新启动阿帕奇。

**最后说明**

如果您有 PHP x64，则必须查找 x64 版本的 SSH2 库/DLL。 [该站点](http://www.anindya.com)提供了一些用于 PHP 的 Win64 编译库，请先在此处尝试。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-18T04:33:14.017

如果有人在安装 SSH2 时遇到问题，我是这样做的：

[1) 从PHP.net](http://pecl.php.net/package/ssh2) [选择合适的版本]下载 SSH2 PECL 库。

2) 复制`libssh2.dll`到**System32** [x86] 或**SysWOW64** [x64] 文件夹。

3) 复制`php_ssh2.dll`和`php_ssh2.pdb`到**php/ext**文件夹。

4）删除';' 从`;extension=php_ssh2.dll`php.ini 中的行。如果此行不在您的 php.ini 中，请添加它。

5）重启**阿帕奇**。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-17T11:29:44.323

1.  放入`php_ssh2.dll`ext 文件夹
2.  放入`libssh2.dll`php文件夹
3.  重新开始`IIS`

那对我有用

*   `PHP 5.4.25 NTS + Windows Server 2012`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-21T09:31:29.497

如果您正在运行 xamp 3.2.1 和 PHP 5.6.8，这可能对您有所帮助。

做亚历克斯 b 说的，并从这个页面下载与你的 php 版本（和位）相对应的包（[链接](https://phpfashion.com/php-ssh2-dll-for-php-5-6-and-7-0)）

我已经下载并替换了 C:\xampp\php\ext 并且它有效！

希望这会有所帮助，问候。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-16T19:26:26.577

libssh2（deps）： http: [//windows.php.net/downloads/php-sdk/deps/](http://windows.php.net/downloads/php-sdk/deps/)

php_ssh2 (ext): [http://windows.php.net/downloads/pecl/releases/ssh2/0.12/](http://windows.php.net/downloads/pecl/releases/ssh2/0.12/)

5.5 之前的版本已经有 libssh2.dll（来自第二个链接）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-30T08:51:38.753

我已经安装了 PHP 5.6.25/7.0.10 – MySQL 5.7.14，我目前正在使用 PHP 7.0。我有同样的错误。如果库 OpenSSL 和 libssh2 都在工作，我使用 phpinfo() 检查（你可以谷歌如何检查）。在我看到它们正在工作之后，我在[http://pecl.php.net/package/ssh2/1.0/windows](http://pecl.php.net/package/ssh2/1.0/windows)下载了 php_ssh2.dll （也可以在[http://windows.php.net/downloads/pecl找到/releases/ssh2/](http://windows.php.net/downloads/pecl/releases/ssh2/) ) 对于 7.0 版本，将其放入 php\ext 文件夹。比我使用 extension=php_ssh2.dll 将它包含在 php.ini 文件中。

然后它出现在 phpinfo() 中。它奏效了。希望能帮助到你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-07T06:57:57.780

修复对我有用的问题。我正在运行 xampp v. 3.2.1 apache 2.2 面临同样的问题，尝试将 dll 文件放在不同的 c: 位置，但最终失败了，这有帮助。

1.) 从[http://pecl.php.net/package/ssh2/0.12/windows](http://pecl.php.net/package/ssh2/0.12/windows)下载版本特定的 dll 文件并提取文件

**请注意，即使您使用的是 64 位版本的 windows，也请根据您的 php 版本下载 32 版本的 THREAD SAFE ssh 即线程安全 (TS) x86**

2.) 在 C:\xampp\php 添加/替换 libssh2.dll（标准安装）

3.) 在 C:\xampp\php\ext 中添加/替换 php_ssh2.dll 和 php_ssh2.pdb（标准安装）

4.) 重启apache服务器

*像魅力一样工作*

干杯

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-28T13:13:55.820

首先，您的问题揭示了两个误解：

1.  [需求](http://www.php.net/manual/en/ssh2.requirements.php)部分实际上是这样说的：

    > » OpenSSL 和 » libssh2 库是必需的。确保已安装开发库，其中典型的包名称可能是 openssl-dev。

    它不是在谈论 PHP 扩展，而是在谈论与 PHP 无关的第三方库。

2.  `extension=php_ssh2.dll`要求您实际上`php_ssh2.dll`在 PHP 的`ext`目录中调用了一个文件，而您可能没有它，主要是因为它没有与 PHP 捆绑在一起。

如果我们查看[安装](http://www.php.net/manual/en/ssh2.installation.php)章节，我们可以看到 SSH2 是一个 PECL 扩展。有一些带有说明的链接，但我可以总结一下重要信息：

*   您需要一个`php_ssh2.dll`与您的 PHP 安装相匹配的文件。
*   PHP 团队和 PECL 团队都不会分发此类文件。
*   在 Windows 上安装 PECL 扩展很困难。您需要下载 C 源代码，获取 C 编译器并自己制作文件，或者找到已经为您完成的人。

说，除非你谷歌搜索`php_ssh2.dll`并找到相关的东西，否则你可能不走运。

# c++ - 如何将 System.Net 命名空间用于 Visual Studio 2010 c++ 项目？

> ID：15134423
> 
> 赞同：2
> 
> 时间：2013-02-28T11:30:16.457
> 
> 标签：c++, dll, import, namespaces, c++-cli

我在将`System.Net`命名空间从 .NET 导入到我的`C++`项目中时遇到了麻烦。

我已经尝试过使用：“使用命名空间 System.Net”，但我想我需要将一些 DLL 导入到我的项目属性中才能使这个语句起作用。我怎样才能做到这一点？有人对如何克服这个问题有任何意见吗？或者我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:39:08.030

在您的**C++/CLI**代码中，您可以执行以下操作：

```
#using <System.dll>

using namespace System::Net; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:13:29.780

除了指定

使用命名空间 System::Net；

您还需要添加对 System.Net 程序集的引用...

请执行下列操作：

1.  右键单击项目并选择属性
2.  单击左侧树视图中的“通用属性”项
3.  单击“添加新引用”按钮
4.  在“添加引用对话框”中，选择左侧树视图中的程序集/框架
5.  在添加的列表框中找到“System.Net”，将其添加到您的项目中

# python - datetime.datetime - 日期字段超出范围

> ID：15134424
> 
> 赞同：3
> 
> 时间：2013-02-28T11:30:15.863
> 
> 标签：python, datetime

在处理日期时，我发现了非常有用的 datetime.datetime 对象，但是我现在遇到了 datime.datetime 对我不起作用的情况。在程序执行期间，day 字段是动态计算的，这就是问题所在：

```
>>> datetime.datetime(2013, 2, 29, 10, 15)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: day is out of range for month 
```

好的，2 月没有 29 天，但如果 datetime 能够解决这个问题并返回这个对象，那就太好了

```
datetime.datetime(2013, 3, 1, 10, 15) 
```

解决这种情况的最佳方法是什么？所以，我正在寻找一个通用的解决方案，当日参数大于月的天数时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:36:02.390

来自 Python 之禅：*显式优于隐式*。当您尝试创建无效日期等错误时，您需要明确处理这种情况。

如何处理该异常*完全*取决于您的应用程序。您可以将错误通知最终用户，或者您可以尝试将日期转移到下个月，或者将日期限制为当月的最后一个法定日期。*根据您的用例*，所有选项都是有效的。

以下代码会将“剩余”天数转移到下个月。所以 2013-02-30 会变成 2013-03-02 。

```
import calendar
import datetime

try:
    dt = datetime.datetime(year, month, day, hour, minute)
except ValueError:
    # Oops, invalid date. Assume we can fix this by shifting this to the next month instead
    _, monthdays = calendar.monthrange(year, month)
    if monthdays < day:
        surplus = day - monthdays
        dt = datetime.datetime(year, month, monthdays, hour, minute) + datetime.timedelta(days=surplus) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T11:36:37.153

虽然`try...except`在这种情况下使用有很多话要说，但如果你真的只需要 month + daysOffset 你可以这样做：

```
d = datetime.datetime(targetYear,targetMonth,1,hour,min,sec)
d = d + datetime.timedelta(days=targetDayOfMonth-1) 
```

基本上，将月份中的日期设置为 1，它始终在月份中，然后添加 timedelta 以返回当前或未来月份中的适当日期。

```
d = datetime.datetime(2013, 2, 1, 10, 15) # day of the month is 1
# since the target day is the 29th and that is 28 days after the first
# subtract 1 before creating the timedelta.
d = d + datetime.timedelta(days=28) 
print d
# datetime.datetime(2013, 3, 1, 10, 15) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-12T13:08:15.317

使用下个月的第一天，然后减去一天以避免使用日历

```
datetime.datetime(targetYear, targetMonth+1, 1) + dt.timedelta(days = -1) 
```

# wcf - Silverlight、WCF Ria、EF、流

> ID：15134426
> 
> 赞同：0
> 
> 时间：2013-02-28T11:30:18.110
> 
> 标签：wcf, silverlight, entity-framework, security

当我有一个使用 WCF Ria 和实体框架的 Silverlight 应用程序时，有人可以向我解释一下流程是怎样的。所以我更好地了解在哪里保护信息的传输。

我认为它是，用户进入网站，silverlight 应用程序被下载到用户的计算机上。然后如果用户要创建一个新条目，他输入详细信息，然后创建一个新的服务实例。该服务位于带有 silverlight 应用程序的 Web 项目中。然后将信息发送到web项目上的webservice，并从webservice将信息发送到DAL所在的服务器。所有信息都以 XML 格式发送。我必须保护它从用户到网络服务，从网络服务到 DAL 所在的服务器。

我是对的，还是完全错了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:03:46.547

我创建的使用 WCF 在客户端和服务器之间加密数据的最佳方法是将 EnableClientAccess 设置为需要 DomainService 中的安全端点：

```
[EnableClientAccess(RequiresSecureEndpoint = true)]
public partial class DomainService : LinqToEntitiesDomainService<YourEntities> 
```

# vb.net - 从 observablecollection 中移除项目

> ID：15134436
> 
> 赞同：0
> 
> 时间：2013-02-28T11:30:37.440
> 
> 标签：vb.net, linq

我正在努力弄清楚如何`observableCollection`在以下情况下删除和添加：

```
 Dim flightsColl As New ObservableCollection(Of Flight)
    Dim f1 As Flight = New Flight With {.FlightName = "Jet1"}
    Dim f2 As Flight = New Flight With {.FlightName = "Boeing"}

    Dim p1 As Passenger = New Passenger() With {.Name = "Tim", .Address = "address1"}
    Dim p2 As Passenger = New Passenger() With {.Name = "Tom", .Address = "address2"}
    Dim p3 As Passenger = New Passenger() With {.Name = "Tas", .Address = "address3"}

    'add 2 passangers to Jet1

    f1.Passengers.Add(p1)
    f1.Passengers.Add(p2)

    'add passnger3 to boeing
    f2.Passengers.Add(p3)

    'add flight1 & 2 to flight list
    flightsColl.Add(f1)
    flightsColl.Add(f2) 
```

在上面的例子中，我有一个航班collection，它是一个可观察的集合。
如您所见，它有 2 个航班，第一个有 2 个乘客，第二个有 1 个乘客

现在，如果我必须将乘客 2(p2) 转移到航班 2，那么我必须
从`flightsColl`
`Remove Passenger 2 from flight 1`

`Add Passenger 2 to flight 2`

**更新**

```
Public Class Flight

Public Property Name() As String
Public Property Passengers As ICollection(Of Passenger)

Public Sub New()
    Me.Appliances = New ObservableCollection(Of Passenger)
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:42:16.950

为什么一定要通过flightsColl？您对航班和乘客都有参考。

```
f1.Passengers.Remove(p2) 
```

... ETC

** 更新 **

```
Dim oldflight As Flight = flightsColl.FirstOrDefault(Function(f) f.FlightName = "oldFlightName")
Dim passenger As Passenger = oldflight.Passengers.FirstOrDefault(Function(p) p.Name = "passengerName")
oldflight.Passengers.Remove(passenger)

Dim newflight As Flight = flightsColl.FirstOrDefault(Function(f) f.FlightName = "newFlightName")
newflight.Passengers.Add(passenger) 
```

这有帮助吗？您需要在其中添加一些错误检查（如果您不想意外删除同名的其他乘客，SingleOrDefault 会更好）

# javascript - jQuery keydown 但如果在文本框中忽略

> ID：15134437
> 
> 赞同：7
> 
> 时间：2013-02-28T11:30:38.173
> 
> 标签：javascript, jquery

我正在调用一个函数（如下），如果用户按下删除按钮，它将执行一个操作。它工作正常，但我只需要在页面上执行此操作，而不是在用户输入时（在输入内或文本区域内）。

```
$(window).keydown(function (evt) {
    if (evt.which == 46) { // delete
        goDoSomething();
    }
}); 
```

如果用户是`how I can amend the above`or有什么想法吗？`not fire``in``input``textarea`

提前致谢，

戴夫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T11:32:34.713

检查 evt.target 的类型：

```
$(window).keydown(function (evt) {
    if (evt.target.tagName.toLowerCase() !== 'input' &&
        evt.target.tagName.toLowerCase() !== 'textarea' && evt.which == 46) { // delete
        goDoSomething();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:35:28.710

您可以有一个全局变量，并在文本框被聚焦时将其设置为某个值，并将其重置为模糊。像这样的东西：

```
var textboxSelected = false;

$(":input").focus(function () {
     textboxSelected = true;
});
$(":input").blur(function () {
     textboxSelected = false;
}); 
```

然后在您的 onKeyDown 事件中，在执行其余功能之前检查变量是否设置为 false：

```
$(window).keydown(function (evt) {
if (evt.which == 46 && textboxSelected == false) {

    goDoSomething();
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:39:39.290

尝试这样的事情：

```
$(window).keydown(function (evt) {
  if(evt.target != $('input') && evt.target != $('textarea')){
     if (evt.which == 46) { // delete
        goDoSomething();
     }
  }
}); 
```

# git - git 显示未推送的工作

> ID：15134438
> 
> 赞同：17
> 
> 时间：2013-02-28T11:30:38.703
> 
> 标签：git

如何找出尚未推送到另一个存储库的工作。换句话说; 如果我要删除该存储库，我会永久丢失什么？

目前我使用以下 3 行，但我想知道这是否是一个完整的封面以及它是否是一种理智的方法：

```
git status --short
git log --branches --not --remotes --simplify-by-decoration --decorate --oneline
git stash list 
```

更新：似乎没有检查子模块。有没有办法递归地包含子模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:28:27.697

> 似乎没有检查子模块。有没有办法递归地包含子模块？

不容易，因为每个子模块都可以有自己的历史、分支集和上游 repo（'origin' 甚至另一个名称）

如“[包括/交错子模块提交的 Git 历史记录](https://stackoverflow.com/a/8850366/6309)”中所述，`git log --submodules`仅指示父存储库当前引用的 SHA1。

这给您留下了一个递归命令，例如：

```
git submodule foreach git log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:54:57.113

你可能喜欢类似的东西`git show-branch --color=always -a --more=15`？

是您的`*`本地存储库，`+`表示其他存储库。如果 repo 中存在评论，`*`/`+`将表明它存在于那里。

您的`master`分支中存在但不存在的`origin/master`内容尚未推送。

# python - Python，如何优化这段代码

> ID：15134442
> 
> 赞同：1
> 
> 时间：2013-02-28T11:30:44.447
> 
> 标签：python, performance, numpy, cython

我试图优化下面的代码，但我不知道如何提高计算速度。我尝试了 Cthon，但性能就像在 python 中一样。

是否可以在不重写 C/C++ 的所有内容的情况下提高性能？

谢谢你的帮助

```
import numpy as np

heightSequence = 400
widthSequence = 400
nHeights = 80

DOF = np.zeros((heightSequence, widthSequence), dtype = np.float64)
contrast = np.float64(np.random.rand(heightSequence, widthSequence, nHeights))

initDOF = np.zeros([heightSequence, widthSequence], dtype = np.float64)
initContrast = np.zeros([heightSequence, widthSequence, nHeights], dtype = np.float64)
initHeight = np.float64(np.r_[0:nHeights:1.0])
initPixelContrast = np.array(([0 for ii in range(nHeights)]), dtype = np.float64)

# for each row
for row in range(heightSequence):
    # for each col
    for col in range(widthSequence):

        # initialize variables            
        height = initHeight # array ndim = 1
        c = initPixelContrast # array ndim = 1

        # for each height            
        for indexHeight in range(0, nHeights):
            # get contrast profile for current pixel
            tempC = contrast[:, :, indexHeight]
            c[indexHeight] = tempC[row, col]

        # save original contrast            
        # originalC = c
        # originalHeight = height                

        # remove profile before maximum and after minumum contrast
        idxMaxContrast = np.argmax(c)
        c = c[idxMaxContrast:]
        height = height[idxMaxContrast:]

        idxMinContrast = np.argmin(c) + 1
        c = c[0:idxMinContrast]
        height = height[0:idxMinContrast]              

        # remove some refraction
        if (len(c) <= 1) | (np.max(c) <= 0):
            DOF[row, col] = 0                  

        else:

            # linear fitting of profile contrast                                             
            P = np.polyfit(height, c, 1)
            m = P[0]
            q = P[1]

            # remove some refraction               
            if m >= 0:
                DOF[row, col] = 0

            else:
                DOF[row, col] = -q / m

    print 'row=%i/%i' %(row, heightSequence)

# set range of DOF
DOF[DOF < 0] = 0
DOF[DOF > nHeights] = 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:53:09.447

通过查看代码，您似乎可以完全摆脱两个外部循环，将代码转换为*矢量化*形式。然而，`np.polyfit`调用必须被其他表达式替换，但线性拟合的系数很容易找到，也是向量化的形式。`if-else`然后可以将最后一个转换为`np.where`呼叫。

# python - 从 html 模板中获取值并通过 django 将其存储在 mysql db 中，而不使用表单

> ID：15134444
> 
> 赞同：-3
> 
> 时间：2013-02-28T11:30:50.050
> 
> 标签：python, mysql, django

我需要通过 Python/Django 中的 html 提交按钮将数据更新到数据库（mysql）的代码。需要带有 html 代码的 view.py 内容。考虑我有一个带有书名、作者名和出版商名的表我需要更新这些值的值通过 html 提交按钮。

请在这方面帮助我..我是这个框架的新手...无法通过。

如果您向我发送通过 Django/Python 在 mysql 中编辑表的代码，那将更加感谢

请在不使用表单的情况下为我提供代码，我使用的是 html 模板而不是表单...请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:41:39.547

如果你的html表单是这样的

```
<form method="post" action=".">
    <input type="text" id="field1" name="field1 />
    <input type="text" id="field2" name="field2 />
</form> 
```

您可以像这样在**views.py**中获取值：

```
if request.POST:
    field1_value = request.POST['field1']
    field2_value = request.POST['field2'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:45:01.923

模型.py

```
class Book(models.Model):
   book_name = models.CharField(max_length = 32, unique = True)
   author_name = models.CharField(max_length = 32, unique = True)
   publisher_name = models.CharField(max_length = 32, unique = True 
```

)

视图.py

```
def save_book(request):  
 if request.POST:
   book_name       = request.GET.get('book_name')
   author_name   = request.GET.get('author_name')
   publisher_name = request.GET.get('publisher_name') 
   Book.object.creat(book_name, author_name,publisher_name) 
```

在 html 中，使用查询字符串传递这些值

# wcf - 如何在 .net 3.5 中的 WCF REST Web 服务中实现缓存

> ID：15134448
> 
> 赞同：0
> 
> 时间：2013-02-28T11:30:58.250
> 
> 标签：wcf, web-services, caching, .net-3.5

我在一个仅使用 .net 3.5 而不是 4 的共享点站点中创建了一个自定义 WCF Rest web 服务，我发现这个[问题](https://stackoverflow.com/questions/1970492/how-to-do-wcf-rest-caching)，[marc_s](https://stackoverflow.com/users/13302/marc-s)谈到了[REST Starter Kit](http://aspnet.codeplex.com/wikipage?title=WCF%20REST&ProjectName=aspnet)，但我发现它不再受支持。

关于如何在这种情况下实现缓存的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:55:08.810

[System.Web.Caching.Cache](http://msdn.microsoft.com/en-us/library/system.web.caching.cache%28v=vs.90%29.aspx)是你的朋友。对于 Framework 4.0 或更高版本，请使用[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache%28v=vs.100%29.aspx)或[ObjectCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:14:50.407

不要忘记[Microsoft 企业库缓存应用程序块](https://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCwQFjAA&url=http://msdn.microsoft.com/en-us/library/ff647280.aspx&ei=kNYvUZGPDYqD4ASiioHICw&usg=AFQjCNELzC8RP4qyGEgJp64TgCezJZcdmQ&sig2=Z4sFhW320CJ9lc4zFn3jmw&bvm=bv.43148975,d.bGE)

# c++ - 在 SystemC 中检查信号是否有效的最佳方法是什么？

> ID：15134449
> 
> 赞同：2
> 
> 时间：2013-02-28T11:31:00.030
> 
> 标签：c++, systemc

我在 SystemC 仿真中遇到了一个小问题，因为在一个组件中我确实忘记检查信号完整性并且我的仿真因此而中断。基本上我不处理我的信号像`"XXXXX..."`或`"ZZZZ..."`！

如何检查信号是否有效？意思不是`"ZZZZ..."`，不是，`"XXXX..."`而是一个有效的喜欢`"000110..."`？谢谢

## 一个小细节

有人指出，也许我在这里问的是检查信号是否为数字。好的，假设信号有效，当然是数字。但是我在一些调试会话中遇到过`"XXX..."`信号有时被视为 -1 或一般的负数......所以这就是为什么我没有询问如何检查信号是否为数字......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:45:55.913

sc_logic.is_01()？

```
bool is_01() const; 
```

从[IEEE Std 1666-2011](http://standards.ieee.org/getieee/1666/download/1666-2011.pdf)第 259 页的 7.9.2.2 开始。

# jquery - Javascript 值未正确设置

> ID：15134459
> 
> 赞同：-2
> 
> 时间：2013-02-28T11:31:31.043
> 
> 标签：jquery

我正在使用 Javascript 更新隐藏表单字段的一些值，这些字段用于计算总数。这工作正常，但现在似乎发生了一些奇怪的事情，我不知道是什么。

```
 <input type="hidden" name="membership[<?php echo $row_id; ?>][total]" class="<?php echo $row_id; ?>total" value="<?php echo $social_prices[$row['membership']]; ?>"> 
```

在我的全部功能中，如果我 console.log 我得到的整个对象：

```
 <input type="hidden" name="membership[1][total]" class="1total" value="43.5"> 
```

但如果我只是抓住这个值，我会得到该字段的原始值，即 24 .. 所以总数是使用原始值而不是更新的值来计算的......

这就是我在执行 console.log 的方式；

```
console.log(this);
console.log((this.value)); 
```

这就是我更新值的方式：

```
$('.'+membership+'total').val(total); 
```

如果我在那一行之后立即运行这一行，我会得到正确的值：

```
alert($('.'+membership+'total').val()); 
```

但是当我尝试我的全部功能时，这一切都出错了，这是我不会发布的功能中的一些代码；因为它真的很长，所以不会发布全部内容。

```
 var total = 0;
   $('input:hidden').each(function () {
   // I'm using this to make sure I get only the field I want to add together
  var result = name.match(/total/g);
  if((result)){
     console.log(this);
     console.log((this.value));
     total = total + parseFloat((this).value);
   } 
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:45:52.803

```
$('.'+membership+'total').attr('defaultValue', 'newValue'); 
```

更改来自的默认值。

除此之外，.val 可以在 DOM 上完美运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:09:51.847

找不到的原因*可能*是你的类名无效。它以数字开头，这是不允许的。类名的限制如下：

```
命名规则：

必须以字母 AZ 或 az 开头
后面可以跟：字母 (A-Za-z)、数字 (0-9)、连字符 ("-") 和下划线 ("_")
在 HTML 中，所有值都不区分大小写

```

来源：[http ://www.w3schools.com/tags/att_global_class.asp](http://www.w3schools.com/tags/att_global_class.asp)

一个解决方案可能是交换单词和数字：`class="total1"`. 这样名称是有效的，但您可以将相同的信息放入标识符中。

# jenkins - 从詹金斯调用时，无法在 testcomplete 中运行自动化项目

> ID：15134460
> 
> 赞同：2
> 
> 时间：2013-02-28T11:31:32.873
> 
> 标签：jenkins, continuous-integration, jenkins-plugins, testcomplete

当来自 jenkins 的调用时，无法在 testcomplete 中运行自动化项目。

在我们的持续集成部分，项目是使用 testcomplete 自动化的，它在 bat 文件的帮助下通过 jenkins 调用。bat 文件中的脚本是

```
"C:\Program Files\Automated QA\TestComplete 7\Bin\TestComplete.exe "  "D:\Test Complete7 Projects\ProjectInput_AllSamples\ProjecInputs.pjs" /r /p:Samples /rt:Main "iexplore" /e 
```

它将打开 testcomplete 和 iexplorer ，但它没有填充数据（自动化）。当我们在没有jenkins的情况下直接调用bat文件时，它工作得很好。有没有解决办法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:25:01.137

如果您将 Jenkins（主服务器或从服务器）作为 Windows 服务运行，请确保它作为用户而不是本地系统运行。

我们也按照 Gentlesea 的建议做同样的事情，我们在 Jenkins Slave 上运行 TestExecute，并为设计 TestComplete 脚本的人员保留 TestComplete 许可证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:43:22.110

根据您的描述，这听起来像是在 Windows 中阻止您让您的测试应用程序正常工作。第二个用户可能是一个问题，但我无法确认这一事实，因为我无法找到任何关于它在 Windows XP 中如何工作的明确解释。我很确定这不会在 Windows Vista、7、8 或服务器机器上工作，但由于[架构的变化](http://blogs.technet.com/b/voy/archive/2007/02/23/services-isolation-in-session-0-of-windows-vista-and-longhorn-server.aspx)。

听起来最好的解决方案是确保您的自动化 UI 测试由交互式用户启动。当我尝试在我们的构建中添加自动化测试时，我们在 Windows XP SP2 虚拟机上使用了 TestComplete 7。为了以交互式用户的身份开始我们的测试，我们：

*   在 Windows 启动时让用户登录，这样总是有一个交互式用户，这意味着有一个可以访问键盘/鼠标的实际桌面会话。我似乎记得（但目前找不到任何链接）没有交互式用户，就没有可以访问键盘/鼠标的活动桌面。
*   我们编写了一个小应用程序，它会在交互式用户登录时启动。该应用程序将查看特定文件，当该文件更改/创建时，它将读取该文件并启动应用程序。这个应用程序的代码看起来有点像这样：

    ```
    using System;
    using System.Collections.Generic;
    using System.Diagnostics;
    using System.Globalization;
    using System.IO;
    using System.Linq;
    using System.Text;
    using System.Threading;
    using System.Threading.Tasks;

    namespace ApplicationStarter
    {
        class Program
        {
            // The string used to indicate that the application should quit.
            private const string ExitString = "exit";

            // The path which is being watched for changes.
            private static string s_LoadFilePath;

            static void Main(string[] args)
            {
                try
                {
                    {
                        Debug.Assert(
                            args != null, 
                            "The arguments array should not be null.");
                        Debug.Assert(
                            args.Length == 1, 
                            "There should only be one argument.");
                    }

                    s_LoadFilePath = args[0];
                    {
                        Console.WriteLine(
                            string.Format(
                                CultureInfo.InvariantCulture, 
                                "Watching: {0}", 
                                s_LoadFilePath));
                    }

                    if (File.Exists(s_LoadFilePath))
                    {
                        RunApplication(s_LoadFilePath);
                    }

                    using (var watcher = new FileSystemWatcher())
                    {
                        watcher.IncludeSubdirectories = false;
                        watcher.NotifyFilter =
                           NotifyFilters.LastAccess 
                           | NotifyFilters.LastWrite 
                           | NotifyFilters.FileName 
                           | NotifyFilters.DirectoryName;
                        watcher.Path = Path.GetDirectoryName(s_LoadFilePath);
                        watcher.Filter = Path.GetFileName(s_LoadFilePath);

                        try
                        {
                            watcher.Created += OnConfigFileCreate;
                            watcher.EnableRaisingEvents = true;

                            // Now just sit here and wait until hell freezes over
                            // or until the user tells us that it has
                            string line = string.Empty;
                            while (!string.Equals(line, ExitString, StringComparison.OrdinalIgnoreCase))
                            {
                                line = Console.ReadLine();
                            }
                        }
                        finally
                        {
                            watcher.Created -= OnConfigFileCreate;
                        }
                    }
                }
                catch (Exception e)
                {
                    Console.WriteLine(e);
                }
            }

            private static void RunApplication(string configFilePath)
            {
                var appPath = string.Empty;
                var arguments = string.Empty;
                using (var reader = new StreamReader(configFilePath, Encoding.UTF8))
                {
                    appPath = reader.ReadLine();
                    arguments = reader.ReadLine();
                }

                // Run the application
                StartProcess(appPath, arguments);
            }

            private static void StartProcess(string path, string arguments)
            {
                var startInfo = new ProcessStartInfo();
                {
                    startInfo.FileName = path;
                    startInfo.Arguments = arguments;
                    startInfo.ErrorDialog = false;
                    startInfo.UseShellExecute = true;
                    startInfo.RedirectStandardOutput = false;
                    startInfo.RedirectStandardError = false;
                }

                Console.WriteLine(
                    string.Format(
                        CultureInfo.InvariantCulture, 
                        "{0} Starting process {1}", 
                        DateTime.Now, 
                        path));

                using (var exec = new Process())
                {
                    exec.StartInfo = startInfo;
                    exec.Start();
                }
            }

            private static void OnConfigFileCreate(
                object sender, 
                FileSystemEventArgs e)
            {
                Console.WriteLine(
                   string.Format(
                      CultureInfo.InvariantCulture,
                      "{0} File change event ({1}) for: {2}",
                      DateTime.Now,
                      e.ChangeType,
                      e.FullPath));

                // See that the file is there. If so then start the app
                if (File.Exists(e.FullPath) &&
                   string.Equals(s_LoadFilePath, e.FullPath, StringComparison.OrdinalIgnoreCase))
                {
                    // Wait for a bit so that the file is no 
                    // longer locked by other processes
                    Thread.Sleep(500);

                    // Now run the application
                    RunApplication(e.FullPath);
                }
            }
        }
    } 
    ```

这个应用程序希望文件有 2 行，第一行是你要启动的应用程序，第二行是参数，所以在你的情况下是这样的：

```
C:\Program Files\Automated QA\TestComplete 7\Bin\TestComplete.exe
"D:\Test Complete7 Projects\ProjectInput_AllSamples\ProjecInputs.pjs" /r /p:Samples /rt:Main "iexplore" /e 
```

您应该能够在构建步骤中从 Jenkins 生成此文件。

最后，您可能需要观看 TestComplete 退出过程，以便您可以在最后获取结果，但我将把它作为练习留给读者。

# iphone - 分页轮播项目

> ID：15134465
> 
> 赞同：0
> 
> 时间：2013-02-28T11:32:09.287
> 
> 标签：iphone, ios, carousel

我开发了一个轮播视图，看起来像下面帖子中的图片

[如何计算从 3-D 轮播动画视图的位置？](https://stackoverflow.com/questions/8491813/how-do-i-calculate-the-position-of-a-view-animated-from-a-3-d-carousel?rq=1)

```
#pragma mark -

#pragma mark - VIEW LIFE CYCLE

- (void)viewDidLoad
{
    [super viewDidLoad];

    // VIEW FRAME
    CGRect Frame = CGRectMake(-40, -40, 80, 80);

    // CREATE 6 VIEWS
    _CarouselView = [[NSMutableArray alloc] initWithCapacity:6];

    int c = 5;

    while(c--)
    {
        UIView *View = [[UIView alloc] initWithFrame:Frame];
        View.backgroundColor = [UIColor colorWithRed:(c&4) ? 1.0 : 0.0 green:(c&2) ? 1.0 : 0.0 blue:(c&1) ? 1.0 : 0.0 alpha:1.0];

        [_CarouselView addObject:View];
        [self.view addSubview:View];
    }

    _CurrentAngle = _LastAngle = 0.0f;

    [self setCarouselAngle:_CurrentAngle];
}

- (void)viewDidUnload
{
}

#pragma mark -
#pragma mark - VIEW TOUCH GESTURE

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if(!_TrackingTouch)
    {
        _TrackingTouch = [touches anyObject];

        [_AnimationTimer invalidate];
        _AnimationTimer = nil;
        _LastAngle      = _CurrentAngle;
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if([touches containsObject:_TrackingTouch])
    {
        // USE MOVEMENT TO DEVICE HOW MUCH TO ROTATE THE CAROUSEL
        CGPoint LocationNow  = [_TrackingTouch locationInView:self.view];
        CGPoint LocationThen = [_TrackingTouch previousLocationInView:self.view];

        _LastAngle     = _CurrentAngle;
        _CurrentAngle += (LocationNow.x - LocationThen.x) * 180.0f / self.view.bounds.size.width;
        // the 180.0f / self.view.bounds.size.width just says "let a full width of my view
        // be a 180 degree rotation"

        // and update the view positions
        [self setCarouselAngle:_CurrentAngle];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if([touches containsObject:_TrackingTouch])
    {
        _TrackingTouch = nil;

        _AnimationTimer = [NSTimer scheduledTimerWithTimeInterval:0.04 target:self selector:@selector(animateAngle) userInfo:nil repeats:YES];
    }
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self touchesEnded:touches withEvent:event];
}

#pragma mark -
#pragma mark - CAROUSEL ACTIONS

- (void)setCarouselAngle:(float)Angle
{
    // ANGLE TO ADD AFTER EACH ELEM
    _AngleToAdd = 360.0f / [_CarouselView count];

    // APPLY TO ALL VIEWS
    for(UIView *View in _CarouselView)
    {
        float AngleInRadians = Angle * M_PI / 180.0f;

        // GET LOCATION
        float x = (self.view.bounds.size.width * 0.5f) + 100.0f * sinf(AngleInRadians);
        float y = ((self.view.bounds.size.height-200) * 0.5f) + 90.0f * cosf(AngleInRadians);

        // ADJUST SCALE BETWEEN 0.75 0.25
        float Scale = 0.75f + 0.25f * (cosf(AngleInRadians) + 1.0);

        // APPLY TRANSFORMATION
        View.transform = CGAffineTransformScale(CGAffineTransformMakeTranslation(x, y), Scale, Scale);

        // TWEAK ALPHA
        View.alpha = 0.1f + 0.5f * (cosf(AngleInRadians) + 1.0);

        // SETTING Z POSITION
        View.layer.zPosition = Scale;

        // GET THE NEXT ANGLE
        Angle += _AngleToAdd;
    }
}

- (void)animateAngle
{
    float AngleNow  = _CurrentAngle;
    _CurrentAngle  += (_CurrentAngle - _LastAngle) * 0.97f;
    _LastAngle      = AngleNow;

    // PUSH THE NEW ANGLE
    [self setCarouselAngle:_CurrentAngle];

    if(fabsf(_LastAngle - _CurrentAngle) < 0.001)
    {

        [_AnimationTimer invalidate];
        _AnimationTimer = nil;
    }
} 
```

一切正常，但我很难理解在哪里放置分页代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T20:01:24.593

我希望这段代码可以帮助你。您只需要创建一个 ViewController，然后复制粘贴代码。

```
//  CarruselViewController.m
//
//  Created by Rosendo Castillo Perez on 2/25/14.
//  Copyright (c) 2014 Fundtech. All rights reserved.
//

#import "CarruselViewController.h"

@interface CarruselViewController ()
{
    NSMutableArray *_CarouselView;
    CGFloat _CurrentAngle,_LastAngle, _AngleToAdd;
    UITouch * _TrackingTouch;
    NSTimer * _AnimationTimer;
}
@end

@implementation CarruselViewController

#pragma mark -

#pragma mark - VIEW LIFE CYCLE

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:(BOOL)animated];

    // VIEW FRAME
    CGRect Frame = CGRectMake(-40, -40, 80, 40);

    // CREATE 6 VIEWS
    _CarouselView = [[NSMutableArray alloc] initWithCapacity:6];

    int c = 0;

    while(c < 5)
    {

        UILabel *View = [[UILabel alloc] initWithFrame:Frame];
        View.backgroundColor = [UIColor colorWithRed:(c&4) ? 1.0 : 0.0 green:(c&2) ? 1.0 : 0.0 blue:(c&1) ? 1.0 : 0.0 alpha:1.0];
        [View setTextAlignment:NSTextAlignmentCenter];
        [View setTextColor:[UIColor whiteColor]];
        [View setFont:[UIFont boldSystemFontOfSize:14]];
        [View setText:[NSString stringWithFormat:@"%d",c]];

        [_CarouselView addObject:View];
        [self.view addSubview:View];
         c++;
    }

    _CurrentAngle = _LastAngle = 0.0f;

    [self setCarouselAngle:_CurrentAngle];
}

#pragma mark -
#pragma mark - VIEW TOUCH GESTURE

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    if(!_TrackingTouch)
    {
        _TrackingTouch = [touches anyObject];

        [_AnimationTimer invalidate];
        _AnimationTimer = nil;
        _LastAngle      = _CurrentAngle;
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if([touches containsObject:_TrackingTouch])
    {
        // USE MOVEMENT TO DEVICE HOW MUCH TO ROTATE THE CAROUSEL
        CGPoint LocationNow  = [_TrackingTouch locationInView:self.view];
        CGPoint LocationThen = [_TrackingTouch previousLocationInView:self.view];

        _LastAngle     = _CurrentAngle;
        _CurrentAngle += (LocationNow.x - LocationThen.x) * 180.0f / self.view.bounds.size.width;
        // the 180.0f / self.view.bounds.size.width just says "let a full width of my view
        // be a 180 degree rotation"

        // and update the view positions
        [self setCarouselAngle:_CurrentAngle];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if([touches containsObject:_TrackingTouch])
    {
        _TrackingTouch = nil;

        _AnimationTimer = [NSTimer scheduledTimerWithTimeInterval:0.04 target:self selector:@selector(animateAngle) userInfo:nil repeats:YES];
    }
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self touchesEnded:touches withEvent:event];
}

#pragma mark -
#pragma mark - CAROUSEL ACTIONS

- (void)setCarouselAngle:(float)Angle
{
    // ANGLE TO ADD AFTER EACH ELEM
    _AngleToAdd = 360.0f / [_CarouselView count];

    // APPLY TO ALL VIEWS
    for(UIView *View in _CarouselView)
    {
        float AngleInRadians = Angle * M_PI / 180.0f;

        // GET LOCATION
        float x = (self.view.bounds.size.width * 0.5f) + 100.0f * sinf(AngleInRadians);
        float y = ((self.view.bounds.size.height-200) * 0.5f) + 40.0f * cosf(AngleInRadians);

        // ADJUST SCALE BETWEEN 0.75 0.25
        float Scale = 0.75f + 0.25f * (cosf(AngleInRadians) + 1.0);

        // APPLY TRANSFORMATION
        View.transform = CGAffineTransformScale(CGAffineTransformMakeTranslation(x, y), Scale, Scale);

        // TWEAK ALPHA
        View.alpha = 0.1f + 0.5f * (cosf(AngleInRadians) + 1.0);

        // SETTING Z POSITION
        View.layer.zPosition = Scale;

        // GET THE NEXT ANGLE
        Angle += _AngleToAdd;
    }
}

- (void)animateAngle
{
    float AngleNow  = _CurrentAngle;
    _CurrentAngle  += (_CurrentAngle - _LastAngle) * 0.97f;
    _LastAngle      = AngleNow;

    // PUSH THE NEW ANGLE
    [self setCarouselAngle:_CurrentAngle];

    if(fabsf(_LastAngle - _CurrentAngle) < 0.1)
    {
        _CurrentAngle = ((int)_CurrentAngle % 360);

        if (_CurrentAngle < 0.0)
        {
            _CurrentAngle += 360.0;
        }

        [self setCarouselAngle:_CurrentAngle];

        int currentAngle = (int) _CurrentAngle;
        int angleToAdd = (int) _AngleToAdd;

        int residuo = currentAngle % angleToAdd;

        if (residuo != 0)
        {
            forward = (residuo > (angleToAdd / 2));
            [_AnimationTimer invalidate];
            _AnimationTimer = [NSTimer scheduledTimerWithTimeInterval:0.02 target:self selector:@selector(centerAngle) userInfo:nil repeats:YES];
        }
        else
        {
            NSLog(@"angle: %d - index: %d",currentAngle,([_CarouselView count] - ((currentAngle / angleToAdd) % [_CarouselView count])));
        }

    }
}

BOOL forward = TRUE;

- (void)centerAngle
{
    _CurrentAngle += (forward?1.0:-1.0);
    [self setCarouselAngle:_CurrentAngle];

    int currentAngle = (int) _CurrentAngle;
    int angleToAdd = (int) _AngleToAdd;

    int residuo = currentAngle % angleToAdd;

    if (residuo == 0)
    {
        _LastAngle = _CurrentAngle = currentAngle;
        [self setCarouselAngle:_CurrentAngle];
        [_AnimationTimer invalidate];
        _AnimationTimer = nil;
        NSLog(@"angle: %d - index: %d",currentAngle,([_CarouselView count] - ((currentAngle / angleToAdd) % [_CarouselView count])));
    }
}

@end 
```

# jquery - 在向下滑动 div 之前等待加载多个图像

> ID：15134468
> 
> 赞同：1
> 
> 时间：2013-02-28T11:32:18.697
> 
> 标签：jquery

我正在尝试将几个图像加载到一个名为“images”的 div 中，当它们完成加载时，我希望它向下滑动 div“images”，这将显示刚刚加载到其中的实际图像，我有一个写出如何实现这一点有点麻烦。

这是我到目前为止所拥有的，它并不完全正确：

```
$('#button').click(function() {
    var image=$('#images');

    $("<img>", {
        src: "http://www.klossal.com/images/klossviolins/home.jpg"
    }).appendTo("#images");
    $("<img>", {
        src: "http://www.klossal.com/images/klossviolins/inventory.jpg"
    }).appendTo("#images");
    $("<img>", {
        src: "http://www.klossal.com/images/klossviolins/services.jpg"
    }).appendTo("#images");

    if (image.get(0).complete) { image.slideDown(300); } 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:03:41.947

只听图像`load`事件。在事件处理程序计数图像中，如果加载的图像数量与请求的图像总数匹配，则开始显示。

[http://jsfiddle.net/ZsGHY/](http://jsfiddle.net/ZsGHY/)

```
var imgCount = 0;
var image=$('#images');
$('#button').click(function() {
    console.log("Loading...");

    $("<img>", {
        src: "http://www.klossal.com/images/klossviolins/home.jpg"
    }).appendTo("#images").load(onImage);
    $("<img>", {
        src: "http://www.klossal.com/images/klossviolins/inventory.jpg"
    }).appendTo("#images").load(onImage);
    $("<img>", {
        src: "http://www.klossal.com/images/klossviolins/services.jpg"
    }).appendTo("#images").load(onImage);

});

function onImage(e)
{
    console.log("Image loaded");
    imgCount++;

    if (imgCount == image.children().length)
    {
        image.slideDown(3000);
    }
} 
```

`.load(function name)`意味着我们正在附加一个事件侦听器，它将侦听`load`事件，一旦发生，该函数将被执行。

`onLoad(e){}`意味着命名的函数`onLoad`接受一个参数 - 此参数是从事件侦听器传递的，它是一个`event`对象。在函数内部，`e`可用于检测触发事件的对象，以获取更多日期...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:01:31.387

有一个很好的 jQuery 插件，可以在元素内的所有图像加载后触发一个事件：http: [//desandro.github.com/imagesloaded/](http://desandro.github.com/imagesloaded/)

请参阅小提琴中的此示例：http: [//jsfiddle.net/TFVc9/2/](http://jsfiddle.net/TFVc9/2/)

```
$('#button').click(function() {
    var image=$('#images');

    //...

   image.imagesLoaded( function() {image.slideDown(300)} );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:25:32.627

试试下面的代码：

```
<script>
$(document).ready(function () {
        $('#button').click(function() {

            $('#theDiv').prepend('<img id="theImg" src="http://www.klossal.com/images/klossviolins/home.jpg" />')
            $('#theDiv').prepend('<img id="theImg" src="http://www.klossal.com/images/klossviolins/inventory.jpg" />')
            $('#theDiv').prepend('<img id="theImg" src="http://www.klossal.com/images/klossviolins/services.jpg" />')
            $('#theDiv').prepend('<img id="theImg" src="http://www.klossal.com/images/klossviolins/services.jpg" />')
            $('#theDiv').hide();

            $('#theDiv').slideDown('slow', function() {
            // Animation complete.
            });
        });
    });
</script> 
```

# c# - C# RTB 中的缩进

> ID：15134471
> 
> 赞同：0
> 
> 时间：2013-02-28T11:32:31.663
> 
> 标签：c#, formatting, richtextbox

在我的 C# 应用程序中，我有一个带有一个长文本字符串的富文本框，如下所示：

![实时出价文本](../Images/a2aa9770aeb83a4d297ac35d6c857b9e.png)

我想要的是第二行和第三行的缩进：

所以文本应该是这样的：

```
1\.       Bitte blenden Sie über die Layerpalette alle für
         die Raumverknüpfung notwendigen zusätzlichen Layer
         ein. 
```

我试过

```
richtextbox.SelectionIndent = 5 
```

但这只会缩进整个文本（带有“1.”）。

是否有可能在 RTB 中解决此问题？

我必须补充一件事：仅仅将句子分成三部分是没有解决办法的，因为我使用的本地化字符串必须是一个部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:40:22.393

```
string text ="1.Bitte blenden Sie über die Layerpalette alle für  die Raumverknüpfung notwendigen zusätzlichen Layer ein.";
        int rowMaxLenth = 30;
        int firstRowIndex = 2;
            text = text.Insert(firstRowIndex,"\t");

        for (int i = 1; i < text.Length / rowMaxLenth; i++)
        {

            text= text.Insert((i*rowMaxLenth),"\n\t");
        }
        rchTextbox.Text = text; 
```

> 但是您需要一些更改，您是在 word 中还是在 word 之后插入制表符

# java - FTPClient 池 - Java

> ID：15134475
> 
> 赞同：5
> 
> 时间：2013-02-28T11:32:41.827
> 
> 标签：java, multithreading, connection-pooling, ftp-client, apache-commons-net

我正在编写一个连接到 FTP 服务器以读取一些文件的 Rest 服务，然后对读取的数据执行一些操作以服务于服务请求。我正在使用 Apache commons `FTPClient`。

作为一个临时解决方案，我正在创建一个`FTPClient`对象 - 然后连接它 - 然后使用凭据登录 -`FTPClient`在我的数据访问层中的方法内（客户端是此方法的本地 - 这样做不是线程安全的），然后在退出方法之前断开它（即..在读取文件之后）。问题是，`FTPClient`登录需要大约 3-7 秒，这非常高。所以我正在考虑实现一个`FTPClientPool`可以在数据访问方法中提供已经准备好的客户端。

是否已经存在任何这样的 ClientPools？

如果是，那我应该选择哪一个？

如果不是，实现的困难是一旦创建和连接，apache FTPClient 能存活多久？无限时间？？（我的意思是 FTPClient 的默认保持活动时间是多少 - 客户端断开连接之后的空闲时间 - 因为我在 java 文档中看到了各种时间。:() 下一个问题是你如何让它始终保持活动状态?? （可能会在一个单独的线程中定期发送 NOOPS？？）关于我应该如何前进的任何帮助都非常有帮助。

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:29:08.503

客户端的空闲超时通常由服务器端确定。

下面是一些比较不明显的客户端参数：

*   soTimeout - 确定客户端阻塞等待消息的时间。通常，您会每隔一段时间轮询一次套接字，这决定了您在轮询期间等待的时间。
*   soLinger - 确定调用 close() 后保持连接的时间。

根据我使用 FTP 的经验，如果连接关闭，它们通常只是重新连接 - 与其他应用程序不同，保持不间断的连接通常并不重要。

您使用 FTP 做什么 - 通常不是时间关键的服务...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T15:41:23.910

至于**ClientPools**，我碰巧写了一个演示项目。 [公共池-ftp](https://github.com/Honwhy/commons-pool-ftp)

我对 ftp 协议有点恼火，根据我们的经验，在刚刚从池中获取的客户端上进行测试时，它会遇到*损坏的管道。*

`testOnBorrow=true`

# jmeter - Jmeter 请求执行

> ID：15134478
> 
> 赞同：2
> 
> 时间：2013-02-28T11:32:45.857
> 
> 标签：jmeter

我试图了解 jmeter 的核心行为。
假设我正在无限循环中执行 HTTP 请求（单个用户和单个采样器，但变量值不同）。
在上述情况下，jmeter 是否发送请求并在发送下一个请求之前等待响应，或者它在不等待响应的情况下发送请求？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T16:06:57.097

Jmeter 使用基于线程的模型，其中每个线程将在发送另一个请求之前等待响应。换句话说，它只会以应用程序所能承受的速度驱动负载。
在 JMeter 中，您可以在 ThreadGroup 中指定多个线程，这些线程等同于虚拟用户，并且这些线程会尝试尽可能多地执行脚本。

* * *

如果你想保持一个恒定的速率，你可以使用多个线程并使用一个[Constant Throughput Timer](http://jmeter.apache.org/usermanual/component_reference.html#Constant_Throughput_Timer)来设置请求速率：如果有足够的线程，即使一些线程正在等待响应，也应该可以保持该速率。这里也属于更灵活的自定义[吞吐量整形定时器。](http://code.google.com/p/jmeter-plugins/wiki/ThroughputShapingTimer)

另一种可能性似乎是使用例如来自[jmeter 插件的](http://code.google.com/p/jmeter-plugins/)[Ultimate Thread Group](http://code.google.com/p/jmeter-plugins/wiki/UltimateThreadGroup)或[Stepping Thread Group](http://code.google.com/p/jmeter-plugins/wiki/SteppingThreadGroup)。

在这种情况下，您还可以`Response Timeout`查看任何 jmeter 的采样器可用的字段 - 等待响应的毫秒数。

# jquery - 从 jQuery 集合中提取和操作对象

> ID：15134484
> 
> 赞同：1
> 
> 时间：2013-02-28T11:33:22.080
> 
> 标签：jquery, object, collections, reference

我正在使用 jQuery 创建一个典型的列表项集合，如下所示：

**HTML**

```
<ul id="slides">
  <li>Slide 1</li>
  <li>Slide 2</li>
  <li>Slide 3</li>
  <li>Slide 4</li>
</ul> 
```

**jQuery**

```
var $slides = $('#slides li'); 
```

然后我想做的是识别集合中当前可见的幻灯片，然后从该幻灯片过渡到下一张。

我认为以下内容将*只是工作™*，但该变量不是对象引用，而是`$current`包含目标幻灯片标记的字符串文字：

**jQuery**

```
var $current = $slides[0];
    console.log($current); // returns "<li>Slide 1</li>" and not [object] 
```

我不明白我在这里做错了什么。

我希望上面的内容能给我一个对我在集合中选择的对象的唯一引用，但我不明白为什么 jQuery 在这里不能那样工作，而是决定给我一个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:36:54.230

尝试

```
$(function()
{
    var $slides = $('#slides li');
    var $current = $($slides[0]);
    console.log($current); 
}); 
```

`$('#slides li')`和之间的区别`$('#slides')`是首先选择所有`li` `object`而第二个只是选择整个`ul#slides`，`object`所以你不能首先访问`li`，`$slides[0]`因为它总是会返回`ul object`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:37:50.080

它*是*对元素的引用。但是，您在控制台中看到的是该元素的依赖于浏览器的字符串表示形式——在本例中为`outerHTML`.

看看[这个 jsFiddle 演示](http://jsfiddle.net/gxTcU/1/)的控制台输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:40:19.247

尝试这样做：

```
 var $slides = $('#slides li');
 var $current = $slides[0]; 
```

您可以像这样操作当前幻灯片，例如：

```
 $($current).fadeOut(); 
```

编辑：刚刚看到 Dipesh Parmar 的回答，你也可以这样做；）

只是不要忘记您使用的是字符串，如果您需要 jquery 使用该字符串，因为它是一个对象，请将其放入 $()

# ios - 即使应用程序未处于活动状态，在 iOS 中接收推送通知也不会发出警报消息

> ID：15134485
> 
> 赞同：1
> 
> 时间：2013-02-28T11:33:27.057
> 
> 标签：ios, geolocation, push-notification, apple-push-notifications

来自 Apple 的推送通知指南：

> 如果通知到达时目标应用程序未运行，则会播放或显示警报消息、声音或标记值。如果应用程序正在运行，iOS 会将其作为 NSDictionary 对象传递给应用程序委托。该字典包含相应的 Cocoa 属性列表对象（加上 NSNull）。

我已经在我的应用程序中实现了这一点，一切正常。如果应用程序处于焦点位置，则应用程序会直接获取消息。如果未激活，则会显示警报，当用户单击警报时应用程序启动，最后应用程序获取消息。

但是，如果在应用程序未激活时收到消息，是否有可能让 iOS 激活应用程序并在不显示任何消息或需要任何用户交互的情况下传递消息？

我喜欢这种行为，因为来自我的服务器的推送消息*可能*只对用户感兴趣，具体取决于她当前的位置。该应用程序的工作方式如下：当它启动时，它注册推送并告诉我的服务器：我在这个位置，希望在我附近发生有趣的事情时得到通知。稍后服务器会发送一条消息，但由于用户可能已经离开该区域，我希望应用程序再次检查用户的位置，如果她现在离原始位置太远，不要打扰用户。

我想可以有一个后台服务，每隔*n*分钟通知服务器当前位置，但我担心这会耗尽电池。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:52:31.153

不幸的是，在 iOS 中，您不能在收到通知时直接打开您的应用程序。用户必须通过系统显示的警报选择自己打开它。

但是，使用后台位置并不是对电池不友好。这取决于您为`CLLocationManager`对象设置的位置精度。

有关位置准确性的所有信息都可以在这里找到：[位置感知编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)

在您的情况下，您可能希望使用**显着的位置更改**方法或`kCLLocationAccuracyKilometer`准确性。

这是一个很好的入门教程：[iOS 多任务处理：后台位置](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/)

希望这会有所帮助。

# javascript - 带有 JSON 字符串化对象的 javascript indexOf

> ID：15134489
> 
> 赞同：3
> 
> 时间：2013-02-28T11:33:44.923
> 
> 标签：javascript, jquery

我试图找出一个字符串是否存在，如下所示：

```
var test1 = '{"packageId":"1","machineId":"1","operationType":"Download"},{"packageId":"2","machineId":"2","operationType":"Download"}';

alert("found: " + test1.indexOf('{"packageId":"1","machineId":"1","operationType":"Download"}', 0)); 
```

但是，结果始终为 0。

是什么赋予了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T11:35:22.720

以防万一这不是玩笑...

`String.prototype.indexOf`返回目标字符串中匹配字符串的出现，因为您只需查找该行的第一次出现，它正确返回零。

如果您修改搜索字符串（例如使用一些随机字母），您将得到`-1`结果，因为它不会被找到。

有一种使用*二元非*运算符的做法，几乎可以将结果从`.indexOf()`下降到布尔表达式。这看起来像

```
var res = test1.indexOf('{"packageId":"1","machineId":"1","operationType":"Download"}');

if( ~res ) {
   // we have a match
} else {
   // no match at all
} 
```

无需详细说明，*not*运算符将从字节中取反每个位，以及用于确定值是正数还是负数的*额外位。*因此，由于在 ECMAscript 中只有很少的值被评估为*falsy values*，因此负值将评估为`true`。

要真正得到布尔结果，它看起来像

```
if( !!~res ) { } 
```

在这种情况下，这又不是真正必要的。

使用（数组也是如此）获得“正确”结果的更常用的做法`.indexOf()`是检查结果是否大于`-1`

```
if( res > -1 ) { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:46:11.000

是的，它的正确 indexOf 将返回您提到的字符串的起始索引，即 y 它给出 0。如果字符串不存在，则返回 -1

一些示例示例 var sample="welcome to javascript";

```
alert ( sample.indexOf("welcome",0)); // return 0

alert ( sample.indexOf("come",0)); // return 3

alert ( sample.indexOf("came",0)); // return -1

alert ( sample.indexOf("javascript",0)); // return 11 
```

匹配 ：

```
if(sample.indexOf("welcome",0)>-1)
    alert("match");
else
    alert("Not match")l 
```

# asp.net - 在 Sharepoint 2013 发布页面上的 UpdatePanel 中回发后页面刷新

> ID：15134496
> 
> 赞同：1
> 
> 时间：2013-02-28T11:34:07.503
> 
> 标签：asp.net, ajax, sharepoint, updatepanel

当我尝试在第一个完成之前在 Firefox 的 sharepoint 2013 上的 UpdatePanel 中执行第二个 xmlhttprequest 时，我会刷新整个页面。第一个请求状态为 Aborted。第二个请求响应是：1|#||4|97|pageRedirect||%2f_login%2fdefault.aspx%3fReturnUrl%3d%252fsites%252ftest%252fPages%252fUpdatePanelTest.aspx|

可以使用附加代码重现此错误（快速单击按钮两次会产生错误）。

仅当我将具有此控件的 Web 部件放置在 Sharepoint 2013 上的发布页面上时，才会出现此问题。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="TestUpdatePanel.ascx.cs"
Inherits="Example.TestUpdatePanel" %><asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button" />
    <asp:CheckBoxList runat="server" ID="CheckboxList1" AutoPostBack="true">
        <asp:ListItem Text="CheckBox1" Value="valueFromCheckBox1" />
        <asp:ListItem Text="CheckBox2" Value="valueFromCheckBox2" />
        <asp:ListItem Text="CheckBox3" Value="valueFromCheckBox3" />
        <asp:ListItem Text="CheckBox4" Value="valueFromCheckBox4" />
        <asp:ListItem Text="CheckBox5" Value="valueFromCheckBox5" />
    </asp:CheckBoxList>
</ContentTemplate></asp:UpdatePanel><asp:UpdatePanel ID="UpdatePanel2" runat="server">
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="CheckboxList1" EventName="SelectedIndexChanged" />
</Triggers>
<ContentTemplate>
    <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
    <asp:Button ID="Button2" runat="server" OnClick="Button2_Click" Text="Button" />
    <br />
    <asp:Label ID="Label3" runat="server" Text="Label"></asp:Label>
</ContentTemplate></asp:UpdatePanel>

    protected void Page_Load(object sender, EventArgs e)
    {
        CheckboxList1.SelectedIndexChanged += CheckboxList1_SelectedIndexChanged;
    }

    private void CheckboxList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        System.Threading.Thread.Sleep(3000);
        Label3.Text = CheckboxList1.SelectedValue;
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        System.Threading.Thread.Sleep(3000);
        Label1.Text = "Button1_Click";
    }
    protected void Button2_Click(object sender, EventArgs e)
    {
        System.Threading.Thread.Sleep(3000);
        Label2.Text = "Button2_Click";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:24:33.987

默认情况下，更新面板在 SP 2013 中不起作用。您必须按照以下文章进行修复：

[http://msdn.microsoft.com/en-us/library/bb861877.aspx](http://msdn.microsoft.com/en-us/library/bb861877.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:05:04.810

您是否有意允许用户在已经有请求的情况下提交回发请求？如果这是无意的，您可能需要考虑在服务器端方法运行时禁用用户控件。这可以通过 UpdateProgress 控件来完成。这个想法是您可以使用此控件在回发发生时弹出一个覆盖整个应用程序的 div。它可以这样使用：

```
<asp:UpdateProgress ID="UpdateProgress1" AssociatedUpdatePanelID="UpdatePanel1" runat="server" >
   <ProgressTemplate >
      <div id="wait" style="width:100%; height:100%; 
               position:absolute; top:0; left:0; z-index:1000;background-color: #666699; 
               filter: alpha(opacity=80); text-align:center; vertical-align:middle;">
         <div style="border:5px solid black; width:200px; height:50px; 
               background- color:White; top:50%; position:absolute;">
                Saving changes.  Please wait...                                       
         </div>                                       
      </div>                                      
   </ProgressTemplate>
</asp:UpdateProgress> 
```

# mysql - 使用公共键存储多个值但在 MYSQL 中保持表短？

> ID：15134498
> 
> 赞同：0
> 
> 时间：2013-02-28T11:34:10.977
> 
> 标签：mysql, performance

我有三个表用户、会议和会议内容。

用户在创建会议时可以从 meetingContent 中选择不同的行。

我想创建一个表来记录每个会议使用了 meetingContent 中的哪些行。

在该系统的先前但类似的版本中，有一个名为 meeting_meetingContent 的表，该表在存储用于每个会议时的每个案例时包含大量行。

我不确定这是否可能是最有效的方式，但似乎可以对其进行一些简化。有没有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:50:15.077

也许你可以尝试像 MongoDB 这样的 NoSQL。[在这里](http://www.mongodb.org/)
查看介绍。 在我看来，也许 NoSQL 会比 SQL 更好。您所做的只是将会议内容直接保存到数据库中，并通过阅读内容显示。

# ruby-on-rails - ruby on rails 使用 Typeahead (bootstrap) 实现自动完成搜索

> ID：15134500
> 
> 赞同：0
> 
> 时间：2013-02-28T11:34:19.510
> 
> 标签：ruby-on-rails, ruby, autocomplete, bootstrap-typeahead

我想在我的搜索栏中添加自动完成功能。但是当我提交完整的用户时，我得到了这个 url：

`/users?utf8=✓&amp;search=Thomas`

代替`/users/23`

我的控制器

```
@users = User.find(:all, :select=>'name').map(&:name) 
```

Javascript

```
 <%= javascript_tag "var autocomplete_items = #{ @users };" %>

 <script type="text/javascript">
            jQuery(document).ready(function() {
                $('#auto_complete').typeahead({source: autocomplete_items});
            });
 </script> 
```

我的表格

```
<%= form_tag users_path, :method => :get do %>
  <%= text_field_tag :search, params[:search], :id => "auto_complete" %>
<% end %> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:41:50.447

从我可以从 Bootstrap 文档中收集到的信息，`typeahead`它只是为了做到这一点而设计的——在文本之前输入。它只接受您的输入，查看其源中是否有与输入匹配的内容，并提供一些替代方法来完成输入。如果用户选择了一个替代项，typeahead 将填充选定的字符串。

所以你唯一得到的是输入字段中的一个字符串。

Typeahead 不知道如何构建您需要的链接：`/uses/23`

如果 Bootstrap typeahead 知道如何执行此操作，则您没有向它提供所需的信息，因为您只向它提供了用户的名称。

我想你想做的是：

*   将用户名和用户路径发送到视图
*   使用某种可以在选择项目时触发回调的自动完成小部件。
*   选择用户时使用回调导航到选定的用户路径

我对 Bootstrap 的预输入并不完全熟悉——你也许可以用它来做这些事情。

但我主张使用文档更好的东西，比如 jQuery UI:s autocomplete。

# ruby-on-rails - Rails 资产管道 - 不预编译子目录

> ID：15134504
> 
> 赞同：1
> 
> 时间：2013-02-28T11:34:39.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

在 assets/stylesheets 和 assets/javascripts 中，我都有一个名为 admin 的文件夹，其中包含一些适当的 Coffeescript 和 SASS 文件。

```
$ cat app/assets/javascripts/admin.js 
//= require jquery
//= require jquery_ujs
//= require_tree ./admin

$ cat app/assets/stylesheets/admin.css 
/*
*= require_self
*= require_tree ./admin
*/

$ cat config/application.rb | grep 'assets.paths'
config.assets.paths << "#{Rails.root}/app/assets/stylesheets/admin"
config.assets.paths << "#{Rails.root}/app/assets/javascripts/admin" 
```

预编译后，管理员文件夹（及其内容）在公共/资产中无处可见。

我可能在这里犯了一个根本性的错误；除了图像、application.js 等基础知识之外，我几乎没有玩过管道。

谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:15:44.693

据我所知，它们是清单。默认情况下，仅预编译 application.css 和 application.js。其他需要补充。

您需要将它们添加到 production.rb 环境中，如下所示（注释来自文件本身）：

```
# Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
config.assets.precompile += %w( admin.css admin.js ) 
```

此外，您可以放弃`config.assets.paths`application.rb 中的 ，因为默认情况下会加载这些路径。

# python - 如何将 Pandas 中的 TimeSeries 对象转换为整数？

> ID：15134507
> 
> 赞同：2
> 
> 时间：2013-02-28T11:34:50.617
> 
> 标签：python, pandas, time-series

我一直在使用 Pandas 来计算特定装置上运动员的年龄，尽管它作为 TimeSeries 类型返回。

我现在希望能够根据固定日期绘制年龄（以天为单位），但无法弄清楚如何将 TimeSeries 对象转换为整数。任何人都可以帮忙吗？

这是数据的形状。

```
squad_date['mean_age']
2008-08-16     11753 days, 0:00:00
2008-08-23     11760 days, 0:00:00
2008-08-30     11767 days, 0:00:00
2008-09-14     11782 days, 0:00:00
2008-09-20     11788 days, 0:00:00 
```

这就是我想要的：

```
2008-08-16     11753
2008-08-23     11760
2008-08-30     11767
2008-09-14     11782
2008-09-20     11788 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T12:53:10.860

对于通过谷歌找到这篇文章的人，如果你有 numpy >= 0.7 和 pandas 0.11，这些解决方案将不起作用。有什么作用：

```
squad_date['mean_age'].apply(lambda x: x / np.timedelta64(1,'D')) 
```

官方 Pandas 文档在这里可能会造成混淆。他们建议执行“x.item()”，其中 x 已经是 timedelta 对象。x.item() 将从 timedelta 对象中以 int 值的形式检索差异。如果那是'ns'，你会得到一个整数，例如纳秒数。所以这将给出一个整数除以 timedelta 错误；将 timedeltas 直接除以彼此确实有效（并将其转换为 Days，如第二部分中的“D”）。

我希望这对将来的人有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:03:53.273

你需要掌握这个（0.11-dev）

```
In [40]: x = pd.date_range('20130101',periods=5)

In [41]: td = pd.Series(x,index=x)-pd.Timestamp('20130101')

In [43]: td
Out[43]: 
2013-01-01           00:00:00
2013-01-02   1 days, 00:00:00
2013-01-03   2 days, 00:00:00
2013-01-04   3 days, 00:00:00
2013-01-05   4 days, 00:00:00
Freq: D, Dtype: timedelta64[ns]

In [44]: td.apply(lambda x: x.item().days)
Out[44]: 
2013-01-01    0
2013-01-02    1
2013-01-03    2
2013-01-04    3
2013-01-05    4
Freq: D, Dtype: int64 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:33:41.440

我这样做的方式：

```
def conv_delta_to_int (dt):
    return int(str(dt).split(" ")[0].replace (",", ""))

squad_date['mean_age'] = map(conv_delta_to_int, squad_date['mean_age']) 
```

# jsp - 将标记文件（jstl 自定义标记）包含到 jsp 中的可能方法

> ID：15134509
> 
> 赞同：0
> 
> 时间：2013-02-28T11:34:53.883
> 
> 标签：jsp, tags, include, jstl

除了通过 .tld 文件，还有其他可能的方法将标记文件（jstl 自定义标记）包含到 jsp 文件中吗？

是否可以使用包含机制？`<jsp:include page="bla.tagx"/>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:12:34.153

您不需要任何 .tld 文件即可使用作为标记文件实现的标记。标记必须简单地放在 下`WEB-INF/tags`，并在 JSP 中使用

```
<%@ taglib tagdir="/WEB-INF/tags" prefix="myTags" %> 
```

更多信息[在这里](http://docs.oracle.com/javaee/5/tutorial/doc/bnama.html)。

# google-maps-sdk-ios - 如何使用适用于 iOS 的 google maps sdk 拟合坐标数组的边界？

> ID：15134511
> 
> 赞同：31
> 
> 时间：2013-02-28T11:35:00.643
> 
> 标签：google-maps-sdk-ios

如何使用适用于 iOS 的 google maps sdk 拟合坐标数组的边界？我需要为 4 个可见标记缩放地图。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-07-15T12:20:32.407

这是我对这个问题的解决方案。`GMSCoordinateBounds`通过多个坐标构建对象。

```
- (void)focusMapToShowAllMarkers
{       
    CLLocationCoordinate2D myLocation = ((GMSMarker *)_markers.firstObject).position;
    GMSCoordinateBounds *bounds = [[GMSCoordinateBounds alloc] initWithCoordinate:myLocation coordinate:myLocation];

    for (GMSMarker *marker in _markers)
        bounds = [bounds includingCoordinate:marker.position];

    [_mapView animateWithCameraUpdate:[GMSCameraUpdate fitBounds:bounds withPadding:15.0f]];
} 
```

**更新答案**：由于`GMSMapView` *标记*属性已被弃用，您应该将所有标记保存在您自己的数组中。

更新了 swift 3 答案：

```
 func focusMapToShowAllMarkers() {
        let firstLocation = (markers.first as GMSMarker).position
        var bounds = GMSCoordinateBoundsWithCoordinate(firstLocation, coordinate: firstLocation)

        for marker in markers {
            bounds = bounds.includingCoordinate(marker.position)
        }
        let update = GMSCameraUpdate.fitBounds(bounds, withPadding: CGFloat(15))
        self.mapView.animate(cameraUpdate: update)
  } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-24T12:48:25.730

**Lirik 回答的**Swift 3.0版本：****

 **```
func focusMapToShowAllMarkers() {
    let myLocation: CLLocationCoordinate2D = self.markers.first!.position
    var bounds: GMSCoordinateBounds = GMSCoordinateBounds(coordinate: myLocation, coordinate: myLocation)

    for marker in self.markers {
        bounds = bounds.includingCoordinate(marker.position)
        self.mapView.animate(with: GMSCameraUpdate.fit(bounds, withPadding: 15.0))
    }
} 
```

这是我自己的方式：

```
func focusMapToShowMarkers(markers: [GMSMarker]) {

    guard let currentUserLocation = self.locationManager.location?.coordinate else {
        return
    }

    var bounds: GMSCoordinateBounds = GMSCoordinateBounds(coordinate: currentUserLocation,
                                                          coordinate: currentUserLocation)

    _ = markers.map {
        bounds = bounds.includingCoordinate($0.position)
        self.mapView.animate(with: GMSCameraUpdate.fit(bounds, withPadding: 15.0))
    }
} 
```

你可以像这样调用我上面的函数：

`self.focusMapToShowMarkers(markers: [self.myLocationMarker, currentPokemonMarker])`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-16T08:59:20.877

**Lirik 回答的**Swift 5版本：****

 **```
 func focusMapToShowAllMarkers() {

        if arrMarkers.count > 0 {
            let firstLocation = (arrMarkers.first!).position
            var bounds = GMSCoordinateBounds(coordinate: firstLocation, coordinate: firstLocation)

            for marker in arrMarkers {
              bounds = bounds.includingCoordinate(marker.position)
            }

           let update = GMSCameraUpdate.fit(bounds, withPadding: CGFloat(15))
           self.mapView.animate(with: update)
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-21T09:12:15.077

暂时，谷歌终于实现了 GMSCoordinateBounds，你可以通过 GMSCameraUpdate 来使用它。

详情请查看官方[参考](https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_coordinate_bounds)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-02T14:38:41.737

我们可以使用如下代码简化这一点：

```
extension Array where Element: GMSMarker {
  func encompassingCoordinateBounds() -> GMSCoordinateBounds {
    reduce(GMSCoordinateBounds(), { $0.includingCoordinate($1.position) })
  }
} 
```

呼叫站点希望：

```
let markers = [GMSMarker]()
let encompassingCoordinateBounds = markers.encompassingCoordinateBounds() 
```****

# wpf - 在 WPF 中处理附加事件的附加行为

> ID：15134514
> 
> 赞同：0
> 
> 时间：2013-02-28T11:35:07.693
> 
> 标签：wpf, xaml, events, attachedbehaviors

我用谷歌搜索了这个问题，但无法收集任何信息，我想知道附加行为是否有可能处理附加事件？

我有一个在类中声明的事件和一个附加到 TextBox 控件的行为，单击按钮时将引发该事件。我在我的行为中添加了这个事件的处理程序，并在事件处理程序中编写了逻辑，但它没有被执行。所以，我想知道附加行为是否有可能处理附加事件？

```
class ResetInputEventClass
{
    public static readonly RoutedEvent ResetInputEvent =  EventManager.RegisterRoutedEvent("ResetInput",
      RoutingStrategy.Bubble,
      typeof(RoutedEventHandler),
      typeof(ResetInputEventClass));

    public static void AddResetInputEventHandler(DependencyObject d, RoutedEventHandler handler)
    {
        UIElement uie = d as UIElement;
        if (uie == null)
        {
            return;
        }
        uie.AddHandler(ResetInputEventClass.ResetInputEvent, handler);
    }

    public static void RemoveResetInputEventHandler(DependencyObject d, RoutedEventHandler handler)
    {
        UIElement uie = d as UIElement;
        if (uie == null)
        {
            return;
        }
        uie.RemoveHandler(ResetInputEventClass.ResetInputEvent, handler);
    }
} 
```

那是我的事件类，这就是我在行为中处理它的方式

```
public class MyBehavior : Behavior<TextBoxBase>
{
    public MyBehavior()
    {
        // Insert code required on object creation below this point.

    }        

    protected override void OnAttached()
    {
        base.OnAttached();
        // Insert code that you would want run when the Behavior is attached to an object.
        ResetInputEventClass.AddResetInputEventHandler(AssociatedObject, OnResetInputEvent);
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        // Insert code that you would want run when the Behavior is removed from an object.
        ResetInputEventClass.RemoveResetInputEventHandler(AssociatedObject, OnResetInputEvent);
    }

    private void OnResetInputEvent(Object o, RoutedEventArgs e)
    {
        //Logic
    }
} 
```

这是我的 XAML 代码：

```
<Grid x:Name="LayoutRoot">
    <StackPanel>
        <TextBox Margin="5" Text="Bye" TextWrapping="Wrap" Width="150">
            <i:Interaction.Behaviors>
                <local:MyBehavior/>
            </i:Interaction.Behaviors>
        </TextBox>
        <TextBox Margin="5" Text="Bye" TextWrapping="Wrap" Width="150">
            <i:Interaction.Behaviors>
                <local:MyBehavior/>
            </i:Interaction.Behaviors>
        </TextBox>
        <Button Name="MyButton" Content="Save" Width="50" Height="25" Click="MyButton_Click"/>
    </StackPanel>
</Grid> 
```

我在按钮的点击事件中引发事件

```
private void MyButton_Click(object sender, RoutedEventArgs e)
{
    RoutedEventArgs eventArgs = new RoutedEventArgs(ResetInputEventClass.ResetInputEvent,e.OriginalSource);
    RaiseEvent(eventArgs);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-14T20:56:30.423

你的问题很简单。文本框已为该事件注册，但文本框的父级正在引发它。因此，处理程序永远不会被调用。您可以更改事件以使其成为隧道事件而不是冒泡事件。或者您可以处理您的文本框（在后面的代码中给它一个名称和引用）。并让它引发事件。

```
<Grid x:Name="LayoutRoot">
<StackPanel>
<TextBox Margin="5" x:Name="byeTextBox" Text="Bye" TextWrapping="Wrap" Width="150">
                    <i:Interaction.Behaviors>
                        <local:MyBehavior/>
                    </i:Interaction.Behaviors>
                </TextBox>
<Button Name="MyButton" Content="Save" Width="50" Height="25" Click="MyButton_Click"/>
</StackPanel>
</Grid> 
```

您的代码隐藏应如下所示

```
private void MyButton_Click(object sender, RoutedEventArgs e)
        {
            RoutedEventArgs eventArgs = new RoutedEventArgs(ResetInputEventClass.ResetInputEvent,e.OriginalSource);
            byeTextBox.RaiseEvent(eventArgs);
        } 
```

那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T14:47:20.810

当然这是可能的。给我看你的 XAML，我会告诉你附加的事件如何触发附加的行为。

**编辑**：

我不明白为什么你需要使用附加行为和附加事件，因为你可以在代码后面做所有事情。

**以下是如何在后面的代码中执行所有操作：**

这是没有附加属性的 XAML：

```
<Grid>
        <StackPanel>
            <TextBox x:Name="txtBox" Margin="5" Text="Bye" TextWrapping="Wrap" Width="150"/>
            <Button Name="MyButton" Content="Save" Width="50" Height="25" Click="MyButton_Click"/>
        </StackPanel>
</Grid> 
```

这是后面的代码。

```
 public MainWindow()
    {
        InitializeComponent();
    }

    private void MyButton_Click(object sender, RoutedEventArgs e)
    {
        this.txtBox.Text = "hello";
    } 
```

因为你已经设置了 Name 属性`TextBox`，`Button`你可以从 Window.cs 后面的代码中访问它们，你可以轻松地编写你的处理程序。

**以下是使用附加属性执行所有操作的方法：**

这是带有附加属性的解决方案的新 XAML。我必须创建我的自定义交互，因为您使用的是 Expression Blend 或 silverlight 而不是纯 WPF。

```
<Grid x:Name="LayoutRoot">
        <StackPanel i:Interaction.Behaviour="True">
            <TextBox x:Name="txtBox" Margin="5" Text="Bye" TextWrapping="Wrap" Width="150"/>
            <Button Name="MyButton" Content="Save" Width="50" Height="25" Click="MyButton_Click"/>
        </StackPanel>
    </Grid> 
```

我必须设置行为，`True`因为默认值是`false`，当值不等于旧时，将使用我的自定义逻辑调用属性更改事件，如下所示：

```
private void MyButton_Click(object sender, RoutedEventArgs e)
    {
        RoutedEventArgs eventArgs = new RoutedEventArgs(ResetInputEventClass.ResetInputEvent,e.OriginalSource);
        RaiseEvent(eventArgs);
    }

 public class Interaction : DependencyObject
{
    // Using a DependencyProperty as the backing store for Behaviour.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BehaviourProperty =
        DependencyProperty.RegisterAttached("Behaviour", typeof(bool), typeof(Interaction), new PropertyMetadata(false, new PropertyChangedCallback(OnBehaviourChanged)));

    private static void OnBehaviourChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        StackPanel sp = (StackPanel)d;
        sp.Dispatcher.BeginInvoke(new Action(() =>
        {
            TextBox tb =  VisualTreeHelper.GetChild(sp, 0) as TextBox;

            ResetInputEventClass.AddResetInputHandler(sp, new RoutedEventHandler((o, a) =>
            {
                // Do here whatever you want, call your custom expressions.
                tb.Text = "hello";
            }));

        }), System.Windows.Threading.DispatcherPriority.Background);
    }
} 
```

内部属性更改事件将被调用，正如我在更改`false`为`true`. 我通过告诉调度程序在应用程序处于后台时执行我的代码来等到一切都被初始化。然后我找到并注入在您触发事件`TextBox`时将调用的处理程序。`ResetInput`

这是一个非常复杂的解决方案，但它适用于附加事件和附加属性。

**我强烈建议您在这种情况下使用背后的代码。**

你在`ResetInputEventClass`课堂上也犯了一个错误。添加和删​​除方法拼写不正确。

你应该这样写它们：

```
public static void AddResetInputHandler(DependencyObject d, RoutedEventHandler handler)
    {
        UIElement uie = d as UIElement;
        if (uie == null)
        {
            return;
        }
        uie.AddHandler(ResetInputEventClass.ResetInputEvent, handler);
    }

    public static void RemoveResetInputHandler(DependencyObject d, RoutedEventHandler handler)
    {
        UIElement uie = d as UIElement;
        if (uie == null)
        {
            return;
        }
        uie.RemoveHandler(ResetInputEventClass.ResetInputEvent, handler);
    } 
```

玩得开心，希望能帮到你。

你也可以通过`Commands`

# oracle-adf - 如何在 Adf fusion 应用程序中从 Jazn-data.xml 文件中的网页创建或分配角色和资源

> ID：15134517
> 
> 赞同：0
> 
> 时间：2013-02-28T11:35:13.130
> 
> 标签：oracle-adf, jdeveloper

我在 Oracle Jdeveloper 11g 中制作了一个融合 Web 应用程序，使用 Oracle 平台安全服务 (OPSS) 进行身份验证和授权制作 LoginBean..创建登录、错误和欢迎页面，还创建了菜单，可以访问不同的页面和菜单在 Jazn-data.xml 文件中创建的角色（如 SuperAdmin、CompanyAdmin、经理和用户等角色）。现在我想要的是，而不是创建企业、应用程序角色和自定义资源来控制 UI 组件（隐藏和取消隐藏菜单）等）直接从 Jazn 文件中进行相同的操作可以通过应用程序中的网页完成，管理员可以访问其访问权限，他可以直接创建用户、角色和资源，并将它们分配给来自网络的不同用户和应用程序角色页。

有什么方法可以让我们通过 adf fusion 应用程序中的 jazn-data.xml 文件中的网页执行所有活动，例如创建用户、角色、资源和分配？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:52:59.430

该方法已经存在 getAllUserRoles 将获取所有角色。另外我认为你的意思是你没有使用 OID 而不是 LDAP（因为它只是一个协议）。您可以使用嵌入式 ldap 提供程序，只需将实现类切换为 weblogic 提供程序类而不是 OID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:35:35.007

您将需要编写一个与您的安全存储库公开的 API 进行通信的网页，以管理用户/角色。这是一个带有 OID 的示例 - [http://ramannanda.blogspot.com/2011/09/opss-adf-security-utility.html](http://ramannanda.blogspot.com/2011/09/opss-adf-security-utility.html)

# java - Spring shell 彩色输出

> ID：15134520
> 
> 赞同：5
> 
> 时间：2013-02-28T11:35:21.843
> 
> 标签：java, spring-shell

我想在 spring-shell 中为我的控制台输出着色。就像是：

```
System.out.println("\red; red text"); 
```

我知道彩色的 JUL 日志输出，但这还不够。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-04T14:41:35.827

您可以在输出中使用 Ansi 值。

这是我的课程，其中包含一些颜色常量：

```
public class AnsiConstants {
  public static final String ANSI_RESET = "\u001B[0m";
  public static final String ANSI_BLACK = "\u001B[30m";
  public static final String ANSI_RED = "\u001B[31m";
  public static final String ANSI_GREEN = "\u001B[32m";
  public static final String ANSI_YELLOW = "\u001B[33m";
  public static final String ANSI_BLUE = "\u001B[34m";
  public static final String ANSI_PURPLE = "\u001B[35m";
  public static final String ANSI_CYAN = "\u001B[36m";
  public static final String ANSI_GRAY = "\u001B[37m";
  public static final String ANSI_WHITE = "\u001B[37;1m"; 
} 
```

您的示例可以通过以下方式生成：

```
System.out.println(ANSI_RED + "red text" + ANSI_RESET); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-15T14:34:16.103

如果您基于 Spring Boot，使用[AnsiOutput](http://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/ansi/AnsiOutput.html "Ansi输出")和[AnsiColor](http://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/ansi/AnsiColor.html "AnsiColor")应该可以工作。例子：

```
@SpringBootApplication
public class Application {

  @EventListener
  public void onApplicationReady(ApplicationReadyEvent event) {
    System.out.println(AnsiOutput.toString(
        AnsiColor.GREEN, "Service started successfully", AnsiColor.DEFAULT));
  }

  @EventListener
  public void onApplicationFailed(ApplicationFailedEvent event) {
    System.err.println(AnsiOutput.toString(
        AnsiColor.RED, "Service startup failed", AnsiColor.DEFAULT));
  }

  public static void main(String[] args) {
    SpringApplication.run(Application.class, args);
  }

} 
```

# inversion-of-control - 洋葱架构与 IoC 矛盾吗

> ID：15134530
> 
> 赞同：2
> 
> 时间：2013-02-28T11:35:46.570
> 
> 标签：inversion-of-control, onion-architecture

Jeffrey Palermo 开创了洋葱架构，我找到了一个很好的方法。

[http://www.headspring.com/jeffrey/onion-architecture-part-4-after-four-years/](http://www.headspring.com/jeffrey/onion-architecture-part-4-after-four-years/)

然而，如果我的理解是正确的，他的声明“内层定义接口。外层实现接口”似乎与 IoC 相矛盾，它指出消费者定义接口和提供者实现它，即控制权在于消费者而不是提供者。

这个原则对我来说很有意义，因为，假设你正在编写一个 UI，这个原则意味着你可以继续创建你的 UI，而不需要对你将要调用的服务一无所知，因为你负责定义暴露所有服务的接口您需要的功能。

因此，为此，Jeffreys 的声明似乎自相矛盾，让我对将合同（接口定义）放在哪里感到困惑，因为它似乎暗示： Domain Layer MyEntity IMyService Service MyEntityService : IMyService

由于域下面没有层，我将 IMyEntity 放在哪里。这也意味着在域存在并定义 IMyService 之前，我无法创建演示项目。

正如我的旁注，我在哪里放置 IMyEntityRepository 和 MyEntityRepository ？由于服务依赖于 IMyEntityRepository 而 MyEntityRepository 依赖于 IMyEntity

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:24:14.763

那么，从哪里开始呢？:-)

让我们从国际奥委会的真正角色开始。根据[维基百科](http://en.wikipedia.org/wiki/Inversion_of_control)，

> 控制反转是一种编程技术，其中对象耦合在运行时由汇编程序对象绑定，并且通常在编译时不知道。

在您的情况下，您的 UI 将在不知道将在运行时绑定的服务实现的情况下操作服务接口。定义这些服务接口不是由消费者决定的；它们将在您的 Onion 架构的应用程序核心中定义，但我们稍后会看到。

“内层定义接口，外层实现接口”，洋葱架构就是这样设计的，但别忘了最外层是IOC！由 IOC 在运行时将接口与正确的实现绑定！

您说得对，如果没有至少一种可用于您将操作的接口的实现，您的 UI 将无法工作。但在这种情况下，如果出于任何原因需要先构建 UI，请考虑使用模拟框架！

您的最后一个问题是关于您需要放置 IMyEntityRepository 和 MyEntityRepository 类的位置。好吧，这很容易；-) IMyEntityRepository 肯定需要放在您的应用程序核心中。您的所有实体、服务接口、存储库接口以及任何需要位于同一位置的接口。MyEntityRepository 实现应该放在基础设施层的某个地方，因为他的角色主要是处理从数据库中获取数据。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T16:17:01.057

我与 Jeffrey 共事多年，我想说 IoC 是使 Onion Architecture 成为可能不可或缺的一部分。外部依赖项的接口在具有很少（如果有的话）依赖项的项目中定义（换句话说，位于洋葱“中心”的项目）。实现那些依赖于外部依赖项的接口的类位于洋葱边缘/表面的项目中。因此，需要 IoC 容器在运行时将洋葱边缘的类实现“连接”到洋葱核心的接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T19:01:06.387

我们已经在我的项目中实现了 Onion，它在概念上非常简单。

1.  创建一个只包含接口和 POCO 的项目，我们现在称之为 Contract
2.  创建一个或多个项目，其中包含您的接口和所有 3rd 方的实现，例如 NHibernate 映射，我们称之为实现
3.  从需要使用此功能的项目中添加对 Contract 的直接引用，但不要从这些项目中添加对 Implementation 的引用
4.  在您的复合根（应用程序入口点）项目中做两件事（1）作为构建的一部分，将最新版本的实现复制到配置的位置（我们使用 AppSettings 进行配置，但这里有很多选项）（2）让您的容器扫描您的实施 Dll 的配置位置

这种方法允许您仅依赖合同，其想法是您可以切换实现，因此如果您想在未来迁移到实体框架或其他东西，您只需使用该框架重新实现实现。

我们还将 NHibernate DLL 复制到配置的扫描位置，这使我们能够使体系结构具有防御性，因此很难不遵循它，因为 NHibernate 仅在应该使用它的地方可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T14:00:49.730

洋葱架构中的接口是层*所依赖*的接口（即*消费*），其实现确实由外层*提供。*

[更具体地说，架构本身并没有说您必须抽象接口背后的业务逻辑（就依赖倒置原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle)而言，无论如何您都应该这样做，但那是另一回事了）。所说的是层的依赖关系应该建模为接口，因此可以由外层提供实现。

最好的例子是*基础设施*代码，尤其是数据访问。您的业​​务逻辑需要加载和存储数据，因此它定义了一个它将*使用*的接口。外层将提供一个使用 NHibernate 或 EF 或其他的实现。

实际上，*底层*（来自DIP；即数据访问和其他商品）位于洋葱的最外层，而*高层*（即业务逻辑）更靠近中心。

另请参阅[http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html它用](http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html)*实体*、*用例*和*接口适配器*替换了*域*、*业务逻辑*和*更多业务逻辑*术语***IMO 更容易推理。你离中心越远，你对用户看到和使用的东西就越具体；越靠近中心越通用；中心是那些与您的企业横向的东西，然后特定于您的应用程序的用例更多地不决定它们将如何使用或在哪个环境（哪个数据库，哪个 UI 等），然后您将在您的用例和您的技术框架（ASP.NET MVC、WCF、WPF——在非 Web 场景中——、EF、NHibernate 等）之间制作适配器***

# asp-classic - 可以链接经典的asp和asp.net吗？

> ID：15134531
> 
> 赞同：1
> 
> 时间：2013-02-28T11:35:48.027
> 
> 标签：asp-classic

由于我目前是 Web 开发领域的新手，因此我正在写信就以下主题寻求建议：

我在经典的 asp 平台上有一个当前网站，并想将其中一个网页移动到 asp.net 平台。例如：data.asp 将链接到网页 datasearch.aspx。

*是否可以执行这样的链接？*

我做了一点研究，发现您可以使用 ASP 在服务器端动态设置“IFrame”的 URL。*这种方法适合这种情况吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T13:24:26.830

Web 技术的美妙之处在于您可以混合和匹配，因此如果您想使用经典的 asp 显示表单，然后将表单提交到 .net，这样做很好。

一旦页面到达客户端，用于生成它的语言或多或少无关紧要。

# ruby - 如何将数组中的多个对象铲到一个对象中？

> ID：15134536
> 
> 赞同：2
> 
> 时间：2013-02-28T11:35:56.883
> 
> 标签：ruby, refactoring

我有一`Team`堂课：

```
class Team
  attr_accessor :teamplayers
  def initialize
    @team_players = []
  end
  def <<(player)  
    @team_players << player
  end
  def to_s
    puts "THIS IS THE TEAM #{@team_players}" 
  end
end 
```

我想将成员添加到团队中`<<`。我使用这段代码：

```
team << @goalkeepers.last
team << @defenders[-1..-4]
team << @midfielders[-1]
team << @attackers[-1..-2] 
```

第一行工作正常，并为团队增加了一名成员。然而，其他行将*数组*添加到我的团队，而不是实际成员。

那么如何单独添加成员呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:09:50.747

```
team << @defenders[-1..-4] 
```

您正在`@defenders[-1..-4]`另一个数组中添加一个数组 ( )。自然，实际添加的元素将是整个数组，Ruby 不会自动为您展平它。

如果您不希望它这样做，则可以连接`<<`方法中的元素（如果它们是数组）：

```
def <<(player)
  if player.kind_of?(Array)
    @team_players.concat player  
  else
    @team_players << player
  end
end 
```

您也可以在每次添加内容时展平数组：

```
def <<(player)
  @team_players << player
  @team_players.flatten!
end 
```

然后，这将适用于单个对象*和*数组。例如：

```
irb(main):032:0> t << ["Bob"]
=> ["Bob"]
irb(main):032:0> t << ["Alice", "Joe"]
=> ["Bob", "Alice", "Joe"]
irb(main):033:0> t << ["Bill"]
=> ["Bob", "Alice", "Joe", "Bill"] 
```

剩下的问题是您是否*要*覆盖`<<`通常工作的方式，以及这样做是否不是一个更好的主意`@defenders[-1..-4].each { |d| team << d }`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:31:29.377

Just use `+` (or `concat`):

```
team = team + @defenders[-1..-4]
#or 
team.concat(@defenders[-1..-4]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:28:26.657

隐式转换有点短：

```
def <<(*player)
   @team_players.concat player.flatten
end 
```

坚持 slhck 的答案，没有看到扁平化的变化。

# ruby-on-rails - Ruby on Rails - 无效的编码错误

> ID：15134545
> 
> 赞同：1
> 
> 时间：2013-02-28T11:36:23.830
> 
> 标签：ruby-on-rails, ruby, webrick

已解决：使用 rvm 安装 ruby​​ 2.0.0 和 rails 3。使用较新版本的 ruby​​ 后，此问题消失。

当我在`$ rails server`本地运行并尝试在浏览器中加载任何静态资产时，例如`"localhost:3000/assets/javascripts/main.js"`，我收到以下错误：

```
Internal Server Error

invalid encoding ("UTF-8//IGNORE", "BINARY")
WEBrick/1.3.1 (Ruby/1.8.7/2012-02-08) at localhost:3000 
```

这发生在所有静态资产上。这里可能是什么问题？

我正在使用**Mac OS X 10.7.5**

**堆栈跟踪：**

```
[2013-02-28 12:59:12] ERROR Iconv::InvalidEncoding: invalid encoding ("UTF-8//IGNORE", "BINARY")
/Library/Ruby/Gems/1.8/gems/i18n-0.6.3/lib/i18n/core_ext/string/encoding.rb:7:in `conv'
/Library/Ruby/Gems/1.8/gems/i18n-0.6.3/lib/i18n/core_ext/string/encoding.rb:7:in `force_encoding'
/Library/Ruby/Gems/1.8/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:41:in `escape_glob_chars'
/Library/Ruby/Gems/1.8/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:14:in `match?'
/Library/Ruby/Gems/1.8/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:56:in `call'
/Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
/Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
/Library/Ruby/Gems/1.8/gems/rack-1.4.5/lib/rack/handler/webrick.rb:13:in `run'
/Library/Ruby/Gems/1.8/gems/rack-1.4.5/lib/rack/server.rb:268:in `start'
/Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/commands/server.rb:70:in `start'
/Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/commands.rb:55
/Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/commands.rb:50:in `tap'
/Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/commands.rb:50
script/rails:6:in `require'
script/rails:6 
```

# file-upload - jboss7中open-shift .multipart-form数据中的文件上传问题

> ID：15134546
> 
> 赞同：0
> 
> 时间：2013-02-28T11:36:28.833
> 
> 标签：file-upload, jboss7.x, multipartform-data, multipart, openshift

我在 jboss7 中部署的 openshift 项目中无法使用我接受多部分形式数据的休息方法。405 状态码即将到来，但它在我的本地主机服务器中运行良好。

```
@POST
@Path("/file")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response addFile(final @Context UriInfo uriInfo,@FormDataParam("file")
    InputStream uploadedFile,   @FormDataParam("file") FormDataContentDisposition 
fileDetail) 
{

try {
     AddFileRequest rqst = new AddFileRequest();
     if(uploadedFile!=null){
     rqst.setUploadedFile(uploadedFile);
     rqst.setFileName(fileDetail.getFileName());}
     addFile(rqst);
     return Response.ok().build();        
 }  catch (Exception e) {
     e.printStackTrace();
     return Response.status(Status.INTERNAL_SERVER_ERROR).build();       
 } 
```

# arm - 哪个 GLIBC 版本正在使用我的工具链？

> ID：15134548
> 
> 赞同：2
> 
> 时间：2013-02-28T11:36:37.327
> 
> 标签：arm, ld, glibc, toolchain

我知道如何在我的 x86 工作站上检查 GNU C 库，但现在我想知道哪个 GLIBC 版本正在使用我的 ARM 交叉工具链（我没有构建工具链）。我无法`$PATH`在我的 x86 工作站中测试我的工具链库的 libc.so.6 文件。

有没有办法在我的嵌入式系统中不编译测试程序和测试就知道 glibc 版本？此外，我如何知道默认情况下哪个 PATH 库正在使用我的工具链的 GNU 链接器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:39:59.327

您可以使用`ldd --version`命令来检查版本，例如[GLIBC 版本](http://www.linuxquestions.org/questions/linux-software-2/how-to-check-glibc-version-263103/)。

# css - HTML/CSS 表格，如何在不影响单元格宽度的情况下增加表格宽度？

> ID：15134550
> 
> 赞同：0
> 
> 时间：2013-02-28T11:36:40.763
> 
> 标签：css, width, cell, html-table

我有一个表格，其宽度是屏幕尺寸的 80%。此表包含我的菜单项。菜单项采用表格单元格的形式。我想要的设计是每个单元格的宽度应仅与其中的文本一样宽。但我还想要最后一个单元格，它将是空的，并且与表格中的剩余空间一样宽。IE 我希望最后一个继承表格的宽度（剩余空间）。

但是，当我增加表格宽度而不是只适合它们的文本时，所有单元格都会被拉伸。

我该如何阻止这种情况发生？

1.  我希望除了最后一个单元格之外的所有单元格都完全适合它们的文本。
2.  我希望最后一个单元格占用所有剩余空间。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:44:21.347

扩展最后一个单元格以占据全宽：

```
td:last-child {
    width: 100%;
} 
```

...并且，如果您想确保其他单元格中的文本不会折叠：

```
td {
    whitespace: nowrap;
} 
```

演示在这里：

[http://jsfiddle.net/barney/kz77m/](http://jsfiddle.net/barney/kz77m/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:41:15.633

通过 CSS 很简单。您只需将`display`样式修改为`inline`.

附小提琴：http: [//jsfiddle.net/CZYSa/](http://jsfiddle.net/CZYSa/)

# java - Ibatis 在 Pojo 中读取 Map

> ID：15134553
> 
> 赞同：1
> 
> 时间：2013-02-28T11:37:08.083
> 
> 标签：java, ibatis, pojo

编辑：简单地说，我想将动态列分组到 pojo 中的地图中。

我想使用 ibatis 读取 pojos 列表，但 pojo 包含我必须阅读的地图：

```
public class FundraiserSuccessData {
private String regionName;
private String fundraiserName;
// Key: Attendance ID, Value: Count
private Map<Integer, Integer> attendanceCount;
...
} 
```

目前我会读取考勤类型并将类型作为列表放在 ibatis 查询的参数中。

```
<select id="fundraiserSuccessReport.search" resultClass="controller.report.fundraiserSuccess.FundraiserSuccessData" parameterClass="controller.report.fundraiserSuccess.SearchRequest">

SELECT VALUE(MAX(r.name), 'D2D') regionName,
       MAX(fr.firstname) || ' ' || MAX(fr.lastname) AS fundraiserName,
       <iterate property="attendanceTypes" conjunction=","> MAX(attendance.$attendanceTypes[]$) $attendanceTypes[]$ </iterate>
...
JOIN (SELECT dps.person_id,
            <iterate property="attendanceTypes" conjunction=","> 
             SUM(CASE WHEN attendance_id = $attendanceTypes[].id$ THEN 1 ELSE 0 END) $attendanceTypes[].name$
             </iterate>
    FROM daily_person_state dps
    GROUP BY dps.person_id) attendance
    ON fr.id = attendance.person_id
...
</select> 
```

但是我怎样才能将加入映射到*出席人数*？因为我无法向 java 添加动态属性。

# c# - 如何调用具有多个参数的 Post api

> ID：15134555
> 
> 赞同：4
> 
> 时间：2013-02-28T11:37:13.840
> 
> 标签：c#, asp.net-web-api, httpclient

如何使用 HttpClient 调用具有多个参数的 Post 方法？

我正在使用带有单个参数的以下代码：

```
var paymentServicePostClient = new HttpClient();
paymentServicePostClient.BaseAddress = 
                  new Uri(ConfigurationManager.AppSettings["PaymentServiceUri"]);

PaymentReceipt payData = SetPostParameter(card);
var paymentServiceResponse = 
   paymentServicePostClient.PostAsJsonAsync("api/billpayment/", payData).Result; 
```

我需要添加另一个参数 userid。如何将参数与“postData”一起发送？

WebApi POST 方法原型：

```
public int Post(PaymentReceipt paymentReceipt,string userid) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T11:51:26.730

只需在包含这两个属性的 Web Api 控制器上使用视图模型。所以而不是：

```
public HttpresponseMessage Post(PaymentReceipt model, int userid)
{
    ...
} 
```

利用：

```
public HttpresponseMessage Post(PaymentReceiptViewModel model)
{
    ...
} 
```

`PaymentReceiptViewModel`显然将包含该属性`userid`。然后就可以正常调用该方法了：

```
var model = new PaymentReceiptViewModel()
model.PayData = ...
model.UserId = ...
var paymentServiceResponse = paymentServicePostClient
    .PostAsJsonAsync("api/billpayment/", model)
    .Result; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T12:00:17.173

`UserId`应该在查询字符串中：

```
var paymentServiceResponse = paymentServicePostClient
                            .PostAsJsonAsync("api/billpayment?userId=" + userId.ToString(), payData)
                            .Result; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-19T12:01:13.483

在我的情况下，我现有的 ViewModel 与我想要发布到我的 WebAPI 的数据并没有很好地对齐。因此，我没有创建一组全新的模型类，而是发布了一个匿名类型，并让我的 Controller 接受一个动态的。

```
var paymentServiceResponse = paymentServicePostClient.PostAsJsonAsync("api/billpayment/", new { payData, userid }).Result;

public int Post([FromBody]dynamic model)
{
    PaymentReceipt paymentReceipt = (PaymentReceipt)model.paymentReceipt;
    string userid = (string)model.userid;

    ...

} 
```

（我很想听听关于这种方法的一些反馈。它的代码肯定少了很多。）

# c# - 从数据库中检索数据作为列表

> ID：15134558
> 
> 赞同：1
> 
> 时间：2013-02-28T11:37:19.827
> 
> 标签：c#, winforms, datagridview

我正在使用包含标准的访问数据库的 c# 程序，

我知道如何从数据库中检索所有标准到`datagridview`

```
 OleDbCommand command = new OleDbCommand();
        command.Connection = connect;
        command.CommandText = "SELECT Criteria FROM ERPs";

        OleDbDataReader reader = command.ExecuteReader();

        while (reader.Read())
        {
            dataGridView1.Rows.Add();

            dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Criteria"].Value = reader[0].ToString();  

        } 
```

但我想从数据库中检索所有标准作为列表并让用户选择一些标准

然后在`datagridview`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:57:48.823

尝试在 page_load 事件上检索组件中的条件（我猜多列组合框或简单的组合框会很棒），然后在用户将在 selectionchanged 事件上选择他想要的条件后，使用另一个 SQL 函数在 datagridview 中显示选定的条件

它会是这样的：

这是在 page_load 事件上：

```
command.CommandText = "SELECT ID, Criteria FROM ERPs"
'the display member will be the criteria and the value will be the id 
```

这是在 SelectedIndexChanged 事件上：

```
command.CommandText = "SELECT Criteria FROM ERPs WHERE ID=" & ComboBox1.selectedvalue & " 
```

希望它会有所帮助。

# tcp - tcpdump 减慢了...它自己的过滤器？

> ID：15134560
> 
> 赞同：1
> 
> 时间：2013-02-28T11:37:23.963
> 
> 标签：tcp, udp, ip, packet-capture, tcpdump

长 BPF 过滤器会减慢速度`tcpdump`吗？

我重放所有数据包都有的数据包跟踪，`ttl=k`并等待**ICMP**消息返回。我一直注意到的是，如果我使用以下过滤器（在 eth0 上）：

```
(ip and ip[8]=$k and src host $myAddress) or (icmp and dst host $myAddress and icmp[0]=11) 
```

...我总是在发送的数据包中错过 20-30 个数据包，而如果我只是这样做：

```
ip 
```

...然后在捕获文件上执行上述完全**脱机**过滤，我找到了我发送的所有数据包。

这是一种已知的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:27:45.423

如果`tcpdump`速度不足以从队列中弹出捕获的数据包，内核可能会丢弃其中的一些。

查看转储末尾的**“XXXX 数据包被内核丢弃”**消息，看看它们是否有效地丢失了一些。

确保将`-n`选项添加到命令行。这将避免 DNS 解析，它会加快一点（取决于您的网络）

# iphone - Xcode 4.6 立即构建、运行和完成（模拟器 iOS 6.1）

> ID：15134563
> 
> 赞同：7
> 
> 时间：2013-02-28T11:37:38.610
> 
> 标签：iphone, ios, objective-c, xcode, ios-simulator

在 xcode 中，我尝试向我的应用程序添加一个轻击手势，当我构建它时，它开始出现 Xcode 问题。它从构建“在 iPhone 6.1 模拟器上运行”到“在 iPhone 6.1 模拟器上完成运行”。

如果模拟器关闭，它会以黑屏启动，并且您无法单击主页按钮等。如果打开，则没有任何反应，应用程序不会安装，但模拟器不会崩溃。

我已经尝试过 armv6 架构“修复”，但没有奏效。我还清理了项目和项目数据。我也多次重置模拟器。

如果我将旧文件添加到我的新项目中，它可以工作到一定程度（我将旧文件复制并粘贴到新文件中），但同样会发生。

提前感谢您的帮助！

注意：新的空白项目构建并运行良好。

编辑：撤消我之前的操作后它仍然无法正常工作，并且模拟器根据 Finder 做出响应，尽管屏幕保持黑色

––––––––––––––––––––––––––––––––––––––––––––––––––––––––</p>

更新

我在我的应用程序中有一个名为“resources”的文件夹，作为参考导入，它遵循来自线程@arthan.v 的链接为我提供了解决问题的方法。我所做的是将文件夹重命名为文件并重新导入。

非常感谢，我花了2天时间尝试修复它！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:24:44.377

单击`Center Button`右侧的视图中的`Xcode`。
![在此处输入图像描述](../Images/edc4e459a4d0afd527a6729f1820404e.png)

在底部栏中，您会看到`error: failed to attach to process ID 0`。

检查这些[错误：未能附加到进程 ID 0](https://stackoverflow.com/questions/12741188/error-failed-to-attach-to-process-id-0)并且[Xcode 编译了我的应用程序，但无法在模拟器中运行它](https://stackoverflow.com/questions/9702201/xcode-compiles-my-app-but-cant-run-it-in-the-simulator)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T20:34:43.293

这有时可以通过以下步骤解决：

*   iOS 模拟器 > 重置内容和设置 ... > 重置
*   Xcode > 构建和运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T18:17:40.020

在我重新组织了一些代码并重命名了工作区和项目后，我遇到了同样的问题。最终意识到模拟器的主屏幕上有我的测试应用程序的旧版本。我删除了它，然后一切都恢复正常了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-15T09:14:15.497

您可能需要将设备添加到配置文件中。我在 Xcode 6 和真实设备上体验过这一点。

# eclipse - Arduino闪存限制

> ID：15134565
> 
> 赞同：1
> 
> 时间：2013-02-28T11:37:42.880
> 
> 标签：eclipse, optimization, eclipse-plugin, arduino, ram

我有一个关于[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)的项目，我是从[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)制作的。AVR 编译器给了我这个：

> avrdude：24348 字节的闪存写入 avrdude：根据 SunAngles.hex 验证闪存：avrdude：从输入文件 SunAngles.hex 加载数据闪存数据：avrdude：输入文件 SunAngles.hex 自动检测为 Intel Hex avrdude：输入文件 SunAngles.hex 包含24348 字节 avrdude：读取片上闪存数据：
> 
> 阅读 | ################################################# | 100% 3.45 秒
> 
> avrdude：正在验证... avrdude：已验证 24348 字节的闪存
> 
> 完成了。谢谢你。

串行监视器不打印任何内容。如果我将项目设为 23999 字节，那么串行监视器就可以工作。我检查了 Eclipse 的串行监视器和 Arduino IDE 的串行监视器。他们有同样的问题。在该网站上，它说 Arduino Uno 有 32 KB 闪存，而 0.5 KB 用于引导加载程序。怎么了？

在另一个问题中，有人说要使用`serial.print(F(something));`，他们为 pgm 提供了一个库。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:02:31.840

不要忘记 RAM 的小尺寸，即 328 的 2 KB。您可能只是用完了 RAM。我了解到，当它用完时，它只是坐在那里。起初它看起来真的像一个闪存边界问题。就像你的症状一样。

我建议[阅读自述文件库以从中获取 FreeRAM](https://github.com/mpflaga/Arduino-MemoryFree)。**它提到了“Serial.print”如何同时消耗 RAM 和 ROM。**

我现在总是用

```
Serial.print(F("HELLO")); 
```

相对

```
Serial.print("HELLO"); 
```

因为它节省了 RAM，这对于`lcd.print`. 我总是放一个

```
Serial.println(freeMemory(), DEC);  // Print how much RAM is available. 
```

在代码的开头，并注意。请注意，需要有空间来运行实际代码并递归到其中。

F() 现在在 Arduino 1.0 中有库存，并取代了对库函数 getPSTR() 的需求。

最新的 Arduino IDE 还显示了对预期 RAM 使用情况的粗略估计。所以在 avr-gcc 中有一个开关。您可能还想尝试使用 avr-gcc 4.7.0 而不是 4.3.2（Arduino 的库存），因为它声称更优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T18:22:59.533

装备自己以防万一还有人遇到类似问题：请阅读博客文章*[优化 SRAM](https://learn.adafruit.com/memories-of-an-arduino/optimizing-sram)*以管理有限的 Arduino 内存。

从那里开始，您将在开发草图时记住一些事情。

尽可能避免任何全局变量。将它们保留在其功能的本地。

# php - 两次提交表格到不同的目的地

> ID：15134569
> 
> 赞同：1
> 
> 时间：2013-02-28T11:38:02.983
> 
> 标签：php, javascript, jquery, submit

我正在尝试将表单提交到我域中的页面，然后自动将其重新提交到另一个域。

下面的代码在重新提交之前工作正常。它会更改表单上的操作 OK 并删除 ID，因此它应该像第二次正常表单一样提交。

谁能看到为什么它不会重新提交的问题？

谢谢

```
$("form#dataForm").validate({
    // Validation code here...
    submitHandler: function(form) {
        $.post('queries/pay.php', $("#dataForm").serialize(), function(data) {
            $("#dataForm").removeAttr("id").attr({
                "action":data.action
            }, function() {
                $("form").submit(); // This part of the code does not work
            });
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:40:02.937

尝试这个：

```
$("form").unbind('submit').submit(); 
```

# python - 我需要 Django 中的时区支持吗？

> ID：15134574
> 
> 赞同：1
> 
> 时间：2013-02-28T11:38:23.417
> 
> 标签：python, django, timezone

我正在开发一个基于事件信息的 Django 应用程序。我的客户正在以 UTC 格式发送所有日期/时间信息并转换为本地时间。然后将它们作为字符串发送到服务器。此外，我使用 Postgres 作为数据库，它也以 UTC 存储信息。

时区支持处于活动状态，但我将天真的日期时间放入 Django 并收到警告。我的应用程序是否需要时区支持？

如果是这样，我该如何解决这些警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:58:53.663

```
USE_TZ = True # to activate time zone setting.
TIME_ZONE = 'America/Chicago' # set your timezone 
```

当您激活时区设置时，DJango 会在您每次在 cod 中设置**Naive**日期时间时显示警告。没什么好恐慌的。您需要更改代码以逐步使用**Aware**日期时间。

[https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#concepts](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#concepts)

```
from django.utils.timezone import utc, now

class SomeModel(Model):
    schedule = django_models.DateTimeField(default=now) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:41:34.980

我强烈建议您使用[pytz 模块](http://pytz.sourceforge.net/)。它使使用时区变得不那么痛苦。

# php - 我可以多次使用 CURLOPT_HTTPHEADER 调用 curl_setopt 来设置多个标头吗？

> ID：15134575
> 
> 赞同：83
> 
> 时间：2013-02-28T11:38:25.120
> 
> 标签：php, curl

我可以多次调用[`curl_setopt`](http://php.net/curl_setopt)以`CURLOPT_HTTPHEADER`设置多个标题吗？

```
$url = 'http://www.example.com/';

$curlHandle = curl_init($url);
curl_setopt($curlHandle, CURLOPT_HTTPHEADER, array('Content-type: application/xml'));
curl_setopt($curlHandle, CURLOPT_HTTPHEADER, array('Authorization: gfhjui'));

$execResult = curl_exec($curlHandle); 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-02-28T11:38:25.120

按照 curl 在内部对请求所做的操作（通过[*“Php - Debugging Curl”*](https://stackoverflow.com/a/14436877/367456)[的答案](https://stackoverflow.com/a/14436877/367456)*中概述的方法）回答了这个问题：**否**。*

 *不，不能多次使用`curl_setopt`调用，`CURLOPT_HTTPHEADER`每次都传递一个标头，以便设置多个标头。

第二次调用将覆盖前一次调用（例如第一次调用）的标题。

相反，该函数需要使用所有标头调用一次：

```
$headers = array(
    'Content-type: application/xml',
    'Authorization: gfhjui',
);
curl_setopt($curlHandle, CURLOPT_HTTPHEADER, $headers); 
```

相关（但不同）的问题是：

*   [如何通过 curl 调用使用 HTTP 请求发送标头？](https://stackoverflow.com/questions/356705/how-to-send-a-header-using-a-http-request-through-a-curl-call)（在命令行上卷曲）
*   [如何获取先前使用 curl_setopt() 设置的选项？](https://stackoverflow.com/q/5356075/367456)（卷曲 PHP 扩展）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-11-15T15:18:46.690

其他类型的格式：

```
$headers[] = 'Accept: application/json';
$headers[] = 'Content-Type: application/json';
$headers[] = 'Content-length: 0';

curl_setopt($curlHandle, CURLOPT_HTTPHEADER, $headers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T15:36:46.343

```
/**
 * If $header is an array of headers
 * It will format and return the correct $header
 * $header = [
 *  'Accept' => 'application/json',
 *  'Content-Type' => 'application/x-www-form-urlencoded'
 * ];
 */
$header; //**
if (is_array($header)) {
    $i_header = $header;
    $header = [];
    foreach ($i_header as $param => $value) {
        $header[] = "$param: $value";
    }
} 
```*

# javascript - 如何检查一个元素是否是另一个元素的有效子/父

> ID：15134581
> 
> 赞同：1
> 
> 时间：2013-02-28T11:38:32.013
> 
> 标签：javascript, html, children

JavaScript 中有什么方法可以检查一个 HTML 元素是否是另一个元素的有效子元素？

例如：

无序列表 ( `<ul>`) 可以接受列表项 ( `<li>`) 作为有效的子元素吗？-**是的**

无序列表 ( ) 可以`<ul>`接受无序列表 ( `<ul>`) 作为有效的子元素吗？-**没有**

* * *

或者有什么方法可以获取特定元素的有效 HTML 子元素列表？

例如：

哪些元素可以成为表格行 ( `<tr>`) 的子元素？
**答案：** TD、TH

哪些元素可以成为跨度的子元素？
**答案：** A，ABBR，...（全部）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:45:50.380

您可以尝试创建有问题的 HTML，然后通过此 jQuery 库对其进行验证：

[https://github.com/peterjwest/html_validator](https://github.com/peterjwest/html_validator)

demo.js 是一个很好的起点：

```
$(document).ready(function() {
  var html = [
    "<title></title>",
    "<table><tbody></tbody><col></table>",
    "<tag><img apple=\"no\" banana='yes'></img></tag>",
    "<form action=''>",
    " <fish></fish>",
    " <fieldset>",
    " <img>",
    " <legend></legend>",
    " <legend></legend>",
    " <input>",
    " <!--</html><!-- :D -->",
    " </fieldset>",
    "</form>",
    "<table>",
    " <col>",
    " <tr>",
    " <td>",
    " </tbody>",
    "</table>",
    "<del><p>hallo</p></del>",
    "</body>",
    "<img>",
    "<img>",
    "<p><a></a></p>",
    "<form><fieldset><input type checked disabled='blah'></fieldset></form>",
    "</html>"
  ].join("\n");

  $.htmlValidator.doctypes;
  $.htmlValidator.doctype("HTML 4.01 Strict");
  $.htmlValidator.parseSettings();
  $.htmlValidator.parseSettings({});
  $.htmlValidator.parseSettings({url: ""});
  $.htmlValidator.parseSettings({html: html});
  $.htmlValidator.parseSettings({fragment: $("div")});
  $.htmlValidator.parse({doctype: "HTML 4.01 Frameset", html: html});
  console.log($.htmlValidator.parse({doctype: "HTML 4.01 Transitional", html: html}).call($.htmlValidator.fn.draw));
  console.log($.htmlValidator.validate({doctype: "HTML 4.01 Transitional", html: html}));

  //$.htmlValidator.parse({doctype: "HTML 4.01 Transitional"}); //Parses current page by AJAX with GET
  //$.htmlValidator.parse({doctype: "HTML 4.01 Transitional", type: 'post', data: {foo: 'bar'}); //Default loads current page by AJAX with POST
  //$.htmlValidator.parse({doctype: validator.doctype("HTML 4.01 Transitional"), html: html});
  //$.htmlValidator.validate();
  //$.htmlValidator.validate({fragment: $("#section").html()});
  //$.htmlValidator.validate({url: "/foo/bar"});
  //$.htmlValidator.validate({formatted: true});
  //$.htmlValidator.validate({formatted: false});
}); 
```

如您所见，您可以验证所提供页面的片段，这基本上是您所需要的。

至于检查可能的子元素，我不知道是否有一个好的解决方案。

# windows-phone-7 - 在 Windows Phone 上拍摄视频时打开手电筒

> ID：15134582
> 
> 赞同：0
> 
> 时间：2013-02-28T11:38:32.463
> 
> 标签：windows-phone-7

好吧，我是 C# 的新手开发人员，我想在设备上的手电筒打开的同时捕获视频。我一直在寻找答案，但他们引导我制作手电筒应用程序。

我需要的是在启用手电筒/手电筒的同时捕捉视频。而且，我认为这是可能的，因为当我在 Lumia 710 (WP 7.8) 上打开相机应用程序时，我可以在手电筒打开的情况下进行录制。

请帮助兄弟，如果有任何参考，我当然会阅读。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:46:57.330

您可以使用Microsoft 的[Direct Show 库](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx)：

# c# - Silverlight 验证未按预期工作

> ID：15134583
> 
> 赞同：0
> 
> 时间：2013-02-28T11:38:33.763
> 
> 标签：c#, wpf, silverlight

问题是如果我直接单击按钮，Silverlight 不会通知我有关异常的信息。一切都很好，如果我在文本框中写了一些东西并将其删除。

我有一个名为 UserLogin 的类。

```
 public class UserLogin
    {
        //---------------------------------------------------
        // Fields

        private string _userName;
        private string _password;

        //----------------------------------------------------
        // Properties

        public string Username
        {
            get
            {
                return _userName;
            }
            set
            {
                if (value.Length==0)
                {
                    throw new Exception("You must enter Username");
                }
                _userName = value;
            }
        }

        public string Password
        {
            get
            {
                return _password;
            }
            set
            {
                if (value.Length==0)
                {
                    throw new Exception("You must enter password");
                }
                _password = value;
            }
        }
    } 
```

在 xaml 中：

```
 <StackPanel BindingValidationError="LoginStackPanel_BindingValidationError">
             <TextBox x:Name="UsernameTextBox" Text="{Binding Username, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}"/>
             <PasswordBox x:Name="PasswordBox" Password="{Binding Password, Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True}"/>
<Button x:Name="LoginButton" Content="Sign In" />
    </StackPanel> 
```

这是 BindingValidationError 事件。我只是在更改对象的背景并为它们设置工具提示。

```
 private void LoginStackPanel_BindingValidationError(object sender, ValidationErrorEventArgs e)
        {
            if (e.Action == ValidationErrorEventAction.Added)
            {
                if (e.OriginalSource is TextBox)
                {
                    (e.OriginalSource as TextBox).Background = new SolidColorBrush(Colors.Yellow);

                    ToolTipService.SetToolTip((e.OriginalSource as TextBox), e.Error.Exception.Message);
                }
                else if (e.OriginalSource is PasswordBox)
                {
                    (e.OriginalSource as PasswordBox).Background = new SolidColorBrush(Colors.Yellow);

                    ToolTipService.SetToolTip((e.OriginalSource as PasswordBox), e.Error.Exception.Message);
                }
            }
            else if (e.Action == ValidationErrorEventAction.Removed)
            {
                if (e.OriginalSource is TextBox)
                {
                    (e.OriginalSource as TextBox).Background = new SolidColorBrush(Colors.White);

                    ToolTipService.SetToolTip((e.OriginalSource as TextBox), null);
                }
                else if (e.OriginalSource is PasswordBox)
                 {
                     (e.OriginalSource as PasswordBox).Background = new SolidColorBrush(Colors.White);

                     ToolTipService.SetToolTip((e.OriginalSource as PasswordBox), null);
                 }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:30:32.547

我找到了解决方案。这就是我强制 textBox 检查异常的方式。

```
UsernameTextBox.GetBindingExpression(TextBox.TextProperty).UpdateSource(); 
```

# data-structures - 在二叉树中查找最低共同祖先

> ID：15134585
> 
> 赞同：0
> 
> 时间：2013-02-28T11:38:35.977
> 
> 标签：data-structures, binary-tree

我正在寻找一种在二叉树中找到最低共同祖先的方法。

注意：它是二叉树而不是二叉搜索树，我们没有任何父指针。此外，如果我们试图为父母（P）及其任何孩子（C）找到 LCA，那么 LCA 将是 P 的直接父母。

# php - sql/php 返回有多少时间字段具有相同 id 的计数

> ID：15134590
> 
> 赞同：0
> 
> 时间：2013-02-28T11:38:45.920
> 
> 标签：php, sql, count

我希望创建一个查询，该查询将返回有多少时间字段具有相同 ID 的计数。就我而言，它将是在同一个包中发现物体时。

例如看这张表：

```
Bagid | Object 
--------------
B1    | wallet
B1    | perfume
B1    | charger
B2    | wallet
B2    | perfume
B2    | pen
B3    | book 
B3    | pen
B3    | wallet 
```

因此，例如，如果我正在寻找在同一个包中找到多少次“钱包”和“香水”，预期的结果将是：

`wallet, perfume = 2`

因为它们在同一个包里出现了两次。

之后，我希望能够对 n 个对象进行此操作，这些对象将存储在一个数组中（但之后）。

帮助将不胜感激，谢谢。

* * *

新问题：

如何通过使用包含对象的二维数组来放置应该在 IN() 中的对象。例如我做了 ...IN ('$Objects[1][0]', '$Object[1][1]') 但它不起作用。当我回显它们时，Objects[1][0] 和 Object[1][1] 给了我正确的对象。找不到让它工作的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:43:55.060

```
SELECT COUNT(*) FROM (
  SELECT Bagid
  FROM yourtable
  WHERE Object IN ('wallet', 'perfume')
  GROUP BY Bagid
  HAVING Count(DISTINCT Object)=2
) s 
```

请[在此处](http://sqlfiddle.com/#!2/31326/2)查看小提琴。

要支持任意数量的对象，您必须动态地创建上面的查询，更新 IN 子句和对象的数量，或者可以使用这样的小技巧：

```
SELECT COUNT(*) FROM (
  SELECT Bagid
  FROM yourtable
  WHERE FIND_IN_SET(Object, 'wallet,perfume')
  GROUP BY Bagid
  HAVING Count(DISTINCT Object)=
    LENGTH('wallet,perfume')-
    LENGTH(REPLACE('wallet,perfume', ',', ''))+1
) s; 
```

[在这里](http://sqlfiddle.com/#!2/31326/7)看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:16:55.417

```
SELECT
  b1.Bagid
FROM 
    bags as b1
JOIN
    bags b2
ON
    b1.Bagid=b2.Bagid
    AND b2.Object='perfume' 
WHERE
    b1.Object = 'wallet' 
```

拥有这样的索引可以让我对 MySQL 的[EXPLAIN EXTENDED](https://dev.mysql.com/doc/refman/5.0/en/explain-extended.html)`KEY idx1(Object,Bagid)`给出合理`Using where; Using index`且没有警告。

# xslt - XSLT 1.0：帮助！无法移除元素

> ID：15134596
> 
> 赞同：0
> 
> 时间：2013-02-28T11:39:03.330
> 
> 标签：xslt

刚开始使用 xslt
需要在元素为空时删除元素
我做错了什么？
请帮助

这是我尝试解决问题时生成的一些代码

我的 xslt：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" .....>     
<xsl:output method="xml" encoding="UTF-8" indent="yes"
        xalan:indent-amount="2" />
    <xsl:strip-space elements="*" />

    <!--
        The rule represents a custom mapping: "IdSelectFromDate" to
        "IdSelectFromDate".
    -->
    <xsl:template name="IdSelectFromDateToIdSelectFromDate">
        <xsl:param name="IdSelectFromDate" />
        <!-- ADD CUSTOM CODE HERE. -->
        <xsl:choose>
            <xsl:when test="$IdSelectFromDate = ''">
                <xsl:copy>
                    <xsl:apply-templates select="IdSelectFromDate" />
                </xsl:copy>             
            </xsl:when>     
            <xsl:otherwise>
                <xsl:value-of select="IdSelectFromDate" />
            </xsl:otherwise>
        </xsl:choose>       
    </xsl:template>
    <xsl:template match="IdSelectFromDate" />
</xsl:stylesheet> 
```

输入：

```
<?xml version="1.0" encoding="UTF-8"?>
<body xmlns:httpsca="http://www.ibm.com/xmlns/prod/websphere/http/sca/6.1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="foo.xsd">
  <tns:getRealEstateObjects>
    <RequestElement>         
      <IdNumnet>IdNumnet</IdNumnet>
      <IdSelectFromDate xsi:nil="true"/>
    </RequestElement>
  </tns:getRealEstateObjects>
</body> 
```

所需的输出：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <body xmlns:httpsca="http://www.ibm.com/xmlns/prod/websphere/http/sca/6.1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="foo.xsd">
      <tns:getRealEstateObjects>
        <RequestElement>         
          <IdNumnet>IdNumnet</IdNumnet>

        </RequestElement>
      </tns:getRealEstateObjects>
    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:45:09.677

此处使用的正确方法是使用带有模板以匹配您要删除的部分的身份模板：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" encoding="UTF-8" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="IdSelectFromDate[. = '']" />
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<body xsi:noNamespaceSchemaLocation="foo.xsd" 
      xmlns:httpsca="http://www.ibm.com/xmlns/prod/websphere/http/sca/6.1.0" 
      xmlns:tns="..." 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:getRealEstateObjects>
    <RequestElement>
      <IdNumnet>IdNumnet</IdNumnet>
    </RequestElement>
  </tns:getRealEstateObjects>
</body> 
```

# cakephp - cakephp需要放置动画等待图标

> ID：15134598
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:39:07.610
> 
> 标签：cakephp

我将我的页面链接到贝宝，我这样编码

```
<div class="paypal">
    <h1><?php __('Please wait while we transfering you to the payment gateway.');?></h1>
    <?php echo $paypal->submit(__('Click here if this page appears for more than 5 seconds', true), $paypalData); ?>
    <script type="text/javascript">
        document.getElementById('frmPaypal').submit();
    </script>
</div> 
```

我需要放置一个动画 gif 等待图标而不是按钮....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:29:12.643

如果您想使用 CakePHP 输出图像：

```
echo $this->Html->image('loading.gif', array('alt' => 'Loading')); 
```

否则，您可以使用 HTML：

```
<img src="loading.gif"> 
```

# android - 是否可以手动销毁 SurfaceView？

> ID：15134604
> 
> 赞同：5
> 
> 时间：2013-02-28T11:39:14.013
> 
> 标签：android, surfaceview

即使调用了活动的 onPause，我的 SurfaceView 也不会被破坏。

我正在处理线程

```
public void surfaceCreated(SurfaceHolder holder) {
    if (mGameThread.getState() == Thread.State.TERMINATED) {
        createGameThread(getHolder(), getContext());
    }
    mGameThread.setRunning(true);
    mGameThread.start();
}

public void surfaceDestroyed(SurfaceHolder holder) {
    boolean retry = true;
    mGameThread.setRunning(false);
    while (retry) {
        try {
            mGameThread.join();
            retry = false;
        } catch (InterruptedException e) {
        }
    }
} 
```

作为一个黑客，我必须检查 onResume 中线程的状态，如果线程已经终止，我将完成活动

```
protected void onResume() {
    Log.d(mLogTag, "onResume()");
    super.onResume();
    if (mGameThread != null) {
        if (mGameThread.getState() == Thread.State.TERMINATED) {
            finish();
        }
    }

} 
```

不幸的是，不可能将线程处理从surfaceDestroyed 和surfaceCreated 移动到活动的onPause() 和onResume()。是否可以在 onPause() 中手动销毁 SurfaceView 并在 onResume() 中重新创建它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-31T11:13:29.370

您可以在视图上动态添加表面视图。

示例：layout.xml

```
 <FrameLayout
        android:id="@+id/fragment_file_videoplayer_surface_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </FrameLayout> 
```

MainActivity.java

```
FrameLayout fl_surfaceview_container = 
              (FrameLayout)findViewById(R.id.fragment_file_videoplayer_surface_container);

// Add surfaceView on Framelayout

SurfaceView videoSurface = new SurfaceView(getActivity());
fl_surfaceview_container.addView(videoSurface);

//if remove or destroy surfaceview

fl_surfaceview_container.removeAllViews(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-03T13:01:17.483

您可以添加一个布局作为表面视图的父级，然后在 onPause() 中设置布局 GONE 的可见性，并在活动的 onResume() 中设置 VISIBLE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T08:27:46.113

是的可能。首先初始化Size

```
 Size currentSurfaceSize;

   cameraSurface.getHolder().addCallback(new SurfaceHolder.Callback() {
                @Override
                public void surfaceCreated(SurfaceHolder holder) {
                    if (ActivityCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {
                        ActivityCompat.requestPermissions(QR_Reader_Activity.this,
                                new String[]{Manifest.permission.CAMERA}, RequestCameraPermission);
                        permission = true;
                        return;
                    }
                    try {
                        cameraSource.start(cameraSurface.getHolder());
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                @Override
                public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
                        currentSurfaceSize = new Size(width, height);
                    }
                }
                @Override
                public void surfaceDestroyed(SurfaceHolder holder) {
                    onPause();
                }
            }); 
```

你想在哪里破坏表面，使用下面的代码。

```
 if (currentSurfaceSize==null){
                    cameraSurface = (SurfaceView) cameraSurface.getHolder();
                    cameraSurface.removeCallbacks((Runnable) cameraSurface);
              } 
```

# node.js - Node.js 流控制

> ID：15134605
> 
> 赞同：0
> 
> 时间：2013-02-28T11:39:13.703
> 
> 标签：node.js

我的问题如下：我想返回回调返回的结果。

```
exports.process_logs = function(file, process_func, process_parsedLog) {
var logs = [];
var log = null;
var counter = 0;
fs.readFile(file, 'utf8', function(read_error, content) {
    if (read_error) return sys.error(read_error);

    // TODO:: Remove these hardcode rails filters
    // switch filters and split functions to a nested helper in process func
    content.split(/Processing /).forEach(function(msg, index) {
        if ((tmp = process_func(msg, index)))
            logs.push(tmp);
    });
    log = process_parsedLog(logs);
});
console.log(log);
return log; 
```

};

但是变量“log”仍然为空，尽管当我在“log = process_parsedLog(logs);”之后使用 console.log(log) 检查它时 给出正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:45:53.470

问题是 fs.readFile 是一个异步函数，并且 process_logs 函数在 readFile 调用您传递给它的回调之前完成了它的执行。您应该在这些情况下使用承诺：[https ://github.com/kriskowal/q](https://github.com/kriskowal/q)

```
exports.process_logs = function(file, process_func, process_parsedLog) {
    var deferred = Q.defer();
    var logs = [];
    var log = null;
    var counter = 0;
    fs.readFile(file, 'utf8', function(read_error, content) {
        if (read_error) deferred.reject(sys.error(read_error));

        // TODO:: Remove these hardcode rails filters
        // switch filters and split functions to a nested helper in process func
        content.split(/Processing /).forEach(function(msg, index) {
        if ((tmp = process_func(msg, index)))
            logs.push(tmp);
        });
        log = process_parsedLog(logs);
        deferred.resolve(log);
    });
    // the result is not available yet
    return deferred.promise;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:44:35.543

您必须在文件系统的回调函数中执行返回。但是该函数保持异步。您不能立即使用返回值：

```
log = process_parsedLog(logs);
return log;
}); 
```

您应该使函数保持异步，如果您想要这样的模块，请向您要导出的匿名函数添加一个回调函数，例如：

`exports.process_logs = function(file, process_func, process_parsedLog, callback)`

当 fs 完成后，它将调用您传入的回调`return callback(err, log)`

你也可以在这里使用 Promise 来避免回调函数的金字塔。

# mysql - 在 mysql 中，如果列数据类型是整数，是否允许在 int 数据类型列中存储 long 值？

> ID：15134608
> 
> 赞同：3
> 
> 时间：2013-02-28T11:39:25.760
> 
> 标签：mysql

假设我想在 int 数据类型列中存储 long 值，它允许我存储它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:48:30.267

如[整数类型（精确值）- `INTEGER`, `INT`, `SMALLINT`, `TINYINT`, `MEDIUMINT`, 中`BIGINT`](http://dev.mysql.com/doc/en/integer-types.html)所述：

> MySQL 支持 SQL 标准整数类型`INTEGER`（或`INT`）和`SMALLINT`. 作为标准的扩展，MySQL 还支持整数类型`TINYINT`、`MEDIUMINT`和`BIGINT`。下表显示了每种整数类型所需的存储空间和范围。
> 
> ```
> +-----------+---------+----------+---- ------------------+
> | 类型 | 存储 | 最小值 | 最大值 |
> | | (字节) | （签名/未签名）| （签名/未签名）|
> +-----------+---------+----------+---- ------------------+
> | 小音 | 1 | -128 | 127 |
> | | | 0 | 255 |
> +-----------+---------+----------+---- ------------------+
> | 小号 | 2 | -32768 | 32767 |
> | | | 0 | 65535 |
> +-----------+---------+----------+---- ------------------+
> | 中型 | 3 | -8388608 | 8388607 |
> | | | 0 | 16777215 |
> +-----------+---------+----------+---- ------------------+
> | 情报 | 4 | -2147483648 | 2147483647 |
> | | | 0 | 4294967295 |
> +-----------+---------+----------+---- ------------------+
> | 大数据 | 8 | -9223372036854775808 | 9223372036854775807 |
> | | | 0 | 18446744073709551615 |
> +-----------+---------+----------+---- ------------------+
> 
> ```

“long”值所需的数据类型[取决于](http://en.wikipedia.org/wiki/Integer_%28computer_science%29#Long_integer)您定义“long”的语言和体系结构。在某些常见情况下，它表示一个 4 字节整数（`INT`在 MySQL 中），而在其他常见情况下，它表示一个 8 字节整数（`BIGINT`在 MySQL 中）；在不太常见的情况下，它可能意味着完全不同的宽度。

# c# - Javascript弹出未加载

> ID：15134611
> 
> 赞同：0
> 
> 时间：2013-02-28T11:39:32.777
> 
> 标签：c#, javascript, asp.net

我有以下代码 -

```
int p = 0;

        try
        {

            p = System.Convert.ToInt16(txt7.Text);
        }
        catch
        {
            Page.ClientScript.RegisterStartupScript(this.GetType(), "showMyMessage", "ShowMessage('Value must be numerical');", true);
        } 
```

和功能 -

```
 <script>

  function ShowMessage(message) { alert(message); }

</script> 
```

在调试时它进入了捕获但弹出窗口没有在前端触发，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:43:05.513

将您的脚本放在页面顶部（在您的主体标签或头部标签内），因为这可能是它的原因。启动脚本调用应该在您提到的脚本下方。为了获得最佳实践，请这样写

```
<script type="text/javascript">

  function ShowMessage(message)
   {
        alert(message); 
   }    
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:44:22.780

如果您使用的是 UpdatePanels，那么您应该改用 ScriptManager.RegisterStartupScript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:48:04.383

添加脚本类型并将脚本放在顶部..

```
 <script type="text/javascript">

 funcion ShowMessage(message)
 {
  alert(message);
 }

</script> 
```

# .htaccess - .htaccess 子文件夹不起作用

> ID：15134614
> 
> 赞同：0
> 
> 时间：2013-02-28T11:39:43.570
> 
> 标签：.htaccess, redirect, subdirectory

我到处寻找尝试解决这个问题，但我无法在其他地方找到任何解决方案。

我有一个在域上运行的 drupal 网站

我已经建立了一个新网站`www.domain.com/subfolder`

在子文件夹中的 .htaccess 文件中：

```
RewriteEngine On
RewriteRule ^/?login$ /index.php?get_action=login [L] 
```

但是，当我尝试访问 www.domain.com/subfolder/login 时，我会被重定向到 www.domain.com。

我需要`www.domain.com/subfolder/login`重定向到`www.domain.com/subfolder/index.php?get_action=login`

我该如何做到这一点。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:37:57.817

我会使用 drupal 而不是使用 .htaccess 文件，而是安装 Drupal 的登录目标模块。你可以在这里找到它 -> [http://drupal.org/project/login_destination](http://drupal.org/project/login_destination)。我希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:44:13.267

如果您的 htaccess 文件在子文件夹中，您可以尝试添加重写基础并删除前导斜杠：

```
RewriteEngine On
RewriteBase /subfolder/
RewriteRule ^login$ index.php?get_action=login [L] 
```

或者，您可以明确地将目标设为绝对 URL：

```
RewriteEngine On
RewriteRule ^/?login$ /subfolder/index.php?get_action=login [L] 
```

# javascript - 自动调整字体大小以便表格打印在一页上？

> ID：15134624
> 
> 赞同：1
> 
> 时间：2013-02-28T11:40:14.090
> 
> 标签：javascript, jquery, html

如何在打印表格时使用 Javascript 或类似工具自动更改字体大小以使其适合一页？

例如，它应该最大为 14pt 并缩小到最小 8pt 以适合单张纸。

# c# - Unity 静态属性注入

> ID：15134625
> 
> 赞同：5
> 
> 时间：2013-02-28T11:40:18.253
> 
> 标签：c#, unity-container, containers, dependency-properties, property-injection

我有两个类，一个通过注册类型来设置容器，另一个包含我想要注入的静态属性。我的问题是该属性永远不会通过注入设置，因此当我在其上调用方法时，该属性始终为空。

```
public class ClassOne
{
    public void Method()
    {
        Container.RegisterType<IClass, ClassImplOne>("ImplOne");
        Container.RegisterType<IClass, ClassImplTwo>("ImplTwo");
    }
}

public static class ClassTwo
{
    [Dependency]
    public static IClass SomeProperty { get; set; }

    public static void SomeOtherMethod()
    {
        SomeProperty.AnotherMethod();
    }
} 
```

如果我删除 Dependency 属性并在 ClassOne 中做一个简单的

```
ClassTwo.SomeProperty = Container.Resolve<IClass>("ImplOne"); 
```

它工作正常，但我想知道是否可以在不显式为属性分配值的情况下执行此操作（即容器可以通过属性注入）？

编辑：

谢谢。我从 ClassTwo 中删除了静态声明，并在 ClassOne 中为 ClassTwo 添加了 RegisterType 和 Resolve，还添加了 InjectionProperty：

```
Container.RegisterType<IClass, ClassImplOne>("ImplOne", new InjectionProperty("SomeProperty")); 
```

但它仍然不起作用：S

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-18T10:39:56.580

考虑评论后编辑：

有多种原因导致您有时仍希望或需要使用静态类而不是通过 Unity 级联所有内容。

如果静态类依赖于您希望通过 Unity 配置可配置/可交换的另一个类，我更喜欢使用工厂模式，如[如何使用 Unity 解决静态类中的依赖项？](https://stackoverflow.com/questions/30388081/how-to-resolve-dependency-in-static-class-with-unity)或者只是在需要时分配一个函数来解决依赖关系，而不是从静态类中引用容器。一个优点是您的所有 Unity 配置都可以在同一个地方。

在您的情况下，它可能如下所示：

```
public static class ClassTwo
{
    private static IClass _someProperty;

    public static Func<IClass> ResolveProperty { private get; set; }

    private static IClass SomeProperty
    {
        get { return _someProperty ?? (_someProperty = ResolveProperty()); }
    }

    public static void SomeOtherMethod()
    {
        SomeProperty.AnotherMethod();
    }

} 
```

在您的 Unity 配置中添加以下内容：

```
ClassTwo.ResolveProperty = () => container.Resolve<IClass>(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T12:11:00.867

当通过 Unity 解析类时，Unity 会注入依赖项。无法创建静态类，因此 Unity 无法注入依赖项。

不用静态类，而是使用 Unity 来解析`ContainerControlledLifetimeManager`ClassTwo 的伪单例类 ()。通过这种方式 Unity 注入`IClass`到`ClassTwo`何时`ClassTwo`创建（通过 Unity 容器解决），并且配置为单例，您`ClassTwo`在应用程序的整个生命周期中始终具有相同的实例。

您必须通过 Unity 解析 ClassTwo。

```
Container.RegisterType<IClass, ClassImplOne>("ImplOne");
Container.RegisterType<IClass, ClassImplTwo>("ImplTwo");
Container.RegisterType<InterfaceImplemetedByClassTwo, ClassTwo>();

//Simple example. Don't forget to use ContainerControlledLifetimeManager for ClassTwo to simulate sigleton. 
```

当你需要 ClassTwo 时：

```
Container.Resolve<InterfaceImplemetedByClassTwo> 
```

在 ClassTwo 中进行配置：

```
public class ClassTwo : InterfaceImplemetedByClassTwo
{
    [Dependency("ImplOne")] //inject ClassImplOne
    public IClass SomeProperty { get; set; } 
```

但这不是一个很好的解决方案，我认为您的问题在于 DI 的哲学。您需要从应用程序的顶层类级联依赖项。以显式方式解析顶层类。( `Container.Resolve`) 和依赖注入级联，这要归功于 Unity 的魔力。如果`ClassTwo`您`ClassTwo`使用`ContainerControlledLifetimeManager`.

换句话说，您不需要静态类，您将相同的类实例注入到其他类中而不是需要它。

# html - div HTML 中的较小元素

> ID：15134628
> 
> 赞同：0
> 
> 时间：2013-02-28T11:40:23.207
> 
> 标签：html, css

我的 div 中有许多图像，我将它们放置在其中，以便彼此完整。我还需要，当我将 div 复制到其他页面时，图像的样式相同，但我可以修改将 div 放在我的页面中的位置现在我的问题是：我希望 div 内的这些整体图像更小并且每个图像仍然完整我的代码的其他示例：

```
 <div style="position:absolute; top:900px; left:500px" >
      <img id="Burimi" style="position:absolute; left:10px" src="Images/Reagion/Burimi-B.png"/>
        <img id=""  style="position:relative; left:98px;top:1px;" src="Images/Reagion/N Batinah-B.png" />

      </div> 
```

例子：

![](../Images/24e0fbd884f6a6311a753557b38d8231.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:44:34.187

您可以调整容器而不是图像的大小。例如，您可以对 parent 使用以下内容`div`：

```
div {
transform: scale(.5,.5); /*Half width and height */
-ms-transform: scale(.5,.5); /* IE 9 */
-webkit-transform: scale(.5,.5); /* Safari and Chrome */
-o-transform: scale(.5,.5); /* Opera */
-moz-transform: scale(.5,.5); /* Firefox */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:44:44.437

听起来你最好使用[`image map`](http://www.w3.org/TR/html401/struct/objects.html#h-13.6). 让一张图像包含您希望它们显示在页面上的所有图像，然后用于`areas`区分图像上的不同区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:49:00.060

用于`position:relative`,`div`和`position:absolute`用于所有图像。

这样，您可以将 div 放在任何地方，并且图像将始终相对于`div`

# asp.net - 如何强制访问者浏览器删除缓存

> ID：15134629
> 
> 赞同：0
> 
> 时间：2013-02-28T11:40:33.247
> 
> 标签：asp.net, browser-cache

您如何强制用户浏览器删除属于您网站的缓存。这可能吗？例如，发生重定向问题。后来就修好了。但是愚蠢的浏览器缓存由于错误而重定向并继续这样做。

当缓存被删除时，这是固定的。这可以通过asp.net吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:43:20.770

尝试使用`<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">`

阅读更多关于[有用的 HTML 元标记](http://www.i18nguy.com/markup/metatags.html)

[如何防止 Internet Explorer 中的缓存](http://support.microsoft.com/kb/234067)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:43:39.600

如果我们谈论的是 HTTP301，那么您将无能为力：

[http://getluky.net/2010/12/14/301-redirects-cannot-be-undon/](http://getluky.net/2010/12/14/301-redirects-cannot-be-undon/)

不过，您可以添加另一个重定向，因此如果 A 正在重定向到 B，并且它应该重定向到 C，而不是将 B 更改为重定向到 C。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:45:22.700

huMpty duMpty 的答案是正确的。您不能强制客户端清空其缓存，因为这是客户端文件系统命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:49:15.433

您不能强制浏览器清除它们的缓存，您只能点击可以缓存的内容。

避免问题的唯一方法是对 url 进行版本控制并在修复后更改版本。问题是您应该提前完成，而且并不总是值得/实用。

# sql - SQL排除正则表达式不起作用，为什么？

> ID：15134630
> 
> 赞同：0
> 
> 时间：2013-02-28T11:40:35.003
> 
> 标签：sql, regex, oracle

我在db中有一些句子。我想选择那些没有网址的。

所以我要做的是

```
select ID, SENTENCE
from SENTENCE_TABLE
where regexp_like(SENTENCE, '[^http]'); 
```

但是，在执行查询后，出现在结果窗格中的句子仍然有 url。我尝试了很多其他组合，但都没有成功。有人可以解释或提供一个*很好*的链接，说明正则表达式在 SQL 中的实际工作方式。

**如何使用 SQL 查询过滤（排除）数据库中的实际单词？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:50:31.837

你把这件事复杂化了。只需使用标准[LIKE](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions007.htm#SQLRF52142)。

```
select ID, SENTENCE
  from SENTENCE_TABLE
  where SENTENCE not like '%http%'; 
```

`regexp_like(SENTENCE, '[^http]')`将分别匹配*除*h、t 和 p 之外的所有内容。我喜欢Oracle 中正则表达式的[PSOUG 页面，但我也建议阅读](http://psoug.org/snippet/Regular-Expressions--REGEXP_REPLACE_882.htm)[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions007.htm#SQLRF00501)。

要回复您的评论，您*可以*使用 REGEXP_LIKE，没有意义。

```
select ID, SENTENCE
  from SENTENCE_TABLE
 where not regexp_like(SENTENCE, 'http'); 
```

这将查找字符串`http`而不是单独的字母。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T11:43:04.823

`[^http]`将匹配除`h` **or** `t` **或** `t` **or** `p`之外的任何字符..所以这将匹配任何不包含`h` **or** `t` **或** `t` **or** `p`字符串中任何位置的字符串

它应该是`where not regexp_like(SENTENCE, '^http');`..这将匹配任何不以 http 开头的东西

# .net - 如何将本机线程附加到正在运行的 CLRhost？

> ID：15134638
> 
> 赞同：2
> 
> 时间：2013-02-28T11:41:23.450
> 
> 标签：.net, interop, clr

使用 JNI 代码，我可以将本机线程附加到 JVM 并执行我想要的任何操作。我如何在 .NET CLR 上做同样的事情？我在这里找不到任何这样的功能：http: [//msdn.microsoft.com/en-us/library/ms404385.aspx](http://msdn.microsoft.com/en-us/library/ms404385.aspx)

# windows-8 - 如何将 CredentialPicker 与 AuthenticationProtocol.Custom 一起使用？

> ID：15134639
> 
> 赞同：3
> 
> 时间：2013-02-28T11:41:34.437
> 
> 标签：windows-8

如何使用`CredentialPicker`with `AuthenticationProtocol`set to `Custom`？

为此，我需要设置`CustomAuthenticationProtocol`一些东西来避免`ArgumentException`. 但是，如果我将其设置为预定义值之一以外的值，则会收到以下异常：

> 指定的身份验证包未知。（来自 HRESULT 的异常：0x80070554）

# python - 多继承自 QObject 和 QRunnable 错误

> ID：15134640
> 
> 赞同：4
> 
> 时间：2013-02-28T11:41:35.610
> 
> 标签：python, qt, python-3.x, pyqt, pyqt4

我正在使用pyqt4。我有一个类 multi 从 QObject 和 QRunnable 继承，如下所示：

```
class DownloadTask(QObject, QRunnable):
    def __init__(self):
        QObject.__init__(self)
        QRunnable.__init__(self)
        self.setAutoDelete(False) 
```

当一个 DownloadTask 的实例正在初始化时，最后一行抛出异常：

```
TypeError: could not convert 'DownloadTask' to 'QRunnable' 
```

但我认为语法上是正确的，QRunnable 有 setAutoDelete 方法。为什么它不能转换为 QRunnable？

更新：
我打算使用 QThreadPool 来管理从 Internet 下载资源的多线程，并在完成后发出信号。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T11:58:28.350

[PyQt 参考指南 > 需要注意的事项 > 多重继承：](http://pyqt.sourceforge.net/Docs/PyQt4/gotchas.html#multiple-inheritance)

> 不可能定义一个新的 Python 类，它是多个 Qt 类的子类。

# c++ - Visual Studio 2010 本机 C++ 代码覆盖着色不起作用

> ID：15134644
> 
> 赞同：2
> 
> 时间：2013-02-28T11:41:51.377
> 
> 标签：c++, visual-studio-2010, code-coverage

我正在使用没有任何服务包的 Visual Studio 2010 终极版来为我的本机 c++ 项目进行代码覆盖测试，但代码覆盖着色似乎对我不起作用。我的步骤正确吗？

1）我使用两个命令行工具 vsinstr.exe 和 vsperfmon.exe 在没有我的项目目录/源代码的单独机器上执行检测和代码覆盖率收集。我只是将我编译的本机 .exe 文件复制到那里。我需要使用单独的机器的原因是我的VS2010安装在虚拟机（虚拟机）中，代码覆盖率似乎在虚拟机下不起作用。

2）我检测了 exe/运行测试（如下面的 2 个链接所述），最终得到了一个 .coverage 文件和 2 个检测的 .exe/.pdb 文件。然后我将这3个文件复制回我的完整VS2010终极机器（在虚拟框下）以及我的项目目录和源代码。

[http://blogs.msdn.com/b/phuene/archive/2007/05/14/code-coverage-collection.aspx](http://blogs.msdn.com/b/phuene/archive/2007/05/14/code-coverage-collection.aspx) [http://blogs.msdn.com/b/phuene/archive/2007/05/03 /code-coverage-instrumentation.aspx](http://blogs.msdn.com/b/phuene/archive/2007/05/03/code-coverage-instrumentation.aspx)

3) 我打开了 .coverage 文件，结果可以在代码覆盖结果窗口中读取，并且 Go To Source Code 功能正在工作，只是它所在的 C++ 源代码没有着色（我选择了 Show Code Coverage Coloring按钮）。

如何为原生 C++ 项目启用代码覆盖着色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:59:33.323

可能是安装 SP1 后修复的 VS2010 中的错误

# c++ - 枚举没有命名类型

> ID：15134645
> 
> 赞同：5
> 
> 时间：2013-02-28T11:42:03.953
> 
> 标签：c++, qt

我有一个班级`Response`说。

```
#include "NetworkResponse.h"

class NetworkResponse;

class Response {
public:
    Response();
    virtual ~Response();
    Response(NetworkResponse * networkResponse);

    NetworkResponses responseCode; // This is an enum and here I get an error

};

#endif 
```

`NetworkResponses`实际上是在`"NetworkResponse.h"`. 像这样：

```
// "NetworkResponse.h":
#include "Response.h"

enum NetworkResponses {
    Success = 1,
    UserAlreadyExists = 2,
    InvalidUsername = 3,
        SecurityError = 4,
        UnknownError = 5

};
class Response;

class NetworkResponse {

public:
    NetworkResponse();
    virtual ~NetworkResponse();

}; 
```

但是当我尝试编译时，在类定义中出现错误：“ *NetworkResponses*没有命名类型” 。`Response`有人可以帮忙吗？我想我错过了一些简单的东西。我想我能够在其他类中成功使用这个枚举，不知道在这种情况下出了什么问题......谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:13:51.010

您有一个循环包含依赖项：`NetworkResponse.h`包含`Response.h`，反之亦然。这行不通。`NetworkResponse.h`根本不需要包含`Response.h`，因此您可以删除该包含。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:48:54.680

这个枚举有一个基础类型，在这种情况下是 int 。因此，您可以执行以下操作：

```
int response = Success; 
```

你也可以这样使用它。看到[这个](http://cplus.about.com/od/learning1/ss/cppnumbers_8.htm)。

# php - ajax 将 json 发布到 php 未接收到所有数据

> ID：15134650
> 
> 赞同：1
> 
> 时间：2013-02-28T11:42:28.167
> 
> 标签：php, jquery, ajax

当我尝试发布到 php 文件时，JSON 文件的一些数据丢失了。我有一个包含 1100 个条目的 JSON 文件。在我的服务器上，我只能添加 333 个条目。在另一台服务器上，我可以添加 1000 个条目。我必须更改我的服务器配置吗？

JSON 文件有 1100 个条目（用户）

查询：

```
$.post(
  'store.php',
  {json:usersJSON},
  {contentType: "application/json"}, 
  function() {
    alert(data);
  }); 
```

PHP：

```
$JSON = $_POST['json'];
echo json_encode($JSON); 
```

在一台服务器上，这会回显 333 个条目，在另一台服务器上，它会回显 1000 个条目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:45:51.170

问题是我的 php.ini 文件中的 max_input_vars。它设置为 1000。这意味着我可以添加一个 json 文件，其中包含 1000 个条目和一个字段，或者 500 个条目和 2 个字段，...

我将 max_input_vars 设置为 5000，现在我可以发布一个包含 1666 个条目和 3 个字段的 json 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:55:19.480

你的条目有多大？可能是服务器限制了您的帖子。尝试查看 php.ini 中的 post_max_size 指令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:55:36.753

这可能是由于您的服务器的配置。检查 php.ini 的设置 max_post_size 并确保它足够大以发布您的数据。还要检查您的 Web 服务器设置 - Apache 有一个 LimitRequestBody 指令，它可能会导致您的问题。最后，检查您的 Web 服务器和 PHP 错误日志，以查看大型帖子是否触发了任何错误。

[资源](https://stackoverflow.com/questions/1544807/json-object-max-size)

# utf-8 - 如何在 Web 文档的标记部分正确定义 UTF-8 字符集

> ID：15134651
> 
> 赞同：0
> 
> 时间：2013-02-28T11:42:29.483
> 
> 标签：utf-8, doctype, head

如果我的文档类型是`<!DOCTYPE html>`最好或更正确使用

```
<meta charset="utf-8" /> 
```

或者

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" /> 
```

定义 utf-8？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:51:25.633

第一个仅对 HTML5 有效。第二个也适用于旧的 (X)HTML 版本

有了这个文档类型（表示 HTML5），两者都是有效的，我更喜欢第一个，因为它更短。:)

# java - Ant 失败：线程“主”java.lang.NoClassDefFoundError org/apache/tools/ant/launch/Launcher 中的异常

> ID：15134656
> 
> 赞同：4
> 
> 时间：2013-02-28T11:42:46.230
> 
> 标签：java, linux, ant, fedora, openjdk

我在 Fedora 17 上。我正在尝试使用与 Java 7 不兼容的 ant 构建文件编译项目。所以我决定安装 OpenJDK 6。不幸的是，JDK 6 已从 yum 存储库中删除，我认为它会是易于手动安装。我了解到没有 JAVA_HOME 变量，而是使用了替代系统。所以我下载了 OpenJDK 二进制文件（如果重要的话，从 OSG 下载）并使用`alternatives --install`命令安装了 java & javac & javaws。检查`java --version`并`javac --version`证明它是成功的。但奇怪的是，蚂蚁不再工作了！当我键入时，`ant --execdebug`我收到此消息：

```
exec "/usr/lib/jvm/openjdk-6.0.24/bin/java" -classpath "/usr/bin/build-classpath: 
error: JVM_LIBDIR /usr/lib/jvm-exports/openjdk-6.0.24 does not exist or is not a 
directory:/usr/bin/build-classpath: error: JVM_LIBDIR /usr/lib/jvm-exports/openjdk-6.0.24 
does not exist or is not a directory:/usr/lib/jvm/openjdk-6.0.24/lib/tools.jar"
-Dant.home="/usr/share/ant" -Dant.library.dir="/usr/share/ant/lib" 
org.apache.tools.ant.launch.Launcher -cp ""
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/tools/ant/launch/Launcher
Caused by: java.lang.ClassNotFoundException: org.apache.tools.ant.launch.Launcher
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: org.apache.tools.ant.launch.Launcher. Program will exit. 
```

与 java 一样，也没有 ANT_HOME 变量。但是，即使在安装 java 6 之前它工作正常，也没有 ANT_HOME。Ant 安装在 PATH 中已经存在的 /usr/bin/ant 下。

**更新：**我知道有类似的问题[qustion 1](https://stackoverflow.com/questions/2336299/what-is-wrong-with-my-ant-configuration)，[question 2](https://stackoverflow.com/questions/2336299/what-is-wrong-with-my-ant-configuration)。但都没有解决我的问题。例如，添加 ANT_HOME=/usr/bin 会使情况恶化，因为即使使用 JDK 7，ant 也无法正常工作！由于我对替代系统不熟悉，我完全删除了与 java 相关的替代方案，添加了 JAVA_HOME，并改为修改了 PATH。同样，java 和 javac 工作正常， java --version 返回正确的版本，但 ant 返回相同的错误。正如`--execdebug`告诉我们的那样，JVM_LIBDIR 没有指向正确的位置。我想该值是在 java.conf 文件中设置的，所以我将它粘贴在这里（我在 /usr/lib/jvm 上安装了 JDK 6 和 7）：

```
# System-wide Java configuration file                                -*- sh -*-
#
# JPackage Project <http://www.jpackage.org/>

# Location of jar files on the system
JAVA_LIBDIR=/usr/share/java

# Location of arch-specific jar files on the system
JNI_LIBDIR=/usr/lib64/java

# Location for noarch jar files using arch-specifics jar files
JAVAJNI_LIBDIR=/usr/share/java-jni

# Root of all JVM installations
JVM_ROOT=/usr/lib/jvm

# You can define a system-wide JVM root here if you're not using the
# default one.
#
# If you have the a base JRE package installed
# (e.g. java-1.6.0-openjdk):
#JAVA_HOME=$JVM_ROOT/jre
#
# If you have the a devel JDK package installed
# (e.g. java-1.6.0-openjdk-devel):
#JAVA_HOME=$JVM_ROOT/java-1.7.0-openjdk-1.7.0.9.x86_64
JAVA_HOME=$JVM_ROOT/openjdk-6.0.24

# Options to pass to the java interpreter
JAVACMD_OPTS= 
```

通过仅在 java.conf 中注释和取消注释相应的行，它表明 ant 使用 7 可以正常工作，而使用 6 则失败。当我`java`在 ant shell 中的命令之前回显 JVM_LIBDIR 时，我收到`user/share/java`了 java.conf 中所述的信息。但是`ant --execdebug`又返回了一些奇怪的东西：`JVM_LIBDIR /usr/lib/jvm-exports/openjdk-6.0.24`。那是什么，我该如何解决？

如果您在这里无法说出问题，那么安装多个版本的 JDK 并且可以轻松切换的最简洁和最安全的方法是什么？

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:44:59.600

您在类路径上缺少一个 jar。确保在 ant 从中获取依赖项的 lib 文件夹中拥有所有必需的库。

检查这个[类似的问题。](https://stackoverflow.com/questions/2336299/what-is-wrong-with-my-ant-configuration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:00:48.067

我只能回答最后一个问题。

我们不使用替代系统，而是手动管理它。

我们在 Ubuntu 和 CentOS 中所做的是，我们总是使用 Oracle JDK 网站上的 tar.gz，将其解压缩到 /opt 中的子文件夹（如`/opt/jdk_1.7.0_09`），创建指向该文件夹的符号链接（如`/opt/default_jdk -> /opt/jdk_1.7.0_09`），并设置环境变量我们将 JAVA_HOME 指向符号链接而不是实际文件夹 ( `JAVA_HOME=/opt/default_jdk`)。

这样，如果我们要更改或更新jdk（例如从JDK 7 upadte 9 到JDK 7 upadte 15），我们只需下载tar.gz 包，将其解压缩到另一个文件夹（例如`/opt/jdk_1.7.0_15`），删除旧符号链接（指向`/opt/jdk_1.7.0_09`）并创建一个指向新文件夹的新文件夹（例如`/opt/default_jdk -> /opt/jdk_1.7.0_15`）。

同样的方式适用于 32 位和 64 位 jdks，不同版本的 Ant、Maven、Gradle 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T02:48:53.000

看起来您的 Java 安装有问题。参考这个[http://www.linuxforums.org/forum/red-hat-fedora-linux/151698-problems-tomcat.html](http://www.linuxforums.org/forum/red-hat-fedora-linux/151698-problems-tomcat.html)有一个类似的问题，后来得到解决。

# java - 编辑文本验证

> ID：15134657
> 
> 赞同：0
> 
> 时间：2013-02-28T11:42:49.867
> 
> 标签：java, android

当按下按钮并在对话框中显示验证消息时，我有以下一小段代码来设置编辑文本的验证。

**Java 代码**

```
setContentView(R.layout.addnewcontacts);
            Button buttonSave = (Button) findViewById(R.id.buttonSave);
            final EditText editTextName = (EditText) findViewById(R.id.editTextName);
            buttonSave.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    if (editTextName.getText().toString().length() == 0) {
                        editTextName.setError( "First name is required!" );

                    }
                }
            });
        } 
```

代码工作正常，但弹出窗口中没有显示文本。

**截屏 ：**

![在此处输入图像描述](../Images/782f02c11fa662bf43bf50e9038d108a.png)

为什么弹出窗口不显示文字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:51:44.167

`EditText.setError()`用`SpannableStringBuilder`对象调用。

检查这个先前的 SO 问题：[Android EditText.setError() 产生不可见的错误文本](https://stackoverflow.com/questions/7273932/android-edittext-seterror-yields-invisible-error-text)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:02:37.593

使用[EditText.setTextColor(int color)](http://developer.android.com/reference/android/widget/TextView.html#setTextColor%28int%29)为文本元素设置所需的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:06:36.850

只需将 edittext 颜色添加到您的 xml 文件中。

```
 <EditText
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="@android:color/black" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:18:29.267

这非常简单，只需按照以下代码即可正常工作。

```
final EditText et=(EditText)findViewById(R.id.editText1);
    Button bt=(Button)findViewById(R.id.button1);
    bt.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            if(et.getText().toString().length()==0){
                et.setError("it is wrong");
            }
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T12:25:34.087

请检查您应用的主题。使用基本主题检查错误文本

# windows - 调整父窗口大小时自动调整对话框控件的大小 WinApi

> ID：15134667
> 
> 赞同：1
> 
> 时间：2013-02-28T11:43:16.993
> 
> 标签：windows, winapi, resources, dialog, autoresize

我正在尝试在对话框控件中显示网页。一切正常，直到我最大化父窗口，带有网页的内部控件保持其大小，因此在窗口侧面留下了一个空白区域。我想知道当我们调整主窗口大小时，是否有任何 WS_* 消息或可以用来自动调整控件大小的东西。我正在使用资源黑客，所以可能会有一些我应该知道的技巧。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:45:58.893

应用程序必须执行调整大小。当它收到[`WM_SIZE`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms632646.aspx)父控件的消息时，它会这样做。

您无法通过修改预先存在的二进制文件中的资源来改变这一点。您将需要编写一些代码来响应该消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:51:01.333

我尝试查看的方式，因为我从未尝试过破解这样的东西。将查看 Web 控件是否具有锚点属性。它应该被传递一个 wm-size 消息，它只是没有做任何事情。如果你锚定了 webcontrol 的所有四个角，它应该相对于它的父级调整大小。另一种方法是通过显式代码处理调整大小事件，但不要认为你可以很容易地破解它。

# html - 切断 CSS 继承

> ID：15134673
> 
> 赞同：0
> 
> 时间：2013-02-28T11:43:26.850
> 
> 标签：html, css

有什么办法可以打破 CSS 继承链并在某个容器（例如`div`元素）中再次使用默认 CSS？

这对于预览页面内的任意 HTML 很有用，而不必使用`iframe`带有通常警告的 a（例如，无法调整大小，需要由另一个 URL 提供内容）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:46:00.487

目前，没有办法使用 CSS 来打破继承链并将任意元素的属性重置为浏览器默认值。

新的级联和继承模块中的[`all: default`](http://www.w3.org/TR/css3-cascade/#all-shorthand)简写声明将允许这种确切的功能，但首先我们需要一些截至 2013 年初尚不存在的实现。

# c# - 将服务引用添加到我无权访问的 Web 服务

> ID：15134677
> 
> 赞同：1
> 
> 时间：2013-02-28T11:43:43.183
> 
> 标签：c#, web-services, visual-studio

奇怪的问题，我敢肯定。

我想制作一个使用 Web 服务的小程序。我无法从我的开发人员机器上访问此 Web 服务，但在客户端机器上，我可以。

关于服务，我知道我需要知道的一切。我在另一个程序中引用了它，并且可以从那里复制/粘贴所有内容。

但是，如何将此引用添加到我的新项目中？像，也许是手动覆盖？

在已经引用它的解决方案中，我假设我可以复制 reference.cs 文件，但是如何将它放入我的新解决方案中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:40:49.567

为什么不直接在本地机器上使用您从另一个灵魂中获得的代码创建一个新的 Web 服务呢？只需添加对此的引用以进行开发。

# google-chrome - 谷歌浏览器将元素更改为小写

> ID：15134678
> 
> 赞同：2
> 
> 时间：2013-02-28T11:43:53.127
> 
> 标签：google-chrome, dom, case-sensitive

我有一个这样的 HTML 文件：

```
<html>
<head>
    <title>Test</title>
    <script language="javascript">
    function removeElements() {
        alert( document.getElementById("FileArea").innerHTML );
        var RemoveElms = document.getElementsByTagName("p");
        for (i = 0; i < RemoveElms.length; ++i) {
            var newelm = document.createElement("SubScript");
            newelm.innerHTML = "1";
            RemoveElms[i].parentNode.insertBefore(newelm, RemoveElms[i]);
        }
        alert( document.getElementById("FileArea").innerHTML );
    }
    </script>

</head>
<body id="BodyID">
    <h2>Test</h2>
    <input type="button" value="Remove elements" onmousedown="removeElements(); return false" unselectable="on">
    <div id="FileArea"><p>Here is a test</p></div>

</body> 
```

我正在尝试添加一个元素`<SuperScript>`。在警报中，这个元素的所有字符都变成了小写`<superscript>`。我可以控制这个吗？这主要发生在 Chrome 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:46:13.130

Chrome 会解析所有元素并以统一的方式将它们添加到文档中。换行符等也会发生这种情况。

看到这个：[元素名称的大小写约定？](https://stackoverflow.com/questions/1074447/case-conventions-on-element-names)

# android - Facebook sdk 忽略字段过滤

> ID：15134682
> 
> 赞同：0
> 
> 时间：2013-02-28T11:44:07.647
> 
> 标签：android, facebook, facebook-graph-api

我正在使用适用于 Android 的最新 Facebook SDK 并尝试获取用户的相册，但只有其中几个字段。我的问题是字段参数被忽略，我得到了喜欢等所有数据......我的请求有什么问题？

```
Bundle params = new Bundle();
params.putString("fields", "count,name,id,created_time,updated_time,photos");
Request request = new Request(session, "me/albums", params, HttpMethod.GET, new Request.Callback() {

                @Override
                public void onCompleted(Response response) {
                    // TODO Auto-generated method stub
                    System.out.println(response);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:02:42.600

```
Requires the user_photos or friend_photos permission 
```

你需要那个权限！

# ios - Path 2.0 菜单动画 xcode

> ID：15134683
> 
> 赞同：5
> 
> 时间：2013-02-28T11:44:08.397
> 
> 标签：ios, objective-c, xcode, storyboard

我已经从[https://github.com/yourabi/PathMenuExample/downloads](https://github.com/yourabi/PathMenuExample/downloads)下载了 Menu Path 2.0 。“添加”按钮可以展开和折叠一系列菜单项（沿曲线绘制的动画菜单）。

![在此处输入图像描述](../Images/1e7ab2df2a97d4341b164d492fd2adf7.png)

但我想让这些按钮在一条直线上展开/折叠。

这是代码 **ExpandableNavigation.m：**

```
- (void) expand {
transition = YES;

[UIView animateWithDuration:self.speed animations:^{
    self.mainButton.transform = CGAffineTransformMakeRotation( 45.0 * M_PI/180 );
}];

for (UIView* view in self.menuItems) {
    int index = [self.menuItems indexOfObject:view];
    CGFloat oneOverCount = self.menuItems.count + 50<=1?1.0:(1.0/(self.menuItems.count-1));
    CGFloat indexOverCount = index *oneOverCount;
    CGFloat rad =(1.0 - indexOverCount) * 90.0 * M_PI/180;
    CGAffineTransform rotation = CGAffineTransformMakeRotation( rad ) ;
    CGFloat x = (self.radius + self.bounce * self.radius ) * rotation.a;
    CGFloat y = (self.radius + self.bounce * self.radius ) * rotation.c;        

    CGPoint center = CGPointMake( view.center.x + x , view.center.y + y); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-05T12:23:19.620

对于未来任何人的需要，用你想要的变换角度来改变角度。

```
 - (void) expand {
transition = YES;

[UIView animateWithDuration:self.speed animations:^{
    self.mainButton.transform = CGAffineTransformMakeRotation( 45.0 * M_PI/180 );
}];

for (UIView* view in self.menuItems) {
    int index = [self.menuItems indexOfObject:view];
    CGFloat oneOverCount = self.menuItems.count + 50<=1?1.0:(1.0/(self.menuItems.count-1));
    CGFloat indexOverCount = index *oneOverCount;
    CGFloat rad =(1.0 - indexOverCount) * 90.0 * M_PI/180;
    CGAffineTransform rotation = CGAffineTransformMakeRotation( rad ) ;
    CGFloat x = yourDesired_X; //should be same for all menu items
    CGFloat y = (view.frame.size.hieght+8.0)*index; //Y should be increasing or decreasing for every item       

    CGPoint center = CGPointMake(x , y); 
```

# iphone - UIView里面的UIScrollView，UIView手势单线

> ID：15134684
> 
> 赞同：0
> 
> 时间：2013-02-28T11:44:11.253
> 
> 标签：iphone, ios

我有一个`UIScrollView`里面的`UIView`。出于自定义分页的目的，我已将此剪辑设置`UIScrollView`为否，因此`UIScrollView`仍会显示在`UIView`.

> [ 区域 A [UIScrollView] 区域 B ]

现在我希望区域 AB 能够触发`UIScrollView's`触摸时的滚动事件。我记得有一个单行（类似`[X addGestureRecognizer ...]`）可以解决问题，但我忘记了它是什么...如果有人会很棒可以告诉我那是什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:04:07.427

这不会让您对滚动进行流畅的控制，就像您从`UIScrollView`.

但是，您可以使用以下代码：

```
UISwipeGestureRecognizer *leftSwipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(viewSwiped:)];
[leftSwipeGestureRecognizer setDirection:UISwipeGestureRecognizerDirectionLeft];
[self.view addGestureRecognizer:leftSwipeGestureRecognizer];
[leftSwipeGestureRecognizer release];

UISwipeGestureRecognizer *rightSwipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(viewSwiped:)];
[rightSwipeGestureRecognizer setDirection:UISwipeGestureRecognizerDirectionRight];
[self.view addGestureRecognizer:rightSwipeGestureRecognizer];
[rightSwipeGestureRecognizer release]; 
```

触发此方法：

```
- (void)viewSwiped:(UISwipeGestureRecognizer *)swipeGestureRecognizer {
    switch (swipeGestureRecognizer.direction) {
        case UISwipeGestureRecognizerDirectionLeft:
            // Make your scroll view scroll
            break;
        case UISwipeGestureRecognizerDirectionRight:
            // Make your scroll view scroll
            break;
        default:
            // Do Nothing
            break;
    }
} 
```

它将允许您检索滑动手势并`UIScrollView`相应地分页。

其他两个解决方案可能会更好：

1.  您可以使用与`UIPanGestureRecognizer`上述相同的方法。它识别真正的平移手势，不仅是离散的滑动，而且手指和手指之间的同步的实现`UIScrollView`会稍微复杂一些。
2.  您可以让您自己`UIScrollView`获取总宽度并自行管理分页，在跟踪via`UIView`的当前状态时重新计算您的步数。再一次，有点难。`UIScrollView``UIScrollViewDelegate`

希望这会有所帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:45:29.440

如果你想将`UIScrollView`的滚动手势重定向到另一个视图，你可以这样做：

```
[paddingView addGestureRecognizer:scrollView.panGestureRecognizer]; 
```

# javascript - 使用非 Silverlight 客户端的 Wcf 轮询双工服务？

> ID：15134687
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:44:19.737
> 
> 标签：javascript, jquery, json, html, wcf

我一直在开发 TicTacToe 在线游戏，为了实现它，我正在使用 WCF 轮询双工服务。但是经过整整一周的彻底搜索，我认为只有silverlight客户才有可能。

如果有人知道轮询双工服务可以与非 Silverlight 客户端（如 mvc3、asp.net 或类似的 javascript 等）一起使用，那么请给我想法、链接或示例代码片段。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:08:33.373

不要忘记非常酷和有用的（自动 json 序列化/反序列化，易于调试）WebMethods/ [PageMethods](http://www.c-sharpcorner.com/UploadFile/abhikumarvatsa/calling-an-Asp-Net-C-Sharp-method-web-method-using-javascript/)

要使用来自某些外部（外部页面）wcf 服务的服务器 WebMethods，您可以将脚本引用添加到 asmx“JS”端点。例如。“/_vti_bin/PageService.asmx/JS”，你很高兴：{WCFNamespace}.{WebMethodName}({arguments}) in javascript。非常便利。

顺便说一下 Ascx 控制 ex。不允许使用 PageMethods！以及基于 ascx 的 Sharepoint 可视化 webparts。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:47:22.000

您应该使用 REST 端点构建您的 wcf。这可能是使用 javascript 的方式。

您可以在这里开始学习如何做到这一点：http: [//msdn.microsoft.com/en-us/magazine/dd315413.aspx](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)

# android - 如何知道哪个视图可以实现哪个监听器

> ID：15134691
> 
> 赞同：0
> 
> 时间：2013-02-28T11:44:25.183
> 
> 标签：android, android-view, android-custom-view

我想知道，我们可以从哪里知道 View 可以实现哪些监听器。对于前。在自定义编辑文本视图类中实现 onItemSelectedListener 没有任何意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:50:51.993

您可以查看[Inherited Methods](http://developer.android.com/reference/android/widget/EditText.html#inhmethods)下的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:51:14.330

您应该参考文档（例如[View](http://developer.android.com/reference/android/view/View.html)），有一个嵌套类部分描述了每个`View`提供的接口列表。例如，`View`类`OnClickListener`接口，意味着每个子类`View`也将提供它。And `AdapterView`（它是 a 的父级`ListView`）提供`OnItemSelectedListener`, 意味着`ListView`将同时提供`OnClickListener`和`OnItemSelectedListener`。希望这可以帮助。

# pex - 运行 PEX 时出现错误

> ID：15134692
> 
> 赞同：2
> 
> 时间：2013-02-28T11:44:26.477
> 
> 标签：pex

首先 - PEX 上的工作很棒！

我们正在尝试为我们的 Office 加载项项目之一进行代码探索。所以，首先让我问你这个——这可行吗？换句话说，PEX 可以帮助我处理 Add-In/VSTO 项目吗？

其次，我试图在我们的一个加载项方法上执行 PEX 并得到以下错误

--- 描述运行时上下文 Microsoft.Pex.Engine.Libraries.MicrosoftVisualBasicLibrary+ProjectErrorRuntimeContextAttribute+Context 未能打开

运行时上下文 Microsoft.Pex.Engine.Libraries.MicrosoftVisualBasicLibrary+ProjectErrorRuntimeContextAttribute+Context 无法打开

--- 异常详情

System.InvalidProgramException：公共语言运行时检测到无效程序。在 System.Void Microsoft.VisualBasic.CompilerServices.ProjectData..ctor() 在 Microsoft.VisualBasic.CompilerServices.ProjectData Microsoft.VisualBasic.CompilerServices.ProjectData.GetProjectData() 在 Microsoft.VisualBasic.ErrObject Microsoft.VisualBasic.Information.Err()在 System.Void Microsoft.VisualBasic.CompilerServices.ProjectData.ClearProjectError()

任何帮助表示赞赏！

谢谢，Mrunal Buch

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T00:30:03.010

我最近在运行 Pex 时看到了相同的 InvalidProgramException 问题。我之前能够成功运行 Pex，没有任何问题。我卸载了 Windows 安全更新 KB2742595 并解决了这个问题。我不再看到来自 CLR 的 InvalidProgramException。

作为参考，[这里](https://stackoverflow.com/questions/14578355/system-invalidprogramexception-when-executing-unit-tests-in-mstest-after-microso)是安全更新和 MS 单元测试框架的类似问题。

# javascript - Javascript 幻灯片仅适用于页面上的一个幻灯片实例

> ID：15134698
> 
> 赞同：1
> 
> 时间：2013-02-28T11:44:30.557
> 
> 标签：javascript, slideshow

我在一个页面上有两个幻灯片 - [cems.uwe.ac.uk/~s3-gupta/starterpack/wireless.php](http://cems.uwe.ac.uk/~s3-gupta/starterpack/wireless.php) - 一个在“Eduroam with Windows”链接下，一个在“Eduroam on Mac”链接下。第二个（mac）不起作用 - 相反，它会在第一个幻灯片结束时加载图像。我将需要在此页面和其他页面上再放几个幻灯片。有没有办法让幻灯片在页面上的多个实例中单独工作 - 所以我可以有多个单独的幻灯片？

jsfiddle 在这里：http: [//jsfiddle.net/bud7u/](http://jsfiddle.net/bud7u/)

Javascript：

```
 $(document).ready(function(){
        var currentPosition = 0;
        var slideWidth = 560;
        var slides = $('.slide');
        var numberOfSlides = slides.length;

        // Remove scrollbar 
        $('#slidesContainer').css('overflow', 'hidden');

        // Wrap all .slides with #slideInner div
         slides
            .wrapAll('<div id="slideInner"></div>')
            // Float left to display horizontally, readjust .slides width
            .css({
            'float' : 'left',
            'width' : slideWidth
         });

        // Set #slideInner width equal to total width of all slides
         $('#slideInner').css('width', slideWidth * numberOfSlides);

        // Insert controls in the DOM
         $('#slideshow')
          .prepend('<span class="control" id="leftControl">Clicking moves left</span>')
          .append('<span class="control" id="rightControl">Clicking moves right</span>');

        // Hide left arrow control on first load
        manageControls(currentPosition);

      // Create event listeners for .controls clicks
      $('.control')
        .bind('click', function(){
        // Determine new position
        currentPosition = ($(this).attr('id')=='rightControl') ? currentPosition+1 : currentPosition-1;

        // Hide / show controls
         manageControls(currentPosition);
        // Move slideInner using margin-left
        $('#slideInner').animate({
        'marginLeft' : slideWidth*(-currentPosition)
        });
    });

     // manageControls: Hides and Shows controls depending on currentPosition
     function manageControls(position){
    // Hide left arrow if position is first slide
    if(position==0){ $('#leftControl').hide() } else{ $('#leftControl').show() }
    // Hide right arrow if position is last slide
     if(position==numberOfSlides-1){ $('#rightControl').hide() } else{ $('#rightControl').show() }
     }  
    });
</script> 
```

# join - phpactiverecord 加入限制

> ID：15134699
> 
> 赞同：0
> 
> 时间：2013-02-28T11:44:33.483
> 
> 标签：join, phpactiverecord

向包含连接语句的活动记录查询添加限制的正确方法是什么？我已经有一个 activerecord 连接语句，它可以转换为正确的 SQL

```
static $belongs_to = array(
array('job_request')
);

$requests = $this->all(array(
    'joins' => array('job_request'),
    'conditions' =>  array('DATE(job_date) >= ? AND DATE(job_date) <= ? AND'
                . ' user_id = ?', $start_date, $end_date, $userid))
); 
```

这将转换为 SQL

```
SELECT `job_applications`.* FROM `job_applications` INNER JOIN `job_requests`  
ON(`job_applications`.job_request_id = `job_requests`.id) WHERE 
DATE(job_date) >= '2013-01-28' AND DATE(job_date) <= '2013-03-04' 
AND user_id = '1' 
```

但是如果我添加限制，则连接将从 SQL 查询中删除

```
$requests = $this->all(array(
    'joins' => array('job_request'),
    'conditions' =>  array('DATE(job_date) >= ? AND DATE(job_date) <= ? AND'
                . ' user_id = ?', $start_date, $end_date, $userid)),
             array('limit' => 200, 'offset' => 0) 
```

);

生成

```
SELECT * FROM `job_applications` LIMIT 0,999999 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:24:23.283

limit 和 offset 属于第一个数组。

```
array('conditions'=>'...',
      'joins'=>'...',
      'limit'=>5',
      'offset'=>5
); 
```

你的数组看起来像

```
 array('conditions'=>'...',
      'joins'=>'...'),
      array('limit'=>5','offset'=>5)
); 
```

# php - 防止作者在 Wordpress 3.5 和 ACF 的媒体上传对话框中看到其他作者的媒体文件

> ID：15134700
> 
> 赞同：3
> 
> 时间：2013-02-28T11:44:34.433
> 
> 标签：php, plugins, custom-fields, media-library, wordpress-3.5

我已经为这个问题苦苦挣扎了很长一段时间，但似乎无法让它发挥作用。

我有

*   具有[高级自定义字段插件](http://advancedcustomfields.com/)的多用户 wordpress 3.5 站点。
*   自定义帖子类型，画廊，作者可以在其中通过自定义字段发布他们的照片
*   用户配置文件中的自定义字段。

当作者将照片上传到帖子中时，作者可以在媒体上传对话框中看到其他作者的上传。我不希望这种情况发生。我希望作者在媒体上传对话框中只看到他们自己的上传。

我可以用这个来工作：

```
// Prevent Authors from seeing other authors media files 
add_filter('parse_query', 'my_parse_query' );
function my_parse_query( $wp_query ) {
// Only applicable for Media Library && Media Upload Dialog
if (! preg_match('/wp-admin\/(?:upload|media-upload|admin-ajax).php/', $_SERVER['REQUEST_URI']) ) {
   return;
}
global $current_user;
$user_roles = $current_user->roles;
$user_role = array_shift($user_roles);
if ($user_role && is_string($user_role) && strtolower($user_role)==='author') {
  $wp_query->set( 'author', $current_user->id );
}
} 
```

但反过来，这会阻止自定义字段在用户配置文件中工作。这是因为 ACF 使用 admin-ajax 将字段添加到编辑屏幕，但是如果我从上面的函数中删除 admin-ajax 部分，它会再次开始显示其他作者的媒体，所以它又回到了原点。

我尝试使用从互联网上找到的几十种不同的方法[(1)](https://wordpress.stackexchange.com/questions/78084/prevent-other-editors-from-viewing-images-of-other-editors-in-add-media-popup) [(2)](http://wordpress.org/support/plugin/view-own-posts-media-only) [(3)](https://wordpress.stackexchange.com/questions/1482/restricting-users-to-view-only-media-library-items-they-have-uploaded)，但由于新的 wordpress 3.5 媒体上传对话框和/或 ACF，它们都不起作用。

知道如何防止作者在使用 ACF 时看到其他作者的媒体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-09T08:42:26.607

只需添加

```
if($wp_query->query_vars['post_type']!=='attachment'){return;} 
```

它会起作用的。问候。

# jquery - 快速定位。替换导致浏览器崩溃

> ID：15134703
> 
> 赞同：0
> 
> 时间：2013-02-28T11:44:35.730
> 
> 标签：jquery, url

我正在使用以jQuery [Cycle为核心的 jQuery](http://jquery.malsup.com/cycle/) [maximage](http://www.aaronvanderzwan.com/maximage/)来浏览幻灯片，并在每次转换时修改（替换）位置哈希。

它有效，除非您尝试导航太快；此时浏览器（在 Firefox 和 Chrome 中测试）将崩溃，因为页面会无休止地尝试重新加载自身。

```
$(function(){
    var h, 
        hash = window.location.hash, 
        hashes = {},
        index = 0;
    // Iterate slides into hashes object
    $('#slides').children('div').each(function(i) {
        h = $(this).attr('id');
        // Change IDs to hash format
        h = h.replace(/\ /g, '-');
        hashes[h] = i;
        slideInteger = i
    });
    if (hash) {
        index = hashes[hash.substring(1)] || index;
    };
    $('#slides').maximage({
        cycleOptions: {
            startingSlide: index,
            cssTransitions: true,
            after: onAfter,
            fx: 'fade',
            speed: 360,
            timeout: 0
        },
        onFirstImageLoaded: function(){
            $('#cycle-loader').hide();
            // Remove tooltip on hover
            $('.mc-image').hover(function(){
                $(this).removeAttr('title');
            });
        }
    });
    function onAfter(el, next_el, opts) {
        var nextHash = $(next_el).find('.slideLink').text().toLowerCase().replace(/\ /g, '-');
        window.location.replace(('' + window.location).split('#')[0] + '#' + nextHash);
    };
    $(window).on("hashchange", function() {
        $('#slides').cycle(hashes[window.location.hash.substring(1)] || 0);
    });
}); 
```

我尝试将 onAfter 函数替换为...

```
function onAfter(el, next_el, opts) {
    var nextHash = $(next_el).find('.slideLink').text().toLowerCase().replace(/\ /g, '-');
    if( window.location.hash != ('#' + nextHash) ){
        window.location.replace(('' + window.location).split('#')[0] + '#' + nextHash);
    }
}; 
```

......但它似乎没有任何区别。

这似乎也不是我可以在 jsfiddle 中复制的东西——因此对缺乏物理演示表示歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:59:54.077

您应该为此使用 HTML5 `history.pushState`/ `history.replaceState`API。您也有适用于旧版浏览器的垫片。

[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history) “添加和修改历史条目”

# bash - BASH 脚本。如何在指定的修改日期之前触摸每个文件

> ID：15134711
> 
> 赞同：0
> 
> 时间：2013-02-28T11:45:12.313
> 
> 标签：bash, find, touch

所以我希望能够进入一个文件夹并更新其中每个文件的“最后修改”数据。

到目前为止，我认为我应该使用：

```
touch --date "2012-12-31" /tmp/date
find /filestotouch -type f -not -newer /tmp/date 
```

这应该列出所有匹配的文件。现在，我需要制作一个循环，还是有一种简单的方法可以将这些数据传递给 touch 并让它全部完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:52:31.413

有两种选择：

1.  添加选项`-exec`：...`-not -newer /tmp/date -exec touch "{}" \;`
2.  管道到`xargs`：...`-not -newer /tmp/date -print0 | xargs -0 touch`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:50:34.120

试试 find 命令：

```
find /filestotouch -iname "*.type" -mtime +60 -exec touch "{}" \; 
```

上述命令将提取 60 天前修改过的所有文件。

# filepicker.io - 我可以获取使用 filepicker.io 上传的文件的直接 s3 url 吗？

> ID：15134713
> 
> 赞同：1
> 
> 时间：2013-02-28T11:45:14.890
> 
> 标签：filepicker.io

我需要 filepicker.io 将文件上传到我的 s3 存储桶，然后直接在 s3 中引用这些文件，而无需每次都通过 filepicker.io。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:13:46.750

是的，您可以通过多种方式获取 S3 密钥，或者作为返回的 FPFile 上的 .key 属性，或者使用`filepicker.stat`调用。

# python - 如何在opencv中计算粗糙度轮廓？

> ID：15134716
> 
> 赞同：0
> 
> 时间：2013-02-28T11:45:24.917
> 
> 标签：python, opencv, contour, feature-extraction

有没有办法在opencv中计算粗糙度轮廓？

图片示例：[https ://docs.google.com/file/d/0ByS6Z5WRz-h2NDgySmJ6NnpId0U/edit?usp=sharing](https://docs.google.com/file/d/0ByS6Z5WRz-h2NDgySmJ6NnpId0U/edit?usp=sharing)

**更新**

我计算粗糙度的代码：

周长轮廓/凸包周长

```
nomeimg = 'Riscalate2/JPEG/e (5).jpg'

img = cv2.imread(nomeimg)

gray = cv2.imread(nomeimg,0)#convert grayscale adn binarize

element = cv2.getStructuringElement(cv2.MORPH_CROSS,(6,6)) 
graydilate = cv2.erode(gray, element) #imgbnbin

cv2.imshow('image',graydilate)
cv2.waitKey(0)

ret,thresh = cv2.threshold(graydilate,127,255,cv2.THRESH_BINARY_INV)   # binarize

imgbnbin = thresh
cv2.imshow('bn',thresh)
cv2.waitKey()

#element = cv2.getStructuringElement(cv2.MORPH_CROSS,(2,2))
#element = np.ones((11,11),'uint8')

contours, hierarchy = cv2.findContours(imgbnbin, cv2.RETR_TREE ,cv2.CHAIN_APPROX_SIMPLE)
print(len(contours))

# Take only biggest contour basing on area
Areacontours = list()
calcarea = 0.0
unicocnt = 0.0
for i in range (0, len(contours)):
    area = cv2.contourArea(contours[i])
    #print("area")
    #print(area)
    if (area > 90 ):  #con 90 trova i segni e togli puntini
        if (calcarea<area):
            calcarea = area
            unicocnt = contours[i]

#ROUGHNESS
perimeter = cv2.arcLength(unicocnt,True)
hull = cv2.convexHull(unicocnt,returnPoints = False)
hullperimeter = cv2.arcLength(hull,True)

print("perimeter")
print(perimeter)
print("hullperimeter")
print(hullperimeter)

roughness = perimeter/hullperimeter
print("roughness")
print(roughness) 
```

错误：

```
Traceback (most recent call last):
  File "C:\Python27\nuovefeature.py", line 417, in <module>
    hullperimeter = cv2.arcLength(hull,True)
error: ..\..\..\src\opencv\modules\imgproc\src\contours.cpp:1886: error: (-215) curve.checkVector(2) >= 0 && (curve.depth() == CV_32F || curve.depth() == CV_32S) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:30:50.070

错误在convexHull 查找线中。

```
hull = cv2.convexHull(unicocnt,returnPoints = False) 
```

默认情况下，标志`returnPoints`是`True`. 然后返回的船体包含船体点或轮廓点的像素坐标。它通常用于绘制船体，找到它的面积，周长等。

但是，如果将其指定为`False`，则返回的值是轮廓中这些坐标的索引。它通常用于查找凸性缺陷。

所以你的代码应该如下所示：

```
hull = cv2.convexHull(unicocnt) 
```

有关示例的更详细说明，请阅读 中的convexHull 部分[**`this article`。**](http://opencvpython.blogspot.in/2012/06/contours-2-brotherhood.html)

# android - Android：如何仅在安装应用程序时调用方法

> ID：15134718
> 
> 赞同：5
> 
> 时间：2013-02-28T11:45:53.310
> 
> 标签：android, installation

我需要调用一个方法（或启动一个活动，或其他东西）来更新一个包含应用程序所需数据的文件。

但我希望它只在第一次安装应用程序时执行一次；因为之后我将自己处理文件的更新。

请问怎么做？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:01:44.877

在应用程序中只做一次你需要这样的东西：

```
boolean mboolean = false;

SharedPreferences settings = getSharedPreferences("PREFS_NAME", 0);
mboolean = settings.getBoolean("FIRST_RUN", false);
if (!mboolean) {
 // do the thing for the first time 
  settings = getSharedPreferences("PREFS_NAME", 0);
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putBoolean("FIRST_RUN", true);
                    editor.commit();                    
} else {
 // other time your app loads
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T11:55:16.180

您可以使用`SharedPrefrences`. 看看这个：

```
SharedPreferences ratePrefs = getSharedPreferences("First Update", 0);
        if (!ratePrefs.getBoolean("FrstTime", false)) {

        // Do update you want here

        Editor edit = ratePrefs.edit();
        edit.putBoolean("FrstTime", true);
        edit.commit();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:54:29.473

创建一个在您的应用启动时加载的启动器活动。[让它检查 SharedPreferences ( http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref) )中的值（例如 firstStartUp ）。第一次运行应用程序时，该值将不存在，您可以更新数据。更新数据后，在共享首选项中设置值，以便您的应用在下次启动时找到它，并且不会再次尝试更新数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T11:55:37.717

您可以通过在您的主要活动 onCreate 方法中检查您的共享偏好文件中是否有您选择的任意布尔值来完成此操作。在您第一次启动时，这将不存在，因此您可以调用您的方法并将您的布尔值设置为 true。这意味着在您的应用程序的下一次启动时，此值将为 true，并且可以跳过对您的函数的调用。

# asp.net - 使用 MVC 的 Sitecore“动态占位符”

> ID：15134720
> 
> 赞同：24
> 
> 时间：2013-02-28T11:45:54.203
> 
> 标签：asp.net, asp.net-mvc, sitecore, sitecore6, sitecore-mvc

我正在 MVC 中寻找一个有效的动态占位符解决方案。对于与 WebForms 一起使用的这种“模式”，至少有两个很好的描述：

*   [http://trueclarity.wordpress.com/2012/06/19/dynamic-placeholder-keys-in-sitecore/](http://trueclarity.wordpress.com/2012/06/19/dynamic-placeholder-keys-in-sitecore/)
*   [http://www.techphoria414.com/Blog/2011/August/Dynamic_Placeholder_Keys_Prototype](http://www.techphoria414.com/Blog/2011/August/Dynamic_Placeholder_Keys_Prototype)

而且我还发现这个博客解释了如何使用 MVC 做到这一点：

*   [http://blogs.perficient.com/portals/2012/10/17/sitecore-mvc-dynamic-placeholders/](http://blogs.perficient.com/portals/2012/10/17/sitecore-mvc-dynamic-placeholders/)

首先，我尝试使用 MVC 博客文章（SitecoreHelper 的扩展）中的技术来实现 Techphoria 的方法（使用 GUID），并且我还尝试实现最后描述的方法（使用递增 Column_1、Column_2 等的数字后缀）。

通过我尝试的所有变体，我没有成功创建一个有效的解决方案。我的占位符没有正确命名（我最终得到了奇怪的占位符结构，或者占位符重复自己）。

**在不详细说明我的尝试的情况下，我想知道是否有其他人准备好我可以使用的可行解决方案。**

如果我找不到一个已经可行的解决方案，我会更详细地描述我的问题，看看我是否可以让它发挥作用。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-28T12:39:55.277

我创建了这个创建动态占位符的扩展

```
public static class SitecoreHelper
{
    public static HtmlString DynamicPlaceholder(this Sitecore.Mvc.Helpers.SitecoreHelper helper, string dynamicKey)
    {
        var currentRenderingId = RenderingContext.Current.Rendering.UniqueId;
        return helper.Placeholder(string.Format("{0}_{1}", dynamicKey, currentRenderingId));
    }
} 
```

它使用名称中的 guid 创建一个占位符。我还在管道中创建了一个提取 guid 并检查占位符设置的步骤。

获取动态占位符的占位符设置的代码如果您使用 @Html.Sitecore().DynamicPlaceholder("test") 创建动态占位符 - 以下代码从名为 test 的占位符设置中获取设置

```
 /// <summary>
/// Handles changing context to the references dynamic "master" renderings settings for inserting the allowed controls for the placeholder and making it editable
/// </summary>
public class GetDynamicKeyAllowedRenderings : GetAllowedRenderings
{
    //text that ends in a GUID
    private const string DYNAMIC_KEY_REGEX = @"(.+)_[\d\w]{8}\-([\d\w]{4}\-){3}[\d\w]{12}";

    public new void Process(GetPlaceholderRenderingsArgs args)
    {
        Assert.IsNotNull(args, "args");

        string placeholderKey = args.PlaceholderKey;
        Regex regex = new Regex(DYNAMIC_KEY_REGEX);
        Match match = regex.Match(placeholderKey);
        if (match.Success && match.Groups.Count > 0)
        {
            placeholderKey = match.Groups[1].Value;
        }
        else
        {
            return;
        }
        // Same as Sitecore.Pipelines.GetPlaceholderRenderings.GetAllowedRenderings but with fake placeholderKey
        Item placeholderItem = null;
        if (ID.IsNullOrEmpty(args.DeviceId))
        {
            placeholderItem = Client.Page.GetPlaceholderItem(placeholderKey, args.ContentDatabase,
                                                             args.LayoutDefinition);
        }
        else
        {
            using (new DeviceSwitcher(args.DeviceId, args.ContentDatabase))
            {
                placeholderItem = Client.Page.GetPlaceholderItem(placeholderKey, args.ContentDatabase,
                                                                 args.LayoutDefinition);
            }
        }
        List<Item> collection = null;
        if (placeholderItem != null)
        {
            bool flag;
            args.HasPlaceholderSettings = true;
            collection = this.GetRenderings(placeholderItem, out flag);
            if (flag)
            {
                args.CustomData["allowedControlsSpecified"] = true;
                args.Options.ShowTree = false;
            }
        }
        if (collection != null)
        {
            if (args.PlaceholderRenderings == null)
            {
                args.PlaceholderRenderings = new List<Item>();
            }
            args.PlaceholderRenderings.AddRange(collection);
        }
    }
} 
```

以下代码从 pageeditor 中的 chrome 数据中删除 guid

```
/// <summary>
/// Replaces the Displayname of the Placeholder rendering with the dynamic "parent"
/// </summary>
public class GetDynamicPlaceholderChromeData : GetChromeDataProcessor
{
    //text that ends in a GUID
    private const string DYNAMIC_KEY_REGEX = @"(.+)_[\d\w]{8}\-([\d\w]{4}\-){3}[\d\w]{12}";

    public override void Process(GetChromeDataArgs args)
    {
        Assert.ArgumentNotNull(args, "args");
        Assert.IsNotNull(args.ChromeData, "Chrome Data");
        if ("placeholder".Equals(args.ChromeType, StringComparison.OrdinalIgnoreCase))
        {
            string argument = args.CustomData["placeHolderKey"] as string;

            string placeholderKey = argument;
            Regex regex = new Regex(DYNAMIC_KEY_REGEX);
            Match match = regex.Match(placeholderKey);
            if (match.Success && match.Groups.Count > 0)
            {
                // Is a Dynamic Placeholder
                placeholderKey = match.Groups[1].Value;
            }
            else
            {
                return;
            }

            // Handles replacing the displayname of the placeholder area to the master reference
            Item item = null;
            if (args.Item != null)
            {
                string layout = ChromeContext.GetLayout(args.Item);
                item = Sitecore.Client.Page.GetPlaceholderItem(placeholderKey, args.Item.Database, layout);
                if (item != null)
                {
                    args.ChromeData.DisplayName = item.DisplayName;
                }
                if ((item != null) && !string.IsNullOrEmpty(item.Appearance.ShortDescription))
                {
                    args.ChromeData.ExpandedDisplayName = item.Appearance.ShortDescription;
                }
            }
        }
    }
} 
```

**编辑**

web.config 包含设置如下：

```
<sitecore>
  <pipelines>

    <getPlaceholderRenderings>
      <processor 
        type="YourNamespace.Pipelines.GetPlaceholderRenderings.GetDynamicKeyAllowedRenderings, YourAssembly"
        patch:before="processor[@type='Sitecore.Pipelines.GetPlaceholderRenderings.GetAllowedRenderings, Sitecore.Kernel']"/>
    </getPlaceholderRenderings>

    <getChromeData>
      <processor
        type="YourNamespace.Pipelines.GetChromeData.GetDynamicPlaceholderChromeData, YourAssembly"
        patch:after="processor[@type='Sitecore.Pipelines.GetChromeData.GetPlaceholderChromeData, Sitecore.Kernel']"/>
    </getChromeData>

  </pipelines>
</sitecore> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T13:23:26.270

我从 sitecore 市场下载了[集成动态占位符包。](https://marketplace.sitecore.net/en/Modules/I/Integrated_Dynamic_Placeholders.aspx)在构建页面时，它会根据它们在表示层上的顺序增加占位符，并在占位符键的末尾附加可配置的后缀，以使它们独一无二。为我开箱即用。

# openerp - openerp 域过滤链接对象的属性

> ID：15134726
> 
> 赞同：0
> 
> 时间：2013-02-28T11:46:06.120
> 
> 标签：openerp

Q1。我只想在 PO 的某个字段中列出属于具有特定值的 PO 的那些 Incoming Shipments。例如，我有一个名为 po_type 的字段，其中包含“A”、“B”、“C”等选项。

我只想列出属于 po_type = 'A' 的采购订单的那些进货。

在这种情况下，域过滤器会是什么样子？

**编辑：**找到方法。它是 ('purchase_id.po_type','=','A')。

Q2。我继承了 purchase_order_line 并添加了几列。我已使用 xpath 将这些列添加到 purchase_order 表单内的 order_line 网格中。

我现在想根据其父项中的 po_type 值将其 invisible 属性设置为 true。当我使用标准方式时，

```
 attrs="{'invisible':[('po_type','=','A')]}" 
```

它无法找到 po_type，因为它显然不是订单项属性，而是属于其父项。

如何根据父级的列值使列不可见？

**编辑：**一些代码：

```
 <record id="purchase_order_A_form" model="ir.ui.view">
        <field name="name">purchase_order_A_form</field>
        <field name="model">purchase.order</field>
        <field name="type">form</field>
        <field name="inherit_id" ref="purchase.purchase_order_form" />
        <field name="arch" type="xml">
                <xpath expr="//field[@name='order_line']/tree//field[@name='name']" position="after">
                    <field name="my_brand" attrs="{'invisible':[('parent.po_type','!=','A')]}"/>
               </xpath>
               <field name="pricelist_id" select="2" position="after">
                    <field name="po_type"/>
                </field>                   
        </field>
    </record> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:23:07.657

您可以在采购订单行中提供采购订单的 po_type 的相关字段。然后将此字段添加为不可见并将属性指定为

> attrs="{'invisible':[('po_type',=,'A')]}"

但是你需要使用product_id的onchange来改变line中po_type的值，或者你必须使用默认的get来自动加载line中po_type的值，因为只有当你保存相关字段中的数据才会被加载记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:07:49.403

我不认为它现在在 openerp 中工作。

```
attrs="{'invisible':[('parent.po_type','=','A')]}" 
```

问候

# c++ - 带有文件名、行和时间戳的记录器

> ID：15134727
> 
> 赞同：3
> 
> 时间：2013-02-28T11:46:07.930
> 
> 标签：c++, logging

我有一个自定义记录器类，它具有用于调试、信息等消息的不同方法。除了日志消息，我还想打印调用记录器方法的文件的名称和行，以及时间戳。

我现在的解决方案是这样的：

```
m_logger.debug("some debug message", __FILE__ , __LINE__, __TIME__); 
```

**问题**：有没有办法避免调用这两个宏`__FILE__`，`__LINE__`并`__TIME__`实现某个人以便自动调用它？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T11:51:24.790

也许是这样的：

```
#define debug_with_ft(x) debug(x, __FILE__, __TIME__)

...
m_logger.debug_with_ft("some debug message"); 
```

当然，有多种不同的方法可以解决这个问题，例如`m_logger`在宏中隐藏整个：

```
#define debug_with_ft(x) m_logger.debug(x, __FILE__, __TIME__) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T11:57:17.047

`__TIME__`**是一个预处理器宏，它将在编译时**产生当前时间。因此，不应在您的情况下使用它，因为您可能希望**在运行**时访问当前时间（记录消息时）。

`__FILE__`也是一个预处理器宏，必须在预编译时进行评估，您不能以其他方式实现它。

您可能还对`__LINE__`宏感兴趣

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T12:12:11.087

*这是宏是*正确解决方案的一种情况。您想使用宏调用您的记录器（因为只有宏可以自动插入`__FILE__`and `__LINE__`），并且您希望以允许客户端代码传递一个或多个消息元素的方式执行此操作，可能使用`<<`. 通常的做法是这样的：

```
#define LOG() m_logger.getStream( __FILE__, __LINE__ ) 
```

, 其中`m_logger.getStream`插入标头（使用其参数和当前时间），并返回对日志流的引用，或也实现的特殊包装类— 仅`<<`返回对流的引用是最简单的，但使用包装允许捕获消息的结尾（因为包装器是临时的，它将在完整表达式的末尾被破坏），释放一个锁`getStream`（以便日志记录是线程安全的），或者确保输出是原子的，如果`<<`包装是这样的：

```
template <typename T>
LogStream& LogStream::operator<<( T const& object )
{
    if ( myStream != NULL ) {
        *myStream << object;
    }
} 
```

，您可以禁用日志记录，如果禁用，则不会进行任何转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T11:56:06.727

为什么你认为是坏的`__FILE__`？`__TIME__`我不确定它们本身是否真的是宏。它们是所谓的*宏名称*。我也认为它们是由标准定义的，因此使用它们应该是安全且可以的。

在旁注中，您似乎错过了编译时评估和运行时评估的概念。

在运行时如何知道源文件的名称？这就是为什么您应该使用`__FILE__`，因为编译器将为您评估文件名。

相反`__TIME__`，编译器也替换了宏名。您想记录编译或调用该行的时间吗？如果是后者，您应该使用适当的运行时函数。

我不认为有任何绕过的可能`__FILE__`。

**但是，如果您只想缩短通话时间**

我使用以下代码段：

```
#ifndef NDEBUG
#define DEBUG_MSG(msg) do{ std::cerr << __FILE__ << "(@" << __LINE__ << "): " << msg << '\n'; } while( false )
#else
#define DEBUG_MSG(msg) do{ } while ( false )
#endif 
```

我发现它非常便携且易于使用，但它并不意味着用作类方法。您可能可以将其定义为

```
#define DEBUG_MSG(msg) debug( msg, __FILE__, __LINE__ ) 
```

并使用

```
m_logger.DEBUG_MSG("message"); 
```

因此宏将扩展到设计的函数调用。然而，这是相当冒险的。如果您更改`debug`签名，则需要更改宏，并且它很难移植。

# ember.js - 让 {{action}} 在 ember.js 中工作

> ID：15134728
> 
> 赞同：0
> 
> 时间：2013-02-28T11:46:07.733
> 
> 标签：ember.js

我有一个简单的 Ember 应用程序，但我花了 5 个小时才让 {{action}} 工作，但没有任何运气。我已经尝试了3次我能想到的一切，但我被卡住了。我有最少的路由器。{{outlet}} 中默认显示一个 index.handlebars，并且有一个指向定价页面的链接，当成功点击该链接时会跳转到定价页面。在定价页面中，我尝试使用 a 和 a 来包含一个 {{action showMessage}}，它在 PricingController 中有相应的方法。查看 Chrome 中的 ember-extension，我可以看到 PricingController 确实与视图相关联。但是该方法永远不会被调用。我真的不知道还能尝试什么。

application.handlebars：

```
<div class='navbar navbar-inverse navbar-fixed-top'>
  <div class='navbar-inner'>
    <div class='container'>
      <div class='nav-collapse collapse'>
        <ul class='nav'>
          <li>{{#linkTo 'pricing'}}Prijzen{{/linkTo}}</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class='container' id='main'>
  <div class='content'>
    <div class='row'>
      <div class='span12'>
        <div class='page-header'></div>
        {{outlet}}
      </div>
    </div>
  </div>
</div>

App.Router.map(function() {
  this.route('pricing');
});

App.ApplicationRoute = Ember.Route.extend({
});

App.PricingRoute = Ember.Route.extend({
}); 
```

定价.车把：

```
<h1>some text</h1>
<a href="#" {{action showMessage}} class='btn btn-primary btn-large'>order</a>
<button {{action showMessage}}></button>

App.PricingController = Ember.Controller.extend({
  showMessage: function() {
    toastr.info('info');
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:54:39.493

您能否检查 JS 控制台以获取线索，我的猜测是这应该抛出“未处理 showMessage”错误。这是因为默认情况下 {{action}} 帮助程序以当前路由而不是控制器为目标

您可以将`showMessage`函数移动到路线上的事件对象

```
App.PricingRoute = Ember.Route.extend({
  events: {
    showMessage: function() {
      toastr.info('info');
    }
  }
}); 
```

或将动作的目标设置为控制器

```
<a href="#" {{action showMessage target="controller"}}>Show</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:38:01.427

您的代码在最新的 emberRCjs 和 handlebarsrc3 中正常工作。您使用的是哪个版本的 ember 和车把？

# android - 自定义 ActionBar 部分可见

> ID：15134731
> 
> 赞同：0
> 
> 时间：2013-02-28T11:46:14.640
> 
> 标签：android, actionbarsherlock

我正在使用 ABS，这是我的自定义视图

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="1dp"
    android:background="#F0F0F0"
    android:paddingBottom="10dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="35dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:src="@drawable/list" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="35dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:src="@drawable/create_dcyde" />

</RelativeLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="1dp"
        android:layout_weight="1"
        android:background="#F0F0F0"
        android:gravity="center_horizontal"
        android:text="TextView"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#F0F0F0"
        android:gravity="center_horizontal"
        android:text="TextView"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="1dp"
        android:layout_weight="1"
        android:background="#F0F0F0"
        android:gravity="center_horizontal"
        android:text="TextView"
        android:textColor="#000000" />

</LinearLayout> 
```

这是我的 onCreate

```
View customNav = LayoutInflater.from(this).inflate(R.layout.custom_view, null); 
getSupportActionBar().setCustomView(customNav);
getSupportActionBar().setDisplayShowCustomEnabled(true);
getSupportActionBar().setDisplayHomeAsUpEnabled(false);
getSupportActionBar().setDisplayShowHomeEnabled(false); 
```

如果我将 RelativeLayout 的底部填充减少到 10dp，我可以部分看到 TextViews。但我希望相对布局的底部填充至少 20dp 才能看起来不错。但在 20dp TxtView 消失。我是否超过了 ActionBar 的任何高度限制？

[截屏](http://s8.postimage.org/qm9453oyd/action_bar.png)

# php - 要求澄清 PHP 中的 OOP 程序

> ID：15134732
> 
> 赞同：2
> 
> 时间：2013-02-28T11:46:14.570
> 
> 标签：php, late-static-binding

我正在尝试用 PHP 编写以下代码

```
class A {
 protected static $comment = "I am A" ;
 public static function getComment () {
  return self :: $comment; 
 }
}

class B extends A {
 protected static $comment = "I am B" ;
}

echo B::getComment () ; // echoes "I am A" 
```

它不应该返回`I am B`吗？在oop PHP中，孩子不会覆盖父母吗？谢谢你的澄清。

== 编辑 ==

另外我的问题是静态和实例之间有什么区别，因为在实例中它可以工作：

```
class A {
    protected $comment = "I am A" ;

    public function getComment () {
        return $this -> comment ;
    }
}

class B extends A {
    protected $comment = "I am B" ;
}

$B=new B ;

echo $B->getComment(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:50:03.803

您正在寻找的功能称为“后期静态绑定”，并[在此处记录](http://php.net/manual/en/language.oop5.late-static-bindings.php)。

简短的版本是，为了让静态变量按照您希望的方式工作，您需要使用`static::`而不是`self::`.

注意：这只适用于 PHP 5.3 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:49:09.120

是的，它会覆盖它，但在你的情况下，你没有`getComment`覆盖`parent class.`

如果你试试

```
class B extends A {
 protected static $comment = "I am B" ;
 public static function getComment () {
  return self :: $comment; 
 }
} 
```

然后它会显示`I am B`。

实际上，您正在做的是调用不存在的`getComment`方法，因此它会**冒泡**到方法并显示结果。`b class``child class`**`parent class`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:52:06.767

您需要使用 LATE STATIC BINDING

```
class A {
 protected static $comment = "I am A" ;
 public static function getComment () {
  return static :: $comment; 
 }
}

class B extends A {
 protected static $comment = "I am B" ;
}

echo B::getComment () ; // echoes "I am A" 
```

我希望这有点道理**

# javascript - 如何让我的浮动 div 在主流浏览器中看起来一致？

> ID：15134733
> 
> 赞同：2
> 
> 时间：2013-02-28T11:46:17.133
> 
> 标签：javascript, html, css, web

我正在尝试为自己创建一个投资组合网站，但我才刚刚开始在其他计算机上进行测试。今天我注意到一些浮动 div 在 IE 和 Firefox 中定位不正确的问题。

Chrome 看起来正确，左图，右图 Internet Explorer ![在此处输入图像描述](../Images/2586d07faf694715174a0f4b0764feba.png)

浮动的 div 是 .projects 定义如下：

```
.project {
    margin: 2.5em 1.5em 0 0;
    width: 30%;
    float: left;
} 
```

我知道项目可能有不同数量的文本和稍微不同的图像尺寸，这可能是原因，但我不知道如何确保在 Chrome 中看到的一致定位？

随意摆弄浏览器中的实际网站：[www.holly.im](http://holly.im/)

感谢任何帮助！

....我真的应该将此作为一个单独的问题提出，但我不妨在这里提一下——我在 Firefox 中的页面内容下方有很多额外的空间，我可以在纯灰色上向下滚动一段时间我真的不明白，因为我的大部分网站内容都存在于#pages div 中，萤火虫突出显示告诉我应该在哪里结束。认为值得一问？但我可能会发布一个单独的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:56:16.403

您需要`clear:left`在第三个之后添加一个或在您的div`.project`上设置一个固定的高度。`.project`

当你的第二个标题更长时，它会导致下面一行上的浮动 div 堆叠在它后面，这将最后两个推到一行

# android - onCreateDialogView 内的 Listview NullPointerException

> ID：15134735
> 
> 赞同：0
> 
> 时间：2013-02-28T11:46:20.580
> 
> 标签：android, android-dialog

我试图创建一个对话框，它可以工作，除非我尝试添加这个 ListView 部分

```
 protected View onCreateDialogView() {  
    LayoutInflater inflater = ((SettingsActivity) ctx).getLayoutInflater();
    View vw = inflater.inflate(R.layout.channel_content_view, null);
    ListView lv = (ListView) vw.findViewById(android.R.id.list);
    Log.i("DIALOG", lv.toString()); ---- **RIGHT HERE IT BREAKS at com.example.tvrplayer.ChannelsDialogPreference.onCreateDialogView(ChannelsDialogPreference.java:56)**
    return vw;
 } 
```

如果我删除该 Listview 位，它会起作用并显示空对话框。

**频道内容视图.xml**

```
<LinearLayout 
   android:id="@+id/channels_list"
   android:layout_height="fill_parent"     
   android:layout_width="fill_parent"
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="horizontal">      

</LinearLayout> 
```

**堆栈跟踪**

```
02-28 13:37:15.768: E/AndroidRuntime(24732): FATAL EXCEPTION: main
02-28 13:37:15.768: E/AndroidRuntime(24732): java.lang.NullPointerException
02-28 13:37:15.768: E/AndroidRuntime(24732):    at com.example.tvrplayer.ChannelsDialogPreference.onCreateDialogView(ChannelsDialogPreference.java:56)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.preference.DialogPreference.showDialog(DialogPreference.java:285)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.preference.DialogPreference.onClick(DialogPreference.java:264)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.preference.Preference.performClick(Preference.java:939)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:202)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.widget.AbsListView.performItemClick(AbsListView.java:1173)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2701)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.widget.AbsListView$1.run(AbsListView.java:3453)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.os.Handler.handleCallback(Handler.java:605)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.os.Looper.loop(Looper.java:137)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at android.app.ActivityThread.main(ActivityThread.java:4514)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at java.lang.reflect.Method.invokeNative(Native Method)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at java.lang.reflect.Method.invoke(Method.java:511)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
02-28 13:37:15.768: E/AndroidRuntime(24732):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:48:28.957

您的布局没有任何 ListView。

将一个添加到您的 LinearLayout 中，给它一个 ID 并使用它来查找 ListView lv

# android - 如何在 ListView 中使用带有 Ksoap2 的 Web 服务查看图像

> ID：15134736
> 
> 赞同：1
> 
> 时间：2013-02-28T11:46:32.680
> 
> 标签：android, web-services, android-ksoap2

我创建了应用程序以从 Web 服务获取文件和文件夹列表，当进入 .jpg 和 .jpeg 等文件时，如何在单击该图像项时获取或查看该图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:18:09.327

关注这个，可能对你有帮助：

```
http://www.android-ever.com/2011/06/android-lazy-image-loader-example.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T05:30:54.530

有很多方法可以从 URL 加载图像。加载图像的有效方法是在后台线程中执行，就好像您尝试在 UI 线程中加载图像然后 UI 线程将挂起，并且在 4.0 以上的 Android OS 中，它会因 NetworkOnMainTHread Excpetion 而崩溃。有很多惰性加载方法您可以尝试其中任何一种：

1.Universal ImageLoader： [https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

2.Fedor的懒加载器： [https ://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

3\. [http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

# r - R中两个或多个二进制变量的直方图

> ID：15134737
> 
> 赞同：0
> 
> 时间：2013-02-28T11:46:32.967
> 
> 标签：r, histogram

我有两个二进制向量，比方说：

```
male  female unknown
0     1      0
0     1      0
1     0      0
0     0      1
1     0      0 
```

我想要这个数据的直方图。同样，我想要其他向量的直方图，其中可能有更多这样的向量。可以安全地假设所有向量具有相同的长度，它们来自同一个数据帧。

我有一个想法如何通过对每个向量进行计数或求和来做到这一点，但是这样做的好方法或正确方法是什么？

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:05:19.543

这是一些用直方图呈现的奇怪数据，但没关系。我会用`ggplot2`. 如果您融合数据（使用`reshape2`），则向量的数量或它们的长度无关紧要。

```
df <- data.frame(male=c(0,0,1,0,1),
                 female=c(1,1,0,0,0),
                 unknown=c(0,0,0,1,0))

df.m <- melt(df)
str(df.m)
hist(df.m$value ~ df.m$variable)
ggplot(df.m, aes(value)) + geom_histogram(aes(fill=variable)) +
  facet_wrap(~variable) #This depends on how you want your different variables split up. 
```

![在此处输入图像描述](../Images/283ee066d246dd77461bbc6d208ac563.png) #如果你想让他们在同一个情节上，那么：

```
ggplot(df.m, aes(value)) + geom_histogram(aes(fill=variable), position="dodge") 
```

# java - 在 Necessitas 中设置 Java 类路径

> ID：15134738
> 
> 赞同：1
> 
> 时间：2013-02-28T11:46:34.837
> 
> 标签：java, classpath, qt-necessitas

我正在使用 Necessitas 将我们用 Qt 编写的应用程序移植到 Android。这进展相当顺利，但我需要使用供应商提供的 Java 库来访问我们 Android 设备上的串行端口。在 Necessitas 中使用 Java 并没有太多帮助，尤其是附加库，但供应商告诉我，我需要在清单中包含该库，如下所示：

```
 <uses-library android:name="vendor.serial.library"
                android:required="true"/> 
```

...而且我还需要在 Java 类路径中包含该库，但这就是我卡住的地方：我不知道类路径的存储位置或如何更新它。我对库的位置也有点困惑：设备上的系统/框架有一个版本，这是我被告知要添加到类路径中的，但我的计算机上也有一个版本较大。如何管理附加库？当部署发生时，它们是否会从计算机复制到设备？

任何帮助将非常感激！

**更新**

我应该指出，我们的供应商提供了有关如何在 Eclipse 中使用他们的库的说明，并且这些信息有效：您右键单击项目，选择属性，然后将项目构建目标更改为他们提供的库（最初安装作为使用 Android SDK 管理器的附加组件）。不幸的是，我在 Necessitas 的 Qt Creator 中找不到与此类似的内容：转到项目 -> 运行 -> 包配置，我找到了一个设置 Android SDK 的选项，但这里没有出现我们供应商包的选项（只有 7 个， 8 和 10)。我假设必须为 Necessitas 单独配置 SDK，并且它不会自动找到所有可用的 SDK。

不幸的是，比较一个使用 SDK 10 的 Eclipse 项目和一个使用供应商 SDK 的项目并没有发现任何关于如何让 Necessitas 使用新 SDK 的线索，所以我不知道该去哪里从这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:03:25.923

@Philip：请参考以下链接。希望它有助于[http://qt-project.org/wiki/Setup_Necessitas_SDK_on_Windows](http://qt-project.org/wiki/Setup_Necessitas_SDK_on_Windows)

# c - 16Bit Little Endian 字节数组到整数数组到分贝值

> ID：15134740
> 
> 赞同：0
> 
> 时间：2013-02-28T11:46:37.257
> 
> 标签：c, audio, type-conversion, pulseaudio, decibel

我正在使用 PulseAudio API 来“实时”获取当前的麦克风输入。缓冲区数据以 16 位小端字节数组的形式提供。我想做的是找出缓冲区中的最大峰值并将其转换为分贝值。为此，我必须将每两个字节数组值转换为一个整数值。在同一个循环过程中，我也在寻找最大值。之后，我将最大值转换为分贝值。这是C代码：

```
static ssize_t loop_write(int fd, const uint8_t *data, size_t size) 
{
int newsize = size / 2;
uint16_t max_value = 0;
int i = 0;

for (i = 0; i < size; i += 2)
{
    // put two bytes into one integer
    uint16_t val = data[i] + ((uint32_t)data[i+1] << 8);

    // find max value
    if(val > max_value)
       max_value = val;
}

// convert to decibel
float decibel = max_value / pow(2, 15);

if(decibel != 0)
    decibel = 20 * log(decibel);

// print result
printf("%f, ", decibel);

return size;
} 
```

据我所知，PA_SAMPLE_S16LE 的幅度值应该在 0 到 32768 之间。但在分贝转换之前，我得到的值在 0 到 65536 之间。我的转换有什么问题吗？

为了完整起见，我还发布了我的 pulseaudio 设置：

```
int main(int argc, char*argv[]) 
{
char *device = "alsa_input.usb-041e_30d3_121023000184-00-U0x41e0x30d3.analog-mono";

// The sample type to use
static const pa_sample_spec ss = {
    .format = PA_SAMPLE_S16LE,
    .rate = 44100,
    .channels = 1
};
pa_simple *s = NULL;
int ret = 1;
int error;

// Create the recording stream 
if (!(s = pa_simple_new(NULL, argv[0], PA_STREAM_RECORD, device, "record", &ss, NULL, NULL, &error))) {
    fprintf(stderr, __FILE__": pa_simple_new() failed: %s\n", pa_strerror(error));
    goto finish;
}

for (;;) {
    uint8_t buf[BUFSIZE];

    // Record some data ...
    if (pa_simple_read(s, buf, sizeof(buf), &error) < 0) {
        fprintf(stderr, __FILE__": pa_simple_read() failed: %s\n", pa_strerror(error));
        goto finish;
    }

    // And write it to STDOUT
    if (loop_write(STDOUT_FILENO, buf, sizeof(buf)) != sizeof(buf)) {
        fprintf(stderr, __FILE__": write() failed: %s\n", strerror(errno));
        goto finish;
    }
}

ret = 0;

finish:

if (s)
    pa_simple_free(s);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T12:14:41.173

> 我想做的是找出缓冲区中**的最大峰值**并将其转换为分贝值。

从物理的角度来看，这种方法没有意义。虽然可以指定与整个动态范围相关的单个样本值，但您可能对声级更感兴趣，即信号的功率。一个单一的峰值，即使它是满量程的，也只携带很少的能量；由于谐波失真和有限的带宽，它可能会导致非常响亮的爆裂噪声，但从技术上讲，它的功率密度分布在整个频带有限的频谱上。

您真正应该确定的是 RMS 值（均方根）。IE

```
RMS = sqrt( sum( square(samples) )/n_samples ) 
```

**编辑：** *请注意，以上仅适用于没有直流部分的信号。大多数模拟声音接口都是交流耦合的，所以这不是问题。但如果也有直流部分，则必须先从样本中减去*平均值*，即*

 *```
RMS_DC_reject = sqrt( sum( square(samples - mean_sample) )/n_samples ) 
```* 

*我将把它作为练习留给读者将其添加到下面的代码中。*

这为您提供了处理样本的*能力*，这正是您真正想要的。你问了分贝。现在我要问你dB（*什么*）？您需要参考值，因为贝尔（或分贝）是相对（即比较）度量。对于数字信号，满量程为 0 dB(FS)，零线为`-20 log10( 2^B )`，其中`B = sampling bit depth`。对于大约 -96 dB(FS) 的 16 位信号。

如果我们谈论线路上的信号，常见的参考是 1 mW 的功率，在这种情况下，比例是 dB(m)。对于音频线路电平，已定义满量程等于 1 mW 的信号功率，这是 1V RMS 在 1 kOhm 电阻上的耗散（这里又是 RMS）。

现在，由于我们的满量程立即由输入电路确定，输入电路以 dB(m) 为单位定义，因此您稍后可以将 dB(FS) 显示为 dB(m)（或 dBm）就好了。

当谈到实际的声级时，这取决于您的输入放大器增益和所用麦克风的转换效率。

* * *

> 据我所知，PA_SAMPLE_S16LE 的幅度值应该在 0 到 32768 之间。但在分贝转换之前，我得到的值在 0 到 65536 之间。我的转换有什么问题吗？

您询问了有符号整数格式。但是您将这些值转换为无符号整数。而且由于 dB_FS 是相对于满量程的，所以不要将它除以位数。对于 16 位的零信号，结果应该是大约 -96 dB。无论如何，除法没有任何意义，因为它只是将您的 RMS 缩放到范围 [0; 1]，但 log(0) 发散到 -infinity。因此你的`if`陈述。但请记住，这是物理学，物理学是连续的，这里不应该有 if 语句。

你应该这样写

```
// even for signed values this should be 2^N
// we're going to deal with signed later
double const MAX_SIGNAL = 1 << SAMPLE_BITS;

// using double here, because float offers only 25 bits of
// distortion free dynamic range.
double accum = 0;
int const n_samples = size/2;
for (i = 0; i < size; i += 2)
{
    // put two bytes into one __signed__ integer
    int16_t val = data[i] + ((int16_t)data[i+1] << 8);

    accum += val*val;
}
accum /= n_samples;

// Since we're using signed values we need to
// double the accumulation; of course this could be
// contracted into the statement above
accum *= 2.;

float const dB_FS = -20 * log10( MAX_SIGNAL - sqrt(accum) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:16:24.673

根据[PulseAudio 简单 API](http://freedesktop.org/software/pulseaudio/doxygen/simple.html#transfer_sec)：

> 使用连接与普通的 read() 和 write() 系统调用非常相似。主要区别在于它们被称为 pa_simple_read() 和 pa_simple_write()。请注意，这些操作总是阻塞。

这似乎意味着返回值非常相似，因为在任何合理的地方似乎都没有提到 pa_simple_read 的返回值。这是[opengroup 的 read() 手册](http://pubs.opengroup.org/onlinepubs/009695399/functions/read.html)所说的：

> 成功完成后，read() ... 应返回一个非负整数，指示实际读取的字节数。

假设 pa_simple_read 返回的值小于`sizeof buffer`，您的 loop_write 函数将使用未初始化的值。那是未定义的行为。`sizeof(buf)`我建议存储 pa_simple_read 的返回值，并在检查错误之后将其传递给 loop_write 。

假设传递给 pa_simple_read 的值是奇数，您的 loop_write 将在最后一次迭代中使用未初始化的值。也许，为了解决这个问题，您可以将循环更改为：`for (i = 1; i < size; i += 2)`并将您的 val 声明/初始化更改为：`uint16_t val = data[i-1] + ((uint32_t)data[i] << 8);`

我要感谢 mtrw 帮助我得出这个结论。

# c# - C#透明winform，捕捉通过window看到的东西

> ID：15134745
> 
> 赞同：0
> 
> 时间：2013-02-28T11:46:50.130
> 
> 标签：c#, winforms, transparency, printscreen

对于一个基本的个人兴趣项目，我正在尝试制作一个**C# winform**，它是一个屏幕捕获设备，我希望能够调整透明窗口的大小，按下键盘上的按钮，程序保存它可以通过自身透明看到的内容到一个文件。

我需要帮助的是一种非hacky的方式来**获取通过透明窗口可以看到的图像**。

ms paint 中的快速模拟：[模拟图像](http://i47.tinypic.com/2eam1iv.png)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:56:45.200

使用[`Graphics.CopyFromScreen`方法](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.copyfromscreen.aspx)：

```
using (Bitmap bmp = new Bitmap(width, height))
{
    using (Graphics g = Graphics.FromImage(bmp))
    {
        g.CopyFromScreen(x, y, 0, 0, bmp.Size, CopyPixelOperation.SourceCopy);
    }

    // do whatever with `bmp`
} 
```

# javascript - 如何将图像保存到画布上？

> ID：15134748
> 
> 赞同：0
> 
> 时间：2013-02-28T11:47:01.923
> 
> 标签：javascript, image, html, canvas, save

我正在画布上绘制图像。然后我想保存图像。我尝试了 canvas.toDataURL("image/png")，但我意识到由于安全原因我不能使用 toDataURL()。但是，我必须保存图像。如何保存图像？

这是我的示例源代码。

```
window.onload = function(){
    var oCanvas = document.getElementById("work_pallet");
    var oContext = oCanvas.getContext("2d");

    var imageObj = new Image();                                 
    imageObj.onload = function() {
        oContext.drawImage(imageObj, 0, 0, oCanvas.width, oCanvas.height);      
    }
    imageObj.src = "http://www.ehanftp.co.kr/ueditor/data/20130204/mini2/guide.pdf_1.png";

    function saveImage(){
        var bRes = false;
        alert(oCanvas.toDataURL());
        bRes = Canvas2Image.saveAsPNG(oCanvas);
        if (!bRes) {
            alert("Sorry, this browser is not capable of saving image!");
            return false;
        }
    }

    document.getElementById("saveCanvasImage").onclick = function() {
        saveImage();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:51:32.640

例子：

```
<html>
    <head>
        <script src="http://www.nihilogic.dk/labs/canvas2image/canvas2image.js"></script>
        <script>
            function draw(){
                var canvas = document.getElementById("thecanvas");
                var ctx = canvas.getContext("2d");
                ctx.fillStyle = "rgba(125, 46, 138, 0.5)";
                ctx.fillRect(25,25,100,100); 
                ctx.fillStyle = "rgba( 0, 146, 38, 0.5)";
                ctx.fillRect(58, 74, 125, 100);
            }

            function to_image(){
                var canvas = document.getElementById("thecanvas");
                document.getElementById("theimage").src = canvas.toDataURL();
                Canvas2Image.saveAsPNG(canvas);
            }
        </script>
    </head>
    <body onload="draw()">
        <canvas width=200 height=200 id="thecanvas"></canvas>
        <div><button onclick="to_image()">Draw to Image</button></div>
        <image id="theimage"></image>
    </body>
</html> 
```

# jquery - 链接到 MVC 中的视图文件夹 - jQuery 加载函数

> ID：15134749
> 
> 赞同：0
> 
> 时间：2013-02-28T11:47:07.867
> 
> 标签：jquery, codeigniter

我正在使用代码点火器。我正在使用 jquery 的加载功能。我已将该功能添加到按钮的 onclick 事件中。当我单击它时，我用另一个名为 sample.php 的页面的内容填充了一个名为 sample 的 div。这个 sample.php 文件位于 CI 的 view 文件夹中。当我使用以下代码时，它会在根文件夹中搜索 sample.php 文件，而不是在 views 文件夹中。

```
$('#sample').load('sample.php'); 
```

当我输入正确的路径时，它说访问被禁止。我需要链接到视图文件夹中的这个 sample.php 文件。我敢肯定有办法。我需要帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:54:13.400

在您的控制器中编写一个函数，例如

```
function sample_fun
{
   $this->load->view("sample");
} 
```

在你的 jquery 函数中

```
$('#sample').load('<?php echo base_url()?>sample_comtroller/sample_fun'); 
```

# linux - 如何从用户空间向 alsa 注册虚拟卡？

> ID：15134751
> 
> 赞同：2
> 
> 时间：2013-02-28T11:47:33.610
> 
> 标签：linux, audio, kernel, device, virtualization

我正在从用户空间开发一个虚拟设备

（使用 umview [http://wiki.virtualsquare.org/wiki/index.php/UMview](http://wiki.virtualsquare.org/wiki/index.php/UMview)）所以，我需要将我的设备注册到系统的声卡列表

（我从未在内核模块中使用过 alsa，所以我认为我需要调用 snd_card_register() 函数）

但我找不到从用户空间做到这一点的方法......

也许我可以写一个系统调用来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T06:52:59.623

我认为您应该停止为覆盖任何特定文件而烦恼（即*停止*使用 umview，它不是必需的），只需使用[“文件”插件](http://www.alsa-project.org/alsa-doc/alsa-lib/pcm_plugins.html)在[ALSA 配置](http://www.alsa-project.org/main/index.php/Asoundrc)中创建设备，该设备将通过命名*管道*将数据传输到您的虚拟设备`/var/run/virtualsound/output`或类似的地方。

与 umview 方法不同，这将适用于所有应用程序，而无需以任何特殊方式运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T13:12:53.713

前段时间解决了这个问题

Alsa 用户空间库只需打开从 0 到 32 的每个 /dev/snd/controlC# 并启动

```
ioctl(SNDRV_CTL_IOCTL_CARD_INFO, ...); 
```

为了用已安装的声卡建立一个列表

如果我们在 /dev/snd/control# 上挂载 UmView 模块并劫持 ioctl 并对其进行响应，我们的模块将被 ALSA 识别为声卡

我用这种技术创建了一个虚拟声音设备，你可以在 [https://github.com/berdav/umdevaudio找到它](https://github.com/berdav/umdevaudio)

这是构建简单用户空间驱动程序的简单方法。

# iphone - 如何恢复已删除的 libxml2.dylib

> ID：15134752
> 
> 赞同：0
> 
> 时间：2013-02-28T11:47:34.407
> 
> 标签：iphone, ios, objective-c, xcode4.6

我意外删除了项目`libxml2.dylib`以及`libxml2.2.dylib`我们放置框架的位置。现在我重试从框架中添加它。我再也看不到这个框架了。我从我的另一个项目中添加了这个，但它给出了错误`linker command failed with exit code 1 (use -v to see invocation)`。我被困在这里。请帮助恢复这个问题，这对我来说很棒。提前致谢。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:56:47.877

如果您在框架中看不到它们，则意味着您已将它们发送到垃圾箱。如果您清空了垃圾箱，那么它们也会从您的 sdk 中永久删除。您需要通过重新安装 sdk 或在线某处获取两个 .frameworks 文件来取回它们。如果您足够幸运，请检查您的垃圾并恢复它们:)

# backbone.js - 两个模型的主干视图图

> ID：15134753
> 
> 赞同：0
> 
> 时间：2013-02-28T11:47:35.520
> 
> 标签：backbone.js

只是寻找一种在一个视图中使用两个模型的方法（或更好的主意）。

我有一个**Product**，带有一组**Attributes**。**属性**将从预定义的列表中选择。因此，我需要获取**Attribute**选项列表，然后获取为我的**Product**选择的属性列表。我有两个 API 端点来获取列表`/attributes/`和`/product/123/attributes/`.

如何最好地实现这一目标？我需要呈现来自第一个端点的选择，然后使用第二个端点来显示哪些被选中，然后监听`choose`操作（即选中一个复选框）。

或者另一种方法是将每个**Attribute**与每个**Product**相关联，以及一个可以说或不说的标志`selected`，但这似乎有点背对前的做事方式......但肯定是最容易从前端实现的.

顺便说一句，后端是 Django/Postgres，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:36:27.853

在这里可以帮助您的一件事是在您的产品模型中拥有一个属性集合，您可以在其中存储与模型对应的所有属性。您可以像这样在模型中初始化集合：

```
var Product = Backbone.Model.extend({
  initialize: function(){
    var attributes = new Attributes();
  }
}) 
```

当您初始化视图时，传递一个属性集合，其中填充了从 抓取的所有属性`/attributes`，以及一个空白产品模型（或在您创建视图时对其进行初始化）。然后，当用户从列表中选择一个属性时，可以触发一个事件，将其添加到产品属性集合中。

希望这可以帮助

# asp.net-mvc-3 - 实体框架一对多关系，但对象引用未设置为对象的实例

> ID：15134754
> 
> 赞同：1
> 
> 时间：2013-02-28T11:47:43.140
> 
> 标签：asp.net-mvc-3, entity-framework-5

我是初学者，我有 3 个实体：成员、帖子、评论。一个成员有很多帖子，一个帖子有很多评论。

```
 public class Member
   {
            [Key]
            public int Id{get;set;}    
            public string Name{get;set;}   
            public virtual ICollection<Post> Posts { get; set; }    
   }
   public class Post
   {            
       [Key]
       public int PostId{get;set;}        
       public string Subject{get;set;}        
       public int AccountId{get;set;}             
       public virtual Member member{get;set;}        
       public ICollection<Comment> Comments { get; set; }
   }

   public class Comment
   {
      [Key]
       public int CommentId{get;set;}    
       public string Body{get;set;}
       public int PostId { get; set; }
       public virtual Post post { get; set; }
   } 
```

这是在我的上下文中定义的关系：

```
 modelBuilder.Entity<Post>()
                .HasRequired(c=>c.member)
                .WithMany(t=>t.Posts)
                .HasForeignKey(d=>d.AccountId);

           modelBuilder.Entity<Comment>()
               .HasRequired(c => c.post)
               .WithMany(t => t.Comments);
               .HasForeignKey(d=>d.AccountId); 
```

我使用 asp.net mvc。表和关系都可以，但是在详细信息视图的 Post 控制器中：

```
 @model sishan.Models.Friend
  .
  .
  .  

 @foreach (var item in Model.Comments)
   {
      <p> @item.Body</p>
   } 
```

我收到此错误：对象引用未设置为对象的实例。

我没有任何语法错误。

请帮我。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:13:38.433

您是否启用了延迟加载？如果没有，那么您应该手动包含导航属性：http: [//msdn.microsoft.com/en-us/data/jj574232.aspx](http://msdn.microsoft.com/en-us/data/jj574232.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:42:10.980

```
public class Member
{

        Public Member(){
            Post = new new List<Post>();
        }

        [Key]
        public int Id{get;set;}    
        public string Name{get;set;}   
        public virtual ICollection<Post> Posts { get; set; }    
} 
```

这样，如果您的 Post 没有立即从数据库中加载，则列表不会是 Nothing。获取您的会员时，您还可以获取包含以下内容的帖子：

```
Post.Include(x => x.Posts) 
```

如果我缺少一些语法，请纠正我，而不是现在的 ac# 项目；）

# php - 照片中标记朋友的多个uid不起作用

> ID：15134760
> 
> 赞同：1
> 
> 时间：2013-02-28T11:48:17.847
> 
> 标签：php, facebook, facebook-graph-api, tags

照片中标记朋友的多个 uid 不起作用。下面的代码仅适用于单个用户..我将数组中的三个 uid 传递给 foreach 后，我将它们传递给了 facebook graph api..如何使用 graph api ( `$argstag`) 在 facebook 中标记这 3 个 uid。任何人都可以帮助我......任何帮助都是appericiated..在此先感谢

```
$friends_tag_array[]=array('uid'=>'1472898480','x'=>'40','y'=>'40');

                      $friends_tag_array[]=array('uid'=>'100002109469765','x'=>'40','y'=>'40');

                      $friends_tag_array[]=array('uid'=>'561260191','x'=>'40','y'=>'40');

                      //echo '<pre>'; print_r($jsonfrnd); echo '</pre>'; die();
                      for($i=0;$i<count($friends_tag_array);$i++)
                      { 
                      foreach($friends_tag_array as $value)
                      { 
                      //print_r($value); die();

                      $friend = $value['uid'];  
                      //$frndId = $friends_tag_array[$i]['uid'];

                      $argstag = array('to'=>$friend);

                      $argstag['x'] = '40';

                      $argstag['y'] = '40';

                      }
                      } 

                     try 
                        {
                            $res = $facebook->api('/'.$json->id.'/tags', 'POST', $argstag);
                        }   catch (FacebookApiException $e) {

                            Mage::getSingleton('core/session')->addError($post_process_view->render(POST_PROCESS_TEMPLATES,'post_process-error.phtml'));

                       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:20:38.793

下面的代码在多个标记时对我有用。希望它也可以帮助您调试问题

```
$friends_id = array('1472898480','100002109469765','561260191')
 $tags = array();
         foreach ($friends_id as $id)
         {
            $tag = array();
            $tag['tag_uid'] = $id;
            $tag['x'] = rand() % 100;
            $tag['y'] = rand() % 100;
            $tags[] = $tag;
         }
          $argstag = array(
            'tags' => $tags
          );

          $facebook->api("$photoId/tags","POST", $argstag); 
```

# wordpress - PHP 无法识别 plugin_url 函数

> ID：15134762
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:48:23.773
> 
> 标签：wordpress

我正在尝试查找插件和 webcontent URL 地址，但 php 无法识别这些功能

```
 Call to undefined function plugins_url()
  Call to undefined function content_url()

  $wp_plugin_url = plugins_url();
  $wp_content_url = content_url();
  echo $wp_plugin_url; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:54:52.867

你从哪里调用这个函数？[plugins_url](http://codex.wordpress.org/Function_Reference/plugins_url)是 wordpress 中定义的函数。在使用它之前，您必须将您的文件链接到 wordpress。

```
define( 'WP_USE_THEMES', false );  
require('wp-blog-header.php'); #modify to match path of that file on your server

$wp_plugin_url = plugins_url();
$wp_content_url = content_url(); 
```

# jquery - 如何在循环中解析 JSON

> ID：15134766
> 
> 赞同：1
> 
> 时间：2013-02-28T11:48:31.420
> 
> 标签：jquery, json, jquery-mobile

这里是 Javascript 的新手。我在用 JQuery 解析一些 JSON 时遇到了一些麻烦。我相信这取决于我的 JSON 的结构，但是因为我将这些脚本用于其他服务，所以不想改变那里的结构。

我的JSON如下

```
{"customerInAccount":[{"customer_name":"Jane Doe","auto_id":"21"},{"customer_name":"Jack   Black","auto_id":"22"}]} 
```

理想情况下，我想使用 customer_name 来填充列表视图，并且我还想将 auto_id 保存在某处（可能是本地存储），因此如果选择我可以显示相关数据。

如果有人可以帮助我构建一个循环来解析这个 JSON，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:53:45.397

您可以使用 jQuery 轻松解析它。

```
$.parseJSON(data); 
```

尝试这个：

```
var json = $.parseJSON(data);
for(var i=0; i<json.customerInAccount.length; i++){
     // do your stuff here..
} 
```

如果您有任何问题，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:53:59.513

像这样使用

```
var value=yourJsonString
var results=JSON.parse(value); 

$.each(results.customerInAccount,function(i,item){
 // do with item 
alert(  item.customer_name);
}); 
```

工作演示：[带循环的 JSON 解析](http://jsfiddle.net/YBEJw/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:17:48.213

您可以按照以下方式进行。

```
$('#home').live('pageshow', function(){
    // creating object 
    var customerList = JSON.parse('{"customerInAccount":[{"customer_name":"Jane Doe","auto_id":"21"},{"customer_name":"Jack   Black","auto_id":"22"}]}');

    // creating html string
    var listString = '<ul data-role="listview" id="customerList">';

    // running a loop
    $.each(customerList.customerInAccount, function(index,value){
     listString += '<li><a href="#" data-cusid='+this.auto_id+'>'+this.customer_name+'</a></li>';
    });
    listString +='</ul>';

    console.log(customerList);

    //appending to the div
    $('#CustomerListDiv').html(listString);

    // refreshing the list to apply styles
    $('#CustomerListDiv ul').listview();

    // getting the customer id on the click
    $('#customerList a').bind('click',function(){
     var customerID = $(this).data('cusid');  
     alert(customerID);
    });
}); 
```

你可以在这里查看活跃的工作小提琴。[http://jsfiddle.net/amEge/3/](http://jsfiddle.net/amEge/3/)

# django - 查询后如何将字段存储在数据库中

> ID：15134769
> 
> 赞同：0
> 
> 时间：2013-02-28T11:48:34.743
> 
> 标签：django, django-queryset

视图.py：

```
 q3=KEBReading.objects.filter(datetime_reading__month=a).filter(datetime_reading__year=selected_year).values("signed")
     for item in q3:
       item["signed"]="signed" 
       print item["signed"]
      q3.save() 
```

如何将字段保存到数据库中？我正在尝试用一个值保存名为“已签名”的字段。如果我这样做`q3.save()`，它会给出一个错误，因为它是一个查询集。我正在从数据库中进行查询，然后根据结果，想为字段设置一个值并保存它。

```
 prevdate=KEBReading.objects.filter(datetime_reading__lt=date) 
```

我从数据库中获取的所有行都少于当前日期。但我只想要最新的记录。如果我进入 2012 年 6 月 3 日。wen 我查询我想要的日期小于这个日期，即这个日期之前的日期。sumbody 可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:22:22.193

```
q3=KEBReading.objects.filter(...) 
```

将返回一个对象列表。a 的任何实例`Django Model`都是对象，并且所有`fields`实例都是该对象的属性。这意味着，您必须使用`dot (.)`符号来使用它们。

喜欢：

```
item.signed = "signed" 
```

如果您的对象是`dictionary`从字典派生的一个或一个类，那么您可以使用命名索引，例如：

```
item["signed"] = "signed" 
```

在您的情况下，该用法无效（因为您的对象类型不是`dictionary`基于的）

您可以调用[更新查询](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once "更新查询")：

```
KEBReading.objects.filter(...).update(selected="selected") 
```

或在循环中设置新值然后保存

```
for item in q3:
   item.signed="signed" 
   q3.save() 
```

但在您的情况下，更新查询是一种更好的方法，因为它执行的数据库调用较少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:00:37.450

```
q3 = KEBReading.objects.filter(datetime_reading__month=a,
    datetime_reading__year=selected_year)       
for item in q3:
   item.signed = True
   item.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:02:49.347

尝试使用[更新查询](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once)：

如果`signed`是[布尔字段](https://docs.djangoproject.com/en/dev/ref/models/fields/#booleanfield)：

```
q3 = KEBReading.objects.filter(datetime_reading__month = a).filter(datetime_reading__year = selected_year).update(signed = True) 
```

如果是[字符域](https://docs.djangoproject.com/en/dev/ref/models/fields/#charfield)：

```
q3 = KEBReading.objects.filter(datetime_reading__month = a).filter(datetime_reading__year = selected_year).update(signed = "True") 
```

更新评论：

如果要获取基于`datetime_reading`月份的记录，可以通过提供月份作为数字来实现。例如，`2`对于 2 月：

```
q3 = KEBReading.objects.filter(datetime_reading__month = 2).order_by('datetime_reading') 
```

如果您使用 获取记录`signed = True`，您可以通过以下方式进行：

```
q3 = KEBReading.objects.filter(signed = True) 
```

如果您只想通过给出日期来获取前一个日期的记录，您可以使用：

```
prevdate = KEBReading.objects.filter(datetime_reading = (date - datetime.timedelta(days = 1))) 
```

# android - 在Android中将声音录制到字节流中

> ID：15134783
> 
> 赞同：0
> 
> 时间：2013-02-28T11:49:31.987
> 
> 标签：android, audio, byte, recording

我想创建一个将声音记录到字节流中并且可以再次收听的应用程序。它不会将录制的音频保存到文件中，而是将其保存到硬件内存中。并且将有一个播放选项，可以通过该选项播放录制的文件。录音系统就像会说话的汤姆：录制音频并立即播放

任何人都可以为我提供此功能的示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:33:44.007

无需将音频保存到文件中，您可以使用[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)类，该类可让您将录制的音频读入字节数组。

一个更容易编码和使用的选项是[MediaRecorder](http://developer.android.com/reference/android/media/MediaRecorder.html)，尽管它会降低性能，因为它每次都会将音频保存到文件中。

# unit-testing - 进行单元测试时如何模拟内部对象？

> ID：15134784
> 
> 赞同：0
> 
> 时间：2013-02-28T11:49:41.033
> 
> 标签：unit-testing

我有这样的课：

```
Class A 
{
   public boolean do(String s)
   {
        C c = DB.GetResult(s);
        ....
        return yes/no
   }
} 
```

我想如何用 Mockito 编写单元测试，但是如何模拟内部对象 C 来抑制数据库连接操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:19:10.240

您的意思是模拟内部对象数据库而不是 C 对吗？

在像你这样的代码中你不能。您必须将 DB 注入 A 类。然后在单元测试中注入模拟/存根而不是与数据库对话的对象。

编辑：你可以这样做（我正在使用 C#）：

```
Class A 
{
   private readonly IDb database;

   // you can inject by hand or using IoC container
   // if you don't like that you have to pass IDb implementation everywhere
   // where you create objects of type A you can add another constructor - look under
   public A(IDb database)
   {
       this.database = database;
   }

   // here you call the above constructor and pass you original DB object
   public A() : this(new DB())
   {
   }

   public boolean do(String s)
   {
        C c = database.GetResult(s);
        ....
        return yes/no
   }
} 
```

当然，您的 DB 类必须实现 IDb 接口。

```
interface IDb
{
    C GetResults(String s);
} 
```

现在在你的测试中你这样做：

```
var a = new A(new TestDBDoingReturningExactlyWhatYouTellItToReturn()); 
```

并在应用程序代码中：

```
var a = new A(new DB()); 
```

或无参数构造函数，它完全执行上面的行

```
var a = new A(); 
```

# datatable - 根据列中的日期将数据表溢出到多个数据表中

> ID：15134785
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:49:42.493
> 
> 标签：datatable

我对数据表有一些具体问题，我必须根据数据表列中的日期动态拆分它。

例如：

[在此处输入链接描述](https://plus.google.com/photos/101957904473890909455/albums/5849968982763897505)

现在根据日期，我应该分别得到 3 个具有名称的数据表。

我不能Linq所以怎么能解决这个问题？？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:51:08.800

您可以根据日期列对表格进行排序，然后查看行数据并为每个新日期创建新表格

# asp.net-mvc - 在 asp.net mvc 中查找我的视图

> ID：15134787
> 
> 赞同：2
> 
> 时间：2013-02-28T11:49:54.270
> 
> 标签：asp.net-mvc

我的 Views 文件夹变大了！我想重新组织它，使 Views 文件夹包含一个模块列表，然后每个 Module 文件夹都包含其当前显示在 Views 文件夹下的 View (Controller) 文件夹的共享。

但这当然意味着进入我的每个控制器并编辑每个视图返回方法及其视图的显式位置。

因此，而不是 Controller Orders.Index 方法只是有这个：

```
return View(); 
```

我必须对其进行编辑才能返回：

```
return View("~/Views/Orders/Index.cshtml"); 
```

你可以想象这个练习达到 50 多个控制器的糟糕程度。

有什么方法可以让我为每个控制器设置路由或其他东西，告诉控制器的方法在 Views 文件夹的已定义子文件夹中找到他们的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:56:37.903

它可以在**CustomViewEngine**的帮助下完成 关注这篇文章，我希望您可以提供自己的位置来定位视图模板。MVC 提供了一种方式，我们可以轻松地提供要搜索的路径列表

[定位视图](https://stackoverflow.com/questions/632964/can-i-specify-a-custom-location-to-search-for-views-in-asp-net-mvc)

添加 CustomViewEngine 后，在 Application_Start() 事件中注册它，然后你就完成了 :) 快乐编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:56:17.490

您可以通过[实现自定义 RazorViewEngine](https://stackoverflow.com/questions/9838766/implementing-a-custom-razorviewengine)来解决此问题，您可以在其中指定每个请求、每个控制器等的视图的搜索路径。

# django - VirtualEnv 已安装，但找不到 bin/activate

> ID：15134789
> 
> 赞同：1
> 
> 时间：2013-02-28T11:50:01.733
> 
> 标签：django, mercurial, virtualenv

我们有一个使用 git 的工作项目，我们的讲师在进行了一些更改后将我们的项目转移到了 mercurial。我拉出新项目并在一个新文件夹下启动它。我尝试为新项目运行 virtualenv，但我得到：`Requirement already satisfied` 我通常会运行`$ . bin/activate`但我找不到 bin 文件夹。

此时我如何获得该项目的 virtualenv 设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:54:02.480

您拥有项目的地方不一定是您拥有环境的地方。你在git中也有环境吗？

也许您需要做的（如果您没有版本化环境）是重新创建环境（*virtualenv environment*），安装依赖项（*pip install -r req.txt*）然后激活它（*source path/to/environment /bin/激活*）。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:07:32.570

行

试试这个如何在虚拟环境中安装 django 的很棒的链接。

[http://aarshabeer.com/post/50973941605/install-multiple-django-version-using-virtualenvwrapper](http://ayarshabeer.com/post/50973941605/install-multiple-django-version-using-virtualenvwrapper)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:44:51.760

使用以下步骤

```
virtualenv virenv_name --no-site-packages -  create new virtual environment in git
pip install -r requirements.pip           -  It can be used for install tools in   
                                              (requirements.pip files)
yolk -l                   - It will used for list install files
source git/virenv_name/bin/activate       - Activate virtualenv
deactivate                                -  Deactivate virtualenv 
```

# perl - 即使输入位置不存在，如何使 Geo::Coder::Google 运行

> ID：15134790
> 
> 赞同：0
> 
> 时间：2013-02-28T11:50:02.243
> 
> 标签：perl, geolocation

我正在尝试使用`Geo::Coder::Google`从位置数组中获取坐标列表。我的问题是位置数组是由另一个脚本生成的，该脚本有时会在其中放入一些在谷歌地图中找不到的奇怪位置，即*CorseMétéo*。

这会生成以下错误消息：

```
"Google Maps API returned error: 500 Can't connect to maps.google.com:80 (Bad hostname) at geoTest.pl line 24.". 
```

我的代码如下所示：

```
#!/usr/bin/perl -w

use strict;
use locale;
use warnings;
#use diagnostics;
use utf8;

binmode(STDIN, "encoding(utf8)");
binmode(STDOUT, "encoding(utf8)");
binmode(STDERR, "encoding(utf8)");

use Geo::Coder::Google;

my @place = ('Daluis', 'Corse', 'CorseMétéo');
my ($long, $lat);

foreach my $place(@place){
     my $geocoder = Geo::Coder::Google->new(apikey => '{MyAPIkey}');

     my $response;
     until (defined $response){
         $response = $geocoder->geocode(location => $place);
         }
     ($long, $lat) = @{ $response->{Point}{coordinates} };
     print "$long\n";
     print "$lat\n";
 } 
```

通常这个 perl 模块用于地理定位街道地址，但它似乎在更大的地理位置上运行得很好。

有人有类似的问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:28:41.500

我设法找到了一种让它继续工作的方法，它看起来像这样：

```
#!/usr/bin/perl -w

use strict;
use locale;
use warnings;
#use diagnostics;
use utf8;

binmode(STDIN, "encoding(utf8)");
binmode(STDOUT, "encoding(utf8)");
binmode(STDERR, "encoding(utf8)");

use Geo::Coder::Google;

my @place = ('Daluis', 'Corse', 'CorseMétéo', 'New Delhi');
my ($long, $lat);

foreach my $place(@place){
    my $geocoder = Geo::Coder::Google->new(apikey => '{MyAPIkeyHere}');

    my $response;
    until (defined $response){
        eval{
            $response = $geocoder->geocode(location => $place);
            if ($@){
                "Couldn't get location : $place\n";
            }else{
                ($long, $lat) = @{ $response->{Point}{coordinates} };
            }
        }

    }
    print "$place\n";
    print "$long\n";
    print "$lat\n";     
} 
```

现在的问题是，每次找不到位置时，都会将先前位置的坐标推入其中。因此，之后只需摆脱重复项即可。我使用坐标来填充 JavaScript，以便使用 google maps API 生成位置图。但是，代码仍然会生成错误输出：

```
Useless use of a constant (Couldn't get location) in void context at get_LatLng.pl line 48. 
```

但是代码现在可以工作。如果有人知道如何管理此错误，那就太好了。

还是非常感谢 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:56:17.077

如果您希望代码在出现错误的情况下继续运行，请使用[`eval`块](http://perldoc.perl.org/functions/eval.html)：

```
 until (defined $@ or defined $response){
     eval {
          $response = $geocoder->geocode(location => $place);
     }
 }

 if ($@)
 {
     #some error handling.
 } 
```

请注意，`eval { BLOCK }`与 不一样`eval "string of code"`。它不会在运行时编译代码，也不是安全问题。这只是一种简单的异常处理方式。

# tcp - 将 BufferedReader.readLine() 与套接字一起使用并陷入无限循环

> ID：15134794
> 
> 赞同：1
> 
> 时间：2013-02-28T11:50:06.133
> 
> 标签：tcp

我正在开发一个基本的 TCP 服务器，我已经到了需要处理来自客户端（浏览器）的所有传入行的地步，并且我已经创建了这个循环来检测它是 GET 还是 HEAD 或 if- modified-since 或任何我想添加来检测的东西。

```
while ((acumulador = sEntrada.readLine()) != null) {
            if (acumulador.startsWith("GET") || acumulador.startsWith("HEAD")) {
                recibido = acumulador;
                System.out.println("SERVIDOR: Recibido " + acumulador);
                //Troceamos la entrada en tres
                StringTokenizer tokens = new StringTokenizer(acumulador);
                while (tokens.hasMoreTokens()) {
                    aux.add(tokens.nextToken());
                }
                tipo = aux.get(0);
                archivo = aux.get(1);
                version = aux.get(2);
            } else if (acumulador.toLowerCase().startsWith("if-modified-since")) {
                StringTokenizer tokens = new StringTokenizer(acumulador);
                while (tokens.hasMoreTokens()) {
                    aux2.add(tokens.nextToken());
                }

            } else {
                System.out.println("SERVIDOR: Recibido " + acumulador);
            }

        } 
```

问题是这是输出：

```
SERVIDOR: Conexion establecida con /127.0.0.1 al puerto 5000
SERVIDOR: Recibido GET / HTTP/1.1
SERVIDOR: Recibido Host: 127.0.0.1:5000
SERVIDOR: Recibido Connection: keep-alive
SERVIDOR: Recibido Cache-Control: max-age=0
SERVIDOR: Recibido Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
SERVIDOR: Recibido User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22
SERVIDOR: Recibido Accept-Encoding: gzip,deflate,sdch
SERVIDOR: Recibido Accept-Language: es,en-US;q=0.8,en;q=0.6
SERVIDOR: Recibido Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
SERVIDOR: Recibido Cookie: __utma=1.1831406279.1361823043.1361997547.1362010032.7; __utmc=1; __utmz=1.1361823043.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)
SERVIDOR: Recibido 
```

看起来不错，对吧？它读取我希望它读取的所有内容，但问题是它不会停止读取，客户端永远不会从我的服务器收到任何返回，因为服务器永远不会退出该循环，例如 .ReadLine() 永远不会返回“null”并停了下来。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:52:57.860

如果服务器永远不会为空，则客户端永远不会关闭连接。

# javascript - 小数的 Javascript 正则表达式

> ID：15134795
> 
> 赞同：1
> 
> 时间：2013-02-28T11:50:08.953
> 
> 标签：javascript, regex

在 Javascript 中，我试图验证用户输入仅是有效的小数

我有以下 JSFiddle 显示了我目前拥有的正则表达式

[http://jsfiddle.net/FCHwx/](http://jsfiddle.net/FCHwx/)

```
var regex = /^[0-9]+$/i;

var key = '500.00';

if (key.match(regex) != null) {
    alert('legal');
}
else {
    alert('illegal');
} 
```

这适用于整数。我还需要允许十进制数字（即最多 2 个小数位）

我已经尝试了许多可以在stackoverflow上找到的正则表达式，例如 [精度为2的小数的简单正则表达式](https://stackoverflow.com/questions/308122/simple-regular-expression-for-a-decimal-with-a-precision-of-2)

但它们都不适用于这个用例

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T11:54:36.577

这应该是工作

```
var regex = /^\d+(\.\d{1,2})?$/i; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T11:52:21.947

你试过这个吗？

```
var regex = /^[0-9]+\.[0-9]{0,2}$/i; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:53:31.063

我建议您不要为此使用 REGEX，而是使用简单的`!isNaN`：

```
console.log(!isNaN('20.13')); // true
console.log(!isNaN('20')); // true
console.log(!isNaN('20kb')); // false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:53:56.957

尝试这个：

```
\d+(\.\d{1,2})? 
```

d 代表数字 d{1,2} 代表 1 位数字。以及至少 2 位数字，例如 0.51

# javascript - AJAX 响应 - XmlHttp.responseXML 被切断

> ID：15134804
> 
> 赞同：2
> 
> 时间：2013-02-28T11:50:29.400
> 
> 标签：javascript, ajax, xmlhttprequest, httpresponse

当为 AJAX 请求返回的 responseXML 在中间被切断时，我们遇到了一个奇怪的行为。我们正在检查 readyState（对于 4）和 XmlHttp.status（对于 200），然后才继续解析 responseXML。

以下是相关代码：

```
. 
. 
. 
if ((myCommunicator != null) && (myCommunicator.XmlHttp.readyState == 4)) 
{ 
    myCommunicator.OnDataAvailable(); 
} 
```

OnDataAvailable 函数：

```
SoapCommunicator.OnDataAvailable = function () {   
DebugWrite("OnDataAvailable");   
XMLResponse = this.XmlHttp.responseXML;

if (this.XmlHttp.status != 200)
{
    DebugWrite("XmlHttp.status " + this.XmlHttp.status);
    DebugWrite("XmlHttp.statusText " + this.XmlHttp.statusText);
    DebugWrite("XmlHttp.readyState " + this.XmlHttp.readyState);
}
//  DebugWrite("xml=" + XMLResponse.xml.replace(/\r\n/g, ""));
if (XMLResponse.xml.length > 0)
{
    if (0 == XMLResponse.parseError.errorCode)
    {
        var dataNode = XMLResponse.lastChild.firstChild.firstChild.firstChild;
    }
    else
    {
        throw "Failed to parse SOAP response";
    }
}
else
{
    var result = new Object();
    result.IsSuccessful = false;
    result.ErrorDescription = "Failed to connect to server.";
    result.ErrorCode = failedToConnectToServer;
    eval(this.ResultCallBack + "(result)");
} } 
```

在这个例子中，dataNode 保存了信息。将其写入日志时，我们看到有时它会在中间被切断。仅在大量数据时才注意到此行为。关于它的另一件事是它总是在不同的部分被切断，而不是在精确的 X 字节之后。

顺便说一句，发生这种情况的客户使用的是德语编码。

谢谢！

更新：我忘记提及的另一件事是，一旦我们尝试解析数据（在 readyState == 4 和 XmlHttp.status = 200 之后），我们就会收到此错误：

> 错误：消息='完成此操作所需的数据尚不可用'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:18:56.390

假设您在后端（ASMX）上使用 ASP.NET Web 服务 - 尝试将此行添加到 web.config 文件（到该部分）：

```
<httpRuntime maxRequestLength="2147483647" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-05T19:51:33.723

我有一个类似的问题，有时 XmlHttpRequest 响应被切断。

我不知道这是否是您的问题的原因，但这可以帮助解决此类问题的人。我的问题显然是由于响应中有一些 Unicode 字符引起的。

似乎由于 Unicode 字符，当我在服务器上设置内容长度标头字段时，我实际上将它设置得太低。当浏览器收到响应时，它只读取 content-length 标头指定的字节数，由于我的错误，它在响应中指示**字符**数，而不是字节数。

我在 Node.js 上使用 String:length 来计算内容长度的值。显然，它返回字符数，而不是字节数。

通过注释掉在服务器上设置内容长度标头的代码部分，我解决了这个问题。现在它工作正常。

# php - 单击图像时如何在php变量中获取img标签的ID？

> ID：15134809
> 
> 赞同：0
> 
> 时间：2013-02-28T11:50:50.463
> 
> 标签：php, html, mysql, css

```
<a href="#"><img src="images/jbl.png" id="idhims"/></a>
<a href="#"><img src="images/swastik.png" id="idhims2" name="img2name"/></a> 
```

当点击上述任何一张图片时，我想通过使用点击的图片的 id从`mysql`另一个数据库中检索数据。`div`

我想使用`SELECT`-Query 中单击图像的 id 从 mysql 数据库中检索数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:13:25.230

使用 jQuery

包括这个

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

和

```
$(document).ready(function(){
    $('a').click(function(){
        var imgId = $(this).children('img').attr('id');// store the id to varialbe imgId
        //alert(imgId);
        $.ajax({
            type: "POST",
            url: "process_form.php",
            data: {imageid:imgId},
            dataType: "json",
            success: function(data) {
                //var obj = jQuery.parseJSON(data); if the dataType is not specified as json uncomment this
                $("#message_ajax").html(data.frmdb);// message_ajax is the id of the container to show the returned value
            }
        });   
    });
}) 
```

您可以访问 php 页面中的值`$_POST['imageid']`

示例 php 页面，它将返回单击的图像的值给我们的用户

```
$return_arr = array();
$return_arr['frmdb'] = $_POST['imageid'];
echo json_encode($return_arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:02:16.090

添加函数onclick="yourFunction(this.id)"，例如：

```
 <script>
      function yourFunction(id) {
        alert(id);
      }
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:15:34.873

对于您的查询，我让 jsfiddle 如下所示

HTML

```
<img  src="http://google.com/img" id="id"/>
<img  src="http://google.com/img" id="id1"/>
<img  src="http://google.com/img" id="id2"/> 
```

JS

```
$("img").click(function() {
  alert(this.id);
}); 
```

[对于 jsfiddle 示例，请单击此处](http://jsfiddle.net/9BCXG/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:18:49.510

将操作放入控制器以从数据库中检索数据。就像是

```
public function actionQuery($id)
{
    $result=(your query using $id);
    echo CJSON::encode(array('data'=>$result));
} 
```

在页面上使用 jQuery

```
<a href="#"><img src="1" id="idhims" onclick="query(this)"/></a>

<script type="text/javascript">
    function query(obj) {
        $.get("your_controller/query", { id: $(obj).attr('id') })
            .done(function(data) {
                use the data to fill your div;
            });
    }
</script> 
```

# php - 使用 javascript 和 php 查找所有可用字符

> ID：15134813
> 
> 赞同：0
> 
> 时间：2013-02-28T11:50:52.947
> 
> 标签：php, javascript, keyboard

**如何使用 JavaScript 或|和 PHP 列出所有可用的键盘字符？**

假设用户无法使用键盘，只能用鼠标填写表格。我想列出所有可用的键盘字符以将它们绑定到鼠标单击事件。

编辑：

我不在乎用户有什么样的键盘。我所知道的是，Alt + 0246 得到 ö 作为@Barney 悲伤。ö 存储在哪里，以便某些键盘通过键访问该字符，而其他键盘使用 ALT + 0246？那个位置不是像 PHP|JavaScript 可以访问的数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:54:58.200

您可能需要研究这些

[JS 基于浏览器的屏幕键盘，如手机和平板电脑](https://stackoverflow.com/questions/8762431/js-based-on-screen-keyboard-for-browser-like-on-cellphones-and-tablets)

[http://jquerybyexample.blogspot.com/2012/04/jquery-ui-virtual-keyboard-plugin.html](http://jquerybyexample.blogspot.com/2012/04/jquery-ui-virtual-keyboard-plugin.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:56:28.527

无法从浏览器上下文中检测到用户使用的是什么键盘——这是导致一系列问题的原因，[正如这里所描述](http://unixpapa.com/js/key.html)的那样——这意味着我们无法判断用户可以直接输入哪些字符。

例如，德国和土耳其用户可能`ö`随时可用。我必须按住`Alt`并按`0246`顺序按我的数字键盘才能生成它。最终结果是一样的。

要记住的另一件事是，即使您可以准确确定击中了哪个键，它的含义和作用也完全是另一回事。用户可能会在很多时候反弹他们的命令，或者可能正在使用区域仿真器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:01:23.830

尝试这样的事情：

```
var container = $('#container');

for ( var i = 0; i < 26; i++ ) {
    var chr = $('<div>' + String.fromCharCode(97 + i) + '</div>');

    container.append(chr);
    chr.click(function() {
        console.log($(this).text());
    });
} 
```

# google-cloud-storage - 使用自定义 URL 时 Content-Type 标头丢失

> ID：15134819
> 
> 赞同：1
> 
> 时间：2013-02-28T11:51:14.633
> 
> 标签：google-cloud-storage

我在 Google Cloud Storage 上托管了一个 FireFox 插件。为了被 FireFox 正确处理，Content-Type 需要设置为 application/x-xpinstall

我已上传如下：

```
gsutil -h "Content-Type: application/x-xpinstall" cp -a public-read \
   ActivityInfo.xpi gs://download.activityinfo.org 
```

从标准端点访问时，一切都是正确的：

```
$ curl -s -D - http://commondatastorage.googleapis.com/download.activityinfo.org/ActivityInfo.xpi \ 
     -o /dev/null

HTTP/1.1 200 OK
Server: HTTP Upload Server Built on Feb 13 2013 15:53:33 (1360799613)
Expires: Thu, 28 Feb 2013 12:38:30 GMT
Date: Thu, 28 Feb 2013 11:38:30 GMT
Last-Modified: Thu, 28 Feb 2013 11:38:01 GMT
ETag: "1ee983889c947a204eab4db6902c9a67"
x-goog-generation: 1362051481261000
x-goog-metageneration: 1
Content-Type: application/x-xpinstall
Content-Language: en
x-goog-crc32c: a11b93ab
Accept-Ranges: bytes
Content-Length: 5562
Cache-Control: public, max-age=3600, no-transform
Age: 491 
```

但是当我尝试从自定义域 download.activityinfo.org 访问时，标头恢复为 application/octet-stream

```
$ curl -s -D - http://download.activityinfo.org/ActivityInfo.xpi -o /dev/null       
HTTP/1.1 200 OK
Server: HTTP Upload Server Built on Feb 13 2013 15:53:33 (1360799613)
Expires: Thu, 28 Feb 2013 12:10:24 GMT
Date: Thu, 28 Feb 2013 11:10:24 GMT
Last-Modified: Wed, 27 Feb 2013 20:36:24 GMT
ETag: "1ee983889c947a204eab4db6902c9a67"
x-goog-generation: 1361997384772000
x-goog-metageneration: 2
Content-Type: application/octet-stream
x-goog-crc32c: a11b93ab
Accept-Ranges: bytes
Content-Length: 5562
Cache-Control: public, max-age=3600, no-transform
Age: 2298 
```

我已根据文档将 CNAME 设置为 c.storage.googleapis.com

```
$ nslookup download.activityinfo.org
Non-authoritative answer:
Server:  Comtrend.Home
Address:  192.168.1.1

Name:    storage.l.googleusercontent.com
Addresses:  2a00:1450:400c:c00::80
          173.194.78.128
Aliases:  download.activityinfo.org
         c.storage.googleapis.com 
```

这是一个错误还是我需要更改我的配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:31:12.387

上面的两个结果在 x-goog-generation 和 x-goog-metageneration 中具有不同的值，这让我怀疑您已经多次上传对象，并且您看到的结果来自不同版本（Content-类型）。您是否为存储桶启用了版本控制？如果没有，那么其中一条路径可能正在进行一些缓存。你还在看到这种行为吗？

# nginx - 带有 php-fpm 的 nginx 的 iptables 规则

> ID：15134820
> 
> 赞同：1
> 
> 时间：2013-02-28T11:51:19.127
> 
> 标签：nginx, firewall, iptables, php

我正在运行 nginx 和 php-fpm 的服务器上设置 iptables 规则。我已经允许 80 和 443 端口，但正如我所见，还有与更高端口的附加连接被阻止。

的样本输出

*网络统计-anpn | grep -v ":80"*

```
tcp        0      1 10.0.0.1:8109       10.1.2.24:29837     SYN_SENT    19834/nginx: worker
tcp        0      1 10.2.3.45:31890     10.0.0.1:26701      SYN_SENT    17831/nginx: worker 
```

10.0.0.1 是服务器 IP，其他是客户端。

我的 iptables 规则：

```
iptables -A INPUT -i lo -j ACCEPT
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -P INPUT DROP
iptables -P OUTPUT ACCEPT 
```

有人可以解释一下：

1.  为什么 nginx 使用不同于标准的 80 和 443 的端口。

2.  这个额外的端口范围是多少？

3.  如何正确允许使用 iptables 连接到 nginx？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T20:16:36.740

Nginx 通常会在处理请求时执行内部重定向，这将在高编号端口上建立连接。我不相信你能找到这个范围。

这是我看到的例子：

```
tcp        0      0 192.168.0.126:80        0.0.0.0:*               LISTEN      9432/nginx: worker
tcp        0      0 192.168.0.126:80        192.168.0.177:62950     ESTABLISHED 9432/nginx: worker
tcp        0      0 192.168.0.126:80        192.168.0.177:62949     ESTABLISHED 9432/nginx: worker
tcp        0      0 192.168.0.126:80        192.168.0.177:62947     ESTABLISHED 9432/nginx: worker
unix  3      [ ]         STREAM     CONNECTED     29213    9432/nginx: worker 
```

您的防火墙规则起作用的原因是因为您：

1.  已打开 Nginx 服务器侦听器所需的端口（即 80 和 443）

2.  您已包含以下防火墙规则，该规则允许对 localhost (127.0.0.1) 的所有请求，因此不会阻止打开高编号端口的 Nginx 内部重定向：

    iptables -A 输入 -i lo -j 接受

所以回答你的问题：

1.  Nginx 服务器侦听器可以侦听您喜欢的任何端口，而不仅仅是 80 和 443。它使用额外端口的原因是用于内部重定向以及实现的一个方面。

2.  我不相信你能找到这个范围。事实上，我怀疑任何代码都会要求系统使用某个端口，而是会要求操作系统提供一个高编号的未使用端口。

3.  您可能没有意识到，但您实施的防火墙规则应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:56:00.303

我也将 PHP-FPM 与 Nginx 一起使用。我在 iptables 中阻止了除 22/80/443 之外的所有端口，并且没有遇到任何连接问题。我检查了我自己的 netstat ，它看起来与您的输出相同。你确定你的 iptables 规则是正确的吗？你能发布的输出`sudo iptables -L`

# php - symfony2 中的 FOS_USER 和 changepassword（如果 php 不是 5.3.6？）

> ID：15134831
> 
> 赞同：0
> 
> 时间：2013-02-28T11:51:49.377
> 
> 标签：php, symfony

所以基本上我试图使用 FOS_USER 和交响乐更改我的用户的密码。

代码如下（它与 FOS_User symphony 包中 ChangePasswordAction 上的代码相同，但响应已更改为使用 AJAX

```
 public function changePasswordAction(Request $request) {
   // $form = $this->createForm(new ChangePasswordFormType('Bandness\BandeeBundle\Entity\Bandee'), $this->getUser());

    $user = $this->getUser();

    $dispatcher = $this->container->get('event_dispatcher');

    $event = new GetResponseUserEvent($user, $request);
    $dispatcher->dispatch(FOSUserEvents::CHANGE_PASSWORD_INITIALIZE, $event);

    if (null !== $event->getResponse()) {
        return $event->getResponse();
    }

    $formFactory = $this->container->get('fos_user.change_password.form.factory');

    $form = $formFactory->createForm();
    $form->setData($user);

    if ($request->isMethod('POST')) {
        $form->bind($request);
        if ($form->isValid()) { 
            /** @var $userManager \FOS\UserBundle\Model\UserManagerInterface */
            $userManager = $this->container->get('fos_user.user_manager');

            $event = new FormEvent($form, $request);
            $dispatcher->dispatch(FOSUserEvents::CHANGE_PASSWORD_SUCCESS, $event);

            $userManager->updateUser($user);

            $dispatcher->dispatch(FOSUserEvents::CHANGE_PASSWORD_COMPLETED, new FilterUserResponseEvent($user, $request, new Response()));

            return new JsonResponse($this->get('translator')->trans('Bandee.config.changepass.success'),200);
        }
        else return new JsonResponse($this->getTranslatedErrors($form), 422);
    } 
```

问题是这似乎不起作用。在带有 php 5.3.6 的 apache2 中它可以完美运行，但是在其他机器上它就无法正常工作。它通常给出的回复是 "not a valid number" ，这没有意义，因为它根本不应该检查一个数字......

我觉得 FOS_User 中有一个错误，并且某些 PHP 版本在 PHP 5.4.4 和 5.3.10 上都不起作用

有什么建议么？

# jquery - 验证（以空白字段表示）jquery-1.9.1.min 中两个字段中的任何一个

> ID：15134832
> 
> 赞同：0
> 
> 时间：2013-02-28T11:51:54.883
> 
> 标签：jquery, jquery-validate

我想验证（不允许空白）这两个字段中的任何字段！从[这里](https://stackoverflow.com/questions/1378472/jquery-validate-can-i-re-validate-a-group-of-fields-after-changing-one)得到一些想法但无法在 1.9.1 版本中实现它。

即使这两个字段都是验证的，那也很好。任何输入.....伙计们

这是我的jQuery

```
 jQuery.validator.addMethod("require_from_group", function(value, element, options) {
    alert("xxx");
    var valid = $(options[1], element.form).filter(function() {
        return $(this).val();
    }).length >= options[0];

    if(!$(element).data('reval')) {
        var fields = $(options[1], element.form);
        fields.data('reval', true).valid();
        fields.data('reval', false);
    }
    return valid;
}, jQuery.format("'Please enter either username/ email address to recover password'/Please fill out at least {0} of these fields."));

$("#forgot_pass_form").validate({
    rules: {
        uname: { require_from_group: [1,".send_username"] },
        email: { require_from_group: [1,".send_password"] }
    }
}); 
```

这是我的html

```
<form action="#" class="send_form" id="forgot_pass_form" method="POST">
                <fieldset>
                    <div class="send_row">
                        <label class="padding-top10">Email</label>
                        <input type="text" class="send_email" id="email" name="email" />
                        <em>You need to type an email address</em>
                    </div>

                    <div class="send_row option">OR</div>

                    <div class="send_row">
                        <label class="padding-top10">Username</label>
                        <input type="text" class="send_username" id="uname" name="uname" />
                    </div>

                    <div class="send_row send_submitforgotuser">
                        <input type="submit" value="Submit" />
                    </div>
                </fieldset>
                </form> 
```

我只想验证这两个空白字段中的任何字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:12:44.153

为每个输入添加一个 minlength 属性。如果添加 minlength 1 它们不能为空。如果您添加“电子邮件”类，它将验证电子邮件地址。

HTML

```
<form action="#" class="send_form" id="forgot_pass_form" method="POST">
    <fieldset>
        <div class="send_row">
            <label class="padding-top10">Email</label>
            <input type="text" class="send_email email" id="email" name="email" />
            <em>You need to type an email address</em>
        </div>

        <div class="send_row option">OR</div>

        <div class="send_row">
            <label class="padding-top10">Username</label>
            <input type="text" class="send_username" id="uname" name="uname" minlength="2" />
        </div>

        <div class="send_row send_submitforgotuser">
            <input type="submit" value="Submit" disabled="" />
        </div>
    </fieldset>
</form> 
```

JS：

```
$(document).ready(function() {
    $("#forgot_pass_form").validate();
    $("#forgot_pass_form input").on('change', function() {
        if ($('#forgot_pass_form').valid()) {
            $('#forgot_pass_form input[type="submit"]').removeAttr('disabled');
        } else {
            $('#forgot_pass_form input[type="submit"]').attr('disabled', 'true');
        }
    });
}); 
```

例如：http: [//jsfiddle.net/jeffshaver/K2XAX/3/](http://jsfiddle.net/jeffshaver/K2XAX/3/)

# cookies - 删除 Worklight Adapter 中的 Cookie：多个会话使用基于相同适配器的身份验证

> ID：15134833
> 
> 赞同：0
> 
> 时间：2013-02-28T11:51:56.443
> 
> 标签：cookies, adapter, ibm-mobilefirst

我正在使用 Worklight 适配器并使用基于身份验证的适配器，它通过第三方 Web 服务（grails 服务器）验证凭据。

使用一个用户进行测试时，一切都很好，但是一旦我开始使用多个用户帐户，我发现所有用户都连接到同一个会话，使用相同的 Cookie JSESSIONID

我认为 worklight 适配器正在从以前的请求中添加 cookie，这相当于一个浏览器连接到不同的帐户，而不删除旧的 cookie/注销。

调试时，我可以看到我在身份验证请求响应标头中，当第一个用户登录时：

```
"Set-Cookie":"JSESSIONID=63850CB333E7C279DC6D5B1D973B21E7; Path=/" 
```

并且当第二个用户登录时，响应中不再有“Set-Cookie”标头。

任何人都有解决方案或解决方法？

连接到身份验证网络服务器时，如何强制 worklight 删除现有的 cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:10:32.833

在您的适配器过程中，您应该添加属性`connectAs="endUser"`。这样，每个用户都将创建到身份验证后端的唯一连接，并且他们不会共享相同的会话 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T19:00:07.690

我在关闭窗口时强制注销。像这样的东西：

```
function wlCommonInit() {

    window.onbeforeunload = function() {
        WL.Logger.debug("logging out");
        WL.Client.logout();
    };
} 
```

# winforms - 150% 字体使文本被剪切

> ID：15134836
> 
> 赞同：1
> 
> 时间：2013-02-28T11:52:11.660
> 
> 标签：winforms, fonts

我正在`winforms`Visual Studio 2012 中开发应用程序。

我在 Windows 中打开控制面板`7`并设置`font size = 150%`. 它导致我的应用程序中的所有文本都被删减。当我扩展应用程序的工作区域时，文本保持不变。

我应该在应用程序中做什么才能显示整个文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:06:06.643

我猜您正在更改屏幕 DPI，因此将表单的[`AutoScaleMode`](http://msdn.microsoft.com/en-us/library/system.windows.forms.containercontrol.autoscalemode.aspx)属性更改为`AutoScaleMode.Dpi`.

如果您只是更改字体大小，请将其设置为`AutoScaleMode.Font`.

有关此的更多信息：

[Windows 窗体中的自动缩放](http://msdn.microsoft.com/en-us/library/ms229605.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:49:07.640

问题出在我保存的本地设置中:)

# redirect - iframe 源不断重定向到 url (firefox)

> ID：15134838
> 
> 赞同：0
> 
> 时间：2013-02-28T11:52:16.073
> 
> 标签：redirect, iframe

我将 url 放在一个框架中 - 它会将我重定向到该 url 而不是出现在 iframe 中。我这样做绕过了铬：

```
<iframe sandbox="allow-forms allow-scripts" src="www.example.com"></iframe> 
```

在 Firefox 上，它仍然让我重新定向。`sandbox="allow-forms allow-scripts"`火狐有其他的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:40:21.513

*击败帧破坏*代码很可能是不可能的。有关更多见解，请参阅[此 SO 线程](https://stackoverflow.com/questions/958997/frame-buster-buster-buster-code-needed)和[此研究。](http://seclab.stanford.edu/websec/framebusting/framebust.pdf)我尝试了那里描述的一些方法，它们要么根本不起作用，要么不适用于您提到的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:55:44.417

我不太确定您为什么使用“沙盒”，但您是否仅尝试过：

```
 <iframe src="http://www.w3schools.com"></iframe> 
```

# postgresql - 如何在 Postgres 9.2 中删除死行版本

> ID：15134841
> 
> 赞同：2
> 
> 时间：2013-02-28T11:52:29.633
> 
> 标签：postgresql, postgresql-9.2

我在我的数据库表上运行了一个 vaccum，它似乎对我没有帮助。例如，我有一个巨大的表，当我在其上运行真空时，它返回有 87887889 个无法删除的死行版本

我的问题是如何摆脱这些死行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T05:41:37.933

如果常规真空不足，您有两个基本选择。两者都需要全表锁。

1.  真空已满。这不需要额外的磁盘空间，但需要一段时间才能完成。

2.  簇。这会以针对给定索引优化的物理顺序重写表。它需要额外的空间来进行重写，但速度要快得多。

一般来说，如果磁盘空间允许，我建议在维护窗口期间使用 CLUSTER。

# windows - 如何运行可执行文件，然后在 Windows 中使用 R 杀死或终止同一进程

> ID：15134848
> 
> 赞同：7
> 
> 时间：2013-02-28T11:52:40.913
> 
> 标签：windows, r, shell

假设我存储了一个可执行文件`c:\my directory\my file.exe`，我想在我的 R 脚本开头附近启动，然后在我的 R 脚本结尾附近终止。在 Windows 平台上执行此操作有哪些干净的方法？

我知道像`shell`and这样的 R 命令`shell.exec`，但我不清楚这些命令是否允许干净地捕获进程 ID，然后使用类似[pskill 函数的](http://stat.ethz.ch/R-manual/R-devel/library/tools/html/pskill.html)东西。也不清楚通过某种[管道连接](http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html)运行这个可执行文件是否更有意义- 或者该管道将如何工作。这个特定的可执行文件应该`PATH`作为系统变量包含在我的窗口中，因此可以想象该`system`函数在这里也可能有价值。

附加说明：捕获进程 id 可能很重要，因为（至少对我而言）这将用于数据库服务器的可执行文件——如果多个数据库服务器当前在同一台机器上运行，则该进程不应杀死所有这些服务器- 只是在 R 脚本开始时初始化的那个。

额外的功劳：假设`c:\my directory\my file.exe`应该通过实际执行另一个文件来调用`c:\my directory\another file.bat`- 但它`my file.exe`需要在 R 脚本的末尾被杀死。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:00:41.830

根据收到的其他两个答案，这种技术似乎是实现既定目标的合理方法。

```
# specify executable file
exe.file <- "C:\\Users\\AnthonyD\\AppData\\Local\\Google\\Chrome\\Application\\chrome.exe"

# capture the result of a `tasklist` system call
before.win.tasklist <- system2( 'tasklist' , stdout = TRUE )

# store all pids before running the process
before.pids <- substr( before.win.tasklist[ -(1:3) ] , 27 , 35 )

# run the process
shell.exec( exe.file )

# capture the result of a `tasklist` system call
after.win.tasklist <- system2( 'tasklist' , stdout = TRUE )

# store all tasks after running the process
after.tasks <- substr( after.win.tasklist[ -(1:3) ] , 1 , 25 )

# store all pids after running the process
after.pids <- substr( after.win.tasklist[ -(1:3) ] , 27 , 35 )

# store the number in the task list containing the PIDs you've just initiated
initiated.pid.positions <- which( !( after.pids %in% before.pids ) )

# remove whitespace
after.tasks <- gsub( " " , "" , after.tasks )

# find the pid position that matches the executable file name
correct.pid.position <- 
    intersect(
        which( after.tasks %in% basename( exe.file ) ) ,
        initiated.pid.positions 
    )

# remove whitespace
correct.pid <- gsub( " " , "" , after.pids[ correct.pid.position ] )

# write the taskkill command line
taskkill.cmd <- paste( "taskkill" , "/PID" , correct.pid )

# wait thirty seconds (so the program fully loads)
Sys.sleep( 30 )

# kill the same process that was loaded
system( taskkill.cmd ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:05:09.230

你可以使用`system`功能：

```
system("Taskkill /IM myfile.exe /F") 
```

编辑：这在我的 Windows 7 计算机上工作（通过杀死 skype.exe 进行测试）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T15:26:23.867

过去，我使用[psKill](http://technet.microsoft.com/en-us/sysinternals/bb896683.aspx)。它真的很强大，也许很危险。即使在远程计算机中，您也会杀死多进程。我想你知道当我们想要残忍地杀死进程时，我们必须非常小心。

1.  下载工具，解压并复制到已知路径。
2.  第一次启动时要求许可。您从 cmd 启动一次并同意。

然后你用这样的东西

```
process_name <- 'your_process_name'
system(paste(path_to_pskil,'pskill ',process_name,sep=''),intern=T) 
```

例如要杀死所有 chrome 实例，您可以这样做

```
system('c:/temp/pskill chrome',intern=T) !! 
```

**编辑**

假设您有多个同名进程。您可以使用`pslist`此名称列出所有进程。根据经过的时间找到你要杀死的进程的id，然后通过id调用pskill。

例如这里我想杀死最后启动的*chrome*进程

```
my.process <- system('c:/temp/pslist chrome ',intern=T)[-c(1:8)]
my.process
[1] "chrome             3852   8  38 1052 141008     0:01:58.108     1:43:11.547"
[2] "chrome             5428   8  11  202 220392     0:02:08.092     1:43:11.359"
[3] "chrome             6228   8   9  146  73692     0:01:58.467     1:43:00.091"
[4] "chrome             6312   6   9  130  45420     0:00:08.704     1:17:30.153"
[5] "chrome              360   6   9  127  29252     0:00:01.263     0:57:01.084"
[6] "chrome             5032   6   9  126  29596     0:00:00.717     0:31:39.875"
[7] "chrome             2572   8   9  120  23816     0:00:00.452     0:19:10.307"
## ids are orderd according to the elpased time
## I use tail to get the last one
## some regular expression to get the id from the string 
## mine is  ugly but I am sure you can do better.
id <- substr(gsub("([^[:digit:]]*)", "",  tail(my.process,1)),1,4)
system(paste('c:/temp/pskill ', id) ,intern=T) 
```

# html - 带有文本的 IE9 元素 + 浮动右元素

> ID：15134851
> 
> 赞同：0
> 
> 时间：2013-02-28T11:52:56.630
> 
> 标签：html, css, internet-explorer, internet-explorer-9

我对旁边有一个右浮动图标的链接元素有疑问。在 FF/Chrome 中一切看起来都不错，但在 IE9 中，文本位于容器底部，而不是垂直对齐。

```
<a href="#" role="button" data-toggle="modal" class="login">
   Login <span class="icon-login"></span>
</a>

.login {
   line-height: 40px;
   height: 40px;
   margin-top: 0;
   position: absolute;
   top: 0;
   right: 0;
   float: right;
}

.icon-login {
   display: inline-block;
   line-height: 40px;
   height: 40px;
   width: 40px;
   float: right;
   padding: 0;
   margin: 0 0 0 20px;
} 
```

它应该看起来如何（绿色是图标的开头） ![在此处输入图像描述](../Images/28c7d91073fb310a4ae842e59ca70550.png)

IE9 ![在此处输入图像描述](../Images/72b08242919a02b22fad5c61fc4d3762.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:56:49.807

看起来是个`float`问题。

`Login`尝试将文本包装在 a`div`和`float`that 到`left`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:01:24.700

我认为你可以使用如下所示的东西。

```
<a href="#" role="button" data-toggle="modal" class="login">
   Login 
</a>

.login {
   line-height: 40px;
   height: 40px;
   margin-top: 0;
   position: absolute;
   top: 0;
   right: 0;
   float: right;
   background: url(icon-login.png) right center;
   padding-right:40px;
} 
```

# ruby-on-rails - 设计删除凭据

> ID：15134854
> 
> 赞同：0
> 
> 时间：2013-02-28T11:53:08.580
> 
> 标签：ruby-on-rails, activerecord

我使用 Rails 3 实现了一个友谊模型。现在我想让用户添加新朋友...从外观上看，我想我需要 2 个 for 循环...一个用于循环所有用户，另一个用于循环检查该用户是否已经是朋友....但是如果我使用 2 for 循环，我不会得到我期望的结果，并且已经是当前用户的朋友的用户的电子邮件打印并且地址得到多次打印（因为第二个 for 循环，因为我在循环内打印它）.. 有没有其他方法可以解决这个问题？？？？

```
code:
this is my view file:

<center>Bragger's list<center><br/>
<p>
  <% for user in User.all %>
    <% if current_user.email!= user.email %>
      <% for friend in current_user.friends %>
        <% if friend.email!=user.email %>
          <p>
            <%= user.email %> &nbsp; <%= link_to 'Add as Friend' , friendships_path(:friend_id => user), :method => :post %>
          </p>
          <br/> 
        <%end%>
      <%end%>
    <%end%>
  <%end%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:48:05.923

最好的方法是过滤控制器中还不是 current_user 朋友的用户列表。你可以这样做

```
@potential_friends = User.where('id != ? AND id NOT IN (?)', current_user.id, current_user.friend_ids) 
```

然后在视图中循环这个变量

```
<center>Bragger's list<center><br/>
<p>
  <% @potential_friends.each do |user| %>
    <p>
      <%= user.email %> &nbsp; <%= link_to 'Add as Friend' , friendships_path(:friend_id => user), :method => :post %>
    </p>
    <br/> 
  <% end %>
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:48:09.137

干点别的怎么样

`User.where('user_id not in (?)', current_user.friends.map(&:id).push(current_user.id))`

This would get all the users from the database that are not your current_user's friends and then you have only to loop once.

# java - Java并发：同时添加和清除列表条目

> ID：15134857
> 
> 赞同：1
> 
> 时间：2013-02-28T11:53:20.827
> 
> 标签：java, multithreading, synchronization

考虑以下方法：

```
public void add(final List<ReportingSTG> message) {
        if(stopRequested.get()) {
            synchronized (this) {
                if(stopRequested.get()) {
                    retryQueue.put(message);
                }
            }
        }
        messages.add(message);
        if(messages.size() >= batchSize && waitingThreads.get() == 0) {
            synchronized (this) {
                if(messages.size() >= batchSize && waitingThreads.get() == 0) {
                    final List<List<ReportingSTG>> clone = new ArrayList<List<ReportingSTG>>(messages);
                    messages.clear();
                    if(processors.size()>=numOfProcessors) {
                        waitingThreads.incrementAndGet();
                        waitForProcessor();
                        waitingThreads.decrementAndGet();
                    }                   
                    startProcessor(clone);
                }
            }

        }
    } 
```

特别是这两条线：

```
 1:   final List<List<ReportingSTG>> clone = new ArrayList<List<ReportingSTG>>(messages);
 2:   messages.clear(); 
```

如果线程A进入同步块并获取当前对象的锁，这是否意味着该对象的实例属性状态不能被同步块之外的其他线程更改（而线程A在同步块中）？

例如，线程 A 执行第 1 行 -> 线程 B 进入方法并添加新的列表条目 (messages.add(message)) -> 线程 a 执行的第 2 行 -> 删除线程 B 添加的条目（连同其他条目）。这种情况可能吗？或者线程 B 将在线程 A 释放锁时等待，然后才会删除 List 条目

消息是一个非静态同步列表

**UPD：**更新的方法，可能的解决方案：

```
public void add(final List<ReportingSTG> message) {
    if(stopRequested.get()) {
        synchronized (this) {
            if(stopRequested.get()) {
                retryQueue.put(message);
            }
        }
    }
    while (addLock.get()){
        try {
            Thread.sleep(1);
        } catch (InterruptedException e) {}
    }

    messages.add(message);

    if(messages.size() >= batchSize && waitingThreads.get() == 0) {
        synchronized (this) {
            if(messages.size() >= batchSize && waitingThreads.get() == 0) {

                addLock.set(true);
                final List<List<ReportingSTG>> clone = new ArrayList<List<ReportingSTG>>(messages);
                messages.clear();
                addLock.set(false);

                if(processors.size()>=numOfProcessors) {
                    waitingThreads.incrementAndGet();
                    waitForProcessor();
                    waitingThreads.decrementAndGet();
                }                   
                startProcessor(clone);
            }
        }

    }
} 
```

addLock - AtomicBoolean，默认为 false

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:58:36.680

所描述的场景是可能的。即您可能会丢失消息。

`synchronized`关键字确保您永远不会有 2 个线程同时运行该部分`synchronized`。它不会阻止*另一个线程*修改在块内操作的对象`synchronized`（只要这个另一个线程可以访问它们）。

* * *

这是一个可能的解决方案，因为它同步了添加和清除。

```
private Object lock = new Object();

public void add(final List<ReportingSTG> message) {
    if(stopRequested.get()) {
        synchronized (this) {
            if(stopRequested.get()) {
                retryQueue.put(message);
            }
        }
    }
    synchronized(lock){
        messages.add(message);
        if(messages.size() >= batchSize && waitingThreads.get() == 0) {
                final List<List<ReportingSTG>> clone = new ArrayList<List<ReportingSTG>>(messages);
                messages.clear();
                if(processors.size()>=numOfProcessors) {
                    waitingThreads.incrementAndGet();
                    waitForProcessor();
                    waitingThreads.decrementAndGet();
                }                   
                startProcessor(clone);
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:14:22.317

我`DoubleBufferedList`最近安排了一堂课。也许使用它可以完全避免您的问题。顾名思义，它实现了双缓冲算法，但用于列表。

此类允许您拥有许多生产者线程和许多消费者线程。每个生产者线程都可以添加到当前列表中。每个消费者线程获取整个当前列表进行处理。

这也没有使用锁，只使用原子，因此它应该高效运行。

请注意，其中大部分是测试代码。您可以在评论后删除所有内容，`// TESTING`但您可能会发现测试的严谨性令人欣慰。

```
public class DoubleBufferedList<T> {
  // Atomic reference so I can atomically swap it through.
  // Mark = true means I am adding to it so unavailable for iteration.
  private AtomicMarkableReference<List<T>> list = new AtomicMarkableReference<>(newList(), false);

  // Factory method to create a new list - may be best to abstract this.
  protected List<T> newList() {
    return new ArrayList<>();
  }

  // Get and replace the current list.
  public List<T> get() {
    // Atomically grab and replace the list with an empty one.
    List<T> empty = newList();
    List<T> it;
    // Replace an unmarked list with an empty one.
    if (!list.compareAndSet(it = list.getReference(), empty, false, false)) {
      // Failed to replace! 
      // It is probably marked as being appended to but may have been replaced by another thread.
      // Return empty and come back again soon.
      return Collections.EMPTY_LIST;
    }
    // Successfull replaced an unmarked list with an empty list!
    return it;
  }

  // Grab and lock the list in preparation for append.
  private List<T> grab() {
    List<T> it;
    // We cannot fail so spin on get and mark.
    while (!list.compareAndSet(it = list.getReference(), it, false, true)) {
      // Spin on mark.
    }
    return it;
  }

  // Release the list.
  private void release(List<T> it) {
    // Unmark it. Should never fail because once marked it will not be replaced.
    if (!list.attemptMark(it, false)) {
      throw new IllegalMonitorStateException("it changed while we were adding to it!");
    }
  }

  // Add an entry to the list.
  public void add(T entry) {
    List<T> it = grab();
    try {
      // Successfully marked! Add my new entry.
      it.add(entry);
    } finally {
      // Always release after a grab.
      release(it);
    }
  }

  // Add many entries to the list.
  public void add(List<T> entries) {
    List<T> it = grab();
    try {
      // Successfully marked! Add my new entries.
      it.addAll(entries);
    } finally {
      // Always release after a grab.
      release(it);
    }
  }

  // Add a number of entries.
  public void add(T... entries) {
    // Make a list of them.
    add(Arrays.asList(entries));
  }
  // TESTING.
  // How many testers to run.
  static final int N = 10;
  // The next one we're waiting for.
  static final AtomicInteger[] seen = new AtomicInteger[N];
  // The ones that arrived out of order.
  static final Set<Widget>[] queued = new ConcurrentSkipListSet[N];

  static {
    // Populate the arrays.
    for (int i = 0; i < N; i++) {
      seen[i] = new AtomicInteger();
      queued[i] = new ConcurrentSkipListSet();
    }
  }

  // Thing that is produced and consumed.
  private static class Widget implements Comparable<Widget> {
    // Who produced it.
    public final int producer;
    // Its sequence number.
    public final int sequence;

    public Widget(int producer, int sequence) {
      this.producer = producer;
      this.sequence = sequence;
    }

    @Override
    public String toString() {
      return producer + "\t" + sequence;
    }

    @Override
    public int compareTo(Widget o) {
      // Sort on producer
      int diff = Integer.compare(producer, o.producer);
      if (diff == 0) {
        // And then sequence
        diff = Integer.compare(sequence, o.sequence);
      }
      return diff;
    }
  }

  // Produces Widgets and feeds them to the supplied DoubleBufferedList.
  private static class TestProducer implements Runnable {
    // The list to feed.
    final DoubleBufferedList<Widget> list;
    // My ID
    final int id;
    // The sequence we're at
    int sequence = 0;
    // Set this at true to stop me.
    public volatile boolean stop = false;

    public TestProducer(DoubleBufferedList<Widget> list, int id) {
      this.list = list;
      this.id = id;
    }

    @Override
    public void run() {
      // Just pump the list.
      while (!stop) {
        list.add(new Widget(id, sequence++));
      }
    }
  }

  // Consumes Widgets from the suplied DoubleBufferedList
  private static class TestConsumer implements Runnable {
    // The list to bleed.
    final DoubleBufferedList<Widget> list;
    // My ID
    final int id;
    // Set this at true to stop me.
    public volatile boolean stop = false;

    public TestConsumer(DoubleBufferedList<Widget> list, int id) {
      this.list = list;
      this.id = id;
    }

    @Override
    public void run() {
      // The list I am working on.
      List<Widget> l = list.get();
      // Stop when stop == true && list is empty
      while (!(stop && l.isEmpty())) {
        // Record all items in list as arrived.
        arrived(l);
        // Grab another list.
        l = list.get();
      }
    }

    private void arrived(List<Widget> l) {
      for (Widget w : l) {
        // Mark each one as arrived.
        arrived(w);
      }
    }

    // A Widget has arrived.
    private static void arrived(Widget w) {
      // Which one is it?
      AtomicInteger n = seen[w.producer];
      // Don't allow multi-access to the same producer data or we'll end up confused.
      synchronized (n) {
        // Is it the next to be seen?
        if (n.compareAndSet(w.sequence, w.sequence + 1)) {
          // It was the one we were waiting for! See if any of the ones in the queue can now be consumed.
          for (Iterator<Widget> i = queued[w.producer].iterator(); i.hasNext();) {
            Widget it = i.next();
            // Is it in sequence?
            if (n.compareAndSet(it.sequence, it.sequence + 1)) {
              // Done with that one too now!
              i.remove();
            } else {
              // Found a gap! Stop now.
              break;
            }
          }
        } else {
          // Out of sequence - Queue it.
          queued[w.producer].add(w);
        }
      }
    }
  }

  // Main tester
  public static void main(String args[]) {
    try {
      System.out.println("DoubleBufferedList:Test");
      // Create my test buffer.
      DoubleBufferedList<Widget> list = new DoubleBufferedList<>();
      // All threads running - Producers then Consumers.
      List<Thread> running = new LinkedList<>();
      // Start some producer tests.
      List<TestProducer> producers = new ArrayList<>();
      for (int i = 0; i < N; i++) {
        TestProducer producer = new TestProducer(list, i);
        Thread t = new Thread(producer);
        t.setName("Producer " + i);
        t.start();
        producers.add(producer);
        running.add(t);
      }

      // Start the same number of consumers.
      List<TestConsumer> consumers = new ArrayList<>();
      for (int i = 0; i < N; i++) {
        TestConsumer consumer = new TestConsumer(list, i);
        Thread t = new Thread(consumer);
        t.setName("Consumer " + i);
        t.start();
        consumers.add(consumer);
        running.add(t);
      }
      // Wait for a while.
      Thread.sleep(5000);
      // Close down all.
      for (TestProducer p : producers) {
        p.stop = true;
      }
      for (TestConsumer c : consumers) {
        c.stop = true;
      }
      // Wait for all to stop.
      for (Thread t : running) {
        System.out.println("Joining " + t.getName());
        t.join();
      }
      // What results did we get?
      for (int i = 0; i < N; i++) {
        // How far did the producer get?
        int gotTo = producers.get(i).sequence;
        // The consumer's state
        int seenTo = seen[i].get();
        Set<Widget> queue = queued[i];
        if (seenTo == gotTo && queue.isEmpty()) {
          System.out.println("Producer " + i + " ok.");
        } else {
          // Different set consumed as produced!
          System.out.println("Producer " + i + " Failed: gotTo=" + gotTo + " seenTo=" + seenTo + " queued=" + queue);
        }
      }
    } catch (InterruptedException ex) {
      ex.printStackTrace();
    }
  }
} 
```

# java - java.lang.IllegalArgumentException：不支持：缩进数

> ID：15134861
> 
> 赞同：11
> 
> 时间：2013-02-28T11:53:29.577
> 
> 标签：java, xml, xslt

```
public String filter(String message) {
    if (message == null) {
        return null;
    }

    // Remove formatting, transformer fails to handle wrong indentation correctly.
    message = message.replaceAll(">\\s*[\\r\\n]+\\s*", ">");
    message = message.replaceAll("\\s*[\\r\\n]+\\s*", " "); // for wrapped attribute lists

    Source xmlInput = new StreamSource(new StringReader(message));
    StringWriter stringWriter = new StringWriter();
    try {
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        transformerFactory.setAttribute("indent-number", INDENT); // for Java 6

        Transformer transformer = transformerFactory.newTransformer();
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", INDENT.toString()); // Java 1.5
        transformer.transform(xmlInput, new StreamResult(stringWriter));

        String pretty = stringWriter.toString();
        pretty = pretty.replace("\r\n", "\n");
        return pretty;
    } catch (TransformerException e) {
        if (e.getCause() != null && e.getCause() instanceof SAXParseException) {
            return message;
        }
        throw new RuntimeException(e);
    }
} 
```

但我在这里得到例外：

```
transformerFactory.setAttribute("indent-number", INDENT); // for Java 6 
```

> java.lang.IllegalArgumentException：不支持：缩进数

我的爪哇：

```
java version "1.6.0_33" 
```

为什么我得到这个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-22T13:24:00.850

我通过评论这一行来修复该异常：

```
transformerFactory.setAttribute("indent-number", indent); 
```

并添加这一行：

```
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2"); 
```

即使浏览器中显示的索引不正确，异常也消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-22T14:07:19.400

代替

```
TransformerFactory transformerFactory = TransformerFactory.newInstance(); 
```

你应该写

```
TransformerFactory transformerFactory = new TransformerFactoryImpl(); 
```

因为并非所有的实现`TransformerFactory`都有这个字段：`indent-number`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T07:54:40.203

可能是因为 Xalan（打包在 JDK1.6/1.7 中）支持“缩进数”，但其他人不支持并且有自己的方式来指定缩进的大小。因此，您必须输入适合 XSLT 提供程序的字符串。找出你正在使用的并查看它的文档

没有规定这些事情的标准不是很好吗？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-28T11:59:02.743

你应该使用预定义的常量`OutputKeys.INDENT`，或者如果你真的坚持硬编码这个值，它应该是'indent'，而不是'indent-number'。

# php - 仅更新具有相似特征的一组结果中的一行

> ID：15134863
> 
> 赞同：0
> 
> 时间：2013-02-28T11:53:41.880
> 
> 标签：php, mysql, select, distinct

大家好，

假设我们有一个表，其中的值按组划分，并且我们只想为每个组更改一行。让我们举一些例子这是开始的情况：

```
ID   |   CODE   |  DEFAULT   
-----+----------+-----------
1    |   1234   |     0
2    |   1234   |     0
3    |   1234   |     0
4    |   5678   |     0
5    |   5678   |     0
6    |   7777   |     0
7    |   8888   |     0
8    |   8888   |     0
9    |   8888   |     0 
```

我们想更新`DEFAULT`，但每个只更新一次`CODE`：

```
ID   |   CODE   |  DEFAULT   
-----+----------+-----------
1    |   1234   |     0
2    |   1234   |     1
3    |   1234   |     0
4    |   5678   |     1
5    |   5678   |     0
6    |   7777   |     1
7    |   8888   |     0
8    |   8888   |     0
9    |   8888   |     1 
```

我们更新哪个并不重要，我们只想要一个`CODE`。

实际上，我只能在一个`SELECT DISTINCT`then 处思考，使用循环，`SELECT ... LIMIT 1`然后，如果有结果，`UPDATE`但这确实是一个肮脏的解决方案......我确信它可以通过一个（或几个）查询来完成...

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:00:48.897

您可以在为每个代码返回一行的子查询上使用`UPDATE`带有 a 的语句：`JOIN`

```
update yourtable t1
inner join
(
  select min(id) minId
  from yourtable
  group by code
) t2
  on t1.id = t2.minid
set t1.`default` = 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/77cfe/1)

# c# - 将字符串无循环地拆分为锯齿状数组

> ID：15134864
> 
> 赞同：2
> 
> 时间：2013-02-28T11:53:43.053
> 
> 标签：c#, .net, string, linq

我有以下字符串

```
 String s = "1:2,a;1:3,b;1:4"; 
```

[我可以按照此处](https://stackoverflow.com/questions/1507266/c-sharp-loopless-way-to-split-string-into-multidimensional-array-or-jagged-array)的示例将字符串划分为两级锯齿状数组，但我无法将其扩展到另一级以拥有更多基于`,`以获取输出的拆分器`string[][][] f`

```
String[][] f = s.Split( ';' ).Select( t => t.Split( ':' ) ).ToArray(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:59:46.890

巢，我的美人！

```
String[][][] fff = 
    s.Split(';').Select(
        t => t.Split(':').Select(
            u => u.Split(',')
        ).ToArray()
    ).ToArray();

String[][][][] ffff =
s.Split(';').Select(
    t => t.Split(':').Select(
        u => u.Split(',').Select(
            v => v.Split('.')
        ).ToArray()
    ).ToArray()
).ToArray();

String[][][][][] fffff =
s.Split(';').Select(
    t => t.Split(':').Select(
        u => u.Split(',').Select(
            v => v.Split('.').Select(
                w => w.Split('/')
            ).ToArray()
        ).ToArray()
    ).ToArray()
).ToArray(); 
```

* * *

如您所见，您想要拆分的东西越多，情况就会变得越来越糟。没有办法使这个递归并且仍然得到强类型数组，但是这里有一个函数会给你`Array`s - 你只需要递归检查每个元素是 a`string`还是 another `Array`：

```
static Array Split(string source, int start, params char[] args)
{
    var split = source.Split(args[start]);
    if (args.Length == start + 1)
        return split;
    return split.Select(s => Split(s, start + 1, args)).ToArray();
}

...

String s = "1:2,a;1:3,b;1:4";
Array array = Split(s, 0, ';', ':', ','); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:57:28.387

怎么样：

```
s.Split( ';' ).Select(
    t => t.Split( ':' ).Select(
        u => u.Split( ',' )
    ).ToArray()
).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:59:19.137

试试这个：

```
String s = "1:2,a;1:3,b;1:4";

String[][][] f = s.Split(';').Select(t => t.Split(':').Select( e => e.Split(',') ).ToArray()).ToArray(); 
```

# mysql - Mysql group by 在使用索引时返回错误的结果

> ID：15134865
> 
> 赞同：3
> 
> 时间：2013-02-28T11:53:43.157
> 
> 标签：mysql, indexing, group-by

我在其中一个 mySql 查询中有问题。问题在我们的任何本地机器上都无法重现。我有一个简单的查询

```
SELECT ID 
FROM TABLE_NAME 
WHERE ID IN (15920,15921) 
GROUP BY ID 
```

返回结果——

```
ID
15920

```

这是意外的结果，因为数据库中有两个 id 的数据。

使用 explain 命令返回此查询的以下结果

```
+----+-------------+------------+-------+--------- -----------+--------+---------+-----+- -----+----------------------------------------------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 钥匙 | key_len | 参考 | 行 | 额外 |
+----+-------------+------------+-------+--------- -----------+--------+---------+-----+- -----+----------------------------------------------------+
| 1 | 简单 | 表名 | 范围 | CUST_SID_SRUN_INDX | CUST_SID_SRUN_INDX | 4 | | 1 | 使用哪里；使用索引进行分组 |
+----+-------------+------------+-------+--------- -----------+--------+---------+-----+- -----+----------------------------------------------------+

```

对于这个问题，我尝试了以下解决方案 -

• 强制派生表 –

```
SELECT ID
FROM (SELECT ID 
      FROM TABLE_NAME 
      WHERE ID IN (15920,15921)) CUST 
GROUP BY ID 
```

• 使用have 子句代替where 子句

```
SELECT ID 
FROM TABLE_NAME
GROUP BY ID 
HAVING ID IN (15920,15921) 
```

• 忽略此表中使用的索引 –

```
SELECT ID 
FROM TABLE_NAME IGNORE INDEX (CUST_SID_SRUN_INDX)  
WHERE ID IN (15920,15921) 
GROUP BY ID 
```

以上所有查询都返回预期结果如下：-

```
ID
15920
15921

```

我正在尝试分析使用索引时 group by 子句的意外行为。请让我知道我是否可以尝试其他方法。仅供参考……出现问题的 UAT 机器是一台装有 Mysql 5.1.30 的 linux 机器。我们看到的不同是Mysql的版本。我们在我们的机器上使用 Mysql 5.1.52。有这个问题的表使用 MyISAM 数据库引擎。

如果需要任何其他输入，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:16:29.580

谢谢大家的帮助。

MySql 5.1.30 中的 MyISAM 分区存在问题，经过几天的努力，我通过将 MySQL 升级到 5.1.52 版本或重新组织分区解决了这个问题。

供您参考，请参阅 MySQL 论坛上报告的以下错误：

[http://bugs.mysql.com/bug.php?id=44821](http://bugs.mysql.com/bug.php?id=44821)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:22:20.103

如果您的查询结果使用索引时出错，则您的表可能由于某种原因已损坏。尝试：

```
REPAIR TABLE table_name; 
```

或尝试备份数据，销毁并重新创建表并将数据从备份重新填充到表中（这也将重新创建索引）

访问[MySQL 参考手册 - 重建表](http://dev.mysql.com/doc/refman/5.0/en/rebuilding-tables.html)

# python - 在 app.yaml 或 webapp2 URI 路由器中拆分应用程序有什么区别

> ID：15134866
> 
> 赞同：4
> 
> 时间：2013-02-28T11:53:43.987
> 
> 标签：python, google-app-engine

考虑以下两种情况：

app.yaml 中有两个 url 处理程序

```
handlers:
- url: /main
  script: main.app1
- url: /secondary
  script: secondary.app2 
```

和 main.py 中的 URI 路由器

```
app1 = webapp2.WSGIApplication([('/main', MainHandler)]) 
```

另一个在secondary.py

```
app2 = webapp2.WSGIApplication([('/secondary', SecondaryHandler)]) 
```

**对比**

app.yaml 中有一个 url 处理程序

```
handlers:
- url: /.*
  script: main.app 
```

URI 路由器决定处理程序

```
app = webapp2.WSGIApplication([
        ('/main', MainHandler),
        ('/secondary', SecondaryHandler)
      ]) 
```

App Engine 导入这两种场景的方式有什么不同吗？如果所有请求都是针对 MainHandler 的，那么 App Engine 是在第一个场景中完全导入与 SecondaryHandler 关联的文件，还是实例在第一次初始化时总是导入每个处理程序？

显然，这些是对应用程序进行逻辑分区的不同方法，但我想问是否有任何相关的性能考虑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T12:17:13.713

您可以在 webapp2 中使用惰性处理程序来优化加载并使用单个应用程序。请参阅此链接：[https ://webapp2.readthedocs.io/en/latest/guide/routing.html#lazy-handlers](https://webapp2.readthedocs.io/en/latest/guide/routing.html#lazy-handlers)

# c# - Nlog，不向 Outlook 发送邮件

> ID：15134877
> 
> 赞同：0
> 
> 时间：2013-02-28T11:54:04.677
> 
> 标签：c#, .net, nlog

邮件配置是 Nlog.config 文件

```
<target name="mail" xsi:type="Mail" smtpServer="smtp.emailsrvr.com" smtpPort="25" smtpUserName="samplemail@samplemail.com" smtpPassword="Password" 
        from="sample-test@intsof.com" to="vinay@sample.com" subject="Hello Mail from Nlog" html="false" encoding="UTF8"/>

<rules>   
  <logger name="*" level="Error" writeTo="mail"/> 
```

App.config 中的配置。

```
<configuration>
<system.net>
<mailSettings>
 <smtp from="Sample-test@sample.com"  deliveryMethod="Network">
   <network defaultCredentials="true" userName="vinay-test@sample.com" password="Password" host="smtp.emailsrvr.com" port="25"/>
  </smtp>
</mailSettings>
</system.net>
</configuration> 
```

如果我使用传递方法 SpecifiedPickupDirectory 并给出一个本地路径，那么它会发送邮件，但不会发送到 Outlook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:32:45.540

对于[这个](https://stackoverflow.com/questions/8766263/how-do-i-email-errors-logged-with-nlog)问题，接受的答案建议更改`encoding="UTF8"`为`encoding="UTF-8"`. 试试看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T11:57:50.977

这也可以是一个解决方案：

配置：

from="${事件上下文:item=Sender}"

记录代码：

eventInfo.Properties.Add("发件人", UserPrincipal.Current.EmailAddress);

# session - 在 parameter.ini 文件中使用 SESSION

> ID：15134890
> 
> 赞同：0
> 
> 时间：2013-02-28T11:54:54.887
> 
> 标签：session, symfony

我需要在 symfony 2.0 中更改特定登录的数据库名称（参数 .ini 文件）。所以我在会话中尝试了。但它不起作用。是否可以将会话值放入参数中。ini 文件？

我的代码：（参数 .ini 文件）

```
<?php
session_start();
$dbnamenew='';
if($_SESSION['test_db']!=""){
$dbnamenew=$_SESSION['test_db'];
}
else {
$dbnamenew ='test';
}
?>
; These parameters can be imported into other config files
; by enclosing the key with % (like %database_user%)
; Comments start with ';', as in php.ini
[parameters]
    database_driver="pdo_mysql"
    database_host="localhost"
    database_port="22"
    database_name="<?php echo dbnamenew;?>"
    database_user="user"
    database_password="pass"
    mailer_transport="smtp"
    mailer_host="localhost"
    mailer_user=""
    mailer_password=""
    locale="en"
    secret="b538e3680321a85b2e39a3d1772e0b711ff9371c" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:25:13.350

即使**你可以**在配置文件中使用 PHP，**它也不会工作**，因为解析的配置被缓存（所以它只执行一次）。

如果您有有限数量的数据库，请为每个数据库定义[一个数据库连接。](http://symfony.com/doc/2.0/reference/configuration/doctrine.html#reference-dbal-configuration)您可以稍后根据从会话中获取的变量来选择它。

如果您也使用教义的实体管理器，或者如果您有无限数量的数据库，则必须即时更改连接参数。您可以使用[事件侦听](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)器来做到这一点。

描述如何更改数据库连接的相关答案：[Symfony 2 : multiple and dynamic database connection](https://stackoverflow.com/questions/6409167/symfony-2-multiple-and-dynamic-database-connection/9291896#9291896)

# objective-c - 更换视频输入设备 QTkit

> ID：15134891
> 
> 赞同：0
> 
> 时间：2013-02-28T11:54:56.957
> 
> 标签：objective-c, video-capture, qtkit

我有一个 videoInput 设备列表。首先，我添加了用于录制的默认输入设备，设置了压缩、输出和所需的一切。之后我试图更改输入设备，但不知何故，视图停止工作，它只显示黑屏。我在不录制时尝试更改，仅在视图中显示输入。这是更改的代码：

```
-(void) changeVideoInput:(QTCaptureDevice *)videoDevice{

    BOOL success = NO;
    NSError *error;

    [mCaptureSession stopRunning];
        [mCaptureSession removeInput:mCaptureVideoDeviceInput]; //current input
        [[mCaptureVideoDeviceInput device] close];

        success = [videoDevice open:&error];

        mCaptureVideoDeviceInput2 = [[QTCaptureDeviceInput alloc] initWithDevice:videoDevice]; //new input

        success = [mCaptureSession addInput:mCaptureVideoDeviceInput2 error:&error];

    [mCaptureSession startRunning];    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:04:42.417

最后我发现，代码正在运行。该问题导致默认视频设备的打开（它的名称是：“Blackmagic”）。不要打开该设备。它是一种通用设备。

# ruby-on-rails - Rails 3关联错误：未定义的方法

> ID：15134894
> 
> 赞同：0
> 
> 时间：2013-02-28T11:55:03.100
> 
> 标签：ruby-on-rails, methods, associations, undefined

我一直在困惑这个问题已经有一段时间了，无法弄清楚。

我有2个模型：

```
class Vehicle < ActiveRecord::Base
  attr_accessible :year, :capacity,
  :size, :body, :model_id, :maker_id, :parameters_attributes

    validates :year, numericality: { greater_than: 1900 }
    validates :year, :capacity, :size, :body, presence: true

    belongs_to :model
    belongs_to :maker
    has_many :parameters
    accepts_nested_attributes_for :parameters
    end 
```

和

```
class Parameter < ActiveRecord::Base
  attr_accessible :tag, :value
  validates :tag, :value, presence: true
  belongs_to :vehicle
end 
```

在新车视图中，我有：

```
= form_for [:admin, @vehicle], html: { multipart: true } do |f|
    =# some other stuff in between
    = f.text_field :value, size: 4 
```

我收到这个错误

```
undefined method `value' 
```

只是似乎无法让它工作。帮助，有人吗？

编辑路线.rb

```
resources :vehicles 
resources :parameters

resources :makers do
  resources :models
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:01:33.127

如果你使用嵌套形式，你应该有类似的东西

```
f.fields_for :parameters do |parameter| 
```

然后：

```
parameter.text_field :value, size: 4 
```

另外，记得`parameters`在控制器中创建一些，例如：

```
def new
  @vehicle = Vehicle.new
  2.times { @vehicle.parameters.build } #it will create 2 parameters
...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:58:49.337

`f`指的是`@vehicle`，好像只`Parameter`熊这个字段。这就是它失败的原因。

旁注：

*   在`Vehicle`你有`accepts_nested_attributes_for :parameters`但你没有`parameters_attributes`在`attr_accessible`，不可能是好的。

*   如果您想在表单中调用关系，请考虑使用`fields_for`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T09:44:32.380

好吧，我把事情搞砸了。

首先我一直在尝试

```
def new
  @vehicle = @vehicle.parameters.build
end 
```

因此错误`undefined method`。过了一会儿，我得到了正确的语法，这是一段时间后添加的一个 gabrielhilal。

```
def new
  @vehicle = Vehicle.new
  @vehicle.parameters.build
end 
```

不管 ;) 还是有问题，因为点击“创建”后他不会在数据库中添加记录。原来我已经设置了`validates presence: true`for `tag`，但没有为其分配任何值。修复后，它就像一个魅力。非常感谢所有的帮助。

进入下一个谜题。

# c# - 在哪里设置静态成员的属性？

> ID：15134900
> 
> 赞同：2
> 
> 时间：2013-02-28T11:55:26.563
> 
> 标签：c#, static, static-members

如果我的类中有一个静态成员变量，我应该在哪里初始化它，并设置它的所有属性？

```
class Foo
{
    static public Timer t;
    private int foo;

    public Foo(int f)
    {
        this.foo = f;
    }
} 
```

如您所见，我的类具有`private int foo`设置为匹配构造函数参数的成员变量。我也得到了`static public Timer t`应该为这个类的每个实例打勾。现在我的问题是，我应该在哪里添加这段代码：

```
t = new Timer();
t.Interval = 1; 
```

因为如果我将它添加到我的类的构造函数中，每次创建新实例时都会调用它，这不是我想要的。我可以`t = new Timer();`像这样移动到实际的变量声明：`static public Timer t = new Timer();`但我仍然需要在`t.Interval = 1;`某处插入。

所以问题是，我如何初始化一个静态成员 - 以及我如何编辑它的属性 - 只有一次，而不是每次我创建一个新实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:06:37.343

我将为您提供与大多数其他回复略有不同的建议。

我是说如果可能的话，你应该避免使用静态构造函数。

原因之一是效率。详细信息太复杂，无法在此处介绍，但请参阅以下页面了解详细信息：

[http://ericlippert.com/2013/02/06/static-constructors-part-one/](http://ericlippert.com/2013/02/06/static-constructors-part-one/)

[http://blogs.msdn.com/b/brada/archive/2004/04/17/115300.aspx?Redirected=true](http://blogs.msdn.com/b/brada/archive/2004/04/17/115300.aspx?Redirected=true)

老实说，这可能没什么好担心的，但是因为避免使用静态构造函数非常简单，所以您可能应该这样做。

您要做的是编写一个静态方法，该方法将返回一个值，您可以使用该值初始化静态字段。

对于您的 Timer 示例，它看起来像这样：

```
private static Timer _timer = InitTimer();

private static Timer InitTimer()
{
    Timer result = new Timer {Interval = 100};
    return result;
} 
```

尽管对于这样的简单初始化，甚至不需要编写单独的方法，因为您可以这样做：

```
private static Timer _timer = new Timer {Interval = 100}; 
```

但在更复杂的情况下，您可以编写静态方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:57:03.707

您可以将此代码添加到[静态构造函数](http://msdn.microsoft.com/nl-nl/library/k9x6w0hc%28v=vs.80%29.aspx)中，如下所示：

```
static Foo()
{
    t = new Timer();
    t.Interval = 1;
} 
```

来自 MSDN：

> 静态构造函数用于初始化任何静态数据，或执行只需要执行一次的特定操作。在创建第一个实例或引用任何静态成员之前**自动调用**它 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T11:57:12.280

[静态构造函数](http://msdn.microsoft.com/nl-nl/library/k9x6w0hc%28v=vs.80%29.aspx)用于此目的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T11:57:30.940

有静态构造函数。像这样调用它们

```
class Foo {

static Foo(){
// initialize your timer here
} 
```

见[这里](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.110%29.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T11:59:35.470

这里有两种方法可以做到这一点：

## 初始化器

```
static public Timer t = new Timer
{
    Interval = 1
}; 
```

## 静态构造函数

```
static public Timer t;

static Foo
{
    t = new Timer();
    t.Interval = 1;
} 
```

# javascript - 在 Safari 桌面上检测或禁用多点触控手势缩放

> ID：15134902
> 
> 赞同：4
> 
> 时间：2013-02-28T11:55:32.923
> 
> 标签：javascript, safari, touch

有没有一种方法可以检测或禁用在捏住触摸板时发生的桌面 Safari 缩放。我的意思是文本变得模糊的缩放，而不是常规的浏览器缩放。

我尝试收听 touchstart，gesturestart 没有成功。

这是一个 jsFiddle 来测试它：http: [//jsfiddle.net/QW9uG/](http://jsfiddle.net/QW9uG/)

```
['gesturestart', 'mousewheel', 'touchstart', 'click'].forEach(function(type){
    var node = document.body;
    node.addEventListener(type, function(){
        console.debug(type, arguments);
    }, false);
    console.debug('listening for ', type, 'on', node);
}); 
```

# mysql - sql查询查找最流行的时间

> ID：15134909
> 
> 赞同：0
> 
> 时间：2013-02-28T11:55:49.763
> 
> 标签：mysql, sql, oracle

给定一个有 2 列的表

```
Name(type VARCHAR) Time(type DATETIME) 
```

我需要编写一个 SQL 查询来查找条目数最多的小时。

例如：

```
Name   Time 
----   ----
a     12:30pm
b     12:05pm
c     13:55pm
d     12:50pm
e     01:02am 
```

期望的结果是时间：12pm - 1pm

我的一般想法是：
1）按小时对行进行
分组 2）计算行/组
3）按降序对计数进行排序
4）打印最大计数

我需要帮助将其转换为 SQL 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:58:41.843

这很简单......

```
SELECT HOUR(Time) as Hr,COUNT(*) AS Cnt
FROM MyTable
GROUP BY Hour(Time)
ORDER BY Cnt DESC
LIMIT 1 
```

`GROUP BY Hour(Time)`- 按小时分组

`ORDER BY Cnt DESC`- 这使它按计数排序（按降序排列）

`LIMIT 1`- 因为您只需要一个顶级结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:30:01.630

这是我理解您正在寻找的 Oracle 版本：

```
SELECT t_stamp
     , MAX(count(t_stamp)) OVER (PARTITION BY t_stamp ORDER BY t_stamp)  hits_per_hr_interval
  FROM
  (
  SELECT name, EXTRACT(hour From Cast(t_stamp as timestamp)) t_stamp
    FROM stack_test
  )
  GROUP BY t_stamp
  /

  T_STAMP    HITS_PER_HR_INTERVAL
  -------------------------------
  12          3
  13          2 
```

或使用 row_number()：

```
SELECT * FROM
(
 SELECT t_stamp
      , Count(t_stamp) OVER (PARTITION BY t_stamp ORDER BY t_stamp) hits_per_hr_interval 
      , ROW_NUMBER() OVER (PARTITION BY t_stamp ORDER BY t_stamp) hr_seq
   FROM
   (
   SELECT EXTRACT(hour From Cast(t_stamp as timestamp)) t_stamp
     FROM stack_test
   )
  )
  -- WHERE hr_seq = 1  -- optional to see only first row per group as in above example 
  /

 T_STAMP    HITS_PER_HR_INTERVAL    HR_SEQ
 ------------------------------------------
 12         3                       1
 12         3                       2
 12         3                       3
 13         2                       1
 13         2                       2 
```

您可以添加更多过滤器，例如您的工作时间仅在 12 到 1 之间...

# emacs - 在 org 模式下，如何从 HTML 导出中删除“验证 XHTML 1.0”消息？

> ID：15134911
> 
> 赞同：28
> 
> 时间：2013-02-28T11:55:52.597
> 
> 标签：emacs, org-mode

在 org-mode 7.8 中，如何删除页面底部的“Validate XHTML 1.0”消息？

可以使用以下方法删除其邻居：

> #+选项：作者：nil 电子邮件：nil 创建者：nil 时间戳：nil

但我找不到“Validate XHTML 1.0”消息的等价物。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-28T21:03:28.347

一种方法是将`org-export-html-validation-link`变量的值更改为 nil：

```
(setq org-export-html-validation-link nil) 
```

从 org 版本 8.0 开始，使用：

```
(setq org-html-validation-link nil) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-24T12:57:37.167

我在我的 org 文件中使用了以下行：

```
#+OPTIONS: html-postamble:nil 
```

但这不仅删除了验证链接。改为使用`html-validation-link`没有预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-15T04:25:00.807

如果您只想对某些文件执行此操作，也可以通过将以下内容添加到`org`文件末尾来使用局部变量。

```
# Local Variables:
# org-html-validation-link: nil
# End: 
```

# ios - iOS 数据库架构决策

> ID：15134913
> 
> 赞同：0
> 
> 时间：2013-02-28T11:55:57.943
> 
> 标签：ios, objective-c, database, ipad

新手问题。对于 iPad 应用程序，我将需要一个来自大约 200 个 UIImages（其中一个小于 500kb 大小）的数据库。客户希望能够不时更改此图像集，而无需在应用商店中发布新版本的应用，并且应用必须在不连接到网络（设备上的本地数据库）的情况下工作。我看不出如何同时做到这一点，我在这里只看到一个常见的选项：

*   图像数据库将存储在服务器上，应用程序客户可以随时更改。用户将需要有网络连接，并且每次他将启动应用程序 - 现有数据库将加载到应用程序中。

这里的主要问题：是否可以在不发布新版本的应用程序的情况下更新用户设备上的数据库以及哪种数据库管理系统更适合这种情况（SQLite、MySQL 等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:00:13.887

问：是否可以在不发布新版本的应用程序的情况下更新用户设备上的数据库？答：是的。有可能的。

SQLite 将非常适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:07:04.333

照片驻留在网络服务器上。许多启动照片可能驻留在边界内，因此应用程序在启动时并不是真正的空。但是，下载应用程序时，用户必须在线。在大多数情况下，当他第一次启动应用程序时，他仍然会直接在线。

服务器提供两种服务：

1.  一个快速的，只提供照片数据库内容的版本号和/或服务器上照片的最后更改日期。

2.  该应用程序经常（我会说不超过每天）检查服务器上是否有新图像。

3.  如果是，则询问用户是否要下载它们。

4.  如果用户说“是”，则应用程序将所有本地照片的版本号和/或最后日期和/或 ID 发送到服务器，服务器提供有关已添加哪些照片以及从何处下载该照片以及哪些已添加的信息被删除。

5.  然后您从服务器提供的下载源中添加或删除或更新照片。（当然，这很可能是同一个服务器的 URL。）

对于 200 个数据集，我强烈建议使用 SQLite 的核心数据——标准的东西。然后，您可能会考虑将图像数据保存在文件系统或数据库中的 NSData 属性中。

# c# - 使用 C# 在 Crystal Report 中上传图像而不在 ASP.NEt 中的 DB 中保存图像

> ID：15134914
> 
> 赞同：0
> 
> 时间：2013-02-28T11:55:58.593
> 
> 标签：c#, asp.net, crystal-reports

我有一个使用 C# 应用程序的 Asp.Net，其中我以 Blob 格式将条形码图像保存在 DB 中，并在 Crystal Report 中获取它，到目前为止它工作正常。

但是根据我们的 DBA 的说法，它占用了大量的数据库空间，所以他们通知我更改应用程序。

所以现在我必须将图像保存在文件夹中，然后在 Crystal Report 中动态调用它，而不是将图像保存在 DB 中，因为我将在 DB 中保存图像的路径。

已搜索谷歌，但没有得到任何解决方案。

如果您有任何解决方案或示例，请帮助我解决此问题。

非常感谢提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:41:37.530

得到我的问题的解决方案：如果有人需要解决方案，请参考： [http ://csharpdotnetfreak.blogspot.com/2012/06/crystal-reports-display-images-database.html。](http://csharpdotnetfreak.blogspot.com/2012/06/crystal-reports-display-images-database.html)

# c - 调用本地静态变量是否正确？

> ID：15134916
> 
> 赞同：3
> 
> 时间：2013-02-28T11:56:02.890
> 
> 标签：c, variables, memory, static, keyword

众所周知，C语言通过C程序中的变量支持两种内存分配：

> 1）静态分配是当你声明一个静态变量时发生的。每个静态变量定义一个固定大小的空间块。当您的程序启动时，空间被分配一次，并且永远不会被释放。
> 
> 2) 自动分配发生在您声明自动变量时，例如函数参数或局部变量。自动变量的空间在输入包含声明的复合语句时分配，并在退出该复合语句时释放。

（这是来自[http://www.cs.utah.edu/dept/old/texinfo/glibc-manual-0.02/library_3.html](http://www.cs.utah.edu/dept/old/texinfo/glibc-manual-0.02/library_3.html)的完整引用）

问题是：就内存分配而言，在“本地”函数中调用静态变量是否正确，为什么？提前感谢大家。

PS 欢迎来自 C 标准的任何引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:01:42.667

C标准没有定义*局部变量*的术语。*自动*和*静态*是指*存储时间*。

> ### C11 (n1570)，§ 6.2.4 对象的存储持续时间
> 
> 对象具有决定其生命周期的存储持续时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T11:58:23.247

您可以将其称为“函数局部静态变量”或类似的名称，但如果您简单地将其称为“局部变量”，您可能会发现当人们发现它实际上是静态的并因此具有一些属性时会感到惊讶的一个全局变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T12:01:34.563

C中有两种类型的静态变量。

1.  全局静态变量，其中`static`这些变量只能在这个翻译单元中看到的状态。

2.  具有局部作用域的静态变量（即在函数中）。这些被初始化一次并在超出范围后保持它们的值事件。

你的问题是：不，一个变量不能同时是`static`和`automatic`。如果您检查它们的地址，您会发现该`static`变量不在当前堆栈帧上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T12:01:53.507

在变量的上下文中，术语*本地*最常表示可见性和范围，而不是存储机制和生命周期。

在 C 中使用术语*局部变量*实际上是不准确的，因为标准从未提及过这一点。

非正式地，函数内部的静态变量可以说是函数可见范围内的*局部*变量，但仅此而已。

我建议完全不要使用术语*局部变量*。相反，应该讨论函数内的静态变量、自动变量、文件范围内的静态变量和全局变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T12:11:08.357

> 问题是：就内存分配而言，在“本地”函数中调用静态变量是否正确，为什么？

静态变量存储在分配给程序的内存的数据部分中。即使静态变量的作用域结束，它仍然可以在其作用域之外被访问，这可能表明，数据段的内容，可能与作用域无关。

例子

```
#include <stdio.h>

int increment(void);

int main()
{
printf("\ni = %d",increment());
printf("\ni = %d",increment());
printf("\ni = %d",increment());
}

int increment(void)
{
static int i = 1;
return i++ ;
} 
```

在上面的例子中，在每次函数调用 increment() 之后，函数内部的静态变量 i 每次函数返回时都会超出范围，但会永久保留其值。这是唯一可能的，因为变量与函数不在同一个堆栈上，但它完全存在于不同的内存区域，即数据段中。

# codeigniter - codeigniter 的重定向不断将我重定向到 index.php

> ID：15134918
> 
> 赞同：0
> 
> 时间：2013-02-28T11:56:06.663
> 
> 标签：codeigniter, redirect

我正在使用沉闷的重定向：

```
redirect('/home/login/'); 
```

当用户未登录时。但它不断将我重定向到

```
/index.php/home/login/ 
```

虽然我的 .htaccess 中有这个：

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:57:34.357

**可能的解决方案1：**

*制作.htaccess*

```
<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteBase /#MY_DIRECTORY#

    RewriteRule ^(#MY_DEFAULT_CONTROLLER#(/index)?|index(\.php)?)/?$ / [L,R=301]
    RewriteRule ^(.*)/index/?$ $1 [L,R=301]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.+)/$ $1 [L,R=301]

    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 /index.php
</IfModule> 
```

*编辑 My_Application_Folder\Config.php*

```
$config['base_url'] = '/#MY_DIRECTORY#';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

**可能的解决方案2：**

*制作.htaccess*

```
RewriteEngine on
RewriteBase /#MY_DIRECTORY#
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L] 
```

*编辑 My_Application_Folder\Config.php*

```
$config['base_url'] = '/#MY_DIRECTORY#';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

注意：#MY_DIRECTORY# 位于实时服务器子域目录（例如 first.example.com）上 - 仅用于在一个系统 CI 上处理多个应用程序

不要忘记在 htaccess 或输出自定义库中设置文件规则

```
AddDefaultCharset UTF-8

Header unset Pragma
FileETag None
Header unset ETag 
```

**1年**

```
<filesMatch ".(ico|pdf|flv|jpg|jpeg|png|gif|swf|mp3|mp4)$">
Header set Cache-Control "public"
Header set Expires "Thu, 15 Apr 2010 20:00:00 GMT"
Header unset Last-Modified
</filesMatch> 
```

**2小时**

```
<filesMatch ".(html|htm|xml|txt|xsl)$">
Header set Cache-Control "max-age=7200, must-revalidate"
</filesMatch> 
```

**CACHED FOREVER /MOD_REWRITE 重命名每个更改**

```
<filesMatch ".(js|css)$">
Header set Cache-Control "public"
Header set Expires "Thu, 15 Apr 2010 20:00:00 GMT"
Header unset Last-Modified
</filesMatch> 
```

# php - 为什么这在属性和变量之间没有区别？

> ID：15134919
> 
> 赞同：3
> 
> 时间：2013-02-28T11:56:08.597
> 
> 标签：php

```
class someclass
{
    public $foo = 'abcd';

    public function __construct($data)
    {
        $this->foo = $data;
    }
    public function doSomething()
    {
        $user = $_POST['username'];
        echo $foo = $_POST['foo']; // This output correct value     
        var_dump($foo); // This Output NULL
        $somethingelse = $_POST['foo'];
        var_dump($somethingelse); // Output as expected

    }
} 
```

如果我将变量名称或属性名称从`$foo`更改为其他内容，则`doSomething()`它运行正常。

为什么我需要在这里保持属性名和变量名不同？

为什么`$foo`是`NULL`当属性名称之一是时`$foo`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:59:07.723

您需要使用`$this->foo`来获取和设置类属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:58:51.717

改变这个

```
echo $foo = $_POST['foo']; 
```

至

```
echo $this->foo = $_POST['foo'];
var_dump($this->foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:01:28.700

访问类变量时，您需要使用`$this->`前缀。

将您的代码更改为

```
echo $this->foo = $_POST['foo'];
var_dump($this->foo); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:08:05.803

这是正确的，并且工作正常。我运行了你的代码，它总是给我同样的结果。在一个或多个函数中拥有属性 $foo 和 $foo 变量是没有问题的。它总是给我同样的答案。

如果 $_POST['foo']=test 那么 echo $foo = $_POST['foo']; 返回“test”，$foo 返回“test”，$somethingelse 返回“test”；

# java - 使用joda时间的两个日期之间的秒差？

> ID：15134927
> 
> 赞同：46
> 
> 时间：2013-02-28T11:56:28.223
> 
> 标签：java, jodatime

假设有两个日期 A（开始时间）和 B（结束时间）。A & B 可以是同一天的时间，也可以是不同的时间。我的任务是以秒为单位显示差异。我使用的日期格式是

```
Date Format :: "yyyy-MM-dd'T'HH:mm:ss.SSSZ" 
```

例如

```
start date ::   "2011-11-16T14:09:23.000+00:00"
end date ::     "2011-11-17T05:09:23.000+00:00" 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-02-28T11:59:46.763

使用`Seconds`类：

```
DateTime now = DateTime.now();
DateTime dateTime = now.plusMinutes(10);
Seconds seconds = Seconds.secondsBetween(now, dateTime);
System.out.println(seconds.getSeconds()); 
```

这段代码打印出 600。我想这就是你所需要的。

作为进一步的建议，请探索`joda-time`. 它非常好，而且大多数东西都很容易发现。

如果您在解析日期方面需要一些帮助（确实在文档中），请查看相关问题，如下所示：

[使用带时区的 Joda 解析日期](https://stackoverflow.com/questions/4624992/parsing-date-with-joda-with-time-zone?rq=1)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-02T16:08:47.283

在大多数情况下，@pcalcao 的答案是最好的。请注意，秒数将四舍五入为整数。

如果您对亚秒精度感兴趣，只需减去毫秒：

```
double seconds = (now.getMillis() - dateTime.getMillis()) / 1000d; 
```

# three.js - 三个JS Camera控制鼠标+kbd

> ID：15134934
> 
> 赞同：3
> 
> 时间：2013-02-28T11:56:40.723
> 
> 标签：three.js

正如标题所示，我想在 ThreeJS 中移动相机。我目前让相机在 mousedown 上移动，使其围绕它看起来的点，我想让键盘控制在 x 和 z 中移动相机，从而移动它看起来的点以及相机的位置。lookAt 目标当前为 0,0,0。

尝试过`translateX`，`translateZ`它会相对于它自己的倾斜和角度移动相机位置。因此，向下看，“向前”会使相机在世界 Y 轴上下降，我只想在世界 X 和 Z 中移动它。如果重要的话，相机就是透视，滚轮设置了轨道圆的半径。版本是 r55。

这是根本不移动相机的当前代码（主要从示例中复制）。

```
if (userMouse.isDown){
    theta = - ( ( userMouse.position.x - userMouse.down.position.x ) * userMouse.acceleration ) +  userMouse.down.theta;
    phi = ( ( userMouse.position.y - userMouse.down.position.y ) * userMouse.acceleration ) + userMouse.down.phi;
    phi = Math.min( 160, Math.max( 20, phi ) );
}

camera.position.x = userCam.radious * Math.sin( theta * Math.PI / 360 ) * Math.cos( phi * Math.PI / 360 );
camera.position.y = userCam.radious * Math.sin( phi * Math.PI / 360 );
camera.position.z = userCam.radious * Math.cos( theta * Math.PI / 360 ) * Math.cos( phi * Math.PI / 360 );
camera.lookAt(userCam.target);
camera.updateMatrix(); 
```

我查看了示例并搜索了 Internet，但没有找到此设置。我的猜测是我会使用一些 transformWorldMatrix 或使用相机的旋转来获取方向，然后添加一个运动值。

我敢肯定它不是非常棘手，我只是无法绕开它。所以; 我将如何在世界 X 和 Z 中移动相机的位置？对不起，如果这是一个菜鸟问题。

# objective-c - 检查 mapView 是否已经包含注释

> ID：15134935
> 
> 赞同：7
> 
> 时间：2013-02-28T11:56:42.323
> 
> 标签：objective-c, xcode, annotations, mkmapview, mkannotationview

当我点击另一个注释（ann1）时，我有一种添加辅助附近注释（ann2）的方法。但是，当我取消选择并重新选择完全相同的注释（ann1）时，ann2 会自行重新创建它并再次添加。有没有办法检查地图上是否已经存在注释，如果是，则不执行任何操作，否则添加新注释。我已经检查过了：[Restrict Duplicate Annotation on MapView](https://stackoverflow.com/questions/13970755/restrict-duplicate-annotation-on-mapview)但它对我没有帮助.. 任何建议表示赞赏。这是我到目前为止所拥有的：

```
 fixedLocationsPin *pin = [[fixedLocationsPin alloc] init];
        pin.title = [NSString stringWithFormat:@"%@",nearestPlace];
        pin.subtitle = pinSubtitle;
        pin.coordinate = CLLocationCoordinate2DMake(newObject.lat, newObject.lon);

        for (fixedLocationsPin *pins in mapView.annotations) {
            if (MKMapRectContainsPoint(mapView.visibleMapRect, MKMapPointForCoordinate (pins.coordinate))) {
                NSLog(@"already in map");
            }else{
                [mapView addAnnotation:pin];
            } 
```

在这种情况下，我已经在地图上获得了日志，但我还获得了添加到地图的注释的拖放动画。有任何想法吗？

先感谢您..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:03:44.783

您的`for`循环不是检查注释是否在屏幕上，而是检查图钉的坐标当前是否在可见区域内。即使它正在检查`pin`对象是否已经在其中，`mapView.annotations`它也永远不会是真的，因为您之前只创建`pin`了几行，它不可能是与 on 相同的对象`mapView.annotations`。它可能具有相同的坐标和标题，这就是您需要检查的内容：

```
bool found = false;
for (fixedLocationsPin *existingPin in mapView.annotations)
{
  if (([existingPin.title isEqualToString:pin.title] && 
       (existingPin.coordinate.latitude == pin.coordinate.latitude)
       (existingPin.coordinate.longitude == pin.coordinate.longitude))
  { 
    NSLog(@"already in map");
    found = true;
    break;
  }
}    
if (!found)
{
    [mapView addAnnotation:pin];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T08:33:56.360

```
NSNumber *latCord = [row valueForKey:@"latitude"];
NSNumber *longCord = [row valueForKey:@"longitude"];
NSString *title = [row valueForKey:@"name"];

CLLocationCoordinate2D coord;
coord.latitude = latCord.doubleValue;
coord.longitude = longCord.doubleValue;
MapAnnotation *annotation = [[MapAnnotation alloc]initWithCoordinate:coord withTitle:title];
if([mkMapView.annotations containsObject:annotation]==YES){
    //add codes here if the map contains the annotation.
}else {
    //add codes here if the annotation does not exist in the map.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T11:01:01.943

**地图对象中存在注释**数组，因此您只需检查

```
if ( yourmap.annotations.count==0)
{
NSLog(@"no annotations");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T07:14:33.817

```
 if (sampleMapView.annotations.count > 0) {             
            sampleMapView.removeAnnotation(detailMapView.annotations.last!)
        } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-08-21T21:17:57.450

在我对克雷格的回答发表评论之后，我认为解决方案可能看起来像这样：

```
import MapKit

extension MKMapView {

    func containsAnnotation(annotation: MKAnnotation) -> Bool {

        if let existingAnnotations = self.annotations as? [MKAnnotation] {
            for existingAnnotation in existingAnnotations {
                if existingAnnotation.title == annotation.title
                && existingAnnotation.coordinate.latitude == annotation.coordinate.latitude
                && existingAnnotation.coordinate.longitude == annotation.coordinate.longitude {
                  return true
                }
            }
        }
        return false
    }
} 
```

此代码允许您检查 mapView 是否包含给定的注释。在所有注释的“for”循环中使用它：

```
for annotation in annotations {
  if mapView.containsAnnotation(annotation) {
    // do nothing
  } else {
    mapView.addAnnotation(annotation)
  } 
```

PS：如果您需要向mapView**添加**新注释，这很有效。但是如果您还需要**删除**条目，则可能必须做相反的事情：检查每个现有注释是否存在于新的注释数组中；如果没有，请将其删除。或者您可以删除所有内容并再次添加所有内容（但是您将获得动画更改...）

# php - 当用户来自 HTTP 代码 301/307 时，HTTP_REFERER 不起作用

> ID：15134952
> 
> 赞同：0
> 
> 时间：2013-02-28T11:57:41.437
> 
> 标签：php, wordpress, http, redirect

我用 PHP 编写了一些简单的代码，可以从我的 301 重定向 URL 中保存 slug，因此我知道有多少访问者来自该广告。但是，当用户来自 301/307 时，它不起作用。

示例：如果用户来自 301 重定向 url`example.com/example`以将 url 重定向到`example.com/example1`example1 页面中的现在不显示来自此链接的推荐`example.com/example`：

```
$url = example.com/example;

$data = "$url";

$j=0;   

foreach (count_chars($data, 1) as $i => $val) {
   $j=$j+$val;

}

$result = substr(isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : '',$j);

回显$结果；  

```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:03:17.263

不要依赖 $_SERVER['HTTP_REFERER'] 浏览器发送它纯粹是可选的，并且一些安全软件会在请求中阻止它。[在这里](http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html#sec15.1.3)阅读更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:52:37.403

这是Referer Tracking的正常问题。您应该使用其他方法来跟踪广告。

最常用的选项是获取参数 (offer.php?ref=sitexy)

# javascript - 带有单引号字符串的 DataBind 未调用 javaScript 函数

> ID：15134953
> 
> 赞同：1
> 
> 时间：2013-02-28T11:57:45.157
> 
> 标签：javascript, asp.net, datalist

**场景：-** 我有一个数据列表，加载了一些图像。每个图像都有自己独特的字符串属性（“描述”），该属性是从数据库查询中加载的。现在，当鼠标悬停在任何图像上时，它会调用已定义的 OnClinetClick JS 函数。那就是JS函数的参数绑定当前鼠标悬停图像的“描述”。（请参考代码）

**问题：-**只要“描述”中有一个单引号（例如*World's Best*），则不会调用“demoJS”。但是如果相同的“描述”中有正常的字符串（例如*World Best*），则“DemoJS”被成功调用。

请让我知道是否有人可以指导这一点。

```
 <asp:DataList ID="ItemSelectionDataList" CssClass="itemSelectionDataList" runat="server"
                 DataSourceID="DemoDataSource">
     <ItemTemplate>
         <a href="DemoPage.aspx?1>"
             class="itemSelectionItemLink" 
             onmouseover="demoJS('<%# DataBinder.Eval(Container.DataItem, "Description")%'                                   
         </a>
     </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:01:45.890

为什么不把它`'`换成`\'`这样？？

```
DataBinder.Eval(Container.DataItem, "Description").ToString().Replace("'", "\\'") 
```

# java - 如何在Java中遍历树并在一定深度打印笔记？

> ID：15134960
> 
> 赞同：2
> 
> 时间：2013-02-28T11:58:03.753
> 
> 标签：java, tree

给定（树的）深度作为命令行参数，您如何实现遍历树的迭代并在该深度处停止，然后仅在该深度处按顺序打印节点？

树结构：

```
 Root:        A       (Depth)   0
              /     \
           C           B           1
         / | \        / \
        E  D  F      G   H         2 
```

示例输出：深度 = 0 输出 = A

深度 = 1 输出 = B,C

深度 = 2 输出 = D,E,F,G,H

我知道遍历树结构的唯一方法是 while(iterator.hasNext()) 循环 - 但是，如果我尝试在此循环中打印树的节点，它将打印该级别的节点以及它前面的节点，这不是我想要的。

编辑：初始代码

```
 public static void main(String[] args)
    {
     int depth;
     BufferedReader input = null;

     try
     {
      input = new BufferedReader(new FileReader(args[0]));
      depth = Integer.parseInt(args[1]);

      String currentLine = "";
      TreeSet<String> lineSet;
      lineSet = new TreeSet<String>();
      while((currentLine = input.readLine()) != null)
      {
       lineSet.add(currentLine);   
      }
      Iterator<String> iterator;
      iterator = lineSet.iterator();
      while (iterator.hasNext())
      {
       System.out.println(iterator.next());
      } // while
     } // try
     catch(IOException exception)
     {
      System.err.println(exception);
     } // catch
     finally
     {
      try{ if (input != null) input.close(); }
      catch (IOException exception)
      { System.err.println("Could not close input " + exception); }
      } // finally
     } // main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:08:25.780

好吧，基本上你以广度优先顺序遍历树，直到你达到你想要的深度。然后开始打印出节点或将它们收集到列表/集合中，然后再打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:54:30.533

你显然需要做一个[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)。但是，恐怕您无法`TreeSet`从 JDK 获得足够的内部结构或任何其他数据结构。

因此，您需要实现自己的树数据结构（或使用第三方库）。

# c# - 将 Java 类转换为 DLL

> ID：15134961
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:58:05.427
> 
> 标签：c#, java, .net, dll

我需要在 .NET (C#) 中使用 Java 代码，并且正在寻找一种将 Java 类转换为 DLL 文件的方法（然后我可以在我的 .NET 应用程序中引用该文件）。这是一个有效的场景吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:01:52.423

您可以使用[IKVM.NET](http://www.ikvm.net/uses.html)来使用 .NET 中的 Java 类和库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:00:43.153

基本上这不是一个好主意。由于java强调平台无关，而dll是平台相关的。所以，考虑打包成一个 jar 文件，以某种方式执行和使用它

可能此链接对您有用：

[http://www.codeproject.com/Articles/13549/Using-Java-Classes-in-your-NET-Application](http://www.codeproject.com/Articles/13549/Using-Java-Classes-in-your-NET-Application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:00:10.723

为此，您可以使用 IKVM.NET。

# c# - HTML表格溢出和搜索

> ID：15134963
> 
> 赞同：-2
> 
> 时间：2013-02-28T11:58:07.503
> 
> 标签：c#, html, html-table

我有来自 SQL 表的数据的 HTML 表。我想显示 10 行表格，但用户单击表格下方的按钮，他可以查看下一个 10 行等等，也允许查看上一行。

此外，如果他们想搜索所有数据，他们只会找到他们的行，

如果可能的话，想要一种比 jQuery 网站上更简单的搜索方法，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:24:28.910

你有两种方法。

1.  您可以在数组中获取所有数据并使用其中一个 jquery 表插件（我推荐[http://www.datatables.net/](http://www.datatables.net/)），它可以处理您想要的所有事情。你应该只把你的数组送到桌子上。问题是如果用户只想要前 10 行，您加载了他不需要的大量数据，但加载后，它非常快（它使用 javascript 处理）。

2.  第二种方法是当您从数据库中获取数据时，您只能获取 10 行（首先，前 10 行，然后是后 10 行，依此类推）并且每次将其加载到 jquery 表中（我再次推荐[http:/ /www.datatables.net/](http://www.datatables.net/) )

# mysql - 根据月份获得平均值？

> ID：15134964
> 
> 赞同：0
> 
> 时间：2013-02-28T11:58:11.423
> 
> 标签：mysql

我的桌子：

```
rating   date
   4    12/02/2013
   3    12/02/2013
  2.5   12/01/2013
   3    12/01/2013
  4.5   21/11/2012
   5    10/11/2012 
```

如果我在过去三个月 (02,01,12) 中输入 3，则评级结果的平均值应该是

我尝试使用`GROUP BY`，但我得到了这个结果：

```
 rating   month
  3.5      02
 2.75      01 
```

第 12 个月没有评分，所以没有输出......

我想要的结果：

```
 rating   month
  3.5      02
 2.75      01
   0       12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:20:47.797

问题是您想返回不存在的月份。如果您没有带有日期的日历表，那么您将需要使用以下内容：

```
select d.mth Month,
  coalesce(avg(t.rating), 0) Rating
from 
(
  select 1 mth union all
  select 2 mth union all
  select 3 mth union all
  select 4 mth union all
  select 5 mth union all
  select 6 mth union all
  select 7 mth union all
  select 8 mth union all
  select 9 mth union all
  select 10 mth union all
  select 11 mth union all
  select 12 mth 
) d
left join yourtable t
  on d.mth = month(t.date)
where d.mth in (1, 2, 12)
group by d.mth 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/1364f/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:22:11.277

```
SELECT coalesce(avg(rating), 0.0) avg_rating, req_month
  FROM    yourTable
       RIGHT JOIN
          (SELECT month(now()) AS req_month
           UNION
           SELECT month(now() - INTERVAL 1 MONTH) AS req_month
           UNION
           SELECT month(now() - INTERVAL 2 MONTH) AS req_month) tmpView
       ON month(yourTable.date) = tmpView.req_month
 WHERE    yourTable.date > (  (curdate() - INTERVAL day(curdate()) - 1 DAY) - INTERVAL 2 MONTH)
  OR ratings.datetime IS NULL
GROUP BY month(yourTable.date); 
```

# c# - 将数组数组或动态绑定到数据网格

> ID：15134966
> 
> 赞同：0
> 
> 时间：2013-02-28T11:58:21.697
> 
> 标签：c#, data-binding, dynamic, datagrid, pagedcollectionview

我正在尝试将数组数组绑定到`DataGrid`.

我知道我可以通过将数据转换为 a`DataTable`然后绑定它来相当容易地做到这一点。但这不是我需要的，因为我需要能够通过`PagedCollectionVIew`.

这样做的原因是：我有一组为文档创建结构的控件，我想在使用结构控件时动态地用虚拟数据反映这个结构。虚拟数据是一个简单的随机整数对称矩阵，其中行是数据元素，我想将每个网格列绑定到数组的元素，而不是数组对象。

```
_dataGenerator = new DummyDataGenerator();
_dummyDataView = new ObservableCollection<int[]>();
DummyData = new PagedCollectionView(_dummyDataView); 
```

在哪里`_dummyDataView`填充

```
// Set up the dummy data for the fields available.
_dataGenerator.CreateData(ReportFields).ForEach(_dummyDataView.Add); 
```

并且 XAML 只是`DataGrid`对...的绑定，`DummyData`然后我将在用户使用文档数据时动态添加 Groupings 和 Sortings。我到处搜索，但找不到解决方案，但必须有一种方法（一定有人在博客上写过这个）绑定到 xaml 中的数组元素！这里真的需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:20:08.450

我有答案（好吧，我很久以前就有了，但我记得我发布了这个问题）。这是一个来自无数片段和我自己的大脑的 frankencode 怪物，所以我不能归因于每个人。我要把它放上来。因为我觉得它很棒。即使没有人关心：

它使用： - DLR - 一点反射 - 一点 IL 构建。

可能应该将所有这些都放在某个地方的博客文章中，但我不保留博客。

这是为 ViewModel 调用的视图创建数据的代码。

```
 public IEnumerable<dynamic> CreateData(ObservableCollection<ReportFieldVm> reportFields)
    {
        // Find the length of the array.
        var size = reportFields.Count;

        // Create matrix.
        var b = new int[size, size];

        // Random for the values.
        var rand = new Random((int)DateTime.Now.Ticks);

        // Build the symmetric matrix.
        for (var i = 0; i < size; i++)
        {
            for (var j = 0; j < size; j++)
            {
                if (i == j)
                {
                    b[i,j] = rand.Next(0, 100);
                }
                else
                {
                    var a = rand.Next(0, 100);
                    b[i,j] = a;
                    b[j,i] = a;
                }
            }
        }

        // Define the assembly to add out new type to.
        var asmName = new AssemblyName("DummyAssembly");
        var ab = AppDomain.CurrentDomain.DefineDynamicAssembly(asmName, AssemblyBuilderAccess.Run);
        var mb = ab.DefineDynamicModule("DummyModule");

        // Define our type.
        var d = mb.DefineType("DummyType", TypeAttributes.Public);

        const MethodAttributes GetSetAttr = MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig;

        // Define all the fields for the new type.
        foreach (var rf in reportFields.OrderBy(rf => rf.SelectOrder))
        {
            var propertyName = rf.FieldName;

            var field = d.DefineField("m_" + propertyName, typeof(int), FieldAttributes.Private);

            var property = d.DefineProperty(propertyName, PropertyAttributes.HasDefault, typeof(int), null);

            var dGetAccessor = d.DefineMethod("get_" + propertyName, GetSetAttr, typeof(int), Type.EmptyTypes);

            var numberGetIl = dGetAccessor.GetILGenerator();
            numberGetIl.Emit(OpCodes.Ldarg_0);
            numberGetIl.Emit(OpCodes.Ldfld, field);
            numberGetIl.Emit(OpCodes.Ret);

            var dSetAccessor = d.DefineMethod("set_" + propertyName, GetSetAttr, null, new Type[] { typeof(int) });
            var numberSetIl = dSetAccessor.GetILGenerator();
            numberSetIl.Emit(OpCodes.Ldarg_0);
            numberSetIl.Emit(OpCodes.Ldarg_1);
            numberSetIl.Emit(OpCodes.Stfld, field);
            numberSetIl.Emit(OpCodes.Ret);

            property.SetGetMethod(dGetAccessor);
            property.SetSetMethod(dSetAccessor);
        }

        // Create the type.
        var dummyType = d.CreateType();

        var array = new List<dynamic>();

        // Convert the matrix into the array of the dynamic.
        for (var i = 0; i < size; i++)
        {
            var obj = Activator.CreateInstance(dummyType);
            int j = 0;
            foreach (var rf in reportFields.OrderBy(rf => rf.SelectOrder))
            {
                var type = obj.GetType();
                var prop = type.GetProperty(rf.FieldName);
                prop.SetValue(obj, b[j, i], null);
                j++;
            }
            array.Add(obj);
        }

        return array;
    } 
```

这是绑定视图的代码，在视图中调用。

在哪里 ：

1.  `_dynamicReportPreview`是 XAML 中的命名网格。

2.  `ViewModel`是在视图构造函数中公开`DataContext`视图集的属性。

    ```
    private void BuildPreviewGridColumns()
    {
        if (_dynamicReportPreview == null)
            return;

        _dynamicReportPreview.Columns.Clear();

        var initialFields = ViewModel.ReportFields.OrderBy(rf => rf.SelectOrder);

        foreach (var rf in initialFields)
        {
            var col = new Column
            {
                ColumnName = rf.FieldName, 
                Binding = new Binding(rf.FieldName)
            };

            _dynamicReportPreview.Columns.Add(col);

            if (!rf.IsVisible)
            {
                col.Visible = false;
            }
        }
    } 
    ```

# linux - 如何在 grep 中创建相同输出的类？

> ID：15134969
> 
> 赞同：0
> 
> 时间：2013-02-28T11:58:25.690
> 
> 标签：linux, unix, grep

我试图找出几种语言中不同的三个元音组合的数量。使用 grep 我隔离了文本文件中出现的三个元音。这是我使用的代码：

```
'[aeuioj]{3}' *file name* -o 
```

我发现以前有人这样做过，请参见下面的链接

[如何使用 egrep 列出与正则表达式匹配的单词？](https://stackoverflow.com/questions/12644074/how-do-i-use-egrep-to-list-words-that-match-a-regular-expression)

只是现在我需要从输出中过滤掉所有重复，这应该会给我一个给定语言中所有三个元音组合的列表。我对 grep 很陌生。

谢谢，

StWS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:06:18.797

您可以在这里使用 grep + perl + uniq 组合：

```
cat words.txt | grep -E '[aeiou]{3}' | perl -pe 's/(.*)([aeiou]{3})(.*)/$1$2$3 $2/' | uniq -f 1 
```

它的作用是：

1.  Grep 正在过滤，因此只显示具有 3 个相邻元音的单词
2.  Perl 正在提取这 3 个元音并将它们放在一行的末尾（在空格之后）。例如：

    ```
    $ echo "gooad" | perl -pe 's/(.*)([aeiou]{3})(.*)/$1$2$3 $2/'
    goood ooa 
    ```

3.  Uniq -f 1 比较第二列（在空格之后）并仅选择唯一行。

# perl - Perl如何将工作表添加到包含宏和公式的现有excel文件中？

> ID：15134971
> 
> 赞同：0
> 
> 时间：2013-02-28T11:58:29.107
> 
> 标签：perl, excel

我在编辑文件时遇到问题。我正在使用来自 CPAN的模块[Spreadsheet::ParseExcel::SaveParser 。](http://search.cpan.org/perldoc?Spreadsheet%3a%3aParseExcel%3a%3aSaveParser)文件中的现有数据我要添加一组新数据并将文件另存为新的。

不幸的是，新文件不会写宏或公式。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:04:58.357

`Spreadsheet::ParseExcel`我相信这是一个限制。

您应该可以使用 来做到这一点[`Win32::OLE`](http://search.cpan.org/~jdb/Win32-OLE-0.1709/lib/Win32/OLE.pm)，它允许您以编程方式控制 Excel 本身。请参阅[文档中的第一个示例](http://search.cpan.org/~jdb/Win32-OLE-0.1709/lib/Win32/OLE.pm#EXAMPLES)。

# ios - iOS - 视图之间的关系

> ID：15134974
> 
> 赞同：0
> 
> 时间：2013-02-28T11:58:37.063
> 
> 标签：ios, subviews

我刚学iOS，所以我的问题很基础...我已经阅读了很多关于在应用程序中组织子视图的内容，但是那里有很多东西，我想问你我是否理解好吧...

该应用程序的主要部分是一个窗口。ViewController 只管理一个视图。在一个窗口中，我可以设置`rootViewController`. 该控制器在整个应用程序工作流程中管理视图。接下来我可以创建一些子视图，使用插座将这些子视图连接到主视图（父视图），并且在实例化时我可以通过方法`rootViewController`添加我的子视图。`:addSubview`我或多或少是对的？

还有一个问题......每个子视图是否应该由专用的 ViewController 管理（然后，父级有这些控制器的出口）或者我可以直接从父级 ViewController 更改子视图状态？

和简短的例子：

我想创建一个 iPad 应用程序，它具有（一次都可见）： - 顶部：简短形式和按钮（用户输入一些数据并单击“保存”按钮） - 底部：显示提供值的表格

所以：

我可以创建一个主视图和两个子视图（用于表单和表格）。每次我添加一些值表时，都会使用父控制器刷新......这有意义吗？

**如果你看到我理解错了，请告诉我应该读什么。**

谢谢你的耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:04:30.543

`rootViewController`是您的应用程序的起点，您可以根据应用程序的需要创建更多`viewController`并添加子视图。`viewController`

> 我想创建一个 iPad 应用程序，它具有（一次都可见）： - 顶部：简短形式和按钮（用户输入一些数据并单击“保存”按钮） - 底部：显示提供值的表格

您可以创建`UITableView`&`UIButton`至（将是子视图的所有者）或任何其他子视图，如标签、文本字段等`subView` 。`UiViewController`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:06:06.607

iOS 遵循 MVC 模式。

控制器类是将数据绑定到视图的管理器。因此，您可以为视图和数据设置单独的类。

你的理解是对的。为了实现你提到的事情，

1.  创建 UIViewController 的子类。
2.  向其中添加两个子视图（TableView 和 Button）。这可以使用 xib 或以编程方式完成
3.  在控制器类中添加 tableview 的委托方法，并将 tableview 的委托设置为控制器类。
4.  为按钮添加事件。

.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:05:01.337

子视图连接到文件所有者，即`viewcontroller`..不是父视图。

# ruby-on-rails - 如何检测是否使用收集路由发出请求？

> ID：15134977
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:58:42.997
> 
> 标签：ruby-on-rails, ruby, routing

Ruby on rails 具有轻松创建资源收集路线的功能。但是在控制器中，我们如何检测该收集路由是否与当前请求匹配。

```
resource :posts, :only => [:index, :show] do
  collection do
    get :archived, :action => :index
  end
end 
```

那么在 Posts#index 操作中，我如何检查索引操作的哪个路由是否匹配？（索引或存档）应该有一种干净的方式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:37:39.207

利用

> 耙路线

并查看您的应用程序中的所有路由。输出将是这样的。

```
welcome_index GET    /welcome/index(.:format)  welcome#index
        users GET    /users(.:format)          users#index
              POST   /users(.:format)          users#create
     new_user GET    /users/new(.:format)      users#new
    edit_user GET    /users/:id/edit(.:format) users#edit
         user GET    /users/:id(.:format)      users#show
              PUT    /users/:id(.:format)      users#update
              DELETE /users/:id(.:format)      users#destroy
         root        /                         welcome#index 
```

你应该经历这个..[从这里更好地学习路由](http://ofps.oreilly.com/titles/9780596521424/routing.html)

# java - 如何使用 facebook sdk 从 facebook 个人资料中获取 id 和 name？

> ID：15134978
> 
> 赞同：0
> 
> 时间：2013-02-28T11:58:43.727
> 
> 标签：java, android, facebook, sdk

我知道方法是使用 JSON 并且我已经阅读了很多关于如何做到这一点的文章，但我仍然无法弄清楚我必须在哪里放置 JSON 代码以便我可以获取 id 和名称，因为我尝试过的一切都没有t 工作（为空）。你们能给我一个建议，我应该在哪里请求 id 和 name，这样我才能真正得到它们？这是我主要课程中与 facebook 相关的所有内容：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    this.facebookConnector.getFacebook().authorizeCallback(requestCode, resultCode, data);
}

@Override
protected void onResume() {
    super.onResume();
    updateLoginStatus();
}

public void updateLoginStatus() {
    loginStatus.setText("Logged into Facebook as "+        facebookConnector.getUserName() + facebookConnector.getFacebook().isSessionValid());
}

public void postMessage() {

    if (facebookConnector.getFacebook().isSessionValid()) {
        postMessageInThread();
    } else {
        SessionEvents.AuthListener listener = new SessionEvents.AuthListener() {

            @Override
            public void onAuthSucceed() {
                postMessageInThread();
            }

            @Override
            public void onAuthFail(String error) {

            }
        };
        SessionEvents.addAuthListener(listener);
        facebookConnector.login();

    }
}

private void postMessageInThread() {
    Thread t = new Thread() {
        public void run() {

            try {
                facebookConnector.postMessageOnWall("test");
                mFacebookHandler.post(mUpdateFacebookNotification);
            } catch (Exception ex) {
                Log.e(TAG, "Error sending msg",ex);
            }
        }
    };
    t.start();
}

private void clearCredentials() {
    try {
        facebookConnector.getFacebook().logout(getApplicationContext());
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

最后我试过

```
 AsyncFacebookRunner myAsyncRunner = new AsyncFacebookRunner(facebook);
    myAsyncRunner.request("me", new meRequestListener()); 
```

进而

```
 public class meRequestListener implements RequestListener {

    public void onComplete(String response, Object state) {

        fbName = response;
    } 
```

当我得到字符串时

```
public String getUserName () {
    return fbName;
} 
```

它仍然为空。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:57:40.827

你可以使用这个：（此代码使用 Facebook SDK 3.02）

用户身份：

```
final Session session = Session.getActiveSession();
    if (session != null && session.isOpened()) {
        // If the session is open, make an API call to get user data
        // and define a new callback to handle the response
        Request request = Request.newMeRequest(session, new Request.GraphUserCallback() {
            @Override
            public void onCompleted(GraphUser user, Response response) {
                // If the response is successful
                if (session == Session.getActiveSession()) {
                    if (user != null) {
                        user_ID = user.getId();//user id
                        profileName = user.getName();//user's profile name
                        userNameView.setText(user.getName());
                    }   
                }   
            }   
        }); 
        Request.executeBatchAsync(request);
    } 
```

`user_ID`&`profileName`是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:06:58.110

试试这个：

```
AsyncFacebookRunner myAsyncRunner = new AsyncFacebookRunner(facebook);
JSONObject json = Util.parseJson(myAsyncRunner.request("me", new meRequestListener()));
                    String facebookID = json.getString("id");
                    String firstName = json.getString("name");                  
                    System.out.println("Details: "+id+" "+name); 
```

我希望这对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:48:08.310

这是解决方案

```
String response = facebook.request("me", param, "GET"); 
```

希望它可以帮助有类似问题的人。

# python - numpy：搜索数组中的第一个和最后一个索引

> ID：15134992
> 
> 赞同：2
> 
> 时间：2013-02-28T11:59:17.053
> 
> 标签：python, arrays, numpy

我将 Python 与`numpy`.

我有一个 numpy 数组`b`：

```
b = np.array([True,True,True,False,False,True,True,False,True,True,True,True,False]) 
```

我需要找到`b`equal的第一个和最后一个索引`True`。

对于此示例：

```
out_index: [0,2]
           [5,6]
           [8,11] 
```

有人可以建议，**我怎么得到`out_index`？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:10:12.443

```
b = np.array([True,True,True,False,False,True,True,False,True,True,True,True,False])
idx = np.argwhere(np.diff(np.r_[False, b, False])).reshape(-1, 2)
idx[:, 1] -= 1
print idx 
```

输出：

```
[[ 0  2]
 [ 5  6]
 [ 8 11]] 
```