# StackOverflow 问答 13993000-13993999

# ios - 在 ScatterPlot Coreplot iOS 中使用直线

> ID：13993002
> 
> 赞同：1
> 
> 时间：2012-12-21T15:40:51.463
> 
> 标签：ios, line, core-plot, cgcontext

我正在尝试使用 coreplot 库绘制图表。我正在寻找一种方法来更改图形的 dataLineStyle，以便所有点都连接成一条直线，而没有任何有趣的转弯。如果需要，我可以提供更多信息。

有什么办法可以做到这一点？

[编辑] 我附上了一张图片，以更好地理解我在说什么。我不希望图表线在数据点之上或之下。

![带线条的 Coreplot 图](../Images/eaf29de46ec958de5f7401b2baa5a1fe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:30:48.807

回归线没有内置到 Core Plot 中。您可以使用一个散点图来绘制仅带有绘图符号而没有数据线的数据点。使用第二个散点图绘制回归线。它只需要两个数据点，一个用于线的每一端。您必须自己计算回归系数。

* * *

连接数据点的线由`interpolation`属性控制。默认是`CPTScatterPlotInterpolationLinear`你想要的。

# android - 包括库在 Android 项目中使用的共享对象

> ID：13993004
> 
> 赞同：2
> 
> 时间：2012-12-21T15:41:04.797
> 
> 标签：android, makefile, unsatisfiedlinkerror

我的 Android 项目正在使用具有本机代码的 Android 库项目，并且我正在`UnsatisifiedLinkError`从库使用的本机函数中获取一个。

我已经在我的项目的 Android.mk 文件中包含了库使用的这些共享对象，它们在我构建时被正确复制到 Eclipse 项目的目录中，并且在我运行时`/libs`出现在 apks目录中。`/lib`找不到的方法应该在 libVuforiaTracking.so 中。

这是我的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := QCAR-prebuilt
LOCAL_SRC_FILES = ../../VuforiaTracking/libs/$(TARGET_ARCH_ABI)/libQCAR.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := VuforiaTracking-prebuilt
LOCAL_SRC_FILES = ../../VuforiaTracking/libs/$(TARGET_ARCH_ABI)/libVuforiaTracking.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE := MyProject

# The list of shared libraries *modules* this module depends on at runtime.
# This is necessary at link time and to embed the corresponding information
# in the generated file. We reference the prebuilt library defined earlier 
# in this makefile.
LOCAL_SHARED_LIBRARIES := QCAR-prebuilt VuforiaTracking-prebuilt

#LOCAL_SRC_FILES := MyProject.cpp

# By default, ARM target binaries will be generated in 'thumb' mode, where
# each instruction are 16-bit wide. You can define this variable to 'arm'
# if you want to force the generation of the module's object files in
# 'arm' (32-bit instructions) mode
LOCAL_ARM_MODE := arm

include $(BUILD_SHARED_LIBRARY) 
```

这是日志消息：

```
12-21 09:53:48.220: E/AndroidRuntime(13086): FATAL EXCEPTION: main
12-21 09:53:48.220: E/AndroidRuntime(13086): java.lang.UnsatisfiedLinkError: Native method not found: com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity.getOpenGlEsVersionNative:()I
12-21 09:53:48.220: E/AndroidRuntime(13086):    at com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity.getOpenGlEsVersionNative(Native Method)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity.getInitializationFlags(VuforiaTrackingActivity.java:293)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity.onCreate(VuforiaTrackingActivity.java:282)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.app.Activity.performCreate(Activity.java:5191)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.os.Looper.loop(Looper.java:137)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at android.app.ActivityThread.main(ActivityThread.java:4898)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at java.lang.reflect.Method.invokeNative(Native Method)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at java.lang.reflect.Method.invoke(Method.java:511)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-21 09:53:48.220: E/AndroidRuntime(13086):    at dalvik.system.NativeStart.main(Native Method) 
```

这是包含库依赖项的共享对象的正确方法吗？

编辑：

我注意到包名说`com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity`，我可能应该注意到我在我的项目中将库的这个活动子类化，所以实际活动的包名会有所不同。当 JNI 去寻找一个名为的方法`com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity.getOpenGlEsVersionNative()`并且我的子类被命名时，这会导致任何问题`com.my.package.MyActivity`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:23:13.100

问题是我将使用本机方法的类的名称更改`VuforiaTrackingActivity`为调用本机方法的时间`VuforiaTracking`。因此，共享对象实际上已正确加载，我扩展本机方法名称所基于的基类并不重要。我将方法更改`com.qualcomm.QCARSamples.ImageTargets.VuforiaTracking.openGlEsVersionNative`为`com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity.openGlEsVersionNative`，一切正常。

# python - Django中全局变量的替代品？

> ID：13993009
> 
> 赞同：1
> 
> 时间：2012-12-21T15:41:25.713
> 
> 标签：python, django, django-admin, global-variables

我需要一种从另一个 ModelAdmin 修改一个 ModelAdmin 成员变量的方法。所以我虽然也许我可以使用一个全局变量。但是，如果有多个用户同时使用该应用程序，那么全局变量将继续意外更改，所有地狱都会崩溃。

Django 中是否有任何方法可以让我从另一个 ModelAdmin 修改一个 ModelAdmin 成员变量？

还是我犯了设计错误？我是不是让这件事变得比实际更难，还是我错过了什么？那么使用线程和锁呢？消息传递？？？活动？！？！？！帮助

* * *

这是整个故事。我的应用程序允许用户通过选择兼容的 CPU、主板、内存和硬盘驱动器（按此顺序）来构建 PC。通过选择 CPU，它们仅限于带有 CPU 插槽的主板。通过选择带有 DDR3 调光器的主板，它们仅限于 DDR3 内存等等。

此外，感觉每个系统可能有许多相同的部分（例如：内存模块，但它们必须相同），我必须创建 ManyToManyField 关系并使用arg指定中间表（带有额外`count`字段） 。`through`这需要使用 InlineAdmin 模型来显示管理页面中的字段。

令我高兴的是，raw_id_field 变量导致下拉小部件被替换为一个按钮，该按钮弹出一个与 change_list.html 相同的表单，并允许用户过滤/排序/搜索他们想要的部分。然而，这对我的老板来说还不够好。现在我需要根据之前的选择预定义这些过滤器（即在选择带有 DDR3 的主板后过滤带有 DDR3 的内存）。所以我暗示了这个：[Django admin中的默认过滤器，](https://stackoverflow.com/questions/851636/default-filter-in-django-admin/3783930#3783930)但我需要一种方法来根据他们所做的其他选择动态`CpuAdmin.default_filters`设置。`PcAdmin`

我的模型，为简洁起见，仅包括一个部分模型：

```
# models.py
class CPU(Part):
    partNum = models.CharField(max_length=60)
    price = models.DecimalField(precision=2)
    socket = models.CharField(max_length=60)
    numCores = models.CharField(max_length=60)

class PC(models.Model):
    name = models.CharField(max_length=60)
    customer = models.CharField(max_length=60)
    cpuChoices = models.ManyToManyField(CPU, through='PcCpuChoice')
    memoryChoices = models.ManyToManyField(Memory, through='PcMemoryChoice')
    hardDriveChoices = models.ManyToManyField(HardDrive, through='PcHardDriveChoice')
    motherBoardChoices = models.ManyToManyField(MotherBoard, through='PcMotherboardChoice')

class PcCpuChoice(models.Model):
    pc = models.ForeignKey(PC, unique=False)
    cpu = models.ForeignKey(CPU, unique=False)
    count = models.IntegerField()

# admin.py
class PartAdmin(admin.ModelAdmin):
    class Meta:
        abstract = True
    search_fields = ['partNum', 'description', 'model']
    default_filter = []

    def changelist_view(self, request, extra_context=None):
        if not request.GET.has_key(self.default_filter[0]):
            q = request.GET.copy()
            q[self.default_filter[0]] = self.default_filter[1]
            request.GET = q
            request.META['QUERY_STRING'] = request.GET.urlencode()
        return super(PartAdmin,self).changelist_view(request, extra_context=extra_context)

class CpuAdmin(PartAdmin):
    list_filter = ['brand', 'socket', 'numCores', 'graphics']
    list_display = ('partNum', 'description', 'brand', 'model', 'markupPrice', 'clockSpeed', 'watts', 'voltage')
    default_filter = ['numCores','8'] # need to change this from PcAdmin!!!

class PcCpuInline(admin.TabularInline):
    model = PcCpuChoice
    extra = 1
    max_num = 1
    raw_id_fields = ['cpu']

class PcAdmin(admin.ModelAdmin):
    inlines = [PcCpuInline, PcMotherboardInline, PcMemoryInline, PcHardDriveInline]

admin.site.register(PC, PcAdmin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:10:56.843

这不是一个答案，而是朝着正确的方向轻推。

还有更多的可变上下文`local`和`global`. 在您的情况下，上下文是`user`或者可能`build`（如果用户同时进行多个构建）。

请注意，该`changelist_view()`方法需要一个`request`对象。从中您可以获得`user`、 the `session`（带有任意数量的东西）以及所有其他方式的良好状态信息。

进一步的观察：在多线程、多进程的 Web 环境中，实际上没有您习惯于思考它的意义上的“全局”。尽管*可以*在这样的环境中创建“全局”（例如使用`memcached`），但您将不得不非常努力地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:34:31.707

感谢@PeterRowell 为我指明了正确的方向。我使用**django 会话**来存储过滤器，javascript 向服务器发送请求以在加载表单时更新过滤器并在离开表单时删除它们，一些视图函数来处理这些请求，向模型添加了一个函数（以请求为参数）根据已保存的部分更新过滤器，并覆盖`changelist_view`PartAdmin 的功能以使用 request.session 中的过滤器来修改查询字符串。这是许多不同文件中的大量代码，但这里有一些亮点，希望能帮助人们寻找这样的解决方案：

问题中发布的所有模型几乎都保持不变。

PC的观点：

```
def update_filters(request):
    try:
        # get POST data
        url = request.POST['form_url']
        id = url.split('/')[-2:-1][0]
        system_type = url.split('/')[-3:-2][0]

        if id is not "new":
            system_content_type = ContentType.objects.get(app_label="systems", model=system_type.rstrip('s'))
            system = system_content_type.get_object_for_this_type(id=id)
            system.set_filters(request)
        else:
            request.session['filters'] = ''
        return HttpResponse("Filters where updated.")
    except:
        return HttpResponse("Select a part and click 'Save and continue' to set the filters.")

def delete_filters(request):
    request.session['filters'] = ''
    return HttpResponse("Filters where deleted.") 
```

这是放置在 change_form.html 中的 javascript（通过 PcAdmin add_view 和 change_view 函数中的 extra_context 参数添加）

```
 function post_to_url(path, params, method) {
        method = method || "post"; // Set method to post by default, if not specified.

        // The rest of this code assumes you are not using a library.
        // It can be made less wordy if you use one.
        var form = document.createElement("form");
        form.setAttribute("method", method);
        form.setAttribute("action", path);

        for(var key in params) {
            if(params.hasOwnProperty(key)) {
                var hiddenField = document.createElement("input");
                hiddenField.setAttribute("type", "hidden");
                hiddenField.setAttribute("name", key);
                hiddenField.setAttribute("value", params[key]);

                form.appendChild(hiddenField);
             }
        }

        var frame = document.createElement("iframe");
        frame.name="hidden-form";
        form.target="hidden-form";
        document.body.appendChild(form);
        document.body.appendChild(frame);
        form.submit();
    }

    // when they load the page, set the filters
    $(document).ready(function(){
        post_to_url("/quotegenerator/systems/update_filters/",{'form_url': document.URL});
    });

    // when they exit, delete the filter cookie
    window.onbeforeunload = function() {
        post_to_url("/quotegenerator/systems/delete_filters/", {});
    } 
```

最后，添加到 PartAdmin 的功能：

```
 def set_filters(self, request):
            # query and get the parts
            try:
                    cpu = self.cpuChoices.get()
            except:
                    cpu = False
            try:
                    mobo = self.motherBoardChoices.get()
            except:
                    mobo = False
            try:
                    mem = self.memoryChoices.get()
            except:
                    mem = False
            try:
                    hdd = self.hardDriveChoices.get()
            except:
                    hdd = False

           # for each combo of parts, figure out whats required
            # no parts at all
            if not (mobo or cpu or mem or hdd):
                    request.session['filters'] = ''
            # mobo only
            elif mobo and not (cpu or mem or hdd):
                    request.session['filters'] = 'socket='+mobo.socket
            # cpu only
            elif cpu and not (mobo or mem or hdd):
                    request.session['filters'] = 'socket='+cpu.socket
            # memory only
            elif mem and not (mobo or cpu or hdd):
                    request.session['filters'] = 'memType='+mem.memType
            # hard drive only
            elif hdd and not (mobo or cpu or mem):
                    request.session['filters'] = 'interface='+hdd.interface
            # mobo and cpu
            elif mobo and cpu and not (mem or hdd):
                    request.session['filters'] = 'memType='+mobo.memType+'&interface='+mobo.interface
            # mobo and memory
            elif mobo and mem and not (cpu or hdd):
                    request.session['filters'] = 'socket='+mobo.socket+'&interface='+mobo.interface
            # mobo and hd
            elif mobo and hdd and not (cpu or mem):
                    request.session['filters'] = 'socket='+mobo.socket+'&memType='+mobo.memType
            # cpu and mem
            elif cpu and mem and not (mobo or hdd):
                    request.session['filters'] = 'socket='+cpu.socket+'&memType='+mem.memType
            # cpu and hd
            elif cpu and hdd and not (mobo or mem):
                    request.session['filters'] = 'socket='+cpu.socket+'&interface='+hdd.interface
            # memory and hd
            elif mem and hdd and not (mobo or cpu):
                    request.session['filters'] = 'memType='+mem.memType+'&interface='+hdd.interface
            # mobo cpu and mem
            elif cpu and mobo and mem and not hdd:
                    request.session['filters'] = 'interface='+mobo.interface
            # mobo cpu and hd
            elif mobo and cpu and hdd and not mem:
                    request.session['filters'] = 'memType='+mobo.memType
            # mobo hd and mem
            elif mobo and mem and hdd and not cpu:
                    request.session['filters'] = 'socket='+mobo.socket
            # cpu mem and hd
            elif cpu and mem and hdd and not mobo:
                    request.session['filters'] = 'socket='+cpu.socket+'&memType='+mem.memType+'&interface='+hdd.interface
            # all parts
            else:
                    request.session['filters'] = '' 
```

哦，PartAdmin 的 changelist_view 函数确实发生了一些变化：

```
def changelist_view(self, request, extra_context=None):
    if ('filters' in request.session):
        q = request.GET.copy()
        for filter in request.session['filters'].split('&'):
            key, value = urllib.splitvalue(filter)
            # check if the request does not already use the filter
            # and that the model has the attribute to filter for
            if (not request.REQUEST.has_key(key)) and (key in self.list_filter):
                q[key] = value
        request.GET = q
        request.META['QUERY_STRING'] = request.GET.urlencode()
    return super(PartAdmin,self).changelist_view(request, extra_context=extra_context) 
```

# iis - Coldfusion 10，IIS 7.5 - 即使文件存在也得到 404

> ID：13993010
> 
> 赞同：20
> 
> 时间：2012-12-21T15:41:28.060
> 
> 标签：iis, coldfusion, http-status-code-404

即使该页面存在于磁盘上，我也会收到 404。

我已经运行了 Web 服务器配置工具并重新启动了几次。

.cfm 文件的处理程序映射（配置工具似乎有效）：C:\ColdFusion10\config\wsconfig\1\isapi_redirect.dll

虚拟路径：root/index.cfm <- 有效 root/dan.cfm <- 无效

服务器：Windows 2008 R2、IIS 7.5 和 Coldfusion 10

我的其余配置： ![桌面截图](../Images/5c72e508ae3ba492acb649ee5e58d4d9.png)

**更新 1**

/wsconfig/1 文件夹上的 NTFS 安全信息： ![在此处输入图像描述](../Images/7edd422254836d704ef75a0bfc0c133a.png)

**答案 - TLDR**

将名为“jakarta”的虚拟目录映射到 CFUSION INSTALL\config\wsconfig{instance id}

无需向文件夹添加 APPPool 权限...

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-21T20:22:51.357

右键单击该网站并将名为“jakarta”的映射虚拟目录添加到 C:\Coldfusion10\config\wsconfig{instance id} （在我的情况下，它是 \1 ）

# c - 使用和不使用 do ... while 的宏之间的区别

> ID：13993011
> 
> 赞同：1
> 
> 时间：2012-12-21T15:41:36.120
> 
> 标签：c

> **可能重复：**
> [C/C++ 宏中的 Do-While 和 if-else 语句](https://stackoverflow.com/questions/154136/do-while-and-if-else-statements-in-c-c-macros)

我有以下宏：

```
#define FREE1(x) do { free(x); x = NULL; } while (0)
#define FREE2(x) free(x); x = NULL 
```

这些宏有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:43:56.097

自己解决这个问题可能会更令人满意。

暗示：

```
if(y) FREE2(x); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T15:44:04.293

考虑以下示例

```
if (some_test) FREE2(x); 
```

扩展到

```
if (some_test)
    free(x);
x = NULL; // happens regardless of value of some_test 
```

# javascript - 为什么我的轮播不起作用？

> ID：13993018
> 
> 赞同：1
> 
> 时间：2012-12-21T15:41:55.437
> 
> 标签：javascript, jquery, html, carousel

我的旋转木马不会自动滑动。我只能点击我的图片。奇怪的是，有一次我可以发誓它确实有效。我只是不知道从那以后我可以改变什么。

这是我的代码：

```
 <div class="row-fluid">
    <div id="slider" class="span5" style="padding:15px;" >
    <div class="carousel slide" style="border:#fff 3px solid;" id="treatments">
    <div class="carousel-inner">

    <div class="item active">
    <img src="img/sliderpic1.jpg" alt="massage">
    </div>
    <div class="item">
    <img src="img/sliderpic2.jpg" alt="pedicure">
    </div>

    <div class="item">
    <img src="img/sliderpic3.jpg" alt="waxing">
    </div>
    </div>
    </div>
    <a href="#treatments" class="left carousel-control" data-slide="prev">&lsaquo;</a>
    <a href="#treatments" class="right carousel-control" data-slide="next">&raquo;</a>
    </div>
    <img src="img/logos.png" class="img-rounded">
    </div>

Then just before the close body tag:

    <script type="text/javascript">
    $('.carousel').carousel({
      interval: 1200
  });
    </script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/bootstrap.js"></script> 
```

提前感谢您的所有帮助，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:44:37.083

在包含 jQuery 之前，您正在设置轮播。交换`<script>`标签：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/bootstrap.js"></script>
<script type="text/javascript">
    $('.carousel').carousel({
        interval: 1200
    });
</script> 
```

# java - Java SWT 拖动对话框导致应用程序崩溃

> ID：13993019
> 
> 赞同：0
> 
> 时间：2012-12-21T15:41:56.857
> 
> 标签：java, dialog, swt

我有一个对话框，当单击按钮时会加载图像。本质上，当单击按钮时，它会打开按钮上显示的图像的较大版本。对话框打开并很好地显示图像，但是当我移动对话框时，它会留下痕迹，然后应用程序崩溃。我认为这与使用 SWTResourceManager 有关，因为如果我将新图像加载到应用程序中，而不是已经存在图像时，我只会遇到这个问题。

这是崩溃时给出的例外

```
java.lang.IllegalArgumentException: Argument not valid
at org.eclipse.swt.SWT.error(SWT.java:4263)
at org.eclipse.swt.SWT.error(SWT.java:4197)
at org.eclipse.swt.SWT.error(SWT.java:4168)
at org.eclipse.swt.graphics.GC.setFont(GC.java:4405)
at org.eclipse.swt.widgets.Composite.WM_PAINT(Composite.java:1514)
at org.eclipse.swt.widgets.Control.windowProc(Control.java:4585)
at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
at org.eclipse.swt.widgets.Display.windowProc(Display.java:4985)
at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2531)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3752)
at hm_Forms.Dialog_Animal_Photo.open(Dialog_Animal_Photo.java:43)
at hm_Forms.Frm_Animal$2.widgetSelected(Frm_Animal.java:145)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at hm_Forms.Frm_Animal.open(Frm_Animal.java:71)
at hm_Composites.Comp_Animal_List$3$1.widgetSelected(Comp_Animal_List.java:118)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at hm_Forms.Frm_Main.open(Frm_Main.java:76)
at hm_Forms.Frm_Main.main(Frm_Main.java:60) 
```

---将图像保存到应用程序的代码---

```
btnSave.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent e) {
            String path = txtPhotoPath.getText();
            if (CC_Files.fileExists(path)) {
                ArrayList<String> picTypes = new ArrayList<String>();
                picTypes.add(".jpg");
                picTypes.add(".png");
                picTypes.add(".gif");
                int t = 0;

                for(int i = 0; i < picTypes.size(); i++){
                    String s = picTypes.get(i);
                    if(path.contains(s.toUpperCase())){
                        t++;
                    }
                    if(path.contains(s.toLowerCase())){
                        t++;
                    }
                }
                if (t > 0) {
                    SWTResourceManager.dispose();
                    Image image = (Image) SWTResourceManager.getImage(path);
                    ImageData imgData = image.getImageData();
                    ImageLoader imageLoader = new ImageLoader();
                    imageLoader.data = new ImageData[] { imgData };
                    imageLoader.save(Variables.getStrResources()
                            + "Pics\\" + a.getHerd_id() + "a.jpg",
                            SWT.IMAGE_JPEG);

                    int intH = image.getBounds().height;
                    int intW = image.getBounds().width;
                    int h = (150 * intH) / intW;
                    int w = 150;
                    if (h > 150){
                        h = 150;
                        w = (150 * intW) / intH;
                    }
                    imgData = imgData.scaledTo(w, h);
                    imageLoader.data = new ImageData[] { imgData };
                    imageLoader.save(Variables.getStrResources()
                            + "Pics\\" + a.getHerd_id() + ".jpg",
                            SWT.IMAGE_JPEG);
                    image.dispose();

                    try {
                        Frm_Animal.setAnimalEditSC(Frm_Animal
                                .createAnimalComp(a));
                    } catch (Exception e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                }
            }
        }
    }); 
```

---Dialog_Animal_Photo 的代码---

```
package hm_Forms;

import hm.Animal;
import hm.Variables;

import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.CLabel;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Dialog;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.wb.swt.SWTResourceManager;

import CC_Library.CC_Files;

public class Dialog_Animal_Photo extends Dialog {

protected Object result;
protected Shell shell;

/**
 * Create the dialog.
 * @param parent
 * @param style
 */
public Dialog_Animal_Photo(Shell parent, int style, Animal a) {
    super(parent, SWT.DIALOG_TRIM);
    setText(a.getTag());
}

/**
 * Open the dialog.
 * @return the result
 */
public Object open(Animal a) {
    createContents(a);
    shell.open();
    shell.layout();
    Display display = getParent().getDisplay();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    return result;
}

/**
 * Create contents of the dialog.
 */
private void createContents(Animal a) {
    shell = new Shell(getParent(), SWT.SHELL_TRIM | SWT.BORDER |     SWT.APPLICATION_MODAL);

    shell.setText(getText());
    shell.setLayout(new GridLayout(1, false));

    CLabel lblPic = new CLabel(shell, SWT.NONE);
    lblPic.setLayoutData(new GridData(SWT.CENTER, SWT.FILL, true, true, 1, 1));
    lblPic.setText("");

    Image image = null;

    String strPic = Variables.getStrResources() + "Pics\\" + a.getHerd_id()
            + "a.jpg";
    //SWTResourceManager.dispose();
    if (CC_Files.fileExists(strPic)) {
        image = (Image) SWTResourceManager.getImage(strPic);
    } else {
        image = (Image) SWTResourceManager.getImage(Variables
                .getStrResources() + "black_cow.png");
    }
    //shell.setSize(500,500);
    shell.setSize(image.getBounds().width + 25,image.getBounds().height + 50);
    lblPic.setImage(image);
}
} 
```

---打开对话框的按钮代码---

```
Dialog_Animal_Photo dap = new Dialog_Animal_Photo(shell, SWT.NONE, a);
            dap.open(a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T22:50:28.360

由于您正在使用`SWTResourceManager`和调用`dispose()`，它被定义为：

```
public static void dispose() {
    disposeColors();
    disposeImages();
    disposeFonts();
    disposeCursors();
} 
```

这也将处理所有缓存`Font`的 s。

为了防止您看到的异常，不要调用`dispose()`，而是调用`disposeImages()`。

# ruby-on-rails - Rails ActiveRecord - 关联返回冗余行

> ID：13993024
> 
> 赞同：1
> 
> 时间：2012-12-21T15:42:19.290
> 
> 标签：ruby-on-rails, activerecord

我有我的 2 个模型：

```
class Machine < ActiveRecord::Base
  has_many :channels
  #...

class Channel < ActiveRecord::Base
  belongs_to :machine
  #... 
```

在机器中，如果我这样做

```
channels.each do |channel| 
```

我看到这些行以难以理解的顺序重复（甚至多次）。

这是怎么回事？有任何想法吗。对我来说，它确实看起来像一个 ActiveRecord 错误。

我在 PostgreSQL 上。导轨 3.0.3。

谢谢，奥兹

# string - 多个字符串之间的方案检查

> ID：13993030
> 
> 赞同：2
> 
> 时间：2012-12-21T15:42:29.803
> 
> 标签：string, scheme, compare, racket

为了让自己更熟悉方案接口，我尝试在 Racket 博士（尽管与 MIT 方案兼容）中编写一个程序，检查给定的各种不同字符串并根据提供的内容返回适当的字符串。我到目前为止是这样的：

```
(define (conversation input)
    (cond ((eq? (or "hello Racket" "hi Racket" "what's up, Racket?" 
    "hey Racket" "what's happening, Racket?") input) "hey coder")
      (else "no hablo ingles."))) 
```

*字符串之间的空间正好适合这里。这是解释器中的一个长语句。

想要的效果是，如果我输入：

```
(conversation "hello Racket")
(conversation "hi Racket")
(conversation "hey Racket") 
```

它们都将返回相同的结果，即“嘿 coder”。然而，事实并非如此。唯一返回“hey coder”的是（对话“hello Racket”）。其余的都返回“没有能力”。与该语言的许多其他方面一样，我对方案中的字符串不太了解。我相当确定问题出在 or 语句中，尽管我不知道在这种情况下可以使用的替代方案。我已经尝试查找解决方案，尽管我没有遇到任何符合这种描述的东西。有谁知道可以使用的代码的任何替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:02:55.967

`or`接受一个参数列表并检查它的任何参数是否是“真实的”（不是`#f`）。如果是这样，它会返回第一个真实的参数。如果不是，则返回`#f`. 所以`(or "string1" "string2" ...)`简单地返回“string1”。所以你要做的就是检查给定的字符串是否等于“hello Racket”并忽略其他选项（你可能会在这里反对它对“hello Racket”也不起作用——我会谈到的）。您要做的是为 提供全部条件`or`，而不仅仅是字符串。所以它应该看起来像`(or (eq? "string1" input) (eq? "string2" input) ...)`。

但是，这也不起作用。为什么不？因为`eq?`是用于比较字符串的错误函数。仅当两个字符串位于内存中的同一位置时，它才返回 true。如果两个字符串位于不同的内存位置，但内容相同，则返回`#f`. 这也是您当前代码返回`#f`“hello Racket”的原因。您应该使用的是`equal?`，它比较字符串的内容。

这现在应该可以工作了，但它有点笨拙 -`equal?`对每个可能的字符串重复调用。`member`更好的方法是使用有效字符串创建一个列表，然后使用该函数检查输入字符串是否包含在列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:46:13.467

您可以使用该[`member`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/private/list..rkt%29._member%29%29)过程和可能的选项列表来实现您想要的效果：

> `member`找到 lst 的第一个相等的元素？to v. 如果存在这样的元素，则返回从该元素开始的 lst 的尾部。否则，结果为#f。

这就是我的意思：

```
(define (conversation input)
  (cond ((member input '("hello Racket" "hi Racket" "what's up, Racket?"
                         "hey Racket" "what's happening, Racket?"))
         "hey coder")
        (else "no hablo ingles."))) 
```

# asp.net - 必填字段验证器的 java 脚本代码

> ID：13993031
> 
> 赞同：-1
> 
> 时间：2012-12-21T15:42:32.060
> 
> 标签：asp.net

请建议我如何编写 java 脚本代码来为文本框指定必填字段验证器，而不使用 asp.net 中的内置必需验证器功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:44:53.567

你可以尝试这样的事情：

```
function ValidateInput() {
            var validationMessage = "Your Txt is not valid";
            var isValid = true;
            if (document.getElementById('<%= txt.ClientID %>').value = '') {
                    // update the message
                    isValid = false;
                }
            if (!isValid)
                alert(validationMessage);
            return false;
        } 
```

# .net - 升级 ServiceStack 库后，Request DTO 属性填充已停止工作

> ID：13993032
> 
> 赞同：1
> 
> 时间：2012-12-21T15:42:34.017
> 
> 标签：.net, rest, servicestack

给定请求“foo?Bar=baz”，我们的 RequestResource 过去在资源的属性“Bar”中填充了值“baz”。

知道为什么这可能会损坏吗？ServiceStack 最近有什么重大变化吗？我们已从 3.9.17.0 升级到 3.9.32（在 .33 上也失败了）。干杯

编码：

```
[DataContract(Name = "Response")]
public class ItemsServiceResource
{
    public ItemsServiceResource()
    {
        PageInfo = new PageInfo
        {
            PageNumber = 1,
            PageSize = 100
        };

    }

    [DataMember]
    public int UserId { get; set; }

    [DataMember]
    public PageInfo PageInfo { get; set; }

    [DataMember]
    [JsonProperty]
    public List<Model.Item> Items { get; set; }

    // this is the property that comes now as null instead of being populated
    public string SearchTerm { get; set; } 
}

public class ItemsService : RestServiceBase<ItemsServiceResource>
{

    public override object OnGet(ItemsServiceResource request)
    {
        //do work
    }
} 
```

端点注册是：

```
public class AppHost
{
    public AppHost()
        : base("blah Host") {}

    public override void Configure(Funq.Container container)
    {
        Routes
            .Add<ItemsServiceResource>("/user/{userId}/items/")
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:26:49.120

@demisbellot 刚刚在[邮件列表](https://groups.google.com/forum/?fromgroups=#!topic/servicestack/-C5cdZ4aHoQ)中回复了我们，他的猜测是正确的：我们缺少 SearchTearm 属性上的 [DataMember] 属性。

显然，这已成为最新版本的 ServiceStack 的选择加入。

# perl - 在 perl 中学习 HTML::Template 需要治愈

> ID：13993033
> 
> 赞同：0
> 
> 时间：2012-12-21T15:42:34.033
> 
> 标签：perl

我也想学习 Perl 的 HTML::Template 特性和编程语言 Perl。有人能给我推荐一本好书吗？我能够获得“Perl for Dummies”，但有一件事它没有 HTML::Templates。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:47:16.260

我不知道任何讨论 HTML::Template 的书籍。我建议 Template Toolkit 可能是一个更好的选择，甚至有一本书专门介绍它。

[http://template-toolkit.org/](http://template-toolkit.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:49:18.133

我会尝试一些教程而不是一本书，这里有几个相当不错的一目了然：

很好的解释：[http ://html-template.sourceforge.net/article.html](http://html-template.sourceforge.net/article.html)

很多例子：[http ://www.perlmonks.org/?node_id=65642](http://www.perlmonks.org/?node_id=65642)

正如 Jonah Bishop 所说，这对 SO 来说不是一个好问题，因为没有明确的答案。祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T16:01:05.850

HTML::Template [CPAN 文档](http://search.cpan.org/dist/HTML-Template/lib/HTML/Template.pm)和[CPAN 常见问题解答](http://search.cpan.org/~wonko/HTML-Template/lib/HTML/Template/FAQ.pm)几乎涵盖了它，以及此处其他答案中提到的教程。

但是，在您了解 Perl 的基础知识之前，所有这些都没有多大意义——请查看 O'Reilly 的书籍。还有[*Modern Perl*](http://www.onyxneon.com/books/modern_perl/index.html)，可作为纸质书或（免费）pdf 下载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:46:23.803

请注意，这个问题可能不适合 SO。就是说，我不知道有什么书在我脑海中包含`HTML::Template`讨论。您必须参考模块文档。

*学习 Perl*书（O'Reilly 系列之一）是学习 Perl 的绝佳方式。它实际上是我们在大学时代带回的 Perl 课程中使用的教科书。我强烈推荐它来概述语言。

# windows-rt - 还有其他方法可以为 Surface RT 编写应用程序而不是 Windows Store 应用程序吗？

> ID：13993034
> 
> 赞同：2
> 
> 时间：2012-12-21T15:42:42.277
> 
> 标签：windows-rt

是否可以编写一个控制台 EXE 应用程序，如“你好，世界！” 用于 Surface RT？

我认为为 ARM 编译它就足够了，但似乎没有这样的编译选项。

我安装了 Office 2013 RT 并找到了 Excel.exe。那我也可以写这样的EXE吗？

如果 Surface RT 只允许 Windows 应用商店应用程序，为什么要提供“桌面”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:51:06.247

不，这是不允许的。桌面模式存在的原因很可能是您可以在 RT 设备上使用 Office。但除此之外，他们会锁定设备，因此您无法执行所有可能会破坏 RT 设备性能和电池的疯狂 Win32 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:50:47.633

您还可以编写复杂的 HTML 网站，其行为类似于这样的应用程序：[https](https://www.pulse.me/) : //www.pulse.me/ IE10 中的网站可以

1.  有一个快照模式
2.  有一块大瓷砖
3.  有一个徽章编号指示器

[http://www.buildmypinnedsite.com/](http://www.buildmypinnedsite.com/)了解更多详情。

# javascript - 页面/视图背景不模糊

> ID：13993037
> 
> 赞同：2
> 
> 时间：2012-12-21T15:43:02.680
> 
> 标签：javascript, jquery

我的视图中有一个链接，当用户单击该链接时，将执行以下 JS 文件。我要做的是在对话框打开时禁用或模糊背景。我知道有特定的插件，例如 BlockUI，但我看到了这个例子[http://jsfiddle.net/tctc2/105/](http://jsfiddle.net/tctc2/105/)它工作正常。我使用了相同的逻辑，但我的页面背景并没有模糊。

**对话框的JS文件：**

```
var RunDialog;

$(document).ready(function () {

    RunDialog = $("#runDatestreeview").dialog({ resizable: false, autoopen: false, height: 140, modal: true, width: 630, height: 400,
        buttons: { "Continue": function () {
            $.post("/RunLogEntry/Create", $("#form").serialize(), function (json) {

            }, "json");
        },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    $('#RunDatesChildDialogLink').click(function () {
        RunDialog.dialog('open');
        $("#runDatestreeview").parent().appendTo("form");
        return false;
    });

    $("#runDatestreeview").parent().appendTo("form");

}); 
```

**看法：**

有问题的 div 是：runDatestreeview，打开此对话框的链接就在它的正上方，如下所示：

```
<fieldset>
    <legend>Enter a new Run Log Entry</legend>
    @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data" }))
    {

        @*<div id="test">*@
            @Html.ValidationSummary(true)
            <div class="exception">@(ViewBag.ErrorMessage)</div>
            <div class="bodyContent">
                <span class="leftContent">Load List File (Select): </span><span class="rightContent">
                    <input type="file" name="file" id="file1" style="width: 500px" />
                </span>
            </div>
            if (Model.LoadListStoredFileName != null) {
            <div class="bodyContent">
                <span class="leftContent">Attached Load List: </span><span class="rightContent">
                    @Html.ActionLink(Model.LoadListFileName, "Download", new { @file = Model.LoadListStoredFileName })
                </span>
            </div>
            }
            <div class="bodyContent">
                <span class="leftContent">Output File (Select): </span><span class="rightContent">
                    <input type="file" name="file" id="file2" style="width: 500px" />
                </span>
            </div>
            if (Model.OutputStoredFileName != null) {
            <div class="bodyContent">
                <span class="leftContent">Attached Output: </span><span class="rightContent">
                    @Html.ActionLink(Model.OutputFileName, "Download", new { @file = Model.OutputStoredFileName })
                </span>
            </div>
            }
            <div class="bodyContent">
                <span class="leftContent">.LOG File(s) -Zip: </span><span class="rightContent">
                    <input type="file" name="file" id="file3" style="width: 500px" />
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">Import Files: </span>
                <button name="submit" class="art-button" type="submit" value="Upload" style="width: 100px">
                    Upload</button>
                <button name="submit" class="art-button" type="submit" value="Remove" style="width: 100px">
                    Remove</button>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Operator")
                </span><span class="rightContent">
                    @Html.DropDownList("OperatorID", String.Empty)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run ID")
                </span><span class="rightContent">[Generated] </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run Start Date / Time")
                </span><span class="rightContent">
                    @Html.EditorFor(model => model.RunDate)
                    &nbsp;
                    @Html.DropDownList("Hour", ListHelpers.HourList())
                    :
                    @Html.DropDownList("Minute", ListHelpers.Minute15List())
                    &nbsp;
                    @Html.DropDownList("AMPM", ListHelpers.AMPMList())
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("System")
                </span><span class="rightContent">
                    @Html.DropDownList("SystemID", String.Empty)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run Type")
                </span><span class="rightContent">
                    @Html.DropDownList("RunTypeID", String.Empty)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run Description")
                </span><span class="rightContent">
                    @Html.TextAreaFor(model => model.RunDescription, new { style = "width: 600px; height=30px" })
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Assay Performance Issues")
                </span><span class="rightContent">
                    @Html.DropDownList("AssayPerformanceIssues1", ListHelpers.YesNoList())
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Tests/Cycles Requested")
                </span><span class="rightContent">
                    @Html.EditorFor(model => model.SPTestsRequested)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Tests/Cycles Completed")
                </span><span class="rightContent">
                    @Html.EditorFor(model => model.SPTestsCompleted)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run Status")
                </span><span class="rightContent">
                    @Html.DropDownList("RunStatusID", String.Empty)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Assay")
                </span><span class="rightContent">
                    @Html.ListBoxFor(model => model.SelectedAssayIDs, new MultiSelectList(RunLog.Domain.Lists.GlobalList.AssayListItems(), "ID", "Name", Model.SelectedAssayIDs))
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Error Code")
                </span><span class="rightContent"><span id="ChildDialogLink" class="treeViewLink">Click
                    here to Select Error Codes</span>
                    <br />
                    <span id="ErrorCodeDisplay" style="cursor: pointer; text-decoration: underline;">@(Model.ErrorDescription)</span>
                    @Html.HiddenFor(model => model.ErrorDescription)
                </span>
            </div>
            <div class="bodyContent">
                @if (Model.TestExceptionDisplay != null && Model.TestExceptionDisplay.Count() > 0)
                {
                    <span class="leftContent">
                        @Html.Label("Test Exceptions")
                    </span><span class="rightContent"><span id="TestExceptionChildDialogLink" class="treeViewLink">
                        Click here to View Test Exceptions</span>
                        <br />
                        <span id="TestExceptionDisplayy"></span></span>
                }
            </div>
            <div id="testExceptiontreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
                overflow: scroll; width: 800px; height: 450px; display: none;">
                <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
                    <thead>
                        <tr>
                            <th>
                                Exception
                            </th>
                            <th>
                                Frequency
                            </th>
                            <th>
                                Comment
                            </th>
                            <th>
                                Replicate Range
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.TestExceptionDisplay != null)
                        {
                            @Html.EditorFor(x => x.TestExceptionDisplay)
                        }
                    </tbody>
                </table>
            </div>
            @*test div end here*@
        @*</div>*@
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Dates")
            </span><span class="rightContent"><span id="RunDatesChildDialogLink" class="treeViewLink">
                Click here to Select Run Dates</span>
                <br />
                <span id="RunDatesDisplayy"></span></span>
        </div>
        <div id="runDatestreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
            overflow: scroll; width: 800px; height: 450px; display: none;">
            <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
                <thead>
                    <tr>
                        <th>
                            Run Dates:
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @Html.EditorFor(x => x.RunDatesDisplay)
                </tbody>
            </table>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Service Entry Request")
            </span><span class="rightContent">
                @Html.DropDownList("ServiceRequest", ListHelpers.YesNoList())
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Problem Description")
            </span><span class="rightContent">
                @Html.TextArea("ProblemDescription", new { style = "width: 600px; height: 30px" })
            </span>
        </div>
           if (Model.UserRole == "Admin" || Model.UserRole == "SuperUser")
           {
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Active")
            </span><span class="rightContent">
                @Html.CheckBoxFor(model => model.Active)
            </span>
        </div>
           }
           else
           {
        @Html.HiddenFor(model => model.Active)
           }
        <p>
            <input id="LogType" type="hidden" value="Run" />
            <input id="ID" type="hidden" value="0" />
            @if (Model.ExitCode == "1")
            {
                @Html.Hidden("ExitCode", Model.ExitCode)
            }
            else
            {
                <input id="ExitCode" type="hidden" value='0' />
            }
        </p>
        @Html.HiddenFor(model => model.MaxReplicateId)
        @Html.HiddenFor(model => model.MinReplicateId)
        @Html.HiddenFor(model => model.OutputFileName)
        @Html.HiddenFor(model => model.OutputStoredFileName)
        @Html.HiddenFor(model => model.LoadListFileName)
        @Html.HiddenFor(model => model.LoadListStoredFileName)
        @Html.HiddenFor(model => model.MinTestCompletionDate)
        @Html.HiddenFor(model => model.MaxTestCompletionDate)
        @Html.HiddenFor(model => model.UserRole)
        @Html.HiddenFor(model => model.Active)
        @Html.HiddenFor(model => model.ReplicateBlocksConfirmation)
        <div class="bodyContent">
            <span class="leftContent"></span><span class="rightContent">
                <button id="submit" name="submit" class="art-button" type="submit" value="Create">
                    Create</button></span>
        </div>

    }
</fieldset>
<script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script>
<div id="treeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px;">
    <div id="errorCodes">
        @Html.RenderTree(CacheHelper.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "e")
        @* @Html.RenderTree(RunLog.Domain.Lists.GlobalList.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "e")

  *@
    </div>
    <div id="inputReps" style="display: none;">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:19:13.323

好的，所以我设法让您的代码按预期工作。先说几件事。

您在[http://jsfiddle.net/tctc2/105/](http://jsfiddle.net/tctc2/105/)上展示的示例使用了非常旧的 jQuery 版本（1.6.3）。这意味着示例显示的方法和操作将与较新的 jQuery 版本不兼容。您可以通过将 jQuery 库更改为版本 1.8.2 并尝试运行示例来看到这一点。**它失败。**

但是，使用那个确切的环境，您提供的 javascript 代码仍然无法工作。下面的更改（以及在[jsFiddle 链接](http://jsfiddle.net/5S7CU/1/)处）将按照您的预期进行：

```
$(document).ready(function() {

   var RunDialog = $("#runDatestreeview").dialog({
        resizable: false,
        autoOpen: false,
        height: 200,
        modal: true,
        width: 630,
        buttons: {
            "Continue": function() {
                $.post("/echo/json/", $("#form").serialize(), function(json) {

                }, "json");
            },
            "Cancel": function() {
                $(this).dialog("close");
            }
        }
    });

    $('#RunDatesChildDialogLink').click(function() {
        RunDialog.dialog('open');
        $("#runDatestreeview").parent().appendTo("form");
        return false;
    });

    $("#runDatestreeview").parent().appendTo("form");

}); 
```

我对变量`RunDialog`,`autoOpen`属性所做的更改必须正确驼峰式，否则 jQuery 将无法理解该属性。

同样，这仅适用于 V 1.6.3 和 jQuery UI 1.8.16 的 jQuery 环境。如果您希望使用最新的 jQuery 库，则需要重写代码以与较新的版本兼容。

# xcode - xcode 4：如何从更多标签栏保存用户更改

> ID：13993039
> 
> 赞同：0
> 
> 时间：2012-12-21T15:43:06.483
> 
> 标签：xcode, xcode4.5, tabbar, savechanges

> **可能重复：**
> [如何：在 UITabBarController 中自定义选项卡时保存选项卡顺序](https://stackoverflow.com/questions/2034183/how-to-save-order-of-tabs-when-customizing-tabs-in-uitabbarcontroller)

我想这样做，以便在标签栏应用程序上，如果有人更改了底部标签的顺序（例如，将一个从“更多”部分移动到底部的主要部分），则更改保存并且当您关闭时按照用户放置的方式重新打开应用程序。

我什至没有任何代码可以告诉你我在哪里，因为到目前为止，没有任何代码尝试过这个，因为我不知道如何去做。我在编程方面非常基础（我只有 15 岁），所以非常感谢详细的说明！:)

谢谢！

# multithreading - 您如何检测到已设置 TEvent？

> ID：13993041
> 
> 赞同：10
> 
> 时间：2012-12-21T15:43:11.760
> 
> 标签：multithreading, delphi

Delphi XE2 文档对 TEvent 进行了说明：

> 有时，您需要等待线程完成某些操作，而不是等待特定线程完成执行。为此，请使用事件对象。事件对象 (System.SyncObjs.TEvent) 应该在全局范围内创建，以便它们可以像信号一样对所有线程可见。
> 
> 当一个线程完成其他线程所依赖的操作时，它会调用 TEvent.SetEvent。SetEvent 打开信号，因此任何其他检查的线程都将知道操作已完成。要关闭信号，请使用 ResetEvent 方法。
> 
> 例如，考虑一种情况，您必须等待多个线程而不是单个线程完成它们的执行。因为您不知道哪个线程将最后完成，所以您不能简单地使用其中一个线程的 WaitFor 方法。相反，您可以让每个线程在完成时增加一个计数器，并让最后一个线程通过设置事件发出信号表明它们都已完成。

但是，Delphi 文档没有解释另一个线程如何检测到调用了 TEvent.Set 事件。您能否解释一下如何检查是否调用了 TEvent.Set ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T16:00:18.640

如果要测试是否有事件发出信号，请调用该[`WaitFor`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SyncObjs.THandleObject.WaitFor)方法并传递超时值 0。如果设置了事件，它将返回`wrSignaled`。如果不是，它将立即超时并返回`wrTimeout`。

话虽如此，事件的正常使用不是检查它是否以这种方式发出信号，而是通过阻塞当前线程直到事件发出信号来进行同步。您可以通过将一个非零值传递给 timeout 参数来执行此操作，`INFINITE`如果您确定它会完成并且您想等到它完成，则可以是常量，或者如果您不想无限期阻塞，则可以使用较小的值的时间。

# java - Java 浮点数不能正确运行

> ID：13993042
> 
> 赞同：1
> 
> 时间：2012-12-21T15:43:21.240
> 
> 标签：java

> **可能重复：**
> [为什么 (360 / 24) / 60 = 0 … 在 Java 中](https://stackoverflow.com/questions/2475652/why-does-360-24-60-0-in-java)

我有这个问题：

```
float rate= (115/100); 
```

当我做：

```
System.out.println(rate); 
```

它给了我 1.0 什么...有问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T15:44:18.463

115 和 100 都是整数，所以会返回一个整数。

尝试这样做：

```
float rate = (115f / 100f); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:44:09.977

您正在执行整数除法（提供整数结果），然后将其存储在浮点数中。

您需要在操作中至少使用一个浮点数才能使结果成为正确的类型：

```
float rate = 115f / 100; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:45:20.270

```
float rate= (115/100); 
```

做以下事情：

`115`1)对其进行整数除法`100`得到值 1。
2) 将步骤 1) 的结果转换为浮点数。这产生值 1.0

你想要的是这样的：

```
float rate = 115.0/100; 
```

或更一般地说，您想将除法的一部分转换为浮点数，无论是通过强制转换 (float)115/100 还是通过将小数点附加到两部分之一，或者这样做`float rate = 115f / 100`完全取决于您并产生相同的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T15:48:49.130

为了使用整数执行浮点运算，您需要将至少一个操作数转换为 a `float`。

例子：

```
int a = 115;
int b = 100;
float rate = ((float)a)/b; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T15:43:52.810

`float rate= (float)(115.0/100);`改为使用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T16:09:20.560

放就够了`float rate = 115f / 100;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T15:49:24.543

# eclipse - Maven 自动清理包

> ID：13993045
> 
> 赞同：5
> 
> 时间：2012-12-21T15:43:32.810
> 
> 标签：eclipse, maven, initialization, package, m2eclipse

每次运行 mvn 包时，我在尝试自动清理时遇到了一些麻烦。我在 POM 中添加了：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-clean-plugin</artifactId>
            <version>2.5</version>
            <executions>
                <execution>
                    <id>auto-clean</id>
                    <phase>initialize</phase>
                    <goals>
                        <goal>clean</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        ...
    </plugins>
    ...
</build> 
```

但我从 M2Eclipse 收到以下错误：

> 生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven-clean-plugin:2.5:clean（执行：自动清理，阶段：初始化）

我尝试过其他阶段，例如“验证”或“生成资源”，但我总是遇到同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:38:23.757

这不是 Maven 问题，而是 m2eclipse。好久没用了，不过显然在添加一些插件执行的时候，还得给m2eclipse添加额外的配置。[在 Eclipse wiki 上有一个关于这个错误](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)的冗长描述。

# java - 发生整数溢出时无符号整数和有符号整数的行为差异

> ID：13993047
> 
> 赞同：4
> 
> 时间：2012-12-21T15:43:49.763
> 
> 标签：java, c++, c, programming-languages

在维基百科上阅读这篇关于[整数溢出的文章](http://en.wikipedia.org/wiki/Integer_overflow)

我不太明白为什么有符号整数的溢出会导致未定义的行为，但无符号整数的溢出会导致环绕。为什么它们的行为会有所不同？

另一个问题：编程语言一般有防止整数溢出的保护措施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:28:34.827

差异的主要理由是 C 和 C++ 语言规范允许实现使用以下三种不同的有符号整数表示之一

1.  1 的补码
2.  2 的补码
3.  有符号的幅度

如果语言规范在有符号溢出的情况下要求某些特定行为（即，在其他两种情况下更倾向于上述表示之一），它将强制基于两种非优先表示的平台实现“重”有符号整数运算。这将变得有必要，因为此类平台的自然机器级行为与语言标准所要求的行为不匹配。这些实现必须不断观察签名溢出并调整结果以符合标准要求。

这将严重降低使用不受欢迎的有符号表示的平台上的有符号整数算术的性能，当然，这在 C 和 C++ 等语言中是完全不可接受的，这些语言在设计时尽可能接近底层硬件。它涉及整数算术等基本运算。

行为*未定义*（与“未指定”相反）的原因是，有些平台会在整数运算过程中出现有符号溢出时故意生成硬件异常。请注意，该行为仅适用于算术运算，通常是由机器执行。对于值转换，有符号溢出不会产生未定义的行为（该行为实际上是实现定义的）。

至于无符号类型，它们在所有平台上都以相同的方式表示，这意味着要求在所有平台上保持一致的行为不是问题。在概念上匹配“模 2^width”行为的环绕是几乎所有已知二进制硬件平台上的自然行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:46:01.050

1.  因为这就是语言的定义方式。它允许在更多种类的硬件上更容易地开发符合要求的实现（例如，具有饱和算法的 DSP）。

2.  取决于语言。某些*硬件*可以，您也许可以在您的程序中利用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:20:05.403

整数溢出的 C/C++ 方法是提供在您正在使用的机器上最快的行为，所以在某些机器上（这里假设 16 位有符号整数）：

32766 + 2 == -32768

但在某些机器上是：

32766 + 2 == 32767

对于其他机器，您可以设置陷阱值或 CPU 将执行的任何操作。

注意 Java 完美定义了整数溢出，实现“一次编写，到处运行”。

至于无符号整数——它们的大多数应用程序是位掩码、位域和数字操作（模运算、标识符）——正是你没有定义它们的操作。

有些编程语言有这样的安全措施，有些则没有：

*   Python 3 自动将溢出的值转换为 long 类型（任意大的整数）。

*   在 C/C++ 中，您必须自己检查溢出条件，climits (C) 和 limits (C++) 标头为每种类型定义了最大值和最小值。

*   在 x86 汇编中编程 - 在 FLAGS 和 EFLAGS 寄存器中有 CF（进位标志）用于无符号和 OF（溢出标志）用于检查何时发生溢出。

许多语言还具有任意精度类型，以防您想避免溢出，但操作速度较慢，因为此类变量（理论上）可以与您的内存一样大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:55:03.163

在 Java 中，您只有 unsigned`int`和`long`值，并且无论您在何处运行，它们的行为都是一致的。如果你在 Integer.MAX_VALUE 上加 1，你赌 Integer.MIN_VALUE（它会换行），如果你从 Long.MIN_VALUE 中减去 1，你会得到 Long.MAX_VALUE。

所以我不知道为什么无符号值的行为在其他语言中是未定义的。

# php - AJAX 长轮询不适用于 IE

> ID：13993056
> 
> 赞同：1
> 
> 时间：2012-12-21T15:44:37.380
> 
> 标签：php, javascript, jquery, ajax, long-polling

我似乎遇到了长轮询和 IE 的问题。这是我第一次尝试长轮询，所以我设置了一个简单的测试，看看我是否可以让它工作。它似乎在 FF 和 Chrome 上表现得很好，但我在 IE 上得到了不同的结果。

首先，这里有一些代码：

**HTML/Javascript：**

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.2.min.js"></script>
<script type="text/javascript">
//<![CDATA[
$(document).ready(function()
{
    (function poll()
    {
        $.ajax({
            url: 'events/alert-data.php',
            success: function (e)
            {
                $('#results').append($('<div>Success: ' + e.text + '</div>').fadeIn(1000));
            },
            error: function (e)
            {
                console.log(e);
            },
            dataType: 'json',
            complete: poll,
            timeout: 10000
        });
    })();
});
//]]>
</script>
</head>

<body>
<div id="results">hello</div>
</body>
</html> 
```

**PHP：**

```
<?php

$time = time();

while (time() - $time < 5) { }

echo json_encode(array('text' => time()));

?> 
```

在 FF/Chrome 中，我看到了预期的数据：

```
hello
Success: 1356104196
Success: 1356104201
Success: 1356104217
Success: 1356104222
Success: 1356104227 
```

`Success`但在 IE 中，它会无限重复第一行。至少我认为它是无限的，因为它会锁定浏览器并且不允许我滚动。

我不确定我做错了什么。任何帮助将非常感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:05:45.947

IE 的问题似乎是缓存的结果，可能是 IE 本身造成的。这可能发生在任何浏览器中。

尝试添加：

```
cache: false 
```

到 ajax 选项。

# apache - Apache将子域重定向到文件夹，将文件夹作为子域处理

> ID：13993059
> 
> 赞同：2
> 
> 时间：2012-12-21T15:44:50.593
> 
> 标签：apache, .htaccess, mod-rewrite, seo, subdomain

它可能看起来很复杂，但我需要更改现有网站的结构以使其对 seo 更友好。当前结构是面向子域的。

例如：**sub** .example.com/page/var/var2/...

我需要合并同一顶级域下的所有子站点。

例如：www.example.com/ **sub** /page/var/var2/...

这部分已经为我工作了：

```
# If empty subdomain, redirect to "www"
RewriteCond     %{HTTP_HOST} ^example.com$ 
RewriteRule     ^(.*) http://www.example.com/$1 [QSA,L,R=301]

# If not empty subdomain and not "www", redirect to directory
RewriteCond %{HTTP_HOST} !^www\.example\.com
RewriteCond %{HTTP_HOST} ^(.*)\.example\.com$
RewriteRule (.*) http://www.example.com/%1/$1 [QSA,R=301] 
```

显然，由于该文件夹不存在，我收到“未找到”错误。

这是我试图达到的行为：

在地址栏中，显示

*www.example.com/sub/page/var/var2 **/** ...*

但将其无缝处理为

***子**.example.com/page/var/var2/...*

对 htaccess 有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T04:25:14.287

[http://www.website.com/page.html](http://www.website.com/page.html)

RewriteEngine On RewriteCond %{HTTP_HOST} !oldexample.com$ [NC] RewriteRule ^(.*)$ [http://www.newexample.com/](http://www.newexample.com/) $1 [L,R=301] 同一顶级域下的所有子站点.

# javascript - 动态添加新的 jQuery 滑块会导致旧滑块无法正常工作。

> ID：13993065
> 
> 赞同：4
> 
> 时间：2012-12-21T15:45:12.123
> 
> 标签：javascript, jquery, jquery-ui

这是我的代码：

```
 newS = "#newS_"+g; //g is a unique number from an id
    document.getElementById('finderScroll').innerHTML +='<div id="newS_'+g+'"></div>'
       $(newS).slider({
              range: true,
              min: 0,
              max: 500,
              values: [ 75, 300 ],
              slide: function( event, ui ) {
              console.log( ui.values[ 0 ] + ui.values[ 1 ] );
                 }
              }); 
```

每个新滑块都有效，但是当我添加另一个滑块时，以前的滑块不再起作用。即使每个滑块的所有内容都是独一无二的，它也会导致它不再可拖动。有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:48:04.003

通过更新`innerHTML`，您基本上可以让浏览器从头开始重建您的 DOM。改为使用`appendChild`，这将保留附加到现有元素的事件处理程序和数据。

事实上，我不明白为什么你不能这样写：

```
$('#finderScroll').append($('<div>').attr('id', 'newS_' + g)); 
```

...因为您已经使用 jQuery。另外，我建议也重写 assigner 块：您不需要遍历 DOM 来寻找创建的元素（带有`$(newsG)`），因为您可以这样写：

```
$('<div>').attr('id', 'news_' + g).slider({ ... })
    .appendTo($('#finderScroll')); 
```

# jquery - 带有图像bg的jquery视差滚动

> ID：13993068
> 
> 赞同：0
> 
> 时间：2012-12-21T15:45:35.770
> 
> 标签：jquery, html, css, scroll, parallax

我制作了一个带有背景和固定 div 大小的视差页面。我使用 jquery 修复图像的高度和宽度以进行筛选。但是大多数视差插件对我不起作用:(

> 我正在尝试做这样的事情：[http ://www.spotify.com/int/](http://www.spotify.com/int/)
> 
> 这是我的工作：http: [//jsfiddle.net/Ybv7n/7/](http://jsfiddle.net/Ybv7n/7/)

这是我的 html 的样子。

```
<div class="mainDiv">
    <div id="par1" class="par1 par"><div></div></div>
    <div id="sec1" class="sec1 sec">
        aaaa
    </div>
    <div id="par2" class="par2 par" par><div></div></div>
    <div id="sec2" class="sec2 sec">
        aaa
    </div>
</div> 
```

我需要图像的重要部分适合屏幕。滚动时，它们可能会上升一点。我什么都试过了:(

# asp.net - 在远程服务器中使用 ASMX webservice

> ID：13993071
> 
> 赞同：0
> 
> 时间：2012-12-21T15:45:47.050
> 
> 标签：asp.net, web-services, asmx

我将使用 Web 服务发送 SMS，我在本地系统（VS2010，ASP.NET）中制作了一个小型测试应用程序，它运行良好，但现在我要将此 Web 服务集成到我的远程服务器中，我对在远程服务器上使用此服务感到困惑，我不知道应该将什么以及应该复制到我的服务器的位置？还有我应该如何更改我的 web.config 和/或其他文件以支持此 Web 服务，这就是我在本地应用程序中使用它的方式：

```
com.panelesms.www.Send s = new com.panelesms.www.Send();
long[] rec = null;
byte[] status = null;
string[] to = new string[1];
to[0] = "mynumber";

int returnValue = s.SendSms("username", "pass", to, "sendernumber", "text", false, "", ref rec, ref status); 
```

但是在远程服务器上未检测到 com.panelesms.www.Send，我想我遗漏了一些东西，例如在 web.config 中进行更改，或者将一些文件复制到服务器以便可以使用 com.panelesms.www.Send作为有效类型，这是我的服务地址： http: [//www.panelesms.com/Post/Send.asmx](http://www.panelesms.com/Post/Send.asmx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:44:46.673

您可以将 web.config 文件中的 Web 服务代理地址更改为指向服务[http://www.panelesms.com/Post/Send.asmx](http://www.panelesms.com/Post/Send.asmx)。

如果您要在外部公开它，请花时间保护您的服务

# java - 如何检查某个事件经过了多少毫秒（java）

> ID：13993076
> 
> 赞同：4
> 
> 时间：2012-12-21T15:45:56.877
> 
> 标签：java, multithreading

> **可能重复：**
> [以毫秒为单位计算时间差](https://stackoverflow.com/questions/9707938/calculating-time-difference-in-milliseconds)

我如何检查java中某个事件经过了多少毫秒？例如：

```
Want to start timer here<<
   function doSomething()
   .
   .
Want to finish timer here<< 
```

我想检查经过了多少毫秒。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T15:47:14.560

```
System.nanoTime() 
```

并将起始值与结束值进行比较。这是[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29)。

> 返回最精确的可用系统计时器的当前值，以纳秒为单位。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T15:47:07.703

```
long startTime = System.currentTimeMillis();

DoStuff();

long endTime = System.currentTimeMillis();

long millis = endTime - startTime; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T15:47:46.157

您可以`System.nanotime()`在操作之前和之后使用，然后减去这些值并除以 1e6 以获得以毫秒为单位的时间。

# sql - 两个主键引用一个外键

> ID：13993079
> 
> 赞同：1
> 
> 时间：2012-12-21T15:46:17.597
> 
> 标签：sql, database, oracle, foreign-keys, foreign-key-relationship

在我们的数据库系统中，我们有学生和人事字段。他们有 PersonnelCardId 和 StudentCardId，我们将它们设为主键。然后我们有一个持有 cardID 的支付设备，我们声明它是一个外键。在这种情况下我们无法插入一行，经过研究我们了解到我们不能将两个主键引用到一个外键。那么我们该如何解决这种情况呢？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:55:43.477

正如您所说，外键不能同时引用两个不同的表。使用您当前的架构，`cardID`外键只能引用`PersonnelCardId`或`StudentCardId`...

如果我理解正确，您的架构类似于：

```
PersonnelCard
----------------
PersonnelCardID - PK
PersonnelCardFields

StudentCard
----------------
StudentCardID - PK
StudentCardFields

PaymentDevice
----------------
PaymentDeviceID - PK
CardID - FK 
```

要解决这个问题，您必须找到一种方法来组合`PersonnelCard`和`StudentCard`表......

```
Card
----------------
CardID - PK
CardType - (Personnel or Student)
CardFields 
```

表上的 FK`PaymentDevice`现在可以引用新`Card`表中的 PK。

# ubuntu - 上传大于 10mb 的文件时出现“连接中断”

> ID：13993083
> 
> 赞同：0
> 
> 时间：2012-12-21T15:46:42.277
> 
> 标签：ubuntu, file-upload, nginx, php

我有一个允许用户将文件上传到服务器的应用程序（html 表单）。当文件大于 10mb 时，它会直接将用户踢到“连接中断”页面。

服务器设置如下：

*   Ubuntu Mavrick
*   Nginx 0.8.54
*   PHP (FPM) 5.3.5
*   Zend v2.3.0

在 php.ini （对于 fpm 和 php 正确）下，最大上传大小和 post-max 设置为 20mb。表单字段的最大文件大小为 200000000

关于这可能是什么的任何想法？这是一个nginx的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:50:59.647

在 nginx 服务器配置中输入：

```
client_max_body_size 20m; 
```

# objective-c - 如何最好地使用 remoteIO 核心音频构建程序

> ID：13993084
> 
> 赞同：0
> 
> 时间：2012-12-21T15:46:44.837
> 
> 标签：objective-c, ios, xcode, core-audio

我正在编写一个有两个视图控制器的程序。一个视图控制器配置通过 remoteIO audioUnit 播放的声音。另一个视图控制器从麦克风接收音频，处理该音频并显示与从麦克风接收的声音相关的信息。两个视图控制器都需要使用相同的音频图。我使用 Apple 的 AurioTouch2 示例来指导我的代码，但是该程序将大部分代码放在应用程序委托（和一个帮助程序类）中，包括设置音频图和传入和传出音频的回调。这似乎在应用程序委托中放置了不必要的代码。构建我的应用程序的最佳实践是什么？音频单元应该设置在哪里？将音频发送到音频单元的回调应该在哪里？接收到的音频应该在哪里回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:35:05.533

由于 iOS 应用程序只有一个 RemoteIO 音频单元可用，因此单例控制器对象可能是集中定位与该音频单元相关的所有代码的好地方。应用程序委托加上可能的帮助对象或类的组合可以在小型简单应用程序中充当此单例控制器的代理。但在较大的应用程序中，使用单独的音频控制器类可能会更好。某种模型类可能适合封装任何音频状态数据（波形数据等）

对音频控制器对象或数据模型对象的引用可以传递给需要控制或访问音频的任何其他视图控制器。这将适合组合光（UIViews）和声音（音频单元）的 MVC 模式。

请注意，音频单元 API 是一个 C API，因此使用全局可见的 C 子例程和状态也是可能的（例如，一些不与任何类关联的 .c 文件）。

# javascript - 如何找出点击事件被捕获的位置？

> ID：13993087
> 
> 赞同：2
> 
> 时间：2012-12-21T15:46:52.573
> 
> 标签：javascript, html, events, click

我正在开发一个非常复杂的网站，并且页面上有一段 HTML，其中没有可点击的按钮。我认为点击事件在某处被捕获，因此按钮的点击处理程序不会触发。

**我怎样才能找出那些点击事件被捕获的地方？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:55:32.350

向文档添加一个单击事件侦听器，并查看捕获事件的内容：

```
document.addEventListener('click',function(e){
    console.log(e.target);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:49:58.727

只需检查`event.target`单击事件的位置即可查看它的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:52:50.540

页面中包含的 javascript 中的某处应该有一个`document.click()`或处理程序，它返回.`document.live("click",...)``false`

# c# - CA2000 和依赖注入

> ID：13993088
> 
> 赞同：6
> 
> 时间：2012-12-21T15:46:56.283
> 
> 标签：c#, asp.net-mvc-3, code-analysis

我正在使用一种相当简单的 DI 模式将我的数据存储库注入到我的控制器类中，并且我在每个控制器类上都收到了 CA2000 代码分析警告（在失去范围之前处理对象）。我知道为什么会发生警告，并且通常可以弄清楚如何解决它，但在这种情况下我无法弄清楚

1.  在对象创建和方法返回之间如何有可能引发异常，或者
2.  我可以在哪里放置`try/finally`块以消除错误。

在我放弃并禁止到处显示警告消息之前，是否有更好的方法来实现不会导致潜在未处置对象的相同效果？

```
public class AccountController : Controller
{
    public AccountController () 
        : this(new SqlDataRepository()) 
    {
    }

    public AccountController ( IDataRepository db )
    {
        this.db = db ?? new SqlDataRepository();

        // Lots of other initialization code here that I'd really like
        // to avoid duplicating in the other constructor.
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing && (this.db != null))
        {
            IDisposable temp = this.db as IDisposable;
            if (temp != null)
            {
                temp.Dispose();
            }
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:01:05.233

如果你使用 ASP.Net MVC，你可以让你的控制器实现`IDisposable`，并且管道会为你处理它。请参阅[ASP MVC：何时调用 IController Dispose()？](https://stackoverflow.com/q/1380019/1210520).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:59:15.993

您的存储库实现 IDisposable。使您的控制器也实现 IDisposable，并在 dispose 方法中清理您的存储库。

# asp.net-web-api - Application_End() WebApi

> ID：13993096
> 
> 赞同：6
> 
> 时间：2012-12-21T15:47:10.593
> 
> 标签：asp.net-web-api

在 ASP.NET WebAPI 中，global.asax.cs 文件中有一个名为 ApplicationStart 的方法，该方法在应用程序启动时自动调用。这个怎么称呼？

我问的原因是我想添加一个 Application_End 方法来做我需要做的任何清理工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T15:58:45.363

就 Global.asax 方法而言，ASP.NET WebApi 与 ASP.NET 没有什么不同。这些方法由 IIS 应用程序池工作程序在加载应用程序时通过反射发现，然后在适当的时间调用。[在MSDN](http://msdn.microsoft.com/en-us/library/bb470252(v=vs.100).aspx)上有一个很好的概述。

`Application_Start()`当应用程序开始在应用程序池中运行时由 IIS 调用。通常，当请求进入应用程序域内的资源时，就会发生这种情况。毕竟，必须运行应用程序才能为请求提供服务。

`Application_End()`在应用程序卸载之前或应用程序池回收之前调用。有多种触发器会导致应用程序池回收。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:59:05.770

MSDN 在此处提供了完整的详细信息 - [http://msdn.microsoft.com/en-us/library/ms178473(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178473(v=vs.100).aspx)，但您感兴趣的关键点是：

> Application_Start ..... 当请求 ASP.NET 应用程序中的第一个资源（例如页面）时调用。Application_Start 方法在应用程序的生命周期中仅调用一次。您可以使用此方法执行启动任务，例如将数据加载到缓存中和初始化静态值。

本质上，它在每个应用程序生命周期中由应用程序容器（例如 IIS）自动调用一次。

# .net - 使用 LINQ 获取不同的行

> ID：13993100
> 
> 赞同：1
> 
> 时间：2012-12-21T15:47:21.027
> 
> 标签：.net, linq, entity-framework, distinct

我目前对每个“FileStreamID”都有多个记录，但我只想根据最新的“请求日期”获得一个不同的记录

这是我现在拥有的：

```
 var resultx = from v in ctx.vEmailSents
                             where v.Lab_ID == 44
                                 && v.UploadDate >= this.BeginDate
                             select new
                             {

                                 FileStreamID = v.FileStream_ID,
                                 UploadDate = v.UploadDate,
                                 RequestDate = v.DateSent,
                                 TypeDesc = v.TypeDesc
                             }; 
```

现在我得到大约 33 条记录（但我应该只得到 12 条）

我如何将其更改为仅在文件流 ID 上给我不同的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:51:03.453

将您的`vEmailSent`对象分组`FileStream_ID`并从每个组项中选择最新日期：

```
 var resultx = from v in ctx.vEmailSents
               where v.Lab_ID == 44
                     && v.UploadDate >= this.BeginDate
               group v by v.FileStream_ID into g
               select g.OrderByDescending(x => x.DateSent)
                       .FirstOrDefault() into lastV
               select new {
                      FileStreamID = lastV.FileStream_ID,
                      UploadDate = lastV.UploadDate,
                      RequestDate = lastV.DateSent,
                      TypeDesc = lastV.TypeDesc                          
               }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:52:10.733

```
var results = resultx
    .GroupBy(x => x.FileStreamID)
    .Select(g => g.OrderByDescending(x => x.RequestDate).First()); 
```

# mysql - 按属性分组并统计记录

> ID：13993101
> 
> 赞同：1
> 
> 时间：2012-12-21T15:47:32.480
> 
> 标签：mysql, ruby-on-rails

我需要按名称对查询结果进行分组，并显示每个名称的结果数量。

控制器：

```
def show
@task = Task.where(:name => params[:name])
   respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @task }
   end
end 
```

我需要定义一些输出如下内容的东西：

*显示.html.erb*：

```
Name | # of Tasks

Alan |   2
Bob  |   1 
```

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:50:58.023

您可以使用以下[`group_by`方法](http://apidock.com/rails/Enumerable/group_by)：

```
@tasks.group_by(&:name)

# this will output:
{
  'Ben' => [<Task id:(...)>],
  'Alon' => [<Task id:(...)>, <Task id:(...)>, ...],
  #...
} 
```

在您看来，您可以像这样使用它：

```
<% @tasks.group_by(&:name).each do |name, tasks| %>
  <tr>
    <td><%= name %></td>
    <td><%= tasks.size %></td> # the tasks variable is an Array of Tasks
  </tr>
<% end %> 
```

## 更好的方法

您也可以仅在一个 SQL 请求中执行此操作：

```
Task.count(:group => 'name')
# should return a Hash like:
{
  'Ben': 2,
  'Alon': 5,
  # ...
} 
```

在您看来如何使用它？

```
<% @tasks_count.each do |task_name, task_count| %>
  <tr>
    <td><%= task_name %></td>
    <td><%= task_count %></td>
  </tr>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:57:17.607

优时基先生给出了正确答案。但是您可以通过单个 sql 请求获取所需的信息：

```
@task_counts = Task.group(:name).count

# this will output:
{
  'Ben' => 1,
  'Alon' => 2,
  #...
} 
```

用法：

```
<% @task_counts.each do |name, count| %>
  <tr>
    <td><%= name %></td>
    <td><%= count %></td>
  </tr>
<% end %> 
```

# php - 使用ajax在div中提交表单，在div中返回php而不刷新

> ID：13993112
> 
> 赞同：1
> 
> 时间：2012-12-21T15:48:45.573
> 
> 标签：php, jquery, ajax, html

我有一个顶部有三个按钮的索引页。单击每个按钮时，一个 php 文件会加载到主 div 中。其中一个按钮会加载用户填写并提交的表单。在提交表单时，我需要它不刷新页面并将结果数据加载到表单页面上的 div 中......而不是主 div。

如果我自己加载表单页面（即，不是通过单击按钮，而只是输入表单本身的地址）...一切正常。表单验证有效，它无需刷新即可提交，并将结果数据返回到表单上的结果 div 中。

但是，我加载索引页面并单击按钮以加载表单。表单加载正确，但是当我单击提交时，它只会刷新页面......这会导致表单消失，因为它加载到的 div 最初是隐藏的。此外，表单不会验证并且不会执行 php 操作。

同样，表单及其关联的 php 可以完美地自行运行。仅当我在索引页面中加载表单时才会出现此问题。所以我假设这个问题与我将它加载到索引页面上的 div 中有关。任何帮助将不胜感激。

**索引代码：**

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

</head>
<body>

<div id="header">
<center><h2>OMS Tutoring Database</h2></center>
</div>
<div id="navbar">
<center>
<button class="navbutton" id="buttonview" type="button">View Tutoring Lists</button>
<button class="navbutton" id="buttonadd" type="button">Add Students</button>
<button class="navbutton" id="buttonadmin" type="button">Admin</button>
</center>
<br>
</div>

<div id="content"></div>

<script>
    $(document).ready(function() {
$('#buttonview').click(function(){
    $('#content').load('tutoring.php', function(){
   });

});
$('#buttonadd').click(function(){
    $('#content').load('addtest.php', function(){
   });

});
$('#buttonadmin').click(function(){
    $('#content').load('admin.php', function(){
   });

});
});
  </script>

</body>
</html> 
```

**表格代码**

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>

<script type="text/javascript">
    $(document).ready(function(){
        $("#addstudent").validate({
            debug: false,
            rules: {
                studentid: "required",
                teacher: "required",
                assignment: "required",
                date: "required",
            },
            messages: {
                studentid: "Please enter the student's ID number.",
                teacher: "Please enter your name.",
                assignment: "Please select a tutoring assignment.",
                date: "Please select a day.",
            },                 
            submitHandler: function(form) {

      $.ajax({
          url: 'add.php',
          type: 'POST',
          data: $("#addstudent").serialize(),         
          success: function(data) {
        $("#studentid").val("");
        $('#studentid').focus();
        $("#results").empty();
        $("#results").append(data);
        }
      });

      return false;
   }
});
});
</script>

</head>

<title>OMS Tutoring - Add Student</title>
<body>
Use this form to add students to the tutoring list.
<p>
<div style="float:left;width:100%;margin-bottom:10;">
<div>
<form name="addstudent" id="addstudent" action="" method="post">
<fieldset><legend>Add student to tutoring list</legend>
<div><label for="studentid">ID number</label><input type="text" name="studentid" id="studentid"></div>

<div><label for="day">Date</label><select name="date" id="date">
<option value="">Please select a day</option>
<option value="mon">Monday <? echo $monday; ?></option>
<option value="tue">Tuesday <? echo $tuesday; ?></option>
<option value="wed">Wednesday <? echo $wednesday; ?></option>
<option value="thu">Thursday <? echo $thursday; ?></option>
<option value="fri">Friday <? echo $friday; ?></option>
</select></div>

<div><label for="assignment">Tutoring assignment</label><select name="assignment" id="assignment">
<option value="">Please select an assignment</option>
<option value="att">Activity Time</option>
<option value="acc">ACC</option>
<option value="tech">ACC Tech </option>
<option value="ast">After School</option>
</select></div>

<div><label for="teacher">Assigning teacher</label><input type="text" name="teacher" id="teacher"></div>

<input type="submit" name="submit" value="submit">
</fieldset>
</form></div></div>

<div id="results" style="margin-left:4;width:350;"><div>

</body>
</html> 
```

**表单处理php代码：**

```
<?php

$mysqli = new mysqli('localhost', 'xxx', 'xxx', 'xxx');

$studentid = $_REQUEST['studentid'];
$day = $_REQUEST['date'];
$assignment = $_REQUEST['assignment'];
$teacher = $_REQUEST['teacher'];

$dayquery = $mysqli->query("SELECT date FROM days WHERE day='$day'");
$dayresult = $dayquery->fetch_array();
$date = array_shift($dayresult);

$timestamp = date('Y-m-d H:i:s'); 

$mysqli->query("INSERT INTO assign (id, assignment, assignteacher, date, timestamp)
VALUES ('$studentid', '$assignment', '$teacher', '$date', '$timestamp')");

$namequery = $mysqli->query("SELECT first, last FROM students WHERE students.id='$studentid'");
$nameresult = $namequery->fetch_array();

echo $nameresult['first'].' '.$nameresult['last'].' successfully added.';

$teacherquery = $mysqli->query("SELECT assignteacher FROM assign WHERE id='$studentid' AND date='$date'");

$rowcount = $teacherquery->num_rows;

if ($rowcount > 1) {
  while ($row = $teacherquery->fetch_array()) {
    $teachernames[] = $row[0];
  }
$teachers = implode(', ', $teachernames);
echo '<br><br>Caution: '.$nameresult['first'].' '.$nameresult['last'].' has already been added by the following teachers: '.$teachers.'. ';
echo 'They may have precedence.';
  }
else {
  }

$alreadyadded = $mysqli->query("SELECT assign.id, students.first, students.last, assign.assignment, assign.assignteacher FROM assign
LEFT JOIN students
ON assign.id=students.id
WHERE assign.date='$date' AND assign.assignteacher='$teacher'
ORDER BY assign.assignment ASC, students.last ASC");

echo '<br><br><br>You already have the following student(s) assigned to tutorials on this day';
echo '<table border="1">';
while ($row = $alreadyadded->fetch_array()) {
  echo '<tr><td>'.$row['id'].'</td><td>'.$row['first'].'</td><td>'.$row['last'].'</td><td>'.$row['assignment'].'</td></tr>';
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:52:41.943

当您使用该方法将表单加载到页面中时`load`，大多数浏览器都会删除该`<head>`标记。

从jquery[网站](http://api.jquery.com/load/)：

> 在此过程中，浏览器通常会从文档中过滤元素，例如`<html>`、`<title>`或`<head>`元素。因此，通过 .load() 检索到的元素可能与浏览器直接检索到的文档不完全相同。

因此，请将您的 javascript 包含在主页中而不是表单页面中，或者手动将 javascript 动态添加到您的主页中。

# c# - 用c#压缩avi视频

> ID：13993119
> 
> 赞同：2
> 
> 时间：2012-12-21T15:49:16.257
> 
> 标签：c#, .net, compression, avi

我有一个要压缩的 AVI 文件。

我曾尝试将[Simple C# Wrapper 用于 AviFile 库](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)，但由于以下两个原因而出现问题：

*   压缩时，基础设施弹出一个表单窗口选择压缩方法，我无法通过代码选择压缩方法
*   压缩使音频消失

这是我的代码：

```
 AviManager aviManager = new AviManager(aviFilePath, true);
        VideoStream aviStream = aviManager.GetVideoStream();

        VideoStream newStream;
        AviManager newManager = aviStream.DecompressToNewFile(compressedAviPath, true, out newStream);

        aviManager.Close();
        //save and close un-/re-compressed file
        newManager.Close(); 
```

你知道我该怎么做：

1.  解决这些问题
2.  使用另一个可以压缩 AVI 视频的库

谢了，兄弟们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:08:48.077

您可以使用[EmguCv](http://www.emgu.com/wiki/files/2.0.0.0/html/fc05f588-4769-c79d-ef5b-cfe9926701ea.htm)

```
//VideoWriter vw = new public VideoWriter(string fileName, int fps, int width, int height, bool isColor);
VideoWriter vw = new VideoWriter("test.avi", 30, 500, 500, true);
//Then write your frame
vw.WriteFrame(frame); 
```

# php - 在外部（非 WP）脚本中包含 WordPress 导航

> ID：13993124
> 
> 赞同：0
> 
> 时间：2012-12-21T15:49:19.910
> 
> 标签：php, mysql, wordpress

我上周五把这个发布到 StackExhange 并没有收到任何回复，所以我想我会在这里试试？

我有一个客户正在将 WordPress 网站作为公共非登录前端添加到应用程序。

登录的客户将使用数百个脚本来管理与他们的高尔夫比赛相关的专业数据。为了保持一致性，我们希望能够包含来自 WordPress 网站的实时导航。是否有可以包含在 CSS 中的谨慎脚本来完成此操作？如果没有，之前有没有人这样做过或看到过相关信息？

显然，如果需要，我可以使用 WP 表来模拟菜单，但最好只是 gank WP 导航......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:06:16.963

有两种（在我看来）简单的方法：

*   **在您使用服务器端语言或仅**显示导航的 AJAX 获取的 WP 安装上创建模板
***   以编程方式下载您的网页并过滤掉您的导航**

 **我会选择第一种方法。最简单的方法是为导航制作自己的 php 文件，然后获取该文件 (http://www.example.com/wp-content/themes/your-theme/navigation.php)。这应该显示 HTML 内容。

现在，使用您的服务器端语言，您可以简单地“回显”响应，如下所示：

```
<?php
$ch = curl_init('http://www.example.com/wp-content/themes/your-theme/navigation.php');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);

curl_close($ch);

echo $response; // your menu
?> 
```

不幸的是，也没有简单的方法来获取 CSS。您也可以拆分导航的 CSS 并将其包含在内。

```
<link rel="stylesheet" type="text/css" href="http://www.example.com/wp-content/themes/your-theme/css/navigation.css" /> 
```

这只是创造力的问题。**

# openlayers - OpenLayers 改变控制层

> ID：13993128
> 
> 赞同：2
> 
> 时间：2012-12-21T15:49:34.527
> 
> 标签：openlayers

我想更改 OpenLayers.Control.ModifyFeature 控件的层，我尝试完全删除控制器，然后基于新层添加另一个。我已经通过使用这样的循环直接更改了 ModifyFeature 的 layer 属性：

```
for(var i = 0; i <= 10; i++) {
    if(document.getElementById('verksamhet').selectedIndex === i) {
        controlList.modifyFeature.layer =   window[layerName[i+1]];
    }
} 
```

它几乎可以工作；样式发生了变化，但控制器只适用于上一层，就像这张图片一样。（绿色为上一层，也是控制器响应的唯一层，但样式改成正确的层样式）。

(http://i.imgur.com/w3ZbW.png)

删除控制器并添加一个新控制器是这样完成的：

```
controlList.modifyFeature.deactivate();
map.removeControl(controlList.modifyFeature);

for(var i = 0; i <= 10; i++) {
    if(document.getElementById('verksamhet').selectedIndex === i) {
        controlList.modifyFeature = new OpenLayers.Control.ModifyFeature(window[layerName[i+1]], {displayClass: 'modButton', clickout: true, toggle: true, title: 'Modify feature'});
    }
}
map.addControl(controlList.modifyFeature);
controlList.modifyFeature.activate(); 
```

我认为 remove-and-add-a-new-controller-way 有效，但问题是我得到了控制器的副本，即它一次修改了几个层，因此我相信它不会删除控制器中的控制器第一名。

任何帮助解决此问题的方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:30:18.157

我还研究了在多个图层上获得 modifyControl 的方法。这并不容易。在创建 ModifyControl 时设置图层。它还为该层创建了一个 dragControl。如果您使用 modifyFeature.deactivate() 该控件仅被禁用，而不是被删除。我认为这会导致您遇到的干扰。

您还应该使用 modifyFeature.destroy()

```
controlList.modifyFeature.deactivate();
controlList.modifyFeature.destroy();
map.removeControl(controlList.modifyFeature); 
```

# oracle - Oracle 存在函数

> ID：13993129
> 
> 赞同：-1
> 
> 时间：2012-12-21T15:49:36.410
> 
> 标签：oracle, plsql

我有一个表`idm_track`，它有 3 个组合`dw_dealer_id`，我想将这个表与另一个表和另一个也有这三个组合的表连接起来，`dw_program_id`并且，我试图像这样编写 SQL `dw_product_id``ism_interaction``dw_dealer_id``dw_program_id``dw_product_id`

```
 SELECT    
      dw_itrack_id   
   FROM
     idm_itrack
   WHERE
      dw_dealer_id, 
      dw_product_id, 
      dw_program_type_id exists ( select  
                                   dw_dealer_id, 
                                   dw_product_id, 
                                   dw_program_type_id
                                    FROM IDM_INTERACTION_DTL_AGG 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:53:51.227

听起来你想要这个。这将在每个字段上连接两个表：

```
SELECT *
FROM idm_itrack t
LEFT JOIN IDM_INTERACTION_DTL_AGG i
  on t.dw_dealer_id = i.dw_dealer_id
  and t.dw_product_id = i.dw_program_id
  and t.dw_program_type_id = i.dw_program_type_id 
```

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的 joins 可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

`LEFT JOIN`如果您有不在其中的记录，则`IDM_INTERACTION_DTL_AGG`匹配的记录将返回一个`null`值。

如果您想要两者都存在的记录，那么您可以`INNER JOIN`在表之间使用：

```
SELECT *
FROM idm_itrack t
INNER JOIN IDM_INTERACTION_DTL_AGG i
  on t.dw_dealer_id = i.dw_dealer_id
  and t.dw_product_id = i.dw_program_id
  and t.dw_program_type_id = i.dw_program_type_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:54:33.987

只需加入即可，

```
SELECT    
      a.dw_itrack_id   
   FROM
     idm_itrack a,IDM_INTERACTION_DTL_AGG b
   WHERE
      a.dw_dealer_id=b.dw_dealer_id and 
      a.dw_product_id=b.dw_product_id and
      a.dw_program_type_id=b.dw_program_type_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:56:34.483

试试这个：

```
SELECT    
    it.dw_itrack_id   
 FROM
   idm_itrack it INNER JOIN IDM_INTERACTION_DTL_AGG iida
 ON 
  it.dw_dealer_id = iida.dw_dealer_id AND
  it.dw_product_id =  iida.dw_product_id AND
  it.dw_program_type_id = iida.dw_program_type_id; 
```

# c++ - 2012 年 1 月 C++11 工作草案“源”格式？

> ID：13993131
> 
> 赞同：1
> 
> 时间：2012-12-21T15:49:40.453
> 
> 标签：c++, c++11

C++ 标准的 2012 年 1 月工作草案是 PDF 格式：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)

是否公开了用于生成此 PDF 的源格式和流程/工具？

这些源文件是否也可以公开获得？

文档内容是否以 PDF 以外的任何其他格式提供？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T15:51:01.830

LaTeX 源代码以及构建它们的说明位于[GitHub 上。](http://github.com/cplusplus/draft)

# string - 为什么 ColdFusion 会更改我的查询结果中的值？

> ID：13993133
> 
> 赞同：1
> 
> 时间：2012-12-21T15:49:41.060
> 
> 标签：string, select, coldfusion, cfquery

这是我以前从未注意到的一个奇怪的问题。

我在 ColdFusion 8 中针对 iSeries/DB2 数据库运行 SELECT 查询。

这是最简单形式的查询：

```
<cfquery name="qMyData" datasource="#APPLICATION.DataSource#">
    SELECT  'XXX  111'
    FROM    MYLIB.MYTABLE
</cfquery> 
```

选择的值是`XXX 111`（两个字符串之间有两个空格）。查询返回的值是`XXX 111`（它删除了第二个空格）：

```
<cfdump var="#qMyData#" /> 
```

返回如下查询结果：

```
<TABLE class=cfdump_query>
<TBODY>
<TR>
<TH style="CURSOR: hand" class=query title="click to collapse" onclick=cfdump_toggleTable(this); colSpan=5>query</TH></TR>
<TR bgColor=#eeaaaa>
<TD style="CURSOR: hand" class=query title="click to collapse" onclick=cfdump_toggleRow_qry(this);>&nbsp;</TD>
<TD class=query>00001</TD>
<TR>
<TD style="CURSOR: hand" class=query title="click to collapse" onclick=cfdump_toggleRow_qry(this);>1</TD>
<TD vAlign=top>XXX 111 </TD> 
```

为什么 ColdFusion 会删除第二个空格？是否有解决方法来确保我得到我想要检索的确切值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:03:56.693

ColdFusion 没有删除空格，它是浏览器，或者更直接地，HTML。

如果你像@Tomalak 所说的那样输出你的值，或者像这样：

```
<cfoutput query="qMyData">
#replace(qMyData.myColumn," ","&nbsp;","all")#
</cfoutput> 
```

你会看到空格在那里。

看看这个：[http ://www-sul.stanford.edu/tools/tutorials/html2.0/whitespace.html](http://www-sul.stanford.edu/tools/tutorials/html2.0/whitespace.html)

你应该用不间断的空格替换你的空格以避免崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:14:17.307

我认为给定的答案不太理想。

首先，正如其他人所提到的，空白字符序列的折叠是[HTML 规范](http://www.w3.org/TR/REC-html40/struct/text.html#h-9.1)的一部分。

如果要保留空格，则不应简单地将所有空格更改为   实体 - 这不是该实体的用途。这是一个不会破坏的空间。这不是为了保留嵌入的空白。

@DanBracuk 为您提供了语义上最正确的答案：如果您想在浏览器中呈现文本时保留这些空间，则应使用 <pre />。这就是它的用途，它是完成这项工作的正确工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T07:13:26.677

我同意 Blaise 的观点，即浏览器正在删除 html 输出中的额外空格。
您应该使用`format`属性来获得预期的结果：

```
<cfdump var="#qMyData#" format="text" /> 
```

# c#-4.0 - 如何知道 C# 中的字符串编码

> ID：13993135
> 
> 赞同：2
> 
> 时间：2012-12-21T15:49:45.433
> 
> 标签：c#-4.0, character-encoding

我从我无法控制的第三方程序中得到一个字符串。我的一段代码以 HTML 格式输出。这在英语中运行良好，但在其他语言中它会以一种有趣的方式显示。例如，西班牙语的口音看起来很有趣，而东方语言（即韩语）中的字符看起来很有趣。我很确定我需要做一些编码工作，以便所有语言都能正确显示。

我对编码的理解有点差，所以在发布真正的问题之前，我直观地认为它是：“我如何在 C# 中将它编码为 UTF-8”，我想通过发布更简单的方法来了解这个问题问题。

我的问题是：**我怎么知道我的输入字符串有哪种类型的编码？**在西班牙语中，当我得到一个口音时，它看起来像这样：“AcciÃ³n”，而不是“Acción”。这是 ANSI 还是我在处理什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T17:10:25.287

> 我有口音：“AcciÃ³n”

Ã 字符的存在是一个致命的赠品。重音大写 A 字符的字符代码为 0xC0 及以上。这通常是两字节 utf-8 编码字符中的第一个字节。ó 字形是代码点 U+00F3，它的 utf-8 编码是 0xC3 + 0xB3。Ã 和 ³ 的代码点是什么

字符串以 utf-8 编码，但您使用 8 位编码读取它，例如 Encoding.Default

# iphone - iOS：如何将 UITableView 对齐到底部？

> ID：13993136
> 
> 赞同：0
> 
> 时间：2012-12-21T15:49:51.037
> 
> 标签：iphone, objective-c, ios, ipad, xcode4.2

我正在尝试创建消息屏幕，我将 UITableView 放在一个视图中，其页脚中有一个 UITextField 和 UIButton。

当 UITableView 没有数据或数据较少并且其页脚到达顶部时，问题就开始了，这不应该是，如下图所示。

![在此处输入图像描述](../Images/43be6160c4bd66cea6030a685e66c3bc.png)

它假设在底部，或者我可以将 UITableView 与底部对齐，就好像它的数据较少一样，至少页脚（具有 UITextField 和 UIButton）应该在底部，如下图所示

![在此处输入图像描述](../Images/ed4ab556073890430b053a8824202282.png)

我控制层次结构是这样的

![在此处输入图像描述](../Images/bcdb1e04d2c67a80833ab784824c4d7b.png)

请帮忙，将 TextFiels 和按钮保持在底部，要么它有数据，要么没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:29:05.897

在大多数情况下，您不需要将 a`UITableView`放入 a 中，`UIScrollView`因为`UITableView`它已经是 a 的子类`UIScrollView`。

至于你问的问题。您真的想要表格*中的文本字段和按钮吗？*当您考虑大多数短信应用程序时，您希望文本字段始终可见，而不管在消息中上下滚动。因此，您可能希望将其从桌子中取出并将其放在桌子下方的屏幕底部。顺便说一句，这也可以解决您的问题。

也许你真的想要它作为页脚。你仍然可以做到。有 2 种方法可以完成任务。

1.  检查所有行的组合高度 + 页脚的高度。如果这小于您的屏幕空间，请增加页脚的高度以填充其余空间。您必须确保文本字段/按钮与页脚底部对齐。

    ```
    // where 'footer' is the view of your footer
    CGFloat newFooterHeight;
    if (sumRowHeight + defaultFooterHeight < view.frame.size.height) {
        newFooterHeight = view.frame.size.height - sunRowHeight;
    } else {
        newFooterHeight = defaultFooterHeight;
    }

    CGRect alteredFooterFrame = footer.frame;
    footer.frame.size.height = newFooterHeight;
    footer.frame = alteredFooterFrame; 
    ```

2.  做与上面几乎相同的事情，但不是缓冲页脚的大小，而是增加最后一行的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:28:36.250

不要在表格中包含文本视图和按钮。将它们作为表的兄弟放在根视图中。这样您就可以将它一如既往地放在屏幕底部。

# php - 减少 Foreach 嵌套并用 While 循环替换？

> ID：13993137
> 
> 赞同：1
> 
> 时间：2012-12-21T15:49:54.190
> 
> 标签：php, mysql, arrays, pdo

我目前正在运行一个 MySQL 脚本`while loop`，如下所示：

```
$Query = mysql_query("SELECT * FROM appointments");
    while ($Rows = mysql_fetch_array($Query))
    {
        ...
    } 
```

这会将单行作为数组返回，我可以根据需要对其进行操作，例如：

```
if ($Rows['Reoccour'] == 1)
        {
            $NextDate = date('o-m-d', strtotime($Rows['Date'] . " +" . $Rows['howfar'] . " weeks"));
            if ($NextDate < date('o-m-d'))
            {
                mysql_query("UPDATE appointments SET Date='$NextDate' WHERE ID='{$Rows['ID']}'");
            }
        } 
```

这将放置在 while 循环中，以便我可以使用数组本身。但我想迁移到 PDO，但我无法获得`array`我想要的格式：

这是我的代码：

```
$Query = $dbh->prepare("SELECT * FROM appointments");
    $Query->execute();
    $Results = $Query->fetchAll();
    print_r($Results); 
```

这将产生一个多维数组，如下所示：

```
Array ( 
    [0] => Array ( 
    [ID] => 1 
    [0] => 1 
    [Appointment] => JCP Lucy
    [1] => JCP Lucy 
    [Date] => 2012-12-21
    [2] => 2012-12-21
    [Location] => Grays JCP
    [3] => Grays JCP 
    [Reoccour] => 1 
    [4] => 1 
    [howfar] => 1 
    [5] => 1
    )

    [1] => Array ( 
    [ID] => 3
    [0] => 3 
    [Appointment] => JCP Sign On
    [1] => JCP Sign On 
    [Date] => 2012-12-14 
    [2] => 2012-12-14 
    [Location] => 
    JCP Grays 
    [3] => JCP Grays 
    [Reoccour] => 1 
    [4] => 1 
    [howfar] => 2 
    [5] => 2 ) 

 ) 
```

我想要做的是在我使用 MySQL 函数时使用`$Results = $Query->fetchAll();`的设置中。`while loop`

如果我想将数组缩小到单个字符串，我将不得不执行以下操作：

```
foreach ($Results AS $results)
{
    foreach ($results AS $result)
    {
        echo "{$result} <br>"; 
    }
} 
```

但这会返回：

```
1
JCP Lucy
JCP Lucy
2012-12-21
2012-12-21
Grays JCP
Grays JCP
1
1
1
1
3
3
JCP Sign On
JCP Sign On
2012-12-14
2012-12-14
JCP Grays
JCP Grays
1
1
2
2 
```

其中有重复的值。我的问题是：

1）删除重复的值

2) 使用我的 PDO Api 执行一段`while loop`时间——但让我能够像我在完成这些`mysql_fetch_array`功能时一样使用 Array 键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:54:12.683

我相信您正在寻找`PDO::FETCH_ASSOC`传递给的选项[`fetchAll()`](http://php.net/manual/en/pdostatement.fetchall.php)：

```
$Query->fetchall(PDO::FETCH_ASSOC); 
```

`PDO::FETCH_ASSOC`给你

```
results = array(
  [0] => array(
    'column' => 'value',
    'column' => 'value',
    ...
  ),
  [1] => array(
     ...
  },
  ...
); 
```

然后您可以对其进行迭代。

# performance - 小文件的 HDFS 性能

> ID：13993143
> 
> 赞同：7
> 
> 时间：2012-12-21T15:50:15.410
> 
> 标签：performance, hadoop, io, hdfs

我是 Hadoop 新手。最近我正在尝试处理（只读）hdfs/hadoop 上的许多**小文件。**平均文件大小约为**1 kb**，文件数超过10M。由于某些限制，该程序必须用 C++ 编写。

这只是一个性能评估，所以我只使用 5 台机器作为数据节点。每个数据节点有5个数据盘。

我编写了一个小型**C++ 项目来直接从硬盘**（而不是 HDFS）读取文件来构建性能基准线。该程序将为每个磁盘创建 4 个读取线程。性能结果是每个磁盘大约 14MB/s。总吞吐量约为 14MB/s * 5 * 5 = 350MB/s（ **14MB** /s * 5 个磁盘 * 5 台机器）。

但是，当这个程序（仍然使用 C++，动态链接 libhdfs.so，创建 4*5*5=100 个线程）**从 hdfs 集群中读取文件时**，吞吐量只有**55MB/s**左右。

如果这个编程在 mapreduce 中触发（hadoop 流式处理，5 个作业，每个有 20 个线程，线程总数仍然是 100），吞吐量下降到大约 45MB/s。（我想它会因一些簿记过程而减慢）。

我想知道 HDFS 可以提供的合理性能是什么。如您所见，与原生代码相比，数据吞吐量仅为**1/7**左右。是我配置的问题吗？还是 HDFS 限制？还是Java限制？我的方案的最佳方式是什么？序列文件有帮助（很多）吗？与我们可以预期的原生 IO 读取相比，合理的吞吐量是多少？

这是我的一些配置：

NameNode 堆大小 32G。

作业/任务节点堆大小 8G。

NameNode 处理程序计数：128

数据节点处理程序计数：8

DataNode最大传输线程数：4096

1GBps 以太网。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T18:29:48.790

HDFS 真的不是为许多小文件而设计的。

对于您读取的每个新文件，客户端必须与 namenode 对话，namenode 会为其提供文件块的位置，然后客户端从 datanode 流式传输数据。

现在，在最好的情况下，客户端这样做一次，然后发现它*是*上面有数据的机器，并且可以直接从磁盘读取它。这将很快：与直接磁盘读取相当。

如果不是机器上有数据，那么它必须通过网络传输数据。然后你会受到网络 I/O 速度的限制，这应该不会很糟糕，但仍然比直接读取磁盘要慢一些。

但是，您会遇到更糟糕的情况——与名称节点通信的开销变得很大。只需 1KB 的文件，您就可以交换与实际数据一样多的元数据。客户端必须进行两次单独的网络交换才能从每个文件中获取数据。除此之外，namenode 可能会受到所有这些不同线程的影响，因此它可能会成为瓶颈。

因此，要回答您的问题，是的，如果您将 HDFS 用于并非设计用于的用途，那么它会很慢。合并您的小文件，并使用 MapReduce 获取数据局部性，您将获得更好的性能。事实上，因为您将能够更好地利用顺序磁盘读取，所以如果从一个大 HDFS 文件读取比读取许多本地小文件*更快，我不会感到惊讶。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T19:21:04.720

补充一下 Joe 所说的，HDFS 和其他文件系统之间的另一个区别是，与 FS 块大小为以 KB 为顺序。出于这个原因，他们总是说 HDFS 擅长处理少量大文件，而不是处理大量小文件。这背后的原因是，尽管最近在 cpu、ram 等组件方面取得了显着进步，但磁盘 i/o 是一个我们仍然没有太大进步的领域。这是拥有如此巨大的块（与传统的 FS 不同）并尽可能减少磁盘使用的目的。

此外，如果块大小太小，我们将拥有更大的块数。这意味着更多的元数据。这可能会再次降低性能，因为需要将更多信息加载到内存中。对于每个被认为是 HDFS 中的对象的块，都有大约 200B 的元数据与之关联。如果你有很多小块，它只会增加元数据，你最终可能会遇到 RAM 问题。

Cloudera 的博客部分有一篇非常好的文章，它讨论了同样的问题。你可以[在这里](http://blog.cloudera.com/blog/2009/02/the-small-files-problem/)访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T11:19:21.730

让我们尝试了解我们的限制，看看我们何时达到了它们
a) 我们需要 namenode 来为我们提供文件所在位置的信息。我可以假设这个数字大约是每秒数千。更多信息在这里[https://issues.apache.org/jira/browse/HADOOP-2149](https://issues.apache.org/jira/browse/HADOOP-2149) 假设这个数字是 10000K，我们应该能够获得关于 1K 文件的 10 MB 秒的信息。（不知何故你得到更多......）。可能
b) HDFS 的开销。这种开销主要是延迟而不是吞吐量。HDFS 可以调整为以并行方式提供大量文件。HBase 正在这样做，我们可以从 HBase 调优指南中获取设置。这里的问题实际上是您需要多少 Datanodes
c) 您的 LAN。您从网络移动数据，因此您可能会达到 1GB 以太网吞吐量限制。（我认为这是你得到的。

我也必须同意 Joe 的观点——HDFS 不是为这个场景而构建的，你应该使用其他技术（比如 HBase，如果你喜欢 Hadoop 堆栈）或者将文件压缩在一起——例如压缩成序列文件。

关于从 HDFS 读取更大的文件 - 运行 DFSIO 基准测试，这将是你的数字。
同时 - 单主机上的 SSD 也可以是一个完美的解决方案。

# iphone - 如何在 DetailViewController 的导航项上设置后退按钮说“后退”而不是上一个表格的标题？

> ID：13993148
> 
> 赞同：0
> 
> 时间：2012-12-21T15:50:33.917
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

现在我有一个 TableViewController，假设标题为“主菜单”，当您单击第一个单元格时，它会导致带有后退按钮的详细视图控制器。而不是只有“后退”，它具有 TableViewController 的标题，即“主菜单”

如何设置它以使其仅显示“返回”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:44:53.477

这实际上可以使用导航项 backBarButtonItem 的 setTitle 属性非常容易地完成。唯一不是很直观的事情是您必须在父视图控制器（您从中推送的那个）上设置这些属性。这可以通过编程方式或在界面生成器中完成。

```
[[[self navigationItem] backBarButtonItem] setTitle:@"Back"]; 
```

![在此处输入图像描述](../Images/c2547dbdf4be717ee8ef5669a817cb2e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:55:07.843

您可以将前一个视图控制器的标题设置为 nil，并将 设置`navigationItem.title`为要在导航栏中显示的文本。这样，下一个视图控制器将在其后退按钮上写上“后退”。

# objective-c - RestKit 0.20 映射问题

> ID：13993149
> 
> 赞同：3
> 
> 时间：2012-12-21T15:50:36.540
> 
> 标签：objective-c, xcode, http, core-data, restkit

当我发出请求并尝试将响应放入 Core Data 时出现以下错误。

```
Performing managed object mapping with a nil managed object cache:
Unable to update existing object instances by identification attributes. Duplicate objects     may be created. 
```

我设置了 identifactionAttributes 并使用对象管理器来配置请求操作。而且我仍然收到“无法更新现有对象实例......”

```
objectMapping = [RKEntityMapping mappingForEntityForName:@"Entity"     inManagedObjectStore:self.managedObjectStore];
            objectMapping.identificationAttributes = @[ @"route_id" ];
            [objectMapping addAttributeMappingsFromDictionary:@{
             @"point_alt" : @"point_alt",
             @"point_lat" : @"point_lat",
             @"point_long" : @"point_long",
             @"location_id" : @"location_id",
             @"route_id" : @"route_id"
             }];

NSMutableURLRequest *request = [[RKObjectManager sharedManager] requestWithObject:nil      method:RKRequestMethodPOST path:path parameters:paramsWithEncr];

RKManagedObjectRequestOperation *operation = [[RKObjectManager sharedManager] managedObjectRequestOperationWithRequest:request   managedObjectContext:self.managedObjectStore.mainQueueManagedObjectContext success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
        NSLog(@"Loading mapping result: %d", result.count);
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"Fail!");
    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:09:33.950

我没有使用对象管理器配置核心数据集成。如果您遇到同样的问题，您应该这样做：

```
NSManagedObjectModel *managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
NSString *path = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"Store.sqlite"];
[managedObjectStore addSQLitePersistentStoreAtPath:path fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:nil];
[managedObjectStore createManagedObjectContexts]; 
```

# javascript - 我的 javascript 谷歌地图本身可以工作，但当我将其发布到我的网站时却不行

> ID：13993152
> 
> 赞同：-1
> 
> 时间：2012-12-21T15:50:53.780
> 
> 标签：javascript, google-maps

我对 google maps api 感到困惑，因为我对 javascript 不是很了解。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/wide.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Orange Lizards - Atlanta, GA</title>
<!-- InstanceEndEditable -->
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<link href="styles.css" rel="stylesheet" type="text/css" />
</head>

<body>
<br />
<table width="865" border="0" align="center" cellpadding="4" cellspacing="0">
  <tr>
    <td bgcolor="#FFFFFF"><img src="images/header_logo.png" width="865" height="156" /></td>
  </tr>
  <tr>
    <td bgcolor="#FF9900" style="padding-left: 20px;"><div align="center" class="whiteThirteenBold"><a href="index.html" class="white">HOME</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="our_contractors.html" class="white">OUR CONTRACTORS&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="contact_us.html" class="white">CONTACT US</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="wol1_concept.html" class="white">WHY ORANGE LIZARDS</a></div></td>
  </tr>
  <tr>
    <td width="629" valign="top" bgcolor="#FFFFFF" style="padding-left: 20px; padding-right: 20px; padding-top: 10px;"><!-- InstanceBeginEditable name="Body" -->
      <p class="splash2">Map Wide</p>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyCmryDuU2lmu2kImnSi8UbrVog3ynxYC_k&sensor=false"></script> 

<style type="text/css">

html, body { height: 400px; width: 500px; } 

</style>

<script type="text/javascript"> 

//<![CDATA[

function initialize() {

  var myOptions = {

    zoom: 12,

    center: new google.maps.LatLng(33.805932,-84.340582),

    mapTypeControl: true,

    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},

    navigationControl: true,

    mapTypeId: google.maps.MapTypeId.ROADMAP

  }

  var map = new google.maps.Map(document.getElementById("map_canvas"),

                                myOptions);

  google.maps.event.addListener(map, 'click', function() {

        infowindow.close();

        });

  setMarkers(map, beaches);

}

var icons = new Array();

icons["red"] = new google.maps.MarkerImage("http://orangelizards.com/images/mapicons/trim_logo.png",

      // This marker is 20 pixels wide by 34 pixels tall.

      new google.maps.Size(40, 40),

      // The origin for this image is 0,0.

      new google.maps.Point(0,0),

      // The anchor for this image is at 9,34.

      new google.maps.Point(9, 34));

function getMarkerImage(iconColor) {

   if ((typeof(iconColor)=="undefined") || (iconColor==null)) { 

      iconColor = "red"; 

   }

   if (!icons[iconColor]) {

      icons[iconColor] = new google.maps.MarkerImage("http://orangelizards.com/images/mapicons/"+ iconColor +".png",

      // This marker is 40 pixels wide by 40 pixels tall.

      new google.maps.Size(40, 40),

      // The origin for this image is 0,0.

      new google.maps.Point(0,0),

      // The anchor for this image is at 6,20.

      new google.maps.Point(9, 34));

   } 

   return icons[iconColor];

}

  // Marker sizes are expressed as a Size of X,Y

  // where the origin of the image (0,0) is located

  // in the top left of the image.

  // Origins, anchor positions and coordinates of the marker

  // increase in the X direction to the right and in

  // the Y direction down.

  var iconImage = new google.maps.MarkerImage('mapIcons/trim_logo.png',

      // This marker is 20 pixels wide by 34 pixels tall.

      new google.maps.Size(20, 34),

      // The origin for this image is 0,0.

      new google.maps.Point(0,0),

      // The anchor for this image is at 9,34.

      new google.maps.Point(9, 34));

  var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',

      // The shadow image is larger in the horizontal dimension

      // while the position and offset are the same as for the main image.

      new google.maps.Size(37, 34),

      new google.maps.Point(0,0),

      new google.maps.Point(9, 34));

      // Shapes define the clickable region of the icon.

      // The type defines an HTML &lt;area&gt; element 'poly' which

      // traces out a polygon as a series of X,Y points. The final

      // coordinate closes the poly by connecting to the first

      // coordinate.

  var iconShape = {

      coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],

      type: 'poly'

  };

var infowindow = new google.maps.InfoWindow(

  { 

    size: new google.maps.Size(150,50)

  });

function createMarker(map, latlng, label, html, color) {

    var contentString = '<b>'+label+'</b><br>'+html;

    var marker = new google.maps.Marker({

        position: latlng,

        map: map,

        shadow: iconShadow,

        icon: getMarkerImage(color),

        shape: iconShape,

        title: label,

        zIndex: Math.round(latlng.lat()*-100000)<<5

        });

    google.maps.event.addListener(marker, 'click', function() {

        infowindow.setContent(contentString); 

        infowindow.open(map,marker);

        });

}

/**

 * Data for the markers consisting of a name, a LatLng and a zIndex for

 * the order in which these markers should display on top of each

 * other.

 */

var beaches = [

  ['Trim Logo', 33.806431,-84.338436, "trim_logo"],

  ['RPS Logo', 33.805932,-84.340582, "RPS_logo"],

  ['<a href="http://google.com>Test Test</a>', 33.805147,-84.338565, "rmi_logo"],

];

function setMarkers(map, locations) {

  // Add markers to the map

  for (var i = 0; i < locations.length; i++) {

    var beach = locations[i];

    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);

    var marker = createMarker(map,myLatLng,beach[0],beach[0],beach[3]);

  }

}

//]]>

</script> 

</head> 

<body style="margin:0px; padding:0px;" onload="initialize()"> 

  <div id="map_canvas" style="width:100%; height:100%"></div> 

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">

</script>

<script type="text/javascript">

_uacct = "UA-162157-1";

urchinTracker();

</script>

</body> 

    <!-- InstanceEndEditable --></td>
  </tr>
  <tr bgcolor="#FF9900">
    <td><div align="center" class="bodyWhite">Copyright &copy; 2012 Orange Lizards Atlanta </div></td>
  </tr>
</table>
</body>
<!-- InstanceEnd --></html> 
```

该脚本在单独位于 html 文件中时可以正常工作，但在我将其发布到我的网站时不会显示。有任何想法吗？此外，当我添加超过 5 个标记时，它似乎搞砸了。我对 javascript 不好，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:04:26.080

这可能是因为 API 密钥（请参阅代码的部分 src="http://maps.google.com/maps/api/js?key= **AIzaSyCmryDuU2lmu2kImnSi8UbrVog3ynxYC_k** &sensor=false" ）。API 密钥是特定于主机的，因此如果为“localhost”颁发了密钥，则相同的密钥将不适用于“orangelizards.com”。您要么需要向 Google 请求新密钥，要么切换到不需要密钥的新版 Google Maps API。此外，正如评论者“epascarello”所指出的，如果您发布了您在 Javascript 控制台中看到的确切错误，这将有所帮助。

# git - 当我在 github 中修改 README 时无法 git pull

> ID：13993157
> 
> 赞同：0
> 
> 时间：2012-12-21T15:51:04.670
> 
> 标签：git, github

我在 github 中修改了我的 README.md 文件。

当我尝试`git pull origin master`时，它显示该错误：

```
error: unable to unlink old 'README.md' (Permission denied) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:52:20.287

这意味着您磁盘上现有的 README.md 已在程序中打开，因此 git 无法删除它。

# regex - 如何使用正则表达式将所有请求路由到 servlet *except* 静态文件“/(images|css|jsp|html)/.*”

> ID：13993163
> 
> 赞同：0
> 
> 时间：2012-12-21T15:51:14.173
> 
> 标签：regex, url-rewriting, guice, guice-servlet

使用 google guice，我希望所有服务器请求 (/*) 都流向我的 servlet 文件，静态内容*除外。*如果需要，我可以将静态内容放入 /static 文件夹。我只需要接收到根的 serverlet 请求。

这是有效的代码：

```
//Holds @GET @POST, etc
bind(MyTemplateResource1.class);
bind(MyTemplateResource2.class);

// this serves MyTemplateResource1..2... and any other servlet files
serve("/server/*").with(GuiceContainer.class); 

// this serves the static content
serveRegex("/(images|css|html)/.*").with(GuiceContainer.class); 
```

但是，如果我取出 /server，我的静态内容也会被路由到 MyTemplateResource。例如：

```
serve("/*").with(GuiceContainer.class); 
```

即使 servlet url 可以从根目录开始，在将 Servlet 内容路由到一个或多个 Resource 文件时，允许所有静态内容自由流动的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:14:06.620

我有一个类似的问题（我实际上是在谷歌上搜索一个正则表达式掩码并找到了你的问题），所以基本上：

1.  为参数创建映射
2.  添加 WebPageContentRegex 的引用，并添加静态文件 regexps
3.  确保您使用过滤器而不是服务，并通过地图

在代码中，它是这样工作的：

```
 bind(HostController.class, LoginController.class, ConfirmInviteController.class, LogoutController.class, ResetPasswordController.class, ChangePasswordController.class);

    Map<String, String> initParams = new TreeMap<String, String>();

    initParams.put("com.sun.jersey.config.property.WebPageContentRegex", "/.*\\.(jpg|ico|png|gif|html|id|txt|css|js)");

    filter("/*").through(GuiceContainer.class, initParams); 
```

希望有帮助

# javascript - 如何删除 HTML 代码隐藏的子弹？

> ID：13993165
> 
> 赞同：1
> 
> 时间：2012-12-21T15:51:31.783
> 
> 标签：javascript, css, html-lists, code-behind

**我从 codebehind**创建一个 html 列表，如下所示：

```
HtmlGenericControl list = new HtmlGenericControl("ul");
for (int i = 0; i < 10; i++)
{
   HtmlGenericControl listItem = new HtmlGenericControl("li");
   Label textLabel = new Label();
   textLabel.Text = "Menu"+i;
   listItem.Controls.Add(textLabel);
   list.Controls.Add(listItem);
} 
```

但是渲染的列表有项目符号，我想阻止它们。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-21T15:52:43.800

使用 CSS：

```
ul {
   list-style: none;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T15:55:25.863

我认为您可以使用 style 属性：

```
list.Style.Add("list-style", "none"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:54:42.713

你不能在类似的东西上加上一个id名称： `HtmlGenericControl list = new HtmlGenericControl("ul"); list.Id = "myId";`

然后在css中定义：

```
#myId{
 list-style-type: none;
} 
```

# c# - 重置 IE 个人设置可提高应用程序性能

> ID：13993171
> 
> 赞同：4
> 
> 时间：2012-12-21T15:52:05.823
> 
> 标签：c#, .net, internet-explorer, clickonce

我们通过 ClickOnce 在客户端的工作站上安装了 .NET 应用程序，在大多数实施和办公室中，该应用程序非常快。然而，一些客户报告了应用程序的速度问题，并发现通过重置用户 IE 浏览器上的个人设置，应用程序将以额定速度运行......但仅持续一周左右。然后重置再次解决问题。显然这不是一个好的解决方案，因为每次重置、存储的登录名和密码等都会丢失。

那么为什么重置个人设置会影响我们的 .NET 可执行文件呢？我们可以确定的重置肯定还有很多。该软件似乎受到一些外部环境力量的影响。我们说的是重置后的等待时间从 2 分钟缩短到 5 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:05:03.687

列出默认设置。与其点击重置按钮，不如一一更改它们，看看哪一个会给您带来性能提升。

# python - 如何替换文件中的单词？

> ID：13993173
> 
> 赞同：2
> 
> 时间：2012-12-21T15:52:13.220
> 
> 标签：python

在 test.txt 中：

```
rt : objective
tr350rt : objective
rtrt : objective
@username : objective
@user_1236 : objective
@254test!! : objective
@test : objective
#15 : objective 
```

我的代码：

```
import re
file3 = 'C://Users/Desktop/test.txt'
rfile3 = open(file3).read()
for altext in rfile3.split("\n"):
    saltext = altext.split("\t")
    for saltword in saltext:
        ssaltword = saltword.split(" ")
        if re.search(r'^rt$', ssaltword[0]):
        print ssaltword[0], ssaltword[2]
        testreplace = open(file3, 'w').write(rfile3.replace(ssaltword[0], ""))
        if re.search(r'^@\w', ssaltword[0]):
            print ssaltword[0], ssaltword[2]
        testreplace = open(file3, 'w').write(rfile3.replace(ssaltword[0], "")) 
```

我有：

```
 : objective
tr350 : objective
 : objective
@username : objective
@user_1236 : objective
@254test!! : objective
 : objective
#15 : objective 
```

我试图只用空格替换“rt”和所有@

但是从我的代码中，所有的“rt”都被替换了，只有一个@被替换了。

我想得到：

```
 : objective
tr350rt : objective
rtrt : objective
 : objective
 : objective
 : objective
 : objective
#15 : objective 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:02:44.527

我认为正则表达式在这里有点矫枉过正：

```
with open("test.txt") as in_fp, open("test2.txt", "w") as out_fp:
    for line in in_fp:
        ls = line.split()
        if ls and (ls[0].startswith("@") or ls[0] == "rt"):
            line = line.replace(ls[0], "", 1)
        out_fp.write(line) 
```

生产

```
localhost-2:coding $ cat test2.txt 
 : objective
tr350rt : objective
rtrt : objective
 : objective
 : objective
 : objective
 : objective
#15 : objective 
```

请注意，我也将其更改为不覆盖原始内容。

编辑：如果您真的想就地覆盖原始文件，那么我会先将整个内容读入内存：

```
with open("test.txt") as fp:
    lines = fp.readlines()

with open("test.txt", "w") as out_fp:
    for line in lines:
        ls = line.split()
        if ls and (ls[0].startswith("@") or ls[0] == "rt"):
            line = line.replace(ls[0], "", 1)
        out_fp.write(line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:57:10.167

```
import re
with open("test.txt") as infile:
    text = infile.read()
    newtext = re.sub(r"(?m)^(?:rt\b|@\w+)(?=\s*:)", " ", text) 
```

**解释：**

```
(?m)      # Turn on multiline mode
^         # Match start of line
(?:       # Either match...
 rt\b     # rt (as a complete word
|         # or
 @\w+     # @ followed by an alphanumeric "word"
)         # End of alternation
(?=\s*:)  # Assert that a colon follows (after optional whitespace) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:58:18.890

试试这个，

```
import os

mydict = {"@":'',"rt":''}

filepath = 'C://Users/Desktop/test.txt'
s = open(filepath).read()
for k, v in mydict.iteritems():
    s = s.replace(k, v)
f = open(filepath, 'w')
f.write(s)
f.close() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T16:07:19.723

甚至不需要在这里使用正则表达式：

```
with open("test.txt") as file:
    lines = file.readlines()
    for line in lines:
        if (line.startswith("@") and ":" in line) or line.startswith("rt :"):
            line = " :" + line.split(":", 1)[1] 
```

# c++ - 正确设计并行的、性能关键的数字代码

> ID：13993174
> 
> 赞同：4
> 
> 时间：2012-12-21T15:52:19.553
> 
> 标签：c++, python, architecture, numerical-analysis

我是一名受过培训的机械工程师，在研究环境中工作，主要扩展现有的 25 岁以上 C 的大型数字代码库。我最近决定要学习如何从头开始设计一个严肃的科学软件。

我曾与大学计算机科学系的一些学者交谈过，似乎人们普遍认为，最有可能构建大规模数值应用程序的人是机械/化学/生物系。同样，大多数编写这些应用程序的人都很少或根本没有接受过软件设计原则的培训。

作为大多数工程师，我是边做边学的，所以我将给自己设定一个任务来完成以下任务：**开发一个自适应网格方案，根据任意移动曲线的位置进行局部细化/粗化。穿过这个网格，求解热方程（或其他一些 PDE）**。

我想包括的东西：

1.  并行（我对 MPI 有短暂的经验，所以可能会坚持这个）——也许结合在 OpenCL 中（周围没有 Nvidia 卡，所以没有 CUDA）
2.  Python 和 C++ 的结合（Python 中的脚本驱动 UI，C++ 中的执行）
3.  面向对象，基于设计模式（我很想学的一部分）
4.  单元测试框架（我使用过 gtest 并且可能会坚持使用它，但不确定单元测试的详细程度，我已经阅读了有关单元测试科学代码的各种不同建议）
5.  基于Linux——在这个阶段不要太在意可移植性
6.  也许使用 Boost 库
7.  使用 HDF5 或 VTK 保存结果（我知道 VTK，但觉得 HDF5 更适合）
8.  性能分析

我试图回答的一些问题：

1.  这感觉像是一项艰巨的任务，没关系，但是分解它的一般过程是什么？您是从基本的基础设施（MPI 包装器、矩阵类等）开始，还是从高级交互（主控制器、UI 等）开始，还是从完全不同的地方开始？
2.  Python + C++ 的范例是否适合在集群上启动 MPI？
3.  我还没有找到任何在科学背景下处理应用程序设计的书籍——是因为它不存在，还是我没有找对地方？
4.  我很清楚理想的“让它运行然后配置文件”的优化方式，但我认为一开始做出的一些非常基本的设计决策会影响性能。对于数字代码的高级设计，需要注意哪些主要问题？

注意：我不确定这个问题是否符合 stackexchange 格式——如果不符合，我会很乐意重新措辞……

# jquery - response.write 上的随机 html

> ID：13993179
> 
> 赞同：1
> 
> 时间：2012-12-21T15:52:39.583
> 
> 标签：jquery, asp-classic

大家好，我正在实习，他们使用 ASP 进行编码。来自PHP，我有点困惑。我有一个使用 $.post() 与 JQuery 一起发送的表单。

```
 $.post("sendmail.asp",{
       fname:$("#fName").val(),
       lname:$('#lName').val(),
       addy1:$('#addy1').val(),
       addy2:$('#addy2').val(),
       city:$('#city').val(),
       zip:$('#zip').val(),
       state:$('#state').val(),
       ephone:$('ephone').val(),
       dphone:$('dphone').val(),
       email:$('#email').val(),
       comm:$('comm').val()
       },function(e){
            alert("Server response: "+e)
       }) 
```

我调用了一个使用类发送邮件的脚本 sendmail.asp，在发送邮件后我做了，`response.write("email sent")`但我得到了

```
<random HTML that seems to be generated from bootstrap>
email sent 
```

我想要的只是回应`email sent`。我不知道我做错了什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:02:50.343

`response.Clear`先试试`response.write`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:04:18.790

您的 sendmail.asp 脚本中是否有包含指令？

```
<!--#include virtual="somefilename"--> 
```

很容易错过，因为它看起来像评论。

# html - 像图像一样排列 div？

> ID：13993182
> 
> 赞同：1
> 
> 时间：2012-12-21T15:52:45.847
> 
> 标签：html, css

我想要一个导航栏（`#nav`），并且每个导航项都是一个 div（`#nav div`）。然而，这并不好。这是我正在尝试的：

```
#nav {
    background: url("navbg.png"); /* navbg.png is 1x40 pixels */
    height: 40px;
    width: 100%;
    position: fixed;
    top: 0px;
    left: 0px;
    right: 0px;
    text-align: center;
}
#nav div {
    width: 200px;
    height: 40px;
    background: url("Selected.png"); /* Selected.png is 200x40 pixels */
    text-align: center;
} 
```

当我使用 div 中的两个 div 执行此操作时`#nav`，一个显示在左侧，一个显示在下方。当我这样做时，但使用`display: inline;`in 时`#nav div`，它居中，但 div 没有任何背景，并且两个 div 中的文本并排显示。

我希望 div 像图像一样工作，受到影响`text-align: center;`并并排显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:54:33.370

尝试`display: inline-block`或`float: left`继续`#nav div`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:55:16.863

样式规则可以解决问题，`display: inline-block`但它有一些缺点。请参阅[CSS display: inline-block: 为什么它会摇摆不定，以及为什么它很烂](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)，以了解更多详细信息。

我可能还建议使用列表而不是 div 作为导航元素。这是一种常见的策略，可以（希望）产生更清晰的标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:57:45.863

我建议在您的外部 div 上使用[clearfix](http://www.webtoolkit.info/css-clearfix.html)`#div`解决方案。然后`float:left`对所有的`#nav div`孩子。

# asp.net - 在 ASP.NET 1.1 中从 gmail smtp 服务器发送电子邮件

> ID：13993183
> 
> 赞同：0
> 
> 时间：2012-12-21T15:52:48.980
> 
> 标签：asp.net, .net, email

我知道如何在 ASP.NET 1.1 中从本地 smtp 服务器发送电子邮件

并使用gmail服务器...我们需要使用我们需要提供端口号...即

我们需要使用 SmtpClient ......只有在 framework 2.0 之后才可用......

我只想知道，我在这方面是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:56:59.923

您可以在 asp.net 1.1 中使用 SmtpMail，但是，它不像 2.0 那样直接支持 ssl，您必须设置字段。查看：

[http://forums.asp.net/t/1291908.aspx/1](http://forums.asp.net/t/1291908.aspx/1)

# c# - FindIndex() 方法拒绝对象作为谓词

> ID：13993192
> 
> 赞同：0
> 
> 时间：2012-12-21T15:53:18.713
> 
> 标签：c#, asp.net, .net, asp.net-mvc

```
List<Gedi.Models.OperacoesModel.allIndex> indicesAndValues = indicesAndValuesIE.ToList();
List<Gedi.Models.OperacoesModel.allIndex> indicesAndValuesToExclude = new List<Gedi.Models.OperacoesModel.allIndex>();

foreach (Gedi.Models.OperacoesModel.allIndex indiceValue in indicesAndValues)
{
   if (indiceValue.value == "")
   {
      indicesAndValuesToExclude.Add(indiceValue);           
   }
}

int idd;
foreach (Gedi.Models.OperacoesModel.allIndex removeObj in indicesAndValuesToExclude)
{
idd = indicesAndValues.FindIndex(removeObj);
} 
```

根据上面的代码，

```
idd = indicesAndValues.FindIndex(removeObj); 
```

我想检索此 List 中具有元素 removeObj 的索引；

我收到一条错误消息，指出 FindIndex 有一些无效参数。

removeObj 和 indicesAndValues 的类型相同，只是 indicesAndValues 是一个 List 而 removeObj 只是一个相同类型的对象

为什么我不能使用 removeObj 作为条件的谓词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:58:17.860

`FindIndex`需要一个谓词作为参数。您可以使用 lambda 表达式来指定谓词

```
idd = indicesAndValues.FindIndex(item => item == removeObj); 
```

您将在更复杂的场景中使用它，例如

```
idd = indicesAndValues.FindIndex(item => item.Name == "abc"); 
```

（这将找到名称为“abc”的第一项的索引。）

`List<T>`有另一种`IndexOf`可用于查找对象的方法

```
idd = indicesAndValues.IndexOf(removeObj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:56:19.570

您需要将谓词传递给`FindIndex`.

```
idd = indicesAndValues.FindIndex(o => o == removeObj); 
```

更好的选择是使用：

```
idd = indicesAndValues.IndexOf(removeObj); 
```

最后，如果您不需要知道删除了哪些值，您可以将整个代码重写为：

```
indicesAndValues.RemoveAll(obj => obj.Value == ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:56:47.030

请改用[IndexOf](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx)。[FindIndex](http://msdn.microsoft.com/en-us/library/0k601hd9.aspx)采用谓词，而不是直接对象。如果你只想找到一个对象，`IndexOf`是一种更简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:57:30.470

尝试这个：

```
idd = indicesAndValues.FindIndex(o => o == removeObj); 
```

# php - 为什么我的 php 群在运行两次命令时没有检测到现有的锁？

> ID：13993195
> 
> 赞同：0
> 
> 时间：2012-12-21T15:53:31.477
> 
> 标签：php, symfony, flock, splfileobject

稍微解释一下，我有一个 Symfony2 设置。我正在使用我扩展的抽象命令类。我希望这些批次中的任何一个只能运行一次。我的目标是制作一个我打开并聚集的锁定文件，以便当 php 脚本以任何可能的方式终止时自动释放锁定。

为了实现这一点，我创建了一个名为 Lock 的类。此类扩展了 SplFileObject 并且基本上是在某处（通常是 /var/lock/*）创建 *.lock 的包装器。现在我在检测这个锁时遇到了问题。我确实有一个使用 fopen 和flock 的设置。由于某种原因，它不会再检测到它了。

我创建了一个 OOP 结构来基本上做我想做的事：

*   确定锁定文件的名称（使用文件夹）
*   创建一个锁对象
    *   如果目录不存在，则创建目录并锁定文件
    *   调用 SplFileObject::__construct()
*   锁定文件

我不能让它与句柄和 spl 文件对象一起使用。如果我运行脚本，让它休眠 15 秒并在另一个控制台中运行相同的脚本，我将得到脚本成功锁定文件的结果，flock 返回 true。如果我在同一个脚本中的同一个锁文件上创建 2 个 Lock 对象，我在第一个锁上得到 true，在第二个上得到 false，这意味着它第二次无法获得锁。该脚本似乎有效。

但是，当我在两个脚本中使用 2 个锁运行脚本 2 次时，我在两个脚本上都得到 True 和 false ......这意味着它似乎没有跨脚本正确锁定文件：/

有没有人可以告诉我我做错了什么？我检查了文件名，两次运行脚本时它都相同。我尝试了多种权限，例如 777、755、733，但没有区别。

我这样称呼它（只是课程的一部分）：

```
abstract class AbstractTripolisCommand extends ContainerAwareCommand
{
[...]
  /**
   * Locks the current file based on environments
   *
   * @param string $application_env
   * @param string $symfony_env
   */
  private function lockCommand($application_env, $symfony_env)
  {
    $lock_name  = "tripolis/$application_env/$symfony_env/" . crc32(get_class($this));
    $lock = new Lock($lock_name, 'w+', $this->getContainer()->get('filesystem'));
    var_dump($lock->lock());
    $lock2 = new Lock($lock_name, 'w+', $this->getContainer()->get('filesystem'));
    var_dump($lock2->lock());
    // results when ran 2 times at the same time
    // bool(true)
    // bool(false)
    // when I run this script twice I expect the second run at the same time
    // bool(false)
    // bool(false)

    if(!$lock->lock()) {
      throw new Tripolis\Exception('Unable to obtain lock, script is already running');
    }
  }
[...]
} 
```

锁.php

```
namespace Something\Component\File;

use Symfony\Component\Filesystem\Filesystem;

/**
 * Creates a new SplFileObject with access to lock and release locks
 * Upon creation it will create the lock file if not exists
 *
 * The lock works by keeping a stream open to the lock file instead
 * of creating/deleting the lock file. This way the lock is always
 * released when the script ends or crashes.
 *
 * create a file named /var/lock/something/something.lock
 * <example>
 *   $lock = new Lock('something');
 *   $lock->lock();
 *   $lock->release();
 * </example>
 *
 * create a file named /var/lock/something/my-lock-file.lock
 * <example>
 *   $lock = new Lock('something/my-lock-file');
 *   $lock->lock();
 * </example>
 *
 * NOTE: locks that are not released are released
 * automatically when the php script ends
 *
 * @author Iltar van der Berg <ivanderberg@something.nl>
 */
class Lock extends \SplFileObject implements Lockable
{
  /**
   * @param string     $file_name
   * @param string     $open_mode
   * @param Filesystem $filesystem
   * @param string     $lock_directory
   */
  public function __construct($file_name, $open_mode = 'r+', Filesystem $filesystem = null, $lock_directory = '/var/lock')
  {
    $filesystem = $filesystem ?: new Filesystem();
    $file = self::touchLockFile($file_name, $lock_directory, $filesystem);
    parent::__construct($file, $open_mode);

  }

  /**
   * Returns true if the lock is placed, false if unable to
   *
   * @return boolean
   */
  public function lock()
  {
    return $this->flock(LOCK_EX | LOCK_NB);
  }

  /**
   * Returns true if the lock is released
   *
   * @return bool
   */
  public function release()
  {
    return $this->flock(LOCK_UN);
  }

  /**
   * Attempts to create a lock file for a given filename and directory
   * it will return a string if the file is touched
   *
   * @param  string     $file_name
   * @param  string     $lock_directory
   * @param  Filesystem $filesystem
   * @return string
   */
  private static function touchLockFile($file_name, $lock_directory, Filesystem $filesystem)
  {
    $lock_file_path = explode('/', $file_name);
    $lock_file      = array_pop($lock_file_path);

    $path = "$lock_directory/" . (empty($lock_file_path)
      ? $lock_file
      :  implode('/', $lock_file_path));

    $lock_file = "$path/$lock_file.lock";

    if(!$filesystem->exists($path) || !is_dir($path)) {
      $filesystem->mkdir($path);
    }

    return $lock_file;
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:08:42.657

我敢打赌，锁或文件比您想象的更早被销毁，因为拥有这些对象的函数返回，从而使对象有资格进行垃圾回收。

# java - 在 POJO 反序列化期间忽略 @JsonTypeInfo 属性

> ID：13993198
> 
> 赞同：8
> 
> 时间：2012-12-21T15:53:43.237
> 
> 标签：java, jackson, deserialization

我正在使用 @JsonTypeInfo 来指示 Jackson 2.1.0 在“鉴别器”属性中查找具体类型信息。这很好用，但是在反序列化期间没有将鉴别器属性设置到 POJO 中。

根据 Jackon 的 Javadoc (com.fasterxml.jackson.annotation.JsonTypeInfo.Id)，它应该：

```
/**
 * Property names used when type inclusion method ({@link As#PROPERTY}) is used
 * (or possibly when using type metadata of type {@link Id#CUSTOM}).
 * If POJO itself has a property with same name, value of property
 * will be set with type id metadata: if no such property exists, type id
 * is only used for determining actual type.
 *<p>
 * Default property name used if this property is not explicitly defined
 * (or is set to empty String) is based on
 * type metadata type ({@link #use}) used.
 */
public String property() default ""; 
```

这是一个失败的测试

```
 @Test
public void shouldDeserializeDiscriminator() throws IOException {

    ObjectMapper mapper = new ObjectMapper();
    Dog dog = mapper.reader(Dog.class).readValue("{ \"name\":\"hunter\", \"discriminator\":\"B\"}");

    assertThat(dog).isInstanceOf(Beagle.class);
    assertThat(dog.name).isEqualTo("hunter");
    assertThat(dog.discriminator).isEqualTo("B"); //FAILS
}

@JsonTypeInfo(
        use = JsonTypeInfo.Id.NAME,
        include = JsonTypeInfo.As.PROPERTY,
        property = "discriminator")
@JsonSubTypes({
        @JsonSubTypes.Type(value = Beagle.class, name = "B"),
        @JsonSubTypes.Type(value = Loulou.class, name = "L")
})
private static abstract class Dog {
    @JsonProperty("name")
    String name;
    @JsonProperty("discriminator")
    String discriminator;
}

private static class Beagle extends Dog {
}

private static class Loulou extends Dog {
} 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T20:05:25.143

像这样使用“可见”属性：

```
@JsonTypeInfo(use = JsonTypeInfo.Id.NAME,
    include = JsonTypeInfo.As.PROPERTY,
    property = "discriminator", visible=true) 
```

然后将暴露类型属性；默认情况下，它们是不可见的，因此无需为此元数据添加显式属性。

# git - 修改提交以恢复对单个文件所做的修改的最简单方法是什么？

> ID：13993199
> 
> 赞同：0
> 
> 时间：2012-12-21T15:53:42.397
> 
> 标签：git, git-revert

目前，当我必须这样做时，以下是我遵循的步骤：

*   恢复提交（当然不创建新的提交）
*   重置“还原”引入的所有修改，除了我想要还原的文件之一
*   暂存我要恢复的文件的反转并修改最后一次提交

有没有更直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:55:53.503

签出文件的先前状态并修改提交。

```
git checkout HEAD^ -- file.txt
git commit --amend 
```

如果您不需要修改提交日志消息，最后一个命令可以是

```
git commit --amend -C HEAD 
```

它甚至没有打开你的编辑器来编辑提交日志，它只是修改它。

# bash - bash 脚本改进

> ID：13993204
> 
> 赞同：2
> 
> 时间：2012-12-21T15:54:20.920
> 
> 标签：bash

我创建了以下脚本，将定义的旧文件从源目录移动到目标目录。它运行良好。

```
#!/bin/bash

echo "Enter Your Source Directory"
read soure

echo "Enter Your Destination Directory"
read destination 

echo "Enter Days"
read days

 find "$soure" -type f -mtime "-$days" -exec mv {} "$destination" \;

  echo "Files which were $days Days old moved from $soure to $destination" 
```

这个脚本很好地移动了文件，但它也移动了我不想要的源子目录的文件。它不应该占用子目录文件。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:56:29.930

添加`-maxdepth 1`到您的`find`命令中，使其不会进入子目录。

从`find`手册页：

```
-maxdepth levels
    Descend  at  most  levels (a non-negative integer) levels of directories below the command line arguments. 
```

# android - sendMultipartTextMessage 让我得到空指针android

> ID：13993205
> 
> 赞同：0
> 
> 时间：2012-12-21T15:54:27.360
> 
> 标签：android, smsmanager

我发现在搜索短信时，如果它太长，它可能会返回一个空指针异常。我已将其更改为 sendMultipartTextMessage 但我仍然收到空指针异常。**此外，问题在于消息没有分成多个部分。**

这是我的代码：

```
private void sendSMS(String phoneNumber, String message) {

        System.out.println("SMS: " + message);
        System.out.println("to " + phoneNumber);

        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";
        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);
        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);
        // ---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(SENT));

        // ---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(DELIVERED));

        SmsManager sms = SmsManager.getDefault();
        Log.d("SMSTest", "Sending '" + message + "' in multiple parts.");
        ArrayList<String> parts = sms.divideMessage(message);
        Log.d("SMSTest", parts.size() + " parts:");
        for (String string : parts) {
            Log.d("SMSTest", string);
        }
        ArrayList<PendingIntent> sentList = new ArrayList<PendingIntent>();
        ArrayList<PendingIntent> deliveredList = new ArrayList<PendingIntent>();
        for (int i = 0; i < parts.size(); i++) {
            sentList.add(sentPI);
            deliveredList.add(deliveredPI);
        }
        sms.sendMultipartTextMessage(phoneNumber, null, parts, sentList,
                deliveredList);
    } 
```

这是我的日志：

```
12-21 17:53:08.291: D/SMSTest(12578): Sending ' .. content of the message...'
12-21 17:53:08.311: D/SMSTest(12578): 1 parts:
12-21 17:53:08.321: E/AndroidRuntime(12578): FATAL EXCEPTION: main
12-21 17:53:08.321: E/AndroidRuntime(12578): java.lang.NullPointerException
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.os.Parcel.readException(Parcel.java:1328)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.os.Parcel.readException(Parcel.java:1276)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at com.android.internal.telephony.ISms$Stub$Proxy.sendText(ISms.java:613)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.telephony.SmsManager.sendTextMessage(SmsManager.java:109)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.telephony.SmsManager.sendMultipartTextMessage(SmsManager.java:269)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.telephony.gsm.SmsManager.sendMultipartTextMessage(SmsManager.java:131)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at com.example.senddemo.MainActivity.sendSMS(MainActivity.java:358)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at com.example.senddemo.MainActivity.access$0(MainActivity.java:288)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at com.example.senddemo.MainActivity$2.onClick(MainActivity.java:119)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.view.View.performClick(View.java:2538)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.view.View$PerformClick.run(View.java:9152)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.os.Handler.handleCallback(Handler.java:587)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.os.Looper.loop(Looper.java:130)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at java.lang.reflect.Method.invokeNative(Native Method)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at java.lang.reflect.Method.invoke(Method.java:507)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-21 17:53:08.321: E/AndroidRuntime(12578):    at dalvik.system.NativeStart.main(Native Method) 
```

# c - “do { free(x); x = NULL; } while (0);”有什么区别？和“{ free(x); x = NULL; }”

> ID：13993208
> 
> 赞同：3
> 
> 时间：2012-12-21T15:54:34.270
> 
> 标签：c

```
#define FREE1(x) do { free(x); x = NULL; } while (0);
#define FREE2(x) { free(x); x = NULL; } 
```

这些宏有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T16:02:55.697

如果您的问题是关于`do/while`宏中的技巧，那没有区别，因为您显然在第一个宏定义中犯了错误，这完全违背了技巧的目的。你把`;`. `whole (0)`正确的实现绝对*不*应该在第一个宏中包含`;`after 。`while (0)`这就是`do/while`诀窍的全部意义所在。

现在这段代码将无法编译

```
if (condition)
  FREE2(arg);
else
  /* something else */; 
```

此代码也不会编译

```
do 
  FREE2(arg);
while (condition); 
```

该`do/while`技术的重点是使此代码编译。`FREE1`但由于上述错误，它也不会与您的宏一起编译。

但是，如果您正确定义了第一个宏

```
#define FREE1(x) do { free(x); x = NULL; } while (0)
// No `;` at the end!!! 
```

那么第一个宏将在上述代码示例中完美运行。这实际上是人们`do/while`在多语句宏中使用该技术的原因 - 使其在此类上下文中与普通函数正确且一致地工作。

PS 作为旁注，所有此类技术的目的是将一组*多个*语句转换为一个复合语句。在您的特定情况下，`free(x); x = NULL;`可以将序列重新实现为*单个*表达式`(free(x), x = NULL)`，从而无需任何多语句宏技术，即

```
#define FREE3(x) (free(x), x = NULL) 
```

也会起作用。但这是个人喜好的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T16:04:20.820

实际上，没有区别，C-wise。

原因是您在以下内容中包含了一个尾随分号：

```
#define FREE1(x) do { free(x); x = NULL; } while (0); 
```

[此处描述了](https://stackoverflow.com/questions/154136/do-while-and-if-else-statements-in-c-c-macros)您通常要使用的原因`do...while(0)`，是您通常希望在块中使用它：`if...else`

```
if (...)
    FREE(x);
else
   ... 
```

但是有了上面的用法和宏：

```
if (...)
   do { free(x); x = NULL; } while (0);;
else
   ... 
```

...和...

```
if (...)
    { free(x); x = NULL; };
else
    ... 
```

...都是不正确的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T16:05:22.043

[两者都是解决C/C++ 宏](https://stackoverflow.com/a/154138/367273)中的 Do-While 和 if-else 语句中讨论的分号问题的半生不熟的尝试。

定义此宏的更好方法是

```
#define FREE3(x) do { free(x); x = NULL; } while (0) 
```

（没有尾随分号。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:01:09.100

这：

```
#define FREE1(x) do { free(x); x = NULL; } while (0); 
```

只执行一次，因此它与以下内容相同：

```
#define FREE2(x) { free(x); x = NULL; } 
```

但是在汇编代码中有一个更多的分支。即使现代编译器可能会对其进行优化，所以在所有概率下，即使生成的汇编代码也将是相同的。

# asp.net-mvc - ASPXAUTH cookie 在 jquery Ajax 调用中丢失

> ID：13993209
> 
> 赞同：4
> 
> 时间：2012-12-21T15:54:34.417
> 
> 标签：asp.net-mvc, jquery, forms-authentication

出于某种原因，在 2 或 3 次调用之后，我的 cookie 不再通过。通常，在 3 个请求之后，我的 cookie 从请求中消失。我不知道为什么。我没有进行任何跨域调用。我确实注意到，在响应 Cookie 中返回的 ASPXAUTH cookie（在 Google Chrome、网络检查器中查看）并且是空的响应之一。在“过期”列中，它显示“会话”。因此，似乎我的 cookie 被传回为空，这就是身份验证失败的原因。我只是不知道为什么它适用于 2 次调用然后得到传回。我已经厌倦了将 cookie 设置为不过期，但这不起作用。服务器返回的响应是对 MVC 控制器的调用以返回部分视图。

正常请求：

```
 Accept:application/json, text/javascript, */*; q=0.01
    Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
    Accept-Encoding:gzip,deflate,sdch
    Accept-Language:en-US,en;q=0.8
    Connection:keep-alive
    Content-Length:271
    Content-Type:application/json; charset=UTF-8
    Cookie:.ASPXAUTH=7B8EFA9A1F81CE1D400A054827A34719FF7E00161FA065A9637DF42A6F46CE2ECDA40216B88ADCADC0DBA712109BCDCD1A0E712019556C72CA76B52041057C480C6C8274CF0BCEA9DE4891457218B52EB96177754064DC24B0FEC1A0BF51364B16294CED53BAD0CEFC37AA70B92CF29407A307548135C4B7D35060BAE3DDE7031332049B67A62D108F84C1167552D73842B5D4CB83706A6B5787F019184371A8050364F8DFA83F7F1F8AE5A7CF8AB341F25D01E9761C735803D8AAFC97488FF3C7E0B272BCDB669B5E7E17C964402FC9B5E9514A1C105E172D09AB36077C961D5B1079AF6B10B17199AC3320BAC7F0A4A9C28987992D71385531A1E78B18AF7B
    Host:localhost:3182
    Origin:http://localhost:3182
    Referer:http://localhost:3182/Admin/UserAdmin/Profile/e82228b1-abbb-4ecf-a259-12b66f5f07ba
    User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
    X-Requested-With:XMLHttpRequest 
```

cookie消失后的请求：

```
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:274
Content-Type:application/json; charset=UTF-8    
Host:localhost:3182
Origin:http://localhost:3182
Referer:http://localhost:3182/Admin/UserAdmin/Profile/e82228b1-abbb-4ecf-a259-12b66f5f07ba
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
X-Requested-With:XMLHttpRequest 
```

**更新** 在这个问题上挣扎了一段时间后，我决定不使用表单身份验证并自己动手。我将在未来几天在 GIT 上发布我的解决方案。据我所见，Ajax 请求和表单身份验证后的响应出现了一些奇怪的情况。出于某种原因，即使在生成实际响应之前它是有效的，也会发回一个空的身份验证 cookie。

# python - 覆盖父类的 __str__

> ID：13993227
> 
> 赞同：-3
> 
> 时间：2012-12-21T15:55:38.127
> 
> 标签：python, class, overriding

我有一个问题，我似乎无法找到解决方案。我有 3 个类`A`，`B`并且`C`，`A`作为超类。

```
class A(object):
    def __str__(self):
        self._general_representation(str)

    def _general_representation(self,to_string):
        (nominal_value, std_dev) = (self._nominal_value, self.std_dev())

    def std_dev(self)
        a = error_components()*something

    def error_components(self):
        return something

class B(A):

class C(B): 
```

我希望类`C`能够覆盖“祖父母”类的`std_dev()`and `error_components()`。我怎样才能做到这一点？我无法更改 A 类和 B 类。在 python 3.3 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:56:47.950

只需在 C 类上定义它们。函数是在 上查找的`self`，而不是在定义调用方法的类上。

```
class C(B):
    def std_dev(self)
        return self.error_components() * something + something_else_again

    def error_components(self):
        return something_entirely_different 
```

# rsync - 为什么 rsync 使用没有 p 选项的 mkdir

> ID：13993236
> 
> 赞同：13
> 
> 时间：2012-12-21T15:56:13.850
> 
> 标签：rsync, mkdir

如我所见`rsync`，如果文件路径中的某些目录不存在，则无法同步文件。为什么它不使用`mkdir -p`命令创建此目录？也许它有一个选择？`-r`在这种情况下选项不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T16:14:48.907

有人在这里问了类似的问题：

[rsync：如何配置它以在服务器上创建目标目录？](https://stackoverflow.com/questions/1636889/)

它看起来不像`rsync`能够做到这一点。`mkdir -p`在执行`rsync`. 如果您的目标目录位于不同的服务器上，您可以`mkdir -p`通过`ssh`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-18T08:37:23.563

我遇到了和你一样的问题，如果远程目标的目录是“ `/root/test`”，我想用`rsync`我的文件复制到远程目录“ `/root/test/aaa/bbb`”，那么“ `failed: No such file or directory (2)`”会详细说明。最好的解决方案是，给出命令“ `ssh <username>@<remoteHostIP> mkdir -p <absolute_path>`”在远程主机上递归创建子目录。然后使用`rsync` 命令将成功。

# java - 使用 AST 时 Eclipse 中的 NoClassDefFoundError

> ID：13993241
> 
> 赞同：2
> 
> 时间：2012-12-21T15:56:31.340
> 
> 标签：java, eclipse, runtime, abstract-syntax-tree

当尝试在 Eclipse 的 java 项目中使用 AST 时，我收到此错误消息是运行时：线程“main”java.lang.NoClassDefFoundError 中的异常：org/eclipse/core/runtime/IAdaptable

我尝试将 core.runtime jar 添加到构建路径中，但这没有帮助。

代码一开始就失败了：

```
AST ast = AST.newAST(AST.JLS4); 
```

我还尝试在我的计算机中添加所有罐子，但无济于事。有任何想法吗？

堆栈跟踪：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/eclipse/core/runtime/IAdaptable
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at testRun.main(testRun.java:44)
Caused by: java.lang.ClassNotFoundException: org.eclipse.core.runtime.IAdaptable
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 25 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:13:27.200

除了添加`org.eclipse.jdt.core_[version_number].jar`到您的构建路径之外，您还需要添加**`org.eclipse.equinox.common_[version_number].jar`**.

# c# - 文字十六进制值被转换？

> ID：13993247
> 
> 赞同：-2
> 
> 时间：2012-12-21T15:56:58.067
> 
> 标签：c#, literals, settings

好的，所以这段代码运行良好，没有问题，然后突然停止工作。

```
private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox2.SelectedIndex == 0)
        {
            Settings.Default.ScaleVendor = 0x0B67;
            Settings.Default.ScaleProductID = 0x555E;

        }
        if (comboBox2.SelectedIndex == 1)
        {
            Settings.Default.ScaleVendor = 0x0EB8;
            Settings.Default.ScaleProductID = 0xF000;
        }
        Settings.Default.Save();

    } 
```

现在，每次将 Index 更改为 0 时，都会将 0x0B67 的值保存为 2919，将 0x555E 的值保存为 21854。同样的故事，索引为 1 具有不同的值。我不记得更改与任何此代码有关的任何内容，但由于某种原因，它接受了文字十六进制值并且不再接受。任何想法为什么它现在正在转换值？该设置是用户级别的 int。

更新：

秤被拔掉，这就是为什么它没有在设备阵列中找到供应商和产品的原因，而不是因为十六进制错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:00:07.517

> 现在每次更改索引时，都会将 0x0B67 的值保存为 2919，将 0x555E 的值保存为 21854。

这些是相同的值。这段代码：

```
Settings.Default.ScaleVendor = 0x0B67; 
```

完全*等同*于：

```
Settings.Default.ScaleVendor = 2919; 
```

在这两种情况下，它们只是整数值 2919 - 无论您用十进制还是十六进制表示，都没有区别。

现在你可能已经改变了你对值*所做*的事情......但是你碰巧使用十六进制作为整数文字的事实*永远不会*相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:58:30.387

如果您的代码没有更改，它*永远不会按字面显示十六进制值。*如果您希望它们按原样显示，请使用字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:02:32.713

您只是使用使用十六进制表示法编写的值。所以 0x0B67 和 2919 是同一个数字。如果要获取十六进制格式的数字，则：

```
Console.WriteLine("{0:x}", Settings.Default.ScaleVendor)
// or
Console.WriteLine(Settings.Default.ScaleVendor.ToString("x")) 
```

# joomla2.5 - 当相同列表显示在主位置时，将类别列表隐藏在侧位置

> ID：13993252
> 
> 赞同：0
> 
> 时间：2012-12-21T15:57:23.433
> 
> 标签：joomla2.5

通过菜单，我让我的用户访问包含特定类别文章列表的页面（我们称之为起始页）。在主要位置左侧的位置，我显示相同的类别文章列表。如果用户选择其中一篇文章，这是有道理的，因为他仍然可以看到同一类别中的其他文章。但是，当用户仍在起始页上时，如何隐藏侧边栏中的类别列表？

最好的问候， 萨沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:47:47.353

答案并不容易，因为没有人知道您网站的真实结构。您可以定义此模块（我希望是它的一个）的放置位置。例如，您只能在文章所属的类别中显示它。然后你把它从起始页中隐藏了。

如果“起始页”不是真正的起始页，例如类别概述，并且您只想在用户打开文章时显示此菜单，我不相信您可以使用标准的 joomla 可能性来做到这一点。[因此，您可以安装像Advanced Module Manager](http://extensions.joomla.org/extensions/style-a-design/modules-management/10307)这样的扩展程序，您可以在其中精确定义模块何时显示或不显示。例如：仅在文章中，依赖于时间和日期、类别、菜单……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T22:39:02.873

转到模块管理器 > 模块文章类别（对于您要在主页上隐藏的列表）。

在此窗口左下角的菜单分配下，取消选择主页并保存。

如果主页在多个菜单中，您可能需要对每个菜单重复此操作。

祝你好运！

# ruby-on-rails - 声明“belongs_to model_name”是否不如声明“belongs_to model_id”安全？有什么不同吗？

> ID：13993253
> 
> 赞同：0
> 
> 时间：2012-12-21T15:57:30.043
> 
> 标签：ruby-on-rails

说我的推文属于用户

声明：

```
attr_accessible :user 
```

或者

```
attr_accessible :user_id 
```

或者只是两者

```
attr_accessible :user, :user_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:15:49.720

如果您`User` `has_many :tweets`的用户没有 tweet_id 或 tweet。它会有一系列推文。`attr_accessible`将属性列入白名单，以便可以批量分配它们。

您到底想通过定义`attr_accessible :tweet`?

而不是使用 attr_accessible 为 :tweet 或 :user Rails 提供

`accepts_nested_attributes_for :tweets`

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# opengl - Opengl 3.2：如何使用纹理图集？

> ID：13993258
> 
> 赞同：2
> 
> 时间：2012-12-21T15:57:40.433
> 
> 标签：opengl

现在，我一直将我的天空盒渲染为具有 6 个不同纹理和 6 个 VBO 的 6 个不同的四边形，但我真的想将它们合并为 1 个具有 1 个 VBO 的立方体，所以我尝试使用纹理图集，但我遇到了问题它。当我尝试只设置一个带有 ST 坐标的纹理文件时（这是正确的方式吗？）我将整个图集加载为每一侧的纹理。

这是正面的 ST 坐标（我有 4x4 地图集，大小为 4096x4096）：

```
(0.25f, 0); //left top!
(0.5f, 0); //right top!
(0.5f, 0.25f); //right down!
(0.25f, 0.25f); //left down! 
```

有人可以解释一下如何创建多纹理对象（例如立方体）吗？我应该包括哪些额外的代码来挖掘，而不是通常的“一个纹理 - 一个对象”渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:30:21.193

为什么不简单地使用立方体贴图纹理？它是具有立方体拓扑结构的单个纹理，您甚至可以将立方体的顶点位置双重用作纹理坐标。

# asp.net - IIS7 Url Rewrite 添加 www 前缀但不在 IP 中

> ID：13993259
> 
> 赞同：0
> 
> 时间：2012-12-21T15:57:45.113
> 
> 标签：asp.net, iis-7, url-rewriting

我在这里遇到了一个非常有趣的情况，希望你能帮助我。

如果用户输入 domain.com，我会借助 web.config 中的以下代码将其重定向到 www.domain.com：

```
 <rules>
    <rule name="Add WWW prefix" >
      <match url="(.*)" ignoreCase="true" />
      <conditions>
        <add input="{HTTP_HOST}" negate="true" pattern="^www\.(.+)$" />
      </conditions>
      <action type="Redirect" url="http://www.{HTTP_HOST}/{R:1}"
           appendQueryString="true" redirectType="Permanent" />
    </rule> 
```

这既简单又干净，就像一个魅力。但是 domain.com 也有一个像 19.12.121.121 这样的专用 IP。当我尝试使用 IP 连接我的站点时，web.config 将我重定向到：www.19.12.121.121。

所以问题是，我怎样才能防止这种情况发生？它会重定向域但IP？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:48:23.093

因为我可以看到您已经在使用 URL 重写：

这是我使用的规则，它适用于我，包括 IP 地址。

```
<rule name="Redirect to WWW" patternSyntax="Wildcard" stopProcessing="true">
<match url="*" />
<conditions logicalGrouping="MatchAll">
    <add input="{HTTP_HOST}" negate="true" pattern="www.(YOUR DESIRED URL).com" />
</conditions>
<action type="Redirect" url="http://www.(YOUR DESIRED URL).com/{R:1}" redirectType="Permanent" />
</rule> 
```

# asp.net-mvc-3 - 动态生成匿名类型

> ID：13993261
> 
> 赞同：1
> 
> 时间：2012-12-21T15:57:45.783
> 
> 标签：asp.net-mvc-3, c#-4.0

我有一个反序列化此 xml 的应用程序：

```
<SpecialRoutesList>
    <SpecialRoutes>
        <SpecialRoute>
            <Name>TestRoute1</Name>
            <Pattern>TestRouteUrl1</Pattern>
            <Defaults>
                <Controller>Home</Controller>
                <Action>TestRoute1</Action>
                <Params>
                    <Key>id</Key>
                    <Value>1</Value>
                </Params>
            </Defaults>
        </SpecialRoute>
        <SpecialRoute>
            <Name>TestRoute2</Name>
            <Pattern>TestRouteUrl2</Pattern>
            <Defaults>
                <Controller>Home</Controller>
                <Action>TestRoute2</Action>
                <Params>
                    <Key>id</Key>
                    <Value>1</Value>
                </Params>
            </Defaults>
        </SpecialRoute>
    </SpecialRoutes>
</SpecialRoutesList> 
```

我有兴趣使用此反序列化信息来映射每条路线：

```
foreach(SpecialRoute route in SpecialRoutesList.SpecialRoutes) {
    routes.MapRoute(route.Name, route.Pattern, new { ?????????? }, ????????);
} 
```

要设置路由的默认值，需要使用匿名类型，那么如何使用这些匿名类型，在运行时从我的反序列化类中获取键和值？

谢谢

问候

何塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:00:56.880

`routes.MapRoute()`从默认值构建[RouteValueDictionary](http://msdn.microsoft.com/en-us/library/system.web.routing.routevaluedictionary.aspx)。因此，您可以从您的 xml 反序列化/构建`Dictionary<string,object>`并将其传递给`routes.MapRoute()`. 与约束参数相同。

更新：构建为字典的默认值

```
var defaults = new Dictionary<string, object> {{"controller", "Account"}, {"action", "Login"}};

routes.MapRoute(
  "Default", // Route name
  "{controller}/{action}", // URL with parameters
  defaults
); 
```

# core-data - 在 NSManagedObjectContext 中保存更改的核心数据问题

> ID：13993263
> 
> 赞同：0
> 
> 时间：2012-12-21T15:58:01.803
> 
> 标签：core-data, nsmanagedobject, nsmanagedobjectcontext

我在处理我的 Core Data 时遇到问题`NSManagedObjectContext`。

我可以`NSManagedObject`在我的中创建`NSManagedObjectContext`，但我未能保存该值。

这是我得到的：

```
_lesson.title = _titleField.text;

int priority = [_priorityField.text intValue];
int difficulty = [_difficultyField.text intValue];
int time = [_timeField.text intValue];
int sortIndex = 0;
if ( time == 0 )
{
    sortIndex = 101;
}
else
{
    sortIndex = priority * ( difficulty / time );
}
_lesson.priority = [NSNumber numberWithInt:priority];
_lesson.difficulty = [NSNumber numberWithInt:difficulty];
_lesson.time = [NSNumber numberWithInt:time];
_lesson.sortIndex = [NSNumber numberWithInt:sortIndex];
NSError* error = nil;
[[(AppDelegate*)[[UIApplication sharedApplication] delegate] managedObjectContext] save:&error]; 
```

保存之前的一切工作正常，我曾经`NSLog`验证每个值是否真的保存在`_lesson`.

并`_lesson`从这里发送：

```
if ( [[segue identifier] isEqualToString:@"addLesson"] )
{
    LessonViewController* destination = [[LessonViewController alloc]init];
    Lesson* lesson = (Lesson*)[NSEntityDescription insertNewObjectForEntityForName:@"Lesson" inManagedObjectContext:_managedObjectContext];
    destination.lesson = lesson;
}
else if ( [[segue identifier] isEqualToString:@"editLesson"] )
{
    LessonViewController* destination = [[LessonViewController alloc]init];
    NSIndexPath* index = [_tableView indexPathForCell:(UITableViewCell*)sender];
    [_managedObjectContext deleteObject:[_lessonArray objectAtIndex:index.row]];
    Lesson* lesson = (Lesson*)[_lessonArray objectAtIndex:index.row];
    destination.lesson = lesson;
} 
```

调试两个小时后，我找不到我的错误。请帮忙！

我将在下面包含我的完整代码：

[https://www.dropbox.com/sh/eu62ie9svbbqdmm/u1hYUICfjy](https://www.dropbox.com/sh/eu62ie9svbbqdmm/u1hYUICfjy)

那是我的完整源代码。（我复制并粘贴并弄得一团糟。所以，Dropbox！）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:19:31.350

这条线看起来很可疑：

```
[_managedObjectContext deleteObject:[_lessonArray objectAtIndex:index.row]]; 
```

您在将*Lesson*对象传递给 之前删除了该对象`LessonViewController`，因此保存上下文将从存储中删除该对象，而不是像您可能想要的那样保存（修改的）对象。

在我看来，您应该只删除代码中的那一行。

* * *

*添加：*您的方法中有一个错误`prepareForSegue`：您创建了一个*新*的视图控制器

```
LessonViewController* destination = [[LessonViewController alloc]init]; 
```

相反，您必须使用序列的目标视图控制器：

```
LessonViewController *destination = [segue destinationViewController]; 
```

# javascript - jcarousel 在 chrome 中不是 100% 时不在位置

> ID：13993264
> 
> 赞同：0
> 
> 时间：2012-12-21T15:58:02.400
> 
> 标签：javascript, jquery, carousel

我使用 Sorgilla jcarousel，只是想知道为什么只有在 Google Chrome 中，当我放大或缩小，而不是 100% 时，旋转木马的位置完全关闭。我不确定要发布什么特定代码，但这里是调用的 2 个轮播。两者都有同样的问题。我假设它与像素没有调整大小或其他东西有关，但这在其他浏览器中不是问题。

任何帮助都会非常感谢。

```
<script type="text/javascript">
jQuery(document).ready(function() {
jQuery('#mycarousel').jcarousel({
    start: 2, // Configuration goes here
    wrap: "circular",
    scroll: 1,
    auto:7
});
});

jQuery(document).ready(function() {
jQuery('#top-carousel').jcarousel({
    start: 2, // Configuration goes here
    wrap: "circular",
    auto: 12,
    scroll: 1

});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:12:05.897

您可以使用对我来说很好的解决方法。这不是最好的解决方案，您绝对可以尝试改进它。这是更改代码的方法

```
jQuery(document).ready(function() {
var animation = $.browser.safari ? null : "normal";
jQuery('#mycarousel').jcarousel({
    start: 2, // Configuration goes here
    wrap: "circular",
    scroll: 1,
    auto:7,
    animation: animation,
        itemLoadCallback: {
            onBeforeAnimation: function (instance) {
                if ($.browser.safari) {
                    var itemPos = instance.first;
                    var pageWidth = instance.container.width();
                    var expectedItemPos = pageWidth * (1 - itemPos);
                    instance.container.prevObject.animate({ "left": expectedItemPos + "px" });
                }
            }
        }
});
}); 
```

上面的代码用于从左到右的轮播。有关 jcarousel 配置的附加信息，您可以在[此处找到](http://sorgalla.com/projects/jcarousel/#Configuration)

# javascript - html 图像映射 + jquery maphilight - 突出显示与数组中的值匹配的所有区域 id

> ID：13993265
> 
> 赞同：1
> 
> 时间：2012-12-21T15:58:03.007
> 
> 标签：javascript, jquery, html, imagemap

我有一个简单的 html 图像映射和一个带有状态名称的简单数组，我希望数组中的所有状态都在 html 图像映射中突出显示。这是我的初始代码，我所有尝试引用 html 图像地图的区域 id 均未成功：

```
<div id="mapchart">

    <img src ="C:\Users\userA\Desktop\folder\usmap.png" border="0" alt="US Map" usemap ="#usmap" class="maphilight" />
    <map name="usmap">
    <area shape ="poly" id="CO" title="CO" alt="CO" coords ="160, 132, 152, 185, 225, 193, 229, 139" href ="javascript:alert('CO');" />
    <area shape ="poly" id="TX" title="CO" alt="TX" coords ="214, 199, 210, 261, 167, 258, 168, 262, 170, 262, 170, 267, 185, 281, 185, 285, 187, 287, 187, 290, 188, 294, 189, 296, 193, 299, 197, 300, 203, 304, 212, 294, 228, 294, 237, 309, 239, 315, 244, 323, 247, 325, 248, 331, 253, 335, 260, 344, 264, 346, 269, 347, 272, 350, 272, 332, 278,319, 315, 297, 319, 277, 311, 266, 311, 245, 300, 241, 275, 241, 262, 238, 246, 233, 247, 201, 214, 199" href ="javascript:alert('TX');" />

    </map>
    </div>

var states = ["TX", "CO"]; //initially i just want to highlight these 2 states

 $(function () {
           $.each(states, function (index, value) {

                $('.maphilight .TX').maphilight({ alwaysOn: true }); //this doesn't work; i've also tried several variations of this but i'm not able to reference the specific area that matches the corresponding value in the array.

            });

        }); 
```

关于我如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:03:24.103

`area`标签是 的子级，`map`而不是`image`.

你应该选择`$('map[name=usmap] #TX')`，而不是`$('.maphilight .TX')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:05:04.223

.maphilight 不是 .TX 的祖先.. 它是父级的兄弟.. TX 也是一个 ID - 所以你可以使用数组中的值传入 ID 选择器 - 假设你保持你`ID`的唯一

```
$(function () {
      $.each(states, function (index, value) {
           $('#'+ value).maphilight({ alwaysOn: true }); 
      });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:06:23.517

如果有人遇到同样的问题，以下对我有用：

```
//initializes maphilight
$(function () {
    $('.maphilight').maphilight({});

    //highlight all values in array
    $.each(states, function (index, value) {

       var data = $('#' + value).mouseout().data('maphilight') || {};
       data.alwaysOn = !data.alwaysOn;
       $('#' + value).data('maphilight', data).trigger('alwaysOn.maphilight');

    });

}); 
```

# php - 持久日期戳 - 写入/读取到文件

> ID：13993274
> 
> 赞同：0
> 
> 时间：2012-12-21T15:58:48.403
> 
> 标签：php

我试图通过将其写入文本文件然后在每次查看页面时将其读回来设置持久日期戳。

```
// set the date, w/in if statements, but left out for brevity
$cldate = date("m/d/Y");
$data = ('clickdate' => '$cldate');  // trying to set a variable/value pair
 - It's throwing an Error on this !
// Open an existing text file that only has the word "locked" in it.
$fd = fopen("path_to_file/linktrackerlock.txt", 'a') or die("Can't open lock file");
// Write (append) the pair to the text file
fwrite($fd, $data); 
// further down …
// Open the text file again to read from it
$rawdata = fopen("path_to_file/linktrackerlock.txt", 'r');
// Read everything in from the file
$cldata = fread($rawdata, filesize("path_to_file/linktrackerlock.txt"));
fclose($rawdata);
// Echo out just the value of the data pair
echo "<div id='Since'>Clicks Since: " . $cldata['clickdate'] . "</div>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:03:06.110

```
$data = ('clickdate' => '$cldate'); 
```

需要是：

```
$data = array('clickdate' => $cldate); 
```

此外，您需要将字符串传递给`fwrite`语句，因此无需创建数组：

```
$cldate = date("m/d/Y");
if($fd = fopen("path_to_file/linktrackerlock.txt", 'a')){
    fwrite($fd, $cldate); 
    fclose($fd);
}else{
    die("Can't open lock file");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:08:46.697

代码从根本上被破坏了。您正在尝试创建一个数组，然后将该数组写入文件：

```
$data = array('clickdate' => '$cldate');
        ^^^^^---missing 
```

然后你有

```
fwrite($fd, $data); 
```

但所做的只是将单词写入`Array`您的文件，而**不是**数组的内容。您可以自己尝试一下...只是做`echo $data`，看看你得到什么。

您可能可以通过以下方式使整个事情变得更简单：

```
$now = date("m/d/Y");
file_put_contents('yourfile.txt', $now);

$read_back = file_get_contents('yourfile.txt'); 
```

如果您确实坚持使用数组，那么您必须序列化，或者使用另一种编码格式，例如 JSON：

```
$now = date("m/d/Y");
$arr = array('clickdate' => $now);
$encoded = serialize($arr);

file_put_contents('yourfile.txt', $encoded);

$readback = file_get_contents('yourfile.txt');
$new_arr = unserialize($readback_encoded);
$new_now = $new_arr['clickdate']; 
```

# ios - 移动现有的 segue(s)

> ID：13993277
> 
> 赞同：7
> 
> 时间：2012-12-21T15:59:09.240
> 
> 标签：ios, xcode, uistoryboard, uistoryboardsegue

我想在现有的 XCode iOS 故事板中将一个视图控制器换成另一个，但我不想重新创建转到它的 segues。是否可以移动或调整现有转场的目的地？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:02:59.810

我相信您确实需要创建新的转场，但这就像在转场源和新场景之间拖动控件一样简单。如果您的代码正在执行任何需要故事板 id 的操作（例如`prepareForSegue`or `performSegue`），那么只需为您的新 segue 应用相同的故事板 id，您无需更改代码。如果您使用的是自定义 segue，则可以只使用相同的 segue 类，因此您无需因为目标更改而更改代码。如果你的 segue 的来源是一个按钮或类似的东西，当你对新场景进行 segue 时，你的旧 segue 会自动删除，这样也简化了过程。

简而言之，您可能确实需要重新创建转场，但您可能不需要过多地更改代码来支持它。

# javascript - 正则表达式：匹配字符串中的所有双引号并添加逗号

> ID：13993279
> 
> 赞同：0
> 
> 时间：2012-12-21T15:59:11.537
> 
> 标签：javascript, regex, json

我需要像这样转一个字符串：

```
' query: "help me" distance: "25" count: "50" ' 
```

变成如下所示的 javascript 对象或 json 字符串：

```
'{ query: "help me", distance: "25", count: "50" }' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:04:12.777

像这样的东西，也许：

```
var query = ' query: "help me" distance: "25" count: "50"';
query = '{' + query.replace(/"(?=\s)/g, '",') + '}';
console.log(query); 
```

使用该前瞻表达式，我只需在所有双引号后加上逗号，然后是空格符号。

话虽如此，我强烈建议重新考虑构造参数的方法：不知何故，我觉得你可以通过简单`JSON.stringify`的 - 参数来逃脱。它将更加防弹 - 也更容易解析。

# android - 如何检测通知区域的位置？

> ID：13993284
> 
> 赞同：7
> 
> 时间：2012-12-21T15:59:48.240
> 
> 标签：android

有没有办法以编程方式检测通知区域是位于屏幕顶部还是位于右下角（就像大多数平板电脑一样）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T01:37:11.763

通知始终显示在显示屏顶部的 25dp 高的状态栏中，但API[级别](http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html)*11* (Honeycomb) 至16（果冻豆前 MR1）。在这些设备上，显示屏底部有一个 48dp 高的“组合系统栏”。`sw600`

最简单的检查方法是通过合格的资源；也就是说，将您的顶部状态栏假设布局放入 中`layout/foo.xml`，然后将底部系统栏版本放入`layout-sw600dp/foo.xml`. 最后，由于这些大型设备现在使用 Android 4.2 (API 17) 的顶部状态栏，您需要切换回`layout-sw600dp-v17/foo.xml`.

如果您只想要一个布尔值来告诉您状态栏是否位于顶部，`layout`请在上面的示例中替换为`values`，并将 a`<bool>`放入`foo.xml`其中，除非在这种`values-sw600dp`情况下。

# nhibernate - 在 NHibernate 中加载实体时出现奇怪的错误

> ID：13993285
> 
> 赞同：2
> 
> 时间：2012-12-21T15:59:50.293
> 
> 标签：nhibernate, clr, entities, bag

尝试加载实体时，我在 NHibernate.Collection.PersistentBag 类中遇到错误：

*值“MyProject.DomainModel.Operator”不是“MyProject.DomainModel.Operator”类型，不能在此通用集合中使用。*

请注意，这两种值类型完全相同。我已经在比较器工具中仔细检查了它们。

NHibernate 未能将值添加到 line bag.Add(element) 的 List 集合中。

**元素**变量实际上是 *object{DecoratorAopProxy_9cf850624c7e4ef9a8e2d9694bed26fd}* 类型。我注意到可以成功添加到此列表的对象的类型为*object{MyProject.DomainModel.Operator}*。此类型是从“类型”列中的 VS2012 中的“快速监视”功能获得的。

有没有人知道为什么 NHibernate 将这个特定对象的类型更改为代理，而其他人有纯实体类型？

```
<class name ="PersonRole" table ="tblPersonRole" mutable ="false">
    <id name="Id" column="PersonRoleID" type="Int32" access ="nosetter.lowercase-underscore">
      <generator class="native"/>
    </id>
    <discriminator  formula="case when RoleID in (2,4,5,6) THEN RoleID ELSE 0 END" />
   <subclass discriminator-value="4" name="AccountManagerRole">      
      <bag name="Operators" >
        <key column="OperatorID"></key>
        <one-to-many class="BaseOperator"/>
        <loader query-ref="LoadAllocatedOperators_ACCOUNTMANAGER"/>
      </bag>
    </subclass>
</class>

<class name="BaseOperator" table="tblOperator" lazy="true" >      
    <id name="Id" column="OperatorID" access ="nosetter.lowercase-underscore" type="Int32" unsaved-value="null">
      <generator class="native" />
    </id>
    <discriminator column="OperatorType" type="string"  />
    <subclass discriminator-value ="OPR" name ="Operator" lazy="true">
      <bag name="Customers" access="nosetter.camelcase-underscore" lazy="true" cascade="all-delete-orphan" inverse="true" fetch="join"  >
        <key column="OperatorId" />
            <one-to-many class="MyProject.DomainModel.Customer, MyProject" not-found="ignore" />
        </bag>
        <subclass discriminator-value ="OPR2" name ="Operator2"  lazy="true" />
    </subclass>
</class> 
```

所以我做了类似“*从 AccountManagerRole accManager 中选择不同的 accManager* ”的操作，这导致操作员使用他们的 ID 一次加载一个，并且 NHibernate 在其中一个上崩溃。

# mysql - 仅在日期小于 14 天前显示

> ID：13993286
> 
> 赞同：1
> 
> 时间：2012-12-21T15:59:55.967
> 
> 标签：mysql

我有三张表——notices、notices_read 和 company。Notices 包含显示在 Web 应用程序中的客户通知列表，notices_read 指示他们已单击并阅读消息，因此在公司持有公司信息（包括其加入日期）时不会再次显示。此外，我只想将通知显示给加入时间超过 14 天的客户。

除了 14 天前的部分之外，一切正常 - 如果我删除该行，则通知正确显示取决于 notices_read 中是否有值，但如果我在其中添加日期行，虽然没有错误，但不会返回任何内容。

```
companies
+-----------------+
| id | datestamp  |
+-----------------+
| 1  | 2012-12-20 |
| 2  | 2012-12-20 |
| 3  | 2012-11-20 |
| 4  | 2012-11-20 |
+-----------------+

notices_read
+-----------------------------+
| id | company_id | notice_id |
+-----------------------------+
| 1  | 3          | 1         |
+-----------------------------+

notices
+----------------------+
| id | title  | active |
+----------------------+
| 1  | title1 | 1      |
| 2  | title2 | 0      |
+----------------------+ 
```

*   注意 2 不应显示，因为它未设置为活动
*   通知 1 不应显示给公司 1 或 2，因为它们不是 14 天
*   通知 1 不应显示给公司 3，因为它已被阅读
*   通知 1 应显示给公司 4，因为它尚未阅读且公司 4 已超过 14 天

这是我的查询：

```
Select
  notices.description,
  notices.id,
  notices.title,
  notices_read.company_id,
  companies.datestamp
From
  notices Left Join
  notices_read On notices.id = notices_read.dismiss_id Left Join
  companies On notices_read.company_id = companies.id
Where
  notices.active = 1 And
  companies.datestamp <= DATE_SUB(SYSDATE(), Interval 14 Day) And
  (notices_read.company_id Is Null Or notices_read.company_id != '$company_id') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:06:26.883

如果我正确理解你的问题，你只需要使用`DATE_SUB`

```
DATE_SUB(SYSDATE(), Interval 14 Day) 
```

完整的查询将是：

```
Select
  notices.description,
  notices.id,
  notices.title,
  notices_read.company_id,
  companies.datestamp
From
  notices_read Left Join
  notices On notices_read.dismiss_id = notices.id Left Join
  companies On notices_read.company_id = companies.id
Where
  notices.active = 1 And
  companies.datestamp <= DATE_SUB(SYSDATE(), Interval 14 Day) And
  (notices_read.company_id Is Null Or notices_read.company_id != '$company_id') 
```

# backbone.js - 在 Backbone.js 中，如何在视图中处理基于 jQuery Sortable 的序数编号和更改编号？

> ID：13993289
> 
> 赞同：0
> 
> 时间：2012-12-21T16:00:21.280
> 
> 标签：backbone.js, jquery-ui-sortable

这是我的情况。我在“问题”集合中有一堆“问题”模型。

问题集合由 SurveyBuilder 视图表示。

问题模型由 QuestionBuilder 视图表示。

所以基本上你有一个 QuestionBuilder 视图的 UL。UL 附加了一个 jQuery 可排序（因此您可以重新排序问题）。问题是，一旦我完成重新排序，我想更新模型中更改的“question_number”以反映它们的位置。

Questions 集合有一个“question_number”比较器，因此应该对集合进行排序。现在我只需要一种方法让他们在 UL 中的 .index() 反映他们的 question_number。有任何想法吗？

另一个问题是删除一个问题，我需要更新所有的问题编号。现在我使用以下方法处理它：

```
var deleted_number = question.get('question_number');
var counter = deleted_number;
var questions = this.each(function(question) {
    if (question.get('question_number') > deleted_number) {
        question.set('question_number', question.get('question_number') - 1);
    }
});
if (this.last()) {
    this.questionCounter = this.last().get('question_number') + 1;
} else {
    this.questionCounter = 1;
} 
```

但似乎必须有一种更直接的方法来做到这一点。

理想情况下，每当在集合上调用 remove 或在视图中的 UL 上调用 sortstop 时，它将获取每个 QuestionuBuilder 视图的 .index()，将其模型的 question_number 更新为 .index() + 1，然后保存 ( ）。

*   我的模型、视图和集合：[https ://github.com/nycitt/node-survey-builder/tree/master/app/js/survey-builder](https://github.com/nycitt/node-survey-builder/tree/master/app/js/survey-builder)
*   截图：[https ://docs.google.com/file/d/0B5xZcIdpJm0NczNRclhGeHJZQkE/edit](https://docs.google.com/file/d/0B5xZcIdpJm0NczNRclhGeHJZQkE/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:16:00.073

不止一种方法可以做到这一点，但我会使用 Backbone Events。当用户单击完成排序、在 N 秒内未排序或使用 jQuery 可排序事件（如`sort`. 监听里面的事件`v.SurveyBuilder`。

然后做这样的事情。显然没有经过测试，但应该相对容易地让你到达那里。*更新*，这也应该处理您的删除，因为它不关心过去的情况，只关心现在的情况。处理删除然后触发此事件。*更新 2*，第一个例子不好；这么多在我的脑海中编码。您必须修改视图以将模型`cid`插入`data-cid`到`li`. 然后您可以使用您的集合的`.get`方法更新正确的模型。我看到您已经找到了自己的答案，正如我所说的有多种方法。

```
v.SurveyBuilder = v.Page.extend({
    template: JST["app/templates/pages/survey-builder.hb"],
    initialize: function() {
        this.eventHub = EventHub;
        this.questions = new c.Questions();
        this.questions.on('add', this.addQuestion, this);

        this.eventHub.on('questions:doneSorting', this.updateIndexes)
    },
    updateIndexes: function(e) {
        var that = this;
        this.$('li').each(function(index) {
            var cid = $(this).attr('data-cid');
            that.questions.get(cid).set('question_number', index);
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:20:26.847

我想出了一个办法！！！

1.  为 SurveyBuilder 视图在父视图下创建一组子视图（在我的示例中，this.qbViews 维护一组 QuestionBuilder 视图）
2.  对于您的收藏（在我的情况下为 this.questions），使用to设置`remove`事件。这意味着每次从 this.questions 中删除某些内容时它都会运行`on``updateIndexes``updateIndexes`
3.  在`events`父视图的对象中，`sortstop`为您的可排序对象添加一个事件（在我的情况下`startstop .question-builders`，它是持有 questionBuilder 视图的 UL）也指向`updateIndexes`
4.  在`updateIndexes`执行以下操作：

    ```
    updateIndexes: function(){
        //Go through each of our Views and set the underlying model's question_number to 
        //whatever the index is in the list + 1
        _.each(this.qbViews, function(qbView){
            var index = qbView.$el.index();

            //Only actually `set`s if it changed
            qbView.model.set('question_number', index + 1);
        });
    }, 
    ```

还有我的 SurveyBuilder 视图的完整代码：

```
v.SurveyBuilder = v.Page.extend({
    template: JST["app/templates/pages/survey-builder.hb"],
    initialize: function() {
        this.qbViews = []; //will hold all of our QuestionBuilder views

        this.questions = new c.Questions(); //will hold the Questions collection
        this.questions.on('add', this.addQuestion, this); 
        this.questions.on('remove', this.updateIndexes, this); //We need to update Question Numbers
    },
    bindSortable: function() {
        $('.question-builders').sortable({
            items: '>li',
            handle: '.move-question',
            placeholder: 'placeholder span11'
        }); 
    },
    addQuestion: function(question) {
        var view = new v.QuestionBuilder({
            model: question
        });

        //Push it onto the Views array
        this.qbViews.push(view);

        $('.question-builders').append(view.render().el);
        this.bindSortable();
    },
    updateIndexes: function(){
        //Go through each of our Views and set the underlying model's question_number to 
        //whatever the index is in the list + 1
        _.each(this.qbViews, function(qbView){
            var index = qbView.$el.index();

            //Only actually `set`s if it changed
            qbView.model.set('question_number', index + 1);
        });
    },
    events: {
        'click .add-question': function() {
            this.questions.add({});
        },
        //need to update question numbers when we resort
        'sortstop .question-builders': 'updateIndexes'
    } 
}); 
```

这是完整代码的我的视图文件的永久链接： [https ://github.com/nycitt/node-survey-builder/blob/1bee2f0b8a04006aac10d7ecdf6cb19b29de8c12/app/js/survey-builder/views.js](https://github.com/nycitt/node-survey-builder/blob/1bee2f0b8a04006aac10d7ecdf6cb19b29de8c12/app/js/survey-builder/views.js)

# c# - 从子 AppDomain 检索数据而不从父域引用程序集

> ID：13993291
> 
> 赞同：3
> 
> 时间：2012-12-21T16:00:27.310
> 
> 标签：c#, .net, appdomain

我正在尝试开发用于管理我的应用程序的工具。工具需要从具体的应用程序中了解某些信息。我想在不引用这些应用程序引用的所有程序集的情况下检索该数据。
这是我的代码：

**元数据加载器.dll：**

```
public class MetadataLoader 
{
    public MetadataLoader(MetadataSource source) 
    {
        ...
    }

    public Metadata Metadata { get; set; }
}

public class MetadataSource 
{
    public void Load(string path) 
    {
        ...
    }
} 
```

**元数据.dll：**

```
public class Metadata 
{
    ...
} 
```

**工具.dll：**

```
public class Worker 
{
    public void Execute() 
    {
        // create new domain
        // create metadataloader instance
        //  - create metadatasource instance and call Load. Path should be passed from this method. 
        //  - create MetadataLoader instance 
        //  - fetch MetadataLoader.Metadata
        // >>> Tool.dll should reference only Metadata.dll, not MetadataLoader.dll
    }
} 
```

此外，我无法更改 MetadataSource 类，因为它在第三方库中（这是简化的示例）。如何实现 Execute 方法？

**更新：** MetadataLoader.dll 和 Tool.dll 引用同一程序集的不同版本（最初问题中提到的第三方库），因此 Tool.dll 不得引用 MetadataLoader.dll 使用的版本。

Tool.dll 参考： - ThirdParty.v2.dll - Metadata.dll

MetadataLoader.dll 参考： - ThirdParty.v1.dll - Metadata.dll

给这个问题更多的背景。Tool.dll 和 MetadataLoader.dll 都使用相同的 ORM 来访问数据库。ORM 还提供对象模型元数据。Tool.dll 使用 ORM 来访问自己的数据库，但也需要访问被管理应用程序的对象模型。Tool.dll 不得依赖于管理应用程序使用的 ORM 版本。这就是为什么我想将受管理的应用程序加载到它自己的“容器”（AppDomain）中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:33:26.100

首先，您应该使用共享代码创建一个新程序集。特别是，您应该为 MetadataSource 创建一个包装器。仅因为`MetadataSource`该类是在第三方库中定义的，并且您不能直接将其更改为继承自[`MarshalByRefObject`](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx).

```
public class MetadataSourceWrapper : MarshalByRefObject
{
    public MetadataSource MetadataSource { get; private set; }

    public MetadataSourceWrapper()
    {
        MetadataSource = new MetadataSource();
    }

    public void Load(string path)
    {
        MetadataSource.Load(path);
    }
} 
```

请注意，它应该继承自`MarshalByRefObject`以允许您从不同的 AppDomain 访问此类的实例。

您还应该`IMetadataLoader`如下定义接口：

```
public interface IMetadataLoader
{
    void Init(MetadataSourceWrapper source);
    Metadata Metadata { get; set; }
} 
```

之后，将`MetadataLoader`类更改为继承`MarshalByRefObject`并实现`IMetadataLoader`如下：

```
public class MetadataLoader : MarshalByRefObject, IMetadataLoader
{
    public MetadataLoader() { }

    public void Init(MetadataSourceWrapper source)
    {
        ...
    }

    public Metadata Metadata { get; set; }
} 
```

最后实现`GetMetadata`方法：

```
public static Metadata GetMetadata(
    string metadataLoaderApplicationBase, /*e.g. `C:\MyCompany\MyApp*`*/
    string metadataLoaderAssemblyName, /*e.g. `MetadataLoader, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null` or `MetadataLoader`*/
    string sharedDllAssemblyName, /*e.g. `Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null` or `Shared`*/
    string metadataSourcePath
)
{
    AppDomainSetup domainSetup = new AppDomainSetup();
    domainSetup.ApplicationBase = Path.GetDirectoryName(assemblyName);

    Evidence evidence = AppDomain.CurrentDomain.Evidence;

    AppDomain newDomain = AppDomain.CreateDomain("AppDomain Friendly Name",
        evidence, domainSetup);

    MetadataSourceWrapper msw =
        (MetadataSourceWrapper)newDomain.CreateInstanceAndUnwrap(sharedDllAssemblyName,
            "YourNamespace.MetadataSourceWrapper" /*full type name including the namespace*/);
    msw.Load(metadataSourcePath);

    IMetadataLoader metadataLoader =
        (IMetadataLoader)newDomain.CreateInstanceAndUnwrap(metadataLoaderAssemblyName,
            "YourNamespace.MetadataLoader" /*full type name including the namespace*/);
    metadataLoader.Init(msw);

    Metadata metadata = metadataLoader.Metadata;
    AppDomain.Unload(newDomain);
    return metadata;
} 
```

关于参考：

*   Shared.dll 将仅引用包含`MetadataSource`.
*   MetadataLoader.dll 和 Tool.dll 将引用第三方 DLL 和 Shared.dll。

# hibernate - 休眠条件组属性

> ID：13993292
> 
> 赞同：2
> 
> 时间：2012-12-21T16:00:30.410
> 
> 标签：hibernate, criteria

这个问题是关于使用 Hibernate`Criteria`进行`group by`.
这是我的 SQL：

```
SELECT s.name, max(p.price), min(p.price)
FROM supplier s, product p
WHERE s.supplier_id = p.supplier_id
GROUP BY s.name 
```

我尝试了以下方法：

```
Criteria criteria = session.createCriteria(Supplier.class); 

Criteria prodCrit = criteria.createCriteria("products"); 

ProjectionList projList = Projections.projectionList(); 
projList.add(Projections.max("price"));
projList.add(Projections.min("price")); 
projList.add(Projections.groupProperty("name"));
prodCrit.setProjection(projList);
List list = criteria.list(); 
```

但我收到以下错误：

```
Exception in thread "main" org.hibernate.QueryException: could not resolve property: price of: com.gtc.hibernate.query.Supplier 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:10:26.473

尝试使用 createAlias 而不是 createCriteria。它将产生一个 SQL 查询。

```
select 
       max(p1_.price) as y0_, 
       min(p1_.price) as y1_, 
       this_.name as y2_ 
from Supplier this_ 
   inner join Product p1_ on this_.id=p1_.supplier_id 
 group by this_.name; 
```

标准 ：

```
Criteria criteria = session.createCriteria(Supplier.class); 
criteria.createAlias("products","p");

ProjectionList projList = Projections.projectionList(); 
projList.add(Projections.max("p.price"));
projList.add(Projections.min("p.price")); 
projList.add(Projections.groupProperty("name"));
criteria.setProjection(projList);
List list = criteria.list(); 
```

# c# - 如何获取主机名的 IPv4？

> ID：13993300
> 
> 赞同：1
> 
> 时间：2012-12-21T16:01:22.240
> 
> 标签：c#, windows-8

我在 Windows 8 (RT) 中有一个客户端，并且我有一个用户给出的 HostName 实例，它可以是 IPv4 或 DomainName。现在对于 IPv4，没关系，但对于域名，它不行，因为它尝试使用 IPv6 进行连接，并且服务器中没有应用程序正在为 IPv6 上的客户端提供服务（只是 IPv4），所以我正在寻找一种方法来获取该域名的 IPv4 和然后尝试连接。

**编辑：**我希望它在 Windows 8 (RT) SDK 中不是常规的.net

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:07:07.330

```
string host = "www.stackoverflow.com";
System.Net.IPAddress ip = System.Net.Dns.GetHostAddresses(host)[0]; 
```

# sql - Access / SQL 中的编辑记录问题（写入冲突）

> ID：13993301
> 
> 赞同：40
> 
> 时间：2012-12-21T16:01:22.667
> 
> 标签：sql, sql-server, sql-server-2008, ms-access

将我使用的 SQL DB 迁移到新服务器后出现问题。现在，当尝试在 Access（表单或表格）中编辑记录时，它会说：`WRITE CONFLICT: This record has been changed by another user since you started editing it...`

是否有任何不明显的原因。没有其他人使用服务器，我已禁用表上的任何触发器。我刚刚发现这与 NULL 有关，因为没有任何记录是可以的，但是某些具有 NULL 的行则不是。会不会跟索引有关？如果相关，我最近开始每天批量上传，而不是使用 Access 中的 INSERT INTO 一次上传一个。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-21T16:08:08.093

可能出现的问题：

**1 并发编辑**

一个原因可能是相关记录已在您正在编辑的表单中打开。如果您在编辑会话期间以编程方式更改记录，然后尝试关闭表单（并因此尝试保存记录），则 access 表示该记录已被其他人更改（当然是您，但 Access 不知道）。

在以编程方式更改记录之前保存表单。
在表格中：

```
'This saves the form's current record
Me.Dirty = False

'Now, make changes to the record programmatically 
```

* * *

**2 缺少主键或时间戳**

确保 SQL-Server 表具有主键和时间戳列。

时间戳列帮助 Access 确定自上次选择后是否已编辑记录。如果没有可用的时间戳，Access 通过检查所有字段来执行此操作。如果没有时间戳列，这可能不适用于空条目（请参阅*3 Null bits issue*）。

时间戳实际上存储的是行版本号而不是时间。

添加时间戳列后不要忘记刷新access中的表链接，否则Access是看不到的。（注意：将 Access 表转换为 SQL-Server 表时，Microsoft 的升迁向导会创建时间戳列。）

* * *

**3 空位问题**

根据@AlbertD.Kallal 的说法，这可能是此处描述的空位问题：[KB280730](https://web.archive.org/web/20150126051032/http://support.microsoft.com/kb/280730/en-us)（WayBackMachine 上的最后一个快照，原始文章已被删除）。如果您使用的是位字段，请将其默认值设置为`0`并将之前输入的任何 NULL 替换为`0`。我通常使用`BIT DEFAULT 0 NOT NULL`布尔字段，因为它最接近布尔的想法。

知识库文章说使用 *.adp 而不是 *.mdb；但是，[Microsoft 在 Access 2013 中停止了对 Access Data Projects (ADP) 的支持](http://office.microsoft.com/en-us/access-help/discontinued-features-and-modified-functionality-in-access-2013-HA102749226.aspx)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-13T18:42:50.330

有这个问题，和原来的海报一样。即使直接使用无表单进行编辑。问题出在位字段上，如果您的字段为 Null，当您访问记录时它会将 Null 转换为 0，然后您进行更改，这次是第二次更改。所以这2个变化冲突。我听从了 Olivier 的建议：

“确保表有一个主键和一个**时间戳列**。”

它解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-17T20:15:51.563

当链接到 MS SQL Sever 2000（和更早版本）时，我已经看到与 MS Access 2003（和更早版本）类似的情况。就我而言，我发现问题出在 MS SQL Server 数据库表中的位字段 - 位字段不允许空值。当我将记录添加到通过 MS Access 2003 链接的表时，数据库窗口将返回错误，除非我专门将位字段设置为 True 或 False。为了补救，我更改了任何 MS SQL Server 数据表，以便任何位字段默认为 0 值或 1。一旦我这样做了，我就可以通过 MS Access 将数据添加/编辑到链接表中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-15T09:58:39.090

由于 Jet/Access 布尔值和 SQL Server 位字段之间的冲突，我发现了问题。

此处在陷阱 #4 [https://blogs.office.com/2012/02/17/five-common-pitfalls-when-upgrading-access-to-sql-server/下进行了描述](https://blogs.office.com/2012/02/17/five-common-pitfalls-when-upgrading-access-to-sql-server/)

我编写了一个 SQL 脚本来将所有位字段更改为 NOT NULL 并提供默认值 - 在我的情况下为零。

只需在 SQL Server Management Studio 中执行此操作，然后将结果粘贴到新的查询窗口中并运行它们 - 将其放入游标并执行它几乎不值得。

```
SELECT
    'UPDATE [' + o.name + '] SET [' + c.name + '] = ISNULL([' + c.name + '], 0);' + 
    'ALTER TABLE [' + o.name + '] ALTER COLUMN [' + c.name + '] BIT NOT NULL;' + 
    'ALTER TABLE [' + o.name + '] ADD  CONSTRAINT [DF_' + o.name + '_' + c.name + '] DEFAULT ((0)) FOR [' + c.name + ']'
FROM
    sys.columns c
INNER JOIN sys.objects o
ON  o.object_id = c.object_id
WHERE
    c.system_type_id = 104
    AND o.is_ms_shipped = 0; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T16:06:19.940

这是微软的一个错误

若要解决此问题，请使用下列方法之一：

*   更新基于多表视图的表单 在第一次出现“症状”部分中提到的错误消息时，您必须在“写入冲突”对话框中单击“复制到剪贴板”或“删除更改”。若要避免重复出现"症状"部分中提到的错误消息
    ，您必须在
    再次编辑同一记录之前更新窗体中的记录集。备注 若要更新 Access 2003 或 Access 2002 中的表单，请单击“记录”菜单上的“刷新”。要更新 Access 2007 中的表单，请单击“主页”选项卡上“记录”组中的“全部刷新”。

*   使用带有链接子表单的主表单 为避免重复出现“症状”部分中提到的错误消息，您可以使用带有
    链接子表单的主表单在相关表中输入数据。您可以从一个位置在两个表中输入
    记录，而无需使用基于多表视图的表单。要创建带有链接子表单的主表单，请执行以下步骤：

    创建一个基于多表视图中使用的相关（子）表的新表单。在表格中包含必填字段。保存窗体，然后关闭窗体。创建一个基于在多表视图中使用的主表的新表单。
    在表格中包含必填字段。在“数据库”窗口中，将您在步骤 2 中保存的表单添加到主表单。

    这将创建一个子表单。
    将子窗体的链接子字段属性和链接主字段属性设置为用于链接表的一个或多个字段的名称。

来自[微软支持的变通方法](http://support.microsoft.com/kb/837937)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-20T21:59:45.280

我经历了上面详述的两个原因：直接更改当前绑定到表单的表中的数据，并且在 SQL Server 中有一个“位”类型字段，该字段没有将默认值设置为“0”（零）。

我能够解决后一个问题的唯一方法是将默认值零添加到位字段并运行更新查询以将所有当前值设置为零。

为了绕过前一个错误，我必须要有创造力。有时我可以更改 VBA 语句的顺序并将 Refresh 或 Requery 移动到不同的位置，从而防止出现错误消息。然而，在大多数情况下，我所做的是在我调用直接表更新的子例程中对字符串变量进行 DIM 处理。在调用更新之前，我将此字符串变量设置为绑定表单后面的 Recordsource 的值，从而捕获当时正在使用的确切 SQL 语句。然后，我将表单的 Recordsource 设置为空字符串 ("")，以便将其与数据断开连接。然后，我执行数据更新。然后，我将表单的 Recordsource 设置回保存在 String 变量中的值，重新建立绑定并允许它获取表中的新值。如果此表单中包含一个或多个子表单，则“链接”字段需要以与 Recordsource 类似的方式处理。当 Recordsource 设置为空字符串时，您可能会在现在未绑定的字段中看到 #Name。我所做的只是在 Recordsource 为空时将 Visible 属性设置为最高级别（详细信息部分、子窗体等）的 False，从而对用户隐藏 #Name 值。当找不到编码更改时，将 Recordsource 设置为空字符串是我的首选解决方案。不过，我想知道，如果我缺乏设计技能，是否有办法完全避免这个问题？您可能会在现在未绑定的字段中看到#Name。我所做的只是在 Recordsource 为空时将 Visible 属性设置为最高级别（详细信息部分、子窗体等）的 False，从而对用户隐藏 #Name 值。当找不到编码更改时，将 Recordsource 设置为空字符串是我的首选解决方案。不过，我想知道，如果我缺乏设计技能，是否有办法完全避免这个问题？您可能会在现在未绑定的字段中看到#Name。我所做的只是在 Recordsource 为空时将 Visible 属性设置为最高级别（详细信息部分、子窗体等）的 False，从而对用户隐藏 #Name 值。当找不到编码更改时，将 Recordsource 设置为空字符串是我的首选解决方案。不过，我想知道，如果我缺乏设计技能，是否有办法完全避免这个问题？

关于解决错误消息的最后一个想法：我没有调用例程直接更新表中的数据，而是找到了一种通过表单更新数据的方法，方法是向表单添加绑定控件并更新数据这样表单数据和表格数据就不会不同步。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-21T20:31:14.703

为了克服这个问题。我创建了 VBA 来更改同一行中的另一个字段。因此，我创建了一个单独的字段，当我尝试关闭表单时，它会将 1 添加到内容中。这解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-01T14:58:11.777

我已经多次使用链接到 MS SQL 表的 MS Access 表来处理这个问题。原始发帖人的回应非常有帮助，确实是我许多问题的根源。

当我不小心在字段名中添加了一个带有空格的位字段时，我也遇到了这个问题......是的......

我已经运行了 alter table tablename add [fieldname] bit default 0。我找到的解决方案是删除该字段并且名称中没有空格。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-11T19:13:15.683

我遇到了这个问题，并意识到它是由向现有表添加新位字段引起的。我删除了新字段，一切都恢复正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-26T13:48:55.100

如果您正在使用链接表，请确保您已更新这些表并在执行其他任何操作之前重试。

我以为我已经更新了它们但是没有

不确定这是最适合该场景的错误，但是，大多数有趣的问题从未在任何 Microsoft 软件中正确标记！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-14T17:30:31.257

我正在使用这种解决方法，它对我有用：前端：Ms Access 后端：Mysql

在给定字段的更新前事件上：

```
Private Sub tbl_comuna_id_comuna_BeforeUpdate(Cancel As Integer)

If Me.tbl_comuna_id_comuna.OldValue = Me.tbl_comuna_id_comuna.Value Then
Cancel = True
Undo
End If
End Sub 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-24T21:28:53.343

我刚刚遇到了非常严重的写入冲突问题（Acc2013 32 位，SQL Srv2017 expr），带有相当“重载”的拆分形式。对我来说 - 最后 - 是摆脱写冲突问题的解决方案

将 AcSplitFormDatasheet 设置为只读！（我不知道为什么它是读写的，我一定是错误地设置了它......）

我几乎花了整整一周的时间才发现这一点。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-19T19:15:36.170

我遇到了这个问题并保存了记录，将 Dirty 标记为 false 等都不起作用。最终，向 SQL 表添加时间戳列是避免/解决问题的方法。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2016-06-15T04:20:07.843

我收到了同样的错误信息。数据库表中的 Id 列设置为 BigInt，将其更改为 Int 解决了该问题。

# database - postgresql 慢查询（dblink 和内部连接）

> ID：13993302
> 
> 赞同：5
> 
> 时间：2012-12-21T16:01:39.180
> 
> 标签：database, performance, postgresql, inner-join, dblink

我有这个包含 dblink 的查询，因为我需要连接到另一个数据库，而且它看起来很慢（只有 124 条记录需要 50.343 秒）。有没有办法让它快点？下面是代码：

```
select * 
from 
    customer  
    INNER JOIN  
    dblink('host=192.168.3.9 dbname=db2 user=postgres password=postgres', '
        SELECT
            status,
            last_churn_1,
            attempts,
            last_dialed,
            lead_id,
            date_added
        FROM campaign_customer
        ') AS table2 (
            status char(50),
            last_churn_1 char(50),
            attempts int,
            last_dialed char(250),
            lead_id char(8),
            date_added char(50)
        ) ON customer.phone1 = table2.last_dialed
where customer.leadid = '3434' and table2.lead_id='3434' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:15:54.477

正如丹尼尔所建议的：

```
select * 
from 
    customer  
    INNER JOIN  
    dblink('host=192.168.3.9 dbname=db2 user=postgres password=postgres', $$
        SELECT
            status,
            last_churn_1,
            attempts,
            last_dialed,
            lead_id,
            date_added
        FROM campaign_customer
        where lead_id='3434'
        $$) AS table2 (
            status char(50),
            last_churn_1 char(50),
            attempts int,
            last_dialed char(250),
            lead_id char(8),
            date_added char(50)
        ) ON customer.phone1 = table2.last_dialed
where customer.leadid = '3434' 
```

# android - BalloonItemizedOverlay中的onHideBalloon方法

> ID：13993306
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:02:11.257
> 
> 标签：android, google-maps, balloon

我使用[BalloonItemizedOverlay](https://github.com/jgilfelt/android-mapviewballoons)。

我需要 onHideBalloon 方法。（隐藏气球后我需要做一些动作。）
类 BalloonItemizedOverlay 已经`public void hideBalloon() {...}`
覆盖它......？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:02:09.090

查看类 BalloonItemizedOverlay，你是对的：没有 onHideBalloon()，只有 onBalloonOpen()。因此，如果您想在隐藏气球后执行任何操作，您只需在调用 hideBalloon() 时执行这些操作。否则，如果允许，您可以做的是修改该类并为 onHideBalloon() 添加您自己的回调。看了这门课，感觉难度不大。

您基本上会在该类中修改以下内容：添加：

```
protected void onBalloonClose(int index) {} 
```

并在任何关闭气球的方法中添加：

```
public void hideBalloon() {
    if (balloonView != null) {
        balloonView.setVisibility(View.GONE);
        onBalloonClose(currentFocusedIndex);
    }
    currentFocusedItem = null;
} 
```

类似的东西..可能需要稍微调整一下，但我希望这可以为您指明正确的方向。

# cloud-foundry - cloudfoundry uaa 可以用作普通的 oauth/openid 服务器吗？

> ID：13993307
> 
> 赞同：1
> 
> 时间：2012-12-21T16:02:14.630
> 
> 标签：cloud-foundry

我在 github 上找到了 cloudfoundry uaa。

github.com/cloudfoundry/uaa

它是专为 cloudfoundry 云服务设计的，还是我可以将它用作我的 Web 应用程序的 oauth/openid 服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:28:00.117

UAA*被*设计为通用的并且通常可用作 OAuth2 服务器和身份管理解决方案。它在 Cloud Foundry 中的使用和当前主页可以看作是它在生产中工作的验证，但它非常应该被其他人使用。对 google 列表的反馈会很棒，但如果您更喜欢提问，stackoverflow 也可以（CF 支持团队监控 cloudfoundry 关键字）。

# c++ - 如何将一组十六进制字符串转换为字节数组

> ID：13993315
> 
> 赞同：5
> 
> 时间：2012-12-21T16:02:51.903
> 
> 标签：c++

我有一个 char 输入`*str = "13 00 0A 1B CA 00";`

我需要一个输出`BYTE bytes[] = { 0x13, 0x00, 0x0A, 0x1B, 0xCA, 0x00 };`

有人可以帮忙解决吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:06:15.813

您将需要解析出这两个字符中的每一个，然后将它们转换为`BYTE`. 这并不难做到。

```
std::stringstream converter;
std::istringstream ss( "13 00 0A 1B CA 00" );
std::vector<BYTE> bytes;

std::string word;
while( ss >> word )
{
    BYTE temp;
    converter << std::hex << word;
    converter >> temp;
    bytes.push_back( temp );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:16:49.443

这个答案假设每个十六进制字节的输入格式实际上是 3 个字符。我`sscanf`为简单起见，`streams`显然也是一种选择。

```
 std::vector<BYTE> bytes;
    char *str = "13 00 0A 1B CA 00";
    std::string input(str);

    size_t count = input.size()/3;
    for (size_t i=0; i < count; i++)
    {           
        std::string numStr = input.substr(i*3, input.find(" "));

        int num=0;
        sscanf(numStr.c_str(), "%x", &num);
        bytes.push_back((BYTE)num);
    }

    // You can access the output as a contiguous array at &bytes[0]
    // or just add the bytes into a pre-allocated buffer you don't want vector 
```

# java - 将char数组转换为字符串

> ID：13993318
> 
> 赞同：1
> 
> 时间：2012-12-21T16:02:55.310
> 
> 标签：java

我正在制作一个刽子手游戏。我有两个 char 数组，我需要检查它们是否相等。

其中一个有字母和下划线：`char checkLetter[]`

另一个只有字母：`char currentWord[]`

最终，在用户猜出 checkLetter[] 数组中的所有单词后，它也将仅包含字母。但是我需要不断检查（以布尔方法）他们猜测的数组和他们的字母是否与他们试图猜测的单词完全相同。

如果我可以将两个数组都转换为字符串，那么我可以检查它们是否相等。我没有经验，也不知道该怎么做。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T16:03:54.313

您根本不需要将它们转换为字符串。使用[`Arrays.equals()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28char%5B%5D,%20char%5B%5D%29).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:04:34.023

您可以使用 String 的重载构造函数将 char 数组转换为字符串，该构造函数将 char[] 数组作为参数。

```
char[] carr ;
String s = new String(carr); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T16:04:06.660

您可以使用`new String(char[] value`)` 从[char 数组](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28char%5B%5D%29)创建字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T16:04:46.470

使用字符串构造函数：

```
String str = new String(yourCharArray); 
```

但是，这没用；改为使用`Arrays.equals(arr1, arr2)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-17T23:15:38.427

你真的不需要转换数组，但如果你真的想尝试使用`String word = currentWord.toString()`来转换 char 数组。

# google-app-engine - 我应该把我的站点地图放在 appengine 的什么位置？

> ID：13993320
> 
> 赞同：4
> 
> 时间：2012-12-21T16:02:57.473
> 
> 标签：google-app-engine, sitemap

我知道典型的静态文件（例如样式表）`app.yaml`必须包含保存所述文件的目录的路径。例如

```
-   url: /stylesheets
static_dir: stylesheets 
```

如何将站点地图添加到 GAE 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:08:21.570

这就是我为我的 favicon 所做的，因为它是一个静态文件：

```
- url: /favicon.ico
  static_files: media/img/favicon.ico
  upload: media/img/favicon.ico 
```

xml 站点地图也是一个静态文件，因此您可能想要这样做：

```
- url: /sitemap.xml
  static_files: my/folder/path/sitemap.xml
  upload: my/folder/path/sitemap.xml 
```

不完全确定上传行。但是没有它，我的网站图标一开始就无法工作

编辑：如果您想要一个动态站点地图，您可以按照[此链接](http://blog.notdot.net/2009/10/Blogging-on-App-engine-part-9-Sitemaps-and-review)中的说明在每次访问站点地图页面时生成它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:41:33.050

为了遵循 App Engine 上的最佳实践，我建议您查看这个 Boilerplate [http://appengine.beecoss.com](http://appengine.beecoss.com)

在那里，您会找到放置 sitemap.xml 和更多您需要的文件的位置。这是最好的方法。

```
- url: /(robots\.txt|humans\.txt|crossdomain\.xml|sitemap\.xml)
  static_files: static/\1
  upload: static/(robots\.txt|humans\.txt|crossdomain\.xml|sitemap\.xml) 
```

# jquery - jQuery Mobile + FullCalendar - 需要刷新页面才能看到

> ID：13993323
> 
> 赞同：2
> 
> 时间：2012-12-21T16:03:20.833
> 
> 标签：jquery, jquery-mobile

jQuery Mobile 的 FullCalendar 插件存在问题。基本上，如果我加载页面，日历不知道.. 但如果我重新加载页面，它就会知道。根据我的阅读，似乎在 jQuery 移动设备上只加载 data-role="page 内的数据。如果我将页面链接设置为 data-ajax="false"，它工作正常，但我想保留阿贾克斯。

```
<!DOCTYPE html> 
<html> 
<head> 
<title>My Page</title> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<script type='text/javascript' src='js/fullcalendar.min.js'></script>
<link rel='stylesheet' type='text/css' href='css/fullcalendar.css' />
<script type='text/javascript'>

$(document).ready(function() {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    $('#calendar').fullCalendar({
        editable: true,
        events: [
            {
                title: 'All Day Event',
                start: new Date(y, m, 1)
            },
            {
                title: 'Long Event',
                start: new Date(y, m, d-5),
                end: new Date(y, m, d-2)
            },
            {
                id: 999,
                title: 'Repeating Event',
                start: new Date(y, m, d-3, 16, 0),
                allDay: false
            },
            {
                id: 999,
                title: 'Repeating Event',
                start: new Date(y, m, d+4, 16, 0),
                allDay: false
            },
            {
                title: 'Meeting',
                start: new Date(y, m, d, 10, 30),
                allDay: false
            },
            {
                title: 'Lunch',
                start: new Date(y, m, d, 12, 0),
                end: new Date(y, m, d, 14, 0),
                allDay: false
            },
            {
                title: 'Birthday Party',
                start: new Date(y, m, d+1, 19, 0),
                end: new Date(y, m, d+1, 22, 30),
                allDay: false
            },
            {
                title: 'Click for Google',
                start: new Date(y, m, 28),
                end: new Date(y, m, 29),
                url: 'http://google.com/'
            }
        ]
    });

});

</script>
</head> 
<body> 
<div data-role="page">

<div data-role="header">
    <a href="#" data-rel="back">Back</a>
    <h1>My Team</h1>

    <div data-role="navbar">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="team.html">Team</a></li>
            <li><a href="schedule.html">Schedule</a></li>
            <li><a href="reset.html">Reset</a></li>
        </ul>
    </div><!-- /navbar -->

</div><!-- /header -->

<div data-role="content">       
    <div id='calendar' style="width:100%;"></div>
</div><!-- /content -->

</div><!-- /page -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:33:28.567

这是一个适合您的工作示例：http: [//jsfiddle.net/Gajotres/ZSd2C/](http://jsfiddle.net/Gajotres/ZSd2C/)

切勿将**$(document).ready(function() {**与 jQM 一起使用。jQM 有自己的一组页面处理事件。在这种情况下，当 pageshow 事件被触发时会显示代码：

```
$('#index').live('pageshow',function(e,data){    
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    $('#calendar').fullCalendar({
        editable: true,
        events: [
            {
                title: 'All Day Event',
                start: new Date(y, m, 1)
            },
            {
                title: 'Long Event',
                start: new Date(y, m, d-5),
                end: new Date(y, m, d-2)
            },
            {
                id: 999,
                title: 'Repeating Event',
                start: new Date(y, m, d-3, 16, 0),
                allDay: false
            },
            {
                id: 999,
                title: 'Repeating Event',
                start: new Date(y, m, d+4, 16, 0),
                allDay: false
            },
            {
                title: 'Meeting',
                start: new Date(y, m, d, 10, 30),
                allDay: false
            },
            {
                title: 'Lunch',
                start: new Date(y, m, d, 12, 0),
                end: new Date(y, m, d, 14, 0),
                allDay: false
            },
            {
                title: 'Birthday Party',
                start: new Date(y, m, d+1, 19, 0),
                end: new Date(y, m, d+1, 22, 30),
                allDay: false
            },
            {
                title: 'Click for Google',
                start: new Date(y, m, 28),
                end: new Date(y, m, 29),
                url: 'http://google.com/'
            }
        ]
    });
}); 
```

Main problem here is document ready which triggers before jQuery Mobile page is fully loaded, like in my example it can be solved with **[pageshow](http://api.jquerymobile.com/pageshow/)** event. If you want to learn more take a look at this **[article](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**

# c++ - C++ 模板 - 具有模板类型的通用方法

> ID：13993328
> 
> 赞同：2
> 
> 时间：2012-12-21T16:03:43.750
> 
> 标签：c++, templates, generics

我开始使用 C++ 模板只是因为我想了解与其他语言（Java）的具体差异，并且我达到了它们开始分歧的地步，但我不知道我应该如何解决具体问题（或绕过它）。

假设我有一个通用值类，例如

```
template <class T>
class Value
{
  protected:
    T value;

  public:
    Value(Type type, T value) : type(type), value(value) {}

    void set(T value) { this->value = value; }
    T get() const { return this->value; }
    T clone() { return new Value<T>(type, value); }

    virtual string svalue() const = 0;

    const Type type;
}; 
```

和一个特定的子类型：

```
class Int : public Value<int>
{
  public:  
    Int(int value) : Value<int>(INT, value) { };

    virtual string svalue() const { ... }

  friend ostream& operator<<(ostream& os, const Int& v);
}; 
```

（我知道也可以通过 using 指定特定于类型的代码，`template <>`但由于我仍然需要使用它来理解它，所以我现在只是由自己的 Int 类定义，这`Value<int>`最终只不过是 typedef）

比方说，是否有可能拥有一个能够存储指向`Value`实例的任意指针的集合？无需指定泛型类的具体具体类型。

据我了解，模板只是一个编译时问题，编译器分析使用模板的所有具体类型，并为它们中的每一个编译相同方法的不同版本，因此我想要做的不是似乎是可能的（在 Java 中，我可以使用通配符来表示类似的东西`List<Value<?>>`）。我错了吗？

是否有解决此问题的通用设计，或者我被迫放弃模板来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:07:28.787

```
#include <iostream>
#include <memory>

class Base 
{
    public: virtual void Print() = 0;
};

template<typename T>
class Derived : public Base
{
    T V;
public:
    void Print() { std::cout << V; }
    Derived(T v) : V(v) { }
};

int main()
{
    std::unique_ptr<Base> Ptr (new Derived<int>(5));
    Ptr->Print();

    return 0;
} 
```

我认为这是不言自明的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:11:41.777

> 比方说，是否有可能拥有一个能够存储指向 Value 实例的任意指针的集合？

不，不是你想要的方式。这是不可能的：

```
template <class T>
class Value
{
// ...
};

vector<Value> my_values_; 
```

这是不可能的，因为`Value` *它不是一种类型*——它实际上只是一个蓝图和想法，如果你愿意的话。抛开哲学上的胡言乱语，你不能储存想法，你只能储存东西。A`Value`不是东西。

如果这是您想要的，那么模板可能是该工作的错误工具。你可能真正追求的是抽象基类，其中基类（比如`class Value`）定义接口，子类（比如`class Int : public Value`）定义具体类型。这样，您可以`Value`使用指针创建泛型容器：

```
vector<Value*> my_values_; 
```

或者，更好的是使用智能指针：

```
vector<unique_ptr<Value>> my_values_; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:30:31.910

Java 技术可以在 C++ 中通过混合通用基类（参见 Bartek 的其他答案）和类型擦除等技术来完成。

C++ 版本，其中值实际上是值，不能在 Java 中完成。如果我没记错的话，它可以用一些编译成 Java 字节码的语言来完成。

在 Java 中，您可以获得的唯一对象实际上更像是垃圾收集的指向 C++ 中对象的指针。直接存储或引用的实际对象的实际实例是verbotin，因为这会妨碍Java 风格的垃圾收集。

因此`Value<?>`，Java 中的容器类似于指向`Value`C++ 中垃圾收集的所有类型的公共基类的指针容器。然后，对每个实例的访问涉及 Java 中的一个`dynamic_cast`或`static_cast`等效项。

对于更类似于 Java 的行为，给 Value 一个带有虚拟平凡析构函数的公共基础，在所有实例上具有相同签名的纯虚拟公共方法，实现具有不同签名的事物的模板版本，以及产生`shared_ptr`s 到 Value 实例的工厂函数。

如果需要，请使用 Value base 的容器`shared_ptr`并使用动态共享 ptr 转换来获取特定接口。

现在所有这一切意味着您的代码比没有所有这些结构的代码慢 10 到 100 倍，但它可能仍然比等效的 Java 版本快。如果您不需要它，您可以选择不使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T19:20:48.557

我总是喜欢混淆事物并加入一个很好的语法扭曲，尽管它仍然做同样的事情（使用公共基类）。唯一奇怪的是基类 of`Value<T>`是拼写的`Value<>`，可以在容器中使用（当然不是直接使用，因为您需要使用点来避免切片）：

```
#include <memory>
#include <vector>

template <typename T = void>
class Value;

template <>
class Value<void>
{
public:
    virtual ~Value() {}
};

template <typename T>
class Value
    : public Value<>
{
    T value_;
public:
    Value(T value): value_(value) {}
    // whatever
};

template <typename T>
std::unique_ptr<Value<T>> make_value(T value) {
    return std::unique_ptr<Value<T>>(new Value<T>(value));
}

int main()
{
    std::vector<std::unique_ptr<Value<>>> values;
    values.push_back(make_value(0));
    values.push_back(make_value(0.0));
    values.push_back(make_value(false));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T16:13:54.767

> 比方说，是否有可能拥有一个能够存储指向 Value 实例的任意指针的集合？

不，这行不通。但是，至少有以下可能性：

1.  如果您事先知道要在列表中使用的每种类型，则可以使用[boost::variant](http://www.boost.org/doc/libs/1_52_0/doc/html/variant.html)

2.  您可以制作指向对象的指针列表（实际上`void*`，或者您可以删除模板并制作`Value`为基类）并以某种方式（例如`dynamic_cast`）将它们强制转换为某些特定对象。

# asp.net-mvc - 为整个网站创建导航

> ID：13993330
> 
> 赞同：0
> 
> 时间：2012-12-21T16:03:45.857
> 
> 标签：asp.net-mvc, asp.net-mvc-3

嗨，我刚刚学习 asp.net mvc 3，我正在尝试为我的整个应用程序创建一个通用菜单。我知道我可以在 _Layout.cshtml 文件中做到这一点，女巫是每个页面的默认模板。

现在我已经研究了在 _Layout.cshtml 中添加模板的部分，但据我所知，我需要在每个视图中定义该部分。

我已经有了访问在一个单独的类中定义的数据的逻辑。我所需要的只是调用将返回 a 的方法`Dictionary<string , List<string>>`，然后通过循环显示数据。

奥尔多我可以通过使用剃刀语法直接在 Index.cshtml 文件中执行此操作我相信必须有更好的方法

那么有没有办法创建一个模板，然后可以在 _Layout.cshtml 中添加蜜蜂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:11:20.247

只是在寻找类似的东西。希望部分视图是您的答案，这是一个您可以重复使用并粘贴在任何页面上的模板。信息在[这里](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:13:22.070

在每个视图上为菜单创建一个部分是可行的，但我认为另一种方法可能更容易维护。在您的布局本身上用于`@Html.Partial`呈现您的菜单。然后在该局部视图上，您​​可以在一个位置进行各种操作，例如数据库访问。

这是一篇关于如何做到这一点的文章：http: [//techbrij.com/981/role-based-menu-asp-net-mvc](http://techbrij.com/981/role-based-menu-asp-net-mvc)

# javascript - load() 方法多次进入（执行）

> ID：13993338
> 
> 赞同：0
> 
> 时间：2012-12-21T16:04:03.300
> 
> 标签：javascript, jquery, html

在我的 html 页面中，我有一个图像，在单击一个按钮时，我正在调用函数 TestLoad() 它正在更改图像的 src 并且当图像加载时我正在做某事...采取示例： javascript：

```
function TestLoad() {

    alert('before');
     $('#ImgTest').attr('src', 'Images/Image1.jpg');

     $('#ImgTest').load(function () {
         alert('after');
     });
} 
```

html:

```
 <img id = "ImgTest" alt="" src="" style="width:100px; height:100px"/> 

 <input type="button" onclick ="TestLoad();" value="TestLoad"/> 
```

我的问题是：当我第一次单击按钮时，我会收到一次“之后”的警报，如果我再次单击，警报将显示两次，第三次显示 3 次...

请指教 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:05:40.613

每次您的处理程序执行时，它都会添加另一个新的负载处理程序。您只需要分配一次处理程序。如果你真的需要这样做，你可以先删除现有的处理程序，或者检查事件以查看它是否已经被处理：

```
var $imgTest = $('#ImgTest');

$imgTest.attr('src','Images/Image1.jpg');
$imgTest.unbind('load');
$imgTest.load(function(){
    alert('after');
}); 
```

或者：

```
var events;
var $imgTest = $('#ImgTest');

$imgTest.attr('src', 'Images/Image1.jpg');
events = $imgTest.data('events');
if(events !== null && typeof events.load === undefined){
    $imgTest.load(function(){
        alert('after');
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:05:12.037

您的 onclick 事件可能正在绑定另一个加载事件。

您无需继续向其中添加事件。它已经存在。如果您需要绑定另一个，您需要先取消绑定前一个事件。

```
.on("load", function() { ... });
.off("load"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:05:19.233

您在事件处理程序中绑定多个函数

```
//bind this outside of your test load method
$('#ImgTest').load(function () {
    alert('after');
});

function TestLoad() {
    alert('before');
     $('#ImgTest').attr('src', 'Images/Image1.jpg');
} 
```

# javascript - 幻影JS；安装和运行示例

> ID：13993354
> 
> 赞同：4
> 
> 时间：2012-12-21T16:05:13.177
> 
> 标签：javascript, phantomjs

我是 PhantomJS 和 JavaScript 的新手。我的问题非常基本，但给我带来了很多困难。

我已成功将可执行文件的 PATH 添加到我的系统变量中，当我在命令提示符中键入“phantomjs --version”时，会显示正确的版本（1.7.0）。

但是，当我尝试测试其中一个示例时，例如 hello.js，我收到以下消息“找不到变量：你好”

最初我将示例文件保存在“examples”文件夹中，但也尝试将它们移动到可执行文件所在的主 phantomjs 文件夹中。这两个选项都不起作用。

我还尝试使用以下语句从命令提示符打开示例：“phantomjs examples/hello.js”，我收到以下语句“无法打开'examples/hello.js'”。

我知道论坛上还有其他一些类似的问题，但解决方案对我不起作用。任何新的建议都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:34:43.280

假设`hello.js`文件在您当前的工作目录中，您需要输入：

```
phantomjs hello.js 
```

在您的终端或命令提示符下，而**不是**在 PhantomJS 提示符下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T01:03:29.350

遇到了同样的麻烦。最后通过指定 phatnomjs 可执行文件的绝对路径来解决它。

代替：

```
phantomjs myjsfile.js 
```

做：

```
/my/absolute/path/to/phantomjs/phantomjs myjsfile.js 
```

我怀疑为其设置 PATH 会产生相同的效果，但尚未对其进行测试。

# iphone - UICollectionView 或 UIButtons

> ID：13993355
> 
> 赞同：0
> 
> 时间：2012-12-21T16:05:17.137
> 
> 标签：iphone, sdk

我有一个简短的问题，与这些应用程序的图像是否在其设计中使用 UICollectionView 或按钮有关：

![在此处输入图像描述](../Images/2801917d421a696fa31ebd5c5d634a1d.png)

![在此处输入图像描述](../Images/0c339ef4e1d6a1dd879a69e9ca0633eb.png)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:09:05.457

最有可能的按钮，因为 UICollectionView 仅与 iOS 6+ 兼容

LinkedIn iOS 应用程序只需要 iOS 4.3+，因此它不使用 UICollectionView——他们很可能使用 UIButtons 构建了自定义视图

大多数应用程序仍然希望至少支持 iOS 5+，所以你不会看到很多应用程序使用 UICollectionView。

这里有一些可能适合您需要的开源“集合视图”类（只要确保它们也支持旧的 iOS 版本） [http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=collectionview](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=collectionview)

# ios - 为什么 iPad 键盘高度在横向模式下是 1024 像素？

> ID：13993361
> 
> 赞同：5
> 
> 时间：2012-12-21T16:05:23.007
> 
> 标签：ios, ipad, keyboard, landscape

我在本周早些时候遇到了这个问题，现在又遇到了。当用户处于 iPad 的横向模式时，我正在为键盘出现在屏幕上时设置我的键盘偏移量。iPad 的尺寸为 1024 x 768。

```
- (void) keyboardWasShown:(NSNotification *)nsNotification {
    NSDictionary *userInfo = [nsNotification userInfo];
    CGSize kbSize = [[userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    NSLog(@"Height: %f Width: %f", kbSize.height, kbSize.width);
    // Portrait:    Height: 264.000000  Width: 768.000000
    // Landscape:   Height: 1024.000000 Width: 352.000000
} 
```

键盘高度怎么可以是1024？这意味着键盘现在覆盖了整个屏幕。我会假设高度应该是 352，宽度应该是 1024。这是一个错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T16:09:37.213

来自[http://developer.apple.com/library/ios/documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/doc/uid/TP40006817-CH3-SW27](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/doc/uid/TP40006817-CH3-SW27)

> *UIKeyboardFrameBeginUserInfoKey*
> 
> 包含 CGRect 的 NSValue 对象的键，该 CGRect 在屏幕坐标中标识键盘的起始帧。这些坐标不考虑由于界面方向更改而应用于窗口内容的任何旋转因素。因此，在使用它之前，您可能需要将矩形转换为窗口坐标（使用 convertRect:fromWindow: 方法）或视图坐标（使用 convertRect:fromView: 方法）。

# datejs - 为什么 datejs api 的 validateMonth 方法会抛出异常并返回布尔值？

> ID：13993363
> 
> 赞同：0
> 
> 时间：2012-12-21T16:05:30.187
> 
> 标签：datejs

为什么 datejs api 的 validateMonth 方法会抛出异常并返回布尔值？

> 日期.validateMonth(14)

会抛出以下错误。

> 时间戳：2012 年 12 月 21 日上午 10:56:16 错误：RangeError：14 不是月份的有效值。源文件：[http://localhost:18103/soart/scripts/date.js](http://localhost:18103/soart/scripts/date.js) 行：21

对我来说这没有意义。它应该返回一个布尔值而不抛出异常。该方法的目的毕竟是检查一个有效的月份。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:34:48.123

根据[DateJs 文档](http://code.google.com/p/datejs/wiki/APIDocumentation#validateMonth)，它完全符合预期。为了解决这个问题，您可以将检查包装在[try catch 语句中](http://www.w3schools.com/js/js_errors.asp)。

它可能会抛出异常，以便它可以根据输入的内容返回有意义的错误。因此，如果传递了一个字符串，您会收到不同的错误消息。在您的情况下，实际的错误消息只是

```
14 is not a valid value for months 
```

# structuremap - 如何使用 Structuremap for NServicebus 注册多个消息修改器？

> ID：13993364
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:05:30.180
> 
> 标签：structuremap, nservicebus

我有多个要添加到 NServicebus 管道的消息转换器。我使用 Structuremap 作为我的 IoC 容器。使用 Structuremap 和 NServicebus 注册它们的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:48:30.267

在示例中找到答案。

```
Configure.Instance.Configurer.ConfigureComponent<Mutator1>(DependencyLifecycle.InstancePerCall);
Configure.Instance.Configurer.ConfigureComponent<Mutator2>(DependencyLifecycle.InstancePerCall); 
```

# eclipse - GWT 在面板/视图之间切换

> ID：13993365
> 
> 赞同：0
> 
> 时间：2012-12-21T16:05:33.793
> 
> 标签：eclipse, gwt

这是我的入口点类

```
 public class TestUI implements EntryPoint
    {
        Panel1 panel1 = new Panel1();
        public void onModuleLoad()
        {
            final RootPanel rootPanel = RootPanel.get();

            Button btnButtonOnRoot = new Button("Go to next view");
            btnButtonOnRoot.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {
                    rootPanel.clear();
                    rootPanel.add( panel1 );
                }
            });
            rootPanel.add(btnButtonOnRoot, 72, 40);
        }
    } 
```

工作正常，但我想在单击按钮时使用面板以外的东西作为要加载的视图。在 Eclipse 中，当我单击我的客户端包时，我可以选择添加面板、复合材料等。问题是当我和我的 UI 设计师一起编辑这些时，我只能在每个小部件上放置一个小部件。我想做的是能够清除根面板并向其添加一个 EntryPoint 类型类，因为我可以使用我的 UI 设计器编辑 EntryPoint 类。我可以将哪些其他类型的类添加到可在 UI 设计器中编辑的面板中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:12:24.480

不要使用所见即所得的编辑器。它们很适合帮助您入门，但在 GWT 中构建 UI 确实不是什么魔法。您有一个面板 A 并添加组件 aa、ab 和 ac。然后你有另一个面板等等。

还有一个建议：尽量不要使用根面板。它的行为与其他面板略有不同，因为它实际上不是面板。尝试将 ContentPanel 添加到 RootPanel 并将元素添加到该 ContentPanel。然后将 ContentPanel 添加到 RootPanel。

# actionscript-3 - Air as3 应用程序：一个应用程序容纳许多应用程序

> ID：13993367
> 
> 赞同：0
> 
> 时间：2012-12-21T16:05:38.240
> 
> 标签：actionscript-3, flash, air, packaging

我想知道是否可以创建一个主应用程序或套件或容器（不确定如何称呼它）来容纳多个应用程序？我正在使用 as3 和包装为空气的 Flash 中工作。

我正在为一家公司创建多个应用程序，他们希望有一个应用程序，当您单击它时，该人从公司下载的所有应用程序都会出现在其中。将您设备上的所有这些公司应用程序保存在一个位置，易于查找。例如，kindle 应用程序。它是您设备上的一个应用程序，当您单击它时，它会打开并显示您选择下载的所有书籍。你点击你想要的书，它就会打开。有任何想法吗？

我不想将所有应用程序打包在一起，因为我希望人们能够选择他们想要下载的应用程序。我不知道从哪里开始。

对不起，如果我的解释有点令人困惑，但我很感激任何帮助。请记住，我对这些东西还很陌生。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:33:33.767

如果您的想法是针对 iOS，那么不，您不能。因为除了应用程序自己的目录之外，不允许从其他任何地方加载额外的代码，因此您必须将所有内容打包到一个应用程序中。不过，Android 可能是另一回事。

# c# - 如何在函数中将列表作为参数传递

> ID：13993371
> 
> 赞同：23
> 
> 时间：2012-12-21T16:05:46.173
> 
> 标签：c#, asp.net

我已经列出了一个列表并在其中插入了一些值

```
public List<DateTime> dates = new List<DateTime>();         
DateTime dt1 = DateTime.Parse(12/1/2012);
DateTime dt2 = DateTime.Parse(12/6/2012);
if (dt1 <= dt2)
{                              
    for (DateTime dt = dt1; dt <= dt2; dt = dt.AddDays(1))
    {
        dates.Add(dt);                    
    }       
} 
```

现在我想将此列表（即日期）作为参数传递给某些函数，例如-

```
somefunction(dates); 
```

我究竟怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-21T16:07:28.297

你需要这样做，

```
void Yourfunction(List<DateTime> dates )
{

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T16:06:48.030

```
public void SomeMethod(List<DateTime> dates)
{
    // do something
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-07T08:54:21.380

您应该始终避免将`List<T>`其用作参数。不仅因为这种模式减少了调用者将数据存储在不同类型集合中的机会，而且调用者必须将数据转换为`List`第一个。

将`IEnumerable`a 转换为`List`O(n) 复杂度，这是绝对不必要的。它还创建了一个新对象。

TL;DR 您应该始终使用适当的界面，例如`IEnumerable`或`IQueryable`基于您想对您的收藏做什么。;)

在你的情况下：

```
public void foo(IEnumerable<DateTime> dateTimes)
{
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T16:08:57.523

您可以将其作为`List<DateTime>`

```
public void somefunction(List<DateTime> dates)
{
} 
```

但是，最好使用最通用的（通常是基本的）接口，所以我会使用

```
public void somefunction(IEnumerable<DateTime> dates)
{
} 
```

或者

```
public void somefunction(ICollection<DateTime> dates)
{
} 
```

`.AsReadOnly()`如果您不希望方法修改列表 - 添加或删除元素，您可能还想在将列表传递给方法之前调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-17T18:19:14.413

我在 C# 中需要**Unity**，所以我认为它可能对某些人有用。这是将 AudioSources 列表传递给您想要的任何函数的示例：

```
private void ChooseClip(GameObject audioSourceGameObject , List<AudioClip> sources) {
    audioSourceGameObject.GetComponent<AudioSource> ().clip = sources [0];
} 
```

# php - PHP URL 重定向 - 我这样做对吗？

> ID：13993372
> 
> 赞同：2
> 
> 时间：2012-12-21T16:05:48.307
> 
> 标签：php

我希望我网站上的链接像这样重定向......

[http://mysite.com?url=1](http://mysite.com?url=1)

```
$offer = $_GET['url'];

if ($offer == '1'){
  header("Location: http://site1.com");
}
if ($offer == '2'){
  header("Location: http://site2.com");
} 
```

这是功能性的，但有没有更好的方法来做到这一点，而不是拥有 50 个 if 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:13:13.753

假设您的网站不是真的`site1.com`并且`site2.com`（如果是的话，我会印象深刻），这可能是解决问题的好方法：

```
$sites = array(
    '1' => 'http://www.google.com/',
    '2' => 'http://www.bing.com/'
);

if (isset($sites[$_GET['url']])) {
    header('Location: ' . $sites[$_GET['url']]);
    die();
} else {
    die('Sorry, this does not exist.');
} 
```

这当然也允许你做一些事情，比如在`?url=`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:11:49.390

将标识符和 URL 存储在关联数组中：

```
$list = array(
    '1' => 'http://site1.com',
    '2' => 'http://site2.com'
); 
```

然后查找与您的键匹配的值：

```
if (array_key_exists($_GET['url'], $list)) {
    header('Location: ' . $list[$_GET['url']]);
} else {
    // bad key
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:06:53.837

```
header("Location: http://site{$url}.com"); //success!! 
```

或者

```
header("Location: http://site" . $url . ".com"); //success!! 
```

但请不要依赖这样的用户（客户端）输入。

在制作标题之前先验证一下，否则你会遇到问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:07:57.017

只要它们采用这种格式，您就可以使用：

```
$offer = $_GET['url'];

header("Location: http://site".$offer.".com"); 
```

可能要检查 $offer 作为整数`$offer = intval($offer)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T16:08:45.363

在 db 上使用表，搜索 id 并使用单个 header() 或数组 $redirect[option] header("Location: "$redirect[option]);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T16:21:54.450

您可以拥有一组可能的 URL，您可以`$_GET['url']`根据这些值检查 的值，然后相应地重定向用户。这可以是此 PHP 文件中手动编写的数组，也可以是其值已从数据库中收集的数组。

您也可以使用条件[`if/else`](http://php.net/manual/en/control-structures.elseif.php)或[`switch`](http://php.net/manual/en/control-structures.switch.php)条件，但这会使您的代码更长。这不是一个糟糕的选择，尽管它不太实用。

此外，如果您在此特定页面中有任何其他代码，请确保您[`exit;`](http://php.net/manual/en/function.exit.php)在[`header()`](http://php.net/manual/en/function.header.php)函数之后有防止它在重定向之前执行。

```
$urls = array(
    1 => 'www.someurl.com',
    2 => 'www.someotherurl.com'
);
$key = @trim($_GET['url']);
if (!empty($key) && isset($urls[$key]))
    header('Location: http://' . $urls[$key]);
else
    // fallback
    header('Location: http://www.defaulturl.com');
exit; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T16:10:08.920

不要传递数字，而是尝试传递实际的 url。当您最初将 url 放在链接上时，请确保对其进行编码，并且当您尝试将其读回时，请确保对其进行解码。

```
$offer = urldecode($_GET['url']);

header("Location: ". $url); 
```

您还可以将 number 和 url 的映射存储在数据库中，然后只需查询 number 与您发送的内容匹配的 url。

另一种选择是有一个数组，你有那个映射。

```
<?php
$array = array(
    1 => "http://www.google.com",
    2 => "http://www.yahoo.com",
    3 => "http://www.msn.com",
    4 => "http://www.reddit.com"
);

$offer = $_GET['url'];

header("Location: " . $array[$offer]);

?> 
```

# ruby - Nokogiri：嵌套的 xpath 如何访问外循环？

> ID：13993374
> 
> 赞同：0
> 
> 时间：2012-12-21T16:05:51.477
> 
> 标签：ruby, xpath, nokogiri

试图让我了解 Nokogiri 和 XPath，并希望您能帮助解释这种行为。这段代码：

```
data = Nokogiri::XML(%{
  <veg>
    <peas>
      <color>"green"</color>
    </peas>
    <peas>
      <color>"yellow"</color>
    </peas>
  </veg>
})

data.xpath('//peas').each do |p|
  puts p                            
  puts p.xpath('color/text()')        
  puts p.xpath('//color/text()')    # output not as expected 
end 
```

给出这个输出：

```
<peas>
  <color>"green"</color>
</peas>

"green"

"green"
"yellow"

<peas>
  <color>"yellow"</color>
</peas>

"yellow"

"green"
"yellow" 
```

puts 如何`p.xpath('//color/text()')`最终检索到绿色和黄色，而 p 只包含其中一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:17:59.543

由于它将`<peas>`节点分解为 p 并遍历它们，因此它首先显示节点本身

```
<peas>
  <color>"green"</color>
</peas> 
```

和

```
<peas>
  <color>"yellow"</color>
</peas> 
```

然后`<color>`是每个 p 的节点文本。

然后，我们到达`//color/text()`，并且 ' `//`' 表示从根开始，并获取所有`<color>`节点以及`text()`与它们相关联的节点，这就是为什么你会同时获得绿色和黄色的颜色，即使`<peas>`分别迭代每个节点也是如此。

再举一个例子，如果我们迭代到 node `veg/peas[color='green']`，然后说 find `//peas`，我们将返回`<peas>`黄色和绿色的两个节点。

`color/text()`说“从当前节点开始，获取子节点的文本`<color>`”并`//color/text()`说“给我`<color>`XML 中所有节点的文本，无论当前位置如何”

如果我需要澄清任何事情，请告诉我...

# nuget - 有没有办法支持 nuget 包源的嵌套 UNC 路径？

> ID：13993375
> 
> 赞同：2
> 
> 时间：2012-12-21T16:05:58.253
> 
> 标签：nuget, nuget-package, nuget-server

在我们的环境中，我们目前有一个嵌套的文件夹结构来保存我们的程序集。例如：\SERVER\Assemblies\SomeCompany\MyRockinAssembly\v1.0.0.0\MyRockinAssembly.dll

出于所有充分的理由，我们正在研究创建 NuGet 包，并希望将它们存储在相同的结构中。因此，我们会将 nupkg 存储在 dll 所在的相同位置：\SERVER\Assemblies\SomeCompany\MyRockinAssembly\v1.0.0.0\MyRockinAssembly.nupkg。

然后我们计划添加一个本地 Intranet 包源并将其指向此目录。但是，包管理器似乎没有搜索嵌套文件夹。如果我将 nupkg 提升到只有 1 级深度，它会起作用，但这会与我们现有的标准相冲突。

**有什么方法可以让 nuget 深入搜索所有子文件夹以搜索包？**

或者这是对他们团队的功能要求:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:00:06.890

NuGet 存储库本质上是一个包含一组 NuGet 包的简单文件夹。您想要的结构无法通过构建这样的文件夹树来实现 AFAIK，除非您在客户端中注册大量存储库，每个存储库都指向此树结构中的特定目录。这对于您的软件包的消费者来说可能会变得非常不方便，更不用说进一步不必要的复杂事情了（在自动构建等中）。

但是，您可以使用包 ID 结构，例如：

```
CompanyName.ProductSuite.Product.Component.1.0.0.nupkg 
```

至少您的存储库现在将被排序，消费者可以根据此约定过滤/搜索。

您还可以查看[MyGet.org](http://www.myget.org) (NuGet-as-a-Service)，创建多个提要并配置一个通用提要，将您的其他提要作为底层包源。这篇博文详细解释了它的工作原理：[http ://blog.myget.org/post/2012/03/01/Introducing-MyGet-package-source-proxy-(beta).aspx](http://blog.myget.org/post/2012/03/01/Introducing-MyGet-package-source-proxy-(beta).aspx)

# vba - 从没有查询提示的访问中运行 Word 2010 邮件合并

> ID：13993381
> 
> 赞同：0
> 
> 时间：2012-12-21T16:06:19.337
> 
> 标签：vba, ms-access-2010, mailmerge, dde, word-2010

我的场景类似于[excel VBA 中描述的在邮件合并过程中提示时自动选​​择是](https://stackoverflow.com/questions/11301716/excel-vba-to-automatically-select-yes-when-prompted-during-mail-merge)，除了我正在从包含要合并的数据的 Access 数据库中运行 VBA，并且（这可能是相关的）Merge 正在使用 DDE 数据连接，因为 Query 是一个复杂的连接，并且在 ODBC 中不可见。我正在尝试从 Access 运行时应用程序中运行 Word 邮件合并，这些应用程序将由不太懂计算机的人使用，因此我想避免将它们与不必要的对话框混淆。上一个问题的答案确实对我有用，因为它阻止了允许打开查询的提示，并且其他所有事情都按原样发生，但是当过程到达时，合并返回“无数据源”错误.执行线。看来查询提示确实被抑制了，但是查询没有打开。

```
' open the mail merge layout file
objWord.Visible = True ' for now
lngAlerts = objWord.DisplayAlerts
objWord.DisplayAlerts = False
objWord.Documents.Add strInFileName
objWord.DisplayAlerts = lngAlerts

With objWord.ActiveDocument.MailMerge
    .MainDocumentType = 0 ' wdFormLetters
    .Destination = 0 ' wdSendToNewDocument
    .SuppressBlankLines = True
    .Execute Pause:=False
End With 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:25:36.827

当对话框被绕过时，就好像用户按下了否按钮。请参阅 Microsoft 的知识库文章：http: [//support.microsoft.com/kb/825765](http://support.microsoft.com/kb/825765)

也就是说，您的代码可能需要先发出 OpenDataSource 调用，除非您可以设置文章中描述的注册表值。

# jsp - 从 JSP 返回 JSONP 而不是 JSON

> ID：13993385
> 
> 赞同：2
> 
> 时间：2012-12-21T16:06:35.377
> 
> 标签：jsp, jsonp

我在从 jsp 将响应类型设置为 json 时发现[了这个问题](https://stackoverflow.com/questions/9124960/how-to-simply-return-json-from-a-jsp)，但我需要将响应类型设置为 jsonp 以进行跨域访问。还会是这样吗：

`response.setContentType("application/javascript");`

并且只是将来自jsp的响应包装在`callbackfunction(`+内容+`)`中，还是需要做更多的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:15:13.597

我最近不得不这样做。在服务器端，我有这样的事情：

```
string callbackName = queryMap['callback']; //jquery will pass in some name in our .getJSON call below
string jsonData = getJsonData();
string jsonp = callbackName + "(" + jsonData + ")";

response.SetContentType('application/javascript');
response.Send( jsonp ); 
```

在 javascript 中是这样的：

```
var url = getUrl() + "?callback=?";
$.getJSON(url,function(onSuccessData){ alert(onSuccessData); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T02:19:07.337

jsp：

```
 String str = "{\"appNo\":\"" + "2" + .....+ "\"}";
    String json = "m1(" + str + ")";
    response.getWriter().write(json); 
```

html:

```
 $.ajax({
          type: 'GET',    
          url: url,
          dataType: "jsonp",
          crossDomain: true,          
          cache:false,
           jsonp:"callback",
          success: function(data){  }....
   }); 
```

这是我的jsp的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:05:13.663

要支持 javascript 中的跨域访问，您可以使用 $.support.cors = true;
除此之外，您可以将 jsonp 的内容类型设置为 application/javascript。

# python - 如何在 url 列表中快速找到最后一个不返回 302（重定向）状态码的可用 url

> ID：13993386
> 
> 赞同：0
> 
> 时间：2012-12-21T16:06:36.690
> 
> 标签：python, algorithm, urllib2

现在我面临这样的问题：

假设我有一个网址列表，例如

```
['http://example.com/1', 
 'http://example.com/2', 
 'http://example.com/3',
 'http://example.com/4', 
 ..., 
 'http://example.com/100'] 
```

其中一些是不可用的 url，请求这些 url 将导致 302 重定向状态码。例如 .../1 - .../50 是可用的 url，但 .../51 会导致 302。然后 .../50 是我想要的 url。

我想找出哪个 url 是最后一个可用的 url（它不返回 302 代码），我相信二进制搜索会完成这项工作，但我想知道如何以更高的效率实现它。我使用 python 的 urllib2 来检测 302 状态码。

pseg .../1 - .../50 是可用的 url，但 .../51 会导致 302。然后 .../50 是我想要的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:29:33.197

我只会检查整个批次，**但是**我会使用`requests`而不是`urllib2`确保只提出`HEAD`要求以降低带宽（无论如何这可能会成为您最大的瓶颈）。

```
import requests

urls = [...]
results = [(url, requests.head(url).status_code) for url in urls] 
```

然后从那里走...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:42:35.300

此答案假设您的 URL*当前*以有意义的方式排序，并且所有达到某个值的 URL`n`都将可用，并且之后`n`的所有 URL 将导致 302。

如果是这种情况，那么您可以调整[此二进制搜索答案](https://stackoverflow.com/a/212413/505154)以满足您的需求：

```
import requests

def binary_search_urls(urls, lo=0, hi=None):
    if hi is None:
        hi = len(urls)
    while lo < hi:
        mid = (lo+hi)//2
        status = requests.head(urls[mid]).status_code
        if status != 302:
            lo = mid+1
        else: 
            hi = mid
    return lo - 1 
```

这将为您提供最后一个好的 URL 的索引，或者`-1`如果没有好的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:44:34.423

我看不出二进制搜索如何比直接迭代更快，而且在大多数情况下，它最终会变慢。给定`n`的是列表的长度，如果您正在搜索第一个好批次的最后一个好 url，那么只有在`urls[n/2]-1`您的目标是与暴力迭代相同的搜索次数的情况下；所有其他人都需要更多。如果您正在寻找整个列表中最后一个好的 url，那么与倒序迭代相比，唯一会进行相同数量搜索的搜索目标将是`urls[n/2]-1`. 只有在对数据集进行排序时，二进制搜索才会更快。对于无序数据集，在集合的中间进行采样并不能告诉您能够将值排除到它的任一侧，因此您仍然必须处理整个序列才能说出任何内容。

我怀疑您在这里可能真正想要的是一种每隔一段时间对数据集进行采样的方法，这样您就可以在找到目标之前运行更少的请求，这与二进制搜索不太一样。二进制搜索依赖于这样一个事实，即对序列中的一个点进行采样提供了有关能够从基于二进制条件的后续搜索中排除序列的一侧或另一侧的信息。你所拥有的是一个系统，如果一个样本没有通过测试，你可以排除一侧，但如果它通过了测试，它不会告诉你关于列表中任何其他值的假设。这对于二进制搜索实际上并不适用。

# jquery - 从 JQuery 对象数组中获取元素

> ID：13993388
> 
> 赞同：2
> 
> 时间：2012-12-21T16:06:49.717
> 
> 标签：jquery

查看我的代码：

```
var ths = $("#my_table table th");
if (ths.length > 1) {
    var $th = ths[1]; // tried here plain 'var th' - still got error 
    th.find('#map_column_element_id'); // error here!
} 
```

我得到 JQuery 对象的数组。然后我尝试将第二个元素作为 JQuery 对象进行管理。当我发出

```
th.find(...) 
```

我得到**TypeError: th.find is not a function**。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T16:08:32.653

您将获得没有`find()`方法的本机 JS DOM 元素。使用`eq()`，或用 重新包装元素`$(ths[1])`。

我会使用`eq()`，像这样：

```
var ths = $("#my_table table th");
if (ths.length > 1) {
    var $th = ths.eq(1);
    $th.find('#map_column_element_id');
} 
```

也同意评论中的 Andrew，ID 是唯一的，应该没有必要`find()`，只需做`$('#map_column_element_id')`就足够了。

# java - 线程池问题 - 收集文件

> ID：13993392
> 
> 赞同：2
> 
> 时间：2012-12-21T16:07:01.197
> 
> 标签：java, threadpool, executorservice

我需要`ArrayList`从某个位置序列化为所有绝对文件路径。我想用`FixedThreadPool`from做到这一点`ExecutorService`。

示例- `location: c:/folder1`; folder1 里面有更多的文件夹，都带有文件。我希望每次找到一个文件夹时都搜索他们的文件以添加到 ArrayList。

```
public class FilePoolThreads extends Thread {

    File fich;
    private ArrayList al1;

    public FilePoolThreads(File fi, ArrayList<String> al) {
        this.fich = fi;
        this.al1 = al;
    }

    public void run() {
        FileColector fc = new FileColector();
        File[] listaFicheiros = fich.listFiles();

        for (int i = 0; i < listaFicheiros.length; i++) {
            if (listaFicheiros[i].isFile()) {
                al1.add(listaFicheiros[i].getAbsolutePath());
            }
        }
    }
} 
```

我开始收集文件的类：

```
public class FileColector {

private ArrayList<String> list1 = new ArrayList<>();

public static ArrayList<String> search(File fich,ArrayList<String> list1) {

    int n1 = 1;
    ExecutorService executor = Executors.newFixedThreadPool(n1);
    do {
        //  FilePoolThreads[] threads=new FilePoolThreads[10];
        FilePoolThreads mt = new FilePoolThreads(fich, list1);

        executor.execute(mt);

    } while (fich.isDirectory());

    executor.shutdown();

    return list1;
} 
```

我的代码运行不正常，我认为我有一些逻辑错误，我需要有人帮我修复它，我该如何返回`ArrayList`？我必须使用`getInputStream`之前和然后`getOutputStream`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:01:42.430

由于这显然是一个学术练习，我将概述我将如何处理这个问题，因为您需要使用执行程序线程池。

首先，您需要分析问题并将其分解为可以相互独立完成的可重复工作单元。在这种情况下，基本工作单元是处理单个文件系统目录。每次处理目录时，您将：

*   检查每个目录条目。
*   如果目录条目是常规文件，请将其添加到您的列表中。
*   如果目录项是子目录，则提交处理。

接下来，您需要创建一个实现`Runnable`来封装这个基本工作单元的处理。您创建的每个类实例至少需要以下信息：

*   `File`表示要处理的目录。
*   一个在所有工作人员之间共享的列表，用于添加文件（并且，正如其他人所指出的，`ArrayList`这不是一个合适的数据结构）。
*   对执行器服务的引用，用于为子目录提交任务。

最后，您需要为顶级目录创建一个工作器来处理；提交给执行者服务；然后等到所有工人完成处理。最后一部分可能是最棘手的 - 您可能需要使用`AtomicInteger`传递给每个工作人员的 来保持运行计数，以跟踪当前正在处理的工作人员数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:27:33.857

不要扩展`Thread`以将您的任务传递给执行者。`Runnable`改为实施！

或者，实现[`Callable`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)它可以在完成执行时返回结果。

然后，您可以将任务传递给[`ExecutorService.submit()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.util.concurrent.Callable%29)并在完成后返回[`Future`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)每个`get()`任务的计算结果。

请注意，您可能希望*递归*访问子目录，因此在将*文件*添加到输出并为目录创建新任务之前，您需要找到文件*和**目录*。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:31:58.153

这里不需要线程，并且您有几个与尝试使用线程相关的错误。我的建议是忘记线程，只解决你真正的问题，这可以通过[commons-io FileUtils 之](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#iterateFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29)类的东西非常简单地完成：

```
Iterator<File> files = FileUtils.iterateFiles(directoryToScan, FileFileFilter.FILE, TrueFileFilter.INSTANCE);
List<String> paths = new ArrayList<String>();
for (File file : files) {
    paths.add(file.getAbsolutePath);
} 
```

就这样。**

# c# - 将 char 指针从 C# 传递到 C++

> ID：13993396
> 
> 赞同：3
> 
> 时间：2012-12-21T16:07:06.133
> 
> 标签：c#, pointers, pinvoke

> **可能重复：**
> [将 char 指针从 C# 传递给 c++ 函数](https://stackoverflow.com/questions/4385783/passing-char-pointer-from-c-sharp-to-c-function)

我有这种类型的问题：

我有一个带有这个签名的 c++ 函数：

```
int myfunction ( char* Buffer, int * rotation) 
```

缓冲区参数必须用空格字符（0x20 hex）填充

在 C++ 中，我可以简单地解决这个问题：

```
char* buffer = (char *)malloc(256);
memset(buffer,0x20,256);
res = myfunction (buffer, rotation); 
```

我正在尝试从 C# 调用此函数。

这是我的 p/invoke 声明：

```
[DllImport("mydll.dll", CharSet = CharSet.Ansi, SetLastError = true)]
private static extern unsafe int myfunction (StringBuilder Buffer, int* RotDegree); 
```

在我的 C# 类中，我尝试过这样做：

```
StringBuilder buffer = new StringBuilder(256);
buffer.Append(' ', 256);
...
myfunction(buffer, rotation); 
```

但它不起作用....

任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T16:20:58.897

您的 p/invoke 看起来不太正确。它应该（大概）使用`Cdecl`调用约定。你不应该使用`SetLastError`. 并且不需要不安全的代码。

我会这样写：

```
[DllImport("mydll.dll", CallingConvention=CallingConvention.Cdecl)]
private static extern int myfunction(StringBuilder Buffer, ref int RotDegree); 
```

然后像这样调用它：

```
StringBuilder buffer = new StringBuilder(new String(' ', 256));
int rotation = ...;
int retVal = myfunction(buffer, ref rotation); 
```

我没有指定`CharSet`since`Ansi`是默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:11:54.100

尝试`rotation`通过引用传递。您可能还需要编辑`myfunction`. 请让我知道该方法是否有效。

```
myfunction (buffer.ToString(), ref rotation); 
```

# css - 点击粘性、透明的 iframe

> ID：13993398
> 
> 赞同：9
> 
> 时间：2012-12-21T16:07:11.767
> 
> 标签：css, iframe, transparency

我有一个网页，其中底部被一个 iframe 占据，我将其设置为透明以查看重叠的元素。

![iFrame](../Images/299091f44ae2d862aadfcf8d9312dc85.png)

尽管透明度运行良好，但重叠的链接不可点击，除非我在 iFrame 中将指针事件切换为无（这显然解决了另一个问题）。我尝试在 iFrame 中创建一个 div，覆盖“菜单”部分，将指针事件设置为 all，但它似乎不起作用。我还必须记住聊天组件是粘性的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-05-09T15:56:43.050

这个问题很老，但对于任何偶然发现它的人......

1.  `iFrames`表示包裹在父 DOM 中的另一个完整 DOM。CSS 之类的东西`pointer-events`通常不适用于 iFrame 或跨浏览器的功能相同。

2.  您可以尝试使用 iframe 影响 iframe 内的所有内容，`iframe > * {pointer-events: none;}`但如果 iframe 内容跨域，它可能无法正常工作。

3.  `pointer-events: all;`仅适用于[SVG](https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events#Values) ，不适用于其他 DOM 元素。

**OP 的正确解决方案是将 iFrame 缩放到仅内容的大小，或者根本不使用 iFrame。**

嵌入内容的其他选项：

1.  HTML `<embed>`-[文档](https://www.w3schools.com/tags/tag_embed.asp)

2.  HTML `<object>`-[文档](https://www.w3schools.com/tags/tag_object.asp)

3.  [Web 组件 HTML 导入](https://developer.mozilla.org/en-US/docs/Web/Web_Components/HTML_Imports)- 最近已弃用，但有一个[polyfill](https://github.com/webcomponents/html-imports)

这些都不是很好的解决方案，但取决于问题，它们可能会起作用。

**最后，您可以使用 Javascript 调用来用外部内容填充元素的内容。**这本质上就是使用 React/Angular/Vue 构建的“单页”应用程序在幕后所做的事情。*注意：如果您走这条路线，请务必注意`CORS headers`内容是否来自不同的域。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-08T16:28:39.043

您可以通过 css 使用 z-index：

z-index 在 css 中创建了一个相关元素的列表以及具有最高编号的元素，例如：

```
#elmnt {
    z-index: 10
}

#anotherElmnt {
    z-index: 20
} 
```

将`#elmnt`具有较低的重要性，并且`#anotherElmnt`在重叠的情况下将被置于具有更高 z-index 的后面。

# c++ - 用 Boost.Asio 链接异步 Lambda？

> ID：13993402
> 
> 赞同：17
> 
> 时间：2012-12-21T16:07:24.083
> 
> 标签：c++, lambda, boost-asio

我发现自己编写的代码基本上是这样的：

```
using boost::system::error_code;

socket.async_connect(endpoint, [&](error_code Error)
{
  if (Error)
  {
    print_error(Error);
    return;
  }

  // Read header
  socket.async_read(socket, somebuffer, [&](error_code Error, std::size_t N)
  {
    if (Error)
    {
      print_error(Error);
      return;
    }

    // Read actual data
    socket.async_read(socket, somebuffer, [&](error_code Error, std::size_t N)
    {
      // Same here...
    });
  });
}; 
```

所以基本上我将回调嵌套在回调中的回调中，而逻辑简单且“线性”。

有没有更优雅的写法，让代码既是本地的又是有序的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T21:16:19.427

一种优雅的解决方案是使用协程。Boost.Asio 支持引入一小组伪关键字的无堆栈协程和[使用](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/overview/core/spawn.html)[Boost.Coroutine](http://www.boost.org/doc/libs/1_57_0/libs/coroutine/doc/html/index.html)的[堆栈](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/overview/core/coroutine.html)协程。

* * *

### 无堆栈协程

无堆栈协程引入了一组伪关键字预处理器宏，它们使用类似于[Duff 的 Device](http://en.wikipedia.org/wiki/Duff%27s_device)的技术实现 switch 语句。该[文档](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/reference/coroutine.html)详细介绍了每个关键字。

当使用无堆栈协程实现时，原始问题（连接->读取标头->读取正文）可能类似于以下内容：

```
struct session
 : boost::asio::coroutine
{
  boost::asio::ip::tcp::socket socket_;
  std::vector<char> buffer_;
  // ...

  void operator()(boost::system::error_code ec = boost::system::error_code(),
                  std::size_t length = 0)  
  {
    // In this example we keep the error handling code in one place by
    // hoisting it outside the coroutine. An alternative approach would be to
    // check the value of ec after each yield for an asynchronous operation.
    if (ec)
    {
      print_error(ec);
      return;
    }

    // On reentering a coroutine, control jumps to the location of the last
    // yield or fork. The argument to the "reenter" pseudo-keyword can be a
    // pointer or reference to an object of type coroutine.
    reenter (this)
    {
      // Asynchronously connect. When control resumes at the following line,
      // the error and length parameters reflect the result of
      // the asynchronous operation.
      yield socket_.async_connect(endpoint_, *this);

      // Loop until an error or shutdown occurs.
      while (!shutdown_)
      {
        // Read header data. When control resumes at the following line,
        // the error and length parameters reflect the result of
        // the asynchronous operation.
        buffer_.resize(fixed_header_size);
        yield socket_.async_read(boost::asio::buffer(buffer_), *this);

        // Received data.  Extract the size of the body from the header.
        std::size_t body_size = parse_header(buffer_, length);

        // If there is no body size, then leave coroutine, as an invalid
        // header was received.
        if (!body_size) return;

        // Read body data. When control resumes at the following line,
        // the error and length parameters reflect the result of
        // the asynchronous operation.
        buffer_.resize(body_size);
        yield socket_.async_read(boost::asio::buffer(buffer_), *this);

        // Invoke the user callback to handle the body.
        body_handler_(buffer_, length);
      }

      // Initiate graceful connection closure.
      socket_.shutdown(tcp::socket::shutdown_both, ec);
    } // end reenter
  }
} 
```

### 堆栈式协程

堆栈协同程序是使用该[`spawn()`](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/reference/spawn.html)函数创建的。当使用堆栈式协程实现时，最初的问题可能如下所示：

```
boost::asio::spawn(io_service, [&](boost::asio::yield_context yield)
  {
    boost::system::error_code ec;
    boost::asio::ip::tcp::socket socket(io_service);

    // Asynchronously connect and suspend the coroutine.  The coroutine will
    // be resumed automatically when the operation completes.
    socket.async_connect(endpoint, yield[ec]);
    if (ec)
    {
      print_error(ec);
      return;
    }

    // Loop until an error or shutdown occurs.
    std::vector<char> buffer;
    while (!shutdown)
    {
      // Read header data.
      buffer.resize(fixed_header_size);
      std::size_t bytes_transferred = socket.async_read(
        boost::asio::buffer(buffer), yield[ec]);

      if (ec)
      {
        print_error(ec);
        return;
      }

      // Extract the size of the body from the header.
      std::size_t body_size = parse_header(buffer, bytes_transferred);

      // If there is no body size, then leave coroutine, as an invalid header
      // was received.
      if (!body_size) return;

      // Read body data.
      buffer.resize(body_size);
      bytes_transferred =
        socket.async_read(boost::asio::buffer(buffer), yield[ec]);

      if (ec)
      {
        print_error(ec);
        return;
      }

      // Invoke the user callback to handle the body.
      body_handler_(buffer, length);
    }

    // Initiate graceful connection closure.
    socket.shutdown(tcp::socket::shutdown_both, ec);
   }); 
```

# c++ - c++ 编译器是否将这种形式的“新”视为堆栈内存？

> ID：13993406
> 
> 赞同：-3
> 
> 时间：2012-12-21T16:07:32.223
> 
> 标签：c++, memory, dynamic

> **可能重复：**
> [为什么使用“新”会导致内存泄漏？](https://stackoverflow.com/questions/8839943/why-does-the-use-of-new-cause-memory-leaks)

我遇到过这样的小问题

```
int main() {
    int i = *new int;
    delete &i;
    return 0;
} 
```

它编译正常，但在执行时，shell 给出以下内容：

```
a.out(38303) malloc: 对象 0x7fff5fbff8cc 的 *** 错误: 被释放的指针未被分配
*** 在 malloc_error_break 中设置断点进行调试
中止陷阱

```

尽管

```
int main() {
    int *i = new int;
    delete i;
    return 0;
} 
```

按预期正常运行。

困扰我的是，第一种情况不是使用“new”运算符来分配内存吗？为什么删除时会导致错误？

我在网上搜索了好几次，但我找不到合适的解释。谁能告诉我为什么错了？谢谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T16:09:05.877

问题是您有内存泄漏，并且您正在删除未动态分配的内容。为什么？因为您动态分配 an`int`然后您*将其值复制*到`i`. 然后，您尝试`i`通过指向它的指针删除该对象，但`i`不是动态分配的 - 它的值只是从某个东西初始化的。您丢失了指向实际动态分配的对象的任何指针。

从图表上看，首先你`new int`，创建一个`int`具有动态存储持续时间的对象并返回一个指向该 int 的指针：

```
 _____        ______
Heap:  | int | <--- | int* |
       |_____|      |______| 
```

然后，您取消引用指针，为您提供`int`对象并将其值复制到`int`具有自动存储持续时间的对象。在此之后，您从中获得的指针`new`会丢失，因为您没有将它存储在任何地方。

```
 _____
Heap:  | int |
       |_____|
        _____
Stack: | int |
       |_____| 
```

然后您获取`int`具有自动存储持续时间的地址并尝试使用`delete`它。

```
 _____
Heap:  | int |
       |_____|
        _____        ______
Stack: | int | <--- | int* | <-- Cannot delete because it was
       |_____|      |______|     not dynamically allocated 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-21T16:14:34.237

你可能想写的是这样的：

```
int main() {
    int& i = *new int;   // note the reference type
    delete &i;
    return 0;
} 
```

但是请注意，如果他看到该代码，没有人会雇用您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T16:08:50.223

`delete &i`失败，因为您试图`delete`指向一个不是由 . 返回的指针`new`。这是未定义的行为。

在

```
int i = *new int; 
```

您正在将新分配*的值*`int`分配给`i`. 指针正在丢失。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T16:12:55.880

> 第一种情况不是使用“new”运算符来分配内存吗？

确实如此。但是您不会保留指向它的指针。相反，您将其（未初始化的）值复制到局部变量中，并泄漏分配的内存；您丢失了指向内存的唯一指针，因此无法删除它。

> 为什么删除时会导致错误？

因为`&i`指向局部变量`i`，而不是分配的内存。删除未分配的任何内容都是错误的`new`，包括局部变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T16:09:37.720

```
int main() {
    int i = *new int;
    delete &i;
   return 0;
} 
```

*您的*第一行仅`i`设置. 它仍然存在于堆栈中，因此将其地址传递给`delete`.

# php - 将工作日添加到 SQL 查询

> ID：13993411
> 
> 赞同：5
> 
> 时间：2012-12-21T16:08:12.493
> 
> 标签：php, mysql, sql

我几乎到处找这个。我有以下 SQL 语句：

```
SELECT COUNT(*) FROM `job_sheet`
LEFT JOIN deliveries ON job_sheet.job_id=deliveries.jID
WHERE job_sheet.completion=".ORDER_COMPLETE."
AND deliveries.ship_date>job_sheet.delivery_date 
```

这基本上告诉我哪些已完成的工作已经过了他们的`delivery_date`（截止日期）。然而，真正的交货日期实际上比数据库中的提前 7 个*工作日*（节假日无关紧要。基本上只是跳过周末）。

我需要做的是在本节中添加 7 天：`deliveries.ship_date>job_sheet.delivery_date + 7 business days`

我的第一个想法是使用 DATEADD() 函数，但是我很少使用它，并且在这种情况下如何实现它非常令人困惑。

日期存储为：YYYY-MM-DD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:22:14.857

试试这个

```
 SELECT COUNT(*) FROM `job_sheet`
   LEFT JOIN deliveries ON job_sheet.job_id=deliveries.jID
   WHERE job_sheet.completion=".ORDER_COMPLETE."
   AND  deliveries.ship_date> DATE_ADD(`job_deliveries.ship_date` , INTERVAL 7 DAY) 
```

[ADD_DATE 的参考](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:25:00.390

这应该可以工作，虽然我没有测试过，因为我没有安装 mysql 实例来检查：

```
SELECT COUNT(*) FROM `job_sheet`
LEFT JOIN deliveries ON job_sheet.job_id=deliveries.jID
WHERE job_sheet.completion=".ORDER_COMPLETE."
AND deliveries.ship_date>DATE_ADD(job_sheet.delivery_date,INTERVAL 7 DAY) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T18:11:28.497

好吧，在我在这里的帮助下，将日期添加 7 天很容易。由于我特别需要将 7 个工作日添加到某个日期，因此我不得不在脚本的其余部分中使用一些 PHP。我使用了一个自定义 DateHelper 类来完成这项工作。

```
class DateHelper {

    var $holidays = array("2010-07-04", "2010-09-06", "2010-09-23", "2010-10-11", "2010-11-01", "2010-11-11",  "2010-11-25", "2010-12-25");
    const oneday = 86400; 
    const weekend = 172800; 

    function addBusinessDays($start_date, $business_days)
    {

        if (date('N', $start_date) == 6)
        { // If start date is on Saturday
            $new_start_date = $start_date + self::weekend;
        } 
        elseif (date('N', $start_date) == 7)
        { // If start date is on Sunday
            $new_start_date = $start_date + self::oneday;
        } 
        else 
        {
            $new_start_date = $start_date;
        }

        $due_date = $new_start_date + $business_days * self::oneday;
        $due_date += floor($business_days / 5) * self::weekend;

        if (($business_days % 5) + date('N', $new_start_date) >= 6)
        {
            $due_date += self::weekend; // Add 2 days to compensate for the weekend
        }

        foreach($this->holidays as $holiday)
        {
            $time_stamp = strtotime($holiday);

            // If the holiday falls between the start date and end date
            // and is on a weekday
            // Or if $new_start_date is on a holiday
            if (($start_date <= $time_stamp && $time_stamp <= $due_date && date("N", $time_stamp) < 6) || date("Y-m-d", $new_start_date) == $holiday)
            {
                $due_date += self::oneday;
                if (date('N', $due_date) >= 6)
                {
                    // If due date on Saturday or Sunday
                    $due_date += self::weekend;
                }
            }
        }

        return $due_date;
    }
} 
```

我将这个类结合到这个：

```
//jobs that were shipped past their due date
public function totalShippedLate($offset = 7)
{
    $sql = mysql_query("SELECT deliveries.ship_date, job_sheet.delivery_date, deliveries.qty_shipped FROM `job_sheet` LEFT JOIN deliveries ON job_sheet.job_id=deliveries.jID WHERE job_sheet.completion=".jobInfo::ORDER_COMPLETE."") or die(mysql_error());
    $x = 0; // number of items shipped
    while($data = mysql_fetch_array($sql))
    {
        $date = new DateHelper();
        $offset_date = date("Y-m-d", $date->addBusinessDays(strtotime($data['delivery_date']), $offset));
        if($data['ship_date']>$offset_date)
        {
            $x += $data['qty_shipped']; 
        }
    }
    return $x;  
} 
```

这将返回超过到期日发货的商品数量，并带有可自定义的偏移量

# php - 如何通过表单发送 $_POST？

> ID：13993412
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:08:15.073
> 
> 标签：php, html, forms, input

您好，我在以表格形式发送 ID 时遇到问题。

该网站的结构是：

```
session_start();
if (!isset($_SESSION['a'])){
    ...create the session from some variables...
$_SESSION['a'] = $var;
$var = $_SESSION['a'];
}else{
$var = $_SESSION['a'];

    if (isset($_POST["one"]) ){
        echo "post one was send";
    }
    if (isset($_POST["two"]) ){
        echo "post en was send";
    }

echo "session already exists.";
} 
```

将发送的表单放置在页面末尾，并将通过排除的 php 嵌入到 html 中：

```
echo '...
      <ul class="drop_down">
    <form action="'.$_SERVER['PHP_SELF'].'" method="post">      
        <input type="submit" id="one" name="one" value="one"/><div>set one</div>
    </form>
    <form action="'.$_SERVER['PHP_SELF'].'" method="post">  
        <input type="submit" id="two" name="two" value="two"><div>set two</div>
    </form>
      </ul>
     ...'; 
```

所以奇怪的是，表单似乎没有被发送，因为代码的第一部分可以正常工作，只是发送表单时其他部分不起作用。它只会在 post-method 的条件下显示回显文本。

所以如果有人能告诉我如何解决这个问题，我真的会很感激。

多谢。

更新：

好的，使用不带操作的请求方法会回显消息。我认为它会工作。现在的问题是，当我发送帖子时，会话应该已更改。事实并非如此，我不知道为什么这不起作用。

所以原始代码是这样的：

```
if (isset($_POST["tr"]) ){
    $_SESSION['a'] = "tr";
    echo "post tr was send and session has changed to tr";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:10:48.563

如果你有这样的表格

```
<form method="post">
  <input type="submit" value="Submit Form" name="formA">
</form>

<form method="post">
  <input type="submit" value="Submit Form" name="formB">
</form> 
```

然后你可以像这样检查

```
if (isset($_REQUEST['formA']) ...
elseif (isset($_REQUEST['formB']) ... 
```

# php - 所提交的网址带有不被接受的字符。在 URL 中编码 var

> ID：13993416
> 
> 赞同：5
> 
> 时间：2012-12-21T16:08:33.413
> 
> 标签：php, uri, codeigniter-2

我的申请中有一个注册表单。当有人完成注册时，会收到一封电子邮件，其中包含确认注册的链接（典型情况）。

链接是这样的

[http://www.myDomain.com/registration/validation/m0NQGT4XzQgId5zuH/1PrDqNSP7YWq81Mba8cSXLb1WsQ5aVqf2sQ3Ece3ZdmxYvLjztaGp7Xmhv8ArjFET/8Q==](http://www.myDomain.com/registration/validation/m0NQGT4XzQgId5zuH/1PrDqNSP7YWq81Mba8cSXLb1WsQ5aVqf2sQ3Ece3ZdmxYvLjztaGp7Xmhv8ArjFET/8Q==)

*   注册是控制器
*   验证是功能
*   最后一个是用户名

编码用户名：

```
$encrypted_username = $this->encrypt->encode($username); 
```

但是，访问该链接会返回以下错误

> 所提交的网址带有不被接受的字符。

设置`$config['permitted_uri_chars'] = '';`一切正常，但他们说我们不应该这样做。

那么，我该如何正确解决这个问题呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:22:39.030

我将 config.php 更改为

```
$config['permitted_uri_chars'] = '+=\a-z 0-9~%.:_-'; 
```

现在工作正常，我希望这是一个安全的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-10T18:30:53.240

您可以通过以下方式为编码和解码 url 字符串创建帮助程序。

1) 在 application/helper 文件夹中创建一个帮助文件并粘贴到编码帮助函数下面。

```
<?php

/**
 * Encodes a string as base64, and sanitizes it for use in a CI URI.
 * 
 * @param string $str The string to encode
 * @return string
 */
function url_base64_encode($str = '')
{
    return strtr(base64_encode($str), '+=/', '.-~');
}

/**
 * Decodes a base64 string that was encoded by url_base64_encode.
 * 
 * @param object $str The base64 string to decode.
 * @return string
 */
function url_base64_decode($str = '')
{
    return base64_decode(strtr($str, '.-~', '+=/'));
} 
```

2）然后您可以使用这些函数替代base64_encode（）和base64_decode（）等核心函数

# c - 将现有的嵌入式源代码移植到 RTOS

> ID：13993428
> 
> 赞同：1
> 
> 时间：2012-12-21T16:09:16.190
> 
> 标签：c, embedded, porting, rtos

我有一个现有的嵌入式源代码，它直接在没有操作系统的微控制器上运行。我需要移植代码以在特定的 RTOS 上运行。

在尝试某件事时，有什么指导方针可以从哪里开始？资源、最佳实践和其他见解将非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T01:13:02.003

RTOS 抢先式多任务处理完全与 I/O 性能有关。您需要可以在 I/O 完成时使线程就绪的驱动程序，例如。通过发出信号量。没有什么比这更重要了。

可悲的是，这通常意味着重新设计系统以消除之前存在的影响性能的轮询:((

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T10:39:35.263

首先，RTOS 必须移植到您的微控制器上。如果 RTOS 已经支持您的微控制器，那么接下来将调整您的 RTOS 代码。为此，您需要参考 RTOS 的用户指南。

# php - 还有其他方法可以获取 iframe 值吗？

> ID：13993430
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:09:19.503
> 
> 标签：php, mysql, iframe

还有其他方法可以使用 iframe 来显示检索到的 mysql 数据库查询结果吗？

我现在有这些代码，但它不工作，

```
<iframe id="editor" style="width:500px; height:300px;" value="<?=$textContent?>"></iframe> 
```

但是当我在 textarea 上尝试时，它会显示查询结果。

```
<textarea value="<?=$textContent?>"> </textarea> 
```

如果有帮助，这是我的数据库查询，

```
<?php 
// Connect to server and select database.

$query="SELECT * FROM text_tb WHERE textID ='".$textID."'"; 
$result=mysql_query($query);
while($row=mysql_fetch_array($result)) { 
    $textID = $row['textID'];
    $textContent = $row['textContent'];
    } 
?> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:19:31.457

如果 PHP 代码与您想要的 iFrame 在同一页面上运行，您将不得不使用 JavaScript 将 HTML“注入”到其中。

```
<?php 
// Connect to server and select database.

$query="SELECT * FROM text_tb WHERE textID ='".$textID."'"; 
$result=mysql_query($query);
while($row=mysql_fetch_array($result)) { 
    $textID = $row['textID'];
    $textContent = $row['textContent'];
} 
?>

<iframe id="editor" style="width:500px; height:300px;"></iframe>

<script>
window.onload = function(){
    window.frames.editor.document.body.innerHTML = <?=json_encode($textContent);?>;
}
</script> 
```

您还可以将该 PHP 代码放在不同的页面中，并将 iFrame 的“src”设置为该 URL。

*结果.php*

```
$query="SELECT * FROM text_tb WHERE textID ='".$textID."'"; 
$result=mysql_query($query);
while($row=mysql_fetch_array($result)) { 
    $textID = $row['textID'];
    $textContent = $row['textContent'];
}

echo $textContent;
?> 
```

*主页*

```
<iframe id="editor" src="results.php" style="width:500px; height:300px;"></iframe> 
```

# vb.net - DateTimePicker 控件在焦点上添加功能

> ID：13993433
> 
> 赞同：3
> 
> 时间：2012-12-21T16:09:23.180
> 
> 标签：vb.net, winforms, datetimepicker

我只是想看看我想添加到`DateTimePicker`控件的功能是否真的可行。

我想要做的是在用户`DateTimePicker`点击显示日期选择器下拉菜单时，他们可以开始输入日期，而不必单击箭头来显示日期选择器。

我没有从 MSDN 看到任何关于此的内容，但我可能错过了，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:20:57.163

从[以编程方式打开 DateTimePicker 控件的日历](http://social.msdn.microsoft.com/Forums/en-us/winforms/thread/f2f0b213-d57a-46de-b924-e21b7ac0882e)，您可以尝试以下操作：

```
Private Sub DateTimePicker1_Enter(ByVal sender As Object, ByVal e As EventArgs) _
                                  Handles DateTimePicker1.Enter
  SendKeys.Send("%{DOWN}")
End Sub 
```

要浏览下拉列表，请尝试以下操作：

```
Private Sub DateTimePicker1_KeyDown(ByVal sender As Object, _
                                    ByVal e As KeyEventArgs) _
                                    Handles DateTimePicker1.KeyDown
  If e.KeyCode = Keys.Tab Then
    SendKeys.Send("%{F4}")
    Me.SelectNextControl(DateTimePicker1, True, True, True, True)        
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:30:43.770

在 C# 中，您可以为 DateTimePicker 的 DropDown 创建一个扩展，我很抱歉是谁创建了这个，因为我完全忘记了：D

```
public static void OpenDateTime(this DateTimePicker obj)
        {
            const int WM_LBUTTONDOWN = 0x0201;
            int width = obj.Width - 10;
            int height = obj.Height / 2;
            int lParam = width + height * 0x00010000; // VooDoo to shift height
            PostMessage(obj.Handle, WM_LBUTTONDOWN, 1, lParam);
        } 
```

用法：

```
private void dateTimePicker1_Enter(object sender, EventArgs e)
{
    dateTimePicker1.OpenDateTime();
} 
```

这是VB .NET，首先您需要创建一个模块并粘贴此代码

```
Imports System.Runtime.CompilerServices
Imports System.Runtime.InteropServices

Module Module1
    <DllImport("user32.dll", CharSet:=CharSet.Auto)> _
    Private Function PostMessage(hwnd As IntPtr, wMsg As Int32, wParam As Int32, lParam As Int32) As Integer
    End Function
    <Extension()>
    Public Sub OpenDateTime(obj As DateTimePicker)
        Const WM_LBUTTONDOWN As Integer = &H201
        Dim width As Integer = obj.Width - 10
        Dim height As Integer = obj.Height / 2
        Dim lParam As Integer = width + height * &H10000
        PostMessage(obj.Handle, WM_LBUTTONDOWN, 1, lParam)
    End Sub
End Module 
```

用法是：

```
Private Sub DateTimePicker1_Enter(sender As System.Object, e As System.EventArgs) Handles DateTimePicker1.Enter
    DateTimePicker1.OpenDateTime()
End Sub 
```

就是这样:)

# google-app-engine - 卡在“启用计费”上

> ID：13993434
> 
> 赞同：0
> 
> 时间：2012-12-21T16:09:26.760
> 
> 标签：google-app-engine

我错过了最后一个“继续结帐”按钮。我找到了选项卡并点击了提交，但它已经超时并且没有让我重新提交。现在我的应用程序已经卡住（禁用）了一个多小时，仍在等待信用卡获得批准。没有办法重试。你认为谷歌应该改进这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:51:49.723

“我有一个未在此处解决的与计费相关的问题。我在哪里可以获得答案？”的[计费常见问题解答条目](https://developers.google.com/appengine/kb/billing) 建议您联系支持人员：

> 如果您遇到上述常见问题解答条目中未明确回答的结算问题或疑问，请[联系支持人员](http://www.google.com/support/enterprise/go/support_info#cloud)，Google 代表会尽快回复您。已启用结算功能的客户可以直接从 Google 获得有关结算问题的帮助。运营支持仅适用于 Premier 客户。

# grails - 从 Grails 控制器保存对象失败

> ID：13993436
> 
> 赞同：2
> 
> 时间：2012-12-21T16:09:33.740
> 
> 标签：grails, grails-orm

有一个控制器只是更新一个对象：

```
def obj = Table.find(...)
obj.state = "END"
if(!obj.save(flush:true)) ...
// Session flushing does not help too.
// I am able to fetch that object again here but it is never persisted to DB 
```

当部署到 Debian 上时，尽管没有报告任何错误（手动检查也没有），但**该对象实际上并没有持久化**`failOnError`。但是，如果部署到我的本地 Windows 机器上，则该对象会正确持久化。两台机器都连接到同一个数据库。

将其`save`移入服务或覆盖它`withTransaction`是解决方法。是的，我知道服务是处理数据库的更好地方。相反，我很想找到这种不一致和有问题的行为的原因（以及如何在一个地方解决它）。还是设计禁止在控制器中执行此类操作？

Grails 2.1.1，Tomcat

节选`DataSource.groovy`：

```
dataSource {
  driverClassName = "oracle.jdbc.driver.OracleDriver"
  dialect = org.hibernate.dialect.Oracle10gDialect
  pooled = true
}
hibernate {
  cache.use_second_level_cache = true
  cache.use_query_cache = false
  cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T23:01:16.957

请检查是否没有验证错误。

```
obj.validate()
obj.errors.each {

  if(obj.hasErrors)
  println it
} 
```

# javascript - 分页表时出现 Google Charts API 问题

> ID：13993441
> 
> 赞同：1
> 
> 时间：2012-12-21T16:09:42.577
> 
> 标签：javascript, google-visualization

使用带有如下代码的[Google 图表工具：](https://developers.google.com/chart/)

```
<div id='table_div'></div>
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
google.load('visualization', '1', {packages:['table']});
google.setOnLoadCallback(drawTable);
function drawTable() {
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Country');
  data.addColumn('number', 'A');
  data.addColumn('number', 'B');
  data.addColumn('number', 'Total');
  data.addRows([
      ['United States',     19, 115, 134],
      ['United Kingdom',     3,  23,  26],
      ['Germany',            2,  19,  21],
      ['Ireland',            0,   3,   3],
      ['Belgium',            2,   3,   5],
      ['Russian Federation', 0,   2,   2],
        ...
  ]);

  var table = new google.visualization.Table(document.getElementById('table_div'));
  table.draw(data, {showRowNumber: true, page: 'enable', pageSize: '10', sortColumn: 3, sortAscending: false});
}
</script> 
```

分页时会导致奇怪的问题。有 38 个县，每页显示：

*   #1 - 10 个国家（从 1 到 10）
*   #2 - 28 个国家（从 11 到 38）
*   #3 - 18 个国家。不知何故，虽然第二页已经列出了其他国家，但第三页再次列出了从 21 到 38 的国家
*   #4 - 8 个国家（从 31 到 38），已列出

**JSFIDDLE** [http://jsfiddle.net/HT3St/](http://jsfiddle.net/HT3St/)

我也在[Code Playground](http://code.google.com/apis/ajax/playground/#table)上测试了代码，同样的问题发生了。这是一些我不知道的已知错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:39:43.590

```
{showRowNumber: true, 
 page: 'enable', 
 pageSize: '10', 
 sortColumn: 3, 
 sortAscending: false
} 
```

您的 pageSize 设置为字符串。注意 10 周围的引号。它必须是这样的数字

```
pageSize: 10, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:15:48.250

我遇到了同样的问题，我找到了解决方法，我再次强制执行该选项并解决了该错误：

```
 var options = {
   alternatingRowStyle:[true],
   pageSize:[20],
   page:['enable']
    };

  options['pageSize'] = 20; <- This line fix the problem. 
```

尝试一下 ：）

# javascript - Javascript - 在另一个函数中调用地图

> ID：13993442
> 
> 赞同：1
> 
> 时间：2012-12-21T16:09:48.580
> 
> 标签：javascript, jquery, cordova

我正在为 android 创建一个 phonegap 应用程序。我对 Javascript 不是很熟悉，并且遇到了一个场景，我有两个函数，一个初始化一个名为“map”的地图，另一个负责显示从地图上的数据库加载的标记列表。

但是我的问题是如何将标记设置为出现在以不同功能启动的地图上？

编辑这是一些代码：

 ``function map() { ... map = new google.maps.Map(document.getElementById("map"), mapOptions);
... }`

`function markers() { var MarkerType1 = new google.maps.MarkerImage("/android_asset/www/assets/markerType1.png", new google.maps.Size(29.0, 48.0), new google.maps.Point(0, 0), new google.maps.Point(14.0, 24.0) );`

 `var MarkerType2 = new google.maps.MarkerImage("/android_asset/www/assets/markerType2.png", new google.maps.Size(29.0, 48.0), new google.maps.Point(0, 0), new google.maps.Point(14.0, 24.0) );

var geocoder = new google.maps.Geocoder(); var eventList = $('ul#eventList').empty();

```
var eventPoints = $.ajax({
    type: 'GET',
    url: 'http://www.somedomain.com/loadEvents.php?&jsoncallback=?',
    dataType: 'JSONp',
    timeout: 5000,
    success: function(data) {
        $.each(data, function(i,item){
            if (item.EventType == 1) {                  
                    new google.maps.Marker({
                        position: new google.maps.LatLng(item.latitude, item.longitude),
                        map: this.map,
                        icon: MarkerType1,
                        draggable:false
                    });                      

            } else if (item.EventType == 2) {
                new google.maps.Marker({
                    position: new google.maps.LatLng(item.latitude, item.longitude),
                    map: this.map,
                    icon: MarkerType2,
                    draggable:false
                });
            }
        }
    }
}); 
```` 

`}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:27:59.217

这是一个可变范围的问题。确保`map`在两个函数之外声明变量。

例如。：

```
$(function() {
    var map;//outer variable is accessible within both functions.

    function createMap() {
        map = new google.maps.Map({
            ...
        });
    }

    function createMarkers() {
        $.ajax({
            ...
            success: function(data) {
                $.each(data, function() {
                    var marker = new google.maps.Marker({
                        map: map,
                        ...
                    });
                });
            }
        });
    }

    createMap();
    createMarkers();

}); 
```

在实践中，如果需要调用地图/标记创建代码以响应未来的某些事件，则只需将其放入函数中。

如果您想在页面加载后立即创建地图及其标记，则可以执行以下操作：

```
$(function() {
    var map = new google.maps.Map({
        ...
    });

    $.ajax({
        ...
        success: function(data) {
            $.each(data, function() {
                var marker = new google.maps.Marker({
                    map: map,
                    ...
                });
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:19:12.720

有两种方法可以处理这个问题。一种解决方案是沿着作用域链向上直到标记作用域和映射作用域都是当前作用域的后代，然后实例化变量，因此

```
 var map;
   var markers; 
```

然后在这些函数中将生成的对象绑定到这些变量。这样，双方都可以通过这些变量访问对方。

另一种方法是使用观察者模式（[这里有几个替代方案](http://jsperf.com/pubsubjs-vs-jquery-custom-events/50)）在地图和标记准备就绪时发布它们，并在其中一个中拥有订阅者（如您所见）以侦听另一个的准备情况并捕获传递的对象。

不同之处在于方法 1 将地图和标记公开给所有其他后代范围（可能不可取）。`

# java - 如何从 MuleEvent 中获取源？

> ID：13993443
> 
> 赞同：1
> 
> 时间：2012-12-21T16:09:49.563
> 
> 标签：java, mule

我正在使用带有 java 6 的 Mule 3.2.1。我正在编写一些代码来处理异常事件，我想获得以下信息：

```
event.source.statusLine

where
event is a MuleEvent
source is a org.apache.commons.httpclient.methods.GetMethod
statusLine is a org.apache.commons.httpclient.StatusLine 
```

我在调试器下看到该路径中的数据，但我找不到在 MuleEvent 中获取源数据的方法。

任何想法如何获得这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:44:19.160

`org.mule.api.MuleEvent`来源是一个所以`java.net.URI`我怀疑它是你所追求的。

我将大胆猜测：我想您在与出站 HTTP 端点交互后会遇到异常。

如果是这种情况，`GetMethod`则实际上可以使用`muleEvent.getMessage().getPayload()`(`#[message.payload]`在 MEL 中) 访问该实例。

# html - Android上的链接片段错误？

> ID：13993444
> 
> 赞同：0
> 
> 时间：2012-12-21T16:09:56.113
> 
> 标签：html

我用下面的链接片段维护一个站点。页面上没有 ID 为 top 的元素，但是单击它仍会将您带到页面顶部。这是因为任何链接片段的默认行为是将您带到页面顶部吗？

在android上也有一个奇怪的错误。它出现多次并且第一次有效，但第二次单击它什么也不做。

```
<a href="#top">Top</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:16:37.490

是的，所有未定义的锚点都会带您回到页面顶部。

# c++ - 向量化涉及短裤的条件

> ID：13993445
> 
> 赞同：6
> 
> 时间：2012-12-21T16:09:57.083
> 
> 标签：c++, performance, algorithm, visual-c++, vectorization

我正在使用 2 个无符号短裤的紧凑结构来指示开始和结束位置。
我需要能够快速确定是否有任何`Range`长度（从开始到结束的差异）超过阈值的对象。

我将拥有大量对象，每个对象都有自己的数组，因此在列表或其他内容中跟踪哪些对象高于阈值`Range`是不可行的。`Range`这段代码也会经常运行（每个数组每秒运行很多次），所以它需要高效。

```
struct Range
{
 unsigned short start;
 unsigned short end;
} 
```

`Range`我将始终拥有一个大小为 2^n的数组。虽然我想在发现超过阈值的东西后立即中止，但我很确定将它们简单地或全部放在一起并在最后检查会更快......假设我可以对循环进行矢量化。虽然如果我可以对每个向量的结果块做一个 if 语句，那就太好了。

```
size_t rangecount = 1 << resolution;
Range* ranges = new Range[rangecount];

...

bool result = false;
for (size_t i = 0; i < ranges; ++i)
{
 result |= (range[i].end - range[i].start) > 4;
} 
```

毫不奇怪，自动矢量化器会给出 1202 错误，因为我的数据类型不是 32 位或 64 位宽。我真的不想将我的数据大小加倍并使每个字段都成为无符号整数。所以我猜想自动矢量化方法不适合这个。

是否有可以处理 16 位变量的向量指令？如果有，我如何在 C++ 中使用它们来矢量化我的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:23:15.437

您想知道是否有任何值大于 4？

是的，有这方面的 SIMD 指令。不幸的是，自动矢量化无法处理这种情况。这是一个矢量化算法：

```
diff_v = end_v - start_v; // _mm_hsub_epi16 
floor_v = max(4_v, diff_v); // _mm_max_epi16 
if (floor_v != 4_v) return true; // wide scalar comparison 
```

`_mm_sub_epi16`与数组结构或结构数组一起使用`_mm_hsub_epi16`。

实际上，由于`start`首先存储在内存中，因此您将处理`start_v - end_v`，因此使用`_mm_min_epi16`和 的向量`-4`。

每条 SSE3 指令一次将执行 8 次比较。提前返回而不是循环仍然是最快的。然而，更多地展开循环可能会给你带来额外的速度（将第一组结果传递到打包的 min/max 函数中以组合它们）。

所以你最终（大约）：

```
most_negative = threshold = _mm_set_epi64(0xFCFCFCFCFCFCFCFC); // vectorized -4

loop:
    a = load from range;
    b = load from range;
    diff = _mm_hsub_epi16(a, b);
    most_negative = _mm_min_epi16(most_negative, diff);

    // unroll by repeating the above four instructions 4 times or so
    if (most_negative != threshold) return true;
repeat loop 
```

# java - 参数传递给静态与非静态方法的差异

> ID：13993448
> 
> 赞同：2
> 
> 时间：2012-12-21T16:10:11.670
> 
> 标签：java

静态方法对参数的处理方式与非静态方法不同吗？假设我的项目中有以下类/方法：

```
public abstract class A {
   public static void populateList(List<Item> list) {
      list.add(new Item("something")); //Item is custom class
   } 
```

和：

```
public class B {
   public void tryToPopulateList(List<Item> list) {
      list.add(new Item("something2"));
   } 
```

现在，如果我使用方法将我的列表传递给类 A，`A.populateList(myList)`那么指向`list`方法主体的指针与指向`myList`调用者的指针相同，因此这个静态方法实际上会发生变化`myList`，而不仅仅是它的本地副本。
但是，如果我打电话：

```
B b = new B();
b.tryToPopulateList(myList); 
```

然后指向`list`方法的指针不同于指向的指针，`myList`所以我猜该方法的本地副本已创建，并且“something2”被添加到此副本中。结果是在这种情况下原始的 myList 没有改变。
这种行为正常吗？您是否有任何解释或链接到如何传递参数在静态函数中的工作原理？
是的，我知道如果我想更改列表，最好从函数中返回新列表，但我只是好奇，因为我没有在任何地方找到这个主题的解释。谢谢。

**编辑**
正如评论中提到的，参数在静态和非静态方法中的处理方式相同。我在此处未列出的代码中犯了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:20:50.430

在正常情况下，应该没有区别。Java 中的所有方法参数都是按值传递的，这意味着将列表的地址（指针）复制到被调用方法的参数中。

我只能想到您描述的行为可能发生的一种情况：您是否使用提供面向方面编程功能的框架？您的非静态方法调用可能被拦截。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:23:13.837

这是一条底线，Java 中的所有方法参数都是值引用。

# java - 如何对地图进行排序 > 通过分配给它的最多值（非数字）的键

> ID：13993450
> 
> 赞同：3
> 
> 时间：2012-12-21T16:10:20.137
> 
> 标签：java, collections, hashmap, generic-collections

我目前一直在使用 Maps，我对如何让我的程序有效运行感到困惑。我可以遍历地图获取键和值，并很容易地按字母顺序和反向字母顺序对它们进行排序，并为此使用了自定义比较器。但是，我现在尝试根据具有最多值的键对地图进行排序。这些值是我创建的对象列表，可以认为是这种情况。

有一个地图集（如目录），其中包含许多城镇（字符串类型的键）。包含商店（列表）。我想对此进行排序，以便首先显示商店最多的城镇，然后按降序排列，二级排序基于城镇的字母顺序，并返回一个代表这个的字符串。

到目前为止，我已经使用了 Comparator 接口，每个类都按字母顺序和反向字母顺序排列，并希望遵循相同的模式进行学习，但这让我完全难过。

例子：

```
class Atlas {

       Map<String, List<Shop> atlas = new HashMap<String, List<Shop>();

       void addShop(Shop shop){
            //if(Atlas already contains){
              get the town and add the shop to it.
            }
            else{
                 add the town as the key and the shop as the value in the list
            }
       }

       List<Shop> getAllShopsFromTheGivenTown(String givenTown){
            //if(Atlas contains givenTown){
            return the givenTown from the List. 
            }
            else{
                 //Return an ArrayList emptyList
            }
       }

       public String returnAllTownsAndShopsAlphbetically(){
       String tmpString = "";   

    List<String> keys = new LinkedList<String>(atlas.keySet());
    TownComparatorAtoZ tc = new TownComparatorAtoZ();
    Collections.sort(keys, tc);

    for(String town : keys){
         List<Shop> shops = new LinkedList<Dealer>(atlas.get(town));
         ShopComparatorAtoZ sc = new ShopComparatorAtoZ();
          Collections.sort(shop, sc);

        for(Shop shop : shops){
            if(tmpString.isEmpty()){
            tmpString = tmpString + town + ": " + shop.getName();
            }
            else if(tmpString.contains(town)){
            tmpString = tmpString + ", " + shop.getName();
            }
            else{
            tmpString = tmpString + " | " + town + ": " + shop.getName();               }   
        }
    }       
    return tmpString;   
    }
} 
```

从上面可以看出（虽然不是最干净和最有效的）按字母顺序返回内容并将重新格式化为字符串生成器。但是，我想知道如何使用比较器来实现我所追求的，如果有人可以提供一个代码片段来解释它的实际作用，我将不胜感激，因为它更多地了解如何做到这一点，而不仅仅是获得一个复制并粘贴代码块，但需要在代码中直观地查看以理解它。

所以输出我想成为

曼彻斯特：m&s, h&m, schuch | 伯明翰：游戏、车身修理厂| 高分辨率照片| CLIPARTO 利物浦：体育

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:49:17.147

你可以尝试这样的事情：

```
public static Map<String, List<Shop>> mySortedMap(final Map<String, List<Shop>> orig)
{
    final Comparator<String> c = new Comparator<String>()
    {
        @Override
        public int compare(final String o1, final String o2)
        {
            // Compare the size of the lists. If they are the same, compare
            // the keys themsevles.
            final int sizeCompare = orig.get(o1).size() - orig.get(o2).size();
            return sizeCompare != 0 ? sizeCompare : o1.compareTo(o2);
        }
    }

    final Map<String, List<Shop>> ret = new TreeMap<String, List<Shop>>(c);
    ret.putAll(orig);
    return ret;
} 
```

解释：`TreeMap`是 a 的基本实现`SortedMap`，它可以将键值的比较器作为参数（如果没有比较器作为参数传递，则以键的自然顺序为准）。在这里，我们创建了一个临时比较器，比较作为参数传递的原始映射的列表大小，如果大小相等，它会比较键本身。最后，我们将原始地图中的所有元素注入其中，并将其返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:12:35.967

如果您尝试以下操作会怎样：

```
private static final Comparator<Map.Entry<String, List<Shop>>> CountThenAtoZ =
    new Comparator<Map.Entry<String, List<Shop>>>() {
        @Override
        public int compare(Map.Entry<String, List<Shop>> x, Map.Entry<String, List<Shop>> y) {
            // Compare shop count first. If equal, compare keys alphabetically.
            int cmp = ((Integer)x.getValue().size()).compareTo(y.getValue().size());
            return cmp != 0 ? cmp : x.getKey().compareTo(y.getKey());
        }
    };

...

public String returnAllTownsAndShopsAlphbetically() {

    List<Map.Entry<String, List<Shop>>> entries = new ArrayList<>(atlas.entrySet());
    Collections.sort(entries, CountThenAtoZ);

    String result = "";
    boolean firstTown = true;
    for (Map.Entry<String, List<Shop>> entry : entries) {
        if (!firstTown) result += " | "; else firstTown = false;
        result += entry.getKey() + ": ";

        boolean firstShop = true;
        TreeSet<Shop> sortedShops = new TreeSet<>(new ShopComparatorAtoZ());
        sortedShops.addAll(entry.getValue());
        for (Shop shop : sortedShops) {
            if (!firstShop) result += ", "; else firstShop = false;
            result += shop.getName();
        }
    }

    return result;
} 
```

它的工作方式是首先按照我们想要的顺序创建一个地图集条目列表。我们需要访问键及其关联值来构建正确的排序，因此对实例进行排序*是*`List`最`Map.Entry`方便的。

然后我们遍历排序列表来构建结果`String`，确保在将商店添加到`String`.

# java - 如何使用 Jsoup 获取表的 h2 标签

> ID：13993451
> 
> 赞同：0
> 
> 时间：2012-12-21T16:10:23.880
> 
> 标签：java, html, screen-scraping, jsoup

我需要一些帮助来使用 Jsoup 抓取网页。我想从 hcfactions 网页解析玩家资料并收集他们的杀戮和死亡情况。我遇到的问题是每个个人资料页面都是动态创建的，并且只有在玩家被杀或死亡时才会有所述表格。因此，为了知道我正在解析哪个表，我需要获取调用后设置的标题文本。

示例网页：[http](http://www.hcfactions.net/index.php?action=playerinfo&player=Djmaddox) ://www.hcfactions.net/index.php?action=playerinfo&player=Djmaddox 。

下面是我正在抓取的网页中的一个 html 片段：

```
<table class='table-bordered'><h2 style='text-align:center'>Deaths</h2>
    <tr><td>Date</td><td>Reason</td><td>Details</td></tr><tr><td>Dec 11 5:27pm CST</td>..... 
```

我有这段代码可以拉出表格并计算条目，但它不会拉出 h2 标签供我选择。

```
public void getPlayerDetails(String name) {
        String data = "";
        Avatar temp = _db.getPlayer(name);
        playerUrl = "http://www.hcfactions.net/index.php?action=playersearch&player=" + name;
        try {
//            data = Jsoup.connect(url)
//                    .url(url).get().html();
            playerDoc = Jsoup.connect(playerUrl).get();
        } catch (IOException ex) {
            Logger.getLogger(JParser.class.getName()).log(Level.SEVERE, null, ex);
        }
        if (playerDoc.select("table").size() == 1) {
            return;
        } else if (playerDoc.select("table").size() >= 2) {

            for (int x = 1; x < playerDoc.select("table").size(); x++) {

                System.out.println("deaths");
                Element table = playerDoc.select("table").get(x);
                Iterator<Element> ite = table.select("tr").iterator();
                int count = 0;
                while (ite.hasNext()) {
                    data = ite.next().text();
                    count++;
                }

                if (count > 0) {
                    temp.setDeaths(count - 1);
                }

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:18:34.230

正如 ka3ak 所说，这`<h2>`是错误的定位。但是您不必为此放弃解析器而求助于正则表达式。假设 JSoup 是一个不错的 HTML 解析器（我自己从未使用过），则`<h2>`元素应该是紧接在该元素之前的`<table>`元素。获取您的“选择”语句以在那里查找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T08:52:38.680

`Elements headers=playerDoc.select("div.span10.offset1 h2");`
恕我直言，您的选择接缝有点过于复杂，但也许必须是这样。无论如何，上面的代码片段都会让您在适当的容器中出现每个 H2 标签。稍后您可以选择类似的所需表
`Elements tables=playerDoc.select("div.span10.offset1 table");`
并应用适当的数据挖掘它们。标题将与表的顺序相对应。我想，我的工作已经在这里完成了 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:02:23.070

标签`<h2>`位于无效位置。这就是我认为 JSoup 找不到它的原因。您必须使用正则表达式自己提取它。您可以`<h2>`使用以下代码获取 的内容：

```
String tableToString = "<table class='table-bordered'><h2 style='text-align:center'>Deaths</h2>" + "<tr>" + "<td>Date</td>" + "<td>Reason</td>" + "<td>Details</td>" + "</tr>" + "</table>";
String regex = "<h2.*>(.*)?</h2>";

Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(tableToString);
if (matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

`tableToString`您可以从您的`table.toString()`代码中初始化。

# ruby-on-rails - Rails jquery datepicker日期预加载

> ID：13993454
> 
> 赞同：1
> 
> 时间：2012-12-21T16:10:32.180
> 
> 标签：ruby-on-rails, datepicker

我在 Rails 应用程序中使用 jquery datepciker。我想在表单页面加载时已经填写日期。因此，用户可以保持原样或更改日期。

我希望日期选择器选项能让我这样做。

我试过这个：

```
 $("#comment_status_date").datepicker({
    dateFormat: 'yy-mm-dd',
    setDate: Date.now
}); 
```

但是，日期字段为空。

我必须在模型或控制器中做一些 ruby​​ 代码吗？datepicker 是否可以选择执行此操作？

谢谢！！

我想出了一个办法：

```
<%= f.input :status_date, :as => :string, :label => 'Date', :class => 'calendar hasDatepicker', :input_html => { :value => Date.today.to_s } %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:25:31.733

我想出了一个办法：

```
<%= f.input :status_date, :as => :string, :label => 'Date', :class => 'calendar hasDatepicker', :input_html => { :value => Date.today.to_s } %> 
```

# php - 更改多列的列类型

> ID：13993461
> 
> 赞同：2
> 
> 时间：2012-12-21T16:11:03.757
> 
> 标签：php, mysql, sql

我正在尝试将一个表中多个列的类型更改为 varchar(50) （在单个 SQL 查询中）。你能告诉我我做错了什么，以及为什么这个查询显示错误。

```
ALTER TABLE 'my_table_name' 
    ALTER COLUMN 'col1' varchar(50), 
    ALTER COLUMN 'col2' varchar(50), 
    ALTER COLUMN 'col3' varchar(50) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:15:04.040

去掉单引号并使用`MODIFY`not`CHANGE COLUMN`

```
ALTER TABLE my_table_name 
    MODIFY col1 varchar(50), 
    MODIFY col2 varchar(50), 
    MODIFY col3 varchar(50) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:15:07.683

您需要使用`MODIFY`并摆脱单引号：

```
ALTER TABLE my_table_name 
    MODIFY col1 varchar(50), 
    MODIFY col2 varchar(50), 
    MODIFY col3 varchar(50) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:14:12.087

你想要的语法是：

```
ALTER TABLE 'my_table_name'  
modify COLUMN 'col1' varchar(50),   
modify COLUMN 'col2' varchar(50),   
modify COLUMN 'col3' varchar(50) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:18:03.663

使用`CHANGE`您需要指定`new_col_name`then `col_definition`：

```
ALTER TABLE `my_table_name` 
CHANGE COLUMN `col1` `col1` varchar(50),   
CHANGE COLUMN `col2` `col2` varchar(50),   
CHANGE COLUMN `col3` `col3` varchar(50) 
```

使用`MODIFY`您只需要指定`col_definition`：

```
ALTER TABLE `my_table_name` 
MODIFY COLUMN `col1` varchar(50),   
MODIFY COLUMN `col2` varchar(50),   
MODIFY COLUMN `col3` varchar(50) 
```

[mysql_manual](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T16:23:37.450

如果您只想更改列定义（不重命名），可以使用以下语法：

```
ALTER TABLE 'my_table_name' 
    MODIFY 'col1' varchar(50) 
```

否则，您必须使用以下语法：

```
ALTER TABLE 'my_table_name' 
    CHANGE 'col1old', 'col1new' varchar(50) 
```

# php - 一个客户端和一个服务器，当他登录时我应该如何验证用户？

> ID：13993463
> 
> 赞同：0
> 
> 时间：2012-12-21T16:11:14.300
> 
> 标签：php, ajax, codeigniter, validation

目前的情况是我有两个单独的应用程序。

一个是我称为 *user_client* 的那个，另一个是服务器。

user_client 主要是“标记”，[HTML](http://en.wikipedia.org/wiki/HTML)的东西。这个应用程序只会向服务器抛出一个请求并接收响应。就这样。

另一方面，服务器是一个[CodeIgniter](http://en.wikipedia.org/wiki/Codeigniter#CodeIgniter)安装，它的*控制器将接收**客户端*抛出的请求，处理数据并发送回响应。

但是我对如何验证用户以及在哪里存储他们的会话感到很困惑。

现在的问题是我在 user_client 中有一个登录表单，并且我设置了 JavaScript 代码来对服务器进行 Ajax 调用。

就像是：

```
success : server_path + 'login', 
```

到目前为止，我所做的是使用 Ajax 调用发送到服务器的数据来验证用户并保存会话。

我做得对吗？当我保存会话时，它是服务器的会话，对吗？不是 user_client。

以及如何检查用户是否已登录？是否仍然可以执行以下操作？

```
if (isset($_SESSION['whatever'])) 
```

我错过了关于会话的什么？我对会议有什么误解，因为我相信有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:37:34.157

会话（简化）只是服务器跨页面请求跟踪特定用户的一种方式。CI 会话将通过在客户端浏览器上创建一个保存会话 ID 的 cookie 来跟踪用户 - 该会话 ID（如果设置为）将保存在“ci_sessions”（默认名称）表中的数据库中。所有会话数据都将保存在那里。

按照您建议的方式进行操作很好，只需确保在将身份验证传递给服务器时使用安全连接。

# django - 从 Django 1.4 向后迁移到 Django 1.3

> ID：13993469
> 
> 赞同：2
> 
> 时间：2012-12-21T16:11:30.353
> 
> 标签：django, django-nonrel

有时，我愚蠢、鲁莽和冒险的编程直觉会把我带到一些危险的地方：

我用 sqlite3 启动了一个 Django 1.4 应用程序，然后转移到 mysql，那里没什么大不了的。但后来我意识到我的模型非常适合 NoSql 模型，并决定尝试使用[django-nonrel](https://github.com/django-nonrel/django-nonrel)的 MongoDB，它是 Django 1.3 的一个分支，支持非关系数据库。1.4 版还没有准备好使用。

所以，我已经分支了我的 repo，创建了我的 virtualenv 并 pipinstalled django-nonrel 但是当我运行时`./manage.py shell`我收到了这条消息

```
Traceback (most recent call last):
  File "./manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/marcoslhc/Documents/Proyectos/fontcase/mongoBE/lib/python2.7/site-packages/django/core/management/__init__.py", line 429, in execute_from_command_line
    utility.execute()
  File "/Users/marcoslhc/Documents/Proyectos/fontcase/mongoBE/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/marcoslhc/Documents/Proyectos/fontcase/mongoBE/lib/python2.7/site-packages/django/core/management/__init__.py", line 252, in fetch_command
    app_name = get_commands()[subcommand]
  File "/Users/marcoslhc/Documents/Proyectos/fontcase/mongoBE/lib/python2.7/site-packages/django/core/management/__init__.py", line 101, in get_commands
    apps = settings.INSTALLED_APPS
  File "/Users/marcoslhc/Documents/Proyectos/fontcase/mongoBE/lib/python2.7/site-packages/django/utils/functional.py", line 276, in __getattr__
    self._setup()
  File "/Users/marcoslhc/Documents/Proyectos/fontcase/mongoBE/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/Users/marcoslhc/Documents/Proyectos/fontcase/mongoBE/lib/python2.7/site-packages/django/conf/__init__.py", line 139, in __init__
    logging_config_func(self.LOGGING)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/config.py", line 776, in dictConfig
    dictConfigClass(config).configure()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/config.py", line 562, in configure
    'filter %r: %s' % (name, e))
ValueError: Unable to configure filter 'require_debug_false': Cannot resolve 'django.utils.log.RequireDebugFalse': No module named RequireDebugFalse 
```

RequireDebugFalse 是 Django 1.4 中的新功能（请参阅[此处](https://docs.djangoproject.com/en/1.4/topics/logging/#django.utils.log.RequireDebugFalse)和[此处](https://docs.djangoproject.com/en/1.4/releases/1.4/#request-exceptions-are-now-always-logged)），我猜 1.4 中的一些其他底层魔法新功能在这个新安装中也不起作用。*我想知道是否可以在不*执行`django-admin.py startproject`or的情况下将我的应用程序迁移回 Django 1.3 `django-admin.py startapp`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:27:17.080

你可以做到这一点，尽管你可能想让大门敞开着再次前进。

我过去处理这个问题的方式是，如果可能的话，*不要*对你的代码进行大量更改。相反，做你已经做过的——运行代码并等待它崩溃。确定问题的根源，然后执行以下操作之一：

*   创建一个提供所需功能的存根（或者至少悄悄地什么都不做），
*   将功能反向移植到您自己的 1.3 个人副本上，或
*   将功能猴子补丁到未修改的 1.3 上。（我的推荐）

除非您完全注意到 1.4 中的一些独特的新功能，否则您会惊讶于您能以多快的速度想出一个可用的环境。我有一个项目，其中猴子补丁文件只有大约 100 行长，可以将大约十二个功能改进到旧版本上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:22:42.167

如果您没有在项目中使用 django 1.4 的东西，您可以创建一个 1.3 项目并从那里复制日志记录设置。那你应该没事。

# jquery - 没有对话框的 jQuery UI 覆盖

> ID：13993471
> 
> 赞同：2
> 
> 时间：2012-12-21T16:11:41.403
> 
> 标签：jquery, jquery-ui, overlay, jquery-ui-dialog

> **可能重复：**
> [jQuery UI：如何单独使用 ui-widget-overlay？](https://stackoverflow.com/questions/3782944/jquery-ui-how-to-use-ui-widget-overlay-by-itself)

我想避免用户在 ajax 调用期间更改屏幕。所以我正在考虑使用 jQuery UI 覆盖（模态对话框的覆盖）但没有任何对话框。我找不到任何方法来做到这一点。

**有没有办法在没有对话框的情况下显示模式？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:25:09.173

我接受另一个 SO question 的[答案](https://stackoverflow.com/a/12942956/310276)。

[这里有一个小提琴](http://jsfiddle.net/paska/b23pd/1/)。

和代码：

```
$("body").append($.ui.dialog.overlay.create()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:15:35.840

modal 选项设置为 true 的对话框会添加以下 div，其中 width 和 height 表示浏览器窗口中的可视区域：

```
<div class="ui-widget-overlay" style="width: 607px; height: 350px; z-index: 1001;"></div> 
```

你可以在你的页面上尝试类似的东西。请参阅[http://jqueryui.com/dialog/#modal](http://jqueryui.com/dialog/#modal)，然后在演示 iframe 上查看源代码以获取完整源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:19:04.387

[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js)

他们的代码显示他们在小部件上调用`_createOverlay()`和`_destroyOverlay()`。您可以尝试创建一个对话框并使用它进行初始化，`autoOpen:false`然后手动调用这些方法。

# grails - 如何在intelliJ 12中定义黄瓜的步骤定义位置

> ID：13993472
> 
> 赞同：9
> 
> 时间：2012-12-21T16:11:43.040
> 
> 标签：grails, intellij-idea, cucumber, geb

我有我`feature files`的`src/resources/com/features`和我`step definitions`的`src/main/java/com/step_definitions`

我的测试都运行正确，但 IntelliJ 拒绝查看步骤定义在哪里，即使我要求它创建一个新的。这是在哪里配置的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T21:45:09.917

我刚刚遇到完全相同的问题（据记录，我的背景是 Java、Ruby、Cucumber 和 RubyMine，但我对 IntelliJ 和 Cucumber-JVM 完全陌生）。

在 Cucumber-JVM中`run configuration`，您**必须在**[IntelliJ 文档](http://www.jetbrains.com/idea/webhelp/run-debug-configuration-cucumber-java.html)`glue`中提到的字段中指定存储步骤定义的包。IntelliJ - 至少对我来说 - 似乎没有提供默认值。

为了进一步阐述，一个非常基本的项目如下所示：

```
Example
└───src
    ├───main
    │   └───java
    └───test
        ├───java
        │   └───com
        │       └───bensnape
        │           └───example
        │                   MyStepdefs.java
        └───resources
                example.feature 
```

这里的`glue`值是`com.bensnape.example`。

# 更新

今天早上又玩了一些 IntelliJ 之后，如果您遵守 Cucumber-JVM 约定，它似乎*确实*为您提供了价值 - 即功能必须存在于下面，类似地，步骤必须存在于.`glue``src/test/resources/<package>``src/test/java/<package>`

示例项目树：

```
Example
└───src
    ├───main
    │   └───java
    └───test
        ├───java
        │   └───com
        │       └───bensnape
        │           └───example
        │                   MyStepdefs.java
        │
        └───resources
            └───com
                └───bensnape
                    └───example
                            example.feature 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T10:47:41.480

如果您将文件夹标记为（测试）源根目录（右键单击文件夹 -> 将目录标记为 ->（测试）源根目录），它也可以正常工作。

我的 grails 项目是这样设置的：

```
 test
        ├───cucumber
        │   └───steps
        │   └───support
        │   └───features
        └───unit 
```

单元被标记为测试源根，在将黄瓜标记为之一之后，步骤定义被正确解析。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T04:42:09.710

默认约定是`step definitions`在. 子文件夹的名称并不重要；无论名称是什么，它都可以正常工作。`step_definitions sub-folder``features directory`

我的猜测是 IDE 将遵循相同的约定，因此如果将 step_definitions 文件夹移动到 features 文件夹下，IntelliJ 应该正确执行这些功能。

在执行功能之前`cucumber command`需要一个选项来要求文件。`-r`此选项可用于使其在非传统位置查找 step_definitions。

我猜你可能`-r src/main/java/com/step_definitions`在你的本地配置中有黄瓜从命令行调用时看到这些 step_definitions。

运行`cucumber --verbose`显示命令行在哪里找到步骤定义代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-06T10:34:12.960

您可以通过打开“Edit Configurations -> Defaults -> Cucumber Java -> Glue”并添加包名称来全局设置粘合位置。

（智能 12.1.4）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T13:24:08.880

我在 12.1.3 版中遇到了同样的问题。我的文件夹和文件以其他答案所述的标准方式设置，并将代码标记为测试源并没有解决它。

然后我更新到 12.1.6 问题得到解决:)

# jquery - 为什么 Google GeoCoding 有时只返回邮政编码？

> ID：13993474
> 
> 赞同：5
> 
> 时间：2012-12-21T16:11:50.353
> 
> 标签：jquery, google-maps, google-maps-api-3, geocoding

如果我只通过我的 GeoCoding 调用一个城市并声明它无法返回邮政编码。知道为什么吗？

这是我的电话：

```
var test = 'New York, NY';

var geocoder = new google.maps.Geocoder();         
geocoder.geocode({ 'address': test }, function (results, status) {          

if (status == google.maps.GeocoderStatus.OK) {  

    var lat = results[0].geometry.location.lat();
    var lng = results[0].geometry.location.lng();

    var result=results[0].address_components;

    //console.log(result);

    var postal = null;
    var city = null;
    var state = null;
    var country = null;

    for(var i=0;i<result.length;++i){
        if(result[i].types[0]=="postal_code"){
            postal = result[i].long_name;
        }
        if(result[i].types[0]=="administrative_area_level_1"){
            state = result[i].long_name;
        }
        if(result[i].types[0]=="locality"){
            city = result[i].long_name;
        }
        if(result[i].types[0]=="country"){
            country = result[i].long_name;
        }
    }

    alert("POSTAL: " + postal);
    alert("STATE: " + state);
    alert("CITY: " + city);
    alert("COUNTRY: " + country);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:02:07.917

如果你真的需要一个邮政编码，你可以将请求返回到反向地理编码器，这应该会给你一个有点代表城市的邮政编码：

```
if (!postal) {
  geocoder.geocode({ 'location': results[0].geometry.location }, function (results, status) {          
    if (status == google.maps.GeocoderStatus.OK) {  

      var result=results[0].address_components;

      for(var i=0;i<result.length;++i){
       if(result[i].types[0]=="postal_code"){
          postal = result[i].long_name;
       }
      }
      alert("POSTAL: " + postal);
    }
});
} else alert("POSTAL: " + postal); 
```

[例子](http://www.geocodezip.com/v3_simpleMap_geocodeNoZip.html)

```
var map;
var geocoder = new google.maps.Geocoder();

function initialize() {
  var mapOptions = {
    zoom: 8,
    center: new google.maps.LatLng(-34.397, 150.644),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);
  var test = 'New York, NY';

  geocoder.geocode({
    'address': test
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {

      var lat = results[0].geometry.location.lat();
      var lng = results[0].geometry.location.lng();
      if (results[0].geometry.viewport) map.fitBounds(results[0].geometry.viewport);
      if (results[0].geometry.viewport) map.fitBounds(results[0].geometry.viewport);
      else if (results[0].geometry.bounds) map.fitBounds(results[0].geometry.bounds);
      else map.setCenter(results[0].geometry.location);

      var result = results[0].address_components;

      //console.log(result);

      var postal = null;
      var city = null;
      var state = null;
      var country = null;

      for (var i = 0; i < result.length; ++i) {
        if (result[i].types[0] == "postal_code") {
          postal = result[i].long_name;
        }
        if (result[i].types[0] == "administrative_area_level_1") {
          state = result[i].long_name;
        }
        if (result[i].types[0] == "locality") {
          city = result[i].long_name;
        }
        if (result[i].types[0] == "country") {
          country = result[i].long_name;
        }
      }
      if (!postal) {
        geocoder.geocode({
          'location': results[0].geometry.location
        }, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {

            var result = results[0].address_components;

            for (var i = 0; i < result.length; ++i) {
              if (result[i].types[0] == "postal_code") {
                postal = result[i].long_name;
              }
            }
            document.getElementById('info').innerHTML += ("POSTAL: " + postal + "<br>");
          }
        });
      } else alert("POSTAL: " + postal);
      document.getElementById('info').innerHTML += ("STATE: " + state + "<br>");
      document.getElementById('info').innerHTML += ("CITY: " + city + "<br>");
      document.getElementById('info').innerHTML += ("COUNTRY: " + country + "<br>");
    }

  });
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
}

#map_canvas {
  height: 80%;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="info"></div>
<div id="map_canvas"></div>
```

# android - Twitter Web Intents 是否适用于 Android Chrome？

> ID：13993478
> 
> 赞同：0
> 
> 时间：2012-12-21T16:11:55.690
> 
> 标签：android, google-chrome, android-intent, twitter

我正在使用 Twitter Web Intent 功能来帮助移动浏览器触发 Android Chrome 中本机应用程序的使用。但是它似乎不起作用：是否存在一个已知问题，这在 Android Chrome 中不起作用？

（我已经使用 Android Gmail 应用程序和标准浏览器在电子邮件中对此进行了测试，它会触发应用程序建议对话框。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:44:20.437

意图触发正在与 Chrome 一起使用。您可以使用不同的应用程序来查看它是否正常工作。我不知道 Twitter Android 应用程序正在过滤他们网站的网址。你确定他们这样做？

# php - 在 PHP 中重新声明类

> ID：13993479
> 
> 赞同：1
> 
> 时间：2012-12-21T16:12:24.163
> 
> 标签：php, class, redeclare

有人知道如何重新声明功能吗？
例如：

```
class Name{}
//Code here
class Name{} 
```

输出是： **无法重新声明类**
所以我尝试将类命名为变量：

```
$foo = 'name';
class $foo{}

//Code

class $foo{} 
```

编辑：我有一个数据库表，我正在从表用户“while()”循环中读取数据。
我有一个使用表格并回显一些信息的类。这就是原因。

它仍然无法正常工作......有
什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:14:53.990

如果您想拥有多个具有相同名称的类，那么您应该使用[namespaces](http://php.net/manual/en/language.namespaces.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:14:28.063

没有。PHP 根本不支持现有类的运行时修改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:14:44.783

为什么要重新声明一个类？你什么时候可以参考它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:14:50.413

我认为您正在寻找的是创建一个类的新实例：

```
$foo = 'name';
$obj1 = new $foo();

//Code

$obj2 = new $foo(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T16:14:52.207

您不应该有 2 个或更多具有相同名称的类。这是行不通的。解释器应该如何知道哪个类是正确的类？

更改第二个类的名称并在需要时对其进行扩展。

**编辑：**使用名称空间，您需要相同的类名，或者如果您有一个现有的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T16:16:09.303

如果你需要一个类的两个实例，你可以将它初始化为两个不同的变量；

```
class Foo{}

$foo1 = new Foo;
$foo2 = new Foo; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T16:46:57.900

[使用 PHP 命名空间](http://php.net/manual/en/language.namespaces.php)

```
namespace A {

    class Name {

        function __toString() {
            return __METHOD__;
        }
    }
}

namespace B {

    class Name {
        function __toString() {
            return __METHOD__;
        }
    }
}

namespace C {

    echo new \A\Name ,PHP_EOL;
    echo new \B\Name ,PHP_EOL;
} 
```

输出

```
A\Name::__toString
B\Name::__toString 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T16:16:23.467

使用 PHP[命名空间](http://php.net/manual/en/language.namespaces.php)来声明具有相同名称但用途不同的类。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-21T16:22:35.987

首先：不要这样做。

也就是说，如果你真的需要“重新定义”一个类，你可以使用包装类来做到这一点

```
<?php

class foo { //Original definition here };

class bar {
  var $baseobj;

   function bar($some, $args) {
     $this->baseobj=new $which($some, $args);
   }

   function someMethod() {
      return $this->baseobj->someMthod();
   }

   //...
} 

class baz {

   function someMethod() {
      return "This is the result";
   }

   //...
} 

$obj=new bar($this, $that);
//$obj is now a wrapped foo object
echo $obj->someMethod(); //Will call into foo

$obj->baseobj=new baz($this, $that);
//$obj is now a wrapped baz object
echo $obj->someMethod(); //Will call into baz
?> 
```

再说一遍：不要在没有非常非常好的理由的情况下这样做！

免责声明：这个实现不仅仅是粗略的，它只是为了传达这个想法。

# soap - 使用模拟器的 SOAP Web 服务

> ID：13993481
> 
> 赞同：2
> 
> 时间：2012-12-21T16:12:30.247
> 
> 标签：soap, service, web

我正在实现soap web 服务，但必须使用模拟器才能使其工作并从WSDL 文件生成java bean 文件。请因为我是 SOAP 新手，任何人都可以指导我如何在 eclipse 项目中执行此操作。提供的 WSDL 抱怨模式位置错误，我无权访问服务器，但我被要求使用模拟器。

```
 <?xml version="1.0" encoding="UTF-8"?>
<!-- Mit XMLSpy v2013 (http://www.altova.com) von thilo gaul (ltur) bearbeitet -->
<!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2 (branches/2.2-7015; 2012-02-20T20:31:25+0000) JAXWS-RI/2.2.6 JAXWS/2.2 svn-revision#unknown. -->
<wsdl:definitions xmlns:pws="http://www.peakwork.net/pws/2010/03" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsdlsoap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" name="PWS" targetNamespace="http://www.peakwork.net/pws/2010/03">
    <wsdl:documentation>
        The wsdl for the PeakWork PHub.
    </wsdl:documentation>
    <wsdl:types>
        <schema xmlns="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="http://www.peakwork.net/pws/2010/03">
            <include schemaLocation="http://213.144.19.50:80/pwsLMR/2010/03/?xsd=34"/>
        </schema>
    </wsdl:types>
    <wsdl:message name="GetFlightGroupRequest">
        <wsdl:part name="fgr" element="pws:FlightGroupRequest"/>
    </wsdl:message>
    <wsdl:message name="GetFlightGroupResponse">
        <wsdl:part name="fgr" element="pws:FlightGroupResponse"/>
    </wsdl:message>
    <wsdl:message name="GetFlightProductRequest">
        <wsdl:part name="fpr" element="pws:FlightProductRequest"/>
    </wsdl:message>
    <wsdl:message name="GetFlightProductResponse">
        <wsdl:part name="fpr" element="pws:FlightProductResponse"/>
    </wsdl:message>
    <wsdl:message name="GetFlightOfferRequest">
        <wsdl:part name="for" element="pws:FlightOfferRequest"/>
    </wsdl:message>
    <wsdl:message name="GetFlightOfferResponse">
        <wsdl:part name="for" element="pws:FlightOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetFlightVariantRequest">
        <wsdl:part name="fvr" element="pws:FlightVariantRequest"/>
    </wsdl:message>
    <wsdl:message name="GetFlightVariantResponse">
        <wsdl:part name="fvr" element="pws:FlightOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetFlightMatrixRequest">
        <wsdl:part name="fmr" element="pws:FlightMatrixRequest"/>
    </wsdl:message>
    <wsdl:message name="GetFlightMatrixResponse">
        <wsdl:part name="fmr" element="pws:FlightOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetHotelGroupRequest">
        <wsdl:part name="hgr" element="pws:HotelGroupRequest"/>
    </wsdl:message>
    <wsdl:message name="GetHotelGroupResponse">
        <wsdl:part name="hgr" element="pws:ProductGroupResponse"/>
    </wsdl:message>
    <wsdl:message name="GetHotelProductRequest">
        <wsdl:part name="hpr" element="pws:HotelProductRequest"/>
    </wsdl:message>
    <wsdl:message name="GetHotelProductResponse">
        <wsdl:part name="hpr" element="pws:HotelProductResponse"/>
    </wsdl:message>
    <wsdl:message name="GetHotelOfferRequest">
        <wsdl:part name="hor" element="pws:HotelOfferRequest"/>
    </wsdl:message>
    <wsdl:message name="GetHotelOfferResponse">
        <wsdl:part name="hor" element="pws:HotelOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetHotelVariantRequest">
        <wsdl:part name="hvr" element="pws:HotelVariantRequest"/>
    </wsdl:message>
    <wsdl:message name="GetHotelVariantResponse">
        <wsdl:part name="hvr" element="pws:HotelOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetHotelMatrixRequest">
        <wsdl:part name="hmr" element="pws:HotelMatrixRequest"/>
    </wsdl:message>
    <wsdl:message name="GetHotelMatrixResponse">
        <wsdl:part name="hmr" element="pws:HotelOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetPackageGroupRequest">
        <wsdl:part name="pgr" element="pws:PackageGroupRequest"/>
    </wsdl:message>
    <wsdl:message name="GetPackageGroupResponse">
        <wsdl:part name="pgr" element="pws:ProductGroupResponse"/>
    </wsdl:message>
    <wsdl:message name="GetPackageProductRequest">
        <wsdl:part name="ppr" element="pws:PackageProductRequest"/>
    </wsdl:message>
    <wsdl:message name="GetPackageProductResponse">
        <wsdl:part name="ppr" element="pws:PackageProductResponse"/>
    </wsdl:message>
    <wsdl:message name="GetPackageOfferRequest">
        <wsdl:part name="por" element="pws:PackageOfferRequest"/>
    </wsdl:message>
    <wsdl:message name="GetPackageOfferResponse">
        <wsdl:part name="por" element="pws:PackageOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetPackageVariantRequest">
        <wsdl:part name="pvr" element="pws:PackageVariantRequest"/>
    </wsdl:message>
    <wsdl:message name="GetPackageVariantResponse">
        <wsdl:part name="pvr" element="pws:PackageOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetPackageMatrixRequest">
        <wsdl:part name="pmr" element="pws:PackageMatrixRequest"/>
    </wsdl:message>
    <wsdl:message name="GetPackageMatrixResponse">
        <wsdl:part name="pmr" element="pws:PackageOfferResponse"/>
    </wsdl:message>
    <wsdl:message name="GetPackageFlightRequest">
        <wsdl:part name="pvr" element="pws:PackageFlightRequest"/>
    </wsdl:message>
    <wsdl:message name="GetPackageFlightResponse">
        <wsdl:part name="pvr" element="pws:PackageFlightResponse"/>
    </wsdl:message>
    <wsdl:message name="GetPackageFlightAlternativesRequest">
        <wsdl:part name="pfar" element="pws:PackageFlightAlternativesRequest"/>
    </wsdl:message>
    <wsdl:message name="GetPackageFlightAlternativesResponse">
        <wsdl:part name="pfar" element="pws:PackageFlightAlternativesResponse"/>
    </wsdl:message>
    <wsdl:message name="GetCheckStatusRequest">
        <wsdl:part name="csr" element="pws:CheckStatusRequest"/>
    </wsdl:message>
    <wsdl:message name="GetCheckStatusResponse">
        <wsdl:part name="csr" element="pws:CheckStatusResponse"/>
    </wsdl:message>
    <wsdl:message name="GetFormDataRequest">
        <wsdl:part name="fdr" element="pws:FormDataRequest"/>
    </wsdl:message>
    <wsdl:message name="GetFormDataResponse">
        <wsdl:part name="fdr" element="pws:FormDataResponse"/>
    </wsdl:message>
    <wsdl:message name="GetHelpRequest">
        <wsdl:part name="help" element="pws:HelpRequest"/>
    </wsdl:message>
    <wsdl:message name="GetHelpResponse">
        <wsdl:part name="help" element="pws:HelpResponse"/>
    </wsdl:message>
    <wsdl:message name="GetInfoRequest">
        <wsdl:part name="info" element="pws:InfoRequest"/>
    </wsdl:message>
    <wsdl:message name="GetInfoResponse">
        <wsdl:part name="info" element="pws:InfoResponse"/>
    </wsdl:message>
    <wsdl:portType name="PHubPortType">
        <wsdl:operation name="GetFlightGroup">
            <wsdl:input message="pws:GetFlightGroupRequest"/>
            <wsdl:output message="pws:GetFlightGroupResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetFlightProduct">
            <wsdl:input message="pws:GetFlightProductRequest"/>
            <wsdl:output message="pws:GetFlightProductResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetFlightOffer">
            <wsdl:input message="pws:GetFlightOfferRequest"/>
            <wsdl:output message="pws:GetFlightOfferResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetFlightVariant">
            <wsdl:input message="pws:GetFlightVariantRequest"/>
            <wsdl:output message="pws:GetFlightVariantResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetFlightMatrix">
            <wsdl:input message="pws:GetFlightMatrixRequest"/>
            <wsdl:output message="pws:GetFlightMatrixResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetHotelGroup">
            <wsdl:input message="pws:GetHotelGroupRequest"/>
            <wsdl:output message="pws:GetHotelGroupResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetHotelProduct">
            <wsdl:input message="pws:GetHotelProductRequest"/>
            <wsdl:output message="pws:GetHotelProductResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetHotelOffer">
            <wsdl:input message="pws:GetHotelOfferRequest"/>
            <wsdl:output message="pws:GetHotelOfferResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetHotelVariant">
            <wsdl:input message="pws:GetHotelVariantRequest"/>
            <wsdl:output message="pws:GetHotelVariantResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetHotelMatrix">
            <wsdl:input message="pws:GetHotelMatrixRequest"/>
            <wsdl:output message="pws:GetHotelMatrixResponse"/>
        </wsdl:operation>
        <!--
        <wsdl:operation name="GetHotelAllotment">
            <wsdl:input message="pws:GetHotelAllotmentRequest" />
            <wsdl:output message="pws:GetHotelAllotmentResponse" />
        </wsdl:operation>
        -->
        <wsdl:operation name="GetPackageGroup">
            <wsdl:input message="pws:GetPackageGroupRequest"/>
            <wsdl:output message="pws:GetPackageGroupResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetPackageProduct">
            <wsdl:input message="pws:GetPackageProductRequest"/>
            <wsdl:output message="pws:GetPackageProductResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetPackageOffer">
            <wsdl:input message="pws:GetPackageOfferRequest"/>
            <wsdl:output message="pws:GetPackageOfferResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetPackageVariant">
            <wsdl:input message="pws:GetPackageVariantRequest"/>
            <wsdl:output message="pws:GetPackageVariantResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetPackageMatrix">
            <wsdl:input message="pws:GetPackageMatrixRequest"/>
            <wsdl:output message="pws:GetPackageMatrixResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetPackageFlight">
            <wsdl:input message="pws:GetPackageFlightRequest"/>
            <wsdl:output message="pws:GetPackageFlightResponse"/>
        </wsdl:operation>
        <!--
        <wsdl:operation name="GetPackageAllotment">
            <wsdl:input message="pws:GetPackageAllotmentRequest" />
            <wsdl:output message="pws:GetPackageAllotmentResponse" />
        </wsdl:operation>
        -->
        <wsdl:operation name="GetPackageFlightAlternatives">
            <wsdl:input message="pws:GetPackageFlightAlternativesRequest"/>
            <wsdl:output message="pws:GetPackageFlightAlternativesResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetCheckStatus">
            <wsdl:input message="pws:GetCheckStatusRequest"/>
            <wsdl:output message="pws:GetCheckStatusResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetFormData">
            <wsdl:input message="pws:GetFormDataRequest"/>
            <wsdl:output message="pws:GetFormDataResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetHelp">
            <wsdl:input message="pws:GetHelpRequest"/>
            <wsdl:output message="pws:GetHelpResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetInfo">
            <wsdl:input message="pws:GetInfoRequest"/>
            <wsdl:output message="pws:GetInfoResponse"/>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="PHubBinding" type="pws:PHubPortType">
        <wsdlsoap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <!--
        <wsdlsoap12:binding style="document"
                            transport="http://www.w3.org/2003/05/soap/bindings/HTTP/" />
     -->
        <wsdl:operation name="GetFlightGroup">
            <wsdlsoap12:operation soapAction="urn:getFlightGroup"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetFlightProduct">
            <wsdlsoap12:operation soapAction="urn:getFlightProduct"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetFlightOffer">
            <wsdlsoap12:operation soapAction="urn:getFlightOffer"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetFlightVariant">
            <wsdlsoap12:operation soapAction="urn:getFlightVariant"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetFlightMatrix">
            <wsdlsoap12:operation soapAction="urn:getFlightMatrix"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetHotelGroup">
            <wsdlsoap12:operation soapAction="urn:getHotelGroup"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetHotelProduct">
            <wsdlsoap12:operation soapAction="urn:getHotelProduct"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetHotelOffer">
            <wsdlsoap12:operation soapAction="urn:getHotelOffer"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetHotelVariant">
            <wsdlsoap12:operation soapAction="urn:getHotelVariant"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetHotelMatrix">
            <wsdlsoap12:operation soapAction="urn:getHotelMatrix"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <!--
        <wsdl:operation name="GetHotelAllotment">
            <wsdlsoap12:operation soapAction="urn:getHotelAllotment" />
            <wsdl:input>
                <wsdlsoap12:body use="literal" />
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
        -->
        <wsdl:operation name="GetPackageGroup">
            <wsdlsoap12:operation soapAction="urn:getPackageGroup"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetPackageProduct">
            <wsdlsoap12:operation soapAction="urn:getPackageProduct"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetPackageOffer">
            <wsdlsoap12:operation soapAction="urn:getPackageOffer"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetPackageVariant">
            <wsdlsoap12:operation soapAction="urn:getPackageVariant"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetPackageMatrix">
            <wsdlsoap12:operation soapAction="urn:getPackageMatrix"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetPackageFlight">
            <wsdlsoap12:operation soapAction="urn:getPackageFlight"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <!--
        <wsdl:operation name="GetPackageAllotment">
            <wsdlsoap12:operation soapAction="urn:getPackageAllotment" />
            <wsdl:input>
                <wsdlsoap12:body use="literal" />
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
        -->
        <wsdl:operation name="GetPackageFlightAlternatives">
            <wsdlsoap12:operation soapAction="urn:getPackageFlightAlternatives"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetCheckStatus">
            <wsdlsoap12:operation soapAction="urn:getCheckStatus"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetFormData">
            <wsdlsoap12:operation soapAction="urn:getFormData"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetHelp">
            <wsdlsoap12:operation soapAction="urn:getHelp"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetInfo">
            <wsdlsoap12:operation soapAction="urn:getInfo"/>
            <wsdl:input>
                <wsdlsoap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="PHubService">
        <wsdl:port name="PHubPort" binding="pws:PHubBinding">
            <wsdlsoap12:address location="http://213.144.19.50:80/pwsLMR/2010/03/"/>
        </wsdl:port>
    </wsdl:service>
    <!--
    <wsdl:message name="GetHotelAllotmentRequest">
        <wsdl:part name="har" element="pws:HotelAllotmentRequest" />
    </wsdl:message>
    <wsdl:message name="GetHotelAllotmentResponse">
        <wsdl:part name="har" element="pws:HotelAllotmentResponse" />
    </wsdl:message>
-->
    <!--
    <wsdl:message name="GetPackageAllotmentRequest">
        <wsdl:part name="par" element="pws:PackageAllotmentRequest" />
    </wsdl:message>
    <wsdl:message name="GetPackageAllotmentResponse">
        <wsdl:part name="par" element="pws:PackageAllotmentResponse" />
    </wsdl:message>
-->
</wsdl:definitions> 
```

# vb.net - ThreadState 始终为“未启动”

> ID：13993483
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:12:36.813
> 
> 标签：vb.net, multithreading, visual-studio, visual-studio-2012, thread-state

当我启动一个线程时，即使我执行“Thread.Abort()”，ThreadState 始终为“未启动”，我的线程启动并完成工作良好......我不知道为什么我总是得到相同的状态.

```
Dim thread_1 As System.Threading.Thread = New Threading.Thread(AddressOf mithread)
thread_1.Start()

System.Threading.Thread.Sleep(100)

While not thread_1.ThreadState = Threading.ThreadState.Running
    MsgBox(thread_1.ThreadState.ToString) ' "Unstarted"
    thread_1.Abort()
    MsgBox(thread_1.ThreadState.ToString) ' "Unstarted" again and again...
End While 
```

> 更新

这是调用线程的子，问题是“while”状态没有等待，

PS：你可以在这个子的中间看到一个评论解释：

```
 public sub...
        ...
        If Not playerargs = Nothing Then
            If randomize.Checked = True Then
                Dim thread_1 As System.Threading.Thread = New Threading.Thread(AddressOf mithread)
                thread_1.Start()

                System.Threading.Thread.Sleep(50)
                While thread_1.ThreadState = Threading.ThreadState.Running
                    Windows.Forms.Application.DoEvents()
                End While

            Else
                progresslabel.Text = "All files added..."
            End If

            ' HERE IS THE PROBLEM, IF I CHECK "AUTOCLOSE" CHECKBOX THEN,
            ' THE FORM ALWAYS TRY TO CLOSE BEFORE THREAD IS COMPLETED:
            ' -----------------------------------------
            If autoclose.Checked = True Then Me.Close()
            '------------------------------------------
        Else
        ...
 End Sub 
```

这是“mithread”线程：

```
Public Sub mithread()

Dim Str As String
Dim Pattern As String = ControlChars.Quote
Dim ArgsArray() As String
Str = Replace(playerargs, " " & ControlChars.Quote, "")
ArgsArray = Split(Str, Pattern)
Using objWriter As New System.IO.StreamWriter(Temp_file, False, System.Text.Encoding.UTF8)
    Dim n As Integer = 0
    Dim count As Integer = 0
    Dim foldercount As Integer = -1

    For Each folder In ArgsArray
        foldercount += 1
        If foldercount > 1 Then
            InvokeControl(ProgBarPlus1, Sub(x) x.Max = foldercount)
        End If
    Next

    If foldercount = 1 Then
        For Each folder In ArgsArray
            If Not folder = Nothing Then
                Dim di As New IO.DirectoryInfo(folder)
                Dim files As IO.FileInfo() = di.GetFiles("*")
                Dim file As IO.FileInfo
                InvokeControl(ProgBarPlus1, Sub(x) x.Max = files.Count)
                For Each file In files
                    n += 1
                    CheckPrimeNumber(n)
                    count += 1
                    If file.Extension.ToLower = ".lnk" Then
                        Dim ShotcutTarget As String = Shortcut.ResolveShortcut((file.FullName).ToString())
                        objWriter.Write(ShotcutTarget & vbCrLf)
                    Else
                        objWriter.Write(file.FullName & vbCrLf)
                    End If
                Next
            End If
        Next
    ElseIf foldercount > 1 Then
        For Each folder In ArgsArray
            If Not folder = Nothing Then
                Dim di As New IO.DirectoryInfo(folder)
                Dim files As IO.FileInfo() = di.GetFiles("*")
                Dim file As IO.FileInfo
                InvokeControl(ProgBarPlus1, Sub(x) x.Value += 1)
                For Each file In files
                    If file.Extension.ToLower = ".lnk" Then
                        Dim ShotcutTarget As String = Shortcut.ResolveShortcut((file.FullName).ToString())
                        objWriter.Write(ShotcutTarget & vbCrLf)
                    Else
                        objWriter.Write(file.FullName & vbCrLf)
                    End If
                Next
            End If
        Next
    End If
End Using

If Not thread_1.ThreadState = Threading.ThreadState.AbortRequested Then
    MsgBox(thread_1.ThreadState.ToString)
    Randomize_a_file.RandomizeFile(Temp_file)
    InvokeControl(ProgBarPlus1, Sub(x) x.Value = 0)
    '  Process.Start(userSelectedPlayerFilePath, ControlChars.Quote & Temp_file.ToString() & ControlChars.Quote)
    InvokeControl(progresslabel, Sub(x) x.Text = "All files launched...")
End If 
```

结束子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:51:37.593

听起来 mithread 中发生了一些事情，阻止了线程完全启动。我用 mithread 的空子运行了类似的代码，我得到了预期的线程状态（停止然后中止）。

```
 Sub Main()

    Dim thread_1 As System.Threading.Thread = New Threading.Thread(AddressOf mithread)
    thread_1.Start()

    System.Threading.Thread.Sleep(100)

    While Not thread_1.ThreadState = Threading.ThreadState.Running
        Console.WriteLine(thread_1.ThreadState.ToString)
        thread_1.Abort()
        Console.WriteLine(thread_1.ThreadState.ToString)
        If thread_1.ThreadState = Threading.ThreadState.Aborted Then Exit While
    End While

End Sub

Sub mithread()
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:08:04.533

解决您的问题并不容易，但我可以肯定地说，While Loop 和 DoEvents 根本不是前进的方向。

而是在线程完成所有工作时引发事件，订阅事件，并在引发事件时关闭表单（如果 autoclose = true）：

```
Public Class Form1
Public Event threadCompleted()
Public Sub New()
    InitializeComponent()
    AddHandler threadCompleted, AddressOf Me.Thread_Completed
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim t1 As New Threading.Thread(AddressOf mithread)
    t1.Start()
End Sub

Public Sub mithread()
    'simulate some work:
    Threading.Thread.Sleep(3000)
    'then raise the event when done
    RaiseEvent threadCompleted()
End Sub

Public Delegate Sub Thread_CompletedDelegate()
Private Sub Thread_Completed()
    If Me.InvokeRequired Then
        Me.BeginInvoke(New Thread_CompletedDelegate(AddressOf Thread_Completed))
    Else
        If autoclose.Checked = True Then
            Me.Close()
        End If
    End If
End Sub
End Class 
```

或者使用完成所有这些工作的后台工作人员，并为您处理所有报告进度和取消。

# c# - 将位数组复制到较大的位数组中（右对齐）

> ID：13993484
> 
> 赞同：2
> 
> 时间：2012-12-21T16:12:39.373
> 
> 标签：c#, vb.net, clone, bitarray

我必须创建一个新`bitarray`的更大的现有元素（在开头多了一个元素）并将其复制到*新* `bitarray`的.

到目前为止我已经这样做了，但看起来很丑：

```
BitArray New_Ft = new BitArray(Ft.Length + 1);
for (int i = 0; i <= Ft.Length - 1; i++) {
    New_Ft(i + 1) = Ft(i);
} 
```

有没有更聪明的方法（一些全球副本左右）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:17:05.697

也许您需要创建一个临时数组。没必要`Byte[]`可以是`int[]`or `Bool[]`。

```
 Byte[] bits = new Byte[Ft.Length + 1];
        Ft.CopyTo(bits, 0);
        BitArray New_Ft = new BitArray(bits); 
```

# python - 使用 Python 编辑 XML 标头

> ID：13993492
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:13:24.380
> 
> 标签：python, xml

我编写了一个 Python 脚本来创建一些 XML，但我没有找到在 Python 中编辑标题的方法。

基本上，而不是将其作为我的标题：

```
<?xml version="1.0" ?> 
```

我需要这个：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?> 
```

我尽我所能对此进行了调查，但发现无法从 Python 中添加独立状态。所以我想我必须在创建文件后检查文件，然后替换文本。我在几个地方读到了我应该远离使用 readlines() 的地方，因为它可能会破坏 XML 格式。

目前，我必须执行此操作的代码（我从另一篇关于使用 Python 编辑 XML 的 Stackoverflow 帖子中获得）是：

```
doc = parse('file.xml')
elem = doc.find('xml version="1.0"')
elem.text = 'xml version="1.0" encoding="UTF-8" standalone="no"' 
```

这为我提供了一个 KeyError。我尝试调试它无济于事，这让我相信也许 XML 标题不应该以这种方式进行编辑。或者我的代码是错误的。

如果有人好奇（或者奇迹般地知道如何将独立状态插入 Python 代码），这是我编写 xml 文件的代码：

```
with open('file.xml', 'w') as f:
    f.write(doc.toprettyxml(indent='                ')) 
```

有些人不喜欢“toprettyxml”，但以我相对基础的水平，这似乎是最好的选择。

无论如何，如果有人可以提供一些建议或见解，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:45:24.173

`xml.etree`API 没有为您提供在 XML 声明中写出`standalone`属性的任何选项。

您可能想改用该[`lxml`库](http://lxml.de/api/index.html)；它使用相同的 ElementTree API，但提供了对输出的更多控制。[`tostring()`](http://lxml.de/api/lxml.etree-module.html#tostring)支持一个`standalone`标志：

```
from lxml import etree

etree.tostring(doc, pretty_print=True, standalone=False) 
```

或 use [`.write()`](http://lxml.de/api/lxml.etree._ElementTree-class.html#write)，它支持相同的选项：

```
doc.write(outputfile, pretty_print=True, standalone=False) 
```

# javascript - 自定义 HTML 选择菜单

> ID：13993494
> 
> 赞同：0
> 
> 时间：2012-12-21T16:13:32.323
> 
> 标签：javascript, jquery, css

因此，如您所知，如果您有选择，它会拉伸容器以容纳最长的长度选项。

我有一个 truncate 函数，它基本上是一个 substr，长度为 20，在末尾添加句点，这样它就不会拉伸它。

我已经搜索过，但要么我搜索不正确，要么它不存在，但我希望能够单击选择，它会在页面上显示整个选项，而不是推动周围的元素。可以说是固定的位置，除了不是因为我不希望页面在选择中滚动。

任何人都知道任何插件或任何这样做的东西？

例子

这是一个真正...

这样做是为了它不会拉伸它所在的整个 TD 元素。现在，当我单击选择以查看选择时，我希望它实际显示

这是一个很长的句子，被截断了。

但是我不希望它在显示时推动 TD 单元格的宽度，因此隐藏/显示不同的选择菜单将不起作用，因为这会推动宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:26:17.343

最简单的方法是将 转换`<select>`为[bootstrap dropdown](http://blog.iamjamoy.com/docs/select.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:19:37.060

我不确定这是否是一个愚蠢的答案。但是你试过`position:absolute;`吗？CSS 做了一些很棒的技巧。

此外，句尾的句号可以用 css 来完成，使用`white-space: nowrap; text-overflow: ellipsis; overflow: hidden`.

# javascript - 内容正在通过 ajax 成功加载。但不显示

> ID：13993497
> 
> 赞同：0
> 
> 时间：2012-12-21T16:13:41.667
> 
> 标签：javascript, jquery, ajax, html, html5-history

当我单击锚标记时，我正在玩[djax](https://github.com/beezee/djax)，url 发生了变化，当我查看页面源时，它也发生了变化，但是页面本身并没有改变它的内容，即使我查看了页面源它已经改变了任何想法，为什么？

这是标记的片段

```
<body>

    <div id="resultContent" class='updatable'></div>
    <ul>
        <li><a id="thankyou" href="views/thankyou.jsp?menuId=2"
            targets="resultContent">Thank You Message</a></li>
    </ul>
</body> 
```

当我单击 url 更改但结果未显示但当我查看页面源时它显示正确的标记（或者我应该说thankyou.jsp 的标记）

这是js代码的代码

```
jQuery(document).ready(function($) {
    $('body').djax('.updatable');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T18:28:56.823

我遇到了与您完全相同的问题，并在寻找答案时发现了您的问题。对您来说可能为时已晚，但根据您的标记，我相信您遇到了与我相同的问题，这实际上在插件 Github 站点的问题列表中（至少现在是这样）。

您需要将可更新的 div 放在包装 div 中。出于某种原因，交换内容似乎不适用于 body 的直接子代。见[https://github.com/beezee/djax/issues/22](https://github.com/beezee/djax/issues/22)

所以你的 HTML 应该是这样的

```
<body>
    <div id="djaxWrap>
        <div id="resultContent" class='updatable'></div>
        <ul>
            <li><a id="thankyou" href="views/thankyou.jsp?menuId=2"
        targets="resultContent">Thank You Message</a></li>
        </ul>
    </div>
</body> 
```

虽然 jQuery 保持不变

```
jQuery(document).ready(function($) {
    $('body').djax('.updatable');
}); 
```

# java - 好奇这是否可以通过正则表达式替换

> ID：13993499
> 
> 赞同：2
> 
> 时间：2012-12-21T16:13:48.890
> 
> 标签：java, regex

我正在尝试找出与 Java`String.replaceAll()`函数一起使用的正则表达式模式。我需要替换所有`%26`但我不希望它拿起任何其他带有**“26”**前缀的数字。

例如我想要：

```
"abc%26def".replaceAll(regex, "&") to return "abc&def" 
```

- 和 -

```
"abc%2623def".replaceAll(regex, "&") to return "abc%2623def"  (no change) 
```

我知道我可以轻松地多写几行代码来完成这项任务，但我想知道是否可以只用一个 replaceAll 来完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:16:04.287

您可以使用[**否定前瞻断言**](http://www.regular-expressions.info/lookaround.html)来防止匹配 where`%26`后跟另一个数字（您需要`\`在 Java 中转义，所以它会是`\\d`）：

```
%26(?!\d) 
```

*   正则表达式演示：[http ://www.rubular.com/r/J07zojxabd](http://www.rubular.com/r/J07zojxabd)
*   Java 演示：http: [//ideone.com/luCmFN](http://ideone.com/luCmFN)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:16:38.143

您可以使用负前瞻来实现这一点。从[手册](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)：

```
(?!X)   X, via zero-width negative lookahead 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:20:09.153

您似乎正在对百分比编码的八位位组进行解码，在这种情况下您可能需要查看`URLDecoder.decode`：

```
System.out.println(URLDecoder.decode("abc%26def", "UTF-8") 
```

这可能会或可能不会满足您的目的，因为它也可以转化`+`为空间。

# wpf - 用于内容/内容模板的可重用容器的控件？

> ID：13993503
> 
> 赞同：3
> 
> 时间：2012-12-21T16:14:04.070
> 
> 标签：wpf, controltemplate

我正在创建一个容器，其样式将在整个应用程序中使用。它本质上是一个“弹出窗口”，但不会在新窗口中生成。我的应用程序的一般结构是一个 NavigationWindow 和许多页面。所以我开始使用在我的资源字典中定义的以下模板：

```
<ControlTemplate x:Key="RainbowModalTemplate" TargetType="{x:Type Control}">        
    <Canvas Height="540" Canvas.Left="492" Canvas.Top="296" Width="945">        
        <Border x:Name="Modal" Height="540" Width="945"  Background="#ec2016" BorderBrush="White" BorderThickness="2" CornerRadius="15" Style="{DynamicResource RainbowModalBox}">
            <Border.Clip>
                <RectangleGeometry RadiusX="15" RadiusY="15" Rect="0,0,945,540"/>                   
            </Border.Clip>
                <Image Source="Resources/RainbowModal/rainbow.png" Height="247" Width="947" Margin="0,0,0,0" VerticalAlignment="Bottom" d:LayoutOverrides="Height" Stretch="UniformToFill" Canvas.Left="-2" Canvas.Top="293" ClipToBounds="True" />         
        </Border>               
    </Canvas>
</ControlTemplate> 
```

所以当我想“使用”这个时，我希望能够实现这个控件，但在里面提供我自己的内容，（按钮、文本等）。但是，因为我是 WPF 的新手，所以我不确定要使用什么控件，以及将其布局为什么结构。下面是该对象的示例“消费者”。有人会单击应用程序中的一个按钮，这会将这个对象的可见性设置为 Visible ：

```
<Control x:Name="RequestMoreInfoModal" Template="{DynamicResource RainbowModalTemplate}" Canvas.Left="494" Canvas.Top="250" Visibility="Collapsed"></Control> 
```

我知道这可能不是最干净的方式，所以我愿意接受建议。我的具体担忧：

我知道“控制”不是正确的类型。但我不知道什么是合适的，而且 Canvas 和其他控件似乎不允许模板化。我应该使用什么控件？

如何实现此模板并允许消费者在模板中定义自己的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:20:38.507

我最终做的是使用 ControlTemplate 和 ContentPresenter。

这是我的 ResourceDictionary 中可重用内容的定义：

```
<ControlTemplate x:Key="RainbowModal" TargetType="ContentControl">
    <Canvas>
        <Border x:Name="Modal" Height="540" Width="945"  Background="#ec2016" BorderBrush="White" CornerRadius="15" BorderThickness="2" Style="{DynamicResource RainbowModalBox}">
            <Border.Clip>
                <RectangleGeometry  
                        RadiusX="{Binding CornerRadius.TopLeft, RelativeSource={RelativeSource AncestorType={x:Type Border}}}"
                        RadiusY="{Binding RadiusX, RelativeSource={RelativeSource Self}}" 
                        Rect="0,0,945,540"/>
            </Border.Clip>
            <Canvas>                    
                <Image Source="Resources/RainbowModal/rainbow.png" Height="247" Width="947" Margin="0,0,0,0" VerticalAlignment="Bottom" Stretch="UniformToFill" Canvas.Left="-2" Canvas.Top="293" ClipToBounds="True" />
                <ContentPresenter/>
            </Canvas>
        </Border>
    </Canvas>
</ControlTemplate> 
```

这是该内容的“消费”。

```
<ContentControl x:Name="RequestMoreInfoModal" Canvas.Left="489" Canvas.Top="122" Template="{StaticResource RainbowModal}" Visibility="Collapsed">
    <Canvas>
        <TextBlock FontSize="78" Foreground="White" Width="903" Canvas.Top="28" Canvas.Left="20" Height="298" Text="Scan your card to receive an email with more information." TextWrapping="Wrap" FontFamily="Serif72 Beta" TextAlignment="Center" />
        <Button Width="250" Height="76" Content="CLOSE" Margin="350,350" Style="{DynamicResource PurpleInfoButton}" FontSize="28" Click="Button_Click_1" ></Button>
     </Canvas>
</ContentControl> 
```

# php - 复杂的 foreach 示例

> ID：13993511
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:14:39.903
> 
> 标签：php, arrays, foreach

`Index.php`由 的数据构建而成`domains.php`。如何`domains.php`使用函数动态创建这些表和选项`foreach`？

**域名.php**

```
<?php

$price=array(

  "cz"=>    "20",
  "com"=>   "10",
  "net"=>   "8",
  "org"=>   "8",
  "info"=>  "8",
  "biz"=>   "8",
  "name"=>  "25",
  "mobi"=>  "25"

);

$renamed=array(

  "cz"=>    "Czech Republic",
  "com"=>   "international",
  "mobi"=>  "mobile"

);

?> 
```

**索引.php**

```
<?php include("domains.php"); ?>      

<div id="prices">
  <table class="table">
    <tr><td>.cz</td><td>20$</td></tr> 
    <tr><td>.com</td><td>10$</td></tr> 
    <tr><td>.net</td><td>8$</td></tr> 
  </table>
  <table class="table">
    <tr><td>.info</td><td>8$</td></tr> 
    <tr><td>.biz</td><td>8$</td></tr> 
    <tr><td>.name</td><td>25$</td></tr> 
  </table>
  <table class="table">
    <tr><td>.mobi</td><td>25$</td></tr> 
    <tr><td></td><td></td></tr> 
    <tr><td></td><td></td></tr> 
  </table>
</div>    

<select id="zone">
  <option value="cz">Czech Republic</option>
  <option value="com">international</option>
  <option value="net">.net</option>
  <option value="org">.org</option>
  <option value="info">.info</option>
  <option value="biz">.biz</option>
  <option value="name">.name</option>
  <option value="mobi">mobile</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:25:25.947

这应该给你一个开始。[如需更多信息，请参阅 php.net](http://php.net/manual/en/)上的大量文档。当您只需要每张表三行时，您必须使用一些行计数器。

```
$row = 0;
foreach($price as $tld => $money) {
    if ($row == 0)
        echo "<table>\n";

    echo "<tr><td>$tld</td><td>$money</td></tr>\n";

    // close the table after three rows
    $row++;
    if ($row >= 3) {
        echo "</table>\n";
        $row = 0;
    }
}

// close the final table, if needed
if ($row > 0)
    echo "</table>\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:25:41.453

这将完成这项工作：

```
<div id="prices">
  <table class="table">
  <?php
  // Iterate through the list of domains and prices and print a row for each.
  foreach($price as $domain => $price) {
     print '<tr><td>.'.$domain.'</td><td>'.$price.'$</td></tr> '; 
  }
  ?>
  </table>
</div>

<select id="zone">
  <?php
  // Iterate through the list of domains and use the value of $renamed if exists.
  foreach(array_keys($price) as $domain) {
     print '<option value="'.$domain.'">'.isset($renamed[$domain]) ? $renamed[$domain] : $domain.'</option>'; 
  }
  ?>
</select> 
```

# python - 在python中发送/接收文件UDP

> ID：13993514
> 
> 赞同：2
> 
> 时间：2012-12-21T16:14:46.580
> 
> 标签：python, sockets, udp, file-transfer, sender

我已经制作了这个发送/接收脚本，但我损坏了文件！我不知道为什么我会遇到这个问题！

发件人.py

```
#!/usr/bin/env python

from socket import *
import sys

s = socket(AF_INET,SOCK_DGRAM)
host =sys.argv[1]
port = 9999
buf =1024
addr = (host,port)

file_name=sys.argv[2]

f=open(file_name,"rb") 
data = f.read(buf)

s.sendto(file_name,addr)
s.sendto(data,addr)
while (data):
    if(s.sendto(data,addr)):
        print "sending ..."
        data = f.read(buf)
s.close()
f.close() 
```

接收器.py

```
#!/usr/bin/env python

from socket import *
import sys
import select

host="0.0.0.0"
port = 9999
s = socket(AF_INET,SOCK_DGRAM)
s.bind((host,port))

addr = (host,port)
buf=1024

data,addr = s.recvfrom(buf)
print "Received File:",data.strip()
f = open(data.strip(),'wb')

data,addr = s.recvfrom(buf)
try:
    while(data):
        f.write(data)
        s.settimeout(2)
        data,addr = s.recvfrom(buf)
except timeout:
    f.close()
    s.close()
    print "File Downloaded" 
```

这是我修改过的原始接收器（工作正常 100%）

```
#!/usr/bin/env python

from socket import *
import sys
import select

host="0.0.0.0"
port = 9999
s = socket(AF_INET,SOCK_DGRAM)
s.bind((host,port))

addr = (host,port)
buf=1024

f = open("file.pdf",'wb')

data,addr = s.recvfrom(buf)
try:
    while(data):
        f.write(data)
        s.settimeout(2)
        data,addr = s.recvfrom(buf)
except timeout:
    f.close()
    s.close()
    print "File Donwloaded" 
```

正如您所注意到的，它在开始时正在制作文件。

严格：客户端=>发送文件（name.ext）=>服务器：保存它（name.ext）

我的输出：pdf文件损坏，txt文件为空

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:28:54.820

这里有两个问题：

## 语法错误：

您正在使用`from socket import *`. 它本身并不是一个错误，但是当你这样做时它就会变成一个错误`except socket.timeout`。

## 使用[UDP](https://en.wikipedia.org/wiki/User_Datagram_Protocol)：

使用 UDP，**腐败应该不足为奇**。您可能不想在这里使用 UDP，您应该切换到 TCP。

这就是为什么 UDP 在这里不合适的原因：

*   数据包可能会丢失，但其他数据包仍然可以到达目的地。
*   数据包可能重复
*   数据包可能以错误的顺序到达

请注意，切换到 TCP 将涉及对您的代码进行一些重构（这比用 替换要复杂一些`SOCK_DGRAM`）`SOCK_STREAM`，但在您的情况下，您**必须这样做**。

* * *

我并不是说 UDP 不好，但它不适合你的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T17:19:34.273

您的代码的问题：

*   当通过套接字发送数据时，通常下层会将来自多个 sendTo 调用的数据合并并一起发送以减少网络负载。
*   您将文件的前 1024 个字节发送两次。

你应该做什么：

使用某种具有几个字符的分隔符字符串（例如“**_$$”），这样它就不会存在于实际的文件二进制表示中。然后将此分隔符附加到文件名的末尾。

在开始 while 循环之前再次从文件中读取。

在接收端，将所有内容接收到单个流中，然后使用分隔符拆分。您将拥有文件名和文件数据。

**更新：**

***工作代码（Ubuntu / Windows XP）***

```
# ----- sender.py ------

#!/usr/bin/env python

from socket import *
import sys

s = socket(AF_INET,SOCK_DGRAM)
host =sys.argv[1]
port = 9999
buf =1024
addr = (host,port)

file_name=sys.argv[2]

s.sendto(file_name,addr)

f=open(file_name,"rb")
data = f.read(buf)
while (data):
    if(s.sendto(data,addr)):
        print "sending ..."
        data = f.read(buf)
s.close()
f.close() 
```

* * *

```
# ----- receiver.py -----

#!/usr/bin/env python

from socket import *
import sys
import select

host="0.0.0.0"
port = 9999
s = socket(AF_INET,SOCK_DGRAM)
s.bind((host,port))

addr = (host,port)
buf=1024

data,addr = s.recvfrom(buf)
print "Received File:",data.strip()
f = open(data.strip(),'wb')

data,addr = s.recvfrom(buf)
try:
    while(data):
        f.write(data)
        s.settimeout(2)
        data,addr = s.recvfrom(buf)
except timeout:
    f.close()
    s.close()
    print "File Downloaded" 
```

***用法***

```
>> python recevier.py 
```

* * *

```
>> python sender.py localhost filename.txt 
```

# r - ggplot2：使图例中的符号匹配图中的符号

> ID：13993519
> 
> 赞同：4
> 
> 时间：2012-12-21T16:14:57.173
> 
> 标签：r, ggplot2, legend

我正在尝试绘制一个大多数数据点正常绘制的图，但一组数据点的符号大小不同。我希望图例显示相同：大多数点正常显示，但用不同大小的符号绘制的例外。这是一小段代码：

```
library(ggplot2)
x = c(1,2,1,2,3)
y = c(1,2,3,4,3)
vendor = c("x", "x", "y", "y", "z")
df = data.frame(x,y,vendor)

p <- ggplot(df) +
     aes_string(x="x", y="y", color="vendor") +
     geom_point(size=3, data=subset(df, vendor!="z")) +
     geom_point(size=5, data=subset(df, vendor=="z"))
ggsave("foo.pdf") 
```

问题是，在生成的图例中，*所有*点都用较大的 ( `size=5`) 符号绘制，而不仅仅是带有供应商 z 的点。我希望供应商 z 用图例中较大的点绘制，其他的用`size=3`.

（额外的问题：我真正想要的是一个更大的粗轮廓符号：我想要一个甜甜圈而不是一个圆圈。我意识到这`shape=2`会画一个有轮廓的圆圈，但它很薄。我宁愿有一个更厚的轮廓圆圈。我想对三角形做同样的事情。有什么简单的方法吗？）

也许我应用错了，但遵循以下建议：

[ggplot2：更改图例中的符号](https://stackoverflow.com/questions/12751159/ggplot2-making-changes-to-symbols-in-the-legend)

添加“指南”行没有帮助：

```
guides(size = guide_legend(override.aes = list(shape = 1))) 
```

即相同的输出，`size=5`图例中包含所有三个供应商的符号。

编辑：很棒的答案，我很快就实现了。现在我添加了行：

```
library(ggplot2)
x = c(1,2,1,2,3)
y = c(1,2,3,4,3)
vendor = c("x", "x", "y", "y", "z")
df = data.frame(x,y,vendor)

df$vendor_z <- df$vendor=="z"     # create a new column 

ggplot(df) +
  aes_string(x = "x", y = "y", color = "vendor", size = "vendor_z") +
  geom_point() +
  geom_line(size=1.5) +   # this is the only difference
  scale_size_manual(values = c(3, 5), guide = FALSE) 
  guides(colour = guide_legend(override.aes = list(size = c(3, 3, 5))))

ggsave("foo.pdf") 
```

现在所有点的图例大小又回到了 3，包括供应商 z 的点。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T16:51:40.113

大小不适用于图例，因为`size`在外面`aes_string`。此外，`ggplot`如果您创建一个额外的列来指示是否`vendor == "z"`.

这是第 1 部分的解决方案：

```
df$vendor_z <- df$vendor=="z"     # create a new column 

ggplot(df) +
  aes_string(x = "x", y = "y", color = "vendor", size = "vendor_z") +
  geom_point() +
  scale_size_manual(values = c(3, 5), guide = FALSE) + 
  guides(colour = guide_legend(override.aes = list(size = c(3, 3, 5)))) 
```

请注意，这`vendor_z`是作为 的参数`aes_string`。这将告诉`ggplot`为`size`特征创建一个图例。在函数`scale_size_manual`中，设置了 的值`size`。此外，`guide = FALSE`避免了第二个传说`size`。最后，将这些`size`值应用于`color`图例。

![在此处输入图像描述](../Images/d6dcb76a0056bd8445d74b2ed4a07924.png)

Part2：一个“甜甜圈”符号

不能在 中修改圆线的大小`ggplot`。这是一种解决方法：

```
ggplot(df) +
  aes_string(x = "x", y = "y", color = "vendor", size = "vendor_z") +
  geom_point() +
  geom_point(data = df[df$vendor_z, ], aes(x = x, y = y),
             size = 3, shape = 21, fill = "white", show_guide = FALSE) +
  scale_size_manual(values = c(3, 5), guide = FALSE) + 
  guides(colour = guide_legend(override.aes = list(size = c(3, 3, 5)))) 
```

`geom_point`在这里，使用数据的子集 ( )绘制单个点`df[df$vendor_z, ]`。我选择了一个`size`，`3`因为这是较小圆圈的值。`shape` `21`是一个`fill`可以指定颜色的圆圈。最后，`show_guide = FALSE`避免图例特征被新的`shape`.

![在此处输入图像描述](../Images/4f47d718bf66bde0fb890cfd6ac85554.png)

*编辑*：第 3 部分：添加行

`geom_line`你可以用参数压制传说`show_guide = FALSE`：

```
ggplot(df) +
  aes_string(x = "x", y = "y", color = "vendor", size = "vendor_z") +
  geom_point() +
  geom_line(size=1.5, show_guide = FALSE) +   # this is the only difference
  scale_size_manual(values = c(3, 5), guide = FALSE) +
  guides(colour = guide_legend(override.aes = list(size = c(3, 3, 5)))) 
```

![在此处输入图像描述](../Images/5c2d4b1f46ab835d4b577f25f1988521.png)

# r - 使用 geom_bar 在 ggplot2 中求和的问题

> ID：13993520
> 
> 赞同：3
> 
> 时间：2012-12-21T16:14:57.283
> 
> 标签：r, ggplot2

我很难用 R 绘制图表。我希望我的条形图聚合`deal_count`列，但它似乎没有这样做。不太确定我在这里缺少什么。这些`deal_count`值是“整数”。我试图用不同的类对列求和，但没有运气。

也只是运行这个

```
sum(funded.agvc$deal_count) 
```

没有产生适当的总和......

```
ggplot(data=funded.agvc, aes(moved_date,deal_count)) + 
   geom_bar(colour='black', fill="#33CC00", alpha=.5, 
      size=0, width=.7,stat='identity') + xlab("Deal Funded Date") + 
   ylab("Funded Deal Count") + 
   opts(title="Deals funded since January 2011") + 
   facet_grid(grouptype~fundingstage, scales='free_y') + 
   opts(axis.text.x =theme_text(angle=45, size=5)) 
```

这是头

```
head(funded.agvc)
moved_date                   industry  fundingstage deal_count startup_country startup_state                  group_name   grouptype
1    2012-09  MEDICAL_DEVICES_EQUIPMENT       500k-1M          1              CA                      Boston Harbor Angels Angel Group
2    2012-10 BUSINESS_PRODUCTS_SERVICES Product Ready          1              US            MA     Launchpad Venture Group Angel Group
3    2012-07                                  Not Set          1              US                              Golden Seeds Angel Group
5    2012-09                IT_SERVICES Product Ready          1              US            NY          STAR Angel Network Angel Group
6    2012-11                     MOBILE Product Ready          1              US            TX Central Texas Angel Network Angel Group
7    2012-11                                  Not Set          2                                              NEST-TN, LLC Angel Group 
```

和会话信息

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] JavaGD_0.6-1  scales_0.2.3  rJava_0.9-3   ggplot2_0.9.3

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.1        labeling_0.1       MASS_7.3-18        memoise_0.1        munsell_0.3        plyr_1.7.1        
[10] proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1     stringr_0.6.1      tools_2.15.1 
```

和输入

```
structure(list(moved_date = c("2012-09", "2012-10", "2012-07", 
"2012-09", "2012-11", "2012-11"), industry = c("MEDICAL_DEVICES_EQUIPMENT", 
"BUSINESS_PRODUCTS_SERVICES", "", "IT_SERVICES", "MOBILE", ""
), fundingstage = c("500k-1M", "Product Ready", "Not Set", "Product Ready", 
"Product Ready", "Not Set"), deal_count = c(1L, 1L, 1L, 1L, 1L, 
2L), startup_country = c("CA", "US", "US", "US", "US", ""), startup_state = c("", 
"MA", "", "NY", "TX", ""), group_name = c("Boston Harbor Angels", 
"Launchpad Venture Group", "Golden Seeds", "STAR Angel Network", 
"Central Texas Angel Network", "NEST-TN, LLC"), grouptype = c("Angel Group", 
"Angel Group", "Angel Group", "Angel Group", "Angel Group", "Angel Group"
)), .Names = c("moved_date", "industry", "fundingstage", "deal_count", 
"startup_country", "startup_state", "group_name", "grouptype"
), row.names = c(1L, 2L, 3L, 5L, 6L, 7L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:06:30.150

如果我更改`stat='identity'`为，这对我`stat='sum'`有用（情节有点傻，因为我只使用了上面发布的数据的头部）。`opt`我收到有关vs`theme`和`theme_text`vs的警告，`element_text`因为我使用的是更新版本的`ggplot2`...

```
ggplot(data=funded.agvc, aes(moved_date,deal_count)) + 
   geom_bar(colour='black', fill="#33CC00", alpha=.5, 
      size=0, width=.7,stat='sum') + xlab("Deal Funded Date") + 
   ylab("Funded Deal Count") + 
   opts(title="Deals funded since January 2011") + 
   facet_grid(grouptype~fundingstage, scales='free_y') + 
   opts(axis.text.x =theme_text(angle=45, size=5)) 
```

![在此处输入图像描述](../Images/e2451deff9ab84cc733e2f9c84e56010.png)

# c# - String.Format 不起作用

> ID：13993523
> 
> 赞同：0
> 
> 时间：2012-12-21T16:15:12.567
> 
> 标签：c#, .net, string.format

```
public override string ToString()
{
    string token = "something";
    foreach (something item in this)
    {
        something = something + "Some_Point({0},{1}),";
        string.Format(something, item.X, item.Y);
    }
    return something+= "anything";
} 
```

这是`ToString()`自定义集合的重写方法。这里的问题`String.Format`是没有替换 X 和 Y 的值。每当我在之前添加 return 时它都会替换`String.Format`。我刚开始学习 C#，不知道是什么导致了这种奇怪的行为。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T16:16:09.520

`string.Format`返回格式化的字符串，您必须将其分配回您的变量：

```
something = string.Format("Some_Point({0},{1}),", item.X, item.Y); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T16:18:53.437

如果你有很多字符串要附加到一个结果中，你应该使用命名空间中的`StringBuilder`类`System.Text`。这是一个很好的做法，因为`string`对象是不可变的，每次更改某些内容时，都会在堆上创建一个新实例。尝试做这样的事情：

```
using System.Text;

...

public override string ToString()
{
    StringBuilder s = new StringBuilder("something initial if you need");
    foreach (something item in this)
    {
        s.AppendFormat("Some_Point({0},{1}),", item.X, item.Y);
    }
    s.Append("something else");

    return s.ToString();
} 
```

如果您想了解更多关于为什么要避免字符串连接的信息，请查看这篇文章： http: [//msdn.microsoft.com/en-us/library/ms182272 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms182272(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:17:15.597

`string.Format`返回一个字符串，所以：

```
something = string.Format(something, item.X, item.Y); 
```

# python - Pandas 沿多索引和单独索引切片

> ID：13993524
> 
> 赞同：9
> 
> 时间：2012-12-21T16:15:15.097
> 
> 标签：python, pandas

我已经开始将 Pandas 用于一些大型数据集，并且大多数情况下效果都很好。我有一些关于指数的问题

1.  我有一个具有三个级别的 MultiIndex - 比如说 a、b、c。我如何沿着索引 a 切片 - 我只想要 a = 5、7、10、13 的值。执行 df.ix[[5, 7, 10, 13]] 不像文档中指出的那样工作

2.  我需要在 DF 上有不同的索引 - 我可以创建这些多个索引而不将它们与数据框相关联并使用它们给我返回原始 ndarray 索引吗？

3.  我可以将 MultiIndex 单独切片而不是在系列或 Dataframe 中吗？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T16:53:53.567

对于第一部分，您可以使用布尔索引[`get_level_values`](http://pandas.pydata.org/pandas-docs/stable/indexing.html#reconstructing-the-level-labels)：

```
df[df.index.get_level_values('a').isin([5, 7, 10, 13])] 
```

对于后两个，您可以通过调用检查[MultiIndex](http://pandas.pydata.org/pandas-docs/dev/indexing.html#creating-a-multiindex-hierarchical-index-object)对象：

```
df.index 
```

*（这可以检查/切片。）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T22:04:39.677

**编辑：此答案仅适用于低于 0.10.0 的熊猫版本：**

好的@hayden 有一个正确的想法开始：

但是，索引具有`get_level_values()`返回数组的方法（在 pandas 版本 < 0.10.0 中）。`isin()`数组不存在该方法，但这有效：

```
from pandas import lib
lib.ismember(df.index.get_level_values('a'), set([5, 7, 10, 13]) 
```

这只能回答问题 1 - 但如果我破解 2、3，我会给出更新（在@hayden 的帮助下完成了一半）

# c# - Better Search for a string in all files using C#

> ID：13993530
> 
> 赞同：31
> 
> 时间：2012-12-21T16:15:50.657
> 
> 标签：c#, .net, file-io

After referring many blogs and articles, I have reached at the following code for searching for a string in all files inside a folder. It is working fine in my tests.

**QUESTIONS**

1.  Is there a faster approach for this (using C#)?
2.  Is there any scenario that will fail with this code?

Note: I tested with very small files. Also very few number of files.

**CODE**

```
static void Main()
    {
        string sourceFolder = @"C:\Test";
        string searchWord = ".class1";

        List<string> allFiles = new List<string>();
        AddFileNamesToList(sourceFolder, allFiles);
        foreach (string fileName in allFiles)
        {
            string contents = File.ReadAllText(fileName);
            if (contents.Contains(searchWord))
            {
                Console.WriteLine(fileName);
            }
        }

        Console.WriteLine(" ");
        System.Console.ReadKey();
    }

    public static void AddFileNamesToList(string sourceDir, List<string> allFiles)
    {

            string[] fileEntries = Directory.GetFiles(sourceDir);
            foreach (string fileName in fileEntries)
            {
                allFiles.Add(fileName);
            }

            //Recursion    
            string[] subdirectoryEntries = Directory.GetDirectories(sourceDir);
            foreach (string item in subdirectoryEntries)
            {
                // Avoid "reparse points"
                if ((File.GetAttributes(item) & FileAttributes.ReparsePoint) != FileAttributes.ReparsePoint)
                {
                    AddFileNamesToList(item, allFiles);
                }
            }

    } 
```

**REFERENCE**

1.  [Using StreamReader to check if a file contains a string](https://stackoverflow.com/questions/6183809/using-streamreader-to-check-if-there-there-contains-a-string)
2.  [Splitting a String with two criteria](https://stackoverflow.com/questions/13992508/splitting-a-string-with-two-criteria)
3.  [C# detect folder junctions in a path](https://stackoverflow.com/questions/4943630/c-sharp-detect-folder-junctions-in-a-path)
4.  [Detect Symbolic Links, Junction Points, Mount Points and Hard Links](https://stackoverflow.com/questions/2487237/detect-symbolic-links-junction-points-mount-points-and-hard-links)
5.  [FolderBrowserDialog SelectedPath with reparse points](https://stackoverflow.com/questions/12282585/folderbrowserdialog-selectedpath-with-reparse-points)
6.  [C# - High Quality Byte Array Conversion of Images](https://stackoverflow.com/questions/3065186/c-sharp-high-quality-byte-array-conversion-of-images)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-21T16:20:38.547

Instead of File.ReadAllText() better use

```
File.ReadLines(@"C:\file.txt"); 
```

It returns `IEnumerable` (yielded) so you will not have to read the whole file if your string is found before the last line of the text file is reached

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-21T16:36:45.843

I wrote somthing very similar, a couple of changes I would recommend.

1.  Use [Directory.EnumerateDirectories](http://msdn.microsoft.com/en-us/library/dd383304.aspx) instead of GetDirectories, it returns immediately with a IEnumerable so you don't need to wait for it to finish reading all of the directories before processing.
2.  Use [ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx) instead of ReadAllText, this will only load one line in at a time in memory, this will be a big deal if you hit a large file.
3.  If you are using a new enough version of .NET use [Parallel.ForEach](http://msdn.microsoft.com/en-us/library/ee835497%28v=vs.100%29.aspx), this will allow you to search multiple files at once.
4.  You may not be able to open the file, you need to check for read permissions or [add to the manifest](https://stackoverflow.com/questions/6050478/how-do-i-create-edit-a-manifest-file) that your program requires administrative privileges (you should still check though)

I was creating a binary search tool, here is some snippets of what I wrote to give you a hand

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    Parallel.ForEach(Directory.EnumerateFiles(_folder, _filter, SearchOption.AllDirectories), Search);
}

//_array contains the binary pattern I am searching for.
private void Search(string filePath)
{
    if (Contains(filePath, _array))
    {
        //filePath points at a match.
    }
}

private static bool Contains(string path, byte[] search)
{
    //I am doing ReadAllBytes due to the fact that I am doing a binary search not a text search
    //  There are no "Lines" to seperate out on.
    var file = File.ReadAllBytes(path);
    var result = Parallel.For(0, file.Length - search.Length, (i, loopState) =>
        {
            if (file[i] == search[0])
            {
                byte[] localCache = new byte[search.Length];
                Array.Copy(file, i, localCache, 0, search.Length);
                if (Enumerable.SequenceEqual(localCache, search))
                    loopState.Stop();
            }
        });
    return result.IsCompleted == false;
} 
```

This uses two nested parallel loops. This design is terribly inefficient, and could be greatly improved by using the [Booyer-Moore search algorithm](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm) but I could not find a binary implementation and I did not have the time when I wrote it originally to implement it myself.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T16:30:03.837

the main problem here is that you are searching all the files in real time for every search. there is also the possibility of file access conflicts if 2+ users are searching at the same time.

to dramtically improve performance I would index the files ahead of time, and as they are edited/saved. store the indexed using something like [lucene.net](http://blogs.apache.org/lucenenet/) and then query the index (again using [luence.net](http://blogs.apache.org/lucenenet/)) and return the file names to the user. so the user never queries the files directly.

if you follow the links in this [SO Post](https://stackoverflow.com/questions/10855907/how-to-index-files-such-as-txt-pdf-doc-etc-using-lucene-net) you may have a head start on implementing the indexing. I didn't follow the links, but it's worth a look.

Just a heads up, this will be an intense shift from your current approach and will require

1.  a service to monitor/index the files
2.  the UI project

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T16:22:56.690

I think your code will fail with an exception if you lack `permission to open a file`.

Compare it with the code here: [http://bgrep.codeplex.com/releases/view/36186](http://bgrep.codeplex.com/releases/view/36186)

That latter code supports

1.  regular expression search and
2.  filters for file extensions

-- things you should probably consider.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T16:34:47.357

1.  Instead of `Contains` better use algorithm Boyer-Moore search.

2.  Fail scenario: file have not read permission.

# c++ - 将右值引用绑定到 VC++ 中的局部变量

> ID：13993533
> 
> 赞同：0
> 
> 时间：2012-12-21T16:15:57.257
> 
> 标签：c++, visual-c++, rvalue-reference

我正在使用 VC++2012 运行以下代码：

```
#include <utility>

struct A
{
    int* m_p;

    A() { m_p = new int; }
    ~A() { delete m_p;  }

    A(const A& otherA)
    {
        m_p = new int;

        // BOOM!
        *m_p = *otherA.m_p;
    }
};

A&& CreateA()
{
    A a;
    return std::move(a);
}

int _tmain(int argc, _TCHAR* argv[])
{
    A a2 = CreateA();
    return 0;
} 
```

在创建 a2 期间，A 的复制 ctor 被调用 - 并且崩溃，因为在 CreateA() 中创建的源对象已经被销毁。这是标准行为吗？这可能是编译器错误吗？

请注意，如果您将 a2 的类型从“A”更改为“const A&”，则不会发生崩溃——这加强了对它确实是一个错误的怀疑。任何人都可以对此有所了解吗？

注意：我完全知道这不是 rvalue-refs 的预期用途，这个例子是人为的。只是希望能更好地掌握这种新类型的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:18:53.663

[您不能访问其范围之外的局部变量](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)。右值引用不会改变这一点：它们仍然是引用。呈现的代码具有未定义的行为，因为它返回对局部变量的引用，然后访问它。

不要返回右值引用。绝大多数时间都是愚蠢的。而是返回值：

```
A CreateA()
{
    A a;
    return a; // a move here is automatic
              // unless you are using a compiler with outdated rules like MSVC
    //return std::move(a); // ok, poor MSVC
    // alternatively:
    //return A{}; //or 
    //return A();
} 
```

当你`A const& a2 = CreateA();`什么都不写时会崩溃，因为你实际上并没有访问任何对象。你所要做的就是抓住一个悬空的参考。然而，这段代码甚至不是格式正确的，它只是碰巧编译，因为 MSVC 有一些过时的引用绑定规则。

所以，基本上，这些行为是编译器错误和未定义行为的混合 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:31:53.020

看看你的代码发生了什么：

1.  `CreateA()`叫做
2.  在函数内部，创建了一个局部变量类型`A`。
3.  您创建一个指向此局部变量的右值引用
4.  你返回这个右值引用
5.  当您返回时，`A`右值引用指向的 type 对象超出范围并被销毁
6.  引用现在指向一个被破坏的对象
7.  您尝试初始化为*曾经*存在于函数调用`a2`中的对象的副本

 *而且……这行不通。你试图复制的对象已经死了并且消失了。未定义的行为。

不要那样做。:)

在 C++ 中，引用不会影响被引用对象的生命周期。没有“我指着这个物体，所以你不能破坏它！”。

永远不要返回对本地对象的引用。它不起作用，所以......只是不要这样做。*

# ruby-on-rails - 在rails中获取文件的mp3和mp4时间长度

> ID：13993537
> 
> 赞同：3
> 
> 时间：2012-12-21T16:15:59.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, youtube, gem, mp4

我正在使用 Rails 3.2+ 并且想知道是否有一种简单的方法可以找出文件在我的服务器上的时间长度。例如，如果我有一个 mp4 格式的视频文件，我怎么知道视频的长度是 4 分 2 秒长？mp3 或 youtube/vimeo 等外部资源也是如此。如果有一个宝石可以做到这一点，那也很好，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:56:35.867

对于 youtube/vimeo - [https://github.com/thibaudgg/video_info](https://github.com/thibaudgg/video_info)

对于视频 - [https://github.com/streamio/streamio-ffmpeg](https://github.com/streamio/streamio-ffmpeg)

对于 mp3 - [http://robinst.github.com/taglib-ruby/](http://robinst.github.com/taglib-ruby/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:35:58.197

您通常会想要脱壳，使用一些外部程序并解析其输出。有一些库以这种方式工作，请查看[RVideo](http://rvideo.rubyforge.org)或在[https://rubygems.org上](https://rubygems.org)[搜索视频](https://rubygems.org/search?utf8=%E2%9C%93&query=video)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-09T02:15:16.300

在 Rails 6 中，我认为 streamio-ffmpeg 是获取视频和音频时间长度的最佳解决方案： [https ://github.com/streamio/streamio-ffmpeg](https://github.com/streamio/streamio-ffmpeg)

星数：1.5k

**首先，您应该在您的操作系统中安装 ffmpeg。** 然后在您的 Gemfile 中：

```
gem 'streamio-ffmpeg' 
```

然后你可以获得你需要的所有媒体信息：比特率、持续时间、采样率......就像这个 mp3 文件。 [![在 Rails 中获取 mp3 媒体信息](../Images/f026108f34551f0ca4522c89ad9c4d29.png)](https://i.stack.imgur.com/OZsHr.png)

# android - 我可以将 c++ 库包装到适用于移动 IOS/Android 的 Adob e Air 本机扩展吗

> ID：13993551
> 
> 赞同：5
> 
> 时间：2012-12-21T16:16:50.220
> 
> 标签：android, c++, ios, air, adobe

我可以将 C++ 库包装到 Adob​​e Air 原生扩展 IOS/Android 吗？

我有一个由第三方编写的 C++ 库。我想将该库用于移动的 adobe air 本机扩展？我能做到吗。如果是这样，我在哪里可以找到一些指导方针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:05:01.293

我将尝试回答问题的 Android 部分。

我没有看到它在 Adob​​e Air 文档中明确说明这是可能的，但在 Adob​​e Air 的 Adob​​e 帮助文档中，[打包原生扩展部分：构建原生库](http://help.adobe.com/en_US/air/extensions/WSf268776665d7970d-2e74ffb4130044f3619-7fff.html#WSdb11516da818ea8d49ce0fe713341ed67cf-8000)，它说：

> Android 原生库：当您使用 Android NDK 时，提供一个文件名如下的共享库（等）

您可能知道，[NDK](http://developer.android.com/tools/sdk/ndk/overview.html)允许您使用包括 C++ 在内的本机代码语言来实现部分 Android 应用程序。

我认为文档中的这个参考意味着它是可能的。作为起点，我会熟悉 NDK 的细节。

虽然这不是关于如何继续进行的详细指南，但我希望它可以为正确的方向提供指导。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T14:46:37.773

构建 ANE 以包装 C++ 库的另一种方法是使用新的 Adob​​e“C++ 到 Flash”编译器（以前称为 Alchemy）将其编译为 Flash 字节码。它可以生成一个您以后可以从 ActionScript 调用的 swf。这是一个解释如何做到这一点的[教程。](http://www.adobe.com/devnet/games/articles/using-cplusplus-code-path-finding.html)这是它[的](http://gaming.adobe.com/technologies/flascc/)官方网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:34:01.173

对于 iOS，如果您可以统计链接到它，您可以使用 c 库。iOS 上的 ANE 不支持动态链接（从 3.2 开始，不确定新版本中是否有所改变）。静态链接在 Xcode 中是相当简单的过程，只需 google 一下。

对于安卓：

如果你有 .so 文件，你可以用 JAVA 编写你的 ANE 并使用 jni(System.loadLibrary) 与你的 cpp 库对话。它比完全在 CPP 中编写 ANE 要好。请参阅[文档](http://help.adobe.com/en_US/air/extensions/WSf268776665d7970d-2482335412ffea65006-8000.html)“在 ANE 包中包含其他 Android 共享 .so 库”部分以了解更多信息。

# cron - 每天 00h 和 13:30 执行 crontab 两次

> ID：13993556
> 
> 赞同：54
> 
> 时间：2012-12-21T16:17:04.073
> 
> 标签：cron, crontab

我想每天在 00:00 和 13:30 执行两次脚本，所以我写：

```
0,30 0,13 * * * 
```

这对我来说似乎是错误的，因为像这样，脚本将在 00:00 、 00:30 、 13:00 和 13:30 触发。任何的想法 ？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2014-03-05T07:51:52.293

试试这个-： `00 01,13 * * *`

它将在凌晨 1 点和下午 1 点运行

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-12-21T16:19:18.037

您不能在一个条目中做您想做的事情，因为两分钟定义将适用于两个小时定义（如您所确定的）。

解决方案是（不幸的是）使用两个 cron 条目。00:00 一份，13:30 一份。

另一种方法*可能是*在 00:00 执行一个脚本。该脚本将执行您的原始脚本，然后等待 13.5 小时，然后再次执行该脚本。通过一个简单的睡眠命令很容易做到，但我认为这很不*直观*，而且我不确定如何`cron`管理如此长时间运行的进程（如果你编辑会发生什么`crontab`- 它会杀死一个衍生的工作等）

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-02-02T10:50:54.313

You can not do that with cron on a single line. You have to create 2 separate lines like so:

```
# Will run "YourCommand" at 00:00 every day of every months
#Min   Hours   D of the M       Month   D of the Week   Command
0      0       *                *       *               YourCommand

# Will run "YourCommand" at 13:30 every day of every months
30     13      *                *       *               YourCommand 
```

Or as a single line you can run a command every x hours, like so:

```
# Will run "YourCommand" every 12 hours
0   */12   *   *   *   YourCommand 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-13T05:23:38.110

尝试 ...

```
00,30 00,13 * * * [ `date +%H%M` == 1330 ] || [ `date +%H%M` == 0000 ] && logger "its time" 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-10-19T15:34:52.603

```
Try this out: 0 6,18 * * * 
```

it will run at minute 0 past hour 6 and 18

Or you can try it out on [cronguru](https://crontab.guru/#0_6,18_*_*_*)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-14T14:03:27.450

30 0,13 * * * somecommand.sh

这只是一个示例，但您会看到这是一个 cron 条目，它将在上午 0:30 和下午 1:30 运行（军事时间中的 13 是 1）。只需用逗号分隔小时数，或用逗号分隔 cron 的任何部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-27T19:10:10.413

try this,

0 10 9/**12** ? * *

At second :00, at minute :10, **every 12 hours** starting at 09am, of every day

# javascript - EaselJS BitmapAnimation.gotoAndPlay 滞后

> ID：13993558
> 
> 赞同：0
> 
> 时间：2012-12-21T16:17:09.547
> 
> 标签：javascript, easeljs

我编写了一个 requirejs 模块来获取 BitmapAnimation 并添加方法以允许它以一定的速度在舞台上移动，一旦到达目的地，就可以移动到另一个循环动画。

我遇到的问题是，在调用 gotoAndPlay 和舞台上发生的任何事情之间有很多滞后。我已经 console.logged 调用 gotoAndPlay 的方法，但日志会立即发生在动画变化不那么快的地方。

这是我的抽象对象：

```
'use strict';

/**
 * AbstractCharacter
 * Provides common functionality for all characters
 */

define(['easeljs'], function () {
    var AbstractCharacter = function (model) {
        this.model = model;

        // changed from original code
        // allows better encapsulation
        this._s = new createjs.SpriteSheet(model.ssInit);

        // add reversed frames
        createjs.SpriteSheetUtils.addFlippedFrames(this._s, true, false, false), 

        this.initialize();
    };

    AbstractCharacter.prototype = Object.create(createjs.BitmapAnimation.prototype);
    AbstractCharacter.prototype.constructor = AbstractCharacter;

    // speed constant
    AbstractCharacter.prototype.SPEED = 10;

    // from Flash CS6
    AbstractCharacter.prototype.BitmapAnimation_initialize = AbstractCharacter.prototype.initialize;

    /**
     * moves a character to a destination and sets their state at the end of the move
     * @param  {object} destination destination coordinates {x:XX}
     * @param  {string} nextAction  the next action to perform
     * @return {null}
     */
    AbstractCharacter.prototype.moveTo = function(destination, nextAction) {
        nextAction = nextAction || 'idle';

        if (destination) {
            if (destination.x < this.x) {
                this.walkLeft();
            } else {
                this.walkRight();
            }

            this.destination = destination;
            this.nextAction = nextAction;
        }
    };

    /**
     * public method to perform action
     * @param  {string} room   name of the current room the character is in
     * @param  {string} action action name
     * @param  {object} params any parameters required by the action
     * @return {null}
     */
    AbstractCharacter.prototype.action = function(room, action, params) {
        switch (action) {
            case 'walk' :
                this.moveTo(params, 'idle');
                break;

            case 'talk' :
                this.moveTo(params, 'talk');
                break;

            case 'sleep' :
                this.moveTo(this.model.actions.room[room].sleep, 'sleep');
                break;
        }
    };

    /**
     * onTick callback to call next animation frame for use with easeljs
     * @return {null}
     */
    AbstractCharacter.prototype.onTick = function() {
        if (this.destination) {
            var destination = this.destination, 
                speed;

            if (destination.x < this.x) {
                speed = -this.SPEED;

                if (this.x + speed < destination.x) {
                    this.endMove(destination);
                } else {
                    this.x += speed;
                }
            } else {
                speed = this.SPEED;

                if (this.x + speed > destination.x) {
                    this.endMove(destination);
                } else {
                    this.x += speed;
                }
            }
        }
    };

    /**
     * finishes move by calling nextAction() and clearing away desination and nextAction vars
     * @param  {object} destination format {x:XX}
     * @return {null}
     */
    AbstractCharacter.prototype.endMove = function(destination) {
        this.x = destination.x;
        this[this.nextAction]();

        this.destination = null;
        this.nextAction = null;
    };

    /**
     * these methods come from Flash CS6
     * the only difference is that I've removed
     * the reference to the Object prototype
     */
    AbstractCharacter.prototype.initialize = function() {
        this.BitmapAnimation_initialize(this._s);
        this.idle();
    };

    AbstractCharacter.prototype.idle = function(){
        console.log('idle'); // fires almost a second before animation plays
        this.gotoAndPlay("idle");
    };

    AbstractCharacter.prototype.idleLeft = function(){
        this.gotoAndPlay("idleside");
    };

    AbstractCharacter.prototype.idleRight = function(){
        this.gotoAndPlay("idleside_h");
    };

    AbstractCharacter.prototype.walkLeft = function(){
        this.gotoAndPlay("walk");
    };

    AbstractCharacter.prototype.walkRight = function(){
        this.gotoAndPlay("walk_h");
    };

    AbstractCharacter.prototype.talk = function(){
        console.log('talk');
        this.gotoAndPlay("talk");
    };

    AbstractCharacter.prototype.sleep = function(){
        console.log('sleep'); // fires almost a second before animation plays
        this.gotoAndPlay("sleep");
    };

    // public interface
    return AbstractCharacter;
}); 
```

编辑：这似乎只影响 chrome - ie9 和 firefox17 都很好

编辑：如果我使用以下代码而不是扩展我的抽象字符，这将毫无问题或滞后地发挥作用

```
 var test = new createjs.BitmapAnimation(new createjs.SpriteSheet({
        images: [model.assets['mycharacters']], 
        frames: [[0,0,129,344,0,74,327],[129,0,129,345,0,74,327],[258,0,162,331,0,93,313],[420,0,162,331,0,93,313],[582,0,141,338,0,91,320],[723,0,141,338,0,91,320],[864,0,129,345,0,74,327],[993,0,129,345,0,74,327],[1122,0,162,331,0,93,313],[1284,0,162,331,0,93,313],[1446,0,141,338,0,91,320],[1446,0,141,338,0,91,320],[1587,0,129,344,0,74,327],[1716,0,129,344,0,74,327],[1845,0,162,330,0,93,313],[0,345,162,330,0,93,313],[162,345,141,337,0,91,320],[303,345,141,337,0,91,320],[444,345,129,344,0,74,327],[573,345,129,344,0,74,327],[702,345,162,330,0,93,313],[864,345,162,330,0,93,313],[1026,345,141,337,0,91,320],[1167,345,141,337,0,91,320],[1308,345,129,344,0,74,327],[1437,345,129,344,0,74,327],[1566,345,162,330,0,93,313],[1728,345,162,331,0,93,313],[1890,345,141,338,0,91,320],[0,689,141,338,0,91,320],[141,689,129,345,0,74,327],[270,689,129,345,0,74,327],[399,689,162,331,0,93,313],[399,689,162,331,0,93,313],[561,689,141,338,0,91,320],[702,689,141,338,0,91,320],[0,0,129,344,0,74,327],[843,689,129,343,0,74,327],[972,689,162,330,0,93,313],[1134,689,162,330,0,93,313],[1296,689,141,337,0,91,320],[1437,689,141,337,0,91,320],[1578,689,129,344,0,74,327],[1707,689,129,344,0,74,327],[1836,689,162,330,0,93,313],[0,1034,162,329,0,93,313],[162,1034,141,336,0,91,320],[303,1034,141,336,0,91,320],[444,1034,129,343,0,74,327],[573,1034,129,343,0,74,327],[702,1034,162,329,0,93,313],[864,1034,162,329,0,93,313],[1026,1034,141,335,0,91,320],[1167,1034,141,336,0,91,320],[1308,1034,129,343,0,74,327],[1308,1034,129,343,0,74,327],[1437,1034,162,329,0,93,313],[1599,1034,162,329,0,93,313],[1761,1034,141,336,0,91,320],[1902,1034,141,336,0,91,320],[0,1377,129,343,0,74,327],[129,1377,129,343,0,74,327],[258,1377,162,329,0,93,313],[420,1377,162,329,0,93,313],[582,1377,141,336,0,91,320],[723,1377,141,336,0,91,320],[864,1377,129,343,0,74,327],[993,1377,129,343,0,74,327],[1122,1377,162,330,0,93,313],[1284,1377,162,330,0,93,313],[1446,1377,141,337,0,91,320],[1587,1377,141,337,0,91,320],[1728,1377,129,344,0,74,327],[1857,1377,129,344,0,74,327],[0,1721,162,330,0,93,313],[162,1721,162,330,0,93,313],[324,1721,141,325,0,91,320],[465,1721,158,337,0,91,320],[623,1721,141,345,0,74,327],[764,1721,141,345,0,74,327],[905,1721,162,331,0,93,313],[1067,1721,162,331,0,93,313],[1229,1721,158,338,0,91,320],[1387,1721,158,338,0,91,320],[1545,1721,141,345,0,74,327],[1686,1721,141,344,0,74,327],[1827,1721,162,330,0,93,313],[0,2066,162,330,0,93,313],[162,2066,158,337,0,91,320],[320,2066,158,337,0,91,320],[478,2066,141,344,0,74,327],[619,2066,141,344,0,74,327],[760,2066,162,330,0,93,313],[922,2066,162,330,0,93,313],[1084,2066,158,337,0,91,320],[1242,2066,158,337,0,91,320],[1400,2066,141,344,0,74,327],[1541,2066,141,345,0,74,327],[1682,2066,162,331,0,93,313],[1844,2066,162,331,0,93,313],[0,2411,158,338,0,91,320],[158,2411,158,338,0,91,320],[316,2411,141,345,0,74,327],[457,2411,141,345,0,74,327],[598,2411,162,331,0,93,313],[760,2411,162,319,0,93,313],[922,2411,141,337,0,91,320],[1063,2411,141,338,0,91,320],[1204,2411,129,345,0,74,327],[1333,2411,129,345,0,74,327],[1462,2411,162,331,0,93,313],[1624,2411,162,331,0,93,313],[1786,2411,141,338,0,91,320],[0,2756,141,338,0,91,320],[141,2756,129,345,0,74,327],[270,2756,129,345,0,74,327],[399,2756,162,331,0,93,313],[561,2756,162,330,0,93,313],[723,2756,141,337,0,91,320],[864,2756,141,337,0,91,320],[1005,2756,129,344,0,74,327],[1134,2756,129,344,0,74,327],[1263,2756,162,330,0,93,313],[1425,2756,162,330,0,93,313],[1587,2756,141,337,0,91,320],[1728,2756,141,337,0,91,320],[1869,2756,129,344,0,74,327],[0,3101,129,344,0,74,327],[129,3101,162,330,0,93,313],[291,3101,162,330,0,93,313],[453,3101,141,337,0,91,320],[594,3101,141,337,0,91,320],[735,3101,129,344,0,74,327],[864,3101,129,345,0,74,327],[993,3101,162,331,0,93,313],[1155,3101,162,331,0,93,313],[1317,3101,141,338,0,91,320],[1458,3101,141,338,0,91,320],[1599,3101,129,345,0,74,327],[1728,3101,129,345,0,74,327],[1857,3101,162,331,0,93,313],[0,3446,162,331,0,93,313],[162,3446,141,326,0,91,320],[303,3446,148,280,0,82,281]],
        animations: {idle:[0,36, true], idleside:[37,76, true], walk:[77,105, true], talk:[106,142, true], sleep:[143,143, true]}
    }));

    this.addChild(test);

    test.gotoAndPlay('idle');

    setTimeout(function () {
        console.log('idleside');
        test.gotoAndPlay('idleside');
    }, 3000);

    setTimeout(function () {
        console.log('walk');
        test.gotoAndPlay('walk');
    },6000)

    setTimeout(function () {
        console.log('talk');
        test.gotoAndPlay('talk');
    },9000)

    setTimeout(function () {
        console.log('sleep');
        test.gotoAndPlay('sleep');
    },12000) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:30:04.567

我已经更新了我的抽象类以使用 scaleX = -1 而不是效果更好的翻转帧。注意：执行此操作会产生轻微的 cpu 开销，但测试会证明这一点。更糟糕的情况是，我必须将额外的帧添加到资产中。

请享用

```
'use strict';

/**
 * AbstractCharacter
 * Provides common functionality for all characters
 * @author  Allandt Bik-Elliott
 * @version 0.1
 */

define(['easeljs'], function () {
    var AbstractCharacter = function (model) {
        this.model = model;

        // changed from original code
        // allows better encapsulation
        this._s = new createjs.SpriteSheet(model.ssInit);

        // add reversed frames
        // NOTE: removed because there is lag switching between spritesheets
        //createjs.SpriteSheetUtils.addFlippedFrames(this._s, true, false, false), 

        this.initialize();
    };

    AbstractCharacter.prototype = Object.create(createjs.BitmapAnimation.prototype);
    AbstractCharacter.prototype.constructor = AbstractCharacter;

    // speed constant
    AbstractCharacter.prototype.SPEED = 10;

    // from Flash CS6
    AbstractCharacter.prototype.BitmapAnimation_initialize = AbstractCharacter.prototype.initialize;

    /**
     * moves a character to a destination and sets their state at the end of the move
     * @param  {object} destination destination coordinates {x:XX}
     * @param  {string} nextAction  the next action to perform
     * @return {null}
     */
    AbstractCharacter.prototype.moveTo = function(destination, nextAction) {
        nextAction = nextAction || 'idle';

        if (destination) {
            if (destination.x < this.x) {
                this.walkLeft();
            } else {
                this.walkRight();
            }

            this.model.destination = destination;
            this.model.nextAction = nextAction;
        }
    };

    /**
     * public method to perform action
     * @param  {string} room   name of the current room the character is in
     * @param  {string} action action name
     * @param  {object} params any parameters required by the action
     * @return {null}
     */
    AbstractCharacter.prototype.act = function(room, action, actionparams) {
        //console.log(action);
        switch (action) {
            case 'walk' :
                this.moveTo(actionparams, 'idle');
                break;

            case 'talk' :
                this.moveTo(actionparams, 'talk');
                break;

            case 'sleep' :
                this.moveTo(this.model.actions.room[room].sleep, 'sleep');
                break;

        }
    };

    /**
     * onTick callback for use with easeljs
     * @return {null}
     */
    AbstractCharacter.prototype.onTick = function() {
        if (this.model.destination) {
            var destination = this.model.destination, 
                speed;

            if (destination.x < this.x) {
                speed = -this.SPEED;

                if (this.x + speed < destination.x) {
                    this.endMove(destination);
                } else {
                    this.x += speed;
                }
            } else {
                speed = this.SPEED;

                if (this.x + speed > destination.x) {
                    this.endMove(destination);
                } else {
                    this.x += speed;
                }
            }
        }
    };

    /**
     * finishes move by calling nextAction() and clearing away desination and nextAction vars
     * @param  {object} destination format {x:XX}
     * @return {null}
     */
    AbstractCharacter.prototype.endMove = function(destination) {
        //console.log('ending move');
        this.x = destination.x;
        this[this.model.nextAction]();

        this.model.destination = null;
        this.model.nextAction = null;
    };

    /**
     * these methods come from Flash CS6
     * the only difference is that I've removed
     * the reference to the Object prototype
     *
     * scaleX used instead of flipped frames
     */
    AbstractCharacter.prototype.initialize = function() {
        this.BitmapAnimation_initialize(this._s);
        this.idle();
    };

    AbstractCharacter.prototype.idle = function(){
        //console.log('idle');
        this.gotoAndPlay("idle");
        this.scaleX = 1;
    };

    AbstractCharacter.prototype.idleLeft = function(){
        //console.log('idle left');
        this.gotoAndPlay("idleside");
        this.scaleX = 1;
    };

    AbstractCharacter.prototype.idleRight = function(){
        //console.log('idle right');
        // this.gotoAndPlay("idleside_h");
        this.gotoAndPlay("idleside");
        this.scaleX = -1;
    };

    AbstractCharacter.prototype.walkLeft = function(){
        //console.log('walk left');
        this.gotoAndPlay("walk");
        this.scaleX = 1;
    };

    AbstractCharacter.prototype.walkRight = function(){
        //console.log('walk right');
        // this.gotoAndPlay("walk_h");
        this.gotoAndPlay("walk");
        this.scaleX = -1;
    };

    AbstractCharacter.prototype.talk = function(){
        //console.log('talk');
        this.gotoAndPlay("talk");
        this.scaleX = 1;
    };

    AbstractCharacter.prototype.sleep = function(){
        //console.log('sleep');
        this.gotoAndPlay("sleep");
        this.scaleX = 1;
    };

    // public interface
    return AbstractCharacter;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:18:47.953

我发现了问题所在：

```
 // add reversed frames
    createjs.SpriteSheetUtils.addFlippedFrames(this._s, true, false, false), 
```

问题是 addReversedFrames 在 chrome 中存在问题 - 这可能是由我的 spritesheet 的大小引起的 - 我将测试当我将 spritesheet 分解为多个部分时会发生什么

这可能是因为此处记录了多个图像的问题：[Stuttering animation when spanning multiple sprite sheet in easeljs](https://stackoverflow.com/questions/9403883/stuttering-animation-when-spanning-multiple-sprite-sheets-in-easeljs)

# axapta - Dynamics Ax 2012 覆盖字段的空值

> ID：13993562
> 
> 赞同：1
> 
> 时间：2012-12-21T16:17:26.587
> 
> 标签：axapta, x++, microsoft-dynamics, dynamics-ax-2012, ax

我在 SalesTable 表单中有一些自定义字段，我在其中覆盖了查找方法以填充组合框。我还覆盖了自定义数据源的表单的 initValue 方法，以在不存在值时自动填写这些字段的默认值。

我的问题是：最终用户无法编辑这些字段之一，并且需要一个值。目前并非所有记录都填写了此值，因此当编辑现有记录时，AX 会引发错误，因为该字段需要一个值且无法修改。我基本上需要检测表单何时启动是否有值，如果没有则填写。关于在哪里/如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:45:40.547

根据您要存储在该字段中的数据类型，您可以使用默认值填充旧记录字段，因此您无需创建验证。

# c# - 将 exe 的标准输出重定向到我的控制台应用程序

> ID：13993563
> 
> 赞同：1
> 
> 时间：2012-12-21T16:17:29.317
> 
> 标签：c#, console-application, redirectstandardoutput

我想在我的控制台应用程序上使用一个名为 jlink.exe 的可执行文件。因为 jlink.exe 不是 .net 应用程序，所以我无法引用它并调用它的方法。**结果，我想用它来读取它的输出**

当我从 Windows 资源管理器启动该 exe 时，它​​的外观如下： ![在此处输入图像描述](../Images/74788fd2e69e88b6ac2b0a9b490b0ee4.png)

然后它等待一个命令。如果我输入`mem 88 2`然后我回来：

![在此处输入图像描述](../Images/acd75a94416105258dd546754f2bb285.png)

现在我想用我的 .net 控制台应用程序做同样的事情来读取它的标准输出，但由于某种原因我无法读取输出。这就是我所拥有的：

```
 // change working directory
    Directory.SetCurrentDirectory(@"C:\Program Files (x86)\IAR Systems\Embedded Workbench 6.4 Evaluation\arm\bin");

    Process p = new Process( )
    {
        StartInfo = new ProcessStartInfo( @"jlink.exe" )
        {
            UseShellExecute = false ,
            RedirectStandardOutput = true ,
            RedirectStandardInput = true
        }
    };

    p.Start( );                       

    StreamWriter standardInput = p.StandardInput;
    StreamReader standardOutput = p.StandardOutput;

    var line = string.Empty;

    while ( ( line = standardOutput.ReadLine( ) ) != null )
    {                
        Console.WriteLine( line );                
    } 
```

为什么当我运行该代码时，我只是得到一个黑色窗口......我没有得到与运行该可执行文件时相同的输出。当我针对其他可执行文件运行该代码时，它工作得很好。

如果我然后键入`mem 88 2`并按 ENTER，则没有任何反应。如果我再按一次回车，那么我最终会得到我想要的额外内容。为什么我会在该可执行文件中出现这种行为？

## 编辑

我看过类似的问题，例如这个：

[process.standardoutput.ReadToEnd() 总是空的？](https://stackoverflow.com/questions/2012509/process-standardoutput-readtoend-always-empty)

我不认为我做错了什么。我想那个可执行文件有些奇怪。要使用该可执行文件，您可以从以下网址下载它： [http](http://supp.iar.com/Download/SW/?item=EWARM-EVAL) ://supp.iar.com/Download/SW/?item=EWARM-EVAL或[http://www.iar.com/en/Products/IAR-Embedded-工作台/ARM/](http://www.iar.com/en/Products/IAR-Embedded-Workbench/ARM/) . 然后去`C:\Program Files (x86)\IAR Systems\Embedded Workbench 6.4 Evaluation\arm\bin`执行jlink.exe（如果你没有通过usb连接板你会得到一个错误但没关系。错误信息也不会出现）。

# sql-server-2008 - BEGIN ... SET ... END 的语法问题

> ID：13993571
> 
> 赞同：3
> 
> 时间：2012-12-21T16:18:21.547
> 
> 标签：sql-server-2008, tsql

我编写了以下存储过程，它使用日期维度表来计算给定开始日期和频率的日期的下一次出现。

每当我有一个 IF BEGIN SET IF SET END 序列时，我都会遇到一些奇怪的语法错误。

为了帮助调试，我返回并在一行 IF 语句周围添加了不需要的 BEGIN 和 END 语句。

我在这里缺少某种类型的 BEGIN - END 或 IF - ELSE 匹配规则吗？（我已经用注释标记了解析器抱怨的行。）

```
CREATE PROCEDURE dbo.GetNextScheduledBusinessDayOccurance
(
  @BeginDate DATE,
  @Frequency CHAR(1)
)
AS
BEGIN
    DECLARE @Date DATETIME,
    @currentDate DATE,
    @weekOfYear INT,
    @dayOfWeek varchar(9),
    @weekOfMonth tinyint,
    @month varchar(2),
    @dayOfQuarter tinyint,
    @currentDayOfQuarter tinyint,
    @quarterOfNextOccurance tinyint,
    @yearOfNextOccurance int;

    SET @currentDate = CONVERT(Date, GETDATE())
    IF (@BeginDate > @currentDate)-- If it hasn't started yet
    BEGIN
        SET @Date = (SELECT TOP(1) [DATE] FROM dbo.dim_Date WHERE [DATE] >= @BeginDate AND [Date] > @currentDate AND (IsBusinessDay = 1) ORDER BY [DATE])
    END
    ELSE
        BEGIN
            IF @Frequency = 'A' --Annually
            BEGIN
                SET @Date = (SELECT TOP(1) [DATE] FROM dbo.dim_Date WHERE ([DATE] > @currentDate AND [Month] >= DATEPART(MONTH, @BeginDate) AND [Day] >= DATEPART(DAY, @BeginDate) AND IsBusinessDay = 1) ORDER BY [Date])
            END
            ELSE IF @Frequency = 'B' --Biweekly
                BEGIN
                    SET @weekOfYear = (SELECT WeekOfYear FROM dbo.dim_Date WHERE [Date] = @BeginDate)
                    SET @dayOfWeek = (SELECT [DayOfWeek] FROM Dbo.dim_Date WHERE [Date] >= @BeginDate AND IsBusinessDay = 1)
                    SET @Date = ((SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE ([DATE] > @currentDate AND [WeekOfYear]%2 = @weekOfYear%2 AND [DayOfWeek] = @dayOfWeek AND IsBusinessDay = 1) ORDER BY [Date]))
                END
            ELSE IF @Frequency = 'D' --Daily
                BEGIN
                    SET @Date = ((SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE ([DATE] > @currentDate AND IsBusinessDay = 1) ORDER BY [Date]))
                END
            ELSE IF @Frequency = 'E' -- Semi-Monthly (twice each month) (assume the 15th and last day of month)
                BEGIN
                    -- GET the next 15th or last day of month.
                    SET @Date = (SELECT TOP(1) [Date] FROM dim_Date WHERE [Date] > @currentDate AND (Day = '15' OR (DateAdd(day, -1, DateAdd( month, DateDiff(month , 0,[Date])+1 , 0)) = [Date])) ORDER BY [Date])
                    IF ((SELECT IsBusinessDay FROM dim_Date WHERE [Date] = @Date) = 0)
                    BEGIN
                        SET @Date = ((SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE (([DATE] > @Date) AND IsBusinessDay = 1) ORDER BY [Date])
                    END --Parser ERROR: Incorrect syntax near the keyword 'END'.
                END
            ELSE IF @Frequency = 'I' --Bimonthly (Every other month)
                BEGIN
                    SET @Month = (SELECT Month FROM dbo.dim_Date WHERE [Date] = @BeginDate)
                    SET @Date = (SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE ([Date] > @currentDate AND [Month]%2 = @Month%2 AND [Day] = DATEPART(day, @BeginDate)) ORDER BY [Date])
                    IF ((SELECT IsBusinessDay FROM dim_Date WHERE [Date] = @Date) = 0)
                    BEGIN
                        SET @Date = ((SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE (([DATE] > @Date) AND IsBusinessDay = 1) ORDER BY [Date])
                    END --Parser ERROR: Incorrect syntax near the keyword 'END'.
                END
            ELSE IF @Frequency = 'L' --Last Business Day of the Month
                BEGIN
                    SET @Date = (SELECT TOP(1) [Date] FROM dim_Date WHERE [Date] > '2013-03-20 00:00:00.000' AND  (DateAdd(day, -1, DateAdd( month, DateDiff(month , 0,[Date])+1 , 0)) = [Date]) ORDER BY [Date])
                    IF ((SELECT IsBusinessDay FROM dim_Date WHERE [Date] = @Date) = 0)
                    BEGIN
                        SET @Date = ((SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE (([DATE] < @Date) AND IsBusinessDay = 1) ORDER BY [Date] DESC))
                    END
                END     
            ELSE IF @Frequency = 'M'  -- Monthly
                BEGIN
                    SET @Date = (SELECT TOP(1) [Date] FROM dim_Date WHERE [Date] > @currentDate AND (Day > DATEPART(day, @BeginDate)) ORDER BY [Date])
                    IF ((SELECT IsBusinessDay FROM dim_Date WHERE [Date] = @Date) = 0)
                    BEGIN
                        SET @Date = ((SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE (([DATE] > @Date) AND IsBusinessDay = 1) ORDER BY [Date])
                    END--Parser ERROR: Incorrect syntax near the keyword 'END'.
                END
            ELSE
            IF @Frequency = 'Q' --Quarterly
                BEGIN
                    SET @dayOfQuarter = (Select DayOfQuarter FROM dim_Date WHERE [DATE] = @BeginDate)
                    SET @currentDayOfQuarter = (Select DayOfQuarter FROM dim_Date WHERE [DATE] = @currentDate)
                    SET @quarterOfNextOccurance = (SELECT [Quarter] FROM dbo.dim_Date WHERE [Date] = @currentDate)
                    SET @yearOfNextOccurance = (SELECT [Year] FROM dbo.dim_Date WHERE [Date] = @currentDate)
                    --SELECT @dayOfQuarter DOQ, @currentDayOfQuarter curDOQ, @quarterOfNextOccurance QofNext, @yearOfNextOccurance YofNext
                    IF (@currentDayOfQuarter >= @dayOfQuarter)
                        SET @quarterOfNextOccurance = @quarterOfNextOccurance + 1
                    SET @Date = '1900-01-01'
                    WHILE (@Date < @currentDate) --Loop through this just in case we're close to the end of the Quarter, and there's no more business days left
                        BEGIN
                            IF (@quarterOfNextOccurance > 4)
                                BEGIN
                                    SET @quarterOfNextOccurance = @quarterOfNextOccurance%4
                                    SET @yearOfNextOccurance = @yearOfNextOccurance + 1         
                                END
                            --SELECT @quarterOfNextOccurance QofNext, @yearOfNextOccurance YofNext
                            --CREATE a temp table with all of the business dates from the target quarter in decending order.
                            SELECT * INTO ##temp FROM (SELECT TOP(92) [Date], MAX(DayOfQuarter) as DOQ FROM dim_Date WHERE (YEAR = @yearOfNextOccurance AND Quarter = @quarterOfNextOccurance AND IsBusinessDay = 1) Group By Date ORDER BY Date DESC) as foo
                            SET @Date = (SELECT TOP(1) DATE from ##temp WHERE DOQ <= @dayOfQuarter)
                            SET @quarterOfNextOccurance = @quarterOfNextOccurance + 1 -- Go ahead and incriment this just in case we start the WHILE over.
                            --SELECT * FROM ##temp
                            BEGIN TRY DROP TABLE ##temp END TRY BEGIN CATCH END CATCH
                        END
                END
            ELSE
            IF @Frequency = 'S' --Semi-annually
                BEGIN
                    SET @Date = @BeginDate
                    WHILE (@Date < @currentDate)
                    BEGIN
                        SET @Date = (SELECT [Date] FROM dbo.dim_Date WHERE [Date] = DATEADD(MONTH, 6, @Date))
                    END
                    IF ((SELECT IsBusinessDay FROM dim_Date WHERE [Date] = @Date) = 0)
                    BEGIN
                        SET @Date = ((SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE (([DATE] > @Date) AND IsBusinessDay = 1) ORDER BY [Date])
                    END--Parser ERROR: Incorrect syntax near the keyword 'END'.
                END
            ELSE
            IF @Frequency = 'W' --Weekly
                BEGIN
                    SET @dayOfWeek = (SELECT [DayOfWeek] FROM dbo.dim_Date WHERE [Date] = @BeginDate)
                    SET @Date = (SELECT TOP(1) [Date] FROM Dbo.dim_Date WHERE DayOfWeek = @dayOfWeek AND [DATE] < @currentDate ORDER BY [DATE] DESC)
                    --SELECT @Date DATE, @BeginDate BeginDate
                    WHILE ((@Date < @currentDate) OR (@Date < @BeginDate))
                    BEGIN
                        SET @Date = (SELECT [Date] FROM dbo.dim_Date WHERE [Date] = DATEADD(Week, 1, @Date))
                        --SELECT @Date DateInWHile
                    END
                    IF ((SELECT IsBusinessDay FROM dim_Date WHERE [Date] = @Date) = 0)
                        SET @Date = (SELECT TOP(1) [Date] FROM dbo.dim_Date WHERE (([DATE] > @Date) AND IsBusinessDay = 1) ORDER BY [Date])
                    --SELECT @Date
                END
            ELSE
                SET @Date = NULL
        END
        RETURN @Date
END

GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:24:21.367

你错过了一个结束`)`：

```
BEGIN
  SET @Date = ((
    SELECT TOP(1) [Date] 
    FROM dbo.dim_Date 
    WHERE (([DATE] > @Date) AND IsBusinessDay = 1) 
    ORDER BY [Date]) ) -- Paren added here...
END --Parser ERROR: Incorrect syntax near the keyword 'END'. 
```

# x3dom - 在 x3dom 中选择示例

> ID：13993580
> 
> 赞同：0
> 
> 时间：2012-12-21T16:18:54.210
> 
> 标签：x3dom

有没有人有关于挑选 x3dom 对象的简单示例。x3dom 的主页上给出了两个示例，但它们对于他们来说是复杂的理解。如果有人可以为我提供更简单的示例，我将非常感激。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:24:32.083

不确定您选择的确切含义

这是一个示例页面，它根据 mouseclick 鼠标悬停和鼠标移出改变颜色

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="stylesheet" type="text/css" href="http://x3dom.org/x3dom/example/x3dom.css">    </link>
<script type="text/javascript" src = "http://x3dom.org/x3dom/example/x3dom.js"></script>
</head>
<body>

<X3D width="500px" height="400px" showLog='true' showStat="true">
<Scene DEF='scene' >
<Shape >
<Box onclick="toggleRendering();" onmouseover="toggleRendering2();"  onmouseout="toggleRendering3();" />        
<Appearance><Material diffuseColor='0 1 0' /></Appearance>
</Shape>
</Scene>
</X3D>

<script>

var flag = true;

function toggleRendering()
{
flag = !flag;

var mat = document.getElementsByTagName("Material");
var aMat = mat[0];

if (flag) aMat.diffuseColor = "1 0 0";
else aMat.diffuseColor = "0 0 1";

return false;
}

function toggleRendering2()
{
var mat = document.getElementsByTagName("Material");
var aMat = mat[0];

aMat.diffuseColor = "1 1 1";

return false;
}

function toggleRendering3()
{
var mat = document.getElementsByTagName("Material");
var aMat = mat[0];

aMat.diffuseColor = "0 0 0";

return false;
}
</script>

</body>
</html> 
```

# magento - 为什么不会在 magento 主题上显示类别菜单？

> ID：13993593
> 
> 赞同：1
> 
> 时间：2012-12-21T16:20:02.930
> 
> 标签：magento, customization, magento-1.7

我正在尝试在 Magento 商店（带有 hellowired 主题的 v1.7 社区版）中设置动态菜单，但无法弄清楚为什么我的主页上没有显示。

我不知道在调用主题的 .phtml 文件时是否有错误，或者我是否缺少某些配置。我已经按照主题文档中的描述配置了它并设置了几个产品，但我仍然没有看到显示的菜单。

如果我对类别调用进行硬编码，它可以正常工作，但这只是一种解决方法，因为我需要它是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:51:05.447

结果是我使用的主题（Hellowired 一个，但它似乎适用于几个）需要在默认类别下设置所有类别。主题网站的管理员回答了我这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:18:40.260

确保在目录->管理类别中的选项卡下`Is Active`的`Include in Navigation Menu`管理面板中将标志设置为“是” 。`General Information`

# javascript - 在 ipad 上删除 javascript

> ID：13993596
> 
> 赞同：-5
> 
> 时间：2012-12-21T16:20:14.163
> 
> 标签：javascript, html, css, ipad, parallax.js

我有一个我不想在 iPad 上工作的视差滚动网站。所以我想在 iPad 上删除我的 parallax.js 文件的链接。

如何在检测到设备时禁用视差滚动？

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:55:15.927

使用类似的东西：

```
var is_ipad = navigator.userAgent.indexOf('iPad') > -1 
```

然后不要附加激活视差的事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:15:06.097

这是一个可以让您捕捉其他移动设备的线程：[在 jQuery 中检测移动设备的最佳方法是什么？](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)

这是一个片段，但不要忽略许多其他有用的响应：

```
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
 // some code..
} 
```

# asp.net-mvc-3 - 如何在mvc3中更改editorfor的宽度

> ID：13993601
> 
> 赞同：0
> 
> 时间：2012-12-21T16:20:40.240
> 
> 标签：asp.net-mvc-3, mvc-editor-templates, editorfor

> **可能重复：**
> [如何创建通用 MVC3 编辑器模板？](https://stackoverflow.com/questions/9885198/how-to-create-a-generic-mvc3-editor-template)

我使用 editorfor 作为我的输入控件，当屏幕分辨率较低时，这将超出我的表单。我需要减小控件的宽度来解决这个问题。我正在尝试为此编写一个编辑器模板，但我不知道如何。请在这里帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:29:30.037

尝试查看此[链接](https://stackoverflow.com/questions/5119221/how-can-i-change-the-size-of-a-multi-line-editor-field)。他们似乎能够通过将 EditorFor 字段包装在 div 中然后使用 CSS 来操作 div 来操作该字段。

# xml - 递归匹配数据以制作层次结构树

> ID：13993602
> 
> 赞同：1
> 
> 时间：2012-12-21T16:20:40.980
> 
> 标签：xml, xslt, recursion, xslt-1.0, hierarchical-data

**我的输入 xml 如下所示：**

```
<AGROVOC xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CONCEPT>
    <Language>EN</Language>
    <termcode>331000</termcode>
    <termspell>site</termspell>
    <NT>12861</NT>
    <NT>13893</NT>
    <NT>15988</NT>
    <NT>24183</NT>
    <NT>28623</NT>
    <NT>35171</NT>
    <NT>4781</NT>
    <NT>5973</NT>
    <NT>8872</NT>
    <NT>9000162</NT>
</CONCEPT>

<CONCEPT>
    <termcode>12861</termcode>
    <termspell>child nurseries</termspell>
    <BT>331000</BT>
</CONCEPT>

<CONCEPT>
    <termcode>13893</termcode>
    <termspell>restaurants</termspell>
    <BT>331000</BT>
</CONCEPT>

<CONCEPT>
    <termcode>15988</termcode>
    <termspell>laboratories</termspell>
    <BT>331000</BT>
    <NT>24298</NT>
</CONCEPT>

<CONCEPT>
    <termcode>24298</termcode>
    <termspell>Veterinary laboratories</termspell>
    <BT>15988</BT>
</CONCEPT>

<CONCEPT>
    <termcode>24183</termcode>
    <termspell>hospitals</termspell>
    <BT>331000</BT>
    <NT>16384</NT>
</CONCEPT>

<CONCEPT>
    <termcode>16384</termcode>
    <termspell>animal hospitals</termspell>
    <BT>24183</BT>
</CONCEPT>

<CONCEPT>
    <termcode>35171</termcode>
    <termspell>Landfills</termspell>
    <BT>331000</BT>
    <NT>35165</NT>
</CONCEPT>

<CONCEPT>
    <termcode>35165</termcode>
    <termspell>waste landfills</termspell>
    <BT>35171</BT>
</CONCEPT>

<CONCEPT>
    <termcode>4781</termcode>
    <termspell>meteorological stations</termspell>
    <BT>331000</BT>
    <NT>8342</NT>
</CONCEPT>

<CONCEPT>
    <termcode>8342</termcode>
    <termspell>Weather ships</termspell>
    <BT>4781</BT>
</CONCEPT>

<CONCEPT>
    <termcode>5973</termcode>
    <termspell>plant nurseries</termspell>
    <BT>331000</BT>
    <NT>34832</NT>
    <NT>34830</NT>
    <NT>14969</NT>
</CONCEPT>

<CONCEPT>
    <termcode>34832</termcode>
    <termspell>Fruit tree nurseries</termspell>
    <BT>5973</BT>
</CONCEPT>

<CONCEPT>
    <termcode>34830</termcode>
    <termspell>Forest nurseries</termspell>
    <BT>5973</BT>
</CONCEPT>

<CONCEPT>
    <termcode>14969</termcode>
    <termspell>Ornamental tree nurseries</termspell>
    <BT>5973</BT>
</CONCEPT>

<CONCEPT>
    <termcode>8872</termcode>
    <termspell>Apiaries</termspell>
    <BT>331000</BT>
</CONCEPT>

<CONCEPT>
    <termcode>9000162</termcode>
    <termspell>Telecentre</termspell>
    <BT>331000</BT>
</CONCEPT> 
```

**所需的输出应如下所示：**

```
<node id="331000" label="site">
    <isComposedBy>
        <node id="12861" label="child nurseries"/>
        <node id="13893" label="restaurants"/>
        <node id="15988" label="laboratories">
            <isComposedBy>
                <node id="24298" label="Veterinary laboratories"/>
            </isComposedBy>
        </node>
        <node id="24183" label="hospitals">
            <isComposedBy>
                <node id="16384" label="animal hospitals"/>
            </isComposedBy>
        </node>
        <node id="35171" label="Landfills">
            <isComposedBy>
                <node id="35165" label="waste landfills"/>
            </isComposedBy>
        </node>
        <node id="4781" label="meteorological stations">
            <isComposedBy>
                <node id="8342" label="Weather ships"/>
            </isComposedBy>
        </node>
        <node id="5973" label="plant nurseries">
            <isComposedBy>
                <node id="34832" label="Fruit tree nurseries"/>
                <node id="34830" label="Forest nurseries"/>
                <node id="14969" label="Ornamental tree nurseries"/>
            </isComposedBy>
        </node>
        <node id="8872" label="Apiaries"/>
        <node id="9000162" label="Telecentre"/>
    </isComposedBy>
</node> 
```

从上面给定的 xml 中，一个概念只能有 1 个 BT 或更广泛的术语，即其父 ID。如果它不包含BT，则意味着它位于层次结构的顶部（例如站点）。一个概念可以有多个 NT 或子项。

**我的 xsl 看起来像这样：**

```
<xsl:key name="kChildren" match="CONCEPT" use="BT"/>
    <xsl:template match="CONCEPT">
    <xsl:element name="node">
        <xsl:attribute name="id">
            <xsl:value-of select="/AGROVOC/CONCEPT/termcode"/>
        </xsl:attribute>
        <xsl:apply-templates select="key('kChildren', '0')"/>
    </xsl:element>
</xsl:template>

<xsl:template match="CONCEPT">
    <xsl:element name="node">
        <xsl:attribute name="id">
            <xsl:value-of select="termcode"/>
        </xsl:attribute>
        <xsl:attribute name="label">
            <xsl:value-of select="termspell"/>
        </xsl:attribute>
        <xsl:if test="key('kChildren', termcode)">
            <isComposedBy>
                <xsl:apply-templates select="key('kChildren', termcode)"/>
            </isComposedBy>
        </xsl:if>
    </xsl:element>
</xsl:template> 
```

**输出看起来像所需的输出加上：**

```
<node id="12861" label="child nurseries"/>
<node id="13893" label="restaurants"/>
<node id="15988" label="laboratories">
    <isComposedBy>
        <node id="24298" label="Veterinary laboratories"/>
    </isComposedBy>
</node>
<node id="24298" label="Veterinary laboratories"/>
<node id="24183" label="hospitals">
    <isComposedBy>
        <node id="16384" label="animal hospitals"/>
    </isComposedBy>
</node>
<node id="16384" label="animal hospitals"/>
<node id="35171" label="Landfills">
    <isComposedBy>
        <node id="35165" label="waste landfills"/>
    </isComposedBy>
</node>
<node id="35165" label="waste landfills"/>
<node id="4781" label="meteorological stations">
    <isComposedBy>
        <node id="8342" label="Weather ships"/>
    </isComposedBy>
</node>
<node id="8342" label="Weather ships"/>
<node id="5973" label="plant nurseries">
    <isComposedBy>
        <node id="34832" label="Fruit tree nurseries"/>
        <node id="34830" label="Forest nurseries"/>
        <node id="14969" label="Ornamental tree nurseries"/>
    </isComposedBy>
</node>
<node id="34832" label="Fruit tree nurseries"/>
<node id="34830" label="Forest nurseries"/>
<node id="14969" label="Ornamental tree nurseries"/>
<node id="8872" label="Apiaries"/>
<node id="9000162" label="Telecentre"/> 
```

任何想法如何删除刚刚重复的额外节点？顺便说一句，我从这篇文章中设计了我的 xsl：[xslt recursive template on parent-child data](https://stackoverflow.com/questions/13644680/xslt-recursive-template-on-parent-child-data)。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:57:02.163

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kConcByCode" match="CONCEPT" use="termcode"/>

 <xsl:template match="/">
     <xsl:apply-templates select="/*/CONCEPT[not(BT)]"/>
 </xsl:template>

 <xsl:template match="CONCEPT">
  <node id="{termcode}" label="{termspell}">
   <xsl:if test="key('kConcByCode', NT)">
     <isComposedBy>
       <xsl:apply-templates select="key('kConcByCode', NT)"/>
     </isComposedBy>
   </xsl:if>
  </node>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<AGROVOC xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <CONCEPT>
        <Language>EN</Language>
        <termcode>331000</termcode>
        <termspell>site</termspell>
        <NT>12861</NT>
        <NT>13893</NT>
        <NT>15988</NT>
        <NT>24183</NT>
        <NT>28623</NT>
        <NT>35171</NT>
        <NT>4781</NT>
        <NT>5973</NT>
        <NT>8872</NT>
        <NT>9000162</NT>
    </CONCEPT>
    <CONCEPT>
        <termcode>12861</termcode>
        <termspell>child nurseries</termspell>
        <BT>331000</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>13893</termcode>
        <termspell>restaurants</termspell>
        <BT>331000</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>15988</termcode>
        <termspell>laboratories</termspell>
        <BT>331000</BT>
        <NT>24298</NT>
    </CONCEPT>
    <CONCEPT>
        <termcode>24298</termcode>
        <termspell>Veterinary laboratories</termspell>
        <BT>15988</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>24183</termcode>
        <termspell>hospitals</termspell>
        <BT>331000</BT>
        <NT>16384</NT>
    </CONCEPT>
    <CONCEPT>
        <termcode>16384</termcode>
        <termspell>animal hospitals</termspell>
        <BT>24183</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>35171</termcode>
        <termspell>Landfills</termspell>
        <BT>331000</BT>
        <NT>35165</NT>
    </CONCEPT>
    <CONCEPT>
        <termcode>35165</termcode>
        <termspell>waste landfills</termspell>
        <BT>35171</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>4781</termcode>
        <termspell>meteorological stations</termspell>
        <BT>331000</BT>
        <NT>8342</NT>
    </CONCEPT>
    <CONCEPT>
        <termcode>8342</termcode>
        <termspell>Weather ships</termspell>
        <BT>4781</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>5973</termcode>
        <termspell>plant nurseries</termspell>
        <BT>331000</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>34832</termcode>
        <termspell>Fruit tree nurseries</termspell>
        <BT>5973</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>34830</termcode>
        <termspell>Forest nurseries</termspell>
        <BT>5973</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>14969</termcode>
        <termspell>Ornamental tree nurseries</termspell>
        <BT>5973</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>8872</termcode>
        <termspell>Apiaries</termspell>
        <BT>331000</BT>
    </CONCEPT>
    <CONCEPT>
        <termcode>9000162</termcode>
        <termspell>Telecentre</termspell>
        <BT>331000</BT>
    </CONCEPT>
</AGROVOC> 
```

**产生正确的结果**：

```
<node id="331000" label="site">
   <isComposedBy>
      <node id="12861" label="child nurseries"/>
      <node id="13893" label="restaurants"/>
      <node id="15988" label="laboratories">
         <isComposedBy>
            <node id="24298" label="Veterinary laboratories"/>
         </isComposedBy>
      </node>
      <node id="24183" label="hospitals">
         <isComposedBy>
            <node id="16384" label="animal hospitals"/>
         </isComposedBy>
      </node>
      <node id="35171" label="Landfills">
         <isComposedBy>
            <node id="35165" label="waste landfills"/>
         </isComposedBy>
      </node>
      <node id="4781" label="meteorological stations">
         <isComposedBy>
            <node id="8342" label="Weather ships"/>
         </isComposedBy>
      </node>
      <node id="5973" label="plant nurseries"/>
      <node id="8872" label="Apiaries"/>
      <node id="9000162" label="Telecentre"/>
   </isComposedBy>
</node> 
```

# actionscript-3 - Flash 中的分层对象使用自己的按钮将对象拉起并放在先前的顶部。如何设置动作脚本 3？

> ID：13993603
> 
> 赞同：0
> 
> 时间：2012-12-21T16:20:46.843
> 
> 标签：actionscript-3, flash, object, button

这是我的想法：

配件并在 Flash 中构建您的汽车应用程序。

我是Action Script 3 的新手，我正在尝试为我的自定义图形编写Action Script，以“打造自己的汽车”。类似于哈雷戴维森摩托车制造商的东西（https://www.harley-davidson.com/en_US/Content/Pages/H-D1/Bike-Builder.html#/locale__en_US/model_FLD/year *_2013*）。

我有所有的图形（多张照片，针对不同的车身颜色进行了Photoshop和剪切。我对汽车轮辋的选择也做同样的事情，等等）所有图形的大小都经过调整，因此它们可以无缝地叠放在一起，但是我不知道如何将按钮设置为 Action Script 3，以便您可以单击（例如：rim1 或 rim2 等，通过在现有背景汽车照片上拉起照片来查看它在汽车上的外观）。

我将如何操作 剪下我的“颜色按钮”以提供我设计的 10 种颜色样本，然后单击颜色样本（例如：红色）。然后它将我已经制作的车身图形红色放在现有的汽车背景照片之上，等等每个颜色按钮？我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:15:11.980

对按钮点击做出反应：

```
//first add listeners to buttons
myButton1.addEventListener(MouseEvent.CLICK, clickHandler);
myButton2.addEventListener(MouseEvent.CLICK, clickHandler);
...etc

//then do something based on button clicked:
function clickHandler(event:MouseEvent):void
{
    switch (event.target)
    {
        case myButton1:
            //do something, eg make a movieclip of a car part visible
            break;
        case myButton2:
            //do something else, eg make a movieclip of a car part invisible
            break;
        ...etc
    }
} 
```

# php - Magento 成功页面恢复为默认主题

> ID：13993605
> 
> 赞同：0
> 
> 时间：2012-12-21T16:20:49.607
> 
> 标签：php, magento

我们最近在我们的网站上添加了一个新的扩展，为一个产品添加了多个序列号 ( [http://www.modifymage.com/instructions/serial-codes](http://www.modifymage.com/instructions/serial-codes) )。一切都很好，除非您尝试购买其中一件商品。它为您提供了一个使用默认主题的成功页面。

就后端而言，一切似乎都已正确设置。我已经联系了创作者，但我怀疑他们会提供任何支持。

此外，当我查看源代码时，它说它引用了正确的主题，但是当“检查元素”时它告诉我它使用默认主题。

有任何想法吗？我认为这是一个模板问题，但成功页面使用了自定义主题的 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:47:08.233

这不太可能与我们的扩展有任何关系。我们的扩展不会以任何方式与前端主题交互。

在管理面板中，请先访问：

系统 > 配置 > 常规 > 设计

并检查包和主题部分下的设置。请参阅此论坛帖子以获取与您遇到的问题完全一样的示例以及如何解决该问题：

[http://www.magentocommerce.com/boards/viewthread/281457/](http://www.magentocommerce.com/boards/viewthread/281457/)

如果一切设置正确，接下来尝试禁用我们的扩展程序的输出，看看问题是否消失。你可以在这里做到这一点：

系统 > 配置 > 高级 > 禁用模块输出

禁用 Mmsmods_Serialcodes。如果这不能解决问题，请确保设计文件 template/checkout/success.phtml 位于您的设计主题文件夹中。

我希望这会有所帮助。如果您仍有问题，或者您有任何其他问题或疑虑，请再次通知我们的支持部门。

# class - 为什么我不能从另一个 Groovy 类实例化一个 Groovy 类？

> ID：13993611
> 
> 赞同：4
> 
> 时间：2012-12-21T16:21:17.233
> 
> 标签：class, groovy, classloader, instance

我有两节课。一.groovy：

```
class One {

  One() {}

  def someMethod(String hey) {
    println(hey)
  }
} 
```

和两个.groovy：

```
class Two {

  def one

  Two() {
    Class groovy = ((GroovyClassLoader) this.class.classLoader).parseClass("One.groovy")
    one = groovy.newInstance()
    one.someMethod("Yo!")
  }
} 
```

我用这样的东西实例化两个：

```
GroovyClassLoader gcl = new GroovyClassLoader();
Class cl = gcl.parseClass(new File("Two.groovy"));
Object instance = cl.newInstance(); 
```

但现在我明白了`groovy.lang.MissingMethodException: No signature of method: script13561062248721121730020.someMethod() is applicable for argument types: (java.lang.String) values: [Yo!]`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:55:21.027

似乎是由于调用了 groovy 类加载器方法而发生的：[字符串之一](http://groovy.codehaus.org/gapi/groovy/lang/GroovyClassLoader.html#parseClass%28java.lang.String%29)是解析文本格式的脚本。使用`File`这里工作的一个：

```
class Two {

  def one

  Two() {
    Class groovy = ((GroovyClassLoader) this.class.classLoader).parseClass("One.groovy")
    assert groovy.superclass == Script // whoops, not what we wanted

    Class groovy2 = ((GroovyClassLoader) this.class.classLoader).parseClass(new File("One.groovy"))
    one = groovy2.newInstance()
    assert one.class == One // now we are talking :-)

    one.someMethod("Yo!") // prints fine

  }
} 
```

# java - 重新验证/重新绘制按钮面板的问题

> ID：13993612
> 
> 赞同：1
> 
> 时间：2012-12-21T16:21:20.673
> 
> 标签：java, swing, jbutton, layout-manager, repaint

我已经在谷歌上搜索了几个小时，尝试了一百万种不同的细微变化，但都无济于事，所以我认为最好的选择是挑选比我更熟练的人的大脑。

我正在编写一个从数据库加载一堆按钮的类，目标是让用户能够根据自己的喜好排列按钮，但是，由于某种原因，我似乎无法让框架重新验证或重新粉刷。按钮会四处移动，但不会像我编码的那样重新排列。该组织似乎工作正常，即释放鼠标按钮时进行重新排列所涉及的代码，只是组件将仅停留在它们被拖放的位置，即使它们在各自的列表中重新排序。

代码很长，我不想发布整个课程，因为它可能会关闭一些人，但我不知道我在哪里犯了错误，所以我认为发布代码最符合我的利益整件事情。主要关注的领域是`mouseReleased(MouseEvent e) {...}`/`repaint()`方法`refresh()`，但是，我可能在其他地方遗漏了一些东西。

tl; dr：我基本上只是`setBounds()`在用户按照他们想要的顺序拖放按钮后尝试执行 a ，但按钮保持在它们被拖放的同一位置，并且不会`revalidate()`or `repaint()`。我什`removeAll`至无法清除组件面板并重新加载。

提前谢谢你。这是我的代码：

```
public class AdminButtonEditor extends javax.swing.JFrame {
    public AdminButtonEditor(OrderView parent) { ...
        ...
        Component[] components = buttonsPanel.getComponents();
        for (int i = 0; i < components.length; i++) {
            Component c = components[i];
            if (c instanceof JButton) {
                JButton jb = (JButton) c;
                jb.setFocusable(false);
                buttons.add(new MyJButton(...));
            }
        }
        for (int i = 0; i < buttons.size(); i++) {
            buttons.get(i).addTo(editPanel);
            buttons.get(i).orderIndex=modButtonList.get(i).menuModifier.getViewOrderValue();
            buttons.get(i).idx=i;
        }
        EventHandler eh = new EventHandler();
        addWindowListener(eh);
        editPanel.addMouseMotionListener(eh);
        editPanel.addMouseListener(eh);
        contentPane.add(editPanel, BorderLayout.CENTER);
    }
    protected void refresh() {
        if (!buttons.isEmpty() && buttons.get(0) != null) {
            contentPane.remove(editPanel);
            editPanel.removeAll();
            for (int i = 0; i < buttons.size(); i++) {
                MyJButton s = buttons.get(i);
                s.addTo(editPanel);
            }
            contentPane.add(editPanel, BorderLayout.CENTER);
            editPanel.repaint();
        }
    }
    public void paint(Graphics g) {
       refresh();
       super.paint(g);
    }
    private int getSelectionIndex(int x, int y) {
        int s=-1;
        for (int i=buttons.size()-1; i>=0;i--){
            if (buttons.get(i).contains(x, y)) {
                s = i;
                break;
            }
        }
        return s;
    }
private class EventHandler implements MouseInputListener,WindowListener, ActionListener {
    private int selectionIndex, startX, startY, lastX, lastY;
    private MyJButton selected;
    private boolean moving=false;
    ....
    ....
    public void mouseReleased(MouseEvent e) {
        if (moving){
            setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
            moving=false;
            int dropX=e.getX();
            int dropY=e.getY();
            int row = dropY/selected.height;
            int col = dropX/selected.width;
            int idx=(row*3+col)-1;
            int oldIdx=buttons.indexOf(selected);
            insertIntoList(idx,oldIdx);
         }
        if (selected!=null){
            selected.unHighLight();
            selected=null;
        }

        Collections.sort(buttons);
        for (int i=0;i<buttons.size();i++){
        //modButtonList.get(buttons.get(i).idx).menuModifier.setViewOrderValue(buttons.get(i).orderIndex);
        }
        editPanel.validate();
        repaint();
    }

    private void insertIntoList(int idx, int oldIdx) {
        MyJButton temp = buttons.get(idx);
        int tempid=buttons.get(idx).idx;
        buttons.set(idx, new MyJButton(selected.text,selected.x,selected.y,selected.width,selected.height,selected.idx));
        buttons.get(idx).orderIndex=temp.orderIndex;
        if (idx<oldIdx){
            int id;
            for (int i=oldIdx;i>idx+1;i--){
                id=buttons.get(i).orderIndex;
                buttons.set(i, new MyJButton(buttons.get(i-1).text,buttons.get(i-1).x,buttons.get(i-1).y,buttons.get(i-1).width,buttons.get(i-1).height,buttons.get(i-1).idx));
                buttons.get(i).orderIndex=id;
            }
            id = buttons.get(idx+1).orderIndex;
            buttons.set(idx+1,new MyJButton(temp.text,temp.x,temp.y,temp.width,temp.height,temp.idx));
            buttons.get(idx+1).orderIndex=id;
        } else if (idx>oldIdx) {
            int id;
            for (int i=oldIdx;i<idx-1;i++){
                id=buttons.get(i).orderIndex;
                buttons.set(i, new MyJButton(buttons.get(i+1).text,buttons.get(i+1).x,buttons.get(i+1).y,buttons.get(i+1).width,buttons.get(i+1).height,buttons.get(i+1).idx));
                buttons.get(i).orderIndex=id;
            }
            id = buttons.get(idx-1).orderIndex;
            buttons.set(idx-1,new MyJButton(temp.text,temp.x,temp.y,temp.width,temp.height,temp.idx));
            buttons.get(idx-1).orderIndex=id;;
        } else {
            buttons.get(idx).x=buttons.get(idx).originx;
            buttons.get(idx).y=buttons.get(idx).originy;
        }
        repaint();
    }
    public void mouseDragged(MouseEvent e) {
        if (moving) {
            Graphics g = editPanel.getGraphics();
            g.setColor(Color.black);
            g.drawLine(selected.getXPos(), 0, selected.getXPos(),editPanel.getWidth());
            g.drawLine(0, selected.getYPos(), editPanel.getHeight(), selected.getYPos());
            selected.moveBy(e.getX()-lastX, e.getY()-lastY);
            g.setXORMode(Color.black);

            g.drawLine(selected.getXPos(), 0, selected.getXPos(), editPanel.getWidth());
            g.drawLine(0, selected.getYPos(), editPanel.getHeight(), selected.getYPos());

            lastX=e.getX();
            lastY=e.getY();
            repaint();
        }
    }
    ....
}
  private class MyJButton extends JButton implements Comparable {
    private int orderIndex,idx;
    private int x, y, width, height,originx,originy;
    private String text;
    public Border DEFAULT_BORDER;// new SoftBevelBorder(BevelBorder.RAISED);
    public Border SELECT_BORDER = BorderFactory.createLineBorder(Color.RED, 3, true);

    public MyJButton(String text, int x, int y, int width, int height) {
        ....
        setFocusable(false);
    }
    public MyJButton(String text, int x, int y, int width, int height,int idx) {....}

    public void addTo(JPanel p) {
        setBounds(x, y, width, height);
        p.add(this);
    }

    @Override
    public boolean contains(int x, int y) {
        int x1 = x, y1 = y;
        if (x1 >= this.x && y1 >= this.y && x1 <= this.x + width && y1 <= this.y + height) {
            return true;
        } else {
            return false;
        }
    }

    @Override
    public void setSize(int w, int h) {
        width = w;
        height = h;
    }
    ....
    public void moveBy(int dx, int dy) {
        x += dx;
        y += dy;
    }

    @Override
    public void resize(int newWidth, int newHeight) {
        this.width = newWidth;
        this.height = newHeight;
        setBounds(x, y, width, height);
    }

    public int compareTo(Object o) {
        MyJButton mjb = (MyJButton)o;
        return this.idx-mjb.idx;
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:39:41.320

+1 对 GagandeepBalis 的评论。

好的，所以我觉得这很酷，并决定进一步研究它。

我想出了一些让它工作所需的逻辑，也许不是最好的，但是......：

1）我们需要使我们`JButton`的 s 可拖动（谢谢@camickr 和他的`DragLayout`）:)

2) 当一个`JButton`s 被拖拽而不是 ie on 时，`mouseReleased(..)`我们应该检查我们拖拽的按钮是否与其他按钮发生碰撞

3）我们通过获取 JButton 图像并计算我们拖动的 有`JButton`多少不透明像素覆盖另一个按钮来检查 a 是否与另一个碰撞。`JButton`

4）对碰撞次数进行排序并找到最高的，这将被使用，这样我们就可以看到在哪里插入`JButton`我们拖动的。即它将由碰撞最多的组件插入。

5）对持有按钮的按钮进行排序`ArrayList`以匹配更改

6）删除所有按钮并使用数组重新添加它们（因此它们将被重新排序）。

这是一个示例（大多数代码发生在被覆盖的`ComponentMover` `mouseReleased(..)`方法中）：

在拖动任何东西之前：

![在此处输入图像描述](../Images/133b9a67383ae6da7da49a4fc49ac58a.png)

将按钮 4 拖到按钮 1 上并松开鼠标按钮后：

![在此处输入图像描述](../Images/fa627a4489115efe030cdd17ce0da586.png)

```
import java.awt.Component;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GraphicsEnvironment;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.Window;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class DragButtons {

    ArrayList<JButton> buttons = new ArrayList<>();

    public DragButtons() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DragButtons();
            }
        });
    }

    private void initComponents() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JPanel panel = new JPanel(new GridLayout(2, 2));

        ComponentMover cm = new ComponentMover() {
            @Override
            public void mouseReleased(MouseEvent e) {
                super.mouseReleased(e);
                HashMap<Integer, JButton> collisions = new HashMap<>();
                JButton draggedButton = (JButton) e.getSource();

                for (JButton btn : buttons) {//iterate through all buttons and get the number of collsions of each
                    if (btn != draggedButton) {//dont chck button we were dragging
                        int col = checkPerPixelCollision(draggedButton, btn);
                        System.out.println("Button " + btn.getText());
                        System.out.println(col);
                        collisions.put(col, btn);
                    }
                }
                //lets get the button which had most collisions
                int maxCollisions = 0;
                JButton intersectingButton = null;
                for (Map.Entry<Integer, JButton> entry : collisions.entrySet()) {
                    Integer collisionCount = entry.getKey();
                    JButton button = entry.getValue();
                    if (collisionCount > maxCollisions) {
                        maxCollisions = collisionCount;
                        intersectingButton = button;
                    }
                }

                boolean reLayout = false;

                if (maxCollisions > 0) {//check if there was any
                    System.out.println("Button " + draggedButton.getText() + " is intersecting more of Button " + intersectingButton.getText());
                    System.out.println("Collisions: " + maxCollisions);
                    reLayout = true;
                } else {
                    System.out.println("No change made");
                    reLayout = false;
                }

                ArrayList<JButton> tmpButtons = (ArrayList<JButton>) buttons.clone();//create clone of buttons

                if (reLayout) {//a button as moved and panel needs to be layed out
                    buttons.clear();//clear old buttons

                    for (JButton b : tmpButtons) {//re-order jbuttons
                        if (b == intersectingButton) {
                            buttons.add(draggedButton);
                        } else if (b == draggedButton) {
                            buttons.add(intersectingButton);
                        } else {
                            buttons.add(b);
                        }
                    }
                    panel.removeAll();//remove all buttons
                    for (JButton btn : buttons) {//iterate through all buttons and get the number of collsions of each
                        panel.add(btn);//re-add buttons according to arraylist
                    }
                    panel.revalidate();
                    panel.repaint();
                    //re-order the Array of buttons to fit
                    //remove all button and re add them using sorted array
                }

            }
        };

        for (int i = 0; i < 4; i++) {
            JButton b = new JButton(String.valueOf(i + 1));
            buttons.add(b);
            panel.add(b);
            cm.registerComponent(b);
        }

        frame.add(panel);

        frame.pack();
        frame.setVisible(true);

    }

    public HashSet<String> getMask(JButton e) {
        HashSet<String> mask = new HashSet<>();
        int pixel, a;
        BufferedImage bi = null;
        try {
            bi = componentToImage(e, e.getBounds()); //gets the current image being shown
        } catch (IOException ex) {
            Logger.getLogger(DragButtons.class.getName()).log(Level.SEVERE, null, ex);
        }
        for (int i = 0; i < bi.getWidth(); i++) { // for every (x,y) component in the given box, 
            for (int j = 0; j < bi.getHeight(); j++) {
                pixel = bi.getRGB(i, j); // get the RGB value of the pixel
                a = (pixel >> 24) & 0xff;
                if (a != 0) {  // if the alpha is not 0, it must be something other than transparent
                    mask.add((e.getX() + i) + "," + (e.getY() - j)); // add the absolute x and absolute y coordinates to our set
                }
            }
        }
        return mask;  //return our set
    }

    public static BufferedImage componentToImage(Component component, Rectangle region) throws IOException {
        BufferedImage img = new BufferedImage(component.getWidth(), component.getHeight(), BufferedImage.TYPE_INT_ARGB_PRE);
        Graphics g = img.getGraphics();
        g.setColor(component.getForeground());
        g.setFont(component.getFont());
        component.paintAll(g);
        ImageIO.write(img, "png", new File("c:/saved.png"));
        return img;
    }

    // Returns true if there is a collision between object a and object b   
    public int checkPerPixelCollision(JButton b, JButton b2) {
        // This method detects to see if the images overlap at all. If they do, collision is possible
        int ax1 = (int) b2.getX();
        int ay1 = (int) b2.getY();

        int ax2 = ax1 + (int) b2.getWidth();
        int ay2 = ay1 + (int) b2.getHeight();

        int bx1 = (int) b.getX();
        int by1 = (int) b.getY();

        int bx2 = bx1 + (int) b.getWidth();

        int by2 = by1 + (int) b.getHeight();

        if (by2 < ay1 || ay2 < by1 || bx2 < ax1 || ax2 < bx1) {
            return 0; // Collision is impossible.
        } else { // Collision is possible.
            // get the masks for both images
            HashSet<String> maskPlayer1 = getMask(b2);
            HashSet<String> maskPlayer2 = getMask(b);
            maskPlayer1.retainAll(maskPlayer2);  // Check to see if any pixels in maskPlayer2 are the same as those in maskPlayer1
            if (maskPlayer1.size() > 0) {  // if so, than there exists at least one pixel that is the same in both images, thus
                return maskPlayer1.size();
            }
        }
        return 0;
    }
}

class ComponentMover extends MouseAdapter {

    private Insets dragInsets = new Insets(0, 0, 0, 0);
    private Dimension snapSize = new Dimension(1, 1);
    private Insets edgeInsets = new Insets(0, 0, 0, 0);
    private boolean changeCursor = true;
    private boolean autoLayout = false;
    private Class destinationClass;
    private Component destinationComponent;
    private Component destination;
    private Component source;
    private Point pressed;
    private Point location;
    private Cursor originalCursor;
    private boolean autoscrolls;
    private boolean potentialDrag;

    /**
     * Constructor for moving individual components. The components must be
     * regisetered using the registerComponent() method.
     */
    public ComponentMover() {
    }

    /**
     * Constructor to specify a Class of Component that will be moved when drag
     * events are generated on a registered child component. The events will be
     * passed to the first ancestor of this specified class.
     *
     * @param destinationClass the Class of the ancestor component
     * @param component the Components to be registered for forwarding drag
     * events to the ancestor Component.
     */
    public ComponentMover(Class destinationClass, Component... components) {
        this.destinationClass = destinationClass;
        registerComponent(components);
    }

    /**
     * Constructor to specify a parent component that will be moved when drag
     * events are generated on a registered child component.
     *
     * @param destinationComponent the component drage events should be
     * forwareded to
     * @param components the Components to be registered for forwarding drag
     * events to the parent component to be moved
     */
    public ComponentMover(Component destinationComponent, Component... components) {
        this.destinationComponent = destinationComponent;
        registerComponent(components);
    }

    /**
     * Get the auto layout property
     *
     * @return the auto layout property
     */
    public boolean isAutoLayout() {
        return autoLayout;
    }

    /**
     * Set the auto layout property
     *
     * @param autoLayout when true layout will be invoked on the parent
     * container
     */
    public void setAutoLayout(boolean autoLayout) {
        this.autoLayout = autoLayout;
    }

    /**
     * Get the change cursor property
     *
     * @return the change cursor property
     */
    public boolean isChangeCursor() {
        return changeCursor;
    }

    /**
     * Set the change cursor property
     *
     * @param changeCursor when true the cursor will be changed to the
     * Cursor.MOVE_CURSOR while the mouse is pressed
     */
    public void setChangeCursor(boolean changeCursor) {
        this.changeCursor = changeCursor;
    }

    /**
     * Get the drag insets
     *
     * @return the drag insets
     */
    public Insets getDragInsets() {
        return dragInsets;
    }

    /**
     * Set the drag insets. The insets specify an area where mouseDragged events
     * should be ignored and therefore the component will not be moved. This
     * will prevent these events from being confused with a MouseMotionListener
     * that supports component resizing.
     *
     * @param dragInsets
     */
    public void setDragInsets(Insets dragInsets) {
        this.dragInsets = dragInsets;
    }

    /**
     * Get the bounds insets
     *
     * @return the bounds insets
     */
    public Insets getEdgeInsets() {
        return edgeInsets;
    }

    /**
     * Set the edge insets. The insets specify how close to each edge of the
     * parent component that the child component can be moved. Positive values
     * means the component must be contained within the parent. Negative values
     * means the component can be moved outside the parent.
     *
     * @param edgeInsets
     */
    public void setEdgeInsets(Insets edgeInsets) {
        this.edgeInsets = edgeInsets;
    }

    /**
     * Remove listeners from the specified component
     *
     * @param component the component the listeners are removed from
     */
    public void deregisterComponent(Component... components) {
        for (Component component : components) {
            component.removeMouseListener(this);
        }
    }

    /**
     * Add the required listeners to the specified component
     *
     * @param component the component the listeners are added to
     */
    public void registerComponent(Component... components) {
        for (Component component : components) {
            component.addMouseListener(this);
        }
    }

    /**
     * Get the snap size
     *
     * @return the snap size
     */
    public Dimension getSnapSize() {
        return snapSize;
    }

    /**
     * Set the snap size. Forces the component to be snapped to the closest grid
     * position. Snapping will occur when the mouse is dragged half way.
     */
    public void setSnapSize(Dimension snapSize) {
        if (snapSize.width < 1
                || snapSize.height < 1) {
            throw new IllegalArgumentException("Snap sizes must be greater than 0");
        }

        this.snapSize = snapSize;
    }

    /**
     * Setup the variables used to control the moving of the component:
     *
     * source - the source component of the mouse event destination - the
     * component that will ultimately be moved pressed - the Point where the
     * mouse was pressed in the destination component coordinates.
     */
    @Override
    public void mousePressed(MouseEvent e) {
        source = e.getComponent();
        int width = source.getSize().width - dragInsets.left - dragInsets.right;
        int height = source.getSize().height - dragInsets.top - dragInsets.bottom;
        Rectangle r = new Rectangle(dragInsets.left, dragInsets.top, width, height);

        if (r.contains(e.getPoint())) {
            setupForDragging(e);
        }
    }

    private void setupForDragging(MouseEvent e) {
        source.addMouseMotionListener(this);
        potentialDrag = true;

        //  Determine the component that will ultimately be moved

        if (destinationComponent != null) {
            destination = destinationComponent;
        } else if (destinationClass == null) {
            destination = source;
        } else //  forward events to destination component
        {
            destination = SwingUtilities.getAncestorOfClass(destinationClass, source);
        }

        pressed = e.getLocationOnScreen();
        location = destination.getLocation();

        if (changeCursor) {
            originalCursor = source.getCursor();
            source.setCursor(Cursor.getPredefinedCursor(Cursor.MOVE_CURSOR));
        }

        //  Making sure autoscrolls is false will allow for smoother dragging of
        //  individual components

        if (destination instanceof JComponent) {
            JComponent jc = (JComponent) destination;
            autoscrolls = jc.getAutoscrolls();
            jc.setAutoscrolls(false);
        }
    }

    /**
     * Move the component to its new location. The dragged Point must be in the
     * destination coordinates.
     */
    @Override
    public void mouseDragged(MouseEvent e) {
        Point dragged = e.getLocationOnScreen();
        int dragX = getDragDistance(dragged.x, pressed.x, snapSize.width);
        int dragY = getDragDistance(dragged.y, pressed.y, snapSize.height);

        int locationX = location.x + dragX;
        int locationY = location.y + dragY;

        //  Mouse dragged events are not generated for every pixel the mouse
        //  is moved. Adjust the location to make sure we are still on a
        //  snap value.

        while (locationX < edgeInsets.left) {
            locationX += snapSize.width;
        }

        while (locationY < edgeInsets.top) {
            locationY += snapSize.height;
        }

        Dimension d = getBoundingSize(destination);

        while (locationX + destination.getSize().width + edgeInsets.right > d.width) {
            locationX -= snapSize.width;
        }

        while (locationY + destination.getSize().height + edgeInsets.bottom > d.height) {
            locationY -= snapSize.height;
        }

        //  Adjustments are finished, move the component

        destination.setLocation(locationX, locationY);
    }

    /*
     *  Determine how far the mouse has moved from where dragging started
     *  (Assume drag direction is down and right for positive drag distance)
     */
    private int getDragDistance(int larger, int smaller, int snapSize) {
        int halfway = snapSize / 2;
        int drag = larger - smaller;
        drag += (drag < 0) ? -halfway : halfway;
        drag = (drag / snapSize) * snapSize;

        return drag;
    }

    /*
     *  Get the bounds of the parent of the dragged component.
     */
    private Dimension getBoundingSize(Component source) {
        if (source instanceof Window) {
            GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
            Rectangle bounds = env.getMaximumWindowBounds();
            return new Dimension(bounds.width, bounds.height);
        } else {
            return source.getParent().getSize();
        }
    }

    /**
     * Restore the original state of the Component
     */
    @Override
    public void mouseReleased(MouseEvent e) {
        super.mouseReleased(e);
        if (!potentialDrag) {
            return;
        }

        source.removeMouseMotionListener(this);
        potentialDrag = false;

        if (changeCursor) {
            source.setCursor(originalCursor);
        }

        if (destination instanceof JComponent) {
            ((JComponent) destination).setAutoscrolls(autoscrolls);
        }

        //  Layout the components on the parent container

        if (autoLayout) {
            if (destination instanceof JComponent) {
                ((JComponent) destination).revalidate();
            } else {
                destination.revalidate();
            }
            destination.repaint();
        }
    }
} 
```

# python - 将单词合并成一行

> ID：13993617
> 
> 赞同：2
> 
> 时间：2012-12-21T16:21:34.537
> 
> 标签：python, text

我目前正在使用 Python v2.6 并尝试将单词合并成一行。我的代码应该从文本文件中读取数据，其中我有两行数据，它们都是字符串。然后，它每次都取第二行数据，即句子的单词，它们用分隔符字符串分隔，例如：

在 .txt 内：

```
"delimiter_string"
"row_1_data" "row_2_data"  
"row_1_data" "row_2_data"  
"row_1_data" "row_2_data"  
"row_1_data" "row_2_data"  
"row_1_data" "row_2_data"  
"delimiter_string" 
"row_1_data" "row_2_data"  
"row_1_data" "row_2_data"  
... 
```

那些“row_2_data”将在以后加起来一个句子。很抱歉，顺便说一句，介绍太长了。

这是我的代码：

```
import sys
import re

newLine = ''

for line in sys.stdin:

    word = line.split(' ')[1]

    if word == '<S>+BSTag': 
        continue

    elif word == '</S>+ESTag':
        print newLine
        newLine = ''
        continue

    else:
        w = re.sub('\[.*?]', '', word)

        if newLine == '':
            newLine += w
        else:
            newLine += ' ' + w 
```

“BSTag”是“Sentence Begins”的标签，“ESTag”是“Sentence Ends”的标签：即所谓的“分隔符”。“re.sub”用于特殊目的，据我检查它可以工作。

问题是，当我在 linux 的命令行中使用以下命令执行这个 python 脚本时： $ cat file.txt | 脚本.py | 少，我看不到任何输出，而只是一个空白文件。

对于不熟悉linux的人来说，我猜这个问题与终端执行无关，所以你可以忽略这部分。简单地说，代码没有按预期工作，我找不到一个错误。

任何帮助将不胜感激，并感谢您阅读长篇文章:)

* * *

好的，问题解决了，实际上是语料库错误而不是编码错误。在文本文件中检测到一个非常奇怪的条目，这导致了问题。删除它解决了它。如果您想要类似的文本处理，您可以使用这两种方法：我的方法和“snurre”提供的方法。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:36:35.847

```
def foo(lines):
    output = []
    for line in lines:
        words = line.split()
        if len(words) < 2:
            word = words[0]
        else:
            word = words[1]
        if word == '</S>+ESTag':
            yield ' '.join(output)
            output = []
        elif word != '<S>+BSTag':
            output.append(words[1])

for sentence in foo(sys.stdin):
    print sentence 
```

你的正则表达式有点时髦。据我所知，它正在替换（包括）一对`[`and之间`]`的任何内容`''`，因此它最终会打印空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:35:03.593

我认为问题在于脚本没有被执行（除非你只是在你发布的代码中排除了[shebang ）](http://docs.python.org/2/using/unix.html#miscellaneous)

试试这个

```
cat file.txt | python script.py | less 
```

# jquery - 如何从日期选择器设置语言环境格式？

> ID：13993619
> 
> 赞同：13
> 
> 时间：2012-12-21T16:21:44.037
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

如何根据用户的语言环境在 jQuery UI 的 datepicker 中设置日期格式？

我得到源html：

```
<script type="text/javascript">
    $(function() {
        $(".datefield2").datepicker($.datepicker.regional['de']);
    });
</script>
<form action="/Home/TestDate" method="post">    <input class="datefield2 hasDatepicker valid" name="date" value="21.12.2012" type="text" id="date">
    <input type="submit" value="send">
</form> 
```

如果在我得到的日期选择器中选择一个日期`12/21/2012`，但是我需要`21.12.2012`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-21T16:28:32.697

使用[`dateFormat`选项](http://api.jqueryui.com/datepicker/#option-dateFormat)更改为自定义格式

```
$(function() {
    $(".datefield2").datepicker($.datepicker.regional['de']);
    $(".datefield2").datepicker('option','dateFormat','dd.mm.yy');
}); 
```

* * *

真正的问题是您需要手动包含本地化文件。

它们可以在[https://github.com/jquery/jquery-ui/tree/master/ui/i18n](https://github.com/jquery/jquery-ui/tree/master/ui/i18n)
找到 。德语专用的是[https://github.com/jquery/jquery-ui/blob/master/ ui/i18n/datepicker-de.js](https://github.com/jquery/jquery-ui/blob/master/ui/i18n/datepicker-de.js)

演示（*完全本地化*）可以在[http://jsfiddle.net/gaby/h07ny9ep/看到](http://jsfiddle.net/gaby/h07ny9ep/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:27:09.193

您可以像这样设置日期格式：

```
 $(".datefield2").datepicker({ "dateFormat": "dd.mm.yy"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-18T12:20:30.150

网络上的 JQuery 文档似乎在隐藏日期选择器的 i18n 文件的位置，例如

[jQuery UI datepicker >= 1.11.0 的 i18n 文件在哪里](https://stackoverflow.com/questions/25765124/where-are-the-i18n-files-of-jquery-ui-datepicker-1-11-0)

截至此发布链接：

[https://raw.githubusercontent.com/jquery/jquery-ui/master/ui/i18n/datepicker-de.js](https://raw.githubusercontent.com/jquery/jquery-ui/master/ui/i18n/datepicker-de.js)

似乎是有效的。如果我把它包括在内，它本身就不起作用。我最终使用了[http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/i18n/jquery-ui-i18n.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/i18n/jquery-ui-i18n.min.js)这与我使用的 1.12 jquery 版本不同，但它似乎工作。

请注意，我在这里使用 iso 日期格式 2017-03-18 作为 yy-mm-dd 而不是德语语言环境样式。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>jQuery UI Datepicker - Default functionality</title>
<link rel="stylesheet"
    href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/i18n/jquery-ui-i18n.min.js"></script>
<script>
    $(function() {
        // https://stackoverflow.com/questions/494958/how-do-i-localize-the-jquery-ui-datepicker
        // https://stackoverflow.com/questions/13993619/how-to-set-locale-format-from-datepicker
        $(".datepicker").datepicker($.datepicker.regional['de']);
        $(".datepicker").datepicker('option','dateFormat','yy-mm-dd')
    });
</script>
</head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T08:59:20.740

由于似乎没有现成的语言环境信息，我决定使用一些不同的方法：我只使用 datepicker 来选择日期并从中检索日期，但为了显示，我使用普通的 div 和[Date .toLocaleDateString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)。这样，我就不必费心检索格式或更糟糕的情况——我自己提供它们。

[JSFiddle](https://jsfiddle.net/h1yba7en/)

HTML：

```
<div style="position:relative">
  <div id="date-text">

  </div>
  <div style="position: absolute; left: 0; top: 0">
    <input type="text" size="10" id="dt" style="opacity:0"/>
  </div>
</div> 
```

JS：

```
var today = new Date();
today.setHours(0,0,0,0);
$("#dt").datepicker({defaultDate: today}).on('change', function() {
  $("#date-text").html($("#dt").datepicker("getDate").toLocaleDateString());
});
$("#date-text").html(today.toLocaleDateString()); 
```

# c - C中的递归函数（2个子数组）

> ID：13993620
> 
> 赞同：0
> 
> 时间：2012-12-21T16:21:48.530
> 
> 标签：c, recursion, integer, partitioning, knapsack-problem

我们在一个类中有一个代码，如下所示：

```
int SubsetSum(int arr[], int idx, int n, int S)
{
    if (S == 0)
        return 1; // This is stopping condition #1.

    if (S < 0 || n == 0)
        return 0; // This is stopping condition #2.

￼    return SubsetSum(arr, idx + 1, n - 1, S - arr[idx])
        || SubsetSum(arr, idx + 1, n - 1, S);
} 
```

如果数组可以分成两个相等和的子数组（即数组/2 的和），则此代码返回 1。我想扩展这个函数，以便它返回两个带有数字的数组。

对于它的输入`1,2,2,3,0`应该返回： arr1: 2,2 arr2: 3,1

我怎样才能做到这一点？我不能使用循环，只能使用递归函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:25:38.663

您的前提条件不正确：您写了

> 如果数组可以分成两个等和的子数组，则此代码返回 1。

这不是真的。测试

```
int main() {
   int a[5];
   a[0] = 1; a[1] = 0; a[2] = 0; a[3] = 0; a[4] = 0;

   int const r1 = SubsetSum(a, 0, 5, 1);
   printf("%d\n", r1);

   return 0;
} 
```

这将返回 '1' - 即使它不能被分成总和相等的子数组。

请考虑您的代码并准确描述您想要的内容。

# c++ - 将字符串写入 ostream

> ID：13993622
> 
> 赞同：5
> 
> 时间：2012-12-21T16:21:56.937
> 
> 标签：c++, gcc

当我尝试编译下面的代码时（在 Qt 4.8 中使用 llvm-g++-4.2 (GCC) 4.2.1），我收到以下错误：

```
../GLWidget.cpp:24:   instantiated from here
../GLWidget.cpp:24: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available 
```

这个错误是什么意思，我应该怎么做才能修复它？

源代码：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

void testOStream(){
    filebuf fb;
    fb.open ("test.txt",ios::out);
    std::ostream os(&fb);
    std::string test("test");
    os << test; // This line has the problem
    fb.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:30:52.277

如果您使用的是 C++11 之前的 C++ 版本，您可能需要添加`#include <ostream>`到您的程序中。

只有 C++11 和更高版本才`<iostream>`需要`#include <ostream>`.

### 标题`<iostream>`概要

C++2003：

> ```
> namespace std {
>    extern istream cin;
>    extern ostream cout;
>    extern ostream cerr;
>    extern ostream clog;
> 
>    extern wistream wcin;
>    extern wostream wcout;
>    extern wostream wcerr;
>    extern wostream wclog; 
> ```
> 
> }

C++2011：

> ```
> #include <ios>
> #include <streambuf>
> #include <istream>
> #include <ostream>
> 
> namespace std {
>     extern istream cin;
>     extern ostream cout;
>     extern ostream cerr;
>     extern ostream clog;
> 
>     extern wistream wcin;
>     extern wostream wcout;
>     extern wostream wcerr;
>     extern wostream wclog;
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:27:47.297

确保你`#include <ostream>`. 早于 C++11，`<ostream>`不保证包含在`<iostream>`. 的定义`os`很好的原因可能是因为它通常定义了哪些标准库头文件包括其他标准库头文件（除非指定）。在您的实现中，`<iostream>`可能包含了 的定义`std::ostream`，但没有包含它的函数。但是，如果您正在编译 C++11，它*应该*包含所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:31:13.723

正如@ChadCambell 指出的那样，问题原来是Qt 4.8 使用-mmacosx-version-min=10.5，但应该是-mmacosx-version-min=10.7

我在这里找到了更多有关该问题的使用信息：

[http://qt-project.org/forums/viewthread/19106/P15](http://qt-project.org/forums/viewthread/19106/P15)

更新到 Qt 5.0 也解决了这个问题

# c# - 数据库数据库失败 = DatabaseFactory.CreateDatabase();

> ID：13993628
> 
> 赞同：1
> 
> 时间：2012-12-21T16:22:26.267
> 
> 标签：c#, asp.net, sql, database, factory

失败了`Database db = DatabaseFactory.CreateDatabase();`，我不知道为什么。我使用声明的手动参数执行了存储的过程，她工作得很好。虽然，我没有收到错误或任何问题，所以我不确定出了什么问题。我在每一行的代码中插入一个中断，然后在该`Database db = DatabaseFactory.CreateDatabase();`行之后停止，在我告诉 IDE 继续之后，它会跳过该行并且函数结束。

作为记录，我的参考资料也很可靠。我已经从我完成的另一个项目中蚕食了这段代码，所以我可能只是错过了一些愚蠢的东西。无论如何，这是代码：

```
public class PullDebtor
{
    public static DataTable ClientNumber(string strClientID)
    {

        DataSet dsDebtor = new DataSet();
        dsDebtor.Tables.Add("Debtors");
        DbCommand dbCommand = null;

        try
        {

            Database db = DatabaseFactory.CreateDatabase();

            string sqlCommand = "sp_PullClientID";
            DbCommand dbCommand1 = db.GetSqlStringCommand(sqlCommand);
            dbCommand1.CommandType = CommandType.StoredProcedure;
            db.AddInParameter(dbCommand1, "@ClientID", DbType.String, strClientID);

            db.ExecuteNonQuery(dbCommand1);

            dsDebtor = db.ExecuteDataSet(dbCommand1);
        }
        catch
        {
            return dsDebtor.Tables[0];
        }
        finally
        {

        }
        return dsDebtor.Tables[0];

    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:46:12.763

你编辑过你的`.config`部分吗？你需要这样的东西：

```
<section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" /> 
```

您还需要一个指向您在连接字符串部分中定义的连接字符串的配置部分：

```
<dataConfiguration defaultDatabase="Connection String" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:32:16.297

您可能知道为什么没有忽略异常。*很少*`catch { ... }`是一个好主意（它实际上从来都不是一个好主意，但我在给出建议时尽量避免总是/从不）。

 *将你的代码修改成这样，看看你是否还需要帮助：

```
try
{
    Database db = DatabaseFactory.CreateDatabase();

    ...
}
catch(Exception ex)
{
    // this will dump to the output window in VS when running a Debug build.
    // Release logging will require something different
    System.Diagnostics.Debug.WriteLine(ex);

    ...
} 
```*

# user-interface - 如何将按钮连接到 xpce/prolog 中的函数

> ID：13993631
> 
> 赞同：1
> 
> 时间：2012-12-21T16:22:35.550
> 
> 标签：user-interface, swi-prolog, xpce

这是一个按钮：

```
new(B,button(solve, message(@prolog, solve))),
    send(D,display,B),
    send(D, open), 
```

这是一个函数：

```
solve(D, Row, Column) :-
    assert(path([[0, 0], [-1, 0]])),
    track(Row, Column),
    path(P),
    show_track(D,P). 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:44:08.270

这里有一个示例可以帮助您入门：

```
:- use_module(library(pce)).

test:-
    new(D, dialog),
    new(W,  window('Test', size(100, 100))),
    send(D, append, new(B,button(solve, message(@prolog, solve, D, 10, 20)))),
    send(D, below, W),
    send(D, open),
    !.

solve(D, Row, Column) :-
  writeln(solve(D, Row, Column)). 
```

基本上，您必须将参数添加到消息中，在这种情况下，我将 D 用于对话框，将常量 10 和 20 用于 Row 和 Column，然后将它们打印到`solve/3`过程中的控制台。

# java - Velocity 中已弃用的属性

> ID：13993632
> 
> 赞同：2
> 
> 时间：2012-12-21T16:22:37.360
> 
> 标签：java, templates, velocity

我已经编写了非常基本的 Velocity 模板，它使用`#foreach`指令。当我运行它时，我在日志中收到以下消息：

> [警告]directive.foreach.iterator.name 属性已被弃用。它将在 Velocity 2.0 中被删除（连同 $velocityHasNext 本身）。相反，请使用 $foreach.hasNext 从现在开始访问此值。

但问题是**我不使用这个属性**，至少是明确的。我只是`#foreach`以基本形式使用循环，正如[用户指南](http://velocity.apache.org/engine/devel/user-guide.html#Loops)中所示。

下面是产生此日志警告的简单代码。速度版本是 1.7。

```
final Properties properties = new Properties();
VelocityEngine velocityEngine = new VelocityEngine();
velocityEngine.init(properties);

StringWriter stringWriter = new StringWriter();
Map<String, Object> velocityVars = new HashMap<>();
List<Date> dates = new ArrayList<>(); 
dates.add(new Date()); 
dates.add(new Date());
velocityVars.put("dates", dates);
VelocityContext velocityContext = new VelocityContext(velocityVars);

String template =
                "foo\n" +
                "#foreach($d in $dates)\n" +
                "  $d\n" +
                "#end \n" +
                "bar";

velocityEngine.evaluate(velocityContext, stringWriter, "blah", template);
System.out.println(stringWriter.toString()); 
```

所以问题是 - 为什么会记录此警告以及如何构建我的代码以防止它出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T04:38:55.397

`directive.foreach.iterator.name`不是在代码中找到的东西，而是在`velocity.properties`文件中。并且出于向后兼容性的原因，这个已弃用的定义仍然存在于默认配置中。

该警告在指令本身的初始化期间显示`foreach`，因此它不是由您正在执行的操作触发的。您可以放心地忽略此警告，但如果您绝对不想再看到它，您可以：

1.  提高上面的日志记录级别`WARN`
2.  编写您自己的自定义属性文件，或者只是从 Java 中添加您正在创建的对象，为和`Properties`的空值。`directive.foreach.counter.name``directive.foreach.iterator.name``directive.foreach.counter.initial.value`
3.  或者，`org/apache/velocity/runtime/defaults/velocity.properties`从类路径目录中的 velocity jar 中提取，并从中删除不推荐使用的设置。

# javascript - HttpXMLRequest 卡住了

> ID：13993635
> 
> 赞同：0
> 
> 时间：2012-12-21T16:22:49.710
> 
> 标签：javascript

我只是尝试在 JS 中使用 HttpXMLRequest 对象，我有一个基本循环，它从 XML 文件加载名称和年龄并将其放入表中。如果每个同级具有相同的值，则它可以正常加载，但是如果同级中缺少一个元素，它会停止而不是跳过它。这是一些代码。

HTML -

```
(The rest of the XML parser and DTD, html, body etc is up here)
<script>
var x=xmlDoc.getElementsByTagName("person");

document.write("<table border='1'>");
for (i=0;i<x.length;i++)
  { 
  var name = x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue;
  var age = x[i].getElementsByTagName("age")[0].childNodes[0].nodeValue;

  document.write("<tr>");
  document.write("<td>"+name+"</td>");
  document.write("<td>"+age+"</td>");
  document.write("</tr>");
  }
document.write("</table>");
</script> 
```

XML -

```
(The DTD and stuff it up here)
<people>
  <person>
    <name>Jim</name>
    <age>20</age>
  </person>
  <person>
    <name>Bob</name>
  </person>
  <person>
    <name>Tom</name>
    <age>20</age>
  </person>
  <person>
    <name>James</name>
    <age>20</age>
  </person>
  <person>
    <name>Richie</name>
    <age>20</age>
  </person>
</people> 
```

从那个例子来看，一旦到达 bob，HTML 将在写入后停止，我认为每个名字和年龄都需要一个 try/catch 或 if，但我似乎无法放置它以便它工作。有人有什么想法吗？

我试图搜索，但我不知道这个问题叫什么，描述它并没有提出任何问题。

简单地添加“`<age />`或`<age></age>`”不是一种选择，最终我将使用大量的 xml 文件。除非我需要编写一些在它不存在时会自动添加它的东西，否则我想这是可以接受的。

干杯Hombries。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:26:30.537

在尝试访问其子节点之前检查元素是否存在：

```
var personElem = x[i];

var ageElems = personElem.getElementsByTagName("age");

var age = ageElems.length
        ? ageElems[0].firstChild.nodeValue
        : ''; 
```

顺便说一句，使用 JSON 而不是 XML 通常更容易。使用 JSON，您的响应可能如下所示：

```
{
    "people": [
        {
            "name" : "Jim",
            "age" : 20
        },
        {
            "name" : "Bob"
        }
    ]
} 
```

您可以使用点语法访问项目：

```
var age = data.people[0].age; 
```

例如，PHP 有内置的 JSON 编码函数：[`json_encode()`](http://php.net/manual/en/function.json-encode.php).

# javascript - 响应式滑动图库

> ID：13993638
> 
> 赞同：3
> 
> 时间：2012-12-21T16:22:59.663
> 
> 标签：javascript, css, mobile

我正在为移动设备滑动图库制作一个片段。你可以在这里看到它[http://codepen.io/piatra/full/Edtlq](http://codepen.io/piatra/full/Edtlq)

```
[].forEach.call(slides, function(s){
    s.style.width = mainContainer.offsetWidth + 'px';
}); 
```

我的问题：因为内容由多个面板组成，所以它们需要位于右侧的同一行。面板的大小应为屏幕的 100%，因此您一次只能看到一个面板。但我不能将 css 中面板的大小设置为 100%，因为这会将每个面板推到自己的行上。

目前我正在用 JS 解决这个问题， `ontouchstart`我得到了主父级的大小并将每张幻灯片设置为该宽度，但我不喜欢这个解决方案，因为当切换横向到纵向时，你必须触摸画廊才能更新，并且即使我在更改中添加了一个事件列表器，它仍然不是一个很好的解决方案。

我只能在 CSS 中实现这种效果吗？同一行上的面板库，宽度变量基于父级？

PS：Chrome 开发工具 > 模拟触摸事件

PPS：写了一个简化版本[http://codepen.io/piatra/pen/usaHo](http://codepen.io/piatra/pen/usaHo) 非常欢迎对此版本的任何改进:)

一个很好的例子是[http://csscience.com/responsiveslidercss3/](http://csscience.com/responsiveslidercss3/)但是当添加一个新面板时你必须编辑 CSS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T09:53:16.093

我认为这不能用纯 css 完成，特别是因为您希望它易于维护，而无需在添加更多窗格时更改 css。

一种解决方案是使用 jquery 来计算窗格，然后相应地设置 wrappe 宽度和窗格宽度以达到所需的效果：

[http://jsbin.com/idufaj/6/edit](http://jsbin.com/idufaj/6/edit)

您可以添加任意数量的窗格，效果将始终存在。

```
$(document).ready(function() {

var panes = $(".pane").length;
var width = panes * 100 + "%";
var panewidth = 100/panes + "%";
$("body").css({ width : width });
  $(".pane").css({width: panewidth });
}); 
```

在此示例中，我使用 body 作为包装器，但它可以是任何元素。在这种情况下，由于有 3 个窗格，因此主体宽度设置为 300%，窗格宽度设置为 33.3%。如果添加另一个窗格，则主体宽度将为 400%，窗格宽度将为 25%，依此类推。

# actionscript-3 - AS3：没有输入的警报事件触发

> ID：13993639
> 
> 赞同：0
> 
> 时间：2012-12-21T16:23:05.670
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, mxml

当用户单击删除按钮时，我会弹出一个警报。但是，当创建警报时，尽管没有用户输入，它仍会触发 Yes 函数。

显然，使用删除按钮很糟糕。

```
 protected function handleDelete(event:Event): void {
            showAlert();
        }

        private function showAlert():void{
            Alert.yesLabel = "Delete";
            Alert.noLabel = "Cancel";
            Alert.show("Are you sure you want to delete this?", "Confirm Delete", Alert.YES|Alert.CANCEL, this, delete(), null, Alert.CANCEL);
        } 
```

不知道为什么，但是无论用户输入如何，都会在创建警报时触发 delete() 。

警报是 Flex 默认警报，没有覆盖或任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:30:41.887

`delete()`应该没有，`()`因为您想传递对它的引用，而不是调用它并传递返回值。

# mysql - 加入表后获取最小值

> ID：13993644
> 
> 赞同：2
> 
> 时间：2012-12-21T16:23:20.350
> 
> 标签：mysql, minimum

这是我的数据库：

```
create table Movie (
mID smallint auto_increment primary key, 
title varchar(30), 
director varchar(20),
year int
)engine innodb;

create table Reviewer (
rID smallint auto_increment primary key, 
name varchar(30)
)engine innodb;

create table Rating (
mID smallint, 
rID smallint, 
stars int, 
ratingDate date,
constraint fk_movie foreign key (mID) references movie(mID),
constraint fk_reviewer foreign key (rID) references reviewer(rID)
)engine innodb;

insert into movie (title,director,year) values ('Lincoln','Steven Spielberg',2012),('An Unexpected Journey','Peter Jackson',2012),('Jurassic Park','Steven Spielberg',1993),('The Godfather','Francis Ford Coppola',1972), ('Fight Club','David Fincher',1999),('War Horse','Steven Spielberg',2011),('Rise of guardians','Peter Ramson',2012),('The Shawshank Redemption','Frank Darabont',1994),('Jaws','Steven Spielberg',1975),('Raging Bull','Martin Scorsese',1980);

insert into reviewer (name) values ('Bill Goodykoontz'),('David Germain'),('Christy Lemire'),('Richard Lawson'),('Marjorie Baumgarten');

insert into rating (mID, rID, stars, ratingDate) values (1,4,3,'2012-04-09'),(3,5,4,'2000-03-05'),(4,2,5,'1900-09-15'),(7,3,5,'2012-08-25'),(6,1,4,'2011-09-11'),(8,5,5,'1995-10-15'),(9,3,3,'1980-02-20'); 
```

这是插入了所有这些数据的[**SQL Fiddle 。**](http://sqlfiddle.com/#!2/c807f)

我必须：“对于当前数据库中最低（最少星）的每个评级，返回评论者姓名、电影名称和星数。”

我的代码是：

```
SELECT name REVIEWER, title MOVIE, stars FROM rating
INNER JOIN movie
USING(mID)
INNER JOIN reviewer
USING(rID)
GROUP BY stars
HAVING stars = min(stars); 
```

**我的输出是**

```
REVIEWER    MOVIE   stars
Christy Lemire      Jaws    3
Bill Goodykoontz    War Horse   4
David Germain       The Godfather   5 
```

**理想输出**

```
REVIEWER    MOVIE   stars
Christy Lemire  Jaws    3
Richard Lawson  Lincoln 3 
```

有人请纠正我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:29:21.857

你不是在找这个吗：

```
 SELECT name REVIEWER, title MOVIE, stars FROM rating
INNER JOIN movie    USING(mID)
INNER JOIN reviewer USING(rID)
WHERE stars = 
  (SELECT min(stars) FROM rating); 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!2/c807f/5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:30:03.343

您可以使用`WHERE`子句来过滤：

```
SELECT v.name REVIEWER, 
  m.title MOVIE, 
  r.stars 
FROM movie m
INNER JOIN rating r
  on r.mid = m.mid
INNER JOIN reviewer v
  on r.rid = v.rid
where r.stars = (select min(stars)
                 from rating) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d4a46/7)

返回结果：

```
|       REVIEWER |   MOVIE | STARS |
------------------------------------
| Christy Lemire |    Jaws |     3 |
| Richard Lawson | Lincoln |     3 | 
```

# django - Django 提供生成的 excel 文件

> ID：13993645
> 
> 赞同：5
> 
> 时间：2012-12-21T16:23:21.367
> 
> 标签：django, excel, file, httpresponse, serve

我查看了与我的类似的各种问题，但我找不到任何可以解决我的问题的方法。

在我的代码中，我想提供一个新生成的 excel 文件，该文件位于我的 app 目录中名为 files 的文件夹中

```
excelFile = ExcelCreator.ExcelCreator("test")
excelFile.create()
response = HttpResponse(content_type='application/vnd.ms-excel')
response['Content-Disposition'] = 'attachment; filename="test.xls"'
return response 
```

因此，当我单击运行这部分代码的按钮时，它会向用户发送一个空文件。通过查看我的代码，我可以理解这种行为，因为我在回复中没有指向该文件......

我看到有些人使用文件包装器（我不太了解它的用途）。所以我确实这样做了：

```
response = HttpResponse(FileWrapper(excelFile.file),content_type='application/vnd.ms-excel') 
```

但是，我从服务器收到错误消息：发生服务器错误。请联系管理员。

感谢您在我的 Django 任务中帮助我，您的宝贵建议让我变得更好！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T03:55:05.097

首先，你需要了解它是如何工作的，你得到一个空文件，因为这就是你正在做的，实际上：

```
response = HttpResponse(content_type='application/vnd.ms-excel')
response['Content-Disposition'] = 'attachment; filename="test.xls"' 
```

HttpResponse 作为第一个 arg 接收响应的内容，看看它的构造函数：

```
def __init__(self, content='', mimetype=None, status=None, content_type=None): 
```

因此，您需要使用您希望的内容创建响应，在这种情况下，使用 .xls 文件的内容。

您可以使用任何方法来做到这一点，只要确保内容在那里。

这是一个示例：

```
import StringIO
output = StringIO.StringIO()
# read your content and put it in output var
out_content = output.getvalue()
output.close()
response = HttpResponse(out_content, mimetype='application/vnd.ms-excel')
response['Content-Disposition'] = 'attachment; filename="test.xls"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:50:48.393

我建议您使用：

```
python manage.py runserver 
```

从命令行运行您的应用程序。从这里您将看到应用程序的控制台输出以及运行时引发的任何异常。这可以快速解决您的问题。

# c - 如何近似 LUT 索引？

> ID：13993650
> 
> 赞同：4
> 
> 时间：2012-12-21T16:23:55.220
> 
> 标签：c, algorithm, approximation

我有一个数组

```
...
//a      b
{860,   -30},
{853,   -29},
{846,   -28},
{838,   -27},
{830,   -26},
{822,   -25},
{814,   -24},
... 
```

使用 C 查找`b`给定`a`值的最快方法是什么？我想这需要一些近似值？例如，当`a = 851`我想尽快找到时`-29`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:13:02.257

最快的通用算法是二分查找。根据映射数组的大小，您可以考虑手动编码搜索；这对于 32 号来说可能是合理的，但我不会更大。在微控制器上，如果幸运的话，完全扩展的二进制搜索可能会快 50%。

但是，如果映射不是太非线性，那么还有一个不错的选择。

将范围划分`a`为`k`大小相等的范围，其中`k`不比映射数组中的条目数大多少，以便每个范围端点的映射与下一个范围端点相同或多一个。（如果这是可能的；这正是我所说的“不太非线性”的意思）。创建另一个数组，将每个端点映射到原始数组的索引。（您只需要索引，而不需要端点，因为端点是均匀分布的。）对于每个范围，底部端点对应的索引值是`a`原始数组中最小值的索引，不小于该范围的顶部端点。请注意，由于上述要求，最多可以有一个`a`每个范围内的值，因此每个端点的索引将始终指向`a`范围结束的值，并且范围`a`开始的值将始终是相同的或前一个索引。

现在，要查找一个值，您首先要找出适当的范围索引，这是一个简单的线性计算 ( `(val - minval)/k`)，然后`a`通过查找索引来将该值与指示值进行比较以进行比较。如果该值小于查找的值`a`，则从索引中减去 1。然后`b`从索引中返回值。

有关此类算法的示例，请参阅我的答案[here](https://stackoverflow.com/questions/13078407/algorithm-optimization-logarithm-by-calculation-or-lookup-table/13078924#13078924)。

# ruby - 无法创建 MongoClient.new

> ID：13993656
> 
> 赞同：5
> 
> 时间：2012-12-21T16:24:21.880
> 
> 标签：ruby, mongodb, gem

我不知道这有什么关系。一切正常，直到我尝试创建一个新的 MongoClient

```
irb(main):001:0> require 'rubygems'
=> true
irb(main):002:0> require 'mongo'
=> true
irb(main):003:0> include Mongo
=> Object
irb(main):004:0> client = MongoClient.new('127.0.0.1', 27017)
NameError: uninitialized constant MongoClient
        from (irb):4
        from :0
irb(main):005:0> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T18:46:22.897

您使用的是较旧版本 (1.5.2) 的`mongo`gem，而不是最新版本 (1.8.0)。那天的连接是由

```
conn = Mongo::Connection.new 
```

[在1.5.2 版本](http://api.mongodb.org/ruby/1.5.2/)的文档中了解更多信息

# asp.net-mvc-3 - vbhtml 和 cshtml 文件对 MVC 扩展方法的引用不同吗？

> ID：13993657
> 
> 赞同：0
> 
> 时间：2012-12-21T16:24:39.370
> 
> 标签：asp.net-mvc-3

我正在将应用程序的登录视图`vbhtml`从`cshtml`. 在 vbhtml 文件中，原始开发人员调用`Html.LabelWithAttributesFor`扩展方法。当我在新文件中编写同一行代码时，`cshtml`扩展方法无法通过 Intellisense 使用并且无法编译。`vbhtml`项目中的文件和`cshtml`文件之间没有共享引用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T16:24:04.373

想回过头来用“答案”结束这个问题。最后，当我们从解决方案中删除 vbhtml 页面时，似乎有些松动了。在我们删除 vbhtml 页面之前，所有对扩展的使用都已被删除，其他开发人员在此期间对解决方案进行了其他更改。快进几个月给另一个需要扩展的开发人员。他使用扩展方法添加了对项目的引用，并在新的 cshtml 页面上使用它们，效果很好。所以，问题解决了，但我仍然不知道是什么导致了问题，我一直无法重现它。

# lisp - 计算 3 和 5 的倍数之和低于 1000

> ID：13993661
> 
> 赞同：0
> 
> 时间：2012-12-21T16:25:00.343
> 
> 标签：lisp, scheme

我编写了以下程序来计算方案中低于 1000 的 3 和 5 的所有倍数之和。但是，它给了我一个不正确的输出。任何帮助将非常感激。

```
(define  (multiples)
   (define  (calc  a sum ctr cir)
      (cond (> a 1000) (sum)
            (= ctr 7) (calc (+ a (list-ref cir 0)) (+ sum a) 0 (list 3 2 1 3 1 2 3))
             (else (calc (+ a (list-ref cir ctr)) (+ sum a) (+ 1 ctr) (list 3 2 1 3 1 2 3)))))
    (calc 0 0 0 (list 3 2 1 3 1 2 3))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:43:46.253

您可以使用 accumulator( `sum`parameter) 和一个`target`参数来测试何时停止求和，从而将命令式风格的解决方案简单地移植到函数式 Scheme：

```
(define (multiples)
  (define (multiples-iter num sum target)
    (if (> num target)
      sum
      (multiples-iter (+ 1 num)
                      (if (or (zero? (mod num 3)) (zero? (mod num 5)))
                        (+ sum num)
                        sum)
                      target)))
  (multiples-iter 0 0 1000)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:09:20.283

一个问题是您的代码在`cond`子句周围缺少一对括号。在该行`(cond (> a 1000) (sum)`中，条件只是`>`while `a`并且`1000`被解释为要评估的形式，如果`>`为真（它是），因此将返回 1000 作为结果。

另外两个问题（被第一个问题所掩盖）是当 ctr 达到 7 时您将其初始化为 0，而它应该设置为下一个值，即 1，并且您在结果中包含 1000。

您的函数的更正版本是

```
(define  (multiples)
   (define  (calc  a sum ctr cir)
      (cond ((>= a 1000) sum)
            ((= ctr 7) (calc (+ a (list-ref cir 0)) (+ sum a) 1 (list 3 2 1 3 1 2 3)))
             (else (calc (+ a (list-ref cir ctr)) (+ sum a) (+ 1 ctr) (list 3 2 1 3 1 2 3)))))
    (calc 0 0 0 (list 3 2 1 3 1 2 3))) 
```

同样的算法也可以定义为这样的非递归函数：

```
(define (multiples)                                                             
  (do ((cir (list 3 2 1 3 1 2 3))                                               
       (ctr 0 (+ ctr 1))                                                        
       (a 0 (+ a (list-ref cir (modulo ctr 7))))                                
       (sum 0 (+ sum a)))                                                       
      ((>= a 1000) sum))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:00:36.863

这是我的（特定于球拍的）解决方案，它不涉及大量（或就此而言，任何）`modulo`调用，并且是完全通用的（因此您不需要构建`(3 2 1 3 1 2 3)`OP 拥有的列表）：

```
(define (sum-of-multiples a b limit)
  (define (sum-of-multiple x)
    (for/fold ((sum 0))
              ((i (in-range 0 limit x)))
      (+ sum i)))
  (- (+ (sum-of-multiple a) (sum-of-multiple b))
     (sum-of-multiple (lcm a b)))) 
```

测试运行：

```
> (sum-of-multiples 3 5 1000)
233168 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T17:01:43.660

如果您使用的是 Racket，那么有一种非常紧凑的方法可以满足您的要求，使用循环结构：

```
(for/fold ([sum 0])
  ([i (in-range 1 1000)]
   #:when (or (zero? (modulo i 3)) (zero? (modulo i 5))))
  (+ sum i))

=> 233168 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:22:45.343

如果您绝对想使用“重复模式”方法，您可以这样做。

这在间隔列表上使用递归，而不是依赖`list-ref`和显式索引。

```
(define (mults limit)
  (define steps '(3 2 1 3 1 2 3))
  (define (mults-help a sum ls)
    (cond ((>= a limit) sum)
          ((null? ls) (mults-help a sum steps))
          (else (mults-help (+ a (car ls)) 
                            (+ a sum)  
                            (cdr ls)))))
  (mults-help 0 0 steps)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T17:47:41.033

```
(require-extension (srfi 1))
(define (sum-mod-3-5 upto)
  (define (%sum-mod-3-5 so-far generator-position steps)
    (let ((next (car generator-position)))
      (if (> (+ steps next) upto)
          so-far
          (%sum-mod-3-5 (+ so-far steps)
                        (cdr generator-position)
                        (+ steps next)))))
  (%sum-mod-3-5 0 (circular-list 3 2 1 3 1 2 3) 0)) ; 233168 
```

对于这个特定的任务，它平均会执行一半的操作，然后如果将计数器增加一，那么如果要检查的条件，它也会减少一。

此外，模（可能是变相除法）比求和更昂贵。

编辑：我不是 Scheme 不同方言中模块化系统的专家。此处的 SRFI-1 扩展只是为了更容易创建循环列表而需要。我找不到与 Common Lisp 类似的`(#0=(3 2 1 3 1 2 3) . #0#)`东西，但也许，更有知识的人会纠正这个问题。

# ios - 保管箱的 connect_login URL

> ID：13993667
> 
> 赞同：0
> 
> 时间：2012-12-21T16:25:16.703
> 
> 标签：ios, dropbox-api

根据 Dropbox REST API 文档，登录过程必须通过 OAUTH 网址，例如`https://api.dropbox.com/1/oauth/request_token`. 但是 dropbox 的 iOS SDK 调用了`https://www.dropbox.com/1/connect_login`没有在任何地方记录的调用。我想在我的应用程序中使用 REST API，但我想显示与 Dropbox SDK 相同的身份验证屏幕。

有人遇到过这个问题吗？有谁知道 Dropbox 关于使用无证 API 的说法`connect_login`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T08:01:42.750

来自 Dropbox 的最新消息`/connect_login`是：

> 这是 iOS SDK 的一个特殊端点，因为 App Store 批准的特定要求。您应该使用提供的官方 SDK，我们会随着时间的推移提供这些更新。

（取自[https://forums.dropbox.com/topic.php?id=104267](https://forums.dropbox.com/topic.php?id=104267)）

# node.js - Express.js 项目中在哪里进行验证——在数据库层进行验证（re. Mongoose）？

> ID：13993669
> 
> 赞同：2
> 
> 时间：2012-12-21T16:25:25.160
> 
> 标签：node.js, validation, model-view-controller, express, mongoose

我正在用 Express.js 中的表单编写一个应用程序，首先，我在路由（或控制器，如果你愿意）中进行所有验证：

```
app.post('/register', function (req, res, next) {
  // Generic validation
  req.assert('name', 'Name is empty').notEmpty();
  req.assert('username', 'Username is empty').notEmpty();
  var errors = req.validationErrors(true);
  if (errors) {
    // If there are errors, show them
  } else {
    // If there are no errors, use the model to save to the database
  }
}); 
```

然而，我很快了解到我的验证应该在模型中进行，符合“瘦控制器，胖模型”的原则。

模型：

```
var userSchema = new Schema({
    name: {
      type: String
    , required: true
    , validate: [validators.notEmpty, 'Name is empty']
    }
  , username: {
      type: String
    , required: true
    , validate: [validators.notEmpty, 'Username is empty']
    }
 , salt: String
 , hash: String
}); 
```

路线/控制器：

```
app.post('/register', function (req, res, next) {
  var newUser = new User(req.body);
  // Tell the model to try to save the data to the database
  newUser.save(function (err) {
    if (err) {
      // There were validation errors
    } else {
      // No errors
    }
  });
}); 
```

这很好用。但是，我需要在数据库层之前进行验证。例如，我需要[检查两个密码是否相同](https://stackoverflow.com/questions/13982159/validating-password-confirm-password-with-mongoose-schema/13992653#13992653)（`password`和`confirmPassword`）。这不能在模式中定义，因为我只是在模型`salt`中保存`hash`。因此，我需要在路由/控制器中的数据库层之前进行此验证。因此，我将无法同时显示验证消息。

这是做事的最佳方式吗——在数据库层的模型以及控制器中进行验证？像以前一样在控制器中进行所有验证会更好吗？但随后我将重复代码，再次保存到模型中。或者我应该使用另一种模式，如果是这样，什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:40:38.917

我会考虑将验证逻辑移至模型，但不要将模型视为数据库。模型大于数据库。模型执行验证，如果验证通过，则将数据保存到数据库中，如果验证失败，则返回正确的消息，以便路由器可以呈现正确的错误消息。

# sql - 如何在 XML 元素中使用 <=？

> ID：13993671
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:25:30.293
> 
> 标签：sql, xml

我有一个包含 SQL 查询的 config.xml 文件。查询最终将在 c# 中被读取和执行。但是，我需要知道如何编写包含在 XML 元素中的查询。问题是查询在 WHERE 语句中使用 <=。我认为，查询的“<”部分导致 XML 认为它应该逃避元素。如何在 XML 文件中包含这个基本的选择语句？我注意到 > 工作正常。显然，我可以交换比较的顺序，但我想知道如何具体包括 < please。

```
 <?xml version="1.0" encoding="utf-8" ?>
<root>
  <Connections>
   <Connection>
      <Source>Data Source=XXX-XXX; Initial Catalog=MyData;Integrated Security=True</Source>
      <Query>Select * FROM Info WHERE EffectiveDate <= GETDATE() </Query>
   </Connection>
  </Connections>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:27:02.507

`<`您可以对配置文件中的字符进行编码`&lt;`并对其进行解码以供使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:27:49.637

使用[`CDATA`](http://en.wikipedia.org/wiki/CDATA)块。这样您就不必对查询进行编码。

例如：

```
<Query><![CDATA[
Select * FROM Info WHERE EffectiveDate <= GETDATE()   
]]></Query> 
```

# spring-integration - 对 HTTP 出站网关进行异步调用

> ID：13993672
> 
> 赞同：3
> 
> 时间：2012-12-21T16:25:32.553
> 
> 标签：spring-integration

我有一个系统，我正在考虑用 spring 集成来改造后端。

这个系统中的一些模式，看看使用多个请求和稍微不同的参数访问相同的 Web 服务和/或 HTTP 服务器（我都有）。然后将结果汇总在一起并呈现给用户

我让它在同步模式下成功工作，其中请求通过网关进入，被“拆分”为包含每个调用的键值的消息（用 A 调用，用 B 调用，用 XYZ 调用）。然后，每条消息都会发送到 HTTP 出站网关，进行调用并返回。然后将结果汇总在一起并通过网关运回。

我正在努力做的是异步进行这些 HTTP 调用。当前系统使用 Futures 在单独的线程中进行每个调用。我想要一个类似的模式。

我认为我需要做的是创建第二个网关，它包装了 HTTP 出站网关，并使用返回值来创建异步调用。但是，我不确定这将如何与聚合一起工作，并且感觉应该有一种更清洁的方式。我已经 3 年没有机会使用 Spring Integration，所以我正在尝试重新学习所有的东西。

我错过了什么，还是你需要这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:00:28.007

您可以简单地制作频道（订阅出站网关的）ExecutorChannels（[http://static.springsource.org/spring-integration/reference/html/messaging-channels-section.html#executor-channel](http://static.springsource.org/spring-integration/reference/html/messaging-channels-section.html#executor-channel)和[http： //static.springsource.org/spring-integration/reference/html/messaging-channels-section.html#channel-configuration-executorchannel](http://static.springsource.org/spring-integration/reference/html/messaging-channels-section.html#channel-configuration-executorchannel)）。

这样，每个请求都将在单独的线程上运行——聚合释放将发生在接收最终响应的线程上。您的原始线程将在网关中等待响应（或者您可以使用异步网关并等待 Future.

# python - 使用多处理查找网络路径

> ID：13993674
> 
> 赞同：2
> 
> 时间：2012-12-21T16:25:40.900
> 
> 标签：python, multiprocessing, threadpool, networkx

我目前正在使用 networkx 函数 *all_simple_paths* 为给定的一组源节点和目标节点查找网络 G 中的所有路径。

在更大/更密集的网络上，这个过程非常密集。

我想知道是否可以在这个问题上使用多处理，以及是否有人对如何通过创建池等来实现它有任何想法。

```
import networkx as nx

G = nx.complete_graph(8)
sources = [1,2]
targets = [5,6,7]

for target in targets:
    for source in sources:
        for path in nx.all_simple_paths(G, source=source, target=target, cutoff=None):
            print(path) 
```

非常感谢您提出的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:39:48.037

对于最简单的情况，您的路径似乎彼此没有关系，除了是同一个图表的一部分，因此不会有任何锁定问题。

我要做的是您可以使用该模块通过using a和该方法`multiprocessing`在每个循环上启动一个新进程。`targets``Pool``map`

```
def create_graph_from_target( target )
    for source in sources:
        for path in nx.all_simple_paths(G, source=source, target=target, cutoff=None):
            print(path)

from multiprocessing import Pool
p = Pool( processes=4 )

p.map( create_graph_from_target, targets )
p.close()
p.join() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:55:57.457

这是一个使用工作进程集合的版本。每个工作人员`source, target`从队列中获取对，并在列表中收集路径。找到所有路径后，将结果放入输出队列，并由主进程进行整理。

```
import networkx as nx
import multiprocessing as mp
import random
import sys
import itertools as IT
import logging
logger = mp.log_to_stderr(logging.DEBUG)

def worker(inqueue, output):
    result = []
    count = 0
    for pair in iter(inqueue.get, sentinel):
        source, target = pair
        for path in nx.all_simple_paths(G, source = source, target = target,
                                        cutoff = None):
            result.append(path)
            count += 1
            if count % 10 == 0:
                logger.info('{c}'.format(c = count))
    output.put(result)

def test_workers():
    result = []
    inqueue = mp.Queue()
    for source, target in IT.product(sources, targets):
        inqueue.put((source, target))
    procs = [mp.Process(target = worker, args = (inqueue, output))
             for i in range(mp.cpu_count())]
    for proc in procs:
        proc.daemon = True
        proc.start()
    for proc in procs:    
        inqueue.put(sentinel)
    for proc in procs:
        result.extend(output.get())
    for proc in procs:
        proc.join()
    return result

def test_single_worker():
    result = []
    count = 0
    for source, target in IT.product(sources, targets):
        for path in nx.all_simple_paths(G, source = source, target = target,
                                        cutoff = None):
            result.append(path)
            count += 1
            if count % 10 == 0:
                logger.info('{c}'.format(c = count))

    return result

sentinel = None

seed = 1
m = 1
N = 1340//m
G = nx.gnm_random_graph(N, int(1.7*N), seed)
random.seed(seed)
sources = [random.randrange(N) for i in range(340//m)]
targets = [random.randrange(N) for i in range(1000//m)]
output = mp.Queue()

if __name__ == '__main__':
    test_workers()
    # test_single_worker()
    # assert set(map(tuple, test_workers())) == set(map(tuple, test_single_worker())) 
```

`test_workers`使用多处理，`test_single_worker`使用单个进程。

运行`test.py`不会引发 AssertionError，因此看起来两个函数都返回相同的结果（至少对于我运行的有限测试而言）。

以下是 timeit 结果：

```
% python -mtimeit -s'import test as t' 't.test_workers()'
10 loops, best of 3: 6.71 sec per loop

% python -mtimeit -s'import test as t' 't.test_single_worker()'
10 loops, best of 3: 12.2 sec per loop 
```

因此，在这种情况下，test_workers 能够在 2 核系统上实现比 test_single_worker 快 1.8 倍的速度。希望代码也能很好地解决您的实际问题。我很想知道结果。

* * *

一些兴趣点：

*   调用`pool.apply_async`一个短暂的函数非常慢，因为太多时间花在传递参数上，并通过队列而不是使用 CPU 进行有用的计算。
*   最好将结果收集到一个列表中并将完整的结果放入`output`队列中，而不是一次放入`output`一个结果。放入队列中的每个对象都被腌制，腌制一个大列表比腌制许多小列表更快。
*   我认为仅从一个进程进行打印更安全，因此打印语句不会相互影响（导致输出错误）。

# ruby - 从特定视图调用时无法在辅助方法中设置局部变量

> ID：13993675
> 
> 赞同：1
> 
> 时间：2012-12-21T16:25:46.257
> 
> 标签：ruby, ruby-on-rails-3

看来，当我从我的一个视图调用辅助方法时，我无法设置任何新的局部变量。名字无关紧要 - 我设置的一切都是零。

从大多数观点来看，一切都很好：

```
editable = true
html << 'Editable: ' + editable.to_s 
```

输出`Editable: true`

但是，从我的一个部分来看，输出`Editable:`显示为零。

我试图找出这个特定视图文件的不同之处——发布大量文件对任何人都没有帮助。

有了这些信息（我知道它不是很多），谁能告诉我为什么我可能无法在辅助方法中设置局部变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:37:33.223

这对我来说是一个“愚蠢的错误”，但我不能完全责怪自己。Rails 的行为*非常*奇怪。

`editable = true`就在我的代码中的这一行之后：

```
target_str == '#overview' ? target_str = '#section' : #nothing 
```

这很奇怪，我知道。没有`:`. 我已经把这条线改成了

```
target_str = '#section' if target_str == '#overview' 
```

它应该做同样的事情 IMO，但当然不会。尽管是 1 行 if，但它包含下一个语句，即`editable = true`. 这就解释了为什么它也只发生在我的一种观点上——这是唯一一个声明被评估为真的观点。

# ios - 视差效果 UIScrollView ShowYou

> ID：13993676
> 
> 赞同：2
> 
> 时间：2012-12-21T16:25:53.490
> 
> 标签：ios, uiscrollview, parallax

我正在查看 ShowYou 应用程序的最新更新，他们实现的视差效果绝对令人惊叹。我正在玩 UITableView 和 UIScrollView 看看我是否可以模仿它，但我想看看我是否可以和其他一些人接触一下，看看他们会怎么做。

有什么想法吗？

# gwt - 如何获取重定向页面的 URL？

> ID：13993681
> 
> 赞同：1
> 
> 时间：2012-12-21T16:26:08.617
> 
> 标签：gwt

我有一个登录 servlet，它将重定向到我的 GWT 页面。

我想确保该页面是从该登录 servlet 重定向的。我怎样才能确保这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:34:28.233

你可以像这样创建一个[JSNI 方法](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)：

```
public static native String getReferrer() /*-{
  return $doc.referrer;
}-*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:05:24.937

猜你想避免任何未经授权的方法？如果是这样，我建议在您的 AS 中使用 JAAS。如果用户未成功通过身份验证，您应该拒绝对您的 gwt 页面的任何访问。不过，JAAS 是一个复杂的话题。如果你需要的话，我可以给你一些例子。

# javascript - jQuery 掩码字段中的随机人口

> ID：13993683
> 
> 赞同：2
> 
> 时间：2012-12-21T16:26:14.380
> 
> 标签：javascript, jquery, maskedinput

我正在使用 jQuery.maskedInput-1.2.2.js。DOB 字段掩码如下：

```
$('.dob').mask("??99/99/9999"); 
```

我们遇到了一个问题。比如说，用户只输入了最后四位数字 2000 并跳开。该值现在转换为 20/00。当他来并单击输入字段时，会弹出随机值，例如 20/00/_000。如何解决这个问题？

非常感谢，

# winforms - 使用 WFA 发送电子邮件时的安全连接

> ID：13993688
> 
> 赞同：0
> 
> 时间：2012-12-21T16:26:26.947
> 
> 标签：winforms, email, c++-cli, send

我正在使用这个功能：

```
void SendEmail(String ^ sendTo, String ^ sendFrom, String ^ subject, String ^ body, bool enableSsl, char* user_login, char* user_pass)
        {
            SmtpClient^ client = gcnew SmtpClient();
            MailMessage^ msg = gcnew MailMessage();

            String ^ user = gcnew String(user_login);
            String ^ pass = gcnew String(user_pass);

            System::Net::NetworkCredential^ smtpCreds = gcnew System::Net::NetworkCredential(user, pass);

                client->Host = "smtp.gmail.com";
                client->Port = 587;
                client->Credentials = smtpCreds;
                client->EnableSsl = enableSsl;

                MailAddress^ to = gcnew MailAddress(sendTo);
                MailAddress^ from = gcnew MailAddress(sendFrom);

                msg->Subject = subject;
                msg->Body = body;
                msg->From = from;
                msg->To->Add(to);

                client->Send(msg);
        } 
```

用于发送电子邮件。我对第 9 行有疑问 - 如果我像这样设置静态字符串：

```
System::Net::NetworkCredential^ smtpCreds = gcnew System::Net::NetworkCredential("adress@gmail.com", "my_password"); 
```

没关系 - 邮件将被发送，但是当我尝试使用来自其他功能应用程序的变量时，崩溃了：

> System.dll 中出现“System.Net.Mail.SmtpException”类型的未处理异常
> 
> 附加信息：SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。了解更多信息

PS。是的，SSL 已启用。

我有文件中的登录名和密码：

```
char * getAccountData(int marker, int lb_kont)
{
    char wyjscie[256], login[256], password[256];
    char * korektor = "||";
    char * schowek;
    string zawartosc_pliku;

    ifstream NowyPlik;
    NowyPlik.open("C:\\account.db");
    for(int a =1; a<=lb_kont; a++)
    {
        getline(NowyPlik, zawartosc_pliku); 
        strncpy(wyjscie, zawartosc_pliku.c_str(), 128);
        schowek = strtok( wyjscie, korektor );
        strcpy(login, schowek);
        schowek = strtok( NULL, korektor );
        strcpy(password, schowek);
    }

    NowyPlik.close();
    if(marker == 1)
        return login;
    if(marker == 2)
        return password;
} 
```

对于发送邮件的功能，我已经设置`getAccountData(1,lb_kont)`为. 接下来我将 char * 更改为 String（我的第一篇文章中的第 6 行和第 7 行）。`getAccountData(2,lb_kont)``char* user_login, char* user_pass`

# sql - t-sql中的左外连接

> ID：13993690
> 
> 赞同：8
> 
> 时间：2012-12-21T16:26:30.783
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有以下两张表。我正在使用 SQL Server 2008 R2

```
Create table #tmp1 (
a char(1)
)

Create table #tmp2 (
id int,
a char(1),
val int
)

insert #tmp1 values ('A')
insert #tmp1 values ('B')
insert #tmp1 values ('C')

insert #tmp2 values (1,  'A', 10)
insert #tmp2 values (1,  'B', 20)
insert #tmp2 values (2,  'A', 30)
insert #tmp2 values (2,  'C', 40)

select * from #tmp1 t1 left outer join #tmp2 t2 on t1.a = t2.a
order by t2.id 
```

这将返回结果集

```
A   1   A   10
B   1   B   20
C   2   C   40
A   2   A   30 
```

我想要以下结果集

```
 A     1    A       10
 B     1    B       20
 C     1    null    null
 A     2    A       30
 B     2    null    null
 C     2    C       40 
```

现在我通过创建一个像这样的交叉连接的新表然后进行外部连接来实现这一点

```
select * into #tmp3 from #tmp1 cross join (select distinct ID from #tmp2) t
select * from #tmp3 t1 left outer join #tmp2 t2 on t1.a = t2.a and t1.id = t2.id 
```

有一个更好的方法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:33:49.333

要得到你想要的，你需要一个“驾驶”表。也就是说，您想要所有组合的完整列表，然后加入其他表以获取匹配项。这是一种方法：

```
select t1.a, t2.*
from (select t1.a as a, t2.id as id
      from (select distinct a from #tmp1 t1) t1
           cross join
           (select distinct id from #tmp2 t2) t2
     ) driving left outer join
     #tmp1 t1
     on t1.a = driving.a left outer join
     #tmp2 t2
     on t2.id = driving.id and
        t2.a = driving.a
order by t2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:49:53.157

您正在寻找的是#tbl1 中的值和#tbl2 中 id 列中的值的笛卡尔积。因为#tbl2.id 中的值不是唯一的，所以为每个#tbl2.id 值添加一个包含一行的附加表可能是更好的设计。然后你可以使用这个解决方案：

```
Create table #tmp1 (
a char(1)
)

Create table #tmp2 (
id int,
a char(1),
val int
)

Create table #tmp3 (
id int
)

insert #tmp1 values ('A')
insert #tmp1 values ('B')
insert #tmp1 values ('C')

insert #tmp3 values (1)
insert #tmp3 values (2)

insert #tmp2 values (1,  'A', 10)
insert #tmp2 values (1,  'B', 20)
insert #tmp2 values (2,  'A', 30)
insert #tmp2 values (2,  'C', 40)

SELECT  t3.id,t1.a,t2.val
FROM    #tmp1 AS t1
CROSS JOIN #tmp3 AS t3
LEFT OUTER JOIN #tmp2 AS t2
ON t1.a = t2.a AND t3.id = t2.id
ORDER BY t3.id, t1.a; 
```

如果这不是一个选项，请改用：

```
SELECT  t3.id,t1.a,t2.val
FROM    #tmp1 AS t1
CROSS JOIN (SELECT DISTINCT id FROM #tmp2) AS t3
LEFT OUTER JOIN #tmp2 AS t2
ON t1.a = t2.a AND t3.id = t2.id
ORDER BY t3.id, t1.a; 
```

# html - 砌体方格

> ID：13993691
> 
> 赞同：0
> 
> 时间：2012-12-21T16:26:31.980
> 
> 标签：html, css, jquery-masonry, jquery-isotope

有谁知道如何制作这个[http://cl.ly/image/1A3u173Z2H3G/masonry.jpg](http://cl.ly/image/1A3u173Z2H3G/masonry.jpg)？我试过同位素或砖石之类的插件，但没有用。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:34:47.633

你可以通过 div 或 table 做到这一点

在下图中，我那些框是 div ...要进行底部设计，您只需将位置或黄色 div 更改为绿色 div

![在此处输入图像描述](../Images/21668575b173417748bfbecd742f90f9.png)

# java - 如何生成使用 Java 绘制的图像的物理尺寸

> ID：13993692
> 
> 赞同：-2
> 
> 时间：2012-12-21T16:26:31.383
> 
> 标签：java, graphics, java-2d

我在 Swing Applet 中的 JPanel 上画了一个正方形。现在我想在纸上打印这个**物理尺寸为 50 厘米 * 50 厘米的正方形。这意味着在现实世界中正方形的打印尺寸为 50 * 50 厘米，我绘制到小程序的面板。**打印机使用**400 DPI**进行打印。

那么我如何将这些与测量联系起来呢？我应该以哪种文件格式保存我的绘图，以便在打印时进行准确的测量，等于打印机 DPI，并且图像的质量在打印时保持不变。

谢谢你米希尔帕雷克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:26:50.310

您需要将厘米值转换为英寸，以便获得每英寸点数

1 厘米 = 0.393700787 英寸
50 厘米 * 0.393700787 英寸 = 19.68503935 英寸
19.68503935 * 400 = 7874.01574 像素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:29:40.343

50cm 和 400 DPI 是：50/2,54*400 = 7874 像素 我推荐**png**或**gif**（gif 仅适用于 <= 255 色）

# jquery - Jquery将所有li的ID推入数组

> ID：13993694
> 
> 赞同：3
> 
> 时间：2012-12-21T16:26:35.377
> 
> 标签：jquery, arrays, dom, html-lists

我需要将我所有的 ID 推送到一个数组中，我尝试过的两种方法都只会将第一个 ID 推送到数组中：

```
 var some = [];
  $('ul#jdLists li').each(function () {
   some.push([$('ul#jdLists li').attr("id")]);
  }); 
```

这将返回数组中正确数量的项目，但带有第一个 li 的 ID

或者

```
 var some = [];                
    some.push([$('ul#jdLists li').attr("id")]); 
```

这将返回具有第一个 li ID 的单个项目

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T16:27:33.983

这段代码：`some.push([$('ul#jdLists li').attr("id")]);`将推送选择器`li`找到的第一个id `ul#jdLists li`，你需要做的是获取每个的id `li`，这可以在`each`函数内部完成：

```
var some = [];
$('ul#jdLists li').each(function () {
   some.push($(this).attr("id"));
   // or
   some.push(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T16:28:24.930

或者您可以使用[`$.map()`](http://api.jquery.com/jQuery.map/)：

```
var ids = $('ul#jdLists li').map(function () {
   return this.id;
}).get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:28:45.227

```
var some = [];
$('ul#jdLists li').each(function (i, el) {
   some.push(el.id);
}); 
```

# css - 将 Div 与子 Divs 内容对齐 垂直居中对齐

> ID：13993695
> 
> 赞同：0
> 
> 时间：2012-12-21T16:26:36.273
> 
> 标签：css, css-float

所以我有一个看起来像的 div

```
<div id="socialMediaBarHomepage">
<div id="homepageNewsLink">
    <img src="" alt="" class="mr_10"/>
    <a href=""></a>
</div>
<div id="socialMediaHeaderBar" class="fl_right">
    <div id="headerMediaStayConnected" class="fl_left mr_5">
    A bit of Text
    </div>
    <div id="headerMediaIcons" class="fl_left">
    Image Image Image
    </div>
<div> 
```

所以我有 1 个主 div，有 2 个子 div。

1 个向左浮动和 1 个向右浮动。它基本上是我主页的一个栏。

在左边我显示一个图标和一个新闻链接

在右侧，我显示了一个标签和社交媒体图标。

我想要做的只是垂直对齐该栏中的所有内容，但甚至无法靠近。关于如何完成这项工作的任何想法？

CSS

```
 #homepageNewsLink a, #homepageNewsLink img { float: left; } 
```

#headerMediaIcons ul { 边距：0px;} #socialMediaBarHomepage { 显示：表格；} #homepageNewsLink { 显示：表格单元；垂直对齐：中间；} #socialMediaHeaderBar { 显示：表格单元格；垂直对齐：中间；}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:31:48.247

垂直对齐 CSS 属性仅适用于 TD 标签，如果我记得很清楚的话，一些内联对象对齐（如图像）。您可以尝试设置父 div 的显式高度并在子 div 上使用 margin-top 和 margin-bottom 值 auto 您也可以在父 div 上使用 display:table-cell 并坚持垂直对齐。

# ios - facebook 万岁令牌更新

> ID：13993696
> 
> 赞同：2
> 
> 时间：2012-12-21T16:26:50.790
> 
> 标签：ios, facebook, access-token

我正在使用 Facebook iOS SDK 3.1。

来自 FB[文档](https://developers.facebook.com/docs/howtos/login/extending-tokens)

> 从我们的移动 SDK（Android 和 iOS）、桌面应用程序和服务器端登录流程创建的应用程序会自动获得长期有效的用户访问令牌。每次用户触发身份验证流程时，这个长期存在的令牌都会刷新和扩展。

该令牌的有效期为 60 天。

我有当前的实现：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions
{

  if (![FBSession activeSession].isOpen) {
    if ([FBSession activeSession].state == FBSessionStateCreatedTokenLoaded) {
      [[FBSession activeSession] openWithCompletionHandler:^(FBSession *session,
                                                               FBSessionState status,
                                                               NSError *error) {}];
    }
   }
} 
```

，但这只会在应用程序第一次启动或被杀死后触发。

这里有几个问题：

1.  当应用程序正在使用但 60 天内没有进行任何 FB 调用时，扩展令牌的正确步骤应该是什么。

2.  假设应用程序正在运行或进入后台模式，并且用户没有使用任何 FB 功能，例如分享/注销/登录，令牌会自动更新吗？

3.  通过 SDK 访问 FB 调用时，token 是否会自动更新并在 FBSession 中可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:14:17.877

澄清一下，使用 Facebook SDK 3.1，访问令牌会在后台、进行 API 调用时或在身份验证流程期间刷新。从上次刷新时间起大约一天后会发生刷新。

1.  如果在这段时间内没有进行任何 FB 调用，并且令牌过期，您应该重新授权用户。这可能意味着它们是通过重新验证流程进行的。因此，当他们进行与 FB 相关的调用并且由于令牌过期而失败时，您应该重新验证（另请参阅[https://developers.facebook.com/docs/reference/api/errors/](https://developers.facebook.com/docs/reference/api/errors/)）。无论如何，您都应该将其构建到您的应用程序中，因为令牌过期或失效的方式可能不同。
2.  不，它在 API 调用时被刷新（参见对 1 的回答）。
3.  是的，在最后一次刷新后的一段时间后。

# javascript - 搜索 HTML img 标题属性

> ID：13993699
> 
> 赞同：1
> 
> 时间：2012-12-21T16:27:06.443
> 
> 标签：javascript, html, search, dom

基本上我有一个 html 页面，上面有数百个图像，每个图像都有一个描述图像的标题属性。理想情况下，我会改变这一切，但页面必须保持原样。

**如果可能，我想搜索这些标题属性并将页面滚动到相应的图像**。- 我玩过一些 javascript 搜索脚本，但由于标签在代码中而不是在页面上显示，因此无法让它与简单的“页面上”搜索一起使用。

谁能指出我如何做这样的事情的正确方向？

这是我使用的“页面搜索”代码

```
var n = 0;
function findInPage(str) {
    var txt, i, found;
    if (str == "") {
        return false; 
    }
    // Find next occurance of the given string on the page, wrap around to the
    // start of the page if necessary.
    if (window.find) {
        // Look for match starting at the current point. If not found, rewind
        // back to the first match.
        if (!window.find(str)) {
            while (window.find(str, false, true)) {
                n++;
            }
        } else {
            n++;
        }
        // If not found in either direction, give message.
        if (n == 0) {
            alert("Not found.");
        }
    } else if (window.document.body.createTextRange) {
        txt = window.document.body.createTextRange();
        // Find the nth match from the top of the page.
        found = true;
        i = 0;
        while (found === true && i <= n) {
            found = txt.findText(str);
            if (found) {
                txt.moveStart("character", 1);
                txt.moveEnd("textedit");
            }
            i += 1;
        }
        // If found, mark it and scroll it into view.
        if (found) {
            txt.moveStart("character", -1);
            txt.findText(str);
            txt.select();
            txt.scrollIntoView();
            n++;
        } else {
            // Otherwise, start over at the top of the page and find first match.
            if (n > 0) {
                n = 0;
                findInPage(str);
            }
            // Not found anywhere, give message. else
            alert("Not found.");
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:32:39.480

您可以通过 html 属性进行选择。

使用纯 JS（在现代浏览器中，包括 IE8+）：

```
document.querySelectorAll('[title*="my text"]') 
```

使用 jQuery：

```
$('[title*=my text]') 
```

会发现：

```
<img src="/path" title="this is a title with my text" /> 
```

从那里，您需要获取选择器返回的图像的页面位置，然后将页面滚动到该点，可选地（可能）有一些偏移量，这样它就不会撞到视口的顶部

**编辑**：

```
function findElementsByTitle(str) {
    return document.querySelectorAll('[title*="' + str + '"]');     
}

function scrollToElement(el) {
    var yOffset = el.offset().top; //this is a jQuery method...you don't want to write this in plain JS
    window.scrollTo(0, yOffset - 10) //params are x,y. the - 10 is just so your image has some "padding" in the viewport

} 
```

# c# - 将方法作为参数传递给函数

> ID：13993700
> 
> 赞同：0
> 
> 时间：2012-12-21T16:27:06.963
> 
> 标签：c#, sorting, delegates, func

有没有办法将方法作为参数传递给函数，然后通过 list.Sort() 调用它？我试过这个：

```
public static string BuildHumanSitemap(Func<TreeNode, TreeNode, int> sortMethod, params string[] classNames)
{
    //calling list sort on method passed as parameter
    nodes.sort(sortMethod);
 } 
```

我要传入的函数都采用相同的参数，例如

```
private static int SortByDateCreated(TreeNode x, TreeNode y)
{
    DateTime xT = (DateTime)x["DocumentCreatedWhen"];
    DateTime yT = (DateTime)y["DocumentCreatedWhen"];
    return xT.CompareTo(yT);
} 
```

我也尝试过使用`Action`委托类型，但是当我将它作为参数传递时，排序方法会报错。任何人都可以就如何做到这一点提出建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:33:34.543

创建新的比较委托并将其传递给 Sort 方法：

```
nodes.Sort(new Comparison<TreeNode>(sortMethod)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:44:56.367

`Func<,,>`也许你应该消费一个代表，而不是接受一个`Comparison<>`代表。因为这就是我们`List<>`想要的（由于历史原因；该`List<>.Sort`方法是为 .NET 2.0 编写的，在`Func`引入委托之前）。

所以：

```
public static string BuildHumanSitemap(Comparison<TreeNode> sortMethod, params string[] classNames)
{
  //calling list sort on method passed as parameter
  nodes.Sort(sortMethod);
} 
```

然后像这样非常简单地调用您的方法：

```
BuildHumanSitemap(SortByDateCreated); 
```

`SortByDateCreated`您的问题中的“方法组”在哪里。

没有必要先创建一个类型的委托实例，`Func<TreeNode, TreeNode, int>`然后创建另一个`Comparison<TreeNode>`引用第一个委托实例（类型）。

当然，您也可以`BuildHumanSitemap`使用 lambda 箭头作为第一个参数来调用您的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:31:37.047

它是这样工作的：

```
 TreeView.TreeViewNodeSorter = new CustomNodeSorter();

  private class CustomNodeSorter : IComparer
  {
     public int Compare(object x, object y)
     {
         DateTime xT = (DateTime)x["DocumentCreatedWhen"];
         DateTime yT = (DateTime)y["DocumentCreatedWhen"];
         return xT.CompareTo(yT);
     }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:32:33.293

解决方案`IComparer<T>`。

**比较器**

```
public class MyTreeNodeComparer : IComparer<TreeNode>
{
     public int Compare(TreeNode x, TreeNode y)
     {
         DateTime xT = (DateTime)x["DocumentCreatedWhen"];
         DateTime yT = (DateTime)y["DocumentCreatedWhen"];
         return xT.CompareTo(yT);
     }
} 
```

**用法**

```
list.Sort(new MyTreeNodeComparer()); 
```

# asp.net - 什么会在一台服务器上导致此错误，而在另一台服务器上不会？

> ID：13993703
> 
> 赞同：5
> 
> 时间：2012-12-21T16:27:13.337
> 
> 标签：asp.net, vb.net, web-services

我们有一个连接到外部 Web 服务的 ASP.Net 网站，几天前它突然停止工作。

基本代码是这样的：

```
Try
    request = New ExternalWebService.ProcessRequestService

    ' Error occurs here:
    response = request.processCommand(parameters)

    ' Do some other stuff with response here

Catch webEx As System.Net.WebException

    ' This triggers and generic error gets displayed

Catch ex As Exception

Finally

End Try 
```

`System.Net.WebException`触发`SendFailure`异常，并返回此堆栈跟踪：

```
底层连接已关闭：发送时发生意外错误。-
    在 System.Web.Services.Protocols.WebClientProtocol.GetWebResponse（WebRequest 请求）
    在 System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse（WebRequest 请求）
    在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke（字符串方法名，对象 [] 参数）
    在 ExternalWebService.ProcessRequestService.processCommand（参数）

```

当我尝试在我的开发机器上调试这个问题时，它工作正常并且没有发生异常。

我们的网络服务器最近没有更新，我可以使用 FireFox 从网络服务器连接到 wsdl 服务（但是我无法连接到 IE，但这可能与我们在网络服务器上使用 IE 时遇到的另一个问题有关）

我已经尝试了[此处](http://support.microsoft.com/kb/915599)针对错误消息 #2 发布的所有解决方案，包括设置`KeepAlive = False`和`ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3`，但是没有一个能够解决该问题。

我们的网络服务器正在运行 Windows Server 2003 和 IIS6.0

什么会导致此错误发生在一台机器上，而不是另一台机器上？

**编辑：**这是跟踪信息：

```
System.Web.Services.Asmx 信息：0：调用 XmlSerializer [创建 XmlSerializer]
    方法：System.Xml.Serialization.XmlSerializer#1669721556::FromMappings(System.Xml.Serialization.XmlMapping[]#4002219=[4], ExternalWebService.ProcessRequestService#93032588=ExternalWebService.ProcessRequestService)
    调用者：System.Web.Services.Protocols.SoapClientType#42808772::.ctor(ExternalWebService.ProcessRequestService#93032588=ExternalWebService.ProcessRequestService)
    进程 ID=2796
    逻辑操作栈=
    线程 ID=14
    日期时间=2012-12-21T17:02:39.2826250Z
    时间戳=61755143048799345
System.Web.Services.Asmx 信息：0：从 XmlSerializer 返回 [创建 XmlSerializer]
    调用者：System.Web.Services.Protocols.SoapClientType#42808772::.ctor(ExternalWebService.ProcessRequestService#93032588=ExternalWebService.ProcessRequestService)
    进程 ID=2796
    逻辑操作栈=
    线程 ID=14
    日期时间=2012-12-21T17:02:39.6576250Z
    时间戳=61755144323396760
System.Web.Services.Asmx 信息：0：调用 XmlSerializer [写入请求]
    方法：Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer#1231684::Serialize(System.Xml.XmlTextWriter#8023888=.., System.Object[]#19695157=[40], (null), (null))
    调用者：ExternalWebService.ProcessRequestService#60553900::Serialize()
    进程 ID=2796
    逻辑操作栈=
    线程 ID=14
    日期时间=2012-12-21T17:02:39.7357500Z
    时间戳=61755144598320131
System.Web.Services.Asmx 信息：0：从 XmlSerializer 返回 [Write Request]
    调用者：ExternalWebService.ProcessRequestService#60553900::Serialize()
    进程 ID=2796
    逻辑操作栈=
    线程 ID=14
    日期时间=2012-12-21T17:02:39.7357500Z
    时间戳=61755144621621529
System.Web.Services.Asmx 信息：0：调用 WebRequest.GetResponse
    方法：System.Net.HttpWebRequest#2800407::GetResponse()
    调用方：ExternalWebService.ProcessRequestService#60553900::GetWebResponse()
    进程 ID=2796
    逻辑操作栈=
    线程 ID=14
    日期时间=2012-12-21T17:02:39.7357500Z
    时间戳=61755144622114240

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:10:51.890

显然，在我的特殊情况下，这是因为网络服务供应商提高了他们的安全性，而我们的网络服务器没有正确的库来解密连接。

我们唯一的线索是一个 ID 为 36874 的系统事件查看器条目，几天前我们的网站停止工作的同一天有一个 Schannel 的来源，上面写着：

> 从远程客户端应用程序接收到 SSL 连接请求，但服务器不支持客户端应用程序支持的任何密码套件。SSL 连接请求失败。

但是，如果您自己调试此问题，[此链接](http://blogs.msdn.com/b/jpsanders/archive/2009/01/07/you-receive-one-or-more-error-messages-when-you-try-to-make-an-http-request-in-an-application-that-is-built-on-the-net-framework-2-0.aspx)非常有用，因为它对错误进行了一些简化的描述，为我指明了正确的方向，我的问题与无法连接到他们的 Web 服务有关。

> **底层连接已关闭：发送时发生意外错误**
> 
> 当客户端计算机无法发送 HTTP 请求时，会出现此问题。客户端计算机无法发送 HTTP 请求，因为连接已关闭或不可用。[在这篇文章http://support.microsoft.com/kb/915599](http://support.microsoft.com/kb/915599)中查找错误。

链接的 Microsoft 支持页面也非常详细地介绍了一些不同的解决方案，您可以尝试解决此问题的最常见原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:51:10.993

只是一个想法，不知道它是否好：几个月前在我们的一台服务器上发生了同样的事情，因为有人（安全团队？：/）更改了“%SYSTEMROOT%\Temp”文件夹的写入权限. 由于该操作，XMLSerializer 无法生成用于序列化/反序列化的临时程序集。

来自[http://www.hanselman.com/blog/ChangingWhereXmlSerializerOutputsTemporaryAssemblies.aspx](http://www.hanselman.com/blog/ChangingWhereXmlSerializerOutputsTemporaryAssemblies.aspx) ：

> 从 ASP.NET 使用 XmlSerializer 时，可以通过授予用户帐户对 %SYSTEMROOT%\Temp 文件夹的读/写权限来解决权限问题

因此，也许您可​​以检查您的应用程序池使用的帐户是否对“%SYSTEMROOT%\Temp”文件夹具有写入权限...

祝你好运...

# html - 自定义 YouTube 播放器 - 我可以在我的网站上嵌入这样的播放器吗？

> ID：13993706
> 
> 赞同：0
> 
> 时间：2012-12-21T16:27:18.810
> 
> 标签：html, iframe

想要一个嵌入式播放器，它还可以在播放列表中显示其他视频的缩略图或预览。我在 Youtube 上拥有的东西本身就是完美的。这是可行的吗？

[http://www.youtube.com/watch?v=T5ezOPDo6rE&list=PL972B9B9D1E7341C4](http://www.youtube.com/watch?v=T5ezOPDo6rE&list=PL972B9B9D1E7341C4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:54:26.653

嘿，尝试设置下面的 showinfo 变量是来自 youtube 开发页面的片段[here](https://developers.google.com/youtube/player_parameters#playlist)

> 如果播放器正在加载播放列表，并且您明确将参数值设置为 1，则在加载时，播放器还将显示播放列表中视频的缩略图。请注意，此功能仅支持 AS3 播放器，因为它是唯一可以加载播放列表的播放器。

这是一个例子[http://jsfiddle.net/cNwHc/](http://jsfiddle.net/cNwHc/)

```
 <iframe width="1280" height="720" src="http://www.youtube.com/embed/T5ezOPDo6rE?list=PL972B9B9D1E7341C4&showinfo=1" frameborder="0" allowfullscreen></iframe> 
```

# javascript - CSS background-image 不显示在 chrome 中，适用于其他浏览器

> ID：13993708
> 
> 赞同：3
> 
> 时间：2012-12-21T16:27:20.870
> 
> 标签：javascript, css, google-chrome, background-image

我在页面加载时使用 javascript 动态创建了一个 div。它在 IE9 和 Firefox 中正常工作，但在 chrome 中加载时它不显示背景图像。这是 chrome 中的错误，还是我错过了什么？

```
#dateTime{  
    background-image:url('datebg_transparent.png'); 
    background-repeat:no-repeat;
    background-attachment:fixed;
    background-position:top right; 
    text-align: right;
    padding-top: 5px;
    padding-right: 8px;
    position:fixed;
    color:white;
    font: Times;
    font-size: 1.5em;
    top:0px;
    right:0px;
    width: 50%; 
    height: 20%;
} 
```

如果这很重要，那就是创建它的 js。该函数被多次调用以重置 div 中显示的日期/时间，因此它首先检查 div 是否存在

```
 var dateDiv = document.getElementById('dateTime');
    if (!dateDiv) {
        dateDiv = document.createElement('div');
        dateDiv.id = 'dateTime';
        document.body.appendChild(dateDiv);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:42:50.857

很好的解决方案！你有这个：

```
dateDiv.style.width = "50%"; 
```

将其更改为：

```
dateDiv.style.width = "736px"; 
```

![在此处输入图像描述](../Images/077cf62f0092fcbe0b71a599ae9d7e3b.png)

# java - 2 没有serverSocket的客户端socket

> ID：13993714
> 
> 赞同：-3
> 
> 时间：2012-12-21T16:27:44.073
> 
> 标签：java, sockets, connection, serversocket

我试图在不使用任何服务器套接字的情况下在两个套接字之间建立通信。我知道服务器 Socket 有等待传入连接的 ServerSocket.accept() 方法。但是当我尝试打开一个没有服务器套接字的 ip 的套接字时，我不断收到异常：

```
java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at client1.<init>(client1.java:13)
    at client1Main.main(client1Main.java:9) 
```

这是我执行的第一个代码：

```
public class client1 {
    public client1() {
        try {
            Socket socket = new Socket("127.0.0.1",15123);
             BufferedReader in 
                = new BufferedReader(
                      new InputStreamReader(
                          socket.getInputStream()));
              PrintWriter out 
                = new PrintWriter(
                      new OutputStreamWriter(
                          socket.getOutputStream())); 
              while(true) {
                  System.out.println(in.readLine());
              }
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

}

public class client1Main {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    new client1();
} 
```

}

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:31:24.817

您为这项工作使用了错误的工具。不使用`ServerSocket`建议不使用 TCP。剩下 UDP，这意味着您应该切换到使用`DatagramSocket`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:29:34.423

你根本做不到。

您需要在您尝试连接的端口上侦听的东西，这可以通过服务器套接字完成。

TCP 没有解决方法。

# c# - 替换文件中的文本

> ID：13993721
> 
> 赞同：0
> 
> 时间：2012-12-21T16:28:11.017
> 
> 标签：c#, .net, writealltext

我编写了一个方法，它将遍历所有文本文件，替换文本，并使用所述更改更新文本框。它在我第一次运行后工作，但随后的执行似乎推断出文件第一次没有更改。

```
private void changeText(string searchString, string newString, FileInfo[] listOfFiles)
{
    foreach (FileInfo tempfi in listOfFiles)//Foreach File
    {
        string fileToBeEdited = tempfi.FullName;
        File.SetAttributes(fileToBeEdited, File.GetAttributes(fileToBeEdited) & ~FileAttributes.ReadOnly); //Remove ReadOnly Property
        string strFile = System.IO.File.ReadAllText(fileToBeEdited); //Reads In Text File
        if(strFile.Contains(newString))//If the replacement string is contained in the text file
        {
            strFile = strFile.Replace(searchString, newString);
            System.IO.File.WriteAllText(fileToBeEdited, strFile); //Write changes to File
            myTextBox.Text = "File Changed: " + fileTobeEdited.ToString() + Environment.NewLine; //Notify User
        }
    }
} 
```

如果我运行 1 次或 100 次，我的文本文件就会更新得很好。如果我第二次运行它，我的文本框会重新更新，说它更新了新文件。

我希望此方法在第一次运行后找不到任何要替换的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:49:14.550

变量`fileToBeEdited`未初始化。

您必须查找包含`searchString`not的文件`newString`！

```
private void changeText(string searchString, string newString, FileInfo[] listOfFiles)
{
    foreach (FileInfo tempfi in listOfFiles) {
        string fileToBeEdited = tempfi.FullName; // <== This line was missing
        File.SetAttributes(tempfi.FullName, File.GetAttributes(fileToBeEdited) &
                                            ~FileAttributes.ReadOnly);
        string strFile = System.IO.File.ReadAllText(fileToBeEdited);
        if (strFile.Contains(searchString)) { // <== replaced newString by searchString
            strFile = strFile.Replace(searchString, newString);
            System.IO.File.WriteAllText(fileToBeEdited, strFile);
            myTextBox.Text = "File Changed: " + fileToBeEdited.ToString() +
                             Environment.NewLine;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:33:41.303

看起来您实际上并没有更改文件。您正在检查文件中是否包含字符串，如果是，则将该文件写回。你必须做这样的事情：

```
 private void changeText(string searchString, string newString, FileInfo[] listOfFiles)
{
    foreach (FileInfo tempfi in listOfFiles)//Foreach File
    {
        File.SetAttributes(fileToBeEdited, File.GetAttributes(fileToBeEdited) & ~FileAttributes.ReadOnly); //Remove ReadOnly Property
        string strFile = System.IO.File.ReadAllText(fileToBeEdited); //Reads In Text File
        if(strFile.Contains(newString))//If the replacement string is contained in the text file
        {
            strFile = strFile.Replace(searchString,newString); // make the changes
            System.IO.File.WriteAllText(fileToBeEdited, strFile); //Write changes to File
            myTextBox.Text = "File Changed: " + fileTobeEdited.ToString() + Environment.NewLine; //Notify User
        }
    }
} 
```

然后您将能够实际保存对文件的更改，并在第一次运行后写入新文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:33:52.580

也许我误读了代码，但您似乎错过了替换！

```
 string strFile = System.IO.File.ReadAllText(fileToBeEdited); //Reads In Text File
    if(strFile.Contains(searchString))//If the replacement string is contained in the text file
    {
        strFile = strFile.Replace(searchString, newString);
 .... 
```

另请注意我如何检查文件是否包含搜索字符串，而不是新字符串。

# python - Heroku：用户警告：使用 settings.DEBUG 会导致内存泄漏，切勿在生产环境中使用此设置

> ID：13993723
> 
> 赞同：0
> 
> 时间：2012-12-21T16:28:27.917
> 
> 标签：python, django, git, heroku, python-2.7

如何在 heroku 中使用我的生产设置？这是我第一次尝试我创建的任何项目部署，所以我可能做错了事。我有一个 settings.py 文件和一个 settings_production 文件，但我似乎无法弄清楚如何让生产设置正常工作。我尝试将我的 manage.py 从

```
"DJANGO_SETTINGS_MODULE", "myproject.settings" 
```

到

```
"DJANGO_SETTINGS_MODULE", "myproject.settings_production" 
```

然后使用命令

```
git add .
git commit -m "production settings" 
```

而且我也刚刚尝试在我的 settings.py 文件中将 DEBUG 更改为 False。您如何提交对 heroku 中设置的更改或指向正确的文件？我能够成功完成本教程，但我没有运气尝试部署我的项目。此外，是否应该将代码添加到 manage.py 以检查它是生产环境还是开发环境并相应地使用正确的设置文件，还是我手动更改它？仍在学习，所以我可能做错了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:34:09.273

在 Heroku 中，[您可以配置环境变量](https://devcenter.heroku.com/articles/config-vars)——它们被称为 config vars。

`DJANGO_SETTINGS_MODULE`环境变量应设置`myproject.settings_production`为.

* * *

您`manage.py`可能没有在 Heroku 中运行（还有其他方法可以运行 Django 应用程序），这就是您的更改不起作用的原因。

# html - 使用 knitr（从 .Rhtml 到 html）：如何在 R 图中嵌入链接？

> ID：13993725
> 
> 赞同：6
> 
> 时间：2012-12-21T16:28:28.427
> 
> 标签：html, r, ggplot2, knitr

我正在使用 knit 将我的 .Rhtml 文件转换为 .html 文件。我正在调用一个名为 Q1 的块的输出：

```
<!--begin.rcode Q1,echo=FALSE,fig.show="all",fig.align="center",warning=FALSE 
end.rcode--> 
```

块来了，它基本上是一个 2x2 布局的 ggplot2 图形。

```
library(ggplot2)
myplot = list()
   for (i in 1:4){
          x = 1:100
          y = sample(100,100)
          data = data.frame(x=x,y=y)
          myplot[[i]] = ggplot(data,aes(x=x,y=y))+geom_point()+labs(title="bla")}

do.call(grid.arrange,c(myplot,list(nrow=2,ncol =2))) 
```

现在，在查看生成的 html 文件时，我想加入以下功能：单击每个图的标题时，我想有一个链接（例如到数据库）。这有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:05:01.100

这并不能完全回答您的问题，但它可能会让您或其他人开始获得完整的答案。

Paul Murrel 的[**gridSVG**包](http://cran.r-project.org/web/packages/gridSVG/index.html)（另请参见[这个有用的 pdf 文档](http://www.stat.auckland.ac.nz/~paul/gridSVG/gridsvg.pdf)）允许将超链接添加到基于**网格**的 SVG 图形。（理论上它应该与**ggplot2**一起使用；在实践中，我刚刚让它与**lattice**一起使用）。当前[一期的 R 期刊](http://journal.r-project.org/archive/2012-2/2012-2_index.html)包括几篇文章（[“名字里有什么？”](http://journal.r-project.org/archive/2012-2/RJournal_2012-2_Murrell.pdf)和[“调试网格图形。”](http://journal.r-project.org/archive/2012-2/RJournal_2012-2_Murrell+Ly.pdf) ——警告：pdfs），它们可能会帮助您最好地设计动态搜索，以查找您要访问的 grob 的名称'想添加一个链接（如我的第二行代码）。

```
library(gridSVG)
library(lattice)

xyplot(mpg~wt, data=mtcars, main = "Link to R-project home")
mainGrobName <- grep("main", grid.ls()[[1]], value=TRUE)
grid.hyperlink(mainGrobName, "http://www.r-project.org")
gridToSVG("HyperlinkExample.svg") 
```

# abap - ABAP 中 MOVE 和 = assignment 之间的性能差异

> ID：13993737
> 
> 赞同：7
> 
> 时间：2012-12-21T16:29:09.660
> 
> 标签：abap

'MOVE TO' 与 x = y 之间是否有任何性能提升？我有一个非常旧的程序正在优化，我想知道是否值得将所有 MOVE TO 取出。任何其他关于 ABAP 优化的一般技巧也会很棒。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T18:38:48.697

不，这只是以两种不同方式表达的相同操作。那里没有任何收获。如果您不希望获得一般提示，那么我建议您详细[阅读一本好书。](https://www.sap-press.com/abap-performance-tuning_2092/)如果您必须优化特定程序，请使用跟踪工具（`SAT`最新版本中的事务）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:38:29.193

这两个语句是[等价](http://help.sap.com/saphelp_nw2004s/helpdata/en/fc/eb3260358411d1829f0000e829fbfe/content.htm)的：

" 要将数据对象源的值分配给变量目标，请使用以下语句：

```
MOVE source TO destination. 
```

或等效的语句

```
destination = source. 
```

"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-10T16:29:30.063

不，它们是一样的。

以下是我多年的性能提升中的一些快速提示：

1）如果您尽可能使用移动对应，您的代码可以更加简洁、模块化和可扩展（在遥远的过去，这是不受欢迎的，但技术原因通常不再适用）。

2）一有机会就使用SAT，并确保打开内部表格跟踪。这就像打开灯而不是在黑暗中绊倒家具。

3）让数据库层为你做尽可能多的工作。尽可能尝试组合查询，尤其是在组合结果集时。通过连接链接的两个查询通常比 select > itab > select FOR ALL ENTRIES 好得多。

4) 这有点高级，但 FOR ALL ENTRIES 的性能通常比等效的 select-options IN 短语慢得多。这似乎是因为后者是作为对数据库层的一个大查询而构建的，而前者需要多次访问数据库层。当然，需要注意的是，如果您的选择选项中有太多记录，则在数据库层生成的查询将超过系统允许的大小，但在该限制内可能会获得很大的性能提升。一般来说，SAP 只喜欢选择选项。

5）索引，索引，索引！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-13T12:57:42.437

首先，移动并没有真正影响太多性能。

在我工作的项目中影响很大的是：

1.  嵌套循环（非常邪恶）。例如，循环遍历所有文档，并为每个文档选择单个以检查它是否允许显示公司代码。取而代之的是，列出公司代码，从 db 中查询一次，然后查询此结果表。

2.  尽可能使用哈希表或排序表。在不可能的情况下，使用标准表，但按键排序并使用“二进制搜索”。

3.  按所有关键字段从数据库中选择。如果不可能，请考虑创建索引。对于小而简单的选择，请使用连接。对于更大的选择，使用连接仍然会更快，但很难跟进。

4.  小事 - 使用字段符号读取表格行，这使它更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T13:07:06.303

1) 在 ABAP 语言中使用 SELECT 语句时应该小心。不必要的数据库连接会显着**降低**ABAP 程序的性能。

2）在使用带有函数的内部表时，您应该通过引用来调用它以减少内存使用。

*引用调用*：传递一个指向内存位置的指针。对子程序内的变量所做的更改会影响子程序外的变量。

3) 不应将内部表与工作区一起使用。

4）在使用**嵌套循环**时，使用排序算法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-13T15:39:10.673

它们是相同的，`ADD`关键字和`+`运算符也是如此。

如果您确实想优化 ABAP，我发现最大的罪魁祸首是：

*   未正确使用二进制查找和/或（内部）表键。ABAP 的语法在使用表时是脑死的。知道如何有效地使用表格。基本上写出更好/最优/优雅的高级代码。这永远是赢家！

*   更少的指令==更少的时间。您点击的指令越少，程序运行的速度就越快。这在紧密循环中很重要……我知道这听起来很明显，但 ABAP 太慢了，如果你真的想优化关键程序，这会有所作为。（我们有运行数天的流程……缩短一个小时左右会有所不同！）

*   不要混合类型。一些隐式转换有一些开销......例如，如果您正在初始化 `string`数据类型，则使用带有（反引号）引号的正确文字字符串：`literal`。这对于使用键在表中查找也很重要……使用完全匹配的数据类型。

*   函数调用......我不能足够强调函数调用的开销......你拥有的越少越好。与真正的计算机程序员所相信的一切背道而驰，但是你有它...... ABAP 是一个特例。

*   循环使用`ASSIGNING`（或`REF TO`- 在某些类型上稍慢），避免 INTO 像瘟疫一样。

PS：还请记住，`SWITCH`语句只是美化`IF`的条件......因此将最常见的条件移到顶部！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-07T14:35:46.797

您可以使用 ADT Eclipse 创建 CDS。或者视图（se11）具有良好的选择性能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-08T09:32:18.370

"MOVE a TO" b 和 "a = b" 在 ABAP 中是一样的。没有性能差异“MOVE”只是一个更明显、更引人注目的版本。

但是，如果您谈论“MOVE-CORRESPONDING”，是的，存在性能差异。编码更实用，但实际上运行速度比直接移动要慢。

# c++ - 打开 GL 创建 4 个视图，如 3ds max 或 maya

> ID：13993741
> 
> 赞同：1
> 
> 时间：2012-12-21T16:29:22.657
> 
> 标签：c++, opengl

如何在 Open GL 中创建 4 个视图（左/上/透视/前）？

我用过这个：

```
int main(int c,char ** argv)
{
    glutInit(&c,argv);
    glutInitDisplayMode(GLUT_DOUBLE |GLUT_DEPTH |GLUT_RGB );
    glutInitWindowSize(w,h);
    MainWin =glutCreateWindow("Teapot Window");
    glutDisplayFunc(display);

    LeftWin = glutCreateSubWindow(MainWin,0,0,s_window_w,s_window_h);
    glutDisplayFunc(displayLeft);
    glutReshapeFunc(reshapeLeft);

    TopWin = glutCreateSubWindow(MainWin,s_window_w+3,0,s_window_w,s_window_h);
    glutDisplayFunc(displayTop);
    glutReshapeFunc(reshapeTop);

    PerspectiveWin = glutCreateSubWindow(MainWin,0,s_window_h+3,s_window_w,s_window_h);
    glutDisplayFunc(displayPerspective);
    glutReshapeFunc(reshapePerspective);

    FrontWin = glutCreateSubWindow(MainWin,s_window_w+3,s_window_h+3,s_window_w,s_window_h);
    glutDisplayFunc(displayFront);
    glutReshapeFunc(reshapeFront);

    glutMainLoop();
    return 0;
} 
```

然后我做了顶部和左侧的投影，如下所示：

```
glViewport(0,0,w,h);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(-0.5f,0.5f,-0.35f,0.35f,1,500); 
```

当我也使用前面的顶线时，输出是这样的： ![在此处输入图像描述](../Images/cd04065ba49b0a56e93ac8d981886cae.png)

我的错在哪里？提前致谢

为什么前视图是空的，而透视图和左视图是一样的？？对于透视投影，我使用了 glFrustum .... 那么我错了吗？请帮助创建多个视图，如 3ds max 或 maya ...下面是显示功能的代码：

```
void displayLeft()
{
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0,0,-1,0,0,0,0,1,0);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glLightfv(GL_LIGHT0,GL_POSITION,light_pos);

    glShadeModel(GL_SMOOTH);
    glClearColor(0.2f,0.3f,0.4f,1);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glPushMatrix();
    glEnable(GL_COLOR_MATERIAL);
    glTranslatef(teapot_x,teapot_y,teapot_z);
    glRotatef(teapot_angle,0,1,0);
    glColor3f(0,1,0);
    glutSolidTeapot(0.2f);

    glPopMatrix();
    glFlush();
    glutSwapBuffers();
}
void displayTop()
{
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0,-1,0,0,0,0,0,0,-1);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glLightfv(GL_LIGHT0,GL_POSITION,light_pos);

    glShadeModel(GL_SMOOTH);
    glClearColor(0.2f,0.3f,0.4f,1);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glPushMatrix();
    glEnable(GL_COLOR_MATERIAL);
    glTranslatef(teapot_x,teapot_y,teapot_z);
    glRotatef(teapot_angle,0,1,0);
    glColor3f(0,1,0);
    glutSolidTeapot(0.2f);

    glPopMatrix();
    glFlush();
    glutSwapBuffers();
}
void displayFront()
{
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0,0,0,0,0,0,1,0,0);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glLightfv(GL_LIGHT0,GL_POSITION,light_pos);

    glShadeModel(GL_SMOOTH);
    glClearColor(0.2f,0.3f,0.4f,1);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glPushMatrix();
    glEnable(GL_COLOR_MATERIAL);
    glTranslatef(teapot_x,teapot_y,teapot_z);
    glRotatef(teapot_angle,0,1,0);
    glColor3f(0,1,0);
    glutSolidTeapot(0.2f);

    glPopMatrix();
    glFlush();
    glutSwapBuffers();
}
void displayPerspective()
{

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0,0,-1,0,0,0,0,1,0);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glLightfv(GL_LIGHT0,GL_POSITION,light_pos);

    glShadeModel(GL_SMOOTH);
    glClearColor(0.2f,0.3f,0.4f,1);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glPushMatrix();
    glEnable(GL_COLOR_MATERIAL);
    glTranslatef(teapot_x,teapot_y,teapot_z);
    glRotatef(0,0,1,0);
    glColor3f(0,1,0);
    glutSolidTeapot(0.2f);

    glPopMatrix();
    glFlush();
    glutSwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:17:47.983

使用`glViewport`和`glScissor`剪切窗口的窗格。然后像往常一样为每个窗格执行渲染。设置投影矩阵其实是一个绘图状态操作，所以属于显示功能，不是reshape。

您的显示功能应该变成类似

```
void ViewportScissor(int x, int y, int width, int height)
{
    glViewport(x, y, width, height);
    glScissor(x, y, width, height);
}

void display(void)
{

    int const win_width  = glutGet(GLUT_WINDOW_WIDTH);
    int const win_height = glutGet(GLUT_WINDOW_HEIGHT);

    glDisable(GL_SCISSOR);
    glClear(…);

    glEnable(GL_SCISSOR);

    ViewportScissor(0, 0, win_width/2, win_height/2);
    glMatrixMode(GL_PROJECTION);
    setup_frontview_projection();
    glMatrixMode(GL_MODELVIEW);
    setup_frontview();
    draw_scene();

    ViewportScissor(win_width/2, 0, win_width/2, win_height/2);
    glMatrixMode(GL_PROJECTION);
    setup_rightview_projection();
    glMatrixMode(GL_MODELVIEW);
    setup_rightview();
    draw_scene();

    ViewportScissor(0, win_height/2, win_width/2, win_height/2);
    glMatrixMode(GL_PROJECTION);
    setup_topview_projection();
    glMatrixMode(GL_MODELVIEW);
    setup_topview();
    draw_scene();

    ViewportScissor(win_width/2, win_height/2, win_width/2, win_height/2);
    glMatrixMode(GL_PROJECTION);
    setup_freecamview_projection();
    glMatrixMode(GL_MODELVIEW);
    setup_freecamview();
    draw_scene();

    glutSwapBuffers();

} 
```

添加分割线/框架留给读者作为练习。

# c - 有什么方法可以查看标准输入缓冲区吗？

> ID：13993742
> 
> 赞同：24
> 
> 时间：2012-12-21T16:29:26.900
> 
> 标签：c, buffer, stdin, peek

我们知道，`stdin`默认情况下，这是一个缓冲输入；证明是使用任何“保留数据”的机制`stdin`，例如`scanf()`：

```
int main()
{
    char c[10] = {'\0'};
    scanf("%9s", c);
    printf("%s, and left is: %d\n", c, getchar());
    return 0;
} 
```

> ./a.out
> 你好
> 你好，左边是10

`10`当然是换行...

我一直很好奇，有没有什么办法可以“偷看”`stdin`缓冲区而不删除那里可能存在的任何东西？

**编辑**
一个更好的例子可能是：

```
scanf("%9[^.]", c); 
```

输入“at.ct”，现在我`ct\n`留下了“数据”（）`stdin`，而不仅仅是换行符。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T17:20:45.067

可移植地，您可以使用 获取输入流中的下一个字符，`getchar()`然后使用 将其推回`ungetc()`，这会产生一种状态，就好像该字符没有从流中删除一样。

> 该`ungetc`函数将`c`（转换为`unsigned char`）指定的字符推回流指向的输入流。被推回的字符将由该流上的后续读取以与推入相反的顺序返回。

标准只保证一个回退字符，但通常可以回退更多。

正如其他答案中提到的那样。那里的评论，在实践中，如果你为自己的缓冲区提供 ，你几乎可以肯定地偷看缓冲区`setvbuf`，尽管这并非没有问题：

> 如果`buf`不是空指针，则可以使用它指向的数组而不是`setvbuf`函数分配的缓冲区

这留下了提供的缓冲区可能根本不被使用的可能性。

> 数组的内容在任何时候都是不确定的。

这意味着您无法保证缓冲区的内容反映实际输入（如果我们很挑剔，如果它具有自动存储持续时间，它会使用缓冲区未定义的行为）。

然而，在实践中，主要问题将是找出缓冲输入中尚未使用的部分在缓冲区中的何处开始以及在何处结束。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T16:36:15.063

您可以在标准输入上设置自己的缓冲区[`setvbuf`](http://en.cppreference.com/w/c/io/setvbuf)，并随时查看。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T17:26:48.447

如果您想查看`stdin`缓冲区而不更改它，您可以告诉它使用另一个缓冲区[`setbuf`](http://www.cplusplus.com/reference/cstdio/setbuf/)，使用您可以访问的数组：

```
char buffer[BUFSIZ];

if (setbuf(stdin, buffer) != 0)
  // error

getchar();

printf("%15s\n", buffer); 
```

这让你看到的不仅仅是`ungetc`，但我认为你不能以便携的方式走得更远。

实际上这是合法的，但对于标准来说是不正确的，引用它关于`setvbuf`(`setbuf`具有相同的行为)：

> 数组的内容在任何时候都是不确定的。

因此，如果您正在寻找完全的可移植性和标准合规性，这不是您所需要的，但我无法想象为什么缓冲区不应该包含预期的内容。但是，它似乎可以在我的计算机上运行。

请注意，您必须向 提供一个至少包含`BUFSIZ`字符的数组`setbuf`，并且您不能对它之前的流进行任何 I/O 操作。如果您需要更大的灵活性，请查看[`setvbuf`](http://www.cplusplus.com/reference/cstdio/setbuf/).

# c++ - 当函数有很多参数并且客户端代码只需要更改其中的几个时，如何处理？

> ID：13993743
> 
> 赞同：2
> 
> 时间：2012-12-21T16:29:28.277
> 
> 标签：c++, function, named-parameters

在那种情况下如何不迷路？例如，这是一个返回 bool 但接受 10 个参数的函数：

```
bool myFunc(bool par1 = true, bool par2 = false, bool par3 = true,
  bool par4 = true /* and so on */ ) {} 
```

假设函数参数在 90% 的情况下设置为默认值。但有时客户端代码只想更改其中的几个。我在这里看到的唯一选择是煞费苦心地复制所有默认参数，直到我们找到需要更改的参数。以这种方式调用此函数的任何机会：

```
bool myVal = myFunc(par10 = true, par20 = false); 
```

因此，任何阅读代码的人都知道代码发生了什么（参数的名称很长但很有意义），而且当我更改函数定义时，每当调用它来更新默认参数时，我都不需要查看？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T16:38:26.990

有一个成语比较有名：命名参数成语。

这个想法很简单：

```
class Parameters {
public:
    Parameters(): _1(true), _2(false), _3(true), _4(true) {}

    bool get1() const { return _1; }
    bool get2() const { return _2; }
    bool get3() const { return _3; }
    bool get4() const { return _4; }

    Parameters& set1(bool t) { _1 = t; return *this; }
    Parameters& set2(bool t) { _2 = t; return *this; }
    Parameters& set3(bool t) { _3 = t; return *this; }
    Parameters& set4(bool t) { _4 = t; return *this; }

private:
    bool _1;
    bool _2;
    bool _3;
    bool _4;
};

bool myFunc(Parameters p); 
```

然后客户端可以这样做：

```
result = myFunc(Parameters()); 
```

或者：

```
result = myFunc(Parameters().set4(false)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:36:18.070

看看[boost.parameter](http://www.boost.org/doc/libs/1_50_0/libs/parameter/doc/html/index.html)库。

> 使用此库编写可以按名称接受参数的函数和类模板：
> 
> ```
>  new_window("alert", _width=10, _titlebar=false);
>  smart_ptr<Foo, deleter<Deallocate<Foo> >, copy_policy<DeepCopy> > p(new Foo); 
> ```
> 
> 由于命名参数可以按任何顺序传递，因此当函数或模板具有多个具有有用默认值的参数时，它们特别有用。该库还支持推导参数；也就是说，可以从其类型推导出其身份的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:38:00.930

这是应避免使用此类接口的原因之一。为您的 func 创建一个包装器，接受包含所有参数的结构。在客户端实例化默认配置（只要你想调用你的函数就让它可用；例如在对象上下文中）。每当您想调用 func 时，将配置复制到另一个实例，更改您想要的值并将其传递给您包装的 func。

或者，更好的是，如果可能的话，直接更改函数签名而不使用包装器以接受聚合配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:33:09.027

使用可以使用`boost::bind`（在 C++03 上）或`std::bind`（在 C++11 上）重新排序和修复函数的一些参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T16:49:03.230

如果您遇到某些参数仅成对有意义的情况，请使用重载函数。

所以代替例如（对不起，现在没有更好的例子）

```
// Adds a new TODO. Either this is a low-prio TODO with no defined 
// deadline, xor a deadlined TODO for which year, month, day must
// be passed.
void add_todo (std::string description, int year=-1, int month=-1, int day=-1); 
```

做

```
void add_todo (std::string description, int year, month, day);

void add_todo (std::string description) {
    add_todo(description, -1, -1, -1);
} 
```

因此要强制执行两个可能的调用签名中的一个且仅一个。

当然，最好添加更多结构，例如`Date`. 但即便如此，我*也不*建议`Date`仅仅为了它而使“可空”：

```
void add_todo (std::string description, Date = Date::None); // <-- I wouldn't 
```

反而

```
void add_todo (std::string description);
void add_todo (std::string description, Date deadline); 
```

或者有时没有过载，也没有默认值

```
void add_todo (std::string description);
void add_deadlined_todo (std::string description, Date deadline); 
```

# java - 通过使用通用“扩展”添加字符串会导致编译器错误

> ID：13993745
> 
> 赞同：1
> 
> 时间：2012-12-21T16:29:32.617
> 
> 标签：java

下面的代码：

```
List<? extends String> genericNames = new ArrayList<String>();
genericNames.add("John"); 
```

给出编译器错误：

> 此行有多个标记 - List 类型中的方法 add(capture#1-of ? extends String) 不适用于参数 (String) - List 类型中的方法 add(capture#1-of ?) 不适用适用于参数（字符串）

是什么导致了这个错误？由于我在类型参数中扩展字符串，我是否应该无法添加字符串或其子类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T16:30:53.597

**当您使用带扩展的通配符时，除了null**之外，您不能在集合中添加任何内容。此外，String 是最终类；没有什么可以扩展字符串。

**原因：**如果允许，您可能只是将错误的类型添加到集合中。

例子：

```
class Animal {

}

class Dog extends Animal {

}

class Cat extends Animal {

} 
```

现在你有`List<? extends Animal>`

```
public static void someMethod(List<? extends Animal> list){
    list.add(new Dog()); //not valid
} 
```

你调用这样的方法：

```
List<Cat> catList = new ArrayList<Cat>(); 
someMethod(catList); 
```

如果允许在使用带扩展的通配符时添加到集合中，您只需将 Dog 添加到仅接受 Cat 或子类型类型的集合中。因此，您不能将任何内容添加到使用具有上限的通配符的集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:53:55.353

只想添加到 GanGnaMStYleOverFlow 的答案，您可以将任何子类型的对象添加`Animal`到以下列表中：

```
List<Animal> animals = new ArrayList<Animal>(); 
```

每当您认为它可以包含任何种类的动物时，您都应该使用此类列表。

另一方面，`List<? extends Animal>`当您想指定列表包含某种动物但您不知道是哪一种时，您应该使用。由于您不知道那里有哪些动物，因此您无法添加任何动物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:47:12.067

`String`是最终类，不能扩展。此外，对于您似乎感兴趣的情况，您不需要 extends 关键字。 `List<String>`会做你想做的事。这将允许 Strings 和 String 的子类（如果这样的东西可能存在，它不能因为 String 是最终的）。

# java - 通过 SWIG 处理 Java 中的 C++ 异常

> ID：13993747
> 
> 赞同：9
> 
> 时间：2012-12-21T16:29:33.993
> 
> 标签：java, c++, swig

我正在尝试使用 SWIG 将 C++ 类包装到 Java 类中。这个 C++ 类有一个引发异常的方法。

我有三个目标，尽管我按照我的理解遵循了手册，但目前都没有实现：

*   让 Java 类`throws <exceptiontype>`在 C++ 中抛出的方法上声明
*   让 SWIG 生成的异常类扩展`java.lang.Exception`
*   `Exception.getMessage()`在生成的 SWIG 类中覆盖。

似乎问题的根源似乎是 my `typemap`s 没有被应用，因为以上都没有发生。我做错了什么？

最小的例子如下。C++ 不必编译，我只对生成的 Java 感兴趣。异常的类别无关紧要，下面的代码使用 IOException 只是因为文档使用它。所有代码均改编自此处的示例：

*   [http://www.swig.org/Doc1.3/Java.html#typemap_attributes](http://www.swig.org/Doc1.3/Java.html#typemap_attributes)
*   [http://www.swig.org/Doc1.3/Java.html#exception_typemap](http://www.swig.org/Doc1.3/Java.html#exception_typemap)

C++ 头文件（test.h）：

```
#include <string>

class CustomException {
private:
  std::string message;
public:
  CustomException(const std::string& message) : message(msg) {}
  ~CustomException() {}
  std::string what() {
    return message;
  }
};

class Test {
public:
  Test() {}
  ~Test() {}
  void something() throw(CustomException) {};
}; 
```

SWIG .i 文件：

```
%module TestModule
%{
#include "test.h"
%}

%include "std_string.i" // for std::string typemaps
%include "test.h"

// Allow C++ exceptions to be handled in Java
%typemap(throws, throws="java.io.IOException") CustomException {
  jclass excep = jenv->FindClass("java/io/IOException");
  if (excep)
    jenv->ThrowNew(excep, $1.what());
  return $null;
}

// Force the CustomException Java class to extend java.lang.Exception
%typemap(javabase) CustomException "java.lang.Exception";

// Override getMessage()
%typemap(javacode) CustomException %{
  public String getMessage() {
    return what();
  }
%} 
```

使用 SWIG 2.0.4运行它时`swig -c++ -verbose -java test.i`，异常类不会扩展`java.lang.Exception`，并且所有 Java 方法都没有`throws`声明。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T11:43:18.833

当你看到这个时，你会踢自己。SWIG 界面的固定版本是：

```
%module TestModule
%{
#include "test.h"
%}

%include "std_string.i" // for std::string typemaps

// Allow C++ exceptions to be handled in Java
%typemap(throws, throws="java.io.IOException") CustomException {
  jclass excep = jenv->FindClass("java/io/IOException");
  if (excep)
    jenv->ThrowNew(excep, $1.what());
  return $null;
}

// Force the CustomException Java class to extend java.lang.Exception
%typemap(javabase) CustomException "java.lang.Exception";

// Override getMessage()
%typemap(javacode) CustomException %{
  public String getMessage() {
    return what();
  }
%}

%include "test.h" 
```

即`%include "test.h"`出现*在*您希望应用于 test.h 中的类的类型映射之后，而不是之前。SWIG 需要在首次看到它们应用的类时看到类型图。

# javascript - 单击按钮后加载javascript文件

> ID：13993748
> 
> 赞同：3
> 
> 时间：2012-12-21T16:29:33.923
> 
> 标签：javascript, jquery, onload

我正在尝试使用一组文本框在我的 JavaScript 文件中定义一些数据。所以在一个文本框中我输入了一个团队名称“团队名称”，javascript 文件使用这个文本框来存储一个团队的名称，以便打印一组锦标赛括号。

javascript 文件包含在我的文件中，`<head>` 因此它会在我实际在文本框中输入数据之前加载。我在 html 中有一个按钮的代码，如下所示：

```
script(type='text/javascript')
    $('#buttontest').click(function() {
        $('div.bracket').show();
        $('div.teamList').hide();
    }); 
```

因此，当按下按钮时，文本框全部隐藏，并且应该出现带有用户定义团队名称的括号......这是我的 javascript 文件末尾的代码：

```
$(function() {
    $('#singleElim8').bracket({
        init: singleElim8Data
    })
  $('.bracket').hide();
}); 
```

所以在 div.bracket 我有 javascript 使用的类 #singleElim8 。但是我将如何更改它，以便这个用于初始化括号的 javascript 仅在单击按钮后运行？这样，括号在文本框被填充后呈现。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T16:58:56.910

只需使用[`getScript`jQuery的方法](http://api.jquery.com/jQuery.getScript/)

非常容易使用

```
$( '#buttontest' ).on( 'click', function() {
    $.getScript( 'url to your js file', function( data, textStatus, jqxhr ) {
        // do some stuff after script is loaded
    } );
} ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:34:29.023

当您将函数作为参数传递给 jQuery 时，它将在 document.ready() 期间执行该函数。它允许您的页面在执行它们之前加载所有脚本。

```
$(function() {
    $('#buttontest').click(function() {
        $('div.bracket').show();
        $('div.teamList').hide();
    });

    $('#singleElim8').bracket({
        init: singleElim8Data
    })
  $('.bracket').hide();
}); 
```

# c# - async 和 await 关键字不会导致创建额外的线程？

> ID：13993750
> 
> 赞同：26
> 
> 时间：2012-12-21T16:29:38.377
> 
> 标签：c#, multithreading, task-parallel-library, async-await, conceptual

我很困惑。一个或多个如何`Task`在单个线程上并行运行？我对*并行*性的理解显然是错误的。

一些 MSDN 我无法理解：

> async 和 await 关键字不会导致创建额外的线程。异步方法不需要多线程，因为异步方法不在其自己的线程上运行。该方法在当前同步上下文上运行，并且仅在该方法处于活动状态时才使用线程上的时间。

.. 和：

> 在开始任务和等待它之间，您可以开始其他任务。附加任务隐式并行运行，但不创建附加线程。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-21T16:32:57.897

它们不是并行运行，而是轮流运行。当正在运行的任务的进度被阻止时，它会存储其状态并将控制权交给就绪的任务。这是协作式多任务处理，而不是真正的并行性。

线程按样本原理运行。但是，我想强调几个关键区别。

首先，仅仅因为`async`/`await`不是操作系统线程：

*   任务不会看到不同的线程 ID
*   当任务产生时，线程本地存储不会自动进行上下文切换。

其次，行为上的差异：

*   `async`/`await`使用协作多任务，Win32 线程使用抢占式。因此，所有阻塞操作都必须使用`async`/`await`模型显式地产生控制。因此，您可以通过对未编写为 yield 的函数进行阻塞调用来最终阻塞整个线程及其所有任务。
*   任务不会在多处理系统上并行执行。由于控制了重入，这使得保持数据结构的一致性变得更加容易。

正如斯蒂芬在评论中指出的那样，如果您使用多线程同步上下文，您*可以*在多个操作系统线程中同时执行（以及所有复杂性和潜在的竞争条件）。但是 MSDN 的引用是关于单线程上下文案例的。

最后，在其他地方也使用了相同的设计范例，您可以通过研究这些来了解很多关于`async`/的良好实践的信息：`await`

*   Win32 *Fibers*（使用与线程相同的调用方式，但协作）
*   Win32*重叠 I/O*操作，Linux *aio*
*   *协程*

# wpf - 通过其按钮删除列表框中的项目

> ID：13993767
> 
> 赞同：0
> 
> 时间：2012-12-21T16:30:41.883
> 
> 标签：wpf, templates, .net-4.0, listbox, wpf-controls

我有一个代表歌曲的模板：

```
<DataTemplate x:Key="songTemplate" DataType="local:song">
        <Border BorderBrush="Gray" BorderThickness="1" Padding="2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <Grid Name="songGrid" Grid.Row="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Grid.Row="0" Text="title: "/>
                    <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Path=title}"/>
                    <TextBlock Grid.Column="2" Grid.Row="0" Text="artist: "/>
                    <TextBlock Grid.Column="3" Grid.Row="0" Text="{Binding Path=artist}"/>
                    <TextBlock Grid.Column="0" Grid.Row="1" Text="path: "/>
                    <TextBlock Grid.Column="1" Grid.Row="1" Text="{Binding Path=path}"/>
                    <TextBlock Grid.Column="2" Grid.Row="1" Text="status: "/>
                    <TextBlock Grid.Column="3" Grid.Row="1" Text="{Binding Path=stat}"/>
                </Grid>
                <Grid Grid.Row="1">
                    <Expander Margin="2" Padding="2" BorderBrush="Gray" BorderThickness="1" ExpandDirection="Down" >
                        <TextBlock Width="400" Text="{Binding Path=statInfo}" TextWrapping="Wrap"/>
                    </Expander>
                </Grid>
                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button VerticalAlignment="Center" Grid.Column="0">
                        <Image Source="pictures/check.gif"/>
                    </Button>
                    <Button Name="Cancel" VerticalAlignment="Center" Grid.Column="1" Click="DontSave">
                        <Image Source="pictures/cross.gif"/>
                    </Button>
                </Grid>
            </Grid>
        </Border>
    </DataTemplate> 
```

我在后面的代码中将歌曲添加到observebalecollction，歌曲在列表框中更新。该模板有两个按钮。其中一个需要从列表中删除歌曲。我正在尝试找到一种方法，使用列表中的选定项目从列表中删除歌曲，但是当单击按钮时，未选择该项目。

知道如何删除它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:11:25.587

为您的 ClickEventHandler 试试这个：

```
 void DontSave(object sender, RoutedEventArgs e)
    {
        song s = ((FrameworkElement)sender).DataContext as song;
        if (s != null && songCollection.Contains(s)) songCollection.Remove(s);
    } 
```

# eclipse - FindBugs - 在 eclipse 和 maven 之间共享 bug 设置

> ID：13993768
> 
> 赞同：3
> 
> 时间：2012-12-21T16:30:43.790
> 
> 标签：eclipse, maven, findbugs

我希望这是一个足够简单的问题。

我有 FindBugs 在 Eclipse 中工作。我也让它在 Maven 中工作。但是，如果我看到一个错误的错误，或者太轻微，或者根本无法修复，那么我将在 Eclipse 中忽略它。这会导致 Maven 仍然报告错误的问题。这并不理想。从技术上讲，我可能可以编辑 Maven 配置以忽略某些错误，但这似乎效率低下。此外，将有一个团队在这个项目上工作，所以我最终需要找到一个解决方案，将错误设置存储在 SVN 或网络驱动器上。

但无论如何，我想我已经找到了存储与这些 bug 相关的 eclipse 设置的文件夹： `<ECLIPSE_WORKSPACE>/.metadata/.plugins/edu.umd.cs.findbugs.plugin.eclipse`

是否可以在构建期间将 Maven 指向同一个文件？或者实际上，是否可以将其提取到一个单独的位置，例如在网络上，然后将 eclipse 和 maven 都指向它？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:06:11.163

您可以将排除过滤器文件添加到您的 Maven 配置中：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>findbugs-maven-plugin</artifactId>
    <version>${findbugs-maven-plugin.version}</version>
    <configuration>
        <excludeFilterFile>path/to/excludes.xml</excludeFilterFile>
    </configuration>
</plugin> 
```

配置文件如下所示。以下将匹配`SE_BAD_FIELD`来自 findbugs 中所有类的警告`my.package`。[在这里](http://findbugs.sourceforge.net/manual/filter.html)查看更多。

```
<FindBugsFilter>
  <Match>
    <Package name="~my.package.*"/>
    <Bug pattern="SE_BAD_FIELD"/>
  </Match>
</FindBugsFilter> 
```

然后，您可以从 Window -> Preferences -> Java -> FindBugs -> Filter Files -> Exclude filter files -> Add.. 将相同的过滤器文件添加到 Eclipse FindBugs 插件。

# powershell - 最强大的 Powershell 配置文件作弊？

> ID：13993772
> 
> 赞同：6
> 
> 时间：2012-12-21T16:30:56.660
> 
> 标签：powershell, settings, profile

我很好奇其他 Powershell 开发人员发现哪些内容可以存储在他们的 Powershell 配置文件中。可能性是无止境。

例如，我经常使用的最强大的 Powershell 配置文件函数是我的*findTextInWorkspace*函数。我工作的其他开发人员现在已经开始使用它，因为事实证明它非常方便。该功能允许我在所有本地 Powershell 脚本中搜索特定文本模式，例如 GREP。当我们的构建服务器上的脚本失败时，我可以插入关键字来追查罪魁祸首。由于我们的应用程序域中有许多重复的脚本和嵌套的文件夹结构，因此此功能使我能够快速找到任何有问题或行为不端的脚本的完整路径。

```
# find explicit text in all Workspace powershell scripts
function findTextInWorkspace ([string] $text, [string] $path = "C:\Workspace\*")
{
    dir $path -recurse -filter '*.ps*1' | Get-ChildItem | select-string -pattern $text | Select-Object Path -Unique
} 
```

然后我可以调用它，如下所示：

```
cd C:\Workspace\MyApplication
findTextInWorkspace "thisvariablecausedmybuildtocrash" . 
```

**我的问题是针对 Powershell 专家...您在 Powershell 配置文件中看到或使用的最强大的“作弊”或增强功能是什么？**我正在寻找有创意和有用的答案。

# c# - 如何从列表中读取布尔变量，并将“真实”条目移动到另一个列表

> ID：13993773
> 
> 赞同：0
> 
> 时间：2012-12-21T16:30:59.843
> 
> 标签：c#, winforms, list, arraylist, boolean

我希望根据布尔变量将我的条目分类到三个不同的列表中。然后我还需要我的列表不重复条目，所以无论使用什么条目，都需要删除。

我正在使用的列表在这里：

```
 public class Associate
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string AssocRfid { get; set; }
        public string AssocId { get; set; }
        public bool CanDoDiverts { get; set; }
        public bool CanDoMhe { get; set; }
        public bool CanDoLoading { get; set; }
    } 
```

将要读取此列表的代码在这里（不确定是否重要？）。

```
 #region Dialog Yes

            case DialogResult.Yes:
                {
                var secondForm = new Form2();
                secondForm.Show();
                dataGridAssociates.Rows.Clear();
                var lines = File.ReadAllLines(FileChosen); //Array of all the lines in the text file
                    foreach (var assocStringer in lines)
                    {
                        if (assocStringer == null) continue;
                        var entries = assocStringer.Split('|');
                        if (entries.Count() < 7)
                            return;
                        var obj = (Associate) _bindingSource.AddNew();
                        if (obj == null) continue;
                        obj.FirstName = entries[0];
                        obj.LastName = entries[1];
                        obj.AssocId = entries[2];
                        obj.AssocRfid = entries[3];
                        obj.CanDoDiverts = Convert.ToBoolean(entries[4]);
                        obj.CanDoMhe = Convert.ToBoolean(entries[5]);
                        obj.CanDoLoading = Convert.ToBoolean(entries[6]);
                    }
                break;
            }
                #endregion 
```

这是列表：

```
Matthew|Something|114282353|MXW320|True|True|True|
Audrey|Something|114282354|AXW420|True|True|True|
John|Doe|111222333|JXD020|True|True|False| 
```

我需要整行/条目移动到某种单独的列表/容器。

_bindingSource 是将我的代码添加到datagridview，这在我的代码的这一部分并不重要。随意修改它的任何部分以使其工作，我完全迷失了。

另外，我为草率的代码道歉，我还在学习，欢迎对我的代码进行任何额外的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:40:12.133

如果我正确理解你想要什么。

使用 linq 查询来提取您想要的结果。然后，您可以从原始列表中删除这些项目。

```
 var associates = new List<Associate> 
 { 
      new Associate{CanDoDiverts = true}, 
      new Associate{CanDoDiverts = false}
 };

 var resultList = associates.Where(p => p.CanDoDiverts == true).ToList();
 // .ToList() ensures deferred execution wont result in the ResultList being empty when you remove the matching items from the master list.
 associates.RemoveAll(p => p.CanDoDiverts == true); 
```

顺便说一句，如果您正在测试布尔值，您的属性应该是布尔值而不是字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:06:35.067

将布尔值键入为布尔值！

```
public class Associate
{
    ...
    public bool CanDoDiverts { get; set; }
    public bool CanDoMhe { get; set; }
    public bool CanDoLoading { get; set; }
} 
```

在循环之前创建三个列表

```
var divertsList =  new List<Associate>();
var mheList =  new List<Associate>();
var loadingList =  new List<Associate>(); 
```

创建并填充一个新对象（在循环内）后，将其添加到这样的列表中

```
obj.FirstName = entries[0];
obj.LastName = entries[1];
obj.AssocId = entries[2];
obj.AssocRfid = entries[3];
obj.CanDoDiverts = Boolean.Parse(entries[4]);
obj.CanDoMhe = Boolean.Parse(entries[5]);
obj.CanDoLoading = Boolean.Parse(entries[6]);

if(obj.CanDoDiverts) {
    divertsList.Add(obj);
}
if(obj.CanDoMhe) {
    mheList.Add(obj);
}
if(obj.CanDoLoading) {
    loadingList.Add(obj);
} 
```

* * *

您还可以将所有关联附加到同一个列表并根据需要过滤列表

```
var canDoDivertsQuery = associatesList.Where(a => a.CanDoDiverts);
foreach (Associate associate in canDoDivertsQuery) {
    // Work with associate being able to do diverts
} 
```

# database - 将数据保存在多个数据库集中

> ID：13993774
> 
> 赞同：0
> 
> 时间：2012-12-21T16:31:02.180
> 
> 标签：database, asp.net-mvc-3, save, dbset

我有一个包含多个数据库集的数据库上下文。我有一个编辑（httpget）和一个编辑（httppost）方法。我想将特定数据保存在特定数据集中。如何指定要使用的数据库集？顺便说一句，Edit 方法的视图使用了几个模型。

我的数据库上下文如下所示：

```
public class mycontext :DBContext
{
  public DBSet<Table1> table1{get; set;}
  public DBSet<Table2> table2{get; set;}
  public DBSet<Table3> table3{get; set;}
} 
```

当我定义

```
private mycontext data = new mycontext() 
```

唯一的选择是`data.SaveChanges()`。我想要这样的东西 `data.table1.SaveChanges()`并传递我想要保存的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:08:32.290

如果只想更新 Table1 中的数据**，**只修改**Table1**中的数据，然后调用`.SaveChanges()`

# mysql - 左连接，每个左条目只有 1 行

> ID：13993777
> 
> 赞同：1
> 
> 时间：2012-12-21T16:31:21.000
> 
> 标签：mysql, sql, join, left-join

这是我的表结构：

```
persons
-------
id
first_name
last_name

phone_numbers
-------------
id
person_id
number
type 
```

这是我的查询：

```
SELECT `persons`.`id`, `first_name`, `last_name`, `number`
FROM `persons`
LEFT JOIN `phone_numbers` ON `persons`.`id` = `phone_numbers`.`person_id`
ORDER BY `last_name` ASC 
```

* * *

这将返回所有人，无论他们是否有电话号码。好的。

* * *

当一个人拥有多个电话号码时，问题就开始了；我为同一个人获得多行。

我如何确保每人只能获得 1 行（带有第一个电话号码，或者根本没有 - 如果没有的话）？

* * *

**更新：**`type`我忘了包括我有一个专栏的事实。它的值可以是以下三种选择之一：

1.  细胞
2.  工作
3.  家

首先将由该顺序决定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:46:18.227

```
SELECT * FROM phone_numbers NATURAL JOIN (
  SELECT   person_id,
           ELT(
             MIN(FIELD(type, 'Cell', 'Work', 'Home')),
             'Cell', 'Work', 'Home'
           ) AS type
  FROM     phone_numbers
  GROUP BY person_id
) t JOIN persons ON persons.id = phone_numbers.person_id 
```

# python - 无法导入 psycopg2

> ID：13993779
> 
> 赞同：1
> 
> 时间：2012-12-21T16:31:24.897
> 
> 标签：python

我正在尝试安装 postgresql_python。我下载了 tarball 并使用以下命令安装它： python setup.py build python setup.py install

我得到了/usr/lib64/python2.4/site-packages/psycopg2/

```
> total 836
> -rw-r--r-- 1 root root  12759 Dec 11 18:18 errorcodes.py
> -rw-r--r-- 1 root root  14584 Dec 12 13:49 errorcodes.pyc
> -rw-r--r-- 1 root root  14584 Dec 12 13:49 errorcodes.pyo
> -rw-r--r-- 1 root root   5807 Dec 11 18:18 extensions.py
> -rw-r--r-- 1 root root   7298 Dec 12 13:49 extensions.pyc
> -rw-r--r-- 1 root root   7298 Dec 12 13:49 extensions.pyo
> -rw-r--r-- 1 root root  31495 Dec 11 18:18 extras.py
> -rw-r--r-- 1 root root  35124 Dec 12 13:49 extras.pyc
> -rw-r--r-- 1 root root  35124 Dec 12 13:49 extras.pyo
> -rw-r--r-- 1 root root   6177 Dec 11 18:18 __init__.py
> -rw-r--r-- 1 root root   5740 Dec 12 13:49 __init__.pyc
> -rw-r--r-- 1 root root   5740 Dec 12 13:49 __init__.pyo
> -rw-r--r-- 1 root root   8855 Dec 11 18:18 pool.py
> -rw-r--r-- 1 root root   8343 Dec 12 13:49 pool.pyc
> -rw-r--r-- 1 root root   8343 Dec 12 13:49 pool.pyo
> -rw-r--r-- 1 root root   3389 Dec 21 11:17 psycopg1.py
> -rw-r--r-- 1 root root   3182 Dec 21 11:22 psycopg1.pyc
> -rw-r--r-- 1 root root   3167 Dec 12 13:49 psycopg1.pyo
> -rwxr-xr-x 1 root root 572648 Dec 21 11:22 _psycopg.so drwxr-xr-x 2 root root   4096 Dec 21 10:38 tests
> -rw-r--r-- 1 root root   4427 Dec 11 18:18 tz.py
> -rw-r--r-- 1 root root   4325 Dec 12 13:49 tz.pyc
> -rw-r--r-- 1 root root   4325 Dec 12 13:49 tz.pyo 
```

但是在 python shell 中，当我尝试导入库时，出现错误：

```
>>> import psycopg2
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "/usr/lib64/python2.4/site-packages/psycopg2/__init__.py", line 76, in ?
    from psycopg2._psycopg import _connect, apilevel, threadsafety, paramstyle
ImportError: cannot import name _connect 
```

我正在使用 Postgresql 9.2 运行。

我在这里想念什么？请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:39:01.103

您很可能必须在根目录中删除一些与 psycopg2 相关的现有软件包。一些常见的位置：

```
rm -r /usr/lib/python2.4/site-packages/psycopg2*
rm -r /usr/local/lib/python2.6/dist-packages/psycopg2* 
```

但是，我建议设置一个 virtualenv 来容纳 Python 应用程序的包。

查看[virtualenv](http://pypi.python.org/pypi/virtualenv)。安装后很容易使用：

```
virtualenv myapp
. myapp/bin/activate
cd ~/your/postgres_lib/download
python setup.py install 
```

这会将 postgres 库安装到您的 virtualenv（位于`myapp`）文件夹中。然后，每当您想运行您的应用程序时，您只需要通过以下方式激活环境

```
. myapp/bin/activate 
```

必要时调整路径`myapp`。有一些帮助程序，比如[virtualenvwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)来简化这个过程。

# css - GWT - 设置全局 CSS 样式的最佳方式

> ID：13993781
> 
> 赞同：3
> 
> 时间：2012-12-21T16:31:38.097
> 
> 标签：css, gwt

我们将 GXT 与 GWT 一起使用，这涉及到每个基本小部件有一个 CSS 文件。GWT 中拥有全局 CSS 样式的最佳方式是什么。

例如

```
global.css

.backgroundBorder {
   border-style: solid;
   border-width: 2px;
   border-radius: 3px;
} 
```

我的小部件.css

```
@backgroundBorder 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:59:08.130

我同意。此外，我会在上面的 AppClientBundle 中包含一个接口。

```
public interface AppClientBundle extends ClientBundle {

  public static final AppClientBundle INSTANCE = GWT.create(AppClientBundle.class);

  @Source({ "css/template/global.css" })
  MyStyle css();
  public interface MyStyle extends CssResource {
    String backgroundBorder();
  }
} 
```

这使您可以以这种方式设置小部件的样式：

```
Widget.setStylePrimaryName(AppClientBundle.INSTANCE.css().backgroundBorder()); 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:55:58.200

您可以使用 ClientBundles 和 CssResources。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#CssResource](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#CssResource)

在您的入口点，您可以设置全局 css。与此类似：

```
YourStyle.getTheme().getAppClientBundle().getGlobalCss().ensureInjected(); 
```

你的clientbundle可能是这样的：

```
public interface AppClientBundle extends ClientBundle {

    @Source({ "css/template/global.css" })
    CssResource getGlobalCss();

} 
```

根据我的经验，这是最好的方法。

# php - 漂亮的照片相关链接？

> ID：13993782
> 
> 赞同：1
> 
> 时间：2012-12-21T16:31:39.497
> 
> 标签：php, iframe

我不知道是否有人会知道漂亮的照片，但它是一个图像库框，可以在像 facebook 这样的窗口中打开图像。

[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

基本上，用户将单击个人资料，它将在这个漂亮的照片框中打开一个页面。它能够加载图像和页面，但是当我这样做时，我收到一条错误消息，提示“无法加载图像，请确保路径正确。”

我现在正在用谷歌尝试它，看看我是否可以打开页面，但它甚至无法与谷歌一起使用。有谁知道我哪里出错了，谁能告诉我在哪里解决这个问题？

```
<?
    echo
"<a href=\"http://www.google.co.uk\" rel=\"prettyPhoto[1] \"><img width=90px height= 90px src=\"data/photos/{$chat['id']}/_default.jpg\"/></a>"; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:35:37.213

是否尝试将图像路径放在超链接中？

```
<?php
    echo "<a href=\"data/photos/{$chat['id']}/_default.jpg\" rel=\"prettyPhoto[1] \"><img width=90px height= 90px src=\"data/photos/{$chat['id']}/_default.jpg\"/></a>"; 
?> 
```

# activerecord - 在 Yii 中使用 Active Record 返回表的一行

> ID：13993785
> 
> 赞同：0
> 
> 时间：2012-12-21T16:31:49.453
> 
> 标签：activerecord, yii

我想返回模型中 id = 4 的一行表的字段，例如 Post。

我应该使用哪个 find() 方法或 findByAttributes() ？它的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:37:58.003

要通过主键获取模型，我建议[使用 findByPk()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findByPk-detail)。这是最简单的使用方法之一；

```
$id = 4;
$model = Post::model()->findByPk($id); 
```

对于其他方法语法，请阅读[Yii Active Record wiki](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#reading-record)和[Yii Active Record 文档](http://www.yiiframework.com/doc/api/1.1/CActiveRecord)，它们在开始时非常有用。

# twitter-bootstrap - 引导容器背景未居中

> ID：13993790
> 
> 赞同：0
> 
> 时间：2012-12-21T16:32:08.357
> 
> 标签：twitter-bootstrap

我正在帮助客户升级他的网站设计，并使用引导程序作为框架构建了下面的网站。不过，有些事情确实在困扰我——容器似乎并没有以我为中心。原因可能是因为定义了容器的背景颜色，并且右侧没有边距。我想保持事物的“全宽”，并且在右侧没有填充，但我不确定如何实现这一点并使容器居中。我想到的唯一想法充满了太多的代码。

解决此问题的最有效方法是什么？

[http://www.dredwardliu.com/mobile](http://www.dredwardliu.com/mobile)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:47:26.197

快速浏览一下，我注意到您有一行包含 div .body、.span4 和 .span12。您需要将 .body 和 .span4 放在一行中，将 span12 放在自己的一行中，也许还需要将 .span8 给 .body。

您实际上在该 .content div 中缺少很多行。

这就是你现在拥有的：

```
 <div class="row">
    <div class="content">
      <div class="body">                      <-- should have a row start here
        (For Your Smile...)
        </div><!--body text-->
      </div><!--span8-->                      <-- missing div.span8

      <div class="span4">
        (meet Liu)
      </div><!--end map-->                   
                                              <-- should end row, begin a new row
      <div class="span12">
        (etc)
      </div><!--span12-->                     <-- end another row, begin another, etc. 
```

# javascript - 使用前瞻和后向正则表达式时出错

> ID：13993793
> 
> 赞同：6
> 
> 时间：2012-12-21T16:32:24.767
> 
> 标签：javascript, regex, node.js

我在使用以下正则表达式时遇到问题。它在 regexr 和 rubular 中运行良好，但在 node.js 上运行时它给了我一个错误。我对使用正则表达式相当陌生，我不确定我做错了什么。如果我关闭它会起作用，`(?<= )`所以我认为这是问题所在。

我正在尝试将'is'与前导和尾随空格匹配`/(?<= )is(?= )|==/g`

测试词示例：
[http ://regexr.com?33781](http://regexr.com?33781)

节点错误输出

```
 temp = temp.replace(/(?<= )is(?= )|==/g, '===');
^
SyntaxError: Invalid regular expression: /(?<= )is(?= )|==/: Invalid group
at new RegExp (unknown source) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T16:34:30.787

JavaScript 正则表达式根本不支持lookbehind。

资料来源：

*   [http://www.regular-expressions.info/lookaround.html#limitbehindand](http://www.regular-expressions.info/lookaround.html#limitbehindand)
*   [http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

但是，[您*可以*在某些情况下伪造它](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:34:43.970

很简单，这是因为 JavaScript 正则表达式不支持lookbehinds：

[http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

根本不支持 Lookbehind。完全支持前瞻。

# ruby-on-rails - 嵌套路由后路径混乱

> ID：13993795
> 
> 赞同：0
> 
> 时间：2012-12-21T16:32:30.900
> 
> 标签：ruby-on-rails

我真的不知道为什么会这样。

这是我的路线

```
resources :users do
    resources :bookmarks
end 
```

控制器

```
# bookmarks_controller
def edit 
    # this returns perfectly data in the edit view
    @bookmark = current_user.bookmarks.find(params[:id])
end 
```

这是视图

```
<%= form_for @bookmark do |b| %>
<% end %> 
```

由于当我将书签资源嵌套在用户内部时一切都搞砸了，所以会导致错误

**未定义的方法`bookmark_path'**

然后我将表格更改为

```
<%= form_for user_bookmark_path(current_user, @bookmark) do |b| %> 
```

错误消失但文本字段表单中没有此类数据，表单操作为**/users/[user_id]/bookmarks/[bookmark_id]/edit**

耙路线信息

```
user_bookmarks     GET    /users/:user_id/bookmarks(.:format)          bookmarks#index
                   POST   /users/:user_id/bookmarks(.:format)          bookmarks#create
new_user_bookmark  GET    /users/:user_id/bookmarks/new(.:format)      bookmarks#new
edit_user_bookmark GET    /users/:user_id/bookmarks/:id/edit(.:format) bookmarks#edit
user_bookmark      GET    /users/:user_id/bookmarks/:id(.:format)      bookmarks#show
                   PUT    /users/:user_id/bookmarks/:id(.:format)      bookmarks#update
                   DELETE /users/:user_id/bookmarks/:id(.:format)      bookmarks#destroy 
```

知道如何解决吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:38:41.130

尝试类似：

```
<%= form_for [current_user, @bookmark] do |b| %>
<% end %> 
```

# c++ - 成员函数声明签名中的类成员可见性

> ID：13993798
> 
> 赞同：3
> 
> 时间：2012-12-21T16:32:41.373
> 
> 标签：c++, c++11, decltype, trailing-return-type

为什么会这样：

```
template <typename A>
struct S {
    A a;
    template <typename B>
    auto f(B b) ->
        decltype(a.f(b))
    {
    }
}; 
```

但这不会（`a`并且`f`交换了位置）：

```
template <typename A>
struct S {
    template <typename B>
    auto f(B b) ->
        decltype(a.f(b))
    {
    }
    A a;
}; 
```

说`a`没有在该范围内（在 decltype 内）声明，但添加显式`this->`使其工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T17:42:15.487

```
template <typename A>
struct S {
    A a;
    template <typename B>
    auto f(B b) ->
        decltype(a.f(b))
    {
    }
}; 
```

This works because within a trailing return type, members of the surrounding class are visible. Not all members, but only the members that are declared prior to it (in a trailing return type, the class is *not* considered to be complete, as opposed to function bodies). So what is done here:

*   As we are in a template, a lookup is done to see whether `a` is dependent or not. Since `a` was declared prior to `f`, `a` is found to refer to a class member.
*   By the template rules in C++, it is found that `a` refers to a member of the current instantiation since it is a member of instantiations of the surrounding template. In C++, this notion is used mainly to decide whether names are dependent: If a name is known to refer to the surrounding template's members, it is not necessarily needed to be looked up when instantiating, because the compiler already knows the code of the template (which is used as the basis of the class type instantiated from it!). Consider:

    ```
    template<typename T>
    struct A {
      typedef int type;
      void f() {
        type x;
        A<T>::type y;
      }
    }; 
    ```

In C++03, the second line declaring `y` would be an error, because `A<T>::type` was a dependent name and needed a `typename` in front of it. Only the first line was accepted. In C++11, this inconsistency was fixed and both type names are non-dependent and won't need a `typename`. If you change the typedef to `typedef T type;` then both declarations, `x` and `y` will use a dependent type, but *neither* will need a `typename`, because you still name a member of the current instantiation and the compiler knows that you name a type.

*   So `a` is a member of the current instantiation. But it is dependent, because the type used to declare it (`A`) is dependent. However this doesn't matter in your code. Whether dependent or not, `a` is found and the code valid.

* * *

```
template <typename A>
struct S {
    template <typename B>
    auto f(B b) ->
        decltype(a.f(b))
    {
    }
    A a;
}; 
```

In this code, again `a` is looked up to see whether it is dependent and/or whether it is a member of the current instantiation. But since we learned above that members declared after the trailing return type are not visible, we fail to find a declaration for `a`. In C++, besides the notion "member of the current instantiation", there is another notion:

*   *member of an unknown specialization*. This notion is used to refer to the case where a name might instead refer to a member of a class that depends on template parameters. If we had accessed `B::a`, then the `a` would be a member of an unknown specialization because it is *unknown* what declarations will be visible when `B` is substituted at instantiation.

*   *neither a member of the current, nor a member of an unknown specialization.* This is the case for all other names. *Your case fits here*, because it is known that `a` can never be a member of any instantiation when instantiation happens (remember that name lookup cannot find `a`, since it is declared after `f`).

Since `a` is not made dependent by any rule, the lookup that did not find any declaration is *binding*, meaning there is no other lookup at instantiation that could find a declaration. Non-dependent names are lookup up at template definition time. Now GCC rightfully gives you an error (but note that as always, an ill-formed template is not required to be diagnosed immediately).

* * *

```
template <typename A>
struct S {
    template <typename B>
    auto f(B b) ->
        decltype(this->a.f(b))
    {
    }
    A a;
}; 
```

In this case, you added `this` and GCC accepted. The name `a` that follows `this->` again is lookup at to see whether it might be a member of the current instantiation. But again because of the member visibility in trailing return types, no declaration is found. Hence the name is deemed not to be a member of the current instantiation. Since there is no way that at instantiation, `S` could have additional members that `a` could match (there are no base classes of `S` that depend on template parameters), the name is also not a member of an unknown specialization.

Again C++ has no rules to make `this->a` dependent. However it uses `this->`, so the name *must* refer to some member of `S` when it is instantiated! So the C++ Standard says

> Similarly, if the id-expression in a class member access expression for which the type of the object expression is the current instantiation does not refer to a member of the current instantiation or a member of an unknown specialization, the program is ill-formed even if the template containing the member access expression is not instantiated; no diagnostic required.

Again no diagnostic is required for this code (and GCC actually doesn't give it). The id-expression `a` in the member access expression `this->a` was dependent in C++03 because the rules in that Standard were not as elaborated and fine-tuned as in C++11\. For a moment let's imagine C++03 had `decltype` and trailing return types. What would this mean?

*   The lookup would have been delayed until instantiation, because `this->a` would be dependent
*   The lookup at instantiation of, say, `S<SomeClass>` would fail, because `this->a` would not be found at instantiation time (as we said, trailing return types do not see members declared later).

Hence, the early rejection of that code by C++11 is good and useful.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:26:22.493

成员函数的主体被编译，就好像它是在类之后定义的一样。因此，类中声明的所有内容此时都在范围内。

但是，函数的声明仍在类声明中，只能看到它前面的名称。

```
template <typename A>
struct S {
    template <typename B>
    auto f(B b) ->
        decltype(a.f(b)); // error - a is not visible here

    A a;
};

template <typename A>
template <typename B>
    auto S<A>::f(B b) ->
        decltype(a.f(b))
    {
        return a.f(b);   // a is visible here
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T18:30:24.430

该标准说（第 14.6.2.1 节）：

> If, for a given set of template arguments, a specialization of a template is instantiated that refers to a member of the current instantiation with a qualified-id or class member access expression, the name in the qualified-id or class member access expression is looked up in the template instantiation context.

`this->a` is a class-member access expression, therefore this rule applies and lookup takes place at the point of instantiation, where ~~`S<A>` is complete~~.

* * *

Finally, this doesn't solve your problem at all, because section 5.1.1 says:

> If a declaration declares a member function or member function template of a class X, **the expression `this` is a prvalue of type “pointer to *cv-qualifier-seq* `X`” between the optional *cv-qualifier-seq* and the end of the *function-definition*, *member-declarator*, or *declarator***. It shall not appear before the optional *cv-qualifier-seq* and it shall not appear within the declaration of a static member function (although its type and value category are defined within a static member function as they are within a non-static member function).

So you can't use `this->` here, since it is before the *cv-qualifier-seq* part of the function declaration.

Wait, no it isn't! Section 8.4.1 says

> The declarator in a *function-definition* shall have the form
> 
> `D1 (` *`parameter-declaration-clause`*`)` *`cv-qualifier-seq opt ref-qualifier opt exception-specification opt attribute-specifier-seq opt trailing-return-type opt`*

# matlab - 如何在 MatLab 中选择所需 SNR 的放大系数

> ID：13993803
> 
> 赞同：1
> 
> 时间：2012-12-21T16:32:57.520
> 
> 标签：matlab, signal-processing, communication

我有一个给定的具有一定方差的噪声向量。这是无法改变的。我有一个 IQ 调制信号，它需要被放大以获得 20dBs 的 SNR。我该怎么做？

```
k = 3/2;                    %certain variance
n = sqrt(k).*randn(1, N);   %noise vector
noise_power = var(n);

SNR = 10*log10(var(Xiq)/noise_power)   %current SNR in dB of the IQ modulated signal

%% Part 4
amp = 13.5;                 %some amplification, I can't figure out what it should be
Xamp = amp.* Xiq;
SNR = 10*log10(var(Xamp)/noise_power)   %SNR in dB should be 20 dBs 
```

目前我使用的是固定比例因子，但我知道这不是正确的方法。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:02:15.300

作为方差的一般规则：

`Var (A*X) = A^2*Var(X)`（如果 A 是常数）。

所以

```
SNR =  10*log10(var( amp* Xiq)/noise_power)
    =  10*log10(amp^2*var(Xiq)/noise_power)
    =  10*log10(amp^2) + 10*log10(var(Xiq)/noise_power)
    =  20*log10(amp) + SNR_original
    =  20 
```

尔格

```
20*log10(amp) = 20 - SNR_original
log10(amp) = (20 - SNR_original)/20
amp = 10^((20 - SNR_original)/20) 
```

# ios - 将 UIIImage 传递给 UIImagePickerController 进行编辑

> ID：13993817
> 
> 赞同：1
> 
> 时间：2012-12-21T16:34:04.417
> 
> 标签：ios, uiimage, uiimagepickercontroller

是否可以为 UIImagePickerController 提供一个 UIIMage 对象，以使用提供此pickerController 的编辑功能。

这就是我试图实现它的方式。

```
-(IBAction) openEditor:(id) sender{
    UIImagePickerController *pickerCntrl=[[UIImagePickerController alloc] init];
    pickerCntrl.sourceType=UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    pickerCntrl.allowsEditing=YES;
    [self presentViewController:pickerCntrl animated:YES completion:nil];
} 
```

但是，此图像必须已经存在于相册中。另一件事是它提供了一个 UI 供您选择图像。

我试图在**openEditor:(id) sender**上直接打开以下窗口。 ![在此处输入图像描述](../Images/c84ec25f39010f54fc379e566f639176.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:59:47.273

用于选择`UIImagePickerController`图像（从照片库或相机中）。它不能用于对您希望提供的任意图像进行任何类型的编辑。

如果您想提供自己的图像的缩放和裁剪，那么您必须实现自己的图像编辑控制器。

要么实现你自己的，要么查看已经这样做的第 3 方库。我对[Aviary SDK](https://github.com/AviaryInc/Mobile-Feather-SDK-for-iOS)很幸运。

# c# - 检查字符串中的数组项并匹配它

> ID：13993820
> 
> 赞同：1
> 
> 时间：2012-12-21T16:34:11.053
> 
> 标签：c#, arrays, string, match, string-matching

我有一个字符串和一个数组，我想检查字符串并查找字符串是否包含数组中的任何字符串。

我的数组最多包含大约 10 个元素。

```
string[] stringArray = { "apple", "banana", "orange" };
string text="I want an apple";

public static string getItem(string text)
{
    //check text for stringArray items
    //return item (apple, banana, orange)
}
string item = getItem(text); 
```

所以我正在寻找的是创建一个返回项目的方法。另外我想知道是否有其他方法可以使用 Enum 或 List<> 来做到这一点。

最后我做了这样的方法

```
public static string getItem(string text)
        {
            string[] stringArray = { "Apple", "Banana", "Orange" };
            string item = stringArray.Where(s => text.ToUpper().Contains(s)).DefaultIfEmpty("None").FirstOrDefault();;
            return item;
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T16:35:51.087

只需一点 LINQ-iness，这很容易：

```
return stringArray.Where(s => text.Contains(s)).FirstOrDefault(); 
```

这假设您只想返回第一个匹配的字符串并且您想要进行区分大小写的比较。如果不是，则可以相对容易地进行较小的修改以进行更改。

如果你的源代码也是 a ，上面的代码也同样`List<string>`有效（实际上，任何实现的东西都`IEnumerable<string>`可以代替它工作）。另一方面， An`Enum`不适合这种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:37:48.500

而不是你的数组，你可以把它变成一个`List<string>`. 然后在你的`getItem()`，你可以这样做：

```
List<string> stringList; // populate how you see fit
string text="I want an apple";

public static string getItem(string text)
{
    foreach(var s in stringList)
    {
        if(text.Contains(s))
        {
            // do stuff here
        }
    }
} 
```

循环`List<>`不需要A。`foreach`拥有它真是太好了。

# php - 如何使用 PHPExcel 在 excel 2003 中从自定义单元格格式转换数据

> ID：13993826
> 
> 赞同：1
> 
> 时间：2012-12-21T16:34:35.233
> 
> 标签：php, converter, phpexcel, number-formatting

我正在阅读简单的 excel(2003 .xls) 文件。我正在使用 codeplex 中的 PHP Excel，但有些单元格具有自定义格式类型`# ##0,00%`。当我阅读文件时，我总是得到一个失败的值`(110.2f%)`

现在我解决了这个案例：

```
$workSheet->getStyle('G'.$line)->getNumberFormat()->setFormatCode(PHPExcel_Cell_DataType::TYPE_STRING);
            $turnover_str = $workSheet->getCell('G'.$line); 
```

在浏览器中输出：`-0.22878905524141`

但我需要这种格式：`-22,87`

我使用此功能进行转换：

```
function conv_to_percent($str){
    $str = (int)$str * 100;
    $str = number_format($str, 2, ',', '');
return $str;} 
```

当`$str`值为`-0.22878905524141`：

但是我已经为这个函数创建了一个干净的 PHP 并且工作正常（我只有这个函数）：

```
 print conv_to_percent("-0.22878905524141"); //output: -22,88 
```

我试过`(int), floatval($str)`但问题是一样的。

我究竟做错了什么？

# ios - 在睡眠/锁定状态下调试 iPad

> ID：13993829
> 
> 赞同：2
> 
> 时间：2012-12-21T16:34:39.450
> 
> 标签：ios, xcode, testing

当 iPad 处于睡眠或锁定状态时，是否有人能够通过 Xcode 进行调试？我知道我可以运行 UIAutomation sleepForDuration() 但显然你不能在仪器中调试 Xcode？

当 iPad 锁定然后唤醒并且需要找到调试方法时，我遇到了网络连接问题。

提前感谢您的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:55:40.283

是的，当您的设备处于睡眠/锁定状态时，调试器仍然可以工作，因为您使用 Xcode 运行应用程序。

# qt - 如何在 Qt Creator `.pro.shared` 文件中指定代码样式设置？

> ID：13993830
> 
> 赞同：2
> 
> 时间：2012-12-21T16:34:39.933
> 
> 标签：qt, qt-creator

我可以从[https://qt-project.org/doc/qtcreator-2.6/creator-sharing-project-settings.html](https://qt-project.org/doc/qtcreator-2.6/creator-sharing-project-settings.html)上的文档中看到如何创建`.pro.shared`标准化编辑器设置的文件。

但是：是否可以在`.pro.shared`文件中标准化 Qt Creator 的“代码样式”设置，如果可以，语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:41:35.683

目前没有 UI 方法可以做到这一点，不确定我们是否会在某个时候添加一个。

因此，您需要手动执行此操作：为用户设置它，关闭项目以确保保存 .user 文件并将文件复制到 .shared 文件中。删除您不想共享的所有内容（保留 ProjectExplorer.Project.Updater.FileVersion！），同时保持 XML 结构完整。你是一名开发人员，我相信你会管理:-)

哦，请确保使用您想要支持的最旧的 Qt Creator（IIRC 这是在 2.5 中引入的，所以比这更旧将无济于事）来创建模板。Creator 在读取设置时会升级设置，但不能降级，因此太新的 .shared 文件将被忽略。

# c# - 试图从对象数组中获取自定义对象类型数组

> ID：13993837
> 
> 赞同：2
> 
> 时间：2012-12-21T16:35:18.193
> 
> 标签：c#, arrays, linq

我有一个返回对象数组的函数。问题是，对象可以是三种不同类型之一。我试图将这些对象分解为不同自定义类型的数组。

例如：

```
var collection = something.ReturnObjArray();
var Details = collection.Where(a => a is DetailItem);
var Addenda = collection.Where(a => a is AddendaItem); 
```

如果我执行上述操作并尝试在 foreach 循环中访问数据以将附录放入详细信息项中的集合中：

```
foreach (var addendaItem in Addenda)
{
    var detailItem = Details.Single(d => d.DetailAddendaKey == addendaItem.Key);
    detailItem.Addenda.Add(addendaItem);
} 
```

我收到如下错误：

“object”不包含“DetailAddendaKey”的定义，并且找不到接受“object”类型的第一个参数的扩展方法“DetailAddendaKey”（您是否缺少 using 指令或程序集引用？）

其中。如果我尝试将详细信息和附录的 var 更改为：

```
IEnumerable<DetailItem> Details = collection.Where(a => a is DetailItem);
IEnumerable<AddendaItem> Addenda = collection.Where(a => a is AddendaItem); 
```

我克服了上面的错误，但现在得到：

无法将类型隐式转换`'System.Collections.Generic.IEnumerable<object>'`为`'System.Collections.Generic.IEnumerable<MyNameSpace.DetailItem>'`. 存在显式转换（您是否缺少演员表？）

有什么想法我需要做什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:37:16.687

使用[`OfType<T>`](http://msdn.microsoft.com/en-us/library/bb360913.aspx).

> 根据指定类型过滤 IEnumerable 的元素。

例子：

```
IEnumerable<DetailItem> Details = collection.OfType<DetailItem>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:03:15.263

我怀疑这句话返回了一个类型`object[]`的对象（一个对象数组）：

```
var collection = something.ReturnObjArray(); 
```

`object`没有全部属性！

这就是为什么`Details.Single(d => d.DetailAddendaKey == addendaItem.Key)`抱怨 that `d`doesn't have a property的原因`DetailAddendaKey`。

你需要这样做：

```
var Details = collection.Where(a => a is DetailItem).Cast<DetailItem>();
var Addenda = collection.Where(a => a is AddendaItem).Cast<AddendaItem>(); 
```

或如@Mark Byers 建议的那样（这是上述示例的缩写）：

```
var Details = collection.OfType<DetailItem>();
var Addenda = collection.OfType<AddendaItem>(); 
```

这是向下转换`IEnumerable<object>`to `DetailItem`or中的所有项目`AddendaItem`，这意味着您将拥有`IEnumerable<DetailItem>`and`IEnumerable<AddendaItem>`毕竟！

然后，接下来的句子将按照您的预期编译和工作。

## 笔记

`OfType<T>()`应该是一个更好的选择，因为您使用`is`运算符和稍后调用的方法`Cast<T>()`是将对象数组中的每个对象向下转换两次。

检查此其他问题及其答案以获取有关`is`运算符及其行为的更多信息：

*   [C# 'is' 运算符性能](https://stackoverflow.com/questions/686412/c-sharp-is-operator-performance)

# ruby - 使用 xpath 与 span 获取元素（一种适用于 IE 和 Firefox，另一种仅适用于 IE）

> ID：13993839
> 
> 赞同：0
> 
> 时间：2012-12-21T16:35:22.243
> 
> 标签：ruby, testing, watir, watir-webdriver, regression-testing

我是 Watir 框架的新手，我们有一个类似的代码

```
$browser.link(:xpath, "//a[@href='/servlets/ProcessAction?identifier=createMemberAccountTypes&click1=Accounts_Open']").click 
```

. 但这在 IE 上运行良好，但在 Firefox 上却并非总是如此。所以我们使用类似的东西

```
$browser.span(:text => "Logout").parent.click 
```

但是我们不想为 IE 写一个，为 Firefox 写一个。我们应该使用什么？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:14:24.770

我会使用：

```
$browser.link(:text => "Logout").click 
```

:text 说明符包括元素及其元素中的所有文本（即包括跨度中的文本）。因此，您可以直接获取链接，而不是获取跨度的父级。

通常的建议是尽可能避免使用 xpath。它通常更难阅读并且可能很脆弱。例如，您的 xpath 被硬编码为查询字符串参数的特定顺序。如果生成的 url 变为 '/servlets/ProcessAction?click1=Accounts_Open&identifier=createMemberAccountTypes' （即参数更改的顺序），您的测试将失败。相比之下，文本“注销”似乎不太可能改变。

一般来说，我会说使用有效的方法。

# excel - 如何使用 Excel 公式将单元格范围从一个工作表引用到另一个工作表？

> ID：13993845
> 
> 赞同：8
> 
> 时间：2012-12-21T16:36:00.380
> 
> 标签：excel

我有一个带有 Sheet1 和 Sheet2 的工作表，我正在尝试引用从 Sheet2 到 Sheet1 的一系列单元格

我知道如何引用工作表单元格，但我如何对我尝试过`=Sheet2!A1` 的单元格范围执行相同操作，但它不喜欢语法。`A1:F1``=Sheet2!A1:F1`

如果可能，我需要为此使用 Excel 公式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:41:00.760

简单的 - -

我创建了一个带有 4 个单元格的工作表 2 和一个带有公式的单个单元格的工作表 1：

```
=SUM(Sheet2!B3:E3) 
```

请注意，正如您所说，尝试为单个单元格分配一个范围内的值是没有意义的。将其发送到使用范围对其进行处理的公式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-26T02:31:08.013

你有的公式很好。但是，输入后，您需要点击`Control`++`Shift`才能`Enter` 将其应用于值范围。具体来说：

1.  选择目标工作表中的值范围。

2.  在公式面板中输入您想要的公式，例如`=Sheet2!A1:F1`

3.  点击`Control`++将`Shift`公式`Enter`应用于范围。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T17:15:46.313

好的，我下载了一个自定义连接函数，然后只引用了它的单元格

**代码**

```
 Function concat(useThis As Range, Optional delim As String) As String
 ' this function will concatenate a range of cells and return one string
 ' useful when you have a rather large range of cells that you need to add up
 Dim retVal, dlm As String
 retVal = ""
 If delim = Null Then
 dlm = ""
 Else
 dlm = delim
 End If
 For Each cell In useThis
 if cstr(cell.value)<>"" and cstr(cell.value)<>" " then
 retVal = retVal & cstr(cell.Value) & dlm
 end if
 Next
 If dlm <> "" Then
 retVal = Left(retVal, Len(retVal) - Len(dlm))
 End If
 concat = retVal
 End Function 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-16T13:14:47.400

如果您希望连接来自不同工作表的多个单元格，并且还想在每个单元格的内容之间添加分隔符，最直接的方法是：

```
=CONCATENATE(Sheet1!A4, ", ", Sheet2!A5) 
```

这仅适用于有限数量的引用单元格，但如果您只有少数几个要映射的单元格，则速度很快。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T16:48:47.950

您可以输入一个相等的公式，然后复制它以引用整个范围（一个单元格进入一个单元格）

```
=Sheet2!A1 
```

如果您需要连接结果，则需要更长的公式或用户定义的函数（即宏）。

```
=Sheet2!A1&Sheet2!B1&Sheet2!C1&Sheet2!D1&Sheet2!E1&Sheet2!F1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-30T05:33:38.123

它很简单，但不容易发现 ---[去这里阅读更多](https://support.office.com/en-us/article/Create-or-change-a-cell-reference-c7b8b95d-c594-4488-947e-c835903cebaa)。它来自微软官方网站

**第 1 步**- 单击源工作表的单元格或范围（包含要链接到的数据）

**步骤 2** 按`Ctrl`+ `C`，或转到主页选项卡，然后在剪贴板组中，单击复制按钮图像。

**步骤 3**`Home`选项卡 上的剪贴板组

**步骤 4** 按`Ctrl`+ `V`，或转到主页选项卡，在剪贴板组中，单击粘贴链接按钮。默认情况下，粘贴复制的数据时会显示粘贴选项按钮图像按钮。

**步骤 5** 单击粘贴选项按钮，然后单击粘贴链接。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-21T17:41:54.110

如果这些工作表位于同一个工作簿中，一个简单的解决方案是命名范围，并让公式引用命名范围。要命名一个范围，请选择它，右键单击，然后为它提供一个有意义的名称和工作簿范围。

例如`=Sheet1!$A$1:$F$1`可以命名为：`theNamedRange`. 然后你的公式`Sheet2!`可以在你的公式中引用它，如下所示`=SUM(theNamedRange)`：

顺便说一句，从您的问题中不清楚您打算如何使用该范围。如果你把你有的东西放在一个公式中（例如，`=SUM(Sheet1!A1:F1)`）它会起作用，你只需要在公式中插入那个范围参数。Excel 不会在没有相关公式的情况下解析范围引用，因为它不知道您想用它做什么。

在这两种方法中，我发现命名范围约定更易于使用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-21T17:51:33.720

我重写了 Ninja2k 提供的代码，因为我不喜欢它循环遍历单元格。为了将来参考，这里有一个使用数组的版本，它在很多范围内工作得明显更快，但结果相同：

```
Function concat2(useThis As Range, Optional delim As String) As String
    Dim tempValues
    Dim tempString
    Dim numValues As Long
    Dim i As Long, j As Long
    tempValues = useThis
    numValues = UBound(tempValues) * UBound(tempValues, 2)
    ReDim values(1 To numValues)
    For i = UBound(tempValues) To LBound(tempValues) Step -1
        For j = UBound(tempValues, 2) To LBound(tempValues, 2) Step -1
            values(numValues) = tempValues(i, j)
            numValues = numValues - 1
        Next j
    Next i
    concat2 = Join(values, delim)
End Function 
```

我忍不住想肯定有更好的方法......

以下是在没有 VBA 的情况下手动执行此操作的步骤，它仅适用于一维数组并生成静态值而不是保留引用：

1.  将单元格公式更新为类似`=Sheet2!A1:A15`
2.  打`F9`
3.  去掉花括号`{ and }`
4.  放在`CONCATENATE(`公式的前面，`=`符号之后和公式`)`的末尾。
5.  打`enter`。

# ruby - 解析 100mb 的 JSON 有效负载的有效方法

> ID：13993862
> 
> 赞同：8
> 
> 时间：2012-12-21T16:37:13.820
> 
> 标签：ruby, json, amazon-web-services

我每 12 小时在我的亚马逊 EC2 微型实例上运行一次 cron 作业。它下载 118MB 文件并使用 json 库对其进行解析。这当然会使实例内存不足。我的实例有 416MB 的可用内存，但是我运行脚本它下降到 6MB，然后它被操作系统杀死。

我想知道我在这里有什么选择？是否可以通过 Ruby 有效地解析它，或者我是否必须降级到像 C 这样的低级东西？我可以获得功能更强大的亚马逊实例，但我真的想知道是否可以通过 Ruby 做到这一点。

**更新：** 我看过 yajl。它可以在解析时为您提供 json 对象，但问题是，如果您的 JSON 文件仅包含 1 个根对象，那么它将被迫解析所有文件。我的 JSON 看起来像这样：

```
--Root
   -Obj 1
   -Obj 2
   -Obj 3 
```

所以如果我这样做：

```
parser.parse(file) do |hash|
  #do something here
end 
```

由于我只有 1 个根对象，它会解析整个 JSON。如果 Obj 1/2/3 是 root，那么它会工作，因为它会一一给我，但我的 JSON 不是那样的，它会解析并占用 500mb 的内存......

**更新 #2：** 这是 118mb 大文件 (7mb) 的较小版本：

消失了

它是可解析的，我不只是从文件中删除一些字节，只是为了让您将其视为一个整体。我要找的数组是这个

```
events = json['resultsPage']['results']['event'] 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T16:43:40.617

[YAJL](https://github.com/brianmario/yajl-ruby)实现了一个流解析器。您可以使用它即时读取您的 JSON，这样您就可以在内容进入时对其进行操作，然后在完成后丢弃它们（以及从中生成的数据结构）。如果您对此很聪明，这将使您保持在记忆力的限制之下。

编辑：使用您的数据，您真的有兴趣一次提取 JSON 对象的一部分，而不是解析整个对象。这非常棘手，并且确实需要您实现自己的解析器。它的基本要素是您想要：

1.  进入事件数组
2.  对于数组中的每个事件，解析事件
3.  将解析后的事件传递给某个回调函数
4.  丢弃已解析的事件和源输入，以便为下一个事件释放内存。

这不适用于 yajl，因为您在这里处理的是一个对象，而不是多个对象。要使其与 yajl 一起使用，您将需要手动解析 JSON 以发现事件对象边界，然后将每个事件对象块传递给 JSON 解析器以进行反序列化。像 Ragel 这样的东西可以为你简化这个过程。

当然，升级您的 AWS 实例会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:43:51.037

像[yaji](https://github.com/brianmario/yajl-ruby)这样的东西可以将 json 解析为流

# javascript - 当“选项”不是静态的时，如何引用“选择”列表的选定值？

> ID：13993866
> 
> 赞同：0
> 
> 时间：2012-12-21T16:37:29.780
> 
> 标签：javascript, select

我有一个简单的问题。我有一个这样的选择列表：

```
var myarray = ["one", "two", "three"];
var container = document.createElement("select");  
for (var i = 0; i < myarray.length; i++) {
    var element = document.createElement("option");
    var textlabel = document.createTextNode(myarray[i]);

    if (element.nodeValue == "two") { 
        element.selected = true;
    }

    element.appendChild(textlabel); 
    container.appendChild(element);
}
document.body.appendChild(container); 
```

我有两个问题：

1）我很确定现在应该选择的元素是“二”……不是吗？

2) 由于`option`元素是在循环内动态创建的（没有三个不同的选项变量可供我使用，但只有一个会随着循环的进行而更新），我如何引用所选的一个以供将来使用？

例如，假设稍后我得到用户输入，并且根据该输入，我希望该列表作为选定项“三”。

感谢您的任何帮助！如果你想使用它，这里是[小提琴......](http://jsfiddle.net/8zTHh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:44:28.583

只需在循环中更改以下内容`for`即可解决选择问题：

```
if (myarray[i] == "two") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:50:21.000

> 1）我很确定现在应该选择的元素是“二”……不是吗？

不，不是：你检查 element.nodeValue，而实际上你应该检查`textLabel`'s one - 或者只是检查内容本身：

```
if (myarray[i] === 'two') {
  element.selected = true;
} 
```

> 2) 由于选项元素是在循环中动态创建的（没有三个不同的选项变量可供我使用，但只有一个会随着循环的进行而更新），我如何引用所选的一个以供将来使用?

看，`<select>`elements 有两个有用`options`的属性：（其中包含所有选项，并且动态更新）和`selectedIndex`. 您可以将它们组合起来以获得选定的选项：

```
container.addEventListener('change', function() {
   console.log(this.options[this.selectedIndex]);
}, false); 
```

但是，如果您想要知道所选元素的*值*，那就更容易了 - 使用`container.value`.

> 例如，假设稍后我得到用户输入，并且根据该输入，我希望该列表作为选定项“三”。

如果您知道与此相对应的选项的位置，那就小菜一碟了：只需再次使用 selectedIndex 属性：

```
container.selectedIndex = 3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:48:24.050

尝试使用`console.log`（在带有 firebug 的 chrome 或 firefox 上）调试您的脚本：

试试[这个](http://jsfiddle.net/8zTHh/3/)：

```
var myarray = ["one", "two", "three"];
var container = document.createElement("select");
container.id = "mySelect" ;  
    for (var i = 0; i < myarray.length; i++) {
        var element = document.createElement("option");
        var textlabel = document.createTextNode(myarray[i]);

        element.appendChild(textlabel);   

        if (element.value == "two") { 
            element.selected = true;

        }

        container.appendChild(element);
    }
        document.body.appendChild(container); 
```

为了引用您选择的元素，您应该为您的选择元素提供一个 id 并访问它，如下所示：

```
el = document.getElementById('mySelect');
el.selectedIndex ; // give you the selected index
el.options[el.selectedIndex]; // give you the value 
```

# objective-c - 当我使用 NSPasteboard 时，我遇到了架构 x86_64 的未定义符号

> ID：13993867
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:37:31.540
> 
> 标签：objective-c, cocoa, nspasteboard

> **可能重复：**
> [在 XCode、Cocoa 应用程序中找不到符号](https://stackoverflow.com/questions/1159227/symbols-not-found-in-xcode-cocoa-application)

下面是错误信息

```
Undefined symbols for architecture x86_64:
  "_NSPasteboardTypeString", referenced from:
      _main in main.o
  "_OBJC_CLASS_$_NSPasteboard", referenced from:
      objc-class-ref in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

下面是代码。我应该包含更多标题吗？

```
#import <Foundation/Foundation.h>
#import <AppKit/NSPasteboard.h>

int main (int argc, const char * argv[])
{
    @autoreleasepool {
        NSPasteboard *pasteboard = [NSPasteboard generalPasteboard];
        NSString *content = [pasteboard stringForType:NSPasteboardTypeString];
        NSLog(@"%@", content);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:39:05.047

正确链接到 AppKit.framework，标头不包含“真实”代码

# r - 使用 Std Dev x 和固定乘积生成随机数

> ID：13993873
> 
> 赞同：3
> 
> 时间：2012-12-21T16:37:50.960
> 
> 标签：r, random

我想生成一系列收益 x，使得收益的标准差为 0.03 和 1+x = 1 的乘积。总而言之，收益有两个条件：

1)`sd(x) == 0.03`

2)`prod(1+x) == 1`

这可能吗？如果可以，我如何在 R 中实现它？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:54:21.273

稍微复杂一点的方法是使用对数正态分布的知识：从`?dlnorm`, Var= exp(2*mu + sigma^2)*(exp(sigma^2) - 1)。我们希望几何平均值等于 1，因此对数刻度上的平均值应该为 0。我们有`Var = exp(sigma^2)*(exp(sigma^2)-1)`，显然无法解析解决这个问题，但我们可以使用`uniroot`：

找到正确的对数方差：

```
vfun <- function(s2,v=0.03^2) { exp(s2)*(exp(s2)-1)-v }
s2 <- uniroot(vfun,interval=c(1e-6,100))$root 
```

生成值：

```
set.seed(1001)
x <- rnorm(1000,mean=0,sd=sqrt(s2))
x <- exp(x-mean(x))-1   ## makes sum(x) exactly zero
prod(1+x)  ## exactly 1
sd(x) 
```

这会产生标准偏差不完全等于 0.03 但接近的值。如果我们愿意，我们也可以解决这个问题......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:48:50.527

一种非常简单的方法是简单地模拟退货，直到您有一组满足您的要求。不过，您将需要指定对您的要求的容差（请参阅[此处的](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)原因）。

```
nn <- 10
epsilon <- 1e-3
while ( TRUE ) {
    xx <- rnorm(nn,0,0.03)
    if ( abs(sd(xx)-0.03)<epsilon & abs(prod(1+xx)-1)<epsilon ) break
}
xx 
```

产量

```
[1]  0.007862226 -0.011437600 -0.038740969  0.028614022  0.006986953
[6] -0.004131429  0.030846398 -0.037977057  0.046448318 -0.025294236 
```

# python - Statsmodels 公式 API (patsy)：如何排除交互组件的子集？

> ID：13993874
> 
> 赞同：3
> 
> 时间：2012-12-21T16:37:53.333
> 
> 标签：python, statsmodels

我正在`statsmodels.formula.api.wls`使用 statsmodels 公式 API（来自 patsy）构建 WLS ( ) 模型，并且正在使用因子之间的交互。其中一些是预测性的，而另一些则不是。有没有办法在模型中只包含交互的子集，而无需手动构建设计矩阵？

或者，有没有办法将模型变量子集的估计系数约束为零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:19:46.453

我不确定我是否完全理解您的需求，但我建议您从真正优秀的 paste 文档开始（patsy 处理 statsmodels 的公式）。关于分类数据有一个很好的部分：http: [//patsy.readthedocs.org/en/latest/index.html](http://patsy.readthedocs.org/en/latest/index.html)

我的猜测是，通过单个公式调用很难实现您想要的。我可能会使用 patsy 来构建一个设计矩阵，其中包含比我需要的更多的术语，然后删除列。例如：

```
In [28]: import statsmodels.formula.api as sm
In [29]: import pandas as pd
In [30]: import numpy as np
In [31]: import patsy
In [32]: url = "http://vincentarelbundock.github.com/Rdatasets/csv/HistData/Guerry.csv"
In [33]: df = pd.read_csv(url)
In [34]: w = np.ones(df.shape[0])
In [35]: f = 'Lottery ~ Wealth : C(Region)'
In [36]: y,X = patsy.dmatrices(f, df, return_type='dataframe')
In [37]: X.head()
Out[37]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 5 entries, 0 to 4
Data columns:
Intercept                5  non-null values
Wealth:C(Region)[nan]    5  non-null values
Wealth:C(Region)[C]      5  non-null values
Wealth:C(Region)[E]      5  non-null values
Wealth:C(Region)[N]      5  non-null values
Wealth:C(Region)[S]      5  non-null values
Wealth:C(Region)[W]      5  non-null values
dtypes: float64(7)

In [38]: X = X.ix[:,[2,3,4]]
In [39]: X.head()
Out[39]: 
   Wealth:C(Region)[C]  Wealth:C(Region)[E]  Wealth:C(Region)[N]
0                    0                   73                    0
1                    0                    0                   22
2                   61                    0                    0
3                    0                   76                    0
4                    0                   83                    0

In [40]: mod = sm.WLS(y, X, 1./w).fit()
In [41]: mod.params
Out[41]: 
Wealth:C(Region)[C]    1.084430
Wealth:C(Region)[E]    0.650396
Wealth:C(Region)[N]    1.021582 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T19:15:29.457

我不明白您所说的“交互的子集”是什么意思。您可能的意思是一个公式，例如

```
y ~ pred1 + pred2 + pred3 + pred1:pred3 + pred1:pred2 
```

或同等的

```
y ~ pred1*pred2*pred3 - pred2:pred3 
```

后者表明我们包含了一些可能的交互，但不是全部（我们已经忽略了`pred2:pred3`）。

但是，这很容易做到，所以我猜你的实际意思可能是，你想包含与*单个*交互相关的系数子集？如果是这样，那么不，这不是当前实施的东西。从统计的角度来看，这也是相当可疑的；如果您开始忽略随机列，那么您会以非常难以解释的方式更改所有其他列的解释。此外，我真的想不出一个好的可实现语法来描述你想要的部分交互......如果你可以随意在 patsy 上提交功能请求。

另外，我不相信 statsmodels 包含一种适合这样的受限模型的方法，不。这将是一个很好的功能请求。

# css - 两列固定流体固定 css 布局

> ID：13993875
> 
> 赞同：2
> 
> 时间：2012-12-21T16:37:54.350
> 
> 标签：css, layout

我正在尝试创建一个布局，其中左侧有固定宽度和**固定位置的侧边栏。**

问题在于设置主要内容区域的宽度 - 它从屏幕向右延伸。这是我所拥有的：

```
<body>
    <div class="left-sidebar">
        sidebar
    </div>
    <div class="main-content">
        main
    </div>
</body> 
```

CSS：

```
body {
    position: relative;
}

.left-sidebar {
    position: fixed;
top: 0;
left: 0;
width: 220px;
}

.main-content {
position: absolute;
top: 0;
left: 220px;
background: #f0f0f0;
width: 100%;
} 
```

如何让主要内容 div 从左侧 220px 开始，但只填充窗口宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:46:32.030

尝试将主要内容设置为完全向左显示，但给它一个左边距以为侧边栏腾出空间。

```
.main-content {
  position: absolute;
  top: 0;
  left: 0px;
  margin-left: 220px;
  background: #f0f0f0;
  width: 100%;
} 
```

**编辑：**
我现在有一些时间来尝试代码。我建议使用 margin-left 而不是 padding-left，因为它更适合您想要做的事情。使用边距使您可以选择在内容周围放置边框。此外，如果您确实想要在内容中进行填充，则可以将其设置为正常。如果您使用填充来缩进侧边栏，则必须将 220px 添加到您想要的任何实际填充中。

这就是我想出的让它使用边距而不是填充的方法。

```
body {
  margin: 0;
  padding: 0;
  border: 0;
}

.left-sidebar {
  position: absolute;
  top: 0;
  left: 0;
  width: 220px;
  border: 1px solid green;
}

.main-content 
{
  position: fixed;
  top: 0;
  left: 0px;
  right: 0px;
  margin-left: 220px;
  background: #f0f0f0;
  border: 1px solid red;
} 
```

我也同意 anser 引用动态驱动。最初学习 CSS 的最佳方法之一是尝试使用工作样式表并根据您的需要对其进行自定义。最大的优势是它已经是跨浏览器兼容的。只需使用 Google 来寻找灵感。

# php - 解析错误：语法错误，函数开始时出现意外的 T_VARIABLE

> ID：13993878
> 
> 赞同：2
> 
> 时间：2012-12-21T16:38:03.887
> 
> 标签：php

我已经在网上查看了这个错误，它主要是说你缺少一个分号，但我找不到任何缺少的分号我希望你们能帮助我。

```
<?php // add_file.php
require 'log.php';
require 'dictionary.php';
function add_file($file = $_FILES["file"], $tags = $_POST["tags"] ){ // Parse error: syntax error, unexpected T_VARIABLE
    $tags = explode(",", $tags);
    if ($file["error"]>0){
        log("add_file", "Error in file: ".$file["error"], "error");
        exit();
    } else {
        $file["deleted"] = false;
        $file["tags"] = $tags;
        $file["id"] = uniqid();
        $file["ext"] = pathinfo($file['name'], PATHINFO_EXTENSION);
        $file["name"] = pathinfo($file['name'], PATHINFO_FILENAME);
        $file["tags"][] = $file["ext"];
        $file["tags"][] = $file["type"];
        $file["tags"][] = explode("/", $file["type"])[0];
        $file["date_created"] = date(DateTime::ATOM);
        if (file_exists("files/" . $file["id"].".".$file['ext'])){
            $file["id"] = uniqid();
            $file["loc"] = "files/" . $file["id"].".".$file['ext'];
            move_uploaded_file($file["tmp_name"], $file["loc"]);
            log("add_file", "Added file at: ".$file["loc"]);
        } else {
            $file["loc"] = "files/" . $file["id"].".".$file['ext'];
            move_uploaded_file($file["tmp_name"], $file["loc"]);
            log("add_file", "Added file at: ".$file["loc"]);
        }
        dict_add("dictionary.json", $file);
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:40:31.947

函数的可选参数必须是常量表达式：

> 默认值必须是常量表达式，而不是（例如）变量、类成员或函数调用。

[http://php.net/manual/en/functions.arguments.php#functions.arguments.default](http://php.net/manual/en/functions.arguments.php#functions.arguments.default)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:40:23.287

您不能在函数定义中分配“动态”默认值：

```
$x = 7;
function foo($y = $x) { } // wrong
function foo($y = 7) { } // ok 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:39:50.713

我认为您不能将变量分配给函数参数

请参阅： http: [//php.net/manual/en/functions.arguments.php](http://php.net/manual/en/functions.arguments.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T16:41:43.957

你不能这样做

```
function add_file($file = $_FILES["file"], $tags = $_POST["tags"] ) 
```

改为这样做

```
function add_file ($file = null, $tags = null) {
    if (is_null($file)) $file = $_FILES["file"];
    if (is_null($tags)) $tags = $_POST["tags"]
    // ...
} 
```

理想情况下，您只需在调用函数时将它们传递进去

```
add_file($_FILES['file'], $_POST['tags']); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T16:42:34.707

每个[PHP 文档](http://php.net/manual/en/functions.arguments.php)：

> 默认值必须是常量表达式，而不是（例如）变量、类成员或函数调用。

学术上的原因是函数定义在变量甚至可能存在或特别有机会改变之前就已注册。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T16:41:26.373

```
$tags = $_POST["tags"] 
```

是问题。默认值只能定义为常量值，而不是引用另一个变量（甚至是超全局变量）......虽然 array() 是一个可接受的异常

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T16:41:30.853

这不是在 PHP 中将参数传递给函数的方式。它应该看起来像这样 -

```
function add_file($file, $tags){ 
  // 
}
add_file($_FILES["file"], $_POST["tags"]); 
```

您在函数中给出的名称是您在函数中引用变量的方式，以及在调用该函数时传递实际值（`$_FILE`and中的内容`$_POST`）的方式。

您的语法有点像您正在尝试为这些参数设置默认值。在这种情况下，您必须提供实际值而不是变量。例如 -

```
function talk($words="Hello World"){
  echo $words;
} 
```

您现在可以将*可选*值传递给`talk()`函数。无论你通过什么，它都会回响同样的东西。但是，如果您什么都不传递 - 默认的“Hello World”将被回显。

```
talk("Winter Bash!"); // Output - Winter Bash!
talk(); // Output - Hello World 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T16:43:10.610

您不能将变量用作函数参数的默认值。您必须使用常量表达式（即不需要计算的表达式）作为默认值。

# mysql - 当一列为 NULL 时带有条件的 WHERE 语句

> ID：13993880
> 
> 赞同：5
> 
> 时间：2012-12-21T16:38:12.133
> 
> 标签：mysql, sql

假设我有

```
ID       |   Column 1 | Column 2
  2      |      NULL  |     "a"
  3      |      "b"   |    NULL
  4      |       "c"  |     "c" 
```

我想写的是这样的：

```
 SELECT ID FROM table, AnotherTable 
  WHERE (Table.Column1 = AnotherTable.Column IF Table.Column1 IS NOT NULL 
     OR Table.Column2 = AnotherTable.Column IF Table.Column2 IS NOT NULL) 
```

编辑：我还添加了案例 IF Table.Column1 IS NOT NULL AND Table.Column2 IS NOT NULL THEN CHOOSE Table.Column2 = AnotherTable.Column

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T16:39:55.380

您可以使用以下[`COALESCE()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_coalesce)功能：

```
SELECT ID
FROM   table JOIN AnotherTable
               ON AnotherTable.Column = COALESCE(table.Column1, table.Column2) 
```

# c# - XAML 单击事件处理程序未触发

> ID：13993883
> 
> 赞同：0
> 
> 时间：2012-12-21T16:38:34.597
> 
> 标签：c#, xaml, windows-8, monogame

由于某种原因，我无法让处理程序触发点击功能。当我单击时，我会听到“bing”的声音，好像我做错了什么。这是一个 Windows 8 应用程序全屏。我觉得好像整个屏幕都无法点击鼠标。这是一个嵌套在 XAML 接口内的 MonoGame 项目。控制游戏“菜单”的代码如下：

```
<StackPanel Height="768" VerticalAlignment="Bottom">
        <ListView Name="InGameMenu" Width="300" HorizontalAlignment="Stretch" Background="Orange" Height="auto" Padding="30 0 0 0">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button FontSize="40" Content="{Binding}" Click="MenuElementSelected" IsEnabled="True"></Button>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ListView>
</StackPanel> 
```

加载到列表中的元素只是字符串。关于可能发生的事情有什么想法吗？事件处理程序是

```
 private void MenuElementSelected(object sender, RoutedEventArgs e)
    {
        Button obj = sender as Button;

        switch ((string)obj.Content)
        {
            case "Resume":
                {
                    _game.resume();
                    break;
                }
            case "Restart":
                {
                    _game.restart();
                    break;
                }
        }
    } 
```

但它甚至从未触发内部的断点。

任何帮助是极大的赞赏！

编辑：

整个东西坐落在一个 SwapChainBackgroundPanel 将 MonoGame 转置到界面上。我还不确定，但这可能是问题的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:12:57.770

在下面修改您的喜欢并在该行`switch`上插入一个断点。`default:`然后，观察`content`变量的值是多少：

```
switch ((string)obj.Content)
{
    case "Resume":
        {
            _game.resume();
            break;
        }
    case "Restart":
        {
            _game.restart();
            break;
        }
    default:
        {
            var content = (string)obj.Content;
            break;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:40:34.337

因此，当您编写大量代码时，您往往会忘记您已经完成了某些事情，最糟糕的是，有时您可能会错过明显的事情。提醒所有友好的程序员；当您尝试调试以前的问题时，请多加注意，以免它们溢出到他们可能创建的新问题中（未被注意到）。我有以下代码行：

```
Windows.UI.Core.CoreWindow.GetForCurrentThread().IsInputEnabled = false; 
```

smack 在页面初始化的顶部，完全错过了它。希望这可以帮助其他犯了这个愚蠢错误的人。我们每天都会编写数千行代码，因此如果您在调试时不够小心，可能会发生这种情况。

# asp.net - wcf 和安全、身份验证和 ssl

> ID：13993884
> 
> 赞同：1
> 
> 时间：2012-12-21T16:38:37.020
> 
> 标签：asp.net, wcf

我们已经为应用程序构建了一个 WCF 服务，并且使用 WSHttpBinding 一切运行良好。我们现在被要求确保 Web 应用程序 -> WCF -> 数据库之间的通信是安全的，并被要求使用 SSL。除此之外，他们还要求我们确保 WCF 服务不能被其他应用程序访问。

如果我们设置 SSL，这是否会阻止其他人尝试进入，或者我们仍然需要在服务上设置 clientCredentialType 设置？此外，整个应用程序（站点、wcf、db）将在公司的网络中，所以如果我们设置 clientCredentialType="Windows" 使用哪个帐户，WCF 怎么知道允许网站与它通信，哪个 Windows 帐户是他们使用，或者这是我们需要设置的帐户？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:50:00.740

SSL 与身份验证或授权无关。它做了两件事：

*   防止第三方拦截您的流量。
*   验证人们是他们所说的那样。

“确保 WCF 服务不能被其他应用程序访问”的要求需要通过某种身份验证/授权机制来处理。您可以根据需要使用 Basic 或 Windows。

由于您在公司的网络中，我会尝试使用 Windows 身份验证。这将强制客户端通过您的域进行身份验证，但是看起来您不希望任何域用户都可以访问。在这种情况下，您需要设置基于角色的授权或基于用户的授权。无论是哪种战争，您都可以将 Web.config 文件放入与 WCF 服务端点相同的文件夹中，指定哪些帐户被授权。其他用户将看到 401 Unauthorized。

这是我会采取的一般方法。

# html5-video - 如果不受支持，video.js 是否有回调？

> ID：13993887
> 
> 赞同：1
> 
> 时间：2012-12-21T16:38:40.713
> 
> 标签：html5-video, video.js

我将 video.js 用于我的 html5 视频，但在旧设备（例如 BlackBerry OS4）上，html5 或 Flash 后备都不起作用。

有什么方法可以检测到这一点 - videojs 本身内的某种 onError 回调，或者我可以检测视频是否不受支持的任何其他方式？

我找到了这段代码，它适用于较旧的 BB，但随后也检测到较旧的 IE，它可以在 Flash 后备中愉快地运行。

```
function supportsVideo() {
   return !!document.createElement('video').canPlayType;
} 
```

任何帮助或指示将不胜感激。

# java - JBoss AS7 JNDI 数据源数据库池不是真正的池

> ID：13993891
> 
> 赞同：1
> 
> 时间：2012-12-21T16:38:48.120
> 
> 标签：java, mysql, jboss

我有一个 MySQL 数据源设置，最小池大小设置为 5，但如果我执行“显示进程列表”；在 MySQL 我只看到一个连接？

为什么 JBoss 不打开 5 分钟连接？

# objective-c - facebook sdk 3.1-ios 与 ios 5.1 -5 兼容吗？

> ID：13993892
> 
> 赞同：0
> 
> 时间：2012-12-21T16:38:48.563
> 
> 标签：objective-c, ios, ios6, facebook-ios-sdk, ios5.1

问候

我有一个将 Facebook API 用于某些功能的应用程序这个应用程序应该同时运行 5.1 和 6 ios 5 我的问题是 Facebook API 3.1 与 iOS 5 和 5.1 兼容非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:41:10.180

是的，它是兼容的。只需将仅 iOS6 的框架标记为可选即可使其正常工作。

编辑：这是您如何执行此操作的屏幕截图。 ![在此处输入图像描述](../Images/23e5f83565d81a19d73cb2d49bc7d678.png)

# c# - C# datagridview 编辑控件

> ID：13993895
> 
> 赞同：0
> 
> 时间：2012-12-21T16:39:05.617
> 
> 标签：c#, datagridview

我有一个应用程序，其中显然有一个 datagridview，我以编程方式向它添加数据，如下所示：

```
 dataGridView1.Rows.Add(string[]); 
```

在将任何对象添加到 dataGridView 之前，我可以通过双击、按 Enter 或 f2 来编辑单元格。但是，在将数据添加到行中之后，我无法再编辑任何值。我曾尝试将“只读”属性从 true 切换为 false，并且还试图弄乱：

```
 dataGridview1.EditMode .... 
```

我不知道如何使编辑模式正常工作，但在之前的所有击键中，它只会突出显示列表中的下一行。

添加行后，如何使用户能够在数据网格视图中编辑数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:53:32.043

以下是有关在此处完成此操作的方法的教程列表：

[http://www.codeproject.com/Questions/433279/edit-delete-update-cancel-in-gridview-asp-net](http://www.codeproject.com/Questions/433279/edit-delete-update-cancel-in-gridview-asp-net)

我将从这些开始。

# cmd - 获取 CMD 目录中所有文件大小的总和

> ID：13993896
> 
> 赞同：1
> 
> 时间：2012-12-21T16:39:13.753
> 
> 标签：cmd

如何获取位于目录中的所有文件的大小总和（但不包括子目录中的文件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:42:39.947

使用该`dir`命令，总字节数显示在最后一行的旁边。你可以使用：

```
dir | findstr "File(s)" 
```

仅获取当前目录的此信息。或者

```
dir path | findstr "File(s)" 
```

获取给定路径中的总大小，例如：

```
dir c:\windows | findstr "File(s)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:50:56.943

假设在 MS DOS 中：但这并不排除子文件夹和隐藏文件；）

尝试：

```
dir /a/s 
```

结果：当前目录和子目录的文件及其隐藏文件。以及所有这些的总大小。

![在此处输入图像描述](../Images/1bd41c5281351e93a8086a51283f7862.png)

PS：坦率地说，有一个 GUI，您可以获取文件夹大小和其中的文件数量。想知道为什么要在 DOS 中这样做吗？;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:44:02.793

此信息包含在 dir 命令的输出中。在最后一个输出行之前的行是显示的文件数和总大小。

# jquery - jQuery errorPlacement 提交处理程序

> ID：13993900
> 
> 赞同：0
> 
> 时间：2012-12-21T16:39:27.343
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证，并将我的错误写入 a `div`，这工作正常。我想要做的是`div`隐藏，当验证返回任何错误时，`div`显示在表单顶部。我不确定显示`div`.

这是我所拥有的：

HTML：

```
 <div id="valwrapper" class="hide">
    Validation Errors<br/><br/>
        <div id="valerrors"></div>
    </div> 
```

JavaScript：

```
errorPlacement: function (error, element) {
    $('#valerrors').append(error);
},

submitHandler: function(){
    $("#valwrapper").slideDown("fast");
},
errorContainer: "#valerors",
//errorLabelContainer: "#valerrors",
//wrapper: "span", debug: true,
onfocusout: false,
onkeyup: false,
onclick: false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:53:08.480

伙计们，只是我的愚蠢。代码应该有“invalidHandler”而不是“submitHandler”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:01:48.813

这是完整的答案。不妨把它贴出来，因为我一直在努力。

您不需要`errorPlacement:`，因为插件会在您使用时自动为您处理`errorLabelContainer:`

[http://jsfiddle.net/SaLNp/4/](http://jsfiddle.net/SaLNp/4/)

```
$('form').validate({
    invalidHandler: function() {
        $("#valwrapper").slideDown("fast");
    },
    errorContainer: "#valwrapper",
    errorLabelContainer: "#valerrors",
    wrapper: "span",
    onfocusout: false,
    onkeyup: false,
    onclick: false
});​ 
```

文档：

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

# linux - Perl 调用系统命令并保持脚本同时运行

> ID：13993904
> 
> 赞同：0
> 
> 时间：2012-12-21T16:39:48.793
> 
> 标签：linux, perl, system

我正在运行一个执行逻辑检查以及是否满足某些条件的 perl 脚本。示例：如果超过一定时间，我想在 linux 服务器上运行 system() 命令，该命令运行另一个脚本来更新该数据。更新文件的脚本需要 10-15 秒，它必须通过当前的文件数量，但在每月的高峰时段可能长达 30 秒。

我希望 perl 脚本运行，如果它必须运行 system() 命令，我不希望它在完成脚本的其余部分之前等待 system() 完成。解决此问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:42:00.123

系统在 shell 中运行命令，因此您可以使用所有 shell 功能，包括作业控制。因此，只需在命令末尾粘贴 & 即可：

```
system "sleep 30 &"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:46:54.847

使用`fork`创建一个子进程，然后在子进程中，调用你的其他脚本使用`exec`而不是系统。 `exec`将在单独的进程中执行您的其他脚本并立即返回，这将允许孩子完成。同时，您的父脚本也可以完成它需要做的事情并退出。

看看[这个](http://www.perlmonks.org/?node_id=683628)。它可能会帮助你。

[在这个](https://wiki.bc.net/atl-conf/pages/viewpage.action?pageId=20548191)页面上还有另一个如何使用 fork 的好例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:40:20.863

由于出版日期，不打算成为双关语，但要小心僵尸！这有点棘手，有关详细信息，请参阅[perlipc](http://perldoc.perl.org/perlipc.html#Signals)。但是，据我了解您的问题，您不需要维护更新程序和调用程序进程之间的任何关系。在这种情况下，“一劳永逸”会更容易：

```
use strict;
use warnings qw(all);
use POSIX;

# fork child
unless (fork) {
    # create a new session
    POSIX::setsid();

    # fork grandchild
    unless (fork) {

        # close standard descriptors
        open STDIN, '<', '/dev/null';
        open STDOUT, '>', '/dev/null';
        open STDERR, '>', '/dev/null';

        # run another process
        exec qw(sleep 10);
    }

    # terminate child
    exit;
} 
```

在这个例子中，`sleep 10`不再属于进程组，所以即使杀死父进程也不会影响子进程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T23:58:58.267

[在http://aaroncrane.co.uk/talks/pipes_and_processes/paper.html](http://aaroncrane.co.uk/talks/pipes_and_processes/paper.html)上有一个关于从 Perl 运行外部程序（包括运行后台进程）的很好的教程

# java - 移动窗口/框架/程序时鼠标拖动滞后/跳过

> ID：13993909
> 
> 赞同：0
> 
> 时间：2012-12-21T16:40:14.347
> 
> 标签：java

我的程序没有装饰，因此我仍然想在没有标题栏的情况下移动程序。下面的代码对我来说确实有效，但它喜欢滞后或跳过。它确实可以正常工作一秒钟，跳过，工作正常，跳过......等等。目前我的鼠标中的 if 语句已关闭。有没有更好的方法来实现鼠标拖动来移动我的窗口/框架/程序？

```
addMouseMotionListener(new MouseMotionListener() {                  

            @Override
            public void mouseDragged(final MouseEvent e) {
                // TODO Auto-generated method stub
                Runnable runnable = new Runnable() {
                    public void run() {
                        int posX=0;
                        int posY=0;
                        int posx=e.getLocationOnScreen().x;
                        int posy=e.getLocationOnScreen().y;
                        setLocation (posx - posX, posy - posY);
                    }};
                   SwingUtilities.invokeLater(runnable);                                       
                }

                public void mouseMoved(MouseEvent e) {
                    // TODO Auto-generated method stub
                    if (SettingsIni.jmenuauto().equals("on")){
                        getJMenuBar().setVisible(e.getY() < 50);
                    }
                }           

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:46:42.097

尝试不使用`invokeLater()`.

此外，我认为`posX/Y`应该是类的字段并`mousePressed()`改为设置。因为他们站在这里，他们没有用......

# java - 如何使用 ScheduledExecutorService 处理重复任务中的错误？

> ID：13993911
> 
> 赞同：2
> 
> 时间：2012-12-21T16:40:18.657
> 
> 标签：java, multithreading, concurrency, error-handling, scheduledexecutorservice

我有一个，它通过（可以改为使用）定期[`ScheduledExecutorService`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html)调用[Runnable](http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html)。[`scheduleWithFixedDelay()`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay-java.lang.Runnable-long-long-java.util.concurrent.TimeUnit-)[`scheduleAtFixedRate()`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate-java.lang.Runnable-long-long-java.util.concurrent.TimeUnit-)

现在正在考虑如果发生错误该怎么办。如果它无法从 (*) 中轻松恢复，我希望选择停止所有进一步的调用，但不确定执行此操作的最佳方法。

显然，无法从 Runnable 抛出已检查的异常，因此希望获得有关如何从以下选项中进行选择的任何指导：

```
scheduledFuture.cancel(false);
...or...
scheduledFuture.cancel(true);
...or...
scheduledExecutorService.shutdown();
...or...
scheduledExecutorService.shutdownNow();
...or...
Throw a custom RuntimeException myself?
...or...
Something else? 
```

(*) 想知道一般情况，但如果有人感兴趣，我目前正在查看的检查异常是`ParserConfigurationException`从`DocumentBuilderFactory.newDocumentBuilder()`. 如果抛出此错误，则表明存在严重问题，因此我基本上希望调度完全停止，而不是每次都可能重复错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:01:58.890

您也许可以将[Callable](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)与[Future一起使用。](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)这将允许您从异步任务中抛出已检查的异常，但仍可以根据每个任务的需要进行捕获和处理。

如果您使用这种方法，那么让任务本身决定如何处理异常可能是最有意义的。看到这个答案：

*   [https://stackoverflow.com/a/4910682/123378](https://stackoverflow.com/a/4910682/123378)。

但是，如果您想在任务本身之外处理异常，那么我认为每个任务都需要另一个线程。这是一种可能的选择：

```
 ScheduledExecutorService scheduleExecutor;
    scheduleExecutor = = Executors.newScheduledThreadPool(10); // or whatever

    ExecutorService workerExecutor;
    workerExecutor = Executors.newSingleThreadExecutor(); // or whatever

    public void schedule(final long fixedDelay) {

      scheduleExecutor.scheduleWithFixedDelay(new Runnable() {

        @Override
        public void run() {

            Future<Void> future = workerExecutor.submit(new Callable<Void>() {

                @Override
                public Void call() throws Exception {

                    // Do work here. Throw appropiate exception as needed.

                    return null;
                }
            });

            // Now you can catch and handle the exception in whatever
            // way you need to. You can cancel just this task (which is likely
            // redundant by this point), or you can choose to shutdown
            // all other scheduled tasks (which I doubt is what you want).

            try {
                future.get();
            } catch (Exception e) {
                future.cancel(true);
            }

        }
    }, 0, fixedDelay, TimeUnit.MILLISECONDS);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:54:24.680

基于上面的一些有用的评论，这里是我当前代码的要点 - 一些 q 仍然存在，所以欢迎任何进一步的评论：

```
public class ScheduledTask implements Runnable {
    // Configurable values
    private static final int CORE_THREAD_POOL_SIZE = 1;
    private static final int INITIAL_DELAY_MS = 0;
    private static final int INTERVAL_MS = 1000;

    private final ScheduledExecutorService scheduledExecutorService = 
        Executors.newScheduledThreadPool(ScheduledTask.CORE_THREAD_POOL_SIZE);

    private ScheduledFuture<?> scheduledFuture;

    public void run() {
        try {
            try {
                // Do stuff
            } catch RecoverableCheckedException rce { // E.g. SAXException
                // Log and handle appropriately
            }
        } catch UnrecoverableCheckedException uce { // E.g. ParserConfigurationException
            // Not 100% happy with this. It means the caller would need to call
            // getCause() to get the real Exception in this case. But other 
            // RuntimeExceptions wouldn't be wrapped. Could consider catching
            // and wrapping all RuntimeExceptions but I like that even less!
            throw new RuntimeException(uce);
        }
    }

    public boolean isScheduling() {
        return (this.scheduledFuture != null)
               && (!this.scheduledFuture.isDone());
    }

    // May not be needed but provided in case this class is shared.
    public boolean isShutdown() {
        return scheduledExecutorService.isShutdown();
    }

    public void start() {
        // If the Executor Service has already been shutdown, would expect
        // a RejectedExecutionException to be thrown here(?) Not sure what
        // would happen if this method were called when isScheduling() is
        // true?
        this.scheduledFuture = 
            this.scheduledExecutorService.scheduleWithFixedDelay(
                this,
                ScheduledTask.INITIAL_DELAY_MS,
                ScheduledTask.INTERVAL_MS,
                TimeUnit.MILLISECONDS);
    }

    // To be called once at the very end - e.g. on program termination.
    public void shutdown() {
        this.scheduledExecutorService.shutdown();
    }
} 
```

# android - GCM 注册 ID 是否会发生变化？

> ID：13993913
> 
> 赞同：0
> 
> 时间：2012-12-21T16:40:23.160
> 
> 标签：android, google-cloud-messaging

设备 - 应用程序组合的注册 ID 是否会更改？文档中没有提到它的一致性（我可以找到）。

此外，在卸载和重新安装应用程序后，是否会为设备分配相同的注册 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:04:26.083

是的，它可以改变。从文档

> 尽管 com.google.android.c2dm.intent.REGISTRATION Intent 通常是在应用程序发出请求后收到的，但 Google 可能会定期刷新注册 ID。所以应用程序必须随时准备处理它。

不，不会一样的。

# php - php & mysql：根据数据库检查大型数组的最有效方法

> ID：13993915
> 
> 赞同：4
> 
> 时间：2012-12-21T16:40:42.913
> 
> 标签：php, mysql, performance, multidimensional-array, comparison

我有大量数据存储在多维数组中。一个示例结构如下：

```
Array
(
    [1] => Array
        (
            [0] => motomummy.com
            [1] => 1921
            [2] => 473
        )
    [4] => Array
        (
            [0] => kneedraggers.com
            [1] => 3051
            [2] => 5067
        )
) 
```

我在 mysql 数据库中也有一个表，其中`currently`包含约 80K 域名。该列表将每月增长约 10K+ 域名。目标是将 Array[][0]（域名）与 mysql 数据库进行比较，并返回一个包含唯一值的保留值（但密钥保留**并不重要）的数组。**

请注意，我只想单独比较第一个索引，而**不是**整个数组。

最初的多维数组被认为是巨大的（很可能从 100k 到 1000 万个结果）。获取数据库中未包含的数据的最佳方法是什么？

我现在所做的只是将数据库中的完整域列表存储到一个数组中，然后使用以下函数将初始数组中的每个值与数据库数组进行比较。这显然是非常缓慢和低效的。

```
// get result of custom comparison function
$clean = array_filter($INITIAL_LIST, function($elem) {
$wordOkay = true;

// check every word in "filter from database" list, store it only if not in list           
    foreach ($this->domains as $domain) {
        if (stripos($elem[0], $domain) !== false) {
            $wordOkay = false;
            break;
        }
    }

    return $wordOkay;
}); 
```

在这一点上，一些伪代码甚至实际代码会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:53:56.550

使用数据库管理系统！它是为这样的东西而制作的。

*   创建一个临时表 temp { id (用数组索引填充); url（用url填充）}

*   用你的数组数据填充它

*   理想情况下创建一个索引`temp.url`

*   查询数据库：

    ```
    SELECT * FROM `temp` LEFT JOIN `urls`
    WHERE urls.url = temp.url AND urls.url IS NULL; 
    ```

    （该表`urls`是您现有的数据）

# c# - List的有序组合 >

> ID：13993919
> 
> 赞同：4
> 
> 时间：2012-12-21T16:41:03.257
> 
> 标签：c#, list, combinations

给定任意数量的有序列表

```
List<int> list1 = new List<int> {1, 1, 2};
List<int> list2 = new List<int> {1, 2, 3, 4};
List<int> list3 = new List<int> {1, 2};
List<int> listN = new List<int> {....,....}; 
```

我想找到列表的组合，以便按升序找到每个组合的总和。例如，

```
{1, 1, 1} = 3, where {1 (1st element of list1), 1 (1st element of list2), 1 (1st element of list3)} 
{1, 1, 1} = 3, where {1 (2nd element of list1), 1 (1st element of list2, 1 (1st element of list3)}
{1, 2, 1} = 4
{1, 1, 2} = 4
{2, 1, 1} = 4
... 
```

以升序查找总和的原因是我可以选择只计算前 M 个组合（例如上面的 M = 5）。

我目前的想法是以某种方式扩展查找所有列表的组合，如[List<List<int>> 的组合中](https://stackoverflow.com/questions/545703/combination-of-listlistint)所讨论的，从列表的一个小子集开始，其中当前元素和下一个元素之间的差异为 0，例如

```
List<int> tempList1 = new List<int> {1, 1};
List<int> tempList2 = new List<int> {1};
List<int> tempList3 = new List<int> {1}; 
```

并找到所有组合，然后将具有最小差异的下一个元素添加到列表中

```
List<int> tempList1 = new List<int> {1, 1, 2};
List<int> tempList2 = new List<int> {1, 2};
List<int> tempList3 = new List<int> {1, 2}; 
```

并从那里构建解决方案集。

这可能吗，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:06:45.380

计算单个项目并不昂贵，但是如果项目数量很大，则将所有结果保存在内存中并对其进行排序可能会很昂贵。但是，如果我正确理解的话，计算组合似乎对解决任务没有多大帮助。

**编辑：**当我开始写我的回复时，我没有看到关于组合的说明。无论哪种方式，如果您有不同组合的生成器，也可以使用以下算法。我不确定是否有一个通用的解决方案来只生成想要的总和。

假设 N 是项目数，M 是您想要获得的结果数。为了使以下内容有意义，我假设 N >> M （例如更大）。

然后我会使用以下算法：

*   创建一个结果列表以容纳最多 M 个项目。
*   遍历所有 N 项。
    *   对于每个项目，计算总数
    *   在结果列表中插入总数，以便顺序正确（二进制搜索可能是一种很好的算法）
    *   将插入后的结果列表修​​剪为不超过 M 个项目（插入的项目或先前插入的项目将根据它们的计算结果脱落）
*   您现在拥有前 M 个项目，按降序排列

请注意，如果您愿意，您可以轻松地使上述算法相对于原始 N 项的顺序保持稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:14:39.063

尝试这个：

```
List<int> list1 = new List<int> { 1, 1, 2 };
List<int> list2 = new List<int> { 1, 2, 3, 4 };
List<int> list3 = new List<int> { 1, 2 };

var combinations = list1
    .SelectMany(x => list2, (a, b) => new { a, b })
    .SelectMany(x => list3, (combined, c) => new { a = combined.a, b = combined.b, c })
    .Select(comb => new{ Sum = comb.a + comb.b + comb.c, Combination = new List<int>{comb.a, comb.b, comb.c}})
    .OrderBy(summed => summed.Sum);

╔═════════════╦═════╗
║ Combination ║ Sum ║
╠═════════════╬═════╣
║ 1,1,1       ║   3 ║
║ 1,1,1       ║   3 ║
║ 1,1,2       ║   4 ║
║ 1,2,1       ║   4 ║
║ 1,1,2       ║   4 ║
║ 1,2,1       ║   4 ║
╚═════════════╩═════╝ 
```

编辑：清理了一下

# jquery - 带有 jQ uery 对话框的 ASP.NET 表单，验证对话框但不是父表单

> ID：13993922
> 
> 赞同：0
> 
> 时间：2012-12-21T16:41:10.497
> 
> 标签：jquery, asp.net, jquery-ui, validation, jquery-ui-dialog

我的 ASP.NET 表单上有少量的模态弹出帮助对话框。我们为此使用 jQuery 对话框。在将模式中的数据传输回父表单上的汇总字段之前，我需要对模式上的字段执行一些验证。

实际上，如果我在模态框上输入了所有内容，但（比如说）尚未在父级上输入一些必填字段，则模态框将不会提交，并且错误消息会出现在模态框后面的页面上。

我的猜测是我需要将我`<asp:LinkButton>`的模式更改为`CausesValidation="false"`并添加一个`OnClientClick`处理程序以通过 jQuery 执行所有这些验证，并删除我所有的 ASP 验证器。好在说验证比较简单。

但是，如果有一些我可以在这里利用的 ASP 技巧，我会更喜欢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:34:37.580

验证组允许验证控件组，而不是验证页面上的所有控件。

# database - Yii 数据库故障转移故障转移

> ID：13993927
> 
> 赞同：1
> 
> 时间：2012-12-21T16:41:42.090
> 
> 标签：database, yii, failover

我目前正在做一个项目，我们选择 Yii 作为我们选择的新框架。我目前正在尝试找出在 Yii 中实现某种自动数据库故障转移的最佳方法。

我目前正在尝试覆盖 CDbConnection 类 - 打开功能。我不确定我是否朝着正确的方向前进。

基本上我要做的是检查数据库连接，如果它失败连接到另一个数据库。简单的概念我只是不知道把它放在哪里。我知道使用 mysqlnd_ms 有更好的方法来做到这一点，但它还没有在我们正在使用的服务器上设置，所以必须想出一种在 Yii 中做到这一点的方法。任何帮助是极大的赞赏。-DA

这就是我到目前为止的想法？

```
class DaDbConnection extends CDbConnection{

public $dbConnectTries = 6;
public $numDatabases = 3;
private $_tries =0;
private $_db = 1;

/*
 * Extends CDbConnection open() method
 * Tries to connect to database connections setup in config/main.php up to 
 * the value of $dbConnectionTries or a connection is successful
 * @throws CException If it can not connect to any DBs
 */
protected function open()
{
    try{
        //try to connect to the default DB
        parent::open();

    }catch(Exception $e){
        if($this->_tries < $this->dbConnectTries){

            //If there aren't anymore DBs to try we must start over from the first
            if($this->_db >= $this->numDatabases){
                $tryDb = 'db';
                $this->_db = 0;
            }else{
               $tryDb = 'db'.$this->_db;
            }

            $this->_db++;
            $this->_tries++;

            $this->connectionString = Yii::app()->$tryDb->connectionString;
            $this->username = Yii::app()->$tryDb->username;
            $this->password = Yii::app()->$tryDb->password;
            $this->open();
        }else{
            throw new CDbException('Could Not Connect to a DB.');
        }
    }    
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:56:01.930

听起来方向是正确的。我不确定 Yii 有什么内置的，如果我错了，请有人纠正我。

我可能会尝试在我的主配置文件中定义两个数据库，但使用我自己的自定义类；

```
return array(
    ...
    'components' => array(
        'db' => array(
            'connectionString' => 'mysql:host=dbserver1;dbname=my1db',
            ...
            'class'            => 'MyCDbConnection',
            ...
        ),
        'dbBackup' => array(
            'connectionString' => 'mysql:host=dbserver2;dbname=my2db',
            ...
            'class'            => 'MyCDbConnection',
        ),
        ...
    ),
); 
```

然后，按照您的建议，我将让`MyCDbConnection`该类扩展主 CDbConnection 类，但包含我自己的 open 方法。

可以很容易地在数据库之间切换（例如[Yii 中的多数据库支持](http://www.yiiframework.com/wiki/123/multiple-database-support-in-yii/)），我相信您可以将其集成到在您的自定义`open()`方法中打开数据库连接的 try/catch 中？

# objective-c - 调试 Captainhook 调整

> ID：13993934
> 
> 赞同：0
> 
> 时间：2012-12-21T16:42:08.970
> 
> 标签：objective-c, ios, hook, jailbreak, tweak

我正在使用 Captainhook 进行调整。我做了类似的事情：

```
[self.delegate somemessage];
//the message is a private api. I don't know its implementation detail. 
```

然后该应用程序占用了大量系统资源并在几分钟后被杀死。问题是在控制台中找不到任何日志、错误或异常。只有一个 LowMemory 崩溃报告。

我想知道这可能是什么原因，我该如何处理？我什至不知道从哪里开始调试它……</p>

# jquery - 使用 jQuery 点击 div

> ID：13993935
> 
> 赞同：0
> 
> 时间：2012-12-21T16:42:15.117
> 
> 标签：jquery

我是移动优化网站。有一个包含不同软件包的页面，您可以通过单击来选择，然后再进入下一页。默认情况下选择包 1，但我在移动设备上隐藏了此选项。如果您不选择其他选项并继续操作，则会出现问题，因为您在不知不觉中选择了一个您看不到的包。

为了解决这个问题，我想默认选择另一个（可见的）包。我不想编辑原始的 javascript 或后端，我宁愿我的代码是分开的。

我试过下面的代码来使用 jQuery 像用户一样“单击”选项。Tt 在演示中有效，但在实际站点上无效。我尝试在延迟后运行它并在 dom 读取和窗口加载中运行它。恐怕我无法发布该网站或使实际代码可见。

```
$('div').click(); 
```

[http://jsfiddle.net/LZWjs/3/](http://jsfiddle.net/LZWjs/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:46:17.280

您可以使用自定义事件来捕获点击事件。只需触发点击

```
$(document).trigger('customClick'); 
```

然后抓住事件：

```
$(document).on('customClick', function () {
     // do whatever you want
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:54:39.167

下面的代码：

```
$('div').click(); 
```

将在每一个上执行**点击**事件，`div`所以这可能不是您想要做的，它可能会多次调用您的选择代码，上帝知道还有什么。为了模拟用户的选择，您需要提供`div`一个**ID**并`trigger`单击它，例如

```
$('#ID').click(); 
```

如果这不能解决您的问题，您可以随时在您的页面选择机制中插入一些 console.logs 或警报，以便您可以跟踪触发了女巫事件。如果您不愿意分享您的代码，我可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T03:03:42.020

在移动设备上，您可以跳过呈现第一个不相关的选项，然后初始化表单并选择第一个可用选项。如果是单选按钮控件，它将是：

```
$("ul.optionsList input.anOption:first").attr("checked", true) 
```

...假设这`ul.optionsList`是选项容器，并且`anOption`是无线电元素的类名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:06:15.693

您的方法存在一些问题。

首先，正如 Ivan 所说，`$('div').click();`这会导致页面中的每个`<div>`页面都引发 click 事件，这不是您想要的。我已经更新了你的[例子](http://jsfiddle.net/LZWjs/4/)来证明这一点。Ivan 建议您使用 ID 来专门选择要单击的包是正确的。例如：

```
<div id="package1">Hidden</div>
<div id="package2">Pick me</div>
<div id="package3">Another package</div>

<script>$('#package2').click();</script> 
```

或者，您可以使用您的 Javascript 使用的任何方法来区分各种包之间的差异，以确定选择哪个包，可以是 CSS 类、HTML5*数据*属性等。

* * *

其次，您如何隐藏第一个选定的包？可能类似于`$('.selected').hide();`？为什么不完全从 DOM 中删除第一个包，然后在新的“第一个”包上触发点击事件？例如：

```
$('.selected').remove();
$('.packages').first().click(); 
```

* * *

第三，您评论*“元素是链接，但 href 是 javascript”。*你为什么要触发*点击*事件`<div>`呢？从它的声音来看，您应该以`<a>`元素为目标。

* * *

第四，jQuery的`click()`函数只触发*点击* **事件**。这与*“使用 jQuery 像用户一样‘单击’选项”不同。*如果您所有的 Javascript 都在`<a>` *href*属性中，它只会在用户手动单击它时触发，而不是在触发*click*事件时触发。我整理了一个[例子](http://jsfiddle.net/bCg8A/)来强调差异。

# mysql - MySQL查询中的未知列ID

> ID：13993937
> 
> 赞同：1
> 
> 时间：2012-12-21T16:42:20.640
> 
> 标签：mysql

有人可以帮我吗？当我尝试运行它们时，我有 2 个 MySQL 查询得到未知的列 ID。我可能会补充一点，我正在将此数据库从 SQLServer 2005 转换为 MySQL，它们在 SQL Server 2005 中运行良好。

这是其中的 1 个：

```
SELECT DISTINCT g.id AS `genre`  
    FROM media_playlist_sequence MPS  
    INNER JOIN media               M   ON M.`key`           = MPS.media_key 
    INNER JOIN media_playlists     MP  ON MP.`key`          = MPS.playlist_key 
    INNER JOIN node_media_playlist NMP ON NMP.playlist_key  = MP.`key` 
    INNER JOIN nodes               N   ON N.`key`           = NMP.node_key 
    INNER JOIN media_files         MF  ON MF.media_key      = M.`key` 
    INNER JOIN media_locations     ML  ON ML.media_file_key = MF.media_file_key  
        AND ML.node_key = n.`key`  
    INNER JOIN media_genres        MG  ON MG.media_key      = M.`key` 
    INNER JOIN genres              G   ON G.`key`           = MG.genre_key 
WHERE M.is_ready = 1    
    AND MP.id = 'Channels'    
    AND N.id = 'VIC-WIN7' 
    AND mf.is_quad_image = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:47:58.740

我的猜测是这是一个区分大小写的问题。默认情况下，MySQL 可以区分大小写，而 SQL Server 则不。

# jquery - 谷歌地图多边形渲染不正确

> ID：13993938
> 
> 赞同：1
> 
> 时间：2012-12-21T16:42:22.387
> 
> 标签：jquery, html, google-maps, google-maps-api-3, maps

我正在尝试使用 2 个纬度和经度之间的测地线点在谷歌地图中绘制一个半圆。

我找到了一个正是我需要的地方：http: [//maps.forum.nu/temp/gm_bearing.html](http://maps.forum.nu/temp/gm_bearing.html)

```
It was using the API V2 and I need the V3. 
```

所以我把它转换了。

我遇到的问题是半圆没有被正确绘制，我不知道为什么。

这就是绘制半圆时发生的情况。 ![在此处输入图像描述](../Images/8607af92b6a4d6682f44573acc1bb36f.png)

但是当我缩小或缩小半圆时，它看起来很好。 ![在此处输入图像描述](../Images/61916174a4cbb0b21c3abe4d17231850.png)

我已经在 jsfiddle 中重现了这个问题。

[http://jsfiddle.net/Morlock0821/4dRB2/1/](http://jsfiddle.net/Morlock0821/4dRB2/1/)

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:18:45.157

在 drawCircle 函数中删除这些行：

```
var basePoints = calculateGeodesicPoints(circlePoints[circlePoints.length - 1], circlePoints[0]);
while (basePoints.length) {
  circlePoints.push(basePoints.shift());
} 
```

![在此处输入图像描述](../Images/97b94c0e9fddb0428d4d11210b7e1d6a.png) [http://googlemaps.googlermania.com/google_maps_api_v3/en/draw-semi-circle.html](http://googlemaps.googlermania.com/google_maps_api_v3/en/draw-semi-circle.html)

# css - 为什么总是引用字体系列中的第一个选择？

> ID：13993939
> 
> 赞同：6
> 
> 时间：2012-12-21T16:42:24.020
> 
> 标签：css

在我见过的几乎所有 CSS 字体系列声明中，都引用了第一个字体选择。

例子：

```
{
font-family:"Times New Roman", Georgia, Serif;
} 
```

前两个选择都是特定字体，而第三个选择“Serif”是通用字体系列。为什么引用的是 Times New Roman 而不是 Georgia？ [这个讨论讨论](https://stackoverflow.com/questions/7638775/do-i-need-to-wrap-quotes-around-font-family-names-in-css)了如何并不总是需要引用，但它没有解释为什么只有第一个选择的字体会在引用中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T16:43:31.780

这是因为 Times New Roman 有空格，任何其他的也应该被引用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T16:44:19.293

这很有趣，我认为这与名称中的间距有关。

官方规范是这样说的：

> 为避免转义错误，建议引用包含空格、数字或连字符以外的标点符号的字体系列名称：

所以，它可能与成为第一个无关:-)

参考：[http ://www.w3.org/TR/CSS21/fonts.html#font-family-prop](http://www.w3.org/TR/CSS21/fonts.html#font-family-prop)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:02:48.990

没有理由应该引用第一个字体名称，但大概您一直在阅读的声明经常提到一个由几个单词组成的名称作为名字。许多字体都有这样的名称，而且人们列出的其他字体名称可能是从一些具有简单（一个单词）名称的常见字体列表中复制而来的。

如果您查看 SO 页面的 CSS 代码，您将看到`font-family: Arial, Helvetica, sans-serif;`. 没有引号。实际上也不需要引号`Times New Roman`，但是人们倾向于足够认真地对待警告并引用这些名称。

因此，除非您可以提供声明的证据，其中列出了几个多字字体名称并且只引用了第一个，这只是简单化思维的一个症状：人们可能会考虑选择主要字体，可能会选择多字名称，然后他们用简单的名称编写或多或少随机的其他字体列表。

# iphone - 使用 NSTimer 一段时间后使按钮可见

> ID：13993945
> 
> 赞同：0
> 
> 时间：2012-12-21T16:42:52.790
> 
> 标签：iphone, objective-c, ios, nstimer

我正在尝试开发一个新的应用程序，`iOS`但我被困住了`NSTimer`:-(。目前我有一个功能可以在用户在屏幕上点击两次或更多次后`void`隐藏一个。我想让按钮在之后再次可见达到5 秒并立即停止并重置它，以便在用户再次点击两次后重新隐藏它:-) 但我不知道如何告诉应用程序 5 秒已经过去:-/。`UIButton``NSTimer``NSTimer`

有人能帮助我吗？:-)

这是到目前为止的代码:-)

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSUInteger numTaps = [[touches anyObject] tapCount];

    if (numTaps >= 2)
    {
        // Other code//

        [self.button setHidden:YES];
        buttonHideTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 invocation:nil repeats:NO];

        // Other code //
    }
} 
```

**谢谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:46:09.457

定时器需要有一个选择器，它会告诉定时器在时间过去后该做什么：

```
buttonHideTimer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(showButtonNow) userInfo:nil repeats:NO]; 
```

# java - 如何在 Eclipse 中为 Java 创建一个非 EJB 超级简单的 Web 服务 .war？

> ID：13993946
> 
> 赞同：0
> 
> 时间：2012-12-21T16:42:53.940
> 
> 标签：java, eclipse, web-services, netbeans, jboss6.x

我一直在尝试使用 Java 1.6 在 Eclipse Java EE (Juno) 中创建一个超级简单的 Web 服务（非 SOAP wsdl 服务器）。我希望网络服务战争尽可能简单，就像[这个简单](https://community.jboss.org/message/250061#250061)的（线程中的第一个回复）一样。

IOW，我希望war文件只有我定义的类（包括@WebService和@WebMethod注释）和可能的web.xml文件，然后可以在Eclipse Java EE中部署到我设置的JBoss 6.0服务器向上。

我一定在某处遗漏了一些简单的步骤。每次我尝试过，我要么无法部署 Web 服务，要么 Eclipse 想要自动生成并向部署添加大量无用的类。

我设置了 Eclipse Java EE，并创建了一个文件 -> 新建 -> 动态 Web 项目并将其命名为 ProjectHelloService。然后，我在自己的包 ws.simple 中的 Java Resources/src 下的项目中创建一个类。该类如下所示：

```
package ws.simple;

import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService
public class HelloService
{
  @WebMethod
  public String sayHello(String name)
  {
    return "Hello, " + name;
  }
} 
```

然后我启动 JBoss 服务器并将项目“添加”到 JBoss。我看到“...deploy, ctxPath=/ProjectHelloService”消息表明我的项目已部署。但是，当我转到默认的 JBoss 页面 -> JBoss Web 服务控制台 -> 查看已部署服务的列表时，我看到“目前没有部署端点”。当我四处寻找并尝试查看 JBoss 的 server/default 文件夹中部署的内容时，我在部署文件夹中找不到任何内容。

同样，我一定在某处遗漏了一些步骤。例如，在 Eclipse 和 JBoss 部署文件夹中，我看不到正在生成 .war（甚至是 .jar）文件。但是，我并不深入了解 Eclipse 如何与 JBoss 6.0 一起工作的细微差别，因此我可能在这里遗漏了一些配置细节。

我可以做一些简单的事情来获得一个超级愚蠢的简单 .war 文件以部署到包含 JBoss 6.0 的 Eclipse 以便我可以看到我的 Web 服务？而且由于 JBoss 能够从 .war 文件中的注释自动生成所有自动文件，我不希望 Eclipse 做所有额外的文件存根生成废话。那是 CORBA 的老派风格，并且使项目更难管理（至少对于我现在工作的领域而言）。

而且我不认为有什么方法可以让我在 Eclipse 中拥有上述内容，同时又可以方便地使用[Netbeans 方法来创建和管理 Java web-services](http://netbeans.org/kb/docs/websvc/jax-ws.html#Exercise_1)。如果有，我肯定想知道它是什么。

感谢您在这里提供的任何指导和/或帮助。

# android - Android ProgressDialog 不显示

> ID：13993947
> 
> 赞同：1
> 
> 时间：2012-12-21T16:42:54.990
> 
> 标签：android, android-alertdialog

我创建了一个`AlertDialog`让用户选择是否从服务器下载内容。

如果用户选择下载，`AlertDialog`则关闭，并出现一个`ProgressDialog`连接到`AsyncTask`.

`ProgressDialog`从未显示。的“确定”按钮`AlertDialog`保持选中状态，直到操作结束`AsyncTask`。

如果我在代码中“注释”了该`AsyncTask`操作，`AlertDialog`则正确解除，并`ProgressDialog`显示。

我还没有在真实设备上尝试过该应用程序，而只是在模拟器上尝试过。

哪个是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:46:39.347

试试这个代码，这可能对你有帮助

```
private class allinfo extends AsyncTask<String, Void, JSONObject> {
        private ProgressDialog dialog;

        protected void onPreExecute(){
             dialog = ProgressDialog.show(collection.this, "Loading", "Loading. Please wait...", true,false);
        }

        @Override
        protected JSONObject doInBackground(String... arg0) {
            // TODO Auto-generated method stub

            return json;
        }
        protected void onPostExecute(JSONObject json)
        {
            dialog.dismiss();
            info(json);
        }

     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:12:38.887

```
final AlertDialog d = new AlertDialog.Builder(youclassname.this)
        .setView(input)
        .setTitle(R.string.message)
        .setPositiveButton(android.R.string.ok,
                new Dialog.OnClickListener() {
                    public void onClick(DialogInterface d, int which) {
                        //Do nothing here. We override the onclick
                    }
                })
        .setNegativeButton(android.R.string.cancel, null)
        .create();

d.setOnShowListener(new DialogInterface.OnShowListener() {

    public void onShow(DialogInterface dialog) {

        Button b = d.getButton(AlertDialog.BUTTON_POSITIVE);
        b.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {

                        startDownload();//begin downloading
                    d.dismiss();

            }
        });
    }
});
d.show(); 
```

这是开始下载部分。

```
private void startDownload() {
        String url ="file download link";
        Toast.makeText(dwn.this, url,Toast.LENGTH_LONG).show();
        new DownloadFileAsync().execute(url);
    } 
```

这是异步任务

```
class DownloadFileAsync extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

    @Override
    protected String doInBackground(String... aurl) {
        int count;

    try {

    URL url = new URL(aurl[0]);
    URLConnection conexion = url.openConnection();
    conexion.connect();

    int lenghtOfFile = conexion.getContentLength();
    Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

    InputStream input = new BufferedInputStream(url.openStream());
    OutputStream output = new FileOutputStream("/sdcard/file.type");

    byte data[] = new byte[1024];

    long total = 0;

        while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress(""+(int)((total*100)/lenghtOfFile));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();

             }
             catch (Exception e) {
                // TODO Auto-generated catch block

            }

    return null;

    }
    protected void onProgressUpdate(String... progress) {
         Log.d("ANDRO_ASYNC",progress[0]);
         mProgressDialog.setProgress(Integer.parseInt(progress[0]));
    }

    @Override
    protected void onPostExecute(String unused) {
        dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
    }
} 
```

这是进度对话框的代码

```
 @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DIALOG_DOWNLOAD_PROGRESS:
            mProgressDialog = new ProgressDialog(this);
            mProgressDialog.setMessage("Downloading PDF file");
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setCancelable(false);
            mProgressDialog.show();
            return mProgressDialog;
        default:
            return null;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:58:30.797

`ProgressDialog`在`AsyncTask`示例中使用`AlertDialog`正按钮实现：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
        // set title
        alertDialogBuilder.setTitle("Your Title");
        // set dialog message
        alertDialogBuilder
        .setMessage("Click yes to go to AsyncTask!")
        .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                new MyAsyncTaskClass().execute();
            }
        })
        .setNegativeButton("No",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                // if this button is clicked, just close
                // the dialog box and do nothing
                dialog.cancel();
            }
        });
        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();
        // show it
        alertDialog.show();

    }

    // Here is the start of the AsyncTask    
    class MyAsyncTaskClass extends AsyncTask<String, String, Void> {

        private ProgressDialog progressDialog = new ProgressDialog(MainActivity.this);

        protected void onPreExecute() {
            progressDialog.setMessage("Dialog Message");
            progressDialog.show();
            progressDialog.setCanceledOnTouchOutside(false);
        }

        @Override
        protected Void doInBackground(String... params) {
            // TODO stuff
        }

        protected void onPostExecute(Void v) {
            this.progressDialog.dismiss();
        }
    }
} 
```

# iphone - appendPath 生成空心对象 Core Graphics

> ID：13993948
> 
> 赞同：0
> 
> 时间：2012-12-21T16:42:58.267
> 
> 标签：iphone, objective-c, core-graphics

所以我试图创建一个圆的一部分，即一个饼片，然后用一个圆去除大部分楔形，留下一个外圆弧。

这就是我目前所拥有的![图片](../Images/d5aa39d48890257eb508894ad97c573b.png) 正如你所看到的，它在某个地方搞砸了！

我使用以下代码实现了这一点： -

```
UIBezierPath* theStroke = [UIBezierPath bezierPathWithRoundedRect:mainCutout cornerRadius:theRadius];
[theOrangeColor setFill];
theStroke.usesEvenOddFillRule = YES;
[theStroke fill];
[theStroke stroke];
[theStroke setMiterLimit:2.0];

UIBezierPath *aSegment = [UIBezierPath bezierPath];
aSegment.usesEvenOddFillRule = YES;

[aSegment moveToPoint:theCenter];
[aSegment addLineToPoint:theCenter];
[aSegment addArcWithCenter:theCenter radius:theRadius startAngle:startAngle endAngle:endAngle clockwise:YES];
[aSegment addLineToPoint:theCenter];
[aSegment appendPath:theStroke];

[theRedColor setFill];
[aSegment fill];
[aSegment stroke];
[aSegment closePath]; 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:14:14.757

我看不出如何使用奇偶填充规则来删除扇区的那部分。

但是您可以通过绘制两个不同半径的弧段来轻松绘制该段的“外部切片”。例子：

```
CGPoint theCenter = CGPointMake(100., 100.);
CGFloat innerRadius = 50.;
CGFloat outerRadius = 60.;
CGFloat startAngle = M_PI;
CGFloat endAngle = 3*M_PI/2;

UIBezierPath *aSegment = [UIBezierPath bezierPath];
[aSegment addArcWithCenter:theCenter radius:innerRadius startAngle:startAngle endAngle:endAngle clockwise:YES];
[aSegment addArcWithCenter:theCenter radius:outerRadius startAngle:endAngle endAngle:startAngle clockwise:NO];
[aSegment closePath];
[[UIColor redColor] setFill];
[aSegment fill]; 
```

结果：

![在此处输入图像描述](../Images/bf606d043e1a17a7186fb9e9ed6f5add.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T08:07:47.657

在*@Martin R*的代码中稍作修改，如果您可以指定要在其上绘制弧段**的 CALayer 的 lineWidth，则**单个“addArcWithCenter:radius:startAngle:endAngle:顺时针：”将为您完成这项工作.

> 您必须使用笔触而不是填充。（即）只需使用strokeColor

**例如：**

```
static inline double radians (double degrees)
{
    return degrees * M_PI/180;
}

CAShapeLayer * shapeLayer = [CAShapeLayer layer];
shapeLayer.lineWidth = 10;
shapeLayer.fillColor = [UIColor clearColor].CGColor;
shapeLayer.strokeColor = [UIColor redColor].CGColor;
CGFloat radius = 50.0;
shapeLayer.path = [[UIBezierPath bezierPathWithArcCenter:centerPoint radius:radius startAngle:radians(startingAngle) endAngle:radians(endingAngle) clockwise:1 ]CGPath ];
[self.layer addSublayer:shapeLayer]; 
```

这可能对某人有用...

# python - 如何使用 perl 或 python 解析 xlsb

> ID：13993949
> 
> 赞同：2
> 
> 时间：2012-12-21T16:43:04.243
> 
> 标签：python, perl

我需要从一系列 .xlsb 文件中解析一些信息。我使用 perl 解析“.xls”或“.xlsx”文件，但没有找到“.xlsb”的任何解决方案。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:56:24.720

.xslb 文件是二进制 excel 文件，我相信以二进制格式存储，因此可以更快地打开它们（？）。[对于常规 Excel 文件，我在Spreadsheet::Read](http://search.cpan.org/~hmbrand/Spreadsheet-Read-0.47/Read.pm)模块上取得了很好的成功，但我不相信你会找到一种方法来读取二进制文件并理解它。

# struts2 - Struts2 + GlassFish + Apache 文件上传

> ID：13993950
> 
> 赞同：0
> 
> 时间：2012-12-21T16:43:05.613
> 
> 标签：struts2, glassfish, web.xml, sitemesh, apache-commons-fileupload

我正在使用 Struts 2 在 glassfish 中运行 webapp。我的 web.xml 文件具有以下过滤器：

`StrutsPrepareFilter`, `SiteMeshFilter`, `StrutsExecuteFilter`

它工作正常。

问题是我有一个文件上传。出于某种原因，它适用于 Tomcat，但在 GlassFish 上，该文件在操作中为空。

如果我将过滤器更改为：

`ActionContextCleanUp`, `SiteMeshFilter`, `FilterDispatcher`

有用。事实是，`ActionContextCleanUp`并且`FilterDispatcher`已被弃用。

所以我有两个问题：有谁知道 glassfish 文件上传有什么问题？

我正在尝试调试过滤器以查看文件丢失的位置，但我不知道过滤器中的参数在哪里。过滤器收到一个没有参数的 httpservletrequest，即使在 tomcat 上也是如此。

过滤器上提交的参数在哪里？

我创建了一个发生同样问题的测试项目。该文件被上传到临时文件夹然后丢失。

这是 web.xml：

```
 <welcome-file-list>
        <welcome-file>upload.jsp</welcome-file>
    </welcome-file-list>

    <filter>
        <filter-name>exec</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>exec</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

如果我分别使用准备和执行过滤器，也会发生同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T13:12:50.717

好吧，那是当时的一种方式，但是我遇到了同样的问题，这次许可没有解决。所以在寻找这个的时候，我终于找到了真正的解决方案。

问题出在 Glassfish v3 中，必须替换 web-core.jar。正确的 jar 和更多信息可以在[这里](https://java.net/jira/browse/GLASSFISH-18444)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:38:24.917

问题解决了。linux 上的 glassfish 权限存在问题。我曾使用 eclipse 插件安装 glassfish。通过以 root 身份手动安装 glassfish，然后在 eclipse 中添加服务器解决了这个问题。

# c++ - 字符串流 >> 运算符

> ID：13993951
> 
> 赞同：6
> 
> 时间：2012-12-21T16:43:07.390
> 
> 标签：c++, stringstream

我有这个代码：

```
 std::string s = "\n\n\n\n+\n\n\n+";
    std::stringstream serializedDataStream(s);

    std::string plusCharacter, plusCharacter2;
    serializedDataStream >> plusCharacter ;
    cout << "plusCharacter "<<plusCharacter << "\n";
    serializedDataStream >> plusCharacter2 ;
    cout << "plusCharacter "<<plusCharacter2;

    //OUTPUT:
    //    plusCharacter +
    //    plusCharacter + 
```

这意味着`stringsteam` `>>`操作员跳过了新行。我查看了`std::stringstream`文档，但找不到发生这种情况的解释。这是编译器特定的行为，还是我可以依赖它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T16:49:03.737

发生这种情况是因为`operator>>`其行为类似于*格式化的输入函数*。格式化输入函数的部分过程是：

> 每个格式化的输入函数通过构造一个带有`noskipws`（第二个）参数 false 的类哨兵对象开始执行。

当`noskipws`设置为 false（并且`skipws`流上的标志为 true，这是默认值）时，`sentry`对象“只要下一个可用的输入字符`c`是空白字符，就会提取并丢弃每个字符”。

如果您想一次阅读每一行，请使用`std::getline`. 此函数表现为一个*未格式化的输入函数*，它已`noskipws`设置为 true 并读取一行文本（由行终止符定义（std::getline() 的参数 3（默认为 '\n'））。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:48:00.177

[在这里阅读。](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt2)

> 表现为 FormattedInputFunction。**在构造和检查可能跳过前导空格**的哨兵对象之后，提取连续字符并将它们存储在字符数组的连续位置，该字符数组的第一个元素由 s 指向。

所以按照标准，它会沿着流中的任何东西蹒跚而行，直到它真正找到一些有趣的东西，读回给你，然后停下来。然后下次再做同样的事情。

[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)另一方面，将读取直到下一个换行符的*所有内容*`std::string`（这将从流中提取但不会返回给您）并将其全部返回给您。然后由你来获得你想要的东西（例如一个数字）`string`。

**编辑：**我正在努力找出默认语言环境中*哪些*字符被认为是空格。我*认为*[`isspace`](http://en.cppreference.com/w/cpp/string/byte/isspace)它与为（继承自 c）定义的相同，`space (0x20), form feed (0x0c), line feed (0x0a), carriage return (0x0d), horizontal tab (0x09) and vertical tab (0x0b).`但我无法 100% 说服自己在这种情况下是相同的。我不擅长语言环境。

# javascript - 将元素放置在文档元素可见部分的底部

> ID：13993953
> 
> 赞同：0
> 
> 时间：2012-12-21T16:43:23.277
> 
> 标签：javascript, jquery, html, jquery-ui

我想在 Html 文档可见部分的底部放置一个弹出窗口，即使我向下滚动？

html 文档不适合窗口，所以我必须向下滚动才能查看全部内容。每次滚动时，可见部分都会有所不同。那么如何获取当前可见部分底部的坐标呢？

任何帮助将不胜感激。

问候，

贺拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:46:27.460

你试过`position: fixed`你的CSS吗？它应该根据需要相对于视口定位元素。像这样的东西：

```
#myelement {
    position: fixed;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:47:14.720

您可以使用 CSS 样式`position: fixed;`相对于视口（窗口区域）定位元素。

例子：

```
<div style="position:fixed;left:100px;bottom:0;width:100px;height:50p;">
  Bottom
</div> 
```

注意：一些非常旧的浏览器（例如 Internet Explorer 6）不支持`position: fixed`. 如果您需要支持这些，则需要使用 Javascript 来获取窗口的大小，并使用`position: absolute`来放置元素，并捕获`scroll`事件，以便您可以移动元素以使其保持可见。

# python - Cython 对进口有什么作用？

> ID：13993959
> 
> 赞同：9
> 
> 时间：2012-12-21T16:43:55.523
> 
> 标签：python, c, cython, python-module, python-extensions

*我想创建一个 Python 扩展，我真的很喜欢使用 Cython 的想法。主要是为了获得更多关于它的知识并利用速度增益（如果有的话）。我已经阅读了很多 Cython 文档，但我还不是计算机科学家，并且没有深入的知识来理解低级基础知识，因此我提出以下问题的原因：*

我只是想知道，**如果我在我正在开发的 Python 扩展中使用外部导入的（例如，ORM 或 SQL 库或任何其他 3rd 方库）会发生什么？**

**Cython 如何处理它？**

**如果这个导入的库/扩展是纯 Python 还是编译过的，有区别吗？**

处理这个问题的正确方法是什么？

谢谢你。

PS。问题以粗体输入。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T16:53:47.100

cython 的目标是与 python 兼容，即你可以对任何 python 代码进行 cythonize 并且它将像以前一样工作。目前，大部分 python 代码已经可以工作了。Cython 还允许您优化部分代码并将其编译为更高效的 C 代码。

话虽如此，默认情况下任何 python 导入都将保持不变。对它们的任何调用都将作为 python 命令发出。即使模块是用 C 编写的，cython 也会通过 python 绕道来调用模块的函数。如果要直接使用 C 库，则必须为它们提供 cython 绑定。cython[文档解释了如何执行此操作](http://docs.cython.org/src/tutorial/clibraries.html)。

通常，python 充当监督者并处理模块/类的范围。如果一个模块中的代码调用任何 python 函数（或访问 python 变量），python 将根据调用者的范围解析调用。如果被调用的函数恰好在第二个模块中，python 很乐意使用它。调用者只会得到结果，而不应该真正关心其他函数是否在不同的模块中。因此，关键是决定调用哪个函数的 python 范围规则。

# gcc - 让 GCC 链接器警告多个函数定义

> ID：13993966
> 
> 赞同：4
> 
> 时间：2012-12-21T16:44:26.513
> 
> 标签：gcc, warnings, symbols, one-definition-rule

考虑我的小示例 C 库：

```
#include <external_library.h>

void some_function(void)
{
    external_library_call();
    // Do other stuff...
} 
```

它计划让 some_function() 可以公开调用。但是，该库不起作用，因为它所需的外部库也恰好使用了一个名为 some_function() 的函数，该函数恰好具有相同的原型。不过，GCC 的链接器并不关心 some_function 符号的来源有多少。它看似随机选择一个，外部库可能会也可能不会使用我的 some_function() 而不是它自己的。疯了吧。不是图书馆不工作的事实。这个库绝对不应该工作。更重要的是符号“some_function”有两个来源，但链接器对此没有做任何事情。而且你知道，这并没有让我太困扰，因为我习惯了 GCC 和 C 通常默认情况下是病态的鲁莽。一定有办法 但是，当同一个符号有两个来源时，让链接器警告我。我已经尝试过 -Wall -Wextra -Wshadow，但这不会产生任何警告。

请注意，-fvisibility=hidden 在这里没有帮助，因为两个库都想导出 some_function()。我知道您可以对我在没有唯一前缀的情况下进行函数调用感到羞耻。你是对的。这是一个错误。我不在乎。这个错误可以被链接器捕获，因此应该被捕获。链接器没有理由不捕捉这个错误。此外，您使用的库可能会导出一些奇怪的意外符号，并且您不一定可以控制其他人的库导出的内容。只有在程序员停下来并着火之前，那个和前缀才能变得如此独特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:54:32.867

添加：

```
-fvisibility=隐藏
```

到您的构建标志。但是，请注意一些警告；一些标题可能没有预料到这一点。在这些情况下，您需要在包含它们之前使用编译指示：

```
#pragma GCC visibility push(hidden)
#include <problematic_header>
#pragma GCC visibility pop 
```

除了避免符号冲突之外，还有其他一些好处。看：

[http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)

如果你有兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:26:01.510

诸如`-Wall -Wextra -Wshadow`影响源代码分析的编译器标志等选项；显然，您正在使用链接器选项。

但是，由于`shutdown()`它位于为应用程序保留的命名空间中（并且您甚至没有表明您已经包含了声明 system 的标头`shutdown()`），因此编译器或链接器无能为力。作为应用程序程序员，您有权创建一个名为`shutdown()`并调用它的函数。您可以查看诸如 LSB（Linux 标准库）合规性套件之类的东西，以检查您是否没有定义由实现定义的功能。

我不得不追查的最难的错误之一涉及我们代码中的一个函数，该函数恰好与具有不同接口`_bind()`的系统函数同名。`_bind()`当我们的函数被系统库的一部分调用时，一切都乱套了。这部分是我们使用为系统保留的名称（不要以 开头的变量或函数名称`_`）的错误，不幸的是只有一个平台发生名称冲突。我们的系统前缀`_bind()`解决了这个问题。

您可以查看 C 和 POSIX 标准中的保留名称列表。但是，您会发现`_t`后缀是保留的，但带有后缀的类型名称也广泛（ab）用于用户定义的类型。您还必须知道该类型的任何给定定义是“来自系统标头”（可能是 OK），还是来自用户定义的标头（可能不是 OK），或者是“提供缺失系统功能的用户定义标头” （边缘）。它变得非常棘手。

# linux - 如何提高 Linux 集群上计算节点的并行处理速度？

> ID：13993973
> 
> 赞同：0
> 
> 时间：2012-12-21T16:44:41.527
> 
> 标签：linux, shell, parallel-processing, cluster-computing, numerical-methods

下面是与我要问的问题相关的代码。我正在使用具有 13 个计算节点和 1 个顶级节点（又名主节点）的集群。顶部节点是连接所有用户的节点，因此它被分配了更多内存，因此它可以运行得更快。但是，我想提高其他节点的速度，因为它们与顶级节点相比运行速度非常慢，并且我想在不进行任何服务器和/或硬件调整的情况下提高它们的速度。考虑到这些限制，我想知道是否有一种方法可以根据我在计算节点上启动模拟的方式来完成更快的计算。目前，要在某些初始条件下启动部分模拟（如下所示），我只需 ssh 到计算节点，然后启动我的模拟。有没有更好的方法可以提高计算速度（我认为可能有比 ssh 更快的方法？）。任何帮助将不胜感激....我知道有一种叫做 MPI 的东西，但是对于我正在从事的项目，如果我可以提高 ssh 节点的计算速度，我不认为实现 MPI 是必要的... 谢谢。

**./NodeHopper.sh**

```
#!/bin/sh
#NodeHopper uses shell script to run psuedo-parallel computing over a cluster

#The top node is not named sequentially, so its not in the proceeding loop.
#Instead, it is given the node value 13 for computations later

export PROG=13
nohup ./ParaCage.sh & #Runs ParaCage.sh on the main node for the cluster

#Does other nodes sequentially #0 through 12
for i in {0..12}
do
  export PROG=$i 
  #PROG is passed into ./ParaCage.sh and tells ./ParaKeet.sh which initial conditions  
  #to use for the simulation.
  ssh compute-0-$i PROG=$PROG ./ParaCage.sh &
  sleep 1
done 
```

**./ParaCage.sh**

```
#!/bin/sh
echo "Tunneling to Node:"
echo $PROG
echo "Complete"

cd multichmoII/multichmo$PROG/chmo/
./ParaKeet.sh 
```

**ParaKeet.sh**

ParaKeet.sh 是一个程序，用于运行具有不同初始条件的模拟，这些初始条件基于正在使用的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:11:49.473

也许你应该从 bash 转移到 python 并在那里使用多线程？然后您可以并行 ssh 到节点，这可以提高速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:14:30.710

根据您正在运行的模拟的性质，最好将模拟本身分开 - 并并行处理。如果每个节点都不够强大，无法自己有效地运行程序，就会出现这种情况。另一方面，如果模拟很容易分解为并行线程（每个线程使用更少的内存/处理器能力），那么每个节点可能非常适合处理您分配的每个组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T05:57:18.793

> 我想知道是否有一种方法可以根据我在计算节点上启动模拟的方式来完成更快的计算。

好吧，您的 SSH 启动脚本中有一个`sleep`。您可以尝试删除它。

SSH 确实有一些开销（为每个“消息”生成一个新进程；只进行加密连接，即使您可能不需要它）。因此，您可以用适当的分布式任务队列替换 SSH。有很多替代品，包括[Celery](http://www.celeryproject.org/)和[Resque](https://github.com/resque/resque)。事实上，您可以使用 Redis 或 0MQ 轻松编写自己的代码。

但除非您的工作是短暂的，否则不要费心更换 SSH。（即从 1 分钟的工作中减少 100 毫秒的时间并没有那么有用。）

> 我想提高其他节点的速度

没有灵丹妙药：最好的办法是戴上侦探帽，试着找出瓶颈在哪里：

1）查看其他节点上的“顶部”。所有的CPU都用完了吗？（如果没有，您可能希望每个 CPU 生成一个任务，而不是每个盒子一个任务，或者重写您的任务以使用多个线程。）

2) 每个节点是否从中央（和超载的）NFS 服务器中提取文件？（如果是这样，在本地复制/缓存文件可能会更快，或者有多个服务器从其中提取数据，或者使用 bittorrent 等。）

3) 即使你的 CPU 已经用尽了，是不是因为你是用脚本语言写的？首先，优化你的算法，然后尝试用像[golang](http://golang.org/)这样更快的语言重写。（并免费获得多线程。）

请记住，过早的优化是万恶之源。您应该始终测量，然后尝试估计每个零件的制造速度。先摘下低垂的果实，把最小的收获留到最后。（你可能永远无法获得小额收益，因为会出现更重要的事情。）

# php - 无法使用 SoapClient 从 WSDL 获取数据

> ID：13993974
> 
> 赞同：1
> 
> 时间：2012-12-21T16:44:41.647
> 
> 标签：php, web-services, soap, wsdl

我正在尝试从 GLS 的 Track and Trace 网络服务中获取一些数据。我希望获得带有参考号的特定订单的数据。此示例中的确切订单号存在，我可以从他们的网站访问它。但我不能使用这个网络服务。

.wsdl 可在此处访问：

> [http://www.gls-group.eu/276-I-PORTAL-WEBSERVICE/services/Tracking/wsdl/Tracking.wsdl](http://www.gls-group.eu/276-I-PORTAL-WEBSERVICE/services/Tracking/wsdl/Tracking.wsdl)

这就是我现在正在做的事情：

```
$reference = array(
    'Credentials' => array('UserName' => 'hidden', 'Password' => 'secret'),
    'RefValue' => '291054'
);
$client = new SoapClient('http://www.gls-group.eu/276-I-PORTAL-WEBSERVICE/services/Tracking/wsdl/Tracking.wsdl', array('login' => 'hidden', 'password' => 'secret'));
$result = $client->GetTuDetail($reference);

return $result; 
```

我一直在尝试各种方法来获取数据，但请求大约需要 50 秒，然后返回：

```
stdClass Object
(
    [ExitCode] => stdClass Object
        (
            [ErrorCode] => 998
            [ErrorDscr] => No data found
        )

    [TuNo] => 
    [NationalRef] => 
    [ConsigneeAddress] => 
    [ShipperAddress] => 
    [RequesterAddress] => 
    [DeliveryDateTime] => 
    [PickupDateTime] => 
    [Product] => 
    [TuWeight] => 0
) 
```

我已经拔掉了头上的每一根头发，我在这里错过了什么？提前致谢，一百万次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:34:45.407

```
$reference = array(
    'Credentials' => array('UserName' => 'hidden', 'Password' => 'secret'),
    'RefValue' => '18235206982'
);
$client = new SoapClient("http://www.gls-group.eu/276-I-PORTAL-WEBSERVICE/services/Tracking/wsdl/Tracking.wsdl");
$result = $client->GetTuDetail($reference);

print_r($result); 
```

“RefValue”是一个有效的包裹号码，因此您应该得到正确的回复。

# jaxb - 不可为空但需要和空值

> ID：13993975
> 
> 赞同：3
> 
> 时间：2012-12-21T16:44:45.557
> 
> 标签：jaxb

我刚刚和我的同事发现了一个奇怪的 JAXB 案例。

我声明了一个`@XmlElement(required = true)`默认`nillable = false`字段。

但是我偶然地试图编组一个值为 null 的实例。

我看到该元素只是被省略了。正常吗？这只是程序员的错吗？

```
import java.io.*;
import javax.xml.bind.*;
import javax.xml.bind.annotation.*;
import javax.xml.transform.*;
import javax.xml.transform.stream.*;

@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement
public class Doughan {

    public static void main(final String[] args) throws JAXBException, IOException {

        final JAXBContext context =
            JAXBContext.newInstance(Doughan.class);

        final Marshaller marshaller = context.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

        System.out.println("\n------------------------------------- not valid, is it?");
        marshaller.marshal(new Doughan(), System.out);

        System.out.println("\n------------------------------------------------- valid");
        marshaller.marshal(new Doughan("Blaise"), System.out);

        System.out.println("\n------------------------------------------------ schema");
        context.generateSchema(new SchemaOutputResolver(){
                @Override public Result createOutput(final String namespaceUri,
                                                     final String suggestedFileName)
                    throws IOException {
                    return new StreamResult(System.out) {
                        @Override public String getSystemId() {
                            return "Do I really have to do this?";
                        }
                    };
                }
            });
    }

    public Doughan() {
        this(null);
    }

    public Doughan(final String name) {
        super();
        this.name = name;
    }

    @XmlElement(required = true) // default; nillable = false
    private String name;

    @XmlElement(nillable = true, required = true)
    private String nill = null;
} 
```

我得到的东西来了。

```
------------------------------------- not valid, is it?
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<doughan>
    <nill xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</doughan>

-------------------------------------- valid, isn't it?
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<doughan>
    <name>Blaise</name>
    <nill xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</doughan>

------------------------------------------------ schema
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="doughan" type="doughan"/>
  <xs:complexType name="doughan">
    <xs:sequence>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="nill" type="xs:string" nillable="true"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

xmllint

```
$ head -n100 doughan.xsd doughan1.xml doughan2.xml
==> doughan.xsd <==
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="doughan" type="doughan"/>
  <xs:complexType name="doughan">
    <xs:sequence>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="nill" type="xs:string" nillable="true"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>
==> doughan1.xml <==
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<doughan>
    <nill xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</doughan>
==> doughan2.xml <==
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<doughan>
    <name>Blaise</name>
    <nill xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</doughan>

$ xmllint --schema doughan.xsd doughan1.xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<doughan>
    <nill xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</doughan>
Element 'nill': This element is not expected. Expected is ( name ).
doughan1.xml fails to validate

$ xmllint --schema doughan.xsd doughan2.xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<doughan>
    <name>Blaise</name>
    <nill xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</doughan>
doughan2.xml validates

$ 
```

带着敬意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:50:08.933

是的，如果一个元素没有被注释，`@XmlElement(nillable=true)`那么空值将从 XML 文档中被忽略。

**更多信息**

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

**注意：** 我猜你是在针对我提出这个问题:)。

# c# - 带有 webview savedInstanceState 的 Android 片段选项卡在方向更改时始终为空

> ID：13993976
> 
> 赞同：0
> 
> 时间：2012-12-21T16:44:53.097
> 
> 标签：c#, android-fragments, xamarin.android, actionbarsherlock

经过很多天的搜索和尝试不同的选择，我仍然没有找到答案。

使用 ActionBarSherlock 我有一个基本的 SherlockFragmentActivity 实现 ActionBar.ITabListener

片段包含一个简单的 web 视图。在配置更改期间（屏幕方向更改 saveInstanceState 的 onCreateView 参数始终为空，因此我永远无法恢复状态。

我已经尽可能简单地做到这一点，希望能得到更多帮助。所以名字很傻。

TabFragWebActivity

```
public class TabFragWebActivity : SherlockFragmentActivity, Com.Actionbarsherlock.App.ActionBar.ITabListener
{

    protected override void OnCreate (Bundle savedInstanceState)
    {
        base.OnCreate (savedInstanceState);
        SetContentView (Resource.Layout.fragment_tabs);
        LoadTabs();
    }

    public void LoadTabs ()
    {
        this.RunOnUiThread (() => {
            SupportActionBar.NavigationMode = Com.Actionbarsherlock.App.ActionBar.NavigationModeTabs;

            var tab = SupportActionBar.NewTab ();
            tab.SetContentDescription ("desc 1");
            tab.SetText ("tab 1");
            tab.SetTag ("tab1id");
            tab.SetTabListener (this);

            SupportActionBar.AddTab (tab);  

            tab = SupportActionBar.NewTab ();
            tab.SetContentDescription ("desc 2");
            tab.SetText ("tab 2");
            tab.SetTag ("tab2id");
            tab.SetTabListener (this);

            SupportActionBar.AddTab (tab);  

        });
    }

    #region ITabListener implementation

    public void OnTabReselected (Com.Actionbarsherlock.App.ActionBar.Tab tab, Android.Support.V4.App.FragmentTransaction transAction)
    {
        //throw new NotImplementedException ();
    }

    public void OnTabSelected (Com.Actionbarsherlock.App.ActionBar.Tab tab, Android.Support.V4.App.FragmentTransaction transAction)
    {
        string tag = tab.Tag.ToString();

        var fragment = SupportFragmentManager.FindFragmentByTag (tag);
        if (fragment != null) {
            transAction.Show(fragment);
            return;
        }

        fragment = new WebFragment("http://www.google.com");
        transAction.Add(Resource.Id.realtabcontent, fragment, tag);
    }

    public void OnTabUnselected (Com.Actionbarsherlock.App.ActionBar.Tab tab, Android.Support.V4.App.FragmentTransaction transAction)
    {
        string tag = tab.Tag.ToString();

        HideFragment(transAction, tag);
    }

    public void HideFragment (Android.Support.V4.App.FragmentTransaction transAction, string tag)
    {
        Android.Support.V4.App.Fragment fragment;
        fragment = SupportFragmentManager.FindFragmentByTag (tag);
        if (fragment != null) {
            transAction.Hide (fragment);
        }
    }

    #endregion

} 
```

网页片段

```
 public class WebFragment : SherlockFragment
{
    string _webURL;
    WebView _webview;
    Activity _activity;

    public WebFragment (string webURL)
    {
        _webURL = webURL;
    }

    public override void OnAttach (Android.App.Activity activity)
    {
        _activity = activity;
        base.OnAttach (activity);
    }

    public override void OnActivityCreated (Bundle savedInstanceState)
    {
        base.OnActivityCreated (savedInstanceState);
        RetainInstance = true;
        if (_webview == null)
            initUI();
    }

    public void initUI ()
    {
        _webview = (WebView)_activity.FindViewById (Resource.Id.webView);   
        if (_webview != null) {
            _webview.SetWebChromeClient (new ROSWebChromeClient ());
            _webview.SetWebViewClient (new ROSWebViewClient ());
            _webview.Settings.JavaScriptEnabled = true;
            _webview.LoadUrl (_webURL);
        }
    }

    public override Android.Views.View OnCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        var mainView = (View)inflater.Inflate (Resource.Layout.fragment_web, container, false);

        //the savedInstanceState is always null
        if (_webview != null) {
            _webview.RestoreState (savedInstanceState);
        }

        return mainView;
    }
} 
```

我希望我做错了一些简单的事情。但我只是不知道它是什么。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T17:48:35.917

我已经应用了上面概述的 Jake 更改并编译了一个新的支持库以供使用，直到 Google 发布他的修复程序。

[http://ara.sh/android/android-support-v4.jar](http://ara.sh/android/android-support-v4.jar)

从您的项目以及您的操作栏 sherlock 库项目中替换此 jar

# xml - 文件 .asm 不存在 - atl 转换

> ID：13993977
> 
> 赞同：2
> 
> 时间：2012-12-21T16:45:01.503
> 
> 标签：xml, transformation, xmi

我正在尝试进行 atl 文档中给出的示例转换。但是一旦我运行转换，我就会面临问题：`File family2person.asm does not exist`我不知道这意味着什么。我用谷歌搜索，发现 .asm 与汇编语言有关。任何人都可以帮助我，因为atl不是那种广泛使用的语言，论坛现在无法帮助我。首先我开始了教程，然后我在途中重命名了 .ecore 文件，这可能是原因吗？试图找到手头上有另一个的原始 asm 文件？

多谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T07:40:43.317

我有同样的问题; 为了解决这个问题，我刚刚创建了一个新的 ATL 项目，复制了我之前创建的 ecore 元模型，然后在创建“family2person.atl”文件后，.asm 自行出现。从文档来看，该文件似乎只是您创建的 ATL 文件的编译版本，并且仅在您提供的 atl 正确时生成（尽管您还应该确保您的 .ecore 文件通过验证过程。 ...我的没有，我不得不调整一些参考的基数，特别是 Eopposite 的）...查看这个链接，找到一些更详细的技术信息[http://wiki.eclipse.org/ATL/ User_Guide__-_The_ATL_Tools#Compiling_an_ATL_file](http://wiki.eclipse.org/ATL/User_Guide_-_The_ATL_Tools#Compiling_an_ATL_file)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-17T21:19:48.220

您可以在现有项目中执行此操作。创建一个新的 ATL 项目，打开`.project`文件并将其中的内容复制到主项目的`.project`文件中。（您可能需要在 Eclipse 中关闭并重新打开项目）

就我而言，相关内容在以下`<natures>`部分：

```
<nature>org.eclipse.m2m.atl.adt.builder.atlNature</nature> 
```

并在该`<buildSpec>`部分：

```
<buildCommand>
    <name>org.eclipse.m2m.atl.adt.builder.atlBuilder</name>
    <arguments>
    </arguments>
</buildCommand> 
```

# jquery-validate - 如何使用 Script# 验证库将 errorPlacement 作为 Script# 中的回调函数附加到？

> ID：13993978
> 
> 赞同：0
> 
> 时间：2012-12-21T16:45:02.427
> 
> 标签：jquery-validate, script#

类中没有这样`errorPlacement`的属性，`jQueryApi.Validation.jQueryValidatorOptions`并且类是密封的，所以我不能扩展。有什么建议么？

[可以在http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)上找到验证选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:21:17.897

更新源...请参阅[https://github.com/nikhilk/scriptsharp/tree/cc/src/Libraries/jQuery/jQuery.Validation](https://github.com/nikhilk/scriptsharp/tree/cc/src/Libraries/jQuery/jQuery.Validation)。API 声明总是可以使用贡献来帮助修复/完成。

或者临时使用 Script.SetField 来做后期绑定的方式。

# php - 打印包含单维引号的变量，作为输入元素值

> ID：13993983
> 
> 赞同：2
> 
> 时间：2012-12-21T16:45:32.013
> 
> 标签：php, html

我有`$variable`其中包含单维引号，像这样`a's"d`

我想将此变量写为复选框元素的值

```
<input type="checkbox" name="names[]" value="<?php echo $variable; ?>" /> 
```

但是当我在发送 html 表单后看到结果时，复选框的值不正确（原因是引号），正确的方法是什么，将这样的变量写为输入值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:46:32.647

您可以转义维度引号：

```
<input type="checkbox" name="names[]" value="<?php echo str_replace('"','\\"',$variable); ?>" /> 
```

或者你可以使用`htmlspecialchars()` [http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:46:47.420

`htmlentities`与_`ENT_QUOTES`

```
<?php echo(htmlentities($variable, ENT_QUOTES | ENT_HTML401)); ?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T16:48:09.510

您想将您的字符编码为 html 元素，这样它们就不会破坏字符串。尝试这样的事情

```
$variable = htmlentities($variable);
<input type="checkbox" name="names[]" value="<?php echo $variable; ?>" /> 
```

如果您需要更多信息，规范写在这里[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

# google-chrome - 谷歌浏览器默认打开位置和大小

> ID：13993984
> 
> 赞同：20
> 
> 时间：2012-12-21T16:45:35.480
> 
> 标签：google-chrome, position, size, default

我是一个非常强迫症和懒惰的人，目前，我注意到每天深夜当我做一些工作时，我把我的谷歌浏览器分开在屏幕的右侧，一些文档在左侧。当我早上打开浏览器时，我必须手动调整窗口的长度和宽度。

我目前正在浏览 Internet 以检查是否有解决我的问题的方法，并找到了一个可以完成 75% 工作的 Google 扩展程序。它被称为[windows resizer](https://chrome.google.com/webstore/detail/window-resizer/kkelicaakdanhinjdeammmilcgefonfh)。

但是，您仍然需要按下按钮来调整窗口大小。我想覆盖 Chrome 的默认设置并设置宽度、高度和位置，就像您可以使用 VLC 播放器一样。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-10-27T23:03:22.843

也许有点晚了，但我找到了一种更简单的方法来设置默认值！您必须右键单击选项卡的右侧并选择“大小”，然后单击您的窗口，它应该将其保持为默认大小。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-29T15:42:43.663

首先，关闭 Google Chrome 的所有实例。`chrome.exe`Windows 任务管理器中不应有正在运行的实例。然后

*   去`%LOCALAPPDATA%\Google\Chrome\User Data\Default\`。
*   在记事本等文本编辑器中打开文件“首选项”。
*   首先，将文件重新保存为“Preference - Old”之类的内容，不带任何扩展名（即 no `.txt`）。如果出现问题，这将作为备份。
*   查找名为“浏览器”的部分。在该部分内，您应该找到一个名为`window_placement`. 在`window_placement`您下方，您会看到“底部”、“左侧”、“右侧”等内容，后面有数字。

您将需要使用这些数字来获得所需的窗口大小和位置。完成后，再次使用名称“首选项”保存此文件，不带扩展名。这将覆盖现有的首选项文件。打开 Chrome 看看你是怎么做的。如果您对大小和位置不满意，请关闭 Chrome 并更改 Preferences 文件中的数字，直到获得您想要的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-12-04T13:18:47.280

您应该抓住标题栏的窗口并将其捕捉到屏幕的左侧（关闭浏览器），然后重新打开浏览器并将其捕捉到顶部......问题结束了。

# jsf - 用 jsf 广播网络摄像头

> ID：13993985
> 
> 赞同：1
> 
> 时间：2012-12-21T16:45:39.100
> 
> 标签：jsf, primefaces

我想要的是在网页上向 X 人广播带有音频的网络摄像头。我熟悉 jsf ，我将 primefaces 实用程序和 apache tomcat 7 用于 servlet 容器。我应该从哪里开始？有没有办法将 vlc 播放器网络摄像头录制嵌入我的网页或一些不同的记录器，例如 realplayer 等。或者我应该遵循非常不同的方式？谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:25:12.467

我相信 MyFaces、PrimeFaces 和 IceFaces 都有视频播放器组件，可用于显示保存在服务器上的视频，但在您从一位用户直播视频之前，显然有很多细节需要解决并直接在浏览器中向其他人广播实时提要。

你让我很感兴趣，因为我在使用 JSF 的工作中从来没有做过这么有趣的事情，而且我肯定会关注这个并链接我发现的任何其他东西。

我自己发现/发明答案的第一个建议是首先实现一些聊天功能。使用会话范围的支持 bean 创建一个 jsf 页面，并让它向 JMS 主题发布消息。有另一个 jsf 页面，该页面由订阅同一主题的会话范围 bean 支持。在某些时候，您需要在没有用户发出请求的情况下刷新订阅者页面，或者换句话说，您需要将这些消息推送到浏览器。您使用的组件套装可能会为您处理这种接线，而无需您自己编写 Ajax。

[Primefaces 的 Ted Goddard 在这个youtube 视频](http://www.youtube.com/watch?v=30bk95Ac7QE)的大约 35 分钟后用幻灯片演示了“Cloud Push，或 ICEPush” 。

显然，在某些时候，真正困难的部分是您必须将视频从浏览器流式传输到会话托管 bean，然后将其广播到 JMS 主题。为此，我可能会建议考虑在您的 JSF 页面中使用小程序。这样，您就可以使用 java 清楚地访问远程用户系统。在小程序中，您可以将网络摄像头馈送流式传输到同一个 JMS 队列，或使用其他形式的流式视频返回到您的网络服务器，以便您可以将该流推送给每个“观察”用户。

# c# - 如何通过文化获得完整的短期约会

> ID：13993986
> 
> 赞同：-2
> 
> 时间：2012-12-21T16:45:43.497
> 
> 标签：c#, cultureinfo, culture

这段代码返回给我`'M/d/yyyy'`，但我需要`'mm/dd/yyyy'`怎么做？

```
((CultureInfo)Session["culture"]).DateTimeFormat.ShortDatePattern) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:49:54.067

这并没有多大意义……您想要的模式是针对特定文化的……例如：

```
DateTime.Now.ToString(CultureInfo.GetCultureInfo("en-US").DateTimeFormat.ShortDatePattern); 
```

会回来`mm/dd/yyyy`但是

```
DateTime.Now.ToString(CultureInfo.GetCultureInfo("en-GB").DateTimeFormat.ShortDatePattern); 
```

将返回`dd/mm/yyyy`。

从您添加的代码中，它不是很清楚 - 似乎您正在获得一种特定的文化，但随后想要覆盖`ShortDatePattern`......

如果这是真的，为什么首先使用会话中收到的文化？在不考虑文化的情况下使用您想要的任何模式。例如`DateTime.Now.ToString("MM/dd/yyyy");`

（无论如何，可以覆盖，`ShortDatePattern`可以设置，就像评论中显示的@mipe34）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:48:10.923

您可以通过在`ToString`方法中指定所需的模板来覆盖日期的显示方式：

```
DateTime.Now.ToString("MM/dd/yyyy")) //Will display "12/21/2012" 
```

您似乎正在使用一个`CultureInfo`对象，该对象包含默认格式（和其他文化信息，如货币）并由操作系统提供。

单独调用`DateTime.Now.ToShortDateString()`将使用`ShortDatePattern`当前线程文化中指定的格式，可以使用以下内容进行设置：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:24:36.800

你的意思是你想改变财产？这很简单：

```
((CultureInfo)Session["culture"]).DateTimeFormat.ShortDatePattern = "MM/dd/yyyy"; 
```

但是，如果`CultureInfo`碰巧是只读的，它将抛出运行时。在那种情况下，也许您可​​以分配一个新`CultureInfo`对象？如果可以，请这样做：

```
// get reference
var ci = (CultureInfo)Session["culture"];
// clone and reassign to get rid of read-only:
ci = (CultureInfo)(ci.Clone());
// change property:
ci.DateTimeFormat.ShortDatePattern = "MM/dd/yyyy";
// make read-only again
ci = CultureInfo.ReadOnly(ci);
// assign back to your "source":
Session["culture"] = ci; 
```

之后，当人们调用一些取自 的`someDateTimeValue.ToShortDateString()`新线程时，他们会得到你的新格式。`CurrentCulture``Session["culture"]`

注意：`"m"`or`"mm"`是*分钟*，`"M"`or`"MM"`是*月*。也是文化`"/"`的`DateSeparator`（在某些文化中可能转化为破折号 ( `-`) 或其他内容）。

# java - java.util.Scanner 跳过输入请求

> ID：13993987
> 
> 赞同：2
> 
> 时间：2012-12-21T16:45:48.083
> 
> 标签：java, java.util.scanner

我正在尝试使用以下方式接收输入`java.util.Scanner`：

```
Scanner scanner = new Scanner(System.in);
int bla = scanner.nextInt();
String blubb = scanner.nextLine(); 
```

但是该`nextLine()`命令只是被跳过并返回一个空字符串。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T16:47:43.533

该`nextInt`方法不使用整数之后的换行符，因此当您调用`nextLine`它时，只需读取紧跟在整数之后的换行符。

**例子**

如果你有这个输入：

```
42\n
foo\n 
```

该`readInt`调用使用`42`但不使用换行符：

```
\n
foo\n 
```

现在，当您调用`readLine`它时，它会消耗第一行的其余部分，其中仅包含换行符。

**解决方案**

尝试在整数之后丢弃该行的其余部分：

```
int bla = scanner.nextInt();
scanner.nextLine(); // Discard the rest of the line.
String blubb = scanner.nextLine(); 
```

或者使用`nextLine`一致地读取每一行，然后自己将字符串解析为整数：

```
String blaString = scanner.nextLine();
int bla = Integer.valueOf(blaString);
String blubb = scanner.nextLine(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T16:48:55.613

它没有被跳过：

```
int bla = scanner.nextInt(); 
```

不消耗新行，因此当`Enter`您输入`int`. 然后扫描仪看到它需要消耗当前行（您输入 的那一行`int`）并将剩余部分放入`blubb`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-21T04:37:49.353

当我的扫描仪是静态的时，我也遇到过类似的问题。我制作了一个新的本地扫描仪，它没有跳过输入请求。

# c# - 错误：INSERT 语句与 FOREIGN KEY 约束冲突

> ID：13993991
> 
> 赞同：0
> 
> 时间：2012-12-21T16:46:10.190
> 
> 标签：c#, sql, entity-framework, asp.net-mvc-4

我有这个错误在线

```
db.Comments.Add(comment);
db.SaveChanges(); 
```

我无法修复它... 有什么问题？我已经阅读了很多关于该问题的问题，但在我的代码中找不到问题所在。

我正在使用 asp.net mvc4、c# 和实体框架。

我的评论模型有一个`PostId`属性。

> *INSERT 语句与 FOREIGN KEY 约束“FK_dbo.Comments_dbo.Posts_PostId”冲突。冲突发生在数据库 Myproject、表“dbo.Posts”、列“PostId”中。
> 该语句已终止。*

**编辑 ：**

*我注意到，调用 SaveChanges() 时，我的 comment.PostId 等于 0*

*我注意到，如果我`@Html.HiddenFor(model => model.PostId)`在 CreateComment 视图中有，那么我就没有错误了，但是当我单击添加评论时没有任何反应*

`PostController`：

```
 public ActionResult ListPost()
        {
            var post = db.Posts.ToList();
            return PartialView("ListPost", post);
        }

        public ActionResult Create()
        {
            return View(); 
        }

        [HttpPost]
        public ActionResult Create(FormCollection values)
        {
            var post = new Post();
            TryUpdateModel(post);

            if (ModelState.IsValid)
            {
                var context = new UsersContext();
                var username = User.Identity.Name;
                var user = context.UserProfiles.SingleOrDefault(u => u.UserName == username);
                var userid = user.UserId;                

                post.UserId = userid;
                post.Date = DateTime.Now;

                db.Posts.Add(post);
                db.SaveChanges();
                return RedirectToAction("Create", "Post"); 
            }
            return View(post);
        }

    public ActionResult CreateComment()
    {
        ViewBag.PostId = new SelectList(db.Posts, "PostId", "Content");
        return View("CreateComment");
    }

    [HttpPost]
    public ActionResult CreateComment(FormCollection values)
    {
        var comment = new Comment();
        TryUpdateModel(comment);

        if (ModelState.IsValid)
        {
            var context = new UsersContext();
            var username = User.Identity.Name;
            var user = context.UserProfiles.SingleOrDefault(u => u.UserName == username);
            var userid = user.UserId;

            comment.UserId = userid;
            comment.Date = DateTime.Now;

            db.Comments.Add(comment);
            db.SaveChanges();
            return RedirectToAction("Create", "Post");
        }
        ViewBag.PostId = new SelectList(db.Posts, "PostId", "Content", comment.PostId);
        return View(comment);
    } 
```

创建视图（调用 ListPost 部分视图）：

```
@model Myproject.Models.Post

@using (Html.BeginForm("Create", "Post", FormMethod.Post))
{  
        <legend>Add Post</legend>

        <div class="editor-field">
            @Html.EditorFor(model => model.Content)
            @Html.ValidationMessageFor(model => model.Content)
            <input type="file" name="Photo" id="Photo"/>
        </div>   

        <p>
            <input type="submit" value="Post" />
        </p> 
}

@{Html.RenderAction("ListPost", "Post");} 
```

ListPost 部分视图（调用 CreateComment 视图）：

```
 @model IEnumerable<MyProject.Models.Post>

    @foreach (var item in Model.OrderByDescending(x => x.Date))
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Content)
            </td>
        </tr>
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Date)
            <span>@Html.DisplayFor(modelItem => item.Users.UserName)</span>    
            </td>
        </tr>

    <tr>
       <td> @Html.ActionLink("Add Comment", "CreateComment", new {id=item.PostId})</td>      
    </tr>
 } 
```

**编辑 2**

帖子表：

```
CREATE TABLE [dbo].[Posts] (
    [PostId]  INT             IDENTITY (1, 1) NOT NULL,
    [UserId]  INT             NOT NULL,
    [Content] NVARCHAR (MAX)  NULL,
    [Date]    DATETIME        NOT NULL,
    [Picture] VARBINARY (MAX) NULL,
    CONSTRAINT [PK_dbo.Posts] PRIMARY KEY CLUSTERED ([PostId] ASC),
    CONSTRAINT [FK_dbo.Posts_dbo.UserProfile_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[UserProfile] ([UserId]) ON DELETE CASCADE
);

GO
CREATE NONCLUSTERED INDEX [IX_UserId]
    ON [dbo].[Posts]([UserId] ASC); 
```

评论表

```
CREATE TABLE [dbo].[Comments] (
    [CommentId] INT            IDENTITY (1, 1) NOT NULL,
    [UserId]    INT            NOT NULL,
    [PostId]    INT            NOT NULL,
    [Content]   NVARCHAR (MAX) NULL,
    [Date]      DATETIME       NOT NULL,
    CONSTRAINT [PK_dbo.Comments] PRIMARY KEY CLUSTERED ([CommentId] ASC),
    CONSTRAINT [FK_dbo.Comments_dbo.Posts_PostId] FOREIGN KEY ([PostId]) REFERENCES [dbo].[Posts] ([PostId]) ON DELETE CASCADE
);

GO
CREATE NONCLUSTERED INDEX [IX_PostId]
    ON [dbo].[Comments]([PostId] ASC); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:23:17.087

最后，我通过使用以下内容更改我的 CreateComment (httpPost) ActionResult 来解决此问题：

```
 [HttpPost]
    public ActionResult CreateComment(FormCollection values, int id)
    {
        var comment = new Comment();
        TryUpdateModel(comment);

        /** ADD THIS LINE **/
        Post post = db.Posts.Find(id);

        if (ModelState.IsValid)
        {
            var context = new UsersContext();
            var username = User.Identity.Name;
            var user = context.UserProfiles.SingleOrDefault(u => u.UserName == username);
            var userid = user.UserId;

            comment.UserId = userid;
            comment.Date = DateTime.Now;

            /***  ADD THIS TWO LINES ***/
            comment.Post = post;
            comment.PostId = post.PostId;

            db.Comments.Add(comment);
            db.SaveChanges();
            return RedirectToAction("Create", "Post");
        }            
        ViewBag.PostId = new SelectList(db.Posts, "PostId", "Content", comment.PostId);
        return View(comment);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:00:47.813

您应该在您的评论模型上设置 PostId 属性：

```
 [HttpPost]
    public ActionResult CreateComment(FormCollection values)
    {
        var comment = new Comment();
        TryUpdateModel(comment);

        if (ModelState.IsValid)
        {
            var context = new UsersContext();
            var username = User.Identity.Name;
            var user = context.UserProfiles.SingleOrDefault(u => u.UserName == username);
            var userid = user.UserId;

            comment.UserId = userid;
            comment.Date = DateTime.Now;
            //here
            comment.PostId = values["postId"];

            db.Comments.Add(comment);
            db.SaveChanges();
            return RedirectToAction("Create", "Post");
        }
        ViewBag.PostId = new SelectList(db.Posts, "PostId", "Content", comment.PostId);
        return View(comment);
    } 
```

# c# - Windows Phone 7 pin to start tiles from inside an application

> ID：13993992
> 
> 赞同：5
> 
> 时间：2012-12-21T16:46:09.573
> 
> 标签：c#, xml, windows-phone-7

I made around 100 Hubtiles for my application, and I want them to read an XML file when they are tapped, and the user to be able to 'pin to start' the desired Hubtile on his screen outside the app.

Every Hubtile reads a different XML file and must be able to be pinned to start.

I know the code to pin it to start, and I know the code to make it read the XML, but there are 100 tiles and that would be many lines of coding and copy/paste.

This is my code for a tile to be able to pop from the application and be pinned to start on xaml:

```
<toolkit:HubTile Name="Monday" Title="Monday" Source="Days\Weekdays\Monday.png" Margin="15" Tap="day_Tap">
    <toolkit:ContextMenuService.ContextMenu>
        <toolkit:ContextMenu>
            <toolkit:MenuItem Name="monday" Header="pin to start" Tap="monday_Tap"/>
        </toolkit:ContextMenu>
    </toolkit:ContextMenuService.ContextMenu>
</toolkit:HubTile> 
```

And the code behind the CS file to make and check if it already exists:

```
private void monday_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    CreateLiveTile(Monday, "path-to-xml", "monday_Square_0.png");
}

private void CreateLiveTile(HubTile hubtile, string link, string id)
{
    StandardTileData LiveTile = new StandardTileData
    {
        Title = hubtile.Title,
        BackBackgroundImage = (hubtile.Source as BitmapImage).UriSource
    };
    ShellTile Tile = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains("id=" + id));
    {
        if (Tile == null)
        {
            ShellTile.Create(new Uri("/Show.xaml?id=" + id + "&link=" + link, UriKind.Relative), LiveTile);
        }
        else
        {
            MessageBox.Show("The tile is already pinned");
        }
    }
} 
```

Is there a dynamic way for it to happen with one tap event handler or do I need 100 tap event handlers for all 100 tiles and 100 paths for each XML file and 100 event handlers for the pin to start hubtiles and to write the same things on every hubtile on xaml?

Furthermore, I tried, and think it is working, to make one tap event handler for all the hubtiles but I see the whole path to the name of the hubtile, not only the tile name:

```
private void Week_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    String a = (((Microsoft.Phone.Controls.HubTile)(sender)).Source as BitmapImage).UriSource.OriginalString;
    String b = a.Replace(((Microsoft.Phone.Controls.HubTile)(sender)).Title + "_Square_0.png", "week.xml");
    String weekPath = a.Replace(((Microsoft.Phone.Controls.HubTile)(sender)).Title + "_Square_0.png", "");
    String weekName = ((Microsoft.Phone.Controls.HubTile)(sender)).Title;     
    NavigationService.Navigate(new Uri("/Show.xaml?parameter=" + b, UriKind.Relative));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T17:54:54.073

Every control has a [`Tag`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag.aspx) property. This property is of type `object` and has been put there **for you**. Basically, you can put whatever information you need inside. It's an invaluable help for implementing generic actions, like what you're trying to do.

So you can do something like:

```
<toolkit:HubTile Name="Monday" Title="Monday" Source="Days\Weekdays\Monday.png" Margin="15" Tap="Tile_Tap" Tag="path-to-xml"> 
```

Then in the event handler:

```
private void Tile_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    var pathToXml = (string)((FrameworkElement)sender).Tag;
    // Whatever
} 
```

# java - 在 Java 中是否有相当于 C# 中的 Convert 类？

> ID：13993997
> 
> 赞同：9
> 
> 时间：2012-12-21T16:46:19.440
> 
> 标签：java

在 C# 中，我喜欢使用 Convert 类。它使从一种类型转换为另一种类型变得容易且一致。我正在考虑用 Java 编写一个类似的类，但我不想重新发明轮子。所以我四处搜索，看看是否存在这样的事情并且没有得到好的结果。那么在标准库、google guava 或 apache commons 中是否有人知道这样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:54:23.613

**java中没有这样的类。**

Java 中公认的做法是将原语相互转换。这是从一种类型转换为另一种类型的简单且一致的方法。

```
float bar = 4.0f;
int foo = (int) bar; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-12T12:43:41.670

您可以轻松创建自己的 Convert 类

```
package com.abc;

public class Convert {
  public static int ToInt(Object obj) {
    try{
      return Integer.parseInt(obj.toString());
    }
    catch(Exception ex){
      return 0;
    }
  }
  public static float ToFloat(Object obj) {
    try{
      return Float.parseFloat(obj.toString());
    }
    catch(Exception ex){
      return 0f;
    }
  }

  public static boolean ToBoolean(Object obj){
    try{
      if(obj.getClass() == Boolean.class)
        return (Boolean)obj;

      return Boolean.parseBoolean(obj.toString());
    }
    catch(Exception ex){
      return false;
    }
  }
} 
```

上述类通过以下单元测试：

```
package com.abc;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class ConvertTest {

  @Test
  public void ConvertToInt() {
    assertEquals(1, Convert.ToInt(1));
    assertEquals(0, Convert.ToInt("Suresh"));
    assertEquals(0, Convert.ToInt(null));
    assertEquals(0, Convert.ToInt(true));
    assertEquals(0, Convert.ToInt(3.3f));
  }

  @SuppressWarnings("deprecation")
  @Test
  public void ConvertToFloat() {
    assertEquals(1f, Convert.ToFloat(1), 0.001f);
    assertEquals(0f, Convert.ToFloat("Suresh"), 0.001f);
    assertEquals(0f, Convert.ToFloat(null), 0.001f);
    assertEquals(0f, Convert.ToFloat(true), 0.001f);
    assertEquals(3.3f, Convert.ToFloat(3.3f), 0.001f);
  }

  @Test
  public void ConvertToBoolean() {
    assertEquals(false, Convert.ToBoolean(1));
    assertEquals(false, Convert.ToBoolean("Suresh"));
    assertEquals(false, Convert.ToBoolean(null));
    assertEquals(true, Convert.ToBoolean(true));
    assertEquals(false, Convert.ToBoolean(false));
    assertEquals(false, Convert.ToBoolean(3.3f));
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-04T12:54:45.473

建立在 Suresh Prajapati 的回答之上，将所有数字转换为字符串，然后再次将它们解析回数字似乎有点低效。我建议像：

```
public class Convert {
  public static int ToInt(Object obj) {
    if (obj instanceof Number) {
        return ((Number)obj).intValue();
    }
    if (obj instanceof Boolean) {
        return ((Boolean)obj).booleanValue() ? 1 : 0;
    }
    try {
      return Integer.parseInt(obj.toString());
    }
    catch (Exception ex) {
      return 0;
    }
  }

  public static float ToFloat(Object obj) {
    if (obj instanceof Number) {
        return ((Number)obj).floatValue();
    }
    if (obj instanceof Boolean) {
        return ((Boolean)obj).booleanValue() ? 1.0f : 0.0f;
    }
    try {
      return Float.parseFloat(obj.toString());
    }
    catch (Exception ex) {
      return 0f;
    }
  }

  public static boolean ToBoolean(Object obj){
    if (obj instanceof Boolean) {
      return ((Boolean)obj).booleanValue();
    }
    if (obj instanceof Number) {
      return (((Number)obj).longValue() != 0L);
    }
    try {
      return Boolean.parseBoolean(obj.toString());
    }
    catch (Exception ex) {
      return false;
    }
  }
} 
```

**注意：**、、`Integer`等`Long`类都是 *的*子类。`Float``Double`*`Number`*

# jenkins - 尝试重新启动时出现状态码 500。安装插件后重启选项消失了

> ID：13993999
> 
> 赞同：3
> 
> 时间：2012-12-21T16:46:24.497
> 
> 标签：jenkins, jenkins-plugins

我们将 Jenkins 移动到另一台服务器，移动后，我不再可以选择“安装插件后重新启动”。单词在那里，但复选框不见了。当我在 URL 中尝试 /restart 时，我得到了验证选项，在单击“是”后，我得到一个状态代码 500 错误。

这是一个 Linux 安装。

```
javax.servlet.ServletException: hudson.lifecycle.RestartNotSupportedException: Failed to obtain the command line arguments of the process
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:615)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:658)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:487)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:45)
    at winstone.ServletConfiguration.execute(ServletConfiguration.java:248)
    at winstone.RequestDispatcher.forward(RequestDispatcher.java:333)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:376)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:50)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at winstone.RequestDispatcher.forward(RequestDispatcher.java:331)
    at winstone.RequestHandlerThread.processRequest(RequestHandlerThread.java:215)
    at winstone.RequestHandlerThread.run(RequestHandlerThread.java:138)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: hudson.lifecycle.RestartNotSupportedException: Failed to obtain the command line arguments of the process
    at hudson.lifecycle.UnixLifecycle.verifyRestartable(UnixLifecycle.java:98)
    at jenkins.model.Jenkins.restart(Jenkins.java:3151)
    at jenkins.model.Jenkins.doRestart(Jenkins.java:3122)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:288)
    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:151)
    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:90)
    at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:111)
    at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:573)
    ... 35 more
Caused by: java.lang.UnsatisfiedLinkError: com.sun.jna.Native.open(Ljava/lang/String;)J
    at com.sun.jna.Native.open(Native Method)
    at com.sun.jna.NativeLibrary.getInstance(NativeLibrary.java:236)
    at com.sun.jna.Library$Handler.<init>(Library.java:140)
    at com.sun.jna.Native.loadLibrary(Native.java:366)
    at com.sun.jna.Native.loadLibrary(Native.java:351)
    at com.sun.akuma.CLibrary.<clinit>(CLibrary.java:89)
    at com.sun.akuma.JavaVMArguments.resolvePID(JavaVMArguments.java:126)
    at com.sun.akuma.JavaVMArguments.ofLinux(JavaVMArguments.java:114)
    at com.sun.akuma.JavaVMArguments.of(JavaVMArguments.java:104)
    at com.sun.akuma.JavaVMArguments.current(JavaVMArguments.java:92)
    at hudson.lifecycle.UnixLifecycle.<init>(UnixLifecycle.java:54)
    at hudson.lifecycle.Lifecycle.get(Lifecycle.java:93)
    at jenkins.model.Jenkins.restart(Jenkins.java:3150)
    ... 46 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:43:08.140

看起来您缺少一些 Jenkins 配置信息，
或者“jenkins”文件夹下文件的所有者与“jenkins”用户不同
（假设您以用户“jenkins”身份运行 Jenkins）。

建议如下：

*   备份您的 Jenkins 存储库
    （通常位于“jenkins”用户目录下）
*   从新安装 Jenkins
*   看到一切都在干净安装上工作
    （安装插件，重新启动，......）
*   从您所做的备份中复制存储库
*   确保所有文件的所有者是您当前的“jenkins”用户
    （再次假设您以用户“jenkins”的身份运行 Jenkins）
*   尝试重新启动 Jenkins，看看情况如何