# StackOverflow 问答 14671000-14671999

# iphone - plist 未复制到应用程序包中

> ID：14671006
> 
> 赞同：3
> 
> 时间：2013-02-03T09:15:17.747
> 
> 标签：iphone, ios, plist

我想使用 Xcode 4.5.2（或 4.6）将 plist 复制到我的应用程序包中。

我选择 my.plist，将其拖到项目中，并确保它也在“构建阶段”的“复制捆绑项目”阶段。没有红，一切都很好。

当我现在编译项目时，my.plist 不会复制到应用程序包中。我从几个小时以来一直在尝试。

如果我现在将文件重命名为 my.png，将文件拉到 Xcode，一切都很好 - my.png 文件在应用程序包中。

那么：为什么不是将 my.plist 文件复制到应用程序包，而是将 my.png 文件复制到应用程序包中？

非常感谢任何见解。

编辑：感谢您的想法！看来这个项目有一些奇怪的问题。任何其他（新）项目都将在这里按预期工作。通过将扩展名从“plist”更改为“plis”，一切正常（嗯，我知道的一种解决方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:01:08.927

*   转到您的项目文件夹
*   找到您的列表
*   将其拖到您的项目中（或右键单击 -> 添加文件...来自 Xcode）
*   在将显示的窗口中，选择“为任何添加的文件夹创建组”并添加到目标 -> 选择您的目标名称。如果 pList 远离项目文件夹，请选择“将项目复制到目标组的文件夹（如果需要）
*   执行干净的构建 ( `command`++ )和干净的构建文件夹( `shift`++ )`K``command``alt``shift``K`
*   从模拟器（或设备）中删除您的应用
*   转到项目的目标 -> 构建阶段 -> 复制捆绑资源 -> 单击左下角的小“+”并确保您的 pList 已添加到那里
*   编译运行项目，看看是否复制成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:23:35.600

如果您的项目中有多个目标，请检查文件的目标成员资格。如果这不起作用，请通过 Finder 将实际文件复制到项目目录中，然后通过从 Xcode 项目浏览器中选择“将文件添加到...”将其添加到项目中。

# android - 由于未计算的错误，无法运行 android eclipse 项目

> ID：14671007
> 
> 赞同：0
> 
> 时间：2013-02-03T09:15:55.820
> 
> 标签：android, eclipse

这些是我尝试运行项目时遇到的错误。直到昨天它工作得很好。我不知道是什么导致了错误。我清理了项目并重新运行了很多次。我什至重新启动了我的笔记本电脑，但徒劳无功。请帮我恢复这个，这是一个非常庞大的项目。我的朋友在他的笔记本电脑上复制了这个项目，并且能够成功运行它。得出的结论是我的日食存在问题。

![当我尝试运行项目时错误日志中的错误](../Images/8dbfebc609954942e6e74e45c3cf0240.png) ![当我尝试运行项目时错误日志中的错误](../Images/ba97b607d65030e102db1e48839da22d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:25:17.157

有太多错误需要整理。我非常推荐一个简单的方法是卸载Eclipse（如果它真的是问题的根源）重新安装它并启动一个新项目，然后慢慢地一个一个地添加项目文件。至少这样，如果错误再次出现，您就知道它是哪个文件（如果有的话）。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:53:07.760

如果要应用任何更新，请尝试更新 eclipse。

# delphi - 使用 Indy 10 和 DELPHI 评估电子邮件

> ID：14671010
> 
> 赞同：4
> 
> 时间：2013-02-03T09:16:24.757
> 
> 标签：delphi, indy

我使用以下代码来评估味精。使用 INDY 10 组件接收的电子邮件消息的内容（正文/行）

```
function LinesFromMsg(aMsg: TIdMessage): TStrings; 
var
  i: Integer; 
begin
  for i := 0 to aMsg.MessageParts.AttachmentCount-1 do
  begin
    if (amsg.MessageParts.Items[i].ContentType ='HTML') then
    begin
      if (amsg.MessageParts.Items[i] is Tidtext) then
        Result := TidText(amsg.MessageParts.Items[i]).body;
    end;
  end; 
end; 
```

关于此代码，我有 2 个问题：

a) 这是在任意邮件消息中找到 Tlines 部分的正确方法吗？（考虑[INDY 10 EMAIL MSG PARTS](https://stackoverflow.com/questions/14660784/how-to-process-a-mime-email-to-vcl)中显示的建议）

b) 在哪里可以找到所有不同 Contenttype 字符串值的教程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T12:21:17.730

`ContentType`要寻找的正确值是`text/html`。使用 Indy 的`IsHeaderMediaType()`函数对其进行检查，因为该`ContentType`值可能具有与之关联的其他属性，您的比较需要忽略这些属性。

您还需要考虑`TIdMessage.ContentType`到这一点，因为 HTML 电子邮件可能没有经过 MIME 编码，因此根本不使用 TIdMessage.MessageParts 集合。

最后，您循环需要使用`MessageParts.Count`属性而不是`MessageParts.AttachmentsCount`属性。

试试这个：

```
function HTMLFromMsg(aMsg: TIdMessage): TStrings; 
var
  i: Integer; 
  Part: TIdMessagePart;
begin
  Result := nil;
  if IsHeaderMediaType(aMsg.ContentType, 'text/html') then
  begin
    Result := aMsg.Body;
    Exit;
  end;
  for i := 0 to aMsg.MessageParts.Count-1 do
  begin
    Part := aMsg.MessageParts.Items[i];
    if (Part is TIdText) and IsHeaderMediaType(Part.ContentType, 'text/html') then
    begin
      Result := TIdText(Part).Body;
      Exit;
    end;
  end; 
end; 
```

话虽如此，这在技术上并不是处理 MIME 的正确方法。正式地，符合标准的阅读器应该通过 MIME 部分向后循环，因为它们是从最简单的形式向下到最复杂的形式排序的。所以你向后循环，考虑到 MIME 嵌套，寻找你支持的最复杂的形式。更像这样的东西（未经测试）：

```
procedure DisplayPlainText(Body: TStrings);
begin
  // display plain text as needed...
end;

procedure DisplayHTML(Body: TStrings);
begin
  // display html as needed...
end;

procedure DisplayMultiPartAlternative(aMsg: TIdMessage; aParentIndex, aLastIndex: Integer);
var
  Part: TIdMessagePart;
  i: Integer:
begin
  for i := aLastIndex-1 downto aParentIndex+1 do
  begin
    Part := aMsg.MessageParts.Items[i];
    if (Part.ParentPart = aParentIndex) and (Part is TIdText) then
    begin
      if IsHeaderMediaType(Part.ContentType, 'text/html') then
      begin
        DisplayHTML(TIdText(Part).Body);
        Exit;
      end;
      if IsHeaderMediaType(Part.ContentType, 'text/plain') then
      begin
        DisplayPlainText(TIdText(Part).Body);
        Exit;
      end;
    end;
  end;
  // nothing supported to display...
end;

procedure DisplayMultiPartMixed(aMsg: TIdMessage; aParentIndex, aLastIndex: Integer);
var
  Part: TIdMessagePart;
  i: Integer;
begin
  for i := aLastIndex-1 downto aParentIndex+1 do
  begin
    Part := aMsg.MessageParts.Items[i];
    if (Part.ParentPart = aParentIndex) and (Part is TIdText) then
    begin
      if IsHeaderMediaType(Part.ContentType, 'multipart/alternative') then
      begin
        DisplayMultiPartAlternative(aMsg, ParentPart.Index, aLastIndex);
        Exit;
      end;
      if IsHeaderMediaType(ParentPart.ContentType, 'text/html') then
      begin
        DisplayHTML(TIdText(Part).Body);
        Exit;
      end;
      if IsHeaderMediaType(Part.ContentType, 'text/plain') then
      begin
        DisplayPlainText(TIdText(Part).Body);
        Exit;
      end;
      aLastIndex := i;
    end;
  end;
  // nothing supported to display...
end;

procedure DisplayMsg(aMsg: TIdMessage); 
var
  ContentType: string;
begin
  ContentType := ExtractHeaderMediaType(aMsg.ContentType);
  case PosInStrArray(ContentType, ['multipart/mixed', 'multipart/alternative', 'text/html', 'text/plain'], False) of
    0: begin
      DisplayMultiPartAlternative(aMsg, -1, aMsg.MessageParts.Count);
      Exit;
    end;
    1: begin
      DisplayMultiPartMixed(aMsg, -1, aMsg.MessageParts.Count);
      Exit;
    end;
    2: begin
      DisplayHTML(aMsg.Body);
      Exit;
    end;
    3: begin
      DisplayPlainText(aMsg.Body);
      Exit;
    end;
  else
    // nothing supported to display...
  end;
end; 
```

# macos - 苹果的开源项目

> ID：14671012
> 
> 赞同：-4
> 
> 时间：2013-02-03T09:16:40.127
> 
> 标签：macos, open-source

在 Apple 的[开源列表](http://opensource.apple.com/release/mac-os-x-1082/)中，普通字体项目和粗体项目有什么区别？点和粗体表示什么？（例如，`xnu`and`objc4`被突出显示，而`ruby`and`dyld`不是）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:20:00.367

在您引用的页面上向下滚动一点：

> 此版本中的新项目或更新项目带有项目符号并以粗体显示。您可以通过单击列标题对列表进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:20:15.927

此版本中的新项目或更新项目带有项目符号并以粗体显示。您可以通过单击列标题对列表进行排序（从页面底部）

# python - 可能重复的numpy数组的排名

> ID：14671013
> 
> 赞同：8
> 
> 时间：2013-02-03T09:16:48.770
> 
> 标签：python, sorting, numpy, scipy

我有一个 numpy 浮点数/整数数组，并希望将其元素映射到它们的行列中。

如果数组没有重复，则可以通过以下代码解决问题

```
In [49]: a1
Out[49]: array([ 0.1,  5.1,  2.1,  3.1,  4.1,  1.1,  6.1,  8.1,  7.1,  9.1])

In [50]: a1.argsort().argsort()
Out[50]: array([0, 5, 2, 3, 4, 1, 6, 8, 7, 9]) 
```

现在我想将此方法扩展到具有可能重复项的数组，以便将重复项映射到相同的值。例如，我想要数组 a

```
a2 = np.array([0.1, 1.1, 2.1, 3.1, 4.1, 1.1, 6.1, 7.1, 7.1, 1.1]) 
```

映射到

```
0 1 4 5 6 1 7 8 8 1 
```

或者

```
0 3 4 5 6 3 7 9 9 3 
```

或者

```
0 2 4 5 6 2 7 8.5 8.5 2 
```

在第一种/第二种情况下，如果我们只应用 a2.argsort().argsort()，我们会将重复项映射到其中的最小/最大等级。第三种情况只是前两种情况的平均值。

有什么建议么？

**编辑（效率要求）**

在最初的描述中，我忘了提到**时间要求**。我正在寻找 numpy/scipy 函数方面的解决方案，这将避免“纯 python 开销”。为了清楚起见，考虑一下 Richard 提出的解决方案，它实际上解决了问题，但速度很慢：

```
def argsortdup(a1):
  sorted = np.sort(a1)
  ranked = []
  for item in a1:
    ranked.append(sorted.searchsorted(item))
  return np.array(ranked)

In [86]: a2 = np.array([ 0.1,  1.1,  2.1,  3.1,  4.1,  1.1,  6.1,  7.1,  7.1,  1.1])

In [87]: %timeit a2.argsort().argsort()
1000000 loops, best of 3: 1.55 us per loop

In [88]: %timeit argsortdup(a2)
10000 loops, best of 3: 25.6 us per loop

In [89]: a = np.arange(0.1, 1000.1)

In [90]: %timeit a.argsort().argsort()
10000 loops, best of 3: 24.5 us per loop

In [91]: %timeit argsortdup(a)
1000 loops, best of 3: 1.14 ms per loop

In [92]: a = np.arange(0.1, 10000.1)

In [93]: %timeit a.argsort().argsort()
1000 loops, best of 3: 303 us per loop

In [94]: %timeit argsortdup(a)
100 loops, best of 3: 11.9 ms per loop 
```

从上面的分析可以清楚地看出，argsortdup 比 a.argsort().argsort() 慢 30-50 倍。主要原因是使用了python循环和列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:08:30.773

`unique`您可以使用and做得相当好`bincount`：

```
>>> u, v = np.unique(a2, return_inverse=True)
>>> (np.cumsum(np.bincount(v)) - 1)[v]
array([0, 3, 4, 5, 6, 3, 7, 9, 9, 3]) 
```

或者，对于最低等级：

```
>>> (np.cumsum(np.concatenate(([0], np.bincount(v)))))[v]
array([0, 1, 4, 5, 6, 1, 7, 8, 8, 1]) 
```

`bincount`通过提供要提供的 bin 数量可以稍微加快速度：

```
(np.cumsum(np.bincount(v, minlength=u.size)) - 1)[v] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T10:45:11.763

升级到`scipy`评论中建议的@WarrenWeckesser 的最新版本后，`scipy.stats.rankdata`似乎比两者都快，`scipy.stats.mstats.rankdata`并且`np.searchsorted`是在更大阵列上执行此操作的最快方法。

```
In [1]: import numpy as np

In [2]: from scipy.stats import rankdata as rd
   ...: from scipy.stats.mstats import rankdata as rd2
   ...: 

In [3]: array = np.arange(0.1, 1000000.1)

In [4]: %timeit np.searchsorted(np.sort(array), array)
1 loops, best of 3: 385 ms per loop

In [5]: %timeit rd(array)
10 loops, best of 3: 109 ms per loop

In [6]: %timeit rd2(array)
1 loops, best of 3: 205 ms per loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T09:57:51.600

这是一个可以返回您想要的输出的函数（在第一种情况下）

```
def argsortdup(a1):
  sorted = sort(a1)
  ranked = []
  for item in a1:
    ranked.append(sorted.searchsorted(item))
  return array(ranked) 
```

基本上，您对其进行排序，然后搜索该项目所在的索引。假设应返回第一个实例索引重复。我用你的 a2 示例对其进行了测试，并做了类似的事情

```
a3 = argsortdup(a2) 
```

产量

```
array([0, 1, 4, 5, 6, 1, 7, 8, 8, 1]) 
```

“用 a2 测试”：

```
>>> a2
array([ 0.1,  1.1,  2.1,  3.1,  4.1,  1.1,  6.1,  7.1,  7.1,  1.1])
>>> def argsortdup(a1):
...   sorted = sort(a1)
...   ranked = []
...   for item in a1:
...     ranked.append(sorted.searchsorted(item))
...   return array(ranked)
...
>>> a3 = argsortdup(a2)
>>> a2
array([ 0.1,  1.1,  2.1,  3.1,  4.1,  1.1,  6.1,  7.1,  7.1,  1.1])
>>> a3
array([0, 1, 4, 5, 6, 1, 7, 8, 8, 1])
>>> 
```

# verification - 是什么导致 Promela/SPIN 超时？

> ID：14671018
> 
> 赞同：3
> 
> 时间：2013-02-03T09:17:44.703
> 
> 标签：verification, spin, promela

我有以下 promela 代码：

```
chan level = [0] of {int};

proctype Sensor (chan levelChan) {
    int x;
    do
    :: true ->
            levelChan ? x;
            if 
            :: (x < 2) -> printf("low %d", x);
            :: (x > 8) -> printf("high %d", x);
            :: else -> printf("normal %d", x);
            fi
    od
}

init {
    run Sensor(level);  
    int lvl = 5;
    level ! lvl;
    lvl = 0;
    do 
    :: true ->
        level ! lvl; 
        lvl++;
        (lvl > 9) -> break;
    od
} 
```

我期望将级别（0-9）信息发送到通道中，并根据该级别使传感器输出低|正常|高。它很简单。但是为什么 SPIN 一直说超时呢？

```
 0:    proc  - (:root:) creates proc  0 (:init:)
Starting Sensor with pid 1
  1:    proc  0 (:init:) creates proc  1 (Sensor)
  1:    proc  0 (:init:) 1.pml:18 (state 1) [(run Sensor(level))]
  2:    proc  1 (Sensor) 1.pml:6 (state 11) [(1)]
  3:    proc  0 (:init:) 1.pml:20 (state 2) [lvl = 5]
  4:    proc  0 (:init:) 1.pml:20 (state 3) [level!lvl]
  4:    proc  1 (Sensor) 1.pml:8 (state 2)  [levelChan?x]
  5:    proc  1 (Sensor) 1.pml:9 (state 9)  [else]
  6:    proc  0 (:init:) 1.pml:21 (state 4) [lvl = 0]
normal 5  8:    proc  1 (Sensor) 1.pml:12 (state 8) [printf('normal %d',x)]
  9:    proc  0 (:init:) 1.pml:22 (state 10)    [(1)]
 12:    proc  1 (Sensor) 1.pml:6 (state 11) [(1)]
 13:    proc  0 (:init:) 1.pml:24 (state 6) [level!lvl]
 13:    proc  1 (Sensor) 1.pml:8 (state 2)  [levelChan?x]
 14:    proc  1 (Sensor) 1.pml:9 (state 9)  [((x<2))]
low 0 15:   proc  1 (Sensor) 1.pml:10 (state 4) [printf('low %d',x)]
 17:    proc  0 (:init:) 1.pml:25 (state 7) [lvl = (lvl+1)]
 19:    proc  1 (Sensor) 1.pml:6 (state 11) [(1)]
timeout
#processes: 2
 19:    proc  1 (Sensor) 1.pml:8 (state 2)
 19:    proc  0 (:init:) 1.pml:26 (state 8)
2 processes created 
```

它似乎只做 1 次循环，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:29:48.443

进程的 do 循环中的语句按`init`顺序运行。

```
do 
:: true ->
    level ! lvl; 
    lvl++;
    (lvl > 9) -> break;
od 
```

第一次运行 do 循环时，它将`lvl`通过`level`通道发送，增加`lvl`（所以现在是 1）然后测试`(lvl > 9)`。这是错误的，因此会阻塞并导致超时。

要在 do 循环中有多个选项，您需要`::`定义每个选项的开头：

```
do
 :: true ->
    level ! lvl; 
    lvl++;
 :: (lvl > 9) -> break;
od 
```

但是，这仍然不会按预期执行。当`lvl`大于 9 时，do 循环的两个选项都有效，可以选择其中一个，因此当`lvl > 9`它可以选择继续`lvl`通过`level`通道发送并增加时，循环不一定会中断`lvl`。

您需要对第一个 do 选项和第二个选项有一个条件：

```
do 
:: (lvl <= 9) ->
    level ! lvl; 
    lvl++;
:: (lvl > 9) -> break;
od 
```

在这个例子中使用 for 循环语法可能会更好：

```
init {
  run Sensor(level);  
  int lvl = 5;
  level ! lvl;

  for (lvl : 0..9){
    level ! lvl; 
  }
} 
```

注意，这个例子仍然会有一个由`Sensor`'s do 循环引起的超时错误，当`init`进程完成`Sensor`时仍然会尝试从`level`通道中读取并超时。

# c# - 确定反射场是否不稳定

> ID：14671020
> 
> 赞同：3
> 
> 时间：2013-02-03T09:17:55.767
> 
> 标签：c#, reflection, volatile

我正在尝试使用反射从程序集中挖掘信息，而我想知道的一件事（假设它实际上是要知道的）是一个字段是否易失。换句话说，如果我有以下课程

```
public class Test {
    public volatile int Counter = 0;
} 
```

有什么方法可以（通过反射）弄清楚该`Test.Counter`领域确实是易变的？还是根本没有出口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T09:22:30.957

您可以使用以下[`GetRequiredCustomModifiers`](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.getrequiredcustommodifiers.aspx)方法：

```
var field = typeof(Test).GetField("Counter");
bool isVolatile = field
    .GetRequiredCustomModifiers()
    .Any(x => x == typeof(IsVolatile)); 
```

# macos - bash：make：找不到命令

> ID：14671021
> 
> 赞同：5
> 
> 时间：2013-02-03T09:18:04.457
> 
> 标签：macos, bash, makefile

我在带有 Makefile 的目录中，但无法使用 我无法使用`make`

```
bash-3.2$ make
bash: make: command not found 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T09:18:04.457

Make，除其他外，可通过 Apple 的命令行工具获得。通过 XCode 安装命令行工具：`XCode->Preferences->Downloads`

您也可以在不安装 XCode 的情况下从 Apple 开发者网站下载命令行工具：[https ://developer.apple.com/opensource/](https://developer.apple.com/opensource/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T09:34:48.720

如果您安装了 XCode，那么@Wex 的回答会让您快速上手，否则您无需安装 Xcode 即可获得您寻求的命令行工具。

看看这个：[https ://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)

您需要在 Lion 上安装这个：[https ://github.com/downloads/kennethreitz/osx-gcc-installer/GCC-10.7-v2.pkg](https://github.com/downloads/kennethreitz/osx-gcc-installer/GCC-10.7-v2.pkg)

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-01T04:02:20.577

我有同样的问题。我正要下载并安装命令行工具，直到我在下载窗口中看到您可以使用：

```
xcrun make 
```

# assembly - 什么是“最纯粹的”汇编程序或汇编语言？

> ID：14671024
> 
> 赞同：0
> 
> 时间：2013-02-03T09:18:23.377
> 
> 标签：assembly, x86, x86-64

过去一周左右，我一直在尝试在 64 位 Windows 7 机器上学习 x86 汇编语言，以更深入地了解计算机的运行方式。

不幸的是，我取得的进展很小，因为许多汇编程序允许使用高级构造和宏以及包含预先编写的代码。这不是问题，直到我意识到我能找到的关于这个主题的所有文档和教程都坚持使用这些抽象、拐杖和混淆，这违背了我想要学习一门真正低级语言的整个目的。

所以现在我正在寻找一种“纯”汇编程序或语言，一种没有高级汇编语言的臃肿和笨拙，并且尽可能接近机器代码的语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:20:42.500

直接在十六进制编辑器中编写您的 x86 机器代码。

完全有可能，我已经做过很多次了。但是您很快就会了解那些“抽象、拐杖和混淆”的价值，尤其是当您必须手动重新计算第 1000 次跳转偏移时......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T09:29:36.380

看看 NASM。

NASM 有许多您可以定义的高级辅助函数和宏，但您完全可以避免使用它们。

然而，您可能会遇到的一个问题是汇编语言编译为字节，但操作系统总体上不运行字节，它们运行程序。因此，您几乎可以肯定必须弄乱一些更高级别的结构，以说服您最终选择的任何汇编程序生成 PE 文件 (Windows) 或 ELF 文件 (Linux)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T22:05:49.573

对于纯汇编代码，您可以查看一些基本的 hello world 引导加载程序。引导加载程序不依赖于操作系统调用，而是直接调用 bios。您可以以这个基本教程为例， http: [//viralpatel.net/taj/tutorial/hello_world_bootloader.php](http://viralpatel.net/taj/tutorial/hello_world_bootloader.php)。这是 16 位汇编。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T16:37:09.153

“纯”有几个层次。例如，当你使用特定的操作系统时，你必须使用它的 API 来进行输入/输出、内存分配等。这个 API 调用是通过不同的方式提供的——有些很容易，有些则不那么容易。

例如，如果您在 Windows 上工作，则必须从系统 DLL 中导入函数。但是函数导入不能算是“汇编编程”。

这些函数的调用约定是 C/C++/HLL，因此，您必须使用此调用约定，而不是更像汇编。

因此，您首先需要对组装友好的操作系统。我建议使用 32 位 Linux - 它使用 int $80 和寄存器参数传递，因此您将能够专注于汇编语言。

这是用 FASM 编写的非常简单的“hello world”示例。如您所见，开销很小，并且不涉及任何宏：

```
format ELF executable
entry _start

segment readable executable
_start:

        mov     eax, 4
        mov     ebx, 1
        mov     ecx, msg
        mov     edx, msg_size
        int     $80

        mov     eax, 1
        xor     ebx, ebx
        int     $80

segment readable writeable
msg db 'Hello world!',$0a
msg_size = $ - msg 
```

当然你需要一些 Linux 系统调用手册。[Linux x86 Asm 软件开发工具包](http://sourceforge.net/projects/lscr/)正是您所需要的。

# jsf - 如何在 JSF 2.2 中设置项目以支持 h:inputfile

> ID：14671025
> 
> 赞同：0
> 
> 时间：2013-02-03T09:18:29.713
> 
> 标签：jsf, jsf-2.2

我正在开发使用 JSF 2.2 的新项目。我的工具编号为 Netbeans 7.3 Bata1 + Mysql + EclipseLink。

我想在我的项目上使用标签，但是在我将 JSF 2.2 库添加到项目并测试部署后，我收到了一些警告消息：

```
WARNING: Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@6054cd1b].
WARNING: JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@6054cd1b] from index [0] 
WARNING: JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@235fe684] from index [1] 
WARNING: WEB9052: Unable to load class javax.faces.render.RendererWrapper, reason: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/faces/render/RendererWrapper
WARNING: WEB9052: Unable to load class javax.faces.component.UIViewAction, reason: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/faces/component/UIViewAction
WARNING: WEB9052: Unable to load class javax.faces.component.html.HtmlInputFile, reason: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/faces/component/html/HtmlInputFile 
```

当我插入页面并在浏览器上打开它时，我收到了这个错误：

```
/system/systemThemes.xhtml @188,102 <h:inputFile> Tag Library supports namespace: http://java.sun.com/jsf/html, but no tag was defined for name: inputFile 
```

我该如何解决这个问题？我尝试研究了几天，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T10:45:08.683

> java.lang.ClassFormatError：类文件 javax/faces/component/html/HtmlInputFile 中非本机或抽象方法中的缺失代码属性

您安装了包含 API ( `javax.faces.*`) 的 JAR 文件，但没有安装包含 impl 的 JAR 文件（例如 Mojarra，`com.sun.faces.*`）。您基本上最终得到了来自 JSF API 的几个抽象类/接口，而没有实际工作的具体实现。这就像导入和使用 JDBC 代码，但不使用供应商特定的 JDBC 驱动程序（这是 JDBC API 的具体实现）。

确保您也安装了带有 impl 的 JAR。[从Maven](https://maven.java.net/content/repositories/snapshots/com/sun/faces/)`/jsf-api`的和`/jsf-impl`文件夹中获取 JAR 文件。

# dojo - dojo 条形图中的系列标签

> ID：14671026
> 
> 赞同：0
> 
> 时间：2013-02-03T09:18:33.690
> 
> 标签：dojo, bar-chart

我正在使用 Dojo 1.8。请帮助我了解如何在运行时在条形图中添加系列标签。

以下是静态值的示例，但如果我在数组中有值：“一、二、三、四”怎么办。我将如何在运行时使用数组来分配系列标签。

`chart.addAxis("x",{ labels: [ {value: 1, text: "one"}, {value: 2, text: "two"}, {value: 3, text: "three"}, {value: 4, text: "four"}]});`

问候高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:13:19.490

只需用于`dojo.map()`形成标签：

```
var values = ["one", "two", "three", "four"];

chart.addAxis("x", {
  labels: dojo.map(values, function(value, index){
    return {value: index + 1, text: value};
  })
}); 
```

# c - sed 命令在 shell 终端下工作正常，但在 C 代码下的“system()”调用中失败

> ID：14671028
> 
> 赞同：2
> 
> 时间：2013-02-03T09:18:33.520
> 
> 标签：c, sed

我正在尝试删除日志文件中的一些特殊行，因此我在嵌入式 linux 系统上使用了 busybox 的 sed。

```
# sed
BusyBox v1.18.4 (2013-01-16 16:00:18 CST) multi-call binary.

Usage: sed [-efinr] SED_CMD [FILE]...

Options:
        -e CMD  Add CMD to sed commands to be executed
        -f FILE Add FILE contents to sed commands to be executed
        -i      Edit files in-place (else sends result to stdout)
        -n      Suppress automatic printing of pattern space
        -r      Use extended regex syntax

If no -e or -f, the first non-option argument is the sed command string.
Remaining arguments are input files (stdin if none). 
```

1.  在shell下执行以下命令，一切正常：

    ```
    export MODULE=sshd
    sed "/$MODULE\[/d" logfile 
    ```

2.  但如果我尝试使用以下 C 代码来完成此操作：

    ```
    char logfile[] = "logfile";
    char module_str[] = "sshd";
    char env_str[64] = {0};
    int offset = 0;

    strcpy(env_str, "MODULE=");
    offset += strlen("MODULE=");
    strcpy(env_str + offset, module_str);
    putenv(env_str);
    system("sed \"/$MODULE\[/d\" logfile"); 
    ```

执行 a.out 时，我收到错误消息：

```
sed: unmatched '/' 
```

我的“system()”调用有什么问题？我完全是文本处理的新手，所以任何人都可以给我一些线索吗？谢谢。

最好的问候， dejunl

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:46:11.670

直接我可以看到 [ 之前的 \ 将被 'C' 吞噬

所以你需要加倍，

system("sed\"/$MODULE\\[/d\"日志文件");

但是贝壳可能想吞下剩下的那个吞下那个所以再加倍

system("sed \"/$MODULE\\\\[/d\" 日志文件");

当然 system("sed \"/$MODULE\\[/d\" logfile"); 不能确定我正在阅读你提出的问题。尝试使用 echo 而不是 sed 并对其进行调整，直到字符串出现您希望 sed 看到它为止。

# php - 数组的 Yii 验证规则

> ID：14671031
> 
> 赞同：7
> 
> 时间：2013-02-03T09:18:59.540
> 
> 标签：php, yii

`rules()`有没有办法在Yii 模型的方法中要求元素数组？例如：

```
public function rules()
{
   return array(
            array('question[0],question[1],...,question[k]','require'),
   );
} 
```

我一直遇到需要验证来自表单的几个元素数组的情况，除了执行上述操作之外，我似乎找不到解决它的好方法。指定时我有同样的问题`attributeLables()`。如果有人有一些建议或更好的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T09:51:37.430

您可以使用`CTypeValidator`别名`type`

```
public function rules()
{
   return array(
            array('question','type','type'=>'array','allowEmpty'=>false),
   );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-17T12:02:52.950

`array('question','type','type'=>'array','allowEmpty'=>false),`你可以验证你是否收到了正确的数组，但你不知道这个数组里面有什么。要验证数组元素，您应该执行以下操作：

```
<?php

class TestForm extends CFormModel
{
    public $ids;

    public function rules()
    {
        return [
            ['ids', 'arrayOfInt', 'allowEmpty' => false],
        ];
    }

    public function arrayOfInt($attributeName, $params)
    {
        $allowEmpty = false;
        if (isset($params['allowEmpty']) and is_bool($params['allowEmpty'])) {
            $allowEmpty = $params['allowEmpty'];
        }
        if (!is_array($this->$attributeName)) {
            $this->addError($attributeName, "$attributeName must be array.");
        }
        if (empty($this->$attributeName) and !$allowEmpty) {
            $this->addError($attributeName, "$attributeName cannot be empty array.");
        }
        foreach ($this->$attributeName as $key => $value) {
            if (!is_int($value)) {
                $this->addError($attributeName, "$attributeName contains invalid value: $value.");
            }
        }
    }
} 
```

# opencv - 有什么方法可以检查是否检测到 haar 级联？

> ID：14671034
> 
> 赞同：0
> 
> 时间：2013-02-03T09:19:17.230
> 
> 标签：opencv, haar-wavelet

该函数`detectMultiScale()`返回 void，因此无法使用该函数检查对象是否被检测到

我希望将检测到对象的帧号传递给文本文件。当我无法检查是否检测到级联时，我不知道该怎么做？

我应该`cvHaarDetectObjects()`从 C API 使用吗？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:51:34.280

第二个参数`CascadeClassifier::detectMultiScale()`是矩形向量。你可以检查它的大小：

```
std::vector<cv::Rect> objs;
cascade.detectMultiScale(img, objs, scalefactor, minneighbors);

if (objs.size()) {
  // success
} else {
  // failed
} 
```

# python - 将 8 个皇后放入国际象棋中（不互相对待）！[我想要所有可能的结果！]

> ID：14671049
> 
> 赞同：-1
> 
> 时间：2013-02-03T09:20:57.167
> 
> 标签：python, chess

我想在棋盘上放置 8 个皇后（或 Vizier），这样他们中的任何一个都无法对待其他人！
喜欢这张照片

[![](../Images/e15ab602264970fb9ab88303dc882191.png)](https://i.stack.imgur.com/2cp4a.jpg)

首先，
我想以程序方式进行，但似乎不可能！
（它会变成一百行！！（即使它有效！））

**我的代码**

```
def viz(a):
    for i in range(8):
        temp = []
        if(i == a or i == a - 1 or i == a + 1):
            continue
        temp.append(i)
    temp = set(temp)
    return temp
list1=[0]*8
for i in range(8):
    list1[i]=1
    a = viz(i)
    for j in a:
        list2[j]=1
        b = viz(j)
        for h in a.intersection(b):
            list3[h]=h
            tset = a.intersection(b)
            c = viz(h)
            for n in tset.intersection(c):
                list4[]
                .
                .
                .
        list2[j]=0
    list1[i]=0 
```

我什至尝试过面向对象的样式，它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:40:37.100

这是许多可能的实现之一：

```
#! /usr/bin/python3.2

import itertools

def queens ():
    for p in itertools.permutations (range (8) ):
        yield [x for x in enumerate (p) ]

for q in queens ():
    err = False
    for a, b in ( (a, b) for a in q for b in q if a [0] < b [0] ):
        if abs (a [0] - b [0] ) == abs (a [1] - b [1] ):
            err = True
            break
    if not err: print (q) 
```

它产生所有 92 个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:33:55.680

这是[一种可能的解决方案](http://code.activestate.com/recipes/576647-eight-queens-six-lines/)，仅用六行 python 即可解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:31:04.430

我在使用这么多模块时遇到了一些问题，所以这是我的答案：

```
res = []
ill = []

def n_ligal(r,c):
    global ill
    a = 1
    while(r+a<8):
        ill.append((r+a,c))
        ill.append((r+a,c+a))
        ill.append((r+a,c-a))
        a += 1          
def r_iligal(r,c):
    global ill
    a = 1
    while(r+a<8):
        ill.remove((r+a,c))
        ill.remove((r+a,c+a))
        ill.remove((r+a,c-a))
        a += 1

def a():
    global i,j
    j = res.pop()
    i -= 1
    r_iligal(i,j)
    j+=1
    if(j==8):
        a()

i = 0
j = 0
while(i<8):
    while (j<8):
        if((i,j) not in ill):
            res.append(j)
            n_ligal(i,j)
            if(len(res) == 8):
                print(res)
            i += 1
            j = 0
            break
            elif(j==7):
                a()
            else:
                j += 1

print('Press Q to exit')
q = input()
if(q=='q'):
    raise SystemExit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-08T04:42:18.540

```
# my solution!

SIZE=8
A=[0] * SIZE  # Array solution
s=0  # Global variable to count 'solutions', you can delete it!
t=0  # Global variable to count recursion 'tests', you can delete it!

def test(queen, col):
    global t
    t+=1
    for i in range(1,queen):
        if(A[queen-i-1]==col): return 0     # Test vertical
        if(A[queen-i-1]==col-i): return 0   # Test diagonal 1 (\)
        if(A[queen-i-1]==col+i): return 0   # Test diagonal 2 (/)
    return 1

def play(queen):
    global s
    for col in range(1,SIZE+1):
        if(test(queen,col)):     # If I can play the queen...
            A[queen-1]=col       # Add queen to the solution Array
            if(queen==SIZE):     # If the last queen was played, this is a solution
                s+=1
                print("Solution: {}, {}, {}".format(s,t,A))
            else:
                play(queen+1);   # If not last queen, play the next one
            A[queen-1]=0         # Clean the solution Array

play(1)  # Start putting first queen

# 2020-02-02
# Array solution [1, 5, 8, 6, 3, 7, 2, 4] means:
#     1 . . . . . . .
#     . . . . 5 . . .
#     . . . . . . . 8
#     . . . . . 6 . .
#     . . 3 . . . . .
#     . . . . . . 7 .
#     . 2 . . . . . .
#     . . . 4 . . . . 
```

# powershell - 什么是 [cmdletbinding()] 以及它是如何工作的？

> ID：14671051
> 
> 赞同：55
> 
> 时间：2013-02-03T09:21:01.707
> 
> 标签：powershell, binding

根据[get-help about_Functions_CmdletBindingAttribute](http://technet.microsoft.com/en-us/library/hh847872.aspx)

> CmdletBinding 属性是使它们像编译的 cmdlet 一样运行的函数的属性

我们可以在脚本的顶部使用它。这种情况下的功能是什么？PowerShell引擎为其所有输入调用的内部隐式“main”函数？

关于这个语法：

```
[CmdletBinding(ConfirmImpact=<String>,
                     DefaultParameterSetName=<String>,
                     HelpURI=<URI>,
                     SupportsPaging=<Boolean>,
                     SupportsShouldProcess=<Boolean>,
                     PositionalBinding=<Boolean>)] 
```

我们在做什么？实例化一个`cmdlbinding`对象并将参数列表传递给它的构造函数？此语法可以在`param()`- 例如：`[Parameter(ValueFromPipeline=$true)]`. 此语法是否具有特定名称，是否可以在其他地方找到？

最后，作为简单的 PowerShellers，我们是否能够模仿此功能并通过设置属性来修改脚本的行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-03T09:51:11.833

一般来说，CmdletBinding 是将函数变成高级函数的原因。将它放在脚本的顶部会使脚本成为“高级”脚本。函数和脚本大体相同，脚本文件名相当于函数名，脚本内容相当于函数的脚本块部分。

CmdletBinding 属性使您可以控制函数功能，例如添加 Confirm 和 WhatIf 支持（通过 SupportsShouldProcess）、禁用参数位置绑定等。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-03T12:19:46.873

CmdletBinding、Parameter 等是脚本编写者可以用来定义 PowerShell 行为的特殊属性类，例如，使函数成为具有 Cmdlet 功能的高级函数。

当您通过例如调用它们时，`[CmdletBinding()]`您会初始化该类的新实例。

在以下位置阅读有关 CmdletBindingAttribute 类的更多信息：[MSDN](http://msdn.microsoft.com/en-us/library/dd144504%28v=vs.85%29.aspx)

在以下位置阅读有关 ParameterAttribute 类的更多信息：[MSDN](http://msdn.microsoft.com/en-us/library/system.management.automation.parameterattribute%28v=vs.85%29.aspx)

更多关于属性类[here](http://msdn.microsoft.com/en-us/library/aa288454%28v=vs.71%29.aspx)和[here](http://msdn.microsoft.com/en-us/library/84c42s56%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T23:46:11.013

关于语法问题，格式与使用 C# 中的命名参数将 .NET 属性类应用于成员的方式非常匹配。

[将 PowerShell 语言规范的](http://www.microsoft.com/en-us/download/details.aspx?id=36389)**B.2.4**节中的属性（简化）语法与[C# 语言规范的](http://msdn.microsoft.com/en-us/library/aa664812.aspx)**C.2.13**节中的属性进行比较：

 **> **B.2.4 属性**   (PowerShell)
> 
> *属性：*
>   `[` *属性名称* `(` *属性参数* `) ]`
> 
> *属性参数：
>   属性参数
>   属性参数* `,` *属性参数*
> 
> *属性参数：
>   简单名称* `=` *表达式*
> 
> * * *
> 
> **C.2.13 属性**   (C#)
> 
> *属性：*
>   `[` *属性名称* `(` *命名参数列表* `) ]`
> 
> *命名参数列表：
>   命名参数
>   命名参数列表* `,` *命名参数*
> 
> *命名参数：
>   标识符* `=` *属性参数表达式*

* * *

我同意从概念上的简洁性来看，例如重用哈希表初始化语法进行属性初始化可能会很好。但是，我可以想象支持哈希表中的所有选项（如`[A(P=v)]`和`[A('P'=v)]`和`$n = 'P'; [A($n=v)]`等，或它们的某些特定子集）只是`;`用作分隔符会比它的价值更麻烦。

另一方面，如果您想使用高级功能，那么学习高级语法可能是有意义的:)**

# c++ - 另一个缩放到点问题

> ID：14671053
> 
> 赞同：1
> 
> 时间：2013-02-03T09:21:11.893
> 
> 标签：c++, qt, opengl, zooming, model-view

我有一个 2D 应用程序，它是一个图像查看器。我可以在窗口中平移图像，并且可以进行基本缩放。现在我想改进缩放，使其缩放到鼠标下方的点。到目前为止，我已经在谷歌上阅读了所有可能的内容，并且我已经接近一些可行的东西，但仍然找不到可行的东西，这就是我得到的：

```
 glMatrixMode (GL_PROJECTION);
          glLoadIdentity();

         // w and h are respectivly the width  and height of the window      
        // newzoom_pos is the point in openGL coordinates  where the user requested the zoom
        // zoomFactor is between [0.1,10.0]  , 0.1 -> 1.0 means downscale, 1.0 -> 10.0 means upscale
        // transX and transY are used to pan around the image
        float left = (0.f+transX -newzoom_pos.x())/zoomFactor  +newzoom_pos.x();
        float right = (w+transX -newzoom_pos.x())/zoomFactor +newzoom_pos.x();
        float bottom = (h-transY-newzoom_pos.y())/zoomFactor +newzoom_pos.y();
        float top = (0.f-transY -newzoom_pos.y())/zoomFactor +newzoom_pos.y();

        glOrtho(left, right, top, bottom, -1, 1);

        glMatrixMode (GL_MODELVIEW);
        glLoadIdentity (); 
```

它几乎可以工作，但不行，它不能完全缩放到请求的点，并且当图像很小并且不完全适合查看器（周围有黑色）时，它很乱并且不起作用。 ..

顺便说一句，这是用户放大鼠标滚轮事件处理程序时的代码：

```
zoomFactor+=0.1;
QPoint oglpos = openGLpos(new_zoomPoint.x(), new_zoomPoint.y());
 this->newzoom_pos = oglpos; 
```

openGLpos 函数如下：

```
QPoint ViewerGL::openGLpos(int x,int y){
    GLint viewport[4];
    GLdouble modelview[16];
    GLdouble projection[16];
    GLfloat winX=0, winY=0, winZ=0;
    GLdouble posX=0, posY=0, posZ=0;
    glGetDoublev( GL_MODELVIEW_MATRIX, modelview );
    glGetDoublev( GL_PROJECTION_MATRIX, projection );
    glGetIntegerv( GL_VIEWPORT, viewport );
    winX = (float)x;
    winY = viewport[3]- y;
    if(winY == 0) winY =1.f;
    glReadPixels( x, winY, 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &winZ );
    GLint b=gluUnProject( winX, winY, winZ, modelview, projection, viewport, &posX, &posY, &posZ);
    if(b==GLU_FALSE) cout << "failed unprojection" << endl;
    return QPoint(posX,posY);
} 
```

有人可以帮我解决这个问题吗？

# joomla - 使用 PHP 更新 Joomla 的“Alias Slug”

> ID：14671059
> 
> 赞同：0
> 
> 时间：2013-02-03T09:21:47.833
> 
> 标签：joomla

我正在尝试更改 Joomla 文章用来使每篇文章独一无二的“别名蛞蝓”。这需要在 PHP 例程中实现，到目前为止，我已经实现了以下目标：

```
$slugreplace = "12345";
$query = "UPDATE yoo_zoo_item SET alias=$slugreplace WHERE id=$id"; 
```

这用“12345”替换了 slug。但是我想将整数与字符串结合起来，如下所示

```
$id = $row['id']; //this is the unique article item number
$name = $row['name']; //this is the article title
$slugreplace = $id.$name;
$query = "UPDATE yoo_zoo_item SET alias=$slugreplace WHERE id=$id"; 
```

原来的弹头没有被替换。实际上，只有当变量 $slugreplace 包含整数时，才会替换 slug。任何包含字符串的值都会被忽略。但是，我可以将 Joomla 本身中的别名替换为任何字符串/整数组合。

我错过了什么？？

我已经在 J​​oomla 论坛上发布了这个，但还没有答案。也许我在这里缺少 PHP 的东西？

谢谢，亚历克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:52:36.380

使用字符串时缺少引号：

```
$slugreplace="ABC123";
$query = "UPDATE yoo_zoo_item SET alias='$slugreplace' WHERE id=$id"; 
```

问候，

# compiler-construction - 方案中的匿名宏

> ID：14671061
> 
> 赞同：1
> 
> 时间：2013-02-03T09:22:22.533
> 
> 标签：compiler-construction, macros, functional-programming, lisp, scheme

我最近正在学习方案并且对没有标识符就无法评估宏的设计感到好奇，而 lambda(procedure) 可以这样做。

例如，我可以像这样使用匿名 lambda：

```
((lambda x x) 1 2 3) 
```

似乎我必须使用以下语法定义一个宏：

```
(define-macro my-macro (lambda x x)) 
```

我很好奇为什么会有这样的方法直接像这样创建一个宏：

```
(define my-macro (macro-lambda x x)) 
```

我想如果将宏和 lambda 视为不同的类型，第二个可能会更优雅。

我的问题是：

1.  做`define-macro`什么？
2.  宏和 lambda 之间的根本区别是什么？
3.  方案中是否有匿名宏，如果没有，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T13:14:16.213

首先是如何模拟“匿名宏”的示例。然后我将评论有用性。

考虑这个匿名宏转换器，它接受一个表示数字的语法对象并返回一个表示输入数字的双倍的新语法对象。

```
(λ (stx) 
  (datum->syntax stx
    (* 2 (syntax->datum stx)))) 
```

我们可以这样测试：

```
> ((λ (stx) 
    (datum->syntax stx
      (* 2 (syntax->datum stx))))
  #'3) 
```

结果是一个带有 6 的语法对象。

如果我们想要实际的数字 6，我们可以使用`eval`.

```
> (eval ((λ (stx) 
          (datum->syntax stx
            (* 2 (syntax->datum stx))))
        #'3))
6 
```

现在我们使用匿名语法转换器将 3 重写为 6。

匿名宏有用吗？

匿名函数用在你函数的地方，但你只需要一次。如果同一个匿名函数在一个程序中使用了两次，最好给它一个名字，然后引用它两次。

语法转换也是如此。如果您至少需要两次相同的转换，则应为其命名。唯一有意义的匿名语法转换是，如果它只使用一次。在大多数情况下，仅编写转换结果会更简单。我想不出一个例子，匿名转换会使事情变得更简单。

注意：所有示例均在 Racket 中进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:24:20.810

宏在编译时转换树，而其余代码在运行时执行。

通常，这两种操作（宏扩展和 lisp 代码执行）都是处理列表的过程。即，对于宏和过程而言，lambda 没有根本区别，只是它们执行的时间。这意味着会出现一些其他问题，例如命名等。

(define ..) 在运行时执行，所以我认为你的建议不会真正起作用。

所以 defmacro 语法清楚地表明宏是一个普通函数，但在编译时进行评估。宏 lambda 宁愿掩盖这一点。

# c# - 从基类列表访问派生类的字段

> ID：14671063
> 
> 赞同：0
> 
> 时间：2013-02-03T09:22:25.560
> 
> 标签：c#, list, inheritance, syntax, polymorphism

我正在使用 C# 和 XNA 4.0，以及 Farseer 物理引擎（非常类似于 Box2D），并且有一个 Block 类，我从中派生出 OBlock、LBlock 等。

块如下：

```
class Block
{
    public Body m_body;
    public virtual void Draw(SpriteBatch spriteBatch) { }

    public virtual void RemoveBody(World world)
    {
        //world.RemoveBody(m_body);
    }
} 
```

我只放入了这些方法、字段等，因此我可以在列表中访问它们的覆盖版本

所以我的覆盖版本看起来像这样：OBlock.cs

```
class OBlock : Block
{

    private static Texture2D blockImg; //I load this in LoadContent so I don't have loads of Texture2Ds
    public new Body m_body; //Is this right?

    public OBlock(World world, Vector2 position)
    {
        m_body = BodyFactory.CreateBody(world, position); // Create the body, changing it from null
        FixtureFactory.AttachRectangle(Game1.blockSide *2, Game1.blockSide *2, 1.0f, new Vector2(0, 0), m_body); //This bit changes between classes
        m_body.BodyType = BodyType.Dynamic;

    }

    public override void RemoveBody(World world)
    {
        world.RemoveBody(m_body);
    }

    public static void LoadImage(Texture2D tex)
    {
        OBlock.blockImg = tex;
    }

    public override void Draw(SpriteBatch spriteBatch)
    {

        Vector2 position = m_body.Position * Game1.MetreInPixels;
        Vector2 origin = new Vector2(blockImg.Width / 2, blockImg.Height / 2);

        float rotation = m_body.Rotation;

        spriteBatch.Begin();

        spriteBatch.Draw(blockImg, position, null, Color.White, rotation, origin, Game1.BLOCK_SCALE, SpriteEffects.None, 1);

        spriteBatch.End();

        base.Draw(spriteBatch);
    }
} 
```

除了我评论的那一点之外，还有 LBlock、ZBlock 等，它们看起来都非常相似。

然后我把它们都放进去

```
List<Block> blocks //As a field in Game1

blocks = new List<Block>(); // In LoadContent after loading images 
```

我正在尝试做的是访问列表中任何 Block 的 m_body ，无论使用哪种类型

```
blocks[index].m_body.DOSTUFF(); 
```

显然 m_body 总是为空......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:29:12.593

公共新身体 m_body; //这是正确的吗？

不！这声明了第二个存储位 - 所以你有 Block 的 m_body 和 OBlock 的 m_body 并且你只将一个初始化为非空。对 m_body 的特定引用将解析为的确切规则可能太无聊而无法理解。

您可能应该完全删除上面的行并花一些时间熟悉继承的基础知识，例如[http://msdn.microsoft.com/en-gb/library/ms173149.aspx](http://msdn.microsoft.com/en-gb/library/ms173149.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:51:57.433

```
public new Body m_body; 
```

这隐藏了基类的 m_body。所以基本上你是在派生类（不是基类）中定义一个新的 m_body 实例。所以我认为这就是你的基类 m_body 为空的原因，因为它从未被初始化。

因此，请删除该特定行，因为对于每个派生类， m_body 已经定义为所有派生自 Block 类。阅读[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx#vclrfnew_newmodifier)了解更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:34:56.453

```
public new Body m_body; 
```

这个不对。`m_body`来自您的班级`Block`（您应该标记`abstract`btw）在派生自它的所有班级中都是可见的。您现在正在做的事情被称为隐藏（在 imo 中应始终避免），这会导致各种并发症。

您现在已经做到了，每个`OBlock`人都有两个成员`m_body`，一个属于`Block`，一个属于`OBlock`。它使得任何时候你`this.m_body`在你的`OBlock`类中引用，你都在分配`m_body`属于的字段`OBlock`，而不是单独`m_block`声明。`Block`这是隐藏成员带来的奇怪并发症之一：

```
Block myBlock = new OBlock();
// myBlock.m_block is null, because myBlock is of type block, and remember,
// the m_block belonging to Block is never assigned to, only the one belonging
// to OBlock 
```

而这将按预期工作：

```
OBlock myOBlock = new OBlock();
// myOBlock.m_block isn't null, because it was assigned to in the constructor. 
```

所以避免隐藏！消除

```
public new Body m_body; 
```

从你的代码文件中，你很高兴，因为`m_block`声明 in`Block`无论如何都会被所有派生自它的类继承。

# json - 从 JsonObject 获取字符串值

> ID：14671069
> 
> 赞同：2
> 
> 时间：2013-02-03T09:23:24.617
> 
> 标签：json, servicestack

假设我有这些 JSON 字符串：

```
string s1 = "{\"foo\":\"wh\"o\"a\"}";
string s2 = "{\"foo\":{\"bar\":123}}"; 
```

我想以字符串格式获取 foo 的值，所以我想从 s1 中获取`"wh\"o\"a"`并从 s2中获取`"{\"bar\":123}"`。但是，如果我这样做

```
JsonObject j = JsonObject.Parse(s1);
string foo = j.Get("foo"); 
```

foo 包含`"wh"`来自 s1 和`"{"`来自 s2。如何使用 JsonObject 获取 JSON 字段的原始字符串值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:49:01.047

第一个字符串不是有效的 JSON，它可能应该是：

```
string s1 = "{\"foo\":\"wh\\\"o\\\"a\"}"; 
```

`JsonObject.Get`返回一个转义的 JSON 字符串，如果你想要一个未转义的字符串，你需要调用`JsonObject.GetUnescaped`，例如：

```
string s1 = "{\"foo\":\"wh\\\"o\\\"a\"}";
string s2 = "{\"foo\":{\"bar\":123}}";

JsonObject.Parse(s1).GetUnescaped("foo").Print(); //  wh\"o\"a
JsonObject.Parse(s2).GetUnescaped("foo").Print(); // {"bar":123} 
```

# php - Facebook PHP SDK FQL 不起作用

> ID：14671070
> 
> 赞同：0
> 
> 时间：2013-02-03T09:23:29.850
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

我有一个 Facebook 应用程序，它显示了朋友在 Facebook 上创建的所有事件的计数。我使用 FQL 返回数字。它在 2 月 1 日之前工作正常，我想它由于本月的滚动更改而停止工作，但我无法在文档中找到有关 FQL 协议的任何内容。这是以前的工作：

```
$timestamp = time(); // Get current Unix time
$iso8601 = date('c', $timestamp); // Convert unix time to ISO8601

// FQL Multiquery
$fql_query = '{"allFriends":"SELECT+uid2+FROM+friend+WHERE+uid1=me()",' 
          .'"allEvents":"SELECT+eid+FROM+event_member+WHERE+uid+IN+(SELECT+uid2+FROM+#allFriends)+AND+start_time>=\''.$iso8601.'\'",'
          .'"creators":"SELECT+creator+FROM+event+WHERE+eid+IN+(SELECT+eid+FROM+#allEvents)"}'
          . '&access_token=' . $access_token;
// Get FQL through Graph API call
    $fql = $facebook->api('/fql?q=' . $fql_query); 
```

但是现在当脚本运行时，我收到了这个异常：

> FacebookApiException: OAuthException: (#601) 解析器错误：位置 0 处出现意外的“{”。

我应该改变什么来解决它？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:01:07.673

Well I never figured out how to fix the multi-query in the question, but I did workout a workaround if anyone is having the same problem. I had to make two separate fql calls and used the output to accomplish my task. Here is the code:

```
$timestamp = time(); // Get current Unix time
$iso8601 = date('c', $timestamp); // Convert unix time to ISO8601

// FQL Queries
//Select Events created by user's Friends
$fql_query = 'SELECT+creator+FROM+event+WHERE+eid+IN+' .
'(SELECT+eid+FROM+event_member+WHERE+start_time>=\'' . 
$iso8601.'\'+AND+uid+IN+(SELECT+uid2+FROM+friend+WHERE+uid1=me()))' . 
&access_token=' . $access_token;

$fql = $facebook->api('/fql?q=' . $fql_query);

// Get friend_count from user table 
$fql_query2 = 'SELECT+friend_count+FROM+user+WHERE+uid=me()' . 
&access_token=' . $access_token;

$fql2 = $facebook->api('/fql?q=' . $fql_query2); 
```

I know it isn't very efficient and definitely ugly, so if anyone has a way to fix my original problem, I'll gladly accept that answer.

Robert

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T11:41:40.647

这对我有用：

```
$fql = 'SELECT current_location FROM user WHERE uid = me()';
$result = client->api('/fql', 'GET', ['q' => $fql, 'access_token' => 'access-token-here']); 
```

# java - 将长值放入 JSONArray

> ID：14671077
> 
> 赞同：0
> 
> 时间：2013-02-03T09:23:50.753
> 
> 标签：java, numbers, arrays

我正在尝试在 JSONArray 中输入一个长值（毫秒），如下所示：

```
 long epoc = 1359231233L;
         long milli = epoc*1000;
         System.out.println(milli);
         JSONArray arr = new JSONArray();
         arr.put((Long)epoc*1000);
         System.out.println(arr.toString()); 
```

输出是：

```
1359231233000
[1.359231233e12] 
```

我不想要数组中的指数值，我怎样才能让它显示实际的长值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:26:43.620

> 我不想要数组中的指数值，我怎样才能让它显示实际的长值？

您看到的表格*不在*数组中。它是由`toString`. 数组中的实际值是 a `Long`，而不是字符串。

如果您想在不使用指数表示法的情况下获得该数字的字符串形式，我希望您必须编写自己的长字符串例程（或者找到一个，可能在 Apache commons 或类似中）。

请注意，指数形式是完全可以接受的[JSON](http://json.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:31:33.560

`Long.toString()`应该给你你想要的格式的数字。

```
 long epoc = 1359231233L;
 long milli = epoc*1000;
 System.out.println(milli);
 JSONArray arr = new JSONArray();
 arr.put(Long.toString((Long)epoc*1000));
 System.out.println(arr.toString()); 
```

# objective-c - 日期范围与其他日期范围的重叠

> ID：14671078
> 
> 赞同：3
> 
> 时间：2013-02-03T09:23:51.563
> 
> 标签：objective-c, xcode4.5

晚上好，

我试图弄清楚如何通过比较日期范围来计算日期范围之间的天数。例如，我有三个给定的范围：

```
range_1 01/01/2001 to 01/01/2002
range_2 01/02/2002 to 01/01/2003
range_3 01/02/2003 to 01/01/2004 
```

如果我将 my_date_range 12/12/2001 到 01/05/2002 与上述范围进行比较，结果应该显示 range_1 和 my_date_range 之间有 19 天，range_2 和 my_date_range 之间有 5 天，range_3 和 my_date_range 之间有0天。

在 Excel 中这很容易，我只需使用：

```
=SUMPRODUCT(ISNUMBER(MATCH(ROW(INDIRECT(A1&":"&B1)),ROW(INDIRECT($C$1&":"&$D$1)),0))*1) 
```

其中 A1 和 B1 是用户输入的开始日期和结束日期，C1 和 D1 是三个日期范围之一。然后我将使用相同的公式并将 A1 和 B1 与第二个日期范围进行比较，然后是第三个。

但这如何翻译成objective-c？（我能够比较两个日期并获得它们之间的天数。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T11:00:38.837

首先，您必须将日期字符串转换为`NSDate`值：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM/dd/yyyy"];

NSDate *range1Start = [dateFormatter dateFromString:@"01/01/2001"];
NSDate *range1End   = [dateFormatter dateFromString:@"01/01/2002"];

NSDate *userStart   = [dateFormatter dateFromString:@"12/12/2001"];
NSDate *userEnd     = [dateFormatter dateFromString:@"01/05/2002"]; 
```

然后您可以计算重叠间隔：

```
NSDate *overlapFrom = [range1Start laterDate:userStart];
NSDate *overlapTo   = [range1End earlierDate:userEnd]; 
```

最后是重叠间隔的开始日期和结束日期之间的天数：

```
NSInteger days;
if ([overlapFrom compare:overlapTo] > 0) {
    // Date ranges do not overlap
    days = 0;
} else {
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *comp = [calendar components:NSDayCalendarUnit fromDate:overlapFrom toDate:overlapTo options:0];
    days = [comp day];
}
NSLog(@"%ld", (long)days); 
```

在此示例中，输出为`20`，因为 12/12/2001 和 01/01/2002 之间的差异是 20 天。`1`如果应该计算重叠范围的开始日和结束日，则必须添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-04T17:27:05.380

根据 Martin 的回答确定开始/结束日期后，您可以使用以下`intersection(with)`功能`DateInterval`：

```
let interval1 = DateInterval(start: start1, end: end1)
let interval2 =  DateInterval(start: start2, end: end2)
let intersection = interval1.insection(with: interval2) 
```

如果您只想检查重叠，这也很有帮助`interval1.intersects(interval2)`。

# c# - 无法在 MVC 3、Visual Studio 2010 中使用 PagedList.Mvc

> ID：14671081
> 
> 赞同：4
> 
> 时间：2013-02-03T09:24:16.643
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, visual-studio-2010

我正在使用 Visual Studio 2010 构建 MVC 3 Web。我想分页数据，所以我使用 PagedList。它运作良好。现在，我需要在页面之间创建导航，我使用 PagedList.Mvc 为其获取 HtmlHelper。从 Nuget 添加后，一切都很好，我成功构建了它。当我运行时，它会向我显示一条`Compilation error`消息：

**编译器错误消息：** `CS1705: Assembly 'PagedList.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=abbb863e9397c5e1' uses 'System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' which has a higher version than referenced assembly 'System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'`

我现在该怎么办？如何使用 PagedList.Mvc？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T09:28:20.457

您安装的 NuGet 似乎需要 ASP.NET MVC 4.0 附带的 Razor 2.0。ASP.NET MVC 3 使用 Razor 1.0。因此，请确保安装`PagedList.Mvc`与 ASP.NET MVC 3.0 兼容的 NuGet 版本。例如，您可以使用[`3.18.0.0`](http://nuget.org/packages/PagedList.Mvc/3.18.0.0)与 Razor 1.0 兼容的版本。

要强制为给定的 Nuget 安装特定版本而不是使用最新版本，您可以在 NuGet 控制台中键入以下命令：

```
Install-Package PagedList.Mvc -Version 3.18.0.0 
```

# objective-c - 关于 Objective-C 中的“+className”？

> ID：14671084
> 
> 赞同：-3
> 
> 时间：2013-02-03T09:24:37.980
> 
> 标签：objective-c

> **可能重复：**
> [Objective-C 中函数名前的“+”和“-”之间的区别](https://stackoverflow.com/questions/2611419/difference-between-and-before-function-name-in-objective-c)

Objective-C 中的“+className”是什么意思？+className 是类方法名。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:57:24.280

在您引用的[类集群文档中，](http://developer.apple.com/library/ios/#documentation/general/Conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html) *+className...*只是可用于创建类集群实例的各种类方法的占位符，例如`numberWithChar`, `numberWithInt`... for `NSNumber`。

`-className`这与 的实例方法无关`NSObject`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-03T09:28:03.540

从[文档](http://developer.apple.com/library/ios/#documentation/general/Conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html)：

> 真正的子类：一个示例 假设您要创建一个`NSArray`名为 MonthArray 的子类，它返回给定其索引位置的月份的名称。但是，MonthArray 对象实际上不会将月份名称数组存储为实例变量。相反，返回给定索引位置 ( `objectAtIndex:`) 的名称的方法将返回常量字符串。因此，无论应用程序中存在多少个 MonthArray 对象，都只会分配十二个字符串对象。
> 
> MonthArray 类声明为：

```
#import <foundation/foundation.h>
@interface MonthArray : NSArray

+ (id)monthArray;
- (unsigned)count;
- (id)objectAtIndex:(unsigned)index;

@end 
```

> 请注意，MonthArray 类没有声明`init...`方法，因为它没有要初始化的实例变量。和方法简单地覆盖了继承的原始方法`count`，`objectAtIndex:`如上所述。
> 
> MonthArray 类的实现如下所示：

```
#import "MonthArray.h"

@implementation MonthArray

static MonthArray *sharedMonthArray = nil;
static NSString *months[] = { @"January", @"February", @"March",
    @"April", @"May", @"June", @"July", @"August", @"September",
    @"October", @"November", @"December" };

+ (id)monthArray
{
    if (!sharedMonthArray) {
        sharedMonthArray = [[MonthArray alloc] init];
    }
    return sharedMonthArray;
}

- (unsigned)count
{
    return 12;
}

- (id)objectAtIndex:(unsigned)index
{
    if (index >= [self count])
        [NSException raise:NSRangeException format:@"***%s: index
            (%d) beyond bounds (%d)", sel_getName(_cmd), index,
            [self count] - 1];
    else
        return months[index];
 }

@end 
```

> 因为 MonthArray 覆盖了继承的原始方法，所以它继承的派生方法将正常工作而不会被覆盖。`NSArray`的`lastObject`, `containsObject:`, `sortedArrayUsingSelector:`,`objectEnumerator`和其他方法对 MonthArray 对象没有问题。

# matlab - 在matlab中跳过文件头

> ID：14671085
> 
> 赞同：1
> 
> 时间：2013-02-03T09:24:58.820
> 
> 标签：matlab

我的文件格式是 *.Vt2 ，它是强烈的地震动记录。
可以在[http://peer.berkeley.edu/smcat/search.html](http://peer.berkeley.edu/smcat/search.html)
下载 选择地震然后下载任意台站的记录。数据如下：

**同行强运动数据库记录。太平洋工程公司加工。
台湾 SMART1 (45) 86 年 11 月 14 日，SMART1 C00，以
CM/S 为单位的 EW 速度时间历史。过滤点：HP=0.1 Hz LP=25.0 Hz
NPTS= 4000, DT= .01000 SEC
.9437205E-03 .1497919E-01 .3328475E-01 .5111011E-01
.6865002E-01 .86591206E-01 .90757 +00 .1168364E+00 .1217983E+00
.1135203E+00 .8993586E-01 .6435175E-01 .3819334E-01 .1840042E-01**

我想要做的是跳过 4 个标题并读取数字（按行），然后将它们保存在 N×1 矩阵 M 中。但我不知道如何制作。任何帮助都是问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:55:21.617

我相信你可以试试这个：

```
fid = fopen(filename,'r');
A = textscan(fid,'%f%f%f%f%f','Delimiter',',','headerLines',4);
data = cat(2,A{:}); 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:37:34.150

尝试：

```
x=importdata('filename.txt'); 
```

您的数据将是：

```
x.data 
```

# android - 是否可以向 Android 应用程序发送消息？

> ID：14671086
> 
> 赞同：0
> 
> 时间：2013-02-03T09:25:03.417
> 
> 标签：android, send, messages

我想向我的用户发送一些信息消息或远程禁用我的 Android 应用程序。

我想知道是否可以从我的服务器向我的 android 应用程序发送消息（不是 SMS）。是的，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:27:24.773

以前的[Android Cloud to Device Messaging (C2DM)](https://developers.google.com/android/c2dm/)（现为[Google Cloud Messaging for Android](http://developer.android.com/google/gcm/index.html)）是一项服务，可帮助开发人员将数据从服务器发送到他们在 Android 设备上的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:29:12.613

过去有[Cloud 2 Device Messaging Frameword C2DM](https://developers.google.com/android/c2dm)。它已被[Google Cloud Messaging for Android](http://developer.android.com/guide/google/gcm/index.html)取代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:31:46.850

您还可以将 xmpp 用于该 Documention Found xmpp.org/

# python - 如何跟踪极慢的物体

> ID：14671091
> 
> 赞同：1
> 
> 时间：2013-02-03T09:25:23.863
> 
> 标签：python, opencv

使用 OpenCV 和 python 2.7，我编写了一个脚本，用于检测和标记来自网络摄像头的流中的运动。为了检测图像中的运动，我像这样在 openCV 中使用 RunningAvg 函数。. .

```
cv.RunningAvg(img, running_avg, 0.500, None)
cv.AbsDiff(img, running_avg, difference) 
```

整个脚本运行良好，但我很难对其进行微调以拾取微妙的动作（例如呼吸）。我希望能够专门针对慢动作呼吸。我希望能够在不提前知道目标颜色或大小等信息的情况下做到这一点。我想知道是否有另一种更适合拾取微妙动作的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:15:10.473

我认为您可能应该将运行平均值参数更改为喜欢`0.01` ，因为这`0.5`意味着运行平均值是最后一帧的一半。

这是假设呼吸是帧中唯一的运动。如果有较大的运动或相机正在移动，您将需要一个更具适应性的基线。

# python - abc.abstractmethod + 属性

> ID：14671095
> 
> 赞同：4
> 
> 时间：2013-02-03T09:26:17.477
> 
> 标签：python, properties, abc

根据[文档](http://docs.python.org/3.3/whatsnew/3.3.html#abc)，它应该可以结合起来`@property`，`@abc.abstractmethod`因此以下内容应该在 python3.3 中工作：

```
import abc

class FooBase(metaclass=abc.ABCMeta):

    @property
    @abc.abstractmethod
    def greet(self):
        """ must be implemented in order to instantiate """
        pass

    @property
    def greet_comparison(self):
        """ must be implemented in order to instantiate """
        return 'hello'

class Foo(FooBase):
    def greet(self):
        return 'hello' 
```

测试实现：

```
In [6]: foo = Foo()
In [7]: foo.greet
Out[7]: <bound method Foo.greet of <__main__.Foo object at 0x7f935a971f10>>

In [8]: foo.greet()
Out[8]: 'hello' 
```

所以它显然不是一个属性，因为它应该像这样工作：

```
In [9]: foo.greet_comparison
Out[9]: 'hello' 
```

也许我太笨了，或者它根本不起作用，有人有想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T09:38:09.940

如果你想`greet`成为一个属性，你仍然需要`@property`在你的实现中使用装饰器：

```
class Foo(FooBase):
    @property
    def greet(self):
        return 'hello' 
```

ABC 元类所做的只是测试您是否在具体类中提供了相同的名称；它不关心它是方法、属性还是常规属性。

因为它不在乎，所以它也不会神奇地应用`property`装饰器。这是一件*好事*；也许在特定的实现中，静态属性足以满足要求，而属性将是矫枉过正。

ABC 元类的目的是帮助您发现实现中的差距；它从来没有打算强制执行属性的类型。

请注意，在 Python 3.3 之前，您不能将 a`@property`与`@abstractmethod`. 您将不得不使用[`@abstractproperty`装饰器](http://docs.python.org/3/library/abc.html#abc.abstractproperty)。在这种情况下，当您的属性需要的不仅仅是一个简单的 getter 时，就会出现歧义；Python 3.3 更好地涵盖了这种情况（有关痛苦的细节，请参阅[issue 11610](http://bugs.python.org/issue11610)）。

# c# - c#动态和扩展方法解决方案？

> ID：14671096
> 
> 赞同：2
> 
> 时间：2013-02-03T09:26:42.020
> 
> 标签：c#, .net, dynamic, reflection

我有一个`Base class`调用方法（通过反射到*另一个*方法）。

```
 type.InvokeMember(context.Request["MethodName"],
                    System.Reflection.BindingFlags.InvokeMethod | System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance, 
                    null, 
                    this, 
                    new object[] { context, Jobj });   //  jObj is dynamic 
```

**jObj**参数类型为`dynamic`（不能更改此类型）。

如果`MethodName`字符串值为：“ `getFinanceDetails`”，则调用该方法..

```
void getFinanceDetails(object contextObj, dynamic obj)
{

  //Here I need to do obj["Inv_num"].ToString().Decrpyt()   ( my extension method).
  //but it goes Bang cause I cant use extension method for dynamic.
  //But I cant also send it decrypted from base cause not all values are encrpyrted.

} 
```

但是 - 我确实通过使用（在方法内部）解决了它：

```
((object) obj["Inv_num"]).ToString().Decrypt(); 
```

但我不想每次都投射到 object ，只是为了启用扩展方法。

我可以通过*发送参数类型*来解决它吗？

**我的愿望 ：**

我希望能够做到： ~~`obj.ToString().Decrpyt()`~~ `obj["Inv_num"].ToString().Decrpyt()`

# 编辑

```
 public static string Decrypt(this string obj)
        {
            Func<string, string> Decrypt = Encryptions.GetDecryptedCode;
            return Decrypt(obj);

        } 
```

*   obj（**在这种情况下**是`IDictionary<string , object>`）。所以我应该能够读取属性。（此示例中的 inv_num。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T09:39:39.067

可能不完全是您正在寻找的语法，但您可以将扩展方法称为动态对象上的简单静态方法：

```
void getFinanceDetails(object contextObj, dynamic obj)
{
    var decryptedValue = MyExtensions.Decrypt(obj);
} 
```

这显然假设在运行时`obj`是您的扩展方法操作的正确类型。在您的问题中，您已经展示了一些`obj["Inv_num"]`好像是具有称为字符串`obj`类型的属性的复杂类型。`Inv_num`因此，您可能需要调整正确类型的调用：

```
var decryptedValue = MyExtensions.Decrypt(obj["Inv_num"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T09:41:38.850

假设`obj["Inv_num"].ToString()`已经返回正确的值，您可以分两步轻松完成：

```
string text = obj["Inv_num"].ToString();
var decrypted = text.Decrypt(); 
```

老实说，尚不清楚为什么`getFinanceDetails`（应更改为遵循 .NET 命名约定）不能写成：

```
void getFinanceDetails(object contextObj, IDictionary<string, object> obj)
{
    var decrypted = obj["Inv_num"].ToString().Decrypt();
} 
```

您是否需要使用*未*实现的东西来调用它`IDictionary<string, object>`？

# magento - Magento：在 view.phtml 中包含自定义块

> ID：14671103
> 
> 赞同：1
> 
> 时间：2013-02-03T09:28:01.987
> 
> 标签：magento, block, php

我根据本教程创建了一个块：http: [//www.gravitywell.co.uk/blog/post/how-to-creating-your-own-custom-block-in-magento](http://www.gravitywell.co.uk/blog/post/how-to-creating-your-own-custom-block-in-magento)。现在我需要在我的产品视图页面上使用我的manufacturerblock.phtml（就在靠近产品描述文本的地方）。

在`local.xml`（下`<reference name="header">`）我添加了：（编辑：我也试过`<reference name="product.info">`在`<catalog_product_view>`

```
<block type="aimitmanufacturerblock/manufacturerblock" name="manufacturerblock" as="manufacturerblock" template="aimitmanufacturerblock/manufacturerblock.phtml" /> 
```

我用`<?php echo $this->getChildHtml('manufacturerblock')?>`在我的`view.phtml`.

但似乎不包括 phtml。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:49:48.487

如果要使用 in 中的块`catalog/product/view.phtml`，则需要`product.info`在`catalog_product_view`句柄中引用。我可以假设模块被激活，类别名被声明，类被创建并且缓存被刷新

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T09:57:42.317

**编辑**：抱歉，我应该按照您首先提供的教程的链接进行操作，我看到这都是关于创建新的块类型！但是，我暂时留下我的答案 - 为什么你需要创建一个新的块类型，有很多内置的块类型？Clockworkgeek 的这个答案也可能对您有用；

[在 Magento 中创建一个新块](https://stackoverflow.com/questions/4378329/create-a-new-block-in-magento)

**原始答案；**

问题是你的块类型 - 块类型不像你自己定义的变量，有特定的内置 Magento 块类型用于实例化适当的类。此 SO 线程将对您进行进一步解释；

[了解 Magento 块和块类型](https://stackoverflow.com/questions/6633307/understanding-magento-block-and-block-type)

有关块类型的另一个很好的解释，请阅读这个；

[Magento 主题中左栏的块类型是什么？](https://stackoverflow.com/questions/4287226/what-block-type-for-left-column-in-magento-theme)

# grails - Grails Fixtures / Build Test Data 插件在单元测试中不起作用

> ID：14671105
> 
> 赞同：2
> 
> 时间：2013-02-03T09:28:09.653
> 
> 标签：grails, fixtures

我正在尝试在服务单元测试中使用[Grails Fixtures Plugin 。](http://grails.org/plugin/fixtures)我正在使用 grails 2.2。

我的 BuildConfig.groovy 中有下一个代码

```
plugins {
    compile ":fixtures:1.2"
    compile ":build-test-data:2.0.3"
    ...
    ..
    .
} 
```

最初我尝试过

```
@TestFor(HotelService)
@Mock([Place])
class HotelServiceTests {
    def fixtureLoader 

    void testFixturesInUnitTests() {
        def fixture = fixtureLoader.build {
            hotel(Place, name: "Hotel Hilton")
        }
    }
} 
```

上述测试失败：

```
|  java.lang.NullPointerException: Cannot invoke method build() on null object 
```

通过 Google 搜索，我在[Grails 用户邮件列表](http://grails.1312388.n4.nabble.com/Grails-user-f1312389.html)中发现，fixtureLoader 必须在单元测试中显式创建。

```
 import grails.plugin.fixtures.*

  @TestFor(HotelService)
    @Mock([Place])
    class HotelServiceTests {
        def fixtureLoader 
        def grailsApplication

        @Before 
        void setUp() {
            fixtureLoader = new FixtureLoader(grailsApplication)
        }

        void testFixturesInUnitTests() {
            def fixture = fixtureLoader.build {
                hotel(Place, name: "Hotel Hilton")
            }
        }
    } 
```

测试失败，出现下一个错误：

```
 java.lang.NullPointerException: Cannot invoke method hasGrailsPlugin() on null object
    at grails.plugin.fixtures.builder.FixtureBuilder.lookForBuildTestDataPlugin(FixtureBuilder.groovy:53)
    at grails.plugin.fixtures.builder.FixtureBuilder.<init>(FixtureBuilder.groovy:49)
    at grails.plugin.fixtures.Fixture.createBuilder(Fixture.groovy:75)
    at grails.plugin.fixtures.Fixture.build(Fixture.groovy:44)
    at grails.plugin.fixtures.FixtureLoader.build(FixtureLoader.groovy:46) 
```

另一个谷歌搜索，我发现了一个“黑客”来避免以前的错误。

```
 import grails.plugin.fixtures.*
 import org.codehaus.groovy.grails.plugins.GrailsPluginManager
 import org.codehaus.groovy.grails.plugins.PluginManagerHolder

 @TestFor(HotelService)
    @Mock([Place])
    class HotelServiceTests {
        def fixtureLoader 
        def grailsApplication

        @Before 
        void setUp() {
            fixtureLoader = new FixtureLoader(grailsApplication)
            PluginManagerHolder.pluginManager = [hasGrailsPlugin: { String name -> true }] as GrailsPluginManager 
        }

        void testFixturesInUnitTests() {
            def fixture = fixtureLoader.build {
                hotel(Place, name: "Hotel Hilton")
            }
        }
    } 
```

现在我收到下一个错误：

```
java.lang.NullPointerException: Cannot invoke method isDomainClass() on null object
    at grails.plugin.fixtures.buildtestdata.BuildTestDataBeanDefinitionTranslator.translate(BuildTestDataBeanDefinitionTranslator.groovy:54)
    at grails.plugin.fixtures.buildtestdata.BuildTestDataBeanDefinitionTranslator.translate(BuildTestDataBeanDefinitionTranslator.groovy:43)
    at grails.plugin.fixtures.builder.FixtureBuilder.translateToBuild(FixtureBuilder.groovy:126)
    at grails.plugin.fixtures.builder.FixtureBuilder.invokeMethod(FixtureBuilder.groovy:121)
    at com.softamo.movilrural.TopRuralScraperServiceTests$_testFixturesInUnitTests_closure2.doCall(TopRuralScraperServiceTests.groovy:26) 
```

我不知道如何解决这个问题。任何反馈都非常受欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-02T14:14:59.947

该`fixtureLoader.build()`方法与[Build Test Data 插件](http://grails.org/plugin/build-test-data)集成。固定装置插件旨在与集成测试结合使用。

另请参阅此问题[http://jira.grails.org/browse/GPFIXTURES-21](http://jira.grails.org/browse/GPFIXTURES-21)。注释将`@TestFor`test 标记为单元，因此您需要将其删除。

文件`/test/integration/com.example/HotelServiceTests.groovy`

```
 class HotelServiceTests extends GroovyTestCase {
        FixtureLoader fixtureLoader
        Fixture fixture
        void setUp() {
            fixture = fixtureLoader.load {
                build {
                    hotel(Place, name: "Hotel Hilton")
                }
            }
        }

        void testFixturesInUnitTests() {
            // given:
            HotelService service = new HotelService()
            // when:
            List<Place> hotels = service.list()
            // then:
            assert hotels.size() == 1
            assert hotels[0] == fixture.hotel
        }
    } 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:45:52.483

我并不是真正的夹具加载器专家，但似乎您只是调用了错误的方法（*build*而不是*load*）。

```
@TestFor(HotelService)
@Mock([Place])
class HotelServiceTests {
    def fixtureLoader 

    void testFixturesInUnitTests() {
        def fixture = fixtureLoader.load {
            hotel(Place, name: "Hotel Hilton")
        }
    }
} 
```

我还没有尝试过，但是您可以在这里查看夹具加载器的用法：[Grails Fixtures Plugin - 参考文档](http://gpc.github.com/grails-fixtures/docs/guide/1.%20Introduction.html#1.1%20How%20It%20Works)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T03:18:07.090

没有真正的方法来支持在 Grails 单元测试中使用fixtures 插件。

您可以使用 BuildTestData 插件来实现相同的目标，该插件提供了支持 UnitTests 的 @Build 注释。

# f# - F# 函数参数

> ID：14671106
> 
> 赞同：3
> 
> 时间：2013-02-03T09:28:14.320
> 
> 标签：f#

我这里有两行代码：

```
let stuff _ _ = MessageBox.Show("This is doing stuff") |> ignore
let stuffHandler = new EventHandler(stuff) 
```

我刚开始使用 F#，想知道如果我从 stuff 变量中删除下划线，为什么代码无法编译？据我所知，下划线意味着忽略某些东西，那么这里应该忽略什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T09:36:19.170

[EventHandler](http://msdn.microsoft.com/en-gb/library/system.eventhandler.aspx)委托需要一个具有 2 个参数的函数，即发送者和 EventArgs 。

# c# - SslStream.AuthenticateAsServer 异常 - 服务器模式 SSL 必须使用具有关联私钥的证书

> ID：14671112
> 
> 赞同：1
> 
> 时间：2013-02-03T09:28:56.720
> 
> 标签：c#, proxy, ssl-certificate, tcplistener, sslstream

我正在开发一个类似于 CCProxy 的代理服务器应用程序。它适用于 HTTP 但不适用于 HTTPS。当在 SslStream 对象上调用 AuthenticateAsServer() 方法时，它会抛出异常。我也不知道我是否提供了正确的证书，我不知道如何创建证书。我刚刚提供了我在网上下载的代码附带的证书。这是代码：

```
 private static void DoHttpProcessing(TcpClient client)
    {
        Stream clientStream = client.GetStream();
        Stream outStream = clientStream; 
        SslStream sslStream = null;
        StreamReader clientStreamReader = new StreamReader(clientStream);
        CacheEntry cacheEntry = null;
        MemoryStream cacheStream = null;

        if (Server.DumpHeaders || Server.DumpPostData || Server.DumpResponseData)
        {
            Monitor.TryEnter(_outputLockObj, TimeSpan.FromMilliseconds(-1.0));
        }

        try
        {
            //read the first line HTTP command
            String httpCmd = clientStreamReader.ReadLine();
            if (String.IsNullOrEmpty(httpCmd))
            {
                clientStreamReader.Close();
                clientStream.Close();
                return;
            }
            //break up the line into three components
            String[] splitBuffer = httpCmd.Split(spaceSplit, 3);

            String method = splitBuffer[0];
            String remoteUri = splitBuffer[1];
            Version version = new Version(1, 0);

            HttpWebRequest webReq;
            HttpWebResponse response = null;
            if (splitBuffer[0].ToUpper() == "CONNECT")
            {

                remoteUri = "https://" + splitBuffer[1];
                while (!String.IsNullOrEmpty(clientStreamReader.ReadLine())) ;
                StreamWriter connectStreamWriter = new StreamWriter(clientStream);
                connectStreamWriter.WriteLine("HTTP/1.0 200 Connection established");
                connectStreamWriter.WriteLine(String.Format("Timestamp: {0}", DateTime.Now.ToString()));
                connectStreamWriter.WriteLine("Proxy-agent: matt-dot-net");
                connectStreamWriter.WriteLine();
                connectStreamWriter.Flush();

                sslStream = new SslStream(clientStream, false);

                try
                {
             // HERE I RECEIVE EXCEPTION
                    sslStream.AuthenticateAsServer(_certificate, false, SslProtocols.Tls | SslProtocols.Ssl3 | SslProtocols.Ssl2, true);

                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                    sslStream.Close();
                    clientStreamReader.Close();
                    connectStreamWriter.Close();
                    clientStream.Close();
                    return;
                }//further code goes here... 
```

此外，如果我使用 ssStream.AuthenticateAsClient 方法而不是 sslStream.AuthenticateAsServer，则会收到 AuthenticationException 并显示消息“对 SSPI 的调用失败，请参阅内部异常”。并且 InnerException 将消息显示为“收到的消息意外或格式错误”

当我使用 sslstream.AuthenticateAsServer() 方法时，我需要为每个新的 HTTPS 主机创建证书并使用此方法传递它。如果我提供自签名证书，则请求成功。但问题是，对于多少个新的 HTTPS 请求，我将继续手动创建证书并将其分配给 AuthenticateAsServer()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:47:41.337

对于服务器端证书，*大多数*证书对应于 FQDN（因此 server1.localhost.local），尽管可以有通配符证书 (*.localhost.local)。当您使用 AuthenticateAsClient 方法时，这可能是两件事之一，1）证书没有用于客户端身份验证的扩展密钥用法或 2）您没有传递正确的密码来读取证书/私钥。为了快速克服这两个障碍，我建议创建一个 OpenSSL CA，然后生成一个 CA 和服务器证书。有大量关于如何执行此操作的文档，对于以前从未创建过文档的人来说，最多需要 30 分钟......（另外我建议将证书导出到 pkcs12 扩展中，以便 CA 与服务器证书链接）。

# javascript - 实时将文本添加到语音气泡中

> ID：14671113
> 
> 赞同：0
> 
> 时间：2013-02-03T09:28:59.407
> 
> 标签：javascript, html, css

我有一个将形成 html 页面背景的图像，我想在它上面叠加语音气泡。我已经想出了如何用 css 制作气泡，并设置它们的位置。但我无法弄清楚我将如何填充气泡（div 元素）。文本消息将填充文件，我需要获取字符串并将它们显示在气泡中，并在消息进入时刷新气泡内容。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:05:16.287

假设您的一个气泡包含一个如下所示的 DIV：

```
<div id="bubble1">This is the text</div> 
```

您可以使用 Javascript 轻松更改文本内容。推荐使用像 jQuery 这样的 JS 库。这是一个更改文本的代码示例：

```
<script>

$(document).ready(function()
{
  $('#bubble1').text('This is the changed text'); // to change the text
  $('#bubble1').html('This has <b>some</b> formatting'); // to change the html
});

</script> 
```

不要忘记将 jQuery 本身包含在如下行中：

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
```

我不明白你从哪里得到你的字符串，如果你让我知道，我可以更新答案。

如果您不熟悉 jQuery，请看[这里](http://docs.jquery.com/Tutorials)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:05:19.257

我认为这将回答您的问题： http: [//nicolasgallagher.com/pure-css-speech-bubbles/](http://nicolasgallagher.com/pure-css-speech-bubbles/) 请记住，这是 css3，因此较旧的浏览器可能会遇到问题。

# c - 全局变量和静态变量如何在 C 中协同工作？

> ID：14671117
> 
> 赞同：2
> 
> 时间：2013-02-03T09:29:24.003
> 
> 标签：c, static, global-variables

我必须确定该程序的输出（无需在计算机上运行）。我非常不确定全局变量和静态变量如何协同工作。

```
#include <stdio.h>

void f(int d);

int a = 1, b = 2, c = 3, d = 4;

int main()
{
    int a = 5, c = 6;
    f(a);
    f(b);
    f(c);
    printf("%d %d %d %d\n",a,b,c,d);
    return 0;
}

void f(int d)
{
    static int a = 0;
    a = a + 7;
    b = a + d;
    c++;
    d--;
    printf("%d %d %d %d\n",a,b,c,d);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:35:46.887

范围内最近的可见绑定隐藏了所有进一步的绑定。所以在`main`所有名称中都指的是局部变量，并且`f`只有局部变量`a`（尽管是静态的，这是无关紧要的），`d`指的是函数参数，`b`并且`c`指的是全局变量。

您可以使用关键字将更远的名称取消隐藏到有限的扩展`extern`，但是如果有足够的本地范围，您始终可以创建和隐藏从更深的地方永远无法看到的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:32:34.447

局部变量定义总是“隐藏”同名的全局变量。内部范围总是优先于外部范围。当一个变量“遮蔽”另一个变量时，一些编译器也会产生警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:41:14.350

如果使用相同的标识符声明两个变量，则访问引用具有最小范围的变量。

> > ### C11 (n1570), § 6.2.1 标识符的范围
> > 
> > 如果标识符在同一名称空间中指定两个不同的实体，则范围可能重叠。如果是这样，一个实体的范围（内部范围）将严格在另一个实体的范围（外部范围）之前结束。在内部范围内，标识符指定在内部范围内声明的实体；在外部范围内声明的实体在内部范围内隐藏（不可见）。

# android - 如何在 Intellij Idea12 中缩小 Android 设计器视图？

> ID：14671118
> 
> 赞同：7
> 
> 时间：2013-02-03T09:29:32.233
> 
> 标签：android, intellij-idea, zooming, scale, designer

我正在为 Android 开发尝试新的 Intellij Idea 12。

我已经成功导入了我所有的 Eclipse 项目，但我仍然不知道如何缩小设计器视图？

我的笔记本电脑分辨率上的 XHDPI 布局有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T10:15:29.343

我也无法配置它，但我可以找到更好的解决方案，至少对我来说：

`Preview`当您处于 XML 文本模式时，IDE 的右侧有一个选项卡。

单击后，您可以在进行编辑后立即看到您的布局动态变化，也可以从那里放大/缩小。

希望他们能在即将到来的更新中解决这个问题。

[这篇](http://www.jetbrains.com/idea/webhelp/android-layout-preview-tool-window.html)文章帮助了我。

![在此处输入图像描述](../Images/152e87002b96cc4204cfe61fc1597bf9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:48:30.483

IntelliJ IDEA 中的 Android UI Designer 没有任何缩放选项，它始终以 1:1 的比例显示所选设备分辨率。缩放功能仅适用于**预览**（当您手动编辑布局 XML 代码并且**预览**显示在工具窗口中时）。

我没有发现请求此功能，因此欢迎您[提交新票](http://youtrack.jetbrains.net/issues/IDEA)。

# java - 将 JUnitCore ( JUnit ) 更改为 TestNG

> ID：14671122
> 
> 赞同：2
> 
> 时间：2013-02-03T09:31:08.207
> 
> 标签：java, junit, testng

我正在尝试修改以下使用 JUnit 的代码以使用 TestNG。

公共类 AutotestShellRunner {

```
static Class<?> autotestClass;
static org.junit.runner.Result junitResult; ( I replaced that with org.testng.ITestResult )

public static void main(final String[] args) {
    int rc;
    if (args.length != 2) {
        System.err.println("Usage: AutotestShellRunnerDrive  <TEST_SCENARIO_CLASS_NAME> <TEST_CASE>");
        System.exit(-1);
    }

    final String testsuite = args[0];
    final String testcase = args[1];

    try {
        autotestClass = Class.forName(testsuite);
    } catch (final ClassNotFoundException e) {t
        e.printStackTrace();
        throw new RuntimeException("class" + testsuite + " is not found ", e);
    }
    junitResult = (new JUnitCore()).run(Request.method(autotestClass, testcase));  //Now from what i saw i can use instead of JUnitCore I use TestNG

          The problem is that TestNG.run() is not recieving any arguments that I need to pass such as auttestClass and testcase
          Does anyone have any idea?

          Thanks,
          Nir 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:55:16.757

使用 TestNG 的编程 API，[这里是文档](http://testng.org/doc/documentation-main.html#running-testng-programmatically)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:10:36.137

以下帮助，但仍然**不能只运行类中的特定测试**

```
import org.testng.ITestResult;
import org.testng.TestListenerAdapter;
import org.testng.TestNG;
import java.util.Arrays;
import java.util.List;

/**
 * Created with IntelliJ IDEA. User: nir Date: 1/30/13 Time: 4:46 PM To change
 * this template use File | Settings | File Templates.
 */
public class AutoTestNGShellRunner {
    static Class<?> autotestClass;

    public static void main(final String[] args) {
        int rc;
        if (args.length != 2) {
            System.err
                    .println("Usage: AutoTestNGShellRunner  <TEST_SCENARIO_CLASS_NAME> <TEST_CASE>");
            System.exit(-1);
        }

        final String testsuite = args[0];
        final String testcase = args[1];

        try {
            autotestClass = Class.forName(testsuite);

        } catch (final ClassNotFoundException e) {
            e.printStackTrace();
            throw new RuntimeException("class" + testsuite + " is not found ",
                    e);
        }

        TestListenerAdapter tla = new TestListenerAdapter();
        TestNG testng = new TestNG();
        testng.setTestClasses(new Class[] { autotestClass });
        testng.setTestNames(Arrays.asList(testcase));
        testng.addListener(tla);

        testng.run();
        tla.getPassedTests();
        List<ITestResult> failedTestsResults = tla.getFailedTests();
        List<ITestResult> successTestsResults = tla.getPassedTests();

        final int failureCount = failedTestsResults.size();

        if (failureCount == 0) {
            System.out
                    .println(String.format("Test case %s passed", testcase));
            rc = 0;
        } else {
            System.out
                    .println(String.format("Test case %s failed", testcase));
            rc = -1;
        }

        System.exit(rc);
    }
} 
```

# java - 如何在非常大的 XML 文件中快速搜索/索引？

> ID：14671123
> 
> 赞同：2
> 
> 时间：2013-02-03T09:31:28.567
> 
> 标签：java, xml, dom, indexing

假设我有非常大的 XML 文件，其中的条目具有`<id>`标签或`id=""`属性。

如何通过这个 id 搜索？我可以创建一些搜索索引什么的。

目前我正在使用`org.w3.dom`. 它有一些搜索方法吗？

**更新**

我的大 XML 文件是下载的 Wikipedia。它有 40G 大小，拥有数百万条记录。

是否可以使用 Lucene 之类的东西对其进行索引，然后快速搜索 ID？

**更新2**

试过了`BaseX`。它吃掉了我的 XML 并创建了 32Gb 的数据库。不明白它是否截断了数据或 32Gb 是因为一些压缩。

不幸的是，按 ID 搜索需要 70-80 秒或更长时间。所以它比 Mediawiki API 查询要长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:49:04.223

所以为了读写XML文件，你需要先解析里面的数据。有不同类型的解析器，主要有 DOM、SAX、StAX。

我不推荐使用 DOM 解析器进行 XML 解析，尤其是在解析大型 XML 文件时。因为 DOM 解析器首先将所有内容读入您的内存，然后尝试从中读取数据。如果您的 XML 文件非常大，这是非常低效的。SAX 和 StAX 解析器基本上是 DOM 的改进版本。从这里阅读 Java 中的 StAX 解析器

[StAX 解析器教程](http://www.vogella.com/articles/JavaXML/article.html)

我认为 StAX 解析器是最适合读取大型 XML 文件的解析器。

仅供参考，这里也是 SAX 解析器的链接

[Java 中的 SAX 解析器教程](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

# javascript - Backbone + kendoGrid，PUT 不工作

> ID：14671128
> 
> 赞同：0
> 
> 时间：2013-02-03T09:32:03.267
> 
> 标签：javascript, jquery, backbone.js, kendo-ui

我正在尝试将 kendoGrid 集成到主干视图上，这是我的视图代码：

```
App.Views.UsersManager = Backbone.View.extend({
  tagName: 'section',
  id: 'users-manager',
  className: 'tile',
  template: Handlebars.compile($('#profile-usersManager-template').html()),
  render: function () {
    console.log('usersManager.render -> collection', this.collection);
    var self = this;
    this.$el.html(this.template());
    var dataSource = new kendo.data.DataSource({
      transport: {
        read: {
          url: '/users',
          type: 'GET',
          dataType: 'json'
        },
        update: {
          url: '/users',
          type: 'PUT',
          dataType: 'json'
        }
      },
      schema: {
        data: 'data'
      },
      batch: true
    });
    this.$('table.users-manager').kendoGrid({
      scrollable: false,
      sortable: true,
      dataSource: dataSource,
      toolbar: ["save"],
      editable: true,
      navigatable: true,
      // filterable: true,
    });
    return this;
  }
}); 
```

视图正确呈现，并且 kendoGrid 正确地从我的 SlimPHP 框架中获取我的用户数据，但是当我尝试修改网格的元素并点击“工具栏：[”保存“]”提供的“保存更改”按钮时，什么也没有发生了，即使在我的萤火虫控制台上......根本没有服务器通信。

我是剑道（以及骨干）开发的新手，也许我在语法上失败了？：卡住：

**Atanas Korchev 回答后更新** 这是我的 DataSource 更新：

```
var dataSource = new kendo.data.DataSource({
  transport: {
    read: {
      url: '/users',
      type: 'GET',
      dataType: 'json'
    },
    update: {
      url: '/users',
      type: 'PUT',
      dataType: 'json'
    }
  },
  schema: {
    data: 'data',
    model: {
      id: 'id',
      fields: {
        email: {},
        name: {},
        surname: {},
        rank: {},
        type: {}
      }
    }
  },
  batch: true
}); 
```

那不能解决我的问题，我想注意到我的 php 代码实际上是这样的：

```
$app->put('/users', function () use ($app, $db) {
  exit('put ok');
}); 
```

只是为了看看客户端/服务器通信是否有效......我知道这将是一个错误，但我也看不到任何萤火虫错误，比如“保存更改”按钮没有事件......（我会尝试**Dennis Rongo 的**建议..但我不认为是解决方案...)

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:51:16.657

尝试在 DataSource[设置](http://docs.kendoui.com/api/framework/datasource#schemamodel-objectkendodatamodel)中描述您的模型：

```
schema: {
   data: 'data',
   model: {
      id: "MyId"      
   }
} 
```

您至少需要指定`id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:20:25.773

通过从模式对象中删除 data: 'data' 来解决，这里有链接[kendoGrid 批量编辑](http://demos.kendoui.com/web/grid/editing.html)！

# facebook - Facebook Oauth 2.0 授权码会过期吗？

> ID：14671140
> 
> 赞同：0
> 
> 时间：2013-02-03T09:35:06.217
> 
> 标签：facebook, facebook-graph-api, oauth-2.0

Facebook OAuth 访问令牌在指定期限后过期，但 Facebook OAuth 授权码呢？它会过期吗？（不表明是那样？）

参考：

[https://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)

[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#page-8](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#page-8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:50:20.670

授权码有期限。

来自文档：既然您的应用程序已获得用户授权，并且代码参数存储为变量，它应该立即将其交换为用户访问令牌，然后可用于发出 API 请求

以下帖子还提到了通知授权码到期的 facebook 更新：

[OAuthException：此授权码已被使用 - Facebook](https://stackoverflow.com/questions/13752959/oauthexception-this-authorization-code-has-been-used-facebook)

# android - 使用 Wi-Fi 网络在两部 Android 手机之间进行通信

> ID：14671141
> 
> 赞同：3
> 
> 时间：2013-02-03T09:35:11.457
> 
> 标签：android

我想在两部 Android 手机之间进行通信，两部手机都连接到同一个 Wi-Fi 网络。知道 IP 地址后，我可以直接使用套接字与两个设备进行通信，但我的问题是，是否可以在运行时获取 IP 地址？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T09:41:48.937

您可以使用 jmDNS 来实现这一点。这是一个非常有用的库，一旦你检测到所有连接到同一个 wifi 的设备，你就可以获得它们的 ip 和端口，这样你就可以建立连接。[您可以在此处](http://home.heeere.com/tech-androidjmdns.html)了解有关如何使用它的更多信息。

或者您可以使用仅适用于 API 级别 14+ 的 Android Wi-Fi Direct API。以下是有关 API 的更多信息：[Wifi-Direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)。

希望它是您正在寻找的东西！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:30:02.970

您可以使用 Google Android NSD 服务。

查看[http://developer.android.com/training/connect-devices-wireless/nsd.html](http://developer.android.com/training/connect-devices-wirelessly/nsd.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:47:01.573

假设两个设备都在同一个本地网络中，您可以使用/编写一种 ip 扫描器（检查每个 ip 地址是否处于活动状态以及是否尝试连接）。

# jsf - 让 apache shiro 在没有 maven 的情况下在 netbeans 中工作

> ID：14671147
> 
> 赞同：1
> 
> 时间：2013-02-03T09:36:00.610
> 
> 标签：jsf, netbeans, shiro

我想使用 apache shiro 来保护我在 netbeans 中制作的 JSF 应用程序。在将 shiro-core 和 shiro-web jar 文件添加到库并配置 web.xml 和 shiro.ini 后，部署应用程序时出现错误。我想它没有找到课程，但我不知道缺少什么。

web.xml

```
<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher> 
    <dispatcher>FORWARD</dispatcher> 
    <dispatcher>INCLUDE</dispatcher> 
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

shiro.ini

```
[users]
admin = password

[urls]

/admin/** = authBasic 
```

Glassfish 服务器日志：

```
 [#|2013-02-03T10:16:24.138+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=66;_ThreadName=Thread-2;|Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.apache.shiro.web.env.EnvironmentLoaderListener
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:47:39.613

找到原因：Shiro jars 需要 slf4j jars（日志库）。

我将 slf4j-api-1.7.2.jar 和 slf4j-simple-1.7.2.jar 添加到我的（NetBeans）项目库中并且它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:29:57.250

我不熟悉 glassfish，但如果你的类路径搞砸了，我会期待 ClassNotFoundException。如果在侦听器失败的情况下 glassfish 可能会显示此错误，那么问题可能出在您的过滤器配置上。shiro 提供的过滤器是 authcBasic，而不是 authBasic。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T03:11:29.927

我在让 Apache Shiro 在非 Maven 项目中工作时遇到了同样的问题，所以昨天做了一点搜索，发现您必须添加额外的库才能使其正常工作，即使您已经拥有 Shiro 核心和 Shiro 网。

这些是：

commons-beanutils-1.9.2 commons-logging-1.2 slf4j-api-1.7.2 slf4j-simple-1.7.2

我使用 Netbeans 作为我的 IDE，一切正常。您还必须创建 web.xml 和 shiro.ini。

希望它对将来的人有所帮助。

# php - PHP谷歌静态地图V2错误

> ID：14671149
> 
> 赞同：0
> 
> 时间：2013-02-03T09:36:13.360
> 
> 标签：php, google-maps, google-static-maps

我想显示一个带有 3 个标记的静态地图图像，但不知何故它不起作用。它适用于一个标记，但当我添加更多标记时不显示图像。如果我将浏览器指向它，输出 url 会显示一个图像，但似乎在 php 页面中不起作用。

```
<?php
    $lat1=61.212311;
    $lng1=61.211123;
    $lat2=61.421113;
    $lng2=61.411123;
    $lat3=61.931121;
    $lng3=61.912113;
    $url="http://maps.googleapis.com/maps/api/staticmap?size=400x400&markers=color:blue%7Clabel:S%7C".$lat1.",".$lng1."&markers=size:tiny%7Ccolor:green%7C".$lat2.",".$lng2."&markers=size:mid%7Ccolor:red%7Clabel:C%7C".$lat3.",".$lng3."&sensor=false&key=";
    $src = htmlspecialchars($url);
    echo $src;
?>
<html>
<body>
    <img src="<? echo $src; ?>" />
</body>
</html> 
```

我正在输入我的 API 密钥，这不是错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:42:45.783

您正在定义变量`$url1`并使用`$url`，因此请更改：

```
$src = htmlspecialchars($url); 
```

至

```
$src = htmlspecialchars($url1); 
```

并`echo $src;`从顶部移除

# mysql - mysql 一对多表 vs. 键值数据库列表

> ID：14671153
> 
> 赞同：0
> 
> 时间：2013-02-03T09:37:00.577
> 
> 标签：mysql, database, database-design, nosql, database-performance

我正在建立一个评论系统，一个评论可以有很多回复。

如果我要在 mysql 中实现这个，我会建立一个`comments`表，并有列：

*   `comment_id`,
*   `parent_comment_id`.

其中父评论 id 为 0 表示评论，是父评论 id 表示回复。因此，如果我正在寻找对某个评论的回复，我会寻找必须`parent_comment_id`与我正在寻找的评论相匹配的评论。

这对我来说似乎是多余的，因为它需要我遍历整个`comments`表才能找到评论是否有回复（特别是对于大数据），如果我有一个密钥库数据库，我将有一个密钥评论 id，其中包含按日期排序的回复列表。

**那么你认为哪种方法更适合这个问题呢？**

另外，我想将问题概括为任何一对多关系，以将其作为列表存储在密钥库数据库中。如果您推荐使用密钥库数据库，您会推荐哪一个来处理大数据？（我不想为此使用 redis，因为它是在内存中的，我怀疑对评论的回复需要经常访问）。

感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:24:24.030

关系数据库应该可以很好地处理这个“邻接列表”模型。

首先，不要`parent_comment_id`在“root”注释中使用0，使用NULL。然后，您可以构建一个 FOREIGN KEY，`parent_comment_id`以`comment_id`防止您错误地将回复附加到不存在的评论。

> 它需要我浏览整个评论表才能找到评论是否有回复

假设您已索引`parent_comment_id`（如果您在上面创建了 FK，[InnoDB 会自动](https://stackoverflow.com/a/1721893/533120)执行此操作），查找对给定评论的第一级回复将需要索引**范围扫描**。要了解索引范围扫描及其高效的原因，您首先需要了解[SQL 索引的剖析](http://use-the-index-luke.com/sql/anatomy)。

找到第二级需要另一个范围扫描等。不幸的是，MySQL 不支持递归查询，它允许您在单个数据库往返中完成所有这些，但它应该仍然相当有效。

如果您已经进行了**测量**并得出结论这是一个问题，那么还有其他表示层次结构的策略（具有不同的权衡），例如“嵌套集”和“闭包”。看看[Bill Karwin 的这个演讲](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:13:46.213

您可以创建表格并使其更加灵活。

> 评论 => comment_id, the_comment, count_replays
> 
> comments_replay => parent_id, the_comment

当有评论重播时，count_replays 会有更新。

现在如果有重播，你可以做 if 语句，然后才请求它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T13:02:33.757

赞成布兰科的回复。父字段上的索引很好。在这种情况下，NULLS 比零工作得更好。另外，参照完整性约束对您的帮助大于对您的伤害。

几个额外的点。

如果您使用[嵌套集](/questions/tagged/nested-sets "显示标记为“嵌套集”的问题")方法而不是现有的邻接列表方法，您将能够搜索由回复和回复等组成的整个子树，而不仅仅是立即回复。这可能很有用。

其次，有一种称为“森林”的数据结构。这是一个包含一组树的表，其中每棵树都具有作为其根的，在本例中是一个没有父级的注释。网络搜索应该为您提供一些关于设计讨论森林的好文章，其中每个讨论都以评论开始，每个讨论都是回复树。很多人设计的正是这种情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-03T09:42:22.727

事实上，大多数关系数据库不必通过所有评论来找出哪些是给定评论的回复。毕竟这些类型的查询非常频繁并且非常优化。还可以考虑在`parent_comment_id`. 同样，这仅在您拥有单一级别的亲子关系时才有效。如果您可能有评论轮流评论，那么另一种存储数据的方式可能会更好地为您服务。

# android - 如何为自定义 ListView 项目启用默认突出显示？

> ID：14671159
> 
> 赞同：-1
> 
> 时间：2013-02-03T09:38:15.460
> 
> 标签：android

ListView 项目有一个自定义布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="10dip"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

现在，当我按项目单击时，我看不到任何突出显示；我知道我可以使用选择器来做到这一点，但可能有一种简单的方法来启用默认突出显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:41:25.743

是的。删除行：

```
android:background="@android:color/white" 
```

# java - for循环中的Java HashMap“put”方法

> ID：14671164
> 
> 赞同：2
> 
> 时间：2013-02-03T09:39:33.763
> 
> 标签：java

`HashMap`在 for 循环中使用时遇到问题。我做错什么了吗？我有什么需要做的改变吗？下面是代码及其输出。

**代码：**

```
public static void main(String[] args) {

    ArrayList<Double> arrBuckets = new ArrayList<Double>(3);

    HashMap<Integer, ArrayList<Double>> hashMap = new HashMap<Integer, ArrayList<Double>>();

    for(int i=1;i<5;i++)
    {
        arrBuckets.clear();
        arrBuckets.add(0,(1.0*i)) ;
        arrBuckets.add(1,(2.0*i)) ;
        arrBuckets.add(2,(3.0*i)) ;

        hashMap.put(i, arrBuckets);
    }

    System.out.println("hashMap : "+hashMap);
} 
```

**下面是输出：**

```
hashMap : {1=[4.0, 8.0, 12.0], 2=[4.0, 8.0, 12.0], 3=[4.0, 8.0, 12.0], 4=[4.0, 8.0, 12.0]} 
```

**但输出应该是这样的：**

```
hashMap : {1=[1.0, 2.0, 3.0], 2=[2.0, 4.0, 6.0], 3=[3.0, 6.0, 9.0], 4=[4.0, 8.0, 12.0]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T09:41:38.357

当您将一个集合的对象放入另一个集合时，您传递的是对该对象的*引用*，而不是对象本身的副本。您只创建了一个列表，并且将此列表添加了四次。

我建议您将新的 ArrayList 移动到循环内，而不是每次都重用该列表。

你可以写

```
Map<Integer, List<Double>> map = new HashMap<Integer, List<Double>>();
for (int i = 1; i < 5; i++)
    map.put(i, Arrays.asList(1.0 * i, 2.0 * i, 3.0 * i));
System.out.println("map : " + map); 
```

印刷

```
map : {1=[1.0, 2.0, 3.0], 2=[2.0, 4.0, 6.0], 3=[3.0, 6.0, 9.0], 4=[4.0, 8.0, 12.0]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T09:41:34.653

那是因为您总是使用相同的 arrayList ：最后只有一个实例，`ArrayList`它保存最后一次迭代的值。

将循环更改为

```
for(int i=1;i<5;i++)
{
    ArrayList<Double> arrBuckets = new ArrayList<Double>(3);
    arrBuckets.add(0,(1.0*i)) ;
    arrBuckets.add(1,(2.0*i)) ;
    arrBuckets.add(2,(3.0*i)) ;

    hashMap.put(i, arrBuckets);
} 
```

# php - 基于 ZF2 模块的布局

> ID：14671171
> 
> 赞同：0
> 
> 时间：2013-02-03T09:40:02.633
> 
> 标签：php, layout, zend-framework2

我正在尝试学习 Zend Framework 2，目前面临一个问题。

我创建了一个名为“Admin”的模块，并为管理模块定义了布局。现在的问题是应用程序模块也在加载管理模块的布局。如果我浏览 Admin 或 Application 模块，则会加载相同的布局。我已经通过谷歌搜索尝试了多种解决方案，但没有让任何人工作。

我通过复制应用程序模块目录并将其重命名为管理员创建了管理模块，并将子目录名称和代码文件中的“应用程序”更改为“管理员”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T11:55:29.787

这是 Khalids 帖子的可视化展示，在 config/application.config.php 文件中添加了一项内容 步骤 1\. 步骤 2\. 将应用程序模块复制到并重命名为 Admin

```
//config/application.config.php
    'modules' => array(
            'Application'
            ,'Test', // add this line
        ),

<?php
//Step 3. 
```

//你的 Test/config/module.config.php 应该如下所示

```
return array(
    'router' => array(
        'routes' => array(
            /* 'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                       // 'controller' => 'StickyNotes\Controller\Album', 
                       //'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
            ), */
            // The following is a route to simplify getting started creating
            // new controllers and actions without needing to create a new
            // module. Simply drop new controllers in, and you can access them
            // using the path /application/:controller/:action
            'application' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/test',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Test\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.mo',
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Test\Controller\Index' => 'Test\Controller\IndexController',

        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/test'           => __DIR__ . '/../view/layout/test.phtml',
            'application/index/index' => __DIR__ . '/../view/test/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

第 4 步。最后，您的测试/模块文件应如下所示：->

```
namespace Test;

use Zend\Mvc\ModuleRouteListener;
use Zend\Mvc\MvcEvent;

class Module
{
    public function onBootstrap(MvcEvent $e)
    {
        $e->getApplication()->getServiceManager()->get('translator');
        $eventManager        = $e->getApplication()->getEventManager();
        $moduleRouteListener = new ModuleRouteListener();
        $moduleRouteListener->attach($eventManager);
    }

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }
} 
```

你将准备好滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:59:35.447

好吧，我终于找到了解决方案。

假设您要创建一个名为“Admin”的模块，步骤如下：

1-复制应用程序模块目录并将其重命名为“Admin”。它是您的模块的名称。

2- 更新管理模块中最初指向应用程序模块的所有引用。（将“应用程序”更改为“应用程序”，将“应用程序”更改为“管理员”）

3- 在 Admin/config/module.config.php 中删除“home”路由。

4-更新您的布局和视图。

[5- 使用http://example.com/admin](http://example.com/admin)在浏览器中进行测试

而已。

您不需要任何外部布局库，例如“EdpModuleLayouts”

干杯:)

# r - 如何将R公式转换为文本？

> ID：14671172
> 
> 赞同：62
> 
> 时间：2013-02-03T09:40:20.043
> 
> 标签：r, r-formula

我无法像使用文本一样使用公式。我想要做的是将公式连接到图表的标题。但是，当我尝试将公式与文本一起使用时，我失败了：

```
model <- lm(celkem ~ rok + mesic)
formula(model)
# celkem ~ rok + mesic 
```

这可以。现在我想像这样构建字符串`"my text celkem ~ rok + mesic"`- 这就是问题所在：

```
paste("my text", formula(model))
# [1] "my text ~"           "my text celkem"      "my text rok + mesic"

paste("my text", as.character(formula(model)))
# [1] "my text ~"           "my text celkem"      "my text rok + mesic"

paste("my text", toString(formula(model)))
# [1] "my text ~, celkem, rok + mesic" 
```

`sprint`现在我看到package 中有一个函数`gtools`，但我认为这是一个基本的东西，值得在默认环境中解决！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-03T10:04:17.443

包中的一个简短解决方案`formula.tools`，作为一个函数`as.character.formula`：

```
frm <- celkem ~ rok + mesic
Reduce(paste, deparse(frm))
# [1] "celkem ~ rok + mesic"

library(formula.tools)
as.character(frm)
# [1] "celkem ~ rok + mesic" 
```

`Reduce`在长公式的情况下可能很有用：

```
frm <- formula(paste("y ~ ", paste0("x", 1:12, collapse = " + ")))

deparse(frm)
# [1] "y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10 + x11 + "
# [2] "    x12"                                                      
Reduce(paste, deparse(frm))
# [1] "y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10 + x11 +      x12" 
```

这是因为`width.cutoff = 60L`在`?deparse`.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-03T14:17:11.733

尝试`format`：

```
paste("my text", format(frm))
## [1] "my text celkem ~ rok + mesic" 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-03T09:58:27.777

涵盖所有内容的最简单解决方案：

```
f <- formula(model)
paste(deparse(f, width.cutoff = 500), collapse="") 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-02-03T10:06:27.407

或作为 Julius 版本的替代品（注意：您的代码不是独立的）

```
celkem = 1
rok = 1
mesic = 1
model <- lm(celkem ~ rok + mesic)
paste("my model ", deparse(formula(model))) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-04-18T10:39:01.170

最简单的方法是这样的：

```
f = formula(model)
paste(f[2],f[3],sep='~') 
```

完毕！

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-07-16T08:23:36.270

引入了 R 4.0.0（2020-04-24 发布）[`deparse1`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/deparse.html)，它从不将结果拆分为多个字符串：

```
f <- y ~ a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + 
     p + q + r + s + t + u + v + w + x + y + z
deparse(f)
# [1] "y ~ a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + " "    p + q + r + s + t + u + v + w + x + y + z"                   
deparse1(f)
# [1] "y ~ a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z" 
```

* * *

* * *

* * *

但是，它仍然有一个`width.cutoff`参数（默认（最大值）`500`：），之后引入换行符，但行分隔`collapse`（默认：） `" "`not `\n`，留下额外的空白（即使有`collapse = ""`）（`gsub`如果需要，请使用删除它们，请参阅[Ross D's答案](https://stackoverflow.com/a/31153246/1870254)）：

```
> f <- rlang::parse_expr( paste0("y~", paste0(rep(letters, 20), collapse="+")))
> deparse1(f, collapse = "")
[1] "y ~ a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u +     v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p +     q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k +     l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z + a + b + c + d + e + f +     g + h + i + j + k + l + m + n + o + p + q + r + s + t + u + v + w + x + y + z" 
```

* * *

要在 R < 4.0.0 中使用[`backports`](https://github.com/r-lib/backports)（推荐）或复制它的实现：

```
#  Part of the R package, https://www.R-project.org
#
#  Copyright (C) 1995-2019 The R Core Team
#
#  This program is free software; you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation; either version 2 of the License, or
#  (at your option) any later version.
#
#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  A copy of the GNU General Public License is available at
#  https://www.R-project.org/Licenses/

deparse1 <- function (expr, collapse = " ", width.cutoff = 500L, ...) 
    paste(deparse(expr, width.cutoff, ...), collapse = collapse) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-03T12:05:32.497

这是一个使用的解决方案`print.formula`，它看起来很巧妙，但它可以在单行中完成工作并且避免使用`deparse`并且不需要使用额外的包。我只是捕获打印公式的输出，使用`capture.output`

```
paste("my text",capture.output(print(formula(celkem ~ rok + mesic))))
[1] "my text celkem ~ rok + mesic" 
```

如果是长公式：

```
 ff <- formula(paste("y ~ ", paste0("x", 1:12, collapse = " + ")))
 paste("my text",paste(capture.output(print(ff)), collapse= ' '))

 "my text y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10 + x11 +      x12" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-13T16:39:29.887

另一个`deparse`基于 - 的解决方案是`rlang::expr_text()`(and `rlang::quo_text()`)：

```
f <- Y ~ 1 + a + b + c + d + e + f + g + h + i +j + k + l + m + n + o + p + q + r + s + t + u
rlang::quo_text(f)
#> [1] "Y ~ 1 + a + b + c + d + e + f + g + h + i + j + k + l + m + n + \n    o + p + q + r + s + t + u" 
```

他们确实有一个宽度参数来避免换行，但也限制为 500 个字符。至少它是一个很可能已经加载的函数......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-01T05:35:15.647

然后添加 gsub 删除空格

```
gsub("  ", "", paste(format(frm), collapse = "")) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-10T18:55:51.607

今天优化了一些功能。到目前为止还没有提到的一些方法。

```
f <- Y ~ 1 + a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + p + q + r + s + t + u
bench::mark(
  expression = as.character(as.expression(f)),
  deparse = deparse(f, width.cutoff = 500L),
  deparse1 = deparse1(f),
  tools = formula.tools:::as.character.formula(f),
  stringi = stringi::stri_c(f),
  I = as.character(I(f)),
  as = as(f, "character"),
  txt = gettext(f),
  txtf = gettextf(f),
  sub = sub("", "", f),
  chr = as.character(f),
  str = substring(f, 1L),
  paste = paste0(f),
)[c(1, 3, 5, 7)]

#> # A tibble: 13 x 3
#>    expression   median mem_alloc
#>    <bch:expr> <bch:tm> <bch:byt>
#>  1 expression   15.4us        0B
#>  2 deparse        31us        0B
#>  3 deparse1       34us        0B
#>  4 tools        58.7us    1.74MB
#>  5 stringi        67us    3.09KB
#>  6 I            64.1us        0B
#>  7 as          100.5us  521.61KB
#>  8 txt          83.4us        0B
#>  9 txtf         85.8us    3.12KB
#> 10 sub          64.6us        0B
#> 11 chr            60us        0B
#> 12 str          62.8us        0B
#> 13 paste        63.5us        0B 
```

# php - 如果我实现一个Iterator类来封装一个PDOStatement，key()方法应该怎么做

> ID：14671178
> 
> 赞同：0
> 
> 时间：2013-02-03T09:41:10.980
> 
> 标签：php, pdo, iterator

我开发了一个接口和类来屏蔽 PDOStatement。

界面：

```
interface ResultSetInterface extends Iterator
{
    public function count();
    public function all();
} 
```

班上：

```
class ResultSet implements ResultSetInterface
{
    /**
     * @var PDOStatement
     */
    protected $pdoStatement;

    protected $cursor = 0;

    protected $current = null;

    private $count = null;

    public function __construct($pdoStatement)
    {
        $this->pdoStatement= $pdoStatement;
        $this->count = $this->pdoStatement->rowCount();
    }

    public function rewind()
    {
        if ($this->cursor > 0) {
            throw new Exception('Rewind is not possible');
        }
        $this->next();
    }

    public function valid()
    {
        return $this->cursor <= $this->count;
    }

    public function next()
    {
        $this->current = $this->pdoStatement->fetch();
        $this->cursor++;
    }

    public function current()
    {
        return $this->current;
    }

    public function key()
    {
    }

    public function count()
    {
        return $this->count;
    }

    public function all() {
        $this->cursor = $this->count();
        return $this->pdoStatement->fetchAll();
    }
} 
```

这工作正常。但我不确定如何使用实现 Iterator 类所必需的 key() 方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:02:56.150

首先，关于您的接口，我认为您最好扩展`CountableIterator`您想要添加的`count()`方法，并且在 SPL 中有一个用于此目的的神奇接口。

关于关键方法。您必须记住，在 PHP 中，每个可迭代内容都是键和值的关联。它继承自 PHP 数组。

迭代器是一种重载`foreach`运算符的方法，并且作为一个 sythax 的 foreach ，它是由`foreach($iterator as $key=>$value)`您必须提供关键方法实现而组成的。

在您的情况下，您有两种解决方案：

*   使用`$pdo->cursor`
*   创建您自己的名为 $currentKey 的属性，并在每次使用`next`方法时递增它。

# ruby-on-rails - Rails：如何从帖子中搜索和获取第一张图片？

> ID：14671194
> 
> 赞同：0
> 
> 时间：2013-02-03T09:43:00.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我用rails创建了一个博客。所有帖子都将包含至少一张图片。在博客页面上，我需要列出所有帖子。在这个列表中，我需要在每个帖子的前面添加帖子的第一张图片。我怎样才能做到这一点？（请告诉我怎么做。我是 Rails 新手！）

如果可能，当有多个图像时，我需要选择具有 css 类“特征”的图像。如果不存在，请选择第一个图像。怎么做？

PS：我用CKEditor写帖子和上传图片。

我只是设法使用正则表达式 [/img. *?src="(.* ?)"/i,1]。知道如何识别 css 类并使用带有“特色”类的图像（如果可用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:48:25.540

我不确定 CKEditor 如何开箱即用地处理所有这些，但这就是我要做的。

检查[回形针](https://github.com/thoughtbot/paperclip)或[载波](https://github.com/jnicklas/carrierwave)并创建您正在寻找的模型/列。

使用这两者，您可以指定可以在视图中使用的大小，因此您的代码可能如下所示：

```
@blog_post.main_photo.small.url if @blog_post.main_photo 
```

# ios - 从单独的视图重新加载 UIWebView

> ID：14671195
> 
> 赞同：0
> 
> 时间：2013-02-03T09:43:26.080
> 
> 标签：ios, objective-c, uiwebview

我有一个选项卡式应用程序，在第一个选项卡上运行应用程序时加载了 UiWebView，第二个选项卡包含设置，用户可以更改设置并单击“保存”按钮。

当用户更新设置并按“保存”时，我希望重新加载第一个选项卡上的 UiWebview。

我搜索了各种术语以尝试找到答案，但运气不佳，必须有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:48:06.327

获取对的引用`UIWebView`并重新加载它，如下所示：

```
UIWebView *webView = [...];
[webView reload]; 
```

我希望`UIWebView`它归某些人所有`ViewController`。`ViewController`实现此代码并为外部类公开一个方法来指示它执行刷新是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:50:05.430

将`reloadWebView`方法添加到拥有的控制器`UIWebView`：

```
+(void) reloadWebView
{
    [self.webView reload];
} 
```

从您的其他控制器调用此方法：

```
[self.tabBar.viewControllers[0] reloadWebView]; 
```

`0`你的标签索引在哪里。

# java - 从文本文件计算成绩

> ID：14671197
> 
> 赞同：1
> 
> 时间：2013-02-03T09:43:43.787
> 
> 标签：java, compiler-errors

我被困在这个任务中。这是关于从用户将输入的文本文件中获取一些成绩，而不是计算 max 、 min 、 mean 。问题是每次我尝试编译它时它都会给我这个

```
St.java:10: readfile(int[],java.lang.String) in St cannot be applied to (int[])
int n = readfile (grades); 
```

源代码：

```
import java.io.*;

import java.util.Scanner;

public class St

{

    public static void main ( String [] a )

    {

        Scanner kbd = new Scanner(System.in);

        int count = 0;
        int [] grades = new int [500];
        int n = readfile (grades);

        System.out.println("What file contains the data?");

        String file = kbd.nextLine();

        System.out.println("The maximum grade is: " + max(grades,n));
        System.out.println("The minimum grade is: " + min(grades,n));
        System.out.println("The mean grade is: "+ mean(grades,n));

        }
    public static double mean(int [] grades,int n)
    {
        double sum = 0;
        for(int i = 0; i < n; i++)
        {
            sum = sum + grades[i];
        }
        return sum/n;
    }

    public static int readfile (int [] grades, String file)
    {
        int count = 0;
        try
        {
            Scanner f = new Scanner (new File (file)); // name of file
            while (f.hasNext()) // checks if there is more input in the file
            {
                grades[count]=f.nextInt (); // grabs the next piece of input
                count++; // moves onto the next piece of input (increasing count)

            }
        }
        catch (IOException e)
        {
            System.err.println (e);
            System.exit(0);
        }
        return count;

    }
    public static void writeArray (int [] grades , int n)
    {
        for (int i = 0; i < n; i++)
        {
            System.out.println (grades[i]);
        }
    }   
    public static int max(int [] y,int m)
    {
        int mx = 0;
        for(int i = 0; i < m; i++)
        {
            if(y[i] > mx)
            {
                mx = y[i];
            }
        }
        return mx;
    }

    public static int min(int [] grades,int n)
    {
        int mn = 0;

        for(int i = 0; i < n; i++)
        {
            if(grades[i] < mn)
            {
                mn = grades[i];
            }
        }
        return mn;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:48:13.913

你试图通过

```
int n = readfile (grades); 
```

但是您创建的功能：

```
public static int readfile (int [] grades, String file) 
```

要求第二个变量作为字符串

你需要改变你的线路：

```
String fileName= YOUR_FILE_NAME;
int n = readfile (grades,fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:48:31.257

您没有使用从用户那里获得的输入文件名。

改变这个：

```
int n = readfile (grades);
System.out.println("What file contains the data?");
String file = kbd.nextLine(); 
```

进入

```
System.out.println("What file contains the data?");
String file = kbd.nextLine();
int n = readfile (grades, file); 
```

因此，您从用户那里获取文件名并将其传递给您的方法。

# algorithm - 排序算法的上界和下界

> ID：14671201
> 
> 赞同：1
> 
> 时间：2013-02-03T09:44:19.130
> 
> 标签：algorithm, complexity-theory, big-o, time-complexity

这是一个非常简单的问题，但我很难完全理解这个概念。

我试图了解以下陈述之间的区别：

1.  存在一种算法，在最好的情况下，它可以在 O(n) 中对一个包含 n 个数字的数组进行排序。
2.  在最好的情况下，每个算法都会在 O(n) 中对一个包含 n 个数字的数组进行排序。
3.  存在一种算法，在最好的情况下对 Omega(n) 中的 n 个数字的数组进行排序。
4.  在最好的情况下，每个算法都会对 Omega(n) 中的 n 个数字的数组进行排序。

我将首先解释是什么让我发疯。我不确定 1 和 3 - 但我知道其中一个的答案是正确的，只需指定一种情况，而另一种情况的答案是通过检查所有可能的输入是正确的。因此，我知道其中一个必须是正确的，只需指定数组已经排序，但我不知道是哪个。我的老师总是告诉我要像我们正在检查谁是班上最高的人一样思考它，并且再次通过这些选项之一（1,3）就足以说他是并且没有理由检查所有班级。

我确实知道，如果我们要检查最坏的情况，那么这些陈述都不是真的，因为没有任何假设或额外内存的最佳排序算法是`Omega(nlogn)`.

**重要提示：**我不是在寻找解决方案（一种能够进行匹配排序的算法）——只是试图更好地理解这个概念。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:50:10.873

**对于 1+3**问问自己 - 你知道一个算法可以在最好的情况下对数组进行排序`Theta(n)`- 如果答案是真的，那么两个 1+3 都是真的 - 因为 Theta(n) 是`O(n) [intersection] Omega(n)`，因此如果你有这样的一种算法（在 Theta(n) 最佳情况下运行）- 1+3 都是正确的。
提示：优化[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)。

**对于 2**：问问你自己——在`O(n)`最好的情况下，每个算法都会对一组数字进行排序吗？你知道有一个最坏情况和最好情况相同时间复杂度的算法吗？如果取消所有优化，上述冒泡排序会发生什么情况？

**对于 4**：问问自己 - 您是否需要读取所有元素以确保数组已排序？如果你这样做 -`Omega(n)`是一个明确的下限，那么你就不能做得更好。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:49:33.587

显然，区别在于“O”和“Omega”。一说“上升不快于”，二说“上升不慢于”。

确保您了解这些术语之间的区别，并且您会看到句子中的区别。

1 和 3 都表示完全不同的事物，就像 2 和 4 一样。

看看那些（那些不一样！）：

> 1~有一个算法，10个项目在最好的情况下不会超过30个。
> 3~ 存在一个算法，10 个项目在最好的情况下不会少于 30 个。
> 
> 2~ 10个项目的每个算法在最好的情况下不超过30个。
> 4~ 10个项目的每个算法最好情况下不少于30个。

你现在感觉到不同了吗？O/Omega 的区别是相似的，但研究的主题不同。上面的例子说明了在某些点/情况下的不同性能，而 O/Omega 表示法告诉你性能，与数据的大小有关，但前提是数据“足够大”，无论是三个项目还是百万个，以及它会降低常数因子：

```
function 1000000*n is O(n)
function 0.00000*n*n is O(n^2) 
```

对于少量数据，第二个显然比第一个好得多。但是随着数据量的增加，很快第一个开始变得更好！

将上述示例重写为“更合适”的术语，与您的原始句子更相似：

> 1~ 存在一种算法，对于 N 个以上的项目，在最好的情况下不超过 X*N。
> 3~ 存在一种算法，对于 N 个以上的项目，在最好的情况下不会少于 X*n。
> 
> 2~ 每个算法，对于超过 N 个项目，在最好的情况下不超过 X*N。
> 4~ 每一个算法，对于多于 N 个项目，在最好的情况下不小于 X*N。

我希望这可以帮助您“看到”/“感受”差异！

# javascript - 如何命名特定于 div 的 id 的 Javascript 函数，将其封装在 ASP.NET MVC 中

> ID：14671204
> 
> 赞同：1
> 
> 时间：2013-02-03T09:45:02.937
> 
> 标签：javascript, asp.net-mvc

我有一个部分视图，我试图将它加载到一个 cshtml 文件中两次。

现在在我的部分视图中，我也有一个 javascript 函数。此时，当我将我的 cshtml 加载到页面上时，我将拥有两个同名的 Javascript 函数。

我想避免这种情况，并根据我将部分视图绑定到的模型来唯一地命名 Javascript 函数。

请不要我可以通过将它与“@Model.Id”之类的参数相关联来实现我的局部控件中每个控件的唯一性。但是我无法对 Javascript 函数的唯一性应用同样的东西。

我很抱歉我的英语不好。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:48:20.373

您可以拥有一个对每个控件进行操作的 JavaScript 函数，而不是为每个部分设置许多具有不同名称的函数。因此，例如，您可以为这些控件分配一个类，然后以[`jQuery plugin`](http://docs.jquery.com/Plugins/Authoring)附加到具有该类名的所有控件的形式编写您的函数。

现在可以在单独的 javascript 文件中声明该函数，而无需在部分中混合标记和 javascript，这是一个糟糕的设计。然后可以使用标准 jQuery 语法简单地将插件附加到该类的所有控件：

```
$(function() {
    $('.someClass').myFunction();
}); 
```

您还可以使用 DOM 元素上的 HTML5 data-* 属性将一些元数据与它们相关联，例如来自您的模型的唯一标识符。然后可以在您的 jQuery 插件中访问此元数据。

例如：

```
<div class="someClass" data-id="@Model.Id">
    This is some div with associated metadata
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:56:12.357

为了实现这样的场景，您可以使用`data-attribute`.

例如，我们有相同的 html 代码被一个 div 包围，这些 div 有不同的 id。

每个 div 将有一个`data-attribute`和使用 jquery 你可以捕捉一个事件（如点击）

现在代码示例

**HTML**

```
<div id="id1" data-attribute="doSomething">Element</div>
<div id="id2" data-attribute="doSomething">Element</div> 
```

在您的情况下，这些 div 表示来自部分视图的结果，您也可以将`id`属性中的值存储更改为来自您的模型，例如`id="id@{Model.Id}"`

**jQuery**

```
$("div[data-attribute=doSomething]").click(function() {
    alert("Clicked element: " + $(this).prop("id")); 
}); 
```

[菲德尔示例](http://jsfiddle.net/9mfcq/)

我正在使用Jquery 的[属性选择器](http://api.jquery.com/attribute-equals-selector/)来实现它

请注意，您也可以通过定义类属性来实现它。但我认为你应该在你真正需要一个类时使用它，否则使用自定义属性，如`data-value="something"`

# c# - 如何在 C# 中计算凸包

> ID：14671206
> 
> 赞同：9
> 
> 时间：2013-02-03T09:45:23.180
> 
> 标签：c#, convex-hull

如何从点集合开始计算凸包？

我正在寻找 C# 中凸包算法的实现

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T11:41:17.910

**MIConvexHull** - [https://designengrlab.github.io/MIConvexHull/](https://designengrlab.github.io/MIConvexHull/) - 是 C# 中的高性能凸包实现，也支持更高维的凸包。LGPL 许可证。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-09-22T18:46:31.937

下面是 Qwertie 的答案中使用的相同 Java 源代码的 C# 音译，但不依赖于具有双字段的 Point 类之外的非标准类。

```
class ConvexHull
{
    public static double cross(Point O, Point A, Point B)
    {
        return (A.X - O.X) * (B.Y - O.Y) - (A.Y - O.Y) * (B.X - O.X);
    }

    public static List<Point> GetConvexHull(List<Point> points)
    {
        if (points == null)
            return null;

        if (points.Count() <= 1)
            return points;

        int n = points.Count(), k = 0;
        List<Point> H = new List<Point>(new Point[2 * n]);

        points.Sort((a, b) =>
             a.X == b.X ? a.Y.CompareTo(b.Y) : a.X.CompareTo(b.X));

        // Build lower hull
        for (int i = 0; i < n; ++i)
        {
            while (k >= 2 && cross(H[k - 2], H[k - 1], points[i]) <= 0)
                k--;
            H[k++] = points[i];
        }

        // Build upper hull
        for (int i = n - 2, t = k + 1; i >= 0; i--)
        {
            while (k >= t && cross(H[k - 2], H[k - 1], points[i]) <= 0)
                k--;
            H[k++] = points[i];
        }

        return H.Take(k - 1).ToList();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-14T23:51:43.480

这是我使用[Monotone Chain](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain)算法（又名 Andrew 算法）编写的 2D 凸包算法。

```
public static IListSource<Point> ComputeConvexHull(List<Point> points, bool sortInPlace = false)
{
    if (!sortInPlace)
        points = new List<Point>(points);
    points.Sort((a, b) => 
        a.X == b.X ? a.Y.CompareTo(b.Y) : a.X.CompareTo(b.X));

    // Importantly, DList provides O(1) insertion at beginning and end
    DList<Point> hull = new DList<Point>();
    int L = 0, U = 0; // size of lower and upper hulls

    // Builds a hull such that the output polygon starts at the leftmost point.
    for (int i = points.Count - 1; i >= 0 ; i--)
    {
        Point p = points[i], p1;

        // build lower hull (at end of output list)
        while (L >= 2 && (p1 = hull.Last).Sub(hull[hull.Count-2]).Cross(p.Sub(p1)) >= 0) {
            hull.RemoveAt(hull.Count-1);
            L--;
        }
        hull.PushLast(p);
        L++;

        // build upper hull (at beginning of output list)
        while (U >= 2 && (p1 = hull.First).Sub(hull[1]).Cross(p.Sub(p1)) <= 0)
        {
            hull.RemoveAt(0);
            U--;
        }
        if (U != 0) // when U=0, share the point added above
            hull.PushFirst(p);
        U++;
        Debug.Assert(U + L == hull.Count + 1);
    }
    hull.RemoveAt(hull.Count - 1);
    return hull;
} 
```

它依赖于一些假定存在的东西，有关详细信息，请参阅我的[博客文章](http://loyc-etc.blogspot.ca/2014/05/2d-convex-hull-in-c-45-lines-of-code.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-27T04:20:52.027

我将许多 Convex Hull 算法/实现与提供的所有代码进行了比较。一切都包含在[CodeProject](https://www.codeproject.com/Articles/1210225/Fast-and-improved-D-Convex-Hull-algorithm-and-its)文章中。

算法比较：

*   单调链
*   MiConvexHull（Delaunay 三角剖分和 Voronoi 网格）
*   格雷厄姆扫描
*   陈
*   欧莱（我的）

文章：

*   2017-10-13 - 使用我的算法/实现的测试台：[快速和改进的 2D Convex Hull 算法及其在 O(n log h) 中的实现](https://www.codeproject.com/Articles/1210225/Fast-and-improved-D-Convex-Hull-algorithm-and-its)
*   2014-05-20 - 解释我自己的算法：[A Convex Hull Algorithm and its implementation in O(n log h)](https://www.codeproject.com/Articles/775753/A-Convex-Hull-Algorithm-and-its-implementation-in)

# qt - 如何让QScrollArea的滚动条透明？

> ID：14671215
> 
> 赞同：1
> 
> 时间：2013-02-03T09:46:57.003
> 
> 标签：qt, user-interface

如您所见，红色矩形中有白色三角形。我想让 QScollArea 的滚动条背景透明。
我尝试了几个样式表：

1.  `QScrollBar::up-arrow {background-color:transparent}`

2.  `QScrollBar {background-color:transparent}`

3.  `QScrollArea {background-color:transparent}`

但它们都不起作用。
我怎样才能做到这一点？

谢谢。

![在此处输入图像描述](../Images/77b749efacf122199dc62cd4ebcd7811.png)

# facebook - php的大容量数据库选择

> ID：14671216
> 
> 赞同：0
> 
> 时间：2013-02-03T09:47:00.303
> 
> 标签：facebook, search, optimization, yii

我即将使用 YII 框架开发网站。但我不太确定应该使用哪个数据库。

通常插入和选择将存在于网站中。数据将来自不同的关系表，因为我将拥有 50 多个过滤器，以便用户可以查看他们想要查看的任何数据库。

这是网站的例子。[http://property.sulekha.com/](http://property.sulekha.com/)

我想设计这样的东西。

我可以使用哪个新概念进行优化，以获得更好的性能。

我想使用的概念很少。

1) MemCache 2) HipHop PHP 3) Doctorin ORM

我只是想知道 facebook 搜索是如何工作的，他们是否使用任何高级工具进行搜索？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:40:33.330

Facebook 架构是一个令人着迷的架构，你不应该试图复制它，因为你不需要它，而且众所周知，过早的优化是魔鬼。

扩展问题不是您准备的事情，除非您在为企业工作并且直接知道从第一天起您将收到大量流量，例如新的大型。

如果您正在谈论一个大型非规范化表，听起来如此，通过应用多达 50 个过滤器，也许您应该考虑使用 NoSQL 解决方案，例如 mongoDB。

根据我对 facebook 搜索的了解，服务器是集群的，并且基本上是指向“真实”数据的指针，这意味着它们的很多数据不是物理数据，但正如我所说，除非你计划运动10 亿用户——这已经超出了你的想象。

祝你好运

# python - Python类方法改变自我

> ID：14671218
> 
> 赞同：2
> 
> 时间：2013-02-03T09:47:05.787
> 
> 标签：python, class, methods, int, self

这不是我正在做的任何事情，它只是一些测试代码，因为我只是在学习类方法并且很烂。但是说我有以下代码

```
class Test(int):
    def __init__(self,arg):
            self = arg

    def thing(self):
            self += 10 
```

然后，foo=Test(12) 将 foo 设置为 12。但是我想要它，所以当我这样做时，foo.thing(), foo 增加了 10。到目前为止，继续 foo.thing() 只是将它保持在 12。我将如何更改此代码来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T09:53:37.527

因为`int`是不可变的，所以你不能神奇地将它变成可变类型。

你的方法是无操作的。它们`self`通过将本地名称空间重新分配给其他东西来改变本地名称空间。他们不再指向实例。换句话说，这两种方法都使原始实例*保持不变*。

你不能用`int`. [您必须使用数字类型挂钩](http://docs.python.org/2/reference/datamodel.html#emulating-numeric-types)从头开始创建自定义类。

背景：`int`有一个`__new__`将实际值赋给 的方法`self`，并且没有`__iadd__`支持就地添加的方法。该`__init__`方法不会被忽略，但您可以完全忽略它，因为`__new__`已经完成了这项工作。

分配给`self`意味着你只是用其他东西替换了对实例的引用，你没有*改变*任何关于`self`：

```
>>> class Foo(int):
...     def __init__(self, value=0):
...         print self, type(self)
...         self = 'foobar'
...         print type(self)
... 
>>> foo = Foo(10)
10 <class '__main__.Foo'>
<type 'str'>
>>> print foo, type(foo)
10 <class '__main__.Foo'> 
```

因为`int`没有`__iadd__`就地添加方法，所以将您`self += 2`的解释为`self = self + 2`；再次，您正在分配`self`并用一个新值替换它。

# c# - Visual Studio 2012 运行 Windows Phone 问题

> ID：14671219
> 
> 赞同：2
> 
> 时间：2013-02-03T09:47:13.467
> 
> 标签：c#, .net, visual-studio, compiler-errors, windows-phone-8

我有一个在 Visual Studio 2012 中编写的 Windows Phone 项目，但每次都有一个问题：

1.  在我的设备上运行项目
2.  停下来
3.  我编辑一些代码
4.  保存项目
5.  尝试在我的设备上再次运行我的应用程序并收到以下消息：

    > 无法将“obj\Debug\xxxx.dll”复制到“Bin\Debug\xxxx.dll”。重试次数超过 10。失败。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:31:06.690

已知的错误。只需重新启动 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T17:50:09.593

与其重新启动 Visual Studio，不如尝试终止 XDesProc.exe 设计器似乎引用了 dll

# java - 关于交叉检查目录中的文件

> ID：14671224
> 
> 赞同：0
> 
> 时间：2013-02-03T09:47:35.660
> 
> 标签：java, io

我开发了一个将文件从源文件夹复制到目标文件夹的 java 程序，它有 10 个序列化文件从源文件夹复制到目标文件夹

但是其中缺少的一件事是，如果文件已经存在于目标文件夹中，那么在这种情况下它不应该复制，所以基本上在一秒钟内完成查看，以检查目标文件夹是否包含这 10 个序列化文件如果不是，那么在这种情况下，只有它应该复制，复制后它应该在第二秒内再次检查文件是否存在，请告知如何实现这一点

```
//Create a class extends with TimerTask
class ScheduledTask extends TimerTask {

    public void run() {
        InputStream inStream = null;
        OutputStream outStream = null;

        try {
            File source = new File("C:\\cache\\");
            File target = new File("C:\\Authclient\\cache\\");

            // Already exists. do not copy
            /*if (target.exists()) { 
                return;
            }*/

            File[] files = source.listFiles();
            for (File file : files) {
                inStream = new FileInputStream(file);
                outStream = new FileOutputStream(target + "/" + file.getName());

                byte[] buffer = new byte[1024];
                int length;
                // copy the file content in bytes
                while ((length = inStream.read(buffer)) > 0) {
                    outStream.write(buffer, 0, length);
                }
                inStream.close();
                outStream.close();
            }
            System.out.println("File is copied successful!");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

public class Copycache {
    public static void main(String args[]) throws InterruptedException  {
        Timer time = new Timer();
        ScheduledTask task = new ScheduledTask();
        time.schedule(task, new Date(), TimeUnit.SECONDS.toMillis(1));
    }

} 
```

上面存在的已被评论的实现现在无法正常工作，请告知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:08:03.203

我很好奇你的确切要求。考虑这个小例子：

```
File file = new File("test.txt");
if (!file.exists())
{
    FileOutputStream fis = new FileOutputStream(file);
    fis.write("blabla".getBytes());
    fis.close();
} 
```

现在在 FileOutputStream fis... 行放一个断点运行它并在断点处等待，然后手动创建 test.txt 并在其中放入一些数据。然后继续运行程序。

您的程序将在没有警告的情况下覆盖 test.txt 的内容。

如果时间在这里如此重要，您将需要找出不同的解决方案。

编辑：我很好奇并做了更多测试。`file.createNewFile();`如果您添加该行，在那里中断，创建文件然后继续应用程序，似乎它甚至不会引发异常。我想知道为什么..

# file - 如何从文件名中删除特定字符？

> ID：14671227
> 
> 赞同：2
> 
> 时间：2013-02-03T09:47:50.440
> 
> 标签：file, character, rename, file-rename

我有一堆文件需要从文件名中删除 (.) 点。例如。“Mr.-John-Smith.jpg”到“Mr-John-Smith.jpg”。我没有真正的编程经验，只知道 html/css 和一点 javascript。我在 stackoverflow 上发现了另一个相同的问题，但我收集到的内容是在 linux 系统上修复的，并且使用了 BASH。

无论如何，如果有人可以为我提供有关为此使用哪个程序以及在该程序中执行哪些代码以实现它的教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:00:40.033

如果您使用的是 Windows 环境（我猜您会这样做）

您可以下载此免费实用程序来批量更改文件名！

主页： [http ://www.bulkrenameutility.co.uk/Main_Intro.php](http://www.bulkrenameutility.co.uk/Main_Intro.php)

下载页面： [http ://www.bulkrenameutility.co.uk/Download.php](http://www.bulkrenameutility.co.uk/Download.php)

它易于使用

请享用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:54:03.127

如果文件中的文件名...

1- 打开 Microsoft Word 或任何文本编辑器。按**ctrl+h**然后搜索不带引号的“ **.** ”，然后用空白字符替换它。

2-它将删除所有点，再次带上“。” 到您的文件扩展名，例如 .jpg ， .png 搜索您的文件扩展名，例如“jpg”并将其替换为“.jpg”

它将工作 %100，我每次都使用这种方法。

如果它们不在文件中，并且您想在操作系统的文件系统中执行某些操作

试试这个程序。这对这个操作非常有用；

[下载](http://www.antp.be/software/renamer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:11:16.020

要从目录中的所有文件中删除除扩展名点之外的所有文件，您可以使用较新版本的 Windows 附带的 PowerShell，并且可以为旧版本下载；为了可读性插入换行符，这应该放在一行；

```
PS> dir | rename-item -newname {       
       [System.IO.Path]::GetFileNameWithoutExtension($_.name).Replace(".","") + 
       [System.IO.Path]::GetExtension($_.name); } 
```

它的作用是获取不带扩展名的文件名并删除其中的所有点，然后重新添加扩展名。然后它将文件重命名为结果名称。

例如，这将更`do.it.now`改为`doit.now`，或者在您的情况下，更改`Mr.-John-Smith.jpg`为`Mr-John-Smith.jpg`。

# r - 仅在 R 中使用 sapply 获取特征值

> ID：14671228
> 
> 赞同：2
> 
> 时间：2013-02-03T09:48:06.083
> 
> 标签：r

我已经尝试了许多不同的方法来仅在遍历列表时获取特征值但没有工作。那是代码：

```
myarray=matrix(rexp(200),50,5)
list.of.matrices <- apply(expand.grid(rep(list(c(FALSE, TRUE)), ncol(myarray))),
                              1, function(j)myarray[, j, drop = FALSE])
list.of.cov.matrices=sapply(list.of.matrices, cov)
eigen.val<- sapply(list.of.cov.matrices, eigen$values) 
```

也试过：

```
eigen.val=apply(list.of.cov.matrices, 1, function(eigen) FUN(eigen, only.values = T)) 
```

最后，我想用每个矩阵的特征值构建一个表。

要构建我使用的表：

```
eigen.sum=data.frame(
  list.eigen.of.cor.matrices=rep(1:length( eigen.val), sapply( eigen.val, length)),
  y=unlist( eigen.val) 
```

这可以完成表格，但随后必须在 excel 中进行额外的操作，因此如果可能的话，希望直接进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:58:06.333

这里有两个问题。首先，您`0*0`的输入中有一个矩阵，它会返回一个错误。其次，您调用`eigen`函数的方式（在第一个命令中）不正确。

基本上，您必须检查矩阵的维数是否不正确`0*0`，然后`eigen`正确调用该函数。试试这个：

```
eigen <- sapply(list.of.cov.matrices, function(x) {
    if (prod(dim(x)) > 0) {
        eigen(x)$values
    }
}) 
```

# c# - 使用 WriteableBitmapEx Windows Phone 将较小的图像覆盖在较大的图像上

> ID：14671231
> 
> 赞同：2
> 
> 时间：2013-02-03T09:48:17.377
> 
> 标签：c#, windows-phone-8, blit, writeablebitmapex

在我的隐藏对象游戏中，当使用以下代码找到对象时，我想用圆形图像标记对象，其中 AnsX1、AnsX2、AnsY1、AnsY2 是对象位置的像素坐标。圆形图像应根据像素坐标标记的对象大小调整大小

```
 imgCat.Source = writeableBmp;

        WriteableBitmap wbCircle = new WriteableBitmap(AnsX2 - AnsX1, AnsY2 - AnsY1);
        wbCircle = new WriteableBitmap(0, 0).FromContent("Images/circle.png");

        //Just to make sure the boundary is correct so I draw the green rec around the object
        writeableBmp.DrawRectangle(AnsX1, AnsY1, AnsX2, AnsY2, Colors.Green);

        Rect sourceRect = new Rect(0, 0, writeableBmp.PixelWidth, writeableBmp.PixelHeight);
        Rect destRect = new Rect(AnsX1, AnsY1, wbCircle.PixelWidth, wbCircle.PixelHeight);

        writeableBmp.Blit(destRect, wbCircle, sourceRect);
        writeableBmp.Invalidate(); 
```

我的问题不是有一个大圆圈，而是有几个较小的圆圈填充顶部的矩形区域（见图）：

![在此处输入图像描述](../Images/3cac7be1d8bbe2838442d563dd27d7c9.png)

**编辑 1：** 基于@Rene 响应，我已将代码更改为

```
 imgCat.Source = writeableBmp;

        //Just to make sure the boundary is correct so I draw the green rec around the object
        writeableBmp.DrawRectangle(AnsX1, AnsY1, AnsX2, AnsY2, Colors.Green);
        WriteableBitmap wbCircle = new WriteableBitmap(0, 0).FromContent("Images/circle.png");
        wbCircle = wbCircle.Resize(AnsX2 - AnsX1, AnsY2 - AnsY1, WriteableBitmapExtensions.Interpolation.Bilinear);

        Rect sourceRect = new Rect(0, 0, writeableBmp.PixelWidth, writeableBmp.PixelHeight);
        Rect destRect = new Rect(AnsX1, AnsY1, AnsX2 - AnsX1, AnsY2 - AnsY1);

        writeableBmp.Blit(destRect, wbCircle, sourceRect);
        writeableBmp.Invalidate(); 
```

这是结果

![在此处输入图像描述](../Images/9e4ea0be92f1d39455d656483e515cc6.png)

如果我设法解决这个问题，我将使用更大、质量更好的 circle.png。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:35:24.267

首先我认为 circle.png 太小了。Blit 方法不会按比例放大。您需要先使用 Scale 函数将其放大，如下所示：

```
wbCircle = wbCircle.Resize(AnsX2 - AnsX1, AnsY2 - AnsY1, WriteableBitmapExtensions.Interpolation.Bilinear); 
```

其次，sourceRect 使用整个/目标位图的大小，而不是 wbCircle/源位图的大小。应该：

```
sourceRect = new Rect(0, 0, wbCircle.PixelWidth, wbCircle.PixelHeight); 
```

如果圆圈太小并且放大比例太高，则缩放可能会导致一些缩放伪影。如果你真的只需要一个简单的彩色圆圈，你也可以使用 DrawCircle 方法：

```
writeableBmp.DrawCircle(AnsX1, AnsY1, AnsX2, AnsY2, Colors.Green); 
```

# javascript - Fancybox 和 html 内容：设置导航库仅单击箭头而不是整个内容

> ID：14671235
> 
> 赞同：-2
> 
> 时间：2013-02-03T09:48:30.907
> 
> 标签：javascript, fancybox

我正在使用 fancybox(1) 来使用 html 内容而不是单个图像来呈现框（图像库）。

我有一个带有图像、标题、描述、元数据和一个名为“单击此处获取整个工作表”的链接的 html。

当我单击内容（左/右）时，我获得了元素之间的导航，但我希望单击链接浏览器重定向到正确的页面而不是下一个导航元素！

怎么解决？谢谢维托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:33:45.033

解决了一个CSS技巧。不那么优雅，但有效

.fancybox-nav { 高度：85% !important; }

# python - 运行外部程序并对其进行截图

> ID：14671243
> 
> 赞同：1
> 
> 时间：2013-02-03T09:50:19.017
> 
> 标签：python, windows, screenshot

我想通过运行 100 次并截取正在运行的东西的屏幕截图来测试我的应用程序。这就是我想出的：

```
import sys, string, os
import time
import wx

directory = 'my path to directory containing the .exe'
file = '"directory and .exe path"'

app = wx.App(False)
screen = wx.ScreenDC()
size = screen.GetSize()   

def runprogram(number,sleep_time):
    bitmap = wx.EmptyBitmap(size[0], size[1])
    mem = wx.MemoryDC(bitmap)
    newfile = str(number) + "_" + str(sleep_time)
    print newfile
    os.chdir(directory)
    os.system(file)
    time.sleep(sleep_time) #seconds
    print "sleeping done"
    mem.Blit(0, 0, size[0], size[1], screen, 0, 0)
    del mem
    bitmap.SaveFile(newfile, wx.BITMAP_TYPE_PNG)
    print "file saved as "+ newfile
    os.system("TASKKILL /F /IM myprogram.exe")

runprogram(1,5) 
```

问题是，当执行 os.system() 时，脚本会停止，直到我关闭 myprogram 窗口，然后休眠并截屏，我希望这些操作是同时进行的。我怎样才能做到这一点？

# c - 是否有允许结构重新排序的 GCC 关键字？

> ID：14671253
> 
> 赞同：21
> 
> 时间：2013-02-03T09:52:14.567
> 
> 标签：c, gcc, padding, c99, memory-alignment

我知道为什么 GCC 默认不重新排序结构的成员，但我很少编写依赖于结构顺序的代码，那么有什么方法可以标记我的结构以自动重新排序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-02-28T09:42:07.020

以前的 GCC 版本可以[`-fipa-struct-reorg`选择](https://gcc.gnu.org/onlinedocs/gcc-4.4.2/gcc/Optimize-Options.html)允许在`-fwhole-program`+`-combine`模式下重新排序结构。

> *   `-fipa-struct-reorg`
>     
>     
>     
>     执行结构重组优化，改变类 C 结构布局，以更好地利用空间局部性。这种转换对包含结构数组的程序有效。有两种编译模式可用：基于配置文件（使用 启用`-fprofile-generate`）或静态（使用内置启发式）。要求`-fipa-type-escape`提供此转换的安全性。它仅在整个程序模式下工作，因此需要`-fwhole-program`并`-combine`启用。此转换考虑`'cold'`的结构不受影响（请参阅 参考资料`--param struct-reorg-cold-struct-ratio=value`）。

由于[发行说明中的​​以下原因，自 GCC 4.8.x 以来已将其删除](https://gcc.gnu.org/gcc-4.8/changes.html)

> 结构重组和矩阵重组优化（命令行选项`-fipa-struct-reorg`和`-fipa-matrix-reorg`）已被删除。它们并不总是能正常工作，也不能与链接时优化 (LTO) 一起工作，因此仅适用于由单个翻译单元组成的程序。

但是，您仍然可以尝试使用`struct-reorg-branch`GCC [SVN](https://gcc.gnu.org/svn.html)或[github 镜像](https://github.com/gcc-mirror/gcc/tree/sje/struct-reorg)，风险自负，因为它仍在积极开发中。

您还可以使用[clang-tools-extra中的](http://clang.llvm.org/extra/)[clang-reorder-fields](https://reviews.llvm.org/rL280456)工具对字段重新排序

也可以看看

*   [C 结构中的自动字段重新排序以避免填充](https://stackoverflow.com/q/867471/995714)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-14T20:47:45.363

附带说明一下，Linux 内核实现了一个**gcc** [插件](https://patchwork.kernel.org/project/kernel-hardening/patch/1491513513-84351-2-git-send-email-keescook@chromium.org/)来引入一个名为`randomize_layout`. 目标是在结构的定义中使用它，以使编译器随机化字段的顺序。[为了安全起见，](https://lwn.net/Articles/722293/) Linux 内核使用它来应对需要了解结构布局的攻击。例如，`cred`结构在**include/linux/cred.h**中定义如下：

```
struct cred {
    atomic_t    usage;
#ifdef CONFIG_DEBUG_CREDENTIALS
    atomic_t    subscribers;    /* number of processes subscribed */
    void        *put_addr;
[...]
    struct user_struct *user;   /* real user ID subscription */
    struct user_namespace *user_ns; /* user_ns the caps and keyrings are relative to. */
    struct group_info *group_info;  /* supplementary groups for euid/fsgid */
    /* RCU deletion */
    union {
        int non_rcu;            /* Can we skip RCU deletion? */
        struct rcu_head rcu;        /* RCU deletion hook */
    };
} __randomize_layout; 
```

该`__randomize_layout`标签在 Linux 源代码树的**include/linux/compiler-gcc.h中定义为：**

```
#define __randomize_layout __attribute__((randomize_layout)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T10:05:19.593

GCC 中没有这样的选项。而且，我敢肯定，它不能以任何明智的方式介绍。关于填充优化，请查看[此讨论](https://stackoverflow.com/questions/867471/automated-field-re-ordering-in-c-structs-to-avoid-padding)。

我知道的唯一例外是热/冷结构字段拆分，这在某些情况下可以完成（我仍然不确定，即使在配置文件引导模式下，GCC 也可以做到，我知道 ICC 可以）。此功能不受用户控制，而是在调用图上执行，其中数据流上的这种转换的保守性是可证明的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-12T04:24:03.647

我认为在编译整个程序时可以重新组织/拆分 struct 的元素（lto 模式，使用 -flto 标志）。在这种情况下，您拥有程序的完整图片，并且对于不会转义的符号，应该可以重新排序它们以获得更好的缓存行为等。

在 gcc 主干中，这正在积极开发中。这是在 GNU cauldron 2015 中提出的。您可能想尝试 gcc trunk 或 struct-reorg-branch。

[https://gcc.gnu.org/wiki/cauldron2015?action=AttachFile&do=view&target=Olga+Golovanevsky_+Memory+Layout+Optimizations+of+Structures+and+Objects.pdf](https://gcc.gnu.org/wiki/cauldron2015?action=AttachFile&do=view&target=Olga+Golovanevsky_+Memory+Layout+Optimizations+of+Structures+and+Objects.pdf)

# android - Android , Admob / Adview 从edittext 中获取焦点，如何防止？

> ID：14671260
> 
> 赞同：6
> 
> 时间：2013-02-03T09:53:29.647
> 
> 标签：android, focus, admob, setfocus, adview

我正在创建视图并将这些视图添加到 linearlayout ，这些输入来自屏幕底部的 edittext，就像一个 messanger 应用程序一样。每当我按下“完成”按钮时，它都会触发并将该消息添加到该消息线性布局中。

问题 ：

当我想在这些消息之间放置 adview 时，例如在每 10 条消息之间。Edittext 失去焦点，导致整个布局向下滚动。

我想要的是 ：

Edittext 不应该失去焦点，并且每次它应该处于活动状态，等待打开键盘的输入。

我试过但没有奏效：

```
if (messageCounter % 10 == 0) {

        LinearLayout advertisedMessageLayout = new LinearLayout(this);
        advertisedMessageLayout.setOrientation(LinearLayout.VERTICAL);
        advertisedMessageLayout.setLayoutParams(new LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        AdView av = new AdView(this, AdSize.BANNER, MBConstants.ADVIEW_ID);
        //remove focus for every child of adview
        for (int i = 0; i < av.getChildCount(); i++) {
            av.getChildAt(i).setFocusable(false);
            av.getChildAt(i).setFocusableInTouchMode(false);
            av.getChildAt(i).setClickable(false);

        }
        av.setFocusable(false);
        av.setFocusableInTouchMode(false);
        av.setClickable(false);
        av.setEnabled(false);

        AdRequest request = new AdRequest();
        av.loadAd(request);

        advertisedMessageLayout.addView(messageRow);
        advertisedMessageLayout.addView(av);

        return advertisedMessageLayout;

    } 
```

是否有任何可能的方法来阻止 adview 集中注意力并表现得像普通视图？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-16T13:38:51.613

要解决这个问题，您需要在 onAdLoaded 事件中设置 AdView 布局参数。

```
@Override
public void onAdLoaded() {
    super.onAdLoaded();
    LinearLayout.LayoutParams lay = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    adView.setLayoutParams(lay);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T06:58:42.573

在 onCreate() 上将 adview 的可见性设置为 GONE

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        .........

        adView.setVisibility(View.GONE)

       ..........

    } 
```

之后，当广告加载时，将其可见性设置为 VISIBLE

```
adView.setAdListener(new AdListener() {
        @Override
        public void onAdLoaded() {
            super.onAdLoaded();

            adView.setVisibility(View.VISIBLE)
        }
    }); 
```

希望这可以帮助 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T12:28:48.930

Admob WebView 在这种情况下获得焦点。要从横幅视图中移除焦点，从活动中清除焦点或关闭软键盘

```
 etAddNote.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_DONE) {           
                activity.getCurrentFocus().clearFocus();

                return true;
            }
            return false;
        }
    }); 
```

或关闭软键盘

```
etAddNote.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_DONE) {
                View view = activity.getCurrentFocus();
                if (view != null) {
                    InputMethodManager imm = (InputMethodManager) activity
                            .getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(view.getWindowToken(), 0);
                }
                return true;
            }
            return false;
        }
    }); 
```

# php - 尝试使用 ajax (jQuery) 发送数据时的奇怪行为

> ID：14671273
> 
> 赞同：0
> 
> 时间：2013-02-03T09:54:50.267
> 
> 标签：php, ajax, litespeed

我正在编写一个必须与 SO 具有相同功能的网站。我的服务器使用 Litespeed，它提高了运行 php 文件的速度。

当我尝试以常规形式发送 php 代码时，一切似乎都很好，数据被发送到操作文件而不解释变量内的代码。但是，当我尝试使用 jQuery`$.post`方法在评论文本区域中发送相同的数据时，我收到了**Forbidden 403**错误。Litespeed 服务器在路上阻止了数据。我不知道为什么会发生这种情况，为什么`$_POST`在使用 ajax 时会自动评估数据？

这种情况并不是每次都会出现，只是在某些情况下才会出现，例如：

```
this is a new message which presents this php code: <?php mysql_query("SELECT * FROM my_table"); ?> 
```

请注意，如果我从我的消息中删除`<?php`and ，就可以了。`?>`我已经尝试过使用`encodeURI()`方法，但这并没有改变任何东西。

是否有任何设置必须应用于`.htaccess`不自动评估 $_POST 数据？

或者我应该在发送评论之前替换打开和关闭标签？

**稍后编辑**

这就是我现在设法解决此问题的方法，但我仍在等待以下建议`.htaccess`：

```
$but.prev('textarea').val().replace(/(<\?php)/gi,'-?php ').replace(/(<\?)/gi,'-? ').replace(/\?>/gi,' ?-'); 
```

在服务器端

```
str_replace(array('-?php','?-','-?'), array('`<?php','?>`','`<?'), $_POST['comment']); 
```

# mysql - 难以获得 3 表连接以返回预期结果

> ID：14671274
> 
> 赞同：0
> 
> 时间：2013-02-03T09:55:04.430
> 
> 标签：mysql, join

我在深入了解这个 sql 查询时遇到了一些困难。

表：

```
--Tickets--         --Finance--          --Access--
id_tickets          id_finance           id_access
name_tickets        id_event             id_event
cat_tickets         id_tickets           id_tickets
                    sold_finance         scan_access 
```

Finance 和 Access 都包含一行，其中包含工单中列出的每种工单类型的多个。我试图得到：

```
cat_tickets | total_sold | total_scan
-------------------------------------
single      | 3043       | 2571
season      | 481        | 292
comp        | 114        | 75
-------------------------------------
total       | 3638       | 2938 
```

我最接近我使用的结果：

```
SELECT tickets.cat_tickets, COALESCE(SUM(finance.sold_finance), 0) AS total_sold, COALESCE(SUM(access.scan_access), 0) AS total_scan
FROM finance INNER JOIN tickets ON finance.id_tickets = tickets.id_tickets
INNER JOIN access ON access.id_tickets = tickets.id_tickets
WHERE access.id_event = 235 AND finance.id_event = access.id_event
GROUP BY tickets.cat_tickets
ORDER BY tickets.cat_tickets DESC 
```

但这只是返回：

```
cat_tickets | total_sold | total_scan
-------------------------------------
single      | 4945       | 4437
season      | 954        | 599
comp        | 342        | 375
-------------------------------------
total       | 6241       | 5411 
```

有什么想法我可能会出错吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:19:38.560

尽管我完全清楚您想要什么，但如果结果是您所期望的，请尝试此查询。

```
SELECT tickets.cat_tickets, COALESCE(SUM(finance.sold_finance), 0) AS total_sold, COALESCE(SUM(access.scan_access), 0) AS total_scan
FROM finance LEFT JOIN tickets ON finance.id_tickets = tickets.id_tickets
LEFT JOIN access ON access.id_tickets = tickets.id_tickets
WHERE access.id_event = 235
GROUP BY tickets.cat_tickets
ORDER BY tickets.cat_tickets DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:20:24.540

免责声明：*由于该问题的数据不完整，因此未测试此查询。*

```
SELECT  z.Cat_tickets,
        COALESCE(x.total_sold,0) total_sold,
        COALESCE(y.total_scan,0) total_scan
FROM    tickets z
        LEFT JOIN
        (
            SELECT  a.id_tickets,
                    a.cat_tickets, 
                    SUM(b.sold_finance) total_sold
            FROM    tickets a
                    INNER JOIN finance b
                        ON a.id_tickets = b.id_tickets
            WHERE   id_event = 235
            GROUP   BY a.id_tickets, a.cat_tickets
        ) x ON z.id_tickets = x.id_tickets
        LEFT JOIN
        (
            SELECT  aa.id_tickets,
                    aa.cat_tickets, 
                    SUM(bb.scan_access) total_scan
            FROM    tickets aa
                    INNER JOIN Access bb
                        ON aa.id_tickets = bb.id_tickets
            WHERE   id_event = 235
            GROUP   BY aa.id_tickets, aa.cat_tickets
        ) y ON z.id_tickets = y.id_tickets 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:21:10.650

`access`问题是和表之间的关系`finance`，你必须对`join`它们。即使你`LEFT JOIN`的表，谓词`finance.id_event = access.id_event`也会成功`INNER JOIN`。作为一种解决方法，`UNION`像这样使用：

```
SELECT 
  tickets.cat_tickets, 
  SUM(CASE WHEN a.Type = 'f' THEN num ELSE 0 END) AS total_sold,
  SUM(CASE WHEN a.Type = 'a' THEN num ELSE 0 END) AS total_scan
FROM tickets 
LEFT JOIN
( 
  SELECT 'f' Type, id_tickets, sold_finance num
  FROM finance f
  WHERE id_event = 1
  UNION ALL
  SELECT 'a', id_tickets, scan_access
  FROM access 
  WHERE id_event = 1
) a ON a.id_tickets = tickets.id_tickets
GROUP BY tickets.cat_tickets; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/725de/1)

# java - 休眠查询实体不是按 id

> ID：14671277
> 
> 赞同：1
> 
> 时间：2013-02-03T09:55:49.583
> 
> 标签：java, hibernate

我可以使用以下代码查询具有 id 的行：

```
Session session = (Session) HibernateUtil.getSessionFactory().getCurrentSession();
transaction = session.beginTransaction();

result = (T) session.get(clazz, id); 
```

但我想实现一些不同的东西。为什么不可能（或者是吗？）声明某个列并获取与该列值匹配的所有行。像这样：

```
Session session = (Session) HibernateUtil.getSessionFactory().getCurrentSession();
transaction = session.beginTransaction();

result = (T) session.get(clazz, "column", "column_value"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:09:31.670

[使用Criteria API](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-creating)或[HQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)很容易实现。

假设 Hibernate 不支持通过非 id 列获取实体，因为[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)和[身份映射](http://martinfowler.com/eaaCatalog/identityMap.html)模式实现与 Hibernate L1 缓存。

还要考虑[Session#get 和 Session#load](http://www.mkyong.com/hibernate/different-between-session-get-and-session-load/)方法之间的差异。

# c# - 文件对话位图

> ID：14671279
> 
> 赞同：1
> 
> 时间：2013-02-03T09:56:11.160
> 
> 标签：c#, image, bitmap

我想在 C# 中进行一些图像处理，并且需要在对它们应用过滤器之前对齐两个图像。我将尝试通过在一个小矩形部分中的固定点扫描图像来做到这一点，我相信这使得有必要使用 Bitmap 类。

这部分有大量的白色像素，所以我想取这个区域的平均像素值来找到 y 轴的偏移，因为图像上有一个大的白色水平条。

两个图像中的 x 轴将相同。我想设置一些具有不同移位值的测试图像，从小到大，正负，所以我可以搜索最小值。

这将需要图像上的滚动条以少量移动它们。我对 C# 和低级程序员完全陌生。我一直在尝试使用以下代码获取 pictureBox1 中的图像。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing.Imaging;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace imageAlign
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Bitmap myImage = (Bitmap)pictureBox1.Image;
            OpenFileDialog ofd = new OpenFileDialog();

            if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK) ;
            {
                pictureBox1.Image = Image.FromFile();    
               // this.pictureBox1.Image = myImage;
            }
        }
    }
} 
```

当我`Image.FromFile();`单击表单上的按钮时，我希望选择图像，所以我什么都没通过。目前，我只有一个按钮和图片框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:01:48.323

您需要使用的`FileName`属性[`OpenFileDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)：

```
if (ofd.ShowDialog() == DialogResult.OK && ofd.FileName != "")
{
    pictureBox1.Image = Image.FromFile(ofd.FileName);
} 
```

从链接：

> 文件名包括文件路径和扩展名。如果未选择任何文件，则此方法返回一个空字符串 ("")。

# logic - 如何理解这种风格的K-map

> ID：14671285
> 
> 赞同：3
> 
> 时间：2013-02-03T09:56:55.587
> 
> 标签：logic, boolean-expression, karnaugh-map

我已经看到了用于逻辑设计的不同风格的卡诺图。这是他们使用的风格： ![在此处输入图像描述](../Images/389da4a40e30d8fcc41e3e481e6849bf.png)

有人知道这个K-Map是怎么做的吗？如何理解这种地图？或者他们是如何从那张地图上的那个方程推导出来的。该地图与普通地图完全不同，如下所示：![在此处输入图像描述](../Images/a4b0682688717bd7ffe965dfef6c1e5d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:17:57.627

原则上是相同的，只是行和列（或变量）的顺序不同

红色标签表示变量为真，蓝色表示变量为假

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-14T11:59:28.040

**这些映射以这种方式相互关联，唯一的区别是对应于变量的单元格（术语）索引或变量的顺序。**

**感叹号只是对变量的否定的替代。**!A 与 ¬A 相同，有时也记为 A'。

```
 !A    A    A   !A            ↓CD\AB → 00   01   11   10
     +----+----+----+----+                 +----+----+----+----+
  !B |  1 |  0 |  1 |  0 | !D           00 |  1 |  1 |  1 |  0 |
     +----+----+----+----+                 +----+----+----+----+
   B |  1 |  1 |  1 |  1 | !D     ~     01 |  1 |  x |  x |  1 |
     +----+----+----+----+                 +----+----+----+----+
   B |  x |  x |  x |  x |  D           11 |  x |  x |  x |  x |
     +----+----+----+----+                 +----+----+----+----+
  !B |  1 |  1 |  x |  x |  D           10 |  0 |  1 |  1 |  1 |
     +----+----+----+----+                 +----+----+----+----+
       !C   !C    C    C 
```

**如果您不确定给定 K-map 中的索引，您始终可以通过编写相应的真值表来检查。**

例如，“奇怪”K-map 中第一个单元格的输出值等于 1，如果 !A·!B·!C·!D（所有变量都取反），这对应于第一行-table，因此索引为 0。依此类推。

```
 index | A B C D | y
=======+=========+===
    0  | 0 0 0 0 | 1
    1  | 0 0 0 1 | 1
    2  | 0 0 1 0 | 0
    3  | 0 0 1 1 | x ~ 'do not care' state/output
-------+---------+---
    4  | 0 1 0 0 | 1
    5  | 0 1 0 1 | x
    6  | 0 1 1 0 | 1
    7  | 0 1 1 1 | x
-------+---------+---
    8  | 1 0 0 0 | 0
    9  | 1 0 0 1 | 1
   10  | 1 0 1 0 | 1
   11  | 1 0 1 1 | x
-------+---------+---
   12  | 1 1 0 0 | 1
   13  | 1 1 0 1 | x
   14  | 1 1 1 0 | 1
   15  | 1 1 1 1 | x 
```

**您可以像使用“正常”K-map 来查找蕴涵项（组）一样使用该映射，因为所有 K-map 索引都需要符合 Gray 的代码。**

**您可以看到简化的布尔表达式在这些 K-map 的两种样式中是相同的：**

```
f(A,B,C,D) = !A·!C + A·C + B + D = ¬A·¬C + A·C + B + D 
```

*   !A·!C 标记为红色，
*   A·C蓝，
*   B橙
*   和 D 绿色。

[![不同风格的卡诺图](../Images/b2bde28ac3468fb5fec812bddafa409f.png)](https://i.stack.imgur.com/rypbh.png)

K-maps 是使用 latex 的 \karnaughmap 命令和 tikz 库生成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:35:31.827

它实际上是同一张地图，但不是 A，而是 C，而不是 B，它们有 A，而不是 C，它们有 D，而不是 D，它们有 B

# regex - 为什么 `\d` 在 sed 的正则表达式中不起作用？

> ID：14671293
> 
> 赞同：75
> 
> 时间：2013-02-03T09:57:48.557
> 
> 标签：regex, linux, awk, sed

我正在尝试`\d`在 sed 中使用正则表达式，但它不起作用：

```
sed -re 's/\d+//g' 
```

但这是有效的：

```
sed -re 's/[0-9]+//g' 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-03T10:12:27.430

`\d`是一个开关而不是正则表达式宏。如果您想使用一些预定义的“常量”而不是`[0-9]`表达式，请尝试运行以下代码：

```
s/[[:digit:]]+//g 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-03T10:06:03.907

sed 中没有这样的特殊字符组。您将不得不使用`[0-9]`.

在 GNU sed 中，`\d`引入了 0-255 范围内的一到三位数字的十进制字符代码。如[本评论](https://stackoverflow.com/questions/3421095/removing-parts-of-string-that-contain-digit-with-sed-perl-one-liner#comment3561607_3421095)所示。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2016-11-15T04:39:40.687

您最好在 sed 中通过添加来使用扩展模式`-E`。在基本的 RegExp 中，\d 和其他一些不会被检测到 `-E Interpret regular expressions as extended (modern) regular expressions rather than basic regular expressions (BRE's). The re_format(7) manual page fully describes both formats.`

# c - 让 dyld 链接到可执行文件本身的函数？

> ID：14671295
> 
> 赞同：1
> 
> 时间：2013-02-03T09:58:00.210
> 
> 标签：c, linker, clang, dynamic-linking, dyld

我有一个专门的共享库，在执行可执行文件期间动态加载。这个库提供了函数`b()`。该函数又调用一个函数`a()`。

该`a`函数是在可执行文件中定义的，而不是库本身，所以我希望能够从库中调用我的一些可执行文件的代码。我已经设法使用该`-undefined dynamic_lookup`标志使 clang 将这些符号保留为惰性绑定，但是当我尝试运行可执行文件时 dyld 仍然抱怨：

```
dyld: lazy symbol binding failed: Symbol not found: _a
  Referenced from: /usr/local/lib/myLib.dylib
  Expected in: flat namespace 
```

我怎样才能得到这个符号链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:56:00.790

事实证明，这是由 Xcode 默认不导出符号引起的。您可以通过更改 LLVM 代码生成构建设置下的“默认隐藏符号”选项来解决此问题。如果您不使用 Xcode，这将控制是否`-fvisiblity=hidden`在命令行上使用该标志。

或者，您可以打开此选项并通过将`__attribute__((visibility("default")))`属性添加到要导出的函数来选择性地导出符号。

# c++ - __int64 将输出格式化为十六进制

> ID：14671298
> 
> 赞同：0
> 
> 时间：2013-02-03T09:58:08.387
> 
> 标签：c++, visual-studio-2010, visual-c++, mfc

我想将 __int64 类型参数转换为`CString`. 但我总是得到错误的输出。这是我的代码：

```
__int64 = offset;//non zero
CString strOutput;
strOutput.Format(_T("0x%x"), offset); 
```

错误的输出是：0x0

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T10:14:56.373

试试这个：

```
strOutput.Format(_T("0x%llx"), offset); 
```

甚至更好，如果可以的话`#include <inttypes.h>`：

```
strOutput.Format(_T("0x%"PRIx64""), offset); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T10:05:10.090

试试这个。

```
strOutput.Format(_T("0x%I64X"), offset); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T10:01:38.643

试试这个：

```
strOutput.Format(_T("%I64d"),offset); 
```

# vb.net - .net、树视图、节点、自定义属性

> ID：14671303
> 
> 赞同：1
> 
> 时间：2013-02-03T09:58:36.620
> 
> 标签：vb.net

我正在使用树视图通过递归填充来显示一些 DB 分层数据。我使用 node.name 属性作为来自 DB（键）的唯一对象 ID，使用 node.text 作为对象友好名称。

现在，由于我已经使用了一些查询来填充电视，因此可以很好地存储我在应用程序中可能需要的一些其他对象属性，但“节点”没有任何自定义属性，除了我已经使用的 node.tag。

问题是我可以拥有像自定义节点（具有自定义属性）这样的东西并且仍然可以链接到树视图吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:02:24.950

您仍然可以使用该`Tag`属性来存储属性的结构/列表/字典。

例子 ：

```
 Dim NodeProperties As New Dictionary(Of String, String)

        NodeProperties.Add("Property1", "value1")
        NodeProperties.Add("Property2", "value2")

        node.Tag = NodeProperties 
```

# android - 将 google drive 与 2.1+ android 应用程序集成

> ID：14671305
> 
> 赞同：1
> 
> 时间：2013-02-03T09:58:45.810
> 
> 标签：android, google-drive-api, sync, android-version

我正在尝试让我的应用程序将其数据库与驱动器同步，以便应用程序数据在他的所有设备中保持同步。我做了一些研究并找到了这个快速入门，[Dr.Edit](https://developers.google.com/drive/examples/android)但是当我下载源代码进行仔细检查时，我意识到它适用于 4.1+。很惊讶，我[在 google play 上查看了 google drive 应用程序](https://play.google.com/store/apps/details?id=com.google.android.apps.docs&hl=es)，发现你可以在 2.1+ 上安装它。

我知道更高版本的 android OS 不仅工作得更好，而且使我们作为开发人员的工作更容易。但是我很惊讶我找不到太多关于将谷歌驱动器与旧版本集成的信息。如果我们检查[当前 android 版本的分布](http://developer.android.com/about/dashboards/index.html)，我们可以很容易地注意到仅 2.3.X 就几乎存在于 50% 的设备上，那么为什么我们的应用程序不支持它们呢？

有谁知道在哪里可以找到将 google drive 与为 2.1+ 编写的应用程序集成的代码示例/教程？我只想同步一些数据（主要是应用程序的本地数据库）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:31:07.683

您可以为任何支持 Google Play 服务（2.2+）的设备编写云端硬盘应用。

[http://developer.android.com/google/play-services/index.html](http://developer.android.com/google/play-services/index.html)

# java - 从 Android 上的另一个类调用方法

> ID：14671307
> 
> 赞同：0
> 
> 时间：2013-02-03T09:58:53.360
> 
> 标签：java, android, methods

我创建了两个类，实际上它们都扩展了 Activity。我想做的是从第二类调用一个方法。

我正在尝试做的是从第二类调用该方法，然后在第一类中实现，不幸的是我没有成功。

我需要你的帮助来解决这个问题。谢谢

我的第一堂课：

```
package com.math4kids;

import android.app.Activity;
import android.os.Bundle;

public class testing002 extends Activity {

private Sounds myotherclass;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.numeracy);

    myotherclass.Randomsoundforrightanswer();

}

} 
```

第二类：

```
package com.math4kids;

import java.util.Random;

import android.app.Activity;
import android.content.Context;
import android.media.MediaPlayer;

public class Sounds extends Activity {

MediaPlayer cool, good, perfect, sweet, excellent, goodthinking, greatjob,
        notbad, thatstheway, youdidit, yes, again, wrong, sorry,
        sundfornum01, sundfornum02;
public Random random = new Random();

public Sounds(Context context){
    super.getApplicationContext();
}

public void Randomsoundforrightanswer() {
    cool = MediaPlayer.create(this, R.raw.cool);
    good = MediaPlayer.create(this, R.raw.good);
    perfect = MediaPlayer.create(this, R.raw.perfect);
    sweet = MediaPlayer.create(this, R.raw.sweet);
    excellent = MediaPlayer.create(this, R.raw.excellent);
    goodthinking = MediaPlayer.create(this, R.raw.goodthinking);
    greatjob = MediaPlayer.create(this, R.raw.greatjob);
    notbad = MediaPlayer.create(this, R.raw.notbad);
    thatstheway = MediaPlayer.create(this, R.raw.thatstheway);
    youdidit = MediaPlayer.create(this, R.raw.youdidit);
    yes = MediaPlayer.create(this, R.raw.yes);

    switch (random.nextInt(11)) {

    case 0:
        cool.start();
        break;
    case 1:
        good.start();
        break;
    case 2:
        perfect.start();
        break;
    case 3:
        sweet.start();
        break;
    case 4:
        excellent.start();
        break;
    case 5:
        goodthinking.start();
        break;
    case 6:
        greatjob.start();
        break;
    case 7:
        notbad.start();
        break;
    case 8:
        thatstheway.start();
        break;
    case 9:
        youdidit.start();
        break;
    case 10:
        yes.start();
        break;

    }

}

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T10:03:31.340

制作一个简单的普通 java 文件，然后在该类中定义这些方法。

```
import java.util.Random;
import android.media.MediaPlayer;

public class Sounds {

    Context context;
    MediaPlayer cool, good, perfect, sweet, excellent, goodthinking, greatjob,
        notbad, thatstheway, youdidit, yes, again, wrong, sorry,
        sundfornum01, sundfornum02;
    public Random random = new Random();

    public Sounds(Context context){
        this.context = context;
    }

    public void Randomsoundforrightanswer() {
        cool = MediaPlayer.create(context, R.raw.cool);
        good = MediaPlayer.create(context, R.raw.good);
        perfect = MediaPlayer.create(context, R.raw.perfect);
        sweet = MediaPlayer.create(context, R.raw.sweet);
        excellent = MediaPlayer.create(context, R.raw.excellent);
        goodthinking = MediaPlayer.create(context, R.raw.goodthinking);
        greatjob = MediaPlayer.create(context, R.raw.greatjob);
        notbad = MediaPlayer.create(context, R.raw.notbad);
        thatstheway = MediaPlayer.create(context, R.raw.thatstheway);
        youdidit = MediaPlayer.create(context, R.raw.youdidit);
        yes = MediaPlayer.create(context, R.raw.yes);

        switch (random.nextInt(11)) {

            case 0:
                cool.start();
                break;
            case 1:
                good.start();
                break;
            case 2:
                perfect.start();
                break;
            case 3:
                sweet.start();
                break;
            case 4:
                excellent.start();
                break;
            case 5:
                goodthinking.start();
                break;
            case 6:
                greatjob.start();
                break;
            case 7:
                notbad.start();
                break;
            case 8:
                thatstheway.start();
                break;
            case 9:
                youdidit.start();
                break;
            case 10:
                yes.start();
                break;

        }
    }
} 
```

像这样在活动中调用常规java文件的方法。

```
import android.app.Activity;
import android.os.Bundle;
public class testing002 extends Activity {
private Sounds myotherclass;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.numeracy);
        new Sounds().Randomsoundforrightanswer(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T10:02:37.480

你为什么要这样做？
为什么`Sounds`类扩展 Activity？
请再次阅读官方文档[Activity](http://developer.android.com/reference/android/app/Activity.html)。

如果你这样做是因为你需要一个上下文，只需将它作为参数传递给`Sounds`类。

您还需要访问[Android 开发指南](http://developer.android.com/training/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:04:37.367

一次只实例化一个 Activity。您不应该尝试从另一个活动中调用一个活动。

相反，您应该创建第三个类，其中包含您要调用的方法。

```
public class SoundManager{

    private context;

    public SoundManager(Context context){

        context.context = context;

    }

    public void Randomsoundforrightanswer() {

        cool = MediaPlayer.create(context, R.raw.cool);
        good = MediaPlayer.create(context, R.raw.good);
        perfect = MediaPlayer.create(context, R.raw.perfect);
        sweet = MediaPlayer.create(context, R.raw.sweet);
        excellent = MediaPlayer.create(context, R.raw.excellent);
        goodthinking = MediaPlayer.create(context, R.raw.goodthinking);
        greatjob = MediaPlayer.create(context, R.raw.greatjob);
        notbad = MediaPlayer.create(context, R.raw.notbad);
        thatstheway = MediaPlayer.create(context, R.raw.thatstheway);
        youdidit = MediaPlayer.create(context, R.raw.youdidit);
        yes = MediaPlayer.create(context, R.raw.yes);

        switch (random.nextInt(11)) {

        case 0:
            cool.start();
            break;
        case 1:
            good.start();
            break;
        case 2:
            perfect.start();
            break;
        case 3:
            sweet.start();
            break;
        case 4:
            excellent.start();
            break;
        case 5:
            goodthinking.start();
            break;
        case 6:
            greatjob.start();
            break;
        case 7:
            notbad.start();
            break;
        case 8:
            thatstheway.start();
            break;
        case 9:
            youdidit.start();
            break;
        case 10:
            yes.start();
            break;

        }
    }
} 
```

但是，您将不得不对 MediaPlayer 做更多的工作。在继续之前，您应该阅读它的文档。我展示的代码为您提供了您需要做的基础知识，但它不起作用。

最后，我能给你的最好建议是在继续之前学习 Java 和 OOP 的基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T10:05:49.100

除非 testing002 类实际上是您想用作 Activity 的 Activity，否则您应该将 randomsound... 函数移到单独的类中。

像声音类但不是活动。如果您在该类中定义函数，则可以在另一个类中构造并调用它。

# c# - 并行下载文件的最佳数量

> ID：14671308
> 
> 赞同：3
> 
> 时间：2013-02-03T09:59:03.807
> 
> 标签：c#, parallel-processing, webclient, downloadfileasync

我正在尝试同时下载多个文件。我如何确定要并行下载的最佳文件数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T10:03:52.140

无法回答 - 这取决于您无法控制的许多工厂，主要是延迟、丢包。

最佳数量将以尽可能少的连接耗尽所有带宽。随着时间的推移，这可能会因下载位置（同一服务器，而不是同一服务器）而异，并且可能会受到另一方的限制。

使其可配置，从 2-4 个连接开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T10:08:02.397

围绕这个问题有很多组成部分。服务器（文件主机）可以有效处理多少请求，文件大小是多少，用户电脑规格是多少，它可以处理多少线程等等......

为简单起见，我宁愿将此变量保留为用户可通过 UI 进行配置，以便用户可以根据自己的经验和需要设置值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T10:10:22.400

补充现有答案：服务器和网络的延迟非常重要。当服务器需要 1000 毫秒响应时，您可能需要 100 个连接才能使系统饱和。

# android - 未调用 ListView 自定义 OnItemClickListener

> ID：14671309
> 
> 赞同：2
> 
> 时间：2013-02-03T09:59:12.610
> 
> 标签：android, listview, textview, onitemclick

好的，在过去的几个小时里，我一直在努力弄清楚为什么我的自定义列表视图适配器无法与 OnItemClickListener 一起正常工作。我有一个 TextView，我使用 DrawableLeft 属性在 ListView 内的 textview 左侧绘制图像。现在在我的文本视图中，我确实将 android:focusable 和 android:focusableInTouchMode 以及 android:clickable all 设置为 false，并且在我的列表视图的根目录中，我将 android:descendantFocusability 设置为 blocksDescendants，因为这些是遇到这个确切问题的常见问题. 现在这是我要使用的布局文件：

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/menu"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="#363636"
android:dividerHeight="1dp"
android:divider="@drawable/menudivider"
android:paddingLeft="@dimen/list_padding"
android:paddingRight="@dimen/list_padding"
android:descendantFocusability="blocksDescendants" /> 
```

这是我的 TextView 布局：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/menu_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="#fff"
    android:typeface="sans"
    android:textSize="20sp"
    android:drawablePadding="10dp"
    android:padding="7dp"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:clickable="false" /> 
```

我在从 BaseAdapter 派生的类的 getView 函数中以编程方式设置了 DrawableLeft Image。至于我在其中实现 OnItemClickListener 函数的活动有点像这样：

```
public class ActivityBase extends Activity implements OnItemClickListener {

private ListView mSlidinglist = null;

@Override
public void onCreate(Bundle savedInstanceState) {
              super.onCreate(savedInstanceState);

              mSlidinglist = (ListView)findViewById(R.id.menu);
              ArrayList<MenuItem> items = new ArrayList<MenuItem>();
              items.add(new MenuItem("Test",R.drawable.test) );
              CustomAdapter adapter = new CustomAdapter(this,items);

              mSlidinglist.setAdapter(adapter);
              mSlidinglist.setOnItemClickListener(this);
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Toast.makeText(this, "Clicked", Toast.LENGTH_LONG).show();

     }
  } 
```

这是我的自定义适配器：

```
 public class CustomAdapter extends BaseAdapter
     {
       private ArrayList<MenuItem> items;
       private Context mContext;

      public CustomAdapter(Context context, ArrayList<MenuItem> items)
        {
        this.items = items;
        this.mContext = context;
        }

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View v = convertView;
    if(v == null) {
        LayoutInflater vi = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        v = vi.inflate(R.layout.list_row, null);
    }

    final MenuItem l = items.get(position);

    if(l != null) {
        TextView title = (TextView) v.findViewById(R.id.menu_list);

        title.setText(l.getTitle());
        title.setCompoundDrawablesWithIntrinsicBounds(l.getImageId(), 0, 0, 0);
    }
    return v;
}

@Override
public int getCount() {
    return items.size();
}

@Override
public Object getItem(int position) {
    return items.get(position);
}

@Override
public long getItemId(int position) {
    return position;
} 
```

}

MenuItem 类只是我需要的字段的设置器和获取器......

我无法启动它，我不明白如果需要更多代码，为什么会感谢任何帮助，只是让我知道只是不想发布所有内容。BaseAdapter 的子类非常简单，它只是使用 setCompoundDrawablesWithIntrinsicBounds 设置 TextView 和 DrawableLeft 字段的文本。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:24:31.753

好的，我刚刚测试了代码，对其进行了一些编辑，现在它可以工作了。

我改变了什么：

```
 if(l != null) {
    TextView title = (TextView) v; // insted of findView

    title.setText(l.getTitle());
    title.setCompoundDrawablesWithIntrinsicBounds(l.getImageId(), 0, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T20:44:46.017

尝试更改活动以扩展 ListActivity .. logcat 中的错误是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T23:32:18.023

奇怪的是，当我删除处理可聚焦性和可点击性的属性时，我开始工作了。我不明白，但看看这是否适合你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-12T05:35:26.163

将这些应用到子视图

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

将此应用于父布局

```
android:descendantFocusability="blocksDescendants" 
```

在您的代码中添加这两行：

```
 mSlidinglist.setClickable(true)
 mSlidinglist.setEnable(true) 
```

# ruby-on-rails - Rails - 自定义 html 到 simple_form 标签

> ID：14671310
> 
> 赞同：16
> 
> 时间：2013-02-03T09:59:34.697
> 
> 标签：ruby-on-rails, associations, simple-form

我正在尝试自定义 simple_form 关联的输出，基本上我需要在两行上显示一个复选框标签。我的想法是在“标签”中添加一个“br”标签，但不幸的是它被转义了，所以它实际上显示“br”而不是换行

我使用 lambda 自定义标签输出

```
<%= f.association :item, :as => :check_boxes, :collection => current_user.items, :label => false, :label_method => lambda { |item| "#{item.city.capitalize},<br> #{item.address}" }%> 
```

这会在标签字符串中产生一个转义的 br，我怎么能在两行上显示标签？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-03T12:25:45.530

`html_safe`在您不想转义的字符串上调用方法。

```
<%= f.association :item, :as => :check_boxes, :collection => current_user.items, :label => false, :label_method => lambda { |item| "#{item.city.capitalize},<br> #{item.address}".html_safe }%> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-21T08:54:07.533

对于那些希望在元素中包含自定义 html 的人，正如 OP 问题的标题所暗示的那样，您可以这样做：

```
= f.input(:Foo, label: "Foo <span>(Blah helper text blah)</span>".html_safe) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T12:21:38.597

有`html_safe`帮助吗？

```
<%= f.association(....).html_safe %> 
```

如果没有，请在 github 上发布一个示例应用程序来展示此问题，以便我们对其进行调试

# android - 是否推荐使用 if (debug) 语句？

> ID：14671315
> 
> 赞同：0
> 
> 时间：2013-02-03T09:59:56.463
> 
> 标签：android, performance

我打算添加一个 DEBUG 标志，并`if statement`在每次`Log.d`调用之前添加一个

```
 public static final boolean DEBUG = FALSE;
 if (DEBUG)
 {
    Log.d(TAG,"Debug"); //dead code
 } 
```

死代码会在编译时被删除，还是`if statement`每次都会被调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:01:45.123

不，它增加了代码的冗长，只需为此目的使用日志库，例如[Log4J](http://logging.apache.org/log4j/1.2/) ...

```
logger.debug("Here is some DEBUG"); 
```

在 Android 中，您可以使用[android-logging-log4j](http://code.google.com/p/android-logging-log4j/) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:05:07.950

它没有被完全删除，但由于 CPU 的分支预测，接下来不会对性能产生影响。

理想情况下，您应该使用记录器的日志记录级别来确定是否应该调用记录器。

注意：无论您是否检查（并且库应该检查），像这样的简单方法调用几乎没有开销（并且库应该检查）您获得性能优势的地方是如果您在日志消息中执行某些操作，例如

```
LOGGER.debug("The map is " + map); 
```

在这种情况下，只有启用调试时才会显示调试消息，但是每次都会构建字符串消息，这意味着效率更高。

```
if(LOGGER.isDebugEnabled())
    LOGGER.debug("The map is " + map); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T10:08:06.243

您的调试代码将始终被执行（总是 if）。顺便说一句，Android 已经有了这种类型的标志：`BuildConfig.DEBUG`

# maven - Datanucleus 增强器声称没有要运行的文件

> ID：14671327
> 
> 赞同：0
> 
> 时间：2013-02-03T10:01:52.997
> 
> 标签：maven, jdo, datanucleus

我有 Maven 项目，它基本上几乎是 Datanucleus 演示项目的副本。当我在 Eclipse 中为我的项目运行 Maven 安装时，它有时会运行增强器，这是我每次运行 maven 安装时都会发生的。但由于某些未知的原因，它有时会说跟随。

```
[INFO] --- maven-datanucleus-plugin:3.2.0-m1:enhance (default) @ my.datanucleus.dao ---
[WARNING] No files to run DataNucleus tool 'org.datanucleus.enhancer.DataNucleusEnhancer' 
```

我的 Maven 日志中没有其他警告或错误。我是不是做错了什么或者为什么会发生这种情况，因为这很烦人，因为如果不增强类，我的包将无法工作。

# javascript - 有什么方法可以防止在单例实例中覆盖/覆盖函数/变量？

> ID：14671332
> 
> 赞同：16
> 
> 时间：2013-02-03T10:02:34.607
> 
> 标签：javascript, singleton, javascript-objects, overwrite

考虑这个伪代码：

```
(function(window){
   var options = { /*where everything goes */ };

   var instance = (function(options){
       for (var i in options){
       if (options.hasOwnProperty(i)){
         this[i] = options[i];
       }
     }
   })(options);

   instance.callbacks = function(cb){
     //...
   }

   instance.is_allowed = function()
    //... checks, return boolean
   }

   window.instance = instance;
})(this); 
```

如果有人想要操纵这段代码（例如恶意用户），他会`is_allowed`用自己的函数重写该函数，例如使用地址栏（他没有 firebug，谁知道）。

```
javascript:(function(){ window.instance.is_allowed = function(){ return true; } })(); 
```

这是一个幼稚的例子，但这就是重点，Javascript 中的任何内容都可以被覆盖。

我知道在 es5 我们有 Object.defineProperty 所以你可以设置：

```
// being explicit
Object.defineProperty(instance, "is_allowed", {
  enumerable: false,
  configurable: false,
  writable: false,
  value: function(){
    // do checks
  }    
}); 
```

实际上，从这个意义上说，最好的方法是使用`Object.freeze(instance)`or`Object.seal(instance)`代替`Object.defineProperty`，因为后者可以再次调用`writable: false`（傻吧？）

有没有什么方法可以在旧浏览器（即 IE6-8）中运行而没有太多麻烦？如果不可能，那我就耸耸肩继续前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:21:22.340

# 提议

我不会说我是这些事情的专家。但是假设您可以完全包装您的代码并使用事件来触发行为，您可以使用如下结构：

```
Closed = function(args) { return (function() {
  "use strict";

  var secret, init, get_secret, use_secret;

  init = function(something){
    secret = something;
  };

  get_secret = function() {
    return secret;
  };

  use_secret = function () {
    console.log(secret);
  };

  /* Run constructor */
  init(args);

  /* Publish API */
  return { use_secret:use_secret };

}())}; 
```

`obj = Closed("Anything");`与您一起设置它仍然可以让恶意用户覆盖该`use_secret()`方法，因为它已暴露，但该`get_secret()`方法和任何其他内部结构都受到保护。

如果您的 init 方法声明了许多与应用程序的事件绑定，您可以通过这种方式将您的状态保持为私有。这些事件将能够触发内部方法，因为它们是从内部闭包内部绑定的，但外部代码不会看到它们。

## 预订

虽然这可能会解决您的问题，但我不能 100% 肯定它确实如此，无论如何也不值得信任。只要安全性在客户端，任何想要渗透您的应用程序的用户都可以。无论如何，没有什么可以阻止他们制作自己的对象来替换您的对象，无论是 ES5 还是没有 ES5。

对于任何真正需要安全的东西，您都必须在服务器端重新验证。永远不要相信客户端代码来保护你，请求甚至可能不是来自你服务的页面......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T21:54:32.027

> 如果有人想要操纵这段代码（例如恶意用户），他会用自己的代码重写 is_allowed 函数

他可以重写您的整个 javascript 代码，甚至不使用浏览器，而是模拟对您的服务器的“无浏览器”请求。

> 有没有什么方法可以在旧浏览器（即 IE6-8）中运行而没有太多麻烦？

不可以。用户可以更改您全局公开的任何内容，这取决于浏览器限制`javascript:`行为以避免用户被愚弄访问预先制作的链接。Firefox 最近对 javascript URL 协议进行了某种更改。

如本文所述：[http ://survey-remover.com/blog/javascript-protocol-dangers/](http://survey-remover.com/blog/javascript-protocol-dangers/)

> 从 Chrome v13、Firefox v6 和 IE 9 开始，浏览器开发人员已经注意到“javascript:”协议的危险性并随后禁止使用代码……对于 Chrome 和 IE，“javascript:”子字符串是粘贴代码时被剥离，而 Firefox 不再在活动页面范围内执行脚本。

所以...

> 如果不可能，那我就耸耸肩继续前进。

你应该。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:08:27.673

如果`is_allowed`完全是本地的呢？

```
(function(window){
   var options = {}, is_allowed;

   var instance = (function(options){
     for (var i in options) {
     if (options.hasOwnProperty(i)) {
        this[i] = options[i];
       }
     }
     return this;
   })(options);

   instance.callbacks = function(cb){
       /* ... */
   };

   function check_allowed(){
     /* check and let this function set [is_allowed] */
   };

  window.instance = check_allowed()
                     ? instance
                     : { callbacks: function(){(alert('not allowed'));}  };

} (this) ); 
```

[**jsBin**](http://jsbin.com/uqiker/1/)样机

顺便说一句：在您的代码中，`window.instance`将是`undefined`.

# django - 如何使用 django sweetpie 的 api 密钥身份验证？

> ID：14671336
> 
> 赞同：2
> 
> 时间：2013-02-03T10:03:05.510
> 
> 标签：django, authentication, tastypie

来自美味派教程：

```
from django.contrib.auth.models import User
from django.db import models
from tastypie.models import create_api_key

models.signals.post_save.connect(create_api_key, sender=User) 
```

教程说：

> “Tastypie 包含一个信号函数，可用于自动创建 ApiKey 对象。”

不知道把这段代码放在哪里，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:09:49.103

您可以将此代码放在`models.py`相关应用程序的文件中。或者，您也可以将它放在`signals.py`您的应用程序目录下——记住也要`import signals`放在您的应用程序的`__init__.py`文件中。

这段代码在这里所做的是，通过使用[信号](https://docs.djangoproject.com/en/dev/topics/signals/)，每次创建 a 时`User`，都会自动为该用户创建一个 HMAC API 密钥[[来源]](https://bitbucket.org/dc/django-tastypie/src/ee13e251ace5/tastypie/models.py)：

```
class ApiKey(models.Model):
    user = models.OneToOneField(User, related_name='api_key')
    key = models.CharField(max_length=256, blank=True, default='')
    created = models.DateTimeField(default=datetime.datetime.now)

    def __unicode__(self):
        return u"%s for %s" % (self.key, self.user)

    def save(self, *args, **kwargs):
        if not self.key:
            self.key = self.generate_key()

        return super(ApiKey, self).save(*args, **kwargs)

    def generate_key(self):
        # Get a random UUID.
        new_uuid = uuid.uuid4()
        # Hmac that beast.
        return hmac.new(str(new_uuid), digestmod=sha1).hexdigest()

def create_api_key(sender, **kwargs):
    """
    A signal for hooking up automatic ``ApiKey`` creation.
    """
    if kwargs.get('created') is True:
        ApiKey.objects.create(user=kwargs.get('instance')) 
```

# c# - 如何在 CodeBehind 中为 TreeView 的某些节点设置 css 类？

> ID：14671341
> 
> 赞同：4
> 
> 时间：2013-02-03T10:03:52.890
> 
> 标签：c#, asp.net, css, treeview

我想在代码隐藏中以不同的方式设置**某些节点的样式。**

在我`TreeView`，父母有两种类型的孩子。一种类型与父类型（例如organizationalUnit）相同，而另一种类型则不同（例如organizationalMembers）。

我想以不同的风格展示这两种类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-04T01:37:36.213

我没有得到讨厌的评论 - 实际上没有明显的解决方案，因为 TreeNode 既`CssClass`没有属性也没有`style`属性（恕我直言，设计疏忽）。

我有这个**确切的**需求，并通过将 TreeNode 的“文本”包含在具有类和/或样式属性的跨度中来解决它。我说“文本”是因为您*认为*那`TreeNode.Text`将是 HTML 元素的内部文本，但通过实验我发现如果您将其设置`node.Text`为 HTML，它将（出乎意料地）呈现为提供的 HTML（即设置 innerhtml）。

所以，例如，

```
TreeNode tn = new TreeNode("<span style='color:red;'>ABC</span>"); 
```

确实会呈现红色文本（而不是显示“跨度”等字样）。再次，出乎意料，但它确实有效。而且，我再次希望 TreeNode 具有（除了`CssClass`和/或`style`attrs 之外）可能`node.Html`用于设置 innerhtml 并让`node.Text`设置内部文本的 attr。
也许 MSFT 将 TreeNode 分配给了一个 jr 程序员 :)

这为我解决了，希望对其他人有帮助。

# python - Python pandas，如何截断 DatetimeIndex 并仅在特定间隔内填充缺失的数据

> ID：14671345
> 
> 赞同：1
> 
> 时间：2013-02-03T10:04:03.887
> 
> 标签：python, datetime, dataframe, pandas, truncate

```
 2012-10-08 07:12:22            0.0    0          0  2315.6    0     0.0    0
 2012-10-08 09:14:00         2306.4   20  326586240  2306.4  472  2306.8    4
 2012-10-08 09:15:00         2306.8   34  249805440  2306.8  361  2308.0   26
 2012-10-08 09:15:01         2308.0    1   53309040  2307.4   77  2308.6    9
 2012-10-08 09:15:01.500000  2308.2    1  124630140  2307.0  180  2308.4    1
 2012-10-08 09:15:02         2307.0    5   85846260  2308.2  124  2308.0    9
 2012-10-08 09:15:02.500000  2307.0    3  128073540  2307.0  185  2307.6   11
 ......
 2012-10-09 07:19:30            0.0    0          0  2276.6    0     0.0    0
 2012-10-09 09:14:00         2283.2   80   98634240  2283.2  144  2283.4    1
 2012-10-09 09:15:00         2285.2   18  126814260  2285.2  185  2285.6    3
 2012-10-09 09:15:01         2285.8    6   98719560  2286.8  144  2287.0   25
 2012-10-09 09:15:01.500000  2287.0   36  144759420  2288.8  211  2289.0    4
 2012-10-09 09:15:02         2287.4    6  109829280  2287.4  160  2288.6    5
 ...... 
```

我有一个 DataFrame 包含上面几天的交易所交易数据。我想要的数据来自`9:00:00AM - 11:30:00AM`and `13:00:00 - 15:15:00`，所以我想做两件事，

1.  对于 DataFrame 中的每个日期，将其截断为仅具有 和 范围内的`9:00:00AM - 11:30:00AM`数据`13:00:00 - 15:15:00`
2.  范围在 1.，填充缺失数据的频率为`500 milliseconds`

pandas 截断函数只允许我根据日期截断，但我想在这里根据 datetime.time 截断。另外，如何仅在我感兴趣的区间内填充缺失的数据。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:28:55.417

> 1.  对于 DataFrame 中的每个日期，将其截断为仅具有 9:00:00AM - 11:30:00AM 和 13:00:00 - 15:15:00 范围内的数据

为此使用索引[切片](http://pandas.pydata.org/pandas-docs/stable/indexing.html#slicing-ranges)，例如：

```
df = df[start_timestamp:end_timestamp] 
```

> 1.  范围为 1.，以 500 毫秒的频率填充缺失数据

生成一个索引为 500 毫秒的新数据帧。使用外部连接将此数据框与原始数据框[合并。](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html)这会为您提供一个包含定期行的数据框。缺失观察的行将包含 NaN 值。[然后用fillna](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.fillna.html)填充缺失的 NaN 值。

例子：

```
In [1]: import pandas as pd

In [2]: import numpy as np

In [3]: data = pd.DataFrame({"value": np.arange(5)}, index=pd.date_range("2013/02/03", periods=5, freq="3Min"))

In [4]: data
Out[4]: 
                     value
2013-02-03 00:00:00      0
2013-02-03 00:03:00      1
2013-02-03 00:06:00      2
2013-02-03 00:09:00      3
2013-02-03 00:12:00      4

In [5]: filler = pd.DataFrame({"value": [100] * 15}, index=pd.date_range("2013/02/03", periods=15, freq="1Min"))                                                                           

In [6]: filler
Out[6]: 
                     value
2013-02-03 00:00:00    100
2013-02-03 00:01:00    100
2013-02-03 00:02:00    100
2013-02-03 00:03:00    100
2013-02-03 00:04:00    100
2013-02-03 00:05:00    100
2013-02-03 00:06:00    100
2013-02-03 00:07:00    100
2013-02-03 00:08:00    100
2013-02-03 00:09:00    100
2013-02-03 00:10:00    100
2013-02-03 00:11:00    100
2013-02-03 00:12:00    100
2013-02-03 00:13:00    100
2013-02-03 00:14:00    100

In [7]: merged = filler.merge(data, how='left', left_index=True, right_index=True)                                                                                                         

In [8]: merged["value"] = np.where(np.isfinite(merged.value_y), merged.value_y, merged.value_x)                                                                                            

In [9]: merged
Out[9]: 
                     value_x  value_y  value
2013-02-03 00:00:00      100        0      0
2013-02-03 00:01:00      100      NaN    100
2013-02-03 00:02:00      100      NaN    100
2013-02-03 00:03:00      100        1      1
2013-02-03 00:04:00      100      NaN    100
2013-02-03 00:05:00      100      NaN    100
2013-02-03 00:06:00      100        2      2
2013-02-03 00:07:00      100      NaN    100
2013-02-03 00:08:00      100      NaN    100
2013-02-03 00:09:00      100        3      3
2013-02-03 00:10:00      100      NaN    100
2013-02-03 00:11:00      100      NaN    100
2013-02-03 00:12:00      100        4      4
2013-02-03 00:13:00      100      NaN    100
2013-02-03 00:14:00      100      NaN    100

In [10]: merged['2013-02-03 00:01:00':'2013-02-03 00:10:00']                                                                                                                                
Out[10]: 
                     value_x  value_y  value
2013-02-03 00:01:00      100      NaN    100
2013-02-03 00:02:00      100      NaN    100
2013-02-03 00:03:00      100        1      1
2013-02-03 00:04:00      100      NaN    100
2013-02-03 00:05:00      100      NaN    100
2013-02-03 00:06:00      100        2      2
2013-02-03 00:07:00      100      NaN    100
2013-02-03 00:08:00      100      NaN    100
2013-02-03 00:09:00      100        3      3
2013-02-03 00:10:00      100      NaN    100 
```

# python - 在 CPanel 上部署 django

> ID：14671348
> 
> 赞同：5
> 
> 时间：2013-02-03T10:04:25.710
> 
> 标签：python, django, cpanel

我已经完成了我的应用程序的开发，我已经准备好部署了。我正在使用 CPanel 租用主机。当前设置不包含既不用于 python 也不用于 django 的模块。你认为做什么更好。我可以从命令行安装 python 和 django 并通过 cPanel 界面吗？

如果有人知道 django 的 cPanel 插件并有任何经验，我很高兴听到！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:41:27.273

试试这个：

[http://server-support.co/blog/sysadmin/django-on-cpanel-server-for-shared-web-hosting/](http://server-support.co/blog/sysadmin/django-on-cpanel-server-for-shared-web-hosting/)

1.) 从[http://pypi.python.org/simple/django/](http://pypi.python.org/simple/django/)下载 Django 并将其解压到 /usr/src

2.) 运行 python setup.py install

# ruby-on-rails - Rails：如何创建单击时更新的选择框

> ID：14671349
> 
> 赞同：-4
> 
> 时间：2013-02-03T10:04:29.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

**当我们点击它时，如何使用form_for**创建一个 Select 元素来更新列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:16:30.143

这个[railscast](http://railscasts.com/episodes/102-auto-complete-association-revised)可能是一个好的开始。

# php - 通过mysql选择查询填写下拉列表

> ID：14671351
> 
> 赞同：0
> 
> 时间：2013-02-03T10:04:50.213
> 
> 标签：php, html, mysql, database, select

我有这个应该填写下拉列表的 php 脚本；我实际上将它嵌入到元素中，但它不起作用。这是我的脚本，可以清楚地解释我的问题：

```
<select name="cats">
   <?php
   require_once("connection.php");
   $rs = mysql_query("select cat_name from category");
   $count = 0;
   while($array = mysql_fetch_array($rs)){
    echo "<option>".$array[$count]."</option>";
   }
   mysql_close($con);
   ?>

  </select> 
```

如果你能帮我定义错误，如果这是错误的方法；最好的方法是什么。我会很感激实施。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:08:37.097

改变：

```
while($array = mysql_fetch_array($rs)){
   echo "<option>".$array[$count]."</option>";
} 
```

至

```
while($array = mysql_fetch_array($rs)){
    echo "<option value='".$array["cat_id"]."'>".$array["cat_name"]."</option>";
} 
```

`cat_id`您的类别表的 id 在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:41:49.613

我认为您的代码没有任何问题，请再次检查您的数据库连接并尝试。因为我在本地主机中尝试您的代码并在下拉列表中获取 cat_name。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:08:24.900

一般来说，这是正确的方法。我认为问题出在这里：

```
echo "<option>".$array[$count]."</option>"; 
```

您`$count`必须为 0，因此您将始终输出`$array[0]`，这是被选择的第一个字段（通常是某种 ID，但它取决于表结构）。这可能是也可能不是表中的正确字段。

我建议首先指定您选择的确切字段。例如：

```
select `id`, `text` from `category` 
```

然后使用关联数组`$array`得到你想要的，例如：`$array['id']`

# c# - 使用 P/Invoke 修改 EmguCV 以添加缺少的函数

> ID：14671356
> 
> 赞同：0
> 
> 时间：2013-02-03T10:05:12.273
> 
> 标签：c#, opencv, pinvoke, kinect, emgucv

一个月过去了，我正在制作一个机器人，它可以探索未知区域并使用 Kinect 传感器制作 3D 地图。

由于我是 C# 开发人员，我使用 EmguCV 作为 OpenCV 库的包装器，以将其功能用于计算机视觉。

出于某种目的，我想使用 OpenCV 提供的“estimateAffine3D”功能，但尚未添加到 EmguCV。因此，我想到了使用“P/Invoke”调用来像 Emgu 那样使用该函数。我打开了Emgu的源码，找到了CvInvoke类和calib3d类。在那我添加了这样的功能：

```
 [DllImport(OPENCV_CALIB3D_LIBRARY, CallingConvention = CvInvoke.CvCallingConvention)]
  [return: MarshalAs(CvInvoke.BoolToIntMarshalType)]
  public static extern bool cvEstimateAffine3D(
     IntPtr srcpt,
     IntPtr dstpt,
     out IntPtr outp,
     out IntPtr outliers,
     double ransacThreshold = 3.0f,
     double confidence = 0.99f); 
```

（抱歉有任何明显的错误：我只是 P/Invoking 的新手）

这件事根本行不通。如果在其上放置断点并且 Visual Studio 命中它，它不会在断点处停止，继续！

请帮忙！任何帮助，将不胜感激...

谢谢！

最好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:55:24.103

Affine3d Estimation[最近已添加](http://sourceforge.net/p/emgucv/code/ci/8c182459636f9534d9c86b574be56d2575d98c67/)到 git emgucv 存储库（您可以在 cvInvokeCvExtern.cs 中找到它）。

否则，如果您想扩展您当前的 emgucv 版本，您可以使用以下命令 p/invoke 它：

```
[DllImport(EXTERN_LIBRARY, CallingConvention = CvInvoke.CvCallingConvention, EntryPoint = "CvEstimateAffine3D")] 
internal extern static int  _CvEstimateAffine3D(IntPtr src, IntPtr dst, IntPtr affineEstimate, IntPtr inliers, double ransacThreshold, double confidence); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:56:54.813

我最终使用了一个名为 Mobile Robotics Programming Toolkit 的库，并制作了一个 C++/CLI 包装器来将函数公开给 c#...

# delphi - 这是使用 SQL 参数的正确方法吗？

> ID：14671363
> 
> 赞同：1
> 
> 时间：2013-02-03T10:05:41.723
> 
> 标签：delphi, delphi-xe3

**我的本意：**

当用户选择艺术家时，*唱片*组合框将填满特定艺术家拥有的唱片。

* * *

**编码：**

qDisco ( `TSQLQuery`) 是绑定到 cbDisco ( `TComboBox`) 的数据，包含以下 SQL：

```
SELECT DISTINCT discography
FROM Album
INNER JOIN Artist 
ON Album.artist_id = Artist.id
WHERE Artist.name = :artist; 
```

`:artist`参数由以下代码设置：

```
procedure Tmain.cbArtistChange(Sender: TObject);
begin
  qDisco.ParamByName('artist').Value := cbArtist.Items[cbArtist.ItemIndex];
end; 
```

我已确保`:artist`参数存储 的当前项的值`cbArtist`，但是当我编译应用程序时，`cbDiscography`仍然未填充。

我该怎么做才能使它起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:28:12.987

打开查询时，任何参数的值都会传递给数据库引擎。在您关闭并重新打开数据集之前，更改活动查询对象的参数值无效。

我猜你没有做最后一步，所以将你的事件处理程序方法更改为：

```
procedure Tmain.cbArtistChange(Sender: TObject);
begin
  qDisco.ParamByName('artist').Value := cbArtist.Items[cbArtist.ItemIndex];
  qDisco.Close;
  qDisco.Open;
end; 
```

如您所见，这涉及到一个完整的数据库往返，以检索与当前艺术家相关的所有唱片记录。

# cocoa - 我们如何实现类似于 Dash 的功能？

> ID：14671366
> 
> 赞同：0
> 
> 时间：2013-02-03T10:06:06.440
> 
> 标签：cocoa, text, input, code-snippets

具体来说，我们如何观察输入以匹配片段，以及如何使输入窗口出现可修改的内容，以便在 OS X 上插入文本字段和视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T01:06:22.400

Dash 的作者 Bogdan 慷慨地分享了这项技术。基本上，您需要通过使用 Accessibility API 的意志测试。

# android - 将文件从原始目录复制到 SD 卡

> ID：14671370
> 
> 赞同：1
> 
> 时间：2013-02-03T10:06:38.240
> 
> 标签：android, file

我想将一个 mp3 文件从我的应用程序***原始***文件夹复制到***/mnt/SDcard***，但我不知道这项工作。

这是不可能的吗？

如果您有任何答案，请告诉我这些代码所需的权限；

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:10:15.360

以下是您可以使用的方法：

```
InputStream in = getResources().openRawResource(R.raw.myresource);
FileOutputStream out = new FileOutputStream(somePathOnSdCard);
byte[] buff = new byte[1024];
int read = 0;

try {
   while ((read = in.read(buff)) > 0) {
      out.write(buff, 0, read);
   }
} finally {
     in.close();

     out.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:40:08.923

试试这个方法

```
/**
* @param sourceLocation like this /mnt/sdcard/XXXX/XXXXX/15838e85-066d-4738-a243-76c461cd8b01.jpg
* @param destLocation /mnt/sdcard/XXXX/XXXXX/15838e85-066d-4738-a243-76c461cd8b01.jpg
* @return true if successful copy file and false othrerwise
*  
* set this permissions in your application WRITE_EXTERNAL_STORAGE ,READ_EXTERNAL_STORAGE 
*  
*/
public static boolean copyFile(String sourceLocation, String destLocation) {
    try {
        File sd = Environment.getExternalStorageDirectory();
        if(sd.canWrite()){
            File source=new File(sourceLocation);
            File dest=new File(destLocation);
            if(!dest.exists()){
                dest.createNewFile();
            }
            if(source.exists()){
                InputStream  src=new FileInputStream(source);
                OutputStream dst=new FileOutputStream(dest);
                 // Copy the bits from instream to outstream
                byte[] buf = new byte[1024];
                int len;
                while ((len = src.read(buf)) > 0) {
                    dst.write(buf, 0, len);
                }
                src.close();
                dst.close();
            }
        }
        return true;
    } catch (Exception ex) {
        ex.printStackTrace();
        return false;
    }
} 
```

欲了解更多信息，请访问[AndroidGuide](http://sanathnandasiri.blogspot.com/2013/02/how-to-make-copy-of-file-in-android.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:10:08.433

看看这个问题并替换`assets`为`raw`.

[如何将文件从“资产”文件夹复制到 SD 卡？](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)

# ios - 离线文件传输 XMPP

> ID：14671372
> 
> 赞同：2
> 
> 时间：2013-02-03T10:06:53.310
> 
> 标签：ios, xmpp, offline, file-transfer, openfire

我需要一个 Openfire 插件组件或方向来开发自己来处理离线文件共享。在我们的一款 iOS IM 应用程序（如 WhatsApp）中，我们使用 Stream Initiation 通过媒体代理传输文件。这可以正常工作，但是如果收件人离线，您将无法设置字节流。为了克服这个限制，我正在寻找替代品，我正在研究的是：

1.  如果 SI 由于收件人离线而失败，则文件将传输到存储文件和原始消息的自定义 openfire 模块
2.  一旦收件人可用（在线），openfire 插件或服务器组件将发送文件和消息

任何人都有这方面的经验，或者有互补的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:35:53.887

您可以扩展和修改 XEP-0065 和 Openfire 代码，以便它存储您的文件以供以后下载。

您也可以使用完全不同的东西，例如 XEP-0066，将文件上传到 web 或 webdav 服务器，然后发送带有 OOB 的链接以供以后下载。

我不知道为此有标准化的 XEP。所以你必须自己开发。我知道的唯一现有项目是 Jabber Disk [http://dev.jabbim.cz/jdisk](http://dev.jabbim.cz/jdisk)

# jquery - 使用 jquery 和 codeigniter 提交表单不起作用

> ID：14671374
> 
> 赞同：0
> 
> 时间：2013-02-03T10:07:28.537
> 
> 标签：jquery, codeigniter

我有形式：

```
<form id="search_user" name="search_user" method="post" action="<?php echo base_url();?>index.php/controller/function">
    <input type="submit" name="submit" id="submit" value="Submit Search" />
</form>
<script type="text/javascript" src="<?php echo base_url(); ?>js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>js/content1.js"></script> 
```

这是我的jQuery；

```
$(':submit').submit(function () {
    var linkme = $(this);
    var url = linkme.attr("href");
    $(".content").load(url);

    return false;
}); 
```

当我按下按钮提交时，没有任何反应。请需要你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:11:33.000

您使用了不正确的选择器`:submit`。

您可以使用表单的 id 订阅表单的提交事件，然后使用`action`此表单的 发送 AJAX 请求：

```
$('#search_user').submit(function() {
    var url = this.action;
    $(".content").load(url); 
    return false; 
}); 
```

# gcc - wsn 的 ns2 mpolsr 编译错误

> ID：14671381
> 
> 赞同：1
> 
> 时间：2013-02-03T10:08:22.007
> 
> 标签：gcc, linker, makefile, ns2

我正在`mpolsr`尝试`ns-2.29`用`Linux Mint` . `gcc-4.7`我收到以下错误：

```
trace/cmu-trace.o: In function `MPOLSR_pkt::access(Packet const*)':
cmu-trace.cc:(.text._ZN10MPOLSR_pkt6accessEPK6Packet[_ZN10MPOLSR_pkt6accessEPK6Packet]+0x7): undefined reference to `MPOLSR_pkt::offset_'
collect2: error: ld returned 1 exit status
make: *** [ns] Error 1 
```

我发现该`cmu-trace.cc`文件包含正确的标题。我尝试添加具有偏移函数定义但没有成功的 cc 文件。任何帮助将不胜感激。

我正在使用`ns-2.29_mpolsr.rar`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:20:04.557

该`ns-2.29_mpolsr.rar`文件已损坏，因为作者`mpolsr`只更改了. `Makefile`，但没有更改`Makefile.in`. 因此，当您运行 . 时`./configure`，您将擦除`Makefile`.

这些是编译它需要执行的步骤：

**1\. 编辑`Makefile.in`：**

将目录`olsr`和添加`mpolsr`到`INCLUDES`变量中。它应该如下所示：

```
INCLUDES = \
        -I. \
        @V_INCLUDES@ \
        -I./tcp -I./sctp -I./common -I./link -I./queue \
        -I./adc -I./apps -I./mac -I./mobile -I./trace \
        -I./routing -I./tools -I./classifier -I./mcast \
        -I./diffusion3/lib/main -I./diffusion3/lib \
        -I./diffusion3/lib/nr -I./diffusion3/ns \
        -I./diffusion3/filter_core -I./asim/ -I./qs \
        -I./diffserv -I./satellite \
        -I./wpan -I./olsr -I./mpolsr 
```

将目标文件添加`mpolsr`到`OBJ_CC`变量中。您应该添加这样的一行（中间的一行是新行）：

```
 olsr/OLSR.o olsr/OLSR_state.o olsr/OLSR_rtable.o olsr/OLSR_printer.o \
        mpolsr/MPOLSR.o mpolsr/MPOLSR_state.o mpolsr/MPOLSR_m_rtable.o mpolsr/MPOLSR_printer.o mpolsr/MPOLSR_rtable.o\
        common/ns-process.o \ 
```

如果您使用的是新版本的`gcc`，您还应该添加该`-fpermissive`指令，否则将无法编译。为此，请将`.cc.o:`指令更改为：

```
.cc.o:
        @rm -f $@
        $(CPP) -fpermissive -c $(CFLAGS) $(INCLUDES) -o $@ $*.cc 
```

**2\. 使配置脚本可执行**

在`ns-2.29_mpolsr`目录中，运行

```
chmod +x configure 
```

**3.运行配置脚本**

根据 ns 的 allinone 版本，您可以运行如下内容：

```
./configure --with-otcl=$PWD/../otcl-1.13/ --with-tclcl=$PWD/../tclcl-1.19/ 
```

以上版本号适用于`ns-allinone-2.34`

**4.制作**

在同一目录下运行

```
make -j100 
```

我检查了上面的`gcc-4.6.3`内容，但它也应该与`gcc-4.7`.

# python - date_hierarchy = 'publication_date' 错误

> ID：14671388
> 
> 赞同：1
> 
> 时间：2013-02-03T10:09:28.900
> 
> 标签：python, django, django-models

我目前正在[阅读 Djangobook 教程的第 6 章](http://www.djangobook.com/en/2.0/chapter06.html)。我按照说明进行操作，直到一切正常！！！

我将 date_hierarchy = 'publication_date' 添加到我的代码中

```
class BookAdmin(admin.ModelAdmin):
    list_display = ('title', 'publisher', 'publication_date',)
    list_filter = ('publication_date',)
    search_fields = ('title',)
    date_hierarchy = 'publication_date' 
```

以上是我到目前为止在我的 admin.py 模型上的内容。

我得到的错误是

```
 Request Method: GET
    Request URL:    http://127.0.0.1:8000/admin/books/book/
    Django Version: 1.4.3
    Exception Type: AttributeError
    Exception Value:    
    'unicode' object has no attribute 'year'
    Exception Location: /usr/local/lib/python2.7/dist-packages/django/contrib/admin/templatetags/admin_list.py in date_hierarchy, line 302
    Python Executable:  /usr/bin/python
    Python Version: 2.7.3
    Python Path:    
    ['/home/bradford/Development/Djangocode/mysite',
     '/usr/lib/python2.7',
     '/usr/lib/python2.7/plat-linux2',
     '/usr/lib/python2.7/lib-tk',
     '/usr/lib/python2.7/lib-old',
     '/usr/lib/python2.7/lib-dynload',
     '/usr/local/lib/python2.7/dist-packages',
     '/usr/lib/python2.7/dist-packages',
     '/usr/lib/python2.7/dist-packages/PIL',
     '/usr/lib/python2.7/dist-packages/gst-0.10',
     '/usr/lib/python2.7/dist-packages/gtk-2.0',
     '/usr/lib/pymodules/python2.7',
     '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
     '/usr/lib/python2.7/dist-packages/ubuntuone-client',
     '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
     '/usr/lib/python2.7/dist-packages/ubuntuone-couch',
     '/usr/lib/python2.7/dist-packages/ubuntuone-installer',
     '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol']
    Server time:    Sun, 3 Feb 2013 03:42:02 -0600 
```

不太确定该怎么做！任何帮助表示赞赏！

```
class Book(models.Model):
    title = models.CharField(max_length = 100)
    authors = models.ManyToManyField(Author)
    publisher = models.ForeignKey(Publisher)
    publication_date = models.DateField(blank = True, null = True)

    def __unicode__(self):
        return self.title 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:26:50.430

尚未设置模型中的，这就是`publication_date`您看到错误的原因（空白字符串没有 year 属性，因为它不是真实的）。`Book``no attribute 'year'``datetime`

尝试将`publication_date`字段更改为

```
publication_date = models.DateField(auto_add_now=True) 
```

并清空您的数据库以重新开始（旧模型仍然是空白并产生此错误）。将`auto_add_now`预填充`publication_date`到模型创建的时间，您可以稍后更改它。更多信息在`DateField` [这里](https://docs.djangoproject.com/en/dev/ref/models/fields/#datefield)。

请注意，您仅在添加排序选项时才会看到此错误，因为到目前为止您还没有理由访问该`publication_date`字段 - 因此没有引发错误。

### 编辑

您可以完全重置您的数据库

```
$ python manage.py sqlclear <app_name> | python manage.py dbshell 
```

它打印出用于清除数据库的 SQL，`sqlclear`然后将其发送到数据库（`|`或管道）到`dbshell`. 然后运行

```
$ python manage.py syncdb 
```

重新同步您的模型和数据库。请注意，您通常不需要经历所有这些！

# php - 多种帖子类型的cakephp路由

> ID：14671389
> 
> 赞同：1
> 
> 时间：2013-02-03T10:09:32.013
> 
> 标签：php, cakephp, url-rewriting, routing

我正在使用 Cakephp 2+，并且我有一个名为“帖子”的模型，帖子可以是不同的类型，例如 - 博客帖子、消息等。

在**config/routes.php**中，如何设置我的路由以便我拥有`/posts/12/post-title`or `/blog/14/blog-title`？

目前我有这个：

```
Router::connect('/:type/add', array('controller' => 'posts', 'action' => 'add'),
    array('pass' => array('type')));

Router::connect('/:type/:action', array('controller' => 'posts'),
    array('pass' => array('type')));

# Custom posts router
Router::connect('/:type/:id/:slug', 
array('controller' => 'posts', 'action' => 'view'),
    array('pass' => array('type', 'id', 'slug'), 'id' => '[0-9]+')); 
```

但问题是这随后用于每个 URL，所以 cakephp 认为我的用户个人资料页面应该查看我的帖子控制器，因为它认为我正在传递一个 :type -

...

```
#View Profile
Router::connect('/profile/:id', array('controller' => 'users', 'action' => 'view'),
    array('pass' => array('id'), 'id' => '[0-9]+')); 
```

有谁知道正确执行此操作的方法？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:52:22.113

首先，路由的*顺序*很重要，如果多个路由匹配一个 URL，将处理第一个匹配的路由

接下来，您可以通过在 Router::connect() 的最后一个参数中为“type”键设置正则表达式来限制“what”将被视为“type”，就像对“id”所做的那样。您可以在正则表达式中包含所有有效类型，*或者*在正则表达式中添加一个“否定”部分以*排除*值，例如控制器名称

像这样的东西：

```
Router::connect(
    '/:type/:action',
    array(
         'controller'  => 'posts',
    ),
    array(
         /**
          * Custom type:
              * only allow 'post', 'blog' or 'message' as type here
              * to prevent overlapping with 'controllers'
          */
         'type'   => '(post|blog|message)',

         // Define what should be passed to the 'view' action as arguments
         'pass'   => array('type'),

         /**
          * Optionally, define what parameters should be automatically preserved
          * when creating URLs/links
          */
         'persist' => array('type'),
    )
);

Router::connect(
    '/:type/:id/:slug',
    array(
         'controller'  => 'posts',
         'action'      => 'view',
    ),
    array(
         /**
          * Custom type:
              * only allow 'post', 'blog' or 'message' as type here
              * to prevent overlapping with 'controllers'
          */
         'type'   => '(post|blog|message)',
         'id'     => '[0-9]+',

         // Define what should be passed to the 'view' action as arguments
         'pass'         => array('type', 'id', 'slug'),

         /**
          * Optionally, define what parameters should be automatically preserved
          * when creating URLs/links
          */
         'persist' => array('type'),
    )
); 
```

# c# - 在 imagelist、picturebox 和调整图片大小之间同步图像

> ID：14671397
> 
> 赞同：0
> 
> 时间：2013-02-03T10:10:26.863
> 
> 标签：c#, .net, winforms

我正在尝试开发一个 Windows 窗体应用程序来捕获屏幕快照，并在捕获它们时动态显示它们，并且我还想提供删除捕获的图像的功能。现在，我已经完成了捕获并将它们显示为缩略图。单击特定缩略图时，我想显示图像的放大版本。我在链接捕获的图像和显示调整大小的版本时遇到问题。这是我到目前为止所做的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing.Imaging;
using HotKeys;

namespace Snapper
{
    public partial class SnapperForm : Form
    {
        static int imgCounter = 0;//keeps track of img for naming

        //create an instance of GlobalHotKey
        private GlobalHotKey ghk1; 
        private GlobalHotKey ghk2;

        public SnapperForm()
        {
            InitializeComponent();

            //pass the required key combination and form to the constructor
            ghk1 = new GlobalHotKey(Constants.CTRL + Constants.SHIFT, Keys.S, this);
            ghk2 = new GlobalHotKey(Constants.CTRL + Constants.SHIFT, Keys.W, this);
        }

        private Keys GetKey(IntPtr LParam)
        {
            return (Keys)((LParam.ToInt32()) >> 16);
        }
        //Perform the action required when HotKey is pressed
        protected override void WndProc(ref Message m)
        {
            if (m.Msg == Constants.WM_HOTKEY_MSG_ID)
            {
                switch (GetKey(m.LParam))
                {
                    case Keys.S:
                        //take a snapshot of entire screen when CTRL + SHIFT + S is pressed
                        CaptureScreen();
                        break;
                    case Keys.W:
                        TestHotKeyCSW();
                        break;
                }                
            }
            base.WndProc(ref m);
        }

        private void TestHotKeyCSW()
        {
            MessageBox.Show("Hot key CTRL + SHIFT + W recived");
        }

        private void CaptureScreen()
        { 
            /*This method captures a snapshot of screen and 
             * adds it to the ImageFlowLayoutPanel
             */             

            Rectangle bounds = Screen.GetBounds(Point.Empty);
            Bitmap bmp = new Bitmap(bounds.Width,bounds.Height);
            Graphics g = Graphics.FromImage(bmp);
            g.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size); 
            imgCounter += 1;
            bmp.Save("snap" + imgCounter.ToString() + ".jpg", ImageFormat.Jpeg);

            //working with ImageList
            CapturedImagesList.Images.Add(bmp);
            PictureBox tempPictureBox = new PictureBox();

            //generates a thumbnail image of specified size

            tempPictureBox.Image = bmp.GetThumbnailImage(100, 100,
                                   new Image.GetThumbnailImageAbort(ThumbnailCallback),
                                   IntPtr.Zero);
            tempPictureBox.Size = new System.Drawing.Size(100, 100);
            tempPictureBox.Click += new EventHandler(this.tempPictureBox_Click);
            ImageFlowLayoutPanel.Controls.Add(tempPictureBox);                       
        }        

        //This click event will be used to display the enlarged images
        private void tempPictureBox_Click(object sender, EventArgs e)
        {            
            PreviewPictureBox.Image = ((PictureBox)sender).Image;

        }
        public bool ThumbnailCallback()
        {
            return true;
        }
        private void Main_Load(object sender, EventArgs e)
        {
            if (!ghk1.Register() || !ghk2.Register())
            {
                MessageBox.Show("Failed to register", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        private void SnapperForm_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (!ghk1.Unregister() || !ghk2.Unregister())
            {
                MessageBox.Show("Failed to UnRegister", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
    }
} 
```

我想将捕获的图像存储在图像列表中，并在动态生成的缩略图（图片框）之间同步，并在预览图片框中显示单击的图像的放大版本。当从flowlayoutpanel单击到previewpicturebox时，我能够显示图像，但只能再次显示缩略图的大小。我想放大图像。谁能指导我实现我的要求。如果这种设计是不可能的，任何人都可以指导我为这个应用程序使用适当的控件吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:47:46.550

由于使用 tempPictureBox_Click 方法，您的 PreviewPictureBox 将仅显示缩略图图像`PreviewPictureBox.Image = ((PictureBox)sender).Image;`。

sender 参数是您在 CaptureScreen() 方法中创建的 tempPictureBox，它的 Image 属性返回您通过调用创建的缩略图`bmp.GetThumbnailImage(...)`。

为了显示大图像，您必须存储 bmp 对象本身，而不仅仅是缩略图版本。一种方法是将其存储在`tempPictureBox.Tag`属性中。这些标记属性可以在大多数 Windows 窗体控件中找到，并用于存储与该控件关联的任意数据。

所以，总结一下：

添加`tempPictureBox.Tag = bmp;`CaptureScreen() 方法，

更改`PreviewPictureBox.Image = ((PictureBox)sender).Image;`为`PreviewPictureBox.Image = (Bitmap)((PictureBox)sender).Tag;`.

可能仍然需要调整 PreviewPictureBox 的大小，但至少它不会以这种方式显示缩略图。

# gwt - 如何在使用 GWT 加载 DOM 后加载和运行整个外部 js 文件

> ID：14671398
> 
> 赞同：0
> 
> 时间：2013-02-03T10:10:26.627
> 
> 标签：gwt

我想在加载 DOM 后加载并运行一个外部 js 文件，外部 js 文件如下：

```
<script type="text/javascript" src="http://example.com/example.js"></script> 
```

下面是 onLoad 钩子：

```
 @Override
    protected void onLoad()
    {
        super.onLoad();
        //how to load and run the whole js file?
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:05:03.043

看看[`ScriptInjector`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/ScriptInjector.html)，别忘了[`setWindow`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/ScriptInjector.FromUrl.html#setWindow%28com.google.gwt.core.client.JavaScriptObject%29)`(`[`TOP_WINDOW`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/ScriptInjector.html#TOP_WINDOW)`)`

# c# - 在 asp.net 中为 gridview 添加上下文菜单

> ID：14671400
> 
> 赞同：-1
> 
> 时间：2013-02-03T10:10:52.187
> 
> 标签：c#, asp.net

我想用上下文菜单绑定网格视图中的每一行。该菜单应包含 Edit 、 Delete 等选项。谁能给我一个示例代码，我也想知道我在哪里可以得到这个 contextmenu.dll 文件。请帮帮我，我已经尝试了所有已知的方法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:22:51.150

如果要扩展控件，请参阅[此](http://aspalliance.com/946_Extended_GridView_Control.all)

或者您可以使用 JQuery 作为上下文菜单。请参阅[右键单击 ASP.NET gridview](http://technico.qnownow.com/context-menu-on-right-click-in-asp-net-gridview-control/)或[http://rsolberg.com/contextmenuaspnet/上的上下文菜单](http://rsolberg.com/contextmenuaspnet/)

# xml - 一个值大于1000时的融合图

> ID：14671402
> 
> 赞同：0
> 
> 时间：2013-02-03T10:11:14.350
> 
> 标签：xml, fusioncharts

```
<chart caption="Forecast vs Actual"     
   subcaption="Forecast category : Nag In ( Forecast Period :Jan 31, 2013) "    
       lineThickness="0"                                    
       showBorder="0"                                   
      showValues="0"    
  formatNumberScale="0" 
  anchorRadius="2"              
  divLineAlpha="20"
  divLineColor="CC3300"                         
      divLineIsDashed="1"   
  showAlternateHGridColor="1"   
  alternateHGridAlpha="5"
  alternateHGridColor="CC3300"  
  labelStep="1" 
  numvdivlines="12"
      chartRightMargin="75" 
  chartLeftMargin="80"  
  slantLabels ="1"
  labelDisplay='Rotate' 
      bgColor="FFFFFF"> 
<categories>  
<category 
    label="Jan 16, 2013 07 42 27 AM"  />
<category label="Jan 11, 2013 08 42 04 AM"  />  
</categories> 
<dataset 
  seriesName="Forecast Amount (%)"  
  color="1D8BD1"    
  anchorBorderColor="1D8BD1"
  anchorBgColor="1D8BD1"> 
 <set value="1,440.00"/>
 <set value="1,360.00"/>
</dataset> 
<dataset seriesName="Actual Amount (%)"
  color="F1683C"    
  anchorBorderColor="F1683C" 
  anchorBgColor="F1683C"> 
  <set value="100.00"/>
 <set value="100.00"/>
</dataset> 
<dataset seriesName="Variance Amount (%)" 
 color="DF0174" 
 anchorBorderColor="DF0174" 
     anchorBgColor="DF0174"> 
     <set value="93.06"/>
     <set value="92.65"/>
 </dataset> 
</chart> 
```

我有这个 XML。我无法在图表中看到预测金额。我在 javascript 函数中使用以下代码：

```
 var FVSAChart3 = new FusionCharts("lib/charts/MSLine.swf", "byEntityGraph", "750", "480", "0", "0");
    FVSAChart3.setDataURL("AccGraph.xml");
    FVSAChart3.render("forecast-vs-actuals-entity"); 
```

请提出任何建议。我认为问题是预测金额值超过 1000，如果小于 1000 它工作正常..我使用的是 1.2 版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:58:35.303

请尝试将“，”设置为 XML 元素中“inThousandSeparator”属性的值。

```
<chart ... inThousandSeparator=','> 
```

在这种情况下，您将能够使用您之前发布的 XML 数据，并且您的图表将完美显示。

当您使用“，”或“。”提供任何自定义值时 作为千位或小数分隔符，您需要在 XML 的元素中使用“inThousandSeparator”或“inDecimalSeparator”。

# c++ - 将程序拆分为头文件和主文件

> ID：14671406
> 
> 赞同：-1
> 
> 时间：2013-02-03T10:11:44.817
> 
> 标签：c++, header

我一直在尝试将我的程序拆分为头文件和主文件，但无法完全弄清楚头文件将如何与它一起工作。任何试图理解这一点的帮助将不胜感激。

```
#include <iostream>
#include <fstream>
#include <string>
#include <set>

void comparing(std::ifstream& fileIn, std::ifstream& keywords, std::ofstream& outFile)
{
    std::string str;
    std::string word;
    std::set<std::string> keywordsSet;
        int check = 0;

        while (keywords >> word) {
        keywordsSet.insert(word);
        }

    while(fileIn >> str){

        if(str == "<p>") {
            check++;
        }

        if((check > 1 && str == "<p>") || (check == 1 && str == "</body>"))
        {
            outFile << "</p>";
            check--;
        }

    if(keywordsSet.find(str) != keywordsSet.end()) {

        outFile << "<i>" << str << "</i>" << " ";
        }

        else{
        outFile << str << " ";
        }           
    }   

}
int main(int argc, char* argv[])
{

std::ifstream fileIn;
fileIn.open (argv[1]);

std::ifstream keywords;
keywords.open (argv[2]);

std::ofstream outFile;
outFile.open(argv[3]);

    comparing(fileIn, keywords, outFile);

fileIn.close();
keywords.close();
outFile.close();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:22:54.440

在您的代码中，您声明一个函数：`comparing`. 您通常将所有声明放在一个头文件中（MSVC++ 使用`.h`后缀，但我更喜欢`.hpp`C++ 头文件），并将实现放在一个`.cpp`文件中。

您的标题（`comparing.hpp`或类似的东西）看起来像这样：

```
// Prevents redefinitions when including the same header multiple times
#pragma once

// Does the same thing, just to make sure 
// (some compilers don't support #pragma once)
#ifndef COMPARING_HPP
#define COMPARING_HPP

#include <fstream>

void comparing(std::ifstream&, std::ifstream&, std::ofstream&); // Function prototype

#endif 
```

你的`comparing.cpp`文件看起来像这样：

```
#include "comparing.hpp"
// Note the quotation marks instead of greater than, less than signs
// This is because the header is not in the standard include path,
// but rather in your project include path.

// Implementation, belongs in cpp file
void comparing(std::ifstream& fileIn, std::ifstream& keywords, std::ofstream& outFile)
{
    std::string str;
    std::string word;
    std::set<std::string> keywordsSet;
        int check = 0;

        while (keywords >> word) {
        keywordsSet.insert(word);
        }

    while(fileIn >> str){

        if(str == "<p>") {
            check++;
        }

        if((check > 1 && str == "<p>") || (check == 1 && str == "</body>"))
        {
            outFile << "</p>";
            check--;
        }

    if(keywordsSet.find(str) != keywordsSet.end()) {

        outFile << "<i>" << str << "</i>" << " ";
        }

        else{
        outFile << str << " ";
        }           
    }   

} 
```

然后你可以`compare`在 any 中使用该函数`.cpp`，只要包含标题即可。所以你的`main.cpp`* 文件看起来像这样：

```
#include "comparing.hpp"

int main(int argc, char* argv[])
{

std::ifstream fileIn;
fileIn.open (argv[1]);

std::ifstream keywords;
keywords.open (argv[2]);

std::ofstream outFile;
outFile.open(argv[3]);

    comparing(fileIn, keywords, outFile);

fileIn.close();
keywords.close();
outFile.close();

return 0;
} 
```

* * *

**`main.cpp`文件永远不需要标题；为什么需要`main`在代码中的其他地方调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:13:34.513

您通常将类和函数声明放在头文件中，然后将`.cpp`定义和实现放在文件中。

# css - 高度相对于宽度的多个垂直 div

> ID：14671410
> 
> 赞同：0
> 
> 时间：2013-02-03T10:12:02.070
> 
> 标签：css, html

我的 CSS 布局的一部分设置 div 相对于宽度的高度，以便所有屏幕尺寸的纵横比都相同。这样，我从不专门将 div 的高度设置为 px 值 - 高度只是宽度的纵横比。如果您以前没有遇到过这种技术，[这里有一个很好的解释](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)。

**到我的具体问题...**

考虑到这一点，我创建了以下简单的 div，它的宽度是高度的两倍：（[要查看它的实际效果，请参阅此小提琴）](http://jsfiddle.net/wn3v2/)

```
<html>
    <head>
       <style type="text/css">
.container
{
    position:relative;
    width:50%;/*half the width of the whole page*/
    margin:auto;/*center the whole thing*/
}
.relative_container
{
    background-color:blue;
    position:absolute;
    width:100%;
    top:0;
    left:0;
}
.set_height
{
    width:100%;
    height:100%;
    margin-top:50%;/*aspect ratio 2:1*/
}
       </style>
    </head>
    <body>
        <div class='container'>
            <div class='relative_container'>
                <div class='set_height'></div>
            </div>
        </div>
    </body>
</html> 
```

到目前为止一切都很好。但是我想在第一个下添加另一个相同的 div。正如您在[这个小提琴](http://jsfiddle.net/NKRPe/)中看到的那样，我无法让它们以任何方式显示，而不是彼此叠加。毫无疑问，答案在于清除 div [，如此处所示，](http://www.quirksmode.org/css/clearing.html)但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:27:34.217

你的`relative_container`类是绝对定位的，所以它将两个 div 放置在 top:0, left:0 处，宽度和高度相同（所以它们彼此重叠）。这对你正在做的事情没有意义。

如果您将定位更改为相对，并添加`float: left`到您的奇怪名称`relative_container`，您将获得所需的行为，因为它们将“浮动”到其父 div 中最左边的可能位置。

此外，您的“清晰” div 没有做任何事情。clear 属性告诉其他 div 不要浮动到给定 div 的右侧/左侧。如果你的 div 的宽度是 100%（即它填满了父级），那么无论如何都不能漂浮在它旁边。

示例 1：http: [//jsfiddle.net/NKRPe/13/](http://jsfiddle.net/NKRPe/13/)

**编辑：** [第二个示例](http://jsfiddle.net/NKRPe/50/)在不使用虚拟 div 的情况下完成了相同的任务。请注意，可以使用`padding-top`或`padding-bottom`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:31:40.843

添加到 .container ：

```
padding:25% 0 0; 
```

# objective-c - IF 语句不会返回 true

> ID：14671412
> 
> 赞同：-3
> 
> 时间：2013-02-03T10:12:11.400
> 
> 标签：objective-c, if-statement

> **可能重复：**
> [为什么我的比较 if 语句不起作用？](https://stackoverflow.com/questions/484709/why-is-my-comparing-if-statement-not-working)

```
- (NSInteger)setSegment:(NSString *)segmentValue{
NSLog(@"setSegment began");
NSLog(@"Input Value: %@", segmentValue);
NSInteger var = -1;
if (segmentValue == @"Yes"){
    var = 1;
    NSLog(@"%d", var);
}
else if (segmentValue == @"East"){
    var = 1;
    NSLog(@"%d", var);
}
else if (segmentValue == @"No"){
    var = 0;
    NSLog(@"%d", var);
}
else if (segmentValue == @"North"){
    var = 0;
    NSLog(@"%d", var);
}
else if (segmentValue == @"South"){
    var = 2;
    NSLog(@"%d", var);
}
else if (segmentValue == @"West"){
    var = 3;
    NSLog(@"%d", var);
}
NSLog(@"%d", var);
return var;

} 
```

当我执行此方法时，它会记录正确的值，并每次返回 -1。即使 if 语句应该返回 true，它们也不会执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T10:15:48.607

尝试将您的 NSString 与`isEqualToString`. 参考这里：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T10:16:09.910

这不是具有可重载运算符的 C++。`==`总是对其操作数进行数字比较，如果`NSString *`是指针类型，则表示指针相等。您必须使用该`isEqualToString:`方法来比较`NSString`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T10:32:10.197

这是一个典型的错误，可以在许多编程语言中发生。问题是对 string 对象的引用是指向内存中对象地址的指针，并且您的代码比较**指针值**而不是**string 的内容**，这是您想要的。

例如

```
NSString *a = @"Hello";
NSString *b = @"World"; 
```

现在想象一下`a`有地址`0x12345678`并且`b`有地址，`0x12348765`那么你的代码实际上正在做的是：

```
if (0x12345678 == 0x12348765)
{
    ...
} 
```

要比较字符串的内容，请使用`NSString`方法`isEqualToString`( [reference](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/isEqualToString%3a) )。

# android - 更新viewpager android中的部分片段

> ID：14671418
> 
> 赞同：0
> 
> 时间：2013-02-03T10:13:06.807
> 
> 标签：android, view, android-viewpager, fragmentpageradapter

我有这个问题，

在我的应用程序中有一个带有 3 页的 viewpager，在中间页面（位置 1）我设置了 getPageWidth 0.80f 然后当我向右滚动时，页面 1 由 fragment1 + 0.20 组成，从第 0 页到第 1 页，在这个页面中，fragment2 在 fragment1 之后刷新。

我采用了 notifyDataSetChanged()、requestLayout() 并看到了这个答案：

[ViewPager + PagerAdapter 在前两项后显示空白页](https://stackoverflow.com/questions/11659493/viewpager-pageradapter-shows-blank-pages-after-first-two-items)

但我没有解决我的问题。

问题是：我如何在更新page1的同时强制更新viewpager中的部分page2？

谢谢大家

# android - 安卓的开源密码生成器

> ID：14671424
> 
> 赞同：0
> 
> 时间：2013-02-03T10:14:18.937
> 
> 标签：android, encryption, open-source, passwords

> **可能重复：**
> [需要安全密码生成器推荐](https://stackoverflow.com/questions/4090021/need-a-secure-password-generator-recommendation)

我正在寻找适用于 android 的开源密码生成器库。你能指出我在哪里可以找到这样的库吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:46:08.163

您可以在 java 中使用随机类，而不是使用库。您也可以通过这样做来减少 MemorySize。

**或者**

请参阅此链接： [http ://www.texamples.com/how-to-generate-random-passwords-in-java/](http://www.texamples.com/how-to-generate-random-passwords-in-java/)

# mysql - IN 用于许多元素

> ID：14671425
> 
> 赞同：2
> 
> 时间：2013-02-03T10:14:51.907
> 
> 标签：mysql, sql, select, relational-division

我有桌子：

表站点

```
╔════╦═══════════════╗
║ ID ║     NAME      ║
╠════╬═══════════════╣
║  1 ║ stackoverflow ║
║  2 ║ google.com    ║
║  3 ║ yahoo.com     ║
║  4 ║ cnn.com       ║
╚════╩═══════════════╝ 
```

表格小部件

```
╔════╦════════════╗
║ ID ║    NAME    ║
╠════╬════════════╣
║  1 ║ polling    ║
║  2 ║ comments   ║
║  3 ║ newsletter ║
║  4 ║ mail       ║
╚════╩════════════╝ 
```

表站点小部件

```
╔═════════╦═══════════╗
║ SITE_ID ║ WIDGET_ID ║
╠═════════╬═══════════╣
║       1 ║         1 ║
║       1 ║         2 ║
║       2 ║         2 ║
║       2 ║         3 ║
║       4 ║         2 ║
║       3 ║         1 ║
║       3 ║         3 ║
║       1 ║         4 ║
║       3 ║         4 ║
║       4 ║         1 ║
║       4 ║         4 ║
╚═════════╩═══════════╝ 
```

我想获得所有带有评论 (2) 和邮件 (4) 的网站。

我尝试：

```
SELECT * FROM Site 
LEFT JOIN SiteWidget ON Site.id = SiteWidget.site_id 
WHERE SiteWidget.widget_id IN (2, 4) 
```

但这让我返回 stackoverflow (2, 4 - OK), google.com (2 - NOT OK - without 4), yahoo.com (4 - NOT OK, without 2) 和 cnn.com (2, 4 - OK)。我怎样才能获得所有带有 2 和 4 的网站？永远在一起，而不是一个人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T10:30:15.083

这是一种方法 - 使用额外的连接，以便您可以查找 2 个小部件的组合：

```
SELECT * FROM Site s
INNER JOIN SiteWidget w1 ON (s.id = w1.site_id)
INNER JOIN SiteWidget w2 ON (s.id = w2.site_id)
WHERE w1.widget_id=2 and w2.widget_id=4; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T10:23:54.777

这个问题叫做`Relational Division`.

```
SELECT  a.Name
FROM    Site a
        INNER JOIN SiteWidget b
            ON a.ID = b.Site_ID
        INNER JOIN Widget c
            ON b.Widget_ID = c.ID
WHERE   c.Name IN ('comments','mail')
GROUP   BY a.Name
HAVING  COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/df9ad/1)

如果没有对`widget_id`每个强制执行唯一性`site_id`，`DISTINCT`则需要关键字。

```
SELECT  a.Name
FROM    Site a
        INNER JOIN SiteWidget b
            ON a.ID = b.Site_ID
        INNER JOIN Widget c
            ON b.Widget_ID = c.ID
WHERE   c.Name IN ('comments','mail')
GROUP   BY a.Name
HAVING  COUNT(DISTINCT c.Name) = 2 
```

其他链接

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T10:20:53.723

尝试：

```
SELECT * FROM Site
INNER JOIN SiteWidget SW1
    ON SW1.widget_id = 2 
    AND Site.id = SW1.site_id
INNER JOIN SiteWidget SW2
    ON SW2.widget_id = 4
    AND Site.id = SW2.site_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T10:24:12.123

如果您想按小部件名称过滤，您可以使用它

```
SELECT
    S.id,
    S.name 
FROM Site S
    JOIN SiteWidget SW
        ON S.id = SW.site_id
    JOIN Widget W
        ON SW.widget_id = W.id
WHERE W.name IN ('comments', 'mail')
GROUP BY S.Id,S.name
HAVING COUNT(DISTINCT W.name) = 2 
```

或者如果您想按小部件 ID 过滤

```
SELECT
    S.id,
    S.name 
FROM Site S
    JOIN SiteWidget SW
        ON S.id = SW.site_id
WHERE SW.widget_id IN (2, 4)
GROUP BY S.Id,S.name
HAVING COUNT(DISTINCT SW.widget_id) = 2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-03T10:27:40.220

必须加入两次

```
SELECT * FROM Site 
inner JOIN SiteWidget m ON Site.id = m.site_id and m.widget_id = 4
inner Join SiteWidget c ON Site.id = c.site_id and c.widget_id = 2 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-03T10:36:49.277

这是另一种方式，[小提琴](http://www.sqlfiddle.com/#!2/df9ad/12)（感谢@JW。小提琴表和数据）

```
select s.id, s.name
from site s join (
   select sw.site_id, count(w.id) cnt
   from SiteWidget sw join widget w on sw.widget_id = w.id 
   where w.id in (2,4) 
   group by sw.site_id
) T on s.id = T.site_id and T.cnt = 2 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-03T10:50:46.520

从字面上看，您需要两个不同的 JOIN：

```
SELECT * FROM Site
    JOIN SiteWidget AS mail     ON (Site.id = mail.site_id AND mail.widget_id = 4)
    JOIN SiteWidget AS comments ON (Site.id = comments.site_id AND comments.widget_id = 2); 
```

如果您确定 SiteWidget 表没有重复项，例如因为 (site_id, widget_id) 是 MtM 关系通常所做的主键，那么您也可以使用 HAVING：这是 MySQL 语法：

```
SELECT Site.* FROM Site
    JOIN SiteWidget ON (SiteWidget.site_id = Site.id AND widget_id IN (2,4))
    GROUP BY Site.id HAVING COUNT(*) = 2; 
```

因为，由于唯一性，一个站点出现两次的唯一可能性是同时拥有两个小部件。一些人`GROUP BY`认为`Site`这是`GROUP BY`对.`SELECT``Site.id`

我发现第一个公式更清晰、更安全，而且我希望它或多或少和第二个公式一样快。

This is both because the many-to-many join table is very small (and index-covered to boot), and because this kind of operation was standard from day one, and is one of the most optimized. For example, I expect checks for widget_id 2 and 4 to run in parallel with a single logical read of the SiteWidget table in the join buffer. Even if they didn't, they would likely be loaded in parallel with a single *physical* read, the other hitting a SQL cache or, at the very least, the IOSS cache.

You might also try this slight variation, which should be the faster:

```
SELECT Site.* FROM Site
    JOIN SiteWidget AS mail     ON (Site.id = mail.site_id AND mail.widget_id = 4)
    JOIN SiteWidget AS comments ON (mail.site_id = comments.site_id AND comments.widget_id = 2); 
```

which ought to run the main JOIN against the smallest SiteWidget table, and come out with id lookups into Site. This is actually what is likely to get done *even if you word the query as in the first instance*.

The first formula is perhaps easier to extend by copying and pasting if you ever need to add, say, the `polling` widget.

# php - 使用phpdoc从第二类引用类中的私有属性？

> ID：14671436
> 
> 赞同：0
> 
> 时间：2013-02-03T10:16:21.400
> 
> 标签：php, class, phpdoc

```
namespace {
  class ClassOne {

    private $table = 'myTable';

  }
}

namespace private {
  class ClassTwo {

    public function __construct(\stdClass $data){}

  }
} 
```

基本上我想做的是记录函数中对`$table`属性的引用`ClassOne``__construct`

我希望我能做类似的事情

```
/**
 * @param \stdClass $data Row from the @see \competitionsModel::$table Table
 */ 
```

# android - LUT 安卓着色器

> ID：14671438
> 
> 赞同：1
> 
> 时间：2013-02-03T10:16:46.947
> 
> 标签：android, opengl-es, opengl-es-2.0, shader, lookup-tables

我需要将 LUT 从 Android 应用程序传递到片段着色器以进行颜色校正。我发现了一些将 LUT 作为位图传递的示例

```
GLES20.glBindTexture(GLES20.GL_TEXTURE_CUBE_MAP, name);
...
Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), R.raw.brick1);
GLUtils.texImage2D(GLES20.GL_TEXTURE_CUBE_MAP, 0, bitmap, 0); 
```

但是，如果我的 LUT 不是 3D 图像文件并且不是使用一系列 texture2D 贴图构建的，该怎么办？我的 LUT 是一个`float[]`数组。如何在我的片段着色器中将它与统一的 samplerCube 绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:56:58.737

简短的回答是“不可能直接通过 OpenGL 着色器，但可以通过渲染脚本”有关“着色器”方法的更多详细信息：片段着色器代码如下。注意必须定义1行才能使用texture3D

```
#extension GL_OES_texture_3D : enable 
precision mediump float;
uniform sampler2D u_texture0;
uniform vec4 uColor;
varying vec4 v_vertex;
uniform sampler3D u_lut;
void main() {
    vec2 texcoord0 = v_vertex.xy;
    vec4 rawColor=texture2D(u_texture0, texcoord0);
    vec4 outColor = texture3D(u_lut, rawColor.rgb);
    gl_FragColor = outColor; //rawColor;
} 
```

爪哇代码：

```
FloatBuffer texBuffer = ByteBuffer.allocateDirect(array.length * Float.SIZE).order(ByteOrder.nativeOrder()).asFloatBuffer();
GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 0, GLES20.GL_RGBA, iAxisSize, iAxisSize, 0, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, texBuffer); 
```

它可以在没有编译或运行时错误的情况下工作，但结果你会看到黑屏。当然你必须使用glTexImage3D函数而不是glTexImage2D，但是它没有在android SDK17中实现，你不能用它做任何事情。

好消息：在 Android SDK17 中实现了 ScriptIntrinsicLUT，可用于将 1D LUT 应用于源图像。Java代码如下：

```
private RenderScript mRS;
private Allocation mInAllocation;
private Allocation mOutAllocation;
private ScriptC_mono mScript;
private ScriptIntrinsicLUT mIntrinsic;
...
mRS = RenderScript.create(this);
mIntrinsic = ScriptIntrinsicLUT.create(mRS, Element.U8_4(mRS) );
createLUT();
mInAllocation = Allocation.createFromBitmap(mRS, mBitmapIn,
                                                Allocation.MipmapControl.MIPMAP_NONE,
                                                Allocation.USAGE_SCRIPT);
mOutAllocation = Allocation.createTyped(mRS, mInAllocation.getType());
mIntrinsic.forEach(mInAllocation, mOutAllocation);
mOutAllocation.copyTo(mBitmapOut);
...
private void createLUT() {
    for (int ct=0; ct < 256; ct++) {
        float f = ((float)ct) / 255.f;

        float r = f;
        if (r < 0.5f) {
            r = 4.0f * r * r * r;
        } else {
            r = 1.0f - r;
            r = 1.0f - (4.0f * r * r * r);
        }
        mIntrinsic.setRed(ct, (int)(r * 255.f + 0.5f));

        float g = f;
        if (g < 0.5f) {
            g = 2.0f * g * g;
        } else {
            g = 1.0f - g;
            g = 1.0f - (2.0f * g * g);
        }
        mIntrinsic.setGreen(ct, (int)(g * 255.f + 0.5f));

        float b = f * 0.5f + 0.25f;
        mIntrinsic.setBlue(ct, (int)(b * 255.f + 0.5f));
    }
} 
```

更多详情：http: [//developer.android.com/reference/android/renderscript/ScriptIntrinsicLUT.html](http://developer.android.com/reference/android/renderscript/ScriptIntrinsicLUT.html) [http://my.fit.edu/~vkepuska/ece5570/adt-bundle-windows-x86_64/sdk/sources/ android-17/com/android/rs/image/CrossProcess.java](http://my.fit.edu/~vkepuska/ece5570/adt-bundle-windows-x86_64/sdk/sources/android-17/com/android/rs/image/CrossProcess.java)

# qt - cv::bilateralFilter

> ID：14671443
> 
> 赞同：4
> 
> 时间：2013-02-03T10:17:30.063
> 
> 标签：qt, opencv

我正在尝试在 Qt 中使用 OpenCV 实现双边过滤器。到目前为止，我已经这样做了：

```
void MainWindow::on_actionOpen_triggered() {
    QString fileName =
      QFileDialog::getOpenFileName(this, tr("Open Image"), ".",
                                   tr("Image Files (*.png *.jpg *.jpeg *.bmp)"));
    image = cv::imread(fileName.toAscii().data());
    emit qtimage();
} 
```

哪里`image`是类型`cv::Mat`。我的过滤功能是：

```
cv::bilateralFilter(image, image, 0, 21, 3, 0);
QImage img = QImage((const unsigned char*)(image.data), 
                   image.cols,image.rows, QImage::Format_RGB888);
QPalette palette;
palette.setBrush(this->backgroundRole(), QBrush(img));
                 this->setPalette(palette); 
```

但它给出了一个运行时错误：

```
OpenCV Error: Assertion failed ((src.type() == CV_8UC1 || src.type() == CV_8UC3) && src.type() == dst.type() && src.size() == dst.size() && src.data != dst.data)
    in bilateralFilter_8u, file C:\Downloads\Software\OpenCV-2.2.0-win\OpenCV-2.2.0\modules\imgproc\src\smooth.cpp, line 1282
terminate called after throwing an instance of 'cv::Exception'
what():  C:\Downloads\Software\OpenCV-2.2.0-win\OpenCV-2.2.0\modules\imgproc\src\smooth.cpp:1282:
    error:    (-215) (src.type() == CV_8UC1 || src.type() == CV_8UC3) && src.type() == dst.type() && src.size() == dst.size() && src.data != dst.data in function bilateralFilter_8u 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T10:42:43.317

查看[文档](http://docs.opencv.org/modules/imgproc/doc/filtering.html#bilateralfilter)：

> 此过滤器不能就地工作。

您必须创建新图像作为双边过滤器的输出。

# emacs - 当 body-only 为 t 时，如何使用 org-mode 导出带有 TOC（内容表）的 html？

> ID：14671444
> 
> 赞同：2
> 
> 时间：2013-02-03T10:17:44.530
> 
> 标签：emacs, org-mode

我使用 org-mode 导出博客的内容，然后使用 jekyll 生成结果博客页面。

我发现当我将**body-only**设置为 true 时，org-project 导出不包含 org 文件的**TOC**（目录）。

如何配置让 emacs 生成 TOC？

这是我的`.emacs`配置：

```
;; org-mode project define                                                                                                            
(setq org-publish-project-alist
      '(
        ("org-blog-content"
         ;; Path to your org files.                                                                                                   
         :base-directory "~/ChinaXing.org/org/"
         :base-extension "org"

         ;; Path to your jekyll project.                                                                                              
         :publishing-directory "~/ChinaXing.org/jekyll/"
         :recursive t
         :publishing-function org-publish-org-to-html
         :headline-levels 4
         :html-extension "html"
         :table-of-contents t
         :body-only t ;; Only export section between <body></body>                                                                    
         )

        ("org-blog-static"
         :base-directory "~/ChinaXing.org/org/"
         :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf\\|php"
         :publishing-directory "~/ChinaXing.org/jekyll/"
         :recursive t
         :publishing-function org-publish-attachment)
        ("blog" :components ("org-blog-content" "org-blog-static"))
        )) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:21:34.103

根据org-mode 电子邮件列表的[这篇](http://lists.gnu.org/archive/html/emacs-orgmode/2011-09/msg00599.html)帖子，...

> [...] 如果 body-only 是 t，HTML 导出器将拒绝包含 TOC；atom exporter 和“使用 Wanderlust 发送 HTML 消息”黑客依赖于这种行为，这就是为什么在官方 Org 存储库中没有更改它的原因。

一种解决方案是修补 org-mode 的源代码，如下所示：

[http://thread.gmane.org/gmane.emacs.orgmode/24227](http://thread.gmane.org/gmane.emacs.orgmode/24227)

Ian Barton 显然已经实现了另一种使用 jQuery 动态生成 TOC 的方法。如果您对该解决方案的详细信息感兴趣，您可以考虑回复[此主题帖子。](http://thread.gmane.org/gmane.emacs.orgmode/24227)

# java - 删除单链表的最后一个元素

> ID：14671447
> 
> 赞同：0
> 
> 时间：2013-02-03T10:18:00.820
> 
> 标签：java, data-structures, linked-list

以下是我的尝试： -

```
public void removeTail(){
    Node precurrent=null;
    Node transverse=head;
    if(size != 0) {
        while(transverse.getNext() !=null) {
            System.out.println("oh"+transverse.getElement());
            precurrent=transverse;
            transverse=transverse.getNext();
        }
        precurrent.setNext(null);
        size--;
    }
    else{
        System.out.println("List is all ready empty");
    }
} 
```

上面代码的问题是当只剩下一个节点并且我尝试删除它时它会出错。这是因为我定义 precurrent 的方式。请建议应该采取什么措施来处理这种情况。我不想添加 size==1 的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:23:44.840

有两种可能的方式。

要么检查你的大小是否等于 1。

或者这将是我的解决方案，`precurrent`就像`head`你做的那样初始化`transverse`

# android - 抓住滑动以关闭事件

> ID：14671453
> 
> 赞同：90
> 
> 时间：2013-02-03T10:19:54.467
> 
> 标签：android, service, notifications, swipe, temporary-files

一旦服务完成（成功或失败），我正在使用 android 通知来提醒用户，并且我想在该过程完成后删除本地文件。

我的问题是，如果发生故障 - 我想让用户有一个“重试”选项。如果他选择不重试并关闭通知，我想删除为处理目的而保存的本地文件（图像......）。

有没有办法捕捉通知的滑动关闭事件？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-02-03T10:39:51.530

**DeleteIntent**：DeleteIntent 是一个 PendingIntent 对象，它可以与通知相关联，并在通知被删除时被触发，ether by ：

*   用户特定操作
*   用户删除所有通知。

您可以将 Pending Intent 设置为广播接收器，然后执行您想要的任何操作。

```
 Intent intent = new Intent(this, MyBroadcastReceiver.class);
  PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 0, intent, 0);
  Builder builder = new Notification.Builder(this):
 ..... code for your notification
  builder.setDeleteIntent(pendingIntent); 
```

**我的广播接收器**

```
public class MyBroadcastReceiver extends BroadcastReceiver {
      @Override
      public void onReceive(Context context, Intent intent) {
             .... code to handle cancel
         }

  } 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-12-18T23:55:46.347

一个完全冲洗掉的答案（感谢我先生的回答）：

1）创建一个接收器来处理滑动关闭事件：

```
public class NotificationDismissedReceiver extends BroadcastReceiver {
  @Override
  public void onReceive(Context context, Intent intent) {
      int notificationId = intent.getExtras().getInt("com.my.app.notificationId");
      /* Your code to handle the event here */
  }
} 
```

2) 在清单中添加一个条目：

```
<receiver
    android:name="com.my.app.receiver.NotificationDismissedReceiver"
    android:exported="false" >
</receiver> 
```

3) 为待处理的意图使用唯一的 id 创建待处理的意图（此处使用通知 id），因为没有这个相同的额外内容将被重复用于每个解除事件：

```
private PendingIntent createOnDismissedIntent(Context context, int notificationId) {
    Intent intent = new Intent(context, NotificationDismissedReceiver.class);
    intent.putExtra("com.my.app.notificationId", notificationId);

    PendingIntent pendingIntent =
           PendingIntent.getBroadcast(context.getApplicationContext(), 
                                      notificationId, intent, 0);
    return pendingIntent;
} 
```

4）建立你的通知：

```
Notification notification = new NotificationCompat.Builder(context)
              .setContentTitle("My App")
              .setContentText("hello world")
              .setWhen(notificationTime)
              .setDeleteIntent(createOnDismissedIntent(context, notificationId))
              .build();

NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.notify(notificationId, notification); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-02T12:51:56.483

另一个想法：

如果您正常创建通知，您还需要其中的一、二或三项操作。我创建了一个“NotifyManager”，它创建了我需要的所有通知并接收所有 Intent 调用。所以我可以管理所有的动作，也可以在一个地方捕捉解雇事件。

```
public class NotifyPerformService extends IntentService {

@Inject NotificationManager notificationManager;

public NotifyPerformService() {
    super("NotifyService");
    ...//some Dagger stuff
}

@Override
public void onHandleIntent(Intent intent) {
    notificationManager.performNotifyCall(intent);
} 
```

创建 deleteIntent 使用这个（在 NotificationManager 中）：

```
private PendingIntent createOnDismissedIntent(Context context) {
    Intent          intent          = new Intent(context, NotifyPerformMailService.class).setAction("ACTION_NOTIFY_DELETED");
    PendingIntent   pendingIntent   = PendingIntent.getService(context, SOME_NOTIFY_DELETED_ID, intent, 0);

    return pendingIntent;
} 
```

我用它来设置这样的删除意图（在 NotificationManager 中）：

```
private NotificationCompat.Builder setNotificationStandardValues(Context context, long when){
    String                          subText = "some string";
    NotificationCompat.Builder      builder = new NotificationCompat.Builder(context.getApplicationContext());

    builder
            .setLights(ContextUtils.getResourceColor(R.color.primary) , 1800, 3500) //Set the argb value that you would like the LED on the device to blink, as well as the rate
            .setAutoCancel(true)                                                    //Setting this flag will make it so the notification is automatically canceled when the user clicks it in the panel.
            .setWhen(when)                                                          //Set the time that the event occurred. Notifications in the panel are sorted by this time.
            .setVibrate(new long[]{1000, 1000})                                     //Set the vibration pattern to use.

            .setLargeIcon(BitmapFactory.decodeResource(context.getResources(), R.mipmap.ic_launcher))
            .setSmallIcon(R.drawable.ic_white_24dp)
            .setGroup(NOTIFY_GROUP)
            .setContentInfo(subText)
            .setDeleteIntent(createOnDismissedIntent(context))
    ;

    return builder;
} 
```

最后在同一个 NotificationManager 中是 perform 函数：

```
public void performNotifyCall(Intent intent) {
    String  action  = intent.getAction();
    boolean success = false;

    if(action.equals(ACTION_DELETE)) {
        success = delete(...);
    }

    if(action.equals(ACTION_SHOW)) {
        success = showDetails(...);
    }

    if(action.equals("ACTION_NOTIFY_DELETED")) {
        success = true;
    }

    if(success == false){
        return;
    }

    //some cleaning stuff
} 
```

# c# - EntityFramework Code First 继承与自定义鉴别器

> ID：14671460
> 
> 赞同：2
> 
> 时间：2013-02-03T10:21:11.320
> 
> 标签：c#, entity-framework, inheritance, ef-code-first

我正在尝试在 EntityFramework Code First 中映射以下继承

```
public class Member
{
    public string ProjectName { get; set; }
    public string AssemblyName { get; set; }
    public string NamespaceName { get; set; }
    public string TypeName { get; set; }
    public string Signature { get; set; }
    public string DisplayName { get; set; }
    public MemberType Type { get; set; }
    public string Summary { get; set; }
    public bool IsStatic { get; set; }
    public bool IsInherited { get; set; }

    //public virtual Type ParentType { get; set; } // ignore this
}

public class Field : Member
{
    public string ValueType { get; set; }
    public bool IsReadOnly { get; set; }
    public bool IsVolatile { get; set; }
}

public enum MemberType
{
    Constructor,
    Field,
    Method,
    Operator,
    Property
} 
```

正如您可能从代码中猜到的那样，我计划及时添加更多成员的子类（命名为构造函数、方法、运算符和属性），但首先我只想让字段一个正常工作。

我的映射代码看起来像这样

```
modelBuilder.Entities<Member>().Configure(config =>
{
    config.HasKey(m => new { m.ProjectName, m.AssemblyName, m.NamespaceName, m.TypeName, m.Signature });
    config.Property(m => m.DisplayName).IsRequired();
    config.ToTable("Members");
});

modelBuilder.Entities<Field>().Configure(config =>
{
    config.HasKey(f => new { f.ProjectName, f.AssemblyName, f.NamespaceName, f.TypeName, f.Signature });
});

modelBuilder.Entity<Member>()
    .Map<Field>(m => 
    {
        m.ToTable("Fields");
        m.Requires("Type").HasValue((int)Service.DataTypes.MemberType.Field).IsRequired();
    }); // note: realy not certain about this one 
```

我想要的是生成两个表。一个名为“Members”，一个名为“Fields”，并使用 -class 中的`Type`-property`Member`作为鉴别器，我确定我只是在这里做一些非常愚蠢的事情，但我不能为我的生命出来怎么做。因为使用当前代码，它会在“字段”表中生成一个名为“类型”的列，您显然不需要它，因为它是一个常量。

所以我只是想知道，有人能告诉我我到底做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:28:07.907

那里有错字吗？您的班级有一个字段 Valuetype Not Type。

我从未尝试过使用 JUST 1 映射，请尝试使用第二张表来确保。

```
modelBuilder.Entity<Member>()
.Map<Field>(m => 
{
    m.ToTable("Fields");
    m.Requires("ValueType").HasValue((int)Service.DataTypes.MemberType.Field).IsRequired();
})
.Map<SECONDTYPE>(m =>
{
    m.Requires("ValueType").HasValue(42);
}); 
```

# solr - Tika 获取存储在数据库中的二进制内容，但不对其进行索引

> ID：14671461
> 
> 赞同：0
> 
> 时间：2013-02-03T10:21:25.617
> 
> 标签：solr, binaryfiles, apache-tika

我正在尝试解析存储在 file_data 列中表 document_attachment 中的数据库中的二进制内容数据，并尝试对其进行索引，以便其内容可用于使用 Solr 进行搜索。当我运行索引器时，它获取的行数是在名为“dcs”的实体中运行查询返回的行数的两倍，并且不会引发错误或异常。但是，它不索引二进制内容（尽管从表中获取它，但我与 tika 关联的字段）。

我正在使用 apache-solr-3.6.1 和 Tika 1.0

我的配置文件看起来像：

数据配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<dataConfig>
 <dataSource
          driver="com.mysql.jdbc.Driver"
          url="jdbc:mysql://localhost/espritkm_1?zeroDateTimeBehavior=convertToNull"
          user="root"
          password=""
          autoCommit="true" batchSize="-1"
          convertType="false"
          name="test"
          />

  <dataSource name="fieldReader" type="FieldStreamDataSource" />
  <document name="items">
  <entity name="dcs"
          query="SELECT 222000000000000000+d.id AS common_id_attr,d.id AS id,UNIX_TIMESTAMP(d.created_at)  AS date_added,d.file_name as common1, d.description as common2, d.file_mime_type as common3, 72 as common4,(Select group_concat(trim(tags) ORDER BY trim(tags) SEPARATOR ' | ') from tags t where t.type_id = 72 AND t.feature_id = d.id group by t.feature_id) as common5,d.created_by as common6, df.name as common7,CONCAT(d.file_name,'.',d.file_mime_type) as common8,'' as common9,(Select da.file_data from document_attachment da where da.document_id = d.id) as text  FROM document d LEFT JOIN document_folder df ON df.id = d.document_folder_id  WHERE d.is_deleted = 0 and d.parent_id = 0 " dataSource="test" transformer="TemplateTransformer">

<field column="common_id_attr" name="common_id_attr" />
    <field column="id" name="id" />
        <entity dataSource="fieldReader" processor="TikaEntityProcessor" dataField="dcs.text" format="text" pk="dcs.id" >  

    <field column="text" name="text" />
   </entity>
 </entity> 
```

架构.xml

```
 <schema>
    <fields> 
     <field name="common_id_attr" type="string" indexed="true" stored="true" multiValued="false"/>
     <field name="id" type="string" indexed="true" stored="true"/>
     <field name="text" type="text" indexed="true" stored="true" multiValued="true"/>
   </fields> 
  <uniqueKey>common_id_attr</uniqueKey>
  <solrQueryParser defaultOperator="OR"/>
  <defaultSearchField>text</defaultSearchField>
 </schema> 
```

尽管它获取的行数是单独计算 tika 行的文档数量的两倍（我不明白为什么？）。它不索引二进制内容。

我长期陷入这个问题。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:08:40.287

我能够使用 Apache Solr 3.6.2 版对文档进行索引。我在这里描述了这些步骤：

[http://tuxdna.wordpress.com/2013/02/04/indexing-the-documents-stored-in-a-database-using-apache-solr-and-apache-tika/](http://tuxdna.wordpress.com/2013/02/04/indexing-the-documents-stored-in-a-database-using-apache-solr-and-apache-tika/)

我认为它在 3.6.1 中也应该是可行的。当官方网站上只有 3.6.2 可用时，我只是迫不及待地想搜索 3.6.1 版本的 tarball。

我希望这会有所帮助。

# magento - Magento 1.5：在计费时重命名“公司”，并且 *with diff。装运时的姓名*

> ID：14671463
> 
> 赞同：0
> 
> 时间：2013-02-03T10:21:32.950
> 
> 标签：magento, magento-1.5

我想分别更改前端中“公司”字段的名称以进行计费和运输步骤。

在计费步骤中，客户应该看到“公司”。在运输步骤中，客户应看到“Firma; c/o; fuer Packstation Postnummer”

因此，它不适用于我的 translation.csv，因为如果我更改“公司”的名称，它总是会更改计费和运输步骤。

有谁知道我在哪里可以更改它？

非常感谢！！

最好的问候，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:26:01.547

您可以更改模板中的字符串，因此您必须使用唯一的字符串进行翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:30:34.687

最好在 translave.csv 中添加两行，分别表示“Billing Company”和“Shipping Company”以及它们各自的名称“Firma”和“Firma; c/o; fuer Packstation Postnummer”。

然后编辑 billing.phtml 和 shipping.phtml （在您的主题的模板/结帐/onepage/ 目录中），用它们各自的名称更改公司.. 就像在 billing.phtml 中更改`$this->__('Company')`为`$this->__('Billing Company')`和 shipping.phtml 中，更改 `$this->__('Company')`为 `$this->__('Shipping Company')`

# php - 像 PHP 这样的带有解释器的语言是否用更小的代码更快？

> ID：14671464
> 
> 赞同：2
> 
> 时间：2013-02-03T10:21:47.763
> 
> 标签：php, performance

随着我的网络项目越来越大，我想知道 PHP 是否解释了这段代码，

```
<?php
    function helloWorldOutput($helloworldVariable) {
        echo 'Hello World' . $helloworldVariable;
    }

    helloWorldOutput("I am PHP");
?> 
```

比这慢：

```
<?php 
    function a($b) { echo 'Hello World'+$b; }
    a("I am PHP");
?> 
```

因为 PHP 是一种没有编译二进制文件的解释性语言，我认为第二个示例应该更快一些。这是真的吗，是否有任何一种预解释机制可以在 PHP 中缓存更快的代码版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T10:32:12.780

是的，将较大的代码解析/编译为字节码需要一些额外的时间。时间通常可以忽略不计，因此您可能不应该担心它，因为有更好的方法来处理编译所花费的时间。

为了获得更多的性能提升，你会做的是使用[PHP 加速器，例如 APC](http://en.wikipedia.org/wiki/List_of_PHP_accelerators#Alternative_PHP_Cache_.28APC.29)，它将缓存已编译的代码并消除整个编译步骤，除了第一次访问页面时。

使用加速器将消除任何可能的缺点，让您的代码保持注释和清晰，并让您专注于功能而不是缩短代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:27:58.210

解析第一个版本和调用它需要更长的时间。因此，如果您决定使用第一个版本并调用一个名称**很多**次的函数，因为解析第二个版本会稍微快一些。在实际的函数执行中 - 没有两个函数会同样快。

我的建议仍然是永远不要尝试进行这种微优化。性能只会略微提高，可读性会受到**很大**影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:31:52.983

第一个示例的字符较少，这意味着它的解析很困难，php 在内部运行某种字节码，因此执行速度不会有太大差异。

最慢的可能是从磁盘读取文件，而短代码将轻松赢得这场比赛。

# c# - 解密部分 AES 流

> ID：14671465
> 
> 赞同：0
> 
> 时间：2013-02-03T10:22:04.020
> 
> 标签：c#, io, cryptography, aes

我使用AES加密。当我加密然后解密整个文件时没关系。我想将多个文件添加到一个加密的文件中。这就是问题所在。加密很好，但解密会导致 CryptographicException - 数据长度错误。甚至可以解密文件的一部分还是整个加密？我使用了一个加密流并将所有要加密的文件传递给单个文件。我试图做相反的事情：

```
AesManaged aes = AES.InitAes(key, salt);
            ICryptoTransform transform = aes.CreateDecryptor(aes.Key, aes.IV);
            int defChunkSize = 1024 * 1024 * 50;

            using (FileStream source = new FileStream(header.data.filename, FileMode.Open))
            {
                foreach (CryptHeader.fileStruct file in header.data.files)
                {
                    preparePath(file.filename);

                    using (FileStream target = new FileStream(file.filename, FileMode.Create))
                    {
                        using (CryptoStream cryptoStream = new CryptoStream(target, transform, CryptoStreamMode.Write))
                        {
                            long padding = source.Length - header.data.files.Sum(x => x.length);//Just test
                            int chunkSize = (defChunkSize > (int)file.length) ? (int)file.length : defChunkSize;
                            byte[] chunkData = new byte[chunkSize];
                            int bytesRead = 0;
                            int totalRead = 0;
                            while (totalRead < file.length)
                            {
                                bytesRead = source.Read(chunkData, 0, chunkSize);
                                if (bytesRead <= 0) break;
                                totalRead += bytesRead;
                                cryptoStream.Write(chunkData, 0, bytesRead);
                            }      
                            chunkData = null;
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:48:25.113

几年前我也做过同样的事情，没有任何问题。我使用的逻辑如下：

**加密**

1.  定义文件数

2.  定义数组以保持加密大小

3.  打开输出流

4.  寻找（强制）到（文件数 * 4）+ 4（假设长度是整数）

5.  加密循环（加密-写入加密数据-分配加密大小）

6.  寻求 0（开始）

7.  写入文件数

8.  写入加密大小数组

9.  关闭输出流

**解密**

1.  打开输入流

2.  读取文件数

3.  具有加密大小的定义读取填充数组

4.  解密循环（**使用已知大小读取**）

5.  关闭输出流

我希望这个对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:55:23.137

简短形式：“你不能从这里到达那里”，这是不可能的。

如果您查看 AES 工作原理的描述，您会看到两件事。

1 AES 使用 128 位的块大小，因此如果您的文件长度不是 8 字节的倍数，则附加部分中的块不会排列，

2：AES 使用根据 rijndael 密钥计划为每个块使用不同的密钥，这很可能会破坏交易。

如果您需要能够连接加密文件，则将它们包装起来以使连接可​​见并且可以单独解密片段（gzip 在压缩时执行此操作）或使用固定替换密码，例如 rot13

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:37:10.930

它可以完成并且正在工作。我在加密期间制作了包含加密文件长度的表格。比我解密确切的部分（带填充）。

# javascript - buster.js 为什么我的测试用例被跳过了？

> ID：14671466
> 
> 赞同：1
> 
> 时间：2013-02-03T10:22:12.147
> 
> 标签：javascript, buster.js

运行后我不断收到此消息`$ buster test`：

```
Skipping Test name, unsupported requirement: is_a 
```

我也得到`Passed: is_a is_a`。

不知道这些神秘的信息是什么意思。我确实在 Object 上定义了一个方法“is_a”，所以这可能是罪魁祸首，但我不确定为什么这会干扰破坏测试。

# squeak - 使用 HELP 菜单选项对系统进行 Squeak 扩展

> ID：14671470
> 
> 赞同：0
> 
> 时间：2013-02-03T10:22:47.807
> 
> 标签：squeak

在 squeak 4.3 中，如果您遵循菜单选项帮助/扩展系统，您将面临一个显示文本的窗口，该文本正在评论一些 smalltalk 表达式。这些表达似乎旨在“扩展”系统。我的问题是：（1）这些扩展是同步的并受 Squeak 支持还是已经过时了？(2) 他们被推荐了吗？(3) 是否有执行顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:21:30.867

不，这些扩展大多已经过时了。试试最新的 4.4 版本。

[http://ftp.squeak.org/4.4/Squeak4.4-12327.zip](http://ftp.squeak.org/4.4/Squeak4.4-12327.zip)

# ios - Card.io ios 与本地化集成

> ID：14671474
> 
> 赞同：0
> 
> 时间：2013-02-03T10:22:59.430
> 
> 标签：ios, card.io

我正在尝试将 Card.io sdk 集成到我的 iOS 应用程序中。我想为 CardIO ui 做一个简单的本地化，如更改取消按钮标题或“在此处保留信用卡”提示文本。

我在 github 上找到了这个 android 演示，它只是使用 strings.xml 文件来执行此操作。（我想，还不能尝试。） [https://github.com/card-io/android-scan-demo /blob/master/app/res/values/strings.xml](https://github.com/card-io/android-scan-demo/blob/master/app/res/values/strings.xml)

我如何在我的 iOS 应用程序中执行此操作？不应该有一个像上面的strings.xml这样的文件附加到card.io ios SDK。

编辑：我正在使用 Card.io sdk 3.0.5。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:39:11.380

来自 card.io 的 Josh 在这里。我们在版本 3.1 中发布了本地化支持，现在可用。

# html - 淘汰赛：如何使一个可观察的影响另一个？

> ID：14671475
> 
> 赞同：1
> 
> 时间：2013-02-03T10:23:11.757
> 
> 标签：html, knockout.js

我正在使用淘汰赛 2.2.1，并且我有一个以表格方式显示数据的页面（使用 div 而不是表格），并且它具有三个列。左栏有一个“显示更多”链接，单击它时中间栏应该展开。

**HTML：**

```
<div data-role="page" data-title="Search" role="main" id="caspSearch" >
        <header>
            <h2 >Search Results:</h2>
            <span>mobilty fy13</span>
            <p>(<span>25</span>)</p> 
        </header>

        <div class="caspGrid cafeClear">
            <div class="caspRow">
                    <div class="caspColEntity">
                        <span>Favorites</span>
                        <p>(<span>2</span>)</p>
                    </div>
                    <div class="caspColSummary">
                        <p>Test Data</p>
                        <p>Test Data</p>
                        <p>Test Data</p>
                    </div>
                    <div class="caspColTeam">
                        <p>Test Data</p>
                        <p>Test Data</p>
                        <p>Test Data</p>
                    </div>
                </div>  
                <!-- .caspRow -->

                <div class="caspRow">
                    <div class="caspColEntity">
                        <span>Strategies</span>
                        <p>(<span>5</span>)</p>
                      <!-- WHEN CLICKING THIS I WANT THE DIV WITH VISIBLE BINDING (in .caspColSummary) TO SHOW, BUT IT IS ALSO SHOWING THE ONE FROM THE LAST ROW SINCE IT HAS THE SAME BINDING-->
                        <h3 class="caspCollapsible caspRight" data-bind="click:$root.setVisible">Show More</h3>
                    </div>
                    <div class="caspColSummary">
                        <p>Test Data</p>
                        <p>Test Data</p>
                        <p>Test Data</p>

                        <div data-bind="visible:$root.visible">
                            <p>Test Data</p>
                            <p>Test Data</p>
                            <p>Test Data</p>
                        </div>
                    </div>
                    <div class="caspColTeam">
                        <p>Test Data</p>
                        <p>Test Data</p>
                        <p>Test Data</p>

                        <div data-bind="visible:$root.visible">
                            <p>Test Data</p>
                            <p>Test Data</p>
                            <p>Test Data</p>
                        </div>
                    </div>
                </div>  
                <!-- .caspRow -->
                            <div class="caspRow">
                    <div class="caspColEntity">
                        <span>Strategies</span>
                        <p>(<span>5</span>)</p>
                        <h3 class="caspCollapsible caspRight" data-bind="click:$root.setVisible">Show More</h3>
                    </div>
                    <div class="caspColSummary">
                        <p>Test Data</p>
                        <p>Test Data</p>
                        <p>Test Data</p>

                        <div data-bind="visible:$root.visible">
                            <p>Test Data</p>
                            <p>Test Data</p>
                            <p>Test Data</p>
                        </div>
                    </div>
                    <div class="caspColTeam">
                        <p>Test Data</p>
                        <p>Test Data</p>
                        <p>Test Data</p>

                        <div data-bind="visible:$root.visible">
                            <p>Test Data</p>
                            <p>Test Data</p>
                            <p>Test Data</p>
                        </div>
                    </div>
                </div>  
                <!-- .caspRow -->

        </div>

</div> 
```

**视图模型：**

```
define(['ko', 'kopost', 'ca', 'sp/db'], function(ko, kopost, ca, db) {

    function SearchViewModel(ctx, data) {
        this.init(ctx, data);
    }

    SearchViewModel.prototype = new ca.ViewModel({});
    SearchViewModel.prototype.constructor = SearchViewModel;

    ko.utils.extend(SearchViewModel.prototype, (function() {

        var init = function(ctx, data){
            var self = this;    
            self.visible = ko.observable(false);    
            self.results = ko.observableArray();
            self.subscribeToTopic("caspSearch", self.search, self); 
        },

        setVisible = function(o,e){
            this.visible(!this.visible());
            $(e.target).toggleClass('caspOpen');
        };

        return {
                init: init,                 
                setVisible:setVisible

        }
    })());

    return SearchViewModel;
}); 
```

显然以这种方式设置可见是有问题的，因为它显示了具有可见绑定的所有列，我怎样才能使其灵活，以便它只显示我需要的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:24:22.773

如果您只想在任何时候为*单个*项目“显示更多”，那么您需要在视图模型中跟踪当前选定的项目。然后，您可以使用它来评估是否应为每个项目显示“显示更多”列。

一个简化的例子。

HTML：

```
<ul data-bind="foreach: contacts">
    <li>
        <span data-bind="text:name"></span>
        <a href="#" data-bind="click: $parent.selectContact">More</a>
        <div data-bind="visible: $parent.isSelected($data)"><span data-bind="text: age"></span></div>
    </li>
<ul> 
```

JavaScript：

```
var contacts = [{
    name: "John",
    age: 30
}, {
    name: "Pete",
    age: 25
}, {
    name: "Jane",
    age: 23
}];

var ContactsModel = function (data) {
    var self = this;

    self.contacts = ko.observableArray(data);
    self.selectedContact = ko.observable();

    self.isSelected = function (item) {
        return self.selectedContact() && self.selectedContact() === item;
    };

    self.selectContact = function (item) {
        self.selectedContact(item);
    };
};

var model = new ContactsModel(contacts);
ko.applyBindings(model); 
```

需要注意的关键事项：

*   单击项目的“更多”链接设置`selectedContact`视图模型的属性。单击事件的处理程序传递*当前*项。
*   “更多” div 有一个可见的绑定设置到`isSelected`父视图模型上的函数。在这种情况下，我们需要使用特殊`$data`变量显式传递当前项目。

[http://jsfiddle.net/benfosterdev/fPhZQ/](http://jsfiddle.net/benfosterdev/fPhZQ/)上的工作示例

另一种选择是`isSelected`为每个联系人设置一个 observable，但我更喜欢上面的解决方案。

# objective-c - CoreData：错误：无法在 NSManagedObject 类上调用指定的初始化程序

> ID：14671478
> 
> 赞同：39
> 
> 时间：2013-02-03T10:23:49.287
> 
> 标签：objective-c, core-data, initializer

我对 CoreData 有一点该死的问题。我想插入一个新对象，所以我首先要创建一个。这是由该代码完成的：

```
Challenges *newChallenge = [[Challenges alloc] init];
[newChallenge setName:@"TestChallenge"];
[newChallenge setRounds:[[NSNumber alloc] initWithInt:12]];
[newChallenge setShots:[[NSNumber alloc] initWithInt:5]];
[newChallenge setDate:[NSDate date]]; 
```

但是，在 alloc init 之后，我得到了这个错误：

```
CoreData: error: Failed to call designated initializer on NSManagedObject class 'Challenges' 
```

黑客出了什么问题？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-03T10:34:39.187

我认为问题在于 Challenges 是一个`NSManagedObject`类，您需要指定的初始化程序：

```
initWithEntity:insertIntoManagedObjectContext: 
```

代替

```
Challenges *newChallenge = [[Challenges alloc] init]; 
```

[阅读更多..](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-06-13T01:16:58.810

如果您问自己“好的，那么我如何获得该实体？” （就像我所做的那样），您可以使用 entityForName 方法来执行此操作，如下所示：

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Challenges" inManagedObjectContext:self.managedObjectContext];

Challenges *newChallenge = [[Challenge alloc] initWithEntity:entity insertIntoManagedObjectContext:self.managedObjectContext]; 
```

希望这会有所帮助，这个帖子对我有很大帮助！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-03T10:36:20.577

`NSManagedObject`不能只是`alloc`/`init`就像你通常用`NSObject`. 事实上，指定的初始化程序是： `initWithEntity:insertIntoManagedObjectContext:`

现在，对于实际错误，Apple[在文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)中声明：

> **重要提示**：此方法是 NSManagedObject 的指定初始化程序。您不能简单地通过发送 init 来初始化托管对象。

所以，你可以看到你需要两件事来初始化它，一个`NSEntityDescription`（你打算实例化的实体）和一个`NSManagedObjectContext`（新对象将被创建到的上下文）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-03T12:35:19.713

另外，如果您的 Challenges 类是 NSManagedObject 并且 date、rounds 和 shot 被定义为它的属性，您可以添加方法：

```
-(void) awakeFromInsert {
     self.date = [NSDate date];
     self.rounds = @(12);
     self.shots = @(5);
} 
```

每个新对象从一出生就定义了这些属性。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-14T00:58:29.807

其他人已经说明了为什么它不起作用。以下是您可以减少样板文件并使代码更具可读性的方法：

```
@implementation NSManagedObject(MyPrivateAdditions)

+ (id)insertNewObjectInContext:(NSManagedObjectContext *)context
{
    return [NSEntityDescription insertNewObjectForEntityForName:self.className inManagedObjectContext:context];
}

@end 
```

现在你可以这样做：

```
Challenges *newChallenge = [Challenge insertNewObjectInContext:context]; 
```

# android - Android 和 Google 电子钱包 - 必须一次性购买？

> ID：14671479
> 
> 赞同：3
> 
> 时间：2013-02-03T10:23:49.867
> 
> 标签：android, in-app-purchase, in-app-billing, android-pay

Android 手机上的**Google 电子钱包** [在线支付系统是否必须以与 iOS 上的 Apple](https://accounts.google.com/ServiceLogin?service=sierra&passive=1200&continue=https://checkout.google.com/main&followup=https://checkout.google.com/main&scc=1&authuser=0)**应用内购买**类似的方式购买电影、歌曲或游戏级别？

根据[此处](http://www.android.com/us/developer-content-policy.html?phpMyAdmin=cfc2644bd9c947213a0141747c2608b0)的信息， “<em>为从 Android Market 下载的应用程序提供额外内容、商品或服务的开发人员必须提供授权的支付处理器作为支付选项”。

1.  我们的理解是，如果用户安装了一个应用程序，该应用程序可以播放电影，并且用户使用 Google 钱包按单个电影观看应用程序需要付费，否则它可以从 Google Play 中删除。那是对的吗？

2.  如果用户想为额外的级别付费，游戏中也会出现类似的情况。那是对的吗？

对于订阅，不需要使用谷歌钱包（iOS 上也有类似的情况）。

不锈钢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:18:59.360

我有一个集成了 LogiaMobile 计费的应用程序，并因此被 Google Play 拒绝（那是在 2011 年 9 月）。该应用程序试图在用户想要下载视频时向他们收费。

[在这篇Techcrunch 文章](http://techcrunch.com/2012/08/01/google-tightens-up-app-policy-gets-stricter-on-namingicon-payments-privacy-ads-and-spam-rules-developer-letter/)中找到有关政策的良好解释

我的建议是始终集成 Google In-App billing（现在 v3 更易于使用）。

我希望这是你所要求的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:14:55.097

“Google Wallet”是一个令人困惑的名称，因为它可能指代不同的东西。首先是 Google Wallet*应用程序*，可让您通过 NFC 使用手机付款。您当然不需要它来从 Play 商店购买东西，而且它仅在美国受支持，并且仅在有限数量的设备上受支持。Google Wallet 也指 Google 的在线支付系统（又名 Google Checkout）。您需要使用该信用卡注册您的信用卡才能在 Android 上购物。在大多数情况下，它充当“授权支付处理器”。其他是支持运营商的运营商计费。

# android - Android UI主屏设计

> ID：14671484
> 
> 赞同：0
> 
> 时间：2013-02-03T10:24:20.657
> 
> 标签：android, android-listview, android-ui

我准备在我的 Android 主屏幕上创建一个与此类似的部分，

![图标](../Images/00ba6001f6a291f80dd965bc0cd47e1b.png)

但无法真正弄清楚从哪里开始。我的意思是这是我应该使用的 ListView 吗？还是这些简单的图像被放置为被直线包围的不同对象？无论哪种情况，如何将这些东西放在一起，是我想知道的一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:12:08.653

您可以使用：

*   a `GridLayout`（对于 API < 14，[在 GitHub 上的某个地方有一个支持库](https://github.com/dlew/android-gridlayout)）
*   `LinearLayout`一个包含两个水平`LinearLayout`s的垂直
*   单`RelativeLayout`

对于按钮，使用`TextView`或`Button`与顶部可绘制对象一起使用。

请注意，现在不鼓励使用仪表板模式（[链接 1](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)、[链接 2](http://www.scottlogic.co.uk/2012/09/is-the-dashboard-pattern-dead-2/)）（您应该在第一个屏幕上向用户展示有用的信息，例如最近的旅行、朋友的新闻……）。

取而代之的是，您可以将按钮放在滑动菜单中（[jfeinstein](https://github.com/jfeinstein10/SlidingMenu)在 github 上有一个很好的实现，可以在一小时内集成）

# wpf - 属性更改时嵌套集合不更新 UI

> ID：14671485
> 
> 赞同：0
> 
> 时间：2013-02-03T10:24:28.973
> 
> 标签：wpf, binding, nested

我有一个用户控件列表框，每个用户控件显示有界数据的属性，并将一个集合绑定到自定义控件，当自定义控件更改数据时 UI 未更新我的代码如下：

```
ObservableCollection<Subscription> subscriptions = new ObservableCollection<Subscription> SubscriptionRepository.GetSubscriptions());
            SubListBox.ItemsSource = subscriptions; 
```

xml：

```
<DataTemplate x:Key="MyDataTemplate">
            <UserControls:SubscriptionUC />
</DataTemplate>

<ListBox x:Name="SubListBox" ItemTemplate="{StaticResource MyDataTemplate}">
</ListBox> 
```

用户控制：

```
 <TextBlock Text="{Binding Path=DaysAttended}" />
<cc:CustomControl SubscriptionSource="{Binding Path=SubscriptionDays,Mode=TwoWay}" /> 
```

订阅类：

```
public class Subscription : INotifyPropertyChanged
    {
        public int SubscriptionTypeId { get; set; }

        public DateTime StartDate { get; set; }

        public DateTime EndDate { get; set; }

        public ObservableCollection<SubscriptionDay> SubscriptionDays { get; set; }

        public int DaysAttended { get { return SubscriptionDays.Count(d => d.Attended == true); } }
public void DayChanged()
        {
            RaisePropertyChanged("SubscriptionDays");
            RaisePropertyChanged("DaysAttended");
        }
 } 
```

当 SubscriptionDay 属性发生变化时，从 SubscriptionDay 类调用 DayChanged() 并调用它，但 DaysAttended 未更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:51:51.277

您还需要为**DaysAttended属性****设置 setter**，对于双向绑定，您的属性必须具有 getter 和 setter。我希望这会有所帮助。

# python - 前后下划线的python属性有什么区别

> ID：14671487
> 
> 赞同：48
> 
> 时间：2013-02-03T10:25:00.457
> 
> 标签：python

> **可能重复：**
> [Python中对象名称前的单下划线和双下划线的含义](https://stackoverflow.com/questions/1301346/the-meaning-of-a-single-and-a-double-underscore-before-an-object-name-in-python)

我想知道这些在 Python 中有什么区别？

```
self._var1
self._var1_
self.__var1
self.__var1__ 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-03T10:33:25.277

作为起点，您可能会发现[PEP 8 - Style Guide For Python Code](http://www.python.org/dev/peps/pep-0008/#naming-conventions)中的这句话很有帮助：

> 此外，还可以识别以下使用前导或尾随下划线的特殊形式（这些通常可以与任何大小写约定结合使用）：
> 
> `_single_leading_underscore`：弱“内部使用”指标。例如`from M import *`，不导入名称以下划线开头的对象。
> 
> `single_trailing_underscore_`: 按照惯例使用以避免与 Python 关键字冲突，例如 `Tkinter.Toplevel(master, class_='ClassName')`
> 
> `__double_leading_underscore`: 当命名一个类属性时，调用名称修饰（在类 FooBar 中，`__boo`变为`_FooBar__boo`; 见下文）。
> 
> `__double_leading_and_trailing_underscore__`: 存在于用户控制的命名空间中的“神奇”对象或属性。例如`__init__`， `__import__`或`__file__`。永远不要发明这样的名字；仅按记录使用它们。

不过，您是在类属性的上下文中询问的，所以让我们看一下您的具体示例：

# 单前导下划线

在类中命名属性`self._var1`向类的用户表明该属性只能由类的内部（或者可能是子类的内部）访问，并且他们不需要直接访问它并且可能不应该修改它。`private`您应该在与在 Java 或 C# 中使用or字段相同的地方使用前导下划线`protected`，但请注意该语言实际上并没有强制执行非访问 - 相反，您相信您的班级的用户不会做任何愚蠢的事情，然后离开如果他们真的非常确定他们知道自己在做什么并且有意义，他们可以选择访问（或修改）您班级的私有字段。

# 单个前导和尾随下划线

`self._var1_`不是我见过的东西。我认为这种命名风格在 Python 世界中没有任何传统意义。

# 双前导下划线

这实际上具有句法意义。`self.__var1`在您的类范围内引用会调用[name mangling](http://docs.python.org/release/1.5/tut/node67.html)。在您的班级之外，该变量将显示为 at`self._YourClassName__var1`而不是`self.__var1`. 不是每个人都使用这个——我们在我工作的地方根本不用——对于简单的类来说，使用单个前导下划线感觉有点荒谬和令人恼火。

但是，它的存在是有道理的；如果您使用大量继承，如果您只使用单个前导下划线，那么您无法向阅读您的代码的人指示“私有”和“受保护”变量之间的区别 - 甚至不是意味着被子类访问，以及子类可以访问但外部世界不能访问的那些。因此，在这种情况下，使用单个尾随下划线表示“受保护”，使用双下划线表示“私有”可能是一个有用的约定（名称修饰将允许子类在其子类中使用具有相同名称的变量而不会导致碰撞）。

# 双前导和尾随下划线

`self.__var1__` is something you should never create as I've literally written it, because the double leading and trailing underscore naming style is meant to be used only for names that have a special meaning defined by Python, like the `__init__` or `__eq__` methods of classes. You're free to override those to change your class's behavior (indeed, almost all classes will have a programmer-defined `__init__`), but you shouldn't make up your own names in this style like `self.__var1__`.

# wpf - 如何将 elemnte xml 保存到 wpf？

> ID：14671489
> 
> 赞同：1
> 
> 时间：2013-02-03T10:25:36.297
> 
> 标签：wpf, c#-4.0, wpf-controls

我们有 xml 列：

```
<Department Name='D1' TotalCapacity='5'>
  <Class Name='c1' Capacity='3'></Class>
  <Class Name='c2' Capacity='2'></Class>
</Department>

<Department Name='D2' TotalCapacity='10'>
  <Class Name='c1' Capacity='5'></Class>
  <Class Name='c3' Capacity='5'></Class>
</Department> 
```

绑定到数据网格：

```
 <Grid>
    <Grid.Resources>
        <XmlDataProvider x:Key="DepartmentData" XPath="Departments/Department">
            <x:XData>
                <Departments xmlns="">
                    <Department Name='D1' TotalCapacity='5'>
                        <Class Name='c1' Capacity='3'/>
                        <Class Name='c2' Capacity='2'/>
                    </Department>
                    <Department Name='D2' TotalCapacity='10'>
                        <Class Name='c1' Capacity='5'/>
                        <Class Name='c3' Capacity='5'/>
                    </Department>
                </Departments>
            </x:XData>
        </XmlDataProvider>
    </Grid.Resources>
    <DataGrid ItemsSource="{Binding Source={StaticResource DepartmentData}}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Department Name" Binding="{Binding XPath=@Name}"/>
            <DataGridTextColumn Header="Total Capacity" Binding="{Binding XPath=@TotalCapacity}"/>
            <DataGridTextColumn Header="c1">
                <DataGridTextColumn.Binding>
                    <Binding XPath="Class[@Name='c1']/@Capacity"/>
                </DataGridTextColumn.Binding>
            </DataGridTextColumn>
            <DataGridTextColumn Header="c2">
                <DataGridTextColumn.Binding>
                    <Binding XPath="Class[@Name='c2']/@Capacity"/>
                </DataGridTextColumn.Binding>
            </DataGridTextColumn>
            <DataGridTextColumn Header="c3">
                <DataGridTextColumn.Binding>
                    <Binding XPath="Class[@Name='c3']/@Capacity"/>
                </DataGridTextColumn.Binding>
            </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

输出是这样的：

![在此处输入图像描述](../Images/704978d00292a79d4091a5b10cb24921.png)

我们希望这个数据网格有保存和删除，例如：

```
<Department Name='D1' TotalCapacity='5'>
  <Class Name='c1' Capacity='3'></Class>
  <Class Name='c2' Capacity='2'></Class>
</Department> 
```

删除

```
<Department Name='D1' TotalCapacity='5'>
  <Class Name='c1' Capacity='3'></Class>
</Department> 
```

和：

```
<Department Name='D1' TotalCapacity='5'>
  <Class Name='c1' Capacity='3'></Class>
  <Class Name='c2' Capacity='2'></Class>
</Department> 
```

添加

```
<Department Name='D1' TotalCapacity='5'>
  <Class Name='c1' Capacity='3'></Class>
  <Class Name='c2' Capacity='2'></Class>
  <Class Name='c5' Capacity='8'></Class>
</Department> 
```

# mysql - 在 ubuntu 12.04 上更改 mysql 默认数据目录

> ID：14671491
> 
> 赞同：0
> 
> 时间：2013-02-03T10:25:44.713
> 
> 标签：mysql, ubuntu

我无法在 ubuntu 12.04 上更改 mysql 的默认目录。

我尝试了什么：

1.  服务 mysql 停止

2.  我移动了 /var/lb/mysql /data/mysql

3.  datadir = /data/mysql #my.cnf

4.  服务 mysql 启动

输出 ：

/var/log/mysql# service mysql start start: 作业启动失败

当我尝试重新启动时：

```
/var/log/mysql# service mysql start
    start: Job failed to start 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-02T02:42:45.600

也被这个咬了。至少有一个问题：[apparmor](https://wiki.ubuntu.com/AppArmor)。

我通过将 /data/mysql 添加到 /etc/apparmor.d/usr.sbin.mysql 来修复它：

...

```
 /var/lib/mysql/ r,
  /var/lib/mysql/** rwk,
  /data/mysql/ r,
  /data/mysql/** rwk, 
```

...

# ruby-on-rails-3 - Rails 路线不会显示路线的名称

> ID：14671492
> 
> 赞同：0
> 
> 时间：2013-02-03T10:25:52.880
> 
> 标签：ruby-on-rails-3, routes, ruby-on-rails-3.2

我在 routes.rb 中添加了一条路线：

```
 match 'notifications/:id/mark_as_read' => 'notifications#mark_as_read', :via => :post 
```

mark_as_read 是通知控制器中的唯一操作，这是通知的唯一路线

当我应该看到的路线时

```
 POST    /notifications/:id/mark_as_read(.:format)   notifications#mark_as_read 
```

我不知道如何找到它，因为它没有列出类似的东西`notifications_mark_as_read_path`

添加路线时我做错了什么，还是我可以以某种方式命名路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:31:17.360

找到了..

需要命名路线..用`:as => 'my_route_name'`

# javascript - 将自动滚动添加到 jquery 滑块

> ID：14671496
> 
> 赞同：0
> 
> 时间：2013-02-03T10:26:17.293
> 
> 标签：javascript, jquery, autoscroll

我有这个 jQuery 滑块，但是现在我需要让它在开始时自动开始滑动。现在它只在单击向左或向右滑动时起作用。有人可以帮我怎么做吗？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  var currentPosition = 0;
  var slideWidth = 960;
  var slides = $('.slide');
  var numberOfSlides = slides.length;

  // Remove scrollbar in JS
  $('#slidesContainer').css('overflow', 'hidden');

  // Wrap all .slides with #slideInner div
  slides
    .wrapAll('<div id="slideInner"></div>')
    // Float left to display horizontally, readjust .slides width
    .css({
      'float' : 'left',
      'width' : slideWidth
    });

  // Set #slideInner width equal to total width of all slides
  $('#slideInner').css('width', slideWidth * numberOfSlides);

  // Insert controls in the DOM
  $('#slideshow')
    .prepend('<span class="control" id="leftControl">Кликни за лево</span>')
    .append('<span class="control" id="rightControl">Кликни за десно</span>');

  // Hide left arrow control on first load
  manageControls(currentPosition);

  // Create event listeners for .controls clicks
  $('.control')
    .bind('click', function(){
    // Determine new position
    currentPosition = ($(this).attr('id')=='rightControl') ? currentPosition+1 : currentPosition-1;

    // Hide / show controls
    manageControls(currentPosition);
    // Move slideInner using margin-left
    $('#slideInner').animate({
      'marginLeft' : slideWidth*(-currentPosition)
    });
  });

  // manageControls: Hides and Shows controls depending on currentPosition
  function manageControls(position){
    // Hide left arrow if position is first slide
    if(position==0){ $('#leftControl').hide() } else{ $('#leftControl').show() }
    // Hide right arrow if position is last slide
    if(position==numberOfSlides-1){ $('#rightControl').hide() } else{ $('#rightControl').show() }
  } 
});
</script> 
```

这是我使用的 html：

```
 <!-- Slideshow HTML -->
  <div id="slideshow">
    <div id="slidesContainer">
      <div class="slide">
        <img src="Images/banner/z1.png" alt="Добредојдовте во светот на децата!" />
      </div>
      <div class="slide">
        <img src="Images/banner/z2.png" />
      </div>
      <div class="slide">
        <img src="Images/banner/z3.png"/>
      </div>
    </div>
  </div>
  <!-- Slideshow HTML --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:43:12.073

将滑块放在单独的功能中：

```
var slideGo = function(elem){
    // Determine new position
    currentPosition = ($(elem).attr('id')=='rightControl') ? currentPosition+1 : currentPosition-1;

    // Hide / show controls
    manageControls(currentPosition);
    // Move slideInner using margin-left
    $('#slideInner').animate({
      'marginLeft' : slideWidth*(-currentPosition)
    }); 
```

然后从文档就绪处理程序调用该函数，传入对元素的引用：

```
$(document).ready(function(){
var elem = $('#myelement');
slideGo(elem);
}); 
```

# php - 如何在 appserv 2.5.10 上运行 mysqli 服务器？

> ID：14671499
> 
> 赞同：0
> 
> 时间：2013-02-03T10:27:25.153
> 
> 标签：php, mysqli

我正在尝试使用 mysqli 函数，但出现此错误：

```
Fatal error: Call to undefined method mysqli::num_rows() in C:\AppServ\www\edu\files\header.php on line 19 
```

我试图去并从中`php.ini`删除 我发现它已经被删除了`;``extension=php_mysqli.dll`

我试图重新启动appachi；连接文件：

```
// db username
define("USERNAME","root");

// db password
define("PASSWORD","root");

// db servername
define("SERVERNAME","localhost");

// db name
define("NAME","edu");

//connect to db
$mysqli = new mysqli(SERVERNAME,USERNAME,PASSWORD,NAME);
if ($mysqli->connect_errno) {
    echo $cannot_connect;
}

//select db encoding
$mysqli->set_charset('utf8'); 
```

在文件中调用函数：

```
$sql = $mysqli->query("SELECT VALUE FROM SITE_CONFIG WHERE CONF='KEYWORDS'");
if (!$sql) {
    echo "Failed to run query: (" . $mysqli->errno . ") " . $mysqli->error;
}
if($mysqli->num_rows($sql) > 0){
    while($rs = $sql->fetch_assoc()){
        $keyw = $rs['VALUE'];
    }
}else{
        $keyw = $no_data;
} 
```

注意：我包括了 connection.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:25:02.413

尝试：

```
$sql = $mysqli->query("SELECT VALUE FROM SITE_CONFIG WHERE CONF='KEYWORDS'");
if (!$sql) {
    echo "Failed to run query: (" . $mysqli->errno . ") " . $mysqli->error;
} else {
    if($sql->num_rows > 0){// here must be $sql , not $mysqli
        while($rs = $sql->fetch_assoc()){
            echo $rs['VALUE'];
        }
    } else{
            echo "No data";
    }
} 
```

# c# - 如何获取具有指定名称的 DataMemberAttribute 的属性？

> ID：14671507
> 
> 赞同：8
> 
> 时间：2013-02-03T10:28:53.670
> 
> 标签：c#, .net, reflection, properties, propertyinfo

如何反思性地获取具有给定名称的 DataMember 的属性（假设每个 DataMember 都有一个唯一的名称）？例如，在以下代码中，名称为“p1”的 DataMember 的属性为`PropertyOne`：

```
[DataContract(Name = "MyContract")]
public class MyContract
{
    [DataMember(Name = "p1")]
    public string PropertyOne { get; set; }

    [DataMember(Name = "p2")]
    public string PropertyTwo { get; set; }

    [DataMember(Name = "p3")]
    public string PropertyThree { get; set; }
} 
```

目前，我有：

```
string dataMemberName = ...;

var dataMemberProperties = typeof(T).GetProperties().Where(p => p.GetCustomAttributes(typeof(DataMemberAttribute), false).Any());

var propInfo = dataMemberProperties.Where(p => ((DataMemberAttribute)p.GetCustomAttributes(typeof(DataMemberAttribute), false).First()).Name == dataMemberName).FirstOrDefault(); 
```

这行得通，但感觉可以改进。我特别不喜欢`GetCustomAttributes()`被调用两次。

如何更好地重写它？理想情况下，如果我能把它做成一个简单的单线就太好了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T11:25:03.537

```
// using System.Linq;
// using System.Reflection;
// using System.Runtime.Serialization;
obj.GetType()
   .GetProperties(…)
   .Where(p => Attribute.IsDefined(p, typeof(DataMemberAttribute)))
   .Single(p => ((DataMemberAttribute)Attribute.GetCustomAttribute(
                    p, typeof(DataMemberAttribute))).Name == "Foo"); 
```

**笔记：**

*   [`Attribute.IsDefined`](http://msdn.microsoft.com/en-us/library/2fdf7hf1.aspx "MSDN 参考页")用于在不检索其数据的情况下检查自定义属性是否存在。`Attribute.GetCustomAttribute`因此，它比在第一步中跳过属性更有效并且用于跳过属性。

*   在`Where`运算符之后，我们剩下的属性*正好有一个* `DataMemberAttribute`：没有这个属性的属性已经被过滤掉了，它不能被多次应用。因此我们可以使用`Attribute.GetCustomAttribute`代替`Attribute.GetCustomAttributes`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T10:32:51.497

您可以使用 LINQ：

```
string dataMemberName = ...;
var propInfo =
    (from property in typeof(T).GetProperties()
    let attributes = property
        .GetCustomAttributes(typeof(DataMemberAttribute), false)
        .OfType<DataMemberAttribute>()
    where attributes.Any(a => a.Name == dataMemberName)
    select property).FirstOrDefault(); 
```

或者，如果您愿意：

```
string dataMemberName = ...;
var propInfo = typeof(T)
    .GetProperties()
    .Where(p => p
        .GetCustomAttributes(typeof(DataMemberAttribute), false)
        .OfType<DataMemberAttribute>()
        .Any(x => x.Name == dataMemberName)
    )
    .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:10:48.137

你可以使用[Fasterflect](http://fasterflect.codeplex.com)让你的反射代码更简单、更容易看：

```
var property = typeof(T).MembersAndAttributes( MemberTypes.Property, typeof(DataMemberAttribute) )
    .Where( ma => ma.Attributes.First().Name == dataMemberName )
    .Select( ma => ma.Member as PropertyInfo )
    .FirstOrDefault(); 
```

如果您只需要检查属性是否存在，可以使用类似这样的方法：

```
var property = typeof(T).PropertiesWith<DataMemberAttribute>( Flags.InstancePublic )
    .Where( p => p.Name == dataMemberName ).FirstOrDefault(); 
```

Fasterflect 带有一组不错的扩展方法，如果您还需要速度，还可以使用 IL 生成进行一些简洁的性能优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-25T10:18:14.633

我需要获取属性的值，而不是属性本身，因此使用了[Darin Dimitrov 的答案](https://stackoverflow.com/a/14671540/971299)，但添加`.GetValue(this)`到末尾以返回值。

这是我的课最终的样子：

```
[DataContract]
public class Item
{
    [DataMember(Name = "kpiId")]
    public string KPIId { get; set; }
    [DataMember(Name = "value")]
    public string Value { get; set; }
    [DataMember(Name = "unit")]
    public string Unit{ get; set; }
    [DataMember(Name = "status")]
    public string Status { get; set; }
    [DataMember(Name = "category")]
    public string Category { get; set; }
    [DataMember(Name = "description")]
    public string Description { get; set; }
    [DataMember(Name = "source")]
    public string Source { get; set; }
    [DataMember(Name = "messages")]
    public SysMessage[] Messages { get; set; }

    public object getDataMemberByName(string name)
    {
         return (typeof(Item).GetProperties().FirstOrDefault(p => p.GetCustomAttributes(typeof(DataMemberAttribute), false)
                              .OfType<DataMemberAttribute>()
                              .Any(x => x.Name == name))).GetValue(this);
    }
} 
```

# sql - Charindex vs Contains 提供非常不同的结果

> ID：14671509
> 
> 赞同：0
> 
> 时间：2013-02-03T10:29:46.280
> 
> 标签：sql, contains

我正在运行两个查询，它们应该在我们的 CV 数据库表上做同样的事情：

1.  `CONTAINS`（全文索引表 - 简历、全名等都包含在索引中）

    ```
     SELECT COUNT(1) 
     FROM [CVDatabase] 
     WHERE CONTAINS ((CVText, fullname, city, CompanyName, jobTitle, targetJobTitle),'"cost accountant*"') AND (Country='South Africa') 
    ```

    结果数：300

2.  `CHARINDEX`（未编入索引）

    ```
    SELECT COUNT(1) 
    FROM [CVDatabase] 
    WHERE (CHARINDEX ('cost accountant', cvtext) > 0 OR 
           CHARINDEX ('cost accountant', fullname) > 0 OR 
           CHARINDEX ('cost accountant', city) > 0 OR
           CHARINDEX ('cost accountant', companyname) > 0 OR
           CHARINDEX ('cost accountant', jobtitle) > 0 OR
           CHARINDEX ('cost accountant', targetjobtitle) > 0) 
      AND (Country = 'South Africa') 
    ```

    结果数：339

这是超过 10% 的差异。自然`CHARINDEX`会使用捕获“成本会计师”、“成本会计师”（也`CONTAINS`将使用通配符捕获）。差异可能来自“成本会计”之前的字符，它`CHARINDEX`会捕捉但不会`CONTAINS`- 但我想不出在“成本”这个词之前有任何意义的字符。

索引是否可能有问题，并且没有获取所有结果？它设置为跟踪自动更改，因此它应该正确索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:55:52.667

1.  所有这些行都被索引了吗？

2.  SQL FT 会将文本拆分为单词，因此它不会找到“xyzcost accountant”，但这可能没问题。不过，如果您搜索“成本会计”（即没有通配符）会发生什么？

3.  [以下](https://stackoverflow.com/questions/2727911/how-can-i-know-when-sql-full-text-index-population-is-finished)是有关如何检查索引过程是否已完成的一些详细信息。请注意，如果它没有您的查询仍然运行但产生不一致的结果（即较少的结果）。这是因为 FT 的设计者希望使系统能够在不停机的情况下更新和插入新数据，但可能会发生一些数据丢失。

4.  msdn 上的[示例](http://technet.microsoft.com/en-us/library/ms142583.aspx)未显示如何将短语搜索与通配符结合使用。也许您可以改用“NEAR”？

# android - Android 应用程序运行时

> ID：14671510
> 
> 赞同：0
> 
> 时间：2013-02-03T10:29:56.590
> 
> 标签：android, runtime

在寻找 Android Application Runtime 时，我在网上找到了以下图像。有人可以告诉我这里提供的信息是否正确，或者您是否会提出任何修改建议。

这是图像...

![在此处输入图像描述](../Images/89e18999cb85d0feb4b975b58f20ba88.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:31:28.160

在我看来，这看起来相当正确！

# scala - 使用复选框数据呈现和绑定表单

> ID：14671513
> 
> 赞同：0
> 
> 时间：2013-02-03T10:30:28.763
> 
> 标签：scala, playframework-2.0

我们如何使用 scala 在 play2.0 中创建复选框并将它们与我们的表单绑定。

如果我有

```
 val placeForm = Form(
    mapping(
        "id" -> ignored(NotAssigned: Pk[Long]),
        "url_key" -> nonEmptyText,
        "title" -> optional(text),
        "page_id" -> optional(longNumber)
    )(models.Place.apply)(models.Place.unapply)
) 
```

我创造了这样的形式。

```
 @form(routes.Page.save) {

    @form(routes.Page.save) {

    <fieldset>

    @inputText(pageForm("title"), '_label -> "Title")
    @inputText(pageForm("template"), '_label -> "Template") <label>Options:</label>
    <div class="input">
        <label>note <input type="checkbox" name="options[]" value="0">
        </label> <label>About US <input type="checkbox" name="options[]"
        value="0">
        </label> <label>Facebook <input type="checkbox" name="options[]"
        value="0">
        </label> <label>Twitter <input type="checkbox" name="options[]"
        value="0">
        </label> <label>Hotmail <input type="checkbox" name="options[]"
        value="0">
        </label> <label>Something <input type="checkbox" name="options[]"
        value="0">
        </label>
    </div>

    </fieldset> 
```

现在我不想要简单的 html 来创建这些复选框并将这些复选框值绑定到表单
中 任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:08:12.797

您的结构`val placeForm`必须与您在模板中呈现的表单相匹配。

例如 ：

```
val placeForm = Form(
    mapping(
        "id" -> ignored(NotAssigned: Pk[Long]),
        "title" -> optional(text),
        "template" -> optional(text),
        "checkbox1" -> text
        "checkbox2" -> text
    ) // ... here construction and deconstruction functions
) 
```

您的模板可能如下所示：

```
@form(routes.Page.save) {

    <fieldset>

    @inputText(pageForm("title"), '_label -> "Title")
    @inputText(pageForm("template"), '_label -> "Template") 

<label>Options:</label>

<div class="input">
        <label> 1 <input type="checkbox" name="checkbox1" value="1"> </label>
        <label> 2 <input type="checkbox" name="checkbox2" value="2"> </label>
    </div>

    </fieldset>
} 
```

现在重要的是要了解这些复选框的用途。如果您想将那里的值绑定到您的值`case class Place`并且您的表单结构完全匹配您的案例类，您可以使用 apply 和 unapply 方法，如果没有...您必须使用您的自定义函数...

```
((title, template, checkbox1, checkbox2)=> Place(title, template, checkbox1, checkbox2))  //construct function

((place : Place) => Some((place.title, place.template, place.property_that_correspond_to_checkbox1_value,place.property_that_correspond_to_checkbox2_value)) // deconstruct function 
```

或者您可以使用`tuple`而不是`mapping`用于表单构造，然后将您的值简单地作为元组值

# c++ - 选择从哪个 CRTP 基类派生

> ID：14671514
> 
> 赞同：1
> 
> 时间：2013-02-03T10:30:30.120
> 
> 标签：c++, templates, crtp, static-polymorphism

假设我有以下非常简单的 CRTP 基类：

```
template< class D, class T >
struct Base
{

    T foo() 
    {   
        return static_cast< D* >(this)->foo_i();
    }

}; 
```

而且，少数派生类。一切运行良好，但存在一个问题：在*一种*特殊情况（或者可能是几种情况）中，我*真的非常非常*希望两个类具有运行时多态行为（需要将它们放入容器中）。换句话说，我希望一些派生 CRTP 类也具有虚拟版本。所以，我想出了以下课程：

```
template< class T >
struct VirtualBase : public Base< VirtualBase< T >, T >
{

    virtual T foo_i() = 0;

}; 
```

现在，在我需要运行时多态性的地方，我只是从这个类派生而来。假设我希望我的派生类`DerivedB`有一个虚拟版本。香草 DerivedB 看起来像这样：

```
template< class T >
struct DerivedB : public Base< DerivedB< T >, T >
{

    T foo_i() 
    { 
        std::cout << "I'm special!\n";
        return T(); 
    }

}; 
```

我想做的基本上是向此类添加一个额外的模板参数，以便我可以在编译时选择是从 Base 派生（如果我想要模拟的“动态”绑定）还是 VirtualBase（如果我想要真正的动态绑定）。类似于以下伪 C++ 的东西：

```
template< class B, class T >
struct DerivedB : public B< DerivedB< T >, T >
{

    T foo_i() 
    { 
        std::cout << "I'm special!\n";
        return T(); 
    }

}; 
```

因此，对于普通的 CRTP，传递`Base`为`B`，对于虚拟类，传递`VirtualBase`为`B`. 当然，问题在于它们采用不同数量的参数（`Base`需要派生类的类型），我无法提出可行的解决方案。

那么，我将如何在编译时选择基类？或者，如果这太复杂/不可能，那么拥有类的静态（CRTP）和动态（虚拟）版本的最简单方法是什么，否则实现是相同的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:46:17.957

最简单的方法大概就是将“class D”作为VirtualBase的一个未使用的模板参数添加，使其符合相同的接口。

如果您无法更改 VirtualBase，则可以使用中间模板：

```
template <class D, class T> class VirtualBaseWrapper : public VirtualBase<T>{} 
```

# sql - 如何在存储过程中使用 Group BY 和 foreach？

> ID：14671518
> 
> 赞同：1
> 
> 时间：2013-02-03T10:30:51.680
> 
> 标签：sql, stored-procedures, informix

我有一个存储过程，我想`GROUP BY`在这样的`FOREACH`语句中使用：

```
FOREACH SELECT a.task_code, a.task_name, MAX(a.cand_num)
          FROM (SELECT DISTINCT a.task_code, a.task_name, 0 as cand_num   
                  INTO ll_task_code, ls_task_name, ll_cand_num  
                ...........
                ...........
               ) AS u
         GROUP BY a.task_code, a.task_name
    RETURN ll_task_code, ls_task_name, ll_cand_num WITH RESUME;
END FOREACH; 
```

* * *

但我得到一个语法错误`into ll_task_code, ls_task_name, ll_cand_num`

怎么`GROUP BY`用 `FOREACH`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:58:30.557

到`into`外面去试试。

```
FOREACH SELECT a.task_code, a.task_name, MAX(a.cand_num)
          INTO ll_task_code, ls_task_name, ll_cand_num  
          FROM (SELECT DISTINCT a.task_code, a.task_name, 0 as cand_num   
                ...........
                ...........
               ) AS u
         GROUP BY a.task_code, a.task_name
    RETURN ll_task_code, ls_task_name, ll_cand_num WITH RESUME;
END FOREACH; 
```

# python - 如何在 Python 中使用 mmap

> ID：14671524
> 
> 赞同：2
> 
> 时间：2013-02-03T10:31:32.460
> 
> 标签：python, mmap

我在理解有关如何使用 mmap 的 Python 文档时遇到了一些困难。想象一下，我至少有两个独立的程序/进程：a.py 和 b.py。如何使用 mmap 在这两者之间创建共享内存？在这个共享内存中，我希望能够放置所有内容：列表、对象（类实例）、信号量等......

我知道如果我只有一个程序被多处理，在这种情况下我可以使用管理器来共享数据。那么两个或更多不同的程序呢？

如何调整映射区域的大小以便它可以包含一些对象？（列表、实例、信号量...）。我不明白这一点。在 C 语言中这很容易，因为使用 shm_open 和 mmap 你会得到指针......但是在这里？

# mysql - 如何将特定 MySQL 行的 ID 值增加 1？

> ID：14671528
> 
> 赞同：2
> 
> 时间：2013-02-03T10:31:53.850
> 
> 标签：mysql, auto-increment

我在 MySQL 表中有一个列，它在添加新行时输入一个自动增量 ID。MySQL 表中的数据被拉入 HTML 表中，HTML 表中的行按 ID 列排序。通常这对我的目的来说很好，但我现在需要输入一个 ID 低于当前自动增量值的行，以便它出现在表格的更下方。

所以，我想知道是否有一种方法，使用 MySQL 语句将 1 添加到特定行范围的 ID 值，例如将 1 添加到行 800-850，这样它们现在将是 801-851，然后我可以手动插入一个 ID 值为 800 的新行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T10:35:55.580

您需要`auto-incrementation`独自工作并`table_id`在表格中创建一个新字段来设置`id`您想要的数字。

重置表`id`从来都不是一个好主意：例如，不要忘记表上链接的所有外键`id`。

要将 1 增加到您的特定`id`数字，它将是：

```
UPDATE your_table SET table_id = table_id + 1 WHERE table_id BETWEEN 800 AND 850 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T10:36:05.507

```
update [yourtablename] 
set [youridfieldoftable]=[youridfieldoftable] + 1 
where [youridfieldoftable] >= 800 
  and [youridfieldoftable] <= 850 
```

确保用正确的名称替换表和字段名称。该字段是相同的四次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-04T10:59:05.963

为了避免错误

> 键“P​​RIMARY”的重复条目 x

在 sdespont 建议查询中添加 ORDER BY 子句

```
UPDATE your_table SET table_id = table_id + 1 WHERE table_id BETWEEN 800 AND 850 ORDER BY table_id DESC 
```

# facebook - facebook - 通过 API 喜欢一个页面

> ID：14671536
> 
> 赞同：1
> 
> 时间：2013-02-03T10:32:14.490
> 
> 标签：facebook, facebook-like

我希望我的应用程序通过 API 调用代表用户喜欢 Facebook 页面。
我看到了[这](https://developers.facebook.com/docs/reference/api/publishing/)部分文档并尝试提出以下发布请求：

```
https://graph.facebook.com/101544000571/likes?access_token=MY_ACCESS_TOKEN 
```

其中 101544000571 是页面 id 并出现以下错误：

```
{
  "error": {
    "message": "(#3) Application does not have the capability to make this API call.", 
    "type": "OAuthException", 
    "code": 3
  }
} 
```

我认为这是一个权限问题，但应用程序（在本例中是图形 API 资源管理器应用程序）具有所有必要的权限。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:39:53.013

您不能为使用 Facebook Graph API 的页面点赞。不支持。您可以使用[Like 按钮社交插件](http://developers.facebook.com/docs/reference/plugins/like/)。

该文档提到：“对于未与 Facebook Authentication 集成的 Facebook 页面或网站，开发人员应继续使用 Like 按钮社交插件。”

# mysql - 如何在 MySQL 中永久启用 event_scheduler

> ID：14671537
> 
> 赞同：0
> 
> 时间：2013-02-03T10:32:17.457
> 
> 标签：mysql

我在 MySQL 服务器实例配置文件的“mysqld”部分下写了这个：“#event_scheduler=on”：目录中存在“my.ini”：

程序数据\MySQl\MySQL 服务器 5.6

但是，当我重新启动计算机并启动 MySQL 时，它会显示“event_scheduler=off”，我必须再次设置它：“SET @@global.event_scheduler=on”。

我可以永久打开 event_scheduler “on”吗？如果是，那么步骤是什么。详细说明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:04:49.827

以 # 开头的行是 my.ini 中的注释。尝试删除 # 并重新启动服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T10:27:09.857

像这样写：

```
event_scheduler = 'on' 
```

# php - 使用准备好的语句获取多行

> ID：14671543
> 
> 赞同：5
> 
> 时间：2013-02-03T10:33:38.763
> 
> 标签：php, mysqli, prepared-statement

我对准备好的陈述很陌生，我不确定我做对了。

这是我尝试的：

```
$currgame = 310791;

$sql = "SELECT fk_player_id, player_tiles, player_draws, player_turn, player_passes, swapped FROM ".$prefix."_gameplayer WHERE fk_game_id = ?";
$stmt = $mysqli->stmt_init();

$data = array();
if($stmt->prepare($sql)){
    $stmt->bind_param('i', $currgame);
    $stmt->execute();

    $fk_player_id = null; $player_tiles = null; $player_draws = null; $player_turn = null; $player_passes = null; $swapped = null;
    $stmt->bind_result($fk_player_id, $player_tiles, $player_draws, $player_turn, $player_passes, $swapped);

    $res = $stmt->get_result();

    while ($row = $res->fetch_assoc()){
        $data[] = $row;
    }
    $stmt->close(); 
}

// to display own games
foreach ($data as $row) {
    if ($row['fk_player_id'] == $playerid) {

        $udraws = $row['player_draws']+1; 
        $upass = $row['player_passes'];
        $uswaps = $row['swapped'];

        echo 'uDraws: '.$udraws.'<br>';
        echo 'uPass: '.$upass.'<br>';
        echo 'uSwaps: '.$uswaps.'<br><br>';
    }
}
// to display other games
foreach ($data as $row) {
    if ($row['fk_player_id'] != $playerid) {

        $opponent = $row['fk_player_id'];
        $oppTiles = $row['player_tiles'];

        $odraws = $row['player_draws']+1;
        $opass = $row['player_passes'];
        $oswaps = $row['swapped'];

        echo 'oID: '.$opponent.'<br>';
        echo 'oTiles: '.$oppTiles.'<br>';

        echo 'oDraws: '.$odraws.'<br>';
        echo 'oPass: '.$opass.'<br>';
        echo 'oSwaps: '.$oswaps.'<br><br>';

    }
} 
```

尝试运行此程序时出现“ServerError”：它是“$res = $stmt->get_result();” 这会导致错误，但不知道为什么。请帮忙。

提前致谢 ：-）

＃＃＃＃ 编辑

```
$sql = "SELECT fk_player_id, player_tiles, player_draws, player_turn, player_passes, swapped FROM ".$prefix."_gameplayer WHERE fk_game_id = ?";
$stmt = $mysqli->stmt_init();

$data = array();
if($stmt->prepare($sql)){
    $stmt->bind_param('i', $currgame);
    $stmt->execute();

    $fk_player_id = null; $player_tiles = null; $player_draws = null; $player_turn = null; $player_passes = null; $swapped = null;
    $stmt->bind_result($fk_player_id, $player_tiles, $player_draws, $player_turn, $player_passes, $swapped);

    while ($row = $stmt->fetch()){
        $data[] = $row;
    }
    $stmt->close(); 
}

echo '<pre>';
print_r($data);
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T10:47:15.270

根据您的 PHP/MySQL 设置，您可能无法使用 get_result()。

解决这个问题的方法是绑定结果。

例如：

```
$stmt->execute();

$fk_player_id = null; $player_tiles = null; $player_draws = null; $player_turn = null; $player_passes = null; $swapped = null;

$stmt->bind_result($fk_player_id, $player_tiles, $player_draws, $player_turn, $player_passes, $swapped);

while ($stmt->fetch()) { // For each row
    /* You can then use the variables declared above, which will have the 
    new values from the query every time $stmt->execute() is ran.*/
} 
```

[欲了解更多信息，请点击此处](http://php.net/manual/en/mysqli-stmt.bind-result.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T10:42:32.290

由于我在您的代码中没有看到它，因此请确保`mysqli`在尝试查询对象之前实例化该对象：

```
$mysqli = new mysqli("127.0.0.1", "user", "password", "mydb"); 
if($mysqli->connect_error){
    die("$mysqli->connect_errno: $mysqli->connect_error");
} 
```

此外，a`ServerError`肯定会出现在您的日志中，并为您指明正确的方向。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-03T18:22:58.693

```
while (mysqli_stmt_fetch($stmt)) {
        printf ("%s (%s)\n", $name, $code);
    } 
```

这可能会帮助您：

[http://php.net/manual/en/mysqli-stmt.fetch.php](http://php.net/manual/en/mysqli-stmt.fetch.php)

# java - 尝试从 HttpsURLConnection 设置页面（）

> ID：14671545
> 
> 赞同：0
> 
> 时间：2013-02-03T10:33:48.740
> 
> 标签：java, classcastexception, httpsurlconnection

我正在尝试将页面从 HttpsURLConnection 获取到组件上的 setPage() 。

```
java.lang.ClassCastException: sun.net.www.protocol.http.HttpURLConnection cannot be cast to javax.net.ssl.HttpsURLConnection 
```

这是我得到的错误。

有什么修复吗？

```
URL url = new URL("https://www.lalala.tk/website.html");
HttpsURLConnection httpsConn = (HttpsURLConnection) url.openConnection(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:36:01.980

您正在导入错误的类。我打赌在你的代码中的某个地方有

```
import javax.net.ssl.HttpsURLConnection; 
```

但相反，它应该是

```
import sun.net.www.protocol.http.HttpURLConnection; 
```

尝试更换进口，我相信它会奏效。

# ckeditor - ckfinder上传图片但无法插入编辑器

> ID：14671546
> 
> 赞同：1
> 
> 时间：2013-02-03T10:34:09.323
> 
> 标签：ckeditor, ckfinder

我安装了 CKEditor 和 CKFinder。我可以使用取景器上传图像。该图像还显示在“浏览”部分。当我选择图像并将其插入编辑器时，会出现一个红十字。认为路径有问题？我检查了所有路径，似乎一切正常......

PS我可以在编辑器中插入图像的缩略图......有什么建议吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:02:13.637

在 ckfinder 文件夹中的配置文件中，**“baseUrl =”**处的地址必须指向如下文件夹：[http](http://www.yoursite.com/yourimagefolder/) ://www.yoursite.com/yourimagefolder/ 。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-13T06:53:00.460

我用这个修复了我的。在 config.php 中：

```
'baseUrl'      => '/website/admin/ckfinder/userfiles/', 
```

并不是

```
'baseUrl'      => 'website/admin/ckfinder/userfiles/', 
```

'/' 开头...

# c# - 是否可以直接在 zip 文件中更改文件内容？

> ID：14671550
> 
> 赞同：1
> 
> 时间：2013-02-03T10:34:32.423
> 
> 标签：c#, .net, zip, dotnetzip

我有带有文本框的表单，客户希望将此文本框中的所有更改存储到 zip 存档中。

我正在使用[http://dotnetzip.codeplex.com](http://dotnetzip.codeplex.com) 并且我有代码示例：

```
 using (ZipFile zip = new ZipFile())
  {
    zip.AddFile("text.txt");    
    zip.Save("Backup.zip");
  } 
```

而且我不想每次都创建 temp text.txt 并将其压缩回去。我可以在 zip 文件中以 Stream 的形式访问 text.txt 并将文本保存在那里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:46:11.913

DotNetZip 中有一个使用 Stream 方法的示例`AddEntry`。

```
String zipToCreate = "Content.zip";
String fileNameInArchive = "Content-From-Stream.bin";
using (System.IO.Stream streamToRead = MyStreamOpener())
{
  using (ZipFile zip = new ZipFile())
  {
    ZipEntry entry= zip.AddEntry(fileNameInArchive, streamToRead);
    zip.Save(zipToCreate);  // the stream is read implicitly here
  }
} 
```

使用 LinqPad 进行的小测试表明可以使用 MemoryStream 构建 zip 文件

```
void Main()
{
    UnicodeEncoding uniEncoding = new UnicodeEncoding();
    byte[] firstString = uniEncoding.GetBytes("This is the current contents of your TextBox");
    using(MemoryStream memStream = new MemoryStream(100))
    {
        memStream.Write(firstString, 0 , firstString.Length);
        // Reposition the stream at the beginning (otherwise an empty file will be created in the zip archive
        memStream.Seek(0, SeekOrigin.Begin);
        using (ZipFile zip = new ZipFile())
        {
            ZipEntry entry= zip.AddEntry("TextBoxData.txt", memStream);
            zip.Save(@"D:\temp\memzip.zip");  
        }
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:56:03.557

还有另一种 DotNetZip 方法接受文件路径作为参数：

```
 zip.RemoveEntry(entry);
   zip.AddEntry(entry.FileName, text, ASCIIEncoding.Unicode); 
```

# r - 按 R 中的列数对矩阵列表进行排序

> ID：14671553
> 
> 赞同：1
> 
> 时间：2013-02-03T10:34:51.823
> 
> 标签：r, sorting, matrix

我有一个使用 expand.grid() 生成的矩阵列表。

```
myarray=matrix(rexp(200),10,3)
list.of.matrices <- apply(expand.grid(rep(list(c(FALSE, TRUE)), ncol(myarray))),
                              1, function(j)myarray[, j, drop = FALSE]) 
```

当我使用命令时

```
myarray.dim=sapply(myarray, ncol) 
```

我注意到列表不是按我需要的顺序生成的。如果可能的话，我想让它们从 1 列开始订购到 3 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:52:38.840

像这样？

```
lapply(order(sapply(list.of.matrices,ncol)),function(i) list.of.matrices[[i]]) 
```

您的列表有一个零列条目。

# c# - IDisposable 和 ReaderWriterLockSlim

> ID：14671564
> 
> 赞同：2
> 
> 时间：2013-02-03T10:36:10.467
> 
> 标签：c#, idisposable, readerwriterlockslim

我有一堂课`MyClass`。这个类有一个字段：（`public ReaderWriterLockSlim rw;`公共的更简单的示例代码）。`MyClass`许多线程可以从using`rw.EnterReadLock`等 中读取数据。

我也实现了`IDisposable`接口：

```
private void Dispose (bool pDisposing)
{
    {
        if (pDisposing) // release managed resources
        {
            if (rw != null)
            {
                rwLockSlim.Dispose ();
                rwLockSlim = null;
            }
        }

        //--- release unmanaged resources
        // some code...
        isDisposed = true; // ...
    }
} 
```

如您所见，问题是`MyClass`当第二个线程调用`Dispose`myClass 对象时，一个线程正在使用。我无法处置 ReaderWriterLockSlim，因为它会使我的应用程序崩溃。那么我应该删除那些释放托管资源的行吗？反正 ReaderWriterLockSlim 会在不久的将来被 GC 收集，对吧？（但是这个类资源贵吗？）。
也许我应该在 Dispose 方法或其他东西中添加一些 lock(syncObject) ？

编辑：我也处理 AllocHGlobal，所以我需要等待，直到所有线程停止读取/写入`myClass`.

不同的观点：

```
public MyClass : IDisposable
{
            public void EnterReadLock (); // calls rwLockSlim.EnterReadLock,  
                                          // if object is disposed throws Exception

            public void ExitReadLock ();  // same as above

            public void Dispose ();       // wait until all threads exit from locks,
                                          // frees unamanged resources, mark class as disposed
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:09:40.340

这可能不是最好的答案，而是观察和一些想法。

你能简化你的代码吗？我的意思是，其他类型不应该关心您的类型是否在特定并发条件下抛出异常。你将如何测试这个？公共锁对象是邪恶的。它*必须*是私有的，除非您想花费数月时间试图找出神秘的错误。

如果调用了 dispose 方法，则意味着任何其他对象都不应该使用该对象。这意味着您必须首先确保所有线程首先完成对对象的操作，然后再调用 dispose 方法。

建议

*   将锁设为私有
*   在调用 dispose 之前确保所有线程都已完成
*   为安全行为添加超时
*   考虑使用*静态*锁对象
*   ReaderWriterLockSlim 资源并不昂贵（到了您应该在应用程序中关心的程度）
*   如果你的类使用一次性资源，通常最好实现 IDisposable 并处理需要处理的成员。
*   不要在 Dispose 方法中添加任何锁，它应该很简单。这可能会引入令人不快的错误。因为如果您忘记手动调用 Dispose，GC 将不确定地调用它（通过 finiliser，您也应该添加它以调用 Dispose）
*   正确的方法是等到所有线程都完成并处置一个对象

# uml - “系统用例”是什么意思？

> ID：14671565
> 
> 赞同：1
> 
> 时间：2013-02-03T10:36:15.757
> 
> 标签：uml, tool-uml, argouml, staruml

我最近搜索了系统用例的含义，但我找不到任何清楚的东西，我真的看不到重点：// ..据我所知，它是一个用例建模，其中“系统”是参与者之一，但我在一个项目中工作，系统正在做大部分工作（GPS，发送 android 通知，计算距离……）我想知道我可以让谁让我的演员使用系统？我打算分开建模系统的用例吗？请问有人能说清楚吗？？感谢你 ：））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:44:30.273

“用例”和“系统用例”术语几乎在任何时候都可以互换使用。它与作为演员的系统无关。用例通常可以是系统用例或业务用例。业务用例用于业务建模，系统用例用于系统需求工程。

有关更多信息，请参阅这篇文章：

[http://www.agileea.com/Whitepapers/All3%20Business%20vs%20System%20Use%20Cases%20v1%209.pdf](http://www.agileea.com/Whitepapers/All3%20Business%20vs%20System%20Use%20Cases%20v1%209.pdf)

# jquery - Chrome 强制允许跨域 AJAX jQuery 请求？

> ID：14671567
> 
> 赞同：0
> 
> 时间：2013-02-03T10:36:34.637
> 
> 标签：jquery, ajax, google-chrome

我正在使用 Google Chrome (v24) 并希望使用 jQuery 从我的开发环境访问远程数据源（例如，从“本地主机”客户端）。如何强制 Chrome（或所有浏览器）允许跨域请求？

例如，如何强制 Chrome 允许以下标准 AJAX 调用成功：

```
$.get('http://google.com',function(res){console.log(res);}) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-03T10:43:13.040

JSONP。当然，另一端也有一个 RESTful Web 服务。

# bash - 谷歌应用脚 本 curl 授权

> ID：14671573
> 
> 赞同：3
> 
> 时间：2013-02-03T10:37:25.337
> 
> 标签：bash, curl, google-apps-script, authorization

只是想玩谷歌应用脚​​本。在匿名模式下，一切似乎都很好。除了任何人都可以像该片段显示的那样简单地调用我的脚本：

```
curl "https://script.google.com/macros/s/.../exec?ip=\"$myIp\"" 
```

我使用[**本手册**](http://developers.google.com/gdata/articles/using_cURL)获取有关如何通过 GoogleLogin 进行身份验证的提示。问题是我在发送身份验证令牌时收到“401 Unauthorized”，并且在 Google 端设置了“我（所有者）/只有我自己”选项。（令牌本身似乎是正确的。如果我省略密码或输入错误，那么我会收到“错误的身份验证”）如果我再次设置“任何人，甚至匿名”，它就可以工作，但身份验证的东西似乎被忽略了。做这个把戏的正确方法是什么？

```
#!/bin/bash
gmail=$1
password=$2
myIp=$3
GoogleAuthToken=""
GoogleAuthToken=`curl --silent https://www.google.com/accounts/ClientLogin --data-urlencode Email=$gmail \
--data-urlencode Passwd=$password -d accountType=GOOGLE -d source=YouDontSay -d service=lh2`
echo $GoogleAuthToken
GoogleAuthToken=$(echo "$GoogleAuthToken" | grep 'Auth=' | sed  s/Auth=//)
echo $GoogleAuthToken 
curl -L --silent --header "Authorization: GoogleLogin auth=$GoogleAuthToken" "https://script.google.com/macros/s/.../exec?ip=\"$myIp\"" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-24T09:25:18.683

您使用 ClientLogin

```
https://www.google.com/accounts/ClientLogin 
```

这是谷歌错误：

> 重要提示：自 2012 年 4 月 20 日起，ClientLogin 已正式弃用，现在不再可用。对 ClientLogin 的请求将失败并返回 HTTP 404 响应。我们鼓励您尽快迁移到 OAuth 2.0。

# mysql - 对所有属性使用 distinct

> ID：14671574
> 
> 赞同：3
> 
> 时间：2013-02-03T10:37:34.477
> 
> 标签：mysql, sql

![在此处输入图像描述](../Images/45ca6f31b3c499ad53c0c8411dcdf5fe.png)

我们可以使用 * 从表中选择所有属性，我正在使用 distinct 并且我的表包含 16 列，我如何使用 distinct 与它。我不能做`select distinct Id,* from abc;` 最好的方法是什么。另一种方法是选择不同的 id、col1、col2 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:10:37.470

如果你想在结果中，每行`id`，你可以使用`GROUP BY id`. 但是，不建议使用列表中的其他列`SELECT`（即使 MySQL 允许 - 这取决于您是否有`ANSI`设置`On`或`Off`）。建议将其他列与聚合函数（如`MIN()`、`MAX()`、`COUNT()`等）一起使用。在 MySQL 中，还有一个`GROUP_CONCAT()`聚合函数可以从组的列中收集所有值：

```
SELECT
    id
  , COUNT(*)   AS number_of_rows_with_same_id
  , MIN(col1)  AS min_col1
  , MAX(col1)  AS max_col1
  --
  , GROUP_CONCAT(col1)  AS gc_col1
  , GROUP_CONCAT(col2)  AS gc_col2
  --
  , GROUP_CONCAT(col16) AS gc_col16
FROM
    abc
GROUP BY
    id ; 
```

* * *

查询：

```
SELECT *
FROM abc
GROUP BY id ; 
```

不是有效的 SQL（最多 92 个），因为您在列表中有非聚合结果`SELECT`并且在 SQL (2003+) 中有效。尽管如此，这里还是无效的，因为其他列在功能上不依赖于分组列 ( `id`)。MySQL 不幸地允许这样的查询并且不检查函数依赖。

因此，您永远不知道将返回哪一行（在许多相同的行中`id`），或者即使 - 恐怖！- 您从不同的行（具有相同的 id）获得结果。正如@Andriy 评论的那样，结果是列的值不是`id`将被任意选择。**如果您想要可预测的结果，请不要使用这种技术。**

* * *

一个示例解决方案：如果您只需要 each 中的一行`id`，并且您有一个可用于排序的 datetime 或 timestamp（或其他一些）列，您可以这样做：

```
SELECT t.*
FROM abc AS t
  JOIN
    ( SELECT id
           , MIN(some_column) AS m            -- or MAX()
      FROM abc
      GROUP BY id
    ) AS g
    ON  g.id = t.id
    AND g.m = t.some_column ; 
```

只要`(id, some_column)`组合是唯一的，这将起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T10:38:55.850

使用 group by 而不是 distinct

```
group by col1, col2,col3 
```

它的表现与众不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:44:55.267

```
SELECT DISTINCT * FROM `some_table` 
```

是绝对有效的语法。

该错误是由于您调用`Id, *`. Well也`*`包括*Id*列，这通常是唯一的。

所以你需要的只是：

```
SELECT DISTINCT * FROM `abc` 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-03T10:51:46.993

```
 SELECT * FROM abc where id in(select distinct id from abc); 
```

你完全可以做到这一点。
希望这可以帮助

最初我认为它适用于 group by 是最好的。这与执行 select * froom abc 相同。对不起大家

# http - 无法使用 $http angularjs 获取结果数据

> ID：14671580
> 
> 赞同：9
> 
> 时间：2013-02-03T10:38:28.387
> 
> 标签：http, angularjs

我正在尝试使用 $http，但为什么它返回空结果？

```
angular.module('myApp')
.factory('sender', function($http) {
    var newData = null;
    $http.get('test.html')
        .success(function(data) {
            newData = data;
            console.log(newData)
        })
        .error(function() {
            newData = 'error';
        });
    console.log(newData)
    return newData
}) 
```

控制台说：[http](http://screencast.com/t/vBGkl2sThBd4) ://screencast.com/t/vBGkl2sThBd4 。为什么我的 newData 首先是 null 然后被定义？如何正确执行？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-17T11:04:10.007

正如 YardenST 所说，`$http`它是异步的，因此您需要确保依赖于您返回的数据的所有函数或显示逻辑都`$http.get()`得到相应的处理。实现此目的的一种方法是利用`$http`返回的“承诺”：

[**Plunkr 演示**](http://plnkr.co/edit/9w2jTg?p=preview)

```
var myApp = angular.module('myApp', []);

myApp.factory('AvengersService', function ($http) {

    var AvengersService = {
        getCast: function () {
            // $http returns a 'promise'
            return $http.get("avengers.json").then(function (response) {
                return response.data;
            });
        }
    };

    return AvengersService;
});

myApp.controller('AvengersCtrl', function($scope, $http, $log, AvengersService) {
    // Assign service to scope if you'd like to be able call it from your view also
    $scope.avengers = AvengersService;

    // Call the async method and then do stuff with what is returned inside the function
    AvengersService.getCast().then(function (asyncCastData) {
            $scope.avengers.cast = asyncCastData;
    });

    // We can also use $watch to keep an eye out for when $scope.avengers.cast gets populated
    $scope.$watch('avengers.cast', function (cast) {
        // When $scope.avengers.cast has data, then run these functions
        if (angular.isDefined(cast)) {          
            $log.info("$scope.avengers.cast has data");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T10:44:32.390

此 JavaScript 代码是异步的。

```
console.log(newData)
return newData 
```

在什么里面执行之前`success`

```
newData = data;
console.log(newData) 
```

所以第一次，newData 为空（你设置为空）

并且当返回 http 响应时（在成功内）， newData 将获得它的新值。

这在 Javascript 中很常见，您应该在`success`.

# jquery-plugins - jQuery autoellipsis 插件 - 更新内容时不起作用

> ID：14671584
> 
> 赞同：1
> 
> 时间：2013-02-03T10:39:03.167
> 
> 标签：jquery-plugins

我正在使用以下 jQuery 插件： [http](http://pvdspek.github.com/jquery.autoellipsis/) ://pvdspek.github.com/jquery.autoellipsis/ ，一般来说效果很好。当我需要更新元素的文本时，问题就来了。有人会假设更改元素的文本并再次调用插件将执行与初始调用相同的操作。

[但是，正如在这个小提琴](http://jsfiddle.net/mohoch/PxszR/3/)中可以看到的那样- 它没有。

代码很简单

```
var container = $(".container");
container.text("This is a long text that should have text ellipsis");
//this works fine
container.ellipsis();

  $("button").click(function()
   {
      container.text("This is the modified text that should also have ellipsis");
      //this doesn't work
      container.ellipsis();
   }); 
```

我可以使它工作的唯一方法是删除存储在元素上的数据，并使插件“从头开始”运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:02:59.907

清除autoellipsis存储的数据：container.data('jqae', null);

```
var container = $(".container");
container.text("This is a long text that should have text ellipsis");
//this works fine
container.ellipsis();

  $("button").click(function()
   {
      container.data('jqae', null);
      container.text("This is the modified text that should also have ellipsis");
      //this doesn't work
      container.ellipsis();
   }); 
```

# c# - 在每个 MSTest 测试方法开始时重置静态变量

> ID：14671586
> 
> 赞同：2
> 
> 时间：2013-02-03T10:39:17.803
> 
> 标签：c#, unit-testing, asynchronous, concurrency, mstest

我以下列方式在同一个测试程序集中有 N 个 MSTest 测试类和方法（它使用相同的静态变量）。

```
[TestClass]
public class TestClass1
{
    [TestMethod]
    public void TestMethod1A()
    {
        MyClass.StaticVariable = 0;
        MyClass.StaticVariable = MyClass.StaticVariable + 1;
        Assert.AreEqual(1, MyClass.StaticVariable)
    }

    [TestMethod]
    public void TestMethod1B()
    {
        MyClass.StaticVariable = 0;
        MyClass.StaticVariable = MyClass.StaticVariable + 1;
        Assert.AreEqual(1, MyClass.StaticVariable)
    }
}

[TestClass]
public class TestClass2
{
    [TestMethod]
    public void TestMethod2A()
    {
        MyClass.StaticVariable = 0;
        MyClass.StaticVariable = MyClass.StaticVariable + 1;
        Assert.AreEqual(1, MyClass.StaticVariable)
    }

    [TestMethod]
    public void TestMethod2B()
    {
        MyClass.StaticVariable = 0;
        MyClass.StaticVariable = MyClass.StaticVariable + 1;
        Assert.AreEqual(1, MyClass.StaticVariable)
    }
} 
```

这些测试能保证通过吗？我的观点是 MSTest 是否总是同步执行测试方法，只允许 MyClass.StaticVariable 在被断言之前被初始化和递增一次？会不会出现以下场景？

```
1\. TestMethod1A makes MyClass.StaticVariable 0
2\. TestMethod2B increments MyClass.StaticVariable by 1
3\. TestMethod1A increments MyClass.StaticVariable by 1 (making the value equal to 2)
4\. TestMethod1A asserts (Fail!) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:14:02.317

MSTest 支持多线程，但需要在测试设置文件中[开启。](http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx)默认情况下，所有测试都将同步运行。

此外，如果您想在每次测试运行时重置一个变量，您可以在方法上放置一个属性，并且该方法将在该类中的每个测试之前运行：

```
[TestInitialize()]
public void TestInit()
{
    MyClass.StaticVariable = 0;
} 
```

# reverse-engineering - 操纵 bios 版本的构建日期

> ID：14671587
> 
> 赞同：0
> 
> 时间：2013-02-03T10:39:27.380
> 
> 标签：reverse-engineering, bios

我已更新到可能已损坏的新 BIOS 版本。现在我不能回退到旧的 bios 版本，因为构建日期总是必须比当前安装的 bios 更新。

有没有一种安全的方法来操纵构建日期？在 Windows 中，它被称为“修改日期”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:43:46.270

好吧，没关系，我只是自己想出来的。我只需要重新保护它。

# jquery - Jquery UI datePicker 日期范围不受附加输入限制

> ID：14671588
> 
> 赞同：0
> 
> 时间：2013-02-03T10:39:37.550
> 
> 标签：jquery, jquery-ui, datepicker

这个问题与其他问题非常相似，但并不完全相似 - 所以请仔细阅读。

我在生日等字段上使用 datePicker - 我将范围限制为仅过去的日期。我需要验证日期。输入不是只读的，我不希望它是。

```
$(element).datepicker({
        dateFormat: dateFormat,
        changeMonth: true,
        changeYear: true,
        yearRange: "1900:2050",
        maxDate: new Date,
        constrainInput: "true",
        currentText:"Today",
        showButtonPanel: true,
        onClose: function (dateText, inst){
            dPickerDate=$('#'+this.id).datepicker("getDate");
            pDate=$.datepicker.formatDate(dateFormat, dPickerDate);
            if(dateText!=pDate)
                {
                $('#errorFor'+this.id).removeClass("hidden");
                }
            else
                {
                    //do some calculations to save the date... for internal purposes
                                    }

    }); 
```

这个想法是我检查输入的日期是否可以在日期选择器中选择 - 否则意味着它无效。可用于验证目的。

问题是 datePicker 允许我输入不在日期范围内的日期。在 fireBug 中调试时，我可以看到 datePicker 的值实际上是无效的未来日期，即使它没有显示在所选的 datePicker 中。

有任何想法吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:18:23.217

是的，因为您没有进行任何输入验证。即使您的 yearRange 是 1900:2050，但这并不意味着用户无法通过键盘输入其他年份。我建议将日期字段设为只读，以便它只能由 datepicker ui 访问，或者您可以创建一个函数来检查用户输入的日期。

# java - Java打印四字节十六进制数

> ID：14671594
> 
> 赞同：11
> 
> 时间：2013-02-03T10:40:33.620
> 
> 标签：java, floating-point, integer, hex, converter

我有一个小问题。我有 5421、-1 和 1 之类的数字。我需要将它们打印成四个字节，例如：

```
5421 -> 0x0000152D
-1   -> 0xFFFFFFFF
1    -> 0x00000001 
```

另外，我有浮点数，如 1.2、58.654：

```
8.25f -> 0x41040000
8.26  -> 0x410428f6
0.7   -> 0x3f333333 
```

我需要将这两种类型的数字转换为它们的十六进制版本，但它们必须正好是四个字节长（四对十六进制数字）。

有谁知道这在 Java 中怎么可能？请帮忙。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-03T10:49:03.647

这里有两个函数，一个是整数，一个是浮点数。

```
public static String hex(int n) {
    // call toUpperCase() if that's required
    return String.format("0x%8s", Integer.toHexString(n)).replace(' ', '0');
}

public static String hex(float f) {
    // change the float to raw integer bits(according to the OP's requirement)
    return hex(Float.floatToRawIntBits(f));
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-15T18:43:40.027

对于整数，还有更简单的方法。如果您希望十六进制数字的字母部分为大写，请使用大写“X”，否则使用“x”作为小写。格式化程序中的“0”表示保持前导零。

```
public static String hex(int n) 
{
    return String.format("0x%04X", n);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-03T10:59:15.537

这是花车：

```
 System.out.printf("0x%08X", Float.floatToRawIntBits(8.26f)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-03T10:46:51.233

采用

```
String hex = Integer.toHexString(5421).toUpperCase();  // 152D 
```

获得前导零

```
String hex = Integer.toHexString(0x10000 | 5421).substring(1).toUpperCase(); 
```

# embedded - 当我的 CPU 不支持未对齐的内存访问时，这意味着什么？

> ID：14671595
> 
> 赞同：6
> 
> 时间：2013-02-03T10:40:48.447
> 
> 标签：embedded, arm, structure, memory-alignment, cortex-m

我刚刚发现我在 (Cortex M0) 上编写代码的 ARM 不支持未对齐的内存访问。

现在在我的代码中，我使用了很多打包结构，而且我从来没有收到任何警告或硬故障，那么当 Cortex 不允许未对齐访问时，它如何访问这些结构的成员呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T10:48:12.683

gcc 等编译器了解对齐，并会发出正确的指令来解决对齐问题。如果你有一个打包的结构，你会告诉编译器它，所以它提前知道如何进行对齐。

假设您使用的是 32 位架构，但有一个`struct`像这样打包的：

```
struct foo __attribute__((packed)) {
   unsigned char bar;
   int baz;
} 
```

当进行访问时`baz`，它将在 32 位边界上进行内存加载，并将所有位移动到位。

在这种情况下，它可能会加载 32 位的地址`bar`和地址 + 4 的 32 位加载。`bar`然后它将应用一系列逻辑操作，例如移位和逻辑或/并以正确的结果结束`baz`32 位寄存器中的值。

查看汇编输出以了解其工作原理。您会注意到，在这些体系结构上，未对齐访问的效率将低于对齐访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T18:07:46.543

在许多较旧的 8 位微处理器上，加载（和存储）寄存器的指令大于内存总线的宽度。这样的操作将通过从一个地址加载寄存器的一半，从下一个更高地址加载另一半来执行。即使在内存总线宽度超过 8 位（例如 16 位）的系统上，将内存视为字节的可寻址集合通常也很有用。从任何地址加载一个字节将导致处理器读取 16 位内存位置的一半并忽略另一半。从偶数地址读取 16 位值将导致处理器读取整个 16 位内存位置并使用整个东西；该值与读取两个连续的字节地址并将结果连接起来的值相同，但它将在一次操作中读取，而不是两次。

在某些这样的系统上，如果尝试从奇数地址读取 16 位值，处理器将读取两个连续的地址，使用一个值的一半和另一个值的另一半，就好像一个已经执行了两个单字节读取并组合结果。这称为未对齐的内存访问。在其他系统上，这样的操作会导致总线故障，这通常会触发某种形式的中断，这些中断可能会也可能不会对它做一些有用的事情。支持未对齐访问的硬件相当复杂，设计代码以避免未对齐访问通常并不太困难。因此，这种硬件通常只存在于已经非常复杂的处理器上，

# javascript - 禁止点击标记

> ID：14671597
> 
> 赞同：2
> 
> 时间：2013-02-03T10:41:28.897
> 
> 标签：javascript, google-maps, google-maps-api-3, onclick, google-maps-markers

如果单击标记，则会显示有关地点的信息（例如坐标）。我想禁用它，所以标记不可点击。我怎样才能做到这一点？

我环顾四周，但无法找到有关如何做到这一点的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T10:54:21.843

显然有两种可能的方法来实现这一点

1.  通过使用属性 setClickable(flag:boolean); 请参阅[http://code.google.com/apis/maps/documentation/v3/reference.html#Marker](http://code.google.com/apis/maps/documentation/v3/reference.html#Marker)

2.  将听者从标记上移开。它看起来类似于这个 google.maps.event.addListener(marker, "click", function(etc)

[参考](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/9bShRr7A-Ck)

此外，如果您在协作模式下处理地图，在左框架的右上角（列出位置），有一个编辑按钮。点击它。

然后转到左侧列表中要删除的位置并单击它以在地图上打开它的信息窗口（从水滴形标记扩展）。该信息框内是一个“删除”链接，用于删除该位置。

# javascript - 使用 JQuery 的简单进度条不起作用

> ID：14671600
> 
> 赞同：1
> 
> 时间：2013-02-03T10:41:40.777
> 
> 标签：javascript, jquery, html, progress-bar

我是JavaScript的新手，我负责一个在线测验（html5代码），执行“startgame”功能需要很长时间（为100个问题构建html）。所以我添加了一个进度条，

```
 function startgame()
   {    
    var progress=0;
    for (index = 0; index < numberofquestions; index++) {
    progress=index+"%";
    $("#progress-bar").css("width",progress);
    ...
    }
    ...} 
```

而progress-bar是html代码中一个div的id

```
<div id="progress-bar" style="width:0%; background:blue;opacity:1;height:25px;"/>` 
```

当我跨过 for 循环时，它按预期工作（条的宽度正在增加），但是，如果我删除断点并运行，它根本不起作用（进度将保持在 0% 或我停止的点调试）我也试过

```
document.getElementById("progress-bar").outerHTML='<div id="progress-bar"          style="width:'+progress+';background:blue;opacity:1; display:block; height:25px;"'+'/>'; 
```

替换 $("#progress-bar").css("width",progress); 但结果和以前一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:46:41.057

numberofquestions.length 应该为您提供数组 numberofquestions 的整个长度。你错过了所有的代码，所以除此之外不能说..

# iphone - xib 的对象

> ID：14671602
> 
> 赞同：1
> 
> 时间：2013-02-03T10:41:49.483
> 
> 标签：iphone, ios, objective-c, xcode

当我的 xcode 加载时，我看到这样的元素面板：

![在此处输入图像描述](../Images/da5c80f51fe0bc1ed57dd864dd400cc7.png)

但是，当我单击项目中的任何文件时，此面板会消失并显示此面板：

![在此处输入图像描述](../Images/8c75015124276cbed575ef0974e612aa.png)

之后我无法打开元素的扩展版本，无法将它们添加到 xib 文件中。我怎样才能打开它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:53:08.867

可用于 Cocoa 和 Cocoa Touch 的对象库之间存在巨大差异。您所说的“扩展”元素仅适用于 OSX 开发。

![在此处输入图像描述](../Images/504b876597ef1eba43229ca8af9899e4.png)

![在此处输入图像描述](../Images/72f9e5498439fcce33d351650cedb1ad.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:52:37.450

您谈论的元素仅适用于Mac-Development（Cocoa），不适合iOS（UIKit / Cocoa Touch）甚至不支持

这些控件不符合 IOS HIG 且未由框架实现

# java - 具有两种数据类型的 JTable 单元格

> ID：14671604
> 
> 赞同：1
> 
> 时间：2013-02-03T10:42:24.767
> 
> 标签：java, swing, jtable, renderer, imageicon

我在 JTable 中有一个列，它应该显示两种类型：字符串或 ImageIcon，而不是两者。该列中的每个单元格都有自己的线程来计算数据。一开始我给每个单元格放置一个图像（如等待徽标），然后用一串计算数据替换（不附加）图像。我试图扩展默认的 TableCell 渲染器，但它显示像对象地址（javax.swing.ImageIcon@342...）这样的图像，然后用字符串替换。另一种变体，它正确显示图像，但用空字符串替换它（或者它不可见？）。

如何设置它以便表格根据类型正确显示单元格内容？

这是我目前所拥有的：

```
class IconAndStringRenderer extends DefaultTableCellRenderer {

private static final long serialVersionUID = 3606788739290618405L;

public Component getTableCellRendererComponent(JTable table, Object value,
                          boolean isSelected, boolean hasFocus, int row, int column) {
    super.getTableCellRendererComponent(table, value,
                          isSelected, hasFocus, row, column);
    if (value instanceof Icon) {

      setIcon((Icon) value);
      setText("");
    } 
    return this;
  }
} 
```

这是JTable：

表 = 新 JTable（模型）{

```
 private static final long serialVersionUID = 8058795799817761161L;

        public Class<?> getColumnClass(int column) {
            if (column == TARGET_COLUMN)
                return ImageIcon.class;
            else
                return super.getColumnClass(column);
        }
    }; 
```

还有几个问题：

1.  如何设置它以使文本替换图像，而不是在图像之后写入文本（即使它不可见）；

2.  如何设置文本颜色，我将使用 setForebackground(Color c)，但如果我使用它，图像不会显示。

3.  是否可以使其与 Jlabel 一起使用？在修改单元格的线程中设置所需的 Jlabel(带有图像或文本)，只需 setValueAt(label, row, column);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:10:41.333

[*默认渲染器*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)知道如何显示字符串和图标。您所要做的就是确保您分别从、和中`TableModel`返回正确的类。可以在[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender#eg)找到示例。`getColumnClass()``String.class``Icon.class`

附录：这是一个基于默认实现的最小示例来说明原理。

附录：*不确定在需要为同一列返回不同类时是否有效*。

如果您确实需要在每个单元格的基础上选择渲染器，请覆盖，如此[处](https://stackoverflow.com/a/14077632/230513)`prepareRenderer()`所示。

![图片](../Images/1cd6478b72162b5d17704e1863282cd6.png)

```
import java.awt.EventQueue;
import javax.swing.Icon;
import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.table.DefaultTableModel;

/** @see https://stackoverflow.com/a/14672312/230513 */
public class Test {

    private static final Icon YES = UIManager.getIcon("InternalFrame.maximizeIcon");
    private static final Icon NO = UIManager.getIcon("InternalFrame.closeIcon");

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        DefaultTableModel model = new DefaultTableModel(
            new Object[]{"Name", "Icon"}, 0) {

            @Override
            public Class<?> getColumnClass(int col) {
                if (col == 1) {
                    return Icon.class;
                } else {
                    return super.getColumnClass(col);
                }
            }
        };
        model.addRow(new Object[]{"One", YES});
        model.addRow(new Object[]{"Two", NO});
        final JTable table = new JTable(model);
        table.setRowHeight(YES.getIconHeight() +2);
        f.add(table);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T18:42:16.613

要利用默认渲染器，您可以覆盖 JTable 的 getCellRenderer(...) 方法以返回适当的渲染器。就像是：

```
public TableCellRenderer getCellRenderer(int row, int column)
{
    int modelColumn = convertColumnIndexToModel(column);

    if (modelColumn == ???)
    {
        Class rowClass = getModel().getValueAt(row, modelColumn).getClass();
        return getDefaultRenderer( rowClass );
    }
    else
        return super.getCellRenderer(row, column);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T10:52:18.247

您需要一个可以理解您使用的两种类型的自定义渲染器。

例如

```
public class IconAndStringRenderer extends DefaultTableCellRenderer {
  public Component getTableCellRendererComponent(JTable table, Object value,
                          boolean isSelected, boolean hasFocus, int row, int column) {
    super.getTableCellRendererComponent(table, value,
                          isSelected, hasFocus, row, column);
    if (value instanceof Icon) {
      setText("");
      setIcon((Icon) value);
    }
    return this;
  }
} 
```

尝试将此类设置为您的列渲染器

# php - CodeIgniter 中的执行顺序

> ID：14671605
> 
> 赞同：0
> 
> 时间：2013-02-03T10:42:28.683
> 
> 标签：php, codeigniter

```
class Index extends CI_Controller {

 private $data = array();
 private $content_data = array();

 public function __construct() {
    parent::__construct();

    if (isset($_GET['m2w'])) {
        $stw = switch_to_web();
    }

    if (isset($_GET['w2m'])) {
        $stm = switch_to_mobile();
    }

     // load mobile or desktop view

}

 // Called within an helper function 

function switch_to_web() {
  return set_cookie('load-web', 'true', '86500');
 }

function switch_to_mobile() {
  return delete_cookie('load-web');
}

function is_mobile() {

// return true;
$CI = & get_instance();

if ($CI->input->cookie('load-web'))
    return false;

$CI->load->library('user_agent');
if ($CI->agent->is_mobile()) {
    return true;
}else
    return false;
} 
```

我有上面的代码块来确定是加载移动视图还是网络视图。

预期执行顺序：

*   如果设置了 m2w，则设置 load-web cookie（这是在调用 is_mobile 函数之前完成的
*   is_mobile 函数看到 load-web cookie 已设置并加载桌面版本

实际执行顺序：

*   如果设置了 m2w，则调用 load-web cookie 进行设置，但是 is_mobile 函数没有将其视为已设置，因此未加载桌面版本
*   在 is_mobile 函数返回 true 后设置 cookie，我检查我的浏览器 cookie 并观察到 ​​cookie 实际设置但未按预期设置

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:14:45.883

CI 的 cookie 使用 PHP 的原生[setcookie()](http://php.net/manual/en/function.setcookie.php)方法。Cookie 需要先在 HTTP 标头中发送，然后才能在本机`$_COOKIE`变量中使用。

来自 PHP 文档：

> 一旦设置了 cookie，就可以在下一页加载时使用 $_COOKIE 或 $HTTP_COOKIE_VARS 数组访问它们。

这是`cookie()`来自 CI 的方法：

```
function cookie($index = '', $xss_clean = FALSE)
{
    // Simply fetch from the $_COOKIE array and do XSS_Clean if needed.
    return $this->_fetch_from_array($_COOKIE, $index, $xss_clean);
} 
```

简而言之，您正确设置了 cookie，但在您下一次请求之前它不可用。这都是因为新值不在`$_COOKIE`数组中。

你有多种选择来解决这个问题。

*   您可以扩展 CI_Input 类并修改`set_cookie`方法以将新值添加到`$_COOKIE`数组中。
*   您可以编辑您的`is_mobile`函数以检查该`$_GET['m2w']`值。（不仅仅是饼干。）

个性，我认为第二种解决方案是最干净和最容易做到的，但我不知道您项目的全部范围。

希望这可以帮助！

# r - 是否可以看到闪亮的微光应用程序的代码

> ID：14671609
> 
> 赞同：4
> 
> 时间：2013-02-03T10:42:58.147
> 
> 标签：r, security, code-access-security, shiny

嗨，这更多的是代码安全问题，而不是关于直接编码相关问题的问题。但我想知道是否可以看到生成应用程序 Web 浏览器页面`ui.R`的代码？`server.R`

例如，尽管我确定我可以让 Garrett 查看代码……是否有可能在未经授权的情况下以某种方式查看与此 URL [http://glimmer.rstudio.com/gsee/TFX/](http://glimmer.rstudio.com/gsee/TFX/)相关的代码，即运行一个闪亮的应用程序？因为如果放置敏感数据/代码等，这可能是一个问题。

有没有办法为闪亮的应用程序添加安全的用户名和密码？这样只有选定的用户才能访问该应用程序？

我很清楚你可以从 gists 看到运行闪亮应用程序的代码，但对微光应用程序更感兴趣。

PS Garrett（如果你看到这个），我只是将你的应用程序作为一个很好的应用程序示例......因为它使用了微光......，在我看来它的代码很有吸引力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T11:24:18.940

当您谈论在 上运行的闪亮应用程序时`glimmer.rstudio.com`，您谈论的是在闪亮服务器上运行的应用程序（与通过调用在本地运行的应用程序相反`runApp`）。

一个这样的，两者`ui.R`都`server.R`位于服务器上，并且在您运行它时它们不会下载到您的计算机上。此外，它们似乎受到了闪亮的保护，就像您尝试通过 URL 访问它们一样，例如[http://shinyserver.example.com/app/server.R](http://shinyserver.example.com/app/server.R)，您将得到的只是 HTTP 404 错误。

因此，就像无法访问为网站或 Web 应用程序提供动力的 PHP 或 Ruby 文件一样，出于明显的安全原因，您也无法访问闪亮应用程序背后的 R 文件。

至于保护对闪亮应用程序的访问，我不确定它是否是闪亮服务器中的内置功能，但如果你在 Apache 或 Nginx 代理后面运行它，应该可以使用 HTTP 身份验证。

**注意：**我根本不是一个闪亮的专家，所以这个答案可能是部分错误的。我只是希望不完全:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:18:38.657

现在，不要在微光服务器上放置敏感代码或数据！它不安全，服务器的任何用户都可以访问其他用户的代码/数据。已经提交了一个错误报告，开发人员正在处理它，但令我惊讶的是，服务器仍然在线。

用户名/密码不会帮助解决这个错误。如果您想要安全，请自己托管 Shiny Server，因为微光服务器不安全。

# iphone - 在 CALayer 的蒙版区域周围添加阴影

> ID：14671613
> 
> 赞同：9
> 
> 时间：2013-02-03T10:43:15.923
> 
> 标签：iphone, core-animation

我`CAGradientLayer`用 a掩盖 a`CAShapeLayer`为了生成位于我表中某些行内的书签。

![在此处输入图像描述](../Images/85ade3b31f623efb5054c533b9271422.png)

```
 CGMutablePathRef path = CGPathCreateMutable();
        CGPathAddLines(path,
                       NULL,
                       (CGPoint[]){
                           CGPointMake(8, 0),
                           CGPointMake(22, 0),
                           CGPointMake(22, 22),
                           CGPointMake(15, 16),
                           CGPointMake(8, 22)
                       },
                       5);
        CGPathCloseSubpath(path);

        CAShapeLayer *mask = [CAShapeLayer layer];
        mask.fillColor = [UIColor redColor].CGColor;
        mask.bounds = CGRectMake(0, 0, 30, 30);
        mask.path = path;
        mask.anchorPoint = CGPointMake(0, 0);

        CGPathRelease(path);

        CAGradientLayer *favoriteBadge = [CAGradientLayer layer];
        favoriteBadge.colors =
            @[(id)[UIColor colorWithRed:.97f green:0.5f blue:0.1f alpha:1.f].CGColor, // orange
              (id)[UIColor colorWithRed:1.f green:.8f blue:0.f alpha:1.f].CGColor]; // yellow
        favoriteBadge.locations = @[@0.0, @1.0];
        favoriteBadge.bounds = CGRectMake(0, 0, 30, 30);
        favoriteBadge.anchorPoint = CGPointMake(1, 0);
        favoriteBadge.position = CGPointMake(self.bounds.size.width, 0);
        favoriteBadge.mask = mask;
        // FIXME: This shadow is not being applied
        favoriteBadge.shadowColor = [UIColor colorWithRed:.97f green:0.5f blue:0.1f alpha:1.f].CGColor;
        favoriteBadge.shadowOpacity = 1.f; 
```

这看起来太平了，所以我想在形状本身周围加上一个阴影来完成这个。我试过在图层上启用阴影，但似乎没有应用。我假设它被应用于不在形状内部的区域。如何为形状本身添加阴影？

我可以复制图层，将其变暗并将其位置偏移几个像素，但是当 CoreAnimation 可能对我来说更有效时，这感觉很浪费。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T11:00:09.570

为您的遮罩层创建一个容器层，并将阴影应用到容器层。我相信这里是这样描述的：

[http://travisjeffery.com/b/2012/08/ios-how-to-mask-and-shadow-an-image/](http://travisjeffery.com/b/2012/08/ios-how-to-mask-and-shadow-an-image/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-08T15:18:22.233

也许你唯一错过的就是

```
favoriteBadge.masksToBounds = NO 
```

# php - MySQL数据获取方法

> ID：14671614
> 
> 赞同：1
> 
> 时间：2013-02-03T10:43:19.390
> 
> 标签：php, mysql

有不同的方法，如何使用 PHP 获取和打印 MySQL 数据。

例如，您可以使用 PHP 循环逐行获取数据：

```
$result = $mysqli->query("SELECT * FROM `table`");

while($data = $result->fetch_assoc())
{
  echo '<div>'. $data["field"] .'</div>';
} 
```

此外，您可以将所有选定的数据存储到数组中，然后通过它：

```
$result = $mysqli->query("SELECT * FROM `table`");
$data = $result->fetch_all(MYSQLI_ASSOC);

foreach($data as $i => $array)
{
  echo '<div>'. $array["field"] .'</div>';
} 
```

有什么严重的原因，为什么我应该使用一种方法而不是另一种方法？如果数据库非常庞大，性能又如何呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:02:13.413

在第一个示例中，每次执行循环时都会`while($data = $result->fetch_assoc())`调用该函数。`fetch_assoc`第二个只调用`fetch_all`一次，将数据存储在一个数组中，然后再使用它。所以，理论上第二种方法应该更快，但是你最好做一个简单的基准测试来确定。

# c++ - 最多多少个数字 next_permutation（在 CPP 中给出 ）作品？

> ID：14671617
> 
> 赞同：0
> 
> 时间：2013-02-03T10:43:31.873
> 
> 标签：c++

我在 cpp （算法库）中使用 next_permutation 。它可以置换的字符串长度的上限是多少？因为我可以轻松地置换长度为 5 的字符串，但对于长度为 50 的字符串，它只是不要停止。我知道50！很大，所以我想知道它的使用是否有合理的限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:48:50.247

好吧，它适用于您记忆中的尽可能多的数字。只是需要更长的时间。更长的时间我的意思是50！您将不得不在现代计算机上等待大约`96442456880115988215412887386050129516671872047` **数年**，或者比宇宙应该存在的时间长很多数量级。

# asp.net-mvc - 使用 LINQ 和 ADO.NET 实体数据模型

> ID：14671634
> 
> 赞同：0
> 
> 时间：2013-02-03T10:45:50.200
> 
> 标签：asp.net-mvc, linq, entity-framework

是否可以在项目中同时使用 LINQ 和 ADO.NET 实体数据模型？我有一个基于以前用户的 ADO.NET 实体数据模型的项目，并且有 .edmx 文件，但我习惯于对所有内容进行硬编码，通过 ADO.NET 打开连接。

在 MVC 项目中同时使用两者是否有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:43:50.400

LINQ（语言集成查询）是 C# 中的 TSQL（是的，我们可以查询 xml、lamda 表达式等，但主要用于 TSQL ......）您可以针对 LINQ to SQL（*.dbml）或实体框架（.dbml）*编写 LINQ 查询。 edmx）通过创建每个上下文，调用方法有一点差异，如 EF Object.AddToObject(o) 和 LINQ to SQL Object.InsertOnSubmit(o) 和 .Savechanges()/Submitchanges() LINQ to SQL 支持只有 MS SQL 服务器，但 EF 也可以支持其他数据库，即 MY SQL 等

如果您在项目中使用这些中的任何一个，您**仍然可以在项目中的任何地方使用旧的 Ado.net**，方法是向方法提供适当的信息，或者通过在打开连接后传递参数来调用存储过程，就像我们过去所做的那样...... .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:54:03.663

Linq 只是一种用 C# 编写 sql 的方法。好吧，实际上远不止这些。但是在这种情况下，无论您在哪里放置一些 sql，都使用 linq intead，因此就 EF 而言它是不可知的。或与此相关的任何其他框架。

真正的好处是稍加考虑，您可以使用 sql 数据库以外的东西来实现持久性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:19:23.547

有 2 种 Linq

Linq 到对象和 Linq 到 SQL

Linq to SQL 不适用于您的 ADO 模型，因为这需要直接链接到 SQL

但是 Linq to 对象将像任何其他对象一样轻松地处理 ADO 模型对象

实际上，这一切意味着，不是在 DB Linq 中管理查询的构造，而是让 ADO 处理它，您不会看到任何区别

# ruby - 致命错误：ruby/config.h：没有这样的文件或目录

> ID：14671635
> 
> 赞同：0
> 
> 时间：2013-02-03T10:45:49.937
> 
> 标签：ruby, qt, qt4, fedora, korundum

我正在尝试在 Fedora 17 上安装 korundum。在此`$ make`阶段我收到以下错误：

```
In file included from /usr/include/ruby.h:32:0,
                 from Qt.cpp:49:
/usr/include/ruby/ruby.h:24:25: fatal error: ruby/config.h: No such file or directory
compilation terminated.
make[5]: *** [Qt.lo] Error 1
make[5]: Leaving directory `/home/n/Downloads/korundum-3.5.5/qtruby/rubylib/qtruby'
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/home/n/Downloads/korundum-3.5.5/qtruby/rubylib/qtruby'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/n/Downloads/korundum-3.5.5/qtruby/rubylib'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/n/Downloads/korundum-3.5.5/qtruby'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/n/Downloads/korundum-3.5.5'
make: *** [all] Error 2 
```

如何解决这个问题？我正在失去理智。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-28T22:38:55.870

错误消息表明您需要安装 ruby​​ dev 文件，但没有它们。

# php - PHP退出后如何添加html和javascript

> ID：14671642
> 
> 赞同：1
> 
> 时间：2013-02-03T10:46:31.913
> 
> 标签：php, javascript, html, json, parsing

请帮助，我在 ?> 之后没有添加任何内容，我试图将代码放在 echo 中，但它不起作用请有人为我整理一个 JSFiddle 或为我指出正确的方向，我对 PHP 相当陌生，谢谢您的帮助

```
<?php
    $filepath = 'http://www.godsgypsychristianchurch.net/music.json';
    $content = file_get_contents($filepath);
    $json = json_decode($content, true);

foreach ($json['rows'] as $row)
    {
            if ($_GET['album'] == $row[doc]['album'])
            {
                        echo "<title>{$row[doc]['album']}</title>";
                        echo "<table align=\"center\" border=\"0\"><tr><td valign=\"top\" width=\"330\">";
                        echo "<img src=\"{$row['doc']['artwork']}\" alt=\"my image \" width=\"250\" /><br /><br />";
                        echo "<div class=\"albuminfo\" id=\"albuminfo\">";
                    print ' <a href=http://ggcc.tv/archivealbum.php?download=' . urlencode($row[doc]['album']) . ' id=DownloadAlbum><img src="http://ggcc.tv/musiclibrary/wp-content/plugins/zina/zina/themes/zinaEmbed/icons/download.gif" width="35">Download entire album.</a><p>';
                        echo "<font color=\"#fff\">Album: {$row[doc]['album']}</font><br />";
                        echo "<font color=\"#fff\">Church: {$row[doc]['church']}</font><br />";
                        echo "<font color=\"#fff\">Description: {$row[doc]['des']}</font><P><br /><P>";
                        echo "<a href=\"https://twitter.com/share\" class=\"twitter-share-button\" data-lang=\"en\">Tweet</a><br><br>";
                        print '<div id="like-button"></div>';
                        echo "<td valign=\"top\">";
                        echo "<div class=\"playlist\" id=\"playlist\">";
                        echo "<ol>";
                        $songCount = 0;
                        foreach ($row['doc']['tracks'] as $song) {
                            ++$songCount;

                            $songUrl = $row['doc']['baseurl'] . urldecode($song['url']);
                            echo "<li><a href=\"#\" data-src=\"{$songUrl}\">{$song['name']}</a><div id=\"download\"><a href=\"{$songUrl}\">Download</a></li>";
                        }
                        echo "</ol>";
                        echo "<br><div id=\"player\"><audio preload></audio></div>";
                        echo "</div>";
                        echo "<P>";
                        echo "<small>To download a single MP3 at a time:</br><b>Windows OS:</b> hold the ALT button on the keyboard and click the Download button<br><b>Mac OSX:</b> hold the OPTION button on the keyboard and click the Download button<P><BR><b>Controls:</b><br>Play/Pause = spacebar</br>Next track = Right arrow<br>Previous track = Left arrow";
                        echo '</tr></td></table>';
    }

            }

    exit;
?>
<!----NOTTING SHOWING UP---->
  <!-- begin htmlcommentbox.com -->
 <div id="HCB_comment_box"><a href="http://www.htmlcommentbox.com">HTML Comment Box</a> is loading comments...</div>
 <script type="text/javascript" language="javascript" id="hcb"> /*<!--*/ if(!window.hcb_user){hcb_user={};} (function(){s=document.createElement("script");s.setAttribute("type","text/javascript");s.setAttribute("src", "http://www.htmlcommentbox.com/jread?page="+escape((window.hcb_user && hcb_user.PAGE)||(""+window.location)).replace("+","%2B")+"&opts=0&num=10");if (typeof s!="undefined") document.getElementsByTagName("head")[0].appendChild(s);})(); /*-->*/ </script>
<!-- end htmlcommentbox.com --> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T10:47:58.697

因为您正在使用`exit`，它会终止脚本。摆脱它，它将继续在下面输出 HTML。

[http://php.net/manual/en/function.exit.php](http://php.net/manual/en/function.exit.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:48:05.883

省略出口。

退出将结束 PHP 处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T10:48:21.060

随着 php exit 解析器停止，并将收集到的所有内容交还给 Web 服务器。只需删除退出；排。

# asp.net - .NET 应用程序的构建选项

> ID：14671648
> 
> 赞同：0
> 
> 时间：2013-02-03T10:47:32.607
> 
> 标签：asp.net, vb.net, build

我不时听到开发人员在这里谈论构建脚本。

我开发了一个三层应用程序，它在表示层中有几个客户端。当我想执行更新时，我遵循以下几个步骤：

```
1) Publish the asp.net app to two servers
2) Copy the DLLs of the windows forms app to the relevant server
etc 
```

现在应用越来越大；我希望自动化这些步骤。这就是我认为人们所说的“构建脚本”的意思。我查看了以下网页：http: [//msdn.microsoft.com/en-us/library/vstudio/7xctbe2f%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/7xctbe2f%28v=vs.90%29.aspx)。我假设“构建脚本”仅表示“构建事件”对话框（在 Visual Studio 中）中的 .bat 文件，还是有更复杂的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:52:33.147

我认为在 powershell 比简单的 bat 强大得多之后，通常在 powershell 中您可以检查先决条件，然后相应地对链接方法做出相应的反应。打包是通过使用可能有 bat 文件的 Visual Studio intaller 项目执行的，但其他部署可能需要系统管理员运行 pre 和 post PowerShell 脚本

# javascript - 修改动态创建的 (jQuery) 元素

> ID：14671652
> 
> 赞同：-1
> 
> 时间：2013-02-03T10:48:00.243
> 
> 标签：javascript, jquery, html, css, onclick

我有这个`<li>`，当你点击它时，它会`<li>`在它之前创建另一个（应用了一堆类），这一切都很好。问题是，我无法修改（通过 jQuery）新创建的`<li>`元素，因为它们是动态创建的。

目前，它设置为：

```
 $(".foo").on("click", function() {
//Blah blah blah
}); 
```

而且我已经尝试了下面的代码，但仍然无法正常工作。

```
$(".foo").on("click", function() {
//Blah blah blah
}); 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:59:15.873

由于 li 是为 jQuery v1.7 动态创建的，因此现在和将来都会为匹配当前选择器的所有元素附加一个事件处理程序。

```
$(document).on("click", ".foo", function() {
    //Blah blah blah
}); 
```

本质上，如果您使用的是 1.7 及更高版本，则[on](http://api.jquery.com/on/)的语法略有不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:50:00.280

**jQuery 1.7+**

我认为它应该与以下[`on()`](http://api.jquery.com/on/)功能一起使用：

```
$(".foo").on('click', function() {
    // more code
}); 
```

**其他**

```
$(".foo").live('click', function(){
    // more code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:51:56.023

将事件绑定到已经存在的父元素：

```
$('#parent').on('click', '.foo', function() {
    ...
}); 
```

`'#parent'`可能是您`<ul>`元素的选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T11:32:17.577

试试这个方法：

```
 $("ul").on('mouseup', '.item', function() {
    $(this).toggleClass("completed");
  }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eyfHM/3/)。

您遇到的问题是元素在事件绑定到它们`.item`的点不存在于 DOM 中。`mouseup`这种方法将 绑定`mouseup`到*确实*存在的 ，并使用该`ul`方法来侦听该事件，如果目标元素与传递给该方法的选择器 ( ) 匹配，则它实现匿名函数（传递给该方法的第三个参数）。*`on()``.item`*

 *如果目标与该选择器*不*匹配，则事件要么什么都不做，要么继续通过祖先传播。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T11:35:05.937

这对你有用吗？：

```
$(function() {

  var task =
    $('<li class="editable todo-item">Double Click to Edit</li>');

  $(document).on('click', '.todo-new', function() {
    $('.todo-new').before(task);
  });

  $(document).on('dblclick', '.todo-item', function() {
    $(this).toggleClass("todo-completed");
  });

}); 
```*

# autoconf - autoconf 宏在哪里定义？

> ID：14671653
> 
> 赞同：0
> 
> 时间：2013-02-03T10:48:04.240
> 
> 标签：autoconf

标准的，如 AC_PROG_AWK。我查看了文档，但找不到它们。

任何帮助或链接将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:22:09.433

在 automake/autoconf 方面，我不是专家。然而，一些谷歌搜索发现这似乎包含宏源：[autoconf.git/lib/autoconf](http://git.savannah.gnu.org/gitweb/?p=autoconf.git;a=tree;f=lib/autoconf;h=8778222c6858bde178598d2b10ba4a4a5c3b8109;hb=HEAD)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:26:55.027

Automake 宏以`AM_`. 您示例中的`AC_`前缀表示 Autoconf。因此，您应该查看[Autoconf 手册](http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T16:45:31.407

大多数 autoconf 宏都存储在`$prefix/share/autoconf`（其中 prefix 是用于安装 autoconf 的前缀）。特别是，`AC_PROG_AWK`可以在以下位置找到定义：

```
$(dirname $( which autoconf ))/../share/autoconf/autoconf/programs.m4 
```

（这对 autoconf 2.65 有效，并且可能适用于它之前的许多版本。）

# c - 如何测量串行接收字节速度。例如每秒字节数。

> ID：14671657
> 
> 赞同：1
> 
> 时间：2013-02-03T10:48:20.973
> 
> 标签：c

我正在通过串行以 115200 的波特率逐字节接收。如何计算 ac 程序中接收的每秒字节数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:54:32.680

只有 3 种方法可以测量每秒实际接收的字节数。

第一种方法是跟踪您在固定时间长度内收到的字节数。例如，每次你收到字节时你可能会做`counter += number_of_bytes`，然后每 5 秒你可能会做`rate = counter/5; counter = 0;`。

第二种方法是跟踪接收固定数量的字节所经过的时间。例如，每次您收到一个字节时，您可能会执行`temp = now(); rate = 1/(temp - previous); previous = temp;`.

第三种方式是结合以上两种方式。例如，每次您收到字节时，您可能会这样做`temp = now(); rate = number_of_bytes/(temp - previous); previous = temp;`。

对于上述所有情况，您最终得到的是单个样本，而不是平均值。要将样本转换为平均值，您需要执行类似`average = sum_of_samples / number_of_samples`. 最好的方法（例如，如果你想要漂亮/平滑的图表）是存储大量样本；您将用新样本替换最旧的样本并重新计算平均值。

例如：

```
double sampleData[1024];
int nextSlot = 0;
double average;

addSample(double value) {
   double sum = 0;

   sampleData[nextSlot] = value;
   nextSlot++;
   if(nextSlot >= 1024) nextSlot = 0;

   for(int i = 0; i < 1024; i++) sum += sampleData[1024];
   average = sum/1024;
} 
```

当然，最后一件事（使用 3 种方法中的一种收集样本，然后找到平均值）需要一些摆弄才能获得您想要的分辨率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:55:14.917

假设您有一些相当连续的输入，只需计算您收到的字节数，并在收到一些字符后，打印出该时间的时间和字符数。您将需要一个相当好的时间戳 - clock() 可能是一个合理的来源，但这取决于您使用的系统是什么“最佳”选项 - 以及您想要它的便携性，但串行通信往往不会无论如何都要非常便携，否则你的错误可能会很大。每次打印时，重置计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-19T08:22:34.303

要更正此线程中有关理论最大值的一些奇怪评论：

大约在 14400 波特调制解调器进入前网络世界的时候，波特的度量从波特（wiki it）变为匹配新兴的数字技术，如 ISDN 64kbit。那时，波特变成了比特/秒的意思。

作为 8N1 格式的串行数据，一种常见的速记符号，有 8 位，没有奇偶校验位，每个字节有一个停止位。没有起始位。

因此，8N1 串行的理论最大值超过 115200 波特（位/秒）= 115200/（8+1）= 12800 字节/秒。

与查看下载速度类似（但不一样），在不使用计算器的情况下，从比特/秒计算出字节/秒的粗略方法是除以 10。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T10:57:29.243

波特率是衡量信号每秒能够改变多少次的量度。在其中一个周期中，根据您使用的调制，您可以发送一个或多个比特（如果您不使用调制 - 比特率与波特率相同）。

假设您正在使用[QPSK](http://en.wikipedia.org/wiki/Phase-shift_keying#Quadrature_phase-shift_keying_.28QPSK.29)调制，因此您可以每波特发送/接收 2 位。因此，如果您以 115200 波特率、每个符号 2 位接收数据，则您正在以 115200 * 2 = 230400bps 接收数据。

# android - 在android的编辑文本字段中显示一个整数

> ID：14671661
> 
> 赞同：0
> 
> 时间：2013-02-03T10:48:42.167
> 
> 标签：android

我正在尝试执行以下操作：

t1 是编辑文本 a 和 b 是两个整数

```
t1.setText(a+b); 
```

但这在android中不起作用，但它与javaswing完美配合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:50:38.123

一个简单的解决方案是：

```
t1.setText("" + (a+b)); 
```

或者可能：

```
t1.setText((a+b).ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:06:10.790

> 但这在 android 中不起作用，但在 javaswing 中完全有效

它不会，因为您实际上是在调用`setText(int resId)`. 见[这里](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)。调用此方法将在 xml 资源（例如 strings.xml）中搜索字符串。`@strings/hello`字符串（例如）的每个 id将与 进行比较`resId`，如果`resId`与字符串的 id 匹配，则该字符串将显示给该小部件，否则您将获得`ResourceNotFoundException`

要显示实际整数，首先将其转换为`String`

`t1.setText(String.valueOf(a+b))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:50:52.437

您正在这样做，`t1.setText(a+b);`它在资源文件中搜索此 id (a+b)，就像`strings.xml`不可用一样。所以它会抛出一个异常`ResourceNotFoundException`..

```
So to set the number in text view you need to convert it into string. 
```

在Android中，您需要这样做：-

```
int sum = a + b;
String sumString = String.valueOf(sum);
t1.setText(sumString); 
```

**或者**

```
t1.setText((a+b) + ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T10:57:26.957

请像下面这样

```
 EditText et=(EditText)findViewById("ID of your EDITTEXT");
   int c=a+b;
   String s=c.toString();
   et.setText(s); 
```

这会很好用:) 如果它有效，请投票给我 :)

# java - 更新 JLabel 图标与背景混淆

> ID：14671669
> 
> 赞同：2
> 
> 时间：2013-02-03T10:49:54.630
> 
> 标签：java, image, swing, background, jpanel

我已将容器 JPanel 的背景颜色设置为部分透明。我有一个带有透明背景的 PNG 图像的 JLabel。我还有另一个图像，当鼠标悬停在标签上时会显示。我使用以下内容更改图标

```
private void settingsMouseEntered(java.awt.event.MouseEvent evt) {
    this.settings.setIcon(new ImageIcon(getClass().getResource("/Resources/settingsIconHover.png")));
}

private void settingsMouseExited(java.awt.event.MouseEvent evt) {
    this.settings.setIcon(new ImageIcon(getClass().getResource("/Resources/settingsIcon.png")));
} 
```

每次更新图标时，它都会稍微改变不透明度。最终背景不再透明。

我已经使用以下代码设置了 JPanel 的背景

```
content.setBackground(new Color(74, 137, 227, 60)); 
```

JPanel 位于具有特定背景的 JFrame 中

```
setBackground(new Color(74, 137, 227, 80)); 
```

这是一张图片

![在此处输入图像描述](../Images/48dc736e85a971666982bddbb169a775.png)

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:30:43.437

有关可能发生的情况和一种潜在解决方案的说明，请参阅[具有透明度的背景。](http://tips4java.wordpress.com/2009/05/31/backgrounds-with-transparency/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:05:55.067

> 每次更新图标时都会稍微改变[半透明]......有什么问题？

平台具体实现的默认复合模式[`Graphics2D`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html)是[`AlphaComposite.SRC_OVER`](http://docs.oracle.com/javase/7/docs/api/java/awt/AlphaComposite.html#SRC_OVER)，可能会产生你描述的效果。一个类似的问题，由于重复调用，[在这里](https://stackoverflow.com/q/14431339/230513)`repaint()`检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T21:45:42.377

当您将 alpha 颜色应用于这样的组件时

```
content.setBackground(new Color(74, 137, 227, 60)); 
```

和

```
setBackground(new Color(74, 137, 227, 80)); 
```

您没有影响组件的 opacity 属性。这意味着重绘管理器不知道它需要重绘它下面的内容（因为就其而言，它们是不透明的）。

尝试将面板也设置为透明，并`JComponent#setOpaque`传递一个 false 值。

然后阅读 camickr 提供的链接

# php - Symfony 表单集合

> ID：14671676
> 
> 赞同：7
> 
> 时间：2013-02-03T10:50:48.053
> 
> 标签：php, symfony, doctrine, entity, symfony-2.1

我正在尝试在其他表单类型中添加 formType。

客户类型：

```
class CustomerType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('firstname', 'text', array(
                    'required' => 'required'
                ))
                ->add('middlename')
                ->add('lastname')
                ->add('email', 'email')
                ->add('groups', 'entity', array(
                    'class' => 'MV\CMSBundle\Entity\Group',
                    'property' => 'name',
                    'query_builder' => function(EntityRepository $er) {
                        return $er->createQueryBuilder('g')
                                  ->orderBy('g.name', 'ASC');
                    }
                ))
                ->add('profile', 'collection', array(
                    'type' => new ProfileType()
                ));
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'MV\CMSBundle\Entity\User',
        ));
    }

    public function getName()
    {
        return 'customer';
    }
} 
```

简介类型：

```
class ProfileType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('isActive', 'checkbox', array(
                    'required' => false
                ))
                ->add('phone')
                ->add('address')
                ->add('city')
                ->add('zipcode')
                ->add('country')
                ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'MV\NameBundle\Entity\Profile',
        ));
    }

    public function getName()
    {
        return 'profile';
    }
} 
```

然后我收到这条消息：

```
Expected argument of type "array or (\Traversable and \ArrayAccess)", "MV\NameBundle\Entity\Profile" given. 
```

如果我评论该行，我会得到：（只是为了检查会出现什么问题；））

```
The form's view data is expected to be of type scalar, array or an instance of \ArrayAccess, but is an instance of class MV\NameBundle\Entity\Profile. You can avoid this error by setting the "data_class" option to "MV\NameBundle\Entity\Profile" or by adding a view transformer that transforms an instance of class MV\NameBundle\Entity\Profile to scalar, array or an instance of \ArrayAccess. 
```

我做错了什么？

Symfony2：2.1.8-DEV

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T15:39:58.837

目前尚不清楚您的`Customer`实体和`Profile`实体之间的映射是什么，但我想有两个选项：

* * *

**选项 1：**您有 OneToOne 关系（一个客户只能有一个配置文件）。因此，您根本不需要集合，只需要[嵌入一个对象](http://symfony.com/doc/current/book/forms.html#embedding-a-single-object)即可。

```
->add('profile', new ProfileType()); 
```

* * *

**选项 2：**您需要多对一关系（一个客户可以有多个配置文件）。在这种情况下，您需要使用[嵌入表单集合](http://symfony.com/doc/current/book/forms.html#embedding-a-collection-of-forms)。如果这是您想要的，请在您的客户实体中重命名`$profile`为`$profiles`，然后执行以下操作：

```
 //MV\CMSBundle\Entity\Customer  
   use Doctrine\Common\Collections\ArrayCollection;
   /**
   * Your mapping here. 
   * 
   * @ORM\ManyToOne(targetEntity="MV\NameBundle\Entity\Profile")
   */
   protected $profiles;

    public function __construct()
    {
         //This is why you had an error, this is missing from your entity
         //An object was sent instead of a collection.
         $this->profiles = new ArrayCollection();
    } 
```

最后，更新您的数据库。

# java - DateFormat Android - 正确吗？

> ID：14671680
> 
> 赞同：2
> 
> 时间：2013-02-03T10:51:18.043
> 
> 标签：java, android, date, string-formatting

我想知道如何在 Android 中正确显示日期。我的意思是日期格式，它适合下载应用程序的特定区域。我正在做的 atm 是：

```
DateFormat formatter = DateFormat.getDateTimeInstance();
String[] dateParts = date.split(DATE_DELIMITER);
Date temp = new Date(Integer.valueOf(dateParts[4])-1900, Integer.valueOf(dateParts[3]),
            Integer.valueOf(dateParts[2]), Integer.valueOf(dateParts[0]),
            Integer.valueOf(dateParts[1]));
return formatter.format(temp); 
```

所以......这有以下问题：Java.util.Date 被标记为已弃用，它也显示我几秒钟，虽然我不希望那样。

有什么“美丽”的解决方案吗？如果你能告诉我，我会很高兴:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T10:54:09.600

**编辑**

要为当前区域设置格式化日期，请使用静态工厂方法之一：

```
String formattedString = DateFormat.getDateInstance().format(yourDate); 
```

这将根据设备当前区域设置进行格式化，即在 android 设置中配置的区域。

[更多信息](http://developer.android.com/reference/java/text/DateFormat.html)

* * *

一个解决方案是使用[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

```
public static vod FormatDate(Date yourDate) {

    SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");

    return sdf.format( yourDate ));

} 
```

相关：[Android SimpleDateFormat，如何使用？](https://stackoverflow.com/questions/9277747/android-simpledateformat-how-to-use-it)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:18:05.167

**使用设备当前区域设置的 Android DateFormat**

在 android 中，您可以通过执行以下操作在格式化日期对象时使用设备的语言环境：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss", Locale.getDefault())
String formatedText = sdf.format(new Date()); 
```

**编辑**

要使用准确的系统日期格式，请使用：

```
 DateFormat.getDateFormat(mContext).format(new Date()); 
```

# facebook-android-sdk - 导入 FacebookSDK 时出错

> ID：14671688
> 
> 赞同：2
> 
> 时间：2013-02-03T10:52:05.657
> 
> 标签：facebook-android-sdk, android-support-library

我下载了 Facebook API 3.0 并将其导入 Eclipse (Helion)。我创建了我的应用程序的新项目（称为 HAN Communication），并尝试将其添加为库 FacebookSDK。但在此之后我看到了这个错误：

```
[2013-02-03 11:28:06 - HANCommunication] Found 2 versions of android-support-v4.jar in the dependency list,
[2013-02-03 11:28:06 - HANCommunication] but not all the versions are identical (check is based on SHA-1 only at this time).
[2013-02-03 11:28:06 - HANCommunication] All versions of the libraries must be the same at this time.
[2013-02-03 11:28:06 - HANCommunication] Versions found are:
[2013-02-03 11:28:06 - HANCommunication] Path: D:\facebook-android-sdk-3.0\facebook-android-sdk-3.0\facebook\libs\android-support-v4.jar
[2013-02-03 11:28:06 - HANCommunication]    Length: 349252
[2013-02-03 11:28:06 - HANCommunication]    SHA-1: 612846c9857077a039b533718f72db3bc041d389
[2013-02-03 11:28:06 - HANCommunication] Path: D:\workspace\space\HANCommunication\libs\android-support-v4.jar
[2013-02-03 11:28:06 - HANCommunication]    Length: 385685
[2013-02-03 11:28:06 - HANCommunication]    SHA-1: 48c94ae70fa65718b382098237806a5909bb096e
[2013-02-03 11:28:06 - HANCommunication] Jar mismatch! Fix your dependencies
[2013-02-03 11:29:17 - HANCommunication] Found 2 versions of android-support-v4.jar in the dependency list,
[2013-02-03 11:29:17 - HANCommunication] but not all the versions are identical (check is based on SHA-1 only at this time).
[2013-02-03 11:29:17 - HANCommunication] All versions of the libraries must be the same at this time.
[2013-02-03 11:29:17 - HANCommunication] Versions found are:
[2013-02-03 11:29:17 - HANCommunication] Path: D:\facebook-android-sdk-3.0\facebook-android-sdk-3.0\facebook\libs\android-support-v4.jar
[2013-02-03 11:29:17 - HANCommunication]    Length: 349252
[2013-02-03 11:29:17 - HANCommunication]    SHA-1: 612846c9857077a039b533718f72db3bc041d389
[2013-02-03 11:29:17 - HANCommunication] Path: D:\workspace\space\HANCommunication\libs\android-support-v4.jar
[2013-02-03 11:29:17 - HANCommunication]    Length: 385685
[2013-02-03 11:29:17 - HANCommunication]    SHA-1: 48c94ae70fa65718b382098237806a5909bb096e
[2013-02-03 11:29:17 - HANCommunication] Jar mismatch! Fix your dependencies
[2013-02-03 11:34:45 - HANCommunication] Found 2 versions of android-support-v4.jar in the dependency list,
[2013-02-03 11:34:45 - HANCommunication] but not all the versions are identical (check is based on SHA-1 only at this time).
[2013-02-03 11:34:45 - HANCommunication] All versions of the libraries must be the same at this time.
[2013-02-03 11:34:45 - HANCommunication] Versions found are:
[2013-02-03 11:34:45 - HANCommunication] Path: D:\facebook-android-sdk-3.0\facebook-android-sdk-3.0\facebook\libs\android-support-v4.jar
[2013-02-03 11:34:45 - HANCommunication]    Length: 349252
[2013-02-03 11:34:45 - HANCommunication]    SHA-1: 612846c9857077a039b533718f72db3bc041d389
[2013-02-03 11:34:45 - HANCommunication] Path: D:\workspace\space\HANCommunication\libs\android-support-v4.jar
[2013-02-03 11:34:45 - HANCommunication]    Length: 385685
[2013-02-03 11:34:45 - HANCommunication]    SHA-1: 48c94ae70fa65718b382098237806a5909bb096e
[2013-02-03 11:34:45 - HANCommunication] Jar mismatch! Fix your dependencies 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.radzik.hancommunication"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.radzik.hancommunication.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我试图更改目标 API 版本，但这对我没有帮助。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:13:24.333

检查应用程序项目文件夹中的 libs 目录。如果那里有 android-support-v4.jar，这就是错误的原因。Facebook SDK 已经包含了这个 jar 的一个版本，显然它们不匹配。我通过从我的应用程序项目中删除 jar 解决了这个问题。

我怀疑不匹配的原因是自从开发 SDK 以来，android SDK jar 已经更新。

# c# - ASP.NET Encoding Syntax(<%#: %>) 给我错误？

> ID：14671697
> 
> 赞同：1
> 
> 时间：2013-02-03T10:53:17.137
> 
> 标签：c#, asp.net

我想使用 ASP.NET 编码功能。如果我有

```
<h3><%#: Eval("Header")%></h3> 
```

然后它给了我这个错误，

> System.Web.HttpException：DataBinding：“System.Char”不包含名为“Header”的属性。

为什么它给我这个错误？注意，`<%# Eval("Header")%>`有效，但这不起作用`<%#: Eval("Header")%>`（注意冒号:)

我能够解决这个问题，其实我`DataSource="<%#: Product.relatedProduct %>"`以前 有`<%# Eval("Header")%>`。当我从中删除冒号时`DataSource="<%#: Product.relatedProduct %>"`，一切正常。奇怪的是为什么 ASP.NET 显示错误`<%# Eval("Header")%>`而不是`DataSource="<%#: Product.relatedProduct %>"`

在本地定位 4.0 时，<%#: 有效，但在服务器中显示编译时错误。

# css - 在css中将文本添加到占位符

> ID：14671707
> 
> 赞同：0
> 
> 时间：2013-02-03T10:54:53.597
> 
> 标签：css, placeholder

```
<input type='text' /> 
```

我需要在 css 中添加占位符文本，如下所示：

```
input:placeholder{content: 'placeholder text';} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T21:06:03.707

您不能为所有浏览器使用 CSS 设置占位符。目前唯一支持它的浏览器是 webkit。

看看这个问题：[如何使用 CSS 设置占位符值？](https://stackoverflow.com/questions/8075986/how-to-set-placeholder-value-using-css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T20:10:21.813

你不能用 css 做到这一点。但是，您可以使用 jQuery 完成此操作，如下面的演示所示。

```
$(document).ready(function() {
    placeholders();
    function placeholders() {
        var count = 0;
        $('input[type=text]').each(function() {
            count++;
			$(this).attr('placeholder', 'value ' + count);
        });
    }

    $(document).on('click', '.delete', function() {
    	$(this).closest('div').remove();
        placeholders();
    });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div>
    <input type="text"/><button class="delete">DELETE</button>
</div>
<div>
    <input type="text"/><button class="delete">DELETE</button>
</div>
<div>
    <input type="text"/><button class="delete">DELETE</button>
</div>
<div>
    <input type="text"/><button class="delete">DELETE</button>
</div>
```

# python - 无法在 python 中将共享库输出重定向到 /dev/null

> ID：14671708
> 
> 赞同：1
> 
> 时间：2013-02-03T10:55:00.980
> 
> 标签：python, linux, stdout, stderr

我正在尝试将由共享库创建的对象的构造函数的输出重定向到 /dev/null。施工的副作用是打印了很多我不需要的垃圾。代码如下：

```
f = open("/dev/null", 'w')
tmpErr = sys.stderr
tmpOut = sys.stdout
sys.stderr = f
sys.stdout = f
foo = Foo(param1, param2)
sys.stderr = tmpErr
sys.stdout = tmpOut
f.close() 
```

如果我用简单的打印（例如打印“hello”）或对本地函数的调用替换函数调用，则重定向似乎有效。此外，使用 shell (tcsh) 中的“>&”运算符，我成功地重定向了所有输出。

我在这里想念什么？

# html - 列表中的 CSS 与 up-down

> ID：14671709
> 
> 赞同：-3
> 
> 时间：2013-02-03T10:55:03.893
> 
> 标签：html, css

我想用 CSS 做一个列表。像图中的东西：

![在此处输入图像描述](../Images/fa46deba319a85d3f2850f979d0b0616.png)

我该如何继续……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:01:47.640

`box-shadow`您可以使用稍暗的背景颜色来模仿这种效果：

```
div {
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
    background: rgb(250, 250, 250);
} 
```

**演示：http: [//jsfiddle.net/cWX94/](http://jsfiddle.net/cWX94/)**

**还有一个[http://jsfiddle.net/cWX94/1/](http://jsfiddle.net/cWX94/1/)**

# vb.net - 所有文本框上的自动 SelectAll 和 gotfocus 上的 numericUpDown 控件

> ID：14671713
> 
> 赞同：0
> 
> 时间：2013-02-03T10:55:23.487
> 
> 标签：vb.net, winforms, textbox

我有这样的代码可以在 got_focus 上选择文本框中的所有文本：

```
Private Sub myText_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles myText.GotFocus
    myText.SelectAll()
End Sub 
```

在 VB.NET 中是否有一种方法可以让所有 TextBoxes 和 NumericUpDown 控件在 _GotFocus 或 _Enter 上选择他的文本，而无需为每个控件显式设置此类行为，无论该控件如何获得焦点（键盘、鼠标或编程）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:15:54.563

公共类 MyTextBox 继承 System.Windows.Forms.TextBox Private _focused 作为布尔值

```
Protected Overrides Sub OnEnter(e As EventArgs)
    MyBase.OnEnter(e)
    If MouseButtons = MouseButtons.None Then
        SelectAll()
        _focused = True
    End If
End Sub

Protected Overrides Sub OnLeave(e As EventArgs)
    MyBase.OnLeave(e)
    _focused = False
End Sub

Protected Overrides Sub OnMouseUp(mevent As MouseEventArgs)
    MyBase.OnMouseUp(mevent)
    If Not _focused Then
        If SelectionLength = 0 Then
            SelectAll()
        End If
        _focused = True
    End If
End Sub 
```

结束类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:53:30.503

是的，有而且很简单。

```
 Private Sub TextBox2_GotFocus(sender As Object, e As System.EventArgs) Handles TextBox2.GotFocus
        TextBox2.Select(0, TextBox2.Text.Length)
    End Sub 
```

# javascript - 用于多属性查找的 eval 替代方案

> ID：14671715
> 
> 赞同：0
> 
> 时间：2013-02-03T10:55:44.143
> 
> 标签：javascript, eval

我有一个函数，它接受一个像这样的字符串`"obj.key.subkey.subsubkey"`：

```
function(obj, key) {
  return eval('obj.'+ key);
} 
```

`eval`在这种情况下，什么是安全的替代方案或`eval`很好？`new Function`在这种情况下将无法正常工作 AFAIK。也许`split`然后循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:57:32.363

我不确定您是否真的需要这里的功能。如果您有对象和键，只需使用键返回对象的属性。

```
obj[key] 
```

如果您必须处理多个键：

```
function get(obj, key) {
  var keys = key.split(".");
  var tmp = obj;
  for (var x = 0; x < keys.length; x++){
     tmp = tmp[keys[x]];
  }
  return tmp;
} 
```

工作示例：http: [//jsfiddle.net/H55ka/](http://jsfiddle.net/H55ka/)

# javascript - 当我在内部调用函数时，来自 Math.random 的值会导致问题

> ID：14671720
> 
> 赞同：2
> 
> 时间：2013-02-03T10:56:14.547
> 
> 标签：javascript, jquery

这个脚本给我带来了问题。我已经重写了好几次，但我错过了一些东西。

“问题”数组指的是我的对象。这些对象是不同的问题，“a”始终是正确答案。

到目前为止，该脚本工作正常。这个想法是从 0 增加“n”以滚动浏览我的数组，并在单击正确答案时提供下一个问题。'x' 总是正确的答案（它总是持有 'a'）。

所以我可以在正确猜测时增加'n'；但是，当我再次调用函数“a()”时（在我的警报“hi”部分之后），它会导致问题。我想增加 n，并调用 a() 以便得到下一个问题。然后我想将正确的猜测 (x) 放置在随机位置（即位置 0、1 或 2。）

感谢任何帮助。

```
var questions = [q0,q1,q2,q3,q4,q5,q6,q7];

var n = 0;

function a(){
var y;
var z;

var x = Math.floor((Math.random() * 3))
if(x == 0){y = 1; z = 2}else if(x == 1){y = 0; z = 2}else{y = 0; z = 1}

$("#question_holder").text(questions[n].q);

    $(".answer_holder").eq(x).text(questions[n].a);
    $(".answer_holder").eq(y).text(questions[n].b);
    $(".answer_holder").eq(z).text(questions[n].c);

    $(document).ready(function(){

        $(".answer_holder").eq(x).click(function(){
            alert("hi");
                        n++;
            a();

                     /*this area needs to get the next question by incrementing
                     n, then generate a different value to x, to place it
                     in a different position. which it does. however,
                     in subsequent questions, you can click the wrong answer as if
                     it's correct, ie not 'a' or 'x'.*/
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:13:27.097

您的逻辑在这里有点奇怪..您尝试做的是每次 a() 运行时注册一个新的单击事件。我认为您想为所有元素注册**一次**单击事件`answer_holder`，并在事件处理程序中检查这是哪个元素并相应地处理它

请注意以下事项：

`$(document).ready(function(){`- 这个处理程序中定义的函数应该在你的页面加载后运行。我认为你不想在 a() 中使用它。它通常只在全局范围内使用（在所有函数之外）

`$(".answer_holder").eq(x).click(function(){`- 此事件处理程序根据`x`. 我建议您为 all 注册一个事件处理程序`$(".answer_holder")`，而不依赖于`x`（在全局范围内）。在该事件处理程序中（在函数中），您检查哪个元素触发了事件（使用`$(this)`- 它返回被单击的元素）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:16:51.883

你有 $(document).ready() 在错误的地方。尝试这样的事情（警告：这是完全未经测试的）：

```
function setupQuestion(n) {
    var x,y,z;

    x = Math.floor((Math.random() * 3))
    if(x == 0){y = 1; z = 2}else if(x == 1){y = 0; z = 2}else{y = 0; z = 1}

    $("#question_holder").text(questions[n].q);

    $(".answer_holder").eq(x).text(questions[n].a).data('answer', 'a');
    $(".answer_holder").eq(y).text(questions[n].b).data('answer', 'b');
    $(".answer_holder").eq(z).text(questions[n].c).data('answer', 'c');
}

$(document).ready(function() {
    var n = 0;
    $('.answer_holder').click(function() {
        if ($(this).data('answer') === 'a') { // Or whatever is the correct answer
            n++;
            if (n < questions.length) {
                setupQuestion(n);
            } else {
                // Do something else, the test is finished
            }
        }
        return false;
    });
    setupQuestion(n);
}); 
```

请注意，我不是在比较`text()`函数，而是比较`data()`函数。这是因为显示给用户的文本可能会以某种方式进行修饰，从而使比较变得困难。简单地使用答案索引“a”“b”或“c”会更清楚。

# sql - SQL在第一次出现字符时选择列作为子字符串？

> ID：14671722
> 
> 赞同：1
> 
> 时间：2013-02-03T10:56:41.777
> 
> 标签：sql, postgresql, plpgsql

我正在使用 Postgresql，我需要`SELECT DISTINCT`在单个字符串列上运行一个查询。但是我不想按原样选择列，我需要在第一次出现此字符串' ('.

我不知道如何做这个子字符串部分..

这是一个没有子字符串部分的查询示例：

```
SELECT DISTINCT ON (Table.Column1) Table.Column2 
FROM Table 
ORDER BY Table.Column1 
```

我不确定在 postgres 中使用什么函数，或者我可能需要使用 plpgsql 来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:06:18.530

我设法解决了这个问题。要使用的函数是 SPLIT_PART。它采用三个参数 ColumnName、Characters 和子字符串出现次数。

这是我如何使用它的示例。

```
SELECT DISTINCT ON (SPLIT_PART(Table.Column1, ' )', 1)) Table.Column2 
FROM Table 
ORDER BY SPLIT_PART(Table.Column1, ' )', 1) 
```

# mysql - 来自 Solr 数据导入处理程序的 MySQL 插入

> ID：14671728
> 
> 赞同：1
> 
> 时间：2013-02-03T10:58:15.020
> 
> 标签：mysql, solr, apache-tika

我正在使用文件系统中的 apache solr 和 tika 索引 pdf 和其他文本文档。我还`SignatureUpdateProcessorFactory`用于为索引文件生成唯一 ID。

由于我有很多文件，我想将一些信息（例如 id 和文件名）从 dataimport 保存到 MySQL 以供以后使用。

是否可以使用一些文件实体参数从 solr dataimport 处理程序执行 mysql insert 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:29:04.483

您不能从 DIH 本身插入 SQL。如果需要，您可以编写一个自定义 Transformer 来执行此操作，并确保它是实体转换器链上的最后一个。

但是，如果您想捕获使用 UpdateProcessor 生成的 ID，则可能需要编写自定义更新处理器，因为转换器在 UpdateProcessor 之前运行。

# css - Bootstrap css 内容不展开/滚动

> ID：14671729
> 
> 赞同：0
> 
> 时间：2013-02-03T10:58:20.260
> 
> 标签：css, twitter-bootstrap

我在引导程序中创建了一个表单，但是随着内容扩展到屏幕之外，屏幕不显示滚动控件，所以我看不到或到达额外的内容？！

我试过设置溢出但是好像没有额外的内容？

观看现场演示：http: [//jsfiddle.net/8hYVq/](http://jsfiddle.net/8hYVq/)

```
<html>
 <head>
  <title>Majstorce</title>

  <link rel="stylesheet" href="/static/bootstrap.css" type="text/css" media="screen" charset="utf-8">

        <script type="text/javascript" src="/admin/jsi18n/"></script>
        <script type="text/javascript" src="/static/admin/js/core.js"></script>

        <script type="text/javascript" src="/static/admin/js/jquery.js"></script>
        <script type="text/javascript" src="/static/admin/js/jquery.init.js"></script>
        <script type="text/javascript" src="/static/admin/js/admin/RelatedObjectLookups.js"></script>
        <script type="text/javascript">
            window.__admin_media_prefix__ = "/static/admin/";
        </script>

        <script type="text/javascript" src="/static/admin/js/chosen/chosen.jquery.min.js"></script>

  <script type="text/javascript" src="/static/admin/js/calendar.js"></script>
<script type="text/javascript" src="/static/admin/js/admin/DateTimeShortcuts.js"></script>

 </head>
<body>
<div class="navbar navbar-fixed-top">
 <div class="navbar-inner">
  <div class="container">
  <h1>My test page...</h1>

    <ul class="nav">
     <li><a href="#">Link 1</a></li>
     <li><a href="#">Link 2</a></li>
     <li><a href="#">Link 3</a></li>
     <li><a href="#">Link 4</a></li>
     <li><a href="#">Link 5</a></li>

    </ul>
   </div>
 </div>
 <div class="container">

<h3>My form</h3>
<div class="row">
  <div class="span8">
    <form action="" method="POST">

            <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='7ea0a3a7726d12e63e4fee21a7d53f21' /></div>
            <p><label for="Title">Title:</label> <input id="title" type="text" name="title" maxlength="255" /></p>
<p><label for="Category">Category:</label> <select name="Category" id="Category">
<option value="" selected="selected">---------</option>
<option value="1">Cars</option>
<option value="2">Food</option>
</select></p>
<p><label for="Description">Description:</label> <input id="Description" type="text" name="Description" maxlength="255" /></p>

<p><label for="user">User:</label> <select name="user" id="user">
<option value="" selected="selected">---------</option>
<option value="1">CustomUser object</option>
</select></p>
<p><label for="id_grad">Location:</label> <select name="Location" id="Location">
<option value="" selected="selected">---------</option>
<option value="1">New York</option>
<option value="2">Washington</option>

</select></p>
<p><label for="From">From:</label> <input id="From" type="text" class="vDateField" name="From" size="10" /></p>
<p><label for="To">To:</label> <input id="To" type="text" class="vDateField" name="To" size="10" /></p>
                <input type="submit" name="submit" value="Post"/>
    </form>
  </div>
  <div class="span4">asd</div>
  <div class="clear" style="clear:both">&nbsp;</div>

</div>

 </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:11:10.987

正如 Pavlo Mykhalov 鹰眼注意到的那样，容器是导航栏类的一部分，因此出现错误......谢谢 Pavlo！

# java - 编码问题

> ID：14671735
> 
> 赞同：1
> 
> 时间：2013-02-03T10:59:22.707
> 
> 标签：java, encoding, character-encoding

我有一个“windows1255”编码的字符串，有什么安全的方法可以将它转换为“UTF-8”

字符串，反之亦然？

一般来说，是否有一种安全的方式（意味着数据不会被损坏）在

Java中的编码？

```
 str.getBytes("UTF-8");
     new String(str,"UTF-8"); 
```

如果原始字符串未编码为“UTF-8”，数据是否会损坏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:12:01.573

您不能将`String`Java 中的对象正确编码为 UTF-16 以外的任何内容 - 因为这是规范定义的那些对象的唯一编码。当然，您可以做一些不愉快的事情，例如将 1252 个值放入 char[] 并从中创建一个 String，但很快就会出错。

您可以拥有以各种不同方式编码的 byte[]，您可以使用采用 Charset 的构造函数将它们与 String 进行转换，并`getBytes`在代码中使用 as。

因此，您可以使用 String 作为中间体进行转换。我不知道在 JDK 中进行直接转换的任何方式，但在实践中中间可能不会太昂贵。

关于往返转换 - 通常情况下，您可以在编码之间进行转换而不会丢失数据。只有少数编码可以处理所有的 Unicode 字符（例如 UTF 系列、GB18030 等）——而许多传统字符集只编码一小部分。除非您确定输入属于可表示集，否则您无法在不丢失数据的情况下安全地往返这些字符集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:11:21.993

字符串试图成为一个抽象字符序列，从用户的角度来看，它没有任何编码。当然，它必须有一个内部编码，但这是一个实现细节。

将 String 编码为 UTF-8，然后将结果解码为 UTF-8 是没有意义的。这将是无操作的，因为：

```
(new String(str.getBytes("UTF-8"), "UTF-8") ).equals(str) == true; 
```

但是在某些情况下，String 抽象会分崩离析，以上将是“有损”转换。由于内部实现细节，一个字符串可以包含不成对的 UTF-16 代理，这些代理不能用 UTF-8（或任何编码，包括内部 UTF-16 编码^*）表示。所以它们会在编码中丢失，当你解码回来时，你会得到没有无效的未配对代理的原始字符串。

我可以从你的问题中得到的唯一信息是，你有一个将二进制数据解释为 Windows-1255 的字符串结果，它应该在 UTF-8 中解释。要解决此问题，您必须找到此问题的源并明确使用 UTF-8 解码。

但是，如果您仅从误解中得到字符串，那么您实际上无法做任何事情，因为在 Windows-1255 中没有表示太多字节并且不会将其放入字符串中。

如果不是这种情况，您可以通过以下方式完全恢复原始预期消息：

```
new String( str.getBytes("Windows-1255"), "UTF-8"); 
```

^(* 实际上，Java 允许不成对的代理项存在于其字符串中实际上是错误的，因为它不是有效的 UTF-16)

# ruby - 如何让 resque 工作人员在当前工作处于休眠状态时处理其他工作？

> ID：14671748
> 
> 赞同：0
> 
> 时间：2013-02-03T11:00:55.840
> 
> 标签：ruby, background-process, resque, jobs, task-queue

我的每项任务都在短时间内完成，然后睡大约一个小时，然后再次工作，依此类推，直到完成工作。有些工作可能需要大约 10 个小时才能完成，而我对此无能为力。

困扰我的是，当工作正在睡觉时，resque 工人会很忙，所以如果我有 4 个工人和 5 个工作，最后一个工作将不得不等待 10 个小时才能处理，这是非常不理想的，因为它可以在任何其他工作时工作工人正在睡觉。有没有办法让 resque 工作者在当前工作处于休眠状态时处理其他工作？

目前我有一个类似这样的工人：

```
class ImportSongs
  def self.perform(api_token, songs)
    api = API.new api_token

    songs.each_with_index do |song, i|
      # make current worker proceed with another job while it's sleeping
      sleep 60*60  if i != 0 && i % 100 == 0

      api.import_song song
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:33:58.853

看起来您要解决的问题是 API 速率限制与导入过程的批处理。

您应该有一项工作，一旦它被排队枚举所有要导入的歌曲，它就会运行。然后，您可以将它们分解为 100 个组（或您必须限制的任何大小），并使用 resque-scheduler 以一小时的间隔安排延迟作业。

但是，如果您有一个硬性 API 速率限制并且您同时执行其中几个分布式导入，您可能无法控制一次有多少 API 流量。如果您有如此严格的速率限制，您可能希望构建一个专门的流程作为单点控制，以通过它自己的工作队列强制执行速率限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T19:39:30.343

使用[resque-scheduler](https://github.com/bvandenbos/resque-scheduler)，您将能够在预定时间或延迟时间重复离散作业，以替代使用 sleep 语句循环的单个长时间运行的作业。

# ruby - Ruby 控制台：如何在用户输入时防止“获取”添加新行

> ID：14671751
> 
> 赞同：2
> 
> 时间：2013-02-03T11:01:16.160
> 
> 标签：ruby

为什么`gets`用户输入框数时总是添加新行？

我希望下一个打印语句与输入显示在同一行。

```
 print "Enter the number of boxes: "
    boxes = gets.chomp
    print "Enter number of columns to print the boxes in: "
    columns = gets.chomp 
```

我希望输出看起来像这样：

```
Enter the number of boxes: 47 Enter number of columns to print the boxes in: 4 
```

在收到第二个输入之前，我不想开始新的一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:58:30.363

您需要使用 IO/console 并一次建立输入一个字符：

```
require 'io/console'

def cgets(stream=$stdin)
  $stdin.echo = false
  s = ""
  while true do
    c = stream.getc
    return s if c == "\n"
    s << c
  end
end 
```

问题是回显输入；*当字符不是*换行符时将其取出有点问题（至少在本地，而不是在我的常规机器上）。此外，由于您手动获取字符，它删除了正常的 readline 功能，因此行为将取决于系统，例如，Unixy 系统可能会丢失它们的退格等。

就是说，呸；控制台上的 IMO 这是一个意想不到的 UI 模式，将输入保持在两行更明显，也更常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:52:55.243

在 Windows 中，您可以这样做，否则您需要在您的操作系统中使用类似的 read_char 方法

```
def read_char #only on windows
  require "Win32API"
  Win32API.new("crtdll", "_getch", [], "L").Call
end

def get_number
  number, inp = "", 0
  while inp != 13
    inp = read_char
    if "0123456789"[inp.chr]
      number += inp.chr
      print inp.chr  
    end
  end
  number
end

print "Enter the number of boxes: "
boxes = get_number
print " Enter number of columns to print the boxes in: "
columns = get_number
puts ""

puts "boxes: #{boxes}"
puts "columns: #{columns}"

# gives
# Enter the number of boxes: 5 Enter number of columns to print the boxes in: 6
# boxes: 5
# columns: 6 
```

# html - 在网站上使用分数

> ID：14671752
> 
> 赞同：0
> 
> 时间：2013-02-03T11:01:17.957
> 
> 标签：html, ms-word, numbers, number-formatting, fractions

是否可以在网站上使用**任何分数符号**，例如表示为 ¼ 而不是 1/4？

从我收集的信息来看，这些是我唯一可以使用的：

½

⅓⅔</p>

¼ ¾

这是对的吗？为什么会这样？我问这个的原因是因为我已经进行了谷歌网络搜索，但似乎找不到任何其他人......例如。2/4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:07:14.610

您可以测试[http://www.mathjax.org/](http://www.mathjax.org/)如果这是您想要的，它是一个用于制作数学公式的 JavaScript 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:05:58.187

下图显示了所有 unicode 定义的分数符号。它们中的每一个都被视为一个单独的字符。当然，您可以自由地使用所有这些，但如果您想要更多，例如`123/321`，那么您应该寻找一个可以动态创建分数的库。

这样做的一个选项是使用 LaTeX。还有一个关于如何做到这一点的[问题](https://tex.stackexchange.com/questions/3372/how-do-i-typeset-arbitrary-fractions-like-the-standard-symbol-for-5)（有很好的答案）。

![在此处输入图像描述](../Images/895423aeff6811c1e27ecddc297984d5.png)

图片来自[http://symbolcodes.tlt.psu.edu/bylanguage/mathchart.html#fractions](http://symbolcodes.tlt.psu.edu/bylanguage/mathchart.html#fractions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:07:50.960

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T21:49:05.353

有几种可能性：

*   对分数使用特殊字符。例如，对于 2/4 是不可能的，并且除了您发现的三个最常见的（粗俗）分数之外，所有字体支持都有问题。
*   使用标记，如`<sub>2</sub>/<sup>4</sup>`. 可能会弄乱您的行距，并且看起来不是特别好。
*   使用一些用于定位和大小控制的 CSS 构造一个分数，并使用分数斜线字符而不是普通斜线。我会说，真的很尴尬。
*   使用 OpenType`<code>"frac"</code>`功能。对浏览器的支持相当有限，尤其是在字体方面。
*   MathJax，例如`\(\frac{2}{4}\)`或一些更详细的 TeX 代码，以产生不同的分数样式。
*   数学机器学习。对 HTML 中的 MathML 的详细和浏览器支持可能会更好。

这些在我的页面“HTM​​L（和 CSS）中的数学”中进行了更多解释和说明，部分[分数](http://www.cs.tut.fi/~jkorpela/math/#fractions)。

因此，选择取决于许多因素。这也很大程度上取决于字体。我建议您使用您打算使用的字体系列声明来测试不同的选项。尽管有许多替代方案，但您最终可能只使用简单的线性表示法，如 2/4。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T11:06:20.280

网页由文本构成，而该文本以特定[字符集](http://en.wikipedia.org/wiki/Character_set)编码。您选择的字符集决定了可以显示的字符。这也意味着无法显示字符集中不存在的字符或符号。

如迈克尔的回答所示，Unicode 定义了许多分数的符号。这些可以在不使用各种技巧的情况下显示，例如服务器或客户端生成的小位图显示所需的分数，或者如 mohammad mohsenipur 所示的转换 TeX 或 MathML 的 Javascript 库。

# php - PHP&MYSQL - 在数据库中插入数据失败

> ID：14671756
> 
> 赞同：0
> 
> 时间：2013-02-03T11:01:50.480
> 
> 标签：php, mysql, sql, database, insert

II 创建了一个用于插入新公司的表单，并且在此页面上，它是将数据插入数据库的 PHP 脚本。

我不知道这段代码的错误在哪里。

```
<?php
if (isset($_POST['submit']))
{
    // Form has been submitted.
    $query = mysql_query("INSERT INTO companies (name, subdomain0, subdomain1, subdomain2, 
    position, country, city, district, contact, set_up_date, address, phone, area_phone_code, website, fax, email)
    VALUES ('{$_POST['name']}', '{$_POST['domain']}', '{$_POST['subdomain1']}',
    '{$_POST['subdomain2']}', '{$_POST['position']}', '{$_POST['country']}', '{$_POST['city']}',
    '{$_POST['district']}', '{$_POST['contact']}', '{$_POST['setdate']}', '{$_POST['address']}', '{$_POST['phone']}',
    '{$_POST['areacode']}, '{$_POST['website']}', '{$_POST['fax']}', '{$_POST['email']}')");

    $result = mysql_query($query, $connection);
    if (!$result) {
        echo  "The company was not created.";
    } else {
        echo  "The company was successfully created.";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:06:23.507

重写您的代码并将其`{}`从变量中删除

```
 VALUES ('$_POST['name']','$_POST['domain']', '$_POST['subdomain1']',... 
```

1-确保在将它们发送到数据库之前对其进行转义。

2-不要使用 mysql ，使用 pdo 或 mysqli

为了逃避他们这样做：

```
 $name = mysql_real_escape_string($_POST['name']) ; 
```

然后像这样将它传递给你的查询

```
 VALUES ('$name', .... <-- same with other columns 
```

编辑-

试试这个

```
 if (isset($_POST['submit'])) { // Form has been submitted.

  $name = mysql_real_escape_string($_POST['name']) ;
  $subdomain0 = mysql_real_escape_string($_POST['subdomain0']) ;
  $subdomain1 = mysql_real_escape_string($_POST['subdomain1']) ;
  $subdomain2 = mysql_real_escape_string($_POST['subdomain2']) ;
  $position = mysql_real_escape_string($_POST['position']) ;
  $country = mysql_real_escape_string($_POST['country']) ;
  $city = mysql_real_escape_string($_POST['city']) ;
  $district = mysql_real_escape_string($_POST['district']) ;
  $contact = mysql_real_escape_string($_POST['contact']) ;
  $set_up_date = mysql_real_escape_string($_POST['setdate']) ;
  $address = mysql_real_escape_string($_POST['address']) ;
  $phone = mysql_real_escape_string($_POST['phone']) ;
  $areacode = mysql_real_escape_string($_POST['areacode']) ;
  $website = mysql_real_escape_string($_POST['website']) ;
  $fax = mysql_real_escape_string($_POST['fax']) ;
  $email = mysql_real_escape_string($_POST['email']) ;

 $query = mysql_query("INSERT INTO companies (name, subdomain0, subdomain1,  subdomain2, 
 position, country, city, district, contact, set_up_date, address, phone,   area_phone_code, website, fax, email)
  VALUES ('$_POST['name']', '$subdomain0', '$subdomain1',
  '$subdomain2', '$position', '$country',  '$city',
   '$district', '$contact', '$set_up_date',  '$address', '$phone',
   '$areacode, '$website', '$fax', '$email')");

      echo  "The company was successfully created.";
     else {
         echo  "The company was not created.";

    }
   }
  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:11:37.760

```
INSERT INTO companies  
SET name = $name, 
    subdomain0 = $domain, 
    subdomain1 = $doamin1 
```

很快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:14:51.993

你必须小心[sql 注入](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)。您可以通过链接了解 mysql_* 函数的其他选项，因为它已被弃用。

此外，最好尝试通过使用[mysql_error](http://php.net/manual/en/function.mysql-error.php)函数打印出错误来找出错误。（检查链接以获取替代方案，因为这也已被弃用）

# php - 应用程序运行 60 分钟后出现 PHP 5.1 SESSION_START 错误

> ID：14671761
> 
> 赞同：0
> 
> 时间：2013-02-03T11:02:29.247
> 
> 标签：php, session

我需要有关我的 php 应用程序错误的帮助。第一次运行我的应用程序运行良好。但 60 分钟后，我的应用程序在 session_start() 处出错。**找不到页面**。我使用 javascript 计时器来检查会话。sessiont_start() 有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:29:29.110

检查你的 php.ini **session.cache_expire。**

默认时间为 180 分钟。你可以延长你的时间如下

```
session_cache_expire("minutes"); 
```

见[手册](http://php.net/session.cache-expire)

# r - R：在 y 轴上带有分钟和秒的箱线图

> ID：14671763
> 
> 赞同：6
> 
> 时间：2013-02-03T11:02:38.033
> 
> 标签：r, datetime, boxplot

当我`boxplot`在 R 中以秒为单位测量一些数据时，如何将 y 轴的刻度从秒更改为分钟和秒？

例如，当我做这样的事情时：

```
data <- c(298, 507, 1008, 346)
boxplot(data) 
```

我得到一个`boxplot`y 轴从 300 到 1000 的 a。我想在那里有“5:00”到“16:40”，只需将秒转换为分钟和秒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T11:30:22.057

这是一个尝试。它首先关闭 y 轴，然后将数据转换为分钟并将其作为刻度线添加到 y 轴。

```
data <- c(298, 507, 1008, 346)
boxplot(data, yaxt="n")
at <- axTicks(2)
axis(2, at=at, labels=sprintf("%d:%02d", at %/% 60, at %% 60), las=1) 
```

提供一点解释：

`axTicks`“*计算漂亮的刻度线位置，就像 R 在内部做的一样。* ”（来自`?axTicks`）。

`%%`会给你除法后的余数，而`%/%`如果给出，会`x %/% y`告诉你有多少次`x`进入`y`.

最后，`sprintf`用于格式化字符串，并将填充计算出的秒值以始终`0`在需要时附加前导，即 -`2`变为`02`。

![在此处输入图像描述](../Images/fbe04f93eefe45aecfbb7638543856cd.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T08:41:18.340

具有功能的替代方案`axis.POSIXct`：

```
data <- c(298, 507, 1008, 346)
data2 <- as.POSIXct(data, origin=cut(Sys.time(), "hours"))
boxplot(data2, pars=list(yaxt="n"))
axis.POSIXct(2, at=pretty(data2), format="%M:%S", las=2) 
```

![在此处输入图像描述](../Images/e1566127d8412133d9223e7c2b315a89.png)

# mysql - mysql 相关：如何在所有多站点站点中选择所有 option_name = 'template'？

> ID：14671766
> 
> 赞同：0
> 
> 时间：2013-02-03T11:03:04.487
> 
> 标签：mysql, wordpress, select, phpmyadmin, command

我正在尝试使用此命令选择所有站点中的所有 wp_%_options 表：

```
SELECT * FROM (SELECT * FROM information_schema.tables WHERE table_name LIKE 'wp_%_options') as t 
```

但我需要更深入一层并在所有这些文件夹中获取 option_name = 'template'。

试过这个：

```
SELECT * FROM (SELECT * FROM information_schema.tables WHERE table_name like 'wp_%_options') as t WHERE option_name='template' 
```

不工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:29:27.423

您不能在标准 SELECT 查询中将表名（或列名）视为变量。要解决这个任务，您必须编写一个存储过程。

存储过程应该：

1.  获取所有表名`wp_%_options`；

2.  遍历获取的名称并使用 PREPARE 语句从第二级选择您需要的名称。

    ```
    DELIMITER | 

    DROP PROCEDURE IF EXISTS get_my_tables;

    CREATE PROCEDURE get_my_tables (IN option_name VARCHAR(255)) 
    BEGIN 

    DECLARE table_name CHAR(255);
    DECLARE done INT DEFAULT FALSE;
    DECLARE first INT DEFAULT TRUE;
    DECLARE cur1 CURSOR FOR SELECT `tables`.`TABLE_NAME` FROM `information_schema`.`tables` `tables` WHERE `tables`.`TABLE_NAME` LIKE 'wp_%_options';
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    OPEN cur1;

    read_loop: LOOP
        FETCH cur1 INTO table_name;
        IF done THEN
            LEAVE read_loop;
        END IF;

        IF (first) THEN
            SET first = FALSE;
            DROP TABLE IF EXISTS `result_table`;
            SET @sql = CONCAT("CREATE TEMPORARY TABLE `result_table` (SELECT * FROM `", table_name ,"` WHERE `option_name` = '", option_name, "')");
        ELSE
            SET @sql = CONCAT("INSERT INTO `result_table` SELECT * FROM `", table_name, "` WHERE `option_name` = '", option_name, "'");
        END IF;

        PREPARE stmt FROM @sql; 
        EXECUTE stmt; 
        DEALLOCATE PREPARE stmt;
    END LOOP;

    CLOSE cur1;

    SELECT * FROM `result_table`;

    END; 
    | 
    DELIMITER ;

    CALL get_my_tables('template'); 
    ```

我测试了这个例子，现在它按预期工作。您应该根据需要调整一些逻辑。例如：如何使用临时表，获取 fesult 并可能使用`UNION`而不是临时表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:12:50.173

这就是我最后所做的：

```
UPDATE  wp_2_options SET option_value='classic' WHERE option_name='template' OR option_name='stylesheet'; 
```

然后我在 Excel 中创建了我需要的任意数量。我花了 1 分钟来改变它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-03T11:10:35.003

Try using LIKE instead of =. So that the second query will be:

```
SELECT * FROM (SELECT * FROM information_schema.tables WHERE table_name like 'wp_%_options') as t WHERE option_name LIKE 'template' 
```

# php - 我怎样才能模拟 PHP 疯狂的全球性事物？

> ID：14671767
> 
> 赞同：4
> 
> 时间：2013-02-03T11:03:05.067
> 
> 标签：php, global-variables

如果我有一个`a.php` **无法编辑的文件。**

```
<?php
$a = 1;
function a() {
  global $a;
  echo $a;
}  
a(); 
```

然后运行`php a.php`打印`1`很好。但如果我有`b.php`：

```
<?php
function b() {
  include "a.php";
}
b(); 
```

然后运行`php b.php`不会打印任何内容。

我可以在 之前键入什么`include "a.php"`以使其行为相同而无需编辑`a.php`？

（显然除了定义之外`$a`。在我的真实示例中，它必须适用于复杂的`a.php`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:05:39.700

尝试将全局添加到您的新函数中：

```
function b() {
  global $a;

  include "a.php";
} 
```

目前我想知道 PHP 是否被`$a`视为您的函数的本地`b()`函数。

附录：作为对您的评论的回应，您似乎需要获取包含在您的函数中本地创建的任意变量，并将它们重新制作为全局变量。这适用于 OSX 10.6.8 上的 5.3.20：

```
function b() {
    include 'a.php';

    // Move variables into global space
    foreach (get_defined_vars() as $name => $value) {
        global $$name;
        // global wipes the value, so just reset it
        $$name = $value;
        echo "Declared $name as global\n";
    }
}

b();
// Your global vars should be available here 
```

`echo`显然，一旦您对它感到满意，您就可以删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:05:31.120

在函数内部定义函数？呸。但我想你有一个不允许任何其他方式的现实情况。但为了记录，这是非常糟糕的做法

添加`global $a`到`b()`应该工作。

```
function b() {
  global $a;
  include "a.php";
} 
```

> 我不知道需要定义哪些变量。a.php 真的很复杂

那么我能想到的唯一方法是不使用b.php中的函数，因此在包含a.php时您处于全局范围内。我看不出别的办法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:24:13.193

听起来`a.php`您必须将一些遗留或第 3 方脚本包装在自己的应用程序中。我曾经遇到过类似的问题，但解决方案并不漂亮。首先，您**必须**找出存在哪些全局变量（`grep global`或类似的帮助）。

这是我的“脚本适配器”类的相关部分：

```
private function _includeScript($file, $globals)
{
    foreach ($globals as $global) {
        global $$global;
    }

    ob_start();
    require $file;
    $this->_response->setBody(ob_get_clean());
} 
```

如您所见，我也必须捕获输出。该类还模拟`$_GET`和捕获`header`将所有内容分配给`Response`对象的调用，但对于您的情况，只有此方法很重要。**它以文件名和全局变量名**数组作为参数调用：

```
_includeScript('a.php', array('a')); 
```

# codeigniter - CodeIgniter set_message()

> ID：14671768
> 
> 赞同：0
> 
> 时间：2013-02-03T11:03:14.800
> 
> 标签：codeigniter, validation

当我尝试使用以下语句在 CodeIgniter 中的 from_validation 库下设置错误的自定义消息时..

```
$this->form_validation->set_message("is_unique", "%s already registered. Try a different %s"); 
```

而不是得到`Username already registered. Try a different Username`我得到`Username already registered. Try a different users.username`

虽然文档说`If you include %s in your error string, it will be replaced with the "human" name you used for your field when you set your rules.`

请让我脱离陷阱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:32:04.387

查看您的问题，您使用的语言文件似乎没有索引 user.username。在用户语言文件中定义它，看看会发生什么。

这是对语言的参考

[Codeigniter 语言类](http://ellislab.com/codeigniter/user-guide/libraries/language.html)

和

[Codeigntier 语言助手](http://ellislab.com/codeigniter/user-guide/helpers/language_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T23:35:11.967

我遇到了同样的问题，当我搜索时，我发现了这个[答案](https://stackoverflow.com/a/13319048/2407522)，它提到了 Codeigniter 中在第 673 行附近构建错误消息的行（位于文件系统/库/form_validation.php 中）：

```
 // Build the error message
$message = sprintf($line, $this->_translate_fieldname($row['label']), $param); 
```

我将其编辑为：

```
// Build the error message
if($rule == 'is_unique') {                                      //my code here

    $vars_num = substr_count($line, '%s');                      //my code here
    for($i = 0; $i < $vars_num; $i++){                          //my code here
        $params[] = $this->_translate_fieldname($row['label']); //my code here
    }                                                           //my code here
    $message = vsprintf($line, $params);                        //my code here

} else {                                                        //my code here

    $message = sprintf($line, $this->_translate_fieldname($row['label']), $param);

} 
```

它对我来说很好。我知道编辑系统库不是最佳做法，但也许它会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T07:26:53.527

尝试这个：

```
$this->form_validation->set_message("is_unique", "{field} already registered. Try a different {field}"); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-03T11:16:46.963

您可以使用 codigniter 的消息库设置自定义消息

例如在这样的模型编码中

```
if(duplicate_user_name ==true){
    $this->messages->add('$user already registered. Try a different $user ', 'error');
} 
```

并使用以下视图打印此消息

```
$messages = $this->messages->get(); 
            if (is_array($messages)):
                foreach ($messages as $type => $msgs):
                    if (count($msgs > 0)):
                        foreach ($msgs as $message):
                            echo ('<div class="' .  $type .'">' . $message . '</div>');
                       endforeach;
                   endif;
                endforeach;
            endif; 
```

# javascript - 更新映射剔除对象的小节

> ID：14671770
> 
> 赞同：1
> 
> 时间：2013-02-03T11:03:35.710
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我知道这个问题听起来很熟悉，但是我已经阅读了很多类似的问题并且无法找到我的具体情况。

我有一个名为 gds (GlobalDataStructure) 的 javascript 对象。顾名思义，这个对象包含我项目的所有网页所需的所有信息，并存储在 localStorage 中（因此我不只是更新视图模型，而是首先需要映射）。它包含通过 AJAX 读取的各种提要。

我使用构造函数来创建 gds。为了大大简化这个结构并希望让这个问题变得简单，假设 gds 是

```
function gdStructure(){
    this.lastUpdate = new Date(2010,1,1);
    this.family = new Object();
    this.series = new Object();
    this.product = new Object();
} 
```

所以我有

```
gds= new gdStructure(); 
```

然后，一旦我用来自初始提要的数据填充了 js 数组，我将执行以下操作。

```
 viewmodel = ko.mapping.fromJS(gds);
    ko.mapping.fromJS(gds,viewmodel); 
```

然后将视图模型绑定到每个页面

```
ko.applyBindings(viewmodel); 
```

所以这一切都没有问题。例如，当我获得一个新的家庭提要并且我想更新该对象时，就会出现此问题。我可以做到以下几点

```
gds.family=feed;
ko.mapping.fromJS(gds,viewmodel); 
```

一切都可以正常工作，但每次都映射一个 MASSIVE JS 对象。这非常慢，因此我需要找到一种方法来仅更新已更改的提要。理想情况下像..

```
ko.mapping.fromJS(gds.family, viewmodel.family); 
```

但这似乎不起作用。也因为它是一个我不能做的对象。

```
viewmodel.family(gds.family) 
```

有谁能够帮我？我相信这一定很简单。

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:22:38.627

我想你误解了 lib 是如何工作的，这部分看起来很奇怪

```
viewmodel = ko.mapping.fromJS(gds);
ko.mapping.fromJS(gds,viewmodel); 
```

您使用定义作为数据？

无论如何，我像这样使用 ko.mapping （有点简化，但我想你明白了）

[http://jsfiddle.net/QtyGd/1/](http://jsfiddle.net/QtyGd/1/)

# ios - 打印后删除文件

> ID：14671771
> 
> 赞同：2
> 
> 时间：2013-02-03T11:03:42.527
> 
> 标签：ios, objective-c, pdf, printing

我试图在打印后删除文件但没有成功。

实际上，我需要打印一个临时生成的 PDF（带有文本和图像），然后，当打印过程完成后，我想将其删除。

目前 PDF 保存在 Documents 目录中。将其保存在 Temp 文件夹中是个好主意吗？但无论如何我都必须删除它。我还有一个 tableView 显示用户**保存**的 PDF ，所以我只需要显示那些（而不是**临时**生成的）

我尝试过使用 UIPrinterInteractionController 的委托方法，但没有任何运气。

```
-(void)printInteractionControllerDidDismissPrinterOptions:(UIPrintInteractionController *)printInteractionController{
    NSError *error;
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory
                          stringByAppendingPathComponent:[NSString stringWithFormat:@"%@",PDFNameString]];
    if ([fileMgr removeItemAtPath:filePath error:&error] != YES)
    {   UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat:NSLocalizedString(@"UnableToDeleteFile", @"Unable to delete file: %@"),[error localizedDescription]] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil] autorelease];
        [alert show];
    }

    NSLog(@"Dismissed");
} 
```

警报视图仅在打印选项视图离开“发送到打印机..”视图的位置时弹出。它甚至没有删除文件，它说

可可错误代码 4。

有谁知道打印过程完成后我可以使用什么方法删除文件？

**编辑**

如果文件存在，我 NSLog'd，但它不存在。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:14:19.493

尝试 (void)printInteractionControllerDidFinishJob:(UIPrintInteractionController *)printInteractionController 代替。

[http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIPrintInteractionControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIPrintInteractionControllerDelegate](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIPrintInteractionControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIPrintInteractionControllerDelegate)

# asp.net - ListView - 项目模板样式 - 跨浏览器差异

> ID：14671772
> 
> 赞同：0
> 
> 时间：2013-02-03T11:03:46.680
> 
> 标签：asp.net, html, css, listviewitem

[这是对我之前的问题（ ListView - ItemTemplate 表格样式](https://stackoverflow.com/questions/14631739/listview-itemtemplate-table-styling)）的跟进。我仍在尝试使 ItemTemplate 看起来像这样：

```
______________________________________________
|               |___________Title_____________|
|    Image      |____________Name_____________|
|               |______Value_____|____Value___|
|_______________|______Value_____|____Value___| 
```

它在 Chrome 和 Opera 中完美运行，但在其他浏览器中存在问题。

火狐：

```
______________________________________________
| _____________ |                             |
||   Image    | |                             |
||            | |                             |
||____________| |___________Title_____________|
|               |____________Name_____________|
|               |______Value_____|____Value___|
|_______________|______Value_____|____Value___| 
```

IE：

```
______________________________________________
| _____________ |___________Title_____________|
||    Image    ||____________Name_____________|
||             ||______Value_____|____Value___|
||_____________||                |            |
|               |                |            |
|_______________|______Value_____|____Value___| 
```

在 Safari 中，它像在 IE 中一样显示，并且在其上方增加了一个巨大的间隙。

这是页面的输出和 CSS [http://jsfiddle.net/9HsvF/21/](http://jsfiddle.net/9HsvF/21/)我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:51:28.923

只是一个建议。如果可能的话，摆脱桌子。并尝试 div 布局。布局模板输出可以是（[http://jsfiddle.net/V5aCa/1/](http://jsfiddle.net/V5aCa/1/)）：

```
<div style="overflow:auto;">
    <div class="leftColumn">
        <img src="http://static.adzerk.net/Advertisers/da748a4c6e9b4c97af37c32af7531544.jpg"/>
        </div>
    <div class="rightColumn">
        <div class="titleRow">Title</div>
        <div class="nameRow">Name</div>
        <div class="values">
            <div>value1</div><div>value2</div>
        </div>    
        <div class="values">
            <div>value3</div><div>value4</div>
        </div>    
    </div>
</div> 
```

和CSS：

```
.leftColumn
{
    float:left;
    width:150px;
    overflow:auto;
}
.rightColumn
{
    float:left;
    overflow:auto;
}
.titleRow,.nameRow
{
    text-align:center;
}
.values
{
    clear:both;
}
.values div
{
    float:left;
    padding:0px 3px;
} 
```

# wix - 多个功能共享的组件的有条件安装

> ID：14671776
> 
> 赞同：0
> 
> 时间：2013-02-03T11:04:28.050
> 
> 标签：wix, windows-installer

我有一个产品，它包含几个功能（A、B、C），所有这些都共享一个通用的 Windows 服务组件。问题是有一个最终情况：如果只安装了一个特定功能（功能 C），带有“旧模式”标志（保存在注册表中的某些属性），那么这个 windows-service 组件不应该安装或将其启动类型从“自动”更改为“禁用”。与禁用的启动类型解决方案相比，我更喜欢“未安装”解决方案。

在所有其他情况下：当安装了除此功能 (C) 之外的其他功能 (A,B) 时，或者未设置 'legacy-mode' 标志时 - 应安装 windows-service 组件并应设置其启动类型为“自动”。
如果产品被重新配置，则应重新评估条件并针对这两种情况采取适当的行动。

问题是不可能在 windows-service 组件条件中使用功能的安装状态，因为功能的安装状态和组件的条件都是在同一个 CostFinalize 操作中评估的（请参阅：[http://www.joyofsetup .com/2008/04/09/feature-states-in-component-conditions/](http://www.joyofsetup.com/2008/04/09/feature-states-in-component-conditions/)）此外，使用在自定义操作中删除组件的方法不起作用，因为非传递组件不能从现有功能中删除，除非这是重大升级（参见[http://blogs.msdn.com/b/heaths/archive/2010/02/15/test-your-conditions.aspx](http://blogs.msdn.com/b/heaths/archive/2010/02/15/test-your-conditions.aspx)）

我可以将组件分离为它自己的不同功能，并尝试编写自定义操作，在 CostFinalize 操作之后根据其他功能的安装状态设置此功能的安装状态，但这会使不同的安装逻辑复杂化场景（安装、重新配置、回滚、卸载）并使其更容易出错。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:39:20.933

最终，我为仅包含 windows-service 组件的功能 C 创建了一个子功能，并使用在 CostFinalize 之后安排的两个 MsiSetFeatureState 自定义操作来控制其安装状态 - 一个用于将状态设置为不存在以防安装功能 C 或重新配置并设置了 'legacy-mode' 标志，另一个将状态设置为 install-local 以防安装或重新配置功能 C 并且未设置 'legacy-mode' 标志。windows-service 组件仍然在功能 A、功能 B 和功能 C 的这个子功能之间共享。这似乎工作得很好！

# c - 理解调用指向函数的指针

> ID：14671778
> 
> 赞同：-4
> 
> 时间：2013-02-03T11:04:52.540
> 
> 标签：c, function-pointers

我试图了解什么是指向 c 中函数的指针。

**我想要一些调用函数指针的详细过程，因此，我可以更好地理解函数指针。**

有人可以解释为什么我下面的代码不会崩溃并且有一些有线输出吗？为了缩小范围，我正在寻找类似`javap`的东西可以解释如何`jdk`编译我的代码和`jvm`运行我的代码

1.  void 返回和数字 14,15 或 16 的关系是什么。（void 函数返回）
2.  我的第二个参数有任何安全问题还是与非初始化 val 相同？

测试.c

```
#include <stdio.h>
#include <stdlib.h>

static void f(int x, int y){

    printf("x = %d \n",  x );
    printf("y = %d \n",  y );
}

typedef int (*FUNC)(int);

int main(void){

    long int addr = (long int)f;
    printf("%d \n",  (int)((FUNC)addr)(1) );

    return 0;
} 
```

使用编译的 mac os 上的输出`i686-apple-darwin11-llvm-gcc-4.2`

```
x = 1 
y = 1479046720 
16 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:08:07.433

The answer is undefined behavior. You're using two incompatible function pointer types and use one to call the other. (Not to mention storing the pointer in an integer, etc., etc.) Thus, your program invokes undefined behavior, and as such, anything can happen. And the values you get are most probably just random crap from the messed up stack and/or CPU registers.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T11:08:18.147

You are causing undefined behavior all over the place:

*   You're storing the function pointer in a integer, which isn't guaranteed to work
*   You're casting said integer to a different type of function pointer (fewer parameters) with a different return type
*   You're calling the function with fewer parameters than it expects
*   You take a return value from a function returning void

Trying to make sense of this is just unreasonable, but as a guess since you're using x86:

*   `x` is populated correctly in the function with the `1` you passed
*   `y` isn't so it gets a random value, likely some leftover on the stack
*   there's no return value and you get whatever was left in the AX register

> Could somebody explain why does my code below not crash and have some wired output

Doing the wrong thing isn't guaranteed to crash your program - there are no guarantees.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:16:32.037

The value 16 you get back in the last output is PROBABLY the number of characters written by printf - as that's what printf returns, and in this case, nothing else happens after that in the function. But like others have said, you're asking what happens, and nobody can really say - it may not work at all, crash and burn, or give you some "random" values as return and printout - it's not defined anywhere, and if you compile the code with a different compiler, different compiler settings or on a different type of hardware, the results will change.

Each time you run the code, it will most likely give you the same result, but make some changes to the code, and unpredictable results will occur.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T11:31:26.610

要回答这个问题，

> 有人可以解释为什么我下面的代码不会崩溃

并非所有损坏的代码实际上都崩溃了。可能 f 的参数（和返回值）是在寄存器中传递而不是被压入堆栈，因此预期值和实际值之间的不匹配不会转化为堆栈错位。如果您尝试使用更多参数，足以要求堆栈工作，您可能会遇到崩溃或一些可能危险的行为（毕竟在某些安全漏洞中使用了类似的技术）。

然后为了阐明函数指针的用法，我冒昧地用一些注释重写了代码。

```
#include <stdio.h>
#include <stdlib.h>

/* We want to be able to print a return value, so we make
   f return something - a long, so as to tell it from int
   - in order to be able to get something back.
*/

static long f(int x, int y){

    printf("x = %d \n",  x );
    printf("y = %d \n",  y );
    return x + y;
}

/* We want the signature of a function returning long, and taking
   two int's, since this is what f() is.
*/
typedef long (*FUNCPTR)(int, int);
typedef long (FUNC)(int, int);

int main(void)
{
    /* We want a pointer to f - it works either way */
    FUNCPTR addr   = f;
    FUNC    *addr2 = f;

    /* addr points to a function taking two ints, so we must pass it
       two ints, and format return as long decimal */

    printf("%ld\n",  addr(5, 7));

    /* addr2 is the same */

    printf("%ld\n",  addr2(5, 7));

    return 0;
} 
```

预期输出：

```
$ gcc -W -Wall -o test test.c

$ ./test
x = 5
y = 7
12
x = 5
y = 7
12 
```

# c++ - 需要标准库的简单字节解/压缩

> ID：14671780
> 
> 赞同：0
> 
> 时间：2013-02-03T11:05:11.987
> 
> 标签：c++, compression

我知道有几个问题接近这个问题，但我还没有找到令人满意的答案。

我正在寻找一种简单的 C++ 字节压缩方法。将应用程序大小保持在最小对我来说非常重要，因此我想使用每个 Windows 版本（从 xp 及更高版本开始）都可用的库。我不想使用 .net 或将大的 .dll 添加到我的应用程序中。

我对速度和小尺寸比压缩率更感兴趣。

谁能帮我解决这个问题？我刚从 vb.net 切换到 c++，所以我对这种语言很陌生 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:08:16.143

IHave a look at [zlib](http://www.zlib.net/). I'm happy with this library.

# c++ - vs 2010 pro 查看调用层次结构不起作用

> ID：14671783
> 
> 赞同：3
> 
> 时间：2013-02-03T11:05:42.837
> 
> 标签：c++, visual-studio-2010, ide

我在 Windows 7 64 位的 Microsoft Visual Studio 2010 Professional 中使用 C++。

View Call Hierarchy 功能似乎在这台机器上不起作用，我在其他机器上经常使用它......我不知道为什么它现在不起作用......

当我右键单击一个方法并单击“查看调用层次结构”时，层次结构不会显示在相应的选项卡中；实际上那里什么都没有发生...

有没有人遇到过这个？我怎样才能找回这个功能？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:55:51.910

您可以尝试删除 Intellisense 文件，有时当“转到定义”或“查看调用层次结构”等内容停止正常运行时会出现问题。您可以删除 .sdf 文件和 IPCH 文件夹，然后再次启动您的项目。

# java - 带有 Eclipse 的 Ant 脚本

> ID：14671784
> 
> 赞同：0
> 
> 时间：2013-02-03T11:05:43.460
> 
> 标签：java, eclipse, ant

> **可能重复：**
> [希望 eclipse java 项目自动运行 ant 构建文件](https://stackoverflow.com/questions/5664669/want-an-eclipse-java-project-to-run-ant-build-files-automatically)

我想知道是否可以编写一个 ant 脚本，每次在我的项目（存储库）中进行一些修改时自动创建一个构建（jar 文件）？如果有可能有人可以帮助我或为此链接我一些好的页面。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:09:33.097

您是否考虑过 Ant 任务已[更新](http://ant.apache.org/manual/Tasks/uptodate.html)。这允许您将一组文件上的时间戳与另一个进行比较。在您的情况下，您可以将所有 src *.java 文件与输出 jar 进行比较。然后，您将能够在循环中运行它，这将为您提供所需的效果。尽管以一种相当粗暴的方式。

这还有一个好处，即除非 src 文件已更改并且可以应用于编译以生成 java 增量构建，否则实际上不会做任何工作，这与其他构建工具一起“免费”提供。

# c++ - 在 c++ 中将行和/或列的所有值设置为 1 或 0

> ID：14671791
> 
> 赞同：-1
> 
> 时间：2013-02-03T11:06:19.700
> 
> 标签：c++, algorithm, memset

我有一个问题，需要将列中的所有值重置为 0 或 1。我使用的代码是通过每次迭代来设置值的正常幼稚方法。有没有更快的实现。

```
//Size of board n*n
i=0;
cin>>x>>y;x--;
if(query=="SetRow")
{
  while(i!=N){ board[i][x]=y;i++;}
}
else
{
  while(i!=N){ board[i][x]=y;i++;}
} 
```

y 可以是 0 或 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:12:46.807

Well, other then iterating the columns there are few optimizations you might want to make:

1.  **Iterating columns is less efficient then iterating rows** (about *4 slower) due to [cache](http://en.wikipedia.org/wiki/CPU_cache) performance. In columns iteration, you have a cache miss for each element - while in rows iteration you have cache miss for 1 out of 4 elements (usually, it depends on architecture and size of data, but usually a cache line fits 4 integers).
    Thus - **if you iterate columns more often then rows- redesign it**, in order to iterate rows more often. [This thread](https://stackoverflow.com/q/9888154/572670) discusses a similar issue.
    Also, after you do it - you can use `memset()` which I believe is better optimized for this task.
    (Note: Compilers might do that for you automatically in some cases)

2.  You can **use lazy initialization**, there is actually `O(1)` algorithm to initialize an array with constant value, it is described with more details here: [initalize an array in constant time](http://eli.thegreenplace.net/2008/08/23/initializing-an-array-in-constant-time/). This comes at the cost of ~triple the amount of space, and more expansive seek later on.

The idea behind it (2) is to maintain additional stack (logically, implemented as array+ pointer to top) and array, the additional array will indicate when it was first initialized (a number from 0 to n) and the stack will indicate which elements were already modified.

When you access `array[i]`, if `stack[additionalArray[i]] == i && additionalArray[i] < top` the value of the array is `array[i]`. Otherwise - it is the "initialized" value.

When doing `array[i] = x`, if it was not initialized yet (as seen before), you should set `additionalArray[i] = stack[top]` and increase `top`.

This results in `O(1)` initialization, but as said it requires additional memory and each access is more expansive.

The same principles described by the article regarding initializing an array in `O(1)` can also be applied here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:28:57.370

问题出在运行 codechef long 比赛.. 万岁骗子.. 关闭此线程

# mysql - 某在线视频教育网站的MySQL数据库设计

> ID：14671794
> 
> 赞同：0
> 
> 时间：2013-02-03T11:06:32.057
> 
> 标签：mysql, database

我计划在一个网站上为用户提供多个主题的培训视频，用户可以观看视频、查看他们的观看历史、评论视频、参加相关考试并在考试成功时获得徽章/证书。当他们在视频中遇到问题时，他们也可以提交实时问题。还会有一个论坛，用户可以互相帮助，添加朋友，发送消息等。带着这个想法，我现在正在设计数据库，但我之前没有数据库设计经验，所以请查看以下内容设计并给我一些关于性能和最佳实践的建议。谢谢大家。

有

**用户资料**

用户名 VARCHAR

ID INT

键入枚举

电子邮件 VARCHAR

Date_created TIMESTAMP

Date_modified TIMESTAMP

通过 VARBINARY

名称 VARCHAR

证书 VARBINARY

Ranking_points INT

性别枚举

出生日期

Avatar_url VARCHAR

* * *

**视频**

标题 VARCHAR

ID INT

类别枚举

说明 TINYTEXT

Date_created TIMESTAMP

Tmp_name CHAR

文件名 VARCHAR

尺寸 MEDIUMINT

Subtitle_url VARCHAR

Liked_count INT

Shared_count INT

标签枚举

* * *

**类别**

类别 VARCHAR

ID INT

说明 TINYTEXT

* * *

**最近浏览过的**

用户 ID INT

Video_id INT

Viewed_date TIMESTAMP

* * *

**好友列表**

用户 ID INT

Friend_id INT

* * *

**USER_QUESTIONS**

用户 ID INT

Question_id INT

Question_title VARCHAR

Question_content LONGTEXT

Date_asked TIMESTAMP

* * *

**VIDEO_COMMENTS** 标题 VARCHAR

Video_id INT

评论内容长文本

User_id TINYTEXT

Date_created TIMESTAMP

* * *

**USER_MESSAGES**

用户 ID INT

Message_id INT

Message_content LONGTEXT

Sender_id INT

Date_created TIMESTAMP

* * *

**在线考试/评估**

id VARCHAR

输入枚举

考试网址 VARCHAR

描述 TINYTEXT

Date_created TIMESTAMP

* * *

**EXAMS_TAKEN_BY_USER**

考试ID INT

用户 ID INT

Exam_result SMALLINT

Date_taken TIMESTAMP

我还有两个问题： 1\. 我想允许对用户评论进行评论，我将如何设计数据库结构？2\. 一个视频可以属于多个类别，是需要新建一个视频类别表还是在VIDEO表的类别字段中放一系列类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:48:15.793

整体结构似乎还可以，至少看起来很像我会做的事情。

1.-**关于评论评论**：

我想最简单的设计是在其中添加一个**parent_comment_id**列。但这是一个棘手的问题，因为**parent_comment_id**或**video_id**会有很多 NULL 值。因此，解决此问题的另一种方法是允许**VIDEO_COMMENT**上的**video_id**为 NULL 值。在这种情况下，当在此列中找到 NULL 时，您会知道您正在回复用户评论。然后，您必须在第二个表上找到父评论：

 **```
USER_COMMENT
user_comment_id (primary key)
video_comment_id (foreign key to VIDEO_COMMENT)
comment (text)
created_date (date) 
```

这绝对不是最可爱的解决方案，但如果你被性能问题困扰，它可能值得一试。您仍然拥有相同的 VIDEO_COMMENTS 表（像以前一样干净，没有修改其结构）。用户对先前评论的评论可能不那么频繁，因此您将它们放在第二个结构中，而不是在同一个 VIDEO_COMMENTS 表中。

2.-**关于视频类别**

在这里，我将创建 2 个附加表：一个用于视频类别（或标签），另一个用于将每个视频链接到其类别。

```
VIDEOS

Here I would drop the CATEGORY column

CATEGORIES

category_id (primary key)
title

VIDEO_CATEGORIES

video_category_id
category_id
video_id 
```

在这种情况下，您可以拥有一个已经存储的类别列表，用户只需选择他/她认为对他/她的视频正确的类别。

我不建议您将多个值放在同一列上，因为这确实是一个糟糕的设计问题。您无法为用户提供类别列表（就像我之前提到的那样）。您还会有许多重复的值、拼写错误等。此外，将多个值存储在同一列中会使编辑变得不必要的困难：想想您将如何实现用户请求以删除类别标签并添加另一个。当然，这并不难，但如果您只需要删除单个引用，它可能会简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:17:14.850

您可以使用自链接表进行用户评论。桌子看起来像这样

```
Id ---- comments ---- parent_comment_Id
1    root comments         null
2    child comments         1
3    grandchild comments    2 
```

关于视频类别，最好有一个单独的表格，特别是针对视频类别。然后您可以在将来扩展类别名称、描述等类别信息。考虑到用户体验，很常见的情况是用户希望先查看类别列表，然后单击以获取所有相关视频。**

# plot - 排列内部框架

> ID：14671795
> 
> 赞同：2
> 
> 时间：2013-02-03T11:06:49.993
> 
> 标签：plot, workspace, jinternalframe

在一个工作区我想垂直或水平排列两个或多个InternalFrames，如附图

![原始情节](../Images/e807db4abba2ceb69302af2a769a017a.png)

![垂直排列](../Images/2b31e04634376b44de8213e17f801bb8.png)

![水平排列](../Images/c3c5770f8fab329beaf9325b035c5996.png)

这样做的最佳解决方案是什么？

谢谢

# perl - 如何使用 Term::ReadLine 检索命令历史记录？

> ID：14671797
> 
> 赞同：4
> 
> 时间：2013-02-03T11:06:56.080
> 
> 标签：perl, readline, arrow-keys

我有以下脚本，它与文档概要段落中的示例几乎相同。

```
use strict;
use warnings;
use Term::ReadLine;

my $term = Term::ReadLine->new('My shell');
print $term, "\n";
my $prompt = "-> ";

while ( defined ($_ = $term->readline($prompt)) ) {
   print $_, "\n";
   $term->addhistory($_);
} 
```

它执行没有错误，但不幸的是，即使我单击向上箭头，我也只会得到`^[[A`并且没有历史记录。我错过了什么？

声明`print $term`打印。`Term::ReadLine::Stub=ARRAY(0x223d2b8)`

由于我们在这里，我注意到它打印了带下划线的提示......但我在文档中找不到任何可能阻止它的东西。有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T15:15:33.893

要回答主要问题，您可能没有安装好的 Term::ReadLine 库。您将需要“perl-Term-ReadLine-Perl”或“perl-Term-ReadLine-Gnu”。这些是 fedora 软件包名称，但我确信 ubuntu/debian 名称会相似。我相信你也可以从 CPAN 获得它们，但我还没有测试过。如果你还没有安装这个包，perl 会加载一个几乎没有任何特性的虚拟模块。出于这个原因，历史不是其中的一部分。

下划线是 readline 所谓的装饰的一部分。如果您想完全关闭它们，请添加`$term->ornaments(0);`适当的位置。

我对你的脚本的重写如下

```
#!/usr/bin/perl
use strict;
use warnings;

use Term::ReadLine; # make sure you have the gnu or perl implementation of readline isntalled
# eg: Term::ReadLine::Gnu or Term::ReadLine::Perl
my $term = Term::ReadLine->new('My shell');
my $prompt = "-> ";
$term->ornaments(0);  # disable ornaments.

while ( defined ($_ = $term->readline($prompt)) ) {
   print $_, "\n";
   $term->addhistory($_);
} 
```

# sql - SQL Server 2012 Express，连接错误 26，本地连接

> ID：14671798
> 
> 赞同：2
> 
> 时间：2013-02-03T11:07:12.107
> 
> 标签：sql, sql-server-2012-express

我正在使用 SQL Express 2012 SP1 x64 在新笔记本电脑（Windows 8 x64）上本地工作，我收到以下连接错误：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。*
> 
> *服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

请注意服务`sqlserver`正在运行并且共享内存、TCP/IP、命名管道都已启用。

**有时连接是成功的，但只是一段时间。**

通常我会收到连接错误。

任何想法如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:11:38.483

Check in Windows Services, sometimes the instance of SQL Server is stopped after some updates either in Visual Studio or SQL Server. I think you mean, sometimes IT IS NOT connecting, but after some seconds it does work. Am I correct?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T04:18:38.737

我已经重命名了我的计算机，sql Express 在错误的路径上寻找数据库服务器。重命名计算机或更新路径将解决该问题。

这可能不是您的问题，但可以帮助其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:44:29.833

而不是 SQL Express - 您可以连接并使用 - (localdb)/v11.0 吗？

localdb 与 sqlexpress 相比重量更轻，是开发人员将一些数据快速放入 SQL 的推荐方式。另请注意，localdb 不是作为服务运行，而是作为应用程序运行，因此连接到它可能更容易。[这](https://stackoverflow.com/questions/10183379/is-there-a-difference-between-sql-server-express-2012-and-localdb)是一个讨论其他差异的问题。

# macos - 在 Firemonkey 应用程序中使用 OSX 安全范围的书签

> ID：14671800
> 
> 赞同：2
> 
> 时间：2013-02-03T11:07:15.143
> 
> 标签：macos, delphi, sandbox, firemonkey, entitlements

我一直在用 Delphi XE3 开发一个 OSX 应用程序并遇到各种问题。最新的是为 Apple Appstore 构建的 sanboxed 版本。

用户必须选择一个任意文件夹，并且应用程序需要访问它。[由于OpenDialog](https://stackoverflow.com/questions/13551879/topendialog-nsopenpanel-not-working-in-a-sandboxed-delphi-app)存在问题，我不得不转向拖放功能。
用户将文件夹拖到应用程序中，沙箱使应用程序可以临时访问它并且一切正常。
为了在应用程序重新启动时保留对该文件夹的访问权限，我必须使用所谓的“[安全范围的书签](http://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW16)”

我有两个问题：
1）如何将“com.apple.security.files.bookmarks.app-scope”权利添加到 XE3 firemonkey 应用程序？它在项目选项->权利中不可用。如果我在“.entitlements”文件中手动添加它，它会在构建应用程序时被覆盖。那么有没有办法添加项目选项列表中没有的自定义权利？

2）要创建书签，我应该使用[NSURL.bookmarkDataWithOptions](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/bookmarkDataWithOptions:includingResourceValuesForKeys:relativeToURL:error:)方法。我认为它应该像这样使用，但我不确定确切的语法：

```
var
  URL: NSURL;
  Err: NSError;
  Data: NSData;
...
URL := TNSURL.Create;
Data := URL.bookmarkDataWithOptions(NSURLBookmarkCreationWithSecurityScope, nil, @Err);
... 
```

也许应该调用 Wrap(...) 而不是 Create。我还没有尝试过它，因为没有问题 1) 的答案是没有意义的。

似乎没有人为 Delphi 写过关于这些问题的任何文章，但我希望这里有人有这方面的经验。

提前致谢。

**编辑：**
对于问题 1）我尝试手动添加编辑 OSX32 文件夹中的“.entitlements”文件并将其设置为只读以防止它被覆盖。当然这太容易了，因为链接器抱怨文件无法修改......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:38:20.007

另一种方法是在部署页面中停用权利文件的复选框。

但请注意：每次在 Build/Release 或 App Store/Normal 之间切换时，delphi 都会激活该复选框。这意味着您必须在播放页面中再次停用它，以避免将此文件传输到 mac PC。

顺便说一句：您是否同时尝试过 StartAccessingSecurityScopedResource 功能？在 MacApi.Foundation 单元中，该函数未在 NSURL 接口中声明。

你找到使用这个功能的方法了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:53:46.583

好的，我终于找到了手动添加项目选项>权利中不可用的权利的方法。

而不是在项目管理器中选择“App Store”构建，您必须选择正常版本构建并像往常一样部署应用程序。
应用程序作为 APP 包部署在 PAServer 暂存目录中。在这个包中有一个“Entitlements.plist”文件，它是 XML 格式的，可​​以用文本编辑器进行编辑。打开文件后如何添加新权利是非常明显的。

编辑后，必须手动对应用程序进行代码签名，并且必须准备一个包。它比使用 Delphi IDE 稍微复杂一些，但在[Embarcadero](http://docwiki.embarcadero.com/RADStudio/XE3/en/Mac_OS_X_Application_Development#Using_Manual_Steps_to_Sandbox.2C_Code_Sign.2C_and_Build_Your_Application)和 Apple 网站上有关于它的说明，它实际上没有问题。

还没有尝试过 bookmarkDataWithOptions 功能。

# javascript - 与backbonejs路由器有问题

> ID：14671802
> 
> 赞同：1
> 
> 时间：2013-02-03T11:07:48.300
> 
> 标签：javascript, jquery, backbone.js, router, backbone-routing

**设想**

我正在开发骨干应用程序。现在发生的事情是当用户单击页面上的编辑链接时，它应该显示一个表单。我正在尝试使用骨干路由器而不是事件来实现这一点。使用事件对象，它工作得非常好。要使用路由器，我使用的是全局事件。

**问题**

问题是当用户单击编辑链接时，它会在控制台中显示以下错误

```
Uncaught TypeError: Object 10 has no method 'toJSON'             views.js:57 
```

这个错误是因为在views.js 的第57 行，我正在使用`this.model.toJSON()`，而我没有通过路由器传递模型。我不知道如何通过路由器传递模型

这是我的路由器。**注意：以下所有代码都在单独的文件中**

```
App.Router = Backbone.Router.extend({
    routes: {
        'contacts/:id/edit': 'editContact'
    },

    editContact: function (id) {
        console.log('yahhhhh');
        vent.trigger('contact:edit', id);
    }
}); 
```

在上面的路由器中，我正在触发`editContact`函数内部的事件。然后我正在以下`initialize`函数中收听上述事件。

```
App.Views.App = Backbone.View.extend({
    initialize: function () {
        vent.on('contact:edit', this.editContact, this);
    },

    editContact: function (contact) {
        var editContactView = new App.Views.EditContact({ model: contact });
        $('#editContact').html(editContactView.render().el);
    }
}); 
```

`event`现在在上面听完`initialize`函数后，我正在调用`editContact`函数，我也在传递`model`using`this`关键字。在`editContact`函数内部，我正在创建一个`EditContact`紧随其后的视图的实例，然后渲染一个需要显示的表单。

```
App.Views.EditContact = Backbone.View.extend({
    template: template('editContactTemplate'),

    render: function () {
        var html = this.template(this.model.toJSON());  //<--- this is line 57
        this.$el.html(html);
        return this;
    }
}); 
```

完成上述所有操作后，表格未显示，我收到上述错误。

**问题**

如何通过路由器将模型传递给 EditContact 内的渲染函数以使其开始工作？

**更新**

这是我的模型

```
App.Models.Contact = Backbone.Model.extend({
    urlRoot : '/contacts'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:17:54.803

在您的`editContact`方法中，参数`contact`是指`id`您从路由器向前传递的参数。当您使用视图`new App.Views.EditContact({ model: contact })`的模型初始化新视图时，预计将是 id。

您需要将 id 映射到模型实例中。恕我直言，这样做的正确位置是在路由器中：

```
editContact: function (id) {
    var contact = new App.Models.Contact({id:id});
    vent.trigger('contact:edit', contact);
} 
```

请注意，此时模型将仅具有`id`属性集。如果您需要填充模型属性以进行编辑，您应该`fetch`从服务器获取模型，然后才触发事件：

```
editContact: function (id) {
    var contact = new App.Models.Contact({id:id});
    contact.fetch().done(function() {
      vent.trigger('contact:edit', contact);
    });
} 
```

**根据评论进行编辑：**一般来说，您不应将任何内容传递**给**路由器。路由器应该是每个新请求（url 更改）的起点。如果您想在页面更改之间保持某种状态，您应该将数据存储在路由器级别，并**从**视图“向下”传递模型和集合。

在一个简化的场景中，这意味着在路由器中初始化和存储对集合的引用。就像是：

```
var Router = Backbone.Router.extend({
  initialize: function() {
    this.contactCollection = new App.Collections.Contacts();
  },

  editContact: function (id) {
    id = parseInt(id, 10);
    if(_.isNaN(id)) {
      //error...
    }
    //try to get a model from the collection
    var contact = this.contactCollection.get(id);

    //if not found, create, add and fetch
    if(!contact) {
      contact = new App.Models.Contact({id:id});
      this.contactCollection.add(contact);
      contact.fetch().done(function() {
        vent.trigger('contact:edit', contact);
      });
    } else {
      vent.trigger('contact:edit', contact);
    }
  }
}); 
```

请注意，这只是示例代码，不一定要如何逐行实现。您应该考虑是否可以在视图中显示可能过时的模型，或者是否应该始终从服务器获取它。在实践中，您还可以在一个不错的类中抽象集合状态，而不是直接在路由器中处理它。

希望这能回答你的问题。

# java - 如何使用注释自动解析我的命令行参数？

> ID：14671806
> 
> 赞同：4
> 
> 时间：2013-02-03T11:08:13.757
> 
> 标签：java, parsing, command-line, annotations, arguments

我想要类似以下的工作：

```
public class A {
    @command_line_arg{"argname1"}
    static boolean x;

    @command_line_arg{"argname2"}
    static List<String> y;

    void main(String[] args) {
        /* perhaps a call such as parseArgs(); here */
        System.out.println("got argname1 = " + x);
        System.out.println("got argname2 = " + y);
    }
} 
```

我需要使用什么库？

（有点相关[这个](https://stackoverflow.com/q/14622549/1593077)。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:22:03.487

（基于@fge 的[回答](https://stackoverflow.com/a/14674887/1593077)。）

可以将[JCommander](http://jcommander.org/)与静态一起使用：

```
public class A {

    @Parameter(names = "-argname1")
    static boolean x;
    @Parameter(names = "-argname2", variableArity = true)
    static List<String> y;

    @Parameter
    public static List<String> remainingParameters;

    void main(String[] args) {
        new JCommander(A.class.newInstance(), args);
        System.out.println("got argname1 = " + x);
        System.out.println("got argname2 = " + y);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:13:24.600

您可以尝试[klab-commons-cli](https://code.google.com/p/klab-commons-cli/)，它为 Apache commons-cli 添加注释；没有分发 jar，您只需使用源代码。另一种不利用 commons-cli，但提供分发库的替代方法是[args4j](http://args4j.kohsuke.org/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T17:01:27.203

[JCommander](http://jcommander.org/)可能对您有用。它使用注释来描述所有命令行参数并为您生成选项/帮助文本。

引用网站上的示例：

```
public class JCommanderExample {
  @Parameter
  private List<String> parameters = new ArrayList<String>();

  @Parameter(names = { "-log", "-verbose" }, description = "Level of verbosity")
  private Integer verbose = 1;

  @Parameter(names = "-groups", description = "Comma-separated list of group names to be run")
  private String groups;

  @Parameter(names = "-debug", description = "Debug mode")
  private boolean debug = false;
} 
```

# windows - automate windows tasks using image recognition

> ID：14671812
> 
> 赞同：3
> 
> 时间：2013-02-03T11:08:33.110
> 
> 标签：windows, ui-automation, sikuli

There are alternatives to sikuli to automate windows repetitive operations with image recognition?

Sikuli is great but it seems to not be updated since 2010 and there are no record tools.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:34:33.107

我为您的问题添加了书签，因为我也对此感兴趣，但我认为缺乏答案实际上表明没有其他选择。Sikuli 是一个很棒的工具，并且经常更新。查看[它的 Launchpad 网站](https://launchpad.net/sikuli)。RC3 于 2012 年 12 月发布，只有 3 个月大。

另外，这是我在他们的 github 页面上找到的：

> 一个新版本
> 
> ==============
> 
> 计划于 2013 年 1 月发布。更多信息请访问：[https](https://github.com/RaiMan/Sikuli12.11) ://github.com/RaiMan/Sikuli12.11和 Sikuli 的 Launchpad 页面： [https ://launchpad.net/sikuli](https://launchpad.net/sikuli)

至于记录工具，是的，很遗憾没有任何工具，但没有其他选择，免费获得 Sikuli 仍然是一个公平的交易。

# jquery - 成功更新值（使用比率和引导弹出窗口）

> ID：14671816
> 
> 赞同：1
> 
> 时间：2013-02-03T11:08:51.980
> 
> 标签：jquery, popover, raty

我正在使用引导`popover`程序`jquery-raty`。我有`hidden`div 在带有 JS 函数的 popover 上显示它们`content:`。我想更新隐藏 div 中的一些属性。假设我`data-rating`在隐藏的 div 中有属性。我想更新`data-rating`价值。我正在使用以下语句。

```
('#hidden_div_1`).data('rating', '25'); 
```

当我打印数据属性时，`console.log($('#hidden_div_1').data('rating'));`我得到`25`了正确的。但是，当我再次将鼠标悬停在特定对象上以显示弹出框时，我得到`old`了属性值。值为`destroying when popover disappeared`。我不知道为什么。有人帮忙吗？

这是我的[完整 jquery 代码](http://dpaste.org/eqLv9/)。这是小[jsfiddle](http://jsfiddle.net/KZBW6/4/)

谢谢

编辑1：`$('#hidden_div_1').data('rating', '25');`

编辑2：这很奇怪。`data-rating`值不变。我已经附加了`console.log`输出。

![控制台日志](../Images/be20b5fbf232ba94ecc4db517ab16e65.png)

代码 >

```
$('.link-container a').popover({
        content : function() { return $(this).siblings('.popover-content').html(); },
        trigger: 'click',
        html: true
    }).click(function(){
      $('.ratings').raty({
        score: function() { return $(this).attr('data-rating'); },
        click: function(score, evt, data) {
            //alert(score);
            var currentId = $(this).attr('id');
            console.log($("#"+currentId).data('rating'));
            alert(currentId);
            $("#"+currentId).attr('data-rating', score);
            console.log($("#"+currentId).data('rating'));
            $("#"+currentId).data('rating', score);
            console.log($("#"+currentId).data('rating'));

        },
          path: '/static/img/rating/',
      });
    }); 
```

`alert(currentId);`打印`correct`标识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:33:59.970

**编辑**

我对此进行了更详细的研究，问题是您正在将内容传递给 Bootstrap 弹出窗口。

此 html 内容包含一个 ID（例如`#hidden_div_1`），但问题是您传递给 Bootstrap 弹出框的任何内容*都会在该弹出框中复制*。

换句话说，您最终会得到重复的 ID，而 JQuery 不知道您要引用什么元素。

所以解决的办法就是把数据信息放到容器div中（本例中`link-container`），像这样：

```
<div class="link-container" data-rating="1" data-price="10">
    <a href="#" data-title="Title 1" id="r1">Click Here</a>
    <div class="temp-popover-content hidden">
        <p> Click on following images</p>
        <div class="ratings"></div>
        <p>Some content 1</p>
    </div>
</div> 
```

然后你可以在不混淆 JQuery 的情况下针对这个链接容器存储数据，如下所示：

```
$('.link-container a').popover({
    content : function() { return $(this).siblings('.temp-popover-content').html(); },
    trigger: 'click',
    html: true
}).click(function(e) {
  // Added this because popovers get confused when more than one with a raty is open
  $('.link-container a').not(this).popover('hide');
  // storage refers to the link-container div
  var storage = $(this).parent();
  $('.ratings').raty({
        score: function() { return storage.data('rating'); },
        click: function(score, evt, data) {
            storage.data('rating', score);
            console.log("Data: "+storage.data('rating')); 
        }
  });
}); 
```

[小提琴在这里](http://jsfiddle.net/mccannf/Qf5uU/11/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:04:53.520

看来您缺少一个“$”。它应该是

```
$('#hidden_div_1').data('rating', '25'); 
```

# javascript - 具有多个条件的 Jquery 过滤器

> ID：14671821
> 
> 赞同：2
> 
> 时间：2013-02-03T11:10:30.900
> 
> 标签：javascript, jquery, jquery-ui, filtering, sliders

我正在尝试根据他们的影响过滤餐厅列表。我想使用滑块而不是印度/亚洲/墨西哥/欧洲美食等通用类别。

餐厅可能是

```
[{restaurant: 
    {name: 'The Apollon',
    thumb: 'apollon.jpg',
    type: 
        [{spicy: 5, type_id: 1}
        {garlic:3, type_id:2}
        {expensive:10, type_id:3}]}
}] 
```

然后，我将使用通用 JQuery UI 滑块并将每个滑块的值传递给隐藏元素。

这是我完全被困住的地方。我可以通过使用类而不是 JSON( .nospice .somespice .spicy ) 并执行一个滑块来使其在一个滑块上工作`if (value >= 7) {$('.spicy').show();}`，但我不确定如何进行更高级的查询`(if x = >=7 AND y = >=3 AND z = >=5)`

有人想在这里向正确的方向轻推我吗？我需要阅读什么。如果我以一种非常错误的方式来解决这个问题，请告诉我。

jsfiddle：http: [//jsfiddle.net/techii/9e2cJ/](http://jsfiddle.net/techii/9e2cJ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:19:17.063

jQuery 有一个[`.filter`](http://api.jquery.com/filter/)方法。我还建议您使用 div 存储餐厅对象，[`.data`](http://api.jquery.com/jQuery.data/)用于存储餐厅名称并使用其 div 键入：

```
$(".restaurants > div").filter(function(){
   var info = $(this).data("info");
   // Some code to extract things like spicyness, expensiveness
   // Also some code to get the slider values...
   if (spicynessSliderValue <= spicyness && expensivenessSliderValue <= expensiveness)
   {
       return true;
   }
}).show(); 
```

但是，在您的情况下，我建议使用[`$.each`](http://api.jquery.com/jQuery.each/)：

```
$(".restaurants > div").each(function(){
   ...
   var isMatch = picynessSliderValue <= spicyness && expensivenessSliderValue <= expensiveness;
   $(this).toggle(isMatch); // like .show or .hide, but takes a boolean
}) 
```

# commit - 代码 255：提交 .mdf、.ldf 数据库文件时，进程无法访问该文件

> ID：14671835
> 
> 赞同：0
> 
> 时间：2013-02-03T11:11:52.573
> 
> 标签：commit, dvcs, tortoisehg

我使用 mercurial 作为我的 DVCS 和 tortoiseHg。当我尝试提交 .mdf 和 .ldf 文件时，我得到了错误：

```
trouble committing "project root"/App_Data/WebStore.mdf!
terminated: "full path"/App_Data/WebStore.mdf: The process can not get access to the file
[command returned code 255 Sun Feb 03 13:57:29 2013] 
```

我提交了数百次这些文件，但现在收到此错误。不幸的是，我不记得我做了什么。

关于什么可以触发这种行为的任何想法？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:55:29.477

检查进程，该进程打开并锁定了 WebStore.mdf。保存工作并重新启动？

# android - 使用 logcat 跳转到错误

> ID：14671842
> 
> 赞同：-1
> 
> 时间：2013-02-03T11:12:34.950
> 
> 标签：android, logcat

我开发安卓应用。

我对 LogCat 有些困惑。

如果我的应用程序强制关闭，有时我无法准确判断错误在哪里。有什么方法或捷径可以准确地知道我们的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:13:50.727

如果您正在开发应用程序，您应该了解 logcat 以了解`error`. 它给出了错误的完整跟踪。( `Exception name and line no etc.`)

如果不了解 logcat，您将无法在 android 中制作应用程序。

第二件事：如果您已经开发了应用程序，分布在市场上并且用户在您的应用程序中存在问题。要了解 logcat 或您可以使用的错误。

[阿克拉](http://code.google.com/p/acra/)

[错误感知](http://bugsense.com/)

# android - could not be able to work with ListActivity in android

> ID：14671850
> 
> 赞同：0
> 
> 时间：2013-02-03T11:13:28.903
> 
> 标签：android, listactivity

I want to make a `ListItem` selected as app starts and get the text/value of selected item,but I'm unable to do.

**Code**

```
public class MenuList extends ListActivity {

String[] classNames = {"MainActivity", "example"}; 
//private View currentSelectedView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(MenuList.this, android.R.layout.simple_list_item_1, classNames));

}   
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);      
    String itemText= classNames[position];

    Toast.makeText(MenuList.this, itemText, Toast.LENGTH_LONG).show();      
}       
  } 
```

through this I get the text/value of listItem but Im unable to make a listItem pre-selected. can any-one tell me how to do so..?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:17:46.520

像这样将选择器设置为`ListView`添加`android:background="@drawable/list_bg"`到 Activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/list_bg" >

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</LinearLayout> 
```

`list_bg.xml`并像这样在你的drawable中创建

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/grey" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@color/blue" android:state_pressed="true"/>
    <item android:drawable="@color/blue" android:state_pressed="false" android:state_selected="true"/>

</selector> 
```

# c++ - SetTimer function in a dll file

> ID：14671852
> 
> 赞同：0
> 
> 时间：2013-02-03T11:13:38.890
> 
> 标签：c++, plugins, dll

I'm writing a plugin for the musicplayer named MusicBee. The plugin is for the Logitech G keyboards LCD. Now I will look at buttons activity every 30ms so everyting is fast when pressing on it. I will use the setTimer function of windows.h but I can't get it to work in my dll file. Can someone help me with this little problem??

The code I have is (TimerProc function is a static function):

```
Logitech * Logitech::LogitechObject;

Logitech::Logitech():   stopthread(false), firstTime(true), position(0), duration(0)
{
    LogitechObject = this;

    SetTimer(NULL, 1, 30, &Logitech::TimerProc);
}

Logitech::~Logitech()
{
    stopthread = true;
    this->state = StatePlay::Undefined;
    timerThread.detach();
}

VOID CALLBACK Logitech::TimerProc(HWND hwnd, UINT uMsg, UINT_PTR idEvent,  DWORD dwTime)
{
    LogitechObject->time = 0;
    LogitechObject->m_lcd.SetProgressBarPosition(LogitechObject->progressbar, static_cast<FLOAT>(100));
    LogitechObject->m_lcd.Update();

    SetTimer(NULL, 1, 30, &Logitech::TimerProc);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:11:53.427

为了 SetTimer 工作，应用程序应该运行“消息泵”循环（`GetMessage()`/ `DispatchMessage()`）。没有它 WM_TIMER 消息将不会被传递，因此您的 TimerProc 将不会被调用。

改为使用`CreateTimerQueueTimer()`。

# php - 水平格式化由php生成的csv文件

> ID：14671854
> 
> 赞同：0
> 
> 时间：2013-02-03T11:14:12.730
> 
> 标签：php, csv

我编写了一个将 mysql 数据转换为 csv 文件的代码。问题是它水平显示结果为

```
日期作者喜欢评论`
2013 年 1 月 31 日 WTF 事实 211 3
2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23

日期作者喜欢评论`
2013 年 1 月 31 日 WTF 事实 211 3
2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23

```

但是我希望它垂直

```
日期作者喜欢评论`日期作者喜欢评论`
2013 年 1 月 31 日 WTF 事实 211 3 2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23 2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23 2013 年 1 月 31 日 WTF 事实 211 3
2013 年 1 月 31 日 WTF 事实 211 23 2013 年 1 月 31 日 WTF 事实 211 23
2013 年 1 月 31 日 WTF 事实 211 23 2013 年 1 月 31 日 WTF 事实 211 23

```

这是我的代码：

```
 <?php
      if(isset($_POST['submit'])):
        set_time_limit(99999999);
        ini_set('memory_limit', "9999M");
        $filename_csv = "export_".rand(1000000,9999999)."_".rand(1000000,9999999).".csv";
        $path = "serp_csvs_page/".$filename_csv;
        $fp = fopen($path, 'w');
        $page_ids = $_POST['page_id'];
        $date_from =  $_POST['date_from'];
        $date_to = $_POST['date_to'];

        foreach($page_ids as $page_id):
            $brline = array("\n");
            $page_name = get_page_name_by_id($page_id);
            $dates = checkCsvQuotes("DATE: FROM {$date_from} TO {$date_to}") ;
            $page_name = checkCsvQuotes("PAGE ID: {$page_name['page_id']}");
            $header = array($dates, "\n", $page_name);
            fputcsv($fp, $header);
            fputcsv($fp, $brline);
            $query = sprintf("SELECT post_date AS `DATE`, post_from AS `AUTHOR`, message AS `MESSAGE`, total_likes AS `TOTAL LIKES`, total_comments AS `TOTAL COMMENTS` FROM tbl_contents_pages WHERE `pid_id` = '$page_id' AND `post_date` >= '$date_from' AND `post_date` <= '$date_to'");
            $result = mysql_query($query, $con) or die(mysql_error($con));
            $rows = mysql_fetch_assoc($result);
            if ($rows) {
                $arr_key = array_keys($rows); 
                fputcsv($fp, $arr_key);
                while($rows = mysql_fetch_assoc($result))
                {
                    $date_row = checkCsvQuotes($rows['DATE']);
                    $author_row = checkCsvQuotes($rows['AUTHOR']);
                    $message_row = checkCsvQuotes($rows['MESSAGE']);
                    $likes_row = checkCsvQuotes($rows['TOTAL LIKES']);
                    $comments_row = checkCsvQuotes($rows['TOTAL COMMENTS']);
                    $arr_value = array();
                    $arr_value[] = $date_row;
                    $arr_value[] = $author_row;
                    $arr_value[] = $message_row;
                    $arr_value[] = $likes_row;
                    $arr_value[] = $comments_row;
                    //print_r($arr_value);
                    fputcsv($fp, $arr_value);
                }
            }
            else
            {
                $noData = array("DO RECORDS FOUND.");
                fputcsv($fp, $noData);
            }
            fputcsv($fp, $brline);
        endforeach;
        fclose($fp);
        echo "<a href=serp_csvs_page/".$filename_csv." class='btn btn-primary'> View File </a>";  
        endif;
      function get_page_name_by_id($id)
        {
            $query = mysql_query("SELECT page_id FROM tbl_pages WHERE `id` = '$id'");
            $result = mysql_fetch_assoc($query);
            return $result;
        }
    function checkCsvQuotes($string) 
    {
        if (strpos($string,'"') !== false) {
            return '"'.str_replace('"','""',$string).'"';
        } elseif (strpos($string,',') !== false) {
            return '"'.$string.'"';
        } else {
            return $string;
        }
    }
      ?> 
```

我不确定它是否可能，因为我是 csv 新手。如果你们对此有任何想法并与我分享，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:21:43.923

您需要继续扩展数组，而不是立即将元素吐出。我已经更改了您的代码以执行此操作，但由于我无法对其进行测试，因此它很可能无法正常工作。无论哪种方式，比较代码以了解需要做什么。

```
<?php
if(isset($_POST['submit'])):
    set_time_limit(99999999);
    ini_set('memory_limit', "9999M");
    $filename_csv = "export_".rand(1000000,9999999)."_".rand(1000000,9999999).".csv";
    $path = "serp_csvs_page/".$filename_csv;
    $fp = fopen($path, 'w');
    $page_ids = $_POST['page_id'];
    $date_from =  $_POST['date_from'];
    $date_to = $_POST['date_to'];

    $data_ar = array(); //create a "master" array
    $i = $j = 0;

    foreach($page_ids as $page_id):
        $brline = array("\n");
        $page_name = get_page_name_by_id($page_id);
        $dates = checkCsvQuotes("DATE: FROM {$date_from} TO {$date_to}") ;
        $page_name = checkCsvQuotes("PAGE ID: {$page_name['page_id']}");
        $header = array($dates, "\n", $page_name);
        fputcsv($fp, $header);
        fputcsv($fp, $brline);
        $query = sprintf("SELECT post_date AS `DATE`, post_from AS `AUTHOR`, message AS `MESSAGE`, total_likes AS `TOTAL LIKES`, total_comments AS `TOTAL COMMENTS` FROM tbl_contents_pages WHERE `pid_id` = '$page_id' AND `post_date` >= '$date_from' AND `post_date` <= '$date_to'");
        $result = mysql_query($query, $con) or die(mysql_error($con));
        $rows = mysql_fetch_assoc($result);
        if ($rows) {
            $arr_key = array_keys($rows); 
            fputcsv($fp, $arr_key);
            $i = 0; //set to 0 on each iteration over $page_ids
            while($rows = mysql_fetch_assoc($result))
            {
                $date_row = checkCsvQuotes($rows['DATE']);
                $author_row = checkCsvQuotes($rows['AUTHOR']);
                $message_row = checkCsvQuotes($rows['MESSAGE']);
                $likes_row = checkCsvQuotes($rows['TOTAL LIKES']);
                $comments_row = checkCsvQuotes($rows['TOTAL COMMENTS']);
                if ($j === 0) //note: this assumes all files have the same amount of data
                    $data_ar[$i] = array();
                $data_ar[$i][] = $date_row; //these will add to array data instead of creating new array rows
                $data_ar[$i][] = $author_row;
                $data_ar[$i][] = $message_row;
                $data_ar[$i][] = $likes_row;
                $data_ar[$i][] = $comments_row;
                //print_r($arr_value);
                $i++;
            }
        }
        else
        {
            $noData = array("DO RECORDS FOUND.");
            fputcsv($fp, $noData);
        }
        $j++;
    endforeach;
    for ($q = 0; $q < count($data_ar); $q++) { //insert data to file once the data has been gathered
        fputcsv($fp, $data_ar[$q]);
        fputcsv($fp, $brline);
    }
    fclose($fp);
    echo "<a href=serp_csvs_page/".$filename_csv." class='btn btn-primary'> View File </a>";  
    endif;
?> 
```

# asp.net-mvc - ?cdv parameter in ClientDependency framework breaks resource reference

> ID：14671856
> 
> 赞同：1
> 
> 时间：2013-02-03T11:14:29.920
> 
> 标签：asp.net-mvc, asp.net-mvc-3, client-dependency

In my ASP.NET MVC application I use [ClientDependency](http://clientdependency.codeplex.com/) framework to manage page dependencies of css and js.

For versioning client dependency framework adds query string paramter to a request. For example, the line in Razor:

```
Html.RequiresJs("http://cdn.jquerytools.org/1.2.7/tiny/jquery.tools.min.js", 5); 
```

results in a rendered html tag:

```
<script src="http://cdn.jquerytools.org/1.2.7/tiny/jquery.tools.min.js?cdv=1" type="text/javascript"></script> 
```

While this request works:

```
http://cdn.jquerytools.org/1.2.7/tiny/jquery.tools.min.js 
```

The one with

```
http://cdn.jquerytools.org/1.2.7/tiny/jquery.tools.min.js?cdv=1 
```

doesn't.

How can I configure CD not to alter the request uri?

# c++ - 更改另一个应用程序的速度

> ID：14671857
> 
> 赞同：1
> 
> 时间：2013-02-03T11:14:34.427
> 
> 标签：c++, windows

我将对此非常具体，这是一个真正的问题，我现在面临一个真正的问题。

我不想优化我的程序或我的代码，以使其运行得更快，事实并非如此。我必须编写一个程序来改变另一个程序的“速度”。

一个例子是 CE 'speedhack'，您选择一个目标程序并使其运行得更快或更慢，如果您在浏览器中玩 Flash 游戏，您可以减慢 Flash 插件的速度，从而使游戏运行得“更快”或“较慢”。

![在此处输入图像描述](../Images/a1f79599a170bd0a84b9f9163d2d951e.png)

我知道 CE 会将一个库加载到另一个程序中，并且最肯定的是该库会在 处创建一个线程`DllMain`，`DLL_PROCESS_ATTACH`这将改变程序中其他线程的“速度”。因此，在这种情况下，它甚至不会成为“其他”应用程序。

我想要的只是正确的方向，这个“速度”是如何改变的。请不要关闭我的问题，如果您不明白，请发表评论，我会提供必要的细节。我是一个真正的程序员，正在寻找一个真正的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:19:15.923

首先，这种“speedhack”*实际上*并没有让程序运行得更快。它只是通过挂钩（通过 dll 注入）来操纵程序使用的计时器。就像 Java`System.currentTimeMillis()`或 C++`time_t time; time(&time)`给出的值一样。更详细的解释可以在[Cheat Engine internals](http://wiki.cheatengine.org/index.php?title=Cheat_Engine%3aInternals#Speedhack)找到。

那么公式就是`returned_time = basetime+((currenttime-basetime)*speed_factor)`。

# c++ - 从 Boost 中提取 sublib 尽可能小

> ID：14671858
> 
> 赞同：3
> 
> 时间：2013-02-03T11:14:35.660
> 
> 标签：c++, boost, stl

Boost 是一个优秀的库，但有时添加整个库并不方便。所以我想提取Boost的一小部分，只提取必要的文件。

我知道 BCP.exe，但它没有按预期工作。BCP.exe 提取了太多不必要的文件。

**我使用 Visual C++ 2010，所以我不需要 Mac 或 Linux 文件。仅支持 Visual C++ 编译器即可。**

任何人都可以帮助我吗？例如，我只想使用 Boost::any，但是 bcp 提取以下文件列表：

```
\boost\any.hpp
\boost\config
\boost\config.hpp
\boost\current_function.hpp
\boost\detail
\boost\exception
\boost\mpl
\boost\non_type.hpp
\boost\preprocessor
\boost\static_assert.hpp
\boost\throw_exception.hpp
\boost\type.hpp
\boost\type_traits
\boost\version.hpp
\boost\config\abi
\boost\config\abi_prefix.hpp
\boost\config\abi_suffix.hpp
\boost\config\auto_link.hpp
\boost\config\compiler
\boost\config\no_tr1
\boost\config\platform
\boost\config\posix_features.hpp
\boost\config\requires_threads.hpp
\boost\config\select_compiler_config.hpp
\boost\config\select_platform_config.hpp
\boost\config\select_stdlib_config.hpp
\boost\config\stdlib
\boost\config\suffix.hpp
\boost\config\user.hpp
\boost\config\warning_disable.hpp
\boost\config\abi\borland_prefix.hpp
\boost\config\abi\borland_suffix.hpp
\boost\config\abi\msvc_prefix.hpp
\boost\config\abi\msvc_suffix.hpp
\boost\config\compiler\borland.hpp
\boost\config\compiler\clang.hpp
\boost\config\compiler\codegear.hpp
\boost\config\compiler\comeau.hpp
\boost\config\compiler\common_edg.hpp
\boost\config\compiler\compaq_cxx.hpp
\boost\config\compiler\cray.hpp
\boost\config\compiler\digitalmars.hpp
\boost\config\compiler\gcc.hpp
\boost\config\compiler\gcc_xml.hpp
\boost\config\compiler\greenhills.hpp
\boost\config\compiler\hp_acc.hpp
\boost\config\compiler\intel.hpp
\boost\config\compiler\kai.hpp
\boost\config\compiler\metrowerks.hpp
\boost\config\compiler\mpw.hpp
\boost\config\compiler\nvcc.hpp
\boost\config\compiler\pathscale.hpp
\boost\config\compiler\pgi.hpp
\boost\config\compiler\sgi_mipspro.hpp
\boost\config\compiler\sunpro_cc.hpp
\boost\config\compiler\vacpp.hpp
\boost\config\compiler\visualc.hpp
\boost\config\no_tr1\cmath.hpp
\boost\config\no_tr1\complex.hpp
\boost\config\no_tr1\functional.hpp
\boost\config\no_tr1\memory.hpp
\boost\config\no_tr1\utility.hpp
\boost\config\platform\aix.hpp
\boost\config\platform\amigaos.hpp
\boost\config\platform\beos.hpp
\boost\config\platform\bsd.hpp
\boost\config\platform\cray.hpp
\boost\config\platform\cygwin.hpp
\boost\config\platform\hpux.hpp
\boost\config\platform\irix.hpp
\boost\config\platform\linux.hpp
\boost\config\platform\macos.hpp
\boost\config\platform\qnxnto.hpp
\boost\config\platform\solaris.hpp
\boost\config\platform\symbian.hpp
\boost\config\platform\vms.hpp
\boost\config\platform\vxworks.hpp
\boost\config\platform\win32.hpp
\boost\config\stdlib\dinkumware.hpp
\boost\config\stdlib\libcomo.hpp
\boost\config\stdlib\libcpp.hpp
\boost\config\stdlib\libstdcpp3.hpp
\boost\config\stdlib\modena.hpp
\boost\config\stdlib\msl.hpp
\boost\config\stdlib\roguewave.hpp
\boost\config\stdlib\sgi.hpp
\boost\config\stdlib\stlport.hpp
\boost\config\stdlib\vacpp.hpp
\boost\detail\workaround.hpp
\boost\exception\detail
\boost\exception\exception.hpp
\boost\exception\detail\attribute_noreturn.hpp
\boost\mpl\aux_
\boost\mpl\bool.hpp
\boost\mpl\bool_fwd.hpp
\boost\mpl\int.hpp
\boost\mpl\integral_c.hpp
\boost\mpl\integral_c_fwd.hpp
\boost\mpl\integral_c_tag.hpp
\boost\mpl\int_fwd.hpp
\boost\mpl\aux_\adl_barrier.hpp
\boost\mpl\aux_\config
\boost\mpl\aux_\integral_wrapper.hpp
\boost\mpl\aux_\lambda_support.hpp
\boost\mpl\aux_\na_fwd.hpp
\boost\mpl\aux_\nttp_decl.hpp
\boost\mpl\aux_\preprocessor
\boost\mpl\aux_\static_cast.hpp
\boost\mpl\aux_\template_arity_fwd.hpp
\boost\mpl\aux_\yes_no.hpp
\boost\mpl\aux_\config\adl.hpp
\boost\mpl\aux_\config\arrays.hpp
\boost\mpl\aux_\config\ctps.hpp
\boost\mpl\aux_\config\gcc.hpp
\boost\mpl\aux_\config\intel.hpp
\boost\mpl\aux_\config\lambda.hpp
\boost\mpl\aux_\config\msvc.hpp
\boost\mpl\aux_\config\nttp.hpp
\boost\mpl\aux_\config\overload_resolution.hpp
\boost\mpl\aux_\config\preprocessor.hpp
\boost\mpl\aux_\config\static_constant.hpp
\boost\mpl\aux_\config\ttp.hpp
\boost\mpl\aux_\config\workaround.hpp
\boost\mpl\aux_\preprocessor\enum.hpp
\boost\mpl\aux_\preprocessor\params.hpp
\boost\preprocessor\arithmetic
\boost\preprocessor\cat.hpp
\boost\preprocessor\comma_if.hpp
\boost\preprocessor\config
\boost\preprocessor\control
\boost\preprocessor\debug
\boost\preprocessor\detail
\boost\preprocessor\facilities
\boost\preprocessor\inc.hpp
\boost\preprocessor\list
\boost\preprocessor\logical
\boost\preprocessor\punctuation
\boost\preprocessor\repeat.hpp
\boost\preprocessor\repetition
\boost\preprocessor\tuple
\boost\preprocessor\variadic
\boost\preprocessor\arithmetic\inc.hpp
\boost\preprocessor\config\config.hpp
\boost\preprocessor\control\expr_iif.hpp
\boost\preprocessor\control\if.hpp
\boost\preprocessor\control\iif.hpp
\boost\preprocessor\debug\error.hpp
\boost\preprocessor\detail\auto_rec.hpp
\boost\preprocessor\detail\check.hpp
\boost\preprocessor\detail\dmc
\boost\preprocessor\detail\is_binary.hpp
\boost\preprocessor\detail\dmc\auto_rec.hpp
\boost\preprocessor\facilities\empty.hpp
\boost\preprocessor\facilities\overload.hpp
\boost\preprocessor\list\adt.hpp
\boost\preprocessor\list\for_each_i.hpp
\boost\preprocessor\logical\bool.hpp
\boost\preprocessor\logical\compl.hpp
\boost\preprocessor\punctuation\comma.hpp
\boost\preprocessor\punctuation\comma_if.hpp
\boost\preprocessor\repetition\detail
\boost\preprocessor\repetition\for.hpp
\boost\preprocessor\repetition\repeat.hpp
\boost\preprocessor\repetition\detail\dmc
\boost\preprocessor\repetition\detail\edg
\boost\preprocessor\repetition\detail\for.hpp
\boost\preprocessor\repetition\detail\msvc
\boost\preprocessor\repetition\detail\dmc\for.hpp
\boost\preprocessor\repetition\detail\edg\for.hpp
\boost\preprocessor\repetition\detail\msvc\for.hpp
\boost\preprocessor\tuple\eat.hpp
\boost\preprocessor\tuple\elem.hpp
\boost\preprocessor\tuple\rem.hpp
\boost\preprocessor\tuple\to_list.hpp
\boost\preprocessor\variadic\elem.hpp
\boost\preprocessor\variadic\size.hpp
\boost\type_traits\broken_compiler_spec.hpp
\boost\type_traits\config.hpp
\boost\type_traits\detail
\boost\type_traits\ice.hpp
\boost\type_traits\integral_constant.hpp
\boost\type_traits\is_lvalue_reference.hpp
\boost\type_traits\is_reference.hpp
\boost\type_traits\is_rvalue_reference.hpp
\boost\type_traits\msvc
\boost\type_traits\remove_reference.hpp
\boost\type_traits\detail\bool_trait_def.hpp
\boost\type_traits\detail\bool_trait_undef.hpp
\boost\type_traits\detail\ice_and.hpp
\boost\type_traits\detail\ice_eq.hpp
\boost\type_traits\detail\ice_not.hpp
\boost\type_traits\detail\ice_or.hpp
\boost\type_traits\detail\template_arity_spec.hpp
\boost\type_traits\detail\type_trait_def.hpp
\boost\type_traits\detail\type_trait_undef.hpp
\boost\type_traits\detail\wrap.hpp
\boost\type_traits\detail\yes_no_type.hpp
\boost\type_traits\msvc\remove_reference.hpp
\boost\type_traits\msvc\typeof.hpp 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T11:21:03.227

BCP 运行正常，如果您检查“任何”库的包含层次结构，您会发现上面列出的文件。好像有点过分了。

另一种（但速度慢得多）的方法是创建一个空的包含目录并添加您需要的最小头文件集。然后只需跟踪编译器错误并添加编译器抱怨丢失的每个头文件。我在 C++ Boost 项目中使用这种方法取得了一些成功。

# button - 如何将数组元素分配给字符串

> ID：14671861
> 
> 赞同：0
> 
> 时间：2013-02-03T11:15:32.820
> 
> 标签：button, nsstring, uipickerview, title

嗨，我对 iO 编码很陌生，无法让它工作。我尝试根据所选 PickerView 的数组项更改按钮的标签。

```
(void)pickerView:(UIPickerView *)pickerView
didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
{
NSString *buttonLable = [_characters objectAtIndex:[pickerView selectedRowInComponent:0]];
[titleButton setTitle:(NSString *)buttonLable forState:UIControlStateNormal];
} 
```

我认为我定义 buttonLable 的方式有问题，因为它说“@variable 不是 NSString”。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:22:29.910

您的代码在语法上是正确的，因此在您运行代码时会输出错误消息。
原因是您的数组的内容`_characters`。由于您只能将 NSString 对象分配给`buttonLable`，因此存储在 index 处的数组元素`[pickerView selectedRowInComponent:0]`具有其他类。只需在分配语句处设置断点即可查找此类。

# xml - Transforming XML into MS Excel XML - formula syntax

> ID：14671864
> 
> 赞同：3
> 
> 时间：2013-02-03T11:16:03.003
> 
> 标签：xml, xslt, excel-formula

I am transforming some XML to view in MS Excel. There is a very good reference on how to create the schema - [http://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx). This [blog](http://www.openscope.net/2010/02/09/transforming-xml-into-ms-excel-xml/) is also useful.

I am having trouble inserting a formula into a cell, so: `<Cell ss:Index="2" ss:Formula="=SUM(R[-3]C[0]:R[-1]C[0])">` `<Data ss:Type="Number"></Data>` `</Cell>` is pretty straightforward. This will sum the values in the row 3 rows above to the row 1 above.

However, the formula I need (in A1 style format, rather than R1C1) is **`=SUMIF(A:A,"Assignments",B:B)`**.

I have tried many options, including

*   `ss:Formula="=SUMIF(C[-1]:C[-1],Assignments,C[0]:C[0])"` but the definition of the cell equals **`=SUMIF(A:A,Assignments,B:B)`** in this case.

*   `ss:Formula="=SUMIF(C[-1]:C[-1],"Assignments",C[0]:C[0])"` but the workbook becomes corrupt and won't open.

*   `ss:Formula="=SUMIF(C[-1]:C[-1],'Assignments',C[0]:C[0])"` but the definition of the cell equals **`0`** in this case.

The quotation marks are causing a problem. Does anyone know the correct syntax to get the required formula insert into a cell?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:39:54.257

答案是要注意 XML 文档转义字符。 [我需要在 XML 文档中转义哪些字符？](https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters)

所需代码中的行是：

`ss:Formula="=SUMIF(C1:C1, &quot;Assignments&quot;,C[0]:C[0])"`

# php - 保存更改多个txt

> ID：14671865
> 
> 赞同：0
> 
> 时间：2013-02-03T11:16:10.803
> 
> 标签：php, html, forms, button, save

我的 PHP 代码有一些问题。我想加载两个`.txt`以使用浏览器（chrome，即任何）进行编辑，并通过一个按钮保存更改。到现在为止，我可以用多个按钮来完成，但是如果你忘记保存一个更改，那会很冒险，因为你会丢失它。

这是我的代码：

```
<?php
$fn = "../txt/example.txt";

if (isset($_POST['agenda1a']))
{
    $content = stripslashes($_POST['agenda1a']);
    $fp = fopen($fn,"w") or die ("Error");
    fputs($fp,$content);
    fclose($fp) or die ("Error");
}
?>
  <div class="editor">
    <div class="editor_titulo">Agenda 1</div>
    <form action="<?php echo $_SERVER["PHP_SELF"] ?>" method="post">
      <textarea name="agenda1a" cols="55" rows="25" class="editor_texto"><?php readfile($fn); ?>
</textarea>
      <input name="submit" type="submit" class="btn_entrar" id="btn_guardar" value="  Guardar este menú  ">
    </form>
  </div>

  <?php
$fn = "../txt/example2.txt";

if (isset($_POST['agenda1b']))
{
    $content = stripslashes($_POST['agenda1b']);
    $fp = fopen($fn,"w") or die ("Error");
    fputs($fp,$content);
    fclose($fp) or die ("Error");
}
?>
  <div class="editor">
    <div class="editor_titulo">Agenda 2</div>
    <form action="<?php echo $_SERVER["PHP_SELF"] ?>" method="post">
      <textarea name="agenda1b" cols="55" rows="25" class="editor_texto"><?php readfile($fn); ?>
</textarea>
      <input type="submit" class="btn_entrar" id="btn_guardar" value="  Guardar este menú  ">
    </form>
  </div> 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:24:33.227

您需要将`<textarea>`元素放在相同的`<form>`. 这可以使用您提供的代码来完成，但您可能必须进行一些样式更改，因为其中一个`.editor`元素已被删除。

```
<?php
$fn1 = "../txt/example.txt";

if (isset($_POST['agenda1a']))
{
    $content = stripslashes($_POST['agenda1a']);
    $fp = fopen($fn,"w") or die ("Error");
    fputs($fp,$content);
    fclose($fp) or die ("Error");
}

$fn2 = "../txt/example2.txt";

if (isset($_POST['agenda1b']))
{
    $content = stripslashes($_POST['agenda1b']);
    $fp = fopen($fn,"w") or die ("Error");
    fputs($fp,$content);
    fclose($fp) or die ("Error");
}
?>
  <div class="editor">
    <div class="editor_titulo">Agenda 1</div>
    <form action="<?php echo $_SERVER["PHP_SELF"] ?>" method="post">
      <textarea name="agenda1a" cols="55" rows="25" class="editor_texto"><?php readfile($fn1); ?>
</textarea>

    <div class="editor_titulo">Agenda 2</div>
      <textarea name="agenda1b" cols="55" rows="25" class="editor_texto"><?php readfile($fn2); ?>
</textarea>
      <input type="submit" class="btn_entrar" id="btn_guardar" value="  Guardar este menú  ">
    </form>
  </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:21:56.033

当然，将所有字段（`<textarea>`元素）放入一个`<form>`标签中，并有一个保存按钮。

完成此操作后，您可以合并代码来保存这两个文件。请注意，您一次只能从一个`<form>`中获取发布的值，这就是需要合并代码的原因。

像这样的东西就足够了：

```
<?php
$file_one = "../txt/example.txt";
$file_two = "../txt/example2.txt";

$file_one_content = file_get_contents($file_one);
$file_two_content = file_get_contents($file_two);

if (isset($_POST['submit']))
{
    // Save the files
    $file_one_content = stripslashes($_POST['agenda1a']);
    file_put_contents($file_one, $file_one_content);
    $file_two_content = stripslashes($_POST['agenda1b']);
    file_put_contents($file_one, $file_two_content);
}
?>

<form action="<?php echo $_SERVER["PHP_SELF"] ?>" method="post">
  <div class="editor">
    <div class="editor_titulo">Agenda 1</div>
      <textarea name="agenda1a" cols="55" rows="25" class="editor_texto"><?php echo $file_one_content ?></textarea>
      <input name="submit" type="submit" class="btn_entrar" id="btn_guardar" value="  Guardar este menú  ">
  </div>
  <div class="editor">
    <div class="editor_titulo">Agenda 2</div>
      <textarea name="agenda1b" cols="55" rows="25" class="editor_texto"><?php echo $file_two_content ?></textarea>
      <input type="submit" class="btn_entrar" id="btn_guardar" value="  Guardar este menú  ">
  </div>
</form> 
```

*（注意：上面的代码使用`file_get_contents`/`file_put_contents`所以你可以在 1 行代码中打开/保存，并且只检查`$_POST['submit']`简单性）*

# android - 添加 EWS Java API

> ID：14671868
> 
> 赞同：1
> 
> 时间：2013-02-03T11:16:32.837
> 
> 标签：android, exchangewebservices, ewsjavaapi

我正在尝试将 EWS Java API 1.2 添加到我的 android 应用程序中。我遵循了[此链接中给出的相同程序](https://android.stackexchange.com/questions/28952/android-mail-client-using-exchange-web-services)

我生成了 jar 文件并将其添加到我的 android 库中。但是当我尝试从这个 jar 文件中访问任何类时，我得到了

```
 noclassdefinition found exception 
```

我还尝试通过从库中删除 JRE 并添加 android jars 来为 android 构建 java 库。但这里也有同样的错误。请帮忙 。我真的被困住了。什么是正确的方法。我做了很多搜索，但没有得到任何正确的帮助。

[http://geekswithblogs.net/cyberycon/archive/2011/05/17/using-external-libraries-with-android.aspx](http://geekswithblogs.net/cyberycon/archive/2011/05/17/using-external-libraries-with-android.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T01:09:09.357

如果您的目标是 Office 365 上的 Exchange Online，则应考虑适用于 Android 的 OData API 的客户端 SDK： [https ://github.com/OfficeDev/Office-365-SDK-for-Android](https://github.com/OfficeDev/Office-365-SDK-for-Android)

# sql - sql server 查询 - 在 n 次迭代后进行数据透视

> ID：14671878
> 
> 赞同：0
> 
> 时间：2013-02-03T11:17:39.467
> 
> 标签：sql, sql-server

我有一个有 2 列的表：

```
'Employee'               'ReportsTo'
1                            
2                            1
3                            1
4                            2
5                            2
6                            3
7                            3
8                            4
9                            4
10                           5 
```

我想这样返回：

```
'Employee' 'Reporting Officer'
1           2,3,4,5,6,7,8,9,10
2           4,5,8,9,10
3           6,7
4           8,9
5           10
6
7
8
9
10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T12:06:47.620

这将适用于您的示例表，但不适用于这样的表（需要更复杂的查询）：

```
Employee  ReportsTo
--------  ---------
12        13
13        12 
```

它不被称为“n 次迭代后的枢轴”。

```
with cte as (
  SELECT 1 Employee,0 ReportsTo UNION ALL
  SELECT 2,1  UNION ALL
  SELECT 3,1 UNION ALL
  SELECT 4,2 UNION ALL
  SELECT 5,2 UNION ALL
  SELECT 6,3 UNION ALL
  SELECT 7,3 UNION ALL
  SELECT 8,4 UNION ALL
  SELECT 9,4 UNION ALL
  SELECT 10,5
),

cte2 as (
  SELECT ReportsTo e,Employee ro FROM cte
  UNION ALL
  SELECT a.e,b.Employee FROM cte2 a JOIN cte b ON a.ro = b.ReportsTo
)

SELECT
  Employee,
  ISNULL(LEFT(ro,LEN(ro)-1),'') as "Reporting Officer"
FROM (
  SELECT
    Employee,
    REPLACE(REPLACE((
      SELECT ro FROM cte2 x WHERE x.e=cte.Employee ORDER BY 1 FOR XML PATH('')
    ),'<ro>',''),'</ro>',',') ro
  FROM cte
) a 
```

[sqlfile](http://sqlfiddle.com/#!3/d41d8/8416)

# ruby - enum#with_object 与 enum#each_with_object 有何不同？

> ID：14671881
> 
> 赞同：3
> 
> 时间：2013-02-03T11:18:15.083
> 
> 标签：ruby, ruby-1.9

文档说：

> [`enum#each_with_object :-`](http://apidock.com/ruby/v1_9_3_125/Enumerator/each_with_object)
> 
> *使用任意对象 obj 迭代每个元素的给定块，并返回 obj*

> [`enum#with_object:-`](http://apidock.com/ruby/v1_9_3_125/Enumerator/with_object)
> 
> *使用任意对象 obj 迭代每个元素的给定块，并返回 obj*

但是当我在这两种结构上尝试以下操作时，一个给了我预期的输出，但其他的没有。所以我怀疑这两种结构之间存在差异。

### 使用`each_with_object`

```
%w(foo bar).each_with_object({}) { |str, hsh| hsh[str] = str.upcase }
=> {"foo"=>"FOO", "bar"=>"BAR"} 
```

*在这里成功！*

### 使用`with_object`

```
%w(foo bar).with_object({}) { |str, hsh| hsh[str] = str.upcase }
 => NoMethodError: undefined method `with_object' for ["foo", "bar"]:Array
    from (irb):1
    from C:/Ruby193/bin/irb:12:in `<main>' 
```

*这里失败了！*

那么这两种方法有什么区别呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T12:09:19.103

`with object`仅适用于枚举器，这意味着您必须将其链接到返回一个的东西上。例如。

```
%w(foo bar).each.with_object({}) { |str, h| h[str] = str.upcase }

%w(foo bar).detect.with_object(obj) { ... } 
```

所以，如果你不给它一个块，你可以调用`with_object`任何返回枚举器的东西（例如，，，，`map`... `reduce`）。这包括混合在[Enumerable](http://ruby-doc.org/core-1.9.3/Enumerable.html)中的任何内容。`detect``find_all`

`each_with_object`本质上是`each.with_object`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T12:09:41.427

`each`返回一个枚举器对象。

```
%w(foo bar).each.class
=> Enumerator 
```

因此，对于第一种情况，数组将`Enumerator`首先转换为，然后在`with_object`.

如果您希望第二种情况有效，则必须将数组转换为 Enumerator。您可以使用`.to_enum`、`.each`或`.map`来转换数组。

```
%w(foo bar).map.with_object({}) { |str, hsh| hsh[str] = str.upcase }
=> {"foo"=>"FOO", "bar"=>"BAR"} 
```

更多细节：[枚举器](http://apidock.com/ruby/Enumerator)

# iphone - 在命令行上从 xcodebiuld 构建时，KIF 自动化测试的不同结果？

> ID：14671887
> 
> 赞同：1
> 
> 时间：2013-02-03T11:18:48.027
> 
> 标签：iphone, ios, automated-tests, kif

我在我的 iPhone 项目中安装并运行了 KIF，并且我创建了一堆测试，当我通过 XCode 运行时这些测试完美通过。当我在命令行上使用 xcodebuild 构建相同的项目和目标时，一些从 UIPickerView 中挑选项目的测试以下列方式失败：

```
2013-02-02 18:46:55.950 SmartRoamAcceptanceTests[31224:c07] PASS (0.84s): Tap view with accessibility label "Choose Country"
2013-02-02 18:46:55.978 SmartRoamAcceptanceTests[31224:c07] FAIL (0.03s): Select the "United States (+1)" item from the picker
2013-02-02 18:46:55.979 SmartRoamAcceptanceTests[31224:c07] FAILING ERROR: Error Domain=KIFTest Code=0 "Failed to find picker view value with title "United States (+1)"" UserInfo=0xd01c160 {NSLocalizedDescription=Failed to find picker view value with title "United States (+1)"} 
```

如果从 XCode IDE 构建，这些测试可以完美运行。有什么不同？

# jquery - 根据浏览器窗口大小调整不同大小的图像

> ID：14671888
> 
> 赞同：1
> 
> 时间：2013-02-03T11:18:49.143
> 
> 标签：jquery, browser, resize

我在我的网站上并排放置了三个不同大小的图像，并希望使用 jQuery 根据浏览器大小调整它们的大小。

```
$(window).bind('load resize', function() {
    var windowheight = $(window).height();
    $('#pictures img').each(function() {
        $(this).height(windowheight);
    });
}); 
```

在 CSS 文件中，我有：

```
#pictures img {
    width:auto;
    max-height:100%;
} 
```

如果每个图像具有相同的高度，则此代码将是正确的，但考虑到所有三个图像具有不同的高度，我不知道将哪个值传递给 height() 函数。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:40:30.897

你可以得到屏幕的高度和宽度（解释[在这里](https://stackoverflow.com/questions/10022584/can-you-get-a-users-screen-size-resolution-using-javascript)和[这里](https://stackoverflow.com/questions/2242086/how-to-detect-the-screen-resolution-with-javascript)）然后你可以使用一些简单的数学来重新调整你的图片大小。就像是

```
picture_new_height = (actual_picture_height) * (window_height / screen_height) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:31:30.667

在你的 CSS

```
img {max-width:100%;max-height:100%;} 
```

然后您还以 % 设置容器尺寸，因此实际上您不需要 javascript

NB1：完美渲染的“真实”调整大小应该发生在服务器端；但这会很慢

NB2：现在有用于客户端调整大小的现代浏览器解决方案（它比设置高度更复杂......）

# python - 如何在Python中将值插入数组中的特定单元格？

> ID：14671890
> 
> 赞同：0
> 
> 时间：2013-02-03T11:19:12.097
> 
> 标签：python, arrays

我需要从用户那里得到 10 个数字，然后计算每个数字出现在所有数字中的次数。

我写了下面的代码：

```
# Reset variable
aUserNum=[]
aDigits=[]

# Ask the user for 10 numbers
for i in range(0,2,1):
    iNum = int(input("Please enter your number: "))
    aUserNum.append(iNum)

# Reset aDigits array
for i in range(0,10,1):
    aDigits.append(0)

# Calc the count of each digit
for i in range(0,2,1):
    iNum=aUserNum[i]
    print("a[i] ",aUserNum[i])
    while (iNum!=0):
        iLastNum=iNum%10
        temp=aDigits[iLastNum]+1
        aDigits.insert(iLastNum,temp)
        iNum=iNum//10

print(aDigits) 
```

从结果中，我可以看到温度不起作用。当我写这个 temp=aDigits[iLastNum]+1 时，不应该说单元格 iLastNum 中的数组会得到单元格 +1 的值吗？

谢谢， 亚尼夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:47:28.213

您可以连接所有输入以获取单个字符串并将其与`collections.Counter()`

```
import collections
ct = collections.Counter("1234567890123475431234")
ct['3'] == 4
ct.most_common() # gives a list of tuples, ordered by times of occurrence 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:44:18.243

你可以通过两种方式做到这一点。可以使用字符串，也可以使用整数。

```
aUserNum = []

# Make testing easier
debug = True

if debug:
    aUserNum = [55, 3303, 565, 55665, 565789]
else:
    for i in range(10):
        iNum = int(input("Please enter your number: "))
        aUserNum.append(iNum) 
```

使用字符串，我们将所有的整数变成一个大字符串，然后计算“0”出现的次数，然后计算“1”的出现次数，等等。

```
def string_count(nums):
    # Make a long string with all the numbers stuck together
    s = ''.join(map(str, nums))

    # Make all of the digits into strings
    n = ''.join(map(str, range(10)))

    aDigits = [0,0,0,0,0,0,0,0,0,0]

    for i, x in enumerate(n):
        aDigits[i] = s.count(x)

    return aDigits 
```

对于整数，我们可以使用可爱的整数除法技巧。此代码是为 Python 2.7 编写的，由于“假设浮动”更改，因此不适用于 3.x。为了解决这个问题，更改`x /= 10`to`x //= 10`并将打印语句更改为打印函数。

```
def num_count(nums):
    aDigits = [0,0,0,0,0,0,0,0,0,0]

    for x in nums:
        while x:
            # Add a count for the digit in the ones place
            aDigits[x % 10] += 1

            # Then chop off the ones place, until integer division results in 0
            # and the loop ends
            x /= 10

    return aDigits 
```

这些输出相同。

```
print string_count(aUserNum)
print num_count(aUserNum)
# [1, 0, 0, 3, 0, 9, 4, 1, 1, 1] 
```

为了更漂亮的输出，这样写。

```
print list(enumerate(string_count(aUserNum)))
print list(enumerate(num_count(aUserNum)))
# [(0, 1), (1, 0), (2, 0), (3, 3), (4, 0), (5, 9), (6, 4), (7, 1), (8, 1), (9, 1)] 
```

# c - 编写 GSM 调制解调器驱动程序？

> ID：14671892
> 
> 赞同：10
> 
> 时间：2013-02-03T11:19:16.280
> 
> 标签：c, gsm, modem, pic, gprs

我一直在开发一个应用程序，它使用 GSM 调制解调器来做两件事之一；通过向服务器发送 GET 请求或向服务器发送数据（使用 UDP），使用内置 HTTP 堆栈检查其状态。我已经尝试了几种不同的方法来尽可能地保持它的可靠性，我终于准备好寻求帮助了。

我的应用程序是为 SIMCOM908 模块和 PIC18 平台编写的（我使用 PIC18 Explorer 进行开发）。

所以问题有时是调制解调器忙于做某事，并错过了一个命令。作为人类，我会看到并重新发送命令。为我的 MCU 添加超时和重新发送功能不是问题。

问题是调制解调器在不同事件之后发送未经请求的响应。当调制解调器更改注册状态（与手机信号塔）时，它会`+CGREG: 1, ...`在 GPS 就绪时或当 GPS 就绪时做出响应`GPS Ready`。这些响应可以随时发生，包括在命令中间（如创建 IP 连接）。

这是一个问题，因为我还没有想到解决这个问题的方法。我的应用程序需要发送一个命令（例如连接到服务器，`AT+CIPSTART="UDP","example.com",5000`）此命令将响应“OK”，然后当命令完成时“CONNECT OK”。但是，我需要能够对许多其他可能的响应做出反应，而我还没有找到一种方法来做到这一点。我需要用我的代码做什么；等待调制解调器的响应，检查响应，根据该响应执行操作？

我的代码有限（作为一个 8 位微控制器！）并且希望将重复保持在最低限度。如何编写一个响应函数，从 GSM 模块（请求或现在）获取响应，然后让我的程序的其余部分知道发生了什么？

理想情况下，我想对这些响应做点什么。就像保持内部状态（当我听到时`GPS Ready`，我知道我可以为 GPS 等供电。

也许我应该考虑一些事情，或者也许有一个开源项目已经解决了这个问题？

这是我到目前为止所拥有的：

```
/* Command responses */
enum {
    // Common
    OK = 0,
    ERROR,
    TIMEOUT,
    OTHER,
    // CGREG
    NOT_REGISTERED,
    // CGATT
    NOT_ATTACHED,
    // Network Status
    NO_NETWORK,
    // GPRS status
    NO_ADDRESS,
    // HTTP ACTION
    NETWORK_ERROR,
    // IP Stack State
    IP_INITIAL,
    IP_STATUS,
    IP_CONFIG,
    UDP_CLOSING,
    UDP_CLOSED,
    UDP_CONNECTING
} gsmResponse;

int gsm_sendCommand(const char * cmd) {
    unsigned long timeout = timer_getCurrentTime() + 5000;

    uart_clearb(GSM_UART); // Clear the input buffer
    uart_puts(GSM_UART, cmd); // Send the command to the module
    while (strstr(bf2, "\r") == NULL) { // Keep waiting for a response from the module
        if (timeout < timer_getCurrentTime()) { // Check we haven't timed out yet
            printf("Command timed out: %s\r\n", cmd);
            return TIMEOUT;
        }
    }
    timer_delay(100); // Let the rest of the response be received.

    return OK;
}

int gsm_simpleCommand(const char * cmd) {
    if (gsm_sendCommand(cmd) == TIMEOUT)
        return TIMEOUT;

    // Getting an ERROR response is quick, so if there is a response, this will be there
    if (strstr(bf2, "ERROR") != NULL)
        return ERROR;

    // Sometimes the OK (meaning the command ran) can take a while
    // As long as there wasn't an error, we can wait for the OK
    while (strstr(bf2, "OK") == NULL);
    return OK;
} 
```

简单命令是专门寻找`OK`或`ERROR`响应的任何 AT 命令。类似的东西`AT`。但是，我也将它用于更高级的命令，例如`AT+CPIN?`因为这意味着我将捕获整个响应，并且可以进一步搜索`+CPIN: READY`. 然而，这些都不是对主动回应的回应。实际上，`gsm_sendCommand()`当收到主动响应时，该函数会提前返回。

管理这种复杂的、偶尔不请自来的状态消息的好方法是什么？请注意，此应用程序是用 C 语言编写的，并且在 8 位微控制器上运行！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:56:16.403

必须在同一数据流中同时处理未经请求的消息以及对请求的响应是很困难的，因为您需要对传入流进行多路分解并将结果分派给适当的处理程序。它有点像中断处理程序，因为您必须放弃您正在做的事情并处理您不一定期望的其他信息。

一些模块有一个辅助串行端口，也可用于消息。如果这是可能的，您可能只会在一个串行端口上出现未经请求的消息，而主端口用于您的 AT 命令。这可能是不可能的，并且一些 GSM 模块将不支持辅助端口上的完整命令集。

也许更好的方法是禁用未经请求的消息。大多数命令要请求的所有状态。例如，在等待注册时，无需等待主动注册消息出现，只需轮询模块以了解当前注册状态。这使您始终处于控制之中，您只需处理刚刚发送的命令的响应。如果您正在等待多个事件，您可以在循环中轮询每个项目。这通常会使代码更简单，因为您一次只需要处理一个响应。缺点是您的响应时间受投票率的限制。

如果您打算继续使用未经请求的消息方法，我建议为未经请求的消息实施一个小队列。在等待对命令的响应时，如果响应与命令不匹配，只需将响应推送到队列中。然后，当您收到对 AT 命令的响应或超时时，您可以在之后处理未经请求的消息队列。

# android - android alertdialog builder未定义？

> ID：14671895
> 
> 赞同：0
> 
> 时间：2013-02-03T11:19:27.110
> 
> 标签：android, dialog, android-alertdialog

我现在正在制作一个绘图应用程序，用户可以在其中从图库中导入图片并进一步绘图。图片可以加载成功，东西可以绘制成功，但是我想进一步修改，因为当导入的文件尺寸大于屏幕尺寸时，它只会显示部分图像。

因此，我加载屏幕尺寸和导入文件尺寸，如果某些条件，它将弹出警报对话框，以便用户可以选择拉伸或通过填充最大宽度或高度来导入该图片，保持宽度：高度比例.

对于加载图片，它是在`ActivityA`调用一个方法`ActivityB (name as DrawView).`

## 问题：

alertdialog 强调`The constructor AlertDialog.Builder(DrawView) is undefined`了短语中的错误

```
new AlertDialog.Builder(this); 
```

我尝试将以上内容修改为

```
new AlertDialog.Builder(DrawView.this); 
```

但仍然失败。这怎么可能被修改？非常感谢！！！

## 编码：

```
 public void load_pic(String picturePath) // load a picture from gallery
   {   
       // get screen dimension first
       WindowManager wm = (WindowManager) context_new.getSystemService(Context.WINDOW_SERVICE);
       Display display = wm.getDefaultDisplay();
       int screenWidth = display.getWidth();
       int screenHeight = display.getHeight(); 

       Options op = new Options();
       op.inJustDecodeBounds = true;
       Bitmap pic_to_be_imported = BitmapFactory.decodeFile(picturePath, op);
       int x_pic_to_be_imported = op.outWidth;
       int y_pic_to_be_imported = op.outHeight;

       if ((x_pic_to_be_imported > screenWidth) || (y_pic_to_be_imported > screenHeight))
       {
              TextView myView2 = new TextView(context_new.getApplicationContext()); 
              myView2.setText(R.string.message_load_pic);
              myView2.setTextSize(15); 

              AlertDialog.Builder onBackBuilder = new AlertDialog.Builder(DoodleView.this);         
              onBackBuilder.setTitle(R.string.menuitem_on_load_pic);
              onBackBuilder.setView(myView2); 

              onBackBuilder.setCancelable(true);                   

              onBackBuilder.setPositiveButton(R.string.buttontext_create_load_pic_extend, new DialogInterface.OnClickListener() 
              {
                 public void onClick(DialogInterface dialog, int id) 
                    {   
                       //code
                    }            
              });

              onBackBuilder.setNegativeButton(R.string.buttontext_create_load_pic_keep_scale, new DialogInterface.OnClickListener() 
              {
                  public void onClick(DialogInterface dialog, int id) 
                    {                       
              bitmap = (BitmapFactory.decodeFile(picturePath)).copy(Bitmap.Config.ARGB_8888, true)
                          .createScaledBitmap(bitmap, screenWidth, screenHeight, true);
              bitmapCanvas = new Canvas(bitmap);
                    }             
              });

              AlertDialog alert = onBackBuilder.create();
              alert.show();            
       }

          // further codes
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:29:32.320

传递用于创建 AlertDialog 而不是非 Activity 类的 Activity 上下文：

```
AlertDialog.Builder onBackBuilder = new AlertDialog.Builder(context_new); 
```

在 Activity 中创建对象时`context_new`传递给的 Activity 上下文在哪里`DoodleView`

# java - 使用 DOM 解析器解析 XML 文档，每个标签有多个元素

> ID：14671896
> 
> 赞同：1
> 
> 时间：2013-02-03T11:19:47.830
> 
> 标签：java, xml, parsing, dom, xml-parsing

我需要解析具有相同标签名称的 XML 文档。我给你一个这段代码的例子，看看我想做什么。

```
<SystemData>
    <SystemName>xmlexample</SystemName>
    <Schools>
        <School>
            <SchoolName>SCHOOL1</SchoolName>
            <Classes>
                <Class>
                    <ClassName>ACLASS</ClassName>
                </Class>
            </Classes>
            <Classes>
                <Class>
                    <ClassName>BCLASS</ClassName>
                </Class>
            </Classes>
        </School>

        <School>
            <SchoolName>SCHOOL2</SchoolName>
            <Classes>
                <Class>
                    <ClassName>CCLASS</ClassName>
                </Class>
            </Classes>
        </School>
    </Schools>
</SystemData> 
```

我想要的结果是：

```
SCHOOL1
ACLASS
BCLASS

SCHOOL2
CCLASS 
```

我正在尝试使用 for 循环，但它让我为每所学校的所有课程都提供了帮助。

到目前为止我的代码：

```
NodeList schoolist = doc.getElementsByTagName("School");
int num = schoolist.getLength();

for (int temp = 0; temp < num; temp++) {
    Node nNode = schoolist.item(temp);
    if (nNode.getNodeType() == Node.ELEMENT_NODE) {
        Element eElement = (Element) schoolist.item(temp);
        Node schoolname = eElement.getFirstChild();

        System.out.println("schoolname: " + eElement.getElementsByTagName("ClassName").item(0).getTextContent());
    }

    NodeList Classlist = doc.getElementsByTagName("Method");
    int num1 = Classlist.getLength();

    for (int i = 0; i < num1; i++) {

        Node nNode1 = Classlist.item(i);

        if (nNode1.getNodeType() == Node.ELEMENT_NODE) {
            Element eElement1 = (Element) Classlist.item(i);
            Node Classname = eElement1.getFirstChild();
            System.out.println("Classname: " + eElement1.getElementsByTagName("ClassName").item(0).getTextContent());

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:56:16.460

所以最后我设法修复了代码..这就是它的工作原理..

```
 NodeList listOfSchool = doc.getElementsByTagName("School");

            for(int s=0; s<listOfSchool.getLength() ; s++){

                Node firstSchoolNode = listOfSchool.item(s);
                if(firstSchoolNode .getNodeType() == Node.ELEMENT_NODE){

                    Element SchoolElement = (Element)firstSchoolNode ;

                    //-------
                    NodeList SchoolNameList = SchoolElement.getElementsByTagName("SchoolName");
                    Element SchoolNameElement = (Element)SchoolNameList .item(0);

                    NodeList textFNList = SchoolNameElement.getChildNodes();
                    System.out.println("School Name : " + 
                           ((Node)textFNList.item(0)).getNodeValue().trim());

                        //----

                   NodeList listOfSchoolNames = SchoolElement.getElementsByTagName("Class");

                    for(int i=0; i<listOfSchoolNames.getLength() ; i++){

                Node firstClassNode = listOfSchoolNames.item(i);
                 if(firstClassNode .getNodeType() == Node.ELEMENT_NODE){

                    Element classElement = (Element)firstClassNode;
                    //----

                        NodeList ClassNameList = classElement .getElementsByTagName("ClassName");

                        Element ClassNameElement = (Element)ClassNameList.item(0);

                         NodeList textCLSNMList = ClassNameElement.getChildNodes();
                           System.out.println("class Name : " + 
                           ((Node)textCLSNMList .item(0)).getNodeValue().trim());

                           }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:02:21.520

标签名称的一些明显问题：

```
System.out.println("schoolname: " + eElement.getElementsByTagName("ClassName").item(0).getTextContent()); 
```

应该

```
System.out.println("schoolname: " + eElement.getElementsByTagName("SchoolName").item(0).getTextContent()); 
```

和

```
NodeList Classlist = doc.getElementsByTagName("Method"); 
```

应该

```
NodeList Classlist = doc.getElementsByTagName("Class"); 
```

然后，您不想`Class`从文档中获取所有元素，而是从*当前*学校`Class`的子文档中获取所有文档。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:30:10.387

我建议使用`javax.xml.xpath`Java SE 5 及更高版本中的 API，而不是`getElementsByTagName`让您的代码更具可读性和更易于维护。

```
import javax.xml.xpath.*;
import org.w3c.dom.*;
import org.xml.sax.InputSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        XPathFactory xpf = XPathFactory.newInstance();
        XPath xPath = xpf.newXPath();
        XPathExpression schoolNameExpression = xPath.compile("SchoolName");
        XPathExpression classNameExpression = xPath.compile("Classes/Class/ClassName");

        InputSource inputSource = new InputSource("src/forum14671896/input.xml");
        NodeList schoolNodes = (NodeList) xPath.evaluate("/SystemData/Schools/School", inputSource, XPathConstants.NODESET);
        for(int x=0; x<schoolNodes.getLength(); x++) {
            Node schoolElement = schoolNodes.item(x);

            // School Name
            System.out.print("School Name : ");
            System.out.println(schoolNameExpression.evaluate(schoolElement, XPathConstants.STRING));

            // Class Names
            NodeList classNames = (NodeList) classNameExpression.evaluate(schoolElement, XPathConstants.NODESET);
            for(int y=0; y<classNames.getLength(); y++) {
                System.out.print("Class Name : ");
                System.out.println(classNames.item(y).getTextContent());
            }
            System.out.println();
        }
    }

} 
```

**输出**

```
School Name : SCHOOL1
Class Name : ACLASS
Class Name : BCLASS

School Name : SCHOOL2
Class Name : CCLASS 
```*

# android - super.onCreate(savedInstanceState);

> ID：14671897
> 
> 赞同：96
> 
> 时间：2013-02-03T11:19:51.877
> 
> 标签：android, instance, super, oncreate

我创建了一个 Android 应用程序项目，并且在 MainActivity.java >`onCreate()`它正在调用`super.onCreate(savedInstanceState)`.

作为初学者，任何人都可以解释上述行的目的是什么？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-02-03T11:30:28.870

您所做的每个活动都是通过一系列方法调用启动的。`onCreate()`是这些电话中的第一个。

您的每一个活动`android.app.Activity`都直接扩展或通过继承`Activity`.

在 Java 中，当您从一个类继承时，您可以覆盖其方法以在其中运行您自己的代码。一个非常常见的例子是`toString()`在扩展时重写方法`java.lang.Object`。

当我们重写一个方法时，我们可以选择完全替换我们类中的方法，或者扩展现有父类的方法。通过调用`super.onCreate(savedInstanceState);`，您告诉 Dalvik VM除了父类的 onCreate() 中的现有代码**之外，还运行您的代码。**如果您省略此行，则**仅运行您的代码**。现有代码被完全忽略。

但是，您必须在您的方法中包含这个超级调用，因为如果您不这样做，那么其中的`onCreate()`代码`Activity`将永远不会运行，并且您的应用程序将遇到各种问题，例如没有为 Activity 分配上下文（尽管您会遇到a`SuperNotCalledException`在你有机会弄清楚你没有上下文之前）。

简而言之，Android 自己的类可能非常复杂。框架类中的代码处理 UI 绘制、房屋清洁以及维护 Activity 和应用程序生命周期等内容。`super`调用允许开发人员在幕后运行这个复杂的代码，同时仍然为我们自己的应用程序提供良好的抽象级别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T11:29:14.133

*派生类`onCreate(bundle)`方法必须调用该方法的超类实现。如果不使用“ **super** ”关键字，它将抛出异常*SuperNotCalledException 。*

 **对于 in 中的继承`Java`，要覆盖超类方法并执行上述类方法，`super.methodname()`请在覆盖的派生类方法中使用；

Android 类的工作方式相同。通过扩展具有编写有意义代码的方法的`Activity`类并在定义的活动中执行该代码，请使用 super 关键字和 onCreate() 等方法。`onCreate(Bundle bundle)``super.onCreate(bundle)`

这是用 Activity 类`onCreate()`方法编写的代码，Android 开发团队以后可能会在此方法中添加一些更有意义的代码。因此，为了反映添加的内容，您应该在您的类中调用**super.onCreate() 。**`Activity`

```
protected void  onCreate(Bundle savedInstanceState) {
    mVisibleFromClient = mWindow.getWindowStyle().getBoolean(
    com.android.internal.R.styleable.Window_windowNoDisplay, true);
    mCalled = true;
}

boolean mVisibleFromClient = true;

/**
 * Controls whether this activity main window is visible.  This is intended
 * only for the special case of an activity that is not going to show a
 * UI itself, but can't just finish prior to onResume() because it needs
 * to wait for a service binding or such.  Setting this to false prevents the UI from being shown during that time.
 * 
 * <p>The default value for this is taken from the
 * {@link android.R.attr#windowNoDisplay} attribute of the activity's theme.
 */ 
```

它还维护变量`mCalled`，这意味着您`super.onCreate(savedBundleInstance)`在 Activity 中调用了 。

```
final void performStart() {
    mCalled = false;
    mInstrumentation.callActivityOnStart(this);
    if (!mCalled) {
        throw new SuperNotCalledException(
            "Activity " + mComponent.toShortString() +
            " did not call through to super.onStart()");
    }
} 
```

在此处查看源代码。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/app/Activity.java#Activity.onCreate%28android.os.Bundle%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/app/Activity.java#Activity.onCreate%28android.os.Bundle%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:33:02.967

因为在 super.onCreate() 时，它会到达 Activity（任何 Activity 的父类）类来加载 savedInstanceState，我们通常不设置任何保存的实例状态，但是 android 框架这样做了，我们应该调用那。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T17:32:12.487

如果活动由于某些隐含原因（例如，不是因为用户按下后退按钮）而被销毁并重新启动，则这是您希望通过 onCreate() 返回到应用程序的信息。onSaveInstanceState() 最常见的用途是处理屏幕旋转，因为默认情况下，当用户滑出 G1 键盘时，活动会被销毁并重新创建。

调用 super.onCreate(savedInstanceState) 的原因是因为您的代码不会编译。;-)**

# hibernate - GWT - 修改现有对象或创建一个新对象

> ID：14671901
> 
> 赞同：0
> 
> 时间：2013-02-03T11:20:42.370
> 
> 标签：hibernate, gwt, serialization, reflection, immutability

我正在做一个 GWT + Hibernate 项目。它涉及一个公司实体（因此也涉及一个表）。

UI 有一个列出所有公司的视图。用户可以通过该视图编辑现有公司。

我的问题是 - 如何合并修改后的数据？我应该修改现有的、检索到的公司实体对象，还是应该创建一个包含新数据的新实例？

前者将保存新实例的创建以及未修改数据的可能复制。但是，这意味着公开公司各个领域的二传手。这不利于降低可变性。

后一种选择将创建一个新实例，并且可能涉及复制未修改的数据。但是，它将使我免于暴露 setter，从而鼓励不变性。

推荐哪一个？

此外，延迟绑定/反射或序列化是否需要所有获取器/设置器都存在？在这种情况下，我的问题变得没有实际意义，因为无论如何我都必须提供它们。

编辑 - 我正在使用 GWT-RPC 与服务器通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:04:52.200

GWT-RPC 不强制要求 getter 和 setter。如果它们存在，它将使用它们，但否则将直接注入字段。然而，它无法处理[`final`字段](https://code.google.com/p/google-web-toolkit/issues/detail?id=1054)（您可以通过让您的字段保持非最终状态并仅公开 getter 或[为 class 进行自己的 GWT-RPC 序列化](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/rpc/CustomFieldSerializer.html)来缓解这种情况）。

现在，正如您所说的这些对象是您的 JPA/Hibernate 实体，我相信 JPA 想要可变对象，这样就可以回答这个问题。

要查看的另一件事是如何将实体绑定到 UI。例如，[编辑器框架](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiEditors)也要求可变对象。

您可能还希望将与实体不同的对象（例如，类似于*操作转换*的命令对象）发送回服务器，这样您就不必在客户端改变或创建新对象（您会仍然必须解决服务器端的问题，但它超出了 GWT 的范围）。

鉴于上述情况，我会说您应该考虑对象的可变性，因为您正在使用的 API（JPA/Hibernate、GWT-RPC）或可能想要考虑（编辑器）所有授权或最好使用可变对象。

请注意，RequestFactory 在客户端使用*冻结的对象*：它们仅在给定的上下文中，在给定的时间范围内是可变的。在服务器端，可变性是必须的（但您也可以考虑冻结您的对象，或使用构建器模式）

# python - 使用 intersphinx 解决 Sphinx 中引用中的名称冲突

> ID：14671920
> 
> 赞同：7
> 
> 时间：2013-02-03T11:23:33.787
> 
> 标签：python, python-sphinx, cross-reference

我正在为我的 python 库编写文档使用 sphinx，我还使用 intersphinx 添加了另一个 sphinx 文档。而且它工作得很好，但是我的一些函数的名称与参考文档中的名称相同，这导致它们的名称被遮蔽以供`:func:...`参考。

有什么方法可以`do_some()`在其他文档中引用阴影函数？（`:func:`do_some``创建一个指向我的函数的链接`do_some()`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:45:13.413

根据[文档](http://sphinx-doc.org/latest/ext/intersphinx.html#confval-intersphinx_mapping)，您可以使用您的标识符`intersphinx_mapping`作为目标的前缀。例子：

```
:ref:`comparison manual <python:comparisons>` 
```

我认为这也应该与函数一起使用。

# python - 如何处理 web.py 中的 url 路径？

> ID：14671921
> 
> 赞同：0
> 
> 时间：2013-02-03T11:23:52.193
> 
> 标签：python, web, wsgi, web.py

我是 web.py 的新手，并且在我的代码中使用了很多硬编码的 url 用于`href`in tag `a`，like
`/login`或`/?type=example`.

问题是，
当我将我的应用程序设置在某个路径下运行时，而不是 URL 的根目录下，比如
`http://example.com/appname/`

该链接将引导我到某个地方，例如
`http://example.com/login`

虽然预期/想要的是
`http://example.com/appname/login`

我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:44:45.550

使 web.ctx.homepath 在您的模板全局变量中可用，并在您的路径之前输出它。

来自[http://webpy.org/cookbook/ctx](http://webpy.org/cookbook/ctx)

> homepath – 用户请求的从当前应用程序中删除的路径部分。即 homepath + path = 用户在 HTTP 中实际请求的路径。例如 /admin 这似乎是在启动期间从环境变量 REAL_SCRIPT_NAME 派生的。它会影响 web.url() 将在提供的 url 之前添加的内容。这反过来会影响 web.seeother() 的去向，这可能会与您的 url 重写方案（例如 mod_rewrite）产生不良交互

```
template_globals = {
    'app_path': lambda p: web.ctx.homepath + p,
}

render = template.render(my_template_dir, globals=template_globals, base="mylayout") 
```

然后你应该能够在你的模板中输出 app_path

```
<a href="$app_path('/login')">Login</a> 
```

# android - 触发系统范围的垃圾收集

> ID：14671924
> 
> 赞同：0
> 
> 时间：2013-02-03T11:24:03.533
> 
> 标签：android, memory, garbage-collection, android-framework

我想知道是否可以从 Android 框架中的特权系统服务触发系统范围的垃圾收集？我在想一个专门的信号，一旦被运行 dalvik VM 的进程捕获，就会就地进行垃圾收集。另一种选择是 AcitivityManager（或其他一些系统服务）的 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:32:04.200

当然，对此没有任何记录或支持。

如果有的话，我希望他们有逻辑来*防止*GC 同时发生在 2 个以上的进程上。在所有 Dalvik 进程中触发立即 GC 会使设备停止运行，尤其是在单核设备上，因为有几十个进程都试图同时进行 GC。

当然，欢迎您下载 Android 源代码，对其进行修改以适应您的更改，然后在您控制的设备上部署一个 ROM 模块。

# php - 如何在 yii 的 Controller 中检查模型创建者的访问权限？

> ID：14671927
> 
> 赞同：0
> 
> 时间：2013-02-03T11:24:15.473
> 
> 标签：php, yii, yii-components

我不知道控制器中模型创建者的访问规则的最佳方法。我通常这样使用：

```
public function accessRules() {
    return array(
       ...

        array('allow', // allow authenticated user to perform 'create' and 'update' actions
            'actions' => array('docrop', 'cropimages','upload','setting','updateprivacy','updateuser','changepassword'),
            'expression' => array($this,'isCreator'),
        ),
       ... 

    );
} 
```

然后在那个控制器中我使用这个函数来检查正确的访问规则

```
 public function isCreator(){
    $hasil=false;
    if(isset($_GET['id'])){
        $idUser=$_GET['id'];
        $hasil=$idUser==Yii::app()->user->id?true:false;
    }
    return $hasil;
 } 
```

然后，如果我想创建 url，我总是在该 url 中使用 id 参数。这是最好的方法吗？还是有比这更好的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:52:06.297

Your current approach would allow users to change the id in the url, giving them access to all actions. If you **really** would like to keep this method, I suggest using some kind of hashing method to make it less brute-forceable in combination with e.g. his ip address for more security: `$hashFromUrl == md5(Yii::app()->user->id . CHttpRequest::getUserHostAddress())`. Nonetheless I discourage this approach.

As the method is called `isCreator()`, I assume that you want to check whether the current user is the creator/author of an existing model in the database. Can't you use a `creatorId` field for this model to compare against the current user's id? No client side hacks are required then.

# r - R嵌套for循环输出

> ID：14671946
> 
> 赞同：0
> 
> 时间：2013-02-03T11:26:43.457
> 
> 标签：r

我没有从 R（版本 2.15.2）中的嵌套 for 循环中收到正确的结果。

```
GCP <- matrix(nrow=143,ncol=4)
for (i in 1:13) {
 for (j in 1:11) {
 GCP[i*j,1] = 410*(j-1)
 GCP[i*j,2] = 400*(i-1)
 # print(GCP[i*j,1])
 }
} 
```

当我取消注释 print(GCP[i*j,1]) 时，我收到了我所期望的：

```
[1] 0
[1] 410
[1] 820
[1] 1230
[1] 1640
[1] 2050
[1] 2460
[1] 2870
[1] 3280
[1] 3690
[1] 4100
[1] 0
[1] 410
[1] 820
[1] 1230
[1] 1640
[1] 2050
[1] 2460
[1] 2870
[1] 3280
[1] 3690
[1] 4100
[1] 0
... 
```

但是当我在循环完成后进入 GCP[,1] 时：

```
 [1]    0    0    0    0    0    0    0    0    0    0    0    0    0  410  820
 [16]  410   NA  410   NA  410  820  410   NA  410 1640  410  820 1230   NA  820
 [31]   NA 1230  820   NA 1640  820   NA   NA  820 1230   NA 2050   NA 1230 1640
 [46]   NA   NA 1230 2460 1640   NA 1230   NA 2050 1640 2460   NA   NA   NA 1640
 [61]   NA   NA 2460 2870 1640 2050   NA   NA   NA 2460   NA 2050   NA   NA   NA
 [76]   NA 2460 2050   NA 2870 3280   NA   NA 2460   NA   NA   NA 2870   NA 3280
 [91] 2460   NA   NA   NA   NA 2870   NA   NA 3280 3690   NA   NA   NA 2870   NA
[106]   NA   NA 3280   NA 3690   NA   NA   NA   NA   NA   NA 3280   NA   NA 3690
[121] 4100   NA   NA   NA   NA   NA   NA   NA   NA 3690   NA 4100   NA   NA   NA
[136]   NA   NA   NA   NA   NA   NA   NA 4100 
```

我应该如何更正我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:51:11.377

问题是，当你这样做时：

```
GCP <- matrix(nrow = 143, ncol = 4) 
```

`(143,4)`你本质上是用初始化一个维度矩阵`NA`。然后，您只为 构建值`row = i * j`。而且您只打印这些值。也许这段代码会帮助你把事情弄清楚一点：

```
GCP <- matrix(nrow = 143, ncol = 4)
for (i in 1:13) {
    for (j in 1:11) {
        GCP[i*j,1] = 410*(j-1)
        GCP[i*j,2] = 400*(i-1)
        cat("i =", i, "j =", j, "i*j =", i*j, "GCP[i*j] = ", GCP[i*j,1], "\n")
    }
} 
```

您会看到循环遍历`i`和的所有值`j`。但是，您的索引仅填充某些值 = `i*j`。所以，剩余的值仍然是`NA`。由于您只打印那些已经设置的值，因此您在打印时永远不会得到 NA 。

除非您解释您要做什么，否则我无法提供解决方案。首先，您正在设置一个矩阵，`ncol=4`但您只填充前两列，并且正如@redmode 指出的那样，您正在重写一些值。

**编辑：**也许那时，这就是你要找的东西？

```
GCP <- matrix(nrow = 143, ncol = 4)
for (i in 1:13) {
    for (j in 1:11) {
        GCP[11*(i-1) + j, 1] = 410*(j-1)
        GCP[11*(i-1) + j, 2] = 400*(i-1)
    }
} 
```

这经历了从 1 到 143 的值。

# php - 页面更改时 PHP connection_aborted() 不起作用

> ID：14671950
> 
> 赞同：3
> 
> 时间：2013-02-03T11:27:16.880
> 
> 标签：php

我正在尝试提供图像，同时为查看图像的每一秒添加一个 MySQL 行。

我以 1024 位的块提供它（图像的总大小为 20kb）

问题是，如果我加载显示图像的页面，然后关闭窗口或单击将我带到另一个页面的链接，脚本会继续运行并且不会正常运行`die`。

```
ignore_user_abort(false);
$file = 'a.jpg';
header('Content-Type: image/jpeg');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();

$conn = mysql_connect("localhost","user","pass");
mysql_select_db("mydb",$conn);

$fp=fopen($file,"rb");
$i=0;

while (!feof($fp)) {

    print(fread($fp,1024));
    sleep(1);
    mysql_query("INSERT INTO table (VIEWTIME) VALUES ('$i')");
    $i++;
    flush();
    ob_flush();
    if (connection_aborted()) {
        die();
    }
} 
```

我试图找到一个“服务器端”唯一的解决方案，因为我有一些技术限制阻止我使用任何 JS 或任何客户端语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:39:27.433

也许

```
ignore_user_abort(false); 
```

应该

```
ignore_user_abort(true); 
```

[文档](http://www.php.net/manual/en/function.ignore-user-abort.php)

# postgresql - heroku postgres :: 每个计划允许多少个数据库（生产：起重机）？

> ID：14671952
> 
> 赞同：2
> 
> 时间：2013-02-03T11:27:18.393
> 
> 标签：postgresql, heroku, cloud

我们正在考虑 Heroku Postgres Crane 计划。任何人都知道在一个这样的计划中可以创建多少个数据库？无法在任何地方获得此信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T20:50:06.373

每个计划仅提供一个分贝。您可以拥有多个 postgres 插件来获取多个数据库，但您将按计划/插件计费。我建议为您的应用程序使用多个表而不是多个数据库。

如果您希望使用多个计划，则每个帐户可以拥有无​​限数量的 dbs，但目前，在 Heroku 用完标识符之前，每个应用程序只有大约 30 个 dbs。

# java - Java如何防止小部件处置错误？

> ID：14671954
> 
> 赞同：3
> 
> 时间：2013-02-03T11:27:31.437
> 
> 标签：java, multithreading, widget, swt, dispose

当我关闭主窗口时，我收到一个错误，因为它已被处理。我试图“过滤掉”（使用条件），但我无法让它工作。

```
if(!Display.getDefault().isDisposed()){
   Display.getDefault().syncExec(new Runnable() {

      @Override
      public void run() {
         View.tableViewer.refresh();
         setViewInfo();
      }
    });
} 
```

**错误：**

> 线程“Thread-3”中的异常 org.eclipse.swt.SWTException：无法在 org.eclipse.swt.SWT.error（SWT.java:4361）处执行可运行（org.eclipse.swt.SWTException：小部件已处置）在 org.eclipse.swt.SWT.error(SWT.java:4276) 在 org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:196) 在 org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer .java:150) 在 org.eclipse.swt.widgets.Display.syncExec(Display.java:4687) 在 com.chriss.udp.Message.WRITE(Message.java:166) 在 com.chriss.udp.threads。 ThreadConnect.run(ThreadConnect.java:55) at java.lang.Thread.run(Unknown Source) Caused by: org.eclipse.swt.SWTException: Widget is dispose

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:29:19.910

您可以询问是否处理了[Widget](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Widget.html)。

```
boolean isDisposed() 
```

> 如果小部件已被释放，则返回 true，否则返回 false。

您不必检查显示，因为只要应用程序正在运行，它就不会被释放。您必须检查可运行文件中的表或 this.isDisposed()。

请发布完整的堆栈跟踪。我认为问题出在可运行文件内部。

# javascript - 检测网络浏览器关闭 - 可能的解决方案

> ID：14671955
> 
> 赞同：3
> 
> 时间：2013-02-03T11:27:34.833
> 
> 标签：javascript, html

我发现有 html 事件 window.onunload 和 window.onbeforeunload 但它们确实意味着文档正在关闭/更改。似乎没有检测 Web 浏览器关闭的通用方法，这令人惊讶。

我的应用程序可以在多个浏览器选项卡中工作，所以我的一个想法是创建一种引用计数器。这可以按如下方式工作：

当用户启动我的 Web 应用程序时，在页面加载处理程序中，我增加一个计数器并将值保存为 cookie。即 ++pagecount 并将值保存在 cookie 中。

在 window.onunload 中，我递减计数器（并在 cookie 中保存新值）。不确定在保存到 cookie 时是否可能存在竞争条件？

当 pagecount == 0 我可以清理。

即使在我的 Web 应用程序在多个浏览器中打开的情况下（但当然是相同的），这也可以工作。

我会很感激对此有何评论？你认为这可行吗？可靠的？有什么我没有预见到的问题吗？

编辑：这是它如何工作的示例代码。

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">

function SetCookie(c_name,value,exdays)
{
   var exdate=new Date();
   exdate.setDate(exdate.getDate() + exdays);
   var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
   document.cookie=c_name + "=" + c_value + ";path=/";
} 

function GetCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
  return "";
}

function bindEvent(el, eventName, eventHandler) {
   if (el.addEventListener){
        el.addEventListener(eventName, eventHandler, false); 
   } else if (el.attachEvent){
        el.attachEvent('on'+eventName, eventHandler);
   }
}

function IncrementUnload() {
   var current = GetCookie("Unloaded") - 0;
   ++current;
   SetCookie("Unloaded", current, 1);

   //here you would compare Loaded and unloaded and if 
   //loaded == unloaded  - then perform any cleanup
}

function printcookie() {
   var here = document.getElementById("here");
   if(here) {
     here.innerHTML += " " + (GetCookie("Loaded") - 0);
   }
}

function printunloadcookie() {
   var there = document.getElementById("there");
   if(there) {
     there.innerHTML += " " + (GetCookie("Unloaded") - 0);
   }
}

function init() {
   var current = GetCookie("Loaded") - 0;
   ++current;
   SetCookie("Loaded", current, 1);
   bindEvent(window, "beforeunload", IncrementUnload);
}

   window.onload = init;

    </script>
</head>
<body>
    <b>Close this window or press F5 to reload the page.</b>
    <br /><br />

    <p id="here">Loaded=</p>
    <p id="there">Unloaded=</p>
    <form>
        <input type="button" id="print_cookie" value="print Loaded cookie" onclick="printcookie();">
        <br />
        <input type="button" id="print_unload_cookie" value="print Unloaded cookie" onclick="printunloadcookie();">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:37:55.673

我认为这是一个坏主意（或者至少它会给你非常不精确的数字）：

您永远不能相信 cookie 的存在是您的计数参考。您不会有任何竞争条件，因为现代浏览器会为每个选项卡分配不同的线程，并且每个主题都会保留自己的 cookie。

此外，您的 Web 应用程序应该与客户端无关，它不应该知道您如何访问它，您希望了解单台计算机中的多个选项卡。

我猜你想要这种行为有两个原因： 1\. 通过提供多个展示窗口来获得更好的用户体验 2\. 你想避免多次访问同一个上下文

对于第一个选项，您可以在 jquery 中使用模态对话框 对于第二个选项，您总是有会话来控制用户的上下文

希望它能帮助你决定你的方法

# mysql - 在 MySQL 中连接两个表

> ID：14671957
> 
> 赞同：2
> 
> 时间：2013-02-03T11:28:03.303
> 
> 标签：mysql, sql

是）我有的：

表格1

```
╔════╦═══════╦═════╗
║ ID ║ NAME  ║ AGE ║
╠════╬═══════╬═════╣
║  0 ║ John  ║  15 ║
║  1 ║ Chris ║  20 ║
╚════╩═══════╩═════╝ 
```

表2

```
╔════╦════════════╦═════════════╗
║ ID ║ OCCUPATION ║   ADDRESS   ║
╠════╬════════════╬═════════════╣
║  0 ║ Bus Driver ║ None        ║
║  1 ║ Lawyer     ║ some adress ║
╚════╩════════════╩═════════════╝ 
```

**期望的输出**：

表3

```
╔════╦═══════╦═════╦════════════╦═════════════╗
║ ID ║ NAME  ║ AGE ║ OCCUPATION ║   ADDRESS   ║
╠════╬═══════╬═════╬════════════╬═════════════╣
║  0 ║ John  ║  15 ║ Bus Driver ║ None        ║
║  1 ║ Chris ║  20 ║ Lawyer     ║ some adress ║
╚════╩═══════╩═════╩════════════╩═════════════╝ 
```

虽然我可以通过使用 PHP`mysql_query("SELECT .. "); mysql_query("INSERT ..");`的方式来完成这项任务，但我想使用纯 SQL 来完成这项任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T11:29:23.773

`JOIN`两张表：

```
SELECT
  t1.ID,
  t1.Name,
  t1.Age,
  t2.Occupation,
  t2.Address
FROM table1 t1
INNER JOIN table2 t2 ON t1.ID = t2.ID; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/31358/1)

这会给你：

```
| ID |  NAME | AGE | OCCUPATION |     ADDRESS |
-----------------------------------------------
|  0 |  John |  15 | Bus Driver |        None |
|  1 | Chris |  20 |     Lawyer | some adress | 
```

* * *

如果要`table3`直接从此选择创建新表，请执行以下操作：

```
CREATE Table Table3
AS 
SELECT
  t1.Name,
  t1.Age,
  t2.Occupation,
  t2.Address
FROM table1 t1
INNER JOIN table2 t2 ON t1.ID = t2.ID; 
```

[**像这样**](http://www.sqlfiddle.com/#!2/8ac4f/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T11:38:03.007

试试这个

```
 SELECT t1.* , t2.* 
 FROM table1 t1, table2 t2
 WHERE t1.id = t2.id 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/bcd03/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:32:22.303

这应该做，

```
SELECT a.id, name, age, occupation, address
FROM table1 a, table2 b
WHERE a.id = b.id; 
```

# c# - 将短路运算符与常规运算符结合使用会改变表达式的结果吗？

> ID：14671958
> 
> 赞同：1
> 
> 时间：2013-02-03T11:28:12.647
> 
> 标签：c#, boolean-logic, short-circuiting

我一直认为使用条件布尔运算符（也称为短路）而不是常规布尔运算符不会影响表达式的结果。

```
var result = true | false & false; 
```

有相同的结果

```
var result = true || false && false 
```

两个表达式都导致`true`.

但是，如果我将常规运算符和条件运算符混合使用会怎样？

```
var result1 = true || false & false;
var result2 = true | false && false; 
```

你会期待什么？我希望这些仍然会返回`true`。但事实并非如此。结果2会`false`！

我知道这是因为[运算符优先级](http://msdn.microsoft.com/en-us/library/6a71f45d%28v=vs.100%29.aspx)。优先顺序是`& | && ||`。这对我来说似乎违反直觉。我期望 的顺序`& && | ||`，在这种情况下，所有结果都是相同的（我认为）。

所以我想我真正的问题不是短路*是否会改变结果。*问题是为什么优先顺序是这样的，短路*可以*改变结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:32:30.940

```
var result2 = true | false && false; 
```

计算为：

```
var result2 = (true | false) && false; 
```

因为`|`来之前`&&`。现在`(true | false)`评估为`true`，并且`true && false`为假。

至于*为什么*，请看[这个问题](https://stackoverflow.com/questions/4685072/c-operator-precedence-bitwise-lower-than)：

> && 和 || 后来添加了运算符，因为它们的“短路”行为。Dennis Ritchie 回想起来承认，当添加逻辑运算符时，应该更改位运算符的优先级。但是当时存在数百 KB 的 C 源代码和安装了三台计算机的基础，Dennis 认为 C 语言的变化太大了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T21:25:46.463

有问题的运算符的优先级似乎直接从 C（和 C++）编程语言中的优先级复制而来。

现在在 C 中，它们不为整数和布尔值使用不同的类型。例如，他们可以写：

```
if (i | j && x > 0)      // cf. the result2 of your question 
```

这应该意味着“整数`i`和`j`按位或'ed给出非零并且数字`x`是正数”。因此`|`，`&`当操作数被认为是整数（多位数字）时，应该主要使用 and ，并且应该在操作数被认为是布尔值时主要使用`||`and 。`&&`

因此，在 C 中`|`绑定比`&&`.

在 C# 中，我们有更高程度的类型安全，并且没有从`Int32`to`Boolean`或 from `Boolean`to的转换`Int32`。因此，不再可能“混合”事物，优先级不再是自然的。

我猜理论上在 C# 中，可以使运算符

```
public static bool operator |(bool b, bool c) 
```

具有与运算符*不同*的优先级

```
public static int operator |(int i, int j) 
```

但它真的不会让事情变得更好吗？

I think it's very rare that people use *boolean* non-short-circuit operators like `|` and short-circuit operators like `&&` in the same expression, but when they do, they should either be very careful about precedence, or just put the parenthesis `()` there (it will also make the intention more clear).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:35:31.517

& 和 | 运算符评估两个参数（可能涉及调用方法），然后返回与或或操作的结果。

&& 和 || 运算符仅将其参数评估到最终结果完全确定的程度。

例如： 调用 SomeMethod() 函数 而不 `true | SomeMethod()`调用 。`false & SomeMethod()``true || SomeMethod()``false && SomeMethod()`

`true`当然，`false`在这个例子中也可以是变量，我只是使用常量来使例子更容易理解。

# php - 这个 PHP/IFRAME 文件上传是如何工作的？

> ID：14671960
> 
> 赞同：1
> 
> 时间：2013-02-03T11:28:16.673
> 
> 标签：php, ajax, iframe, file-upload

[看看这个链接](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)。

代码是如何工作的？我的意思是`src`IFRAME 的属性设置为`#`然后如何`upload.php`知道表单已提交？

# 这是代码: `index.php`:

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <title>Max's AJAX File Uploader</title>
   <link href="style/style.css" rel="stylesheet" type="text/css" />

<script language="javascript" type="text/javascript">
<!--
function startUpload(){
      document.getElementById('f1_upload_process').style.visibility = 'visible';
      document.getElementById('f1_upload_form').style.visibility = 'hidden';
      return true;
}

function stopUpload(success){
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
      }
      else {
         result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
      }
      document.getElementById('f1_upload_process').style.visibility = 'hidden';
      document.getElementById('f1_upload_form').innerHTML = result + '<label>File: <input name="myfile" type="file" size="30" /><\/label><label><input type="submit" name="submitBtn" class="sbtn" value="Upload" /><\/label>';
      document.getElementById('f1_upload_form').style.visibility = 'visible';      
      return true;   
}
//-->
</script>   
</head>

<body>
       <div id="container">
            <div id="header"><div id="header_left"></div>
            <div id="header_main">Max's AJAX File Uploader</div><div id="header_right"></div></div>
            <div id="content">
                <form action="upload.php" method="post" enctype="multipart/form-data" target="upload_target" onsubmit="startUpload();" >
                     <p id="f1_upload_process">Loading...<br/><img src="loader.gif" /><br/></p>
                     <p id="f1_upload_form" align="center"><br/>
                         <label>File:  
                              <input name="myfile" type="file" size="30" />
                         </label>
                         <label>
                             <input type="submit" name="submitBtn" class="sbtn" value="Upload" />
                         </label>
                     </p>

                     <iframe id="upload_target" name="upload_target" src="#" style="width:0;height:0;border:0px solid #fff;"></iframe>
                 </form>
             </div>
             <div id="footer"><a href="http://www.ajaxf1.com" target="_blank">Powered by AJAX F1</a></div>
         </div>

</body>   
</html> 
```

* * *

# `upload.php`：

```
<?php
   // Edit upload location here
   $destination_path = getcwd().DIRECTORY_SEPARATOR;

   $result = 0;

   $target_path = $destination_path . basename( $_FILES['myfile']['name']);

   if(@move_uploaded_file($_FILES['myfile']['tmp_name'], $target_path)) {
      $result = 1;
   }

   sleep(1);
?>

<script language="javascript" type="text/javascript">window.top.window.stopUpload(<?php echo $result; ?>);</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:40:19.840

如果您遵循 HTML 表单标记及其相关属性，则此代码中的流程非常简单。正在发生的事情如下：

1.  选择上传
2.  提交表格
3.  *onSubmit()*触发一个 JS 函数，该函数启用加载.. 可视化并禁用上传表单。由于 * return true* 表单仍然被提交。
4.  由于 'target=' 属性，表单提交是在 iFrame 中完成的。通过该操作，您可以创建 iFrame 源“upload.php”
5.  Upload.php 从 iFrame 中调用。
6.  Upload.php 结果调用主窗口 JS 函数“stopUpload”，该函数通知要采取的其余操作。

这个脚本可以工作，尽管它的结果可能会跨浏览器改变。这是一个用于快速 AJAX 上传实现的好脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:35:28.487

您已将表单操作设置为 upload.php，`<form action="upload.php"`因此当您提交 upload.php 时知道表单已提交（如果我正确理解您的问题，那么上面的行是正确的）

# php - ob_get_contents 在 PHP 中是如何工作的？

> ID：14671961
> 
> 赞同：14
> 
> 时间：2013-02-03T11:28:22.963
> 
> 标签：php, ob-get-contents

这是我正在阅读的书中的示例代码：

```
ob_start();
include("{$path}.ini");
$string = ob_get_contents();
ob_end_clean();
$pairs = parse_ini_string($string); 
```

我的问题是，如何`ob_get_contents()`知道从什么获取内容？（在这种情况下是 {$path}.ini）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T11:31:26.047

`ob_get_contents`只需获取输出缓冲区的内容，因为您调用`ob_start()`. 本质上，PHP 中的输出缓冲区会捕获任何可能*输出*到浏览器的内容（不包括标题）。`var_dump`它在您可能需要过滤某些输出的情况下很有用，或者您正在使用将输出直接写入屏幕的 PHP 方法（例如），并且您希望该方法的返回值以字符串形式显示。

在这种情况下，因为您正在`include()`输入`.ini`文件，所以它的内容本质上将输出到屏幕，并且`ob_get_contents()`将获取文件的内容。

如果您要放在`echo "I'm a little teapot short and stout";`下方`include`，这也将包含在文件`$string`正文之后`.ini`。

但是，在您的特定情况下，输出缓冲是不必要的开销，只需`file_get_contents`在`.ini`文件上使用即可。我不确定为什么一本书甚至会包含此代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-03T11:32:00.980

“ob”代表“输出缓冲区”。当您调用 时`ob_start()`，PHP 将所有输出（使用`echo`等）重新路由到输出缓冲区。然后您可以使用其他`ob_*`函数来检索和/或清除缓冲区内容。

在您的示例中，它将缓冲由`"{$path}.ini"`. 当你包含它时，它的输出被添加到缓冲区中，当你调用它时`ob_get_contents()`，它检索缓冲区的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T11:32:46.483

来自 PHP：

```
ob_start — Turn on output buffering
ob_get_contents — Return the contents of the output buffer
ob_end_clean — Clean (erase) the output buffer and turn off output buffering 
```

现在，ob_get_contents 可以收集所有输出的缓冲区。

[1] [http://www.php.net/manual/en/book.outcontrol.php](http://www.php.net/manual/en/book.outcontrol.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-03T11:34:37.853

`ob_get_contents()`正在获取调用`ob_start()`函数后回显的所有内容，因此没有什么特别之处`{$path}.ini`- 您需要回显要收集的数据（是的，甚至会收集简单`echo`或`print_r`调用的输出 - 有时对调试简单脚本很有用）。

您可以`ob_start()`将函数理解为从屏幕到（不可见）PHP 内部缓冲区的简单重定向，该缓冲区稍后会被`ob_get_contents()`. 因此，您将能够重定向您在屏幕上看到的任何内容，而无需调用`ob_start()`函数（甚至是整个网页）。

# php - 如何在 yii CGridView 中创建单行命令？

> ID：14671963
> 
> 赞同：0
> 
> 时间：2013-02-03T11:28:29.263
> 
> 标签：php, frameworks, yii

这是代码：

```
$this->widget('zii.widgets.grid.CGridView', array(
....
....
'columns'=>array(
    ....
    ....
    array(
    'name'=>'owner_name', 
    'value'=> 'isset($data->owner)?$data->owner->getProfile($data->owner->u_type)->e_last_name:"UnKnown"'),
    ....
    ....
    ),
), 
```

));

变量 $data->owner->u_type 的值为 'e' 或 'w' 并且整个 $data->owner->getProfile($data->owner->u_type) 是一个对象。我希望有

```
'value'=> 'isset($data->owner)?$data->owner->getProfile($data->owner->u_type)->***$data->owner->u_type***_last_name:"UnKnown"') 
```

所以我可以同时处理 e_last_name 和 w_last_name。问题是 eval 函数显示解析错误。我知道我可以声明一个函数并在该函数中执行此任务。我想知道有没有办法直接在代码中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:30:29.770

```
'value'=> isset($data->owner) ? $data->owner->getProfile($data->owner->u_type)->e_last_name : "UnKnown", 
```

还是我不明白你？

# java - 从 java.awt.geom.GeneralPath 中删除一个点/操作

> ID：14671965
> 
> 赞同：3
> 
> 时间：2013-02-03T11:28:43.907
> 
> 标签：java, geometry, pathgeometry

有什么办法可以删除一条一般路径的点吗？我画了一个 GeneralPath 如下：

```
GeneralPath gp1=new GeneralPath();
gp1.moveTo(5,5);
gp1.lineTo(10,10);
gp1.lineto(10,30);
gp1.curveTo(2, 2, 7, 7, 5, 5);
gp1.closePath(); 
```

现在我想删除一个特定的点/操作，例如 lineto(10,10) 而不从新创建 GeneralPath。（性能原因）

我喜欢如下命令，但这不可用：

```
GeneralPath.removesegment(1); 
```

附上一个截图，这应该可以解释我的愿望:-) 我想删除我的 GeneralPath 中的蓝色标记点。

感谢和问候

![在此处输入图像描述](../Images/415a1ca5d85ec371ed8cb5b51d1f1765.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T16:19:48.103

[`Path2D.Float`](http://docs.oracle.com/javase/7/docs/api/index.html?java/awt/geom/Path2D.Float.html)，从中[`GeneralPath`](http://docs.oracle.com/javase/7/docs/api/index.html?java/awt/geom/GeneralPath.html)派生，不提供对其内部数据结构的访问，并且不允许您想要的那种操作。因此，除非您准备重新实施`GeneralPath`或规避访问限制，否则根本无法实现这一目标。

另一方面，我怀疑性能应该是一个很大的问题。我认为在大多数应用程序中，绘制路径比在内存中操作它们花费更多时间，因此从现有路径创建新路径不应该花费太长时间。我将使用围绕 的包装器来实现这一点`PathIterator`，因此您可以使用[`Path2D.append`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Path2D.Float.html#append%28java.awt.geom.PathIterator,%20boolean%29)将数据移动到新路径。包装器将简单地检测您要删除的点并跳过这些点，将其他所有内容委托给原始路径的默认迭代器。

# actionscript-3 - Flash Professional CS6 中的缓慢导出

> ID：14671966
> 
> 赞同：0
> 
> 时间：2013-02-03T11:28:48.333
> 
> 标签：actionscript-3, flash, flash-cs6, away3d

我已从高级发布设置将外部库链接到我的 fla。（这是away3d库）

舞台上什么都没有，时间轴上也没有，我刚刚在文档类中添加了一些代码（如下所示）。

每当我在没有该行的情况下运行下面的代码时：`private _view:View3D`它会在大约几秒钟内快速导出，但是当我保留该行时，它会非常缓慢地导出，大约需要 1 分钟。

如何在使用外部库时快速导出。

```
package
{
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.geom.Vector3D;
    import away3d.primitives.PlaneGeometry;
    import away3d.containers.View3D;
    import away3d.entities.Mesh;
    import flash.events.Event;

public class Main extends Sprite
{
    private var _view:View3D;
    //whenever I comment this line out, it exports fast

    public function Main()
    {
        stage.scaleMode = StageScaleMode.NO_SCALE;
        stage.align = StageAlign.TOP_LEFT;
    }
}
} 
```

编辑：这是我将 away3d 库链接到我的 fla 的方式的图像 - [http://i.imgur.com/HLxZXPi.png?1](http://i.imgur.com/HLxZXPi.png?1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T11:42:11.377

当您链接源路径时，Flash IDE 会在您每次发布应用程序时编译所有类，以防止此链接 swc 文件（包含 away3d 类）位于库路径部分。

# jquery - MVC 4 远程验证失败

> ID：14671967
> 
> 赞同：1
> 
> 时间：2013-02-03T11:28:51.280
> 
> 标签：jquery, asp.net-mvc, jquery-validate, unobtrusive-validation

我正在尝试实现远程验证，但它未能调用操作方法：

当我在 Firebug 中进行测试并在页面上收到一个应该验证其字段之一的错误时。这很可能是远程验证不起作用的根本原因。

我在 _LayoutView 中的脚本

```
 <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.min.js"></script> 
```

这是错误错误：

```
Syntax error, unrecognized expression: :input[name=UserReg.Password]
http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.min.js Line 2 
```

我已经尝试过 jQuery 1.8.0 并且错误仍然存​​在。

UserReg.Password 是视图的一部分

```
 @Html.EditorFor(model => model.UserReg.Password) 
```

这是该字段的渲染页面源：

```
 <input class="text-box single-line password" data-val="true" data-val-length="The Password must be at least 6 characters long." data-val-length-max="100" data-val-length-min="6" data-val-required="The Password field is required." id="UserReg_Password" name="UserReg.Password" type="password" value="" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:54:28.017

jQuery Validate 插件要求在验证规则中声明时，包含任何特殊字符“如点”的输入名称用引号括起来。

请参阅：[docs.jquery.com/Plugins/Validation/…</a>](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)

 [> **具有复杂名称的字段（括号、点）**
> 
> “如果您的表单包含使用不合法 JavaScript 标识符的名称的字段，则在使用规则选项时必须引用这些名称：”

```
$(document).ready(function(){
    $('#myform').validate({
        rules: {
            "UserReg.Password": {
                // whatever your rules,
                // required: true
            }
        }
    });
}); 
```

如果您不能这样做，请尝试将其切换`input`为不带任何特殊字符的名称。

* * *](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29) 

[**旁注：** 您包括 jQuery Validate v1.9.0。然而，即使是最新版本的插件 v1.10.0，也没有经过测试可以与 jQuery 1.9.0 一起使用。](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)如果你想保留 jQuery 1.9.0，[你必须使用来自 Github 的“预发布”](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)[验证插件版本 1.11.0pre 。](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:37:05.883

我从 _LayoutView 中删除了这个脚本

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script> 
```

问题就消失了。客户端验证仍在工作。

# ios - 为 NSDictionary 对象编码字符串值测试的更好方法

> ID：14671968
> 
> 赞同：-4
> 
> 时间：2013-02-03T11:29:09.543
> 
> 标签：ios, objective-c, nsstring, nsdictionary

> **可能重复：**
> [如果以更好的方式进行代码检查，我怎么能写这个？](https://stackoverflow.com/questions/14663798/how-could-i-write-this-if-else-code-checking-in-a-better-way)

我这里的条件代码似乎重复且冗长。有更好的方法吗？我想测试 NSDictionary 对象中的字符串值，然后根据 UILabel 的值前缀与 $、£、¥ 货币符号。

这是我的代码（我刚刚在下面展示了 2 个示例，我有更多货币并且代码很长）：

```
 if ([[item objectForKey:@"currency"] isEqualToString:@"EUR"]) {

        NSString *priceConvertToStr = [NSString stringWithFormat:@"€%@", [[item objectForKey:@"price"]stringValue]];

        NSString *priceStringFix = [priceConvertToStr
                                    stringByReplacingOccurrencesOfString:@"(null)" withString:@""];

        priceLabelText.text = priceStringFix;
        [imgView2 addSubview:priceLabelText];

    }

    if ([[item objectForKey:@"currency"] isEqualToString:@"GBP"]) {
        NSString *priceConvertToStr = [NSString stringWithFormat:@"€%@", [[item objectForKey:@"price"]stringValue]];

        NSString *priceStringFix = [priceConvertToStr
                                    stringByReplacingOccurrencesOfString:@"(null)" withString:@""];

        priceLabelText.text = priceStringFix;
        [imgView2 addSubview:priceLabelText];

    }
    if ([[item objectForKey:@"currency"] isEqualToString:@"USD"]) {
        NSString *priceConvertToStr = [NSString stringWithFormat:@"$%@", [[item objectForKey:@"price"]stringValue]];

        NSString *priceStringFix = [priceConvertToStr
                                    stringByReplacingOccurrencesOfString:@"(null)" withString:@""];

        priceLabelText.text = priceStringFix;
        [imgView2 addSubview:priceLabelText];

    } 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:34:49.033

您可以将您的代码重构为此（可能是因为`if`语句中基本上 80% 的代码是相同的）：

```
NSDictionary *currDict = @{
    @"EUR": @"€",
    @"GBP": @"₤",
    @"USD": @"$"
};
NSString *currName = [item objectForKey:@"currency"];
NSString *currency = [currDict objectForKey:currName];

NSString *priceConvertToStr = [NSString stringWithFormat:@"%@%@",
    currency,
    [[item objectForKey:@"price"] stringValue]
];
NSString *priceStringFix = [priceConvertToStr stringByReplacingOccurrencesOfString:@"(null)" withString:@""];
priceLabelText.text = priceStringFix;
[imgView2 addSubview:priceLabelText]; 
```

# iphone - TiledMaps 和真实对象

> ID：14671969
> 
> 赞同：1
> 
> 时间：2013-02-03T11:29:11.370
> 
> 标签：iphone, objective-c, cocoa, cocos2d-iphone, tmx

我正在使用 Cocos2d 为 iPhone 创建超级马里奥兄弟重制版。
我很难理解如何将真实对象添加到平铺地图。

我知道您可以将对象层添加到平铺地图并设置它的位置，
但我不确定如何定义应该是什么对象。

例如，我正在创建一个简单的超级马里奥兄弟。

![超级马里奥兄弟](../Images/d92c1819c7ae2e7517894e90768e8bd7.png)

我想在地图上添加不同的块，一个应该拿着星星，一个应该拿着硬币，等等。

所以我的问题是，如何在平铺地图中正确创建类对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:15:29.370

我过去使用过对象层。根据您的需要，您可以创建一个对象层并在该层上放置一个对象。盒子的类型。它的对象中可能有变量，`powerup`那么值可以是您想要的任何值。Coin、1Up、Star 等！

![在此处输入图像描述](../Images/61a1f8c831c76e8eed70c620af0ab886.png)

# eclipse - Eclipse Egit 提交失败

> ID：14671971
> 
> 赞同：9
> 
> 时间：2013-02-03T11:29:15.673
> 
> 标签：eclipse, eclipse-plugin, egit

我为 PHP 开发人员安装了 Eclipse 3.0.2，安装了 Egit 2.2.0，我在 Windows 7 上设置并链接了我的项目和存储库。但是我不能提交更改。这是我得到的错误：

```
Exception caught during execution of add command
   Exception caught during execution of add command 
```

我安装了适用于 Windows 的 Git，并在 Git 配置中进行了设置。我还用 %USERPROFILE% 设置了我的 HOME 变量

我的项目位置也在我映射到 Z 的远程服务器上：

这也包括 git repo。

该远程位置安装了 Lubuntu 12.10。它也安装了 git。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T14:02:07.660

我发现了问题所在。Git 使用 ./git/index.lock 中的文件自行锁定

在我删除后一切正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-07T06:54:16.750

感谢@NaGeL182 .. 我现在可以工作了，因为 Git 已锁定

所以我需要删除 **.git/index.lock**文件

1.  在 Mac 上，只需在终端上点击以下命令

> rm -f ./.git/index.lock

在 Windows 上

> 删除 .git\index.lock

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T07:09:48.777

我的 2 美分...我的 git 工作区在本地映射到保管箱文件夹（我有点偏执，更喜欢双重备份选项）。有时同步过程不匹配，Dropbox 会保留 git .lock 文件。因为我只关心我的资源而不是 git 元数据——我只是取消了在线同步中的 .git 文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-16T21:21:55.010

试一试，转到您的存储库并执行以下命令！

```
chmod -R 777 .git 
```

# javascript - 如何将页面的 URL 附加到 jQuery 中的社交媒体“共享”URL？

> ID：14671981
> 
> 赞同：0
> 
> 时间：2013-02-03T11:30:12.257
> 
> 标签：javascript

如何创建一个链接，该链接采用“共享”链接的静态部分（LinkedIn 等社交媒体网站的）并附加当前页面的 url？这样用户就可以在他们的社交媒体帐户上共享页面的 URL。

我不想使用 Share This 或任何其他此类小部件。

谢谢

**编辑**

所以建议我选择 jQuery 的解决方案。经过大量帮助，这是解决方案：

HTML

```
<a class="linkedin" href="#">LinkedIn</a> 
```

jQuery

```
$(document).ready(function() { 
  $('a.linkedin').click(function() {
    var link = document.location;
    var url = "https://www.linkedin.com/shareArticle?mini=true&url=" + link;
    document.location.href = url;
  });
}); 
```

显然，它适用于任何允许此类 URL 的社交媒体网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:37:16.827

[LinkedIn 有](https://developer.linkedin.com/documents/share-linkedin)这方面的文档以及他们的 url 期望的参数。我省略了`summary`参数。

JS 101：您正在寻找 window.open 方法。请参阅[文档。](https://developer.mozilla.org/en-US/docs/DOM/window.open). 您所要做的就是**(1)**编写一个用 url 打开一个窗口的函数。**(2)**在a元素的[onclick事件](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)中调用该函数。

仅使用纯 javascript，它应该看起来像这样：

```
<script>
    function shareOnLinked(url, title, summary)
    {
     window.open('http://www.linkedin.com/shareArticle?mini=true&url='+ 
           url +'&title='+title+'&summary='+summary);
    }
</script>
<a href='#' 
   onclick='shareOnLinked("http://stackoverflow.com",
                                   "Great QandA","SomeSummary");'> 
Share On Linked in</a> 
```

查看实时示例：http: [//jsfiddle.net/PpC5S/2/](http://jsfiddle.net/PpC5S/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:33:55.650

您可以使用（没有任何库的纯 Javascript）

```
<a href="https://www.linkedin.com/shareArticle?mini=true&url=" onclick='function(j){ window.location = j.href + window.location }(this)'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:34:20.087

如果你不介意使用 jQuery

```
$(document).ready(function() { 
    $('a#link').click(function() {
        var link = $(this).attr("href");
        var url = "https://www.linkedin.com/shareArticle?mini=true&url=" + link;
        document.location.href=url;
    });
}); 
```

# c# - C# 泛型方法 - 在类型上调用基类构造函数

> ID：14671988
> 
> 赞同：2
> 
> 时间：2013-02-03T11:30:58.237
> 
> 标签：c#, generics, visual-studio-2012

我有一个名为 CAR 的对象声明如下：

```
public class Car{
   public int NumberOfWheels;
} 
```

并使用另一个类，我可以检索它的三个子类。
如下：

```
public TruckA getCarA(int param){
   return new TruckA () {NumberOfWheels = param} 
}
public TruckB getCarB(int param){
   return new TruckB () {NumberOfWheels = param} 
}
public TruckC getCarC(int param){
   return new TruckC () {NumberOfWheels = param} 
} 
```

如何使用泛型编写？
（我知道这太简单了，我需要一个更复杂的例子）

我想创建一个方法来创建一个新的（T），输入参数并返回它。

就像是

```
public TruckC getCarC(int param){
   return getTruck<TruckC>(param)
} 
```

只有：
1\. TruckA/B/C 没有构造函数。
2\. Car 没有构造函数。使用 {} 初始化。
3\. 该方法应该只接收派生自 Car 的类，以便它可以使用其初始化 ( {} )。

（相当于 ?? extends ? in java generics）
可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T11:40:06.060

```
private static T GetTruck<T>(int param) where T : Car, new()
{
    return new T() {NumberOfWheels = param} ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:40:13.953

**试试这个 ：**

```
public T getCarC<T>(int param) where T : Car, new()
        {
            T truck=new T();
            truck.NumberOfWheels = param;

            return track;
        } 
```

泛型是 C# 2.0 最强大的特性。泛型允许您定义类型安全的数据结构，而无需提交实际的数据类型。

**从泛型基类派生时，您必须提供类型参数而不是基类的泛型类型参数：**

```
public class BaseClass<T>
{...}
public class SubClass : BaseClass<int>
{...} 
```

**如果子类是泛型的，而不是具体的类型参数，您可以使用子类泛型类型参数作为泛型基类的指定类型：**

```
public class SubClass<T> : BaseClass<T> 
{...} 
```

**使用子类泛型类型参数时，必须在子类级别重复基类级别规定的任何约束。例如，推导约束：**

```
public class BaseClass<T>  where T : ISomeInterface 
{...}
public class SubClass<T> : BaseClass<T> where T : ISomeInterface
{...} 
```

**或构造函数约束：**

```
public class BaseClass<T>  where T : new()
{   
   public T SomeMethod()
   {
      return new T();
   }
}
public class SubClass<T> : BaseClass<T> where T : new() 
{...} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:43:34.563

您需要使用泛型类型约束来执行此操作。这些使您可以对传递的类型提出要求。

它看起来像这样：

```
public static T GetCar<T>(int param)
    where T : Car, new() // Must inherit from Car, must have a parameterless constructor
{
    return new T() { NumberOfWheels = param };
} 
```

# ios - 使用 UIScrollView 水平滚动似乎不适用于 Autolayout

> ID：14671992
> 
> 赞同：1
> 
> 时间：2013-02-03T11:31:25.750
> 
> 标签：ios, objective-c, uiscrollview, uiimageview, autolayout

我正在尝试使用`UIScrollView`和创建一个水平滚动`UIImageView`。图像视图的宽度为 1280 像素（4 页），滚动视图的宽度为 320 像素。当我在没有自动布局模式的情况下使用此代码时，滚动工作正常：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.scrollView.scrollEnabled = YES;
    self.scrollView.showsVerticalScrollIndicator = NO;
    self.scrollView.showsHorizontalScrollIndicator = NO;
    CGRect imageFrame = self.helpImageView.frame;
    NSLog(@"imageFrame w: %f",self.helpImageView.frame.size.width); //prints 1280.000000
    [self.scrollView setContentSize:imageFrame.size];
    NSLog(@"contentSize w: %f",self.scrollView.contentSize.width); //prints 1280.0000
    NSLog(@"scrollFrame w: %f",self.scrollView.frame.size.width); //prints 320.00
} 
```

但是，如果我想使用 Autolayout，此代码会返回相同的结果，但`UIScrollView`不会滚动。为什么？？？我正在使用这些限制：

```
Bottom space to: ScrollView Equals:32.0
Leading space to: ScrollView
Trailing space to: ScrollView
Top Space To: SCrollView Equals:-20.0
Bottom Space To: View Equals:-12.0
Leading space to: View
Top Space To: View Equals:427.0
Trailing space to: View 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:31:48.753

我还创建了水平滚动视图，然后初始值如下。

自定义滚动视图.m：

```
self.showsHorizontalScrollIndicator = NO;
self.showsVerticalScrollIndicator = NO;
self.scrollsToTop = NO;
self.delegate = (id)self;
self.contentSize = CGSizeMake(320.0 * PAGE_COUNT, 420.0);
self.pagingEnabled = YES;
self.bounces = NO;

for (int i = 0; i < PAGE_COUNT; i++) {
//  NSString *str = [NSString stringWithFormat:@"%@%d%@", @"foo", i, @".png"];
    UIImageView * imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:str]];
//  imgView.frame = CGRectMake(320.0f * i + 10, 0, 300, 300 * 1.33);
    [self addSubview:imgView];
} 
```

在这个项目中，PAGE_COUNT=4 和 4 个图像是 foo0.png ~ foo3.png。

# jquery - 页面滚动时淡化文本

> ID：14671993
> 
> 赞同：3
> 
> 时间：2013-02-03T11:31:26.030
> 
> 标签：jquery, fadeout

我有这个基本的例子工作：

[http://www.mharrisweb.co.uk/tester.htm](http://www.mharrisweb.co.uk/tester.htm)

无论如何我可以让褪色的文本稍微滚动，以创造一个更流畅的过渡？

喜欢这个网站：

[http://themetrust.com/demos/hero/](http://themetrust.com/demos/hero/)

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:34:01.210

用[这个](http://jsfiddle.net/a4FM9/2/)

```
var divs = $('.social, .title');
$(window).scroll(function(){
   if($(window).scrollTop()<10){
         divs.stop(true,true).fadeIn("fast");
   } else {
         divs.stop(true,true).fadeOut("fast");
   }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T11:54:07.113

只需像处理不透明度一样操纵文本的边距。

例子：

```
jQuery(function($) {
    var divs = $('.fade');
    $(window).on('scroll', function() {
        var st = $(this).scrollTop();
        divs.css({ 
            'margin-top' : -(st/3)+"px", 
            'opacity' : 1 - st/35
        }); 
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:34:16.483

用这个：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

它允许您将元素平滑地移动到给定坐标，您可以使用以下方法确定：

[http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

你也需要这个：

[http://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

它允许您淡化到特定的透明度，而不是一直到完全透明。如果您希望它看起来像您给出的“themetrust.com”示例，您将需要它，如果您注意到如果您只滚动一点，它只会褪色一点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:03:38.350

这是结合了一些已经讨论过的想法的东西。

```
$(window).scroll(function(){
    var top = ($(window).scrollTop() > 0) ? $(window).scrollTop() : 1;
    $('.fade').stop(true, true).fadeTo(0, 1 / top);
    $('.fade').css('top', top * 1.3);             
}); 
```

[jsfiddle](http://jsfiddle.net/q7u4d/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-18T13:44:23.623

```
window.onscroll = function() {
    scrollFunction()
};

function scrollFunction() {
  if (window.scrollY >= 259 && window.scrollY <= 838) {
    document.querySelector(".elegance").style.left = "50%";
  } else {
    document.querySelector(".elegance").style.left = "-500%";
  }
}
```

```
top:50%;
        left:-50%;
        transform: translate(-50%,-50%);
        width: 60% !important;
        transition:  left 1.3s linear;
```

> 只需使用开发人员工具和使用 //window.scrollY// 从您希望它淡入的位置检查您将获得页面宽度的某个值

# java - 无法在最新的 Linux 和 Mac 上的浏览 器中运行 Java7u13 JFX2.2.5

> ID：14671997
> 
> 赞同：0
> 
> 时间：2013-02-03T11:31:27.623
> 
> 标签：java, linux, macos, cross-browser, javafx-2

我无法在 Oracle Linux 6.3 x86 和最新的 MacOS 的浏览器（所有可能的浏览器）中启动 JavaFX 2.2.5 应用程序。我有来自 Oracle 的最新 Java 7 u 13。JavaFX Netbeans 示例、我的应用程序和 Ensamble（[http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html)）都不起作用。

如果我将它们作为普通应用程序启动，但不是从浏览器启动，这些应用程序就可以工作。Java 在这些系统上运行良好，只是我无法在浏览器中启动 JFX 2。

应该做什么？我的客户需要从浏览器启动应用程序的灵活性。它在几个版本前工作，但现在我无法启动它们。浏览器告诉我我没有 Java。（他们使用 Java 显示该图像，该图像重定向到我可以下载 Java 的页面）。我还尝试从该链接仅安装 JRE。我已经删除并重新安装了 Java。

还有其他人面临这个问题吗？任何帮助都会非常有用。

我也在 oracle 论坛上发布了这个：[https ://forums.oracle.com/forums/thread.jspa?threadID=2494131](https://forums.oracle.com/forums/thread.jspa?threadID=2494131)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:08:16.807

我可以访问我客户的 Mac 机器。我的道歉。他们的 Mac 上有 7u12。

令人高兴的是，甲骨文似乎设法让 JFX 在具有 7u13 的浏览器中工作。

关于Linux，我终于让它工作了，但不要忘记“firefox/plugins”和“firefox/plugin”（**最新的是错误的**）。Oracle 应该从他们的描述中更新这个错误：http: [//java.com/en/download/help/linux_install.xml#enable](http://java.com/en/download/help/linux_install.xml#enable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:35:15.957

此外，在 XP/sp3 (IE8) 上安装 JRE 7u13 后，“验证 Java 版本”页面 ( [http://java.com/en/download/installed.jsp](http://java.com/en/download/installed.jsp) ) 会产生数据执行保护 (DEP) 异常