# StackOverflow 问答 13803000-13803999

# vb.net - 如何从一个文本框中拆分两个单词并将其放入两个单独的文本框中

> ID：13803002
> 
> 赞同：-2
> 
> 时间：2012-12-10T14:33:45.023
> 
> 标签：vb.net

当我单击按钮时，如何在一个文本框中拆分两个单词并将第一个单词放在文本框 1 中，将第二个单词放在文本框 2 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:35:21.997

像这样？

```
Private Sub SomeButton_Click(sender As System.Object, e As System.EventArgs) Handles SomeButton.Click
    Dim words = txt1.Text.Split()
    txt2.Text = words(0).Trim()
    If words.Length <> 1
        txt3.Text = words(1).Trim()
    End If
End Sub 
```

# java - Intellij IDEA 12 中忽略了 Maven 配置文件

> ID：13803007
> 
> 赞同：4
> 
> 时间：2012-12-10T14:34:07.020
> 
> 标签：java, maven, intellij-idea

我的项目有一些在配置文件中定义的 .JAR。例如，如果 PostgreSQL 配置文件处于活动状态，则加载 PostgreSQL JAR，或者如果 MySQL 配置文件处于活动状态，则加载 MySQL JAR。

我已将此项目导入 IDEA，并在 Maven 面板中设置 PostgreSQL 配置文件处于活动状态，但构建工件时未添加 jar，因此未部署到 Tomcat，然后 WebApp 无法启动。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:29:56.100

我有一个类似的问题。有些项目 `<activeByDefault>true</activeByDefault>`在某些配置文件中有选项，但它们不会构建（因为我的项目中有多个 maven 模块）。

我删除了该选项并单独为每个项目激活了每个配置文件。我工作了，但行为与 IntelliJ 11 或 10 不同。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T20:43:49.660

看起来这是Intellij IDEA 中[公认的错误](http://youtrack.jetbrains.com/issue/IDEA-97932)。

# sockets - 使用套接字的双向通信如何工作？

> ID：13803012
> 
> 赞同：0
> 
> 时间：2012-12-10T14:34:24.133
> 
> 标签：sockets

我开始在 C# 中进行套接字编程。我查看了几个示例程序，它们打开一个套接字，从套接字获取一个流并使用相同的流从客户端读取数据并将数据写入客户端。这究竟是如何工作的？我原以为必须有两个单独的流——一个供服务器读取，一个供它写入。套接字如何区分服务器要读取的数据和服务器要写入的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:44:52.520

Internally there are two buffers - incoming data that you can read, and outgoing data that you have written. You drain the first buffer, and the implementation re-fills it by reading from the socket. You push your data into the second buffer, and the implementation drains it by writing to the socket.

# grails - Grails Spring Security 请求参数

> ID：13803018
> 
> 赞同：0
> 
> 时间：2012-12-10T14:34:44.420
> 
> 标签：grails, spring-security

我正在使用 grails 1.3.8 和 spring 安全插件。我想在重定向到*auth*之前获取请求参数。（例如，我想得到

> /我的页面

，但我没有登录，所以它重定向到

> /登录

页）如何获取请求参数

> /我的页面

在我的情况下（下面的代码）

我的登录控制器有：

```
def auth = {
        redirect(controller: 'consumer', action: 'login', params: params)
    } 
```

和我的消费者控制器：

```
def login = {
        def config = SpringSecurityUtils.securityConfig

        if (springSecurityService.isLoggedIn()) {
            redirect uri: config.successHandler.defaultTargetUrl
            return
        }

        String postUrl = "${request.contextPath}${config.apf.filterProcessesUrl}"
        [postUrl: postUrl, rememberMeParameter: config.rememberMe.parameter]
    } 
```

在这种情况下，我登录后，我有空白页。

更新：现在我看看侧面

> request.session.getAttribute('SPRING_SECURITY_SAVED_REQUEST_KEY')

但我不知道，如何使用参数重定向

> 默认保存请求

例如，在另一个页面上，

> /mypageDescription

# eclipse - Eclipse 插件：如果未选择 xml，则禁用上下文菜单贡献

> ID：13803019
> 
> 赞同：1
> 
> 时间：2012-12-10T14:34:46.340
> 
> 标签：eclipse, eclipse-plugin

我们正在开发一个 eclipse-plugin 并对 package-explorer 中的上下文菜单做出一些贡献。使用 old `org.eclipse.ui.popupMenus`，我们可以在贡献中指定一个名称过滤器，因此仅当所选文件具有特定名称时才会显示菜单条目：

```
<extension
         point="org.eclipse.ui.popupMenus">
    <objectContribution
            adaptable="false"
            id="..."
            nameFilter="file.xml"
            objectClass="org.eclipse.core.resources.IFile">
        ...
    </objectContribution>
</extension> 
```

现在，我们想使用*新*的方式来创建上下文菜单，如果它没有文件，也可以禁用该条目：

```
 <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
         <command
               commandId="..."
               label="..."
               style="push">
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="..."
            name="...">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="..."
            commandId="...">
         <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <adapt
                        type="org.eclipse.core.resources.IFile">
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
   </extension> 
```

（同时比较：[在 Eclipse 插件中启用/禁用菜单项](https://stackoverflow.com/questions/11450052/enable-disable-menu-item-in-eclipse-plugin)）

但是，我们不仅希望在没有选择文件时禁用该条目，而且在文件不是 xml 文件时禁用该条目。我们试图破解`<activeWhen>`-tag 中的某些内容，但我们找不到让它也监视文件名的解决方案。

有可能这样做吗？如果：如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:56:33.560

有一个[关于 Menu Contributions/IFile objectContribution 的 Eclipse wiki 页面](http://wiki.eclipse.org/Menu_Contributions/IFile_objectContribution)可能会有所帮助。我自己没有测试过，但是在使用命令框架时，`nameFilter`基于操作的扩展的属性似乎可以替换为调用带有 id 的预定义属性测试器。`org.eclipse.core.resources.name`

# ios - navigator.app 未定义

> ID：13803020
> 
> 赞同：7
> 
> 时间：2012-12-10T14:34:47.243
> 
> 标签：ios, xcode, cordova

我正在尝试使用：

```
navigator.app.loadUrl("http://www.google.com", { openExternal:true } ); 
```

它不适用于 iOS，无论是在设备上还是模拟器上。我在一个类似的项目中使用了同一行代码，并且我在两者（1.5.0）上都使用了相同版本的phonegap。在 android 上，相同的代码可以完美运行。设备就绪功能也会触发，所以我猜 phonegap 正在加载。我没有使用android的phonegap.js文件，我已经检查过了。

在调试时我发现这`navigator.app`是一个未定义的对象。有没有人知道我可能缺少导致这种情况的配置？

谢谢你的帮助。

干杯，米格尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T15:31:32.707

“navigator.app”对象仅在 Android 上可用。幸运的是，在即将发布的 PhoneGap 2.3.0 版本中，您将能够：

```
window.open("http://www.google.com", "_system"); 
```

做你想做的事。

# c++ - 成员函数删除当前实例后

> ID：13803023
> 
> 赞同：0
> 
> 时间：2012-12-10T14:35:04.280
> 
> 标签：c++

成员函数删除当前实例后，如何停止后面的代码执行。查看代码。

```
#include <iostream>
class A;
void callfun(int i,A *pt);

class A {
public:
    A() { sss="this is A."; }
    virtual ~A() {}
    void foo(int i) {
        callfun(i,this);　　//call a function.Don't return value.Maybe delete instance.
        out();　　　　　　　 
    }
private:
    void out() {
        std::cout<< "Out:" <<std::endl;
        std::cout<< sss << std::endl;
    }
    std::string sss;
}

void callfun(int i,A *pt) {
    if (i==0)
        delete pt;  //If conditions are matched,delete instance.
}

int main() {
    A *a1=new A;
    a1->foo(1);     //print:Out:this is A.
    a1->foo(0);     //delete a1,don't print.But in fact it would print.how to do？
} 
```

我想要结果：foo(1) 输出 "Out:this is A.",foo(0) 删除实例，不输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:38:50.190

免责声明：这很糟糕。**不好**。糟糕的。

```
void foo(int i) {
    if ( i == 1)  
    {
       callfun(i,this);　　//call a function.Don't return value.Maybe delete instance.
       out();　　　　　　　  
    }
    else
    {
       delete this;
    }
} 
```

请注意，在您完成之后`delete this;`（实际需要这样做的情况很少见），`static`在您的实例上调用任何非函数、访问指针（在方法内部或外部）或访问任何数据成员都是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:48:35.317

这是不可能的，因为评论指出`foo`不应该知道删除。这本身就是下一行未定义的行为。如果`callfun`调用`delete this`，则`foo`必须立即返回，甚至不看`this`。因此，您甚至不能在`this`.

我得到的最接近的是

```
void callfun(int i, A *pt) {
  if (i==0) {
    delete pt;
    throw 0;
  }
}
void A::foo(int i) {
  try {
    callfun(i,this);　　// No _visible_ return value.
    out();　　　　　　　 
  } catch (int) { } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:58:05.270

如果您在内部删除，封闭范围如何知道它已被删除？您应该只标记它并将其留给用户/封闭范围来实际处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T04:51:03.097

下面是更完整的代码。

```
class A;
class B {
public:
　　void creat() {
        pp=new A;
    }
    void remove() {
        delete pp;
        pp=NULL;
    }
private:
    A *pp;
};

class A {
public:
    void foo(int i) {
        callfun(i,this);　
　　　　if (flag)
            out();　　　　　　
        else 
            bb->remove();
    }
private:
    B *bb;
}; 
```

# git - 如何为`git difftool`设置默认差异工具

> ID：13803026
> 
> 赞同：2
> 
> 时间：2012-12-10T14:35:15.553
> 
> 标签：git

我有一个自定义的 diff 工具，它可以作为`git difftool -x mydiff.exe`，但即使我尝试设置 GIT_EXTERNAL_TOOL 也不起作用`git config diff.external`，我怎样才能为它创建一个默认的工具路径/名称`git difftool`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:36:26.417

我在我的`.gitconfig`：

```
[difftool "bbdiff"]
        cmd = bbdiff --wait --resume --ignore-spaces "$LOCAL" "$REMOTE" 
```

这会将工具“bbdiff”设置为我的`git difftool`.

# cordova - 如何在phonegap中将多个图像上传到服务器

> ID：13803027
> 
> 赞同：3
> 
> 时间：2012-12-10T14:35:18.377
> 
> 标签：cordova

我正在使用 Phonegap 开发 iOs 应用程序，我想使用文件上传插件同时将多个图像上传到 Rails 服务器，请任何人帮助**如何将多个图像上传到服务器**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:45:31.750

我认为如果您需要上传多个文件，则无法同时上传所有文件。您需要循环一次上传一个文件。

例如：

```
//list of images URI
var items = [imgURI1,imgURI2,imgURI3];
$.each(items,function(){
    uploudPhoto($(this));
});
function uploadPhoto(imageURI) {
    var options = new FileUploadOptions();
    options.fileKey="file";
    options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
    options.mimeType="image/jpeg";

    var params = new Object();
    params.value1 = "test";
    params.value2 = "param";

    options.params = params;

    var ft = new FileTransfer();
    ft.upload(imageURI, encodeURI("http://some.server.com/upload.php"), win, fail, options);
} 
```

# c# - 删除最后一个逗号

> ID：13803030
> 
> 赞同：1
> 
> 时间：2012-12-10T14:35:28.830
> 
> 标签：c#, string, substring

我有一个像这样的字符串：

> 选择 Sparte_id、Registernummer、Gesellschaft_ID、pk_id、Gesellschaft_Name、gesellschaft_crm、

现在我想从字符串中删除最后一个 ,（逗号）。最后一个逗号后有一个、两个或三个空格。

我正在考虑删除最后几个字母。我怎么能这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T14:36:24.810

使用[string.TrimEnd](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)：

```
var result = query.TrimEnd(',', ' ', '\n'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:39:56.730

一个建议 - 看起来您正在尝试构建字段列表（逗号分隔） - 尝试使用：

```
var fields = new List<string>();
var csv = fields.Aggregate((x,y) => x + ";" + y); 
```

# java - Java构造函数和静态方法

> ID：13803032
> 
> 赞同：18
> 
> 时间：2012-12-10T14:35:43.243
> 
> 标签：java

什么时候应该使用构造函数，什么时候应该使用静态方法？

你能用小片段解释一下吗？我浏览了一些线程，但我仍然不清楚这一点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-10T14:49:06.250

***Joshua Bloch***建议使用静态工厂方法而不是构造函数（我认为这是一个很好的做法）。几个优点和缺点：

**静态工厂方法的优点**：

*   与构造函数不同，它们有名称
*   与构造函数不同，它们不需要在每次调用时都创建一个新对象（您可以缓存实例：例如`Boolean.valueOf(..)`
*   与构造函数不同，它们可以返回其返回类型的任何子类型的对象（非常灵活）

**静态工厂方法的缺点**：

*   它们与其他静态方法并没有真正的区别（如果您不熟悉 API，很难找出如何初始化对象）
*   主要缺点（如果您只使用静态工厂方法，并将构造函数设为私有）是您不能子类化该类。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-10T14:37:41.940

当您只想返回该类型的新对象并且想要简单时，请使用公共构造函数。

一个很好的例子是 StringBuilder，因为它是可变的，你可能每次都想要一个新对象。

```
public String toString() {
    StringBuilder sb = new StringBuilder();
    // append fields to the sb
    return sb.toString();
} 
```

当您可能想要重用对象（尤其是不可变对象）、您可能想要返回子类或想要描述构造时，请使用静态因子方法。一个很好的例子是 EnumSet，它有许多静态工厂，即使有些具有相同的参数，它们也会做不同的事情。

```
EnumSet.noneOf(RetentionPolicy.class);
// has the same arguments, but is not the same as
EnumSet.allOf(RetentionPolicy.class); 
```

在这种情况下，使用静态工厂可以清楚地说明这两种构造集合的方式之间的区别。

EnumSet 还可以返回两种不同的实现，一种针对具有少量值 (<= 64) 的枚举进行优化，`RegularEnumSet`另一种针对称为多个值的枚举进行优化`JumboEnumSet`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-10T14:41:23.317

如果您的类具有状态（即使对于单个实例；单例模式），请始终使用构造函数。

仅对 java.lang.Math 等实用方法使用静态

例子：

```
public static int max(int a, int b) {
    return (a >= b) ? a : b;
} 
```

不改变对象的任何状态（实例变量），因此它可以被声明为静态的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-10T14:41:23.807

1.  当您需要一个对象和其他东西（如函数和变量）时，请使用构造函数，每个对象都有一个副本。
2.  当您想在不创建对象的情况下做某事时，请使用静态方法。

    ```
    Example:
    public class Test {
    public int value;
    public static int staticValue;
    public int getValue() {
    return ++value;
    }

    public static int getStaticValue() {
    return ++staticValue;
    }
    }

    public class TestClass {
    public static void main(String[] args) {
    Test obj = new Test();
    Test obj1 = new Test();
    S.o.p(obj.getValue());
    S.o.p(obj1.getValue));
    S.o.p(Test.getStaticValue());
    S.o.p(Test.getStaticValue());
    }
    } 
    ```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-10T14:39:41.813

静态工厂方法有名字，构造函数没有。因此，工厂方法可以自然地记录它们所做的事情，而构造函数却不能。例如，查看 Guava 库中的工厂方法，例如[`ImmutableMap.copyOf(otherMap)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableMap.html#copyOf%28java.util.Map%29). 虽然这可能对构造行为几乎没有影响，但它对代码的可读性有很大影响。如果您要发布 API，请务必考虑这一点。

当您需要对正在创建的对象进行任何更复杂的配置时，您也可以使用工厂，特别是如果您需要发布到其他线程（在池中注册、作为 MBean 公开，以及所有其他方式...... ) 以避免发布不雅内容。（参见例如 Java 并发实践第 3.2 节）

*做某事*（例如）的静态方法`Math.min`与静态工厂并不真正相同，静态工厂可以被认为是构造函数的直接替代品，增加了灵活性、可进化性和（通常）清晰性。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-10T14:40:18.027

每当您需要创建对象的实例时，都必须使用构造函数。

所以，如果你想创建一个 Car 对象，那么你需要一个构造函数。

关键字 static 意味着可以在不创建实例的情况下调用您的方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-11T19:02:19.130

```
class Car
{
   private int num_of_seats;

   public Car(int number_of_seats)
   {
      this.num_of_seats = number_of_seats;
   }

   // You want to get the name of the class that has to do with
   // this class, but it's not bounded with any data of the class
   // itself. So you don't need any instance of the class, and 
   // you can declare it as static.
   static String getClassName()
   {
      return "[Car]";
   }
} 
```

通常，您将使用带有与对象实例不相关的数据的静态类。

另一个例子是：

```
class Ring
{
   private List nodes;

   public Ring(List nodes) 
   {
      this.nodes = nodes;
   }

   // You want to calculate the distance of two ids on the ring, but
   // you don't care about the ring. You care only about the ids.
   // However, this functionality logical falls into the notion of
   // the ring, that's why you put it here and you can declare it
   // as static. That way you don't have to manage the instance of 
   // ring.
   static double calculateDistance(int id_1, int id_2)
   {
      return (id_1 - id_2)/383; // The divisor is just random just like the calculation.
   }
} 
```

正如上面的帖子所说，这只是你想做什么以及你想怎么做的问题。另外，不要试图立即理解所有内容，编写一些代码然后尝试该代码的不同方法并尝试理解您的代码的作用。例子很好，但你需要写出来然后理解你做了什么。我认为这是您弄清楚为什么要以必须的方式雇用员工的唯一方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-10T14:46:11.900

静态方法不必每次都实例化新对象。由于对象实例化很昂贵，它允许将实例缓存在对象中。因此，它可以提高性能。

这是来自[Effective Java](http://my.safaribooksonline.com/book/programming/java/9780137150021/creating-and-destroying-objects/ch02lev1sec1)的解释：

> 这允许不可变类（第 15 条）使用预先构造的实例，或在构造实例时缓存实例，并重复分配它们以避免创建不必要的重复对象。Boolean.valueOf(boolean) 方法说明了这种技术：它从不创建对象。这种技术类似于享元模式 [Gamma95, p. 195]。如果经常请求等效对象，尤其是创建它们的成本很高时，它可以极大地提高性能。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-10T14:54:22.593

即如果你想使用一个单例，这意味着你只有一个对象的实例，它可能与其他人共享，那么你需要一个静态方法，它将在内部调用构造函数。因此，每次有人想要该对象的实例时，您将始终返回相同的值，因此您只会为一个对象消耗内存。在面向对象编程中，在每种 OO 语言中，您总是需要一个构造函数。在 java 和许多其他语言中，对象的默认构造函数是隐含的，并且是自动构建的。但是您需要一些自定义功能，您必须自己制作。

在上面，您可以看到一些很好的用法示例。但是，如果您有特定的想法，请告诉我们。我的意思是，如果您有不确定是否应该使用静态方法或构造函数的特定情况。无论如何，您肯定需要一个构造函数，但我不确定静态方法。

# mysql - 实现锁定mysql

> ID：13803035
> 
> 赞同：0
> 
> 时间：2012-12-10T14:36:02.867
> 
> 标签：mysql

我想使用 mysql 行级锁。我无法锁定整个表。我想避免两个进程同时为服务器处理两个不同的消息。我认为我可以调用一些表： `server_lock`如果一个进程开始在服务器上工作，它将在表中插入一行。

这种方法的问题是，如果应用程序崩溃。我们需要手动解除锁定。如果应用程序崩溃，有没有办法可以释放行级锁和锁？

**编辑** 我使用 C++ 作为语言。我的应用程序类似于消息队列。但不同之处在于，每个队列都有一个进程填充两个队列。动作之后，如果动作属于同一个对象并且两者都在处理同一个对象，则可能会导致错误的数据。所以我想要一个锁定机制 b/w 这两个队列，这样两个处理器就不会同时修改同一个对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:47:58.890

我可以想到两种方法：

*   在您删除锁的程序上实现一些错误处理程序。在不了解您的程序的情况下，很难说如何执行此操作，但大多数语言都有一些方法可以在崩溃退出之前完成一些工作。这是危险的，因为当事情不正确时会发生崩溃。如果你继续做任何工作，你可能会损坏数据库或类似的东西。
*   定期更新锁。在您的程序上添加一个定期重新获取锁的线程，或者在您正在执行的某个循环中重新获取锁。然后，当一个锁有一段时间没有更新时，你就知道它属于一个崩溃的程序。

# sql - 将时间戳四舍五入到最接近的秒数

> ID：13803036
> 
> 赞同：3
> 
> 时间：2012-12-10T14:36:10.970
> 
> 标签：sql, oracle, oracle11g

我有一个包含时间戳值的表，我想将这些值中的每一个四舍五入到最接近的秒，但我无法让它正常工作。

到目前为止我的测试数据和方法：

```
with v_data as
 (select to_timestamp('2012-12-10 10:49:30.00000000',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:30',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual
  union all
  select to_timestamp('2012-12-10 10:49:30.46300000',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:30',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual
  union all
  select to_timestamp('2012-12-10 10:49:30.50000000',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:31',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual
  union all
  select to_timestamp('2012-12-10 10:49:30.56300000',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:31',
                      'YYYY-MM-DD HH24:mi:ss') expected

    from dual
  union all
  select to_timestamp('2012-12-10 10:49:30.99999999',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:31',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual)
select v1.base_val,
       v1.expected,
       v1.base_val + (0.5 / 86400) solution_round,
       cast(v1.base_val as date) as solution_cast,
       extract(second from v1.base_val) - trunc(extract(second from v1.base_val)) fractional_seconds,
       v1.base_val -
       (extract(second from v1.base_val) - trunc(extract(second from v1.base_val))) / 86400 solution_add
  from v_data v1 
```

我所有的解决方案都有一个缺陷：

*   solution_round 总是四舍五入
*   solution_cast 适用于 11gR1，但在 11gR2 中，它总是向下舍入（原因：Oracle 改变了行为 - 它现在截断而不是四舍五入，请参阅[https://forums.oracle.com/forums/thread.jspa?threadID=2242066](https://forums.oracle.com/forums/thread.jspa?threadID=2242066)）
*   solution_add 返回最后三行的 10:49:29 而不是 10:49:31

我*想*solution_add 应该可以工作，我只是犯了一些愚蠢的错误:-)

**编辑：**

Ben 的解决方案（见下文）对我有用，但依赖 to_char(timestamp, 'FF') 似乎很危险——返回的位数取决于时间戳的定义。

我正在使用 to_char(timestamp, 'FF3') 代替，它似乎可靠地返回毫秒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:24:16.693

我的首选方法是使用 CASE 语句，并且您可以将小数秒转换为数字，即：

```
select base_val, expected
     , to_timestamp(to_char(base_val,'YYYY-MM-DD HH24:mi:ss'),'YYYY-MM-DD HH24:mi:ss')
        + case when to_number(to_char(base_val, 'FF8')) >= 500000000 
                    then interval '1' second
               else interval '0' second
          end as solution_add
  from v_data 
```

这将删除小数秒。然后计算出您的 TIMESTAMP 的小数秒部分是否为 0.5 秒或更多。如果是，则添加第二个，否则不要。

我发现它更清晰，更容易理解发生了什么。它返回以下内容：

```
with v_data as
 (select to_timestamp('2012-12-10 10:49:30.00000000',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:30',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual
  union all
  select to_timestamp('2012-12-10 10:49:30.46300000',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:30',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual
  union all
  select to_timestamp('2012-12-10 10:49:30.50000000',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:31',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual
  union all
  select to_timestamp('2012-12-10 10:49:30.56300000',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:31',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual
  union all
  select to_timestamp('2012-12-10 10:49:30.99999999',
                      'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
         to_timestamp('2012-12-10 10:49:31',
                      'YYYY-MM-DD HH24:mi:ss') expected
    from dual
         )
select base_val, expected
     , to_timestamp(to_char(base_val, 'YYYY-MM-DD HH24:mi:ss'), 'YYYY-MM-DD HH24:mi:ss')
        + case when to_number(to_char(base_val, 'FF8')) >= 500000000 
                    then interval '1' second
               else interval '0' second
          end as solution_add
  from v_data;

BASE_VAL                     EXPECTED                     SOLUTION_ADD
---------------------------- ---------------------------- ----------------------------
10-DEC-12 10.49.30.000000000 10-DEC-12 10.49.30.000000000 10-DEC-12 10.49.30.000000000
10-DEC-12 10.49.30.463000000 10-DEC-12 10.49.30.000000000 10-DEC-12 10.49.30.000000000
10-DEC-12 10.49.30.500000000 10-DEC-12 10.49.31.000000000 10-DEC-12 10.49.31.000000000
10-DEC-12 10.49.30.563000000 10-DEC-12 10.49.31.000000000 10-DEC-12 10.49.31.000000000
10-DEC-12 10.49.30.999999990 10-DEC-12 10.49.31.000000000 10-DEC-12 10.49.31.000000000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:31:55.267

您的最终方法有效（solution_add），它只是您使用的-而不是+。11g 的行为是由于一个错误修复（在 10g 及更低版本中，plsql 在使用 cast 时表现为“trunc”，而 SQL 表现为圆形。Oracle 认为 PLSQL 是正确的，并相应地更改了 11g。

即使用：

```
 v1.base_val +
   (extract(second from v1.base_val) - trunc(extract(second from v1.base_val))) / 86400 solution_add 
```

虽然我可能会明确指定它以消除从时间戳到日期的隐式转换（避免狡猾的 cast()）

```
to_date(to_char(v1.base_val, 'dd-mm-yyyy hh24:mi:ss'), 'dd-mm-yyyy hh24:mi:ss')+
       (( extract(second from v1.base_val) - trunc(extract(second from v1.base_val))) / 86400) 
```

例如：

```
SQL> select * from v$version;

BANNER
----------------------------------------------------------------
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bi
PL/SQL Release 10.2.0.4.0 - Production
CORE    10.2.0.4.0      Production
TNS for Linux: Version 10.2.0.4.0 - Production
NLSRTL Version 10.2.0.4.0 - Production

SQL> with v_data as
  2   (select to_timestamp('2012-12-10 10:49:30.00000000',
  3                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
  4           to_timestamp('2012-12-10 10:49:30',
  5                        'YYYY-MM-DD HH24:mi:ss') expected
  6      from dual
  7    union all
  8    select to_timestamp('2012-12-10 10:49:30.46300000',
  9                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
 10           to_timestamp('2012-12-10 10:49:30',
 11                        'YYYY-MM-DD HH24:mi:ss') expected
 12      from dual
 13    union all
 14    select to_timestamp('2012-12-10 10:49:30.50000000',
 15                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
 16           to_timestamp('2012-12-10 10:49:31',
 17                        'YYYY-MM-DD HH24:mi:ss') expected
 18      from dual
 19    union all
 20    select to_timestamp('2012-12-10 10:49:30.56300000',
 21                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
 22           to_timestamp('2012-12-10 10:49:31',
 23                        'YYYY-MM-DD HH24:mi:ss') expected
 24      from dual
 25    union all
 26    select to_timestamp('2012-12-10 10:49:30.99999999',
 27                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
 28           to_timestamp('2012-12-10 10:49:31',
 29                        'YYYY-MM-DD HH24:mi:ss') expected
 30      from dual)
 31  select v1.base_val,
 32         v1.expected,
 33         v1.base_val +
 34         (extract(second from v1.base_val) - trunc(extract(second from v1.base_val))) / 86400 solution_add,
 35         to_date(to_char(v1.base_val, 'dd-mm-yyyy hh24:mi:ss'), 'dd-mm-yyyy hh24:mi:ss')+
 36         (( extract(second from v1.base_val) - trunc(extract(second from v1.base_val))) / 86400) solution_add2
 37    from v_data v1;

BASE_VAL                  EXPECTED                  SOLUTION_ADD              SOLUTION_ADD2
------------------------- ------------------------- ------------------------- -------------------------
10-dec-12 10:49:30000     10-dec-12 10:49:30000     10-dec-2012 10:49:30      10-dec-2012 10:49:30
10-dec-12 10:49:30463     10-dec-12 10:49:30000     10-dec-2012 10:49:30      10-dec-2012 10:49:30
10-dec-12 10:49:30500     10-dec-12 10:49:31000     10-dec-2012 10:49:31      10-dec-2012 10:49:31
10-dec-12 10:49:30563     10-dec-12 10:49:31000     10-dec-2012 10:49:31      10-dec-2012 10:49:31
10-dec-12 10:49:30999     10-dec-12 10:49:31000     10-dec-2012 10:49:31      10-dec-2012 10:49:31

SQL> select * from v$version;

BANNER
--------------------------------------------------------------------------------
Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production
PL/SQL Release 11.2.0.2.0 - Production
CORE    11.2.0.2.0      Production
TNS for Linux: Version 11.2.0.2.0 - Production
NLSRTL Version 11.2.0.2.0 - Production

SQL> with v_data as
  2   (select to_timestamp('2012-12-10 10:49:30.00000000',
  3                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
  4           to_timestamp('2012-12-10 10:49:30',
  5                        'YYYY-MM-DD HH24:mi:ss') expected
  6      from dual
  7    union all
  8    select to_timestamp('2012-12-10 10:49:30.46300000',
  9                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
 10           to_timestamp('2012-12-10 10:49:30',
 11                        'YYYY-MM-DD HH24:mi:ss') expected
 12      from dual
 13    union all
 14    select to_timestamp('2012-12-10 10:49:30.50000000',
 15                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
 16           to_timestamp('2012-12-10 10:49:31',
 17                        'YYYY-MM-DD HH24:mi:ss') expected
 18      from dual
 19    union all
 20    select to_timestamp('2012-12-10 10:49:30.56300000',
 21                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
 22           to_timestamp('2012-12-10 10:49:31',
 23                        'YYYY-MM-DD HH24:mi:ss') expected
 24      from dual
 25    union all
 26    select to_timestamp('2012-12-10 10:49:30.99999999',
 27                        'YYYY-MM-DD HH24:mi:ss.FF8') base_val,
 28           to_timestamp('2012-12-10 10:49:31',
 29                        'YYYY-MM-DD HH24:mi:ss') expected
 30      from dual)
 31  select v1.base_val,
 32         v1.expected,
 33         v1.base_val +
 34         (extract(second from v1.base_val) - trunc(extract(second from v1.base_val))) / 86400 solution_add,
 35         to_date(to_char(v1.base_val, 'dd-mm-yyyy hh24:mi:ss'), 'dd-mm-yyyy hh24:mi:ss')+
 36         (( extract(second from v1.base_val) - trunc(extract(second from v1.base_val))) / 86400) solution_add2
 37    from v_data v1;

BASE_VAL                  EXPECTED                  SOLUTION_ADD              SOLUTION_ADD2
------------------------- ------------------------- ------------------------- -------------------------
10-dec-12 10:49:30000     10-dec-12 10:49:30000     10-dec-12 10:49:30        10-dec-12 10:49:30
10-dec-12 10:49:30463     10-dec-12 10:49:30000     10-dec-12 10:49:30        10-dec-12 10:49:30
10-dec-12 10:49:30500     10-dec-12 10:49:31000     10-dec-12 10:49:31        10-dec-12 10:49:31
10-dec-12 10:49:30563     10-dec-12 10:49:31000     10-dec-12 10:49:31        10-dec-12 10:49:31
10-dec-12 10:49:30999     10-dec-12 10:49:31000     10-dec-12 10:49:31        10-dec-12 10:49:31 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-20T11:42:41.563

我对这个讨论非常非​​常晚，但万一有人搜索，这个问题有一个单行答案：

首先 CAST 到 TIMESTAMP(0) - 它没有小数秒，因此它们将被四舍五入。然后将结果转换为 DATE

```
alter session set nls_date_format='yyyy-mm-dd hh24:mi:ss';
with data as (select sys_extract_utc(localtimestamp) ts from dual)
select ts, cast(cast(ts as timestamp(0)) as date) dte
from data; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:42:30.790

您是否尝试过转换 to_date 并在那时进行舍入？

[http://www.java2s.com/Tutorial/Oracle/0260__Date-Timestamp-Functions/RoundingtotheNearestMinute.htm](http://www.java2s.com/Tutorial/Oracle/0260__Date-Timestamp-Functions/RoundingtotheNearestMinute.htm)

然后，您应该能够转换为时间戳。

显然将第 3 行的“MI”更改为“SS”

---UPDATE---

转换为日期将四舍五入到最接近的秒，因为 DATE 数据类型的精度为秒，因此转换为日期，然后转换为时间戳：

> to_timestamp(CAST('2012-12-10 10:49:30.99999999' AS DATE))

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-10T14:49:00.340

这是 T-SQL（不确定它是否适用于 Oracle）

```
DECLARE @tblTime TABLE (ID INT, myTime DATETIME2);
INSERT INTO @tblTime SELECT 1, GETDATE()

SELECT  myTime
    , CONVERT( DATETIME2, CONVERT( VARCHAR, DATEADD( SECOND, CASE WHEN DATEPART( MS, myTime) >= 500 THEN 1 ELSE -1 END, myTime ), 20), 20 ) AS timeRounded
FROM    @tblTime 
```

# c# - 确定按钮上的用户帐户控制

> ID：13803038
> 
> 赞同：6
> 
> 时间：2012-12-10T14:36:19.163
> 
> 标签：c#, windows, winforms, uac

我在互联网上研究了表单确定按钮上的 UAC 功能，但无法获取信息。与实施 UAC 相关的所有信息是他们以管理权限重新启动应用程序。

我的要求是制作应用程序，当用户单击带有 Shield 图标的 OK 按钮时，用户将能够通过提升用户权限将一些信息保存在 Windows 注册表中，但我不想用管理员重新启动应用程序权利。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T14:47:49.437

重新启动应用程序（或启动帮助应用程序）就是您要做的。启动应用程序时请求提升的权限会导致出现 UAC 确认屏幕。基本上，显示盾牌图标的目的是让用户知道确认屏幕即将出现。

您不必只是重新启动您的应用程序。如果您的应用程序允许多个实例，您可以使用指示要进行的注册表更改的命令行参数启动第二个副本。或者你可以有一个帮助应用程序来做管理事情，并根据需要启动它。辅助应用程序不需要创建或显示窗口；它可以是完全后台操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T14:51:12.950

可能您应该添加应用程序清单并需要管理员权限：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
        <security>
            <requestedPrivileges>
                <requestedExecutionLevel level="requireAdministrator" uiAccess="false"/>
            </requestedPrivileges>
        </security>
    </trustInfo>
</assembly> 
```

**编辑**

这可能不是最好的解决方案，因为整个应用程序都在提升的权限下运行，这可能是一个安全漏洞。

# git - 分支签出期间随机文件的权限被拒绝错误

> ID：13803039
> 
> 赞同：19
> 
> 时间：2012-12-10T14:36:20.940
> 
> 标签：git, git-extensions

突然之间，我在查看本地 master 分支时开始收到以下错误。有问题的文件以及错误本身似乎是随机的（有时结帐工作得很好）。

> ```
> "c:\Program Files (x86)\Git\bin\git.exe" checkout --merge "master"
> D   abc123.cs
> error: unable to create file abc123.cs (Permission denied)
> Switched to branch 'master'
> Done 
> ```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2017-03-01T17:24:23.583

只是关闭编辑器解决了我的问题。顺便说一句，我使用的是 Atom 编辑器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-18T22:37:08.813

我不知道你是否使用了 sublime text，但是当我遇到权限被拒绝的问题时，我注意到有一个许可证通知弹出；试图让你每隔一段时间就向 sublimetext3 捐款。

一旦我关闭该弹出窗口并再次运行命令，被拒绝的权限错误就消失了，一切正常。

我推断其他带有弹出通知的编辑器可能会导致此问题。

正如 bugged87 所提到的，重新启动肯定会消除任何弹出窗口或通知。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-10T18:03:58.123

就我而言，我的 Angular 应用程序仍在运行`ng serve`，给出了这个：

![Git Bash - ng 服务](../Images/6aa5f1fff293ebd9dc6542d812346fb7.png)

所以我只需要用`ctrl+c`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-16T17:58:57.520

前一段时间我也发生了同样的事情，我已经**关闭了我的 VScode**，输入`git checkout`并且它起作用了！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-13T15:17:23.180

[Daniel Hilgarth](https://stackoverflow.com/questions/13803039/permission-denied-errors-on-random-files-during-branch-checkout/61757476#comment18987538_13803039)在评论中的反病毒建议提醒我，在问题出现前不久我已经运行（并提前取消）文件恢复扫描。

如果这些扫描过程没有正确取消，它们可能会导致问题。

无论如何，重新启动我的机器解决了这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-12-03T23:14:30.383

关闭我的文本编辑器（Atom）修复它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-25T18:00:04.823

关闭 VSCode 并运行`git checkout master -f`对我有用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-14T17:16:35.543

对我来说，解决方案是打开 Windows 任务管理器并终止任何正在运行的 IIS 实例。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-09T21:48:29.123

关闭我所有的公开会议并开始一个新的会议对我有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-05-21T11:42:42.797

这是操作系统级别的错误，与 Git 无关！

有时通过关闭 IDE 和所有资源管理器解决问题，有时通过重新启动解决问题。

但最好的解决方案是创建另一个文件夹并在其中克隆项目。您也可以在克隆后删除旧项目。您不会在新文件夹中看到任何权限被拒绝的问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-04-09T10:08:06.753

Cmder 控制台上的同样问题；我刚刚关闭它，它成功了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-27T07:07:34.667

只需关闭 Visual Studio Code 编辑器即可解决我的问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-07-02T22:40:04.980

我刚刚在Win7上遇到了同样的问题。

对我来说，解决方案是在执行以下操作时禁用**Microsoft Security Essentials**中的**实时保护****`git checkout master`**

 **请记住再次打开它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-03-21T18:27:10.263

可能不需要重新启动。您可以尝试关闭编辑器或 IDE 并退出当前设置到该项目文件夹中的所有 CMD 或 Windows shell。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-07-11T23:37:34.410

请注意，Windows 资源管理器中的预览窗格也可能导致权限错误。我只花了一个小时试图找出导致问题的原因，认为这是某种文件损坏，突然间很明显，只要关闭预览窗格（或者没有选择有问题的文件）文件资源管理器）然后一切都很好。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-12T16:56:35.763

您可以尝试关闭 VS Code Editor 和 Git Bash；然后再次打开 Git Bash 并运行以下命令。

```
git checkout branch-name 
```**

# xslt - 在 2 个元素之间设置文本样式所需的 XSLT 代码

> ID：13803043
> 
> 赞同：3
> 
> 时间：2012-12-10T14:36:25.870
> 
> 标签：xslt, xslt-1.0

我希望有人能帮我一把。这个问题已经困扰了我好几天了。我的问题的根源是我想在 2 个元素之间按文档顺序向所有节点添加标记。

我有一个与此类似的 XML 文档：

```
<Employees>
  <Employee>
    <Title>Mr.</Title>
    <FirstName>John</FirstName>
    <LastName>Doe</LastName>
</Employee>
  <Employee>
    <Title>Mr.</Title>
    <FirstName>Tom</FirstName>
    <LastName>Doe</LastName>
  </Employee>
</Employees> 
```

当我使用 Oracle 的标记搜索命中的“标记”函数并搜索字符串“John Doe”时，我得到如下 XML 结果：

```
<Employees>
  <Employee>
    <Title>Mr.</Title>
    <FirstName><hitStart/>John</FirstName>
    <LastName>Doe<hitEnd/></LastName>
  </Employee>
  <Employee>
    <Title>Mr.</Title>
    <FirstName>Tom</FirstName>
    <LastName>Doe</LastName>
  </Employee>
</Employees> 
```

我想将其转换为突出显示命中的 XHTML。例如，以下 XHTML 将是一个有用的结果：

```
<TABLE>
  <TR>
    <TD>Mr. <b style="color:red">John Doe</b></TD>
  <TR>
  <TR>
    <TD>Tom Doe</TD>
  </TR>
</TABLE> 
```

我尝试编写使用应用模板或命名模板来浏览文档的样式表，但我无法让它们工作。使用 apply-templates 很棘手，因为我无法传递一个参数来说明节点是否在 hitStart 和 hitEnd 元素内。使用命名模板很棘手，因为我需要以不同方式处理文本和元素节点，而这在 XSLT 1.0 中无法做到。帮助将不胜感激。

谢谢，布赖恩

感谢所有帮助过的人！！！！你们太棒了！

这是我决定的：

```
<xsl:template match="/*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates select="node()[1]"/>
    </xsl:copy>
    <xsl:apply-templates select="following-sibling::node()[1]"/>
</xsl:template>
<xsl:template match="text()[preceding::*[self::hitStart or self::hitEnd][1][self::hitStart]
and following::*[self::hitStart or self::hitEnd][1][self::hitEnd]]">
    <span style="color:red;font-style:italic;font-weight:bold"><xsl:value-of select="."/></span>
    <xsl:apply-templates select="following-sibling::node()[1]"/>
</xsl:template>
<xsl:template match="hitStart|hitEnd">
    <xsl:apply-templates select="following-sibling::node()[1]"/>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:28:32.780

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()[1]"/>
    </xsl:copy>
    <xsl:apply-templates select="following-sibling::node()[1]"/>
  </xsl:template>

 <xsl:template match=
   "text()
      [preceding::*[self::hitStart or self::hitEnd][1][self::hitStart]
     and
       following::*[self::hitStart or self::hitEnd][1][self::hitEnd]
      ]">
    <xsl:value-of select="concat('*** ', ., ' ***')"/>
  </xsl:template>

 <xsl:template match="hitStart|hitEnd">
    <xsl:apply-templates select="following-sibling::node()[1]"/>
  </xsl:template>
 </xsl:stylesheet> 
```

**针对提供的 XML 文档应用时：**

```
<Employees>
  <Employee>
    <Title>Mr.</Title>
    <FirstName><hitStart/>John</FirstName>
    <LastName>Doe<hitEnd/></LastName>
  </Employee>
  <Employee>
    <Title>Mr.</Title>
    <FirstName>Tom</FirstName>
    <LastName>Doe</LastName>
  </Employee>
</Employees> 
```

**突出显示`hitStart`和`hitEnd`元素之间的每个文本节点——用三个星号包围它并产生想要的正确结果**：

```
<Employees>
   <Employee>
      <Title>Mr.</Title>
      <FirstName>*** John ***</FirstName>
      <LastName>*** Doe ***</LastName>
   </Employee>
   <Employee>
      <Title>Mr.</Title>
      <FirstName>Tom</FirstName>
      <LastName>Doe</LastName>
   </Employee>
</Employees> 
```

**说明**：

使用和覆盖“细粒度”身份规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:57:38.660

这并不理想，但你可以做一些快速而肮脏的事情，比如......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" encoding="utf-8" indent="no"/>

    <xsl:template match="/">
        <table>
            <xsl:apply-templates />
        </table>
    </xsl:template>

    <xsl:template match="FirstName[hitStart]">
        <span class="alert"><xsl:value-of select="."/>&#160;</span>
    </xsl:template>
    <xsl:template match="FirstName">
        <xsl:value-of select="."/>&#160;
    </xsl:template>
    <xsl:template match="LastName[hitEnd]">
        <span class="alert"><xsl:value-of select="."/></span>
    </xsl:template>
    <xsl:template match="LastName">
        <xsl:value-of select="."/>
    </xsl:template>
    <xsl:template match="Employees/Employee">
        <tr>
            <td>
                <xsl:apply-templates select="Title"/>
            </td>
            <td>
                <xsl:apply-templates select="FirstName | LastName"/>
            </td>
        </tr>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:10:46.970

简单的解决方案，使用禁用输出转义来防止错误开始没有结束的元素，以及结束没有开始元素的元素。

```
<?xml version="1.0"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xhtml" indent="yes"/>

    <xsl:template match="/Employees">
        <TABLE>
            <xsl:apply-templates select="Employee"/>
        </TABLE>
    </xsl:template>

    <xsl:template match="Employee">
        <TR>
            <TD><xsl:apply-templates/></TD>
        </TR>
    </xsl:template>

    <xsl:template match="hitStart">
        <xsl:value-of disable-output-escaping="yes" select="'&lt;b style=&quot;color:red&quot;&gt;'"/>
    </xsl:template>

    <xsl:template match="hitEnd">
        <xsl:value-of disable-output-escaping="yes" select="'&lt;/b&gt;'"/>
    </xsl:template>
</xsl:transform> 
```

# iphone - 在 UIDatePickerModeTime 中更改组件的宽度

> ID：13803045
> 
> 赞同：1
> 
> 时间：2012-12-10T14:36:29.560
> 
> 标签：iphone, ios, uidatepicker, uidatepickermodetime

好的，所以目前在我正在开发的应用程序中，我正在使用（阅读：hacking）a`UIDatePicker`模式设置`UIDatePickerModeCountDownTimer`为允许用户输入他们等待的时间。这个问题是你不能限制最大值（我希望它是 5 小时），因为`UIDatePickerModeCountDownTimer`忽略了`maximumDate`and`minimumDate`属性。

所以我尝试将模式更改为`UIDatePickerModeTime`，这确实允许我设置限制。现在的问题是，`UIDatePickerModeTime`它似乎没有调用`widthForComponent:`或`titleForRow:`组件非常薄并且没有标题。

以前，它们看起来非常漂亮，但限制不可调整。如何更改这些组件的宽度？我添加了屏幕截图，以便您了解我的意思（请原谅图片中的法语，我正在处理应用程序的法语本地化）。

这是我在 SO 上的第一篇文章，在一直使用它之后，所以如果我忘记了什么，请告诉我。我会发布代码，但我不认为我被允许（公司规则），而且这一切都令人费解。

这是将模式设置为`UIDatePickerModeCountDownTimer`（也就是我*希望*它的**外观**）：

[http://i.imgur.com/ZX9Hx.png](http://i.imgur.com/ZX9Hx.png)

这就是模式设置为`UIDatePickerModeTime`（也就是功能更多，但看起来不太好）的样子：

[http://i.imgur.com/TE2X6.png](http://i.imgur.com/TE2X6.png)

`UIDatePickerModeCountDownTimer`或者，如果有人有办法让我设置一个上限，**并**在该模式下启用“0 小时 0 分钟”（目前，它禁用此选项，因为它被设计为倒数计时器），请让我知道！

谢谢！

PS：我正在使用 iOS SDK 6.0 和 ARC，部署目标为 iOS 5.0+

PPS：“垃圾邮件预防”不允许我发布图片，因为我没有代表。所以我离开了imgur链接

编辑：这是我设置组件宽度的代码。我的应用程序中有其他自定义`UIPicker`的数据源和所有这些东西，但我宁愿不为应该如此简单的东西制作另一个自定义 UIPicker。

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

    if(component == 0){
        return [NSString stringWithFormat:@"Hours"];
    }else if (component == 1){
        return [NSString stringWithFormat:@"Minutes"];
    }

}

- (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component {

    return 160.0f;

} 
```

# django - 将 Django 模型或查询集传递给模板和 Javascript 的首选模式是什么？

> ID：13803047
> 
> 赞同：1
> 
> 时间：2012-12-10T14:36:35.777
> 
> 标签：django

我在一个大型项目中使用 Django，并且正在努力确定常见情况的最佳模式。例如，我有一个 Django 模型，在我的 HTML 中，我需要在 SELECT 元素中使用模型的一个字段，当从该元素中进行选择时，我需要通过在 INPUT 字段中从模型中自动填充另一个值查询。

我有一个 Django 模型、HTML 模板和 Javascript，例如：

模型.py

```
class StockSignoutMessage(models.Model):  
    msg_name = models.CharField(max_length=32)  
    msg_text = models.CharField(max_length=255, blank=True) 
```

签出.html

```
<select name="stock_msgs" id="stock_msgs">
{% for msg in all_stock_signout_msgs %}
    <option value="{{ msg.pk }}">{{ msg.msg_name }}</option>
{% endfor %}
</select>
<input type="text" size="50" name="comment" id="comment" /> 
```

签出.js

```
$(document).ready(function() {
    $("#stock_msgs").click(stock_msg_builder);
});

stock_msg_builder = function() {
    var outfield = $("#comment");
    var selected_msg_index = $("#stock_msgs").val();
    var add_msg = stock_msgs[selected_msg_index];
    outfield.val(outfield.val() + add_msg );
    outfield.focus();
} 
```

在我的 HTML 中，我需要在 SELECT 元素中使用 msg_name，当从该元素中进行选择时，我需要使用该值通过 JQuery 将 msg_text 添加到 INPUT 字段中。

我尝试了几种不同的方法：

(1) 我只将模型传递给模板并在模板中创建 SELECT 和 Javascript 对象：

视图.py

```
all_stock_signout_msgs = StockSignoutMessage.objects.all()
return render_to_response("signout.html",
                          {'all_stock_signout_msgs': all_stock_signout_msgs,},
                          context_instance=RequestContext(request)) 
```

签出.html

```
<script type="text/javascript">
    var stock_msgs = [];
    {% for msg in all_stock_signout_msgs %}
        stock_msgs[{{ msg.pk }}] = "{{ msg.msg_text }}";
    {% endfor %}
</script> 
```

(2) 我传递模型以用于创建 SELECT，并且我还传递模型的 JSON 版本来创建 Javascript 对象。

视图.py

```
all_stock_signout_msgs = StockSignoutMessage.objects.all()
json_stock_signout_msgs = serializers.serialize("json", all_stock_signout_msgs)
return render_to_response("signout.html",
                          {'all_stock_signout_msgs': all_stock_signout_msgs,
                           'json_stock_signout_msgs': json_stock_Signout_msgs,},
                          context_instance=RequestContext(request)) 
```

签出.html

```
var stock_msgs = "{{ json_stock_signout_msgs }}"; 
```

签出.js

```
$(document).ready(function() {
    $("#stock_msgs").click(stock_msg_builder);
});

stock_msg_builder = function() {
    var outfield = $("#comment");
    var selected_msg_index = $("#stock_msgs").val();
    var add_msg = stock_msgs[selected_msg_index];
    outfield.val(outfield.val() + add_msg );
    outfield.focus();
} 
```

那么是向模板传递更少的数据但在模板中有更多的代码来格式化它，还是以不同的格式多次传递相同的数据但使用更多的 Javascript 来处理它更好。这是一个简单的模型，但我项目的其他部分要复杂得多，所以我想为这些用例确定一个模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:40:48.087

我会争论前者。模板应该只在其中包含表示逻辑，并且将对象编组为 JSON 并不是表示逻辑的一部分。

# php - 将 google 帐户与 youtube 帐户关联

> ID：13803048
> 
> 赞同：1
> 
> 时间：2012-12-10T14:36:46.610
> 
> 标签：php, youtube-api

我正在尝试使用 YouTube 数据 API 上传视频，但使用的是 Google 服务帐户。当我尝试上传视频时，我总是收到“NoLinkedYouTubeAccount”错误，即使 Google 帐户似乎与 youtube 相关联。

我的问题是我找到了一种方法来升级与 YouTube 链接的帐户：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_profiles#Upgrading_an_Unlinked_Google_Account](https://developers.google.com/youtube/2.0/developers_guide_protocol_profiles#Upgrading_an_Unlinked_Google_Account)

但是当我运行 PUT 请求时，它给了我这个响应：

> HTTP 400
> 
> GData`ParseException`文件过早结束。

我发送的标题如下：

```
Authorization: Bearer <token>
X-GData-Key: key=<youtube dev key>
GData-Version: 2.1
Content-Type: application/atom+xml; charset=UTF-8 
```

我故意更改了“令牌”和“youtube dev key”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:33:28.373

据我所知，无法将 YouTube 频道链接到服务帐户。他们需要与完整的 Google 帐户相关联。

话虽如此，我无法猜测您从 API 请求中得到的响应是什么。根据错误消息，听起来您没有返回有效的 XML，但您必须打开日志记录（例如使用`Zend_Gdata_YouTube#enableRequestDebugLogging()`）或嗅探网络流量才能准确查看您返回的内容。

# android - 显示 Div 时的 Android WebView 错误

> ID：13803051
> 
> 赞同：0
> 
> 时间：2012-12-10T14:36:56.307
> 
> 标签：android, html, webview, android-webview

我正在尝试使用以下功能在 WebView 中显示 div

```
browser.loadData("<html> <head> <body> <H2> HI </H2>  " +
"<div id='map_canvas' style='width:20%;height:20%;'></div>" +
" </body> </head>  </html>", "text/html", "UTF-8"); 
```

但这不会加载 html 页面会给出错误

```
browser.setWebViewClient(new WebViewClient() {

            @Override
            public void onPageFinished(WebView view, String url){
                System.out.println("URL:::"+url);
            }

            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                    System.out.println("URL:::"+failingUrl+" "+description+" "+errorCode);
                    Toast.makeText(getApplicationContext(), "Oh no! " + description, Toast.LENGTH_LONG).show();
            }

        }); 
```

显示为您尝试加载的 URL 的响应无效。请告诉我这里有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:39:57.723

安卓 2.3

```
 // display the data

    String baseUrl = "";
    String mimeType = "text/html";
    String encoding = "UTF-8";
    html = sb.toString();
    String historyUrl = "";

    webViewDataViewer.loadDataWithBaseURL(baseUrl, html, mimeType, encoding, historyUrl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:57:15.137

% 符号不会在 Android 2.2 webview 中加载它必须被编码。

# .net - 在 .NET 项目上增加 Nightly 版本的最佳实践

> ID：13803054
> 
> 赞同：1
> 
> 时间：2012-12-10T14:37:20.973
> 
> 标签：.net, versioning

我在一个拥有 90 多个 .NET 项目的团队中工作。每个夜间构建都会读取一个 Version.xml 文件，其中我们有文件版本 XXXX 并将其递增到 XXXX+1，然后在每次构建时，我们在 AssemblyInfo.cs 中使用此版本。构建完成后，Version.xml 将提交给 Subversion。

最后一部分在查看干扰视图的顶级主干时创建一个行日志。

您在 .NET 项目中使用哪种做法？

/唐尼布

# r - Rscript 和反引号

> ID：13803059
> 
> 赞同：3
> 
> 时间：2012-12-10T14:37:41.987
> 
> 标签：r, bash, shell, knitr, rscript

我需要`knit2html`使用`Rscript`. 我尝试了以下代码并且它有效

```
Rscript -e "(knitr::knit2html(text = '## good', fragment.only = TRUE))" 
```

但是，当我引入 R 代码块（或任何涉及反引号的内容）时，该过程会挂起。所以以下不起作用

```
Rscript -e "(knitr::knit2html(text = '## good\n `r 1 + 1`',fragment.only = T))" 
```

出于我的使用目的，我只能访问内容，因此不能将文件传递给`knit2html`，我知道这会起作用。

我的问题是如何使这项工作。我知道问题出在反引号，我已经尝试过逃避它们，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:11:32.213

这是一个外壳问题。

在 Windows 上它可以工作。

在linux上你需要像\'一样转义反引号

我认为原因，一些shell解释了双引号字符串一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:14:43.063

一个相关的问题已经在[这里](https://github.com/yihui/knitr/issues/162#issuecomment-9017997)报告过一次。您必须使用单引号来避免外壳扩展。不过，我不确定这是否也适用于 Windows。

# servlets - 码头 9 - HttpServletResponse.SC_CONTINUE 不起作用

> ID：13803061
> 
> 赞同：1
> 
> 时间：2012-12-10T14:37:47.873
> 
> 标签：servlets, jetty

我使用简单的代码

```
servletResponse.setStatus(HttpServletResponse.SC_CONTINUE);
servletResponse.flushBuffer(); 
```

在码头 8.1 中它工作正常。在码头 9.0 我得到 504 结果。

你知道问题可能出在哪里吗？它在最新的 jetty 9.0 版本中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:28:06.167

Jetty 会自动为您发送 100 个 Continue 响应，因此您不必这样做。

对于 100 继续发送，客户端必须发送和期望，并且 servlet 必须调用 request.getInputStream（或读取器或参数方法）。

# elasticsearch - elasticsearch查询中的多种类型和索引

> ID：13803063
> 
> 赞同：0
> 
> 时间：2012-12-10T14:37:52.343
> 
> 标签：elasticsearch

我有一个这样的查询，它在 php 中，使用 elastica 库

```
$queryDefinition = [
        'query' => [
            'bool' => [
                'must' => [
                    [
                        'query_string' => [
                            'default_field' => '_all',
                            'query' => $term
                        ]
                    ]
                ],
                'must_not' => [],
                'should' => []
            ]
        ],
        //'from' => 0,
        //'size' => 50,
        'sort' => [],
        'facets' => [
            'types' => [
                    'terms' => ['field' => '_type']
                ]
            ]
    ]; 
```

我知道您可以使用 REST api 针对多个索引和类型运行查询。

我想针对类型和索引的变量计数运行上述查询。是否可以使用 json 查询样式？

如果不是，我如何将该查询转换为 REST 样式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:21:42.293

这是 curl 的示例 - 其中 sales 是我的索引，而 order 是我的类型（如果您需要多种类型，请使用逗号分隔值，例如 ../sales/order,order1/_search ..），我使用了数据中的 3 个字段即 id、名称和状态，以及名称上的查询字符串，例如“shoh”

```
curl -XGET 'localhost:9200/sales/order/_search?pretty=1' -d '
{
  "query":
  {
     "bool":
     {
       "must":[{"query_string":{"query":"shoh*"}}]
     }
 },
 "fields":["id","name"],
 "facets":{"Facet Result":{"terms":{"field":"status"}}}
}
' 
```

# extjs - 如何为配置有 header: false 的面板设置标题

> ID：13803068
> 
> 赞同：1
> 
> 时间：2012-12-10T14:37:55.403
> 
> 标签：extjs, extjs4, extjs4.1

我有一些面板（大多数时间网格面板），大多数时间配置没有标题，意思是`header: false`. 现在我需要对标题进行调整，但我找不到任何与此相关的内容。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:44:22.930

据我所知，在您选择不创建标题后这是不可能的。

您可以考虑使用一个简单的组件并将其`dockedItems`与适当的`weight`. 只要您不需要直接访问工具，这可能非常适合

或者

您使用标题定义面板并在组件显示之前将其隐藏。我从未尝试过，但它应该可以工作。您可以收到标题`getHeader()`

这是一个工作示例：

```
Ext.create('Ext.panel.Panel', {
    title: 'Hello',
    width: 100,
    items: [
        {
            xtype: 'button',
            text: 'toggle',
            handler: function(btn) {
                var header = btn.up('panel').getHeader();
                if (header.isVisible())
                    header.hide();
                else
                    header.show();
            }
        }
    ],
    renderTo: Ext.getBody()
}); 
```

经过一番阅读，我找到了一种创建标题的方法。它可以用`updateHeader(true)`

```
Ext.create('Ext.panel.Panel', {
    title: 'Hello',
    header: false,
    width: 200,
    items: [
        {
            xtype: 'button',
            text: 'toggle',
            handler: function(btn) {
                var panel = btn.up('panel');
                if (Ext.isObject(panel.header) && panel.header.isVisible()){
                    panel.header.hide();
                }else if (panel.header === false){
                    panel.header = true;
                    panel.updateHeader(true);
                }else {
                    panel.header.show();
                }
            }
        }
    ],
    renderTo: Ext.getBody()
}); 
```

# php - PHP 等价于 Java 的 unescapeJava() 函数

> ID：13803069
> 
> 赞同：1
> 
> 时间：2012-12-10T14:37:57.647
> 
> 标签：php, unicode, character-encoding

以下 Java 函数的 PHP 等效项是什么？

```
str = org.apache.commons.lang.StringEscapeUtils.unescapeJava(str); 
```

此函数存在于[Apache Commons Lang](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#unescapeJava%28java.lang.String%29)中，以下是该函数的描述

> 取消转义在字符串中找到的任何 Java 文字。例如，它会将 '\' 和 'n' 的序列转换为换行符，除非 '\' 前面有另一个 '\'。

**编辑**

我发现的一个解决方案是这个

```
echo json_decode('"' . $str . '"'); 
```

但我认为应该有其他一些优雅的解决方案。

**编辑 2**

正如@julp 建议的那样，`transliterate`这是另一种选择，但它仅适用于 PHP 5.4 及更高版本。不幸的是，我仍在使用 PHP 5.3，需要一个适用于 PHP 5.3 的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:00:06.047

使用 PHP >= 5.4 和国际扩展，你有`Transliterator`类：

```
$in = '\u0041\U00000062';
$out = transliterator_create('Hex-Any')->transliterate($in);
var_dump($out); # string(2) "Ab" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:49:55.820

[PHP 字符串](http://php.net/language.types.string)是 Java 字节数组的等价物。它们（*根据定义*）是 256 位字符集（*字节 0x00-0xff*）。但是，PHP 字符串语法已经在双引号字符串中提供了某些转义字符序列的插值（[有关更多详细信息，请参见手册页](http://php.net/language.types.string.php#language.types.string.syntax.double)）。

但是，如果您接收的是 JSON 编码的字符串，则 json_decode 函数会将该字符串正确解码为 PHP（前提是它符合 JSON 规范）。

```
$json_string = '"Hello\nWorld"';
var_dump(json_decode($json_string));
/*
Notice that the string output is 11 characters long and a line break character is present

string(11) "Hello
World"
*/ 
```

# php - PHPThumb 裁剪图像的左侧和右侧

> ID：13803071
> 
> 赞同：0
> 
> 时间：2012-12-10T14:38:00.660
> 
> 标签：php, imagemagick, phpthumb

我正在尝试获取图像并对其进行裁剪，然后使用[PHPThumb](http://phpthumb.sourceforge.net/)将其调整为缩略图。我想以相似的百分比裁剪左侧、右侧、顶部和底部。例如，从左侧裁剪 30%，从右侧裁剪 30%；从顶部向下裁剪 40%，从底部向上裁剪 40% 我该怎么做。我在手册中看到的只是传递 SX 值，我想它只是从左下角（其中 x=0）在数学上裁剪它。我需要能够从两侧向图像中心进行裁剪。我希望你明白我的意思。

我使用的是 PHPThumb 而不是自定义的，因为它在调整大小时具有良好的 JPEG 压缩，因此图像具有原始图像的清晰度。

**重要编辑**：我被告知 PHPThumb 中没有这样的功能，有人知道任何具有上述裁剪功能的 Thumbnaik 生成器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:23:43.810

您可以使用 Imagemagick -shave ( [http://www.imagemagick.org/script/command-line-options.php#shave](http://www.imagemagick.org/script/command-line-options.php#shave) )，但需要先从百分比计算像素。

未经测试的代码：

```
$size = getimagesize($input);
$horizontal = round( ($size[0]x0.3), 0);
$vertical = round( $size[1]x0.4), 0);
$cmd = "$input -shave {$horizontal}x{$vertical}";  
exec("convert $cmd output.jpg"); 
```

# c - 如何退出while循环？

> ID：13803072
> 
> 赞同：4
> 
> 时间：2012-12-10T14:38:00.080
> 
> 标签：c, while-loop

```
#include <stdio.h>
main(void) {
   char ch;
   while (1) {   
      if ((ch = getchar()) != EOF) 
      {
         break;
      }
      putchar(ch);
   }
   return 0;
} 
```

我该如何逃脱`while`呢？我曾尝试使用 EOF，但它没有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T14:39:26.060

我想你的意思是：

```
int ch; 
```

因为`EOF`不适合`char`.

还：

```
if ((ch=getchar()) == EOF)
       break; 
```

你的逻辑是倒退的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:51:49.020

这个：

```
char ch; 
```

错了，`EOF`不适合`char`。`getchar()`的返回值的类型是`int`这样的，这段代码应该是：

```
int ch; 
```

此外，正如所指出的，您的逻辑是倒退的。它循环 while `ch`is not `EOF`，所以你可以把它放在`while`：

```
while((ch = getchar()) != EOF) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T14:49:10.823

检查一下。它更简单

```
while((ch=getchar())!= EOF) {
     putchar(ch);
} 
```

EOF 用于指示文件的结束。如果您正在从标准输入读取字符，您可以通过输入以下内容来停止此 while 循环：

*   `EOF`= `CTRL`+ `D`（对于 Linux）

*   `EOF`= `CTRL`+ `Z`（对于 Windows）

    您也可以使用`Escape`字符或`\n`字符进行检查

例子

```
while((ch=getchar()) != 0x1b) { // 0x1b is the ascii of ESC
     putchar(ch);
} 
```

# python - 如何阻止相同的字母在列表中出现两次？

> ID：13803074
> 
> 赞同：4
> 
> 时间：2012-12-10T14:38:10.523
> 
> 标签：python

我正在尝试编写一个程序，您可以在其中输入元音或辅音 8 次，然后显示您选择的字母列表。有没有办法对其进行编程，以使同一个字母不会出现两次，例如，如果您选择元音并得到字母 a，那么字母 a 不能再次随机选择？这是到目前为止的程序：

```
lt = 0
letters = []
while lt<8:
    letter = raw_input("Please enter v for a Vowel or c for a Consonant: ")
    if letter == "c":
        letters.append(random.choice(consonant)),
        lt = lt + 1
    elif letter == "v":
        letters.append(random.choice(vowel)),
        lt = lt + 1
    else:
        print("Please enter only v or c")

print ("letters:")
print letters 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T14:39:26.060

创建一个包含所有辅音和所有元音的列表，`shuffle`它们是随机的，然后一次取一个元素：

```
import random

con = list('bcdfghjklmnpqrstvwxyz') # in some languages "y" is a vowel
vow = list('aeiou')
random.shuffle(con)
random.shuffle(vow)
# con is now: ['p', 'c', 'j', 'b', 'q', 'm', 'r', 'n', 'y', 'w', 'f', 'x', 't', 'g', 'l', 'd', 'k', 'h', 'z', 'v', 's'] or similar
# vow is now: ['e', 'u', 'i', 'a', 'o'] or similar

letters = []
while len(letters) < 8:
    letter = raw_input("Please enter v for a Vowel or c for a Consonant: ")
    if letter == "c":
        if con:
            letters.append(con.pop())
        else:
            print("No more consonnants left")
    elif letter == "v":
        if vow:
            letters.append(vow.pop())
        else:
            print("No more vowels left")
    else:
        print("Please enter only v or c") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T14:41:01.740

将字母从列表更改为设置：

```
letters = set()
>>> letters.add('x')
>>> letters.add('x')
>>> letters
set(['x']) 
```

供参考：[Python 集](http://docs.python.org/2/library/sets.html)

编辑：刚刚注意到您要求的东西与集合的工作方式不同，eumiro 的答案就是您要寻找的东西。如果您想保留此内容以供参考，那很好，否则我将删除我的答案

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T14:44:27.390

you can do this

```
lt = {}
while len(lt.keys()) < 8:
    letter = raw_input("Please enter v for a Vowel or c for a Consonant: ")
    added == false
    while added != true:
        if letter == "c":
            toAdd = random.choice(consonant)
        elif letter == "v":
            toAdd = random.choice(vowel)
        else:
            print("Please enter only v or c")
        if not lt.has_key(toAdd): 
            lt[toAdd] = 1
            added = false
    letters = lt.keys() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T14:43:00.623

It probably would be a good idea to check if the list already contained the consonant or vowel right before you added it to the list. For example, here would be the while loop with such checks:

```
while lt<8:
    letter = raw_input("Please enter v for a Vowel or c for a Consonant: ")
if letter == "c":
    c = random.choice(consonant)
    while c not in letters:
        c = random.choice(consonant)
    letters.append(random.choice(consonant))
    lt = lt + 1
elif letter == "v":
    v = random.choice(vowel)
    while v not in letters:
        v = random.choice(vowel)
    letters.append(random.choice(vowel))
    lt = lt + 1
else:
    print("Please enter only v or c") 
```

The inner while loops are so that if the random choice is already in the list, the program chooses another letter.

# android - 无法在 Android 智能手机上获取位置

> ID：13803075
> 
> 赞同：1
> 
> 时间：2012-12-10T14:38:16.793
> 
> 标签：android, eclipse, gps, location

我正在尝试使用 Wifi 网络和 GPS 在我的 Android 智能手机 (HTC Desire HD) 上获取位置（纬度、经度）。

这是我使用的代码，只是我不断收到“位置不可用”

我正在使用 Eclipse IDE。

```
import android.app.Activity;
import android.content.Context;
import android.location.Criteria;
import com.example.shortsproject.R;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class LocationGetter extends Activity implements LocationListener {
    private TextView latituteField;
    private TextView longitudeField;
    private LocationManager locationManager;
    private String provider;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.location);
        latituteField = (TextView) findViewById(R.id.locationtext);
        longitudeField = (TextView) findViewById(R.id.locationtext2);

        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the location provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields

        if (location != null) {
          System.out.println("Provider " + provider + " has been selected.");
          onLocationChanged(location);
        } else {
          latituteField.setText("Location not available");
          longitudeField.setText("Location not available");
        }
      }

      /* Request updates at startup */
      @Override
      protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
      }

      /* Remove the locationlistener updates when Activity is paused */
      @Override
      protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
      }

      @Override
      public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
      }

      @Override
      public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

      }

      @Override
      public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();

      }

      @Override
      public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();
      }
} 
```

有人可以帮我弄这个吗？

# c# - 在 Page_Unload 中自动回发页面

> ID：13803078
> 
> 赞同：0
> 
> 时间：2012-12-10T14:38:20.970
> 
> 标签：c#, asp.net

我想在 Page_Unload 中自动发布一个页面。当我写的时候`Response.Redirect`，我得到了错误。

想实现显示数据列表。我正在对其进行数据绑定，但它在刷新页面后显示。

有人可以帮助我吗？

```
protected void Page_Unload(object sender, EventArgs e)
{
  ... 
  DataList1.DataBind();
 //autopostback in this line
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:48:29.993

在事件中你不能做这样的`Unload`事情。

当`Unload`事件发生时，页面已经被渲染并发送到浏览器，所以现在做任何事情来改变响应已经太晚了。

此外，从服务器代码进行回发是没有意义的，因为这只会创建一个永恒的循环，而不会将任何内容发送回浏览器。如果您想在浏览器中发生某些事情时进行回发，您可以使用 Javascript 而不是在服务器代码中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-24T02:40:30.793

使用**PreRender**事件而不是**UnLoad**。注意：我知道它的老问题，但我相信有人会使用这个答案。

# android - 为另一个应用程序调用自定义广播接收器

> ID：13803082
> 
> 赞同：1
> 
> 时间：2012-12-10T14:38:48.853
> 
> 标签：android, android-broadcast

我有 2 个应用程序，App1 和 App2

在 App1 中，清单文件的 BroadcastReceiverIncoming 定义如下。

```
<receiver android:name="packagename.BroadcastReceiverIncoming"
          android:enabled="true"
          android:exported="true">
    <intent-filter>
        <action android:name="packagename.BroadcastReceiverIncoming" />
    </intent-filter>
 </receiver> 
```

BroadcastReceiverIncoming 在 App1 中定义。

现在在 App2 中，我调用它来调用广播接收器，但它现在以某种方式工作？

```
Intent intent = new Intent();
intent.setClassName("packageName", "packagename.BroadcastReceiverIncoming");
intent.setAction("packagename.BroadcastReceiverIncoming");
appContext.sendBroadcast(intent); 
```

即使第 2 行已注释/未注释，它也不会调用 BroadcastReceiverIncoming。

如果我调用 BroadcastReceiverIncoming，则通过 adb`adb shell am broadcast -n packageName/packagename.BroadcastReceiverIncoming` 在 App1 中正确调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:52:58.337

我的工作如下：

```
 myServiceReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context ctx, Intent data) {
            if (data.getAction().equals(POLayer.SVC_INTENT)) {
                final String alias = data.getStringExtra("alias");
                final String command = data.getStringExtra("action");
                if (command.equals("dosomething")) {
                    new DoSomethingTask().execute( alias );
                }
                             }
                     }
             };

  ....

  onCreate:
    final IntentFilter filter = new IntentFilter(POLayer.SVC_INTENT);
    filter.addAction(POLayer.ANOTHER_INTENT);
    this.registerReceiver(this.myServiceReceiver, filter); 
```

在发件人中：

```
 Intent i = new Intent();
                i.setAction( SVC_INTENT );
                i.putExtra( "alias", theAlias );
                i.putExtra( "action", "dosomething" );
                this.sendBroadcast( i ); 
```

我看到的唯一区别是我不依赖包/组件名称，而是定义我自己的操作。此外，所有名称都区分大小写，因此您可能需要检查 packageName 与 packagename。

# c# - 带图像的datagridview动态

> ID：13803090
> 
> 赞同：0
> 
> 时间：2012-12-10T14:39:17.290
> 
> 标签：c#, .net, winforms

我需要一点帮助来动态创建数据网格视图。

目标是 ping IP 或主机名的成功列表，并根据响应插入网格（主机、日期和图像（红色或绿色））。

我有这个写网格的函数，但是如果一个 ping 不成功，他会把所有其他的都放在 Redball 上，我会遇到问题。

这是我正在使用的代码[http://codepaste.net/yq1pu9](http://codepaste.net/yq1pu9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:04:40.167

```
 private void TabelaDinamimcaSucess(bool sucesso, int index, string host, string data, string tempo,string status)
{

   string[] row = new string[] { index.ToString(), host, data, tempo,status };
   dataGridView1.Rows.Add(row);

    int number_of_rows = dataGridView1.RowCount -1;

    Bitmap b = new Bitmap((sucesso == true ? Properties.Resources.greenBall : Properties.Resources.redBall));
    Icon icon = Icon.FromHandle(b.GetHicon());

    dataGridView1.Rows[number_of_rows].Cells["img"].Value = icon;

    dataGridView1.Show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:11:40.893

`GridView1.Rows.Add`您是否出于测试目的取消了所有行的注释？

我注意到在您向 中添加行的所有三个块中`DataGridView`，您总是发送`GridView1.Rows.Add(`**pictureRed**`, TextboxHost.Text, TextboxWhen.Text);`

你的意思是在你的块下有类似`GridView1.Rows.Add(`**pictureGreen的东西吗？**`, TextboxHost.Text, TextboxWhen.Text);``if (Reply.Status == IPStatus.Success)`

# grails - Grails 2.1.1 - 将默认注入的日志对象从 commons.logging.Log 更改为 slf4j.Logger

> ID：13803097
> 
> 赞同：0
> 
> 时间：2012-12-10T14:39:25.720
> 
> 标签：grails, logging, dependency-injection, slf4j

我有一个 Grails 项目，我用 Logback 替换了 Log4j。现在我也想使用`org.slf4j.Logger`代替`org.apache.commons.logging.Log`类进行日志记录。如何`log`将依赖注入放置的默认对象更改为每个 Controller/Service/Domain 类？

我在`BuildConfig.groovy`and`Config.groovy`文件中进行了搜索，但找不到任何配置？我也看了，`grails-app/src/templates/artifacts/Controller.groovy`但我仍然找不到任何可以配置的地方......

舒尔，我可以得到我自己的实例`org.slf4j.Logger`，但是我必须在每个类中声明它，比如

```
private static Logger lbLogger = LoggerFactory.getLogger(MyClass.class) 
```

这不是我想要的——我很想替换注入的`Logger`对象。

有人对这个话题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:46:37.823

我不记得日志对象是如何注入的，但无论如何您都可以将自己的记录器注入控制器、服务或域对象。

```
In BootStrap:
def doWithDynamicMethods = { applicationContext ->
        // def logger = SLF4J new instance
        application.controllerClasses.each { controllerClass ->
             controllerClass.metaClass.getLogger = {-> logger }
        }
  } 
```

这就是想法，抱歉我现在没有 Grails 环境，所以我无法编写可行的代码。

# javascript - 为什么键盘监听器不起作用

> ID：13803098
> 
> 赞同：1
> 
> 时间：2012-12-10T14:39:27.277
> 
> 标签：javascript, html, css

这是我的代码，我想用四个箭头键盘移动图片（pic1），画一些线条作为背景区域，图片一次移动1s，但是我遇到了一个问题，我不能移动pic1，谁可以告诉我为什么它不起作用

```
<script type="text/javascript">
    var canvas = document.getElementById("painting");
    //canvas.addEventListener("keydown", doKeyDown, true);
    var context2D = canvas.getContext("2d");
    var pic = new Image();
    var pic1=new Image();
    var X=0,Y=200;
    var X1=200,Y1=200;
    pic.src = "music.jpg";
    pic1.src = "qingwa.jpg";

    function drawline()
    {
    context2D.moveTo(0,100);
    context2D.lineTo(35,100);
    context2D.lineTo(35,60);
    context2D.lineTo(85,60);
    context2D.lineTo(85,100);
    context2D.lineTo(155,100);
    context2D.lineTo(155,60);
    context2D.lineTo(205,60);
    context2D.lineTo(205,100);
    context2D.lineTo(275,100);
    context2D.lineTo(275,60);
    context2D.lineTo(325,60);
    context2D.lineTo(325,100);
    context2D.lineTo(395,100);
    context2D.lineTo(395,60);
    context2D.lineTo(445,60);
    context2D.lineTo(445,100);
    context2D.lineTo(515,100);
    context2D.lineTo(515,60);
    context2D.lineTo(565,60);
    context2D.lineTo(565,100);
    context2D.lineTo(600,100);

    context2D.stroke();
    }
    function doKeyDown(e)
    {
        switch (e.keyCode)
        {
        // the up key
            case 38:
            Y1 = Y1 - 10;
            break;
        //the down key
            case 40:
            Y1 = Y1 + 10;
            break;

        //the left key
            case 37:
            X1 = X1 - 10;
            break;

        //the right key
            case 39:
            X1 = X1 + 10;
            break;

        }
    }

    function drawfrogger()
    {

        context2D.drawImage(pic1,X1,Y1);
    }
    function draw()
    {

        context2D.clearRect(0,0,600,600);
        context2D.save();
        context2D.drawImage(pic,X,Y);
        drawfrogger();
        drawline();
        context2D.restore(); //绘制结束以后，恢复画笔状态
        if(X>600)
            X = 0;
        X = X + 100;

    }

    setInterval(draw, 1000);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:46:13.390

只有可以接收焦点的元素（例如表单输入）才会生成键事件。你有两个选择：

*   向您的元素添加一个`tabindex`属性以`<canvas>`使其获得焦点。的值`0`会将元素放置在默认的 Tab 键顺序（即 HTML 源代码顺序）中。[这是更详细的文章](http://snook.ca/archives/accessibility_and_usability/elements_focusable_with_tabindex)。
*   `document`改为处理关键事件。这样做的缺点是捕获源自文档中任何位置的关键事件，而不仅仅是`<canvas>`您感兴趣的元素。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-10T14:41:10.523

将keydown更改为：

```
document.addEventListener("keydown", function(e) {
    doKeyDown(e);
}); 
```

@jbabey - 这有效：http: [//jsfiddle.net/neuroflux/cjRVn/3/](http://jsfiddle.net/neuroflux/cjRVn/3/)

# oracle - 获取具有默认值的参数列表

> ID：13803099
> 
> 赞同：4
> 
> 时间：2012-12-10T14:39:34.983
> 
> 标签：oracle, oracle10g

我使用 ALL_ARGUMENTS 来获取 oracle 10g 中的参数列表，但我找不到参数的默认值。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:21:30.843

您可能需要按照下面的代码示例在 10g 中使用 plsql 编程。这个解决方案在某种意义上肯定是蛮力的，因为您基本上使用非常低级的原语编写函数/过程声明解析器的一部分。但是，正则表达式函数在 10g 中也不可用...

代码的要点是：

*   遍历过程/函数声明的源代码行
*   注意最近声明的例程的名称
*   分析包含关键字'DEFAULT'的所有行，获取参数名称和默认值规范（代码示例中没有详细概述）。

谨防陷阱：

*   多行声明
*   包含 C 样式注释开头字符串的 C 样式注释 ( a la / *** blah blah /****胡说八道 ** */ )*
**   包含关键字的字符串文字*

 *希望无论如何都有帮助，最好的问候。

编码：

```
DECLARE
   l_arg_and_more    VARCHAR2(400);
   l_current_unit    VARCHAR2(400);
   l_default_spec    VARCHAR2(400);
   l_offset_default  BINARY_INTEGER;
   l_offset_eoname   BINARY_INTEGER;
BEGIN
   FOR i IN (
        select text
         from all_source
        where owner = '<name of owner>'
          and name = '<object name>'
          and type in ( 'PACKAGE', 'PROCEDURE', 'FUNCTION')
          and text not like '--%'
     order by line
   ) LOOP
      IF i.text LIKE '%FUNCTION%' OR i.text LIKE '%PROCEDURE%' THEN
         IF i.text LIKE '%FUNCTION%' THEN
            l_current_unit    := LTRIM(SUBSTR(i.text, INSTR(i.text, 'FUNCTION') + LENGTH('FUNCTION')), ' ');
            l_offset_eoname   := INSTR(l_current_unit, ' ');              
            IF l_offset_eoname = 0 OR l_offset_eoname > INSTR(l_current_unit, '(') THEN
               l_offset_eoname   := INSTR(l_current_unit, '(');
            END IF;
            IF l_offset_eoname <> 0 THEN
               l_current_unit := SUBSTR(l_current_unit, 1, l_offset_eoname-1);
            ELSE
               l_current_unit := 'unidentified';
            END IF;
         END IF;
      END IF;
      --
      IF i.text LIKE '%DEFAULT%' THEN
         l_offset_default  := INSTR (i.text, 'DEFAULT');
         l_arg_and_more    := SUBSTR(i.text, 1, l_offset_default - 1);
         l_default_spec    := SUBSTR(i.text, l_offset_default + LENGTH('DEFAULT') + 1);
         --
         -- process l_arg_and_more to get the arg name, l_default_spec for the default value
         --
      END IF;
   END LOOP;              
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T21:59:12.523

我知道这有点太晚了，但这可能会有所帮助。我现在面临着类似的问题。需要更多测试...

```
SELECT SUBSTR(final_str, start_pos+1, (end_pos-start_pos-1) ) dflt_values, start_pos, end_pos  
 FROM 
 (
  SELECT start_pos, final_end_pos end_pos, MOD(ROWNUM, 2) rno, final_str  FROM
  (
   SELECT distinct start_pos, end_pos, final_str, (CASE WHEN end_pos < start_pos THEN (start_pos*2) ELSE end_pos END) final_end_pos
     FROM
    (
    SELECT Instr(final_str, '=', LEVEL) start_pos, Instr(final_str, ',', LEVEL) end_pos, final_str  --<<-- distinct 
      FROM 
    (
     SELECT RTRIM(SUBSTR(str, 1, e_start), ',')||RTRIM(SUBSTR(str, e_start, e_end-e_start), ')') final_str
     , e_start
     , e_end
 , e_end-e_start
      FROM
    (
    SELECT str, Instr(str, ',', 1, 5) e_start, Instr(str, ')') e_end
      FROM
    (
     SELECT REPLACE(REPLACE(REPLACE(SUBSTR(str, INSTR(str, '(')+1), chr(32), ''), chr(10), chr(32) ), 'DEFAULT', ':=') str
       FROM
    (
     SELECT 'PROCEDURE Some_Proc(p_arg1  VARCHAR2:= ''Arg1''
                      , p_arg2  VARCHAR2:= ''Arg2''
                      , p_arg3  DATE     DEFAULT ''SYSDATE-90''                                                                                   
                      , p_arg4  VARCHAR2 DEFAULT ''NULL''                                          
                      , p_arg5  NUMBER  := ''10'')' str
       FROM dual
    ))))
    CONNECT BY LEVEL <= LENGTH(final_str)
    )
  WHERE start_pos > 0
  ORDER BY start_pos, end_pos
 ))
 WHERE rno > 0
 / 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T14:26:56.827

在视图`SYS.ALL_ARGUMENTS`中有一个名为 的列`DEFAULT_VALUE`，但即使在 11g 中，它的类型也是`LONG`令人头疼的解决方法并将其转换为 CLOB。

“最简单”（不是最好）的方法是从此视图创建一个表，`TO_LOB`用于将此字段转换为 a`CLOB`并使用它。*

# c# - 模拟鼠标点击侧键

> ID：13803101
> 
> 赞同：7
> 
> 时间：2012-12-10T14:39:37.350
> 
> 标签：c#, c++, mouse

我知道如何使用 mouse_event 来模拟鼠标左键或右键的单击。我想知道的是C#/C++中的这个或另一个函数是否允许你模拟游戏鼠标的mouse4或mouse5按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:08:46.590

`mouse4`并`mouse5`在 windows 中命名`xbutton1`为`xbutton2`

你可以使用这些：

```
mouse_event(MOUSEEVENTF_XDOWN, NULL, NULL, XBUTTON1, NULL);
mouse_event(MOUSEEVENTF_XDOWN, NULL, NULL, XBUTTON2, NULL);
mouse_event(MOUSEEVENTF_XUP, NULL, NULL, XBUTTON1, NULL);
mouse_event(MOUSEEVENTF_XUP, NULL, NULL, XBUTTON2, NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:01:19.820

您可以创建一个`RAWINPUT`结构并使用`WM_INPUT`windows 消息将其发送到窗口。

[WM_INPUT 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645590%28v=vs.85%29.aspx)
[RAWINPUT 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645562%28v=vs.85%29.aspx)
[RAWINPUT P/Invoke 参考](http://www.pinvoke.net/default.aspx/Structures/RAWINPUT.html)

特别是，您需要创建一个`RAWMOUSE`结构以在`RAWINPUT`. 的字段可以包含有关第 4 和第 5 个鼠标按钮的信息`RAWMOUSE`。`usButtonFlags`

[RAWMOUSE 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645578%28v=vs.85%29.aspx)
[RAWMOUSE P/Invoke 参考](http://www.pinvoke.net/default.aspx/Structures/RAWINPUTMOUSE.html)
[RAWMOUSEBUTTONS 枚举 P/Invoke 参考](http://www.pinvoke.net/default.aspx/Enums/RawMouseButtons.html)

您需要使用的具体实现取决于目标应用程序和平台。`WM_INPUT`在接收任何消息之前，您可能需要为原始输入注册窗口。

# jquery - 添加jQuery每个生成的输入值一起

> ID：13803109
> 
> 赞同：0
> 
> 时间：2012-12-10T14:39:59.120
> 
> 标签：jquery, each

我正在尝试将生成的输入字段的值连接在一起，以便可以通过电子邮件发送出去。

jsfiddle：http: [//jsfiddle.net/dawidvdh/NZy53/](http://jsfiddle.net/dawidvdh/NZy53/)

代码在这里：

JavaScript：

```
$(document).ready(function() {
    var pass = 1;
    val = 0;
    jQuery('div.passport').each(function() {
        var index = "pass"+pass++;
        var passer = "<input class='pass' id="+'"'+index+'"'+" "+"/>";
        var passvalue = $(this).attr('value');
        jQuery(passer).appendTo('#pass');

        jQuery('#dup').click(function(){
        calc(passvalue);
        });
    });

    function calc(passvalue) {
        console.log(passvalue);
    };
}); 
```

然后是 HTML：

```
<div id="pass"></div>
<div class="passport"></div>
<div class="passport"></div>
<div class="passport"></div>
<div class="passport"></div>
<div class="passport"></div>
<div class="passport"></div>
<div class="passport"></div>
<button id="dup">duplicate</button> 
```

非常感谢任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:48:57.780

我将您的代码更改为

```
$(document).ready(function() {
    var pass = 1;
    val = 0;
    jQuery('div.passport').each(function() {
       var index = "pass"+pass++;
       var passer = "<input class='pass' id="+'"'+index+'"'+" "+"/>";
       var passvalue = $(this).attr('value');
       jQuery(passer).appendTo('#pass');
    });
    $(document).on('click', '#dup', calc);

    function calc() {
      var passValue = 0;
      $('.pass').each(function(){ var v=parseFloat($(this).val()); if(v) passValue+=v});
      console.log(passValue);
    };
});​ 
```

[它有效（打开控制台查看所有字段的总和）](http://jsfiddle.net/B2972/)

主要变化：

*   使用`on`，我可以使 calc 函数在您单击按钮时仅调用一次
*   我解析字段的值，如果是，我不会添加该值`NaN`

# c# - 使用 Core Audio API 改变后声道的音量

> ID：13803110
> 
> 赞同：0
> 
> 时间：2012-12-10T14:40:05.853
> 
> 标签：c#

我正在尝试创建一个后台应用程序，让我可以轻松更改后声道的音量

我查看了[Core Audio API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370802%28v=vs.85%29.aspx)，虽然我设法改变了前置扬声器的平衡/音量，但 API 似乎无法访问后置声道或任何其他环绕声道。它只计算了我的音频设备的 2 个通道。

是否可以使用任何 API 来控制后声道的音量？

提前致谢！

**编辑**

谢谢，FMOD 看起来像我需要的，虽然它有点压倒性。:P 我需要做什么来改变指定频道的音量。我相信我需要这个功能：

```
FMOD.RESULT result = channel.setVolume(1.0f); 
```

但后来我需要找到一种方法来指定频道......

另外，要明确一点：我需要更改任何正在运行的应用程序的音量，比如 Winamp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:55:59.713

处理音频文件的最佳选择是“ [Fmod.dll](http://www.fmod.org/) ”。这有很多权限来处理音频文件。

> 这是一款用于游戏的音频内容创建工具，专注于“专业音频”方法。它有一个全新的界面，使用专业数字音频工作站的人比现有的游戏音频工具更熟悉，并且加载了新功能。

我已经在使用它了，这是一个非常强大的组件并且易于使用。

# ruby - Ruby 1.8.7：无法从自定义 gem 加载模块

> ID：13803115
> 
> 赞同：0
> 
> 时间：2012-12-10T14:40:18.810
> 
> 标签：ruby, import, module, gem

创建自定义 gem 后，我想引用它包含的模块中定义的函数。

自定义 gem 是`dsi_core`并且模块`lib/cuke.rb`只包含：

```
module DsiCore
    module Cuke
        def self.Features(*args)
            puts "Hello world!"
        end
    end
end 
```

我已经安装了 gem，可以看到`/var/lib/gems/1.8/gems/dsi_core-0.1.0/lib/cuke.rb`它应该存在。

在另一个 gem`dsi_fabric`中有代码`dsi_fabric/lib/dsi_fabric`：

```
require 'dsi_core'
# ...
DsiCore::Cuke.Features(*ARGV) 
```

尝试从gem`lib/`目录运行它：`dsi_fabric`

```
ruby -rubygems ./dsi_fabric.rb arg1 arg2 
```

..结果是：

```
./dsi_fabric.rb:7: uninitialized constant DsiCore::Cuke (NameError) 
```

这是指`Cuke.Features`.`dsi_fabric.rb`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:53:38.983

您需要“dsi_core”而不是“cuke”。尝试更改`require 'dsi_core'`为`require 'cuke'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:04:18.933

如果您在现有命名空间中进行测试，问题可以是命名空间，因此请尝试使用根命名空间引用。

```
::DsiCore::Cuke.Features(*ARGS) 
```

也像我在评论中提到的你需要把

```
def self.Features(*args)
  # ...
end 
```

呵呵我不喜欢那个大写的方法名称注释，而是每个人自己的:)

**编辑**

也试试

```
require 'rubygems'
require 'dsi_core' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:13:19.063

我误解了 Gem 导入的工作原理。

如果您创建一个 gem 并在 gemspec 中添加其他 gem 依赖项，这些依赖项已经自动导入。

因此，我上面的内容是错误的 -要从 gem中的 gem导入`cuke.rb`文件，您将使用：`dsi_core``dsi_fabric`

```
require 'cuke' 
```

即`require dsi_core`Gem 规范和 gemspec 的本质是隐含的。

然后在代码中引用将是

```
DsiCore::Cuke 
```

..正如我最初发布的那样。

我很困惑，因为 mny public gems 表明您应该使用`require`以下表格：

```
require `gem-name/module-or-class`. 
```

然而这是误导性的：根本没有使用 gem 名称，而是一个以 gem 命名的目录：

```
require 'dir-name/module-or-class' 
```

在此示例中，gem`gem-name`具有以下目录结构：

```
lib/gem-name/module-or-class.rb 
```

即他们在gem 的`lib/`目录中创建了一个以gem 本身命名的文件夹。

# fabricjs - Fabric.js FPS 测试

> ID：13803117
> 
> 赞同：1
> 
> 时间：2012-12-10T14:40:28.257
> 
> 标签：fabricjs, frame-rate

我在哪里可以找到许多动画对象的 fabricjs 渲染性能测试？

我已打开此页面，但看不到当前的 FPS 数量 [http://fabricjs.com/animation/](http://fabricjs.com/animation/)

# android - 如何在 ActionBar 中显示自定义视图？

> ID：13803121
> 
> 赞同：7
> 
> 时间：2012-12-10T14:40:38.333
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试在操作栏中显示自定义视图。我正在使用 SherlockActionBar。这是我的代码。自定义视图永远不会显示。我究竟做错了什么？

```
View customNav = LayoutInflater.from(this).inflate(R.layout.my_layout, null);
getSupportActionBar().setDisplayShowTitleEnabled(false);
getSupportActionBar().setCustomView(customNav); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T14:41:28.787

您必须先启用自定义视图。

```
 getSupportActionBar().setDisplayShowCustomEnabled(true); // missing in your code
    getSupportActionBar().setCustomView(customNav); 
```

# .net - 如何在 VB.NET 中检测数据网格的变化

> ID：13803127
> 
> 赞同：0
> 
> 时间：2012-12-10T14:40:53.700
> 
> 标签：.net, vb.net

我在 VB.NET 类中有一个数据网格。单元格是可编辑的。编辑每个单元格时，有什么方法可以触发功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:43:50.153

是的，CellValueChanged 事件：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)

```
 Private Sub DataGridView1_CellValueChanged(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellValueChanged
       'do something
    End Sub 
```

根据您的评论编辑：是的，您可以将当前值保存到 BeginEdit 上的类级别变量并在 CellValueChanged 事件中检索它：

```
Private cellValue As String = String.Empty

Private Sub DataGridView1_CellBeginEdit(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellCancelEventArgs) Handles DataGridView1.CellBeginEdit
    cellValue = DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex).Value.ToString
End Sub

Private Sub DataGridView1_CellValueChanged(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellValueChanged
    MessageBox.Show("row index: " & e.RowIndex & Environment.NewLine & "old value: " & cellValue)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T10:15:56.390

但是即使您还没有完成输入，CellValueChanged 事件也会在每次按键操作时返回消息，这个事实很烦人。

# c++ - 数组函数错误输出

> ID：13803131
> 
> 赞同：-5
> 
> 时间：2012-12-10T14:41:02.267
> 
> 标签：c++, arrays, function

我想要数组元素的平方根，但输出太错误了！！！你能帮忙纠正我的错误吗？？？如何将数组更改为 100 大小？

```
 #include <math.h>
    #include <iostream>
    using namespace std;

    // function declaration:
    double sqrootx(int arr[], int size);

    int main ()
    {
       // an int array with 5 elements.
       double balance[5] = {1000, 2, 3, 17, 50};
       double sqr;

       // pass pointer to the array as an argument.
       sqr= pow( balance, 5 ) ;

       // output the returned value 
       cout << " result" << sqr << endl; 

       return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:05:51.227

为了创建一个大小为 100 的数组。只需 `double balance[5];`将 `double balance[100];`

话虽如此，手动输入 100 个数字非常困难。因此，您需要运行一个循环。

从给出的代码来看，让我们列出代码中缺少的内容。

1.  一个**循环**，用一个数字填充数组中的每个框。
2.  pow 函数本身。（由于您已声明 math.h ，请使用**sqrt**）
3.  另一个循环（迭代）或递归，用平方根值替换数组中的原始数字。
4.  一个循环或一个函数，用于**显示**所有值均以平方根为根的数组。
5.  一些预定义的条件，例如“负值”或一些代码来**绝对**它们。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:45:43.773

看起来像一个错字：

```
sqr= sqrootx( balance, 5 ) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:43:02.433

You are raising your numbers to the power of 5\. Square root is power of .5.

```
for (int i = 0; i < 5; i++) {
    sqr = pow(balance[i], .5);
    cout << " result" << sqr << endl;
} 
```

# oracle - 从表中选择重复行（忽略主键）

> ID：13803133
> 
> 赞同：0
> 
> 时间：2012-12-10T14:41:07.187
> 
> 标签：oracle, select, duplicates

我有一个 Oracle 表，我想在其中找出是否有任何重复的行（即所有列值都相等）。问题是这些行具有唯一的主键，所以我想排除它们，因为它们基本上阻止了我这样做。

有没有办法在执行这样的任务时忽略主键（而不是列出除主键列之外的所有列），以便我可以找出重复的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:00:45.603

不，只列出`GROUP BY`子句中除主键列之外的所有列：

```
CREATE TABLE mytable (
  pk NUMBER PRIMARY KEY,
  c1 NUMBER NOT NULL,
  c2 NUMBER
);

INSERT INTO mytable (pk, c1, c2) VALUES (100, 1, 1);
INSERT INTO mytable (pk, c1, c2) VALUES (101, 1, 1);
INSERT INTO mytable (pk, c1, c2) VALUES (102, 2, 1);
INSERT INTO mytable (pk, c1, c2) VALUES (103, 2, null);
INSERT INTO mytable (pk, c1, c2) VALUES (104, 2, null);

SELECT c1, c2
  FROM mytable
 GROUP BY c1, c2
HAVING COUNT(*) > 1;

C1    C2
----- -----
1     1
2     (null) 
```

要找出非主键列，您可以使用以下查询。对于大多数表，键入列而不是粘贴/运行查询会更快：

```
SELECT column_name
  FROM user_tab_columns co
 WHERE co.table_name = 'MYTABLE'
   AND NOT EXISTS (
       SELECT *
         FROM user_constraints  pk
         JOIN user_cons_columns pc USING (owner, constraint_name)
        WHERE pk.table_name = co.table_name
          AND constraint_type='P'
          AND co.column_name = pc.column_name)
 ORDER BY co.column_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:02:13.333

您将不得不明确列出其他列。

潜在地，您可以使用动态 SQL 来生成您想要的查询。但是，如果这仅适用于单个表，那么这不太可能非常有用。如果您尝试自动化比较数十或数百个表的过程，动态 SQL 方法可能更易于管理。

# javascript - 如何仅启用一列值

> ID：13803135
> 
> 赞同：2
> 
> 时间：2012-12-10T14:41:12.140
> 
> 标签：javascript, jquery, kendo-ui

我有 21 行和 8 列的 kendoGrid。我设置了特定的行背景颜色以及隐藏了这些行的值。为此我编写了这两行代码

```
$("#grid1 tbody").find("tr:eq(0), tr:eq(2), tr:eq(11),tr:eq(15)")
    .addClass('rowColor');

$("#grid2 tbody").find("tr:eq(0), tr:eq(2), tr:eq(11), tr:eq(15)")
    .find("td").html(""); 
```

现在我想显示隐藏的第一行、第三行、第 16 行第一列值...我该怎么做...确保值来自数据库...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:52:21.580

首先，如果你想隐藏一行，你可以使用`.hide()`

```
$("#grid2 tbody").find("tr:eq(0), tr:eq(2), tr:eq(11), tr:eq(15)")
.find("td").hide(); 
```

不是

```
$("#grid2 tbody").find("tr:eq(0), tr:eq(2), tr:eq(11), tr:eq(15)")
.find("td").html(""); 
```

因为`.html("")`实际上会清空其内容而不仅仅是隐藏

然后显示第一列仅使用：

```
$("#grid2 tbody").find("tr:eq(0), tr:eq(2), tr:eq(11), tr:eq(15)").find("td:first").show(); 
```

# c# - OpenFileDialog 过滤器不断显示扩展名

> ID：13803139
> 
> 赞同：3
> 
> 时间：2012-12-10T14:41:18.403
> 
> 标签：c#, wpf, openfiledialog

运行`mspaint.exe`并按`Ctrl`+ `O`。显示的文件扩展名过滤器具有此特殊条目“所有图片文件”。现在，如何在 中创建这样的过滤器`WPF`？（我很确定过去我已经设法做到`Win32`了。）

```
Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
dlg.DefaultExt = ".tif";
dlg.Filter =
    "All Picture Files|*.bmp;*.dib;*.jpg;*.jpeg;*.jpe;*.jfif;*.tif;*.tiff;*.png|" +
    "All Files|*.*";

Nullable<bool> result = dlg.ShowDialog(); 
```

上面的代码有效，但它产生了这些臃肿的过滤器*标签*：

`All Picture Files (*.bmp;*.dib;*.jpg;*.jpeg;*.jpe;*.jfif;*.tif;*.tiff;*.png)`

`All Files (*.*)`

**我没有要那些括号，所以它们来自哪里？！**

## 编辑

显然，根据 Windows 选项隐藏已知文件类型的扩展名（在 Windows 资源管理器文件夹设置中），扩展名是否会自动添加。我相信 WPF 在这里做正确的事！

# asp.net - 如何使用 VB.net 创建 Web 模块？

> ID：13803147
> 
> 赞同：0
> 
> 时间：2012-12-07T04:38:10.527
> 
> 标签：asp.net

我知道 VB.net，并且在 VB 桌面应用程序中经常使用模块。现在我需要开始使用 VB ASP.net (VS2010) 构建我的 Web 应用程序。我想做一些非常简单的计算，然后显示结果。但是，我在 VB ASP.net 中看不到“添加新模块”选项。VB ASP.net 中是否存在“模块”？是不是叫别的名字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:44:58.343

它们被称为`Class`文件。

右键单击您的解决方案或要添加类的文件夹，`Add new item`然后从窗口中选择`Class`.

# android - 将 Google Drive 集成到 Android 应用程序中，未解决的导入

> ID：13803148
> 
> 赞同：4
> 
> 时间：2012-12-10T14:41:32.327
> 
> 标签：android, google-drive-api, google-api-java-client

我正在尝试将 google drive api 集成到我的应用程序中。
我一步一步地按照这个快速入门指南[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)但经过大量测试，我仍然有一些未解决的导入！
我有所有的进口工作，除了：

*   `com.google.api.client.googleapis.extensions`包装 和
*   `com.google.api.client.extensions`包裹 _

我确定我的项目配置有问题：
我添加了 Drive API v2，如指南中所示的 google play services jar 文件，并且我使用适用于 Android 4.2 的 Google API 作为构建目标，但我仍然有未解决的包导入`extensions`。

在我的 Eclipse 配置中，一切都是最新的。

谁能帮我？或者有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:45:42.387

Google Drive Api v2 的新版本解决了这个问题。我在 2 天前收到了更新，然后导入开始自动工作。我现在使用的工作版本是`drive-v2r33`

# php - 损坏的 PHP 登录脚本

> ID：13803150
> 
> 赞同：0
> 
> 时间：2012-12-10T14:41:36.207
> 
> 标签：php, mysql, login

我需要有关我的登录脚本的帮助 - 它似乎已损坏。如果我没有输入密码，我仍然可以正确登录。另外，如果我不输入任何内容。但是，如果我输入了错误的用户名和密码，则表示我的登录凭据错误。

```
<?php   
    $verbindung = mysql_connect("localhost", "root" , "")
    or die("Verbindung zur Datenbank konnte nicht hergestellt werden"); 
    mysql_select_db("v1nce_website") or die ("Datenbank konnte nicht ausgewählt werden"); 

    $username = $_POST["username"];
    $password = $_POST["password"];

    $abfrage = "SELECT username, password FROM logins WHERE username='$username' LIMIT 1"; 
    $ergebnis = mysql_query($abfrage);
    $row = mysql_fetch_object($ergebnis);

    if($row->password == $password) 
        {
        $_SESSION["username"] = $username; 
        echo "<p>Login erfolgreich.</p>"; 
        } 
    else 
        { 
        echo "<p>Benutzername oder Passwort waren falsch. <a href=\"index.php?p=login\">Login</a></p>"; 
        } 
?> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:03:45.407

这个脚本中有很多令人担忧的事情：

1.  让我们从您在这里的实际问题开始。如果您的查询找不到匹配的行，`$row`将等于`false`. 并且由于因此`$row`不是一个对象，因此`$row->password`将评估为`NULL`。因此，如果`$password`是一个空字符串`$row->password == $password`将评估为真，因为`NULL == ""`它是真的。

    如果您打开错误显示，例如`ini_set( 'display_errors', true );`，结合足够的错误报告级别，您会收到通知`error_reporting( E_ALL );`。

    当您输入错误的用户名和密码时，`$row->password`将再次为`NULL`，但由于您输入了非空字符串作为密码，因此这次`$row->password == $password`将评估为假。

    因此，为了缓解这个问题，您需要确保在开始比较密码之前首先检查是否确实存在匹配的行，例如`mysql_num_rows( $ergebnis )`首先进行评估。

2.  您的脚本容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。这意味着您的脚本的用户在输入 SQL hack 作为`$_POST[ 'username' ]`. 例如，如果我要输入`' OR 1 = 1 --`您的 SQL 查询，将导致以下结果（为显示目的而格式化）：

    ```
    SELECT username, password
    FROM logins
    WHERE username='' OR 1 = 1 --' LIMIT 1 
    ```

    ...如果表非空，则总是至少产生一行，因为`WHERE username='' OR 1 = 1`总是评估为真（`--`在 SQL 中表示注释，因此`' LIMIT 1`甚至不再评估）。

    为了缓解这个问题，在您当前的设置中，您需要先使用 清理输入值[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php)，然后再将它们传递给 SQL 查询，如下所示：

    ```
    $username = mysql_real_escape_string( $_POST["username"] ); 
    ```

    但正如其他人已经建议的那样，您最好开始使用兼容 MySQL 的库，该库提供带有参数化查询的准备好的语句，例如[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)，因为该`mysql_*`库正在被弃用，因为它提供的性能很差防御SQL注入的手段。

3.  您的密码逐字（作为纯文本）存储在数据库中。这提供了账户（以及可能与用户相关的账户）被泄露的各种潜在风险。任何有权访问数据库的人（无论是直接访问、授权访问还是数据库遭到入侵时）都可以以明文形式查看密码，因此可以使用这些密码登录您的站点，或将其用作潜在的登录其他网站和/或服务。毕竟，人们在各种其他网站和服务中使用相同的用户名和密码组合并不少见。

    为了缓解这个问题，明智的做法是在将密码存储到数据库之前对密码进行[散列](http://en.wikipedia.org/wiki/Cryptographic_hash_function)（单向加密），然后，当用户想要登录时，将存储的散列值与散列值进行比较（使用相同的散列功能再次）的用户输入的密码。强烈建议使用每个用户密码的唯一[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)作为额外的安全措施，因为这可以防止所谓的[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)攻击。

    有关首选散列算法是什么以及为什么要使用的更详尽解释，请参阅[用户 Andrew Moore](https://stackoverflow.com/a/6337021/165154)对此[问题](https://stackoverflow.com/q/4795385/165154)的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:45:29.640

```
$abfrage = "SELECT username, password FROM logins WHERE username='$username' LIMIT 1"; 
    $ergebnis = mysql_query($abfrage);
if(mysql_num_rows($ergebnis) > 0) // you can check for one
{
    $row = mysql_fetch_object($ergebnis);
//rest code goes inside here
// redirect to any page or do whatever you like
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T14:52:19.210

我假设您以这种方式登录以防止 SQL 注入，但是，mysql_real_escape_string() 将很快解决该问题。我会做这样的事情：

```
 $login = mysql_query("SELECT id FROM users WHERE username='" . mysql_real_escape_string($username) . "' AND password='" . mysql_real_escape_string($password) . "' LIMIT 1");
 if ( mysql_num_rows($login) > 0 ) {
      $user = mysql_fetch_array($login);
      $_SESSION['userID'] = $user['id'];
      echo 'Login successful!';
 } else { // login failed
      echo 'Login failed.';
 } 
```

请注意，我将用户的 ID 存储在会话中，而不是他们的用户名。这通常是一个更好的主意，因为基于唯一的 auto_increment 索引值而不是文本用户名来管理用户活动要容易得多。大多数网站都没有，但如果您愿意，此方法允许您让多个用户拥有相同的用户名。但是，如果您这样做，请确保您根据他们的电子邮件地址而不是他们的用户名登录，因为您不希望有人以其他人的身份登录，因为他们共享相同的用户名。

此外，您应该加密密码。MD5 是一个简单的解决方案，可以这样实现：

```
 $password = md5($_POST['password']); 
```

如果你 md5 输入密码，你也不需要担心斜线。希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T06:06:56.103

也许密码没有从数据库中正确获取。用来`print_r($row)`确保那里的一切都很好。

还可以使用带有盐的 sha1 加密来提高安全性。还可以：

```
$username = mysql_real_escape_string($_POST["username"]);
$password = mysql_real_escape_string($_POST["password"]); 
```

避免注射。

希望这可以帮助。

# android - android.support.v4.app.ListFragment 只是不显示

> ID：13803151
> 
> 赞同：1
> 
> 时间：2012-12-10T14:41:38.537
> 
> 标签：android, android-listfragment, android-support-library

我使用 SimpleCursorAdapter 的子类作为适配器扩展了支持库中的 ListFragment。所有数据加载部分都可以（通过调试读取），列表没有显示，我在 Activity 上有一个空白页面。这是我的代码：

```
import android.support.v4.app.FragmentActivity;

public class HostActivity extends FragmentActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view_with_fragment);
}
} 
```

布局文件（activity_view_with_fragment.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical" >
    <fragment
            android:id="@+id/lsStopTimetableFragment"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_marginTop="?android:attr/actionBarSize"
            android:layout_weight="1"
            class="com.package.Fragment.MyFragment">
    </fragment>
</LinearLayout> 
```

这是 ListFragment 代码：

```
import android.support.v4.app.ListFragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
public class MyFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor>{
    public  void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);
        String [] from = new String[] {"col_1", "col_2"}; 
        int [] to = new int [] {R.id.view1, R.id.view2}; 
        //..put value in args
        Loader l = getLoaderManager().restartLoader(0, args, this);
        if(l != null)
            l.forceLoad();

        adapter = new CustomCursorAdapter(this.getActivity()
              , R.layout.row_entry, null, from,
                to, 0);
        setListAdapter(adapter);
    }
    @Override
    public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {
        adapter.swapCursor(cursor);
    }
    public void onLoaderReset(Loader<Cursor> cursorLoader) {
        adapter.swapCursor(null);
    }

} 
```

在 CustomCursorAdapter 中，我确实实现了

> getView (int pos, View convertView, ViewGroup parent)

方法。任何提示？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:25:24.893

您是否尝试将片段项目中的 layout_width 和 layout_height 参数从 0dp 更改为 match_parent？如果您尝试创建一个仅包含填充整个活动的列表片段的活动，则无需创建如下布局：

```
<LinearLayout>
<fragment/>
</LinearLayout> 
```

您可以直接使用片段标签作为根标签和唯一标签创建布局：

```
<fragment/> 
```

# sql - SELECT COUNT(*) - 如果没有匹配的行，则返回 0 以及分组字段

> ID：13803153
> 
> 赞同：7
> 
> 时间：2012-12-10T14:41:43.857
> 
> 标签：sql, postgresql, count, left-join, aggregate-functions

我有以下查询：

```
SELECT employee,department,count(*) AS sum FROM items 
WHERE ((employee = 1 AND department = 2) OR 
      (employee = 3 AND department = 4) OR 
      (employee = 5 AND department = 6) OR 
      ([more conditions with the same structure]))
      AND available = true
GROUP BY employee, department; 
```

如果一对“employee-department”没有项目，则查询不返回任何内容。我希望它返回零：

```
 employee | department | sum 
 ---------+------------+--------
 1        |          2 |      0
 3        |          4 |     12  
 5        |          6 |   1234 
```

### 编辑1

看起来这是不可能的，正如 Matthew PK[在他对类似问题的回答中](https://stackoverflow.com/a/4866192/1270741)所解释的那样。我错误地假设 Postgres 可以以某种方式从 WHERE 子句中提取缺失值。

### 编辑2

有一些技巧是可以的。:) 感谢欧文·布兰德施泰特！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T16:21:03.287

不可能？接受挑战。:)

```
WITH x(employee, department) AS (
   VALUES
    (1::int, 2::int)
   ,(3, 4)
   ,(5, 6)
    -- ... more combinations
   )
SELECT x.employee, x.department, count(i.employee) AS ct
FROM   x
LEFT   JOIN items i ON i.employee = x.employee
                   AND i.department = x.department
                   AND i.available
GROUP  BY x.employee, x.department; 
```

这将为您提供您所要求的*确切*信息。如果`employee`并且`department`不是整数，则强制转换为匹配类型。

根据@ypercube 的评论：count() 需要位于 的非空列上`items`，因此我们得到`0`的是不存在的标准，而不是`1`。

此外，将附加条件拉到`LEFT JOIN`条件中（`i.available`在本例中），这样您就不会排除不存在的条件。

### 表现

在评论中解决其他问题。
这应该表现得非常好。对于更长的标准列表，`(LEFT) JOIN`可能是最快的方法。

如果您需要尽快使用它，请务必创建一个[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)，例如：

```
CREATE INDEX items_some_name_idx ON items (employee, department); 
```

If `(employee, department)`should be the `PRIMARY KEY` or you should have a `UNIQUE`constraint on the two columns, 这也可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:58:39.953

```
select employee, department,
    count(
        (employee = 1 and department = 2) or 
        (employee = 3 and department = 4) or 
        (employee = 5 and department = 6) or
        null
    ) as sum
from items
where available = true
group by employee, department; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T17:17:55.380

基于 Erwin 的加入建议，这个[确实有效](http://www.sqlfiddle.com/#!12/6667b/2)：

```
with x(employee, department) as (
   values (1, 2)
   )
select
    coalesce(i.employee, x.employee) as employee,
    coalesce(i.department, x.department) as department,
    count(available or null) as ct
from
    x
    full join
    items i on
        i.employee = x.employee
        and
        i.department = x.department
group by 1, 2
order by employee, department 
```

# c# - 从客户端调用 WCF 服务

> ID：13803156
> 
> 赞同：1
> 
> 时间：2012-12-10T14:41:52.617
> 
> 标签：c#, javascript, json, wcf

我将创建一个 WCF 服务（IIS 主机），它将从客户端 javascript 代码中调用。

当我从客户端调用 WCF 时，WCF 是 WCF 库还是 WCF 应用程序类型？

例如：我有下面的javascript。

```
function AddFunds() {
    var postObject = {
        myID: myObject.myIDNumber,
        LocationID: myObject.LocationID,
        fundsToAdd: CurrencyFormatted($("#txtAddFunds").val())
};
    $.post('/OrServices/myService.svc/AddFunds',
        JSON.stringify(postObject)
        ).success(AddFundsResult);
} 
```

一开始，我必须创建 WCF 服务“myService.svc”，但我不确定它是库还是应用程序或无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:26:55.300

[这个答案](https://stackoverflow.com/questions/1204365/what-is-the-difference-between-wcf-service-application-and-wcf-service-library)描述了区别：

> 服务应用程序包括已经为您设置的网站主机。服务库是主机可以引用和启动的服务库。
> 
> 如果您从服务库（推荐）开始，您可以选择您想要的任何主机（Windows 服务、IIS/ASP.NET 甚至控制台应用程序），然后您只需从新主机中引用您的库。选择服务应用程序将您的主机限制为仅 IIS/ASP.NET（尽管这对于您的目的来说可能没问题，但会限制您可以使用的协议）。
> 
> 编辑：自从我写这篇文章以来，IIS 的变化允许在 ASP.NET 激活的服务上使用更广泛的协议，因此选择服务应用程序的限制比以前少得多。

如果您只打算在 IIS 中托管，那么我建议您只使用服务应用程序。因为很多工作都是为你完成的。

# r - 如何在 R 中的单个列中找到更改？

> ID：13803158
> 
> 赞同：0
> 
> 时间：2012-12-10T14:42:11.200
> 
> 标签：r, dataframe

我有一个“csv”文件，其中包括 3 列、100 多行。所有列中的变量根据放置在第 1 列“时间”中的数据而变化。

```
Time    Temp    Cloud
1100    22  1
1102    14  1
1104    14  2
1106    23  1
1108    12  1
1110    21  2
1112    17  2
1114    12  3
1116    24  3 
```

我想知道“云”何时更改[例如在第 3 行和第 6 行]，并且我想获得放置在该行以及该行之前的行的其他变量。我怎样才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:10:36.457

`diff`几乎会直接做到这一点。应用两次。调用您的示例数据`d`：

```
> d[c(diff(d$Cloud) != 0,FALSE) | c(FALSE, diff(d$Cloud) != 0),]
  Time Temp Cloud
2 1102   14     1
3 1104   14     2
4 1106   23     1
5 1108   12     1
6 1110   21     2
7 1112   17     2
8 1114   12     3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:43:26.650

我会做这样的事情：

```
df$Change <- c(0,sign(diff(df$Cloud)))
subset(df,Change!=0)[,4] 
```

这将消除没有变化的行。

# ruby-on-rails - 用户子类的单独注册流程

> ID：13803163
> 
> 赞同：0
> 
> 时间：2012-12-10T14:42:23.723
> 
> 标签：ruby-on-rails, devise

我正在尝试为我的用户子类 - 成员和合作伙伴设置 2 个略有不同的注册流程。我想这样做：

/users/sign_up 将用户注册为会员（因此我在其中有一个隐藏字段，其值为“会员”），它就像一个魅力。

但我也想要：

/users/partner/sign_up 提供一种稍微不同的形式，将值赋予他们“合作伙伴”。

我特别希望通过 2 个单独的 URL 实现这一点，因此我可以向这些不同类型的用户发送不同的链接进行注册。

我正在为我的身份验证系统使用设计。

我很确定我应该生成一个单独的控制器，比如 partner_registrations_controller 并让它从设计中继承，但我不知道控制器中应该有什么代码。

我还认为我需要在视图/用户文件夹中创建一个新文件夹“partner_registrations”，我将在其中拥有特定的“new.html.erb”表单。

我终于知道我需要对路线做点什么，比如：

```
 devise_for :users, :controllers => { :registrations => :registrations } do
      get 'users/partner/sign_up', to: 'devise/registrations#new'
  end 
```

我已经在 github 上阅读了这个 wiki 页面：[https](https://github.com/plataformatec/devise/wiki/How-To%3a-Customize-routes-to-user-registration-pages) ://github.com/plataformatec/devise/wiki/How-To:-Customize-routes-to-user-registration-pages但我对此并不明智。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:00:23.837

我想通了，所以我想我会发布答案，以防其他人将来发现它有用：

路由文件：

```
 devise_scope :user do
    get 'sign_up', to: 'members#new', controller: {registrations: "members"}
    get 'partners/sign_up', to: 'content_partners#new', controller: {registrations: "content_partners"}
  end
  devise_for :users, controllers: {registrations: :registrations} 
```

我为每个子类创建了 2 个单独的控制器，具有与 devise 给出的基本相同的 new 和 create 操作：

```
class MembersController < Devise::RegistrationsController
  def new
    resource = build_resource({})
    respond_with resource
  end

  # POST /resource
  def create
    build_resource

    if resource.save
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_up(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end
end 
```

我刚刚在另一个子类的控制器中将“成员”替换为“ContentPartners”。

然后我在 Views/Users 文件夹中创建了 2 个新文件夹 - 注意让我遇到的问题，它们也必须是复数形式 - 所以 /members 和 /content_partners。然后在每个文件夹中，我创建了一个独特的“new.html.erb”文件。

就是这样。

# ruby - Redis 无法使用 redis-rb 连接（使用 Redistogo URL）

> ID：13803165
> 
> 赞同：1
> 
> 时间：2012-12-10T14:42:33.320
> 
> 标签：ruby, redis

我在 Heroku 上创建了一个 Redis To Go Nano 计划，我在不同的 Heroku 应用程序中使用连接 URL 来共享一个速率限制计数器。按照所有通常的步骤，这就是我所做的。

我已经添加了附加组件，并取回了 REDISTOGO_URL。

```
# redis url
redis://user:pass@spadefish.redistogo.com:9014/ 
```

这是引发的错误。

```
RuntimeError: nodename nor servname provided, or not known 
```

我试图从命令行模拟连接。

```
store = Redis.connect(url: 'redis://user:pass@spadefish.redistogo.com:9014/') 
```

store.get('key') # 引发错误

我得到了那个错误。如果我使用本地 Redis 实例，一切正常。

```
store = Redis.connect(url: 'redis://localhost:6379/0')
store('key') # does not raise error 
```

一切都让我觉得这是与 Redis URL 有关的问题。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:59:12.567

这是 redis to go spadefish 服务器出现的问题。
最初没有为 spadefish 配置 CNAME，因此您收到 DNS 解析错误。
spadefish 的 CNAME 已添加，连接到您的实例应该没有问题。

# iphone - Load html file from a local war folder

> ID：13803174
> 
> 赞同：0
> 
> 时间：2012-12-10T14:43:07.393
> 
> 标签：iphone, ios

I have a web app, all its resources are contained in a folder named "war".I've imported these into my xcode project (via File -> "Add Files to 'my project'").

Now my xcode project looks like:

```
MyProject
    |- war
        |- foo.html
    |- AppDelegate.h
    |- AppDelegate.m
    ... 
```

so now I try loading like:

```
NSBundle *bundle = [NSBundle mainBundle];
NSURL *url = [NSURL fileURLWithPath:[bundle pathForResource:@"foo" ofType:@"html"] isDirectory:NO];
NSURLRequest *req = [NSURLRequest requestWithURL:url];
[self.mWebView loadRequest:req]; 
```

I don't get compile errors, but my UIWebView is empty. I do get webViewDidLoad callbacks too. Is there some other way we need to load local pages like this?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:52:08.070

如果它是一个真正的子目录（即，文件夹名称显示为蓝色）：

![在此处输入图像描述](../Images/1634b9f797b1b79e8265c20210fde10f.png)

然后你可以使用[`URLForResource:withExtension:subdirectory:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/doc/uid/20000214-SW8)：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"foo" 
                                     withExtension:@"html"
                                      subdirectory:@"war"]; 
```

或者，如果它只是一个“组”（即，如果“文件夹”没有以蓝色显示）：

![在此处输入图像描述](../Images/bc744b82152fc5701d2dc4c66e45a297.png)

然后你使用普通的 old [`URLForResource:withExtension:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/doc/uid/20000214-SW9)：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"foo" 
                                     withExtension:@"html"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:47:19.883

这就是我通常毫无问题地加载本地 html 文件的方式。

```
[webView loadRequest:[NSURLRequest requestWithURL:[[NSBundle mainBundle] URLForResource:self.fileName withExtension:nil]]] 
```

由于您的代码对我来说大部分看起来都是正确的，我认为这可能是其他一些问题。我建议为您的 webView 设置一个委托并检查其`- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error`方法以查看是否提供更多信息。

还要确保您`foo.html`是目标成员。

# asp.net - logout without any reason in asp.net

> ID：13803182
> 
> 赞同：1
> 
> 时间：2012-12-10T14:43:41.370
> 
> 标签：asp.net, asp.net-membership, membership-provider

I make a website with asp.net and it works fine. but sometimes it kick users out of their account with out any reason. I mention in my web config for session and web form time out. but it happen again. and also my data for the sessions are not too much.for example a word!(journal x). can any body help me?... I become confused! here is my web config:

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <appSettings>
    <add key="ChartImageHandler" value="storage=session;timeout=5;" />
  </appSettings>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />

    <handlers>
      <remove name="ChartImageHandler" />
      <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST"
        path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </handlers>
  </system.webServer>
  <system.net>

    <mailSettings>
      <smtp from="waag@waag.ir">
        <network host="mail.waag.ir" port="25" userName="*****" password="*****"/>
      </smtp>
    </mailSettings>
  </system.net>
  <connectionStrings>

    <!--<add name="dbconn" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.MDF;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/>
        <add name="ConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.MDF;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/>-->

    <add name="dbconn" connectionString="Password=****;Persist Security Info=True;User ID=****;Initial Catalog=esfahanhost_****;Data Source=174.142.4.132" providerName="System.Data.SqlClient" />

    <remove name="LocalSqlServer"/>

    <add name="LocalSqlServer" connectionString="Password=****;Persist Security Info=True;User ID=****;Initial Catalog=esfahanhost_****;Data Source=174.142.4.132" providerName="System.Data.SqlClient" />

  </connectionStrings>
  <system.web>

    <httpHandlers>
      <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        validate="false" />
    </httpHandlers>
    <membership defaultProvider="AspNetSqlMembershipProvider" userIsOnlineTimeWindow="15">

      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="dbconn"
           enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
           maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
           applicationName="/" />

      </providers>
    </membership>

    <sessionState mode="InProc" timeout="30"/>
    <roleManager enabled="true"/>
    <authentication mode="Forms">  
      <forms timeout="30" slidingExpiration="true" name="AC7.ASPXAUTH" />
    </authentication>

      <compilation debug="true" strict="false" explicit="true" targetFramework="4.0">
        <assemblies>

          <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
          <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
          <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        </assemblies>
      </compilation>
      <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" enableEventValidation="false" viewStateEncryptionMode="Never" enableViewStateMac="false">
          <controls>
              <add tagPrefix="asp" namespace="System.Web.UI.DataVisualization.Charting"
                  assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
          </controls>

      </pages>

  </system.web>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:56:25.213

登录信息存储在一个 cookie 中，如果您没有在 web.config 上为 cookie 设置域并且您从例如移动`www.domain.com`到`domain.com`cookie 将无法正常工作并且可能会注销。

因此`domain`，将表单标签上的设置为（不要放置 www）：

```
<authentication mode="Forms">  
  <forms domain="yoursitename.com" timeout="30" slidingExpiration="true" name="AC7.ASPXAUTH" />
</authentication> 
```

还要在标签和 cookie 标签上设置**域。**`roleManager`

更多阅读内容：
[一些黑客可以从用户那里窃取 cookie 并在网站上使用该名称登录吗？](https://stackoverflow.com/questions/2498599/can-some-hacker-steal-the-cookie-from-a-user-and-login-with-that-name-on-a-web-s)
[使用相同登录数据库的多个应用程序相互注销](https://stackoverflow.com/questions/2454623/multiple-applications-using-same-login-database-logging-each-other-out/2491686#2491686)

# c++ - programmatically feed a kml-file and retrieve/generate a .png-file

> ID：13803195
> 
> 赞同：0
> 
> 时间：2012-12-10T14:44:11.947
> 
> 标签：c++, kml

How can I, programmatically, draw a KML-file (routing information on a map) onto a map and then save the result to a .png-file?

What I try to accomplish: a program of mine (written in C++) produces a route. Now I would like this program to emit a .png-file instead with the route draw on it.

I've looked into the google maps api as well as others (e.g. cartagen) but google maps is java-script oriented and cartagen produces html5 output.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:02:15.297

可能您可以使用 Qt 框架来实现这一点。它有很好的 XML 支持，所以它应该很容易阅读 KML。它支持绘制简单的形状。它也支持PNG。

还有一个名为 libkml 的库 - 它可能可以帮助您处理 KML 文件。

我非常怀疑是否有任何“准备使用”的解决方案。

# hibernate-mapping - Hibernate : @OneToMany : Always deleting and reinserting the child records

> ID：13803196
> 
> 赞同：1
> 
> 时间：2012-12-10T14:44:15.060
> 
> 标签：hibernate-mapping

Please help me resolve this issue. I tried googling for a solution and couldn't find one for this.

## Table structure

Table: Catalog catalog_id (primary key) name

Table: Catalog_Locale catalog_id locale_id sequence composite key(catalog_id,locale_id)

## Class

public Class Catalog{

```
@Id
@Column(name = "CATALOG_ID", nullable = false)
private String catalogId;

@Column(name = "NAME")
private String name;

    @OneToMany(targetEntity = CatalogLocale.class,fetch=FetchType.LAZY)
@JoinColumn(name = "CHILD_CATALOG_ID", nullable = false)
@Cascade(value = {})
protected List<CatalogLocale> locales = new ArrayList<CatalogLocale>(10);

    public void setCatalogId( String catalogId ){

    this.catalogId = catalogId;
}

    public void setName( String name ){

    this.name = name;
}

    public void setLocales( List<CatalogLocale> locales ){

    this.locales = locales;
}

    public void getCatalogId(){

    return catalogId;
}

    public void getName(){

    return name;
}

    public void getLocales(){

    return locales;
} 
```

}

public class CatalogLocale{

```
@EmbeddedId
CatalogLocalePk catalogLocalePk;

@Column(name = "SEQUENCE")
private int sequence;

public void setCatalogLocalePk( CatalogLocalePk catalogLocalePk ){

    this.catalogLocalePk = catalogLocalePk;
}

public void setSequence( int sequence ){

    this.sequence = sequence;
}

public CatalogLocalePk getCatalogLocalePk(){

    return catalogLocalePk;
}

public int getSequence(){

    return sequence;
}

@Embeddable
public static class CatalogLocalePk{

    @Column(name = "CATALOG_ID", nullable = false)
    private String catalogId;

    @Column(name = "LOCALE_ID", nullable = false)
    private String localeId;

    public CatalogLocalePk(){

    }

    public CatalogLocalePk( String catalogId, String localeId ){

        this.catalogId = catalogId;
        this.localeId  = localeId;
    }

    public void setCatalogId( String catalogId ){

        this.catalogId = catalogId;
    }

    public void setLocaleId( String localeId ){

        this.localeId = localeId;
    }

    public String getCatalogId(){

        return catalogId;
    }

    public String getLocaleId(){

        return localeId;
    }
} 
```

}

The code works for fine for the insert operation, but for any update to the Catalog will trigger for delete and reinsert all entries of the child table.

Is there any solution for this?

# eclipse - Eclipse 和 Google Drive

> ID：13803197
> 
> 赞同：0
> 
> 时间：2012-12-10T14:44:17.567
> 
> 标签：eclipse, workspace, google-drive-api

我在家里的电脑和我在工作的电脑与 Google Drive 同步。我创建了一个 Eclipse 工作区，并在家里创建了一个 Android 项目。它被复制到我的工作计算机上。但我无法在使用 Eclipse 时打开工作区。如何使用 Eclipse 打开包含项目的现有工作区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:54:16.837

当切换到相关的工作区时，项目应该已经包含在它属于工作区的范围内。所以你不需要导入项目。事实上，导入会导致您意识到的错误。

可能您看不到该项目在工作，因为 eclipse 在路径上找不到它。所以你可以确保项目（到你的谷歌驱动器和项目）与家里的一样，然后eclipse应该找到它。或者通过从工作区中“在家”删除项目并重新导入，将项目直接复制到工作区中。从导入对话框中选择“复制到我的工作区”选项。

# authentication - MKNetworkKit and authentication

> ID：13803198
> 
> 赞同：1
> 
> 时间：2012-12-10T14:44:20.900
> 
> 标签：authentication, http-status-code-403, mknetworkkit, mknetworkengine

I just switched from ASIHTTPRequest to MKNetworkKit, anyway I'm facing the following issue, the post request have this kind of url [https://username:pass@hostname.com](https://username:pass@hostname.com), when I make the request using MKNetworkKit I always receive a 403 error. below the code I use :

```
sharedEngine = [[super alloc] initWithHostName:@"hostname.com"]

MKNetworkOperation *op = [self operationWithPath:@"login.json"
                                          params:nil
                                      httpMethod:@"POST"
                                             ssl:YES];
[op setUsername:@"username" password:@"password" basicAuth:YES];
[op addData:[email dataUsingEncoding:NSUTF8StringEncoding] forKey:@"email"];
[op addData:[password dataUsingEncoding:NSUTF8StringEncoding] forKey:@"password"];

[op addCompletionHandler:^(MKNetworkOperation *completedOperation) {
    NSDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData:completedOperation.responseData
                                                                       options:kNilOptions
                                                                         error:nil];
    handler(responseDictionary,completedOperation.HTTPStatusCode);

} errorHandler:^(MKNetworkOperation *completedOperation, NSError *error) {
    _error(error);
}];
[self enqueueOperation:op]; 
```

I don't understand what's wrong

# java - UDP messaging cannot success get it in computer2

> ID：13803204
> 
> 赞同：0
> 
> 时间：2012-12-10T14:44:41.217
> 
> 标签：java, udp

I have the problem i using UDP connection to send 3 messages to the computer2, it can only get the last messages only in the computer 2

```
String service = "deposit";     //send service
byteSend = service.getBytes();
sendPacket.setData(byteSend);
sendPacket.setAddress(destAdd);
sendPacket.setPort(destPort);
otherBranch.send(sendPacket);

byteSend1 = accNo.getBytes();    //send accNo
sendPacket.setData(byteSend1);
sendPacket.setAddress(destAdd);
sendPacket.setPort(destPort);
otherBranch.send(sendPacket);

byteSend2 = depositAmount.getBytes();  //send depositAmount
sendPacket.setData(byteSend2);
sendPacket.setAddress(destAdd);
sendPacket.setPort(destPort);
otherBranch.send(sendPacket); 
```

after that the computer2 have this code to receive:

```
myServer.receive(packetReceive);
clientMessage = new String(packetReceive.getData(),0,packetReceive.getLength());
System.out.println("Service: "+clientMessage);

myServer.receive(packetReceive);
accNo = new String(packetReceive.getData(),0,packetReceive.getLength());
System.out.println("accNo: "+accNo);

myServer.receive(packetReceive);
depositAmount = new String(packetReceive.getData(),0,packetReceive.getLength());
System.out.println("depositAmount: "+depositAmount); 
```

How come the output only can get my last value which is depositAmount only?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:46:39.070

您的代码没有传输节奏。使用 TCP，堆栈会为您传输起搏。使用 UDP，这是您的责任。

您需要编写代码来检测丢弃的数据报并重新传输它们。UDP 不保证消息传递。这就是应用程序的工作。

如果您需要 TCP 所做的一切，但您选择使用 UDP，您必须自己实现所有这些。

这包括：

1.  传输起搏。

2.  指数退避。

3.  丢弃数据报检测和重传。

4.  重复数据报检测。

5.  乱序接收处理。

6.  损坏数据报检测。

如果您不想做所有这些事情，请使用 TCP。然后堆栈为您完成所有工作。

# ember.js - 页面刷新后 URL 序列化不起作用

> ID：13803206
> 
> 赞同：0
> 
> 时间：2012-12-10T14:44:48.487
> 
> 标签：ember.js, ember-old-router

我遇到了 emberJS 和路由器的问题。

我的路线架构如下：

*   根
    *   指数
    *   应用程序
        *   家
        *   物品
            *   显示/：标识
            *   编辑/：标识

当我最初导航到 display/:id 时，URL 写得很好，如下所示：

```
localhost/#/app/item/display/da083d21-afab-4620-8a85-6a4e6bfb95b9 
```

然后我点击浏览器的刷新按钮，然后将 URL 写为

```
localhost/#/app/item/display/undefined 
```

我的路线中有以下函数来处理序列化/反序列化

```
deserialize:  function(router, context) {
    return App.Item.find(context.id);
},
serialize:  function(router, context){
    return { id: context.id };
} 
```

当我记录在 serialize 中传递的上下文时：

*   刷新前：设置为正确的项目
*   刷新后：它被设置为一个不包含 id 的元素（不是我的项目）

所以我想我在页面刷新后缺少一些东西来序列化我的 URL。

有铅吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:31:05.447

这个问题已经在[Emberjs 异步路由中得到解决](https://stackoverflow.com/questions/12034375/emberjs-async-routing)

解决方案是使用 Deferred 对象并实现加载状态。

希望有帮助

# java - 如何将文件传递给 testng 测试方法？

> ID：13803210
> 
> 赞同：0
> 
> 时间：2012-12-10T14:44:57.063
> 
> 标签：java, unit-testing, annotations, testng

我有以下目录结构：

**更新结构**

```
src
 |
 -test
     |
     -java
     |   |
     |   -SomeXmlTest.java
     |
     -resources
          |
          -someXmlContent.xml 
```

我认为类似这种不好的做法：

```
new File(C:\Project ... \src\resources\someXmlContent.xml)

// or magic dance like that
File currentDir = new File(System.getProperty("user.dir");
File parent = currentDir.getParent();
for (File file:parent.listFiles()){
    //find resources directory and iterate over it files
} 
```

我相信有简单的注释基础解决方案，例如我只是在一些注释中写“src\resources\someXmlContent.xml”并自动测试解析路径，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:50:38.043

使用*资源*而不是*文件*。通过这种方式，您可以将应用程序打包到 jar 中并检索 jar 中的资源。

使用 InputStream 而不是 File/FileInputStream：

```
InputStream in = getClass().getResourceAsStream("/someXml.xml"); 
```

这是比 File 更通用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:40:28.957

如果你可以重构你的代码！它应该采用输入流而不是文件。然后在内存流中使用（例如 apache commons IOUtils）。这样您就无法访问任何外部资源

# c# - DispatcherTimer stop when Window application hanged

> ID：13803214
> 
> 赞同：0
> 
> 时间：2012-12-10T14:45:12.860
> 
> 标签：c#, .net, wpf, multithreading

I have Written this function to update timer time in every single of second.

```
DispatcherTimer dispatcherTimer = new DispatcherTimer();
dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
dispatcherTimer.Interval = TimeSpan.FromSeconds(1.0);

private void dispatcherTimer_Tick(object sender, EventArgs e)
{
            ApplicationVariables.ServerDateTime = CurrentDT = CurrentDT.AddSeconds(1);     
} 
```

But if my application hanged for some time then application timer stop at that time and after responding application timer start and started from last time rather than adding application hanged time with last time to show actual time. Please suggest me how to keep timer on even if application get hang.

I am using BackgroundWorker object to maintain application hang state.

It normally hang when my application trying to initialize object of fujitsu reader.

Please find attachment to more details.

![enter image description here](../Images/00021775804b06fe831b9693444a7684.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:03:41.283

我建议使用非调度程序计时器来执行您的任务并在必要时通过调用来更新 UI。

```
public System.Threading.Timer MyTimer { get; set; }

this.MyTimer = new System.Threading.Timer(new TimerCallback(MyTimer_CallBack), null, 1000, 1000);

void MyTimer_CallBack(object State)
{
this.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal, (System.Threading.ThreadStart)delegate()
{
  ApplicationVariables.ServerDateTime = CurrentDT = CurrentDT.AddSeconds(1); 
});
} 
```

# actionscript-3 - highlighting mx:datagrid individual cell on drag event

> ID：13803215
> 
> 赞同：1
> 
> 时间：2012-12-10T14:45:12.367
> 
> 标签：actionscript-3, apache-flex, datagrid, flex4.6, datagridcell

I'm new to flex and recently assigned a project where I need to work on datagrid to make it able to highlight individual or multiple (but adjacent) cells based on the item being dragged from a list. So scenario is like this...

I'm using flex SDK 4.6\. I have a mx datagrid (I can't use spark or other version due to some restrictions) with some dates as rows and time (00-23 hrs) in columns( so total 25 columns: 1st column showing dates and rest 24 for hours).

That way we have each date acting as row-header which runs through 24 columns for hours. I have a list which is getting populated from an XML file and each item in the list has a date and time elements associated with it. when we drag an item from the list into datagrid, it should highlight particular cell(s) in the datagrid based on matching dates(from list item being dragged and datagrid dates column) and matching hours (from list item being dragged and datagrid hour columns).

So far I'm able to get the row index and column index/indices on drag enter but getting them highlighted as a whole row-column. for example if it turns out to be 3rd row and 4th-5th column, it highlights whole 3rd row(all 25 columns) and all cells under 4th-5th column. what I need is to get to a specific location like someCell(rowIndex:xx, ColIndex:YY) and change that cell's style. There are some examples with item-renderer but they are using cell's data to find if its less than or greater than some value and then maipulating it, but I couldn't use it in my case.

Secondly I want to replace the scrollbars with two buttons(one at top and another at bottom) of the dates column to scroll the dates. I'll be very thankful for any advise on that too. Hope I've made the questions/scenario clear. Thanks for having a look into it. Looking forward for a helping hand from the community. This task is on urgent list...please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:12:53.583

如果我正确理解了您的问题，这是我的建议。

您应该能够为数据网格的每个单元格提供有关日期和时间的信息。您可以通过实现 IDropInListItemRenderer 接口的 ItemRenderer 来实现。如果用户选择您的 XML 列表中的任何元素，他会定义一个特定的时间点，该时间点应与 ItemRenderer 中的一个进行比较。

我希望它会帮助你。

![在此处输入图像描述](../Images/f3fd698c8c5cda8ccae5ef0220f2d688.png)

//CellRenderer.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:mx="library://ns.adobe.com/flex/mx" 
     width="100%" height="100%" 
     backgroundColor="{(cellDate == parentDocument.selectedDate &amp;&amp; cellHour == parentDocument.selectedHour) ? 0xfcb9bb : 0xfefceb}" 
     implements="mx.controls.listClasses.IDropInListItemRenderer">

<fx:Script>
    <![CDATA[
        import mx.controls.dataGridClasses.DataGridListData;
        import mx.controls.listClasses.BaseListData;

        private var _listData:BaseListData;

        [Bindable]private var cellDate:String;
        [Bindable]private var cellHour:String;

        override public function set data( value:Object ) : void 
        {
            super.data = value;

            cellDate = data.date;
            cellHour = (listData as DataGridListData).label;
        }

        [Bindable]public function get listData() : BaseListData
        {
            return _listData;
        }
        public function set listData( value:BaseListData ) : void
        {
            _listData = value;
        }
    ]]>
</fx:Script>

</mx:HBox> 
```

//应用

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:mx="library://ns.adobe.com/flex/mx" 
            layout="absolute" 
            minWidth="955" minHeight="600" creationComplete="initApp()" backgroundColor="0xeeeeee">

<fx:Declarations>
    <fx:Model id="cells">
        <dataset>
            <data>
                <date>14.01.2013</date>
                <h00>00:00</h00>
                <h01>01:00</h01>
                <h02>02:00</h02>
                <h03>03:00</h03>
            </data>
            <data>
                <date>15.01.2013</date>
                <h00>00:00</h00>
                <h01>01:00</h01>
                <h02>02:00</h02>
                <h03>03:00</h03>
            </data>
            <data>
                <date>16.01.2013</date>
                <h00>00:00</h00>
                <h01>01:00</h01>
                <h02>02:00</h02>
                <h03>03:00</h03>
            </data>
            <data>
                <date>17.01.2013</date>
                <h00>00:00</h00>
                <h01>01:00</h01>
                <h02>02:00</h02>
                <h03>03:00</h03>
            </data>
        </dataset>
    </fx:Model>
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.DragEvent;
        import mx.events.ListEvent;

        [Bindable]public var selectedDate:String;
        [Bindable]public var selectedHour:String;

        private function initApp():void 
        {
            srclist.dataProvider = new ArrayCollection([
                {activity: 'Reading',       date: '14.01.2013', hour: '01:00'},
                {activity: 'Television',    date: '15.01.2013', hour: '03:00'},
                {activity: 'Movies',        date: '16.01.2013', hour: '02:00'}
            ]);
        }

        protected function onItemRollOver(event:ListEvent):void
        {
            var item:Object = (srclist.dataProvider as ArrayCollection).getItemAt(event.rowIndex);
            selectedDate = item.date;
            selectedHour = item.hour;
        }
    ]]>
</fx:Script>

<mx:HBox x="35" y="28" height="200">

    <mx:VBox width="124" height="100%">
        <mx:Label text="Available Activities"/>
        <mx:List 
            id="srclist" 
            labelField="activity" 
            width="118" height="100%" 
            allowMultipleSelection="false" 
            dragEnabled="true"
            dragMoveEnabled="true" selectionColor="0xffffff"
            itemRollOver="onItemRollOver(event)" itemRollOut="selectedDate = ''; selectedHour = '';"/>
    </mx:VBox>

    <mx:VBox height="100%">
        <mx:Label text="Scheduler"/>

        <mx:DataGrid 

            width="386" height="100%" dataProvider="{cells.data}" 
            alternatingItemColors="[0xffffff]"
            horizontalGridLineColor="0x999999" 
            horizontalGridLines="true"
            verticalGridLineColor="0x999999" 
            sortableColumns="false" 
            resizableColumns="false" selectable="false">

            <mx:columns>
                <mx:DataGridColumn dataField="date" headerText="Data"/>
                <mx:DataGridColumn dataField="h00" headerText="00:00" itemRenderer="com.CellRenderer"/>
                <mx:DataGridColumn dataField="h01" headerText="01:00" itemRenderer="com.CellRenderer"/>
                <mx:DataGridColumn dataField="h02" headerText="02:00" itemRenderer="com.CellRenderer"/>
                <mx:DataGridColumn dataField="h03" headerText="03:00" itemRenderer="com.CellRenderer"/>
            </mx:columns>
        </mx:DataGrid>
    </mx:VBox>

</mx:HBox>

</mx:Application> 
```

# python - python确定导入模块的名称

> ID：13803219
> 
> 赞同：3
> 
> 时间：2012-12-10T14:45:19.223
> 
> 标签：python, multithreading, import, names

您如何确定正在导入的模块中的导入模块的名称。我有部分解决方案，但没有完整的解决方案。

代码是：A.py

```
import B

if __name__ == '__main__':
    print 'This a test' 
```

B.py

```
import sys
import C
if sys.argv[0] == 'A':
    doSomething() 
```

在这一点上，我已经准备好了，因为在模块 B 中，我知道调用导入的 main 的名称，在这种情况下是 A。但是，在 B 中，请求导入 C，并且在 C 中我想知道B是否输入了C？这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:52:04.603

`sys.argv[0]`执行时不是模块的名称`import`。这是可执行文件的名称。

另一方面，在 Python 模块内部`__name__`等于 a) 模块名称，如果它是通过导入执行的，b)`"__main__"`如果它是作为脚本执行的。

模块不“知道”谁执行`import`（没有“父”属性或类似的东西）。用不同的函数定义你的行为，并从不同的模块调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:50:42.713

但是，我怀疑这实际上是您想要做的。请特别注意，B 中的顶级代码只会运行一次，无论从多少地方导入模块多少次。

例如，如果您还在某个地方导入了模块 D，该模块在模块 B 到达之前导入了模块 C，那么当从 B 导入时，您在 C 中的代码将永远不会运行。

我认为在 C 中简单地定义一个函数可能是一个更好的主意，在导入 C 之后 B 可以运行一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:53:38.473

您可以尝试[解释器堆栈](http://docs.python.org/2/library/inspect.html#the-interpreter-stack)或[回溯](http://docs.python.org/2/library/traceback.html)。两者都会给你堆栈的函数调用，所以这不是你想要的解决方案（模块）。

# javascript - 从 javascript click() 动态设置锚文本

> ID：13803224
> 
> 赞同：0
> 
> 时间：2012-12-10T14:45:34.703
> 
> 标签：javascript, html, css, anchor

我的 html 正文中有一个锚点：

```
<a id="title" class="acc" ></a> 
```

然后我有以下javascript。锚文本从下面的第一条语句中设置为“aaa”。当我单击“列表”元素时，我收到警报，但锚文本未更新。这里有什么问题吗？

```
$(document).ready(function(){
        $('#title').text("aaa");

        $("#list").click(function() {
            alert($(this).text());
            $('#title').text("new title");
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:53:03.927

像这样用 .html 试试

```
$(document).ready(function(){
        var title = $('#title').html("aaa");

        $("#list").click(function() {
            alert(title.text());
            title.html('new title');
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:53:42.717

这更好：

```
$(document).ready(function(){
    $('#title').html("aaa");
});

$("#list").do("click", function() {
    alert($(this).html());
    $('#title').html("new title");
}); 
```

# android - 在android上通过WI-FI获取位置的问题

> ID：13803227
> 
> 赞同：2
> 
> 时间：2012-12-10T14:46:00.073
> 
> 标签：android, geolocation, android-4.0-ice-cream-sandwich

我有麻烦。我无法在我的 HTC 上获得令人难以置信的位置。

这是我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.locationfinder"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是我的活动

```
public class MainActivity extends Activity {
 /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

   /* Use the LocationManager class to obtain GPS locations */
   LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
   LocationListener mlocListener = new MyLocationListener();
   mlocManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener);
   }

   /* Class My Location Listener */
   public class MyLocationListener implements LocationListener
   {
       @Override
       public void onLocationChanged(Location loc)
       {
           loc.getLatitude();
           loc.getLongitude();

           String Text = "My current location is: " +
                         "Latitude = " + loc.getLatitude() +
                         "Longitude = " + loc.getLongitude();

           Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
       }

       @Override
       public void onProviderDisabled(String provider)
       {
           Toast.makeText( getApplicationContext(), "WIFI Disabled", Toast.LENGTH_SHORT ).show();
       }

       @Override
       public void onProviderEnabled(String provider)
       {
           Toast.makeText( getApplicationContext(), "WIFI Enabled", Toast.LENGTH_SHORT).show();
       }

       @Override
       public void onStatusChanged(String provider, int status, Bundle extras)
       {
           Toast.makeText( getApplicationContext(), "snth", Toast.LENGTH_SHORT).show();
       }

   }/* End of Class MyLocationListener */ 
```

}

如果我`LocationManager.GPS_PROVIDER`改为选择`LocationManager.NETWORK_PROVIDER`并且 GPS 已关闭，则它当前会在“禁用 GPS”的情况下进行吐司。但是，如果我使用 `LocationManager.NETWORK_PROVIDER`，无论 WiFi 状态如何，都不会发生任何事情。

# android-widget - 如何将 Google Analytics 添加到 Android 应用小部件？

> ID：13803232
> 
> 赞同：4
> 
> 时间：2012-12-10T14:46:17.450
> 
> 标签：android-widget, google-analytics

我一直在努力对我的应用程序小部件进行 Google 分析，但没有任何成功，代码在 Activity 中使用时运行良好，但在应用程序小部件中却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-19T04:32:48.563

您好在您的 AppWidgetProvider onEnabled() 方法中使用此代码

```
 Tracker t = ((MyApplication) context.getApplicationContext()).getTracker(
            MyApplication.TrackerName.APP_TRACKER);

 // Set screen name.
 t.setScreenName(screenName);

 // Send a screen view.
 t.send(new HitBuilders.AppViewBuilder().build()); 
```

# java - 对不同语言的 zip 文件进行 zip 提取

> ID：13803235
> 
> 赞同：0
> 
> 时间：2012-12-10T14:46:27.357
> 
> 标签：java

我在 java 中有一个使用 java.util.zip 包的简单提取方法。

编辑：作为说明，我需要在 java 1.5 中运行代码，因为它必须在 oracle 数据库中作为 java 存储过程运行。

它已经完美运行了一段时间，但最近我在尝试提取名称中包含西班牙特殊字符的 zip 文件和其中包含西班牙特殊字符的文件时遇到了一个错误。

代码失败

```
 ZipEntry entry = zis.getNextEntry(); 
```

这是因为特殊字符吗？我已验证该 zip 没有损坏，并已在名称中包含特殊字符的其他 zip 上进行了测试，并已验证它是否会导致相同的错误。

最后，如果是这种情况，是否有解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:54:48.897

在 Java 7 中，您可以使用[ZipFile(File, Charset)](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html#ZipFile%28java.io.File,%20java.nio.charset.Charset%29)指示字符编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:30:33.347

我发现 org.apache.commons 有一个压缩类，并且有很多不同的选项。它允许您指定一个编码参数，以便它现在可以接受来自不同语言的字符。

# dynamic - 导航网格系统中的动态避障

> ID：13803240
> 
> 赞同：0
> 
> 时间：2012-12-10T14:46:58.877
> 
> 标签：dynamic, path-finding, unreal-development-kit, d-star

我已经用虚幻引擎构建了我的寻路系统，不知何故，寻路部分工作得很好，而我找不到解决动态避障问题的合适方法。我的角色在整个地图上行走，并在移动时相互碰撞。当发生碰撞时，我尝试引导它们，但这效果不佳。例如，两个角色挡在路上，而第三个角色的路径正好在他们中间，他会被卡住。有人能告诉我最流行的动态回避方法吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:05:02.693

我认为最好的方法是使用动态 NavMesh 障碍物。

您必须为您的角色实例化一个动态障碍物，并在每帧使用一个角色更新其位置。

[您将在CreatingADynamicNavMeshObstacle](http://udn.epicgames.com/Three/DevelopmentKitGemsCreatingADynamicNavMeshObstacle.html)页面上了解如何操作。

# c# - 如何在 XML 配置文件和数据库表之间保持值同步？

> ID：13803243
> 
> 赞同：0
> 
> 时间：2012-12-10T14:47:06.077
> 
> 标签：c#, sql-server, xml, sql-server-2008, hierarchical-data

我在层次中以分层方式构建。举个例子。

```
Category 7
    Objective 7.1  [GeneralExpectation='']
        A  [Expectation='']
        B  [Expectation='']
        C  [Expectation='']
    Objective 7.2  [GeneralExpectation='']
        A  [Expectation='']
        B  [Expectation='']
    Objective 7.3  [GeneralExpectation='']
        A  [Expectation='']
Category 8
    ... 
```

我想将这些信息存储在 xml 文件中而不是数据库中会很方便。

```
<Levels>
  <Level Id=7>
    <Categories>
      <Category Id=1 Name="Numbers, Operations, and Quantitative Reasoning" Expectation="The student will demonstrate an understanding of numbers, operations, and quantitative reasoning.">
        <Objective Id="7.1" Name="Number, operation, and quantitative reasoning." GeneralExpectation="The student represents and uses numbers in a variety of equivalent forms. The student is expected to">
          <SubObjective Id="A" Expectation="compare and order integers and positive rational numbers; Supporting Standard" />
          <SubObjective Id="B" Expectation="convert between fractions, decimals, whole numbers, and percents mentally, on paper, [or with a calculator]; and Readiness Standard" />
        </Objective>
      </Category>
      <Category Id=2 Name="Patterns, Relationships, and Algebraic Reasoning" Expectation="The student will demonstrate an understanding of patterns, relationships, and algebraic reasoning.">
      </Category>
    </Categories>
  </Level>
</Levels> 
```

我这样做是因为我需要`TreeView`在 WPF 的控件中访问这些信息。但同时，我的 SQL 数据库中有一个表，需要存储用户正在使用的 Level 目标： `7.1A, 7.1B, 7.1C, 7.2A`.

这是一个好习惯吗？或者我没有保留这两个数据之间的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:28:55.587

@DarfZon，我会将数据保留为一种格式（如果您的其他数据也是关系数据，我的建议是 SQL Server）。[您可以使用 SQL Server 强大的 XML 语法和FOR XML](http://msdn.microsoft.com/en-us/library/ms178107)子句以分层格式检索 SQL Server 中的关系数据。

# asp.net - Web 内容的可拖动小部件

> ID：13803244
> 
> 赞同：0
> 
> 时间：2012-12-10T14:47:18.517
> 
> 标签：asp.net, draggable, sitefinity

我如何为 sitefinity 等 Web 内容创建可拖动的小部件。例如联系表单、图像滑块、页面布局等。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:22:38.053

既然您使用的是 ASP.NET，为什么不使用已经具有此功能的[Web 部件控件。](http://msdn.microsoft.com/en-us/library/e0s9t4ck%28v=vs.100%29.aspx)我知道[Telerik 也对此有控制权](http://demos.telerik.com/aspnet-ajax/dock/examples/overview/defaultcs.aspx)。那将是最简单的方法，但您可以使用 JQuery 可拖放/可拖放插件构建自己的方法。但是，这些不会在回发中保存它们的状态。

# video - 媒体库和视频

> ID：13803252
> 
> 赞同：0
> 
> 时间：2012-12-10T14:47:48.747
> 
> 标签：video, sitecore

我目前正在寻找将 JW Player 集成到 sitecore 站点中。当我静态地为播放器提供媒体库中视频的 url 时，它可以正常工作。我正在努力解决的问题是现在将其作为 sitecore 内容中的一个领域，以便内容人员可以上传并从媒体库中选择视频。

基本上我想要的是使用一个只给我视频网址的字段，这样我就可以把它放在 jw 播放器片段中，比如：

```
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "<sc:link Field="link" runat="server">",
        image: "/uploads/example.jpg",
    });
</script> 
```

但这显然不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:05:27.603

在 Javascript 中使用`<sc:link />`控件确实是行不通的。您需要使用服务器端代码为您的电影创建正确的 Url（使用 Sitecore LinkManager）。

有几种方法可以获取 javascript 的 url。您可以将链接作为参数传递给您的 Javascript 或使用内联代码语句，例如`<%= VideoUrlVariable %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:40:32.323

```
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "<asp:Literal ID="litMediaUrl" runat="server" />",
        image: "/uploads/example.jpg",
    });
</script> 
```

然后在您的代码隐藏中检索 LinkField url 值：

```
LinkField linkField = item.Fields["your_linkfield_name"];
litMediaUrl.Text = linkField.Url; 
```

也许您需要先检索链接的项目，然后获取该项目的 URL（不确定）。在这种情况下，你会这样做：

```
litMediaUrl.Text = Sitecore.Resources.Media.MediaManager.GetMediaUrl(linkField.TargetItem); 
```

# php - 警告：“” [function.include]：无法打开流：没有这样的文件或目录？

> ID：13803261
> 
> 赞同：3
> 
> 时间：2012-12-10T14:48:07.843
> 
> 标签：php, mysql

嗨，我正在我的网站上创建一个论坛。我将相关文件存储在我的服务器上：“includes/mod_forum/foum”

我存储在初始目录中的 index.php 页面（在“inlcudes/../..”之前）具有指向与 index.php 相同的本地目录中的文件 forum.php 的链接。

在文件 forum.php 我设置了一个包含函数：“ `<?php include('includes/mod_forum/forum/index.php'); ?>`”

index.php 文件和存储在“includes/mod_forum/forum/”中的名为 post.php 的文件都需要连接到我的 sql 数据库。

设置数据库凭据的文件存储在“includes/_config/connection.php”中。

当我访问直接存储在“includes/mod_forum/forum/”中的 index.php 文件时，它发现 connection.php 文件正常并连接到我的数据库，但是当我访问本地/主目录中的 forum.php（在“inlcudes/”之前../.."）它找不到连接数据库的connection.php文件。

任何想法为什么会这样？

希望我已经解释清楚了。

这是我得到的错误：

```
Warning: include(../../_config/connection.php) [function.include]: failed to open stream: No such file or directory in /Applications/XAMPP/xamppfiles/htdocs/PTB1/includes/mod_forum/forum/index.php on line 252

Warning: include() [function.include]: Failed opening '../../_config/connection.php' for inclusion (include_path='.:/Applications/XAMPP/xamppfiles/lib/php:/Applications/XAMPP/xamppfiles/lib/php/pear') in /Applications/XAMPP/xamppfiles/htdocs/PTB1/includes/mod_forum/forum/index.php on line 252

Warning: include(../../_config/connection.php) [function.include]: failed to open stream: No such file or directory in /Applications/XAMPP/xamppfiles/htdocs/PTB1/includes/mod_forum/forum/posts.php on line 2

Warning: include() [function.include]: Failed opening '../../_config/connection.php' for inclusion (include_path='.:/Applications/XAMPP/xamppfiles/lib/php:/Applications/XAMPP/xamppfiles/lib/php/pear') in /Applications/XAMPP/xamppfiles/htdocs/PTB1/includes/mod_forum/forum/posts.php on line 2

Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in /Applications/XAMPP/xamppfiles/htdocs/PTB1/includes/mod_forum/forum/posts.php on line 122 
```

# git - 有没有办法强制提交者在 Git Bash 中输入他们的用户名

> ID：13803262
> 
> 赞同：1
> 
> 时间：2012-12-10T14:48:14.787
> 
> 标签：git, batch-file, remote-access, githooks, git-bash

我有一个代码库，一些开发人员通过 RDP 工作并使用远程计算机上的 IDE。我想知道是否有办法**强制**他们在提交更改时输入自己的名字。现在 Git 默认使用我的名字，这非常烦人，因为我不是做出更改的人。

此外，当将某些内容推送到 GitHub 时，它确实会要求输入用户名/密码，但我似乎无法在提交列表中找到该用户信息的任何指示。

****编辑******仅供参考****

我的初衷是在每次运行提交命令时强制用户在共享帐户下登录（不可避免）输入他们的`user.name`和凭据。`user.email`为了实现这一点，我尝试使用 Windows 的登录脚本，每次新用户登录时，它基本上都会清除和设置这些值；

```
@echo off
cls

REM * Notify user
echo Clearing Git user information...

REM * Go to Git directory
cd C:\"Program Files (x86)"\Git\bin\

REM * Clear user information
git config --global --remove-section user

REM * Get the user's name
set /p name= Please enter your first name:

REM * Get user email
set /p email= Please enter your email:

REM * Set Git configuration
git config --global user.name "%name%"
git config --global user.email "%email%"
::REM * exit
exit 
```

但是我无法通过它的主要用例 RDP 让它始终如一地工作。

这导致我尝试使用`pre-commit`Git 的钩子，我基本上使用了为 Bash 修改的相同脚本。这也不起作用，因为 Git 在调用钩子之前分配了“作者”。

换句话说，如果用户配置是`name = jim`并且`email = bob@test.com`Git 日志将作者作为`jim<bob@test.com>`，那么*下一次*提交将具有输入的信息。

```
#!/bin/sh
#
exec < /dev/tty

# Notify user
echo "Clearing Git user information..."

# Go to Git directory
#cd c:\"Program Files (x86)"\Git\bin\

# Clear user information
git config --global --remove-section user

# Get the user's name
echo "Please enter your first name: "
read name

# Get user email
echo "Please enter your email: "
read email

echo name: $name email: $email
read -n 1

# Set Git configuration
git config --global user.email $email
git config --global user.name $name
#exit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:09:45.927

您看起来处于肮脏的开发设置中，因此有些肮脏：

制作一个删除 Git 的用户名和电子邮件的登录脚本，开发人员每次连接到机器时都必须输入它。

```
git config --remove-section user 
```

如果未配置，Git 将在第一次运行时询问姓名/电子邮件。

当然，创建 Windows 用户会话并拥有每个用户的 Git 配置会更好:)

# c# - P/从 wlanapi.dll 调用 WlanHostedNetworkQueryStatus

> ID：13803265
> 
> 赞同：3
> 
> 时间：2012-12-10T14:48:23.473
> 
> 标签：c#, c++, visual-studio, pinvoke

我已经映射了 C++ 函数（来自 WLanapi.dll）：

```
 DWORD WINAPI WlanHostedNetworkQueryStatus(
      _In_        HANDLE hClientHandle,
      _Out_       PWLAN_HOSTED_NETWORK_STATUS *ppWlanHostedNetworkStatus,
      _Reserved_  PVOID pvReserved
    ); 
```

到以下 C# 代码：

```
 [DllImport("Wlanapi.dll", SetLastError = true)]
    static extern UInt32 WlanHostedNetworkQueryStatus(
        [In] IntPtr hClientHandle,
        [Out] out _WLAN_HOSTED_NETWORK_STATUS ppWlanHostedNetworkStatus,
        [In, Out] IntPtr pvReserved
        ); 
```

我还映射了所需的所有结构和枚举以及其他内容（例如，获取 clientHandle 指针并启动托管网络）。
_WLAN_HOSTED_NETWORK_STATUS 映射如下：

```
 [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    public struct _WLAN_HOSTED_NETWORK_STATUS
    {
        public _WLAN_HOSTED_NETWORK_STATE HostedNetworkState;
        public Guid IPDeviceID;
        public _DOT11_MAC_ADDRESS wlanHostedNetworkBSSID;
        public _DOT11_PHY_TYPE dot11PhyType;
        public UInt32 ulChannelFrequency;
        public UInt32 dwNumberOfPeers;
        public _WLAN_HOSTED_NETWORK_PEER_STATE[] PeerList;
    } 
```

现在执行该功能时，我不确定如何正确使用 ppWlanHostedNetworkStatus 等。该函数返回 ERROR_SUCCESS (0) 这意味着我已经调用它并正确传递了参数：

```
 _WLAN_HOSTED_NETWORK_STATUS netStatus = new _WLAN_HOSTED_NETWORK_STATUS();

    WlanHostedNetworkQueryStatus(clientHandle, out netStatus, IntPtr.Zero); 
```

但是在查询 ppWlanHostedNetworkStatus 的值（如网络状态或已连接对等点的数量）时，我得到了一些奇怪的长整数（我会说内存地址，但我不确定），例如调用：

```
netStatus.HostedNetworkState.ToString(); 
```

退货

> 11465720

HostedNetworkState 是一个枚举，定义如下：

```
 public enum _WLAN_HOSTED_NETWORK_STATE
    {
        wlan_hosted_network_unavailable,
        wlan_hosted_network_idle,
        wlan_hosted_network_active
    } 
```

所以 .toString() 应该从枚举中返回这些字符串之一，对吧？
我很确定这与指针等有关，因为在 _WLAN_HOSTED_NETWORK_STATUS 的文档（[MS 文档](http://msdn.microsoft.com/en-us/library/dd439493%28v=vs.85%29.aspx)）中说，在调用该函数之前，ppWlanHostedNetworkStatus 应该为 NULL，并且它本身就是指向结构体...

我该如何调试它？我正在用 C#、VS 2012 编写代码...

谢谢你的帮助。

-----编辑-----
我进一步尝试使用 IntPtr 作为参数来映射函数，传递 IntPtr.Zero 和 Marshal.PtrToStruct，但是在尝试这样做时我得到了 AccessViolationException...

```
 [DllImport("Wlanapi.dll", SetLastError = true)]
    static extern UInt32 WlanHostedNetworkQueryStatus(
        [In] IntPtr hClientHandle,
        [Out] out IntPtr ppWlanHostedNetworkStatus,
        [In, Out] IntPtr pvReserved
        ); 
```

进而：

```
 IntPtr ppStatus = IntPtr.Zero;

    WlanHostedNetworkQueryStatus(clientHandle, out ppStatus, IntPtr.Zero);

    _WLAN_HOSTED_NETWORK_STATUS netStatus = (_WLAN_HOSTED_NETWORK_STATUS)Marshal.PtrToStructure(ppStatus, typeof(_WLAN_HOSTED_NETWORK_STATUS)); 
```

------编辑2------

根据 Fermat2357 的建议，我取消了要映射的结构的部分注释，并更改以下内容以计算指向指针的指针：

```
 [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    public struct _WLAN_HOSTED_NETWORK_STATUS
    {
        public _WLAN_HOSTED_NETWORK_STATE HostedNetworkState;
        public Guid IPDeviceID;
        public _DOT11_MAC_ADDRESS wlanHostedNetworkBSSID;
        public _DOT11_PHY_TYPE dot11PhyType;
        public UInt32 ulChannelFrequency;
        public UInt32 dwNumberOfPeers;
        //public _WLAN_HOSTED_NETWORK_PEER_STATE[] PeerList;
    } 
```

我这样称呼它：

```
 IntPtr ppStatus = IntPtr.Zero;
    WlanHostedNetworkQueryStatus(clientHandle, out ppStatus, IntPtr.Zero);
    IntPtr ppStatus2 = new IntPtr(ppStatus.ToInt32());
    _WLAN_HOSTED_NETWORK_STATUS stat = (_WLAN_HOSTED_NETWORK_STATUS)Marshal.PtrToStructure(ppStatus2, typeof(_WLAN_HOSTED_NETWORK_STATUS));
    netStatus = stat.HostedNetworkState.ToString(); 
```

这终于给了我正确的网络状态（启动后处于活动状态）......现在我必须找到一种方法来编组该动态数组......
到目前为止感谢Fermat2357的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:51:52.033

您的映射不正确。看一下 API 函数[WlanHostedNetworkQueryStatus](http://msdn.microsoft.com/en-us/library/windows/desktop/dd439493%28v=vs.85%29.aspx)的定义。

```
DWORD WINAPI WlanHostedNetworkQueryStatus(
  _In_        HANDLE hClientHandle,
  _Out_       PWLAN_HOSTED_NETWORK_STATUS *ppWlanHostedNetworkStatus,
  _Reserved_  PVOID pvReserved
); 
```

请注意，参数`ppWlanHostedNetworkStatus`是指向`WLAN_HOSTED_NETWORK_STATUS`结构指针的指针。深入了解您会发现的函数的文档

> ppWlanHostedNetworkStatus [出]
> 
> 在输入时，此参数必须为 NULL。
> 
> 在输出时，如果对 WlanHostedNetworkQueryStatus 函数的调用成功，则此参数接收指向无线托管网络当前状态的指针。当前状态在 WLAN_HOSTED_NETWORK_STATUS 结构中返回。

如果您提供一个`NULL`指针（如文档中所述），则底层 API 将为您分配一个缓冲区来保存结构并初始化指向该缓冲区的指针。稍后不要忘记通过调用来释放它`WlanFreeMemory`。否则你会在这里发生资源泄漏。

~~但是，该功能的文档似乎不是 100% 完整的。在我的测试（Win7 32Bit）中，如果您将指针初始化为足够大的内存缓冲区，API 将不会为您分配内存。`WlanFreeMemory`在这种情况下，似乎没有必要稍后调用。`WLAN_HOSTED_NETWORK_PEER_STATE`但在这种情况下，很难猜测以下结构需要多少内存。出于这个原因，这似乎无论如何都无法使用。~~

这是我用于测试的 C 代码

```
#include <Wlanapi.h>

int _tmain(int argc, _TCHAR* argv[])
{
    DWORD dwRes;
    HANDLE hHandle;
    DWORD negotiatedVersion;

    dwRes = WlanOpenHandle(1, NULL, &negotiatedVersion, &hHandle);
    if (ERROR_SUCCESS == dwRes)
    {
        PWLAN_HOSTED_NETWORK_STATUS pStatus = NULL;

        dwRes = WlanHostedNetworkQueryStatus(hHandle, &pStatus, NULL);
        if (ERROR_SUCCESS == dwRes)
        {
            if (wlan_hosted_network_unavailable != pStatus->HostedNetworkState)
            {
                // Do something with the result
            }

            WlanFreeMemory(pStatus);
        }
        else
        {
            // handle Error
        }

        WlanCloseHandle(hHandle, NULL);
    }
    else
    {
        // handle Error
    }

    return 0;
} 
```

如果您想让您的示例工作，您需要修改编组结构的方式。

**编辑**

要正确编组，您可以尝试以下操作：

```
...
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct _WLAN_HOSTED_NETWORK_STATUS
{
    public _WLAN_HOSTED_NETWORK_STATE HostedNetworkState;
    public Guid IPDeviceID;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 6)]
    public string wlanHostedNetworkBSSID;
    public _DOT11_PHY_TYPE dot11PhyType;
    public UInt32 ulChannelFrequency;
    public UInt32 dwNumberOfPeers;
    public _WLAN_HOSTED_NETWORK_PEER_STATE PeerList;
}

...

IntPtr ptr = new IntPtr();
uint hostedNetworkQueryStatusSuccess = WlanHostedNetworkQueryStatus(clientHandle, out ptr, IntPtr.Zero);
if (openHandleSuccess == 0)
{
    var netStat = (_WLAN_HOSTED_NETWORK_STATUS)Marshal.PtrToStructure(ptr, typeof(_WLAN_HOSTED_NETWORK_STATUS));
    Console.WriteLine(netStat.HostedNetworkState);

    if (netStat.HostedNetworkState != _WLAN_HOSTED_NETWORK_STATE.wlan_hosted_network_unavailable)
    {
        IntPtr offset = Marshal.OffsetOf(typeof(_WLAN_HOSTED_NETWORK_STATUS), "PeerList");

        for (int i = 0; i < netStat.dwNumberOfPeers; i++)
        {
            var peer = (_WLAN_HOSTED_NETWORK_PEER_STATE)Marshal.PtrToStructure(
            new IntPtr(ptr.ToInt64() + offset.ToInt64()), 
            typeof(_WLAN_HOSTED_NETWORK_PEER_STATE));

            System.Console.WriteLine(peer.PeerMacAddress);

            offset += Marshal.SizeOf(peer);
        }
    }
} 
```

想法：我在这里使用了一个结构，我可以确定它一直都是正确编组的。后来在`dwNumberOfPeers` 成员的知识下（如果它是有效的），我一步一步地得到了所有的内部结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:06:02.983

编辑：要尝试的一件事是我用来帮助调试的技巧 - 用字节数组替换你的结构，然后看看你拉回了什么（好的，在这种情况下是一个 uint 数组）：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct _WLAN_HOSTED_NETWORK_STATUS
{
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType=UnmanagedType.U4, SizeConst = 48)]
    public uint[] scratch;
} 
```

但是，当我在本地运行它时，我得到了非常奇怪的值 - 第一个 (10x4) = 40 字节被清零：

```
0 0 0 0 
0 0 0 0 
0 0 4D454D4C 28 
16DCD870 0 787F6447 80000020 
...omitted... 
```

试试这组 P/Invoke 声明：

（在 LINQPad 中完成，因此相应地替换“转储”方法）

```
void Main()
{
    IntPtr clientHandle;
    int negotiatedVersion;
    if(WlanOpenHandle(2, IntPtr.Zero, out negotiatedVersion, out clientHandle) != 0)
    {
        throw new InvalidOperationException("Could not open handle");
    }
    Console.WriteLine("Negotiated version:{0}", negotiatedVersion);
    IntPtr pNetStatus = IntPtr.Zero;
    if(WlanHostedNetworkQueryStatus(clientHandle, out pNetStatus, IntPtr.Zero) != 0)
    {
        throw new InvalidOperationException("Could not query network status");
    }
    var netStatus = (WLAN_HOSTED_NETWORK_STATUS)Marshal.PtrToStructure(pNetStatus, typeof(WLAN_HOSTED_NETWORK_STATUS));
    Console.WriteLine(netStatus.PeerList[0]);
    WlanFreeMemory(pNetStatus);
    WlanCloseHandle(clientHandle, IntPtr.Zero);
}

[DllImport("Wlanapi.dll", SetLastError = true)]
[return:MarshalAs(UnmanagedType.Bool)]
public static extern bool WlanOpenHandle(
  [In] int dwClientVersion,
  IntPtr pReserved,
  [Out] out int pdwNegotiatedVersion,
  [Out] out IntPtr phClientHandle
);
[DllImport("Wlanapi.dll", SetLastError = true)]
[return:MarshalAs(UnmanagedType.Bool)]
public static extern bool WlanCloseHandle(
  [In] IntPtr hClientHandle,
  IntPtr pReserved
);
[DllImport("Wlanapi.dll", SetLastError = true)]
static extern UInt32 WlanHostedNetworkQueryStatus(
    [In] IntPtr hClientHandle,
    [Out] out IntPtr ppWlanHostedNetworkStatus,
    [In, Out] IntPtr pvReserved
);

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct _WLAN_HOSTED_NETWORK_STATUS
{
    public _WLAN_HOSTED_NETWORK_STATE HostedNetworkState;
    public Guid IPDeviceID;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=6)]
    public string wlanHostedNetworkBSSID;
    public _DOT11_PHY_TYPE dot11PhyType;
    public UInt32 ulChannelFrequency;
    public UInt32 dwNumberOfPeers;
    public IntPtr PeerList;
}
public enum _WLAN_HOSTED_NETWORK_STATE 
{ 
  wlan_hosted_network_unavailable,
  wlan_hosted_network_idle,
  wlan_hosted_network_active
}
public enum _DOT11_PHY_TYPE : uint
{ 
  dot11_phy_type_unknown     = 0,
  dot11_phy_type_any         = 0,
  dot11_phy_type_fhss        = 1,
  dot11_phy_type_dsss        = 2,
  dot11_phy_type_irbaseband  = 3,
  dot11_phy_type_ofdm        = 4,
  dot11_phy_type_hrdsss      = 5,
  dot11_phy_type_erp         = 6,
  dot11_phy_type_ht          = 7,
  dot11_phy_type_IHV_start   = 0x80000000,
  dot11_phy_type_IHV_end     = 0xffffffff
}
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct _WLAN_HOSTED_NETWORK_PEER_STATE 
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=6)]
    public string PeerMacAddress;
    _WLAN_HOSTED_NETWORK_PEER_AUTH_STATE PeerAuthState;
}
public enum _WLAN_HOSTED_NETWORK_PEER_AUTH_STATE 
{ 
  wlan_hosted_network_peer_state_invalid,
  wlan_hosted_network_peer_state_authenticated
} 
```

# iphone - 如何将页面模式从双模式设置为单模式

> ID：13803270
> 
> 赞同：0
> 
> 时间：2012-12-10T14:48:39.843
> 
> 标签：iphone, objective-c, ipad, uipageviewcontroller

我们可以在不改变方向的情况下改变脊椎位置吗？就像对于某些视图，它设置为最大值，对于某些视图，它应该是中间值。是否可以激活此功能。

这是我正在使用的代码，但不知道要在其中修改什么，以便在不改变方向的情况下我可以将脊椎位置设置为最大并设置一页模式而不是两页模式。实际上是在应用程序运行时以两页模式开始的，但后来它需要移动到单页模式，这是不可能的，它给出的错误是您提供一个视图，但需要两个视图。任何人都可以为此指导。

```
-(id)initWithViewControllers:(NSMutableArray *)Controllers
{
self = [super initWithNibName:nil bundle:nil];
if(self)
{
    self.VControllers =  Controllers;

    pageController = [[UIPageViewController alloc]initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation: UIPageViewControllerNavigationOrientationHorizontal options:nil];

    self.pageController.view.frame = CGRectMake(12.0f, 10.0f, 748.0f, 985.0f);
    self.pageController.delegate = self;
    self.pageController.dataSource = self;
    [self.pageController setViewControllers:[NSArray arrayWithObject:[VControllers objectAtIndex:0] ] direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished)
     {
     }];

    [self addChildViewController:self.pageController];
    [self.view addSubview:self.pageController.view];
    check=YES;
}

return self;
}

 - (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
               spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
 if(UIInterfaceOrientationIsPortrait(orientation))

{

 //Set the array with only 1 view controller
    UIViewController *currentViewController = [self.pageController.viewControllers objectAtIndex:0];
    NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];
    [self.pageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    //Important- Set the doubleSided property to NO.
    self.pageController.doubleSided = NO;
    //Return the spine location
    return UIPageViewControllerSpineLocationMax;

 }

else
{
NSArray *viewControllers = nil;

    exampleViewController *currentViewController = [self.pageController.viewControllers objectAtIndex:0];

    NSUInteger currentIndex = [self.VControllers indexOfObject:currentViewController];

    if(currentIndex == 0 || currentIndex %2 == 0)
    {
        UIViewController *nextViewController = [self pageViewController:self.pageController viewControllerAfterViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:currentViewController, nextViewController, nil];
    }
    else
    {
        UIViewController *previousViewController = [self pageViewController:self.pageController viewControllerBeforeViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:previousViewController, currentViewController, nil];
    }
    //Now, set the viewControllers property of UIPageViewController
    [self.pageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    return UIPageViewControllerSpineLocationMid;
}
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
int index = [self.VControllers indexOfObject:viewController];
i=index;
//[self checkViewControllers];
if (index - 1 >= 0)
{
    ind = index;
    return [self.VControllers objectAtIndex:index - 1];
}
return nil;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
int index = [self.VControllers indexOfObject:viewController];
i=index;

if (index + 1 < [self.VControllers count])
{
    ind = index;
    return [self.VControllers objectAtIndex:index + 1];
}

if (ind1 + 1 < [self.VControllers count])
{
    ind = index;
    return [self.VControllers objectAtIndex:index + 1];
}
return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:35:52.387

如果您想在 UIPageViewController 已经初始化后更改脊椎位置，我认为您可能需要使用新的脊椎位置创建一个新的脊椎位置，并用它替换旧的脊椎位置。

我猜当前的实现只考虑在初始化或改变方向时设置脊椎位置。

您可以为 Apple 打开一个错误，以便他们在未来实施。

# cakephp - 避免在 CakePHP 中为每个 AJAX 函数创建视图

> ID：13803277
> 
> 赞同：3
> 
> 时间：2012-12-10T14:49:00.073
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.2, cakephp-2.3

我试图避免为我在控制器上使用的每个 AJAX 函数创建一个视图。（因为我不以任何方式操作结果数据，并且在大多数情况下只是一个布尔值）

我在我的控制器上使用 RequestHandler 组件：

```
var $components = array('RequestHandler'); 
```

我添加了这个`routes.php`

```
Router::parseExtensions('json'); 
```

我正在尝试使此功能起作用，但我得到了一个`null`值：

```
public function test(){
    $this->layout = 'ajax';

    $result = '1';
    $this->set('_serialize', $result);
} 
```

要访问`json`该功能的版本，我使用此 URL 完成`.json`以避免加载任何视图：

```
http://localhost/cakephp/demoController/test.json 
```

我一直在遵循 CakePHP 文档中的步骤：http: [//book.cakephp.org/2.0/en/views/json-and-xml-views.html#json-and-xml-views](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#json-and-xml-views)

我究竟做错了什么？为什么我没有得到预期的结果，而是得到一个`null`？

另外，如果我尝试序列化一些数组，比如这个：

```
$result = array('demo' => '1');
$this->set('_serialize', $result); 
```

我收到此通知：

> **注意**（8）：未定义索引：1 [ **CORE\Cake\View\JsonView.php** , line **89** ]代码上下文`                $data = array();` `                foreach ($serialize as $key) {` `                    $data[$key] = $this->viewVars[$key];`$view = null $layout = null $serialize = array( 'demo' => '1' ) $data = array() $key = '1'JsonView::render() - CORE\Cake\View\JsonView.php，第 89 行 Controller::render() - CORE\Cake\Controller\Controller.php，第 957 行 Dispatcher:: _invoke() - CORE\Cake\Routing\Dispatcher.php，第 193 行 Dispatcher::dispatch() - CORE\Cake\Routing\Dispatcher.php，第 161 行需要 - APP\webroot\index.php，第 92 行 [main] - ROOT\index.php，第 42 行{“1”：null}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:22:13.127

据我了解文档，您必须指定一个视图变量，然后在使用`_serialize`密钥时引用该变量。这意味着您的代码段将如下所示：

```
$result = '1';
$this->set('theResult', $result);
$this->set('_serialize', array('theResult')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-11T20:06:23.543

我没有`.json`URL 中的扩展名和`Router::parseExtensions('json');`我的`routes.php`文件中的行，所以[@dhofstet 的答案](https://stackoverflow.com/questions/13803277/avoid-creating-a-view-for-each-ajax-function-at-cakephp#13804886)对我不起作用。

我的解决方案是添加`renderAs()`调用：

```
public $components = array('RequestHandler');

public function my_ajax_action() {
    // do something
    $result = '1';
    $this->set('result', $result);
    $this->set('_serialize', array('result'));
    $this->RequestHandler->renderAs($this, 'json');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T14:53:50.563

您可以创建一个元素并渲染它。

```
function test() {
    $this->autoRender = false;

    $result = array('demo' => '1');

    $this->set(compact('result'));
    $this->set('_serialize', array('result'));
    $this->render(DS.'Elements'.DS.'element_name');
} 
```

[查看文档](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize-key)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-04-22T05:23:34.157

最简单的方法是这样。对我来说效果很好。

```
public function fun() {
    $this->autoRender = false;
    $this->request->onlyAllow('ajax');

    $result = array('data1' => 'hello', 'data2' => 'world');

    return json_encode($result);
} 
```

# java - 无法构建 nosqlunit-mongodb 项目

> ID：13803281
> 
> 赞同：1
> 
> 时间：2012-12-10T14:49:16.533
> 
> 标签：java, mongodb, nosql

我无法构建 nosqlunit-mongodb 项目。编译项目给了我以下例外。请帮助我理解这个例外是什么以及如何克服它。

刚刚开始使用 nosqlunit 和 mongodb。请耐心等待我的幼稚问题。

```
user@host:nosqlunit-mongodb mvn compile
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building nosqlunit-mongodb 0.7.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: <http s>:/oss.sonatype.org/content/repositories/snapshots/com/lordofthejars/nosqlunit-core/0.7.1-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata com.lordofthejars:nosqlunit-core:0.7.1-SNAPSHOT/maven-metadata.xml from/to sonatype-nexus-snapshots (http s:/oss.sonatype.org/content/repositories/snapshots): java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
[WARNING] Failure to transfer com.lordofthejars:nosqlunit-core:0.7.1-SNAPSHOT/maven-metadata.xml from https:/oss.sonatype.org/content/repositories/snapshots was cached in the local repository, resolution will not be reattempted until the update interval of sonatype-nexus-snapshots has elapsed or updates are forced. Original error: Could not transfer metadata com.lordofthejars:nosqlunit-core:0.7.1-SNAPSHOT/maven-metadata.xml from/to sonatype-nexus-snapshots (https:/oss.sonatype.org/content/repositories/snapshots): java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
Downloading: http s:/oss.sonatype.org/content/repositories/snapshots/com/lordofthejars/nosqlunit-core/0.7.1-SNAPSHOT/nosqlunit-core-0.7.1-SNAPSHOT.pom
Downloading: http s:/oss.sonatype.org/content/repositories/snapshots/com/lordofthejars/nosqlunit-mongodb/0.7.1-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata com.lordofthejars:nosqlunit-mongodb:0.7.1-SNAPSHOT/maven-metadata.xml from/to sonatype-nexus-snapshots (http s:/oss.sonatype.org/content/repositories/snapshots): java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.360s
[INFO] Finished at: Mon Dec 10 06:17:30 PST 2012
[INFO] Final Memory: 140M/698M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project nosqlunit-mongodb: Could not resolve dependencies for project com.lordofthejars:nosqlunit-mongodb:jar:0.7.1-SNAPSHOT: Failed to collect dependencies for [com.lordofthejars:nosqlunit-core:jar:0.7.1-SNAPSHOT (compile), org.mongodb:mongo-java-driver:jar:2.7.3 (compile), com.lordofthejars:nosqlunit-mongodb:jar:0.7.1-SNAPSHOT (compile), jmockmongo:jmockmongo:jar:0.0.2 (compile), junit:junit:jar:4.11 (provided), org.hamcrest:hamcrest-core:jar:1.3 (compile), org.hamcrest:hamcrest-library:jar:1.3 (compile), org.mockito:mockito-all:jar:1.9.0 (test), org.slf4j:slf4j-api:jar:1.6.4 (compile)]: Failed to read artifact descriptor for com.lordofthejars:nosqlunit-core:jar:0.7.1-SNAPSHOT: Could not transfer artifact com.lordofthejars:nosqlunit-core:pom:0.7.1-SNAPSHOT from/to sonatype-nexus-snapshots (https:/oss.sonatype.org/content/repositories/snapshots): java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] htt p: /cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-05T09:16:15.390

您正在尝试仅编译 nosqlunit-mongodb，因此 Maven 尝试从[http://repo.maven.apache.org/maven2检索](http://repo.maven.apache.org/maven2)*com.lordofthejars:nosqlunit-core:jar:0.7.1-SNAPSHOT*但它不存在那里。

在项目根目录中运行**mvn compile以编译所有模块（包括 nosqlunit-core），它应该可以工作。**

# c++ - 二叉树的最大值和最小值

> ID：13803282
> 
> 赞同：0
> 
> 时间：2012-12-10T14:49:19.450
> 
> 标签：c++, binary-tree, binary-search-tree, minimum

我不明白这是怎么回事：

```
Node* BST::Minimum(Node *curr) {

    if (curr->left != NULL) {
        Minimum(curr->left);
    }

    return curr;

} 
```

我的意思是我已经很好地插入了，并且 printpostorder、inorderr、preorder 都很好。

我在做傻事吗？这只是打印根节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:50:39.720

您调用`Minimum`并丢弃它的返回值。你想要`return Minimum(curr->left);`。

顺便说一句，我强烈建议以迭代方式而不是递归方式执行此操作，如下所示：

```
 Node* node = curr;
  while (node->left != NULL)
      node = node->left;
  return node; 
```

# python - 在 Mac OS X 64 位上编译 S-Transform python 包装器

> ID：13803292
> 
> 赞同：2
> 
> 时间：2012-12-10T14:50:03.073
> 
> 标签：python, compilation, 64-bit, wrapper

我正在尝试在我的 Mac 上从[这里](http://kurage.nimh.nih.gov/meglab/Meg/Stockwell)编译一个 s-transform python 包装器（Mountain Lion，从 Macports 安装的 gcc45，通过 Enthought 64 位安装的 Python）。

我是科学用户而不是编译器专家，虽然它在我的 Linux 机器上开箱即用（只是更改为`int`和`npy_intp`），但我真的不知道如何在我的 Macbook 上到达那里......`PyArray_FromDims``PyArray_SimpleNew`

所以我构建了这个 Makefile：

```
PYINCDIR = /Library/Frameworks/EPD64.framework/Versions/Current/include/python2.7
NUMPYDIR = /Library/Frameworks/EPD64.framework/Versions/Current/lib/python2.7/site-packages/numpy/core/include/numpy CFLAGS = -O3 -I$(PYINCDIR) -I$(NUMPYDIR) -fPIC

all: sinemodule.so stmodule.so

sinemodule.so: sinemodule.o     $(CC) -shared -o $@ sinemodule.o

stmodule.so: stmodule.o st.o    $(CC) -shared -o $@ stmodule.o st.o
-lfftw3 
```

并试图“制造”，我得到：

```
cc -shared -o sinemodule.so sinemodule.o
Undefined symbols for architecture x86_64:
"_PyArg_ParseTuple", referenced from:
  _sine_taper_wrap in sinemodule.o
"_PyCObject_AsVoidPtr", referenced from:
  _initsine in sinemodule.o
"_PyCObject_Type", referenced from:
  _initsine in sinemodule.o
"_PyErr_Format", referenced from:
  _initsine in sinemodule.o
"_PyErr_Print", referenced from:
  _initsine in sinemodule.o
"_PyErr_SetString", referenced from:
  _initsine in sinemodule.o
"_PyExc_AttributeError", referenced from:
  _initsine in sinemodule.o
"_PyExc_ImportError", referenced from:
  _initsine in sinemodule.o
"_PyExc_RuntimeError", referenced from:
  _initsine in sinemodule.o
"_PyImport_ImportModule", referenced from:
  _initsine in sinemodule.o
"_PyObject_GetAttrString", referenced from:
  _initsine in sinemodule.o
"_Py_InitModule4_64", referenced from:
  _initsine in sinemodule.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [sinemodule.so] Error 1 
```

也许这是一个非常基本的事情，但老实说，我什至不知道从哪里开始阅读以解决它......

为你的帮助干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T12:27:33.343

我刚刚发现了这个废弃的帖子，并想分享我的解决方案。

首先，正如您所做的那样，您需要找到 python 发行版的 python 和 numpy 包含目录。

在我使用 Anaconda 1.9.1 的情况下，这是

```
PYINCDIR = /Users/dengemann/anaconda/include/python2.7/include
NUMPYDIR = /Users/dengemann/anaconda/lib/python2.7/site-packages/numpy/core/include/numpy/ 
```

其次，您不能直接调用 Makefile，但要确保顶级目录中的 setup.py 是正确的。

在我的情况下，'darwin' 没有被明确支持，所以我添加了它。

```
# linux first
if sys.platform in ['linux2', 'darwin']:
    include_dirs = [os.path.join(NUMPYDIR, r'include/numpy')]
    libraries=['fftw3']
    library_dirs=[] # assume we use default locations 
```

在这些修改运行`python setup.py install`后，工作和输出看起来符合预期。HTH，丹尼斯

# wpf - 在 WPF 中将 TouchMove 事件映射到 MouseMove 事件

> ID：13803293
> 
> 赞同：3
> 
> 时间：2012-12-10T14:50:03.833
> 
> 标签：wpf, mouseevent, touch-event

我正在 WPF 应用程序中实现一个简单的拖放功能。我希望这个应用程序既可以在不支持触控的桌面上运行，也可以在仅支持触控的平板电脑上运行。

目前我有一个 MouseMove 和 TouchMove 处理程序，它们都实现了相同的逻辑（启动 DoDragDrop()）。

如何将输入从触摸路由到鼠标处理程序或反之亦然以减少冗余代码？此外，如何将简单的点击路由到点击事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:59:14.507

我刚刚做了一个快速测试，一种方法是创建一个全局事件处理程序。

由于`TouchEventArgs`和`MouseButtonEventArgs`派生自`InputEventArgs`，您的全局处理程序将只实现`InputEventArgs`

```
 /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        //private void Button_TouchMove(object sender, TouchEventArgs e)
        //{
            // TouchEventArgs derives from InputEventArgs
        //}

        // private void Button_MouseMove(object sender, MouseButtonEventArgs e)
        //{
            // MouseButtonEventArgs derives from InputEventArgs
        //}

        private void GlobalHandler(object sender, InputEventArgs e)
        {
            // This will fire for both TouchEventArgs and MouseButtonEventArgs

            // If you need specific information from the event args you can just cast.
            // e.g. var args = e as MouseButtonEventArgs;
        }

    } 
```

xml:

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid >
        <Button MouseMove="GlobalHandler" TouchMove="GlobalHandler"/>
    </Grid>
</Window> 
```

希望这可以帮助

# c# - 使用 5 点构造函数创建对象并访问列表框

> ID：13803295
> 
> 赞同：0
> 
> 时间：2012-12-10T14:50:04.380
> 
> 标签：c#

我有一个公共类，其中包含我的 5 点构造函数的代码：

```
public LibraryBook( string title, string author, string publisher,
         int year, string number)
    {
    } 
```

构造函数的部分 ex`string title`是该类中的属性，但它们必须具有私有的 set-accessor，以便在创建后无法更新。基本上我不能使用无参数构造函数来创建要使用的空对象。

这就是我的教授对我的要求：

> 相反，您必须首先从表单的文本框中提取所需的所有数据（完成），然后使用这些值构造 LibraryBook 对象（完成）。LibraryBook 类中只有一个构造函数，它要求您将标题、作者、版权年份等作为参数传递。一旦创建了图书，您可以将其添加到表单的图书列表中，并将其标题添加到表单的列表框。

这就是我在表单类中所拥有的，它全部在私有事件处理程序中，不确定它是否应该在一个方法中，所以我可以在另一个事件处理程序中访问它，因为我有一个需要显示详细信息的按钮`ListBox`，和我不知道如何引用它并让它显示。

```
List<LibraryBook> booklist = new List<LibraryBook>();

string titles;
titles = titleTextBox.Text;

LibraryBook book = new LibraryBook(titles, authors, publishers, years, numbers);

booklist.Add(book);

booksListBox.Items.Add(titles); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:57:31.950

在事件处理程序*之外*声明书单，例如

```
 public class Form1
 {
    private List<LibraryBook> booklist = new List<LibraryBook>();

    private void Button_Click(....)
    {
            string titles;
            titles = titleTextBox.Text;

            LibraryBook book = new LibraryBook(titles, authors, publishers, years, numbers);

            booklist.Add(book);

            booksListBox.Items.Add(titles);
    }

  } 
```

现在可以通过 Form1 类中的任何私有方法访问它......

关于你问题的另一部分。就像你的教授说的那样，他想要私人集合访问者，但获取应该是公开的。例如：

```
public LibraryBook( string title, string author, string publisher,
     int year, string number)
{
    public string Title { get; private set; }
} 
```

然后，当您想要列表中第一本书的标题时，您可以这样做：

```
LibraryBook book = booklist[0];
string myTitle = book.Title; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:59:28.927

如果我正确理解了您的问题，您只需将书单存放在 Form 类的私人成员中：

```
public class Form
{
    private List<LibraryBook> _books = new List<LibraryBook>();

    protected void Handle_Form_Submit_whatever()
    {
        var book = new LibraryBook(...); // add all the stuff from the form inputs

        _books.Add(book);

    }

   protected void Some_other_Eventhandler()
   {

       //do stuff with _books
   }

} 
```

# php - 我需要帮助创建 SQL 查询

> ID：13803301
> 
> 赞同：1
> 
> 时间：2012-12-10T14:50:29.247
> 
> 标签：php, mysql, sql

我需要拿出一个看起来像这样的报告：

![在此处输入图像描述](../Images/67f010a0b3f83505ced2c54aef69efbc.png)

有 3 个表格 Agent、Sales 和 Payments。销售和付款通过代理表链接。该报告将显示每个代理每天的总销售额。它还需要每天显示代理已支付的任何款项，这将从总销售余额中扣除，以便我们可以在任何时间点判断代理是否欠业务，反之亦然。

我计划解决这个问题的方法是：

*   获取每个代理每天的所有销售额（一次查询）
*   每天获取每个代理的所有付款（一次查询）
*   对于每个销售、代理和每天检查（代理每天支付每个代理）（循环）
*   如果找到匹配项，则获取值并用于累积总计的计算
*   否则只显示适当的销售数据和累计总数。

我不确定是否有可以让我的生活更轻松的查询。谢谢。

[编辑]

**代理表：** id、name、opening_balance

**销售表：** id、agent_id、amount、customer_id、sale_date

**付款表：** id、agent_id、amount、bank_id、payment_date、status

[第二次编辑]

感谢奥拉夫·迪茨切。没有子选择的第二个查询需要很长时间才能运行。大约 88 秒。我还尝试了第一个子选择，它在一瞬间完成，但是 sum(s.amount) 和 sum(p.amount) 的值是应有的两倍。

![在此处输入图像描述](../Images/8f115dc71cde642146b8d68ae12b129c.png)

[第三次编辑]

一个代理可以进行多次销售，一个代理可以进行多次付款

销售和付款之间没有直接联系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:35:46.997

这是第一个剪辑

```
select a.name, s.sale_date, sum(s.amount), sum(p.amount),
       (select sum(amount)
        from sales
        where agent_id = a.id and sale_date <= s.sale_date) as cum_sales,
       (select sum(amount)
        from payments
        where agent_id = a.id and payment_date <= s.sale_date) as cum_payments
from agents a
join sales s on s.agent_id = a.id
join payments p on p.agent_id = a.id
group by s.agent_id, s.sale_date
order by s.agent_id, s.sale_date 
```

累计余额为`opening_balance - cum_sales + cum_payments`。

[SQL小提琴](http://www.sqlfiddle.com/#!2/87769/15/0)

这是一个没有子选择的选择。这*可能*会更快

```
select a.name, s.sale_date, sum(s.amount), sum(p.amount),
       sum(cs.amount) as cum_sales,
       sum(cp.amount) as cum_payments
from agents a
join sales s on s.agent_id = a.id
join payments p on p.agent_id = a.id
join sales cs on cs.agent_id = a.id and cs.sale_date <= s.sale_date
join payments cp on cp.agent_id = a.id and cp.payment_date <= s.sale_date
group by s.agent_id, s.sale_date
order by s.agent_id, s.sale_date 
```

[SQL小提琴](http://www.sqlfiddle.com/#!2/87769/17/0)

两者都未经测试，因为我没有数据可以这样做。

# html - CSS - a:hover:before - 如何在“悬停区域”中包含此：before 内容？

> ID：13803306
> 
> 赞同：0
> 
> 时间：2012-12-10T14:50:46.583
> 
> 标签：html, css

我不太确定如何表达这个问题，但我正在尝试创建一个链接，因此当您将鼠标悬停时，会在链接前放置一个项目符号。

但是，这不起作用，因为`:before`内容不是悬停区域的一部分，因此当悬停在`:before`链接区域上时，链接会无限振动。

[这个 jsbin](http://jsbin.com/ukowuy/1/)说明了这个问题。

是否有解决此问题的 CSS 解决方案？

# python - PyCuda 和 Eclipse

> ID：13803315
> 
> 赞同：0
> 
> 时间：2012-12-10T14:51:36.877
> 
> 标签：python, eclipse

我已经毫无困难地安装了 PyCuda，但是在将它链接到我的 Eclipse 环境时遇到了麻烦。有谁知道我可以如何链接 pycuda 和 Eclipse IDE？感谢高级

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:51:19.027

您可以使用 NetBeans 6.5 IDE 它提供的 python 支持。

# json - 通过 RestAssured 中的 JsonPath 访问匿名数组的元素

> ID：13803316
> 
> 赞同：32
> 
> 时间：2012-12-10T14:51:39.087
> 
> 标签：json, rest-assured, rest-assured-jsonpath

我有一个从服务返回的 JSON 匿名数组，例如：

```
[
  {"foo":1, "bar":2 , "baz":3 },
  {"foo":3, "bar":4 , "baz":5 }
] 
```

我如何访问`bar`元素，例如

```
expect().body("$[*].bar", hasItems(2,4)) 
```

我尝试了一些我在此处以及 Stefan Gössner 的[JsonPath 页面](http://goessner.net/articles/JsonPath/)上找到的可能性，但无论我尝试什么，我都会遇到异常。我的问题似乎直接来自尝试访问该项目列表。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-11T12:12:00.403

鉴于您有：

```
[
  {"foo":1, "bar":2 , "baz":3 },
  {"foo":3, "bar":4 , "baz":5 }
] 
```

您可以在 Rest Assured 中执行以下操作：

```
then().body("bar",hasItems(2,4)) 
```

或者

```
expect().body("bar",hasItems(2,4)) 
```

如果您使用的是旧版 API。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-11-01T21:27:17.637

约翰的回答是正确的，只是为了完整起见：另一种检查“酒吧”元素的方法是

```
expect().
    body("[0].bar", equalTo(2)).
    body("[1].bar", equalTo(4)); 
```

# couchdb - CouchDB：自定义错误页面

> ID：13803318
> 
> 赞同：1
> 
> 时间：2012-12-10T14:51:48.417
> 
> 标签：couchdb, couchapp

有没有办法在 CouchDB 中自定义错误页面，尤其是在 couchapp 中？

当我尝试使用未定义/拼写错误的视图加载 URL 时

```
http://localhost:5984/database/_design/app/_view/sample 
```

CouchDB 1.2 只是关闭连接：

> 错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而不发送任何数据。

我想自定义这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:20:40.260

在这里找到了部分答案：[http ://wiki.apache.org/couchdb/Advanced_Shows_and_Lists_Throwing_Redirects](http://wiki.apache.org/couchdb/Advanced_Shows_and_Lists_Throwing_Redirects)

# php - 取回一个非数组

> ID：13803322
> 
> 赞同：0
> 
> 时间：2012-12-10T14:52:07.703
> 
> 标签：php, arrays

当谈到 php 中的数组时，我似乎有心理问题。我不知道为什么，我的数组看起来像这样：

```
 $elementOptions = array(
       array(
          'type' => 'Text',
          'name' => 'test' ,
          'isRequired' => true,
          'attributes' => array(
          'placeholder' => 'content'  
      ),

      'subFormName' => 'content'
  ); 
```

我有一个 for each 循环：

```
foreach ($options as $key => $value) {
    if (is_array($value)) {
        //do something else
    } else {
        //do something                 
    }        
} 
```

问题是，如果我在 if(isarray()){} 中进行 var 转储，我会得到以下信息：

```
array(1) {
  ["placeholder"]=>
  string(7) "content"
}

array(4) {
  ["type"]=>
  string(4) "Text"
  ["name"]=>
  string(4) "test"
  ["isRequired"]=>
  bool(true)
  ["attributes"]=>
  array(1) {
    ["placeholder"]=>
    string(7) "content"
  }
} 
```

现在的问题是 - 我不希望该 var 转储中包含以下内容：

```
array(1) {
  ["placeholder"]=>
  string(7) "content"
} 
```

我不确定，基于上面的“数据结构”，这个“占位符”=>“内容”如何被视为一个数组......在任何一种情况下，我都不希望它作为 var 转储的数组的一部分.... 它应该只是该 var 转储中返回的第二个数组。

这就是你们进来的地方，为什么占位符不应该作为一个数组回来（TMK - 据我所知）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:08:53.567

"placeholder"=>"content" 不被视为数组或作为数组返回，它是数组中的一对，您称为“属性”

```
array(4) {
  ["type"]=>
  string(4) "Text"
  ["name"]=>
  string(4) "test"
  ["isRequired"]=>
  bool(true)

  ["attributes"]=> // this is your array
  array(1) {       // contents of this array are...
    ["placeholder"]=>   // this is a key
    string(7) "content" // this is a variable
  }                // array ends
} 
```

# java - 一个集合中不同类型对象的其他选项

> ID：13803325
> 
> 赞同：2
> 
> 时间：2012-12-10T14:52:23.560
> 
> 标签：java, oop

我意识到将不同类型的对象放入一个集合中通常是一个坏主意，我可以通过将类型设置为“对象”来做到这一点，但我有一种情况我想不出替代方案，并且是希望别人可以。

情况：在游戏的一回合结束时，我希望玩家有效地从牌库中捡起一张牌。该卡将是三种类型的卡之一。通常这张牌会进入玩家的手中并允许玩家执行标准动作，但我希望玩家有机会获得一张特殊的牌，其动作特定于该牌，并且有机会玩家得到一张立即采取行动而不是进入玩家手中的牌。这些类型的卡片没有任何共同点，所以有一个通用的界面似乎没有意义，但我希望它们在牌组中随机混合，所以我想把它们都放在一个集合中。

有没有人有任何设计建议？（我对 OO 设计比较陌生）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:59:33.700

您使用界面的想法是正确的。但是，您不需要让“特殊操作卡”实现`Card`接口：为它创建一个不同的接口（例如`Deckable`），让`Card`接口继承它，然后在您的“特殊操作卡”类中实现该接口。

```
interface Deckable {
    void takeAction();
}
interface Card extends Deckable {
    int getRank();
    int getSuit();
}
class PlayingCard implements Card {
    ...
}
class SpecialActionCard implements Deckable {
    ...
} 
```

现在您可以创建一个列表`Deckable`，并将您的特殊卡片混合到其中：

```
List<Deckable> deck = new ArrayList<Deckable>(); 
```

# sql-server - 在 SQL Server 中的 guid 类型列上使用非聚集索引

> ID：13803326
> 
> 赞同：19
> 
> 时间：2012-12-10T14:52:23.173
> 
> 标签：sql-server, tsql, optimization, indexing, foreign-keys

我想优化我的团队用于应用程序的数据库的性能。

我一直在寻找添加外键的区域，然后索引这些列以提高连接的性能。但是，我们的许多表都连接在一个`GUID`类型的 id 上，该类型是在插入项目时生成的，并且在其他表中与该项目关联的数据通常具有`item_id`包含 GUID 的列。

我已经读过将聚集索引添加到 GUID 类型列是一个非常糟糕的决定，因为索引需要不断重建才能有效。但是，我想知道，在上述场景中使用非聚集索引是否有任何损害？或者假设它会有助于提高性能是否合理？如果需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-10T15:45:14.183

到目前为止，a 上的索引`<anytype>`是改进连接和单例查找的最佳选择。缺少此索引，查询将始终必须端到端扫描整个表，而（通常）性能结果很糟糕，并发性会被淘汰。

由于您提到的原因，确实`uniqueidentifier`对索引做出了糟糕的选择，但这绝不意味着您不应该*创建*这些索引。如果可能，建议将数据类型更改为 INT 或 BIGINT。使用[`NEWSEQUENTIALID()`](http://msdn.microsoft.com/en-us/library/ms189786.aspx)或[`UuidCreateSequential`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379322%28v=vs.85%29.aspx)生成它们将有助于解决碎片问题。如果所有替代方案都失败了，您可能需要比其他索引更频繁地执行索引维护（重建、重组）操作。**但绝不是这些缺点中的任何一个都超过了首先拥有索引的好处！**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T15:25:12.510

两种表现：
-插入
-选择

索引应该改进选择

索引会减慢插入速度。
如果插入是有序的，则索引不会分段。
如果插入不按顺序排列，则索引将分片。
索引碎片会减慢插入和选择的速度。
通过维护可以对索引进行碎片整理。

向引用 FK 的列添加非聚集索引将有助于连接。
由于该列很可能没有排序，因此它是一个 GUID 是没有损失的。

在 FK 表本身上，GUID 不适合 PK（聚集索引）。
使用 GUID 作为 PK，在插入时索引片段。
整数或顺序 ID 是更好的候选者，因为它们不会在插入时分割 PK。
但没什么大不了的，只是对这些表进行碎片整理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-24T10:47:43.053

是的，最好将 Guid 索引从集群更改为非集群。Guid 仍然可以是主键，您无需更改查询/源代码。无需重新排序数据并提高性能。

在 SQL Azure 等数据库中，必须有一个聚集索引。所以你可以使用日期/日期时间字段。创建额外的 int-identity/autoincrement 列是不必要的，因为一个团队中的一些开发人员倾向于使用这些和其他 GUID。导致应用不一致。所以只保留 GUID .. 句号！

谈到顺序 Guid，我认为从代码创建 Guid 比从数据库创建 Guid 更好。现代 DAL 和存储库模式不喜欢依赖 DB for CRUD。例如场景：linq 查询和具有单元测试的自动构建，不依赖数据库。并且我们自己创建一个顺序引导不是一个好主意（至少对我来说）。所以 Guid 作为具有非聚集索引的主键是最好的选择。

I have backing from Microsoft on the non-clustered subject [http://blogs.msdn.com/b/sqlazure/archive/2010/05/05/10007304.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/05/05/10007304.aspx)

Edited: Backing is gone ("No Resource Found")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T15:01:07.677

它通常会帮助性能。但是您可能希望创建填充因子小于 100% 的索引，这样不可避免的页面拆分就不必经常发生。对索引进行定期维护肯定是一个加分项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T15:00:54.307

是的，非聚集索引非常适合您的情况。底层是B-tree，和聚簇索引一样，但是表上的底层数据没有排序，所以不存在GUID非顺序性的问题。NC 索引与表分开存在。

但请注意不要添加太多非聚集索引。仅在需要的地方进行优化。运行分析器以查看哪些查询需要很长时间，并仅优化那些。此外，请确保将填充因子设置为 <50% 的值，除非数据库很少获得任何更新，或者空间是一个约束。

相关 MSDN： http: [//msdn.microsoft.com/en-us/library/ms177484 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177484(v=sql.105).aspx)

# javascript - 使用 ajax javascript 将内容加载到网页中的 div 中

> ID：13803327
> 
> 赞同：0
> 
> 时间：2012-12-10T14:52:27.703
> 
> 标签：javascript, ajax

我在`javascript-ajax`这里使用有点问题。在我的页面中`content`，每当用户单击具有 class 的链接时，我以 ajax 方式`myajaxreq`将内容加载到具有 id 的 div 中，并且内容以淡入方式加载到 div 中。我正在使用的 javascript 是这个

```
$(document).ready(function(){
    $("#content").load($('.myajaxreq:first').attr('href'));
});

$('.myajaxreq').click(function() {
    var myhref=$(this).attr('href');
    $('#content').hide().load(myhref).fadeIn('slow');

    return false;
}); 
```

* * *

一切都很好`localhost`，但是当我把它放到网上然后当我们点击这些链接时，然后：首先，最初在 div 中的相同内容以淡入淡出的方式加载。几秒钟后，新内容被加载。

我想我错过了某种

```
if(content document is ready)
     then load in a fade in manner
         and so on.. 
```

请有人在这里帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:54:38.657

成功回调后调用淡入...试试这个

```
var jContent = $('#content').hide();
jContent.load(
        myhref,
        {},
        function(){
            jContent.fadeIn('slow');
        }
    ); 
```

这里是整个代码（未经测试）

```
$(document).ready(function(){
    var jContent = $("#content").load($('.myajaxreq:first').attr('href'));

    $('.myajaxreq').click(function() {
        var myhref=$(this).attr('href');
        jContent
          .hide()
          .load(
            myhref,
            {},
            function(){
                jContent.fadeIn('slow');
            }
        );

        return false;
    }); 
}); 
```

# c# - TimeSpan 自定义格式抛出异常？

> ID：13803328
> 
> 赞同：2
> 
> 时间：2012-12-10T14:52:32.150
> 
> 标签：c#, .net, string-formatting

我知道它显然失败了，因为我在这里遗漏了一些东西，但我无法弄清楚这行代码有什么问题：

```
this.Duration.ToString("{0:%m} minutes {0:%s} seconds") 
```

这是抛出一个`FormatException`.

希望有人能指出我正确的方向！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:59:36.197

您需要在不是格式字符的所有内容周围使用单引号：

```
Duration.ToString("mm' minutes 'ss' seconds'"); 
```

您可以将非格式字符括在单引号中，也可以使用反斜杠转义每个字符。有关更多信息，请参阅“其他角色”标题下的[此处。](http://msdn.microsoft.com/en-us/library/ee372287.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:59:43.417

如果要使用`ToString`，则不必传递要格式化的值的索引（此处`%s`而不是`{0:%s}`）

我建议在`string.Format`这里使用。（**带**索引`{0: [...] }`）

```
string.Format("{0:%m} minutes {0:%s} seconds",this.Duration); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:54:28.887

请用，

```
string.Format("{0:%m} minutes {0:%s} seconds", this.Duration) 
```

而不是 ToString("...")

# ios - 测试 iOS Box OneCloud AppToApp 应用程序

> ID：13803329
> 
> 赞同：1
> 
> 时间：2012-12-10T14:52:41.447
> 
> 标签：ios, box-api

我想将 Box OneCloud AppToApp 框架集成到我的应用程序中。集成似乎很容易，但我看不到任何使用 OneCloud 应用程序测试应用程序的方法。

目前，我的应用程序出现在 Box 应用程序的“打开方式...”菜单中（因为它注册了适当的 mime 类型关联），但 BoxAppToAppAPIInfo 信息表明这不是 BoxAppToAppRequest。

有人对我们如何进行测试有任何指示吗？

# php - 字符串已经转义时出现MySql错误？

> ID：13803336
> 
> 赞同：0
> 
> 时间：2012-12-10T14:52:57.657
> 
> 标签：php, mysql

为什么这个：

```
$query = "SET NAMES 'utf8'";
$query = str_replace("'", "\'", $query);
$pdo->query($query); 
```

会引起问题吗？

我目前收到此错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\'utf8\'' 
```

如果我不逃避它，一切都很好，但是问题存在于进一步的查询中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:55:33.007

您尝试运行的 sql 是完全安全的，它不包含用户输入，因此可以在不转义的情况下运行。

此外，您实际上是在转义字符串的分隔符，而不是字符串本身的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:57:09.220

您不必转义查询中的每个单引号，有些是有效的，例如：

```
UPDATE table SET field='blah' WHERE id=10 
```

其中字段将是 varchar 或类似的。如果引号需要成为字段值的一部分，您可以转义引号，例如：

```
UPDATE table SET field='This \'value\' uses quotes.' WHERE id=10 
```

希望这是有道理的。

# html - 一个DIV内多幅图像的垂直居中

> ID：13803337
> 
> 赞同：0
> 
> 时间：2012-12-10T14:53:01.300
> 
> 标签：html, css

我有一个固定高度的简单 DIV 和几个内部具有单独高度的图像（它们的高度等于或小于外部 DIV 的高度）：

```
<div>
  <img src="..">
  <img src="..">
  ...
</div> 
```

此标记保持原样，无法更改。我需要并排显示所有图像，并且所有图像都应与 DIV 的中间垂直对齐（因此每个图像的顶部和底部填充相同）。

如何在不更改标记的情况下做到这一点？各种答案都处理图像被放置在 DIV 中的标记，这里不是这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:08:14.707

重新阅读您的问题后，`<div>`至少与最高图像一样高，只需执行以下操作：

**CSS**

```
img {
    vertical-align: middle;
}​ 
```

在这里试试：http: [//jsfiddle.net/AsD9q/](http://jsfiddle.net/AsD9q/)

您还可以通过设置显式`width`或`white-space: nowrap;`在容器上使用来防止 div 中断（当视口很小时）：http: [//jsfiddle.net/MvDZJ/](http://jsfiddle.net/MvDZJ/)（使用宽度）或[http://jsfiddle.net/xMtBp /](http://jsfiddle.net/xMtBp/)（使用空格）

结果是这样的：

![在此处输入图像描述](../Images/70585034262cd0fcb1ec8e9c45dcd06b.png)

**第一个答案，适用于 div 的每个高度：**

正如您对容器本身一无所知，我认为它不比视口宽。比你可以简单地做这样的事情：

**HTML**

```
<div>
    <img src="http://lorempixel.com/200/100/">
    <img src="http://lorempixel.com/200/80/">
    <img src="http://lorempixel.com/200/120/">
    <img src="http://lorempixel.com/200/60/">
</div>​ 
```

**CSS**

```
​div {
    display: table-cell;
    vertical-align: middle;
    /* only added for demonstration */
    height: 200px;
    border: 1px solid red;
}
img {
    vertical-align: middle;
} 
```

这在 IE7 中不起作用，因为它无法处理`display: table-cell`. 你可以在这里试试：http: [//jsfiddle.net/3vXXy/](http://jsfiddle.net/3vXXy/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:29:32.310

这可以用 jQuery 完成，问题是你没有明确的选择器可以使用，所以它会影响页面上每个 div 中的每个图像。

首先，您需要在 CSS 中将图像设置为 div 的顶部，如下所示：

```
 div img{vertical-align:top;} 
```

然后连续拍摄每个图像，获取它的高度并将其顶部填充设置为 div 高度与图像高度之间差异的一半。

```
​$(document).ready(function(){
$("img").each(function(){
var margin= ($(this).parent().height() - $(this).height())/2;
    $(this).css('margin-top',margin);
});        
});​ 
```

同样，如果没有良好的可靠选择器，这不是一个理想的解决方案，但它确实有效。[http://jsfiddle.net/calder12/H4Wkw/](http://jsfiddle.net/calder12/H4Wkw/)

# internet-explorer-9 - IViewObjectPresentSite::CreateSurfacePresenter 在 WebBrowser 控件中失败

> ID：13803342
> 
> 赞同：0
> 
> 时间：2012-12-10T14:53:21.330
> 
> 标签：internet-explorer-9, activex, webbrowser-control, mshtml, hardware-acceleration

我的 ActiveX 控件调用 IE9 的[CreateSurfacePresenter](http://msdn.microsoft.com/en-us/library/ff975131%28v=VS.85%29.aspx)来获得[ISurfacePresenter](http://msdn.microsoft.com/en-us/library/ff975137%28v=vs.85%29.aspx)接口。
我用它渲染到 IE9（或更高版本）浏览器暴露的 d3d 表面，
从而实现硬件加速的叠加混合。

一些代码：

```
CComQIPtr<IViewObjectPresentNotifySite, &IID_IViewObjectPresentNotifySite> m_spIViewObjectPresentSite;
ISurfacePresenter* m_spISurfacePresenter;

HRESULT hr = m_serviceProvider->QueryInterface(IID_IViewObjectPresentSite, (void **) &m_spIViewObjectPresentSite);
if(FAILED(hr))
  return -1;

// ... later...
m_numBuffers=1; // or 2 doesn't matter
hr = m_spIViewObjectPresentSite->CreateSurfacePresenter(
    m_partialScreenD3dDevice, window_width, window_height, m_numBuffers, DXGI_FORMAT_B8G8R8A8_UNORM, VIEW_OBJECT_ALPHA_MODE_IGNORE, &m_spISurfacePresenter);
// !!! this call works for activeX plugin hosted in IE9 browser, but fails (Invalid Argument)
// when hosted in a hosted IE webBrowser control (same html) 
```

这适用于 IE9 浏览器。
但我需要它在嵌入式 IE ActiveX 控件中工作：
我将 IE9 [WebBrowser 控件](http://msdn.microsoft.com/en-us/library/aa752040%28v=vs.85%29.aspx)嵌入到 Windows 窗体或其他浏览器中，
并将 wb 控件导航到嵌入我的 ActiveX 控件的 html 页面。
但在这种情况下，对 CreateSurfacePresenter 的调用失败，并出现 Invalid Argument 错误。

为什么IE控件无法返回ISurfacePresenter？

注意：
1) IE WebBrowser 控件是一个有窗口的插件，而我的 ActiveX 是无窗口的。
2) 我验证了嵌入式 WebBrowser[在 IE9 模式下加载](http://wiki.imacros.net/IE9_Nags#What_IE_compatibility_mode_does_the_webbrowser_control_use.3F)（我从 JS 中读取了 UserAgent）
3) 我使用 direct3d9ex 进行渲染

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:37:45.530

不幸的是，我没有找到原始问题的答案。
恐怕无法在嵌入式IE浏览器控件中使用这个界面。
但我发现在 Mozilla Gecko 中有一个类似的接口，称为 NPAPI [AsyncDrawing](https://wiki.mozilla.org/NPAPI%3aAsyncDrawing)
，它公开了一个可以绘制的 D3D10 表面，并且它可以在[嵌入式 Gecko](https://developer.mozilla.org/en-US/docs/Gecko/Embedding_Mozilla/FAQ/Embedding_Gecko)中工作。

# java - 在单个类中集中查找 Tomcat 7 jdni 中的资源

> ID：13803352
> 
> 赞同：1
> 
> 时间：2012-12-10T14:53:58.630
> 
> 标签：java, tomcat7, jndi, connection-pooling

我正在使用 NetBeans 和 Tomcat 7 创建一个 Web 应用程序，并且我想创建我的第一个连接池。我在这里遵循了tomcat文档中的所有步骤：http: [//tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)

但是在我的应用程序中，我将有许多 DAO 对象，每个对象都有许多不同的方法，所以我想避免编写代码来查找数据源并在每个访问数据库的方法中获取连接，所以我我们创建了一个类来集中该操作并返回到不同 DAO 对象的连接。

你可以看到下面的代码，但正如我所说，这是我第一次使用这个，所以我不确定......这对你有意义吗？有没有更好的方法来做这样的事情？还是最好在每种方法中编写此代码？

如果这确实有意义，我可以使用 Context 甚至 DataSource 作为静态属性来避免连续查找吗？

非常感谢！

我的 ConnectionPool 类：

```
package dao.mysql;

import java.sql.Connection;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import org.apache.tomcat.jdbc.pool.DataSource;

public class ConnectionPool {

    public static Connection getConnection() {
        Connection connection = null;
        try {            
            Context initCtx = new InitialContext();
            Context envCtx = (Context) initCtx.lookup("java:comp/env");
            DataSource ds = (DataSource)envCtx.lookup("jdbc/EmployeeDB");

            connection = ds.getConnection();

        } catch (SQLException ex) {
            Logger.getLogger(ConnectionPool.class.getName()).log(Level.SEVERE, null, ex);
        } catch (NamingException ex) {
            Logger.getLogger(ConnectionPool.class.getName()).log(Level.SEVERE, null, ex);
        }
        return connection;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:10:32.173

您可以将 JDBC 连接池用作[本文所述的单例 bean。](http://kahimyang.info/kauswagan/howto_blogs/1017-using_tomcat_jdbc_connection_pool_as_standalone_instantiated_bean)

# c# - 如何在不锁定的情况下打开 Excel 文件？

> ID：13803353
> 
> 赞同：3
> 
> 时间：2012-12-10T14:53:59.340
> 
> 标签：c#, excel, interop

我有一个构建 Excel 报告的过程，然后为用户打开它。问题是如果有人让文件保持打开状态，它会保持锁定状态，在第一个人退出 Excel 文件之前，没有其他人可以构建报告。

有没有办法打开一个 Excel 文件而不锁定它，使用任何一个`Process.Start`或 Microsoft 的`Interop.Excel`库？

每次运行报告时，我都会使用 Interop 库构建文件，并将其作为静态文件名保存在运行此应用程序的共享网络文件夹中

```
using Excel = Microsoft.Office.Interop.Excel;

...

xlsBook.SaveAs(newFileName, Excel.XlFileFormat.xlWorkbookNormal); 
```

并使用打开文件`Process.Start`

```
Process.Start(newFileName); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T15:22:52.350

您可以尝试以只读模式打开文件：

```
var app = new Microsoft.Office.Interop.Excel.Application();
var workbook = app.Workbooks.Open(filename, ReadOnly: true); 
```

或者您可以尝试将其保存为共享模式：

```
workbook.SaveAs(filename, AccessMode: XlSaveAsAccessMode.xlShared); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:56:26.147

如果最终用户只需读取文件而不是修改它，您可以创建一个卷影副本，然后打开该副本。

只需将原始文件复制到一个临时位置并从那里打开它。原始文件保持不变，因此可以被其他人打开。

# java - 节俭的 Kerberos？

> ID：13803354
> 
> 赞同：8
> 
> 时间：2012-12-10T14:54:05.037
> 
> 标签：java, kerberos, thrift, gssapi

我有一个简单的基于 Thrift 的 java 应用程序。它真的非常简单，只不过是在 java 中使用 Thrift 进行“Hello World”消息传输。有人告诉我，我需要在我的消息中添加 Kerberos 支持。我做了一些谷歌搜索，很惊讶 Thrift 还没有某种形式的 Kerberos 支持（或者如果有，我找不到它）。我考虑过使用 GSSAPI 编写自己的包装器，但我无法包装/解开我的 Thrift 消息，因为这会破坏 Thrift 消息格式。

有没有人曾经使用 Kerberized Thrift？.. 或者知道它会怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T12:30:25.793

**所以，我想有一种方法可以通过 SASL/GSS API 来做到这一点。这让我很困惑，为什么我在互联网上的任何地方都看不到任何很好的例子。但是，我发布了一个我创建的示例，希望它对其他人有所帮助......或者有人可以纠正我在这里做一些有用的事情的错觉。

示例服务器代码：

```
TServerSocket serverTransport = new TServerSocket(7911);  // new server on port 7911
HelloWorldService.Processor<Iface> processor = new HelloWorldService.Processer<Iface>(new ThriftServerImpl());  // This is my thrift implementation for my server
Map<String, String> saslProperties = new HashMap<String, String>();  // need a map for properties
saslProperties.put(Sasl.QOP, "true");
saslProperties.put(Sasl.QOP, "auth-conf");  // authorization and confidentiality

TSaslServerTransport.Factory saslTransportFactory = new TSaslServerTransport.Factory();     // Creating the server definition
saslTransportFactory.addServerDefinition(
            "GSSAPI",       //  tell SASL to use GSSAPI, which supports Kerberos
            "myserviceprincipal",   //  base kerberos principal name - myprincipal/my.server.com@MY.REALM 
            "my.server.com",    //  kerberos principal server - myprincipal/my.server.com@MY.REALM
            saslProps,      //  Properties set, above
            new SaslRpcServer.SaslGssCallbackHandler()));  //  I don't know what this really does... but I stole it from Hadoop and it works.. so there.

Tserver server = new TThreadPoolServer(newTThreadPoolSErver.Args(serverTransport).transportFactory(saslTrasnportFactory).processor(processor));

server.serve();   // Thrift server start 
```

示例客户端代码

```
TTransport transport = new TSocket("my.server.com", 7911);   // client to connect to server and port
saslProperties.put(Sasl.QOP, "true");
saslProperties.put(Sasl.QOP, "auth-conf");  // authorization and confidentiality

TTransport saslTransport = new TSaslTransport(
            "GSSAPI",       //  tell SASL to use GSSAPI, which supports Kerberos
            null,           //  authorizationid - null
            "myserviceprincipal",   //  base kerberos principal name - myprincipal/my.client.com@MY.REALM 
            "my.server.com",    //  kerberos principal server - myprincipal/my.server.com@MY.REALM
            saslProps,      //  Properties set, above
            null,           //  callback handler - null
            transport);     //  underlying transport

TProtocol protocol = new TBinaryProtocol(saslTransport);    // set up our new Thrift protocol

HelloWorldService.Client client = new HelloWorldService.Client(protocol);   // Setup our thrift client
saslTransport.open();

String response = client.hello("Hi There");   // send message

System.out.println("response = " + response);

transport.close(); 
```

其他注意事项：

* 我在客户端和服务器上都设置了几个 java 属性。
- java.security.krb5.realm = MY.REALM // 领域名称
- java.security.krb5.kdc = my.kdc.com // kdc 服务器
- javax.security.auth.useSubjectCredsOnly = false // 允许 JAAS 获取TGT。
- java.security.auth.login.config = /etc/myapp/conf/jaas.conf - 需要的 jaas 文件
- sun.security.krb5.debug = true // 帮助诊断问题。
* 上面指定的 jaas.conf 文件需要有两个条目（每个服务器可能只有一个......）。我不记得我是从哪里收集到这些信息的……但这是我的文件：

```
com.sun.security.jgss.initiate {
    com.sun.security.auth.module.Krb5LoginModule required
    useKeyTab=true
    keyTab="/etc/myapp/conf/myapp.keytab"
    useTicketCache=true
    principal="myuserprincipal"
    debug=true;
};

com.sun.security.jgss.accept {
    com.sun.security.auth.module.Krb5LoginModule required
    useKeyTab=true
    keyTab="/etc/myapp/conf/myapp.keytab"
    useTicketCache=false
    principal="myserviceprincipal/my.server.com"
    debug=true;
}; 
```

（回到考虑....）
* 尽管 Sasl.QOP 为“auth-conf”.. 传输的第一个（？）消息未加密。也许这只是握手之类的。其余消息似乎已加密，但第一个消息向控制台打印了一条丑陋的消息“对等方未执行加密”。最好不要收到该消息，因为它会在未来引起悲伤（无论是否有根据）。

无论如何，我希望这对某人有所帮助......或者可以引发一些对我有帮助的改进。:) 很难相信我花了 2-3 天的时间来做这件事，而且只产生了少量的代码，但是当我开始的时候，我对 Kerberos 和 Thrift 都不是很了解。

谢谢阅读。

# php - 在 Mysql 表中插入值

> ID：13803359
> 
> 赞同：-2
> 
> 时间：2012-12-10T14:54:28.920
> 
> 标签：php, html, mysql, sql

我正在尝试使用 php 将值插入到 mysql 表中。但我无法使用 php 代码插入值。我附上了我的表结构和 mysql 查询。谁能帮我解决这个问题。

![在此处输入图像描述](../Images/72cfc98206be5426c1025ac41cd0500d.png)

**PHP 代码**

```
<body>
<?php 
$lahipita=$_POST['pso'];
$hitAd=$_POST['pso1'];
$silumina=$_POST['ph'];
$sunday_observer=$_POST['pl'];
$virakesari=$_POST['p3'];
$thinakaran=$_POST['p4'];
$hitAd_bl=$_POST['ph3'];
$hitAd_bs=$_POST['ph2'];
$sunday_observer_bl=$_POST['p5'];
$sunday_observer_bs=$_POST['p6'];
$words=$_POST['words'];
$payment_method=$_POST['type'];

$total=0;
if($lahipita!=""){
    $total=$total+900;
}
if($hitAd!=""){
    $total=$toal+300;
}
if($silumina!=""){

    $total=$total+500;
}
if($sunday_observer!=""){
    $total=$total+300;
}
if($thinakaran!=""){

    $total=$total+200;

}
if($virakesari!=""){
    $total=$total+600;
}
if($hitAd_bl!=""){

    $total=$total+2750;

}
if($hitAd_bs!=""){
    $total=$total+1650;
}
if($sunday_observer_bl!=""){

    $total=$total+2000;
}
if($sunday_observer_bs!=""){

    $total=$total+1000;
}

$result=iud("INSERT INTO  wp_paperAds(DEFAULT,'$lahipita','$hitAd','$silumina','$sunday_observer','$virakesari','$thinakaran','$hitAd_bl','$hitAd_bs','$sunday_observer_bl','$sunday_observer_bs','$words','','$payment_method','$total')");

?> 
```

**错误**

```
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DEFAULT,'','','','','selected','','','','','','dfdfdfd','','Array','600')' at line 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:57:15.953

语法错误是缺少 VALUES 关键字：

```
INSERT INTO wp_paperAds VALUES (DEFAULT,...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:57:19.883

插入 wo_paperAds (column1, column2, column3) 值 (value1, value2, value3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:57:10.493

您要回显的值之一是数组。您需要回显数组项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:58:37.090

您的查询中似乎缺少`VALUES`您 ( `INSERT INTO t1 VALUES ...`)。

您始终可以像这样调试您的查询：

```
$sql = "INSERT INTO  wp_paperAds(DEFAULT,'$lahipita','$hitAd','$silumina','$sunday_observer','$virakesari','$thinakaran','$hitAd_bl','$hitAd_bs','$sunday_observer_bl','$sunday_observer_bs','$words','','$payment_method','$total')";

echo $sql; 
```

您还需要养成使用列列表的习惯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T15:02:43.570

您缺少 VALUES 关键字。尝试指定要插入数据的表行，这样您甚至不必指定 DEFAULT。像这样：

```
 $q = "INSERT INTO table (field1,field2) VALUES ('value1', 'value2')";
 $run = mysql_query($q); 
```

我总是指定表行，因为这样我就不必在查询中获得正确的顺序，也不必担心指定默认值。但另一方面，您不应该将数组插入数据库。另外，我会在表名之后和第一个之前放置一个空格（在查询中，它看起来更好。:)

希望有帮助。

# php - 固定成本地图库或服务？

> ID：13803364
> 
> 赞同：3
> 
> 时间：2012-12-10T14:54:39.253
> 
> 标签：php, mysql, ajax, maps, gis

我需要 AJAX (Javascript/PHP/MySQL) 项目的映射。我研究的所有供应商都使用了瓷砖成本模型，或者超出了我们的预算。

我不是在寻找任何花哨的东西，只是在寻找允许的东西：

1.  商业用途（适用于我们和使用地图的我们服务的用户）
2.  平移
3.  缩放
4.  街道图层
5.  通过 GIS 或邮政编码有效地绘制大量标记（例如：>= 1,000）。
6.  向标记添加注释（直接或通过图例）。

如果归根结底，我什至可以不用 1 或 2。

这方面的预算很紧：每年 2,500 美元的许可证或直接购买东西的 5,000 美元。但是，如果有些东西离球场不太远，这个数字可能会被调整。

有谁知道符合要求的任何事情（无意中的双关语）？

此外，另一个问题是底层的瓦片服务器应该包含在价格中。到目前为止，已经提供了一些出色的响应（我正在研究它们），但其中一些只是库，并且磁贴服务器可能是隐藏成本。也并不总是清楚什么（默认）切片服务器与什么库一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T16:46:18.010

我要尝试的第一件事是带有[OpenStreetMap 选项的](http://www.openstreetmap.org/)[MapQuest API](http://developer.mapquest.com/)：

*   [商业和非商业用途](http://developer.mapquest.com/web/tools/getting-started/terms-overview)免费
*   它[支持平移和缩放](http://developer.mapquest.com/web/documentation/open-sdk/javascript/v7.0/panning)
*   它具有[地理编码功能，可让您按邮政编码进行地图绘制](http://developer.mapquest.com/web/documentation/open-sdk/javascript/v7.0/nominatim)
*   它支持[POI 标记和 InfoWindows](http://developer.mapquest.com/web/documentation/open-sdk/javascript/v7.0/poi)，让您可以为地图上的标记提供注释。

使用 OpenStreetMap 的最大限制是缺少路由服务，但无论如何它不在您的“购物清单”上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T22:30:49.223

其他一些可能值得研究的解决方案。

**OpenLayers** ( [http://openlayers.org/](http://openlayers.org/) ) 似乎支持您所需要的。

*   [2 条款 BSD 许可证（也称为 FreeBSD）](https://raw.github.com/openlayers/openlayers/master/license.txt)
*   [缩放和平移](http://dev.openlayers.org/releases/OpenLayers-2.12/examples/zoom.html)
*   [绘图](http://dev.openlayers.org/releases/OpenLayers-2.12/examples/kml-pointtrack.html)
*   [更多例子在这里](http://dev.openlayers.org/releases/OpenLayers-2.12/examples/)

**Leaflet** ( [http://leafletjs.com/](http://leafletjs.com/) ) 看起来很有希望。看起来它依赖于[OpenStreetMap](http://www.openstreetmap.org/)选项。

*   [缩放按钮、平移动画、GeoJSON 图层、](http://leafletjs.com/features.html)
*   [Attribution-ShareAlike 2.0 通用许可证](http://creativecommons.org/licenses/by-sa/2.0/)

另外，[这是](http://www.ohloh.net/p/compare?project_0=OpenLayers&project_1=Leaflet)上述两种解决方案的比较。

希望这些有助于您寻找最佳解决方案。

* * *

***编辑 0***

**MapBox** ( [http://mapbox.com](http://mapbox.com/) ) 看起来是一个很酷的付费解决方案，[看起来在您的预算之内](http://mapbox.com/plans/)。它似乎支持您需要的一切以及更多。

* * *

***编辑 1***

我进行了更多搜索，发现以下内容。

*   **谦虚地图**- [http://modestmaps.com/](http://modestmaps.com/)
*   **自定义构建**- 自己构建？[SO用户提供基本解释。](https://stackoverflow.com/a/2952376/1085891)

    > 我个人的意见是使用形成这种类型堆栈的有效“标准”OSS 库。
    > 
    > OSGEO 有大量的资源来解决这个问题。
    > 
    > *   PostGIS（数据库）
    > *   阿帕奇（网络服务器）
    > *   MapServer（符合 WMS 的 GIS 服务器）
    > *   OpenStreetMap（您需要的地图）
    > *   OpenScales 或 OpenLayers
    > *   （Flex 或 JS API）总成本：几个小时的设置。

*   **Polymaps** - [http://polymaps.org/](http://polymaps.org/)
*   **CloudMade** - [http://cloudmade.com/](http://cloudmade.com/)；[定价](http://cloudmade.com/select/web)；[SO用户对公司的反馈](https://stackoverflow.com/a/2304051/1085891)
*   **谷歌地图**- 不知道为什么没有提到它，但谷歌地图（[http://www.google.com/enterprise/earthmaps/maps.html](http://www.google.com/enterprise/earthmaps/maps.html)；[更多在这里](https://developers.google.com/maps/documentation/business/)）可能是一个可能的解决方案。[高使用限制似乎很有希望](https://developers.google.com/maps/documentation/business/faq#pageview)；不幸的是，您必须与他们联系以获取价格。不过，它可能值得一看。
*   **必应地图**- [http://www.microsoft.com/maps/](http://www.microsoft.com/maps/)
*   **诺基亚地图**- [http://developer.here.net/](http://developer.here.net/)

# javascript - 使用 Javascript 和 onSubmit 自动下载文件

> ID：13803369
> 
> 赞同：2
> 
> 时间：2012-12-10T14:55:06.800
> 
> 标签：javascript, download, dom-events, onsubmit

当访问者提交经过验证的选择加入表单时，我正在尝试创建自动文件下载。我想使用 Javascript 函数作为`onsubmit()`事件来启动下载。这是我正在使用的代码我已经在使用表单`action=`将表单数据提交到数据库，并且已经有 Javascript 来验证表单。我只需要添加下载功能。

```
<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>

  <style type="text/css" xml:space="preserve">
  BODY, P,TD{ font-family: Arial,Verdana,Helvetica, sans-serif; font-size: 10pt }
  A{font-family: Arial,Verdana,Helvetica, sans-serif;}
  B {   font-family : Arial, Helvetica, sans-serif; font-size : 12px;font-  
  weight     
 : bold;}
  .error_strings{ font-family:Verdana; font-size:14px; color:#660000;}
  </style>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"> 
   </script>
 <script type="text/javascript" 
 src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script language="JavaScript" src="gen_validatorv4.js"
type="text/javascript" xml:space="preserve"></script>

   <script type="text/javascipt">
   var downloadURL = function downloadURL(url) {
  var iframe;
  var hiddenIFrameID = 'hiddenDownloader';
  iframe = document.getElementById(hiddenIFrameID);
   if (iframe === null) {
    iframe = document.createElement('iframe');  
    iframe.id = hiddenIFrameID;
    iframe.style.display = 'none';
    document.body.appendChild(iframe);
   }
  iframe.src = 'http://healthyweightnaturally.com/file-download/download.php?   
   download_file=integrative_nutrition_ebook.pdf';   
  }
   </script>
 </head>
 <body>

<form name="myform" id="myform" method="post"  
   action="https://www.example.com/FormHTML.aspx" onSubmit="return downloadURL(url);"> 

     <table cellspacing="2" cellpadding="2" border="0">
    <tr>
      <td align="right">
        First Name
      </td>
      <td>
        <input type="text" name="FirstName" />
      </td>
    </tr>
    <tr>
      <td align="right">
        Last Name
      </td>
      <td>
        <input type="text" name="LastName" />
      </td>
    </tr>
    <tr>
      <td align="right">
        Email *
      </td>
      <td>
        <input type="text" name="Email" />
      </td>
    </tr>

    <tr>
      <td align="right"></td>
      <td>
        <div id="myform_errorloc" class="error_strings">
        </div>
      </td>
    </tr>
    <tr>
      <td align="right"></td>
      <td>
        <input style="padding-left:10px;" src="http://healthyweightnaturally.com/file-  
     download/download-button.png" type="image" value="submit" value="Submit" />
      </td>
    </tr>
  </table>
    <div style="visibility:hidden"> 
    <iframe name="ifr1" width="20" height="20" id="hiddenIFrameID"></iframe> 
    </div> 
   </form>
 <script language="JavaScript" type="text/javascript"
    xml:space="preserve">//<![CDATA[
   //You should create the validator only after the definition of the HTML form
   var frmvalidator  = new Validator("myform");
  frmvalidator.EnableOnPageErrorDisplaySingleBox();
  frmvalidator.EnableMsgsTogether();

 frmvalidator.addValidation("FirstName","req","Please enter your First Name");
 frmvalidator.addValidation("FirstName","maxlen=20",    "Max length for FirstName   
 is 20");
 frmvalidator.addValidation("FirstName","alpha_s","Name can contain alphabetic chars    
 only");

 frmvalidator.addValidation("LastName","req","Please enter your Last Name");
 frmvalidator.addValidation("LastName","maxlen=20","For LastName, Max length is 20");

 frmvalidator.addValidation("Email","maxlen=50");
 frmvalidator.addValidation("Email","req");
 frmvalidator.addValidation("Email","email");

 //]]>
 </script>

 </body>

 </html> 
```

我想使用`onsubmit`而不是`onclick`因为我需要确保在能够下载文件之前表单已经过验证。我对 Javascript 有点陌生，并且一直在努力解决这个问题。我将非常感谢某人的帮助。我找到的最接近答案的东西可以在[HTML OnSubmit: Download OR HTML](https://stackoverflow.com/questions/4994937/html-onsubmit-download-or-html)中看到，但由于他们从未提供任何代码示例，因此无法帮助我查看解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:05:03.823

您可以使用 jQuery 插件[http://jqueryfiledownload.apphb.com/](http://jqueryfiledownload.apphb.com/)，我在这里找到了[使用 Javascript/jQuery 下载文件](https://stackoverflow.com/questions/3749231/download-file-using-javascript-jquery)。

# wpf - 屏幕加载时的绑定错误

> ID：13803375
> 
> 赞同：0
> 
> 时间：2012-12-10T14:55:43.020
> 
> 标签：wpf, integerupdown

我使用`IntegerUpDown`的是 WPF 工具包，并且绑定了最小值、最大值和值属性。

当视图加载时，`IntegerUpDown`控件中的某些值显示“0”（我无法触摸的无效输入），即使最小值是通过绑定设置为“1”（我也无法触摸）。

为什么会发生这种情况？为什么最小值不强制对屏幕负载进行最小检查？当我向下滚动时，视图可能会刷新，然后应用程序崩溃。

关于这个问题的任何想法都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:47:35.120

我跑了一个测试：我给每个属性加了一个转换器，发现在xaml中写控件的时候，属性的顺序就是它们的绑定顺序。我的控件编写如下：

```
<toolkit:IntegerUpDown Value="binding" Min="binding" Max="binding"/> 
```

一旦我将属性的顺序颠倒如下：

```
<toolkit:IntegerUpDown Min="binding" Max="binding" Value="binding"/> 
```

屏幕按预期在加载时崩溃。

希望这可以帮助。

# c# - 如何在 asp.net c# 中创建多页发票？

> ID：13803381
> 
> 赞同：0
> 
> 时间：2012-12-10T14:55:49.287
> 
> 标签：c#, pdf, reporting, invoice

我对自己想做的事情感到非常困惑，正在寻找一些建议。

我的一位客户必须每月开具详细说明公司所有支出的发票，以及另外两张此类发票。客户确信他只需要这些发票 - 就逻辑而言，它们非常简单，可以生成。

现在，要制作实际的发票，我真的不想使用 Telerik、SSRS 等报告解决方案，因为我认为它们对我的目的来说太过分了。同时，我不确定如何让打印机打印整齐的页面而不切断任何东西。

我很想在网页中提供输出并要求我的客户从那里打印出来。

我不是以正确的方式看待这个吗？这可能吗？

我可以使用 ITextSharp 或其他东西来生成 pdf。事实上，如果不能仅输出到 html 页面并让打印机以某种方式识别分页符，我想我会继续这样做。

因为这是一项非常小的工作，我不想花太多时间在这上面，因为这个自由职业项目的成本也很低。

* * *

打印到新页面很重要的原因是我的客户有几家与他打交道的商店，他希望为每个客户打印他们自己的发票。我可以让他分别制作每个客户的发票并打印它们，但这不是处理它的理想方式。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:07:43.587

有一个 css 属性应该告诉浏览器打破页面：[page-break-before](https://developer.mozilla.org/en-US/docs/CSS/page-break-before)。

但是，如果您有大量要支持的浏览器，最好获得一些 HTML 到 PDF 转换库或真正使用 iTextSharp（据我所知，甚至有一个模块/类允许使用 iTextSharp 将 HTML 转换为 PDF ) 因为打印网页有很多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:09:16.430

过去，当我想创建可重复使用的文档时，我使用 Word 或 Excel XML 格式。

请参阅：[http ://en.wikipedia.org/wiki/Microsoft_Office_XML_formats](http://en.wikipedia.org/wiki/Microsoft_Office_XML_formats)

它们很容易创建和调整，然后您所要做的就是在代码中重新创建动态部分。您所要做的就是将文档保存为 Office XML 格式，然后在写字板中打开它以查看在何处进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:43:10.487

SSRS 具有用于设计报告的拖放界面，并具有 PDF 输出选项。如果数据在 SQL 服务器数据库中，那么即使有学习曲线，做 SSRS 报告也应该更容易。

# javascript - RegExp：与符号之间的匹配字符串

> ID：13803384
> 
> 赞同：1
> 
> 时间：2012-12-10T14:56:03.630
> 
> 标签：javascript, regex

我正在尝试使用 regExp 来读取 URL 参数。我需要对以下字符串执行匹配：

```
SomeMoreText&action='{%22JsonParameter%22:[%221234%22]}'&SomeMoreText 
```

最终结果应该是

```
 '{%22JsonParameter%22:[%221234%22]}' 
```

我想我需要一个表达式来查找 &action= 和以下 & 之间的所有内容。我尝试了不同的表达式但没有成功，老实说，我在理解正则表达式语法时遇到了很多困难。我认为这里的问题是冒号、引号 (%22) 和括号。如果只是文字，我相信这样的事情会起作用：

```
/action=([\w\-]+)/ 
```

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:58:51.647

怎么样

```
var m = /action=([^&]+)/.exec(str);
if (m) {
    // The content is in m[1]
} 
```

[实例](http://jsbin.com/ijotod/1)| [来源](http://jsbin.com/ijotod/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:59:35.297

不要使用正则表达式，试试这个：

```
var n=str.split("&"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:01:18.620

您可以使用[正面和负面的前瞻](http://www.regular-expressions.info/lookaround.html)。他们是`(?<= expression )`并且`(?= expression )`恭敬地。

`.*?`以下将对任何以 'action=',`(?<=action=)`开头并后跟 '&', 的字符进行非贪婪查找`(?=&)`。

完整的正则表达式是：`(?<=action=).*?(?=&)`

你可以[在这里](http://gskinner.com/RegExr/)测试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:05:35.840

你也可以使用

```
result = str.split("action=")[1];
result = result.substring( 0, result.indexOf("&") ); 
```

演示[**在这里**](http://jsfiddle.net/bruno/tqRgX/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T15:13:40.170

正如@PearsonArtPhoto 之前所说，您可以简单地使用 split ：

```
var results=str.split("&"); 
```

然后遍历结果数组，如下所示：

```
for(i=0; i< results.length ; i++){
  if( results[i].split('=')[0] == 'action'){  // this condition to test that the key is 'action'
  return results[i].split('=')[1];
  }
} 
```

我希望这有帮助。

# android - Android Google Maps API V2.0 - 在 XML 中包含 MapView

> ID：13803385
> 
> 赞同：1
> 
> 时间：2012-12-10T14:56:12.293
> 
> 标签：android, android-maps

我正在尝试将 MapView 插入 Fragment 但是我找不到正确的类来投射`MapView`对象。

我`MapView`像这样插入到我的片段中。

```
<com.google.android.gms.MapView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/map_view_track"/> 
```

但是，我不可避免地得到一个`ClassCastException`.

可以这样插入`MapView`吗？我很确定是的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T15:03:17.010

`com.google.android.gms.Maps`不作为一个类存在，AFAIK。试试`com.google.android.gms.maps.MapView`。

# html - 无法让 iFrame 在 iPhone、iPad 和 BlackBerry 的屏幕上滚动

> ID：13803388
> 
> 赞同：2
> 
> 时间：2012-12-10T14:56:21.153
> 
> 标签：html, css, mobile, iframe

我正在构建一个有两个 div 的页面。一个 div 用作标题，另一个 div 包含一个 iFrame。

目前，我有一些 JQuery 和 CSS 一起工作，以便根据正在查看的窗口的大小调整 iFrame 的大小。我已经进行了一些初步测试，它适用于 Firefox、Safari、Chrome、IE 9 和 Android 2.3 上的默认/库存浏览器。

但是，当我尝试在 iPad、iPhone 或 BlackBerry 上查看页面时，iFrame 似乎正在调整大小，但您无法滚动 iFrame 页面的整个长度。你基本上被卡住了。但是在安卓手机上，我可以向下滚动页面，这很奇怪。

这是我正在使用的 CSS 代码：

```
#header {
    float: left;
    width:100%;
    height:75px;
    background: #21a5d3; /* Old browsers */
}

#portal {
    position: fixed;
    top: 75px;
    left: 0px;
    width: 100%;
    bottom: 0px;
    min-width: 100%;
}

iframe#iframeclass { width: 100%; height:100% } 
```

这是HTML：

```
<div id="header">

</div>
<div id="portal">
    <iframe src="http://www.bbc.co.uk/" id="iframeclass" frameborder="0"></iframe>
</div> 
```

这是我正在使用的 JQuery：

```
<script>
    var widthRatio = $('#portal').width() / $(window).width();
    $(window).resize(function() {
        $('#portal').css({width: $(window).width() * widthRatio});
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:31:52.170

经过多次谷歌搜索和反复试验，我设法解决（而不是解决）这个问题。

我基本上已经删除了在任何浏览器中加载时都会给我一个完美的窗口大小的 JQuery 代码。我将`#portal`代码更改为以下内容：

```
#portal {
    position: absolute;
    top: 75px;
    left: 0px;
    height:92%;
    width:100%;
    bottom: 0px;
    min-width: 100%;
    -webkit-overflow-scrolling:touch;
} 
```

我不知道`-webkit-overflow-scrolling:touch;`代码是否真的做任何事情，但我已经被它破解了，我真的不在乎它现在是否做了。

这是 Apple 自 2011 年以来就知道的问题，但继续进一步中断对此问题的支持（而不是修复它）。多么绝对的笑话。

# json - 将 JSON REST Web 服务中的日期序列化为 ISO-8601 字符串

> ID：13803391
> 
> 赞同：21
> 
> 时间：2012-12-10T14:56:28.953
> 
> 标签：json, jax-rs, jboss7.x, resteasy

我有一个使用 JBoss AS 7.1 的 JAX-RS 应用程序，并且我发布/获取 JSON 和 XML 对象，其中包括日期（java.util.Date）：

```
@XmlRootElement
@XmlAccessorType(XmlAccessField.FIELD)
public class MyObject implements Serializable
{
    @XmlSchemaType(name = "dateTime")
    private Date date;
    ...
} 
```

当我在 get 方法上使用 @Produce("application/xml") 时，对象被序列化为 XML，日期被转换为 ISO-8601 字符串（例如“2012-12-10T14:50:12.123+02:00” ）。

但是，如果我在 get 方法上使用 @Produce("application/json")，则 JSON 对象中的日期是时间戳（例如“1355147452530”）而不是 ISO-8601 字符串。

如何配置 JAX-RS 实现 (RESTEasy) 以将 JSON 格式的日期序列化为 ISO-8601 字符串而不是时间戳？

谢谢您的回答。

注意：我还尝试使用自定义 JAX-RS 提供程序对日期进行 JSON 序列化

```
@Provider
@Produces(MediaType.APPLICATION_JSON)
public class CustomJsonDateProvider implements MessageBodyWriter<Date>
{
    ...
} 
```

这个提供者似乎是由 RESTeasy 在 JBoss 启动时注册的：

```
[org.jboss.jaxrs] Adding JAX-RS provider classes: package.CustomJsonDateProvider
...
[org.jboss.resteasy.cdi.CdiInjectorFactory] No CDI beans found for class package.CustomJsonDateProvider. Using default ConstructorInjector. 
```

但它从未使用过！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-22T13:53:28.390

我假设您的 json 解析器是 Jackson，请尝试：

```
@JsonFormat(shape=JsonFormat.Shape.STRING, pattern="yyyy-MM-dd,HH:00", timezone="CET")
public Date date; 
```

（自杰克逊 2.0 起）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-27T07:48:02.290

默认的 JBoss 解析器是 Jettison，但我无法更改日期格式。所以我切换到 Jackson 并在我的项目中添加了以下类来配置它：

```
@Provider
@Produces(MediaType.APPLICATION_JSON)
public class JacksonConfig implements ContextResolver<ObjectMapper>
{
    private final ObjectMapper objectMapper;

    public JacksonConfig()
    {
        objectMapper = new ObjectMapper();
        objectMapper.configure(SerializationConfig.Feature.WRITE_DATES_AS_TIMESPAMPS, false);
    }

    @Override
    public ObjectMapper getContext(Class<?> objectType)
    {
        return objectMapper;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T10:21:46.510

对不起人们大声喊叫 - 我在这里找到了答案

[http://wiki.fasterxml.com/JacksonFAQDateHandling](http://wiki.fasterxml.com/JacksonFAQDateHandling) ,

这里

[http://wiki.fasterxml.com/JacksonFAQ#Serializing_Dates](http://wiki.fasterxml.com/JacksonFAQ#Serializing_Dates)，

这里

[http://wiki.fasterxml.com/JacksonHowToCustomSerializers](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)

这里

[http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/map/util/StdDateFormat.html](http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/map/util/StdDateFormat.html)

使用 @JsonSerialize(using= ... ) 方式：

```
public class JsonStdDateSerializer
extends JsonSerializer<Date> {

  private static final DateFormat iso8601Format =
    StdDateFormat.getBlueprintISO8601Format();

  @Override
  public void serialize(
    Date date, JsonGenerator jgen, SerializerProvider provider)
  throws IOException, JsonProcessingException {

    // clone because DateFormat is not thread-safe
    DateFormat myformat = (DateFormat) iso8601Format.clone();
    String formattedDate = myformat.format(date);
    jgen.writeString(formattedDate);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-23T13:56:23.773

声明`Serializer`Soap/XML 使用的相同：

```
@XmlElement(name = "prealert_date")
@XmlSchemaType(name = "dateTime")
@JsonSerialize(using = XMLGregorianCalendarSerializer.class)
protected XMLGregorianCalendar prealertDate; 
```

# client - 在cmd中重定向端口的分步说明

> ID：13803394
> 
> 赞同：1
> 
> 时间：2012-12-10T14:56:38.387
> 
> 标签：client, client-server, chat

我正在尝试在 android 中做我的第一个超级简单的聊天应用程序。

我正在尝试遵循本教程 [1]：[http ://www.edumobile.org/android/android-development/socket-programming/](http://www.edumobile.org/android/android-development/socket-programming/)

我按照第 5 点的描述做了所有事情。我缺乏一些基础知识。有写我将重定向端口：

> 5.) 重定向端口：i) 运行 -> cmd -> telnet localhost 5554 ii) redir add tcp:5000:6000

但我的问题是我不知道如何使用 cmd，以前从来没有这样做过，现在需要一个超级分步说明，用于在 cmd 之前从未打开过的傻瓜，现在应该重定向一个端口。有谁能够帮我？？？

# vba - 使用 vba 覆盖 csv 文件

> ID：13803396
> 
> 赞同：3
> 
> 时间：2012-12-10T14:56:42.050
> 
> 标签：vba, ms-access, csv, ms-access-2007

有许多类似的帖子，但没有什么能像我想要理解的那样简单

我想使用 Access 2007 VBA 打开一个 csv 文件并替换列标题行，即：

```
OldColumn1,OldColumn2

1,2 
```

和

```
NewColumn1,NewColumn2

1,2 
```

即不干扰数据的臀部。

然后保存并关闭。

我试过这段代码，但它删除了我的数据：

```
Sub WriteFile()

  Dim OutputFileNum As Integer
  Dim PathName As String

  PathName = Application.ActiveWorkbook.Path
  OutputFileNum = FreeFile

  Open PathName & "\Test.csv" For Output Lock Write As #OutputFileNum

  Print #OutputFileNum, "NewCol1" & "," & "NewCol2"

  Close OutputFileNum

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:15:10.410

1.  导入或链接到 .csv，以便您在 Access 2007 数据库中拥有记录集。
2.  使用 NewColumn[x] 作为 OldColumn[x] 的别名编写查询。
3.  编写 vba 代码以使用 TransferText 功能或制作宏以执行相同操作以将查询导出为 .csv 文件（如果需要/需要覆盖原始 csv）。

显然，您可以做很多额外的事情来为任何数量或类型的文件自动化和重现这个概念。但上述解决方案应该适用于所有 MS Access 环境。

如果您想了解这些步骤的详细信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:48:55.967

除了我之前的评论，请参阅使用 Excel 参考的方法：

```
Public Sub EditCsv()

Dim xlApp As Object
dim xlWbk As Object
Dim xlWst As Object

    Set xlApp = CreateObject("Excel.Application")
    Set xlWbk = xlApp.Workbooks.Open ".../Test.csv" 'Amend this to your needs
    Set xlWst = xlWbk.Sheets(1)

    'This assumes the columns are at the beginning of the file
    xlWst.Range("A1") = "My New Column Name"
    xlWst.Range("B1") = "My New Second Column Name"

    xlWbk.Close -1 'Close and save the file here
    xlApp.Quit

    Set xlApp = Nothing
    Set xlWbk = Nothing
    Set xlWst = Nothing

End Sub 
```

# nhibernate - 如何使用 Criteria 或 QueryOver API 编写此 linq 查询

> ID：13803398
> 
> 赞同：2
> 
> 时间：2012-12-10T14:56:45.097
> 
> 标签：nhibernate, transform, linq-to-nhibernate, criteria-api, queryover

是否可以在下面使用 Query(linq) api 转换为 NHibernate 中的 Criteria 或 QueryOver API 编写的代码？我正在使用它来将数据格式化为 DTO，它也只适用于到 db 的一次往返。

**注意：**我尝试了transformers.aliastobean，但我一次只能使用一个变压器。是否可以在一个查询中使用多个转换器？

```
 from entityType in Provider.GetSession().Query<crmEntityType>()
     .Fetch(x => x.Association)
     .Fetch(x => x.Fields)
     .AsEnumerable()
     where instanceIDs.Contains(entityType.Instance.instanceID)
     select new EntityTypeDTO()
     {
     ID = entityType.ID,
     Title = entityType.Title,
     Association = entityType.Association.Distinct().Select(asc => asc.ID).ToArray<int>(),
     Fields = entityType.Fields.Distinct().Select(fi => new CustomFieldDTO { 
 ID = fi.ID,
 Name =  fi.Name,
 Value = fi.Value,
 EntityType = fi.EntityType.ID,
 Type = fi.Type 
}).ToList()
     }).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:22:39.180

让我们从`QueryOver`语法开始：

```
// external filter data
instanceIDs = new int[] { 1, 2, 3 };

// aliasing
EntityTypeDTO entityDTO = null;
CustomFieldDTO fieldDTO = null;
Field field = null;

IQueryOver<EntityType, Field> query = Session.QueryOver<EntityType>()

  // filter Entity by ID's list
  .Where(Restrictions.On<EntityType>(c => c.ID).IsIn(instanceIDs))

  // Join Fields
  .JoinQueryOver<Field>(c => c.Fields, () => field)
  .SelectList(list => list

    // entity
    .Select(c => c.ID)
    .Select(c => c.Title)
    // ... more Entity properties

    // field collection
    .Select(() => field.ID)
    .Select(() => field.Name)
    // ... more Field properties
  )
  .TransformUsing(new MyTransformer()); // see below

var dtos = query.List<EntityTypeDTO>(); 
```

此 QueryOver 将生成包含所有 EntityType 及其字段的 SQL 语句。现在我们必须提取唯一的 EntityType 实例并填充它们的字段列表

有一个 DTO 类的概述（以及上面的 QueryOver，这些只包含很少的属性作为示例）：

```
public class EntityTypeDTO
{
  public virtual int ID { get; set; }
  public virtual string Title { get; set; }
  public virtual IList<CustomFieldDTO> Fields { get; set; }
  ...
}
public class CustomFieldDTO 
{
  public virtual int ID { get; set; }
  public virtual string Name { get; set; }
  ...
} 
```

最后是技巧**MyTransformer()**：

```
public class MyTransformer : IResultTransformer
{
  // rows iterator
  public object TransformTuple(object[] tuple, string[] aliases)
  {
    var entity = new EntityTypeDTO
    {
      ID = (int)tuple[0],         // aliases should be used
      Title = tuple[1] as string  // first two are belong to Entity
    };
    var field = new CustomFieldDTO
    {
      ID = (int)tuple[2],         // last 2 columns are for a Field
      Name = tuple[3] as string   // see SelectList in QueryOver
    };
    entity.Fields = new List<CustomFieldDTO> { field };
    return entity;
  }

  // convert to DISTINCT list with populated Fields
  public System.Collections.IList TransformList(System.Collections.IList collection)
  {
    var results = new List<EntityTypeDTO>();
    foreach(var item in collection)
    {
      var entity = item as EntityTypeDTO;

      // was already the same ID appended
      var existing = results.SingleOrDefault(c => c.ID.Equals(entity.ID));
      if(existing != null)
      {
        // extend fields
        existing.Fields.Add(entity.Fields.First());
        continue;
      }

      // new ID found
      results.Add(entity);
    }
    // DISTINCT list of Entities, with populated FIELDS
    return results;
  }
  ... 
```

MyTransformer 是临时的，仅用于此目的......但这种方法可以扩展

# windows - 使用 Powershell 从 Perfmon blg 中提取主机名

> ID：13803401
> 
> 赞同：0
> 
> 时间：2012-12-10T14:57:02.300
> 
> 标签：windows, powershell, perfmon

我正在编写一个脚本，它将自动从 .blg Perfmon 日志中提取数据。

我已经制定了我需要用来获取数据的主要 Import-Counter 命令，但我正在尝试对其进行参数化，以便我可以为日志文件中的每台机器执行此操作（无需打开日志Perfmon，这可能需要 15 分钟或更长时间，这也是我编写此脚本的原因），并找出每个主机名是什么。

我拥有的脚本可以完成这项工作，但是返回我想要的数据仍然需要一分钟，我想知道是否有更简单的方法可以做到这一点，因为我对 Powershell 不太熟悉？

这是我所拥有的：

```
$counters = Import-Counter -Path $log_path$logfile -ListSet * | Select-Object paths -ExpandProperty paths

$svrs = @()

# for each line in the list of counters, extract the name of the server and add it to the array
foreach ($line in $counters) {
    $svrs += $line.split("\")[2]
}

# remove duplicates and sort the list of servers
$sorted_svrs = $svrs | sort -unique

foreach ($svr in $sorted_svrs) {
    Write-Host $svr
} 
```

我现在只是打印名称，但它们将进入适当脚本中的数组，然后我将运行我的 Import-Counter 块，其中每个主机都已参数化。

只是想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:12:06.470

```
$sorted_svrs=Import-Counter "$log_path$logfile" -Counter "\\*\physicaldisk(_total)\% disk time" | %{$_.countersamples.path.split("\")[2]} | sort -Unique 
```

# grep - grep 可以在文件中仅识别一个匹配的单词吗？

> ID：13803406
> 
> 赞同：2
> 
> 时间：2012-12-10T14:57:11.623
> 
> 标签：grep, word, diacritics

我有一个包含单词列表的文件，我只想识别文件中与另一个单词完全匹配的单词？

因此，例如，如果我在文件中有单词“BEBE, BEBÉ, BEBÉS”，并且我在寻找“BEBE”，我希望它只返回第一个，这是完全匹配的。

我尝试使用 grep -w "BEBE" filename.txt，但它不起作用。它仍然把他们三个都还给了我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:59:34.030

用于`-o`仅显示与 匹配的部分，如果不匹配`-w`，也用于固定字符串：`-F``regex`

```
$ cat file
BEBE, BEBÉ, BEBÉS

$ grep -woF 'BEBÉ' file
BEBÉ

$ grep -woF 'BEBÉS' file
BEBÉS 
```

# search - 删除重复项而不考虑位置

> ID：13803409
> 
> 赞同：0
> 
> 时间：2012-12-10T14:57:16.037
> 
> 标签：search, solr, indexing

是否有任何过滤器工厂可用于在不考虑位置的情况下删除重复项？

我不能使用 RemoveDuplicatesTokenFilterFactory 因为它考虑位置[[stack]](https://stackoverflow.com/questions/10329470/why-solr-removeduplicatestokenfilterfactory-dont-work)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T14:34:14.003

我有一个类似的问题，在我希望它们是唯一的字段中有很多重复值。**解决方案是在solrconfig.xml**文件中添加一个处理器。下面是示例。列出的字段的每个值都是唯一的。我的字段名称是*成分_*物质、活性成分......

```
<updateRequestProcessorChain>
    <processor class="org.apache.solr.update.processor.UniqFieldsUpdateProcessorFactory">
        <lst name="fields">
            <str>ingredient_substance</str>
            <str>active_moiety</str>
            <str>generic_medicine</str>
            <str>inactive_ingredient_substance</str>
        </lst>
    </processor>
    <processor class="solr.RunUpdateProcessorFactory"/>
</updateRequestProcessorChain> 
```

# c++ - 将字符串拆分为从日志文件中提取的子字符串

> ID：13803419
> 
> 赞同：0
> 
> 时间：2012-12-10T14:57:35.753
> 
> 标签：c++

**Requirement->**要从字符串中提取子字符串。要存储的单词以粗体显示

**示例字符串->** “2012 年 12 月 10 日星期一 23:04:20 [pid 3194] [ftp] **OK 上传：**客户端“192.168.10.14”、“/pub/upload/Untitleppppp.txt”、**80 字节、0.62Kbyte/sec** ” // 这个示例字符串是通过其他函数从 ftp 日志中检索到的。

我已经实现了从上面的字符串中提取值的函数。如果我的方法是正确的，我不是很自信？各位大侠能否发表一下看法。

其次，假设将来，我想获取样本字符串中 80 个字节的传输字节数，我将如何实现这一点。目前，我的函数通过空格分隔符将字符串分解为向量，所以如果想知道字节数，我会得到 80 个字节而不是 80 个字节。如果上传或下载失败，我们不会得到这个子字符串。

任何想法都会对我有所帮助。

```
 bool SplitString( const std::string& logString, std::string& type, std::string& status, std::string& speed )
{
    bool result = true;
std::vector<std::string> splitVector ;

// split the string and puhback into vector.
boost::split(splitVector,logString, boost::is_any_of("\t "));   

typedef std::vector<std::string>::const_iterator iter;

 iter iterString  = find(splitVector.begin(), splitVector.end(), "[ftp]") ;
if( iterString == splitVector.end() )
{
    std::cout <<"Ftp Log is requested .. But  this is not a ftp log try again" ; 
    result = false;

} 

if( result == true )
{
 std::cout << " pos val = " << *iterString ;

status = *(++iterString);

type = *(++iterString);

speed = splitVector.back();
}

return result;
} 
```

谢谢和问候，萨曼莎

# ruby-on-rails - link_to _remove 正在工作，但 link_to_add 在nested_form RAILS 3 中不起作用

> ID：13803425
> 
> 赞同：1
> 
> 时间：2012-12-10T14:58:10.693
> 
> 标签：ruby-on-rails, nested-forms, nested-form-for

我关注[了 https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)

删除功能有效，但添加字段无效。

在我的模型中，我正确地接受了嵌套属性。我的部门有很多部门。

**在除法.rb**

```
class Division < ActiveRecord::Base
  attr_accessible :name, :departments_attributes
  has_many :departments, :dependent => :destroy
  accepts_nested_attributes_for :departments, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => true

end 
```

**在部门.rb**

```
class Department < ActiveRecord::Base
  attr_accessible :division_id, :name
  belongs_to :division
  belongs_to :user
end 
```

部门属于部门，这是正确的。

在我的 divisions_controller.rb

我的新方法与 Ryan B 的示例完全相同：[https ://github.com/ryanb/complex-form-examples/tree/nested_form](https://github.com/ryanb/complex-form-examples/tree/nested_form)

```
def new
    @division = Division.new
    @division.departments.build
  end 
```

另外我需要在我的 application.js 中使用 nested_form.js

```
//= require nested_form 
```

嵌套表格.js：

```
jQuery(function($) {
  $('form a.add_nested_fields').live('click', function() {
    // Setup
    var assoc   = $(this).attr('data-association');            // Name of child
    var content = $('#' + assoc + '_fields_blueprint').html(); // Fields template

    // Make the context correct by replacing new_<parents> with the generated ID
    // of each of the parent objects
    var context = ($(this).closest('.fields').find('input:first').attr('name') || '').replace(new RegExp('\[[a-z]+\]$'), '');

    // context will be something like this for a brand new form:
    // project[tasks_attributes][new_1255929127459][assignments_attributes][new_1255929128105]
    // or for an edit form:
    // project[tasks_attributes][0][assignments_attributes][1]
    if(context) {
      var parent_names = context.match(/[a-z_]+_attributes/g) || [];
      var parent_ids   = context.match(/(new_)?[0-9]+/g) || [];

      for(i = 0; i < parent_names.length; i++) {
        if(parent_ids[i]) {
          content = content.replace(
            new RegExp('(_' + parent_names[i] + ')_.+?_', 'g'),
            '$1_' + parent_ids[i] + '_');

          content = content.replace(
            new RegExp('(\\[' + parent_names[i] + '\\])\\[.+?\\]', 'g'),
            '$1[' + parent_ids[i] + ']');
        }
      }
    }

    // Make a unique ID for the new child
    var regexp  = new RegExp('new_' + assoc, 'g');
    var new_id  = new Date().getTime();
    content     = content.replace(regexp, "new_" + new_id);

    $(this).before(content);
    $(this).closest("form").trigger('nested:fieldAdded');
    return false;
  });

  $('form a.remove_nested_fields').live('click', function() {
    var hidden_field = $(this).prev('input[type=hidden]')[0];
    if(hidden_field) {
      hidden_field.value = '1';
    }
    $(this).closest('.fields').hide();
    $(this).closest("form").trigger('nested:fieldRemoved');
    return false;
  });
}); 
```

我没有更改nested_form.js 中的某些内容，因为我从复杂的示例存储库中复制了它，所以这是默认设置。

任何解决方法都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:48:10.990

对不起...

我使用 COCOON gem 解决了我的查询。[https://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)

它很容易使用。

# firefox - Firefox 17 for Mac 上的字体渲染

> ID：13803427
> 
> 赞同：2
> 
> 时间：2012-12-10T14:58:17.873
> 
> 标签：firefox, fonts, icons, font-face

这只发生在 Firefox for Mac 上。我测试了 Chrome、Opera、Safari、Firefox (Mac 10.7.5) 和 IE9 和 Firefox ‎(Win7)。

Mac OSX 10.7.5（本地和远程）上的 Firefox 17 将使用 FontSquirrel 生成的图标呈现模糊、粗体……我不知道……这是一个屏幕截图：[https://fbcdn-sphotos-ba.akamaihd。网络/hphotos-ak-prn1/18823_4937015794180_273981630_n.jpg](https://fbcdn-sphotos-b-a.akamaihd.net/hphotos-ak-prn1/18823_4937015794180_273981630_n.jpg)

这是我的CSS

```
@font-face {
font-family: 'forteregular';
src: url('fonts/forte-webfont.eot');
src: url('fonts/forte-webfont.eot?#iefix') format('embedded-opentype'),
     url('fonts/forte-webfont.svg#forteregular') format('svg'),
     url('fonts/forte-webfont.woff') format('woff'),
     url('fonts/forte-webfont.ttf') format('truetype');
font-weight: normal;
font-style: normal; } 
```

任何人？谢谢

# javascript - Chrome - 控制台中的 JSON 对象语句异常行为

> ID：13803431
> 
> 赞同：3
> 
> 时间：2012-12-10T14:58:43.573
> 
> 标签：javascript, google-chrome

我在 Chrome 控制台中使用 JSON 对象，我遇到了这种不寻常的行为：

```
> {a:1}
1
> {"a":1}
SyntaxError: Unexpected token :
> b={a:1}
Object
> b={"a":1}
Object 
```

为什么第一个语句返回 1 而不是一个对象，为什么第二个语句有效？我希望前两个语句返回与最后两个语句相同的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:05:46.887

我最好的猜测是在第一种情况下

```
> {a:1} 
```

花括号被忽略，并且`a`被解释为[标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)。

`1`只需键入即可获得相同的值

```
> a:1 
```

如果这是正确的，则第二个示例不起作用，因为双引号不是标签中可接受的字符。

第三个和第四个示例有效，因为它们是有效的变量赋值，并且控制台将对象理解为对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:06:21.457

JavaScript 表达式语句不能以 a 开头，`{`因为它会给解释器造成歧义，解释器也可以将其视为语句块。

所以这被认为是一个带有语句标签和数字文字而不是对象文字的语句块：

```
{a:1} 
```

但这被认为是语法无效的语句块，因为没有语句可以以`"a":`

```
{"a":1} 
```

但这些不是以`{`. 它们以 the 开头，`b =`因此`{`被认为是对象字面量的开头。

```
b = {a:1}
b = {"a":1} 
```

> **[12.4 表达式语句](http://es5.github.com/#x12.4)**
> 
> 注意***ExpressionStatement*****不能以左大括号开头，因为这可能会使它与 Block 模棱两可***。此外，*ExpressionStatement*不能以`function`关键字开头，因为这可能会使它与*FunctionDeclaration*模棱两可。*

 ** * *

这意味着您需要做的就是以不同的字符开始表达式语句以使其有效。

例如，您可以将其括在括号中，它会起作用：

```
({"a": 1}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:09:49.583

Chrome 像这样评估控制台输入：

```
with ((window && window.console && window.console._commandLineAPI) || {}) {
    <your code here>
}; 
```

这导致`{` `}`括号被视为额外的块范围括号，因此被忽略

然后引导我们

`a:1`// 1

被视为标签

和

```
a={a:1} 
```

作为正确的分配

编辑：

这也是 JSLint 在这个[JSBin上所说的](http://jsbin.com/amudus/1/edit)*

# split - PDFBox：拆分 pdf 和输出前缀

> ID：13803434
> 
> 赞同：0
> 
> 时间：2012-12-10T14:58:58.340
> 
> 标签：split, filenames, option, prefix, pdfbox

我喜欢使用 PDFBox 从大 PDF 中提取单个页面。我所有的“真实”PDF 文件都位于一个目录中。因此，如果我提取一个页面，我喜欢将此页面保存到单个页面的不同目录中）。（或将其输送至标准输出）

问题：有没有办法定义输出目录或输出前缀，比如`-prefix=/tmp/pdf-snipped-`

带有选项 PDFSplit 接缝的 PDFBox 将拆分的页面存储在与源 pdf 相同的目录中。但这不是很好。

顺便说一句：在拆分之前复制源 pdf 不是一个选项，因为它们非常大（超过 1 GB）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:15:34.860

回答我自己的问题：

看起来，没有选项（也没有隐藏）来定义输出前缀或输出文件名。

所以我决定下载并更改 PDFbox 源代码并添加一个新选项（“前缀”）来定义存储截断的 PDF 的路径或定义输出名称。

如果您有同样的问题，那么这就是我要走的路：

1.从 svn 下载源代码：http://pdfbox.apache.org/downloads.html#scm[并](http://pdfbox.apache.org/downloads.html#scm) 根据需要在此文件中更改代码：

`{PDFBOX-source-root}/pdfbox/src/main/java/org/apache/pdfbox/PDFSplit.java`

2.使用maven构建自己的PDFBox版本： [http ://pdfbox.apache.org/building.html](http://pdfbox.apache.org/building.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-25T11:45:57.237

选项 -outputPrefix 可用于定义要保存输出的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-13T21:02:32.067

`outputPrefix`作品很好。此示例将页面写入`c:\`并命名它们`docname-1.pdf`，，`docname-2.pdf`...

```
java -jar pdfbox-app-2.0.20.jar PDFSplit -split 1 -outputPrefix C:\docname original.pdf 
```

# android - Java Robotium Android - 在两个不同的设备上同时运行相同的测试

> ID：13803435
> 
> 赞同：5
> 
> 时间：2012-12-10T14:58:59.970
> 
> 标签：android, adb, robotium

我想同时在两台设备上运行 Android Robotium 测试。我现在找不到任何解决方案...

更准确地说，我有一个 application-test.apk 包含多个检测类。我想在两个设备上运行相同的测试 apk，但不同的测试类。我知道我只能使用 adb 以串行模式运行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:48:26.960

您可以使用 -s 标志将 adb 命令指向特定设备。这意味着您可以只打开两个终端并使用 -s 标志运行两个不同的命令，它们将并行运行。显然很容易将其更改为脚本以使其成为更具可扩展性的解决方案。

示例时间...

您有两台设备连接到您的机器，并且在运行时要运行两个不同的测试类（每个测试类一个）：

```
adb devices 
```

你看

```
List of devices attached 
SERIALOFDEVICE1    device1
SERIALOFDEVICE2    device2 
```

然后使用显示的序列号，您可以运行命令：

```
adb -s SERIALOFDEVICE1 shell am instrument -w -e class com.android.foo.FooTest1 com.android.foo/android.test.InstrumentationTestRunner

adb -s SERIALOFDEVICE2 shell am instrument -w -e class com.android.foo.FooTest2 com.android.foo/android.test.InstrumentationTestRunner 
```

在哪里

```
com.android.foo.FooTest1
com.android.foo.FooTest2 
```

是您要在每台设备上运行的类。

# c# - 异步写入 PowerShell 主机

> ID：13803436
> 
> 赞同：0
> 
> 时间：2012-12-10T14:59:02.380
> 
> 标签：c#, powershell

我正在编写一些旨在（也）与`PowerShell`. 我希望能够以`PowerShell`异步方式直接写入控制台。到目前为止，我做了以下事情：

*   创建了一个 IUtilityHost 接口，该接口公开了一些方法，例如 WriteLine
*   我在 PSUtilityHost 中实现了接口：包装 PSHost 对象的 IUtilityHost 类
*   实现 WriteLine 方法是在 PSHost.UI 对象上调用 WriteLine 方法实现的。

问题是我有一个奇怪的输出，它混合了`Read-Host`有时需要手动输入时阻止执行的消息。

我想知道是否有更好的方法将消息异步发送到 powershell 主机。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:18:31.357

尝试从 C# 中获取 Host 对象并使用其 Write* 方法来执行此操作，例如：

```
public class Poco
{
    private PSHostUserInterface _ui;

    public Poco()
    {
        var runspace = Runspace.DefaultRunspace;
        Pipeline pipeline = runspace.CreateNestedPipeline("Get-Variable host -ValueOnly", false);
        Collection<PSObject> results = pipeline.Invoke();
        if (results.Count > 0)
        {
            var host = results[0].BaseObject as PSHost;
            if (host != null)
            {
                _ui = host.UI;
            }
        }            
    }

    public void WriteLine(string msg)
    {
        _ui.WriteLine(msg);
    }
} 
```

注意：虽然您可以只使用 Console.WriteLine 为 PowerShell 提示符执行此操作，但这对于不是控制台应用程序的其他 PowerShell 主机（如 ISE）没有帮助。

# objective-c - 每个段的 UISegmentedControl 自定义图像

> ID：13803437
> 
> 赞同：1
> 
> 时间：2012-12-10T14:59:05.423
> 
> 标签：objective-c, ios, ios6, uisegmentedcontrol

我正在尝试自定义 UISegmentedControl 以对每个段使用自定义图像。我做了很多搜索，但到目前为止我尝试过的解决方案都没有运气。 [这](https://stackoverflow.com/questions/10702599/uisegmentedcontrol-custom-image-for-segment)是我能找到的最新帖子，现在仍然相当过时，而且看起来很老套。关于如何做到这一点，是否有更好或更新的指南？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:12:03.447

不幸的是，`UISegmentedControl`单独为每个片段设置单独的背景图像并不容易。如果您的控件始终是已知宽度，则您可以制作一个全尺寸背景图像，其中绘制了三个段，如下所示：（`(yellow][green][red)`括号表示圆角），然后用于`-[UISegmentedControl setBackgroundImage:forState:barMetrics:]`设置您的图像。

但是，如果您想稍后调整控件的大小，该解决方案不是很灵活。您最好用三个相邻`UIButton`的 s 来伪造它，或者甚至进行子类化`UIControl`以制作自定义分段控件，该控件可以为每个分段提供单独的图像。

# jquery - jQuery jscrollpane 间歇性重新初始化

> ID：13803454
> 
> 赞同：0
> 
> 时间：2012-12-10T14:59:47.560
> 
> 标签：jquery, jquery-jscrollpane

我在其中一个带有图像的 div 上使用 jQuery jscrollpane。它工作正常。但是当我更改该图像的来源时，有时滚动窗格会重新启动，但有时不会。这是间歇性的，我真的被卡住了。任何想法都会很棒，谢谢！

在里面：

```
$(document).ready(function() {
    $('#right').jScrollPane({
        verticalDragMinHeight: 10,
        verticalDragMaxHeight: 10,
        horizontalDragMinWidth: 10,
        horizontalDragMaxWidth: 10
    });
... 
```

我将图像 src 更改为：（并且可以正常交换）

```
$("#text-content").attr('src', 'pics/BIOGRAPHY/tretji_stolpec/text_' + sub_menu_images[nav_sec_pos].toLowerCase() + '.png'); 
```

然后我重新初始化jscrollpane：

```
var pane_api = $("#right").data('jsp');

pane_api.reinitialise(); 
```

我已经尝试过超时 JS 函数来重新初始化 jscrollpane，以防在更改图像的 src 时出现延迟问题。它没有用。有任何想法吗？干杯，瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:43:10.013

尝试动态加载内容是一个已知问题，此问题列表中的最后一个问题[http://jscrollpane.kelvinluck.com/faqs.html](http://jscrollpane.kelvinluck.com/faqs.html)

这是解决方案：http: [//jscrollpane.kelvinluck.com/ajax.html](http://jscrollpane.kelvinluck.com/ajax.html)

另请注意，您必须使用 .load 方法。我尝试使用 .html 和 .ajax（原始 ajax），但没有用。

干杯，瓦尔

编辑：好的，它现在重新启动很好，除了它必须第一次显示。动态加载内容时，第一次（有时）不显示滚动窗格。下次我动态加载内容时，滚动窗格始终显示没有问题..

# drag-and-drop - Mootools Drag+Drop+Sortable 同时？

> ID：13803455
> 
> 赞同：0
> 
> 时间：2012-12-10T15:00:02.173
> 
> 标签：drag-and-drop, mootools, jquery-ui-sortable

我尝试做的是有 2 个块，一个具有所有“字段类型”可用，另一个可以放置和排序。它只能以一种方式工作，从字段类型到可放置区域。

目前，我完成了两件事，使可放置区域中的字段列表可排序，并使拖放工作（我使用了 mootools 文档[http://mootools.net/demos/?demo=Sortables](http://mootools.net/demos/?demo=Sortables)）。

但是，这是问题所在，我的用户需要将该字段拖到我的可放置区域，然后在他可以对其进行排序之后。我找不到在拖动时刻直接使字段可排序的方法......这是一场噩梦。

我希望你能理解我的问题并帮助我。我在整个互联网上搜索过，但似乎没有人为此做出榜样。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:04:25.507

因此，在以各种可能的方式进行 looooooooong 搜索和测试后，我找到了解决方案：

*   为可放置区域创建可排序块
*   创建从字段类型区域到可排序块的拖放块
*   在新的 Drag.Move 中添加 onEnter 和 onLeave，并在其中使用 sorter.addItems 将项目直接添加到进入它的可排序区域，并在离开时在相反的 sorter.removeItems
*   最后一件事是在添加项目后启动分拣机并在删除项目后结束分拣机（onEnter/onLeave）

就是这样 ！我希望它会帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T13:02:50.213

@Mushr00m：你能举一个你的实现的jsfiddle例子吗？它可能非常有用！

# python - 如何使用一对嵌套的 for 循环来迭代二维数组？

> ID：13803456
> 
> 赞同：0
> 
> 时间：2012-12-10T15:00:02.473
> 
> 标签：python, arrays, for-loop, numpy

需要从一个数组中获取值，将它们放入一个函数并将它们放入另一个数组中。这意味着使用一对嵌套的 for 循环来完成。请帮忙。完整的初学者在这里。

编辑：好的澄清一下，我有一个包含各种值的二维数组。我想对所有这些值应用一个函数，并在它们通过函数后返回一个带有值的二维数组。我在 python 中工作。感谢您的快速回复和您可以提供的任何帮助！

EDIT3：示例代码：

```
import numpy as N

def makeGrid(dim):
    ''' Function to return a grid of distances from the centre of an array.
    This version uses loops to fill the array and is thus slow.'''
    tabx = N.arange(dim) - float(dim/2.0) + 0.5
    taby = N.arange(dim) - float(dim/2.0) + 0.5
    grid = N.zeros((dim,dim), dtype='float')
    for y in range(dim):
        for x in range(dim):
            grid[y,x] = N.sqrt(tabx[x]**2 + taby[y]**2)
    return grid

import math

def BigGrid(dim):
    l= float(raw_input('Enter a value for lambda: '))
    p= float(raw_input('Enter a value for phi: '))
    a = makeGrid 
    b= N.zeros ((10,10),dtype=float) #Create an arry to take the returned values
    for i in range(10):
        for j in range (10):
            b[i,j] = a[i][j]*2

if __name__ == "__main__":
    ''' Module test code '''
    size = 10 #Dimension of the array
    newGrid = BigGrid(size)
    newGrid = N.round(newGrid, decimals=2)
    print newGrid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:42:39.570

首先，您的代码中有以下行中的错误：

```
a = makeGrid 
```

您正在设置`a`为一个函数，而不是一个数组。您应该具备以下条件：

```
a = makeGrid(dim) 
```

这就是为什么`TypeError`当您尝试@abought 的答案时，您会遇到这种情况。

现在，要在 numpy 中逐元素应用操作，有很多可能性。如果要对数组中的每个元素执行**相同的操作**，最简单的方法是使用数组操作：

```
b = a * 2 
```

（请注意，您不需要`b`事先声明。而且您也不需要任何循环。） Numpy 还有许多 C 优化函数，它们对数组的每个元素执行相同的操作。这些被称为[ufuncs](http://docs.scipy.org/doc/numpy/reference/ufuncs.html)。您可以组合 ufunc 来获得按元素评估的复杂表达式。例如：

```
b = N.sin(a**2) + N.log(N.abs(a)) 
```

您的`a`数组 from`makeGrid()`也可以使用数组操作和 numpy 更有效地创建[`mgrid`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.mgrid.html)：

```
grid = N.mgrid[-dim//2 + 1:dim//2:0.5, -dim//2 + 1:dim//2:0.5]
grid = N.sqrt(grid[0]**2 + grid[1]**2) 
```

如果您想对每个数组元素执行**不同的操作**，事情会变得更加复杂，并且可能无法避免循环。对于这些情况，numpy 有一种方法可以使用[`ndenumerate`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndenumerate.html)or分解 nD 数组上的循环[`ndidex`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndindex.html)。你的例子`ndenumerate`：

```
for index, x in N.ndenumerate(a):
    b[index] = x * 2 
```

这比多个循环要快，但应尽可能使用数组操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:16:03.697

根据您的问题，您似乎正在使用 Numpy。如果您不太关心速度，您可以简单地使用 numpy 数组调用该函数；该函数将为您对整个数组进行操作。

无需显式编写迭代，但如果您能找到一种方法来利用 numpy 的特殊功能，那将比使用设计为一次操作一个元素的函数更快。但是，除非您使用的是非常大的数据集，否则这应该没问题：

```
import numpy as np
>>> g = np.array( [ [1,2,3], [ 4,5,6] ] )
array([[1, 2, 3],
       [4, 5, 6]])
>>> def myfunc( myarray ):
...     return 2 * myarray
... 
>>> myfunc(g)
array([[ 2,  4,  6],
       [ 8, 10, 12]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:45:22.460

```
def map_row(row):
    return map(some_function,row)

 map(map_row,my_2d_list) 
```

大概是我会怎么做...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:34:40.773

从我从问题的上下文中可以得到的信息以及`2d-array`通常的含义看起来您正在尝试执行以下操作：

```
>>>> array2d = [[0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]]
>>> def add_two( v ):
...     return v + 2
... 
>>> [ [ add_two( v ) for v in row ] for row in array2d ]
[[2, 3, 4, 5, 6], [2, 3, 4, 5, 6], [2, 3, 4, 5, 6], [2, 3, 4, 5, 6], [2, 3, 4, 5, 6], [2, 3, 4, 5, 6], [2, 3, 4, 5, 6], [2, 3, 4, 5, 6], [2, 3, 4, 5, 6], [2, 3, 4, 5, 6]] 
```

`list`上面使用了一个列表理解，它与使用两个嵌套的 for 循环相同，在这种情况下更具可读性，并且当您描述的`list`是什么而不是构建它时，涉及的方法的直接交互更少。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T15:58:26.540

使用嵌套循环很容易做到这一点：

```
def my_function(n): # n will become y from the next part
   new_num = # do whatever you want with it
   return new_num

my_list = [[1, 2, 3], [4, 5, 6], [7, 8, 9]] # just an example
new_list, final_list = [], [] # multiple assignment
for x in my_list:
   print x
   new_list = []
   for y in x:
      # y is now the first value of the first value of my_list--- 1.
      my_num = my_function(y)
      new_list.append(my_num)
   final_list.append(new_list)
print final_list 
```

那应该这样做。

回报：`[[2, 3, 4], [5, 6, 7], [8, 9, 10]]`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T15:42:22.413

这是一个带双地图的单行

```
map(lambda x:map(func, x), l) 
```

例子：

```
l=[[1,2,3],[4,3,1]]
map(lambda x:map(lambda x:x*10,x),l)

[[10, 20, 30], [40, 30, 10]] 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-10T15:04:26.913

```
for(int i; i < x; i++)
   for(int j; j < y; j++)
       array2[i][j] = func(array2[i][j]) 
```

类似的东西？

# spring-security - 从 Java6 升级到 Java7 后 Kerberos 损坏

> ID：13803458
> 
> 赞同：11
> 
> 时间：2012-12-10T15:00:05.110
> 
> 标签：spring-security, java-7, kerberos, java-6, spnego

我有一个使用 spring-security kerberos 扩展的工作应用程序，在 jboss 上运行，运行 java 6。

我正在将我的 jvm 从 java 6 升级到 java 7。当我这样做时，使用在 java 6 上工作的相同代码库和相同的 keytab，我现在在使用 java 7 时收到错误。

我一直收到：java.security.PrivilegedActionException：GSSException：在 GSS-API 级别未指定失败（机制级别：无效参数 (400) - 找不到适当类型的密钥来解密 AP REP - RC4 与 HMAC）

我尝试使用其他论坛中描述的不同 /crypto 选项重新生成密钥表，但无济于事。

我已经调试了 java 7 代码，实际上，处理启动时读取 keytab 的类从 6 更改为 7。难道我的 keytab 没有被正确读入应用程序了吗？我在使用 Java6 启动时看到的一些调试消息在 7 中不再出现，但我不知道这是设计使然，还是表明还有其他东西在起作用？有没有其他人在从 6 升级到 7 时遇到问题，并且他们的 kerberos 集成中断了？有什么建议吗？

在启动时登录 spnego 和 kerberos 调试，我的日志显示：

```
2012-12-10 10:29:30,886  Debug is  true storeKey true useTicketCache false useKeyTab true doNotPrompt true ticketCache is null isInitiator false KeyTab is jndi:/localhost/docfinity/WEB-INF/classes/config/common/security/http-docfinity.keytab refreshKrb5Config is false principal is HTTP/VMMSSDEV.TESTING.LOCAL@TESTING.LOCAL tryFirstPass is false useFirstPass is false storePass is false clearPass is false
2012-12-10 10:30:26,322  principal is HTTP/VMMSSDEV.TESTING.LOCAL@TESTING.LOCAL
2012-12-10 10:30:29,794  Will use keytab
2012-12-10 10:30:29,807  Ordering keys wrt default_tkt_enctypes list
2012-12-10 10:30:29,821  Config name: C:\Windows\krb5.ini
2012-12-10 10:30:29,827  Using builtin default etypes for default_tkt_enctypes
2012-12-10 10:30:29,832  default etypes for default_tkt_enctypes:
2012-12-10 10:30:29,837   17    aes128-cts-hmac-sha1-96
2012-12-10 10:30:29,839   16    des3-cbc-sha1-kd
2012-12-10 10:30:29,842   23    rc4-hmac
2012-12-10 10:30:29,846   1     des-cbc-crc
2012-12-10 10:30:29,849   3     des-cbc-md5
2012-12-10 10:30:29,851  .
2012-12-10 10:30:29,855  Commit Succeeded 
```

另一个问题 - 您会看到它正在尝试读取 C:\Windows\krb5.ini。我的服务器上没有这样的文件。我需要一个吗？我也没有一个使用 java 6 的，并且有效。

亚伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:10:12.097

是的！我们对 SunJaasKerberosTicketValidator 进行了修补，使其看起来像这样，并且它起作用了：

```
String keyTabPath = this.keyTabLocation.getURL().toExternalForm();
String runtimeVersion = System.getProperty("java.version");
if (runtimeVersion.startsWith("1.7")) 
{
      LOG.info("Detected jdk 7\. Modifying keytabpath");
      if (keyTabPath != null)
      {
        if (keyTabPath.startsWith("file:")) 
        {
            keyTabPath = keyTabPath.substring(5);
        }
      }
}
LOG.info("KeyTabPath: " + keyTabPath);
LoginConfig loginConfig = new LoginConfig(keyTabPath, this.servicePrincipal,
                this.debug); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:44:46.640

Here are two potential issues that *might* be affecting you:

1.  Java 7 appears to switch the default encryption type order. Details:

    *   [Java 7 Kerberos Issue - AES128 Corrupt checksum](https://stackoverflow.com/questions/9534540/java-7-kerberos-issue-aes128-corrupt-checksum)

2.  You did't say what specific version of JDK 7 you are using, but there was a bug in earlier versions of JDK 7 that prevented loading keytab files via "file:" URLs:

    *   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=2221392](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=2221392)

Another user on SO worked around the last issue by modifying Spring source:

*   [BadCredentialsException: Kerberos validation not succesfull](https://stackoverflow.com/questions/12517134/badcredentialsexception-kerberos-validation-not-succesfull)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:50:08.390

将 keyTabLocation 对象更改为字符串。

```
So private String keyTabLocaiton.

      @Override
        public void afterPropertiesSet() throws Exception {
            Assert.notNull(this.servicePrincipal, "servicePrincipal must be specified");
            Assert.notNull(this.keyTabLocation, "keyTab must be specified");
            // if (keyTabLocation instanceof ClassPathResource) {
            // LOG.warn("Your keytab is in the classpath. This file needs special protection and shouldn't be in the classpath. JAAS may also not be able to load this file from classpath.");
            // }
            LoginConfig loginConfig = new LoginConfig(this.keyTabLocation, this.servicePrincipal,
                    this.debug);
            Set<Principal> princ = new HashSet<Principal>(1);
            princ.add(new KerberosPrincipal(this.servicePrincipal));
            Subject sub = new Subject(false, princ, new HashSet<Object>(), new HashSet<Object>());
            LoginContext lc = new LoginContext("", sub, null, loginConfig);
            lc.login();
            this.serviceSubject = lc.getSubject();
        } 
```

同样在 LoginConfig 家伙的位置，将 isInitiator 标志设置为 true。

```
 public AppConfigurationEntry[] getAppConfigurationEntry(String name) {
            HashMap<String, String> options = new HashMap<String, String>();
            options.put("useKeyTab", "true");
            options.put("keyTab", this.keyTabLocation);
            options.put("principal", this.servicePrincipalName);
            options.put("storeKey", "true");
            options.put("doNotPrompt", "true");
            if (this.debug) {
                options.put("debug", "true");
            }
            options.put("isInitiator", "true");
            //options.put("isInitiator", "false");

            return new AppConfigurationEntry[] { new AppConfigurationEntry("com.sun.security.auth.module.Krb5LoginModule",
                    AppConfigurationEntry.LoginModuleControlFlag.REQUIRED, options), };
        } 
```

希望这可以帮助您解决问题。

# sbt - 如何从代理后面使用 sbt？

> ID：13803459
> 
> 赞同：88
> 
> 时间：2012-12-10T15:00:16.583
> 
> 标签：sbt

如何配置 sbt 以使用代理？

例如，我的构建定义需要连接到 GitHub，为`http.proxy`、`http.proxyPort`、`user`和指定连接参数`password`。

我如何将这些设置传递给 sbt？

当我在家工作时，是否有一种简单的方法可以在代理/无代理设置之间切换？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-12-10T15:46:28.490

`sbt`尊重 http 代理设置的常用环境变量：

```
export JAVA_OPTS="$JAVA_OPTS -Dhttp.proxyHost=yourserver -Dhttp.proxyPort=8080 -Dhttp.proxyUser=username -Dhttp.proxyPassword=password" 
```

（*当然，假设是 Unix（Linux/OSX 等）。在 Windows 上，您可以`%JAVA_OPTS%`像往常一样以 Windows 方式设置相同的环境变量 ( )。*）

然后`sbt`像往常一样运行：

```
sbt 
```

在代理/无代理之间切换应该是设置一个小脚本的问题，您可以在需要时“啜饮”它。

## 陷阱

*   不要在`yourserver`值中包含“http://”
*   不要在`yourserver`值中包含端口
*   您可能还想包括在内`https.proxyHost`，`https.proxyPort`因为很多东西都通过 https 工作
*   如果您的代理需要身份验证，请不要尝试，除非它只使用基本身份验证，因为 SBT 不支持其他任何东西。还要始终注意将文本凭据明文发送到环境变量中！确保使用不会创建跟踪文件的文本编辑方法从 .bash_history 中删除命令（从技术上讲，您应该`shred`或`srm`整个文件）。如果您在 Windows 上，请不要担心，您的安全性已经被搞砸了，您不能再造成任何伤害。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-09-16T09:19:42.240

`sbt`与通常配置其他基于 JVM 的项目的方式相比，它以相当标准的方式工作。

sbt 实际上是两个“子系统”——启动器和核心。它通常`xsbt.boot.Boot`是在内核启动之前执行的，具有我们都知道（甚至有些人喜欢）的特性。

因此，如何执行 sbt 是一个问题，它说明了如何为 HTTP、HTTPS 和 FTP 网络流量设置代理。

以下是可以为任何 Java 应用程序设置的可用属性的完整列表，包括指示 Java API 通过代理路由通信的 sbt：

*   http_proxy
*   http_proxy_user
*   http_proxy_pass
*   http.proxyHost
*   http.proxyPort
*   http.proxyUser
*   http.proxyPassword

将`http`上面的内容替换为`https`and`ftp`以获取服务的属性列表。

一些`sbt`脚本用于`JAVA_OPTS`设置代理设置`-Dhttp.proxyHost`以及`-Dhttp.proxyPort`其他（上面列出的）。请参阅[Java 网络和代理](http://docs.oracle.com/javase/7/docs/technotes/guides/net/proxies.html)。

`SBT_OPTS`一些脚本自带使用属性设置代理配置的自己的方式，`.sbtopts`或者（仅在 Windows 上）`%SBT_HOME%\conf\sbtconfig.txt`。您可以使用它们专门设置 sbt 以使用代理，而其他基于 JVM 的应用程序则完全不受影响。

从命令行`sbt`工具：

```
# jvm options and output control
JAVA_OPTS          environment variable, if unset uses "$java_opts"
SBT_OPTS           environment variable, if unset uses "$default_sbt_opts"
.sbtopts           if this file exists in the current directory, it is
                   prepended to the runner args
/etc/sbt/sbtopts   if this file exists, it is prepended to the runner args
-Dkey=val          pass -Dkey=val directly to the java runtime
-J-X               pass option -X directly to the java runtime 
                   (-J is stripped)
-S-X               add -X to sbt's scalacOptions (-S is stripped) 
```

这里有一段摘录`sbt.bat`：

```
@REM Envioronment:
@REM JAVA_HOME - location of a JDK home dir (mandatory)
@REM SBT_OPTS  - JVM options (optional)
@REM Configuration:
@REM sbtconfig.txt found in the SBT_HOME. 
```

请注意，它**仅**`sbtconfig.txt`适用于 Windows 。当您使用该文件时，不会咨询您，您将不得不求助于使用其他方法。**`cygwin`**

 **我将 sbt 与以下脚本一起使用：

```
$JAVA_HOME/bin/java $SBT_OPTS -jar /Users/jacek/.ivy2/local/org.scala-sbt/sbt-launch/$SBT_LAUNCHER_VERSION-SNAPSHOT/jars/sbt-launch.jar "$@" 
```

该脚本的重点是使用从源代码构建的最新版本的 sbt（这就是我使用 sbt 的原因`/Users/jacek/.ivy2/local/org.scala-sbt/sbt-launch/$SBT_LAUNCHER_VERSION-SNAPSHOT/jars/sbt-launch.jar`）和`$SBT_OPTS`属性，作为将 JVM 属性传递给 JVM sbt 使用的一种方式。

上面的脚本让我可以在 MacOS X 的命令行上设置代理，如下所示：

```
SBT_OPTS="-Dhttp.proxyHost=proxyhost -Dhttp.proxyPort=9999" sbt 
```

如您所见，有许多方法可以为 sbt 设置代理，这些方法几乎都可以归结为为 JVM sbt 使用设置代理。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-09-15T07:47:47.467

在 windows 环境中，只需在 sbt/sbtconfig.txt 中添加以下行

```
-Dhttp.proxyHost=PROXYHOST 
-Dhttp.proxyPort=PROXYPORT 
-Dhttp.proxyUser=USERNAME 
-Dhttp.proxyPassword=XXXX 
```

或 Https 等价物（感谢评论）

```
-Dhttps.proxyHost=PROXYHOST 
-Dhttps.proxyPort=PROXYPORT 
-Dhttps.proxyUser=USERNAME 
-Dhttps.proxyPassword=XXXX 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-03-27T11:45:12.593

我用过（这是一个unix环境）：

```
export SBT_OPTS="$SBT_OPTS -Dhttp.proxyHost=myproxy-Dhttp.proxyPort=myport" 
```

这对我的设置不起作用：

```
export JAVA_OPTS="$JAVA_OPTS -Dhttp.proxyHost=myproxy-Dhttp.proxyPort=myport" 
```

在 sbt.sh 文件中：

```
JAVA_OPTS          environment variable, if unset uses "$java_opts"
SBT_OPTS           environment variable, if unset uses "$default_sbt_opts" 
```

但显然使用 SBT_OPTS 而不是 JAVA_OPTS

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-05-05T06:42:27.947

对于 Windows 用户，输入以下命令：

```
set JAVA_OPTS=-Dhttp.proxySet=true -Dhttp.proxyHost=[Your Proxy server] -Dhttp.proxyPort=8080 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-08-05T06:27:17.643

提供一个适用于所有 Windows 用户的答案：

将以下内容添加到您的 sbtconfig.txt (C:\Program Files (x86)\sbt\conf)

```
-Dhttp.proxyHost=XXXXXXX -Dhttp.proxyPort=YYYY -Dhttp.proxySet=true -Dhttps.proxyHost=XXXXXXX -Dhttps.proxyPort=YYYY -Dhttps.proxySet=true 
```

将*XXXXXXX*都替换为您的 proxyHost，将*YYYY*都替换为您的 proxyPort。

如果您收到错误“无法找到或加载主类”，您需要设置您的 JAVA_HOME：

```
set JAVA_HOME=C:\Progra~1\Java\jdkxxxxxx 
```

在 64 位窗口上时，使用：

> Program~1 = '程序文件'
> 
> 程序〜2 ='程序文件（x86）'

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-03-16T12:04:21.360

添加 http 和 https 配置：

```
export JAVA_OPTS="$JAVA_OPTS -Dhttp.proxyHost=yourserver -Dhttp.proxyPort=8080 -Dhttp.proxyUser=username -Dhttp.proxyPassword=password"

export JAVA_OPTS="$JAVA_OPTS -Dhttps.proxyHost=yourserver -Dhttps.proxyPort=8080 -Dhttps.proxyUser=username -Dhttps.proxyPassword=password" 
```

（https 配置是必须的，因为 sbt 库引用的许多 url 都是 https）

事实上，我什`'http.proxySet'`至`'true'`在两个配置条目中都有一个额外的设置。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-12T15:26:33.260

当我将代理信息添加到 %JAVA_OPTS% 时，我收到一个错误“-Dhttp.proxyHost=yourserver 此时意外”。我将代理信息放在 %SBT_OPTS% 中，它起作用了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-01-13T19:08:13.183

使用

```
sbt -Dhttp.proxyHost=yourServer-Dhttps.proxyHost=yourServer -Dhttp.proxyPort=yourPort -Dhttps.proxyPort=yourPort 
```

适用于 Ubuntu 15.10 x86_64 x86_64 GNU/Linux。

将 yourServer 替换为正确的地址，分别在 Dhttp 和 Dhttps 中不带 http:// 或 https:// 前缀。请记住避免使用引号。代码行中不包含 usr/pass，只需添加 -Dhttp.proxyUser=usr -Dhttp.proxyPassword=pass 并使用相同的输入标准。谢谢@Jacek Laskowski！。干杯

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-04-14T08:40:07.187

我在 Lightbend Activator 的 FAQ 部分发现了一个有用的项目。我正在使用 Activator，而后者又使用 SBT，因此不确定这是否有助于仅使用 SBT 的用户，但如果您像我一样使用 Activator，并且在代理之后，请按照“代理背后”部分中的说明进行操作常问问题：

[https://www.lightbend.com/activator/docs](https://www.lightbend.com/activator/docs)

以防万一内容消失，这是一个复制粘贴：

> 在代理后面运行激活器时，需要一些额外的配置。首先，打开激活器配置文件，该文件位于 ~/.activator/activatorconfig.txt 下的用户主目录中。请注意，此文件可能不存在。添加以下行（每行一个选项）：

```
-Dhttp.proxyHost=PUT YOUR PROXY HOST HERE
-Dhttp.proxyPort=PUT YOUR PROXY PORT HERE
-Dhttp.nonProxyHosts="localhost|127.0.0.1"
-Dhttps.proxyHost=PUT YOUR HTTPS PROXY HOST HERE
-Dhttps.proxyPort=PUT YOUR HTTPS PROXY PORT HERE
-Dhttps.nonProxyHosts="localhost|127.0.0.1" 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-01-26T06:47:30.340

SBT 使用 HTTP/HTTPS/SFTP/SSH 和其他类型的存储库连接。所以当在代理后面时，这些协议应该是可用的。

在 Windows 上的大多数简单情况下，您只需将代理参数选项传递给 JVM，例如：

```
java -Dhttp.proxyHost=myproxy -Dhttp.proxyPort=8080 
```

那会做的。

但如果没有，您应该注意以下几点：

1.  是否要与存储库建立 HTTPS 连接。
2.  是否将服务器证书导入到 jre cacerts
3.  您的代理是否会替换您的服务器证书

首先要解决，您应该将 https 代理参数传递给 jvm，例如：

```
java -Dhttps.proxyHost=myproxy -Dhttps.proxyPort=8080 -Djavax.net.ssl.trustStore=${TRUST_STORE_PATH} 
```

要解决第二个问题，您应该导入 ca. 有很多提示。

要解决第三个问题，您也许可以考虑使用身份验证代理。

为了简化 SBT 的配置，它在 conf 目录下提供了 sbtconfig.txt 和 sbtops，查看一下。

**参考：**
[http ://www.scala-sbt.org/0.13/docs/Setup-Notes.html](http://www.scala-sbt.org/0.13/docs/Setup-Notes.html)
[http://www.scala-sbt.org/1.0/docs/Publishing.html](http://www.scala-sbt.org/1.0/docs/Publishing.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-12-29T20:13:51.020

在 Mac OS X / El Capitan 上，您可以设置 java 环境变量：

```
$launchctl setenv _JAVA_OPTIONS "-Dhttp.proxyHost=192.168.1.54 -Dhttp.proxyPort=9999" 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-02T13:46:30.503

我发现从终端启动 IntelliJ IDEA 可以让我通过互联网连接和下载。要从终端开始，请输入：

`$ idea`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-15T15:58:08.817

如果您使用需要身份验证的代理，我有一个解决方案给您:)

正如@Faiz 上面解释的那样，SBT 很难处理需要身份验证的代理。如果您无法按需关闭代理（例如公司代理），则解决方案是绕过此身份验证。为此，我建议您使用 squid 代理，并使用您的用户名和密码对其进行配置以访问您的公司代理。请参阅：[https](https://doc.ubuntu-fr.org/squid) : //doc.ubuntu-fr.org/squid 然后，您可以设置 JAVA_OPTS 或 SBT_OPTS 环境变量，以便 SBT 连接到您自己的本地 squid 代理而不是您的公司代理：

> 导出 JAVA_OPTS = "-Dhttps.proxyHost=localhost -Dhttps.proxyPort=3128 -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128"

（只需在你的 bashrc 中 c/c 这个而不修改任何东西，它应该可以正常工作）。

诀窍是 Squid Proxy 不需要任何身份验证，并且充当 SBT 和您的其他代理之间的中间人。

如果您在应用此建议时遇到困难，请告诉我。

问候，

埃德加

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-15T23:46:17.180

对于那些仍在试图找到在 IntelliJ 中配置 HTTP 代理的位置/方式的人来说，这是我设法让它为我工作的方法。我希望这有帮助！

（注意：在相应的框中指定您的网络用户名和密码）：-

[![在此处输入图像描述](../Images/8bb2727a9144493ecd85688332b0ea21.png)](https://i.stack.imgur.com/cZ0Zi.png)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-05-08T03:43:26.637

尝试提供代理详细信息作为参数

```
sbt compile -Dhttps.proxyHost=localhost -Dhttps.proxyPort=port -Dhttp.proxyHost=localhost -Dhttp.proxyPort=port 
```

如果这不起作用，请尝试使用 JAVA_OPTS（非 Windows）

```
export JAVA_OPTS = "-Dhttps.proxyHost=localhost -Dhttps.proxyPort=port -Dhttp.proxyHost=localhost -Dhttp.proxyPort=port"

sbt compile 
```

或（窗口）

```
set JAVA_OPTS = "-Dhttps.proxyHost=localhost -Dhttps.proxyPort=port -Dhttp.proxyHost=localhost -Dhttp.proxyPort=port"
sbt compile 
```

如果没有任何效果，则设置 SBT_OPTS

（非窗户）

```
export SBT_OPTS = "-Dhttps.proxyHost=localhost -Dhttps.proxyPort=port -Dhttp.proxyHost=localhost -Dhttp.proxyPort=port"'
sbt compile 
```

或（窗口）

```
set SBT_OPTS = "-Dhttps.proxyHost=localhost -Dhttps.proxyPort=port -Dhttp.proxyHost=localhost -Dhttp.proxyPort=port"
sbt compile 
```**

# python - 我如何知道文件指针在哪里，以便识别文件中的起始位置

> ID：13803461
> 
> 赞同：0
> 
> 时间：2012-12-10T15:00:22.503
> 
> 标签：python, file-io, python-2.7, seek

我正在处理超过 6MM 行的股票代码数据。我想获取一个符号的所有数据，进行我需要的处理，然后输出结果。

我编写了代码，告诉我每个代码从哪一行开始（参见下面的代码）。我认为如果我知道新符号的开始位置（而不是行号）会更有效，这样我就可以使用 seek(#) 轻松跳转到代码的起始位置。我也很好奇如何扩展此逻辑以读取整个数据块（start_position 到 end_position）以获取股票代码。

```
import csv
data_line       = 0 # holds the file line number for the symbol
ticker_start        = 0
ticker_end          = 0
cur_sec_ticker  = ""
ticker_dl   = [] # array for holding the line number in the source file for the start of each ticker
reader = csv.reader(open('C:\\temp\sample_data.csv', 'rb'), delimiter=',')
for row in reader:
    if cur_sec_ticker != row[1]:   # only process a new ticker
        ticker_fr = str(data_line) + ',' + row[1] # prep line for inserting into array

        # desired line for inserting into array, ticker_end would be the last 
        # of the current ticker data block, which is the start of the next ticker
        # block (ticker_start - 1)
        #ticker_fr = str(ticker_start) + str(ticker_end) + str(data_line) + ',' + row[1] 

        print ticker_fr
        ticker_dl.append(ticker_fr)
        cur_sec_ticker  = row[1]
    data_line += 1
print ticker_dl 
```

下面我放了一个数据文件的小样本：

```
seq,Symbol,Date,Open,High,Low,Close,Volume,MA200Close,MA50Close,PrimaryLast,filter_$
1,A,1/1/2008,36.74,36.74,36.74,36.74,0, , ,1,1
2,A,1/2/2008,36.67,36.8,36.12,36.3,1858900, , ,1,1
3,A,1/3/2008,36.3,36.35,35.87,35.94,1980100, , ,1,1
1003,AA,1/1/2008,36.55,36.55,36.55,36.55,0, , ,1,1
1004,AA,1/2/2008,36.46,36.78,36,36.13,7801600, , ,1,1
1005,AA,1/3/2008,36.18,36.67,35.74,36.19,7169000, , ,1,1
2005,AAN,4/20/2009,20,20.7,18.2067,18.68,808700, , ,1,1
2006,AAN,4/21/2009,18.7,19.06,18.6533,18.9933,530200, , ,1,1
2007,AAN,4/22/2009,19.2867,19.6267,18.54,19.1333,801100, , ,1,1
2668,AAP,1/1/2008,37.99,37.99,37.99,37.99,0, , ,1,1
2669,AAP,1/2/2008,37.99,38.15,37.17,37.59,1789200, , ,1,1
2670,AAP,1/3/2008,37.58,38.16,37.35,37.95,1584700, , ,1,1
3670,AAR,1/1/2008,22.94,22.94,22.94,22.94,0, , ,1,1
3671,AAR,1/2/2008,23.1,23.38,22.86,23.15,17100, , ,1,1
3672,AAR,1/3/2008,23,23,22,22.16,45600, , ,1,1
6886,ABB,1/1/2008,28.8,28.8,28.8,28.8,0, , ,1,1
6887,ABB,1/2/2008,29,29.11,28.23,28.64,4697700, , ,1,1
6888,ABB,1/3/2008,27.92,28.35,27.79,28.08,5240100, , ,1,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:41:34.840

一般情况下，您可以通过该方法获取文件对象的当前位置`tell`。但是，可能很难让它与将文件读取委托给`csv`模块的当前代码一起使用。逐行读取时甚至很难做到这一点，因为底层文件对象可能会以比单行更大的块读取（`readline`and`readlines`方法在后台进行一些缓存以向您隐藏它）。

虽然我会跳过读取特定字节的整个想法，但如果它对你的程序真的很有价值，你可能需要自己负责读取文件，这样你就可以准确地跟踪你在文件中的位置次。`tell`可能没有必要。

像这样的东西可能会读取一大块数据，然后将其拆分为行和值，同时跟踪到目前为止已读取了多少字节：

```
def generate_values(f):
    buf = "" # a buffer of data read from the file
    pos = 0  # the position of our buffer within the file

    while True: # loop until we return at the end of the file
        new_data = f.read(4096) # read up to 4k bytes at a time

        if not new_data: # quit if we got nothing
            if buf:
                yield pos, buf.split(",") # handle any data after last newline
            return

        buf += new_data
        line_start = 0 # index into buf

        try:
            while True: # loop until an exception is raised at end of buf
                line_end = buf.index("\n", line_start) # find end of line
                line = buf[line_start:line_end] # excludes the newline

                if line: # skips blank lines
                    yield pos+line_start, line.split(",") # yield pos,data tuple

                line_start = line_end+1
        except ValueError: # raised by `index()`
            pass

        pos += line_end + 1
        buf = buf[line_end + 1:] # keep left over data from end of the buffer 
```

如果您的文件的行结尾不是 ，这可能需要稍作调整`\n`，但这应该不会太难。

# ember.js - emberjs 中的数据模板名称问题

> ID：13803462
> 
> 赞同：0
> 
> 时间：2012-12-10T15:00:34.973
> 
> 标签：ember.js

ember.js 面临一个奇怪的问题，即当我将“data-template-name”属性添加到脚本标签时，**没有任何**效果。如果删除了 data-template-name 名称，则一切正常。

```
 This is NOT WORKING 
   <script data-template-name="my-template"  type="text/x-handlebars">
    Input: 
    {{#view App.MyView}}
    {{view Ember.TextField 
           valueBinding="view.theValue"        
           placeholder="input ..." }}
    {{/view}}
</script>

  Now if **data-template-name="my-template"** is removed it works fine. 
I mean, In UI  TextField is visible.

  <script   type="text/x-handlebars">
    Input: 
    {{#view App.MyView}}
    {{view Ember.TextField 
           valueBinding="view.theValue"        
           placeholder="input ..." }}
    {{/view}}
</script>

App.MyView = Ember.View.extend({
templateName: 'my-template',
theValue: null,
init: function(){
    this._super();
    this.set('theValue','asdf');
},
keyDown: function(e){
   if(e.keyCode === 13){
        alert(this.get('theValue'));
   }
} 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:10:03.487

好的，不用担心 jsfiddle，这是一个好的开始:)。ember.js 网站上有一个链接，您可以在其中找到起点，包括 Ember.js 相关来源：[http ://emberjs.com/community/](http://emberjs.com/community/)

话虽如此，在创建这样的 Ember.js 应用程序时，有一个隐式默认匿名模板，然后您可以在其中定义自己的模板。

```
 <!-- default template, introducing the view App.MyView -->
 <script type="text/x-handlebars">
  {{view App.MyView}}
 </script>

<!-- template of App.View -->
<script data-template-name="my-template"  type="text/x-handlebars">
  Input: 
  {{view Ember.TextField 
         valueBinding="view.theValue"        
         placeholder="input ..."}}
</script>​ 
```

脚本：

```
App.MyView = Ember.View.extend({
  templateName: 'my-template',
  theValue: null,
  init: function(){
    this._super();
    this.set('theValue','asdf');
  }
});​ 
```

这是您的示例的工作示例：

[http://jsfiddle.net/6p6XJ/171/](http://jsfiddle.net/6p6XJ/171/)

# middleware - 机器人中间件（OpenRTM、OROCOS、RSCA、ASEBA 等）支持移植到 RTOS（Micrium、QNX、Keil、FreeRTOS？

> ID：13803463
> 
> 赞同：0
> 
> 时间：2012-12-10T15:00:40.173
> 
> 标签：middleware, robotics, rtos, qnx, micrium

我有问题要问你。

有一些开源机器人中间件，其中包含一些供机器人开发人员执行 I/O 工作的库。它们是非常强大的工具，可以节省大量时间。它们例如**OpenRTM**、**OROCOS**、**RSCA**等......

在一个项目中，我们将开发一个机器人轮椅，它可以执行一些自主行为，例如避障、move2goal、跟随走廊等。我们将使用 RTOS 来组织 I/O 内容和行为的选择操作。

我想知道是否有任何 RTOS（**mcOS-II、QNX、Keil**等）具有这些中间件的端口？我可以将它们安装到这些 RTOS 上吗？

对不起，我的英语不好。希望你明白我的意思。

我最诚挚的问候..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:45:37.903

我是 OpenRTM-aist 用户。

OpenRTM-aist 有 QNX 实现。

[http://www.openrtm.org/openrtm/ja/node/5056](http://www.openrtm.org/openrtm/ja/node/5056)

抱歉，没有 OpenRTM for QNX 的英文文档，请使用网站上的谷歌翻译按钮。

OpenRTM-aist 也可用于 Real-Time Linux（ART-Linux，实时抢占内核）、T-Kernel (uITRON)、VxWorks（由 SEC CO. LTD. 开发）。

抱歉，他们没有英文页面，但开发人员当然可以进行英文交流。在邮件列表中询问他们：我还建议您使用 openrtm-user 邮件列表。几天前我们有一个类似的问题。您必须能够获得一些有用的信息。

您可以在上述 OpenRTM-aist 官方网站上找到链接。

当然，欢迎英文！

# java - CodeNarc 的静态代码分析无法找到正确的类依赖项

> ID：13803469
> 
> 赞同：0
> 
> 时间：2012-12-10T15:01:12.910
> 
> 标签：java, grails, groovy, static-code-analysis, codenarc

当使用 CodeNarc 对 Groovy 和 Grails 代码进行静态代码分析时，它无法确定类层次结构。在一个服务类中有一个私有方法，比如 BaseService。另一个服务类说 ChildService 扩展了 BaseService 类。ChildService 中的一种方法调用 BaseService 中定义的私有方法。但是 BaseService 类在它自己的类中的任何地方都没有使用私有方法。所以在单独分析 BaseService 类时，私有方法会显示为未使用。但是当我们查看类层次结构时，我们可以理解它的一个子类正在调用它。
所以，我的问题是，CodeNarc 是如何错过这种依赖的？静态代码分析器不会构建解析树并对其进行分析吗？如果不是，它如何分析代码？对静态代码分析内部的任何见解都受到高度赞赏。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:39:35.717

正如它在[codenarc 的文档中所说](http://codenarc.sourceforge.net/codenarc-rules-unused.html#UnusedPrivateMethod)：

> ### UnusedPrivateMethod 规则
> 
> 检查未在同一类中引用的私有方法。请注意，Groovy 代码当前不“尊重”private 修饰符（即，Groovy 可以访问其他类中的私有成员）。
> 
> 已知限制：
> 
> *   不通过属性访问识别方法引用（例如 getName() 作为 x.name 访问）
> *   当方法名是 GString 时不识别方法调用（例如 this."$methodName"()）
> *   ***不识别调用另一个实例的私有方法（即除此之外）***
> *   不区分多个同名但参数不同的私有方法（即重载）
> *   不检查未使用的构造函数

所以你将[不得不关闭这条规则](http://codenarc.sourceforge.net/codenarc-configuring-rules.html#Turning_Off_A_Rule)。

# ruby-on-rails - 如何将应该向用户显示哪些答案的逻辑移动到新课程？

> ID：13803473
> 
> 赞同：2
> 
> 时间：2012-12-10T15:01:33.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, associations

出于摘要邮件的目的，我想获得哪些用户可以看到我的应用程序的答案。

用户应该只看到他已经订阅的所有组中投票最高的 5 个答案。

*协会：*

```
Answer
  # Returns 5 the most voted answers
  #
  scope :best, order("votes_count DESC")

  belongs_to :user
  belongs_to :group
User
  belongs_to :group
  has_many :answers, :dependent => :destroy
  has_many :groups, through: :subscriptions
Group
  has_many :subscriptions
  has_many :users, through: :subscriptions
  has_many :questions
  has_many :answers 
```

所以我正在寻找如何做到这一点的最佳方法：

```
class BestAnswers
  def self.for_user(user)
    answers = []
    user.groups.each |group|
      answers << group.answers
    end
    return answers  
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:19:33.613

经典的方法是：

```
class BestAnswers
  def self.for_user(user)
    Answer.where(:group_id => user.groups).best.limit(5)
  end
end 
```

但是，自 Rails 3.1 以来，AFAIK`has_many`支持链接。您可以对此进行测试并报告吗？

```
#User model: has_many :group_answers, :through => :groups

user.group_answers.best.limit(5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:44:42.653

对我来说，这段代码似乎属于用户模型而不是一个新类。

```
# app/models/user.rb
class User < ActiveRecord::Base
  # Return the five best answers for a user
  def best_answers
    groups.each_with_object([]) do |group, array| 
      array << group.answers.best.limit(5)
    end
  end
end 
```

对于您更新的规格，tokland 的答案看起来非常棒。

# javascript - CRM 2011 中的响应电子邮件活动图像

> ID：13803474
> 
> 赞同：0
> 
> 时间：2012-12-10T15:01:34.093
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm, crm, jscript

如何保留图像以响应电子邮件活动？
在 CRM 中查看时，电子邮件中的图像会显示 - 它们被添加为附件。当我单击“回复”按钮、撰写回复并发送回复时，图像会从电子邮件中删除，并且不会附加到电子邮件中。

我一直在用 JScript 尝试各种事情。
我宁愿不必编写除 JScript 之外的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:53:40.990

这可以通过 javascript 实现。我不知道你尝试了什么，但这可以做到。即捕获表单的发送事件并使用 Javascript 创建附件。

其他选项包括：

*   您可以使用工作流程将父电子邮件的注释附加到响应中。但是随后您将被迫保存您的电子邮件，稍等片刻（执行工作流程），然后发送电子邮件。
*   编写插件代码（但你不会使用除 Javascript 之外的任何其他东西

Javascript删除附件：

```
function deleteAttachments(){ 
    var notesId = {GUID of notes};
    var objNotes = new Object();
    objNotes.DocumentBody = null;
    objNotes.FileName = null;
    objNotes.FileSize = null;
    objNotes.IsDocument = false;
    updateRecord(notesId, objNotes, “AnnotationSet”);
}

function updateRecord(id, entityObject, odataSetName) {
        var jsonEntity = window.JSON.stringify(entityObject);
        var serverUrl = Xrm.Page.context.getServerUrl();
        var ODATA_ENDPOINT = “/XRMServices/2011/OrganizationData.svc”;
        var updateRecordReq = new XMLHttpRequest();
        var ODataPath = serverUrl + ODATA_ENDPOINT;
        updateRecordReq.open(‘POST’, ODataPath + “/” + odataSetName + “(guid’” + id + “‘)”, false);
        updateRecordReq.setRequestHeader(“Accept”, “application/json”);
        updateRecordReq.setRequestHeader(“Content-Type”, “application/json; charset=utf-8″);
        updateRecordReq.setRequestHeader(“X-HTTP-Method”, “MERGE”);
        updateRecordReq.send(jsonEntity);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:21:16.737

我可以在这里访问附件：
https:{org. URL}/xrmServices/2011/OrganizationData.svc/EmailSet(guid'3848cb4d-673f-e211-b9af-005056bd0001')/email_activity_mime_attachment

guid 是电子邮件的 guid。
图像以 Base64 格式存储在 d:Body 中。
现在我需要做的就是用 src="data:image/png;base64,theverylongstring... 为每个内联图像重写 img...
所有内联图像都将作为 Base64 保留在响应中。

# iphone - 旋转超级视图iphone后移动子视图？

> ID：13803475
> 
> 赞同：0
> 
> 时间：2012-12-10T15:01:40.127
> 
> 标签：iphone, uiimageview, rotation, subview

我有一个`subview`，它是`UIImageView`，我有一个`superview`-uiview。

我将子视图添加到超级视图。一开始，我使用代码移动子视图：

```
float difx = [[touches anyObject] locationInView:subview].x - [[touches anyObject] previousLocationInView:subview].x;

float dify = [[touches anyObject] locationInView:subview].y - [[touches anyObject] previousLocationInView:subview].y;

subview.transform = CGAffineTransformTranslate(subview.transform, difx, dify); 
```

它移动得非常好！（它朝着手指光标移动）。

但如果我旋转超级视图，使用代码：

`superview.transform = CGAffineTransformMakeRotation(degreesToRadians(angle));`

这时候，subview 不正确，不正确！（它不会向手指光标移动）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:24:57.890

尝试这个：

```
CGAffineTransformRotate(CGAffineTransform t, CGFloat angle) 
```

# qt - QNetworkAccessManager 发送 GET 两次

> ID：13803476
> 
> 赞同：3
> 
> 时间：2012-12-10T15:01:42.280
> 
> 标签：qt, tcp, qnetworkaccessmanager

我有一些课程可以干扰 HTTP 服务器。这是有意义的代码部分：

```
const QString someClass::BASEURL = QString("http://127.0.0.1:8000/?");

someClass::someClass():
    manager(new QNetworkAccessManager(this))
{
}

QNetworkReply *someClass::run(QString request)
{
    qDebug() << request;
    QEventLoop loop;
    QObject::connect(manager, SIGNAL(finished(QNetworkReply*)), &loop, SLOT(quit()));
    QNetworkReply *res = manager->get(QNetworkRequest(QUrl(BASEURL + request)));
    loop.exec();
    return res;
} 
```

当我调用方法 run() 时，有时（不是每次）是两个相同的 GET 请求（我查看了 tcpdump）。qDebug() 执行 1 次。
我的代码中有错误吗？我看不出任何可能的解释。

更新：经过一些 tcpdump 输出研究。
在第二次请求之后，它发送带有 RST 标志的数据包作为对 FIN 的回答。但是我仍然看不出触发问题的 TCP 流没有区别。
这里的 Fe 是wireshark 的输出。[流8](http://pastebin.com/HchVTcC8)进展顺利。[Stream 11](http://pastebin.com/T1WyJV5K)与[Stream 12](http://pastebin.com/VSsq3AXF)重复。
我被这个困住了。也许这是服务器大小的一些协议错误，我不确定。或者可能是 QNetworkAccessManager 中的一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:21:49.973

您是否尝试过在本地范围内不使用 QEventLoop 的情况下将代码重写为更加异步？您的代码对我来说看起来不错，但是在将请求排队以在本地范围内处理和使用 QEventLoop 的方式中，您可能会遇到一些奇怪的 QT 错误。我通常以如下方式使用 QNetworkAccessManager 来发送 GET 和 POST 请求：

```
 void someClass::run(QString request)
   {
     qDebug() << request;
     QObject::connect(manager, SIGNAL(finished(QNetworkReply*)), this,  SLOT(on_request_complete(QNetworkReply*)));
     QNetworkReply *res = manager->get(QNetworkRequest(QUrl(BASEURL + request)));
   }

   void someClass::on_request_complete(QNetworkReply* response)
   {
      // Do stuff with your response here
   } 
```

# facebook-like - 无法从 Facebook 的“赞”按钮发表评论

> ID：13803477
> 
> 赞同：6
> 
> 时间：2012-12-10T15:01:51.517
> 
> 标签：facebook-like, blogs

我从[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)获得了点赞按钮代码，在我的[页面上](https://davidshen84.appspot.com/blog/)，点赞按钮被正确呈现……至少看起来像这样：P

但是当我点击like按钮时，评论对话框立即出现又消失，按钮变成了**Confirm**链接；然后我点击喜欢，弹出窗口要求我确认是否喜欢它......然后，当我回到我的页面时，我可以看到评论对话框。但是无论我输入什么，在我点击*发布*按钮后，对话框都**不会**关闭。

在我的 Chrome 控制台中，我看到当我单击*Post*按钮时，向 发出请求`https://www.facebook.com/plugins/like/comment`，返回结果是：

```
for (;;);{"__ar":1,"payload":null} 
```

我在其他网站上比较了这种行为，很明显回报是不同的。但我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T17:08:02.013

实际上**luschn**是对的。你应该创建appID。facebook需要在点击它时计算LIKES。你知道，这很简单。也许您需要从按钮中获取一些东西：p

试试这个东西：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=null";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<span class="fb-like" data-href="https://www.facebook.com/fb-name"  data-layout="button" data-action="like"></span> 
```

appID 设置为空。这有效，但它是垃圾邮件。这仅用于实验。

这是示例页面： http: **[//developer.appacyber.net/feed/test.php](http://developer.appacyber.net/feed/test.php)** 它也适用于本地主机：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:48:15.990

通常可以通过在初始化代码中使用应用程序 ID 来解决该问题：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=xxxxxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

那是 Facebook 的垃圾邮件保护...

# xslt - 使用 xslt 确定 Graphic 的大小

> ID：13803478
> 
> 赞同：2
> 
> 时间：2012-12-10T15:01:51.537
> 
> 标签：xslt

在使用引用的图形转换一些 xml 时，我想向“大”图形添加比例属性。但是，图形没有任何尺寸信息。xslt 是否可以以某种方式“读取”图形大小？

这个：

```
<image href="sample.gif"/> 
```

应该变成这个

```
<image href="sample.gif" scale="50"/> 
```

如果`sample.gif`图形大于（宽度或高度）比“ `x`”。为了能够做到这一点，我需要“读取”图形的大小（因为没有带有/height 值的属性，假设所有图形都实际存在并且可以访问（在文件系统中）。

有没有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:20:41.413

**我认为这对于纯 XSLT**（不使用扩展函数）是不可能的。

XSLT 2.0 及更高版本具有`unparsed-text()`允许读取任何文本文件的功能，但我认为这不允许读取任何二进制代码（如 0x00）——该文件必须是文本文件。

# java - JavaFX WebEngine上的UserAgent实现方法

> ID：13803480
> 
> 赞同：4
> 
> 时间：2012-12-10T15:02:03.170
> 
> 标签：java, browser, javafx-2, javafx

如何在 JavaFX 网络浏览器中实现 useragent 标头？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:59:20.210

**在 JavaFX 8（包含在 JDK8 中）之前，此功能在 JavaFX 中不存在。**

WebEngine 的用户代理字符串在 JDK8 中是可配置的。

[JDK8 现在可用](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)。

有关更多详细信息，请参阅功能请求[允许设置自定义用户代理](http://javafx-jira.kenai.com/browse/RT-22153)。

# wordpress - 添加到图像末尾的 Wordpress 缩略图大小？

> ID：13803482
> 
> 赞同：0
> 
> 时间：2012-12-10T15:02:09.370
> 
> 标签：wordpress, wordpress-theming

我在我的网站上切换主题，图像的大小被添加到每个图像的末尾，如下所示：`http://cdn.site.com/wp-content/uploads/ruzowitzky-192x134.jpeg`这`192x134`是图像的大小，或者作为另一个例子`http://cdn.site.com/wp-content/uploads/django-unchained2-600x250.jpg`

上面的图像显示为空白，但是当我禁用 W3TC 或删除保留它的大小时，`http://cdn.site.com/wp-content/uploads/django-unchained2.jpg`它可以正常工作。我该怎么做才能使新的缩略图大小起作用？

以下是我拥有的不同尺寸：

```
//Add Featured Image to Posts
if ( function_exists( 'add_theme_support' ) ) { 
  add_theme_support( 'post-thumbnails' ); 
  set_post_thumbnail_size( 640, 321, true );
}

//Main Thumbnail Size
if ( function_exists( 'add_image_size' ) ) {
    add_image_size( 'category-thumb', 192, 134, true );
}

//Post Thumbnail Size
if ( function_exists( 'add_image_size' ) ) {
    add_image_size( 'post-thumb', 184, 126, true );
}

//Video Thumbnail Size
if ( function_exists( 'add_image_size' ) ) {
    add_image_size( 'video-thumb', 286, 151, true );
}

//Slider Thumbnail Size
if ( function_exists( 'add_image_size' ) ) {
    add_image_size( 'slider-thumb', 640, 250, true );
}

//Sidebar Thumbnail Size
if ( function_exists( 'add_image_size' ) ) {
    add_image_size( 'sidebar-thumb', 47, 47, true ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:19:39.537

1) 安装插件“ [Regenerate Thumbnails](http://wordpress.org/extend/plugins/regenerate-thumbnails/) ”并进入工具 -> Regenrate Thumbnails 然后点击页面上的按钮，它将创建您网站上以前没有的缩略图大小。

2) 清除 W3TC 缓存，进入设置，在那里你会找到一个清除缓存的选项。

# cordova - 如何在 Dreamweaver CS5.5 中升级 cordova 2.2.0？

> ID：13803484
> 
> 赞同：0
> 
> 时间：2012-12-10T15:02:11.297
> 
> 标签：cordova, upgrade, dreamweaver

在 Adob​​e Dreamweaver CS5.5 中升级 cordova 2.2.0 需要遵循哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:35:50.507

我从未使用过 Dreamweaver，但升级路径可能与 Eclipse 相同： http: [//docs.phonegap.com/en/2.2.0/guide_upgrading_index.md.html#Upgrading%20Guides](http://docs.phonegap.com/en/2.2.0/guide_upgrading_index.md.html#Upgrading%20Guides)

# objective-c - Objective-C 是否有方法（或 C 函数）返回给定对象的对象格式说明符？

> ID：13803486
> 
> 赞同：2
> 
> 时间：2012-12-10T15:02:15.630
> 
> 标签：objective-c, ios

我想编写自己的方法来比使用 NSLog 更容易地检查变量 - 我希望它成为 NSLog 的包装器，因此我需要以某种方式识别传递给我的方法的任何对象的正确格式说明符。

最好有一个像**format_specifier_for**这样的方法可以执行以下操作：

```
format_specifier_for(1) => %d
format_specifier_for(@1) => %@
and so on... 
```

**更新：**

除了接受的答案（它确实回答了原始问题）之外，还有两种可能的方法来解决这个问题：

1.  来自@Guillaume 的回答：使用来自[http://vgable.com/blog/2010/08/19/the-most-useful-objective-c-code-ive-ever-written/](http://vgable.com/blog/2010/08/19/the-most-useful-objective-c-code-ive-ever-written/)的 LOG_EXPR 方法。
2.  在定义方法时使用可*重载属性，如下所述：*[如何检查变量是否为对象？](https://stackoverflow.com/questions/10844469/how-to-check-if-a-variable-is-an-object)

我认为理想的解决方案可以借鉴这两种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:06:01.320

不，不可能有这样的功能，因为您始终可以为同一数据类型使用多个（理论上每个）格式说明符。例如，您可以使用`%@`打印 a 的值`NSString`或`%p`获取内存中的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:05:34.680

看看那个：[我写过的最有用的 Objective-C 代码](http://vgable.com/blog/2010/08/19/the-most-useful-objective-c-code-ive-ever-written/)。作者使用 C`typeof`运算符和 Objective-C`@encode`指令来做你想做的事情......

# php - php 注释 - 最小的工作示例

> ID：13803487
> 
> 赞同：3
> 
> 时间：2012-12-10T15:02:16.043
> 
> 标签：php, dependency-injection, annotations, metaprogramming

上次我检查（2008 年） php 中的注释并没有那么广泛。现在在阅读了一些材料并做了一些“谷歌搜索”之后，我仍然有点困惑。有人可以提供一个最小的工作示例来说明如何在 php 中使用注释：
让我们说我想要这样的东西工作：

```
class ClassName
{
  /**
  * @DefaultValue("test")
  */
  public $prop;
}

// so that i can do 

$kls = new ClassName();
$kls->prop // => test 
```

好久没做php了

**更新**
这个问题的目的是了解[symfony](http://symfony.com/)、[flow3](http://flow.typo3.org/)和[教义](http://www.doctrine-project.org/)等库/框架如何实现它们的注释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:11:19.347

PHP（尚）不支持注解。有[一个提议的实现的 RFC](https://wiki.php.net/rfc/annotations)，但它是否或何时会发生仍然未知。

您给出的特定示例可能会被 IDE 解释为自动完成的值，否则您可以这样做`public $prop = 'Test';`，但我想您已经知道了，这不是您的真正意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:53:24.210

PHP 不应该支持注解，它们是目前 PHP 开发人员的祸害。它们会导致很多问题：

1.  他们打破了版本控制。如果您想要在不同项目中使用两个不同配置的对象实例，即使更改的是配置而不是逻辑，它们也会成为不同的分支。

2.  它们降低了便携性。如果您在两个使用注释的项目之间移动一个类，注释可能会破坏第二个项目

3.  他们打破了封装。应用程序代码不应该关心它将如何在外部使用。注释告诉客户端代码它应该做什么，而不是让客户端代码决定。在您的 @DefaultValue 示例中，如果您在不注意注释的地方使用该类怎么办？如果尚未设置默认值，该类仍然可以工作吗？是的？不？也许？无论答案是什么，API 中都不清楚，也无法知道对象在构建后是否准备好履行其职责。

4.  它们限制了灵活性。以 Symfony 的 @Inject 为例，不可能创建具有不同注入参数的类的两个实例。

请参阅：[注释是可憎的](http://r.je/php-annotations-are-an-abomination.html "注释是可憎的")和[PHP 注释是一个可怕的想法](http://theunraveler.com/blog/2012/php-annotations-are-a-horrible-idea/ "PHP 注释是一个可怕的想法")，以更详细地解释为什么应该避免它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-18T03:32:59.477

在[PHP Manual -> Function Reference Variable and Type Related Extensions -> Reflection](http://au1.php.net/manual/en/book.reflection.php)中，在几个反射类（ReflectionClass、ReflectionMethod、ReflectionFunction、ReflectionFunctionAbstract、ReflectionProperty...）中存在一个方法 getDocComment()，您可以在其中获取文档注释块。然后按照您想要的方式处理您的评论。例子：

```
class Foo {
   private $a;
   private $b;
   ...
   /**
    * @annotation('baz')
    */
   public function bar() {
      ...
   }
}

$reflMethod = new ReflectionMethod('Foo', 'bar');

//prints 
//string(26) "/**
// * @annotation('baz')
// */"
var_dump($reflMethod->getDocComment()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:44:56.760

PHP doesn't support annotations (yet).

The only place I've used annotations in PHP that affect code flow is in phpUnit, which supports a number of annotation markers (eg `@DataProvider` and `@ExpectedException`) for handling various aspects of the test script.

That works fairly well, but isn't handled by PHP natively; phpUnit has to parse the script itself before including it and running the code normally. Fair enough for a unit test script, but not an ideal solution for a production system.

So I think the real answer is that you'll have to wait until PHP implements annotations natively. I believe there's a proposal for it, but it certainly isn't going to happen any time soon -- it's definitely not going to be in 5.5, which will be released next year. I don't think there are any fixed plans for the features in 5.6 or beyond, but if we're stretching out into at least 2014 for that, even assuming your hosting provider or server admins are willing to upgrade immediately.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-15T10:36:51.327

是的，PHP 还不支持注解，但我们可以使用 Doctrine Annotations。看看 - [https://www.doctrine-project.org/projects/annotations.html](https://www.doctrine-project.org/projects/annotations.html)

# diff - 客户端工作区中两个分支之间的差异

> ID：13803488
> 
> 赞同：2
> 
> 时间：2012-12-10T15:02:21.553
> 
> 标签：diff, perforce

我在本地工作区中有两个分支。我需要在它们之间进行比较并在文本文件中捕获文件名。

我查看了 diff 和 diff2

```
p4 diff 
```

给出本地客户端工作区中的分支与服务器上的对应分支之间的差异

```
p4 diff2 
```

只能用于获取服务器上两个分支之间的差异。

顺便说一句，如果我通过 p4v 客户端在服务器上的两个分支上执行“Diff Against”，我可以看到 diff 文件的列表。但我没有看到任何可以将文件名导入文本文件的东西。

但是，如果我通过服务器上两个分支上的命令行尝试 p4 diff2 ，我会得到 `- protected namespace - access denied.`

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:04:29.663

如果您`p4 sync`都首先分支到所需的版本，那么所有文件都在您的磁盘上并且可用于常规`diff`命令（不是`p4`子命令） - 请参阅[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?diff)。

例如：

```
diff -qr branch1 branch2 
```

可能会给你这样的输出：

```
Files branch1/newfile and branch2/newfile differ
Only in branch1: newfile2 
```

# c# - XNA (3.1) DrawUserPrimitives 和 SpriteBatch alpha 问题

> ID：13803494
> 
> 赞同：2
> 
> 时间：2012-12-10T15:02:53.343
> 
> 标签：c#, xna, vertex, spritebatch

我正在使用 XNA 3.1 制作一些东西，并且正在尝试使用 DrawUserPrimitives 创建 2D Ribbon 轨迹。我的算法只是在每一帧添加新的顶点（假设发生了一些运动），并且还遍历顶点并将它们淡出，删除不需要的顶点。这工作得很好，除了我使用 SpriteBatch 来处理许多其他图形。现在，我将整个屏幕绘制到 RenderTarget2D（出于各种原因，我无法避免），并且遇到了这个奇怪的 alpha 问题。

我遇到的问题如下所示：

![Trail 显然行为不正确](../Images/0b934dcede618e691f19b84082cc590d.png)

这应该是一条随着它消失的白色痕迹。显然这不会发生。相反，它正在褪色为图形设备的清晰颜色。绘制这条轨迹时，我暂停 SpriteBatch（通过调用 End()，然后在绘制完成后调用 Begin()），这样我就可以得到正确的深度。我用来绘制图元的效果只是一个没有什么特别之处的 BasicEffect，初始化 SpriteBatch 的代码在这里：

```
 spriteBatch.Begin(SpriteBlendMode.AlphaBlend, SpriteSortMode.Immediate, SaveStateMode.SaveState);
        graphics.GraphicsDevice.RenderState.SeparateAlphaBlendEnabled = true;
        graphics.GraphicsDevice.RenderState.AlphaDestinationBlend = Blend.One;
        graphics.GraphicsDevice.RenderState.AlphaSourceBlend = Blend.SourceAlpha;
        graphics.GraphicsDevice.RenderState.SourceBlend = Blend.SourceAlpha;
        graphics.GraphicsDevice.RenderState.DestinationBlend = Blend.InverseSourceAlpha; 
```

初始化 SpriteBatch 后的设置可确保 RenderTarget 纹理中半透明的正确着色。我的猜测是这里的某些东西导致了这个问题，但我不确定是什么。如果有人可以帮助我，我将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:20:24.840

哦……我修好了。需要将 SaveStateMode.SaveState 换成 SaveStateMode.None。

不过，我仍然想知道为什么我不能对其进行抗锯齿处理......

# android - 使用 startInstrumentation 检测 Android App

> ID：13803495
> 
> 赞同：1
> 
> 时间：2012-12-10T15:03:01.570
> 
> 标签：android, android-manifest, instrumentation

我想从测试的应用程序内部使用[仪表](http://developer.android.com/reference/android/app/Instrumentation.html "仪器仪表")接口来检测我的应用程序。我有一个自定义活动，我的每个活动都扩展了。在那我想启动仪器以获取有关应用程序的信息：

```
public class BxActivity extends Activity {
@Override
protected void onResume() {
    super.onResume();
    ...
    boolean instru = startInstrumentation(new ComponentName(BxActivity.this, InstrumentationRobot.class), null, null); 
```

恕我直言，应该使用 InstrumentationRobot.class 中的检测代码重新启动应用程序。它在同一个 Android 项目和包中。

```
public class InstrumentationRobot extends Instrumentation {
@Override
public void onCreate(Bundle arguments) {
    super.onCreate(arguments);
    Log.v("InstrRobot", "Hello from Robot");
    start();
} 
```

我已将仪表添加到清单中，如下所示：

```
 <instrumentation
        android:name="InstrumentationRobot" (class in the same pkg)
        android:targetPackage="my.package.name" />
</application> 
```

这是我的仪器的正确清单代码，所以我的小机器人向我打印出“你好”。

谢谢，索伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:11:19.313

我找到了解决方案并用正确的代码更新了我的问题。错误出现在清单文件中。

我删除了

```
<uses-library android:name="android.test.runner" /> 
```

标记和检测类名称不能以点开头，如果检测类与应用程序本身位于同一个包和 .apk 文件中。

检测标签也必须是清单的直接子代。

# git - 从 svn 切换后 Git 分支未合并

> ID：13803503
> 
> 赞同：3
> 
> 时间：2012-12-10T15:03:56.797
> 
> 标签：git, svn, merge, git-merge, subgit

我使用[subgit](http://subgit.com/)将旧的 svn 存储库转换为 git（包括完整的历史记录、分支、标签）。经过一些最初的麻烦后，我让它工作了，它几乎完美地工作了。除了分支似乎没有合并回主干/主分支：

![在此处输入图像描述](../Images/798ce786b3feeead4839c7319f519ce3.png)

可以看到，git知道我分支了绿色的master得到了黑色的分支。但它似乎不知道这个分支在 commit 时被合并回了 master `73653d1`。看起来我放弃了那个分支，并在主分支的一次提交中独立实现了所有这些。

这不是正确合并的样子，对吧？有没有办法解决这个问题？请注意，这大约是历史上的 50 次提交，除了看似缺少的参考之外，代码还不错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T17:20:32.647

所以，

r141：将 ^/trunk 复制到 ^/branches/restructure
r142：修改 ^/branches/restructure
...
r148：修改 ^/branches/restructure
r149：将 r142:148 从 ^/branches/restructure 合并到 ^/trunk

也就是说，没有将 ^/branches/restructure 的 r141 合并到 r149 的 ^/trunk 中。

您可能知道，Git 中的合并提交包括其每个父项的全部历史记录。这就是为什么 SubGit 在创建合并提交时会检查所有必要的修订是否已合并到相应的分支中。

在您的情况下，SubGit 将 r141 检测为 ^/branches/restructure 历史中的一个空白，这就是为什么它没有将此分支作为合并父级添加到 commit 的原因`73653d1`。

有人可能会争辩说：

> r141 没有引入任何文件或目录修改，那么为什么 SubGit 需要将此修订包含到 svn:mergeinfo 中？

好吧，通常情况下，单个 SVN 修订版可能会创建一个分支*并*修改其中的任何文件。这就是为什么 SubGit 仍然检查分支历史中的每个修订。

但是，SubGit 可能更聪明一些，它会检查创建分支的修订是否修改了其中的任何文件，因此对于您的情况，SubGit 会自动创建合并提交。我们将来可能会实施；这是我们跟踪器[的问题](http://issues.tmatesoft.com/issue/SGT-556)。

如何修复 Git 中的历史记录？

由于 Subversion 不允许对现有历史进行任何修改，因此您必须创建一个新版本，将缺失的 r141 添加到 ^/trunk 的 svn:mergeinfo 属性中。考虑为此执行以下操作：

```
$ svn switch ^/trunk .
$ svn merge --record-only ^/branches/restructure@148 .
$ svn commit -m 'Merged r141 of restructure changes into the trunk' 
```

如果您保持 Subversion 和 Git 存储库同步，SubGit 应该自动将此修订转换为合并提交。否则，您可以从头开始翻译历史记录，或者只需将 SubGit 再次安装到同一个 SVN 存储库中。

更新：
如果不再需要 SVN 同步，如何修复 Git 存储库中的历史记录？

`73653d1`您可以使用以下命令重写从提交开始的部分 Git 历史记录：

```
git filter-branch --parent-filter \
'test $GIT_COMMIT = 73653d1 && echo "-p 2ec9e8c -p 5c237f9" || cat' master 
```

注意：使用完整的提交 ID 而不是缩写的`73653d1`,`2ec9e8c`和`5c237f9`.

此命令应将提交添加为要`5c237f9`提交的合并父`73653d1`级。

希望有帮助。

# php - $_POST 输出“striptag”

> ID：13803504
> 
> 赞同：0
> 
> 时间：2012-12-10T15:03:59.027
> 
> 标签：php, validation

我遇到了 $_POST 的问题，我真的不明白......我有一个带有隐藏输入的表单，隐藏输入的值来自数据库。

我正在这样做：

```
echo "<input type=\"hidden\" name=\"reactie\" value=\"$naam\" />"; 
```

$naam 是之前分配的变量：注意：子数组包含来自用户反应的数据。

```
foreach($gegevens as $sub_array) {
     $naam = $sub_array['naam'];
} 
```

当我只是回显 $naam 时，它给了我它应该具有的价值。

当我想获取隐藏输入的值时，它只是输出'striptag'。当我看 html 代码时，隐藏输入的值是它应该是的，而不是'striptag'。

html中的输出：

```
<input type="hidden" name="reactie" value="school" /> 
```

使用它来获取隐藏输入的值：

```
if (isset($_POST['submitted'])) {
    echo $_POST['reactie'];
} 
```

当我将文本放入隐藏输入的值时，它可以工作。为什么我不能在里面放一个字符串变量？

当我发布表格时我应该得到的是“学校”，但我得到的是“striptag”。

此表单的目的（最后）：列出所有用户评论，当按下按钮时，反应将被删除。我的整个表格：

```
<form action = "guestadmin.php" method = "post">

<?php

include ('conData.php');
$sql = new ConData();
$sql->maakConnectie(); 
$gegevens = $sql->haalGegevensOp("select * from gastenboek");

foreach($gegevens as $sub_array) {
    $naam = $sub_array['naam'];
    $email = $sub_array['email'];
    $tekst = $sub_array['tekst'];
    $datum = $sub_array['datum'];

    echo "<div class = \"com\"> 
        <fieldset class= \"field\"> 
        <legend >Geschreven op $datum door $naam </legend>";

    echo "$tekst</fieldset>
        <input name = \"submitted\" type=\"submit\" 
            value = \"verwijder deze reactie\" /></div>";
    echo "<input type=\"hidden\" name=\"reactie\" value=\"$naam\" />";
    echo "<br \>";
}
?>

</form> 
```

如果只有一条评论，则会以 html 格式输出：

Geschreven op 2012-12-09 door Arnout dit is een test

我真的不明白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:04:19.030

有2个大问题：

1.  所有条目都以相同的形式输入。这意味着您有多个具有相同名称的表单字段，它们都相互覆盖。您可以通过将表单标签放在循环中来解决这个问题，以便每个条目都有自己的表单；
2.  您没有准备数据以输出到 html。这意味着数据中的`<`,`>`等符号可以并且将会破坏您的 html。您可以通过使用（对于每个数据字段）来解决这个问题：`$naam = htmlspecialchars($sub_array['naam']);`。

# java - 为什么 String 类有复制构造函数？

> ID：13803505
> 
> 赞同：14
> 
> 时间：2012-12-10T15:03:59.980
> 
> 标签：java

> **可能重复：**
> [Java 中表达式“new String(...)”的目的是什么？](https://stackoverflow.com/questions/390703/what-is-the-purpose-of-the-expression-new-string-in-java)

如果不可变类对象的副本等于原始类，那么为什么`String`Java 中的类有一个复制构造函数？这是一个错误还是这个实现背后有原因？在 Java 文档中指定：

```
/**
 * Initializes a newly created {@code String} object so that it represents
 * the same sequence of characters as the argument; in other words, the
 * newly created string is a copy of the argument string. Unless an
 * explicit copy of {@code original} is needed, use of this constructor is
 * unnecessary since Strings are immutable.
 *
 * @param  original
 *         A {@code String}
 */
 public String(String original) {
 ....
 ....} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T15:05:04.407

复制字符串的主要原因是*“修剪包袱”*，即将底层 char 数组修剪为只需要的部分。

底层的 char 数组可能太大，主要是因为当你通过调用创建字符串时`substring`，char 数组可以在新的字符串实例和源字符串实例之间共享；偏移量指向第一个字符并包含长度。

我使用的表达式*“trim the bag”*取自 String 复制构造函数的源代码：

```
 164       public String(String original) {
  165           int size = original.count;
  166           char[] originalValue = original.value;
  167           char[] v;
  168           if (originalValue.length > size) {
  169               // The array representing the String is bigger than the new
  170               // String itself.  Perhaps this constructor is being called
  171               // in order to trim the baggage, so make a copy of the array.
  172               int off = original.offset;
  173               v = Arrays.copyOfRange(originalValue, off, off+size);
  174           } else {
  175               // The array representing the String is the same
  176               // size as the String, so no point in making a copy.
  177               v = originalValue;
  178           }
  179           this.offset = 0;
  180           this.count = size;
  181           this.value = v; 
```

这是许多开发人员忘记的事情，并且很重要，因为小字符串可能会阻止更大的 char 数组的垃圾。请参阅我已经指出的这个相关问题：[Java 不是垃圾收集内存](https://stackoverflow.com/questions/10951812/java-not-garbage-collecting-memory)。许多开发人员认为，Java 设计人员决定使用这种 C 编码人员熟悉的旧优化技巧实际上弊大于利。我们中的许多人都知道它，因为我们被它咬住了，并且确实不得不查看 Sun 的源代码以了解发生了什么......

正如 Marko 指出的那样（见下面的评论），在 OpenJDK 中，从 java 7 Update 6 开始，`substring`不再共享 char 数组`String(String)`，因此构造函数是无用的。但它仍然很快（实际上甚至更快），并且由于此更改尚未传播到所有 VM（可能不是您的所有客户），我建议`new String(substring)`在旧行为证明其合理性时保留此最佳实践。

# objective-c - 动画之前的代码直到动画完成才执行？

> ID：13803506
> 
> 赞同：0
> 
> 时间：2012-12-10T15:04:00.193
> 
> 标签：objective-c, ios, multithreading, core-animation

所以，我在我的一个方法中有这段代码，它生成一个新的随机词，在 web 视图中显示它，然后动画页面卷曲以从当前词过渡到新词。理想情况下，这应该卷曲旧视图，并在下面的页面上显示新视图。

目前，动画出现（页面卷曲），然后在卷曲完成后加载新内容（意味着卷曲下方的页面上有旧单词，直到卷曲完成，此时出现新内容）。我不知道为什么会这样，谁能给我解释一下？可能与我的`[dictionary]`对象返回的数据不够快有关吗？

```
NSString *word = [dictionary randomWord];
NSString *htmlDefinition = [dictionary getHTMLFor: word];
[self.randomDefinitionWebView loadHTMLString: htmlDefinition baseURL: nil];

[UIView transitionWithView: self.randomDefinitionWebView
                      duration: 1.5
                       options: UIViewAnimationOptionTransitionCurlDown
                    animations: ^ { }
                    completion: nil];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:08:16.390

UIWebview 在另一个线程中加载 HTML。当它完成时，它告诉它的委托`webViewDidFinishLoad:`

所以动画将首先显示。

您可以将 webview 的委托设置为自己并在`webViewDidFinishLoad:`

# javascript - 如果包装元素为 -4000 像素，则左警报

> ID：13803507
> 
> 赞同：0
> 
> 时间：2012-12-10T15:04:09.427
> 
> 标签：javascript, jquery, css, html

有一个绝对的噩梦，感觉就像把我的电脑砸了！

我试图查看我的 .wrapper div 是否在屏幕外减去 X 像素。

如果是我想运行一个功能，如果不是，什么也不做。到目前为止，我已经完成了以下操作，但它根本不起作用。

```
 var width = $(window).width();

  setInterval(function(){

  if (parseInt($('.wrapper').css('left')) <= parseInt(width*2)){
        alert ('f**k');
    } else {
        alert ('off');
    }

  },1000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:08:00.060

这对我有用，看起来你忘了把它包装在一个文档中。准备好了：[jsfiddle](http://jsfiddle.net/UX3Rp/)

```
$(document).ready(function() {
  var width = $(window).width();

  setInterval(function(){
  if (parseInt($('.wrapper').css('left')) <= parseInt(width*2)){
        alert ('f**k');
    } else {
        alert ('off');
    }

  },1000); 
});​ 
```

# c# - 有人知道用于检查对象的 Windows 窗体控件吗？

> ID：13803508
> 
> 赞同：1
> 
> 时间：2012-12-10T15:04:09.603
> 
> 标签：c#, winforms, visual-studio-2008, controls

我有一个 WCF Web 服务，它返回许多不同的对象列表，根据 XML 模式格式化。

我有一个简单的 winforms 测试平台来启动这些方法，我可以使用代码中断来检查使用 Quick Watch 的输出。

有没有人知道可以像 Visual Studio 一样获取对象并显示有关它的有用信息的 win 表单控件？

放在表单上会非常方便，这样我就可以检查在无法调试的远程站点上运行的已安装服务的输出。

目前，我唯一的选择是编写一个巨大的获胜表单应用程序，自定义显示每个响应的内容。

目前我最好的想法是将响应序列化为 XML 并将其显示在名为 ScintillaNET 的语法着色控件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:05:22.777

它称为[PropertyGrid](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx)控件。

# css-transitions - rotate3d 或 matrix3d 过渡在 IE10 中无法正常工作

> ID：13803515
> 
> 赞同：1
> 
> 时间：2012-12-10T15:04:28.867
> 
> 标签：css-transitions, css-animations, internet-explorer-10

我尝试在IE10中制作翻页效果。

当我使用它进行转换 `rotateY(180deg)`时效果很好，但`rotate3d(0,1,0,180deg)`它会在 90 度时进行奇怪的翻转（仅在 IE10 上！）。

看看 IE10 上的这个 jsfiddle：http: [//jsfiddle.net/wG6gk/2/](http://jsfiddle.net/wG6gk/2/)

这是 IE 错误还是容器需要任何额外的 CSS 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:40:40.207

Css3 处于草稿模式，每个浏览器都可以对 Css3 有自己的看法。我不认为这是一个错误。根据我在 css3 中的经验`rotate3d`，是硬件加速的 css3 属性之一（比`rotateX`和更加速`rotateY`）。但在这种情况下，您不能使用`rotate3d`IE，因为它不会按照您期望的方式运行。

# android - Android/iOS 设备是否支持这些编解码器/容器？

> ID：13803516
> 
> 赞同：0
> 
> 时间：2012-12-10T15:04:33.220
> 
> 标签：android, ios, streaming, h.264, aac

我搜索了高低，但如果更新的 Android/iOS 设备附带可以*从应用程序内部*流式传输媒体（具有以下特征）的媒体播放器，我无处可寻：

*   通过 UDP/IP 流式传输 MPEG-TS
*   使用 h.264 编解码器的视频
*   使用 AAC 编解码器的音频

这甚至可能吗？如果不是，为什么（容器不兼容，或其他原因）？如果是这样，如何（他们需要什么软件/媒体播放器）？如果可能的话，我需要一种从应用程序内部打开该媒体播放器的方法，但不知道该怎么做。提前致谢。

# jasper-reports - 在下一页打印详细记录，尽管上一页有空间

> ID：13803517
> 
> 赞同：1
> 
> 时间：2012-12-10T15:04:35.187
> 
> 标签：jasper-reports, ireport

我有以下问题。我有子报告的主要报告。子报表具有带有组页眉和页脚的详细信息带，其中 keepTogether = true。每个细节可以有不同的行数。然后我运行报告，结果 PDF 的第一页上有：

*   详细记录编号 1
*   详细记录编号 2
*   空白空间

在下一页有

*   详细记录编号 3

但是细节 3 记录的高度如此之高，以至于它可以在第一页上打印为：

*   详细记录编号 1
*   详细记录编号 2
*   详细记录编号 3

下一页没有记录。但事实并非如此。为什么 ？也许有任何解释，你能帮我吗？当我将页面高度设置为比 A4 纸张尺寸长时，第一页上有所有三个记录。取决于子报表的高度，因为它是设计的？

谢谢

# php - 将Android中的图片上传到MySQL数据库

> ID：13803522
> 
> 赞同：1
> 
> 时间：2012-12-10T15:05:07.707
> 
> 标签：php, android, mysql

我目前正在开发带有个人资料图片的注册表单。用户需要从图库中浏览图片并从中选择一张作为个人资料图片。之后，用户将通过 HTTP post 提交表单，以使用 PHP 脚本将整个信息插入 MySQL 数据库。

现在，我在创建表单以在我的 android 模拟器中上传图片时遇到问题。我不知道如何创建一个。

目前，我将 SDK 10 用于 android 版本 2.3.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:10:21.157

检查本教程。它将帮助您： http: [//www.coderzheaven.com/2011/04/25/android-upload-an-image-to-a-server/](http://www.coderzheaven.com/2011/04/25/android-upload-an-image-to-a-server/)

# regex - 将变量传递给 R 中的正则表达式的替代方法是什么？

> ID：13803524
> 
> 赞同：4
> 
> 时间：2012-12-10T15:05:17.743
> 
> 标签：regex, r, variables

我从某些文本中删除短字和长字的代码是：

```
# Remove Words based on lowerCutOff & upperCutOff
removeByLength<- function(text,lowerCutOff=2,upperCutOff=12){
  text<- gsub("\\b[a-zA-Z0-9]{1,lowerCutOff}\\b|\\b[a-zA-Z0-9]{upperCutOff,}\\b"," ",text)
  return(text)
} 
```

如何在不硬编码上下截止点的情况下实现所需的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:20:15.597

用于`paste`连接字符串以创建模式：

```
removeByLength<- function(text,lowerCutOff=2,upperCutOff=12){
  pattern <- paste("\\b[a-zA-Z0-9]{1,",lowerCutOff,
                 "}\\b|\\b[a-zA-Z0-9]{",upperCutOff,",}\\b", sep="")
  text <- gsub(pattern, " ", text)
  return(text)
} 
```

# user-interface - 如何使框架填充整个可用空间，并使其内部的小部件粘在左侧

> ID：13803529
> 
> 赞同：1
> 
> 时间：2012-12-10T15:05:26.060
> 
> 标签：user-interface, tcl, tk

我想要一个从左到右填满整个屏幕的框架（因为边框浮雕），并且其中的小部件粘在左侧。但是当我放在`-sticky nswe`框架和小部件本身上时，框架占据了整个窗口，但小部件与框架**中心**`-sticky nsw`的左侧对齐，而不是在它的最左侧：

 **![在此处输入图像描述](../Images/a61fda73f10dfdb98570f7137edf3ac6.png)

我希望它看起来像（用油漆创建）：

![在此处输入图像描述](../Images/681da2ce20006a26ca0bd71af2bf6d7e.png)

创建它的代码是（对于上框架，带有文件扩展名）：

**编辑：**添加了更多代码，并修复了列和行的编号问题

```
proc eyes_view_create_file_extention_bar {frm_main listOfPossibleExtensions} {
    #Files Extention Bar
    set files_cb ::eyes_view_file_ext_arr_cb
    grid [set file_frm [frame $frm_main.file_frm -relief groove -bd 2]] -row 0 -column 0 -columnspan 2 -sticky nswe
    set file_lbl [label $file_frm.lbl -text "File Extenctions to Show:"]
    set columns 0
    foreach file_ext $listOfPossibleExtensions {
        set cb [checkbutton $file_frm.[regsub -all {\.} $file_ext {}] -text $file_ext -variable ${files_cb}(${file_ext}) -command [list _eyes_view_update]]
        set ${files_cb}(${file_ext}) 0
        grid $cb -row 1 -column $columns -sticky wsn
        incr columns
    }
    grid $file_lbl -row 0 -columnspan $columns -sticky wsn    
}

proc eyes_view_main_widget {base listOfExternalVarsAndValues listOfPossibleExtensions} {

    wm title $base "Eyes Viewer"
    array set [set files_cb ::eyes_view_file_ext_arr_cb] {}
    array set [set vars_cb ::eyes_view_vars_arr_cb] {}
    set frm_main [frame  $base.main_frm]
    pack $frm_main -expand 1 -fill both

    #graph
    set g_frm [frame $frm_main.graph]
    grid $g_frm -row 2 -column 1 -sticky nsew
    set g [eyes_graph_widget $frm_main.graph graph]
    #splits table

    grid [set split_frm [frame  $frm_main.tbl_split]] -row 2 -column 0 -sticky nswe
    set apply_button    [button $split_frm.apply -text "Apply" -command [list _eyes_view_update]]
    set split_tbl_frm   [frame  $split_frm.tbl_frm]

    set split_table [sparam_table_widget $split_tbl_frm split_table]

    #file extensions frame, vars frame & legend
    set file_frm [eyes_view_create_file_extention_bar $frm_main $listOfPossibleExtensions]
    set var_frm  [eyes_view_create_vars_values_bar $frm_main $listOfExternalVarsAndValues]
    set legend_frm [eyes_view_create_legend_frame $frm_main]

    grid $split_tbl_frm -row 0 -sticky nwse
    grid $apply_button  -row 1 -sticky nwse

    grid columnconfigure $frm_main 0 -weight 0
    grid columnconfigure $frm_main 1 -weight 1
    grid rowconfigure    $frm_main 0 -weight 0
    grid rowconfigure    $frm_main 1 -weight 0
    grid rowconfigure    $frm_main 2 -weight 1
    grid rowconfigure    $frm_main 3 -weight 0

    grid rowconfigure    $split_frm 0 -weight 1
    grid rowconfigure    $split_frm 1 -weight 0
    ...
    return [list $g $split_table $legend_frm $frm_main]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:25:43.803

您需要告诉父窗口 ($frm_main) 您希望它如何将几何更改传播到其子窗口。在这种情况下，您可能想要：

```
grid columnconfigure $frm_main 1 -weight 1
grid rowconfigure $frm_main 1 -weight 1 
```

这表示当父大小发生变化时为第 1 行第 1 列提供新空间。值得仔细阅读这方面的文档，并使用一些具有不同颜色的简单框架（框架 .f -背景红色等）来很好地了解网格的工作原理。

您的数组处理在示例中也被破坏了。-variable 选项采用变量名称，因此您只需要`-variable files_cb($file_ext)`并且在尝试设置数组值时也不想取消引用。试试`set files_cb($file_ext) 0`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:26:44.637

我无法重现您的问题。在我修复了所有变量之后，我得到了你想要的行为。可能是因为这不是一个完整的脚本，而且遗漏的部分还有些内容。无论如何尝试以下操作：

改变

```
grid $file_frm -row 1 -column 1 -columnspan 2 -sticky nswe 
```

到

```
grid $file_frm -row 1 -column 1 -columnspan 2 -sticky nswe
grid anchor $file_frm w 
```**

# symfony - FriendsOfSymfony / FOSUserBundle 另一个 web 服务器端口

> ID：13803533
> 
> 赞同：0
> 
> 时间：2012-12-10T15:05:38.450
> 
> 标签：symfony, fosuserbundle

我在生产服务器上的非标准端口 (22280) 上运行 Apache。可在地址申请`myserver:22280/myapplication/`

当我想使用 FOSUserBundle 登录我的应用程序时。我在地址上导航`myserver:22280/myapplication/`。防火墙在页面上重定向我`myserver/myapplication/login`（没有端口）。

注销后在页面 myserver/myapplication/ 上导航页面（再次没有端口）。

应用程序中的所有其他链接和重定向都可以正常工作。

问题出在哪里？

```
htaccess file:
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /myapplication/app.php [QSA,L]

Apache alias:
Alias /myapplication/srv/www/htdocs/myapplication/web
<Directory "/srv/www/htdocs/myapplication/web">
  AllowOverride All
  Allow from All
  Options +FollowSymLinks
</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:44:01.287

非标准端口必须在 app/config.yml 中声明：

```
framework:

   ...

    # router configuration
    router:
        ...
        http_port:            22280
        https_port:           1443

    ... 
```

# javascript - 在 SilverStripe 2.4.7 中使用 Javascript

> ID：13803534
> 
> 赞同：1
> 
> 时间：2012-12-10T15:05:42.490
> 
> 标签：javascript, jquery, silverstripe

我将 SilverStripe 2.4.7 与 DataObjectManager 一起使用。我正在尝试为弹出窗口添加我自己的自定义验证，但奇怪的事情一直在发生。当我添加自己的 Javascript 类时，弹出窗口上的日期选择器停止工作。我不知道为什么，因为我添加的 Javascript 没有应用于数据选择器。

我在用

```
 function getRequirementsForPopup() {
       Requirements::javascript('mysite/code/js/jquery.js');
       Requirements::javascript('mysite/code/js/validation.js');
    } 
```

添加我自己的Javascript类。这在另一个弹出窗口中效果很好，但是那个没有日期选择器。我的印象是向 CMS 添加自定义 Javascript 没有问题，所以我想知道这是否与 DataObjectmanager 或日期选择器中的 Javascript 冲突。

我会很感激任何人可以给我的任何建议。我在 SilverStripe 中看到了其他一些关于 Javascript 的帖子，但它们没有解决这里发生的事情。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:42:00.037

dataobject_manager 加载它自己的 jquery 文件。当您添加自己的文件时，它会与 dataobject_manager 中的现有文件发生冲突。

您可以查看从 firebug 加载的库。为了做到这一点，

1.  打开萤火虫
2.  点击“脚本”
3.  单击“内联”，将出现一个下拉菜单。如果您键入 jq，则将显示所有包含 jq 名称的文件。它让您了解正在加载的内容。

现在回到您的问题，如果您想使用现有加载的 JQuery，则添加您的自定义文件和验证代码。否则，这里是一个如何显示自定义时间选择器的示例（[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)）

*   **First, you have to stop/block jquery files from dataobject_manager, if you planning to use your own. Something like this in getRequirementsForPopup() function. Note: It depends which files are loading and which one you want to disable after seeing loaded files in firebug.**

    requirements::block("http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"); requirements::block("dataobject_manager/javascript/dom_jquery_ui.js"); requirements::block("sapphire/thirdparty/jquery-ui/jquery-ui-1.8rc3.custom.js"); requirements::block("dataobject_manager/javascript/dataobject_manager.js");` requirements::block("dataobject_manager/javascript/dataobject_manager_popup.js");

*   **Then, you have to include your own jquery files**

    Requirements::javascript('azeem/javascript/jquery-ui/js/jquery-1.7.2.min.js'); Requirements::javascript('azeem/javascript/jquery-ui/js/jquery-ui-1.8.23.custom.min.js'); Requirements::javascript('azeem/javascript/timepicker/jquery-ui-timepicker-addon.js'); Requirements::javascript('azeem/javascript/timepicker/azeem-timepicker.js');
    Requirements::css('azeem/javascript/jquery-ui/css/smoothness/jquery-ui-1.8.23.custom.css'); Requirements::css('azeem/css/timepicker/jquery-ui-timepicker-addon.css');

Here azeem-timepicket.js contains the custom code which you want to add to your fields

```
//JQuery UI datepicker and timepicker for azeem Event End Date/Time Field
$j('#DataObjectManager_Popup_AddForm_EventEndDate-date, #DataObjectManager_Popup_DetailForm_EventEndDate-date').datepicker({
    dateFormat: 'dd/mm/yy'
});

$j('#DataObjectManager_Popup_AddForm_EventStartDate-time, #DataObjectManager_Popup_DetailForm_EventStartDate-time').timepicker({
    timeFormat: 'hh:mm'
}); 
```

*   **In getCMSFields() function, you have to disable default date picker option, in case you are using date/datetime field.**

    $startDate = new DatetimeField('StartDate', 'Start Date / Time'); $startDateField = $startDate->getDateField(); $startDateField->setConfig('showcalendar', false); $startTimeField = $startDate->getTimeField(); $startTimeField->setConfig('showdropdown', false); $fields->addFieldsToTab('Root.Main', $startDate);

*   You can verify again in firebug, whether you custom and all other files are loading or not. Same things can be done for your own validation.

Hope it will help.

# java - 使用 java regex 查找所有以 '@' 开头并以 ' ' 结尾且不包括 ' ' 和 '@' 的字符串

> ID：13803537
> 
> 赞同：0
> 
> 时间：2012-12-10T15:05:46.273
> 
> 标签：java, regex

我需要在下面的字符串中获取所有以（空格）开头`@`和结尾的 字符串（非空） `' '`：

```
String s = "@test1 @test2 @test3  @test4 @@ @test5"; 
```

我希望我能得到所有`"test1", "test2", "test3", "test4", "test5"`的字符串。

如何用 java regx 做到这一点？多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:07:48.623

您可以使用以下正则表达式

```
@\w+ 
```

`\w`类似于`[a-zA-Z\d_]`

`\w+`匹配 1 到多个来自的字符`[a-zA-Z\d_]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:28:28.100

Java 正则表达式`(?<=@)[^@ ]+(?= )`应该可以解决问题。根据 Regex Planet 的 Java 正则表达式页面，正则表达式匹配`test1`,`test2`和. (不以空格结尾，因此不匹配。)`test3``test4``@test5``test5`

如果您也可以匹配前导`@`s 和尾随`s，则可以使用更简单的 Java regex `@[^@ ]+`。`

 `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:03:03.280

最后我用下面的代码解决了它：

```
Pattern pattern = Pattern.compile("@\\p{L}+"); 
````

# ios - 如何在 iOS 中切换回镜像？

> ID：13803539
> 
> 赞同：2
> 
> 时间：2012-12-10T15:05:45.820
> 
> 标签：ios, mirroring

[我在 Apple 关于Presenting Content on an External Display](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/WindowAndScreenGuide/UsingExternalDisplay/UsingExternalDisplay.html#//apple_ref/doc/uid/TP40012555-CH3-SW1)的文档中阅读了有关在外部屏幕上显示另一个视图（并且这会禁用镜像）的信息。但似乎当第二个窗口设置为屏幕时，没有办法让屏幕恢复到镜像第一个窗口。

UIScreen 对象上有一个名为 mirroredScreen 的属性，如果设备能够镜像并且镜像仍处于活动状态，则该属性被描述为包含镜像屏幕。当另一个窗口与 UIScreen 关联时，它变为 nil。但它是一个只读属性，没有其他方法可以将其设置为镜像 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T06:47:11.950

我完全一样，导致黑屏没有重置。对我来说，以下代码的组合起到了作用。首先，重置第二个窗口，其次，重新分配主屏幕以使其再次与触摸一起工作。

```
// Reset the second window
self.secondWindow.frame = CGRectZero;
self.secondWindow.screen = nil;
self.secondWindow = nil;

// Reassign your main screen to make it work with touches again
UIWindow *mainScreen = [[[UIApplication sharedApplication] windows] firstObject];
[mainScreen makeKeyAndVisible]; 
```

# mysql - MySQL QUERY 条件

> ID：13803541
> 
> 赞同：-2
> 
> 时间：2012-12-10T15:05:49.107
> 
> 标签：mysql, sql

我尝试搜索我的网站。示例：字段名称 = 城市，如果城市为空，我的查询看起来：`SELECT * FROM TABLE WHERE CITY = ALL;`

我不知道怎么写：`CITY = ALL`正确，表达`CITY is not null`会很复杂，因为我应该被删除`=`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:06:44.990

`where`完全删除

```
SELECT * FROM TABLE 
```

或者

```
SELECT * FROM TABLE WHERE CITY = @searchstring or @searchstring is null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:06:52.763

试试这个：

```
SELECT *
FROM Table 
WHERE @SearchParam IS NULL OR City = @SearchParam 
```

如果他的参数`@SearchParam`以一个值传递给查询，`NULL`那么它将返回表中的所有数据，否则它将搜索具有此参数的城市。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:17:17.223

If you don't care about very optimized queries, you can use a like operator compare with

```
City like '%@exp' 
```

If exp is empty the query returns all Cities.

I personally do not recommend this :)

All the best

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:07:51.940

如果你得到了所有这些，为什么还要加入这个`WHERE`子句呢？

`SELECT * FROM TABLE`

请注意，您应尽可能避免使用`SELECT *`。由于这是一种资源浪费，因此请始终明确返回您的列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T15:07:59.737

也许是这样的？

```
SELECT * FROM TABLE WHERE (CITY = SOMETHING) OR (SOMETHING is null); 
```

# facebook - facebook应用程序：获得生日

> ID：13803544
> 
> 赞同：0
> 
> 时间：2012-12-10T15:05:52.267
> 
> 标签：facebook

我想知道如何获取 facebook 用户的生日日期。这是处理 facebook api 的代码：

```
<?php require 'src/facebook.php';
define("FB_APP_ID","***");
define("FB_SECRET","***");
$facebook = new Facebook(array(
  'appId'  => FB_APP_ID,
  'secret' => FB_SECRET,
  'cookie' => true, 
));
$currentUser = $facebook->getUser();
if($currentUser) {
try
{
    $facebook_profile = $facebook->api('/me');
    $friends_fields = $facebook->api('/me/friends');
}
catch (FacebookApiException $e)
{
    print_r($e);
    $user = null;
}
}

$loginUrl = $facebook->getLoginUrl(
array(
    'scope' => 'user_birthday, birthday, date_birthday, email, offline_access, publish_stream'
)
);
$logoutUrl  = $facebook->getLogoutUrl();
?> 
```

我试过 $facebook_profile['user_birthday'] 和 $facebook_profile['birthday'] 但它不起作用。

我不知道该怎么办？你能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:27:43.077

可能有不止一种方法可以做到这一点，但您应该能够通过[SDK`api()`方法](https://developers.facebook.com/docs/reference/php/facebook-api/)从 FQL 调用中获取用户的生日：

```
$result = $facebook->api(array(
    'method' => 'fql.query',
    'query' => 'SELECT birthday_date FROM user WHERE uid = me()',
));

$birthday = $result[0]['birthday_date']; 
```

您需要具有`user_birthday`或`friends_birthday`权限才能读取`birthday`and`birthday_date`字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:33:23.443

生日的正确权限是`user_birthday`

验证您是否有权限

```
$permissions = $facebook->api('/me/permissions');
$permissions["data"][0]["user_birthday"]; 
```

看到你有`facebook_profile`，你应该只转储那个响应的内容，看看你有什么。

还要确保用户*确实*设置了他/她的生日......

# directx - 将两个图像合并（混合）为最终图像，但避免当前内容

> ID：13803549
> 
> 赞同：0
> 
> 时间：2012-12-10T15:06:13.743
> 
> 标签：directx, alphablending, alpha-transparency

当分层多个时，我必须至少将它们与“空”图像或背景组合一次。但没有什么比得上“空”。它是透明的黑色或透明的白色。即使是完全透明的，也会有一种在显示时通常会被忽略的颜色。

我想要以下内容：

```
Destination = Image1 + Image2 
```

为此，我实际上是这样做的：

```
Clear(Destination, 0); // Clear it with transparent black
Blend Image1 over Destination
Blend Image2 over Destination 
```

虽然目的地是透明的黑色，但黑色有助于最终结果，这是我想避免的。我可以用透明的白色清除目的地，但它只适用于这个例子，并且对较暗的图像产生同样的问题。

![结合问题](../Images/ac8994c90d20aa41e66fb252f22869a5.png)

我理解为什么结果是这样的：directx 混合公式设置如下：

```
BlendOp = Add;
SrcBlend = SrcAlpha;
DestBlend = InvSrcAlpha; 
```

目的地的 alpha (DestAlpha) 在这个公式中根本没有考虑。我能做些什么来解决这个日常问题，即在将两个图像渲染到其他地方之前将它们混合在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:56:38.530

Afaik 您无法通过正常的混合操作来实现这一点，但也许您可以编写一个适当的着色器来为您进行混合。您在一个额外的纹理上作为渲染目标进行渲染，并在像素着色器中设置这个纹理。现在您将写入的 alpha 值分支，如果 background-alpha 为零，则写入 imagecolor，否则已经在该像素上写入了图像，您可以在着色器中进行正常的 alpha 混合。使用此分支，您可以检测像素是空的还是之前写入的，然后防止黑色产生任何影响。希望这可以帮助 ：）

一个小例子来形象化我的意思：

```
float4 targetColor = tex2D(backgroundSampler,screen.TexCoord);
float4 diffuse = tex2D(imageSampler,image.TexCoord);
// overwrite black background
if (targetColor.a == 0.0) {
  return diffuse;
}
// do alphablending
return targetColor*(1-diffuse.a)+diffuse*(diffuse.a); 
```

# build - 为嵌入式软件构建 (CI) 服务器

> ID：13803550
> 
> 赞同：3
> 
> 时间：2012-12-10T15:06:15.830
> 
> 标签：build, embedded, continuous-integration, build-automation

我想问一下您为嵌入式系统构建服务器的经验。你在用什么（如果有的话），什么是好的方面和坏的方面。

我们主要为没有操作系统的微控制器开发。

目前我正在尝试使用 Jenkins，并且我的构建正在运行。但是我对项目结构有一些问题。当我希望所有插件都能正常工作时，我需要扁平的工作结构。但是我们很少有并行开发的项目，然后工作视图开始变得混乱。我试过文件夹，但比一些插件停止工作。

我想建立一个管道，它是顺序运行的，但里面有并行作业。例如。提交阶段有：编译、lint 检查、样式检查、单元测试。所有这些都可以并行运行，并且当所有都成功时执行下一阶段。

我现在需要构建服务器的东西：

*   构建管道支持
*   基于LDAP的用户授权
*   并行作业执行
*   分层项目（项目/配置组）
*   来自 xUnit、Lint、编译器警告、机器人框架的报告。
*   从站/代理支持，从站的标签

*   基于 ldap 组的权限

*   每个组/项目的权限

我愿意接受任何建议，开源和商业。我在看 Bamboo 的视频看起来很不错，但我还没有尝试过。

我们有两个开发团队，正在开发不同的项目。将项目分组为团队和权限为组可能会很好。一个组的成员不应修改其他组的构建。但它比“必须拥有”更“拥有”。

**团队城市**

我尝试使用 TeamCity。构建构建管道比在 Jenkins 中更容易，只需单击添加步骤。

我发现困难的一件事是在一种配置中并行执行步骤。例如，提交后我想并行运行 Lint、单元测试、编译以节省一些时间。我找到了[解决方案](https://stackoverflow.com/questions/8970603/how-do-i-improve-teamcity-build-performance)，但它使管道更难查看和维护。

TeamCity 支持项目中的多种配置，以解决作业分组问题。我没有找到对项目进行分组的选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:25:07.013

[TeamCity](http://www.jetbrains.com/teamcity/)是 JetBrains 提供的基于 Java 的免费 CI 服务器。我们一直在非常成功地使用它（用于非常不同类型的项目），我会毫无保留地向您推荐它。针对您的每一个要求：

*   构建管道被配置为构建配置中的一系列步骤。一个项目可以有任意数量的配置，而这些配置又可以有任意数量的步骤。
*   完全支持 LDAP 集成。
*   构建管道可以并行执行。TeamCity 将工作委托给构建代理，它们通常是不同的服务器，具有执行构建配置步骤所需的所有工具（框架等）。TeamCity 的免费版本附带三个代理的许可证，因此您最多可以同时运行三个构建。额外的代理可以通过象征性的费用获得许可。
*   我理解的“分层项目”是指一个构建管道的完成将自动触发后续管道的启动。这是受支持的，并且可以在各个阶段之间传递构建/版本号以保持一致性。
*   XUnit 具有一流的支持。Lint/编译器报告可以保存为构建的“工件”，以便以后查看。本质上，许多框架在 TeamCity 中都有内置支持，对于其他所有内容，您都可以执行任意 shell 命令，其输出可以保存为工件或用于后续构建步骤。
*   如上所述，从站/代理支持是 TeamCity 模型的核心。

所有这些都是高度可配置和可定制的。我们已经能够使用 TeamCity 做很多多样化、复杂的事情，而且它对我们来说是完全可靠和稳定的。它看起来也不错——服务器仪表板以一种易于理解的方式排列信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:45:22.403

免责声明：我为 Atlassian 工作，所以我有点偏见。

在 Bamboo 中配置构建管道非常容易。Bamboo 基于计划 → 阶段 → 工作结构运行，从高到低顺序列出。查看[竹计划结构](https://confluence.atlassian.com/download/attachments/289276853/BambooPlanAnatomy.png?version=1&modificationDate=1347425230605&api=v2)。

Bamboo 中的每个项目都包含一系列计划。计划由一个或多个阶段组成。阶段按顺序运行，由一个或多个作业组成。作业并行运行，由一个或多个任务组成（任务按顺序运行，但可以放置在单独的作业中，以便它们并行运行并加快构建时间）。Bamboo 中的代理是执行构建步骤的机器或服务。整个 Job 将在单个 Agent 上执行。[您可以在此处](http://quickstart.atlassian.com/download/bamboo/get-started/agents/)阅读有关代理的更多信息。至于从标签，使某些代理专门绑定到某些构建或项目的能力是新功能的候选名单。

回答你的其他观点：

*   基于 LDAP 的用户授权/基于 ldap 组/项目的权限：您可以连接到外部 LDAP 服务器来管理用户和权限。Bamboo 具有组功能，或者如果您的团队正在使用 JIRA，您可以利用 JIRA 组来设置全局权限、计划权限，并指示哪些用户将收到有关计划构建结果的通知。全局权限控制谁有权访问构建计划和 Bamboo 服务器，而计划权限控制谁可以对计划及其作业执行特定操作。

*   分层项目（项目/配置组）：Bamboo 确实支持父子计划结构。您可以通过多种方式为构建设置触发。其中之一是基于其他构建的触发器，即，计划构建由先前成功构建其他计划或其他指定计划成功构建时触发。示例：如果 A 计划构建成功，它将自动触发 B 和 C 计划的构建。

*   来自 xUnit、Lint、编译器警告、Robot 框架的报告：Bamboo 可以运行任何可以从命令行启动的构建过程。支持包括 Maven/Maven2、Ant、make、MSBuild、NAnt、Grails、devenv.exe 和任何 xUnix 兼容框架（JUnit、Selenium、JWebUnit、NUnit、PHPUnit 等）。

# fwrite - 从连续的物理内存写入硬盘

> ID：13803554
> 
> 赞同：2
> 
> 时间：2012-12-10T15:06:27.087
> 
> 标签：fwrite, mmap, hard-drive, dma, vfs

我有一个基于 ARM 的设备，运行 linux，它连接到相机，我正在尝试有效地将捕获的帧存储到 HD。

*   我在用户空间开发，但可以随意修改驱动
*   我正在用 C 编码
*   使用 DMA 写入内存的帧，我有它们的物理内存指针。
*   我能够控制所有的帧捕获流程，并且我可以判断帧缓冲区何时稳定（从 video4linux 驱动程序中提取）
*   Linux 版本是 3.0.35
*   我熟悉内核源代码，不是专家，但只要我得到一些提示，我就能找到方法并弄清楚事情......

我相信我有两种选择：

1.  为我的文件系统找到最佳配置，用于打开文件并写入文件。我现在使用 ext4 和标准 fopen() fwrite() 函数。我知道我也可以使用 mmap，或者在调用 open() 时添加 O_DIRECT 标志，但还没有尝试过。

2.  找到一种方法将缓冲区的物理地址（我可以从我的 Video4Linux 驱动程序中获取）直接传递给文件系统/硬盘驱动程序，因此数据将直接从那里传输。

我发现方法 1 很慢，内存事务是我的瓶颈，因为 fwrite 涉及将数据从用户空间复制到内核空间，然后再复制到某种缓存，然后再复制到 DMA。简单存储的内存事务太多...

关于方法 2 - 我不知道这是否可能，但如果我是从头开始设计这个系统的人，我会这样做。

有什么想法吗？

*   关于方法 1（使用 open() 和 write()、mmap() 和/或 O_DIRECT），您能推荐一个适合我的最佳设置吗？
*   方法 2（直接从现有 DMA 缓冲区存储到 HD）是否可行？如果是这样 - 你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T23:01:40.983

在 UNIX 上通过 mmap 写入文件的唯一问题是，您要么必须在磁盘空间不足的情况下处理信号，要么确保文件不是稀疏的，因此所有需要的磁盘空间是已经分配。我认为最新的 G++ 提供了一种将信号转换为 C++ 异常处理的方法，但我不确定在 mac-os 以外的其他系统上对此的支持程度。

# c# - 为什么 c# 中没有从 int 到 string 的隐式转换？

> ID：13803555
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:06:30.443
> 
> 标签：c#, string, int, implicit-conversion

例如，值为 10 的 int 将始终转换为“10”，不是吗？难道不能自己定义这样的转换吗？

编辑：我要的是：

```
int i = 10;
Blah(i);

public void Blah(string param)
{
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:10:32.733

C# 是一种强类型语言。像您所询问的转换[不是隐式的](http://msdn.microsoft.com/en-us/library/ms173105.aspx)。阅读：http: [//msdn.microsoft.com/en-us/library/ms173104.aspx](http://msdn.microsoft.com/en-us/library/ms173104.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:08:33.990

```
int i = 10;
s = i.ToString(); 
```

你到底在问什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:09:13.707

`Int32.ToString()`您可以使用（通过显式调用该方法或通过与另一个字符串连接隐式）将 int 转换为字符串。

然后，您可以使用将字符串解析回 int`Int32.Parse()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T15:09:35.060

当 an`int`或任何其他`object`必须隐式转换为字符串时，`ToString()`在后台调用。

您可以显式调用它，从而使用您自己的`Culture`对象或数字格式字符串来控制转换。

[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T15:12:42.277

那是因为 C# 已被设计为一种**强类型语言**。强类型有一系列优点，主要是因为编译器可以捕获许多类型相关的错误，这些错误在弱类型语言中会变成运行时错误。您可以在[Wikipedia：Strong typing](http://en.wikipedia.org/wiki/Strong_typing)中阅读更多内容。

# c# - C# 中的部分彩色标签

> ID：13803558
> 
> 赞同：1
> 
> 时间：2012-12-10T15:06:46.307
> 
> 标签：c#, winforms, colors, label

我试图在标签中显示一个带有单个彩色字母的单词，例如：

> 他[ **l** ]lo

（其中指定的**l**是红色的）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:19:51.060

.NET( `winform`) 中没有本机控件可以执行此操作。尝试[使用多种颜色的标签](https://stackoverflow.com/questions/275836/multiple-colors-in-a-c-sharp-net-label)

# c# - 定义新的无效事件

> ID：13803560
> 
> 赞同：1
> 
> 时间：2012-12-10T15:06:54.503
> 
> 标签：c#, events, void

有没有办法在不创建新方法的情况下附加事件处理程序？我怀疑它看起来像这样：

```
 TextBox1.TextChanged += new void(object s, EventArgs arg)
 {
     MessageBox.Show(arg.HashCode.ToString())
 }; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T15:09:01.820

```
TextBox1.TextChanged+= (s,arg)=>{MessageBox.Show(arg.HashCode.ToString())}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:10:36.377

您可以使用匿名方法，如MSDN 中所述[：](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.80%29.aspx)

```
// Create a handler for a click event
button1.Click += delegate(System.Object o, System.EventArgs e)
                   { System.Windows.Forms.MessageBox.Show("Click!"); }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:11:27.083

您可以改为声明一个非匿名方法：

```
void TextBox1_TextChanged(object s, EventArgs arg)
{
    MessageBox.Show(arg.HashCode.ToString());
}

void HandleEvent()
{
    TextBox1.TextChanged += TextBox1_TextChanged;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:10:30.307

您可以定义一个方法，我认为在这种情况下更具可读性：

```
TextBox1.TextChanged += TextBox1_TextChanged;

private void TextBox1_TextChanged(object s, EventArgs arg)
{
    MessageBox.Show(arg.GetHashCode().ToString());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T15:15:16.163

这可能有用：

```
this.TextBox1.TextChanged += (sender, eventargs) => Console.WriteLine("Do something here !!"); 
```

# java - 从正在运行的线程中捕获异常

> ID：13803561
> 
> 赞同：0
> 
> 时间：2012-12-10T15:07:06.307
> 
> 标签：java, multithreading

我想从正在运行的线程中捕获异常并在调用线程中处理它。我将如何以最好的方式？

```
try {
  Runnable connect = new Runnable() {
    public synchronized void  run() {
      try {
        ... some code requiring long time
      } catch(Exception e) {
        ..I want to catch here and send to calling thread
      }
    }
  }

  synchronized(connect) {
    new Thread(connect).start();
    connect.wait();
    ...if exception then handle it
    ...keep on with code if no exception occurred
  }

} catch(Exception e) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:11:23.723

最好的办法是不直接使用 Thread ，而是使用[Future](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)。如果需要，您可以通过线程运行[FutureTask](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/FutureTask.html)，或者通过将 Callable 提交给 Executor（首选方法）来获取 Future。Future 为您提供了一种方便的方式来等待任务完成并处理结果（常规或异常）。

# jquery - POST 方法在 JQuery 中不起作用

> ID：13803563
> 
> 赞同：0
> 
> 时间：2012-12-10T15:07:09.957
> 
> 标签：jquery, ajax, post

很抱歉发布一个已经在 SO 上多次被问过的问题，但我已经经历了许多这些问题，但仍然无法解决我自己的问题。

我有一个索引页面“index.php”，其中包含一个 JQuery 脚本，旨在将 ID 号发布到同一目录中的“delete.php”。'delete.php' 然后应该从 MySQL 数据库中删除与该 ID 号匹配的行。“index.php”还应该从 HTML 中删除已删除的项目。

最后一点，从 HTML 中删除项目，虽然我在错误控制台中得到“200 OK”响应，但“delete.php”什么也没做——我已经检查了 echo 语句并且不运行。

代码索引.php：

```
<!DOCTYPE html>
<html>
    <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js">    </script>
        <script>
            jQuery(document).ready(function(){
                $(".deleteitem").click(function(){
                    var parent = $(this).closest('tr');
                    var id = parent.attr('id');
                    $.ajax({
                        type: "POST",
                        URL: "delete.php",
                        data: "id=" +id,
                        success: function(data){
                            $('#'+id).remove();
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <table>
            <tr id="1">
                <td>Milk</td>
                <td>3.99</td>
                <td><button class="deleteitem"><img src="deletebutton.gif"></button></td>
            </tr>
            <tr id="2">
                <td>Bread</td>
                <td>1.99</td>
                <td><button class="deleteitem"><img src="deletebutton.gif"></button></td>
            </tr>
        </table>
    </body>
</html> 
```

删除.php：

```
 <?php

mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("tryit") or die(mysql_error());

$id = $_POST[id];

echo "DELETE.PHP HAS RUN<br>";

echo "ID = $id";

if (isset($id)) {
    $query = "DELETE FROM tryit WHERE id = '$id'";
    mysql_query($query) or die('Error, query failed');
}

?> 
```

任何关于为什么这不起作用的线索都非常感谢 - 这让我很生气！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:11:50.920

在您的 PHP 脚本中`$_POST[id]`，您需要使用`$_POST['id']`.

至于数据，jQuery 需要一个对象或一个查询字符串。您正在传递一个查询字符串，所以应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:23:19.977

Try

```
$.ajax({
    type: "POST",
    url: "delete.php",
    data: {id: id},
    success: function(data){
       $('#'+id).remove();
    }
}); 
```

**url** should be lowercase!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:16:31.360

解决了：

问题不在 jquery 中（除了 'url:' 区分大小写，这是一个错字）。

问题只是在 sql 查询中。我有

```
$sql = "DELETE * FROM tryit WHERE id = '$id'"; 
```

而当然应该是

```
$sql = "DELETE FROM tryit WHERE id = '$id'"; 
```

（没有 *）。

# jquery - MVC 3 Razor - 在 Ajax 请求中访问 ViewData (Jquery, JavaScript)

> ID：13803565
> 
> 赞同：2
> 
> 时间：2012-12-10T15:07:16.750
> 
> 标签：jquery, ajax, asp.net-mvc-3, razor, viewdata

我正在编写一些代码，用户可以在提交表单之前检查数据库中是否已经存在用户名。这通过 onkeyup 事件处理程序起作用，该处理程序从文本框中获取值并将其传递给 ajax 请求，该请求使用字符串参数调用我的 ActionResult 方法。我的 SQL 逻辑工作正常，我收到一个表示已经存在或不存在的值。

我遇到的问题来自我的控制器，我想返回值。在我的 Jquery Ajax 请求的成功部分，我试图访问我的 ViewData["index name"] 但我的警报显示一个空字符串。

**Javascript代码：**

```
function searchUsername() {
     var filters = getFilterVals();
     $.ajax({
         url: '@Url.Action("UsernameSearch", "UserManager")',
         type: "POST",
         async: true,
         dataType: "text",
         data: "username=" + filters.username,
         success: function () {
             var str = '@ViewData["UserName"]';
             alert(str);
             $('#txtUsernameExists').val(str);
             configureGui();
             jQueryTableStyling();
         },
         error: function (data) {

         }
     });
}

function getFilterVals() {
     filters = new Object();
     filters.username = $('#createuser-usernamesearch #user_name').val();
     return filters;
} 
```

**C# 控制器代码：**

```
public ActionResult UsernameSearch(string username)
{
    string output = DAL.usernameSearch(username);
    ViewData["Username"] = output;
    return PartialView("~/Views/Partial/_txtUsernameSearch.cshtml");
} 
```

我究竟做错了什么？欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:23:46.003

`ASP.NET:`

```
public JsonResult UsernameSearch(string username)
{
            string output = DAL.usernameSearch(username);

            return Json(new
            {
                Html = PartialView("~/Views/Partial/_txtUsernameSearch.cshtml"),
                Username = output
            });
} 
```

`JS:`

```
$.ajax({
            url: '@Url.Action("UsernameSearch", "UserManager")',
            type: "POST",
            async: true,
            dataType: "json",
            data: "username=" + filters.username,
            success: function (data) {

                var html = data.Html;
                var str = data.Username;
                alert(str);

                $('#txtUsernameExists').val(str);
                configureGui();
                jQueryTableStyling();
            },
            error: function (data) {

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:22:16.237

尝试这个：

改变：

```
ViewData["Username"] = output; 
```

为了这：

```
ViewData["UserName"] = output; 
```

# c# - 如何处理 asp.net 文本框中的 keydown 事件？

> ID：13803569
> 
> 赞同：1
> 
> 时间：2012-12-10T15:07:25.190
> 
> 标签：c#, asp.net

我有一个网络表单（asp.net）的文本框。当用户已经键入数据时，他们将按 Enter 键，以便将数据更新到数据库。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:19:55.777

Dino Esposito 不久前曾[写过这方面的文章](http://www.devproconnections.com/article/aspnet2/hit-enter-and-post-back-123595)。您不一定需要自定义控件，但可以使用他的 JavaScript。

如果您有一个包裹在面板周围的控件，并且您设置了 DefaultButtonID 属性，则面板也将通过单击 ID 指定的所需按钮触发回发。那是另一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:03:59.240

```
function InitTextBox() {
//var _txt = $('#<%= txt.ClientID%>'); or
var _txt = $('input:[id*="txtId"]');
if (_txt.length < 1) return;
_txt.get(0).autocomplete = 'off';
_txt.on('keydown', function (evt) {
    var _self = $(this);
    event = evt ? evt : window.event;
    if (event.keyCode == 13) {
        if ($.browser.msie)
        { event.cancelBubble = true; event.returnValue = false; }
        else { event.preventDefault(); }
        if (_self.val().length > 0 && _self.val().match(/^\s*$/) == null)
            __doPostBack(_self.attr('name'), '');
    }
});
}
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(InitTextBox); 
```

并将文本框的自动回发设置为 false，请

# php - MySQL 查询在 phpMyAdmin 中有效，在 PHP 中失败

> ID：13803570
> 
> 赞同：5
> 
> 时间：2012-12-10T15:07:26.620
> 
> 标签：php, mysql, phpmyadmin

```
SELECT SQL_CALC_FOUND_ROWS * 
FROM (
   SELECT * 
   FROM tbl_substances
   LIMIT 0 , 25
) AS s
LEFT JOIN (
   SELECT subid, list1, list2, list3, list4, list5
   FROM tbl_substances_lists
   WHERE orgid =  '1'
) AS x ON s.subst_id = x.subid
LEFT JOIN (
   SELECT subid, info
   FROM tbl_substances_info
   WHERE orgid =  '1'
) AS y ON s.subst_id = y.subid 
```

这个想法是你有一个物质的主列表（tbl_substances），然后如果你在 tbl_substances_lists 或 tbl_substances_info 中输入了关于它们的任何信息，那么也可以显示（只要你使用正确的组织 ID 登录）

即使它们没有自定义信息，显示所有物质也很重要，这就是我使用 LEFT JOIN 的原因。

此查询在 phpMyAdmin 中完美运行，但是当我在数据库脚本中使用它时，我得到：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 ') AS s LEFT JOIN (SELECT subid, list1, list2, list3, list4, list5 FROM tbl_substances_' 附近使用正确的语法

我不确定问题是否是我遗漏的明显问题，还是与这段代码使用 mysql_query 的事实有关，我知道它已被弃用和过时等等。

我不是数据库专家，所以如果这个查询对你来说很丑陋，那么我提前道歉！

**编辑 2**

这是构建此查询的代码（它会根据您要搜索的内容动态构建，但这是基本形式）

```
 /*
     * Length
     */

    if ( isset( $_POST['iDisplayStart'] ) && $_POST['iDisplayLength'] != '-1' )
    {
        $sLimit = "LIMIT ".mysql_real_escape_string( $_POST['iDisplayStart'] ).", ".
            mysql_real_escape_string( $_POST['iDisplayLength'] );
    }

    /*
     * Ordering
     */

    $sOrder = "";
    if ( isset( $_POST['iSortCol_0'] ) )
    {
        $sOrder = "ORDER BY  ";
        for ( $i=0 ; $i<intval( $_POST['iSortingCols'] ) ; $i++ )
        {
            if ( $_POST[ 'bSortable_'.intval($_POST['iSortCol_'.$i]) ] == "true" )
            {
                $iColumnIndex = array_search( $_POST['mDataProp_'.$_POST['iSortCol_'.$i]], $aColumns );
                $sOrder .= $aColumns[ $iColumnIndex ]."
                    ".mysql_real_escape_string( $_POST['sSortDir_'.$i] ) .", ";
            }
        }

        $sOrder = substr_replace( $sOrder, "", -2 );
        if ( $sOrder == "ORDER BY" )
        {
            $sOrder = "";
        }
    }

        /*
         * Table info
         */
    $sTable = "tbl_substances ".$sLimit.") AS s 
LEFT JOIN (
  SELECT subid, list1, list2, list3, list4, list5 
  FROM tbl_substances_lists 
  WHERE orgid = '".$orgid."'
) AS x 
ON s.subst_id = x.subid 
LEFT JOIN (
  SELECT subid, info 
  FROM tbl_substances_info WHERE orgid = '".$orgid."'
) AS y 
ON s.subst_id = y.subid";

        $sWhere = "";

    /*
     * SQL queries
     * Get data to display
     */

    $sQuery = "
        SELECT SQL_CALC_FOUND_ROWS * FROM (SELECT * FROM $sTable
                $sWhere
        $sOrder
        $sLimit
    ";

        $rResult = mysql_query( $sQuery ) or die(mysql_error()); 
```

想象一下，此时 $sWhere 和 $sOrder 中没有任何内容 - $sLimit 是由用户选择的，但在这种情况下，获取前 25 条记录将是 LIMIT 0, 25。

在这种情况下，这一切结合在一起，形成了回显 $sQuery 的结果：

```
SELECT SQL_CALC_FOUND_ROWS * 
FROM (
  SELECT * 
  FROM tbl_substances LIMIT 0, 25
) AS s 
LEFT JOIN (
  SELECT subid, list1, list2, list3, list4, list5 
  FROM tbl_substances_lists 
  WHERE orgid = '1'
) AS x 
ON s.subst_id = x.subid 
LEFT JOIN (
  SELECT subid, info 
  FROM tbl_substances_info 
  WHERE orgid = '1'
) AS y 
ON s.subst_id = y.subid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:54:53.733

尚未分析代码，但查询方面我没有看到语法错误。但我建议您编写这样的查询：

```
SELECT SQL_CALC_FOUND_ROWS * 
FROM tbl_substances s
LEFT JOIN tbl_substances_lists x ON s.subst_id = x.subid AND x.orgid = '1'
LEFT JOIN tbl_substances_info y ON s.subst_id = y.subid AND y.orgid = '1'
LIMIT 0, 25 
```

应该给出相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:46:18.543

就我而言，我正在使用“ISO 8859-1 字符”（Ç,Ã,é....），执行：utf8_decode($query); 解决了这个问题。

# java - Hibernate：长 CMT 事务

> ID：13803572
> 
> 赞同：0
> 
> 时间：2012-12-10T15:07:37.640
> 
> 标签：java, hibernate, jakarta-ee, transactions

我有两个 bean：**FirstBean**和**SecondBean**。

**FirstBean**有方法**method1**和 REQUIRED 事务属性，**SecondBean**有方法**method2**和 NOT_SUPPORTED 事务属性。方法 1 调用方法 2。

```
@Stateless
class FirstBean implement IFirstBean
{
   ISecondBean secondBean;

   @TransactionAttribute(TransactionAttributeType.REQUIRED)
   void method1()
   {
      //...
      secondBean.method2()
      //...
   }
}

@Stateless
class SecondBean implement ISecondBean
{
   @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
   void method2()
   {
      //....
   }
} 
```

它运作良好。
但是当method2工作很长时间（超过4-5分钟）我在JBoss 4服务器上遇到异常

```
Caused by: java.lang.IllegalStateException: [com.arjuna.ats.internal.jta.transaction.arjunacore.inactive] [com.arjuna.ats.internal.jta.transaction.arjunacore.inactive] The transaction is not active!
    at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1379)
    at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:135) 
```

接下来是 WebLogic 10.3

```
Caused By: org.hibernate.SessionException: Session is closed!
    at org.hibernate.impl.AbstractSessionImpl.errorIfClosed(AbstractSessionImpl.java:49)
    at org.hibernate.impl.SessionImpl.clear(SessionImpl.java:253) 
```

method1 完成后抛出异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:27:35.023

老实说，我会推迟任何事务性工作，直到所有非事务性任务完成。通过创建非事务性“包装器”方法轻松完成：

```
class FirstBean implements IFirstBean {
    @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
    public void overlordMethod() {
        secondBean.method2();
        method1();
    }
} 
```

这可以防止不需要事务的长时间运行的方法导致需要事务的方法出现问题。现在，完成一个方法需要 5 分钟***，***但假设在运行时没有需要改进，并且由于某种原因您无法重新排序方法调用，那么您总是可以增加 JTA 的事务超时。阅读[此处](https://community.jboss.org/wiki/TransactionTimeout?_sscc=t)了解在 JBoss 4 上执行此操作的各种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:19:52.763

在使用 JTA 事务的 JBoss 4.x 中，默认超时为 5 分钟。当调用“方法 1”时，您很可能会超过正在进行的事务的超时时间，因为在执行“方法 2”时“方法 1”的事务已暂停，而经过的时间正在增加。您可以通过将超时增加到一个非常大的值来确认这一点 - [JBoss 有一个 TransactionTimeout 属性，您可以使用](https://community.jboss.org/wiki/TransactionTimeout "配置 JBoss 事务超时").

[要记住的一件不明显的事情是，当事务暂停时，并不意味着事务计时器停止。](http://onjava.com/pub/a/onjava/2005/07/20/transactions.html?page=3 "JEE 事务超时行为")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:27:01.233

我在最后使用下一个收缩。

```
@Stateless
class FirstBean implement IFirstBean
{
   ISecondBean secondBean;

   @TransactionAttribute(TransactionAttributeType.REQUIRED)
   void firstPartOfmethod1()
   {
      //...
   }
   @TransactionAttribute(TransactionAttributeType.REQUIRED)
   void secondPartOfmethod1()
   {
      //...
   }
}

@Stateless
class SecondBean implement ISecondBean
{
   @TransactionAttribute(TransactionAttributeType.NEVER)
   void method2()
   {
      //....
   }
}   
@Stateless
class MainBean implement ISecondBean
{
   @TransactionAttribute(TransactionAttributeType.NEVER)
   void mainMethod()
   {
      firstBean.firstPartOfMethod1();
      secondBean.method2();
      firstBean.secondPartOfMethod1();
      //....
   }
} 
```

# asp.net - 我需要在注册页面中询问什么才能登录。在asp中使用vb

> ID：13803573
> 
> 赞同：-2
> 
> 时间：2012-12-10T15:07:38.967
> 
> 标签：asp.net, vb.net, asp-classic, security

我需要问什么样的问题。另外，我不希望每个人都有创建帐户的能力，那么我如何区分我想让他们创建帐户的人呢？在我的登录页面中，我询问了用户名、密码、电子邮件地址和全名。此外，在这种情况下，每个人都可以创建一个帐户。我真正想要的是让某些人有能力创建一个帐户，只是某些人。

如果有不清楚的地方，请再问我一次或帮助我。我是新人，自己工作很新鲜，所以任何帮助对我来说都意义重大。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:36:49.590

您可以使用此站点[http://expression.microsoft.com/en-us/cc964293.aspx](http://expression.microsoft.com/en-us/cc964293.aspx)，它们完美地解释了如何创建您的登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:15:26.897

从技术上讲，你不需要问任何问题。您可以简单地自动生成用户名和密码组合并将其提供给用户。

# android - Android操作栏列表导航停止工作

> ID：13803577
> 
> 赞同：5
> 
> 时间：2012-12-10T15:07:48.413
> 
> 标签：android, android-actionbar, actionbarsherlock, viewpagerindicator

我正在使用 ActionBarSherlock 和 ViewPagerIndicator 创建一个同时具有选项卡和列表导航的活动。

这些选项卡由 FragmentStatePagerAdapter 支持，并允许用户在应用程序的不同部分之间导航。列表导航允许用户切换他们当前所在选项卡的查看模式，例如，如果他们正在查看搜索结果，他们能够在列表和网格模式之间切换。

我遇到的问题是，当我在选项卡之间滚动时，列表导航会间歇性地停止工作。我可以单击微调器，它会显示选项列表，但是当我选择其中一个时，微调器中的文本：

*   不更新了，
*   onNavigationItemSelected() 不会被调用。

（出于某种原因，使用 FragmentPagerAdapter 而不是 FragmentStatePagerAdapter 似乎可以阻止问题频繁发生，但它仍然偶尔会发生。）

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T08:55:40.763

我认为不应该使用内置在 ActionBar 中的选项卡导航。

您可以使用 ViewPager 中提供的 PagerTitle 界面。[http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)

或者您可以使用以下优秀的库 [http://viewpagerindicator.com](http://viewpagerindicator.com) [https://github.com/astuetz/PagerSlidingTabStrip](https://github.com/astuetz/PagerSlidingTabStrip)

# ios - CoreGraphics在iOS中围绕一个点旋转和图像

> ID：13803579
> 
> 赞同：0
> 
> 时间：2012-12-10T15:07:51.650
> 
> 标签：ios, core-graphics, transform

我已经尝试了我能想到的一切，但没有一个有效。在 iOS UIView drawRect 中，我想要一个函数，它获取图像、图像上的一个点、比例和角度，并在视图中心绘制围绕给定点旋转的图像。因此，如果我想围绕原点 (0,0) 旋转，我的图像边缘将出现在视图的中心。

这是我的第一个版本的代码：

```
-(void)drawImage:(UIImage*)image atAngle:(float)theta atScale:(float)scale whereCenter:(JBPoint*)center inContext:(CGContextRef)context
{
    UIGraphicsPushContext(context);

    //Rotate
    CGContextTranslateCTM (context, -center.x, -center.y);
    CGContextRotateCTM (context, theta);
    CGContextTranslateCTM (context, center.x, center.y);

    //Scale
    CGContextScaleCTM(context, scale, scale);

    //Draw
    GContextDrawImage(context, self.frame, image.CGImage);

    UIGraphicsPopContext();

} 
```

然而，这会扭曲图像，即使我只对其执行仿射变换，它也不是仿射变换。

折腾了一阵子，决定自己动手，计算四个角点的位置，然后画出来：

```
-(void)drawImage:(UIImage*)image atAngle:(float)theta atScale:(float)scale whereCenter:(JBPoint*)center inContext:(CGContextRef)context
{
    UIGraphicsPushContext(context);

    CGContextRotateCTM (context, theta);

    float ux = cos(theta);
    float uy = sin(theta);
    float vx = sin(theta);
    float vy = -cos(theta);

    CGPoint p1 = CGPointMake(self.frame.size.width/2.0f-ux*scale*center.x-vx*scale*(image.size.height - center.y), self.frame.size.height/2.0f-uy*scale*center.x-vy*scale*(image.size.height - center.y));
    CGPoint p2 = CGPointMake(p1.x+ux*image.size.width*scale, p1.y+uy*image.size.width*scale);
    CGPoint p3 = CGPointMake(p2.x+vx*image.size.height*scale, p2.y+vy*image.size.height*scale);
    CGPoint p4 = CGPointMake(p1.x+vx*image.size.height*scale, p1.y+vy*image.size.height*scale);

    //Sanity check. These all should be the same since I want to center at the center of the frame
    NSLog(@"Center: %f, %f", (p1.x+p3.x)/2.0f, (p1.y+p3.y)/2.0f);
    NSLog(@"Center: %f, %f", (p2.x+p4.x)/2.0f, (p2.y+p4.y)/2.0f);
    NSLog(@"Center: %f, %f", self.frame.size.width/2.0f, self.frame.size.height/2.0f);

    float minX = MIN(MIN(p1.x, p2.x), MIN(p3.x, p4.x));
    float minY = MIN(MIN(p1.y, p2.y), MIN(p3.y, p4.y));

    float maxX = MAX(MAX(p1.x, p2.x), MAX(p3.x, p4.x));
    float maxY = MAX(MAX(p1.y, p2.y), MAX(p3.y, p4.y));

    CGContextSetAlpha(context, alpha);
    CGContextScaleCTM(context, 1, -1);

    CGContextDrawImage(context, CGRectMake(minX, -minY, (maxX-minX), -(maxY-minY)), image.CGImage);
    UIGraphicsPopContext();
} 
```

这适用于 0 的角度，但一旦角度变为 90 度 (pi/2)，图像就会极度倾斜，这没有任何意义。

这似乎是一个如此简单的问题。为什么这么难？有谁看到我做错了什么？

# c - Linux 中的 IPC 编程支持库（使用 C）

> ID：13803581
> 
> 赞同：0
> 
> 时间：2012-12-10T15:07:58.513
> 
> 标签：c, linux, ipc

> **可能重复：**
> [使用哪种 Linux IPC 技术？](https://stackoverflow.com/questions/2281204/which-linux-ipc-technique-to-use)

我正在做一个与 Linux 中 IPC 编程相关的项目，使用 C 语言。我将在进程之间“发送”数据，但不能使用套接字。

我打算使用管道，但是当我在互联网上搜索管道的文档时，所有的教程都与 Linux 的系统调用有关。

任何人都可以向我推荐任何支持 IPC 编程的库，系统调用似乎有点难以使用。

另一个问题是：管道是最合适的方式吗？

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:27:17.700

您可以使用命名管道。`man mkfifo`了解更多信息。

# c# - TREEview 超出数据库

> ID：13803586
> 
> 赞同：0
> 
> 时间：2012-12-10T15:08:08.347
> 
> 标签：c#, mysql, treeview

我有一个名为 tableVw 的树视图。

在 TableVw 中，表显示在数据库之外。

![在此处输入图像描述](../Images/4d9b914fcfcee7599efc5419ab901a00.png)

我想在父项中显示表格，并将标题显示为子项。当您单击子项时，您会在带有文本框的面板中获得信息，您可以在其中编辑它们。而且我不知道有多少表格或标题。

使用以下代码，我只能得到表格：

```
MySqlConnection sconn = new MySqlConnection("User ID=root;Password=;Initial Catalog=cmstt;Data Source=localhost");
            MySqlCommand cmd = sconn.CreateCommand();
            cmd.CommandText = "SHOW TABLES;";
            MySqlDataReader Reader;
            sconn.Open();
            Reader = cmd.ExecuteReader();
            while (Reader.Read())
            {
                string row = "";
                for (int i = 0; i < Reader.FieldCount; i++)
                    row += Reader.GetValue(i).ToString() + ", ";
                tableVw.Nodes.Add(row);
            } 
```

# bootstrap-typeahead - Twitter bootstrap typeahead 仅适用于页面上的第一个元素

> ID：13803591
> 
> 赞同：0
> 
> 时间：2012-12-10T15:08:25.207
> 
> 标签：bootstrap-typeahead

我对页面上的几个元素使用了预先输入，但它只适用于第一个元素，而不适用于其余元素，尽管它们的数据源以完全相同的方式生成并且具有所有正确的值（数据源="["abc","cbd"]")。有人知道为什么会这样吗？

谢谢

# android - 标签主机上的Android添加按钮

> ID：13803596
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:08:42.813
> 
> 标签：android, android-tabhost

我想制作一个布局，其中按钮顶部的选项卡主机。我怎样才能做到这一点？给我这个错误：“根元素之后的文档中的标记必须格式正确”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:46:28.400

这是我的代码，感谢您的帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">
    <TableLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TableRow
        android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <Button android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:id="@+id/btn"
     android:text="osman"/>
   </TableRow>
   </TableLayout>
<TableLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TableRow
        android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TabHost 
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout>     
</TabHost>
</TableRow>
</TableLayout>

 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:52:02.207

我发现如何添加它。

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">
<TableLayout android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TableRow 
        android:layout_width="fill_parent"
    android:layout_height="wrap_content">
<Button android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:id="@+id/btnGarsonCagir"
     android:text="GARSON ÇAĞIR"
     android:layout_weight="1"/>
 <Button android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:id="@+id/btnTaksiCagir"
     android:text="TAKSİ ÇAĞIR"
     android:layout_weight="1"/>
    <Button android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:id="@+id/btnHesapIste"
     android:text="HESAP İSTE"
     android:layout_weight="1"/>
     <Button android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:id="@+id/btnSepet"
     android:text="SEPETİM"
     android:layout_weight="1"/>
  </TableRow>
  </TableLayout>

<TabHost 
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
 </LinearLayout>     
</TabHost>
</LinearLayout> 
```

# java - Java 小程序呢？有什么缺点？

> ID：13803598
> 
> 赞同：3
> 
> 时间：2012-12-10T15:08:48.847
> 
> 标签：java, applet, ria, java-web-start

为什么 Java 小程序如今如此不受欢迎？

难道不能用Java 小程序创建任何富互联网应用程序吗？为什么 Java Web Start 会出现？为什么小程序需要在单独的窗口中运行而不是在浏览器窗口中运行？

我需要简短的杀戮答案，而不是对几种技术进行冗长无聊的比较。

**更新**

问题被关闭并不奇怪，因为这是禁忌。我还是想知道答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:21:20.853

除非您强烈需要重用一堆已经编写的代码，否则几乎没有理由使用小程序。现代浏览器完全能够完成大部分小程序曾经使用的功能。（忽略潜在的安全问题。）

在浏览器可以做任何有用的事情之前，*需要*转向功能更强大的平台。现在情况已不再如此，因此，applet 很少占有一席之地。其他基于客户端的插件技术也面临着类似的命运（想想 Flash）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:13:42.560

Java 不是一种网络语言。当您可以只针对浏览器本身时，为什么还要依赖浏览器插件？HTML5 和 Javascript 在现代浏览器中非常强大，无需繁琐的插件。

# javascript - 如何使用 Hubot 运行异步 Ruby 脚本？

> ID：13803602
> 
> 赞同：1
> 
> 时间：2012-12-10T15:08:53.357
> 
> 标签：javascript, ruby, node.js, coffeescript, hubot

我想让我的一个 Ruby 脚本可供我的非开发人员使用（阅读“不愿设置和维护 Ruby 环境”）。

我们还在团队中使用[Hubot](http://hubot.github.com/)。

到现在，我相信你已经猜到我的问题了：“我怎样才能编写一个能调用我的 Ruby 脚本的 Hubot 脚本（CoffeeScript，即 JS）？”

ps：我的脚本需要一段时间才能完成，如果你们知道如何让我的 hubot 给出快速反馈（“我听到了，我要运行你的脚本”），然后在脚本完成时通知我完成（“你的脚本成功完成”），它会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:29:48.670

你能用它`exec`来运行你的脚本吗？就像是：

```
module.exports = (robot) ->
  robot.hear /run my command/i, (msg) ->
    exec "cd /path/to/ruby/script && ruby yourscript.rb"
    msg.send "i heard you, i'm gonna run your script." 
```

希望这能让你走上正确的道路。我不确定你需要放入什么样的钩子让它等到 exec 成功完成后通知脚本是否正确运行但希望谷歌可以帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T21:51:13.363

我敢肯定，您现在可能已经弄清楚了，但是由于这个问题对我有所帮助，我可以摆脱肖恩的回答并完成难题。

```
module.exports = (robot) ->
    robot.respond /your regex/i, (msg) ->
    cp = require "child_process" 
    cp.exec "./path/from/root/to/ruby script", (error, stdout, stderr) ->  
        if error
            msg.send "Sorry I encounted this error \n" + stderr
        else
            msg.send "Done. The output: \n" + stdout 
```

我希望这有帮助。

# maven - 无法在 45000 毫秒内绑定到锁定端口 70 54

> ID：13803605
> 
> 赞同：1
> 
> 时间：2012-12-10T15:09:04.447
> 
> 标签：maven, selenium, selenium-webdriver

当我尝试使用 MVN 测试命令行运行我的 selenium 测试时，我收到了这个错误。奇怪的是，我在 3 天前尝试过，它运行成功：

```
------------------------------------------------------
T E S T S
-------------------------------------------------------
Running GoogleNavigationTest
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 45.672 sec <<< FAILURE!

Results :

   Failed tests:   testApp(GoogleNavigationTest): Unable to bind to locking port 70
   54 within 45000 ms

  Tests run: 1, Failures: 1, Errors: 0, Skipped: 0 
```

这是我的测试：

```
import java.util.List;

 import org.openqa.selenium.By;
 import org.openqa.selenium.WebDriver;
 import org.openqa.selenium.WebElement;
 import org.openqa.selenium.firefox.FirefoxDriver;
 import org.openqa.selenium.firefox.FirefoxProfile;
 import org.testng.annotations.Test;

public class GoogleNavigationTest {
@Test
public void testApp(){
    // The Firefox driver supports javascript 
    FirefoxProfile firefoxProfile = new FirefoxProfile();
    WebDriver driver = new FirefoxDriver();

    // Go to the Google Suggest home page
    driver.get("http://www.google.com/webhp?complete=1&hl=en");

    // Enter the query string "Cheese"
    WebElement query = driver.findElement(By.name("q"));
    query.sendKeys("Cheese");

    // Sleep until the div we want is visible or 5 seconds is over
    long end = System.currentTimeMillis() + 5000;
    while (System.currentTimeMillis() < end) {
        WebElement resultsDiv = driver.findElement(By.className("gssb_e"));

        // If results have been returned, the results are displayed in a drop down.
        if (resultsDiv.isDisplayed()) {
          break;
        }
    }

    // And now list the suggestions
    List<WebElement> allSuggestions =   
    driver.findElements(By.xpath("//td[@class='gssb_a gbqfsf']"));

    for (WebElement suggestion : allSuggestions) {
        System.out.println(suggestion.getText());
    }
     }
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-11T19:12:33.117

迟到的回复，但试试这个更新的代码。Selenium Webdriver 将实例绑定到特定的 TCP 端口。如果您的测试失败并且驱动程序未正确关闭，则端口将保持 x 时间。使用 driver.Quit() 通常会释放 TCP 端口。

要测试查看当前可能仍保留的端口，您可以使用 netstat -a 命令（Windows）来查找活动连接列表。

解决/绕过此问题的一种方法是允许 selenium 绑定到由您的代码生成的另一个端口。7000 到 7100 以上的大多数端口都可以使用。Selenium 内置的处理端口的方法是最初尝试绑定到 7055，如果失败，则绑定到 7054，如果失败则绑定到 7056。在大多数测试用例中，这很好，但我发现多个测试仍然遇到失败. 因此，不要使用默认值，而是指定您自己的配置文件。

```
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;
import org.testng.annotations.Test;

public class GoogleNavigationTest {
@Test
public void testApp(){

    // Specify a new or randomly generated port for the driver to use
    int genPort = 7052;
    // The Firefox driver supports javascript 
    FirefoxProfile firefoxProfile = new FirefoxProfile();
    //In the profile, assign it a different port to use instead of 7054,7055,7056
    //In my tests, I have a method that will generate a port to use that is open
    firefoxProfile.Port = genPort; 
    WebDriver driver = new FirefoxDriver(firefoxProfile); 
```

编辑：深入研究这个问题发现有两件事导致了这个错误。第一个是本地计算机上的 TCP / UDP 端口选择，第二个是 selenium 必须将基本 firefox 配置文件从驱动器复制到它的临时文件夹的时间量。传输越慢，端口绑定问题的可能性就越大。

要解决此问题，请使您的个人资料尽可能小。这可能涉及删除启动时生成的一些基本 firefox 文件。我的 Firefox 配置文件大小 > 5 MB。在我进行这项研究之前，我的个人资料大小超过 60 MB。在每次测试开始时，它会尝试将 60MB 传输到临时位置并绑定到锁定端口。

我的新代码没有让我失望

```
 var smallerProfile = @"C:\Firefox Profiles\SmallProfile";
    var genPort = new Random(); 

     FirefoxProfile profile = new FirefoxProfile(smallerProfile);
     profile.Clean();
     profile.Port = genPort.Next(7000, 7500); 
```

我在每次主要运行开始时复制较小的配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:22:19.553

Selenium v​​2.21 不支持 Firefox 17。事实上，Firefox 17 仅支持几天前发布的 v2.27 版本。

降级 Firefox 或更新 Selenium。

可能是也可能不是此特定错误的原因，但您*必须*执行上述操作之一才能使其有一半的机会使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:02:59.910

根据[此处找到的答案](https://groups.google.com/forum/?fromgroups=#!topic/selenium-users/i5NjiNkRJaY)

这是因为在后台运行了不止一个 javaw.exe。查看此转到任务管理器并选择进程选项卡。您可以看到将有不止一个 javaw.exe 正在运行。一一选择进程javaw.exe，然后单击“结束进程”并尝试再次运行脚本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-23T11:10:29.957

我刚刚使用了 chromeDriver，它工作正常。

# xpath - 类的 xpath 测试元素

> ID：13803606
> 
> 赞同：2
> 
> 时间：2012-12-10T15:09:09.827
> 
> 标签：xpath

我想知道 xpath 是否有办法测试一个类的元素。我目前有ID，我只想能够测试以确保JS添加了一个类。

我正在测试以查看 id=foo 是否包含 class=red 的元素。

```
<span id="foo" class="red">test</span> 
```

我假设你会使用 xpathCount？

```
getXpathCount(("//a[@id='foo']") not sure what goes next).equals(1); 
```

我也试过这个没有成功，

```
getXpathCount("//span[@id='foo'].span[contains(@class,'red')]").equals(1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:23:35.053

The xpath to use would be

```
//a[@id='foo' and @class='red'] 
```

# java - DataRetrievalFailureException：在 Spring Data Neo4j 中未找到“__type__”

> ID：13803609
> 
> 赞同：0
> 
> 时间：2012-12-10T15:09:18.607
> 
> 标签：java, neo4j, spring-data-neo4j

我有一个 Neo4j REST 数据库设置并运行，我试图使用 Spring Data Neo4j 访问它。以下代码：

```
MyObject obj = myObjectRepository.findOne(1234L); 
```

抛出以下异常：

> 线程“main”中的异常 org.springframework.dao.DataRetrievalFailureException: '__type__' on`http://my.ip.addr.ess:7474/db/data/node/1234;`嵌套异常是 org.neo4j.graphdb.NotFoundException: '__type__' on`http://my.ip.addr.ess:7474/db/data/node/1234`

请注意，如果我导航到`http://my.ip.addr.ess:7474/db/data/node/1234`，我的对象会正确显示。

在我的 pom 我有`org.springframework.data:spring-data-neo4j-rest:2.1.0.BUILD-SNAPSHOT`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T10:30:54.280

您需要向您的节点添加一个名为“__type__”的属性，并为其提供对象类名称的值。例如，在您的示例中，您将添加到您的节点：

属性：__type__ 值：“MyObject”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T00:19:01.887

我看到了同样的问题。似乎我需要在 db 节点 obj 上有一个**类型属性。**为什么 ？

# android - 对于 Google API 访问，我可以为同一个 Android 包名称创建多个客户端 ID吗？

> ID：13803610
> 
> 赞同：9
> 
> 时间：2012-12-10T15:09:26.010
> 
> 标签：android, google-drive-api, google-play-services

我正在按照此处的快速入门指南将 Google Drive 与我的 android 应用程序集成：[https](https://developers.google.com/drive/quickstart-android) ://developers.google.com/drive/quickstart-android 。

因此，我使用调试和发布 SHA1 指纹为相同的包名称创建了两个客户端 ID。API 控制台允许这样做，但我想知道，由于我使用调试密钥 SHA1 指纹创建了客户端 ID，Google OAuth2 服务器会接受来自我的发布应用程序的身份验证请求吗？

顺便说一句，我正在使用 Google Play Services API 来请求身份验证令牌，因此无法指定 API 控制台中显示的“客户端 ID”字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T01:42:03.480

您无需在代码中指定客户端 ID，因为您的凭据使用包名称/SHA1 指纹对进行匹配，这是唯一的。

当您为调试和发布证书生成凭据时，只要您的应用使用 API 控制台中指定的包名称中的任何一个，您的请求就会被正确授权。

# google-docs-api - 有没有其他人突然遇到来自 Google Documents List API 的 403 Forbidden 错误？

> ID：13803613
> 
> 赞同：1
> 
> 时间：2012-12-10T15:09:33.053
> 
> 标签：google-docs-api

在平稳运行了一整年之后，对 Google 文档列表 API[的“创建”调用](https://developers.google.com/google-apps/documents-list/#creating_a_new_document_or_file_with_metadata_only)开始`403 Forbidden`出现错误。

[其他方法](https://developers.google.com/google-apps/documents-list/#getting_a_list_of_documents_and_files)适用于相同的`access_token`参数。这从 12 月 7 日左右开始，在我们所有调用此调用的用户中非常一致。

这个 API 最近刚刚获得了一项弃用政策，它将在 2015 年 4 月之前保持不变。公平地说，我不希望 Google Drive 团队积极支持这个 API，但想知道 Google Drive 上是否有机会过渡可能与这种不一致有关。

是否还有其他人在 Google Documents List API 上遇到意外错误？关于正在发生的事情以及问题可能有多深的任何线索？

谢谢！

# spring - JavaFX2 中的 Fxml 和 Spring - 如何定义依赖注入

> ID：13803617
> 
> 赞同：0
> 
> 时间：2012-12-10T15:09:48.117
> 
> 标签：spring, javafx-2, fxml

据我所知，使用 fxml 文件，您可以在 fxml 配置文件中抽象您的用户界面设计（或任何其他类）并在之后加载它。另一方面，使用 Spring 配置可以为应用程序定义 DI。所以，我试图弄清楚如何将它们结合在一起。

例如，假设我有一个显示 4 个图表的场景。现在我想显示第五个。为此，（理论上）我应该在我的 spring.xml 配置文件中添加一个条目以注入一个新图形，并在我的 fxml 文件中另外添加一个新条目来设置这个新的图形设计配置吗？

我试图对它的工作原理有一个广泛的了解，所以如果我的问题缺乏一些技术准确性，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:54:52.513

在 FXML 中，我将定义图形控件和图形容器，这将允许在网格、列表或其他布局中显示 0 到 N 个图形。图形容器的控制器将加载图形控件并根据按钮单击或其他任何方式将其添加到容器中。

我不知道你打算如何控制你的程序，所以我在那里留了一些空白来填充。不要太快在 spring 中配置所有东西，做最简单的事情。我使用 DI 将依赖关系连接到具有所有逻辑的控制器。

# jquery - JqG rid 在 jquery 对话框中显示为不可编辑的模式

> ID：13803619
> 
> 赞同：0
> 
> 时间：2012-12-10T15:10:04.087
> 
> 标签：jquery, asp.net, css, jqgrid, jquery-dialog

我正在使用 jquery 对话框并在 jquery 对话框中显示 JqGrid。一切工作正常，但 JqGrid 显示为不可编辑的模式。所以我可以在对话框中编辑任何内容。

即使我关闭并重新打开对话框，它仍然保持不变，只有当我刷新页面时它才会变得正常，直到整个对话框显示为不可编辑的模式......

代码逻辑运行良好..这似乎是一个 UI 问题..请帮帮我..无论如何我在下面发布我的代码供您参考..请查看并帮助我解决问题..

这是我的 aspx 代码：

```
<div>
<span id="span_create" style="color: #88b807; margin-left: 839px;
                            margin-top: -12px; cursor: pointer; display: block">Create</span>
</div>
     <div id="Createdialog" style="display: none; overflow: hidden">
                    <table id="table" style="border-spacing: 7px 7px; margin-left: 5px">
                        <tr>
                            <td>
                                <span class="SubHeading" style="font-size: 10pt;">Private Space Name </span>
                            </td>
                            <td>
                                <asp:TextBox ID="txt_spacename" runat="server" />
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <span class="SubHeading" style="font-size: 10pt;">Users </span>
                            </td>
                            <td>
                                <asp:TextBox ID="txt_users" TextMode="MultiLine" runat="server" />
                            </td>
                            <td>
                                <asp:Button ID="btn_addusers" Text="Add" Style="margin-left: 0px;" runat="server" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <table id="users_grid">
                                </table>
                            </td>
                        </tr>
                    </table>
                    <input type="button" id="Btn_Submit" value="Create" style="margin-left: 280px; margin-top: 8px;"
                        runat="server" />
                </div> 
```

这是我的 Js 代码：

```
$("#Createdialog").dialog({
                autoOpen: false,
                title: 'Create Private space',
                modal: true,
                position: 'center',
                width: 900

            });

            $('#span_create').click(function() {
                $("#Createdialog").find('input:text, textarea').val('');
                $('#Createdialog').dialog('open');
                return false;
            });

$('#btn_addusers').click(function() {

        $("#users_grid").jqGrid({

            colNames: ['User_ID', 'Name', 'Email_Id'],
            colModel: [{ name: 'User_ID', index: 'User ID', width: 130, editable: false, sortable: false },
            { name: 'Name', index: 'Name', width: 350, editable: false, sortable: false },
            { name: 'Email_Id', index: 'Email Id', width: 350, editable: false, sortable: false}],

            width: 400,
            height: 'auto',
            multiselect: true,
            modal: false

        });

        var UserID = $('#Header1_txt_users').val();
        var datapost = {};

        datapost.UserId = UserID;
        var postJSONData = JSON.stringify({ 'postdata': JSON.stringify(datapost) });

        $.ajax({
            type: 'POST',
            data: postJSONData,
            url: 'PrivateSpaceService.asmx/GetUserDetails',
            dataType: 'json',
            async: false,
            contentType: 'application/json; charset=utf-8',
            success: function success(response) {

                UserArr = response.d;

            },
            error: function failure(response) {
                alert('failed');
            }
        });

        var mydata;

        for (var i = 0; i < UserArr.length; i++) {

            mydata = {};

            mydata.User_ID = UserArr[i].UserId;
            mydata.Name = UserArr[i].UserName;
            mydata.Email_Id = UserArr[i].EmailId;

            $("#users_grid").jqGrid('addRowData', 'GridData_Row_' + (i + 1), mydata);

        }
        return false;

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:41:02.757

可能是 z-index 是问题所在。这是一个示例代码示例（http://jsfiddle.net/c3BPP/），它具有更大的 z-index，并且可以正常工作。z-Index 像 100 是不可编辑的

试试看。

# jpa - 从 JPA 连接中获取 Map 结果的最优雅和最有效的方法

> ID：13803620
> 
> 赞同：0
> 
> 时间：2012-12-10T15:10:04.060
> 
> 标签：jpa, jpa-2.0

假设我有 3 个实体：

`Car` `Place` `Visit`

A`Visit`表示当 a`Car`访问 a时发生的事件`Place`，因此它将具有到达时间、离开时间和 2 个外键，一个到 the `Car`，一个到`Place`.

在 JPA 中，`Visit`有`@ManyToOne`关系到`Car`和`@ManyToOne`关系到`Place`. （所以 a`Car`可以进行多次访问，a`Place`可以进行多次访问），使用上面的外键。

假设我想知道`Car`访问所有`Place`s （或多个`Place`s，没关系）的（唯一）s 的列表，获得 a`Map<Place, List<Car>>`以便仅在一个 SQL 查询中完成的最佳方法是什么？

在普通的原生 SQL 中，我们只会使用`join`and `group by`，是否有一些 JPA 技巧可以优雅地实现这一点？

我正在使用 JPA 2.0（休眠 4.1）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:23:58.537

With the help of Guava (but you could easily do without):

```
String jpql = "select distinct place, car from Visit visit"
              + " inner join fetch visit.car car"
              + " inner join fetch visit.place place"

List<Object[]> placeAndCars = em.createQuery(jpql).getResultList();
ListMultimap<Place, Car> result = ArrayListMultimap.create();
for (Object[] row : placesAndCars) {
    result.put((Place) row[0], (Car) row[1]);
}
return result; 
```

# linux - Shell Script (AIX)：从用户代理字符串中提取操作系统和浏览器信息

> ID：13803621
> 
> 赞同：0
> 
> 时间：2012-12-10T15:10:04.153
> 
> 标签：linux, shell, unix, aix

我在日志文件中获得如下用户代理信息。

```
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C)
Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11)
Mozilla/5.0 (iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3)
Mozilla/5.0 (Windows NT 6.1; rv:16.0) Gecko/20100101 Firefox/16.0)
Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.4; en-US; rv:1.9.2.28) Gecko/20120306 Firefox/3.6.28 
```

我想从每个用户代理获取操作系统和浏览器信息。请建议我如何在 shell 脚本（AIX）中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:18:00.900

使用`case`：

```
case $user_agent in
  *MSIE*) browser=MSIE ;;
  *Chrome*) browser=Chrome ;;
  ....
  *) echo "Cannot extract browser from [[$user_agent]]" >2 ;;
esac
case $user_agent in
  *Windows*) plarform=Windows ;;
  *Linux*) platform=Linux ;;
  ....
  *) echo "Cannot extract platform from [[$user_agent]]" >2 ;;
esac 
```

您将不得不经历一些迭代，为各种浏览器添加案例（那里没有统一性）。

# vb.net - 删除文件末尾的空行

> ID：13803623
> 
> 赞同：0
> 
> 时间：2012-12-10T15:10:27.360
> 
> 标签：vb.net

我正在尝试删除文本文件末尾的空行。该程序获取一个文件，对其进行操作并生成另一个文件。但是，我需要删除文件末尾的空白行...

```
 Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    ' Save to desktop if nothing is selected
    If txtDestLoc.Text = "" Then
        txtDestLoc.Text = "C:\Documents and Settings\" & LCase(Environment.UserName) & "\desktop"
    End If

    If txtFileLoc.Text <> "" Then

        Dim fsr As New FileStream(txtFileLoc.Text, FileMode.Open)
        Dim sr As New StreamReader(fsr)
        Dim sb As New System.Text.StringBuilder
        'Dim strHeader As String

        ' Get just file name
        Dim strFileName = Me.OpenFileDialog1.FileName()
        Dim fnPeices() As String = strFileName.Split("\")
        Dim fileName As String = ""

        fileName = "CCCPositivePay.txt"

        Dim strOutFile As String = txtDestLoc.Text & "\" & fileName
        Dim fsw As New FileStream(strOutFile, FileMode.Create, FileAccess.Write)
        Dim w As New StreamWriter(fsw)
        Dim i As Double

        Dim srRow As String
        Dim strW As String
        Dim strDate As String
        Dim strAmt As String
        Dim strChNo As String
        Dim strName As String
        Dim strAddInfo As String
        Dim strCustAcct As String
        Dim totamt As Double = 0
        Dim strAcct As String = "2000002297330"

        strLoc = txtDestLoc.Text()
        srRow = ""
        Do While sr.Peek() <> -1
            srRow = srRow.ToString & sr.ReadLine()
            If srRow.Length = 133 Then
                If srRow.Substring(131, 2) = "CR" Then

                    strCustAcct = srRow.Substring(2, 18).Replace("-", "")
                    strName = srRow.Substring(23, 35)
                    strAddInfo = srRow.Substring(23, 30)
                    strDate = srRow.Substring(103, 4) + srRow.Substring(97, 2) + srRow.Substring(100, 2)
                    strChNo = srRow.Substring(110, 10)
                    strAmt = strip(srRow.Substring(121, 10))

                    strW = strAcct + strChNo.Trim.PadLeft(10, "0") + strAmt.Trim.PadLeft(10, "0") + strDate + " " + strAddInfo + Space(8) + strName + Space(20)
                    sb.AppendLine(strW)

                    totamt = totamt + CDbl(strAmt)

                    i = i + 1
                End If

            End If
            srRow = ("")
        Loop

        'w.WriteLine(strHeader)
        w.WriteLine(sb.ToString)

        Dim file As String = txtFileLoc.Text
        Dim path As String = txtFileLoc.Text.Substring(0, File.lastindexof("\"))
        Dim strFileProcessed As String

        strFileProcessed = fnPeices(fnPeices.Length - 1)

        Label1.Text = "Refund File Processed:  " & strFileProcessed
        Label2.Text = "File saved to:  " & strOutFile

        ' Close everything
        w.Close()
        sr.Close()
        fsw.Close()
        fsr.Close()

        ' Move file after processing
        System.IO.File.Move(file, path + "\CB008_Processed\" + Now.ToString("MMddyyyyHHmm") + strFileProcessed)

        ' Put a copy of the results in "Processed" folder
        System.IO.File.Copy(strOutFile, path + "\CB008_Processed\" + Now.ToString("MMddyyyyHHmm") + fileName)

    Else
        MessageBox.Show("Please select a Refund file to process.", "CCC Refund File", MessageBoxButtons.OK)
    End If

End Sub
Public Function strip(ByVal des As String)
    Dim strorigFileName As String
    Dim intCounter As Integer
    Dim arrSpecialChar() As String = {".", ",", "<", ">", ":", "?", """", "/", "{", "[", "}", "]", "`", "~", "!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "_", "-", "+", "=", "|", " ", "\"}
    strorigFileName = des
    intCounter = 0
    Dim i As Integer
    For i = 0 To arrSpecialChar.Length - 1

        Do Until intCounter = 29
            des = Replace(strorigFileName, arrSpecialChar(i), "")
            intCounter = intCounter + 1
            strorigFileName = des
        Loop
        intCounter = 0
    Next
    Return strorigFileName

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:46:13.983

只做一个`Writeline`如果`Not String.IsNullOrEmpty(sb)`

# ruby-on-rails - 使用 Rails 的测验应用程序

> ID：13803627
> 
> 赞同：0
> 
> 时间：2012-12-10T15:10:30.993
> 
> 标签：ruby-on-rails

好吧。我是初学者，我无法找到解决此问题的方法。我正在开发这个测验应用程序。我已经构建了允许您创建和管理按难度和标签分类的问题的部分。但我想不出一个合适的测验逻辑。

我想要一个带有问题编号的页面，一次显示一个问题。我希望能够通过单击数字来回移动，并且我应该有某种方式来指示尝试的问题。然后我需要一个可以自动提交问题的计时器选项。

我真的真的不知道从哪里开始。我找到了这个[Reexaminator](http://rexaminator.com/)网站。除了计时器，它有我想要的东西。

请帮我。提前致谢

这是我最终建立的。这是一个演示应用程序。它有很多 UI 问题和一些错误。仅供参考，如果有人需要。

[http://rtester.herokuapp.com/](http://rtester.herokuapp.com/)

如果有人会回答原始问题会很好。谢谢。它为我的大学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T08:40:12.467

这是一个广泛的问题，对于您描述的每个功能都有许多可能的解决方案。答案可能会有很大差异，具体取决于您的应用程序的组织和模型之间的关系，即`Quiz`和`Question`.

对于初学者，您需要一个导航栏来查看每个问题。

您可以像这样遍历测验数字：

```
<ul>
  @question.each do |question|
    <li><%= link_to question.number, question %></li>
  end
</ul> 
```

这将提供一个链接列表，每个链接都显示为一个数字，但链接到 #show 操作和`Question`模型/资源的视图。

# php - 文件中的变量内容消失并且循环不进入

> ID：13803631
> 
> 赞同：0
> 
> 时间：2012-12-10T15:10:34.587
> 
> 标签：php, foreach, fwrite, fgets

我有以下代码可以从文件中读取，并在一些计算后写回它。

```
 if(file_exists(CACHE_FILE_PATH)) {
        //read the cache and delete that line!
        $inp = array();
        $cache = fopen(CACHE_FILE_PATH, 'r');
        if($cache) {
            while(!feof($cache)) {
                $tmp = fgets($cache);
                //some logic with $tmp
                    $inp[] = $tmp;
            }

            fclose($cache);
        }

        var_dump($inp);

        $cache = fopen(CACHE_FILE_PATH, 'w');

        var_dump($inp);
        if($cache) {

            var_dump($inp);

            foreach ($inp as $val) {
                echo "\nIN THE LOOP";
                fwrite($val."\n");
            }

            fclose($cache);
        }   
    } 
```

var_dumps 的输出是：

```
array(3) {
  [0]=>
  string(13) "bedupako|714
"
  [1]=>
  string(16) "newBedupako|624
"
  [2]=>
  string(19) "radioExtension|128
"
}
array(3) {
  [0]=>
  string(13) "bedupako|714
"
  [1]=>
  string(16) "newBedupako|624
"
  [2]=>
  string(19) "radioExtension|128
"
}
array(3) {
  [0]=>
  string(13) "bedupako|714
"
  [1]=>
  string(16) "newBedupako|624
"
  [2]=>
  string(19) "radioExtension|128
"
} 
```

即使它是一个数组，它也不会进入循环和打印`IN THE LOOP`！为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:20:07.417

这部分代码：

```
fwrite($val."\n"); 
```

应该：

```
fwrite($cache, $val); // the "\n" is only required if it was stripped off after fgets() 
```

的第一个参数`fwrite()`必须是用 . 打开的文件描述符`fopen()`。

当然，如果您在开发过程中打开电源`error_reporting(-1)`，`ini_set('display_errors', 'On')`您会立即发现这一点 :)

正如评论中所建议的那样，您应该尝试通过使用诸如`file()`将整个文件读入行数组然后使用`join()`并`file_put_contents()`写回整个内容的结构来简化代码。

如果您只想要一个键/值对的缓存，您可以查看如下内容：

```
// to read, assuming the cache file exists
$cache = include CACHE_FILE_PATH;

// write back cache
file_put_contents(CACHE_FILE_PATH, '<?php return ' . var_export($cache, true) . ';'); 
```

它读取和写入包含 PHP 本身可以读取的数据结构的文件（比您快得多）。

# javascript - 使用 JavaScript 读取本地 JSON 文件（无网络服务器）

> ID：13803634
> 
> 赞同：7
> 
> 时间：2012-12-10T15:10:39.577
> 
> 标签：javascript, json, file

似乎这已被多次询问，但我想确保仍然没有其他选择。

所以我需要做的是：

1.  从 .net 生成 .JSON 文件（简单）
2.  使用 JavaScript 读取本地 JSON 文件并生成包含有用图形等的 html 页面（使用 Raphaeljs）。
3.  将结果（HTML + 关联的 JavaScript）交付给客户端。

我不介意安装本地 Apache 以轻松读取 JSON 文件，但由于我无法要求客户端执行此操作，我正在寻找一种使用 JavaScript 读取本地 JSON 文件（在文件系统上，没有 Web 服务器）的方法，这样我最终为客户提供了 HTML、.js 和 .json，他可以看到相关的图表。

我一直在阅读该`FileReader`课程是一个选项，但我希望能够灵活地在许多 IE 浏览器上支持这些（比如说 IE7 到 IE10）。

任何有关如何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:39:46.340

由于安全原因，Web 浏览器无法从文件系统中读取文件。如果我理解正确，您在本地机器上运行了一个 .NET 应用程序？

如果是这种情况，您可以托管 WCF 服务以从您的应用程序中提供 JSON。[此MSDN 页面](http://msdn.microsoft.com/en-us/library/ms733765.aspx)上描述了 WCF 自托管。您应该能够从浏览器向本地主机上的应用程序中托管的服务器发出 AJAX 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:18:29.103

您无法在浏览器中从本地磁盘读取文件（安全限制）。但是，一旦您要交付 HTML + js 和 JSON（以 zip 格式？），您就可以像从常规 Web 服务器一样读取 json。只需使用相对链接，如果 JSON 将位于 HTML 和 JS 所在的同一文件夹中。或者您可以将您的 JSON 作为您交付给客户的 HTML 的一部分。

但是，如果您要在 Web 站点上显示一个页面（HTML 和 JS），您最好让客户端上传他们的 JSON 文件，而不是从服务器下载它（以 AJAX 样式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:14:55.870

如果你想支持旧的 IE，你需要进入 ActiveX 安全设置地狱。调查[`var fso = new ActiveXObject("Scripting.FileSystemObject");`](http://css.dzone.com/tips/javascript-how-read-and-write)

但是，如果您将内容和 HTML 文件交付给客户端，为什么不直接将 JSON 标记添加到 html 文档中呢？似乎是简单的解决方案。

# c# - 一周循环运行，不要选择周末

> ID：13803640
> 
> 赞同：0
> 
> 时间：2012-12-10T15:11:08.530
> 
> 标签：c#, asp.net, asp.net-mvc

因此，用户可以从 2 个日历中选择 2 个不同的日期，一个开始日期和一个结束日期，当他们单击`add`之间的日期时，包括所选日期在内的日期将被添加到数据库中，每个日期作为单独的记录。

这很好用，但是我不希望将周末添加到数据库中。

我已经更新了 datepicker [http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerCustomCellRender.html](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerCustomCellRender.html)的 UI， 但是如果用户选择 fri-mon 例如`fri,sat,sun and mon`将被添加到数据库中。如果 datyofweek 不是星期六或星期日，我试图只运行代码

```
 public ActionResult listHolidays(Holiday holiday, int? PersonId, string HolidayDate, string endDate)
        {
            DateTime startDates = Convert.ToDateTime(HolidayDate),
                     endDates = Convert.ToDateTime(endDate);

            while (startDates <= endDates)
            {
                if (startDates.DayOfWeek != DayOfWeek.Saturday || startDates.DayOfWeek != DayOfWeek.Sunday)
                {
                    Holiday holiday1 = new Holiday();
                    holiday1.PersonId = PersonId.Value;
                    holiday1.HolidayDate = startDates;

                    db.Holidays.AddObject(holiday1);
                    db.SaveChanges();

                     startDates = startDates.AddDays(1);
                }
            }

            return RedirectToAction("Index");
        } 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:13:25.410

您需要使用 AND 而不是 OR：

```
if (startDates.DayOfWeek != DayOfWeek.Saturday && startDates.DayOfWeek != DayOfWeek.Sunday) 
```

您当前的情况将永远为真。如果`startDates`是`DayOfWeek.Saturday`，则不是`DayOfWeek.Sunday`，反之亦然。

之后，您需要`startDates = startDates.AddDays(1);`将`if`.

否则，您将有一个无限循环，因为一旦`startDates`is `DayOfWeek.Saturday`，它将不再递增。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:14:23.390

改变

```
if (startDates.DayOfWeek != DayOfWeek.Saturday || startDates.DayOfWeek != DayOfWeek.Sunday) 
```

至

```
if (startDates.DayOfWeek != DayOfWeek.Saturday && startDates.DayOfWeek != DayOfWeek.Sunday) 
```

然后你需要移动这条线

```
startDates = startDates.AddDays(1); 
```

到`if`块之外（否则，`startDates`如果日期是周末日期，变量将永远不会改变）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:27:49.147

就像您计算您选择的工作日数的替代解决方案一样

```
List<DateTime> allDates = New List<DateTime>();
for (DateTime date = startingDate; date <= endingDate; date = date.AddDays(1))
    allDates.Add(date);
var days = allDates.Where(x => x.IsWeekday()).Count(); 
```

使用以下`DateTime`扩展名。

```
public static class DateTimeExtensions
{
  public static bool IsWeekday(this DateTime dt)
  {
   return dt.DayOfWeek != DayOfWeek.Sunday && dt.DayOfWeek != DayOfWeek.Saturday;
  }
} 
```

根据我的评论，您可以将其扩展到`IsWorkday`是否为假期系统，并结合一些逻辑来检查当天是否为银行假期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T15:15:42.187

如果语句错误并且在错误的地方增加天数。

```
 while (startDates <= endDates)
            {
                if (startDates.DayOfWeek != DayOfWeek.Saturday **&&** startDates.DayOfWeek != DayOfWeek.Sunday)
                {
                    Holiday holiday1 = new Holiday();
                    holiday1.PersonId = PersonId.Value;
                    holiday1.HolidayDate = startDates;

                    db.Holidays.AddObject(holiday1);
                    db.SaveChanges();

                }

                **startDates = startDates.AddDays(1);**
            } 
```

# ios - UINavigationController 代码推送到 UIViewController 无法正常工作

> ID：13803652
> 
> 赞同：0
> 
> 时间：2012-12-10T15:11:57.753
> 
> 标签：ios, uitableview, cocoa-touch, uinavigationcontroller, pushviewcontroller

当我通过另一个具有相同 UINavigationController 的 UIViewController 的代码推送到 UIViewController 时遇到问题。

注释和假设：

1.  我使用 IB 创建了所有 UIViewController，但想使用代码在它们之间推送。
2.  两个 UIViewControllers 都包含 UITableViews：第一个选择搜索条件，第二个显示结果。
3.  “LT”代表我班级名称中的联赛表。

我的 UINavigation 控制器中有三个类：

1.  LTMasterNavController - UINavigationController 类型 - 拥有所有后续视图控制器的属性和结果。一旦 LTOverviewViewController 生成了结果，LTResultsViewController 就会从这里检索结果。
2.  LTOverviewViewController - 包含 UITableView 的 UIViewController 类型。用于选择要在 LTResultsViewController 中显示的过滤器。
3.  LTResultsViewController - UIViewController 类型，包含一个 UITableView。用于显示来自 LTOverviewViewController 的结果

请在下面的 Dropbox 链接上找到我的代码： [https ://www.dropbox.com/sh/9m37y4f1gws99lf/VGNloaLSVO](https://www.dropbox.com/sh/9m37y4f1gws99lf/VGNloaLSVO)

当在 LTOverviewViewController 中按下“显示排行榜”按钮时，我希望程序从过滤器中获取结果，然后立即推送到 LTResultsViewController。

使用此代码，它会推送到 LTResultsViewController，但视图似乎不包含任何内容。它是黑色的，没有 UITable 视图，您无法选择任何内容。

在测试/调试中，我在 LTOverviewViewController 中创建了另一个名为“Push to Results”的按钮，并将其连接到 LTResultsViewController 作为 IB 中的推送操作。当按下“显示排行榜”按钮和“推送到结果”按钮时，它工作得很好，但是我希望它在没有用户按下第二个按钮的情况下发生。几天来一直坚持这一点，所以任何帮助将不胜感激！

非常感谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:22:08.523

使用故事板和转场，这相当简单。在情节提要中，单击要在其之间传输数据的 UIViewController 之间的连接，我猜是在 LTOverviewViewController 和 LTResultsViewController 之间，并给 segue 一个标识符名称：说 ResultsSegue。

现在，在 LTOverViewController 中，您需要实现此方法：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

在此方法中，您将识别 segue 名称和destinationViewController 并传递您希望新视图控制器拥有的数据。这是一个例子：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ResultsSegue"])
    {
        LTResultsViewController *viewController = [segue destinationViewController];
        [viewController setData:self.data];
    }
} 
```

当 storyboard 想要使用这个特定的 segue 时，这个方法将在移动到新的 viewController 之前被调用并执行。

# ruby-on-rails - Ruby on Rails：为嵌套表单执行功能测试

> ID：13803655
> 
> 赞同：0
> 
> 时间：2012-12-10T15:12:02.903
> 
> 标签：ruby-on-rails, nested-attributes, functional-testing

我有一个带有 3 个模型的 Rails 应用程序：模型`image, profile and user` 之间的关系如下：用户 has_one profile 用户 has_many images image 和 profile 属于用户

我有通过脚手架为我的初始用户模型创建的功能测试，但现在其中一些不再工作了。**我想编写一个测试，它将使用嵌套属性等覆盖整个表单。** 现在，所有数据库表都由单个页面上的嵌套表单填充，并且我的一些功能测试失败并出现错误。以下是相关测试和错误：

```
 test "should create user" do
    assert_difference('User.count') do
      post :create, :user => { :email => "testing@gmail.com",
                :first_name =>  "langlylo",
                :last_name => "aaaaa", 
                :orientation => "Straight",
                :password => "secret",
                :password_confirmation => "secret", 
                :gender => "Male",
                :location => "London" }
    end

  test "should show user" do
    get :show, id: @user
    assert_response :success
  end

  test "should update user" do
    # @user = user.authenticate 
    put :update, :id => @user.to_param, :user => @user
    assert_redirected_to @user
  end

 1) Failure:
test_should_create_user(UsersControllerTest) [/home/tim/fairym/test/functional/users_controller_test.rb:20]:
"User.count" didn't change by 1.
<4> expected but was
<3>.

  2) Error:
test_should_show_user(UsersControllerTest):
ActionView::Template::Error: undefined method `height' for nil:NilClass
    /home/tim/fairym/app/views/users/show.html.erb:30:in `_app_views_users_show_html_erb___2480425410967695566_34986560'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'

  3) Error:
test_should_update_user(UsersControllerTest):
NoMethodError: undefined method `stringify_keys' for "980190962":String
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/attribute_assignment.rb:69:in `assign_attributes'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/persistence.rb:215:in `block in update_attributes'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/transactions.rb:208:in `transaction'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/persistence.rb:214:in `update_attributes'
    /home/tim/fairym/app/controllers/users_controller.rb:79:in `block in update'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:270:in `call'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:270:in `retrieve_collector_from_mimes'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:194:in `respond_to'
    /home/tim/fairym/app/controllers/users_controller.rb:78:in `update'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:414:in `_run__4169349413879532592__process_action__1508431050785970058__callbacks'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/test_case.rb:469:in `process'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/test_case.rb:49:in `process'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/test_case.rb:396:in `put'
    /home/tim/fairym/test/functional/users_controller_test.rb:46:in `block in <class:UsersControllerTest>'

8 tests, 8 assertions, 1 failures, 2 errors, 0 skips 
```

新用户视图：

```
<p><h1>com</h1></p>
<p><h2>Signup Page</h2></p>
<%= form_for @user do |f| %>
    <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @user.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
        <%= f.label :gender, "I am a:" %><%= f.select :gender, options_for_select([["Man", "Male"], ["Woman", "Female"]]) %><br />
        <%= f.label :orientation, "Sexsual Orientation" %><%= f.select :orientation, options_for_select([["Straight", "Straight"], ["Gay", "Gay"], ["Bi","Bi"]]) %><br />
        <%= f.label :first_Name %><br /><%= f.text_field :first_name %><br />
        <%= f.label :last_name %><br /><%= f.text_field :last_name %><br />
        Date of Birth:<%= f.date_select( :date_of_birth, :start_year => 1920, :prompt => { :day => 'day', :month => 'month', :year => 'year' }) %><br />
        <%= f.label :location %><br /><%= f.text_field :location %><br />
        <%= f.label :email %><br /><%= f.text_field :email %><br />
        <%= f.label :password %><br /><%= f.password_field :password %><br />
            <%= f.label :password_confirmation %><br /><%= f.password_field :password_confirmation %><br />

        <%= f.fields_for :profile do |builder| %>
          <fieldset>
            <%= builder.label :height, "My height is: (cm)" %><%= builder.select :height, options_for_select(140..220) %><br />
            <%= builder.label :weight, "My weight is: (kg)" %><%= builder.text_field :weight %><br />
            <%= builder.label :body_type, "Body Type:" %><%= builder.select :body_type, options_for_select([["Curvy", "Curvy"], ["Fat", "Fat"], ["Slim","Slim"],["Average","Average"],["Athletic","Athletic"]]) %><br />
            <%= builder.label :ethnicity, "Ethnicity:" %><%= builder.select :ethnicity, options_for_select([["White", "White"], ["Black", "Black"], ["Blue","Blue"],["Asian","Asian"],["Other","Other"]]) %><br />
            <%= builder.label :religion, "Religion:" %><%= builder.select :religion, options_for_select([["Christian", "Christian"], ["Muslim", "Muslim"], ["Atheist","Atheist"],["Jewish","Jewish"],["Hindu","Hindu"]]) %><br />
            <%= builder.label :drinking, "Drinking:" %><%= builder.select :drinking, options_for_select([["Every day", "Every day"], ["A few times a week", "A few times a week"], ["Once a week","Once a week"],["Rarely","Rarely"],["Never","Never"]]) %><br />
            <%= builder.label :smoking, "Smoking:" %><%= builder.select :smoking, options_for_select([["Heavily", "Heavily"], ["Regularly", "Regularly"], ["When drinking","When drinking"],["Sometimes","Sometimes"],["Never","Never"]]) %><br />
            <%= builder.label :looking_for, "Looking For:" %><%= builder.text_field :looking_for %><br />
            <%= builder.label :physically_active, "Physically Active:" %><%= builder.select :physically_active, options_for_select([["All the time", "All the time"], ["Sometimes", "Sometimes"], ["When drinking","When drinking"], ["Rarely","Rarely"]]) %><br />
            <%= builder.label :cultural_favorites, "Favorite Music, Movies, Books:" %><%= builder.text_area :cultural_favorites, :rows => 5%><br />
          </fieldset>
        <% end %>
<%= f.fields_for :images do |z| %>
<fieldset>
<p>
    <%= z.label :image_title %><br />
    <%= z.text_field :image_title %>
    <%= z.hidden_field :image_priority, :value => '1' %> 
  </p>
  <p>
    <%= z.file_field :image_location %>
  </p>
</fieldset>
<% end %>

</div>
</script>
    <%= f.submit "Next" %>
<% end %>

<%= link_to 'Back', users_path %> 
```

浏览视图：

```
<h1>Find a match</h1>

<table border="0">

    <%= render 'userbox' %>

</table>

<br />

<%= link_to 'New User', new_user_path %> <%= link_to 'Logout', logout_path %> 
```

用户框部分：

```
<% @users.each do |user| %>     
<tr>

    <td>
          <% user.images.each do |img| %>
                <%= image_tag img.image_location_url.to_s %>
            <% end %>            
        </td>
    <td valign="top">
    <p>
        <%= link_to user.first_name, user_path(user) %></p>
    <p> <%= age(user.date_of_birth) %> / <%= user.gender %> / <%= user.orientation %></p>
    <p> from <%= user.location %></p>
    <p> Question? Answer answer answer answer answer answer answer</p>
</td>
  </tr>
  <% end %> 
```

用户控制器：

```
class UsersController < ApplicationController
  # GET /users
  # GET /users.json
  def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

  def browse
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

  # GET /users/1
  # GET /users/1.json
  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/new
  # GET /users/new.json
  def new       
    @user = User.new
    @user.build_profile
    @user.images.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/1/edit
  def edit
    @user = User.find(params[:id])
  end

  # POST /users
  # POST /users.json
  def create   
    @user = User.new(params[:user])
    @user.date_joined = DateTime.now.to_date
    @user.last_online = DateTime.now.to_date
    @user.admin = false

  respond_to do |format|
      if @user.save
        format.html { redirect_to browse_path, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
    format.js
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
  end
end

  # PUT /users/1
  # PUT /users/1.json
  def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, notice: 'User was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /users/1
  # DELETE /users/1.json
  def destroy
    @user = User.find(params[:id])
    @user.destroy

    respond_to do |format|
      format.html { redirect_to users_url }
      format.json { head :no_content }
    end
  end
end 
```

# asp.net-mvc - 使用自动布线的 Unity 拦截

> ID：13803656
> 
> 赞同：1
> 
> 时间：2012-12-10T15:12:04.713
> 
> 标签：asp.net-mvc, unity-container, aop, interceptor

我使用 HadlerAttribute 和 ICallHandler 实例让 Unity 拦截工作。为了让它工作，我所要做的就是用 [Trace] 属性装饰类，并且拦截器工作得很好。

```
 [Trace]
public interface IPersonService
{
    string GetPerson();
} 
```

但是，我希望在几个程序集中对我的所有方法都进行拦截。所以我使用 Unity AutoRegistration 来设置我的容器，如下所示：

```
private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();

        //container.AddNewExtension<UnityInterfaceInterceptionRegisterer>();

        container.
            ConfigureAutoRegistration().
            ExcludeSystemAssemblies().  
            LoadAssemblyFrom(typeof(PersonService).Assembly.Location).
            Include(If.ImplementsITypeName, Then.Register()).
            ApplyAutoRegistration();

        return container;
    } 
```

效果很好，除非我尝试按照这篇文章设置全局注册：http: [//unity.codeplex.com/discussions/281022](http://unity.codeplex.com/discussions/281022)

我有一个 UnityContainerExtension 配置如下，其中 MVC4Unity 是我的 DLL：

```
public class UnityInterfaceInterceptionRegisterer : UnityContainerExtension
{
    protected override void Initialize()
    {
        base.Container.AddNewExtension<Interception>();

        base.Container.Configure<Interception>().
            AddPolicy("LoggingPolicy").
            AddMatchingRule<AssemblyMatchingRule>
            (new InjectionConstructor("MVC4Unity")).
            AddCallHandler(new TraceCallHandler()); 

        base.Context.Registering += new EventHandler<RegisterEventArgs>(this.OnRegister);
    }

    private void OnRegister(object sender, RegisterEventArgs e)
    {
        IUnityContainer container = sender as IUnityContainer;

        if (e != null && e.TypeFrom != null && e.TypeFrom.IsInterface)
        {
            container.Configure<Interception>()
                .SetInterceptorFor(e.TypeFrom, e.Name, new InterfaceInterceptor());
        }
    }
} 
```

不幸的是，当它进入 OnRegister 方法时，它总是抛出 StackOverflowException (!)。

那么问题是，是否有人使用 Unity 实现了程序集甚至命名空间范围的拦截，这是要走的路吗？

[编辑]

似乎无论我在下面的 AddMatchingRule 行中添加什么，都会为所有包含的程序集调用 OnRegister 处理程序！（例如甚至 Microsoft.* 命名空间程序集！）

```
base.Container.AddNewExtension<Interception>();

        base.Container.Configure<Interception>().
            AddPolicy("LoggingPolicy").
            // see what other types of matchings rules there are!
            AddMatchingRule<NamespaceMatchingRule>
            (new InjectionConstructor("MVC4Unity.*")).
            AddCallHandler(new TraceCallHandler()); 

        base.Context.Registering += new EventHandler<RegisterEventArgs>(this.OnRegister); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T07:33:12.323

我的答案迟到了，但也许有人会觉得这很有用。

*   如果我正确理解了这个问题，您需要将一个匹配规则应用于多个程序集。对于这些类型的任务，您可以使用`AssemblyMatchingRule`( [MSDN](http://msdn.microsoft.com/en-us/library/ff648371.aspx) )。

    ```
    container.Configure<Interception>()
      .AddPolicy("logging")
      .AddMatchingRule<AssemblyMatchingRule>(
         new InjectionConstructor(
         new InjectionParameter("YourAssemblyName")))
      .AddCallHandler<LoggingCallHandler>(
         new ContainerControlledLifetimeManager(),
         new InjectionConstructor(), new InjectionProperty("Order", 1)); 
    ```

*   在您的最后一个代码片段中，我认为您需要删除命名空间末尾的点星号，以便将`MVC4Unity`命名空间添加到您的`NamespaceMatchingRule`.

* * *

有关其他信息，请查看此链接 -[策略注入 MSDN](http://msdn.microsoft.com/en-us/library/dn178466%28v=pandp.30%29.aspx#sec15)

# clojure - 为什么 Clojure 中需要 attr-map？

> ID：13803658
> 
> 赞同：3
> 
> 时间：2012-12-10T15:12:18.783
> 
> 标签：clojure

我浏览了谷歌和几本书，但找不到关于 attr-map 的文档。

```
(c/defmacro ^:clojure-special-form throw
  "Throw to the catch for TAG and return VALUE from it.
  Both TAG and VALUE are evalled."
  {:arglists '([TAG VALUE])}
  [tag value] 
```

尽管有参数向量，为什么需要 attr-map？也有人可以向我指出有关 Clojure 中元数据的详细资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:32:28.550

在这种情况下不需要它。这是多余的。

```
user=> (defmacro ^:clojure-special-form throw   {:arglists '([TAG VALUE])} [tag value]   `(throw (Exception. ~tag ~value)))
#'user/throw
user=> (meta #'throw)
{:macro true, :ns #<Namespace user>, :name throw, :file "NO_SOURCE_PATH", :line 41, :arglists ([TAG VALUE]), :tag :clojure-special-form} 
```

与之比较：

```
user=> (defmacro ^:clojure-special-form throw [tag value]   `(throw (Exception. ~tag ~value)))
#'user/throw
user=> (meta #'throw)
{:macro true, :ns #<Namespace user>, :name throw, :file "NO_SOURCE_PATH", :line 43, :arglists ([tag value]), :tag :clojure-special-form} 
```

请参阅此[特殊形式](http://clojure.org/special_forms)的解释。

另请参阅：[学习 Clojure：元数据](http://en.wikibooks.org/wiki/Learning_Clojure/Meta_Data)

# c# - 有效的 ObservableCollection 强制转换抛出 InvalidCastException

> ID：13803659
> 
> 赞同：1
> 
> 时间：2012-12-10T15:12:29.047
> 
> 标签：c#, .net, wcf

我收到一个 InvalidCastException 设置两个类型相等。对可能导致这种情况的特定行为的想法？

*   使用字段定义定义 this.governanceTemplateList 不会更改异常。
*   在构造函数中将 this.governanceTemplateList 定义为新的 ObservableCollection 会引发完全相同的异常。
*   以下代码位于 WCF 服务库中，使用 .NET 4.0。

[编辑器、异常、监视和参考的屏幕截图。](http://imgur.com/kxfqu,DJ9zb#1)

**解决方案：**

Daniel Hilgarth 是正确的，正是上面的代码行引发了异常。我将空值转换为可空值（DateTime？），但隐式转换无法转换空值。为了正确转换，您必须使用 AS 关键字。

```
governanceTemplateTimestamp = (DateTime?)dr["GovernanceTemplateTimestamp"]; //Invalid

governanceTemplateTimestamp = dr["GovernanceTemplateTimestamp"] as DateTime?; //Valid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:21:46.983

异常很可能发生在上面的行。被标记为有问题的行没有执行任何强制转换。
我想那`GovernanceTemplateTimestamp`在`DBNull`你的 DataRow 中。`DBNull`不能转换为`DateTime?`.

# webdriver - 从输入字段中提取文本 - 使用 Webdriver

> ID：13803660
> 
> 赞同：3
> 
> 时间：2012-12-10T15:12:31.280
> 
> 标签：webdriver, selenium-webdriver

如何从输入文件中提取文本？我尝试使用 XPath/CSSSelector 但我得到一个空文本，因为它是一个输入字段。

这是我的html代码：

```
<div>
     <input type="text" style="width:110px;" class="display">
</div> 
```

结果：195 行中的 1 到 50

这是输入字段的屏幕截图：

![在此处输入图像描述](../Images/df3a33eefe813c69b08605eb737f5602.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T15:18:20.607

您需要获取该字段的值。例如：`element.get_attribute("value")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:18:47.697

我正在使用 C#，所以这里是完整的工作代码：

```
public string TextAttributeValueByCssSelector(By by)
{
   var wait = new WebDriverWait(_driver, TimeSpan.FromSeconds(30));
   return wait.Until(drv => drv.FindElement(by)).GetAttribute("value");
} 
```

# colorbar - 灰度背景图像上叠加索引图像的颜色图和颜色条？

> ID：13803663
> 
> 赞同：2
> 
> 时间：2012-12-10T15:12:42.967
> 
> 标签：colorbar

我使用以下示例代码在背景图像上叠加索引图像（在下面的示例中，它是 RGB，但对于我的问题，背景是灰色的 sacle 图像）。然后我的问题是：

1.  如何在叠加图像的一侧显示颜色条？颜色条应该是覆盖索引图像的颜色条而不是背景图像的颜色条。

2.  如何修复覆盖索引图像的颜色图范围？我有几对灰度背景+叠加索引图像（使用'jet'彩色图）。我需要它们以相同的比例显示。我尝试使用`set(iim2,'caxis', [0 1]);`，但 Matlab 中的“图像”没有“caxis”的属性。

请帮助，非常感谢！

```
% Create the background
% This example uses a blend of colors from left to right, converted to a TrueColor image
% Use repmat to replicate the pattern in the matrix
% Use the "jet" colormap to specify the color space
bg = ind2rgb(repmat(1:64,64,1),jet(64));

% Create an image and its corresponding transparency data
% This example uses a random set of pixels to create a TrueColor image
im = rand(100,100,3);
% Make the image fade in from left to right by designing its alphadata
% Use repmat to replicate the pattern in the transparency fading
imAlphaData = repmat(0:1/size(im,2):1-1/size(im,2),size(im,1),1);

% Display the images created in subplots
hf = figure('units','normalized','position',[.2 .2 .6 .6]);
ax1 = subplot(2,3,1);
ibg = image(bg);
axis off
title('Background')
ax2 = subplot(2,3,4);
iim = image(im);
axis off
title('Image without transparency yet')

% Now set up axes that overlay the background with the image
% Notice how the image is resized from specifying the spatial
% coordinates to locate it in the axes.
ax3 = subplot(2,3,[2:3, 5:6]);
ibg2 = image(bg);
axis off
hold on
% Overlay the image, and set the transparency previously calculated
iim2 = image(im,'XData',[30 50],'YData',[10 30]);
set(iim2,'AlphaData',imAlphaData);
title(sprintf('Using transparency while overlaying images:\nresult is multiple image objects.')) 
```

# select - AngularJS - 选择的值属性

> ID：13803665
> 
> 赞同：72
> 
> 时间：2012-12-10T15:12:48.697
> 
> 标签：select, angularjs, options

源 JSON 数据为：

```
[
  {"name":"Alabama","code":"AL"},
  {"name":"Alaska","code":"AK"},
  {"name":"American Samoa","code":"AS"},
  ...
] 
```

我试试

```
ng-options="i.code as i.name for i in regions" 
```

但我得到：

```
<option value="?" selected="selected"></option>
<option value="0">Alabama</option>
<option value="1">Alaska</option>
<option value="2">American Samoa</option> 
```

虽然我期望得到：

```
<option value="AL">Alabama</option>
<option value="AK">Alaska</option>
<option value="AS">American Samoa</option> 
```

那么，如何获取值属性并去掉“？” 物品？

顺便说一句，如果我将 $scope.regions 设置为静态 JSON 而不是 AJAX 请求的结果，则空项目会消失。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-10T20:33:13.260

您首先尝试的应该可以工作，但 HTML 不是我们所期望的。我添加了一个选项来处理最初的“未选择项目”情况：

```
<select ng-options="region.code as region.name for region in regions" ng-model="region">
   <option style="display:none" value="">select a region</option>
</select>
<br>selected: {{region}} 
```

上面生成了这个 HTML：

```
<select ng-options="..." ng-model="region" class="...">
   <option style="display:none" value class>select a region</option>
   <option value="0">Alabama</option>
   <option value="1">Alaska</option>
   <option value="2">American Samoa</option>
</select> 
```

[小提琴](http://jsfiddle.net/mrajcok/vd73G/)

即使 Angular 使用数字整数作为值，模型（即 $scope.region）也会根据需要设置为 AL、AK 或 AS。（当从列表中选择一个选项时，Angular 使用数值来查找正确的数组条目。）

当第一次学习 Angular 如何实现它的“选择”指令时，这可能会让人感到困惑。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-10T15:36:17.307

除非您自己在 ng-repeat 中构建它们，否则您无法真正做到这一点。

```
<select ng-model="foo">
   <option ng-repeat="item in items" value="{{item.code}}">{{item.name}}</option>
</select> 
```

但是……这可能不值得。最好让它按设计运行，让 Angular 处理内部工作。Angular 以这种方式使用索引，因此您实际上可以将整个对象用作值。因此，您可以使用下拉绑定来选择整个值而不仅仅是一个字符串，这非常棒：

```
<select ng-model="foo" ng-options="item as item.name for item in items"></select>

{{foo | json}} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-07-30T14:25:59.937

如果您使用该`track by`选项，则该`value`属性已正确写入，例如：

```
<div ng-init="a = [{label: 'one', value: 15}, {label: 'two', value: 20}]">
    <select ng-model="foo" ng-options="x for x in a track by x.value"/>
</div> 
```

产生：

```
<select>
    <option value="" selected="selected"></option>
    <option value="15">one</option>
    <option value="20">two</option>
</select> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-10T15:36:33.420

如果为下拉列表指定的模型不存在，则 Angular 将生成一个空选项元素。因此，您必须像这样在 select 上明确指定模型：

 ~~~~```
<select ng-model="regions[index]" ng-options="...."> 
```~~ 

~~请参阅以下内容，因为之前已经回答过：~~

 ~~[为什么 AngularJS 在选择中包含一个空选项？](https://stackoverflow.com/questions/12654631/why-does-angularjs-include-an-empty-option-in-select)和这个[小提琴](http://jsfiddle.net/2JWb2/5/)

**更新：**试试这个：

```
<select ng-model="regions[index].code" ng-options="i.code as i.name for i in regions">
</select>

or

<select ng-model="regions[2]" ng-options="r.name for r in regions">
</select> 
```

请注意，选择中没有空选项元素。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-10T15:38:56.150

您可以将模型修改为如下所示：

```
$scope.options = {
    "AL" : "Alabama",
    "AK" : "Alaska",
    "AS" : "American Samoa"
  }; 
```

然后使用

```
<select ng-options="k as v for (k,v) in options"></select> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-29T05:02:13.430

似乎不可能以任何有意义的方式将 select 的“值”实际用作普通的 HTML 表单元素，并且还可以使用 ng-options 以批准的方式将其连接到 Angular。作为妥协，我最终不得不在我的选择旁边放置一个隐藏的输入，并让它跟踪与我的选择相同的模型，就像这样（为简洁起见，所有这些都非常简化了真实的生产代码）：

HTML：

```
<select ng-model="profile" ng-options="o.id as o.name for o in profiles" name="something_i_dont_care_about">
</select>
<input name="profile_id" type="text" style="margin-left:-10000px;" ng-model="profile"/> 
```

Javascript：

```
App.controller('ConnectCtrl',function ConnectCtrl($scope) {
$scope.profiles = [{id:'xyz', name:'a profile'},{id:'abc', name:'another profile'}];
$scope.profile = -1;
} 
```

然后，在我刚刚查找的服务器端代码中`params[:profile_id]`（这恰好是一个 Rails 应用程序，但同样的原则适用于任何地方）。因为隐藏的输入与选择跟踪相同的模型，所以它们会自动保持同步（不需要额外的 javascript）。这是 Angular 最酷的部分。它几乎弥补了它对 value 属性所做的副作用。

有趣的是，我发现这种技术只适用于未隐藏的输入标签（这就是为什么我必须使用 margin-left:-10000px; 将输入移出页面的技巧）。这两种变体不起作用：

```
<input name="profile_id" type="text" style="display:none;" ng-model="profile"/> 
```

和

```
<input name="profile_id" type="hidden" ng-model="profile"/> 
```

我觉得这一定意味着我错过了一些东西。对于 Angular 来说，这似乎太奇怪了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-21T06:35:56.967

您可以使用

```
state.name for state in states track by state.code 
```

JSON数组中的states，state是数组中每个对象的变量名。

希望这可以帮助

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-12-22T03:26:47.637

尝试如下：

```
var scope = $(this).scope();
alert(JSON.stringify(scope.model.options[$('#selOptions').val()].value)); 
```~~~~

# asp.net - 谷歌分析代码放置在母版页的头部标签中？

> ID：13803666
> 
> 赞同：0
> 
> 时间：2012-12-10T15:12:52.343
> 
> 标签：asp.net, google-analytics, themes

这是我的母版页头部的代码...

```
<link rel="stylesheet" type="text/css" href="App_Themes/screen.css" />
<link rel="shortcut icon" href="/images/favicon.ico">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

但是当我在浏览器视图源中看到它时......它显示它是这样的

```
<link rel="stylesheet" type="text/css" href="App_Themes/screen.css" />
<link rel="shortcut icon" href="/images/favicon.ico">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
   <link href="App_Themes/Site/style.css" type="text/css" rel="stylesheet" /> 
```

您注意到在标签之前的 App_Themes/Site/style.css 末尾有一个主题渲染...请告诉我如何修复它...我需要在标签之前使用谷歌分析代码...但是这个主题渲染在结局禁止我实现我的目标......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:15:36.663

我猜你正在使用 ASP.Net 主题？

ASP.Net 呈现您`Theme`并将样式添加到页面。

放置 Google 代码的最佳位置是在页面底部`</body>`标签之前。

事实上，谷歌建议它就在结束正文标记之前，如标准设置片段之后所述

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingOverview](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingOverview)

# android - 不显示操作栏项目 - android

> ID：13803667
> 
> 赞同：0
> 
> 时间：2012-12-10T15:12:58.000
> 
> 标签：android, menu, android-actionbar

我不知道该怎么处理这个问题。我改变了很多，但它仍然没有显示夏洛克动作栏项目。这是我的代码：

```
public boolean onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu);
    MenuInflater minflater = this.getSupportMenuInflater();
    minflater.inflate(R.menu.activity_main, (com.actionbarsherlock.view.Menu) menu);
    return super.onCreateOptionsMenu(menu);
} 
```

我使用夏洛克活动。如果有人可以帮助我，请注意我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:50:23.030

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    MenuInflater minflater = getSupportMenuInflater();
    minflater.inflate(R.menu.activity_main, menu);

    return true;
} 
```

并确保你有这些进口：

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater; 
```

你应该尽量避免这些：`minflater.inflate(R.menu.activity_main, (com.actionbarsherlock.view.Menu) menu);`

并像这样声明你的activity_main.xml（伪代码）：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menuStatusUpdate"
        android:icon="@drawable/ic_action_status"
        android:showAsAction="ifRoom|withText"
        android:title="Status Update">
    </item>
    <item
        android:id="@+id/menuPhotoUpload"
        android:icon="@drawable/ic_action_gallery"
        android:showAsAction="ifRoom|withText"
        android:title="Photo">
    </item>    
</menu> 
```

您可以使用此属性：`android:showAsAction="ifRoom|withText"`并替换`ifRoom|withText`为`always`

# java - 避免在调用侦听器之前执行代码？

> ID：13803670
> 
> 赞同：1
> 
> 时间：2012-12-10T15:13:07.193
> 
> 标签：java, events, jframe, wait

我有一个 Main 类和另一个扩展 jFrame 的类，它直接在其中保存一个 jTable。我有点想阻止代码执行，直到发生某些事情（= 用户按 Enter 键）。然后我想从我在另一个类 MyJFrame 中保存的表中获取所选行的值。至于现在，我正试图实现这一点：

```
ArrayList<String[]> result = new ArrayList<String[]>();
String[ ] columns = new String[] {"h1", "h2", "h3" };

result.add(new String[]{ "some", "test", "values" });
result.add(new String[]{ "some", "test", "values" });

ArrayListTableModel model = new ArrayListTableModel(result, columns);

//waiting for enter...

MyJFrame frame = new MyJFrame(model);
int row = frame.getActiveRow();
selectedData = result.get(row); 
```

PS：我希望你能理解我的问题，我在解释它时遇到了一些麻烦......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:40:47.173

> ..扩展一个jFrame，..然后我想从我在另一个类MyJFrame中保存的表中获取所选行的值。

请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556) 其中一个框架可能应该是一个模式对话框来解决当前的问题。该对话框将在打开时“暂停”程序。

有关“等待回复”的示例，请参阅[此答案](https://stackoverflow.com/questions/13800621/logout-the-application-when-application-closes/13800686#13800686)。

![](../Images/b90c834fe961bf7b4fe7f7201db18b07.png)

# mysql - 如何使用 Ebean createSqlQuery 在列表中进行选择

> ID：13803671
> 
> 赞同：5
> 
> 时间：2012-12-10T15:13:12.263
> 
> 标签：mysql, playframework-2.0, ebean

我正在用 Ebean 构建一个 Play2 应用程序。我创建了一个服务类，其中包含通过 id 列表获取场所的方法：

```
public static List<Venue> getVenuesForIds(List<Long> list){          
    ArrayList<Venue> venues = new ArrayList<Venue>();
    String sql = "select c.id, c.name from Company c where in (:ids)";
    List<SqlRow> sqlRows =
                Ebean.createSqlQuery(sql).setParameter("ids", list).findList();        
    for(SqlRow row : sqlRows) {
        venues.add(new Venue(row.getLong("id"), row.getString("name")));
    }        
    return venues;
} 
```

但我得到：

```
[PersistenceException: Query threw SQLException:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'in (201639091,201637666)' at line 1 Query was: select c.id, c.name from Company c where in (?,?) ] 
```

我已经阅读了[http://www.avaje.org/ebean/introquery.html](http://www.avaje.org/ebean/introquery.html)但可能错过了正确的语法。我想在原始 sql 中执行此操作。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:02:02.903

您不需要执行这种“复杂”的查询，如果您`Finder<I,T>`在`Venue`模型中使用 common（一次）就足够了：

```
@Entity
@Table(name = "Company")
public class Venue extends Model {

    @Id
    public Long id;
    public String name;
    // other fields

    public static Finder<Long, Venue> find
            = new Finder<Long, Venue>(Long.class, Venue.class);
} 
```

因此，您可以使用...方法中的单行代码执行相同的任务：

```
 public static List<Venue> getVenuesForIds(List<Long> ids){          
     return Venue.find.select("id,name").where().idIn(ids).findList();
 } 
```

或类似的表达方式：

```
 public static List<Venue> getVenuesForIds(List<Long> ids){          
     return Venue.find.select("id,name").where().in("id",ids).findList();
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:16:45.807

您的要求似乎不正确。

关于什么 ：

```
 "select c.id, c.name from Company c where c.id in (:ids)"; 
```

# python - python 标准库等价于 dateutil.parser.parse

> ID：13803672
> 
> 赞同：3
> 
> 时间：2012-12-10T15:13:13.870
> 
> 标签：python, datetime, standard-library, python-dateutil

我正在使用 python dateutil 解析日期时间戳，但想避免额外的依赖。那么有没有办法用标准的python库做同样的事情：

```
dateutil.parser.parse("2012-12-12T12:00") 
```

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T15:15:07.847

如果您的日期字符串都采用相同的格式，您可以像这样使用[strptime](http://docs.python.org/2/library/datetime.html#datetime.datetime.strptime)：

```
In [31]: import datetime as DT

In [32]: DT.datetime.strptime("2012-12-12T12:00", '%Y-%m-%dT%H:%M')
Out[32]: datetime.datetime(2012, 12, 12, 12, 0) 
```

# qt - QML 中的 Listmodel 问题

> ID：13803676
> 
> 赞同：1
> 
> 时间：2012-12-10T15:13:25.070
> 
> 标签：qt, qml, qt-quick

我需要获取列表模型数组中的项目数，其中数组是列表的元素之一。请参考以下代码片段。

我需要获取列表元素中“lValues”的计数。（例如在 C++ 方面：sizeof.lValues[]）

```
ListModel {
        id: primaryList
        ListElement {
            Color: "label"
            lValues: [
                ListElement { lValues: 20 },
                ListElement { lValues: 0  },
                ListElement { lValues: 50 },
                ListElement { lValues: 60 },
                ListElement { lValues: 35 },
                ListElement { lValues: 70 },
                ListElement { lValues: 80 }
            ]
    }
} 
```

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:28:15.447

这是你想要的吗？

```
ListModel {
        id: primaryList
        ListElement {
            Color: "label"
            lValues: [
                ListElement { lValues: 20 },
                ListElement { lValues: 0  },
                ListElement { lValues: 50 },
                ListElement { lValues: 60 },
                ListElement { lValues: 35 },
                ListElement { lValues: 70 },
                ListElement { lValues: 80 }
            ]
    }
}
Text {
    text: primaryList.get(0).lValues.count
} 
```

# javascript - 设置文本宽度或将文本放入 div

> ID：13803678
> 
> 赞同：0
> 
> 时间：2012-12-10T15:13:28.913
> 
> 标签：javascript, svg, d3.js

我希望能够在 D3 中设置文本元素的宽度。现在我在一个圆圈中有一些文字，但我无法设置这个元素的宽度。（假设这`nodeEnter`是我图中的一个节点）

```
nodeEnter.append("circle")
    .attr("r", function(d){return d.radius+"px";});

/* Add text in middle of circle */
nodeEnter.append('text')
    .text("this is a very long text"); 
```

我想要的是找到一种简单的方法来设置该文本元素的宽度（溢出下降，如在一个简单的`div`）。我现在的方式如下：

```
nodeEnter.append("circle")
    .attr("r", function(d){return d.radius+"px";});

/* Add text in middle of circle */ 
nodeEnter.append("foreignObject")
    .attr("width", 130)
    .attr("height", 200)
    .attr("class", "myCSS")
    .append("xhtml:div")
    .html("this is a very long text"); 
```

但是我不认为这是最好的解决方案，例如我设置的所有内容都`myCSS`被覆盖了。此外，我不知道如何将外来对象居中（尤其是在 x 轴上）。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:36:01.143

如果你想要自动换行，`foreignObject`用 a`div`是要走的路。您提到的问题可以相对容易地解决。当您`myCSS`为 svg 元素设置时，您并没有为`div`. 如果在附加 后添加设置 CSS 类的行`div`，它应该会选择设置。

使文本居中的最简单方法可能是将 的大小设置`div`为接触圆的边缘并添加 CSS 以使文本在`div`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:52:41.987

如果您只是创建圆圈，则始终可以使用常规 HTML 元素来创建圆圈并使用绝对定位来定位它们。

[http://jsfiddle.net/FPkxV/](http://jsfiddle.net/FPkxV/)

HTML：

```
<p><span></span><span>This is some text which will wrap if it gets too long!</span></p>​ 
```

CSS：

```
* { margin: 0; padding: 0; }
body { font: 10px sans-serif; }
p { 
    background: red;
    text-align: center;
    border-radius: 50px; 
    width: 100px; 
    height: 100px; }
p span { 
    vertical-align: middle;
    display: inline-block; }
p span:first-child { height: 100px; } 
```

这还具有[在 IE7 和 IE8 上得到支持的优势。](http://caniuse.com/#cats=SVG)

# git - Netbeans + Git - 基础知识

> ID：13803686
> 
> 赞同：-3
> 
> 时间：2012-12-10T15:13:43.230
> 
> 标签：git, unix, netbeans, ftp-server

我们的情况：

我们想使用 git 来管理我们的项目文件。所以我们已经建立了一个unix服务器并在那里安装了git。然后我们创建了一个目录并初始化了一个 git 存储库。

在我们的工作场所（windows pc）上，我们安装了 netbeans 和 git 以一起使用它们。现在问题开始了。我们可以通过 ssh 从服务器克隆存储库，但现在我们只了解 git 的工作原理。

我们如何处理克隆/拉取的文件以及我们如何更新对服务器的更改？这是我的理解：

[http://i.imgur.com/EuqM8.jpg](http://i.imgur.com/EuqM8.jpg)

你也可以回答图片上的问题吗？！

谢谢，皮特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:16:52.530

在 git 网站上有一本名为[Pro Git的免费书籍。](http://git-scm.com/book)了解 git 是什么以及如何使用它非常有用。

# java - request.getParameter() 和 form.get() 之间的区别

> ID：13803694
> 
> 赞同：0
> 
> 时间：2012-12-10T15:14:26.600
> 
> 标签：java, jsp, struts

我对 struts 1.x 有一个基本的疑问

就效率而言，使用`request.getParameter('name')`and从 jsp 中获取价值有什么不同。`form.get('name')`

我知道`form.get()`返回一个对象，而前者返回一个字符串。

我想知道在动作类中是否值得从执行方法的表单参数中获取 dynaActionForm 并使用它来获取用户在 jsp 中输入的值。还是 request.getParameter 就足够了？如果我进行类型转换并创建一个表单对象，还有其他用途吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:55:15.513

最好使用 request.getParameter()。

# c++ - 我如何获得 argv[0]？

> ID：13803695
> 
> 赞同：1
> 
> 时间：2012-12-10T15:14:38.020
> 
> 标签：c++, objective-c, cocoa

在 C++ 中，我最后得到的应用程序路径没有应用程序名称：

```
 std::string dir = dirname(argv[0]); 
```

它工作没有任何问题，但是当我计划使用可可时它说：

错误：未在此范围内声明“argv”，现在我迷路了，我尝试过：

```
NSArray *args = [[NSProcessInfo processInfo] arguments];

std::string dir = dirname(args); 
```

但没有任何运气，请帮帮我！

ps：如果您想知道，我已经将文件从 .m 更改为 .mm

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:36:44.500

以下是获取应用程序路径的方法：

```
[[NSBundle mainBundle] bundlePath]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:27:39.597

而不是说

```
std::string dir = dirname(args); 
```

尝试以下操作：

```
NSArray *args = [[NSProcessInfo processInfo] arguments];
NSString* arg0 = args[0];
std::string dir = dirname([arg0 fileSystemRepresentation]); 
```

希望有帮助

# c++ - NUMA 架构上大 (8MB) 内存区域的可扩展分配

> ID：13803697
> 
> 赞同：23
> 
> 时间：2012-12-10T15:14:47.783
> 
> 标签：c++, memory-management, parallel-processing, tbb, numa

我们目前正在使用 TBB 流程图，其中 a) 并行过滤器处理数组（与偏移量并行）并将处理后的结果放入中间向量（在堆上分配；大多数向量将增长到 8MB）。然后将这些向量传递给节点，然后节点根据它们的特征对这些结果进行后处理（在 a) 中确定）。由于资源同步，每个特征只能有一个这样的节点。我们编写的原型在 UMA 架构上运行良好（在单个 CPU Ivy Bridge 和 Sandy Bridge 架构上进行了测试）。但是，该应用程序无法在我们的 NUMA 架构（4 CPU Nehalem-EX）上扩展。我们将问题归结为内存分配并创建了一个最小示例，其中我们有一个并行管道，它只从堆中分配内存（通过 8MB 块的 malloc，然后 memset 8MB 区域；类似于最初的原型会做的）直到一定的内存量。我们的发现是：

*   在 UMA 架构上，应用程序随着管道使用的线程数线性扩展（通过 task_scheduler_init 设置）

*   在 NUMA 架构上，当我们将应用程序固定到一个套接字（使用 numactl）时，我们会看到相同的线性放大

*   在 NUMA 架构上，当我们使用多个套接字时，我们的应用程序运行时间会随着套接字数量的增加而增加（负线性比例-“向上”）

对我们来说，这听起来像是堆争用。到目前为止，我们尝试的是用 Intel 的 TBB 可扩展分配器代替 glibc 分配器。但是，在单个套接字上的初始性能比使用 glibc 更差，在多个套接字上的性能没有变差，但也没有变得更好。我们使用 tcmalloc、hoard 分配器和 TBB 的缓存对齐分配器获得了相同的效果。

问题是是否有人遇到过类似的问题。堆栈分配对我们来说不是一个选项，因为我们希望即使在管道运行之后也保留堆分配的向量。一个堆如何在 NUMA 架构上从多个线程有效地分配 MB 大小的内存区域？我们真的很想保持动态分配方法，而不是预先分配内存并在应用程序中管理它。

我使用 numactl 附加了各种执行的性能统计信息。Interleaving/localalloc 没有任何效果（QPI 总线不是瓶颈；我们验证了使用 PCM，QPI 链路负载为 1%）。我还添加了一个图表，描述了 glibc、tbbmalloc 和 tcmalloc 的结果。

perf stat bin/原型 598.867

'bin/prototype' 的性能计数器统计信息：

```
 12965,118733 task-clock                #    7,779 CPUs utilized          
        10.973 context-switches          #    0,846 K/sec                  
         1.045 CPU-migrations            #    0,081 K/sec                  
       284.210 page-faults               #    0,022 M/sec                  
17.266.521.878 cycles                    #    1,332 GHz                     [82,84%]
15.286.104.871 stalled-cycles-frontend   #   88,53% frontend cycles idle    [82,84%]
10.719.958.132 stalled-cycles-backend    #   62,09% backend  cycles idle    [67,65%]
 3.744.397.009 instructions              #    0,22  insns per cycle        
                                         #    4,08  stalled cycles per insn [84,40%]
   745.386.453 branches                  #   57,492 M/sec                   [83,50%]
    26.058.804 branch-misses             #    3,50% of all branches         [83,33%]

   1,666595682 seconds time elapsed 
```

perf stat numactl --cpunodebind=0 bin/prototype 272.614

'numactl --cpunodebind=0 bin/prototype' 的性能计数器统计信息：

```
 3887,450198 task-clock                #    3,345 CPUs utilized          
         2.360 context-switches          #    0,607 K/sec                  
           208 CPU-migrations            #    0,054 K/sec                  
       282.794 page-faults               #    0,073 M/sec                  
 8.472.475.622 cycles                    #    2,179 GHz                     [83,66%]
 7.405.805.964 stalled-cycles-frontend   #   87,41% frontend cycles idle    [83,80%]
 6.380.684.207 stalled-cycles-backend    #   75,31% backend  cycles idle    [66,90%]
 2.170.702.546 instructions              #    0,26  insns per cycle        
                                         #    3,41  stalled cycles per insn [85,07%]
   430.561.957 branches                  #  110,757 M/sec                   [82,72%]
    16.758.653 branch-misses             #    3,89% of all branches         [83,06%]

   1,162185180 seconds time elapsed 
```

perf stat numactl --cpunodebind=0-1 bin/prototype 356.726

'numactl --cpunodebind=0-1 bin/prototype' 的性能计数器统计信息：

```
 6127,077466 task-clock                #    4,648 CPUs utilized          
         4.926 context-switches          #    0,804 K/sec                  
           469 CPU-migrations            #    0,077 K/sec                  
       283.291 page-faults               #    0,046 M/sec                  
10.217.787.787 cycles                    #    1,668 GHz                     [82,26%]
 8.944.310.671 stalled-cycles-frontend   #   87,54% frontend cycles idle    [82,54%]
 7.077.541.651 stalled-cycles-backend    #   69,27% backend  cycles idle    [68,59%]
 2.394.846.569 instructions              #    0,23  insns per cycle        
                                         #    3,73  stalled cycles per insn [84,96%]
   471.191.796 branches                  #   76,903 M/sec                   [83,73%]
    19.007.439 branch-misses             #    4,03% of all branches         [83,03%]

   1,318087487 seconds time elapsed 
```

perf stat numactl --cpunodebind=0-2 bin/protoype 472.794

'numactl --cpunodebind=0-2 bin/prototype' 的性能计数器统计信息：

```
 9671,244269 task-clock                #    6,490 CPUs utilized          
         7.698 context-switches          #    0,796 K/sec                  
           716 CPU-migrations            #    0,074 K/sec                  
       283.933 page-faults               #    0,029 M/sec                  
14.050.655.421 cycles                    #    1,453 GHz                     [83,16%]
12.498.787.039 stalled-cycles-frontend   #   88,96% frontend cycles idle    [83,08%]
 9.386.588.858 stalled-cycles-backend    #   66,81% backend  cycles idle    [66,25%]
 2.834.408.038 instructions              #    0,20  insns per cycle        
                                         #    4,41  stalled cycles per insn [83,44%]
   570.440.458 branches                  #   58,983 M/sec                   [83,72%]
    22.158.938 branch-misses             #    3,88% of all branches         [83,92%]

   1,490160954 seconds time elapsed 
```

最小示例：使用 g++-4.7 std=c++11 -O3 -march=native 编译；使用 numactl --cpunodebind=0 ... numactl --cpunodebind=0-3 执行 - 使用 CPU 绑定我们有以下发现：1 个 CPU（速度 x）、2 个 CPU（速度 ~ x/2）、3 个 CPU（速度~ x/3) [速度=越高越好]。所以我们看到的是性能随着 CPU 数量的增加而恶化。内存绑定、交错 (--interleave=all) 和 --localalloc 在这里不起作用（我们监控了所有 QPI 链接，并且每个链接的链接负载低于 1%）。

```
#include <tbb/pipeline.h>
#include <tbb/task_scheduler_init.h>
#include <chrono>
#include <stdint.h>
#include <iostream>
#include <fcntl.h>
#include <sstream>
#include <sys/mman.h>
#include <tbb/scalable_allocator.h>
#include <tuple>

namespace {
// 8 MB
size_t chunkSize = 8 * 1024 * 1024;
// Number of threads (0 = automatic)
uint64_t threads=0;
}

using namespace std;
typedef chrono::duration<double, milli> milliseconds;

int main(int /* argc */, char** /* argv */)
{
   chrono::time_point<chrono::high_resolution_clock> startLoadTime = chrono::high_resolution_clock::now();
   tbb::task_scheduler_init init(threads==0?tbb::task_scheduler_init::automatic:threads);
   const uint64_t chunks=128;
   uint64_t nextChunk=0;
   tbb::parallel_pipeline(128,tbb::make_filter<void,uint64_t>(
         tbb::filter::serial,[&](tbb::flow_control& fc)->uint64_t
   {
      uint64_t chunk=nextChunk++;
      if(chunk==chunks)
         fc.stop();

      return chunk;
   }) & tbb::make_filter<uint64_t,void>(
         tbb::filter::parallel,[&](uint64_t /* item */)->void
   {
        void* buffer=scalable_malloc(chunkSize);
        memset(buffer,0,chunkSize);
   }));

   chrono::time_point<chrono::high_resolution_clock> endLoadTime = chrono::high_resolution_clock::now();
   milliseconds loadTime = endLoadTime - startLoadTime;
   cout << loadTime.count()<<endl;
} 
```

英特尔 TBB 论坛讨论：http: [//software.intel.com/en-us/forums/topic/346334](http://software.intel.com/en-us/forums/topic/346334)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:10:05.270

对所描述问题的简短更新和部分答案：调用`malloc`或`scalable_malloc`不是瓶颈，瓶颈是由`memset`分配的内存触发的页面错误。`malloc`glibc和其他可扩展分配器（例如 Intel 的 TBB ）之间没有区别`scalable_malloc`：对于大于特定阈值的分配（通常为 1MB，如果没有`free`d；可以定义为`madvise`) 内存将由匿名 mmap 分配。最初，映射的所有页面都指向一个内核内部页面，该页面是预置的和只读的。当我们 memset 内存时，这会触发异常（注意内核页面是只读的）和页面错误。此时将 0ed 一个新页面。小页面为 4KB，因此对于我们分配和写入的 8MB 缓冲区，这将发生 2048 次。我测量的是，这些页面错误在单插槽机器上并没有那么昂贵，但在具有多个 CPU 的 NUMA 机器上变得越来越昂贵。

到目前为止我提出的解决方案：

*   使用大页面：有助于但只会延迟问题

*   使用预分配和预故障（`memset`或`mmap`+ `MAP_POPULATE`）内存区域（内存池）并从那里分配：有帮助，但不一定想要这样做

*   在 Linux 内核中解决这个可扩展性问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T10:57:02.677

**第二次更新（关闭问题）：**

刚刚使用 3.10 内核再次分析了示例应用程序。

16GB数据并行分配和memsetting的结果：

小页面：

*   1 个插座：3112.29 毫秒
*   2 个插座：2965.32 毫秒
*   3 个插座：3000.72 毫秒
*   4 个插座：3211.54 毫秒

大页面：

*   1 个插座：3086.77 毫秒
*   2 个插座：1568.43 毫秒
*   3 个插座：1084.45 毫秒
*   4 个插座：852.697 毫秒

可扩展的分配问题现在似乎已经解决了——至少对于大页面来说是这样。

# wpf - WPF 在通过绑定更改属性后触发 EventHandler

> ID：13803701
> 
> 赞同：0
> 
> 时间：2012-12-10T15:15:01.530
> 
> 标签：wpf, mvvm, event-handling

我的 WPF 应用程序在加载数据时有一个带有第三方控件的窗口。控件具有在数据开始加载和结束时显示和隐藏进度条的方法。我使用 MVVM 将数据绑定到我的控件。我需要属性来指示数据加载何时开始和结束，并且该属性必须可以在后面的代码中访问。我在带有 Visibility="Hidden" 的窗口中添加了 CheckBox 控件，并将其绑定到我的 ViewModel 中的属性标志，还在 Checked 事件上添加了 EventHandler：

```
<CheckBox Name="chkIndicator" Visibility="Hidden" IsChecked="{Binding IsDataLoading}" Checked="chkIndicator_Checked" /> 
```

在视图事件处理程序后面的代码中：

```
private void chkIndicator_Checked(object sender, RoutedEventArgs e)
{
    if(this.chkIndicator.IsChecked.Value)
        tableViewOrders.ShowIndicator();
    else 
        tableViewOrders.HideIndicator();
} 
```

在 ViewModel 中加载数据时：

```
public bool IsDataLoading
{
    get { return _isDataLoading;}
    set {
        _isDataLoading = value;
        PropertyChanged("IsDataLoading");
    }
}
...
public void MethodLoadingData()
{
    /*1*/ IsDataLoading = true;

    //here method for loading data to collection binded to tableViewOrders

    /*2*/ IsDataLoading = false;
} 
```

当方法 MethodLoadingData 执行时，行 / *1* / 工作正常 - 事件处理程序 chkIndicator_Checked 被触发，但是当 / *2* / 运行 - 事件处理程序不被触发。有什么想法我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:21:19.843

您是否尝试将“IsChecked”属性的绑定模式更改为两种方式或其他方式

*   [http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode.aspx)

# android - 兼容性问题

> ID：13803706
> 
> 赞同：0
> 
> 时间：2012-12-10T15:15:15.010
> 
> 标签：android, permissions, android-manifest, publishing

我是在 android 中发布应用程序的新手。我最近刚刚发布了我的应用程序。但是在我这样做之后，兼容设备列表显示我在开发过程中运行我的应用程序的仅有的两个设备不兼容！这令人费解。我知道这与我的清单文件有关。以下是权限：

```
 <uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="17" />   

<uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.READ_INTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.GET_ACCOUNTS" />    
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />

<uses-permission android:name="android.permission.CAMERA" />    

<supports-screens android:resizeable="true"
              android:smallScreens="true" 
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true"     
              android:anyDensity="true"           
             /> 
```

请告诉我哪里出错了。有问题的两款设备是三星 Galaxy Pocket (GT-S5300) 和三星 Galaxy Tab 2 (7.0)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:20:56.983

由于这两个设备缺少自动对焦，因此将行替换为

```
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

和

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/> 
```

它应该可以解决问题。

# python - 金字塔“选择”表单输入引发 KeyError

> ID：13803709
> 
> 赞同：3
> 
> 时间：2012-12-10T15:15:25.213
> 
> 标签：python, pyramid, html-select, mako

我正在尝试访问`request.param`我的 Pyramid 应用程序中的 a 。

我看到一个关于复选框的话题，但没有人谈论“选择”HTML标签。

在金字塔视图方面，这是我收集参数的代码部分：

```
if 'form.submitted' in request.params: # user
    user = User(request.params['nickname'],
                request.params['lastname'],
                request.params['firstname'],
                request.params['email'],
                request.params['password'],
                request.params['profile']) 
```

在 Mako 模板方面，我的表单是一个简单的 HTML 语句：

```
<select name="profile">
    % for profile in p:
        % if profile is u.profile:
            <option selected>${profile.name}</option>
        % else:
            <option>${profile.name}</option>
        % endif
    % endfor
</select> 
```

每次我尝试访问“profile”参数时，都会出现`KeyError...`异常。

谁能帮我解决这个问题？

* * *

**更新**：我无法让`KeyError`Mako 今天早上扔...也许我的同事解决了这个问题，我需要检查最后一次提交。现在创建用户的方式很好，但是当我将应用程序用户重定向到相同的表单（带有验证消息）时，我无法在语句中显示好。带来不便敬请谅解...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:11:00.400

我不确定，但配置文件参数可能是 unicode 而不是 str。但如果它只发生在“个人资料”而不是其他人身上，我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:25:26.370

如果不查看从视图中返回的确切内容，很难确定，但如果在 mako 中引发了关键错误，通常意味着您没有从视图中返回该参数。例如：

```
@view_config(route_name='myform', renderer='myform.mako')
def myform(request):
   if request.POST:
       # do stuff with submitted form ...       
   user ={'name': 'bob'}
   return {'user': user} 
```

在 myform.mako 中，您可以访问 user.name，但如果您尝试访问 user.profile，则会引发关键错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:56:16.547

Well, the problem was corrected in a previous commit from one of my co-workers, and I can't get the KeyError now... Thanks for your help !

# objective-c - [__NSArrayI count]: 发送到已释放实例 iPhone 的消息

> ID：13803713
> 
> 赞同：1
> 
> 时间：2012-12-10T15:15:45.307
> 
> 标签：objective-c, ios, instance, allocation

我有一个绘制散点图的方法，我收到错误 [__NSArrayI count]: message sent to deallocated instance。

我做了一个调试，错误就在这条线上

```
 [plotSpace scaleToFitPlots:[NSArray arrayWithObjects:aaplPlot, googPlot, msftPlot, nil]]; 
```

我认为释放对象存在问题，但我不知道如何解决该问题。第二次调用该方法时出现错误。

这是方法：

```
-(void)configurePlots {

    // 1 - Get graph and plot space
    CPTGraph *graph = self.hostView.hostedGraph;
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
    // 2 - Create the three plots
    CPTScatterPlot *aaplPlot = [[CPTScatterPlot alloc] init];
    aaplPlot.dataSource = self;
    aaplPlot.identifier = CPDTickerSymbolAAPL;
    CPTColor *aaplColor = [CPTColor redColor];
    [graph addPlot:aaplPlot toPlotSpace:plotSpace];
    CPTScatterPlot *googPlot = [[CPTScatterPlot alloc] init];
    googPlot.dataSource = self;
    googPlot.identifier = CPDTickerSymbolGOOG;
    CPTColor *googColor = [CPTColor greenColor];
    [graph addPlot:googPlot toPlotSpace:plotSpace];
    CPTScatterPlot *msftPlot = [[CPTScatterPlot alloc] init];
    msftPlot.dataSource = self;
    msftPlot.identifier = CPDTickerSymbolMSFT;
    CPTColor *msftColor = [CPTColor blueColor];
    [graph addPlot:msftPlot toPlotSpace:plotSpace];
    // 3 - Set up plot space
    // Here is the problem//
    [plotSpace scaleToFitPlots:[NSArray arrayWithObjects:aaplPlot, googPlot, msftPlot, nil]];
    CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
    [xRange expandRangeByFactor:CPTDecimalFromCGFloat(1.1f)];
    plotSpace.xRange = xRange;
    CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];
    [yRange expandRangeByFactor:CPTDecimalFromCGFloat(1.2f)];
    plotSpace.yRange = yRange;
    // 4 - Create styles and symbols
    CPTMutableLineStyle *aaplLineStyle = [aaplPlot.dataLineStyle mutableCopy];
    aaplLineStyle.lineWidth = 2.5;
    aaplLineStyle.lineColor = aaplColor;
    aaplPlot.dataLineStyle = aaplLineStyle;
    CPTMutableLineStyle *aaplSymbolLineStyle = [CPTMutableLineStyle lineStyle];
    aaplSymbolLineStyle.lineColor = aaplColor;
    CPTPlotSymbol *aaplSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    aaplSymbol.fill = [CPTFill fillWithColor:aaplColor];
    aaplSymbol.lineStyle = aaplSymbolLineStyle;
    aaplSymbol.size = CGSizeMake(6.0f, 6.0f);
    aaplPlot.plotSymbol = aaplSymbol;
    CPTMutableLineStyle *googLineStyle = [googPlot.dataLineStyle mutableCopy];
    googLineStyle.lineWidth = 1.0;
    googLineStyle.lineColor = googColor;
    googPlot.dataLineStyle = googLineStyle;
    CPTMutableLineStyle *googSymbolLineStyle = [CPTMutableLineStyle lineStyle];
    googSymbolLineStyle.lineColor = googColor;
    CPTPlotSymbol *googSymbol = [CPTPlotSymbol starPlotSymbol];
    googSymbol.fill = [CPTFill fillWithColor:googColor];
    googSymbol.lineStyle = googSymbolLineStyle;
    googSymbol.size = CGSizeMake(6.0f, 6.0f);
    googPlot.plotSymbol = googSymbol;
    CPTMutableLineStyle *msftLineStyle = [msftPlot.dataLineStyle mutableCopy];
    msftLineStyle.lineWidth = 2.0;
    msftLineStyle.lineColor = msftColor;
    msftPlot.dataLineStyle = msftLineStyle;
    CPTMutableLineStyle *msftSymbolLineStyle = [CPTMutableLineStyle lineStyle];
    msftSymbolLineStyle.lineColor = msftColor;
    CPTPlotSymbol *msftSymbol = [CPTPlotSymbol diamondPlotSymbol];
    msftSymbol.fill = [CPTFill fillWithColor:msftColor];
    msftSymbol.lineStyle = msftSymbolLineStyle;
    msftSymbol.size = CGSizeMake(6.0f, 6.0f);
    msftPlot.plotSymbol = msftSymbol;
} 
```

我做了一些更改：我制作了 graph、plotSpace、array、aaplPlot、googPlot 和 msftPlot 属性，并使用散点图分配和初始化数组。

```
 array = [[NSArray alloc] initWithObjects:aaplPlot, googPlot, msftPlot, nil];
  [plotSpace scaleToFitPlots:array]; 
```

当第二次调用该方法时，我得到了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:21:05.553

self.hostView.hostedGraph 正在发布。将此创建为具有保留或强值的属性，然后再次检查。由于这发生在第 2 次运行中，因此您的对象似乎已被释放，因为它已被使用。

```
@property (nonatomic, strong) CPTGraph *graph; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:35:01.700

```
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace; 
```

上面的plotSpace是在一个方法里面，试着把它做成一个静态变量或者类属性，这样就不会被释放了，再看看是不是`init`-ed。在财产的情况下。

# dos - DOS 启动命令无法识别脚本

> ID：13803714
> 
> 赞同：1
> 
> 时间：2012-12-10T15:15:57.760
> 
> 标签：dos

我最近才开始遇到这个奇怪的问题。

我有一个脚本，它在另一个使用 dos start 命令的窗口中启动 Jboss 服务。

这条线是

```
start "Jboss" /min server.bat 
```

该脚本一直运行良好，但由于某种原因已停止在这一行工作。如果我打开 cmd 窗口，cd 到脚本所在的目录，然后手动运行它，我会得到同样的错误：-

```
The system cannot execute the specified program 
```

server.bat 文件位于我正在运行的文件夹中。我什至尝试创建一个简单的“hello.bat”文件，它只是回显“Hello”，即使这样也不起作用。

我的路径环境设置是：-

`%SystemRoot%\system32\;%SystemRoot%\;%SystemRoot%\System32\Wbem\;C:\Program Files\Common Files\Microsoft Shared\Microsoft Online Services;C:\Program Files (x86)\Common Files\Microsoft Shared\Microsoft Online Services;C:\Oracle11gR2\product\11.2.0\dbhome_1\bin;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\TortoiseSVN\bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\`

这一切过去一直有效，直到今天。我不知道有任何 Window 更新，也没有重新启动我的电脑（直到今天才看到问题已解决！）

在 Windows 7 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:12:30.097

设法解决了这个问题。看起来某些 system32 文件可能已损坏。

通过在 cmd 提示符下运行 start hello.bat 命令然后输出 ERRORLEVEL 的值来推断这一点

```
echo %ERRORLEVEL% 
```

这给出了结果“9020”。在网上搜索没有关于此的全部信息，但我能找到的位表明文件系统损坏。

所以我找到了一个合适的系统还原点，恢复到它，这已经解决了这个问题。

没有明显的原因为什么会出错，只是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:17:30.457

以管理员身份运行 cmd 提示符？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:22:50.707

你有运行任何杀毒软件吗？如果是这样，请尝试禁用它，然后尝试再次运行批处理文件。

# ruby-on-rails - 上传的载波异常

> ID：13803716
> 
> 赞同：0
> 
> 时间：2012-12-10T15:16:07.207
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave

我正在使用carrierwave上传图像文件。我基本上有一个表单字段“_form.html.erb”，其中包含提交给数据库的标题、描述、图像和类别。我想要做的是，如果一个类别是 != 到“社交”，然后检查图像是否存在，但如果它等于社交，那么继续并提交给数据库而不使用图像。现在提交“图像不能为空白”时出现错误。我认为这个错误可能来自我模型中的 validates_presence_of :image 行，但对此不确定。所以我试图将它包装在一个 if 语句块中，但我仍然得到它。有谁知道我如何解决我正在尝试做的事情。

```
if :category != "social" 
    validates_presence_of :image
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:24:40.643

将 a[`Proc`](http://www.ruby-doc.org/core-1.9.3/Proc.html)与`:if`验证器上的选项一起使用。

```
validates :image, presence: true, if: Proc.new { |a| a.category != "social" } 
```

推荐阅读： http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-proc-with-if-and-unless](http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-proc-with-if-and-unless)

# r - sqldf 语句删除行语法错误？

> ID：13803718
> 
> 赞同：1
> 
> 时间：2012-12-10T15:16:17.770
> 
> 标签：r, sqldf

嗨stackoverflow专家，

我正在尝试使用 sqldf 删除 ar 表中的行，例如：

```
structure(list(Similarity = c(999L, 888L, 756L, 879L, 567L, 567L), Peak = c(797L, 833L,999L, 798L, 834L, 444L), Formula = structure(c(4L,3L, 4L, 1L, 2L, 2L), .Label = c("C12H26S", "C16H19NO", "C2H8O2Si","C9H13NO2"), class = "factor")), .Names = c("Similarity", "Peak","Formula"), class = "data.frame", row.names = c(NA, -6L)) 
```

我的目标是删除公式列上出现“SI”的行，如下所示：

```
structure(list(Similarity = c(999L, 756L, 879L, 567L, 567L), 
Peak = c(797L, 999L, 798L, 834L, 444L), Formula = structure(c(3L, 
3L, 1L, 2L, 2L), .Label = c("C12H26S", "C16H19NO", "C9H13NO2"
), class = "factor")), .Names = c("Similarity", "Peak", "Formula"
), class = "data.frame", row.names = c(NA, -5L)) 
```

我试过一个 sqldf 语句：

```
sqldf("DELETE * FROM PO_raw WHERE Formula='Si'") 
```

但是，当然，它不起作用，因为没有只有“Si”的行。我是 sqldf 的初学者，在我看来这可能是语法错误。我在网上搜索过，但没有找到任何示例。

有什么建议吗？这甚至可以用 sqldf 吗？

干杯，

弗朗西斯科

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:19:55.673

使用 LIKE 和通配符，如下所示：

```
> sqldf(c("DELETE FROM PO_raw WHERE Formula like '%Si'", "select * from main.PO_raw"))
  Similarity Peak  Formula
1        999  797 C9H13NO2
2        756  999 C9H13NO2
3        879  798  C12H26S
4        567  834 C16H19NO
5        567  444 C16H19NO 
```

[（顺便说一句：关于 LIKE 的](https://stackoverflow.com/questions/515039/use-or-like-to-compare-strings-in-sql)有趣问题）

# c# - 如何在数据表中的数据绑定下拉列表上设置选定值

> ID：13803719
> 
> 赞同：0
> 
> 时间：2012-12-10T15:16:28.067
> 
> 标签：c#, asp.net, drop-down-menu

好的，所以我有一个最初从数据库填充的下拉列表。现在基于数据表，我希望所选值等于数据库中的文本。无论我做什么，它只显示“---选择一个---”这是我手动添加到下拉列表项目列表中的唯一项目，如果我拉的值为空（或者这就是我想要的），则显示默认值去做）

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Master.TopLabel = "Survey Creation";
        if (!IsPostBack)
        {

            SqlConnection Connection = DatabaseConnection.GetSurveySystemConnection();

            string sqlquery = "SELECT S.[Survey_Desc], S.[Start_Date], C.[Category_Name] ,S.[End_Date], S.[Audience] FROM [Survey] S  Inner Join Category C On S.Category_ID = C.ID Where S.[ID] =" + Session["Survey_ID"];

            SqlCommand cmd = new SqlCommand(sqlquery, Connection);
            cmd.CommandType = CommandType.Text;
            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = cmd;
            DataTable DT = new DataTable();
            da.Fill(DT);

            if (DT != null)
            {
                DescriptionMemo.Text = DT.Rows[0]["Survey_Desc"].ToString();
                CategoryDropDownList.SelectedIndex = CategoryDropDownList.Items.IndexOf(CategoryDropDownList.Items.FindByText(DT.Rows[0]["Category_Name"].ToString()));
                StartDateCalender.SelectedDate = DateTime.Parse(DT.Rows[0]["Start_Date"].ToString());
                EndDateCalender.SelectedDate = DateTime.Parse(DT.Rows[0]["End_Date"].ToString());
                string Audience = DT.Rows[0]["Audience"].ToString();
                if (Audience == "Students Only")
                {
                    AudienceRadioGroup.Items[0].Selected = true;
                }
                else if (Audience == "Staff Only")
                {
                    AudienceRadioGroup.Items[1].Selected = true;
                }
                else
                {
                    AudienceRadioGroup.Items[2].Selected = true;
                }

            }
          Connection.Close();
        }
    } 
```

在 aspx 页面中的 DropDownList。

```
<asp:DropDownList ID="CategoryDropDownList" runat="server" 
                    DataSourceID="SqlDataSource1" DataTextField="Category_Name" 
                    DataValueField="Category_Name" AppendDataBoundItems="true" Height="16px" 
                    Width="200px">
                    <asp:ListItem>---Select One---</asp:ListItem>
                </asp:DropDownList> 
```

sql 数据源选择命令。

```
SELECT [Category_Name] FROM [Category] 
```

编辑：这是完整的代码，但我不知道它是否相关，抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:56:13.347

改变 ：

```
CategoryDropDownList.SelectedIndex = CategoryDropDownList.Items.IndexOf(CategoryDropDownList.Items.FindByText(DT.Rows[0]["Category_Name"].ToString())); 
```

至

```
CategoryDropDownList.SelectedValue = DT.Rows[0]["Category_Name"].ToString() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:21:16.670

两件事情：

1.  不要在 ASP.NET 中使用全局连接（至少不要将它们设为静态），因为它是一个多线程环境。而是始终通过使用`using-statement`
2.  当设置为（默认）时，请`if(!IsPostback)`检查`Page_Load`，不要在回发时对控件进行数据绑定。否则将不会触发事件并且值（如）将被覆盖。`EnableViewState``true``DropDownList-SelectedIndex`

* * *

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        string sqlquery = "SELECT S.[Survey_Desc], C.[Category_Name], FROM [Survey] S  Inner Join Category C On S.Category_ID = C.ID Where S.[ID] =" + Session["Survey_ID"];
        using(var con=new SqlConnection(connectionString))
        using(var cmd = new SqlCommand(sqlquery, con))
        using(var da = new SqlDataAdapter(cmd))
        {
            DataTable DT = new DataTable();
            da.Fill(DT);
            DescriptionMemo.Text = DT.Rows[0].Field<string>("Survey_Desc");
            string categoryName = DT.Rows[0].Field<string>("Category_Name");
            CategoryDropDownList.SelectedIndex = CategoryDropDownList.Items
                .IndexOf(CategoryDropDownList.Items.FindByText(categoryName));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T13:02:33.150

OnPageLoad CategoryDropDownList.Items.FindByText(categoryName).selected = true;

# c++ - 返回一个 void* 数组

> ID：13803720
> 
> 赞同：2
> 
> 时间：2012-12-10T15:16:30.237
> 
> 标签：c++, arrays, function-pointers, void-pointers

我正在构建一个需要将字符串映射存储到函数指针的 C++ 程序。但是，每个函数可能有不同的返回类型和参数。我试图解决这个问题的方法是通过创建函数来获取一个 void 指针数组并返回一个 void 指针数组，然后根据需要转换参数和返回值。

为了弄清楚这将如何工作，我正在尝试构建一个简单的虚拟对象，但无法对其进行编译。我尝试了很多事情，但我不断收到不同的错误。这是一个例子：

```
#include <string>
#include <iostream>
#include <map>

using namespace std;

void** string2map(void** args){
    //takes a string of the form "key:value;key:value;..." and returns a map<string,string>
    string st = *((string**) args)[0];
    map<string, string> result = map <string, string>();
    //code doesnt matter
    return (void*) &((void*) &result);
}

int main(){
    string test = "hello:there;how:are you?";
    map<string, string> result = *(map<string, string>**)string2map((void*) &((void*) &test))[0];

    return 0;
} 
```

当我尝试编译时，我得到：

```
void.cpp: In function 'void** string2map(void**)':
void.cpp:12:34: error: lvalue required as unary '&' operand
void.cpp: In function 'int main()':
void.cpp:17:89: error: lvalue required as unary '&' operand 
```

显然这里有很多问题，但我真的不知道从哪里开始。谁能告诉我上面的代码有什么问题，或者给我一个替代我目前这样做的方式？

**笔记**

我返回 a`void**`而不是 just的原因`void*`是可能存在我需要返回多个不同类型的值的情况。一个例子是，在上面，我想返回结果映射和映射中的条目数。不过，我什至还没有弄清楚如何构建该数组。

**编辑**

因此，根据迄今为止的回应，很明显这是解决此问题的错误方法。考虑到这一点，有人能推荐一个更好的吗？我需要能够将各种函数存储在单个映射中，这意味着我需要能够为接受和返回不同类型的函数定义单一数据类型。能够返回多个值很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:25:39.617

无视我自己对公然将类型安全抛诸脑后的恐惧，两件事立即浮现在脑海中。

首先，您认为当 string2map 超出范围时会指向什么？

其次是您不必强制转换为 void*。Void* 在 C++ 中得到特殊处理，因为它可以转换任何东西。

如果您坚持尝试推动这一点，我将首先将返回类型更改为 void，然后将 void* 作为函数的输入参数。

例如：

```
void string2map(void* args, void* returnedMap); 
```

这样你就必须在一个实际上*有*一个地图指向的范围内实例化你的地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:32:30.313

您正在将 a 转换`map<string,string>`为 a `void**`，将其返回然后将其转换回 a `map<string,string`。为什么不只返回一个`map<string,string>`？它也被调用`string2map`，这意味着你只会用一个字符串来调用它（由你传入一个字符串的事实支持，该字符串被转换为一个`void**`然后转换的直接返回）。除非您有充分的理由在`void**`各地来回转换，否则这可能是您需要的：

```
#include <string>
#include <iostream>
#include <map>

using namespace std;

map<string, string> string2map(string st){
    map<string, string> result = map <string, string>();
    //code doesnt matter
    return result;
}

int main(){
    string test = "hello:there;how:are you?";
    map<string, string> result = string2map(test);
    return 0;
} 
```

**编辑：**

我刚刚重读了你的问题。您可能想查找 Generalized Functors 并查看 Boost`std::function`可能解决此问题的方法。可以通过包装类更改函数的返回类型，例如：

```
template< class T >
class ReturnVoid
{
public:
    ReturnVoid( T (*functor)() ) : m_functor( functor ) {}

    void operator() { Result = functor(); }

private:
    T (*m_functor)();
    T Result;
};

//  Specialise for void since you can't have a member of type 'void'
template<>
ReturnVoid< void >
{
public:
    ReturnVoid( T (*functor)() ) : m_functor( functor ) {}

    void operator() { functor(); }

private:
    T (*m_functor)();
}; 
```

将其用作包装器可能会帮助您将具有不同返回类型的函子存储在同一数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:26:55.837

> $5.3.1/3 - “一元 & 运算符的结果是一个指向其操作数的指针。操作数应该是一个**左值或一个qualifiedid**。”
> 
> $5.3.1/2 - “以下每个一元运算符的结果都是 **纯右值**。”

因此，实际上您正在尝试获取不允许的右值的地址。

此外，C++ 不允许返回数组。

所以，你真的想开始看看你想要什么。按值返回地图是一个明确的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:04:17.993

> 我试图解决这个问题的方法是通过创建函数来获取一个 void 指针数组并返回一个 void 指针数组，然后根据需要转换参数和返回值。

这（真的）很糟糕。看看 std::function 和 std::bind - 它们应该以优雅的方式涵盖函数签名和绑定参数之间的差异。

> 我返回 void** 而不仅仅是 void* 的原因是，可能存在我需要返回多个不同类型的值的情况。

然后返回一个包含这些值的对象。对于泛型，请查看 std::tuple 或 boost::any。

这是一些代码：

```
void function1(int, const char); // defined elsewhere
std::tuple<int,int> function2(std::string&); // defined elsewhere

std::map<std::string,std::function<void(void)>> functionmap;
functionmap.insert( std::make_pair("function1", std::bind(&function1, 2, 'c')) );

std::tuple<int,int> result;
functionmap.insert( std::make_pair("function2", [&result] { 
    result = function2("this is a test"); } );

// call function1
functionmap["function1"]();

// call function2
functionmap["function2"](); // result will now contain the result 
                            // of calling function2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T16:14:42.463

这是你试图做的吗？

```
int Foo(int a) { return a; }
typedef int (*FooFunc)(int);

void Bar(){}

typedef std::map<std::string, void*>  FunctionMap;  
// you should use boost::any or something similar instead of void* here

FunctionMap CreateFunctionMap(const std::string& args)
{
    FunctionMap result;
    result["Foo"] = &Foo;
    result["Bar"] = &Bar;
    return result;
}

void Call(FunctionMap::const_reference functionInfo)
{
    // @hansmaad The key will give information on the signatures. 
    // there are a few distinct options, so it will be a conditional 
    // with a couple of clauses.
    if (functionInfo.first == "Foo")
    {
        auto f = static_cast<FooFunc>(functionInfo.second);
        std::cout << f(42);
    }
    else if (functionInfo.first == "Bar")
    {
        /* */
    }
}

int main()
{
    auto functions = CreateFunctionMap("...");
    std::for_each(begin(functions), end(functions), Call);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T16:44:35.937

> @hansmaad 密钥将提供有关签名的信息。有几个不同的选项，所以它将是一个带有几个子句的条件。– ewok 33 分钟前

在这种情况下，典型的解决方案是这样的：

```
typedef void (*func_ptr)();
std::map<std::string, func_ptr> func_map;

map<string,string> string2map(string arg){
    //takes a string of the form "key:value;key:value;..." and returns a map<string,string>
    map<string, string> result = map <string, string>();
    //...
    return result;
}

// ...

// Add function to the map
func_map["map<string,string>(string)" = (func_ptr)string2map;

// Call function in the map
std::map<std::string, func_ptr>::iterator it = ...
if (it->first == "map<string,string>(string)")
{
    map<string,string> (*func)(string) = (map<string,string>(*)(string))it->second;
    map<string,string> result = func("key1;value1;key2;value2");
} 
```

为简洁起见，我使用了函数指针的 C 风格强制转换。正确的 C++ 演员表是`reinterpret_cast<>()`.

函数指针在插入映射时转换为通用类型，并在调用它们时转换回正确的类型。

# sql - Postgres 9.2 PL/pgSQL 循环简单更新

> ID：13803722
> 
> 赞同：10
> 
> 时间：2012-12-10T15:16:31.020
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.2

我有一个下表：

```
+----+----------+----------+
| id | trail_id | position |
+----+----------+----------+
| 11 | 16       | NULL     |
| 12 | 121      | NULL     |
| 15 | 121      | NULL     |
| 19 | 42       | NULL     |
| 20 | 42       | NULL     |
| 21 | 42       | NULL     |
+----+----------+----------+ 
```

我正在寻找一种简单的方法来更新`position`递增整数（*每个父级*）。所以在我完成后，表格应该是这样的：

```
+----+-----------+----------+
| id | trail_id  | position |
+----+-----------+----------+
| 11 | 16        | 1        |
| 12 | 121       | 1        |
| 15 | 121       | 2        |
| 19 | 42        | 1        |
| 20 | 42        | 2        |
| 21 | 42        | 3        |
+----+-----------+----------+ 
```

我认为我需要的是一个函数，它遍历给定的所有行`trail`，具有简单的递增索引并更新`position`列。然而，我是一个 pgSQL 新手，所以我很高兴听到有更简单的方法可以做到这一点。

我现在正在尝试的解决方案看起来像这样

```
CREATE FUNCTION fill_positions(tid integer) RETURNS integer AS $$
DECLARE
    pht RECORD;
    i INTEGER := 0;
BEGIN
    FOR pht IN SELECT * FROM photos WHERE photos.trail_id = tid LOOP
        i := i + 1;
        UPDATE photos SET position = i WHERE id = pht.id;
    END LOOP;
    RETURN i;
END;
$$ LANGUAGE plpgsql; 
```

我很确定它可以更清洁，并且不必使用函数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T15:33:39.600

您不需要为此存储功能。你可以用一个语句来做到这一点。

```
with new_numbers as (
   select id,  
          trail_id,
          row_number() over (partition by trail_id order by id) as position
   from photos
)
update photos
  set position = nn.position
from new_numbers nn
where nn.id = photos.id; 
```

# android - OpenCV 裁剪函数致命信号 11

> ID：13803728
> 
> 赞同：0
> 
> 时间：2012-12-10T15:17:03.683
> 
> 标签：android, opencv, crop

您好，我正在做一个使用 OpenCV 检测矩形/正方形的 android 应用程序，为了检测它们，我正在使用 squares.cpp 中的函数（稍作修改）。找到的每个正方形的点存储在向量>正方形中，然后我将它传递给选择最大的函数并将其存储在向量 theBiggestSq 中。问题在于我将在下面粘贴代码的裁剪功能（我也会将链接发布到 youtube 以显示问题）。如果实际正方形距离相机足够远，它可以正常工作，但如果我在某个时候将它关闭一点，它会挂起。我将从 LogCat 发布问题的打印屏幕，并打印出点（取自 BiggestSq 向量的边界点，也许它有助于找到解决方案）。

```
void cutAndSave(vector<Point> theBiggestSq, Mat image){
    RotatedRect box = minAreaRect(Mat(theBiggestSq));
    // Draw bounding box in the original image (debug purposes)
    //cv::Point2f vertices[4];
    //box.points(vertices);
    //for (int i = 0; i < 4; ++i)
    //{
    //cv::line(img, vertices[i], vertices[(i + 1) % 4], cv::Scalar(0, 255, 0), 1, CV_AA);
    //}
    //cv::imshow("box", img);
    //cv::imwrite("box.png", img);
    // Set Region of Interest to the area defined by the box
    Rect roi;
    roi.x = box.center.x - (box.size.width / 2);
    roi.y = box.center.y - (box.size.height / 2);
    roi.width = box.size.width;
    roi.height = box.size.height;
    // Crop the original image to the defined ROI

    //bmp=Bitmap.createBitmap(box.size.width / 2, box.size.height / 2, Bitmap.Config.ARGB_8888);
    Mat crop = image(roi);
    //Mat crop = image(Rect(roi.x, roi.y, roi.width, roi.height)).clone();
    //Utils.matToBitmap(crop*.clone()* ,bmp);
    imwrite("/sdcard/OpenCVTest/1.png", bmp);
    imshow("crop", crop);

} 
```

[我的应用程序及其问题的视频](http://www.youtube.com/watch?v=quUJR3h9AzM)

![在此处输入图像描述](../Images/f33ec3b4f65d93e41232a290d34ac1f3.png)

分别打印的绳索是：roi.x roi.y roi.width roi.height

另一个问题是绘制的边界应该是绿色的，但是正如你在视频中看到的那样，它们是扭曲的（像那些边界是由玻璃制成的那样弯曲？）。

感谢您的任何帮助。我是openCV的新手，从一个月开始就这样做了，所以请宽容。

编辑：绘图代码：

```
//draw//
    for( size_t i = 0; i < squares.size(); i++ )
    {
        const Point* p = &squares[i][0];
        int n = (int)squares[i].size();
        polylines(mBgra, &p, &n, 1, true, Scalar(255,255,0), 5, 10);
        //Rect rect = boundingRect(cv::Mat(squares[i]));
        //rectangle(mBgra, rect.tl(), rect.br(), cv::Scalar(0,255,0), 2, 8, 0);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:37:15.420

这个错误基本上告诉你原因 - 你的投资回报率超过了图像尺寸。这意味着当您从中提取时`Rect roi`，`RotatedRect box`x 或 y 小于零，或者宽度/高度将尺寸推到图像之外。你应该使用类似的东西来检查这个

```
// Propose rectangle from data
int proposedX = box.center.x - (box.size.width / 2);
int proposedY = box.center.y - (box.size.height / 2);
int proposedW = box.size.width;
int proposedH = box.size.height;

// Ensure top-left edge is within image
roi.x = proposedX < 0 ? 0 : proposedX;
roi.y = proposedY < 0 ? 0 : proposedY;

// Ensure bottom-right edge is within image
roi.width = 
   (roi.x - 1 + proposedW) > image.cols ? // Will this roi exceed image?
   (image.cols - 1 - roi.x)               // YES: make roi go to image edge
   : proposedW;                           // NO: continue as proposed
// Similar for height
roi.height = (roi.y - 1 + proposedH) > image.rows ? (image.rows - 1 - roi.y) : proposedH; 
```

# java - 黑白棋软件设计

> ID：13803729
> 
> 赞同：3
> 
> 时间：2012-12-10T15:17:13.530
> 
> 标签：java, design-patterns, reversi

我必须为我大学的一门实践课程设计一个黑白棋版本。它应该具有单人模式（针对自写的 AI）、热座模式和通过互联网的多人模式。到目前为止，我已经在 MVC 中编写了黑白棋类，为此我使用了以下三个接口。（Board-Class 模拟了具有操作它的方法的板。）但是现在我想知道我应该如何实现这三个基本功能。我的第一个想法是实现 MVC 的第二层（Hotseat、AI 和网络各一个），其中 reversiController 将用户所做的所有输入传输到上层，上层决定如何处理这个动作。上层的移动应该将下层的视图作为一个框架，并为用户显示额外的信息和可能性（再次，取决于游戏的类型）这是一个合理的方法，或者你会如何处理这个问题？提前致谢！

```
public interface IGame {
void addObserver(Observer obs);
Cell getCell(int i, int j);
Cell getWinner();
List<Move> generateMoves(Cell player); 
void move(Move move);
Cell getNextPlayer();
boolean hasEnded();
void reset();
boolean isLegalMove(Move move);
Board getBoard(); 
```

}

```
public interface IReversiView {

/**
 * Show Reversi UI
 */
void showReversi(); 
```

}

公共接口 IReversiController {

```
/**
 * Sets the game's view.
 * 
 * @param view
 */
void setView(IReversiView view);

/**
 * Shows the user interface.
 */
void start();

/**
 * 
 * Handles a move called by the user and transmits it to the model.
 * 
 * @param x
 * @param y
 */
void handleMove(Move move);

/**
 * Resets the game to default state.
 */
void resetGame(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:17:03.060

由于这是一项大学任务，我不想详细说明答案。

我会在游戏和第二个玩家之间创建一种“协议”。由于玩家动作显然与控制器相关，因此我将实例化不同的第二玩家类，它们要么直接响应移动（=AI），要么等待某些输入（通过界面或互联网）。

这与策略模式相当接近。

# regex - 正则表达式：在 Eclipse 中查找并替换

> ID：13803736
> 
> 赞同：0
> 
> 时间：2012-12-10T15:17:43.497
> 
> 标签：regex, eclipse

我想找到所有出现的：

> src="cid:anyFileNameHere" alt="注意其他引号"

并替换为：

> src="http://myServerURl/anyFileNameHere.gif" alt="注意其他引号"

这`.gif`是我觉得困难的部分，因为它必须在下一个之前`"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:28:15.847

这样的事情应该这样做：

寻找

```
(src=")cid:(\w+)(" alt="[\w\s]+") 
```

代替

```
$1http://myServerURI/$2.gif$3 
```

您可能需要根据您的确切要求对其进行调整。这匹配 alt 部分中的字母数字字符、下划线和空格。它匹配文件名的字母数字字符和下划线。

*注意：*此解决方案在 Eclipse 中进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:31:04.877

搜索：

```
src="cid:(.*?)" alt="(.*?)" 
```

替换为：

```
src="http://myServerURl/$1.gif" alt="$2" 
```

[演示](http://regexr.com?333ee)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:31:59.587

对于简单的查找和替换，您可以使用：

```
Find: src="cid:([^"]+)"

Replace: src="http://myServerURl/$1.gif" 
```

这是匹配`src="cid:`然后捕获任何不`"`符合下一个的`"`

# hibernate - 如何在 Weblogic Server ADF 平台上使用 EJB 和 Hibernate

> ID：13803737
> 
> 赞同：2
> 
> 时间：2012-12-10T15:17:47.720
> 
> 标签：hibernate, weblogic, ejb-3.0

我们使用 Jdeveloper 11.1.1.4 和 WLS 10.3 我尝试根据此链接在我的项目中使用 Hibernate，[https:](https://forums.oracle.com/forums/thread.jspa?threadID=1063416) //forums.oracle.com/forums/thread.jspa?threadID= 1063416 我想使用 Hibernate 工具，因为 toplink 和eclipselink 无法解决关于在模式上生成更新 ddl 的问题，他们只能重新创建表 - 而不是真正的更新。

首先我从互联网上得到了相关的罐子：[http ://www.2hotfile.com/di-LSBU.png](http://www.2hotfile.com/di-LSBU.png)

```
cglib-2.2
antlr-2.7.6
commons-collections-3.1
dom4j-1.6.1
hibernate3
hibernate-validator-4.1.0.Final
javassist-3.9.0.GA
jta-1.1
slf4j-api-1.5.11
slf4j-nop-1.5.11 
```

然后我将模型项目添加为库依赖项：[http ://www.2hotfile.com/di-GMSZ.png](http://www.2hotfile.com/di-GMSZ.png)

配置persistence.xml如下：

```
<?xml version="1.0" encoding="windows-1252" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="1.0">
<persistence-unit name="VakkoEJBModel" transaction-type="RESOURCE_LOCAL">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<jta-data-source>jdbc/VakkoDS</jta-data-source>

<properties>
<property name="hibernate.jndi.url" value="t3://127.0.0.1:7001" />
<property name="hibernate.connection.datasource" value="jdbc/VakkoDS" />
<property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.WeblogicTransactionManagerLookup" />
<property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
<property name="hibernate.hbm2ddl.auto" value="update" />
<property name="hibernate.current_session_context_class" value="jta" />
</properties>
</persistence-unit>
</persistence> 
```

weblogic-application.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<weblogic-application>
<prefer-application-packages>
<package-name>antlr.*</package-name>
<package-name>org.hibernate.*</package-name>
<!-- package-name>org.apache.commons.logging.*</package-name -->
<!-- package-name>org.w3c.dom.*</package-name -->
</prefer-application-packages>
</weblogic-application>
weblogic-ejb-jar.xml
<?xml version = '1.0' encoding = 'UTF-8'?>
<weblogic-ejb-jar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.bea.com/ns/weblogic/weblogic-ejb-jar http://www.bea.com/ns/weblogic/weblogic-ejb-jar/1.0/weblogic-ejb-jar.xsd"
xmlns="http://www.bea.com/ns/weblogic/weblogic-ejb-jar"> 
```

weblogic-ejb-jar.xml

```
</weblogic-ejb-jar>
ejb-jar.xml
<?xml version="1.0" encoding="windows-1252" ?>
<ejb-jar/> 
```

我在 setDomainEnv.cmd 中添加了该行：

```
set EXT_PRE_CLASSPATH=C:\jarlar\hibernate-3.3.2\antlr-2.7.6.jar;C:\jarlar\hibernate-3.3.2\commons-collections-3.1.jar;C:\jarlar\hibernate-3.3.2\dom4j-1.6.1.jar;C:\jarlar\hibernate-3.3.2\hibernate3.jar;C:\jarlar\hibernate-3.3.2\javassist-3.9.0.GA.jar;C:\jarlar\hibernate-3.3.2\jta-1.1.jar;C:\jarlar\hibernate-3.3.2\slf4j-api-1.5.11.jar;C:\jarlar\hibernate-3.3.2\slf4j-nop-1.5.11.jar;C:\jarlar\hibernate-3.3.2\bytecode\cglib\cglib-2.2.jar;C:\Oracle\Middleware_11.1.1.4\modules\ejb3-persistence-3.3.1.jar;hibernate-validator-4.1.0.Final.jar; 
```

单击这些链接可以查看部署配置文件：[http://www.2hotfile.com/di-XV68.png](http://www.2hotfile.com/di-XV68.png) [http://www.2hotfile.com/di-8YC9.png](http://www.2hotfile.com/di-8YC9.png) [http://www.2hotfile.com/ di-ADR4.png](http://www.2hotfile.com/di-ADR4.png)

我试图根据这些信息操纵ear文件内容：http: [//middlewaremagic.com/weblogic/wp-content/uploads/2010/06/EAR_Application_Diagram.jpg](http://middlewaremagic.com/weblogic/wp-content/uploads/2010/06/EAR_Application_Diagram.jpg)

在 ear\META-INF\application.xml 下

```
<?xml version = '1.0' encoding = 'windows-1252'?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd" version="5" xmlns="http://java.sun.com/xml/ns/javaee">
<display-name>ejb1</display-name>
<module>
<ejb>ejb1.jar</ejb>
</module>
</application> 
```

在 ear\META-INF\weblogic-application.xml 下

```
<?xml version = '1.0' encoding = 'windows-1254'?>
<weblogic-application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.bea.com/ns/weblogic/weblogic-application http://www.bea.com/ns/weblogic/weblogic-application/1.0/weblogic-application.xsd" xmlns="http://www.bea.com/ns/weblogic/weblogic-application">
<prefer-application-packages>
<package-name>org.hibernate.*</package-name>
<package-name>antlr.*</package-name>
<!-- package-name>org.apache.commons.logging.*</package-name -->
<!-- package-name>org.w3c.dom.*</package-name -->
</prefer-application-packages>
<listener>
<listener-class>oracle.adf.share.weblogic.listeners.ADFApplicationLifecycleListener</listener-class>
</listener>
<listener>
<listener-class>oracle.mds.lcm.weblogic.WLLifecycleListener</listener-class>
</listener>
<library-ref>
<library-name>adf.oracle.domain</library-name>
</library-ref>
</weblogic-application> 
```

ejb1.ear\ejb1.jar\META-INF\ 目录中的文件与模型项目的源文件夹相同（这些文件是由 jdeveloper 部署过程根据前面解释的部署配置文件创建的）

耳朵内容显示该链接：[http ://www.2hotfile.com/di-23X6.png](http://www.2hotfile.com/di-23X6.png)

当我在浏览器方法中使用 JDeveloper 或 weblogic/console/ 将项目部署到 weblogic 时。但是出现异常

```
<10-Dec-2012 16:31:54 o'clock EET> <Warning> <netuix> <BEA-423420> <Redirect is executed in begin or refresh action. Redirect url is /console/console.portal?_nfpb=true&_pageLabel=AppDeploymentsControlPage.> 
<10-Dec-2012 16:32:45 o'clock EET> <Error> <Deployer> <BEA-149265> <Failure occurred in the execution of deployment request with ID '1355149965087' for task '2'. Error is: 'weblogic.application.ModuleException: Exception preparing module: EJBModule(ejb1.jar)
'
weblogic.application.ModuleException: Exception preparing module: EJBModule(ejb1.jar)

at weblogic.ejb.container.deployer.EJBModule.prepare(EJBModule.java:469)
at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199)
at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:517)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:159)
Truncated. see log file for complete stacktrace
Caused By: weblogic.deployment.EnvironmentException: Error processing persistence unit VakkoEJBModel of module ejb1.jar: Error instantiating the Persistence Provider class org.hibernate.ejb.HibernatePersistence of the PersistenceUnit VakkoEJBModel: java.lang.ClassNotFoundException: org.hibernate.ejb.HibernatePersistence
at weblogic.deployment.BasePersistenceUnitInfoImpl.getPersistenceProvider(BasePersistenceUnitInfoImpl.java:375)
at weblogic.deployment.BasePersistenceUnitInfoImpl.initializeEntityManagerFactory(BasePersistenceUnitInfoImpl.java:393)
at weblogic.deployment.BasePersistenceUnitInfoImpl.initializeEntityManagerFactory(BasePersistenceUnitInfoImpl.java:386)
at weblogic.deployment.BasePersistenceUnitInfoImpl.<init>(BasePersistenceUnitInfoImpl.java:158)
at weblogic.deployment.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:39)
Truncated. see log file for complete stacktrace
<10-Dec-2012 16:32:45 o'clock EET> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating deploy task for application 'ejb1'.> 
<10-Dec-2012 16:32:45 o'clock EET> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.application.ModuleException: Exception preparing module: EJBModule(ejb1.jar)

at weblogic.ejb.container.deployer.EJBModule.prepare(EJBModule.java:469)
at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199)
at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:517)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:159)
Truncated. see log file for complete stacktrace
Caused By: weblogic.deployment.EnvironmentException: Error processing persistence unit VakkoEJBModel of module ejb1.jar: Error instantiating the Persistence Provider class org.hibernate.ejb.HibernatePersistence of the PersistenceUnit VakkoEJBModel: java.lang.ClassNotFoundException: org.hibernate.ejb.HibernatePersistence
at weblogic.deployment.BasePersistenceUnitInfoImpl.getPersistenceProvider(BasePersistenceUnitInfoImpl.java:375)
at weblogic.deployment.BasePersistenceUnitInfoImpl.initializeEntityManagerFactory(BasePersistenceUnitInfoImpl.java:393)
at weblogic.deployment.BasePersistenceUnitInfoImpl.initializeEntityManagerFactory(BasePersistenceUnitInfoImpl.java:386)
at weblogic.deployment.BasePersistenceUnitInfoImpl.<init>(BasePersistenceUnitInfoImpl.java:158)
at weblogic.deployment.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:39)
Truncated. see log file for complete stacktrace
<10-Dec-2012 16:32:45 o'clock EET> <Error> <Console> <BEA-240003> <Console encountered the following error weblogic.application.ModuleException: Exception preparing module: EJBModule(ejb1.jar)

at weblogic.ejb.container.deployer.EJBModule.prepare(EJBModule.java:469)
at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199)
at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:517)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:159)
at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:45)
at weblogic.application.internal.BaseDeployment$1.next(BaseDeployment.java:613)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.BaseDeployment.prepare(BaseDeployment.java:184)
at weblogic.application.internal.EarDeployment.prepare(EarDeployment.java:58)
at weblogic.application.internal.DeploymentStateChecker.prepare(DeploymentStateChecker.java:154)
at weblogic.deploy.internal.targetserver.AppContainerInvoker.prepare(AppContainerInvoker.java:60)
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.createAndPrepareContainer(ActivateOperation.java:207)
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doPrepare(ActivateOperation.java:98)
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217)
at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747)
at weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216)
at weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250)
at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46)
at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:176)
Caused by: weblogic.deployment.EnvironmentException: Error processing persistence unit VakkoEJBModel of module ejb1.jar: Error instantiating the Persistence Provider class org.hibernate.ejb.HibernatePersistence of the PersistenceUnit VakkoEJBModel: java.lang.ClassNotFoundException: org.hibernate.ejb.HibernatePersistence

at weblogic.deployment.BasePersistenceUnitInfoImpl.getPersistenceProvider(BasePersistenceUnitInfoImpl.java:375)
at weblogic.deployment.BasePersistenceUnitInfoImpl.initializeEntityManagerFactory(BasePersistenceUnitInfoImpl.java:393)
at weblogic.deployment.BasePersistenceUnitInfoImpl.initializeEntityManagerFactory(BasePersistenceUnitInfoImpl.java:386)
at weblogic.deployment.BasePersistenceUnitInfoImpl.<init>(BasePersistenceUnitInfoImpl.java:158)
at weblogic.deployment.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:39)
at weblogic.deployment.AbstractPersistenceUnitRegistry.storeDescriptors(AbstractPersistenceUnitRegistry.java:349)
at weblogic.deployment.AbstractPersistenceUnitRegistry.loadPersistenceDescriptor(AbstractPersistenceUnitRegistry.java:263)
at weblogic.deployment.ModulePersistenceUnitRegistry.<init>(ModulePersistenceUnitRegistry.java:69)
at weblogic.ejb.container.deployer.EJBModule.setupPersistenceUnitRegistry(EJBModule.java:223)
at weblogic.ejb.container.deployer.EJBModule$1.execute(EJBModule.java:324)
at weblogic.deployment.PersistenceUnitRegistryInitializer.setupPersistenceUnitRegistries(PersistenceUnitRegistryInitializer.java:62)
at weblogic.ejb.container.deployer.EJBModule.prepare(EJBModule.java:393) 
```

我的错误或不完整是什么？请帮助我并原谅我糟糕的英语。提前致谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-14T10:37:04.033

我根据这些进行了配置： - [http://middlewaremagic.com/weblogic/?p=5861](http://middlewaremagic.com/weblogic/?p=5861) - [http://middlewaremagic.com/weblogic/?p=6725](http://middlewaremagic.com/weblogic/?p=6725) - [http://middlewaremagic.com/weblogic/?p =7478](http://middlewaremagic.com/weblogic/?p=7478)

它的工作原理另见[https://forums.oracle.com/forums/message.jspa?messageID=10741984#10741984](https://forums.oracle.com/forums/message.jspa?messageID=10741984#10741984)

# git - 为什么在 git pull 之后 git push 会非快进失败？

> ID：13803738
> 
> 赞同：0
> 
> 时间：2012-12-10T15:17:48.260
> 
> 标签：git

我得到了这个错误，现在我很害怕。

```
$ git pull
Already up-to-date.
$ git push
To git@github.com:Unroll-Me/unrollme_thumbnail_generator.git
 ! [rejected]        master -> master (non-fast-forward) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:27:20.093

也许你不在分支上`master`？`git pull`只合并当前分支。

尝试

```
git checkout master
git pull origin master
git push 
```

# ruby-on-rails - 未初始化的常量 ModelObserver - Heroku 上的 Rake 任务

> ID：13803739
> 
> 赞同：3
> 
> 时间：2012-12-10T15:17:52.373
> 
> 标签：ruby-on-rails, activerecord, heroku, rake

Rake 任务执行 ActiveRecord 模型操作。我添加`ActiveRecord::Base`了 rake 任务并且在本地工作，但不是在 Heroku 上导致这个错误：

> 未初始化的常量 BookingObserver

就行了`ActiveRecord::Base`。如果我不包括那条线，那么我根本无法使用模型*（导致类似的错误只是模型而不是观察者）*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T00:16:11.320

I was using config.threadsafe! which disables dependency loading (thus not loading the observer, just the model). The solution was to add config.dependency_loading = true if $rails_rake_task to the environment.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T15:39:56.390

您的 rake 任务需要在执行 ActiveRecord 代码之前加载 Rails 环境。

```
# lib/tasks/my_tasks.rake
task :my_task => :environment do
  # Your task here
  # it has access to the Rails environment now
end 
```

另请参阅[此类似问题](https://stackoverflow.com/questions/7044714/whats-the-environment-task-in-rake)和[Railscast on custom rake tasks](http://railscasts.com/episodes/66-custom-rake-tasks)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T17:09:27.300

`config.threadsafe!`我可以通过在 production.rb 中注释掉来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-18T05:34:30.247

我在 application.rb 中添加了这段代码

`config.autoload_paths += Dir[ Rails.root.join('app', 'models', '**/') ]`

就在调用之前：

`config.active_record.observers = [:user_observer]`

我认为因为我的应用程序，它不会自动发现模型/观察者/下的观察者目录

# java - Hashset 允许重复？

> ID：13803743
> 
> 赞同：5
> 
> 时间：2012-12-10T15:18:08.257
> 
> 标签：java, duplicates, hashset

这个问题肯定不是一个新问题，但我在任何地方都没有找到任何有用的答案。

正如您在下面的代码中看到的，equals 和 hashcode 方法被覆盖，但它仍然允许重复。哈希码已由 Netbeans 自动生成。

```
@Override
public boolean equals(Object o)
{
    TaskDetails other = (TaskDetails) o;
    if ( (id_subtask == other.id_subtask)
            && ((date.compareTo(other.date)) == 0) )
    {
        System.err.println("Duplicate Entry"+id_subtask+" + "+other.id_subtask);
        return true;
    }
    else
    {
        System.out.println("Good!" +id_subtask+" + "+other.id_subtask);
        return false;
    }

} 

@Override
public int hashCode() {
    int hash = 7;
    hash = 71 * hash + this.id_subtask;
    hash = 71 * hash + this.id_team_member;
    hash = 71 * hash + Float.floatToIntBits(this.nb_hours);
    hash = 71 * hash + (this.date != null ? this.date.hashCode() : 0);
    hash = 71 * hash + (this.comment != null ? this.comment.hashCode() : 0);
    hash = 71 * hash + (this.subtask_name != null ? this.subtask_name.hashCode() : 0);
    System.out.println("Hash : "+hash + "Subtask : " + id_subtask);
    return hash;       
} 
```

这是用于将条目添加到 hashset 的代码：

```
TaskDetails newTaskDetails = new TaskDetails
                                (
                                    s.getId_subtask(),
                                    mus.teamMember.getId_team_member(),
                                    f,
                                    mysqlFormat.format(caldate),
                                    c.substring(0, Math.min(c.length(), 100)),
                                    s.getName_subtask()
                                );

                            allTasks.add(newTaskDetails); 
```

（allTask​​s 是 Hashset）

此代码用于函数 A 和 B。

如果只执行函数 A，它就可以正常工作。如果函数 B 在函数 A 之后执行（所以上面的代码被执行了两次），那么哈希集会突然接受重复，即使 system.err 被触发说有重复条目？

代码中是否存在缺陷，或者我只是遗漏了什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T15:31:21.090

您正在使用 2 个字段将 2 个对象视为“相等”，但您正在使用超过 2 个字段来构造哈希码。你的`hashCode()`方法*不能*比你的`equals()`方法更具体。作为一个好的经验法则，您的`hashCode()`方法不应该使用您的方法不使用的任何字段`equals()`（但是它可以使用更少）。更专业地说，如果 2 个对象“相等”，它们*必须*具有相同的哈希码（不需要相反）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:33:31.787

您违反了 hashCode() 和 equals() 之间的一致性要求。如果两个对象根据 equals() 相等，则它们也必须具有相同的哈希值。因为你的 equals 只考虑两个字段，而 hashCode 考虑的更多，所以不满足这个要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:33:04.287

这是一个重复的问题，请参阅我[之前的回答](https://stackoverflow.com/questions/1642210/duplicate-elements-in-java-util-set/1642520#1642520)。

a`java.util.HashSet`允许重复的行为是在`java.util.HashSet`can 中对象的哈希码发生变化时引起的。

这通常发生在从可变字段构造对象的哈希码时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:33:35.103

你的问题是执行`hashCode()`不匹配`equals()`。两种方法都**必须**使用对象的相同属性。

`hashCode()`即使`equals()`评估为，在您的实现中也可能有所不同`true`。在这种情况下（不同`hashCode`的 s），对象对于 是不同的`HashMap`。

请更正您的实现以使用相同的属性。然后错误应该消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T15:34:14.610

来自[javadoc`Object`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)

```
If two objects are equal according to the equals(Object) method, then
calling the hashCode method on each of the two objects must produce the
same integer result. 
```

根据`equals(Object)`方法，对于两个相等的对象，您的哈希码是不同的，因此其他代码`HashSet`将做出错误的假设，并返回错误的结果。

某些代码的编写方式依赖于其他遵守“合同”的对象。您的班级不遵守`Object`合同，因此不能假定集合中的任何内容都不起作用，因为集合要求`Object`不违反合同。

# python - 多个实例和多个目的地

> ID：13803747
> 
> 赞同：1
> 
> 时间：2012-12-10T15:18:19.147
> 
> 标签：python, logging, configuration

我有多个 Python 模块，每个模块都有单独的日志配置文件。我正在使用 Yaml，所以我只是做一个

```
 log_config_dict=yaml.load(open(config_file1, 'r'))
    logging.config.dictConfig(log_config_dict)             
    self.main_logger=logging.getLogger('Main_Logger') 
```

在另一个模块中，我有类似的东西

```
 log_config_dict=yaml.load(open(config_file2, 'r')) 
   logging.config.dictConfig(log_config_dict)       
   self.main_logger=logging.getLogger('Poller_Main_Logger') 
```

2 个记录器正在写入单独的日志文件。然后在每个单独模块的代码中，我将日志记录为 -

```
 self.main_logger.info(log_str) 
```

但是，这并没有按预期工作。假设我从模块 1 进行日志记录，然后从模块 2，然后再次从模块 1，日志消息要么写入模块 2 的目标，要么根本不写入。

知道发生了什么吗？问题是每次我进行 dictConfig 调用时，以前的记录器都会被禁用吗？有没有办法解决？

下面 - 日志配置文件之一

```
version: 1
formatters:
  default_formatter:
    format: '%(asctime)s : %(levelname)s : %(message)s'
    datefmt: '%d-%b-%Y %H:%M:%S'
  plain_formatter:
    format: '%(message)s'
handlers:  
  console_default_handler:
    class: logging.StreamHandler
    level: INFO
    formatter: default_formatter
    stream: ext://sys.stdout  
  console_error_handler:
    class: logging.StreamHandler
    level: WARNING
    formatter: default_formatter
    stream: ext://sys.stderr  
  logfile_handler:    
    class: logging.FileHandler
    filename: logger.txt
    mode: a
    formatter: default_formatter
    level: DEBUG    
  errfile_handler:    
    class: logging.FileHandler
    filename: error.txt
    mode: a
    formatter: default_formatter
    level: WARNING    
  plain_handler:
    class: logging.StreamHandler
    level: DEBUG
    formatter: plain_formatter
    stream: ext://sys.stdout
loggers:
  Poller_Main_Logger:
    level: DEBUG
    handlers: [console_default_handler,logfile_handler]
    propagate: no
  Plain_Logger:
    level: DEBUG
    handlers: [plain_handler]
    propagate: no
  Error_Logger:
    level: WARNING
    handlers: [errfile_handler,console_error_handler,logfile_handler]
    propagate: no
root:
  level: INFO
  handlers: [console_default_handler] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:58:54.353

`logging`这里不支持你想要的使用模式。默认情况下，重新运行`logging.config.dictConfig()`会清除所有现有的记录器、处理程序和格式化程序。config dict 中有`incremental`和`disable_existing_loggers`选项可供使用，但使用`incremental`，您无法加载新的处理程序或格式化程序。您要么需要将您的配置组合到整个程序的单个文件中，要么使用模块中提供的机制手动构造并将格式化程序和处理程序添加到记录器。

# android - Android 内存泄漏 - 无法正确释放位图，内存不足错误 - 位图大小超过 VM 预算 [Mono Android]

> ID：13803750
> 
> 赞同：2
> 
> 时间：2012-12-10T15:18:41.523
> 
> 标签：android, bitmap, mono, android-listview, out-of-memory

我似乎无法弄清楚为什么我的活动总是内存不足。

当我加载我的活动时，我有一堆加载到自定义列表视图适配器中的图像。当我开始活动时，屏幕加载正常。但是当我改变方向或返回并重新启动时，活动会生成内存不足异常。

这是我的活动的样子：

![崩溃的鱼类活动](../Images/7118925ff9c98365bfbfdc23dda21e1c.png)

这是我的活动的代码：

```
 [Activity(Label = "FishinTales: Fish Species")]
public class Activity_View_FishSpecies : Activity
{
    #region Components
    private Model n_model;
    private ListView n_fishSpeciesListView;
    #endregion

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Get Application Global Model
        this.n_model = ((MyApp) this.ApplicationContext).FishingData;

        // Set our view from the "View_FishSpecies" layout resource
        SetContentView(Resource.Layout.View_FishSpecies);

        this.n_fishSpeciesListView = FindViewById<ListView> (Resource.Id.xml_fishSpeciesListView);
        this.n_fishSpeciesListView.Adapter = new FishSpeciesListAdapter (this.ApplicationContext, this.n_model.SpecieManager.Species);
    }

    protected override void OnDestroy()
    {
        base.OnDestroy();
        this.unbindDrawables(FindViewById(Resource.Id.xml_root));
        this.n_fishSpeciesListView.Adapter = null;
        this.n_fishSpeciesListView = null;
    }

    private void unbindDrawables(View view) {
        if (view.Background != null) {
            view.Background.SetCallback(null);
        }
        if (view.GetType() == typeof(ViewGroup)) {
            for (int i = 0; i < ((ViewGroup) view).ChildCount; i++) {
                unbindDrawables(((ViewGroup) view).GetChildAt(i));
            }
            ((ViewGroup) view).RemoveAllViews();
        }
    }
}

public class FishSpeciesListAdapter : BaseAdapter
{
    Context n_context;
    List<AppCode.Specie> n_specieData;
    List<Bitmap> n_bitmapCache;

    public FishSpeciesListAdapter (Context context, List<AppCode.Specie> specieData)
    {
        this.n_context = context;
        this.n_specieData = specieData;
        this.n_bitmapCache = new List<Bitmap>();
        this.LoadBitmapsIntoCache();
    }

    private void LoadBitmapsIntoCache()
    {
        foreach(AppCode.Specie specie in this.n_specieData)
        {
            if (specie.RelatedMedia.AttachedPhotos.Count < 1)
            {
                this.n_bitmapCache.Add(BitmapFactory.DecodeResource(this.n_context.Resources, Resource.Drawable.Icon)); 
            }
            else
            {
                this.n_bitmapCache.Add(BitmapFactory.DecodeByteArray(specie.RelatedMedia.AttachedPhotos[0], 0, specie.RelatedMedia.AttachedPhotos[0].Length));  
            }
        }
    }

    public override int Count {
        get { return this.n_specieData.Count; }
    }

    public override Java.Lang.Object GetItem (int position)
    {
        return null;
    }

    public override long GetItemId (int position)
    {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public override View GetView (int position, View convertView, ViewGroup parent)
    {
        if(convertView==null){

            LayoutInflater li = LayoutInflater.FromContext(parent.Context);
            convertView = li.Inflate(Resource.Layout.Adapter_FishSpeciesIcon, null);
        }

        ImageView iconImage = (ImageView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesIconImage);
        TextView nameText = (TextView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesNameText);
        TextView scientificNameText = (TextView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesScientificNameText);

        nameText.Text = this.n_specieData[position].Name;
        scientificNameText.Text = this.n_specieData[position].ScientificName;
        iconImage.SetImageBitmap(this.n_bitmapCache[position]); 

        return convertView;
    }
} 
```

这是我在生成 OOM 错误之前的所有进程的日志。

```
 Loading Defaults - Successfully Loaded Defaults
Grow heap (frag case) to 6.474MB for 314670-byte allocation
Clamp target GC heap from 32.512MB to 32.000MB
796824-byte external allocation too large for this process.
VM won't let us allocate 796824 bytes
Clamp target GC heap from 33.447MB to 32.000MB
--- decoder->decode returned false
UNHANDLED EXCEPTION: Java.Lang.OutOfMemoryError: Exception of type 'Java.Lang.OutOfMemoryError' was thrown.
at Android.Runtime.JNIEnv.CallStaticObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00080>
at Android.Graphics.BitmapFactory.DecodeByteArray (byte[],int,int) <0x001bb>
at FishinTales.FishSpeciesListAdapter.LoadBitmapsIntoCache () <0x00187>
at FishinTales.FishSpeciesListAdapter..ctor (Android.Content.Context,System.Collections.Generic.List`1<FishinTales.AppCode.Specie>) <0x000a3>
at FishinTales.Activity_View_FishSpecies.OnCreate (Android.OS.Bundle) <0x0012f>
at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) <0x00057>
at (wrapper dynamic-method) object.99ebf5db-74ad-4da9-b431-612691e1f213 (intptr,intptr,intptr) <0x00033>

  --- End of managed exception stack trace ---
java.lang.OutOfMemoryError: bitmap size exceeds VM budget(Heap Size=6855KB, Allocated=3089KB, Bitmap Size=26666KB)
    at android.graphics.BitmapFactory.nativeDecodeByteArray(Native Method)
    at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:625)
    at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:638)
    at fishintales.Activity_View_FishSpecies.n_onCreate(Native Method)
    at fishintales.Activity_View_FishSpecies.onCreate(Activity_View_FishSpecies.java:29)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3242)
    at android.app.ActivityThread.access$1600(ActivityThread.java:132)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1037)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:143)
    at android.app.ActivityThread.main(ActivityThread.java:4196)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)

Unhandled Exception:
Java.Lang.OutOfMemoryError: Exception of type 'Java.Lang.OutOfMemoryError' was thrown.
at Android.Runtime.JNIEnv.CallStaticObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00080>
at Android.Graphics.BitmapFactory.DecodeByteArray (byte[],int,int) <0x001bb>
at FishinTales.FishSpeciesListAdapter.LoadBitmapsIntoCache () <0x00187>
at FishinTales.FishSpeciesListAdapter..ctor (Android.Content.Context,System.Collections.Generic.List`1<FishinTales.AppCode.Specie>) <0x000a3>
at FishinTales.Activity_View_FishSpecies.OnCreate (Android.OS.Bundle) <0x0012f>
at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) <0x00057>
at (wrapper dynamic-method) object.99ebf5db-74ad-4da9-b431-612691e1f213 (intptr,intptr,intptr) <0x00033>

  --- End of managed exception stack trace ---
java.lang.OutOfMemoryError: bitmap size exceeds VM budget(Heap Size=6855KB, Allocated=3089KB, Bitmap Size=26666KB)
    at android.graphics.BitmapFactory.nativeDecodeByteArray(Native Method)
    at android.gra 
```

当我最初查看活动时，一切都很好。当我离开活动并多次返回时，它最终会因上述错误而崩溃。这使我推测该错误来自内存泄漏，其中位图未正确回收。那么有没有关于如何准确地释放这些位图的例子呢？当您的位图位于自定义 ListView 适配器类中时，很难找到有关此主题的信息。当我在设置后放置 Bitmap.recycle 时，我收到另一个错误，指出 ListView 正在尝试访问回收的项目。那么我应该如何/何时根据上面的代码进行回收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:19:31.510

我想知道您使用的是哪个版本的 Android。如果是 Jelly Bean (Android 4.1.1) 请去掉这行代码

```
this.n_bitmapCache.Add(BitmapFactory.DecodeResource(this.n_context.Resources, Resource.Drawable.Icon)); 
```

看看你是否有内存泄漏。

在更新到 Android 4.1.1 后，我的应用程序也开始出现内存泄漏，我发现问题出在

```
setBackgroundResource(id); 
```

我尝试将其更改为

```
setBackground(context.getResources().getDrawable(id)); 
```

但仍然出现内存泄漏。如果我们尝试从资源创建可绘制对象或位图，我想确认它是我的代码中的错误还是 Jelly Bean 中的错误导致内存泄漏。很抱歉没有回答您的问题，但我们至少可以知道错误的原因并向 Android 团队提出问题。

**更新** 我在这个[链接中找到了解决方案](http://code.google.com/p/android/issues/detail?id=42516&q=setbackgroundresource&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

对于从资源的可绘制文件夹创建的位图，请使用 setBackgroundDrawable(null)。

# ios - 当位置不是整数时，UILabel 的文本会模糊吗？

> ID：13803752
> 
> 赞同：0
> 
> 时间：2012-12-10T15:18:55.823
> 
> 标签：ios, uilabel, frame

我正在 iOS 6 中开发一个应用程序，它类似于表单填写应用程序。我使用 XML 来绘制 UI 元素，我的问题是每当
UILable 的 x,y 位置是整数时，例如 x="43" y="165" 文本都很好，但是当我将位置作为浮点值时，例如 x= "43.5" y="165.2" 文本看起来模糊或看起来像下图中应用的粗体

x="43" y="165"

![正确的图像](../Images/11993bfcf313079ba8742dd3cf446dae.png)

x="43.5" y="165.2"

![图像模糊](../Images/2a0f88e7449f8175fb491ba646f46526.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:24:31.403

since you can't render halve a pixel, text placed on halve pixels will get blurred as the rendering system will try and render the halve pixel.

What you can do in `round` the coordinates to make sure that there not halve pixels.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:24:51.483

That's normal. Because your text is rendered in some sub-pixel area. That means you cannot make a pixel on the device display both your text and the background. But this should be fine if you use .5 position value in Retina Display. Because 1 point on Retina Display is 2 pixel.

# java - 如何理解 Vaadin 中的注解？

> ID：13803753
> 
> 赞同：-3
> 
> 时间：2012-12-10T15:19:00.207
> 
> 标签：java, vaadin

我真的是 Vaadin 和 Java 的菜鸟......

我有这个片段：

```
@com.vaadin.ui.ClientWidget(ModuleName.class)
public class HomeScreen extends Screen { ... } 
```

这些注释对 Vaadin 意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:55:07.850

@SuppressWarnings 只是告诉 Eclipse 不要为类中的某些特定元素显示警告的一种方式。在这种情况下，Eclipse 不会抱怨缺少串行 uid。它们没有被定义，因为它们不是必需的。

Vaadin 组件有两个部分；服务器端和客户端。@ClientWidget 注解旨在放置在服务器端组件中，并将服务器端组件绑定到客户端组件。参考：[Vaadin 之书](https://vaadin.com/book/-/page/gwt.server-side.html#N364A3)。

如果您不自己开发客户端小部件，则不必介意 @ClientWidget 注释。如果您是初学者，我建议您暂时不要为客户端开发而烦恼。

# php - 按标签过滤标签并计数

> ID：13803755
> 
> 赞同：1
> 
> 时间：2012-12-10T15:19:05.443
> 
> 标签：php, jquery, mysql, laravel

我的mysql结构如下：

```
+----+-------------------------+-------------+-----------+--------------+
| id | title/text/moretext/img | language_id | course_id | country_code |
+----+-------------------------+-------------+-----------+--------------+
|  1 | Plenty of information   |           1 |         3 | it           |
+----+-------------------------+-------------+-----------+--------------+ 
```

我正在使用 laravel 框架来构建我的网站。

这是一个食谱。这是一道开胃菜（course_id 3 使用 php 数组转换为开胃菜，因为页面是多语言的）。这道开胃菜来自它。'it' 在 PHP 中再次翻译为意大利，因为国家名称将是多语言的。配方是用英语编写的（language_id 是与语言表的一对多关系，语言 id 1 是英语）。提供此信息以防万一它改变任何东西，我对此表示怀疑，但最好安全行事。

每篇文章将只有一个标签。

我需要的是一个与所有可用选项相呼应的选择列表（与正在使用的过滤器相关的选项，所以如果我没有来自南非的法语食谱，如果法语是所选语言，南非将不会显示在过滤器列表中） .

谷歌一无所获，我的时间不多了，我的想法为零。有什么方法可以轻松实现吗？

我查看了[http://luis-almeida.github.com/filtrify/](http://luis-almeida.github.com/filtrify/)并认为这正是我想要的功能，但我认为它对大型数据库来说太重了，因为我必须这样做查询整个数据库并从中列出。但我可能错了。

使用类似[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)的实现也可以用于选择，但我什至不知道如何实现它。

任何帮助都会非常棒。我在这里完全超出了我的头脑，完全没有编程热情。我已经花了几天的时间在这上面画一个空白。没有别的要问了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:27:46.390

一种快速而肮脏的方式来解决这个问题（你可以随时回来并在以后增强它）将是

```
SELECT DISTINCT country_code, language_id 
FROM recipes 
ORDER BY country_code, language_id 
```

使用任何必要的连接/翻译来获取国家名称和语言名称，然后从结果中制作一个下拉菜单......

```
Deutschland - Deutsch 
France - Francais 
South Africa - Afrikaans 
South Africa - English 
United States - English 
```

所以每个项目都是国家名称和语言。如果大多数国家/地区只使用一种或两种语言，那么这对用户来说不应该是压倒性的。

# css - 逆向工程引导定制

> ID：13803757
> 
> 赞同：1
> 
> 时间：2012-12-10T15:19:12.780
> 
> 标签：css, twitter-bootstrap

当我开始使用引导程序时，我在他们的自定义页面中放入了一堆颜色和字体，然后下载了最终编译的 css（从less）。

我已经丢失了我在那里所做的任何更改，它们似乎遍布整个代码。由于它实际上并没有在下载中包含较少的自定义项，因此似乎没有办法将我更改的值恢复（升级）

是否有一个实用程序可以从 bootstrap.css 中提取自定义颜色、字体、大小等，以便我可以重新申请新版本的 bs？或者更好的是重新生成 less 以便我可以将其分开并编译新的 bs.css 文件，因为它们会增加版本

# android - mk:1: *** 缺少分隔符。安卓NDK

> ID：13803759
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:19:16.167
> 
> 标签：android, c++, c, android-ndk

我正在尝试编译一些源代码，但是当我运行命令时

**make -f android-9-armv7.mk**

我收到以下错误 android-9-armv7.mk:1: ***缺少分隔符。停止。

这是上面文件的内容： 我也设置了 IMAGINE_PATH 变量，似乎无法弄清楚。

> 链接../imagine/make/shortcut/common-builds/android-9-armv7.mk

编译说明 [http://code.google.com/p/emu-ex-plus-alpha/wiki/Compiling](http://code.google.com/p/emu-ex-plus-alpha/wiki/Compiling)

Imagine 位于 C:/Imagine

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:58:12.343

我不知道您从哪里获取源代码，但是`android-9-armv7.mk`该 git 上不同项目的所有文件都具有以下内容：

```
../imagine/make/shortcut/common-builds/android-9-armv7.mk 
```

...没有`link`关键字，这可能就是您收到此错误的原因。

另外，请注意，您正在*Windows*机器上构建它，而文档明确指出它仅在*Linux*和*Mac OS X*上受支持。

# sorm - 如何在 Sorm 中添加自定义值类型？

> ID：13803760
> 
> 赞同：2
> 
> 时间：2012-12-10T15:19:22.430
> 
> 标签：sorm

我看到[Sorm](http://sorm-framework.org/Documentation.html#data_types)已经支持`org.joda.time.DateTime`. 是否有可能添加对其他类型的支持？

例如，我的案例类有一个`java.nio.charset.Charset`or`Locale`字段，我想将其转换为字符串。假设我有函数来完成从自定义类型到 SQL 类型的转换，我如何告诉 Sorm 使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:15:12.190

SORM 对特定数据类型的支持比仅仅转换为 SQL 类型和从 SQL 类型转换的能力要复杂得多。某些类型的值可能跨越多个列（例如 Tuple、Range），其他类型的值可能需要中间表（Seq、Set、Map），并且它们都需要单独的方法来翻译查询子句。如果要公开一个，所有这些都会导致一个非常复杂的临时类型映射 API。

但问题是，上述情况确实不是这样的 API 没有公开的原因，而且很可能永远不会公开。你看，SORM 的哲学本质上都是关于纯不可变数据模型的，而设计这种模型的最简洁方法是使用标准 Scala 的不可变数据类型和案例类。

因此，使用 SORM 设计应用程序的简洁方法是将那些有状态的 Java 类转换为应用程序中的不可变值。例如，您可以`case class Charset (...)`在您的模型中实现自定义，将其注册到 SORM 的实例，并让您的转换函数在此类型和应用程序中的 Java 类型之间工作。除此之外，您可以将其实现`Charset`为`Enumeration`，这似乎是最合适的。

关于您关于 Joda Time 类型支持的论点，主要是因为需要一些数据类型来表示 SQL 的时间戳。将此逻辑视为与您的想法相反。

# vb.net - 您如何在 VB.NET 中检测同时按下诸如“Ctrl + T”之类的按键？

> ID：13803761
> 
> 赞同：11
> 
> 时间：2012-12-10T15:19:23.323
> 
> 标签：vb.net, keydown

我正在尝试检测在 VB.NET 中同时按下的键“Control”和“t”。我到目前为止的代码如下：

```
Private Sub frmTimingP2P_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
    If e.KeyValue = Keys.ControlKey And e.KeyValue = Keys.T Then
        MessageBox.Show("Ctrl + T")
    End If
End Sub 
```

我可以通过删除 and 语句和第二个 keyvalue 语句来检测一个键或另一个，但是当我尝试这个时我并没有真正得到任何东西。还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T15:24:18.257

首先，`And`在你的代码中应该是`AndAlso`因为它是一个逻辑运算符。`And`在 VB 中是位运算符。接下来，您可以使用该[`Modifiers`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.keyeventargs.modifiers.aspx)来测试修饰键：

```
If (e.KeyCode And Not Keys.Modifiers) = Keys.T AndAlso e.Modifiers = Keys.Control Then
    MessageBox.Show("Ctrl + T")
End If 
```

条件的`e.KeyCode And Not Keys.Modifiers`第一部分中的 是屏蔽修饰键所必需的。

`If e.Modifiers = Keys.Ctrl`也可以写成[`If e.Control`](http://msdn.microsoft.com/en-us/library/system.windows.forms.keyeventargs.control.aspx)。

或者，我们可以通过直接询问组合`Ctrl`+是否`T`被按下来整理这两个查询：

```
If e.KeyCode = (Keys.T Or Keys.Ctrl) Then … 
```

在这两个片段中，我们都使用了[位掩码](https://en.wikipedia.org/wiki/Bit_mask)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-26T13:33:47.243

Private Sub frmMain_Zaporka_KeyDown(sender As Object, e As KeyEventArgs) 处理 MyBase.KeyDown

```
Select Case e.KeyData
    Case (Keys.Control + Keys.Shift + Keys.F12)
        MsgBox("Control + Shift + F12")
    Case (Keys.Escape)
        Me.Close()
End Select

' or

If e.KeyCode = Keys.F12 AndAlso e.Modifiers = (Keys.Control Or Keys.Shift) Then
    MsgBox("Control + Shift + F12")
ElseIf e.KeyCode = Keys.Escape Then
    Me.Close()
End If

' or

Select Case e.KeyCode
    Case (Keys.F12 And e.Control And e.Shift)
        MsgBox("Control + Shift + F12")
    Case (Keys.Escape)
        Me.Close()
End Select 
```

结束子

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-08T16:54:33.213

我有同样的问题，但为了让这个工作我必须将 forms **KeyPreview**属性设置为**true**。在 Visual Studio 中，您可以在 Forms [Design] Property 窗口中更改它或在加载时更改属性。

```
Private Sub frmTimingP2P_Load(ByVal sender As System.Object, ByVal e As _ 
                               System.EventArgs) Handles MyBase.Load

    Me.KeyPreview = True

End Sub 
```

然后使用：

```
Private Sub frmTimingP2P_KeyDown(ByVal Sender As Object, ByVal e As _ 
                        System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown

        If (e.KeyCode = Keys.T AndAlso e.Modifiers = Keys.Control) Then
            MessageBox.Show("Ctrl + T")
        End If

End Sub 
```

或上述答案中提供的其他程序逻辑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-19T10:13:16.010

我会把你从长代码中拯救出来。这里：

```
If e.Control And e.Alt And e.KeyCode = Keys.G Then
    MsgBox("Control Alt G")
End If 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T15:24:34.190

我现在没有安装 vb.net 但是在你的 keydown 或 keypress 事件上试试这个：

```
If e.KeyCode = Keys.T AndAlso e.Control = True Then
MsgBox("Ctrl + T")
End If 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-19T13:43:42.510

我实际上通过实验发现，当通过我们添加到代码中的“KeyDown”或“KeyUp”例程处理代码时，KeyPreview 设置是无关紧要的。也许按键的自动内置代码考虑了 KeyPreview 设置，但我们甚至不必考虑它。

我发现最好的方法是 KuroMoro 的答案中显示的方法，使用 e.KeyData 加上各种“案例陈述”。当某些键与 Control 键同时按下时，以下将符号插入文本框的效果很好。

```
Private Sub Comments_KeyUp(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles Comment.KeyDown, Response.KeyDown
    Select Case e.KeyData
        Case (Keys.S + Keys.Control)
            SendKeys.Send("♠&quot;)
        Case (Keys.H + Keys.Control)
            SendKeys.Send("♥&quot;)
        Case (Keys.D + Keys.Control)
            SendKeys.Send("♦&quot;)
        Case (Keys.C + Keys.Control)
            SendKeys.Send("♣&quot;)
    End Select
End Subcode 
```

# java - 在一个表或类似的表中使用两个主键

> ID：13803764
> 
> 赞同：2
> 
> 时间：2012-12-10T15:19:36.293
> 
> 标签：java, database, hibernate, postgresql

我有一张桌子`Users`。

我有一个自动增加的长 id 作为主要。现在我需要用户名也是唯一的。最佳做法是什么？

我应该只保留用户名并删除数字ID吗？我应该以某种方式使它们都独一无二吗？你有什么建议吗？

也许还应该提到使用休眠。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:28:30.240

通常，您会在用户名上添加“唯一约束”。拥有自动增量 id 并不是严格需要的，但不使用“自然键”是一种常见的做法。请参阅此相关问题：本 [机主键还是自动生成的主键？](https://stackoverflow.com/questions/532363/native-primary-key-or-auto-generated-one).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:31:51.507

要保持用户名的唯一性，您只需要：

```
ALTER TABLE Users 
ADD CONSTRAINT constraint_name UNIQUE (username); 
```

无需更改主键。`id`有一个主键很有用。它允许您更改用户名，而无需`UPDATE`链接表。

UPD：唯一的情况是，当您不想保持两个 PK（一个真正的，另一个“半”PK）时，就是桌子`UPDATE/INSERT/DELETE`每秒有很多。在这种情况下，2 个索引与 1 个索引的开销可能会很明显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:36:28.260

用户名可以更改吗？如果没有，您可以将其用作主键。这将是一个自然键，因此，在我看来，它比代理键更好，例如您当前使用的。

如果用户名可以更改，那么它不适合用作主键。

由于您无法知道将来可能出现的所有情况，我怀疑您不能排除用户名可能需要更改的可能性。因此，代理键是面向未来的选择。

即使用户名不是主键，也可以对用户名进行唯一约束。您很可能还需要一个非空约束。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T15:30:52.387

这取决于您的应用程序是如何使用的。如果用户名可以更改，我建议使用 ID 作为主键 - 您可以随时在代码中进行一些检查，以确保用户名在创建时是唯一的。

在从数据库访问数据时使用 ID（主键）是一种常见的做法，因为如果您要使用其他任何东西，可能会引入难以调试的意外行为。

# delphi - KOL应用主图标

> ID：13803771
> 
> 赞同：1
> 
> 时间：2012-12-10T15:19:54.943
> 
> 标签：delphi, kol

我想用[KOL](http://kolmck.net/)制作非常小的 Exe。

一切似乎都很好，但我不知道如何设置应用程序的主图标（在任务栏中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T15:27:15.310

将图标资源添加到您的项目中，图标名称为`MAINICON`.

所以，在你的 .rc 文件中你有这个：

```
MAINICON ICON "MyAppIcon.ico" 
```

并在 .dpr 文件中编译和链接资源，如下所示：

```
{$R 'MyApp.res' 'MyApp.rc'} 
```

如果你有一个旧版本的 Delphi 不接受这种语法，`$R`那么你需要手动编译资源并像这样链接它：

```
{$R 'MyApp.res'} 
```

* * *

例如，这个 .dpr 文件：

```
uses
  KOL;

{$R 'MyApp.res'}

var
  Form: PControl;

begin
  Form := NewForm(nil, 'My form');
  Run(Form);
end. 
```

只需创建一个带有图标的主窗体的应用程序，并且该图标显示在任务栏上。

这就是它的样子：

![在此处输入图像描述](../Images/d26c08036e24a9c0ccb0ab00ad619a20.png)

请注意，一些 KOL 演示项目的代码如下：

```
Form.Icon := THandle(-1); 
```

这自然会干扰任何强加图标的尝试。显然，您需要删除任何此类代码。在回答这个问题（我的第一个 KOL 项目 FWIW）时，我有点挣扎，想知道你是否也有同样的问题。

# javascript - 手机全屏html

> ID：13803773
> 
> 赞同：0
> 
> 时间：2012-12-10T15:20:00.137
> 
> 标签：javascript, jquery, html, mobile, canvas

> **可能重复：**
> [HTML5 Canvas 调整大小以适合窗口](https://stackoverflow.com/questions/1664785/html5-canvas-resize-to-fit-window)

我正在为手机开发 HTML5 游戏。

我想拉伸画布以获取完整的手机宽度和高度。

我正在使用此代码，但它不是很准确：

```
ourCanvas = document.getElementById('gameCanvas');
context = ourGameCanvas.getContext( '2d' );
ourCanvas.width = $(window).width();
ourCanvas.height = $(window).height(); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:26:37.100

看起来您的画布不会在窗口调整大小或方向更改事件时刷新它的宽度和高度：

```
$(window).on("resize", fitCanvas);
fitCanvas();

function fitCanvas() {
    var ourCanvas = document.getElementById('gameCanvas');
    context = ourGameCanvas.getContext( '2d' );
    ourCanvas.width = $(window).width();
    ourCanvas.height = $(window).height();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:10:33.090

```
.outerWidth()
.outerHeight() 
```

?

你有没有重置你的布局？喜欢：

```
body, html, p, whatever { padding:0; margin:0; } 
```

# git - 当 rebase 是空操作时压缩 git 提交

> ID：13803781
> 
> 赞同：2
> 
> 时间：2012-12-10T15:20:21.710
> 
> 标签：git, rebase, squash

我正在尝试将一些提交压缩到我希望贡献的 github 项目的 pull-request-ready 包中，但是使用`git rebase -i master`并没有给我期望的选项（基于对 StackOverflow 和其他地方的阅读。这个这是我第一次尝试压缩提交，所以我可能只是错过了一些东西。

该项目的历史大致如下：

```
# On branch master
git pull origin master
git fetch upstream
git rebase upstream/master
git checkout -b feature
git commit -m "some work"
git commit -m "a little more work"
git commit -m "finishing up feature"
git checkout master
git pull origin master
git fetch upstream
git rebase upstream/master
git checkout feature 
```

此时，origin/master 或 upstream/master 没有任何变化，所以即使没有重新设置我的功能分支，也与 origin 和上游呈线性关系。当我这样做时`git rebase -i master`，我的任何提交都没有在弹出的编辑器中列出，完全空白，rebase 的输出是`Successfully rebased and updated refs/heads/feature`.

我知道我可以使用

```
git checkout master
git merge --squash feature 
```

但我的理解是，如果我这样做，我将失去所有的历史。

有没有另一种方法来完成我想要的，或者我只是错过了显而易见的事情？

**更新**

我希望看到的是一个编辑器，其中列出了我在功能分支中所做的提交，以便我可以选择要选择的提交和压缩的提交。我实际看到的是一个空编辑器，这让我想知道是否因为我当前的分支与我的主分支是线性的，所以不需要重新设置任何内容，因此编辑器中不会出现任何提交（尽管我想我会期望得到一个“nothing to rebase” 类型的消息，而不是上面提到的成功消息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:57:33.700

如评论中所述，问题根本不在于`git rebase -i master`命令，而在于我的编辑器，它没有处理来自 git 的输入以适当地显示可用的提交。

更改为其他编辑器解决了该问题。

# java - 将一个类的实例传递给另一个 java 文件

> ID：13803784
> 
> 赞同：0
> 
> 时间：2012-12-10T15:20:32.830
> 
> 标签：java, class, instance, instances

对不起，如果这是一个愚蠢的问题，但我有点卡在一个问题上！

基本上：如果我有 3 个“.java”文件，即“main.java”、“implement.java”和“class.java”

在 class.java 我创建了一个公共类

IE：

```
 public class Inbox {
  int Letters;
  int Bills;
  int Invoices;
  } 
```

===============================

在 implement.java 我创建了这个类的一个实例并为其分配了变量

IE：

```
Inbox IX = new Inbox;

IX.Letter = 20;
IX.Bills = 2;
IX.Invoices = 1; 
```

===============================

我如何将这些变量（IX.Letters、IX.Bills 和 IX.Invoices）传递到我的“main.java”中？

我在网上找遍了，但没有运气=(

希望可以有人帮帮我

干杯伙计们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:36:45.573

如果您使用的是 Eclipse，它可以自动生成 getter 和 setter（源代码 > 生成 getter 和 setter）它可以帮助您理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:58:16.057

这是使用 getter 和 setter 的示例：

```
public class Inbox {
    private int letters;
    private int bills;
    private int invoices;

    public int getLetters() {
        return letters;
    }

    public void setLetters(int letters) {
        this.letters = letters;
    }
}

public class Main {
    public static void main(String[] args) {
        Inbox ib = new Inbox();
        ib.setLetters(20);
        int letters = ib.getLetters();
    }
} 
```

# android - 使用 XML 文件而不是文本文件将数据加载到 SQLite 有什么好处

> ID：13803785
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:20:33.767
> 
> 标签：android, xml, sqlite

在我看来，使用 XML 处理会比按顺序从文本文件中读取数据要慢。有人可以启发我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:23:26.830

I don't know why you'd say one would be inherently faster or slower than the other.

A sequential file containing records would seem "flat" to me - one per table.

An XML file is hierarchical, which may include relationships between multiple tables. That logic would certainly mean more work to code and more CPU to execute, but it's also doing more than a simple sequential file would.

The answer, as it so often is, should be "it depends". Context is everything.

You're likely to use an XML schema that's as flat as a .csv.

XML parsers are standard stuff, so you don't have to write one. XML is self-describing - the tags are metadata. You can use schemas to validate XML. XML will be more verbose, because tags require bytes.

.csv can be handled by splitting each record at a delimiter of your choosing. You don't have tags, but you can send a header row. Validation is up to you and your parser implementation.

I'd say it's a wash.

# c# - 在 C# 中使用 excel 互操作的向后兼容性

> ID：13803786
> 
> 赞同：1
> 
> 时间：2012-12-10T15:20:35.563
> 
> 标签：c#, excel, interop, backwards-compatibility

我正在使用 excel 互操作打开一个 excel 文件，在其他位置编辑并以其他名称保存它。为此，我使用过：

```
workbook.saveAs(newFileName) 
```

但它在应用程序中提示兼容性，就像它`saving .xls`在 Office 2007 中的文件时如何提示一样。我必须在前端应用程序中单击继续才能继续。如何解决？

在此先感谢，萨拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:28:37.167

`Application.DisplayAlerts`您可以在操作`False`期间设置一个属性`SaveAs`（然后设置回`True`）。

以下是详细信息：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.displayalerts (v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.displayalerts(v=office.11).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:29:22.903

...我不确定我是否 100% 了解您所遇到的情况，但如果出现通知框，请尝试将此行放在 Save 命令之前：

```
ExcelApp.DisplayAlerts = False 
```

那应该禁止弹出警报....

# codeigniter - 如何使用 codeigniter 正确启用浏览器缓存？

> ID：13803790
> 
> 赞同：2
> 
> 时间：2012-12-10T15:20:41.150
> 
> 标签：codeigniter, caching, browser

每次我搜索时，我都会获得有关如何禁用浏览器缓存的信息。永远不要启用它。

如何让后退按钮使用缓存而不重新生成页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:51:32.800

据我所知，您可以通过以下元标记控制强制浏览器重新加载数据：

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-control" content="no-cache">
<meta http-equiv="Expires" content="0"> 
```

但你**不能**强迫它从缓存中读取。如果您没有明确指定忽略缓存，浏览器本身会为您执行此操作，并且页面数据实际上已缓存且未过期。

这不依赖于 CodeIgniter，因为它是客户端，但您可能希望使用 CI 的[html 助手](http://ellislab.com/codeigniter/user-guide/helpers/html_helper.html)中包含的 meta() 函数，该函数将简单地输出相应的元标记。例如：

```
echo meta('Cache-control', 'no-cache', 'http-equiv'); 
```

将生成上面的第二个代码行。

笔记：

1.  第一个元标记是为 http/1.0 指定的，而第二个是为 http/1.1 指定的，但两者都用于允许向后兼容。

2.  如果您使用的是 xhtml 而不是 html，请记住关闭元标记`/>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:52:34.620

浏览器缓存与 codeigniter 无关。您可以使用 html 元标记来专门指示浏览器不要缓存页面，或者您可以为单个页面设置缓存到期时间，如下所示：

```
<meta http-equiv="expires" content="Mon, 10 Dec 2001 00:00:00 GMT" /> 
```

您可以使用一些 php 将明天的日期放在那里。浏览器（取决于设置）通常会自动从缓存中提取尽可能多的内容，包括单击后退按钮时 - 后退按钮的缓存将与您从任何其他链接进入时一样工作。

您可以通过 htaccess 在 apache 服务器上使用类似以下内容设置过期标头（您必须询问如何在其他服务器类型上执行此操作），以告诉浏览器应该在给定的时间段内缓存某些类型的内容时间：

```
ExpiresByType text/html "access plus 60 seconds" 
```

这将告诉浏览器将任何 mime 类型的 text/html 存储 60 秒（这包括 codeigniter 输出）**但是**如果您处理动态内容，请不要这样做它将停止加载任何动态页面内容并将停止对您的内容进行任何更改由回访者加载（显然，对于 60 秒的缓存，第二部分不是这样的问题）。

要意识到的关键是您的页面不是一回事，它由很多部分组成，其中一些部分应该从缓存中调用（js，css，图像等）有些不应该（通常html会落入此类别）。浏览器会自动从缓存中调用您页面中缓存未过期的所有部分。

通常您会使用 .htaccess（或类似方法）来缓存您的 css、图像等（使用文件名中的版本控制在它们更改时强制重新加载）。

您还应该利用服务器端缓存 - codeigniter 对整个页面执行此操作，但我不倾向于发现这对任何类型的动态站点都非常有用，因此如果您是 ci，我会看看使用 phil sturgeons 部分缓存库对 ss 缓存感兴趣：

[https://github.com/philsturgeon/codeigniter-cache](https://github.com/philsturgeon/codeigniter-cache)

这不会停止向服务器发送请求，但意味着该请求需要较少的处理，并且可以作为一个或多个静态内容提供。

# css - Ext JS 4: Grid w/GroupingSummary: 每组打印页面

> ID：13803791
> 
> 赞同：2
> 
> 时间：2012-12-10T15:20:42.633
> 
> 标签：css, extjs, extjs4, extjs4.1

对于带有 GroupingSummary 的 Ext JS 4.1 网格，我希望能够每组打印一页。

通过在每个摘要后添加一行并将其@media 打印样式设置为 page-break-before:always，我可以在 Firefox 上获得一个可行的解决方案。但是，这不适用于 Chrome 或 Safari。据我了解，原因是 Webkit 不支持在表行上分页。我什至尝试将表格行显示样式设置为阻止以尝试强制它，但页面顶部边距搞砸了。

通过编写一个特殊的打印机脚本，我还能够获得适用于所有浏览器的工作解决方案，该脚本基本上提取网格 html，为每个组克隆网格 html，并将每个组的表格行移动到这些新的 html 网格之一。然后它获取所有 html 并将其写入覆盖现有网页屏幕的 iframe 并调用 window.print()。一件好事是列标题位于每个新组页面的顶部。

我对这个解决方案的两个主要抱怨是：（1）用户无法使用浏览器打印功能打印原始网页，即用户需要点击我的打印按钮；（2）它很hacky。

似乎最好的解决方案是用于渲染分组网格的 Ext-native 解决方案，每个网格都有自己的 html 表。有没有人有自己喜欢的解决方案？

# iphone - Theos 的 Preblem 制作 deb 文件

> ID：13803793
> 
> 赞同：0
> 
> 时间：2012-12-10T15:20:47.410
> 
> 标签：iphone, ios, ios6, theos

我是 iOS 开发的新手……我的 iPhone 3Gs 运行越狱的不受限制的 iOS 6.0.1（根据雪风，我越狱的应用程序）……我在我的 iPhone 设备上安装了 Theos，遵循这个网站[http:// sites.google.com/site/theostutorials/](http://sites.google.com/site/theostutorials/)由 ReverseEffect 编写。然后我创建了一个名为 test 的应用程序并完成了教程中描述的所有事情（遵循[http://sites.google.com/site/theostutorials/chapter-2-my -first-app/lesson-1-learning-nic](http://sites.google.com/site/theostutorials/chapter-2-my-first-app/lesson-1-learning-nic)）。我的 deb 包已成功创建并安装...但是在 Respringing 之后我没有看到任何图标..我再次编译并做了 respring 的事情但没有图标...是因为 SDK 已过时吗？如果是，那么如何抓住他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:14:58.093

您需要在教程中走得更远，最终他们会教您如何在应用程序中使用图像并最终应用图标

# c++ - pthread 互斥锁：错误 LNK2019：未解析的外部符号 C++

> ID：13803795
> 
> 赞同：2
> 
> 时间：2012-12-10T15:20:57.970
> 
> 标签：c++, locking, pthreads

我收到此链接错误，但找不到解决方案。你能不能让我找到正确的方向去寻找它？我得到：错误**LNK2019** ：未解析的**外部符号 _ *imp* _pthread_mutex_lock 在函数“私有：** bool **__thiscall** ... pthread.h" 不会改变任何东西。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-19T20:14:28.270

我使用了[sourceware.org/pthreads-win32](https://www.sourceware.org/pthreads-win32/)提供的 pthread-win32 。

我已经面临这个问题几个小时了，终于能够通过在 Visual Studio 依赖项安装文件夹中的相应文件夹中添加下载提供的“lib”、“include”和“bin”文件夹内容来修复它。

我的在

> “C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.10.25017”

然后我添加了库依赖'pthreadVC2.lib;' 在

> 项目 -> 属性 -> 链接器 -> 输入 -> 附加依赖项

瞧！pthreads 开始工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:02:11.637

该`pthread`库适用于 POSIX 系统（Linux、BSD、Mac OS）。您表示您使用的是 Windows 中的 Visual Studio - 如果您希望在 Windows 上执行多线程，请参阅[此页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684847%28v=vs.85%29.aspx)。

更好的是，如果您可以使用更新的工具，C++11 提供了[内置的线程功能](http://en.cppreference.com/w/cpp/thread)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:23:06.627

您需要添加

```
-lpthread 
```

或者

```
-lthread 
```

到您的编译器命令行（取决于操作系统和编译器）

更新：@nos 正确指出这似乎是 MS 链接器错误。您不应该在 Visual Studio 中使用 pthread。Windows 线程 API 非常不同。**

# objective-c - 如何将表格视图单元格作为参数传递并将图像仅加载到在 iOS 中单击照片按钮的相应表格视图单元格

> ID：13803802
> 
> 赞同：0
> 
> 时间：2012-12-10T15:21:18.810
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个自定义表格视图。我想将表格视图单元格作为 pramater 传递给一个函数。我正在使用 [cell.btnImages performSelector]。单击照片按钮时，它应该将图像加载到相应的表格视图单元格中。是否可能？下面是代码。单击图像按钮时。我需要将单元格作为参数传递... ![在此处输入图像描述](../Images/903ae63da7db3a1a299a95060b6e924f.png)

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"IpadTableViewCell";

IPadTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"IpadTableViewCell" owner:nil options:nil];
    for (id currentObject in topLevelObjects)
    {
        if ([currentObject isKindOfClass:[IPadTableViewCell class]])
        {
            cell = (IPadTableViewCell  *)currentObject;

        }
    }
}

  [cell.btnImages performSelector:@selector(imageButtonClicked:) onThread:nil withObject:cell waitUntilDone:nil];

return cell;
}

-(void)imageButtonClicked:(IPadTableViewCell *)tblCell
 {
// opne image select dialog
CGFloat prevButtonXPosition = 17, pageButtonXPosition, pageButtonWidth = 120, pageButtonHeight = 130;

   for (NSInteger i =1; i<= 9; i++) {
    pageButtonXPosition = prevButtonXPosition ;
    prevButtonXPosition = pageButtonXPosition + pageButtonWidth;
    UIButton *pageButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [pageButton addTarget:self action:@selector(onClickImage:) forControlEvents:UIControlEventTouchUpInside];
    [pageButton setFrame:CGRectMake(pageButtonXPosition, 5, pageButtonWidth, pageButtonHeight)];
    [pageButton setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"%i.png",i]] forState:UIControlStateNormal];
    [pageButton setTag:i];
    [cell.scrollView addSubview:pageButton];
}

UIButton *add=[UIButton buttonWithType:UIButtonTypeCustom];
[add addTarget:self action:@selector(onClickAdd:) forControlEvents:UIControlEventTouchUpInside];
[add setFrame:CGRectMake(prevButtonXPosition, 20, 80, 80)];
[add setBackgroundImage:[UIImage imageNamed:@"last.jpeg"] forState:UIControlStateNormal];
[add setTag:0];
[cell.scrollView addSubview:add];

[cell.scrollView setContentSize:CGSizeMake(prevButtonXPosition +80, 40)];
cell.selectionStyle = UITableViewCellSelectionStyleNone;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:11:36.000

您已经在 tableview 类中定义了 imageButtonClicked 方法，但您在 cell.btnImages 中调用它。您应该在 btnImages 类中实现 imageButtonClicked 方法，或者在 self 而不是 cell.btnImages 中调用它。如果 btnImages 属于 UIButton 类，您应该这样做：

```
[cell.btnImages addTarget:self action:@selector(imageButtonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

或者干脆实现 UITableViewDelegate 方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

# android - 构建 Android Sencha Touch 应用程序：“构建”目录的路径太长

> ID：13803804
> 
> 赞同：0
> 
> 时间：2012-12-10T15:21:23.380
> 
> 标签：android, windows, extjs, windows-7, sencha-touch

我尝试使用本教程为 Android 平台构建一个示例 Sencha 应用程序：[http](http://docs.sencha.com/touch/2-0/#!/guide/native_android) ://docs.sencha.com/touch/2-0/#!/guide/native_android 。

我完成了所有步骤（1、2、3），现在尝试构建一个 *.apk 文件：

```
sencha --debug package build config.json 
```

我有一个奇怪的输出，尝试访问带有重复片段“\assets\build”的极长路径：

```
C:\all\GS\build\\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\app\controller\C:\all\GS\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\app\controller\ 
```

有谁知道为什么会发生？路径开头有两个反斜杠似乎很奇怪，但我不知道为什么。

我的 config.json 是：

```
{
    /**
     * @cfg {String} applicationName
     * @required
     * This is the name of your application, which is displayed on the device when the app is installed. On IOS, this should match
     * the name of your application in the Apple Provisioning Portal.
     */
    "applicationName":"FirstApp",

    "iconName": "C:/all/GS/resources/icons/Icon.png",

    /**
     * @cfg {String} applicationId
     * This is the name namespace for your application. On IOS, this should match the name of your application in the Apple Provisioning Portal.
     */
    "applicationId":"com.ergosolo.firstApp",

    /**
     * @cfg {String} bundleSeedId
     * A ten character string which stands before aplication ID in Apple Provisioning Portal
     */
    "bundleSeedId":"KPXFEPZ6EF",

    /**
     * @cfg {String} versionString
     * @required
     * This is the version of your application.
     */
    "versionString":"1.0",

    /**
     * @cfg {Integer} versionCode
     * @required
     * This is the integer version code of your application, or you can refer to it as a build number. Used only for Android builds.
     */
    "versionCode":"1",

    /**
     * @cfg {Object} icon
     * For iOS, please refer to their documentation about icon sizes:
     * https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html
     *
     * For Android, please refer to the Google Launcher icons guide:
     * http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html
     */
    "icon": {
        "57":"resources/icons/Icon.png",
        "72":"resources/icons/Icon~ipad.png",
        "114":"resources/icons/Icon@2x.png",
        "144":"resources/icons/Icon~ipad@2x.png"
    },

    /**
     * @cfg {String} inputPath
     * @required
     * This is location of your Sencha Touch 2 application, relative to this configuration file.
     */
    "inputPath":"C:/all/GS",

    /**
     * @cfg {String} outputPath
     * @required
     * This is where the built application file with be saved. Make sure that output path is not in your input path, you may get into endless recursive copying
     */
    "outputPath":"C:/all/GS/build",

    /**
     * @cfg {String} configuration
     * @required
     * This is configuration for your application. `Debug` should always be used unless you are submitting your app to an online
     * store - in which case `Release` should be specified.
     */
    "configuration":"Debug",

    /**
     * @cfg {String} platform
     * @required
     * This is the platform where you will be running your application. Available options are:
     *  - iOSSimulator
     *  - iOS
     *  - Android
     *  - AndroidEmulator
     */
    "platform":"AndroidEmulator",

    /**
     * @cfg {String} deviceType
     * @required
     * This is device type that your application will be running on.
     *
     * If you are developing for Android, this is not necessary.
     *
     * Available options are:
     *  - iPhone
     *  - iPad
     *  - Universal
     */
    "deviceType":"Universal",

    /**
     * @cfg {String} certificatePath
     * This is the location of your certificate.
     * This is required when you are developing for Android or you are developing on Windows.
     */
    "certificatePath":"C:/all/GS/my-debug-key.keystore",

    /**
     * @cfg {String} certificateAlias
     * This is the name of your certificate.
     *
     * IF you do not specify this on OSX, we will try and automatically find the certificate for you using the applicationId.
     *
     * This can be just a simple matcher. For example, if your certificate name is "iPhone Developer: Robert Dougan (ABCDEFGHIJ)", you
     * can just put "iPhone Developer".
     *
     * When using a certificatePath on Windows, you do not need to specify this.
     */
    "certificatePassword":"",
    /**
     * @cfg {String} certificatePassword
     * The password which was specified during certificate export
     */
    "provisionProfile":"",
    /**
     * @cfg {String} provisionProfile
     * The path to the provision profile (APP_NAME.mobileprovision) which you can create and then download from Apple's provisioning portal
     */
    "sdkPath":"C:/Users/sergzach/Desktop/adt-bundle-windows-x86/adt-bundle-windows-x86/sdk",

    /**
     * @cfg {String} sdkPath
     * This is the path to the Android SDK, if you are developing an Android application.
     */

    /**
    /**
     * @cfg {String} androidAPILevel
     * This is android API level, the version of Android SDK to use, you can read more about it here: http://developer.android.com/guide/appendix/api-levels.html.
     * Be sure to install corresponding platform API in android SDK manager (android_sdk/tools/android)
     */
    "androidAPILevel":"17",

    /**
    /**
     * @cfg {Array[String]} permissions
     * Array of permissions that is used by an application (Android only) 
     * Full list of permissions for Android application can be found here: http://developer.android.com/reference/android/Manifest.permission.html#ACCESS_CHECKIN_PROPERTIES
     */
    "permissions":[
                    "INTERNET",
                    "ACCESS_NETWORK_STATE",
                    "CAMERA",
                    "VIBRATE",
                    "ACCESS_FINE_LOCATION",
                    "ACCESS_COARSE_LOCATION",
                    "CALL_PHONE"],

    /**
     * @cfg {Array[String]} orientations
     * @required
     * This is orientations that this application can run.
     */
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

在下一个调试日志的末尾，它说**文件名**或其**扩展**名太长。然后它说路径“C:\all\GS\build\assets\build\assets..”太长了。

`The full debug`（我是从俄语手动翻译的，所以它不能对应确切的英文信息）。

```
Sencha Cmd v3.0.0.250
[DBG]       using path C:\Program Files\Sencha\Cmd\3.0.0.250\stbuild;C:\Program Files\Sencha\Cmd\3.0.0.250\stbuild\bin;C:\Program Files\Sencha\Cmd\3.0.0.250;C:\all\sencha-projects;C:\Program Files\SenchaSDKTools-2.0.0-beta3\compat\scripts;C:\Program Files\SenchaSDKTools-2.0.0-beta3\compat\command;C:\Program Files\SenchaSDKTools-2.0.0-beta3\compat\jsbuilder;C:\Program Files\SenchaSDKTools-2.0.0-beta3\bin;C:\Program Files\SenchaSDKTools-2.0.0-beta3;C:\Program Files\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\TortoiseSVN\bin;C:\Program Files\PostgreSQL\8.4\bin\;C:\Python26\Scripts;C:\Python26;C:\Program Files\ImageMagick-6.6.7-Q16;C:\all\start;C:\all\trunk\www\cometd\cometd-twisted;C:\Program Files\nodejs\;C:\Users\sergzach\AppData\Roaming\npm\
[DBG]       executable located at C:\Program Files\Sencha\Cmd\3.0.0.250\stbuild\stbuild.exe
[DBG]       using workding directory .
Error: Project folder 'C:\all\GS\build' is not empty. Please consider using 'android.bat update' instead.
Updated file C:\all\GS\build\src\com\ergosolo\firstApp\STActivity.java
Updated file C:\all\GS\build\res\values\strings.xml
Updated file C:\all\GS\build\res\layout\main.xml
Updated file C:\all\GS\build\AndroidManifest.xml
Updated file C:\all\GS\build\build.xml
Updated file C:\all\GS\build\proguard-project.txt
Subfolder or file C:\all\GS\build\\assets\ already exists.
Subfolder or file C:\all\GS\build\\assets\.sencha\ already exists.
Subfolder or file C:\all\GS\build\\assets\.sencha\app\ already exists.
Subfolder or file C:\all\GS\build\\assets\.sencha\workspace\ already exists.
Subfolder or file C:\all\GS\build\\assets\app\ already exists.
Subfolder or file C:\all\GS\build\\assets\app\controller\ already exists.
Subfolder or file C:\all\GS\build\\assets\app\model\ already exists.
Subfolder or file C:\all\GS\build\\assets\app\profile\ already exists.
Subfolder or file C:\all\GS\build\\assets\app\store\ already exists.
Subfolder or file C:\all\GS\build\\assets\app\view\ already exists.
Subfolder or file C:\all\GS\build\\assets\build\ already exists.
Subfolder or file C:\all\GS\build\\assets\build\assets\ already exists.
Subfolder or file C:\all\GS\build\\assets\build\assets\.sencha\ already exists.
Subfolder or file C:\all\GS\build\\assets\build\assets\.sencha\app\ already exists.
Subfolder or file C:\all\GS\build\\assets\build\assets\.sencha\workspace\ already exists.
Subfolder or file C:\all\GS\build\\assets\build\assets\app\ already exist.
...( and so on, truncated)
The name of the file or it's extention has incorrect length..
The name of the file or it's extention has incorrect length..
The name of the file or it's extention has incorrect length..
The next path is too long: "C:\all\GS\build\\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\app\controller\C:\all\GS\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\build\assets\app\controller\".
[DBG]       exit code was : -1073741819
[DBG]       exit code was : -1073741819 
```

如果我将 outputPath 更改为 'build/' 那么它是具有极长路径的相同输出： C:/all/GS\build\assets\build\assets\build\assets... （在最后一种情况下没有双反斜杠）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:02:27.463

问题已解决。**输出 'build' 目录不应与源文件目录具有相同的根目录（dirs 'app', 'resources', 'files'）**。

# objective-c - applicationWillEnterForeground / applicationDidEnterBackground 一起工作

> ID：13803805
> 
> 赞同：0
> 
> 时间：2012-12-10T15:21:38.287
> 
> 标签：objective-c, ios, background

我的应用程序中有一个解密和加密方法。当应用程序进入后台时，文件被加密。如果应用程序进入前台，文件将被解密。这就是主要故事。这两个部分都需要一些时间和大量内存。在后台，我正在做类似的事情。

```
encryptionTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^(void) {
    // Wwe took too long. Stop task.
}]; 
```

在 applicationWillEnterForeground 中，我执行以下操作：

```
if (encryptionTaskId != UIBackgroundTaskInvalid) {
    [[UIApplication sharedApplication] endBackgroundTask:encryptionTaskId];
} 
```

我认为这很好。但我的问题是当有人在解密我的文件`home`期间单击按钮时。`applicationWillEnterForeground`再次`applicationDidEnterBackground`开始，但我的解密还没有完成。处理它的最佳方法是什么。是否也可以等到前台完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:03:58.250

您是否能够检测文件当前是否正在被访问或正在加密/解密？如果是这样，请创建一个计时器以在前一种方法停止后几秒钟内再次进行加密/解密。

更新：

请参阅[http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW28](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW28)你应该可以使用[beginBackgroundTaskWithExpirationHandler :](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler%3a) . 这将为您赢得额外的时间来在您的应用程序移至后台之前完成处理。

更新 2：

确保`encryptionTaskId`是一个实例变量

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
{
    encryptionTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        [[UIApplication sharedApplication] endBackgroundTask:bgTask]; 
        encryptionTaskId = UIBackgroundTaskInvalid;
    }];

    [[UIApplication sharedApplication] endBackgroundTask:bgTask]; 
    encryptionTaskId = UIBackgroundTaskInvalid;
} 
```

然后，`applicationDidEnterForeground`您将要检查是否`encryptionTaskId`仍在工作，如果是，请创建一个计时器以稍后再试以对其进行解码。

# excel - 从excel中的列中删除重复项

> ID：13803810
> 
> 赞同：1
> 
> 时间：2012-12-10T15:21:56.003
> 
> 标签：excel, duplicate-removal

我在excel中有一个如下所示的数字列表。有些数字是重复的。如何仅检索列表中没有重复的数字 - 换句话说，使重复的​​数字消失..

所以如果我有

100
200
100
300
600
300

我只想留下

200
600

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:31:07.223

使用一个非常简单的数据透视表将向您显示不同的项目（以及每个项目的数量，如果您需要该信息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:11:36.157

**使用 Excel 菜单：**选择数据区域，功能区数据选项卡 >> 删除重复项

**使用公式：**在数据位于 A2:A7 的单元格 B2 中使用以下公式。它是一个数组公式，因此当您输入时按 CTRL SHIFT ENTER。然后向下拖动，它只会显示唯一的记录。

```
=INDEX($A$2:$A$7,MATCH(0,COUNTIF($B$1:B1,$A$2:$A$7),0)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T17:28:01.560

这有点混乱，但它可能会完成您想要的（仅返回出现一次的项目并忽略其他所有内容）。`IFERROR`是一个 Excel 2007+ 解决方案 - 您可以将它包装起来`IF(ISERROR(...`以使用 Excel <2007，尽管它会更冗长:)。输入为数组公式 ( `Ctrl`+ `Shift`+ `Enter`)：

```
=IFERROR(
INDEX(
    $A$1:$A$6,
    SMALL(IF(COUNTIF(A:A,$A$1:$A$6)=1,ROW($A$1:$A$6),"NULL"),ROW()),
1),"") 
```

这`COUNTIF`将查找计数等于 1 的所有数字（重复项将是 2+）并返回一个看起来像 的数组`{"NULL";2;"NULL";"NULL";5;"NULL"}`。然后该`SMALL`公式用于查找第 k 个最小的参数，`k`在这种情况下将是当前行（所以在第一行，1（最小），第二行，2（第二小）等）。数组中的任何数字都表示只有一个匹配项的值的行数，因此我们将其`INDEX`作为行参数放在公式中，列设置为 1。然后您可以将其拖到整个列中。

![在此处输入图像描述](../Images/dd6683d9a4301cef2bdebbd07bf04841.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T15:23:58.000

在数据菜单上，指向筛选器，然后单击高级筛选器。在“高级过滤器”对话框中，单击“过滤列表”。选中唯一记录复选框，然后单击确定。

# sql - SQL：触发器语法

> ID：13803812
> 
> 赞同：0
> 
> 时间：2012-12-10T15:22:06.223
> 
> 标签：sql, oracle, triggers

我正在做一些课程，我应该创建一个触发器，在创建订单之前检查库存水平，以查看库存中是否有足够的产品来满足订单。问题是讲师没有正确地教我们创建触发器的语法，我的问题是我不知道如何告诉触发器我正在检查的库存表中的哪一行/列。我需要加入表格吗？

这是我到目前为止的代码（我只是在这里提出，它并没有真正起作用，但我把它放在这里是为了让您了解我想要实现的目标）：

```
CREATE OR REPLACE TRIGGER stock_check
BEFORE INSERT OR UPDATE OF product_quantity ON orderline
FOR EACH ROW
DECLARE
Newtotal number;
insufficient_stock exception;
BEGIN
IF(:NEW.product_quantity > product_stock.stock_quantity) then
raise insufficient_stock;
Else
:new.product_stock.stock_quantity - product_quantity = newtotal
Update stock_quantity
Set product_quantity = newtotal

END IF;
exception
when insufficient_stock then
raise_application_error(-20604,'There is not enoguh stock available');
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:55:22.407

例如：

```
SQL> create table product_stock (prod_id number, stock_quantity number);

Table created.

SQL> create table orderline (prod_id number, product_quantity number);

Table created.

SQL> insert into product_stock values (1, 1002);

1 row created.

SQL>
SQL> CREATE OR REPLACE TRIGGER stock_check
  2  BEFORE INSERT OR UPDATE OF product_quantity ON orderline
  3  FOR EACH ROW
  4  DECLARE
  5    v_stock_quantity product_stock.prod_id%type;
  6    v_Newtotal number;
  7    insufficient_stock exception;
  8  BEGIN
  9    if updating
 10     then
 11       v_Newtotal := :new.product_quantity - :old.product_quantity;
 12     else
 13             v_Newtotal := :new.product_quantity;
 14     end if;
 15
 16      Update product_stock
 17      Set stock_quantity = stock_quantity - v_Newtotal
 18             where prod_id = :new.prod_id
 19             returning stock_quantity into v_stock_quantity;
 20
 21    IF (v_stock_quantity < 0)
 22    then
 23      raise insufficient_stock;
 24    END IF;
 25  exception
 26    when insufficient_stock then
 27      raise_application_error(-20604,'There is not enoguh stock available');
 28  END;
 29  /

Trigger created.

SQL> show errors
No errors.
SQL> select * from product_stock;

   PROD_ID STOCK_QUANTITY
---------- --------------
         1           1002

SQL> insert into orderline values (1, 1000);

1 row created.

SQL> select * from product_stock;

   PROD_ID STOCK_QUANTITY
---------- --------------
         1              2

SQL> insert into orderline values (1, 3);
insert into orderline values (1, 3)
            *
ERROR at line 1:
ORA-20604: There is not enough stock available
ORA-06512: at "DTD_TRADE.STOCK_CHECK", line 17
ORA-04088: error during execution of trigger 'DTD_TRADE.STOCK_CHECK'

SQL> select * from product_stock;

   PROD_ID STOCK_QUANTITY
---------- --------------
         1              2 
```

更新首先完成以故意创建锁定（好像两个会话同时进行此调用，您希望第二个会话阻止以避免库存低于 0）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:48:42.587

我想您需要以下内容：

```
CREATE OR REPLACE TRIGGER stock_check
  BEFORE INSERT ON orderline
  FOR EACH ROW
DECLARE
  oldtotal NUMBER
  newtotal NUMBER;
  insufficient_stock EXCEPTION;
BEGIN
  SELECT stock_quantity INTO old_total
    FROM product_stock
   WHERE product_id = :new.product_id:

  IF(:new.product_quantity > oldtotal) then
     RAISE insufficient_stock;
  ELSE 
    newtotal := oldtotal - :new.product_quantity;        
    UPDATE stock_quantity
       SET product_quantity = newtotal
     WHERE product_id = :new.product_id;
  END IF;
EXCEPTION
  WHEN insufficient_stock THEN
    RAISE_APPLICATION_ERROR(-20604,'There is not enoguh stock available');
END; 
```

您仍然需要为某种 product_id 添加一列。我没有处理这个`UPDATE`案子...

# php - 时区转换，我该如何做到最好和正确

> ID：13803813
> 
> 赞同：1
> 
> 时间：2012-12-10T15:22:07.017
> 
> 标签：php, timezone

所以我有以下

*   有时间和时区的比赛，这可能与每场比赛不同
*   具有时区的用户

现在我想要什么？

我想在他的时区显示用户的时间，所以如果比赛是在 GMT+0（欧洲/伦敦）的 12:00，那么我希望它显示为欧洲/阿姆斯特丹的 13:00。

我不知道该怎么做，请帮帮我；）

编辑对不起，我使用 PHP

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:30:16.677

您可以使用 PHP 的[DateTime](http://php.net/datetime)类，它在处理日期/时间和时区方面做得非常出色。这是您想要的示例。

```
/* Create a DateTime object using Europe/London Timezone */
$date = new DateTime("2012-12-10 12:00", new DateTimeZone("Europe/London"));
echo $date->format('r'); // Mon, 10 Dec 2012 12:00:00 +0000

/* Change the timezone to Europe/Amsterdam and output the new formatted date/time */
$date->setTimezone(new DateTimeZone("Europe/Amsterdam"));
echo $date->format('r'); // Mon, 10 Dec 2012 13:00:00 +0100 
```

# c# - ServiceStack 和服务器上的异步/等待支持？

> ID：13803816
> 
> 赞同：2
> 
> 时间：2012-12-10T15:22:30.917
> 
> 标签：c#, servicestack, async-await

是否可以在 ServiceStack 的服务器方法上利用 async/await？谷歌搜索带来了[ServiceStack 的一个分支，](https://github.com/ServiceStack/ServiceStack/tree/async)它似乎可以解决问题，但它已经几个月没有更新了，并且没有信息是否该代码已合并到当前的官方版本（v3.9.32）中。

我使用 async / await 模式构建了一个简单的服务，它的行为不正确，但我想知道这是否只是一个配置问题。这是代码：

```
public class PodcastService : Service
{
    public async Task<object> Get(Podcast request)
    {
        var client = new WebClient();
        var data = await client.DownloadStringTaskAsync("http://www.google.fi");

        return new PodcastResponse() { Date = DateTime.Now };
    }
} 
```

这是该方法返回的 JSON：

```
{"Result":{"__type":"WebApplication2.PodcastResponse, WebApplication2","Date":"2012-12-10T17:18:32.1653985+02:00"},"Id":1,"Status":"RanToCompletion","IsCanceled":false,"IsCompleted":true,"CreationOptions":0,"IsFaulted":false} 
```

为了比较，这是没有任何 async/await 的相同方法：

```
public class PodcastService : Service
{
    public object Get(Podcast request)
    {
        return new PodcastResponse() { Date = DateTime.Now };
    }
} 
```

结果如下：

```
{"Date":"2012-12-10T17:20:23.0245677+02:00"} 
```

有任何想法吗？叉子仍然是要走的路还是异步/等待已经在 ServiceStack 中实现但需要一些配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:45:15.260

[您可以在此处](https://trello.com/board/servicestack-features-bugs/4e9fbbc91065f8e9c805641c)查看项目状态。异步分支仍处于“执行”阶段。

第一个结果看起来像一个序列化的 Task 对象，所以他们肯定还没有添加异步服务支持。

**更新**

[随着 ServiceStack 的商业化](https://plus.google.com/+DemisBellot/posts/g8TcZaE7bv9)和对 v4 的重大重写，我们可以忘记 async/await 分支。最新的可用版本 v3.9.62 是一个[功能冻结版本](https://github.com/ServiceStack/ServiceStack/wiki/Release-Notes)，因为开发切换到 v4。

# php - 自定义价目表的 Paypal 动态下拉列表

> ID：13803817
> 
> 赞同：2
> 
> 时间：2012-12-10T15:22:34.923
> 
> 标签：php, paypal

我尝试了很多，但无法想出解决方案。我有一些自定义价格存储在我的数据库中，并且想要检索它们，以便它们可以包含在贝宝下拉列表中。我在数据库中的价目表不断变化。所以贝宝提供给我们的代码对我来说不是很好。可能的解决方案是什么？

我正在使用贝宝提供的此代码。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

<input type="hidden" name="cmd" value="_s-xclick">

<input type="hidden" name="hosted_button_id" value="8E58CWWNZP3PU">

<table>

<tr><td><input type="hidden" name="on0" value="Card Worth">Select Wash Card Value:</td></tr><tr><td><select name="os0">

            <option value="Card 1">$10.00 USD</option>

            <option value="Card 2">$25.00 USD</option>

            <option value="Card 3">$50.00 USD</option>

            <option value="Card 4">$100.00 USD</option>

            <option value="Card 5">$200.00 USD</option>

            <option value="Card 6">$300.00 USD</option>

            <option value="Card 7">$400.00 USD</option>

            <option value="Card 8">$500.00 USD</option>

<option value="Card 9">$1500.00 USD</option>

</select> </td></tr>

</table>

<input type="hidden" name="currency_code" value="USD">

<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit"

alt="PayPal - The safer, easier way to pay online!">

<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">

</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:31:54.643

这是一个示例动态下拉列表

首先，您需要一个函数来从数据库中检索内容

```
public function retrieve_all_accounts() {  /*open bracket retrieve_all_accounts*/

    $accounts_query = "SELECT ba.BankAccountID, bat.BankAccountType FROM BankAccount ba INNER JOIN
    BankAccountType bat ON ba.BankAccoutTypeID = bat.BankAccountTypeID WHERE UserID = " . $this->memberid;
        $result = mysqli_query($this->connection, $accounts_query);

        return $result; 
```

然后你必须创建从数据库结果中创建一个数组

```
$accounts = retrieve_all_accounts(); 
```

然后这里是动态下拉。

```
 <label for="deposit_account">Account</label>
            <select id="deposit_account" name="account">
                <option value="0">--SELECT ACCOUNT--</option>
                <?
                    while($account = mysqli_fetch_assoc($accounts)) {
                        echo '<option class ="deposit_accounts" value="'. $account['BankAccountID'] . '">' . 
                        $account['BankAccountType'] . ' #' . $account['BankAccountID'] . '</option>' . "\n";
                    }
                ?>

            </select> 
```

# visual-studio-2012 - 发布 MVC 4 应用程序异常..，指定的路径、文件名或两者都太长

> ID：13803822
> 
> 赞同：3
> 
> 时间：2012-12-10T15:22:48.763
> 
> 标签：visual-studio-2012, publish-subscribe

我正在尝试使用文件系统方法发布网站。我在 Visual Studio 2010 中使用了这种方法，并没有遇到很多问题。但是我在 Visual Studio 2012 中尝试时收到了上述错误。完整的错误如下...

```
Error : Copying file Service References\ACOServiceReference\FocusedReadMissionsRedux.ACOServiceReference.searchPatientbyDemographicsResponse.datasource to obj\Release\Package\PackageTmp\Service References\ACOServiceReference\FocusedReadMissionsRedux.ACOServiceReference.searchPatientbyDemographicsResponse.datasource failed. The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters. 
```

我错过了什么或做错了什么？显然文件路径太长了，但是有没有办法可以创建类似路径变量或缩短路径名的东西？我该如何设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T15:33:53.973

不，您不能缩短它，因为 Windows 将使用完全限定名称 (C:\aaa\aaa...)。

两种解决方案：

1.  缩短命名空间 ( `FocusedReadMissionsRedux.ACOServiceReference.searchPatientbyDemographicsResponse.datasource`)
2.  更改项目的位置（即 D:\Code\ProjectOne）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-20T17:04:26.360

通过导航到服务引用下的文件，然后在 Reference.svcmap 下，我能够在我的项目中解决这个问题。选择其中的每一个并将构建操作从 Content 更改为 none。应用程序通常不需要这些文件，因此不需要发布它们。

# java - 在 WAR 应用程序中显示图像

> ID：13803825
> 
> 赞同：0
> 
> 时间：2012-12-10T15:22:54.317
> 
> 标签：java, image, jsp, struts, war

我在一个 Struts 应用程序中工作，我需要在 JSP 中显示一个包含在 WAR 内容之外的图像。

该应用程序从以下位置运行：

```
/servicios/was7/watt/instalado/app.WAR 
```

并且图像被放置在：

```
/servicios/was7/watt/compartido/plantillas_prmifid/T_ES_MIFID_26052008.jpg 
```

我不知道如何通过标签的属性访问所需的路径`src`。`<img>`如何形成图像的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:18:38.797

JSR 315：您可以从 Web 应用程序的上下文中的 /META-INF/resources 加载资源。

这仅适用于 3.0 版的 web-xml。

你看：没有必要把资源放在战争之外。

# gwt - GWT module is missing

> ID：13803830
> 
> 赞同：1
> 
> 时间：2012-12-10T15:23:09.870
> 
> 标签：gwt, intellij-idea

I got several GWT facets in my projects. They are getting detected and I can see them in "Project Structure"/"Project Settings"/"Facets" menu. However when I try to setup "Run/Debug Configuration" for GWT, I cannot see any GWT module in drop-down list for my project. The drop-down list is enabled, but the only value I see there is "All". Tried almost everything I could think of, but no luck.

Has anyone seen anything like this? Any help is appreciated.

P.S. Intellij IDEA 11.0.2\.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:16:08.413

请检查在运行配置的“模块”组合框中选择的 IDEA 模块的源根目录下是否有 GWT 模块（*.gwt.xml 文件）。模块的源代码根显示在项目结构对话框中（文件 | 项目结构 | 模块 | 节点 | 'Sources' 选项卡）。

# objective-c - How to change the [more] button text color in UITabBar?

> ID：13803831
> 
> 赞同：2
> 
> 时间：2012-12-10T15:23:10.710
> 
> 标签：objective-c, uitabbar, uitabbaritem

I follow this [answer](https://stackoverflow.com/questions/8412010/how-to-change-the-color-of-text-in-uitabbaritem-in-ios-5/8412083#8412083) change the bar items text color to white,but I have 6 tabbar items,I can't get the system button [more] item and change the text color.

How to change this [more] button text color to white? thx.

![look the more button](../Images/da8818a8df5017a53e4d6b2d283c7a3d.png)

my code:

```
for (UITabBarItem* item in self.tabBar.items)
{
    NSLog(@"title:%@",item.title); // only get my items
    [item setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                  [UIFont fontWithName:@"AmericanTypewriter" size:11.0f], UITextAttributeFont,
                                  [UIColor whiteColor], UITextAttributeTextColor,
                                  [UIColor clearColor], UITextAttributeTextShadowColor,
                                  [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                  nil] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:36:39.173

你试过这个吗，它对我有用：

```
[[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                             [UIFont fontWithName:@"AmericanTypewriter" size:20.0f], UITextAttributeFont,
                                             [UIColor yellowColor], UITextAttributeTextColor,
                                             [UIColor redColor], UITextAttributeTextShadowColor,
                                             [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                             nil] forState:UIControlStateNormal]; 
```

或者用 [UITabBarItem 外观] 替换 self.myTabBar

# android - Map API v2 Authorisation Failure

> ID：13803833
> 
> 赞同：14
> 
> 时间：2012-12-10T15:23:16.863
> 
> 标签：android, android-maps, google-maps-api-2

Alright, here is what I did using the [example](https://developers.google.com/maps/documentation/android/start)

1.  Got the debug key via keytool (made sure it is the the debug key is used by eclipse in Preferences -> Android -> Build)
2.  Generated the key by the command

    $ keytool -list -v -keystore debug.keystore -alias androiddebugkey -storepass android -keypass android

3.  Copy pasted the SHA1 sum in the Google API Console + my packagename:

    sum;com.my.package

4.  Enabled Google Map API v2 in the same project in Google API Console

5.  Copied it to the Manifest application in meta-data.

6.  Downloaded via SDK manager and Imported the google-play-services_lib project and referenced it as the library project. As well as the ActionBarSherlock.

7.  Before launching I make sure the GooglePlayServices are available.

Manifest:

```
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<permission
    android:name="com.my.package.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>

<uses-permission android:name="com.my.package.permission.MAPS_RECEIVE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

Application:

```
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="debug_key"/> 
```

The proguard stuff are added too, but I don't obfuscate right now.

DrugstoresMapActivity extends SherlockFragmentActivity

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <fragment
        android:id="@+id/map_fragment"
        class="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

</RelativeLayout> 
```

project.properties

```
target=android-17
android.library.reference.1=../google-play-services_lib
android.library.reference.2=../ActionBarSherlock 
```

The ActionBarSherlock has android-support-v4 in libs, not the main project if that matters.

The StartupActivity makes sure that DrugstoresMapActivity will be launched only if the services available

```
private void attempt() {
    int result = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

    switch (result) {
        case ConnectionResult.SUCCESS:
            startActivity(new Intent(this, DrugstoresMapActivity.class));
            finish();
            break;

        default:
            GooglePlayServicesUtil.getErrorDialog(result, this, REQUEST_DIALOG)
                .show();
            break;
    }
} 
```

Double-checked the keys are fine. No clue what I missed here.

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-10T17:17:30.737

启用了错误的服务。确保启用“Google Maps Android API v2”而不是“Google Maps API v2”并重新生成 API 密钥。

# javascript - Detecting if a device is able to change orientation in JavaScript

> ID：13803838
> 
> 赞同：7
> 
> 时间：2012-12-10T15:23:33.590
> 
> 标签：javascript, jquery, orientation, device-orientation, orientation-changes

Is there a native JavaScript (or through the use of a library such as JQuery/Modernizr etc) way to detect if a device is capable of changing orientation? I would like to use that as a method to differentiate between desktop and mobile.

Thanks,

Shadi

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T16:47:35.270

**检测移动设备：**

1.  简单的浏览器嗅探

    ```
    if (/mobile/i.test(navigator.userAgent)) {...} 
    ```

2.  [jQuery.browser.mobile](http://detectmobilebrowser.com/)插件（详尽的浏览器嗅探）

3.  触摸事件的简单测试

    ```
    if ('ontouchstart' in window) {...} 
    ```

4.  触摸事件的高级测试：

    ```
    if (('ontouchstart' in window) ||     // Advanced test for touch events
       (window.DocumentTouch && document instanceof DocumentTouch) ||
       ((hash['touch'] && hash['touch'].offsetTop) === 9)) {...} 
    ```

* * *

可选择`onorientationchange`用于上面的#3 和#4。

根据需要组合其中的一种或多种（以及任何其他方法）。它们都不是万无一失的。

# asp.net - 在 Asp.Net 中使用 Office365 SMTP 时出错

> ID：13803839
> 
> 赞同：9
> 
> 时间：2012-12-10T15:23:34.887
> 
> 标签：asp.net, smtp, office365, smtp-auth

我正在使用 Office365 Web 应用程序 SMTP 从 Asp.Net 发送电子邮件，但它总是抛出以下错误！

System.Net.Mail.SmtpException：SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.7.1 客户端未在 System.Net.Mail.MailCommand.CheckResponse 进行身份验证

下面给出了 web.config - 更改了用户名和密码

```
<network enableSsl="true"  host="pod51007.outlook.com" userName="XXXX" password="XXXXX" port="587" defaultCredentials="false" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-16T19:04:10.060

我有同样的问题并解决了：

```
Dim client As SmtpClient = New SmtpClient()
client.Credentials = New System.Net.NetworkCredential("your user", "your password")
client.Port = 587 
client.Host = "smtp.office365.com" 
```

这条指令很重要，没有它们是行不通的：

```
client.UseDefaultCredentials = False
client.DeliveryMethod = SmtpDeliveryMethod.Network
client.EnableSsl = True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:48:15.683

我认为错误消息具有误导性（与大多数 Microsoft 错误一样！） - 错误代码看起来与 SMTP 错误非常相似，而 5.7.1 是中继错误。您可能需要使用 Microsoft 提供的管理门户指定您的开发/生产**公共IP 地址。**

# binary - dividing by two in binary numbers

> ID：13803841
> 
> 赞同：0
> 
> 时间：2012-12-10T15:23:42.430
> 
> 标签：binary, divide

how can I divide a binary number (in 2 complement) by 2 .
I've tried bit shifting but I have a problem with negative odd numbers, how can I solve it? for example :

```
(-7/2) 11001/2 => (shifts the number one place to the right) => 11100 (-4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:44:38.880

Can you use after the . ? Like this?

```
 1 0011 . 1000
Part    1 2    3 4 
```

Part 1: Negative number
Part 2: Makes 3
Part 3: Separate by .
part 4: Makes 0.5

The negative part works like:

.1000 = 0.5
.0100 = 0.25
.1100 = 0.75
.0010 = 0.125

So instead of multiply by 2 to shift to left. You can do a divide by 2 to the right. So after the dot /2 and before the dot x2.

Hope you can use this information.

# scala - What is the best way to manage mutable state?

> ID：13803843
> 
> 赞同：5
> 
> 时间：2012-12-10T15:23:52.417
> 
> 标签：scala

I just finished Martin Odersky's scala class at Coursera. Scala being my first FP language, I was excited by the idea of limiting mutable state. This allows for much easier concurrency and also makes the code super maintainable.

While learning all this, I realized you could guarantee the mutability of an object as long as it had no mutable variables and only referenced immutable objects. So now I can do everything by creating a new state instead of modifying an old one, use tail recursion when possible.

Great. So I can only do this so far up the chain. At some point, my application needs to be able to modify some existing state. I know where put in concurrency control at this point, locks, blah blah. I'm still defaulting to my standard multi-threaded concurrency control I've always used.

Oh scala community, is there a better way? Monads maybe?

EDIT: this question is a bit general, so I wanted to give a use case: I have a machine learning algorithm that stores several collections of data. They have functions that return updated representations of the data (training, etc), all immutable. Ultimately I can keep this return-updated-state pattern going up the chain to the actual object running the simulation. This has a state that is mutable and holds references to the collections. I may want to distributed to multi-cores, or multi-system.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:17:15.300

这是一个有点主观的问题，所以我不会试图回答其中的“哪个是最好的”部分。如果您主要关心的是*多线程并发*上下文中的状态，那么一种选择可能是[软件事务内存](http://en.wikipedia.org/wiki/Software_transactional_memory)。

[Akka](http://doc.akka.io/docs/akka/2.0.2/scala/stm.html)提供了 STM的[实现](http://nbronson.github.com/scala-stm/) *（参见快速入门）*。根据您的用例，它可能是重量级的或矫枉过正的，但话又说回来，它可能比一堆锁更可取。与锁不同，STM 倾向于*乐观*，就像数据库事务一样。与数据库事务一样，您在事务上下文中显式更改共享状态，并且您描述的更改将自动提交或在检测到冲突时重新尝试。基本上，您必须将所有状态包装在*Refs*中，这些状态只能在“原子”块中进行操作 - 实现为采用闭包的方法，您可以在其中使用操作您的**`Ref`s 和 ScalaSTM 确保对您的状态的整套操作成功或失败 - 不会有中途或不一致的更改。**

 **这利用了 Scala 的*隐式参数*- 对 s 的所有操作都`Ref`需要一个*事务*对象作为参数，这由给定的闭包接收`atomic`并且可以声明为隐式，因此 will 中的所有代码`atomic`都可以以非常自然但安全的风格编写。

要注意的是，要使此功能有用，您确实需要使用*提供的事务数据结构*；所以这将意味着使用`TSet`而不是`Set`，`TMap`而不是`Map`。*当在事务上下文（在原子*块内）中使用时，它们提供全有或全无的更新语义。这很像*clojure 的持久化集合*。您还可以`Ref`使用 s 构建您自己的事务数据结构，以便在这些`atomic`块中使用。

如果你不反感括号的话，clojure 对 refs 的解释真的很好：[http ://clojure.org/refs](http://clojure.org/refs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:44:09.020

Depending on your use case you might be able to stick with deeply immutable object structures which you partially copy instead of actually mutating them (similar to an "updated" immutable list that shares a suffix with its original list). So-called *lenses* are a nice way of dealing with such structures, read about them in [this SO question](https://stackoverflow.com/questions/3900307/cleaner-way-to-update-nested-structures) or in [this blog post](https://blog.stackmob.com/2012/02/an-introduction-to-lenses-in-scalaz/).

Sticking with immutable structures of course only works if you don't want changes to be globally observable. An example where immutable structures are most likely not an option are two concurrent clients working on a shared list, where the modifications done by client A must be observable by client B, and vice versa.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T15:18:25.073

我建议最好的方法是将可变变量存储在 Akka Actor 中，使用传入和传出 Akka Actor 的消息来发送和接收这个可变引用。使用不可变的数据结构。

我有一个 StorageActor 如下。每次通过 StoreEntity 存储某些内容时，都会更新变量 entityMap。此外，它不需要易变并且仍然有效。

Akka actor 是可以改变事物的地方，消息在纯函数世界中传入和传出。

```
import akka.actor.Actor
import java.util.UUID
import com.orsa.minutesheet.entity.Entity

case class EntityRef(entity: Option[Entity])

case class FindEntity(uuid: UUID)
case class StoreEntity[T >: Entity](uuid: UUID, entity: Option[T])

class StorageActor extends Actor {

  private var entityMap = Map[UUID, Entity]()

  private def findEntityByUUID(uuid:UUID): Option[Entity] = entityMap.get(uuid)

  def receive = {
    case FindEntity(uuid) => sender ! EntityRef( findEntityByUUID(uuid) )
    case StoreEntity(uuid, entity) =>
      entity match {
        case Some(store) => entityMap += uuid -> store.asInstanceOf[Entity]
        case None => entityMap -= uuid
      }
  }
} 
```**

# jquery - 从另一个页面链接到 iFrame 中的特定页面

> ID：13803844
> 
> 赞同：0
> 
> 时间：2012-12-10T15:23:55.210
> 
> 标签：jquery, iframe

我想从我的主页链接到 iframe 中的特定页面。例如，在我的主页上，我想宣传我们公司的职位空缺。工作申请流程由第三方公司控制，我们目前只在他们的申请系统中使用 iFrame。

我想在我们的主页上宣传这个职位空缺，并直接链接到 iframe 中的职位描述，绕过应用程序系统的前几页。

是否可以使用 jQuery 来做到这一点？

*编辑*

请注意 iFrame 不在我的主页上，而是在单独的 careers.html 页面上。所以我想从我的主页 (index.html) 链接到 careers.html，然后在 iFrame 中获取特定页面。

问候，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:52:26.213

我假设 iframe 已经在您的页面上？

让链接运行此代码：

```
$('iframe#foo').attr('src','http://www.the-url.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:44:32.997

试试这个

index.html 有一个指向 careers.html 的链接。careers.html 上有一个 I 框架。所以你想设置 iframe 目标。也。

所以你在主页上的链接需要看起来像：

```
<a href="careers.html?iframe_targ=page_for_iframe.html">Click here</a> 
```

careers.html 需要有

```
function getParameterByName(name) {
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
  } 
```

以上代码改编自[How can I get query string values in JavaScript?](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

```
$('iframe#foo').attr('src', getParameter("iframe_targ")); 
```

# mysql - How to get hibernate to store a date?

> ID：13803848
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:24:03.133
> 
> 标签：mysql, sql, spring, hibernate

I have a Spring / Hibernate project and I am trying to store a date into the database but it's not working. It must be something stupid but I have no idea what I am doing wrong.

Here is my code:

```
user.setFailedPasswordAnswerAttemptCount(0);
user.setLastLoginDate(new Date());
user.setIsOnline(true); 
```

The other two variables (failedPasswordAnswerAttemptCount and isOnline) are getting written to the database without issue. I have also tried it with just passing a java.util.Date instead of a java.sql.Timestamp...same result. Here is how the property is defined on the user object:

```
private Date lastLoginDate;

@Temporal(TemporalType.TIMESTAMP)
@Column(name="last_login_date")
public Date getLastLoginDate() {
    return this.lastLoginDate;
}

public void setLastLoginDate(Date lastLoginDate) {
    this.lastLoginDate = lastLoginDate;
} 
```

Here is the column definition:

```
`last_login_date` datetime DEFAULT NULL 
```

Any help? I don't even know what else to look for as this should be working.

Some more detail about the error: No errors or strange messages in the hibernate log. The hibernate log is showing a parameterized query but it isn't telling me what it is actually writing. It looks like it's not updating the column at all. In other words, if there is already a date there it doesn't change, or if it is null it doesn't change.

Update: I have looked at the logs and it looks like hibernate does write the proper data, but then immediately writes the incorrect data again. I see the following entry in the log:

```
11:15:12.280 [http-bio-8080-exec-26] TRACE o.h.e.def.AbstractSaveEventListener - detached instance of: com.hi.model.User
11:15:12.280 [http-bio-8080-exec-26] TRACE o.h.e.def.DefaultMergeEventListener - merging detached instance 
```

And right after that I see it putting the old value back in for the lastLoginDate.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:54:45.237

你为什么使用

```
Date date = new Date();
user.setLastLoginDate(new Timestamp(date.getTime())); 
```

而不仅仅是这个？

```
user.setLastLoginDate(new Date()); 
```

首先 - 您可能不想同时使用 Date 和 Timestamp。（例如，用于集合等）

> Java 平台库中有一些类确实扩展了可实例化的类并添加了值组件。例如，java.sql.Timestamp 扩展了 java.util.Date 并添加了一个纳秒字段。Timestamp 的 equals 实现确实违反了对称性，如果 Timestamp 和 Date 对象在同一个集合中使用或以其他方式混合使用，则可能导致不稳定的行为。Timestamp 类有一个免责声明，警告程序员不要混合日期和时间戳。虽然只要将它们分开就不会遇到麻烦，但没有什么可以阻止您混合它们，并且由此产生的错误可能难以调试。Timestamp 类的这种行为是错误的，不应被模仿。（布洛赫，有效的 Java，第 2 版。）

第二 - 我检查了你的例子，它在 mysql-connector(5.1.21) / hibernate (4.0.1) 上运行良好

我用 arquillian 集成测试准备了简单的测试项目（你需要在运行之前准备好 jboss）： [https ://github.com/rchukh/StackOverflowTests/tree/master/13803848](https://github.com/rchukh/StackOverflowTests/tree/master/13803848)

如果您可以提供更多信息，它可能会有所帮助 - hibernate 版本、mysql 版本、mysql 引擎（MyISAM、InnoDB 等）否则这可能只是一个错误配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:06:12.043

我发现了问题。我正在重构一些代码，看起来我正在这样做：

```
//get user object
User user = getUser();
//call a function which modifies user
functionModifiesUser();
//modify user
user.blah = blah;
entityManager.merge(user); 
```

所以当我试图保存它时，父函数有一个用户对象的旧副本。实际上，删除合并语句就足以修复它。但是我已经重构了代码以将所有这些都放在一个地方。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T16:40:06.370

将列设置`last_login_date`为`timestamp`应该工作，至少对我有用。

# git - How to diff committed changes in difftool?

> ID：13803849
> 
> 赞同：1
> 
> 时间：2012-12-10T15:24:08.323
> 
> 标签：git

My diff tool works for my local change such as `git difftool -x mytool.exe`, how could I use the same diff tool for committed change? I tried `git show`, `git log`, but cannot find such option.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:59:35.890

我经常使用这个命令来查看最近提交引入的图形差异：

```
 git difftool HEAD~ 
```

（这假设没有进行本地更改。如果是，您将看到此差异中的本地更改加起来）。

您还可以指定任何特定的提交或分支，例如

```
 git difftool abc123~..abc123 
```

# android - 适用于 Android 的条码/二维码阅读器

> ID：13803852
> 
> 赞同：7
> 
> 时间：2012-12-10T15:24:21.057
> 
> 标签：android, barcode, qr-code

我想在我的应用程序中实现一个 QR 码/条形码阅读器。我想知道什么是最轻量级的解决方案（不考虑 zxing 的意图集成器）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T15:31:55.237

我使用 zxing 构建到我的应用程序中。您将需要一些编码。首先在你的构建路径中包含 core.jar，它位于 core/core.jar，然后转到他们的客户端，它位于 android/..../com.google.zxing，并获取他们的代码（这是不推荐的开发人员，因为您的复制和粘贴。）最后，添加以下代码：

```
 package com.wtsang02.activities;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.BinaryBitmap;
import com.google.zxing.ChecksumException;
import com.google.zxing.FormatException;
import com.google.zxing.LuminanceSource;
import com.google.zxing.MultiFormatReader;
import com.google.zxing.NotFoundException;
import com.google.zxing.Reader;
import com.google.zxing.Result;
import com.google.zxing.ResultPoint;
import com.google.zxing.common.HybridBinarizer;

public class QRDecoder extends Activity implements OnClickListener {

    private String text;
    private Button webbutton;
    private Bitmap bmp;
    private ImageView ivPicture;
    private TextView textv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mysales);
        webbutton = (Button)findViewById(R.id.webbutton);

        ivPicture = (ImageView) findViewById(R.id.ivPicture);
        textv= (TextView) findViewById(R.id.mytext);

        webbutton.setOnClickListener(this);
    }

    private void decode() {

        if (bmp == null) {
            Log.i("tag", "wtf");
        }
        bmp = bmp.copy(Bitmap.Config.ARGB_8888, true);

        int[] intArray = new int[bmp.getWidth() * bmp.getHeight()];
        bmp.getPixels(intArray, 0, bmp.getWidth(), 0, 0, bmp.getWidth(),
                bmp.getHeight());

        LuminanceSource source = new com.google.zxing.RGBLuminanceSource(
                bmp.getWidth(), bmp.getHeight(), intArray);
        BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
        Reader reader = new MultiFormatReader();
        try {
            Result result = reader.decode(bitmap);

            text = result.getText();
            byte[] rawBytes = result.getRawBytes();
            BarcodeFormat format = result.getBarcodeFormat();
            ResultPoint[] points = result.getResultPoints();
            textv.setText(text);

        } catch (NotFoundException e) {

            e.printStackTrace();
        } catch (ChecksumException e) {

            e.printStackTrace();
        } catch (FormatException e) {

            e.printStackTrace();

        }
        Log.i("done", "done");
        if(text!=null)
        Toast.makeText(getBaseContext(), text, Toast.LENGTH_LONG).show();
        else{
            Toast.makeText(getBaseContext(), "QQ", Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onClick(View v) {

        Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, 0);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK) {
            Bundle extras = data.getExtras();
            bmp = (Bitmap) extras.get("data");
            ivPicture.setImageBitmap(bmp);
            decode();
        }

    }

} 
```

此代码将使用您手机的默认摄像头，如果您需要使用他们的客户端，则需要启动他们的`CaptureActivity`，您的布局应包括`TextView`显示结果、`ImageView`显示您捕获的图像以及`Button`启动摄像头。. 这是基于 2.1zxing 的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:08:54.393

您可以使用：

*   [zbar](http://zbar.sourceforge.net/)（SDK 有一个很好的例子）。
*   [志兴](http://code.google.com/p/zxing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:32:09.340

嘿，从此[链接](http://shopsavvy.mobi/android/sdk/release/ScannerSDK.Android-Latest.zip)下载 Biggu Barcode Scanner 的示例，提取演示项目并将其导入 eclipse。zip 文件有演示示例，您可以根据需要使用并集成到您的应用程序中

# css - MVC3 App under IIS 5.1 doesnt load CSS stylesheet

> ID：13803853
> 
> 赞同：0
> 
> 时间：2012-12-10T15:24:24.443
> 
> 标签：css, asp.net-mvc-3, iis-5

I have MVC3 app. When I run it under ASP.NET Development Server from Visual Studio, everything is fine. **But, when I run it under IIS, the CSS is not loading at all**.

Any manipulation with permission didnt help, even if I sent full access to everyone for the whole solution folder. I have IIS 5.1 on Windows XP. I enabled MVC3 support (.*) in IIS, the application runs fine, except CSS is not loading for some reason.

When running under IIS - doesnt pick up static content.

Actually, no static content work - not css, not javascript files from the Script folders. And this is weird, since I have another MVC3 app with exactly same Web.Config and exactly the same VirtuialDirectory configuration that works just fine, all JS and CSS are loaded correctly.

And I dont see any difference, except one works, another one -doesnt ;(

**UPDATE**

After playing with creating default MVC3 applications in different folder and with different names, I found that the problem ONLY happens when the application name contains DOT :)

Something like "MyCompany.MyApplication" WILL not work correctly under IIS 5.1.

If I call it just "MyApplication1" - everything works ! Go guess....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:55:52.833

在我的情况下，原来是 UrlScan 错误：我将“UrlScan.ini”中的“AllowDotInPath”选项更改为 0，瞧！这是参考：www.iis.net/learn/extensions/working-with-urlscan/urlscan-3-reference

# iphone - UITableView 自定义纯灰色索引

> ID：13803865
> 
> 赞同：0
> 
> 时间：2012-12-10T15:25:03.993
> 
> 标签：iphone, objective-c, ios, uitableview, ios5

我真的需要为我的应用程序实现一组灰色索引栏。

目前，我正在使用一个 UITableView，我将它分成多个部分。

但是，默认部分索引具有渐变外观，我认为这是不可取的。

是否可以将索引更改为具有自定义外观，例如纯灰色外观？

如果有怎么办？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:31:45.420

您可以使用这些 tableView 委托或数据源（我有点模糊）方法来实现您的自定义“索引视图”（部分标题）。

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section;

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section; 
```

# sql - SQL solution for duplicate records

> ID：13803866
> 
> 赞同：-4
> 
> 时间：2012-12-10T15:24:54.013
> 
> 标签：sql, sql-server-2008-r2, duplicates

I am using SQL Server 2008 R2\. I have a table `DESTI`

```
CODE_DESTI   ENTERPRISE 
-----------------------
1            xx
1            yy
12           pp
12           oo
12           ll 
```

How can I update the duplicate `CODE_DESTI` with auto increment 1 number after it

```
CODE_DESTI   ENTERPRISE 
-----------------------
11            xx
12            yy
121           pp
122           oo
123           ll 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:31:46.203

您可以使用 Window 函数执行此操作：

```
SELECT
    CODE_DESTI + CAST(RANK() AS varchar) OVER (PARTITION BY CODE_DESTI ORDER BY ENTERPRISE) AS CODE_DESTI,
    ENTERPRISE
FROM DESTI 
```

# asp.net - 在 asp.net Webform 应用程序中使用已发布的 SSRS 报表模型数据

> ID：13803873
> 
> 赞同：1
> 
> 时间：2012-12-10T15:25:12.847
> 
> 标签：asp.net, reporting-services, webforms

我们组织中的报告团队正在使用 SSRS 报告模型作为其 SSRS 报告的数据源。模型发布到报告服务器。

我的 asp.net Web 表单应用程序上有一些只读页面，它们需要使用这些报告中包含的相同逻辑来呈现其中包含的一些数据。

有没有办法在我的应用程序中引用已发布的报表模型？可以以某种方式将它们添加为数据源吗？如果可能的话，我想避免在我自己的应用程序中编写相同的逻辑。

asp.net Web 应用程序使用的是 dot net 4.0 VS2010，SSRS 报表模型使用的是部署到 2008 R2 报表服务器的 VS2008。

由于网站目前使用的其他数据种类繁多，我目前正在使用各种数据访问方法（ado.net 对 SP 的调用、实体框架、linq-to-sql 等），因此我对任何方法都持开放态度获取报告模型。

# sql - 多个计数和分组依据

> ID：13803875
> 
> 赞同：4
> 
> 时间：2012-12-10T15:25:35.660
> 
> 标签：sql, sql-server-2008, tsql

我的表如下所示：

```
ID ProductName ProductCode
1  abc         123
2  abc         123
3  abc         456
4  def         789
5  ghi         246
6  jkl         369
7  jkl         369
8  jkl         369
9  jkl         468
10 jkl         468 
```

我希望创建一个如下所示的汇总表：

```
ProductName ProductCode Total
abc         123         2
abc         456         1
jkl         369         3
jkl         468         2 
```

换句话说，我对产品“def”和“ghi”不感兴趣，因为它们只在原始表中出现一次。对于其他一切，我想按 ProductName 和 ProductCode 进行分组并显示计数。

我已经尝试过使用 group by 子句和 where in (select...)，但我最终还是绕了一圈。

该表有大约 50,000 行，位于 SQL Server 2008 R2 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:37:09.753

就是这个：

```
SELECT
      ProductName,
      ProductCode,
      COUNT(*) as Total
 FROM Table1
 WHERE ProductName IN (SELECT ProductName FROM Table1 GROUP BY ProductName HAVING COUNT(*) > 1)
 GROUP BY ProductName, ProductCode 
```

[http://www.sqlfiddle.com/#!3/c79ad/9](http://www.sqlfiddle.com/#!3/c79ad/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:30:13.810

要过滤聚合，您需要使用以下`HAVING`子句：

```
SELECT
  ProductName,
  ProductCode,
  COUNT(*) as Total
FROM T
GROUP BY ProductName, ProductCode
HAVING COUNT(*) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:52:48.960

```
;WITH cte AS
 (
  SELECT ID, ProductName, ProductCode,
         COUNT(*) OVER (PARTITION BY ProductName, ProductCode) AS Total,
         COUNT(*) OVER (PARTITION BY ProductName) AS PCount,
         ROW_NUMBER() OVER (PARTITION BY ProductName, ProductCode ORDER BY ID) AS rn
  FROM Products
  )
  SELECT ID, ProductName, ProductCode, Total
  FROM cte
  WHERE PCount > 1 AND rn = 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T15:36:00.410

您不能`WHERE`在要聚合的列上使用。你需要`HAVING`改用。

```
SELECT   ProductName,
         ProductCode,
         COUNT(*) AS Total
FROM     Products p
GROUP BY p.ProductName, 
         p.ProductCode
HAVING   COUNT(p.ProductName) > 1 
```

# asp.net - 在 asp.net 中具有两个动作的文字（自定义文字）

> ID：13803877
> 
> 赞同：0
> 
> 时间：2012-12-10T15:25:45.340
> 
> 标签：asp.net, asp.net-mvc

我需要一个文字来做一个动作。asp 文字仅用于警告。但我需要此页面中的确切文字！

如果您想在此处删除您的评论，则会出现一个文字并询问您是否要删除它。它有两个按钮（是和否）我怎么能有这样的文字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:48:13.400

试试 jQuery UI 模态对话框

[http://jqueryui.com/dialog/#modal-confirmation](http://jqueryui.com/dialog/#modal-confirmation)

# c# - 有没有办法在 VS2010 中强制换行？

> ID：13803881
> 
> 赞同：2
> 
> 时间：2012-12-10T15:26:16.007
> 
> 标签：c#, visual-studio-2010

举这个例子。

```
MessageBox.Show("You cannot create an incident and also provide a Case Number\nPlease choose one or the other"); 
```

我想把它放在这样的两行上，但没有 + 运算符

```
MessageBox.Show("You cannot create an incident and also provide a Case Number\n" + 
                "Please choose one or the other"); 
```

但我想知道“是否有一些转义字符可以在没有字符串连接的情况下完成？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:29:48.283

你可以这样做（注意你*不能*缩进第二行，否则缩进将成为字符串的一部分）：

```
MessageBox.Show(@"You cannot create an incident and also provide a Case Number
Please choose one or the other"); 
```

但实际上您不必担心使用`+`字符串连接，因为[编译器会将其优化掉](https://stackoverflow.com/questions/288794/does-c-sharp-optimize-the-concatenation-of-string-literals)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:29:49.570

您可以将其[设为逐字](http://blogs.msdn.com/b/gusperez/archive/2005/08/10/450257.aspx)字符串：

```
string msg = @"You cannot create an incident and also provide a Case Number
Please choose one or the other";
MessageBox.Show( msg ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:30:16.787

干得好

```
MessageBox.Show(@"You cannot create an incident and also provide a Case Number 
Please choose one or the other"); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-10T15:31:40.057

使用以下内容：

```
MessageBox.Show(string.Format("This is my first line. {0} This is my second line. {0}" +
    "And this is my third line.", Environment.NewLine)); 
```

请记住，这仅在某些情况下有效。例如，在 HTML 中，您需要使用`<br />`而不是`Environment.NewLine`，但系统是相同的。

# cuda - CUDA PTX 代码 %envreg<32> 特殊寄存器

> ID：13803882
> 
> 赞同：4
> 
> 时间：2012-12-10T15:26:16.850
> 
> 标签：cuda, opencl, ptx

我尝试使用 CUDA 驱动程序 API 运行由 .cl 内核生成的 PTX 汇编代码。我采取的步骤是这些（标准的opencl程序）：

1) 加载 .cl 内核

2) JIT 编译

3) 获取编译好的ptx代码并保存。

到现在为止还挺好。

我注意到 ptx 程序集内的一些特殊寄存器，%envreg3，%envreg6 等。问题是当我尝试使用驱动程序 API。所以代码陷入了无限循环，无法正确运行。但是，如果我手动设置这些值（我将 %envreg6 替换为 ptx 内的块大小），代码正在执行并且我得到正确的结果（与 cpu 结果相比是正确的）。

有谁知道**我们如何为这些寄存器设置值**，或者如果我遗漏了什么？即 cuLaunchKernel 上的一个标志，它为这些寄存器设置值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:34:01.257

您正在尝试编译 OpenCL 内核并使用 CUDA 驱动程序 API 运行它。OpenCL 和 CUDA 之间的 NVIDIA 驱动程序/编译器接口不同，因此您想要做的事情不受支持，根本无法工作。

据推测，唯一的解决方法是您找到的解决方法：修补 PTX 代码。但恐怕这在一般情况下可能不起作用。

**编辑：** 具体来说，OpenCL 支持的网格比大多数 NVIDIA GPU 支持的更大，因此需要通过划分多个实际网格启动来虚拟化网格大小，因此需要偏移。同样在 OpenCL 中，索引不一定从 (0, 0, 0) 开始，用户可以指定驱动程序必须传递给内核的偏移量。因此，为 OpenCL 和 CUDA C 启动初始化的寄存器是不同的。

# java - Eclipse - 是否可以跳转到特定的包？

> ID：13803883
> 
> 赞同：1
> 
> 时间：2012-12-10T15:26:15.930
> 
> 标签：java, eclipse, packages

假设我正在查看某个文件，并且我想看看在不同的包中是否有类似的文件。我真的不知道不同的文件可能被称为什么 - 它们是由不同的人编码的，所以很可能会以不同的方式命名。

我确实知道它们*可能*在一个名称大致相同的包中 - 例如，如果我正在查看`com.sandwiches.ham.artisan`包中的一个文件，我认为应该有一个类似的（尽管在这种情况下，可悲的是不相关）文件在`com.sandwiches.avocado.artisan`包中，跳转到所述包并检查它的最快方法是什么？

我厌倦了翻阅大量的手工三明治，这让我很饿。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:16:05.053

好吧，无论如何，您都必须进行一些打字。有*一个*用于包裹的导航项，它只是没有绑定到任何快捷键。要将其绑定到您选择的组合键，请执行以下操作：

Eclipse->Preferences，然后输入 Keys 作为您的过滤器。

![Eclipse 首选项 - 键绑定](../Images/0021245be87d03afc18a0cea9073e6c7.png)

搜索 Go To Package 命令，单击 Binding 输入字段，然后键入要用于键绑定的任何键（在我的屏幕截图中，我将其设置为 Command-Shift-0）。然后单击确定保存并关闭首选项对话框。

之后，键入您选择的键绑定将打开一个包资源管理器，让您输入您想要的任何包并导航到它。

![在此处输入图像描述](../Images/9ddaeb39b15c67a0d7ca3b7d92d45984.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:29:05.027

从面包屑（按下`Alt+Shift+B`打开它）可以很快地浏览三明治菜单嗯我的意思是包结构......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T15:32:21.223

**Ctrl + Shift + R**是在项目中的每个包中查找文件的好快捷方式，我每次都使用它...希望对您有所帮助...

# javascript - 使用 Flot 图表同时突出显示两个条形图

> ID：13803885
> 
> 赞同：0
> 
> 时间：2012-12-10T15:26:41.487
> 
> 标签：javascript, flot

我有两个条形图。如何突出显示一个条形图并使用 Flot 突出显示另一个条形图上的类似数据。这是我尝试过的。下面的代码更改适当地更改了第二个图表的颜色，但是图表没有显示颜色变化

```
 $("chart").bind('plothover', function (event, pos, item){
     if (item != null) {
       if (previousPoint != item.datapoint) {
         previousPoint = item.datapoint;
         pGraph.setData(datas[item.dataIndex].color = "#FF0000");
         pGraph.draw();
       } else {
         pGraph.setData(datas[item.dataIndex].color = "#0066FF");
         pGraph.draw();
       }
     } else {
       previousPoint = null;
     }
 }); 
```

# qt - 测试变量是否为空并在 qmake 期间给出默认值

> ID：13803893
> 
> 赞同：12
> 
> 时间：2012-12-10T15:27:01.533
> 
> 标签：qt, qmake

如何测试变量是否为空或未在`qmake` `.pro`文件中定义？如果未定义变量，我希望能够设置默认值。

我试过

```
eval("VARIABLE" = ""){
     VARIABLE = test
}

eval("VARIABLE" = ""){
     message(variable is empty)
} 
```

但我仍然收到“变量为空”的消息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T15:34:28.697

已经有我没有发现的函数[isEmpty ：](http://doc.qt.digia.com/4.7-snapshot/qmake-function-reference.html#isempty-variablename)

```
isEmpty(VARIABLE){
  VARIABLE = test
}    
isEmpty(VARIABLE ){
  message(variable is empty)
} 
```

我不明白为什么 eval 没有工作的想法......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-08T11:00:42.660

就像你自己的回答说的那样，`isEmpty(VARIABLE)`做你想做的事：

```
isEmpty(VARIABLE) {
    ...
} 
```

qmake 语言没有等价运算符 ( `==`)，但您可以像这样比较：

```
equals(VARIABLE, foo) {
    ...
} 
```

您还可以使用正则表达式检查变量是否包含子字符串：

```
contains(VARIABLE, .*foo.*) {
    ...
} 
```

* * *

`eval()`不起作用的原因是它**执行其中的语句，**如果语句成功则返回 true。

所以通过这样做：

```
eval(VARIABLE = "") {
    ...
} 
```

...您实际上是*分配* `""`给`VARIABLE`，使变量为空并进入块。

更多关于测试功能：http: [//qt-project.org/doc/qt-5/qmake-test-function-reference.html](http://qt-project.org/doc/qt-5/qmake-test-function-reference.html)

# android - 怎么可能是单个android项目上的两个AndroidManifest.xml文件

> ID：13803899
> 
> 赞同：1
> 
> 时间：2012-12-10T15:27:19.347
> 
> 标签：android, android-manifest, bin

我了解到，在每个项目中，我们只有 1 个 AndroidManifest.xml 文件。但是我发现了两个相同的文件名！一个在根文件夹中，另一个在 /bin 文件夹中...

怎么会，我用什么外壳？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:35:04.297

*project/bin*文件夹用于编译（到字节码）源代码和项目资源。

别担心，你的 IDE 会自动处理 bin 文件夹的内容。编译完所有代码后，您的 IDE（我认为是 Eclipse）就可以构建您的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:30:45.803

当您的项目构建时，它会在 bin 文件夹中**创建自己的副本以供执行。**

您可以忽略 bin 文件夹中的所有内容，因为它是自动生成的，**不需要您直接进行任何编辑**。

**您唯一**需要担心的AndroidManifest.xml 是**根项目目录中的那个**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:30:56.157

一个由开发人员创建（根文件夹中的一个），另一个（/bin 中的一个）由 eclipse 或您使用的任何 IDE 创建。

另一个是已编译的二进制文件。这完全没问题。你不必做任何事情。继续发展！

# javascript - 动态附加 JQuery Mobile DatePicker / Calendar

> ID：13803903
> 
> 赞同：0
> 
> 时间：2012-12-10T15:27:37.053
> 
> 标签：javascript, jquery, jquery-mobile

如何将 JQuery **Mobile** DatePicker 动态附加到输入字段？

我尝试使用[ui-datepicker](http://jqueryui.com/datepicker/)，但我认为插件将日历附加到具有所需标记的输入字段。如何使用 Javascript 动态附加日历？我尝试了以下

```
$("#datep").after( $( "<div />" ).datepicker({ 
    altField: "#datep"
}) ); 
```

但是在选择日期后日历不会隐藏。

我还探索了[jQM-DateBox2](http://dev.jtsage.com/jQM-DateBox2/)，但找不到动态附加日历的方法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:02:30.443

要使用 DateBox 执行此操作，您可以执行以下操作：

```
$('<input data-role="datebox" ...etc.. >').appendTo(whatever).trigger('create'); 
```

或者，您可以在任意位置添加输入字段，然后

```
$('#added_element').datebox({<optional options}); 
```

# web - 在 Twisted Web 中禁用指纹

> ID：13803908
> 
> 赞同：0
> 
> 时间：2012-12-10T15:27:55.090
> 
> 标签：web, twisted, fingerprint, nmap

我对我的服务器做了一个[nmap](http://nmap.org/)，我观察了指纹，我该如何禁用它？

```
443/tcp  open     ssl/http     TwistedWeb httpd 9.0.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:24:54.163

“指纹”是服务器在 http 会话开始时识别自己的方式。因此我们应该看看是什么在twisted中实现了Web服务器，它的标识保存在哪里。

现在，如果我们查看[http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.2.0/twisted/web/server.py](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.2.0/twisted/web/server.py)第 498 行状态

```
version = "TwistedWeb/%s" % copyright.version 
```

然后这个变量由 Request.process() 方法处理

```
class Request(pb.Copyable, http.Request, components.Componentized):
 ....
     def process(self):
        "Process a request."

        # get site from channel
        self.site = self.channel.site

        # set various default headers
        self.setHeader('server', version)
        self.setHeader('date', http.datetimeToString())

        # Resource Identification
        self.prepath = []
        self.postpath = map(unquote, string.split(self.path[1:], '/'))
        try:
            resrc = self.site.getResourceFor(self)
            self.render(resrc)
        except:
            self.processingFailed(failure.Failure()) 
```

因此，您可以轻松地继承 Request 并覆盖 process 方法，以做您喜欢的事情。或者你理论上可以在你的应用程序代码中做这样的事情：

```
from twisted.web import server
server.version = "COBOL HTTPD SERVICE" 
```

覆盖导入资源中的版本值。

# mysql - 从连接表中选择与所有选定行匹配的行

> ID：13803910
> 
> 赞同：1
> 
> 时间：2012-12-10T15:28:09.783
> 
> 标签：mysql, sql, join

我有一个条目表和一个类别表，其中一个连接表将两者连接起来，我想要做的是选择与一组特定类别匹配的所有条目。

例如。所有具有 A 类和 B 类的条目

条目

```
entry_id | title
------------------
1        | Entry 1
2        | Entry 2
3        | Entry 3 
```

类别

```
category_id | name
------------------
1           | A
2           | B
3           | C 
```

entry_categories

```
entry_id | category_id
-----------------------
1        | 1
1        | 2
2        | 1
2        | 2
2        | 3
3        | 1
3        | 3 
```

如果我这样做，我会得到所有 3 个条目，因为它们每个都匹配至少一个类别，但我真正想要的是条目 1 和条目 2，而不是条目 3。

```
SELECT *
FROM entry_categories AS ec
INNER JOIN entries AS e ON ec.entry_id = e.entry_id
WHERE ec.category_id IN(1, 2)
GROUP BY e.entry_id 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:29:11.670

`HAVING COUNT(ec.Categor_id) = 2`像这样添加：

```
SELECT *
FROM entry_categories AS ec
INNER JOIN entries AS e ON ec.entry_id = e.entry_id
WHERE ec.category_id IN(1, 2)
GROUP BY e.entry_id
HAVING COUNT(ec.Category_id) = 2 
```

# facebook - Facebook 点赞按钮计数器重置为 0

> ID：13803911
> 
> 赞同：0
> 
> 时间：2012-12-10T15:28:12.530
> 
> 标签：facebook, facebook-like, counter, facebook-likebox

我的点赞按钮计数器在一个月内显示 1 个赞。

我通过[http://graph.facebook.com/http://www.arthurimmo.com/](http://graph.facebook.com/http://www.arthurimmo.com/)检查了号码并获得了“真实号码”

我做了调试过程[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.arthurimmo.com%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.arthurimmo.com%2F)

但仍然在我的网站上显示 1 个赞

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:44:31.410

一个喜欢的数量是 url：[http](http://www.arthurimmo.com.x30.poliris.net/index.htm) ://www.arthurimmo.com.x30.poliris.net/index.htm 尝试将 og:url 交换为[http://www.arthurimmo.com](http://www.arthurimmo.com) 有时它会变得混乱重定向和重写以进行类似计数。

# php - 网页的快速和轻便的图像裁剪

> ID：13803912
> 
> 赞同：2
> 
> 时间：2012-12-10T15:28:12.623
> 
> 标签：php, image, crop

我在服务器上有一个网站，我想制作另一台服务器来“即时”裁剪存储的图像，以便另一台服务器上的网站可以使用它们。我找到了很多关于可用于裁剪图像的库的信息，但我需要找到最轻便、最快速的解决方案。首先，我在考虑用于 PHP 的 ImageMagic，但我认为使用 C/C++ 进行裁剪会更好。我应该使用什么语言/库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:38:11.740

有几种方法可以实现您的愿望。

其中之一是使用您已经提出的逻辑，即执行此操作的单独机器。我不会使用另一台服务器来完成这项工作，特别是如果您正在即时裁剪/调整大小，这意味着您的进程将等待另一台服务器完成。我会为此使用同一台机器，或者另一台机器，但在那里我会有一个 cronjob 来做这些事情。至于 lib，我会推荐 GD，我发现它比 Imagemagick 更容易使用。

另一种方式，从我的角度来看更有趣，是在 HTML5 画布的帮助下，在用户机器上的浏览器中完成所有这些工作。但这只有在该浏览器支持此功能时才有效。

**更新**

阅读我的答案后，我想到理想的解决方案是同时使用两者。在可以的地方，您使用客户端计算机的资源，在您不能的地方，您使用服务器端裁剪/调整大小的回退。

# svn - 配置 SVN/TFS 以监视文件夹并静默签入文件更改（出于审核目的）？

> ID：13803913
> 
> 赞同：1
> 
> 时间：2012-12-10T15:27:52.063
> 
> 标签：svn, tfs, monitoring, auditing

（也发布在[ServerFault](https://serverfault.com/questions/456769/looking-for-app-service-to-silently-capture-file-changes-in-website-like-svn-bu)，但意识到这里会有更多的 SVN/TFS 用户）

底线问题：

*   是否可以创建一个运行无人值守服务的 SVN/TFS 存储库，该服务会静默检查对目标文件夹中的文件所做的所有更改以及更改者的用户名？它必须对进行文件更改的人完全不可见。

这是我的问题的背景：

许多人为我们的 ASP.NET 网站部署更改……设计师部署 HTML 和 CSS 更改，.NET 开发人员部署 ASPX、DLL 文件，图形设计师部署图像等。

*从理论上讲*，所有这些部署都是以一种非常可控的方式完成的——源代码在 SVN 中维护，部署包被创建和版本控制，部署首先在预生产站点上进行测试，实时部署被记录。*从理论上讲*，我们总是知道哪些文件被更改、何时、为什么以及由谁更改。

但是，有时有人直接在现场进行更改并绕过所有程序。通常这是因为一些紧急情况。有时所做的更改会导致网站出现问题……而且没有人拥有它！

所以我们正在寻找的是某种无人值守的服务，它可以捕获服务器上特定文件夹的所有文件更改。它应该在文件更改发生时“签入”文件更改，即捕获整个文件的新版本，并捕获用户的 Windows 登录。换句话说，每个文件都会获得对其所做更改的历史记录，就像 SVN、TFS 等一样。我们应该能够在文件历史记录中的版本之间进行比较。它捕获的 99% 应该是通过适当的程序进行的更改 - 但它也应该包含 1% 没有的更改。

需要明确的是 - 我们不是在寻找发送“文件完整性”警报的服务，如 OSSEC。我们只希望捕获每个文件更改，因此如果出现问题，我们可以检查更改日志并找出在常规程序之外做了什么。此外，它显然应该是完全自动化的——要求用户遵循额外的程序不是我们在这里所追求的！

此外，定期进行备份然后查找它们之间的差异不是我们想要的，因为这不会告诉我们是谁进行了更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:03:16.477

虽然在技术上可以做到这一点，但我强烈建议您解决问题的根本原因——而不是症状。

> 但是，有时有人直接在现场进行更改并绕过所有程序。通常这是因为一些紧急情况。有时所做的更改会导致网站出现问题......并且**没有人拥有它**！

（强调我的）这是一个你需要解决的**大问题。**对实时站点的访问应该被非常严格地锁定（只有发布经理应该对服务器有写访问权限——或者更好的是，一个自动化的部署过程），并且“紧急”更改仍然应该遵循相同的一般工作流程才能投入生产- 只是加速。

您的实时站点的每个版本都应该是一个单独的包（或一个脚本化的过程，可重复的过程，仅在您告诉它推送到实时站点的哪个版本中有所不同），并且由固定的人/一组人协调推广。如果不遵循流程（包括客户/利益相关者和变更经理的签字），任何事情都不会上线，并且每次都由相同的人以相同的方式进行促销。

现在——你自己承认——你没有责任。只要人们*能*逃脱惩罚，他们*就会尝试这样做。*要么是出于恶意，要么是因为“遵循流程需要太长时间/太难”。

简短版本：与其通过解决此行为（使用您在此处寻找的解决方案）来*启用此行为，不如**从一开始就阻止它发生，*这样您就不需要事后进行清理。

> 此外，定期进行备份然后查找它们之间的差异不是我们想要的，因为这不会告诉我们是谁进行了更改。

我看不出您提出的解决方案如何为您提供所需的审计跟踪。该服务只会提交所做的更改，而不是提交这些更改的人。您能否通过使用 Windows 安全日志记录和 NTFS 审计来跟踪更改的来源？也许，也许不是。

该服务将如何处理合并冲突？在 SVN 中，您只能在您的 WC 处于 HEAD 修订版时提交，因此您必须更新，然后提交。如果对需要合并的相同元素有其他更改，会发生什么？

我建议您使用诸如 Tripwire 之类的监控服务来监视对您的实时站点所做的更改，但这可能仍然无法告诉您*谁*进行了更改或*为什么*进行更改- 但如果发生更改，您至少可以很快得到通知。

# excel - Vba Excel 维护大数据列表的最佳方式

> ID：13803917
> 
> 赞同：2
> 
> 时间：2012-12-10T15:28:18.317
> 
> 标签：excel, vba

我有一个带有一些数据的 xls，我需要更正。例如：修复常见的拼写错误，将“4 个部分”替换为“四个部分”等。

替换规则是大键=> 值数组。所以我只是遍历它们并进行替换。

我想将这些规则存储在单个 .yml 文件中，并在我的宏启动后立即将它们加载到数组中。我认为维护它们是最简单的方法，因为它们经常更新。不幸的是，vba 似乎没有 yaml 解析器。

还有另一种方法可以使我的配置超出宏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:40:15.417

您的宏可以放在另一个电子表格中，该电子表格被调用以在您的目标电子表格上运行。因此，将您的规则存储在宏电子表格中是可能的。稍后编辑规则可能不会那么容易，我有点讨厌在 Excel 中进行多行输入，但如果您需要一个快速访问的数据存储，它可以工作。

编辑：在再次阅读你的问题时，我看到你想将这个单独的宏存储起来。你可以试试json：

[是否有适用于 VB6/VBA 的 JSON 解析器？](https://stackoverflow.com/questions/2782076/is-there-a-json-parser-for-vb6-vba)

# android - 吐司消息似乎在闪烁 - android

> ID：13803918
> 
> 赞同：0
> 
> 时间：2012-12-10T15:28:00.720
> 
> 标签：android, toast

如何阻止我的应用程序多次显示 toast 消息？每当我向一个、两个或更多联系人发送短信时，它总是会多次显示 toast 消息。有时，吐司似乎在闪烁，同时显示“已发送短信”消息大约 2、4、18 次。我认为它使“发送的短信”信息加倍。如果我将它发送到 1 个号码，它会显示 2，依此类推

```
try {

                    String message = "firealert";
                    String additionalMessage = send_input.getText().toString();
                    info.open();
                    ArrayList<String> data = info.getContactNumber();
                    info.close();
                    for(String contactNum : data)
                    {
                        sendSMS("0".concat(contactNum), message+" "+additionalMessage);
                        //sendSMS(contactNum, message+" "+additionalMessage);
                    }
                    } catch (Exception e) {
                        Toast.makeText(getApplicationContext(),
                        "SMS failed, please try again later!",
                        Toast.LENGTH_LONG).show();
                        e.printStackTrace();
                    } 
```

并使用此代码显示短信状态

```
private void sendSMS(String phoneNumber, String message)
{        
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver()
        {
            public void onReceive(Context arg0, Intent arg1)
            {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver()
        {
            @Override
            public void onReceive(Context arg0, Intent arg1) 
            {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                        
                }
            }
        }, new IntentFilter(DELIVERED));        

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:34:46.973

您可以做的是创建一个 Toast 变量。

```
private Toast t;

if(t!=null)    
   t.cancel();
Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show(); 
```

或者

```
if(t==null)    
    Toast.makeText(getBaseContext(), "SMS sent", 
                                    Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:35:06.537

短信内容是否超过 160 个字符？您是否有可能看到 Toast (content.length()/160) 次？短信可能会分成几个部分。

# c# - 正则表达式查找所有匹配的语句

> ID：13803921
> 
> 赞同：-4
> 
> 时间：2012-12-10T15:28:27.180
> 
> 标签：c#, regex, pattern-matching

我有一个字符串：

> 将1放入锅中放入2放入锅中放入3放入锅中...

取决于

> 把n放进锅里

如何使用 C# 正则表达式获取所有 put 语句，例如：

> “将 1 放入锅中”
> “将 2 放入锅中”
> “将 3 放入锅中”
> ...
> “将 n 放入锅中”

声明`n`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:32:11.070

我可能不应该回答这个问题，因为您的问题根本没有任何努力，但我认为可能的正则表达式是：

```
string regex = @"put (?<number>\d+) in pot"; 
```

然后你可以使用匹配：

```
var matches = Regex.Matches("Put 1 in pot put 2 in pot", @"put (?<number>\d+) in pot", RegexOptions.IgnoreCase);
foreach (Match match in matches)
{
    Console.WriteLine(match.Value);
} 
```

要找到实际数字，您可以使用

```
int matchNumber = Convert.ToInt32(match.Groups["number"].Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:40:32.017

你也可以这样做

```
 var reg=@"put.*?(?=put|$)";
 List<string> puts=Regex.Matches(inp,reg,RegexOptions.Singleline)
                        .Cast<Match>()
                        .Select(x=>x.Value)
                        .ToList(); 
```

* * *

```
put.*?(?=put|$)
------ -------
|         |
|         |->checks if `.*?`(0 to many characters) is followed by `put` or `end` of the file
|->matches put followed by 0 to many characters 
```

# phpbb - 如何在 phpbb 中将问答验证码添加到 Redsilver3 样式中

> ID：13803927
> 
> 赞同：0
> 
> 时间：2012-12-10T15:28:36.070
> 
> 标签：phpbb

我正在维护一个phpbb 论坛。论坛使用的样式是Redsilver3，支持phpbb 3.0.4版本。我已将论坛版本更新为 3.0.11，以便我可以使用问答验证码来防止垃圾邮件。Q&A验证码在论坛激活成功，但Redsilver3上没有显示验证码。我尝试通过添加代码来更新 Redsilver3 文件

```
"<!-- IF CAPTCHA_TEMPLATE and S_CONFIRM_CODE -->
        <!-- INCLUDE {CAPTCHA_TEMPLATE} -->
        <!-- ENDIF -->" 
```

在 Redsilver3 模板文件夹的 posting_body.html 中并清除缓存。但它仍然没有显示验证码。我也试过用最新版本的 Redsilver3 替换所有文件，但验证码没有显示。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:24:30.057

我从最新版本的 subsilver2 中复制了 captcha_qa.html 和 captcha_default.html 并添加了代码

到 ucp_register.html 文件，验证码工作正常。

之前我从 Redsilver3 的最新版本中复制了 captcha_qa.html 和 captcha_default.html 并将代码添加到了 posting_body.html，所以它不起作用。

在 phpbb 论坛上问了同样的问题后，我得到了这个想法。这是链接[https://www.phpbb.com/community/viewtopic.php?f=74&t=2166883&p=13210671#p13210671](https://www.phpbb.com/community/viewtopic.php?f=74&t=2166883&p=13210671#p13210671)

# php - PHP使数组从键/位置开始

> ID：13803929
> 
> 赞同：1
> 
> 时间：2012-12-10T15:28:47.447
> 
> 标签：php, arrays

我想告诉我的数组从关键位置 2 开始，然后遍历整个数组，包括关键位置 2 之前的值。我只想使用一个数组并指定我开始循环的关键位置。例如，我在这里使用了array_splice，但它并没有做我想要的，你能帮帮我吗？

```
$names = array('Bill', 'Ben', 'Bert', 'Ernie');
foreach(array_slice($names, 2) as $name){
   echo $name;
}

foreach(array_slice($names, 3) as $name){
   echo $name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:30:48.823

如果键不相关，您可以将数组拼接两次，然后合并生成的数组，如下所示：

```
$names = array('Bill', 'Ben', 'Bert', 'Ernie');
$start = 2;

foreach( array_merge( array_slice($names, $start), array_slice( $names, 0, $start)) as $name){
   echo $name;
} 
```

您可以从[演示](http://3v4l.org/rQSe7#v430)中看到这打印：

```
BertErnieBillBen 
```

或者，为了提高效率，您可以使用两个知道从头开始回绕的循环，因为您在原始数组上进行操作而不是创建它的副本，所以效率更高。

```
$start = 2;
for( $i = $start, $count = count( $names); $i < $count; $i++) {
    echo $names[$i];
}
$i = 0;
while( $i < $start) { 
    echo $names[$i++];
} 
```

你也可以把它变成一个单一的循环，然后将用于环绕的逻辑封装在`for`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:43:13.513

```
$limit = 2; //so you can set your start index to an arbitrary number
$fn= function($a,$b) use ($limit){
  if(($a < $limit && $b < $limit) 
      || ($a >= $limit && $b >=$limit)) //$a and $b on the same side of $limit
        return $a < $b ? -1 : ($a==$b ? 0 : 1);
  if($a < $limit && $b > $limit) return 1; //because $a will always be considered greater
  if($a >= $limit && $b < $limit) return -1; //because $b will always be considered greater

};
uksort($arr, $fn);
foreach($arr as $v) echo $v; 
```

# javascript - 使用 r.js 将 Backbone+requireJS 网站构建成一个 JS 文件（包括 HTML）

> ID：13803932
> 
> 赞同：1
> 
> 时间：2012-12-10T15:29:03.160
> 
> 标签：javascript, backbone.js, requirejs

我第一次尝试使用 r.js。

我下载了[todoMVC](https://github.com/addyosmani/todomvc) github 项目。

我对dependency-examples/backbone_require 架构感兴趣。

我如何使整个项目成为一个 JS 文件（包括模板）。

顺便说一句，我们的最终目标是制作一个 chrome 扩展。但是当我正在研究requireJS时，我想知道如何缩小整个依赖树也用于Web开发目的。

谢谢

# c++ - 使用 dumpbin 显示 DLL 的外部符号（UNDEF）？

> ID：13803936
> 
> 赞同：3
> 
> 时间：2012-12-10T15:29:13.060
> 
> 标签：c++, dll, dumpbin

我们都知道我们可以为 .obj 文件使用 dumpbin 来显示所有符号，包括外部符号。

```
dumpbin /symbols ExternCTest.ob
00F 00000000 UNDEF  notype ()    External     | ?foo@@YAHH@Z (int __cdecl foo(int)) 
```

但我想知道如何为 DLL 做到这一点？我也尝试过 dumpbin /exports 以及dependency walker，但它**没有**显示外部符号。

我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T16:49:19.103

您正在寻找的命令行参数是`/imports`. 这将显示 DLL 引用的所有外部符号。

# jquery - Facybox ajax 链接：无法加载请求的内容。请稍后再试

> ID：13803941
> 
> 赞同：0
> 
> 时间：2012-12-10T15:29:42.777
> 
> 标签：jquery, ajax, fancybox

所以我有两个链接，一个用于注册帐户，一个用于获取密码提醒：

密码提醒有效，注册链接无效。

这是链接的代码：

```
<h4 class="register"><a href="<?=base_url() ?>auth/register" class="register fancybox.ajax">Register</a></h4>
<h4><a href="<?=base_url() ?>auth/forgot_password" class="register fancybox.ajax">Forgot your password?</a></h4> 
```

当我通过 firebug 查看呈现的链接时，除了其中一个 h4 元素上的附加类之外，它们看起来完全相同，我可以复制链接并通过浏览器访问它们，但正如我所说的那样，它不能通过 fancybox 工作。

任何建议为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:21:50.087

我怀疑只有链接`<a>`应该有 class `register`，而不是`h4`标签。

为什么？因为您正在将 fancybox 绑定到 selector `.register`，不是吗？所以 fancybox 期望`h4`在第一个实例中从标签中找到内容的来源，它与链接共享相同的类。

# php - strtotime php 函数在 php 文件中输出良好的时间，但在 MySQL 中更新后错误

> ID：13803943
> 
> 赞同：1
> 
> 时间：2012-12-10T15:29:47.233
> 
> 标签：php, mysql, strtotime

我有这样的脚本：

```
mysql_connect('localhost', 'xxx', 'xxx');
mysql_select_db('xxx');

$sql = "SELECT * FROM rl_cronjobs";
$sql = mysql_query($sql);
$row = mysql_fetch_array($sql);

$sunday = $row['next_sunday'];
$today = date('Y-m-d');

if($sunday == $today){
    $sql = "DELETE * FROM xxx WHERE stala != 1";
    $sql = mysql_query($sql);
    echo $nextsunday;
    $nextsunday = strtotime("next Sunday");
    $nextsunday = date('Y-m-d', $nextsunday);   
    $sql = "UPDATE xxx SET next_sunday = $nextsunday";
    $sql = mysql_query($sql) or die (mysql_error());
    echo $nextsunday;
} 
```

在 MySQL 中，它的值是： 1984 我需要它是下周日的正常日期

MySQL 表行的类型是 varchar，因为当我设置 tu date 时它不会更新。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:33:14.680

看起来您缺少一些引号`"`或`'`更新查询。你可能打算写：

```
$sql = "UPDATE xxx SET next_sunday = '$nextsunday'"; 
```

*旁注：*这些`myslq_*`函数已[弃用](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)，您不应再在新代码中使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:55:57.833

不要将日期存储在 varchar 字段中。Mysql 具有用于此类事物的日期、日期时间和时间戳字段，并且使用它们打开了一个新的可能性世界。例如，您的“下周日”计算可以简单地完成：

```
UPDATE xxx SET next_sunday = NOW() + INTERVAL (8 - DAYOFWEEK(NOW())) DAY 
```

无需涉及 PHP 时间函数。请注意，此特定函数将始终选择真正的下周日，因此如果您在周日运行此代码，您将获得下周的周日，而不是“今天”，例如：

```
'2012-12-08' (Saturday) -> '2012-12-09'
'2012-12-09' (Sunday)   -> '2012-12-16'
'2012-12-10' (Monday)   -> '2012-12-16' 
```

同样，请注意，您正在尝试`$nextsunday`在定义之前回显。

# ios - 如何使用 vDSP_conv 来模拟 MATLAB 的 xcorr 函数？

> ID：13803950
> 
> 赞同：2
> 
> 时间：2012-12-10T15:30:15.383
> 
> 标签：ios, matlab, fft, accelerate-framework, cross-correlation

我目前正在将 MATLAB 算法转换为 C，以便在 iOS 应用程序中使用它。

我一直在努力使用 MATLAB 的 xcorr 函数。这是相关的 MATLAB 代码。

```
xcr = xcorr(A,A,maxlags); 
```

这，根据 MA​​TLAB 文档

> 返回滞后范围 [-maxlags:maxlags] 上的互相关序列。输出 c 的长度为 2*maxlags+1。

Apple Accelerate.Framework 提供了一个名为的卷积/相关函数`vDSP_conv`，但我看不到如何使用它来产生与`xcorr`. 这可能吗 ？如果是的话，任何人都可以帮助我。

最好的祝福，

阿卡乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:13:20.337

要复制 MATLAB 的 xcorr 的结果，您需要在向量之前和之后用零填充：

```
#include <stdio.h>

#include <Accelerate/Accelerate.h>

int main(void)
{
    #define NF  3
    #define NC  (2*NF+1)

    float A[3*NF] = {0, 0, 0, 1, 2, 3, 0, 0, 0};
    float C[NC];

    vDSP_conv(A, 1, A+NF, 1, C, 1, NC, NF);

    for (vDSP_Length i = 0; i < NC; ++i)
        printf("C[%u] = %g.\n", (unsigned) i, C[i]);

    return 0;
} 
```

# visual-studio-2010 - 我可以将 Windows Phone 7.1 应用程序从 VS2010 部署到 Windows Phone 8 设备吗？

> ID：13803953
> 
> 赞同：0
> 
> 时间：2012-12-10T06:15:21.307
> 
> 标签：visual-studio-2010, windows-phone-7, windows-phone-8

我一直在使用 Windows 7 上的 VS2010 为 Windows Phone 7.1 开发应用程序。我刚刚拿起诺基亚 Lumia 920 (Windows Phone 8)，但似乎无法将应用程序部署到手机上。

有没有人能够从 VS2010 部署到 Windows Phone 8 设备，有什么技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:18:33.840

不，这是不可能的。在 VS 2010 中没有可用的替代方法来实现这一点

# c# - WebGrid 复选框 MVC Razor

> ID：13803954
> 
> 赞同：1
> 
> 时间：2012-12-10T15:30:24.220
> 
> 标签：c#, asp.net-mvc, razor, webgrid

我有一个包含对象列表的视图模型。

将列表绑定到 WebGrid 很好，并且可以正确显示所有数据。

这些对象有一个布尔值，我希望用户通过选择与 WebGrid 中的每条记录一起显示的复选框来更改。当用户选中/取消选中各种复选框然后单击更新按钮时，我希望能够保存对对象的更改。

更新证明了 MVC 和 Razor 的正确“A 痛​​”。

如何将这些更改发送回控制器？有人可以建议吗？有样品吗？

**更新：**

在给每个复选框一个名称和 ID 后，我已经能够将整个表单传递回控制器。该值设置为 item.Id 并且仅在实际选中复选框时才在表单的属性中找到。

所以在控制器中，我这样做：

```
public ActionResult Assign(FormCollection form)
{
    var ch = form.GetValues("itemChk");
    foreach (var id in ch)
    {
      //...Get object using id
      //...Call your method
    }
    return View();
} 
```

ch 是 item.Ids 的字符串数组，只有那些被选中的复选框。通过将 item.Id 作为选中复选框的值返回，我可以在项目本身上分配/设置该值并保存/更新它。

接下来尝试获取所有返回值的复选框。还可以在 WebGrid 中的每一行的文本框中尝试类似的方法来处理返回值。

这是让我沿着这条路走下去[的链接。](http://www.codeproject.com/Questions/273164/mvc3-checkbox-checked-rows-in-the-web-grid)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-06T02:04:33.650

您可以使用 Json ajax 调用将 FormCollection 传递给控制器

```
$('#btnClick').click(function (event) {
    var form = $("#fmSearch").serializeArray();
    $.ajax({
        url: '/Home/Assign',
        dataType: "json",
        type: "post",
        data: form,
        cache: false,
        success: function (data) {
        },
        error: OnError
    });
}); 
```

请注意：不要添加“contentType:”application/json；charset=utf-8" 因为没有任何 json 内容。

fmSearch 是 Html.BeginForm() 的 id，可以这样写：

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "fmSearch" }))
{
    @Html.ValidationSummary(true)
} 
```

最后，`[HttpPost]`在您的操作上方添加并将 ActionResult 替换为 JsonResult。

# php - 用于分解配方列表元素的正则表达式语法

> ID：13803955
> 
> 赞同：2
> 
> 时间：2012-12-10T15:30:28.440
> 
> 标签：php, regex

我正在处理一个配方成分列表，其中一个示例如下所示：

> 花生、小麦淀粉、植物油、改性淀粉、糖、孟买香料味 [洋葱粉、香草和香料（孜然、咖喱粉、辣椒粉、芫荽）、大蒜粉、氯化钾、酵母提取物、酵母粉（含有麸质和大麦）、柠檬酸、调味剂（含有大麦、大豆、小麦、芹菜）]、米粉、盐、色素（浓缩甜菜根汁、姜黄素、辣椒粉提取物）。

我希望将每种成分分解成一个数组（使用 PHP），用逗号分隔。我遇到的问题是某些成分被细分了。在此示例中，“Mumbai Spice Flavour”的成分由方括号分隔，并包含一些成分，然后由常规括号分隔子成分。

一个标准：

```
explode(",", $recipeStr) 
```

会给我一个非常混乱的结果，所以我正在寻找一个正则表达式语句，它将每个不同的元素分解成一个数组，以考虑可选的方括号和可选的子括号。它还需要能够处理*未*嵌套在方括号中的括号。

所需的结果将是一个数组列表，如下所示：

```
-Peanuts
-Wheat Starch
-Vegetable Oil
-Modified Starch
-Sugar
-Mumbai Spice Flavour [Onion Powder, Herbs and Spices (Cumin, Curry Powder, Chilli Powder, Coriander), Garlic Powder, Potassium Chloride, Yeast Extract, Yeast Powder (contains Gluten and Barley), Citric Acid, Flavouring (contains Barley, Soya, Wheat, Celery)]
-Rice Flour
-Salt
-Colours (Concentrated Beetroot Juice, Curcumin, Paprika Extract) 
```

我不太擅长 RegEx 语法，因此如果有任何答案也可以解释语法逻辑，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:42:32.467

啊，括号匹配不是正则表达式可以轻松做到的。

也许您应该简单地逐个字符地遍历字符串：

```
$array = new Array();
$temp = "";

for($i = 0; $i < strlen($input); $i++)
{
    $c = $input[$i];
    if($c == '(')
        $paranthesis++;
    if($c == '[')
        $bracket++;

    if($c == ')')
        $paranthesis--;
    if($c == ']')
        $bracket--;
    if($c == ',' && $paranthesis + $bracket == 0)
    {
        $array[] = $temp;
        $temp = "";
    }
    else
        $temp .= $c;
}
$array[] = $temp; 
```

我没有测试代码，但我希望很清楚它应该做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:43:46.337

这似乎有效（但也许这不是最好的解决方案）:)

```
preg_match_all('/\w[\w\s-]*(?:\[.*?\]|\(.*?\))?/', $string, $matches); 
```

它正在检查单词字符后跟 0 个或多个字符/空格/破折号（将您想要捕获的任何内容添加到该组），然后是 [...] 或 (...) 或什么都没有（但相同类型的括号不能嵌套

所以你可以拥有：

```
- something
- anything [...]
- something different (...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:02:26.193

这个正则表达式似乎适用于您的示例。您将无法爆炸，但它确实捕获了每个项目/组，然后您可以循环遍历

```
([\w+ ]+\[[^\]]+\]|[\w+ ]+\([^\)]+\)|[\w+ ]+) 
```

在此处查看[演示](http://regexr.com?333et)

分解它：

```
(                      start capture group
[\w+ ]+\[[^\]]+\]    match any words followed by [...]
|                      or
[\w+ ]+\([^\)]+\)    match any words followed by (...)
|                      or
[\w+ ]+              match any other words
)                      end capture group 
```

# php - 表格重复

> ID：13803963
> 
> 赞同：1
> 
> 时间：2012-12-10T15:30:45.313
> 
> 标签：php, mysql

我很难弄清楚如何在我的代码中编写 if 函数。我试图阻止我的 PHP 表单允许将重复项提交到我的 MySQL 数据库。我想根据输入到我的表单中的电子邮件地址来阻止提交。有人可以指导我正确的方向吗？谢谢。

```
<?php
  $dbc = mysqli_connect('n/a', 'n/a', 'n/a', 'n/a')
    or die('Error connecting to MySQL server.');

  $store_name = $_POST['storename'];
  $full_name = $_POST['fullname'];
  $address = $_POST['address'];
  $city = $_POST['city'];
  $state = $_POST['state'];
  $zip = $_POST['zip'];
  $phone = $_POST['phone'];
  $fax = $_POST['fax'];
  $email = $_POST['email'];
  $url = $_POST['url'];

  $query = "INSERT INTO store_location (store_name, full_name, address, city, state, zip,     phone, fax, email, url)  VALUES ('$store_name', '$full_name', '$address', '$city',     '$state', '$zip', '$phone', '$fax', '$email', '$url')";
  mysqli_query($dbc, $query)
or die('Error querying database.');

  echo 'New TeachPro store added.';
   echo '<br/><br/>';

  mysqli_close($dbc);
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:34:03.027

您应该在数据库表的电子邮件列上使用唯一键。现在，如果您尝试两次插入相同的电子邮件地址，MySQL 会以相应的错误消息进行响应。您可以捕获这些错误消息并向用户显示有用的错误消息文本。

我用这种方法检查用户名：

```
try
{
    /** @var $userInsertUpdateStmt PDOStatement */

    $userInsertUpdateStmt->execute();
}
catch(PDOException $e)
{
    if($e->errorInfo[1] == 1062)
    {
        /* username already used */
        return User::ERR_USERNAME_ASSIGNED;
    }
    return User::ERR_SQL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:36:56.417

```
SELECT count(*) FORM ... WHERE store_name = ... OR full_name=... 
```

如果此查询的结果为 0 行，那么您就可以开始了。

此外，您的查询容易受到 SQL 注入（google that）的攻击。

# jquery - jQuery - 将验证插件与 AJAX 表单插件一起使用

> ID：13803967
> 
> 赞同：1
> 
> 时间：2012-12-10T15:30:07.540
> 
> 标签：jquery, jquery-plugins, jquery-validate

我已经使用了 validate 插件和 AJAX 表单插件取得了巨大的成功，但是将它们一起使用让我感到困惑。

如果我使用 validate 插件进行验证，那么在成功后，发布 AJAX 表单，没有任何反应。字面上地。即使在 Firebug 中，AJAX 插件似乎也没有做任何事情。

如果我反过来尝试，我使用 beforeCallback 然后调用 jQuery validate 插件......没有完成验证，但表单提交到页面。

所以我可以让每个插件工作，但不能一起工作。

有人有什么主意吗？我描述的第一条路线在这里使用如下：

```
function sendFormVacancy() {

    alert("submit"); // This does get called, but the code below doesn't submit the form.

    var options = {

        beforeSubmit:  validateRequest,
        target:     "#messages",
        clearForm:  true,
        type:       "POST",
        url:        "/form-vacancy.php",

        success: function() {
            $('#messages').html("<p><?php _e("Application sent!", "tokheim"); ?></p>").css('color', 'green');
        },

        error: function() {
            $('#messages').html("<p><?php _e("Sorry, an error occurred.", "tokheim"); ?></p>").css('color', 'red'); 
        }

    }; 

    $("#static-form-vacancy").ajaxForm(options);

}

$("#static-form-vacancy").validate({ 

    rules: { 

        fieldfile:"required",
        fieldtitle:"required",
        fieldfirstname:{ required: true }, 
        fieldlastname:"required", 
        fieldaddress1:"required",
        fieldcity:"required",
        fieldcountry:"required",
        fieldphone:"required",
        fieldemail:{ required: true, email: true },
        fieldcontactmethod:"required",
        fieldrelocate:"required",
        fieldcomments:"required"

    }, 

    messages: { 

        fieldfile:"<?php _e("Select a file to upload", "tokheim"); ?>",
        fieldtitle:"<?php _e("Select your title", "tokheim"); ?>",
        fieldfirstname:{ required:"<?php _e("Enter your firstname", "tokheim"); ?>" },
        fieldlastname:"<?php _e("Enter your lastname", "tokheim"); ?>",
        fieldaddress1:"<?php _e("Enter your address", "tokheim"); ?>",
        fieldcity:"<?php _e("Enter your city", "tokheim"); ?>",
        fieldcountry:"<?php _e("Enter your country", "tokheim"); ?>",
        fieldphone:"<?php _e("Enter your phone number", "tokheim"); ?>",
        fieldemail:{ required:"<?php _e("Please enter an email address", "tokheim"); ?>", email:"<?php _e("Email is not valid", "tokheim"); ?>" },
        fieldcontactmethod:"<?php _e("Select an option", "tokheim"); ?>",
        fieldrelocate:"<?php _e("Select an option", "tokheim"); ?>",
        fieldcomments:"<?php _e("Enter your comments", "tokheim"); ?>"

    },

    submitHandler: function() { 
        sendFormVacancy(); 
    }

}); 
```

我使用的 jQuery 验证插件是： [http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我使用的 AJAX 表单提交脚本是： http: [//malsup.com/jquery/form/](http://malsup.com/jquery/form/)

现在，我可以简单地使用 AJAX 以“手动”方式提交它......但是，我使用这个插件的原因是因为它通过 AJAX 处理文件上传，这是我需要的功能。

任何帮助将不胜感激。我要拔头发了！

是否与每个插件以某种方式绑定到表单并锁定另一个有关？

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T10:59:48.853

在 ajaxForm 的 beforeSubmit 处理程序中调用 .valid()。

```
$('#myForm').validate({
    rules: {
        /* rules */
    },
    messages: { 
        /* messages */
    },
    submitHandler: function () {
        /* update ui before post */
    }
});

$('#myForm').ajaxForm({
    dataType: 'json',
    beforeSubmit: function () { return $('#myForm').valid(); },
    success: function (data) { /*callback, update ui after post*/ }
}); 
```

# sql - SQL 如何？从一张表中选择所有项目，然后根据另一张表填补空白？

> ID：13803969
> 
> 赞同：0
> 
> 时间：2012-12-10T15:30:15.013
> 
> 标签：sql, sql-server-2008

首先，感谢您抽出时间阅读本文，请原谅标题，我不太确定如何描述我的问题。

我有两张桌子。一个用于 SystemUsers，另一个用于 PrintingPermissions。

**打印权限表**

**ID** ---- **SystemUserID** --- **PrintGroupTypeID** --- **CanPrint**
1 ----------- 22 ----------- -- 1 -------------------真

2 ---------- 22-------------- 2 ---------- - - - - -真的

3 ----------- 22 ------------- 3 ------------ - - - - 错误的

4 ----------- 23 ------------- 1 ------------ - - - - 真的

.

.

**系统用户表**

**ID** ----------- **姓名**
22 ------------ 罗伯特

23 --------- 约翰

24 ------------ 西蒙

25 --------- 凯特

我需要一个选择查询，它将根据 PrintingPermissions.PrintGroupTypeID 生成所有用户及其 PrintPermissions 的列表。需要注意的是，如果用户未列在 PrintPermissions 表中，我仍然希望创建他们的对象，但 CanPrintValue 为 FALSE 或 NULL。

即，在选择printGrouPtypeID = 1的位置时，上面提供的表数据的输出应如下所示。

.

.

结果（其中 PrintGroupTypeID = 1）

**名称**----- **SystemUserID** ----- **CanPrint**

罗伯特 --------- 22 -------- 真

约翰 ----------- 23 --------- 是的

Simon --------- 24 --------- False **//-- 不在权限表中，默认 false 创建**

Kate ----------- 25 --------- False **//-- 不在权限表中，默认为 false**

再次感谢您抽出宝贵时间，如果您不完全理解我想要达到的目标，请告诉我。

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:40:15.540

```
SELECT DISTINCT su.Name, su.ID, ISNULL(pp.CanPrint, CAST 0 AS BIT) as CanPrint
FROM SystemUser su 
LEFT JOIN Printing Permissions pp ON su.ID = pp.SystemUserID AND pp.PrintGroupTypeID = @TargetPrintGroupTypeID 
```

如果你想要 null 而不是 false，你可以省略 ISNULL 函数，直接选择 CanPrint。这将为您提供三种状态结果（true、false、null），并允许您确定哪些用户被禁止（false）以及哪些用户不在打印组中（null）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:40:17.533

怎么样：

```
Select s.name as name,
       s.id as SystemUserID,
       isnull(p.canprint, 'false') as CanPrint
  From systemusers s
  Left outer Join printingpermissions p on s.id = p.systemuserid
 Where p.printgrouptypeid = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:40:50.467

好的，我刚刚设法解决了。

这是查询：

```
SELECT        SystemUsers.Name, ISNULL(PrintingPermissions.CanPrint, 'FALSE') AS CanPrint
FROM            SystemUsers LEFT OUTER JOIN
                         PrintingPermissions ON SystemUsers.ID = PrintingPermissions.SystemUserID AND 
                         PrintingPermissions.PrintingGroupTypeID = @ID 
```

# c# - 搜索文件结构以计算子文件夹中的项目

> ID：13803971
> 
> 赞同：1
> 
> 时间：2012-12-10T15:30:56.843
> 
> 标签：c#, file-structure

我在尝试通过搜索文件结构来创建列表时遇到问题。试图制作一个可以运行并执行此操作的基本 c# 控制台程序。

我的结构如下所示。

我的网络\
X1\用户\（许多用户文件夹）\搜索特定的子文件夹\在该子文件夹内的任何文件夹的文本文件中列出

所以我必须能够搜索每个用户文件夹，然后检查一个文件夹（每次都相同）然后使用以下格式列出该子文件夹中找到的文件夹

用户名（用户文件夹的名称）>> 特定文件夹中的文件夹名称。

自从我不得不尝试在文件结构中搜索任何东西以来，已经很长时间了，因此对此非常空白。

****** *** ** *** ** *** ** *** ******编辑！！！！！！**

 **感谢您的信息和链接。现在正在研究这个，但想知道这是否有意义并且会起作用。不想只是在我确保它看起来不会搞砸之前对其进行测试。

```
 TextWriter outputText = new StreamWriter(@"C:\FileList.txt", true);
        outputText.WriteLine("Starting scan through user folder");
        string path = @"\\X1\users";
        string subFolder = "^^ DO NOT USE - MY DOCS - BACKUP ^^";
        string [] user_folders = Directory.GetDirectories(path);

        foreach (var folder in user_folders)
        {
            string checkDirectory = folder + "\\" + subFolder;

            if (Directory.Exists(checkDirectory) == true)
            {
                string [] inner_folders = Directory.GetDirectories(checkDirectory);
                foreach (var folder2 in inner_folders)
                {
                    outputText.WriteLine(folder2);
                }
            }
        }
        outputText.WriteLine("Finishing scan through user folder");
        outputText.Close(); 
```

固定和工作！！！！必须更改字符串 [] 行，使其成为 .GetDirectories 而不是 .GetFiles！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:39:21.237

正如 Bali C 所提到的，Directory 类将成为你的朋友。以下示例应该可以帮助您入门。

来自：[http ://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/3ea19b83-b831-4f30-9377-bc1588b94d23/](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/3ea19b83-b831-4f30-9377-bc1588b94d23/)

```
//Obviously you'll need to define the correct path.
string path = @"My Network\X1\Users\(many many user folders)\Search for a specific sub folder \";

// Will Retrieve count of all files in directry and sub directries
int fileCount = Directory.GetFiles(path, "*.*", SearchOption.AllDirectories).Length; 

// Will Retrieve count of all files in directry but not sub directries
int fileCount = Directory.GetFiles(path, "*.*", SearchOption.TopDirectory).Length; 

// Will Retrieve count of files .txt extensions in directry and sub directries
int fileCount = Directory.GetFiles(path, "*.txt", SearchOption.AllDirectories).Length; 
```

如果您需要在 /Users/ 文件夹中搜索某些人或某些条件，您可以执行以下操作：

```
string path = @"PATH_TO_USERS_DIRECTORY";
string [] user_folders = Directory.GetFiles(path);
foreach(var folder in user_folders)
{
    if folder == "MyFolder";
        Process(folder);  //Search the directory here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:47:05.623

尝试以下实现。这只会写入控制台：

```
const string root = "<<your root path>>";
const string directoryToLookFor = "<<the folder name you are looking for>>";
foreach (var directory in Directory.EnumerateDirectories(root, "*.*", SearchOption.TopDirectoryOnly))
{
    var foundDirectory = Directory.EnumerateDirectories(directory, directoryToLookFor, SearchOption.TopDirectoryOnly).FirstOrDefault();
    if (!String.IsNullOrEmpty(foundDirectory))
    {
        var filesInside = Directory.GetFiles(foundDirectory);
        foreach (var file in filesInside)
        {
            Console.WriteLine(file);
        }
    }
} 
```

或者你可以这样做：

```
foreach (var foundDirectory in Directory.EnumerateDirectories(root, directoryToLookFor, SearchOption.AllDirectories))
{
    var filesInside = Directory.GetFiles(foundDirectory);
    foreach (var file in filesInside)
    {
        Console.WriteLine(file);
    }
} 
```

它将在所有子目录中搜索，而无需遍历用户的文件夹。**

# c# - Windows 身份验证在服务器上不起作用

> ID：13803973
> 
> 赞同：2
> 
> 时间：2012-12-10T15:30:27.837
> 
> 标签：c#, asp.net, webserver

我正在用 ASP.NET 和 C# 开发一个网站。

我已经创建了网站，所以当用户访问该网站时，他的 Windows 客户端用户名会被读出：

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToString(); 
```

然后我在数据库中查找他的用户名，并从返回数据中创建一个包含所有必要数据（团队、姓名、权限级别、角色...）的用户对象。然后我将此对象保存在会话变量中，直到用户注销。

这在本地就像一个魅力，但现在我已经部署到我`defaultAppPool`为每个用户获得的服务器上。

我究竟做错了什么？

在我的 web.config 文件中，我有：

```
authentication mode="Windows" 
```

我不得不承认这是我第一次自己进行部署，除此之外一切都很顺利。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:28:06.807

正如您所发现的，`System.Security.Principal.WindowsIdentity.GetCurrent()`它为您提供了应用程序池的标识。

你应该使用`HttpContext.Current.User.Identity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:21:31.117

Windows 身份验证和 IIS 如果为 ASP.NET 应用程序选择 Windows 身份验证，则还需要在 IIS 中配置身份验证。这是因为 Windows 身份验证被委托给 IIS。IIS 为您提供四种身份验证方法供您选择：

1.  如果选择匿名身份验证，IIS 不会执行任何身份验证。任何人都可以访问 ASP.NET 应用程序。
2.  如果选择基本身份验证，用户必须提供 Windows 用户名和密码才能连接。此信息以明文形式通过网络发送，使基本身份验证在 Internet 上变得非常不安全。
3.  如果您选择摘要式身份验证，用户仍必须提供 Windows 用户名和密码才能连接。但是，密码在通过网络发送之前会经过哈希处理。摘要式身份验证要求所有用户都运行 Internet Explorer 5 或更高版本，并且 Windows 帐户存储在 Active Directory 中。
4.  如果您选择 Windows 集成身份验证，则密码永远不会通过网络。用户仍必须拥有 Windows 用户名和密码，但使用 Kerberos 或质询/响应协议对用户进行身份验证。Windows 集成身份验证要求所有用户都运行 Internet Explorer 3.01 或更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T17:40:59.873

获取当前用户身份为：

```
var userWinId = HttpContext.Current.User.Identity as WindowsIdentity; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-18T20:02:02.577

采用

`System.Web.HttpContext.Current.User.Identity.Name`

代替

`User.Identity.Name`

或者

`System.Security.Principal.WindowsIdentity.GetCurrent().Name`

# objective-c - nsxmlparser 读取根元素

> ID：13803974
> 
> 赞同：0
> 
> 时间：2012-12-10T15:31:16.140
> 
> 标签：objective-c, ios, xcode, nsxmlparser

我正在尝试获取根元素。基于根元素我想触发一个功能。

例如，xml 看起来像这样：

```
 <State>
     <Name>California</Name>
     <Time>CA Time.</Time>
     <Time>CA Time2.</Time>
     <Notes>This is a note for California</Notes>
  </State> 
```

下一个传入的 xml 如下所示：

```
 <country>
     <Name>USA</Name>
     <Time>west coast Time.</Time>
  </country> 
```

所以基于根元素我想触发正确的功能。我正在使用当前的`NSXmlparser`委托方法。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict;

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName;

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string; 
```

但它似乎跳过了根元素。我是否错过了任何可以首先获取根元素的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:41:44.637

看一下这个：

```
- (void)parser:(NSXMLParser *)parser 
didStartElement:(NSString *)elementName 
namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qName 
attributes:(NSDictionary *)attributeDict
{    
    currentKey = nil;
    [currentStringValue release];
    currentStringValue = nil;
    if([elementName isEqualToString:@"State"]){
       // Here you got the your root...
    }
}

- (void)parser:(NSXMLParser *)parser 
foundCharacters:(NSString *)string
{
    if(currentKey){
        if(!currentStringValue){ // Here you got the contents...
            // Store them somewhere in case you need them...
            currentStringValue = [[NSMutableString alloc] initWithCapacity:200];
        }
        [currentStringValue appendString:string];
    }
}

-(void)parser:(NSXMLParser *)parser 
didEndElement:(NSString *)elementName 
namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"State"]){
        // Do what you want here...
        return;
    }
} 
```

这是来自苹果的链接，请始终阅读文档及其代码示例... [http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NSXML_Concepts/NSXML.html#//apple_ref/文档/uid/TP40001263-SW1](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NSXML_Concepts/NSXML.html#//apple_ref/doc/uid/TP40001263-SW1)

我不是 100% 确定，但我认为它有效......

因此，您可以为县进行更改。

# java - 是否可以使用 Spring-WS 从 WSDL 文件创建 WS 客户端？（好像没有）

> ID：13803977
> 
> 赞同：7
> 
> 时间：2012-12-10T15:31:19.673
> 
> 标签：java, spring, wsdl, spring-ws

**我想知道是否可以使用 Spring Web Services 从 WSDL 文件创建 Web Services 客户端**。

我的意思是从 WSDL 开始，我暂时没有任何 XSD。

但是我已经阅读了 Josh Long 的“Spring Recipes A Problem-Solution Approach”、Hamidreza Sattari 的“Spring Web Services 2 Cookbook”和教程本身（[6\. 在客户端上使用 Spring Web Services](http://static.springsource.org/spring-ws/site/reference/html/client.html)）并且没有提到这个特性。

我还阅读了其他帖子，例如[Webservice-Client: Common approach with Spring WS, JAXB and just a WSDL file?](http://forum.springsource.org/showthread.php?112200) ，或[来自 WSDL 的 Spring-ws 客户端](https://stackoverflow.com/questions/2641046/spring-ws-client-from-wsdl)（此处为 stackoverflow），但没有任何进一步的结果。

我什至在 Spring 论坛上问过这个问题，但在阅读 60 多次后没有任何回应：[是否可以使用 SWS 从 WSDL 文件创建 WS-client？（好像没有）](http://forum.springsource.org/showthread.php?133116)

也许这是不可能的。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T16:10:16.733

你可以这样做：

1.  使用 JDK 发行版附带的 xjc 工具生成您的 java 类型 -`xjc -wsdl file.wsdl`

2.  然后使用生成的java类型，使用WebserviceTemplate，[这里](http://static.springsource.org/spring-ws/sites/2.0/reference/html/client.html#client-web-service-template)描述创建客户端。

# mysql - 访问不同数据库中的表

> ID：13803978
> 
> 赞同：0
> 
> 时间：2012-12-10T15:31:28.987
> 
> 标签：mysql

似乎是一个微不足道的问题，但对我不起作用。我需要从 db A (news) 获取数据并对照 db B (news-backup) 进行检查。它们位于同一个地方，不需要身份验证（至少我认为）。`error 1146, table "news.news" doesnt exist.`当我尝试使用第二个访问数据库时，它给了我一个

```
SELECT B.`comment`
FROM news A, `news-backup`.`data` B
WHERE B.source = A.rss_atom.id and B.feed = "rss-atom" 
```

`rss_atom`并且`data`是表格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:37:22.670

您需要在 FROM 子句中指定数据库名称和表，试试这个：

```
SELECT B.comment
FROM news.rss_atom A, news-backup.data B
WHERE B.source = A.id AND B.feed="rss-atom" 
```

我希望我的表结构正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:36:42.700

它们位于不同的数据库中，因此除非您使用`use database A`（或 B）指定更改，否则您无法看到所有对象。此外，您可以尝试将数据库名称设置为您正在查询的表的前缀，如果数据库可以通过相同的连接使用并且连接的用户被授予足够的权限来查询两个数据库上的表。

这个答案可能会有所帮助。[如何在一个网页上连接多个 MySQL 数据库？](https://stackoverflow.com/questions/274892/how-do-you-connect-to-multiple-mysql-databases-on-a-single-webpage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:39:07.053

```
SELECT B.`comment`
FROM `news`.`rss_atom` A, `news-backup`.`data` B
WHERE B.source = A.rss_atom.id and B.feed = "rss-atom" 
```

猜测一下，如果您使用的是新闻数据库，那么

```
SELECT B.`comment`
FROM `rss_atom` A, `news-backup`.`data` B
WHERE B.source = A.rss_atom.id and B.feed = "rss-atom" 
```

新闻数据库中没有表格新闻是一个不错的线索。

# macos - mac中的wxPython FileDialog崩溃

> ID：13803982
> 
> 赞同：0
> 
> 时间：2012-12-10T15:31:33.830
> 
> 标签：macos, python-2.7, wxpython

我有以下代码：

```
import wx
from sys import platform

wildcard = "CSV files|*.csv|"\
           "XML files|*.xml|"\
           "Microsoft Excel files|*.xlsx" if platform == "win32" else "CSV files|*.csv|"\
                                                                      "XML files|*.xml|"

if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    wx.InitAllImageHandlers()
    frame_1 = wx.Frame(None, -1, "")
    app.SetTopWindow(frame_1)
    frame_1.Show()
    dlg = wx.FileDialog(
            frame_1, message="Choose a file",
            defaultDir="",
            defaultFile="",
            wildcard=wildcard, #PROBLEM IS HERE THAT'S FOR SURE
            style=wx.OPEN
    )
    dlg.ShowModal() #IT CRASHES HERE
    dlg.Destroy()
    app.MainLoop() 
```

此 FileDialog 在 Windows 和 Linux 中完美运行，但在 Mac OS X 中崩溃。为了让 FileDialog 在 Mac OS X 中正常工作，我可以更改什么吗？

Python 2.7.3、wxPython 2.8、Mac OS X 10.6

**更新：更新为一个小样本。**

**更新2：没有“通配符”参数它工作得很好，但无论如何我都需要通配符。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:56:22.890

刚刚自己找到答案：

[http://trac.wxwidgets.org/ticket/4489](http://trac.wxwidgets.org/ticket/4489)

删除最后一个“|”后，当通配符格式不正确时，它在 Mac 中崩溃 在通配符中一切正常。

# jquery - 下拉列表中的jQuery defaultValue

> ID：13803991
> 
> 赞同：1
> 
> 时间：2012-12-10T15:31:56.000
> 
> 标签：jquery

下拉列表中没有 defaultValue 吗？因为它在文本框中，如下所示： $('input#FromDateTextBox')[0].defaultValue;

我四处搜索，并没有在下拉列表中找到有关 defaultValue 的任何信息。那么解决这个问题的最佳方法是什么？是从服务器端添加数据属性吗？

因为我想查看页面加载时的默认值。即使我更改列表中的选定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:34:03.830

假设在页面加载时没有`option`具有`selected="true"`属性的元素，那么默认选项将是列表中的第一个：

```
var defaultOption = $('#mySelect option:first'); 
```

否则，如果有`selected`属性集，您可以使用属性选择器：

```
var defaultOption = $('#mySelect option[selected="true"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:01:34.710

像这样设置下拉列表默认值：

```
$('#mySelect').find('option[value="defaultValue"]').prop('selected',true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:38:56.320

$("#mydropdown").val("myval")

是你需要的

并且为了检索值，您可以使用

$("#mydropdown").val()

# javascript - 点导航 JQuery 幻灯片放映

> ID：13803993
> 
> 赞同：1
> 
> 时间：2012-12-10T15:32:05.087
> 
> 标签：javascript, jquery

我对 JQuery 很陌生，我有一个关于点导航的问题......

我有一些我整理的英雄内容（使用来自这里的帖子和 JQuery 站点）。基本上我有 3 个 div 容器，它们被隐藏并在一个循环中显示。我还有其他三个 div 容器，其中包含我想用作导航的点。在循环期间，点会改变颜色以表示页面当前所在的“幻灯片”。

我现在要做的是为每个点添加一个点击事件，以便循环跳转到并显示相应的内容。

我的 Java 脚本如下。

```
 $('.heroContBG').each(function() {
        $(this).hide(0);
    });
    $('.heroContBG').first().show(0);
    $('.heroDots').last().removeClass('heroNavOff').addClass('heroNavOn');
    var delay = 6000; //Set delay time
    var divIdx = 0; //Set divIdx value
    var arrDiv = $('.heroContBG').toArray(); //Assign all heroContBG divs to array
    var arrDot = $('.heroDots').toArray(); //Assign all heroDots divs to array
    arrDot = arrDot.reverse(); //Reserve array index for Dot Navigation  

    function heroBG(){
        var $out = $(arrDiv[divIdx]); //Set $out variable to current array index (set by divIdx)
        var $dotOut = $(arrDot[divIdx]); //Set dotOut variable to current array index (set by divIdx)
        divIdx = (divIdx + 1) % arrDiv.length; //Convert array index 0-2 into 1-3
        var $in = $(arrDiv[divIdx]); //Set $in to $arrDix[divIdx]
        var $dotIn = $(arrDot[divIdx]); //Set $dotIn to $arrDot[divIdx]
        $out.fadeOut(600).hide(); //Hide element
        $dotOut.removeClass('heroNavOn').addClass('heroNavOff'); //Swap classes on .heroDots
        $in.fadeIn(1600).show(); //Show next element
        $dotIn.removeClass('heroNavOff').addClass('heroNavOn'); //Swap classes on .heroDots
    }
    setInterval(heroBG, delay); //Tell browser to loop through elements. 
```

我认为我需要做的是让一个点击事件设置 divIdx 值以匹配相应 div 容器的值，但到目前为止我还没有运气。

我会继续玩这个，如果我成功了，我会在这里发布。如果其他人知道如何做到这一点，那就太好了。

我还应该提到我真的不想使用 3rd 方插件，因为我非常热衷于提高我的 JQuery 技能。

干杯，

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:22:08.880

只需使用[$('.heroDots').index(myClickedHeroDot)](http://api.jquery.com/index/)即可获取目标兄弟的位置。然后将返回的索引值赋给 divIdx。

希望这可以帮助 ：）

# fonts - Corona SDK 获取所用字体的名称

> ID：13803997
> 
> 赞同：0
> 
> 时间：2012-12-10T15:32:09.750
> 
> 标签：fonts, lua, coronasdk

我有一个问题，对你来说可能是一个奇怪的问题，因为它可能没有多大意义。

无论如何，我在故事板的 3 个场景上展示了一个短篇故事，（它实际上是 Bel Air 歌词中的新鲜王子，不要问为什么。;)）它们都有不同的字体。

现在我想做一个按钮，这样当我按下它时，我希望应用程序“获取”当前使用的字体，并显示它。

按钮和听众等不是问题，得到了覆盖。但是我如何“获取”字体名称？我不想使用变量，只是将名称保存为字符串。我希望程序找到它的名称。

希望这有任何意义。谢谢！/ 乔金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:45:22.273

如果你只是这样做：

```
 local someText = display.newText("Hello World", 0, 0, "Helvetica", 32) 
```

然后我看不到获取文本正在使用的字体的方法。但是，如果您这样做：

```
 local someText = display.newText("Hello World", 0, 0, "Helvetica", 32)
 someText.font = "Helvetica" 
```

这将更改字体，在本例中为 Helvetica，这就是它已经存在的内容，然后您可以简单地查看该属性：

```
 print(someText.font) 
```

获取字体。如果您执行第一种方法，则未设置。但归根结底，您正在设置一个变量。在这种情况下，它是对象的一部分而不是单独的表。

# xml - 实体名称错误

> ID：13803999
> 
> 赞同：1
> 
> 时间：2012-12-10T15:32:20.127
> 
> 标签：xml, xslt

我正在开发一个通过 JAR 文件分发的 Java 桌面，该 JAR 包含应用程序所需的一切。通过首先生成 XML 文件，然后使用 XSL 文件将 XML 转换为 HTML 来为各种事物生成 HTML 报告的应用程序。生成报告后，它需要是一个文件，因此我想使用的任何脚本都必须包含在文件中，并且我想使用 jQuery。我在资源文件夹中有一个 jQuery 文件，我可以解析它并将其添加到 XML 文件中，但是当需要通过 XSL 将 XML 转换为 HTML 时，我收到以下错误：

```
ERROR:  'The entity name must immediately follow the '&' in the entity reference.'
javax.xml.transform.TransformerException: javax.xml.transform.TransformerException: com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: The entity name must immediately follow the '&' in the entity reference.
ERROR:  'com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: The entity name must immediately follow the '&' in the entity reference.' 
```

阅读错误我可以看到我需要编码特殊字符，但我不准备手动编码整个 jQuery 文件。

所以我的最终目标是：

1.) 需要在我的 HTML 报告中包含以下内容：

```
<script>
// the entire jQuery library
</script> 
```

2.) 我的主应用程序必须完全包含在一个 JAR 文件中

3.) 我不想将 jQuery 库复制/粘贴到 XSL 文件中。这行得通，但看起来很草率。

**更新＃1：**

我在上面的第 3 点上错了。我无法将 jQuery 库复制/粘贴到 XSL 文件中而不会出现错误：

```
java.io.UTFDataFormatException: encoded string too long: 239677 bytes 
```

紧随其后的是更可笑的错误：

```
javax.xml.transform.TransformerConfigurationException: This Templates does not contain a class with the name 'GregorSamsa'. 
```

[变形记中的](http://en.wikipedia.org/wiki/The_Metamorphosis)GregorSamsa

**更新#2：**

我的 XSL 样式表的开头是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"

    <xsl:output method="html"/> 
```

我将版本号从 a 更改`1.0`为 a`2.0`但我收到一个错误消息：

```
ERROR:  'Unsupported XSL element 'http://www.w3.org/1999/XSL/Transform:sequence''
javax.xml.transform.TransformerException: java.lang.RuntimeException: Unsupported XSL element 'http://www.w3.org/1999/XSL/Transform:sequence' 
```

此外，我的 jQuery 文件与我的 XSL 样式表位于同一位置，因此我认为以下内容应该有效（但它没有）：

```
<xsl:sequence select="unparsed-text('jquery-1.8.3.min.js')" /> 
```

**更新#3：**

Downloaded Saxon for Java [here](http://www.saxonica.com/download/download_page.xml) and added the JAR file to my application. Change my call to transformer factory to this:

```
TransformerFactory f = new net.sf.saxon.TransformerFactoryImpl(); // was TransformerFactory.newInstance();
Transformer t = f.newTransformer( new StreamSource( Example.class.getResourceAsStream( "resource/report_style.xsl" ) ) );
Source s = new StreamSource( XMLFile );
Result r = new StreamResult( HTMLFile );
t.transform( s, r ); 
```

Using the suggested `<xsl:sequence select="unparsed-text('jquery-1.8.3.min.js')" />` I still get the equivalent of my original error, though now with Saxon parser:

```
net.sf.saxon.trans.XPathException: org.xml.sax.SAXParseException: The entity name must immediately follow the '&' in the entity reference.
SXXP0003: Error reported by XML parser: The entity name must immediately follow the '&' in the entity reference. 
```

**UPDATE #4:**

I wasn't getting anywhere with this so I ended up reading the HTML file back in after I had created it, added my JavaScript to it, then wrote it back out. This is an extra step, but any difference in report generation time is imperceivable and it works. I would still be interested to know why XSLT 2.0 wasn't solving this for me though.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:04:49.903

如果您可以使用 XSLT 2.0，您可以尝试

```
<script>
  <xsl:sequence select="unparsed-text('path/to/jqueryvNN.js')" />
</script> 
```

那应该将 jquery 库定义复制为文本，并在 HTML 中适当地输出它们。您正在使用 HTML 输出方法，对吗？`cdata-section-elements="script"`使用（[在此处](http://www.w3.org/TR/xslt-xquery-serialization/#XML_CDATA-SECTION-ELEMENTS)记录）诱导 XSLT 以更有效和更易于阅读的方式序列化 javascript也是一个好主意。（如果您使用的是标准的缩小版库，那么无论如何它都不是非常易于阅读的。）

由于 XSLT 不需要解析 js 文件，因此您不会抱怨未转义的 & 符号等。